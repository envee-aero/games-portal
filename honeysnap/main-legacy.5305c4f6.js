!function(){var t=["id"];function set(t,i,o,a){return set="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function set(t,i,o,a){var u,d=_superPropBase(t,i);if(d){if((u=Object.getOwnPropertyDescriptor(d,i)).set)return u.set.call(a,o),!0;if(!u.writable)return!1}if(u=Object.getOwnPropertyDescriptor(a,i)){if(!u.writable)return!1;u.value=o,Object.defineProperty(a,i,u)}else _defineProperty(a,i,o);return!0},set(t,i,o,a)}function _set(t,i,o,a,u){if(!set(t,i,o,a||t)&&u)throw new TypeError("failed to set property");return o}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,i,o){var a=_superPropBase(t,i);if(a){var u=Object.getOwnPropertyDescriptor(a,i);return u.get?u.get.call(arguments.length<3?t:o):u.value}},_get.apply(this,arguments)}function _superPropBase(t,i){for(;!Object.prototype.hasOwnProperty.call(t,i)&&null!==(t=_getPrototypeOf(t)););return t}function _slicedToArray2(t,i){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,i){var o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var a,u,d,b,S=[],C=!0,M=!1;try{if(d=(o=o.call(t)).next,0===i){if(Object(o)!==o)return;C=!1}else for(;!(C=(a=d.call(o)).done)&&(S.push(a.value),S.length!==i);C=!0);}catch(P){M=!0,u=P}finally{try{if(!C&&null!=o.return&&(b=o.return(),Object(b)!==b))return}finally{if(M)throw u}}return S}}(t,i)||_unsupportedIterableToArray(t,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _objectWithoutProperties(t,i){if(null==t)return{};var o,a,u=function _objectWithoutPropertiesLoose(t,i){if(null==t)return{};var o,a,u={},d=Object.keys(t);for(a=0;a<d.length;a++)o=d[a],i.indexOf(o)>=0||(u[o]=t[o]);return u}(t,i);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(t);for(a=0;a<d.length;a++)o=d[a],i.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(t,o)&&(u[o]=t[o])}return u}function _toConsumableArray2(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _inherits(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&_setPrototypeOf(t,i)}function _setPrototypeOf(t,i){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,i){return t.__proto__=i,t},_setPrototypeOf(t,i)}function _createSuper(t){var i=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,a=_getPrototypeOf(t);if(i){var u=_getPrototypeOf(this).constructor;o=Reflect.construct(a,arguments,u)}else o=a.apply(this,arguments);return _possibleConstructorReturn(this,o)}}function _possibleConstructorReturn(t,i){if(i&&("object"===_typeof(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function ownKeys(t,i){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);i&&(a=a.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),o.push.apply(o,a)}return o}function _defineProperty(t,i,o){return(i=_toPropertyKey(i))in t?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,t}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,i){for(var o=0;o<i.length;o++){var a=i[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,_toPropertyKey(a.key),a)}}function _createClass(t,i,o){return i&&_defineProperties(t.prototype,i),o&&_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var i=function _toPrimitive(t,i){if("object"!==_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var a=o.call(t,i||"default");if("object"!==_typeof(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(t)}(t,"string");return"symbol"===_typeof(i)?i:String(i)}function _createForOfIteratorHelper(t,i){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=_unsupportedIterableToArray(t))||i&&t&&"number"==typeof t.length){o&&(t=o);var a=0,u=function F(){};return{s:u,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:u}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var d,b=!0,S=!1;return{s:function s(){o=o.call(t)},n:function n(){var t=o.next();return b=t.done,t},e:function e(t){S=!0,d=t},f:function f(){try{b||null==o.return||o.return()}finally{if(S)throw d}}}}function _unsupportedIterableToArray(t,i){if(t){if("string"==typeof t)return _arrayLikeToArray(t,i);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(t,i):void 0}}function _arrayLikeToArray(t,i){(null==i||i>t.length)&&(i=t.length);for(var o=0,a=new Array(i);o<i;o++)a[o]=t[o];return a}System.register([],(function(){"use strict";return{execute:function execute(){var i,o=function IsArray(t){return"[object Array]"===Object.prototype.toString.call(t)},a=function(){function AssetPackLoader(){_classCallCheck(this,AssetPackLoader),this._files={jsons:[],png:[]},this.request=null,this.loadFuncDict=null}return _createClass(AssetPackLoader,[{key:"fillRequestDataFrom",value:function fillRequestDataFrom(t){console.assert(t,"data is: ",t),o(t)||console.error("TODO: implement for object that isnt array"),this.request=t}},{key:"supplyLoadFunctionDictionary",value:function supplyLoadFunctionDictionary(t,i){this.loadFuncDict=function getAssetPackLoaderForScene(t,i){return{begin:function begin(){t.load.on("loaderror",(function(t){console.warn("error loading: ",t)}),t),t.load.once("complete",(function(){var o=i;t.load.removeAllListeners(),t.load.reset(),o()}))},audio:function audio(i,o){t.load.audio(i,[o+"/"+i+".mp3",o+"/"+i+".ogg"])},font:function font(i,o){t.load.bitmapFont(i,o+"/"+i+".png",o+"/"+i+".xml")},text:function text(i,o){t.load.text(i,o+"/"+i+".txt")},json:function json(i,o){t.load.json(i,o+"/"+i+".json")},png:function png(i,o){t.load.image(i,o+"/"+i+".png")},spine:function spine(i,o){t.load.spine(i,o+"/"+i+".json",o+"/"+i+".atlas")},multiatlas:function multiatlas(i,o){t.load.multiatlas("megaset","megaset/megaset.json")}}}(t,i)}},{key:"load",value:function load(){for(var t in console.assert(null!=this.loadFuncDict,"load func dict: ",this.loadFuncDict),console.assert(this.request,"request: ",this.request),this.loadFuncDict.begin(),this.request){var i=this.request[t],o=i.path,a=i.type,u=i.files;if(i.mode){var d=i.mode;if("sequential"==d.def)for(var b=d.from;b<=d.to;b++)u.push(d.base+b)}for(var S in u){var C=u[S];null==this.loadFuncDict[a]&&console.error("loader dict didnt implement: ",a),this.loadFuncDict[a](C,o)}}}},{key:"getRequestAsJson",value:function getRequestAsJson(){return JSON.parse(JSON.stringify(this.request))}},{key:"addRequestArray",value:function addRequestArray(t){this.request&&console.error("TODO: implement request merge"),this.request=t}}],[{key:"GetRequestAsJsonFromArray",value:function GetRequestAsJsonFromArray(t){var i=new AssetPackLoader;return i.addRequestArray(t),i.getRequestAsJson()}}]),AssetPackLoader}();"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var u,d={exports:{}};u=d,function webpackUniversalModuleDefinition(t,i){u.exports=i()}(0,(function(){return function(t){var i={};function __webpack_require__(o){if(i[o])return i[o].exports;var a=i[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,__webpack_require__),a.l=!0,a.exports}return __webpack_require__.m=t,__webpack_require__.c=i,__webpack_require__.d=function(t,i,o){__webpack_require__.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:o})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(t,i){if(1&i&&(t=__webpack_require__(t)),8&i)return t;if(4&i&&"object"===_typeof(t)&&t&&t.__esModule)return t;var o=Object.create(null);if(__webpack_require__.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var a in t)__webpack_require__.d(o,a,function(i){return t[i]}.bind(null,a));return o},__webpack_require__.n=function(t){var i=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(i,"a",i),i},__webpack_require__.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=1528)}([function(t,i){function getProperty(t,i,o){var a=o?t[i]:Object.getOwnPropertyDescriptor(t,i);return!o&&a.value&&"object"===_typeof(a.value)&&(a=a.value),!(!a||!function hasGetterOrSetter(t){return!!t.get&&"function"==typeof t.get||!!t.set&&"function"==typeof t.set}(a))&&(void 0===a.enumerable&&(a.enumerable=!0),void 0===a.configurable&&(a.configurable=!0),a)}function hasNonConfigurable(t,i){var o=Object.getOwnPropertyDescriptor(t,i);return!!o&&(o.value&&"object"===_typeof(o.value)&&(o=o.value),!1===o.configurable)}function extend(t,i,o,a){for(var u in i)if(i.hasOwnProperty(u)){var d=getProperty(i,u,o);if(!1!==d){if(hasNonConfigurable((a||t).prototype,u)){if(Class.ignoreFinals)continue;throw new Error("cannot override final property '"+u+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,u,d)}else t.prototype[u]=i[u]}}function mixin(t,i){if(i){Array.isArray(i)||(i=[i]);for(var o=0;o<i.length;o++)extend(t,i[o].prototype||i[o])}}function Class(t){var i,o;if(t||(t={}),t.initialize){if("function"!=typeof t.initialize)throw new Error("initialize must be a function");i=t.initialize,delete t.initialize}else if(t.Extends){var a=t.Extends;i=function initialize(){a.apply(this,arguments)}}else i=function initialize(){};t.Extends?(i.prototype=Object.create(t.Extends.prototype),i.prototype.constructor=i,o=t.Extends,delete t.Extends):i.prototype.constructor=i;var u=null;return t.Mixins&&(u=t.Mixins,delete t.Mixins),mixin(i,u),extend(i,t,!0,o),i}Class.extend=extend,Class.mixin=mixin,Class.ignoreFinals=!1,t.exports=Class},function(t,i){t.exports=function NOOP(){}},function(t,i){t.exports=function GetFastValue(t,i,o){var a=_typeof(t);return t&&"number"!==a&&"string"!==a&&t.hasOwnProperty(i)&&void 0!==t[i]?t[i]:o}},function(t,i,o){var a=o(0),u=o(124),d=new a({initialize:function Vector2(t,i){this.x=0,this.y=0,"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0):(void 0===i&&(i=t),this.x=t||0,this.y=i||0)},clone:function clone(){return new d(this.x,this.y)},copy:function copy(t){return this.x=t.x||0,this.y=t.y||0,this},setFromObject:function setFromObject(t){return this.x=t.x||0,this.y=t.y||0,this},set:function set(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setTo:function setTo(t,i){return this.set(t,i)},setToPolar:function setToPolar(t,i){return null==i&&(i=1),this.x=Math.cos(t)*i,this.y=Math.sin(t)*i,this},equals:function equals(t){return this.x===t.x&&this.y===t.y},fuzzyEquals:function fuzzyEquals(t,i){return u(this.x,t.x,i)&&u(this.y,t.y,i)},angle:function angle(){var angle=Math.atan2(this.y,this.x);return angle<0&&(angle+=2*Math.PI),angle},setAngle:function setAngle(t){return this.setToPolar(t,this.length())},add:function add(t){return this.x+=t.x,this.y+=t.y,this},subtract:function subtract(t){return this.x-=t.x,this.y-=t.y,this},multiply:function multiply(t){return this.x*=t.x,this.y*=t.y,this},scale:function scale(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function divide(t){return this.x/=t.x,this.y/=t.y,this},negate:function negate(){return this.x=-this.x,this.y=-this.y,this},distance:function distance(t){var i=t.x-this.x,o=t.y-this.y;return Math.sqrt(i*i+o*o)},distanceSq:function distanceSq(t){var i=t.x-this.x,o=t.y-this.y;return i*i+o*o},length:function length(){var t=this.x,i=this.y;return Math.sqrt(t*t+i*i)},setLength:function setLength(t){return this.normalize().scale(t)},lengthSq:function lengthSq(){var t=this.x,i=this.y;return t*t+i*i},normalize:function normalize(){var t=this.x,i=this.y,o=t*t+i*i;return o>0&&(o=1/Math.sqrt(o),this.x=t*o,this.y=i*o),this},normalizeRightHand:function normalizeRightHand(){var t=this.x;return this.x=-1*this.y,this.y=t,this},normalizeLeftHand:function normalizeLeftHand(){var t=this.x;return this.x=this.y,this.y=-1*t,this},dot:function dot(t){return this.x*t.x+this.y*t.y},cross:function cross(t){return this.x*t.y-this.y*t.x},lerp:function lerp(t,i){void 0===i&&(i=0);var o=this.x,a=this.y;return this.x=o+i*(t.x-o),this.y=a+i*(t.y-a),this},transformMat3:function transformMat3(t){var i=this.x,o=this.y,a=t.val;return this.x=a[0]*i+a[3]*o+a[6],this.y=a[1]*i+a[4]*o+a[7],this},transformMat4:function transformMat4(t){var i=this.x,o=this.y,a=t.val;return this.x=a[0]*i+a[4]*o+a[12],this.y=a[1]*i+a[5]*o+a[13],this},reset:function reset(){return this.x=0,this.y=0,this},limit:function limit(t){var i=this.length();return i&&i>t&&this.scale(t/i),this},reflect:function reflect(t){return t=t.clone().normalize(),this.subtract(t.scale(2*this.dot(t)))},mirror:function mirror(t){return this.reflect(t).negate()},rotate:function rotate(t){var i=Math.cos(t),o=Math.sin(t);return this.set(i*this.x-o*this.y,o*this.x+i*this.y)}});d.ZERO=new d,d.RIGHT=new d(1,0),d.LEFT=new d(-1,0),d.UP=new d(0,-1),d.DOWN=new d(0,1),d.ONE=new d(1,1),t.exports=d},function(t,i,o){var a=o(0),u=o(56),d=new a({initialize:function Point(t,i){void 0===t&&(t=0),void 0===i&&(i=t),this.type=u.POINT,this.x=t,this.y=i},setTo:function setTo(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.x=t,this.y=i,this}});t.exports=d},function(t,i,o){var a=o(0),u=o(24),d=o(20),b=new a({initialize:function GameObjectFactory(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(d.BOOT,this.boot,this),this.events.on(d.START,this.start,this)},boot:function boot(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(d.DESTROY,this.destroy,this)},start:function start(){this.events.once(d.SHUTDOWN,this.shutdown,this)},existing:function existing(t){return(t.renderCanvas||t.renderWebGL)&&this.displayList.add(t),t.preUpdate&&this.updateList.add(t),t},shutdown:function shutdown(){this.events.off(d.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown(),this.events.off(d.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});b.register=function(t,i){b.prototype.hasOwnProperty(t)||(b.prototype[t]=i)},b.remove=function(t){b.prototype.hasOwnProperty(t)&&delete b.prototype[t]},u.register("GameObjectFactory",b,"add"),t.exports=b},function(t,i){t.exports=function GetValue(t,i,o){if(t&&"number"!=typeof t){if(t.hasOwnProperty(i))return t[i];if(-1!==i.indexOf(".")){for(var a=i.split("."),u=t,d=o,b=0;b<a.length;b++){if(!u.hasOwnProperty(a[b])){d=o;break}d=u[a[b]],u=u[a[b]]}return d}return o}return o}},function(t,i){t.exports=function IsPlainObject(t){if("object"!==_typeof(t)||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}return!0}},function(t,i){var o={},a={install:function install(t){for(var i in o)t[i]=o[i]},register:function register(t,i){o[t]=i},destroy:function destroy(){o={}}};t.exports=a},function(t,i,o){var a=Object.prototype.hasOwnProperty,u="~";function Events(){}function EE(t,i,o){this.fn=t,this.context=i,this.once=o||!1}function addListener(t,i,o,a,d){if("function"!=typeof o)throw new TypeError("The listener must be a function");var b=new EE(o,a||t,d),S=u?u+i:i;return t._events[S]?t._events[S].fn?t._events[S]=[t._events[S],b]:t._events[S].push(b):(t._events[S]=b,t._eventsCount++),t}function clearEvent(t,i){0==--t._eventsCount?t._events=new Events:delete t._events[i]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(u=!1)),EventEmitter.prototype.eventNames=function eventNames(){var t,i,o=[];if(0===this._eventsCount)return o;for(i in t=this._events)a.call(t,i)&&o.push(u?i.slice(1):i);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},EventEmitter.prototype.listeners=function listeners(t){var i=u?u+t:t,o=this._events[i];if(!o)return[];if(o.fn)return[o.fn];for(var a=0,d=o.length,b=new Array(d);a<d;a++)b[a]=o[a].fn;return b},EventEmitter.prototype.listenerCount=function listenerCount(t){var i=u?u+t:t,o=this._events[i];return o?o.fn?1:o.length:0},EventEmitter.prototype.emit=function emit(t,i,o,a,d,b){var S=u?u+t:t;if(!this._events[S])return!1;var C,M,P=this._events[S],R=arguments.length;if(P.fn){switch(P.once&&this.removeListener(t,P.fn,void 0,!0),R){case 1:return P.fn.call(P.context),!0;case 2:return P.fn.call(P.context,i),!0;case 3:return P.fn.call(P.context,i,o),!0;case 4:return P.fn.call(P.context,i,o,a),!0;case 5:return P.fn.call(P.context,i,o,a,d),!0;case 6:return P.fn.call(P.context,i,o,a,d,b),!0}for(M=1,C=new Array(R-1);M<R;M++)C[M-1]=arguments[M];P.fn.apply(P.context,C)}else{var O,B=P.length;for(M=0;M<B;M++)switch(P[M].once&&this.removeListener(t,P[M].fn,void 0,!0),R){case 1:P[M].fn.call(P[M].context);break;case 2:P[M].fn.call(P[M].context,i);break;case 3:P[M].fn.call(P[M].context,i,o);break;case 4:P[M].fn.call(P[M].context,i,o,a);break;default:if(!C)for(O=1,C=new Array(R-1);O<R;O++)C[O-1]=arguments[O];P[M].fn.apply(P[M].context,C)}}return!0},EventEmitter.prototype.on=function on(t,i,o){return addListener(this,t,i,o,!1)},EventEmitter.prototype.once=function once(t,i,o){return addListener(this,t,i,o,!0)},EventEmitter.prototype.removeListener=function removeListener(t,i,o,a){var d=u?u+t:t;if(!this._events[d])return this;if(!i)return clearEvent(this,d),this;var b=this._events[d];if(b.fn)b.fn!==i||a&&!b.once||o&&b.context!==o||clearEvent(this,d);else{for(var S=0,C=[],M=b.length;S<M;S++)(b[S].fn!==i||a&&!b[S].once||o&&b[S].context!==o)&&C.push(b[S]);C.length?this._events[d]=1===C.length?C[0]:C:clearEvent(this,d)}return this},EventEmitter.prototype.removeAllListeners=function removeAllListeners(t){var i;return t?(i=u?u+t:t,this._events[i]&&clearEvent(this,i)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=u,EventEmitter.EventEmitter=EventEmitter,t.exports=EventEmitter},function(t,i,o){var a=o(0),u=o(57),d=o(171),b=o(306),S=o(56),C=o(47),M=o(174),P=new a({initialize:function Rectangle(t,i,o,a){void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),this.type=S.RECTANGLE,this.x=t,this.y=i,this.width=o,this.height=a},contains:function contains(t,i){return u(this,t,i)},getPoint:function getPoint(t,i){return d(this,t,i)},getPoints:function getPoints(t,i,o){return b(this,t,i,o)},getRandomPoint:function getRandomPoint(t){return M(this,t)},setTo:function setTo(t,i,o,a){return this.x=t,this.y=i,this.width=o,this.height=a,this},setEmpty:function setEmpty(){return this.setTo(0,0,0,0)},setPosition:function setPosition(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setSize:function setSize(t,i){return void 0===i&&(i=t),this.width=t,this.height=i,this},isEmpty:function isEmpty(){return this.width<=0||this.height<=0},getLineA:function getLineA(t){return void 0===t&&(t=new C),t.setTo(this.x,this.y,this.right,this.y),t},getLineB:function getLineB(t){return void 0===t&&(t=new C),t.setTo(this.right,this.y,this.right,this.bottom),t},getLineC:function getLineC(t){return void 0===t&&(t=new C),t.setTo(this.right,this.bottom,this.x,this.bottom),t},getLineD:function getLineD(t){return void 0===t&&(t=new C),t.setTo(this.x,this.bottom,this.x,this.y),t},left:{get:function get(){return this.x},set:function set(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}},right:{get:function get(){return this.x+this.width},set:function set(t){t<=this.x?this.width=0:this.width=t-this.x}},top:{get:function get(){return this.y},set:function set(t){t>=this.bottom?this.height=0:this.height=this.bottom-t,this.y=t}},bottom:{get:function get(){return this.y+this.height},set:function set(t){t<=this.y?this.height=0:this.height=t-this.y}},centerX:{get:function get(){return this.x+this.width/2},set:function set(t){this.x=t-this.width/2}},centerY:{get:function get(){return this.y+this.height/2},set:function set(t){this.y=t-this.height/2}}});t.exports=P},function(t,i,o){t.exports={Alpha:o(607),AlphaSingle:o(303),BlendMode:o(304),ComputedSize:o(608),Crop:o(609),Depth:o(305),Flip:o(610),GetBounds:o(611),Mask:o(309),Origin:o(632),PathFollower:o(633),Pipeline:o(167),ScrollFactor:o(312),Size:o(634),Texture:o(635),TextureCrop:o(636),Tint:o(637),ToJSON:o(176),Transform:o(313),TransformMatrix:o(25),Visible:o(314)}},function(t,i){function GenerateSrc(t){for(var i="",o=0;o<t;++o)o>0&&(i+="\nelse "),o<t-1&&(i+="if(test == "+o+".0){}");return i}t.exports={getTintFromFloats:function getTintFromFloats(t,i,o,a){return((255&(255*a|0))<<24|(255&(255*t|0))<<16|(255&(255*i|0))<<8|255&(255*o|0))>>>0},getTintAppendFloatAlpha:function getTintAppendFloatAlpha(t,i){return((255&(255*i|0))<<24|t)>>>0},getTintAppendFloatAlphaAndSwap:function getTintAppendFloatAlphaAndSwap(t,i){return((255&(255*i|0))<<24|(255&(0|t))<<16|(255&(t>>8|0))<<8|255&(t>>16|0))>>>0},getFloatsFromUintRGB:function getFloatsFromUintRGB(t){return[(255&(t>>16|0))/255,(255&(t>>8|0))/255,(255&(0|t))/255]},checkShaderMax:function checkShaderMax(t,i){i&&-1!==i||(i=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS));for(var o=t.createShader(t.FRAGMENT_SHADER),a=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");;){var u=a.replace(/%forloop%/gi,GenerateSrc(i));if(t.shaderSource(o,u),t.compileShader(o),t.getShaderParameter(o,t.COMPILE_STATUS))break;i=i/2|0}return i},parseFragmentShaderMaxTextures:function parseFragmentShaderMaxTextures(t,i){if(!t)return"";for(var o="",a=0;a<i;a++)a>0&&(o+="\n\telse "),a<i-1&&(o+="if (outTexId < "+a+".5)"),o+="\n\t{",o+="\n\t\ttexture = texture2D(uMainSampler["+a+"], outTexCoord);",o+="\n\t}";return(t=t.replace(/%count%/gi,i.toString())).replace(/%forloop%/gi,o)}}},function(t,i,o){var a=o(193),u=o(6);t.exports=function GetAdvancedValue(t,i,o){var d=u(t,i,null);if(null===d)return o;if(Array.isArray(d))return a.RND.pick(d);if("object"===_typeof(d)){if(d.hasOwnProperty("randInt"))return a.RND.integerInRange(d.randInt[0],d.randInt[1]);if(d.hasOwnProperty("randFloat"))return a.RND.realInRange(d.randFloat[0],d.randFloat[1])}else if("function"==typeof d)return d(i);return d}},function(t,i){var o={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};t.exports=o},function(t,i,o){var a=o(0),u=o(176),d=o(101),b=o(9),S=o(75),C=o(20),M=new a({Extends:b,initialize:function GameObject(t,i){b.call(this),this.scene=t,this.displayList=null,this.type=i,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(S.ADDED_TO_SCENE,this.addedToScene,this),this.on(S.REMOVED_FROM_SCENE,this.removedFromScene,this),t.sys.queueDepthSort()},setActive:function setActive(t){return this.active=t,this},setName:function setName(t){return this.name=t,this},setState:function setState(t){return this.state=t,this},setDataEnabled:function setDataEnabled(){return this.data||(this.data=new d(this)),this},setData:function setData(t,i){return this.data||(this.data=new d(this)),this.data.set(t,i),this},incData:function incData(t,i){return this.data||(this.data=new d(this)),this.data.inc(t,i),this},toggleData:function toggleData(t){return this.data||(this.data=new d(this)),this.data.toggle(t),this},getData:function getData(t){return this.data||(this.data=new d(this)),this.data.get(t)},setInteractive:function setInteractive(t,i,o){return this.scene.sys.input.enable(this,t,i,o),this},disableInteractive:function disableInteractive(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function removeInteractive(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function addedToScene(){},removedFromScene:function removedFromScene(){},update:function update(){},toJSON:function toJSON(){return u(this)},willRender:function willRender(t){return!(M.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function getIndexList(){for(var t=this,i=this.parentContainer,o=[];i&&(o.unshift(i.getIndex(t)),t=i,i.parentContainer);)i=i.parentContainer;return this.displayList?o.unshift(this.displayList.getIndex(t)):o.unshift(this.scene.sys.displayList.getIndex(t)),o},addToDisplayList:function addToDisplayList(t){return void 0===t&&(t=this.scene.sys.displayList),this.displayList&&this.displayList!==t&&this.removeFromDisplayList(),t.exists(this)||(this.displayList=t,t.add(this,!0),t.queueDepthSort(),this.emit(S.ADDED_TO_SCENE,this,this.scene),t.events.emit(C.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function addToUpdateList(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function removeFromDisplayList(){var t=this.displayList||this.scene.sys.displayList;return t.exists(this)&&(t.remove(this,!0),t.queueDepthSort(),this.displayList=null,this.emit(S.REMOVED_FROM_SCENE,this,this.scene),t.events.emit(C.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function removeFromUpdateList(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function destroy(t){this.scene&&!this.ignoreDestroy&&(void 0===t&&(t=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(S.DESTROY,this,t),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});M.RENDER_MASK=15,t.exports=M},function(t,i,o){var a=o(0),u=o(24),d=o(20),b=new a({initialize:function GameObjectCreator(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(d.BOOT,this.boot,this),this.events.on(d.START,this.start,this)},boot:function boot(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(d.DESTROY,this.destroy,this)},start:function start(){this.events.once(d.SHUTDOWN,this.shutdown,this)},shutdown:function shutdown(){this.events.off(d.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown(),this.events.off(d.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});b.register=function(t,i){b.prototype.hasOwnProperty(t)||(b.prototype[t]=i)},b.remove=function(t){b.prototype.hasOwnProperty(t)&&delete b.prototype[t]},u.register("GameObjectCreator",b,"make"),t.exports=b},function(t,i,o){var a=o(7);t.exports=function Extend(){var t,i,o,u,d,b,S=arguments[0]||{},C=1,M=arguments.length,P=!1;for("boolean"==typeof S&&(P=S,S=arguments[1]||{},C=2),M===C&&(S=this,--C);C<M;C++)if(null!=(t=arguments[C]))for(i in t)o=S[i],S!==(u=t[i])&&(P&&u&&(a(u)||(d=Array.isArray(u)))?(d?(d=!1,b=o&&Array.isArray(o)?o:[]):b=o&&a(o)?o:{},S[i]=Extend(P,b,u)):void 0!==u&&(S[i]=u));return S}},function(t,i){t.exports=function Clamp(t,i,o){return Math.max(i,Math.min(o,t))}},function(t,i,o){var a=o(25),u=new a,d=new a,b=new a,S={camera:u,sprite:d,calc:b};t.exports=function GetCalcMatrix(t,i,o){var a=u,C=d,M=b;return C.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),a.copyFrom(i.matrix),o?(a.multiplyWithOffset(o,-i.scrollX*t.scrollFactorX,-i.scrollY*t.scrollFactorY),C.e=t.x,C.f=t.y):(C.e-=i.scrollX*t.scrollFactorX,C.f-=i.scrollY*t.scrollFactorY),a.multiply(C,M),S}},function(t,i,o){t.exports={ADDED_TO_SCENE:o(656),BOOT:o(657),CREATE:o(658),DESTROY:o(659),PAUSE:o(660),POST_UPDATE:o(661),PRE_RENDER:o(662),PRE_UPDATE:o(663),READY:o(664),REMOVED_FROM_SCENE:o(665),RENDER:o(666),RESUME:o(667),SHUTDOWN:o(668),SLEEP:o(669),START:o(670),TRANSITION_COMPLETE:o(671),TRANSITION_INIT:o(672),TRANSITION_OUT:o(673),TRANSITION_START:o(674),TRANSITION_WAKE:o(675),UPDATE:o(676),WAKE:o(677)}},function(t,i){t.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},function(t,i,o){t.exports={BLUR:o(612),BOOT:o(613),CONTEXT_LOST:o(614),CONTEXT_RESTORED:o(615),DESTROY:o(616),FOCUS:o(617),HIDDEN:o(618),PAUSE:o(619),POST_RENDER:o(620),POST_STEP:o(621),PRE_RENDER:o(622),PRE_STEP:o(623),READY:o(624),RESUME:o(625),STEP:o(626),VISIBLE:o(627)}},function(t,i,o){var a=o(0),u=o(21),d=o(95),b=o(2),S=o(155),C=o(240),M=o(517),P=o(156),R=new a({initialize:function File(t,i){this.loader=t,this.cache=b(i,"cache",!1),this.type=b(i,"type",!1),this.key=b(i,"key",!1);var o=this.key;if(t.prefix&&""!==t.prefix&&(this.key=t.prefix+o),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var a=b(i,"url");void 0===a?a=t.path+o+"."+b(i,"extension",""):"string"!=typeof a||a.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)||(a=t.path+a),this.url=a,this.src="",this.xhrSettings=P(b(i,"responseType",void 0)),b(i,"xhrSettings",!1)&&(this.xhrSettings=C(this.xhrSettings,b(i,"xhrSettings",{}))),this.xhrLoader=null,this.state="function"==typeof this.url?u.FILE_POPULATED:u.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=b(i,"config",{}),this.multiFile,this.linkFile},setLink:function setLink(t){this.linkFile=t,t.linkFile=this},resetXHR:function resetXHR(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function load(){this.state===u.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=u.FILE_LOADING,this.src=S(this,this.loader.baseURL),0===this.src.indexOf("data:")?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=M(this,this.loader.xhr))},onLoad:function onLoad(t,i){var o=t.responseURL&&(0===t.responseURL.indexOf("file://")||0===t.responseURL.indexOf("capacitor://"))&&0===i.target.status,a=!(i.target&&200!==i.target.status)||o;4===t.readyState&&t.status>=400&&t.status<=599&&(a=!1),this.state=u.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,a)},onError:function onError(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function onProgress(t){t.lengthComputable&&(this.bytesLoaded=t.loaded,this.bytesTotal=t.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(d.FILE_PROGRESS,this,this.percentComplete))},onProcess:function onProcess(){this.state=u.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function onProcessComplete(){this.state=u.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function onProcessError(){this.state=u.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function hasCacheConflict(){return this.cache&&this.cache.exists(this.key)},addToCache:function addToCache(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function pendingDestroy(t){void 0===t&&(t=this.data);var i=this.key,o=this.type;this.loader.emit(d.FILE_COMPLETE,i,o,t),this.loader.emit(d.FILE_KEY_COMPLETE+o+"-"+i,i,o,t),this.loader.flagForRemoval(this)},destroy:function destroy(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});R.createObjectURL=function(t,i,o){if("function"==typeof URL)t.src=URL.createObjectURL(i);else{var a=new FileReader;a.onload=function(){t.removeAttribute("crossOrigin"),t.src="data:"+(i.type||o)+";base64,"+a.result.split(",")[1]},a.onerror=t.onerror,a.readAsDataURL(i)}},R.revokeObjectURL=function(t){"function"==typeof URL&&URL.revokeObjectURL(t.src)},t.exports=R},function(t,i){var o={},a={},u={register:function(t,i,a,u){void 0===u&&(u=!1),o[t]={plugin:i,mapping:a,custom:u}},registerCustom:function(t,i,o,u){a[t]={plugin:i,mapping:o,data:u}},hasCore:function(t){return o.hasOwnProperty(t)},hasCustom:function(t){return a.hasOwnProperty(t)},getCore:function(t){return o[t]},getCustom:function(t){return a[t]},getCustomClass:function(t){return a.hasOwnProperty(t)?a[t].plugin:null},remove:function(t){o.hasOwnProperty(t)&&delete o[t]},removeCustom:function(t){a.hasOwnProperty(t)&&delete a[t]},destroyCorePlugins:function(){for(var t in o)o.hasOwnProperty(t)&&delete o[t]},destroyCustomPlugins:function(){for(var t in a)a.hasOwnProperty(t)&&delete a[t]}};t.exports=u},function(t,i,o){var a=o(0),u=o(14),d=o(3),b=new a({initialize:function TransformMatrix(t,i,o,a,u,d){void 0===t&&(t=1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=1),void 0===u&&(u=0),void 0===d&&(d=0),this.matrix=new Float32Array([t,i,o,a,u,d,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function get(){return this.matrix[0]},set:function set(t){this.matrix[0]=t}},b:{get:function get(){return this.matrix[1]},set:function set(t){this.matrix[1]=t}},c:{get:function get(){return this.matrix[2]},set:function set(t){this.matrix[2]=t}},d:{get:function get(){return this.matrix[3]},set:function set(t){this.matrix[3]=t}},e:{get:function get(){return this.matrix[4]},set:function set(t){this.matrix[4]=t}},f:{get:function get(){return this.matrix[5]},set:function set(t){this.matrix[5]=t}},tx:{get:function get(){return this.matrix[4]},set:function set(t){this.matrix[4]=t}},ty:{get:function get(){return this.matrix[5]},set:function set(t){this.matrix[5]=t}},rotation:{get:function get(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function get(){var t=this.matrix,i=t[0],o=t[1],a=t[2],d=t[3];return i||o?o>0?Math.acos(i/this.scaleX):-Math.acos(i/this.scaleX):a||d?u.TAU-(d>0?Math.acos(-a/this.scaleY):-Math.acos(a/this.scaleY)):0}},scaleX:{get:function get(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function get(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function loadIdentity(){var t=this.matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},translate:function translate(t,i){var o=this.matrix;return o[4]=o[0]*t+o[2]*i+o[4],o[5]=o[1]*t+o[3]*i+o[5],this},scale:function scale(t,i){var o=this.matrix;return o[0]*=t,o[1]*=t,o[2]*=i,o[3]*=i,this},rotate:function rotate(t){var i=Math.sin(t),o=Math.cos(t),a=this.matrix,u=a[0],d=a[1],b=a[2],S=a[3];return a[0]=u*o+b*i,a[1]=d*o+S*i,a[2]=u*-i+b*o,a[3]=d*-i+S*o,this},multiply:function multiply(t,i){var o=this.matrix,a=t.matrix,u=o[0],d=o[1],b=o[2],S=o[3],C=o[4],M=o[5],P=a[0],R=a[1],O=a[2],B=a[3],N=a[4],Y=a[5],G=void 0===i?this:i;return G.a=P*u+R*b,G.b=P*d+R*S,G.c=O*u+B*b,G.d=O*d+B*S,G.e=N*u+Y*b+C,G.f=N*d+Y*S+M,G},multiplyWithOffset:function multiplyWithOffset(t,i,o){var a=this.matrix,u=t.matrix,d=a[0],b=a[1],S=a[2],C=a[3],M=i*d+o*S+a[4],P=i*b+o*C+a[5],R=u[0],O=u[1],B=u[2],N=u[3],Y=u[4],G=u[5];return a[0]=R*d+O*S,a[1]=R*b+O*C,a[2]=B*d+N*S,a[3]=B*b+N*C,a[4]=Y*d+G*S+M,a[5]=Y*b+G*C+P,this},transform:function transform(t,i,o,a,u,d){var b=this.matrix,S=b[0],C=b[1],M=b[2],P=b[3],R=b[4],O=b[5];return b[0]=t*S+i*M,b[1]=t*C+i*P,b[2]=o*S+a*M,b[3]=o*C+a*P,b[4]=u*S+d*M+R,b[5]=u*C+d*P+O,this},transformPoint:function transformPoint(t,i,o){void 0===o&&(o={x:0,y:0});var a=this.matrix,u=a[0],d=a[1],b=a[2],S=a[3],C=a[4],M=a[5];return o.x=t*u+i*b+C,o.y=t*d+i*S+M,o},invert:function invert(){var t=this.matrix,i=t[0],o=t[1],a=t[2],u=t[3],d=t[4],b=t[5],S=i*u-o*a;return t[0]=u/S,t[1]=-o/S,t[2]=-a/S,t[3]=i/S,t[4]=(a*b-u*d)/S,t[5]=-(i*b-o*d)/S,this},copyFrom:function copyFrom(t){var i=this.matrix;return i[0]=t.a,i[1]=t.b,i[2]=t.c,i[3]=t.d,i[4]=t.e,i[5]=t.f,this},copyFromArray:function copyFromArray(t){var i=this.matrix;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],this},copyToContext:function copyToContext(t){var i=this.matrix;return t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),t},setToContext:function setToContext(t){var i=this.matrix;return t.setTransform(i[0],i[1],i[2],i[3],i[4],i[5]),t},copyToArray:function copyToArray(t){var i=this.matrix;return void 0===t?t=[i[0],i[1],i[2],i[3],i[4],i[5]]:(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5]),t},setTransform:function setTransform(t,i,o,a,u,d){var b=this.matrix;return b[0]=t,b[1]=i,b[2]=o,b[3]=a,b[4]=u,b[5]=d,this},decomposeMatrix:function decomposeMatrix(){var t=this.decomposedMatrix,i=this.matrix,o=i[0],a=i[1],u=i[2],d=i[3],b=o*d-a*u;if(t.translateX=i[4],t.translateY=i[5],o||a){var S=Math.sqrt(o*o+a*a);t.rotation=a>0?Math.acos(o/S):-Math.acos(o/S),t.scaleX=S,t.scaleY=b/S}else if(u||d){var C=Math.sqrt(u*u+d*d);t.rotation=.5*Math.PI-(d>0?Math.acos(-u/C):-Math.acos(u/C)),t.scaleX=b/C,t.scaleY=C}else t.rotation=0,t.scaleX=0,t.scaleY=0;return t},applyITRS:function applyITRS(t,i,o,a,u){var d=this.matrix,b=Math.sin(o),S=Math.cos(o);return d[4]=t,d[5]=i,d[0]=S*a,d[1]=b*a,d[2]=-b*u,d[3]=S*u,this},applyInverse:function applyInverse(t,i,o){void 0===o&&(o=new d);var a=this.matrix,u=a[0],b=a[1],S=a[2],C=a[3],M=a[4],P=a[5],R=1/(u*C+S*-b);return o.x=C*R*t+-S*R*i+(P*S-M*C)*R,o.y=u*R*i+-b*R*t+(-P*u+M*b)*R,o},getX:function getX(t,i){return t*this.a+i*this.c+this.e},getY:function getY(t,i){return t*this.b+i*this.d+this.f},getXRound:function getXRound(t,i,o){var a=this.getX(t,i);return o&&(a=Math.round(a)),a},getYRound:function getYRound(t,i,o){var a=this.getY(t,i);return o&&(a=Math.round(a)),a},getCSSMatrix:function getCSSMatrix(){var t=this.matrix;return"matrix("+t[0]+","+t[1]+","+t[2]+","+t[3]+","+t[4]+","+t[5]+")"},destroy:function destroy(){this.matrix=null,this.decomposedMatrix=null}});t.exports=b},function(t,i,o){var a=o(2);t.exports=function GetTilesWithin(t,i,o,u,d,b){void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=b.width),void 0===u&&(u=b.height),d||(d={});var S=a(d,"isNotEmpty",!1),C=a(d,"isColliding",!1),M=a(d,"hasInterestingFace",!1);t<0&&(o+=t,t=0),i<0&&(u+=i,i=0),t+o>b.width&&(o=Math.max(b.width-t,0)),i+u>b.height&&(u=Math.max(b.height-i,0));for(var P=[],R=i;R<i+u;R++)for(var O=t;O<t+o;O++){var B=b.data[R][O];if(null!==B){if(S&&-1===B.index)continue;if(C&&!B.collides)continue;if(M&&!B.hasInterestingFace)continue;P.push(B)}}return P}},function(t,i){t.exports=function PropertyValueSet(t,i,o,a,u,d){var b;void 0===a&&(a=0),void 0===u&&(u=0),void 0===d&&(d=1);var S=0,C=t.length;if(1===d)for(b=u;b<C;b++)t[b][i]=o+S*a,S++;else for(b=u;b>=0;b--)t[b][i]=o+S*a,S++;return t}},function(t,i,o){var a=o(35),u=o(13);t.exports=function BuildGameObject(t,i,o){i.x=u(o,"x",0),i.y=u(o,"y",0),i.depth=u(o,"depth",0),i.flipX=u(o,"flipX",!1),i.flipY=u(o,"flipY",!1);var d=u(o,"scale",null);"number"==typeof d?i.setScale(d):null!==d&&(i.scaleX=u(d,"x",1),i.scaleY=u(d,"y",1));var b=u(o,"scrollFactor",null);"number"==typeof b?i.setScrollFactor(b):null!==b&&(i.scrollFactorX=u(b,"x",1),i.scrollFactorY=u(b,"y",1)),i.rotation=u(o,"rotation",0);var S=u(o,"angle",null);null!==S&&(i.angle=S),i.alpha=u(o,"alpha",1);var C=u(o,"origin",null);if("number"==typeof C)i.setOrigin(C);else if(null!==C){var M=u(C,"x",.5),P=u(C,"y",.5);i.setOrigin(M,P)}return i.blendMode=u(o,"blendMode",a.NORMAL),i.visible=u(o,"visible",!0),u(o,"add",!0)&&t.sys.displayList.add(i),i.preUpdate&&t.sys.updateList.add(i),i}},function(t,i){t.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},function(t,i,o){var a=o(19);t.exports=function SetTransform(t,i,o,u,d){var b=u.alpha*o.alpha;if(b<=0)return!1;var S=a(o,u,d).calc;return i.globalCompositeOperation=t.blendModes[o.blendMode],i.globalAlpha=b,i.save(),S.setToContext(i),i.imageSmoothingEnabled=!(!t.antialias||o.frame&&o.frame.source.scaleMode),!0}},function(t,i,o){var a=o(33),u=o(192),d=[],b=!1;t.exports=function CanvasPool(){var t=function create(t,o,S,C,M){var P;void 0===o&&(o=1),void 0===S&&(S=1),void 0===C&&(C=a.CANVAS),void 0===M&&(M=!1);var R=i(C);return null===R?(R={parent:t,canvas:document.createElement("canvas"),type:C},C===a.CANVAS&&d.push(R),P=R.canvas):(R.parent=t,P=R.canvas),M&&(R.parent=P),P.width=o,P.height=S,b&&C===a.CANVAS&&u.disable(P.getContext("2d")),P},i=function first(t){if(void 0===t&&(t=a.CANVAS),t===a.WEBGL)return null;for(var i=0;i<d.length;i++){var o=d[i];if(!o.parent&&o.type===t)return o}return null},o=function total(){var t=0;return d.forEach((function(i){i.parent&&t++})),t};return{create2D:function create2D(i,o,u){return t(i,o,u,a.CANVAS)},create:t,createWebGL:function createWebGL(i,o,u){return t(i,o,u,a.WEBGL)},disableSmoothing:function disableSmoothing(){b=!0},enableSmoothing:function enableSmoothing(){b=!1},first:i,free:function free(){return d.length-o()},pool:d,remove:function remove(t){var i=t instanceof HTMLCanvasElement;d.forEach((function(o){(i&&o.canvas===t||!i&&o.parent===t)&&(o.parent=null,o.canvas.width=1,o.canvas.height=1)}))},total:o}}()},function(t,i){var o={};t.exports=o,function(){o._nextId=0,o._seed=0,o._nowStartTime=+new Date,o.extend=function(t,i){var a,u;"boolean"==typeof i?(a=2,u=i):(a=1,u=!0);for(var d=a;d<arguments.length;d++){var b=arguments[d];if(b)for(var S in b)u&&b[S]&&b[S].constructor===Object?t[S]&&t[S].constructor!==Object?t[S]=b[S]:(t[S]=t[S]||{},o.extend(t[S],u,b[S])):t[S]=b[S]}return t},o.clone=function(t,i){return o.extend({},i,t)},o.keys=function(t){if(Object.keys)return Object.keys(t);var i=[];for(var o in t)i.push(o);return i},o.values=function(t){var i=[];if(Object.keys){for(var o=Object.keys(t),a=0;a<o.length;a++)i.push(t[o[a]]);return i}for(var u in t)i.push(t[u]);return i},o.get=function(t,i,o,a){i=i.split(".").slice(o,a);for(var u=0;u<i.length;u+=1)t=t[i[u]];return t},o.set=function(t,i,a,u,d){var b=i.split(".").slice(u,d);return o.get(t,i,0,-1)[b[b.length-1]]=a,a},o.shuffle=function(t){for(var i=t.length-1;i>0;i--){var a=Math.floor(o.random()*(i+1)),u=t[i];t[i]=t[a],t[a]=u}return t},o.choose=function(t){return t[Math.floor(o.random()*t.length)]},o.isElement=function(t){return"undefined"!=typeof HTMLElement?t instanceof HTMLElement:!!(t&&t.nodeType&&t.nodeName)},o.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},o.isFunction=function(t){return"function"==typeof t},o.isPlainObject=function(t){return"object"===_typeof(t)&&t.constructor===Object},o.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},o.clamp=function(t,i,o){return t<i?i:t>o?o:t},o.sign=function(t){return t<0?-1:1},o.now=function(){if("undefined"!=typeof window&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-o._nowStartTime},o.random=function(i,o){return o=void 0!==o?o:1,(i=void 0!==i?i:0)+t()*(o-i)};var t=function _seededRandom(){return o._seed=(9301*o._seed+49297)%233280,o._seed/233280};o.colorToNumber=function(t){return 3==(t=t.replace("#","")).length&&(t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)),parseInt(t,16)},o.logLevel=1,o.log=function(){console&&o.logLevel>0&&o.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},o.info=function(){console&&o.logLevel>0&&o.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},o.warn=function(){console&&o.logLevel>0&&o.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},o.nextId=function(){return o._nextId++},o.indexOf=function(t,i){if(t.indexOf)return t.indexOf(i);for(var o=0;o<t.length;o++)if(t[o]===i)return o;return-1},o.map=function(t,i){if(t.map)return t.map(i);for(var o=[],a=0;a<t.length;a+=1)o.push(i(t[a]));return o},o.topologicalSort=function(t){var i=[],a=[],u=[];for(var d in t)a[d]||u[d]||o._topologicalSort(d,a,u,t,i);return i},o._topologicalSort=function(t,i,a,u,d){var b=u[t]||[];a[t]=!0;for(var S=0;S<b.length;S+=1){var C=b[S];a[C]||i[C]||o._topologicalSort(C,i,a,u,d)}a[t]=!1,i[t]=!0,d.push(t)},o.chain=function(){for(var t=[],i=0;i<arguments.length;i+=1){var o=arguments[i];o._chained?t.push.apply(t,o._chained):t.push(o)}var a=function chain(){for(var i,o=new Array(arguments.length),a=0,u=arguments.length;a<u;a++)o[a]=arguments[a];for(a=0;a<t.length;a+=1){var d=t[a].apply(i,o);void 0!==d&&(i=d)}return i};return a._chained=t,a},o.chainPathBefore=function(t,i,a){return o.set(t,i,o.chain(a,o.get(t,i)))},o.chainPathAfter=function(t,i,a){return o.set(t,i,o.chain(o.get(t,i),a))}}()},function(t,i,o){var a={VERSION:"3.55.2",BlendModes:o(35),ScaleModes:o(168),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};t.exports=a},function(t,i,o){var a=o(0),u=o(11),d=o(15),b=o(47),S=new a({Extends:d,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.ScrollFactor,u.Transform,u.Visible],initialize:function Shape(t,i,o){void 0===i&&(i="Shape"),d.call(this,t,i),this.geom=o,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new b,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function setFillStyle(t,i){return void 0===i&&(i=1),void 0===t?this.isFilled=!1:(this.fillColor=t,this.fillAlpha=i,this.isFilled=!0),this},setStrokeStyle:function setStrokeStyle(t,i,o){return void 0===o&&(o=1),void 0===t?this.isStroked=!1:(this.lineWidth=t,this.strokeColor=i,this.strokeAlpha=o,this.isStroked=!0),this},setClosePath:function setClosePath(t){return this.closePath=t,this},setSize:function setSize(t,i){return this.width=t,this.height=i,this},setDisplaySize:function setDisplaySize(t,i){return this.displayWidth=t,this.displayHeight=i,this},preDestroy:function preDestroy(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function get(){return this.scaleX*this.width},set:function set(t){this.scaleX=t/this.width}},displayHeight:{get:function get(){return this.scaleY*this.height},set:function set(t){this.scaleY=t/this.height}}});t.exports=S},function(t,i){t.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(t,i,o){var a=o(14);t.exports=function DegToRad(t){return t*a.DEG_TO_RAD}},function(t,i,o){t.exports={DESTROY:o(743),FADE_IN_COMPLETE:o(744),FADE_IN_START:o(745),FADE_OUT_COMPLETE:o(746),FADE_OUT_START:o(747),FLASH_COMPLETE:o(748),FLASH_START:o(749),FOLLOW_UPDATE:o(750),PAN_COMPLETE:o(751),PAN_START:o(752),POST_RENDER:o(753),PRE_RENDER:o(754),ROTATE_COMPLETE:o(755),ROTATE_START:o(756),SHAKE_COMPLETE:o(757),SHAKE_START:o(758),ZOOM_COMPLETE:o(759),ZOOM_START:o(760)}},function(t,i,o){var a=o(0),u=o(103),d=o(328),b=o(188),S=o(329),C=new a({initialize:function Color(t,i,o,a){void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(t,i,o,a)},transparent:function transparent(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function setTo(t,i,o,a,u){return void 0===a&&(a=255),void 0===u&&(u=!0),this._locked=!0,this.red=t,this.green=i,this.blue=o,this.alpha=a,this._locked=!1,this.update(u)},setGLTo:function setGLTo(t,i,o,a){return void 0===a&&(a=1),this._locked=!0,this.redGL=t,this.greenGL=i,this.blueGL=o,this.alphaGL=a,this._locked=!1,this.update(!0)},setFromRGB:function setFromRGB(t){return this._locked=!0,this.red=t.r,this.green=t.g,this.blue=t.b,t.hasOwnProperty("a")&&(this.alpha=t.a),this._locked=!1,this.update(!0)},setFromHSV:function setFromHSV(t,i,o){return b(t,i,o,this)},update:function update(t){if(void 0===t&&(t=!1),this._locked)return this;var i=this.r,o=this.g,a=this.b,b=this.a;return this._color=u(i,o,a),this._color32=d(i,o,a,b),this._rgba="rgba("+i+","+o+","+a+","+b/255+")",t&&S(i,o,a,this),this},updateHSV:function updateHSV(){var t=this.r,i=this.g,o=this.b;return S(t,i,o,this),this},clone:function clone(){return new C(this.r,this.g,this.b,this.a)},gray:function gray(t){return this.setTo(t,t,t)},random:function random(t,i){void 0===t&&(t=0),void 0===i&&(i=255);var o=Math.floor(t+Math.random()*(i-t)),a=Math.floor(t+Math.random()*(i-t)),u=Math.floor(t+Math.random()*(i-t));return this.setTo(o,a,u)},randomGray:function randomGray(t,i){void 0===t&&(t=0),void 0===i&&(i=255);var o=Math.floor(t+Math.random()*(i-t));return this.setTo(o,o,o)},saturate:function saturate(t){return this.s+=t/100,this},desaturate:function desaturate(t){return this.s-=t/100,this},lighten:function lighten(t){return this.v+=t/100,this},darken:function darken(t){return this.v-=t/100,this},brighten:function brighten(t){var i=this.r,o=this.g,a=this.b;return i=Math.max(0,Math.min(255,i-Math.round(-t/100*255))),o=Math.max(0,Math.min(255,o-Math.round(-t/100*255))),a=Math.max(0,Math.min(255,a-Math.round(-t/100*255))),this.setTo(i,o,a)},color:{get:function get(){return this._color}},color32:{get:function get(){return this._color32}},rgba:{get:function get(){return this._rgba}},redGL:{get:function get(){return this.gl[0]},set:function set(t){this.gl[0]=Math.min(Math.abs(t),1),this.r=Math.floor(255*this.gl[0]),this.update(!0)}},greenGL:{get:function get(){return this.gl[1]},set:function set(t){this.gl[1]=Math.min(Math.abs(t),1),this.g=Math.floor(255*this.gl[1]),this.update(!0)}},blueGL:{get:function get(){return this.gl[2]},set:function set(t){this.gl[2]=Math.min(Math.abs(t),1),this.b=Math.floor(255*this.gl[2]),this.update(!0)}},alphaGL:{get:function get(){return this.gl[3]},set:function set(t){this.gl[3]=Math.min(Math.abs(t),1),this.a=Math.floor(255*this.gl[3]),this.update()}},red:{get:function get(){return this.r},set:function set(t){t=Math.floor(Math.abs(t)),this.r=Math.min(t,255),this.gl[0]=t/255,this.update(!0)}},green:{get:function get(){return this.g},set:function set(t){t=Math.floor(Math.abs(t)),this.g=Math.min(t,255),this.gl[1]=t/255,this.update(!0)}},blue:{get:function get(){return this.b},set:function set(t){t=Math.floor(Math.abs(t)),this.b=Math.min(t,255),this.gl[2]=t/255,this.update(!0)}},alpha:{get:function get(){return this.a},set:function set(t){t=Math.floor(Math.abs(t)),this.a=Math.min(t,255),this.gl[3]=t/255,this.update()}},h:{get:function get(){return this._h},set:function set(t){this._h=t,b(t,this._s,this._v,this)}},s:{get:function get(){return this._s},set:function set(t){this._s=t,b(this._h,t,this._v,this)}},v:{get:function get(){return this._v},set:function set(t){this._v=t,b(this._h,this._s,t,this)}}});t.exports=C},function(t,i,o){var a=new(o(0))({initialize:function Vector3(t,i,o){this.x=0,this.y=0,this.z=0,"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=i||0,this.z=o||0)},up:function up(){return this.x=0,this.y=1,this.z=0,this},min:function min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clone:function clone(){return new a(this.x,this.y,this.z)},addVectors:function addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this},crossVectors:function crossVectors(t,i){var o=t.x,a=t.y,u=t.z,d=i.x,b=i.y,S=i.z;return this.x=a*S-u*b,this.y=u*d-o*S,this.z=o*b-a*d,this},equals:function equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},copy:function copy(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},set:function set(t,i,o){return"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=i||0,this.z=o||0),this},setFromMatrixPosition:function setFromMatrixPosition(t){return this.fromArray(t.val,12)},setFromMatrixColumn:function setFromMatrixColumn(t,i){return this.fromArray(t.val,4*i)},fromArray:function fromArray(t,i){return void 0===i&&(i=0),this.x=t[i],this.y=t[i+1],this.z=t[i+2],this},add:function add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this},addScalar:function addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this},addScale:function addScale(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i||0,this},subtract:function subtract(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this},multiply:function multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this},scale:function scale(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divide:function divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this},negate:function negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function distance(t){var i=t.x-this.x,o=t.y-this.y,a=t.z-this.z||0;return Math.sqrt(i*i+o*o+a*a)},distanceSq:function distanceSq(t){var i=t.x-this.x,o=t.y-this.y,a=t.z-this.z||0;return i*i+o*o+a*a},length:function length(){var t=this.x,i=this.y,o=this.z;return Math.sqrt(t*t+i*i+o*o)},lengthSq:function lengthSq(){var t=this.x,i=this.y,o=this.z;return t*t+i*i+o*o},normalize:function normalize(){var t=this.x,i=this.y,o=this.z,a=t*t+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),this.x=t*a,this.y=i*a,this.z=o*a),this},dot:function dot(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function cross(t){var i=this.x,o=this.y,a=this.z,u=t.x,d=t.y,b=t.z;return this.x=o*b-a*d,this.y=a*u-i*b,this.z=i*d-o*u,this},lerp:function lerp(t,i){void 0===i&&(i=0);var o=this.x,a=this.y,u=this.z;return this.x=o+i*(t.x-o),this.y=a+i*(t.y-a),this.z=u+i*(t.z-u),this},applyMatrix3:function applyMatrix3(t){var i=this.x,o=this.y,a=this.z,u=t.val;return this.x=u[0]*i+u[3]*o+u[6]*a,this.y=u[1]*i+u[4]*o+u[7]*a,this.z=u[2]*i+u[5]*o+u[8]*a,this},applyMatrix4:function applyMatrix4(t){var i=this.x,o=this.y,a=this.z,u=t.val,d=1/(u[3]*i+u[7]*o+u[11]*a+u[15]);return this.x=(u[0]*i+u[4]*o+u[8]*a+u[12])*d,this.y=(u[1]*i+u[5]*o+u[9]*a+u[13])*d,this.z=(u[2]*i+u[6]*o+u[10]*a+u[14])*d,this},transformMat3:function transformMat3(t){var i=this.x,o=this.y,a=this.z,u=t.val;return this.x=i*u[0]+o*u[3]+a*u[6],this.y=i*u[1]+o*u[4]+a*u[7],this.z=i*u[2]+o*u[5]+a*u[8],this},transformMat4:function transformMat4(t){var i=this.x,o=this.y,a=this.z,u=t.val;return this.x=u[0]*i+u[4]*o+u[8]*a+u[12],this.y=u[1]*i+u[5]*o+u[9]*a+u[13],this.z=u[2]*i+u[6]*o+u[10]*a+u[14],this},transformCoordinates:function transformCoordinates(t){var i=this.x,o=this.y,a=this.z,u=t.val,d=i*u[0]+o*u[4]+a*u[8]+u[12],b=i*u[1]+o*u[5]+a*u[9]+u[13],S=i*u[2]+o*u[6]+a*u[10]+u[14],C=i*u[3]+o*u[7]+a*u[11]+u[15];return this.x=d/C,this.y=b/C,this.z=S/C,this},transformQuat:function transformQuat(t){var i=this.x,o=this.y,a=this.z,u=t.x,d=t.y,b=t.z,S=t.w,C=S*i+d*a-b*o,M=S*o+b*i-u*a,P=S*a+u*o-d*i,R=-u*i-d*o-b*a;return this.x=C*S+R*-u+M*-b-P*-d,this.y=M*S+R*-d+P*-u-C*-b,this.z=P*S+R*-b+C*-d-M*-u,this},project:function project(t){var i=this.x,o=this.y,a=this.z,u=t.val,d=u[0],b=u[1],S=u[2],C=u[3],M=u[4],P=u[5],R=u[6],O=u[7],B=u[8],N=u[9],Y=u[10],G=u[11],X=u[12],U=u[13],z=u[14],V=1/(i*C+o*O+a*G+u[15]);return this.x=(i*d+o*M+a*B+X)*V,this.y=(i*b+o*P+a*N+U)*V,this.z=(i*S+o*R+a*Y+z)*V,this},projectViewMatrix:function projectViewMatrix(t,i){return this.applyMatrix4(t).applyMatrix4(i)},unprojectViewMatrix:function unprojectViewMatrix(t,i){return this.applyMatrix4(t).applyMatrix4(i)},unproject:function unproject(t,i){var o=t.x,a=t.y,u=t.z,d=t.w,b=this.x-o,S=d-this.y-1-a,C=this.z;return this.x=2*b/u-1,this.y=2*S/d-1,this.z=2*C-1,this.project(i)},reset:function reset(){return this.x=0,this.y=0,this.z=0,this}});a.ZERO=new a,a.RIGHT=new a(1,0,0),a.LEFT=new a(-1,0,0),a.UP=new a(0,-1,0),a.DOWN=new a(0,1,0),a.FORWARD=new a(0,0,1),a.BACK=new a(0,0,-1),a.ONE=new a(1,1,1),t.exports=a},function(t,i){t.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(t,i,o){var a={};t.exports=a;var u=o(64),d=o(83),b=o(165),S=o(32),C=o(84),M=o(271);!function(){a._inertiaScale=4,a._nextCollidingGroupId=1,a._nextNonCollidingGroupId=-1,a._nextCategory=1,a.create=function(i){var o={id:S.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!i.hasOwnProperty("position")&&i.hasOwnProperty("vertices")?i.position=u.centre(i.vertices):i.hasOwnProperty("vertices")||(o.vertices=u.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var a=S.extend(o,i);return t(a,i),a.setOnCollideWith=function(t,i){return i?this.onCollideWith[t.id]=i:delete this.onCollideWith[t.id],this},a},a.nextGroup=function(t){return t?a._nextNonCollidingGroupId--:a._nextCollidingGroupId++},a.nextCategory=function(){return a._nextCategory=a._nextCategory<<1,a._nextCategory};var t=function _initProperties(t,i){i=i||{},a.set(t,{bounds:t.bounds||C.create(t.vertices),positionPrev:t.positionPrev||d.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t});var o=t.bounds;if(u.rotate(t.vertices,t.angle,t.position),M.rotate(t.axes,t.angle),C.update(o,t.vertices,t.velocity),a.set(t,{axes:i.axes||t.axes,area:i.area||t.area,mass:i.mass||t.mass,inertia:i.inertia||t.inertia}),1===t.parts.length){var b=t.centerOfMass,S=t.centerOffset,P=o.max.x-o.min.x,R=o.max.y-o.min.y;b.x=-(o.min.x-t.position.x)/P,b.y=-(o.min.y-t.position.y)/R,S.x=P*b.x,S.y=R*b.y}};a.set=function(t,i,o){var u;for(u in"string"==typeof i&&(u=i,(i={})[u]=o),i)if(Object.prototype.hasOwnProperty.call(i,u))switch(o=i[u],u){case"isStatic":a.setStatic(t,o);break;case"isSleeping":b.set(t,o);break;case"mass":a.setMass(t,o);break;case"density":a.setDensity(t,o);break;case"inertia":a.setInertia(t,o);break;case"vertices":a.setVertices(t,o);break;case"position":a.setPosition(t,o);break;case"angle":a.setAngle(t,o);break;case"velocity":a.setVelocity(t,o);break;case"angularVelocity":a.setAngularVelocity(t,o);break;case"parts":a.setParts(t,o);break;case"centre":a.setCentre(t,o);break;default:t[u]=o}},a.setStatic=function(t,i){for(var o=0;o<t.parts.length;o++){var a=t.parts[o];a.isStatic=i,i?(a._original={restitution:a.restitution,friction:a.friction,mass:a.mass,inertia:a.inertia,density:a.density,inverseMass:a.inverseMass,inverseInertia:a.inverseInertia},a.restitution=0,a.friction=1,a.mass=a.inertia=a.density=1/0,a.inverseMass=a.inverseInertia=0,a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,a.anglePrev=a.angle,a.angularVelocity=0,a.speed=0,a.angularSpeed=0,a.motion=0):a._original&&(a.restitution=a._original.restitution,a.friction=a._original.friction,a.mass=a._original.mass,a.inertia=a._original.inertia,a.density=a._original.density,a.inverseMass=a._original.inverseMass,a.inverseInertia=a._original.inverseInertia,a._original=null)}},a.setMass=function(t,i){var o=t.inertia/(t.mass/6);t.inertia=o*(i/6),t.inverseInertia=1/t.inertia,t.mass=i,t.inverseMass=1/t.mass,t.density=t.mass/t.area},a.setDensity=function(t,i){a.setMass(t,i*t.area),t.density=i},a.setInertia=function(t,i){t.inertia=i,t.inverseInertia=1/t.inertia},a.setVertices=function(t,i){i[0].body===t?t.vertices=i:t.vertices=u.create(i,t),t.axes=M.fromVertices(t.vertices),t.area=u.area(t.vertices),a.setMass(t,t.density*t.area);var o=u.centre(t.vertices);u.translate(t.vertices,o,-1),a.setInertia(t,a._inertiaScale*u.inertia(t.vertices,t.mass)),u.translate(t.vertices,t.position),C.update(t.bounds,t.vertices,t.velocity)},a.setParts=function(t,i,o){var d;for(i=i.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,d=0;d<i.length;d++){var b=i[d];b!==t&&(b.parent=t,t.parts.push(b))}if(1!==t.parts.length){if(o=void 0===o||o){var S=[];for(d=0;d<i.length;d++)S=S.concat(i[d].vertices);u.clockwiseSort(S);var M=u.hull(S),P=u.centre(M);a.setVertices(t,M),u.translate(t.vertices,P)}var R=a._totalProperties(t),O=R.centre.x,B=R.centre.y,N=t.bounds,Y=t.centerOfMass,G=t.centerOffset;C.update(N,t.vertices,t.velocity),Y.x=-(N.min.x-O)/(N.max.x-N.min.x),Y.y=-(N.min.y-B)/(N.max.y-N.min.y),G.x=O,G.y=B,t.area=R.area,t.parent=t,t.position.x=O,t.position.y=B,t.positionPrev.x=O,t.positionPrev.y=B,a.setMass(t,R.mass),a.setInertia(t,R.inertia),a.setPosition(t,R.centre)}},a.setCentre=function(t,i,o){o?(t.positionPrev.x+=i.x,t.positionPrev.y+=i.y,t.position.x+=i.x,t.position.y+=i.y):(t.positionPrev.x=i.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=i.y-(t.position.y-t.positionPrev.y),t.position.x=i.x,t.position.y=i.y)},a.setPosition=function(t,i){var o=d.sub(i,t.position);t.positionPrev.x+=o.x,t.positionPrev.y+=o.y;for(var a=0;a<t.parts.length;a++){var b=t.parts[a];b.position.x+=o.x,b.position.y+=o.y,u.translate(b.vertices,o),C.update(b.bounds,b.vertices,t.velocity)}},a.setAngle=function(t,i){var o=i-t.angle;t.anglePrev+=o;for(var a=0;a<t.parts.length;a++){var b=t.parts[a];b.angle+=o,u.rotate(b.vertices,o,t.position),M.rotate(b.axes,o),C.update(b.bounds,b.vertices,t.velocity),a>0&&d.rotateAbout(b.position,o,t.position,b.position)}},a.setVelocity=function(t,i){t.positionPrev.x=t.position.x-i.x,t.positionPrev.y=t.position.y-i.y,t.velocity.x=i.x,t.velocity.y=i.y,t.speed=d.magnitude(t.velocity)},a.setAngularVelocity=function(t,i){t.anglePrev=t.angle-i,t.angularVelocity=i,t.angularSpeed=Math.abs(t.angularVelocity)},a.translate=function(t,i){a.setPosition(t,d.add(t.position,i))},a.rotate=function(t,i,o){if(o){var u=Math.cos(i),d=Math.sin(i),b=t.position.x-o.x,S=t.position.y-o.y;a.setPosition(t,{x:o.x+(b*u-S*d),y:o.y+(b*d+S*u)}),a.setAngle(t,t.angle+i)}else a.setAngle(t,t.angle+i)},a.scale=function(t,i,o,d){var b=0,S=0;d=d||t.position;for(var P=0;P<t.parts.length;P++){var R=t.parts[P];R.scale.x=i,R.scale.y=o,u.scale(R.vertices,i,o,d),R.axes=M.fromVertices(R.vertices),R.area=u.area(R.vertices),a.setMass(R,t.density*R.area),u.translate(R.vertices,{x:-R.position.x,y:-R.position.y}),a.setInertia(R,a._inertiaScale*u.inertia(R.vertices,R.mass)),u.translate(R.vertices,{x:R.position.x,y:R.position.y}),P>0&&(b+=R.area,S+=R.inertia),R.position.x=d.x+(R.position.x-d.x)*i,R.position.y=d.y+(R.position.y-d.y)*o,C.update(R.bounds,R.vertices,t.velocity)}t.parts.length>1&&(t.area=b,t.isStatic||(a.setMass(t,t.density*b),a.setInertia(t,S))),t.circleRadius&&(i===o?t.circleRadius*=i:t.circleRadius=null)},a.update=function(t,i,o,a){var b=Math.pow(i*o*t.timeScale,2),S=1-t.frictionAir*o*t.timeScale,P=t.position.x-t.positionPrev.x,R=t.position.y-t.positionPrev.y;t.velocity.x=P*S*a+t.force.x/t.mass*b,t.velocity.y=R*S*a+t.force.y/t.mass*b,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*S*a+t.torque/t.inertia*b,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=d.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var O=0;O<t.parts.length;O++){var B=t.parts[O];u.translate(B.vertices,t.velocity),O>0&&(B.position.x+=t.velocity.x,B.position.y+=t.velocity.y),0!==t.angularVelocity&&(u.rotate(B.vertices,t.angularVelocity,t.position),M.rotate(B.axes,t.angularVelocity),O>0&&d.rotateAbout(B.position,t.angularVelocity,t.position,B.position)),C.update(B.bounds,B.vertices,t.velocity)}},a.applyForce=function(t,i,o){t.force.x+=o.x,t.force.y+=o.y;var a=i.x-t.position.x,u=i.y-t.position.y;t.torque+=a*o.y-u*o.x},a._totalProperties=function(t){for(var i={mass:0,area:0,inertia:0,centre:{x:0,y:0}},o=1===t.parts.length?0:1;o<t.parts.length;o++){var a=t.parts[o],u=a.mass!==1/0?a.mass:1;i.mass+=u,i.area+=a.area,i.inertia+=a.inertia,i.centre=d.add(i.centre,d.mult(a.position,u))}return i.centre=d.div(i.centre,i.mass),i}}()},function(t,i){t.exports=function GetBottom(t){return t.y+t.height-t.height*t.originY}},function(t,i){t.exports=function GetLeft(t){return t.x-t.width*t.originX}},function(t,i){t.exports=function GetRight(t){return t.x+t.width-t.width*t.originX}},function(t,i){t.exports=function GetTop(t){return t.y-t.height*t.originY}},function(t,i){t.exports=function PropertyValueInc(t,i,o,a,u,d){var b;void 0===a&&(a=0),void 0===u&&(u=0),void 0===d&&(d=1);var S=0,C=t.length;if(1===d)for(b=u;b<C;b++)t[b][i]+=o+S*a,S++;else for(b=u;b>=0;b--)t[b][i]+=o+S*a,S++;return t}},function(t,i,o){var a=o(0),u=o(307),d=o(172),b=o(56),S=o(173),C=o(3),M=new a({initialize:function Line(t,i,o,a){void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),this.type=b.LINE,this.x1=t,this.y1=i,this.x2=o,this.y2=a},getPoint:function getPoint(t,i){return u(this,t,i)},getPoints:function getPoints(t,i,o){return d(this,t,i,o)},getRandomPoint:function getRandomPoint(t){return S(this,t)},setTo:function setTo(t,i,o,a){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),this.x1=t,this.y1=i,this.x2=o,this.y2=a,this},getPointA:function getPointA(t){return void 0===t&&(t=new C),t.set(this.x1,this.y1),t},getPointB:function getPointB(t){return void 0===t&&(t=new C),t.set(this.x2,this.y2),t},left:{get:function get(){return Math.min(this.x1,this.x2)},set:function set(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function get(){return Math.max(this.x1,this.x2)},set:function set(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function get(){return Math.min(this.y1,this.y2)},set:function set(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function get(){return Math.max(this.y1,this.y2)},set:function set(t){this.y1>this.y2?this.y1=t:this.y2=t}}});t.exports=M},function(t,i){t.exports=function FillStyleCanvas(t,i,o,a){var u=o||i.fillColor,d=a||i.fillAlpha,b=(16711680&u)>>>16,S=(65280&u)>>>8,C=255&u;t.fillStyle="rgba("+b+","+S+","+C+","+d+")"}},function(t,i,o){var a=new(o(0))({initialize:function MultiFile(t,i,o,a){var u=[];a.forEach((function(t){t&&u.push(t)})),this.loader=t,this.type=i,this.key=o,this.multiKeyIndex=t.multiKeyIndex++,this.files=u,this.complete=!1,this.pending=u.length,this.failed=0,this.config={},this.baseURL=t.baseURL,this.path=t.path,this.prefix=t.prefix;for(var d=0;d<u.length;d++)u[d].multiFile=this},isReadyToProcess:function isReadyToProcess(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function addToMultiFile(t){return this.files.push(t),t.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function onFileComplete(t){-1!==this.files.indexOf(t)&&this.pending--},onFileFailed:function onFileFailed(t){-1!==this.files.indexOf(t)&&this.failed++}});t.exports=a},function(t,i){t.exports=function DistanceBetween(t,i,o,a){var u=t-o,d=i-a;return Math.sqrt(u*u+d*d)}},function(t,i,o){t.exports={BOOT:o(922),DESTROY:o(923),DRAG_END:o(924),DRAG_ENTER:o(925),DRAG:o(926),DRAG_LEAVE:o(927),DRAG_OVER:o(928),DRAG_START:o(929),DROP:o(930),GAME_OUT:o(931),GAME_OVER:o(932),GAMEOBJECT_DOWN:o(933),GAMEOBJECT_DRAG_END:o(934),GAMEOBJECT_DRAG_ENTER:o(935),GAMEOBJECT_DRAG:o(936),GAMEOBJECT_DRAG_LEAVE:o(937),GAMEOBJECT_DRAG_OVER:o(938),GAMEOBJECT_DRAG_START:o(939),GAMEOBJECT_DROP:o(940),GAMEOBJECT_MOVE:o(941),GAMEOBJECT_OUT:o(942),GAMEOBJECT_OVER:o(943),GAMEOBJECT_POINTER_DOWN:o(944),GAMEOBJECT_POINTER_MOVE:o(945),GAMEOBJECT_POINTER_OUT:o(946),GAMEOBJECT_POINTER_OVER:o(947),GAMEOBJECT_POINTER_UP:o(948),GAMEOBJECT_POINTER_WHEEL:o(949),GAMEOBJECT_UP:o(950),GAMEOBJECT_WHEEL:o(951),MANAGER_BOOT:o(952),MANAGER_PROCESS:o(953),MANAGER_UPDATE:o(954),POINTER_DOWN:o(955),POINTER_DOWN_OUTSIDE:o(956),POINTER_MOVE:o(957),POINTER_OUT:o(958),POINTER_OVER:o(959),POINTER_UP:o(960),POINTER_UP_OUTSIDE:o(961),POINTER_WHEEL:o(962),POINTERLOCK_CHANGE:o(963),PRE_UPDATE:o(964),SHUTDOWN:o(965),START:o(966),UPDATE:o(967)}},function(t,i){t.exports=function SetTop(t,i){return t.y=i+t.height*t.originY,t}},function(t,i){t.exports=function SetLeft(t,i){return t.x=i+t.width*t.originX,t}},function(t,i){t.exports=function SetRight(t,i){return t.x=i-t.width+t.width*t.originX,t}},function(t,i){t.exports=function SetBottom(t,i){return t.y=i-t.height+t.height*t.originY,t}},function(t,i){t.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},function(t,i){t.exports=function Contains(t,i,o){return!(t.width<=0||t.height<=0)&&t.x<=i&&t.x+t.width>=i&&t.y<=o&&t.y+t.height>=o}},function(t,i,o){var a=o(0),u=o(175),d=o(9),b=o(374),S=o(2),C=o(69),M=o(91),P=o(141),R=o(12),O=o(375),B=new a({Extends:d,initialize:function WebGLPipeline(t){d.call(this);var i=t.game,o=i.renderer,a=o.gl;this.name=S(t,"name","WebGLPipeline"),this.game=i,this.renderer=o,this.manager,this.gl=a,this.view=i.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=S(t,"topology",a.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=S(t,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=t,this.glReset=!1},boot:function boot(){var t,i=this.gl,o=this.config,a=this.renderer;this.isPostFX||(this.projectionMatrix=(new C).identity());var u=this.renderTargets,d=S(o,"renderTarget",!1);"boolean"==typeof d&&d&&(d=1);var R=a.width,O=a.height;if("number"==typeof d)for(t=0;t<d;t++)u.push(new P(a,R,O,1,0,!0));else if(Array.isArray(d))for(t=0;t<d.length;t++){var B=S(d[t],"scale",1),N=S(d[t],"minFilter",0),Y=S(d[t],"autoClear",1);u.push(new P(a,R,O,B,N,Y))}u.length&&(this.currentRenderTarget=u[0]),this.setShadersFromConfig(o);var G=this.shaders,X=0;for(t=0;t<G.length;t++)G[t].vertexSize>X&&(X=G[t].vertexSize);var U=S(o,"batchSize",a.config.batchSize);this.vertexCapacity=6*U;var z=new ArrayBuffer(this.vertexCapacity*X);this.vertexData=z,this.bytes=new Uint8Array(z),this.vertexViewF32=new Float32Array(z),this.vertexViewU32=new Uint32Array(z);var V=S(o,"vertices",null);for(V?(this.vertexViewF32.set(V),this.vertexBuffer=a.createVertexBuffer(z,i.STATIC_DRAW)):this.vertexBuffer=a.createVertexBuffer(z.byteLength,i.DYNAMIC_DRAW),this.setVertexBuffer(),t=G.length-1;t>=0;t--)G[t].rebind();this.hasBooted=!0,a.on(M.RESIZE,this.resize,this),a.on(M.PRE_RENDER,this.onPreRender,this),a.on(M.RENDER,this.onRender,this),a.on(M.POST_RENDER,this.onPostRender,this),this.emit(b.BOOT,this),this.onBoot()},onBoot:function onBoot(){},onResize:function onResize(){},setShader:function setShader(t,i){var o=this.renderer;return t===this.currentShader&&o.currentProgram===this.currentShader.program||(this.flush(),o.resetTextures(),this.setVertexBuffer()&&!i&&(i=!0),t.bind(i,!1),this.currentShader=t),this},getShaderByName:function getShaderByName(t){for(var i=this.shaders,o=0;o<i.length;o++)if(i[o].name===t)return i[o]},setShadersFromConfig:function setShadersFromConfig(t){var i,o=this.shaders,a=this.renderer;for(i=0;i<o.length;i++)o[i].destroy();var d="vertShader",b="fragShader",C="attributes",M=S(t,d,null),P=R.parseFragmentShaderMaxTextures(S(t,b,null),a.maxTextures),B=S(t,C,null),N=S(t,"shaders",[]),Y=N.length;if(0===Y)M&&P&&(this.shaders=[new O(this,"default",M,P,u(B))]);else{var G=[];for(i=0;i<Y;i++){var X=N[i],U=S(X,"name","default"),z=S(X,d,M),V=R.parseFragmentShaderMaxTextures(S(X,b,P),a.maxTextures),W=S(X,C,B);z&&V&&G.push(new O(this,U,z,V,u(W)))}this.shaders=G}return 0===this.shaders.length?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function setGameObject(t,i){return void 0===i&&(i=t.frame),this.currentUnit=this.renderer.setTextureSource(i.source),this.currentUnit},shouldFlush:function shouldFlush(t){return void 0===t&&(t=0),this.vertexCount+t>this.vertexCapacity},resize:function resize(t,i){t===this.width&&i===this.height||this.flush(),this.width=t,this.height=i;for(var o=this.renderTargets,a=0;a<o.length;a++)o[a].resize(t,i);return this.setProjectionMatrix(t,i),this.emit(b.RESIZE,t,i,this),this.onResize(t,i),this},setProjectionMatrix:function setProjectionMatrix(t,i){var o=this.projectionMatrix;if(!o)return this;this.projectionWidth=t,this.projectionHeight=i,o.ortho(0,t,i,0,-1e3,1e3);for(var a=this.shaders,u="uProjectionMatrix",d=0;d<a.length;d++){var b=a[d];b.hasUniform(u)&&(b.resetUniform(u),b.setMatrix4fv(u,!1,o.val,b))}return this},updateProjectionMatrix:function updateProjectionMatrix(){if(this.projectionMatrix){var t=this.renderer.projectionWidth,i=this.renderer.projectionHeight;this.projectionWidth===t&&this.projectionHeight===i||this.setProjectionMatrix(t,i)}},bind:function bind(t){if(void 0===t&&(t=this.currentShader),this.glReset)return this.rebind(t);var i=this.setVertexBuffer();return t.bind(i),this.currentShader=t,this.emit(b.BIND,this,t),this.onActive(t),this},rebind:function rebind(t){this.setVertexBuffer();for(var i=this.shaders,o=i.length-1;o>=0;o--){var a=i[o].rebind();t&&a!==t||(this.currentShader=a)}return this.emit(b.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function setVertexBuffer(){var t=this.gl,i=this.vertexBuffer;return t.getParameter(t.ARRAY_BUFFER_BINDING)!==i&&(t.bindBuffer(t.ARRAY_BUFFER,i),!0)},preBatch:function preBatch(t){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(t),this},postBatch:function postBatch(t){return this.onDraw(this.currentRenderTarget),this.onPostBatch(t),this},onDraw:function onDraw(){},unbind:function unbind(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function flush(t){if(void 0===t&&(t=!1),this.vertexCount>0){this.emit(b.BEFORE_FLUSH,this,t),this.onBeforeFlush(t);var i=this.gl,o=this.vertexCount,a=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),o===this.vertexCapacity?i.bufferData(i.ARRAY_BUFFER,this.vertexData,i.DYNAMIC_DRAW):i.bufferSubData(i.ARRAY_BUFFER,0,this.bytes.subarray(0,o*a)),i.drawArrays(this.topology,0,o)),this.vertexCount=0,this.emit(b.AFTER_FLUSH,this,t),this.onAfterFlush(t)}return this},onActive:function onActive(){},onBind:function onBind(){},onRebind:function onRebind(){},onBatch:function onBatch(){},onPreBatch:function onPreBatch(){},onPostBatch:function onPostBatch(){},onPreRender:function onPreRender(){},onRender:function onRender(){},onPostRender:function onPostRender(){},onBeforeFlush:function onBeforeFlush(){},onAfterFlush:function onAfterFlush(){},batchVert:function batchVert(t,i,o,a,u,d,b){var S=this.vertexViewF32,C=this.vertexViewU32,M=this.vertexCount*this.currentShader.vertexComponentCount-1;S[++M]=t,S[++M]=i,S[++M]=o,S[++M]=a,S[++M]=u,S[++M]=d,C[++M]=b,this.vertexCount++},batchQuad:function batchQuad(t,i,o,a,u,d,b,S,C,M,P,R,O,B,N,Y,G,X,U,z){void 0===z&&(z=this.currentUnit);var V=!1;return this.shouldFlush(6)&&(this.flush(),V=!0,z=this.setTexture2D(U)),this.batchVert(i,o,M,P,z,X,B),this.batchVert(a,u,M,O,z,X,Y),this.batchVert(d,b,R,O,z,X,G),this.batchVert(i,o,M,P,z,X,B),this.batchVert(d,b,R,O,z,X,G),this.batchVert(S,C,R,P,z,X,N),this.onBatch(t),V},batchTri:function batchTri(t,i,o,a,u,d,b,S,C,M,P,R,O,B,N,Y,G){void 0===G&&(G=this.currentUnit);var X=!1;return this.shouldFlush(3)&&(this.flush(),X=!0,G=this.setTexture2D(Y)),this.batchVert(i,o,S,C,G,N,R),this.batchVert(a,u,S,P,G,N,O),this.batchVert(d,b,M,P,G,N,B),this.onBatch(t),X},drawFillRect:function drawFillRect(t,i,o,a,u,d,b,S){void 0===b&&(b=this.renderer.whiteTexture.glTexture),void 0===S&&(S=!0),t=Math.floor(t),i=Math.floor(i);var C=Math.floor(t+o),M=Math.floor(i+a),P=this.setTexture2D(b),O=R.getTintAppendFloatAlphaAndSwap(u,d),B=0,N=1;S&&(B=1,N=0),this.batchQuad(null,t,i,t,M,C,M,C,i,0,B,1,N,O,O,O,O,0,b,P)},setTexture2D:function setTexture2D(t){return void 0===t&&(t=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(t),this.currentUnit},bindTexture:function bindTexture(t,i){void 0===i&&(i=0);var o=this.gl;return o.activeTexture(o.TEXTURE0+i),o.bindTexture(o.TEXTURE_2D,t),this},bindRenderTarget:function bindRenderTarget(t,i){return this.bindTexture(t.texture,i)},setTime:function setTime(t){return this.set1f(t,this.game.loop.getDuration()),this},set1f:function set1f(t,i,o){return void 0===o&&(o=this.currentShader),o.set1f(t,i),this},set2f:function set2f(t,i,o,a){return void 0===a&&(a=this.currentShader),a.set2f(t,i,o),this},set3f:function set3f(t,i,o,a,u){return void 0===u&&(u=this.currentShader),u.set3f(t,i,o,a),this},set4f:function set4f(t,i,o,a,u,d){return void 0===d&&(d=this.currentShader),d.set4f(t,i,o,a,u),this},set1fv:function set1fv(t,i,o){return void 0===o&&(o=this.currentShader),o.set1fv(t,i),this},set2fv:function set2fv(t,i,o){return void 0===o&&(o=this.currentShader),o.set2fv(t,i),this},set3fv:function set3fv(t,i,o){return void 0===o&&(o=this.currentShader),o.set3fv(t,i),this},set4fv:function set4fv(t,i,o){return void 0===o&&(o=this.currentShader),o.set4fv(t,i),this},set1iv:function set1iv(t,i,o){return void 0===o&&(o=this.currentShader),o.set1iv(t,i),this},set2iv:function set2iv(t,i,o){return void 0===o&&(o=this.currentShader),o.set2iv(t,i),this},set3iv:function set3iv(t,i,o){return void 0===o&&(o=this.currentShader),o.set3iv(t,i),this},set4iv:function set4iv(t,i,o){return void 0===o&&(o=this.currentShader),o.set4iv(t,i),this},set1i:function set1i(t,i,o){return void 0===o&&(o=this.currentShader),o.set1i(t,i),this},set2i:function set2i(t,i,o,a){return void 0===a&&(a=this.currentShader),a.set2i(t,i,o),this},set3i:function set3i(t,i,o,a,u){return void 0===u&&(u=this.currentShader),u.set3i(t,i,o,a),this},set4i:function set4i(t,i,o,a,u,d){return void 0===d&&(d=this.currentShader),d.set4i(t,i,o,a,u),this},setMatrix2fv:function setMatrix2fv(t,i,o,a){return void 0===a&&(a=this.currentShader),a.setMatrix2fv(t,i,o),this},setMatrix3fv:function setMatrix3fv(t,i,o,a){return void 0===a&&(a=this.currentShader),a.setMatrix3fv(t,i,o),this},setMatrix4fv:function setMatrix4fv(t,i,o,a){return void 0===a&&(a=this.currentShader),a.setMatrix4fv(t,i,o),this},destroy:function destroy(){var t;this.emit(b.DESTROY,this);var i=this.shaders;for(t=0;t<i.length;t++)i[t].destroy();var o=this.renderTargets;for(t=0;t<o.length;t++)o[t].destroy();this.gl.deleteBuffer(this.vertexBuffer);var a=this.renderer;return a.off(M.RESIZE,this.resize,this),a.off(M.PRE_RENDER,this.onPreRender,this),a.off(M.RENDER,this.onRender,this),a.off(M.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});t.exports=B},function(t,i,o){function earcut(t,i,o){o=o||2;var a,u,d,b,S,C,M,P=i&&i.length,R=P?i[0]*o:t.length,O=linkedList(t,0,R,o,!0),B=[];if(!O||O.next===O.prev)return B;if(P&&(O=function eliminateHoles(t,i,o,a){var u,d,b,S=[];for(u=0,d=i.length;u<d;u++)(b=linkedList(t,i[u]*a,u<d-1?i[u+1]*a:t.length,a,!1))===b.next&&(b.steiner=!0),S.push(getLeftmost(b));for(S.sort(compareX),u=0;u<S.length;u++)eliminateHole(S[u],o),o=filterPoints(o,o.next);return o}(t,i,O,o)),t.length>80*o){a=d=t[0],u=b=t[1];for(var N=o;N<R;N+=o)(S=t[N])<a&&(a=S),(C=t[N+1])<u&&(u=C),S>d&&(d=S),C>b&&(b=C);M=0!==(M=Math.max(d-a,b-u))?1/M:0}return earcutLinked(O,B,o,a,u,M),B}function linkedList(t,i,o,a,u){var d,b;if(u===signedArea(t,i,o,a)>0)for(d=i;d<o;d+=a)b=insertNode(d,t[d],t[d+1],b);else for(d=o-a;d>=i;d-=a)b=insertNode(d,t[d],t[d+1],b);return b&&equals(b,b.next)&&(removeNode(b),b=b.next),b}function filterPoints(t,i){if(!t)return t;i||(i=t);var o,a=t;do{if(o=!1,a.steiner||!equals(a,a.next)&&0!==area(a.prev,a,a.next))a=a.next;else{if(removeNode(a),(a=i=a.prev)===a.next)break;o=!0}}while(o||a!==i);return i}function earcutLinked(t,i,o,a,u,d,b){if(t){!b&&d&&function indexCurve(t,i,o,a){var u=t;do{null===u.z&&(u.z=zOrder(u.x,u.y,i,o,a)),u.prevZ=u.prev,u.nextZ=u.next,u=u.next}while(u!==t);u.prevZ.nextZ=null,u.prevZ=null,function sortLinked(t){var i,o,a,u,d,b,S,C,M=1;do{for(o=t,t=null,d=null,b=0;o;){for(b++,a=o,S=0,i=0;i<M&&(S++,a=a.nextZ);i++);for(C=M;S>0||C>0&&a;)0!==S&&(0===C||!a||o.z<=a.z)?(u=o,o=o.nextZ,S--):(u=a,a=a.nextZ,C--),d?d.nextZ=u:t=u,u.prevZ=d,d=u;o=a}d.nextZ=null,M*=2}while(b>1);return t}(u)}(t,a,u,d);for(var S,C,M=t;t.prev!==t.next;)if(S=t.prev,C=t.next,d?isEarHashed(t,a,u,d):isEar(t))i.push(S.i/o),i.push(t.i/o),i.push(C.i/o),removeNode(t),t=C.next,M=C.next;else if((t=C)===M){b?1===b?earcutLinked(t=cureLocalIntersections(filterPoints(t),i,o),i,o,a,u,d,2):2===b&&splitEarcut(t,i,o,a,u,d):earcutLinked(filterPoints(t),i,o,a,u,d,1);break}}}function isEar(t){var i=t.prev,o=t,a=t.next;if(area(i,o,a)>=0)return!1;for(var u=t.next.next;u!==t.prev;){if(pointInTriangle(i.x,i.y,o.x,o.y,a.x,a.y,u.x,u.y)&&area(u.prev,u,u.next)>=0)return!1;u=u.next}return!0}function isEarHashed(t,i,o,a){var u=t.prev,d=t,b=t.next;if(area(u,d,b)>=0)return!1;for(var S=u.x<d.x?u.x<b.x?u.x:b.x:d.x<b.x?d.x:b.x,C=u.y<d.y?u.y<b.y?u.y:b.y:d.y<b.y?d.y:b.y,M=u.x>d.x?u.x>b.x?u.x:b.x:d.x>b.x?d.x:b.x,P=u.y>d.y?u.y>b.y?u.y:b.y:d.y>b.y?d.y:b.y,R=zOrder(S,C,i,o,a),O=zOrder(M,P,i,o,a),B=t.prevZ,N=t.nextZ;B&&B.z>=R&&N&&N.z<=O;){if(B!==t.prev&&B!==t.next&&pointInTriangle(u.x,u.y,d.x,d.y,b.x,b.y,B.x,B.y)&&area(B.prev,B,B.next)>=0)return!1;if(B=B.prevZ,N!==t.prev&&N!==t.next&&pointInTriangle(u.x,u.y,d.x,d.y,b.x,b.y,N.x,N.y)&&area(N.prev,N,N.next)>=0)return!1;N=N.nextZ}for(;B&&B.z>=R;){if(B!==t.prev&&B!==t.next&&pointInTriangle(u.x,u.y,d.x,d.y,b.x,b.y,B.x,B.y)&&area(B.prev,B,B.next)>=0)return!1;B=B.prevZ}for(;N&&N.z<=O;){if(N!==t.prev&&N!==t.next&&pointInTriangle(u.x,u.y,d.x,d.y,b.x,b.y,N.x,N.y)&&area(N.prev,N,N.next)>=0)return!1;N=N.nextZ}return!0}function cureLocalIntersections(t,i,o){var a=t;do{var u=a.prev,d=a.next.next;!equals(u,d)&&intersects(u,a,a.next,d)&&locallyInside(u,d)&&locallyInside(d,u)&&(i.push(u.i/o),i.push(a.i/o),i.push(d.i/o),removeNode(a),removeNode(a.next),a=t=d),a=a.next}while(a!==t);return filterPoints(a)}function splitEarcut(t,i,o,a,u,d){var b=t;do{for(var S=b.next.next;S!==b.prev;){if(b.i!==S.i&&isValidDiagonal(b,S)){var C=splitPolygon(b,S);return b=filterPoints(b,b.next),C=filterPoints(C,C.next),earcutLinked(b,i,o,a,u,d),void earcutLinked(C,i,o,a,u,d)}S=S.next}b=b.next}while(b!==t)}function compareX(t,i){return t.x-i.x}function eliminateHole(t,i){if(i=function findHoleBridge(t,i){var o,a=i,u=t.x,d=t.y,b=-1/0;do{if(d<=a.y&&d>=a.next.y&&a.next.y!==a.y){var S=a.x+(d-a.y)*(a.next.x-a.x)/(a.next.y-a.y);if(S<=u&&S>b){if(b=S,S===u){if(d===a.y)return a;if(d===a.next.y)return a.next}o=a.x<a.next.x?a:a.next}}a=a.next}while(a!==i);if(!o)return null;if(u===b)return o;var C,M=o,P=o.x,R=o.y,O=1/0;a=o;do{u>=a.x&&a.x>=P&&u!==a.x&&pointInTriangle(d<R?u:b,d,P,R,d<R?b:u,d,a.x,a.y)&&(C=Math.abs(d-a.y)/(u-a.x),locallyInside(a,t)&&(C<O||C===O&&(a.x>o.x||a.x===o.x&&sectorContainsSector(o,a)))&&(o=a,O=C)),a=a.next}while(a!==M);return o}(t,i),i){var o=splitPolygon(i,t);filterPoints(i,i.next),filterPoints(o,o.next)}}function sectorContainsSector(t,i){return area(t.prev,t,i.prev)<0&&area(i.next,t,t.next)<0}function zOrder(t,i,o,a,u){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-o)*u)|t<<8))|t<<4))|t<<2))|t<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-a)*u)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function getLeftmost(t){var i=t,o=t;do{(i.x<o.x||i.x===o.x&&i.y<o.y)&&(o=i),i=i.next}while(i!==t);return o}function pointInTriangle(t,i,o,a,u,d,b,S){return(u-b)*(i-S)-(t-b)*(d-S)>=0&&(t-b)*(a-S)-(o-b)*(i-S)>=0&&(o-b)*(d-S)-(u-b)*(a-S)>=0}function isValidDiagonal(t,i){return t.next.i!==i.i&&t.prev.i!==i.i&&!function intersectsPolygon(t,i){var o=t;do{if(o.i!==t.i&&o.next.i!==t.i&&o.i!==i.i&&o.next.i!==i.i&&intersects(o,o.next,t,i))return!0;o=o.next}while(o!==t);return!1}(t,i)&&(locallyInside(t,i)&&locallyInside(i,t)&&function middleInside(t,i){var o=t,a=!1,u=(t.x+i.x)/2,d=(t.y+i.y)/2;do{o.y>d!=o.next.y>d&&o.next.y!==o.y&&u<(o.next.x-o.x)*(d-o.y)/(o.next.y-o.y)+o.x&&(a=!a),o=o.next}while(o!==t);return a}(t,i)&&(area(t.prev,t,i.prev)||area(t,i.prev,i))||equals(t,i)&&area(t.prev,t,t.next)>0&&area(i.prev,i,i.next)>0)}function area(t,i,o){return(i.y-t.y)*(o.x-i.x)-(i.x-t.x)*(o.y-i.y)}function equals(t,i){return t.x===i.x&&t.y===i.y}function intersects(t,i,o,a){var u=sign(area(t,i,o)),d=sign(area(t,i,a)),b=sign(area(o,a,t)),S=sign(area(o,a,i));return u!==d&&b!==S||!(0!==u||!onSegment(t,o,i))||!(0!==d||!onSegment(t,a,i))||!(0!==b||!onSegment(o,t,a))||!(0!==S||!onSegment(o,i,a))}function onSegment(t,i,o){return i.x<=Math.max(t.x,o.x)&&i.x>=Math.min(t.x,o.x)&&i.y<=Math.max(t.y,o.y)&&i.y>=Math.min(t.y,o.y)}function sign(t){return t>0?1:t<0?-1:0}function locallyInside(t,i){return area(t.prev,t,t.next)<0?area(t,i,t.next)>=0&&area(t,t.prev,i)>=0:area(t,i,t.prev)<0||area(t,t.next,i)<0}function splitPolygon(t,i){var o=new Node(t.i,t.x,t.y),a=new Node(i.i,i.x,i.y),u=t.next,d=i.prev;return t.next=i,i.prev=t,o.next=u,u.prev=o,a.next=o,o.prev=a,d.next=a,a.prev=d,a}function insertNode(t,i,o,a){var u=new Node(t,i,o);return a?(u.next=a.next,u.prev=a,a.next.prev=u,a.next=u):(u.prev=u,u.next=u),u}function removeNode(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Node(t,i,o){this.i=t,this.x=i,this.y=o,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(t,i,o,a){for(var u=0,d=i,b=o-a;d<o;d+=a)u+=(t[b]-t[d])*(t[d+1]+t[b+1]),b=d;return u}earcut.deviation=function(t,i,o,a){var u=i&&i.length,d=u?i[0]*o:t.length,b=Math.abs(signedArea(t,0,d,o));if(u)for(var S=0,C=i.length;S<C;S++){var M=i[S]*o,P=S<C-1?i[S+1]*o:t.length;b-=Math.abs(signedArea(t,M,P,o))}var R=0;for(S=0;S<a.length;S+=3){var O=a[S]*o,B=a[S+1]*o,N=a[S+2]*o;R+=Math.abs((t[O]-t[N])*(t[B+1]-t[O+1])-(t[O]-t[B])*(t[N+1]-t[O+1]))}return 0===b&&0===R?0:Math.abs((R-b)/b)},earcut.flatten=function(t){for(var i=t[0][0].length,o={vertices:[],holes:[],dimensions:i},a=0,u=0;u<t.length;u++){for(var d=0;d<t[u].length;d++)for(var b=0;b<i;b++)o.vertices.push(t[u][d][b]);u>0&&(a+=t[u-1].length,o.holes.push(a))}return o},t.exports=earcut},function(t,i){t.exports=function LineStyleCanvas(t,i,o,a){var u=o||i.strokeColor,d=a||i.strokeAlpha,b=(16711680&u)>>>16,S=(65280&u)>>>8,C=255&u;t.strokeStyle="rgba("+b+","+S+","+C+","+d+")",t.lineWidth=i.lineWidth}},function(t,i,o){var a=o(0),u=o(21),d=o(23),b=o(8),S=o(2),C=o(6),M=o(7),P=new a({Extends:d,initialize:function JSONFile(t,i,o,a,b){var P="json";if(M(i)){var R=i;i=S(R,"key"),o=S(R,"url"),a=S(R,"xhrSettings"),P=S(R,"extension",P),b=S(R,"dataKey",b)}var O={type:"json",cache:t.cacheManager.json,extension:P,responseType:"text",key:i,url:o,xhrSettings:a,config:b};d.call(this,t,O),M(o)&&(this.data=b?C(o,b):o,this.state=u.FILE_POPULATED)},onProcess:function onProcess(){if(this.state!==u.FILE_POPULATED){this.state=u.FILE_PROCESSING;try{var t=JSON.parse(this.xhrLoader.responseText)}catch(o){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),o}var i=this.config;this.data="string"==typeof i?C(t,i,t):t}this.onProcessComplete()}});b.register("json",(function(t,i,o,a){if(Array.isArray(t))for(var u=0;u<t.length;u++)this.addFile(new P(this,t[u]));else this.addFile(new P(this,t,i,a,o));return this})),t.exports=P},function(t,i){t.exports={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14}},function(t,i,o){var a=o(158),u=o(26);t.exports=function CalculateFacesWithin(t,i,o,d,b){for(var S=null,C=null,M=null,P=null,R=u(t,i,o,d,null,b),O=0;O<R.length;O++){var B=R[O];B&&(B.collides?(S=a(B.x,B.y-1,!0,b),C=a(B.x,B.y+1,!0,b),M=a(B.x-1,B.y,!0,b),P=a(B.x+1,B.y,!0,b),B.faceTop=!S||!S.collides,B.faceBottom=!C||!C.collides,B.faceLeft=!M||!M.collides,B.faceRight=!P||!P.collides):B.resetFaces())}}},function(t,i,o){var a={};t.exports=a;var u=o(83),d=o(32);a.create=function(t,i){for(var o=[],a=0;a<t.length;a++){var u=t[a],d={x:u.x,y:u.y,index:a,body:i,isInternal:!1,contact:null,offset:null};d.contact={vertex:d,normalImpulse:0,tangentImpulse:0},o.push(d)}return o},a.fromPath=function(t,i){var o=[];return t.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/gi,(function(t,i,a){o.push({x:parseFloat(i),y:parseFloat(a)})})),a.create(o,i)},a.centre=function(t){for(var i,o,d,b=a.area(t,!0),S={x:0,y:0},C=0;C<t.length;C++)d=(C+1)%t.length,i=u.cross(t[C],t[d]),o=u.mult(u.add(t[C],t[d]),i),S=u.add(S,o);return u.div(S,6*b)},a.mean=function(t){for(var i={x:0,y:0},o=0;o<t.length;o++)i.x+=t[o].x,i.y+=t[o].y;return u.div(i,t.length)},a.area=function(t,i){for(var o=0,a=t.length-1,u=0;u<t.length;u++)o+=(t[a].x-t[u].x)*(t[a].y+t[u].y),a=u;return i?o/2:Math.abs(o)/2},a.inertia=function(t,i){for(var o,a,d=0,b=0,S=t,C=0;C<S.length;C++)a=(C+1)%S.length,d+=(o=Math.abs(u.cross(S[a],S[C])))*(u.dot(S[a],S[a])+u.dot(S[a],S[C])+u.dot(S[C],S[C])),b+=o;return i/6*(d/b)},a.translate=function(t,i,o){var a;if(o)for(a=0;a<t.length;a++)t[a].x+=i.x*o,t[a].y+=i.y*o;else for(a=0;a<t.length;a++)t[a].x+=i.x,t[a].y+=i.y;return t},a.rotate=function(t,i,o){if(0!==i){for(var a=Math.cos(i),u=Math.sin(i),d=0;d<t.length;d++){var b=t[d],S=b.x-o.x,C=b.y-o.y;b.x=o.x+(S*a-C*u),b.y=o.y+(S*u+C*a)}return t}},a.contains=function(t,i){for(var o=0;o<t.length;o++){var a=t[o],u=t[(o+1)%t.length];if((i.x-a.x)*(u.y-a.y)+(i.y-a.y)*(a.x-u.x)>0)return!1}return!0},a.scale=function(t,i,o,d){if(1===i&&1===o)return t;var b,S;d=d||a.centre(t);for(var C=0;C<t.length;C++)b=t[C],S=u.sub(b,d),t[C].x=d.x+S.x*i,t[C].y=d.y+S.y*o;return t},a.chamfer=function(t,i,o,a,b){i="number"==typeof i?[i]:i||[8],o=void 0!==o?o:-1,a=a||2,b=b||14;for(var S=[],C=0;C<t.length;C++){var M=t[C-1>=0?C-1:t.length-1],P=t[C],R=t[(C+1)%t.length],O=i[C<i.length?C:i.length-1];if(0!==O){var B=u.normalise({x:P.y-M.y,y:M.x-P.x}),N=u.normalise({x:R.y-P.y,y:P.x-R.x}),Y=Math.sqrt(2*Math.pow(O,2)),G=u.mult(d.clone(B),O),X=u.normalise(u.mult(u.add(B,N),.5)),U=u.sub(P,u.mult(X,Y)),z=o;-1===o&&(z=1.75*Math.pow(O,.32)),(z=d.clamp(z,a,b))%2==1&&(z+=1);for(var V=Math.acos(u.dot(B,N))/z,W=0;W<z;W++)S.push(u.add(u.rotate(G,V*W),U))}else S.push(P)}return S},a.clockwiseSort=function(t){var i=a.mean(t);return t.sort((function(t,o){return u.angle(i,t)-u.angle(i,o)})),t},a.isConvex=function(t){var i,o,a,u,d=0,b=t.length;if(b<3)return null;for(i=0;i<b;i++)if(a=(i+2)%b,u=(t[o=(i+1)%b].x-t[i].x)*(t[a].y-t[o].y),(u-=(t[o].y-t[i].y)*(t[a].x-t[o].x))<0?d|=1:u>0&&(d|=2),3===d)return!1;return 0!==d||null},a.hull=function(t){var i,o,a=[],d=[];for((t=t.slice(0)).sort((function(t,i){var o=t.x-i.x;return 0!==o?o:t.y-i.y})),o=0;o<t.length;o+=1){for(i=t[o];d.length>=2&&u.cross3(d[d.length-2],d[d.length-1],i)<=0;)d.pop();d.push(i)}for(o=t.length-1;o>=0;o-=1){for(i=t[o];a.length>=2&&u.cross3(a[a.length-2],a[a.length-1],i)<=0;)a.pop();a.push(i)}return a.pop(),d.pop(),a.concat(d)}},function(t,i,o){var a=o(0),u=o(66),d=o(300),b=o(301),S=o(56),C=o(170),M=new a({initialize:function Circle(t,i,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0),this.type=S.CIRCLE,this.x=t,this.y=i,this._radius=o,this._diameter=2*o},contains:function contains(t,i){return u(this,t,i)},getPoint:function getPoint(t,i){return d(this,t,i)},getPoints:function getPoints(t,i,o){return b(this,t,i,o)},getRandomPoint:function getRandomPoint(t){return C(this,t)},setTo:function setTo(t,i,o){return this.x=t,this.y=i,this._radius=o,this._diameter=2*o,this},setEmpty:function setEmpty(){return this._radius=0,this._diameter=0,this},setPosition:function setPosition(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},isEmpty:function isEmpty(){return this._radius<=0},radius:{get:function get(){return this._radius},set:function set(t){this._radius=t,this._diameter=2*t}},diameter:{get:function get(){return this._diameter},set:function set(t){this._diameter=t,this._radius=.5*t}},left:{get:function get(){return this.x-this._radius},set:function set(t){this.x=t+this._radius}},right:{get:function get(){return this.x+this._radius},set:function set(t){this.x=t-this._radius}},top:{get:function get(){return this.y-this._radius},set:function set(t){this.y=t+this._radius}},bottom:{get:function get(){return this.y+this._radius},set:function set(t){this.y=t-this._radius}}});t.exports=M},function(t,i){t.exports=function Contains(t,i,o){return t.radius>0&&i>=t.left&&i<=t.right&&o>=t.top&&o<=t.bottom&&(t.x-i)*(t.x-i)+(t.y-o)*(t.y-o)<=t.radius*t.radius}},function(t,i){t.exports=function Length(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))}},function(t,i){t.exports=function Wrap(t,i,o){var a=o-i;return i+((t-i)%a+a)%a}},function(t,i,o){var a=o(0),u=o(39),d=1e-6,b=new a({initialize:function Matrix4(t){this.val=new Float32Array(16),t?this.copy(t):this.identity()},clone:function clone(){return new b(this)},set:function set(t){return this.copy(t)},setValues:function setValues(t,i,o,a,u,d,b,S,C,M,P,R,O,B,N,Y){var G=this.val;return G[0]=t,G[1]=i,G[2]=o,G[3]=a,G[4]=u,G[5]=d,G[6]=b,G[7]=S,G[8]=C,G[9]=M,G[10]=P,G[11]=R,G[12]=O,G[13]=B,G[14]=N,G[15]=Y,this},copy:function copy(t){var i=t.val;return this.setValues(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9],i[10],i[11],i[12],i[13],i[14],i[15])},fromArray:function fromArray(t){return this.setValues(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},zero:function zero(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function transform(t,i,o){var a=S.fromQuat(o).val,u=i.x,d=i.y,b=i.z;return this.setValues(a[0]*u,a[1]*u,a[2]*u,0,a[4]*d,a[5]*d,a[6]*d,0,a[8]*b,a[9]*b,a[10]*b,0,t.x,t.y,t.z,1)},xyz:function xyz(t,i,o){this.identity();var a=this.val;return a[12]=t,a[13]=i,a[14]=o,this},scaling:function scaling(t,i,o){this.zero();var a=this.val;return a[0]=t,a[5]=i,a[10]=o,a[15]=1,this},identity:function identity(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function transpose(){var t=this.val,i=t[1],o=t[2],a=t[3],u=t[6],d=t[7],b=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=i,t[6]=t[9],t[7]=t[13],t[8]=o,t[9]=u,t[11]=t[14],t[12]=a,t[13]=d,t[14]=b,this},getInverse:function getInverse(t){return this.copy(t),this.invert()},invert:function invert(){var t=this.val,i=t[0],o=t[1],a=t[2],u=t[3],d=t[4],b=t[5],S=t[6],C=t[7],M=t[8],P=t[9],R=t[10],O=t[11],B=t[12],N=t[13],Y=t[14],G=t[15],X=i*b-o*d,U=i*S-a*d,z=i*C-u*d,V=o*S-a*b,W=o*C-u*b,H=a*C-u*S,j=M*N-P*B,q=M*Y-R*B,Z=M*G-O*B,K=P*Y-R*N,$=P*G-O*N,tt=R*G-O*Y,et=X*tt-U*$+z*K+V*Z-W*q+H*j;return et?(et=1/et,this.setValues((b*tt-S*$+C*K)*et,(a*$-o*tt-u*K)*et,(N*H-Y*W+G*V)*et,(R*W-P*H-O*V)*et,(S*Z-d*tt-C*q)*et,(i*tt-a*Z+u*q)*et,(Y*z-B*H-G*U)*et,(M*H-R*z+O*U)*et,(d*$-b*Z+C*j)*et,(o*Z-i*$-u*j)*et,(B*W-N*z+G*X)*et,(P*z-M*W-O*X)*et,(b*q-d*K-S*j)*et,(i*K-o*q+a*j)*et,(N*U-B*V-Y*X)*et,(M*V-P*U+R*X)*et)):this},adjoint:function adjoint(){var t=this.val,i=t[0],o=t[1],a=t[2],u=t[3],d=t[4],b=t[5],S=t[6],C=t[7],M=t[8],P=t[9],R=t[10],O=t[11],B=t[12],N=t[13],Y=t[14],G=t[15];return this.setValues(b*(R*G-O*Y)-P*(S*G-C*Y)+N*(S*O-C*R),-(o*(R*G-O*Y)-P*(a*G-u*Y)+N*(a*O-u*R)),o*(S*G-C*Y)-b*(a*G-u*Y)+N*(a*C-u*S),-(o*(S*O-C*R)-b*(a*O-u*R)+P*(a*C-u*S)),-(d*(R*G-O*Y)-M*(S*G-C*Y)+B*(S*O-C*R)),i*(R*G-O*Y)-M*(a*G-u*Y)+B*(a*O-u*R),-(i*(S*G-C*Y)-d*(a*G-u*Y)+B*(a*C-u*S)),i*(S*O-C*R)-d*(a*O-u*R)+M*(a*C-u*S),d*(P*G-O*N)-M*(b*G-C*N)+B*(b*O-C*P),-(i*(P*G-O*N)-M*(o*G-u*N)+B*(o*O-u*P)),i*(b*G-C*N)-d*(o*G-u*N)+B*(o*C-u*b),-(i*(b*O-C*P)-d*(o*O-u*P)+M*(o*C-u*b)),-(d*(P*Y-R*N)-M*(b*Y-S*N)+B*(b*R-S*P)),i*(P*Y-R*N)-M*(o*Y-a*N)+B*(o*R-a*P),-(i*(b*Y-S*N)-d*(o*Y-a*N)+B*(o*S-a*b)),i*(b*R-S*P)-d*(o*R-a*P)+M*(o*S-a*b))},determinant:function determinant(){var t=this.val,i=t[0],o=t[1],a=t[2],u=t[3],d=t[4],b=t[5],S=t[6],C=t[7],M=t[8],P=t[9],R=t[10],O=t[11],B=t[12],N=t[13],Y=t[14],G=t[15];return(i*b-o*d)*(R*G-O*Y)-(i*S-a*d)*(P*G-O*N)+(i*C-u*d)*(P*Y-R*N)+(o*S-a*b)*(M*G-O*B)-(o*C-u*b)*(M*Y-R*B)+(a*C-u*S)*(M*N-P*B)},multiply:function multiply(t){var i=this.val,o=i[0],a=i[1],u=i[2],d=i[3],b=i[4],S=i[5],C=i[6],M=i[7],P=i[8],R=i[9],O=i[10],B=i[11],N=i[12],Y=i[13],G=i[14],X=i[15],U=t.val,z=U[0],V=U[1],W=U[2],H=U[3];return i[0]=z*o+V*b+W*P+H*N,i[1]=z*a+V*S+W*R+H*Y,i[2]=z*u+V*C+W*O+H*G,i[3]=z*d+V*M+W*B+H*X,z=U[4],V=U[5],W=U[6],H=U[7],i[4]=z*o+V*b+W*P+H*N,i[5]=z*a+V*S+W*R+H*Y,i[6]=z*u+V*C+W*O+H*G,i[7]=z*d+V*M+W*B+H*X,z=U[8],V=U[9],W=U[10],H=U[11],i[8]=z*o+V*b+W*P+H*N,i[9]=z*a+V*S+W*R+H*Y,i[10]=z*u+V*C+W*O+H*G,i[11]=z*d+V*M+W*B+H*X,z=U[12],V=U[13],W=U[14],H=U[15],i[12]=z*o+V*b+W*P+H*N,i[13]=z*a+V*S+W*R+H*Y,i[14]=z*u+V*C+W*O+H*G,i[15]=z*d+V*M+W*B+H*X,this},multiplyLocal:function multiplyLocal(t){var i=this.val,o=t.val;return this.setValues(i[0]*o[0]+i[1]*o[4]+i[2]*o[8]+i[3]*o[12],i[0]*o[1]+i[1]*o[5]+i[2]*o[9]+i[3]*o[13],i[0]*o[2]+i[1]*o[6]+i[2]*o[10]+i[3]*o[14],i[0]*o[3]+i[1]*o[7]+i[2]*o[11]+i[3]*o[15],i[4]*o[0]+i[5]*o[4]+i[6]*o[8]+i[7]*o[12],i[4]*o[1]+i[5]*o[5]+i[6]*o[9]+i[7]*o[13],i[4]*o[2]+i[5]*o[6]+i[6]*o[10]+i[7]*o[14],i[4]*o[3]+i[5]*o[7]+i[6]*o[11]+i[7]*o[15],i[8]*o[0]+i[9]*o[4]+i[10]*o[8]+i[11]*o[12],i[8]*o[1]+i[9]*o[5]+i[10]*o[9]+i[11]*o[13],i[8]*o[2]+i[9]*o[6]+i[10]*o[10]+i[11]*o[14],i[8]*o[3]+i[9]*o[7]+i[10]*o[11]+i[11]*o[15],i[12]*o[0]+i[13]*o[4]+i[14]*o[8]+i[15]*o[12],i[12]*o[1]+i[13]*o[5]+i[14]*o[9]+i[15]*o[13],i[12]*o[2]+i[13]*o[6]+i[14]*o[10]+i[15]*o[14],i[12]*o[3]+i[13]*o[7]+i[14]*o[11]+i[15]*o[15])},premultiply:function premultiply(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function multiplyMatrices(t,i){var o=t.val,a=i.val,u=o[0],d=o[4],b=o[8],S=o[12],C=o[1],M=o[5],P=o[9],R=o[13],O=o[2],B=o[6],N=o[10],Y=o[14],G=o[3],X=o[7],U=o[11],z=o[15],V=a[0],W=a[4],H=a[8],j=a[12],q=a[1],Z=a[5],K=a[9],$=a[13],tt=a[2],et=a[6],it=a[10],nt=a[14],rt=a[3],st=a[7],ot=a[11],at=a[15];return this.setValues(u*V+d*q+b*tt+S*rt,C*V+M*q+P*tt+R*rt,O*V+B*q+N*tt+Y*rt,G*V+X*q+U*tt+z*rt,u*W+d*Z+b*et+S*st,C*W+M*Z+P*et+R*st,O*W+B*Z+N*et+Y*st,G*W+X*Z+U*et+z*st,u*H+d*K+b*it+S*ot,C*H+M*K+P*it+R*ot,O*H+B*K+N*it+Y*ot,G*H+X*K+U*it+z*ot,u*j+d*$+b*nt+S*at,C*j+M*$+P*nt+R*at,O*j+B*$+N*nt+Y*at,G*j+X*$+U*nt+z*at)},translate:function translate(t){return this.translateXYZ(t.x,t.y,t.z)},translateXYZ:function translateXYZ(t,i,o){var a=this.val;return a[12]=a[0]*t+a[4]*i+a[8]*o+a[12],a[13]=a[1]*t+a[5]*i+a[9]*o+a[13],a[14]=a[2]*t+a[6]*i+a[10]*o+a[14],a[15]=a[3]*t+a[7]*i+a[11]*o+a[15],this},scale:function scale(t){return this.scaleXYZ(t.x,t.y,t.z)},scaleXYZ:function scaleXYZ(t,i,o){var a=this.val;return a[0]=a[0]*t,a[1]=a[1]*t,a[2]=a[2]*t,a[3]=a[3]*t,a[4]=a[4]*i,a[5]=a[5]*i,a[6]=a[6]*i,a[7]=a[7]*i,a[8]=a[8]*o,a[9]=a[9]*o,a[10]=a[10]*o,a[11]=a[11]*o,this},makeRotationAxis:function makeRotationAxis(t,i){var o=Math.cos(i),a=Math.sin(i),u=1-o,d=t.x,b=t.y,S=t.z,C=u*d,M=u*b;return this.setValues(C*d+o,C*b-a*S,C*S+a*b,0,C*b+a*S,M*b+o,M*S-a*d,0,C*S-a*b,M*S+a*d,u*S*S+o,0,0,0,0,1)},rotate:function rotate(t,i){var o=this.val,a=i.x,u=i.y,b=i.z,S=Math.sqrt(a*a+u*u+b*b);if(Math.abs(S)<d)return this;a*=S=1/S,u*=S,b*=S;var C=Math.sin(t),M=Math.cos(t),P=1-M,R=o[0],O=o[1],B=o[2],N=o[3],Y=o[4],G=o[5],X=o[6],U=o[7],z=o[8],V=o[9],W=o[10],H=o[11],j=o[12],q=o[13],Z=o[14],K=o[15],$=a*a*P+M,tt=u*a*P+b*C,et=b*a*P-u*C,it=a*u*P-b*C,nt=u*u*P+M,rt=b*u*P+a*C,st=a*b*P+u*C,ot=u*b*P-a*C,at=b*b*P+M;return this.setValues(R*$+Y*tt+z*et,O*$+G*tt+V*et,B*$+X*tt+W*et,N*$+U*tt+H*et,R*it+Y*nt+z*rt,O*it+G*nt+V*rt,B*it+X*nt+W*rt,N*it+U*nt+H*rt,R*st+Y*ot+z*at,O*st+G*ot+V*at,B*st+X*ot+W*at,N*st+U*ot+H*at,j,q,Z,K)},rotateX:function rotateX(t){var i=this.val,o=Math.sin(t),a=Math.cos(t),u=i[4],d=i[5],b=i[6],S=i[7],C=i[8],M=i[9],P=i[10],R=i[11];return i[4]=u*a+C*o,i[5]=d*a+M*o,i[6]=b*a+P*o,i[7]=S*a+R*o,i[8]=C*a-u*o,i[9]=M*a-d*o,i[10]=P*a-b*o,i[11]=R*a-S*o,this},rotateY:function rotateY(t){var i=this.val,o=Math.sin(t),a=Math.cos(t),u=i[0],d=i[1],b=i[2],S=i[3],C=i[8],M=i[9],P=i[10],R=i[11];return i[0]=u*a-C*o,i[1]=d*a-M*o,i[2]=b*a-P*o,i[3]=S*a-R*o,i[8]=u*o+C*a,i[9]=d*o+M*a,i[10]=b*o+P*a,i[11]=S*o+R*a,this},rotateZ:function rotateZ(t){var i=this.val,o=Math.sin(t),a=Math.cos(t),u=i[0],d=i[1],b=i[2],S=i[3],C=i[4],M=i[5],P=i[6],R=i[7];return i[0]=u*a+C*o,i[1]=d*a+M*o,i[2]=b*a+P*o,i[3]=S*a+R*o,i[4]=C*a-u*o,i[5]=M*a-d*o,i[6]=P*a-b*o,i[7]=R*a-S*o,this},fromRotationTranslation:function fromRotationTranslation(t,i){var o=t.x,a=t.y,u=t.z,d=t.w,b=o+o,S=a+a,C=u+u,M=o*b,P=o*S,R=o*C,O=a*S,B=a*C,N=u*C,Y=d*b,G=d*S,X=d*C;return this.setValues(1-(O+N),P+X,R-G,0,P-X,1-(M+N),B+Y,0,R+G,B-Y,1-(M+O),0,i.x,i.y,i.z,1)},fromQuat:function fromQuat(t){var i=t.x,o=t.y,a=t.z,u=t.w,d=i+i,b=o+o,S=a+a,C=i*d,M=i*b,P=i*S,R=o*b,O=o*S,B=a*S,N=u*d,Y=u*b,G=u*S;return this.setValues(1-(R+B),M+G,P-Y,0,M-G,1-(C+B),O+N,0,P+Y,O-N,1-(C+R),0,0,0,0,1)},frustum:function frustum(t,i,o,a,u,d){var b=1/(i-t),S=1/(a-o),C=1/(u-d);return this.setValues(2*u*b,0,0,0,0,2*u*S,0,0,(i+t)*b,(a+o)*S,(d+u)*C,-1,0,0,d*u*2*C,0)},perspective:function perspective(t,i,o,a){var u=1/Math.tan(t/2),d=1/(o-a);return this.setValues(u/i,0,0,0,0,u,0,0,0,0,(a+o)*d,-1,0,0,2*a*o*d,0)},perspectiveLH:function perspectiveLH(t,i,o,a){return this.setValues(2*o/t,0,0,0,0,2*o/i,0,0,0,0,-a/(o-a),1,0,0,o*a/(o-a),0)},ortho:function ortho(t,i,o,a,u,d){var b=t-i,S=o-a,C=u-d;return b=0===b?b:1/b,S=0===S?S:1/S,C=0===C?C:1/C,this.setValues(-2*b,0,0,0,0,-2*S,0,0,0,0,2*C,0,(t+i)*b,(a+o)*S,(d+u)*C,1)},lookAtRH:function lookAtRH(t,i,o){var a=this.val;return R.subVectors(t,i),0===R.getLengthSquared()&&(R.z=1),R.normalize(),M.crossVectors(o,R),0===M.getLengthSquared()&&(1===Math.abs(o.z)?R.x+=1e-4:R.z+=1e-4,R.normalize(),M.crossVectors(o,R)),M.normalize(),P.crossVectors(R,M),a[0]=M.x,a[1]=M.y,a[2]=M.z,a[4]=P.x,a[5]=P.y,a[6]=P.z,a[8]=R.x,a[9]=R.y,a[10]=R.z,this},lookAt:function lookAt(t,i,o){var a=t.x,u=t.y,b=t.z,S=o.x,C=o.y,M=o.z,P=i.x,R=i.y,O=i.z;if(Math.abs(a-P)<d&&Math.abs(u-R)<d&&Math.abs(b-O)<d)return this.identity();var B=a-P,N=u-R,Y=b-O,G=1/Math.sqrt(B*B+N*N+Y*Y),X=C*(Y*=G)-M*(N*=G),U=M*(B*=G)-S*Y,z=S*N-C*B;(G=Math.sqrt(X*X+U*U+z*z))?(X*=G=1/G,U*=G,z*=G):(X=0,U=0,z=0);var V=N*z-Y*U,W=Y*X-B*z,H=B*U-N*X;return(G=Math.sqrt(V*V+W*W+H*H))?(V*=G=1/G,W*=G,H*=G):(V=0,W=0,H=0),this.setValues(X,V,B,0,U,W,N,0,z,H,Y,0,-(X*a+U*u+z*b),-(V*a+W*u+H*b),-(B*a+N*u+Y*b),1)},yawPitchRoll:function yawPitchRoll(t,i,o){this.zero(),S.zero(),C.zero();var a=this.val,u=S.val,d=C.val,b=Math.sin(o),M=Math.cos(o);return a[10]=1,a[15]=1,a[0]=M,a[1]=b,a[4]=-b,a[5]=M,b=Math.sin(i),M=Math.cos(i),u[0]=1,u[15]=1,u[5]=M,u[10]=M,u[9]=-b,u[6]=b,b=Math.sin(t),M=Math.cos(t),d[5]=1,d[15]=1,d[0]=M,d[2]=-b,d[8]=b,d[10]=M,this.multiplyLocal(S),this.multiplyLocal(C),this},setWorldMatrix:function setWorldMatrix(t,i,o,a,u){return this.yawPitchRoll(t.y,t.x,t.z),S.scaling(o.x,o.y,o.z),C.xyz(i.x,i.y,i.z),this.multiplyLocal(S),this.multiplyLocal(C),a&&this.multiplyLocal(a),u&&this.multiplyLocal(u),this},multiplyToMat4:function multiplyToMat4(t,i){var o=this.val,a=t.val,u=o[0],d=o[1],b=o[2],S=o[3],C=o[4],M=o[5],P=o[6],R=o[7],O=o[8],B=o[9],N=o[10],Y=o[11],G=o[12],X=o[13],U=o[14],z=o[15],V=a[0],W=a[1],H=a[2],j=a[3],q=a[4],Z=a[5],K=a[6],$=a[7],tt=a[8],et=a[9],it=a[10],nt=a[11],rt=a[12],st=a[13],ot=a[14],at=a[15];return i.setValues(V*u+W*C+H*O+j*G,W*d+W*M+H*B+j*X,H*b+W*P+H*N+j*U,j*S+W*R+H*Y+j*z,q*u+Z*C+K*O+$*G,q*d+Z*M+K*B+$*X,q*b+Z*P+K*N+$*U,q*S+Z*R+K*Y+$*z,tt*u+et*C+it*O+nt*G,tt*d+et*M+it*B+nt*X,tt*b+et*P+it*N+nt*U,tt*S+et*R+it*Y+nt*z,rt*u+st*C+ot*O+at*G,rt*d+st*M+ot*B+at*X,rt*b+st*P+ot*N+at*U,rt*S+st*R+ot*Y+at*z)},fromRotationXYTranslation:function fromRotationXYTranslation(t,i,o){var a=i.x,u=i.y,d=i.z,b=Math.sin(t.x),S=Math.cos(t.x),C=Math.sin(t.y),M=Math.cos(t.y),P=a,R=u,O=d,B=-b,N=0-B*C,Y=0-S*C,G=B*M,X=S*M;return o||(P=M*a+C*d,R=N*a+S*u+G*d,O=Y*a+b*u+X*d),this.setValues(M,N,Y,0,0,S,b,0,C,G,X,0,P,R,O,1)},getMaxScaleOnAxis:function getMaxScaleOnAxis(){var t=this.val,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],o=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],a=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(i,o,a))}}),S=new b,C=new b,M=new u,P=new u,R=new u;t.exports=b},function(t,i,o){t.exports={COMPLETE:o(987),DECODED:o(988),DECODED_ALL:o(989),DESTROY:o(990),DETUNE:o(991),GLOBAL_DETUNE:o(992),GLOBAL_MUTE:o(993),GLOBAL_RATE:o(994),GLOBAL_VOLUME:o(995),LOOP:o(996),LOOPED:o(997),MUTE:o(998),PAN:o(999),PAUSE_ALL:o(1e3),PAUSE:o(1001),PLAY:o(1002),RATE:o(1003),RESUME_ALL:o(1004),RESUME:o(1005),SEEK:o(1006),STOP_ALL:o(1007),STOP:o(1008),UNLOCKED:o(1009),VOLUME:o(1010)}},function(t,i,o){var a=o(0),u=o(21),d=o(23),b=o(8),S=o(2),C=o(7),M=new a({Extends:d,initialize:function ImageFile(t,i,o,a,u){var b,M="png";if(C(i)){var P=i;i=S(P,"key"),o=S(P,"url"),b=S(P,"normalMap"),a=S(P,"xhrSettings"),M=S(P,"extension",M),u=S(P,"frameConfig")}Array.isArray(o)&&(b=o[1],o=o[0]);var R={type:"image",cache:t.textureManager,extension:M,responseType:"blob",key:i,url:o,xhrSettings:a,config:u};if(d.call(this,t,R),b){var O=new ImageFile(t,this.key,b,a,u);O.type="normalMap",this.setLink(O),t.addFile(O)}},onProcess:function onProcess(){this.state=u.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var t=this;this.data.onload=function(){d.revokeObjectURL(t.data),t.onProcessComplete()},this.data.onerror=function(){d.revokeObjectURL(t.data),t.onProcessError()},d.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function addToCache(){var t,i=this.linkFile;i&&i.state===u.FILE_COMPLETE?(t="image"===this.type?this.cache.addImage(this.key,this.data,i.data):this.cache.addImage(i.key,i.data,this.data),this.pendingDestroy(t),i.pendingDestroy(t)):i||(t=this.cache.addImage(this.key,this.data),this.pendingDestroy(t))}});b.register("image",(function(t,i,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new M(this,t[a]));else this.addFile(new M(this,t,i,o));return this})),t.exports=M},function(t,i){t.exports=function SetTileCollision(t,i){i?t.setCollision(!0,!0,!0,!0,!1):t.resetCollision(!1)}},function(t,i,o){var a=o(164),u=o(0),d=o(11),b=o(15),S=o(1065),C=new u({Extends:b,Mixins:[d.Alpha,d.BlendMode,d.Depth,d.Flip,d.GetBounds,d.Mask,d.Origin,d.Pipeline,d.ScrollFactor,d.Size,d.TextureCrop,d.Tint,d.Transform,d.Visible,S],initialize:function Sprite(t,i,o,u,d){b.call(this,t,"Sprite"),this._crop=this.resetCropObject(),this.anims=new a(this),this.setTexture(u,d),this.setPosition(i,o),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function addedToScene(){this.scene.sys.updateList.add(this)},removedFromScene:function removedFromScene(){this.scene.sys.updateList.remove(this)},preUpdate:function preUpdate(t,i){this.anims.update(t,i)},play:function play(t,i){return this.anims.play(t,i)},playReverse:function playReverse(t,i){return this.anims.playReverse(t,i)},playAfterDelay:function playAfterDelay(t,i){return this.anims.playAfterDelay(t,i)},playAfterRepeat:function playAfterRepeat(t,i){return this.anims.playAfterRepeat(t,i)},chain:function chain(t){return this.anims.chain(t)},stop:function stop(){return this.anims.stop()},stopAfterDelay:function stopAfterDelay(t){return this.anims.stopAfterDelay(t)},stopAfterRepeat:function stopAfterRepeat(t){return this.anims.stopAfterRepeat(t)},stopOnFrame:function stopOnFrame(t){return this.anims.stopOnFrame(t)},toJSON:function toJSON(){return d.ToJSON(this)},preDestroy:function preDestroy(){this.anims.destroy(),this.anims=void 0}});t.exports=C},function(t,i){t.exports=function SpliceOne(t,i){if(!(i>=t.length)){for(var o=t.length-1,a=t[i],u=i;u<o;u++)t[u]=t[u+1];return t.length=o,a}}},function(t,i,o){t.exports={ADDED_TO_SCENE:o(643),DESTROY:o(644),REMOVED_FROM_SCENE:o(645),VIDEO_COMPLETE:o(646),VIDEO_CREATED:o(647),VIDEO_ERROR:o(648),VIDEO_LOOP:o(649),VIDEO_PLAY:o(650),VIDEO_SEEKED:o(651),VIDEO_SEEKING:o(652),VIDEO_STOP:o(653),VIDEO_TIMEOUT:o(654),VIDEO_UNLOCKED:o(655)}},function(t,i){t.exports=function SnapFloor(t,i,o,a){return void 0===o&&(o=0),0===i?t:(t-=o,t=i*Math.floor(t/i),a?(o+t)/i:o+t)}},function(t,i){t.exports=function Clone(t){var i={};for(var o in t)Array.isArray(t[o])?i[o]=t[o].slice(0):i[o]=t[o];return i}},function(t,i){t.exports=function SafeRange(t,i,o,a){var u=t.length;if(i<0||i>u||i>=o||o>u||i+o>u){if(a)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},function(t,i){function Compare(t,i){return String(t).localeCompare(i)}function RunPass(t,i,o,a){var u,d,b,S,C,M=t.length,P=0,R=2*o;for(u=0;u<M;u+=R)for(b=(d=u+o)+o,d>M&&(d=M),b>M&&(b=M),S=u,C=d;;)if(S<d&&C<b)i(t[S],t[C])<=0?a[P++]=t[S++]:a[P++]=t[C++];else if(S<d)a[P++]=t[S++];else{if(!(C<b))break;a[P++]=t[C++]}}t.exports=function StableSort(t,i){void 0===i&&(i=Compare);var o=function Process(t,i){var o=t.length;if(o<=1)return t;for(var a=new Array(o),u=1;u<o;u*=2){RunPass(t,i,u,a);var d=t;t=a,a=d}return t}(t,i);return o!==t&&RunPass(o,null,t.length,t),t}},function(t,i,o){var a=o(134),u=o(205);t.exports=function GetEaseFunction(t,i){var o=a.Power0;if("string"==typeof t)if(a.hasOwnProperty(t))o=a[t];else{var d="";t.indexOf(".")&&("in"===(d=t.substr(t.indexOf(".")+1)).toLowerCase()?d="easeIn":"out"===d.toLowerCase()?d="easeOut":"inout"===d.toLowerCase()&&(d="easeInOut")),t=u(t.substr(0,t.indexOf(".")+1)+d),a.hasOwnProperty(t)&&(o=a[t])}else"function"==typeof t?o=t:Array.isArray(t)&&t.length;if(!i)return o;var b=i.slice(0);return b.unshift(0),function(t){return b[0]=t,o.apply(this,b)}}},function(t,i,o){var a=o(12);t.exports=function StrokePathWebGL(t,i,o,u,d){var b=t.strokeTint,S=a.getTintAppendFloatAlpha(i.strokeColor,i.strokeAlpha*o);b.TL=S,b.TR=S,b.BL=S,b.BR=S;var C=i.pathData,M=C.length-1,P=i.lineWidth,R=P/2,O=C[0]-u,B=C[1]-d;i.closePath||(M-=2);for(var N=2;N<M;N+=2){var Y=C[N]-u,G=C[N+1]-d;t.batchLine(O,B,Y,G,R,R,P,N-2,!!i.closePath&&N===M-1),O=Y,B=G}}},function(t,i,o){var a=o(0),u=o(115),d=o(476),b=o(477),S=o(56),C=o(47),M=o(181),P=new a({initialize:function Triangle(t,i,o,a,u,d){void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===u&&(u=0),void 0===d&&(d=0),this.type=S.TRIANGLE,this.x1=t,this.y1=i,this.x2=o,this.y2=a,this.x3=u,this.y3=d},contains:function contains(t,i){return u(this,t,i)},getPoint:function getPoint(t,i){return d(this,t,i)},getPoints:function getPoints(t,i,o){return b(this,t,i,o)},getRandomPoint:function getRandomPoint(t){return M(this,t)},setTo:function setTo(t,i,o,a,u,d){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===u&&(u=0),void 0===d&&(d=0),this.x1=t,this.y1=i,this.x2=o,this.y2=a,this.x3=u,this.y3=d,this},getLineA:function getLineA(t){return void 0===t&&(t=new C),t.setTo(this.x1,this.y1,this.x2,this.y2),t},getLineB:function getLineB(t){return void 0===t&&(t=new C),t.setTo(this.x2,this.y2,this.x3,this.y3),t},getLineC:function getLineC(t){return void 0===t&&(t=new C),t.setTo(this.x3,this.y3,this.x1,this.y1),t},left:{get:function get(){return Math.min(this.x1,this.x2,this.x3)},set:function set(t){var i=0;i=this.x1<=this.x2&&this.x1<=this.x3?this.x1-t:this.x2<=this.x1&&this.x2<=this.x3?this.x2-t:this.x3-t,this.x1-=i,this.x2-=i,this.x3-=i}},right:{get:function get(){return Math.max(this.x1,this.x2,this.x3)},set:function set(t){var i=0;i=this.x1>=this.x2&&this.x1>=this.x3?this.x1-t:this.x2>=this.x1&&this.x2>=this.x3?this.x2-t:this.x3-t,this.x1-=i,this.x2-=i,this.x3-=i}},top:{get:function get(){return Math.min(this.y1,this.y2,this.y3)},set:function set(t){var i=0;i=this.y1<=this.y2&&this.y1<=this.y3?this.y1-t:this.y2<=this.y1&&this.y2<=this.y3?this.y2-t:this.y3-t,this.y1-=i,this.y2-=i,this.y3-=i}},bottom:{get:function get(){return Math.max(this.y1,this.y2,this.y3)},set:function set(t){var i=0;i=this.y1>=this.y2&&this.y1>=this.y3?this.y1-t:this.y2>=this.y1&&this.y2>=this.y3?this.y2-t:this.y3-t,this.y1-=i,this.y2-=i,this.y3-=i}}});t.exports=P},function(t,i){var o={};t.exports=o,o.create=function(t,i){return{x:t||0,y:i||0}},o.clone=function(t){return{x:t.x,y:t.y}},o.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},o.magnitudeSquared=function(t){return t.x*t.x+t.y*t.y},o.rotate=function(t,i,o){var a=Math.cos(i),u=Math.sin(i);o||(o={});var d=t.x*a-t.y*u;return o.y=t.x*u+t.y*a,o.x=d,o},o.rotateAbout=function(t,i,o,a){var u=Math.cos(i),d=Math.sin(i);a||(a={});var b=o.x+((t.x-o.x)*u-(t.y-o.y)*d);return a.y=o.y+((t.x-o.x)*d+(t.y-o.y)*u),a.x=b,a},o.normalise=function(t){var i=o.magnitude(t);return 0===i?{x:0,y:0}:{x:t.x/i,y:t.y/i}},o.dot=function(t,i){return t.x*i.x+t.y*i.y},o.cross=function(t,i){return t.x*i.y-t.y*i.x},o.cross3=function(t,i,o){return(i.x-t.x)*(o.y-t.y)-(i.y-t.y)*(o.x-t.x)},o.add=function(t,i,o){return o||(o={}),o.x=t.x+i.x,o.y=t.y+i.y,o},o.sub=function(t,i,o){return o||(o={}),o.x=t.x-i.x,o.y=t.y-i.y,o},o.mult=function(t,i){return{x:t.x*i,y:t.y*i}},o.div=function(t,i){return{x:t.x/i,y:t.y/i}},o.perp=function(t,i){return{x:(i=!0===i?-1:1)*-t.y,y:i*t.x}},o.neg=function(t){return{x:-t.x,y:-t.y}},o.angle=function(t,i){return Math.atan2(i.y-t.y,i.x-t.x)},o._temp=[o.create(),o.create(),o.create(),o.create(),o.create(),o.create()]},function(t,i){var o={};t.exports=o,o.create=function(t){var i={min:{x:0,y:0},max:{x:0,y:0}};return t&&o.update(i,t),i},o.update=function(t,i,o){t.min.x=1/0,t.max.x=-1/0,t.min.y=1/0,t.max.y=-1/0;for(var a=0;a<i.length;a++){var u=i[a];u.x>t.max.x&&(t.max.x=u.x),u.x<t.min.x&&(t.min.x=u.x),u.y>t.max.y&&(t.max.y=u.y),u.y<t.min.y&&(t.min.y=u.y)}o&&(o.x>0?t.max.x+=o.x:t.min.x+=o.x,o.y>0?t.max.y+=o.y:t.min.y+=o.y)},o.contains=function(t,i){return i.x>=t.min.x&&i.x<=t.max.x&&i.y>=t.min.y&&i.y<=t.max.y},o.overlaps=function(t,i){return t.min.x<=i.max.x&&t.max.x>=i.min.x&&t.max.y>=i.min.y&&t.min.y<=i.max.y},o.translate=function(t,i){t.min.x+=i.x,t.max.x+=i.x,t.min.y+=i.y,t.max.y+=i.y},o.shift=function(t,i){var o=t.max.x-t.min.x,a=t.max.y-t.min.y;t.min.x=i.x,t.max.x=i.x+o,t.min.y=i.y,t.max.y=i.y+a}},function(t,i,o){var a=o(29),u=o(0),d=o(11),b=o(502),S=new u({Mixins:[d.Alpha,d.Flip,d.Visible],initialize:function Tile(t,i,o,a,u,d,b,S){this.layer=t,this.index=i,this.x=o,this.y=a,this.width=u,this.height=d,this.right,this.bottom,this.baseWidth=void 0!==b?b:u,this.baseHeight=void 0!==S?S:d,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function containsPoint(t,i){return!(t<this.pixelX||i<this.pixelY||t>this.right||i>this.bottom)},copy:function copy(t){return this.index=t.index,this.alpha=t.alpha,this.properties=t.properties,this.visible=t.visible,this.setFlip(t.flipX,t.flipY),this.tint=t.tint,this.rotation=t.rotation,this.collideUp=t.collideUp,this.collideDown=t.collideDown,this.collideLeft=t.collideLeft,this.collideRight=t.collideRight,this.collisionCallback=t.collisionCallback,this.collisionCallbackContext=t.collisionCallbackContext,this},getCollisionGroup:function getCollisionGroup(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function getTileData(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function getLeft(t){var i=this.tilemapLayer;return i?i.tileToWorldX(this.x,t):this.x*this.baseWidth},getRight:function getRight(t){var i=this.tilemapLayer;return i?this.getLeft(t)+this.width*i.scaleX:this.getLeft(t)+this.width},getTop:function getTop(t){var i=this.tilemapLayer;return i?i.tileToWorldY(this.y,t)-(this.height-this.baseHeight)*i.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function getBottom(t){var i=this.tilemapLayer;return i?this.getTop(t)+this.height*i.scaleY:this.getTop(t)+this.height},getBounds:function getBounds(t,i){return void 0===i&&(i=new b),i.x=this.getLeft(),i.y=this.getTop(),i.width=this.getRight()-i.x,i.height=this.getBottom()-i.y,i},getCenterX:function getCenterX(t){return(this.getLeft(t)+this.getRight(t))/2},getCenterY:function getCenterY(t){return(this.getTop(t)+this.getBottom(t))/2},intersects:function intersects(t,i,o,a){return!(o<=this.pixelX||a<=this.pixelY||t>=this.right||i>=this.bottom)},isInteresting:function isInteresting(t,i){return t&&i?this.canCollide||this.hasInterestingFace:t?this.collides:!!i&&this.hasInterestingFace},resetCollision:function resetCollision(t){return void 0===t&&(t=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,t&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},resetFaces:function resetFaces(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function setCollision(t,i,o,a,u){return void 0===i&&(i=t),void 0===o&&(o=t),void 0===a&&(a=t),void 0===u&&(u=!0),this.collideLeft=t,this.collideRight=i,this.collideUp=o,this.collideDown=a,this.faceLeft=t,this.faceRight=i,this.faceTop=o,this.faceBottom=a,u&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},setCollisionCallback:function setCollisionCallback(t,i){return null===t?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=t,this.collisionCallbackContext=i),this},setSize:function setSize(t,i,o,a){return void 0!==t&&(this.width=t),void 0!==i&&(this.height=i),void 0!==o&&(this.baseWidth=o),void 0!==a&&(this.baseHeight=a),this.updatePixelXY(),this},updatePixelXY:function updatePixelXY(){var t=this.layer.orientation;if(t===a.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(t===a.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(t===a.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(t===a.HEXAGONAL){var i=this.layer.hexSideLength,o=(this.baseHeight-i)/2+i;this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*o}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function destroy(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function get(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||void 0!==this.collisionCallback}},collides:{get:function get(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function get(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function get(){var t=this.layer.tilemapLayer;if(t){var i=t.gidMap[this.index];if(i)return i}return null}},tilemapLayer:{get:function get(){return this.layer.tilemapLayer}},tilemap:{get:function get(){var t=this.tilemapLayer;return t?t.tilemap:null}}});t.exports=S},function(t,i,o){var a={};t.exports=a;var u=o(64),d=o(32),b=o(41),S=o(84),C=o(83),M=o(1393);a.rectangle=function(t,i,o,a,S){S=S||{};var C={label:"Rectangle Body",position:{x:t,y:i},vertices:u.fromPath("L 0 0 L "+o+" 0 L "+o+" "+a+" L 0 "+a)};if(S.chamfer){var M=S.chamfer;C.vertices=u.chamfer(C.vertices,M.radius,M.quality,M.qualityMin,M.qualityMax),delete S.chamfer}return b.create(d.extend({},C,S))},a.trapezoid=function(t,i,o,a,S,C){C=C||{};var M,P=o*(S*=.5),R=P+(1-2*S)*o,O=R+P;M=S<.5?"L 0 0 L "+P+" "+-a+" L "+R+" "+-a+" L "+O+" 0":"L 0 0 L "+R+" "+-a+" L "+O+" 0";var B={label:"Trapezoid Body",position:{x:t,y:i},vertices:u.fromPath(M)};if(C.chamfer){var N=C.chamfer;B.vertices=u.chamfer(B.vertices,N.radius,N.quality,N.qualityMin,N.qualityMax),delete C.chamfer}return b.create(d.extend({},B,C))},a.circle=function(t,i,o,u,b){u=u||{};var S={label:"Circle Body",circleRadius:o};b=b||25;var C=Math.ceil(Math.max(10,Math.min(b,o)));return C%2==1&&(C+=1),a.polygon(t,i,C,o,d.extend({},S,u))},a.polygon=function(t,i,o,S,C){if(C=C||{},o<3)return a.circle(t,i,S,C);for(var M=2*Math.PI/o,P="",R=.5*M,O=0;O<o;O+=1){var B=R+O*M,N=Math.cos(B)*S,Y=Math.sin(B)*S;P+="L "+N.toFixed(3)+" "+Y.toFixed(3)+" "}var G={label:"Polygon Body",position:{x:t,y:i},vertices:u.fromPath(P)};if(C.chamfer){var X=C.chamfer;G.vertices=u.chamfer(G.vertices,X.radius,X.quality,X.qualityMin,X.qualityMax),delete C.chamfer}return b.create(d.extend({},G,C))},a.fromVertices=function(t,i,o,S,C,P,R){var O,B,N,Y,G,X;for(S=S||{},B=[],C=void 0!==C&&C,P=void 0!==P?P:.01,R=void 0!==R?R:10,M||d.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),d.isArray(o[0])||(o=[o]),X=0;X<o.length;X+=1)if(Y=o[X],(N=u.isConvex(Y))||!M)Y=N?u.clockwiseSort(Y):u.hull(Y),B.push({position:{x:t,y:i},vertices:Y});else{var U=Y.map((function(t){return[t.x,t.y]}));M.makeCCW(U),!1!==P&&M.removeCollinearPoints(U,P);var z=M.quickDecomp(U);for(G=0;G<z.length;G++){var V=z[G].map((function(t){return{x:t[0],y:t[1]}}));R>0&&u.area(V)<R||B.push({position:u.centre(V),vertices:V})}}for(G=0;G<B.length;G++)B[G]=b.create(d.extend(B[G],S));return C&&a.flagCoincidentParts(B,5),B.length>1?(O=b.create(d.extend({parts:B.slice(0)},S)),b.setPosition(O,{x:t,y:i}),O):B[0]},a.flagCoincidentParts=function(t,i){void 0===i&&(i=5);for(var o=0;o<t.length;o++)for(var a=t[o],u=o+1;u<t.length;u++){var d=t[u];if(S.overlaps(a.bounds,d.bounds))for(var b=a.vertices,M=d.vertices,P=0;P<a.vertices.length;P++)for(var R=0;R<d.vertices.length;R++){var O=C.magnitudeSquared(C.sub(b[(P+1)%b.length],M[R])),B=C.magnitudeSquared(C.sub(b[P],M[(R+1)%M.length]));O<i&&B<i&&(b[P].isInternal=!0,M[R].isInternal=!0)}}return t}},function(t,i){t.exports=function GetCenterX(t){return t.x-t.width*t.originX+.5*t.width}},function(t,i){t.exports=function SetCenterX(t,i){var o=t.width*t.originX;return t.x=i+o-.5*t.width,t}},function(t,i){t.exports=function GetCenterY(t){return t.y-t.height*t.originY+.5*t.height}},function(t,i){t.exports=function SetCenterY(t,i){var o=t.height*t.originY;return t.y=i+o-.5*t.height,t}},function(t,i,o){t.exports={POST_RENDER:o(628),PRE_RENDER:o(629),RENDER:o(630),RESIZE:o(631)}},function(t,i){t.exports={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"}},function(t,i,o){var a=o(74);t.exports=function Remove(t,i,o,u){var d;if(void 0===u&&(u=t),!Array.isArray(i))return-1!==(d=t.indexOf(i))?(a(t,d),o&&o.call(u,i),i):null;for(var b=i.length-1,S=[];b>=0;){var C=i[b];-1!==(d=t.indexOf(C))&&(a(t,d),S.push(C),o&&o.call(u,C)),b--}return S}},function(t,i,o){var a=o(0),u=o(199),d=o(10),b=o(3),S=new a({initialize:function Curve(t){this.type=t,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new b,this._tmpVec2B=new b},draw:function draw(t,i){return void 0===i&&(i=32),t.strokePoints(this.getPoints(i))},getBounds:function getBounds(t,i){t||(t=new d),void 0===i&&(i=16);var o=this.getLength();i>o&&(i=o/2);var a=Math.max(1,Math.round(o/i));return u(this.getSpacedPoints(a),t)},getDistancePoints:function getDistancePoints(t){var i=this.getLength(),o=Math.max(1,i/t);return this.getSpacedPoints(o)},getEndPoint:function getEndPoint(t){return void 0===t&&(t=new b),this.getPointAt(1,t)},getLength:function getLength(){var t=this.getLengths();return t[t.length-1]},getLengths:function getLengths(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var i,o=[],a=this.getPoint(0,this._tmpVec2A),u=0;o.push(0);for(var d=1;d<=t;d++)u+=(i=this.getPoint(d/t,this._tmpVec2B)).distance(a),o.push(u),a.copy(i);return this.cacheArcLengths=o,o},getPointAt:function getPointAt(t,i){var o=this.getUtoTmapping(t);return this.getPoint(o,i)},getPoints:function getPoints(t,i,o){void 0===o&&(o=[]),t||(t=i?this.getLength()/i:this.defaultDivisions);for(var a=0;a<=t;a++)o.push(this.getPoint(a/t));return o},getRandomPoint:function getRandomPoint(t){return void 0===t&&(t=new b),this.getPoint(Math.random(),t)},getSpacedPoints:function getSpacedPoints(t,i,o){void 0===o&&(o=[]),t||(t=i?this.getLength()/i:this.defaultDivisions);for(var a=0;a<=t;a++){var u=this.getUtoTmapping(a/t,null,t);o.push(this.getPoint(u))}return o},getStartPoint:function getStartPoint(t){return void 0===t&&(t=new b),this.getPointAt(0,t)},getTangent:function getTangent(t,i){void 0===i&&(i=new b);var o=1e-4,a=t-o,u=t+o;return a<0&&(a=0),u>1&&(u=1),this.getPoint(a,this._tmpVec2A),this.getPoint(u,i),i.subtract(this._tmpVec2A).normalize()},getTangentAt:function getTangentAt(t,i){var o=this.getUtoTmapping(t);return this.getTangent(o,i)},getTFromDistance:function getTFromDistance(t,i){return t<=0?0:this.getUtoTmapping(0,t,i)},getUtoTmapping:function getUtoTmapping(t,i,o){var a,u=this.getLengths(o),d=0,b=u.length;a=i?Math.min(i,u[b-1]):t*u[b-1];for(var S,C=0,M=b-1;C<=M;)if((S=u[d=Math.floor(C+(M-C)/2)]-a)<0)C=d+1;else{if(!(S>0)){M=d;break}M=d-1}if(u[d=M]===a)return d/(b-1);var P=u[d];return(d+(a-P)/(u[d+1]-P))/(b-1)},updateArcLengths:function updateArcLengths(){this.needsUpdate=!0,this.getLengths()}});t.exports=S},function(t,i,o){t.exports={ADD:o(968),COMPLETE:o(969),FILE_COMPLETE:o(970),FILE_KEY_COMPLETE:o(971),FILE_LOAD_ERROR:o(972),FILE_LOAD:o(973),FILE_PROGRESS:o(974),POST_PROCESS:o(975),PROGRESS:o(976),START:o(977)}},function(t,i,o){var a=o(4);t.exports=function LineToLine(t,i,o){void 0===o&&(o=new a);var u=t.x1,d=t.y1,b=t.x2,S=t.y2,C=i.x1,M=i.y1,P=i.x2,R=i.y2,O=(R-M)*(b-u)-(P-C)*(S-d);if(0===O)return!1;var B=((P-C)*(d-M)-(R-M)*(u-C))/O,N=((b-u)*(d-M)-(S-d)*(u-C))/O;return B>=0&&B<=1&&N>=0&&N<=1&&(o.x=u+B*(b-u),o.y=d+B*(S-d),!0)}},function(t,i){t.exports=function Angle(t){return Math.atan2(t.y2-t.y1,t.x2-t.x1)}},function(t,i,o){var a=o(18);t.exports=function FromPercent(t,i,o){return(o-i)*(t=a(t,0,1))+i}},function(t,i){t.exports=function GetBoolean(t,i,o){return t&&t.hasOwnProperty(i)?t[i]:o}},function(t,i){t.exports={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26}},function(t,i,o){var a=o(0),u=o(315),d=new a({initialize:function DataManager(t,i){this.parent=t,this.events=i,i||(this.events=t.events?t.events:t),this.list={},this.values={},this._frozen=!1,!t.hasOwnProperty("sys")&&this.events&&this.events.once(u.DESTROY,this.destroy,this)},get:function get(t){var i=this.list;if(Array.isArray(t)){for(var o=[],a=0;a<t.length;a++)o.push(i[t[a]]);return o}return i[t]},getAll:function getAll(){var t={};for(var i in this.list)this.list.hasOwnProperty(i)&&(t[i]=this.list[i]);return t},query:function query(t){var i={};for(var o in this.list)this.list.hasOwnProperty(o)&&o.match(t)&&(i[o]=this.list[o]);return i},set:function set(t,i){if(this._frozen)return this;if("string"==typeof t)return this.setValue(t,i);for(var o in t)this.setValue(o,t[o]);return this},inc:function inc(t,i){if(this._frozen)return this;void 0===i&&(i=1);var o=this.get(t);return void 0===o&&(o=0),this.set(t,o+i),this},toggle:function toggle(t){return this._frozen||this.set(t,!this.get(t)),this},setValue:function setValue(t,i){if(this._frozen)return this;if(this.has(t))this.values[t]=i;else{var o=this,a=this.list,d=this.events,b=this.parent;Object.defineProperty(this.values,t,{enumerable:!0,configurable:!0,get:function get(){return a[t]},set:function set(i){if(!o._frozen){var S=a[t];a[t]=i,d.emit(u.CHANGE_DATA,b,t,i,S),d.emit(u.CHANGE_DATA_KEY+t,b,i,S)}}}),a[t]=i,d.emit(u.SET_DATA,b,t,i)}return this},each:function each(t,i){for(var o=[this.parent,null,void 0],a=1;a<arguments.length;a++)o.push(arguments[a]);for(var u in this.list)o[1]=u,o[2]=this.list[u],t.apply(i,o);return this},merge:function merge(t,i){for(var o in void 0===i&&(i=!0),t)t.hasOwnProperty(o)&&(i||!i&&!this.has(o))&&this.setValue(o,t[o]);return this},remove:function remove(t){if(this._frozen)return this;if(!Array.isArray(t))return this.removeValue(t);for(var i=0;i<t.length;i++)this.removeValue(t[i]);return this},removeValue:function removeValue(t){if(this.has(t)){var i=this.list[t];delete this.list[t],delete this.values[t],this.events.emit(u.REMOVE_DATA,this.parent,t,i)}return this},pop:function pop(t){var i=void 0;return!this._frozen&&this.has(t)&&(i=this.list[t],delete this.list[t],delete this.values[t],this.events.emit(u.REMOVE_DATA,this.parent,t,i)),i},has:function has(t){return this.list.hasOwnProperty(t)},setFreeze:function setFreeze(t){return this._frozen=t,this},reset:function reset(){for(var t in this.list)delete this.list[t],delete this.values[t];return this._frozen=!1,this},destroy:function destroy(){this.reset(),this.events.off(u.CHANGE_DATA),this.events.off(u.SET_DATA),this.events.off(u.REMOVE_DATA),this.parent=null},freeze:{get:function get(){return this._frozen},set:function set(t){this._frozen=!!t}},count:{get:function get(){var t=0;for(var i in this.list)void 0!==this.list[i]&&t++;return t}}});t.exports=d},function(t,i,o){var a=new(o(0))({initialize:function Map(t){if(this.entries={},this.size=0,Array.isArray(t))for(var i=0;i<t.length;i++)this.set(t[i][0],t[i][1])},set:function set(t,i){return this.has(t)||this.size++,this.entries[t]=i,this},get:function get(t){if(this.has(t))return this.entries[t]},getArray:function getArray(){var t=[],i=this.entries;for(var o in i)t.push(i[o]);return t},has:function has(t){return this.entries.hasOwnProperty(t)},delete:function _delete(t){return this.has(t)&&(delete this.entries[t],this.size--),this},clear:function clear(){return Object.keys(this.entries).forEach((function(t){delete this.entries[t]}),this),this.size=0,this},keys:function keys(){return Object.keys(this.entries)},values:function values(){var t=[],i=this.entries;for(var o in i)t.push(i[o]);return t},dump:function dump(){var t=this.entries;for(var i in console.group("Map"),t)console.log(i,t[i]);console.groupEnd()},each:function each(t){var i=this.entries;for(var o in i)if(!1===t(o,i[o]))break;return this},contains:function contains(t){var i=this.entries;for(var o in i)if(i[o]===t)return!0;return!1},merge:function merge(t,i){void 0===i&&(i=!1);var o=this.entries,a=t.entries;for(var u in a)o.hasOwnProperty(u)&&i?o[u]=a[u]:this.set(u,a[u]);return this}});t.exports=a},function(t,i){t.exports=function GetColor(t,i,o){return t<<16|i<<8|o}},function(t,i,o){t.exports={ENTER_FULLSCREEN:o(800),FULLSCREEN_FAILED:o(801),FULLSCREEN_UNSUPPORTED:o(802),LEAVE_FULLSCREEN:o(803),ORIENTATION_CHANGE:o(804),RESIZE:o(805)}},function(t,i,o){(function(i){var o={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};t.exports=function init(){if("function"==typeof importScripts)return o;var t=navigator.userAgent;/Windows/.test(t)?o.windows=!0:/Mac OS/.test(t)&&!/like Mac OS/.test(t)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(o.iOS=!0,o.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),o.iOSVersion=parseInt(RegExp.$1,10)):o.macOS=!0:/Android/.test(t)?o.android=!0:/Linux/.test(t)?o.linux=!0:/iP[ao]d|iPhone/i.test(t)?(o.iOS=!0,navigator.appVersion.match(/OS (\d+)/),o.iOSVersion=parseInt(RegExp.$1,10),o.iPhone=-1!==t.toLowerCase().indexOf("iphone"),o.iPad=-1!==t.toLowerCase().indexOf("ipad")):/Kindle/.test(t)||/\bKF[A-Z][A-Z]+/.test(t)||/Silk.*Mobile Safari/.test(t)?o.kindle=!0:/CrOS/.test(t)&&(o.chromeOS=!0),(/Windows Phone/i.test(t)||/IEMobile/i.test(t))&&(o.android=!1,o.iOS=!1,o.macOS=!1,o.windows=!0,o.windowsPhone=!0);var a=/Silk/.test(t);return(o.windows||o.macOS||o.linux&&!a||o.chromeOS)&&(o.desktop=!0),(o.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(o.desktop=!1),navigator.standalone&&(o.webApp=!0),"function"!=typeof importScripts&&(void 0!==window.cordova&&(o.cordova=!0),void 0!==window.ejecta&&(o.ejecta=!0)),void 0!==i&&i.versions&&i.versions.node&&(o.node=!0),o.node&&"object"===_typeof(i.versions)&&(o.nodeWebkit=!!i.versions["node-webkit"],o.electron=!!i.versions.electron),/Crosswalk/.test(t)&&(o.crosswalk=!0),o.pixelRatio=window.devicePixelRatio||1,o}()}).call(this,o(807))},function(t,i,o){t.exports={ADD:o(861),ERROR:o(862),LOAD:o(863),READY:o(864),REMOVE:o(865)}},function(t,i){t.exports={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}}},function(t,i,o){var a=o(0),u=o(59),d=o(2),b=o(878),S=o(879),C=o(25),M=o(12),P=o(107),R=o(58),O=new a({Extends:R,initialize:function MultiPipeline(t){var i=t.game.renderer,o=d(t,"fragShader",b);t.fragShader=M.parseFragmentShaderMaxTextures(o,i.maxTextures),t.vertShader=d(t,"vertShader",S),t.attributes=d(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:P.UNSIGNED_BYTE,normalized:!0}]),R.call(this,t),this._tempMatrix1=new C,this._tempMatrix2=new C,this._tempMatrix3=new C,this.calcMatrix=new C,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function boot(){R.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function batchSprite(t,i,o){this.manager.set(this,t);var a=this._tempMatrix1,u=this._tempMatrix2,d=this._tempMatrix3,b=t.frame,S=b.glTexture,C=b.u0,P=b.v0,R=b.u1,O=b.v1,B=b.x,N=b.y,Y=b.cutWidth,G=b.cutHeight,X=b.customPivot,U=t.displayOriginX,z=t.displayOriginY,V=-U+B,W=-z+N;if(t.isCropped){var H=t._crop;H.flipX===t.flipX&&H.flipY===t.flipY||b.updateCropUVs(H,t.flipX,t.flipY),C=H.u0,P=H.v0,R=H.u1,O=H.v1,Y=H.width,G=H.height,V=-U+(B=H.x),W=-z+(N=H.y)}var j=1,q=1;t.flipX&&(X||(V+=-b.realWidth+2*U),j=-1),(t.flipY||b.source.isGLTexture&&!S.flipY)&&(X||(W+=-b.realHeight+2*z),q=-1),u.applyITRS(t.x,t.y,t.rotation,t.scaleX*j,t.scaleY*q),a.copyFrom(i.matrix),o?(a.multiplyWithOffset(o,-i.scrollX*t.scrollFactorX,-i.scrollY*t.scrollFactorY),u.e=t.x,u.f=t.y):(u.e-=i.scrollX*t.scrollFactorX,u.f-=i.scrollY*t.scrollFactorY),a.multiply(u,d);var Z=V+Y,K=W+G,$=i.roundPixels,tt=d.getXRound(V,W,$),et=d.getYRound(V,W,$),it=d.getXRound(V,K,$),nt=d.getYRound(V,K,$),rt=d.getXRound(Z,K,$),st=d.getYRound(Z,K,$),ot=d.getXRound(Z,W,$),at=d.getYRound(Z,W,$),ht=M.getTintAppendFloatAlpha,lt=i.alpha,ut=ht(t.tintTopLeft,lt*t._alphaTL),ct=ht(t.tintTopRight,lt*t._alphaTR),dt=ht(t.tintBottomLeft,lt*t._alphaBL),ft=ht(t.tintBottomRight,lt*t._alphaBR);this.shouldFlush(6)&&this.flush();var pt=this.setGameObject(t,b);this.manager.preBatch(t),this.batchQuad(t,tt,et,it,nt,rt,st,ot,at,C,P,R,O,ut,ct,dt,ft,t.tintFill,S,pt),this.manager.postBatch(t)},batchTexture:function batchTexture(t,i,o,a,u,d,b,S,C,M,P,R,O,B,N,Y,G,X,U,z,V,W,H,j,q,Z,K,$,tt,et,it,nt){this.manager.set(this,t);var rt=this._tempMatrix1,st=this._tempMatrix2,ot=this._tempMatrix3,at=X/o+K,ht=U/a+$,lt=(X+z)/o+K,ut=(U+V)/a+$,ct=b,dt=S,ft=-Y,pt=-G;if(t.isCropped){var gt=t._crop,vt=gt.width,mt=gt.height;ct=vt,dt=mt,b=vt,S=mt;var yt=X=gt.x,xt=U=gt.y;R&&(yt=z-gt.x-vt),O&&(xt=V-gt.y-mt),at=yt/o+K,ht=xt/a+$,lt=(yt+vt)/o+K,ut=(xt+mt)/a+$,ft=-Y+X,pt=-G+U}R&&(ct*=-1,ft+=b),(O^=!it&&i.isRenderTexture?1:0)&&(dt*=-1,pt+=S);var Tt=ft+ct,bt=pt+dt;st.applyITRS(u,d,P,C,M),rt.copyFrom(tt.matrix),et?(rt.multiplyWithOffset(et,-tt.scrollX*B,-tt.scrollY*N),st.e=u,st.f=d):(st.e-=tt.scrollX*B,st.f-=tt.scrollY*N),rt.multiply(st,ot);var wt=tt.roundPixels,St=ot.getXRound(ft,pt,wt),Ct=ot.getYRound(ft,pt,wt),Et=ot.getXRound(ft,bt,wt),Mt=ot.getYRound(ft,bt,wt),_t=ot.getXRound(Tt,bt,wt),Pt=ot.getYRound(Tt,bt,wt),Rt=ot.getXRound(Tt,pt,wt),kt=ot.getYRound(Tt,pt,wt);void 0===nt&&(nt=this.renderer.setTexture2D(i)),t&&this.manager.preBatch(t),this.batchQuad(t,St,Ct,Et,Mt,_t,Pt,Rt,kt,at,ht,lt,ut,W,H,j,q,Z,i,nt),t&&this.manager.postBatch(t)},batchTextureFrame:function batchTextureFrame(t,i,o,a,u,d,b){this.manager.set(this);var S=this._tempMatrix1.copyFrom(d),C=this._tempMatrix2,P=i+t.width,R=o+t.height;b?S.multiply(b,C):C=S;var O=C.getX(i,o),B=C.getY(i,o),N=C.getX(i,R),Y=C.getY(i,R),G=C.getX(P,R),X=C.getY(P,R),U=C.getX(P,o),z=C.getY(P,o),V=this.renderer.setTextureSource(t.source);a=M.getTintAppendFloatAlpha(a,u),this.batchQuad(null,O,B,N,Y,G,X,U,z,t.u0,t.v0,t.u1,t.v1,a,a,a,a,0,t.glTexture,V)},batchFillRect:function batchFillRect(t,i,o,a,u,d){this.renderer.pipelines.set(this);var b=this.calcMatrix;d&&d.multiply(u,b);var S=t+o,C=i+a,M=b.getX(t,i),P=b.getY(t,i),R=b.getX(t,C),O=b.getY(t,C),B=b.getX(S,C),N=b.getY(S,C),Y=b.getX(S,i),G=b.getY(S,i),X=this.fillTint;this.batchQuad(null,M,P,R,O,B,N,Y,G,0,0,1,1,X.TL,X.TR,X.BL,X.BR,2)},batchFillTriangle:function batchFillTriangle(t,i,o,a,u,d,b,S){this.renderer.pipelines.set(this);var C=this.calcMatrix;S&&S.multiply(b,C);var M=C.getX(t,i),P=C.getY(t,i),R=C.getX(o,a),O=C.getY(o,a),B=C.getX(u,d),N=C.getY(u,d),Y=this.fillTint;this.batchTri(null,M,P,R,O,B,N,0,0,1,1,Y.TL,Y.TR,Y.BL,2)},batchStrokeTriangle:function batchStrokeTriangle(t,i,o,a,u,d,b,S,C){var M=this.tempTriangle;M[0].x=t,M[0].y=i,M[0].width=b,M[1].x=o,M[1].y=a,M[1].width=b,M[2].x=u,M[2].y=d,M[2].width=b,M[3].x=t,M[3].y=i,M[3].width=b,this.batchStrokePath(M,b,!1,S,C)},batchFillPath:function batchFillPath(t,i,o){this.renderer.pipelines.set(this);var a=this.calcMatrix;o&&o.multiply(i,a);for(var d,b,S=t.length,C=this.polygonCache,M=this.fillTint.TL,P=this.fillTint.TR,R=this.fillTint.BL,O=0;O<S;++O)b=t[O],C.push(b.x,b.y);S=(d=u(C)).length;for(var B=0;B<S;B+=3){var N=2*d[B+0],Y=2*d[B+1],G=2*d[B+2],X=C[N+0],U=C[N+1],z=C[Y+0],V=C[Y+1],W=C[G+0],H=C[G+1],j=a.getX(X,U),q=a.getY(X,U),Z=a.getX(z,V),K=a.getY(z,V),$=a.getX(W,H),tt=a.getY(W,H);this.batchTri(null,j,q,Z,K,$,tt,0,0,1,1,M,P,R,2)}C.length=0},batchStrokePath:function batchStrokePath(t,i,o,a,u){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var d=t.length-1,b=0;b<d;b++){var S=t[b],C=t[b+1];this.batchLine(S.x,S.y,C.x,C.y,S.width/2,C.width/2,i,b,!o&&b===d-1,a,u)}},batchLine:function batchLine(t,i,o,a,u,d,b,S,C,M,P){this.renderer.pipelines.set(this);var R=this.calcMatrix;P&&P.multiply(M,R);var O=o-t,B=a-i,N=Math.sqrt(O*O+B*B),Y=u*(a-i)/N,G=u*(t-o)/N,X=d*(a-i)/N,U=d*(t-o)/N,z=o-X,V=a-U,W=t-Y,H=i-G,j=o+X,q=a+U,Z=t+Y,K=i+G,$=R.getX(z,V),tt=R.getY(z,V),et=R.getX(W,H),it=R.getY(W,H),nt=R.getX(j,q),rt=R.getY(j,q),st=R.getX(Z,K),ot=R.getY(Z,K),at=this.strokeTint,ht=at.TL,lt=at.TR,ut=at.BL,ct=at.BR;if(this.batchQuad(null,st,ot,et,it,$,tt,nt,rt,0,0,1,1,ht,lt,ut,ct,2),!(b<=2)){var dt=this.prevQuad,ft=this.firstQuad;S>0&&dt[4]?this.batchQuad(null,st,ot,et,it,dt[0],dt[1],dt[2],dt[3],0,0,1,1,ht,lt,ut,ct,2):(ft[0]=st,ft[1]=ot,ft[2]=et,ft[3]=it,ft[4]=1),C&&ft[4]?this.batchQuad(null,$,tt,nt,rt,ft[0],ft[1],ft[2],ft[3],0,0,1,1,ht,lt,ut,ct,2):(dt[0]=$,dt[1]=tt,dt[2]=nt,dt[3]=rt,dt[4]=1)}}});t.exports=O},function(t,i,o){var a=o(0),u=o(18),d=o(17),b=new a({initialize:function Frame(t,i,o,a,u,d,b){this.texture=t,this.name=i,this.source=t.source[o],this.sourceIndex=o,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(d,b,a,u)},setSize:function setSize(t,i,o,a){void 0===o&&(o=0),void 0===a&&(a=0),this.cutX=o,this.cutY=a,this.cutWidth=t,this.cutHeight=i,this.width=t,this.height=i,this.halfWidth=Math.floor(.5*t),this.halfHeight=Math.floor(.5*i),this.centerX=Math.floor(t/2),this.centerY=Math.floor(i/2);var u=this.data,d=u.cut;d.x=o,d.y=a,d.w=t,d.h=i,d.r=o+t,d.b=a+i,u.sourceSize.w=t,u.sourceSize.h=i,u.spriteSourceSize.w=t,u.spriteSourceSize.h=i,u.radius=.5*Math.sqrt(t*t+i*i);var b=u.drawImage;return b.x=o,b.y=a,b.width=t,b.height=i,this.updateUVs()},setTrim:function setTrim(t,i,o,a,u,d){var b=this.data,S=b.spriteSourceSize;return b.trim=!0,b.sourceSize.w=t,b.sourceSize.h=i,S.x=o,S.y=a,S.w=u,S.h=d,S.r=o+u,S.b=a+d,this.x=o,this.y=a,this.width=u,this.height=d,this.halfWidth=.5*u,this.halfHeight=.5*d,this.centerX=Math.floor(u/2),this.centerY=Math.floor(d/2),this.updateUVs()},setCropUVs:function setCropUVs(t,i,o,a,d,b,S){var C=this.cutX,M=this.cutY,P=this.cutWidth,R=this.cutHeight,O=this.realWidth,B=this.realHeight,N=C+(i=u(i,0,O)),Y=M+(o=u(o,0,B)),G=a=u(a,0,O-i),X=d=u(d,0,B-o),U=this.data;if(U.trim){var z=U.spriteSourceSize,V=i+(a=u(a,0,P-i)),W=o+(d=u(d,0,R-o));if(z.r<i||z.b<o||z.x>V||z.y>W)N=0,Y=0,G=0,X=0;else{var H=Math.max(z.x,i),j=Math.max(z.y,o),q=Math.min(z.r,V)-H,Z=Math.min(z.b,W)-j;G=q,X=Z,N=b?C+(P-(H-z.x)-q):C+(H-z.x),Y=S?M+(R-(j-z.y)-Z):M+(j-z.y),i=H,o=j,a=q,d=Z}}else b&&(N=C+(P-i-a)),S&&(Y=M+(R-o-d));var K=this.source.width,$=this.source.height;return t.u0=Math.max(0,N/K),t.v0=Math.max(0,Y/$),t.u1=Math.min(1,(N+G)/K),t.v1=Math.min(1,(Y+X)/$),t.x=i,t.y=o,t.cx=N,t.cy=Y,t.cw=G,t.ch=X,t.width=a,t.height=d,t.flipX=b,t.flipY=S,t},updateCropUVs:function updateCropUVs(t,i,o){return this.setCropUVs(t,t.x,t.y,t.width,t.height,i,o)},setUVs:function setUVs(t,i,o,a,u,d){var b=this.data.drawImage;return b.width=t,b.height=i,this.u0=o,this.v0=a,this.u1=u,this.v1=d,this},updateUVs:function updateUVs(){var t=this.cutX,i=this.cutY,o=this.cutWidth,a=this.cutHeight,u=this.data.drawImage;u.width=o,u.height=a;var d=this.source.width,b=this.source.height;return this.u0=t/d,this.v0=i/b,this.u1=(t+o)/d,this.v1=(i+a)/b,this},updateUVsInverted:function updateUVsInverted(){var t=this.source.width,i=this.source.height;return this.u0=(this.cutX+this.cutHeight)/t,this.v0=this.cutY/i,this.u1=this.cutX/t,this.v1=(this.cutY+this.cutWidth)/i,this},clone:function clone(){var clone=new b(this.texture,this.name,this.sourceIndex);return clone.cutX=this.cutX,clone.cutY=this.cutY,clone.cutWidth=this.cutWidth,clone.cutHeight=this.cutHeight,clone.x=this.x,clone.y=this.y,clone.width=this.width,clone.height=this.height,clone.halfWidth=this.halfWidth,clone.halfHeight=this.halfHeight,clone.centerX=this.centerX,clone.centerY=this.centerY,clone.rotated=this.rotated,clone.data=d(!0,clone.data,this.data),clone.updateUVs(),clone},destroy:function destroy(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function get(){return this.data.sourceSize.w}},realHeight:{get:function get(){return this.data.sourceSize.h}},radius:{get:function get(){return this.data.radius}},trimmed:{get:function get(){return this.data.trim}},canvasData:{get:function get(){return this.data.drawImage}}});t.exports=b},function(t,i,o){var a=o(208),u=o(0),d=o(1),b=o(79),S=new u({initialize:function List(t){this.parent=t,this.list=[],this.position=0,this.addCallback=d,this.removeCallback=d,this._sortKey=""},add:function add(t,i){return i?a.Add(this.list,t):a.Add(this.list,t,0,this.addCallback,this)},addAt:function addAt(t,i,o){return o?a.AddAt(this.list,t,i):a.AddAt(this.list,t,i,0,this.addCallback,this)},getAt:function getAt(t){return this.list[t]},getIndex:function getIndex(t){return this.list.indexOf(t)},sort:function sort(t,i){return t?(void 0===i&&(i=function handler(i,o){return i[t]-o[t]}),b(this.list,i),this):this},getByName:function getByName(t){return a.GetFirst(this.list,"name",t)},getRandom:function getRandom(t,i){return a.GetRandom(this.list,t,i)},getFirst:function getFirst(t,i,o,u){return a.GetFirst(this.list,t,i,o,u)},getAll:function getAll(t,i,o,u){return a.GetAll(this.list,t,i,o,u)},count:function count(t,i){return a.CountAllMatching(this.list,t,i)},swap:function swap(t,i){a.Swap(this.list,t,i)},moveTo:function moveTo(t,i){return a.MoveTo(this.list,t,i)},moveAbove:function moveAbove(t,i){return a.MoveAbove(this.list,t,i)},moveBelow:function moveBelow(t,i){return a.MoveBelow(this.list,t,i)},remove:function remove(t,i){return i?a.Remove(this.list,t):a.Remove(this.list,t,this.removeCallback,this)},removeAt:function removeAt(t,i){return i?a.RemoveAt(this.list,t):a.RemoveAt(this.list,t,this.removeCallback,this)},removeBetween:function removeBetween(t,i,o){return o?a.RemoveBetween(this.list,t,i):a.RemoveBetween(this.list,t,i,this.removeCallback,this)},removeAll:function removeAll(t){for(var i=this.list.length;i--;)this.remove(this.list[i],t);return this},bringToTop:function bringToTop(t){return a.BringToTop(this.list,t)},sendToBack:function sendToBack(t){return a.SendToBack(this.list,t)},moveUp:function moveUp(t){return a.MoveUp(this.list,t),t},moveDown:function moveDown(t){return a.MoveDown(this.list,t),t},reverse:function reverse(){return this.list.reverse(),this},shuffle:function shuffle(){return a.Shuffle(this.list),this},replace:function replace(t,i){return a.Replace(this.list,t,i)},exists:function exists(t){return this.list.indexOf(t)>-1},setAll:function setAll(t,i,o,u){return a.SetAll(this.list,t,i,o,u),this},each:function each(t,i){for(var o=[null],a=2;a<arguments.length;a++)o.push(arguments[a]);for(a=0;a<this.list.length;a++)o[0]=this.list[a],t.apply(i,o)},shutdown:function shutdown(){this.removeAll(),this.list=[]},destroy:function destroy(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function get(){return this.list.length}},first:{get:function get(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function get(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function get(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function get(){return this.position>0?(this.position--,this.list[this.position]):null}}});t.exports=S},function(t,i,o){var a=o(0),u=o(112),d=o(445),b=o(446),S=o(56),C=o(180),M=new a({initialize:function Ellipse(t,i,o,a){void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),this.type=S.ELLIPSE,this.x=t,this.y=i,this.width=o,this.height=a},contains:function contains(t,i){return u(this,t,i)},getPoint:function getPoint(t,i){return d(this,t,i)},getPoints:function getPoints(t,i,o){return b(this,t,i,o)},getRandomPoint:function getRandomPoint(t){return C(this,t)},setTo:function setTo(t,i,o,a){return this.x=t,this.y=i,this.width=o,this.height=a,this},setEmpty:function setEmpty(){return this.width=0,this.height=0,this},setPosition:function setPosition(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setSize:function setSize(t,i){return void 0===i&&(i=t),this.width=t,this.height=i,this},isEmpty:function isEmpty(){return this.width<=0||this.height<=0},getMinorRadius:function getMinorRadius(){return Math.min(this.width,this.height)/2},getMajorRadius:function getMajorRadius(){return Math.max(this.width,this.height)/2},left:{get:function get(){return this.x-this.width/2},set:function set(t){this.x=t+this.width/2}},right:{get:function get(){return this.x+this.width/2},set:function set(t){this.x=t-this.width/2}},top:{get:function get(){return this.y-this.height/2},set:function set(t){this.y=t+this.height/2}},bottom:{get:function get(){return this.y+this.height/2},set:function set(t){this.y=t-this.height/2}}});t.exports=M},function(t,i){t.exports=function Contains(t,i,o){if(t.width<=0||t.height<=0)return!1;var a=(i-t.x)/t.width,u=(o-t.y)/t.height;return(a*=a)+(u*=u)<.25}},function(t,i,o){var a=o(275),u=o(0),d=o(75),b=o(9),S=o(207),C=o(2),M=o(6),P=o(7),R=o(437),O=o(149),B=o(73),N=new u({Extends:b,initialize:function Group(t,i,o){b.call(this),o?i&&!Array.isArray(i)&&(i=[i]):Array.isArray(i)?P(i[0])&&(o=i,i=null):P(i)&&(o=i,i=null),this.scene=t,this.children=new O,this.isParent=!0,this.type="Group",this.classType=C(o,"classType",B),this.name=C(o,"name",""),this.active=C(o,"active",!0),this.maxSize=C(o,"maxSize",-1),this.defaultKey=C(o,"defaultKey",null),this.defaultFrame=C(o,"defaultFrame",null),this.runChildUpdate=C(o,"runChildUpdate",!1),this.createCallback=C(o,"createCallback",null),this.removeCallback=C(o,"removeCallback",null),this.createMultipleCallback=C(o,"createMultipleCallback",null),this.internalCreateCallback=C(o,"internalCreateCallback",null),this.internalRemoveCallback=C(o,"internalRemoveCallback",null),i&&this.addMultiple(i),o&&this.createMultiple(o),this.on(d.ADDED_TO_SCENE,this.addedToScene,this),this.on(d.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function addedToScene(){this.scene.sys.updateList.add(this)},removedFromScene:function removedFromScene(){this.scene.sys.updateList.remove(this)},create:function create(t,i,o,a,u,d){if(void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=this.defaultKey),void 0===a&&(a=this.defaultFrame),void 0===u&&(u=!0),void 0===d&&(d=!0),this.isFull())return null;var b=new this.classType(this.scene,t,i,o,a);return b.addToDisplayList(this.scene.sys.displayList),b.addToUpdateList(),b.visible=u,b.setActive(d),this.add(b),b},createMultiple:function createMultiple(t){if(this.isFull())return[];Array.isArray(t)||(t=[t]);var i=[];if(t[0].key)for(var o=0;o<t.length;o++){var a=this.createFromConfig(t[o]);i=i.concat(a)}return i},createFromConfig:function createFromConfig(t){if(this.isFull())return[];this.classType=C(t,"classType",this.classType);var i=C(t,"key",void 0),o=C(t,"frame",null),u=C(t,"visible",!0),d=C(t,"active",!0),b=[];if(void 0===i)return b;Array.isArray(i)||(i=[i]),Array.isArray(o)||(o=[o]);var S=C(t,"repeat",0),P=C(t,"randomKey",!1),O=C(t,"randomFrame",!1),B=C(t,"yoyo",!1),N=C(t,"quantity",!1),Y=C(t,"frameQuantity",1),G=C(t,"max",0),X=R(i,o,{max:G,qty:N||Y,random:P,randomB:O,repeat:S,yoyo:B});t.createCallback&&(this.createCallback=t.createCallback),t.removeCallback&&(this.removeCallback=t.removeCallback);for(var U=0;U<X.length;U++){var z=this.create(0,0,X[U].a,X[U].b,u,d);if(!z)break;b.push(z)}var V=M(t,"setXY.x",0),W=M(t,"setXY.y",0),H=M(t,"setXY.stepX",0),j=M(t,"setXY.stepY",0);a.SetXY(b,V,W,H,j);var q=M(t,"setRotation.value",0),Z=M(t,"setRotation.step",0);a.SetRotation(b,q,Z);var K=M(t,"setScale.x",1),$=M(t,"setScale.y",K),tt=M(t,"setScale.stepX",0),et=M(t,"setScale.stepY",0);a.SetScale(b,K,$,tt,et);var it=M(t,"setOrigin.x",.5),nt=M(t,"setOrigin.y",it),rt=M(t,"setOrigin.stepX",0),st=M(t,"setOrigin.stepY",0);a.SetOrigin(b,it,nt,rt,st);var ot=M(t,"setAlpha.value",1),at=M(t,"setAlpha.step",0);a.SetAlpha(b,ot,at);var ht=M(t,"setDepth.value",0),lt=M(t,"setDepth.step",0);a.SetDepth(b,ht,lt);var ut=M(t,"setScrollFactor.x",1),ct=M(t,"setScrollFactor.y",ut),dt=M(t,"setScrollFactor.stepX",0),ft=M(t,"setScrollFactor.stepY",0);a.SetScrollFactor(b,ut,ct,dt,ft);var pt=C(t,"hitArea",null),gt=C(t,"hitAreaCallback",null);pt&&a.SetHitArea(b,pt,gt);var vt=C(t,"gridAlign",!1);return vt&&a.GridAlign(b,vt),this.createMultipleCallback&&this.createMultipleCallback.call(this,b),b},preUpdate:function preUpdate(t,i){if(this.runChildUpdate&&0!==this.children.size)for(var o=this.children.entries.slice(),a=0;a<o.length;a++){var u=o[a];u.active&&u.update(t,i)}},add:function add(t,i){return void 0===i&&(i=!1),this.isFull()||(this.children.set(t),this.internalCreateCallback&&this.internalCreateCallback.call(this,t),this.createCallback&&this.createCallback.call(this,t),i&&(t.addToDisplayList(this.scene.sys.displayList),t.addToUpdateList()),t.on(d.DESTROY,this.remove,this)),this},addMultiple:function addMultiple(t,i){if(void 0===i&&(i=!1),Array.isArray(t))for(var o=0;o<t.length;o++)this.add(t[o],i);return this},remove:function remove(t,i,o){return void 0===i&&(i=!1),void 0===o&&(o=!1),this.children.contains(t)?(this.children.delete(t),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,t),this.removeCallback&&this.removeCallback.call(this,t),t.off(d.DESTROY,this.remove,this),o?t.destroy():i&&(t.removeFromDisplayList(),t.removeFromUpdateList()),this):this},clear:function clear(t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);for(var o=this.children,a=0;a<o.size;a++){var u=o.entries[a];u.off(d.DESTROY,this.remove,this),i?u.destroy():t&&(u.removeFromDisplayList(),u.removeFromUpdateList())}return this.children.clear(),this},contains:function contains(t){return this.children.contains(t)},getChildren:function getChildren(){return this.children.entries},getLength:function getLength(){return this.children.size},getMatching:function getMatching(t,i,o,a){return S(this.children.entries,t,i,o,a)},getFirst:function getFirst(t,i,o,a,u,d,b){return this.getHandler(!0,1,t,i,o,a,u,d,b)},getFirstNth:function getFirstNth(t,i,o,a,u,d,b,S){return this.getHandler(!0,t,i,o,a,u,d,b,S)},getLast:function getLast(t,i,o,a,u,d,b){return this.getHandler(!1,1,t,i,o,a,u,d,b)},getLastNth:function getLastNth(t,i,o,a,u,d,b,S){return this.getHandler(!1,t,i,o,a,u,d,b,S)},getHandler:function getHandler(t,i,o,a,u,d,b,S,C){var M,P;void 0===o&&(o=!1),void 0===a&&(a=!1);var R=0,O=this.children.entries;if(t)for(P=0;P<O.length;P++)if((M=O[P]).active===o){if(++R===i)break}else M=null;else for(P=O.length-1;P>=0;P--)if((M=O[P]).active===o){if(++R===i)break}else M=null;return M?("number"==typeof u&&(M.x=u),"number"==typeof d&&(M.y=d),M):a?this.create(u,d,b,S,C):null},get:function get(t,i,o,a,u){return this.getFirst(!1,!0,t,i,o,a,u)},getFirstAlive:function getFirstAlive(t,i,o,a,u,d){return this.getFirst(!0,t,i,o,a,u,d)},getFirstDead:function getFirstDead(t,i,o,a,u,d){return this.getFirst(!1,t,i,o,a,u,d)},playAnimation:function playAnimation(t,i){return a.PlayAnimation(this.children.entries,t,i),this},isFull:function isFull(){return-1!==this.maxSize&&this.children.size>=this.maxSize},countActive:function countActive(t){void 0===t&&(t=!0);for(var i=0,o=0;o<this.children.size;o++)this.children.entries[o].active===t&&i++;return i},getTotalUsed:function getTotalUsed(){return this.countActive()},getTotalFree:function getTotalFree(){var t=this.getTotalUsed();return(-1===this.maxSize?999999999999:this.maxSize)-t},setActive:function setActive(t){return this.active=t,this},setName:function setName(t){return this.name=t,this},propertyValueSet:function propertyValueSet(t,i,o,u,d){return a.PropertyValueSet(this.children.entries,t,i,o,u,d),this},propertyValueInc:function propertyValueInc(t,i,o,u,d){return a.PropertyValueInc(this.children.entries,t,i,o,u,d),this},setX:function setX(t,i){return a.SetX(this.children.entries,t,i),this},setY:function setY(t,i){return a.SetY(this.children.entries,t,i),this},setXY:function setXY(t,i,o,u){return a.SetXY(this.children.entries,t,i,o,u),this},incX:function incX(t,i){return a.IncX(this.children.entries,t,i),this},incY:function incY(t,i){return a.IncY(this.children.entries,t,i),this},incXY:function incXY(t,i,o,u){return a.IncXY(this.children.entries,t,i,o,u),this},shiftPosition:function shiftPosition(t,i,o){return a.ShiftPosition(this.children.entries,t,i,o),this},angle:function angle(t,i){return a.Angle(this.children.entries,t,i),this},rotate:function rotate(t,i){return a.Rotate(this.children.entries,t,i),this},rotateAround:function rotateAround(t,i){return a.RotateAround(this.children.entries,t,i),this},rotateAroundDistance:function rotateAroundDistance(t,i,o){return a.RotateAroundDistance(this.children.entries,t,i,o),this},setAlpha:function setAlpha(t,i){return a.SetAlpha(this.children.entries,t,i),this},setTint:function setTint(t,i,o,u){return a.SetTint(this.children.entries,t,i,o,u),this},setOrigin:function setOrigin(t,i,o,u){return a.SetOrigin(this.children.entries,t,i,o,u),this},scaleX:function scaleX(t,i){return a.ScaleX(this.children.entries,t,i),this},scaleY:function scaleY(t,i){return a.ScaleY(this.children.entries,t,i),this},scaleXY:function scaleXY(t,i,o,u){return a.ScaleXY(this.children.entries,t,i,o,u),this},setDepth:function setDepth(t,i){return a.SetDepth(this.children.entries,t,i),this},setBlendMode:function setBlendMode(t){return a.SetBlendMode(this.children.entries,t),this},setHitArea:function setHitArea(t,i){return a.SetHitArea(this.children.entries,t,i),this},shuffle:function shuffle(){return a.Shuffle(this.children.entries),this},kill:function kill(t){this.children.contains(t)&&t.setActive(!1)},killAndHide:function killAndHide(t){this.children.contains(t)&&(t.setActive(!1),t.setVisible(!1))},setVisible:function setVisible(t,i,o){return a.SetVisible(this.children.entries,t,i,o),this},toggleVisible:function toggleVisible(){return a.ToggleVisible(this.children.entries),this},destroy:function destroy(t,i){void 0===t&&(t=!1),void 0===i&&(i=!1),this.scene&&!this.ignoreDestroy&&(this.emit(d.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(i,t),this.scene=void 0,this.children=void 0)}});t.exports=N},function(t,i,o){var a=o(12);t.exports=function FillPathWebGL(t,i,o,u,d,b){for(var S=a.getTintAppendFloatAlpha(o.fillColor,o.fillAlpha*u),C=o.pathData,M=o.pathIndexes,P=0;P<M.length;P+=3){var R=2*M[P],O=2*M[P+1],B=2*M[P+2],N=C[R+0]-d,Y=C[R+1]-b,G=C[O+0]-d,X=C[O+1]-b,U=C[B+0]-d,z=C[B+1]-b,V=i.getX(N,Y),W=i.getY(N,Y),H=i.getX(G,X),j=i.getY(G,X),q=i.getX(U,z),Z=i.getY(U,z);t.batchTri(o,V,W,H,j,q,Z,0,0,1,1,S,S,S,2)}}},function(t,i){t.exports=function Contains(t,i,o){var a=t.x3-t.x1,u=t.y3-t.y1,d=t.x2-t.x1,b=t.y2-t.y1,S=i-t.x1,C=o-t.y1,M=a*a+u*u,P=a*d+u*b,R=a*S+u*C,O=d*d+b*b,B=d*S+b*C,N=M*O-P*P,Y=0===N?0:1/N,G=(O*R-P*B)*Y,X=(M*B-P*R)*Y;return G>=0&&X>=0&&G+X<1}},function(t,i,o){var a=o(0),u=o(10),d=o(3);function GetLength(t,i,o,a){var u=t-o,d=i-a,b=u*u+d*d;return Math.sqrt(b)}var b=new a({initialize:function Face(t,i,o){this.vertex1=t,this.vertex2=i,this.vertex3=o,this.bounds=new u,this._inCenter=new d},getInCenter:function getInCenter(t){void 0===t&&(t=!0);var i,o,a,u,d,b,S=this.vertex1,C=this.vertex2,M=this.vertex3;t?(i=S.x,o=S.y,a=C.x,u=C.y,d=M.x,b=M.y):(i=S.vx,o=S.vy,a=C.vx,u=C.vy,d=M.vx,b=M.vy);var P=GetLength(d,b,a,u),R=GetLength(i,o,d,b),O=GetLength(a,u,i,o),B=P+R+O;return this._inCenter.set((i*P+a*R+d*O)/B,(o*P+u*R+b*O)/B)},contains:function contains(t,i,o){var a=this.vertex1,u=this.vertex2,d=this.vertex3,b=a.vx,S=a.vy,C=u.vx,M=u.vy,P=d.vx,R=d.vy;if(o){var O=o.a,B=o.b,N=o.c,Y=o.d,G=o.e,X=o.f;b=a.vx*O+a.vy*N+G,S=a.vx*B+a.vy*Y+X,C=u.vx*O+u.vy*N+G,M=u.vx*B+u.vy*Y+X,P=d.vx*O+d.vy*N+G,R=d.vx*B+d.vy*Y+X}var U=P-b,z=R-S,V=C-b,W=M-S,H=t-b,j=i-S,q=U*U+z*z,Z=U*V+z*W,K=U*H+z*j,$=V*V+W*W,tt=V*H+W*j,et=q*$-Z*Z,it=0===et?0:1/et,nt=($*K-Z*tt)*it,rt=(q*tt-Z*K)*it;return nt>=0&&rt>=0&&nt+rt<1},isCounterClockwise:function isCounterClockwise(t){var i=this.vertex1,o=this.vertex2,a=this.vertex3,u=(o.vx-i.vx)*(a.vy-i.vy)-(o.vy-i.vy)*(a.vx-i.vx);return t<=0?u>=0:u<0},load:function load(t,i,o,a,u){return o=this.vertex1.load(t,i,o,a,u),o=this.vertex2.load(t,i,o,a,u),o=this.vertex3.load(t,i,o,a,u)},transformCoordinatesLocal:function transformCoordinatesLocal(t,i,o,a){return this.vertex1.transformCoordinatesLocal(t,i,o,a),this.vertex2.transformCoordinatesLocal(t,i,o,a),this.vertex3.transformCoordinatesLocal(t,i,o,a),this},updateBounds:function updateBounds(){var t=this.vertex1,i=this.vertex2,o=this.vertex3,a=this.bounds;return a.x=Math.min(t.vx,i.vx,o.vx),a.y=Math.min(t.vy,i.vy,o.vy),a.width=Math.max(t.vx,i.vx,o.vx)-a.x,a.height=Math.max(t.vy,i.vy,o.vy)-a.y,this},isInView:function isInView(t,i,o,a,u,d,b,S,C,M,P){var R=this.vertex1.update(u,d,b,S,C,M,P,a),O=this.vertex2.update(u,d,b,S,C,M,P,a),B=this.vertex3.update(u,d,b,S,C,M,P,a);if(R.ta<=0&&O.ta<=0&&B.ta<=0)return!1;if(i&&!this.isCounterClockwise(o))return!1;var N=this.bounds;N.x=Math.min(R.tx,O.tx,B.tx),N.y=Math.min(R.ty,O.ty,B.ty),N.width=Math.max(R.tx,O.tx,B.tx)-N.x,N.height=Math.max(R.ty,O.ty,B.ty)-N.y;var Y=t.x+t.width,G=t.y+t.height;return!(N.width<=0||N.height<=0||t.width<=0||t.height<=0||N.right<t.x||N.bottom<t.y||N.x>Y||N.y>G)},translate:function translate(t,i){void 0===i&&(i=0);var o=this.vertex1,a=this.vertex2,u=this.vertex3;return o.x+=t,o.y+=i,a.x+=t,a.y+=i,u.x+=t,u.y+=i,this},x:{get:function get(){return this.getInCenter().x},set:function set(t){var i=this.getInCenter();this.translate(t-i.x,0)}},y:{get:function get(){return this.getInCenter().y},set:function set(t){var i=this.getInCenter();this.translate(0,t-i.y)}},alpha:{get:function get(){var t=this.vertex1,i=this.vertex2,o=this.vertex3;return(t.alpha+i.alpha+o.alpha)/3},set:function set(t){this.vertex1.alpha=t,this.vertex2.alpha=t,this.vertex3.alpha=t}},depth:{get:function get(){var t=this.vertex1,i=this.vertex2,o=this.vertex3;return(t.vz+i.vz+o.vz)/3}},destroy:function destroy(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});t.exports=b},function(t,i,o){var a=o(0),u=o(12),d=o(39),b=new a({Extends:d,initialize:function Vertex(t,i,o,a,u,b,S,C,M,P){void 0===b&&(b=16777215),void 0===S&&(S=1),void 0===C&&(C=0),void 0===M&&(M=0),void 0===P&&(P=0),d.call(this,t,i,o),this.vx=0,this.vy=0,this.vz=0,this.nx=C,this.ny=M,this.nz=P,this.u=a,this.v=u,this.color=b,this.alpha=S,this.tx=0,this.ty=0,this.ta=0},setUVs:function setUVs(t,i){return this.u=t,this.v=i,this},transformCoordinatesLocal:function transformCoordinatesLocal(t,i,o,a){var u=this.x,d=this.y,b=this.z,S=t.val,C=u*S[0]+d*S[4]+b*S[8]+S[12],M=u*S[1]+d*S[5]+b*S[9]+S[13],P=u*S[2]+d*S[6]+b*S[10]+S[14],R=u*S[3]+d*S[7]+b*S[11]+S[15];this.vx=C/R*i,this.vy=-M/R*o,this.vz=a<=0?P/R:-P/R},update:function update(t,i,o,a,u,d,b,S){var C=this.vx*t+this.vy*o+u,M=this.vx*i+this.vy*a+d;return b&&(C=Math.round(C),M=Math.round(M)),this.tx=C,this.ty=M,this.ta=this.alpha*S,this},load:function load(t,i,o,a,d){return t[++o]=this.tx,t[++o]=this.ty,t[++o]=this.u,t[++o]=this.v,t[++o]=a,t[++o]=d,i[++o]=u.getTintAppendFloatAlpha(this.color,this.ta),o}});t.exports=b},function(t,i,o){var a={};t.exports=a;var u=o(166),d=o(32),b=o(84),S=o(41);a.create=function(t){return d.extend({id:d.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},t)},a.setModified=function(t,i,o,d){if(u.trigger(t,"compositeModified",t),t.isModified=i,o&&t.parent&&a.setModified(t.parent,i,o,d),d)for(var b=0;b<t.composites.length;b++){var S=t.composites[b];a.setModified(S,i,o,d)}},a.add=function(t,i){var o=[].concat(i);u.trigger(t,"beforeAdd",{object:i});for(var b=0;b<o.length;b++){var S=o[b];switch(S.type){case"body":if(S.parent!==S){d.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}a.addBody(t,S);break;case"constraint":a.addConstraint(t,S);break;case"composite":a.addComposite(t,S);break;case"mouseConstraint":a.addConstraint(t,S.constraint)}}return u.trigger(t,"afterAdd",{object:i}),t},a.remove=function(t,i,o){var d=[].concat(i);u.trigger(t,"beforeRemove",{object:i});for(var b=0;b<d.length;b++){var S=d[b];switch(S.type){case"body":a.removeBody(t,S,o);break;case"constraint":a.removeConstraint(t,S,o);break;case"composite":a.removeComposite(t,S,o);break;case"mouseConstraint":a.removeConstraint(t,S.constraint)}}return u.trigger(t,"afterRemove",{object:i}),t},a.addComposite=function(t,i){return t.composites.push(i),i.parent=t,a.setModified(t,!0,!0,!1),t},a.removeComposite=function(t,i,o){var u=t.composites.indexOf(i);if(-1!==u&&(a.removeCompositeAt(t,u),a.setModified(t,!0,!0,!1)),o)for(var d=0;d<t.composites.length;d++)a.removeComposite(t.composites[d],i,!0);return t},a.removeCompositeAt=function(t,i){return t.composites.splice(i,1),a.setModified(t,!0,!0,!1),t},a.addBody=function(t,i){return t.bodies.push(i),a.setModified(t,!0,!0,!1),t},a.removeBody=function(t,i,o){var u=t.bodies.indexOf(i);if(-1!==u&&(a.removeBodyAt(t,u),a.setModified(t,!0,!0,!1)),o)for(var d=0;d<t.composites.length;d++)a.removeBody(t.composites[d],i,!0);return t},a.removeBodyAt=function(t,i){return t.bodies.splice(i,1),a.setModified(t,!0,!0,!1),t},a.addConstraint=function(t,i){return t.constraints.push(i),a.setModified(t,!0,!0,!1),t},a.removeConstraint=function(t,i,o){var u=t.constraints.indexOf(i);if(-1!==u&&a.removeConstraintAt(t,u),o)for(var d=0;d<t.composites.length;d++)a.removeConstraint(t.composites[d],i,!0);return t},a.removeConstraintAt=function(t,i){return t.constraints.splice(i,1),a.setModified(t,!0,!0,!1),t},a.clear=function(t,i,o){if(o)for(var u=0;u<t.composites.length;u++)a.clear(t.composites[u],i,!0);return i?t.bodies=t.bodies.filter((function(t){return t.isStatic})):t.bodies.length=0,t.constraints.length=0,t.composites.length=0,a.setModified(t,!0,!0,!1),t},a.allBodies=function(t){for(var i=[].concat(t.bodies),o=0;o<t.composites.length;o++)i=i.concat(a.allBodies(t.composites[o]));return i},a.allConstraints=function(t){for(var i=[].concat(t.constraints),o=0;o<t.composites.length;o++)i=i.concat(a.allConstraints(t.composites[o]));return i},a.allComposites=function(t){for(var i=[].concat(t.composites),o=0;o<t.composites.length;o++)i=i.concat(a.allComposites(t.composites[o]));return i},a.get=function(t,i,o){var u,d;switch(o){case"body":u=a.allBodies(t);break;case"constraint":u=a.allConstraints(t);break;case"composite":u=a.allComposites(t).concat(t)}return u?0===(d=u.filter((function(t){return t.id.toString()===i.toString()}))).length?null:d[0]:null},a.move=function(t,i,o){return a.remove(t,i),a.add(o,i),t},a.rebase=function(t){for(var i=a.allBodies(t).concat(a.allConstraints(t)).concat(a.allComposites(t)),o=0;o<i.length;o++)i[o].id=d.nextId();return a.setModified(t,!0,!0,!1),t},a.translate=function(t,i,o){for(var u=o?a.allBodies(t):t.bodies,d=0;d<u.length;d++)S.translate(u[d],i);return a.setModified(t,!0,!0,!1),t},a.rotate=function(t,i,o,u){for(var d=Math.cos(i),b=Math.sin(i),C=u?a.allBodies(t):t.bodies,M=0;M<C.length;M++){var P=C[M],R=P.position.x-o.x,O=P.position.y-o.y;S.setPosition(P,{x:o.x+(R*d-O*b),y:o.y+(R*b+O*d)}),S.rotate(P,i)}return a.setModified(t,!0,!0,!1),t},a.scale=function(t,i,o,u,d){for(var b=d?a.allBodies(t):t.bodies,C=0;C<b.length;C++){var M=b[C],P=M.position.x-u.x,R=M.position.y-u.y;S.setPosition(M,{x:u.x+P*i,y:u.y+R*o}),S.scale(M,i,o)}return a.setModified(t,!0,!0,!1),t},a.bounds=function(t){for(var i=a.allBodies(t),o=[],u=0;u<i.length;u+=1){var d=i[u];o.push(d.bounds.min,d.bounds.max)}return b.create(o)}},function(t,i){t.exports=function IsInLayerBounds(t,i,o){return t>=0&&t<o.width&&i>=0&&i<o.height}},function(t,i,o){var a=o(0),u=o(29),d=o(2),b=new a({initialize:function LayerData(t){void 0===t&&(t={}),this.name=d(t,"name","layer"),this.x=d(t,"x",0),this.y=d(t,"y",0),this.width=d(t,"width",0),this.height=d(t,"height",0),this.tileWidth=d(t,"tileWidth",0),this.tileHeight=d(t,"tileHeight",0),this.baseTileWidth=d(t,"baseTileWidth",this.tileWidth),this.baseTileHeight=d(t,"baseTileHeight",this.tileHeight),this.orientation=d(t,"orientation",u.ORTHOGONAL),this.widthInPixels=d(t,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=d(t,"heightInPixels",this.height*this.baseTileHeight),this.alpha=d(t,"alpha",1),this.visible=d(t,"visible",!0),this.properties=d(t,"properties",[]),this.indexes=d(t,"indexes",[]),this.collideIndexes=d(t,"collideIndexes",[]),this.callbacks=d(t,"callbacks",[]),this.bodies=d(t,"bodies",[]),this.data=d(t,"data",[]),this.tilemapLayer=d(t,"tilemapLayer",null),this.hexSideLength=d(t,"hexSideLength",0)}});t.exports=b},function(t,i,o){var a=o(0),u=o(29),d=o(2),b=new a({initialize:function MapData(t){void 0===t&&(t={}),this.name=d(t,"name","map"),this.width=d(t,"width",0),this.height=d(t,"height",0),this.infinite=d(t,"infinite",!1),this.tileWidth=d(t,"tileWidth",0),this.tileHeight=d(t,"tileHeight",0),this.widthInPixels=d(t,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=d(t,"heightInPixels",this.height*this.tileHeight),this.format=d(t,"format",null),this.orientation=d(t,"orientation",u.ORTHOGONAL),this.renderOrder=d(t,"renderOrder","right-down"),this.version=d(t,"version","1"),this.properties=d(t,"properties",{}),this.layers=d(t,"layers",[]),this.images=d(t,"images",[]),this.objects=d(t,"objects",{}),this.collision=d(t,"collision",{}),this.tilesets=d(t,"tilesets",[]),this.imageCollections=d(t,"imageCollections",[]),this.tiles=d(t,"tiles",[]),this.hexSideLength=d(t,"hexSideLength",0)}});t.exports=b},function(t,i,o){var a=new(o(0))({initialize:function Tileset(t,i,o,a,u,d,b,S){(void 0===o||o<=0)&&(o=32),(void 0===a||a<=0)&&(a=32),void 0===u&&(u=0),void 0===d&&(d=0),void 0===b&&(b={}),void 0===S&&(S={}),this.name=t,this.firstgid=i,this.tileWidth=o,this.tileHeight=a,this.tileMargin=u,this.tileSpacing=d,this.tileProperties=b,this.tileData=S,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function getTileProperties(t){return this.containsTileIndex(t)?this.tileProperties[t-this.firstgid]:null},getTileData:function getTileData(t){return this.containsTileIndex(t)?this.tileData[t-this.firstgid]:null},getTileCollisionGroup:function getTileCollisionGroup(t){var i=this.getTileData(t);return i&&i.objectgroup?i.objectgroup:null},containsTileIndex:function containsTileIndex(t){return t>=this.firstgid&&t<this.firstgid+this.total},getTileTextureCoordinates:function getTileTextureCoordinates(t){return this.containsTileIndex(t)?this.texCoordinates[t-this.firstgid]:null},setImage:function setImage(t){return this.image=t,this.glTexture=t.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function setTileSize(t,i){return void 0!==t&&(this.tileWidth=t),void 0!==i&&(this.tileHeight=i),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function setSpacing(t,i){return void 0!==t&&(this.tileMargin=t),void 0!==i&&(this.tileSpacing=i),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function updateTileData(t,i){var o=(i-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),a=(t-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);o%1==0&&a%1==0||console.warn("Image tile area not tile size multiple in: "+this.name),o=Math.floor(o),a=Math.floor(a),this.rows=o,this.columns=a,this.total=o*a,this.texCoordinates.length=0;for(var u=this.tileMargin,d=this.tileMargin,b=0;b<this.rows;b++){for(var S=0;S<this.columns;S++)this.texCoordinates.push({x:u,y:d}),u+=this.tileWidth+this.tileSpacing;u=this.tileMargin,d+=this.tileHeight+this.tileSpacing}return this}});t.exports=a},function(t,i){t.exports={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12}},function(t,i){t.exports=function Equal(t,i,o){return void 0===o&&(o=1e-4),Math.abs(t-i)<o}},function(t,i,o){var a=o(0),u=o(11),d=o(15),b=o(1068),S=new a({Extends:d,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.ScrollFactor,u.Size,u.TextureCrop,u.Tint,u.Transform,u.Visible,b],initialize:function Image(t,i,o,a,u){d.call(this,t,"Image"),this._crop=this.resetCropObject(),this.setTexture(a,u),this.setPosition(i,o),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});t.exports=S},function(t,i){t.exports=function HasValue(t,i){return t.hasOwnProperty(i)}},function(t,i,o){var a=o(77);t.exports=function Merge(t,i){var o=a(t);for(var u in i)o.hasOwnProperty(u)||(o[u]=i[u]);return o}},function(t,i,o){var a={};t.exports=a;var u=o(64),d=o(83),b=o(165),S=o(84),C=o(271),M=o(32);a._warming=.4,a._torqueDampen=1,a._minLength=1e-6,a.create=function(t){var i=t;i.bodyA&&!i.pointA&&(i.pointA={x:0,y:0}),i.bodyB&&!i.pointB&&(i.pointB={x:0,y:0});var o=i.bodyA?d.add(i.bodyA.position,i.pointA):i.pointA,a=i.bodyB?d.add(i.bodyB.position,i.pointB):i.pointB,u=d.magnitude(d.sub(o,a));i.length=void 0!==i.length?i.length:u,i.id=i.id||M.nextId(),i.label=i.label||"Constraint",i.type="constraint",i.stiffness=i.stiffness||(i.length>0?1:.7),i.damping=i.damping||0,i.angularStiffness=i.angularStiffness||0,i.angleA=i.bodyA?i.bodyA.angle:i.angleA,i.angleB=i.bodyB?i.bodyB.angle:i.angleB,i.plugin={};var b={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return 0===i.length&&i.stiffness>.1?(b.type="pin",b.anchors=!1):i.stiffness<.9&&(b.type="spring"),i.render=M.extend(b,i.render),i},a.preSolveAll=function(t){for(var i=0;i<t.length;i+=1){var o=t[i],a=o.constraintImpulse;o.isStatic||0===a.x&&0===a.y&&0===a.angle||(o.position.x+=a.x,o.position.y+=a.y,o.angle+=a.angle)}},a.solveAll=function(t,i){for(var o=0;o<t.length;o+=1){var u=t[o],d=!u.bodyA||u.bodyA&&u.bodyA.isStatic,b=!u.bodyB||u.bodyB&&u.bodyB.isStatic;(d||b)&&a.solve(t[o],i)}for(o=0;o<t.length;o+=1)d=!(u=t[o]).bodyA||u.bodyA&&u.bodyA.isStatic,b=!u.bodyB||u.bodyB&&u.bodyB.isStatic,d||b||a.solve(t[o],i)},a.solve=function(t,i){var o=t.bodyA,u=t.bodyB,b=t.pointA,S=t.pointB;if(o||u){o&&!o.isStatic&&(d.rotate(b,o.angle-t.angleA,b),t.angleA=o.angle),u&&!u.isStatic&&(d.rotate(S,u.angle-t.angleB,S),t.angleB=u.angle);var C=b,M=S;if(o&&(C=d.add(o.position,b)),u&&(M=d.add(u.position,S)),C&&M){var P=d.sub(C,M),R=d.magnitude(P);R<a._minLength&&(R=a._minLength);var O,B,N,Y,G,X=(R-t.length)/R,U=t.stiffness<1?t.stiffness*i:t.stiffness,z=d.mult(P,X*U),V=(o?o.inverseMass:0)+(u?u.inverseMass:0),W=V+((o?o.inverseInertia:0)+(u?u.inverseInertia:0));if(t.damping){var H=d.create();N=d.div(P,R),G=d.sub(u&&d.sub(u.position,u.positionPrev)||H,o&&d.sub(o.position,o.positionPrev)||H),Y=d.dot(N,G)}o&&!o.isStatic&&(B=o.inverseMass/V,o.constraintImpulse.x-=z.x*B,o.constraintImpulse.y-=z.y*B,o.position.x-=z.x*B,o.position.y-=z.y*B,t.damping&&(o.positionPrev.x-=t.damping*N.x*Y*B,o.positionPrev.y-=t.damping*N.y*Y*B),O=d.cross(b,z)/W*a._torqueDampen*o.inverseInertia*(1-t.angularStiffness),o.constraintImpulse.angle-=O,o.angle-=O),u&&!u.isStatic&&(B=u.inverseMass/V,u.constraintImpulse.x+=z.x*B,u.constraintImpulse.y+=z.y*B,u.position.x+=z.x*B,u.position.y+=z.y*B,t.damping&&(u.positionPrev.x+=t.damping*N.x*Y*B,u.positionPrev.y+=t.damping*N.y*Y*B),O=d.cross(S,z)/W*a._torqueDampen*u.inverseInertia*(1-t.angularStiffness),u.constraintImpulse.angle+=O,u.angle+=O)}}},a.postSolveAll=function(t){for(var i=0;i<t.length;i++){var o=t[i],M=o.constraintImpulse;if(!(o.isStatic||0===M.x&&0===M.y&&0===M.angle)){b.set(o,!1);for(var P=0;P<o.parts.length;P++){var R=o.parts[P];u.translate(R.vertices,M),P>0&&(R.position.x+=M.x,R.position.y+=M.y),0!==M.angle&&(u.rotate(R.vertices,M.angle,o.position),C.rotate(R.axes,M.angle),P>0&&d.rotateAbout(R.position,M.angle,o.position,R.position)),S.update(R.bounds,R.vertices,o.velocity)}M.angle*=a._warming,M.x*=a._warming,M.y*=a._warming}}},a.pointAWorld=function(t){return{x:(t.bodyA?t.bodyA.position.x:0)+t.pointA.x,y:(t.bodyA?t.bodyA.position.y:0)+t.pointA.y}},a.pointBWorld=function(t){return{x:(t.bodyB?t.bodyB.position.x:0)+t.pointB.x,y:(t.bodyB?t.bodyB.position.y:0)+t.pointB.y}}},function(t,i,o){var a=o(35),u=o(65),d=o(66),b=o(0),S=o(11),C=o(15),M=o(10),P=o(57),R=new b({Extends:C,Mixins:[S.Depth,S.GetBounds,S.Origin,S.Transform,S.ScrollFactor,S.Visible],initialize:function Zone(t,i,o,u,d){void 0===u&&(u=1),void 0===d&&(d=u),C.call(this,t,"Zone"),this.setPosition(i,o),this.width=u,this.height=d,this.blendMode=a.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function get(){return this.scaleX*this.width},set:function set(t){this.scaleX=t/this.width}},displayHeight:{get:function get(){return this.scaleY*this.height},set:function set(t){this.scaleY=t/this.height}},setSize:function setSize(t,i,o){void 0===o&&(o=!0),this.width=t,this.height=i,this.updateDisplayOrigin();var a=this.input;return o&&a&&!a.customHitArea&&(a.hitArea.width=t,a.hitArea.height=i),this},setDisplaySize:function setDisplaySize(t,i){return this.displayWidth=t,this.displayHeight=i,this},setCircleDropZone:function setCircleDropZone(t){return this.setDropZone(new u(0,0,t),d)},setRectangleDropZone:function setRectangleDropZone(t,i){return this.setDropZone(new M(0,0,t,i),P)},setDropZone:function setDropZone(t,i){return void 0===t?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(t,i,!0),this},setAlpha:function setAlpha(){},setBlendMode:function setBlendMode(){},renderCanvas:function renderCanvas(t,i,o){o.addToRenderList(i)},renderWebGL:function renderWebGL(t,i,o){o.addToRenderList(i)}});t.exports=R},function(t,i){t.exports=function Perimeter(t){return 2*(t.width+t.height)}},function(t,i){t.exports=function Shuffle(t){for(var i=t.length-1;i>0;i--){var o=Math.floor(Math.random()*(i+1)),a=t[i];t[i]=t[o],t[o]=a}return t}},function(t,i,o){t.exports={ADD_ANIMATION:o(724),ANIMATION_COMPLETE:o(725),ANIMATION_COMPLETE_KEY:o(726),ANIMATION_REPEAT:o(727),ANIMATION_RESTART:o(728),ANIMATION_START:o(729),ANIMATION_STOP:o(730),ANIMATION_UPDATE:o(731),PAUSE_ALL:o(732),REMOVE_ANIMATION:o(733),RESUME_ALL:o(734)}},function(t,i,o){var a=o(0),u=o(11),d=o(36),b=o(9),S=o(37),C=o(10),M=o(25),P=o(187),R=o(3),O=new a({Extends:b,Mixins:[u.Alpha,u.Visible],initialize:function BaseCamera(t,i,o,a){void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),b.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new C,this.dirty=!0,this._x=t,this._y=i,this._width=o,this._height=a,this._bounds=new C,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new M,this.transparent=!0,this.backgroundColor=P("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new R(o/2,a/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function addToRenderList(t){this.renderList.push(t)},setOrigin:function setOrigin(t,i){return void 0===t&&(t=.5),void 0===i&&(i=t),this.originX=t,this.originY=i,this},getScroll:function getScroll(t,i,o){void 0===o&&(o=new R);var a=.5*this.width,u=.5*this.height;return o.x=t-a,o.y=i-u,this.useBounds&&(o.x=this.clampX(o.x),o.y=this.clampY(o.y)),o},centerOnX:function centerOnX(t){var i=.5*this.width;return this.midPoint.x=t,this.scrollX=t-i,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function centerOnY(t){var i=.5*this.height;return this.midPoint.y=t,this.scrollY=t-i,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function centerOn(t,i){return this.centerOnX(t),this.centerOnY(i),this},centerToBounds:function centerToBounds(){if(this.useBounds){var t=this._bounds,i=.5*this.width,o=.5*this.height;this.midPoint.set(t.centerX,t.centerY),this.scrollX=t.centerX-i,this.scrollY=t.centerY-o}return this},centerToSize:function centerToSize(){return this.scrollX=.5*this.width,this.scrollY=.5*this.height,this},cull:function cull(t){if(this.disableCull)return t;var i=this.matrix.matrix,o=i[0],a=i[1],u=i[2],d=i[3],b=o*d-a*u;if(!b)return t;var S=i[4],C=i[5],M=this.scrollX,P=this.scrollY,R=this.width,O=this.height,B=this.y,N=B+O,Y=this.x,G=Y+R,X=this.culledObjects,U=t.length;b=1/b,X.length=0;for(var z=0;z<U;++z){var V=t[z];if(V.hasOwnProperty("width")&&!V.parentContainer){var W=V.width,H=V.height,j=V.x-M*V.scrollFactorX-W*V.originX,q=V.y-P*V.scrollFactorY-H*V.originY;(j+W)*o+(q+H)*u+S>Y&&j*o+q*u+S<G&&(j+W)*a+(q+H)*d+C>B&&j*a+q*d+C<N&&X.push(V)}else X.push(V)}return X},getWorldPoint:function getWorldPoint(t,i,o){void 0===o&&(o=new R);var a=this.matrix.matrix,u=a[0],d=a[1],b=a[2],S=a[3],C=a[4],M=a[5],P=u*S-d*b;if(!P)return o.x=t,o.y=i,o;var O=S*(P=1/P),B=-d*P,N=-b*P,Y=u*P,G=(b*M-S*C)*P,X=(d*C-u*M)*P,U=Math.cos(this.rotation),z=Math.sin(this.rotation),V=this.zoomX,W=this.zoomY,H=this.scrollX,j=this.scrollY,q=t+(H*U-j*z)*V,Z=i+(H*z+j*U)*W;return o.x=q*O+Z*N+G,o.y=q*B+Z*Y+X,o},ignore:function ignore(t){var i=this.id;Array.isArray(t)||(t=[t]);for(var o=0;o<t.length;o++){var a=t[o];Array.isArray(a)?this.ignore(a):a.isParent?this.ignore(a.getChildren()):a.cameraFilter|=i}return this},preRender:function preRender(){this.renderList.length=0;var t=this.width,i=this.height,o=.5*t,a=.5*i,u=this.zoomX,d=this.zoomY,b=this.matrix,S=t*this.originX,C=i*this.originY,M=this.scrollX,P=this.scrollY;this.useBounds&&(M=this.clampX(M),P=this.clampY(P)),this.roundPixels&&(S=Math.round(S),C=Math.round(C)),this.scrollX=M,this.scrollY=P;var R=M+o,O=P+a;this.midPoint.set(R,O);var B=t/u,N=i/d;this.worldView.setTo(R-B/2,O-N/2,B,N),b.applyITRS(this.x+S,this.y+C,this.rotation,u,d),b.translate(-S,-C)},clampX:function clampX(t){var i=this._bounds,o=this.displayWidth,a=i.x+(o-this.width)/2,u=Math.max(a,a+i.width-o);return t<a?t=a:t>u&&(t=u),t},clampY:function clampY(t){var i=this._bounds,o=this.displayHeight,a=i.y+(o-this.height)/2,u=Math.max(a,a+i.height-o);return t<a?t=a:t>u&&(t=u),t},removeBounds:function removeBounds(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function setAngle(t){return void 0===t&&(t=0),this.rotation=d(t),this},setBackgroundColor:function setBackgroundColor(t){return void 0===t&&(t="rgba(0,0,0,0)"),this.backgroundColor=P(t),this.transparent=0===this.backgroundColor.alpha,this},setBounds:function setBounds(t,i,o,a,u){return void 0===u&&(u=!1),this._bounds.setTo(t,i,o,a),this.dirty=!0,this.useBounds=!0,u?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function getBounds(t){void 0===t&&(t=new C);var i=this._bounds;return t.setTo(i.x,i.y,i.width,i.height),t},setName:function setName(t){return void 0===t&&(t=""),this.name=t,this},setPosition:function setPosition(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setRotation:function setRotation(t){return void 0===t&&(t=0),this.rotation=t,this},setRoundPixels:function setRoundPixels(t){return this.roundPixels=t,this},setScene:function setScene(t){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=t;var i=t.sys;return this.sceneManager=i.game.scene,this.scaleManager=i.scale,this.cameraManager=i.cameras,this.updateSystem(),this},setScroll:function setScroll(t,i){return void 0===i&&(i=t),this.scrollX=t,this.scrollY=i,this},setSize:function setSize(t,i){return void 0===i&&(i=t),this.width=t,this.height=i,this},setViewport:function setViewport(t,i,o,a){return this.x=t,this.y=i,this.width=o,this.height=a,this},setZoom:function setZoom(t,i){return void 0===t&&(t=1),void 0===i&&(i=t),0===t&&(t=.001),0===i&&(i=.001),this.zoomX=t,this.zoomY=i,this},setMask:function setMask(t,i){return void 0===i&&(i=!0),this.mask=t,this._maskCamera=i?this.cameraManager.default:this,this},clearMask:function clearMask(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function toJSON(){var t={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(t.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),t},update:function update(){},updateSystem:function updateSystem(){if(this.scaleManager){var t=0!==this._x||0!==this._y||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,i=this.sceneManager;t&&!this._customViewport?i.customViewports++:!t&&this._customViewport&&i.customViewports--,this.dirty=!0,this._customViewport=t}},destroy:function destroy(){this.emit(S.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function get(){return this._x},set:function set(t){this._x=t,this.updateSystem()}},y:{get:function get(){return this._y},set:function set(t){this._y=t,this.updateSystem()}},width:{get:function get(){return this._width},set:function set(t){this._width=t,this.updateSystem()}},height:{get:function get(){return this._height},set:function set(t){this._height=t,this.updateSystem()}},scrollX:{get:function get(){return this._scrollX},set:function set(t){this._scrollX=t,this.dirty=!0}},scrollY:{get:function get(){return this._scrollY},set:function set(t){this._scrollY=t,this.dirty=!0}},zoom:{get:function get(){return(this._zoomX+this._zoomY)/2},set:function set(t){this._zoomX=t,this._zoomY=t,this.dirty=!0}},zoomX:{get:function get(){return this._zoomX},set:function set(t){this._zoomX=t,this.dirty=!0}},zoomY:{get:function get(){return this._zoomY},set:function set(t){this._zoomY=t,this.dirty=!0}},rotation:{get:function get(){return this._rotation},set:function set(t){this._rotation=t,this.dirty=!0}},centerX:{get:function get(){return this.x+.5*this.width}},centerY:{get:function get(){return this.y+.5*this.height}},displayWidth:{get:function get(){return this.width/this.zoomX}},displayHeight:{get:function get(){return this.height/this.zoomY}}});t.exports=O},function(t,i,o){var a=o(334),u=o(335),d=o(336),b=o(337),S=o(338),C=o(339),M=o(340),P=o(341),R=o(342),O=o(343),B=o(344),N=o(345);t.exports={Power0:M,Power1:P.Out,Power2:b.Out,Power3:R.Out,Power4:O.Out,Linear:M,Quad:P.Out,Cubic:b.Out,Quart:R.Out,Quint:O.Out,Sine:B.Out,Expo:C.Out,Circ:d.Out,Elastic:S.Out,Back:a.Out,Bounce:u.Out,Stepped:N,"Quad.easeIn":P.In,"Cubic.easeIn":b.In,"Quart.easeIn":R.In,"Quint.easeIn":O.In,"Sine.easeIn":B.In,"Expo.easeIn":C.In,"Circ.easeIn":d.In,"Elastic.easeIn":S.In,"Back.easeIn":a.In,"Bounce.easeIn":u.In,"Quad.easeOut":P.Out,"Cubic.easeOut":b.Out,"Quart.easeOut":R.Out,"Quint.easeOut":O.Out,"Sine.easeOut":B.Out,"Expo.easeOut":C.Out,"Circ.easeOut":d.Out,"Elastic.easeOut":S.Out,"Back.easeOut":a.Out,"Bounce.easeOut":u.Out,"Quad.easeInOut":P.InOut,"Cubic.easeInOut":b.InOut,"Quart.easeInOut":R.InOut,"Quint.easeInOut":O.InOut,"Sine.easeInOut":B.InOut,"Expo.easeInOut":C.InOut,"Circ.easeInOut":d.InOut,"Elastic.easeInOut":S.InOut,"Back.easeInOut":a.InOut,"Bounce.easeInOut":u.InOut}},function(t,i){t.exports=function Linear(t,i,o){return(i-t)*o+t}},function(t,i,o){var a=o(105),u={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};t.exports=function init(){var t=navigator.userAgent;return/Edge\/\d+/.test(t)?u.edge=!0:/Chrome\/(\d+)/.test(t)&&!a.windowsPhone?(u.chrome=!0,u.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(t)?(u.firefox=!0,u.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(t)&&a.iOS?u.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(t)?(u.ie=!0,u.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(t)?u.opera=!0:/Safari/.test(t)&&!a.windowsPhone?u.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(t)&&(u.ie=!0,u.trident=!0,u.tridentVersion=parseInt(RegExp.$1,10),u.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(t)&&(u.silk=!0),u}()},function(t,i){t.exports=function FloatBetween(t,i){return Math.random()*(i-t)+t}},function(t,i){t.exports=function IsSizePowerOfTwo(t,i){return t>0&&0==(t&t-1)&&i>0&&0==(i&i-1)}},function(t,i){t.exports=function SnapCeil(t,i,o,a){return void 0===o&&(o=0),0===i?t:(t-=o,t=i*Math.ceil(t/i),a?(o+t)/i:o+t)}},function(t,i,o){var a=new(o(0))({initialize:function Vector4(t,i,o,a){this.x=0,this.y=0,this.z=0,this.w=0,"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=o||0,this.w=a||0)},clone:function clone(){return new a(this.x,this.y,this.z,this.w)},copy:function copy(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this.w=t.w||0,this},equals:function equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},set:function set(t,i,o,a){return"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=o||0,this.w=a||0),this},add:function add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this.w+=t.w||0,this},subtract:function subtract(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this.w-=t.w||0,this},scale:function scale(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function length(){var t=this.x,i=this.y,o=this.z,a=this.w;return Math.sqrt(t*t+i*i+o*o+a*a)},lengthSq:function lengthSq(){var t=this.x,i=this.y,o=this.z,a=this.w;return t*t+i*i+o*o+a*a},normalize:function normalize(){var t=this.x,i=this.y,o=this.z,a=this.w,u=t*t+i*i+o*o+a*a;return u>0&&(u=1/Math.sqrt(u),this.x=t*u,this.y=i*u,this.z=o*u,this.w=a*u),this},dot:function dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function lerp(t,i){void 0===i&&(i=0);var o=this.x,a=this.y,u=this.z,d=this.w;return this.x=o+i*(t.x-o),this.y=a+i*(t.y-a),this.z=u+i*(t.z-u),this.w=d+i*(t.w-d),this},multiply:function multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this.w*=t.w||1,this},divide:function divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this.w/=t.w||1,this},distance:function distance(t){var i=t.x-this.x,o=t.y-this.y,a=t.z-this.z||0,u=t.w-this.w||0;return Math.sqrt(i*i+o*o+a*a+u*u)},distanceSq:function distanceSq(t){var i=t.x-this.x,o=t.y-this.y,a=t.z-this.z||0,u=t.w-this.w||0;return i*i+o*o+a*a+u*u},negate:function negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function transformMat4(t){var i=this.x,o=this.y,a=this.z,u=this.w,d=t.val;return this.x=d[0]*i+d[4]*o+d[8]*a+d[12]*u,this.y=d[1]*i+d[5]*o+d[9]*a+d[13]*u,this.z=d[2]*i+d[6]*o+d[10]*a+d[14]*u,this.w=d[3]*i+d[7]*o+d[11]*a+d[15]*u,this},transformQuat:function transformQuat(t){var i=this.x,o=this.y,a=this.z,u=t.x,d=t.y,b=t.z,S=t.w,C=S*i+d*a-b*o,M=S*o+b*i-u*a,P=S*a+u*o-d*i,R=-u*i-d*o-b*a;return this.x=C*S+R*-u+M*-b-P*-d,this.y=M*S+R*-d+P*-u-C*-b,this.z=P*S+R*-b+C*-d-M*-u,this},reset:function reset(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});a.prototype.sub=a.prototype.subtract,a.prototype.mul=a.prototype.multiply,a.prototype.div=a.prototype.divide,a.prototype.dist=a.prototype.distance,a.prototype.distSq=a.prototype.distanceSq,a.prototype.len=a.prototype.length,a.prototype.lenSq=a.prototype.lengthSq,t.exports=a},function(t,i,o){var a=o(0),u=o(91),d=new a({initialize:function RenderTarget(t,i,o,a,u,d,b){void 0===a&&(a=1),void 0===u&&(u=0),void 0===d&&(d=!0),void 0===b&&(b=!1),this.renderer=t,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=a,this.minFilter=u,this.autoClear=d,this.autoResize=!1,this.resize(i,o),b&&this.setAutoResize(!0)},setAutoResize:function setAutoResize(t){return t&&!this.autoResize?(this.renderer.on(u.RESIZE,this.resize,this),this.autoResize=!0):!t&&this.autoResize&&(this.renderer.off(u.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function resize(t,i){var o=t*this.scale,a=i*this.scale;if(o!==this.width||a!==this.height){var u=this.renderer;u.deleteFramebuffer(this.framebuffer),u.deleteTexture(this.texture),t*=this.scale,i*=this.scale,(t=Math.round(t))<=0&&(t=1),(i=Math.round(i))<=0&&(i=1),this.texture=u.createTextureFromSource(null,t,i,this.minFilter),this.framebuffer=u.createFramebuffer(t,i,this.texture,!1),this.width=t,this.height=i}return this},bind:function bind(t,i,o){if(void 0===t&&(t=!1),t&&this.renderer.flush(),i&&o&&this.resize(i,o),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),t&&this.adjustViewport(),this.autoClear){var a=this.renderer.gl;a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT)}},adjustViewport:function adjustViewport(){var t=this.renderer.gl;t.viewport(0,0,this.width,this.height),t.disable(t.SCISSOR_TEST)},clear:function clear(){var t=this.renderer,i=t.gl;t.pushFramebuffer(this.framebuffer),i.disable(i.SCISSOR_TEST),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),t.popFramebuffer(),t.resetScissor()},unbind:function unbind(t){void 0===t&&(t=!1);var i=this.renderer;return t&&i.flush(),i.popFramebuffer()},destroy:function destroy(){var t=this.renderer;t.deleteFramebuffer(this.framebuffer),t.deleteTexture(this.texture),t.off(u.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});t.exports=d},function(t,i){t.exports=function AddToDOM(t,i){var o;if(i)"string"==typeof i?o=document.getElementById(i):"object"===_typeof(i)&&1===i.nodeType&&(o=i);else if(t.parentElement||null===i)return t;return o||(o=document.body),o.appendChild(t),t}},function(t,i){t.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175}},function(t,i){t.exports={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9}},function(t,i,o){var a=o(0),u=o(77),d=o(9),b=o(70),S=o(22),C=o(1),M=o(207),P=o(428),R=new a({Extends:d,initialize:function BaseSoundManager(t){d.call(this),this.game=t,this.jsonCache=t.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,t.events.on(S.BLUR,this.onGameBlur,this),t.events.on(S.FOCUS,this.onGameFocus,this),t.events.on(S.PRE_STEP,this.update,this),t.events.once(S.DESTROY,this.destroy,this)},add:C,addAudioSprite:function addAudioSprite(t,i){void 0===i&&(i={});var o=this.add(t,i);for(var a in o.spritemap=this.jsonCache.get(t).spritemap,o.spritemap)if(o.spritemap.hasOwnProperty(a)){var d=u(i),b=o.spritemap[a];d.loop=!!b.hasOwnProperty("loop")&&b.loop,o.addMarker({name:a,start:b.start,duration:b.end-b.start,config:d})}return o},get:function get(t){return P(this.sounds,"key",t)},getAll:function getAll(t){return M(this.sounds,"key",t)},play:function play(t,i){var o=this.add(t);return o.once(b.COMPLETE,o.destroy,o),i?i.name?(o.addMarker(i),o.play(i.name)):o.play(i):o.play()},playAudioSprite:function playAudioSprite(t,i,o){var a=this.addAudioSprite(t);return a.once(b.COMPLETE,a.destroy,a),a.play(i,o)},remove:function remove(t){var i=this.sounds.indexOf(t);return-1!==i&&(t.destroy(),this.sounds.splice(i,1),!0)},removeAll:function removeAll(){this.sounds.forEach((function(t){t.destroy()})),this.sounds.length=0},removeByKey:function removeByKey(t){for(var i=0,o=this.sounds.length-1;o>=0;o--){var a=this.sounds[o];a.key===t&&(a.destroy(),this.sounds.splice(o,1),i++)}return i},pauseAll:function pauseAll(){this.forEachActiveSound((function(t){t.pause()})),this.emit(b.PAUSE_ALL,this)},resumeAll:function resumeAll(){this.forEachActiveSound((function(t){t.resume()})),this.emit(b.RESUME_ALL,this)},stopAll:function stopAll(){this.forEachActiveSound((function(t){t.stop()})),this.emit(b.STOP_ALL,this)},stopByKey:function stopByKey(t){var i=0;return this.getAll(t).forEach((function(t){t.stop()&&i++})),i},unlock:C,onBlur:C,onFocus:C,onGameBlur:function onGameBlur(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function onGameFocus(){this.pauseOnBlur&&this.onFocus()},update:function update(t,i){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(b.UNLOCKED,this));for(var o=this.sounds.length-1;o>=0;o--)this.sounds[o].pendingRemove&&this.sounds.splice(o,1);this.sounds.forEach((function(o){o.update(t,i)}))},destroy:function destroy(){this.game.events.off(S.BLUR,this.onGameBlur,this),this.game.events.off(S.FOCUS,this.onGameFocus,this),this.game.events.off(S.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function forEachActiveSound(t,i){var o=this;this.sounds.forEach((function(a,u){a&&!a.pendingRemove&&t.call(i||o,a,u,o.sounds)}))},setRate:function setRate(t){return this.rate=t,this},rate:{get:function get(){return this._rate},set:function set(t){this._rate=t,this.forEachActiveSound((function(t){t.calculateRate()})),this.emit(b.GLOBAL_RATE,this,t)}},setDetune:function setDetune(t){return this.detune=t,this},detune:{get:function get(){return this._detune},set:function set(t){this._detune=t,this.forEachActiveSound((function(t){t.calculateRate()})),this.emit(b.GLOBAL_DETUNE,this,t)}}});t.exports=R},function(t,i,o){var a=o(0),u=o(9),d=o(70),b=o(17),S=o(1),C=new a({Extends:u,initialize:function BaseSound(t,i,o){u.call(this),this.manager=t,this.key=i,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=b(this.config,o),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function addMarker(t){return!(!t||!t.name||"string"!=typeof t.name||(this.markers[t.name]?(console.error("addMarker "+t.name+" already exists in Sound"),1):(t=b(!0,{name:"",start:0,duration:this.totalDuration-(t.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},t),this.markers[t.name]=t,0)))},updateMarker:function updateMarker(t){return!(!t||!t.name||"string"!=typeof t.name||(this.markers[t.name]?(this.markers[t.name]=b(!0,this.markers[t.name],t),0):(console.warn("Audio Marker: "+t.name+" missing in Sound: "+this.key),1)))},removeMarker:function removeMarker(t){var i=this.markers[t];return i?(this.markers[t]=null,i):null},play:function play(t,i){if(void 0===t&&(t=""),"object"===_typeof(t)&&(i=t,t=""),"string"!=typeof t)return!1;if(t){if(!this.markers[t])return console.warn("Marker: "+t+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[t],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}else this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;return this.resetConfig(),this.currentConfig=b(this.currentConfig,i),this.isPlaying=!0,this.isPaused=!1,!0},pause:function pause(){return!(this.isPaused||!this.isPlaying||(this.isPlaying=!1,this.isPaused=!0,0))},resume:function resume(){return!(!this.isPaused||this.isPlaying||(this.isPlaying=!0,this.isPaused=!1,0))},stop:function stop(){return!(!this.isPaused&&!this.isPlaying||(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),0))},applyConfig:function applyConfig(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function resetConfig(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:S,calculateRate:function calculateRate(){var t=this.currentConfig.detune+this.manager.detune,i=Math.pow(1.0005777895065548,t);this.totalRate=this.currentConfig.rate*this.manager.rate*i},destroy:function destroy(){this.pendingRemove||(this.emit(d.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});t.exports=C},function(t,i,o){var a=o(209),u=o(435);t.exports=function RotateMatrix(t,i){if(void 0===i&&(i=90),!a(t))return null;if("string"!=typeof i&&(i=(i%360+360)%360),90===i||-270===i||"rotateLeft"===i)(t=u(t)).reverse();else if(-90===i||270===i||"rotateRight"===i)t.reverse(),t=u(t);else if(180===Math.abs(i)||"rotate180"===i){for(var o=0;o<t.length;o++)t[o].reverse();t.reverse()}return t}},function(t,i,o){var a=o(0),u=o(18),d=o(11),b=o(15),S=o(1043),C=o(1044),M=o(212),P=o(10),R=o(1045),O=new a({Extends:b,Mixins:[d.Alpha,d.BlendMode,d.Depth,d.Mask,d.Origin,d.Pipeline,d.ScrollFactor,d.Texture,d.Tint,d.Transform,d.Visible,R],initialize:function BitmapText(t,i,o,a,u,d,C){void 0===u&&(u=""),void 0===C&&(C=0),b.call(this,t,"BitmapText"),this.font=a;var M=this.scene.sys.cache.bitmapFont.get(a);M||console.warn("Invalid BitmapText key: "+a),this.fontData=M.data,this._text="",this._fontSize=d||this.fontData.size,this._letterSpacing=0,this._align=C,this._bounds=S(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=M.fromAtlas,this.setTexture(M.texture,M.frame),this.setPosition(i,o),this.setOrigin(0,0),this.initPipeline(),this.setText(u)},setLeftAlign:function setLeftAlign(){return this._align=O.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function setCenterAlign(){return this._align=O.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function setRightAlign(){return this._align=O.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function setFontSize(t){return this._fontSize=t,this._dirty=!0,this},setLetterSpacing:function setLetterSpacing(t){return void 0===t&&(t=0),this._letterSpacing=t,this._dirty=!0,this},setText:function setText(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this.text&&(this._text=t.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function setDropShadow(t,i,o,a){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=.5),this.dropShadowX=t,this.dropShadowY=i,this.dropShadowColor=o,this.dropShadowAlpha=a,this},setCharacterTint:function setCharacterTint(t,i,o,a,d,b,S){void 0===t&&(t=0),void 0===i&&(i=1),void 0===o&&(o=!1),void 0===a&&(a=-1),void 0===d&&(d=a,b=a,S=a);var C=this.text.length;-1===i&&(i=C),t<0&&(t=C+t),t=u(t,0,C-1);for(var M=u(t+i,t,C),P=this.charColors,R=t;R<M;R++){var O=P[R];if(-1===a)P[R]=null;else{var B=o?1:0;O?(O.tintEffect=B,O.tintTL=a,O.tintTR=d,O.tintBL=b,O.tintBR=S):P[R]={tintEffect:B,tintTL:a,tintTR:d,tintBL:b,tintBR:S}}}return this},setWordTint:function setWordTint(t,i,o,a,u,d,b){void 0===i&&(i=1);for(var S=this.getTextBounds().words,C="number"==typeof t,M=0,P=0;P<S.length;P++){var R=S[P];if((C&&P===t||!C&&R.word===t)&&(this.setCharacterTint(R.i,R.word.length,o,a,u,d,b),++M===i))return this}return this},getTextBounds:function getTextBounds(t){var i=this._bounds;return(this._dirty||t||this.scaleX!==i.scaleX||this.scaleY!==i.scaleY)&&(S(this,t,!0,i),this._dirty=!1),i},getCharacterAt:function getCharacterAt(t,i,o){for(var a=this.getLocalPoint(t,i,null,o),u=this.getTextBounds().characters,d=new P,b=0;b<u.length;b++){var S=u[b];if(d.setTo(S.x,S.t,S.r-S.x,S.b),d.contains(a.x,a.y))return S}return null},updateDisplayOrigin:function updateDisplayOrigin(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function setFont(t,i,o){if(void 0===i&&(i=this._fontSize),void 0===o&&(o=this._align),t!==this.font){var a=this.scene.sys.cache.bitmapFont.get(t);a&&(this.font=t,this.fontData=a.data,this._fontSize=i,this._align=o,this.fromAtlas=!0===a.fromAtlas,this.setTexture(a.texture,a.frame),S(this,!1,!0,this._bounds))}return this},setMaxWidth:function setMaxWidth(t,i){return this._maxWidth=t,this._dirty=!0,void 0!==i&&(this.wordWrapCharCode=i),this},align:{set:function set(t){this._align=t,this._dirty=!0},get:function get(){return this._align}},text:{set:function set(t){this.setText(t)},get:function get(){return this._text}},fontSize:{set:function set(t){this._fontSize=t,this._dirty=!0},get:function get(){return this._fontSize}},letterSpacing:{set:function set(t){this._letterSpacing=t,this._dirty=!0},get:function get(){return this._letterSpacing}},maxWidth:{set:function set(t){this._maxWidth=t,this._dirty=!0},get:function get(){return this._maxWidth}},width:{get:function get(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function get(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function toJSON(){var t=d.ToJSON(this),i={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return t.data=i,t},preDestroy:function preDestroy(){this.charColors.length=0,this._bounds=null,this.fontData=null}});O.ALIGN_LEFT=0,O.ALIGN_CENTER=1,O.ALIGN_RIGHT=2,O.ParseFromAtlas=C,O.ParseXMLBitmapFont=M,t.exports=O},function(t,i,o){var a=new(o(0))({initialize:function Set(t){if(this.entries=[],Array.isArray(t))for(var i=0;i<t.length;i++)this.set(t[i])},set:function set(t){return-1===this.entries.indexOf(t)&&this.entries.push(t),this},get:function get(t,i){for(var o=0;o<this.entries.length;o++){var a=this.entries[o];if(a[t]===i)return a}},getArray:function getArray(){return this.entries.slice(0)},delete:function _delete(t){var i=this.entries.indexOf(t);return i>-1&&this.entries.splice(i,1),this},dump:function dump(){console.group("Set");for(var t=0;t<this.entries.length;t++){var i=this.entries[t];console.log(i)}console.groupEnd()},each:function each(t,i){var o,a=this.entries.slice(),u=a.length;if(i)for(o=0;o<u&&!1!==t.call(i,a[o],o);o++);else for(o=0;o<u&&!1!==t(a[o],o);o++);return this},iterate:function iterate(t,i){var o,a=this.entries.length;if(i)for(o=0;o<a&&!1!==t.call(i,this.entries[o],o);o++);else for(o=0;o<a&&!1!==t(this.entries[o],o);o++);return this},iterateLocal:function iterateLocal(t){var i,o=[];for(i=1;i<arguments.length;i++)o.push(arguments[i]);var a=this.entries.length;for(i=0;i<a;i++){var u=this.entries[i];u[t].apply(u,o)}return this},clear:function clear(){return this.entries.length=0,this},contains:function contains(t){return this.entries.indexOf(t)>-1},union:function union(t){var i=new a;return t.entries.forEach((function(t){i.set(t)})),this.entries.forEach((function(t){i.set(t)})),i},intersect:function intersect(t){var i=new a;return this.entries.forEach((function(o){t.contains(o)&&i.set(o)})),i},difference:function difference(t){var i=new a;return this.entries.forEach((function(o){t.contains(o)||i.set(o)})),i},size:{get:function get(){return this.entries.length},set:function set(t){return t<this.entries.length?this.entries.length=t:this.entries.length}}});t.exports=a},function(t,i,o){var a=o(0),u=o(11),d=o(15),b=o(189),S=o(92),C=o(1182),M=new a({Extends:d,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.GetBounds,u.Mask,u.Pipeline,u.ScrollFactor,u.Transform,u.Visible,C],initialize:function PointLight(t,i,o,a,u,C,M){void 0===a&&(a=16777215),void 0===u&&(u=128),void 0===C&&(C=1),void 0===M&&(M=.1),d.call(this,t,"PointLight"),this.initPipeline(S.POINTLIGHT_PIPELINE),this.setPosition(i,o),this.color=b(a),this.intensity=C,this.attenuation=M,this.width=2*u,this.height=2*u,this._radius=u},radius:{get:function get(){return this._radius},set:function set(t){this._radius=t,this.width=2*t,this.height=2*t}},originX:{get:function get(){return.5}},originY:{get:function get(){return.5}},displayOriginX:{get:function get(){return this._radius}},displayOriginY:{get:function get(){return this._radius}}});t.exports=M},function(t,i){t.exports=function CircleToRectangle(t,i){var o=i.width/2,a=i.height/2,u=Math.abs(t.x-i.x-o),d=Math.abs(t.y-i.y-a),b=o+t.radius,S=a+t.radius;if(u>b||d>S)return!1;if(u<=o||d<=a)return!0;var C=u-o,M=d-a;return C*C+M*M<=t.radius*t.radius}},function(t,i){t.exports=function RectangleToRectangle(t,i){return!(t.width<=0||t.height<=0||i.width<=0||i.height<=0||t.right<i.x||t.bottom<i.y||t.x>i.right||t.y>i.bottom)}},function(t,i,o){var a=o(6),u={},d={register:function(t,i,o,a,d){u[t]={plugin:i,mapping:o,settingsKey:a,configKey:d}},getPlugin:function(t){return u[t]},install:function(t){var i=t.scene.sys,o=i.settings.input,d=i.game.config;for(var b in u){var S=u[b].plugin,C=u[b].mapping,M=u[b].settingsKey,P=u[b].configKey;a(o,M,d[P])&&(t[C]=new S(t))}},remove:function(t){u.hasOwnProperty(t)&&delete u[t]}};t.exports=d},function(t,i,o){t.exports={ANY_KEY_DOWN:o(1323),ANY_KEY_UP:o(1324),COMBO_MATCH:o(1325),DOWN:o(1326),KEY_DOWN:o(1327),KEY_UP:o(1328),UP:o(1329)}},function(t,i){t.exports=function GetURL(t,i){return!!t.url&&(t.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?t.url:i+t.url)}},function(t,i){t.exports=function XHRSettings(t,i,o,a,u,d){return void 0===t&&(t=""),void 0===i&&(i=!0),void 0===o&&(o=""),void 0===a&&(a=""),void 0===u&&(u=0),void 0===d&&(d=!1),{responseType:t,async:i,user:o,password:a,timeout:u,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:d}}},function(t,i,o){var a=o(0),u=o(243),d=o(73),b=new a({Extends:d,Mixins:[u.Acceleration,u.Angular,u.Bounce,u.Debug,u.Drag,u.Enable,u.Friction,u.Gravity,u.Immovable,u.Mass,u.Pushable,u.Size,u.Velocity],initialize:function ArcadeSprite(t,i,o,a,u){d.call(this,t,i,o,a,u),this.body=null}});t.exports=b},function(t,i,o){var a=o(119);t.exports=function GetTileAt(t,i,o,u){if(void 0===o&&(o=!1),a(t,i,u)){var d=u.data[i][t]||null;return d?-1===d.index?o?d:null:d:null}return null}},function(t,i){t.exports=function RunCull(t,i,o,a){var u,d,b,S=t.data,C=t.width,M=t.height,P=t.tilemapLayer,R=Math.max(0,i.left),O=Math.min(C,i.right),B=Math.max(0,i.top),N=Math.min(M,i.bottom);if(0===o)for(d=B;d<N;d++)for(u=R;S[d]&&u<O;u++)(b=S[d][u])&&-1!==b.index&&b.visible&&0!==b.alpha&&a.push(b);else if(1===o)for(d=B;d<N;d++)for(u=O;S[d]&&u>=R;u--)(b=S[d][u])&&-1!==b.index&&b.visible&&0!==b.alpha&&a.push(b);else if(2===o)for(d=N;d>=B;d--)for(u=R;S[d]&&u<O;u++)(b=S[d][u])&&-1!==b.index&&b.visible&&0!==b.alpha&&a.push(b);else if(3===o)for(d=N;d>=B;d--)for(u=O;S[d]&&u>=R;u--)(b=S[d][u])&&-1!==b.index&&b.visible&&0!==b.alpha&&a.push(b);return P.tilesDrawn=a.length,P.tilesTotal=C*M,a}},function(t,i){t.exports=function SetLayerCollisionIndex(t,i,o){var a=o.collideIndexes.indexOf(t);i&&-1===a?o.collideIndexes.push(t):i||-1===a||o.collideIndexes.splice(a,1)}},function(t,i,o){var a=o(2);t.exports=function CreateGroupLayer(t,i,o){if(!i)return{i:0,layers:t.layers,name:"",opacity:1,visible:!0,x:0,y:0};var u=i.x+a(i,"startx",0)*t.tilewidth+a(i,"offsetx",0),d=i.y+a(i,"starty",0)*t.tileheight+a(i,"offsety",0);return{i:0,layers:i.layers,name:o.name+i.name+"/",opacity:o.opacity*i.opacity,visible:o.visible&&i.visible,x:o.x+u,y:o.y+d}}},function(t,i){t.exports=function GetNewValue(t,i,o){return t.hasOwnProperty(i)?"function"===_typeof(t[i])?function valueCallback(o,a,u,d,b,S){return t[i](o,a,u,d,b,S)}:function valueCallback(){return t[i]}:"function"==typeof o?o:function valueCallback(){return o}}},function(t,i,o){var a=o(265),u=o(13),d=o(99),b=o(80),S=o(162),C=o(583),M=o(263),P=o(6),R=o(264),O=o(266),B=o(268);t.exports=function TweenBuilder(t,i,o){void 0===o&&(o=a);for(var N=o.targets?o.targets:M(i),Y=C(i),G=S(i,"delay",o.delay),X=S(i,"duration",o.duration),U=P(i,"easeParams",o.easeParams),z=b(P(i,"ease",o.ease),U),V=S(i,"hold",o.hold),W=S(i,"repeat",o.repeat),H=S(i,"repeatDelay",o.repeatDelay),j=d(i,"yoyo",o.yoyo),q=d(i,"flipX",o.flipX),Z=d(i,"flipY",o.flipY),K=[],$=0;$<Y.length;$++)for(var tt=Y[$].key,et=Y[$].value,it=0;it<N.length;it++){var nt=R(tt,et),rt=B(N[it],it,tt,nt.getEnd,nt.getStart,nt.getActive,b(P(et,"ease",z),P(et,"easeParams",U)),S(et,"delay",G),S(et,"duration",X),d(et,"yoyo",j),S(et,"hold",V),S(et,"repeat",W),S(et,"repeatDelay",H),d(et,"flipX",q),d(et,"flipY",Z));K.push(rt)}var st=new O(t,K,N);st.offset=u(i,"offset",null),st.completeDelay=u(i,"completeDelay",0),st.loop=Math.round(u(i,"loop",0)),st.loopDelay=Math.round(u(i,"loopDelay",0)),st.paused=d(i,"paused",!1),st.useFrames=d(i,"useFrames",!1);for(var ot=P(i,"callbackScope",st),at=[st,null],ht=O.TYPES,lt=0;lt<ht.length;lt++){var ut=ht[lt],ct=P(i,ut,!1);if(ct){var dt=P(i,ut+"Scope",ot),ft=P(i,ut+"Params",[]);st.setCallback(ut,ct,at.concat(ft),dt)}}return st}},function(t,i,o){var a=o(0),u=o(102),d=o(2),b=o(132),S=o(185),C=new a({initialize:function AnimationState(t){this.parent=t,this.animationManager=t.scene.sys.anims,this.animationManager.on(b.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function chain(t){var i=this.parent;if(void 0===t)return this.nextAnimsQueue.length=0,this.nextAnim=null,i;Array.isArray(t)||(t=[t]);for(var o=0;o<t.length;o++){var a=t[o];null===this.nextAnim?this.nextAnim=a:this.nextAnimsQueue.push(a)}return this.parent},getName:function getName(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function getFrameName(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function load(t){this.isPlaying&&this.stop();var i=this.animationManager,o="string"==typeof t?t:d(t,"key",null),a=this.exists(o)?this.get(o):i.get(o);if(a){this.currentAnim=a;var u=a.getTotalFrames(),b=d(t,"frameRate",a.frameRate),S=d(t,"duration",a.duration);a.calculateDuration(this,u,S,b),this.delay=d(t,"delay",a.delay),this.repeat=d(t,"repeat",a.repeat),this.repeatDelay=d(t,"repeatDelay",a.repeatDelay),this.yoyo=d(t,"yoyo",a.yoyo),this.showOnStart=d(t,"showOnStart",a.showOnStart),this.hideOnComplete=d(t,"hideOnComplete",a.hideOnComplete),this.skipMissedFrames=d(t,"skipMissedFrames",a.skipMissedFrames),this.timeScale=d(t,"timeScale",this.timeScale);var C=d(t,"startFrame",0);C>a.getTotalFrames()&&(C=0);var M=a.frames[C];0!==C||this.forward||(M=a.getLastFrame()),this.currentFrame=M}else console.warn("Missing animation: "+o);return this.parent},pause:function pause(t){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),void 0!==t&&this.setCurrentFrame(t),this.parent},resume:function resume(t){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),void 0!==t&&this.setCurrentFrame(t),this.parent},playAfterDelay:function playAfterDelay(t,i){if(this.isPlaying){var o=this.nextAnim,a=this.nextAnimsQueue;o&&a.unshift(o),this.nextAnim=t,this._pendingStop=1,this._pendingStopValue=i}else this.delayCounter=i,this.play(t,!0);return this.parent},playAfterRepeat:function playAfterRepeat(t,i){if(void 0===i&&(i=1),this.isPlaying){var o=this.nextAnim,a=this.nextAnimsQueue;o&&a.unshift(o),-1!==this.repeatCounter&&i>this.repeatCounter&&(i=this.repeatCounter),this.nextAnim=t,this._pendingStop=2,this._pendingStopValue=i}else this.play(t);return this.parent},play:function play(t,i){void 0===i&&(i=!1);var o=this.currentAnim,a=this.parent,u="string"==typeof t?t:t.key;if(i&&this.isPlaying&&o.key===u)return a;if(o&&this.isPlaying){var d=this.animationManager.getMix(o.key,t);if(d>0)return this.playAfterDelay(t,d)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(t)},playReverse:function playReverse(t,i){void 0===i&&(i=!1);var o="string"==typeof t?t:t.key;return i&&this.isPlaying&&this.currentAnim.key===o?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(t))},startAnimation:function startAnimation(t){this.load(t);var i=this.currentAnim,o=this.parent;return i?(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat,i.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,0===this.delayCounter&&this.handleStart(),o):o},handleStart:function handleStart(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(b.ANIMATION_START)},handleRepeat:function handleRepeat(){this.pendingRepeat=!1,this.emitEvents(b.ANIMATION_REPEAT)},handleStop:function handleStop(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(b.ANIMATION_STOP)},handleComplete:function handleComplete(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(b.ANIMATION_COMPLETE,b.ANIMATION_COMPLETE_KEY)},emitEvents:function emitEvents(t,i){var o=this.currentAnim,a=this.currentFrame,u=this.parent,d=a.textureFrame;u.emit(t,o,a,u,d),i&&u.emit(i+o.key,o,a,u,d)},reverse:function reverse(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function getProgress(){var t=this.currentFrame;if(!t)return 0;var i=t.progress;return this.inReverse&&(i*=-1),i},setProgress:function setProgress(t){return this.forward||(t=1-t),this.setCurrentFrame(this.currentAnim.getFrameByProgress(t)),this.parent},setRepeat:function setRepeat(t){return this.repeatCounter=-1===t?Number.MAX_VALUE:t,this.parent},globalRemove:function globalRemove(t,i){void 0===i&&(i=this.currentAnim),this.isPlaying&&i.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function restart(t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var o=this.currentAnim,a=this.parent;return o?(i&&(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat),o.getFirstTick(this),this.emitEvents(b.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!t,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(o.frames[0]),this.parent):a},complete:function complete(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var t=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(t)}return this.parent},stop:function stop(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var t=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(t)}return this.parent},stopAfterDelay:function stopAfterDelay(t){return this._pendingStop=1,this._pendingStopValue=t,this.parent},stopAfterRepeat:function stopAfterRepeat(t){return void 0===t&&(t=1),-1!==this.repeatCounter&&t>this.repeatCounter&&(t=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=t,this.parent},stopOnFrame:function stopOnFrame(t){return this._pendingStop=3,this._pendingStopValue=t,this.parent},getTotalFrames:function getTotalFrames(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function update(t,i){var o=this.currentAnim;if(this.isPlaying&&o&&!o.paused){if(this.accumulator+=i*this.timeScale,1===this._pendingStop&&(this._pendingStopValue-=i,this._pendingStopValue<=0))return this.stop();if(this.hasStarted){if(this.accumulator>=this.nextTick&&(this.forward?o.nextFrame(this):o.previousFrame(this),this.isPlaying&&0===this._pendingStop&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var a=0;do{this.forward?o.nextFrame(this):o.previousFrame(this),a++}while(this.isPlaying&&this.accumulator>this.nextTick&&a<60)}}else this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart())}},setCurrentFrame:function setCurrentFrame(t){var i=this.parent;return this.currentFrame=t,i.texture=t.frame.texture,i.frame=t.frame,i.isCropped&&i.frame.updateCropUVs(i._crop,i.flipX,i.flipY),t.setAlpha&&(i.alpha=t.alpha),i.setSizeToFrame(),i._originComponent&&(t.frame.customPivot?i.setOrigin(t.frame.pivotX,t.frame.pivotY):i.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(b.ANIMATION_UPDATE),3===this._pendingStop&&this._pendingStopValue===t&&this.stop()),i},nextFrame:function nextFrame(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function previousFrame(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function get(t){return this.anims?this.anims.get(t):null},exists:function exists(t){return!!this.anims&&this.anims.has(t)},create:function create(t){var i=t.key,o=!1;return i&&((o=this.get(i))||(o=new S(this,i,t),this.anims||(this.anims=new u),this.anims.set(i,o))),o},generateFrameNames:function generateFrameNames(t,i){return this.animationManager.generateFrameNames(t,i)},generateFrameNumbers:function generateFrameNumbers(t,i){return this.animationManager.generateFrameNumbers(t,i)},remove:function remove(t){var i=this.get(t);return i&&(this.currentAnim===i&&this.stop(),this.anims.delete(t)),i},destroy:function destroy(){this.animationManager.off(b.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function get(){return this._paused}}});t.exports=C},function(t,i,o){var a={};t.exports=a;var u=o(166);a._motionWakeThreshold=.18,a._motionSleepThreshold=.08,a._minBias=.9,a.update=function(t,i){for(var o=i*i*i,u=0;u<t.length;u++){var d=t[u],b=d.speed*d.speed+d.angularSpeed*d.angularSpeed;if(0===d.force.x&&0===d.force.y){var S=Math.min(d.motion,b),C=Math.max(d.motion,b);d.motion=a._minBias*S+(1-a._minBias)*C,d.sleepThreshold>0&&d.motion<a._motionSleepThreshold*o?(d.sleepCounter+=1,d.sleepCounter>=d.sleepThreshold&&a.set(d,!0)):d.sleepCounter>0&&(d.sleepCounter-=1)}else a.set(d,!1)}},a.afterCollisions=function(t,i){for(var o=i*i*i,u=0;u<t.length;u++){var d=t[u];if(d.isActive){var b=d.collision,S=b.bodyA.parent,C=b.bodyB.parent;if(!(S.isSleeping&&C.isSleeping||S.isStatic||C.isStatic)&&(S.isSleeping||C.isSleeping)){var M=S.isSleeping&&!S.isStatic?S:C,P=M===S?C:S;!M.isStatic&&P.motion>a._motionWakeThreshold*o&&a.set(M,!1)}}}},a.set=function(t,i){var o=t.isSleeping;i?(t.isSleeping=!0,t.sleepCounter=t.sleepThreshold,t.positionImpulse.x=0,t.positionImpulse.y=0,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.anglePrev=t.angle,t.speed=0,t.angularSpeed=0,t.motion=0,o||u.trigger(t,"sleepStart")):(t.isSleeping=!1,t.sleepCounter=0,o&&u.trigger(t,"sleepEnd"))}},function(t,i,o){var a={};t.exports=a;var u=o(32);a.on=function(t,i,o){for(var a,u=i.split(" "),d=0;d<u.length;d++)a=u[d],t.events=t.events||{},t.events[a]=t.events[a]||[],t.events[a].push(o);return o},a.off=function(t,i,o){if(i){"function"==typeof i&&(o=i,i=u.keys(t.events).join(" "));for(var a=i.split(" "),d=0;d<a.length;d++){var b=t.events[a[d]],S=[];if(o&&b)for(var C=0;C<b.length;C++)b[C]!==o&&S.push(b[C]);t.events[a[d]]=S}}else t.events={}},a.trigger=function(t,i,o){var a,d,b,S,C=t.events;if(C&&u.keys(C).length>0){o||(o={}),a=i.split(" ");for(var M=0;M<a.length;M++)if(b=C[d=a[M]]){(S=u.clone(o,!1)).name=d,S.source=t;for(var P=0;P<b.length;P++)b[P].apply(t,[S])}}}},function(t,i,o){var a=o(175),u=o(92),d=o(74),b={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function initPipeline(t){void 0===t&&(t=u.MULTI_PIPELINE);var i=this.scene.sys.renderer;if(!i)return!1;var o=i.pipelines;if(this.postPipelines=[],this.pipelineData={},o){var a=o.get(t);if(a)return this.defaultPipeline=a,this.pipeline=a,!0}return!1},setPipeline:function setPipeline(t,i,o){var u=this.scene.sys.renderer;if(!u)return this;var d=u.pipelines;if(d){var b=d.get(t);b&&(this.pipeline=b),i&&(this.pipelineData=o?a(i):i)}return this},setPostPipeline:function setPostPipeline(t,i,o){var u=this.scene.sys.renderer;if(!u)return this;var d=u.pipelines;if(d){Array.isArray(t)||(t=[t]);for(var b=0;b<t.length;b++){var S=d.getPostPipeline(t[b],this);S&&this.postPipelines.push(S)}i&&(this.pipelineData=o?a(i):i)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function setPipelineData(t,i){var o=this.pipelineData;return void 0===i?delete o[t]:o[t]=i,this},getPostPipeline:function getPostPipeline(t){for(var i=this.postPipelines,o=[],a=0;a<i.length;a++){var u=i[a];("string"==typeof t&&u.name===t||u instanceof t)&&o.push(u)}return 1===o.length?o[0]:o},resetPipeline:function resetPipeline(t,i){return void 0===t&&(t=!1),void 0===i&&(i=!1),this.pipeline=this.defaultPipeline,t&&(this.postPipelines=[],this.hasPostPipeline=!1),i&&(this.pipelineData={}),null!==this.pipeline},resetPostPipeline:function resetPostPipeline(t){void 0===t&&(t=!1);for(var i=this.postPipelines,o=0;o<i.length;o++)i[o].destroy();this.postPipelines=[],this.hasPostPipeline=!1,t&&(this.pipelineData={})},removePostPipeline:function removePostPipeline(t){for(var i=this.postPipelines,o=i.length-1;o>=0;o--){var a=i[o];("string"==typeof t&&a.name===t||"string"!=typeof t&&a instanceof t)&&(a.destroy(),d(i,o))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function getPipelineName(){return this.pipeline.name}};t.exports=b},function(t,i){t.exports={DEFAULT:0,LINEAR:0,NEAREST:1}},function(t,i,o){var a=o(4);t.exports=function CircumferencePoint(t,i,o){return void 0===o&&(o=new a),o.x=t.x+t.radius*Math.cos(i),o.y=t.y+t.radius*Math.sin(i),o}},function(t,i,o){var a=o(4);t.exports=function Random(t,i){void 0===i&&(i=new a);var o=2*Math.PI*Math.random(),u=Math.random()+Math.random(),d=u>1?2-u:u,b=d*Math.cos(o),S=d*Math.sin(o);return i.x=t.x+b*t.radius,i.y=t.y+S*t.radius,i}},function(t,i,o){var a=o(130),u=o(4);t.exports=function GetPoint(t,i,o){if(void 0===o&&(o=new u),i<=0||i>=1)return o.x=t.x,o.y=t.y,o;var d=a(t)*i;return i>.5?(d-=t.width+t.height)<=t.width?(o.x=t.right-d,o.y=t.bottom):(o.x=t.x,o.y=t.bottom-(d-t.width)):d<=t.width?(o.x=t.x+d,o.y=t.y):(o.x=t.right,o.y=t.y+(d-t.width)),o}},function(t,i,o){var a=o(67),u=o(4);t.exports=function GetPoints(t,i,o,d){void 0===d&&(d=[]),!i&&o>0&&(i=a(t)/o);for(var b=t.x1,S=t.y1,C=t.x2,M=t.y2,P=0;P<i;P++){var R=P/i,O=b+(C-b)*R,B=S+(M-S)*R;d.push(new u(O,B))}return d}},function(t,i,o){var a=o(4);t.exports=function Random(t,i){void 0===i&&(i=new a);var o=Math.random();return i.x=t.x1+o*(t.x2-t.x1),i.y=t.y1+o*(t.y2-t.y1),i}},function(t,i,o){var a=o(4);t.exports=function Random(t,i){return void 0===i&&(i=new a),i.x=t.x+Math.random()*t.width,i.y=t.y+Math.random()*t.height,i}},function(t,i){t.exports=function DeepCopy(t){var i,o,a;if("object"!==_typeof(t)||null===t)return t;for(a in i=Array.isArray(t)?[]:{},t)o=t[a],i[a]=DeepCopy(o);return i}},function(t,i){t.exports=function ToJSON(t){var i={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(i.textureKey=t.texture.key,i.frameKey=t.frame.name),i}},function(t,i,o){var a=o(3);t.exports=function TransformXY(t,i,o,u,d,b,S,C){void 0===C&&(C=new a);var M=Math.sin(d),P=Math.cos(d),R=P*b,O=M*b,B=-M*S,N=P*S,Y=1/(R*N+B*-O);return C.x=N*Y*t+-B*Y*i+(u*B-o*N)*Y,C.y=R*Y*i+-O*Y*t+(-u*R+o*O)*Y,C}},function(t,i){t.exports=function RotateLeft(t,i){void 0===i&&(i=1);for(var o=null,a=0;a<i;a++)o=t.shift(),t.push(o);return o}},function(t,i){t.exports=function RotateRight(t,i){void 0===i&&(i=1);for(var o=null,a=0;a<i;a++)o=t.pop(),t.unshift(o);return o}},function(t,i,o){var a=o(4);t.exports=function Random(t,i){void 0===i&&(i=new a);var o=Math.random()*Math.PI*2,u=Math.sqrt(Math.random());return i.x=t.x+u*Math.cos(o)*t.width/2,i.y=t.y+u*Math.sin(o)*t.height/2,i}},function(t,i,o){var a=o(4);t.exports=function Random(t,i){void 0===i&&(i=new a);var o=t.x2-t.x1,u=t.y2-t.y1,d=t.x3-t.x1,b=t.y3-t.y1,S=Math.random(),C=Math.random();return S+C>=1&&(S=1-S,C=1-C),i.x=t.x1+(o*S+d*C),i.y=t.y1+(u*S+b*C),i}},function(t,i){t.exports=function RotateAroundDistance(t,i,o,a,u){var d=a+Math.atan2(t.y-o,t.x-i);return t.x=i+u*Math.cos(d),t.y=o+u*Math.sin(d),t}},function(t,i){t.exports=function SmootherStep(t,i,o){return(t=Math.max(0,Math.min(1,(t-i)/(o-i))))*t*t*(t*(6*t-15)+10)}},function(t,i){t.exports=function SmoothStep(t,i,o){return t<=i?0:t>=o?1:(t=(t-i)/(o-i))*t*(3-2*t)}},function(t,i,o){var a=o(18),u=o(0),d=o(132),b=o(318),S=o(319),C=o(6),M=o(320),P=new u({initialize:function Animation(t,i,o){this.manager=t,this.key=i,this.type="frame",this.frames=this.getFrames(t.textureManager,C(o,"frames",[]),C(o,"defaultTextureKey",null),C(o,"sortFrames",!0)),this.frameRate=C(o,"frameRate",null),this.duration=C(o,"duration",null),this.msPerFrame,this.skipMissedFrames=C(o,"skipMissedFrames",!0),this.delay=C(o,"delay",0),this.repeat=C(o,"repeat",0),this.repeatDelay=C(o,"repeatDelay",0),this.yoyo=C(o,"yoyo",!1),this.showOnStart=C(o,"showOnStart",!1),this.hideOnComplete=C(o,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(d.PAUSE_ALL,this.pause,this),this.manager.on(d.RESUME_ALL,this.resume,this))},getTotalFrames:function getTotalFrames(){return this.frames.length},calculateDuration:function calculateDuration(t,i,o,a){null===o&&null===a?(t.frameRate=24,t.duration=24/i*1e3):o&&null===a?(t.duration=o,t.frameRate=i/(o/1e3)):(t.frameRate=a,t.duration=i/a*1e3),t.msPerFrame=1e3/t.frameRate},addFrame:function addFrame(t){return this.addFrameAt(this.frames.length,t)},addFrameAt:function addFrameAt(t,i){var o=this.getFrames(this.manager.textureManager,i);if(o.length>0){if(0===t)this.frames=o.concat(this.frames);else if(t===this.frames.length)this.frames=this.frames.concat(o);else{var a=this.frames.slice(0,t),u=this.frames.slice(t);this.frames=a.concat(o,u)}this.updateFrameSequence()}return this},checkFrame:function checkFrame(t){return t>=0&&t<this.frames.length},getFirstTick:function getFirstTick(t){t.accumulator=0,t.nextTick=t.msPerFrame+t.currentFrame.duration},getFrameAt:function getFrameAt(t){return this.frames[t]},getFrames:function getFrames(t,i,o,a){void 0===a&&(a=!0);var u,d,b,P,R=[],O=1;if("string"==typeof i){P=i;var B=t.get(P).getFrameNames();a&&M(B),i=[],B.forEach((function(t){i.push({key:P,frame:t})}))}if(!Array.isArray(i)||0===i.length)return R;for(b=0;b<i.length;b++){var N=i[b],Y=C(N,"key",o);if(Y){var G=C(N,"frame",0),X=t.getFrame(Y,G);(d=new S(Y,G,O,X)).duration=C(N,"duration",0),d.isFirst=!u,u&&(u.nextFrame=d,d.prevFrame=u),R.push(d),u=d,O++}}if(R.length>0){d.isLast=!0,d.nextFrame=R[0],R[0].prevFrame=d;var U=1/(R.length-1);for(b=0;b<R.length;b++)R[b].progress=b*U}return R},getNextTick:function getNextTick(t){t.accumulator-=t.nextTick,t.nextTick=t.msPerFrame+t.currentFrame.duration},getFrameByProgress:function getFrameByProgress(t){return t=a(t,0,1),b(t,this.frames,"progress")},nextFrame:function nextFrame(t){var i=t.currentFrame;i.isLast?t.yoyo?this.handleYoyoFrame(t,!1):t.repeatCounter>0?t.inReverse&&t.forward?t.forward=!1:this.repeatAnimation(t):t.complete():this.updateAndGetNextTick(t,i.nextFrame)},handleYoyoFrame:function handleYoyoFrame(t,i){if(i||(i=!1),t.inReverse===!i&&t.repeatCounter>0)return(0===t.repeatDelay||t.pendingRepeat)&&(t.forward=i),void this.repeatAnimation(t);if(t.inReverse===i||0!==t.repeatCounter){t.forward=i;var o=i?t.currentFrame.nextFrame:t.currentFrame.prevFrame;this.updateAndGetNextTick(t,o)}else t.complete()},getLastFrame:function getLastFrame(){return this.frames[this.frames.length-1]},previousFrame:function previousFrame(t){var i=t.currentFrame;i.isFirst?t.yoyo?this.handleYoyoFrame(t,!0):t.repeatCounter>0?(t.inReverse&&!t.forward||(t.forward=!0),this.repeatAnimation(t)):t.complete():this.updateAndGetNextTick(t,i.prevFrame)},updateAndGetNextTick:function updateAndGetNextTick(t,i){t.setCurrentFrame(i),this.getNextTick(t)},removeFrame:function removeFrame(t){var i=this.frames.indexOf(t);return-1!==i&&this.removeFrameAt(i),this},removeFrameAt:function removeFrameAt(t){return this.frames.splice(t,1),this.updateFrameSequence(),this},repeatAnimation:function repeatAnimation(t){if(2===t._pendingStop){if(0===t._pendingStopValue)return t.stop();t._pendingStopValue--}t.repeatDelay>0&&!t.pendingRepeat?(t.pendingRepeat=!0,t.accumulator-=t.nextTick,t.nextTick+=t.repeatDelay):(t.repeatCounter--,t.forward?t.setCurrentFrame(t.currentFrame.nextFrame):t.setCurrentFrame(t.currentFrame.prevFrame),t.isPlaying&&(this.getNextTick(t),t.handleRepeat()))},toJSON:function toJSON(){var t={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach((function(i){t.frames.push(i.toJSON())})),t},updateFrameSequence:function updateFrameSequence(){for(var t,i=this.frames.length,o=1/(i-1),a=0;a<i;a++)(t=this.frames[a]).index=a+1,t.isFirst=!1,t.isLast=!1,t.progress=a*o,0===a?(t.isFirst=!0,1===i?(t.isLast=!0,t.nextFrame=t,t.prevFrame=t):(t.isLast=!1,t.prevFrame=this.frames[i-1],t.nextFrame=this.frames[a+1])):a===i-1&&i>1?(t.isLast=!0,t.prevFrame=this.frames[i-2],t.nextFrame=this.frames[0]):i>1&&(t.prevFrame=this.frames[a-1],t.nextFrame=this.frames[a+1]);return this},pause:function pause(){return this.paused=!0,this},resume:function resume(){return this.paused=!1,this},destroy:function destroy(){this.manager.off&&(this.manager.off(d.PAUSE_ALL,this.pause,this),this.manager.off(d.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var t=0;t<this.frames.length;t++)this.frames[t].destroy();this.frames=[],this.manager=null}});t.exports=P},function(t,i){t.exports=function Pad(t,i,o,a){void 0===i&&(i=0),void 0===o&&(o=" "),void 0===a&&(a=3);var u=0;if(i+1>=(t=t.toString()).length)switch(a){case 1:t=new Array(i+1-t.length).join(o)+t;break;case 3:var d=Math.ceil((u=i-t.length)/2);t=new Array(u-d+1).join(o)+t+new Array(d+1).join(o);break;default:t+=new Array(i+1-t.length).join(o)}return t}},function(t,i,o){var a=o(327),u=o(189),d=o(331),b=o(332);t.exports=function ValueToColor(t){switch(_typeof(t)){case"string":return"rgb"===t.substr(0,3).toLowerCase()?b(t):a(t);case"number":return u(t);case"object":return d(t)}}},function(t,i,o){var a=o(103);function ConvertValue(t,i,o,a){var u=(t+6*i)%6,d=Math.min(u,4-u,1);return Math.round(255*(a-a*o*Math.max(0,d)))}t.exports=function HSVToRGB(t,i,o,u){void 0===i&&(i=1),void 0===o&&(o=1);var d=ConvertValue(5,t,i,o),b=ConvertValue(3,t,i,o),S=ConvertValue(1,t,i,o);return u?u.setTo?u.setTo(d,b,S,u.alpha,!1):(u.r=d,u.g=b,u.b=S,u.color=a(d,b,S),u):{r:d,g:b,b:S,color:a(d,b,S)}}},function(t,i,o){var a=o(38),u=o(330);t.exports=function IntegerToColor(t){var i=u(t);return new a(i.r,i.g,i.b,i.a)}},function(t,i){t.exports=function CenterOn(t,i,o){return t.x=i-t.width/2,t.y=o-t.height/2,t}},function(t,i,o){var a=o(105),u=o(136),d=o(31),b={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};t.exports=function init(){if("function"==typeof importScripts)return b;b.canvas=!!window.CanvasRenderingContext2D;try{b.localStorage=!!localStorage.getItem}catch(i){b.localStorage=!1}b.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),b.fileSystem=!!window.requestFileSystem;var t=!1;return b.webGL=function testWebGL(){if(window.WebGLRenderingContext)try{var i=d.createWebGL(this),o=i.getContext("webgl")||i.getContext("experimental-webgl"),a=d.create2D(this),u=a.getContext("2d").createImageData(1,1);return t=u.data instanceof Uint8ClampedArray,d.remove(i),d.remove(a),!!o}catch(b){return!1}return!1}(),b.worker=!!window.Worker,b.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,b.getUserMedia=b.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,u.firefox&&u.firefoxVersion<21&&(b.getUserMedia=!1),!a.iOS&&(u.ie||u.firefox||u.chrome)&&(b.canvasBitBltShift=!0),(u.safari||u.mobileSafari)&&(b.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(b.vibration=!0),"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint32Array&&(b.littleEndian=function checkIsLittleEndian(){var t=new ArrayBuffer(4),i=new Uint8Array(t),o=new Uint32Array(t);return i[0]=161,i[1]=178,i[2]=195,i[3]=212,3569595041===o[0]||2712847316!==o[0]&&null}()),b.support32bit="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof Int32Array&&null!==b.littleEndian&&t,b}()},function(t,i){var o="";t.exports=function Smoothing(){var t=function getPrefix(t){for(var i=["i","webkitI","msI","mozI","oI"],o=0;o<i.length;o++){var a=i[o]+"mageSmoothingEnabled";if(a in t)return a}return null};return{disable:function disable(i){return""===o&&(o=t(i)),o&&(i[o]=!1),i},enable:function enable(i){return""===o&&(o=t(i)),o&&(i[o]=!0),i},getPrefix:t,isEnabled:function isEnabled(t){return null!==o?t[o]:null}}}()},function(t,i,o){var a=o(14),u=o(17),d={Angle:o(812),Distance:o(821),Easing:o(826),Fuzzy:o(827),Interpolation:o(830),Pow2:o(835),Snap:o(837),RandomDataGenerator:o(839),Average:o(840),Bernstein:o(356),Between:o(195),CatmullRom:o(194),CeilTo:o(841),Clamp:o(18),DegToRad:o(36),Difference:o(842),Euler:o(843),Factorial:o(357),FloatBetween:o(137),FloorTo:o(844),FromPercent:o(98),GetSpeed:o(845),IsEven:o(846),IsEvenStrict:o(847),Linear:o(135),MaxAdd:o(848),Median:o(849),MinSub:o(850),Percent:o(851),RadToDeg:o(196),RandomXY:o(852),RandomXYZ:o(853),RandomXYZW:o(854),Rotate:o(362),RotateAround:o(308),RotateAroundDistance:o(182),RotateTo:o(855),RoundAwayFromZero:o(363),RoundTo:o(856),SinCosTableGenerator:o(857),SmootherStep:o(183),SmoothStep:o(184),ToXY:o(858),TransformXY:o(177),Within:o(859),Wrap:o(68),Vector2:o(3),Vector3:o(39),Vector4:o(140),Matrix3:o(364),Matrix4:o(69),Quaternion:o(365),RotateVec3:o(860)};d=u(!1,d,a),t.exports=d},function(t,i){t.exports=function CatmullRom(t,i,o,a,u){var d=.5*(a-i),b=.5*(u-o),S=t*t;return(2*o-2*a+d+b)*(t*S)+(-3*o+3*a-2*d-b)*S+d*t+o}},function(t,i){t.exports=function Between(t,i){return Math.floor(Math.random()*(i-t+1)+t)}},function(t,i,o){var a=o(14);t.exports=function RadToDeg(t){return t*a.RAD_TO_DEG}},function(t,i,o){t.exports={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]}},function(t,i,o){var a=new(o(0))({initialize:function ColorMatrix(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function set(t){return this._matrix=t,this._dirty=!0,this},reset:function reset(){var t=this._matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=1,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=1,t[13]=0,t[14]=0,t[15]=0,t[16]=0,t[17]=0,t[18]=1,t[19]=0,this._dirty=!0,this},getData:function getData(){if(this._dirty){var t=new Float32Array(this._matrix);t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,this._data=t,this._dirty=!1}return this._data},brightness:function brightness(t,i){void 0===t&&(t=0),void 0===i&&(i=!1);var o=t;return this.multiply([o,0,0,0,0,0,o,0,0,0,0,0,o,0,0,0,0,0,1,0],i)},saturate:function saturate(t,i){void 0===t&&(t=0),void 0===i&&(i=!1);var o=2*t/3+1,a=-.5*(o-1);return this.multiply([o,a,a,0,0,a,o,a,0,0,a,a,o,0,0,0,0,0,1,0],i)},desaturate:function desaturate(t){return void 0===t&&(t=!1),this.saturate(-1,t)},hue:function hue(t,i){void 0===t&&(t=0),void 0===i&&(i=!1),t=t/180*Math.PI;var o=Math.cos(t),a=Math.sin(t),u=.213,d=.715,b=.072;return this.multiply([u+.787*o+a*-u,d+o*-d+a*-d,b+o*-b+.928*a,0,0,u+o*-u+.143*a,d+o*(1-d)+.14*a,b+o*-b+-.283*a,0,0,u+o*-u+-.787*a,d+o*-d+a*d,b+.928*o+a*b,0,0,0,0,0,1,0],i)},grayscale:function grayscale(t,i){return void 0===t&&(t=1),void 0===i&&(i=!1),this.saturate(-t,i)},blackWhite:function blackWhite(t){return void 0===t&&(t=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},contrast:function contrast(t,i){void 0===t&&(t=0),void 0===i&&(i=!1);var o=t+1,a=-.5*(o-1);return this.multiply([o,0,0,0,a,0,o,0,0,a,0,0,o,0,a,0,0,0,1,0],i)},negative:function negative(t){return void 0===t&&(t=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},desaturateLuminance:function desaturateLuminance(t){return void 0===t&&(t=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],t)},sepia:function sepia(t){return void 0===t&&(t=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},night:function night(t,i){return void 0===t&&(t=.1),void 0===i&&(i=!1),this.multiply([-2*t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0],i)},lsd:function lsd(t){return void 0===t&&(t=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},brown:function brown(t){return void 0===t&&(t=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},vintagePinhole:function vintagePinhole(t){return void 0===t&&(t=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},kodachrome:function kodachrome(t){return void 0===t&&(t=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},technicolor:function technicolor(t){return void 0===t&&(t=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},polaroid:function polaroid(t){return void 0===t&&(t=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},shiftToBGR:function shiftToBGR(t){return void 0===t&&(t=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},multiply:function multiply(t,i){i||this.reset();for(var o=this._matrix,a=[],u=0;u<20;u++)a[u]=o[u];return o[0]=a[0]*t[0]+a[1]*t[5]+a[2]*t[10]+a[3]*t[15],o[1]=a[0]*t[1]+a[1]*t[6]+a[2]*t[11]+a[3]*t[16],o[2]=a[0]*t[2]+a[1]*t[7]+a[2]*t[12]+a[3]*t[17],o[3]=a[0]*t[3]+a[1]*t[8]+a[2]*t[13]+a[3]*t[18],o[4]=a[0]*t[4]+a[1]*t[9]+a[2]*t[14]+a[3]*t[19]+a[4],o[5]=a[5]*t[0]+a[6]*t[5]+a[7]*t[10]+a[8]*t[15],o[6]=a[5]*t[1]+a[6]*t[6]+a[7]*t[11]+a[8]*t[16],o[7]=a[5]*t[2]+a[6]*t[7]+a[7]*t[12]+a[8]*t[17],o[8]=a[5]*t[3]+a[6]*t[8]+a[7]*t[13]+a[8]*t[18],o[9]=a[5]*t[4]+a[6]*t[9]+a[7]*t[14]+a[8]*t[19]+a[9],o[10]=a[10]*t[0]+a[11]*t[5]+a[12]*t[10]+a[13]*t[15],o[11]=a[10]*t[1]+a[11]*t[6]+a[12]*t[11]+a[13]*t[16],o[12]=a[10]*t[2]+a[11]*t[7]+a[12]*t[12]+a[13]*t[17],o[13]=a[10]*t[3]+a[11]*t[8]+a[12]*t[13]+a[13]*t[18],o[14]=a[10]*t[4]+a[11]*t[9]+a[12]*t[14]+a[13]*t[19]+a[14],o[15]=a[15]*t[0]+a[16]*t[5]+a[17]*t[10]+a[18]*t[15],o[16]=a[15]*t[1]+a[16]*t[6]+a[17]*t[11]+a[18]*t[16],o[17]=a[15]*t[2]+a[16]*t[7]+a[17]*t[12]+a[18]*t[17],o[18]=a[15]*t[3]+a[16]*t[8]+a[17]*t[13]+a[18]*t[18],o[19]=a[15]*t[4]+a[16]*t[9]+a[17]*t[14]+a[18]*t[19]+a[19],this._dirty=!0,this}});t.exports=a},function(t,i,o){var a=o(10),u=o(14);t.exports=function FromPoints(t,i){if(void 0===i&&(i=new a),0===t.length)return i;for(var o,d,b,S=Number.MAX_VALUE,C=Number.MAX_VALUE,M=u.MIN_SAFE_INTEGER,P=u.MIN_SAFE_INTEGER,R=0;R<t.length;R++)o=t[R],Array.isArray(o)?(d=o[0],b=o[1]):(d=o.x,b=o.y),S=Math.min(S,d),C=Math.min(C,b),M=Math.max(M,d),P=Math.max(P,b);return i.x=S,i.y=C,i.width=M-S,i.height=P-C,i}},function(t,i,o){var a=o(0),u=o(1),d=new a({initialize:function RGB(t,i,o){this._rgb=[0,0,0],this.onChangeCallback=u,this.dirty=!1,this.set(t,i,o)},set:function set(t,i,o){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0),this._rgb=[t,i,o],this.onChange(),this},equals:function equals(t,i,o){var a=this._rgb;return a.r===t&&a.g===i&&a.b===o},onChange:function onChange(){this.dirty=!0;var t=this._rgb;this.onChangeCallback.call(this,t[0],t[1],t[2])},r:{get:function get(){return this._rgb[0]},set:function set(t){this._rgb[0]=t,this.onChange()}},g:{get:function get(){return this._rgb[1]},set:function set(t){this._rgb[1]=t,this.onChange()}},b:{get:function get(){return this._rgb[2]},set:function set(t){this._rgb[2]=t,this.onChange()}},destroy:function destroy(){this.onChangeCallback=null}});t.exports=d},function(t,i,o){var a={CENTER:o(403),ORIENTATION:o(404),SCALE_MODE:o(405),ZOOM:o(406)};t.exports=a},function(t,i){t.exports=function RemoveFromDOM(t){t.parentNode&&t.parentNode.removeChild(t)}},function(t,i){t.exports={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8}},function(t,i,o){var a=o(0),u=o(144),d=o(197),b=o(20),S=o(419),C=o(420),M=o(33),P=o(1),R=o(421),O=new a({initialize:function Systems(t,i){this.scene=t,this.game,this.renderer,this.config=i,this.settings=R.create(i),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=P},init:function init(t){this.settings.status=u.INIT,this.sceneUpdate=P,this.game=t,this.renderer=t.renderer,this.canvas=t.canvas,this.context=t.context;var i=t.plugins;this.plugins=i,i.addToScene(this,d.Global,[d.CoreScene,C(this),S(this)]),this.events.emit(b.BOOT,this),this.settings.isBooted=!0},step:function step(t,i){var o=this.events;o.emit(b.PRE_UPDATE,t,i),o.emit(b.UPDATE,t,i),this.sceneUpdate.call(this.scene,t,i),o.emit(b.POST_UPDATE,t,i)},render:function render(t){var i=this.displayList;i.depthSort(),this.events.emit(b.PRE_RENDER,t),this.cameras.render(t,i),this.events.emit(b.RENDER,t)},queueDepthSort:function queueDepthSort(){this.displayList.queueDepthSort()},depthSort:function depthSort(){this.displayList.depthSort()},pause:function pause(t){var i=this.events,o=this.settings;return this.settings.active&&(o.status=u.PAUSED,o.active=!1,i.emit(b.PAUSE,this,t)),this},resume:function resume(t){var i=this.events,o=this.settings;return this.settings.active||(o.status=u.RUNNING,o.active=!0,i.emit(b.RESUME,this,t)),this},sleep:function sleep(t){var i=this.events,o=this.settings;return o.status=u.SLEEPING,o.active=!1,o.visible=!1,i.emit(b.SLEEP,this,t),this},wake:function wake(t){var i=this.events,o=this.settings;return o.status=u.RUNNING,o.active=!0,o.visible=!0,i.emit(b.WAKE,this,t),o.isTransition&&i.emit(b.TRANSITION_WAKE,o.transitionFrom,o.transitionDuration),this},getData:function getData(){return this.settings.data},isSleeping:function isSleeping(){return this.settings.status===u.SLEEPING},isActive:function isActive(){return this.settings.status===u.RUNNING},isPaused:function isPaused(){return this.settings.status===u.PAUSED},isTransitioning:function isTransitioning(){return this.settings.isTransition||null!==this.scenePlugin._target},isTransitionOut:function isTransitionOut(){return null!==this.scenePlugin._target&&this.scenePlugin._duration>0},isTransitionIn:function isTransitionIn(){return this.settings.isTransition},isVisible:function isVisible(){return this.settings.visible},setVisible:function setVisible(t){return this.settings.visible=t,this},setActive:function setActive(t,i){return t?this.resume(i):this.pause(i)},start:function start(t){var i=this.events,o=this.settings;t&&(o.data=t),o.status=u.START,o.active=!0,o.visible=!0,i.emit(b.START,this),i.emit(b.READY,this,t)},shutdown:function shutdown(t){var i=this.events,o=this.settings;i.off(b.TRANSITION_INIT),i.off(b.TRANSITION_START),i.off(b.TRANSITION_COMPLETE),i.off(b.TRANSITION_OUT),o.status=u.SHUTDOWN,o.active=!1,o.visible=!1,this.renderer===M.WEBGL&&this.renderer.resetTextures(!0),i.emit(b.SHUTDOWN,this,t)},destroy:function destroy(){var t=this.events,i=this.settings;i.status=u.DESTROYED,i.active=!1,i.visible=!1,t.emit(b.DESTROY,this),t.removeAllListeners();for(var o=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],a=0;a<o.length;a++)this[o[a]]=null}});t.exports=O},function(t,i){t.exports=function UppercaseFirst(t){return t&&t[0].toUpperCase()+t.slice(1)}},function(t,i,o){var a=o(33),u=o(0),d=o(109),b=o(424),S="Texture.frame missing: ",C=new u({initialize:function Texture(t,i,o,a,u){Array.isArray(o)||(o=[o]),this.manager=t,this.key=i,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var d=0;d<o.length;d++)this.source.push(new b(this,o[d],a,u))},add:function add(t,i,o,a,u,b){if(this.has(t))return null;var S=new d(this,t,i,o,a,u,b);return this.frames[t]=S,"__BASE"===this.firstFrame&&(this.firstFrame=t),this.frameTotal++,S},remove:function remove(t){return!!this.has(t)&&(this.get(t).destroy(),delete this.frames[t],!0)},has:function has(t){return this.frames[t]},get:function get(t){t||(t=this.firstFrame);var i=this.frames[t];return i||(console.warn(S+t),i=this.frames[this.firstFrame]),i},getTextureSourceIndex:function getTextureSourceIndex(t){for(var i=0;i<this.source.length;i++)if(this.source[i]===t)return i;return-1},getFramesFromTextureSource:function getFramesFromTextureSource(t,i){void 0===i&&(i=!1);var o=[];for(var a in this.frames)if("__BASE"!==a||i){var u=this.frames[a];u.sourceIndex===t&&o.push(u)}return o},getFrameNames:function getFrameNames(t){void 0===t&&(t=!1);var i=Object.keys(this.frames);if(!t){var o=i.indexOf("__BASE");-1!==o&&i.splice(o,1)}return i},getSourceImage:function getSourceImage(t){null!=t&&1!==this.frameTotal||(t="__BASE");var i=this.frames[t];return i?i.source.image:(console.warn(S+t),this.frames.__BASE.source.image)},getDataSourceImage:function getDataSourceImage(t){null!=t&&1!==this.frameTotal||(t="__BASE");var i,o=this.frames[t];return o?i=o.sourceIndex:(console.warn(S+t),i=this.frames.__BASE.sourceIndex),this.dataSource[i].image},setDataSource:function setDataSource(t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var o=this.source[i];this.dataSource.push(new b(this,t[i],o.width,o.height))}},setFilter:function setFilter(t){var i;for(i=0;i<this.source.length;i++)this.source[i].setFilter(t);for(i=0;i<this.dataSource.length;i++)this.dataSource[i].setFilter(t)},destroy:function destroy(){var t;for(t=0;t<this.source.length;t++)this.source[t].destroy();for(t=0;t<this.dataSource.length;t++)this.dataSource[t].destroy();for(var i in this.frames)this.frames[i].destroy();this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var o=this.manager.game.renderer;o&&o.type===a.WEBGL&&o.resetTextures(!0),this.manager=null}});t.exports=C},function(t,i,o){var a=o(78);t.exports=function GetAll(t,i,o,u,d){void 0===u&&(u=0),void 0===d&&(d=t.length);var b=[];if(a(t,u,d))for(var S=u;S<d;S++){var C=t[S];(!i||i&&void 0===o&&C.hasOwnProperty(i)||i&&void 0!==o&&C[i]===o)&&b.push(C)}return b}},function(t,i,o){t.exports={Matrix:o(1013),Add:o(1021),AddAt:o(1022),BringToTop:o(1023),CountAllMatching:o(1024),Each:o(1025),EachInRange:o(1026),FindClosestInSorted:o(318),GetAll:o(207),GetFirst:o(428),GetRandom:o(210),MoveDown:o(1027),MoveTo:o(1028),MoveUp:o(1029),MoveAbove:o(1030),MoveBelow:o(1031),NumberArray:o(322),NumberArrayStep:o(1032),QuickSelect:o(436),Range:o(437),Remove:o(93),RemoveAt:o(1033),RemoveBetween:o(1034),RemoveRandomElement:o(1035),Replace:o(1036),RotateLeft:o(178),RotateRight:o(179),SafeRange:o(78),SendToBack:o(1037),SetAll:o(1038),Shuffle:o(131),SortByDigits:o(320),SpliceOne:o(74),StableSort:o(79),Swap:o(1039)}},function(t,i){t.exports=function CheckMatrix(t){if(!Array.isArray(t)||t.length<2||!Array.isArray(t[0]))return!1;for(var i=t[0].length,o=1;o<t.length;o++)if(t[o].length!==i)return!1;return!0}},function(t,i){t.exports=function GetRandom(t,i,o){void 0===i&&(i=0),void 0===o&&(o=t.length);var a=i+Math.floor(Math.random()*o);return void 0===t[a]?null:t[a]}},function(t,i,o){var a=o(0),u=o(9),d=o(438),b=new a({Extends:u,initialize:function ProcessQueue(){u.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function add(t){return this._pending.push(t),this._toProcess++,t},remove:function remove(t){return this._destroy.push(t),this._toProcess++,t},removeAll:function removeAll(){for(var t=this._active,i=this._destroy,o=t.length;o--;)i.push(t[o]),this._toProcess++;return this},update:function update(){if(0===this._toProcess)return this._active;var t,i,o=this._destroy,a=this._active;for(t=0;t<o.length;t++){i=o[t];var u=a.indexOf(i);-1!==u&&(a.splice(u,1),this.emit(d.PROCESS_QUEUE_REMOVE,i))}for(o.length=0,o=this._pending,t=0;t<o.length;t++)i=o[t],(!this.checkQueue||this.checkQueue&&-1===a.indexOf(i))&&(a.push(i),this.emit(d.PROCESS_QUEUE_ADD,i));return o.length=0,this._toProcess=0,a},getActive:function getActive(){return this._active},length:{get:function get(){return this._active.length}},destroy:function destroy(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});t.exports=b},function(t,i){function getValue(t,i){return parseInt(t.getAttribute(i),10)}t.exports=function ParseXMLBitmapFont(t,i,o,a,u){void 0===o&&(o=0),void 0===a&&(a=0);var d=i.cutX,b=i.cutY,S=i.source.width,C=i.source.height,M=i.sourceIndex,P={},R=t.getElementsByTagName("info")[0],O=t.getElementsByTagName("common")[0];P.font=R.getAttribute("face"),P.size=getValue(R,"size"),P.lineHeight=getValue(O,"lineHeight")+a,P.chars={};var B=t.getElementsByTagName("char"),N=void 0!==i&&i.trimmed;if(N)var Y=i.height,G=i.width;for(var X=0;X<B.length;X++){var U=B[X],z=getValue(U,"id"),V=String.fromCharCode(z),W=getValue(U,"x"),H=getValue(U,"y"),j=getValue(U,"width"),q=getValue(U,"height");N&&(W<G&&(G=W),H<Y&&(Y=H)),N&&0!==Y&&0!==G&&(W-=i.x,H-=i.y);var Z=(d+W)/S,K=(b+H)/C,$=(d+W+j)/S,tt=(b+H+q)/C;if(P.chars[z]={x:W,y:H,width:j,height:q,centerX:Math.floor(j/2),centerY:Math.floor(q/2),xOffset:getValue(U,"xoffset"),yOffset:getValue(U,"yoffset"),xAdvance:getValue(U,"xadvance")+o,data:{},kerning:{},u0:Z,v0:K,u1:$,v1:tt},u&&0!==j&&0!==q){var et=u.add(V,M,W,H,j,q);et&&et.setUVs(j,q,Z,K,$,tt)}}var it=t.getElementsByTagName("kerning");for(X=0;X<it.length;X++){var nt=it[X],rt=getValue(nt,"first"),st=getValue(nt,"second"),ot=getValue(nt,"amount");P.chars[st].kerning[rt]=ot}return P}},function(t,i,o){var a=o(1049),u=o(440),d=o(0),b=o(11),S=o(109),C=o(15),M=o(110),P=new d({Extends:C,Mixins:[b.Alpha,b.BlendMode,b.Depth,b.Mask,b.Pipeline,b.ScrollFactor,b.Size,b.Texture,b.Transform,b.Visible,a],initialize:function Blitter(t,i,o,a,u){C.call(this,t,"Blitter"),this.setTexture(a,u),this.setPosition(i,o),this.initPipeline(),this.children=new M,this.renderList=[],this.dirty=!1},create:function create(t,i,o,a,d){void 0===a&&(a=!0),void 0===d&&(d=this.children.length),void 0===o?o=this.frame:o instanceof S||(o=this.texture.get(o));var b=new u(this,t,i,o,a);return this.children.addAt(b,d,!1),this.dirty=!0,b},createFromCallback:function createFromCallback(t,i,o,a){for(var u=this.createMultiple(i,o,a),d=0;d<u.length;d++){var b=u[d];t.call(this,b,d)}return u},createMultiple:function createMultiple(t,i,o){void 0===i&&(i=this.frame.name),void 0===o&&(o=!0),Array.isArray(i)||(i=[i]);var a=[],u=this;return i.forEach((function(i){for(var d=0;d<t;d++)a.push(u.create(0,0,i,o))})),a},childCanRender:function childCanRender(t){return t.visible&&t.alpha>0},getRenderList:function getRenderList(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function clear(){this.children.removeAll(),this.dirty=!0},preDestroy:function preDestroy(){this.children.destroy(),this.renderList=[]}});t.exports=P},function(t,i,o){var a=o(208),u=o(35),d=o(0),b=o(11),S=o(75),C=o(15),M=o(10),P=o(1052),R=o(441),O=o(3),B=new d({Extends:C,Mixins:[b.AlphaSingle,b.BlendMode,b.ComputedSize,b.Depth,b.Mask,b.Pipeline,b.Transform,b.Visible,P],initialize:function Container(t,i,o,a){C.call(this,t,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new b.TransformMatrix,this.tempTransformMatrix=new b.TransformMatrix,this._sortKey="",this._sysEvents=t.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(i,o),this.clearAlpha(),this.setBlendMode(u.SKIP_CHECK),a&&this.add(a)},originX:{get:function get(){return.5}},originY:{get:function get(){return.5}},displayOriginX:{get:function get(){return.5*this.width}},displayOriginY:{get:function get(){return.5*this.height}},setExclusive:function setExclusive(t){return void 0===t&&(t=!0),this.exclusive=t,this},getBounds:function getBounds(t){if(void 0===t&&(t=new M),t.setTo(this.x,this.y,0,0),this.parentContainer){var i=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y);t.setTo(i.x,i.y,0,0)}if(this.list.length>0){var o=this.list,a=new M,u=!1;t.setEmpty();for(var d=0;d<o.length;d++){var b=o[d];b.getBounds&&(b.getBounds(a),u?R(a,t,t):(t.setTo(a.x,a.y,a.width,a.height),u=!0))}}return t},addHandler:function addHandler(t){t.once(S.DESTROY,this.remove,this),this.exclusive&&(t.parentContainer&&t.parentContainer.remove(t),t.removeFromDisplayList(),t.parentContainer=this)},removeHandler:function removeHandler(t){t.off(S.DESTROY,this.remove),this.exclusive&&(t.parentContainer=null,t.addToDisplayList())},pointToContainer:function pointToContainer(t,i){void 0===i&&(i=new O),this.parentContainer?this.parentContainer.pointToContainer(t,i):i=new O(t.x,t.y);var o=this.tempTransformMatrix;return o.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),o.invert(),o.transformPoint(t.x,t.y,i),i},getBoundsTransformMatrix:function getBoundsTransformMatrix(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function add(t){return a.Add(this.list,t,this.maxSize,this.addHandler,this),this},addAt:function addAt(t,i){return a.AddAt(this.list,t,i,this.maxSize,this.addHandler,this),this},getAt:function getAt(t){return this.list[t]},getIndex:function getIndex(t){return this.list.indexOf(t)},sort:function sort(t,i){return t?(void 0===i&&(i=function handler(i,o){return i[t]-o[t]}),a.StableSort(this.list,i),this):this},getByName:function getByName(t){return a.GetFirst(this.list,"name",t)},getRandom:function getRandom(t,i){return a.GetRandom(this.list,t,i)},getFirst:function getFirst(t,i,o,u){return a.GetFirst(this.list,t,i,o,u)},getAll:function getAll(t,i,o,u){return a.GetAll(this.list,t,i,o,u)},count:function count(t,i,o,u){return a.CountAllMatching(this.list,t,i,o,u)},swap:function swap(t,i){return a.Swap(this.list,t,i),this},moveTo:function moveTo(t,i){return a.MoveTo(this.list,t,i),this},moveAbove:function moveAbove(t,i){return a.MoveAbove(this.list,t,i),this},moveBelow:function moveBelow(t,i){return a.MoveBelow(this.list,t,i),this},remove:function remove(t,i){var o=a.Remove(this.list,t,this.removeHandler,this);if(i&&o){Array.isArray(o)||(o=[o]);for(var u=0;u<o.length;u++)o[u].destroy()}return this},removeAt:function removeAt(t,i){var o=a.RemoveAt(this.list,t,this.removeHandler,this);return i&&o&&o.destroy(),this},removeBetween:function removeBetween(t,i,o){var u=a.RemoveBetween(this.list,t,i,this.removeHandler,this);if(o)for(var d=0;d<u.length;d++)u[d].destroy();return this},removeAll:function removeAll(t){var i=a.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(t)for(var o=0;o<i.length;o++)i[o].destroy();return this},bringToTop:function bringToTop(t){return a.BringToTop(this.list,t),this},sendToBack:function sendToBack(t){return a.SendToBack(this.list,t),this},moveUp:function moveUp(t){return a.MoveUp(this.list,t),this},moveDown:function moveDown(t){return a.MoveDown(this.list,t),this},reverse:function reverse(){return this.list.reverse(),this},shuffle:function shuffle(){return a.Shuffle(this.list),this},replace:function replace(t,i,o){return a.Replace(this.list,t,i)&&(this.addHandler(i),this.removeHandler(t),o&&t.destroy()),this},exists:function exists(t){return this.list.indexOf(t)>-1},setAll:function setAll(t,i,o,u){return a.SetAll(this.list,t,i,o,u),this},each:function each(t,i){var o,a=[null],u=this.list.slice(),d=u.length;for(o=2;o<arguments.length;o++)a.push(arguments[o]);for(o=0;o<d;o++)a[0]=u[o],t.apply(i,a);return this},iterate:function iterate(t,i){var o,a=[null];for(o=2;o<arguments.length;o++)a.push(arguments[o]);for(o=0;o<this.list.length;o++)a[0]=this.list[o],t.apply(i,a);return this},setScrollFactor:function setScrollFactor(t,i,o){return void 0===i&&(i=t),void 0===o&&(o=!1),this.scrollFactorX=t,this.scrollFactorY=i,o&&(a.SetAll(this.list,"scrollFactorX",t),a.SetAll(this.list,"scrollFactorY",i)),this},length:{get:function get(){return this.list.length}},first:{get:function get(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function get(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function get(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function get(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function preDestroy(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});t.exports=B},function(t,i,o){var a=o(148),u=o(0),d=o(1057),b=new u({Extends:a,Mixins:[d],initialize:function DynamicBitmapText(t,i,o,u,d,b,S){a.call(this,t,i,o,u,d,b,S),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function setSize(t,i){return this.cropWidth=t,this.cropHeight=i,this},setDisplayCallback:function setDisplayCallback(t){return this.displayCallback=t,this},setScrollX:function setScrollX(t){return this.scrollX=t,this},setScrollY:function setScrollY(t){return this.scrollY=t,this}});t.exports=b},function(t,i,o){var a=o(133),u=o(0),d=o(217),b=o(303),S=o(304),C=o(305),M=o(309),P=o(167),R=o(312),O=o(313),B=o(314),N=o(111),Y=o(15),G=o(2),X=o(6),U=o(14),z=o(1063),V=new u({Extends:Y,Mixins:[b,S,C,M,P,O,B,R,z],initialize:function Graphics(t,i){var o=X(i,"x",0),a=X(i,"y",0);Y.call(this,t,"Graphics"),this.setPosition(o,a),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(i)},setDefaultStyles:function setDefaultStyles(t){return X(t,"lineStyle",null)&&(this.defaultStrokeWidth=X(t,"lineStyle.width",1),this.defaultStrokeColor=X(t,"lineStyle.color",16777215),this.defaultStrokeAlpha=X(t,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),X(t,"fillStyle",null)&&(this.defaultFillColor=X(t,"fillStyle.color",16777215),this.defaultFillAlpha=X(t,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function lineStyle(t,i,o){return void 0===o&&(o=1),this.commandBuffer.push(d.LINE_STYLE,t,i,o),this._lineWidth=t,this},fillStyle:function fillStyle(t,i){return void 0===i&&(i=1),this.commandBuffer.push(d.FILL_STYLE,t,i),this},fillGradientStyle:function fillGradientStyle(t,i,o,a,u,b,S,C){return void 0===u&&(u=1),void 0===b&&(b=u),void 0===S&&(S=u),void 0===C&&(C=u),this.commandBuffer.push(d.GRADIENT_FILL_STYLE,u,b,S,C,t,i,o,a),this},lineGradientStyle:function lineGradientStyle(t,i,o,a,u,b){return void 0===b&&(b=1),this.commandBuffer.push(d.GRADIENT_LINE_STYLE,t,b,i,o,a,u),this},beginPath:function beginPath(){return this.commandBuffer.push(d.BEGIN_PATH),this},closePath:function closePath(){return this.commandBuffer.push(d.CLOSE_PATH),this},fillPath:function fillPath(){return this.commandBuffer.push(d.FILL_PATH),this},fill:function fill(){return this.commandBuffer.push(d.FILL_PATH),this},strokePath:function strokePath(){return this.commandBuffer.push(d.STROKE_PATH),this},stroke:function stroke(){return this.commandBuffer.push(d.STROKE_PATH),this},fillCircleShape:function fillCircleShape(t){return this.fillCircle(t.x,t.y,t.radius)},strokeCircleShape:function strokeCircleShape(t){return this.strokeCircle(t.x,t.y,t.radius)},fillCircle:function fillCircle(t,i,o){return this.beginPath(),this.arc(t,i,o,0,U.PI2),this.fillPath(),this},strokeCircle:function strokeCircle(t,i,o){return this.beginPath(),this.arc(t,i,o,0,U.PI2),this.strokePath(),this},fillRectShape:function fillRectShape(t){return this.fillRect(t.x,t.y,t.width,t.height)},strokeRectShape:function strokeRectShape(t){return this.strokeRect(t.x,t.y,t.width,t.height)},fillRect:function fillRect(t,i,o,a){return this.commandBuffer.push(d.FILL_RECT,t,i,o,a),this},strokeRect:function strokeRect(t,i,o,a){var u=this._lineWidth/2,d=t-u,b=t+u;return this.beginPath(),this.moveTo(t,i),this.lineTo(t,i+a),this.strokePath(),this.beginPath(),this.moveTo(t+o,i),this.lineTo(t+o,i+a),this.strokePath(),this.beginPath(),this.moveTo(d,i),this.lineTo(b+o,i),this.strokePath(),this.beginPath(),this.moveTo(d,i+a),this.lineTo(b+o,i+a),this.strokePath(),this},fillRoundedRect:function fillRoundedRect(t,i,o,a,u){void 0===u&&(u=20);var d=u,b=u,S=u,C=u;return"number"!=typeof u&&(d=G(u,"tl",20),b=G(u,"tr",20),S=G(u,"bl",20),C=G(u,"br",20)),this.beginPath(),this.moveTo(t+d,i),this.lineTo(t+o-b,i),this.arc(t+o-b,i+b,b,-U.TAU,0),this.lineTo(t+o,i+a-C),this.arc(t+o-C,i+a-C,C,0,U.TAU),this.lineTo(t+S,i+a),this.arc(t+S,i+a-S,S,U.TAU,Math.PI),this.lineTo(t,i+d),this.arc(t+d,i+d,d,-Math.PI,-U.TAU),this.fillPath(),this},strokeRoundedRect:function strokeRoundedRect(t,i,o,a,u){void 0===u&&(u=20);var d=u,b=u,S=u,C=u;return"number"!=typeof u&&(d=G(u,"tl",20),b=G(u,"tr",20),S=G(u,"bl",20),C=G(u,"br",20)),this.beginPath(),this.moveTo(t+d,i),this.lineTo(t+o-b,i),this.moveTo(t+o-b,i),this.arc(t+o-b,i+b,b,-U.TAU,0),this.lineTo(t+o,i+a-C),this.moveTo(t+o,i+a-C),this.arc(t+o-C,i+a-C,C,0,U.TAU),this.lineTo(t+S,i+a),this.moveTo(t+S,i+a),this.arc(t+S,i+a-S,S,U.TAU,Math.PI),this.lineTo(t,i+d),this.moveTo(t,i+d),this.arc(t+d,i+d,d,-Math.PI,-U.TAU),this.strokePath(),this},fillPointShape:function fillPointShape(t,i){return this.fillPoint(t.x,t.y,i)},fillPoint:function fillPoint(t,i,o){return!o||o<1?o=1:(t-=o/2,i-=o/2),this.commandBuffer.push(d.FILL_RECT,t,i,o,o),this},fillTriangleShape:function fillTriangleShape(t){return this.fillTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},strokeTriangleShape:function strokeTriangleShape(t){return this.strokeTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},fillTriangle:function fillTriangle(t,i,o,a,u,b){return this.commandBuffer.push(d.FILL_TRIANGLE,t,i,o,a,u,b),this},strokeTriangle:function strokeTriangle(t,i,o,a,u,b){return this.commandBuffer.push(d.STROKE_TRIANGLE,t,i,o,a,u,b),this},strokeLineShape:function strokeLineShape(t){return this.lineBetween(t.x1,t.y1,t.x2,t.y2)},lineBetween:function lineBetween(t,i,o,a){return this.beginPath(),this.moveTo(t,i),this.lineTo(o,a),this.strokePath(),this},lineTo:function lineTo(t,i){return this.commandBuffer.push(d.LINE_TO,t,i),this},moveTo:function moveTo(t,i){return this.commandBuffer.push(d.MOVE_TO,t,i),this},strokePoints:function strokePoints(t,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=!1),void 0===a&&(a=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var u=1;u<a;u++)this.lineTo(t[u].x,t[u].y);return i&&this.lineTo(t[0].x,t[0].y),o&&this.closePath(),this.strokePath(),this},fillPoints:function fillPoints(t,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=!1),void 0===a&&(a=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var u=1;u<a;u++)this.lineTo(t[u].x,t[u].y);return i&&this.lineTo(t[0].x,t[0].y),o&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function strokeEllipseShape(t,i){void 0===i&&(i=32);var o=t.getPoints(i);return this.strokePoints(o,!0)},strokeEllipse:function strokeEllipse(t,i,o,a,u){void 0===u&&(u=32);var d=new N(t,i,o,a).getPoints(u);return this.strokePoints(d,!0)},fillEllipseShape:function fillEllipseShape(t,i){void 0===i&&(i=32);var o=t.getPoints(i);return this.fillPoints(o,!0)},fillEllipse:function fillEllipse(t,i,o,a,u){void 0===u&&(u=32);var d=new N(t,i,o,a).getPoints(u);return this.fillPoints(d,!0)},arc:function arc(t,i,o,a,u,b,S){return void 0===b&&(b=!1),void 0===S&&(S=0),this.commandBuffer.push(d.ARC,t,i,o,a,u,b,S),this},slice:function slice(t,i,o,a,u,b,S){return void 0===b&&(b=!1),void 0===S&&(S=0),this.commandBuffer.push(d.BEGIN_PATH),this.commandBuffer.push(d.MOVE_TO,t,i),this.commandBuffer.push(d.ARC,t,i,o,a,u,b,S),this.commandBuffer.push(d.CLOSE_PATH),this},save:function save(){return this.commandBuffer.push(d.SAVE),this},restore:function restore(){return this.commandBuffer.push(d.RESTORE),this},translateCanvas:function translateCanvas(t,i){return this.commandBuffer.push(d.TRANSLATE,t,i),this},scaleCanvas:function scaleCanvas(t,i){return this.commandBuffer.push(d.SCALE,t,i),this},rotateCanvas:function rotateCanvas(t){return this.commandBuffer.push(d.ROTATE,t),this},clear:function clear(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function generateTexture(t,i,o){var a,u,d=this.scene.sys,b=d.game.renderer;if(void 0===i&&(i=d.scale.width),void 0===o&&(o=d.scale.height),V.TargetCamera.setScene(this.scene),V.TargetCamera.setViewport(0,0,i,o),V.TargetCamera.scrollX=this.x,V.TargetCamera.scrollY=this.y,"string"==typeof t)if(d.textures.exists(t)){var S=(a=d.textures.get(t)).getSourceImage();S instanceof HTMLCanvasElement&&(u=S.getContext("2d"))}else u=(a=d.textures.createCanvas(t,i,o)).getSourceImage().getContext("2d");else t instanceof HTMLCanvasElement&&(u=t.getContext("2d"));return u&&(this.renderCanvas(b,this,V.TargetCamera,null,u,!1),a&&a.refresh()),this},preDestroy:function preDestroy(){this.commandBuffer=[]}});V.TargetCamera=new a,t.exports=V},function(t,i){t.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(t,i,o){var a=o(4);t.exports=function CircumferencePoint(t,i,o){void 0===o&&(o=new a);var u=t.width/2,d=t.height/2;return o.x=t.x+u*Math.cos(i),o.y=t.y+d*Math.sin(i),o}},function(t,i,o){var a=o(35),u=o(0),d=o(11),b=o(176),S=o(101),C=o(9),M=o(75),P=o(110),R=o(1071),O=o(20),B=o(79),N=new u({Extends:P,Mixins:[d.AlphaSingle,d.BlendMode,d.Depth,d.Mask,d.Pipeline,d.Visible,C,R],initialize:function Layer(t,i){P.call(this,t),C.call(this),this.scene=t,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=t.sys,this.events=t.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(a.SKIP_CHECK),i&&this.add(i),t.sys.queueDepthSort()},setActive:function setActive(t){return this.active=t,this},setName:function setName(t){return this.name=t,this},setState:function setState(t){return this.state=t,this},setDataEnabled:function setDataEnabled(){return this.data||(this.data=new S(this)),this},setData:function setData(t,i){return this.data||(this.data=new S(this)),this.data.set(t,i),this},incData:function incData(t,i){return this.data||(this.data=new S(this)),this.data.inc(t,i),this},toggleData:function toggleData(t){return this.data||(this.data=new S(this)),this.data.toggle(t),this},getData:function getData(t){return this.data||(this.data=new S(this)),this.data.get(t)},setInteractive:function setInteractive(){return this},disableInteractive:function disableInteractive(){return this},removeInteractive:function removeInteractive(){return this},addedToScene:function addedToScene(){},removedFromScene:function removedFromScene(){},update:function update(){},toJSON:function toJSON(){return b(this)},willRender:function willRender(t){return!(15!==this.renderFlags||0===this.list.length||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function getIndexList(){for(var t=this,i=this.parentContainer,o=[];i&&(o.unshift(i.getIndex(t)),t=i,i.parentContainer);)i=i.parentContainer;return o.unshift(this.displayList.getIndex(t)),o},addChildCallback:function addChildCallback(t){t.displayList&&t.displayList!==this&&t.removeFromDisplayList(),t.displayList||(this.queueDepthSort(),t.displayList=this,t.emit(M.ADDED_TO_SCENE,t,this.scene),this.events.emit(O.ADDED_TO_SCENE,t,this.scene))},removeChildCallback:function removeChildCallback(t){this.queueDepthSort(),t.displayList=null,t.emit(M.REMOVED_FROM_SCENE,t,this.scene),this.events.emit(O.REMOVED_FROM_SCENE,t,this.scene)},queueDepthSort:function queueDepthSort(){this.sortChildrenFlag=!0},depthSort:function depthSort(){this.sortChildrenFlag&&(B(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function sortByDepth(t,i){return t._depth-i._depth},getChildren:function getChildren(){return this.list},destroy:function destroy(){if(this.scene&&!this.ignoreDestroy){this.emit(M.DESTROY,this);for(var t=this.list.length;t--;)this.list[t].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});t.exports=N},function(t,i,o){var a=o(0),u=o(11),d=o(15),b=o(450),S=o(110),C=o(452),M=o(1075),P=new a({Extends:d,Mixins:[u.Depth,u.Mask,u.Pipeline,u.Transform,u.Visible,M],initialize:function ParticleEmitterManager(t,i,o,a){if(d.call(this,t,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],null===o||"object"!==_typeof(o)&&!Array.isArray(o)||(a=o,o=null),this.setTexture(i,o),this.initPipeline(),this.emitters=new S(this),this.wells=new S(this),a){Array.isArray(a)||(a=[a]);for(var u=0;u<a.length;u++)this.createEmitter(a[u])}},addedToScene:function addedToScene(){this.scene.sys.updateList.add(this)},removedFromScene:function removedFromScene(){this.scene.sys.updateList.remove(this)},setTexture:function setTexture(t,i){return this.texture=this.scene.sys.textures.get(t),this.setFrame(i)},setFrame:function setFrame(t){this.frame=this.texture.get(t);var i=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),o=[];return i.forEach((function(t){o.push(t.name)})),this.frameNames=o,this.defaultFrame=this.frame,this},setEmitterFrames:function setEmitterFrames(t,i){Array.isArray(t)||(t=[t]);var o=i.frames;o.length=0;for(var a=0;a<t.length;a++){var u=t[a];-1!==this.frameNames.indexOf(u)&&o.push(this.texture.get(u))}return o.length>0?i.defaultFrame=o[0]:i.defaultFrame=this.defaultFrame,this},addEmitter:function addEmitter(t){return this.emitters.add(t)},createEmitter:function createEmitter(t){return this.addEmitter(new C(this,t))},removeEmitter:function removeEmitter(t){return this.emitters.remove(t,!0)},addGravityWell:function addGravityWell(t){return this.wells.add(t)},createGravityWell:function createGravityWell(t){return this.addGravityWell(new b(t))},emitParticle:function emitParticle(t,i,o){for(var a=this.emitters.list,u=0;u<a.length;u++){var d=a[u];d.active&&d.emitParticle(t,i,o)}return this},emitParticleAt:function emitParticleAt(t,i,o){return this.emitParticle(o,t,i)},pause:function pause(){return this.active=!1,this},resume:function resume(){return this.active=!0,this},getProcessors:function getProcessors(){return this.wells.getAll("active",!0)},preUpdate:function preUpdate(t,i){i*=this.timeScale;for(var o=this.emitters.list,a=0;a<o.length;a++){var u=o[a];u.active&&u.preUpdate(t,i)}},setAlpha:function setAlpha(){},setScrollFactor:function setScrollFactor(){},setBlendMode:function setBlendMode(){}});t.exports=P},function(t,i,o){var a=o(35),u=o(133),d=o(31),b=o(0),S=o(11),C=o(33),M=o(109),P=o(15),R=o(1),O=o(92),B=o(1079),N=o(141),Y=o(12),G=o(222),X=new b({Extends:P,Mixins:[S.Alpha,S.BlendMode,S.ComputedSize,S.Crop,S.Depth,S.Flip,S.GetBounds,S.Mask,S.Origin,S.Pipeline,S.ScrollFactor,S.Tint,S.Transform,S.Visible,B],initialize:function RenderTexture(t,i,o,a,b,S,M){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=32),void 0===b&&(b=32),P.call(this,t,"RenderTexture"),this.renderer=t.sys.renderer,this.textureManager=t.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,void 0===S?(this.canvas=d.create2D(this,a,b),this.texture=t.sys.textures.addCanvas(G(),this.canvas),this.frame=this.texture.get()):(this.texture=t.sys.textures.get(S),this.frame=this.texture.get(M),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new u(0,0,a,b),this.renderTarget=null;var B=this.renderer;B?B.type===C.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new N(B,a,b,1,0,!1)):B.type===C.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=R,this.camera.setScene(t),this.setPosition(i,o),void 0===S&&this.setSize(a,b),this.setOrigin(0,0),this.initPipeline(O.SINGLE_PIPELINE)},setSize:function setSize(t,i){return this.resize(t,i)},resize:function resize(t,i){void 0===i&&(i=t);var o=this.frame;if(t!==this.width||i!==this.height){if("__BASE"===o.name){this.canvas.width=t,this.canvas.height=i,this.texture.width=t,this.texture.height=i;var a=this.renderTarget;a&&(a.resize(t,i),o.glTexture=a.texture,o.source.isRenderTexture=!0,o.source.isGLTexture=!0,o.source.glTexture=a.texture),this.camera.setSize(t,i),o.source.width=t,o.source.height=i,o.setSize(t,i),this.width=t,this.height=i}}else{var u=this.texture.getSourceImage();o.cutX+t>u.width&&(t=u.width-o.cutX),o.cutY+i>u.height&&(i=u.height-o.cutY),o.setSize(t,i,o.cutX,o.cutY)}this.updateDisplayOrigin();var d=this.input;return d&&!d.customHitArea&&(d.hitArea.width=t,d.hitArea.height=i),this},setGlobalTint:function setGlobalTint(t){return this.globalTint=t,this},setGlobalAlpha:function setGlobalAlpha(t){return this.globalAlpha=t,this},saveTexture:function saveTexture(t){return this.textureManager.renameTexture(this.texture.key,t),this._saved=!0,this.texture},fill:function fill(t,i,o,a,u,d){var b=this.frame,S=this.camera,C=this.renderer;void 0===i&&(i=1),void 0===o&&(o=0),void 0===a&&(a=0),void 0===u&&(u=b.cutWidth),void 0===d&&(d=b.cutHeight);var M=(t>>16&255)/255,P=(t>>8&255)/255,R=(255&t)/255,O=this.renderTarget;if(S.preRender(),O){O.bind(!0);var B=this.pipeline;B.manager.set(B);var N=O.width,G=O.height,X=C.width/N,U=C.height/G;B.drawFillRect(o*X,a*U,u*X,d*U,Y.getTintFromFloats(R,P,M,1),i),O.unbind(!0)}else{var z=this.context;C.setContext(z),z.fillStyle="rgba("+M+","+P+","+R+","+i+")",z.fillRect(o+b.cutX,a+b.cutY,u,d),C.setContext()}return this.dirty=!0,this},clear:function clear(){if(this.dirty){var t=this.renderTarget;if(t)t.clear();else{var i=this.context;i.save(),i.setTransform(1,0,0,1,0,0),i.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),i.restore()}this.dirty=!1}return this},erase:function erase(t,i,o){return this._eraseMode=!0,this.draw(t,i,o,1,16777215),this._eraseMode=!1,this},draw:function draw(t,i,o,a,u){return this.beginDraw(),this.batchDraw(t,i,o,a,u),this.endDraw(),this},drawFrame:function drawFrame(t,i,o,a,u,d){return this.beginDraw(),this.batchDrawFrame(t,i,o,a,u,d),this.endDraw(),this},beginDraw:function beginDraw(){var t=this.camera,i=this.renderer,o=this.renderTarget;return t.preRender(),o?i.beginCapture(o.width,o.height):i.setContext(this.context),this},batchDraw:function batchDraw(t,i,o,a,u){return void 0===a&&(a=this.globalAlpha),u=void 0===u?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(u>>16)+(65280&u)+((255&u)<<16),Array.isArray(t)||(t=[t]),this.batchList(t,i,o,a,u),this},batchDrawFrame:function batchDrawFrame(t,i,o,a,u,d){void 0===o&&(o=0),void 0===a&&(a=0),void 0===u&&(u=this.globalAlpha),d=void 0===d?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(d>>16)+(65280&d)+((255&d)<<16);var b=this.textureManager.getFrame(t,i);return b&&(this.renderTarget?this.pipeline.batchTextureFrame(b,o,a,d,u,this.camera.matrix,null):this.batchTextureFrame(b,o+this.frame.cutX,a+this.frame.cutY,u,d)),this},endDraw:function endDraw(t){void 0===t&&(t=this._eraseMode);var i=this.renderer,o=this.renderTarget;if(o){var a=i.endCapture();i.pipelines.setUtility().blitFrame(a,o,1,!1,!1,t),i.resetScissor(),i.resetViewport()}else i.setContext();return this.dirty=!0,this},batchList:function batchList(t,i,o,a,u){for(var d=0;d<t.length;d++){var b=t[d];b&&b!==this&&(b.renderWebGL||b.renderCanvas?this.drawGameObject(b,i,o):b.isParent||b.list?this.batchGroup(b.getChildren(),i,o):"string"==typeof b?this.batchTextureFrameKey(b,null,i,o,a,u):b instanceof M?this.batchTextureFrame(b,i,o,a,u):Array.isArray(b)&&this.batchList(b,i,o,a,u))}},batchGroup:function batchGroup(t,i,o){void 0===i&&(i=0),void 0===o&&(o=0),i+=this.frame.cutX,o+=this.frame.cutY;for(var a=0;a<t.length;a++){var u=t[a];if(u.willRender(this.camera)){var d=u.x+i,b=u.y+o;this.drawGameObject(u,d,b)}}},batchGameObjectWebGL:function batchGameObjectWebGL(t,i,o){void 0===i&&(i=t.x),void 0===o&&(o=t.y);var a=t.x,u=t.y;t.setPosition(i+this.frame.cutX,o+this.frame.cutY),t.renderDirect?t.renderDirect(this.renderer,t,this.camera):t.renderWebGL(this.renderer,t,this.camera),t.setPosition(a,u)},batchGameObjectCanvas:function batchGameObjectCanvas(t,i,o){void 0===i&&(i=t.x),void 0===o&&(o=t.y);var u=t.x,d=t.y;if(this._eraseMode){var b=t.blendMode;t.blendMode=a.ERASE}t.setPosition(i+this.frame.cutX,o+this.frame.cutY),t.renderCanvas(this.renderer,t,this.camera,null),t.setPosition(u,d),this._eraseMode&&(t.blendMode=b)},batchTextureFrameKey:function batchTextureFrameKey(t,i,o,a,u,d){var b=this.textureManager.getFrame(t,i);b&&this.batchTextureFrame(b,o,a,u,d)},batchTextureFrame:function batchTextureFrame(t,i,o,a,u){if(void 0===i&&(i=0),void 0===o&&(o=0),i+=this.frame.cutX,o+=this.frame.cutY,this.renderTarget)this.pipeline.batchTextureFrame(t,i,o,u,a,this.camera.matrix,null);else{var d=this.context,b=t.canvasData,S=t.source.image,C=this.camera.matrix;d.save(),d.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",d.globalAlpha=a,C.setToContext(d),d.drawImage(S,b.x,b.y,b.width,b.height,i,o,b.width,b.height),d.restore()}},snapshotArea:function snapshotArea(t,i,o,a,u,d,b){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,u,!1,t,i,o,a,d,b):this.renderer.snapshotCanvas(this.canvas,u,!1,t,i,o,a,d,b),this},snapshot:function snapshot(t,i,o){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,t,!1,0,0,this.width,this.height,i,o):this.renderer.snapshotCanvas(this.canvas,t,!1,0,0,this.width,this.height,i,o),this},snapshotPixel:function snapshotPixel(t,i,o){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,o,!0,t,i):this.renderer.snapshotCanvas(this.canvas,o,!0,t,i),this},preDestroy:function preDestroy(){this._saved||(d.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});t.exports=X},function(t,i){t.exports=function UUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var i=16*Math.random()|0;return("x"===t?i:3&i|8).toString(16)}))}},function(t,i,o){var a=o(164),u=o(0),d=o(11),b=o(15),S=o(92),C=o(1085),M=o(3),P=new u({Extends:b,Mixins:[d.AlphaSingle,d.BlendMode,d.Depth,d.Flip,d.Mask,d.Pipeline,d.Size,d.Texture,d.Transform,d.Visible,d.ScrollFactor,C],initialize:function Rope(t,i,o,u,d,C,P,R,O){void 0===u&&(u="__DEFAULT"),void 0===C&&(C=2),void 0===P&&(P=!0),b.call(this,t,"Rope"),this.anims=new a(this),this.points=C,this.vertices,this.uv,this.colors,this.alphas,this.tintFill="__DEFAULT"===u,this.dirty=!1,this.horizontal=P,this._flipX=!1,this._flipY=!1,this._perp=new M,this.debugCallback=null,this.debugGraphic=null,this.setTexture(u,d),this.setPosition(i,o),this.setSizeToFrame(),this.initPipeline(S.ROPE_PIPELINE),Array.isArray(C)&&this.resizeArrays(C.length),this.setPoints(C,R,O),this.updateVertices()},addedToScene:function addedToScene(){this.scene.sys.updateList.add(this)},removedFromScene:function removedFromScene(){this.scene.sys.updateList.remove(this)},preUpdate:function preUpdate(t,i){var o=this.anims.currentFrame;this.anims.update(t,i),this.anims.currentFrame!==o&&(this.updateUVs(),this.updateVertices())},play:function play(t,i,o){return this.anims.play(t,i,o),this},setDirty:function setDirty(){return this.dirty=!0,this},setHorizontal:function setHorizontal(t,i,o){return void 0===t&&(t=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(t,i,o))},setVertical:function setVertical(t,i,o){return void 0===t&&(t=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(t,i,o)):this},setTintFill:function setTintFill(t){return void 0===t&&(t=!1),this.tintFill=t,this},setAlphas:function setAlphas(t,i){var o=this.points.length;if(o<1)return this;var a,u=this.alphas;void 0===t?t=[1]:Array.isArray(t)||void 0!==i||(t=[t]);var d=0;if(void 0!==i)for(a=0;a<o;a++)u[d=2*a]=t,u[d+1]=i;else if(t.length===o)for(a=0;a<o;a++)u[d=2*a]=t[a],u[d+1]=t[a];else{var b=t[0];for(a=0;a<o;a++)d=2*a,t.length>d&&(b=t[d]),u[d]=b,t.length>d+1&&(b=t[d+1]),u[d+1]=b}return this},setColors:function setColors(t){var i=this.points.length;if(i<1)return this;var o,a=this.colors;void 0===t?t=[16777215]:Array.isArray(t)||(t=[t]);var u=0;if(t.length===i)for(o=0;o<i;o++)a[u=2*o]=t[o],a[u+1]=t[o];else{var d=t[0];for(o=0;o<i;o++)u=2*o,t.length>u&&(d=t[u]),a[u]=d,t.length>u+1&&(d=t[u+1]),a[u+1]=d}return this},setPoints:function setPoints(t,i,o){if(void 0===t&&(t=2),"number"==typeof t){var a,u,d,b=t;if(b<2&&(b=2),t=[],this.horizontal)for(d=-this.frame.halfWidth,u=this.frame.width/(b-1),a=0;a<b;a++)t.push({x:d+a*u,y:0});else for(d=-this.frame.halfHeight,u=this.frame.height/(b-1),a=0;a<b;a++)t.push({x:0,y:d+a*u})}var S=t.length,C=this.points.length;return S<1?(console.warn("Rope: Not enough points given"),this):(1===S&&(t.unshift({x:0,y:0}),S++),C!==S&&this.resizeArrays(S),this.points=t,this.updateUVs(),null!=i&&this.setColors(i),null!=o&&this.setAlphas(o),this)},updateUVs:function updateUVs(){for(var t=this.uv,i=this.points.length,o=this.frame.u0,a=this.frame.v0,u=this.frame.u1,d=this.frame.v1,b=(u-o)/(i-1),S=(d-a)/(i-1),C=0;C<i;C++){var M,P,R,O,B=4*C;this.horizontal?(this._flipX?(M=u-C*b,R=u-C*b):(M=o+C*b,R=o+C*b),this._flipY?(P=d,O=a):(P=a,O=d)):(this._flipX?(M=o,R=u):(M=u,R=o),this._flipY?(P=d-C*S,O=d-C*S):(P=a+C*S,O=a+C*S)),t[B+0]=M,t[B+1]=P,t[B+2]=R,t[B+3]=O}return this},resizeArrays:function resizeArrays(t){var i=this.colors,o=this.alphas;this.vertices=new Float32Array(4*t),this.uv=new Float32Array(4*t),i=new Uint32Array(2*t),o=new Float32Array(2*t);for(var a=0;a<2*t;a++)i[a]=16777215,o[a]=1;return this.colors=i,this.alphas=o,this.dirty=!0,this},updateVertices:function updateVertices(){var t=this._perp,i=this.points,o=this.vertices,a=i.length;if(this.dirty=!1,!(a<1)){for(var u,d=i[0],b=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,S=0;S<a;S++){var C=i[S],M=4*S;u=S<a-1?i[S+1]:C,t.x=u.y-d.y,t.y=-(u.x-d.x);var P=t.length();t.x/=P,t.y/=P,t.x*=b,t.y*=b,o[M]=C.x+t.x,o[M+1]=C.y+t.y,o[M+2]=C.x-t.x,o[M+3]=C.y-t.y,d=C}return this}},setDebug:function setDebug(t,i){return this.debugGraphic=t,this.debugCallback=t||i?i||this.renderDebugVerts:null,this},renderDebugVerts:function renderDebugVerts(t,i,o){var a=t.debugGraphic,u=o[0],d=o[1],b=o[2],S=o[3];a.lineBetween(u,d,b,S);for(var C=4;C<i;C+=4){var M=o[C+0],P=o[C+1],R=o[C+2],O=o[C+3];a.lineBetween(u,d,M,P),a.lineBetween(b,S,R,O),a.lineBetween(b,S,M,P),a.lineBetween(M,P,R,O),u=M,d=P,b=R,S=O}},preDestroy:function preDestroy(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function get(){return this._flipX},set:function set(t){return this._flipX=t,this.updateUVs()}},flipY:{get:function get(){return this._flipY},set:function set(t){return this._flipY=t,this.updateUVs()}}});t.exports=P},function(t,i,o){var a=o(142),u=o(31),d=o(0),b=o(11),S=o(22),C=o(15),M=o(458),P=o(6),R=o(202),O=o(1088),B=o(459),N=new d({Extends:C,Mixins:[b.Alpha,b.BlendMode,b.ComputedSize,b.Crop,b.Depth,b.Flip,b.GetBounds,b.Mask,b.Origin,b.Pipeline,b.ScrollFactor,b.Tint,b.Transform,b.Visible,O],initialize:function Text(t,i,o,a,d){void 0===i&&(i=0),void 0===o&&(o=0),C.call(this,t,"Text"),this.renderer=t.sys.renderer,this.setPosition(i,o),this.setOrigin(0,0),this.initPipeline(),this.canvas=u.create(this),this.context=this.canvas.getContext("2d"),this.style=new B(this,d),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,0===this.style.resolution&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(a),d&&d.padding&&this.setPadding(d.padding),d&&d.lineSpacing&&this.setLineSpacing(d.lineSpacing),t.sys.game.events.on(S.CONTEXT_RESTORED,(function(){this.dirty=!0}),this)},initRTL:function initRTL(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",a(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function runWordWrap(t){var i=this.style;if(i.wordWrapCallback){var o=i.wordWrapCallback.call(i.wordWrapCallbackScope,t,this);return Array.isArray(o)&&(o=o.join("\n")),o}return i.wordWrapWidth?i.wordWrapUseAdvanced?this.advancedWordWrap(t,this.context,this.style.wordWrapWidth):this.basicWordWrap(t,this.context,this.style.wordWrapWidth):t},advancedWordWrap:function advancedWordWrap(t,i,o){for(var a="",u=t.replace(/ +/gi," ").split(this.splitRegExp),d=u.length,b=0;b<d;b++){var S=u[b],C="";if(S=S.replace(/^ *|\s*$/gi,""),i.measureText(S).width<o)a+=S+"\n";else{for(var M=o,P=S.split(" "),R=0;R<P.length;R++){var O=P[R],B=O+" ",N=i.measureText(B).width;if(N>M){if(0===R){for(var Y=B;Y.length&&(Y=Y.slice(0,-1),!((N=i.measureText(Y).width)<=M)););if(!Y.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var G=O.substr(Y.length);P[R]=G,C+=Y}var X=P[R].length?R:R+1,U=P.slice(X).join(" ").replace(/[ \n]*$/gi,"");u[b+1]=U+" "+(u[b+1]||""),d=u.length;break}C+=B,M-=N}a+=C.replace(/[ \n]*$/gi,"")+"\n"}}return a=a.replace(/[\s|\n]*$/gi,"")},basicWordWrap:function basicWordWrap(t,i,o){for(var a="",u=t.split(this.splitRegExp),d=u.length-1,b=i.measureText(" ").width,S=0;S<=d;S++){for(var C=o,M=u[S].split(" "),P=M.length-1,R=0;R<=P;R++){var O=M[R],B=i.measureText(O).width,N=B;R<P&&(N+=b),N>C&&R>0&&(a+="\n",C=o),a+=O,R<P?(a+=" ",C-=N):C-=B}S<d&&(a+="\n")}return a},getWrappedText:function getWrappedText(t){return void 0===t&&(t=this._text),this.style.syncFont(this.canvas,this.context),this.runWordWrap(t).split(this.splitRegExp)},setText:function setText(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this._text&&(this._text=t.toString(),this.updateText()),this},setStyle:function setStyle(t){return this.style.setStyle(t)},setFont:function setFont(t){return this.style.setFont(t)},setFontFamily:function setFontFamily(t){return this.style.setFontFamily(t)},setFontSize:function setFontSize(t){return this.style.setFontSize(t)},setFontStyle:function setFontStyle(t){return this.style.setFontStyle(t)},setFixedSize:function setFixedSize(t,i){return this.style.setFixedSize(t,i)},setBackgroundColor:function setBackgroundColor(t){return this.style.setBackgroundColor(t)},setFill:function setFill(t){return this.style.setFill(t)},setColor:function setColor(t){return this.style.setColor(t)},setStroke:function setStroke(t,i){return this.style.setStroke(t,i)},setShadow:function setShadow(t,i,o,a,u,d){return this.style.setShadow(t,i,o,a,u,d)},setShadowOffset:function setShadowOffset(t,i){return this.style.setShadowOffset(t,i)},setShadowColor:function setShadowColor(t){return this.style.setShadowColor(t)},setShadowBlur:function setShadowBlur(t){return this.style.setShadowBlur(t)},setShadowStroke:function setShadowStroke(t){return this.style.setShadowStroke(t)},setShadowFill:function setShadowFill(t){return this.style.setShadowFill(t)},setWordWrapWidth:function setWordWrapWidth(t,i){return this.style.setWordWrapWidth(t,i)},setWordWrapCallback:function setWordWrapCallback(t,i){return this.style.setWordWrapCallback(t,i)},setAlign:function setAlign(t){return this.style.setAlign(t)},setResolution:function setResolution(t){return this.style.setResolution(t)},setLineSpacing:function setLineSpacing(t){return this.lineSpacing=t,this.updateText()},setPadding:function setPadding(t,i,o,a){if("object"===_typeof(t)){var u=t,d=P(u,"x",null);null!==d?(t=d,o=d):(t=P(u,"left",0),o=P(u,"right",t));var b=P(u,"y",null);null!==b?(i=b,a=b):(i=P(u,"top",0),a=P(u,"bottom",i))}else void 0===t&&(t=0),void 0===i&&(i=t),void 0===o&&(o=t),void 0===a&&(a=i);return this.padding.left=t,this.padding.top=i,this.padding.right=o,this.padding.bottom=a,this.updateText()},setMaxLines:function setMaxLines(t){return this.style.setMaxLines(t)},updateText:function updateText(){var t=this.canvas,i=this.context,o=this.style,a=o.resolution,u=o.metrics;o.syncFont(t,i);var d=this._text;(o.wordWrapWidth||o.wordWrapCallback)&&(d=this.runWordWrap(this._text));var b,S=d.split(this.splitRegExp),C=M(this,u,S),P=this.padding;0===o.fixedWidth?(this.width=C.width+P.left+P.right,b=C.width):(this.width=o.fixedWidth,(b=this.width-P.left-P.right)<C.width&&(b=C.width)),0===o.fixedHeight?this.height=C.height+P.top+P.bottom:this.height=o.fixedHeight;var R,O,B=this.width,N=this.height;this.updateDisplayOrigin(),B*=a,N*=a,B=Math.max(B,1),N=Math.max(N,1),t.width!==B||t.height!==N?(t.width=B,t.height=N,this.frame.setSize(B,N),o.syncFont(t,i)):i.clearRect(0,0,B,N),i.save(),i.scale(a,a),o.backgroundColor&&(i.fillStyle=o.backgroundColor,i.fillRect(0,0,B,N)),o.syncStyle(t,i),i.textBaseline="alphabetic",i.translate(P.left,P.top);for(var Y=0;Y<C.lines;Y++){if(R=o.strokeThickness/2,O=o.strokeThickness/2+Y*C.lineHeight+u.ascent,Y>0&&(O+=C.lineSpacing*Y),o.rtl)R=B-R;else if("right"===o.align)R+=b-C.lineWidths[Y];else if("center"===o.align)R+=(b-C.lineWidths[Y])/2;else if("justify"===o.align&&C.lineWidths[Y]/C.width>=.85){var G=C.width-C.lineWidths[Y],X=i.measureText(" ").width,U=S[Y].trim(),z=U.split(" ");G+=(S[Y].length-U.length)*X;for(var V=Math.floor(G/X),W=0;V>0;)z[W]+=" ",W=(W+1)%(z.length-1||1),--V;S[Y]=z.join(" ")}this.autoRound&&(R=Math.round(R),O=Math.round(O)),o.strokeThickness&&(this.style.syncShadow(i,o.shadowStroke),i.strokeText(S[Y],R,O)),o.color&&(this.style.syncShadow(i,o.shadowFill),i.fillText(S[Y],R,O))}i.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(t,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var H=this.input;return H&&!H.customHitArea&&(H.hitArea.width=this.width,H.hitArea.height=this.height),this},getTextMetrics:function getTextMetrics(){return this.style.getTextMetrics()},text:{get:function get(){return this._text},set:function set(t){this.setText(t)}},toJSON:function toJSON(){var t=b.ToJSON(this),i={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=i,t},preDestroy:function preDestroy(){this.style.rtl&&R(this.canvas),u.remove(this.canvas),this.texture.destroy()}});t.exports=N},function(t,i,o){var a=o(31),u=o(0),d=o(11),b=o(22),S=o(15),C=o(361),M=o(192),P=o(1091),R=o(3),O=new u({Extends:S,Mixins:[d.Alpha,d.BlendMode,d.ComputedSize,d.Crop,d.Depth,d.Flip,d.GetBounds,d.Mask,d.Origin,d.Pipeline,d.ScrollFactor,d.Tint,d.Transform,d.Visible,P],initialize:function TileSprite(t,i,o,u,d,M,P){var O=t.sys.renderer;S.call(this,t,"TileSprite");var B=t.sys.textures.get(M),N=B.get(P);u&&d?(u=Math.floor(u),d=Math.floor(d)):(u=N.width,d=N.height),this._tilePosition=new R,this._tileScale=new R(1,1),this.dirty=!1,this.renderer=O,this.canvas=a.create(this,u,d),this.context=this.canvas.getContext("2d"),this.displayTexture=B,this.displayFrame=N,this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=C(N.width),this.potHeight=C(N.height),this.fillCanvas=a.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(i,o),this.setSize(u,d),this.setFrame(P),this.setOriginFromFrame(),this.initPipeline(),t.sys.game.events.on(b.CONTEXT_RESTORED,(function(t){if(t){var i=t.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=t.createTexture2D(0,i.LINEAR,i.LINEAR,i.REPEAT,i.REPEAT,i.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}}),this)},setTexture:function setTexture(t,i){return this.displayTexture=this.scene.sys.textures.get(t),this.setFrame(i)},setFrame:function setFrame(t){var i=this.displayTexture.get(t);return this.potWidth=C(i.width),this.potHeight=C(i.height),this.canvas.width=0,i.cutWidth&&i.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this.displayFrame=i,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function setTilePosition(t,i){return void 0!==t&&(this.tilePositionX=t),void 0!==i&&(this.tilePositionY=i),this},setTileScale:function setTileScale(t,i){return void 0===t&&(t=this.tileScaleX),void 0===i&&(i=t),this.tileScaleX=t,this.tileScaleY=i,this},updateTileTexture:function updateTileTexture(){if(this.dirty&&this.renderer){var t=this.displayFrame;if(t.source.isRenderTexture||t.source.isGLTexture)return console.warn("TileSprites can only use Image or Canvas based textures"),void(this.dirty=!1);var i=this.fillContext,o=this.fillCanvas,a=this.potWidth,u=this.potHeight;this.renderer&&this.renderer.gl||(a=t.cutWidth,u=t.cutHeight),i.clearRect(0,0,a,u),o.width=a,o.height=u,i.drawImage(t.source.image,t.cutX,t.cutY,t.cutWidth,t.cutHeight,0,0,a,u),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(o,this.fillPattern):this.fillPattern=i.createPattern(o,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function updateCanvas(){var t=this.canvas;if(t.width===this.width&&t.height===this.height||(t.width=this.width,t.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl)this.dirty=!1;else{var i=this.context;this.scene.sys.game.config.antialias||M.disable(i);var o=this._tileScale.x,a=this._tileScale.y,u=this._tilePosition.x,d=this._tilePosition.y;i.clearRect(0,0,this.width,this.height),i.save(),i.scale(o,a),i.translate(-u,-d),i.fillStyle=this.fillPattern,i.fillRect(u,d,this.width/o,this.height/a),i.restore(),this.dirty=!1}},preDestroy:function preDestroy(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),a.remove(this.canvas),a.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function get(){return this._tilePosition.x},set:function set(t){this._tilePosition.x=t,this.dirty=!0}},tilePositionY:{get:function get(){return this._tilePosition.y},set:function set(t){this._tilePosition.y=t,this.dirty=!0}},tileScaleX:{get:function get(){return this._tileScale.x},set:function set(t){this._tileScale.x=t,this.dirty=!0}},tileScaleY:{get:function get(){return this._tileScale.y},set:function set(t){this._tileScale.y=t,this.dirty=!0}}});t.exports=O},function(t,i,o){var a=o(0),u=o(18),d=o(11),b=o(75),S=o(22),C=o(51),M=o(15),P=o(70),R=o(222),O=o(1094),B=o(14),N=new a({Extends:M,Mixins:[d.Alpha,d.BlendMode,d.Depth,d.Flip,d.GetBounds,d.Mask,d.Origin,d.Pipeline,d.ScrollFactor,d.Size,d.TextureCrop,d.Tint,d.Transform,d.Visible,O],initialize:function Video(t,i,o,a){M.call(this,t,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=R(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=B.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(i,o),this.initPipeline(),a&&this.changeSource(a,!1);var u=t.sys.game.events;u.on(S.PAUSE,this.globalPause,this),u.on(S.RESUME,this.globalResume,this);var d=t.sys.sound;d&&d.on(P.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function addedToScene(){this.scene.sys.updateList.add(this)},removedFromScene:function removedFromScene(){this.scene.sys.updateList.remove(this)},play:function play(t,i,o){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var a=this.video;if(!a)return console.warn("Video not loaded"),this;void 0===t&&(t=a.loop);var u=this.scene.sys.sound;u&&u.mute&&this.setMute(!0),isNaN(i)||(this._markerIn=i),!isNaN(o)&&o>i&&(this._markerOut=o),a.loop=t;var d=this._callbacks,b=a.play();return void 0!==b?b.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(a.addEventListener("playing",d.play,!0),a.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),a.addEventListener("ended",d.end,!0),a.addEventListener("timeupdate",d.time,!0),a.addEventListener("seeking",d.seeking,!0),a.addEventListener("seeked",d.seeked,!0),this},changeSource:function changeSource(t,i,o,a,u){void 0===i&&(i=!0),this.video&&this.stop();var d=this.scene.sys.cache.video.get(t);return d?(this.video=d,this._cacheKey=t,this._codePaused=d.paused,this._codeMuted=d.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,d,d.videoWidth,d.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,d.videoWidth,d.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(b.VIDEO_CREATED,this,d.videoWidth,d.videoHeight)):this.updateTexture(),d.currentTime=0,this._lastUpdate=0,i&&this.play(o,a,u)):this.video=null,this},addMarker:function addMarker(t,i,o){return!isNaN(i)&&i>=0&&!isNaN(o)&&(this.markers[t]=[i,o]),this},playMarker:function playMarker(t,i){var o=this.markers[t];return o&&this.play(i,o[0],o[1]),this},removeMarker:function removeMarker(t){return delete this.markers[t],this},snapshot:function snapshot(t,i){return void 0===t&&(t=this.width),void 0===i&&(i=this.height),this.snapshotArea(0,0,this.width,this.height,t,i)},snapshotArea:function snapshotArea(t,i,o,a,u,d){void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=this.width),void 0===a&&(a=this.height),void 0===u&&(u=o),void 0===d&&(d=a);var b=this.video,S=this.snapshotTexture;return S?(S.setSize(u,d),b&&S.context.drawImage(b,t,i,o,a,0,0,u,d)):(S=this.scene.sys.textures.createCanvas(R(),u,d),this.snapshotTexture=S,b&&S.context.drawImage(b,t,i,o,a,0,0,u,d)),S.update()},saveSnapshotTexture:function saveSnapshotTexture(t){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,t):this.snapshotTexture=this.scene.sys.textures.createCanvas(t,this.width,this.height),this.snapshotTexture},loadURL:function loadURL(t,i,o){void 0===o&&(o=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var a=document.createElement("video");return a.controls=!1,o&&(a.muted=!0,a.defaultMuted=!0,a.setAttribute("autoplay","autoplay")),a.setAttribute("playsinline","playsinline"),a.setAttribute("preload","auto"),a.addEventListener("error",this._callbacks.error,!0),a.src=t,a.load(),this.video=a,this},loadMediaStream:function loadMediaStream(t,i,o){void 0===o&&(o=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var a=document.createElement("video");a.controls=!1,o&&(a.muted=!0,a.defaultMuted=!0,a.setAttribute("autoplay","autoplay")),a.setAttribute("playsinline","playsinline"),a.setAttribute("preload","auto"),a.addEventListener("error",this._callbacks.error,!0);try{a.srcObject=t}catch(u){a.src=window.URL.createObjectURL(t)}return a.load(),this.video=a,this},playPromiseSuccessHandler:function playPromiseSuccessHandler(){this._codePaused=!1,this.touchLocked=!1,this.emit(b.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function playPromiseErrorHandler(t){this.scene.sys.input.once(C.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(b.VIDEO_ERROR,this,t)},playHandler:function playHandler(){this._codePaused=!1,this.touchLocked=!1,this.emit(b.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function loadErrorHandler(t){this.stop(),this.emit(b.VIDEO_ERROR,this,t)},unlockHandler:function unlockHandler(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(b.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(b.VIDEO_PLAY,this)},completeHandler:function completeHandler(){this.emit(b.VIDEO_COMPLETE,this)},timeUpdateHandler:function timeUpdateHandler(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(b.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function preUpdate(){var t=this.video;if(t){var i=t.currentTime;i!==this._lastUpdate&&(this._lastUpdate=i,this.updateTexture(),i>=this._markerOut&&(t.loop?(t.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=i,this.emit(b.VIDEO_LOOP,this)):(this.emit(b.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function checkVideoProgress(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(b.VIDEO_TIMEOUT,this))},updateTexture:function updateTexture(){var t=this.video,i=t.videoWidth,o=t.videoHeight;if(this.videoTexture){var a=this.videoTextureSource;a.source!==t&&(a.source=t,a.width=i,a.height=o),a.update()}else this.videoTexture=this.scene.sys.textures.create(this._key,t,i,o),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,i,o),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(b.VIDEO_CREATED,this,i,o)},getVideoKey:function getVideoKey(){return this._cacheKey},seekTo:function seekTo(t){var i=this.video;if(i){var o=i.duration;if(o!==1/0&&!isNaN(o)){var a=o*t;this.setCurrentTime(a)}}return this},getCurrentTime:function getCurrentTime(){return this.video?this.video.currentTime:0},setCurrentTime:function setCurrentTime(t){var i=this.video;if(i){if("string"==typeof t){var o=t[0],a=parseFloat(t.substr(1));"+"===o?t=i.currentTime+a:"-"===o&&(t=i.currentTime-a)}i.currentTime=t,this._lastUpdate=t}return this},isSeeking:function isSeeking(){return this._isSeeking},seekingHandler:function seekingHandler(){this._isSeeking=!0,this.emit(b.VIDEO_SEEKING,this)},seekedHandler:function seekedHandler(){this._isSeeking=!1,this.emit(b.VIDEO_SEEKED,this),this.video&&this.updateTexture()},getProgress:function getProgress(){var t=this.video;if(t){var i=t.currentTime,o=t.duration;if(o!==1/0&&!isNaN(o))return i/o}return 0},getDuration:function getDuration(){return this.video?this.video.duration:0},setMute:function setMute(t){void 0===t&&(t=!0),this._codeMuted=t;var i=this.video;return i&&(i.muted=!!this._systemMuted||t),this},isMuted:function isMuted(){return this._codeMuted},globalMute:function globalMute(t,i){this._systemMuted=i;var o=this.video;o&&(o.muted=!!this._codeMuted||i)},globalPause:function globalPause(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function globalResume(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function setPaused(t){void 0===t&&(t=!0);var i=this.video;return this._codePaused=t,i&&(t?i.paused||i.pause():t||i.paused&&!this._systemPaused&&i.play()),this},getVolume:function getVolume(){return this.video?this.video.volume:1},setVolume:function setVolume(t){return void 0===t&&(t=1),this.video&&(this.video.volume=u(t,0,1)),this},getPlaybackRate:function getPlaybackRate(){return this.video?this.video.playbackRate:1},setPlaybackRate:function setPlaybackRate(t){return this.video&&(this.video.playbackRate=t),this},getLoop:function getLoop(){return!!this.video&&this.video.loop},setLoop:function setLoop(t){return void 0===t&&(t=!0),this.video&&(this.video.loop=t),this},isPlaying:function isPlaying(){return!!this.video&&!(this.video.paused||this.video.ended)},isPaused:function isPaused(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function saveTexture(t,i){return void 0===i&&(i=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,t),this._key=t,this.flipY=i,this.videoTextureSource&&this.videoTextureSource.setFlipY(i),this.videoTexture},stop:function stop(){var t=this.video;if(t){var i=this._callbacks;for(var o in i)t.removeEventListener(o,i[o],!0);t.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(b.VIDEO_STOP,this),this},removeVideoElement:function removeVideoElement(){var t=this.video;if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("autoplay"),t.removeAttribute("src"),this.video=null}},preDestroy:function preDestroy(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var t=this.scene.sys.game.events;t.off(S.PAUSE,this.globalPause,this),t.off(S.RESUME,this.globalResume,this);var i=this.scene.sys.sound;i&&i.off(P.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});t.exports=N},function(t,i,o){var a=o(0),u=o(228),d=o(470),b=o(56),S=new a({initialize:function Polygon(t){this.type=b.POLYGON,this.area=0,this.points=[],t&&this.setTo(t)},contains:function contains(t,i){return u(this,t,i)},setTo:function setTo(t){if(this.area=0,this.points=[],"string"==typeof t&&(t=t.split(" ")),!Array.isArray(t))return this;for(var i,o=Number.MAX_VALUE,a=0;a<t.length;a++)i={x:0,y:0},"number"==typeof t[a]||"string"==typeof t[a]?(i.x=parseFloat(t[a]),i.y=parseFloat(t[a+1]),a++):Array.isArray(t[a])?(i.x=t[a][0],i.y=t[a][1]):(i.x=t[a].x,i.y=t[a].y),this.points.push(i),i.y<o&&(o=i.y);return this.calculateArea(o),this},calculateArea:function calculateArea(){if(this.points.length<3)return this.area=0,this.area;for(var t,i,o=0,a=0;a<this.points.length-1;a++)t=this.points[a],o+=((i=this.points[a+1]).x-t.x)*(t.y+i.y);return t=this.points[0],i=this.points[this.points.length-1],o+=(t.x-i.x)*(i.y+t.y),this.area=.5*-o,this.area},getPoints:function getPoints(t,i,o){return d(this,t,i,o)}});t.exports=S},function(t,i){t.exports=function Contains(t,i,o){for(var a=!1,u=-1,d=t.points.length-1;++u<t.points.length;d=u){var b=t.points[u].x,S=t.points[u].y,C=t.points[d].x,M=t.points[d].y;(S<=o&&o<M||M<=o&&o<S)&&i<(C-b)*(o-S)/(M-S)+b&&(a=!a)}return a}},function(t,i,o){var a=o(0),u=o(11),d=o(15),b=o(2),S=o(17),C=o(478),M=o(1176),P=o(25),R=new a({Extends:d,Mixins:[u.ComputedSize,u.Depth,u.GetBounds,u.Mask,u.Origin,u.ScrollFactor,u.Transform,u.Visible,M],initialize:function Shader(t,i,o,a,u,b,S,C){void 0===o&&(o=0),void 0===a&&(a=0),void 0===u&&(u=128),void 0===b&&(b=128),d.call(this,t,"Shader"),this.blendMode=-1,this.shader;var M=t.sys.renderer;this.renderer=M,this.gl=M.gl,this.vertexData=new ArrayBuffer(2*Float32Array.BYTES_PER_ELEMENT*6),this.vertexBuffer=M.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new P,this._tempMatrix2=new P,this._tempMatrix3=new P,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=M.width,this._rendererHeight=M.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(o,a),this.setSize(u,b),this.setOrigin(.5,.5),this.setShader(i,S,C)},willRender:function willRender(t){return!!this.renderToTexture||!(d.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},setRenderToTexture:function setRenderToTexture(t,i){if(void 0===i&&(i=!1),!this.renderToTexture){var o=this.width,a=this.height,u=this.renderer;this.glTexture=u.createTextureFromSource(null,o,a,0),this.glTexture.flipY=i,this.framebuffer=u.createFramebuffer(o,a,this.glTexture,!1),this._rendererWidth=o,this._rendererHeight=a,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),t&&(this.texture=this.scene.sys.textures.addGLTexture(t,this.glTexture,o,a))}return this.shader&&(u.pipelines.clear(),this.load(),this.flush(),u.pipelines.rebind()),this},setShader:function setShader(t,i,o){if(void 0===i&&(i=[]),"string"==typeof t){var a=this.scene.sys.cache.shader;if(!a.has(t))return console.warn("Shader missing: "+t),this;this.shader=a.get(t)}else this.shader=t;var u=this.gl,d=this.renderer;this.program&&u.deleteProgram(this.program);var b=d.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);u.uniformMatrix4fv(u.getUniformLocation(b,"uViewMatrix"),!1,this.viewMatrix),u.uniformMatrix4fv(u.getUniformLocation(b,"uProjectionMatrix"),!1,this.projectionMatrix),u.uniform2f(u.getUniformLocation(b,"uResolution"),this.width,this.height),this.program=b;var C=new Date,M={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[C.getFullYear(),C.getMonth(),C.getDate(),60*C.getHours()*60+60*C.getMinutes()+C.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=S(!0,{},this.shader.uniforms,M):this.uniforms=M;for(var P=0;P<4;P++)i[P]&&this.setSampler2D("iChannel"+P,i[P],P,o);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function setPointer(t){return this.pointer=t,this},projOrtho:function projOrtho(t,i,o,a){var u=1/(t-i),d=1/(o-a),b=this.projectionMatrix;b[0]=-2*u,b[5]=-2*d,b[10]=-.001,b[12]=(t+i)*u,b[13]=(a+o)*d,b[14]=-0;var S=this.program,C=this.gl;this.renderer.setProgram(S),C.uniformMatrix4fv(C.getUniformLocation(S,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=i,this._rendererHeight=o},initUniforms:function initUniforms(){var t=this.gl,i=this.renderer.glFuncMap,o=this.program;for(var a in this._textureCount=0,this.uniforms){var u=this.uniforms[a],d=u.type,b=i[d];u.uniformLocation=t.getUniformLocation(o,a),"sampler2D"!==d&&(u.glMatrix=b.matrix,u.glValueLength=b.length,u.glFunc=b.func)}},setSampler2DBuffer:function setSampler2DBuffer(t,i,o,a,u,d){void 0===u&&(u=0),void 0===d&&(d={});var b=this.uniforms[t];return b.value=i,d.width=o,d.height=a,b.textureData=d,this._textureCount=u,this.initSampler2D(b),this},setSampler2D:function setSampler2D(t,i,o,a){void 0===o&&(o=0);var u=this.scene.sys.textures;if(u.exists(i)){var d=u.getFrame(i);if(d.glTexture&&d.glTexture.isRenderTexture)return this.setSampler2DBuffer(t,d.glTexture,d.width,d.height,o,a);var b=this.uniforms[t],S=d.source;b.textureKey=i,b.source=S.image,b.value=d.glTexture,S.isGLTexture&&(a||(a={}),a.width=S.width,a.height=S.height),a&&(b.textureData=a),this._textureCount=o,this.initSampler2D(b)}return this},setUniform:function setUniform(t,i){return C(this.uniforms,t,i),this},getUniform:function getUniform(t){return b(this.uniforms,t,null)},setChannel0:function setChannel0(t,i){return this.setSampler2D("iChannel0",t,0,i)},setChannel1:function setChannel1(t,i){return this.setSampler2D("iChannel1",t,1,i)},setChannel2:function setChannel2(t,i){return this.setSampler2D("iChannel2",t,2,i)},setChannel3:function setChannel3(t,i){return this.setSampler2D("iChannel3",t,3,i)},initSampler2D:function initSampler2D(t){if(t.value){var i=this.gl;i.activeTexture(i.TEXTURE0+this._textureCount),i.bindTexture(i.TEXTURE_2D,t.value);var o=t.textureData;if(o&&!t.value.isRenderTexture){var a=i[b(o,"magFilter","linear").toUpperCase()],u=i[b(o,"minFilter","linear").toUpperCase()],d=i[b(o,"wrapS","repeat").toUpperCase()],S=i[b(o,"wrapT","repeat").toUpperCase()],C=i[b(o,"format","rgba").toUpperCase()];if(o.repeat&&(d=i.REPEAT,S=i.REPEAT),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!!o.flipY),o.width){var M=b(o,"width",512),P=b(o,"height",2),R=b(o,"border",0);i.texImage2D(i.TEXTURE_2D,0,C,M,P,R,C,i.UNSIGNED_BYTE,null)}else i.texImage2D(i.TEXTURE_2D,0,C,i.RGBA,i.UNSIGNED_BYTE,t.source);i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,a),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,u),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,d),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,S)}this.renderer.setProgram(this.program),i.uniform1i(t.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function syncUniforms(){var t,i,o,a,u,d=this.gl,b=this.uniforms,S=0;for(var C in b)o=(t=b[C]).glFunc,i=t.glValueLength,a=t.uniformLocation,null!==(u=t.value)&&(1===i?t.glMatrix?o.call(d,a,t.transpose,u):o.call(d,a,u):2===i?o.call(d,a,u.x,u.y):3===i?o.call(d,a,u.x,u.y,u.z):4===i?o.call(d,a,u.x,u.y,u.z,u.w):"sampler2D"===t.type&&(d.activeTexture(d.TEXTURE0+S),d.bindTexture(d.TEXTURE_2D,u),d.uniform1i(a,S),S++))},load:function load(t){var i=this.gl,o=this.width,a=this.height,u=this.renderer,d=this.program,b=this.viewMatrix;if(!this.renderToTexture){var S=-this._displayOriginX,C=-this._displayOriginY;b[0]=t[0],b[1]=t[1],b[4]=t[2],b[5]=t[3],b[8]=t[4],b[9]=t[5],b[12]=b[0]*S+b[4]*C,b[13]=b[1]*S+b[5]*C}i.useProgram(d),i.uniformMatrix4fv(i.getUniformLocation(d,"uViewMatrix"),!1,b),i.uniform2f(i.getUniformLocation(d,"uResolution"),this.width,this.height);var M=this.uniforms,P=M.resolution;P.value.x=o,P.value.y=a,M.time.value=u.game.loop.getDuration();var R=this.pointer;if(R){var O=M.mouse,B=R.x/o,N=1-R.y/a;O.value.x=B.toFixed(2),O.value.y=N.toFixed(2)}this.syncUniforms()},flush:function flush(){var t=this.width,i=this.height,o=this.program,a=this.gl,u=this.vertexBuffer,d=this.renderer,b=2*Float32Array.BYTES_PER_ELEMENT;this.renderToTexture&&(d.setFramebuffer(this.framebuffer),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT)),a.bindBuffer(a.ARRAY_BUFFER,u);var S=a.getAttribLocation(o,"inPosition");-1!==S&&(a.enableVertexAttribArray(S),a.vertexAttribPointer(S,2,a.FLOAT,!1,b,0));var C=this.vertexViewF32;C[3]=i,C[4]=t,C[5]=i,C[8]=t,C[9]=i,C[10]=t,a.bufferSubData(a.ARRAY_BUFFER,0,this.bytes.subarray(0,6*b)),a.drawArrays(a.TRIANGLES,0,6),this.renderToTexture&&d.setFramebuffer(null,!1)},setAlpha:function setAlpha(){},setBlendMode:function setBlendMode(){},preDestroy:function preDestroy(){var t=this.gl;t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});t.exports=R},function(t,i,o){var a=o(0),u=o(11),d=o(36),b=o(116),S=o(15),C=o(479),M=o(480),P=o(19),R=o(69),O=o(1179),B=o(79),N=o(39),Y=o(117),G=new a({Extends:S,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Mask,u.Pipeline,u.Size,u.Texture,u.Transform,u.Visible,u.ScrollFactor,O],initialize:function Mesh(t,i,o,a,u,d,b,C,M,P,O,B){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a="__WHITE"),S.call(this,t,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new N,this.modelScale=new N(1,1,1),this.modelRotation=new N,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new R,this.viewPosition=new N,this.viewMatrix=new R,this.projectionMatrix=new R,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var Y=t.sys.renderer;this.setPosition(i,o),this.setTexture(a,u),this.setSize(Y.width,Y.height),this.initPipeline(),this.setPerspective(Y.width,Y.height),d&&this.addVertices(d,b,C,M,P,O,B)},addedToScene:function addedToScene(){this.scene.sys.updateList.add(this)},removedFromScene:function removedFromScene(){this.scene.sys.updateList.remove(this)},panX:function panX(t){return this.viewPosition.addScale(N.LEFT,t),this.dirtyCache[10]=1,this},panY:function panY(t){return this.viewPosition.y+=N.DOWN.y*t,this.dirtyCache[10]=1,this},panZ:function panZ(t){return this.viewPosition.z+=t,this.dirtyCache[10]=1,this},setPerspective:function setPerspective(t,i,o,a,u){return void 0===o&&(o=45),void 0===a&&(a=.01),void 0===u&&(u=1e3),this.projectionMatrix.perspective(d(o),t/i,a,u),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function setOrtho(t,i,o,a){return void 0===t&&(t=this.scene.sys.renderer.getAspectRatio()),void 0===i&&(i=1),void 0===o&&(o=-1e3),void 0===a&&(a=1e3),this.projectionMatrix.ortho(-t,t,-i,i,o,a),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function clear(){return this.faces.forEach((function(t){t.destroy()})),this.faces=[],this.vertices=[],this},addVerticesFromObj:function addVerticesFromObj(t,i,o,a,u,d,b,S,C){var P=this.scene.sys.cache.obj.get(t);return P&&M(P,this,i,o,a,u,d,b,S,C),this},sortByDepth:function sortByDepth(t,i){return t.depth-i.depth},depthSort:function depthSort(){return B(this.faces,this.sortByDepth),this},addVertex:function addVertex(t,i,o,a,u,d,b){var S=new Y(t,i,o,a,u,d,b);return this.vertices.push(S),S},addFace:function addFace(t,i,o){var a=new b(t,i,o);return this.faces.push(a),this.dirtyCache[9]=-1,a},addVertices:function addVertices(t,i,o,a,u,d,b){var S=C(t,i,o,a,u,d,b);return S&&(this.faces=this.faces.concat(S.faces),this.vertices=this.vertices.concat(S.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function getFaceCount(){return this.faces.length},getVertexCount:function getVertexCount(){return this.vertices.length},getFace:function getFace(t){return this.faces[t]},getFaceAt:function getFaceAt(t,i,o){void 0===o&&(o=this.scene.sys.cameras.main);for(var a=P(this,o).calc,u=this.faces,d=[],b=0;b<u.length;b++){var S=u[b];S.contains(t,i,a)&&d.push(S)}return B(d,this.sortByDepth)},setDebug:function setDebug(t,i){return this.debugGraphic=t,this.debugCallback=t||i?i||this.renderDebug:null,this},isDirty:function isDirty(){var t=this.modelPosition,i=this.modelRotation,o=this.modelScale,a=this.dirtyCache,u=t.x,d=t.y,b=t.z,S=i.x,C=i.y,M=i.z,P=o.x,R=o.y,O=o.z,B=this.getFaceCount(),N=a[0],Y=a[1],G=a[2],X=a[3],U=a[4],z=a[5],V=a[6],W=a[7],H=a[8],j=a[9];return a[0]=u,a[1]=d,a[2]=b,a[3]=S,a[4]=C,a[5]=M,a[6]=P,a[7]=R,a[8]=O,a[9]=B,N!==u||Y!==d||G!==b||X!==S||U!==C||z!==M||V!==P||W!==R||H!==O||j!==B},preUpdate:function preUpdate(){this.totalRendered=this.totalFrame,this.totalFrame=0;var t=this.dirtyCache;if(this.ignoreDirtyCache||t[10]||this.isDirty()){var i=this.width,o=this.height,a=this.viewMatrix,u=this.viewPosition;t[10]&&(a.identity(),a.translate(u),a.invert(),t[10]=0);var d=this.transformMatrix;d.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var b=u.z,S=this.faces,C=0;C<S.length;C++)S[C].transformCoordinatesLocal(d,i,o,b);this.depthSort()}},renderDebug:function renderDebug(t,i){for(var o=t.debugGraphic,a=0;a<i.length;a++){var u=i[a],d=u.vertex1.tx,b=u.vertex1.ty,S=u.vertex2.tx,C=u.vertex2.ty,M=u.vertex3.tx,P=u.vertex3.ty;o.strokeTriangle(d,b,S,C,M,P)}},preDestroy:function preDestroy(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});t.exports=G},function(t,i,o){var a=o(50);t.exports=function CircleToCircle(t,i){return a(t.x,t.y,i.x,i.y)<=t.radius+i.radius}},function(t,i,o){var a=o(4),u=o(233);t.exports=function GetLineToCircle(t,i,o){if(void 0===o&&(o=[]),u(t,i)){var d,b,S=t.x1,C=t.y1,M=t.x2,P=t.y2,R=i.x,O=i.y,B=i.radius,N=M-S,Y=P-C,G=S-R,X=C-O,U=N*N+Y*Y,z=2*(N*G+Y*X),V=z*z-4*U*(G*G+X*X-B*B);if(0===V){var W=-z/(2*U);d=S+W*N,b=C+W*Y,W>=0&&W<=1&&o.push(new a(d,b))}else if(V>0){var H=(-z-Math.sqrt(V))/(2*U);d=S+H*N,b=C+H*Y,H>=0&&H<=1&&o.push(new a(d,b));var j=(-z+Math.sqrt(V))/(2*U);d=S+j*N,b=C+j*Y,j>=0&&j<=1&&o.push(new a(d,b))}}return o}},function(t,i,o){var a=o(66),u=new(o(4));t.exports=function LineToCircle(t,i,o){if(void 0===o&&(o=u),a(i,t.x1,t.y1))return o.x=t.x1,o.y=t.y1,!0;if(a(i,t.x2,t.y2))return o.x=t.x2,o.y=t.y2,!0;var d=t.x2-t.x1,b=t.y2-t.y1,S=i.x-t.x1,C=i.y-t.y1,M=d*d+b*b,P=d,R=b;if(M>0){var O=(S*d+C*b)/M;P*=O,R*=O}return o.x=t.x1+P,o.y=t.y1+R,P*P+R*R<=M&&P*d+R*b>=0&&a(i,o.x,o.y)}},function(t,i,o){var a=o(4),u=o(96),d=o(488);t.exports=function GetLineToRectangle(t,i,o){if(void 0===o&&(o=[]),d(t,i))for(var b=i.getLineA(),S=i.getLineB(),C=i.getLineC(),M=i.getLineD(),P=[new a,new a,new a,new a],R=[u(b,t,P[0]),u(S,t,P[1]),u(C,t,P[2]),u(M,t,P[3])],O=0;O<4;O++)R[O]&&o.push(P[O]);return o}},function(t,i){t.exports=function ContainsArray(t,i,o,a){void 0===o&&(o=!1),void 0===a&&(a=[]);for(var u,d,b,S,C,M,P=t.x3-t.x1,R=t.y3-t.y1,O=t.x2-t.x1,B=t.y2-t.y1,N=P*P+R*R,Y=P*O+R*B,G=O*O+B*B,X=N*G-Y*Y,U=0===X?0:1/X,z=t.x1,V=t.y1,W=0;W<i.length&&(d=(N*(M=O*(b=i[W].x-z)+B*(S=i[W].y-V))-Y*(C=P*b+R*S))*U,!((u=(G*C-Y*M)*U)>=0&&d>=0&&u+d<1&&(a.push({x:i[W].x,y:i[W].y}),o)));W++);return a}},function(t,i){t.exports=function RotateAroundXY(t,i,o,a){var u=Math.cos(a),d=Math.sin(a),b=t.x1-i,S=t.y1-o;return t.x1=b*u-S*d+i,t.y1=b*d+S*u+o,b=t.x2-i,S=t.y2-o,t.x2=b*u-S*d+i,t.y2=b*d+S*u+o,t}},function(t,i){t.exports=function GetAspectRatio(t){return 0===t.height?NaN:t.width/t.height}},function(t,i){t.exports=function RotateAroundXY(t,i,o,a){var u=Math.cos(a),d=Math.sin(a),b=t.x1-i,S=t.y1-o;return t.x1=b*u-S*d+i,t.y1=b*d+S*u+o,b=t.x2-i,S=t.y2-o,t.x2=b*u-S*d+i,t.y2=b*d+S*u+o,b=t.x3-i,S=t.y3-o,t.x3=b*u-S*d+i,t.y3=b*d+S*u+o,t}},function(t,i,o){t.exports={BUTTON_DOWN:o(1310),BUTTON_UP:o(1311),CONNECTED:o(1312),DISCONNECTED:o(1313),GAMEPAD_BUTTON_DOWN:o(1314),GAMEPAD_BUTTON_UP:o(1315)}},function(t,i,o){var a=o(17),u=o(156);t.exports=function MergeXHRSettings(t,i){var o=void 0===t?u():a({},t);if(i)for(var d in i)void 0!==i[d]&&(o[d]=i[d]);return o}},function(t,i,o){var a=o(0),u=o(21),d=o(23),b=o(8),S=o(2),C=o(7),M=o(408),P=new a({Extends:d,initialize:function XMLFile(t,i,o,a){var u="xml";if(C(i)){var b=i;i=S(b,"key"),o=S(b,"url"),a=S(b,"xhrSettings"),u=S(b,"extension",u)}var M={type:"xml",cache:t.cacheManager.xml,extension:u,responseType:"text",key:i,url:o,xhrSettings:a};d.call(this,t,M)},onProcess:function onProcess(){this.state=u.FILE_PROCESSING,this.data=M(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});b.register("xml",(function(t,i,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new P(this,t[a]));else this.addFile(new P(this,t,i,o));return this})),t.exports=P},function(t,i,o){var a=o(0),u=o(21),d=o(23),b=o(8),S=o(2),C=o(7),M=new a({Extends:d,initialize:function TextFile(t,i,o,a){var u="text",b="txt",M=t.cacheManager.text;if(C(i)){var P=i;i=S(P,"key"),o=S(P,"url"),a=S(P,"xhrSettings"),b=S(P,"extension",b),u=S(P,"type",u),M=S(P,"cache",M)}var R={type:u,cache:M,extension:b,responseType:"text",key:i,url:o,xhrSettings:a};d.call(this,t,R)},onProcess:function onProcess(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});b.register("text",(function(t,i,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new M(this,t[a]));else this.addFile(new M(this,t,i,o));return this})),t.exports=M},function(t,i,o){t.exports={Acceleration:o(1368),Angular:o(1369),Bounce:o(1370),Debug:o(1371),Drag:o(1372),Enable:o(1373),Friction:o(1374),Gravity:o(1375),Immovable:o(1376),Mass:o(1377),OverlapCirc:o(523),OverlapRect:o(244),Pushable:o(1378),Size:o(1379),Velocity:o(1380)}},function(t,i){t.exports=function OverlapRect(t,i,o,a,u,d,b){void 0===d&&(d=!0),void 0===b&&(b=!1);var S=[],C=[],M=t.treeMinMax;if(M.minX=i,M.minY=o,M.maxX=i+a,M.maxY=o+u,b&&(C=t.staticTree.search(M)),d&&t.useTree)S=t.tree.search(M);else if(d){var P=t.bodies,R={position:{x:i,y:o},left:i,top:o,right:i+a,bottom:o+u,isCircle:!1},O=t.intersects;P.iterate((function(t){O(t,R)&&S.push(t)}))}return C.concat(S)}},function(t,i,o){t.exports={COLLIDE:o(1381),OVERLAP:o(1382),PAUSE:o(1383),RESUME:o(1384),TILE_COLLIDE:o(1385),TILE_OVERLAP:o(1386),WORLD_BOUNDS:o(1387),WORLD_STEP:o(1388)}},function(t,i,o){var a=o(62);t.exports=function GetOverlapX(t,i,o,u){var d=0,b=t.deltaAbsX()+i.deltaAbsX()+u;return 0===t._dx&&0===i._dx?(t.embedded=!0,i.embedded=!0):t._dx>i._dx?(d=t.right-i.x)>b&&!o||!1===t.checkCollision.right||!1===i.checkCollision.left?d=0:(t.touching.none=!1,t.touching.right=!0,i.touching.none=!1,i.touching.left=!0,i.physicsType!==a.STATIC_BODY||o||(t.blocked.none=!1,t.blocked.right=!0),t.physicsType!==a.STATIC_BODY||o||(i.blocked.none=!1,i.blocked.left=!0)):t._dx<i._dx&&(-(d=t.x-i.width-i.x)>b&&!o||!1===t.checkCollision.left||!1===i.checkCollision.right?d=0:(t.touching.none=!1,t.touching.left=!0,i.touching.none=!1,i.touching.right=!0,i.physicsType!==a.STATIC_BODY||o||(t.blocked.none=!1,t.blocked.left=!0),t.physicsType!==a.STATIC_BODY||o||(i.blocked.none=!1,i.blocked.right=!0))),t.overlapX=d,i.overlapX=d,d}},function(t,i,o){var a=o(62);t.exports=function GetOverlapY(t,i,o,u){var d=0,b=t.deltaAbsY()+i.deltaAbsY()+u;return 0===t._dy&&0===i._dy?(t.embedded=!0,i.embedded=!0):t._dy>i._dy?(d=t.bottom-i.y)>b&&!o||!1===t.checkCollision.down||!1===i.checkCollision.up?d=0:(t.touching.none=!1,t.touching.down=!0,i.touching.none=!1,i.touching.up=!0,i.physicsType!==a.STATIC_BODY||o||(t.blocked.none=!1,t.blocked.down=!0),t.physicsType!==a.STATIC_BODY||o||(i.blocked.none=!1,i.blocked.up=!0)):t._dy<i._dy&&(-(d=t.y-i.bottom)>b&&!o||!1===t.checkCollision.up||!1===i.checkCollision.down?d=0:(t.touching.none=!1,t.touching.up=!0,i.touching.none=!1,i.touching.down=!0,i.physicsType!==a.STATIC_BODY||o||(t.blocked.none=!1,t.blocked.up=!0),t.physicsType!==a.STATIC_BODY||o||(i.blocked.none=!1,i.blocked.down=!0))),t.overlapY=d,i.overlapY=d,d}},function(t,i){t.exports=function TileIntersectsBody(t,i){return!(i.right<=t.left||i.bottom<=t.top||i.position.x>=t.right||i.position.y>=t.bottom)}},function(t,i,o){t.exports={Bounce:o(1495),Collision:o(1496),Force:o(1497),Friction:o(1498),Gravity:o(1499),Mass:o(1500),Sensor:o(1501),SetBody:o(1502),Sleep:o(1503),Static:o(1520),Transform:o(1521),Velocity:o(1522)}},function(t,i){var o={};t.exports=o,o.create=function(t,i){var a=t.bodyA,u=t.bodyB,d={id:o.id(a,u),bodyA:a,bodyB:u,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:a.isSensor||u.isSensor,timeCreated:i,timeUpdated:i,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return o.update(d,t,i),d},o.update=function(t,i,a){if(t.collision=i,i.collided){var u=i.supports,d=t.activeContacts,b=i.parentA,S=i.parentB;t.inverseMass=b.inverseMass+S.inverseMass,t.friction=Math.min(b.friction,S.friction),t.frictionStatic=Math.max(b.frictionStatic,S.frictionStatic),t.restitution=Math.max(b.restitution,S.restitution),t.slop=Math.max(b.slop,S.slop);for(var C=0;C<u.length;C++)d[C]=u[C].contact;var M=u.length;M<d.length&&(d.length=M),t.separation=i.depth,o.setActive(t,!0,a)}else!0===t.isActive&&o.setActive(t,!1,a)},o.setActive=function(t,i,o){i?(t.isActive=!0,t.timeUpdated=o):(t.isActive=!1,t.activeContacts.length=0)},o.id=function(t,i){return t.id<i.id?"A"+t.id+"B"+i.id:"A"+i.id+"B"+t.id}},function(t,i,o){t.exports={CalculateFacesAt:o(252),CalculateFacesWithin:o(63),CheckIsoBounds:o(541),Copy:o(1420),CreateFromTiles:o(1421),CullBounds:o(543),CullTiles:o(544),Fill:o(1422),FilterTiles:o(1423),FindByIndex:o(1424),FindTile:o(1425),ForEachTile:o(1426),GetCullTilesFunction:o(1427),GetTileAt:o(158),GetTileAtWorldXY:o(1428),GetTilesWithin:o(26),GetTilesWithinShape:o(1429),GetTilesWithinWorldXY:o(529),GetTileToWorldXFunction:o(1430),GetTileToWorldXYFunction:o(1431),GetTileToWorldYFunction:o(1432),GetWorldToTileXFunction:o(1433),GetWorldToTileXYFunction:o(1434),GetWorldToTileYFunction:o(1435),HasTileAt:o(562),HasTileAtWorldXY:o(1436),HexagonalCullBounds:o(546),HexagonalCullTiles:o(545),HexagonalTileToWorldXY:o(550),HexagonalTileToWorldY:o(554),HexagonalWorldToTileXY:o(556),HexagonalWorldToTileY:o(560),IsInLayerBounds:o(119),IsometricCullTiles:o(547),IsometricTileToWorldXY:o(551),IsometricWorldToTileXY:o(557),PutTileAt:o(257),PutTileAtWorldXY:o(1437),PutTilesAt:o(1438),Randomize:o(1439),RemoveTileAt:o(563),RemoveTileAtWorldXY:o(1440),RenderDebug:o(1441),ReplaceByIndex:o(542),RunCull:o(159),SetCollision:o(1442),SetCollisionBetween:o(1443),SetCollisionByExclusion:o(1444),SetCollisionByProperty:o(1445),SetCollisionFromCollisionGroup:o(1446),SetLayerCollisionIndex:o(160),SetTileCollision:o(72),SetTileIndexCallback:o(1447),SetTileLocationCallback:o(1448),Shuffle:o(1449),StaggeredCullBounds:o(549),StaggeredCullTiles:o(548),StaggeredTileToWorldXY:o(552),StaggeredTileToWorldY:o(555),StaggeredWorldToTileXY:o(558),StaggeredWorldToTileY:o(561),SwapByIndex:o(1450),TileToWorldX:o(253),TileToWorldXY:o(553),TileToWorldY:o(254),WeightedRandomize:o(1451),WorldToTileX:o(255),WorldToTileXY:o(559),WorldToTileY:o(256)}},function(t,i,o){var a=o(158);t.exports=function CalculateFacesAt(t,i,o){var u=a(t,i,!0,o),d=a(t,i-1,!0,o),b=a(t,i+1,!0,o),S=a(t-1,i,!0,o),C=a(t+1,i,!0,o),M=u&&u.collides;return M&&(u.faceTop=!0,u.faceBottom=!0,u.faceLeft=!0,u.faceRight=!0),d&&d.collides&&(M&&(u.faceTop=!1),d.faceBottom=!M),b&&b.collides&&(M&&(u.faceBottom=!1),b.faceTop=!M),S&&S.collides&&(M&&(u.faceLeft=!1),S.faceRight=!M),C&&C.collides&&(M&&(u.faceRight=!1),C.faceLeft=!M),u&&!u.collides&&u.resetFaces(),u}},function(t,i){t.exports=function TileToWorldX(t,i,o){var a=o.baseTileWidth,u=o.tilemapLayer,d=0;return u&&(i||(i=u.scene.cameras.main),d=u.x+i.scrollX*(1-u.scrollFactorX),a*=u.scaleX),d+t*a}},function(t,i){t.exports=function TileToWorldY(t,i,o){var a=o.baseTileHeight,u=o.tilemapLayer,d=0;return u&&(i||(i=u.scene.cameras.main),d=u.y+i.scrollY*(1-u.scrollFactorY),a*=u.scaleY),d+t*a}},function(t,i){t.exports=function WorldToTileX(t,i,o,a){void 0===i&&(i=!0);var u=a.baseTileWidth,d=a.tilemapLayer;return d&&(o||(o=d.scene.cameras.main),t-=d.x+o.scrollX*(1-d.scrollFactorX),u*=d.scaleX),i?Math.floor(t/u):t/u}},function(t,i){t.exports=function WorldToTileY(t,i,o,a){void 0===i&&(i=!0);var u=a.baseTileHeight,d=a.tilemapLayer;return d&&(o||(o=d.scene.cameras.main),t-=d.y+o.scrollY*(1-d.scrollFactorY),u*=d.scaleY),i?Math.floor(t/u):t/u}},function(t,i,o){var a=o(85),u=o(119),d=o(252),b=o(72);t.exports=function PutTileAt(t,i,o,S,C){if(void 0===S&&(S=!0),!u(i,o,C))return null;var M=C.data[o][i],P=M&&M.collides;if(t instanceof a)null===C.data[o][i]&&(C.data[o][i]=new a(C,t.index,i,o,C.tileWidth,C.tileHeight)),C.data[o][i].copy(t);else{var R=t;null===C.data[o][i]?C.data[o][i]=new a(C,R,i,o,C.tileWidth,C.tileHeight):C.data[o][i].index=R}var O=C.data[o][i],B=-1!==C.collideIndexes.indexOf(O.index);return b(O,B),S&&P!==O.collides&&d(i,o,C),O}},function(t,i,o){var a=o(29);t.exports=function FromOrientationString(t){return"isometric"===(t=t.toLowerCase())?a.ISOMETRIC:"staggered"===t?a.STAGGERED:"hexagonal"===t?a.HEXAGONAL:a.ORTHOGONAL}},function(t,i,o){var a=o(40),u=o(120),d=o(121),b=o(85);t.exports=function Parse2DArray(t,i,o,S,C){for(var M=new u({tileWidth:o,tileHeight:S}),P=new d({name:t,tileWidth:o,tileHeight:S,format:a.ARRAY_2D,layers:[M]}),R=[],O=i.length,B=0,N=0;N<i.length;N++){R[N]=[];for(var Y=i[N],G=0;G<Y.length;G++){var X=parseInt(Y[G],10);isNaN(X)||-1===X?R[N][G]=C?null:new b(M,-1,G,N,o,S):R[N][G]=new b(M,X,G,N,o,S)}0===B&&(B=Y.length)}return P.width=M.width=B,P.height=M.height=O,P.widthInPixels=M.widthInPixels=B*o,P.heightInPixels=M.heightInPixels=O*S,M.data=R,P}},function(t,i,o){var a=o(571),u=o(261),d=function copyPoints(t){return{x:t.x,y:t.y}},b=["id","name","type","rotation","properties","visible","x","y","width","height"];t.exports=function ParseObject(t,i,o){void 0===i&&(i=0),void 0===o&&(o=0);var S=a(t,b);if(S.x+=i,S.y+=o,t.gid){var C=u(t.gid);S.gid=C.gid,S.flippedHorizontal=C.flippedHorizontal,S.flippedVertical=C.flippedVertical,S.flippedAntiDiagonal=C.flippedAntiDiagonal}else t.polyline?S.polyline=t.polyline.map(d):t.polygon?S.polygon=t.polygon.map(d):t.ellipse?S.ellipse=t.ellipse:t.text?S.text=t.text:t.point?S.point=!0:S.rectangle=!0;return S}},function(t,i){var o=2147483648,a=1073741824,u=536870912;t.exports=function ParseGID(t){var i=Boolean(t&o),d=Boolean(t&a),b=Boolean(t&u);t&=536870911;var S=0,C=!1;return i&&d&&b?(S=Math.PI/2,C=!0):i&&d&&!b?(S=Math.PI,C=!1):i&&!d&&b?(S=Math.PI/2,C=!1):!i||d||b?!i&&d&&b?(S=3*Math.PI/2,C=!1):i||!d||b?i||d||!b?i||d||b||(S=0,C=!1):(S=3*Math.PI/2,C=!0):(S=Math.PI,C=!0):(S=0,C=!0),{gid:t,flippedHorizontal:i,flippedVertical:d,flippedAntiDiagonal:b,rotation:S,flipped:C}}},function(t,i,o){var a=o(40),u=o(121),d=o(564),b=o(580);t.exports=function ParseToTilemap(t,i,o,S,C,M,P,R){void 0===o&&(o=32),void 0===S&&(S=32),void 0===C&&(C=10),void 0===M&&(M=10),void 0===R&&(R=!1);var O=null;if(Array.isArray(P))O=d(void 0!==i?i:"map",a.ARRAY_2D,P,o,S,R);else if(void 0!==i){var B=t.cache.tilemap.get(i);B?O=d(i,B.format,B.data,o,S,R):console.warn("No map data found for key "+i)}return null===O&&(O=new u({tileWidth:o,tileHeight:S,width:C,height:M})),new b(t,O)}},function(t,i,o){var a=o(6);t.exports=function GetTargets(t){var i=a(t,"targets",null);return null===i||("function"==typeof i&&(i=i.call()),Array.isArray(i)||(i=[i])),i}},function(t,i){function hasGetActive(t){return!!t.getActive&&"function"==typeof t.getActive}function hasGetStart(t){return!!t.getStart&&"function"==typeof t.getStart}function hasGetEnd(t){return!!t.getEnd&&"function"==typeof t.getEnd}t.exports=function GetValueOp(t,i){var o,a=function getEnd(t,i,o){return o},u=function getStart(t,i,o){return o},d=null,b=_typeof(i);if("number"===b)a=function getEnd(){return i};else if("string"===b){var S=i[0],C=parseFloat(i.substr(2));switch(S){case"+":a=function getEnd(t,i,o){return o+C};break;case"-":a=function getEnd(t,i,o){return o-C};break;case"*":a=function getEnd(t,i,o){return o*C};break;case"/":a=function getEnd(t,i,o){return o/C};break;default:a=function getEnd(){return parseFloat(i)}}}else if("function"===b)a=i;else if("object"===b)if(function hasGetters(t){return hasGetStart(t)||hasGetEnd(t)||hasGetActive(t)}(i))hasGetActive(i)&&(d=i.getActive),hasGetEnd(i)&&(a=i.getEnd),hasGetStart(i)&&(u=i.getStart);else if(i.hasOwnProperty("value"))o=GetValueOp(t,i.value);else{var M=i.hasOwnProperty("to"),P=i.hasOwnProperty("from"),R=i.hasOwnProperty("start");if(M&&(P||R)){if(o=GetValueOp(t,i.to),R){var O=GetValueOp(t,i.start);o.getActive=O.getEnd}if(P){var B=GetValueOp(t,i.from);o.getStart=B.getEnd}}}return o||(o={getActive:d,getEnd:a,getStart:u}),o}},function(t,i){t.exports={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1}},function(t,i,o){var a=o(0),u=o(9),d=o(267),b=o(16),S=o(5),C=o(100),M=o(14),P=new a({Extends:u,initialize:function Tween(t,i,o){u.call(this),this.parent=t,this.parentIsTimeline=t.hasOwnProperty("isTimeline"),this.data=i,this.totalData=i.length,this.targets=o,this.totalTargets=o.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=C.PENDING_ADD,this._pausedState=C.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function getValue(t){return void 0===t&&(t=0),this.data[t].current},setTimeScale:function setTimeScale(t){return this.timeScale=t,this},getTimeScale:function getTimeScale(){return this.timeScale},isPlaying:function isPlaying(){return this.state===C.ACTIVE},isPaused:function isPaused(){return this.state===C.PAUSED},hasTarget:function hasTarget(t){return-1!==this.targets.indexOf(t)},updateTo:function updateTo(t,i,o){void 0===o&&(o=!1);for(var a=0;a<this.totalData;a++){var u=this.data[a];u.key===t&&(u.end=i,o&&(u.start=u.current))}return this},restart:function restart(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===C.ACTIVE?this.seek(0):this.state===C.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===C.PENDING_ADD?this:this.play()},calcDuration:function calcDuration(){for(var t=0,i=M.MAX_SAFE_INTEGER,o=this.data,a=0;a<this.totalData;a++){var u=o[a];u.t1=u.duration+u.hold,u.yoyo&&(u.t1+=u.duration),u.t2=u.t1+u.repeatDelay,u.totalDuration=u.delay+u.t1,-1===u.repeat?u.totalDuration+=999999999999*u.t2:u.repeat>0&&(u.totalDuration+=u.t2*u.repeat),u.totalDuration>t&&(t=u.totalDuration),u.delay<i&&(i=u.delay)}this.duration=Math.max(t,.001),this.loopCounter=-1===this.loop?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=i},init:function init(){if(this.paused&&!this.parentIsTimeline)return this.state=C.PENDING_ADD,this._pausedState=C.INIT,!1;for(var t=this.data,i=this.totalTargets,o=0;o<this.totalData;o++){var a=t[o],u=a.target,d=a.gen,b=a.key,S=a.index;a.delay=d.delay(u,b,0,S,i,this),a.duration=Math.max(d.duration(u,b,0,S,i,this),.001),a.hold=d.hold(u,b,0,S,i,this),a.repeat=d.repeat(u,b,0,S,i,this),a.repeatDelay=d.repeatDelay(u,b,0,S,i,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=C.INIT,!0},makeActive:function makeActive(){this.parent.makeActive(this),this.dispatchTweenEvent(d.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function nextState(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=C.LOOP_DELAY):(this.state=C.ACTIVE,this.dispatchTweenEvent(d.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=C.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=C.PENDING_REMOVE,this.dispatchTweenEvent(d.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function pause(){return this.state===C.PAUSED||(this.paused=!0,this._pausedState=this.state,this.state=C.PAUSED),this},play:function play(t){void 0===t&&(t=!1);var i=this.state;return i!==C.INIT||this.parentIsTimeline?i===C.ACTIVE||i===C.PENDING_ADD&&this._pausedState===C.PENDING_ADD?this:this.parentIsTimeline||i!==C.PENDING_REMOVE&&i!==C.REMOVED?(this.parentIsTimeline?(this.resetTweenData(t),0===this.calculatedOffset?this.state=C.ACTIVE:(this.countdown=this.calculatedOffset,this.state=C.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(t),this.state=C.ACTIVE,this.makeActive()),this):(this.seek(0),this.parent.makeActive(this),this):(this.resetTweenData(!1),this.state=C.ACTIVE,this)},resetTweenData:function resetTweenData(t){for(var i=this.data,o=this.totalData,a=this.totalTargets,u=0;u<o;u++){var d=i[u],b=d.target,S=d.key,M=d.index;d.progress=0,d.elapsed=0,d.repeatCounter=-1===d.repeat?999999999999:d.repeat,t?(d.start=d.getStartValue(b,S,d.start,M,a,this),d.end=d.getEndValue(b,S,d.end,M,a,this),d.current=d.start,d.state=C.PLAYING_FORWARD):d.state=C.PENDING_RENDER,d.delay>0&&(d.elapsed=d.delay,d.state=C.DELAY),d.getActiveValue&&(b[S]=d.getActiveValue(d.target,d.key,d.start))}},resume:function resume(){return this.state===C.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function seek(t,i){void 0===i&&(i=16.6),this.state===C.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var o=this.data,a=this.totalTargets,u=0;u<this.totalData;u++){var d=o[u],b=d.target,S=d.gen,M=d.key,P=d.index;d.progress=0,d.elapsed=0,d.repeatCounter=-1===d.repeat?999999999999:d.repeat,d.delay=S.delay(b,M,0,P,a,this),d.duration=Math.max(S.duration(b,M,0,P,a,this),.001),d.hold=S.hold(b,M,0,P,a,this),d.repeat=S.repeat(b,M,0,P,a,this),d.repeatDelay=S.repeatDelay(b,M,0,P,a,this),d.current=d.start,d.state=C.PLAYING_FORWARD,this.updateTweenData(this,d,0,P,a),d.delay>0&&(d.elapsed=d.delay,d.state=C.DELAY)}this.calcDuration();var R=!1;this.state===C.PAUSED&&(R=!0,this.state=C.ACTIVE),this.isSeeking=!0;do{this.update(0,i)}while(this.totalProgress<t);return this.isSeeking=!1,R&&(this.state=C.PAUSED),this},setCallback:function setCallback(t,i,o,a){return this.callbacks[t]={func:i,scope:a,params:o},this},complete:function complete(t){return void 0===t&&(t=0),t?(this.state=C.COMPLETE_DELAY,this.countdown=t):(this.state=C.PENDING_REMOVE,this.dispatchTweenEvent(d.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function remove(){return this.parent.remove(this),this},stop:function stop(t){return this.state===C.ACTIVE&&void 0!==t&&this.seek(t),this.state!==C.REMOVED&&(this.state!==C.PAUSED&&this.state!==C.PENDING_ADD||(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(d.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=C.PENDING_REMOVE),this},update:function update(t,i){if(this.state===C.PAUSED)return!1;switch(this.useFrames&&(i=1*this.parent.timeScale),i*=this.timeScale,this.elapsed+=i,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=i,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case C.ACTIVE:this.hasStarted||this.isSeeking||(this.startDelay-=i,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(d.TWEEN_START,this.callbacks.onStart)));for(var o=!1,a=0;a<this.totalData;a++){var u=this.data[a];this.updateTweenData(this,u,i)&&(o=!0)}o||this.nextState();break;case C.LOOP_DELAY:this.countdown-=i,this.countdown<=0&&(this.state=C.ACTIVE,this.dispatchTweenEvent(d.TWEEN_LOOP,this.callbacks.onLoop));break;case C.OFFSET_DELAY:this.countdown-=i,this.countdown<=0&&(this.state=C.ACTIVE);break;case C.COMPLETE_DELAY:this.countdown-=i,this.countdown<=0&&(this.state=C.PENDING_REMOVE,this.dispatchTweenEvent(d.TWEEN_COMPLETE,this.callbacks.onComplete))}return this.state===C.PENDING_REMOVE},dispatchTweenDataEvent:function dispatchTweenDataEvent(t,i,o){this.isSeeking||(this.emit(t,this,o.key,o.target,o.current,o.previous),i&&(i.params[1]=o.target,i.func.apply(i.scope,i.params)))},dispatchTweenEvent:function dispatchTweenEvent(t,i){this.isSeeking||(this.emit(t,this,this.targets),i&&(i.params[1]=this.targets,i.func.apply(i.scope,i.params)))},setStateFromEnd:function setStateFromEnd(t,i,o){return i.yoyo?(i.elapsed=o,i.progress=o/i.duration,i.flipX&&i.target.toggleFlipX(),i.flipY&&i.target.toggleFlipY(),this.dispatchTweenDataEvent(d.TWEEN_YOYO,t.callbacks.onYoyo,i),i.start=i.getStartValue(i.target,i.key,i.start,i.index,t.totalTargets,t),C.PLAYING_BACKWARD):i.repeatCounter>0?(i.repeatCounter--,i.elapsed=o,i.progress=o/i.duration,i.flipX&&i.target.toggleFlipX(),i.flipY&&i.target.toggleFlipY(),i.start=i.getStartValue(i.target,i.key,i.start,i.index,t.totalTargets,t),i.end=i.getEndValue(i.target,i.key,i.start,i.index,t.totalTargets,t),i.repeatDelay>0?(i.elapsed=i.repeatDelay-o,i.current=i.start,i.target[i.key]=i.current,C.REPEAT_DELAY):(this.dispatchTweenDataEvent(d.TWEEN_REPEAT,t.callbacks.onRepeat,i),C.PLAYING_FORWARD)):C.COMPLETE},setStateFromStart:function setStateFromStart(t,i,o){return i.repeatCounter>0?(i.repeatCounter--,i.elapsed=o,i.progress=o/i.duration,i.flipX&&i.target.toggleFlipX(),i.flipY&&i.target.toggleFlipY(),i.end=i.getEndValue(i.target,i.key,i.start,i.index,t.totalTargets,t),i.repeatDelay>0?(i.elapsed=i.repeatDelay-o,i.current=i.start,i.target[i.key]=i.current,C.REPEAT_DELAY):(this.dispatchTweenDataEvent(d.TWEEN_REPEAT,t.callbacks.onRepeat,i),C.PLAYING_FORWARD)):C.COMPLETE},updateTweenData:function updateTweenData(t,i,o){var a=i.target;switch(i.state){case C.PLAYING_FORWARD:case C.PLAYING_BACKWARD:if(!a){i.state=C.COMPLETE;break}var u=i.elapsed,b=i.duration,S=0;(u+=o)>b&&(S=u-b,u=b);var M=i.state===C.PLAYING_FORWARD,P=u/b;if(i.elapsed=u,i.progress=P,i.previous=i.current,1===P)M?(i.current=i.end,a[i.key]=i.end,i.hold>0?(i.elapsed=i.hold-S,i.state=C.HOLD_DELAY):i.state=this.setStateFromEnd(t,i,S)):(i.current=i.start,a[i.key]=i.start,i.state=this.setStateFromStart(t,i,S));else{var R=M?i.ease(P):i.ease(1-P);i.current=i.start+(i.end-i.start)*R,a[i.key]=i.current}this.dispatchTweenDataEvent(d.TWEEN_UPDATE,t.callbacks.onUpdate,i);break;case C.DELAY:i.elapsed-=o,i.elapsed<=0&&(i.elapsed=Math.abs(i.elapsed),i.state=C.PENDING_RENDER);break;case C.REPEAT_DELAY:i.elapsed-=o,i.elapsed<=0&&(i.elapsed=Math.abs(i.elapsed),i.state=C.PLAYING_FORWARD,this.dispatchTweenDataEvent(d.TWEEN_REPEAT,t.callbacks.onRepeat,i));break;case C.HOLD_DELAY:i.elapsed-=o,i.elapsed<=0&&(i.state=this.setStateFromEnd(t,i,Math.abs(i.elapsed)));break;case C.PENDING_RENDER:a?(i.start=i.getStartValue(a,i.key,a[i.key],i.index,t.totalTargets,t),i.end=i.getEndValue(a,i.key,i.start,i.index,t.totalTargets,t),i.current=i.start,a[i.key]=i.start,i.state=C.PLAYING_FORWARD):i.state=C.COMPLETE}return i.state!==C.COMPLETE}});P.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],S.register("tween",(function(t){return this.scene.sys.tweens.add(t)})),b.register("tween",(function(t){return this.scene.sys.tweens.create(t)})),t.exports=P},function(t,i,o){t.exports={TIMELINE_COMPLETE:o(1466),TIMELINE_LOOP:o(1467),TIMELINE_PAUSE:o(1468),TIMELINE_RESUME:o(1469),TIMELINE_START:o(1470),TIMELINE_UPDATE:o(1471),TWEEN_ACTIVE:o(1472),TWEEN_COMPLETE:o(1473),TWEEN_LOOP:o(1474),TWEEN_REPEAT:o(1475),TWEEN_START:o(1476),TWEEN_STOP:o(1477),TWEEN_UPDATE:o(1478),TWEEN_YOYO:o(1479)}},function(t,i){t.exports=function TweenData(t,i,o,a,u,d,b,S,C,M,P,R,O,B,N){return{target:t,index:i,key:o,getActiveValue:d,getEndValue:a,getStartValue:u,ease:b,duration:0,totalDuration:0,delay:0,yoyo:M,hold:0,repeat:0,repeatDelay:0,flipX:B,flipY:N,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:S,duration:C,hold:P,repeat:R,repeatDelay:O},state:0}}},function(t,i,o){var a=o(68);t.exports=function Wrap(t){return a(t,-Math.PI,Math.PI)}},function(t,i,o){var a=o(68);t.exports=function WrapDegrees(t){return a(t,-180,180)}},function(t,i,o){var a={};t.exports=a;var u=o(83),d=o(32);a.fromVertices=function(t){for(var i={},o=0;o<t.length;o++){var a=(o+1)%t.length,b=u.normalise({x:t[a].y-t[o].y,y:t[o].x-t[a].x}),S=0===b.y?1/0:b.x/b.y;i[S=S.toFixed(3).toString()]=b}return d.values(i)},a.rotate=function(t,i){if(0!==i)for(var o=Math.cos(i),a=Math.sin(i),u=0;u<t.length;u++){var d,b=t[u];d=b.x*o-b.y*a,b.y=b.x*a+b.y*o,b.x=d}}},function(t,i,o){t.exports={AFTER_ADD:o(1504),AFTER_REMOVE:o(1505),AFTER_UPDATE:o(1506),BEFORE_ADD:o(1507),BEFORE_REMOVE:o(1508),BEFORE_UPDATE:o(1509),COLLISION_ACTIVE:o(1510),COLLISION_END:o(1511),COLLISION_START:o(1512),DRAG_END:o(1513),DRAG:o(1514),DRAG_START:o(1515),PAUSE:o(1516),RESUME:o(1517),SLEEP_END:o(1518),SLEEP_START:o(1519)}},function(t,i,o){var a={};t.exports=a;var u=o(274),d=o(250),b=o(84);a.collisions=function(t,i){for(var o=[],S=i.pairs.table,C=i.metrics,M=0;M<t.length;M++){var P=t[M][0],R=t[M][1];if((!P.isStatic&&!P.isSleeping||!R.isStatic&&!R.isSleeping)&&a.canCollide(P.collisionFilter,R.collisionFilter)&&(C.midphaseTests+=1,b.overlaps(P.bounds,R.bounds)))for(var O=P.parts.length>1?1:0;O<P.parts.length;O++)for(var B=P.parts[O],N=R.parts.length>1?1:0;N<R.parts.length;N++){var Y=R.parts[N];if(B===P&&Y===R||b.overlaps(B.bounds,Y.bounds)){var G,X=S[d.id(B,Y)];G=X&&X.isActive?X.collision:null;var U=u.collides(B,Y,G);C.narrowphaseTests+=1,U.reused&&(C.narrowReuseCount+=1),U.collided&&(o.push(U),C.narrowDetections+=1)}}}return o},a.canCollide=function(t,i){return t.group===i.group&&0!==t.group?t.group>0:0!=(t.mask&i.category)&&0!=(i.mask&t.category)}},function(t,i,o){var a={};t.exports=a;var u=o(64),d=o(83);a.collides=function(t,i,o){var b,S,C,M,P=!1;if(o){var R=t.parent,O=i.parent,B=R.speed*R.speed+R.angularSpeed*R.angularSpeed+O.speed*O.speed+O.angularSpeed*O.angularSpeed;P=o&&o.collided&&B<.2,M=o}else M={collided:!1,bodyA:t,bodyB:i};if(o&&P){var N=M.axisBody,Y=N===t?i:t,G=[N.axes[o.axisNumber]];if(C=a._overlapAxes(N.vertices,Y.vertices,G),M.reused=!0,C.overlap<=0)return M.collided=!1,M}else{if((b=a._overlapAxes(t.vertices,i.vertices,t.axes)).overlap<=0)return M.collided=!1,M;if((S=a._overlapAxes(i.vertices,t.vertices,i.axes)).overlap<=0)return M.collided=!1,M;b.overlap<S.overlap?(C=b,M.axisBody=t):(C=S,M.axisBody=i),M.axisNumber=C.axisNumber}M.bodyA=t.id<i.id?t:i,M.bodyB=t.id<i.id?i:t,M.collided=!0,M.depth=C.overlap,M.parentA=M.bodyA.parent,M.parentB=M.bodyB.parent,t=M.bodyA,i=M.bodyB,d.dot(C.axis,d.sub(i.position,t.position))<0?M.normal={x:C.axis.x,y:C.axis.y}:M.normal={x:-C.axis.x,y:-C.axis.y},M.tangent=d.perp(M.normal),M.penetration=M.penetration||{},M.penetration.x=M.normal.x*M.depth,M.penetration.y=M.normal.y*M.depth;var X=a._findSupports(t,i,M.normal),U=[];if(u.contains(t.vertices,X[0])&&U.push(X[0]),u.contains(t.vertices,X[1])&&U.push(X[1]),U.length<2){var z=a._findSupports(i,t,d.neg(M.normal));u.contains(i.vertices,z[0])&&U.push(z[0]),U.length<2&&u.contains(i.vertices,z[1])&&U.push(z[1])}return U.length<1&&(U=[X[0]]),M.supports=U,M},a._overlapAxes=function(t,i,o){for(var u,b,S=d._temp[0],C=d._temp[1],M={overlap:Number.MAX_VALUE},P=0;P<o.length;P++){if(b=o[P],a._projectToAxis(S,t,b),a._projectToAxis(C,i,b),(u=Math.min(S.max-C.min,C.max-S.min))<=0)return M.overlap=u,M;u<M.overlap&&(M.overlap=u,M.axis=b,M.axisNumber=P)}return M},a._projectToAxis=function(t,i,o){for(var a=d.dot(i[0],o),u=a,b=1;b<i.length;b+=1){var S=d.dot(i[b],o);S>u?u=S:S<a&&(a=S)}t.min=a,t.max=u},a._findSupports=function(t,i,o){for(var a,u,b,S,C=Number.MAX_VALUE,M=d._temp[0],P=i.vertices,R=t.position,O=0;O<P.length;O++)u=P[O],M.x=u.x-R.x,M.y=u.y-R.y,(a=-d.dot(o,M))<C&&(C=a,b=u);return u=P[b.index-1>=0?b.index-1:P.length-1],M.x=u.x-R.x,M.y=u.y-R.y,C=-d.dot(o,M),S=u,u=P[(b.index+1)%P.length],M.x=u.x-R.x,M.y=u.y-R.y,(a=-d.dot(o,M))<C&&(S=u),[b,S]}},function(t,i,o){t.exports={AlignTo:o(601),Angle:o(602),Call:o(603),GetFirst:o(604),GetLast:o(605),GridAlign:o(606),IncAlpha:o(678),IncX:o(679),IncXY:o(680),IncY:o(681),PlaceOnCircle:o(682),PlaceOnEllipse:o(683),PlaceOnLine:o(684),PlaceOnRectangle:o(685),PlaceOnTriangle:o(686),PlayAnimation:o(687),PropertyValueInc:o(46),PropertyValueSet:o(27),RandomCircle:o(688),RandomEllipse:o(689),RandomLine:o(690),RandomRectangle:o(691),RandomTriangle:o(692),Rotate:o(693),RotateAround:o(694),RotateAroundDistance:o(695),ScaleX:o(696),ScaleXY:o(697),ScaleY:o(698),SetAlpha:o(699),SetBlendMode:o(700),SetDepth:o(701),SetHitArea:o(702),SetOrigin:o(703),SetRotation:o(704),SetScale:o(705),SetScaleX:o(706),SetScaleY:o(707),SetScrollFactor:o(708),SetScrollFactorX:o(709),SetScrollFactorY:o(710),SetTint:o(711),SetVisible:o(712),SetX:o(713),SetXY:o(714),SetY:o(715),ShiftPosition:o(716),Shuffle:o(717),SmootherStep:o(718),SmoothStep:o(719),Spread:o(720),ToggleVisible:o(721),WrapInRectangle:o(722)}},function(t,i,o){var a=o(123),u=[];u[a.BOTTOM_CENTER]=o(277),u[a.BOTTOM_LEFT]=o(278),u[a.BOTTOM_RIGHT]=o(279),u[a.LEFT_BOTTOM]=o(280),u[a.LEFT_CENTER]=o(281),u[a.LEFT_TOP]=o(282),u[a.RIGHT_BOTTOM]=o(283),u[a.RIGHT_CENTER]=o(284),u[a.RIGHT_TOP]=o(285),u[a.TOP_CENTER]=o(286),u[a.TOP_LEFT]=o(287),u[a.TOP_RIGHT]=o(288),t.exports=function QuickSet(t,i,o,a,d){return u[o](t,i,a,d)}},function(t,i,o){var a=o(42),u=o(87),d=o(88),b=o(52);t.exports=function BottomCenter(t,i,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),d(t,u(i)+o),b(t,a(i)+S),t}},function(t,i,o){var a=o(42),u=o(43),d=o(53),b=o(52);t.exports=function BottomLeft(t,i,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),d(t,u(i)-o),b(t,a(i)+S),t}},function(t,i,o){var a=o(42),u=o(44),d=o(54),b=o(52);t.exports=function BottomRight(t,i,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),d(t,u(i)+o),b(t,a(i)+S),t}},function(t,i,o){var a=o(42),u=o(43),d=o(55),b=o(54);t.exports=function LeftBottom(t,i,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),b(t,u(i)-o),d(t,a(i)+S),t}},function(t,i,o){var a=o(89),u=o(43),d=o(90),b=o(54);t.exports=function LeftCenter(t,i,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),b(t,u(i)-o),d(t,a(i)+S),t}},function(t,i,o){var a=o(43),u=o(45),d=o(54),b=o(52);t.exports=function LeftTop(t,i,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),d(t,a(i)-o),b(t,u(i)-S),t}},function(t,i,o){var a=o(42),u=o(44),d=o(55),b=o(53);t.exports=function RightBottom(t,i,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),b(t,u(i)+o),d(t,a(i)+S),t}},function(t,i,o){var a=o(89),u=o(44),d=o(90),b=o(53);t.exports=function RightCenter(t,i,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),b(t,u(i)+o),d(t,a(i)+S),t}},function(t,i,o){var a=o(44),u=o(45),d=o(53),b=o(52);t.exports=function RightTop(t,i,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),d(t,a(i)+o),b(t,u(i)-S),t}},function(t,i,o){var a=o(87),u=o(45),d=o(55),b=o(88);t.exports=function TopCenter(t,i,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),b(t,a(i)+o),d(t,u(i)-S),t}},function(t,i,o){var a=o(43),u=o(45),d=o(55),b=o(53);t.exports=function TopLeft(t,i,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),b(t,a(i)-o),d(t,u(i)-S),t}},function(t,i,o){var a=o(44),u=o(45),d=o(55),b=o(54);t.exports=function TopRight(t,i,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),b(t,a(i)+o),d(t,u(i)-S),t}},function(t,i,o){var a=o(123),u=[];u[a.BOTTOM_CENTER]=o(290),u[a.BOTTOM_LEFT]=o(291),u[a.BOTTOM_RIGHT]=o(292),u[a.CENTER]=o(293),u[a.LEFT_CENTER]=o(295),u[a.RIGHT_CENTER]=o(296),u[a.TOP_CENTER]=o(297),u[a.TOP_LEFT]=o(298),u[a.TOP_RIGHT]=o(299),u[a.LEFT_BOTTOM]=u[a.BOTTOM_LEFT],u[a.LEFT_TOP]=u[a.TOP_LEFT],u[a.RIGHT_BOTTOM]=u[a.BOTTOM_RIGHT],u[a.RIGHT_TOP]=u[a.TOP_RIGHT],t.exports=function QuickSet(t,i,o,a,d){return u[o](t,i,a,d)}},function(t,i,o){var a=o(42),u=o(87),d=o(55),b=o(88);t.exports=function BottomCenter(t,i,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),b(t,u(i)+o),d(t,a(i)+S),t}},function(t,i,o){var a=o(42),u=o(43),d=o(55),b=o(53);t.exports=function BottomLeft(t,i,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),b(t,u(i)-o),d(t,a(i)+S),t}},function(t,i,o){var a=o(42),u=o(44),d=o(55),b=o(54);t.exports=function BottomRight(t,i,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),b(t,u(i)+o),d(t,a(i)+S),t}},function(t,i,o){var a=o(294),u=o(87),d=o(89);t.exports=function Center(t,i,o,b){return void 0===o&&(o=0),void 0===b&&(b=0),a(t,u(i)+o,d(i)+b),t}},function(t,i,o){var a=o(88),u=o(90);t.exports=function CenterOn(t,i,o){return a(t,i),u(t,o)}},function(t,i,o){var a=o(89),u=o(43),d=o(90),b=o(53);t.exports=function LeftCenter(t,i,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),b(t,u(i)-o),d(t,a(i)+S),t}},function(t,i,o){var a=o(89),u=o(44),d=o(90),b=o(54);t.exports=function RightCenter(t,i,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),b(t,u(i)+o),d(t,a(i)+S),t}},function(t,i,o){var a=o(87),u=o(45),d=o(88),b=o(52);t.exports=function TopCenter(t,i,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),d(t,a(i)+o),b(t,u(i)-S),t}},function(t,i,o){var a=o(43),u=o(45),d=o(53),b=o(52);t.exports=function TopLeft(t,i,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),d(t,a(i)-o),b(t,u(i)-S),t}},function(t,i,o){var a=o(44),u=o(45),d=o(54),b=o(52);t.exports=function TopRight(t,i,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),d(t,a(i)+o),b(t,u(i)-S),t}},function(t,i,o){var a=o(169),u=o(98),d=o(14),b=o(4);t.exports=function GetPoint(t,i,o){void 0===o&&(o=new b);var S=u(i,0,d.PI2);return a(t,S,o)}},function(t,i,o){var a=o(302),u=o(169),d=o(98),b=o(14);t.exports=function GetPoints(t,i,o,S){void 0===S&&(S=[]),!i&&o>0&&(i=a(t)/o);for(var C=0;C<i;C++){var M=d(C/i,0,b.PI2);S.push(u(t,M))}return S}},function(t,i){t.exports=function Circumference(t){return Math.PI*t.radius*2}},function(t,i,o){var a=o(18),u={_alpha:1,clearAlpha:function clearAlpha(){return this.setAlpha(1)},setAlpha:function setAlpha(t){return void 0===t&&(t=1),this.alpha=t,this},alpha:{get:function get(){return this._alpha},set:function set(t){var i=a(t,0,1);this._alpha=i,0===i?this.renderFlags&=-3:this.renderFlags|=2}}};t.exports=u},function(t,i,o){var a=o(35),u={_blendMode:a.NORMAL,blendMode:{get:function get(){return this._blendMode},set:function set(t){"string"==typeof t&&(t=a[t]),(t|=0)>=-1&&(this._blendMode=t)}},setBlendMode:function setBlendMode(t){return this.blendMode=t,this}};t.exports=u},function(t,i){var o={_depth:0,depth:{get:function get(){return this._depth},set:function set(t){this.displayList&&this.displayList.queueDepthSort(),this._depth=t}},setDepth:function setDepth(t){return void 0===t&&(t=0),this.depth=t,this}};t.exports=o},function(t,i,o){var a=o(171),u=o(130);t.exports=function GetPoints(t,i,o,d){void 0===d&&(d=[]),!i&&o>0&&(i=u(t)/o);for(var b=0;b<i;b++){var S=b/i;d.push(a(t,S))}return d}},function(t,i,o){var a=o(4);t.exports=function GetPoint(t,i,o){return void 0===o&&(o=new a),o.x=t.x1+(t.x2-t.x1)*i,o.y=t.y1+(t.y2-t.y1)*i,o}},function(t,i){t.exports=function RotateAround(t,i,o,a){var u=Math.cos(a),d=Math.sin(a),b=t.x-i,S=t.y-o;return t.x=b*u-S*d+i,t.y=b*d+S*u+o,t}},function(t,i,o){var a=o(310),u=o(311),d={mask:null,setMask:function setMask(t){return this.mask=t,this},clearMask:function clearMask(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function createBitmapMask(t){return void 0===t&&(this.texture||this.shader)&&(t=this),new a(this.scene,t)},createGeometryMask:function createGeometryMask(t){return void 0===t&&"Graphics"===this.type&&(t=this),new u(this.scene,t)}};t.exports=d},function(t,i,o){var a=o(0),u=o(22),d=o(91),b=new a({initialize:function BitmapMask(t,i){var o=t.sys.renderer;this.renderer=o,this.bitmapMask=i,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),t.sys.game.events.on(u.CONTEXT_RESTORED,this.createMask,this),o&&o.on(d.RESIZE,this.createMask,this)},createMask:function createMask(){var t=this.renderer;if(t&&t.gl){this.mainTexture&&this.clearMask();var i=t.width,o=t.height,a=0==(i&i-1)&&0==(o&o-1),u=t.gl,d=a?u.REPEAT:u.CLAMP_TO_EDGE,b=u.LINEAR;this.mainTexture=t.createTexture2D(0,b,b,d,d,u.RGBA,null,i,o),this.maskTexture=t.createTexture2D(0,b,b,d,d,u.RGBA,null,i,o),this.mainFramebuffer=t.createFramebuffer(i,o,this.mainTexture,!0),this.maskFramebuffer=t.createFramebuffer(i,o,this.maskTexture,!0)}},clearMask:function clearMask(){var t=this.renderer;t&&t.gl&&this.mainTexture&&(t.deleteTexture(this.mainTexture),t.deleteTexture(this.maskTexture),t.deleteFramebuffer(this.mainFramebuffer),t.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function setBitmap(t){this.bitmapMask=t},preRenderWebGL:function preRenderWebGL(t,i,o){t.pipelines.BITMAPMASK_PIPELINE.beginMask(this,i,o)},postRenderWebGL:function postRenderWebGL(t,i){t.pipelines.BITMAPMASK_PIPELINE.endMask(this,i)},preRenderCanvas:function preRenderCanvas(){},postRenderCanvas:function postRenderCanvas(){},destroy:function destroy(){this.clearMask(),this.renderer&&this.renderer.off(d.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});t.exports=b},function(t,i,o){var a=new(o(0))({initialize:function GeometryMask(t,i){this.geometryMask=i,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function setShape(t){return this.geometryMask=t,this},setInvertAlpha:function setInvertAlpha(t){return void 0===t&&(t=!0),this.invertAlpha=t,this},preRenderWebGL:function preRenderWebGL(t,i,o){var a=t.gl;t.flush(),0===t.maskStack.length&&(a.enable(a.STENCIL_TEST),a.clear(a.STENCIL_BUFFER_BIT),t.maskCount=0),t.currentCameraMask.mask!==this&&(t.currentMask.mask=this),t.maskStack.push({mask:this,camera:o}),this.applyStencil(t,o,!0),t.maskCount++},applyStencil:function applyStencil(t,i,o){var a=t.gl,u=this.geometryMask,d=t.maskCount;a.colorMask(!1,!1,!1,!1),o?(a.stencilFunc(a.EQUAL,d,255),a.stencilOp(a.KEEP,a.KEEP,a.INCR)):(a.stencilFunc(a.EQUAL,d+1,255),a.stencilOp(a.KEEP,a.KEEP,a.DECR)),u.renderWebGL(t,u,i),t.flush(),a.colorMask(!0,!0,!0,!0),a.stencilOp(a.KEEP,a.KEEP,a.KEEP),o?this.invertAlpha?a.stencilFunc(a.NOTEQUAL,d+1,255):a.stencilFunc(a.EQUAL,d+1,255):this.invertAlpha?a.stencilFunc(a.NOTEQUAL,d,255):a.stencilFunc(a.EQUAL,d,255)},postRenderWebGL:function postRenderWebGL(t){var i=t.gl;t.maskStack.pop(),t.maskCount--,t.flush();var o=t.currentMask;if(0===t.maskStack.length)o.mask=null,i.disable(i.STENCIL_TEST);else{var a=t.maskStack[t.maskStack.length-1];a.mask.applyStencil(t,a.camera,!1),t.currentCameraMask.mask!==a.mask?(o.mask=a.mask,o.camera=a.camera):o.mask=null}},preRenderCanvas:function preRenderCanvas(t,i,o){var a=this.geometryMask;t.currentContext.save(),a.renderCanvas(t,a,o,null,null,!0),t.currentContext.clip()},postRenderCanvas:function postRenderCanvas(t){t.currentContext.restore()},destroy:function destroy(){this.geometryMask=null}});t.exports=a},function(t,i){var o={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function setScrollFactor(t,i){return void 0===i&&(i=t),this.scrollFactorX=t,this.scrollFactorY=i,this}};t.exports=o},function(t,i,o){var a=o(14),u=o(25),d=o(177),b=o(269),S=o(270),C=o(3),M={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function get(){return(this._scaleX+this._scaleY)/2},set:function set(t){this._scaleX=t,this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function get(){return this._scaleX},set:function set(t){this._scaleX=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleY:{get:function get(){return this._scaleY},set:function set(t){this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},angle:{get:function get(){return S(this._rotation*a.RAD_TO_DEG)},set:function set(t){this.rotation=S(t)*a.DEG_TO_RAD}},rotation:{get:function get(){return this._rotation},set:function set(t){this._rotation=b(t)}},setPosition:function setPosition(t,i,o,a){return void 0===t&&(t=0),void 0===i&&(i=t),void 0===o&&(o=0),void 0===a&&(a=0),this.x=t,this.y=i,this.z=o,this.w=a,this},copyPosition:function copyPosition(t){return void 0!==t.x&&(this.x=t.x),void 0!==t.y&&(this.y=t.y),void 0!==t.z&&(this.z=t.z),void 0!==t.w&&(this.w=t.w),this},setRandomPosition:function setRandomPosition(t,i,o,a){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=this.scene.sys.scale.width),void 0===a&&(a=this.scene.sys.scale.height),this.x=t+Math.random()*o,this.y=i+Math.random()*a,this},setRotation:function setRotation(t){return void 0===t&&(t=0),this.rotation=t,this},setAngle:function setAngle(t){return void 0===t&&(t=0),this.angle=t,this},setScale:function setScale(t,i){return void 0===t&&(t=1),void 0===i&&(i=t),this.scaleX=t,this.scaleY=i,this},setX:function setX(t){return void 0===t&&(t=0),this.x=t,this},setY:function setY(t){return void 0===t&&(t=0),this.y=t,this},setZ:function setZ(t){return void 0===t&&(t=0),this.z=t,this},setW:function setW(t){return void 0===t&&(t=0),this.w=t,this},getLocalTransformMatrix:function getLocalTransformMatrix(t){return void 0===t&&(t=new u),t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function getWorldTransformMatrix(t,i){void 0===t&&(t=new u),void 0===i&&(i=new u);var o=this.parentContainer;if(!o)return this.getLocalTransformMatrix(t);for(t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);o;)i.applyITRS(o.x,o.y,o._rotation,o._scaleX,o._scaleY),i.multiply(t,t),o=o.parentContainer;return t},getLocalPoint:function getLocalPoint(t,i,o,a){o||(o=new C),a||(a=this.scene.sys.cameras.main);var u=a.scrollX,b=a.scrollY,S=t+u*this.scrollFactorX-u,M=i+b*this.scrollFactorY-b;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(S,M,o):d(S,M,this.x,this.y,this.rotation,this.scaleX,this.scaleY,o),this._originComponent&&(o.x+=this._displayOriginX,o.y+=this._displayOriginY),o},getParentRotation:function getParentRotation(){for(var t=0,i=this.parentContainer;i;)t+=i.rotation,i=i.parentContainer;return t}};t.exports=M},function(t,i){var o={_visible:!0,visible:{get:function get(){return this._visible},set:function set(t){t?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function setVisible(t){return this.visible=t,this}};t.exports=o},function(t,i,o){t.exports={CHANGE_DATA:o(638),CHANGE_DATA_KEY:o(639),DESTROY:o(640),REMOVE_DATA:o(641),SET_DATA:o(642)}},function(t,i,o){var a=o(130),u=o(4);t.exports=function MarchingAnts(t,i,o,d){if(void 0===d&&(d=[]),!i&&!o)return d;i?o=Math.round(a(t)/i):i=a(t)/o;for(var b=t.x,S=t.y,C=0,M=0;M<o;M++)switch(d.push(new u(b,S)),C){case 0:(b+=i)>=t.right&&(C=1,S+=b-t.right,b=t.right);break;case 1:(S+=i)>=t.bottom&&(C=2,b-=S-t.bottom,S=t.bottom);break;case 2:(b-=i)<=t.left&&(C=3,S-=t.left-b,b=t.left);break;case 3:(S-=i)<=t.top&&(C=0,S=t.top)}return d}},function(t,i){t.exports=function BresenhamPoints(t,i,o){void 0===i&&(i=1),void 0===o&&(o=[]);var a=Math.round(t.x1),u=Math.round(t.y1),d=Math.round(t.x2),b=Math.round(t.y2),S=Math.abs(d-a),C=Math.abs(b-u),M=a<d?1:-1,P=u<b?1:-1,R=S-C;o.push({x:a,y:u});for(var O=1;a!==d||u!==b;){var B=R<<1;B>-C&&(R-=C,a+=M),B<S&&(R+=S,u+=P),O%i==0&&o.push({x:a,y:u}),O++}return o}},function(t,i){t.exports=function FindClosestInSorted(t,i,o){if(!i.length)return NaN;if(1===i.length)return i[0];var a,u,d=1;if(o){if(t<i[0][o])return i[0];for(;i[d][o]<t;)d++}else for(;i[d]<t;)d++;return d>i.length&&(d=i.length),o?(a=i[d-1][o],(u=i[d][o])-t<=t-a?i[d]:i[d-1]):(a=i[d-1],(u=i[d])-t<=t-a?u:a)}},function(t,i,o){var a=new(o(0))({initialize:function AnimationFrame(t,i,o,a,u){void 0===u&&(u=!1),this.textureKey=t,this.textureFrame=i,this.index=o,this.frame=a,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=u},toJSON:function toJSON(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function destroy(){this.frame=void 0}});t.exports=a},function(t,i){t.exports=function SortByDigits(t){var i=/\D/g;return t.sort((function(t,o){return parseInt(t.replace(i,""),10)-parseInt(o.replace(i,""),10)})),t}},function(t,i,o){var a=o(185),u=o(0),d=o(102),b=o(9),S=o(132),C=o(22),M=o(2),P=o(6),R=o(186),O=o(322),B=new u({Extends:b,initialize:function AnimationManager(t){b.call(this),this.game=t,this.textureManager=null,this.globalTimeScale=1,this.anims=new d,this.mixes=new d,this.paused=!1,this.name="AnimationManager",t.events.once(C.BOOT,this.boot,this)},boot:function boot(){this.textureManager=this.game.textures,this.game.events.once(C.DESTROY,this.destroy,this)},addMix:function addMix(t,i,o){var a=this.anims,u=this.mixes,d="string"==typeof t?t:t.key,b="string"==typeof i?i:i.key;if(a.has(d)&&a.has(b)){var S=u.get(d);S||(S={}),S[b]=o,u.set(d,S)}return this},removeMix:function removeMix(t,i){var o=this.mixes,a="string"==typeof t?t:t.key,u=o.get(a);if(u)if(i){var d="string"==typeof i?i:i.key;u.hasOwnProperty(d)&&delete u[d]}else i||o.delete(a);return this},getMix:function getMix(t,i){var o=this.mixes,a="string"==typeof t?t:t.key,u="string"==typeof i?i:i.key,d=o.get(a);return d&&d.hasOwnProperty(u)?d[u]:0},add:function add(t,i){return this.anims.has(t)?(console.warn("Animation key exists: "+t),this):(i.key=t,this.anims.set(t,i),this.emit(S.ADD_ANIMATION,t,i),this)},exists:function exists(t){return this.anims.has(t)},createFromAseprite:function createFromAseprite(t,i){var o=[],a=this.game.cache.json.get(t);if(!a)return o;var u=this,d=P(a,"meta",null),b=P(a,"frames",null);return d&&b&&P(d,"frameTags",[]).forEach((function(a){var d=[],S=M(a,"name",null),C=M(a,"from",0),P=M(a,"to",0),R=M(a,"direction","forward");if(S&&(!i||i&&i.indexOf(S)>-1)){for(var O=[],B=Number.MAX_SAFE_INTEGER,N=C;N<=P;N++){var Y=N.toString(),G=b[Y];if(G){var X=M(G,"duration",Number.MAX_SAFE_INTEGER);X<B&&(B=X),O.push({frame:Y,duration:X})}}O.forEach((function(i){d.push({key:t,frame:i.frame,duration:B-i.duration})}));var U=B*d.length;"reverse"===R&&(d=d.reverse());var z={key:S,frames:d,duration:U,yoyo:"pingpong"===R},V=u.create(z);V&&o.push(V)}})),o},create:function create(t){var i=t.key,o=!1;return i&&((o=this.get(i))||(o=new a(this,i,t),this.anims.set(i,o),this.emit(S.ADD_ANIMATION,i,o))),o},fromJSON:function fromJSON(t,i){void 0===i&&(i=!1),i&&this.anims.clear(),"string"==typeof t&&(t=JSON.parse(t));var o=[];if(t.hasOwnProperty("anims")&&Array.isArray(t.anims)){for(var a=0;a<t.anims.length;a++)o.push(this.create(t.anims[a]));t.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=t.globalTimeScale)}else t.hasOwnProperty("key")&&"frame"===t.type&&o.push(this.create(t));return o},generateFrameNames:function generateFrameNames(t,i){var o,a=P(i,"prefix",""),u=P(i,"start",0),d=P(i,"end",0),b=P(i,"suffix",""),S=P(i,"zeroPad",0),C=P(i,"outputArray",[]),M=P(i,"frames",!1),B=this.textureManager.get(t);if(!B)return C;if(i)for(M||(M=O(u,d)),o=0;o<M.length;o++){var N=a+R(M[o],S,"0",1)+b;B.has(N)?C.push({key:t,frame:N}):console.warn("generateFrameNames: Frame missing: "+N+" from texture: "+t)}else for(M=B.getFrameNames(),o=0;o<M.length;o++)C.push({key:t,frame:M[o]});return C},generateFrameNumbers:function generateFrameNumbers(t,i){var o=P(i,"start",0),a=P(i,"end",-1),u=P(i,"first",!1),d=P(i,"outputArray",[]),b=P(i,"frames",!1),S=this.textureManager.get(t);if(!S)return d;u&&S.has(u)&&d.push({key:t,frame:u}),b||(-1===a&&(a=S.frameTotal-2),b=O(o,a));for(var C=0;C<b.length;C++)S.has(b[C])?d.push({key:t,frame:b[C]}):console.warn("generateFrameNumbers: Frame "+C+" missing from texture: "+t);return d},get:function get(t){return this.anims.get(t)},pauseAll:function pauseAll(){return this.paused||(this.paused=!0,this.emit(S.PAUSE_ALL)),this},play:function play(t,i){Array.isArray(i)||(i=[i]);for(var o=0;o<i.length;o++)i[o].anims.play(t);return this},staggerPlay:function staggerPlay(t,i,o,a){void 0===o&&(o=0),void 0===a&&(a=!0),Array.isArray(i)||(i=[i]);var u=i.length;a||u--;for(var d=0;d<i.length;d++){var b=o<0?Math.abs(o)*(u-d):o*d;i[d].anims.playAfterDelay(t,b)}return this},remove:function remove(t){var i=this.get(t);return i&&(this.emit(S.REMOVE_ANIMATION,t,i),this.anims.delete(t),this.removeMix(t)),i},resumeAll:function resumeAll(){return this.paused&&(this.paused=!1,this.emit(S.RESUME_ALL)),this},toJSON:function toJSON(t){var i={anims:[],globalTimeScale:this.globalTimeScale};return void 0!==t&&""!==t?i.anims.push(this.anims.get(t).toJSON()):this.anims.each((function(t,o){i.anims.push(o.toJSON())})),i},destroy:function destroy(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});t.exports=B},function(t,i){t.exports=function NumberArray(t,i,o,a){var u,d=[],b=!1;if((o||a)&&(b=!0,o||(o=""),a||(a="")),i<t)for(u=t;u>=i;u--)b?d.push(o+u.toString()+a):d.push(u);else for(u=t;u<=i;u++)b?d.push(o+u.toString()+a):d.push(u);return d}},function(t,i,o){var a=o(0),u=o(102),d=o(9),b=o(324),S=new a({initialize:function BaseCache(){this.entries=new u,this.events=new d},add:function add(t,i){return this.entries.set(t,i),this.events.emit(b.ADD,this,t,i),this},has:function has(t){return this.entries.has(t)},exists:function exists(t){return this.entries.has(t)},get:function get(t){return this.entries.get(t)},remove:function remove(t){var i=this.get(t);return i&&(this.entries.delete(t),this.events.emit(b.REMOVE,this,t,i.data)),this},getKeys:function getKeys(){return this.entries.keys()},destroy:function destroy(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});t.exports=S},function(t,i,o){t.exports={ADD:o(736),REMOVE:o(737)}},function(t,i,o){var a=o(323),u=o(0),d=o(22),b=new u({initialize:function CacheManager(t){this.game=t,this.binary=new a,this.bitmapFont=new a,this.json=new a,this.physics=new a,this.shader=new a,this.audio=new a,this.video=new a,this.text=new a,this.html=new a,this.obj=new a,this.tilemap=new a,this.xml=new a,this.custom={},this.game.events.once(d.DESTROY,this.destroy,this)},addCustom:function addCustom(t){return this.custom.hasOwnProperty(t)||(this.custom[t]=new a),this.custom[t]},destroy:function destroy(){for(var t=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],i=0;i<t.length;i++)this[t[i]].destroy(),this[t[i]]=null;for(var o in this.custom)this.custom[o].destroy();this.custom=null,this.game=null}});t.exports=b},function(t,i,o){var a=o(133),u=o(190),d=o(18),b=o(0),S=o(11),C=o(333),M=o(37),P=o(135),R=o(10),O=o(3),B=new b({Extends:a,Mixins:[S.Flip,S.Tint,S.Pipeline],initialize:function Camera(t,i,o,u){a.call(this,t,i,o,u),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new C.Fade(this),this.flashEffect=new C.Flash(this),this.shakeEffect=new C.Shake(this),this.panEffect=new C.Pan(this),this.rotateToEffect=new C.RotateTo(this),this.zoomEffect=new C.Zoom(this),this.lerp=new O(1,1),this.followOffset=new O,this.deadzone=null,this._follow=null},setDeadzone:function setDeadzone(t,i){if(void 0===t)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=t,this.deadzone.height=i):this.deadzone=new R(0,0,t,i),this._follow){var o=this.width/2,a=this.height/2,d=this._follow.x-this.followOffset.x,b=this._follow.y-this.followOffset.y;this.midPoint.set(d,b),this.scrollX=d-o,this.scrollY=b-a}u(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function fadeIn(t,i,o,a,u,d){return this.fadeEffect.start(!1,t,i,o,a,!0,u,d)},fadeOut:function fadeOut(t,i,o,a,u,d){return this.fadeEffect.start(!0,t,i,o,a,!0,u,d)},fadeFrom:function fadeFrom(t,i,o,a,u,d,b){return this.fadeEffect.start(!1,t,i,o,a,u,d,b)},fade:function fade(t,i,o,a,u,d,b){return this.fadeEffect.start(!0,t,i,o,a,u,d,b)},flash:function flash(t,i,o,a,u,d,b){return this.flashEffect.start(t,i,o,a,u,d,b)},shake:function shake(t,i,o,a,u){return this.shakeEffect.start(t,i,o,a,u)},pan:function pan(t,i,o,a,u,d,b){return this.panEffect.start(t,i,o,a,u,d,b)},rotateTo:function rotateTo(t,i,o,a,u,d,b){return this.rotateToEffect.start(t,i,o,a,u,d,b)},zoomTo:function zoomTo(t,i,o,a,u,d){return this.zoomEffect.start(t,i,o,a,u,d)},preRender:function preRender(){this.renderList.length=0;var t=this.width,i=this.height,o=.5*t,a=.5*i,d=this.zoom,b=this.matrix,S=t*this.originX,C=i*this.originY,R=this._follow,O=this.deadzone,B=this.scrollX,N=this.scrollY;O&&u(O,this.midPoint.x,this.midPoint.y);var Y=!1;if(R&&!this.panEffect.isRunning){var G=R.x-this.followOffset.x,X=R.y-this.followOffset.y;O?(G<O.x?B=P(B,B-(O.x-G),this.lerp.x):G>O.right&&(B=P(B,B+(G-O.right),this.lerp.x)),X<O.y?N=P(N,N-(O.y-X),this.lerp.y):X>O.bottom&&(N=P(N,N+(X-O.bottom),this.lerp.y))):(B=P(B,G-S,this.lerp.x),N=P(N,X-C,this.lerp.y)),Y=!0}this.useBounds&&(B=this.clampX(B),N=this.clampY(N)),this.roundPixels&&(S=Math.round(S),C=Math.round(C),B=Math.round(B),N=Math.round(N)),this.scrollX=B,this.scrollY=N;var U=B+o,z=N+a;this.midPoint.set(U,z);var V=t/d,W=i/d,H=U-V/2,j=z-W/2;this.roundPixels&&(H=Math.round(H),j=Math.round(j)),this.worldView.setTo(H,j,V,W),b.applyITRS(this.x+S,this.y+C,this.rotation,d,d),b.translate(-S,-C),this.shakeEffect.preRender(),Y&&this.emit(M.FOLLOW_UPDATE,this,R)},setLerp:function setLerp(t,i){return void 0===t&&(t=1),void 0===i&&(i=t),this.lerp.set(t,i),this},setFollowOffset:function setFollowOffset(t,i){return void 0===t&&(t=0),void 0===i&&(i=0),this.followOffset.set(t,i),this},startFollow:function startFollow(t,i,o,a,u,b){void 0===i&&(i=!1),void 0===o&&(o=1),void 0===a&&(a=o),void 0===u&&(u=0),void 0===b&&(b=u),this._follow=t,this.roundPixels=i,o=d(o,0,1),a=d(a,0,1),this.lerp.set(o,a),this.followOffset.set(u,b);var S=this.width/2,C=this.height/2,M=t.x-u,P=t.y-b;return this.midPoint.set(M,P),this.scrollX=M-S,this.scrollY=P-C,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function stopFollow(){return this._follow=null,this},resetFX:function resetFX(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function update(t,i){this.visible&&(this.rotateToEffect.update(t,i),this.panEffect.update(t,i),this.zoomEffect.update(t,i),this.shakeEffect.update(t,i),this.flashEffect.update(t,i),this.fadeEffect.update(t,i))},destroy:function destroy(){this.resetFX(),a.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});t.exports=B},function(t,i,o){var a=o(38);t.exports=function HexStringToColor(t){var i=new a;t=t.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,i,o,a){return i+i+o+o+a+a}));var o=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(o){var u=parseInt(o[1],16),d=parseInt(o[2],16),b=parseInt(o[3],16);i.setTo(u,d,b)}return i}},function(t,i){t.exports=function GetColor32(t,i,o,a){return a<<24|t<<16|i<<8|o}},function(t,i){t.exports=function RGBToHSV(t,i,o,a){void 0===a&&(a={h:0,s:0,v:0}),t/=255,i/=255,o/=255;var u=Math.min(t,i,o),d=Math.max(t,i,o),b=d-u,S=0,C=0===d?0:b/d,M=d;return d!==u&&(d===t?S=(i-o)/b+(i<o?6:0):d===i?S=(o-t)/b+2:d===o&&(S=(t-i)/b+4),S/=6),a.hasOwnProperty("_h")?(a._h=S,a._s=C,a._v=M):(a.h=S,a.s=C,a.v=M),a}},function(t,i){t.exports=function IntegerToRGB(t){return t>16777215?{a:t>>>24,r:t>>16&255,g:t>>8&255,b:255&t}:{a:255,r:t>>16&255,g:t>>8&255,b:255&t}}},function(t,i,o){var a=o(38);t.exports=function ObjectToColor(t){return new a(t.r,t.g,t.b,t.a)}},function(t,i,o){var a=o(38);t.exports=function RGBStringToColor(t){var i=new a,o=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(t.toLowerCase());if(o){var u=parseInt(o[1],10),d=parseInt(o[2],10),b=parseInt(o[3],10),S=void 0!==o[4]?parseFloat(o[4]):1;i.setTo(u,d,b,255*S)}return i}},function(t,i,o){t.exports={Fade:o(761),Flash:o(762),Pan:o(763),Shake:o(796),RotateTo:o(797),Zoom:o(798)}},function(t,i,o){t.exports={In:o(764),Out:o(765),InOut:o(766)}},function(t,i,o){t.exports={In:o(767),Out:o(768),InOut:o(769)}},function(t,i,o){t.exports={In:o(770),Out:o(771),InOut:o(772)}},function(t,i,o){t.exports={In:o(773),Out:o(774),InOut:o(775)}},function(t,i,o){t.exports={In:o(776),Out:o(777),InOut:o(778)}},function(t,i,o){t.exports={In:o(779),Out:o(780),InOut:o(781)}},function(t,i,o){t.exports=o(782)},function(t,i,o){t.exports={In:o(783),Out:o(784),InOut:o(785)}},function(t,i,o){t.exports={In:o(786),Out:o(787),InOut:o(788)}},function(t,i,o){t.exports={In:o(789),Out:o(790),InOut:o(791)}},function(t,i,o){t.exports={In:o(792),Out:o(793),InOut:o(794)}},function(t,i,o){t.exports=o(795)},function(t,i,o){var a=o(0),u=o(33),d=o(347),b=o(2),S=o(6),C=o(7),M=o(193),P=o(1),R=o(197),O=o(187),B=new a({initialize:function Config(t){void 0===t&&(t={}),this.width=S(t,"width",1024),this.height=S(t,"height",768),this.zoom=S(t,"zoom",1),this.parent=S(t,"parent",void 0),this.scaleMode=S(t,"scaleMode",0),this.expandParent=S(t,"expandParent",!0),this.autoRound=S(t,"autoRound",!1),this.autoCenter=S(t,"autoCenter",0),this.resizeInterval=S(t,"resizeInterval",500),this.fullscreenTarget=S(t,"fullscreenTarget",null),this.minWidth=S(t,"minWidth",0),this.maxWidth=S(t,"maxWidth",0),this.minHeight=S(t,"minHeight",0),this.maxHeight=S(t,"maxHeight",0);var i=S(t,"scale",null);i&&(this.width=S(i,"width",this.width),this.height=S(i,"height",this.height),this.zoom=S(i,"zoom",this.zoom),this.parent=S(i,"parent",this.parent),this.scaleMode=S(i,"mode",this.scaleMode),this.expandParent=S(i,"expandParent",this.expandParent),this.autoRound=S(i,"autoRound",this.autoRound),this.autoCenter=S(i,"autoCenter",this.autoCenter),this.resizeInterval=S(i,"resizeInterval",this.resizeInterval),this.fullscreenTarget=S(i,"fullscreenTarget",this.fullscreenTarget),this.minWidth=S(i,"min.width",this.minWidth),this.maxWidth=S(i,"max.width",this.maxWidth),this.minHeight=S(i,"min.height",this.minHeight),this.maxHeight=S(i,"max.height",this.maxHeight)),this.renderType=S(t,"type",u.AUTO),this.canvas=S(t,"canvas",null),this.context=S(t,"context",null),this.canvasStyle=S(t,"canvasStyle",null),this.customEnvironment=S(t,"customEnvironment",!1),this.sceneConfig=S(t,"scene",null),this.seed=S(t,"seed",[(Date.now()*Math.random()).toString()]),M.RND=new M.RandomDataGenerator(this.seed),this.gameTitle=S(t,"title",""),this.gameURL=S(t,"url","https://phaser.io"),this.gameVersion=S(t,"version",""),this.autoFocus=S(t,"autoFocus",!0),this.domCreateContainer=S(t,"dom.createContainer",!1),this.domBehindCanvas=S(t,"dom.behindCanvas",!1),this.domPointerEvents=S(t,"dom.pointerEvents","none"),this.inputKeyboard=S(t,"input.keyboard",!0),this.inputKeyboardEventTarget=S(t,"input.keyboard.target",window),this.inputKeyboardCapture=S(t,"input.keyboard.capture",[]),this.inputMouse=S(t,"input.mouse",!0),this.inputMouseEventTarget=S(t,"input.mouse.target",null),this.inputMousePreventDefaultDown=S(t,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=S(t,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=S(t,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=S(t,"input.mouse.preventDefaultWheel",!0),this.inputTouch=S(t,"input.touch",d.input.touch),this.inputTouchEventTarget=S(t,"input.touch.target",null),this.inputTouchCapture=S(t,"input.touch.capture",!0),this.inputActivePointers=S(t,"input.activePointers",1),this.inputSmoothFactor=S(t,"input.smoothFactor",0),this.inputWindowEvents=S(t,"input.windowEvents",!0),this.inputGamepad=S(t,"input.gamepad",!1),this.inputGamepadEventTarget=S(t,"input.gamepad.target",window),this.disableContextMenu=S(t,"disableContextMenu",!1),this.audio=S(t,"audio",{}),this.hideBanner=!1===S(t,"banner",null),this.hidePhaser=S(t,"banner.hidePhaser",!1),this.bannerTextColor=S(t,"banner.text","#ffffff"),this.bannerBackgroundColor=S(t,"banner.background",["#ff0000","#ffff00","#00ff00","#00ffff","#000000"]),""===this.gameTitle&&this.hidePhaser&&(this.hideBanner=!0),this.fps=S(t,"fps",null);var o=S(t,"render",t);this.pipeline=S(o,"pipeline",null),this.antialias=S(o,"antialias",!0),this.antialiasGL=S(o,"antialiasGL",!0),this.mipmapFilter=S(o,"mipmapFilter","LINEAR"),this.desynchronized=S(o,"desynchronized",!1),this.roundPixels=S(o,"roundPixels",!1),this.pixelArt=S(o,"pixelArt",1!==this.zoom),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=S(o,"transparent",!1),this.clearBeforeRender=S(o,"clearBeforeRender",!0),this.preserveDrawingBuffer=S(o,"preserveDrawingBuffer",!1),this.premultipliedAlpha=S(o,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=S(o,"failIfMajorPerformanceCaveat",!1),this.powerPreference=S(o,"powerPreference","default"),this.batchSize=S(o,"batchSize",4096),this.maxTextures=S(o,"maxTextures",-1),this.maxLights=S(o,"maxLights",10);var a=S(t,"backgroundColor",0);this.backgroundColor=O(a),this.transparent&&(this.backgroundColor=O(0),this.backgroundColor.alpha=0),this.preBoot=S(t,"callbacks.preBoot",P),this.postBoot=S(t,"callbacks.postBoot",P),this.physics=S(t,"physics",{}),this.defaultPhysicsSystem=S(this.physics,"default",!1),this.loaderBaseURL=S(t,"loader.baseURL",""),this.loaderPath=S(t,"loader.path","");var B=d.os.android?6:32;this.loaderMaxParallelDownloads=S(t,"loader.maxParallelDownloads",B),this.loaderCrossOrigin=S(t,"loader.crossOrigin",void 0),this.loaderResponseType=S(t,"loader.responseType",""),this.loaderAsync=S(t,"loader.async",!0),this.loaderUser=S(t,"loader.user",""),this.loaderPassword=S(t,"loader.password",""),this.loaderTimeout=S(t,"loader.timeout",0),this.loaderWithCredentials=S(t,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var N=S(t,"plugins",null),Y=R.DefaultScene;N&&(Array.isArray(N)?this.defaultPlugins=N:C(N)&&(this.installGlobalPlugins=b(N,"global",[]),this.installScenePlugins=b(N,"scene",[]),Array.isArray(N.default)?Y=N.default:Array.isArray(N.defaultMerge)&&(Y=Y.concat(N.defaultMerge)))),this.defaultPlugins=Y;var G="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=S(t,"images.default",G+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=S(t,"images.missing",G+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=S(t,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=u.WEBGL:window.FORCE_CANVAS&&(this.renderType=u.CANVAS))}});t.exports=B},function(t,i,o){t.exports={os:o(105),browser:o(136),features:o(191),input:o(808),audio:o(809),video:o(810),fullscreen:o(811),canvasFeatures:o(348)}},function(t,i,o){var a=o(31),u={supportInverseAlpha:!1,supportNewBlendModes:!1};t.exports=function init(){return"function"!=typeof importScripts&&void 0!==document&&(u.supportNewBlendModes=function checkBlendMode(){var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",i="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",o=new Image;return o.onload=function(){var d=new Image;d.onload=function(){var t=a.create(d,6,1).getContext("2d");if(t.globalCompositeOperation="multiply",t.drawImage(o,0,0),t.drawImage(d,2,0),!t.getImageData(2,0,1,1))return!1;var i=t.getImageData(2,0,1,1).data;a.remove(d),u.supportNewBlendModes=255===i[0]&&0===i[1]&&0===i[2]},d.src=t+"/wCKxvRF"+i},o.src=t+"AP804Oa6"+i,!1}(),u.supportInverseAlpha=function checkInverseAlpha(){var t=a.create(this,2,1).getContext("2d");t.fillStyle="rgba(10, 20, 30, 0.5)",t.fillRect(0,0,1,1);var i=t.getImageData(0,0,1,1);if(null===i)return!1;t.putImageData(i,1,0);var o=t.getImageData(1,0,1,1);return o.data[0]===i.data[0]&&o.data[1]===i.data[1]&&o.data[2]===i.data[2]&&o.data[3]===i.data[3]}()),u}()},function(t,i){t.exports=function Between(t,i,o,a){return Math.atan2(a-i,o-t)}},function(t,i){t.exports=function BetweenPoints(t,i){return Math.atan2(i.y-t.y,i.x-t.x)}},function(t,i){t.exports=function Normalize(t){return(t%=2*Math.PI)>=0?t:t+2*Math.PI}},function(t,i){t.exports=function DistanceBetweenPoints(t,i){var o=t.x-i.x,a=t.y-i.y;return Math.sqrt(o*o+a*a)}},function(t,i){t.exports=function DistanceSquared(t,i,o,a){var u=t-o,d=i-a;return u*u+d*d}},function(t,i){t.exports=function GreaterThan(t,i,o){return void 0===o&&(o=1e-4),t>i-o}},function(t,i){t.exports=function LessThan(t,i,o){return void 0===o&&(o=1e-4),t<i+o}},function(t,i,o){var a=o(357);t.exports=function Bernstein(t,i){return a(t)/a(i)/a(t-i)}},function(t,i){t.exports=function Factorial(t){if(0===t)return 1;for(var i=t;--t;)i*=t;return i}},function(t,i){t.exports=function CubicBezierInterpolation(t,i,o,a,u){return function P0(t,i){var o=1-t;return o*o*o*i}(t,i)+function P1(t,i){var o=1-t;return 3*o*o*t*i}(t,o)+function P2(t,i){return 3*(1-t)*t*t*i}(t,a)+function P3(t,i){return t*t*t*i}(t,u)}},function(t,i){t.exports=function QuadraticBezierInterpolation(t,i,o,a){return function P0(t,i){var o=1-t;return o*o*i}(t,i)+function P1(t,i){return 2*(1-t)*t*i}(t,o)+function P2(t,i){return t*t*i}(t,a)}},function(t,i,o){var a=o(184);t.exports=function SmoothStepInterpolation(t,i,o){return i+(o-i)*a(t,0,1)}},function(t,i){t.exports=function GetPowerOfTwo(t){var i=Math.log(t)/.6931471805599453;return 1<<Math.ceil(i)}},function(t,i){t.exports=function Rotate(t,i){var o=t.x,a=t.y;return t.x=o*Math.cos(i)-a*Math.sin(i),t.y=o*Math.sin(i)+a*Math.cos(i),t}},function(t,i){t.exports=function RoundAwayFromZero(t){return t>0?Math.ceil(t):Math.floor(t)}},function(t,i,o){var a=new(o(0))({initialize:function Matrix3(t){this.val=new Float32Array(9),t?this.copy(t):this.identity()},clone:function clone(){return new a(this)},set:function set(t){return this.copy(t)},copy:function copy(t){var i=this.val,o=t.val;return i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i[4]=o[4],i[5]=o[5],i[6]=o[6],i[7]=o[7],i[8]=o[8],this},fromMat4:function fromMat4(t){var i=t.val,o=this.val;return o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[4],o[4]=i[5],o[5]=i[6],o[6]=i[8],o[7]=i[9],o[8]=i[10],this},fromArray:function fromArray(t){var i=this.val;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],this},identity:function identity(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},transpose:function transpose(){var t=this.val,i=t[1],o=t[2],a=t[5];return t[1]=t[3],t[2]=t[6],t[3]=i,t[5]=t[7],t[6]=o,t[7]=a,this},invert:function invert(){var t=this.val,i=t[0],o=t[1],a=t[2],u=t[3],d=t[4],b=t[5],S=t[6],C=t[7],M=t[8],P=M*d-b*C,R=-M*u+b*S,O=C*u-d*S,B=i*P+o*R+a*O;return B?(B=1/B,t[0]=P*B,t[1]=(-M*o+a*C)*B,t[2]=(b*o-a*d)*B,t[3]=R*B,t[4]=(M*i-a*S)*B,t[5]=(-b*i+a*u)*B,t[6]=O*B,t[7]=(-C*i+o*S)*B,t[8]=(d*i-o*u)*B,this):null},adjoint:function adjoint(){var t=this.val,i=t[0],o=t[1],a=t[2],u=t[3],d=t[4],b=t[5],S=t[6],C=t[7],M=t[8];return t[0]=d*M-b*C,t[1]=a*C-o*M,t[2]=o*b-a*d,t[3]=b*S-u*M,t[4]=i*M-a*S,t[5]=a*u-i*b,t[6]=u*C-d*S,t[7]=o*S-i*C,t[8]=i*d-o*u,this},determinant:function determinant(){var t=this.val,i=t[0],o=t[1],a=t[2],u=t[3],d=t[4],b=t[5],S=t[6],C=t[7],M=t[8];return i*(M*d-b*C)+o*(-M*u+b*S)+a*(C*u-d*S)},multiply:function multiply(t){var i=this.val,o=i[0],a=i[1],u=i[2],d=i[3],b=i[4],S=i[5],C=i[6],M=i[7],P=i[8],R=t.val,O=R[0],B=R[1],N=R[2],Y=R[3],G=R[4],X=R[5],U=R[6],z=R[7],V=R[8];return i[0]=O*o+B*d+N*C,i[1]=O*a+B*b+N*M,i[2]=O*u+B*S+N*P,i[3]=Y*o+G*d+X*C,i[4]=Y*a+G*b+X*M,i[5]=Y*u+G*S+X*P,i[6]=U*o+z*d+V*C,i[7]=U*a+z*b+V*M,i[8]=U*u+z*S+V*P,this},translate:function translate(t){var i=this.val,o=t.x,a=t.y;return i[6]=o*i[0]+a*i[3]+i[6],i[7]=o*i[1]+a*i[4]+i[7],i[8]=o*i[2]+a*i[5]+i[8],this},rotate:function rotate(t){var i=this.val,o=i[0],a=i[1],u=i[2],d=i[3],b=i[4],S=i[5],C=Math.sin(t),M=Math.cos(t);return i[0]=M*o+C*d,i[1]=M*a+C*b,i[2]=M*u+C*S,i[3]=M*d-C*o,i[4]=M*b-C*a,i[5]=M*S-C*u,this},scale:function scale(t){var i=this.val,o=t.x,a=t.y;return i[0]=o*i[0],i[1]=o*i[1],i[2]=o*i[2],i[3]=a*i[3],i[4]=a*i[4],i[5]=a*i[5],this},fromQuat:function fromQuat(t){var i=t.x,o=t.y,a=t.z,u=t.w,d=i+i,b=o+o,S=a+a,C=i*d,M=i*b,P=i*S,R=o*b,O=o*S,B=a*S,N=u*d,Y=u*b,G=u*S,X=this.val;return X[0]=1-(R+B),X[3]=M+G,X[6]=P-Y,X[1]=M-G,X[4]=1-(C+B),X[7]=O+N,X[2]=P+Y,X[5]=O-N,X[8]=1-(C+R),this},normalFromMat4:function normalFromMat4(t){var i=t.val,o=this.val,a=i[0],u=i[1],d=i[2],b=i[3],S=i[4],C=i[5],M=i[6],P=i[7],R=i[8],O=i[9],B=i[10],N=i[11],Y=i[12],G=i[13],X=i[14],U=i[15],z=a*C-u*S,V=a*M-d*S,W=a*P-b*S,H=u*M-d*C,j=u*P-b*C,q=d*P-b*M,Z=R*G-O*Y,K=R*X-B*Y,$=R*U-N*Y,tt=O*X-B*G,et=O*U-N*G,it=B*U-N*X,nt=z*it-V*et+W*tt+H*$-j*K+q*Z;return nt?(nt=1/nt,o[0]=(C*it-M*et+P*tt)*nt,o[1]=(M*$-S*it-P*K)*nt,o[2]=(S*et-C*$+P*Z)*nt,o[3]=(d*et-u*it-b*tt)*nt,o[4]=(a*it-d*$+b*K)*nt,o[5]=(u*$-a*et-b*Z)*nt,o[6]=(G*q-X*j+U*H)*nt,o[7]=(X*W-Y*q-U*V)*nt,o[8]=(Y*j-G*W+U*z)*nt,this):null}});t.exports=a},function(t,i,o){var a=o(0),u=o(364),d=o(1),b=o(39),S=1e-6,C=new Int8Array([1,2,0]),M=new Float32Array([0,0,0]),P=new b(1,0,0),R=new b(0,1,0),O=new b,B=new u,N=new a({initialize:function Quaternion(t,i,o,a){this.onChangeCallback=d,this.set(t,i,o,a)},x:{get:function get(){return this._x},set:function set(t){this._x=t,this.onChangeCallback(this)}},y:{get:function get(){return this._y},set:function set(t){this._y=t,this.onChangeCallback(this)}},z:{get:function get(){return this._z},set:function set(t){this._z=t,this.onChangeCallback(this)}},w:{get:function get(){return this._w},set:function set(t){this._w=t,this.onChangeCallback(this)}},copy:function copy(t){return this.set(t)},set:function set(t,i,o,a,u){return void 0===u&&(u=!0),"object"===_typeof(t)?(this._x=t.x||0,this._y=t.y||0,this._z=t.z||0,this._w=t.w||0):(this._x=t||0,this._y=i||0,this._z=o||0,this._w=a||0),u&&this.onChangeCallback(this),this},add:function add(t){return this._x+=t.x,this._y+=t.y,this._z+=t.z,this._w+=t.w,this.onChangeCallback(this),this},subtract:function subtract(t){return this._x-=t.x,this._y-=t.y,this._z-=t.z,this._w-=t.w,this.onChangeCallback(this),this},scale:function scale(t){return this._x*=t,this._y*=t,this._z*=t,this._w*=t,this.onChangeCallback(this),this},length:function length(){var t=this.x,i=this.y,o=this.z,a=this.w;return Math.sqrt(t*t+i*i+o*o+a*a)},lengthSq:function lengthSq(){var t=this.x,i=this.y,o=this.z,a=this.w;return t*t+i*i+o*o+a*a},normalize:function normalize(){var t=this.x,i=this.y,o=this.z,a=this.w,u=t*t+i*i+o*o+a*a;return u>0&&(u=1/Math.sqrt(u),this._x=t*u,this._y=i*u,this._z=o*u,this._w=a*u),this.onChangeCallback(this),this},dot:function dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function lerp(t,i){void 0===i&&(i=0);var o=this.x,a=this.y,u=this.z,d=this.w;return this.set(o+i*(t.x-o),a+i*(t.y-a),u+i*(t.z-u),d+i*(t.w-d))},rotationTo:function rotationTo(t,i){var o=t.x*i.x+t.y*i.y+t.z*i.z;return o<-.999999?(O.copy(P).cross(t).length()<S&&O.copy(R).cross(t),O.normalize(),this.setAxisAngle(O,Math.PI)):o>.999999?this.set(0,0,0,1):(O.copy(t).cross(i),this._x=O.x,this._y=O.y,this._z=O.z,this._w=1+o,this.normalize())},setAxes:function setAxes(t,i,o){var a=B.val;return a[0]=i.x,a[3]=i.y,a[6]=i.z,a[1]=o.x,a[4]=o.y,a[7]=o.z,a[2]=-t.x,a[5]=-t.y,a[8]=-t.z,this.fromMat3(B).normalize()},identity:function identity(){return this.set(0,0,0,1)},setAxisAngle:function setAxisAngle(t,i){i*=.5;var o=Math.sin(i);return this.set(o*t.x,o*t.y,o*t.z,Math.cos(i))},multiply:function multiply(t){var i=this.x,o=this.y,a=this.z,u=this.w,d=t.x,b=t.y,S=t.z,C=t.w;return this.set(i*C+u*d+o*S-a*b,o*C+u*b+a*d-i*S,a*C+u*S+i*b-o*d,u*C-i*d-o*b-a*S)},slerp:function slerp(t,i){var o=this.x,a=this.y,u=this.z,d=this.w,b=t.x,C=t.y,M=t.z,P=t.w,R=o*b+a*C+u*M+d*P;R<0&&(R=-R,b=-b,C=-C,M=-M,P=-P);var O=1-i,B=i;if(1-R>S){var N=Math.acos(R),Y=Math.sin(N);O=Math.sin((1-i)*N)/Y,B=Math.sin(i*N)/Y}return this.set(O*o+B*b,O*a+B*C,O*u+B*M,O*d+B*P)},invert:function invert(){var t=this.x,i=this.y,o=this.z,a=this.w,u=t*t+i*i+o*o+a*a,d=u?1/u:0;return this.set(-t*d,-i*d,-o*d,a*d)},conjugate:function conjugate(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function rotateX(t){t*=.5;var i=this.x,o=this.y,a=this.z,u=this.w,d=Math.sin(t),b=Math.cos(t);return this.set(i*b+u*d,o*b+a*d,a*b-o*d,u*b-i*d)},rotateY:function rotateY(t){t*=.5;var i=this.x,o=this.y,a=this.z,u=this.w,d=Math.sin(t),b=Math.cos(t);return this.set(i*b-a*d,o*b+u*d,a*b+i*d,u*b-o*d)},rotateZ:function rotateZ(t){t*=.5;var i=this.x,o=this.y,a=this.z,u=this.w,d=Math.sin(t),b=Math.cos(t);return this.set(i*b+o*d,o*b-i*d,a*b+u*d,u*b-a*d)},calculateW:function calculateW(){var t=this.x,i=this.y,o=this.z;return this.w=-Math.sqrt(1-t*t-i*i-o*o),this},setFromEuler:function setFromEuler(t,i){var o=t.x/2,a=t.y/2,u=t.z/2,d=Math.cos(o),b=Math.cos(a),S=Math.cos(u),C=Math.sin(o),M=Math.sin(a),P=Math.sin(u);switch(t.order){case"XYZ":this.set(C*b*S+d*M*P,d*M*S-C*b*P,d*b*P+C*M*S,d*b*S-C*M*P,i);break;case"YXZ":this.set(C*b*S+d*M*P,d*M*S-C*b*P,d*b*P-C*M*S,d*b*S+C*M*P,i);break;case"ZXY":this.set(C*b*S-d*M*P,d*M*S+C*b*P,d*b*P+C*M*S,d*b*S-C*M*P,i);break;case"ZYX":this.set(C*b*S-d*M*P,d*M*S+C*b*P,d*b*P-C*M*S,d*b*S+C*M*P,i);break;case"YZX":this.set(C*b*S+d*M*P,d*M*S+C*b*P,d*b*P-C*M*S,d*b*S-C*M*P,i);break;case"XZY":this.set(C*b*S-d*M*P,d*M*S-C*b*P,d*b*P+C*M*S,d*b*S+C*M*P,i)}return this},setFromRotationMatrix:function setFromRotationMatrix(t){var i,o=t.val,a=o[0],u=o[4],d=o[8],b=o[1],S=o[5],C=o[9],M=o[2],P=o[6],R=o[10],O=a+S+R;return O>0?(i=.5/Math.sqrt(O+1),this.set((P-C)*i,(d-M)*i,(b-u)*i,.25/i)):a>S&&a>R?(i=2*Math.sqrt(1+a-S-R),this.set(.25*i,(u+b)/i,(d+M)/i,(P-C)/i)):S>R?(i=2*Math.sqrt(1+S-a-R),this.set((u+b)/i,.25*i,(C+P)/i,(d-M)/i)):(i=2*Math.sqrt(1+R-a-S),this.set((d+M)/i,(C+P)/i,.25*i,(b-u)/i)),this},fromMat3:function fromMat3(t){var i,o=t.val,a=o[0]+o[4]+o[8];if(a>0)i=Math.sqrt(a+1),this.w=.5*i,i=.5/i,this._x=(o[7]-o[5])*i,this._y=(o[2]-o[6])*i,this._z=(o[3]-o[1])*i;else{var u=0;o[4]>o[0]&&(u=1),o[8]>o[3*u+u]&&(u=2);var d=C[u],b=C[d];i=Math.sqrt(o[3*u+u]-o[3*d+d]-o[3*b+b]+1),M[u]=.5*i,i=.5/i,M[d]=(o[3*d+u]+o[3*u+d])*i,M[b]=(o[3*b+u]+o[3*u+b])*i,this._x=M[0],this._y=M[1],this._z=M[2],this._w=(o[3*b+d]-o[3*d+b])*i}return this.onChangeCallback(this),this}});t.exports=N},function(t,i,o){var a=o(367),u=o(31),d=o(33),b=o(191);t.exports=function CreateRenderer(t){var i=t.config;if((i.customEnvironment||i.canvas)&&i.renderType===d.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!i.customEnvironment&&!i.canvas&&i.renderType!==d.HEADLESS)if(i.renderType===d.CANVAS||i.renderType!==d.CANVAS&&!b.webGL){if(!b.canvas)throw new Error("Cannot create Canvas or WebGL context, aborting.");i.renderType=d.CANVAS}else i.renderType=d.WEBGL;i.antialias||u.disableSmoothing();var S,C,M=t.scale.baseSize,P=M.width,R=M.height;i.canvas?(t.canvas=i.canvas,t.canvas.width=P,t.canvas.height=R):t.canvas=u.create(t,P,R,i.renderType),i.canvasStyle&&(t.canvas.style=i.canvasStyle),i.antialias||a.setCrisp(t.canvas),i.renderType!==d.HEADLESS&&(S=o(368),C=o(371),i.renderType===d.WEBGL?t.renderer=new C(t):(t.renderer=new S(t),t.context=t.renderer.gameContext))}},function(t,i){t.exports={setCrisp:function setCrisp(t){return["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"].forEach((function(i){t.style["image-rendering"]=i})),t.style.msInterpolationMode="nearest-neighbor",t},setBicubic:function setBicubic(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}}},function(t,i,o){var a=o(37),u=o(369),d=o(0),b=o(33),S=o(9),C=o(91),M=o(370),P=o(104),R=o(106),O=o(25),B=new d({Extends:S,initialize:function CanvasRenderer(t){S.call(this);var i=t.config;this.config={clearBeforeRender:i.clearBeforeRender,backgroundColor:i.backgroundColor,antialias:i.antialias,roundPixels:i.roundPixels},this.game=t,this.type=b.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=t.canvas;var o={alpha:t.config.transparent,desynchronized:t.config.desynchronized};this.gameContext=i.context?i.context:this.gameCanvas.getContext("2d",o),this.currentContext=this.gameContext,this.antialias=t.config.antialias,this.blendModes=M(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new O,this._tempMatrix2=new O,this._tempMatrix3=new O,this.isBooted=!1,this.init()},init:function init(){this.game.textures.once(R.READY,this.boot,this)},boot:function boot(){var t=this.game,i=t.scale.baseSize;this.width=i.width,this.height=i.height,this.isBooted=!0,t.scale.on(P.RESIZE,this.onResize,this),this.resize(i.width,i.height)},onResize:function onResize(t,i){i.width===this.width&&i.height===this.height||this.resize(i.width,i.height)},resize:function resize(t,i){this.width=t,this.height=i,this.emit(C.RESIZE,t,i)},resetTransform:function resetTransform(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function setBlendMode(t){return this.currentContext.globalCompositeOperation=t,this},setContext:function setContext(t){return this.currentContext=t||this.gameContext,this},setAlpha:function setAlpha(t){return this.currentContext.globalAlpha=t,this},preRender:function preRender(){var t=this.gameContext,i=this.config,o=this.width,a=this.height;t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),i.clearBeforeRender&&(t.clearRect(0,0,o,a),i.transparent||(t.fillStyle=i.backgroundColor.rgba,t.fillRect(0,0,o,a))),t.save(),this.drawCount=0,this.emit(C.PRE_RENDER)},render:function render(t,i,o){var u=i.length;this.emit(C.RENDER,t,o);var d=o.x,b=o.y,S=o.width,M=o.height,P=o.renderToTexture?o.context:t.sys.context;P.save(),this.game.scene.customViewports&&(P.beginPath(),P.rect(d,b,S,M),P.clip()),this.currentContext=P;var R=o.mask;R&&R.preRenderCanvas(this,null,o._maskCamera),o.transparent||(P.fillStyle=o.backgroundColor.rgba,P.fillRect(d,b,S,M)),P.globalAlpha=o.alpha,P.globalCompositeOperation="source-over",this.drawCount+=u,o.renderToTexture&&o.emit(a.PRE_RENDER,o),o.matrix.copyToContext(P);for(var O=0;O<u;O++){var B=i[O];B.mask&&B.mask.preRenderCanvas(this,B,o),B.renderCanvas(this,B,o),B.mask&&B.mask.postRenderCanvas(this,B,o)}P.setTransform(1,0,0,1,0,0),P.globalCompositeOperation="source-over",P.globalAlpha=1,o.flashEffect.postRenderCanvas(P),o.fadeEffect.postRenderCanvas(P),o.dirty=!1,R&&R.postRenderCanvas(this),P.restore(),o.renderToTexture&&(o.emit(a.POST_RENDER,o),o.renderToGame&&t.sys.context.drawImage(o.canvas,d,b))},postRender:function postRender(){this.gameContext.restore(),this.emit(C.POST_RENDER);var t=this.snapshotState;t.callback&&(u(this.gameCanvas,t),t.callback=null)},snapshotCanvas:function snapshotCanvas(t,i,o,a,d,b,S,C,M){void 0===o&&(o=!1),this.snapshotArea(a,d,b,S,i,C,M);var P=this.snapshotState;return P.getPixel=o,u(this.canvas,P),P.callback=null,this},snapshot:function snapshot(t,i,o){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,t,i,o)},snapshotArea:function snapshotArea(t,i,o,a,u,d,b){var S=this.snapshotState;return S.callback=u,S.type=d,S.encoder=b,S.getPixel=!1,S.x=t,S.y=i,S.width=Math.min(o,this.gameCanvas.width),S.height=Math.min(a,this.gameCanvas.height),this},snapshotPixel:function snapshotPixel(t,i,o){return this.snapshotArea(t,i,1,1,o),this.snapshotState.getPixel=!0,this},batchSprite:function batchSprite(t,i,o,a){var u=o.alpha*t.alpha;if(0!==u){var d=this.currentContext,b=this._tempMatrix1,S=this._tempMatrix2,C=i.canvasData,M=C.x,P=C.y,R=i.cutWidth,O=i.cutHeight,B=i.customPivot,N=i.source.resolution,Y=t.displayOriginX,G=t.displayOriginY,X=-Y+i.x,U=-G+i.y;if(t.isCropped){var z=t._crop;z.flipX===t.flipX&&z.flipY===t.flipY||i.updateCropUVs(z,t.flipX,t.flipY),R=z.cw,O=z.ch,M=z.cx,P=z.cy,X=-Y+z.x,U=-G+z.y,t.flipX&&(X>=0?X=-(X+R):X<0&&(X=Math.abs(X)-R)),t.flipY&&(U>=0?U=-(U+O):U<0&&(U=Math.abs(U)-O))}var V=1,W=1;t.flipX&&(B||(X+=-i.realWidth+2*Y),V=-1),t.flipY&&(B||(U+=-i.realHeight+2*G),W=-1),S.applyITRS(t.x,t.y,t.rotation,t.scaleX*V,t.scaleY*W),b.copyFrom(o.matrix),a?(b.multiplyWithOffset(a,-o.scrollX*t.scrollFactorX,-o.scrollY*t.scrollFactorY),S.e=t.x,S.f=t.y):(S.e-=o.scrollX*t.scrollFactorX,S.f-=o.scrollY*t.scrollFactorY),b.multiply(S),d.save(),b.setToContext(d),d.globalCompositeOperation=this.blendModes[t.blendMode],d.globalAlpha=u,d.imageSmoothingEnabled=!(!this.antialias||i.source.scaleMode),t.mask&&t.mask.preRenderCanvas(this,t,o),d.drawImage(i.source.image,M,P,R,O,X,U,R/N,O/N),t.mask&&t.mask.postRenderCanvas(this,t,o),d.restore()}},destroy:function destroy(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});t.exports=B},function(t,i,o){var a=o(31),u=o(38),d=o(2);t.exports=function CanvasSnapshot(t,i){var o=d(i,"callback"),b=d(i,"type","image/png"),S=d(i,"encoder",.92),C=Math.abs(Math.round(d(i,"x",0))),M=Math.abs(Math.round(d(i,"y",0))),P=d(i,"width",t.width),R=d(i,"height",t.height);if(d(i,"getPixel",!1)){var O=t.getContext("2d").getImageData(C,M,1,1).data;o.call(null,new u(O[0],O[1],O[2],O[3]/255))}else if(0!==C||0!==M||P!==t.width||R!==t.height){var B=a.createWebGL(this,P,R);B.getContext("2d").drawImage(t,C,M,P,R,0,0,P,R);var N=new Image;N.onerror=function(){o.call(null),a.remove(B)},N.onload=function(){o.call(null,N),a.remove(B)},N.src=B.toDataURL(b,S)}else{var Y=new Image;Y.onerror=function(){o.call(null)},Y.onload=function(){o.call(null,Y)},Y.src=t.toDataURL(b,S)}}},function(t,i,o){var a=o(35),u=o(348);t.exports=function GetBlendModes(){var t=[],i=u.supportNewBlendModes,o="source-over";return t[a.NORMAL]=o,t[a.ADD]="lighter",t[a.MULTIPLY]=i?"multiply":o,t[a.SCREEN]=i?"screen":o,t[a.OVERLAY]=i?"overlay":o,t[a.DARKEN]=i?"darken":o,t[a.LIGHTEN]=i?"lighten":o,t[a.COLOR_DODGE]=i?"color-dodge":o,t[a.COLOR_BURN]=i?"color-burn":o,t[a.HARD_LIGHT]=i?"hard-light":o,t[a.SOFT_LIGHT]=i?"soft-light":o,t[a.DIFFERENCE]=i?"difference":o,t[a.EXCLUSION]=i?"exclusion":o,t[a.HUE]=i?"hue":o,t[a.SATURATION]=i?"saturation":o,t[a.COLOR]=i?"color":o,t[a.LUMINOSITY]=i?"luminosity":o,t[a.ERASE]="destination-out",t[a.SOURCE_IN]="source-in",t[a.SOURCE_OUT]="source-out",t[a.SOURCE_ATOP]="source-atop",t[a.DESTINATION_OVER]="destination-over",t[a.DESTINATION_IN]="destination-in",t[a.DESTINATION_OUT]="destination-out",t[a.DESTINATION_ATOP]="destination-atop",t[a.LIGHTER]="lighter",t[a.COPY]="copy",t[a.XOR]="xor",t}},function(t,i,o){var a=o(93),u=o(37),d=o(0),b=o(33),S=o(9),C=o(91),M=o(22),P=o(138),R=o(69),O=o(1),B=o(372),N=o(141),Y=o(104),G=o(106),X=o(12),U=o(383),z=new d({Extends:S,initialize:function WebGLRenderer(t){S.call(this);var i=t.config,o={alpha:i.transparent,desynchronized:i.desynchronized,depth:!1,antialias:i.antialiasGL,premultipliedAlpha:i.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:i.failIfMajorPerformanceCaveat,powerPreference:i.powerPreference,preserveDrawingBuffer:i.preserveDrawingBuffer};this.config={clearBeforeRender:i.clearBeforeRender,antialias:i.antialias,backgroundColor:i.backgroundColor,contextCreation:o,roundPixels:i.roundPixels,maxTextures:i.maxTextures,maxTextureSize:i.maxTextureSize,batchSize:i.batchSize,maxLights:i.maxLights,mipmapFilter:i.mipmapFilter},this.game=t,this.type=b.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=t.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=O,this.contextRestoredHandler=O,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function init(t){var i,o=this.game,a=this.canvas,u=t.backgroundColor;if(!(i=o.config.context?o.config.context:a.getContext("webgl",t.contextCreation)||a.getContext("experimental-webgl",t.contextCreation))||i.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=i;var d=this;this.contextLostHandler=function(t){d.contextLost=!0,d.game.events.emit(M.CONTEXT_LOST,d),t.preventDefault()},this.contextRestoredHandler=function(){d.contextLost=!1,d.init(d.config),d.game.events.emit(M.CONTEXT_RESTORED,d)},a.addEventListener("webglcontextlost",this.contextLostHandler,!1),a.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),o.context=i;for(var S=0;S<=27;S++)this.blendModes.push({func:[i.ONE,i.ONE_MINUS_SRC_ALPHA],equation:i.FUNC_ADD});this.blendModes[1].func=[i.ONE,i.DST_ALPHA],this.blendModes[2].func=[i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[i.ONE,i.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[i.ZERO,i.ONE_MINUS_SRC_ALPHA],equation:i.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=i.BYTE,this.glFormats[1]=i.SHORT,this.glFormats[2]=i.UNSIGNED_BYTE,this.glFormats[3]=i.UNSIGNED_SHORT,this.glFormats[4]=i.FLOAT,this.glFuncMap={mat2:{func:i.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:i.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:i.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:i.uniform1f,length:1},"1fv":{func:i.uniform1fv,length:1},"1i":{func:i.uniform1i,length:1},"1iv":{func:i.uniform1iv,length:1},"2f":{func:i.uniform2f,length:2},"2fv":{func:i.uniform2fv,length:1},"2i":{func:i.uniform2i,length:2},"2iv":{func:i.uniform2iv,length:1},"3f":{func:i.uniform3f,length:3},"3fv":{func:i.uniform3fv,length:1},"3i":{func:i.uniform3i,length:3},"3iv":{func:i.uniform3iv,length:1},"4f":{func:i.uniform4f,length:4},"4fv":{func:i.uniform4fv,length:1},"4i":{func:i.uniform4i,length:4},"4iv":{func:i.uniform4iv,length:1}};var C=i.getSupportedExtensions();t.maxTextures&&-1!==t.maxTextures||(t.maxTextures=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS)),t.maxTextureSize||(t.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE));var P="WEBGL_compressed_texture_",O="WEBKIT_"+P;this.compression.ETC1=i.getExtension(P+"etc1")||i.getExtension(O+"etc1"),this.compression.PVRTC=i.getExtension(P+"pvrtc")||i.getExtension(O+"pvrtc"),this.compression.S3TC=i.getExtension(P+"s3tc")||i.getExtension(O+"s3tc"),this.supportedExtensions=C;var N="ANGLE_instanced_arrays";this.instancedArraysExtension=C.indexOf(N)>-1?i.getExtension(N):null;var Y="OES_vertex_array_object";this.vaoExtension=C.indexOf(Y)>-1?i.getExtension(Y):null,i.disable(i.DEPTH_TEST),i.disable(i.CULL_FACE),i.enable(i.BLEND),i.clearColor(u.redGL,u.greenGL,u.blueGL,u.alphaGL),this.mipmapFilter=i[t.mipmapFilter],this.maxTextures=X.checkShaderMax(i,t.maxTextures),this.textureIndexes=[];var U=this.tempTextures;if(Array.isArray(U))for(var z=0;S<this.maxTextures;z++)i.deleteTexture(U[z]);else U=new Array(this.maxTextures);for(var V=0;V<this.maxTextures;V++){var W=i.createTexture();i.activeTexture(i.TEXTURE0+V),i.bindTexture(i.TEXTURE_2D,W),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),U[V]=W,this.textureIndexes.push(V)}return this.tempTextures=U,this.currentActiveTexture=1,this.startActiveTexture++,i.activeTexture(i.TEXTURE1),this.pipelines=new B(this),this.setBlendMode(b.BlendModes.NORMAL),this.projectionMatrix=(new R).identity(),o.textures.once(G.READY,this.boot,this),this},boot:function boot(){var t=this.game,i=this.pipelines,o=t.scale.baseSize;this.width=o.width,this.height=o.height,this.isBooted=!0,this.renderTarget=new N(this,this.width,this.height,1,0,!0,!0),i.boot(t.config.pipeline),this.blankTexture=t.textures.getFrame("__DEFAULT"),this.whiteTexture=t.textures.getFrame("__WHITE");var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,null),a.enable(a.SCISSOR_TEST),t.scale.on(Y.RESIZE,this.onResize,this),this.resize(o.width,o.height)},onResize:function onResize(t,i){i.width===this.width&&i.height===this.height||this.resize(i.width,i.height)},beginCapture:function beginCapture(t,i){void 0===t&&(t=this.width),void 0===i&&(i=this.height),this.renderTarget.bind(!0,t,i),this.setProjectionMatrix(t,i),this.resetTextures()},endCapture:function endCapture(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function resize(t,i){var o=this.gl;return this.width=t,this.height=i,this.setProjectionMatrix(t,i),o.viewport(0,0,t,i),this.drawingBufferHeight=o.drawingBufferHeight,o.scissor(0,o.drawingBufferHeight-i,t,i),this.defaultScissor[2]=t,this.defaultScissor[3]=i,this.emit(C.RESIZE,t,i),this},getAspectRatio:function getAspectRatio(){return this.width/this.height},setProjectionMatrix:function setProjectionMatrix(t,i){return t===this.projectionWidth&&i===this.projectionHeight||(this.projectionWidth=t,this.projectionHeight=i,this.projectionMatrix.ortho(0,t,i,0,-1e3,1e3)),this},resetProjectionMatrix:function resetProjectionMatrix(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function hasExtension(t){return!!this.supportedExtensions&&this.supportedExtensions.indexOf(t)},getExtension:function getExtension(t){return this.hasExtension(t)?(t in this.extensions||(this.extensions[t]=this.gl.getExtension(t)),this.extensions[t]):null},flush:function flush(){this.pipelines.flush()},pushScissor:function pushScissor(t,i,o,a,u){void 0===u&&(u=this.drawingBufferHeight);var d=[t,i,o,a];return this.scissorStack.push(d),this.setScissor(t,i,o,a,u),this.currentScissor=d,d},setScissor:function setScissor(t,i,o,a,u){void 0===u&&(u=this.drawingBufferHeight);var d=this.gl,b=this.currentScissor,setScissor=o>0&&a>0;if(b&&setScissor){var S=b[0],C=b[1],M=b[2],P=b[3];setScissor=S!==t||C!==i||M!==o||P!==a}setScissor&&(this.flush(),d.scissor(t,u-i-a,o,a))},resetScissor:function resetScissor(){var t=this.gl;t.enable(t.SCISSOR_TEST);var i=this.currentScissor;if(i){var o=i[0],a=i[1],u=i[2],d=i[3];u>0&&d>0&&t.scissor(o,this.drawingBufferHeight-a-d,u,d)}},popScissor:function popScissor(){var t=this.scissorStack;t.pop();var i=t[t.length-1];i&&this.setScissor(i[0],i[1],i[2],i[3]),this.currentScissor=i},hasActiveStencilMask:function hasActiveStencilMask(){var t=this.currentMask.mask,i=this.currentCameraMask.mask;return t&&t.isStencil||i&&i.isStencil},resetViewport:function resetViewport(){var t=this.gl;t.viewport(0,0,this.width,this.height),this.drawingBufferHeight=t.drawingBufferHeight},setBlendMode:function setBlendMode(t,i){void 0===i&&(i=!1);var o=this.gl,a=this.blendModes[t];return!!(i||t!==b.BlendModes.SKIP_CHECK&&this.currentBlendMode!==t)&&(this.flush(),o.enable(o.BLEND),o.blendEquation(a.equation),a.func.length>2?o.blendFuncSeparate(a.func[0],a.func[1],a.func[2],a.func[3]):o.blendFunc(a.func[0],a.func[1]),this.currentBlendMode=t,!0)},addBlendMode:function addBlendMode(t,i){return this.blendModes.push({func:t,equation:i})-1},updateBlendMode:function updateBlendMode(t,i,o){return this.blendModes[t]&&(this.blendModes[t].func=i,o&&(this.blendModes[t].equation=o)),this},removeBlendMode:function removeBlendMode(t){return t>17&&this.blendModes[t]&&this.blendModes.splice(t,1),this},setBlankTexture:function setBlankTexture(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function setTextureSource(t){if(this.pipelines.forceZero())return this.setTextureZero(t.glTexture,!0),0;var i=this.gl,o=this.currentActiveTexture;return t.glIndexCounter<this.startActiveTexture&&(t.glIndexCounter=this.startActiveTexture,o<this.maxTextures?(t.glIndex=o,i.activeTexture(i.TEXTURE0+o),i.bindTexture(i.TEXTURE_2D,t.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,t.glIndexCounter=this.startActiveTexture,t.glIndex=1,i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,t.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,t.glIndex},isNewNormalMap:function isNewNormalMap(t,i){return this.textureZero!==t||this.normalTexture!==i},setTextureZero:function setTextureZero(t,i){if(this.textureZero!==t){i&&this.flush();var o=this.gl;o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,t),this.textureZero=t}},clearTextureZero:function clearTextureZero(){this.textureZero=null},setNormalMap:function setNormalMap(t){if(this.normalTexture!==t){var i=this.gl;i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,t),this.normalTexture=t,1===this.currentActiveTexture&&(this.currentActiveTexture=2)}},clearNormalMap:function clearNormalMap(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function unbindTextures(){for(var t=this.gl,i=this.tempTextures,o=0;o<i.length;o++)t.activeTexture(t.TEXTURE0+o),t.bindTexture(t.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function resetTextures(t){if(void 0===t&&(t=!1),!this.isTextureClean){this.flush();var i=this.gl,o=this.tempTextures;if(t){for(var a=0;a<o.length;a++)i.activeTexture(i.TEXTURE0+a),i.bindTexture(i.TEXTURE_2D,o[a]);i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,o[1]),this.isTextureClean=!0}else i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o[0]),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,o[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function setTexture2D(t){if(this.pipelines.forceZero())return this.setTextureZero(t,!0),0;var i=this.gl,o=this.currentActiveTexture;return t.glIndexCounter<this.startActiveTexture&&(t.glIndexCounter=this.startActiveTexture,o<this.maxTextures?(t.glIndex=o,i.activeTexture(i.TEXTURE0+o),i.bindTexture(i.TEXTURE_2D,t),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,t.glIndexCounter=this.startActiveTexture,t.glIndex=1,i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,t),this.currentActiveTexture=2)),this.isTextureClean=!1,t.glIndex},pushFramebuffer:function pushFramebuffer(t,i,o,a){return t===this.currentFramebuffer?this:(this.fboStack.push(t),this.setFramebuffer(t,i,o,a))},setFramebuffer:function setFramebuffer(t,i,o,a){if(void 0===i&&(i=!1),void 0===o&&(o=!1),void 0===a&&(a=!0),t===this.currentFramebuffer)return this;var u=this.gl,d=this.width,b=this.height;return t&&t.renderTexture&&a?(d=t.renderTexture.width,b=t.renderTexture.height):this.flush(),u.bindFramebuffer(u.FRAMEBUFFER,t),a&&u.viewport(0,0,d,b),i&&(t?(this.drawingBufferHeight=b,this.pushScissor(0,0,d,b)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=t,o&&this.resetTextures(),this},popFramebuffer:function popFramebuffer(t,i,o){void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===o&&(o=!0);var a=this.fboStack;a.pop();var u=a[a.length-1];return u||(u=null),this.setFramebuffer(u,t,i,o),u},setProgram:function setProgram(t){return t!==this.currentProgram&&(this.flush(),this.gl.useProgram(t),this.currentProgram=t,!0)},resetProgram:function resetProgram(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function createTextureFromSource(t,i,o,a){var u=this.gl,d=u.NEAREST,S=u.NEAREST,C=u.CLAMP_TO_EDGE;i=t?t.width:i,o=t?t.height:o;var M=P(i,o);return M&&(C=u.REPEAT),a===b.ScaleModes.LINEAR&&this.config.antialias&&(d=M?this.mipmapFilter:u.LINEAR,S=u.LINEAR),t||"number"!=typeof i||"number"!=typeof o?this.createTexture2D(0,d,S,C,C,u.RGBA,t):this.createTexture2D(0,d,S,C,C,u.RGBA,null,i,o)},createTexture2D:function createTexture2D(t,i,o,a,u,d,b,S,C,M,R,O){M=null==M||M,void 0===R&&(R=!1),void 0===O&&(O=!1);var B=this.gl,N=B.createTexture();B.activeTexture(B.TEXTURE0);var Y=B.getParameter(B.TEXTURE_BINDING_2D);return B.bindTexture(B.TEXTURE_2D,N),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,i),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,o),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_S,u),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_T,a),B.pixelStorei(B.UNPACK_PREMULTIPLY_ALPHA_WEBGL,M),B.pixelStorei(B.UNPACK_FLIP_Y_WEBGL,O),null==b?B.texImage2D(B.TEXTURE_2D,t,d,S,C,0,d,B.UNSIGNED_BYTE,null):(R||(S=b.width,C=b.height),B.texImage2D(B.TEXTURE_2D,t,d,d,B.UNSIGNED_BYTE,b)),P(S,C)&&B.generateMipmap(B.TEXTURE_2D),Y&&B.bindTexture(B.TEXTURE_2D,Y),N.isAlphaPremultiplied=M,N.isRenderTexture=!1,N.width=S,N.height=C,N.glIndex=0,N.glIndexCounter=-1,N},createFramebuffer:function createFramebuffer(t,i,o,a){var u,d=this.gl,b=d.createFramebuffer();if(this.setFramebuffer(b),a){var S=d.createRenderbuffer();d.bindRenderbuffer(d.RENDERBUFFER,S),d.renderbufferStorage(d.RENDERBUFFER,d.DEPTH_STENCIL,t,i),d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,S)}if(o.isRenderTexture=!0,o.isAlphaPremultiplied=!1,d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,o,0),(u=d.checkFramebufferStatus(d.FRAMEBUFFER))!==d.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+{36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"}[u]);return b.renderTexture=o,this.setFramebuffer(null),this.resetTextures(),b},createProgram:function createProgram(t,i){var o=this.gl,a=o.createProgram(),u=o.createShader(o.VERTEX_SHADER),d=o.createShader(o.FRAGMENT_SHADER);if(o.shaderSource(u,t),o.shaderSource(d,i),o.compileShader(u),o.compileShader(d),!o.getShaderParameter(u,o.COMPILE_STATUS))throw new Error("Vertex Shader failed:\n"+o.getShaderInfoLog(u));if(!o.getShaderParameter(d,o.COMPILE_STATUS))throw new Error("Fragment Shader failed:\n"+o.getShaderInfoLog(d));if(o.attachShader(a,u),o.attachShader(a,d),o.linkProgram(a),!o.getProgramParameter(a,o.LINK_STATUS))throw new Error("Link Program failed:\n"+o.getProgramInfoLog(a));return o.useProgram(a),a},createVertexBuffer:function createVertexBuffer(t,i){var o=this.gl,a=o.createBuffer();return o.bindBuffer(o.ARRAY_BUFFER,a),o.bufferData(o.ARRAY_BUFFER,t,i),o.bindBuffer(o.ARRAY_BUFFER,null),a},createIndexBuffer:function createIndexBuffer(t,i){var o=this.gl,a=o.createBuffer();return o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,a),o.bufferData(o.ELEMENT_ARRAY_BUFFER,t,i),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,null),a},deleteTexture:function deleteTexture(t,i){return i&&this.resetTextures(!0),t&&this.gl.deleteTexture(t),this},deleteFramebuffer:function deleteFramebuffer(t){return t&&(this.gl.deleteFramebuffer(t),a(this.fboStack,t),this.currentFramebuffer===t&&(this.currentFramebuffer=null)),this},deleteProgram:function deleteProgram(t){return t&&this.gl.deleteProgram(t),this},deleteBuffer:function deleteBuffer(t){return this.gl.deleteBuffer(t),this},preRenderCamera:function preRenderCamera(t){var i=t.x,o=t.y,a=t.width,d=t.height,b=t.backgroundColor;t.emit(u.PRE_RENDER,t),this.pipelines.preBatchCamera(t),this.pushScissor(i,o,a,d),t.mask&&(this.currentCameraMask.mask=t.mask,this.currentCameraMask.camera=t._maskCamera,t.mask.preRenderWebGL(this,t,t._maskCamera)),b.alphaGL>0&&this.pipelines.setMulti().drawFillRect(i,o,a,d,X.getTintFromFloats(b.blueGL,b.greenGL,b.redGL,1),b.alphaGL)},getCurrentStencilMask:function getCurrentStencilMask(){var t=null,i=this.maskStack,o=this.currentCameraMask;return i.length>0?t=i[i.length-1]:o.mask&&o.mask.isStencil&&(t=o),t},postRenderCamera:function postRenderCamera(t){var i=t.flashEffect,o=t.fadeEffect;if(i.isRunning||o.isRunning||o.isComplete){var a=this.pipelines.setMulti();i.postRenderWebGL(a,X.getTintFromFloats),o.postRenderWebGL(a,X.getTintFromFloats)}t.dirty=!1,this.popScissor(),t.mask&&(this.currentCameraMask.mask=null,t.mask.postRenderWebGL(this,t._maskCamera)),this.pipelines.postBatchCamera(t),t.emit(u.POST_RENDER,t)},preRender:function preRender(){if(!this.contextLost){var t=this.gl;if(t.bindFramebuffer(t.FRAMEBUFFER,null),this.config.clearBeforeRender){var i=this.config.backgroundColor;t.clearColor(i.redGL,i.greenGL,i.blueGL,i.alphaGL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT)}t.enable(t.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&t.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(C.PRE_RENDER)}},render:function render(t,i,o){if(!this.contextLost){var a=i.length;if(this.emit(C.RENDER,t,o),this.preRenderCamera(o),0===a)return this.setBlendMode(b.BlendModes.NORMAL),void this.postRenderCamera(o);this.currentType="";for(var u=this.currentMask,d=0;d<a;d++){this.finalType=d===a-1;var S=i[d],M=S.mask;(u=this.currentMask).mask&&u.mask!==M&&u.mask.postRenderWebGL(this,u.camera),M&&u.mask!==M&&M.preRenderWebGL(this,S,o),S.blendMode!==this.currentBlendMode&&this.setBlendMode(S.blendMode);var P=S.type;P!==this.currentType&&(this.newType=!0,this.currentType=P),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=i[d+1].type===this.currentType,S.renderWebGL(this,S,o),this.newType=!1}(u=this.currentMask).mask&&u.mask.postRenderWebGL(this,u.camera),this.setBlendMode(b.BlendModes.NORMAL),this.postRenderCamera(o)}},postRender:function postRender(){if(!this.contextLost){this.flush(),this.emit(C.POST_RENDER);var t=this.snapshotState;t.callback&&(U(this.canvas,t),t.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function snapshot(t,i,o){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,t,i,o)},snapshotArea:function snapshotArea(t,i,o,a,u,d,b){var S=this.snapshotState;return S.callback=u,S.type=d,S.encoder=b,S.getPixel=!1,S.x=t,S.y=i,S.width=Math.min(o,this.gl.drawingBufferWidth),S.height=Math.min(a,this.gl.drawingBufferHeight),this},snapshotPixel:function snapshotPixel(t,i,o){return this.snapshotArea(t,i,1,1,o),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function snapshotFramebuffer(t,i,o,a,u,d,b,S,C,M,P){void 0===u&&(u=!1),void 0===d&&(d=0),void 0===b&&(b=0),void 0===S&&(S=i),void 0===C&&(C=o);var R=this.currentFramebuffer;this.snapshotArea(d,b,S,C,a,M,P);var O=this.snapshotState;return O.getPixel=u,O.isFramebuffer=!0,O.bufferWidth=i,O.bufferHeight=o,this.setFramebuffer(t),U(this.canvas,O),this.setFramebuffer(R),O.callback=null,O.isFramebuffer=!1,this},canvasToTexture:function canvasToTexture(t,i,o,a){return void 0===o&&(o=!1),void 0===a&&(a=!1),i?this.updateCanvasTexture(t,i,a):this.createCanvasTexture(t,o,a)},createCanvasTexture:function createCanvasTexture(t,i,o){void 0===i&&(i=!1),void 0===o&&(o=!1);var a=this.gl,u=a.NEAREST,d=a.NEAREST,b=t.width,S=t.height,C=a.CLAMP_TO_EDGE,M=P(b,S);return!i&&M&&(C=a.REPEAT),this.config.antialias&&(u=M?this.mipmapFilter:a.LINEAR,d=a.LINEAR),this.createTexture2D(0,u,d,C,C,a.RGBA,t,b,S,!0,!1,o)},updateCanvasTexture:function updateCanvasTexture(t,i,o){void 0===o&&(o=!1);var a=this.gl,u=t.width,d=t.height;if(u>0&&d>0){a.activeTexture(a.TEXTURE0);var b=a.getParameter(a.TEXTURE_BINDING_2D);a.bindTexture(a.TEXTURE_2D,i),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,o),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,t),i.width=u,i.height=d,b&&a.bindTexture(a.TEXTURE_2D,b)}return i},createVideoTexture:function createVideoTexture(t,i,o){void 0===i&&(i=!1),void 0===o&&(o=!1);var a=this.gl,u=a.NEAREST,d=a.NEAREST,b=t.videoWidth,S=t.videoHeight,C=a.CLAMP_TO_EDGE,M=P(b,S);return!i&&M&&(C=a.REPEAT),this.config.antialias&&(u=M?this.mipmapFilter:a.LINEAR,d=a.LINEAR),this.createTexture2D(0,u,d,C,C,a.RGBA,t,b,S,!0,!0,o)},updateVideoTexture:function updateVideoTexture(t,i,o){void 0===o&&(o=!1);var a=this.gl,u=t.videoWidth,d=t.videoHeight;if(u>0&&d>0){a.activeTexture(a.TEXTURE0);var b=a.getParameter(a.TEXTURE_BINDING_2D);a.bindTexture(a.TEXTURE_2D,i),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,o),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,t),i.width=u,i.height=d,b&&a.bindTexture(a.TEXTURE_2D,b)}return i},setTextureFilter:function setTextureFilter(t,i){var o=this.gl,a=[o.LINEAR,o.NEAREST][i];o.activeTexture(o.TEXTURE0);var u=o.getParameter(o.TEXTURE_BINDING_2D);return o.bindTexture(o.TEXTURE_2D,t),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,a),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,a),u&&o.bindTexture(o.TEXTURE_2D,u),this},getMaxTextureSize:function getMaxTextureSize(){return this.config.maxTextureSize},destroy:function destroy(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var t=this.gl,i=this.tempTextures,o=0;o<i.length;o++)t.deleteTexture(i[o]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});t.exports=z},function(t,i,o){var a=o(0),u=o(92),d=o(102),b=o(373),S=o(376),C=o(377),M=o(108),P=o(378),R=o(379),O=o(380),B=o(381),N=new a({initialize:function PipelineManager(t){this.game=t.game,this.renderer=t,this.classes=new d([[u.UTILITY_PIPELINE,B],[u.MULTI_PIPELINE,M],[u.BITMAPMASK_PIPELINE,b],[u.SINGLE_PIPELINE,O],[u.ROPE_PIPELINE,R],[u.LIGHT_PIPELINE,C],[u.POINTLIGHT_PIPELINE,P],[u.GRAPHICS_PIPELINE,S]]),this.postPipelineClasses=new d,this.pipelines=new d,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function boot(t){var i,o,a=this,d=this.game;if(this.classes.each((function(t,o){i=a.add(t,new o({game:d})),t===u.UTILITY_PIPELINE&&(a.UTILITY_PIPELINE=i,a.fullFrame1=i.fullFrame1,a.fullFrame2=i.fullFrame2,a.halfFrame1=i.halfFrame1,a.halfFrame2=i.halfFrame2)})),this.MULTI_PIPELINE=this.get(u.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(u.BITMAPMASK_PIPELINE),t)for(o in t){var b=t[o];(i=new b(d)).isPostFX?this.postPipelineClasses.set(o,b):this.has(o)||(this.classes.set(o,b),this.add(o,i))}},add:function add(t,i){if(!i.isPostFX){var o=this.pipelines,a=this.renderer;return o.has(t)?console.warn("Pipeline exists: "+t):(i.name=t,i.manager=this,o.set(t,i)),i.hasBooted||i.boot(),0!==a.width&&0!==a.height&&i.resize(a.width,a.height),i}console.warn(t+" is a Post Pipeline. Use `addPostPipeline` instead")},addPostPipeline:function addPostPipeline(t,i){this.postPipelineClasses.has(t)||this.postPipelineClasses.set(t,i)},flush:function flush(){this.current&&this.current.flush()},has:function has(t){var i=this.pipelines;return"string"==typeof t?i.has(t):!!i.contains(t)},get:function get(t){var i=this.pipelines;return"string"==typeof t?i.get(t):i.contains(t)?t:void 0},getPostPipeline:function getPostPipeline(t,i){var o,a=this.postPipelineClasses;if("string"==typeof t?o=a.get(t):"function"==typeof t?a.contains(t)&&(o=t):"object"===_typeof(t)&&(o=a.get(t.name)),o){var u=new o(this.game);return i&&(u.gameObject=i),u}},remove:function remove(t,i,o){void 0===i&&(i=!0),void 0===o&&(o=!0),this.pipelines.delete(t),i&&this.classes.delete(t),o&&this.postPipelineClasses.delete(t)},set:function set(t,i,o){if(!t.isPostFX)return this.isCurrent(t,o)||(this.flush(),this.current&&this.current.unbind(),this.current=t,t.bind(o)),t.updateProjectionMatrix(),t.onBind(i),t},preBatch:function preBatch(t){if(t.hasPostPipeline){this.flush();for(var i=t.postPipelines,o=i.length-1;o>=0;o--){var a=i[o];a.active&&a.preBatch(t)}}},postBatch:function postBatch(t){if(t.hasPostPipeline){this.flush();for(var i=t.postPipelines,o=0;o<i.length;o++){var a=i[o];a.active&&a.postBatch(t)}}},preBatchCamera:function preBatchCamera(t){if(t.hasPostPipeline){this.flush();for(var i=t.postPipelines,o=i.length-1;o>=0;o--){var a=i[o];a.active&&a.preBatch(t)}}},postBatchCamera:function postBatchCamera(t){if(t.hasPostPipeline){this.flush();for(var i=t.postPipelines,o=0;o<i.length;o++){var a=i[o];a.active&&a.postBatch(t)}}},isCurrent:function isCurrent(t,i){var o=this.renderer,a=this.current;return a&&!i&&(i=a.currentShader),!(a!==t||i.program!==o.currentProgram)},copyFrame:function copyFrame(t,i,o,a,u){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(t,i,o,a,u),this},copyToGame:function copyToGame(t){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(t),this},drawFrame:function drawFrame(t,i,o,a){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(t,i,o,a),this},blendFrames:function blendFrames(t,i,o,a,u){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(t,i,o,a,u),this},blendFramesAdditive:function blendFramesAdditive(t,i,o,a,u){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(t,i,o,a,u),this},clearFrame:function clearFrame(t,i){return this.UTILITY_PIPELINE.clearFrame(t,i),this},blitFrame:function blitFrame(t,i,o,a,u,d){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(t,i,o,a,u,d),this},copyFrameRect:function copyFrameRect(t,i,o,a,u,d,b,S){return this.UTILITY_PIPELINE.copyFrameRect(t,i,o,a,u,d,b,S),this},forceZero:function forceZero(){return this.current&&this.current.forceZero},setMulti:function setMulti(){return this.set(this.MULTI_PIPELINE)},setUtility:function setUtility(t){return this.UTILITY_PIPELINE.bind(t)},rebind:function rebind(t){void 0===t&&this.previous&&(t=this.previous);var i=this.renderer,o=i.gl;o.disable(o.DEPTH_TEST),o.disable(o.CULL_FACE),i.hasActiveStencilMask()?o.clear(o.DEPTH_BUFFER_BIT):(o.disable(o.STENCIL_TEST),o.clear(o.DEPTH_BUFFER_BIT|o.STENCIL_BUFFER_BIT)),o.viewport(0,0,i.width,i.height),i.currentProgram=null,i.setBlendMode(0,!0);var a=this.pipelines.entries;for(var u in a)a[u].glReset=!0;t&&(this.current=t,t.rebind()),i.resetTextures()},clear:function clear(){var t=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,t.currentProgram=null,t.setBlendMode(0,!0)},destroy:function destroy(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});t.exports=N},function(t,i,o){var a=o(0),u=o(2),d=o(866),b=o(867),S=o(107),C=o(58),M=new a({Extends:C,initialize:function BitmapMaskPipeline(t){t.fragShader=u(t,"fragShader",d),t.vertShader=u(t,"vertShader",b),t.batchSize=u(t,"batchSize",1),t.vertices=u(t,"vertices",[-1,1,-1,-7,7,1]),t.attributes=u(t,"attributes",[{name:"inPosition",size:2,type:S.FLOAT}]),C.call(this,t)},boot:function boot(){C.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function resize(t,i){C.prototype.resize.call(this,t,i),this.set2f("uResolution",t,i)},beginMask:function beginMask(t,i,o){var a=this.gl;if(t.bitmapMask&&a){var u=this.renderer;u.flush(),u.pushFramebuffer(t.mainFramebuffer),a.disable(a.STENCIL_TEST),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT),u.currentCameraMask.mask!==t&&(u.currentMask.mask=t,u.currentMask.camera=o)}},endMask:function endMask(t,i){var o=this.gl,a=this.renderer,u=t.bitmapMask;if(u&&o){a.flush(),a.pushFramebuffer(t.maskFramebuffer),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),a.setBlendMode(0,!0),u.renderWebGL(a,u,i),a.flush(),a.popFramebuffer(),a.popFramebuffer();var d=a.getCurrentStencilMask();d?(o.enable(o.STENCIL_TEST),d.mask.applyStencil(a,d.camera,!0)):a.currentMask.mask=null,a.pipelines.set(this),o.activeTexture(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,t.maskTexture),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,t.mainTexture),this.set1i("uInvertMaskAlpha",t.invertAlpha),o.drawArrays(this.topology,0,3),a.resetTextures()}}});t.exports=M},function(t,i,o){t.exports={AFTER_FLUSH:o(868),BEFORE_FLUSH:o(869),BIND:o(870),BOOT:o(871),DESTROY:o(872),REBIND:o(873),RESIZE:o(874)}},function(t,i,o){var a=o(0),u=o(2),d=o(107),b=new a({initialize:function WebGLShader(t,i,o,a,u){this.pipeline=t,this.name=i,this.renderer=t.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(o,a),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(u),this.createUniforms()},createAttributes:function createAttributes(t){var i=0,o=0,a=[];this.vertexComponentCount=0;for(var b=0;b<t.length;b++){var S=t[b],C=S.name,M=u(S,"size",1),P=u(S,"type",d.FLOAT),R=P.enum,O=P.size,B=!!S.normalized;a.push({name:C,size:M,type:R,normalized:B,offset:o,enabled:!1,location:-1}),4===O?i+=M:i++,o+=M*O}this.vertexSize=o,this.vertexComponentCount=i,this.attributes=a},bind:function bind(t,i){return void 0===t&&(t=!1),void 0===i&&(i=!1),i&&this.pipeline.flush(),this.renderer.setProgram(this.program),t&&this.setAttribPointers(),this},rebind:function rebind(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function setAttribPointers(t){void 0===t&&(t=!1);for(var i=this.gl,o=this.vertexSize,a=this.attributes,u=this.program,d=0;d<a.length;d++){var b=a[d],S=b.size,C=b.type,M=b.offset,P=b.enabled,R=b.location,O=!!b.normalized;if(t){var B=i.getAttribLocation(u,b.name);B>=0?(i.enableVertexAttribArray(B),i.vertexAttribPointer(B,S,C,O,o,M),b.enabled=!0,b.location=B):-1!==B&&i.disableVertexAttribArray(B)}else P?i.vertexAttribPointer(R,S,C,O,o,M):!P&&R>-1&&(i.disableVertexAttribArray(R),b.location=-1)}return this},createUniforms:function createUniforms(){var t,i,o,a=this.gl,u=this.program,d=this.uniforms,b=a.getProgramParameter(u,a.ACTIVE_UNIFORMS);for(t=0;t<b;t++){var S=a.getActiveUniform(u,t);if(S){i=S.name,null!==(o=a.getUniformLocation(u,i))&&(d[i]={name:i,location:o,value1:null,value2:null,value3:null,value4:null});var C=i.indexOf("[");C>0&&(i=i.substr(0,C),d.hasOwnProperty(i)||null!==(o=a.getUniformLocation(u,i))&&(d[i]={name:i,location:o,value1:null,value2:null,value3:null,value4:null}))}}return this},hasUniform:function hasUniform(t){return this.uniforms.hasOwnProperty(t)},resetUniform:function resetUniform(t){var i=this.uniforms[t];return i&&(i.value1=null,i.value2=null,i.value3=null,i.value4=null),this},setUniform1:function setUniform1(t,i,o,a){var u=this.uniforms[i];return u?((a||u.value1!==o)&&(u.value1=o,this.renderer.setProgram(this.program),t.call(this.gl,u.location,o),this.pipeline.currentShader=this),this):this},setUniform2:function setUniform2(t,i,o,a,u){var d=this.uniforms[i];return d?((u||d.value1!==o||d.value2!==a)&&(d.value1=o,d.value2=a,this.renderer.setProgram(this.program),t.call(this.gl,d.location,o,a),this.pipeline.currentShader=this),this):this},setUniform3:function setUniform3(t,i,o,a,u,d){var b=this.uniforms[i];return b?((d||b.value1!==o||b.value2!==a||b.value3!==u)&&(b.value1=o,b.value2=a,b.value3=u,this.renderer.setProgram(this.program),t.call(this.gl,b.location,o,a,u),this.pipeline.currentShader=this),this):this},setUniform4:function setUniform4(t,i,o,a,u,d,b){var S=this.uniforms[i];return S?((b||S.value1!==o||S.value2!==a||S.value3!==u||S.value4!==d)&&(S.value1=o,S.value2=a,S.value3=u,S.value4=d,this.renderer.setProgram(this.program),t.call(this.gl,S.location,o,a,u,d),this.pipeline.currentShader=this),this):this},set1f:function set1f(t,i){return this.setUniform1(this.gl.uniform1f,t,i)},set2f:function set2f(t,i,o){return this.setUniform2(this.gl.uniform2f,t,i,o)},set3f:function set3f(t,i,o,a){return this.setUniform3(this.gl.uniform3f,t,i,o,a)},set4f:function set4f(t,i,o,a,u){return this.setUniform4(this.gl.uniform4f,t,i,o,a,u)},set1fv:function set1fv(t,i){return this.setUniform1(this.gl.uniform1fv,t,i,!0)},set2fv:function set2fv(t,i){return this.setUniform1(this.gl.uniform2fv,t,i,!0)},set3fv:function set3fv(t,i){return this.setUniform1(this.gl.uniform3fv,t,i,!0)},set4fv:function set4fv(t,i){return this.setUniform1(this.gl.uniform4fv,t,i,!0)},set1iv:function set1iv(t,i){return this.setUniform1(this.gl.uniform1iv,t,i,!0)},set2iv:function set2iv(t,i){return this.setUniform1(this.gl.uniform2iv,t,i,!0)},set3iv:function set3iv(t,i){return this.setUniform1(this.gl.uniform3iv,t,i,!0)},set4iv:function set4iv(t,i){return this.setUniform1(this.gl.uniform4iv,t,i,!0)},set1i:function set1i(t,i){return this.setUniform1(this.gl.uniform1i,t,i)},set2i:function set2i(t,i,o){return this.setUniform2(this.gl.uniform2i,t,i,o)},set3i:function set3i(t,i,o,a){return this.setUniform3(this.gl.uniform3i,t,i,o,a)},set4i:function set4i(t,i,o,a,u){return this.setUniform4(this.gl.uniform4i,t,i,o,a,u)},setMatrix2fv:function setMatrix2fv(t,i,o){return this.setUniform2(this.gl.uniformMatrix2fv,t,i,o,!0)},setMatrix3fv:function setMatrix3fv(t,i,o){return this.setUniform2(this.gl.uniformMatrix3fv,t,i,o,!0)},setMatrix4fv:function setMatrix4fv(t,i,o){return this.setUniform2(this.gl.uniformMatrix4fv,t,i,o,!0)},destroy:function destroy(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});t.exports=b},function(t,i,o){var a=o(0),u=o(59),d=o(2),b=o(875),S=o(876),C=o(25),M=o(107),P=o(58),R=new a({Extends:P,initialize:function GraphicsPipeline(t){t.fragShader=d(t,"fragShader",b),t.vertShader=d(t,"vertShader",S),t.attributes=d(t,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:M.UNSIGNED_BYTE,normalized:!0}]),P.call(this,t),this.calcMatrix=new C,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function batchFillRect(t,i,o,a,u,d){this.renderer.pipelines.set(this);var b=this.calcMatrix;d&&d.multiply(u,b);var S=t+o,C=i+a,M=b.getX(t,i),P=b.getY(t,i),R=b.getX(t,C),O=b.getY(t,C),B=b.getX(S,C),N=b.getY(S,C),Y=b.getX(S,i),G=b.getY(S,i),X=this.fillTint;this.batchQuad(M,P,R,O,B,N,Y,G,X.TL,X.TR,X.BL,X.BR)},batchFillTriangle:function batchFillTriangle(t,i,o,a,u,d,b,S){this.renderer.pipelines.set(this);var C=this.calcMatrix;S&&S.multiply(b,C);var M=C.getX(t,i),P=C.getY(t,i),R=C.getX(o,a),O=C.getY(o,a),B=C.getX(u,d),N=C.getY(u,d),Y=this.fillTint;this.batchTri(M,P,R,O,B,N,Y.TL,Y.TR,Y.BL)},batchStrokeTriangle:function batchStrokeTriangle(t,i,o,a,u,d,b,S,C){var M=this.tempTriangle;M[0].x=t,M[0].y=i,M[0].width=b,M[1].x=o,M[1].y=a,M[1].width=b,M[2].x=u,M[2].y=d,M[2].width=b,M[3].x=t,M[3].y=i,M[3].width=b,this.batchStrokePath(M,b,!1,S,C)},batchFillPath:function batchFillPath(t,i,o){this.renderer.pipelines.set(this);var a=this.calcMatrix;o&&o.multiply(i,a);for(var d,b,S=t.length,C=this.polygonCache,M=this.fillTint.TL,P=this.fillTint.TR,R=this.fillTint.BL,O=0;O<S;++O)b=t[O],C.push(b.x,b.y);S=(d=u(C)).length;for(var B=0;B<S;B+=3){var N=2*d[B+0],Y=2*d[B+1],G=2*d[B+2],X=C[N+0],U=C[N+1],z=C[Y+0],V=C[Y+1],W=C[G+0],H=C[G+1],j=a.getX(X,U),q=a.getY(X,U),Z=a.getX(z,V),K=a.getY(z,V),$=a.getX(W,H),tt=a.getY(W,H);this.batchTri(j,q,Z,K,$,tt,M,P,R)}C.length=0},batchStrokePath:function batchStrokePath(t,i,o,a,u){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var d=t.length-1,b=0;b<d;b++){var S=t[b],C=t[b+1];this.batchLine(S.x,S.y,C.x,C.y,S.width/2,C.width/2,i,b,!o&&b===d-1,a,u)}},batchLine:function batchLine(t,i,o,a,u,d,b,S,C,M,P){this.renderer.pipelines.set(this);var R=this.calcMatrix;P&&P.multiply(M,R);var O=o-t,B=a-i,N=Math.sqrt(O*O+B*B),Y=u*(a-i)/N,G=u*(t-o)/N,X=d*(a-i)/N,U=d*(t-o)/N,z=o-X,V=a-U,W=t-Y,H=i-G,j=o+X,q=a+U,Z=t+Y,K=i+G,$=R.getX(z,V),tt=R.getY(z,V),et=R.getX(W,H),it=R.getY(W,H),nt=R.getX(j,q),rt=R.getY(j,q),st=R.getX(Z,K),ot=R.getY(Z,K),at=this.strokeTint,ht=at.TL,lt=at.TR,ut=at.BL,ct=at.BR;if(this.batchQuad(st,ot,et,it,$,tt,nt,rt,ht,lt,ut,ct),!(b<=2)){var dt=this.prevQuad,ft=this.firstQuad;S>0&&dt[4]?this.batchQuad(st,ot,et,it,dt[0],dt[1],dt[2],dt[3],ht,lt,ut,ct):(ft[0]=st,ft[1]=ot,ft[2]=et,ft[3]=it,ft[4]=1),C&&ft[4]?this.batchQuad($,tt,nt,rt,ft[0],ft[1],ft[2],ft[3],ht,lt,ut,ct):(dt[0]=$,dt[1]=tt,dt[2]=nt,dt[3]=rt,dt[4]=1)}},batchVert:function batchVert(t,i,o){var a=this.vertexViewF32,u=this.vertexViewU32,d=this.vertexCount*this.currentShader.vertexComponentCount-1;a[++d]=t,a[++d]=i,u[++d]=o,this.vertexCount++},batchQuad:function batchQuad(t,i,o,a,u,d,b,S,C,M,P,R){var O=!1;return this.shouldFlush(6)&&(this.flush(),O=!0),this.batchVert(t,i,C),this.batchVert(o,a,P),this.batchVert(u,d,R),this.batchVert(t,i,C),this.batchVert(u,d,R),this.batchVert(b,S,M),O},batchTri:function batchTri(t,i,o,a,u,d,b,S,C){var M=!1;return this.shouldFlush(3)&&(this.flush(),M=!0),this.batchVert(t,i,b),this.batchVert(o,a,S),this.batchVert(u,d,C),M},destroy:function destroy(){return P.prototype.destroy.call(this),this.polygonCache=null,this}});t.exports=R},function(t,i,o){var a=o(0),u=o(2),d=o(877),b=o(108),S=o(3),C=o(58),M=10,P=new S,R=new a({Extends:b,initialize:function LightPipeline(t){M=t.game.renderer.config.maxLights;for(var i=u(t,"fragShader",d),o=[],a=1;a<=M;a++)o.push({name:"lights"+a,fragShader:i.replace("%LIGHT_COUNT%",a.toString())});t.shaders=o,b.call(this,t),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function boot(){C.prototype.boot.call(this);var t=this.gl,i=t.createTexture();t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:i};for(var o=0;o<this.shaders.length;o++)this["lightShader"+(o+1)]=this.shaders[o]},onRender:function onRender(t,i){var o=t.sys.lights;if(this.lightsActive=!1,o&&o.active){var a=o.getLights(i),u=a.length;if(0!==u){var d;this.lightsActive=!0,this.setShader(this["lightShader"+u],!0);var b=this.renderer.height,S=i.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",i.x,i.y,i.rotation,i.zoom),this.set3f("uAmbientLightColor",o.ambientColor.r,o.ambientColor.g,o.ambientColor.b),d=0;d<u;d++){var C=a[d].light,M=C.color,R="uLights["+d+"].";S.transformPoint(C.x,C.y,P),this.set2f(R+"position",P.x-i.scrollX*C.scrollFactorX*i.zoom,b-(P.y-i.scrollY*C.scrollFactorY*i.zoom)),this.set3f(R+"color",M.r,M.g,M.b),this.set1f(R+"intensity",C.intensity),this.set1f(R+"radius",C.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function setNormalMapRotation(t){if(t!==this.currentNormalMapRotation||0===this.vertexCount){this.vertexCount>0&&this.flush();var i=this.inverseRotationMatrix;if(t){var o=-t,a=Math.cos(o),u=Math.sin(o);i[1]=u,i[3]=-u,i[0]=i[4]=a}else i[0]=i[4]=1,i[1]=i[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,i),this.currentNormalMapRotation=t}},setTexture2D:function setTexture2D(t,i){var o=this.renderer;void 0===t&&(t=o.tempTextures[0]);var a=this.getNormalMap(i);o.isNewNormalMap(t,a)&&(this.flush(),o.setTextureZero(t),o.setNormalMap(a));var u=i?i.rotation:0;return this.setNormalMapRotation(u),this.currentUnit=0,0},setGameObject:function setGameObject(t,i){void 0===i&&(i=t.frame);var o=this.renderer,a=i.glTexture,u=this.getNormalMap(t);return o.isNewNormalMap()&&(this.flush(),o.setTextureZero(a),o.setNormalMap(u)),this.setNormalMapRotation(t.rotation),this.currentUnit=0,0},getNormalMap:function getNormalMap(t){var i;return t?t.displayTexture?i=t.displayTexture.dataSource[t.displayFrame.sourceIndex]:t.texture?i=t.texture.dataSource[t.frame.sourceIndex]:t.tileset&&(i=Array.isArray(t.tileset)?t.tileset[0].image.dataSource[0]:t.tileset.image.dataSource[0]):i=this.defaultNormalMap,i||(i=this.defaultNormalMap),i.glTexture},batchSprite:function batchSprite(t,i,o){this.lightsActive&&b.prototype.batchSprite.call(this,t,i,o)},batchTexture:function batchTexture(t,i,o,a,u,d,S,C,M,P,R,O,B,N,Y,G,X,U,z,V,W,H,j,q,Z,K,$,tt,et,it,nt,rt){this.lightsActive&&b.prototype.batchTexture.call(this,t,i,o,a,u,d,S,C,M,P,R,O,B,N,Y,G,X,U,z,V,W,H,j,q,Z,K,$,tt,et,it,nt,rt)},batchTextureFrame:function batchTextureFrame(t,i,o,a,u,d,S){this.lightsActive&&b.prototype.batchTextureFrame.call(this,t,i,o,a,u,d,S)}});R.LIGHT_COUNT=M,t.exports=R},function(t,i,o){var a=o(0),u=o(2),d=o(880),b=o(881),S=o(58),C=new a({Extends:S,initialize:function PointLightPipeline(t){t.vertShader=u(t,"vertShader",b),t.fragShader=u(t,"fragShader",d),t.attributes=u(t,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),S.call(this,t)},onRender:function onRender(t,i){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",i.zoom)},batchPointLight:function batchPointLight(t,i,o,a,u,d,b,S,C,M,P,R){var O=t.color,B=t.intensity,N=t.radius,Y=t.attenuation,G=O.r*B,X=O.g*B,U=O.b*B,z=i.alpha*t.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(o,a,P,R,N,Y,G,X,U,z),this.batchLightVert(u,d,P,R,N,Y,G,X,U,z),this.batchLightVert(b,S,P,R,N,Y,G,X,U,z),this.batchLightVert(o,a,P,R,N,Y,G,X,U,z),this.batchLightVert(b,S,P,R,N,Y,G,X,U,z),this.batchLightVert(C,M,P,R,N,Y,G,X,U,z)},batchLightVert:function batchLightVert(t,i,o,a,u,d,b,S,C,M){var P=this.vertexViewF32,R=this.vertexCount*this.currentShader.vertexComponentCount-1;P[++R]=t,P[++R]=i,P[++R]=o,P[++R]=a,P[++R]=u,P[++R]=d,P[++R]=b,P[++R]=S,P[++R]=C,P[++R]=M,this.vertexCount++}});t.exports=C},function(t,i,o){var a=o(0),u=o(2),d=o(108),b=new a({Extends:d,initialize:function RopePipeline(t){t.topology=5,t.batchSize=u(t,"batchSize",256),d.call(this,t)}});t.exports=b},function(t,i,o){var a=o(0),u=o(2),d=o(108),b=o(882),S=o(883),C=o(58),M=new a({Extends:d,initialize:function SinglePipeline(t){t.fragShader=u(t,"fragShader",b),t.vertShader=u(t,"vertShader",S),t.forceZero=!0,d.call(this,t)},boot:function boot(){C.prototype.boot.call(this),this.set1i("uMainSampler",0)}});t.exports=M},function(t,i,o){var a=o(884),u=o(35),d=o(0),b=o(198),S=o(885),C=o(886),M=o(2),P=o(887),R=o(382),O=o(58),B=new d({Extends:O,initialize:function UtilityPipeline(t){t.renderTarget=M(t,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),t.vertShader=M(t,"vertShader",R),t.shaders=M(t,"shaders",[{name:"Copy",fragShader:C},{name:"AddBlend",fragShader:a},{name:"LinearBlend",fragShader:P},{name:"ColorMatrix",fragShader:S}]),t.attributes=M(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],t.batchSize=1,O.call(this,t),this.colorMatrix=new b,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function boot(){O.prototype.boot.call(this);var t=this.shaders,i=this.renderTargets;this.copyShader=t[0],this.addShader=t[1],this.linearShader=t[2],this.colorMatrixShader=t[3],this.fullFrame1=i[0],this.fullFrame2=i[1],this.halfFrame1=i[2],this.halfFrame2=i[3]},copyFrame:function copyFrame(t,i,o,a,u){void 0===o&&(o=1),void 0===a&&(a=!0),void 0===u&&(u=!0);var d=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",o),d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,t.texture),i?(d.viewport(0,0,i.width,i.height),d.bindFramebuffer(d.FRAMEBUFFER,i.framebuffer),d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,i.texture,0)):d.viewport(0,0,t.width,t.height),a&&(u?d.clearColor(0,0,0,0):d.clearColor(0,0,0,1),d.clear(d.COLOR_BUFFER_BIT)),d.bufferData(d.ARRAY_BUFFER,this.vertexData,d.STATIC_DRAW),d.drawArrays(d.TRIANGLES,0,6),d.bindFramebuffer(d.FRAMEBUFFER,null),d.bindTexture(d.TEXTURE_2D,null)},blitFrame:function blitFrame(t,i,o,a,d,b){void 0===o&&(o=1),void 0===a&&(a=!0),void 0===d&&(d=!0),void 0===b&&(b=!1);var S=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",o),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,t.texture),t.height>i.height)S.viewport(0,0,t.width,t.height),this.setTargetUVs(t,i);else{var C=i.height-t.height;S.viewport(0,C,t.width,t.height)}if(S.bindFramebuffer(S.FRAMEBUFFER,i.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,i.texture,0),a&&(d?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT)),b){var M=this.renderer.currentBlendMode;this.renderer.setBlendMode(u.ERASE)}S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),b&&this.renderer.setBlendMode(M),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function copyFrameRect(t,i,o,a,u,d,b,S){void 0===b&&(b=!0),void 0===S&&(S=!0);var C=this.gl;C.bindFramebuffer(C.FRAMEBUFFER,t.framebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,t.texture,0),b&&(S?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT)),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,i.texture),C.copyTexSubImage2D(C.TEXTURE_2D,0,0,0,o,a,u,d),C.bindFramebuffer(C.FRAMEBUFFER,null),C.bindTexture(C.TEXTURE_2D,null)},copyToGame:function copyToGame(t){var i=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,t.texture),i.bufferData(i.ARRAY_BUFFER,this.vertexData,i.STATIC_DRAW),i.drawArrays(i.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function drawFrame(t,i,o,a){void 0===o&&(o=!0),void 0===a&&(a=this.colorMatrix);var u=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",a.getData()),this.set1f("uAlpha",a.alpha),u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,t.texture),i?(u.viewport(0,0,i.width,i.height),u.bindFramebuffer(u.FRAMEBUFFER,i.framebuffer),u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,i.texture,0)):u.viewport(0,0,t.width,t.height),o?u.clearColor(0,0,0,0):u.clearColor(0,0,0,1),u.clear(u.COLOR_BUFFER_BIT),u.bufferData(u.ARRAY_BUFFER,this.vertexData,u.STATIC_DRAW),u.drawArrays(u.TRIANGLES,0,6),u.bindFramebuffer(u.FRAMEBUFFER,null),u.bindTexture(u.TEXTURE_2D,null)},blendFrames:function blendFrames(t,i,o,a,u,d){void 0===a&&(a=1),void 0===u&&(u=!0),void 0===d&&(d=this.linearShader);var b=this.gl;this.setShader(d),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",a),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,t.texture),b.activeTexture(b.TEXTURE1),b.bindTexture(b.TEXTURE_2D,i.texture),o?(b.bindFramebuffer(b.FRAMEBUFFER,o.framebuffer),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,o.texture,0),b.viewport(0,0,o.width,o.height)):b.viewport(0,0,t.width,t.height),u?b.clearColor(0,0,0,0):b.clearColor(0,0,0,1),b.clear(b.COLOR_BUFFER_BIT),b.bufferData(b.ARRAY_BUFFER,this.vertexData,b.STATIC_DRAW),b.drawArrays(b.TRIANGLES,0,6),b.bindFramebuffer(b.FRAMEBUFFER,null),b.bindTexture(b.TEXTURE_2D,null)},blendFramesAdditive:function blendFramesAdditive(t,i,o,a,u){this.blendFrames(t,i,o,a,u,this.addShader)},clearFrame:function clearFrame(t,i){void 0===i&&(i=!0);var o=this.gl;o.viewport(0,0,t.width,t.height),o.bindFramebuffer(o.FRAMEBUFFER,t.framebuffer),i?o.clearColor(0,0,0,0):o.clearColor(0,0,0,1),o.clear(o.COLOR_BUFFER_BIT);var a=this.renderer.currentFramebuffer;o.bindFramebuffer(o.FRAMEBUFFER,a)},setUVs:function setUVs(t,i,o,a,u,d,b,S){var C=this.vertexViewF32;C[2]=t,C[3]=i,C[6]=o,C[7]=a,C[10]=u,C[11]=d,C[14]=t,C[15]=i,C[18]=u,C[19]=d,C[22]=b,C[23]=S},setTargetUVs:function setTargetUVs(t,i){var o=i.height/t.height;o=o>.5?.5-(o-.5):.5-o+.5,this.setUVs(0,o,0,1+o,1,1+o,1,o)},flipX:function flipX(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function flipY(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function resetUVs(){this.setUVs(0,0,0,1,1,1,1,0)}});t.exports=B},function(t,i){t.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join("\n")},function(t,i,o){var a=o(31),u=o(38),d=o(2);t.exports=function WebGLSnapshot(t,i){var o=t.getContext("experimental-webgl"),b=d(i,"callback"),S=d(i,"type","image/png"),C=d(i,"encoder",.92),M=d(i,"x",0),P=d(i,"y",0),R=d(i,"getPixel",!1),O=d(i,"isFramebuffer",!1),B=O?d(i,"bufferWidth",1):o.drawingBufferWidth,N=O?d(i,"bufferHeight",1):o.drawingBufferHeight;if(R){var Y=new Uint8Array(4),G=O?P:N-P;o.readPixels(M,G,1,1,o.RGBA,o.UNSIGNED_BYTE,Y),b.call(null,new u(Y[0],Y[1],Y[2],Y[3]/255))}else{var X=d(i,"width",B),U=d(i,"height",N),z=new Uint8Array(X*U*4);o.readPixels(M,N-P-U,X,U,o.RGBA,o.UNSIGNED_BYTE,z);for(var V=a.createWebGL(this,X,U),W=V.getContext("2d"),H=W.getImageData(0,0,X,U),j=H.data,q=0;q<U;q++)for(var Z=0;Z<X;Z++){var K=4*((U-q-1)*X+Z),$=4*(q*X+Z);j[$+0]=z[K+0],j[$+1]=z[K+1],j[$+2]=z[K+2],j[$+3]=z[K+3]}W.putImageData(H,0,0);var tt=new Image;tt.onerror=function(){b.call(null),a.remove(V)},tt.onload=function(){b.call(null,tt),a.remove(V)},tt.src=V.toDataURL(S,C)}}},function(t,i,o){var a=o(33);t.exports=function DebugHeader(t){var i=t.config;if(!i.hideBanner){var o="WebGL";i.renderType===a.CANVAS?o="Canvas":i.renderType===a.HEADLESS&&(o="Headless");var u,d=i.audio,b=t.device.audio;if(u=b.webAudio&&!d.disableWebAudio?"Web Audio":d.noAudio||!b.webAudio&&!b.audioData?"No Audio":"HTML5 Audio",t.device.browser.ie)window.console&&console.log("Phaser v"+a.VERSION+" / https://phaser.io");else{var S,C="",M=[C];Array.isArray(i.bannerBackgroundColor)?(i.bannerBackgroundColor.forEach((function(t){C=C.concat("%c "),M.push("background: "+t),S=t})),M[M.length-1]="color: "+i.bannerTextColor+"; background: "+S):(C=C.concat("%c "),M.push("color: "+i.bannerTextColor+"; background: "+i.bannerBackgroundColor)),M.push("background: transparent"),i.gameTitle&&(C=C.concat(i.gameTitle),i.gameVersion&&(C=C.concat(" v"+i.gameVersion)),i.hidePhaser||(C=C.concat(" / "))),i.hidePhaser||(C=C.concat("Phaser v"+a.VERSION+" ("+o+" | "+u+")")),C=C.concat(" %c "+i.gameURL),M[0]=C,console.log.apply(console,M)}}}},function(t,i,o){var a=o(0),u=o(6),d=o(1),b=o(386),S=new a({initialize:function TimeStep(t,i){this.game=t,this.raf=new b,this.started=!1,this.running=!1,this.minFps=u(i,"min",5),this.targetFps=u(i,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=d,this.forceSetTimeOut=u(i,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=u(i,"deltaHistory",10),this.panicMax=u(i,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=u(i,"smoothStep",!0)},blur:function blur(){this.inFocus=!1},focus:function focus(){this.inFocus=!0,this.resetDelta()},pause:function pause(){this._pauseTime=window.performance.now()},resume:function resume(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function resetDelta(){var t=window.performance.now();this.time=t,this.lastTime=t,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0;for(var i=0;i<this.deltaSmoothingMax;i++)this.deltaHistory[i]=Math.min(this._target,this.deltaHistory[i]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function start(t){if(this.started)return this;this.started=!0,this.running=!0;for(var i=0;i<this.deltaSmoothingMax;i++)this.deltaHistory[i]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=t,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function step(){var t=window.performance.now();this.now=t;var i=t-this.lastTime;i<0&&(i=0),this.rawDelta=i;var o=this.deltaIndex,a=this.deltaHistory,u=this.deltaSmoothingMax,d=i,b=i;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,d=Math.min(d,this._target)),d>this._min&&(d=a[o],d=Math.min(d,this._min)),a[o]=d,this.deltaIndex++,this.deltaIndex>u&&(this.deltaIndex=0),b=0;for(var S=0;S<u;S++)b+=a[S];b/=u}this.delta=b,this.time+=this.rawDelta,t>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0),this.framesThisSecond++;var C=b/this._target;this.callback(t,b,C),this.lastTime=t,this.frame++},tick:function tick(){this.step()},sleep:function sleep(){this.running&&(this.raf.stop(),this.running=!1)},wake:function wake(t){this.running||(t&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function getDuration(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function getDurationMS(){return Math.round(this.lastTime-this.startTime)},stop:function stop(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function destroy(){this.stop(),this.callback=d,this.raf=null,this.game=null}});t.exports=S},function(t,i,o){var a=o(0),u=o(1),d=new a({initialize:function RequestAnimationFrame(){this.isRunning=!1,this.callback=u,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var t=this;this.step=function step(){var i=window.performance.now();t.lastTime=t.tick,t.tick=i,t.callback(i),t.timeOutID=window.requestAnimationFrame(step)},this.stepTimeout=function stepTimeout(){var i=Date.now(),o=Math.min(Math.max(2*t.target+t.tick-i,0),t.target);t.lastTime=t.tick,t.tick=i,t.callback(i),t.timeOutID=window.setTimeout(stepTimeout,o)}},start:function start(t,i,o){this.isRunning||(this.callback=t,this.isSetTimeOut=i,this.target=o,this.isRunning=!0,this.timeOutID=i?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function stop(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function destroy(){this.stop(),this.callback=u}});t.exports=d},function(t,i,o){var a=o(22);t.exports=function VisibilityHandler(t){var i,o=t.events;void 0!==document.hidden?i="visibilitychange":["webkit","moz","ms"].forEach((function(t){void 0!==document[t+"Hidden"]&&(document.hidden=function(){return document[t+"Hidden"]},i=t+"visibilitychange")})),i&&document.addEventListener(i,(function onChange(t){document.hidden||"pause"===t.type?o.emit(a.HIDDEN):o.emit(a.VISIBLE)}),!1),window.onblur=function(){o.emit(a.BLUR)},window.onfocus=function(){o.emit(a.FOCUS)},window.focus&&t.config.autoFocus&&window.focus()}},function(t,i,o){var a=o(389),u=o(31),d=o(6);t.exports=function GenerateTexture(t){var i=d(t,"data",[]),o=d(t,"canvas",null),b=d(t,"palette",a),S=d(t,"pixelWidth",1),C=d(t,"pixelHeight",S),M=d(t,"resizeCanvas",!0),P=d(t,"clearCanvas",!0),R=d(t,"preRender",null),O=d(t,"postRender",null),B=Math.floor(Math.abs(i[0].length*S)),N=Math.floor(Math.abs(i.length*C));o||(o=u.create2D(this,B,N),M=!1,P=!1),M&&(o.width=B,o.height=N);var Y=o.getContext("2d");P&&Y.clearRect(0,0,B,N),R&&R(o,Y);for(var G=0;G<i.length;G++)for(var X=i[G],U=0;U<X.length;U++){var z=X[U];"."!==z&&" "!==z&&(Y.fillStyle=b[z],Y.fillRect(U*S,G*C,S,C))}return O&&O(o,Y),o}},function(t,i){t.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(t,i,o){var a=o(0),u=o(358),d=o(94),b=o(3),S=new a({Extends:d,initialize:function CubicBezierCurve(t,i,o,a){d.call(this,"CubicBezierCurve"),Array.isArray(t)&&(a=new b(t[6],t[7]),o=new b(t[4],t[5]),i=new b(t[2],t[3]),t=new b(t[0],t[1])),this.p0=t,this.p1=i,this.p2=o,this.p3=a},getStartPoint:function getStartPoint(t){return void 0===t&&(t=new b),t.copy(this.p0)},getResolution:function getResolution(t){return t},getPoint:function getPoint(t,i){void 0===i&&(i=new b);var o=this.p0,a=this.p1,d=this.p2,S=this.p3;return i.set(u(t,o.x,a.x,d.x,S.x),u(t,o.y,a.y,d.y,S.y))},draw:function draw(t,i){void 0===i&&(i=32);var o=this.getPoints(i);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var a=1;a<o.length;a++)t.lineTo(o[a].x,o[a].y);return t.strokePath(),t},toJSON:function toJSON(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});S.fromJSON=function(t){var i=t.points,o=new b(i[0],i[1]),a=new b(i[2],i[3]),u=new b(i[4],i[5]),d=new b(i[6],i[7]);return new S(o,a,u,d)},t.exports=S},function(t,i,o){var a=o(0),u=o(94),d=o(36),b=o(6),S=o(196),C=o(3),M=new a({Extends:u,initialize:function EllipseCurve(t,i,o,a,S,M,P,R){if("object"===_typeof(t)){var O=t;t=b(O,"x",0),i=b(O,"y",0),o=b(O,"xRadius",0),a=b(O,"yRadius",o),S=b(O,"startAngle",0),M=b(O,"endAngle",360),P=b(O,"clockwise",!1),R=b(O,"rotation",0)}else void 0===a&&(a=o),void 0===S&&(S=0),void 0===M&&(M=360),void 0===P&&(P=!1),void 0===R&&(R=0);u.call(this,"EllipseCurve"),this.p0=new C(t,i),this._xRadius=o,this._yRadius=a,this._startAngle=d(S),this._endAngle=d(M),this._clockwise=P,this._rotation=d(R)},getStartPoint:function getStartPoint(t){return void 0===t&&(t=new C),this.getPoint(0,t)},getResolution:function getResolution(t){return 2*t},getPoint:function getPoint(t,i){void 0===i&&(i=new C);for(var o=2*Math.PI,a=this._endAngle-this._startAngle,u=Math.abs(a)<Number.EPSILON;a<0;)a+=o;for(;a>o;)a-=o;a<Number.EPSILON&&(a=u?0:o),this._clockwise&&!u&&(a===o?a=-o:a-=o);var d=this._startAngle+t*a,b=this.p0.x+this._xRadius*Math.cos(d),S=this.p0.y+this._yRadius*Math.sin(d);if(0!==this._rotation){var M=Math.cos(this._rotation),P=Math.sin(this._rotation),R=b-this.p0.x,O=S-this.p0.y;b=R*M-O*P+this.p0.x,S=R*P+O*M+this.p0.y}return i.set(b,S)},setXRadius:function setXRadius(t){return this.xRadius=t,this},setYRadius:function setYRadius(t){return this.yRadius=t,this},setWidth:function setWidth(t){return this.xRadius=t/2,this},setHeight:function setHeight(t){return this.yRadius=t/2,this},setStartAngle:function setStartAngle(t){return this.startAngle=t,this},setEndAngle:function setEndAngle(t){return this.endAngle=t,this},setClockwise:function setClockwise(t){return this.clockwise=t,this},setRotation:function setRotation(t){return this.rotation=t,this},x:{get:function get(){return this.p0.x},set:function set(t){this.p0.x=t}},y:{get:function get(){return this.p0.y},set:function set(t){this.p0.y=t}},xRadius:{get:function get(){return this._xRadius},set:function set(t){this._xRadius=t}},yRadius:{get:function get(){return this._yRadius},set:function set(t){this._yRadius=t}},startAngle:{get:function get(){return S(this._startAngle)},set:function set(t){this._startAngle=d(t)}},endAngle:{get:function get(){return S(this._endAngle)},set:function set(t){this._endAngle=d(t)}},clockwise:{get:function get(){return this._clockwise},set:function set(t){this._clockwise=t}},angle:{get:function get(){return S(this._rotation)},set:function set(t){this._rotation=d(t)}},rotation:{get:function get(){return this._rotation},set:function set(t){this._rotation=t}},toJSON:function toJSON(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:S(this._startAngle),endAngle:S(this._endAngle),clockwise:this._clockwise,rotation:S(this._rotation)}}});M.fromJSON=function(t){return new M(t)},t.exports=M},function(t,i,o){var a=o(0),u=o(94),d=o(199),b=o(10),S=o(3),C=new a({Extends:u,initialize:function LineCurve(t,i){u.call(this,"LineCurve"),Array.isArray(t)&&(i=new S(t[2],t[3]),t=new S(t[0],t[1])),this.p0=t,this.p1=i,this.arcLengthDivisions=1},getBounds:function getBounds(t){return void 0===t&&(t=new b),d([this.p0,this.p1],t)},getStartPoint:function getStartPoint(t){return void 0===t&&(t=new S),t.copy(this.p0)},getResolution:function getResolution(t){return void 0===t&&(t=1),t},getPoint:function getPoint(t,i){return void 0===i&&(i=new S),1===t?i.copy(this.p1):(i.copy(this.p1).subtract(this.p0).scale(t).add(this.p0),i)},getPointAt:function getPointAt(t,i){return this.getPoint(t,i)},getTangent:function getTangent(t,i){return void 0===i&&(i=new S),i.copy(this.p1).subtract(this.p0).normalize(),i},getUtoTmapping:function getUtoTmapping(t,i,o){var a;if(i){var u=this.getLengths(o),d=u[u.length-1];a=Math.min(i,d)/d}else a=t;return a},draw:function draw(t){return t.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),t},toJSON:function toJSON(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});C.fromJSON=function(t){var i=t.points,o=new S(i[0],i[1]),a=new S(i[2],i[3]);return new C(o,a)},t.exports=C},function(t,i,o){var a=o(0),u=o(3),d=new a({initialize:function MoveTo(t,i){this.active=!1,this.p0=new u(t,i)},getPoint:function getPoint(t,i){return void 0===i&&(i=new u),i.copy(this.p0)},getPointAt:function getPointAt(t,i){return this.getPoint(t,i)},getResolution:function getResolution(){return 1},getLength:function getLength(){return 0},toJSON:function toJSON(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});t.exports=d},function(t,i,o){var a=o(0),u=o(94),d=o(359),b=o(3),S=new a({Extends:u,initialize:function QuadraticBezier(t,i,o){u.call(this,"QuadraticBezier"),Array.isArray(t)&&(o=new b(t[4],t[5]),i=new b(t[2],t[3]),t=new b(t[0],t[1])),this.p0=t,this.p1=i,this.p2=o},getStartPoint:function getStartPoint(t){return void 0===t&&(t=new b),t.copy(this.p0)},getResolution:function getResolution(t){return t},getPoint:function getPoint(t,i){void 0===i&&(i=new b);var o=this.p0,a=this.p1,u=this.p2;return i.set(d(t,o.x,a.x,u.x),d(t,o.y,a.y,u.y))},draw:function draw(t,i){void 0===i&&(i=32);var o=this.getPoints(i);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var a=1;a<o.length;a++)t.lineTo(o[a].x,o[a].y);return t.strokePath(),t},toJSON:function toJSON(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});S.fromJSON=function(t){var i=t.points,o=new b(i[0],i[1]),a=new b(i[2],i[3]),u=new b(i[4],i[5]);return new S(o,a,u)},t.exports=S},function(t,i,o){var a=o(194),u=o(0),d=o(94),b=o(3),S=new u({Extends:d,initialize:function SplineCurve(t){void 0===t&&(t=[]),d.call(this,"SplineCurve"),this.points=[],this.addPoints(t)},addPoints:function addPoints(t){for(var i=0;i<t.length;i++){var o=new b;"number"==typeof t[i]?(o.x=t[i],o.y=t[i+1],i++):Array.isArray(t[i])?(o.x=t[i][0],o.y=t[i][1]):(o.x=t[i].x,o.y=t[i].y),this.points.push(o)}return this},addPoint:function addPoint(t,i){var o=new b(t,i);return this.points.push(o),o},getStartPoint:function getStartPoint(t){return void 0===t&&(t=new b),t.copy(this.points[0])},getResolution:function getResolution(t){return t*this.points.length},getPoint:function getPoint(t,i){void 0===i&&(i=new b);var o=this.points,u=(o.length-1)*t,d=Math.floor(u),S=u-d,C=o[0===d?d:d-1],M=o[d],P=o[d>o.length-2?o.length-1:d+1],R=o[d>o.length-3?o.length-1:d+2];return i.set(a(S,C.x,M.x,P.x,R.x),a(S,C.y,M.y,P.y,R.y))},toJSON:function toJSON(){for(var t=[],i=0;i<this.points.length;i++)t.push(this.points[i].x),t.push(this.points[i].y);return{type:this.type,points:t}}});S.fromJSON=function(t){return new S(t.points)},t.exports=S},function(t,i,o){var a=new(o(0))({initialize:function BaseShader(t,i,o,a){i&&""!==i||(i=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join("\n")),o&&""!==o||(o=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join("\n")),void 0===a&&(a=null),this.key=t,this.fragmentSrc=i,this.vertexSrc=o,this.uniforms=a}});t.exports=a},function(t,i,o){var a=o(38);a.ColorSpectrum=o(909),a.ColorToRGBA=o(910),a.ComponentToHex=o(398),a.GetColor=o(103),a.GetColor32=o(328),a.HexStringToColor=o(327),a.HSLToColor=o(911),a.HSVColorWheel=o(912),a.HSVToRGB=o(188),a.HueToComponent=o(399),a.IntegerToColor=o(189),a.IntegerToRGB=o(330),a.Interpolate=o(913),a.ObjectToColor=o(331),a.RandomRGB=o(914),a.RGBStringToColor=o(332),a.RGBToHSV=o(329),a.RGBToString=o(915),a.ValueToColor=o(187),t.exports=a},function(t,i){t.exports=function ComponentToHex(t){var i=t.toString(16);return 1===i.length?"0"+i:i}},function(t,i){t.exports=function HueToComponent(t,i,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?t+6*(i-t)*o:o<.5?i:o<2/3?t+(i-t)*(2/3-o)*6:t}},function(t,i,o){var a=o(105);t.exports=function DOMContentLoaded(t){if("complete"!==document.readyState&&"interactive"!==document.readyState){var i=function check(){document.removeEventListener("deviceready",check,!0),document.removeEventListener("DOMContentLoaded",check,!0),window.removeEventListener("load",check,!0),t()};document.body?a.cordova?document.addEventListener("deviceready",i,!1):(document.addEventListener("DOMContentLoaded",i,!0),window.addEventListener("load",i,!0)):window.setTimeout(i,20)}else t()}},function(t,i){t.exports=function GetInnerHeight(t){if(!t)return window.innerHeight;var i=Math.abs(window.orientation),o={w:0,h:0},a=document.createElement("div");return a.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(a),o.w=90===i?a.offsetHeight:window.innerWidth,o.h=90===i?window.innerWidth:a.offsetHeight,document.documentElement.removeChild(a),a=null,90!==Math.abs(window.orientation)?o.h:o.w}},function(t,i,o){var a=o(201);t.exports=function GetScreenOrientation(t,i){var o=window.screen,u=!!o&&(o.orientation||o.mozOrientation||o.msOrientation);return u&&"string"==typeof u.type?u.type:"string"==typeof u?u:"number"==typeof window.orientation?0===window.orientation||180===window.orientation?a.ORIENTATION.PORTRAIT:a.ORIENTATION.LANDSCAPE:window.matchMedia?window.matchMedia("(orientation: portrait)").matches?a.ORIENTATION.PORTRAIT:window.matchMedia("(orientation: landscape)").matches?a.ORIENTATION.LANDSCAPE:void 0:i>t?a.ORIENTATION.PORTRAIT:a.ORIENTATION.LANDSCAPE}},function(t,i){t.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(t,i){t.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(t,i){t.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(t,i){t.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(t,i){t.exports=function GetTarget(t){var i;return""!==t&&("string"==typeof t?i=document.getElementById(t):t&&1===t.nodeType&&(i=t)),i||(i=document.body),i}},function(t,i){t.exports=function ParseXML(t){var i="";try{window.DOMParser?i=(new DOMParser).parseFromString(t,"text/xml"):(i=new ActiveXObject("Microsoft.XMLDOM")).loadXML(t)}catch(o){i=null}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length?i:null}},function(t,i,o){var a=o(0),u=o(203),d=o(9),b=o(51),S=o(22),C=o(410),M=o(411),P=o(412),R=o(413),O=o(25),B=o(177),N=new a({initialize:function InputManager(t,i){this.game=t,this.scaleManager,this.canvas,this.config=i,this.enabled=!0,this.events=new d,this.isOver=!0,this.defaultCursor="",this.keyboard=i.inputKeyboard?new C(this):null,this.mouse=i.inputMouse?new M(this):null,this.touch=i.inputTouch?new R(this):null,this.pointers=[],this.pointersTotal=i.inputActivePointers,i.inputTouch&&1===this.pointersTotal&&(this.pointersTotal=2);for(var o=0;o<=this.pointersTotal;o++){var a=new P(this,o);a.smoothFactor=i.inputSmoothFactor,this.pointers.push(a)}this.mousePointer=i.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new O,this._tempMatrix2=new O,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],t.events.once(S.BOOT,this.boot,this)},boot:function boot(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(b.MANAGER_BOOT),this.game.events.on(S.PRE_RENDER,this.preRender,this),this.game.events.once(S.DESTROY,this.destroy,this)},setCanvasOver:function setCanvasOver(t){this.isOver=!0,this.events.emit(b.GAME_OVER,t)},setCanvasOut:function setCanvasOut(t){this.isOver=!1,this.events.emit(b.GAME_OUT,t)},preRender:function preRender(){var t=this.game.loop.now,i=this.game.loop.delta,o=this.game.scene.getScenes(!0,!0);this.time=t,this.events.emit(b.MANAGER_UPDATE);for(var a=0;a<o.length;a++){var u=o[a];if(u.sys.input&&u.sys.input.updatePoll(t,i)&&this.globalTopOnly)return}},setDefaultCursor:function setDefaultCursor(t){this.defaultCursor=t,this.canvas.style.cursor!==t&&(this.canvas.style.cursor=t)},setCursor:function setCursor(t){t.cursor&&(this.canvas.style.cursor=t.cursor)},resetCursor:function resetCursor(t){t.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function addPointer(t){void 0===t&&(t=1);var i=[];this.pointersTotal+t>10&&(t=10-this.pointersTotal);for(var o=0;o<t;o++){var a=this.pointers.length,u=new P(this,a);u.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(u),this.pointersTotal++,i.push(u)}return i},updateInputPlugins:function updateInputPlugins(t,i){var o=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var a=0;a<o.length;a++){var u=o[a];if(u.sys.input&&(u.sys.input.update(t,i)&&this.globalTopOnly||this._tempSkip))return}},onTouchStart:function onTouchStart(t){for(var i=this.pointers,o=[],a=0;a<t.changedTouches.length;a++)for(var d=t.changedTouches[a],b=1;b<this.pointersTotal;b++){var S=i[b];if(!S.active){S.touchstart(d,t),this.activePointer=S,o.push(S);break}}this.updateInputPlugins(u.TOUCH_START,o)},onTouchMove:function onTouchMove(t){for(var i=this.pointers,o=[],a=0;a<t.changedTouches.length;a++)for(var d=t.changedTouches[a],b=1;b<this.pointersTotal;b++){var S=i[b];if(S.active&&S.identifier===d.identifier){S.touchmove(d,t),this.activePointer=S,o.push(S);break}}this.updateInputPlugins(u.TOUCH_MOVE,o)},onTouchEnd:function onTouchEnd(t){for(var i=this.pointers,o=[],a=0;a<t.changedTouches.length;a++)for(var d=t.changedTouches[a],b=1;b<this.pointersTotal;b++){var S=i[b];if(S.active&&S.identifier===d.identifier){S.touchend(d,t),o.push(S);break}}this.updateInputPlugins(u.TOUCH_END,o)},onTouchCancel:function onTouchCancel(t){for(var i=this.pointers,o=[],a=0;a<t.changedTouches.length;a++)for(var d=t.changedTouches[a],b=1;b<this.pointersTotal;b++){var S=i[b];if(S.active&&S.identifier===d.identifier){S.touchcancel(d,t),o.push(S);break}}this.updateInputPlugins(u.TOUCH_CANCEL,o)},onMouseDown:function onMouseDown(t){var i=this.mousePointer;i.down(t),i.updateMotion(),this.activePointer=i,this.updateInputPlugins(u.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function onMouseMove(t){var i=this.mousePointer;i.move(t),i.updateMotion(),this.activePointer=i,this.updateInputPlugins(u.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function onMouseUp(t){var i=this.mousePointer;i.up(t),i.updateMotion(),this.activePointer=i,this.updateInputPlugins(u.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function onMouseWheel(t){var i=this.mousePointer;i.wheel(t),this.activePointer=i,this.updateInputPlugins(u.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function onPointerLockChange(t){var i=this.mouse.locked;this.mousePointer.locked=i,this.events.emit(b.POINTERLOCK_CHANGE,t,i)},inputCandidate:function inputCandidate(t,i){var o=t.input;if(!o||!o.enabled||!o.alwaysEnabled&&!t.willRender(i))return!1;var a=!0,u=t.parentContainer;if(u)do{if(!u.willRender(i)){a=!1;break}u=u.parentContainer}while(u);return a},hitTest:function hitTest(t,i,o,a){void 0===a&&(a=this._tempHitTest);var u=this._tempPoint,d=o.scrollX,b=o.scrollY;a.length=0;var S=t.x,C=t.y;o.getWorldPoint(S,C,u),t.worldX=u.x,t.worldY=u.y;for(var M={x:0,y:0},P=this._tempMatrix,R=this._tempMatrix2,O=0;O<i.length;O++){var N=i[O];if(this.inputCandidate(N,o)){var Y=u.x+d*N.scrollFactorX-d,G=u.y+b*N.scrollFactorY-b;N.parentContainer?(N.getWorldTransformMatrix(P,R),P.applyInverse(Y,G,M)):B(Y,G,N.x,N.y,N.rotation,N.scaleX,N.scaleY,M),this.pointWithinHitArea(N,M.x,M.y)&&a.push(N)}}return a},pointWithinHitArea:function pointWithinHitArea(t,i,o){i+=t.displayOriginX,o+=t.displayOriginY;var a=t.input;return!(!a||!a.hitAreaCallback(a.hitArea,i,o,t)||(a.localX=i,a.localY=o,0))},pointWithinInteractiveObject:function pointWithinInteractiveObject(t,i,o){return!!t.hitArea&&(i+=t.gameObject.displayOriginX,o+=t.gameObject.displayOriginY,t.localX=i,t.localY=o,t.hitAreaCallback(t.hitArea,i,o,t))},transformPointer:function transformPointer(t,i,o,a){var u=t.position,d=t.prevPosition;d.x=u.x,d.y=u.y;var b=this.scaleManager.transformX(i),S=this.scaleManager.transformY(o),C=t.smoothFactor;a&&0!==C?(u.x=b*C+d.x*(1-C),u.y=S*C+d.y*(1-C)):(u.x=b,u.y=S)},destroy:function destroy(){this.events.removeAllListeners(),this.game.events.off(S.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var t=0;t<this.pointers.length;t++)this.pointers[t].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});t.exports=N},function(t,i,o){var a=o(93),u=o(0),d=o(22),b=o(51),S=o(143),C=o(1),M=new u({initialize:function KeyboardManager(t){this.manager=t,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=C,this.onKeyUp=C,t.events.once(b.MANAGER_BOOT,this.boot,this)},boot:function boot(){var t=this.manager.config;this.enabled=t.inputKeyboard,this.target=t.inputKeyboardEventTarget,this.addCapture(t.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(d.POST_STEP,this.postUpdate,this)},startListeners:function startListeners(){var t=this;this.onKeyDown=function(i){if(!i.defaultPrevented&&t.enabled&&t.manager){t.queue.push(i),t.manager.events.emit(b.MANAGER_PROCESS);var o=i.altKey||i.ctrlKey||i.shiftKey||i.metaKey;t.preventDefault&&!o&&t.captures.indexOf(i.keyCode)>-1&&i.preventDefault()}},this.onKeyUp=function(i){if(!i.defaultPrevented&&t.enabled&&t.manager){t.queue.push(i),t.manager.events.emit(b.MANAGER_PROCESS);var o=i.altKey||i.ctrlKey||i.shiftKey||i.metaKey;t.preventDefault&&!o&&t.captures.indexOf(i.keyCode)>-1&&i.preventDefault()}};var i=this.target;i&&(i.addEventListener("keydown",this.onKeyDown,!1),i.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function stopListeners(){var t=this.target;t.removeEventListener("keydown",this.onKeyDown,!1),t.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function postUpdate(){this.queue=[]},addCapture:function addCapture(t){"string"==typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]);for(var i=this.captures,o=0;o<t.length;o++){var a=t[o];"string"==typeof a&&(a=S[a.trim().toUpperCase()]),-1===i.indexOf(a)&&i.push(a)}this.preventDefault=i.length>0},removeCapture:function removeCapture(t){"string"==typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]);for(var i=this.captures,o=0;o<t.length;o++){var u=t[o];"string"==typeof u&&(u=S[u.toUpperCase()]),a(i,u)}this.preventDefault=i.length>0},clearCaptures:function clearCaptures(){this.captures=[],this.preventDefault=!1},destroy:function destroy(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(d.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});t.exports=M},function(t,i,o){var a=o(0),u=o(191),d=o(51),b=o(1),S=new a({initialize:function MouseManager(t){this.manager=t,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=b,this.onMouseDown=b,this.onMouseUp=b,this.onMouseDownWindow=b,this.onMouseUpWindow=b,this.onMouseOver=b,this.onMouseOut=b,this.onMouseWheel=b,this.pointerLockChange=b,this.isTop=!0,t.events.once(d.MANAGER_BOOT,this.boot,this)},boot:function boot(){var t=this.manager.config;this.enabled=t.inputMouse,this.target=t.inputMouseEventTarget,this.passive=t.inputMousePassive,this.preventDefaultDown=t.inputMousePreventDefaultDown,this.preventDefaultUp=t.inputMousePreventDefaultUp,this.preventDefaultMove=t.inputMousePreventDefaultMove,this.preventDefaultWheel=t.inputMousePreventDefaultWheel,this.target?"string"==typeof this.target&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,t.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function disableContextMenu(){return document.body.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),this},requestPointerLock:function requestPointerLock(){if(u.pointerLock){var t=this.target;t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock()}},releasePointerLock:function releasePointerLock(){u.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function startListeners(){var t=this.target;if(t){var i=this,o=this.manager,a=o.canvas,d=window&&window.focus&&o.game.config.autoFocus;this.onMouseMove=function(t){!t.defaultPrevented&&i.enabled&&o&&o.enabled&&(o.onMouseMove(t),i.preventDefaultMove&&t.preventDefault())},this.onMouseDown=function(t){d&&window.focus(),!t.defaultPrevented&&i.enabled&&o&&o.enabled&&(o.onMouseDown(t),i.preventDefaultDown&&t.target===a&&t.preventDefault())},this.onMouseDownWindow=function(t){!t.defaultPrevented&&i.enabled&&o&&o.enabled&&t.target!==a&&o.onMouseDown(t)},this.onMouseUp=function(t){!t.defaultPrevented&&i.enabled&&o&&o.enabled&&(o.onMouseUp(t),i.preventDefaultUp&&t.target===a&&t.preventDefault())},this.onMouseUpWindow=function(t){!t.defaultPrevented&&i.enabled&&o&&o.enabled&&t.target!==a&&o.onMouseUp(t)},this.onMouseOver=function(t){!t.defaultPrevented&&i.enabled&&o&&o.enabled&&o.setCanvasOver(t)},this.onMouseOut=function(t){!t.defaultPrevented&&i.enabled&&o&&o.enabled&&o.setCanvasOut(t)},this.onMouseWheel=function(t){!t.defaultPrevented&&i.enabled&&o&&o.enabled&&o.onMouseWheel(t),i.preventDefaultWheel&&t.target===a&&t.preventDefault()};var b={passive:!0};if(t.addEventListener("mousemove",this.onMouseMove),t.addEventListener("mousedown",this.onMouseDown),t.addEventListener("mouseup",this.onMouseUp),t.addEventListener("mouseover",this.onMouseOver,b),t.addEventListener("mouseout",this.onMouseOut,b),this.preventDefaultWheel?t.addEventListener("wheel",this.onMouseWheel,{passive:!1}):t.addEventListener("wheel",this.onMouseWheel,b),window&&o.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,b),window.top.addEventListener("mouseup",this.onMouseUpWindow,b)}catch(S){window.addEventListener("mousedown",this.onMouseDownWindow,b),window.addEventListener("mouseup",this.onMouseUpWindow,b),this.isTop=!1}u.pointerLock&&(this.pointerLockChange=function(t){var a=i.target;i.locked=document.pointerLockElement===a||document.mozPointerLockElement===a||document.webkitPointerLockElement===a,o.onPointerLockChange(t)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function stopListeners(){var t=this.target;t.removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("mouseover",this.onMouseOver),t.removeEventListener("mouseout",this.onMouseOut),window&&((t=this.isTop?window.top:window).removeEventListener("mousedown",this.onMouseDownWindow),t.removeEventListener("mouseup",this.onMouseUpWindow)),u.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function destroy(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=S},function(t,i,o){var a=o(349),u=o(0),d=o(50),b=o(124),S=o(360),C=o(3),M=o(105),P=new u({initialize:function Pointer(t,i){this.manager=t,this.id=i,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new C,this.prevPosition=new C,this.midPoint=new C(-1,-1),this.velocity=new C,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=0===i,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function updateWorldPoint(t){var i=t.getWorldPoint(this.x,this.y);return this.worldX=i.x,this.worldY=i.y,this},positionToCamera:function positionToCamera(t,i){return t.getWorldPoint(this.x,this.y,i)},updateMotion:function updateMotion(){var t=this.position.x,i=this.position.y,o=this.midPoint.x,u=this.midPoint.y;if(t!==o||i!==u){var d=S(this.motionFactor,o,t),C=S(this.motionFactor,u,i);b(d,t,.1)&&(d=t),b(C,i,.1)&&(C=i),this.midPoint.set(d,C);var M=t-d,P=i-C;this.velocity.set(M,P),this.angle=a(d,C,t,i),this.distance=Math.sqrt(M*M+P*P)}},up:function up(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),0===this.buttons&&(this.isDown=!1,this.upTime=t.timeStamp,this.wasTouch=!1)},down:function down(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),M.macOS&&t.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=t.timeStamp),this.wasTouch=!1},move:function move(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.locked&&(this.movementX=t.movementX||t.mozMovementX||t.webkitMovementX||0,this.movementY=t.movementY||t.mozMovementY||t.webkitMovementY||0),this.moveTime=t.timeStamp,this.wasTouch=!1},wheel:function wheel(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.deltaX=t.deltaX,this.deltaY=t.deltaY,this.deltaZ=t.deltaZ,this.wasTouch=!1},touchstart:function touchstart(t,i){t.pointerId&&(this.pointerId=t.pointerId),this.identifier=t.identifier,this.target=t.target,this.active=!0,this.buttons=1,this.event=i,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=i.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function touchmove(t,i){this.event=i,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.moveTime=i.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function touchend(t,i){this.buttons=0,this.event=i,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=i.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function touchcancel(t,i){this.buttons=0,this.event=i,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=i.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function noButtonDown(){return 0===this.buttons},leftButtonDown:function leftButtonDown(){return!!(1&this.buttons)},rightButtonDown:function rightButtonDown(){return!!(2&this.buttons)},middleButtonDown:function middleButtonDown(){return!!(4&this.buttons)},backButtonDown:function backButtonDown(){return!!(8&this.buttons)},forwardButtonDown:function forwardButtonDown(){return!!(16&this.buttons)},leftButtonReleased:function leftButtonReleased(){return 0===this.button&&!this.isDown},rightButtonReleased:function rightButtonReleased(){return 2===this.button&&!this.isDown},middleButtonReleased:function middleButtonReleased(){return 1===this.button&&!this.isDown},backButtonReleased:function backButtonReleased(){return 3===this.button&&!this.isDown},forwardButtonReleased:function forwardButtonReleased(){return 4===this.button&&!this.isDown},getDistance:function getDistance(){return this.isDown?d(this.downX,this.downY,this.x,this.y):d(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function getDistanceX(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function getDistanceY(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function getDuration(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function getAngle(){return this.isDown?a(this.downX,this.downY,this.x,this.y):a(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function getInterpolatedPosition(t,i){void 0===t&&(t=10),void 0===i&&(i=[]);for(var o=this.prevPosition.x,a=this.prevPosition.y,u=this.position.x,d=this.position.y,b=0;b<t;b++){var C=1/t*b;i[b]={x:S(C,o,u),y:S(C,a,d)}}return i},destroy:function destroy(){this.camera=null,this.manager=null,this.position=null},x:{get:function get(){return this.position.x},set:function set(t){this.position.x=t}},y:{get:function get(){return this.position.y},set:function set(t){this.position.y=t}},time:{get:function get(){return this.event?this.event.timeStamp:0}}});t.exports=P},function(t,i,o){var a=o(0),u=o(51),d=o(1),b=new a({initialize:function TouchManager(t){this.manager=t,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=d,this.onTouchStartWindow=d,this.onTouchMove=d,this.onTouchEnd=d,this.onTouchEndWindow=d,this.onTouchCancel=d,this.onTouchCancelWindow=d,this.onTouchOver=d,this.onTouchOut=d,t.events.once(u.MANAGER_BOOT,this.boot,this)},boot:function boot(){var t=this.manager.config;this.enabled=t.inputTouch,this.target=t.inputTouchEventTarget,this.capture=t.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),t.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function disableContextMenu(){return document.body.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),this},startListeners:function startListeners(){var t=this,i=this.manager.canvas,o=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(a){o&&window.focus(),!a.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchStart(a),t.capture&&a.cancelable&&a.target===i&&a.preventDefault())},this.onTouchStartWindow=function(o){!o.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&o.target!==i&&t.manager.onTouchStart(o)},this.onTouchMove=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchMove(i),t.capture&&i.cancelable&&i.preventDefault())},this.onTouchEnd=function(o){!o.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchEnd(o),t.capture&&o.cancelable&&o.target===i&&o.preventDefault())},this.onTouchEndWindow=function(o){!o.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&o.target!==i&&t.manager.onTouchEnd(o)},this.onTouchCancel=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchCancel(i),t.capture&&i.preventDefault())},this.onTouchCancelWindow=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.onTouchCancel(i)},this.onTouchOver=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOver(i)},this.onTouchOut=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOut(i)};var a=this.target;if(a){var u={passive:!0},d={passive:!1};a.addEventListener("touchstart",this.onTouchStart,this.capture?d:u),a.addEventListener("touchmove",this.onTouchMove,this.capture?d:u),a.addEventListener("touchend",this.onTouchEnd,this.capture?d:u),a.addEventListener("touchcancel",this.onTouchCancel,this.capture?d:u),a.addEventListener("touchover",this.onTouchOver,this.capture?d:u),a.addEventListener("touchout",this.onTouchOut,this.capture?d:u),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,d),window.addEventListener("touchend",this.onTouchEndWindow,d),window.addEventListener("touchcancel",this.onTouchCancelWindow,d)),this.enabled=!0}},stopListeners:function stopListeners(){var t=this.target;t.removeEventListener("touchstart",this.onTouchStart),t.removeEventListener("touchmove",this.onTouchMove),t.removeEventListener("touchend",this.onTouchEnd),t.removeEventListener("touchcancel",this.onTouchCancel),t.removeEventListener("touchover",this.onTouchOver),t.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function destroy(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=b},function(t,i,o){var a=o(0),u=o(22),d=o(9),b=o(8),S=o(16),C=o(5),M=o(2),P=o(24),R=o(93),O=new a({Extends:d,initialize:function PluginManager(t){d.call(this),this.game=t,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],t.isBooted?this.boot():t.events.once(u.BOOT,this.boot,this)},boot:function boot(){var t,i,o,a,d,b,S,C=this.game.config,P=C.installGlobalPlugins;for(P=P.concat(this._pendingGlobal),t=0;t<P.length;t++)i=P[t],o=M(i,"key",null),a=M(i,"plugin",null),d=M(i,"start",!1),b=M(i,"mapping",null),S=M(i,"data",null),o&&(a?this.install(o,a,d,b,S):console.warn("Missing `plugin` for key: "+o));for(P=(P=C.installScenePlugins).concat(this._pendingScene),t=0;t<P.length;t++)i=P[t],o=M(i,"key",null),a=M(i,"plugin",null),b=M(i,"mapping",null),o&&(a?this.installScenePlugin(o,a,b):console.warn("Missing `plugin` for key: "+o));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(u.DESTROY,this.destroy,this)},addToScene:function addToScene(t,i,o){var a,u,d,b=this.game,S=t.scene,C=t.settings.map,M=t.settings.isBooted;for(a=0;a<i.length;a++)b[u=i[a]]?(t[u]=b[u],C.hasOwnProperty(u)&&(S[C[u]]=t[u])):"game"===u&&C.hasOwnProperty(u)&&(S[C[u]]=b);for(var R=0;R<o.length;R++)for(d=o[R],a=0;a<d.length;a++)if(u=d[a],P.hasCore(u)){var O=P.getCore(u),B=O.mapping,N=new O.plugin(S,this,B);t[B]=N,O.custom?S[B]=N:C.hasOwnProperty(B)&&(S[C[B]]=N),M&&N.boot()}for(d=this.plugins,a=0;a<d.length;a++){var Y=d[a];Y.mapping&&(S[Y.mapping]=Y.plugin)}},getDefaultScenePlugins:function getDefaultScenePlugins(){var t=this.game.config.defaultPlugins;return t=t.concat(this.scenePlugins)},installScenePlugin:function installScenePlugin(t,i,o,a,u){if(void 0===u&&(u=!1),"function"==typeof i){if(P.hasCore(t)){if(!u&&P.hasCore(t))return void console.warn("Scene Plugin key in use: "+t)}else P.register(t,i,o,!0),this.scenePlugins.push(t);if(a){var d=new i(a,this,t);a.sys[t]=d,o&&""!==o&&(a[o]=d),d.boot()}}else console.warn("Invalid Scene Plugin: "+t)},install:function install(t,i,o,a,u){if(void 0===o&&(o=!1),void 0===a&&(a=null),void 0===u&&(u=null),"function"!=typeof i)return console.warn("Invalid Plugin: "+t),null;if(P.hasCustom(t))return console.warn("Plugin key in use: "+t),null;if(null!==a&&(o=!0),this.game.isBooted){if(P.registerCustom(t,i,a,u),o)return this.start(t)}else this._pendingGlobal.push({key:t,plugin:i,start:o,mapping:a,data:u});return null},getIndex:function getIndex(t){for(var i=this.plugins,o=0;o<i.length;o++)if(i[o].key===t)return o;return-1},getEntry:function getEntry(t){var i=this.getIndex(t);if(-1!==i)return this.plugins[i]},isActive:function isActive(t){var i=this.getEntry(t);return i&&i.active},start:function start(t,i){void 0===i&&(i=t);var o=this.getEntry(i);return o&&!o.active?(o.active=!0,o.plugin.start()):o||(o=this.createEntry(t,i)),o?o.plugin:null},createEntry:function createEntry(t,i){var o=P.getCustom(t);if(o){var a=new o.plugin(this);o={key:i,plugin:a,active:!0,mapping:o.mapping,data:o.data},this.plugins.push(o),a.init(o.data),a.start()}return o},stop:function stop(t){var i=this.getEntry(t);return i&&i.active&&(i.active=!1,i.plugin.stop()),this},get:function get(t,i){void 0===i&&(i=!0);var o=this.getEntry(t);if(o)return o.plugin;var a=this.getClass(t);return a&&i?(o=this.createEntry(t,t))?o.plugin:null:a||null},getClass:function getClass(t){return P.getCustomClass(t)},removeGlobalPlugin:function removeGlobalPlugin(t){var i=this.getEntry(t);i&&R(this.plugins,i),P.removeCustom(t)},removeScenePlugin:function removeScenePlugin(t){R(this.scenePlugins,t),P.remove(t)},registerGameObject:function registerGameObject(t,i,o){return i&&C.register(t,i),o&&S.register(t,o),this},removeGameObject:function removeGameObject(t,i,o){return void 0===i&&(i=!0),void 0===o&&(o=!0),i&&C.remove(t),o&&S.remove(t),this},registerFileType:function registerFileType(t,i,o){b.register(t,i),o&&o.sys.load&&(o.sys.load[t]=i)},destroy:function destroy(){for(var t=0;t<this.plugins.length;t++)this.plugins[t].plugin.destroy();P.destroyCustomPlugins(),this.game.noReturn&&P.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});t.exports=O},function(t,i,o){var a=o(201),u=o(0),d=o(9),b=o(104),S=o(22),C=o(401),M=o(407),P=o(402),R=o(1),O=o(10),B=o(416),N=o(76),Y=o(3),G=new u({Extends:d,initialize:function ScaleManager(t){d.call(this),this.game=t,this.canvas,this.canvasBounds=new O,this.parent=null,this.parentIsWindow=!1,this.parentSize=new B,this.gameSize=new B,this.baseSize=new B,this.displaySize=new B,this.scaleMode=a.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new Y(1,1),this.autoRound=!1,this.autoCenter=a.CENTER.NO_CENTER,this.orientation=a.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:R,windowResize:R,fullScreenChange:R,fullScreenError:R}},preBoot:function preBoot(){this.parseConfig(this.game.config),this.game.events.once(S.BOOT,this.boot,this)},boot:function boot(){var t=this.game;this.canvas=t.canvas,this.fullscreen=t.device.fullscreen,this.scaleMode!==a.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===a.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),t.events.on(S.PRE_STEP,this.step,this),t.events.once(S.READY,this.refresh,this),t.events.once(S.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function parseConfig(t){this.getParent(t),this.getParentBounds();var i=t.width,o=t.height,u=t.scaleMode,d=t.zoom,b=t.autoRound;if("string"==typeof i){var S=this.parentSize.width;0===S&&(S=window.innerWidth);var C=parseInt(i,10)/100;i=Math.floor(S*C)}if("string"==typeof o){var M=this.parentSize.height;0===M&&(M=window.innerHeight);var R=parseInt(o,10)/100;o=Math.floor(M*R)}this.scaleMode=u,this.autoRound=b,this.autoCenter=t.autoCenter,this.resizeInterval=t.resizeInterval,b&&(i=Math.floor(i),o=Math.floor(o)),this.gameSize.setSize(i,o),d===a.ZOOM.MAX_ZOOM&&(d=this.getMaxZoom()),this.zoom=d,1!==d&&(this._resetZoom=!0),this.baseSize.setSize(i,o),b&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),t.minWidth>0&&this.displaySize.setMin(t.minWidth*d,t.minHeight*d),t.maxWidth>0&&this.displaySize.setMax(t.maxWidth*d,t.maxHeight*d),this.displaySize.setSize(i,o),this.orientation=P(i,o)},getParent:function getParent(t){var i=t.parent;if(null!==i){if(this.parent=M(i),this.parentIsWindow=this.parent===document.body,t.expandParent&&t.scaleMode!==a.SCALE_MODE.NONE){var o=this.parent.getBoundingClientRect();(this.parentIsWindow||0===o.height)&&(document.documentElement.style.height="100%",document.body.style.height="100%",o=this.parent.getBoundingClientRect(),this.parentIsWindow||0!==o.height||(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}t.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=M(t.fullscreenTarget))}},getParentBounds:function getParentBounds(){if(!this.parent)return!1;var t=this.parentSize,i=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(i.height=C(!0));var o=i.width,a=i.height;return(t.width!==o||t.height!==a)&&(t.setSize(o,a),!0)},lockOrientation:function lockOrientation(t){var i=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return!!i&&i.call(screen,t)},setParentSize:function setParentSize(t,i){return this.parentSize.setSize(t,i),this.refresh()},setGameSize:function setGameSize(t,i){var o=this.autoRound;o&&(t=Math.floor(t),i=Math.floor(i));var a=this.width,u=this.height;return this.gameSize.resize(t,i),this.baseSize.resize(t,i),o&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(t/i),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(a,u)},resize:function resize(t,i){var o=this.zoom,a=this.autoRound;a&&(t=Math.floor(t),i=Math.floor(i));var u=this.width,d=this.height;this.gameSize.resize(t,i),this.baseSize.resize(t,i),a&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(t*o,i*o),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var b=this.canvas.style,S=t*o,C=i*o;return a&&(S=Math.floor(S),C=Math.floor(C)),S===t&&C===i||(b.width=S+"px",b.height=C+"px"),this.refresh(u,d)},setZoom:function setZoom(t){return this.zoom=t,this._resetZoom=!0,this.refresh()},setMaxZoom:function setMaxZoom(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function refresh(t,i){void 0===t&&(t=this.width),void 0===i&&(i=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var o=this.game.domContainer;if(o){this.baseSize.setCSS(o);var a=this.canvas.style,u=o.style;u.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",u.marginLeft=a.marginLeft,u.marginTop=a.marginTop}return this.emit(b.RESIZE,this.gameSize,this.baseSize,this.displaySize,t,i),this},updateOrientation:function updateOrientation(){if(this._checkOrientation){this._checkOrientation=!1;var t=P(this.width,this.height);t!==this.orientation&&(this.orientation=t,this.emit(b.ORIENTATION_CHANGE,t))}},updateScale:function updateScale(){var t,i,o=this.canvas.style,u=this.gameSize.width,d=this.gameSize.height,b=this.zoom,S=this.autoRound;this.scaleMode===a.SCALE_MODE.NONE?(this.displaySize.setSize(u*b,d*b),t=this.displaySize.width,i=this.displaySize.height,S&&(t=Math.floor(t),i=Math.floor(i)),this._resetZoom&&(o.width=t+"px",o.height=i+"px",this._resetZoom=!1)):this.scaleMode===a.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),t=this.displaySize.width,i=this.displaySize.height,S&&(t=Math.floor(t),i=Math.floor(i)),this.canvas.width=t,this.canvas.height=i):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),t=this.displaySize.width,i=this.displaySize.height,S&&(t=Math.floor(t),i=Math.floor(i)),o.width=t+"px",o.height=i+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function getMaxZoom(){var t=N(this.parentSize.width,this.gameSize.width,0,!0),i=N(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(t,i),1)},updateCenter:function updateCenter(){var t=this.autoCenter;if(t!==a.CENTER.NO_CENTER){var i=this.canvas,o=i.style,u=i.getBoundingClientRect(),d=u.width,b=u.height,S=Math.floor((this.parentSize.width-d)/2),C=Math.floor((this.parentSize.height-b)/2);t===a.CENTER.CENTER_HORIZONTALLY?C=0:t===a.CENTER.CENTER_VERTICALLY&&(S=0),o.marginLeft=S+"px",o.marginTop=C+"px"}},updateBounds:function updateBounds(){var t=this.canvasBounds,i=this.canvas.getBoundingClientRect();t.x=i.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),t.y=i.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),t.width=i.width,t.height=i.height},transformX:function transformX(t){return(t-this.canvasBounds.left)*this.displayScale.x},transformY:function transformY(t){return(t-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function startFullscreen(t){void 0===t&&(t={navigationUI:"hide"});var i=this.fullscreen;if(i.available){if(!i.active){var o=this.getFullscreenTarget();i.keyboard?o[i.request](Element.ALLOW_KEYBOARD_INPUT):o[i.request](t)}}else this.emit(b.FULLSCREEN_UNSUPPORTED)},fullscreenSuccessHandler:function fullscreenSuccessHandler(){this.getParentBounds(),this.refresh(),this.emit(b.ENTER_FULLSCREEN)},fullscreenErrorHandler:function fullscreenErrorHandler(t){this.removeFullscreenTarget(),this.emit(b.FULLSCREEN_FAILED,t)},getFullscreenTarget:function getFullscreenTarget(){if(!this.fullscreenTarget){var t=document.createElement("div");t.style.margin="0",t.style.padding="0",t.style.width="100%",t.style.height="100%",this.fullscreenTarget=t,this._createdFullscreenTarget=!0}return this._createdFullscreenTarget&&(this.canvas.parentNode.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)),this.fullscreenTarget},removeFullscreenTarget:function removeFullscreenTarget(){if(this._createdFullscreenTarget){var t=this.fullscreenTarget;if(t&&t.parentNode){var i=t.parentNode;i.insertBefore(this.canvas,t),i.removeChild(t)}}},stopFullscreen:function stopFullscreen(){var t=this.fullscreen;if(!t.available)return this.emit(b.FULLSCREEN_UNSUPPORTED),!1;t.active&&document[t.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(b.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function toggleFullscreen(t){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(t)},startListeners:function startListeners(){var t=this,i=this.listeners;i.orientationChange=function(){t.updateBounds(),t._checkOrientation=!0,t.dirty=!0},i.windowResize=function(){t.updateBounds(),t.dirty=!0},window.addEventListener("orientationchange",i.orientationChange,!1),window.addEventListener("resize",i.windowResize,!1),this.fullscreen.available&&(i.fullScreenChange=function(i){return t.onFullScreenChange(i)},i.fullScreenError=function(i){return t.onFullScreenError(i)},["webkit","moz",""].forEach((function(t){document.addEventListener(t+"fullscreenchange",i.fullScreenChange,!1),document.addEventListener(t+"fullscreenerror",i.fullScreenError,!1)})),document.addEventListener("MSFullscreenChange",i.fullScreenChange,!1),document.addEventListener("MSFullscreenError",i.fullScreenError,!1))},onFullScreenChange:function onFullScreenChange(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function onFullScreenError(){this.removeFullscreenTarget()},step:function step(t,i){this.parent&&(this._lastCheck+=i,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function stopListeners(){var t=this.listeners;window.removeEventListener("orientationchange",t.orientationChange,!1),window.removeEventListener("resize",t.windowResize,!1),["webkit","moz",""].forEach((function(i){document.removeEventListener(i+"fullscreenchange",t.fullScreenChange,!1),document.removeEventListener(i+"fullscreenerror",t.fullScreenError,!1)})),document.removeEventListener("MSFullscreenChange",t.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",t.fullScreenError,!1)},destroy:function destroy(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function get(){return this.fullscreen.active}},width:{get:function get(){return this.gameSize.width}},height:{get:function get(){return this.gameSize.height}},isPortrait:{get:function get(){return this.orientation===a.ORIENTATION.PORTRAIT}},isLandscape:{get:function get(){return this.orientation===a.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function get(){return this.height>this.width}},isGameLandscape:{get:function get(){return this.width>this.height}}});t.exports=G},function(t,i,o){var a=o(18),u=o(0),d=o(76),b=o(3),S=new u({initialize:function Size(t,i,o,a){void 0===t&&(t=0),void 0===i&&(i=t),void 0===o&&(o=0),void 0===a&&(a=null),this._width=t,this._height=i,this._parent=a,this.aspectMode=o,this.aspectRatio=0===i?1:t/i,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new b},setAspectMode:function setAspectMode(t){return void 0===t&&(t=0),this.aspectMode=t,this.setSize(this._width,this._height)},setSnap:function setSnap(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.snapTo.set(t,i),this.setSize(this._width,this._height)},setParent:function setParent(t){return this._parent=t,this.setSize(this._width,this._height)},setMin:function setMin(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.minWidth=a(t,0,this.maxWidth),this.minHeight=a(i,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function setMax(t,i){return void 0===t&&(t=Number.MAX_VALUE),void 0===i&&(i=t),this.maxWidth=a(t,this.minWidth,Number.MAX_VALUE),this.maxHeight=a(i,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function setSize(t,i){switch(void 0===t&&(t=0),void 0===i&&(i=t),this.aspectMode){case S.NONE:this._width=this.getNewWidth(d(t,this.snapTo.x)),this._height=this.getNewHeight(d(i,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height;break;case S.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(d(t,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case S.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(d(i,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case S.FIT:this.constrain(t,i,!0);break;case S.ENVELOP:this.constrain(t,i,!1)}return this},setAspectRatio:function setAspectRatio(t){return this.aspectRatio=t,this.setSize(this._width,this._height)},resize:function resize(t,i){return this._width=this.getNewWidth(d(t,this.snapTo.x)),this._height=this.getNewHeight(d(i,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height,this},getNewWidth:function getNewWidth(t,i){return void 0===i&&(i=!0),t=a(t,this.minWidth,this.maxWidth),i&&this._parent&&t>this._parent.width&&(t=Math.max(this.minWidth,this._parent.width)),t},getNewHeight:function getNewHeight(t,i){return void 0===i&&(i=!0),t=a(t,this.minHeight,this.maxHeight),i&&this._parent&&t>this._parent.height&&(t=Math.max(this.minHeight,this._parent.height)),t},constrain:function constrain(t,i,o){void 0===t&&(t=0),void 0===i&&(i=t),void 0===o&&(o=!0),t=this.getNewWidth(t),i=this.getNewHeight(i);var a=this.snapTo,u=0===i?1:t/i;return o&&this.aspectRatio>u||!o&&this.aspectRatio<u?(i=(t=d(t,a.x))/this.aspectRatio,a.y>0&&(t=(i=d(i,a.y))*this.aspectRatio)):(o&&this.aspectRatio<u||!o&&this.aspectRatio>u)&&(t=(i=d(i,a.y))*this.aspectRatio,a.x>0&&(i=(t=d(t,a.x))*(1/this.aspectRatio))),this._width=t,this._height=i,this},fitTo:function fitTo(t,i){return this.constrain(t,i,!0)},envelop:function envelop(t,i){return this.constrain(t,i,!1)},setWidth:function setWidth(t){return this.setSize(t,this._height)},setHeight:function setHeight(t){return this.setSize(this._width,t)},toString:function toString(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function setCSS(t){t&&t.style&&(t.style.width=this._width+"px",t.style.height=this._height+"px")},copy:function copy(t){return t.setAspectMode(this.aspectMode),t.aspectRatio=this.aspectRatio,t.setSize(this.width,this.height)},destroy:function destroy(){this._parent=null,this.snapTo=null},width:{get:function get(){return this._width},set:function set(t){this.setSize(t,this._height)}},height:{get:function get(){return this._height},set:function set(t){this.setSize(this._width,t)}}});S.NONE=0,S.WIDTH_CONTROLS_HEIGHT=1,S.HEIGHT_CONTROLS_WIDTH=2,S.FIT=3,S.ENVELOP=4,t.exports=S},function(t,i,o){var a=o(0),u=o(144),d=o(20),b=o(22),S=o(6),C=o(95),M=o(1),P=o(418),R=o(204),O=new a({initialize:function SceneManager(t,i){if(this.game=t,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,i){Array.isArray(i)||(i=[i]);for(var o=0;o<i.length;o++)this._pending.push({key:"default",scene:i[o],autoStart:0===o,data:{}})}t.events.once(b.READY,this.bootQueue,this)},bootQueue:function bootQueue(){if(!this.isBooted){var t,i,o,a;for(t=0;t<this._pending.length;t++){var u;o=(i=this._pending[t]).key,(a=i.scene)instanceof P?u=this.createSceneFromInstance(o,a):"object"===_typeof(a)?u=this.createSceneFromObject(o,a):"function"==typeof a&&(u=this.createSceneFromFunction(o,a)),o=u.sys.settings.key,this.keys[o]=u,this.scenes.push(u),this._data[o]&&(u.sys.settings.data=this._data[o].data,this._data[o].autoStart&&(i.autoStart=!0)),(i.autoStart||u.sys.settings.active)&&this._start.push(o)}for(this._pending.length=0,this._data={},this.isBooted=!0,t=0;t<this._start.length;t++)i=this._start[t],this.start(i);this._start.length=0}},processQueue:function processQueue(){var t=this._pending.length,i=this._queue.length;if(0!==t||0!==i){var o,a;if(t){for(o=0;o<t;o++)a=this._pending[o],this.add(a.key,a.scene,a.autoStart,a.data);for(o=0;o<this._start.length;o++)a=this._start[o],this.start(a);return this._start.length=0,void(this._pending.length=0)}for(o=0;o<this._queue.length;o++)this[(a=this._queue[o]).op](a.keyA,a.keyB);this._queue.length=0}},add:function add(t,i,o,a){return void 0===o&&(o=!1),void 0===a&&(a={}),this.isProcessing||!this.isBooted?(this._pending.push({key:t,scene:i,autoStart:o,data:a}),this.isBooted||(this._data[t]={data:a}),null):(t=this.getKey(t,i),i instanceof P?u=this.createSceneFromInstance(t,i):"object"===_typeof(i)?(i.key=t,u=this.createSceneFromObject(t,i)):"function"==typeof i&&(u=this.createSceneFromFunction(t,i)),u.sys.settings.data=a,t=u.sys.settings.key,this.keys[t]=u,this.scenes.push(u),(o||u.sys.settings.active)&&(this._pending.length?this._start.push(t):this.start(t)),u);var u},remove:function remove(t){if(this.isProcessing)this._queue.push({op:"remove",keyA:t,keyB:null});else{var i=this.getScene(t);if(!i||i.sys.isTransitioning())return this;var o=this.scenes.indexOf(i),a=i.sys.settings.key;o>-1&&(delete this.keys[a],this.scenes.splice(o,1),this._start.indexOf(a)>-1&&(o=this._start.indexOf(a),this._start.splice(o,1)),i.sys.destroy())}return this},bootScene:function bootScene(t){var i,o=t.sys,a=o.settings;o.sceneUpdate=M,t.init&&(t.init.call(t,a.data),a.status=u.INIT,a.isTransition&&o.events.emit(d.TRANSITION_INIT,a.transitionFrom,a.transitionDuration)),o.load&&(i=o.load).reset(),i&&t.preload?(t.preload.call(t),0===i.list.size?this.create(t):(a.status=u.LOADING,i.once(C.COMPLETE,this.loadComplete,this),i.start())):this.create(t)},loadComplete:function loadComplete(t){this.create(t.scene)},payloadComplete:function payloadComplete(t){this.bootScene(t.scene)},update:function update(t,i){this.processQueue(),this.isProcessing=!0;for(var o=this.scenes.length-1;o>=0;o--){var a=this.scenes[o].sys;a.settings.status>u.START&&a.settings.status<=u.RUNNING&&a.step(t,i)}},render:function render(t){for(var i=0;i<this.scenes.length;i++){var o=this.scenes[i].sys;o.settings.visible&&o.settings.status>=u.LOADING&&o.settings.status<u.SLEEPING&&o.render(t)}this.isProcessing=!1},create:function create(t){var i=t.sys,o=i.settings;t.create&&(o.status=u.CREATING,t.create.call(t,o.data),o.status===u.DESTROYED)||(o.isTransition&&i.events.emit(d.TRANSITION_START,o.transitionFrom,o.transitionDuration),t.update&&(i.sceneUpdate=t.update),o.status=u.RUNNING,i.events.emit(d.CREATE,t))},createSceneFromFunction:function createSceneFromFunction(t,i){var o=new i;if(o instanceof P){var a=o.sys.settings.key;if(""!==a&&(t=a),this.keys.hasOwnProperty(t))throw new Error("Cannot add a Scene with duplicate key: "+t);return this.createSceneFromInstance(t,o)}return o.sys=new R(o),o.sys.settings.key=t,o.sys.init(this.game),o},createSceneFromInstance:function createSceneFromInstance(t,i){return""===i.sys.settings.key&&(i.sys.settings.key=t),i.sys.init(this.game),i},createSceneFromObject:function createSceneFromObject(t,i){var o=new P(i),a=o.sys.settings.key;""!==a?t=a:o.sys.settings.key=t,o.sys.init(this.game);for(var u=["init","preload","create","update","render"],d=0;d<u.length;d++){var b=S(i,u[d],null);b&&(o[u[d]]=b)}if(i.hasOwnProperty("extend"))for(var C in i.extend)if(i.extend.hasOwnProperty(C)){var M=i.extend[C];"data"===C&&o.hasOwnProperty("data")&&"object"===_typeof(M)?o.data.merge(M):"sys"!==C&&(o[C]=M)}return o},getKey:function getKey(t,i){if(t||(t="default"),"function"==typeof i)return t;if(i instanceof P?t=i.sys.settings.key:"object"===_typeof(i)&&i.hasOwnProperty("key")&&(t=i.key),this.keys.hasOwnProperty(t))throw new Error("Cannot add a Scene with duplicate key: "+t);return t},getScenes:function getScenes(t,i){void 0===t&&(t=!0),void 0===i&&(i=!1);for(var o=[],a=this.scenes,u=0;u<a.length;u++){var d=a[u];d&&(!t||t&&d.sys.isActive())&&o.push(d)}return i?o.reverse():o},getScene:function getScene(t){if("string"==typeof t){if(this.keys[t])return this.keys[t]}else for(var i=0;i<this.scenes.length;i++)if(t===this.scenes[i])return t;return null},isActive:function isActive(t){var i=this.getScene(t);return i?i.sys.isActive():null},isPaused:function isPaused(t){var i=this.getScene(t);return i?i.sys.isPaused():null},isVisible:function isVisible(t){var i=this.getScene(t);return i?i.sys.isVisible():null},isSleeping:function isSleeping(t){var i=this.getScene(t);return i?i.sys.isSleeping():null},pause:function pause(t,i){var o=this.getScene(t);return o&&o.sys.pause(i),this},resume:function resume(t,i){var o=this.getScene(t);return o&&o.sys.resume(i),this},sleep:function sleep(t,i){var o=this.getScene(t);return o&&!o.sys.isTransitioning()&&o.sys.sleep(i),this},wake:function wake(t,i){var o=this.getScene(t);return o&&o.sys.wake(i),this},run:function run(t,i){var o=this.getScene(t);if(!o){for(var a=0;a<this._pending.length;a++)if(this._pending[a].key===t){this.queueOp("start",t,i);break}return this}o.sys.isSleeping()?o.sys.wake(i):o.sys.isPaused()?o.sys.resume(i):this.start(t,i)},start:function start(t,i){if(!this.isBooted)return this._data[t]={autoStart:!0,data:i},this;var o=this.getScene(t);if(o){var a,d=o.sys;if(d.isActive()||d.isPaused())d.shutdown(),d.sceneUpdate=M,d.start(i);else if(d.sceneUpdate=M,d.start(i),d.load&&(a=d.load),a&&d.settings.hasOwnProperty("pack")&&(a.reset(),a.addPack({payload:d.settings.pack})))return d.settings.status=u.LOADING,a.once(C.COMPLETE,this.payloadComplete,this),a.start(),this;this.bootScene(o)}return this},stop:function stop(t,i){var o=this.getScene(t);return o&&!o.sys.isTransitioning()&&o.sys.shutdown(i),this},switch:function _switch(t,i){var o=this.getScene(t),a=this.getScene(i);return o&&a&&o!==a&&(this.sleep(t),this.isSleeping(i)?this.wake(i):this.start(i)),this},getAt:function getAt(t){return this.scenes[t]},getIndex:function getIndex(t){var i=this.getScene(t);return this.scenes.indexOf(i)},bringToTop:function bringToTop(t){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:t,keyB:null});else{var i=this.getIndex(t);if(-1!==i&&i<this.scenes.length){var o=this.getScene(t);this.scenes.splice(i,1),this.scenes.push(o)}}return this},sendToBack:function sendToBack(t){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:t,keyB:null});else{var i=this.getIndex(t);if(-1!==i&&i>0){var o=this.getScene(t);this.scenes.splice(i,1),this.scenes.unshift(o)}}return this},moveDown:function moveDown(t){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:t,keyB:null});else{var i=this.getIndex(t);if(i>0){var o=i-1,a=this.getScene(t),u=this.getAt(o);this.scenes[i]=u,this.scenes[o]=a}}return this},moveUp:function moveUp(t){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:t,keyB:null});else{var i=this.getIndex(t);if(i<this.scenes.length-1){var o=i+1,a=this.getScene(t),u=this.getAt(o);this.scenes[i]=u,this.scenes[o]=a}}return this},moveAbove:function moveAbove(t,i){if(t===i)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:t,keyB:i});else{var o=this.getIndex(t),a=this.getIndex(i);if(-1!==o&&-1!==a){var u=this.getAt(a);this.scenes.splice(a,1),this.scenes.splice(o+1,0,u)}}return this},moveBelow:function moveBelow(t,i){if(t===i)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:t,keyB:i});else{var o=this.getIndex(t),a=this.getIndex(i);if(-1!==o&&-1!==a){var u=this.getAt(a);this.scenes.splice(a,1),0===o?this.scenes.unshift(u):this.scenes.splice(o,0,u)}}return this},queueOp:function queueOp(t,i,o){return this._queue.push({op:t,keyA:i,keyB:o}),this},swapPosition:function swapPosition(t,i){if(t===i)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:t,keyB:i});else{var o=this.getIndex(t),a=this.getIndex(i);if(o!==a&&-1!==o&&-1!==a){var u=this.getAt(o);this.scenes[o]=this.scenes[a],this.scenes[a]=u}}return this},dump:function dump(){for(var t=[],i=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],o=0;o<this.scenes.length;o++){var a=this.scenes[o].sys,d=!a.settings.visible||a.settings.status!==u.RUNNING&&a.settings.status!==u.PAUSED?"[-] ":"[*] ";d+=a.settings.key+" ("+i[a.settings.status]+")",t.push(d)}console.log(t.join("\n"))},destroy:function destroy(){for(var t=0;t<this.scenes.length;t++)this.scenes[t].sys.destroy();this.update=M,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});t.exports=O},function(t,i,o){var a=o(0),u=o(204),d=new a({initialize:function Scene(t){this.sys=new u(this,t),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function update(){}});t.exports=d},function(t,i,o){var a=o(2),u=o(205);t.exports=function GetPhysicsPlugins(t){var i=t.game.config.defaultPhysicsSystem,o=a(t.settings,"physics",!1);if(i||o){var d=[];if(i&&d.push(u(i+"Physics")),o)for(var b in o)b=u(b.concat("Physics")),-1===d.indexOf(b)&&d.push(b);return d}}},function(t,i,o){var a=o(2);t.exports=function GetScenePlugins(t){var i=t.plugins.getDefaultScenePlugins(),o=a(t.settings,"plugins",!1);return Array.isArray(o)?o:i||[]}},function(t,i,o){var a=o(144),u=o(6),d=o(127),b=o(978),S={create:function create(t){return"string"==typeof t?t={key:t}:void 0===t&&(t={}),{status:a.PENDING,key:u(t,"key",""),active:u(t,"active",!1),visible:u(t,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:u(t,"pack",!1),cameras:u(t,"cameras",null),map:u(t,"map",d(b,u(t,"mapAdd",{}))),physics:u(t,"physics",{}),loader:u(t,"loader",{}),plugins:u(t,"plugins",!1),input:u(t,"input",{})}}};t.exports=S},function(t,i,o){var a=o(31),u=o(423),d=o(0),b=o(38),S=o(33),C=o(9),M=o(106),P=o(22),R=o(388),O=o(6),B=o(425),N=o(206),Y=new d({Extends:C,initialize:function TextureManager(t){C.call(this),this.game=t,this.name="TextureManager",this.list={},this._tempCanvas=a.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,t.events.once(P.BOOT,this.boot,this)},boot:function boot(){this._pending=3,this.on(M.LOAD,this.updatePending,this),this.on(M.ERROR,this.updatePending,this);var t=this.game.config;this.addBase64("__DEFAULT",t.defaultImage),this.addBase64("__MISSING",t.missingImage),this.addBase64("__WHITE",t.whiteImage),this.game.events.once(P.DESTROY,this.destroy,this)},updatePending:function updatePending(){this._pending--,0===this._pending&&(this.off(M.LOAD),this.off(M.ERROR),this.emit(M.READY))},checkKey:function checkKey(t){return!this.exists(t)||(console.error("Texture key already in use: "+t),!1)},remove:function remove(t){if("string"==typeof t){if(!this.exists(t))return console.warn("No texture found matching key: "+t),this;t=this.get(t)}return this.list.hasOwnProperty(t.key)&&(t.destroy(),this.emit(M.REMOVE,t.key)),this},removeKey:function removeKey(t){return this.list.hasOwnProperty(t)&&delete this.list[t],this},addBase64:function addBase64(t,i){if(this.checkKey(t)){var o=this,a=new Image;a.onerror=function(){o.emit(M.ERROR,t)},a.onload=function(){var i=o.create(t,a);B.Image(i,0),o.emit(M.ADD,t,i),o.emit(M.LOAD,t,i)},a.src=i}return this},getBase64:function getBase64(t,i,o,u){void 0===o&&(o="image/png"),void 0===u&&(u=.92);var d="",b=this.getFrame(t,i);if(b&&(b.source.isRenderTexture||b.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(b){var S=b.canvasData,C=a.create2D(this,S.width,S.height);C.getContext("2d").drawImage(b.source.image,S.x,S.y,S.width,S.height,0,0,S.width,S.height),d=C.toDataURL(o,u),a.remove(C)}return d},addImage:function addImage(t,i,o){var a=null;return this.checkKey(t)&&(a=this.create(t,i),B.Image(a,0),o&&a.setDataSource(o),this.emit(M.ADD,t,a)),a},addGLTexture:function addGLTexture(t,i,o,a){var u=null;return this.checkKey(t)&&(void 0===o&&(o=i.width),void 0===a&&(a=i.height),(u=this.create(t,i,o,a)).add("__BASE",0,0,0,o,a),this.emit(M.ADD,t,u)),u},addRenderTexture:function addRenderTexture(t,i){var o=null;return this.checkKey(t)&&((o=this.create(t,i)).add("__BASE",0,0,0,i.width,i.height),this.emit(M.ADD,t,o)),o},generate:function generate(t,i){if(this.checkKey(t)){var o=a.create(this,1,1);return i.canvas=o,R(i),this.addCanvas(t,o)}return null},createCanvas:function createCanvas(t,i,o){if(void 0===i&&(i=256),void 0===o&&(o=256),this.checkKey(t)){var u=a.create(this,i,o,S.CANVAS,!0);return this.addCanvas(t,u)}return null},addCanvas:function addCanvas(t,i,o){void 0===o&&(o=!1);var a=null;return o?a=new u(this,t,i,i.width,i.height):this.checkKey(t)&&(a=new u(this,t,i,i.width,i.height),this.list[t]=a,this.emit(M.ADD,t,a)),a},addAtlas:function addAtlas(t,i,o,a){return Array.isArray(o.textures)||Array.isArray(o.frames)?this.addAtlasJSONArray(t,i,o,a):this.addAtlasJSONHash(t,i,o,a)},addAtlasJSONArray:function addAtlasJSONArray(t,i,o,a){var u=null;if(this.checkKey(t)){if(u=this.create(t,i),Array.isArray(o))for(var d=1===o.length,b=0;b<u.source.length;b++){var S=d?o[0]:o[b];B.JSONArray(u,b,S)}else B.JSONArray(u,0,o);a&&u.setDataSource(a),this.emit(M.ADD,t,u)}return u},addAtlasJSONHash:function addAtlasJSONHash(t,i,o,a){var u=null;if(this.checkKey(t)){if(u=this.create(t,i),Array.isArray(o))for(var d=0;d<o.length;d++)B.JSONHash(u,d,o[d]);else B.JSONHash(u,0,o);a&&u.setDataSource(a),this.emit(M.ADD,t,u)}return u},addAtlasXML:function addAtlasXML(t,i,o,a){var u=null;return this.checkKey(t)&&(u=this.create(t,i),B.AtlasXML(u,0,o),a&&u.setDataSource(a),this.emit(M.ADD,t,u)),u},addUnityAtlas:function addUnityAtlas(t,i,o,a){var u=null;return this.checkKey(t)&&(u=this.create(t,i),B.UnityYAML(u,0,o),a&&u.setDataSource(a),this.emit(M.ADD,t,u)),u},addSpriteSheet:function addSpriteSheet(t,i,o){var a=null;if(this.checkKey(t)){var u=(a=this.create(t,i)).source[0].width,d=a.source[0].height;B.SpriteSheet(a,0,0,0,u,d,o),this.emit(M.ADD,t,a)}return a},addSpriteSheetFromAtlas:function addSpriteSheetFromAtlas(t,i){if(!this.checkKey(t))return null;var o=O(i,"atlas",null),a=O(i,"frame",null);if(o&&a){var u=this.get(o).get(a);if(u){var d=this.create(t,u.source.image);return u.trimmed?B.SpriteSheetFromAtlas(d,u,i):B.SpriteSheet(d,0,u.cutX,u.cutY,u.cutWidth,u.cutHeight,i),this.emit(M.ADD,t,d),d}}},create:function create(t,i,o,a){var u=null;return this.checkKey(t)&&(u=new N(this,t,i,o,a),this.list[t]=u),u},exists:function exists(t){return this.list.hasOwnProperty(t)},get:function get(t){return void 0===t&&(t="__DEFAULT"),this.list[t]?this.list[t]:t instanceof N?t:this.list.__MISSING},cloneFrame:function cloneFrame(t,i){if(this.list[t])return this.list[t].get(i).clone()},getFrame:function getFrame(t,i){if(this.list[t])return this.list[t].get(i)},getTextureKeys:function getTextureKeys(){var t=[];for(var i in this.list)"__DEFAULT"!==i&&"__MISSING"!==i&&t.push(i);return t},getPixel:function getPixel(t,i,o,a){var u=this.getFrame(o,a);if(u){t-=u.x,i-=u.y;var d=u.data.cut;if(t+=d.x,i+=d.y,t>=d.x&&t<d.r&&i>=d.y&&i<d.b){var S=this._tempContext;S.clearRect(0,0,1,1),S.drawImage(u.source.image,t,i,1,1,0,0,1,1);var C=S.getImageData(0,0,1,1);return new b(C.data[0],C.data[1],C.data[2],C.data[3])}}return null},getPixelAlpha:function getPixelAlpha(t,i,o,a){var u=this.getFrame(o,a);if(u){t-=u.x,i-=u.y;var d=u.data.cut;if(t+=d.x,i+=d.y,t>=d.x&&t<d.r&&i>=d.y&&i<d.b){var b=this._tempContext;return b.clearRect(0,0,1,1),b.drawImage(u.source.image,t,i,1,1,0,0,1,1),b.getImageData(0,0,1,1).data[3]}}return null},setTexture:function setTexture(t,i,o){return this.list[i]&&(t.texture=this.list[i],t.frame=t.texture.get(o)),t},renameTexture:function renameTexture(t,i){var o=this.get(t);return!(!o||t===i||(o.key=i,this.list[i]=o,delete this.list[t],0))},each:function each(t,i){for(var o=[null],a=1;a<arguments.length;a++)o.push(arguments[a]);for(var u in this.list)o[0]=this.list[u],t.apply(i,o)},destroy:function destroy(){for(var t in this.list)this.list[t].destroy();this.list={},this.game=null,a.remove(this._tempCanvas)}});t.exports=Y},function(t,i,o){var a=o(0),u=o(18),d=o(38),b=o(33),S=o(138),C=o(206),M=new a({Extends:C,initialize:function CanvasTexture(t,i,o,a,u){C.call(this,t,i,o,a,u),this.add("__BASE",0,0,0,a,u),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=a,this.height=u,this.imageData=this.context.getImageData(0,0,a,u),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function update(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===b.WEBGL&&this.refresh(),this},draw:function draw(t,i,o){return this.context.drawImage(o,t,i),this.update()},drawFrame:function drawFrame(t,i,o,a){void 0===o&&(o=0),void 0===a&&(a=0);var u=this.manager.getFrame(t,i);if(u){var d=u.canvasData,b=u.cutWidth,S=u.cutHeight,C=u.source.resolution;return this.context.drawImage(u.source.image,d.x,d.y,b,S,o,a,b/C,S/C),this.update()}return this},setPixel:function setPixel(t,i,o,a,u,d){if(void 0===d&&(d=255),t=Math.abs(Math.floor(t)),i=Math.abs(Math.floor(i)),this.getIndex(t,i)>-1){var b=this.context.getImageData(t,i,1,1);b.data[0]=o,b.data[1]=a,b.data[2]=u,b.data[3]=d,this.context.putImageData(b,t,i)}return this},putData:function putData(t,i,o,a,u,d,b){return void 0===a&&(a=0),void 0===u&&(u=0),void 0===d&&(d=t.width),void 0===b&&(b=t.height),this.context.putImageData(t,i,o,a,u,d,b),this},getData:function getData(t,i,o,a){return t=u(Math.floor(t),0,this.width-1),i=u(Math.floor(i),0,this.height-1),o=u(o,1,this.width-t),a=u(a,1,this.height-i),this.context.getImageData(t,i,o,a)},getPixel:function getPixel(t,i,o){o||(o=new d);var a=this.getIndex(t,i);if(a>-1){var u=this.data,b=u[a+0],S=u[a+1],C=u[a+2],M=u[a+3];o.setTo(b,S,C,M)}return o},getPixels:function getPixels(t,i,o,a){void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=this.width),void 0===a&&(a=o),t=Math.abs(Math.round(t)),i=Math.abs(Math.round(i));for(var b=u(t,0,this.width),S=u(t+o,0,this.width),C=u(i,0,this.height),M=u(i+a,0,this.height),P=new d,R=[],O=C;O<M;O++){for(var B=[],N=b;N<S;N++)P=this.getPixel(N,O,P),B.push({x:N,y:O,color:P.color,alpha:P.alphaGL});R.push(B)}return R},getIndex:function getIndex(t,i){return t=Math.abs(Math.round(t)),i=Math.abs(Math.round(i)),t<this.width&&i<this.height?4*(t+i*this.width):-1},refresh:function refresh(){return this._source.update(),this},getCanvas:function getCanvas(){return this.canvas},getContext:function getContext(){return this.context},clear:function clear(t,i,o,a){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=this.width),void 0===a&&(a=this.height),this.context.clearRect(t,i,o,a),this.update()},setSize:function setSize(t,i){return void 0===i&&(i=t),t===this.width&&i===this.height||(this.canvas.width=t,this.canvas.height=i,this._source.width=t,this._source.height=i,this._source.isPowerOf2=S(t,i),this.frames.__BASE.setSize(t,i,0,0),this.width=t,this.height=i,this.refresh()),this},destroy:function destroy(){C.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});t.exports=M},function(t,i,o){var a=o(31),u=o(0),d=o(138),b=o(168),S=new u({initialize:function TextureSource(t,i,o,a,u){void 0===u&&(u=!1);var S=t.manager.game;this.renderer=S.renderer,this.texture=t,this.source=i,this.image=i,this.compressionAlgorithm=null,this.resolution=1,this.width=o||i.naturalWidth||i.videoWidth||i.width||0,this.height=a||i.naturalHeight||i.videoHeight||i.height||0,this.scaleMode=b.DEFAULT,this.isCanvas=i instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&i instanceof HTMLVideoElement,this.isRenderTexture="RenderTexture"===i.type,this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&i instanceof WebGLTexture,this.isPowerOf2=d(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=u,this.init(S)},init:function init(t){var i=this.renderer;i&&(i.gl?this.isCanvas?this.glTexture=i.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=i.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=i.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=i.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),t.config.antialias||this.setFilter(1)},setFilter:function setFilter(t){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,t),this.scaleMode=t},setFlipY:function setFlipY(t){return void 0===t&&(t=!0),this.flipY=t,this},update:function update(){var t=this.renderer.gl;t&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):t&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function destroy(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&a.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});t.exports=S},function(t,i,o){t.exports={AtlasXML:o(979),Canvas:o(980),Image:o(981),JSONArray:o(982),JSONHash:o(983),SpriteSheet:o(984),SpriteSheetFromAtlas:o(985),UnityYAML:o(986)}},function(t,i,o){var a=o(427),u=o(430),d=o(432),b={create:function create(t){var i=t.config.audio,o=t.device.audio;return i.noAudio||!o.webAudio&&!o.audioData?new u(t):o.webAudio&&!i.disableWebAudio?new d(t):new a(t)}};t.exports=b},function(t,i,o){var a=o(145),u=o(0),d=o(70),b=o(429),S=new u({Extends:a,initialize:function HTML5AudioSoundManager(t){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,a.call(this,t)},add:function add(t,i){var o=new b(this,t,i);return this.sounds.push(o),o},unlock:function unlock(){this.locked=!1;var t=this;if(this.game.cache.audio.entries.each((function(i,o){for(var a=0;a<o.length;a++)if("true"===o[a].dataset.locked)return t.locked=!0,!1;return!0})),this.locked){var i=!1,o=function detectMove(){i=!0},unlock=function unlock(){if(i)i=!1;else{document.body.removeEventListener("touchmove",o),document.body.removeEventListener("touchend",unlock);var a=[];if(t.game.cache.audio.entries.each((function(t,i){for(var o=0;o<i.length;o++){var u=i[o];"true"===u.dataset.locked&&a.push(u)}return!0})),0!==a.length){var u=a[a.length-1];u.oncanplaythrough=function(){u.oncanplaythrough=null,a.forEach((function(t){t.dataset.locked="false"})),t.unlocked=!0},a.forEach((function(t){t.load()}))}}};this.once(d.UNLOCKED,(function(){for(this.forEachActiveSound((function(t){null===t.currentMarker&&0===t.duration&&(t.duration=t.tags[0].duration),t.totalDuration=t.tags[0].duration}));this.lockedActionsQueue.length;){var t=this.lockedActionsQueue.shift();t.sound[t.prop].apply?t.sound[t.prop].apply(t.sound,t.value||[]):t.sound[t.prop]=t.value}}),this),document.body.addEventListener("touchmove",o,!1),document.body.addEventListener("touchend",unlock,!1)}},onBlur:function onBlur(){this.forEachActiveSound((function(t){t.isPlaying&&(this.onBlurPausedSounds.push(t),t.onBlur())}))},onFocus:function onFocus(){this.onBlurPausedSounds.forEach((function(t){t.onFocus()})),this.onBlurPausedSounds.length=0},destroy:function destroy(){a.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function isLocked(t,i,o){return"true"===t.tags[0].dataset.locked&&(this.lockedActionsQueue.push({sound:t,prop:i,value:o}),!0)},setMute:function setMute(t){return this.mute=t,this},mute:{get:function get(){return this._mute},set:function set(t){this._mute=t,this.forEachActiveSound((function(t){t.updateMute()})),this.emit(d.GLOBAL_MUTE,this,t)}},setVolume:function setVolume(t){return this.volume=t,this},volume:{get:function get(){return this._volume},set:function set(t){this._volume=t,this.forEachActiveSound((function(t){t.updateVolume()})),this.emit(d.GLOBAL_VOLUME,this,t)}}});t.exports=S},function(t,i,o){var a=o(78);t.exports=function GetFirst(t,i,o,u,d){if(void 0===u&&(u=0),void 0===d&&(d=t.length),a(t,u,d))for(var b=u;b<d;b++){var S=t[b];if(!i||i&&void 0===o&&S.hasOwnProperty(i)||i&&void 0!==o&&S[i]===o)return S}return null}},function(t,i,o){var a=o(146),u=o(0),d=o(70),b=o(18),S=new u({Extends:a,initialize:function HTML5AudioSound(t,i,o){if(void 0===o&&(o={}),this.tags=t.game.cache.audio.get(i),!this.tags)throw new Error('There is no audio asset with key "'+i+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,a.call(this,t,i,o)},play:function play(t,i){return!(this.manager.isLocked(this,"play",[t,i])||!a.prototype.play.call(this,t,i)||!this.pickAndPlayAudioTag()||(this.emit(d.PLAY,this),0))},pause:function pause(){return!(this.manager.isLocked(this,"pause")||this.startTime>0||!a.prototype.pause.call(this)||(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(d.PAUSE,this),0))},resume:function resume(){return!(this.manager.isLocked(this,"resume")||this.startTime>0||!a.prototype.resume.call(this)||!this.pickAndPlayAudioTag()||(this.emit(d.RESUME,this),0))},stop:function stop(){return!this.manager.isLocked(this,"stop")&&!!a.prototype.stop.call(this)&&(this.stopAndReleaseAudioTag(),this.emit(d.STOP,this),!0)},pickAndPlayAudioTag:function pickAndPlayAudioTag(){if(!this.pickAudioTag())return this.reset(),!1;var t=this.currentConfig.seek,i=this.currentConfig.delay,o=(this.currentMarker?this.currentMarker.start:0)+t;return this.previousTime=o,this.audio.currentTime=o,this.applyConfig(),0===i?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+1e3*i,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function pickAudioTag(){if(this.audio)return!0;for(var t=0;t<this.tags.length;t++){var i=this.tags[t];if("false"===i.dataset.used)return i.dataset.used="true",this.audio=i,!0}if(!this.manager.override)return!1;var o=[];this.manager.forEachActiveSound((function(t){t.key===this.key&&t.audio&&o.push(t)}),this),o.sort((function(t,i){return t.loop===i.loop?i.seek/i.duration-t.seek/t.duration:t.loop?1:-1}));var a=o[0];return this.audio=a.audio,a.reset(),a.audio=null,a.startTime=0,a.previousTime=0,!0},playCatchPromise:function playCatchPromise(){var t=this.audio.play();t&&t.catch((function(t){console.warn(t)}))},stopAndReleaseAudioTag:function stopAndReleaseAudioTag(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function reset(){a.prototype.stop.call(this)},onBlur:function onBlur(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function onFocus(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function update(t){if(this.isPlaying)if(this.startTime>0)this.startTime<t-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,t-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());else{var i=this.currentMarker?this.currentMarker.start:0,o=i+this.duration,a=this.audio.currentTime;if(this.currentConfig.loop)a>=o-this.manager.loopEndOffset?(this.audio.currentTime=i+Math.max(0,a-o),a=this.audio.currentTime):a<i&&(this.audio.currentTime+=i,a=this.audio.currentTime),a<this.previousTime&&this.emit(d.LOOPED,this);else if(a>=o)return this.reset(),this.stopAndReleaseAudioTag(),void this.emit(d.COMPLETE,this);this.previousTime=a}},destroy:function destroy(){a.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function updateMute(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function updateVolume(){this.audio&&(this.audio.volume=b(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function calculateRate(){a.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function get(){return this.currentConfig.mute},set:function set(t){this.currentConfig.mute=t,this.manager.isLocked(this,"mute",t)||(this.updateMute(),this.emit(d.MUTE,this,t))}},setMute:function setMute(t){return this.mute=t,this},volume:{get:function get(){return this.currentConfig.volume},set:function set(t){this.currentConfig.volume=t,this.manager.isLocked(this,"volume",t)||(this.updateVolume(),this.emit(d.VOLUME,this,t))}},setVolume:function setVolume(t){return this.volume=t,this},rate:{get:function get(){return this.currentConfig.rate},set:function set(t){this.currentConfig.rate=t,this.manager.isLocked(this,d.RATE,t)||(this.calculateRate(),this.emit(d.RATE,this,t))}},setRate:function setRate(t){return this.rate=t,this},detune:{get:function get(){return this.currentConfig.detune},set:function set(t){this.currentConfig.detune=t,this.manager.isLocked(this,d.DETUNE,t)||(this.calculateRate(),this.emit(d.DETUNE,this,t))}},setDetune:function setDetune(t){return this.detune=t,this},seek:{get:function get(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function set(t){this.manager.isLocked(this,"seek",t)||this.startTime>0||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.isPlaying?(this.previousTime=t,this.audio.currentTime=t):this.isPaused&&(this.currentConfig.seek=t),this.emit(d.SEEK,this,t))}},setSeek:function setSeek(t){return this.seek=t,this},loop:{get:function get(){return this.currentConfig.loop},set:function set(t){this.currentConfig.loop=t,this.manager.isLocked(this,"loop",t)||(this.audio&&(this.audio.loop=t),this.emit(d.LOOP,this,t))}},setLoop:function setLoop(t){return this.loop=t,this},pan:{get:function get(){return this.currentConfig.pan},set:function set(t){this.currentConfig.pan=t,this.emit(d.PAN,this,t)}},setPan:function setPan(t){return this.pan=t,this}});t.exports=S},function(t,i,o){var a=o(145),u=o(0),d=o(9),b=o(431),S=o(1),C=new u({Extends:d,initialize:function NoAudioSoundManager(t){d.call(this),this.game=t,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function add(t,i){var o=new b(this,t,i);return this.sounds.push(o),o},addAudioSprite:function addAudioSprite(t,i){var o=this.add(t,i);return o.spritemap={},o},play:function play(t,i){return!1},playAudioSprite:function playAudioSprite(t,i,o){return!1},remove:function remove(t){return a.prototype.remove.call(this,t)},removeByKey:function removeByKey(t){return a.prototype.removeByKey.call(this,t)},pauseAll:S,resumeAll:S,stopAll:S,update:S,setRate:S,setDetune:S,setMute:S,setVolume:S,forEachActiveSound:function forEachActiveSound(t,i){a.prototype.forEachActiveSound.call(this,t,i)},destroy:function destroy(){a.prototype.destroy.call(this)}});t.exports=C},function(t,i,o){var a=o(146),u=o(0),d=o(9),b=o(17),S=function returnFalse(){return!1},C=function returnThis(){return this},M=new u({Extends:d,initialize:function NoAudioSound(t,i,o){void 0===o&&(o={}),d.call(this),this.manager=t,this.key=i,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=b({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},o),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:S,updateMarker:S,removeMarker:function returnNull(){return null},play:S,pause:S,resume:S,stop:S,destroy:function destroy(){a.prototype.destroy.call(this)},setMute:C,setVolume:C,setRate:C,setDetune:C,setSeek:C,setLoop:C,setPan:C});t.exports=M},function(t,i,o){var a=o(433),u=o(145),d=o(0),b=o(70),S=o(22),C=o(434),M=new d({Extends:u,initialize:function WebAudioSoundManager(t){this.context=this.createAudioContext(t),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked="suspended"===this.context.state&&("ontouchstart"in window||"onclick"in window),u.call(this,t),this.locked&&t.isBooted?this.unlock():t.events.once(S.BOOT,this.unlock,this)},createAudioContext:function createAudioContext(t){var i=t.config.audio;return i.context?(i.context.resume(),i.context):window.hasOwnProperty("AudioContext")?new AudioContext:window.hasOwnProperty("webkitAudioContext")?new window.webkitAudioContext:void 0},setAudioContext:function setAudioContext(t){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=t,this.masterMuteNode=t.createGain(),this.masterVolumeNode=t.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(t.destination),this.destination=this.masterMuteNode,this},add:function add(t,i){var o=new C(this,t,i);return this.sounds.push(o),o},decodeAudio:function decodeAudio(t,i){var o;o=Array.isArray(t)?t:[{key:t,data:i}];for(var u=this.game.cache.audio,d=o.length,S=0;S<o.length;S++){var C=o[S],M=C.key,P=C.data;"string"==typeof P&&(P=a(P));var R=function(t,i){u.add(t,i),this.emit(b.DECODED,t),0==--d&&this.emit(b.DECODED_ALL)}.bind(this,M),O=function(t,i){console.error("Error decoding audio: "+t+" - ",i?i.message:""),0==--d&&this.emit(b.DECODED_ALL)}.bind(this,M);this.context.decodeAudioData(P,R,O)}},unlock:function unlock(){var t=this,i=document.body,o=function unlockHandler(){if(t.context&&i){var o=i.removeEventListener;t.context.resume().then((function(){o("touchstart",unlockHandler),o("touchend",unlockHandler),o("click",unlockHandler),o("keydown",unlockHandler),t.unlocked=!0}),(function(){o("touchstart",unlockHandler),o("touchend",unlockHandler),o("click",unlockHandler),o("keydown",unlockHandler)}))}};i&&(i.addEventListener("touchstart",o,!1),i.addEventListener("touchend",o,!1),i.addEventListener("click",o,!1),i.addEventListener("keydown",o,!1))},onBlur:function onBlur(){this.locked||this.context.suspend()},onFocus:function onFocus(){var t=this.context;"suspended"!==t.state&&"interrupted"!==t.state||this.locked||t.resume()},update:function update(t,i){u.prototype.update.call(this,t,i);var o=this.context;o&&"interrupted"===o.state&&o.resume()},destroy:function destroy(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var t=this;this.context.close().then((function(){t.context=null}))}u.prototype.destroy.call(this)},setMute:function setMute(t){return this.mute=t,this},mute:{get:function get(){return 0===this.masterMuteNode.gain.value},set:function set(t){this.masterMuteNode.gain.setValueAtTime(t?0:1,0),this.emit(b.GLOBAL_MUTE,this,t)}},setVolume:function setVolume(t){return this.volume=t,this},volume:{get:function get(){return this.masterVolumeNode.gain.value},set:function set(t){this.masterVolumeNode.gain.setValueAtTime(t,0),this.emit(b.GLOBAL_VOLUME,this,t)}}});t.exports=M},function(t,i){for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=new Uint8Array(256),u=0;u<o.length;u++)a[o.charCodeAt(u)]=u;t.exports=function Base64ToArrayBuffer(t){var i,o,u,d,b=(t=t.substr(t.indexOf(",")+1)).length,S=.75*b,C=0;"="===t[b-1]&&(S--,"="===t[b-2]&&S--);for(var M=new ArrayBuffer(S),P=new Uint8Array(M),R=0;R<b;R+=4)i=a[t.charCodeAt(R)],o=a[t.charCodeAt(R+1)],u=a[t.charCodeAt(R+2)],d=a[t.charCodeAt(R+3)],P[C++]=i<<2|o>>4,P[C++]=(15&o)<<4|u>>2,P[C++]=(3&u)<<6|63&d;return M}},function(t,i,o){var a=o(146),u=o(0),d=o(70),b=new u({Extends:a,initialize:function WebAudioSound(t,i,o){if(void 0===o&&(o={}),this.audioBuffer=t.game.cache.audio.get(i),!this.audioBuffer)throw new Error('Audio key "'+i+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=t.context.createGain(),this.volumeNode=t.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),t.context.createStereoPanner?(this.pannerNode=t.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(t.destination)):this.volumeNode.connect(t.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,a.call(this,t,i,o)},play:function play(t,i){return!!a.prototype.play.call(this,t,i)&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(d.PLAY,this),!0)},pause:function pause(){return!(this.manager.context.currentTime<this.startTime||!a.prototype.pause.call(this)||(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(d.PAUSE,this),0))},resume:function resume(){return!(this.manager.context.currentTime<this.startTime||!a.prototype.resume.call(this)||(this.createAndStartBufferSource(),this.emit(d.RESUME,this),0))},stop:function stop(){return!!a.prototype.stop.call(this)&&(this.stopAndRemoveBufferSource(),this.emit(d.STOP,this),!0)},createAndStartBufferSource:function createAndStartBufferSource(){var t=this.currentConfig.seek,i=this.currentConfig.delay,o=this.manager.context.currentTime+i,a=(this.currentMarker?this.currentMarker.start:0)+t,u=this.duration-t;this.playTime=o-t,this.startTime=o,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,o),Math.max(0,a),Math.max(0,u)),this.resetConfig()},createAndStartLoopBufferSource:function createAndStartLoopBufferSource(){var t=this.getLoopTime(),i=this.currentMarker?this.currentMarker.start:0,o=this.duration;this.loopTime=t,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,t),Math.max(0,i),Math.max(0,o))},createBufferSource:function createBufferSource(){var t=this,i=this.manager.context.createBufferSource();return i.buffer=this.audioBuffer,i.connect(this.muteNode),i.onended=function(i){i.target===t.source&&(t.currentConfig.loop?t.hasLooped=!0:t.hasEnded=!0)},i},stopAndRemoveBufferSource:function stopAndRemoveBufferSource(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function stopAndRemoveLoopBufferSource(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function applyConfig(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),a.prototype.applyConfig.call(this)},update:function update(){this.hasEnded?(this.hasEnded=!1,a.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(d.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(d.LOOPED,this))},destroy:function destroy(){a.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function calculateRate(){a.prototype.calculateRate.call(this);var t=this.manager.context.currentTime;this.source&&"number"==typeof this.totalRate&&this.source.playbackRate.setValueAtTime(this.totalRate,t),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,t)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function getCurrentTime(){for(var t=0,i=0;i<this.rateUpdates.length;i++)t+=((i<this.rateUpdates.length-1?this.rateUpdates[i+1].time:this.manager.context.currentTime-this.playTime)-this.rateUpdates[i].time)*this.rateUpdates[i].rate;return t},getLoopTime:function getLoopTime(){for(var t=0,i=0;i<this.rateUpdates.length-1;i++)t+=(this.rateUpdates[i+1].time-this.rateUpdates[i].time)*this.rateUpdates[i].rate;var o=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+o.time+(this.duration-t)/o.rate},rate:{get:function get(){return this.currentConfig.rate},set:function set(t){this.currentConfig.rate=t,this.calculateRate(),this.emit(d.RATE,this,t)}},setRate:function setRate(t){return this.rate=t,this},detune:{get:function get(){return this.currentConfig.detune},set:function set(t){this.currentConfig.detune=t,this.calculateRate(),this.emit(d.DETUNE,this,t)}},setDetune:function setDetune(t){return this.detune=t,this},mute:{get:function get(){return 0===this.muteNode.gain.value},set:function set(t){this.currentConfig.mute=t,this.muteNode.gain.setValueAtTime(t?0:1,0),this.emit(d.MUTE,this,t)}},setMute:function setMute(t){return this.mute=t,this},volume:{get:function get(){return this.volumeNode.gain.value},set:function set(t){this.currentConfig.volume=t,this.volumeNode.gain.setValueAtTime(t,0),this.emit(d.VOLUME,this,t)}},setVolume:function setVolume(t){return this.volume=t,this},seek:{get:function get(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function set(t){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.currentConfig.seek=t,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(d.SEEK,this,t))}},setSeek:function setSeek(t){return this.seek=t,this},loop:{get:function get(){return this.currentConfig.loop},set:function set(t){this.currentConfig.loop=t,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),t&&this.createAndStartLoopBufferSource()),this.emit(d.LOOP,this,t)}},setLoop:function setLoop(t){return this.loop=t,this},pan:{get:function get(){return this.pannerNode?this.pannerNode.pan.value:0},set:function set(t){this.currentConfig.pan=t,this.pannerNode&&this.pannerNode.pan.setValueAtTime(t,this.manager.context.currentTime),this.emit(d.PAN,this,t)}},setPan:function setPan(t){return this.pan=t,this}});t.exports=b},function(t,i){t.exports=function TransposeMatrix(t){for(var i=t.length,o=t[0].length,a=new Array(o),u=0;u<o;u++){a[u]=new Array(i);for(var d=i-1;d>-1;d--)a[u][d]=t[d][u]}return a}},function(t,i){function swap(t,i,o){var a=t[i];t[i]=t[o],t[o]=a}function defaultCompare(t,i){return t<i?-1:t>i?1:0}t.exports=function QuickSelect(t,i,o,a,u){for(void 0===o&&(o=0),void 0===a&&(a=t.length-1),void 0===u&&(u=defaultCompare);a>o;){if(a-o>600){var d=a-o+1,b=i-o+1,S=Math.log(d),C=.5*Math.exp(2*S/3),M=.5*Math.sqrt(S*C*(d-C)/d)*(b-d/2<0?-1:1);QuickSelect(t,i,Math.max(o,Math.floor(i-b*C/d+M)),Math.min(a,Math.floor(i+(d-b)*C/d+M)),u)}var P=t[i],R=o,O=a;for(swap(t,o,i),u(t[a],P)>0&&swap(t,o,a);R<O;){for(swap(t,R,O),R++,O--;u(t[R],P)<0;)R++;for(;u(t[O],P)>0;)O--}0===u(t[o],P)?swap(t,o,O):swap(t,++O,a),O<=i&&(o=O+1),i<=O&&(a=O-1)}}},function(t,i,o){var a=o(6),u=o(131),d=function BuildChunk(t,i,o){for(var a=[],u=0;u<t.length;u++)for(var d=0;d<i.length;d++)for(var b=0;b<o;b++)a.push({a:t[u],b:i[d]});return a};t.exports=function Range(t,i,o){var b=a(o,"max",0),S=a(o,"qty",1),C=a(o,"random",!1),M=a(o,"randomB",!1),P=a(o,"repeat",0),R=a(o,"yoyo",!1),O=[];if(M&&u(i),-1===P)if(0===b)P=0;else{var B=t.length*i.length*S;R&&(B*=2),P=Math.ceil(b/B)}for(var N=0;N<=P;N++){var Y=d(t,i,S);C&&u(Y),O=O.concat(Y),R&&(Y.reverse(),O=O.concat(Y))}return b&&O.splice(b),O}},function(t,i,o){t.exports={PROCESS_QUEUE_ADD:o(1041),PROCESS_QUEUE_REMOVE:o(1042)}},function(t,i,o){var a=o(13);t.exports=function BuildGameObjectAnimation(t,i){var o=a(i,"anims",null);if(null===o)return t;if("string"==typeof o)t.anims.play(o);else if("object"===_typeof(o)){var u=t.anims,d=a(o,"key",void 0);if(d){var b=a(o,"startFrame",void 0),S=a(o,"delay",0),C=a(o,"repeat",0),M=a(o,"repeatDelay",0),P=a(o,"yoyo",!1),R=a(o,"play",!1),O=a(o,"delayedPlay",0),B={key:d,delay:S,repeat:C,repeatDelay:M,yoyo:P,startFrame:b};R?u.play(B):O>0?u.playAfterDelay(B,O):u.load(B)}}return t}},function(t,i,o){var a=o(0),u=o(109),d=new a({initialize:function Bob(t,i,o,a,u){this.parent=t,this.x=i,this.y=o,this.frame=a,this.data={},this.tint=16777215,this._visible=u,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function setFrame(t){return void 0===t?this.frame=this.parent.frame:t instanceof u&&t.texture===this.parent.texture?this.frame=t:this.frame=this.parent.texture.get(t),this},resetFlip:function resetFlip(){return this.flipX=!1,this.flipY=!1,this},reset:function reset(t,i,o){return this.x=t,this.y=i,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,o&&this.setFrame(o),this},setPosition:function setPosition(t,i){return this.x=t,this.y=i,this},setFlipX:function setFlipX(t){return this.flipX=t,this},setFlipY:function setFlipY(t){return this.flipY=t,this},setFlip:function setFlip(t,i){return this.flipX=t,this.flipY=i,this},setVisible:function setVisible(t){return this.visible=t,this},setAlpha:function setAlpha(t){return this.alpha=t,this},setTint:function setTint(t){return this.tint=t,this},destroy:function destroy(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function get(){return this._visible},set:function set(t){this.parent.dirty|=this._visible!==t,this._visible=t}},alpha:{get:function get(){return this._alpha},set:function set(t){this.parent.dirty|=this._alpha>0!=t>0,this._alpha=t}}});t.exports=d},function(t,i,o){var a=o(10);t.exports=function Union(t,i,o){void 0===o&&(o=new a);var u=Math.min(t.x,i.x),d=Math.min(t.y,i.y),b=Math.max(t.right,i.right)-u,S=Math.max(t.bottom,i.bottom)-d;return o.setTo(u,d,b,S)}},function(t,i,o){var a=o(0),u=o(11),d=o(1055),b=o(15),S=o(7),C=o(202),M=o(20),P=o(140),R=new a({Extends:b,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Origin,u.ScrollFactor,u.Transform,u.Visible,d],initialize:function DOMElement(t,i,o,a,u,d){b.call(this,t,"DOMElement"),this.parent=t.sys.game.domContainer,this.cache=t.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new P,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(i,o),"string"==typeof a?"#"===a[0]?this.setElement(a.substr(1),u,d):this.createElement(a,u,d):a&&this.setElement(a,u,d),t.sys.events.on(M.SLEEP,this.handleSceneEvent,this),t.sys.events.on(M.WAKE,this.handleSceneEvent,this)},addedToScene:function addedToScene(){this.scene.sys.updateList.add(this)},removedFromScene:function removedFromScene(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function handleSceneEvent(t){var i=this.node,o=i.style;i&&(o.display=t.settings.visible?"block":"none")},setSkew:function setSkew(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.skewX=t,this.skewY=i,this},setPerspective:function setPerspective(t){return this.parent.style.perspective=t+"px",this},perspective:{get:function get(){return parseFloat(this.parent.style.perspective)},set:function set(t){this.parent.style.perspective=t+"px"}},addListener:function addListener(t){if(this.node){t=t.split(" ");for(var i=0;i<t.length;i++)this.node.addEventListener(t[i],this.handler,!1)}return this},removeListener:function removeListener(t){if(this.node){t=t.split(" ");for(var i=0;i<t.length;i++)this.node.removeEventListener(t[i],this.handler)}return this},dispatchNativeEvent:function dispatchNativeEvent(t){this.emit(t.type,t)},createElement:function createElement(t,i,o){return this.setElement(document.createElement(t),i,o)},setElement:function setElement(t,i,o){var a;if(this.removeElement(),"string"==typeof t?("#"===t[0]&&(t=t.substr(1)),a=document.getElementById(t)):"object"===_typeof(t)&&1===t.nodeType&&(a=t),!a)return this;if(this.node=a,i&&S(i))for(var u in i)a.style[u]=i[u];else"string"==typeof i&&(a.style=i);return a.style.zIndex="0",a.style.display="inline",a.style.position="absolute",a.phaser=this,this.parent&&this.parent.appendChild(a),o&&(a.innerText=o),this.updateSize()},createFromCache:function createFromCache(t,i){var o=this.cache.get(t);return o&&this.createFromHTML(o,i),this},createFromHTML:function createFromHTML(t,i){void 0===i&&(i="div"),this.removeElement();var o=document.createElement(i);return this.node=o,o.style.zIndex="0",o.style.display="inline",o.style.position="absolute",o.phaser=this,this.parent&&this.parent.appendChild(o),o.innerHTML=t,this.updateSize()},removeElement:function removeElement(){return this.node&&(C(this.node),this.node=null),this},updateSize:function updateSize(){var t=this.node,i=t.getBoundingClientRect();return this.width=t.clientWidth,this.height=t.clientHeight,this.displayWidth=i.width||0,this.displayHeight=i.height||0,this},getChildByProperty:function getChildByProperty(t,i){if(this.node)for(var o=this.node.querySelectorAll("*"),a=0;a<o.length;a++)if(o[a][t]===i)return o[a];return null},getChildByID:function getChildByID(t){return this.getChildByProperty("id",t)},getChildByName:function getChildByName(t){return this.getChildByProperty("name",t)},setClassName:function setClassName(t){return this.node&&(this.node.className=t,this.updateSize()),this},setText:function setText(t){return this.node&&(this.node.innerText=t,this.updateSize()),this},setHTML:function setHTML(t){return this.node&&(this.node.innerHTML=t,this.updateSize()),this},preUpdate:function preUpdate(){var t=this.parentContainer,i=this.node;i&&t&&!t.willRender()&&(i.style.display="none")},willRender:function willRender(){return!0},preDestroy:function preDestroy(){this.removeElement(),this.scene.sys.events.off(M.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(M.WAKE,this.handleSceneEvent,this)}});t.exports=R},function(t,i,o){var a=o(1056),u=o(15),d=o(25),b=new d,S=new d,C=new d;t.exports=function DOMElementCSSRenderer(t,i,o,d){if(i.node){var M=i.node.style,P=i.scene.sys.settings;if(!M||!P.visible||u.RENDER_MASK!==i.renderFlags||0!==i.cameraFilter&&i.cameraFilter&o.id||i.parentContainer&&!i.parentContainer.willRender())M.display="none";else{var R=i.parentContainer,O=o.alpha*i.alpha;R&&(O*=R.alpha);var B=b,N=S,Y=C,G=0,X=0,U="0%",z="0%";d?(G=i.width*i.scaleX*i.originX,X=i.height*i.scaleY*i.originY,N.applyITRS(i.x-G,i.y-X,i.rotation,i.scaleX,i.scaleY),B.copyFrom(o.matrix),B.multiplyWithOffset(d,-o.scrollX*i.scrollFactorX,-o.scrollY*i.scrollFactorY),N.e=i.x-G,N.f=i.y-X,B.multiply(N,Y)):(G=i.width*i.originX,X=i.height*i.originY,N.applyITRS(i.x-G,i.y-X,i.rotation,i.scaleX,i.scaleY),B.copyFrom(o.matrix),U=100*i.originX+"%",z=100*i.originY+"%",N.e-=o.scrollX*i.scrollFactorX,N.f-=o.scrollY*i.scrollFactorY,B.multiply(N,Y)),i.transformOnly||(M.display="block",M.opacity=O,M.zIndex=i._depth,M.pointerEvents=i.pointerEvents,M.mixBlendMode=a[i._blendMode]),M.transform=Y.getCSSMatrix()+" skew("+i.skewX+"rad, "+i.skewY+"rad) rotate3d("+i.rotate3d.x+","+i.rotate3d.y+","+i.rotate3d.z+","+i.rotate3d.w+i.rotate3dAngle+")",M.transformOrigin=U+" "+z}}}},function(t,i,o){var a=o(0),u=o(11),d=o(15),b=o(1060),S=new a({Extends:d,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Flip,u.Origin,u.ScrollFactor,u.Size,u.Texture,u.Tint,u.Transform,u.Visible,b],initialize:function Extern(t){d.call(this,t,"Extern")},addedToScene:function addedToScene(){this.scene.sys.updateList.add(this)},removedFromScene:function removedFromScene(){this.scene.sys.updateList.remove(this)},preUpdate:function preUpdate(){},render:function render(){}});t.exports=S},function(t,i,o){var a=o(218),u=o(98),d=o(14),b=o(4);t.exports=function GetPoint(t,i,o){void 0===o&&(o=new b);var S=u(i,0,d.PI2);return a(t,S,o)}},function(t,i,o){var a=o(447),u=o(218),d=o(98),b=o(14);t.exports=function GetPoints(t,i,o,S){void 0===S&&(S=[]),!i&&o>0&&(i=a(t)/o);for(var C=0;C<i;C++){var M=d(C/i,0,b.PI2);S.push(u(t,M))}return S}},function(t,i){t.exports=function Circumference(t){var i=t.width/2,o=t.height/2,a=Math.pow(i-o,2)/Math.pow(i+o,2);return Math.PI*(i+o)*(1+3*a/(10+Math.sqrt(4-3*a)))}},function(t,i,o){var a=o(217),u=o(30);t.exports=function GraphicsCanvasRenderer(t,i,o,d,b,S){var C=i.commandBuffer,M=C.length,P=b||t.currentContext;if(0!==M&&u(t,P,i,o,d)){o.addToRenderList(i);var R=1,O=1,B=0,N=0,Y=1,G=0,X=0,U=0;P.beginPath();for(var z=0;z<M;++z)switch(C[z]){case a.ARC:P.arc(C[z+1],C[z+2],C[z+3],C[z+4],C[z+5],C[z+6]),z+=7;break;case a.LINE_STYLE:Y=C[z+1],B=C[z+2],R=C[z+3],G=(16711680&B)>>>16,X=(65280&B)>>>8,U=255&B,P.strokeStyle="rgba("+G+","+X+","+U+","+R+")",P.lineWidth=Y,z+=3;break;case a.FILL_STYLE:N=C[z+1],O=C[z+2],G=(16711680&N)>>>16,X=(65280&N)>>>8,U=255&N,P.fillStyle="rgba("+G+","+X+","+U+","+O+")",z+=2;break;case a.BEGIN_PATH:P.beginPath();break;case a.CLOSE_PATH:P.closePath();break;case a.FILL_PATH:S||P.fill();break;case a.STROKE_PATH:S||P.stroke();break;case a.FILL_RECT:S?P.rect(C[z+1],C[z+2],C[z+3],C[z+4]):P.fillRect(C[z+1],C[z+2],C[z+3],C[z+4]),z+=4;break;case a.FILL_TRIANGLE:P.beginPath(),P.moveTo(C[z+1],C[z+2]),P.lineTo(C[z+3],C[z+4]),P.lineTo(C[z+5],C[z+6]),P.closePath(),S||P.fill(),z+=6;break;case a.STROKE_TRIANGLE:P.beginPath(),P.moveTo(C[z+1],C[z+2]),P.lineTo(C[z+3],C[z+4]),P.lineTo(C[z+5],C[z+6]),P.closePath(),S||P.stroke(),z+=6;break;case a.LINE_TO:P.lineTo(C[z+1],C[z+2]),z+=2;break;case a.MOVE_TO:P.moveTo(C[z+1],C[z+2]),z+=2;break;case a.LINE_FX_TO:P.lineTo(C[z+1],C[z+2]),z+=5;break;case a.MOVE_FX_TO:P.moveTo(C[z+1],C[z+2]),z+=5;break;case a.SAVE:P.save();break;case a.RESTORE:P.restore();break;case a.TRANSLATE:P.translate(C[z+1],C[z+2]),z+=2;break;case a.SCALE:P.scale(C[z+1],C[z+2]),z+=2;break;case a.ROTATE:P.rotate(C[z+1]),z+=1;break;case a.GRADIENT_FILL_STYLE:z+=5;break;case a.GRADIENT_LINE_STYLE:z+=6}P.restore()}}},function(t,i,o){var a=o(0),u=o(137),d=o(80),b=o(2),S=o(68),C=new a({initialize:function EmitterOp(t,i,o,a){void 0===a&&(a=!1),this.propertyKey=i,this.propertyValue=o,this.defaultValue=o,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=a,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(t)},loadConfig:function loadConfig(t,i){void 0===t&&(t={}),i&&(this.propertyKey=i),this.propertyValue=b(t,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function toJSON(){return this.propertyValue},onChange:function onChange(t){return this.propertyValue=t,this.setMethods()},setMethods:function setMethods(){var t=this.propertyValue,i=_typeof(t);if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,"number"===i)this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(t))this.onEmit=this.randomStaticValueEmit;else if("function"===i)this.emitOnly?this.onEmit=t:this.onUpdate=t;else if("object"===i&&this.hasBoth(t,"start","end")){this.start=t.start,this.end=t.end;var o=this.has(t,"random");if(o&&(this.onEmit=this.randomRangedValueEmit),this.has(t,"steps"))this.steps=t.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var a=this.has(t,"ease")?t.ease:"Linear";this.ease=d(a,t.easeParams),o||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if("object"===i&&this.hasBoth(t,"min","max"))this.start=t.min,this.end=t.max,this.onEmit=this.randomRangedValueEmit;else if("object"===i&&this.has(t,"random")){var u=t.random;Array.isArray(u)&&(this.start=u[0],this.end=u[1]),this.onEmit=this.randomRangedValueEmit}else"object"===i&&this.hasEither(t,"onEmit","onUpdate")&&(this.has(t,"onEmit")&&(this.onEmit=t.onEmit),this.has(t,"onUpdate")&&(this.onUpdate=t.onUpdate));return this},has:function has(t,i){return t.hasOwnProperty(i)},hasBoth:function hasBoth(t,i,o){return t.hasOwnProperty(i)&&t.hasOwnProperty(o)},hasEither:function hasEither(t,i,o){return t.hasOwnProperty(i)||t.hasOwnProperty(o)},defaultEmit:function defaultEmit(t,i,o){return o},defaultUpdate:function defaultUpdate(t,i,o,a){return a},staticValueEmit:function staticValueEmit(){return this.propertyValue},staticValueUpdate:function staticValueUpdate(){return this.propertyValue},randomStaticValueEmit:function randomStaticValueEmit(){var t=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[t]},randomRangedValueEmit:function randomRangedValueEmit(t,i){var o=u(this.start,this.end);return t&&t.data[i]&&(t.data[i].min=o),o},steppedEmit:function steppedEmit(){var t=this.counter,i=this.counter+(this.end-this.start)/this.steps;return this.counter=S(i,this.start,this.end),t},easedValueEmit:function easedValueEmit(t,i){if(t&&t.data[i]){var o=t.data[i];o.min=this.start,o.max=this.end}return this.start},easeValueUpdate:function easeValueUpdate(t,i,o){var a=t.data[i];return(a.max-a.min)*this.ease(o)+a.min}});t.exports=C},function(t,i,o){var a=o(0),u=o(2),d=new a({initialize:function GravityWell(t,i,o,a,d){if("object"===_typeof(t)){var b=t;t=u(b,"x",0),i=u(b,"y",0),o=u(b,"power",0),a=u(b,"epsilon",100),d=u(b,"gravity",50)}else void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=100),void 0===d&&(d=50);this.x=t,this.y=i,this.active=!0,this._gravity=d,this._power=0,this._epsilon=0,this.power=o,this.epsilon=a},update:function update(t,i){var o=this.x-t.x,a=this.y-t.y,u=o*o+a*a;if(0!==u){var d=Math.sqrt(u);u<this._epsilon&&(u=this._epsilon);var b=this._power*i/(u*d)*100;t.velocityX+=o*b,t.velocityY+=a*b}},epsilon:{get:function get(){return Math.sqrt(this._epsilon)},set:function set(t){this._epsilon=t*t}},power:{get:function get(){return this._power/this._gravity},set:function set(t){this._power=t*this._gravity}},gravity:{get:function get(){return this._gravity},set:function set(t){var i=this.power;this._gravity=t,this.power=i}}});t.exports=d},function(t,i,o){var a=o(0),u=o(36),d=o(50),b=new a({initialize:function Particle(t){this.emitter=t,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function isAlive(){return this.lifeCurrent>0},resetPosition:function resetPosition(){this.x=0,this.y=0},fire:function fire(t,i){var o=this.emitter;this.frame=o.getFrame(),o.emitZone&&o.emitZone.getPoint(this),this.x+=void 0===t?o.x.onEmit(this,"x"):t,this.y+=void 0===i?o.y.onEmit(this,"y"):i,this.life=o.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var a=o.speedX.onEmit(this,"speedX"),b=o.speedY?o.speedY.onEmit(this,"speedY"):a;if(o.radial){var S=u(o.angle.onEmit(this,"angle"));this.velocityX=Math.cos(S)*Math.abs(a),this.velocityY=Math.sin(S)*Math.abs(b)}else if(o.moveTo){var C=o.moveToX.onEmit(this,"moveToX"),M=o.moveToY?o.moveToY.onEmit(this,"moveToY"):C,P=Math.atan2(M-this.y,C-this.x),R=d(this.x,this.y,C,M)/(this.life/1e3);this.velocityX=Math.cos(P)*R,this.velocityY=Math.sin(P)*R}else this.velocityX=a,this.velocityY=b;o.acceleration&&(this.accelerationX=o.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=o.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=o.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=o.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=o.delay.onEmit(this,"delay"),this.scaleX=o.scaleX.onEmit(this,"scaleX"),this.scaleY=o.scaleY?o.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=o.rotate.onEmit(this,"rotate"),this.rotation=u(this.angle),this.bounce=o.bounce.onEmit(this,"bounce"),this.alpha=o.alpha.onEmit(this,"alpha"),this.tint=o.tint.onEmit(this,"tint")},computeVelocity:function computeVelocity(t,i,o,a){var u=this.velocityX,d=this.velocityY,b=this.accelerationX,S=this.accelerationY,C=this.maxVelocityX,M=this.maxVelocityY;u+=t.gravityX*o,d+=t.gravityY*o,b&&(u+=b*o),S&&(d+=S*o),u>C?u=C:u<-C&&(u=-C),d>M?d=M:d<-M&&(d=-M),this.velocityX=u,this.velocityY=d;for(var P=0;P<a.length;P++)a[P].update(this,i,o)},checkBounds:function checkBounds(t){var i=t.bounds,o=-this.bounce;this.x<i.x&&t.collideLeft?(this.x=i.x,this.velocityX*=o):this.x>i.right&&t.collideRight&&(this.x=i.right,this.velocityX*=o),this.y<i.y&&t.collideTop?(this.y=i.y,this.velocityY*=o):this.y>i.bottom&&t.collideBottom&&(this.y=i.bottom,this.velocityY*=o)},update:function update(t,i,o){if(this.delayCurrent>0)return this.delayCurrent-=t,!1;var a=this.emitter,d=1-this.lifeCurrent/this.life;return this.lifeT=d,this.computeVelocity(a,t,i,o),this.x+=this.velocityX*i,this.y+=this.velocityY*i,a.bounds&&this.checkBounds(a),a.deathZone&&a.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=a.scaleX.onUpdate(this,"scaleX",d,this.scaleX),a.scaleY?this.scaleY=a.scaleY.onUpdate(this,"scaleY",d,this.scaleY):this.scaleY=this.scaleX,this.angle=a.rotate.onUpdate(this,"rotate",d,this.angle),this.rotation=u(this.angle),this.alpha=a.alpha.onUpdate(this,"alpha",d,this.alpha),this.tint=a.tint.onUpdate(this,"tint",d,this.tint),this.lifeCurrent-=t,this.lifeCurrent<=0)}});t.exports=b},function(t,i,o){var a=o(35),u=o(0),d=o(11),b=o(453),S=o(454),C=o(449),M=o(2),P=o(210),R=o(455),O=o(126),B=o(451),N=o(456),Y=o(10),G=o(79),X=o(3),U=o(68),z=new u({Mixins:[d.BlendMode,d.Mask,d.ScrollFactor,d.Visible],initialize:function ParticleEmitter(t,i){this.manager=t,this.texture=t.texture,this.frames=[t.defaultFrame],this.defaultFrame=t.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=B,this.x=new C(i,"x",0,!0),this.y=new C(i,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new C(i,"accelerationX",0,!0),this.accelerationY=new C(i,"accelerationY",0,!0),this.maxVelocityX=new C(i,"maxVelocityX",1e4,!0),this.maxVelocityY=new C(i,"maxVelocityY",1e4,!0),this.speedX=new C(i,"speedX",0,!0),this.speedY=new C(i,"speedY",0,!0),this.moveTo=!1,this.moveToX=new C(i,"moveToX",0,!0),this.moveToY=new C(i,"moveToY",0,!0),this.bounce=new C(i,"bounce",0,!0),this.scaleX=new C(i,"scaleX",1),this.scaleY=new C(i,"scaleY",1),this.tint=new C(i,"tint",16777215),this.alpha=new C(i,"alpha",1),this.lifespan=new C(i,"lifespan",1e3,!0),this.angle=new C(i,"angle",{min:0,max:360},!0),this.rotate=new C(i,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new C(i,"quantity",1,!0),this.delay=new C(i,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=a.NORMAL,this.follow=null,this.followOffset=new X,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,i&&this.fromJSON(i)},fromJSON:function fromJSON(t){if(!t)return this;var i=0,o="";for(i=0;i<this.configFastMap.length;i++)o=this.configFastMap[i],O(t,o)&&(this[o]=M(t,o));for(i=0;i<this.configOpMap.length;i++)o=this.configOpMap[i],O(t,o)&&this[o].loadConfig(t);if(this.acceleration=0!==this.accelerationX.propertyValue||0!==this.accelerationY.propertyValue,this.moveTo=0!==this.moveToX.propertyValue||0!==this.moveToY.propertyValue,O(t,"speed")&&(this.speedX.loadConfig(t,"speed"),this.speedY=null),(R(t,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),O(t,"scale")&&(this.scaleX.loadConfig(t,"scale"),this.scaleY=null),O(t,"callbackScope")){var a=M(t,"callbackScope",null);this.emitCallbackScope=a,this.deathCallbackScope=a}return O(t,"emitZone")&&this.setEmitZone(t.emitZone),O(t,"deathZone")&&this.setDeathZone(t.deathZone),O(t,"bounds")&&this.setBounds(t.bounds),O(t,"followOffset")&&this.followOffset.setFromObject(M(t,"followOffset",0)),O(t,"frame")&&this.setFrame(t.frame),O(t,"reserve")&&this.reserve(t.reserve),this},toJSON:function toJSON(t){void 0===t&&(t={});var i=0,o="";for(i=0;i<this.configFastMap.length;i++)t[o=this.configFastMap[i]]=this[o];for(i=0;i<this.configOpMap.length;i++)this[o=this.configOpMap[i]]&&(t[o]=this[o].toJSON());return this.speedY||(delete t.speedX,t.speed=this.speedX.toJSON()),this.scaleY||(delete t.scaleX,t.scale=this.scaleX.toJSON()),t},startFollow:function startFollow(t,i,o,a){return void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=!1),this.follow=t,this.followOffset.set(i,o),this.trackVisible=a,this},stopFollow:function stopFollow(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function getFrame(){if(1===this.frames.length)return this.defaultFrame;if(this.randomFrame)return P(this.frames);var t=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=U(this.currentFrame+1,0,this._frameLength)),t},setFrame:function setFrame(t,i,o){void 0===i&&(i=!0),void 0===o&&(o=1),this.randomFrame=i,this.frameQuantity=o,this.currentFrame=0,this._frameCounter=0;var a=_typeof(t);if(Array.isArray(t)||"string"===a||"number"===a)this.manager.setEmitterFrames(t,this);else if("object"===a){var u=t;(t=M(u,"frames",null))&&this.manager.setEmitterFrames(t,this);var d=M(u,"cycle",!1);this.randomFrame=!d,this.frameQuantity=M(u,"quantity",o)}return this._frameLength=this.frames.length,1===this._frameLength&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function setRadial(t){return void 0===t&&(t=!0),this.radial=t,this},setPosition:function setPosition(t,i){return this.x.onChange(t),this.y.onChange(i),this},setBounds:function setBounds(t,i,o,a){if("object"===_typeof(t)){var u=t;t=u.x,i=u.y,o=O(u,"w")?u.w:u.width,a=O(u,"h")?u.h:u.height}return this.bounds?this.bounds.setTo(t,i,o,a):this.bounds=new Y(t,i,o,a),this},setSpeedX:function setSpeedX(t){return this.speedX.onChange(t),this.radial=!1,this},setSpeedY:function setSpeedY(t){return this.speedY&&(this.speedY.onChange(t),this.radial=!1),this},setSpeed:function setSpeed(t){return this.speedX.onChange(t),this.speedY=null,this.radial=!0,this},setScaleX:function setScaleX(t){return this.scaleX.onChange(t),this},setScaleY:function setScaleY(t){return this.scaleY.onChange(t),this},setScale:function setScale(t){return this.scaleX.onChange(t),this.scaleY=null,this},setGravityX:function setGravityX(t){return this.gravityX=t,this},setGravityY:function setGravityY(t){return this.gravityY=t,this},setGravity:function setGravity(t,i){return this.gravityX=t,this.gravityY=i,this},setAlpha:function setAlpha(t){return this.alpha.onChange(t),this},setTint:function setTint(t){return this.tint.onChange(t),this},setEmitterAngle:function setEmitterAngle(t){return this.angle.onChange(t),this},setAngle:function setAngle(t){return this.angle.onChange(t),this},setLifespan:function setLifespan(t){return this.lifespan.onChange(t),this},setQuantity:function setQuantity(t){return this.quantity.onChange(t),this},setFrequency:function setFrequency(t,i){return this.frequency=t,this._counter=0,i&&this.quantity.onChange(i),this},setEmitZone:function setEmitZone(t){if(void 0===t)this.emitZone=null;else{var i=M(t,"type","random"),o=M(t,"source",null);switch(i){case"random":this.emitZone=new N(o);break;case"edge":var a=M(t,"quantity",1),u=M(t,"stepRate",0),d=M(t,"yoyo",!1),b=M(t,"seamless",!0);this.emitZone=new S(o,a,u,d,b)}}return this},setDeathZone:function setDeathZone(t){if(void 0===t)this.deathZone=null;else{var i=M(t,"type","onEnter"),o=M(t,"source",null);if(o&&"function"==typeof o.contains){var a="onEnter"===i;this.deathZone=new b(o,a)}}return this},reserve:function reserve(t){for(var i=this.dead,o=0;o<t;o++)i.push(new this.particleClass(this));return this},getAliveParticleCount:function getAliveParticleCount(){return this.alive.length},getDeadParticleCount:function getDeadParticleCount(){return this.dead.length},getParticleCount:function getParticleCount(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function atLimit(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function onParticleEmit(t,i){return void 0===t?(this.emitCallback=null,this.emitCallbackScope=null):"function"==typeof t&&(this.emitCallback=t,i&&(this.emitCallbackScope=i)),this},onParticleDeath:function onParticleDeath(t,i){return void 0===t?(this.deathCallback=null,this.deathCallbackScope=null):"function"==typeof t&&(this.deathCallback=t,i&&(this.deathCallbackScope=i)),this},killAll:function killAll(){for(var t=this.dead,i=this.alive;i.length>0;)t.push(i.pop());return this},forEachAlive:function forEachAlive(t,i){for(var o=this.alive,a=o.length,u=0;u<a;++u)t.call(i,o[u],this);return this},forEachDead:function forEachDead(t,i){for(var o=this.dead,a=o.length,u=0;u<a;++u)t.call(i,o[u],this);return this},start:function start(){return this.on=!0,this._counter=0,this},stop:function stop(){return this.on=!1,this},pause:function pause(){return this.active=!1,this},resume:function resume(){return this.active=!0,this},remove:function remove(){return this.manager.removeEmitter(this),this},depthSort:function depthSort(){return G(this.alive,this.depthSortCallback),this},flow:function flow(t,i){return void 0===i&&(i=1),this.frequency=t,this.quantity.onChange(i),this.start()},explode:function explode(t,i,o){return this.frequency=-1,this.emitParticle(t,i,o)},emitParticleAt:function emitParticleAt(t,i,o){return this.emitParticle(o,t,i)},emitParticle:function emitParticle(t,i,o){if(!this.atLimit()){void 0===t&&(t=this.quantity.onEmit());for(var a=this.dead,u=this.follow?this.follow.x+this.followOffset.x:i,d=this.follow?this.follow.y+this.followOffset.y:o,b=0;b<t;b++){var S=a.pop();if(S||(S=new this.particleClass(this)),S.fire(u,d),this.particleBringToTop?this.alive.push(S):this.alive.unshift(S),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,S,this),this.atLimit())break}return S}},preUpdate:function preUpdate(t,i){var o=(i*=this.timeScale)/1e3;this.trackVisible&&(this.visible=this.follow.visible);var a=this.manager.getProcessors(),u=this.alive,d=this.dead,b=0,S=[],C=u.length;for(b=0;b<C;b++){var M=u[b];M.update(i,o,a)&&S.push({index:b,particle:M})}if((C=S.length)>0){var P=this.deathCallback,R=this.deathCallbackScope;for(b=C-1;b>=0;b--){var O=S[b];u.splice(O.index,1),d.push(O.particle),P&&P.call(R,O.particle),O.particle.resetPosition()}}this.on&&(0===this.frequency?this.emitParticle():this.frequency>0&&(this._counter-=i,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function depthSortCallback(t,i){return t.y-i.y}});t.exports=z},function(t,i,o){var a=new(o(0))({initialize:function DeathZone(t,i){this.source=t,this.killOnEnter=i},willKill:function willKill(t){var i=this.source.contains(t.x,t.y);return i&&this.killOnEnter||!i&&!this.killOnEnter}});t.exports=a},function(t,i,o){var a=new(o(0))({initialize:function EdgeZone(t,i,o,a,u){void 0===a&&(a=!1),void 0===u&&(u=!0),this.source=t,this.points=[],this.quantity=i,this.stepRate=o,this.yoyo=a,this.counter=-1,this.seamless=u,this._length=0,this._direction=0,this.updateSource()},updateSource:function updateSource(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var t=this.points[0],i=this.points[this.points.length-1];t.x===i.x&&t.y===i.y&&this.points.pop()}var o=this._length;return this._length=this.points.length,this._length<o&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function changeSource(t){return this.source=t,this.updateSource()},getPoint:function getPoint(t){0===this._direction?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,-1===this.counter&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var i=this.points[this.counter];i&&(t.x=i.x,t.y=i.y)}});t.exports=a},function(t,i){t.exports=function HasAny(t,i){for(var o=0;o<i.length;o++)if(t.hasOwnProperty(i[o]))return!0;return!1}},function(t,i,o){var a=o(0),u=o(3),d=new a({initialize:function RandomZone(t){this.source=t,this._tempVec=new u},getPoint:function getPoint(t){var i=this._tempVec;this.source.getRandomPoint(i),t.x=i.x,t.y=i.y}});t.exports=d},function(t,i,o){var a=o(0),u=o(11),d=o(73),b=new a({Extends:d,Mixins:[u.PathFollower],initialize:function PathFollower(t,i,o,a,u,b){d.call(this,t,o,a,u,b),this.path=i},preUpdate:function preUpdate(t,i){this.anims.update(t,i),this.pathUpdate(t)}});t.exports=b},function(t,i){t.exports=function GetTextSize(t,i,o){var a=t.canvas,u=t.context,d=t.style,b=[],S=0,C=o.length;d.maxLines>0&&d.maxLines<o.length&&(C=d.maxLines),d.syncFont(a,u);for(var M=0;M<C;M++){var P=d.strokeThickness;P+=u.measureText(o[M]).width,d.wordWrap&&(P-=u.measureText(" ").width),b[M]=Math.ceil(P),S=Math.max(S,b[M])}var R=i.fontSize+d.strokeThickness,O=R*C,B=t.lineSpacing;return C>1&&(O+=B*(C-1)),{width:S,height:O,lines:C,lineWidths:b,lineSpacing:B,lineHeight:R}}},function(t,i,o){var a=o(0),u=o(13),d=o(6),b=o(460),S={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|Mqgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},C=new a({initialize:function TextStyle(t,i){this.parent=t,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(i,!1,!0);var o=d(i,"metrics",!1);this.metrics=o?{ascent:d(o,"ascent",0),descent:d(o,"descent",0),fontSize:d(o,"fontSize",0)}:b(this)},setStyle:function setStyle(t,i,o){for(var a in void 0===i&&(i=!0),void 0===o&&(o=!1),t&&t.hasOwnProperty("fontSize")&&"number"==typeof t.fontSize&&(t.fontSize=t.fontSize.toString()+"px"),S){var b=o?S[a][1]:this[a];this[a]="wordWrapCallback"===a||"wordWrapCallbackScope"===a?d(t,S[a][0],b):u(t,S[a][0],b)}var C=d(t,"font",null);null!==C&&this.setFont(C,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var M=d(t,"fill",null);return null!==M&&(this.color=M),i?this.update(!0):this.parent},syncFont:function syncFont(t,i){i.font=this._font},syncStyle:function syncStyle(t,i){i.textBaseline="alphabetic",i.fillStyle=this.color,i.strokeStyle=this.stroke,i.lineWidth=this.strokeThickness,i.lineCap="round",i.lineJoin="round"},syncShadow:function syncShadow(t,i){i?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)},update:function update(t){return t&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=b(this)),this.parent.updateText()},setFont:function setFont(t,i){void 0===i&&(i=!0);var o=t,a="",u="";if("string"!=typeof t)o=d(t,"fontFamily","Courier"),a=d(t,"fontSize","16px"),u=d(t,"fontStyle","");else{var b=t.split(" "),S=0;u=b.length>2?b[S++]:"",a=b[S++]||"16px",o=b[S++]||"Courier"}return o===this.fontFamily&&a===this.fontSize&&u===this.fontStyle||(this.fontFamily=o,this.fontSize=a,this.fontStyle=u,i&&this.update(!0)),this.parent},setFontFamily:function setFontFamily(t){return this.fontFamily!==t&&(this.fontFamily=t,this.update(!0)),this.parent},setFontStyle:function setFontStyle(t){return this.fontStyle!==t&&(this.fontStyle=t,this.update(!0)),this.parent},setFontSize:function setFontSize(t){return"number"==typeof t&&(t=t.toString()+"px"),this.fontSize!==t&&(this.fontSize=t,this.update(!0)),this.parent},setTestString:function setTestString(t){return this.testString=t,this.update(!0)},setFixedSize:function setFixedSize(t,i){return this.fixedWidth=t,this.fixedHeight=i,t&&(this.parent.width=t),i&&(this.parent.height=i),this.update(!1)},setBackgroundColor:function setBackgroundColor(t){return this.backgroundColor=t,this.update(!1)},setFill:function setFill(t){return this.color=t,this.update(!1)},setColor:function setColor(t){return this.color=t,this.update(!1)},setResolution:function setResolution(t){return this.resolution=t,this.update(!1)},setStroke:function setStroke(t,i){return void 0===i&&(i=this.strokeThickness),void 0===t&&0!==this.strokeThickness?(this.strokeThickness=0,this.update(!0)):this.stroke===t&&this.strokeThickness===i||(this.stroke=t,this.strokeThickness=i,this.update(!0)),this.parent},setShadow:function setShadow(t,i,o,a,u,d){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o="#000"),void 0===a&&(a=0),void 0===u&&(u=!1),void 0===d&&(d=!0),this.shadowOffsetX=t,this.shadowOffsetY=i,this.shadowColor=o,this.shadowBlur=a,this.shadowStroke=u,this.shadowFill=d,this.update(!1)},setShadowOffset:function setShadowOffset(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.shadowOffsetX=t,this.shadowOffsetY=i,this.update(!1)},setShadowColor:function setShadowColor(t){return void 0===t&&(t="#000"),this.shadowColor=t,this.update(!1)},setShadowBlur:function setShadowBlur(t){return void 0===t&&(t=0),this.shadowBlur=t,this.update(!1)},setShadowStroke:function setShadowStroke(t){return this.shadowStroke=t,this.update(!1)},setShadowFill:function setShadowFill(t){return this.shadowFill=t,this.update(!1)},setWordWrapWidth:function setWordWrapWidth(t,i){return void 0===i&&(i=!1),this.wordWrapWidth=t,this.wordWrapUseAdvanced=i,this.update(!1)},setWordWrapCallback:function setWordWrapCallback(t,i){return void 0===i&&(i=null),this.wordWrapCallback=t,this.wordWrapCallbackScope=i,this.update(!1)},setAlign:function setAlign(t){return void 0===t&&(t="left"),this.align=t,this.update(!1)},setMaxLines:function setMaxLines(t){return void 0===t&&(t=0),this.maxLines=t,this.update(!1)},getTextMetrics:function getTextMetrics(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}},toJSON:function toJSON(){var t={};for(var i in S)t[i]=this[i];return t.metrics=this.getTextMetrics(),t},destroy:function destroy(){this.parent=void 0}});t.exports=C},function(t,i,o){var a=o(31);t.exports=function MeasureText(t){var i=a.create(this),o=i.getContext("2d");t.syncFont(i,o);var u=o.measureText(t.testString);if("actualBoundingBoxAscent"in u){var d=u.actualBoundingBoxAscent,b=u.actualBoundingBoxDescent;return a.remove(i),{ascent:d,descent:b,fontSize:d+b}}var S=Math.ceil(u.width*t.baselineX),C=S,M=2*C;C=C*t.baselineY|0,i.width=S,i.height=M,o.fillStyle="#f00",o.fillRect(0,0,S,M),o.font=t._font,o.textBaseline="alphabetic",o.fillStyle="#000",o.fillText(t.testString,0,C);var P={ascent:0,descent:0,fontSize:0},R=o.getImageData(0,0,S,M);if(!R)return P.ascent=C,P.descent=C+6,P.fontSize=P.ascent+P.descent,a.remove(i),P;var O,B,N=R.data,Y=N.length,G=4*S,X=0,U=!1;for(O=0;O<C;O++){for(B=0;B<G;B+=4)if(255!==N[X+B]){U=!0;break}if(U)break;X+=G}for(P.ascent=C-O,X=Y-G,U=!1,O=M;O>C;O--){for(B=0;B<G;B+=4)if(255!==N[X+B]){U=!0;break}if(U)break;X-=G}return P.descent=O-C,P.fontSize=P.ascent+P.descent,a.remove(i),P}},function(t,i,o){var a=o(1097),u=o(0),d=o(36),b=o(59),S=o(65),C=o(14),M=o(34),P=new u({Extends:M,Mixins:[a],initialize:function Arc(t,i,o,a,u,d,b,C,P){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=128),void 0===u&&(u=0),void 0===d&&(d=360),void 0===b&&(b=!1),M.call(this,t,"Arc",new S(0,0,a)),this._startAngle=u,this._endAngle=d,this._anticlockwise=b,this._iterations=.01,this.setPosition(i,o);var R=2*this.geom.radius;this.setSize(R,R),void 0!==C&&this.setFillStyle(C,P),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function get(){return this._iterations},set:function set(t){this._iterations=t,this.updateData()}},radius:{get:function get(){return this.geom.radius},set:function set(t){this.geom.radius=t;var i=2*t;this.setSize(i,i),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function get(){return this._startAngle},set:function set(t){this._startAngle=t,this.updateData()}},endAngle:{get:function get(){return this._endAngle},set:function set(t){this._endAngle=t,this.updateData()}},anticlockwise:{get:function get(){return this._anticlockwise},set:function set(t){this._anticlockwise=t,this.updateData()}},setRadius:function setRadius(t){return this.radius=t,this},setIterations:function setIterations(t){return void 0===t&&(t=.01),this.iterations=t,this},setStartAngle:function setStartAngle(t,i){return this._startAngle=t,void 0!==i&&(this._anticlockwise=i),this.updateData()},setEndAngle:function setEndAngle(t,i){return this._endAngle=t,void 0!==i&&(this._anticlockwise=i),this.updateData()},updateData:function updateData(){var t=this._iterations,i=t,o=this.geom.radius,a=d(this._startAngle),u=d(this._endAngle),S=o,M=o;u-=a,this._anticlockwise?u<-C.PI2?u=-C.PI2:u>0&&(u=-C.PI2+u%C.PI2):u>C.PI2?u=C.PI2:u<0&&(u=C.PI2+u%C.PI2);for(var P,R=[S+Math.cos(a)*o,M+Math.sin(a)*o];i<1;)P=u*i+a,R.push(S+Math.cos(P)*o,M+Math.sin(P)*o),i+=t;return P=u+a,R.push(S+Math.cos(P)*o,M+Math.sin(P)*o),R.push(S+Math.cos(a)*o,M+Math.sin(a)*o),this.pathIndexes=b(R),this.pathData=R,this}});t.exports=P},function(t,i,o){var a=o(0),u=o(1100),d=o(59),b=o(10),S=o(34),C=new a({Extends:S,Mixins:[u],initialize:function Curve(t,i,o,a,u,d){void 0===i&&(i=0),void 0===o&&(o=0),S.call(this,t,"Curve",a),this._smoothness=32,this._curveBounds=new b,this.closePath=!1,this.setPosition(i,o),void 0!==u&&this.setFillStyle(u,d),this.updateData()},smoothness:{get:function get(){return this._smoothness},set:function set(t){this._smoothness=t,this.updateData()}},setSmoothness:function setSmoothness(t){return this._smoothness=t,this.updateData()},updateData:function updateData(){var t=this._curveBounds,i=this._smoothness;this.geom.getBounds(t,i),this.setSize(t.width,t.height),this.updateDisplayOrigin();for(var o=[],a=this.geom.getPoints(i),u=0;u<a.length;u++)o.push(a[u].x,a[u].y);return o.push(a[0].x,a[0].y),this.pathIndexes=d(o),this.pathData=o,this}});t.exports=C},function(t,i,o){var a=o(0),u=o(59),d=o(1103),b=o(111),S=o(34),C=new a({Extends:S,Mixins:[d],initialize:function Ellipse(t,i,o,a,u,d,C){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=128),void 0===u&&(u=128),S.call(this,t,"Ellipse",new b(a/2,u/2,a,u)),this._smoothness=64,this.setPosition(i,o),this.width=a,this.height=u,void 0!==d&&this.setFillStyle(d,C),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function get(){return this._smoothness},set:function set(t){this._smoothness=t,this.updateData()}},setSize:function setSize(t,i){return this.width=t,this.height=i,this.geom.setPosition(t/2,i/2),this.geom.setSize(t,i),this.updateData()},setSmoothness:function setSmoothness(t){return this._smoothness=t,this.updateData()},updateData:function updateData(){for(var t=[],i=this.geom.getPoints(this._smoothness),o=0;o<i.length;o++)t.push(i[o].x,i[o].y);return t.push(i[0].x,i[0].y),this.pathIndexes=u(t),this.pathData=t,this}});t.exports=C},function(t,i,o){var a=o(0),u=o(34),d=o(1106),b=new a({Extends:u,Mixins:[d],initialize:function Grid(t,i,o,a,d,b,S,C,M,P,R){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=128),void 0===d&&(d=128),void 0===b&&(b=32),void 0===S&&(S=32),u.call(this,t,"Grid",null),this.cellWidth=b,this.cellHeight=S,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(i,o),this.setSize(a,d),this.setFillStyle(C,M),void 0!==P&&this.setOutlineStyle(P,R),this.updateDisplayOrigin()},setFillStyle:function setFillStyle(t,i){return void 0===i&&(i=1),void 0===t?this.showCells=!1:(this.fillColor=t,this.fillAlpha=i,this.showCells=!0),this},setAltFillStyle:function setAltFillStyle(t,i){return void 0===i&&(i=1),void 0===t?this.showAltCells=!1:(this.altFillColor=t,this.altFillAlpha=i,this.showAltCells=!0),this},setOutlineStyle:function setOutlineStyle(t,i){return void 0===i&&(i=1),void 0===t?this.showOutline=!1:(this.outlineFillColor=t,this.outlineFillAlpha=i,this.showOutline=!0),this}});t.exports=b},function(t,i,o){var a=o(1109),u=o(0),d=o(34),b=new u({Extends:d,Mixins:[a],initialize:function IsoBox(t,i,o,a,u,b,S,C){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=48),void 0===u&&(u=32),void 0===b&&(b=15658734),void 0===S&&(S=10066329),void 0===C&&(C=13421772),d.call(this,t,"IsoBox",null),this.projection=4,this.fillTop=b,this.fillLeft=S,this.fillRight=C,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(i,o),this.setSize(a,u),this.updateDisplayOrigin()},setProjection:function setProjection(t){return this.projection=t,this},setFaces:function setFaces(t,i,o){return void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===o&&(o=!0),this.showTop=t,this.showLeft=i,this.showRight=o,this},setFillStyle:function setFillStyle(t,i,o){return this.fillTop=t,this.fillLeft=i,this.fillRight=o,this.isFilled=!0,this}});t.exports=b},function(t,i,o){var a=o(0),u=o(1112),d=o(34),b=new a({Extends:d,Mixins:[u],initialize:function IsoTriangle(t,i,o,a,u,b,S,C,M){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=48),void 0===u&&(u=32),void 0===b&&(b=!1),void 0===S&&(S=15658734),void 0===C&&(C=10066329),void 0===M&&(M=13421772),d.call(this,t,"IsoTriangle",null),this.projection=4,this.fillTop=S,this.fillLeft=C,this.fillRight=M,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=b,this.isFilled=!0,this.setPosition(i,o),this.setSize(a,u),this.updateDisplayOrigin()},setProjection:function setProjection(t){return this.projection=t,this},setReversed:function setReversed(t){return this.isReversed=t,this},setFaces:function setFaces(t,i,o){return void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===o&&(o=!0),this.showTop=t,this.showLeft=i,this.showRight=o,this},setFillStyle:function setFillStyle(t,i,o){return this.fillTop=t,this.fillLeft=i,this.fillRight=o,this.isFilled=!0,this}});t.exports=b},function(t,i,o){var a=o(0),u=o(34),d=o(47),b=o(1115),S=new a({Extends:u,Mixins:[b],initialize:function Line(t,i,o,a,b,S,C,M,P){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===b&&(b=0),void 0===S&&(S=128),void 0===C&&(C=0),u.call(this,t,"Line",new d(a,b,S,C));var R=Math.max(1,this.geom.right-this.geom.left),O=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(i,o),this.setSize(R,O),void 0!==M&&this.setStrokeStyle(1,M,P),this.updateDisplayOrigin()},setLineWidth:function setLineWidth(t,i){return void 0===i&&(i=t),this._startWidth=t,this._endWidth=i,this.lineWidth=t,this},setTo:function setTo(t,i,o,a){return this.geom.setTo(t,i,o,a),this}});t.exports=S},function(t,i,o){var a=o(1118),u=o(0),d=o(59),b=o(469),S=o(227),C=o(34),M=o(472),P=new u({Extends:C,Mixins:[a],initialize:function Polygon(t,i,o,a,u,d){void 0===i&&(i=0),void 0===o&&(o=0),C.call(this,t,"Polygon",new S(a));var M=b(this.geom);this.setPosition(i,o),this.setSize(M.width,M.height),void 0!==u&&this.setFillStyle(u,d),this.updateDisplayOrigin(),this.updateData()},smooth:function smooth(t){void 0===t&&(t=1);for(var i=0;i<t;i++)M(this.geom);return this.updateData()},updateData:function updateData(){for(var t=[],i=this.geom.points,o=0;o<i.length;o++)t.push(i[o].x,i[o].y);return t.push(i[0].x,i[0].y),this.pathIndexes=d(t),this.pathData=t,this}});t.exports=P},function(t,i,o){var a=o(10);t.exports=function GetAABB(t,i){void 0===i&&(i=new a);for(var o,u=1/0,d=1/0,b=-u,S=-d,C=0;C<t.points.length;C++)o=t.points[C],u=Math.min(u,o.x),d=Math.min(d,o.y),b=Math.max(b,o.x),S=Math.max(S,o.y);return i.x=u,i.y=d,i.width=b-u,i.height=S-d,i}},function(t,i,o){var a=o(67),u=o(47),d=o(471);t.exports=function GetPoints(t,i,o,b){void 0===b&&(b=[]);var S=t.points,C=d(t);!i&&o>0&&(i=C/o);for(var M=0;M<i;M++)for(var P=C*(M/i),R=0,O=0;O<S.length;O++){var B=S[O],N=S[(O+1)%S.length],Y=new u(B.x,B.y,N.x,N.y),G=a(Y);if(!(P<R||P>R+G)){var X=Y.getPoint((P-R)/G);b.push(X);break}R+=G}return b}},function(t,i,o){var a=o(67),u=o(47);t.exports=function Perimeter(t){for(var i=t.points,o=0,d=0;d<i.length;d++){var b=i[d],S=i[(d+1)%i.length],C=new u(b.x,b.y,S.x,S.y);o+=a(C)}return o}},function(t,i){var o=function copy(t,i){return t[0]=i[0],t[1]=i[1],t};t.exports=function Smooth(t){var i,a=[],u=t.points;for(i=0;i<u.length;i++)a.push([u[i].x,u[i].y]);var d=[];for(a.length>0&&d.push(o([0,0],a[0])),i=0;i<a.length-1;i++){var b=a[i],S=a[i+1],C=b[0],M=b[1],P=S[0],R=S[1];d.push([.85*C+.15*P,.85*M+.15*R]),d.push([.15*C+.85*P,.15*M+.85*R])}return a.length>1&&d.push(o([0,0],a[a.length-1])),t.setTo(d)}},function(t,i,o){var a=o(0),u=o(10),d=o(34),b=o(1121),S=new a({Extends:d,Mixins:[b],initialize:function Rectangle(t,i,o,a,b,S,C){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=128),void 0===b&&(b=128),d.call(this,t,"Rectangle",new u(0,0,a,b)),this.setPosition(i,o),this.setSize(a,b),void 0!==S&&this.setFillStyle(S,C),this.updateDisplayOrigin(),this.updateData()},setSize:function setSize(t,i){return this.width=t,this.height=i,this.geom.setSize(t,i),this.updateData(),this},updateData:function updateData(){var t=[],i=this.geom,o=this._tempLine;return i.getLineA(o),t.push(o.x1,o.y1,o.x2,o.y2),i.getLineB(o),t.push(o.x2,o.y2),i.getLineC(o),t.push(o.x2,o.y2),i.getLineD(o),t.push(o.x2,o.y2),this.pathData=t,this}});t.exports=S},function(t,i,o){var a=o(1124),u=o(0),d=o(59),b=o(34),S=new u({Extends:b,Mixins:[a],initialize:function Star(t,i,o,a,u,d,S,C){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=5),void 0===u&&(u=32),void 0===d&&(d=64),b.call(this,t,"Star",null),this._points=a,this._innerRadius=u,this._outerRadius=d,this.setPosition(i,o),this.setSize(2*d,2*d),void 0!==S&&this.setFillStyle(S,C),this.updateDisplayOrigin(),this.updateData()},setPoints:function setPoints(t){return this._points=t,this.updateData()},setInnerRadius:function setInnerRadius(t){return this._innerRadius=t,this.updateData()},setOuterRadius:function setOuterRadius(t){return this._outerRadius=t,this.updateData()},points:{get:function get(){return this._points},set:function set(t){this._points=t,this.updateData()}},innerRadius:{get:function get(){return this._innerRadius},set:function set(t){this._innerRadius=t,this.updateData()}},outerRadius:{get:function get(){return this._outerRadius},set:function set(t){this._outerRadius=t,this.updateData()}},updateData:function updateData(){var t=[],i=this._points,o=this._innerRadius,a=this._outerRadius,u=Math.PI/2*3,b=Math.PI/i,S=a,C=a;t.push(S,C+-a);for(var M=0;M<i;M++)t.push(S+Math.cos(u)*a,C+Math.sin(u)*a),u+=b,t.push(S+Math.cos(u)*o,C+Math.sin(u)*o),u+=b;return t.push(S,C+-a),this.pathIndexes=d(t),this.pathData=t,this}});t.exports=S},function(t,i,o){var a=o(0),u=o(34),d=o(82),b=o(1127),S=new a({Extends:u,Mixins:[b],initialize:function Triangle(t,i,o,a,b,S,C,M,P,R,O){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===b&&(b=128),void 0===S&&(S=64),void 0===C&&(C=0),void 0===M&&(M=128),void 0===P&&(P=128),u.call(this,t,"Triangle",new d(a,b,S,C,M,P));var B=this.geom.right-this.geom.left,N=this.geom.bottom-this.geom.top;this.setPosition(i,o),this.setSize(B,N),void 0!==R&&this.setFillStyle(R,O),this.updateDisplayOrigin(),this.updateData()},setTo:function setTo(t,i,o,a,u,d){return this.geom.setTo(t,i,o,a,u,d),this.updateData()},updateData:function updateData(){var t=[],i=this.geom,o=this._tempLine;return i.getLineA(o),t.push(o.x1,o.y1,o.x2,o.y2),i.getLineB(o),t.push(o.x2,o.y2),i.getLineC(o),t.push(o.x2,o.y2),this.pathData=t,this}});t.exports=S},function(t,i,o){var a=o(4),u=o(67);t.exports=function GetPoint(t,i,o){void 0===o&&(o=new a);var d=t.getLineA(),b=t.getLineB(),S=t.getLineC();if(i<=0||i>=1)return o.x=d.x1,o.y=d.y1,o;var C=u(d),M=u(b),P=u(S),R=(C+M+P)*i,O=0;return R<C?(O=R/C,o.x=d.x1+(d.x2-d.x1)*O,o.y=d.y1+(d.y2-d.y1)*O):R>C+M?(O=(R-=C+M)/P,o.x=S.x1+(S.x2-S.x1)*O,o.y=S.y1+(S.y2-S.y1)*O):(O=(R-=C)/M,o.x=b.x1+(b.x2-b.x1)*O,o.y=b.y1+(b.y2-b.y1)*O),o}},function(t,i,o){var a=o(67),u=o(4);t.exports=function GetPoints(t,i,o,d){void 0===d&&(d=[]);var b=t.getLineA(),S=t.getLineB(),C=t.getLineC(),M=a(b),P=a(S),R=a(C),O=M+P+R;!i&&o>0&&(i=O/o);for(var B=0;B<i;B++){var N=O*(B/i),Y=0,G=new u;N<M?(Y=N/M,G.x=b.x1+(b.x2-b.x1)*Y,G.y=b.y1+(b.y2-b.y1)*Y):N>M+P?(Y=(N-=M+P)/R,G.x=C.x1+(C.x2-C.x1)*Y,G.y=C.y1+(C.y2-C.y1)*Y):(Y=(N-=M)/P,G.x=S.x1+(S.x2-S.x1)*Y,G.y=S.y1+(S.y2-S.y1)*Y),d.push(G)}return d}},function(t,i){t.exports=function SetValue(t,i,o){if(!t||"number"==typeof t)return!1;if(t.hasOwnProperty(i))return t[i]=o,!0;if(-1!==i.indexOf(".")){for(var a=i.split("."),u=t,d=t,b=0;b<a.length;b++){if(!u.hasOwnProperty(a[b]))return!1;d=u,u=u[a[b]]}return d[a[a.length-1]]=o,!0}return!1}},function(t,i,o){var a=o(116),u=o(117);t.exports=function GenerateVerts(t,i,o,d,b,S,C){if(void 0===d&&(d=!1),void 0===S&&(S=16777215),void 0===C&&(C=1),t.length===i.length){var M,P,R,O,B,N,Y,G,X,U,z,V={faces:[],vertices:[]},W=d?3:2,H=Array.isArray(S),j=Array.isArray(C);if(Array.isArray(o)&&o.length>0)for(M=0;M<o.length;M++){var q=o[M],Z=2*o[M],K=o[M]*W;P=t[K],R=t[K+1],O=d?t[K+2]:0,B=i[Z],N=i[Z+1],Y=H?S[q]:S,G=j?C[q]:C,X=0,U=0,z=0,b&&(X=b[K],U=b[K+1],z=d?b[K+2]:0),V.vertices.push(new u(P,R,O,B,N,Y,G,X,U,z))}else{var $=0,tt=0;for(M=0;M<t.length;M+=W)P=t[M],R=t[M+1],O=d?t[M+2]:0,B=i[$],N=i[$+1],Y=H?S[tt]:S,G=j?C[tt]:C,X=0,U=0,z=0,b&&(X=b[M],U=b[M+1],z=d?b[M+2]:0),V.vertices.push(new u(P,R,O,B,N,Y,G,X,U,z)),$+=2,tt++}for(M=0;M<V.vertices.length;M+=3){var et=V.vertices[M],it=V.vertices[M+1],nt=V.vertices[M+2];V.faces.push(new a(et,it,nt))}return V}console.warn("GenerateVerts: vertices and uvs count not equal")}},function(t,i,o){var a=o(116),u=o(69),d=o(39),b=o(117),S=new d,C=new d,M=new u;t.exports=function GenerateObjVerts(t,i,o,u,d,P,R,O,B,N){void 0===o&&(o=1),void 0===u&&(u=0),void 0===d&&(d=0),void 0===P&&(P=0),void 0===R&&(R=0),void 0===O&&(O=0),void 0===B&&(B=0),void 0===N&&(N=!0);var Y={faces:[],verts:[]},G=t.materials;S.set(u,d,P),C.set(R,O,B),M.fromRotationXYTranslation(C,S,N);for(var X=0;X<t.models.length;X++)for(var U=t.models[X],z=U.vertices,V=U.textureCoords,W=U.faces,H=0;H<W.length;H++){var j=W[H],q=j.vertices[0],Z=j.vertices[1],K=j.vertices[2],$=z[q.vertexIndex],tt=z[Z.vertexIndex],et=z[K.vertexIndex],it=q.textureCoordsIndex,nt=Z.textureCoordsIndex,rt=K.textureCoordsIndex,st=-1===it?{u:0,v:1}:V[it],ot=-1===nt?{u:0,v:0}:V[nt],at=-1===rt?{u:1,v:1}:V[rt],ht=16777215;""!==j.material&&G[j.material]&&(ht=G[j.material]);var lt=new b($.x*o,$.y*o,$.z*o,st.u,st.v,ht).transformMat4(M),ut=new b(tt.x*o,tt.y*o,tt.z*o,ot.u,ot.v,ht).transformMat4(M),ct=new b(et.x*o,et.y*o,et.z*o,at.u,at.v,ht).transformMat4(M);Y.verts.push(lt,ut,ct),Y.faces.push(new a(lt,ut,ct))}return i&&(i.faces=i.faces.concat(Y.faces),i.vertices=i.vertices.concat(Y.verts)),Y}},function(t,i,o){var a=o(65),u=o(0),d=o(11),b=o(200),S=o(12),C=new u({Extends:a,Mixins:[d.ScrollFactor,d.Visible],initialize:function Light(t,i,o,u,d,S,C){a.call(this,t,i,o),this.color=new b(u,d,S),this.intensity=C,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function willRender(t){return!(C.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},setColor:function setColor(t){var i=S.getFloatsFromUintRGB(t);return this.color.set(i[0],i[1],i[2]),this},setIntensity:function setIntensity(t){return this.intensity=t,this},setRadius:function setRadius(t){return this.radius=t,this}});C.RENDER_MASK=15,t.exports=C},function(t,i,o){var a=o(151),u=o(0),d=o(50),b=o(481),S=o(150),C=o(200),M=o(74),P=o(79),R=o(12),O=new u({initialize:function LightsManager(){this.lights=[],this.ambientColor=new C(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function addPointLight(t,i,o,a,u,d){return this.systems.displayList.add(new S(this.scene,t,i,o,a,u,d))},enable:function enable(){return-1===this.maxLights&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function disable(){return this.active=!1,this},getLights:function getLights(t){for(var i=this.lights,o=t.worldView,u=[],b=0;b<i.length;b++){var S=i[b];S.willRender(t)&&a(S,o)&&u.push({light:S,distance:d(S.x,S.y,o.centerX,o.centerY)})}return u.length>this.maxLights&&(P(u,this.sortByDistance),u=u.slice(0,this.maxLights)),this.visibleLights=u.length,u},sortByDistance:function sortByDistance(t,i){return t.distance>=i.distance},setAmbientColor:function setAmbientColor(t){var i=R.getFloatsFromUintRGB(t);return this.ambientColor.set(i[0],i[1],i[2]),this},getMaxVisibleLights:function getMaxVisibleLights(){return this.maxLights},getLightCount:function getLightCount(){return this.lights.length},addLight:function addLight(t,i,o,a,u){void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=128),void 0===a&&(a=16777215),void 0===u&&(u=1);var d=R.getFloatsFromUintRGB(a),S=new b(t,i,o,d[0],d[1],d[2],u);return this.lights.push(S),S},removeLight:function removeLight(t){var i=this.lights.indexOf(t);return i>=0&&M(this.lights,i),this},shutdown:function shutdown(){this.lights.length=0},destroy:function destroy(){this.shutdown()}});t.exports=O},function(t,i,o){var a=o(56),u=o(17),d={Circle:o(1191),Ellipse:o(1201),Intersects:o(484),Line:o(1221),Mesh:o(1243),Point:o(1246),Polygon:o(1260),Rectangle:o(502),Triangle:o(1293)};d=u(!1,d,a),t.exports=d},function(t,i,o){t.exports={CircleToCircle:o(231),CircleToRectangle:o(151),GetCircleToCircle:o(1211),GetCircleToRectangle:o(1212),GetLineToCircle:o(232),GetLineToLine:o(485),GetLineToPoints:o(486),GetLineToPolygon:o(487),GetLineToRectangle:o(234),GetRaysFromPointToPolygon:o(1213),GetRectangleIntersection:o(1214),GetRectangleToRectangle:o(1215),GetRectangleToTriangle:o(1216),GetTriangleToCircle:o(1217),GetTriangleToLine:o(492),GetTriangleToTriangle:o(1218),LineToCircle:o(233),LineToLine:o(96),LineToRectangle:o(488),PointToLine:o(496),PointToLineSegment:o(1219),RectangleToRectangle:o(152),RectangleToTriangle:o(489),RectangleToValues:o(1220),TriangleToCircle:o(491),TriangleToLine:o(493),TriangleToTriangle:o(494)}},function(t,i,o){var a=o(39);t.exports=function GetLineToLine(t,i,o){var u=t.x1,d=t.y1,b=t.x2,S=t.y2,C=i.x1,M=i.y1,P=b-u,R=S-d,O=i.x2-C,B=i.y2-M;if(0===P||0==B*P-O*R)return!1;var N=(P*(M-d)+R*(u-C))/(O*R-B*P),Y=(C+O*N-u)/P;return Y<0||N<0||N>1?null:(void 0===o&&(o=new a),o.set(u+P*Y,d+R*Y,Y))}},function(t,i,o){var a=o(39),u=o(485),d=new(o(47)),b=new a;t.exports=function GetLineToPoints(t,i,o){void 0===o&&(o=new a);var S=!1;o.set(),b.set();for(var C=i[0],M=1;M<i.length;M++){var P=i[M];d.setTo(C.x,C.y,P.x,P.y),C=P,u(t,d,b)&&(!S||b.z<o.z)&&(o.copy(b),S=!0)}return S?o:null}},function(t,i,o){var a=o(39),u=o(140),d=o(486),b=new a;t.exports=function GetLineToPolygon(t,i,o){void 0===o&&(o=new u),Array.isArray(i)||(i=[i]);var a=!1;o.set(),b.set();for(var S=0;S<i.length;S++)d(t,i[S].points,b)&&(!a||b.z<o.z)&&(o.set(b.x,b.y,b.z,S),a=!0);return a?o:null}},function(t,i){t.exports=function LineToRectangle(t,i){var o=t.x1,a=t.y1,u=t.x2,d=t.y2,b=i.x,S=i.y,C=i.right,M=i.bottom,P=0;if(o>=b&&o<=C&&a>=S&&a<=M||u>=b&&u<=C&&d>=S&&d<=M)return!0;if(o<b&&u>=b){if((P=a+(d-a)*(b-o)/(u-o))>S&&P<=M)return!0}else if(o>C&&u<=C&&(P=a+(d-a)*(C-o)/(u-o))>=S&&P<=M)return!0;if(a<S&&d>=S){if((P=o+(u-o)*(S-a)/(d-a))>=b&&P<=C)return!0}else if(a>M&&d<=M&&(P=o+(u-o)*(M-a)/(d-a))>=b&&P<=C)return!0;return!1}},function(t,i,o){var a=o(96),u=o(57),d=o(235),b=o(490);t.exports=function RectangleToTriangle(t,i){if(i.left>t.right||i.right<t.left||i.top>t.bottom||i.bottom<t.top)return!1;var o=i.getLineA(),S=i.getLineB(),C=i.getLineC();if(u(t,o.x1,o.y1)||u(t,o.x2,o.y2))return!0;if(u(t,S.x1,S.y1)||u(t,S.x2,S.y2))return!0;if(u(t,C.x1,C.y1)||u(t,C.x2,C.y2))return!0;var M=t.getLineA(),P=t.getLineB(),R=t.getLineC(),O=t.getLineD();if(a(o,M)||a(o,P)||a(o,R)||a(o,O))return!0;if(a(S,M)||a(S,P)||a(S,R)||a(S,O))return!0;if(a(C,M)||a(C,P)||a(C,R)||a(C,O))return!0;var B=b(t);return d(i,B,!0).length>0}},function(t,i){t.exports=function Decompose(t,i){return void 0===i&&(i=[]),i.push({x:t.x,y:t.y}),i.push({x:t.right,y:t.y}),i.push({x:t.right,y:t.bottom}),i.push({x:t.x,y:t.bottom}),i}},function(t,i,o){var a=o(233),u=o(115);t.exports=function TriangleToCircle(t,i){return!(t.left>i.right||t.right<i.left||t.top>i.bottom||t.bottom<i.top||!u(t,i.x,i.y)&&!a(t.getLineA(),i)&&!a(t.getLineB(),i)&&!a(t.getLineC(),i))}},function(t,i,o){var a=o(4),u=o(493),d=o(96);t.exports=function GetTriangleToLine(t,i,o){if(void 0===o&&(o=[]),u(t,i))for(var b=t.getLineA(),S=t.getLineB(),C=t.getLineC(),M=[new a,new a,new a],P=[d(b,i,M[0]),d(S,i,M[1]),d(C,i,M[2])],R=0;R<3;R++)P[R]&&o.push(M[R]);return o}},function(t,i,o){var a=o(96);t.exports=function TriangleToLine(t,i){return!!(t.contains(i.x1,i.y1)||t.contains(i.x2,i.y2)||a(t.getLineA(),i)||a(t.getLineB(),i)||a(t.getLineC(),i))}},function(t,i,o){var a=o(235),u=o(495),d=o(96);t.exports=function TriangleToTriangle(t,i){if(t.left>i.right||t.right<i.left||t.top>i.bottom||t.bottom<i.top)return!1;var o=t.getLineA(),b=t.getLineB(),S=t.getLineC(),C=i.getLineA(),M=i.getLineB(),P=i.getLineC();if(d(o,C)||d(o,M)||d(o,P))return!0;if(d(b,C)||d(b,M)||d(b,P))return!0;if(d(S,C)||d(S,M)||d(S,P))return!0;var R=u(t),O=a(i,R,!0);return O.length>0||(R=u(i),(O=a(t,R,!0)).length>0)}},function(t,i){t.exports=function Decompose(t,i){return void 0===i&&(i=[]),i.push({x:t.x1,y:t.y1}),i.push({x:t.x2,y:t.y2}),i.push({x:t.x3,y:t.y3}),i}},function(t,i){t.exports=function PointToLine(t,i,o){void 0===o&&(o=1);var a=i.x1,u=i.y1,d=i.x2,b=i.y2,S=t.x,C=t.y,M=(d-a)*(d-a)+(b-u)*(b-u);if(0===M)return!1;var P=((S-a)*(d-a)+(C-u)*(b-u))/M;if(P<0)return Math.sqrt((a-S)*(a-S)+(u-C)*(u-C))<=o;if(P>=0&&P<=1){var R=((u-C)*(d-a)-(a-S)*(b-u))/M;return Math.abs(R)*Math.sqrt(M)<=o}return Math.sqrt((d-S)*(d-S)+(b-C)*(b-C))<=o}},function(t,i,o){var a=o(14),u=o(68),d=o(97);t.exports=function NormalAngle(t){var i=d(t)-a.TAU;return u(i,-Math.PI,Math.PI)}},function(t,i){var o=!0,a="untitled",u="",d="";function stripComments(t){var i=t.indexOf("#");return i>-1?t.substring(0,i):t}function currentModel(t){return 0===t.models.length&&t.models.push({faces:[],name:a,textureCoords:[],vertexNormals:[],vertices:[]}),u="",t.models[t.models.length-1]}function parseObject(t,i){var o=t.length>=2?t[1]:a;i.models.push({faces:[],name:o,textureCoords:[],vertexNormals:[],vertices:[]}),u=""}function parseGroup(t){2===t.length&&(u=t[1])}function parseVertexCoords(t,i){var o=t.length,a=o>=2?parseFloat(t[1]):0,u=o>=3?parseFloat(t[2]):0,d=o>=4?parseFloat(t[3]):0;currentModel(i).vertices.push({x:a,y:u,z:d})}function parseTextureCoords(t,i){var a=t.length,u=a>=2?parseFloat(t[1]):0,d=a>=3?parseFloat(t[2]):0,b=a>=4?parseFloat(t[3]):0;isNaN(u)&&(u=0),isNaN(d)&&(d=0),isNaN(b)&&(b=0),o&&(d=1-d),currentModel(i).textureCoords.push({u:u,v:d,w:b})}function parseVertexNormal(t,i){var o=t.length,a=o>=2?parseFloat(t[1]):0,u=o>=3?parseFloat(t[2]):0,d=o>=4?parseFloat(t[3]):0;currentModel(i).vertexNormals.push({x:a,y:u,z:d})}function parsePolygon(t,i){var o=t.length-1;if(!(o<3)){for(var a={group:u,material:d,vertices:[]},b=0;b<o;b++){var S=t[b+1].split("/"),C=S.length;if(!(C<1||C>3)){var M=0,P=0,R=0;M=parseInt(S[0],10),C>1&&""!==S[1]&&(P=parseInt(S[1],10)),C>2&&(R=parseInt(S[2],10)),0!==M&&(M<0&&(M=currentModel(i).vertices.length+1+M),P-=1,M-=1,R-=1,a.vertices.push({textureCoordsIndex:P,vertexIndex:M,vertexNormalIndex:R}))}}currentModel(i).faces.push(a)}}function parseMtlLib(t,i){t.length>=2&&i.materialLibraries.push(t[1])}function parseUseMtl(t){t.length>=2&&(d=t[1])}t.exports=function ParseObj(t,i){void 0===i&&(i=!0),o=i;var a={materials:{},materialLibraries:[],models:[]};u="",d="";for(var b=t.split("\n"),S=0;S<b.length;S++){var C=stripComments(b[S]).replace(/\s\s+/g," ").trim().split(" ");switch(C[0].toLowerCase()){case"o":parseObject(C,a);break;case"g":parseGroup(C);break;case"v":parseVertexCoords(C,a);break;case"vt":parseTextureCoords(C,a);break;case"vn":parseVertexNormal(C,a);break;case"f":parsePolygon(C,a);break;case"mtllib":parseMtlLib(C,a);break;case"usemtl":parseUseMtl(C)}}return a}},function(t,i,o){var a=o(103);t.exports=function ParseObjMaterial(t){for(var i={},o=t.split("\n"),u="",d=0;d<o.length;d++){var b=o[d].trim();if(0!==b.indexOf("#")&&""!==b){var S=b.replace(/\s\s+/g," ").trim().split(" ");switch(S[0].toLowerCase()){case"newmtl":u=S[1];break;case"kd":var C=Math.floor(255*S[1]),M=S.length>=2?Math.floor(255*S[2]):C,P=S.length>=3?Math.floor(255*S[3]):C;i[u]=a(C,M,P)}}}return i}},function(t,i){t.exports=function GetMagnitude(t){return Math.sqrt(t.x*t.x+t.y*t.y)}},function(t,i){t.exports=function GetMagnitudeSq(t){return t.x*t.x+t.y*t.y}},function(t,i,o){var a=o(10);a.Area=o(1267),a.Ceil=o(1268),a.CeilAll=o(1269),a.CenterOn=o(190),a.Clone=o(1270),a.Contains=o(57),a.ContainsPoint=o(1271),a.ContainsRect=o(503),a.CopyFrom=o(1272),a.Decompose=o(490),a.Equals=o(1273),a.FitInside=o(1274),a.FitOutside=o(1275),a.Floor=o(1276),a.FloorAll=o(1277),a.FromPoints=o(199),a.FromXY=o(1278),a.GetAspectRatio=o(237),a.GetCenter=o(1279),a.GetPoint=o(171),a.GetPoints=o(306),a.GetSize=o(1280),a.Inflate=o(1281),a.Intersection=o(1282),a.MarchingAnts=o(316),a.MergePoints=o(1283),a.MergeRect=o(1284),a.MergeXY=o(1285),a.Offset=o(1286),a.OffsetPoint=o(1287),a.Overlaps=o(1288),a.Perimeter=o(130),a.PerimeterPoint=o(1289),a.Random=o(174),a.RandomOutside=o(1290),a.SameDimensions=o(1291),a.Scale=o(1292),a.Union=o(441),t.exports=a},function(t,i){t.exports=function ContainsRect(t,i){return!(i.width*i.height>t.width*t.height)&&i.x>t.x&&i.x<t.right&&i.right>t.x&&i.right<t.right&&i.y>t.y&&i.y<t.bottom&&i.bottom>t.y&&i.bottom<t.bottom}},function(t,i,o){var a=o(4);t.exports=function Centroid(t,i){return void 0===i&&(i=new a),i.x=(t.x1+t.x2+t.x3)/3,i.y=(t.y1+t.y2+t.y3)/3,i}},function(t,i){t.exports=function Offset(t,i,o){return t.x1+=i,t.y1+=o,t.x2+=i,t.y2+=o,t.x3+=i,t.y3+=o,t}},function(t,i,o){var a=o(4);function getLength(t,i,o,a){var u=t-o,d=i-a,b=u*u+d*d;return Math.sqrt(b)}t.exports=function InCenter(t,i){void 0===i&&(i=new a);var o=t.x1,u=t.y1,d=t.x2,b=t.y2,S=t.x3,C=t.y3,M=getLength(S,C,d,b),P=getLength(o,u,S,C),R=getLength(d,b,o,u),O=M+P+R;return i.x=(o*M+d*P+S*R)/O,i.y=(u*M+b*P+C*R)/O,i}},function(t,i){t.exports=function CreatePixelPerfectHandler(t,i){return function(o,a,u,d){var b=t.getPixelAlpha(a,u,d.texture.key,d.frame.name);return b&&b>=i}}},function(t,i){t.exports=function CreateInteractiveObject(t,i,o){return{gameObject:t,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:i,hitAreaCallback:o,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}}},function(t,i,o){var a=new(o(0))({initialize:function Axis(t,i){this.pad=t,this.events=t.events,this.index=i,this.value=0,this.threshold=.1},update:function update(t){this.value=t},getValue:function getValue(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function destroy(){this.pad=null,this.events=null}});t.exports=a},function(t,i,o){var a=o(0),u=o(239),d=new a({initialize:function Button(t,i){this.pad=t,this.events=t.manager,this.index=i,this.value=0,this.threshold=1,this.pressed=!1},update:function update(t){this.value=t;var i=this.pad,o=this.index;t>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(u.BUTTON_DOWN,i,this,t),this.pad.emit(u.GAMEPAD_BUTTON_DOWN,o,t,this)):this.pressed&&(this.pressed=!1,this.events.emit(u.BUTTON_UP,i,this,t),this.pad.emit(u.GAMEPAD_BUTTON_UP,o,t,this))},destroy:function destroy(){this.pad=null,this.events=null}});t.exports=d},function(t,i,o){var a=o(509),u=o(510),d=o(0),b=o(9),S=o(3),C=new d({Extends:b,initialize:function Gamepad(t,i){b.call(this),this.manager=t,this.pad=i,this.id=i.id,this.index=i.index;for(var o=[],d=0;d<i.buttons.length;d++)o.push(new u(this,d));this.buttons=o;var C=[];for(d=0;d<i.axes.length;d++)C.push(new a(this,d));this.axes=C,this.vibration=i.vibrationActuator;var M={value:0,pressed:!1};this._LCLeft=o[14]?o[14]:M,this._LCRight=o[15]?o[15]:M,this._LCTop=o[12]?o[12]:M,this._LCBottom=o[13]?o[13]:M,this._RCLeft=o[2]?o[2]:M,this._RCRight=o[1]?o[1]:M,this._RCTop=o[3]?o[3]:M,this._RCBottom=o[0]?o[0]:M,this._FBLeftTop=o[4]?o[4]:M,this._FBLeftBottom=o[6]?o[6]:M,this._FBRightTop=o[5]?o[5]:M,this._FBRightBottom=o[7]?o[7]:M;var P={value:0};this._HAxisLeft=C[0]?C[0]:P,this._VAxisLeft=C[1]?C[1]:P,this._HAxisRight=C[2]?C[2]:P,this._VAxisRight=C[3]?C[3]:P,this.leftStick=new S,this.rightStick=new S,this._created=performance.now()},getAxisTotal:function getAxisTotal(){return this.axes.length},getAxisValue:function getAxisValue(t){return this.axes[t].getValue()},setAxisThreshold:function setAxisThreshold(t){for(var i=0;i<this.axes.length;i++)this.axes[i].threshold=t},getButtonTotal:function getButtonTotal(){return this.buttons.length},getButtonValue:function getButtonValue(t){return this.buttons[t].value},isButtonDown:function isButtonDown(t){return this.buttons[t].pressed},update:function update(t){if(!(t.timestamp<this._created)){var i,o=this.buttons,a=t.buttons,u=o.length;for(i=0;i<u;i++)o[i].update(a[i].value);var d=this.axes,b=t.axes;for(u=d.length,i=0;i<u;i++)d[i].update(b[i]);u>=2&&(this.leftStick.set(d[0].getValue(),d[1].getValue()),u>=4&&this.rightStick.set(d[2].getValue(),d[3].getValue()))}},destroy:function destroy(){var t;for(this.removeAllListeners(),this.manager=null,this.pad=null,t=0;t<this.buttons.length;t++)this.buttons[t].destroy();for(t=0;t<this.axes.length;t++)this.axes[t].destroy();this.buttons=[],this.axes=[]},connected:{get:function get(){return this.pad.connected}},timestamp:{get:function get(){return this.pad.timestamp}},left:{get:function get(){return this._LCLeft.pressed}},right:{get:function get(){return this._LCRight.pressed}},up:{get:function get(){return this._LCTop.pressed}},down:{get:function get(){return this._LCBottom.pressed}},A:{get:function get(){return this._RCBottom.pressed}},Y:{get:function get(){return this._RCTop.pressed}},X:{get:function get(){return this._RCLeft.pressed}},B:{get:function get(){return this._RCRight.pressed}},L1:{get:function get(){return this._FBLeftTop.value}},L2:{get:function get(){return this._FBLeftBottom.value}},R1:{get:function get(){return this._FBRightTop.value}},R2:{get:function get(){return this._FBRightBottom.value}}});t.exports=C},function(t,i,o){var a=o(0),u=o(9),d=o(154),b=new a({Extends:u,initialize:function Key(t,i){u.call(this),this.plugin=t,this.keyCode=i,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function setEmitOnRepeat(t){return this.emitOnRepeat=t,this},onDown:function onDown(t){this.originalEvent=t,this.enabled&&(this.altKey=t.altKey,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.location=t.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(d.DOWN,this,t):(this.isDown=!0,this.isUp=!1,this.timeDown=t.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(d.DOWN,this,t)))},onUp:function onUp(t){this.originalEvent=t,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=t.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(d.UP,this,t))},reset:function reset(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function getDuration(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function destroy(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});t.exports=b},function(t,i,o){var a=o(0),u=o(154),d=o(2),b=o(514),S=o(516),C=new a({initialize:function KeyCombo(t,i,o){if(void 0===o&&(o={}),i.length<2)return!1;this.manager=t,this.enabled=!0,this.keyCodes=[];for(var a=0;a<i.length;a++){var C=i[a];"string"==typeof C?this.keyCodes.push(C.toUpperCase().charCodeAt(0)):"number"==typeof C?this.keyCodes.push(C):C.hasOwnProperty("keyCode")&&this.keyCodes.push(C.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=d(o,"resetOnWrongKey",!0),this.maxKeyDelay=d(o,"maxKeyDelay",0),this.resetOnMatch=d(o,"resetOnMatch",!1),this.deleteOnMatch=d(o,"deleteOnMatch",!1);var M=this;this.onKeyDown=function onKeyDownHandler(t){!M.matched&&M.enabled&&b(t,M)&&(M.manager.emit(u.COMBO_MATCH,M,t),M.resetOnMatch?S(M):M.deleteOnMatch&&M.destroy())},this.manager.on(u.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function get(){return this.index/this.size}},destroy:function destroy(){this.enabled=!1,this.keyCodes=[],this.manager.off(u.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});t.exports=C},function(t,i,o){var a=o(515);t.exports=function ProcessKeyCombo(t,i){if(i.matched)return!0;var o=!1,u=!1;if(t.keyCode===i.current)if(i.index>0&&i.maxKeyDelay>0){var d=i.timeLastMatched+i.maxKeyDelay;t.timeStamp<=d&&(u=!0,o=a(t,i))}else u=!0,o=a(t,i);return!u&&i.resetOnWrongKey&&(i.index=0,i.current=i.keyCodes[0]),o&&(i.timeLastMatched=t.timeStamp,i.matched=!0,i.timeMatched=t.timeStamp),o}},function(t,i){t.exports=function AdvanceKeyCombo(t,i){return i.timeLastMatched=t.timeStamp,i.index++,i.index===i.size||(i.current=i.keyCodes[i.index],!1)}},function(t,i){t.exports=function ResetKeyCombo(t){return t.current=t.keyCodes[0],t.index=0,t.timeLastMatched=0,t.matched=!1,t.timeMatched=0,t}},function(t,i,o){var a=o(240);t.exports=function XHRLoader(t,i){var o=a(i,t.xhrSettings),u=new XMLHttpRequest;if(u.open("GET",t.src,o.async,o.user,o.password),u.responseType=t.xhrSettings.responseType,u.timeout=o.timeout,o.headers)for(var d in o.headers)u.setRequestHeader(d,o.headers[d]);return o.header&&o.headerValue&&u.setRequestHeader(o.header,o.headerValue),o.requestedWith&&u.setRequestHeader("X-Requested-With",o.requestedWith),o.overrideMimeType&&u.overrideMimeType(o.overrideMimeType),o.withCredentials&&(u.withCredentials=!0),u.onload=t.onLoad.bind(t,u),u.onerror=t.onError.bind(t,u),u.onprogress=t.onProgress.bind(t),u.send(),u}},function(t,i,o){var a=o(0),u=o(21),d=o(23),b=o(8),S=o(2),C=o(519),M=o(7),P=new a({Extends:d,initialize:function AudioFile(t,i,o,a,u){if(M(i)){var b=i;i=S(b,"key"),a=S(b,"xhrSettings"),u=S(b,"context",u)}var C={type:"audio",cache:t.cacheManager.audio,extension:o.type,responseType:"arraybuffer",key:i,url:o.url,xhrSettings:a,config:{context:u}};d.call(this,t,C)},onProcess:function onProcess(){this.state=u.FILE_PROCESSING;var t=this;this.config.context.decodeAudioData(this.xhrLoader.response,(function(i){t.data=i,t.onProcessComplete()}),(function(i){console.error("Error decoding audio: "+t.key+" - ",i?i.message:null),t.onProcessError()})),this.config.context=null}});P.create=function(t,i,o,a,u){var d=t.systems.game,b=d.config.audio,R=d.device.audio;M(i)&&(o=S(i,"url",[]),a=S(i,"config",{}));var O=P.getAudioURL(d,o);return O?R.webAudio&&!b.disableWebAudio?new P(t,i,O,u,d.sound.context):new C(t,i,O,a):null},P.getAudioURL=function(t,i){Array.isArray(i)||(i=[i]);for(var o=0;o<i.length;o++){var a=S(i[o],"url",i[o]);if(0===a.indexOf("blob:")||0===a.indexOf("data:"))return{url:a,type:""};var u=a.match(/\.([a-zA-Z0-9]+)($|\?)/);if(u=S(i[o],"type",u?u[1]:"").toLowerCase(),t.device.audio[u])return{url:a,type:u}}return null},b.register("audio",(function(t,i,o,a){var u,d=this.systems.game,b=d.config.audio,S=d.device.audio;if(b.noAudio||!S.webAudio&&!S.audioData)return this;if(Array.isArray(t))for(var C=0;C<t.length;C++)(u=P.create(this,t[C]))&&this.addFile(u);else(u=P.create(this,t,i,o,a))&&this.addFile(u);return this})),t.exports=P},function(t,i,o){var a=o(0),u=o(95),d=o(23),b=o(2),S=o(155),C=o(7),M=new a({Extends:d,initialize:function HTML5AudioFile(t,i,o,a){if(C(i)){var u=i;i=b(u,"key"),a=b(u,"config",a)}var S={type:"audio",cache:t.cacheManager.audio,extension:o.type,key:i,url:o.url,config:a};d.call(this,t,S),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function onLoad(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function onError(){for(var t=0;t<this.data.length;t++){var i=this.data[t];i.oncanplaythrough=null,i.onerror=null}this.loader.nextFile(this,!1)},onProgress:function onProgress(t){var i=t.target;i.oncanplaythrough=null,i.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(u.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function load(){this.data=[];var t=this.config&&this.config.instances||1;this.filesTotal=t,this.filesLoaded=0,this.percentComplete=0;for(var i=0;i<t;i++){var o=new Audio;o.dataset||(o.dataset={}),o.dataset.name=this.key+("0"+i).slice(-2),o.dataset.used="false",this.locked?o.dataset.locked="true":(o.dataset.locked="false",o.preload="auto",o.oncanplaythrough=this.onProgress.bind(this),o.onerror=this.onError.bind(this)),this.data.push(o)}for(i=0;i<this.data.length;i++)(o=this.data[i]).src=S(this,this.loader.baseURL),this.locked||o.load();this.locked&&setTimeout(this.onLoad.bind(this))}});t.exports=M},function(t,i,o){var a=o(0),u=o(21),d=o(23),b=o(8),S=o(2),C=o(7),M=new a({Extends:d,initialize:function ScriptFile(t,i,o,a){var u="js";if(C(i)){var b=i;i=S(b,"key"),o=S(b,"url"),a=S(b,"xhrSettings"),u=S(b,"extension",u)}var M={type:"script",cache:!1,extension:u,responseType:"text",key:i,url:o,xhrSettings:a};d.call(this,t,M)},onProcess:function onProcess(){this.state=u.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});b.register("script",(function(t,i,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new M(this,t[a]));else this.addFile(new M(this,t,i,o));return this})),t.exports=M},function(t,i,o){var a=o(522),u=o(157),d=o(0),b=o(62),S=o(524),C=o(525),M=new d({initialize:function Factory(t){this.world=t,this.scene=t.scene,this.sys=t.scene.sys},collider:function collider(t,i,o,a,u){return this.world.addCollider(t,i,o,a,u)},overlap:function overlap(t,i,o,a,u){return this.world.addOverlap(t,i,o,a,u)},existing:function existing(t,i){var o=i?b.STATIC_BODY:b.DYNAMIC_BODY;return this.world.enableBody(t,o),t},staticImage:function staticImage(t,i,o,u){var d=new a(this.scene,t,i,o,u);return this.sys.displayList.add(d),this.world.enableBody(d,b.STATIC_BODY),d},image:function image(t,i,o,u){var image=new a(this.scene,t,i,o,u);return this.sys.displayList.add(image),this.world.enableBody(image,b.DYNAMIC_BODY),image},staticSprite:function staticSprite(t,i,o,a){var d=new u(this.scene,t,i,o,a);return this.sys.displayList.add(d),this.sys.updateList.add(d),this.world.enableBody(d,b.STATIC_BODY),d},sprite:function sprite(t,i,o,a){var sprite=new u(this.scene,t,i,o,a);return this.sys.displayList.add(sprite),this.sys.updateList.add(sprite),this.world.enableBody(sprite,b.DYNAMIC_BODY),sprite},staticGroup:function staticGroup(t,i){return this.sys.updateList.add(new C(this.world,this.world.scene,t,i))},group:function group(t,i){return this.sys.updateList.add(new S(this.world,this.world.scene,t,i))},destroy:function destroy(){this.world=null,this.scene=null,this.sys=null}});t.exports=M},function(t,i,o){var a=o(0),u=o(243),d=o(125),b=new a({Extends:d,Mixins:[u.Acceleration,u.Angular,u.Bounce,u.Debug,u.Drag,u.Enable,u.Friction,u.Gravity,u.Immovable,u.Mass,u.Pushable,u.Size,u.Velocity],initialize:function ArcadeImage(t,i,o,a,u){d.call(this,t,i,o,a,u),this.body=null}});t.exports=b},function(t,i,o){var a=o(244),u=o(65),d=o(231),b=o(151);t.exports=function OverlapCirc(t,i,o,S,C,M){var P=a(t,i-S,o-S,2*S,2*S,C,M);if(0===P.length)return P;for(var R=new u(i,o,S),O=new u,B=[],N=0;N<P.length;N++){var Y=P[N];Y.isCircle?(O.setTo(Y.center.x,Y.center.y,Y.halfWidth),d(R,O)&&B.push(Y)):b(R,Y)&&B.push(Y)}return B}},function(t,i,o){var a=o(157),u=o(0),d=o(62),b=o(2),S=o(113),C=o(7),M=new u({Extends:S,initialize:function PhysicsGroup(t,i,o,u){if(o||u)if(C(o))u=o,o=null,u.internalCreateCallback=this.createCallbackHandler,u.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(o)&&C(o[0])){u=o[0];var M=this;o.forEach((function(t){t.internalCreateCallback=M.createCallbackHandler,t.internalRemoveCallback=M.removeCallbackHandler})),o=null}else u={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else u={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=t,u.classType=b(u,"classType",a),this.physicsType=d.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:b(u,"collideWorldBounds",!1),setBoundsRectangle:b(u,"customBoundsRectangle",null),setAccelerationX:b(u,"accelerationX",0),setAccelerationY:b(u,"accelerationY",0),setAllowDrag:b(u,"allowDrag",!0),setAllowGravity:b(u,"allowGravity",!0),setAllowRotation:b(u,"allowRotation",!0),setBounceX:b(u,"bounceX",0),setBounceY:b(u,"bounceY",0),setDragX:b(u,"dragX",0),setDragY:b(u,"dragY",0),setEnable:b(u,"enable",!0),setGravityX:b(u,"gravityX",0),setGravityY:b(u,"gravityY",0),setFrictionX:b(u,"frictionX",0),setFrictionY:b(u,"frictionY",0),setMaxVelocityX:b(u,"maxVelocityX",1e4),setMaxVelocityY:b(u,"maxVelocityY",1e4),setVelocityX:b(u,"velocityX",0),setVelocityY:b(u,"velocityY",0),setAngularVelocity:b(u,"angularVelocity",0),setAngularAcceleration:b(u,"angularAcceleration",0),setAngularDrag:b(u,"angularDrag",0),setMass:b(u,"mass",1),setImmovable:b(u,"immovable",!1)},S.call(this,i,o,u),this.type="PhysicsGroup"},createCallbackHandler:function createCallbackHandler(t){t.body||this.world.enableBody(t,d.DYNAMIC_BODY);var i=t.body;for(var o in this.defaults)i[o](this.defaults[o])},removeCallbackHandler:function removeCallbackHandler(t){t.body&&this.world.disableBody(t)},setVelocity:function setVelocity(t,i,o){void 0===o&&(o=0);for(var a=this.getChildren(),u=0;u<a.length;u++)a[u].body.velocity.set(t+u*o,i+u*o);return this},setVelocityX:function setVelocityX(t,i){void 0===i&&(i=0);for(var o=this.getChildren(),a=0;a<o.length;a++)o[a].body.velocity.x=t+a*i;return this},setVelocityY:function setVelocityY(t,i){void 0===i&&(i=0);for(var o=this.getChildren(),a=0;a<o.length;a++)o[a].body.velocity.y=t+a*i;return this}});t.exports=M},function(t,i,o){var a=o(157),u=o(0),d=o(62),b=o(2),S=o(113),C=o(7),M=new u({Extends:S,initialize:function StaticPhysicsGroup(t,i,o,u){o||u?C(o)?(u=o,o=null,u.internalCreateCallback=this.createCallbackHandler,u.internalRemoveCallback=this.removeCallbackHandler,u.createMultipleCallback=this.createMultipleCallbackHandler,u.classType=b(u,"classType",a)):Array.isArray(o)&&C(o[0])?(u=o,o=null,u.forEach((function(t){t.internalCreateCallback=this.createCallbackHandler,t.internalRemoveCallback=this.removeCallbackHandler,t.createMultipleCallback=this.createMultipleCallbackHandler,t.classType=b(t,"classType",a)}))):u={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler}:u={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:a},this.world=t,this.physicsType=d.STATIC_BODY,S.call(this,i,o,u),this.type="StaticPhysicsGroup"},createCallbackHandler:function createCallbackHandler(t){t.body||this.world.enableBody(t,d.STATIC_BODY)},removeCallbackHandler:function removeCallbackHandler(t){t.body&&this.world.disableBody(t)},createMultipleCallbackHandler:function createMultipleCallbackHandler(){this.refresh()},refresh:function refresh(){for(var t=this.children.entries,i=0;i<t.length;i++)t[i].body.reset();return this}});t.exports=M},function(t,i,o){var a=o(350),u=o(527),d=o(18),b=o(0),S=o(528),C=o(62),M=o(50),P=o(9),R=o(245),O=o(124),B=o(354),N=o(355),Y=o(246),G=o(247),X=o(529),U=o(6),z=o(14),V=o(211),W=o(530),H=o(10),j=o(531),q=o(532),Z=o(537),K=o(538),$=o(149),tt=o(539),et=o(248),it=o(25),nt=o(3),rt=o(68),st=new b({Extends:P,initialize:function World(t,i){P.call(this),this.scene=t,this.bodies=new $,this.staticBodies=new $,this.pendingDestroy=new $,this.colliders=new V,this.gravity=new nt(U(i,"gravity.x",0),U(i,"gravity.y",0)),this.bounds=new H(U(i,"x",0),U(i,"y",0),U(i,"width",t.sys.scale.width),U(i,"height",t.sys.scale.height)),this.checkCollision={up:U(i,"checkCollision.up",!0),down:U(i,"checkCollision.down",!0),left:U(i,"checkCollision.left",!0),right:U(i,"checkCollision.right",!0)},this.fps=U(i,"fps",60),this.fixedStep=U(i,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=U(i,"timeScale",1),this.OVERLAP_BIAS=U(i,"overlapBias",4),this.TILE_BIAS=U(i,"tileBias",16),this.forceX=U(i,"forceX",!1),this.isPaused=U(i,"isPaused",!1),this._total=0,this.drawDebug=U(i,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:U(i,"debugShowBody",!0),debugShowStaticBody:U(i,"debugShowStaticBody",!0),debugShowVelocity:U(i,"debugShowVelocity",!0),bodyDebugColor:U(i,"debugBodyColor",16711935),staticBodyDebugColor:U(i,"debugStaticBodyColor",255),velocityDebugColor:U(i,"debugVelocityColor",65280)},this.maxEntries=U(i,"maxEntries",16),this.useTree=U(i,"useTree",!0),this.tree=new j(this.maxEntries),this.staticTree=new j(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new it,this._tempMatrix2=new it,this.drawDebug&&this.createDebugGraphic()},enable:function enable(t,i){void 0===i&&(i=C.DYNAMIC_BODY),Array.isArray(t)||(t=[t]);for(var o=0;o<t.length;o++){var a=t[o];if(a.isParent)for(var u=a.getChildren(),d=0;d<u.length;d++){var b=u[d];b.isParent?this.enable(b,i):this.enableBody(b,i)}else this.enableBody(a,i)}},enableBody:function enableBody(t,i){return void 0===i&&(i=C.DYNAMIC_BODY),t.body||(i===C.DYNAMIC_BODY?t.body=new u(this,t):i===C.STATIC_BODY&&(t.body=new tt(this,t))),this.add(t.body),t},add:function add(t){return t.physicsType===C.DYNAMIC_BODY?this.bodies.set(t):t.physicsType===C.STATIC_BODY&&(this.staticBodies.set(t),this.staticTree.insert(t)),t.enable=!0,t},disable:function disable(t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var o=t[i];if(o.isParent)for(var a=o.getChildren(),u=0;u<a.length;u++){var d=a[u];d.isParent?this.disable(d):this.disableBody(d.body)}else this.disableBody(o.body)}},disableBody:function disableBody(t){this.remove(t),t.enable=!1},remove:function remove(t){t.physicsType===C.DYNAMIC_BODY?(this.tree.remove(t),this.bodies.delete(t)):t.physicsType===C.STATIC_BODY&&(this.staticBodies.delete(t),this.staticTree.remove(t))},createDebugGraphic:function createDebugGraphic(){var t=this.scene.sys.add.graphics({x:0,y:0});return t.setDepth(Number.MAX_VALUE),this.debugGraphic=t,this.drawDebug=!0,t},setBounds:function setBounds(t,i,o,a,u,d,b,S){return this.bounds.setTo(t,i,o,a),void 0!==u&&this.setBoundsCollision(u,d,b,S),this},setBoundsCollision:function setBoundsCollision(t,i,o,a){return void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===o&&(o=!0),void 0===a&&(a=!0),this.checkCollision.left=t,this.checkCollision.right=i,this.checkCollision.up=o,this.checkCollision.down=a,this},pause:function pause(){return this.isPaused=!0,this.emit(R.PAUSE),this},resume:function resume(){return this.isPaused=!1,this.emit(R.RESUME),this},addCollider:function addCollider(t,i,o,a,u){void 0===o&&(o=null),void 0===a&&(a=null),void 0===u&&(u=o);var d=new S(this,!1,t,i,o,a,u);return this.colliders.add(d),d},addOverlap:function addOverlap(t,i,o,a,u){void 0===o&&(o=null),void 0===a&&(a=null),void 0===u&&(u=o);var d=new S(this,!0,t,i,o,a,u);return this.colliders.add(d),d},removeCollider:function removeCollider(t){return this.colliders.remove(t),this},setFPS:function setFPS(t){return this.fps=t,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function update(t,i){if(!this.isPaused&&0!==this.bodies.size){var o,a,u=this._frameTime,d=this._frameTimeMS*this.timeScale;this._elapsed+=i;var b=this.bodies.entries,S=this._elapsed>=d;for(this.fixedStep||(u=.001*i,S=!0,this._elapsed=0),o=0;o<b.length;o++)(a=b[o]).enable&&a.preUpdate(S,u);if(S){this._elapsed-=d,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(b));var C=this.colliders.update();for(o=0;o<C.length;o++){var M=C[o];M.active&&M.update()}this.emit(R.WORLD_STEP,u)}for(;this._elapsed>=d;)this._elapsed-=d,this.step(u)}},step:function step(t){var i,o,a=this.bodies.entries,u=a.length;for(i=0;i<u;i++)(o=a[i]).enable&&o.update(t);this.useTree&&(this.tree.clear(),this.tree.load(a));var d=this.colliders.update();for(i=0;i<d.length;i++){var b=d[i];b.active&&b.update()}this.emit(R.WORLD_STEP,t),this.stepsLastFrame++},postUpdate:function postUpdate(){var t,i,o=this.bodies.entries,a=o.length,u=this.bodies,d=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,t=0;t<a;t++)(i=o[t]).enable&&i.postUpdate();if(this.drawDebug){var b=this.debugGraphic;for(b.clear(),t=0;t<a;t++)(i=o[t]).willDrawDebug()&&i.drawDebug(b);for(a=(o=d.entries).length,t=0;t<a;t++)(i=o[t]).willDrawDebug()&&i.drawDebug(b)}var S=this.pendingDestroy;if(S.size>0){var M=this.tree,P=this.staticTree;for(a=(o=S.entries).length,t=0;t<a;t++)(i=o[t]).physicsType===C.DYNAMIC_BODY?(M.remove(i),u.delete(i)):i.physicsType===C.STATIC_BODY&&(P.remove(i),d.delete(i)),i.world=void 0,i.gameObject=void 0;S.clear()}},updateMotion:function updateMotion(t,i){t.allowRotation&&this.computeAngularVelocity(t,i),this.computeVelocity(t,i)},computeAngularVelocity:function computeAngularVelocity(t,i){var o=t.angularVelocity,a=t.angularAcceleration,u=t.angularDrag,b=t.maxAngular;a?o+=a*i:t.allowDrag&&u&&(B(o-(u*=i),0,.1)?o-=u:N(o+u,0,.1)?o+=u:o=0);var S=(o=d(o,-b,b))-t.angularVelocity;t.angularVelocity+=S,t.rotation+=t.angularVelocity*i},computeVelocity:function computeVelocity(t,i){var o=t.velocity.x,a=t.acceleration.x,u=t.drag.x,b=t.maxVelocity.x,S=t.velocity.y,C=t.acceleration.y,M=t.drag.y,P=t.maxVelocity.y,R=t.speed,Y=t.maxSpeed,G=t.allowDrag,X=t.useDamping;t.allowGravity&&(o+=(this.gravity.x+t.gravity.x)*i,S+=(this.gravity.y+t.gravity.y)*i),a?o+=a*i:G&&u&&(X?(o*=u=Math.pow(u,i),R=Math.sqrt(o*o+S*S),O(R,0,.001)&&(o=0)):B(o-(u*=i),0,.01)?o-=u:N(o+u,0,.01)?o+=u:o=0),C?S+=C*i:G&&M&&(X?(S*=M=Math.pow(M,i),R=Math.sqrt(o*o+S*S),O(R,0,.001)&&(S=0)):B(S-(M*=i),0,.01)?S-=M:N(S+M,0,.01)?S+=M:S=0),o=d(o,-b,b),S=d(S,-P,P),t.velocity.set(o,S),Y>-1&&R>Y&&(t.velocity.normalize().scale(Y),R=Y),t.speed=R},separate:function separate(t,i,o,a,u,d){if(!d&&!t.enable||!i.enable||t.checkCollision.none||i.checkCollision.none||!this.intersects(t,i))return!1;if(o&&!1===o.call(a,t.gameObject,i.gameObject))return!1;if(t.isCircle&&i.isCircle)return this.separateCircle(t,i,u);if(t.isCircle!==i.isCircle){var b=t.isCircle?i:t,S=t.isCircle?t:i,C={x:b.x,y:b.y,right:b.right,bottom:b.bottom},M=S.center;if((M.y<C.y||M.y>C.bottom)&&(M.x<C.x||M.x>C.right))return this.separateCircle(t,i,u)}var P=!1,O=!1;u?(P=Z(t,i,u,this.OVERLAP_BIAS),O=K(t,i,u,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+t.gravity.y)<Math.abs(this.gravity.x+t.gravity.x)?(P=Z(t,i,u,this.OVERLAP_BIAS),this.intersects(t,i)&&(O=K(t,i,u,this.OVERLAP_BIAS))):(O=K(t,i,u,this.OVERLAP_BIAS),this.intersects(t,i)&&(P=Z(t,i,u,this.OVERLAP_BIAS)));var B=P||O;return B&&(u?(t.onOverlap||i.onOverlap)&&this.emit(R.OVERLAP,t.gameObject,i.gameObject,t,i):(t.onCollide||i.onCollide)&&this.emit(R.COLLIDE,t.gameObject,i.gameObject,t,i)),B},separateCircle:function separateCircle(t,i,o,u){Y(t,i,!1,u),G(t,i,!1,u);var d=0;if(t.isCircle!==i.isCircle){var b={x:i.isCircle?t.position.x:i.position.x,y:i.isCircle?t.position.y:i.position.y,right:i.isCircle?t.right:i.right,bottom:i.isCircle?t.bottom:i.bottom},S={x:t.isCircle?t.center.x:i.center.x,y:t.isCircle?t.center.y:i.center.y,radius:t.isCircle?t.halfWidth:i.halfWidth};S.y<b.y?S.x<b.x?d=M(S.x,S.y,b.x,b.y)-S.radius:S.x>b.right&&(d=M(S.x,S.y,b.right,b.y)-S.radius):S.y>b.bottom&&(S.x<b.x?d=M(S.x,S.y,b.x,b.bottom)-S.radius:S.x>b.right&&(d=M(S.x,S.y,b.right,b.bottom)-S.radius)),d*=-1}else d=t.halfWidth+i.halfWidth-M(t.center.x,t.center.y,i.center.x,i.center.y);if(t.overlapR=d,i.overlapR=d,o||0===d||t.immovable&&i.immovable||t.customSeparateX||i.customSeparateX)return 0!==d&&(t.onOverlap||i.onOverlap)&&this.emit(R.OVERLAP,t.gameObject,i.gameObject,t,i),0!==d;var C=t.center.x-i.center.x,P=t.center.y-i.center.y,O=Math.sqrt(Math.pow(C,2)+Math.pow(P,2)),B=(i.center.x-t.center.x)/O||0,N=(i.center.y-t.center.y)/O||0,X=2*(t.velocity.x*B+t.velocity.y*N-i.velocity.x*B-i.velocity.y*N)/(t.mass+i.mass);(t.immovable||i.immovable)&&(X*=2),t.immovable||(t.velocity.x=t.velocity.x-X/t.mass*B,t.velocity.y=t.velocity.y-X/t.mass*N),i.immovable||(i.velocity.x=i.velocity.x+X/i.mass*B,i.velocity.y=i.velocity.y+X/i.mass*N),t.immovable||i.immovable||(d/=2);var U=a(t.center,i.center),V=(d+z.EPSILON)*Math.cos(U),W=(d+z.EPSILON)*Math.sin(U);return t.immovable||(t.x-=V,t.y-=W,t.updateCenter()),i.immovable||(i.x+=V,i.y+=W,i.updateCenter()),t.velocity.x*=t.bounce.x,t.velocity.y*=t.bounce.y,i.velocity.x*=i.bounce.x,i.velocity.y*=i.bounce.y,(t.onCollide||i.onCollide)&&this.emit(R.COLLIDE,t.gameObject,i.gameObject,t,i),!0},intersects:function intersects(t,i){return t!==i&&(t.isCircle||i.isCircle?t.isCircle?i.isCircle?M(t.center.x,t.center.y,i.center.x,i.center.y)<=t.halfWidth+i.halfWidth:this.circleBodyIntersects(t,i):this.circleBodyIntersects(i,t):!(t.right<=i.position.x||t.bottom<=i.position.y||t.position.x>=i.right||t.position.y>=i.bottom))},circleBodyIntersects:function circleBodyIntersects(t,i){var o=d(t.center.x,i.left,i.right),a=d(t.center.y,i.top,i.bottom);return(t.center.x-o)*(t.center.x-o)+(t.center.y-a)*(t.center.y-a)<=t.halfWidth*t.halfWidth},overlap:function overlap(t,i,o,a,u){return void 0===o&&(o=null),void 0===a&&(a=null),void 0===u&&(u=o),this.collideObjects(t,i,o,a,u,!0)},collide:function collide(t,i,o,a,u){return void 0===o&&(o=null),void 0===a&&(a=null),void 0===u&&(u=o),this.collideObjects(t,i,o,a,u,!1)},collideObjects:function collideObjects(t,i,o,a,u,d){var b,S;t.isParent&&void 0===t.physicsType&&(t=t.children.entries),i&&i.isParent&&void 0===i.physicsType&&(i=i.children.entries);var C=Array.isArray(t),M=Array.isArray(i);if(this._total=0,C||M)if(!C&&M)for(b=0;b<i.length;b++)this.collideHandler(t,i[b],o,a,u,d);else if(C&&!M)if(i)for(b=0;b<t.length;b++)this.collideHandler(t[b],i,o,a,u,d);else for(b=0;b<t.length;b++){var P=t[b];for(S=b+1;S<t.length;S++)b!==S&&this.collideHandler(P,t[S],o,a,u,d)}else for(b=0;b<t.length;b++)for(S=0;S<i.length;S++)this.collideHandler(t[b],i[S],o,a,u,d);else this.collideHandler(t,i,o,a,u,d);return this._total>0},collideHandler:function collideHandler(t,i,o,a,u,d){if(void 0===i&&t.isParent)return this.collideGroupVsGroup(t,t,o,a,u,d);if(!t||!i)return!1;if(t.body){if(i.body)return this.collideSpriteVsSprite(t,i,o,a,u,d);if(i.isParent)return this.collideSpriteVsGroup(t,i,o,a,u,d);if(i.isTilemap)return this.collideSpriteVsTilemapLayer(t,i,o,a,u,d)}else if(t.isParent){if(i.body)return this.collideSpriteVsGroup(i,t,o,a,u,d);if(i.isParent)return this.collideGroupVsGroup(t,i,o,a,u,d);if(i.isTilemap)return this.collideGroupVsTilemapLayer(t,i,o,a,u,d)}else if(t.isTilemap){if(i.body)return this.collideSpriteVsTilemapLayer(i,t,o,a,u,d);if(i.isParent)return this.collideGroupVsTilemapLayer(i,t,o,a,u,d)}},collideSpriteVsSprite:function collideSpriteVsSprite(t,i,o,a,u,d){return!(!t.body||!i.body||(this.separate(t.body,i.body,a,u,d)&&(o&&o.call(u,t,i),this._total++),0))},collideSpriteVsGroup:function collideSpriteVsGroup(t,i,o,a,u,d){var b,S,M,P=t.body;if(0!==i.length&&P&&P.enable&&!P.checkCollision.none)if(this.useTree||i.physicsType===C.STATIC_BODY){var R=this.treeMinMax;R.minX=P.left,R.minY=P.top,R.maxX=P.right,R.maxY=P.bottom;var O=i.physicsType===C.DYNAMIC_BODY?this.tree.search(R):this.staticTree.search(R);for(S=O.length,b=0;b<S;b++)P!==(M=O[b])&&M.enable&&!M.checkCollision.none&&i.contains(M.gameObject)&&this.separate(P,M,a,u,d,!0)&&(o&&o.call(u,P.gameObject,M.gameObject),this._total++)}else{var B=i.getChildren(),N=i.children.entries.indexOf(t);for(S=B.length,b=0;b<S;b++)(M=B[b].body)&&b!==N&&M.enable&&this.separate(P,M,a,u,d)&&(o&&o.call(u,P.gameObject,M.gameObject),this._total++)}},collideGroupVsTilemapLayer:function collideGroupVsTilemapLayer(t,i,o,a,u,d){var b=t.getChildren();if(0===b.length)return!1;for(var S=!1,C=0;C<b.length;C++)b[C].body&&this.collideSpriteVsTilemapLayer(b[C],i,o,a,u,d)&&(S=!0);return S},collideTiles:function collideTiles(t,i,o,a,u){return!(!t.body.enable||0===i.length)&&this.collideSpriteVsTilesHandler(t,i,o,a,u,!1,!1)},overlapTiles:function overlapTiles(t,i,o,a,u){return!(!t.body.enable||0===i.length)&&this.collideSpriteVsTilesHandler(t,i,o,a,u,!0,!1)},collideSpriteVsTilemapLayer:function collideSpriteVsTilemapLayer(t,i,o,a,u,d){var b=t.body;if(!b.enable||b.checkCollision.none)return!1;var S=b.position.x,C=b.position.y,M=b.width,P=b.height,R=i.layer;if(R.tileWidth>R.baseTileWidth){var O=(R.tileWidth-R.baseTileWidth)*i.scaleX;S-=O,M+=O}R.tileHeight>R.baseTileHeight&&(P+=(R.tileHeight-R.baseTileHeight)*i.scaleY);var B=X(S,C,M,P,null,i.scene.cameras.main,i.layer);return 0!==B.length&&this.collideSpriteVsTilesHandler(t,B,o,a,u,d,!0)},collideSpriteVsTilesHandler:function collideSpriteVsTilesHandler(t,i,o,a,u,d,b){for(var S,C,M=t.body,P={left:0,right:0,top:0,bottom:0},O=!1,B=0;B<i.length;B++){var N=(C=(S=i[B]).tilemapLayer).tileToWorldXY(S.x,S.y);P.left=N.x,P.top=N.y,S.baseHeight!==S.height&&(P.top-=(S.height-S.baseHeight)*C.scaleY),P.right=P.left+S.width*C.scaleX,P.bottom=P.top+S.height*C.scaleY,et(P,M)&&(!a||a.call(u,t,S))&&W(S,t)&&(d||q(B,M,S,P,C,this.TILE_BIAS,b))&&(this._total++,O=!0,o&&o.call(u,t,S),d&&M.onOverlap?this.emit(R.TILE_OVERLAP,t,S,M):M.onCollide&&this.emit(R.TILE_COLLIDE,t,S,M))}return O},collideGroupVsGroup:function collideGroupVsGroup(t,i,o,a,u,d){if(0!==t.length&&0!==i.length)for(var b=t.getChildren(),S=0;S<b.length;S++)this.collideSpriteVsGroup(b[S],i,o,a,u,d)},wrap:function wrap(t,i){t.body?this.wrapObject(t,i):t.getChildren?this.wrapArray(t.getChildren(),i):Array.isArray(t)?this.wrapArray(t,i):this.wrapObject(t,i)},wrapArray:function wrapArray(t,i){for(var o=0;o<t.length;o++)this.wrapObject(t[o],i)},wrapObject:function wrapObject(t,i){void 0===i&&(i=0),t.x=rt(t.x,this.bounds.left-i,this.bounds.right+i),t.y=rt(t.y,this.bounds.top-i,this.bounds.bottom+i)},shutdown:function shutdown(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function destroy(){this.shutdown(),this.scene=null}});t.exports=st},function(t,i,o){var a=o(0),u=o(62),d=o(245),b=o(196),S=o(10),C=o(57),M=o(3),P=new a({initialize:function Body(t,i){var o=i.displayWidth?i.displayWidth:64,a=i.displayHeight?i.displayHeight:64;this.world=t,this.gameObject=i,this.transform={x:i.x,y:i.y,rotation:i.angle,scaleX:i.scaleX,scaleY:i.scaleY,displayOriginX:i.displayOriginX,displayOriginY:i.displayOriginY},this.debugShowBody=t.defaults.debugShowBody,this.debugShowVelocity=t.defaults.debugShowVelocity,this.debugBodyColor=t.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new M,this.position=new M(i.x-i.scaleX*i.displayOriginX,i.y-i.scaleY*i.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=i.angle,this.preRotation=i.angle,this.width=o,this.height=a,this.sourceWidth=o,this.sourceHeight=a,i.frame&&(this.sourceWidth=i.frame.realWidth,this.sourceHeight=i.frame.realHeight),this.halfWidth=Math.abs(o/2),this.halfHeight=Math.abs(a/2),this.center=new M(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new M,this.newVelocity=new M,this.deltaMax=new M,this.acceleration=new M,this.allowDrag=!0,this.drag=new M,this.allowGravity=!0,this.gravity=new M,this.bounce=new M,this.worldBounce=null,this.customBoundsRectangle=t.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new M(1e4,1e4),this.maxSpeed=-1,this.friction=new M(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=u.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=u.DYNAMIC_BODY,this._sx=i.scaleX,this._sy=i.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new S},updateBounds:function updateBounds(){var t=this.gameObject,i=this.transform;if(t.parentContainer){var o=t.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);i.x=o.tx,i.y=o.ty,i.rotation=b(o.rotation),i.scaleX=o.scaleX,i.scaleY=o.scaleY,i.displayOriginX=t.displayOriginX,i.displayOriginY=t.displayOriginY}else i.x=t.x,i.y=t.y,i.rotation=t.angle,i.scaleX=t.scaleX,i.scaleY=t.scaleY,i.displayOriginX=t.displayOriginX,i.displayOriginY=t.displayOriginY;var a=!1;if(this.syncBounds){var u=t.getBounds(this._bounds);this.width=u.width,this.height=u.height,a=!0}else{var d=Math.abs(i.scaleX),S=Math.abs(i.scaleY);this._sx===d&&this._sy===S||(this.width=this.sourceWidth*d,this.height=this.sourceHeight*S,this._sx=d,this._sy=S,a=!0)}a&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function updateCenter(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function updateFromGameObject(){this.updateBounds();var t=this.transform;this.position.x=t.x+t.scaleX*(this.offset.x-t.displayOriginX),this.position.y=t.y+t.scaleY*(this.offset.y-t.displayOriginY),this.updateCenter()},resetFlags:function resetFlags(t){void 0===t&&(t=!1);var i=this.wasTouching,o=this.touching,a=this.blocked;t?(i.none=!0,i.up=!1,i.down=!1,i.left=!1,i.right=!1):(i.none=o.none,i.up=o.up,i.down=o.down,i.left=o.left,i.right=o.right),o.none=!0,o.up=!1,o.down=!1,o.left=!1,o.right=!1,a.none=!0,a.up=!1,a.down=!1,a.left=!1,a.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function preUpdate(t,i){t&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),t&&this.update(i)},update:function update(t){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,t);var i=this.velocity.x,o=this.velocity.y;this.newVelocity.set(i*t,o*t),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(o,i),this.speed=Math.sqrt(i*i+o*o),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(d.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function postUpdate(){var t=this.position.x-this.prevFrame.x,i=this.position.y-this.prevFrame.y;if(this.moves){var o=this.deltaMax.x,a=this.deltaMax.y;0!==o&&0!==t&&(t<0&&t<-o?t=-o:t>0&&t>o&&(t=o)),0!==a&&0!==i&&(i<0&&i<-a?i=-a:i>0&&i>a&&(i=a)),this.gameObject.x+=t,this.gameObject.y+=i}t<0?this.facing=u.FACING_LEFT:t>0&&(this.facing=u.FACING_RIGHT),i<0?this.facing=u.FACING_UP:i>0&&(this.facing=u.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=t,this._ty=i},setBoundsRectangle:function setBoundsRectangle(t){return this.customBoundsRectangle=t||this.world.bounds,this},checkWorldBounds:function checkWorldBounds(){var t=this.position,i=this.customBoundsRectangle,o=this.world.checkCollision,a=this.worldBounce?-this.worldBounce.x:-this.bounce.x,u=this.worldBounce?-this.worldBounce.y:-this.bounce.y,d=!1;return t.x<i.x&&o.left?(t.x=i.x,this.velocity.x*=a,this.blocked.left=!0,d=!0):this.right>i.right&&o.right&&(t.x=i.right-this.width,this.velocity.x*=a,this.blocked.right=!0,d=!0),t.y<i.y&&o.up?(t.y=i.y,this.velocity.y*=u,this.blocked.up=!0,d=!0):this.bottom>i.bottom&&o.down&&(t.y=i.bottom-this.height,this.velocity.y*=u,this.blocked.down=!0,d=!0),d&&(this.blocked.none=!1,this.updateCenter()),d},setOffset:function setOffset(t,i){return void 0===i&&(i=t),this.offset.set(t,i),this},setSize:function setSize(t,i,o){void 0===o&&(o=!0);var a=this.gameObject;if(!t&&a.frame&&(t=a.frame.realWidth),!i&&a.frame&&(i=a.frame.realHeight),this.sourceWidth=t,this.sourceHeight=i,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),o&&a.getCenter){var u=(a.width-t)/2,d=(a.height-i)/2;this.offset.set(u,d)}return this.isCircle=!1,this.radius=0,this},setCircle:function setCircle(t,i,o){return void 0===i&&(i=this.offset.x),void 0===o&&(o=this.offset.y),t>0?(this.isCircle=!0,this.radius=t,this.sourceWidth=2*t,this.sourceHeight=2*t,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(i,o),this.updateCenter()):this.isCircle=!1,this},reset:function reset(t,i){this.stop();var o=this.gameObject;o.setPosition(t,i),o.getTopLeft?o.getTopLeft(this.position):this.position.set(t,i),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=o.angle,this.preRotation=o.angle,this.updateBounds(),this.updateCenter(),this.resetFlags(!0)},stop:function stop(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function getBounds(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function hitTest(t,i){return this.isCircle?this.radius>0&&t>=this.left&&t<=this.right&&i>=this.top&&i<=this.bottom&&(this.center.x-t)*(this.center.x-t)+(this.center.y-i)*(this.center.y-i)<=this.radius*this.radius:C(this,t,i)},onFloor:function onFloor(){return this.blocked.down},onCeiling:function onCeiling(){return this.blocked.up},onWall:function onWall(){return this.blocked.left||this.blocked.right},deltaAbsX:function deltaAbsX(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function deltaAbsY(){return this._dy>0?this._dy:-this._dy},deltaX:function deltaX(){return this._dx},deltaY:function deltaY(){return this._dy},deltaXFinal:function deltaXFinal(){return this._tx},deltaYFinal:function deltaYFinal(){return this._ty},deltaZ:function deltaZ(){return this.rotation-this.preRotation},destroy:function destroy(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function drawDebug(t){var i=this.position,o=i.x+this.halfWidth,a=i.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor),this.isCircle?t.strokeCircle(o,a,this.width/2):(this.checkCollision.up&&t.lineBetween(i.x,i.y,i.x+this.width,i.y),this.checkCollision.right&&t.lineBetween(i.x+this.width,i.y,i.x+this.width,i.y+this.height),this.checkCollision.down&&t.lineBetween(i.x,i.y+this.height,i.x+this.width,i.y+this.height),this.checkCollision.left&&t.lineBetween(i.x,i.y,i.x,i.y+this.height))),this.debugShowVelocity&&(t.lineStyle(t.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),t.lineBetween(o,a,o+this.velocity.x/2,a+this.velocity.y/2))},willDrawDebug:function willDrawDebug(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function setCollideWorldBounds(t,i,o,a){void 0===t&&(t=!0),this.collideWorldBounds=t;var u=void 0!==i,d=void 0!==o;return(u||d)&&(this.worldBounce||(this.worldBounce=new M),u&&(this.worldBounce.x=i),d&&(this.worldBounce.y=o)),void 0!==a&&(this.onWorldBounds=a),this},setVelocity:function setVelocity(t,i){return this.velocity.set(t,i),t=this.velocity.x,i=this.velocity.y,this.speed=Math.sqrt(t*t+i*i),this},setVelocityX:function setVelocityX(t){this.velocity.x=t;var i=t,o=this.velocity.y;return this.speed=Math.sqrt(i*i+o*o),this},setVelocityY:function setVelocityY(t){this.velocity.y=t;var i=this.velocity.x,o=t;return this.speed=Math.sqrt(i*i+o*o),this},setMaxVelocity:function setMaxVelocity(t,i){return this.maxVelocity.set(t,i),this},setMaxVelocityX:function setMaxVelocityX(t){return this.maxVelocity.x=t,this},setMaxVelocityY:function setMaxVelocityY(t){return this.maxVelocity.y=t,this},setMaxSpeed:function setMaxSpeed(t){return this.maxSpeed=t,this},setBounce:function setBounce(t,i){return this.bounce.set(t,i),this},setBounceX:function setBounceX(t){return this.bounce.x=t,this},setBounceY:function setBounceY(t){return this.bounce.y=t,this},setAcceleration:function setAcceleration(t,i){return this.acceleration.set(t,i),this},setAccelerationX:function setAccelerationX(t){return this.acceleration.x=t,this},setAccelerationY:function setAccelerationY(t){return this.acceleration.y=t,this},setAllowDrag:function setAllowDrag(t){return void 0===t&&(t=!0),this.allowDrag=t,this},setAllowGravity:function setAllowGravity(t){return void 0===t&&(t=!0),this.allowGravity=t,this},setAllowRotation:function setAllowRotation(t){return void 0===t&&(t=!0),this.allowRotation=t,this},setDrag:function setDrag(t,i){return this.drag.set(t,i),this},setDamping:function setDamping(t){return this.useDamping=t,this},setDragX:function setDragX(t){return this.drag.x=t,this},setDragY:function setDragY(t){return this.drag.y=t,this},setGravity:function setGravity(t,i){return this.gravity.set(t,i),this},setGravityX:function setGravityX(t){return this.gravity.x=t,this},setGravityY:function setGravityY(t){return this.gravity.y=t,this},setFriction:function setFriction(t,i){return this.friction.set(t,i),this},setFrictionX:function setFrictionX(t){return this.friction.x=t,this},setFrictionY:function setFrictionY(t){return this.friction.y=t,this},setAngularVelocity:function setAngularVelocity(t){return this.angularVelocity=t,this},setAngularAcceleration:function setAngularAcceleration(t){return this.angularAcceleration=t,this},setAngularDrag:function setAngularDrag(t){return this.angularDrag=t,this},setMass:function setMass(t){return this.mass=t,this},setImmovable:function setImmovable(t){return void 0===t&&(t=!0),this.immovable=t,this},setEnable:function setEnable(t){return void 0===t&&(t=!0),this.enable=t,this},processX:function processX(t,i,o,a){this.x+=t,this.updateCenter(),null!==i&&(this.velocity.x=i);var u=this.blocked;o&&(u.left=!0),a&&(u.right=!0)},processY:function processY(t,i,o,a){this.y+=t,this.updateCenter(),null!==i&&(this.velocity.y=i);var u=this.blocked;o&&(u.up=!0),a&&(u.down=!0)},x:{get:function get(){return this.position.x},set:function set(t){this.position.x=t}},y:{get:function get(){return this.position.y},set:function set(t){this.position.y=t}},left:{get:function get(){return this.position.x}},right:{get:function get(){return this.position.x+this.width}},top:{get:function get(){return this.position.y}},bottom:{get:function get(){return this.position.y+this.height}}});t.exports=P},function(t,i,o){var a=new(o(0))({initialize:function Collider(t,i,o,a,u,d,b){this.world=t,this.name="",this.active=!0,this.overlapOnly=i,this.object1=o,this.object2=a,this.collideCallback=u,this.processCallback=d,this.callbackContext=b},setName:function setName(t){return this.name=t,this},update:function update(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function destroy(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});t.exports=a},function(t,i,o){var a=o(26),u=o(3),d=new u,b=new u;t.exports=function GetTilesWithinWorldXY(t,i,o,u,S,C,M){var P=M.tilemapLayer.tilemap._convert.WorldToTileXY;P(t,i,!0,d,C,M);var R=d.x,O=d.y;P(t+o,i+u,!1,b,C,M);var B=Math.ceil(b.x),N=Math.ceil(b.y);return a(R,O,B-R,N-O,S,M)}},function(t,i){t.exports=function ProcessTileCallbacks(t,i){return t.collisionCallback?!t.collisionCallback.call(t.collisionCallbackContext,i,t):!t.layer.callbacks[t.index]||!t.layer.callbacks[t.index].callback.call(t.layer.callbacks[t.index].callbackContext,i,t)}},function(t,i,o){var a,u=o(436);function rbush(t){if(!(this instanceof rbush))return new rbush(t);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}function findItem(t,i,o){if(!o)return i.indexOf(t);for(var a=0;a<i.length;a++)if(o(t,i[a]))return a;return-1}function calcBBox(t,i){distBBox(t,0,t.children.length,i,t)}function distBBox(t,i,o,a,u){u||(u=createNode(null)),u.minX=1/0,u.minY=1/0,u.maxX=-1/0,u.maxY=-1/0;for(var d,b=i;b<o;b++)d=t.children[b],extend(u,t.leaf?a(d):d);return u}function extend(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function compareNodeMinX(t,i){return t.minX-i.minX}function compareNodeMinY(t,i){return t.minY-i.minY}function bboxArea(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function bboxMargin(t){return t.maxX-t.minX+(t.maxY-t.minY)}function contains(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function intersects(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function createNode(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function multiSelect(t,i,o,a,d){for(var b,S=[i,o];S.length;)(o=S.pop())-(i=S.pop())<=a||(b=i+Math.ceil((o-i)/a/2)*a,u(t,b,i,o,d),S.push(i,b,b,o))}rbush.prototype=(a={all:function all(){return this._all(this.data,[])},search:function search(t){var i=this.data,o=[],a=this.toBBox;if(!intersects(t,i))return o;for(var u,d,b,S,C=[];i;){for(u=0,d=i.children.length;u<d;u++)b=i.children[u],intersects(t,S=i.leaf?a(b):b)&&(i.leaf?o.push(b):contains(t,S)?this._all(b,o):C.push(b));i=C.pop()}return o},collides:function collides(t){var i=this.data,o=this.toBBox;if(!intersects(t,i))return!1;for(var a,u,d,b,S=[];i;){for(a=0,u=i.children.length;a<u;a++)if(d=i.children[a],intersects(t,b=i.leaf?o(d):d)){if(i.leaf||contains(t,b))return!0;S.push(d)}i=S.pop()}return!1},load:function load(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0,o=t.length;i<o;i++)this.insert(t[i]);return this}var a=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===a.height)this._splitRoot(this.data,a);else{if(this.data.height<a.height){var u=this.data;this.data=a,a=u}this._insert(a,this.data.height-a.height-1,!0)}else this.data=a;return this},insert:function insert(t){return t&&this._insert(t,this.data.height-1),this},clear:function clear(){return this.data=createNode([]),this},remove:function remove(t,i){if(!t)return this;for(var o,a,u,d,b=this.data,S=this.toBBox(t),C=[],M=[];b||C.length;){if(b||(b=C.pop(),a=C[C.length-1],o=M.pop(),d=!0),b.leaf&&-1!==(u=findItem(t,b.children,i)))return b.children.splice(u,1),C.push(b),this._condense(C),this;d||b.leaf||!contains(b,S)?a?(o++,b=a.children[o],d=!1):b=null:(C.push(b),M.push(o),o=0,a=b,b=b.children[0])}return this},toBBox:function toBBox(t){return t},compareMinX:compareNodeMinX,compareMinY:compareNodeMinY,toJSON:function toJSON(){return this.data},fromJSON:function fromJSON(t){return this.data=t,this},_all:function _all(t,i){for(var o=[];t;)t.leaf?i.push.apply(i,t.children):o.push.apply(o,t.children),t=o.pop();return i},_build:function _build(t,i,o,a){var u,d=o-i+1,b=this._maxEntries;if(d<=b)return calcBBox(u=createNode(t.slice(i,o+1)),this.toBBox),u;a||(a=Math.ceil(Math.log(d)/Math.log(b)),b=Math.ceil(d/Math.pow(b,a-1))),(u=createNode([])).leaf=!1,u.height=a;var S,C,M,P,R=Math.ceil(d/b),O=R*Math.ceil(Math.sqrt(b));for(multiSelect(t,i,o,O,this.compareMinX),S=i;S<=o;S+=O)for(multiSelect(t,S,M=Math.min(S+O-1,o),R,this.compareMinY),C=S;C<=M;C+=R)P=Math.min(C+R-1,M),u.children.push(this._build(t,C,P,a-1));return calcBBox(u,this.toBBox),u},_chooseSubtree:function _chooseSubtree(t,i,o,a){for(var u,d,b,S,C,M,P,R,O,B;a.push(i),!i.leaf&&a.length-1!==o;){for(P=R=1/0,u=0,d=i.children.length;u<d;u++)C=bboxArea(b=i.children[u]),O=t,B=b,(M=(Math.max(B.maxX,O.maxX)-Math.min(B.minX,O.minX))*(Math.max(B.maxY,O.maxY)-Math.min(B.minY,O.minY))-C)<R?(R=M,P=C<P?C:P,S=b):M===R&&C<P&&(P=C,S=b);i=S||i.children[0]}return i},_insert:function _insert(t,i,o){var a=this.toBBox,u=o?t:a(t),d=[],b=this._chooseSubtree(u,this.data,i,d);for(b.children.push(t),extend(b,u);i>=0&&d[i].children.length>this._maxEntries;)this._split(d,i),i--;this._adjustParentBBoxes(u,d,i)},_split:function _split(t,i){var o=t[i],a=o.children.length,u=this._minEntries;this._chooseSplitAxis(o,u,a);var d=this._chooseSplitIndex(o,u,a),b=createNode(o.children.splice(d,o.children.length-d));b.height=o.height,b.leaf=o.leaf,calcBBox(o,this.toBBox),calcBBox(b,this.toBBox),i?t[i-1].children.push(b):this._splitRoot(o,b)},_splitRoot:function _splitRoot(t,i){this.data=createNode([t,i]),this.data.height=t.height+1,this.data.leaf=!1,calcBBox(this.data,this.toBBox)},_chooseSplitIndex:function _chooseSplitIndex(t,i,o){var a,u,d,b,S,C,M,P,R,O,B,N,Y,G;for(C=M=1/0,a=i;a<=o-i;a++)u=distBBox(t,0,a,this.toBBox),d=distBBox(t,a,o,this.toBBox),R=u,O=d,B=void 0,N=void 0,Y=void 0,G=void 0,B=Math.max(R.minX,O.minX),N=Math.max(R.minY,O.minY),Y=Math.min(R.maxX,O.maxX),G=Math.min(R.maxY,O.maxY),b=Math.max(0,Y-B)*Math.max(0,G-N),S=bboxArea(u)+bboxArea(d),b<C?(C=b,P=a,M=S<M?S:M):b===C&&S<M&&(M=S,P=a);return P},_chooseSplitAxis:function _chooseSplitAxis(t,i,o){var a=t.leaf?this.compareMinX:compareNodeMinX,u=t.leaf?this.compareMinY:compareNodeMinY;this._allDistMargin(t,i,o,a)<this._allDistMargin(t,i,o,u)&&t.children.sort(a)},_allDistMargin:function _allDistMargin(t,i,o,a){t.children.sort(a);var u,d,b=this.toBBox,S=distBBox(t,0,i,b),C=distBBox(t,o-i,o,b),M=bboxMargin(S)+bboxMargin(C);for(u=i;u<o-i;u++)d=t.children[u],extend(S,t.leaf?b(d):d),M+=bboxMargin(S);for(u=o-i-1;u>=i;u--)d=t.children[u],extend(C,t.leaf?b(d):d),M+=bboxMargin(C);return M},_adjustParentBBoxes:function _adjustParentBBoxes(t,i,o){for(var a=o;a>=0;a--)extend(i[a],t)},_condense:function _condense(t){for(var i,o=t.length-1;o>=0;o--)0===t[o].children.length?o>0?(i=t[o-1].children).splice(i.indexOf(t[o]),1):this.clear():calcBBox(t[o],this.toBBox)}},_defineProperty(a,"compareMinX",(function compareMinX(t,i){return t.left-i.left})),_defineProperty(a,"compareMinY",(function compareMinY(t,i){return t.top-i.top})),_defineProperty(a,"toBBox",(function toBBox(t){return{minX:t.left,minY:t.top,maxX:t.right,maxY:t.bottom}})),a),t.exports=rbush},function(t,i,o){var a=o(533),u=o(535),d=o(248);t.exports=function SeparateTile(t,i,o,b,S,C,M){var P=b.left,R=b.top,O=b.right,B=b.bottom,N=o.faceLeft||o.faceRight,Y=o.faceTop||o.faceBottom;if(M||(N=!0,Y=!0),!N&&!Y)return!1;var G=0,X=0,U=0,z=1;if(i.deltaAbsX()>i.deltaAbsY()?U=-1:i.deltaAbsX()<i.deltaAbsY()&&(z=-1),0!==i.deltaX()&&0!==i.deltaY()&&N&&Y&&(U=Math.min(Math.abs(i.position.x-O),Math.abs(i.right-P)),z=Math.min(Math.abs(i.position.y-B),Math.abs(i.bottom-R))),U<z){if(N&&0!==(G=a(i,o,P,O,C,M))&&!d(b,i))return!0;Y&&(X=u(i,o,R,B,C,M))}else{if(Y&&0!==(X=u(i,o,R,B,C,M))&&!d(b,i))return!0;N&&(G=a(i,o,P,O,C,M))}return 0!==G||0!==X}},function(t,i,o){var a=o(534);t.exports=function TileCheckX(t,i,o,u,d,b){var S=0,C=i.faceLeft,M=i.faceRight,P=i.collideLeft,R=i.collideRight;return b||(C=!0,M=!0,P=!0,R=!0),t.deltaX()<0&&R&&t.checkCollision.left?M&&t.x<u&&(S=t.x-u)<-d&&(S=0):t.deltaX()>0&&P&&t.checkCollision.right&&C&&t.right>o&&(S=t.right-o)>d&&(S=0),0!==S&&(t.customSeparateX?t.overlapX=S:a(t,S)),S}},function(t,i){t.exports=function ProcessTileSeparationX(t,i){i<0?(t.blocked.none=!1,t.blocked.left=!0):i>0&&(t.blocked.none=!1,t.blocked.right=!0),t.position.x-=i,0===t.bounce.x?t.velocity.x=0:t.velocity.x=-t.velocity.x*t.bounce.x}},function(t,i,o){var a=o(536);t.exports=function TileCheckY(t,i,o,u,d,b){var S=0,C=i.faceTop,M=i.faceBottom,P=i.collideUp,R=i.collideDown;return b||(C=!0,M=!0,P=!0,R=!0),t.deltaY()<0&&R&&t.checkCollision.up?M&&t.y<u&&(S=t.y-u)<-d&&(S=0):t.deltaY()>0&&P&&t.checkCollision.down&&C&&t.bottom>o&&(S=t.bottom-o)>d&&(S=0),0!==S&&(t.customSeparateY?t.overlapY=S:a(t,S)),S}},function(t,i){t.exports=function ProcessTileSeparationY(t,i){i<0?(t.blocked.none=!1,t.blocked.up=!0):i>0&&(t.blocked.none=!1,t.blocked.down=!0),t.position.y-=i,0===t.bounce.y?t.velocity.y=0:t.velocity.y=-t.velocity.y*t.bounce.y}},function(t,i,o){var a=o(246),u=o(1389);t.exports=function SeparateX(t,i,o,d){var b=a(t,i,o,d),S=t.immovable,C=i.immovable;if(o||0===b||S&&C||t.customSeparateX||i.customSeparateX)return 0!==b||t.embedded&&i.embedded;var M=u.Set(t,i,b);return S||C?(S?u.RunImmovableBody1(M):C&&u.RunImmovableBody2(M),!0):M>0||u.Check()}},function(t,i,o){var a=o(247),u=o(1390);t.exports=function SeparateY(t,i,o,d){var b=a(t,i,o,d),S=t.immovable,C=i.immovable;if(o||0===b||S&&C||t.customSeparateY||i.customSeparateY)return 0!==b||t.embedded&&i.embedded;var M=u.Set(t,i,b);return S||C?(S?u.RunImmovableBody1(M):C&&u.RunImmovableBody2(M),!0):M>0||u.Check()}},function(t,i,o){var a=o(66),u=o(0),d=o(62),b=o(57),S=o(3),C=new u({initialize:function StaticBody(t,i){var o=i.displayWidth?i.displayWidth:64,a=i.displayHeight?i.displayHeight:64;this.world=t,this.gameObject=i,this.debugShowBody=t.defaults.debugShowStaticBody,this.debugBodyColor=t.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new S,this.position=new S(i.x-o*i.originX,i.y-a*i.originY),this.width=o,this.height=a,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new S(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=S.ZERO,this.allowGravity=!1,this.gravity=S.ZERO,this.bounce=S.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=d.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function setGameObject(t,i){return t&&t!==this.gameObject&&(this.gameObject.body=null,t.body=this,this.gameObject=t),i&&this.updateFromGameObject(),this},updateFromGameObject:function updateFromGameObject(){this.world.staticTree.remove(this);var t=this.gameObject;return t.getTopLeft(this.position),this.width=t.displayWidth,this.height=t.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function setOffset(t,i){return void 0===i&&(i=t),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(t,i),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function setSize(t,i,o){void 0===o&&(o=!0);var a=this.gameObject;if(!t&&a.frame&&(t=a.frame.realWidth),!i&&a.frame&&(i=a.frame.realHeight),this.world.staticTree.remove(this),this.width=t,this.height=i,this.halfWidth=Math.floor(t/2),this.halfHeight=Math.floor(i/2),o&&a.getCenter){var u=a.displayWidth/2,d=a.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(u-this.halfWidth,d-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function setCircle(t,i,o){return void 0===i&&(i=this.offset.x),void 0===o&&(o=this.offset.y),t>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=t,this.width=2*t,this.height=2*t,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(i,o),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function updateCenter(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function reset(t,i){var o=this.gameObject;void 0===t&&(t=o.x),void 0===i&&(i=o.y),this.world.staticTree.remove(this),o.setPosition(t,i),o.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function stop(){return this},getBounds:function getBounds(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function hitTest(t,i){return this.isCircle?a(this,t,i):b(this,t,i)},postUpdate:function postUpdate(){},deltaAbsX:function deltaAbsX(){return 0},deltaAbsY:function deltaAbsY(){return 0},deltaX:function deltaX(){return 0},deltaY:function deltaY(){return 0},deltaZ:function deltaZ(){return 0},destroy:function destroy(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function drawDebug(t){var i=this.position,o=i.x+this.halfWidth,a=i.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?t.strokeCircle(o,a,this.width/2):t.strokeRect(i.x,i.y,this.width,this.height))},willDrawDebug:function willDrawDebug(){return this.debugShowBody},setMass:function setMass(t){return t<=0&&(t=.1),this.mass=t,this},x:{get:function get(){return this.position.x},set:function set(t){this.world.staticTree.remove(this),this.position.x=t,this.world.staticTree.insert(this)}},y:{get:function get(){return this.position.y},set:function set(t){this.world.staticTree.remove(this),this.position.y=t,this.world.staticTree.insert(this)}},left:{get:function get(){return this.position.x}},right:{get:function get(){return this.position.x+this.width}},top:{get:function get(){return this.position.y}},bottom:{get:function get(){return this.position.y+this.height}}});t.exports=C},function(t,i,o){var a=new(o(0))({initialize:function BasePlugin(t){this.pluginManager=t,this.game=t.game},init:function init(){},start:function start(){},stop:function stop(){},destroy:function destroy(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=a},function(t,i,o){var a=new(o(3));t.exports=function CheckIsoBounds(t,i,o,u){var d=o.tilemapLayer,b=d.cullPaddingX,S=d.cullPaddingY,C=d.tilemap.tileToWorldXY(t,i,a,u,d);return C.x>u.worldView.x+d.scaleX*o.tileWidth*(-b-.5)&&C.x<u.worldView.right+d.scaleX*o.tileWidth*(b-.5)&&C.y>u.worldView.y+d.scaleY*o.tileHeight*(-S-1)&&C.y<u.worldView.bottom+d.scaleY*o.tileHeight*(S-.5)}},function(t,i,o){var a=o(26);t.exports=function ReplaceByIndex(t,i,o,u,d,b,S){for(var C=a(o,u,d,b,null,S),M=0;M<C.length;M++)C[M]&&C[M].index===t&&(C[M].index=i)}},function(t,i,o){var a=o(10),u=o(139),d=o(76),b=new a;t.exports=function CullBounds(t,i){var o=t.tilemapLayer.tilemap,a=t.tilemapLayer,S=Math.floor(o.tileWidth*a.scaleX),C=Math.floor(o.tileHeight*a.scaleY),M=d(i.worldView.x-a.x,S,0,!0)-a.cullPaddingX,P=u(i.worldView.right-a.x,S,0,!0)+a.cullPaddingX,R=d(i.worldView.y-a.y,C,0,!0)-a.cullPaddingY,O=u(i.worldView.bottom-a.y,C,0,!0)+a.cullPaddingY;return b.setTo(M,R,P-M,O-R)}},function(t,i,o){var a=o(543),u=o(159);t.exports=function CullTiles(t,i,o,d){void 0===o&&(o=[]),void 0===d&&(d=0),o.length=0;var b=t.tilemapLayer,S=a(t,i);return(b.skipCull||1!==b.scrollFactorX||1!==b.scrollFactorY)&&(S.left=0,S.right=t.width,S.top=0,S.bottom=t.height),u(t,S,d,o),o}},function(t,i,o){var a=o(546),u=o(159);t.exports=function HexagonalCullTiles(t,i,o,d){void 0===o&&(o=[]),void 0===d&&(d=0),o.length=0;var b=t.tilemapLayer;if(!b.skipCull&&1===b.scrollFactorX&&1===b.scrollFactorY){var S=a(t,i);u(t,S,d,o)}return o}},function(t,i,o){var a=o(139),u=o(76);t.exports=function HexagonalCullBounds(t,i){var o=t.tilemapLayer.tilemap,d=t.tilemapLayer,b=Math.floor(o.tileWidth*d.scaleX),S=Math.floor(o.tileHeight*d.scaleY),C=t.hexSideLength,M=(S-C)/2+C;return{left:u(i.worldView.x-d.x,b,0,!0)-d.cullPaddingX,right:a(i.worldView.right-d.x,b,0,!0)+d.cullPaddingX,top:u(i.worldView.y-d.y,M,0,!0)-d.cullPaddingY,bottom:a(i.worldView.bottom-d.y,M,0,!0)+d.cullPaddingY}}},function(t,i,o){var a=o(541);t.exports=function IsometricCullTiles(t,i,o,u){void 0===o&&(o=[]),void 0===u&&(u=0),o.length=0;var d,b,S,C=t.tilemapLayer,M=t.data,P=t.width,R=t.height,O=P,B=R;if(!C.skipCull)if(0===u){for(b=0;b<B;b++)for(d=0;M[b]&&d<O;d++)if(a(d,b,t,i)){if(!(S=M[b][d])||-1===S.index||!S.visible||0===S.alpha)continue;o.push(S)}}else if(1===u){for(b=0;b<B;b++)for(d=O;M[b]&&d>=0;d--)if(a(d,b,t,i)){if(!(S=M[b][d])||-1===S.index||!S.visible||0===S.alpha)continue;o.push(S)}}else if(2===u){for(b=B;b>=0;b--)for(d=0;M[b]&&d<O;d++)if(a(d,b,t,i)){if(!(S=M[b][d])||-1===S.index||!S.visible||0===S.alpha)continue;o.push(S)}}else if(3===u)for(b=B;b>=0;b--)for(d=O;M[b]&&d>=0;d--)if(a(d,b,t,i)){if(!(S=M[b][d])||-1===S.index||!S.visible||0===S.alpha)continue;o.push(S)}return C.tilesDrawn=o.length,C.tilesTotal=P*R,o}},function(t,i,o){var a=o(549),u=o(159);t.exports=function StaggeredCullTiles(t,i,o,d){void 0===o&&(o=[]),void 0===d&&(d=0),o.length=0;var b=t.tilemapLayer;if(!b.skipCull&&1===b.scrollFactorX&&1===b.scrollFactorY){var S=a(t,i);u(t,S,d,o)}return o}},function(t,i,o){var a=o(139),u=o(76);t.exports=function StaggeredCullBounds(t,i){var o=t.tilemapLayer.tilemap,d=t.tilemapLayer,b=Math.floor(o.tileWidth*d.scaleX),S=Math.floor(o.tileHeight*d.scaleY);return{left:u(i.worldView.x-d.x,b,0,!0)-d.cullPaddingX,right:a(i.worldView.right-d.x,b,0,!0)+d.cullPaddingX,top:u(i.worldView.y-d.y,S/2,0,!0)-d.cullPaddingY,bottom:a(i.worldView.bottom-d.y,S/2,0,!0)+d.cullPaddingY}}},function(t,i,o){var a=o(3);t.exports=function HexagonalTileToWorldXY(t,i,o,u,d){o||(o=new a);var b=d.baseTileWidth,S=d.baseTileHeight,C=d.tilemapLayer,M=0,P=0;C&&(u||(u=C.scene.cameras.main),M=C.x+u.scrollX*(1-C.scrollFactorX),b*=C.scaleX,P=C.y+u.scrollY*(1-C.scrollFactorY),S*=C.scaleY);var R=d.hexSideLength,O=M+t*b+i%2*(b/2),B=P+i*((S-R)/2+R);return o.set(O,B)}},function(t,i,o){var a=o(3);t.exports=function IsometricTileToWorldXY(t,i,o,u,d){o||(o=new a);var b=d.baseTileWidth,S=d.baseTileHeight,C=d.tilemapLayer,M=0,P=0;C&&(u||(u=C.scene.cameras.main),M=C.x+u.scrollX*(1-C.scrollFactorX),b*=C.scaleX,P=C.y+u.scrollY*(1-C.scrollFactorY),S*=C.scaleY);var R=M+b/2*(t-i),O=P+(t+i)*(S/2);return o.set(R,O)}},function(t,i,o){var a=o(3);t.exports=function StaggeredTileToWorldXY(t,i,o,u,d){o||(o=new a);var b=d.baseTileWidth,S=d.baseTileHeight,C=d.tilemapLayer,M=0,P=0;C&&(u||(u=C.scene.cameras.main),M=C.x+u.scrollX*(1-C.scrollFactorX),b*=C.scaleX,P=C.y+u.scrollY*(1-C.scrollFactorY),S*=C.scaleY);var R=M+t*b+i%2*(b/2),O=P+i*(S/2);return o.set(R,O)}},function(t,i,o){var a=o(253),u=o(254),d=o(3);t.exports=function TileToWorldXY(t,i,o,b,S){return o||(o=new d(0,0)),o.x=a(t,b,S),o.y=u(i,b,S),o}},function(t,i){t.exports=function HexagonalTileToWorldY(t,i,o){var a=o.baseTileHeight,u=o.tilemapLayer,d=0;u&&(void 0===i&&(i=u.scene.cameras.main),d=u.y+i.scrollY*(1-u.scrollFactorY),a*=u.scaleY);var b=u.tilemap.hexSideLength;return d+t*((a-b)/2+b)}},function(t,i){t.exports=function StaggeredTileToWorldY(t,i,o){var a=o.baseTileHeight,u=o.tilemapLayer,d=0;return u&&(void 0===i&&(i=u.scene.cameras.main),d=u.y+i.scrollY*(1-u.scrollFactorY),a*=u.scaleY),d+t*(a/2)}},function(t,i,o){var a=o(3);t.exports=function HexagonalWorldToTileXY(t,i,o,u,d,b){u||(u=new a);var S=b.baseTileWidth,C=b.baseTileHeight,M=b.tilemapLayer;M&&(d||(d=M.scene.cameras.main),i-=M.y+d.scrollY*(1-M.scrollFactorY),C*=M.scaleY,t-=M.x+d.scrollX*(1-M.scrollFactorX),S*=M.scaleX);var P=b.hexSideLength,R=(C-P)/2+P,O=o?Math.floor(i/R):i/R,B=o?Math.floor((t-O%2*.5*S)/S):(t-O%2*.5*S)/S;return u.set(B,O)}},function(t,i,o){var a=o(3);t.exports=function IsometricWorldToTileXY(t,i,o,u,d,b){u||(u=new a);var S=b.baseTileWidth,C=b.baseTileHeight,M=b.tilemapLayer;M&&(d||(d=M.scene.cameras.main),i-=M.y+d.scrollY*(1-M.scrollFactorY),C*=M.scaleY,t-=M.x+d.scrollX*(1-M.scrollFactorX),S*=M.scaleX);var P=o?Math.floor((t/(S/2)+i/(C/2))/2):(t/(S/2)+i/(C/2))/2,R=o?Math.floor((i/(C/2)-t/(S/2))/2):(i/(C/2)-t/(S/2))/2;return u.set(P,R)}},function(t,i,o){var a=o(3);t.exports=function StaggeredWorldToTileXY(t,i,o,u,d,b){u||(u=new a);var S=b.baseTileWidth,C=b.baseTileHeight,M=b.tilemapLayer;M&&(d||(d=M.scene.cameras.main),i-=M.y+d.scrollY*(1-M.scrollFactorY),C*=M.scaleY,t-=M.x+d.scrollX*(1-M.scrollFactorX),S*=M.scaleX);var P=o?Math.floor(i/(C/2)):i/(C/2),R=o?Math.floor((t+P%2*.5*S)/S):(t+P%2*.5*S)/S;return u.set(R,P)}},function(t,i,o){var a=o(255),u=o(256),d=o(3);t.exports=function WorldToTileXY(t,i,o,b,S,C){return void 0===o&&(o=!0),b||(b=new d(0,0)),b.x=a(t,o,S,C),b.y=u(i,o,S,C),b}},function(t,i){t.exports=function HexagonalWorldToTileY(t,i,o,a){var u=a.baseTileHeight,d=a.tilemapLayer;d&&(o||(o=d.scene.cameras.main),t-=d.y+o.scrollY*(1-d.scrollFactorY),u*=d.scaleY);var b=a.hexSideLength,S=(u-b)/2+b;return i?Math.floor(t/S):t/S}},function(t,i){t.exports=function StaggeredWorldToTileY(t,i,o,a){var u=a.baseTileHeight,d=a.tilemapLayer;return d&&(o||(o=d.scene.cameras.main),t-=d.y+o.scrollY*(1-d.scrollFactorY),u*=d.scaleY),i?Math.floor(t/(u/2)):t/(u/2)}},function(t,i,o){var a=o(119);t.exports=function HasTileAt(t,i,o){if(a(t,i,o)){var u=o.data[i][t];return null!==u&&u.index>-1}return!1}},function(t,i,o){var a=o(85),u=o(119),d=o(252);t.exports=function RemoveTileAt(t,i,o,b,S){if(void 0===o&&(o=!0),void 0===b&&(b=!0),!u(t,i,S))return null;var C=S.data[i][t];return C?(S.data[i][t]=o?null:new a(S,-1,t,i,S.tileWidth,S.tileHeight),b&&C&&C.collides&&d(t,i,S),C):null}},function(t,i,o){var a=o(40),u=o(259),d=o(565),b=o(566),S=o(577);t.exports=function Parse(t,i,o,C,M,P){var R;switch(i){case a.ARRAY_2D:R=u(t,o,C,M,P);break;case a.CSV:R=d(t,o,C,M,P);break;case a.TILED_JSON:R=b(t,o,P);break;case a.WELTMEISTER:R=S(t,o,P);break;default:console.warn("Unrecognized tilemap data format: "+i),R=null}return R}},function(t,i,o){var a=o(40),u=o(259);t.exports=function ParseCSV(t,i,o,d,b){var S=i.trim().split("\n").map((function(t){return t.split(",")})),C=u(t,S,o,d,b);return C.format=a.CSV,C}},function(t,i,o){var a=o(567),u=o(568),d=o(29),b=o(40),S=o(258),C=o(121),M=o(569),P=o(570),R=o(573),O=o(575);t.exports=function ParseJSONTiled(t,i,o){var B=new C({width:i.width,height:i.height,name:t,tileWidth:i.tilewidth,tileHeight:i.tileheight,orientation:S(i.orientation),format:b.TILED_JSON,version:i.version,properties:i.properties,renderOrder:i.renderorder,infinite:i.infinite});B.orientation===d.HEXAGONAL&&(B.hexSideLength=i.hexsidelength),B.layers=R(i,o),B.images=M(i);var N=O(i);return B.tilesets=N.tilesets,B.imageCollections=N.imageCollections,B.objects=P(i),B.tiles=u(B),a(B),B}},function(t,i,o){var a=o(17);t.exports=function AssignTileProperties(t){for(var i,o,u,d,b,S=0;S<t.layers.length;S++){i=t.layers[S],d=null;for(var C=0;C<i.data.length;C++){b=i.data[C];for(var M=0;M<b.length;M++)null===(o=b[M])||o.index<0||(u=t.tiles[o.index][2],d=t.tilesets[u],o.width=d.tileWidth,o.height=d.tileHeight,d.tileProperties&&d.tileProperties[o.index-d.firstgid]&&(o.properties=a(o.properties,d.tileProperties[o.index-d.firstgid])))}}}},function(t,i,o){var a=o(122);t.exports=function BuildTilesetIndex(t){var i,o,u=[];for(i=0;i<t.imageCollections.length;i++)for(var d=t.imageCollections[i],b=d.images,S=0;S<b.length;S++){var C=b[S];(o=new a(C.image,C.gid,d.imageWidth,d.imageHeight,0,0)).updateTileData(d.imageWidth,d.imageHeight),t.tilesets.push(o)}for(i=0;i<t.tilesets.length;i++)for(var M=(o=t.tilesets[i]).tileMargin,P=o.tileMargin,R=0,O=0,B=0,N=o.firstgid;N<o.firstgid+o.total&&(u[N]=[M,P,i],M+=o.tileWidth+o.tileSpacing,++R!==o.total)&&(++O!==o.columns||(M=o.tileMargin,P+=o.tileHeight+o.tileSpacing,O=0,++B!==o.rows));N++);return u}},function(t,i,o){var a=o(2),u=o(161);t.exports=function ParseImageLayers(t){for(var i=[],o=[],d=u(t);d.i<d.layers.length||o.length>0;)if(d.i>=d.layers.length){if(o.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}d=o.pop()}else{var b=d.layers[d.i];if(d.i++,"imagelayer"===b.type){var S=a(b,"offsetx",0)+a(b,"startx",0),C=a(b,"offsety",0)+a(b,"starty",0);i.push({name:d.name+b.name,image:b.image,x:d.x+S+b.x,y:d.y+C+b.y,alpha:d.opacity*b.opacity,visible:d.visible&&b.visible,properties:a(b,"properties",{})})}else if("group"===b.type){var M=u(t,b,d);o.push(d),d=M}}return i}},function(t,i,o){var a=o(2),u=o(260),d=o(572),b=o(161);t.exports=function ParseObjectLayers(t){for(var i=[],o=[],S=b(t);S.i<S.layers.length||o.length>0;)if(S.i>=S.layers.length){if(o.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}S=o.pop()}else{var C=S.layers[S.i];if(S.i++,C.opacity*=S.opacity,C.visible=S.visible&&C.visible,"objectgroup"===C.type){C.name=S.name+C.name;for(var M=S.x+a(C,"startx",0)+a(C,"offsetx",0),P=S.y+a(C,"starty",0)+a(C,"offsety",0),R=[],O=0;O<C.objects.length;O++){var B=u(C.objects[O],M,P);R.push(B)}var N=new d(C);N.objects=R,i.push(N)}else if("group"===C.type){var Y=b(t,C,S);o.push(S),S=Y}}return i}},function(t,i,o){var a=o(126);t.exports=function Pick(t,i){for(var o={},u=0;u<i.length;u++){var d=i[u];a(t,d)&&(o[d]=t[d])}return o}},function(t,i,o){var a=o(0),u=o(2),d=new a({initialize:function ObjectLayer(t){void 0===t&&(t={}),this.name=u(t,"name","object layer"),this.opacity=u(t,"opacity",1),this.properties=u(t,"properties",{}),this.propertyTypes=u(t,"propertytypes",{}),this.type=u(t,"type","objectgroup"),this.visible=u(t,"visible",!0),this.objects=u(t,"objects",[])}});t.exports=d},function(t,i,o){var a=o(574),u=o(29),d=o(161),b=o(258),S=o(2),C=o(120),M=o(261),P=o(85);t.exports=function ParseTileLayers(t,i){for(var o=S(t,"infinite",!1),R=[],O=[],B=d(t);B.i<B.layers.length||O.length>0;)if(B.i>=B.layers.length){if(O.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}B=O.pop()}else{var N=B.layers[B.i];if(B.i++,"tilelayer"===N.type)if(N.compression)console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+N.name+"'");else{if(N.encoding&&"base64"===N.encoding){if(N.chunks)for(var Y=0;Y<N.chunks.length;Y++)N.chunks[Y].data=a(N.chunks[Y].data);N.data&&(N.data=a(N.data)),delete N.encoding}var G,X,U,z,V=[],W=0;if(o){var H=S(N,"startx",0)+N.x,j=S(N,"starty",0)+N.y;(G=new C({name:B.name+N.name,x:B.x+S(N,"offsetx",0)+H*t.tilewidth,y:B.y+S(N,"offsety",0)+j*t.tileheight,width:N.width,height:N.height,tileWidth:t.tilewidth,tileHeight:t.tileheight,alpha:B.opacity*N.opacity,visible:B.visible&&N.visible,properties:S(N,"properties",[]),orientation:b(t.orientation)})).orientation===u.HEXAGONAL&&(G.hexSideLength=t.hexsidelength);for(var q=0;q<N.height;q++){V.push([null]);for(var Z=0;Z<N.width;Z++)V[q][Z]=null}for(q=0,ht=N.chunks.length;q<ht;q++)for(var K=N.chunks[q],$=K.x-H,tt=K.y-j,et=0,it=0,nt=K.data.length;it<nt;it++){var rt=W+$,st=et+tt;(X=M(K.data[it])).gid>0?((U=new P(G,X.gid,rt,st,t.tilewidth,t.tileheight)).rotation=X.rotation,U.flipX=X.flipped,V[st][rt]=U):(z=i?null:new P(G,-1,rt,st,t.tilewidth,t.tileheight),V[st][rt]=z),++W===K.width&&(et++,W=0)}}else{(G=new C({name:B.name+N.name,x:B.x+S(N,"offsetx",0)+N.x,y:B.y+S(N,"offsety",0)+N.y,width:N.width,height:N.height,tileWidth:t.tilewidth,tileHeight:t.tileheight,alpha:B.opacity*N.opacity,visible:B.visible&&N.visible,properties:S(N,"properties",[]),orientation:b(t.orientation)})).orientation===u.HEXAGONAL&&(G.hexSideLength=t.hexsidelength);for(var ot=[],at=0,ht=N.data.length;at<ht;at++)(X=M(N.data[at])).gid>0?((U=new P(G,X.gid,W,V.length,t.tilewidth,t.tileheight)).rotation=X.rotation,U.flipX=X.flipped,ot.push(U)):(z=i?null:new P(G,-1,W,V.length,t.tilewidth,t.tileheight),ot.push(z)),++W===N.width&&(V.push(ot),W=0,ot=[])}G.data=V,R.push(G)}else if("group"===N.type){var lt=d(t,N,B);O.push(B),B=lt}}return R}},function(t,i){t.exports=function Base64Decode(t){for(var i=window.atob(t),o=i.length,a=new Array(o/4),u=0;u<o;u+=4)a[u/4]=(i.charCodeAt(u)|i.charCodeAt(u+1)<<8|i.charCodeAt(u+2)<<16|i.charCodeAt(u+3)<<24)>>>0;return a}},function(t,i,o){var a=o(122),u=o(576),d=o(260),b=o(1453);t.exports=function ParseTilesets(t){for(var i,o=[],S=[],C=null,M=0;M<t.tilesets.length;M++){var P=t.tilesets[M];if(P.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(P.image){var R=new a(P.name,P.firstgid,P.tilewidth,P.tileheight,P.margin,P.spacing);if(t.version>1){var O=void 0,B=void 0;if(Array.isArray(P.tiles)){O=O||{},B=B||{};for(var N=0;N<P.tiles.length;N++){var Y=P.tiles[N];if(Y.properties){var G={};Y.properties.forEach((function(t){G[t.name]=t.value})),B[Y.id]=G}if(Y.objectgroup&&((O[Y.id]||(O[Y.id]={})).objectgroup=Y.objectgroup,Y.objectgroup.objects)){var X=Y.objectgroup.objects.map((function(t){return d(t)}));O[Y.id].objectgroup.objects=X}Y.animation&&((O[Y.id]||(O[Y.id]={})).animation=Y.animation),Y.type&&((O[Y.id]||(O[Y.id]={})).type=Y.type)}}Array.isArray(P.wangsets)&&(O=O||{},B=B||{},b(P.wangsets,O)),O&&(R.tileData=O,R.tileProperties=B)}else if(P.tileproperties&&(R.tileProperties=P.tileproperties),P.tiles)for(i in R.tileData=P.tiles,R.tileData){var U=R.tileData[i].objectgroup;if(U&&U.objects){var z=U.objects.map((function(t){return d(t)}));R.tileData[i].objectgroup.objects=z}}R.updateTileData(P.imagewidth,P.imageheight),o.push(R)}else{var V=new u(P.name,P.firstgid,P.tilewidth,P.tileheight,P.margin,P.spacing,P.properties),W=0;for(N=0;N<P.tiles.length;N++){var H=(Y=P.tiles[N]).image,j=parseInt(Y.id,10),q=P.firstgid+j;V.addImage(q,H),W=Math.max(j,W)}V.maxId=W,S.push(V)}C&&(C.lastgid=P.firstgid-1),C=P}return{tilesets:o,imageCollections:S}}},function(t,i,o){var a=new(o(0))({initialize:function ImageCollection(t,i,o,a,u,d,b){(void 0===o||o<=0)&&(o=32),(void 0===a||a<=0)&&(a=32),void 0===u&&(u=0),void 0===d&&(d=0),this.name=t,this.firstgid=0|i,this.imageWidth=0|o,this.imageHeight=0|a,this.imageMargin=0|u,this.imageSpacing=0|d,this.properties=b||{},this.images=[],this.total=0},containsImageIndex:function containsImageIndex(t){return t>=this.firstgid&&t<this.firstgid+this.total},addImage:function addImage(t,i){return this.images.push({gid:t,image:i}),this.total++,this}});t.exports=a},function(t,i,o){var a=o(40),u=o(121),d=o(578),b=o(579);t.exports=function ParseWeltmeister(t,i,o){if(0===i.layer.length)return console.warn("No layers found in the Weltmeister map: "+t),null;for(var S=0,C=0,M=0;M<i.layer.length;M++)i.layer[M].width>S&&(S=i.layer[M].width),i.layer[M].height>C&&(C=i.layer[M].height);var P=new u({width:S,height:C,name:t,tileWidth:i.layer[0].tilesize,tileHeight:i.layer[0].tilesize,format:a.WELTMEISTER});return P.layers=d(i,o),P.tilesets=b(i),P}},function(t,i,o){var a=o(120),u=o(85);t.exports=function ParseTileLayers(t,i){for(var o=[],d=0;d<t.layer.length;d++){for(var b=t.layer[d],S=new a({name:b.name,width:b.width,height:b.height,tileWidth:b.tilesize,tileHeight:b.tilesize,visible:1===b.visible}),C=[],M=[],P=0;P<b.data.length;P++){for(var R=0;R<b.data[P].length;R++){var O,B=b.data[P][R]-1;O=B>-1?new u(S,B,R,P,b.tilesize,b.tilesize):i?null:new u(S,-1,R,P,b.tilesize,b.tilesize),C.push(O)}M.push(C),C=[]}S.data=M,o.push(S)}return o}},function(t,i,o){var a=o(122);t.exports=function ParseTilesets(t){for(var i=[],o=[],u=0;u<t.layer.length;u++){var d=t.layer[u],b=d.tilesetName;""!==b&&-1===o.indexOf(b)&&(o.push(b),i.push(new a(b,0,d.tilesize,d.tilesize,0,0)))}return i}},function(t,i,o){var a=o(0),u=o(36),d=o(40),b=o(2),S=o(120),C=o(29),M=o(362),P=o(74),R=o(73),O=o(85),B=o(251),N=o(581),Y=o(122),G=new a({initialize:function Tilemap(t,i){this.scene=t,this.tileWidth=i.tileWidth,this.tileHeight=i.tileHeight,this.width=i.width,this.height=i.height,this.orientation=i.orientation,this.renderOrder=i.renderOrder,this.format=i.format,this.version=i.version,this.properties=i.properties,this.widthInPixels=i.widthInPixels,this.heightInPixels=i.heightInPixels,this.imageCollections=i.imageCollections,this.images=i.images,this.layers=i.layers,this.tilesets=i.tilesets,this.objects=i.objects,this.currentLayerIndex=0,this.hexSideLength=i.hexSideLength;var o=this.orientation;this._convert={WorldToTileXY:B.GetWorldToTileXYFunction(o),WorldToTileX:B.GetWorldToTileXFunction(o),WorldToTileY:B.GetWorldToTileYFunction(o),TileToWorldXY:B.GetTileToWorldXYFunction(o),TileToWorldX:B.GetTileToWorldXFunction(o),TileToWorldY:B.GetTileToWorldYFunction(o)}},createBlankDynamicLayer:function createBlankDynamicLayer(t,i,o,a,u,d,b,S){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(t,i,o,a,u,d,b,S)},createDynamicLayer:function createDynamicLayer(t,i,o,a){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(t,i,o,a)},createStaticLayer:function createStaticLayer(t,i,o,a){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(t,i,o,a)},setRenderOrder:function setRenderOrder(t){var i=["right-down","left-down","right-up","left-up"];return"number"==typeof t&&(t=i[t]),i.indexOf(t)>-1&&(this.renderOrder=t),this},addTilesetImage:function addTilesetImage(t,i,o,a,u,b,S){if(void 0===t)return null;if(null==i&&(i=t),!this.scene.sys.textures.exists(i))return console.warn("Invalid Tileset Image: "+i),null;var C=this.scene.sys.textures.get(i),M=this.getTilesetIndex(t);if(null===M&&this.format===d.TILED_JSON)return console.warn("No data found for Tileset: "+t),null;var P=this.tilesets[M];return P?(P.setTileSize(o,a),P.setSpacing(u,b),P.setImage(C),P):(void 0===o&&(o=this.tileWidth),void 0===a&&(a=this.tileHeight),void 0===u&&(u=0),void 0===b&&(b=0),void 0===S&&(S=0),(P=new Y(t,S,o,a,u,b)).setImage(C),this.tilesets.push(P),P)},copy:function copy(t,i,o,a,u,d,b,S){return null!==(S=this.getLayer(S))?(B.Copy(t,i,o,a,u,d,b,S),this):null},createBlankLayer:function createBlankLayer(t,i,o,a,u,d,b,C){if(void 0===o&&(o=0),void 0===a&&(a=0),void 0===u&&(u=this.width),void 0===d&&(d=this.height),void 0===b&&(b=this.tileWidth),void 0===C&&(C=this.tileHeight),null!==this.getLayerIndex(t))return console.warn("Invalid Tilemap Layer ID: "+t),null;for(var M,P=new S({name:t,tileWidth:b,tileHeight:C,width:u,height:d,orientation:this.orientation}),R=0;R<d;R++){M=[];for(var B=0;B<u;B++)M.push(new O(P,-1,B,R,b,C,this.tileWidth,this.tileHeight));P.data.push(M)}this.layers.push(P),this.currentLayerIndex=this.layers.length-1;var Y=new N(this.scene,this,this.currentLayerIndex,i,o,a);return Y.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(Y),Y},createLayer:function createLayer(t,i,o,a){var u=this.getLayerIndex(t);if(null===u)return console.warn("Invalid Tilemap Layer ID: "+t),"string"==typeof t&&console.warn("Valid tilelayer names:\n\t"+this.getTileLayerNames().join(",\n\t")),null;var d=this.layers[u];if(d.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+t),null;this.currentLayerIndex=u,void 0===o&&(o=d.x),void 0===a&&(a=d.y);var b=new N(this.scene,this,u,i,o,a);return b.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(b),b},createFromObjects:function createFromObjects(t,i){var o=[],a=this.getObjectLayer(t);if(!a)return console.warn("createFromObjects: Invalid objectLayerName given: "+t),o;Array.isArray(i)||(i=[i]);for(var d=a.objects,S=0;S<i.length;S++){for(var C,P=i[S],O=b(P,"id",null),B=b(P,"gid",null),N=b(P,"name",null),Y=[],G=0;G<d.length;G++)C=d[G],(null===O&&null===B&&null===N||null!==O&&C.id===O||null!==B&&C.gid===B||null!==N&&C.name===N)&&Y.push(C);for(var X=b(P,"classType",R),U=b(P,"scene",this.scene),z=b(P,"container",null),V=b(P,"key",null),W=b(P,"frame",null),H=0;H<Y.length;H++){C=Y[H];var j=new X(U);j.setName(C.name),j.setPosition(C.x,C.y),j.setTexture(V,W),C.width&&(j.displayWidth=C.width),C.height&&(j.displayHeight=C.height);var q={x:j.originX*C.width,y:(j.originY-1)*C.height};if(C.rotation){var Z=u(C.rotation);M(q,Z),j.rotation=Z}if(j.x+=q.x,j.y+=q.y,void 0===C.flippedHorizontal&&void 0===C.flippedVertical||j.setFlip(C.flippedHorizontal,C.flippedVertical),C.visible||(j.visible=!1),Array.isArray(C.properties))C.properties.forEach((function(t){var i=t.name;void 0!==j[i]?j[i]=t.value:j.setData(i,t.value)}));else for(var K in C.properties)void 0!==j[K]?j[K]=C.properties[K]:j.setData(K,C.properties[K]);z?z.add(j):U.add.existing(j),o.push(j)}}return o},createFromTiles:function createFromTiles(t,i,o,a,u,d){return null===(d=this.getLayer(d))?null:B.CreateFromTiles(t,i,o,a,u,d)},fill:function fill(t,i,o,a,u,d,b){return void 0===d&&(d=!0),null===(b=this.getLayer(b))?null:(B.Fill(t,i,o,a,u,d,b),this)},filterObjects:function filterObjects(t,i,o){if("string"==typeof t){var a=t;if(!(t=this.getObjectLayer(t)))return console.warn("No object layer found with the name: "+a),null}return t.objects.filter(i,o)},filterTiles:function filterTiles(t,i,o,a,u,d,b,S){return null===(S=this.getLayer(S))?null:B.FilterTiles(t,i,o,a,u,d,b,S)},findByIndex:function findByIndex(t,i,o,a){return null===(a=this.getLayer(a))?null:B.FindByIndex(t,i,o,a)},findObject:function findObject(t,i,o){if("string"==typeof t){var a=t;if(!(t=this.getObjectLayer(t)))return console.warn("No object layer found with the name: "+a),null}return t.objects.find(i,o)||null},findTile:function findTile(t,i,o,a,u,d,b,S){return null===(S=this.getLayer(S))?null:B.FindTile(t,i,o,a,u,d,b,S)},forEachTile:function forEachTile(t,i,o,a,u,d,b,S){return null===(S=this.getLayer(S))?null:(B.ForEachTile(t,i,o,a,u,d,b,S),this)},getImageIndex:function getImageIndex(t){return this.getIndex(this.images,t)},getImageLayerNames:function getImageLayerNames(){return this.images&&Array.isArray(this.images)?this.images.map((function(t){return t.name})):[]},getIndex:function getIndex(t,i){for(var o=0;o<t.length;o++)if(t[o].name===i)return o;return null},getLayer:function getLayer(t){var i=this.getLayerIndex(t);return null!==i?this.layers[i]:null},getObjectLayer:function getObjectLayer(t){var i=this.getIndex(this.objects,t);return null!==i?this.objects[i]:null},getObjectLayerNames:function getObjectLayerNames(){return this.objects&&Array.isArray(this.objects)?this.objects.map((function(t){return t.name})):[]},getLayerIndex:function getLayerIndex(t){return void 0===t?this.currentLayerIndex:"string"==typeof t?this.getLayerIndexByName(t):"number"==typeof t&&t<this.layers.length?t:t instanceof N?t.layerIndex:null},getLayerIndexByName:function getLayerIndexByName(t){return this.getIndex(this.layers,t)},getTileAt:function getTileAt(t,i,o,a){return null===(a=this.getLayer(a))?null:B.GetTileAt(t,i,o,a)},getTileAtWorldXY:function getTileAtWorldXY(t,i,o,a,u){return null===(u=this.getLayer(u))?null:B.GetTileAtWorldXY(t,i,o,a,u)},getTileLayerNames:function getTileLayerNames(){return this.layers&&Array.isArray(this.layers)?this.layers.map((function(t){return t.name})):[]},getTilesWithin:function getTilesWithin(t,i,o,a,u,d){return null===(d=this.getLayer(d))?null:B.GetTilesWithin(t,i,o,a,u,d)},getTilesWithinShape:function getTilesWithinShape(t,i,o,a){return null===(a=this.getLayer(a))?null:B.GetTilesWithinShape(t,i,o,a)},getTilesWithinWorldXY:function getTilesWithinWorldXY(t,i,o,a,u,d,b){return null===(b=this.getLayer(b))?null:B.GetTilesWithinWorldXY(t,i,o,a,u,d,b)},getTileset:function getTileset(t){var i=this.getIndex(this.tilesets,t);return null!==i?this.tilesets[i]:null},getTilesetIndex:function getTilesetIndex(t){return this.getIndex(this.tilesets,t)},hasTileAt:function hasTileAt(t,i,o){return null===(o=this.getLayer(o))?null:B.HasTileAt(t,i,o)},hasTileAtWorldXY:function hasTileAtWorldXY(t,i,o,a){return null===(a=this.getLayer(a))?null:B.HasTileAtWorldXY(t,i,o,a)},layer:{get:function get(){return this.layers[this.currentLayerIndex]},set:function set(t){this.setLayer(t)}},putTileAt:function putTileAt(t,i,o,a,u){return void 0===a&&(a=!0),null===(u=this.getLayer(u))?null:B.PutTileAt(t,i,o,a,u)},putTileAtWorldXY:function putTileAtWorldXY(t,i,o,a,u,d){return void 0===a&&(a=!0),null===(d=this.getLayer(d))?null:B.PutTileAtWorldXY(t,i,o,a,u,d)},putTilesAt:function putTilesAt(t,i,o,a,u){return void 0===a&&(a=!0),null===(u=this.getLayer(u))?null:(B.PutTilesAt(t,i,o,a,u),this)},randomize:function randomize(t,i,o,a,u,d){return null===(d=this.getLayer(d))?null:(B.Randomize(t,i,o,a,u,d),this)},calculateFacesAt:function calculateFacesAt(t,i,o){return null===(o=this.getLayer(o))?null:(B.CalculateFacesAt(t,i,o),this)},calculateFacesWithin:function calculateFacesWithin(t,i,o,a,u){return null===(u=this.getLayer(u))?null:(B.CalculateFacesWithin(t,i,o,a,u),this)},removeLayer:function removeLayer(t){var i=this.getLayerIndex(t);if(null!==i){P(this.layers,i);for(var o=i;o<this.layers.length;o++)this.layers[o].tilemapLayer&&this.layers[o].tilemapLayer.layerIndex--;return this.currentLayerIndex===i&&(this.currentLayerIndex=0),this}return null},destroyLayer:function destroyLayer(t){var i=this.getLayerIndex(t);return null!==i?((t=this.layers[i]).destroy(),P(this.layers,i),this.currentLayerIndex===i&&(this.currentLayerIndex=0),this):null},removeAllLayers:function removeAllLayers(){for(var t=this.layers,i=0;i<t.length;i++)t[i].tilemapLayer&&t[i].tilemapLayer.destroy(!1);return t.length=0,this.currentLayerIndex=0,this},removeTile:function removeTile(t,i,o){void 0===i&&(i=-1),void 0===o&&(o=!0);var a=[];Array.isArray(t)||(t=[t]);for(var u=0;u<t.length;u++){var d=t[u];a.push(this.removeTileAt(d.x,d.y,!0,o,d.tilemapLayer)),i>-1&&this.putTileAt(i,d.x,d.y,o,d.tilemapLayer)}return a},removeTileAt:function removeTileAt(t,i,o,a,u){return void 0===o&&(o=!0),void 0===a&&(a=!0),null===(u=this.getLayer(u))?null:B.RemoveTileAt(t,i,o,a,u)},removeTileAtWorldXY:function removeTileAtWorldXY(t,i,o,a,u,d){return void 0===o&&(o=!0),void 0===a&&(a=!0),null===(d=this.getLayer(d))?null:B.RemoveTileAtWorldXY(t,i,o,a,u,d)},renderDebug:function renderDebug(t,i,o){return null===(o=this.getLayer(o))?null:(this.orientation===C.ORTHOGONAL&&B.RenderDebug(t,i,o),this)},renderDebugFull:function renderDebugFull(t,i){for(var o=this.layers,a=0;a<o.length;a++)B.RenderDebug(t,i,o[a]);return this},replaceByIndex:function replaceByIndex(t,i,o,a,u,d,b){return null===(b=this.getLayer(b))?null:(B.ReplaceByIndex(t,i,o,a,u,d,b),this)},setCollision:function setCollision(t,i,o,a,u){return void 0===i&&(i=!0),void 0===o&&(o=!0),void 0===u&&(u=!0),null===(a=this.getLayer(a))?null:(B.SetCollision(t,i,o,a,u),this)},setCollisionBetween:function setCollisionBetween(t,i,o,a,u){return void 0===o&&(o=!0),void 0===a&&(a=!0),null===(u=this.getLayer(u))?null:(B.SetCollisionBetween(t,i,o,a,u),this)},setCollisionByProperty:function setCollisionByProperty(t,i,o,a){return void 0===i&&(i=!0),void 0===o&&(o=!0),null===(a=this.getLayer(a))?null:(B.SetCollisionByProperty(t,i,o,a),this)},setCollisionByExclusion:function setCollisionByExclusion(t,i,o,a){return void 0===i&&(i=!0),void 0===o&&(o=!0),null===(a=this.getLayer(a))?null:(B.SetCollisionByExclusion(t,i,o,a),this)},setCollisionFromCollisionGroup:function setCollisionFromCollisionGroup(t,i,o){return void 0===t&&(t=!0),void 0===i&&(i=!0),null===(o=this.getLayer(o))?null:(B.SetCollisionFromCollisionGroup(t,i,o),this)},setTileIndexCallback:function setTileIndexCallback(t,i,o,a){return null===(a=this.getLayer(a))?null:(B.SetTileIndexCallback(t,i,o,a),this)},setTileLocationCallback:function setTileLocationCallback(t,i,o,a,u,d,b){return null===(b=this.getLayer(b))?null:(B.SetTileLocationCallback(t,i,o,a,u,d,b),this)},setLayer:function setLayer(t){var i=this.getLayerIndex(t);return null!==i&&(this.currentLayerIndex=i),this},setBaseTileSize:function setBaseTileSize(t,i){this.tileWidth=t,this.tileHeight=i,this.widthInPixels=this.width*t,this.heightInPixels=this.height*i;for(var o=0;o<this.layers.length;o++){this.layers[o].baseTileWidth=t,this.layers[o].baseTileHeight=i;for(var a=this.layers[o].data,u=this.layers[o].width,d=this.layers[o].height,b=0;b<d;b++)for(var S=0;S<u;S++){var C=a[b][S];null!==C&&C.setSize(void 0,void 0,t,i)}}return this},setLayerTileSize:function setLayerTileSize(t,i,o){if(null===(o=this.getLayer(o)))return this;o.tileWidth=t,o.tileHeight=i;for(var a=o.data,u=o.width,d=o.height,b=0;b<d;b++)for(var S=0;S<u;S++){var C=a[b][S];null!==C&&C.setSize(t,i)}return this},shuffle:function shuffle(t,i,o,a,u){return null===(u=this.getLayer(u))?null:(B.Shuffle(t,i,o,a,u),this)},swapByIndex:function swapByIndex(t,i,o,a,u,d,b){return null===(b=this.getLayer(b))?null:(B.SwapByIndex(t,i,o,a,u,d,b),this)},tileToWorldX:function tileToWorldX(t,i,o){return null===(o=this.getLayer(o))?null:this._convert.TileToWorldX(t,i,o)},tileToWorldY:function tileToWorldY(t,i,o){return null===(o=this.getLayer(o))?null:this._convert.TileToWorldY(t,i,o)},tileToWorldXY:function tileToWorldXY(t,i,o,a,u){return null===(u=this.getLayer(u))?null:this._convert.TileToWorldXY(t,i,o,a,u)},weightedRandomize:function weightedRandomize(t,i,o,a,u,d){return null===(d=this.getLayer(d))?null:(B.WeightedRandomize(i,o,a,u,t,d),this)},worldToTileX:function worldToTileX(t,i,o,a){return null===(a=this.getLayer(a))?null:this._convert.WorldToTileX(t,i,o,a)},worldToTileY:function worldToTileY(t,i,o,a){return null===(a=this.getLayer(a))?null:this._convert.WorldToTileY(t,i,o,a)},worldToTileXY:function worldToTileXY(t,i,o,a,u,d){return null===(d=this.getLayer(d))?null:this._convert.WorldToTileXY(t,i,o,a,u,d)},destroy:function destroy(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});t.exports=G},function(t,i,o){var a=o(0),u=o(11),d=o(15),b=o(251),S=o(1456),C=new a({Extends:d,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Depth,u.Flip,u.GetBounds,u.Origin,u.Pipeline,u.Transform,u.Visible,u.ScrollFactor,S],initialize:function TilemapLayer(t,i,o,a,u,S){d.call(this,t,"TilemapLayer"),this.isTilemap=!0,this.tilemap=i,this.layerIndex=o,this.layer=i.layers[o],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=b.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(a),this.setAlpha(this.layer.alpha),this.setPosition(u,S),this.setOrigin(),this.setSize(i.tileWidth*this.layer.width,i.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function setTilesets(t){var i=[],o=[],a=this.tilemap;Array.isArray(t)||(t=[t]);for(var u=0;u<t.length;u++){var d=t[u];if("string"==typeof d&&(d=a.getTileset(d)),d){o.push(d);for(var b=d.firstgid,S=0;S<d.total;S++)i[b+S]=d}}this.gidMap=i,this.tileset=o},setRenderOrder:function setRenderOrder(t){return"string"==typeof t&&(t=["right-down","left-down","right-up","left-up"].indexOf(t)),t>=0&&t<4&&(this._renderOrder=t),this},calculateFacesAt:function calculateFacesAt(t,i){return b.CalculateFacesAt(t,i,this.layer),this},calculateFacesWithin:function calculateFacesWithin(t,i,o,a){return b.CalculateFacesWithin(t,i,o,a,this.layer),this},createFromTiles:function createFromTiles(t,i,o,a,u){return b.CreateFromTiles(t,i,o,a,u,this.layer)},cull:function cull(t){return this.cullCallback(this.layer,t,this.culledTiles,this._renderOrder)},copy:function copy(t,i,o,a,u,d,S){return b.Copy(t,i,o,a,u,d,S,this.layer),this},fill:function fill(t,i,o,a,u,d){return b.Fill(t,i,o,a,u,d,this.layer),this},filterTiles:function filterTiles(t,i,o,a,u,d,S){return b.FilterTiles(t,i,o,a,u,d,S,this.layer)},findByIndex:function findByIndex(t,i,o){return b.FindByIndex(t,i,o,this.layer)},findTile:function findTile(t,i,o,a,u,d,S){return b.FindTile(t,i,o,a,u,d,S,this.layer)},forEachTile:function forEachTile(t,i,o,a,u,d,S){return b.ForEachTile(t,i,o,a,u,d,S,this.layer),this},getTileAt:function getTileAt(t,i,o){return b.GetTileAt(t,i,o,this.layer)},getTileAtWorldXY:function getTileAtWorldXY(t,i,o,a){return b.GetTileAtWorldXY(t,i,o,a,this.layer)},getTilesWithin:function getTilesWithin(t,i,o,a,u){return b.GetTilesWithin(t,i,o,a,u,this.layer)},getTilesWithinShape:function getTilesWithinShape(t,i,o){return b.GetTilesWithinShape(t,i,o,this.layer)},getTilesWithinWorldXY:function getTilesWithinWorldXY(t,i,o,a,u,d){return b.GetTilesWithinWorldXY(t,i,o,a,u,d,this.layer)},hasTileAt:function hasTileAt(t,i){return b.HasTileAt(t,i,this.layer)},hasTileAtWorldXY:function hasTileAtWorldXY(t,i,o){return b.HasTileAtWorldXY(t,i,o,this.layer)},putTileAt:function putTileAt(t,i,o,a){return b.PutTileAt(t,i,o,a,this.layer)},putTileAtWorldXY:function putTileAtWorldXY(t,i,o,a,u){return b.PutTileAtWorldXY(t,i,o,a,u,this.layer)},putTilesAt:function putTilesAt(t,i,o,a){return b.PutTilesAt(t,i,o,a,this.layer),this},randomize:function randomize(t,i,o,a,u){return b.Randomize(t,i,o,a,u,this.layer),this},removeTileAt:function removeTileAt(t,i,o,a){return b.RemoveTileAt(t,i,o,a,this.layer)},removeTileAtWorldXY:function removeTileAtWorldXY(t,i,o,a,u){return b.RemoveTileAtWorldXY(t,i,o,a,u,this.layer)},renderDebug:function renderDebug(t,i){return b.RenderDebug(t,i,this.layer),this},replaceByIndex:function replaceByIndex(t,i,o,a,u,d){return b.ReplaceByIndex(t,i,o,a,u,d,this.layer),this},setSkipCull:function setSkipCull(t){return void 0===t&&(t=!0),this.skipCull=t,this},setCullPadding:function setCullPadding(t,i){return void 0===t&&(t=1),void 0===i&&(i=1),this.cullPaddingX=t,this.cullPaddingY=i,this},setCollision:function setCollision(t,i,o,a){return b.SetCollision(t,i,o,this.layer,a),this},setCollisionBetween:function setCollisionBetween(t,i,o,a){return b.SetCollisionBetween(t,i,o,a,this.layer),this},setCollisionByProperty:function setCollisionByProperty(t,i,o){return b.SetCollisionByProperty(t,i,o,this.layer),this},setCollisionByExclusion:function setCollisionByExclusion(t,i,o){return b.SetCollisionByExclusion(t,i,o,this.layer),this},setCollisionFromCollisionGroup:function setCollisionFromCollisionGroup(t,i){return b.SetCollisionFromCollisionGroup(t,i,this.layer),this},setTileIndexCallback:function setTileIndexCallback(t,i,o){return b.SetTileIndexCallback(t,i,o,this.layer),this},setTileLocationCallback:function setTileLocationCallback(t,i,o,a,u,d){return b.SetTileLocationCallback(t,i,o,a,u,d,this.layer),this},shuffle:function shuffle(t,i,o,a){return b.Shuffle(t,i,o,a,this.layer),this},swapByIndex:function swapByIndex(t,i,o,a,u,d){return b.SwapByIndex(t,i,o,a,u,d,this.layer),this},tileToWorldX:function tileToWorldX(t,i){return this.tilemap.tileToWorldX(t,i,this)},tileToWorldY:function tileToWorldY(t,i){return this.tilemap.tileToWorldY(t,i,this)},tileToWorldXY:function tileToWorldXY(t,i,o,a){return this.tilemap.tileToWorldXY(t,i,o,a,this)},weightedRandomize:function weightedRandomize(t,i,o,a,u){return b.WeightedRandomize(i,o,a,u,t,this.layer),this},worldToTileX:function worldToTileX(t,i,o){return this.tilemap.worldToTileX(t,i,o,this)},worldToTileY:function worldToTileY(t,i,o){return this.tilemap.worldToTileY(t,i,o,this)},worldToTileXY:function worldToTileXY(t,i,o,a,u){return this.tilemap.worldToTileXY(t,i,o,a,u,this)},destroy:function destroy(t){void 0===t&&(t=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),t&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],d.prototype.destroy.call(this))}});t.exports=C},function(t,i,o){var a=o(0),u=o(2),d=new a({initialize:function TimerEvent(t){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(t)},reset:function reset(t){return this.delay=u(t,"delay",0),this.repeat=u(t,"repeat",0),this.loop=u(t,"loop",!1),this.callback=u(t,"callback",void 0),this.callbackScope=u(t,"callbackScope",this.callback),this.args=u(t,"args",[]),this.timeScale=u(t,"timeScale",1),this.startAt=u(t,"startAt",0),this.paused=u(t,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=-1===this.repeat||this.loop?999999999999:this.repeat,this},getProgress:function getProgress(){return this.elapsed/this.delay},getOverallProgress:function getOverallProgress(){if(this.repeat>0){var t=this.delay+this.delay*this.repeat;return(this.elapsed+this.delay*(this.repeat-this.repeatCount))/t}return this.getProgress()},getRepeatCount:function getRepeatCount(){return this.repeatCount},getElapsed:function getElapsed(){return this.elapsed},getElapsedSeconds:function getElapsedSeconds(){return.001*this.elapsed},getRemaining:function getRemaining(){return this.delay-this.elapsed},getRemainingSeconds:function getRemainingSeconds(){return.001*this.getRemaining()},getOverallRemaining:function getOverallRemaining(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function getOverallRemainingSeconds(){return.001*this.getOverallRemaining()},remove:function remove(t){void 0===t&&(t=!1),this.elapsed=this.delay,this.hasDispatched=!t,this.repeatCount=0},destroy:function destroy(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});t.exports=d},function(t,i,o){var a=o(1465);t.exports=function GetProps(t){var i,o=[];if(t.hasOwnProperty("props"))for(i in t.props)"_"!==i.substr(0,1)&&o.push({key:i,value:t.props[i]});else for(i in t)-1===a.indexOf(i)&&"_"!==i.substr(0,1)&&o.push({key:i,value:t[i]});return o}},function(t,i,o){var a=o(6);t.exports=function GetTweens(t){var i=a(t,"tweens",null);return null===i?[]:("function"==typeof i&&(i=i.call()),Array.isArray(i)||(i=[i]),i)}},function(t,i,o){var a=o(265),u=o(13),d=o(99),b=o(80),S=o(162),C=o(6),M=o(264),P=o(266),R=o(268);t.exports=function NumberTweenBuilder(t,i,o){void 0===o&&(o=a);var O=C(i,"from",0),B=C(i,"to",1),N=[{value:O}],Y=S(i,"delay",o.delay),G=S(i,"duration",o.duration),X=C(i,"easeParams",o.easeParams),U=b(C(i,"ease",o.ease),X),z=S(i,"hold",o.hold),V=S(i,"repeat",o.repeat),W=S(i,"repeatDelay",o.repeatDelay),H=d(i,"yoyo",o.yoyo),j=[],q=M("value",B),Z=R(N[0],0,"value",q.getEnd,q.getStart,q.getActive,U,Y,G,H,z,V,W,!1,!1);Z.start=O,Z.current=O,Z.to=B,j.push(Z);var K=new P(t,j,N);K.offset=u(i,"offset",null),K.completeDelay=u(i,"completeDelay",0),K.loop=Math.round(u(i,"loop",0)),K.loopDelay=Math.round(u(i,"loopDelay",0)),K.paused=d(i,"paused",!1),K.useFrames=d(i,"useFrames",!1);for(var $=C(i,"callbackScope",K),tt=[K,null],et=P.TYPES,it=0;it<et.length;it++){var nt=et[it],rt=C(i,nt,!1);if(rt){var st=C(i,nt+"Scope",$),ot=C(i,nt+"Params",[]);K.setCallback(nt,rt,tt.concat(ot),st)}}return K}},function(t,i,o){var a=o(80),u=o(6),d=o(14);t.exports=function StaggerBuilder(t,i){var o;void 0===i&&(i={});var b=u(i,"start",0),S=u(i,"ease",null),C=u(i,"grid",null),M=u(i,"from",0),P="first"===M,R="center"===M,O="last"===M,B="number"==typeof M,N=Array.isArray(t),Y=N?parseFloat(t[0]):parseFloat(t),G=N?parseFloat(t[1]):0,X=Math.max(Y,G);if(N&&(b+=Y),C){var U=C[0],z=C[1],V=0,W=0,H=0,j=0,q=[];O?(V=U-1,W=z-1):B?(V=M%U,W=Math.floor(M/U)):R&&(V=(U-1)/2,W=(z-1)/2);for(var Z=d.MIN_SAFE_INTEGER,K=0;K<z;K++){q[K]=[];for(var $=0;$<U;$++){H=V-$,j=W-K;var tt=Math.sqrt(H*H+j*j);tt>Z&&(Z=tt),q[K][$]=tt}}}var et=S?a(S):null;return o=C?function result(t,i,o,a){var u,d=0,S=a%U,C=Math.floor(a/U);if(S>=0&&S<U&&C>=0&&C<z&&(d=q[C][S]),N){var M=G-Y;u=et?d/Z*M*et(d/Z):d/Z*M}else u=et?d*Y*et(d/Z):d*Y;return u+b}:function result(t,i,o,a,u){var d,S,C;return u--,P?d=a:R?d=Math.abs(u/2-a):O?d=u-a:B&&(d=Math.abs(M-a)),N?(C=R?(G-Y)/u*(2*d):(G-Y)/u*d,S=et?C*et(d/u):C):S=et?u*X*et(d/u):d*Y,S+b},o}},function(t,i,o){var a=o(77),u=o(265),d=o(13),b=o(99),S=o(80),C=o(162),M=o(263),P=o(584),R=o(6),O=o(588),B=o(163);t.exports=function TimelineBuilder(t,i){var o=new O(t);o.completeDelay=d(i,"completeDelay",0),o.loop=Math.round(d(i,"loop",0)),o.loopDelay=Math.round(d(i,"loopDelay",0)),o.paused=b(i,"paused",!1),o.useFrames=b(i,"useFrames",!1);var N=R(i,"callbackScope",o),Y=[o],G=R(i,"onStart",!1);if(G){var X=R(i,"onStartScope",N),U=R(i,"onStartParams",[]);o.setCallback("onStart",G,Y.concat(U),X)}var z=R(i,"onUpdate",!1);if(z){var V=R(i,"onUpdateScope",N),W=R(i,"onUpdateParams",[]);o.setCallback("onUpdate",z,Y.concat(W),V)}var H=R(i,"onLoop",!1);if(H){var j=R(i,"onLoopScope",N),q=R(i,"onLoopParams",[]);o.setCallback("onLoop",H,Y.concat(q),j)}var Z=R(i,"onYoyo",!1);if(Z){var K=R(i,"onYoyoScope",N),$=R(i,"onYoyoParams",[]);o.setCallback("onYoyo",Z,Y.concat(null,$),K)}var tt=R(i,"onComplete",!1);if(tt){var et=R(i,"onCompleteScope",N),it=R(i,"onCompleteParams",[]);o.setCallback("onComplete",tt,Y.concat(it),et)}var nt=P(i);if(0===nt.length)return o.paused=!0,o;var rt=a(u);rt.targets=M(i);var st=d(i,"totalDuration",0);rt.duration=st>0?Math.floor(st/nt.length):C(i,"duration",rt.duration),rt.delay=C(i,"delay",rt.delay),rt.easeParams=R(i,"easeParams",rt.easeParams),rt.ease=S(R(i,"ease",rt.ease),rt.easeParams),rt.hold=C(i,"hold",rt.hold),rt.repeat=C(i,"repeat",rt.repeat),rt.repeatDelay=C(i,"repeatDelay",rt.repeatDelay),rt.yoyo=b(i,"yoyo",rt.yoyo),rt.flipX=b(i,"flipX",rt.flipX),rt.flipY=b(i,"flipY",rt.flipY);for(var ot=0;ot<nt.length;ot++)o.queue(B(o,nt[ot],rt));return o}},function(t,i,o){var a=o(0),u=o(9),d=o(267),b=o(163),S=o(100),C=new a({Extends:u,initialize:function Timeline(t){u.call(this),this.manager=t,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=S.PENDING_ADD,this._pausedState=S.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function dispatchTimelineEvent(t,i){this.emit(t,this),i&&i.func.apply(i.scope,i.params)},setTimeScale:function setTimeScale(t){return this.timeScale=t,this},getTimeScale:function getTimeScale(){return this.timeScale},isPlaying:function isPlaying(){return this.state===S.ACTIVE},add:function add(t){return this.queue(b(this,t))},queue:function queue(t){return this.isPlaying()||(t.parent=this,t.parentIsTimeline=!0,this.data.push(t),this.totalData=this.data.length),this},hasOffset:function hasOffset(t){return null!==t.offset},isOffsetAbsolute:function isOffsetAbsolute(t){return"number"==typeof t},isOffsetRelative:function isOffsetRelative(t){if("string"===_typeof(t)){var i=t[0];if("-"===i||"+"===i)return!0}return!1},getRelativeOffset:function getRelativeOffset(t,i){var o=t[0],a=parseFloat(t.substr(2)),u=i;switch(o){case"+":u+=a;break;case"-":u-=a}return Math.max(0,u)},calcDuration:function calcDuration(){for(var t=0,i=0,o=0,a=0;a<this.totalData;a++){var u=this.data[a];u.init(),this.hasOffset(u)?this.isOffsetAbsolute(u.offset)?(u.calculatedOffset=u.offset,0===u.offset&&(o=0)):this.isOffsetRelative(u.offset)&&(u.calculatedOffset=this.getRelativeOffset(u.offset,t)):u.calculatedOffset=o,t=u.totalDuration+u.calculatedOffset,i+=u.totalDuration,o+=u.totalDuration}this.duration=i,this.loopCounter=-1===this.loop?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function init(){return this.calcDuration(),this.progress=0,this.totalProgress=0,!this.paused||(this.state=S.PAUSED,!1)},resetTweens:function resetTweens(t){for(var i=0;i<this.totalData;i++)this.data[i].play(t)},setCallback:function setCallback(t,i,o,a){return-1!==C.TYPES.indexOf(t)&&(this.callbacks[t]={func:i,scope:a,params:o}),this},makeActive:function makeActive(t){return this.manager.makeActive(t)},play:function play(){if(this.state!==S.ACTIVE){if(this.paused)return this.paused=!1,void this.manager.makeActive(this);this.resetTweens(!1),this.state=S.ACTIVE,this.dispatchTimelineEvent(d.TIMELINE_START,this.callbacks.onStart)}},nextState:function nextState(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=S.LOOP_DELAY):(this.state=S.ACTIVE,this.dispatchTimelineEvent(d.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=S.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=S.PENDING_REMOVE,this.dispatchTimelineEvent(d.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function update(t,i){if(this.state!==S.PAUSED){switch(this.useFrames&&(i=1*this.manager.timeScale),i*=this.timeScale,this.elapsed+=i,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=i,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case S.ACTIVE:for(var o=this.totalData,a=0;a<this.totalData;a++)this.data[a].update(t,i)&&o--;this.dispatchTimelineEvent(d.TIMELINE_UPDATE,this.callbacks.onUpdate),0===o&&this.nextState();break;case S.LOOP_DELAY:this.countdown-=i,this.countdown<=0&&(this.state=S.ACTIVE,this.dispatchTimelineEvent(d.TIMELINE_LOOP,this.callbacks.onLoop));break;case S.COMPLETE_DELAY:this.countdown-=i,this.countdown<=0&&(this.state=S.PENDING_REMOVE,this.dispatchTimelineEvent(d.TIMELINE_COMPLETE,this.callbacks.onComplete))}return this.state===S.PENDING_REMOVE}},stop:function stop(){this.state=S.PENDING_REMOVE},pause:function pause(){if(this.state!==S.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=S.PAUSED,this.emit(d.TIMELINE_PAUSE,this),this},resume:function resume(){return this.state===S.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(d.TIMELINE_RESUME,this)),this},hasTarget:function hasTarget(t){for(var i=0;i<this.data.length;i++)if(this.data[i].hasTarget(t))return!0;return!1},destroy:function destroy(){for(var t=0;t<this.data.length;t++)this.data[t].stop()}});C.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],t.exports=C},function(t,i,o){var a=o(86),u=o(41),d=o(32),b=o(2),S=o(64),C={parseBody:function parseBody(t,i,o,a){void 0===a&&(a={});for(var S=b(o,"fixtures",[]),C=[],M=0;M<S.length;M++)for(var P=this.parseFixture(S[M]),R=0;R<P.length;R++)C.push(P[R]);var O=d.clone(o,!0);d.extend(O,a,!0),delete O.fixtures,delete O.type;var B=u.create(O);return u.setParts(B,C),u.setPosition(B,{x:t,y:i}),B},parseFixture:function parseFixture(t){var i,o=d.extend({},!1,t);if(delete o.circle,delete o.vertices,t.circle){var u=b(t.circle,"x"),S=b(t.circle,"y"),C=b(t.circle,"radius");i=[a.circle(u,S,C,o)]}else t.vertices&&(i=this.parseVertices(t.vertices,o));return i},parseVertices:function parseVertices(t,i){void 0===i&&(i={});for(var o=[],b=0;b<t.length;b++)S.clockwiseSort(t[b]),o.push(u.create(d.extend({position:S.centre(t[b]),vertices:t[b]},i)));return a.flagCoincidentParts(o)}};t.exports=C},function(t,i,o){var a=o(86),u=o(41),d={parseBody:function parseBody(t,i,o,d){var b;void 0===d&&(d={});var S=o.vertices;if(1===S.length)d.vertices=S[0],b=u.create(d),a.flagCoincidentParts(b.parts);else{for(var C=[],M=0;M<S.length;M++){var P=u.create({vertices:S[M]});C.push(P)}a.flagCoincidentParts(C),d.parts=C,b=u.create(d)}return b.label=o.label,u.setPosition(b,{x:t,y:i}),b}};t.exports=d},function(t,i,o){var a={};t.exports=a;var u=o(118),d=o(128),b=o(32),S=o(41),C=o(86);a.stack=function(t,i,o,a,d,b,C){for(var M,P=u.create({label:"Stack"}),R=t,O=i,B=0,N=0;N<a;N++){for(var Y=0,G=0;G<o;G++){var X=C(R,O,G,N,M,B);if(X){var U=X.bounds.max.y-X.bounds.min.y,z=X.bounds.max.x-X.bounds.min.x;U>Y&&(Y=U),S.translate(X,{x:.5*z,y:.5*U}),R=X.bounds.max.x+d,u.addBody(P,X),M=X,B+=1}else R+=d}O+=Y+b,R=t}return P},a.chain=function(t,i,o,a,S,C){for(var M=t.bodies,P=1;P<M.length;P++){var R=M[P-1],O=M[P],B=R.bounds.max.y-R.bounds.min.y,N=R.bounds.max.x-R.bounds.min.x,Y=O.bounds.max.y-O.bounds.min.y,G={bodyA:R,pointA:{x:N*i,y:B*o},bodyB:O,pointB:{x:(O.bounds.max.x-O.bounds.min.x)*a,y:Y*S}},X=b.extend(G,C);u.addConstraint(t,d.create(X))}return t.label+=" Chain",t},a.mesh=function(t,i,o,a,S){var C,M,P,R,O,B=t.bodies;for(C=0;C<o;C++){for(M=1;M<i;M++)P=B[M-1+C*i],R=B[M+C*i],u.addConstraint(t,d.create(b.extend({bodyA:P,bodyB:R},S)));if(C>0)for(M=0;M<i;M++)P=B[M+(C-1)*i],R=B[M+C*i],u.addConstraint(t,d.create(b.extend({bodyA:P,bodyB:R},S))),a&&M>0&&(O=B[M-1+(C-1)*i],u.addConstraint(t,d.create(b.extend({bodyA:O,bodyB:R},S)))),a&&M<i-1&&(O=B[M+1+(C-1)*i],u.addConstraint(t,d.create(b.extend({bodyA:O,bodyB:R},S))))}return t.label+=" Mesh",t},a.pyramid=function(t,i,o,u,d,b,C){return a.stack(t,i,o,u,d,b,(function(i,a,b,M,P,R){var O=Math.min(u,Math.ceil(o/2)),B=P?P.bounds.max.x-P.bounds.min.x:0;if(!(M>O||b<(M=O-M)||b>o-1-M))return 1===R&&S.translate(P,{x:(b+(o%2==1?1:-1))*B,y:0}),C(t+(P?b*B:0)+b*d,a,b,M,P,R)}))},a.newtonsCradle=function(t,i,o,a,b){for(var S=u.create({label:"Newtons Cradle"}),M=0;M<o;M++){var P=C.circle(t+M*(1.9*a),i+b,a,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),R=d.create({pointA:{x:t+M*(1.9*a),y:i},bodyB:P});u.addBody(S,P),u.addConstraint(S,R)}return S},a.car=function(t,i,o,a,b){var M=S.nextGroup(!0),P=.5*-o+20,R=.5*o-20,O=u.create({label:"Car"}),B=C.rectangle(t,i,o,a,{collisionFilter:{group:M},chamfer:{radius:.5*a},density:2e-4}),N=C.circle(t+P,i+0,b,{collisionFilter:{group:M},friction:.8}),Y=C.circle(t+R,i+0,b,{collisionFilter:{group:M},friction:.8}),G=d.create({bodyB:B,pointB:{x:P,y:0},bodyA:N,stiffness:1,length:0}),X=d.create({bodyB:B,pointB:{x:R,y:0},bodyA:Y,stiffness:1,length:0});return u.addBody(O,B),u.addBody(O,N),u.addBody(O,Y),u.addConstraint(O,G),u.addConstraint(O,X),O},a.softBody=function(t,i,o,u,d,S,M,P,R,O){R=b.extend({inertia:1/0},R),O=b.extend({stiffness:.2,render:{type:"line",anchors:!1}},O);var B=a.stack(t,i,o,u,d,S,(function(t,i){return C.circle(t,i,P,R)}));return a.mesh(B,o,u,M,O),B.label="Soft Body",B}},function(t,i,o){var a={};t.exports=a,o(84);var u=o(32);a.pathToVertices=function(t,i){"undefined"==typeof window||"SVGPathSeg"in window||u.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var o,d,b,S,C,M,P,R,O,B,N,Y=[],G=0,X=0,U=0;i=i||15;var z=function addPoint(t,i,o){var a=o%2==1&&o>1;if(!O||t!=O.x||i!=O.y){O&&a?(B=O.x,N=O.y):(B=0,N=0);var u={x:B+t,y:N+i};!a&&O||(O=u),Y.push(u),X=B+t,U=N+i}},V=function addSegmentPoint(t){var i=t.pathSegTypeAsLetter.toUpperCase();if("Z"!==i){switch(i){case"M":case"L":case"T":case"C":case"S":case"Q":X=t.x,U=t.y;break;case"H":X=t.x;break;case"V":U=t.y}z(X,U,t.pathSegType)}};for(a._svgPathToAbsolute(t),b=t.getTotalLength(),M=[],o=0;o<t.pathSegList.numberOfItems;o+=1)M.push(t.pathSegList.getItem(o));for(P=M.concat();G<b;){if((C=M[t.getPathSegAtLength(G)])!=R){for(;P.length&&P[0]!=C;)V(P.shift());R=C}switch(C.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":S=t.getPointAtLength(G),z(S.x,S.y,0)}G+=i}for(o=0,d=P.length;o<d;++o)V(P[o]);return Y},a._svgPathToAbsolute=function(t){for(var i,o,a,u,d,b,S=t.pathSegList,C=0,M=0,P=S.numberOfItems,R=0;R<P;++R){var O=S.getItem(R),B=O.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(B))"x"in O&&(C=O.x),"y"in O&&(M=O.y);else switch("x1"in O&&(a=C+O.x1),"x2"in O&&(d=C+O.x2),"y1"in O&&(u=M+O.y1),"y2"in O&&(b=M+O.y2),"x"in O&&(C+=O.x),"y"in O&&(M+=O.y),B){case"m":S.replaceItem(t.createSVGPathSegMovetoAbs(C,M),R);break;case"l":S.replaceItem(t.createSVGPathSegLinetoAbs(C,M),R);break;case"h":S.replaceItem(t.createSVGPathSegLinetoHorizontalAbs(C),R);break;case"v":S.replaceItem(t.createSVGPathSegLinetoVerticalAbs(M),R);break;case"c":S.replaceItem(t.createSVGPathSegCurvetoCubicAbs(C,M,a,u,d,b),R);break;case"s":S.replaceItem(t.createSVGPathSegCurvetoCubicSmoothAbs(C,M,d,b),R);break;case"q":S.replaceItem(t.createSVGPathSegCurvetoQuadraticAbs(C,M,a,u),R);break;case"t":S.replaceItem(t.createSVGPathSegCurvetoQuadraticSmoothAbs(C,M),R);break;case"a":S.replaceItem(t.createSVGPathSegArcAbs(C,M,O.r1,O.r2,O.angle,O.largeArcFlag,O.sweepFlag),R);break;case"z":case"Z":C=i,M=o}"M"!=B&&"m"!=B||(i=C,o=M)}}},function(t,i,o){var a=o(86),u=o(41),d=o(0),b=o(249),S=o(9),C=o(2),M=o(126),P=o(64),R=new d({Extends:S,Mixins:[b.Bounce,b.Collision,b.Friction,b.Gravity,b.Mass,b.Sensor,b.Sleep,b.Static],initialize:function MatterTileBody(t,i,o){S.call(this),this.tile=i,this.world=t,i.physics.matterBody&&i.physics.matterBody.destroy(),i.physics.matterBody=this;var a=C(o,"body",null),u=C(o,"addToWorld",!0);if(a)this.setBody(a,u);else{var d=i.getCollisionGroup();C(d,"objects",[]).length>0?this.setFromTileCollision(o):this.setFromTileRectangle(o)}},setFromTileRectangle:function setFromTileRectangle(t){void 0===t&&(t={}),M(t,"isStatic")||(t.isStatic=!0),M(t,"addToWorld")||(t.addToWorld=!0);var i=this.tile.getBounds(),o=i.x+i.width/2,u=i.y+i.height/2,d=a.rectangle(o,u,i.width,i.height,t);return this.setBody(d,t.addToWorld),this},setFromTileCollision:function setFromTileCollision(t){void 0===t&&(t={}),M(t,"isStatic")||(t.isStatic=!0),M(t,"addToWorld")||(t.addToWorld=!0);for(var i=this.tile.tilemapLayer.scaleX,o=this.tile.tilemapLayer.scaleY,d=this.tile.getLeft(),b=this.tile.getTop(),S=this.tile.getCollisionGroup(),R=C(S,"objects",[]),O=[],B=0;B<R.length;B++){var N=R[B],Y=d+N.x*i,G=b+N.y*o,X=N.width*i,U=N.height*o,z=null;if(N.rectangle)z=a.rectangle(Y+X/2,G+U/2,X,U,t);else if(N.ellipse)z=a.circle(Y+X/2,G+U/2,X/2,t);else if(N.polygon||N.polyline){var V=(N.polygon?N.polygon:N.polyline).map((function(t){return{x:t.x*i,y:t.y*o}})),W=P.create(V),H=P.centre(W);Y+=H.x,G+=H.y,z=a.fromVertices(Y,G,W,t)}z&&O.push(z)}return 1===O.length?this.setBody(O[0],t.addToWorld):O.length>1&&(t.parts=O,this.setBody(u.create(t),t.addToWorld)),this},setBody:function setBody(t,i){return void 0===i&&(i=!0),this.body&&this.removeBody(),this.body=t,this.body.gameObject=this,i&&this.world.add(this.body),this},removeBody:function removeBody(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function destroy(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});t.exports=R},function(t,i,o){var a=o(1399);a.Body=o(41),a.Composite=o(118),a.World=o(596),a.Detector=o(273),a.Grid=o(597),a.Pairs=o(598),a.Pair=o(250),a.Query=o(1400),a.Resolver=o(599),a.SAT=o(274),a.Constraint=o(128),a.Common=o(32),a.Engine=o(1401),a.Events=o(166),a.Sleeping=o(165),a.Plugin=o(595),a.Bodies=o(86),a.Composites=o(591),a.Axes=o(271),a.Bounds=o(84),a.Svg=o(592),a.Vector=o(83),a.Vertices=o(64),a.World.add=a.Composite.add,a.World.remove=a.Composite.remove,a.World.addComposite=a.Composite.addComposite,a.World.addBody=a.Composite.addBody,a.World.addConstraint=a.Composite.addConstraint,a.World.clear=a.Composite.clear,t.exports=a},function(t,i,o){var a={};t.exports=a;var u=o(32);a._registry={},a.register=function(t){if(a.isPlugin(t)||u.warn("Plugin.register:",a.toString(t),"does not implement all required fields."),t.name in a._registry){var i=a._registry[t.name],o=a.versionParse(t.version).number,d=a.versionParse(i.version).number;o>d?(u.warn("Plugin.register:",a.toString(i),"was upgraded to",a.toString(t)),a._registry[t.name]=t):o<d?u.warn("Plugin.register:",a.toString(i),"can not be downgraded to",a.toString(t)):t!==i&&u.warn("Plugin.register:",a.toString(t),"is already registered to different plugin object")}else a._registry[t.name]=t;return t},a.resolve=function(t){return a._registry[a.dependencyParse(t).name]},a.toString=function(t){return"string"==typeof t?t:(t.name||"anonymous")+"@"+(t.version||t.range||"0.0.0")},a.isPlugin=function(t){return t&&t.name&&t.version&&t.install},a.isUsed=function(t,i){return t.used.indexOf(i)>-1},a.isFor=function(t,i){var o=t.for&&a.dependencyParse(t.for);return!t.for||i.name===o.name&&a.versionSatisfies(i.version,o.range)},a.use=function(t,i){if(t.uses=(t.uses||[]).concat(i||[]),0!==t.uses.length){for(var o=a.dependencies(t),d=u.topologicalSort(o),b=[],S=0;S<d.length;S+=1)if(d[S]!==t.name){var C=a.resolve(d[S]);C?a.isUsed(t,C.name)||(a.isFor(C,t)||(u.warn("Plugin.use:",a.toString(C),"is for",C.for,"but installed on",a.toString(t)+"."),C._warned=!0),C.install?C.install(t):(u.warn("Plugin.use:",a.toString(C),"does not specify an install function."),C._warned=!0),C._warned?(b.push(" "+a.toString(C)),delete C._warned):b.push(" "+a.toString(C)),t.used.push(C.name)):b.push(" "+d[S])}b.length>0&&!C.silent&&u.info(b.join("  "))}else u.warn("Plugin.use:",a.toString(t),"does not specify any dependencies to install.")},a.dependencies=function(t,i){var o=a.dependencyParse(t),d=o.name;if(!(d in(i=i||{}))){t=a.resolve(t)||t,i[d]=u.map(t.uses||[],(function(i){a.isPlugin(i)&&a.register(i);var d=a.dependencyParse(i),b=a.resolve(i);return b&&!a.versionSatisfies(b.version,d.range)?(u.warn("Plugin.dependencies:",a.toString(b),"does not satisfy",a.toString(d),"used by",a.toString(o)+"."),b._warned=!0,t._warned=!0):b||(u.warn("Plugin.dependencies:",a.toString(i),"used by",a.toString(o),"could not be resolved."),t._warned=!0),d.name}));for(var b=0;b<i[d].length;b+=1)a.dependencies(i[d][b],i);return i}},a.dependencyParse=function(t){return u.isString(t)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/.test(t)||u.warn("Plugin.dependencyParse:",t,"is not a valid dependency string."),{name:t.split("@")[0],range:t.split("@")[1]||"*"}):{name:t.name,range:t.range||t.version}},a.versionParse=function(t){/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/.test(t)||u.warn("Plugin.versionParse:",t,"is not a valid version or range.");var i=t.split("-");t=i[0];var o=isNaN(Number(t[0])),a=o?t.substr(1):t,d=u.map(a.split("."),(function(t){return Number(t)}));return{isRange:o,version:a,range:t,operator:o?t[0]:"",parts:d,prerelease:i[1],number:1e8*d[0]+1e4*d[1]+d[2]}},a.versionSatisfies=function(t,i){i=i||"*";var o=a.versionParse(i),u=o.parts,d=a.versionParse(t),b=d.parts;if(o.isRange){if("*"===o.operator||"*"===t)return!0;if("~"===o.operator)return b[0]===u[0]&&b[1]===u[1]&&b[2]>=u[2];if("^"===o.operator)return u[0]>0?b[0]===u[0]&&d.number>=o.number:u[1]>0?b[1]===u[1]&&b[2]>=u[2]:b[2]===u[2]}return t===i||"*"===t}},function(t,i,o){var a={};t.exports=a;var u=o(118);o(128);var d=o(32);a.create=function(t){var i=u.create(),o={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return d.extend(i,o,t)}},function(t,i,o){var a={};t.exports=a;var u=o(250),d=o(273),b=o(32);a.create=function(t){var i={controller:a,detector:d.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return b.extend(i,t)},a.update=function(t,i,o,u){var d,b,S,C,M,P=o.world,R=t.buckets,O=!1,B=o.metrics;for(B.broadphaseTests=0,d=0;d<i.length;d++){var N=i[d];if((!N.isSleeping||u)&&!(N.bounds.max.x<P.bounds.min.x||N.bounds.min.x>P.bounds.max.x||N.bounds.max.y<P.bounds.min.y||N.bounds.min.y>P.bounds.max.y)){var Y=a._getRegion(t,N);if(!N.region||Y.id!==N.region.id||u){B.broadphaseTests+=1,N.region&&!u||(N.region=Y);var G=a._regionUnion(Y,N.region);for(b=G.startCol;b<=G.endCol;b++)for(S=G.startRow;S<=G.endRow;S++){C=R[M=a._getBucketId(b,S)];var X=b>=Y.startCol&&b<=Y.endCol&&S>=Y.startRow&&S<=Y.endRow,U=b>=N.region.startCol&&b<=N.region.endCol&&S>=N.region.startRow&&S<=N.region.endRow;!X&&U&&U&&C&&a._bucketRemoveBody(t,C,N),(N.region===Y||X&&!U||u)&&(C||(C=a._createBucket(R,M)),a._bucketAddBody(t,C,N))}N.region=Y,O=!0}}}O&&(t.pairsList=a._createActivePairsList(t))},a.clear=function(t){t.buckets={},t.pairs={},t.pairsList=[]},a._regionUnion=function(t,i){var o=Math.min(t.startCol,i.startCol),u=Math.max(t.endCol,i.endCol),d=Math.min(t.startRow,i.startRow),b=Math.max(t.endRow,i.endRow);return a._createRegion(o,u,d,b)},a._getRegion=function(t,i){var o=i.bounds,u=Math.floor(o.min.x/t.bucketWidth),d=Math.floor(o.max.x/t.bucketWidth),b=Math.floor(o.min.y/t.bucketHeight),S=Math.floor(o.max.y/t.bucketHeight);return a._createRegion(u,d,b,S)},a._createRegion=function(t,i,o,a){return{id:t+","+i+","+o+","+a,startCol:t,endCol:i,startRow:o,endRow:a}},a._getBucketId=function(t,i){return"C"+t+"R"+i},a._createBucket=function(t,i){return t[i]=[]},a._bucketAddBody=function(t,i,o){for(var a=0;a<i.length;a++){var d=i[a];if(!(o.id===d.id||o.isStatic&&d.isStatic)){var b=u.id(o,d),S=t.pairs[b];S?S[2]+=1:t.pairs[b]=[o,d,1]}}i.push(o)},a._bucketRemoveBody=function(t,i,o){i.splice(i.indexOf(o),1);for(var a=0;a<i.length;a++){var d=i[a],b=u.id(o,d),S=t.pairs[b];S&&(S[2]-=1)}},a._createActivePairsList=function(t){var i,o,a=[];i=b.keys(t.pairs);for(var u=0;u<i.length;u++)(o=t.pairs[i[u]])[2]>0?a.push(o):delete t.pairs[i[u]];return a}},function(t,i,o){var a={};t.exports=a;var u=o(250),d=o(32);a._pairMaxIdleLife=1e3,a.create=function(t){return d.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},t)},a.update=function(t,i,o){var a,d,b,S,C=t.list,M=t.table,P=t.collisionStart,R=t.collisionEnd,O=t.collisionActive;for(P.length=0,R.length=0,O.length=0,S=0;S<C.length;S++)C[S].confirmedActive=!1;for(S=0;S<i.length;S++)(a=i[S]).collided&&((b=M[d=u.id(a.bodyA,a.bodyB)])?(b.isActive?O.push(b):P.push(b),u.update(b,a,o),b.confirmedActive=!0):(b=u.create(a,o),M[d]=b,P.push(b),C.push(b)));for(S=0;S<C.length;S++)(b=C[S]).isActive&&!b.confirmedActive&&(u.setActive(b,!1,o),R.push(b))},a.removeOld=function(t,i){var o,u,d,b,S=t.list,C=t.table,M=[];for(b=0;b<S.length;b++)(u=(o=S[b]).collision).bodyA.isSleeping||u.bodyB.isSleeping?o.timeUpdated=i:i-o.timeUpdated>a._pairMaxIdleLife&&M.push(b);for(b=0;b<M.length;b++)delete C[(o=S[d=M[b]-b]).id],S.splice(d,1)},a.clear=function(t){return t.table={},t.list.length=0,t.collisionStart.length=0,t.collisionActive.length=0,t.collisionEnd.length=0,t}},function(t,i,o){var a={};t.exports=a;var u=o(64),d=o(83),b=o(32),S=o(84);a._restingThresh=4,a._restingThreshTangent=6,a._positionDampen=.9,a._positionWarming=.8,a._frictionNormalMultiplier=5,a.preSolvePosition=function(t){var i,o,a;for(i=0;i<t.length;i++)(o=t[i]).isActive&&(a=o.activeContacts.length,o.collision.parentA.totalContacts+=a,o.collision.parentB.totalContacts+=a)},a.solvePosition=function(t,i,o){var u,d,b,S,C,M,P,R,O,B,N,Y,G,X,U,z,V=o*a._positionDampen;for(u=0;u<i.length;u++){var W=i[u];W.previousPositionImpulse.x=W.positionImpulse.x,W.previousPositionImpulse.y=W.positionImpulse.y}for(u=0;u<t.length;u++)(S=t[u]).isActive&&!S.isSensor&&(M=(C=S.collision).parentA,P=C.parentB,R=C.normal,N=M.previousPositionImpulse,Y=P.previousPositionImpulse,B=C.penetration,X=Y.x-N.x+B.x,U=Y.y-N.y+B.y,O=(d=R.x)*X+(b=R.y)*U,S.separation=O,z=(O-S.slop)*V,(M.isStatic||P.isStatic)&&(z*=2),M.isStatic||M.isSleeping||(G=z/M.totalContacts,M.positionImpulse.x+=d*G,M.positionImpulse.y+=b*G),P.isStatic||P.isSleeping||(G=z/P.totalContacts,P.positionImpulse.x-=d*G,P.positionImpulse.y-=b*G))},a.postSolvePosition=function(t){for(var i=0;i<t.length;i++){var o=t[i];if(o.totalContacts=0,0!==o.positionImpulse.x||0!==o.positionImpulse.y){for(var b=0;b<o.parts.length;b++){var C=o.parts[b];u.translate(C.vertices,o.positionImpulse),S.update(C.bounds,C.vertices,o.velocity),C.position.x+=o.positionImpulse.x,C.position.y+=o.positionImpulse.y}o.positionPrev.x+=o.positionImpulse.x,o.positionPrev.y+=o.positionImpulse.y,d.dot(o.positionImpulse,o.velocity)<0?(o.positionImpulse.x=0,o.positionImpulse.y=0):(o.positionImpulse.x*=a._positionWarming,o.positionImpulse.y*=a._positionWarming)}}},a.preSolveVelocity=function(t){var i,o,a,u,b,S,C,M,P,R,O,B,N,Y,G=d._temp[0],X=d._temp[1];for(i=0;i<t.length;i++)if((a=t[i]).isActive&&!a.isSensor)for(u=a.activeContacts,S=(b=a.collision).parentA,C=b.parentB,M=b.normal,P=b.tangent,o=0;o<u.length;o++)O=(R=u[o]).vertex,B=R.normalImpulse,N=R.tangentImpulse,0===B&&0===N||(G.x=M.x*B+P.x*N,G.y=M.y*B+P.y*N,S.isStatic||S.isSleeping||(Y=d.sub(O,S.position,X),S.positionPrev.x+=G.x*S.inverseMass,S.positionPrev.y+=G.y*S.inverseMass,S.anglePrev+=d.cross(Y,G)*S.inverseInertia),C.isStatic||C.isSleeping||(Y=d.sub(O,C.position,X),C.positionPrev.x-=G.x*C.inverseMass,C.positionPrev.y-=G.y*C.inverseMass,C.anglePrev-=d.cross(Y,G)*C.inverseInertia))},a.solveVelocity=function(t,i){for(var o=i*i,u=d._temp[0],S=d._temp[1],C=d._temp[2],M=d._temp[3],P=d._temp[4],R=d._temp[5],O=0;O<t.length;O++){var B=t[O];if(B.isActive&&!B.isSensor){var N=B.collision,Y=N.parentA,G=N.parentB,X=N.normal,U=N.tangent,z=B.activeContacts,V=1/z.length;Y.velocity.x=Y.position.x-Y.positionPrev.x,Y.velocity.y=Y.position.y-Y.positionPrev.y,G.velocity.x=G.position.x-G.positionPrev.x,G.velocity.y=G.position.y-G.positionPrev.y,Y.angularVelocity=Y.angle-Y.anglePrev,G.angularVelocity=G.angle-G.anglePrev;for(var W=0;W<z.length;W++){var H=z[W],j=H.vertex,q=d.sub(j,Y.position,S),Z=d.sub(j,G.position,C),K=d.add(Y.velocity,d.mult(d.perp(q),Y.angularVelocity),M),$=d.add(G.velocity,d.mult(d.perp(Z),G.angularVelocity),P),tt=d.sub(K,$,R),et=d.dot(X,tt),it=d.dot(U,tt),nt=Math.abs(it),rt=b.sign(it),st=(1+B.restitution)*et,ot=b.clamp(B.separation+et,0,1)*a._frictionNormalMultiplier,at=it,ht=1/0;nt>B.friction*B.frictionStatic*ot*o&&(ht=nt,at=b.clamp(B.friction*rt*o,-ht,ht));var lt=d.cross(q,X),ut=d.cross(Z,X),ct=V/(Y.inverseMass+G.inverseMass+Y.inverseInertia*lt*lt+G.inverseInertia*ut*ut);if(st*=ct,at*=ct,et<0&&et*et>a._restingThresh*o)H.normalImpulse=0;else{var dt=H.normalImpulse;H.normalImpulse=Math.min(H.normalImpulse+st,0),st=H.normalImpulse-dt}if(it*it>a._restingThreshTangent*o)H.tangentImpulse=0;else{var ft=H.tangentImpulse;H.tangentImpulse=b.clamp(H.tangentImpulse+at,-ht,ht),at=H.tangentImpulse-ft}u.x=X.x*st+U.x*at,u.y=X.y*st+U.y*at,Y.isStatic||Y.isSleeping||(Y.positionPrev.x+=u.x*Y.inverseMass,Y.positionPrev.y+=u.y*Y.inverseMass,Y.anglePrev+=d.cross(q,u)*Y.inverseInertia),G.isStatic||G.isSleeping||(G.positionPrev.x-=u.x*G.inverseMass,G.positionPrev.y-=u.y*G.inverseMass,G.anglePrev-=d.cross(Z,u)*G.inverseInertia)}}}}},function(t,i){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch(a){"object"===("undefined"==typeof window?"undefined":_typeof(window))&&(o=window)}t.exports=o},function(t,i,o){var a=o(276);t.exports=function AlignTo(t,i,o,u){for(var d=t[0],b=1;b<t.length;b++){var S=t[b];a(S,d,i,o,u),d=S}return t}},function(t,i,o){var a=o(46);t.exports=function Angle(t,i,o,u,d){return a(t,"angle",i,o,u,d)}},function(t,i){t.exports=function Call(t,i,o){for(var a=0;a<t.length;a++){var u=t[a];i.call(o,u)}return t}},function(t,i){t.exports=function GetFirst(t,i,o){void 0===o&&(o=0);for(var a=o;a<t.length;a++){var u=t[a],d=!0;for(var b in i)u[b]!==i[b]&&(d=!1);if(d)return u}return null}},function(t,i){t.exports=function GetLast(t,i,o){void 0===o&&(o=0);for(var a=o;a<t.length;a++){var u=t[a],d=!0;for(var b in i)u[b]!==i[b]&&(d=!1);if(d)return u}return null}},function(t,i,o){var a=o(289),u=o(123),d=o(2),b=o(1),S=new(o(129))({sys:{queueDepthSort:b,events:{once:b}}},0,0,1,1);t.exports=function GridAlign(t,i){void 0===i&&(i={});var o=i.hasOwnProperty("width"),b=i.hasOwnProperty("height"),C=d(i,"width",-1),M=d(i,"height",-1),P=d(i,"cellWidth",1),R=d(i,"cellHeight",P),O=d(i,"position",u.TOP_LEFT),B=d(i,"x",0),N=d(i,"y",0),Y=0,G=0,X=C*P,U=M*R;S.setPosition(B,N),S.setSize(P,R);for(var z=0;z<t.length;z++)if(a(t[z],S,O),o&&-1===C)S.x+=P;else if(b&&-1===M)S.y+=R;else if(b&&!o){if(G+=R,S.y+=R,G===U&&(G=0,Y+=P,S.y=N,S.x+=P,Y===X))break}else if(Y+=P,S.x+=P,Y===X&&(Y=0,G+=R,S.x=B,S.y+=R,G===U))break;return t}},function(t,i,o){var a=o(18),u={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function clearAlpha(){return this.setAlpha(1)},setAlpha:function setAlpha(t,i,o,u){return void 0===t&&(t=1),void 0===i?this.alpha=t:(this._alphaTL=a(t,0,1),this._alphaTR=a(i,0,1),this._alphaBL=a(o,0,1),this._alphaBR=a(u,0,1)),this},alpha:{get:function get(){return this._alpha},set:function set(t){var i=a(t,0,1);this._alpha=i,this._alphaTL=i,this._alphaTR=i,this._alphaBL=i,this._alphaBR=i,0===i?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function get(){return this._alphaTL},set:function set(t){var i=a(t,0,1);this._alphaTL=i,0!==i&&(this.renderFlags|=2)}},alphaTopRight:{get:function get(){return this._alphaTR},set:function set(t){var i=a(t,0,1);this._alphaTR=i,0!==i&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function get(){return this._alphaBL},set:function set(t){var i=a(t,0,1);this._alphaBL=i,0!==i&&(this.renderFlags|=2)}},alphaBottomRight:{get:function get(){return this._alphaBR},set:function set(t){var i=a(t,0,1);this._alphaBR=i,0!==i&&(this.renderFlags|=2)}}};t.exports=u},function(t,i){t.exports={width:0,height:0,displayWidth:{get:function get(){return this.scaleX*this.width},set:function set(t){this.scaleX=t/this.width}},displayHeight:{get:function get(){return this.scaleY*this.height},set:function set(t){this.scaleY=t/this.height}},setSize:function setSize(t,i){return this.width=t,this.height=i,this},setDisplaySize:function setDisplaySize(t,i){return this.displayWidth=t,this.displayHeight=i,this}}},function(t,i){var o={texture:null,frame:null,isCropped:!1,setCrop:function setCrop(t,i,o,a){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,i,o,a,this.flipX,this.flipY);else{var u=t;this.frame.setCropUVs(this._crop,u.x,u.y,u.width,u.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function resetCropObject(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};t.exports=o},function(t,i){t.exports={flipX:!1,flipY:!1,toggleFlipX:function toggleFlipX(){return this.flipX=!this.flipX,this},toggleFlipY:function toggleFlipY(){return this.flipY=!this.flipY,this},setFlipX:function setFlipX(t){return this.flipX=t,this},setFlipY:function setFlipY(t){return this.flipY=t,this},setFlip:function setFlip(t,i){return this.flipX=t,this.flipY=i,this},resetFlip:function resetFlip(){return this.flipX=!1,this.flipY=!1,this}}},function(t,i,o){var a=o(10),u=o(308),d=o(3),b={prepareBoundsOutput:function prepareBoundsOutput(t,i){return void 0===i&&(i=!1),0!==this.rotation&&u(t,this.x,this.y,this.rotation),i&&this.parentContainer&&this.parentContainer.getBoundsTransformMatrix().transformPoint(t.x,t.y,t),t},getCenter:function getCenter(t){return void 0===t&&(t=new d),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,t},getTopLeft:function getTopLeft(t,i){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,i)},getTopCenter:function getTopCenter(t,i){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,i)},getTopRight:function getTopRight(t,i){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,i)},getLeftCenter:function getLeftCenter(t,i){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,i)},getRightCenter:function getRightCenter(t,i){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,i)},getBottomLeft:function getBottomLeft(t,i){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,i)},getBottomCenter:function getBottomCenter(t,i){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,i)},getBottomRight:function getBottomRight(t,i){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,i)},getBounds:function getBounds(t){var i,o,u,d,b,S,C,M;if(void 0===t&&(t=new a),this.parentContainer){var P=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(t),P.transformPoint(t.x,t.y,t),i=t.x,o=t.y,this.getTopRight(t),P.transformPoint(t.x,t.y,t),u=t.x,d=t.y,this.getBottomLeft(t),P.transformPoint(t.x,t.y,t),b=t.x,S=t.y,this.getBottomRight(t),P.transformPoint(t.x,t.y,t),C=t.x,M=t.y}else this.getTopLeft(t),i=t.x,o=t.y,this.getTopRight(t),u=t.x,d=t.y,this.getBottomLeft(t),b=t.x,S=t.y,this.getBottomRight(t),C=t.x,M=t.y;return t.x=Math.min(i,u,b,C),t.y=Math.min(o,d,S,M),t.width=Math.max(i,u,b,C)-t.x,t.height=Math.max(o,d,S,M)-t.y,t}};t.exports=b},function(t,i){t.exports="blur"},function(t,i){t.exports="boot"},function(t,i){t.exports="contextlost"},function(t,i){t.exports="contextrestored"},function(t,i){t.exports="destroy"},function(t,i){t.exports="focus"},function(t,i){t.exports="hidden"},function(t,i){t.exports="pause"},function(t,i){t.exports="postrender"},function(t,i){t.exports="poststep"},function(t,i){t.exports="prerender"},function(t,i){t.exports="prestep"},function(t,i){t.exports="ready"},function(t,i){t.exports="resume"},function(t,i){t.exports="step"},function(t,i){t.exports="visible"},function(t,i){t.exports="postrender"},function(t,i){t.exports="prerender"},function(t,i){t.exports="render"},function(t,i){t.exports="resize"},function(t,i){var o={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function get(){return this._displayOriginX},set:function set(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function get(){return this._displayOriginY},set:function set(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function setOrigin(t,i){return void 0===t&&(t=.5),void 0===i&&(i=t),this.originX=t,this.originY=i,this.updateDisplayOrigin()},setOriginFromFrame:function setOriginFromFrame(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function setDisplayOrigin(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.displayOriginX=t,this.displayOriginY=i,this},updateDisplayOrigin:function updateDisplayOrigin(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};t.exports=o},function(t,i,o){var a=o(36),u=o(99),d=o(6),b=o(100),S=o(3),C={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:b.PLAYING_FORWARD,setPath:function setPath(t,i){void 0===i&&(i=this.pathConfig);var o=this.pathTween;return o&&o.isPlaying()&&o.stop(),this.path=t,i&&this.startFollow(i),this},setRotateToPath:function setRotateToPath(t,i){return void 0===i&&(i=0),this.rotateToPath=t,this.pathRotationOffset=i,this},isFollowing:function isFollowing(){var t=this.pathTween;return t&&t.isPlaying()},startFollow:function startFollow(t,i){void 0===t&&(t={}),void 0===i&&(i=0);var o=this.pathTween;o&&o.isPlaying()&&o.stop(),"number"==typeof t&&(t={duration:t}),t.from=d(t,"from",0),t.to=d(t,"to",1);var C=u(t,"positionOnPath",!1);this.rotateToPath=u(t,"rotateToPath",!1),this.pathRotationOffset=d(t,"rotationOffset",0);var M=d(t,"startAt",i);if(M&&(t.onStart=function(t){var i=t.data[0];i.progress=M,i.elapsed=i.duration*M;var o=i.ease(i.progress);i.current=i.start+(i.end-i.start)*o,i.target[i.key]=i.current}),this.pathOffset||(this.pathOffset=new S(this.x,this.y)),this.pathVector||(this.pathVector=new S),this.pathDelta||(this.pathDelta=new S),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(t),this.path.getStartPoint(this.pathOffset),C&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=b.PLAYING_FORWARD,this.rotateToPath){var P=this.path.getPoint(.1);this.rotation=Math.atan2(P.y-this.y,P.x-this.x)+a(this.pathRotationOffset)}return this.pathConfig=t,this},pauseFollow:function pauseFollow(){var t=this.pathTween;return t&&t.isPlaying()&&t.pause(),this},resumeFollow:function resumeFollow(){var t=this.pathTween;return t&&t.isPaused()&&t.resume(),this},stopFollow:function stopFollow(){var t=this.pathTween;return t&&t.isPlaying()&&t.stop(),this},pathUpdate:function pathUpdate(){var t=this.pathTween;if(t){var i=t.data[0],o=this.pathDelta,u=this.pathVector;if(o.copy(u).negate(),i.state===b.COMPLETE)return this.path.getPoint(1,u),o.add(u),u.add(this.pathOffset),void this.setPosition(u.x,u.y);if(i.state!==b.PLAYING_FORWARD&&i.state!==b.PLAYING_BACKWARD)return;this.path.getPoint(t.getValue(),u),o.add(u),u.add(this.pathOffset);var d=this.x,S=this.y;this.setPosition(u.x,u.y);var C=this.x-d,M=this.y-S;if(0===C&&0===M)return;if(i.state!==this._prevDirection)return void(this._prevDirection=i.state);this.rotateToPath&&(this.rotation=Math.atan2(M,C)+a(this.pathRotationOffset))}}};t.exports=C},function(t,i){var o={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function get(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function set(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function get(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function set(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function setSizeToFrame(t){return void 0===t&&(t=this.frame),this.width=t.realWidth,this.height=t.realHeight,this},setSize:function setSize(t,i){return this.width=t,this.height=i,this},setDisplaySize:function setDisplaySize(t,i){return this.displayWidth=t,this.displayHeight=i,this}};t.exports=o},function(t,i){var o={texture:null,frame:null,isCropped:!1,setTexture:function setTexture(t,i){return this.texture=this.scene.sys.textures.get(t),this.setFrame(i)},setFrame:function setFrame(t,i,o){return void 0===i&&(i=!0),void 0===o&&(o=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&i&&this.setSizeToFrame(),this._originComponent&&o&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};t.exports=o},function(t,i){var o={texture:null,frame:null,isCropped:!1,setCrop:function setCrop(t,i,o,a){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,i,o,a,this.flipX,this.flipY);else{var u=t;this.frame.setCropUVs(this._crop,u.x,u.y,u.width,u.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function setTexture(t,i){return this.texture=this.scene.sys.textures.get(t),this.setFrame(i)},setFrame:function setFrame(t,i,o){return void 0===i&&(i=!0),void 0===o&&(o=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&i&&this.setSizeToFrame(),this._originComponent&&o&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function resetCropObject(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};t.exports=o},function(t,i){var o={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function clearTint(){return this.setTint(16777215),this},setTint:function setTint(t,i,o,a){return void 0===t&&(t=16777215),void 0===i&&(i=t,o=t,a=t),this.tintTopLeft=t,this.tintTopRight=i,this.tintBottomLeft=o,this.tintBottomRight=a,this.tintFill=!1,this},setTintFill:function setTintFill(t,i,o,a){return this.setTint(t,i,o,a),this.tintFill=!0,this},tint:{set:function set(t){this.setTint(t,t,t,t)}},isTinted:{get:function get(){var t=16777215;return this.tintFill||this.tintTopLeft!==t||this.tintTopRight!==t||this.tintBottomLeft!==t||this.tintBottomRight!==t}}};t.exports=o},function(t,i){t.exports="changedata"},function(t,i){t.exports="changedata-"},function(t,i){t.exports="destroy"},function(t,i){t.exports="removedata"},function(t,i){t.exports="setdata"},function(t,i){t.exports="addedtoscene"},function(t,i){t.exports="destroy"},function(t,i){t.exports="removedfromscene"},function(t,i){t.exports="complete"},function(t,i){t.exports="created"},function(t,i){t.exports="error"},function(t,i){t.exports="loop"},function(t,i){t.exports="play"},function(t,i){t.exports="seeked"},function(t,i){t.exports="seeking"},function(t,i){t.exports="stop"},function(t,i){t.exports="timeout"},function(t,i){t.exports="unlocked"},function(t,i){t.exports="addedtoscene"},function(t,i){t.exports="boot"},function(t,i){t.exports="create"},function(t,i){t.exports="destroy"},function(t,i){t.exports="pause"},function(t,i){t.exports="postupdate"},function(t,i){t.exports="prerender"},function(t,i){t.exports="preupdate"},function(t,i){t.exports="ready"},function(t,i){t.exports="removedfromscene"},function(t,i){t.exports="render"},function(t,i){t.exports="resume"},function(t,i){t.exports="shutdown"},function(t,i){t.exports="sleep"},function(t,i){t.exports="start"},function(t,i){t.exports="transitioncomplete"},function(t,i){t.exports="transitioninit"},function(t,i){t.exports="transitionout"},function(t,i){t.exports="transitionstart"},function(t,i){t.exports="transitionwake"},function(t,i){t.exports="update"},function(t,i){t.exports="wake"},function(t,i,o){var a=o(46);t.exports=function IncAlpha(t,i,o,u,d){return a(t,"alpha",i,o,u,d)}},function(t,i,o){var a=o(46);t.exports=function IncX(t,i,o,u,d){return a(t,"x",i,o,u,d)}},function(t,i,o){var a=o(46);t.exports=function IncXY(t,i,o,u,d,b,S){return null==o&&(o=i),a(t,"x",i,u,b,S),a(t,"y",o,d,b,S)}},function(t,i,o){var a=o(46);t.exports=function IncY(t,i,o,u,d){return a(t,"y",i,o,u,d)}},function(t,i){t.exports=function PlaceOnCircle(t,i,o,a){void 0===o&&(o=0),void 0===a&&(a=6.28);for(var u=o,d=(a-o)/t.length,b=0;b<t.length;b++)t[b].x=i.x+i.radius*Math.cos(u),t[b].y=i.y+i.radius*Math.sin(u),u+=d;return t}},function(t,i){t.exports=function PlaceOnEllipse(t,i,o,a){void 0===o&&(o=0),void 0===a&&(a=6.28);for(var u=o,d=(a-o)/t.length,b=i.width/2,S=i.height/2,C=0;C<t.length;C++)t[C].x=i.x+b*Math.cos(u),t[C].y=i.y+S*Math.sin(u),u+=d;return t}},function(t,i,o){var a=o(172);t.exports=function PlaceOnLine(t,i){for(var o=a(i,t.length),u=0;u<t.length;u++){var d=t[u],b=o[u];d.x=b.x,d.y=b.y}return t}},function(t,i,o){var a=o(316),u=o(178),d=o(179);t.exports=function PlaceOnRectangle(t,i,o){void 0===o&&(o=0);var b=a(i,!1,t.length);o>0?u(b,o):o<0&&d(b,Math.abs(o));for(var S=0;S<t.length;S++)t[S].x=b[S].x,t[S].y=b[S].y;return t}},function(t,i,o){var a=o(317);t.exports=function PlaceOnTriangle(t,i,o){var u=a({x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},o),d=a({x1:i.x2,y1:i.y2,x2:i.x3,y2:i.y3},o),b=a({x1:i.x3,y1:i.y3,x2:i.x1,y2:i.y1},o);u.pop(),d.pop(),b.pop();for(var S=(u=u.concat(d,b)).length/t.length,C=0,M=0;M<t.length;M++){var P=t[M],R=u[Math.floor(C)];P.x=R.x,P.y=R.y,C+=S}return t}},function(t,i){t.exports=function PlayAnimation(t,i,o){for(var a=0;a<t.length;a++){var u=t[a];u.anims&&u.anims.play(i,o)}return t}},function(t,i,o){var a=o(170);t.exports=function RandomCircle(t,i){for(var o=0;o<t.length;o++)a(i,t[o]);return t}},function(t,i,o){var a=o(180);t.exports=function RandomEllipse(t,i){for(var o=0;o<t.length;o++)a(i,t[o]);return t}},function(t,i,o){var a=o(173);t.exports=function RandomLine(t,i){for(var o=0;o<t.length;o++)a(i,t[o]);return t}},function(t,i,o){var a=o(174);t.exports=function RandomRectangle(t,i){for(var o=0;o<t.length;o++)a(i,t[o]);return t}},function(t,i,o){var a=o(181);t.exports=function RandomTriangle(t,i){for(var o=0;o<t.length;o++)a(i,t[o]);return t}},function(t,i,o){var a=o(46);t.exports=function Rotate(t,i,o,u,d){return a(t,"rotation",i,o,u,d)}},function(t,i,o){var a=o(182),u=o(50);t.exports=function RotateAround(t,i,o){for(var d=i.x,b=i.y,S=0;S<t.length;S++){var C=t[S];a(C,d,b,o,Math.max(1,u(C.x,C.y,d,b)))}return t}},function(t,i,o){var a=o(182);t.exports=function RotateAroundDistance(t,i,o,u){var d=i.x,b=i.y;if(0===u)return t;for(var S=0;S<t.length;S++)a(t[S],d,b,o,u);return t}},function(t,i,o){var a=o(46);t.exports=function ScaleX(t,i,o,u,d){return a(t,"scaleX",i,o,u,d)}},function(t,i,o){var a=o(46);t.exports=function ScaleXY(t,i,o,u,d,b,S){return null==o&&(o=i),a(t,"scaleX",i,u,b,S),a(t,"scaleY",o,d,b,S)}},function(t,i,o){var a=o(46);t.exports=function ScaleY(t,i,o,u,d){return a(t,"scaleY",i,o,u,d)}},function(t,i,o){var a=o(27);t.exports=function SetAlpha(t,i,o,u,d){return a(t,"alpha",i,o,u,d)}},function(t,i,o){var a=o(27);t.exports=function SetBlendMode(t,i,o,u){return a(t,"blendMode",i,0,o,u)}},function(t,i,o){var a=o(27);t.exports=function SetDepth(t,i,o,u,d){return a(t,"depth",i,o,u,d)}},function(t,i){t.exports=function SetHitArea(t,i,o){for(var a=0;a<t.length;a++)t[a].setInteractive(i,o);return t}},function(t,i,o){var a=o(27);t.exports=function SetOrigin(t,i,o,u,d,b,S){return null==o&&(o=i),a(t,"originX",i,u,b,S),a(t,"originY",o,d,b,S),t.forEach((function(t){t.updateDisplayOrigin()})),t}},function(t,i,o){var a=o(27);t.exports=function SetRotation(t,i,o,u,d){return a(t,"rotation",i,o,u,d)}},function(t,i,o){var a=o(27);t.exports=function SetScale(t,i,o,u,d,b,S){return null==o&&(o=i),a(t,"scaleX",i,u,b,S),a(t,"scaleY",o,d,b,S)}},function(t,i,o){var a=o(27);t.exports=function SetScaleX(t,i,o,u,d){return a(t,"scaleX",i,o,u,d)}},function(t,i,o){var a=o(27);t.exports=function SetScaleY(t,i,o,u,d){return a(t,"scaleY",i,o,u,d)}},function(t,i,o){var a=o(27);t.exports=function SetScrollFactor(t,i,o,u,d,b,S){return null==o&&(o=i),a(t,"scrollFactorX",i,u,b,S),a(t,"scrollFactorY",o,d,b,S)}},function(t,i,o){var a=o(27);t.exports=function SetScrollFactorX(t,i,o,u,d){return a(t,"scrollFactorX",i,o,u,d)}},function(t,i,o){var a=o(27);t.exports=function SetScrollFactorY(t,i,o,u,d){return a(t,"scrollFactorY",i,o,u,d)}},function(t,i){t.exports=function SetTint(t,i,o,a,u){for(var d=0;d<t.length;d++)t[d].setTint(i,o,a,u);return t}},function(t,i,o){var a=o(27);t.exports=function SetVisible(t,i,o,u){return a(t,"visible",i,0,o,u)}},function(t,i,o){var a=o(27);t.exports=function SetX(t,i,o,u,d){return a(t,"x",i,o,u,d)}},function(t,i,o){var a=o(27);t.exports=function SetXY(t,i,o,u,d,b,S){return null==o&&(o=i),a(t,"x",i,u,b,S),a(t,"y",o,d,b,S)}},function(t,i,o){var a=o(27);t.exports=function SetY(t,i,o,u,d){return a(t,"y",i,o,u,d)}},function(t,i,o){var a=o(3);t.exports=function ShiftPosition(t,i,o,u,d){var b,S,C,M,P,R;if(void 0===u&&(u=0),void 0===d&&(d=new a),t.length>1)if(0===u){var O=t.length-1;for(b=t[O].x,S=t[O].y,C=O-1;C>=0;C--)M=(R=t[C]).x,P=R.y,R.x=b,R.y=S,b=M,S=P;t[O].x=i,t[O].y=o}else{for(b=t[0].x,S=t[0].y,C=1;C<t.length;C++)M=(R=t[C]).x,P=R.y,R.x=b,R.y=S,b=M,S=P;t[0].x=i,t[0].y=o}else b=t[0].x,S=t[0].y,t[0].x=i,t[0].y=o;return d.x=b,d.y=S,d}},function(t,i,o){var a=o(131);t.exports=function Shuffle(t){return a(t)}},function(t,i,o){var a=o(183);t.exports=function SmootherStep(t,i,o,u,d){void 0===d&&(d=!1);var b,S=Math.abs(u-o)/t.length;if(d)for(b=0;b<t.length;b++)t[b][i]+=a(b*S,o,u);else for(b=0;b<t.length;b++)t[b][i]=a(b*S,o,u);return t}},function(t,i,o){var a=o(184);t.exports=function SmoothStep(t,i,o,u,d){void 0===d&&(d=!1);var b,S=Math.abs(u-o)/t.length;if(d)for(b=0;b<t.length;b++)t[b][i]+=a(b*S,o,u);else for(b=0;b<t.length;b++)t[b][i]=a(b*S,o,u);return t}},function(t,i){t.exports=function Spread(t,i,o,a,u){void 0===u&&(u=!1);var d,b=Math.abs(a-o)/t.length;if(u)for(d=0;d<t.length;d++)t[d][i]+=d*b+o;else for(d=0;d<t.length;d++)t[d][i]=d*b+o;return t}},function(t,i){t.exports=function ToggleVisible(t){for(var i=0;i<t.length;i++)t[i].visible=!t[i].visible;return t}},function(t,i,o){var a=o(68);t.exports=function WrapInRectangle(t,i,o){void 0===o&&(o=0);for(var u=0;u<t.length;u++){var d=t[u];d.x=a(d.x,i.left-o,i.right+o),d.y=a(d.y,i.top-o,i.bottom+o)}return t}},function(t,i,o){t.exports={Animation:o(185),AnimationFrame:o(319),AnimationManager:o(321),AnimationState:o(164),Events:o(132)}},function(t,i){t.exports="add"},function(t,i){t.exports="animationcomplete"},function(t,i){t.exports="animationcomplete-"},function(t,i){t.exports="animationrepeat"},function(t,i){t.exports="animationrestart"},function(t,i){t.exports="animationstart"},function(t,i){t.exports="animationstop"},function(t,i){t.exports="animationupdate"},function(t,i){t.exports="pauseall"},function(t,i){t.exports="remove"},function(t,i){t.exports="resumeall"},function(t,i,o){t.exports={BaseCache:o(323),CacheManager:o(325),Events:o(324)}},function(t,i){t.exports="add"},function(t,i){t.exports="remove"},function(t,i,o){t.exports={Controls:o(739),Scene2D:o(742)}},function(t,i,o){t.exports={FixedKeyControl:o(740),SmoothedKeyControl:o(741)}},function(t,i,o){var a=o(0),u=o(6),d=new a({initialize:function FixedKeyControl(t){this.camera=u(t,"camera",null),this.left=u(t,"left",null),this.right=u(t,"right",null),this.up=u(t,"up",null),this.down=u(t,"down",null),this.zoomIn=u(t,"zoomIn",null),this.zoomOut=u(t,"zoomOut",null),this.zoomSpeed=u(t,"zoomSpeed",.01),this.minZoom=u(t,"minZoom",.001),this.maxZoom=u(t,"maxZoom",1e3),this.speedX=0,this.speedY=0;var i=u(t,"speed",null);"number"==typeof i?(this.speedX=i,this.speedY=i):(this.speedX=u(t,"speed.x",0),this.speedY=u(t,"speed.y",0)),this._zoom=0,this.active=null!==this.camera},start:function start(){return this.active=null!==this.camera,this},stop:function stop(){return this.active=!1,this},setCamera:function setCamera(t){return this.camera=t,this},update:function update(t){if(this.active){void 0===t&&(t=1);var i=this.camera;this.up&&this.up.isDown?i.scrollY-=this.speedY*t|0:this.down&&this.down.isDown&&(i.scrollY+=this.speedY*t|0),this.left&&this.left.isDown?i.scrollX-=this.speedX*t|0:this.right&&this.right.isDown&&(i.scrollX+=this.speedX*t|0),this.zoomIn&&this.zoomIn.isDown?(i.zoom-=this.zoomSpeed,i.zoom<this.minZoom&&(i.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(i.zoom+=this.zoomSpeed,i.zoom>this.maxZoom&&(i.zoom=this.maxZoom))}},destroy:function destroy(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});t.exports=d},function(t,i,o){var a=o(0),u=o(6),d=new a({initialize:function SmoothedKeyControl(t){this.camera=u(t,"camera",null),this.left=u(t,"left",null),this.right=u(t,"right",null),this.up=u(t,"up",null),this.down=u(t,"down",null),this.zoomIn=u(t,"zoomIn",null),this.zoomOut=u(t,"zoomOut",null),this.zoomSpeed=u(t,"zoomSpeed",.01),this.minZoom=u(t,"minZoom",.001),this.maxZoom=u(t,"maxZoom",1e3),this.accelX=0,this.accelY=0;var i=u(t,"acceleration",null);"number"==typeof i?(this.accelX=i,this.accelY=i):(this.accelX=u(t,"acceleration.x",0),this.accelY=u(t,"acceleration.y",0)),this.dragX=0,this.dragY=0;var o=u(t,"drag",null);"number"==typeof o?(this.dragX=o,this.dragY=o):(this.dragX=u(t,"drag.x",0),this.dragY=u(t,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var a=u(t,"maxSpeed",null);"number"==typeof a?(this.maxSpeedX=a,this.maxSpeedY=a):(this.maxSpeedX=u(t,"maxSpeed.x",0),this.maxSpeedY=u(t,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=null!==this.camera},start:function start(){return this.active=null!==this.camera,this},stop:function stop(){return this.active=!1,this},setCamera:function setCamera(t){return this.camera=t,this},update:function update(t){if(this.active){void 0===t&&(t=1);var i=this.camera;this._speedX>0?(this._speedX-=this.dragX*t,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*t,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*t,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*t,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,0!==this._speedX&&(i.scrollX-=this._speedX*t|0),0!==this._speedY&&(i.scrollY-=this._speedY*t|0),0!==this._zoom&&(i.zoom+=this._zoom,i.zoom<this.minZoom?i.zoom=this.minZoom:i.zoom>this.maxZoom&&(i.zoom=this.maxZoom))}},destroy:function destroy(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});t.exports=d},function(t,i,o){t.exports={Camera:o(326),BaseCamera:o(133),CameraManager:o(799),Effects:o(333),Events:o(37)}},function(t,i){t.exports="cameradestroy"},function(t,i){t.exports="camerafadeincomplete"},function(t,i){t.exports="camerafadeinstart"},function(t,i){t.exports="camerafadeoutcomplete"},function(t,i){t.exports="camerafadeoutstart"},function(t,i){t.exports="cameraflashcomplete"},function(t,i){t.exports="cameraflashstart"},function(t,i){t.exports="followupdate"},function(t,i){t.exports="camerapancomplete"},function(t,i){t.exports="camerapanstart"},function(t,i){t.exports="postrender"},function(t,i){t.exports="prerender"},function(t,i){t.exports="camerarotatecomplete"},function(t,i){t.exports="camerarotatestart"},function(t,i){t.exports="camerashakecomplete"},function(t,i){t.exports="camerashakestart"},function(t,i){t.exports="camerazoomcomplete"},function(t,i){t.exports="camerazoomstart"},function(t,i,o){var a=o(18),u=o(0),d=o(37),b=new u({initialize:function Fade(t){this.camera=t,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function start(t,i,o,a,u,b,S,C){if(void 0===t&&(t=!0),void 0===i&&(i=1e3),void 0===o&&(o=0),void 0===a&&(a=0),void 0===u&&(u=0),void 0===b&&(b=!1),void 0===S&&(S=null),void 0===C&&(C=this.camera.scene),!b&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=i,this.direction=t,this.progress=0,this.red=o,this.green=a,this.blue=u,this.alpha=t?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=S,this._onUpdateScope=C;var M=t?d.FADE_OUT_START:d.FADE_IN_START;return this.camera.emit(M,this.camera,this,i,o,a,u),this.camera},update:function update(t,i){this.isRunning&&(this._elapsed+=i,this.progress=a(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function postRenderCanvas(t){if(!this.isRunning&&!this.isComplete)return!1;var i=this.camera;return t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(i.x,i.y,i.width,i.height),!0},postRenderWebGL:function postRenderWebGL(t,i){if(!this.isRunning&&!this.isComplete)return!1;var o=this.camera,a=this.red/255,u=this.green/255,d=this.blue/255;return t.drawFillRect(o.x,o.y,o.width,o.height,i(d,u,a,1),this.alpha),!0},effectComplete:function effectComplete(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var t=this.direction?d.FADE_OUT_COMPLETE:d.FADE_IN_COMPLETE;this.camera.emit(t,this.camera,this)},reset:function reset(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function destroy(){this.reset(),this.camera=null}});t.exports=b},function(t,i,o){var a=o(18),u=o(0),d=o(37),b=new u({initialize:function Flash(t){this.camera=t,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function start(t,i,o,a,u,b,S){return void 0===t&&(t=250),void 0===i&&(i=255),void 0===o&&(o=255),void 0===a&&(a=255),void 0===u&&(u=!1),void 0===b&&(b=null),void 0===S&&(S=this.camera.scene),!u&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,this.red=i,this.green=o,this.blue=a,this.alpha=1,this._elapsed=0,this._onUpdate=b,this._onUpdateScope=S,this.camera.emit(d.FLASH_START,this.camera,this,t,i,o,a)),this.camera},update:function update(t,i){this.isRunning&&(this._elapsed+=i,this.progress=a(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function postRenderCanvas(t){if(!this.isRunning)return!1;var i=this.camera;return t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(i.x,i.y,i.width,i.height),!0},postRenderWebGL:function postRenderWebGL(t,i){if(!this.isRunning)return!1;var o=this.camera,a=this.red/255,u=this.green/255,d=this.blue/255;return t.drawFillRect(o.x,o.y,o.width,o.height,i(d,u,a,1),this.alpha),!0},effectComplete:function effectComplete(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(d.FLASH_COMPLETE,this.camera,this)},reset:function reset(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function destroy(){this.reset(),this.camera=null}});t.exports=b},function(t,i,o){var a=o(18),u=o(0),d=o(134),b=o(37),S=o(3),C=new u({initialize:function Pan(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=new S,this.current=new S,this.destination=new S,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function start(t,i,o,a,u,S,C){void 0===o&&(o=1e3),void 0===a&&(a=d.Linear),void 0===u&&(u=!1),void 0===S&&(S=null),void 0===C&&(C=this.camera.scene);var M=this.camera;return!u&&this.isRunning||(this.isRunning=!0,this.duration=o,this.progress=0,this.source.set(M.scrollX,M.scrollY),this.destination.set(t,i),M.getScroll(t,i,this.current),"string"==typeof a&&d.hasOwnProperty(a)?this.ease=d[a]:"function"==typeof a&&(this.ease=a),this._elapsed=0,this._onUpdate=S,this._onUpdateScope=C,this.camera.emit(b.PAN_START,this.camera,this,o,t,i)),M},update:function update(t,i){if(this.isRunning){this._elapsed+=i;var o=a(this._elapsed/this.duration,0,1);this.progress=o;var u=this.camera;if(this._elapsed<this.duration){var d=this.ease(o);u.getScroll(this.destination.x,this.destination.y,this.current);var b=this.source.x+(this.current.x-this.source.x)*d,S=this.source.y+(this.current.y-this.source.y)*d;u.setScroll(b,S),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,u,o,b,S)}else u.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,u,o,u.scrollX,u.scrollY),this.effectComplete()}},effectComplete:function effectComplete(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(b.PAN_COMPLETE,this.camera,this)},reset:function reset(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function destroy(){this.reset(),this.camera=null,this.source=null,this.destination=null}});t.exports=C},function(t,i){t.exports=function In(t,i){return void 0===i&&(i=1.70158),t*t*((i+1)*t-i)}},function(t,i){t.exports=function Out(t,i){return void 0===i&&(i=1.70158),--t*t*((i+1)*t+i)+1}},function(t,i){t.exports=function InOut(t,i){void 0===i&&(i=1.70158);var o=1.525*i;return(t*=2)<1?t*t*((o+1)*t-o)*.5:.5*((t-=2)*t*((o+1)*t+o)+2)}},function(t,i){t.exports=function In(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}},function(t,i){t.exports=function Out(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},function(t,i){t.exports=function InOut(t){var i=!1;return t<.5?(t=1-2*t,i=!0):t=2*t-1,t<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,i?.5*(1-t):.5*t+.5}},function(t,i){t.exports=function In(t){return 1-Math.sqrt(1-t*t)}},function(t,i){t.exports=function Out(t){return Math.sqrt(1- --t*t)}},function(t,i){t.exports=function InOut(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},function(t,i){t.exports=function In(t){return t*t*t}},function(t,i){t.exports=function Out(t){return--t*t*t+1}},function(t,i){t.exports=function InOut(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},function(t,i){t.exports=function In(t,i,o){if(void 0===i&&(i=.1),void 0===o&&(o=.1),0===t)return 0;if(1===t)return 1;var a=o/4;return i<1?i=1:a=o*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(t-=1))*Math.sin((t-a)*(2*Math.PI)/o)}},function(t,i){t.exports=function Out(t,i,o){if(void 0===i&&(i=.1),void 0===o&&(o=.1),0===t)return 0;if(1===t)return 1;var a=o/4;return i<1?i=1:a=o*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin((t-a)*(2*Math.PI)/o)+1}},function(t,i){t.exports=function InOut(t,i,o){if(void 0===i&&(i=.1),void 0===o&&(o=.1),0===t)return 0;if(1===t)return 1;var a=o/4;return i<1?i=1:a=o*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?i*Math.pow(2,10*(t-=1))*Math.sin((t-a)*(2*Math.PI)/o)*-.5:i*Math.pow(2,-10*(t-=1))*Math.sin((t-a)*(2*Math.PI)/o)*.5+1}},function(t,i){t.exports=function In(t){return Math.pow(2,10*(t-1))-.001}},function(t,i){t.exports=function Out(t){return 1-Math.pow(2,-10*t)}},function(t,i){t.exports=function InOut(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}},function(t,i){t.exports=function Linear(t){return t}},function(t,i){t.exports=function In(t){return t*t}},function(t,i){t.exports=function Out(t){return t*(2-t)}},function(t,i){t.exports=function InOut(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},function(t,i){t.exports=function In(t){return t*t*t*t}},function(t,i){t.exports=function Out(t){return 1- --t*t*t*t}},function(t,i){t.exports=function InOut(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},function(t,i){t.exports=function In(t){return t*t*t*t*t}},function(t,i){t.exports=function Out(t){return--t*t*t*t*t+1}},function(t,i){t.exports=function InOut(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},function(t,i){t.exports=function In(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)}},function(t,i){t.exports=function Out(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)}},function(t,i){t.exports=function InOut(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))}},function(t,i){t.exports=function Stepped(t,i){return void 0===i&&(i=1),t<=0?0:t>=1?1:1/i*(1+(i*t|0))}},function(t,i,o){var a=o(18),u=o(0),d=o(37),b=o(3),S=new u({initialize:function Shake(t){this.camera=t,this.isRunning=!1,this.duration=0,this.intensity=new b,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function start(t,i,o,a,u){return void 0===t&&(t=100),void 0===i&&(i=.05),void 0===o&&(o=!1),void 0===a&&(a=null),void 0===u&&(u=this.camera.scene),!o&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,"number"==typeof i?this.intensity.set(i):this.intensity.set(i.x,i.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=a,this._onUpdateScope=u,this.camera.emit(d.SHAKE_START,this.camera,this,t,i)),this.camera},preRender:function preRender(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function update(t,i){if(this.isRunning)if(this._elapsed+=i,this.progress=a(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var o=this.intensity,u=this.camera.width,d=this.camera.height,b=this.camera.zoom;this._offsetX=(Math.random()*o.x*u*2-o.x*u)*b,this._offsetY=(Math.random()*o.y*d*2-o.y*d)*b,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function effectComplete(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(d.SHAKE_COMPLETE,this.camera,this)},reset:function reset(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function destroy(){this.reset(),this.camera=null,this.intensity=null}});t.exports=S},function(t,i,o){var a=o(18),u=o(0),d=o(37),b=o(134),S=new u({initialize:function RotateTo(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function start(t,i,o,a,u,S,C){void 0===o&&(o=1e3),void 0===a&&(a=b.Linear),void 0===u&&(u=!1),void 0===S&&(S=null),void 0===C&&(C=this.camera.scene),void 0===i&&(i=!1),this.shortestPath=i;var M=t;t<0?(M=-1*t,this.clockwise=!1):this.clockwise=!0;var P=360*Math.PI/180;M-=Math.floor(M/P)*P;var R=this.camera;if(!u&&this.isRunning)return R;if(this.isRunning=!0,this.duration=o,this.progress=0,this.source=R.rotation,this.destination=M,"string"==typeof a&&b.hasOwnProperty(a)?this.ease=b[a]:"function"==typeof a&&(this.ease=a),this._elapsed=0,this._onUpdate=S,this._onUpdateScope=C,this.shortestPath){var O=0,B=0;(O=this.destination>this.source?Math.abs(this.destination-this.source):Math.abs(this.destination+P)-this.source)<(B=this.source>this.destination?Math.abs(this.source-this.destination):Math.abs(this.source+P)-this.destination)?this.clockwise=!0:O>B&&(this.clockwise=!1)}return this.camera.emit(d.ROTATE_START,this.camera,this,o,M),R},update:function update(t,i){if(this.isRunning){this._elapsed+=i;var o=a(this._elapsed/this.duration,0,1);this.progress=o;var u=this.camera;if(this._elapsed<this.duration){var d=this.ease(o);this.current=u.rotation;var b=0,S=360*Math.PI/180,C=this.destination,M=this.current;!1===this.clockwise&&(C=this.current,M=this.destination),b=C>=M?Math.abs(C-M):Math.abs(C+S)-M;var P=0;P=this.clockwise?u.rotation+b*d:u.rotation-b*d,u.rotation=P,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,u,o,P)}else u.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,u,o,this.destination),this.effectComplete()}},effectComplete:function effectComplete(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(d.ROTATE_COMPLETE,this.camera,this)},reset:function reset(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function destroy(){this.reset(),this.camera=null,this.source=null,this.destination=null}});t.exports=S},function(t,i,o){var a=o(18),u=o(0),d=o(134),b=o(37),S=new u({initialize:function Zoom(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function start(t,i,o,a,u,S){void 0===i&&(i=1e3),void 0===o&&(o=d.Linear),void 0===a&&(a=!1),void 0===u&&(u=null),void 0===S&&(S=this.camera.scene);var C=this.camera;return!a&&this.isRunning||(this.isRunning=!0,this.duration=i,this.progress=0,this.source=C.zoom,this.destination=t,"string"==typeof o&&d.hasOwnProperty(o)?this.ease=d[o]:"function"==typeof o&&(this.ease=o),this._elapsed=0,this._onUpdate=u,this._onUpdateScope=S,this.camera.emit(b.ZOOM_START,this.camera,this,i,t)),C},update:function update(t,i){this.isRunning&&(this._elapsed+=i,this.progress=a(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function effectComplete(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(b.ZOOM_COMPLETE,this.camera,this)},reset:function reset(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function destroy(){this.reset(),this.camera=null}});t.exports=S},function(t,i,o){var a=o(326),u=o(0),d=o(2),b=o(24),S=o(57),C=o(104),M=o(20),P=new u({initialize:function CameraManager(t){this.scene=t,this.systems=t.sys,this.roundPixels=t.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,t.sys.events.once(M.BOOT,this.boot,this),t.sys.events.on(M.START,this.start,this)},boot:function boot(){var t=this.systems;t.settings.cameras?this.fromJSON(t.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new a(0,0,t.scale.width,t.scale.height).setScene(this.scene),t.game.scale.on(C.RESIZE,this.onResize,this),this.systems.events.once(M.DESTROY,this.destroy,this)},start:function start(){if(!this.main){var t=this.systems;t.settings.cameras?this.fromJSON(t.settings.cameras):this.add(),this.main=this.cameras[0]}var i=this.systems.events;i.on(M.UPDATE,this.update,this),i.once(M.SHUTDOWN,this.shutdown,this)},add:function add(t,i,o,u,d,b){void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=this.scene.sys.scale.width),void 0===u&&(u=this.scene.sys.scale.height),void 0===d&&(d=!1),void 0===b&&(b="");var S=new a(t,i,o,u);return S.setName(b),S.setScene(this.scene),S.setRoundPixels(this.roundPixels),S.id=this.getNextID(),this.cameras.push(S),d&&(this.main=S),S},addExisting:function addExisting(t,i){return void 0===i&&(i=!1),-1===this.cameras.indexOf(t)?(t.id=this.getNextID(),t.setRoundPixels(this.roundPixels),this.cameras.push(t),i&&(this.main=t),t):null},getNextID:function getNextID(){for(var t=this.cameras,i=1,o=0;o<32;o++){for(var a=!1,u=0;u<t.length;u++){var d=t[u];d&&d.id===i&&(a=!0)}if(!a)return i;i<<=1}return 0},getTotal:function getTotal(t){void 0===t&&(t=!1);for(var i=0,o=this.cameras,a=0;a<o.length;a++){var u=o[a];(!t||t&&u.visible)&&i++}return i},fromJSON:function fromJSON(t){Array.isArray(t)||(t=[t]);for(var i=this.scene.sys.scale.width,o=this.scene.sys.scale.height,a=0;a<t.length;a++){var u=t[a],b=d(u,"x",0),S=d(u,"y",0),C=d(u,"width",i),M=d(u,"height",o),P=this.add(b,S,C,M);P.name=d(u,"name",""),P.zoom=d(u,"zoom",1),P.rotation=d(u,"rotation",0),P.scrollX=d(u,"scrollX",0),P.scrollY=d(u,"scrollY",0),P.roundPixels=d(u,"roundPixels",!1),P.visible=d(u,"visible",!0);var R=d(u,"backgroundColor",!1);R&&P.setBackgroundColor(R);var O=d(u,"bounds",null);if(O){var B=d(O,"x",0),N=d(O,"y",0),Y=d(O,"width",i),G=d(O,"height",o);P.setBounds(B,N,Y,G)}}return this},getCamera:function getCamera(t){for(var i=this.cameras,o=0;o<i.length;o++)if(i[o].name===t)return i[o];return null},getCamerasBelowPointer:function getCamerasBelowPointer(t){for(var i=this.cameras,o=t.x,a=t.y,u=[],d=0;d<i.length;d++){var b=i[d];b.visible&&b.inputEnabled&&S(b,o,a)&&u.unshift(b)}return u},remove:function remove(t,i){void 0===i&&(i=!0),Array.isArray(t)||(t=[t]);for(var o=0,a=this.cameras,u=0;u<t.length;u++){var d=a.indexOf(t[u]);-1!==d&&(i?a[d].destroy():a[d].renderList=[],a.splice(d,1),o++)}return!this.main&&a[0]&&(this.main=a[0]),o},render:function render(t,i){for(var o=this.scene,a=this.cameras,u=0;u<this.cameras.length;u++){var d=a[u];if(d.visible&&d.alpha>0){d.preRender();var b=this.getVisibleChildren(i.getChildren(),d);t.render(o,b,d)}}},getVisibleChildren:function getVisibleChildren(t,i){for(var o=[],a=0;a<t.length;a++){var u=t[a];u.willRender(i)&&o.push(u)}return o},resetAll:function resetAll(){for(var t=0;t<this.cameras.length;t++)this.cameras[t].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function update(t,i){for(var o=0;o<this.cameras.length;o++)this.cameras[o].update(t,i)},onResize:function onResize(t,i,o,a,u){for(var d=0;d<this.cameras.length;d++){var b=this.cameras[d];0===b._x&&0===b._y&&b._width===a&&b._height===u&&b.setSize(i.width,i.height)}},resize:function resize(t,i){for(var o=0;o<this.cameras.length;o++)this.cameras[o].setSize(t,i)},shutdown:function shutdown(){this.main=void 0;for(var t=0;t<this.cameras.length;t++)this.cameras[t].destroy();this.cameras=[];var i=this.systems.events;i.off(M.UPDATE,this.update,this),i.off(M.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(M.START,this.start,this),this.scene=null,this.systems=null}});b.register("CameraManager",P,"cameras"),t.exports=P},function(t,i){t.exports="enterfullscreen"},function(t,i){t.exports="fullscreenfailed"},function(t,i){t.exports="fullscreenunsupported"},function(t,i){t.exports="leavefullscreen"},function(t,i){t.exports="orientationchange"},function(t,i){t.exports="resize"},function(t,i,o){t.exports={Config:o(346),CreateRenderer:o(366),DebugHeader:o(384),Events:o(22),TimeStep:o(385),VisibilityHandler:o(387)}},function(t,i){var o,a,u=t.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(t){if(o===setTimeout)return setTimeout(t,0);if((o===defaultSetTimout||!o)&&setTimeout)return o=setTimeout,setTimeout(t,0);try{return o(t,0)}catch(i){try{return o.call(null,t,0)}catch(i){return o.call(this,t,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(t){o=defaultSetTimout}try{a="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(t){a=defaultClearTimeout}}();var d,b=[],S=!1,C=-1;function cleanUpNextTick(){S&&d&&(S=!1,d.length?b=d.concat(b):C=-1,b.length&&drainQueue())}function drainQueue(){if(!S){var t=runTimeout(cleanUpNextTick);S=!0;for(var i=b.length;i;){for(d=b,b=[];++C<i;)d&&d[C].run();C=-1,i=b.length}d=null,S=!1,function runClearTimeout(t){if(a===clearTimeout)return clearTimeout(t);if((a===defaultClearTimeout||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(t);try{return a(t)}catch(i){try{return a.call(null,t)}catch(i){return a.call(this,t)}}}(t)}}function Item(t,i){this.fun=t,this.array=i}function noop(){}u.nextTick=function(t){var i=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)i[o-1]=arguments[o];b.push(new Item(t,i)),1!==b.length||S||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=noop,u.addListener=noop,u.once=noop,u.off=noop,u.removeListener=noop,u.removeAllListeners=noop,u.emit=noop,u.prependListener=noop,u.prependOnceListener=noop,u.listeners=function(t){return[]},u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(t,i,o){var a=o(136),u={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};t.exports=function init(){return"function"==typeof importScripts||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(u.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(u.mspointer=!0),navigator.getGamepads&&(u.gamepads=!0),"onwheel"in window||a.ie&&"WheelEvent"in window?u.wheelEvent="wheel":"onmousewheel"in window?u.wheelEvent="mousewheel":a.firefox&&"MouseScrollEvent"in window&&(u.wheelEvent="DOMMouseScroll")),u}()},function(t,i,o){var a=o(136),u={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};t.exports=function init(){if("function"==typeof importScripts)return u;u.audioData=!!window.Audio,u.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var t=document.createElement("audio"),i=!!t.canPlayType;try{if(i&&(t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(u.ogg=!0),(t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||t.canPlayType("audio/opus;").replace(/^no$/,""))&&(u.opus=!0),t.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(u.mp3=!0),t.canPlayType("audio/wav").replace(/^no$/,"")&&(u.wav=!0),(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;").replace(/^no$/,""))&&(u.m4a=!0),t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(u.webm=!0),""!==t.canPlayType('audio/mp4;codecs="ec-3"')))if(a.edge)u.dolby=!0;else if(a.safari&&a.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var o=parseInt(RegExp.$1,10),d=parseInt(RegExp.$2,10);(10===o&&d>=11||o>10)&&(u.dolby=!0)}}catch(b){}return u}()},function(t,i){var o={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};t.exports=function init(){if("function"==typeof importScripts)return o;var t=document.createElement("video"),i=!!t.canPlayType;try{i&&(t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(o.ogg=!0),t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(o.h264=!0,o.mp4=!0),t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(o.webm=!0),t.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(o.vp9=!0),t.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(o.hls=!0))}catch(a){}return o}()},function(t,i){var o={available:!1,cancel:"",keyboard:!1,request:""};t.exports=function init(){if("function"==typeof importScripts)return o;var t,i="Fullscreen",a="FullScreen",u=["request"+i,"request"+a,"webkitRequest"+i,"webkitRequest"+a,"msRequest"+i,"msRequest"+a,"mozRequest"+a,"mozRequest"+i];for(t=0;t<u.length;t++)if(document.documentElement[u[t]]){o.available=!0,o.request=u[t];break}var d=["cancel"+a,"exit"+i,"webkitCancel"+a,"webkitExit"+i,"msCancel"+a,"msExit"+i,"mozCancel"+a,"mozExit"+i];if(o.available)for(t=0;t<d.length;t++)if(document[d[t]]){o.cancel=d[t];break}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(o.keyboard=!0),Object.defineProperty(o,"active",{get:function get(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),o}()},function(t,i,o){t.exports={Between:o(349),BetweenPoints:o(350),BetweenPointsY:o(813),BetweenY:o(814),CounterClockwise:o(815),Normalize:o(351),Random:o(816),RandomDegrees:o(817),Reverse:o(818),RotateTo:o(819),ShortestBetween:o(820),Wrap:o(269),WrapDegrees:o(270)}},function(t,i){t.exports=function BetweenPointsY(t,i){return Math.atan2(i.x-t.x,i.y-t.y)}},function(t,i){t.exports=function BetweenY(t,i,o,a){return Math.atan2(o-t,a-i)}},function(t,i,o){var a=o(14);t.exports=function CounterClockwise(t){return t>Math.PI&&(t-=a.PI2),Math.abs(((t+a.TAU)%a.PI2-a.PI2)%a.PI2)}},function(t,i,o){var a=o(137);t.exports=function Random(){return a(-Math.PI,Math.PI)}},function(t,i,o){var a=o(137);t.exports=function RandomDegrees(){return a(-180,180)}},function(t,i,o){var a=o(351);t.exports=function Reverse(t){return a(t+Math.PI)}},function(t,i,o){var a=o(14);t.exports=function RotateTo(t,i,o){return void 0===o&&(o=.05),t===i||(Math.abs(i-t)<=o||Math.abs(i-t)>=a.PI2-o?t=i:(Math.abs(i-t)>Math.PI&&(i<t?i+=a.PI2:i-=a.PI2),i>t?t+=o:i<t&&(t-=o))),t}},function(t,i){t.exports=function ShortestBetween(t,i){var o=i-t;return 0===o?0:o-360*Math.floor((o- -180)/360)}},function(t,i,o){t.exports={Between:o(50),BetweenPoints:o(352),BetweenPointsSquared:o(822),Chebyshev:o(823),Power:o(824),Snake:o(825),Squared:o(353)}},function(t,i){t.exports=function DistanceBetweenPointsSquared(t,i){var o=t.x-i.x,a=t.y-i.y;return o*o+a*a}},function(t,i){t.exports=function ChebyshevDistance(t,i,o,a){return Math.max(Math.abs(t-o),Math.abs(i-a))}},function(t,i){t.exports=function DistancePower(t,i,o,a,u){return void 0===u&&(u=2),Math.sqrt(Math.pow(o-t,u)+Math.pow(a-i,u))}},function(t,i){t.exports=function SnakeDistance(t,i,o,a){return Math.abs(t-o)+Math.abs(i-a)}},function(t,i,o){t.exports={Back:o(334),Bounce:o(335),Circular:o(336),Cubic:o(337),Elastic:o(338),Expo:o(339),Linear:o(340),Quadratic:o(341),Quartic:o(342),Quintic:o(343),Sine:o(344),Stepped:o(345)}},function(t,i,o){t.exports={Ceil:o(828),Equal:o(124),Floor:o(829),GreaterThan:o(354),LessThan:o(355)}},function(t,i){t.exports=function Ceil(t,i){return void 0===i&&(i=1e-4),Math.ceil(t-i)}},function(t,i){t.exports=function Floor(t,i){return void 0===i&&(i=1e-4),Math.floor(t+i)}},function(t,i,o){t.exports={Bezier:o(831),CatmullRom:o(832),CubicBezier:o(358),Linear:o(833),QuadraticBezier:o(359),SmoothStep:o(360),SmootherStep:o(834)}},function(t,i,o){var a=o(356);t.exports=function BezierInterpolation(t,i){for(var o=0,u=t.length-1,d=0;d<=u;d++)o+=Math.pow(1-i,u-d)*Math.pow(i,d)*t[d]*a(u,d);return o}},function(t,i,o){var a=o(194);t.exports=function CatmullRomInterpolation(t,i){var o=t.length-1,u=o*i,d=Math.floor(u);return t[0]===t[o]?(i<0&&(d=Math.floor(u=o*(1+i))),a(u-d,t[(d-1+o)%o],t[d],t[(d+1)%o],t[(d+2)%o])):i<0?t[0]-(a(-u,t[0],t[0],t[1],t[1])-t[0]):i>1?t[o]-(a(u-o,t[o],t[o],t[o-1],t[o-1])-t[o]):a(u-d,t[d?d-1:0],t[d],t[o<d+1?o:d+1],t[o<d+2?o:d+2])}},function(t,i,o){var a=o(135);t.exports=function LinearInterpolation(t,i){var o=t.length-1,u=o*i,d=Math.floor(u);return i<0?a(t[0],t[1],u):i>1?a(t[o],t[o-1],o-u):a(t[d],t[d+1>o?o:d+1],u-d)}},function(t,i,o){var a=o(183);t.exports=function SmootherStepInterpolation(t,i,o){return i+(o-i)*a(t,0,1)}},function(t,i,o){t.exports={GetNext:o(361),IsSize:o(138),IsValue:o(836)}},function(t,i){t.exports=function IsValuePowerOfTwo(t){return t>0&&0==(t&t-1)}},function(t,i,o){t.exports={Ceil:o(139),Floor:o(76),To:o(838)}},function(t,i){t.exports=function SnapTo(t,i,o,a){return void 0===o&&(o=0),0===i?t:(t-=o,t=i*Math.round(t/i),a?(o+t)/i:o+t)}},function(t,i,o){var a=new(o(0))({initialize:function RandomDataGenerator(t){void 0===t&&(t=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],t&&this.init(t)},rnd:function rnd(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},hash:function hash(t){var i,o=this.n;t=t.toString();for(var a=0;a<t.length;a++)i=.02519603282416938*(o+=t.charCodeAt(a)),i-=o=i>>>0,o=(i*=o)>>>0,o+=4294967296*(i-=o);return this.n=o,2.3283064365386963e-10*(o>>>0)},init:function init(t){"string"==typeof t?this.state(t):this.sow(t)},sow:function sow(t){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,t)for(var i=0;i<t.length&&null!=t[i];i++){var o=t[i];this.s0-=this.hash(o),this.s0+=~~(this.s0<0),this.s1-=this.hash(o),this.s1+=~~(this.s1<0),this.s2-=this.hash(o),this.s2+=~~(this.s2<0)}},integer:function integer(){return 4294967296*this.rnd()},frac:function frac(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function real(){return this.integer()+this.frac()},integerInRange:function integerInRange(t,i){return Math.floor(this.realInRange(0,i-t+1)+t)},between:function between(t,i){return Math.floor(this.realInRange(0,i-t+1)+t)},realInRange:function realInRange(t,i){return this.frac()*(i-t)+t},normal:function normal(){return 1-2*this.frac()},uuid:function uuid(){var t="",i="";for(i=t="";t++<36;i+=~t%5|3*t&4?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return i},pick:function pick(t){return t[this.integerInRange(0,t.length-1)]},sign:function sign(){return this.pick(this.signs)},weightedPick:function weightedPick(t){return t[~~(Math.pow(this.frac(),2)*(t.length-1)+.5)]},timestamp:function timestamp(t,i){return this.realInRange(t||9466848e5,i||1577862e6)},angle:function angle(){return this.integerInRange(-180,180)},rotation:function rotation(){return this.realInRange(-3.1415926,3.1415926)},state:function state(t){return"string"==typeof t&&t.match(/^!rnd/)&&(t=t.split(","),this.c=parseFloat(t[1]),this.s0=parseFloat(t[2]),this.s1=parseFloat(t[3]),this.s2=parseFloat(t[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function shuffle(t){for(var i=t.length-1;i>0;i--){var o=Math.floor(this.frac()*(i+1)),a=t[o];t[o]=t[i],t[i]=a}return t}});t.exports=a},function(t,i){t.exports=function Average(t){for(var i=0,o=0;o<t.length;o++)i+=+t[o];return i/t.length}},function(t,i){t.exports=function CeilTo(t,i,o){void 0===i&&(i=0),void 0===o&&(o=10);var a=Math.pow(o,-i);return Math.ceil(t*a)/a}},function(t,i){t.exports=function Difference(t,i){return Math.abs(t-i)}},function(t,i,o){var a=o(18),u=o(0),d=o(69),b=o(1),S=new d,C=new u({initialize:function Euler(t,i,o,a){void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=Euler.DefaultOrder),this._x=t,this._y=i,this._z=o,this._order=a,this.onChangeCallback=b},x:{get:function get(){return this._x},set:function set(t){this._x=t,this.onChangeCallback(this)}},y:{get:function get(){return this._y},set:function set(t){this._y=t,this.onChangeCallback(this)}},z:{get:function get(){return this._z},set:function set(t){this._z=t,this.onChangeCallback(this)}},order:{get:function get(){return this._order},set:function set(t){this._order=t,this.onChangeCallback(this)}},set:function set(t,i,o,a){return void 0===a&&(a=this._order),this._x=t,this._y=i,this._z=o,this._order=a,this.onChangeCallback(this),this},copy:function copy(t){return this.set(t.x,t.y,t.z,t.order)},setFromQuaternion:function setFromQuaternion(t,i,o){return void 0===i&&(i=this._order),void 0===o&&(o=!1),S.fromQuat(t),this.setFromRotationMatrix(S,i,o)},setFromRotationMatrix:function setFromRotationMatrix(t,i,o){void 0===i&&(i=this._order),void 0===o&&(o=!1);var u=t.val,d=u[0],b=u[4],S=u[8],C=u[1],M=u[5],P=u[9],R=u[2],O=u[6],B=u[10],N=0,Y=0,G=0,X=.99999;switch(i){case"XYZ":Y=Math.asin(a(S,-1,1)),Math.abs(S)<X?(N=Math.atan2(-P,B),G=Math.atan2(-b,d)):N=Math.atan2(O,M);break;case"YXZ":N=Math.asin(-a(P,-1,1)),Math.abs(P)<X?(Y=Math.atan2(S,B),G=Math.atan2(C,M)):Y=Math.atan2(-R,d);break;case"ZXY":N=Math.asin(a(O,-1,1)),Math.abs(O)<X?(Y=Math.atan2(-R,B),G=Math.atan2(-b,M)):G=Math.atan2(C,d);break;case"ZYX":Y=Math.asin(-a(R,-1,1)),Math.abs(R)<X?(N=Math.atan2(O,B),G=Math.atan2(C,d)):G=Math.atan2(-b,M);break;case"YZX":G=Math.asin(a(C,-1,1)),Math.abs(C)<X?(N=Math.atan2(-P,M),Y=Math.atan2(-R,d)):Y=Math.atan2(S,B);break;case"XZY":G=Math.asin(-a(b,-1,1)),Math.abs(b)<X?(N=Math.atan2(O,M),Y=Math.atan2(S,d)):N=Math.atan2(-P,B)}return this._x=N,this._y=Y,this._z=G,this._order=i,o&&this.onChangeCallback(this),this}});C.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],C.DefaultOrder="XYZ",t.exports=C},function(t,i){t.exports=function FloorTo(t,i,o){void 0===i&&(i=0),void 0===o&&(o=10);var a=Math.pow(o,-i);return Math.floor(t*a)/a}},function(t,i){t.exports=function GetSpeed(t,i){return t/i/1e3}},function(t,i){t.exports=function IsEven(t){return t==parseFloat(t)?!(t%2):void 0}},function(t,i){t.exports=function IsEvenStrict(t){return t===parseFloat(t)?!(t%2):void 0}},function(t,i){t.exports=function MaxAdd(t,i,o){return Math.min(t+i,o)}},function(t,i){t.exports=function Median(t){var i=t.length;if(0===i)return 0;t.sort((function(t,i){return t-i}));var o=Math.floor(i/2);return i%2==0?(t[o]+t[o-1])/2:t[o]}},function(t,i){t.exports=function MinSub(t,i,o){return Math.max(t-i,o)}},function(t,i){t.exports=function Percent(t,i,o,a){void 0===o&&(o=i+1);var u=(t-i)/(o-i);return u>1?void 0!==a?(u=(a-t)/(a-o))<0&&(u=0):u=1:u<0&&(u=0),u}},function(t,i){t.exports=function RandomXY(t,i){void 0===i&&(i=1);var o=2*Math.random()*Math.PI;return t.x=Math.cos(o)*i,t.y=Math.sin(o)*i,t}},function(t,i){t.exports=function RandomXYZ(t,i){void 0===i&&(i=1);var o=2*Math.random()*Math.PI,a=2*Math.random()-1,u=Math.sqrt(1-a*a)*i;return t.x=Math.cos(o)*u,t.y=Math.sin(o)*u,t.z=a*i,t}},function(t,i){t.exports=function RandomXYZW(t,i){return void 0===i&&(i=1),t.x=(2*Math.random()-1)*i,t.y=(2*Math.random()-1)*i,t.z=(2*Math.random()-1)*i,t.w=(2*Math.random()-1)*i,t}},function(t,i){t.exports=function RotateTo(t,i,o,a,u){return t.x=i+u*Math.cos(a),t.y=o+u*Math.sin(a),t}},function(t,i){t.exports=function RoundTo(t,i,o){void 0===i&&(i=0),void 0===o&&(o=10);var a=Math.pow(o,-i);return Math.round(t*a)/a}},function(t,i){t.exports=function SinCosTableGenerator(t,i,o,a){void 0===i&&(i=1),void 0===o&&(o=1),void 0===a&&(a=1),a*=Math.PI/t;for(var u=[],d=[],b=0;b<t;b++)i+=(o-=i*a)*a,u[b]=o,d[b]=i;return{sin:d,cos:u,length:t}}},function(t,i,o){var a=o(3);t.exports=function ToXY(t,i,o,u){void 0===u&&(u=new a);var d=0,b=0;return t>0&&t<=i*o&&(d=t>i-1?t-(b=Math.floor(t/i))*i:t),u.set(d,b)}},function(t,i){t.exports=function Within(t,i,o){return Math.abs(t-i)<=o}},function(t,i,o){var a=o(39),u=o(69),d=o(365),b=new u,S=new d,C=new a;t.exports=function RotateVec3(t,i,o){return S.setAxisAngle(i,o),b.fromRotationTranslation(S,C.set(0,0,0)),t.transformMat4(b)}},function(t,i){t.exports="addtexture"},function(t,i){t.exports="onerror"},function(t,i){t.exports="onload"},function(t,i){t.exports="ready"},function(t,i){t.exports="removetexture"},function(t,i){t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join("\n")},function(t,i){t.exports="pipelineafterflush"},function(t,i){t.exports="pipelinebeforeflush"},function(t,i){t.exports="pipelinebind"},function(t,i){t.exports="pipelineboot"},function(t,i){t.exports="pipelinedestroy"},function(t,i){t.exports="pipelinerebind"},function(t,i){t.exports="pipelineresize"},function(t,i){t.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join("\n")},function(t,i,o){t.exports={GenerateTexture:o(388),Palettes:o(889)}},function(t,i,o){t.exports={ARNE16:o(389),C64:o(890),CGA:o(891),JMP:o(892),MSX:o(893)}},function(t,i){t.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(t,i){t.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(t,i){t.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(t,i){t.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(t,i,o){t.exports={Path:o(895),MoveTo:o(393),CubicBezier:o(390),Curve:o(94),Ellipse:o(391),Line:o(392),QuadraticBezier:o(394),Spline:o(395)}},function(t,i,o){var a=o(0),u=o(390),d=o(391),b=o(5),S=o(392),C=o(393),M=o(394),P=o(10),R=o(395),O=o(3),B=o(14),N=new a({initialize:function Path(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new O,this._tmpVec2A=new O,this._tmpVec2B=new O,"object"===_typeof(t)?this.fromJSON(t):this.startPoint.set(t,i)},add:function add(t){return this.curves.push(t),this},circleTo:function circleTo(t,i,o){return void 0===i&&(i=!1),this.ellipseTo(t,t,0,360,i,o)},closePath:function closePath(){var t=this.curves[0].getPoint(0),i=this.curves[this.curves.length-1].getPoint(1);return t.equals(i)||this.curves.push(new S(i,t)),this},cubicBezierTo:function cubicBezierTo(t,i,o,a,d,b){var S,C,M,P=this.getEndPoint();return t instanceof O?(S=t,C=i,M=o):(S=new O(o,a),C=new O(d,b),M=new O(t,i)),this.add(new u(P,S,C,M))},quadraticBezierTo:function quadraticBezierTo(t,i,o,a){var u,d,b=this.getEndPoint();return t instanceof O?(u=t,d=i):(u=new O(o,a),d=new O(t,i)),this.add(new M(b,u,d))},draw:function draw(t,i){for(var o=0;o<this.curves.length;o++){var a=this.curves[o];a.active&&a.draw(t,i)}return t},ellipseTo:function ellipseTo(t,i,o,a,u,b){var S=new d(0,0,t,i,o,a,u,b),C=this.getEndPoint(this._tmpVec2A),M=S.getStartPoint(this._tmpVec2B);return C.subtract(M),S.x=C.x,S.y=C.y,this.add(S)},fromJSON:function fromJSON(t){this.curves=[],this.cacheLengths=[],this.startPoint.set(t.x,t.y),this.autoClose=t.autoClose;for(var i=0;i<t.curves.length;i++){var o=t.curves[i];switch(o.type){case"LineCurve":this.add(S.fromJSON(o));break;case"EllipseCurve":this.add(d.fromJSON(o));break;case"SplineCurve":this.add(R.fromJSON(o));break;case"CubicBezierCurve":this.add(u.fromJSON(o));break;case"QuadraticBezierCurve":this.add(M.fromJSON(o))}}return this},getBounds:function getBounds(t,i){void 0===t&&(t=new P),void 0===i&&(i=16),t.x=Number.MAX_VALUE,t.y=Number.MAX_VALUE;for(var o=new P,a=B.MIN_SAFE_INTEGER,u=B.MIN_SAFE_INTEGER,d=0;d<this.curves.length;d++){var b=this.curves[d];b.active&&(b.getBounds(o,i),t.x=Math.min(t.x,o.x),t.y=Math.min(t.y,o.y),a=Math.max(a,o.right),u=Math.max(u,o.bottom))}return t.right=a,t.bottom=u,t},getCurveLengths:function getCurveLengths(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],i=0,o=0;o<this.curves.length;o++)i+=this.curves[o].getLength(),t.push(i);return this.cacheLengths=t,t},getEndPoint:function getEndPoint(t){return void 0===t&&(t=new O),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,t):t.copy(this.startPoint),t},getLength:function getLength(){var t=this.getCurveLengths();return t[t.length-1]},getPoint:function getPoint(t,i){void 0===i&&(i=new O);for(var o=t*this.getLength(),a=this.getCurveLengths(),u=0;u<a.length;){if(a[u]>=o){var d=a[u]-o,b=this.curves[u],S=b.getLength(),C=0===S?0:1-d/S;return b.getPointAt(C,i)}u++}return null},getPoints:function getPoints(t){void 0===t&&(t=12);for(var i,o=[],a=0;a<this.curves.length;a++){var u=this.curves[a];if(u.active)for(var d=u.getResolution(t),b=u.getPoints(d),S=0;S<b.length;S++){var C=b[S];i&&i.equals(C)||(o.push(C),i=C)}}return this.autoClose&&o.length>1&&!o[o.length-1].equals(o[0])&&o.push(o[0]),o},getRandomPoint:function getRandomPoint(t){return void 0===t&&(t=new O),this.getPoint(Math.random(),t)},getSpacedPoints:function getSpacedPoints(t){void 0===t&&(t=40);for(var i=[],o=0;o<=t;o++)i.push(this.getPoint(o/t));return this.autoClose&&i.push(i[0]),i},getStartPoint:function getStartPoint(t){return void 0===t&&(t=new O),t.copy(this.startPoint)},getTangent:function getTangent(t,i){void 0===i&&(i=new O);for(var o=t*this.getLength(),a=this.getCurveLengths(),u=0;u<a.length;){if(a[u]>=o){var d=a[u]-o,b=this.curves[u],S=b.getLength(),C=0===S?0:1-d/S;return b.getTangentAt(C,i)}u++}return null},lineTo:function lineTo(t,i){t instanceof O?this._tmpVec2B.copy(t):this._tmpVec2B.set(t,i);var o=this.getEndPoint(this._tmpVec2A);return this.add(new S([o.x,o.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function splineTo(t){return t.unshift(this.getEndPoint()),this.add(new R(t))},moveTo:function moveTo(t,i){return t instanceof O?this.add(new C(t.x,t.y)):this.add(new C(t,i))},toJSON:function toJSON(){for(var t=[],i=0;i<this.curves.length;i++)t.push(this.curves[i].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:t}},updateArcLengths:function updateArcLengths(){this.cacheLengths=[],this.getCurveLengths()},destroy:function destroy(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});b.register("path",(function(t,i){return new N(t,i)})),t.exports=N},function(t,i,o){t.exports={DataManager:o(101),DataManagerPlugin:o(897),Events:o(315)}},function(t,i,o){var a=o(0),u=o(101),d=o(24),b=o(20),S=new a({Extends:u,initialize:function DataManagerPlugin(t){u.call(this,t,t.sys.events),this.scene=t,this.systems=t.sys,t.sys.events.once(b.BOOT,this.boot,this),t.sys.events.on(b.START,this.start,this)},boot:function boot(){this.events=this.systems.events,this.events.once(b.DESTROY,this.destroy,this)},start:function start(){this.events.once(b.SHUTDOWN,this.shutdown,this)},shutdown:function shutdown(){this.systems.events.off(b.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){u.prototype.destroy.call(this),this.events.off(b.START,this.start,this),this.scene=null,this.systems=null}});d.register("DataManagerPlugin",S,"data"),t.exports=S},function(t,i,o){t.exports={Align:o(899),BaseShader:o(396),Bounds:o(902),Canvas:o(906),Color:o(397),ColorMatrix:o(198),Masks:o(916),RGB:o(200)}},function(t,i,o){var a=o(123),u=o(17),d={In:o(900),To:o(901)};d=u(!1,d,a),t.exports=d},function(t,i,o){t.exports={BottomCenter:o(290),BottomLeft:o(291),BottomRight:o(292),Center:o(293),LeftCenter:o(295),QuickSet:o(289),RightCenter:o(296),TopCenter:o(297),TopLeft:o(298),TopRight:o(299)}},function(t,i,o){t.exports={BottomCenter:o(277),BottomLeft:o(278),BottomRight:o(279),LeftBottom:o(280),LeftCenter:o(281),LeftTop:o(282),QuickSet:o(276),RightBottom:o(283),RightCenter:o(284),RightTop:o(285),TopCenter:o(286),TopLeft:o(287),TopRight:o(288)}},function(t,i,o){t.exports={CenterOn:o(294),GetBottom:o(42),GetBounds:o(903),GetCenterX:o(87),GetCenterY:o(89),GetLeft:o(43),GetOffsetX:o(904),GetOffsetY:o(905),GetRight:o(44),GetTop:o(45),SetBottom:o(55),SetCenterX:o(88),SetCenterY:o(90),SetLeft:o(53),SetRight:o(54),SetTop:o(52)}},function(t,i,o){var a=o(42),u=o(43),d=o(44),b=o(45);t.exports=function GetBounds(t,i){void 0===i&&(i={});var o=u(t),S=b(t);return i.x=o,i.y=S,i.width=d(t)-o,i.height=a(t)-S,i}},function(t,i){t.exports=function GetOffsetX(t){return t.width*t.originX}},function(t,i){t.exports=function GetOffsetY(t){return t.height*t.originY}},function(t,i,o){t.exports={CanvasInterpolation:o(367),CanvasPool:o(31),Smoothing:o(192),TouchAction:o(907),UserSelect:o(908)}},function(t,i){t.exports=function TouchAction(t,i){return void 0===i&&(i="none"),t.style.msTouchAction=i,t.style["ms-touch-action"]=i,t.style["touch-action"]=i,t}},function(t,i){t.exports=function UserSelect(t,i){return void 0===i&&(i="none"),["-webkit-","-khtml-","-moz-","-ms-",""].forEach((function(o){t.style[o+"user-select"]=i})),t.style["-webkit-touch-callout"]=i,t.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",t}},function(t,i,o){var a=o(103);t.exports=function ColorSpectrum(t){void 0===t&&(t=1024);var i,o=[],u=255,d=255,b=0,S=0;for(i=0;i<=u;i++)o.push({r:d,g:i,b:S,color:a(d,i,S)});for(b=255,i=u;i>=0;i--)o.push({r:i,g:b,b:S,color:a(i,b,S)});for(d=0,i=0;i<=u;i++,b--)o.push({r:d,g:b,b:i,color:a(d,b,i)});for(b=0,S=255,i=0;i<=u;i++,S--,d++)o.push({r:d,g:b,b:S,color:a(d,b,S)});if(1024===t)return o;var C=[],M=0,P=1024/t;for(i=0;i<t;i++)C.push(o[Math.floor(M)]),M+=P;return C}},function(t,i){t.exports=function ColorToRGBA(t){var i={r:t>>16&255,g:t>>8&255,b:255&t,a:255};return t>16777215&&(i.a=t>>>24),i}},function(t,i,o){var a=o(38),u=o(399);t.exports=function HSLToColor(t,i,o){var d=o,b=o,S=o;if(0!==i){var C=o<.5?o*(1+i):o+i-o*i,M=2*o-C;d=u(M,C,t+1/3),b=u(M,C,t),S=u(M,C,t-1/3)}return(new a).setGLTo(d,b,S,1)}},function(t,i,o){var a=o(188);t.exports=function HSVColorWheel(t,i){void 0===t&&(t=1),void 0===i&&(i=1);for(var o=[],u=0;u<=359;u++)o.push(a(u/359,t,i));return o}},function(t,i,o){var a=o(135),u=function RGBWithRGB(t,i,o,u,d,b,S,C){void 0===S&&(S=100),void 0===C&&(C=0);var M=C/S;return{r:a(t,u,M),g:a(i,d,M),b:a(o,b,M)}};t.exports={RGBWithRGB:u,ColorWithRGB:function ColorWithRGB(t,i,o,a,d,b){return void 0===d&&(d=100),void 0===b&&(b=0),u(t.r,t.g,t.b,i,o,a,d,b)},ColorWithColor:function ColorWithColor(t,i,o,a){return void 0===o&&(o=100),void 0===a&&(a=0),u(t.r,t.g,t.b,i.r,i.g,i.b,o,a)}}},function(t,i,o){var a=o(195),u=o(38);t.exports=function RandomRGB(t,i){return void 0===t&&(t=0),void 0===i&&(i=255),new u(a(t,i),a(t,i),a(t,i))}},function(t,i,o){var a=o(398);t.exports=function RGBToString(t,i,o,u,d){return void 0===u&&(u=255),void 0===d&&(d="#"),"#"===d?"#"+((1<<24)+(t<<16)+(i<<8)+o).toString(16).slice(1,7):"0x"+a(u)+a(t)+a(i)+a(o)}},function(t,i,o){t.exports={BitmapMask:o(310),GeometryMask:o(311)}},function(t,i,o){var a={AddToDOM:o(142),DOMContentLoaded:o(400),GetInnerHeight:o(401),GetScreenOrientation:o(402),GetTarget:o(407),ParseXML:o(408),RemoveFromDOM:o(202),RequestAnimationFrame:o(386)};t.exports=a},function(t,i,o){t.exports={EventEmitter:o(919)}},function(t,i,o){var a=o(0),u=o(9),d=o(24),b=new a({Extends:u,initialize:function EventEmitter(){u.call(this)},shutdown:function shutdown(){this.removeAllListeners()},destroy:function destroy(){this.removeAllListeners()}});d.register("EventEmitter",b,"events"),t.exports=b},function(t,i,o){var a=o(142),u=o(321),d=o(325),b=o(31),S=o(0),C=o(346),M=o(921),P=o(366),R=o(101),O=o(384),B=o(347),N=o(400),Y=o(9),G=o(22),X=o(409),U=o(24),z=o(414),V=o(415),W=o(417),H=o(106),j=o(422),q=o(385),Z=o(387),K=o(426),$=new S({initialize:function Game(t){this.config=new C(t),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new Y,this.anims=new u(this),this.textures=new j(this),this.cache=new d(this),this.registry=new R(this),this.input=new X(this,this.config),this.scene=new W(this,this.config.sceneConfig),this.device=B,this.scale=new V(this,this.config),this.sound=null,this.sound=K.create(this),this.loop=new q(this,this.config.fps),this.plugins=new z(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,N(this.boot.bind(this))},boot:function boot(){U.hasCore("EventEmitter")?(this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),P(this),M(this),O(this),a(this.canvas,this.config.parent),this.textures.once(H.READY,this.texturesReady,this),this.events.emit(G.BOOT)):console.warn("Aborting. Core Plugins missing.")},texturesReady:function texturesReady(){this.events.emit(G.READY),this.start()},start:function start(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),Z(this);var t=this.events;t.on(G.HIDDEN,this.onHidden,this),t.on(G.VISIBLE,this.onVisible,this),t.on(G.BLUR,this.onBlur,this),t.on(G.FOCUS,this.onFocus,this)},step:function step(t,i){if(this.pendingDestroy)return this.runDestroy();var o=this.events;o.emit(G.PRE_STEP,t,i),o.emit(G.STEP,t,i),this.scene.update(t,i),o.emit(G.POST_STEP,t,i);var a=this.renderer;a.preRender(),o.emit(G.PRE_RENDER,a,t,i),this.scene.render(a),a.postRender(),o.emit(G.POST_RENDER,a,t,i)},headlessStep:function headlessStep(t,i){if(this.pendingDestroy)return this.runDestroy();var o=this.events;o.emit(G.PRE_STEP,t,i),o.emit(G.STEP,t,i),this.scene.update(t,i),o.emit(G.POST_STEP,t,i),o.emit(G.PRE_RENDER),o.emit(G.POST_RENDER)},onHidden:function onHidden(){this.loop.pause(),this.events.emit(G.PAUSE)},onVisible:function onVisible(){this.loop.resume(),this.events.emit(G.RESUME)},onBlur:function onBlur(){this.hasFocus=!1,this.loop.blur()},onFocus:function onFocus(){this.hasFocus=!0,this.loop.focus()},getFrame:function getFrame(){return this.loop.frame},getTime:function getTime(){return this.loop.now},destroy:function destroy(t,i){void 0===i&&(i=!1),this.pendingDestroy=!0,this.removeCanvas=t,this.noReturn=i},runDestroy:function runDestroy(){this.scene.destroy(),this.events.emit(G.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(b.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});t.exports=$},function(t,i,o){var a=o(142);t.exports=function CreateDOMContainer(t){var i=t.config;if(i.parent&&i.domCreateContainer){var o=document.createElement("div");o.style.cssText=["display: block;","width: "+t.scale.width+"px;","height: "+t.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+i.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),t.domContainer=o,a(o,i.parent)}}},function(t,i){t.exports="boot"},function(t,i){t.exports="destroy"},function(t,i){t.exports="dragend"},function(t,i){t.exports="dragenter"},function(t,i){t.exports="drag"},function(t,i){t.exports="dragleave"},function(t,i){t.exports="dragover"},function(t,i){t.exports="dragstart"},function(t,i){t.exports="drop"},function(t,i){t.exports="gameout"},function(t,i){t.exports="gameover"},function(t,i){t.exports="gameobjectdown"},function(t,i){t.exports="dragend"},function(t,i){t.exports="dragenter"},function(t,i){t.exports="drag"},function(t,i){t.exports="dragleave"},function(t,i){t.exports="dragover"},function(t,i){t.exports="dragstart"},function(t,i){t.exports="drop"},function(t,i){t.exports="gameobjectmove"},function(t,i){t.exports="gameobjectout"},function(t,i){t.exports="gameobjectover"},function(t,i){t.exports="pointerdown"},function(t,i){t.exports="pointermove"},function(t,i){t.exports="pointerout"},function(t,i){t.exports="pointerover"},function(t,i){t.exports="pointerup"},function(t,i){t.exports="wheel"},function(t,i){t.exports="gameobjectup"},function(t,i){t.exports="gameobjectwheel"},function(t,i){t.exports="boot"},function(t,i){t.exports="process"},function(t,i){t.exports="update"},function(t,i){t.exports="pointerdown"},function(t,i){t.exports="pointerdownoutside"},function(t,i){t.exports="pointermove"},function(t,i){t.exports="pointerout"},function(t,i){t.exports="pointerover"},function(t,i){t.exports="pointerup"},function(t,i){t.exports="pointerupoutside"},function(t,i){t.exports="wheel"},function(t,i){t.exports="pointerlockchange"},function(t,i){t.exports="preupdate"},function(t,i){t.exports="shutdown"},function(t,i){t.exports="start"},function(t,i){t.exports="update"},function(t,i){t.exports="addfile"},function(t,i){t.exports="complete"},function(t,i){t.exports="filecomplete"},function(t,i){t.exports="filecomplete-"},function(t,i){t.exports="loaderror"},function(t,i){t.exports="load"},function(t,i){t.exports="fileprogress"},function(t,i){t.exports="postprocess"},function(t,i){t.exports="progress"},function(t,i){t.exports="start"},function(t,i,o){t.exports={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"}},function(t,i){t.exports=function AtlasXML(t,i,o){if(o.getElementsByTagName("TextureAtlas")){var a=t.source[i];t.add("__BASE",i,0,0,a.width,a.height);for(var u,d=o.getElementsByTagName("SubTexture"),b=0;b<d.length;b++){var S=d[b].attributes,C=S.name.value,M=parseInt(S.x.value,10),P=parseInt(S.y.value,10),R=parseInt(S.width.value,10),O=parseInt(S.height.value,10);if(u=t.add(C,i,M,P,R,O),S.frameX){var B=Math.abs(parseInt(S.frameX.value,10)),N=Math.abs(parseInt(S.frameY.value,10)),Y=parseInt(S.frameWidth.value,10),G=parseInt(S.frameHeight.value,10);u.setTrim(R,O,B,N,Y,G)}}return t}console.warn("Invalid Texture Atlas XML given")}},function(t,i){t.exports=function Canvas(t,i){var o=t.source[i];return t.add("__BASE",i,0,0,o.width,o.height),t}},function(t,i){t.exports=function Image(t,i){var o=t.source[i];return t.add("__BASE",i,0,0,o.width,o.height),t}},function(t,i,o){var a=o(77);t.exports=function JSONArray(t,i,o){if(o.frames||o.textures){var u=t.source[i];t.add("__BASE",i,0,0,u.width,u.height);for(var d,b=Array.isArray(o.textures)?o.textures[i].frames:o.frames,S=0;S<b.length;S++){var C=b[S];d=t.add(C.filename,i,C.frame.x,C.frame.y,C.frame.w,C.frame.h),C.trimmed&&d.setTrim(C.sourceSize.w,C.sourceSize.h,C.spriteSourceSize.x,C.spriteSourceSize.y,C.spriteSourceSize.w,C.spriteSourceSize.h),C.rotated&&(d.rotated=!0,d.updateUVsInverted());var M=C.anchor||C.pivot;M&&(d.customPivot=!0,d.pivotX=M.x,d.pivotY=M.y),d.customData=a(C)}for(var P in o)"frames"!==P&&(Array.isArray(o[P])?t.customData[P]=o[P].slice(0):t.customData[P]=o[P]);return t}console.warn("Invalid Texture Atlas JSON Array")}},function(t,i,o){var a=o(77);t.exports=function JSONHash(t,i,o){if(o.frames){var u=t.source[i];t.add("__BASE",i,0,0,u.width,u.height);var d,b=o.frames;for(var S in b)if(b.hasOwnProperty(S)){var C=b[S];d=t.add(S,i,C.frame.x,C.frame.y,C.frame.w,C.frame.h),C.trimmed&&d.setTrim(C.sourceSize.w,C.sourceSize.h,C.spriteSourceSize.x,C.spriteSourceSize.y,C.spriteSourceSize.w,C.spriteSourceSize.h),C.rotated&&(d.rotated=!0,d.updateUVsInverted());var M=C.anchor||C.pivot;M&&(d.customPivot=!0,d.pivotX=M.x,d.pivotY=M.y),d.customData=a(C)}for(var P in o)"frames"!==P&&(Array.isArray(o[P])?t.customData[P]=o[P].slice(0):t.customData[P]=o[P]);return t}console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object")}},function(t,i,o){var a=o(2);t.exports=function SpriteSheet(t,i,o,u,d,b,S){var C=a(S,"frameWidth",null),M=a(S,"frameHeight",C);if(null===C)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var P=t.source[i];t.add("__BASE",i,0,0,P.width,P.height);var R=a(S,"startFrame",0),O=a(S,"endFrame",-1),B=a(S,"margin",0),N=a(S,"spacing",0),Y=Math.floor((d-B+N)/(C+N))*Math.floor((b-B+N)/(M+N));0===Y&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",t.key),(R>Y||R<-Y)&&(R=0),R<0&&(R=Y+R),-1!==O&&(Y=R+(O+1));for(var G=B,X=B,U=0,z=0,V=0;V<Y;V++){U=0,z=0;var W=G+C,H=X+M;W>d&&(U=W-d),H>b&&(z=H-b),t.add(V,i,o+G,u+X,C-U,M-z),(G+=C+N)+C>d&&(G=B,X+=M+N)}return t}},function(t,i,o){var a=o(2);t.exports=function SpriteSheetFromAtlas(t,i,o){var u=a(o,"frameWidth",null),d=a(o,"frameHeight",u);if(!u)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var b=t.source[0];t.add("__BASE",0,0,0,b.width,b.height),a(o,"startFrame",0),a(o,"endFrame",-1);for(var S,C=a(o,"margin",0),M=a(o,"spacing",0),P=i.cutX,R=i.cutY,O=i.cutWidth,B=i.cutHeight,N=i.realWidth,Y=i.realHeight,G=Math.floor((N-C+M)/(u+M)),X=Math.floor((Y-C+M)/(d+M)),U=i.x,z=u-U,V=u-(N-O-U),W=i.y,H=d-W,j=d-(Y-B-W),q=C,Z=C,K=0,$=i.sourceIndex,tt=0;tt<X;tt++){for(var et=0===tt,it=tt===X-1,nt=0;nt<G;nt++){var rt=0===nt,st=nt===G-1;if(S=t.add(K,$,P+q,R+Z,u,d),rt||et||st||it){var ot=rt?U:0,at=et?W:0,ht=0,lt=0;rt&&(ht+=u-z),st&&(ht+=u-V),et&&(lt+=d-H),it&&(lt+=d-j);var ut=u-ht,ct=d-lt;S.cutWidth=ut,S.cutHeight=ct,S.setTrim(u,d,ot,at,ut,ct)}q+=M,q+=rt?z:st?V:u,K++}q=C,Z+=M,Z+=et?H:it?j:d}return t}},function(t,i){var o=0,a=function addFrame(t,i,a,u){var d=o-u.y-u.height;t.add(a,i,u.x,d,u.width,u.height)};t.exports=function UnityYAML(t,i,u){var d=t.source[i];t.add("__BASE",i,0,0,d.width,d.height),o=d.height;for(var b=u.split("\n"),S=/^[ ]*(- )*(\w+)+[: ]+(.*)/,C="",M="",P={x:0,y:0,width:0,height:0},R=0;R<b.length;R++){var O=b[R].match(S);if(O){var B="- "===O[1],N=O[2],Y=O[3];if(B&&(M!==C&&(a(t,i,M,P),C=M),P={x:0,y:0,width:0,height:0}),"name"!==N)switch(N){case"x":case"y":case"width":case"height":P[N]=parseInt(Y,10)}else M=Y}}return M!==C&&a(t,i,M,P),t}},function(t,i){t.exports="complete"},function(t,i){t.exports="decoded"},function(t,i){t.exports="decodedall"},function(t,i){t.exports="destroy"},function(t,i){t.exports="detune"},function(t,i){t.exports="detune"},function(t,i){t.exports="mute"},function(t,i){t.exports="rate"},function(t,i){t.exports="volume"},function(t,i){t.exports="loop"},function(t,i){t.exports="looped"},function(t,i){t.exports="mute"},function(t,i){t.exports="pan"},function(t,i){t.exports="pauseall"},function(t,i){t.exports="pause"},function(t,i){t.exports="play"},function(t,i){t.exports="rate"},function(t,i){t.exports="resumeall"},function(t,i){t.exports="resume"},function(t,i){t.exports="seek"},function(t,i){t.exports="stopall"},function(t,i){t.exports="stop"},function(t,i){t.exports="unlocked"},function(t,i){t.exports="volume"},function(t,i,o){var a={Events:o(75),DisplayList:o(1012),GameObjectCreator:o(16),GameObjectFactory:o(5),UpdateList:o(1040),Components:o(11),GetCalcMatrix:o(19),BuildGameObject:o(28),BuildGameObjectAnimation:o(439),GameObject:o(15),BitmapText:o(148),Blitter:o(213),Bob:o(440),Container:o(214),DOMElement:o(442),DynamicBitmapText:o(215),Extern:o(444),Graphics:o(216),Group:o(113),Image:o(125),Layer:o(219),Particles:o(1074),PathFollower:o(457),RenderTexture:o(221),RetroFont:o(1082),Rope:o(223),Sprite:o(73),Text:o(224),GetTextSize:o(458),MeasureText:o(460),TextStyle:o(459),TileSprite:o(225),Zone:o(129),Video:o(226),Shape:o(34),Arc:o(461),Curve:o(462),Ellipse:o(463),Grid:o(464),IsoBox:o(465),IsoTriangle:o(466),Line:o(467),Polygon:o(468),Rectangle:o(473),Star:o(474),Triangle:o(475),Factories:{Blitter:o(1130),Container:o(1131),DOMElement:o(1132),DynamicBitmapText:o(1133),Extern:o(1134),Graphics:o(1135),Group:o(1136),Image:o(1137),Layer:o(1138),Particles:o(1139),PathFollower:o(1140),RenderTexture:o(1141),Rope:o(1142),Sprite:o(1143),StaticBitmapText:o(1144),Text:o(1145),TileSprite:o(1146),Zone:o(1147),Video:o(1148),Arc:o(1149),Curve:o(1150),Ellipse:o(1151),Grid:o(1152),IsoBox:o(1153),IsoTriangle:o(1154),Line:o(1155),Polygon:o(1156),Rectangle:o(1157),Star:o(1158),Triangle:o(1159)},Creators:{Blitter:o(1160),Container:o(1161),DynamicBitmapText:o(1162),Graphics:o(1163),Group:o(1164),Image:o(1165),Layer:o(1166),Particles:o(1167),RenderTexture:o(1168),Rope:o(1169),Sprite:o(1170),StaticBitmapText:o(1171),Text:o(1172),TileSprite:o(1173),Zone:o(1174),Video:o(1175)}};a.Shader=o(229),a.Mesh=o(230),a.PointLight=o(150),a.Factories.Shader=o(1184),a.Factories.Mesh=o(1185),a.Factories.PointLight=o(1186),a.Creators.Shader=o(1187),a.Creators.Mesh=o(1188),a.Creators.PointLight=o(1189),a.Light=o(481),a.LightsManager=o(482),a.LightsPlugin=o(1190),t.exports=a},function(t,i,o){var a=o(0),u=o(110),d=o(24),b=o(75),S=o(20),C=o(79),M=new a({Extends:u,initialize:function DisplayList(t){u.call(this,t),this.sortChildrenFlag=!1,this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(S.BOOT,this.boot,this),this.events.on(S.START,this.start,this)},boot:function boot(){this.events.once(S.DESTROY,this.destroy,this)},addChildCallback:function addChildCallback(t){t.displayList&&t.displayList!==this&&t.removeFromDisplayList(),t.displayList||(this.queueDepthSort(),t.displayList=this,t.emit(b.ADDED_TO_SCENE,t,this.scene),this.events.emit(S.ADDED_TO_SCENE,t,this.scene))},removeChildCallback:function removeChildCallback(t){this.queueDepthSort(),t.displayList=null,t.emit(b.REMOVED_FROM_SCENE,t,this.scene),this.events.emit(S.REMOVED_FROM_SCENE,t,this.scene)},start:function start(){this.events.once(S.SHUTDOWN,this.shutdown,this)},queueDepthSort:function queueDepthSort(){this.sortChildrenFlag=!0},depthSort:function depthSort(){this.sortChildrenFlag&&(C(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function sortByDepth(t,i){return t._depth-i._depth},getChildren:function getChildren(){return this.list},shutdown:function shutdown(){for(var t=this.list,i=t.length;i--;)t[i].destroy(!0);t.length=0,this.events.off(S.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown(),this.events.off(S.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});d.register("DisplayList",M,"displayList"),t.exports=M},function(t,i,o){t.exports={CheckMatrix:o(209),MatrixToString:o(1014),ReverseColumns:o(1015),ReverseRows:o(1016),Rotate180:o(1017),RotateLeft:o(1018),RotateMatrix:o(147),RotateRight:o(1019),Translate:o(1020),TransposeMatrix:o(435)}},function(t,i,o){var a=o(186),u=o(209);t.exports=function MatrixToString(t){var i="";if(!u(t))return i;for(var o=0;o<t.length;o++){for(var d=0;d<t[o].length;d++){var b=t[o][d].toString();i+="undefined"!==b?a(b,2):"?",d<t[o].length-1&&(i+=" |")}if(o<t.length-1){i+="\n";for(var S=0;S<t[o].length;S++)i+="---",S<t[o].length-1&&(i+="+");i+="\n"}}return i}},function(t,i){t.exports=function ReverseColumns(t){return t.reverse()}},function(t,i){t.exports=function ReverseRows(t){for(var i=0;i<t.length;i++)t[i].reverse();return t}},function(t,i,o){var a=o(147);t.exports=function Rotate180(t){return a(t,180)}},function(t,i,o){var a=o(147);t.exports=function RotateLeft(t){return a(t,90)}},function(t,i,o){var a=o(147);t.exports=function RotateRight(t){return a(t,-90)}},function(t,i,o){var a=o(178),u=o(179);t.exports=function TranslateMatrix(t,i,o){if(void 0===i&&(i=0),void 0===o&&(o=0),0!==o&&(o<0?a(t,Math.abs(o)):u(t,o)),0!==i)for(var d=0;d<t.length;d++){var b=t[d];i<0?a(b,Math.abs(i)):u(b,i)}return t}},function(t,i){t.exports=function Add(t,i,o,a,u){if(void 0===u&&(u=t),o>0){var d=o-t.length;if(d<=0)return null}if(!Array.isArray(i))return-1===t.indexOf(i)?(t.push(i),a&&a.call(u,i),i):null;for(var b=i.length-1;b>=0;)-1!==t.indexOf(i[b])&&i.splice(b,1),b--;if(0===(b=i.length))return null;o>0&&b>d&&(i.splice(d),b=d);for(var S=0;S<b;S++){var C=i[S];t.push(C),a&&a.call(u,C)}return i}},function(t,i){t.exports=function AddAt(t,i,o,a,u,d){if(void 0===o&&(o=0),void 0===d&&(d=t),a>0){var b=a-t.length;if(b<=0)return null}if(!Array.isArray(i))return-1===t.indexOf(i)?(t.splice(o,0,i),u&&u.call(d,i),i):null;for(var S=i.length-1;S>=0;)-1!==t.indexOf(i[S])&&i.pop(),S--;if(0===(S=i.length))return null;a>0&&S>b&&(i.splice(b),S=b);for(var C=S-1;C>=0;C--){var M=i[C];t.splice(o,0,M),u&&u.call(d,M)}return i}},function(t,i){t.exports=function BringToTop(t,i){var o=t.indexOf(i);return-1!==o&&o<t.length&&(t.splice(o,1),t.push(i)),i}},function(t,i,o){var a=o(78);t.exports=function CountAllMatching(t,i,o,u,d){void 0===u&&(u=0),void 0===d&&(d=t.length);var b=0;if(a(t,u,d))for(var S=u;S<d;S++)t[S][i]===o&&b++;return b}},function(t,i){t.exports=function Each(t,i,o){var a,u=[null];for(a=3;a<arguments.length;a++)u.push(arguments[a]);for(a=0;a<t.length;a++)u[0]=t[a],i.apply(o,u);return t}},function(t,i,o){var a=o(78);t.exports=function EachInRange(t,i,o,u,d){if(void 0===u&&(u=0),void 0===d&&(d=t.length),a(t,u,d)){var b,S=[null];for(b=5;b<arguments.length;b++)S.push(arguments[b]);for(b=u;b<d;b++)S[0]=t[b],i.apply(o,S)}return t}},function(t,i){t.exports=function MoveDown(t,i){var o=t.indexOf(i);if(o>0){var a=t[o-1],u=t.indexOf(a);t[o]=a,t[u]=i}return t}},function(t,i){t.exports=function MoveTo(t,i,o){var a=t.indexOf(i);if(-1===a||o<0||o>=t.length)throw new Error("Supplied index out of bounds");return a!==o&&(t.splice(a,1),t.splice(o,0,i)),i}},function(t,i){t.exports=function MoveUp(t,i){var o=t.indexOf(i);if(-1!==o&&o<t.length-1){var a=t[o+1],u=t.indexOf(a);t[o]=a,t[u]=i}return t}},function(t,i){t.exports=function MoveAbove(t,i,o){if(i===o)return t;var a=t.indexOf(i),u=t.indexOf(o);if(a<0||u<0)throw new Error("Supplied items must be elements of the same array");return a>u||(t.splice(a,1),u===t.length-1?t.push(i):t.splice(u,0,i)),t}},function(t,i){t.exports=function MoveBelow(t,i,o){if(i===o)return t;var a=t.indexOf(i),u=t.indexOf(o);if(a<0||u<0)throw new Error("Supplied items must be elements of the same array");return a<u||(t.splice(a,1),0===u?t.unshift(i):t.splice(u,0,i)),t}},function(t,i,o){var a=o(363);t.exports=function NumberArrayStep(t,i,o){void 0===t&&(t=0),void 0===i&&(i=null),void 0===o&&(o=1),null===i&&(i=t,t=0);for(var u=[],d=Math.max(a((i-t)/(o||1)),0),b=0;b<d;b++)u.push(t),t+=o;return u}},function(t,i,o){var a=o(74);t.exports=function RemoveAt(t,i,o,u){if(void 0===u&&(u=t),i<0||i>t.length-1)throw new Error("Index out of bounds");var d=a(t,i);return o&&o.call(u,d),d}},function(t,i,o){var a=o(78);t.exports=function RemoveBetween(t,i,o,u,d){if(void 0===i&&(i=0),void 0===o&&(o=t.length),void 0===d&&(d=t),a(t,i,o)){var b=o-i,S=t.splice(i,b);if(u)for(var C=0;C<S.length;C++){var M=S[C];u.call(d,M)}return S}return[]}},function(t,i,o){var a=o(74);t.exports=function RemoveRandomElement(t,i,o){void 0===i&&(i=0),void 0===o&&(o=t.length);var u=i+Math.floor(Math.random()*o);return a(t,u)}},function(t,i){t.exports=function Replace(t,i,o){var a=t.indexOf(i),u=t.indexOf(o);return-1!==a&&-1===u&&(t[a]=o,!0)}},function(t,i){t.exports=function SendToBack(t,i){var o=t.indexOf(i);return-1!==o&&o>0&&(t.splice(o,1),t.unshift(i)),i}},function(t,i,o){var a=o(78);t.exports=function SetAll(t,i,o,u,d){if(void 0===u&&(u=0),void 0===d&&(d=t.length),a(t,u,d))for(var b=u;b<d;b++){var S=t[b];S.hasOwnProperty(i)&&(S[i]=o)}return t}},function(t,i){t.exports=function Swap(t,i,o){if(i===o)return t;var a=t.indexOf(i),u=t.indexOf(o);if(a<0||u<0)throw new Error("Supplied items must be elements of the same array");return t[a]=o,t[u]=i,t}},function(t,i,o){var a=o(0),u=o(211),d=o(24),b=o(20),S=new a({Extends:u,initialize:function UpdateList(t){u.call(this),this.checkQueue=!0,this.scene=t,this.systems=t.sys,t.sys.events.once(b.BOOT,this.boot,this),t.sys.events.on(b.START,this.start,this)},boot:function boot(){this.systems.events.once(b.DESTROY,this.destroy,this)},start:function start(){var t=this.systems.events;t.on(b.PRE_UPDATE,this.update,this),t.on(b.UPDATE,this.sceneUpdate,this),t.once(b.SHUTDOWN,this.shutdown,this)},sceneUpdate:function sceneUpdate(t,i){for(var o=this._active,a=o.length,u=0;u<a;u++){var d=o[u];d.active&&d.preUpdate.call(d,t,i)}},shutdown:function shutdown(){for(var t=this._active.length;t--;)this._active[t].destroy(!0);for(t=this._pending.length;t--;)this._pending[t].destroy(!0);for(t=this._destroy.length;t--;)this._destroy[t].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var i=this.systems.events;i.off(b.PRE_UPDATE,this.update,this),i.off(b.UPDATE,this.sceneUpdate,this),i.off(b.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown(),this.systems.events.off(b.START,this.start,this),this.scene=null,this.systems=null}});d.register("UpdateList",S,"updateList"),t.exports=S},function(t,i){t.exports="add"},function(t,i){t.exports="remove"},function(t,i){t.exports=function GetBitmapTextSize(t,i,o,a){if(void 0===o&&(o=!1),void 0===a)return a={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0};var u,d=t.text,b=d.length,S=t.maxWidth,C=t.wordWrapCharCode,M=Number.MAX_VALUE,P=Number.MAX_VALUE,R=0,O=0,B=t.fontData.chars,N=t.fontData.lineHeight,Y=t.letterSpacing,G=0,X=0,U=0,z=null,V=t._align,W=0,H=0,j=t.fontSize/t.fontData.size,q=j*t.scaleX,Z=j*t.scaleY,K=null,$=0,tt=[],et=Number.MAX_VALUE,it=0,nt=0,rt=0,st=[],ot=[],at=null;if(S>0){for(u=0;u<b;u++)if(10!==(U=d.charCodeAt(u))){if(z=B[U]){if(null!==K)var ht=z.kerning[$];U===C?null!==at&&(st.push({word:at.word,i:at.i,x:at.x*q,y:at.y*Z,w:at.w*q,h:at.h*Z,cr:!1}),at=null):(null===at&&(at={word:"",i:u,x:G,y:X,w:0,h:N,cr:!1}),at.word=at.word.concat(d[u]),at.w+=z.xOffset+z.xAdvance+(void 0!==ht?ht:0)),G+=z.xAdvance+Y,K=z,$=U}}else null!==at&&(st.push({word:at.word,i:at.i,x:at.x*q,y:at.y*Z,w:at.w*q,h:at.h*Z,cr:!0}),at=null),G=0,X+=N,K=null;var lt;null!==at&&st.push({word:at.word,i:at.i,x:at.x*q,y:at.y*Z,w:at.w*q,h:at.h*Z,cr:!1}),G=0,X=0,K=null,$=0;var ut=0,ct=[];for(u=0;u<st.length;u++){var dt=st[u],ft=dt.x,pt=dt.x+dt.w;lt&&(ut=ft-(ft-(lt.x+lt.w)+lt.w),lt=null),ft-ut>S||pt-ut>S?(ct.push(dt.i-1),dt.cr?(ct.push(dt.i+dt.word.length),ut=0,lt=null):lt=dt):dt.cr&&(ct.push(dt.i+dt.word.length),ut=0,lt=null)}var gt=function stringInsert(t,i,o){return t.substr(0,i)+o+t.substr(i+1)};for(u=ct.length-1;u>=0;u--)d=gt(d,ct[u],"\n");a.wrappedText=d,b=d.length,st=[],at=null}var vt=0;for(u=0;u<b;u++)if(10!==(U=d.charCodeAt(u))){if(z=B[U]){if(W=G,H=X,null!==K){var mt=z.kerning[$];W+=void 0!==mt?mt:0}M>W&&(M=W),P>H&&(P=H);var yt=W+z.xAdvance,xt=H+N;R<yt&&(R=yt),O<xt&&(O=xt);var Tt=z.xOffset+z.xAdvance+(void 0!==mt?mt:0);U===C?null!==at&&(st.push({word:at.word,i:at.i,x:at.x*q,y:at.y*Z,w:at.w*q,h:at.h*Z}),at=null):(null===at&&(at={word:"",i:vt,x:G,y:X,w:0,h:N}),at.word=at.word.concat(d[u]),at.w+=Tt),ot.push({i:vt,char:d[u],code:U,x:(z.xOffset+G)*j,y:(z.yOffset+X)*j,w:z.width*j,h:z.height*j,t:X*j,r:yt*j,b:N*j,line:nt,glyph:z}),G+=z.xAdvance+Y,K=z,$=U,rt=yt*j,vt++}}else null!==at&&(st.push({word:at.word,i:at.i,x:at.x*q,y:at.y*Z,w:at.w*q,h:at.h*Z}),at=null),G=0,X+=N,K=null,tt[nt]=rt,rt>it&&(it=rt),rt<et&&(et=rt),nt++,rt=0;if(null!==at&&st.push({word:at.word,i:at.i,x:at.x*q,y:at.y*Z,w:at.w*q,h:at.h*Z}),tt[nt]=rt,rt>it&&(it=rt),rt<et&&(et=rt),V>0)for(var bt=0;bt<ot.length;bt++){var wt=ot[bt];if(1===V){var St=(it-tt[wt.line])/2;wt.x+=St,wt.r+=St}else if(2===V){var Ct=it-tt[wt.line];wt.x+=Ct,wt.r+=Ct}}var Et=a.local,Mt=a.global,_t=a.lines;return Et.x=M*j,Et.y=P*j,Et.width=R*j,Et.height=O*j,Mt.x=t.x-t._displayOriginX+M*q,Mt.y=t.y-t._displayOriginY+P*Z,Mt.width=R*q,Mt.height=O*Z,_t.shortest=et,_t.longest=it,_t.lengths=tt,i&&(Et.x=Math.ceil(Et.x),Et.y=Math.ceil(Et.y),Et.width=Math.ceil(Et.width),Et.height=Math.ceil(Et.height),Mt.x=Math.ceil(Mt.x),Mt.y=Math.ceil(Mt.y),Mt.width=Math.ceil(Mt.width),Mt.height=Math.ceil(Mt.height),_t.shortest=Math.ceil(et),_t.longest=Math.ceil(it)),o&&(t._displayOriginX=t.originX*Et.width,t._displayOriginY=t.originY*Et.height,Mt.x=t.x-t._displayOriginX*t.scaleX,Mt.y=t.y-t._displayOriginY*t.scaleY,i&&(Mt.x=Math.ceil(Mt.x),Mt.y=Math.ceil(Mt.y))),a.words=st,a.characters=ot,a.lines.height=N,a.scale=j,a.scaleX=t.scaleX,a.scaleY=t.scaleY,a}},function(t,i,o){var a=o(212);t.exports=function ParseFromAtlas(t,i,o,u,d,b,S){var C=t.sys.textures.get(o),M=C.get(u),P=t.sys.cache.xml.get(d);if(M&&P){var R=a(P,M,b,S,C);return t.sys.cache.bitmapFont.add(i,{data:R,texture:o,frame:u,fromAtlas:!0}),!0}return!1}},function(t,i,o){var a=o(1),u=o(1);a=o(1046),u=o(1048),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i,o){var a=o(1047),u=o(19),d=o(12);t.exports=function BitmapTextWebGLRenderer(t,i,o,b){if(0!==i._text.length){o.addToRenderList(i);var S,C,M,P=t.pipelines.set(i.pipeline,i),R=u(i,o,b).calc,O=o.roundPixels,B=o.alpha,N=i.charColors,Y=i.tintFill,G=d.getTintAppendFloatAlpha,X=G(i.tintTopLeft,B*i._alphaTL),U=G(i.tintTopRight,B*i._alphaTR),z=G(i.tintBottomLeft,B*i._alphaBL),V=G(i.tintBottomRight,B*i._alphaBR),W=i.frame.glTexture,H=P.setGameObject(i),j=i.getTextBounds(!1).characters,q=i.dropShadowX,Z=i.dropShadowY,K=0!==q||0!==Z;if(t.pipelines.preBatch(i),K){var $=i.dropShadowColor,tt=i.dropShadowAlpha,et=G($,B*tt*i._alphaTL),it=G($,B*tt*i._alphaTR),nt=G($,B*tt*i._alphaBL),rt=G($,B*tt*i._alphaBR);for(S=0;S<j.length;S++)M=(C=j[S]).glyph,32!==C.code&&0!==M.width&&0!==M.height&&a(P,i,C,M,q,Z,R,O,et,it,nt,rt,1,W,H)}for(S=0;S<j.length;S++)if(M=(C=j[S]).glyph,32!==C.code&&0!==M.width&&0!==M.height)if(N[C.i]){var st=N[C.i],ot=st.tintEffect,at=G(st.tintTL,B*i._alphaTL),ht=G(st.tintTR,B*i._alphaTR),lt=G(st.tintBL,B*i._alphaBL),ut=G(st.tintBR,B*i._alphaBR);a(P,i,C,M,0,0,R,O,at,ht,lt,ut,ot,W,H)}else a(P,i,C,M,0,0,R,O,X,U,z,V,Y,W,H);t.pipelines.postBatch(i)}}},function(t,i){t.exports=function BatchChar(t,i,o,a,u,d,b,S,C,M,P,R,O,B,N){var Y=o.x-i.displayOriginX+u,G=o.y-i.displayOriginY+d,X=Y+o.w,U=G+o.h,z=b.getXRound(Y,G,S),V=b.getYRound(Y,G,S),W=b.getXRound(Y,U,S),H=b.getYRound(Y,U,S),j=b.getXRound(X,U,S),q=b.getYRound(X,U,S),Z=b.getXRound(X,G,S),K=b.getYRound(X,G,S);t.batchQuad(i,z,V,W,H,j,q,Z,K,a.u0,a.v0,a.u1,a.v1,C,M,P,R,O,B,N)}},function(t,i,o){var a=o(30);t.exports=function BitmapTextCanvasRenderer(t,i,o,u){var d=i._text,b=d.length,S=t.currentContext;if(0!==b&&a(t,S,i,o,u)){o.addToRenderList(i);var C=i.fromAtlas?i.frame:i.texture.frames.__BASE,M=i.fontData.chars,P=i.fontData.lineHeight,R=i._letterSpacing,O=0,B=0,N=0,Y=null,G=0,X=0,U=0,z=0,V=0,W=0,H=null,j=0,q=C.source.image,Z=C.cutX,K=C.cutY,$=i._fontSize/i.fontData.size,tt=i._align,et=0,it=0,nt=i.getTextBounds(!1);i.maxWidth>0&&(b=(d=nt.wrappedText).length);var rt=i._bounds.lines;1===tt?it=(rt.longest-rt.lengths[0])/2:2===tt&&(it=rt.longest-rt.lengths[0]),S.translate(-i.displayOriginX,-i.displayOriginY);for(var st=o.roundPixels,ot=0;ot<b;ot++)if(10!==(N=d.charCodeAt(ot))){if(Y=M[N]){if(G=Z+Y.x,X=K+Y.y,U=Y.width,z=Y.height,V=Y.xOffset+O,W=Y.yOffset+B,null!==H){var at=Y.kerning[j];V+=void 0!==at?at:0}V*=$,W*=$,V+=it,O+=Y.xAdvance+R,H=Y,j=N,0!==U&&0!==z&&32!==N&&(st&&(V=Math.round(V),W=Math.round(W)),S.save(),S.translate(V,W),S.scale($,$),S.drawImage(q,G,X,U,z,0,0,U,z),S.restore())}}else et++,1===tt?it=(rt.longest-rt.lengths[et])/2:2===tt&&(it=rt.longest-rt.lengths[et]),O=0,B+=P,H=null;S.restore()}}},function(t,i,o){var a=o(1),u=o(1);a=o(1050),u=o(1051),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i,o){var a=o(25),u=o(12),d=new a;t.exports=function BlitterWebGLRenderer(t,i,o,a){var b=i.getRenderList();if(0!==b.length){var S=o.alpha*i.alpha;if(0!==S){o.addToRenderList(i);var C=t.pipelines.set(this.pipeline,i),M=o.scrollX*i.scrollFactorX,P=o.scrollY*i.scrollFactorY,R=d.copyFrom(o.matrix);a&&(R.multiplyWithOffset(a,-M,-P),M=0,P=0);var O=i.x-M,B=i.y-P,N=-1,Y=o.roundPixels;t.pipelines.preBatch(i);for(var G=0;G<b.length;G++){var X=b[G],U=X.frame,z=X.alpha*S;if(0!==z){var V=U.width,W=U.height,H=O+X.x+U.x,j=B+X.y+U.y;X.flipX&&(V*=-1,H+=U.width),X.flipY&&(W*=-1,j+=U.height);var q=H+V,Z=j+W,K=R.getX(H,j),$=R.getY(H,j),tt=R.getX(q,Z),et=R.getY(q,Z),it=u.getTintAppendFloatAlpha(X.tint,z);if(U.sourceIndex!==N){var nt=C.setGameObject(i,U);N=U.sourceIndex}Y&&(K=Math.round(K),$=Math.round($),tt=Math.round(tt),et=Math.round(et)),C.batchQuad(i,K,$,K,et,tt,et,tt,$,U.u0,U.v0,U.u1,U.v1,it,it,it,it,!1,U.glTexture,nt)&&(N=-1)}}t.pipelines.postBatch(i)}}}},function(t,i){t.exports=function BlitterCanvasRenderer(t,i,o,a){var u=i.getRenderList();if(0!==u.length){var d=t.currentContext,b=o.alpha*i.alpha;if(0!==b){o.addToRenderList(i),d.globalCompositeOperation=t.blendModes[i.blendMode],d.imageSmoothingEnabled=!(!t.antialias||i.frame.source.scaleMode);var S=i.x-o.scrollX*i.scrollFactorX,C=i.y-o.scrollY*i.scrollFactorY;d.save(),a&&a.copyToContext(d);for(var M=o.roundPixels,P=0;P<u.length;P++){var R=u[P],O=R.flipX||R.flipY,B=R.frame,N=B.canvasData,Y=B.x,G=B.y,X=1,U=1,z=R.alpha*b;0!==z&&(d.globalAlpha=z,O?(R.flipX&&(X=-1,Y-=N.width),R.flipY&&(U=-1,G-=N.height),d.save(),d.translate(R.x+S,R.y+C),d.scale(X,U),d.drawImage(B.source.image,N.x,N.y,N.width,N.height,Y,G,N.width,N.height),d.restore()):(M&&(Y=Math.round(Y),G=Math.round(G)),d.drawImage(B.source.image,N.x,N.y,N.width,N.height,Y+R.x+S,G+R.y+C,N.width,N.height)))}d.restore()}}}},function(t,i,o){var a=o(1),u=o(1);a=o(1053),u=o(1054),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i){t.exports=function ContainerWebGLRenderer(t,i,o,a){o.addToRenderList(i);var u=i.list,d=u.length;if(0!==d){var b=i.localTransform;a?(b.loadIdentity(),b.multiply(a),b.translate(i.x,i.y),b.rotate(i.rotation),b.scale(i.scaleX,i.scaleY)):b.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY),t.pipelines.preBatch(i);var S=-1!==i.blendMode;S||t.setBlendMode(0);for(var C=i.alpha,M=i.scrollFactorX,P=i.scrollFactorY,R=0;R<d;R++){var O=u[R];if(O.willRender(o)){var B,N,Y,G;if(void 0!==O.alphaTopLeft)B=O.alphaTopLeft,N=O.alphaTopRight,Y=O.alphaBottomLeft,G=O.alphaBottomRight;else{var X=O.alpha;B=X,N=X,Y=X,G=X}var U=O.scrollFactorX,z=O.scrollFactorY;S||O.blendMode===t.currentBlendMode||t.setBlendMode(O.blendMode);var V=O.mask;V&&V.preRenderWebGL(t,O,o);var W=O.type;W!==t.currentType&&(t.newType=!0,t.currentType=W),t.nextTypeMatch=R<d-1&&u[R+1].type===t.currentType,O.setScrollFactor(U*M,z*P),O.setAlpha(B*C,N*C,Y*C,G*C),O.renderWebGL(t,O,o,b),O.setAlpha(B,N,Y,G),O.setScrollFactor(U,z),V&&V.postRenderWebGL(t,o),t.newType=!1}}t.pipelines.postBatch(i)}}},function(t,i){t.exports=function ContainerCanvasRenderer(t,i,o,a){o.addToRenderList(i);var u=i.list;if(0!==u.length){var d=i.localTransform;a?(d.loadIdentity(),d.multiply(a),d.translate(i.x,i.y),d.rotate(i.rotation),d.scale(i.scaleX,i.scaleY)):d.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY);var b=-1!==i.blendMode;b||t.setBlendMode(0);var S=i._alpha,C=i.scrollFactorX,M=i.scrollFactorY;i.mask&&i.mask.preRenderCanvas(t,null,o);for(var P=0;P<u.length;P++){var R=u[P];if(R.willRender(o)){var O=R.alpha,B=R.scrollFactorX,N=R.scrollFactorY;b||R.blendMode===t.currentBlendMode||t.setBlendMode(R.blendMode),R.setScrollFactor(B*C,N*M),R.setAlpha(O*S),R.renderCanvas(t,R,o,d),R.setAlpha(O),R.setScrollFactor(B,N)}}i.mask&&i.mask.postRenderCanvas(t)}}},function(t,i,o){var a=o(1),u=o(1);a=o(443),u=o(443),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i){t.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(t,i,o){var a=o(1),u=o(1);a=o(1058),u=o(1059),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i,o){var a=o(19),u=o(25),d=o(12),b=new u;t.exports=function DynamicBitmapTextWebGLRenderer(t,i,o,u){var S=i.text,C=S.length;if(0!==C){o.addToRenderList(i);var M=t.pipelines.set(i.pipeline,i),P=a(i,o,u),R=P.sprite,O=P.calc,B=b,N=i.cropWidth>0||i.cropHeight>0;N&&(M.flush(),t.pushScissor(O.tx,O.ty,i.cropWidth*O.scaleX,i.cropHeight*O.scaleY));var Y,G,X=i.frame.glTexture,U=i.tintFill,z=d.getTintAppendFloatAlpha(i.tintTopLeft,o.alpha*i._alphaTL),V=d.getTintAppendFloatAlpha(i.tintTopRight,o.alpha*i._alphaTR),W=d.getTintAppendFloatAlpha(i.tintBottomLeft,o.alpha*i._alphaBL),H=d.getTintAppendFloatAlpha(i.tintBottomRight,o.alpha*i._alphaBR),j=M.setGameObject(i),q=0,Z=0,K=0,$=0,tt=i.letterSpacing,et=0,it=0,nt=i.scrollX,rt=i.scrollY,st=i.fontData,ot=st.chars,at=st.lineHeight,ht=i.fontSize/st.size,lt=0,ut=i._align,ct=0,dt=0,ft=i.getTextBounds(!1);i.maxWidth>0&&(C=(S=ft.wrappedText).length);var pt=i._bounds.lines;1===ut?dt=(pt.longest-pt.lengths[0])/2:2===ut&&(dt=pt.longest-pt.lengths[0]);var gt=o.roundPixels,vt=i.displayCallback,mt=i.callbackData;t.pipelines.preBatch(i);for(var yt=0;yt<C;yt++)if(10!==(K=S.charCodeAt(yt))){if(Y=ot[K]){et=Y.width,it=Y.height;var xt=Y.xOffset+q-nt,Tt=Y.yOffset+Z-rt;if(null!==G){var bt=Y.kerning[$];xt+=void 0!==bt?bt:0}if(q+=Y.xAdvance+tt,G=Y,$=K,0!==et&&0!==it&&32!==K){if(ht=i.fontSize/i.fontData.size,lt=0,vt){mt.color=0,mt.tint.topLeft=z,mt.tint.topRight=V,mt.tint.bottomLeft=W,mt.tint.bottomRight=H,mt.index=yt,mt.charCode=K,mt.x=xt,mt.y=Tt,mt.scale=ht,mt.rotation=lt,mt.data=Y.data;var wt=vt(mt);xt=wt.x,Tt=wt.y,ht=wt.scale,lt=wt.rotation,wt.color?(z=wt.color,V=wt.color,W=wt.color,H=wt.color):(z=wt.tint.topLeft,V=wt.tint.topRight,W=wt.tint.bottomLeft,H=wt.tint.bottomRight),z=d.getTintAppendFloatAlpha(z,o.alpha*i._alphaTL),V=d.getTintAppendFloatAlpha(V,o.alpha*i._alphaTR),W=d.getTintAppendFloatAlpha(W,o.alpha*i._alphaBL),H=d.getTintAppendFloatAlpha(H,o.alpha*i._alphaBR)}xt*=ht,Tt*=ht,xt-=i.displayOriginX,Tt-=i.displayOriginY,xt+=dt,B.applyITRS(xt,Tt,lt,ht,ht),O.multiply(B,R);var St=Y.u0,Ct=Y.v0,Et=Y.u1,Mt=Y.v1,_t=et,Pt=it,Rt=R.e,kt=R.f,Ot=Pt*R.c+R.e,Lt=Pt*R.d+R.f,Dt=_t*R.a+Pt*R.c+R.e,It=_t*R.b+Pt*R.d+R.f,Ft=_t*R.a+R.e,Bt=_t*R.b+R.f;gt&&(Rt=Math.round(Rt),kt=Math.round(kt),Ot=Math.round(Ot),Lt=Math.round(Lt),Dt=Math.round(Dt),It=Math.round(It),Ft=Math.round(Ft),Bt=Math.round(Bt)),M.batchQuad(i,Rt,kt,Ot,Lt,Dt,It,Ft,Bt,St,Ct,Et,Mt,z,V,W,H,U,X,j)}}}else ct++,1===ut?dt=(pt.longest-pt.lengths[ct])/2:2===ut&&(dt=pt.longest-pt.lengths[ct]),q=0,Z+=at,G=null;N&&(M.flush(),t.popScissor()),t.pipelines.postBatch(i)}}},function(t,i,o){var a=o(30);t.exports=function DynamicBitmapTextCanvasRenderer(t,i,o,u){var d=i._text,b=d.length,S=t.currentContext;if(0!==b&&a(t,S,i,o,u)){o.addToRenderList(i);var C=i.fromAtlas?i.frame:i.texture.frames.__BASE,M=i.displayCallback,P=i.callbackData,R=i.fontData.chars,O=i.fontData.lineHeight,B=i._letterSpacing,N=0,Y=0,G=0,X=null,U=0,z=0,V=0,W=0,H=0,j=0,q=null,Z=0,K=i.frame.source.image,$=C.cutX,tt=C.cutY,et=0,it=0,nt=i._fontSize/i.fontData.size,rt=i._align,st=0,ot=0;i.getTextBounds(!1);var at=i._bounds.lines;1===rt?ot=(at.longest-at.lengths[0])/2:2===rt&&(ot=at.longest-at.lengths[0]),S.translate(-i.displayOriginX,-i.displayOriginY);var ht=o.roundPixels;i.cropWidth>0&&i.cropHeight>0&&(S.beginPath(),S.rect(0,0,i.cropWidth,i.cropHeight),S.clip());for(var lt=0;lt<b;lt++)if(it=nt,et=0,10!==(G=d.charCodeAt(lt))){if(X=R[G]){if(U=$+X.x,z=tt+X.y,V=X.width,W=X.height,H=X.xOffset+N-i.scrollX,j=X.yOffset+Y-i.scrollY,null!==q){var ut=X.kerning[Z];H+=void 0!==ut?ut:0}if(M){P.index=lt,P.charCode=G,P.x=H,P.y=j,P.scale=it,P.rotation=et,P.data=X.data;var ct=M(P);H=ct.x,j=ct.y,it=ct.scale,et=ct.rotation}H*=it,j*=it,H+=ot,N+=X.xAdvance+B,q=X,Z=G,0!==V&&0!==W&&32!==G&&(ht&&(H=Math.round(H),j=Math.round(j)),S.save(),S.translate(H,j),S.rotate(et),S.scale(it,it),S.drawImage(K,U,z,V,W,0,0,V,W),S.restore())}}else st++,1===rt?ot=(at.longest-at.lengths[st])/2:2===rt&&(ot=at.longest-at.lengths[st]),N=0,Y+=O,q=null;S.restore()}}},function(t,i,o){var a=o(1),u=o(1);a=o(1061),u=o(1062),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i,o){var a=o(19);t.exports=function ExternWebGLRenderer(t,i,o,u){t.pipelines.clear();var d=a(i,o,u).calc;i.render.call(i,t,o,d),t.pipelines.rebind()}},function(t,i){},function(t,i,o){var a=o(1),u=o(1);a=o(1064),o(448),u=o(448),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i,o){var a=o(217),u=o(19),d=o(25),b=o(12),S=function Point(t,i,o){this.x=t,this.y=i,this.width=o},C=function Path(t,i,o){this.points=[],this.pointsLength=1,this.points[0]=new S(t,i,o)},M=[],P=new d;t.exports=function GraphicsWebGLRenderer(t,i,o,d){if(0!==i.commandBuffer.length){o.addToRenderList(i);var R=t.pipelines.set(i.pipeline,i);t.pipelines.preBatch(i);for(var O=u(i,o,d).calc,B=P.loadIdentity(),N=i.commandBuffer,Y=o.alpha*i.alpha,G=1,X=R.fillTint,U=R.strokeTint,z=0,V=0,W=0,H=2*Math.PI,j=[],q=0,Z=!0,K=null,$=b.getTintAppendFloatAlpha,tt=0;tt<N.length;tt++)switch(N[tt]){case a.BEGIN_PATH:j.length=0,K=null,Z=!0;break;case a.CLOSE_PATH:Z=!1,K&&K.points.length&&K.points.push(K.points[0]);break;case a.FILL_PATH:for(q=0;q<j.length;q++)R.batchFillPath(j[q].points,B,O);break;case a.STROKE_PATH:for(q=0;q<j.length;q++)R.batchStrokePath(j[q].points,G,Z,B,O);break;case a.LINE_STYLE:G=N[++tt];var et=$(N[++tt],N[++tt]*Y);U.TL=et,U.TR=et,U.BL=et,U.BR=et;break;case a.FILL_STYLE:var it=$(N[++tt],N[++tt]*Y);X.TL=it,X.TR=it,X.BL=it,X.BR=it;break;case a.GRADIENT_FILL_STYLE:var nt=N[++tt]*Y,rt=N[++tt]*Y,st=N[++tt]*Y,ot=N[++tt]*Y;X.TL=$(N[++tt],nt),X.TR=$(N[++tt],rt),X.BL=$(N[++tt],st),X.BR=$(N[++tt],ot);break;case a.GRADIENT_LINE_STYLE:G=N[++tt];var at=N[++tt]*Y;U.TL=$(N[++tt],at),U.TR=$(N[++tt],at),U.BL=$(N[++tt],at),U.BR=$(N[++tt],at);break;case a.ARC:var ht=0,lt=N[++tt],ut=N[++tt],ct=N[++tt],dt=N[++tt],ft=N[++tt],pt=N[++tt],gt=N[++tt];for(ft-=dt,pt?ft<-H?ft=-H:ft>0&&(ft=ft%H-H):ft>H?ft=H:ft<0&&(ft=H+ft%H),null===K&&(K=new C(lt+Math.cos(dt)*ct,ut+Math.sin(dt)*ct,G),j.push(K),ht+=.01);ht<1+gt;)W=ft*ht+dt,z=lt+Math.cos(W)*ct,V=ut+Math.sin(W)*ct,K.points.push(new S(z,V,G)),ht+=.01;W=ft+dt,z=lt+Math.cos(W)*ct,V=ut+Math.sin(W)*ct,K.points.push(new S(z,V,G));break;case a.FILL_RECT:R.batchFillRect(N[++tt],N[++tt],N[++tt],N[++tt],B,O);break;case a.FILL_TRIANGLE:R.batchFillTriangle(N[++tt],N[++tt],N[++tt],N[++tt],N[++tt],N[++tt],B,O);break;case a.STROKE_TRIANGLE:R.batchStrokeTriangle(N[++tt],N[++tt],N[++tt],N[++tt],N[++tt],N[++tt],G,B,O);break;case a.LINE_TO:null!==K?K.points.push(new S(N[++tt],N[++tt],G)):(K=new C(N[++tt],N[++tt],G),j.push(K));break;case a.MOVE_TO:K=new C(N[++tt],N[++tt],G),j.push(K);break;case a.SAVE:M.push(B.copyToArray());break;case a.RESTORE:B.copyFromArray(M.pop());break;case a.TRANSLATE:lt=N[++tt],ut=N[++tt],B.translate(lt,ut);break;case a.SCALE:lt=N[++tt],ut=N[++tt],B.scale(lt,ut);break;case a.ROTATE:B.rotate(N[++tt])}t.pipelines.postBatch(i)}}},function(t,i,o){var a=o(1),u=o(1);a=o(1066),u=o(1067),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i){t.exports=function SpriteWebGLRenderer(t,i,o,a){o.addToRenderList(i),i.pipeline.batchSprite(i,o,a)}},function(t,i){t.exports=function SpriteCanvasRenderer(t,i,o,a){o.addToRenderList(i),t.batchSprite(i,i.frame,o,a)}},function(t,i,o){var a=o(1),u=o(1);a=o(1069),u=o(1070),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i){t.exports=function ImageWebGLRenderer(t,i,o,a){o.addToRenderList(i),this.pipeline.batchSprite(i,o,a)}},function(t,i){t.exports=function ImageCanvasRenderer(t,i,o,a){o.addToRenderList(i),t.batchSprite(i,i.frame,o,a)}},function(t,i,o){var a=o(1),u=o(1);a=o(1072),u=o(1073),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i){t.exports=function LayerWebGLRenderer(t,i,o){var a=i.list,u=a.length;if(0!==u){i.depthSort(),t.pipelines.preBatch(i);var d=-1!==i.blendMode;d||t.setBlendMode(0);for(var b=i.alpha,S=0;S<u;S++){var C=a[S];if(C.willRender(o)){var M,P,R,O;if(void 0!==C.alphaTopLeft)M=C.alphaTopLeft,P=C.alphaTopRight,R=C.alphaBottomLeft,O=C.alphaBottomRight;else{var B=C.alpha;M=B,P=B,R=B,O=B}d||C.blendMode===t.currentBlendMode||t.setBlendMode(C.blendMode);var N=C.mask;N&&N.preRenderWebGL(t,C,o);var Y=C.type;Y!==t.currentType&&(t.newType=!0,t.currentType=Y),t.nextTypeMatch=S<u-1&&a[S+1].type===t.currentType,C.setAlpha(M*b,P*b,R*b,O*b),C.renderWebGL(t,C,o),C.setAlpha(M,P,R,O),N&&N.postRenderWebGL(t,o),t.newType=!1}}t.pipelines.postBatch(i)}}},function(t,i){t.exports=function LayerCanvasRenderer(t,i,o){var a=i.list;if(0!==a.length){i.depthSort();var u=-1!==i.blendMode;u||t.setBlendMode(0);var d=i._alpha;i.mask&&i.mask.preRenderCanvas(t,null,o);for(var b=0;b<a.length;b++){var S=a[b];if(S.willRender(o)){var C=S.alpha;u||S.blendMode===t.currentBlendMode||t.setBlendMode(S.blendMode),S.setAlpha(C*d),S.renderCanvas(t,S,o),S.setAlpha(C)}}i.mask&&i.mask.postRenderCanvas(t)}}},function(t,i,o){t.exports={EmitterOp:o(449),GravityWell:o(450),Particle:o(451),ParticleEmitter:o(452),ParticleEmitterManager:o(220),Zones:o(1078)}},function(t,i,o){var a=o(1),u=o(1);a=o(1076),u=o(1077),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i,o){var a=o(25),u=o(12),d=new a,b=new a,S=new a,C=new a;t.exports=function ParticleManagerWebGLRenderer(t,i,o,a){var M=i.emitters.list,P=M.length;if(0!==P){var R=t.pipelines.set(i.pipeline),O=d,B=b,N=S,Y=C;a?(Y.loadIdentity(),Y.multiply(a),Y.translate(i.x,i.y),Y.rotate(i.rotation),Y.scale(i.scaleX,i.scaleY)):Y.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY);var G=o.roundPixels,X=i.defaultFrame.glTexture,U=u.getTintAppendFloatAlpha,z=R.setGameObject(i,i.defaultFrame);t.pipelines.preBatch(i);for(var V=0;V<P;V++){var W=M[V],H=W.alive,j=H.length;if(W.visible&&0!==j){o.addToRenderList(W);var q=W.scrollFactorX,Z=W.scrollFactorY;t.setBlendMode(W.blendMode),W.mask&&(W.mask.preRenderWebGL(t,W,o),t.pipelines.set(i.pipeline));for(var K=0;K<j;K++){var $=H[K],tt=$.alpha*o.alpha;if(!(tt<=0)){N.applyITRS($.x,$.y,$.rotation,$.scaleX,$.scaleY),O.copyFrom(o.matrix),O.multiplyWithOffset(Y,-o.scrollX*q,-o.scrollY*Z),N.e=$.x,N.f=$.y,O.multiply(N,B);var et=$.frame,it=-et.halfWidth,nt=-et.halfHeight,rt=it+et.width,st=nt+et.height,ot=B.getXRound(it,nt,G),at=B.getYRound(it,nt,G),ht=B.getXRound(it,st,G),lt=B.getYRound(it,st,G),ut=B.getXRound(rt,st,G),ct=B.getYRound(rt,st,G),dt=B.getXRound(rt,nt,G),ft=B.getYRound(rt,nt,G),pt=U($.tint,tt);R.batchQuad(W,ot,at,ht,lt,ut,ct,dt,ft,et.u0,et.v0,et.u1,et.v1,pt,pt,pt,pt,0,X,z)}}W.mask&&W.mask.postRenderWebGL(t,o)}}t.pipelines.postBatch(i)}}},function(t,i,o){var a=o(25),u=new a,d=new a,b=new a,S=new a;t.exports=function ParticleManagerCanvasRenderer(t,i,o,a){var C=i.emitters.list,M=C.length;if(0!==M){var P=u.copyFrom(o.matrix),R=d,O=b,B=S;a?(B.loadIdentity(),B.multiply(a),B.translate(i.x,i.y),B.rotate(i.rotation),B.scale(i.scaleX,i.scaleY)):B.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY);for(var N=t.currentContext,Y=o.roundPixels,G=0;G<M;G++){var X=C[G],U=X.alive,z=U.length;if(X.visible&&0!==z){o.addToRenderList(X);var V=X.scrollFactorX,W=X.scrollFactorY;N.save(),N.globalCompositeOperation=t.blendModes[X.blendMode];for(var H=0;H<z;H++){var j=U[H],q=j.alpha*o.alpha;if(!(q<=0)){O.applyITRS(j.x,j.y,j.rotation,j.scaleX,j.scaleY),P.copyFrom(o.matrix),P.multiplyWithOffset(B,-o.scrollX*V,-o.scrollY*W),O.e=j.x,O.f=j.y,P.multiply(O,R);var Z=j.frame,K=Z.canvasData,$=-Z.halfWidth,tt=-Z.halfHeight;N.globalAlpha=q,N.save(),R.setToContext(N),Y&&($=Math.round($),tt=Math.round(tt)),N.imageSmoothingEnabled=!(!t.antialias||Z.source.scaleMode),N.drawImage(Z.source.image,K.x,K.y,K.width,K.height,$,tt,K.width,K.height),N.restore()}}N.restore()}}}}},function(t,i,o){t.exports={DeathZone:o(453),EdgeZone:o(454),RandomZone:o(456)}},function(t,i,o){var a=o(1),u=o(1);a=o(1080),u=o(1081),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i,o){var a=o(12);t.exports=function RenderTextureWebGLRenderer(t,i,o,u){o.addToRenderList(i);var d=o.alpha,b=i.renderTarget,S=b.width,C=b.height,M=a.getTintAppendFloatAlpha,P=t.pipelines.set(i.pipeline),R=P.setTexture2D(b.texture);t.pipelines.preBatch(i),P.batchTexture(i,b.texture,S,C,i.x,i.y,S,C,i.scaleX,i.scaleY,i.rotation,i.flipX,!i.flipY,i.scrollFactorX,i.scrollFactorY,i.displayOriginX,i.displayOriginY,0,0,S,C,M(i.tintTopLeft,d*i._alphaTL),M(i.tintTopRight,d*i._alphaTR),M(i.tintBottomLeft,d*i._alphaBL),M(i.tintBottomRight,d*i._alphaBR),i.tintFill,0,0,o,u,!0,R),t.resetTextures(),t.pipelines.postBatch(i)}},function(t,i){t.exports=function RenderTextureCanvasRenderer(t,i,o,a){o.addToRenderList(i),t.batchSprite(i,i.frame,o,a)}},function(t,i,o){var a=o(1083),u=o(17),d={Parse:o(1084)};d=u(!1,d,a),t.exports=d},function(t,i){t.exports={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:"ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",TEXT_SET7:"AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:"ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789"}},function(t,i,o){var a=o(6);t.exports=function ParseRetroFont(t,i){var o=i.width,u=i.height,d=Math.floor(o/2),b=Math.floor(u/2),S=a(i,"chars","");if(""!==S){var C=a(i,"image",""),M=t.sys.textures.getFrame(C),P=M.cutX,R=M.cutY,O=M.source.width,B=M.source.height,N=a(i,"offset.x",0),Y=a(i,"offset.y",0),G=a(i,"spacing.x",0),X=a(i,"spacing.y",0),U=a(i,"lineSpacing",0),z=a(i,"charsPerRow",null);null===z&&(z=O/o)>S.length&&(z=S.length);for(var V=N,W=Y,H={retroFont:!0,font:C,size:o,lineHeight:u+U,chars:{}},j=0,q=0;q<S.length;q++){var Z=S.charCodeAt(q),K=(P+V)/O,$=(R+W)/B,tt=(P+V+o)/O,et=(R+W+u)/B;H.chars[Z]={x:V,y:W,width:o,height:u,centerX:d,centerY:b,xOffset:0,yOffset:0,xAdvance:o,data:{},kerning:{},u0:K,v0:$,u1:tt,v1:et},++j===z?(j=0,V=N,W+=u+X):V+=o+G}return{data:H,frame:null,texture:C}}}},function(t,i,o){var a=o(1),u=o(1);a=o(1086),u=o(1087),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i,o){var a=o(19),u=o(12);t.exports=function RopeWebGLRenderer(t,i,o,d){o.addToRenderList(i);var b=t.pipelines.set(i.pipeline,i),S=a(i,o,d).calc,C=i.vertices,M=i.uv,P=i.colors,R=i.alphas,O=i.alpha,B=u.getTintAppendFloatAlpha,N=o.roundPixels,Y=C.length,G=Math.floor(.5*Y);b.flush(),t.pipelines.preBatch(i);var X=b.setGameObject(i),U=b.vertexViewF32,z=b.vertexViewU32,V=b.vertexCount*b.currentShader.vertexComponentCount-1,W=0,H=i.tintFill;i.dirty&&i.updateVertices();for(var j=i.debugCallback,q=[],Z=0;Z<Y;Z+=2){var K=C[Z+0],$=C[Z+1],tt=K*S.a+$*S.c+S.e,et=K*S.b+$*S.d+S.f;N&&(tt=Math.round(tt),et=Math.round(et)),U[++V]=tt,U[++V]=et,U[++V]=M[Z+0],U[++V]=M[Z+1],U[++V]=X,U[++V]=H,z[++V]=B(P[W],o.alpha*(R[W]*O)),W++,j&&(q[Z+0]=tt,q[Z+1]=et)}j&&j.call(i,i,Y,q),b.vertexCount+=G,t.pipelines.postBatch(i)}},function(t,i){t.exports=function RopeCanvasRenderer(){}},function(t,i,o){var a=o(1),u=o(1);a=o(1089),u=o(1090),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i,o){var a=o(12);t.exports=function TextWebGLRenderer(t,i,o,u){if(0!==i.width&&0!==i.height){o.addToRenderList(i);var d=i.frame,b=d.width,S=d.height,C=a.getTintAppendFloatAlpha,M=t.pipelines.set(i.pipeline,i),P=M.setTexture2D(d.glTexture,i);t.pipelines.preBatch(i),M.batchTexture(i,d.glTexture,b,S,i.x,i.y,b/i.style.resolution,S/i.style.resolution,i.scaleX,i.scaleY,i.rotation,i.flipX,i.flipY,i.scrollFactorX,i.scrollFactorY,i.displayOriginX,i.displayOriginY,0,0,b,S,C(i.tintTopLeft,o.alpha*i._alphaTL),C(i.tintTopRight,o.alpha*i._alphaTR),C(i.tintBottomLeft,o.alpha*i._alphaBL),C(i.tintBottomRight,o.alpha*i._alphaBR),i.tintFill,0,0,o,u,!1,P),t.pipelines.postBatch(i)}}},function(t,i){t.exports=function TextCanvasRenderer(t,i,o,a){0!==i.width&&0!==i.height&&(o.addToRenderList(i),t.batchSprite(i,i.frame,o,a))}},function(t,i,o){var a=o(1),u=o(1);a=o(1092),u=o(1093),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i,o){var a=o(12);t.exports=function TileSpriteWebGLRenderer(t,i,o,u){i.updateCanvas();var d=i.width,b=i.height;if(0!==d&&0!==b){o.addToRenderList(i),t.pipelines.preBatch(i);var S=a.getTintAppendFloatAlpha,C=t.pipelines.set(i.pipeline,i),M=C.setTexture2D(i.fillPattern,i);C.batchTexture(i,i.fillPattern,i.displayFrame.width*i.tileScaleX,i.displayFrame.height*i.tileScaleY,i.x,i.y,d,b,i.scaleX,i.scaleY,i.rotation,i.flipX,i.flipY,i.scrollFactorX,i.scrollFactorY,i.originX*d,i.originY*b,0,0,d,b,S(i.tintTopLeft,o.alpha*i._alphaTL),S(i.tintTopRight,o.alpha*i._alphaTR),S(i.tintBottomLeft,o.alpha*i._alphaBL),S(i.tintBottomRight,o.alpha*i._alphaBR),i.tintFill,i.tilePositionX%i.displayFrame.width/i.displayFrame.width,i.tilePositionY%i.displayFrame.height/i.displayFrame.height,o,u,!1,M),t.pipelines.postBatch(i)}}},function(t,i){t.exports=function TileSpriteCanvasRenderer(t,i,o,a){i.updateCanvas(),o.addToRenderList(i),t.batchSprite(i,i.frame,o,a)}},function(t,i,o){var a=o(1),u=o(1);a=o(1095),u=o(1096),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i){t.exports=function VideoWebGLRenderer(t,i,o,a){i.videoTexture&&(o.addToRenderList(i),i.pipeline.batchSprite(i,o,a))}},function(t,i){t.exports=function VideoCanvasRenderer(t,i,o,a){i.videoTexture&&(o.addToRenderList(i),t.batchSprite(i,i.frame,o,a))}},function(t,i,o){var a=o(1),u=o(1);a=o(1098),u=o(1099),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i,o){var a=o(19),u=o(114),d=o(81);t.exports=function ArcWebGLRenderer(t,i,o,b){o.addToRenderList(i);var S=t.pipelines.set(i.pipeline),C=a(i,o,b),M=S.calcMatrix.copyFrom(C.calc),P=i._displayOriginX,R=i._displayOriginY,O=o.alpha*i.alpha;t.pipelines.preBatch(i),i.isFilled&&u(S,M,i,O,P,R),i.isStroked&&d(S,i,O,P,R),t.pipelines.postBatch(i)}},function(t,i,o){var a=o(36),u=o(48),d=o(60),b=o(30);t.exports=function ArcCanvasRenderer(t,i,o,S){o.addToRenderList(i);var C=t.currentContext;if(b(t,C,i,o,S)){var M=i.radius;C.beginPath(),C.arc(M-i.originX*(2*M),M-i.originY*(2*M),M,a(i._startAngle),a(i._endAngle),i.anticlockwise),i.closePath&&C.closePath(),i.isFilled&&(u(C,i),C.fill()),i.isStroked&&(d(C,i),C.stroke()),C.restore()}}},function(t,i,o){var a=o(1),u=o(1);a=o(1101),u=o(1102),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i,o){var a=o(114),u=o(19),d=o(81);t.exports=function CurveWebGLRenderer(t,i,o,b){o.addToRenderList(i);var S=t.pipelines.set(i.pipeline),C=u(i,o,b),M=S.calcMatrix.copyFrom(C.calc),P=i._displayOriginX+i._curveBounds.x,R=i._displayOriginY+i._curveBounds.y,O=o.alpha*i.alpha;t.pipelines.preBatch(i),i.isFilled&&a(S,M,i,O,P,R),i.isStroked&&d(S,i,O,P,R),t.pipelines.postBatch(i)}},function(t,i,o){var a=o(48),u=o(60),d=o(30);t.exports=function CurveCanvasRenderer(t,i,o,b){o.addToRenderList(i);var S=t.currentContext;if(d(t,S,i,o,b)){var C=i._displayOriginX+i._curveBounds.x,M=i._displayOriginY+i._curveBounds.y,P=i.pathData,R=P.length-1,O=P[0]-C,B=P[1]-M;S.beginPath(),S.moveTo(O,B),i.closePath||(R-=2);for(var N=2;N<R;N+=2){var Y=P[N]-C,G=P[N+1]-M;S.lineTo(Y,G)}i.closePath&&S.closePath(),i.isFilled&&(a(S,i),S.fill()),i.isStroked&&(u(S,i),S.stroke()),S.restore()}}},function(t,i,o){var a=o(1),u=o(1);a=o(1104),u=o(1105),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i,o){var a=o(114),u=o(19),d=o(81);t.exports=function EllipseWebGLRenderer(t,i,o,b){o.addToRenderList(i);var S=t.pipelines.set(i.pipeline),C=u(i,o,b),M=S.calcMatrix.copyFrom(C.calc),P=i._displayOriginX,R=i._displayOriginY,O=o.alpha*i.alpha;t.pipelines.preBatch(i),i.isFilled&&a(S,M,i,O,P,R),i.isStroked&&d(S,i,O,P,R),t.pipelines.postBatch(i)}},function(t,i,o){var a=o(48),u=o(60),d=o(30);t.exports=function EllipseCanvasRenderer(t,i,o,b){o.addToRenderList(i);var S=t.currentContext;if(d(t,S,i,o,b)){var C=i._displayOriginX,M=i._displayOriginY,P=i.pathData,R=P.length-1,O=P[0]-C,B=P[1]-M;S.beginPath(),S.moveTo(O,B),i.closePath||(R-=2);for(var N=2;N<R;N+=2){var Y=P[N]-C,G=P[N+1]-M;S.lineTo(Y,G)}S.closePath(),i.isFilled&&(a(S,i),S.fill()),i.isStroked&&(u(S,i),S.stroke()),S.restore()}}},function(t,i,o){var a=o(1),u=o(1);a=o(1107),u=o(1108),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i,o){var a=o(19),u=o(12);t.exports=function GridWebGLRenderer(t,i,o,d){o.addToRenderList(i);var b=t.pipelines.set(i.pipeline),S=a(i,o,d);b.calcMatrix.copyFrom(S.calc).translate(-i._displayOriginX,-i._displayOriginY);var C,M,P=o.alpha*i.alpha,R=i.width,O=i.height,B=i.cellWidth,N=i.cellHeight,Y=Math.ceil(R/B),G=Math.ceil(O/N),X=B,U=N,z=B-(Y*B-R),V=N-(G*N-O),W=i.showCells,H=i.showAltCells,j=i.showOutline,q=0,Z=0,K=0,$=0,tt=0;if(j&&(X--,U--,z===B&&z--,V===N&&V--),t.pipelines.preBatch(i),W&&i.fillAlpha>0)for(C=b.fillTint,M=u.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*P),C.TL=M,C.TR=M,C.BL=M,C.BR=M,Z=0;Z<G;Z++)for(H&&(K=Z%2),q=0;q<Y;q++)H&&K?K=0:(K++,$=q<Y-1?X:z,tt=Z<G-1?U:V,b.batchFillRect(q*B,Z*N,$,tt));if(H&&i.altFillAlpha>0)for(C=b.fillTint,M=u.getTintAppendFloatAlpha(i.altFillColor,i.altFillAlpha*P),C.TL=M,C.TR=M,C.BL=M,C.BR=M,Z=0;Z<G;Z++)for(H&&(K=Z%2),q=0;q<Y;q++)!H||K?(K=0,$=q<Y-1?X:z,tt=Z<G-1?U:V,b.batchFillRect(q*B,Z*N,$,tt)):K=1;if(j&&i.outlineFillAlpha>0){var et=b.strokeTint,it=u.getTintAppendFloatAlpha(i.outlineFillColor,i.outlineFillAlpha*P);for(et.TL=it,et.TR=it,et.BL=it,et.BR=it,q=1;q<Y;q++){var nt=q*B;b.batchLine(nt,0,nt,O,1,1,1,0,!1)}for(Z=1;Z<G;Z++){var rt=Z*N;b.batchLine(0,rt,R,rt,1,1,1,0,!1)}}t.pipelines.postBatch(i)}},function(t,i,o){var a=o(48),u=o(60),d=o(30);t.exports=function GridCanvasRenderer(t,i,o,b){o.addToRenderList(i);var S=t.currentContext;if(d(t,S,i,o,b)){var C=-i._displayOriginX,M=-i._displayOriginY,P=o.alpha*i.alpha,R=i.width,O=i.height,B=i.cellWidth,N=i.cellHeight,Y=Math.ceil(R/B),G=Math.ceil(O/N),X=B,U=N,z=B-(Y*B-R),V=N-(G*N-O),W=i.showCells,H=i.showAltCells,j=i.showOutline,q=0,Z=0,K=0,$=0,tt=0;if(j&&(X--,U--,z===B&&z--,V===N&&V--),W&&i.fillAlpha>0)for(a(S,i),Z=0;Z<G;Z++)for(H&&(K=Z%2),q=0;q<Y;q++)H&&K?K=0:(K++,$=q<Y-1?X:z,tt=Z<G-1?U:V,S.fillRect(C+q*B,M+Z*N,$,tt));if(H&&i.altFillAlpha>0)for(a(S,i,i.altFillColor,i.altFillAlpha*P),Z=0;Z<G;Z++)for(H&&(K=Z%2),q=0;q<Y;q++)!H||K?(K=0,$=q<Y-1?X:z,tt=Z<G-1?U:V,S.fillRect(C+q*B,M+Z*N,$,tt)):K=1;if(j&&i.outlineFillAlpha>0){for(u(S,i,i.outlineFillColor,i.outlineFillAlpha*P),q=1;q<Y;q++){var et=q*B;S.beginPath(),S.moveTo(et+C,M),S.lineTo(et+C,O+M),S.stroke()}for(Z=1;Z<G;Z++){var it=Z*N;S.beginPath(),S.moveTo(C,it+M),S.lineTo(C+R,it+M),S.stroke()}}S.restore()}}},function(t,i,o){var a=o(1),u=o(1);a=o(1110),u=o(1111),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i,o){var a=o(19),u=o(12);t.exports=function IsoBoxWebGLRenderer(t,i,o,d){o.addToRenderList(i);var b,S,C,M,P,R,O,B,N,Y=t.pipelines.set(i.pipeline),G=a(i,o,d),X=Y.calcMatrix.copyFrom(G.calc),U=i.width,z=i.height,V=U/2,W=U/i.projection,H=o.alpha*i.alpha;i.isFilled&&(t.pipelines.preBatch(i),i.showTop&&(b=u.getTintAppendFloatAlpha(i.fillTop,H),S=X.getX(-V,-z),C=X.getY(-V,-z),M=X.getX(0,-W-z),P=X.getY(0,-W-z),R=X.getX(V,-z),O=X.getY(V,-z),B=X.getX(0,W-z),N=X.getY(0,W-z),Y.batchQuad(i,S,C,M,P,R,O,B,N,0,0,1,1,b,b,b,b,2)),i.showLeft&&(b=u.getTintAppendFloatAlpha(i.fillLeft,H),S=X.getX(-V,0),C=X.getY(-V,0),M=X.getX(0,W),P=X.getY(0,W),R=X.getX(0,W-z),O=X.getY(0,W-z),B=X.getX(-V,-z),N=X.getY(-V,-z),Y.batchQuad(i,S,C,M,P,R,O,B,N,0,0,1,1,b,b,b,b,2)),i.showRight&&(b=u.getTintAppendFloatAlpha(i.fillRight,H),S=X.getX(V,0),C=X.getY(V,0),M=X.getX(0,W),P=X.getY(0,W),R=X.getX(0,W-z),O=X.getY(0,W-z),B=X.getX(V,-z),N=X.getY(V,-z),Y.batchQuad(i,S,C,M,P,R,O,B,N,0,0,1,1,b,b,b,b,2)),t.pipelines.postBatch(i))}},function(t,i,o){var a=o(48),u=o(30);t.exports=function IsoBoxCanvasRenderer(t,i,o,d){o.addToRenderList(i);var b=t.currentContext;if(u(t,b,i,o,d)&&i.isFilled){var S=i.width,C=i.height,M=S/2,P=S/i.projection;i.showTop&&(a(b,i,i.fillTop),b.beginPath(),b.moveTo(-M,-C),b.lineTo(0,-P-C),b.lineTo(M,-C),b.lineTo(M,-1),b.lineTo(0,P-1),b.lineTo(-M,-1),b.lineTo(-M,-C),b.fill()),i.showLeft&&(a(b,i,i.fillLeft),b.beginPath(),b.moveTo(-M,0),b.lineTo(0,P),b.lineTo(0,P-C),b.lineTo(-M,-C),b.lineTo(-M,0),b.fill()),i.showRight&&(a(b,i,i.fillRight),b.beginPath(),b.moveTo(M,0),b.lineTo(0,P),b.lineTo(0,P-C),b.lineTo(M,-C),b.lineTo(M,0),b.fill()),b.restore()}}},function(t,i,o){var a=o(1),u=o(1);a=o(1113),u=o(1114),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i,o){var a=o(19),u=o(12);t.exports=function IsoTriangleWebGLRenderer(t,i,o,d){o.addToRenderList(i);var b=t.pipelines.set(i.pipeline),S=a(i,o,d),C=b.calcMatrix.copyFrom(S.calc),M=i.width,P=i.height,R=M/2,O=M/i.projection,B=i.isReversed,N=o.alpha*i.alpha;if(i.isFilled){var Y,G,X,U,z,V,W;if(t.pipelines.preBatch(i),i.showTop&&B){Y=u.getTintAppendFloatAlpha(i.fillTop,N),G=C.getX(-R,-P),X=C.getY(-R,-P),U=C.getX(0,-O-P),z=C.getY(0,-O-P),V=C.getX(R,-P),W=C.getY(R,-P);var H=C.getX(0,O-P),j=C.getY(0,O-P);b.batchQuad(i,G,X,U,z,V,W,H,j,0,0,1,1,Y,Y,Y,Y,2)}i.showLeft&&(Y=u.getTintAppendFloatAlpha(i.fillLeft,N),B?(G=C.getX(-R,-P),X=C.getY(-R,-P),U=C.getX(0,O),z=C.getY(0,O),V=C.getX(0,O-P),W=C.getY(0,O-P)):(G=C.getX(-R,0),X=C.getY(-R,0),U=C.getX(0,O),z=C.getY(0,O),V=C.getX(0,O-P),W=C.getY(0,O-P)),b.batchTri(i,G,X,U,z,V,W,0,0,1,1,Y,Y,Y,2)),i.showRight&&(Y=u.getTintAppendFloatAlpha(i.fillRight,N),B?(G=C.getX(R,-P),X=C.getY(R,-P),U=C.getX(0,O),z=C.getY(0,O),V=C.getX(0,O-P),W=C.getY(0,O-P)):(G=C.getX(R,0),X=C.getY(R,0),U=C.getX(0,O),z=C.getY(0,O),V=C.getX(0,O-P),W=C.getY(0,O-P)),b.batchTri(i,G,X,U,z,V,W,0,0,1,1,Y,Y,Y,2)),t.pipelines.postBatch(i)}}},function(t,i,o){var a=o(48),u=o(30);t.exports=function IsoTriangleCanvasRenderer(t,i,o,d){o.addToRenderList(i);var b=t.currentContext;if(u(t,b,i,o,d)&&i.isFilled){var S=i.width,C=i.height,M=S/2,P=S/i.projection,R=i.isReversed;i.showTop&&R&&(a(b,i,i.fillTop),b.beginPath(),b.moveTo(-M,-C),b.lineTo(0,-P-C),b.lineTo(M,-C),b.lineTo(0,P-C),b.fill()),i.showLeft&&(a(b,i,i.fillLeft),b.beginPath(),R?(b.moveTo(-M,-C),b.lineTo(0,P),b.lineTo(0,P-C)):(b.moveTo(-M,0),b.lineTo(0,P),b.lineTo(0,P-C)),b.fill()),i.showRight&&(a(b,i,i.fillRight),b.beginPath(),R?(b.moveTo(M,-C),b.lineTo(0,P),b.lineTo(0,P-C)):(b.moveTo(M,0),b.lineTo(0,P),b.lineTo(0,P-C)),b.fill()),b.restore()}}},function(t,i,o){var a=o(1),u=o(1);a=o(1116),u=o(1117),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i,o){var a=o(19),u=o(12);t.exports=function LineWebGLRenderer(t,i,o,d){o.addToRenderList(i);var b=t.pipelines.set(i.pipeline),S=a(i,o,d);b.calcMatrix.copyFrom(S.calc);var C=i._displayOriginX,M=i._displayOriginY,P=o.alpha*i.alpha;if(t.pipelines.preBatch(i),i.isStroked){var R=b.strokeTint,O=u.getTintAppendFloatAlpha(i.strokeColor,i.strokeAlpha*P);R.TL=O,R.TR=O,R.BL=O,R.BR=O;var B=i._startWidth,N=i._endWidth;b.batchLine(i.geom.x1-C,i.geom.y1-M,i.geom.x2-C,i.geom.y2-M,B,N,1,0,!1,S.sprite,S.camera)}t.pipelines.postBatch(i)}},function(t,i,o){var a=o(60),u=o(30);t.exports=function LineCanvasRenderer(t,i,o,d){o.addToRenderList(i);var b=t.currentContext;if(u(t,b,i,o,d)){var S=i._displayOriginX,C=i._displayOriginY;i.isStroked&&(a(b,i),b.beginPath(),b.moveTo(i.geom.x1-S,i.geom.y1-C),b.lineTo(i.geom.x2-S,i.geom.y2-C),b.stroke()),b.restore()}}},function(t,i,o){var a=o(1),u=o(1);a=o(1119),u=o(1120),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i,o){var a=o(114),u=o(19),d=o(81);t.exports=function PolygonWebGLRenderer(t,i,o,b){o.addToRenderList(i);var S=t.pipelines.set(i.pipeline),C=u(i,o,b),M=S.calcMatrix.copyFrom(C.calc),P=i._displayOriginX,R=i._displayOriginY,O=o.alpha*i.alpha;t.pipelines.preBatch(i),i.isFilled&&a(S,M,i,O,P,R),i.isStroked&&d(S,i,O,P,R),t.pipelines.postBatch(i)}},function(t,i,o){var a=o(48),u=o(60),d=o(30);t.exports=function PolygonCanvasRenderer(t,i,o,b){o.addToRenderList(i);var S=t.currentContext;if(d(t,S,i,o,b)){var C=i._displayOriginX,M=i._displayOriginY,P=i.pathData,R=P.length-1,O=P[0]-C,B=P[1]-M;S.beginPath(),S.moveTo(O,B),i.closePath||(R-=2);for(var N=2;N<R;N+=2){var Y=P[N]-C,G=P[N+1]-M;S.lineTo(Y,G)}S.closePath(),i.isFilled&&(a(S,i),S.fill()),i.isStroked&&(u(S,i),S.stroke()),S.restore()}}},function(t,i,o){var a=o(1),u=o(1);a=o(1122),u=o(1123),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i,o){var a=o(19),u=o(81),d=o(12);t.exports=function RectangleWebGLRenderer(t,i,o,b){o.addToRenderList(i);var S=t.pipelines.set(i.pipeline),C=a(i,o,b);S.calcMatrix.copyFrom(C.calc);var M=i._displayOriginX,P=i._displayOriginY,R=o.alpha*i.alpha;if(t.pipelines.preBatch(i),i.isFilled){var O=S.fillTint,B=d.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*R);O.TL=B,O.TR=B,O.BL=B,O.BR=B,S.batchFillRect(-M,-P,i.width,i.height)}i.isStroked&&u(S,i,R,M,P),t.pipelines.postBatch(i)}},function(t,i,o){var a=o(48),u=o(60),d=o(30);t.exports=function RectangleCanvasRenderer(t,i,o,b){o.addToRenderList(i);var S=t.currentContext;if(d(t,S,i,o,b)){var C=i._displayOriginX,M=i._displayOriginY;i.isFilled&&(a(S,i),S.fillRect(-C,-M,i.width,i.height)),i.isStroked&&(u(S,i),S.beginPath(),S.rect(-C,-M,i.width,i.height),S.stroke()),S.restore()}}},function(t,i,o){var a=o(1),u=o(1);a=o(1125),u=o(1126),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i,o){var a=o(114),u=o(19),d=o(81);t.exports=function StarWebGLRenderer(t,i,o,b){o.addToRenderList(i);var S=t.pipelines.set(i.pipeline),C=u(i,o,b),M=S.calcMatrix.copyFrom(C.calc),P=i._displayOriginX,R=i._displayOriginY,O=o.alpha*i.alpha;t.pipelines.preBatch(i),i.isFilled&&a(S,M,i,O,P,R),i.isStroked&&d(S,i,O,P,R),t.pipelines.postBatch(i)}},function(t,i,o){var a=o(48),u=o(60),d=o(30);t.exports=function StarCanvasRenderer(t,i,o,b){o.addToRenderList(i);var S=t.currentContext;if(d(t,S,i,o,b)){var C=i._displayOriginX,M=i._displayOriginY,P=i.pathData,R=P.length-1,O=P[0]-C,B=P[1]-M;S.beginPath(),S.moveTo(O,B),i.closePath||(R-=2);for(var N=2;N<R;N+=2){var Y=P[N]-C,G=P[N+1]-M;S.lineTo(Y,G)}S.closePath(),i.isFilled&&(a(S,i),S.fill()),i.isStroked&&(u(S,i),S.stroke()),S.restore()}}},function(t,i,o){var a=o(1),u=o(1);a=o(1128),u=o(1129),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i,o){var a=o(19),u=o(81),d=o(12);t.exports=function TriangleWebGLRenderer(t,i,o,b){o.addToRenderList(i);var S=t.pipelines.set(i.pipeline),C=a(i,o,b);S.calcMatrix.copyFrom(C.calc);var M=i._displayOriginX,P=i._displayOriginY,R=o.alpha*i.alpha;if(t.pipelines.preBatch(i),i.isFilled){var O=S.fillTint,B=d.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*R);O.TL=B,O.TR=B,O.BL=B,O.BR=B;var N=i.geom.x1-M,Y=i.geom.y1-P,G=i.geom.x2-M,X=i.geom.y2-P,U=i.geom.x3-M,z=i.geom.y3-P;S.batchFillTriangle(N,Y,G,X,U,z,C.sprite,C.camera)}i.isStroked&&u(S,i,R,M,P),t.pipelines.postBatch(i)}},function(t,i,o){var a=o(48),u=o(60),d=o(30);t.exports=function TriangleCanvasRenderer(t,i,o,b){o.addToRenderList(i);var S=t.currentContext;if(d(t,S,i,o,b)){var C=i._displayOriginX,M=i._displayOriginY,P=i.geom.x1-C,R=i.geom.y1-M,O=i.geom.x2-C,B=i.geom.y2-M,N=i.geom.x3-C,Y=i.geom.y3-M;S.beginPath(),S.moveTo(P,R),S.lineTo(O,B),S.lineTo(N,Y),S.closePath(),i.isFilled&&(a(S,i),S.fill()),i.isStroked&&(u(S,i),S.stroke()),S.restore()}}},function(t,i,o){var a=o(213);o(5).register("blitter",(function(t,i,o,u){return this.displayList.add(new a(this.scene,t,i,o,u))}))},function(t,i,o){var a=o(214);o(5).register("container",(function(t,i,o){return this.displayList.add(new a(this.scene,t,i,o))}))},function(t,i,o){var a=o(442);o(5).register("dom",(function(t,i,o,u,d){var b=new a(this.scene,t,i,o,u,d);return this.displayList.add(b),b}))},function(t,i,o){var a=o(215);o(5).register("dynamicBitmapText",(function(t,i,o,u,d){return this.displayList.add(new a(this.scene,t,i,o,u,d))}))},function(t,i,o){var a=o(444);o(5).register("extern",(function(){var t=new a(this.scene);return this.displayList.add(t),t}))},function(t,i,o){var a=o(216);o(5).register("graphics",(function(t){return this.displayList.add(new a(this.scene,t))}))},function(t,i,o){var a=o(113);o(5).register("group",(function(t,i){return this.updateList.add(new a(this.scene,t,i))}))},function(t,i,o){var a=o(125);o(5).register("image",(function(t,i,o,u){return this.displayList.add(new a(this.scene,t,i,o,u))}))},function(t,i,o){var a=o(219);o(5).register("layer",(function(t){return this.displayList.add(new a(this.scene,t))}))},function(t,i,o){var a=o(5),u=o(220);a.register("particles",(function(t,i,o){return this.displayList.add(new u(this.scene,t,i,o))}))},function(t,i,o){var a=o(5),u=o(457);a.register("follower",(function(t,i,o,a,d){var b=new u(this.scene,t,i,o,a,d);return this.displayList.add(b),this.updateList.add(b),b}))},function(t,i,o){var a=o(5),u=o(221);a.register("renderTexture",(function(t,i,o,a,d,b){return this.displayList.add(new u(this.scene,t,i,o,a,d,b))}))},function(t,i,o){var a=o(223);o(5).register("rope",(function(t,i,o,u,d,b,S,C){return this.displayList.add(new a(this.scene,t,i,o,u,d,b,S,C))}))},function(t,i,o){var a=o(5),u=o(73);a.register("sprite",(function(t,i,o,a){var d=new u(this.scene,t,i,o,a);return this.displayList.add(d),d}))},function(t,i,o){var a=o(148);o(5).register("bitmapText",(function(t,i,o,u,d,b){return this.displayList.add(new a(this.scene,t,i,o,u,d,b))}))},function(t,i,o){var a=o(224);o(5).register("text",(function(t,i,o,u){return this.displayList.add(new a(this.scene,t,i,o,u))}))},function(t,i,o){var a=o(225);o(5).register("tileSprite",(function(t,i,o,u,d,b){return this.displayList.add(new a(this.scene,t,i,o,u,d,b))}))},function(t,i,o){var a=o(129);o(5).register("zone",(function(t,i,o,u){return this.displayList.add(new a(this.scene,t,i,o,u))}))},function(t,i,o){var a=o(226);o(5).register("video",(function(t,i,o){return this.displayList.add(new a(this.scene,t,i,o))}))},function(t,i,o){var a=o(461),u=o(5);u.register("arc",(function(t,i,o,u,d,b,S,C){return this.displayList.add(new a(this.scene,t,i,o,u,d,b,S,C))})),u.register("circle",(function(t,i,o,u,d){return this.displayList.add(new a(this.scene,t,i,o,0,360,!1,u,d))}))},function(t,i,o){var a=o(5),u=o(462);a.register("curve",(function(t,i,o,a,d){return this.displayList.add(new u(this.scene,t,i,o,a,d))}))},function(t,i,o){var a=o(463);o(5).register("ellipse",(function(t,i,o,u,d,b){return this.displayList.add(new a(this.scene,t,i,o,u,d,b))}))},function(t,i,o){var a=o(5),u=o(464);a.register("grid",(function(t,i,o,a,d,b,S,C,M,P){return this.displayList.add(new u(this.scene,t,i,o,a,d,b,S,C,M,P))}))},function(t,i,o){var a=o(5),u=o(465);a.register("isobox",(function(t,i,o,a,d,b,S){return this.displayList.add(new u(this.scene,t,i,o,a,d,b,S))}))},function(t,i,o){var a=o(5),u=o(466);a.register("isotriangle",(function(t,i,o,a,d,b,S,C){return this.displayList.add(new u(this.scene,t,i,o,a,d,b,S,C))}))},function(t,i,o){var a=o(5),u=o(467);a.register("line",(function(t,i,o,a,d,b,S,C){return this.displayList.add(new u(this.scene,t,i,o,a,d,b,S,C))}))},function(t,i,o){var a=o(5),u=o(468);a.register("polygon",(function(t,i,o,a,d){return this.displayList.add(new u(this.scene,t,i,o,a,d))}))},function(t,i,o){var a=o(5),u=o(473);a.register("rectangle",(function(t,i,o,a,d,b){return this.displayList.add(new u(this.scene,t,i,o,a,d,b))}))},function(t,i,o){var a=o(474);o(5).register("star",(function(t,i,o,u,d,b,S){return this.displayList.add(new a(this.scene,t,i,o,u,d,b,S))}))},function(t,i,o){var a=o(5),u=o(475);a.register("triangle",(function(t,i,o,a,d,b,S,C,M,P){return this.displayList.add(new u(this.scene,t,i,o,a,d,b,S,C,M,P))}))},function(t,i,o){var a=o(213),u=o(28),d=o(16),b=o(13);d.register("blitter",(function(t,i){void 0===t&&(t={});var o=b(t,"key",null),d=b(t,"frame",null),S=new a(this.scene,0,0,o,d);return void 0!==i&&(t.add=i),u(this.scene,S,t),S}))},function(t,i,o){var a=o(28),u=o(214),d=o(16),b=o(13);d.register("container",(function(t,i){void 0===t&&(t={});var o=b(t,"x",0),d=b(t,"y",0),S=b(t,"children",null),C=new u(this.scene,o,d,S);return void 0!==i&&(t.add=i),a(this.scene,C,t),C}))},function(t,i,o){var a=o(215),u=o(28),d=o(16),b=o(13);d.register("dynamicBitmapText",(function(t,i){void 0===t&&(t={});var o=b(t,"font",""),d=b(t,"text",""),S=b(t,"size",!1),C=new a(this.scene,0,0,o,d,S);return void 0!==i&&(t.add=i),u(this.scene,C,t),C}))},function(t,i,o){var a=o(16),u=o(216);a.register("graphics",(function(t,i){void 0===t&&(t={}),void 0!==i&&(t.add=i);var o=new u(this.scene,t);return t.add&&this.scene.sys.displayList.add(o),o}))},function(t,i,o){var a=o(16),u=o(113);a.register("group",(function(t){return new u(this.scene,null,t)}))},function(t,i,o){var a=o(28),u=o(16),d=o(13),b=o(125);u.register("image",(function(t,i){void 0===t&&(t={});var o=d(t,"key",null),u=d(t,"frame",null),S=new b(this.scene,0,0,o,u);return void 0!==i&&(t.add=i),a(this.scene,S,t),S}))},function(t,i,o){var a=o(28),u=o(219),d=o(16),b=o(13);d.register("layer",(function(t,i){void 0===t&&(t={});var o=b(t,"children",null),d=new u(this.scene,o);return void 0!==i&&(t.add=i),a(this.scene,d,t),d}))},function(t,i,o){var a=o(16),u=o(13),d=o(2),b=o(220);a.register("particles",(function(t,i){void 0===t&&(t={});var o=u(t,"key",null),a=u(t,"frame",null),S=d(t,"emitters",null),C=new b(this.scene,o,a,S);return void 0!==i&&(t.add=i),d(t,"add",!1)?this.displayList.add(C):this.updateList.add(C),C}))},function(t,i,o){var a=o(28),u=o(16),d=o(13),b=o(221);u.register("renderTexture",(function(t,i){void 0===t&&(t={});var o=d(t,"x",0),u=d(t,"y",0),S=d(t,"width",32),C=d(t,"height",32),M=d(t,"key",void 0),P=d(t,"frame",void 0),R=new b(this.scene,o,u,S,C,M,P);return void 0!==i&&(t.add=i),a(this.scene,R,t),R}))},function(t,i,o){var a=o(28),u=o(16),d=o(13),b=o(6),S=o(223);u.register("rope",(function(t,i){void 0===t&&(t={});var o=d(t,"key",null),u=d(t,"frame",null),C=d(t,"horizontal",!0),M=b(t,"points",void 0),P=b(t,"colors",void 0),R=b(t,"alphas",void 0),O=new S(this.scene,0,0,o,u,M,C,P,R);return void 0!==i&&(t.add=i),a(this.scene,O,t),t.add||this.updateList.add(O),O}))},function(t,i,o){var a=o(28),u=o(439),d=o(16),b=o(13),S=o(73);d.register("sprite",(function(t,i){void 0===t&&(t={});var o=b(t,"key",null),d=b(t,"frame",null),C=new S(this.scene,0,0,o,d);return void 0!==i&&(t.add=i),a(this.scene,C,t),u(C,t),C}))},function(t,i,o){var a=o(148),u=o(28),d=o(16),b=o(13),S=o(6);d.register("bitmapText",(function(t,i){void 0===t&&(t={});var o=S(t,"font",""),d=b(t,"text",""),C=b(t,"size",!1),M=S(t,"align",0),P=new a(this.scene,0,0,o,d,C,M);return void 0!==i&&(t.add=i),u(this.scene,P,t),P}))},function(t,i,o){var a=o(28),u=o(16),d=o(13),b=o(224);u.register("text",(function(t,i){void 0===t&&(t={});var o=d(t,"text",""),u=d(t,"style",null),S=d(t,"padding",null);null!==S&&(u.padding=S);var C=new b(this.scene,0,0,o,u);return void 0!==i&&(t.add=i),a(this.scene,C,t),C.autoRound=d(t,"autoRound",!0),C.resolution=d(t,"resolution",1),C}))},function(t,i,o){var a=o(28),u=o(16),d=o(13),b=o(225);u.register("tileSprite",(function(t,i){void 0===t&&(t={});var o=d(t,"x",0),u=d(t,"y",0),S=d(t,"width",512),C=d(t,"height",512),M=d(t,"key",""),P=d(t,"frame",""),R=new b(this.scene,o,u,S,C,M,P);return void 0!==i&&(t.add=i),a(this.scene,R,t),R}))},function(t,i,o){var a=o(16),u=o(13),d=o(129);a.register("zone",(function(t){var i=u(t,"x",0),o=u(t,"y",0),a=u(t,"width",1),b=u(t,"height",a);return new d(this.scene,i,o,a,b)}))},function(t,i,o){var a=o(28),u=o(16),d=o(13),b=o(226);u.register("video",(function(t,i){void 0===t&&(t={});var o=d(t,"key",null),u=new b(this.scene,0,0,o);return void 0!==i&&(t.add=i),a(this.scene,u,t),t.add||this.updateList.add(u),u}))},function(t,i,o){var a=o(1),u=o(1);a=o(1177),u=o(1178),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i,o){var a=o(19);t.exports=function ShaderWebGLRenderer(t,i,o,u){if(i.shader){if(o.addToRenderList(i),t.pipelines.clear(),i.renderToTexture)i.load(),i.flush();else{var d=a(i,o,u).calc;t.width===i._rendererWidth&&t.height===i._rendererHeight||i.projOrtho(0,t.width,t.height,0),i.load(d.matrix),i.flush()}t.pipelines.rebind()}}},function(t,i){t.exports=function ShaderCanvasRenderer(){}},function(t,i,o){var a=o(1),u=o(1);a=o(1180),u=o(1181),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i,o){var a=o(19);t.exports=function MeshWebGLRenderer(t,i,o,u){var d=i.faces,b=d.length;if(0!==b){o.addToRenderList(i);var S=t.pipelines.set(i.pipeline,i),C=a(i,o,u).calc,M=S.setGameObject(i),P=S.vertexViewF32,R=S.vertexViewU32,O=S.vertexCount*S.currentShader.vertexComponentCount-1,B=i.tintFill,N=[],Y=i.debugCallback,G=C.a,X=C.b,U=C.c,z=C.d,V=C.e,W=C.f,H=i.viewPosition.z,j=i.hideCCW,q=o.roundPixels,Z=o.alpha*i.alpha,K=0;t.pipelines.preBatch(i);for(var $=0;$<b;$++){var tt=d[$];tt.isInView(o,j,H,Z,G,X,U,z,V,W,q)&&(S.shouldFlush(3)&&(S.flush(),O=0),O=tt.load(P,R,O,M,B),K++,S.vertexCount+=3,Y&&N.push(tt))}i.totalFrame+=K,Y&&Y.call(i,i,N),t.pipelines.postBatch(i)}}},function(t,i){t.exports=function MeshCanvasRenderer(){}},function(t,i,o){var a=o(1),u=o(1);a=o(1183),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i,o){var a=o(19);t.exports=function PointLightWebGLRenderer(t,i,o,u){o.addToRenderList(i);var d=t.pipelines.set(i.pipeline),b=a(i,o,u).calc,S=i.width,C=i.height,M=-i._radius,P=-i._radius,R=M+S,O=P+C,B=b.getX(0,0),N=b.getY(0,0),Y=b.getX(M,P),G=b.getY(M,P),X=b.getX(M,O),U=b.getY(M,O),z=b.getX(R,O),V=b.getY(R,O),W=b.getX(R,P),H=b.getY(R,P);t.pipelines.preBatch(i),d.batchPointLight(i,o,Y,G,X,U,z,V,W,H,B,N),t.pipelines.postBatch(i)}},function(t,i,o){var a=o(229);o(5).register("shader",(function(t,i,o,u,d,b,S){return this.displayList.add(new a(this.scene,t,i,o,u,d,b,S))}))},function(t,i,o){var a=o(230);o(5).register("mesh",(function(t,i,o,u,d,b,S,C,M,P,R){return this.displayList.add(new a(this.scene,t,i,o,u,d,b,S,C,M,P,R))}))},function(t,i,o){var a=o(5),u=o(150);a.register("pointlight",(function(t,i,o,a,d,b){return this.displayList.add(new u(this.scene,t,i,o,a,d,b))}))},function(t,i,o){var a=o(28),u=o(16),d=o(13),b=o(229);u.register("shader",(function(t,i){void 0===t&&(t={});var o=d(t,"key",null),u=d(t,"x",0),S=d(t,"y",0),C=d(t,"width",128),M=d(t,"height",128),P=new b(this.scene,o,u,S,C,M);return void 0!==i&&(t.add=i),a(this.scene,P,t),P}))},function(t,i,o){var a=o(28),u=o(16),d=o(13),b=o(6),S=o(230);u.register("mesh",(function(t,i){void 0===t&&(t={});var o=d(t,"key",null),u=d(t,"frame",null),C=b(t,"vertices",[]),M=b(t,"uvs",[]),P=b(t,"indicies",[]),R=b(t,"containsZ",!1),O=b(t,"normals",[]),B=b(t,"colors",16777215),N=b(t,"alphas",1),Y=new S(this.scene,0,0,o,u,C,M,P,R,O,B,N);return void 0!==i&&(t.add=i),a(this.scene,Y,t),Y}))},function(t,i,o){var a=o(28),u=o(16),d=o(13),b=o(150);u.register("pointlight",(function(t,i){void 0===t&&(t={});var o=d(t,"color",16777215),u=d(t,"radius",128),S=d(t,"intensity",1),C=d(t,"attenuation",.1),M=new b(this.scene,0,0,o,u,S,C);return void 0!==i&&(t.add=i),a(this.scene,M,t),M}))},function(t,i,o){var a=o(0),u=o(482),d=o(24),b=o(20),S=new a({Extends:u,initialize:function LightsPlugin(t){this.scene=t,this.systems=t.sys,t.sys.settings.isBooted||t.sys.events.once(b.BOOT,this.boot,this),u.call(this)},boot:function boot(){var t=this.systems.events;t.on(b.SHUTDOWN,this.shutdown,this),t.on(b.DESTROY,this.destroy,this)},destroy:function destroy(){this.shutdown(),this.scene=void 0,this.systems=void 0}});d.register("LightsPlugin",S,"lights"),t.exports=S},function(t,i,o){var a=o(65);a.Area=o(1192),a.Circumference=o(302),a.CircumferencePoint=o(169),a.Clone=o(1193),a.Contains=o(66),a.ContainsPoint=o(1194),a.ContainsRect=o(1195),a.CopyFrom=o(1196),a.Equals=o(1197),a.GetBounds=o(1198),a.GetPoint=o(300),a.GetPoints=o(301),a.Offset=o(1199),a.OffsetPoint=o(1200),a.Random=o(170),t.exports=a},function(t,i){t.exports=function Area(t){return t.radius>0?Math.PI*t.radius*t.radius:0}},function(t,i,o){var a=o(65);t.exports=function Clone(t){return new a(t.x,t.y,t.radius)}},function(t,i,o){var a=o(66);t.exports=function ContainsPoint(t,i){return a(t,i.x,i.y)}},function(t,i,o){var a=o(66);t.exports=function ContainsRect(t,i){return a(t,i.x,i.y)&&a(t,i.right,i.y)&&a(t,i.x,i.bottom)&&a(t,i.right,i.bottom)}},function(t,i){t.exports=function CopyFrom(t,i){return i.setTo(t.x,t.y,t.radius)}},function(t,i){t.exports=function Equals(t,i){return t.x===i.x&&t.y===i.y&&t.radius===i.radius}},function(t,i,o){var a=o(10);t.exports=function GetBounds(t,i){return void 0===i&&(i=new a),i.x=t.left,i.y=t.top,i.width=t.diameter,i.height=t.diameter,i}},function(t,i){t.exports=function Offset(t,i,o){return t.x+=i,t.y+=o,t}},function(t,i){t.exports=function OffsetPoint(t,i){return t.x+=i.x,t.y+=i.y,t}},function(t,i,o){var a=o(111);a.Area=o(1202),a.Circumference=o(447),a.CircumferencePoint=o(218),a.Clone=o(1203),a.Contains=o(112),a.ContainsPoint=o(1204),a.ContainsRect=o(1205),a.CopyFrom=o(1206),a.Equals=o(1207),a.GetBounds=o(1208),a.GetPoint=o(445),a.GetPoints=o(446),a.Offset=o(1209),a.OffsetPoint=o(1210),a.Random=o(180),t.exports=a},function(t,i){t.exports=function Area(t){return t.isEmpty()?0:t.getMajorRadius()*t.getMinorRadius()*Math.PI}},function(t,i,o){var a=o(111);t.exports=function Clone(t){return new a(t.x,t.y,t.width,t.height)}},function(t,i,o){var a=o(112);t.exports=function ContainsPoint(t,i){return a(t,i.x,i.y)}},function(t,i,o){var a=o(112);t.exports=function ContainsRect(t,i){return a(t,i.x,i.y)&&a(t,i.right,i.y)&&a(t,i.x,i.bottom)&&a(t,i.right,i.bottom)}},function(t,i){t.exports=function CopyFrom(t,i){return i.setTo(t.x,t.y,t.width,t.height)}},function(t,i){t.exports=function Equals(t,i){return t.x===i.x&&t.y===i.y&&t.width===i.width&&t.height===i.height}},function(t,i,o){var a=o(10);t.exports=function GetBounds(t,i){return void 0===i&&(i=new a),i.x=t.left,i.y=t.top,i.width=t.width,i.height=t.height,i}},function(t,i){t.exports=function Offset(t,i,o){return t.x+=i,t.y+=o,t}},function(t,i){t.exports=function OffsetPoint(t,i){return t.x+=i.x,t.y+=i.y,t}},function(t,i,o){var a=o(4),u=o(231);t.exports=function GetCircleToCircle(t,i,o){if(void 0===o&&(o=[]),u(t,i)){var d,b,S,C,M=t.x,P=t.y,R=t.radius,O=i.x,B=i.y,N=i.radius;if(P===B)0==(S=(b=-2*B)*b-4*(d=1)*(O*O+(C=(N*N-R*R-O*O+M*M)/(2*(M-O)))*C-2*O*C+B*B-N*N))?o.push(new a(C,-b/(2*d))):S>0&&(o.push(new a(C,(-b+Math.sqrt(S))/(2*d))),o.push(new a(C,(-b-Math.sqrt(S))/(2*d))));else{var Y=(M-O)/(P-B),G=(N*N-R*R-O*O+M*M-B*B+P*P)/(2*(P-B));0==(S=(b=2*P*Y-2*G*Y-2*M)*b-4*(d=Y*Y+1)*(M*M+P*P+G*G-R*R-2*P*G))?(C=-b/(2*d),o.push(new a(C,G-C*Y))):S>0&&(C=(-b+Math.sqrt(S))/(2*d),o.push(new a(C,G-C*Y)),C=(-b-Math.sqrt(S))/(2*d),o.push(new a(C,G-C*Y)))}}return o}},function(t,i,o){var a=o(232),u=o(151);t.exports=function GetCircleToRectangle(t,i,o){if(void 0===o&&(o=[]),u(t,i)){var d=i.getLineA(),b=i.getLineB(),S=i.getLineC(),C=i.getLineD();a(d,t,o),a(b,t,o),a(S,t,o),a(C,t,o)}return o}},function(t,i,o){var a=o(140),u=o(487),d=new(o(47));function CheckIntersects(t,i,o,b,S){var C=Math.cos(t),M=Math.sin(t);d.setTo(i,o,i+C,o+M);var P=u(d,b);P&&S.push(new a(P.x,P.y,t,P.w))}function SortIntersects(t,i){return t.z-i.z}t.exports=function GetRaysFromPointToPolygon(t,i,o){Array.isArray(o)||(o=[o]);for(var a=[],u=[],d=0;d<o.length;d++)for(var b=o[d].points,S=0;S<b.length;S++){var C=Math.atan2(b[S].y-i,b[S].x-t);-1===u.indexOf(C)&&(CheckIntersects(C,t,i,o,a),CheckIntersects(C-1e-5,t,i,o,a),CheckIntersects(C+1e-5,t,i,o,a),u.push(C))}return a.sort(SortIntersects)}},function(t,i,o){var a=o(10),u=o(152);t.exports=function GetRectangleIntersection(t,i,o){return void 0===o&&(o=new a),u(t,i)&&(o.x=Math.max(t.x,i.x),o.y=Math.max(t.y,i.y),o.width=Math.min(t.right,i.right)-o.x,o.height=Math.min(t.bottom,i.bottom)-o.y),o}},function(t,i,o){var a=o(234),u=o(152);t.exports=function GetRectangleToRectangle(t,i,o){if(void 0===o&&(o=[]),u(t,i)){var d=t.getLineA(),b=t.getLineB(),S=t.getLineC(),C=t.getLineD();a(d,i,o),a(b,i,o),a(S,i,o),a(C,i,o)}return o}},function(t,i,o){var a=o(489),u=o(234);t.exports=function GetRectangleToTriangle(t,i,o){if(void 0===o&&(o=[]),a(t,i)){var d=i.getLineA(),b=i.getLineB(),S=i.getLineC();u(d,t,o),u(b,t,o),u(S,t,o)}return o}},function(t,i,o){var a=o(232),u=o(491);t.exports=function GetTriangleToCircle(t,i,o){if(void 0===o&&(o=[]),u(t,i)){var d=t.getLineA(),b=t.getLineB(),S=t.getLineC();a(d,i,o),a(b,i,o),a(S,i,o)}return o}},function(t,i,o){var a=o(494),u=o(492);t.exports=function GetTriangleToTriangle(t,i,o){if(void 0===o&&(o=[]),a(t,i)){var d=i.getLineA(),b=i.getLineB(),S=i.getLineC();u(t,d,o),u(t,b,o),u(t,S,o)}return o}},function(t,i,o){var a=o(496);t.exports=function PointToLineSegment(t,i){if(!a(t,i))return!1;var o=Math.min(i.x1,i.x2),u=Math.max(i.x1,i.x2),d=Math.min(i.y1,i.y2),b=Math.max(i.y1,i.y2);return t.x>=o&&t.x<=u&&t.y>=d&&t.y<=b}},function(t,i){t.exports=function RectangleToValues(t,i,o,a,u,d){return void 0===d&&(d=0),!(i>t.right+d||o<t.left-d||a>t.bottom+d||u<t.top-d)}},function(t,i,o){var a=o(47);a.Angle=o(97),a.BresenhamPoints=o(317),a.CenterOn=o(1222),a.Clone=o(1223),a.CopyFrom=o(1224),a.Equals=o(1225),a.Extend=o(1226),a.GetEasedPoints=o(1227),a.GetMidPoint=o(1228),a.GetNearestPoint=o(1229),a.GetNormal=o(1230),a.GetPoint=o(307),a.GetPoints=o(172),a.GetShortestDistance=o(1231),a.Height=o(1232),a.Length=o(67),a.NormalAngle=o(497),a.NormalX=o(1233),a.NormalY=o(1234),a.Offset=o(1235),a.PerpSlope=o(1236),a.Random=o(173),a.ReflectAngle=o(1237),a.Rotate=o(1238),a.RotateAroundPoint=o(1239),a.RotateAroundXY=o(236),a.SetToAngle=o(1240),a.Slope=o(1241),a.Width=o(1242),t.exports=a},function(t,i){t.exports=function CenterOn(t,i,o){var a=i-(t.x1+t.x2)/2,u=o-(t.y1+t.y2)/2;return t.x1+=a,t.y1+=u,t.x2+=a,t.y2+=u,t}},function(t,i,o){var a=o(47);t.exports=function Clone(t){return new a(t.x1,t.y1,t.x2,t.y2)}},function(t,i){t.exports=function CopyFrom(t,i){return i.setTo(t.x1,t.y1,t.x2,t.y2)}},function(t,i){t.exports=function Equals(t,i){return t.x1===i.x1&&t.y1===i.y1&&t.x2===i.x2&&t.y2===i.y2}},function(t,i,o){var a=o(67);t.exports=function Extend(t,i,o){void 0===o&&(o=i);var u=a(t),d=t.x2-t.x1,b=t.y2-t.y1;return i&&(t.x1=t.x1-d/u*i,t.y1=t.y1-b/u*i),o&&(t.x2=t.x2+d/u*o,t.y2=t.y2+b/u*o),t}},function(t,i,o){var a=o(352),u=o(80),d=o(4);t.exports=function GetEasedPoints(t,i,o,b,S){void 0===b&&(b=0),void 0===S&&(S=[]);var C,M,P=[],R=t.x1,O=t.y1,B=t.x2-R,N=t.y2-O,Y=u(i,S),G=o-1;for(C=0;C<G;C++)M=Y(C/G),P.push(new d(R+B*M,O+N*M));if(M=Y(1),P.push(new d(R+B*M,O+N*M)),b>0){var X=P[0],U=[X];for(C=1;C<P.length-1;C++){var z=P[C];a(X,z)>=b&&(U.push(z),X=z)}var V=P[P.length-1];return a(X,V)<b&&U.pop(),U.push(V),U}return P}},function(t,i,o){var a=o(4);t.exports=function GetMidPoint(t,i){return void 0===i&&(i=new a),i.x=(t.x1+t.x2)/2,i.y=(t.y1+t.y2)/2,i}},function(t,i,o){var a=o(4);t.exports=function GetNearestPoint(t,i,o){void 0===o&&(o=new a);var u=t.x1,d=t.y1,b=t.x2,S=t.y2,C=(b-u)*(b-u)+(S-d)*(S-d);if(0===C)return o;var M=((i.x-u)*(b-u)+(i.y-d)*(S-d))/C;return o.x=u+M*(b-u),o.y=d+M*(S-d),o}},function(t,i,o){var a=o(14),u=o(97),d=o(4);t.exports=function GetNormal(t,i){void 0===i&&(i=new d);var o=u(t)-a.TAU;return i.x=Math.cos(o),i.y=Math.sin(o),i}},function(t,i){t.exports=function GetShortestDistance(t,i){var o=t.x1,a=t.y1,u=t.x2,d=t.y2,b=(u-o)*(u-o)+(d-a)*(d-a);if(0===b)return!1;var S=((a-i.y)*(u-o)-(o-i.x)*(d-a))/b;return Math.abs(S)*Math.sqrt(b)}},function(t,i){t.exports=function Height(t){return Math.abs(t.y1-t.y2)}},function(t,i,o){var a=o(14),u=o(97);t.exports=function NormalX(t){return Math.cos(u(t)-a.TAU)}},function(t,i,o){var a=o(14),u=o(97);t.exports=function NormalY(t){return Math.sin(u(t)-a.TAU)}},function(t,i){t.exports=function Offset(t,i,o){return t.x1+=i,t.y1+=o,t.x2+=i,t.y2+=o,t}},function(t,i){t.exports=function PerpSlope(t){return-(t.x2-t.x1)/(t.y2-t.y1)}},function(t,i,o){var a=o(97),u=o(497);t.exports=function ReflectAngle(t,i){return 2*u(i)-Math.PI-a(t)}},function(t,i,o){var a=o(236);t.exports=function Rotate(t,i){var o=(t.x1+t.x2)/2,u=(t.y1+t.y2)/2;return a(t,o,u,i)}},function(t,i,o){var a=o(236);t.exports=function RotateAroundPoint(t,i,o){return a(t,i.x,i.y,o)}},function(t,i){t.exports=function SetToAngle(t,i,o,a,u){return t.x1=i,t.y1=o,t.x2=i+Math.cos(a)*u,t.y2=o+Math.sin(a)*u,t}},function(t,i){t.exports=function Slope(t){return(t.y2-t.y1)/(t.x2-t.x1)}},function(t,i){t.exports=function Width(t){return Math.abs(t.x1-t.x2)}},function(t,i,o){var a={Face:o(116),GenerateGridVerts:o(1244),GenerateObjVerts:o(480),GenerateVerts:o(479),ParseObj:o(498),ParseObjMaterial:o(499),RotateFace:o(1245),Vertex:o(117)};t.exports=a},function(t,i,o){var a=o(116),u=o(2),d=o(69),b=o(39),S=o(117),C=new b,M=new b,P=new d;t.exports=function GenerateGridVerts(t){var i=u(t,"mesh"),o=u(t,"texture",null),d=u(t,"frame"),b=u(t,"width",1),R=u(t,"height",b),O=u(t,"widthSegments",1),B=u(t,"heightSegments",O),N=u(t,"x",0),Y=u(t,"y",0),G=u(t,"z",0),X=u(t,"rotateX",0),U=u(t,"rotateY",0),z=u(t,"rotateZ",0),V=u(t,"zIsUp",!0),W=u(t,"isOrtho",!!i&&i.dirtyCache[11]),H=u(t,"colors",[16777215]),j=u(t,"alphas",[1]),q=u(t,"tile",!1),Z=u(t,"flipY",!1),K=u(t,"width",null),$={faces:[],verts:[]};if(C.set(N,Y,G),M.set(X,U,z),P.fromRotationXYTranslation(M,C,V),!o&&i)o=i.texture;else{if(!i||"string"!=typeof o)return $;o=i.scene.sys.textures.get(o)}var tt=o.get(d);!K&&W&&o&&i&&(b=tt.width/i.height,R=tt.height/i.height);var et,it,nt=b/2,rt=R/2,st=Math.floor(O),ot=Math.floor(B),at=st+1,ht=ot+1,lt=b/st,ut=R/ot,ct=[],dt=[],ft=0,pt=1,gt=0,vt=1;tt&&(ft=tt.u0,pt=tt.u1,Z?(gt=tt.v1,vt=tt.v0):(gt=tt.v0,vt=tt.v1));var mt=pt-ft,yt=vt-gt;for(it=0;it<ht;it++){var xt=it*ut-rt;for(et=0;et<at;et++){var Tt=et*lt-nt;dt.push(Tt,-xt);var bt=ft+mt*(et/st),wt=gt+yt*(it/ot);ct.push(bt,wt)}}Array.isArray(H)||(H=[H]),Array.isArray(j)||(j=[j]);var St=0,Ct=0;for(it=0;it<ot;it++)for(et=0;et<st;et++){var Et=2*(et+at*it),Mt=2*(et+at*(it+1)),_t=2*(et+1+at*(it+1)),Pt=2*(et+1+at*it),Rt=H[Ct],kt=j[St],Ot=new S(dt[Et],dt[Et+1],0,ct[Et],ct[Et+1],Rt,kt).transformMat4(P),Lt=new S(dt[Mt],dt[Mt+1],0,ct[Mt],ct[Mt+1],Rt,kt).transformMat4(P),Dt=new S(dt[Pt],dt[Pt+1],0,ct[Pt],ct[Pt+1],Rt,kt).transformMat4(P),It=new S(dt[Mt],dt[Mt+1],0,ct[Mt],ct[Mt+1],Rt,kt).transformMat4(P),Ft=new S(dt[_t],dt[_t+1],0,ct[_t],ct[_t+1],Rt,kt).transformMat4(P),Bt=new S(dt[Pt],dt[Pt+1],0,ct[Pt],ct[Pt+1],Rt,kt).transformMat4(P);q&&(Ot.setUVs(ft,vt),Lt.setUVs(ft,gt),Dt.setUVs(pt,vt),It.setUVs(ft,gt),Ft.setUVs(pt,gt),Bt.setUVs(pt,vt)),++Ct===H.length&&(Ct=0),++St===j.length&&(St=0),$.verts.push(Ot,Lt,Dt,It,Ft,Bt),$.faces.push(new a(Ot,Lt,Dt),new a(It,Ft,Bt))}return i&&(i.faces=i.faces.concat($.faces),i.vertices=i.vertices.concat($.verts)),$}},function(t,i){t.exports=function RotateFace(t,i,o,a){var u,d;if(void 0===o&&void 0===a){var b=t.getInCenter();u=b.x,d=b.y}var S=Math.cos(i),C=Math.sin(i),M=t.vertex1,P=t.vertex2,R=t.vertex3,O=M.x-u,B=M.y-d;M.set(O*S-B*C+u,O*C+B*S+d),O=P.x-u,B=P.y-d,P.set(O*S-B*C+u,O*C+B*S+d),O=R.x-u,B=R.y-d,R.set(O*S-B*C+u,O*C+B*S+d)}},function(t,i,o){var a=o(4);a.Ceil=o(1247),a.Clone=o(1248),a.CopyFrom=o(1249),a.Equals=o(1250),a.Floor=o(1251),a.GetCentroid=o(1252),a.GetMagnitude=o(500),a.GetMagnitudeSq=o(501),a.GetRectangleFromPoints=o(1253),a.Interpolate=o(1254),a.Invert=o(1255),a.Negative=o(1256),a.Project=o(1257),a.ProjectUnit=o(1258),a.SetMagnitude=o(1259),t.exports=a},function(t,i){t.exports=function Ceil(t){return t.setTo(Math.ceil(t.x),Math.ceil(t.y))}},function(t,i,o){var a=o(4);t.exports=function Clone(t){return new a(t.x,t.y)}},function(t,i){t.exports=function CopyFrom(t,i){return i.setTo(t.x,t.y)}},function(t,i){t.exports=function Equals(t,i){return t.x===i.x&&t.y===i.y}},function(t,i){t.exports=function Floor(t){return t.setTo(Math.floor(t.x),Math.floor(t.y))}},function(t,i,o){var a=o(4);t.exports=function GetCentroid(t,i){if(void 0===i&&(i=new a),!Array.isArray(t))throw new Error("GetCentroid points argument must be an array");var o=t.length;if(o<1)throw new Error("GetCentroid points array must not be empty");if(1===o)i.x=t[0].x,i.y=t[0].y;else{for(var u=0;u<o;u++)i.x+=t[u].x,i.y+=t[u].y;i.x/=o,i.y/=o}return i}},function(t,i,o){var a=o(10);t.exports=function GetRectangleFromPoints(t,i){void 0===i&&(i=new a);for(var o=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,b=Number.POSITIVE_INFINITY,S=0;S<t.length;S++){var C=t[S];C.x>o&&(o=C.x),C.x<u&&(u=C.x),C.y>d&&(d=C.y),C.y<b&&(b=C.y)}return i.x=u,i.y=b,i.width=o-u,i.height=d-b,i}},function(t,i,o){var a=o(4);t.exports=function Interpolate(t,i,o,u){return void 0===o&&(o=0),void 0===u&&(u=new a),u.x=t.x+(i.x-t.x)*o,u.y=t.y+(i.y-t.y)*o,u}},function(t,i){t.exports=function Invert(t){return t.setTo(t.y,t.x)}},function(t,i,o){var a=o(4);t.exports=function Negative(t,i){return void 0===i&&(i=new a),i.setTo(-t.x,-t.y)}},function(t,i,o){var a=o(4),u=o(501);t.exports=function Project(t,i,o){void 0===o&&(o=new a);var d=(t.x*i.x+t.y*i.y)/u(i);return 0!==d&&(o.x=d*i.x,o.y=d*i.y),o}},function(t,i,o){var a=o(4);t.exports=function ProjectUnit(t,i,o){void 0===o&&(o=new a);var u=t.x*i.x+t.y*i.y;return 0!==u&&(o.x=u*i.x,o.y=u*i.y),o}},function(t,i,o){var a=o(500);t.exports=function SetMagnitude(t,i){if(0!==t.x||0!==t.y){var o=a(t);t.x/=o,t.y/=o}return t.x*=i,t.y*=i,t}},function(t,i,o){var a=o(227);a.Clone=o(1261),a.Contains=o(228),a.ContainsPoint=o(1262),a.Earcut=o(59),a.GetAABB=o(469),a.GetNumberArray=o(1263),a.GetPoints=o(470),a.Perimeter=o(471),a.Reverse=o(1264),a.Simplify=o(1265),a.Smooth=o(472),a.Translate=o(1266),t.exports=a},function(t,i,o){var a=o(227);t.exports=function Clone(t){return new a(t.points)}},function(t,i,o){var a=o(228);t.exports=function ContainsPoint(t,i){return a(t,i.x,i.y)}},function(t,i){t.exports=function GetNumberArray(t,i){void 0===i&&(i=[]);for(var o=0;o<t.points.length;o++)i.push(t.points[o].x),i.push(t.points[o].y);return i}},function(t,i){t.exports=function Reverse(t){return t.points.reverse(),t}},function(t,i){function getSqSegDist(t,i,o){var a=i.x,u=i.y,d=o.x-a,b=o.y-u;if(0!==d||0!==b){var S=((t.x-a)*d+(t.y-u)*b)/(d*d+b*b);S>1?(a=o.x,u=o.y):S>0&&(a+=d*S,u+=b*S)}return(d=t.x-a)*d+(b=t.y-u)*b}function simplifyDPStep(t,i,o,a,u){for(var d,b=a,S=i+1;S<o;S++){var C=getSqSegDist(t[S],t[i],t[o]);C>b&&(d=S,b=C)}b>a&&(d-i>1&&simplifyDPStep(t,i,d,a,u),u.push(t[d]),o-d>1&&simplifyDPStep(t,d,o,a,u))}function simplifyDouglasPeucker(t,i){var o=t.length-1,a=[t[0]];return simplifyDPStep(t,0,o,i,a),a.push(t[o]),a}t.exports=function Simplify(t,i,o){void 0===i&&(i=1),void 0===o&&(o=!1);var a=t.points;if(a.length>2){var u=i*i;o||(a=function simplifyRadialDist(t,i){for(var o,a,u,d,b,S=t[0],C=[S],M=1,P=t.length;M<P;M++)o=t[M],u=S,d=void 0,b=void 0,d=(a=o).x-u.x,b=a.y-u.y,d*d+b*b>i&&(C.push(o),S=o);return S!==o&&C.push(o),C}(a,u)),t.setTo(simplifyDouglasPeucker(a,u))}return t}},function(t,i){t.exports=function Translate(t,i,o){for(var a=t.points,u=0;u<a.length;u++)a[u].x+=i,a[u].y+=o;return t}},function(t,i){t.exports=function Area(t){return t.width*t.height}},function(t,i){t.exports=function Ceil(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t}},function(t,i){t.exports=function CeilAll(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t}},function(t,i,o){var a=o(10);t.exports=function Clone(t){return new a(t.x,t.y,t.width,t.height)}},function(t,i,o){var a=o(57);t.exports=function ContainsPoint(t,i){return a(t,i.x,i.y)}},function(t,i){t.exports=function CopyFrom(t,i){return i.setTo(t.x,t.y,t.width,t.height)}},function(t,i){t.exports=function Equals(t,i){return t.x===i.x&&t.y===i.y&&t.width===i.width&&t.height===i.height}},function(t,i,o){var a=o(237);t.exports=function FitInside(t,i){var o=a(t);return o<a(i)?t.setSize(i.height*o,i.height):t.setSize(i.width,i.width/o),t.setPosition(i.centerX-t.width/2,i.centerY-t.height/2)}},function(t,i,o){var a=o(237);t.exports=function FitOutside(t,i){var o=a(t);return o>a(i)?t.setSize(i.height*o,i.height):t.setSize(i.width,i.width/o),t.setPosition(i.centerX-t.width/2,i.centerY-t.height/2)}},function(t,i){t.exports=function Floor(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t}},function(t,i){t.exports=function FloorAll(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t.width=Math.floor(t.width),t.height=Math.floor(t.height),t}},function(t,i,o){var a=o(10);t.exports=function FromXY(t,i,o,u,d){return void 0===d&&(d=new a),d.setTo(Math.min(t,o),Math.min(i,u),Math.abs(t-o),Math.abs(i-u))}},function(t,i,o){var a=o(4);t.exports=function GetCenter(t,i){return void 0===i&&(i=new a),i.x=t.centerX,i.y=t.centerY,i}},function(t,i,o){var a=o(4);t.exports=function GetSize(t,i){return void 0===i&&(i=new a),i.x=t.width,i.y=t.height,i}},function(t,i,o){var a=o(190);t.exports=function Inflate(t,i,o){var u=t.centerX,d=t.centerY;return t.setSize(t.width+2*i,t.height+2*o),a(t,u,d)}},function(t,i,o){var a=o(10),u=o(152);t.exports=function Intersection(t,i,o){return void 0===o&&(o=new a),u(t,i)?(o.x=Math.max(t.x,i.x),o.y=Math.max(t.y,i.y),o.width=Math.min(t.right,i.right)-o.x,o.height=Math.min(t.bottom,i.bottom)-o.y):o.setEmpty(),o}},function(t,i){t.exports=function MergePoints(t,i){for(var o=t.x,a=t.right,u=t.y,d=t.bottom,b=0;b<i.length;b++)o=Math.min(o,i[b].x),a=Math.max(a,i[b].x),u=Math.min(u,i[b].y),d=Math.max(d,i[b].y);return t.x=o,t.y=u,t.width=a-o,t.height=d-u,t}},function(t,i){t.exports=function MergeRect(t,i){var o=Math.min(t.x,i.x),a=Math.max(t.right,i.right);t.x=o,t.width=a-o;var u=Math.min(t.y,i.y),d=Math.max(t.bottom,i.bottom);return t.y=u,t.height=d-u,t}},function(t,i){t.exports=function MergeXY(t,i,o){var a=Math.min(t.x,i),u=Math.max(t.right,i);t.x=a,t.width=u-a;var d=Math.min(t.y,o),b=Math.max(t.bottom,o);return t.y=d,t.height=b-d,t}},function(t,i){t.exports=function Offset(t,i,o){return t.x+=i,t.y+=o,t}},function(t,i){t.exports=function OffsetPoint(t,i){return t.x+=i.x,t.y+=i.y,t}},function(t,i){t.exports=function Overlaps(t,i){return t.x<i.right&&t.right>i.x&&t.y<i.bottom&&t.bottom>i.y}},function(t,i,o){var a=o(4),u=o(36);t.exports=function PerimeterPoint(t,i,o){void 0===o&&(o=new a),i=u(i);var d=Math.sin(i),b=Math.cos(i),S=b>0?t.width/2:t.width/-2,C=d>0?t.height/2:t.height/-2;return Math.abs(S*d)<Math.abs(C*b)?C=S*d/b:S=C*b/d,o.x=S+t.centerX,o.y=C+t.centerY,o}},function(t,i,o){var a=o(195),u=o(503),d=o(4);t.exports=function RandomOutside(t,i,o){if(void 0===o&&(o=new d),u(t,i))switch(a(0,3)){case 0:o.x=t.x+Math.random()*(i.right-t.x),o.y=t.y+Math.random()*(i.top-t.y);break;case 1:o.x=i.x+Math.random()*(t.right-i.x),o.y=i.bottom+Math.random()*(t.bottom-i.bottom);break;case 2:o.x=t.x+Math.random()*(i.x-t.x),o.y=i.y+Math.random()*(t.bottom-i.y);break;case 3:o.x=i.right+Math.random()*(t.right-i.right),o.y=t.y+Math.random()*(i.bottom-t.y)}return o}},function(t,i){t.exports=function SameDimensions(t,i){return t.width===i.width&&t.height===i.height}},function(t,i){t.exports=function Scale(t,i,o){return void 0===o&&(o=i),t.width*=i,t.height*=o,t}},function(t,i,o){var a=o(82);a.Area=o(1294),a.BuildEquilateral=o(1295),a.BuildFromPolygon=o(1296),a.BuildRight=o(1297),a.CenterOn=o(1298),a.Centroid=o(504),a.CircumCenter=o(1299),a.CircumCircle=o(1300),a.Clone=o(1301),a.Contains=o(115),a.ContainsArray=o(235),a.ContainsPoint=o(1302),a.CopyFrom=o(1303),a.Decompose=o(495),a.Equals=o(1304),a.GetPoint=o(476),a.GetPoints=o(477),a.InCenter=o(506),a.Perimeter=o(1305),a.Offset=o(505),a.Random=o(181),a.Rotate=o(1306),a.RotateAroundPoint=o(1307),a.RotateAroundXY=o(238),t.exports=a},function(t,i){t.exports=function Area(t){var i=t.x1,o=t.y1,a=t.x2,u=t.y2,d=t.x3,b=t.y3;return Math.abs(((d-i)*(u-o)-(a-i)*(b-o))/2)}},function(t,i,o){var a=o(82);t.exports=function BuildEquilateral(t,i,o){var u=o*(Math.sqrt(3)/2);return new a(t,i,t+o/2,i+u,t-o/2,i+u)}},function(t,i,o){var a=o(59),u=o(82);t.exports=function BuildFromPolygon(t,i,o,d,b){void 0===i&&(i=null),void 0===o&&(o=1),void 0===d&&(d=1),void 0===b&&(b=[]);for(var S,C,M,P,R,O,B,N,Y,G=a(t,i),X=0;X<G.length;X+=3)S=G[X],C=G[X+1],M=G[X+2],P=t[2*S]*o,R=t[2*S+1]*d,O=t[2*C]*o,B=t[2*C+1]*d,N=t[2*M]*o,Y=t[2*M+1]*d,b.push(new u(P,R,O,B,N,Y));return b}},function(t,i,o){var a=o(82);t.exports=function BuildRight(t,i,o,u){return void 0===u&&(u=o),new a(t,i,t,i-u,t+o,i)}},function(t,i,o){var a=o(504),u=o(505);t.exports=function CenterOn(t,i,o,d){void 0===d&&(d=a);var b=d(t),S=i-b.x,C=o-b.y;return u(t,S,C)}},function(t,i,o){var a=o(3);function det(t,i,o,a){return t*a-i*o}t.exports=function CircumCenter(t,i){void 0===i&&(i=new a);var o=t.x3,u=t.y3,d=t.x1-o,b=t.y1-u,S=t.x2-o,C=t.y2-u,M=2*det(d,b,S,C),P=det(b,d*d+b*b,C,S*S+C*C),R=det(d,d*d+b*b,S,S*S+C*C);return i.x=o-P/M,i.y=u+R/M,i}},function(t,i,o){var a=o(65);t.exports=function CircumCircle(t,i){void 0===i&&(i=new a);var o,u,d=t.x1,b=t.y1,S=t.x2,C=t.y2,M=t.x3,P=t.y3,R=S-d,O=C-b,B=M-d,N=P-b,Y=R*(d+S)+O*(b+C),G=B*(d+M)+N*(b+P),X=2*(R*(P-C)-O*(M-S));if(Math.abs(X)<1e-6){var U=Math.min(d,S,M),z=Math.min(b,C,P);o=.5*(Math.max(d,S,M)-U),u=.5*(Math.max(b,C,P)-z),i.x=U+o,i.y=z+u,i.radius=Math.sqrt(o*o+u*u)}else i.x=(N*Y-O*G)/X,i.y=(R*G-B*Y)/X,o=i.x-d,u=i.y-b,i.radius=Math.sqrt(o*o+u*u);return i}},function(t,i,o){var a=o(82);t.exports=function Clone(t){return new a(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},function(t,i,o){var a=o(115);t.exports=function ContainsPoint(t,i){return a(t,i.x,i.y)}},function(t,i){t.exports=function CopyFrom(t,i){return i.setTo(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},function(t,i){t.exports=function Equals(t,i){return t.x1===i.x1&&t.y1===i.y1&&t.x2===i.x2&&t.y2===i.y2&&t.x3===i.x3&&t.y3===i.y3}},function(t,i,o){var a=o(67);t.exports=function Perimeter(t){var i=t.getLineA(),o=t.getLineB(),u=t.getLineC();return a(i)+a(o)+a(u)}},function(t,i,o){var a=o(238),u=o(506);t.exports=function Rotate(t,i){var o=u(t);return a(t,o.x,o.y,i)}},function(t,i,o){var a=o(238);t.exports=function RotateAroundPoint(t,i,o){return a(t,i.x,i.y,o)}},function(t,i,o){var a=o(203),u=o(17),d={CreatePixelPerfectHandler:o(507),CreateInteractiveObject:o(508),Events:o(51),Gamepad:o(1309),InputManager:o(409),InputPlugin:o(1321),InputPluginCache:o(153),Keyboard:o(1322),Mouse:o(1336),Pointer:o(412),Touch:o(1337)};d=u(!1,d,a),t.exports=d},function(t,i,o){t.exports={Axis:o(509),Button:o(510),Events:o(239),Gamepad:o(511),GamepadPlugin:o(1316),Configs:o(1317)}},function(t,i){t.exports="down"},function(t,i){t.exports="up"},function(t,i){t.exports="connected"},function(t,i){t.exports="disconnected"},function(t,i){t.exports="down"},function(t,i){t.exports="up"},function(t,i,o){var a=o(0),u=o(9),d=o(239),b=o(511),S=o(6),C=o(153),M=o(51),P=new a({Extends:u,initialize:function GamepadPlugin(t){u.call(this),this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,t.pluginEvents.once(M.BOOT,this.boot,this),t.pluginEvents.on(M.START,this.start,this)},boot:function boot(){var t=this.scene.sys.game,i=this.settings.input,o=t.config;this.enabled=S(i,"gamepad",o.inputGamepad)&&t.device.input.gamepads,this.target=S(i,"gamepad.target",o.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(M.DESTROY,this.destroy,this)},start:function start(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(M.SHUTDOWN,this.shutdown,this)},isActive:function isActive(){return this.enabled&&this.scene.sys.isActive()},startListeners:function startListeners(){var t=this,i=this.target,o=function handler(i){!i.defaultPrevented&&t.isActive()&&(t.refreshPads(),t.queue.push(i))};this.onGamepadHandler=o,i.addEventListener("gamepadconnected",o,!1),i.addEventListener("gamepaddisconnected",o,!1),this.sceneInputPlugin.pluginEvents.on(M.UPDATE,this.update,this)},stopListeners:function stopListeners(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(M.UPDATE,this.update);for(var t=0;t<this.gamepads.length;t++)this.gamepads[t].removeAllListeners()},disconnectAll:function disconnectAll(){for(var t=0;t<this.gamepads.length;t++)this.gamepads[t].pad.connected=!1},refreshPads:function refreshPads(){var t=navigator.getGamepads();if(t)for(var i=this.gamepads,o=0;o<t.length;o++){var a=t[o];if(a){var u=a.id,d=a.index,S=i[d];if(S)S.id!==u?(S.destroy(),i[d]=new b(this,a)):S.update(a);else{var C=new b(this,a);i[d]=C,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=C):this._pad3=C:this._pad2=C:this._pad1=C}}}else this.disconnectAll()},getAll:function getAll(){for(var t=[],i=this.gamepads,o=0;o<i.length;o++)i[o]&&t.push(i[o]);return t},getPad:function getPad(t){for(var i=this.gamepads,o=0;o<i.length;o++)if(i[o]&&i[o].index===t)return i[o]},update:function update(){if(this.enabled){this.refreshPads();var t=this.queue.length;if(0!==t)for(var i=this.queue.splice(0,t),o=0;o<t;o++){var a=i[o],u=this.getPad(a.gamepad.index);"gamepadconnected"===a.type?this.emit(d.CONNECTED,u,a):"gamepaddisconnected"===a.type&&this.emit(d.DISCONNECTED,u,a)}}},shutdown:function shutdown(){this.stopListeners(),this.removeAllListeners()},destroy:function destroy(){this.shutdown();for(var t=0;t<this.gamepads.length;t++)this.gamepads[t]&&this.gamepads[t].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function get(){return this.gamepads.length}},pad1:{get:function get(){return this._pad1}},pad2:{get:function get(){return this._pad2}},pad3:{get:function get(){return this._pad3}},pad4:{get:function get(){return this._pad4}}});C.register("GamepadPlugin",P,"gamepad","gamepad","inputGamepad"),t.exports=P},function(t,i,o){t.exports={DUALSHOCK_4:o(1318),SNES_USB:o(1319),XBOX_360:o(1320)}},function(t,i){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(t,i){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(t,i){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(t,i,o){var a=o(65),u=o(66),d=o(0),b=o(203),S=o(508),C=o(507),M=o(50),P=o(111),R=o(112),O=o(51),B=o(9),N=o(2),Y=o(56),G=o(153),X=o(7),U=o(24),z=o(10),V=o(57),W=o(20),H=o(82),j=o(115),q=new d({Extends:B,initialize:function InputPlugin(t){B.call(this),this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.manager=t.sys.game.input,this.pluginEvents=new B,this.enabled=!0,this.displayList,this.cameras,G.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var i={cancelled:!1};this._eventContainer={stopPropagation:function stopPropagation(){i.cancelled=!0}},this._eventData=i,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,t.sys.events.once(W.BOOT,this.boot,this),t.sys.events.on(W.START,this.start,this)},boot:function boot(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(W.DESTROY,this.destroy,this),this.pluginEvents.emit(O.BOOT)},start:function start(){var t=this.systems.events;t.on(W.TRANSITION_START,this.transitionIn,this),t.on(W.TRANSITION_OUT,this.transitionOut,this),t.on(W.TRANSITION_COMPLETE,this.transitionComplete,this),t.on(W.PRE_UPDATE,this.preUpdate,this),t.once(W.SHUTDOWN,this.shutdown,this),this.manager.events.on(O.GAME_OUT,this.onGameOut,this),this.manager.events.on(O.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(O.START)},onGameOver:function onGameOver(t){this.isActive()&&this.emit(O.GAME_OVER,t.timeStamp,t)},onGameOut:function onGameOut(t){this.isActive()&&this.emit(O.GAME_OUT,t.timeStamp,t)},preUpdate:function preUpdate(){this.pluginEvents.emit(O.PRE_UPDATE);var t=this._pendingRemoval,i=this._pendingInsertion,o=t.length,a=i.length;if(0!==o||0!==a){for(var u=this._list,d=0;d<o;d++){var b=t[d],S=u.indexOf(b);S>-1&&(u.splice(S,1),this.clear(b,!0))}t.length=0,this._pendingRemoval.length=0,this._list=u.concat(i.splice(0))}},isActive:function isActive(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function updatePoll(t,i){if(!this.isActive())return!1;if(this.pluginEvents.emit(O.UPDATE,t,i),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var o,a=this.manager,u=a.pointers,d=a.pointersTotal;for(o=0;o<d;o++)u[o].updateMotion();if(0===this._list.length)return!1;var b=this.pollRate;if(-1===b)return!1;if(b>0){if(this._pollTimer-=i,!(this._pollTimer<0))return!1;this._pollTimer=this.pollRate}var S=!1;for(o=0;o<d;o++){var C=0,M=u[o];this._tempZones=[],this._temp=this.hitTestPointer(M),this.sortGameObjects(this._temp,M),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),C+=this.processOverOutEvents(M),2===this.getDragState(M)&&this.processDragThresholdEvent(M,t),C>0&&(S=!0)}return S},update:function update(t,i){if(!this.isActive())return!1;for(var o=i.length,a=!1,u=0;u<o;u++){var d=0,S=i[u];switch(this._tempZones=[],this._temp=this.hitTestPointer(S),this.sortGameObjects(this._temp,S),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),t){case b.MOUSE_DOWN:d+=this.processDragDownEvent(S),d+=this.processDownEvents(S),d+=this.processOverOutEvents(S);break;case b.MOUSE_UP:d+=this.processDragUpEvent(S),d+=this.processUpEvents(S),d+=this.processOverOutEvents(S);break;case b.TOUCH_START:d+=this.processDragDownEvent(S),d+=this.processDownEvents(S),d+=this.processOverEvents(S);break;case b.TOUCH_END:case b.TOUCH_CANCEL:d+=this.processDragUpEvent(S),d+=this.processUpEvents(S),d+=this.processOutEvents(S);break;case b.MOUSE_MOVE:case b.TOUCH_MOVE:d+=this.processDragMoveEvent(S),d+=this.processMoveEvents(S),d+=this.processOverOutEvents(S);break;case b.MOUSE_WHEEL:d+=this.processWheelEvent(S)}d>0&&(a=!0)}return this._updatedThisFrame=!0,a},clear:function clear(t,i){void 0===i&&(i=!1);var o=t.input;if(o){i||this.queueForRemoval(t),o.gameObject=void 0,o.target=void 0,o.hitArea=void 0,o.hitAreaCallback=void 0,o.callbackContext=void 0,t.input=null;var a=this._draggable.indexOf(t);return a>-1&&this._draggable.splice(a,1),(a=this._drag[0].indexOf(t))>-1&&this._drag[0].splice(a,1),(a=this._over[0].indexOf(t))>-1&&(this._over[0].splice(a,1),this.manager.resetCursor(o)),t}},disable:function disable(t){t.input.enabled=!1},enable:function enable(t,i,o,a){return void 0===a&&(a=!1),t.input?t.input.enabled=!0:this.setHitArea(t,i,o),t.input&&a&&!t.input.dropZone&&(t.input.dropZone=a),this},hitTestPointer:function hitTestPointer(t){for(var i=this.cameras.getCamerasBelowPointer(t),o=0;o<i.length;o++){for(var a=i[o],u=this.manager.hitTest(t,this._list,a),d=0;d<u.length;d++){var b=u[d];b.input.dropZone&&this._tempZones.push(b)}if(u.length>0)return t.camera=a,u}return t.camera=i[0],[]},processDownEvents:function processDownEvents(t){var i=0,o=this._temp,a=this._eventData,u=this._eventContainer;a.cancelled=!1;for(var d=!1,b=0;b<o.length;b++){var S=o[b];if(S.input){if(i++,S.emit(O.GAMEOBJECT_POINTER_DOWN,t,S.input.localX,S.input.localY,u),a.cancelled||!S.input){d=!0;break}if(this.emit(O.GAMEOBJECT_DOWN,t,S,u),a.cancelled||!S.input){d=!0;break}}}return!d&&this.manager&&(t.downElement===this.manager.game.canvas?this.emit(O.POINTER_DOWN,t,o):this.emit(O.POINTER_DOWN_OUTSIDE,t)),i},getDragState:function getDragState(t){return this._dragState[t.id]},setDragState:function setDragState(t,i){this._dragState[t.id]=i},processDragThresholdEvent:function processDragThresholdEvent(t,i){var o=!1,a=this.dragTimeThreshold,u=this.dragDistanceThreshold;if((u>0&&M(t.x,t.y,t.downX,t.downY)>=u||a>0&&i>=t.downTime+a)&&(o=!0),o)return this.setDragState(t,3),this.processDragStartList(t)},processDragStartList:function processDragStartList(t){if(3!==this.getDragState(t))return 0;for(var i=this._drag[t.id],o=0;o<i.length;o++){var a=i[o],u=a.input;u.dragState=2,u.dragStartX=a.x,u.dragStartY=a.y,u.dragStartXGlobal=t.worldX,u.dragStartYGlobal=t.worldY,u.dragX=u.dragStartXGlobal-u.dragStartX,u.dragY=u.dragStartYGlobal-u.dragStartY,a.emit(O.GAMEOBJECT_DRAG_START,t,u.dragX,u.dragY),this.emit(O.DRAG_START,t,a)}return this.setDragState(t,4),i.length},processDragDownEvent:function processDragDownEvent(t){var i=this._temp;if(0===this._draggable.length||0===i.length||!t.primaryDown||0!==this.getDragState(t))return 0;this.setDragState(t,1);for(var o=[],a=0;a<i.length;a++){var u=i[a];u.input.draggable&&0===u.input.dragState&&o.push(u)}return 0===o.length?(this.setDragState(t,0),0):(o.length>1&&(this.sortGameObjects(o,t),this.topOnly&&o.splice(1)),this._drag[t.id]=o,0===this.dragDistanceThreshold&&0===this.dragTimeThreshold?(this.setDragState(t,3),this.processDragStartList(t)):(this.setDragState(t,2),0))},processDragMoveEvent:function processDragMoveEvent(t){if(2===this.getDragState(t)&&this.processDragThresholdEvent(t,this.manager.game.loop.now),4!==this.getDragState(t))return 0;for(var i=this._tempZones,o=this._drag[t.id],a=0;a<o.length;a++){var u,d,b=o[a],S=b.input,C=S.target;if(C){var M=i.indexOf(C);0===M?(b.emit(O.GAMEOBJECT_DRAG_OVER,t,C),this.emit(O.DRAG_OVER,t,b,C)):M>0?(b.emit(O.GAMEOBJECT_DRAG_LEAVE,t,C),this.emit(O.DRAG_LEAVE,t,b,C),S.target=i[0],C=S.target,b.emit(O.GAMEOBJECT_DRAG_ENTER,t,C),this.emit(O.DRAG_ENTER,t,b,C)):(b.emit(O.GAMEOBJECT_DRAG_LEAVE,t,C),this.emit(O.DRAG_LEAVE,t,b,C),i[0]?(S.target=i[0],C=S.target,b.emit(O.GAMEOBJECT_DRAG_ENTER,t,C),this.emit(O.DRAG_ENTER,t,b,C)):S.target=null)}else!C&&i[0]&&(S.target=i[0],C=S.target,b.emit(O.GAMEOBJECT_DRAG_ENTER,t,C),this.emit(O.DRAG_ENTER,t,b,C));if(b.parentContainer){var P=t.worldX-S.dragStartXGlobal,R=t.worldY-S.dragStartYGlobal,B=b.getParentRotation(),N=P*Math.cos(B)+R*Math.sin(B),Y=R*Math.cos(B)-P*Math.sin(B);N*=1/b.parentContainer.scaleX,Y*=1/b.parentContainer.scaleY,u=N+S.dragStartX,d=Y+S.dragStartY}else u=t.worldX-S.dragX,d=t.worldY-S.dragY;b.emit(O.GAMEOBJECT_DRAG,t,u,d),this.emit(O.DRAG,t,b,u,d)}return o.length},processDragUpEvent:function processDragUpEvent(t){for(var i=this._drag[t.id],o=0;o<i.length;o++){var a=i[o],u=a.input;if(u&&2===u.dragState){u.dragState=0,u.dragX=u.localX-a.displayOriginX,u.dragY=u.localY-a.displayOriginY;var d=!1,b=u.target;b&&(a.emit(O.GAMEOBJECT_DROP,t,b),this.emit(O.DROP,t,a,b),u.target=null,d=!0),a.input&&(a.emit(O.GAMEOBJECT_DRAG_END,t,u.dragX,u.dragY,d),this.emit(O.DRAG_END,t,a,d))}}return this.setDragState(t,0),i.splice(0),0},processMoveEvents:function processMoveEvents(t){var i=0,o=this._temp,a=this._eventData,u=this._eventContainer;a.cancelled=!1;for(var d=!1,b=0;b<o.length;b++){var S=o[b];if(S.input){if(i++,S.emit(O.GAMEOBJECT_POINTER_MOVE,t,S.input.localX,S.input.localY,u),a.cancelled||!S.input){d=!0;break}if(this.emit(O.GAMEOBJECT_MOVE,t,S,u),a.cancelled||!S.input){d=!0;break}if(this.topOnly)break}}return d||this.emit(O.POINTER_MOVE,t,o),i},processWheelEvent:function processWheelEvent(t){var i=0,o=this._temp,a=this._eventData,u=this._eventContainer;a.cancelled=!1;for(var d=!1,b=t.deltaX,S=t.deltaY,C=t.deltaZ,M=0;M<o.length;M++){var P=o[M];if(P.input){if(i++,P.emit(O.GAMEOBJECT_POINTER_WHEEL,t,b,S,C,u),a.cancelled||!P.input){d=!0;break}if(this.emit(O.GAMEOBJECT_WHEEL,t,P,b,S,C,u),a.cancelled||!P.input){d=!0;break}}}return d||this.emit(O.POINTER_WHEEL,t,o,b,S,C),i},processOverEvents:function processOverEvents(t){var i=this._temp,o=0,a=i.length,u=[];if(a>0){var d=this.manager,b=this._eventData,S=this._eventContainer;b.cancelled=!1;for(var C=!1,M=0;M<a;M++){var P=i[M];if(P.input){if(u.push(P),d.setCursor(P.input),P.emit(O.GAMEOBJECT_POINTER_OVER,t,P.input.localX,P.input.localY,S),o++,b.cancelled||!P.input){C=!0;break}if(this.emit(O.GAMEOBJECT_OVER,t,P,S),b.cancelled||!P.input){C=!0;break}}}C||this.emit(O.POINTER_OVER,t,u)}return this._over[t.id]=u,o},processOutEvents:function processOutEvents(t){var i=this._over[t.id],o=0,a=i.length;if(a>0){var u=this.manager,d=this._eventData,b=this._eventContainer;d.cancelled=!1;var S=!1;this.sortGameObjects(i,t);for(var C=0;C<a;C++){var M=i[C];if((M=i[C]).input){if(u.resetCursor(M.input),M.emit(O.GAMEOBJECT_POINTER_OUT,t,b),o++,d.cancelled||!M.input){S=!0;break}if(this.emit(O.GAMEOBJECT_OUT,t,M,b),d.cancelled||!M.input){S=!0;break}S||this.emit(O.POINTER_OUT,t,i)}}this._over[t.id]=[]}return o},processOverOutEvents:function processOverOutEvents(t){var i,o,a=this._temp,u=[],d=[],b=[],S=this._over[t.id],C=this._drag[t.id],M=this.manager;for(i=0;i<S.length;i++)o=S[i],-1===a.indexOf(o)&&-1===C.indexOf(o)?u.push(o):b.push(o);for(i=0;i<a.length;i++)o=a[i],-1===S.indexOf(o)&&d.push(o);var P=u.length,R=0,B=this._eventData,N=this._eventContainer;B.cancelled=!1;var Y=!1;if(P>0){for(this.sortGameObjects(u,t),i=0;i<P;i++)if((o=u[i]).input){if(M.resetCursor(o.input),o.emit(O.GAMEOBJECT_POINTER_OUT,t,N),R++,B.cancelled||!o.input){Y=!0;break}if(this.emit(O.GAMEOBJECT_OUT,t,o,N),B.cancelled||!o.input){Y=!0;break}}Y||this.emit(O.POINTER_OUT,t,u)}if(P=d.length,B.cancelled=!1,Y=!1,P>0){for(this.sortGameObjects(d,t),i=0;i<P;i++)if((o=d[i]).input){if(M.setCursor(o.input),o.emit(O.GAMEOBJECT_POINTER_OVER,t,o.input.localX,o.input.localY,N),R++,B.cancelled||!o.input){Y=!0;break}if(this.emit(O.GAMEOBJECT_OVER,t,o,N),B.cancelled||!o.input){Y=!0;break}}Y||this.emit(O.POINTER_OVER,t,d)}return S=b.concat(d),this._over[t.id]=this.sortGameObjects(S,t),R},processUpEvents:function processUpEvents(t){var i=this._temp,o=this._eventData,a=this._eventContainer;o.cancelled=!1;for(var u=!1,d=0;d<i.length;d++){var b=i[d];if(b.input){if(b.emit(O.GAMEOBJECT_POINTER_UP,t,b.input.localX,b.input.localY,a),o.cancelled||!b.input){u=!0;break}if(this.emit(O.GAMEOBJECT_UP,t,b,a),o.cancelled||!b.input){u=!0;break}}}return!u&&this.manager&&(t.upElement===this.manager.game.canvas?this.emit(O.POINTER_UP,t,i):this.emit(O.POINTER_UP_OUTSIDE,t)),i.length},queueForInsertion:function queueForInsertion(t){return-1===this._pendingInsertion.indexOf(t)&&-1===this._list.indexOf(t)&&this._pendingInsertion.push(t),this},queueForRemoval:function queueForRemoval(t){return this._pendingRemoval.push(t),this},setDraggable:function setDraggable(t,i){void 0===i&&(i=!0),Array.isArray(t)||(t=[t]);for(var o=0;o<t.length;o++){var a=t[o];a.input.draggable=i;var u=this._draggable.indexOf(a);i&&-1===u?this._draggable.push(a):!i&&u>-1&&this._draggable.splice(u,1)}return this},makePixelPerfect:function makePixelPerfect(t){void 0===t&&(t=1);var i=this.systems.textures;return C(i,t)},setHitArea:function setHitArea(t,i,o){if(void 0===i)return this.setHitAreaFromTexture(t);Array.isArray(t)||(t=[t]);var a=!1,u=!1,d=!1,b=!1,C=!1,M=!0;if(X(i)){var P=i;i=N(P,"hitArea",null),o=N(P,"hitAreaCallback",null),a=N(P,"draggable",!1),u=N(P,"dropZone",!1),d=N(P,"cursor",!1),b=N(P,"useHandCursor",!1),C=N(P,"pixelPerfect",!1);var R=N(P,"alphaTolerance",1);C&&(i={},o=this.makePixelPerfect(R)),i&&o||(this.setHitAreaFromTexture(t),M=!1)}else"function"!=typeof i||o||(o=i,i={});for(var O=0;O<t.length;O++){var B=t[O];if(C&&"Container"===B.type)console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");else{var Y=B.input?B.input:S(B,i,o);Y.customHitArea=M,Y.dropZone=u,Y.cursor=b?"pointer":d,B.input=Y,a&&this.setDraggable(B),this.queueForInsertion(B)}}return this},setHitAreaCircle:function setHitAreaCircle(t,i,o,d,b){void 0===b&&(b=u);var S=new a(i,o,d);return this.setHitArea(t,S,b)},setHitAreaEllipse:function setHitAreaEllipse(t,i,o,a,u,d){void 0===d&&(d=R);var b=new P(i,o,a,u);return this.setHitArea(t,b,d)},setHitAreaFromTexture:function setHitAreaFromTexture(t,i){void 0===i&&(i=V),Array.isArray(t)||(t=[t]);for(var o=0;o<t.length;o++){var a=t[o],u=a.frame,d=0,b=0;a.width?(d=a.width,b=a.height):u&&(d=u.realWidth,b=u.realHeight),"Container"!==a.type||0!==d&&0!==b?0!==d&&0!==b&&(a.input=S(a,new z(0,0,d,b),i),this.queueForInsertion(a)):console.warn("Container.setInteractive must specify a Shape or call setSize() first")}return this},setHitAreaRectangle:function setHitAreaRectangle(t,i,o,a,u,d){void 0===d&&(d=V);var b=new z(i,o,a,u);return this.setHitArea(t,b,d)},setHitAreaTriangle:function setHitAreaTriangle(t,i,o,a,u,d,b,S){void 0===S&&(S=j);var C=new H(i,o,a,u,d,b);return this.setHitArea(t,C,S)},enableDebug:function enableDebug(t,i){void 0===i&&(i=65280);var o=t.input;if(!o||!o.hitArea)return this;var a=o.hitArea,u=a.type,d=o.hitAreaDebug,b=this.systems.add,S=this.systems.updateList;d&&(S.remove(d),d.destroy(),d=null);var C=0,M=0;switch(u){case Y.CIRCLE:d=b.arc(0,0,a.radius),C=a.x-a.radius,M=a.y-a.radius;break;case Y.ELLIPSE:d=b.ellipse(0,0,a.width,a.height),C=a.x-a.width/2,M=a.y-a.height/2;break;case Y.LINE:d=b.line(0,0,a.x1,a.y1,a.x2,a.y2);break;case Y.POLYGON:d=b.polygon(0,0,a.points);break;case Y.RECTANGLE:d=b.rectangle(0,0,a.width,a.height),C=a.x,M=a.y;break;case Y.TRIANGLE:d=b.triangle(0,0,a.x1,a.y1,a.x2,a.y2,a.x3,a.y3)}return d&&(d.isFilled=!1,d.preUpdate=function(){d.setStrokeStyle(1/t.scale,i),d.setDisplayOrigin(t.displayOriginX,t.displayOriginY);var o=t.x,a=t.y,u=t.rotation,b=t.scaleX,S=t.scaleY;if(t.parentContainer){var P=t.getWorldTransformMatrix();o=P.tx,a=P.ty,u=P.rotation,b=P.scaleX,S=P.scaleY}d.setRotation(u),d.setScale(b,S),d.setPosition(o+C,a+M),d.setScrollFactor(t.scrollFactorX,t.scrollFactorY),d.setDepth(t.depth)},S.add(d),o.hitAreaDebug=d),this},removeDebug:function removeDebug(t){var i=t.input;if(i&&i.hitAreaDebug){var o=i.hitAreaDebug;this.systems.updateList.remove(o),o.destroy(),i.hitAreaDebug=null}return this},setPollAlways:function setPollAlways(){return this.setPollRate(0)},setPollOnMove:function setPollOnMove(){return this.setPollRate(-1)},setPollRate:function setPollRate(t){return this.pollRate=t,this._pollTimer=0,this},setGlobalTopOnly:function setGlobalTopOnly(t){return this.manager.globalTopOnly=t,this},setTopOnly:function setTopOnly(t){return this.topOnly=t,this},sortGameObjects:function sortGameObjects(t,i){if(t.length<2)return t;var o=i.camera.renderList;return t.sort((function(t,i){return o.indexOf(i)-o.indexOf(t)}))},sortDropZones:function sortDropZones(t){return t.length<2?t:(this.scene.sys.depthSort(),t.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function sortDropZoneHandler(t,i){if(t.parentContainer||i.parentContainer){if(t.parentContainer===i.parentContainer)return i.parentContainer.getIndex(i)-t.parentContainer.getIndex(t);if(t.parentContainer===i)return-1;if(i.parentContainer===t)return 1;for(var o=t.getIndexList(),a=i.getIndexList(),u=Math.min(o.length,a.length),d=0;d<u;d++){var b=o[d],S=a[d];if(b!==S)return S-b}return a.length-o.length}return this.displayList.getIndex(i)-this.displayList.getIndex(t)},stopPropagation:function stopPropagation(){return this.manager._tempSkip=!0,this},addPointer:function addPointer(t){return this.manager.addPointer(t)},setDefaultCursor:function setDefaultCursor(t){return this.manager.setDefaultCursor(t),this},transitionIn:function transitionIn(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function transitionComplete(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function transitionOut(){this.enabled=this.settings.transitionAllowInput},shutdown:function shutdown(){this.pluginEvents.emit(O.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var t=0;t<10;t++)this._drag[t]=[],this._over[t]=[];this.removeAllListeners();var i=this.manager;i.canvas.style.cursor=i.defaultCursor;var o=this.systems.events;o.off(W.TRANSITION_START,this.transitionIn,this),o.off(W.TRANSITION_OUT,this.transitionOut,this),o.off(W.TRANSITION_COMPLETE,this.transitionComplete,this),o.off(W.PRE_UPDATE,this.preUpdate,this),i.events.off(O.GAME_OUT,this.onGameOut,this),i.events.off(O.GAME_OVER,this.onGameOver,this),o.off(W.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown(),this.pluginEvents.emit(O.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(W.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function get(){return this.manager.activePointer.x}},y:{get:function get(){return this.manager.activePointer.y}},isOver:{get:function get(){return this.manager.isOver}},mousePointer:{get:function get(){return this.manager.mousePointer}},activePointer:{get:function get(){return this.manager.activePointer}},pointer1:{get:function get(){return this.manager.pointers[1]}},pointer2:{get:function get(){return this.manager.pointers[2]}},pointer3:{get:function get(){return this.manager.pointers[3]}},pointer4:{get:function get(){return this.manager.pointers[4]}},pointer5:{get:function get(){return this.manager.pointers[5]}},pointer6:{get:function get(){return this.manager.pointers[6]}},pointer7:{get:function get(){return this.manager.pointers[7]}},pointer8:{get:function get(){return this.manager.pointers[8]}},pointer9:{get:function get(){return this.manager.pointers[9]}},pointer10:{get:function get(){return this.manager.pointers[10]}}});U.register("InputPlugin",q,"input"),t.exports=q},function(t,i,o){t.exports={Events:o(154),KeyboardManager:o(410),KeyboardPlugin:o(1330),Key:o(512),KeyCodes:o(143),KeyCombo:o(513),AdvanceKeyCombo:o(515),ProcessKeyCombo:o(514),ResetKeyCombo:o(516),JustDown:o(1332),JustUp:o(1333),DownDuration:o(1334),UpDuration:o(1335)}},function(t,i){t.exports="keydown"},function(t,i){t.exports="keyup"},function(t,i){t.exports="keycombomatch"},function(t,i){t.exports="down"},function(t,i){t.exports="keydown-"},function(t,i){t.exports="keyup-"},function(t,i){t.exports="up"},function(t,i,o){var a=o(0),u=o(9),d=o(154),b=o(22),S=o(6),C=o(51),M=o(153),P=o(512),R=o(143),O=o(513),B=o(1331),N=o(20),Y=o(76),G=new a({Extends:u,initialize:function KeyboardPlugin(t){u.call(this),this.game=t.systems.game,this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.manager=t.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,t.pluginEvents.once(C.BOOT,this.boot,this),t.pluginEvents.on(C.START,this.start,this)},boot:function boot(){var t=this.settings.input;this.enabled=S(t,"keyboard",!0);var i=S(t,"keyboard.capture",null);i&&this.addCaptures(i),this.sceneInputPlugin.pluginEvents.once(C.DESTROY,this.destroy,this)},start:function start(){this.sceneInputPlugin.manager.events.on(C.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(C.SHUTDOWN,this.shutdown,this),this.game.events.on(b.BLUR,this.resetKeys,this),this.scene.sys.events.on(N.PAUSE,this.resetKeys,this),this.scene.sys.events.on(N.SLEEP,this.resetKeys,this)},isActive:function isActive(){return this.enabled&&this.scene.sys.isActive()},addCapture:function addCapture(t){return this.manager.addCapture(t),this},removeCapture:function removeCapture(t){return this.manager.removeCapture(t),this},getCaptures:function getCaptures(){return this.manager.captures},enableGlobalCapture:function enableGlobalCapture(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function disableGlobalCapture(){return this.manager.preventDefault=!1,this},clearCaptures:function clearCaptures(){return this.manager.clearCaptures(),this},createCursorKeys:function createCursorKeys(){return this.addKeys({up:R.UP,down:R.DOWN,left:R.LEFT,right:R.RIGHT,space:R.SPACE,shift:R.SHIFT})},addKeys:function addKeys(t,i,o){void 0===i&&(i=!0),void 0===o&&(o=!1);var a={};if("string"==typeof t){t=t.split(",");for(var u=0;u<t.length;u++){var d=t[u].trim();d&&(a[d]=this.addKey(d,i,o))}}else for(var b in t)a[b]=this.addKey(t[b],i,o);return a},addKey:function addKey(t,i,o){void 0===i&&(i=!0),void 0===o&&(o=!1);var a=this.keys;if(t instanceof P){var u=a.indexOf(t);return u>-1?a[u]=t:a[t.keyCode]=t,i&&this.addCapture(t.keyCode),t.setEmitOnRepeat(o),t}return"string"==typeof t&&(t=R[t.toUpperCase()]),a[t]||(a[t]=new P(this,t),i&&this.addCapture(t),a[t].setEmitOnRepeat(o)),a[t]},removeKey:function removeKey(t,i){void 0===i&&(i=!1);var o,a=this.keys;if(t instanceof P){var u=a.indexOf(t);u>-1&&(o=this.keys[u],this.keys[u]=void 0)}else"string"==typeof t&&(t=R[t.toUpperCase()]);return a[t]&&(o=a[t],a[t]=void 0),o&&(o.plugin=null,i&&o.destroy()),this},removeAllKeys:function removeAllKeys(t){for(var i=this.keys,o=0;o<i.length;o++){var a=i[o];a&&(i[o]=void 0,t&&a.destroy())}return this},createCombo:function createCombo(t,i){return new O(this,t,i)},checkDown:function checkDown(t,i){if(void 0===i&&(i=0),this.enabled&&t.isDown){var o=Y(this.time-t.timeDown,i);if(o>t._tick)return t._tick=o,!0}return!1},update:function update(){var t=this.manager.queue,i=t.length;if(this.isActive()&&0!==i)for(var o=this.keys,a=0;a<i;a++){var u=t[a],b=u.keyCode,S=o[b],C=!1;void 0===u.cancelled&&(u.cancelled=0,u.stopImmediatePropagation=function(){u.cancelled=1},u.stopPropagation=function(){u.cancelled=-1}),-1!==u.cancelled&&(b===this.prevCode&&u.timeStamp===this.prevTime&&u.type===this.prevType||(this.prevCode=b,this.prevTime=u.timeStamp,this.prevType=u.type,"keydown"===u.type?(S&&(C=S.isDown,S.onDown(u)),u.cancelled||S&&C||(B[b]&&this.emit(d.KEY_DOWN+B[b],u),u.cancelled||this.emit(d.ANY_KEY_DOWN,u))):(S&&S.onUp(u),u.cancelled||(B[b]&&this.emit(d.KEY_UP+B[b],u),u.cancelled||this.emit(d.ANY_KEY_UP,u))),1===u.cancelled&&(u.cancelled=0)))}},resetKeys:function resetKeys(){for(var t=this.keys,i=0;i<t.length;i++)t[i]&&t[i].reset();return this},shutdown:function shutdown(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(C.MANAGER_PROCESS,this.update,this),this.game.events.off(b.BLUR,this.resetKeys),this.scene.sys.events.off(N.PAUSE,this.resetKeys,this),this.scene.sys.events.off(N.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function destroy(){this.shutdown();for(var t=this.keys,i=0;i<t.length;i++)t[i]&&t[i].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function get(){return this.sceneInputPlugin.manager.time}}});M.register("KeyboardPlugin",G,"keyboard","keyboard","inputKeyboard"),t.exports=G},function(t,i,o){var a=o(143),u={};for(var d in a)u[a[d]]=d;t.exports=u},function(t,i){t.exports=function JustDown(t){return!!t._justDown&&(t._justDown=!1,!0)}},function(t,i){t.exports=function JustUp(t){return!!t._justUp&&(t._justUp=!1,!0)}},function(t,i){t.exports=function DownDuration(t,i){void 0===i&&(i=50);var o=t.plugin.game.loop.time-t.timeDown;return t.isDown&&o<i}},function(t,i){t.exports=function UpDuration(t,i){void 0===i&&(i=50);var o=t.plugin.game.loop.time-t.timeUp;return t.isUp&&o<i}},function(t,i,o){t.exports={MouseManager:o(411)}},function(t,i,o){t.exports={TouchManager:o(413)}},function(t,i,o){var a=o(21),u=o(17),d={Events:o(95),FileTypes:o(1339),File:o(23),FileTypesManager:o(8),GetURL:o(155),LoaderPlugin:o(1365),MergeXHRSettings:o(240),MultiFile:o(49),XHRLoader:o(517),XHRSettings:o(156)};d=u(!1,d,a),t.exports=d},function(t,i,o){t.exports={AnimationJSONFile:o(1340),AsepriteFile:o(1341),AtlasJSONFile:o(1342),AtlasXMLFile:o(1343),AudioFile:o(518),AudioSpriteFile:o(1344),BinaryFile:o(1345),BitmapFontFile:o(1346),CSSFile:o(1347),GLSLFile:o(1348),HTML5AudioFile:o(519),HTMLFile:o(1349),HTMLTextureFile:o(1350),ImageFile:o(71),JSONFile:o(61),MultiAtlasFile:o(1351),MultiScriptFile:o(1352),OBJFile:o(1353),PackFile:o(1354),PluginFile:o(1355),SceneFile:o(1356),ScenePluginFile:o(1357),ScriptFile:o(520),SpriteSheetFile:o(1358),SVGFile:o(1359),TextFile:o(242),TilemapCSVFile:o(1360),TilemapImpactFile:o(1361),TilemapJSONFile:o(1362),UnityAtlasFile:o(1363),VideoFile:o(1364),XMLFile:o(241)}},function(t,i,o){var a=o(0),u=o(8),d=o(61),b=o(95),S=new a({Extends:d,initialize:function AnimationJSONFile(t,i,o,a,u){d.call(this,t,i,o,a,u),this.type="animationJSON"},onProcess:function onProcess(){this.loader.once(b.POST_PROCESS,this.onLoadComplete,this),d.prototype.onProcess.call(this)},onLoadComplete:function onLoadComplete(){this.loader.systems.anims.fromJSON(this.data)}});u.register("animation",(function(t,i,o,a){if(Array.isArray(t))for(var u=0;u<t.length;u++)this.addFile(new S(this,t[u]));else this.addFile(new S(this,t,i,a,o));return this})),t.exports=S},function(t,i,o){var a=o(0),u=o(8),d=o(2),b=o(71),S=o(7),C=o(61),M=o(49),P=new a({Extends:M,initialize:function AsepriteFile(t,i,o,a,u,P){var R,O;if(S(i)){var B=i;i=d(B,"key"),R=new b(t,{key:i,url:d(B,"textureURL"),extension:d(B,"textureExtension","png"),normalMap:d(B,"normalMap"),xhrSettings:d(B,"textureXhrSettings")}),O=new C(t,{key:i,url:d(B,"atlasURL"),extension:d(B,"atlasExtension","json"),xhrSettings:d(B,"atlasXhrSettings")})}else R=new b(t,i,o,u),O=new C(t,i,a,P);R.linkFile?M.call(this,t,"atlasjson",i,[R,O,R.linkFile]):M.call(this,t,"atlasjson",i,[R,O])},addToCache:function addToCache(){if(this.isReadyToProcess()){var t=this.files[0],i=this.files[1],o=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(t.key,t.data,i.data,o),i.addToCache(),this.complete=!0}}});u.register("aseprite",(function(t,i,o,a,u){var d;if(Array.isArray(t))for(var b=0;b<t.length;b++)d=new P(this,t[b]),this.addFile(d.files);else d=new P(this,t,i,o,a,u),this.addFile(d.files);return this})),t.exports=P},function(t,i,o){var a=o(0),u=o(8),d=o(2),b=o(71),S=o(7),C=o(61),M=o(49),P=new a({Extends:M,initialize:function AtlasJSONFile(t,i,o,a,u,P){var R,O;if(S(i)){var B=i;i=d(B,"key"),R=new b(t,{key:i,url:d(B,"textureURL"),extension:d(B,"textureExtension","png"),normalMap:d(B,"normalMap"),xhrSettings:d(B,"textureXhrSettings")}),O=new C(t,{key:i,url:d(B,"atlasURL"),extension:d(B,"atlasExtension","json"),xhrSettings:d(B,"atlasXhrSettings")})}else R=new b(t,i,o,u),O=new C(t,i,a,P);R.linkFile?M.call(this,t,"atlasjson",i,[R,O,R.linkFile]):M.call(this,t,"atlasjson",i,[R,O])},addToCache:function addToCache(){if(this.isReadyToProcess()){var t=this.files[0],i=this.files[1],o=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(t.key,t.data,i.data,o),i.pendingDestroy(),this.complete=!0}}});u.register("atlas",(function(t,i,o,a,u){var d;if(Array.isArray(t))for(var b=0;b<t.length;b++)d=new P(this,t[b]),this.addFile(d.files);else d=new P(this,t,i,o,a,u),this.addFile(d.files);return this})),t.exports=P},function(t,i,o){var a=o(0),u=o(8),d=o(2),b=o(71),S=o(7),C=o(49),M=o(241),P=new a({Extends:C,initialize:function AtlasXMLFile(t,i,o,a,u,P){var R,O;if(S(i)){var B=i;i=d(B,"key"),R=new b(t,{key:i,url:d(B,"textureURL"),extension:d(B,"textureExtension","png"),normalMap:d(B,"normalMap"),xhrSettings:d(B,"textureXhrSettings")}),O=new M(t,{key:i,url:d(B,"atlasURL"),extension:d(B,"atlasExtension","xml"),xhrSettings:d(B,"atlasXhrSettings")})}else R=new b(t,i,o,u),O=new M(t,i,a,P);R.linkFile?C.call(this,t,"atlasxml",i,[R,O,R.linkFile]):C.call(this,t,"atlasxml",i,[R,O])},addToCache:function addToCache(){if(this.isReadyToProcess()){var t=this.files[0],i=this.files[1],o=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(t.key,t.data,i.data,o),i.pendingDestroy(),this.complete=!0}}});u.register("atlasXML",(function(t,i,o,a,u){var d;if(Array.isArray(t))for(var b=0;b<t.length;b++)d=new P(this,t[b]),this.addFile(d.files);else d=new P(this,t,i,o,a,u),this.addFile(d.files);return this})),t.exports=P},function(t,i,o){var a=o(518),u=o(0),d=o(8),b=o(2),S=o(7),C=o(61),M=o(49),P=new u({Extends:M,initialize:function AudioSpriteFile(t,i,o,u,d,P,R){if(S(i)){var O=i;i=b(O,"key"),o=b(O,"jsonURL"),u=b(O,"audioURL"),d=b(O,"audioConfig"),P=b(O,"audioXhrSettings"),R=b(O,"jsonXhrSettings")}var B;if(u){var N=a.create(t,i,u,d,P);N&&(B=new C(t,i,o,R),M.call(this,t,"audiosprite",i,[N,B]),this.config.resourceLoad=!1)}else B=new C(t,i,o,R),M.call(this,t,"audiosprite",i,[B]),this.config.resourceLoad=!0,this.config.audioConfig=d,this.config.audioXhrSettings=P},onFileComplete:function onFileComplete(t){if(-1!==this.files.indexOf(t)&&(this.pending--,this.config.resourceLoad&&"json"===t.type&&t.data.hasOwnProperty("resources"))){var i=t.data.resources,o=b(this.config,"audioConfig"),u=b(this.config,"audioXhrSettings"),d=a.create(this.loader,t.key,i,o,u);d&&(this.addToMultiFile(d),this.loader.addFile(d))}},addToCache:function addToCache(){if(this.isReadyToProcess()){var t=this.files[0],i=this.files[1];t.addToCache(),i.addToCache(),this.complete=!0}}});d.register("audioSprite",(function(t,i,o,a,u,d){var b,S=this.systems.game,C=S.config.audio,M=S.device.audio;if(C&&C.noAudio||!M.webAudio&&!M.audioData)return this;if(Array.isArray(t))for(var R=0;R<t.length;R++)(b=new P(this,t[R])).files&&this.addFile(b.files);else(b=new P(this,t,i,o,a,u,d)).files&&this.addFile(b.files);return this}))},function(t,i,o){var a=o(0),u=o(21),d=o(23),b=o(8),S=o(2),C=o(7),M=new a({Extends:d,initialize:function BinaryFile(t,i,o,a,u){var b="bin";if(C(i)){var M=i;i=S(M,"key"),o=S(M,"url"),a=S(M,"xhrSettings"),b=S(M,"extension",b),u=S(M,"dataType",u)}var P={type:"binary",cache:t.cacheManager.binary,extension:b,responseType:"arraybuffer",key:i,url:o,xhrSettings:a,config:{dataType:u}};d.call(this,t,P)},onProcess:function onProcess(){this.state=u.FILE_PROCESSING;var t=this.config.dataType;this.data=t?new t(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});b.register("binary",(function(t,i,o,a){if(Array.isArray(t))for(var u=0;u<t.length;u++)this.addFile(new M(this,t[u]));else this.addFile(new M(this,t,i,a,o));return this})),t.exports=M},function(t,i,o){var a=o(0),u=o(8),d=o(2),b=o(71),S=o(7),C=o(49),M=o(212),P=o(241),R=new a({Extends:C,initialize:function BitmapFontFile(t,i,o,a,u,M){var R,O;if(S(i)){var B=i;i=d(B,"key"),R=new b(t,{key:i,url:d(B,"textureURL"),extension:d(B,"textureExtension","png"),normalMap:d(B,"normalMap"),xhrSettings:d(B,"textureXhrSettings")}),O=new P(t,{key:i,url:d(B,"fontDataURL"),extension:d(B,"fontDataExtension","xml"),xhrSettings:d(B,"fontDataXhrSettings")})}else R=new b(t,i,o,u),O=new P(t,i,a,M);R.linkFile?C.call(this,t,"bitmapfont",i,[R,O,R.linkFile]):C.call(this,t,"bitmapfont",i,[R,O])},addToCache:function addToCache(){if(this.isReadyToProcess()){var t=this.files[0],i=this.files[1];t.addToCache(),i.pendingDestroy();var o=t.cache.get(t.key),a=M(i.data,t.cache.getFrame(t.key),0,0,o);this.loader.cacheManager.bitmapFont.add(t.key,{data:a,texture:t.key,frame:null}),this.complete=!0}}});u.register("bitmapFont",(function(t,i,o,a,u){var d;if(Array.isArray(t))for(var b=0;b<t.length;b++)d=new R(this,t[b]),this.addFile(d.files);else d=new R(this,t,i,o,a,u),this.addFile(d.files);return this})),t.exports=R},function(t,i,o){var a=o(0),u=o(21),d=o(23),b=o(8),S=o(2),C=o(7),M=new a({Extends:d,initialize:function CSSFile(t,i,o,a){var u="css";if(C(i)){var b=i;i=S(b,"key"),o=S(b,"url"),a=S(b,"xhrSettings"),u=S(b,"extension",u)}var M={type:"script",cache:!1,extension:u,responseType:"text",key:i,url:o,xhrSettings:a};d.call(this,t,M)},onProcess:function onProcess(){this.state=u.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});b.register("css",(function(t,i,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new M(this,t[a]));else this.addFile(new M(this,t,i,o));return this})),t.exports=M},function(t,i,o){var a=o(0),u=o(21),d=o(23),b=o(8),S=o(2),C=o(7),M=o(396),P=new a({Extends:d,initialize:function GLSLFile(t,i,o,a,u){var b="glsl";if(C(i)){var M=i;i=S(M,"key"),o=S(M,"url"),a=S(M,"shaderType","fragment"),u=S(M,"xhrSettings"),b=S(M,"extension",b)}else void 0===a&&(a="fragment");var P={type:"glsl",cache:t.cacheManager.shader,extension:b,responseType:"text",key:i,url:o,config:{shaderType:a},xhrSettings:u};d.call(this,t,P)},onProcess:function onProcess(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function addToCache(){var t=this.data.split("\n"),i=this.extractBlock(t,0);if(i)for(;i;){var o=this.getShaderName(i.header),a=this.getShaderType(i.header),u=this.getShaderUniforms(i.header),d=i.shader;if(this.cache.has(o)){var b=this.cache.get(o);"fragment"===a?b.fragmentSrc=d:b.vertexSrc=d,b.uniforms||(b.uniforms=u)}else"fragment"===a?this.cache.add(o,new M(o,d,"",u)):this.cache.add(o,new M(o,"",d,u));i=this.extractBlock(t,i.offset)}else"fragment"===this.config.shaderType?this.cache.add(this.key,new M(this.key,this.data)):this.cache.add(this.key,new M(this.key,"",this.data));this.pendingDestroy()},getShaderName:function getShaderName(t){for(var i=0;i<t.length;i++){var o=t[i].trim();if("name:"===o.substring(0,5))return o.substring(5).trim()}return this.key},getShaderType:function getShaderType(t){for(var i=0;i<t.length;i++){var o=t[i].trim();if("type:"===o.substring(0,5))return o.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function getShaderUniforms(t){for(var i={},o=0;o<t.length;o++){var a=t[o].trim();if("uniform."===a.substring(0,8)){var u=a.indexOf(":");if(u){var d=a.substring(8,u);try{i[d]=JSON.parse(a.substring(u+1))}catch(b){console.warn("Invalid uniform JSON: "+d)}}}}return i},extractBlock:function extractBlock(t,i){for(var o=-1,a=-1,u=-1,d=!1,b=!1,S=[],C=[],M=i;M<t.length;M++){var P=t[M].trim();if("---"===P)if(-1===o)o=M,d=!0;else{if(!d){b=!1;break}a=M,d=!1,b=!0}else d?S.push(P):b&&(C.push(P),u=M)}return d||-1===a?null:{header:S,shader:C.join("\n"),offset:u}}});b.register("glsl",(function(t,i,o,a){if(Array.isArray(t))for(var u=0;u<t.length;u++)this.addFile(new P(this,t[u]));else this.addFile(new P(this,t,i,o,a));return this})),t.exports=P},function(t,i,o){var a=o(0),u=o(21),d=o(23),b=o(8),S=o(2),C=o(7),M=new a({Extends:d,initialize:function HTMLFile(t,i,o,a){var u="html";if(C(i)){var b=i;i=S(b,"key"),o=S(b,"url"),a=S(b,"xhrSettings"),u=S(b,"extension",u)}var M={type:"text",cache:t.cacheManager.html,extension:u,responseType:"text",key:i,url:o,xhrSettings:a};d.call(this,t,M)},onProcess:function onProcess(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});b.register("html",(function(t,i,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new M(this,t[a]));else this.addFile(new M(this,t,i,o));return this})),t.exports=M},function(t,i,o){var a=o(0),u=o(21),d=o(23),b=o(8),S=o(2),C=o(7),M=new a({Extends:d,initialize:function HTMLTextureFile(t,i,o,a,u,b){void 0===a&&(a=512),void 0===u&&(u=512);var M="html";if(C(i)){var P=i;i=S(P,"key"),o=S(P,"url"),b=S(P,"xhrSettings"),M=S(P,"extension",M),a=S(P,"width",a),u=S(P,"height",u)}var R={type:"html",cache:t.textureManager,extension:M,responseType:"text",key:i,url:o,xhrSettings:b,config:{width:a,height:u}};d.call(this,t,R)},onProcess:function onProcess(){this.state=u.FILE_PROCESSING;var t=this.config.width,i=this.config.height,o=[];o.push('<svg width="'+t+'px" height="'+i+'px" viewBox="0 0 '+t+" "+i+'" xmlns="http://www.w3.org/2000/svg">'),o.push('<foreignObject width="100%" height="100%">'),o.push('<body xmlns="http://www.w3.org/1999/xhtml">'),o.push(this.xhrLoader.responseText),o.push("</body>"),o.push("</foreignObject>"),o.push("</svg>");var a=[o.join("\n")],b=this;try{var S=new window.Blob(a,{type:"image/svg+xml;charset=utf-8"})}catch(C){return b.state=u.FILE_ERRORED,void b.onProcessComplete()}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){d.revokeObjectURL(b.data),b.onProcessComplete()},this.data.onerror=function(){d.revokeObjectURL(b.data),b.onProcessError()},d.createObjectURL(this.data,S,"image/svg+xml")},addToCache:function addToCache(){var t=this.cache.addImage(this.key,this.data);this.pendingDestroy(t)}});b.register("htmlTexture",(function(t,i,o,a,u){if(Array.isArray(t))for(var d=0;d<t.length;d++)this.addFile(new M(this,t[d]));else this.addFile(new M(this,t,i,o,a,u));return this})),t.exports=M},function(t,i,o){var a=o(0),u=o(8),d=o(2),b=o(71),S=o(7),C=o(61),M=o(49),P=new a({Extends:M,initialize:function MultiAtlasFile(t,i,o,a,u,b,P){if(S(i)){var R=i;i=d(R,"key"),o=d(R,"url",!1)?d(R,"url"):d(R,"atlasURL"),b=d(R,"xhrSettings"),a=d(R,"path"),u=d(R,"baseURL"),P=d(R,"textureXhrSettings")}var O=new C(t,i,o,b);M.call(this,t,"multiatlas",i,[O]),this.config.path=a,this.config.baseURL=u,this.config.textureXhrSettings=P},onFileComplete:function onFileComplete(t){if(-1!==this.files.indexOf(t)&&(this.pending--,"json"===t.type&&t.data.hasOwnProperty("textures"))){var i=t.data.textures,o=this.config,a=this.loader,u=a.baseURL,S=a.path,C=a.prefix,M=d(o,"baseURL",this.baseURL),P=d(o,"path",this.path),R=d(o,"prefix",this.prefix),O=d(o,"textureXhrSettings");a.setBaseURL(M),a.setPath(P),a.setPrefix(R);for(var B=0;B<i.length;B++){var N=i[B].image,Y="MA"+this.multiKeyIndex+"_"+N,G=new b(a,Y,N,O);if(this.addToMultiFile(G),a.addFile(G),i[B].normalMap){var X=new b(a,Y,i[B].normalMap,O);X.type="normalMap",G.setLink(X),this.addToMultiFile(X),a.addFile(X)}}a.setBaseURL(u),a.setPath(S),a.setPrefix(C)}},addToCache:function addToCache(){if(this.isReadyToProcess()){for(var t=this.files[0],i=[],o=[],a=[],u=1;u<this.files.length;u++){var d=this.files[u];if("normalMap"!==d.type)for(var b=d.key.indexOf("_"),S=d.key.substr(b+1),C=d.data,M=0;M<t.data.textures.length;M++){var P=t.data.textures[M];if(P.image===S){o.push(C),i.push(P),d.linkFile&&a.push(d.linkFile.data);break}}}for(0===a.length&&(a=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,o,i,a),this.complete=!0,u=0;u<this.files.length;u++)this.files[u].pendingDestroy()}}});u.register("multiatlas",(function(t,i,o,a,u){var d;if(Array.isArray(t))for(var b=0;b<t.length;b++)d=new P(this,t[b]),this.addFile(d.files);else d=new P(this,t,i,o,a,u),this.addFile(d.files);return this})),t.exports=P},function(t,i,o){var a=o(0),u=o(8),d=o(2),b=o(7),S=o(49),C=o(520),M=new a({Extends:S,initialize:function MultiScriptFile(t,i,o,a){var u="js",M=[];if(b(i)){var P=i;i=d(P,"key"),o=d(P,"url"),a=d(P,"xhrSettings"),u=d(P,"extension",u)}Array.isArray(o)||(o=[o]);for(var R=0;R<o.length;R++){var O=new C(t,{key:i+"_"+R.toString(),url:o[R],extension:u,xhrSettings:a});O.onProcess=function(){this.onProcessComplete()},M.push(O)}S.call(this,t,"scripts",i,M)},addToCache:function addToCache(){if(this.isReadyToProcess()){for(var t=0;t<this.files.length;t++){var i=this.files[t];i.data=document.createElement("script"),i.data.language="javascript",i.data.type="text/javascript",i.data.defer=!1,i.data.text=i.xhrLoader.responseText,document.head.appendChild(i.data)}this.complete=!0}}});u.register("scripts",(function(t,i,o){var a;if(Array.isArray(t))for(var u=0;u<t.length;u++)a=new M(this,t[u]),this.addFile(a.files);else a=new M(this,t,i,o),this.addFile(a.files);return this})),t.exports=M},function(t,i,o){var a=o(0),u=o(8),d=o(2),b=o(7),S=o(49),C=o(498),M=o(499),P=o(242),R=new a({Extends:S,initialize:function OBJFile(t,i,o,a,u,C){var M,R,O=t.cacheManager.obj;if(b(i)){var B=i;i=d(B,"key"),M=new P(t,{key:i,type:"obj",cache:O,url:d(B,"url"),extension:d(B,"extension","obj"),xhrSettings:d(B,"xhrSettings"),config:{flipUV:d(B,"flipUV",u)}}),(a=d(B,"matURL"))&&(R=new P(t,{key:i,type:"mat",cache:O,url:a,extension:d(B,"matExtension","mat"),xhrSettings:d(B,"xhrSettings")}))}else M=new P(t,{key:i,url:o,type:"obj",cache:O,extension:"obj",xhrSettings:C,config:{flipUV:u}}),a&&(R=new P(t,{key:i,url:a,type:"mat",cache:O,extension:"mat",xhrSettings:C}));S.call(this,t,"obj",i,[M,R])},addToCache:function addToCache(){if(this.isReadyToProcess()){var t=this.files[0],i=this.files[1],o=C(t.data,t.config.flipUV);i&&(o.materials=M(i.data)),t.cache.add(t.key,o),this.complete=!0}}});u.register("obj",(function(t,i,o,a,u){var d;if(Array.isArray(t))for(var b=0;b<t.length;b++)d=new R(this,t[b]),this.addFile(d.files);else d=new R(this,t,i,o,a,u),this.addFile(d.files);return this})),t.exports=R},function(t,i,o){var a=o(0),u=o(21),d=o(8),b=o(61),S=new a({Extends:b,initialize:function PackFile(t,i,o,a,u){b.call(this,t,i,o,a,u),this.type="packfile"},onProcess:function onProcess(){this.state!==u.FILE_POPULATED&&(this.state=u.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});d.register("pack",(function(t,i,o,a){if(Array.isArray(t))for(var u=0;u<t.length;u++)this.addFile(new S(this,t[u]));else this.addFile(new S(this,t,i,a,o));return this})),t.exports=S},function(t,i,o){var a=o(0),u=o(21),d=o(23),b=o(8),S=o(2),C=o(7),M=new a({Extends:d,initialize:function PluginFile(t,i,o,a,b,M){var P="js";if(C(i)){var R=i;i=S(R,"key"),o=S(R,"url"),M=S(R,"xhrSettings"),P=S(R,"extension",P),a=S(R,"start"),b=S(R,"mapping")}var O={type:"plugin",cache:!1,extension:P,responseType:"text",key:i,url:o,xhrSettings:M,config:{start:a,mapping:b}};d.call(this,t,O),"function"==typeof o&&(this.data=o,this.state=u.FILE_POPULATED)},onProcess:function onProcess(){var t=this.loader.systems.plugins,i=this.config,o=S(i,"start",!1),a=S(i,"mapping",null);if(this.state===u.FILE_POPULATED)t.install(this.key,this.data,o,a);else{this.state=u.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var d=t.install(this.key,window[this.key],o,a);(o||a)&&(this.loader.systems[a]=d,this.loader.scene[a]=d)}this.onProcessComplete()}});b.register("plugin",(function(t,i,o,a,u){if(Array.isArray(t))for(var d=0;d<t.length;d++)this.addFile(new M(this,t[d]));else this.addFile(new M(this,t,i,o,a,u));return this})),t.exports=M},function(t,i,o){var a=o(0),u=o(21),d=o(23),b=o(8),S=o(2),C=o(7),M=new a({Extends:d,initialize:function SceneFile(t,i,o,a){var u="js";if(C(i)){var b=i;i=S(b,"key"),o=S(b,"url"),a=S(b,"xhrSettings"),u=S(b,"extension",u)}var M={type:"text",extension:u,responseType:"text",key:i,url:o,xhrSettings:a};d.call(this,t,M)},onProcess:function onProcess(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function addToCache(){var t=this.data.concat("(function(){\nreturn new "+this.key+"();\n}).call(this);"),i=eval;this.loader.sceneManager.add(this.key,i(t)),this.complete=!0}});b.register("sceneFile",(function(t,i,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new M(this,t[a]));else this.addFile(new M(this,t,i,o));return this})),t.exports=M},function(t,i,o){var a=o(0),u=o(21),d=o(23),b=o(8),S=o(2),C=o(7),M=new a({Extends:d,initialize:function ScenePluginFile(t,i,o,a,b,M){var P="js";if(C(i)){var R=i;i=S(R,"key"),o=S(R,"url"),M=S(R,"xhrSettings"),P=S(R,"extension",P),a=S(R,"systemKey"),b=S(R,"sceneKey")}var O={type:"scenePlugin",cache:!1,extension:P,responseType:"text",key:i,url:o,xhrSettings:M,config:{systemKey:a,sceneKey:b}};d.call(this,t,O),"function"==typeof o&&(this.data=o,this.state=u.FILE_POPULATED)},onProcess:function onProcess(){var t=this.loader.systems.plugins,i=this.config,o=this.key,a=S(i,"systemKey",o),d=S(i,"sceneKey",o);this.state===u.FILE_POPULATED?t.installScenePlugin(a,this.data,d,this.loader.scene,!0):(this.state=u.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),t.installScenePlugin(a,window[this.key],d,this.loader.scene,!0)),this.onProcessComplete()}});b.register("scenePlugin",(function(t,i,o,a,u){if(Array.isArray(t))for(var d=0;d<t.length;d++)this.addFile(new M(this,t[d]));else this.addFile(new M(this,t,i,o,a,u));return this})),t.exports=M},function(t,i,o){var a=o(0),u=o(8),d=o(71),b=new a({Extends:d,initialize:function SpriteSheetFile(t,i,o,a,u){d.call(this,t,i,o,u,a),this.type="spritesheet"},addToCache:function addToCache(){var t=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(t)}});u.register("spritesheet",(function(t,i,o,a){if(Array.isArray(t))for(var u=0;u<t.length;u++)this.addFile(new b(this,t[u]));else this.addFile(new b(this,t,i,o,a));return this})),t.exports=b},function(t,i,o){var a=o(0),u=o(21),d=o(23),b=o(8),S=o(2),C=o(7),M=new a({Extends:d,initialize:function SVGFile(t,i,o,a,u){var b="svg";if(C(i)){var M=i;i=S(M,"key"),o=S(M,"url"),a=S(M,"svgConfig",{}),u=S(M,"xhrSettings"),b=S(M,"extension",b)}var P={type:"svg",cache:t.textureManager,extension:b,responseType:"text",key:i,url:o,xhrSettings:u,config:{width:S(a,"width"),height:S(a,"height"),scale:S(a,"scale")}};d.call(this,t,P)},onProcess:function onProcess(){this.state=u.FILE_PROCESSING;var t=this.xhrLoader.responseText,i=[t],o=this.config.width,a=this.config.height,b=this.config.scale;t:if(o&&a||b){var S=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("svg")[0],C=S.hasAttribute("viewBox"),M=parseFloat(S.getAttribute("width")),P=parseFloat(S.getAttribute("height"));if(!C&&M&&P)S.setAttribute("viewBox","0  0 "+M+" "+P);else if(C&&!M&&!P){var R=S.getAttribute("viewBox").split(/\s+|,/);M=R[2],P=R[3]}if(b){if(!M||!P)break t;o=M*b,a=P*b}S.setAttribute("width",o.toString()+"px"),S.setAttribute("height",a.toString()+"px"),i=[(new XMLSerializer).serializeToString(S)]}try{var O=new window.Blob(i,{type:"image/svg+xml;charset=utf-8"})}catch(Y){return void this.onProcessError()}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var B=this,N=!1;this.data.onload=function(){N||d.revokeObjectURL(B.data),B.onProcessComplete()},this.data.onerror=function(){N?B.onProcessError():(N=!0,d.revokeObjectURL(B.data),B.data.src="data:image/svg+xml,"+encodeURIComponent(i.join("")))},d.createObjectURL(this.data,O,"image/svg+xml")},addToCache:function addToCache(){var t=this.cache.addImage(this.key,this.data);this.pendingDestroy(t)}});b.register("svg",(function(t,i,o,a){if(Array.isArray(t))for(var u=0;u<t.length;u++)this.addFile(new M(this,t[u]));else this.addFile(new M(this,t,i,o,a));return this})),t.exports=M},function(t,i,o){var a=o(0),u=o(21),d=o(23),b=o(8),S=o(2),C=o(7),M=o(40),P=new a({Extends:d,initialize:function TilemapCSVFile(t,i,o,a){var u="csv";if(C(i)){var b=i;i=S(b,"key"),o=S(b,"url"),a=S(b,"xhrSettings"),u=S(b,"extension",u)}var P={type:"tilemapCSV",cache:t.cacheManager.tilemap,extension:u,responseType:"text",key:i,url:o,xhrSettings:a};d.call(this,t,P),this.tilemapFormat=M.CSV},onProcess:function onProcess(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function addToCache(){var t={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});b.register("tilemapCSV",(function(t,i,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new P(this,t[a]));else this.addFile(new P(this,t,i,o));return this})),t.exports=P},function(t,i,o){var a=o(0),u=o(8),d=o(61),b=o(40),S=new a({Extends:d,initialize:function TilemapImpactFile(t,i,o,a){d.call(this,t,i,o,a),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function addToCache(){var t={format:b.WELTMEISTER,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});u.register("tilemapImpact",(function(t,i,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new S(this,t[a]));else this.addFile(new S(this,t,i,o));return this})),t.exports=S},function(t,i,o){var a=o(0),u=o(8),d=o(61),b=o(40),S=new a({Extends:d,initialize:function TilemapJSONFile(t,i,o,a){d.call(this,t,i,o,a),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function addToCache(){var t={format:b.TILED_JSON,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});u.register("tilemapTiledJSON",(function(t,i,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new S(this,t[a]));else this.addFile(new S(this,t,i,o));return this})),t.exports=S},function(t,i,o){var a=o(0),u=o(8),d=o(2),b=o(71),S=o(7),C=o(49),M=o(242),P=new a({Extends:C,initialize:function UnityAtlasFile(t,i,o,a,u,P){var R,O;if(S(i)){var B=i;i=d(B,"key"),R=new b(t,{key:i,url:d(B,"textureURL"),extension:d(B,"textureExtension","png"),normalMap:d(B,"normalMap"),xhrSettings:d(B,"textureXhrSettings")}),O=new M(t,{key:i,url:d(B,"atlasURL"),extension:d(B,"atlasExtension","txt"),xhrSettings:d(B,"atlasXhrSettings")})}else R=new b(t,i,o,u),O=new M(t,i,a,P);R.linkFile?C.call(this,t,"unityatlas",i,[R,O,R.linkFile]):C.call(this,t,"unityatlas",i,[R,O])},addToCache:function addToCache(){if(this.isReadyToProcess()){var t=this.files[0],i=this.files[1],o=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(t.key,t.data,i.data,o),i.pendingDestroy(),this.complete=!0}}});u.register("unityAtlas",(function(t,i,o,a,u){var d;if(Array.isArray(t))for(var b=0;b<t.length;b++)d=new P(this,t[b]),this.addFile(d.files);else d=new P(this,t,i,o,a,u),this.addFile(d.files);return this})),t.exports=P},function(t,i,o){var a=o(0),u=o(21),d=o(23),b=o(8),S=o(155),C=o(2),M=o(7),P=new a({Extends:d,initialize:function VideoFile(t,i,o,a,u,b,S){void 0===a&&(a="loadeddata"),void 0===u&&(u=!1),void 0===b&&(b=!1),"loadeddata"!==a&&"canplay"!==a&&"canplaythrough"!==a&&(a="loadeddata");var C={type:"video",cache:t.cacheManager.video,extension:o.type,responseType:"blob",key:i,url:o.url,xhrSettings:S,config:{loadEvent:a,asBlob:u,noAudio:b}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),d.call(this,t,C)},onProcess:function onProcess(){if(this.state=u.FILE_PROCESSING,this.config.asBlob){var t=this.createVideoElement();this.data=t;var i=this;this.data.onloadeddata=function(){i.onProcessComplete()},this.data.onerror=function(){d.revokeObjectURL(i.data),i.onProcessError()},d.createObjectURL(t,this.xhrLoader.response,""),t.load()}else this.onProcessComplete()},createVideoElement:function createVideoElement(){var t=document.createElement("video");return t.controls=!1,t.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(t.muted=!0,t.defaultMuted=!0,t.setAttribute("autoplay","autoplay")),t.setAttribute("playsinline","playsinline"),t.setAttribute("preload","auto"),t},onVideoLoadHandler:function onVideoLoadHandler(t){var i=t.target;i.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),i.removeEventListener("error",this.onErrorCallback,!0),this.data=i,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function onVideoErrorHandler(t){var i=t.target;i&&(i.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),i.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function load(){var t=this.config.loadEvent;if(this.config.asBlob)d.prototype.load.call(this);else{this.percentComplete=0;var i=this.createVideoElement();i.addEventListener(t,this.onLoadCallback,!0),i.addEventListener("error",this.onErrorCallback,!0),i.src=S(this,this.loader.baseURL),i.load()}}});P.create=function(t,i,o,a,u,d,b){var S=t.systems.game;M(i)&&(o=C(i,"url",[]),a=C(i,"loadEvent","loadeddata"),u=C(i,"asBlob",!1),d=C(i,"noAudio",!1),b=C(i,"xhrSettings"),i=C(i,"key"));var R=P.getVideoURL(S,o);if(R)return new P(t,i,R,a,u,d,b)},P.getVideoURL=function(t,i){Array.isArray(i)||(i=[i]);for(var o=0;o<i.length;o++){var a,u=C(i[o],"url",i[o]);if(0===u.indexOf("blob:"))return{url:u,type:""};if(a=0===u.indexOf("data:")?u.split(",")[0].match(/\/(.*?);/):u.match(/\.([a-zA-Z0-9]+)($|\?)/),a=C(i[o],"type",a?a[1]:"").toLowerCase(),t.device.video[a])return{url:u,type:a}}return null},b.register("video",(function(t,i,o,a,u,d){var b;if(Array.isArray(t))for(var S=0;S<t.length;S++)(b=P.create(this,t[S]))&&this.addFile(b);else(b=P.create(this,t,i,o,a,u,d))&&this.addFile(b);return this})),t.exports=P},function(t,i,o){var a=o(0),u=o(21),d=o(149),b=o(9),S=o(95),C=o(8),M=o(2),P=o(24),R=o(20),O=o(156),B=new a({Extends:b,initialize:function LoaderPlugin(t){b.call(this);var i=t.sys.game.config,o=t.sys.settings.loader;this.scene=t,this.systems=t.sys,this.cacheManager=t.sys.cache,this.textureManager=t.sys.textures,this.sceneManager=t.sys.game.scene,C.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(M(o,"baseURL",i.loaderBaseURL)),this.setPath(M(o,"path",i.loaderPath)),this.setPrefix(M(o,"prefix",i.loaderPrefix)),this.maxParallelDownloads=M(o,"maxParallelDownloads",i.loaderMaxParallelDownloads),this.xhr=O(M(o,"responseType",i.loaderResponseType),M(o,"async",i.loaderAsync),M(o,"user",i.loaderUser),M(o,"password",i.loaderPassword),M(o,"timeout",i.loaderTimeout),M(o,"withCredentials",i.loaderWithCredentials)),this.crossOrigin=M(o,"crossOrigin",i.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new d,this.inflight=new d,this.queue=new d,this._deleteQueue=new d,this.totalFailed=0,this.totalComplete=0,this.state=u.LOADER_IDLE,this.multiKeyIndex=0,t.sys.events.once(R.BOOT,this.boot,this),t.sys.events.on(R.START,this.pluginStart,this)},boot:function boot(){this.systems.events.once(R.DESTROY,this.destroy,this)},pluginStart:function pluginStart(){this.systems.events.once(R.SHUTDOWN,this.shutdown,this)},setBaseURL:function setBaseURL(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.baseURL=t,this},setPath:function setPath(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.path=t,this},setPrefix:function setPrefix(t){return void 0===t&&(t=""),this.prefix=t,this},setCORS:function setCORS(t){return this.crossOrigin=t,this},addFile:function addFile(t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var o=t[i];this.keyExists(o)||(this.list.set(o),this.emit(S.ADD,o.key,o.type,this,o),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function keyExists(t){var i=t.hasCacheConflict();return i||this.list.iterate((function(o){if(o.type===t.type&&o.key===t.key)return i=!0,!1})),!i&&this.isLoading()&&(this.inflight.iterate((function(o){if(o.type===t.type&&o.key===t.key)return i=!0,!1})),this.queue.iterate((function(o){if(o.type===t.type&&o.key===t.key)return i=!0,!1}))),i},addPack:function addPack(t,i){i&&t.hasOwnProperty(i)&&(t={packKey:t[i]});var o=0,a=this.baseURL,u=this.path,d=this.prefix;for(var b in t)if(Object.prototype.hasOwnProperty.call(t,b)){var S=t[b],C=M(S,"baseURL",a),P=M(S,"path",u),R=M(S,"prefix",d),O=M(S,"files",null),B=M(S,"defaultType","void");if(Array.isArray(O)){this.setBaseURL(C),this.setPath(P),this.setPrefix(R);for(var N=0;N<O.length;N++){var Y=O[N],G=Y.hasOwnProperty("type")?Y.type:B;this[G]&&(this[G](Y),o++)}}}return this.setBaseURL(a),this.setPath(u),this.setPrefix(d),o>0},isLoading:function isLoading(){return this.state===u.LOADER_LOADING||this.state===u.LOADER_PROCESSING},isReady:function isReady(){return this.state===u.LOADER_IDLE||this.state===u.LOADER_COMPLETE},start:function start(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(S.START,this),0===this.list.size?this.loadComplete():(this.state=u.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(R.UPDATE,this.update,this)))},updateProgress:function updateProgress(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(S.PROGRESS,this.progress)},update:function update(){this.state===u.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function checkLoadQueue(){this.list.each((function(t){if((t.state===u.FILE_POPULATED||t.state===u.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(t),this.list.delete(t),t.crossOrigin||(t.crossOrigin=this.crossOrigin),t.load()),this.inflight.size===this.maxParallelDownloads)return!1}),this)},nextFile:function nextFile(t,i){this.inflight&&(this.inflight.delete(t),this.updateProgress(),i?(this.totalComplete++,this.queue.set(t),this.emit(S.FILE_LOAD,t),t.onProcess()):(this.totalFailed++,this._deleteQueue.set(t),this.emit(S.FILE_LOAD_ERROR,t),this.fileProcessComplete(t)))},fileProcessComplete:function fileProcessComplete(t){this.scene&&this.systems&&this.systems.game&&!this.systems.game.pendingDestroy&&(t.state===u.FILE_ERRORED?t.multiFile&&t.multiFile.onFileFailed(t):t.state===u.FILE_COMPLETE&&(t.multiFile?t.multiFile.isReadyToProcess()&&t.multiFile.addToCache():t.addToCache()),this.queue.delete(t),0===this.list.size&&0===this.inflight.size&&0===this.queue.size&&this.loadComplete())},loadComplete:function loadComplete(){this.emit(S.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=u.LOADER_COMPLETE,this.systems.events.off(R.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(S.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function flagForRemoval(t){this._deleteQueue.set(t)},saveJSON:function saveJSON(t,i){return this.save(JSON.stringify(t),i)},save:function save(t,i,o){void 0===i&&(i="file.json"),void 0===o&&(o="application/json");var a=new Blob([t],{type:o}),u=URL.createObjectURL(a),d=document.createElement("a");return d.download=i,d.textContent="Download "+i,d.href=u,d.click(),this},reset:function reset(){this.list.clear(),this.inflight.clear(),this.queue.clear();var t=this.systems.game.config,i=this.systems.settings.loader;this.setBaseURL(M(i,"baseURL",t.loaderBaseURL)),this.setPath(M(i,"path",t.loaderPath)),this.setPrefix(M(i,"prefix",t.loaderPrefix)),this.state=u.LOADER_IDLE},shutdown:function shutdown(){this.reset(),this.state=u.LOADER_SHUTDOWN,this.systems.events.off(R.UPDATE,this.update,this),this.systems.events.off(R.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown(),this.state=u.LOADER_DESTROYED,this.systems.events.off(R.UPDATE,this.update,this),this.systems.events.off(R.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});P.register("Loader",B,"load"),t.exports=B},function(t,i,o){var a=o(62),u=o(17),d={ArcadePhysics:o(1367),Body:o(527),Collider:o(528),Components:o(243),Events:o(245),Factory:o(521),GetOverlapX:o(246),GetOverlapY:o(247),SeparateX:o(537),SeparateY:o(538),Group:o(524),Image:o(522),Sprite:o(157),StaticBody:o(539),StaticGroup:o(525),Tilemap:o(1391),World:o(526)};d=u(!1,d,a),t.exports=d},function(t,i,o){var a=o(0),u=o(36),d=o(50),b=o(353),S=o(521),C=o(2),M=o(127),P=o(523),R=o(244),O=o(24),B=o(20),N=o(3),Y=o(526),G=new a({initialize:function ArcadePhysics(t){this.scene=t,this.systems=t.sys,this.config=this.getConfig(),this.world,this.add,t.sys.events.once(B.BOOT,this.boot,this),t.sys.events.on(B.START,this.start,this)},boot:function boot(){this.world=new Y(this.scene,this.config),this.add=new S(this.world),this.systems.events.once(B.DESTROY,this.destroy,this)},start:function start(){this.world||(this.world=new Y(this.scene,this.config),this.add=new S(this.world));var t=this.systems.events;C(this.config,"customUpdate",!1)||t.on(B.UPDATE,this.world.update,this.world),t.on(B.POST_UPDATE,this.world.postUpdate,this.world),t.once(B.SHUTDOWN,this.shutdown,this)},enableUpdate:function enableUpdate(){this.systems.events.on(B.UPDATE,this.world.update,this.world)},disableUpdate:function disableUpdate(){this.systems.events.off(B.UPDATE,this.world.update,this.world)},getConfig:function getConfig(){var t=this.systems.game.config.physics,i=this.systems.settings.physics;return M(C(i,"arcade",{}),C(t,"arcade",{}))},overlap:function overlap(t,i,o,a,u){return void 0===o&&(o=null),void 0===a&&(a=null),void 0===u&&(u=o),this.world.collideObjects(t,i,o,a,u,!0)},collide:function collide(t,i,o,a,u){return void 0===o&&(o=null),void 0===a&&(a=null),void 0===u&&(u=o),this.world.collideObjects(t,i,o,a,u,!1)},collideTiles:function collideTiles(t,i,o,a,u){return this.world.collideTiles(t,i,o,a,u)},overlapTiles:function overlapTiles(t,i,o,a,u){return this.world.overlapTiles(t,i,o,a,u)},pause:function pause(){return this.world.pause()},resume:function resume(){return this.world.resume()},accelerateTo:function accelerateTo(t,i,o,a,u,d){void 0===a&&(a=60);var b=Math.atan2(o-t.y,i-t.x);return t.body.acceleration.setToPolar(b,a),void 0!==u&&void 0!==d&&t.body.maxVelocity.set(u,d),b},accelerateToObject:function accelerateToObject(t,i,o,a,u){return this.accelerateTo(t,i.x,i.y,o,a,u)},closest:function closest(t,i){i||(i=this.world.bodies.entries);for(var o=Number.MAX_VALUE,closest=null,a=t.x,u=t.y,d=i.length,S=0;S<d;S++){var C=i[S],M=C.body||C;if(t!==C&&t!==M&&t!==M.gameObject&&t!==M.center){var P=b(a,u,M.center.x,M.center.y);P<o&&(closest=C,o=P)}}return closest},furthest:function furthest(t,i){i||(i=this.world.bodies.entries);for(var o=-1,a=null,u=t.x,d=t.y,S=i.length,C=0;C<S;C++){var M=i[C],P=M.body||M;if(t!==M&&t!==P&&t!==P.gameObject&&t!==P.center){var R=b(u,d,P.center.x,P.center.y);R>o&&(a=M,o=R)}}return a},moveTo:function moveTo(t,i,o,a,u){void 0===a&&(a=60),void 0===u&&(u=0);var b=Math.atan2(o-t.y,i-t.x);return u>0&&(a=d(t.x,t.y,i,o)/(u/1e3)),t.body.velocity.setToPolar(b,a),b},moveToObject:function moveToObject(t,i,o,a){return this.moveTo(t,i.x,i.y,o,a)},velocityFromAngle:function velocityFromAngle(t,i,o){return void 0===i&&(i=60),void 0===o&&(o=new N),o.setToPolar(u(t),i)},velocityFromRotation:function velocityFromRotation(t,i,o){return void 0===i&&(i=60),void 0===o&&(o=new N),o.setToPolar(t,i)},overlapRect:function overlapRect(t,i,o,a,u,d){return R(this.world,t,i,o,a,u,d)},overlapCirc:function overlapCirc(t,i,o,a,u){return P(this.world,t,i,o,a,u)},shutdown:function shutdown(){if(this.world){var t=this.systems.events;t.off(B.UPDATE,this.world.update,this.world),t.off(B.POST_UPDATE,this.world.postUpdate,this.world),t.off(B.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function destroy(){this.shutdown(),this.scene.sys.events.off(B.START,this.start,this),this.scene=null,this.systems=null}});O.register("ArcadePhysics",G,"arcadePhysics"),t.exports=G},function(t,i){t.exports={setAcceleration:function setAcceleration(t,i){return this.body.acceleration.set(t,i),this},setAccelerationX:function setAccelerationX(t){return this.body.acceleration.x=t,this},setAccelerationY:function setAccelerationY(t){return this.body.acceleration.y=t,this}}},function(t,i){t.exports={setAngularVelocity:function setAngularVelocity(t){return this.body.angularVelocity=t,this},setAngularAcceleration:function setAngularAcceleration(t){return this.body.angularAcceleration=t,this},setAngularDrag:function setAngularDrag(t){return this.body.angularDrag=t,this}}},function(t,i){t.exports={setBounce:function setBounce(t,i){return this.body.bounce.set(t,i),this},setBounceX:function setBounceX(t){return this.body.bounce.x=t,this},setBounceY:function setBounceY(t){return this.body.bounce.y=t,this},setCollideWorldBounds:function setCollideWorldBounds(t,i,o){return this.body.setCollideWorldBounds(t,i,o),this}}},function(t,i){t.exports={setDebug:function setDebug(t,i,o){return this.debugShowBody=t,this.debugShowVelocity=i,this.debugBodyColor=o,this},setDebugBodyColor:function setDebugBodyColor(t){return this.body.debugBodyColor=t,this},debugShowBody:{get:function get(){return this.body.debugShowBody},set:function set(t){this.body.debugShowBody=t}},debugShowVelocity:{get:function get(){return this.body.debugShowVelocity},set:function set(t){this.body.debugShowVelocity=t}},debugBodyColor:{get:function get(){return this.body.debugBodyColor},set:function set(t){this.body.debugBodyColor=t}}}},function(t,i){t.exports={setDrag:function setDrag(t,i){return this.body.drag.set(t,i),this},setDragX:function setDragX(t){return this.body.drag.x=t,this},setDragY:function setDragY(t){return this.body.drag.y=t,this},setDamping:function setDamping(t){return this.body.useDamping=t,this}}},function(t,i){var o={enableBody:function enableBody(t,i,o,a,u){return t&&this.body.reset(i,o),a&&(this.body.gameObject.active=!0),u&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function disableBody(t,i){return void 0===t&&(t=!1),void 0===i&&(i=!1),this.body.stop(),this.body.enable=!1,t&&(this.body.gameObject.active=!1),i&&(this.body.gameObject.visible=!1),this},refreshBody:function refreshBody(){return this.body.updateFromGameObject(),this}};t.exports=o},function(t,i){t.exports={setFriction:function setFriction(t,i){return this.body.friction.set(t,i),this},setFrictionX:function setFrictionX(t){return this.body.friction.x=t,this},setFrictionY:function setFrictionY(t){return this.body.friction.y=t,this}}},function(t,i){t.exports={setGravity:function setGravity(t,i){return this.body.gravity.set(t,i),this},setGravityX:function setGravityX(t){return this.body.gravity.x=t,this},setGravityY:function setGravityY(t){return this.body.gravity.y=t,this}}},function(t,i){var o={setImmovable:function setImmovable(t){return void 0===t&&(t=!0),this.body.immovable=t,this}};t.exports=o},function(t,i){t.exports={setMass:function setMass(t){return this.body.mass=t,this}}},function(t,i){var o={setPushable:function setPushable(t){return void 0===t&&(t=!0),this.body.pushable=t,this}};t.exports=o},function(t,i){t.exports={setOffset:function setOffset(t,i){return this.body.setOffset(t,i),this},setSize:function setSize(t,i,o){return this.body.setSize(t,i,o),this},setBodySize:function setBodySize(t,i,o){return this.body.setSize(t,i,o),this},setCircle:function setCircle(t,i,o){return this.body.setCircle(t,i,o),this}}},function(t,i){t.exports={setVelocity:function setVelocity(t,i){return this.body.setVelocity(t,i),this},setVelocityX:function setVelocityX(t){return this.body.setVelocityX(t),this},setVelocityY:function setVelocityY(t){return this.body.setVelocityY(t),this},setMaxVelocity:function setMaxVelocity(t,i){return this.body.maxVelocity.set(t,i),this}}},function(t,i){t.exports="collide"},function(t,i){t.exports="overlap"},function(t,i){t.exports="pause"},function(t,i){t.exports="resume"},function(t,i){t.exports="tilecollide"},function(t,i){t.exports="tileoverlap"},function(t,i){t.exports="worldbounds"},function(t,i){t.exports="worldstep"},function(t,i){var o,a,u,d,b,S,C,M,P,R,O,B,N,Y,G,X,U,z=function BlockCheck(){return R&&G&&a.blocked.right?(o.processX(-U,C,!1,!0),1):P&&X&&a.blocked.left?(o.processX(U,C,!0),1):N&&X&&o.blocked.right?(a.processX(-U,M,!1,!0),2):B&&G&&o.blocked.left?(a.processX(U,M,!0),2):0},V=function Run(t){if(u&&d)U*=.5,0===t||3===t?(o.processX(U,b),a.processX(-U,S)):(o.processX(-U,b),a.processX(U,S));else if(u&&!d)0===t||3===t?o.processX(U,C,!0):o.processX(-U,C,!1,!0);else if(!u&&d)0===t||3===t?a.processX(-U,M,!1,!0):a.processX(U,M,!0);else{var i=.5*U;0===t?Y?(o.processX(U,0,!0),a.processX(0,null,!1,!0)):N?(o.processX(i,0,!0),a.processX(-i,0,!1,!0)):(o.processX(i,a.velocity.x,!0),a.processX(-i,null,!1,!0)):1===t?O?(o.processX(0,null,!1,!0),a.processX(U,0,!0)):R?(o.processX(-i,0,!1,!0),a.processX(i,0,!0)):(o.processX(-i,null,!1,!0),a.processX(i,o.velocity.x,!0)):2===t?Y?(o.processX(-U,0,!1,!0),a.processX(0,null,!0)):B?(o.processX(-i,0,!1,!0),a.processX(i,0,!0)):(o.processX(-i,a.velocity.x,!1,!0),a.processX(i,null,!0)):3===t&&(O?(o.processX(0,null,!0),a.processX(-U,0,!1,!0)):P?(o.processX(i,0,!0),a.processX(-i,0,!1,!0)):(o.processX(i,a.velocity.y,!0),a.processX(-i,null,!1,!0)))}return!0};t.exports={BlockCheck:z,Check:function Check(){var t=o.velocity.x,i=a.velocity.x,u=Math.sqrt(i*i*a.mass/o.mass)*(i>0?1:-1),d=Math.sqrt(t*t*o.mass/a.mass)*(t>0?1:-1),C=.5*(u+d);return d-=C,b=C+(u-=C)*o.bounce.x,S=C+d*a.bounce.x,P&&X?V(0):B&&G?V(1):R&&G?V(2):!(!N||!X)&&V(3)},Set:function Set(t,i,b){a=i;var S=(o=t).velocity.x,V=a.velocity.x;return u=o.pushable,P=o._dx<0,R=o._dx>0,O=0===o._dx,G=Math.abs(o.right-a.x)<=Math.abs(a.right-o.x),C=V-S*o.bounce.x,d=a.pushable,B=a._dx<0,N=a._dx>0,Y=0===a._dx,X=!G,M=S-V*a.bounce.x,U=Math.abs(b),z()},Run:V,RunImmovableBody1:function RunImmovableBody1(t){1===t?a.velocity.x=0:G?a.processX(U,M,!0):a.processX(-U,M,!1,!0),o.moves&&(a.y+=(o.y-o.prev.y)*o.friction.y,a._dy=a.y-a.prev.y)},RunImmovableBody2:function RunImmovableBody2(t){2===t?o.velocity.x=0:X?o.processX(U,C,!0):o.processX(-U,C,!1,!0),a.moves&&(o.y+=(a.y-a.prev.y)*a.friction.y,o._dy=o.y-o.prev.y)}}},function(t,i){var o,a,u,d,b,S,C,M,P,R,O,B,N,Y,G,X,U,z=function BlockCheck(){return R&&G&&a.blocked.down?(o.processY(-U,C,!1,!0),1):P&&X&&a.blocked.up?(o.processY(U,C,!0),1):N&&X&&o.blocked.down?(a.processY(-U,M,!1,!0),2):B&&G&&o.blocked.up?(a.processY(U,M,!0),2):0},V=function Run(t){if(u&&d)U*=.5,0===t||3===t?(o.processY(U,b),a.processY(-U,S)):(o.processY(-U,b),a.processY(U,S));else if(u&&!d)0===t||3===t?o.processY(U,C,!0):o.processY(-U,C,!1,!0);else if(!u&&d)0===t||3===t?a.processY(-U,M,!1,!0):a.processY(U,M,!0);else{var i=.5*U;0===t?Y?(o.processY(U,0,!0),a.processY(0,null,!1,!0)):N?(o.processY(i,0,!0),a.processY(-i,0,!1,!0)):(o.processY(i,a.velocity.y,!0),a.processY(-i,null,!1,!0)):1===t?O?(o.processY(0,null,!1,!0),a.processY(U,0,!0)):R?(o.processY(-i,0,!1,!0),a.processY(i,0,!0)):(o.processY(-i,null,!1,!0),a.processY(i,o.velocity.y,!0)):2===t?Y?(o.processY(-U,0,!1,!0),a.processY(0,null,!0)):B?(o.processY(-i,0,!1,!0),a.processY(i,0,!0)):(o.processY(-i,a.velocity.y,!1,!0),a.processY(i,null,!0)):3===t&&(O?(o.processY(0,null,!0),a.processY(-U,0,!1,!0)):P?(o.processY(i,0,!0),a.processY(-i,0,!1,!0)):(o.processY(i,a.velocity.y,!0),a.processY(-i,null,!1,!0)))}return!0};t.exports={BlockCheck:z,Check:function Check(){var t=o.velocity.y,i=a.velocity.y,u=Math.sqrt(i*i*a.mass/o.mass)*(i>0?1:-1),d=Math.sqrt(t*t*o.mass/a.mass)*(t>0?1:-1),C=.5*(u+d);return d-=C,b=C+(u-=C)*o.bounce.y,S=C+d*a.bounce.y,P&&X?V(0):B&&G?V(1):R&&G?V(2):!(!N||!X)&&V(3)},Set:function Set(t,i,b){a=i;var S=(o=t).velocity.y,V=a.velocity.y;return u=o.pushable,P=o._dy<0,R=o._dy>0,O=0===o._dy,G=Math.abs(o.bottom-a.y)<=Math.abs(a.bottom-o.y),C=V-S*o.bounce.y,d=a.pushable,B=a._dy<0,N=a._dy>0,Y=0===a._dy,X=!G,M=S-V*a.bounce.y,U=Math.abs(b),z()},Run:V,RunImmovableBody1:function RunImmovableBody1(t){1===t?a.velocity.y=0:G?a.processY(U,M,!0):a.processY(-U,M,!1,!0),o.moves&&(a.x+=(o.x-o.prev.x)*o.friction.x,a._dx=a.x-a.prev.x)},RunImmovableBody2:function RunImmovableBody2(t){2===t?o.velocity.y=0:X?o.processY(U,C,!0):o.processY(-U,C,!1,!0),a.moves&&(o.x+=(a.x-a.prev.x)*a.friction.x,o._dx=o.x-o.prev.x)}}},function(t,i,o){var a={ProcessTileCallbacks:o(530),ProcessTileSeparationX:o(534),ProcessTileSeparationY:o(536),SeparateTile:o(532),TileCheckX:o(533),TileCheckY:o(535),TileIntersectsBody:o(248)};t.exports=a},function(t,i,o){var a=o(0),u=o(3),d=new a({initialize:function BodyBounds(){this.boundsCenter=new u,this.centerDiff=new u},parseBody:function parseBody(t){if(!(t=t.hasOwnProperty("body")?t.body:t).hasOwnProperty("bounds")||!t.hasOwnProperty("centerOfMass"))return!1;var i=this.boundsCenter,o=this.centerDiff,a=t.bounds.max.x-t.bounds.min.x,u=t.bounds.max.y-t.bounds.min.y,d=a*t.centerOfMass.x,b=u*t.centerOfMass.y;return i.set(a/2,u/2),o.set(d-i.x,b-i.y),!0},getTopLeft:function getTopLeft(t,i,o){if(void 0===i&&(i=0),void 0===o&&(o=0),this.parseBody(t)){var a=this.boundsCenter,d=this.centerDiff;return new u(i+a.x+d.x,o+a.y+d.y)}return!1},getTopCenter:function getTopCenter(t,i,o){if(void 0===i&&(i=0),void 0===o&&(o=0),this.parseBody(t)){var a=this.boundsCenter,d=this.centerDiff;return new u(i+d.x,o+a.y+d.y)}return!1},getTopRight:function getTopRight(t,i,o){if(void 0===i&&(i=0),void 0===o&&(o=0),this.parseBody(t)){var a=this.boundsCenter,d=this.centerDiff;return new u(i-(a.x-d.x),o+a.y+d.y)}return!1},getLeftCenter:function getLeftCenter(t,i,o){if(void 0===i&&(i=0),void 0===o&&(o=0),this.parseBody(t)){var a=this.boundsCenter,d=this.centerDiff;return new u(i+a.x+d.x,o+d.y)}return!1},getCenter:function getCenter(t,i,o){if(void 0===i&&(i=0),void 0===o&&(o=0),this.parseBody(t)){var a=this.centerDiff;return new u(i+a.x,o+a.y)}return!1},getRightCenter:function getRightCenter(t,i,o){if(void 0===i&&(i=0),void 0===o&&(o=0),this.parseBody(t)){var a=this.boundsCenter,d=this.centerDiff;return new u(i-(a.x-d.x),o+d.y)}return!1},getBottomLeft:function getBottomLeft(t,i,o){if(void 0===i&&(i=0),void 0===o&&(o=0),this.parseBody(t)){var a=this.boundsCenter,d=this.centerDiff;return new u(i+a.x+d.x,o-(a.y-d.y))}return!1},getBottomCenter:function getBottomCenter(t,i,o){if(void 0===i&&(i=0),void 0===o&&(o=0),this.parseBody(t)){var a=this.boundsCenter,d=this.centerDiff;return new u(i+d.x,o-(a.y-d.y))}return!1},getBottomRight:function getBottomRight(t,i,o){if(void 0===i&&(i=0),void 0===o&&(o=0),this.parseBody(t)){var a=this.boundsCenter,d=this.centerDiff;return new u(i-(a.x-d.x),o-(a.y-d.y))}return!1}});t.exports=d},function(t,i){function lineInt(t,i,o){o=o||0;var a,u,d,b,S,C,M,P=[0,0];return a=t[1][1]-t[0][1],u=t[0][0]-t[1][0],d=a*t[0][0]+u*t[0][1],b=i[1][1]-i[0][1],S=i[0][0]-i[1][0],C=b*i[0][0]+S*i[0][1],scalar_eq(M=a*S-b*u,0,o)||(P[0]=(S*d-u*C)/M,P[1]=(a*C-b*d)/M),P}function lineSegmentsIntersect(t,i,o,a){var u=i[0]-t[0],d=i[1]-t[1],b=a[0]-o[0],S=a[1]-o[1];if(b*d-S*u==0)return!1;var C=(u*(o[1]-t[1])+d*(t[0]-o[0]))/(b*d-S*u),M=(b*(t[1]-o[1])+S*(o[0]-t[0]))/(S*u-b*d);return C>=0&&C<=1&&M>=0&&M<=1}function triangleArea(t,i,o){return(i[0]-t[0])*(o[1]-t[1])-(o[0]-t[0])*(i[1]-t[1])}function isLeft(t,i,o){return triangleArea(t,i,o)>0}function isLeftOn(t,i,o){return triangleArea(t,i,o)>=0}function isRight(t,i,o){return triangleArea(t,i,o)<0}function isRightOn(t,i,o){return triangleArea(t,i,o)<=0}t.exports={decomp:function polygonDecomp(t){var i=polygonGetCutEdges(t);return i.length>0?polygonSlice(t,i):[t]},quickDecomp:function polygonQuickDecomp(t,i,o,a,u,d,b){d=d||100,b=b||0,u=u||25,i=void 0!==i?i:[],o=o||[],a=a||[];var S=[0,0],C=[0,0],M=[0,0],P=0,R=0,O=0,B=0,N=0,Y=0,G=0,X=[],U=[],z=t,V=t;if(V.length<3)return i;if(++b>d)return console.warn("quickDecomp: max level ("+d+") reached."),i;for(var W=0;W<t.length;++W)if(polygonIsReflex(z,W)){o.push(z[W]),P=R=Number.MAX_VALUE;for(var H=0;H<t.length;++H)isLeft(polygonAt(z,W-1),polygonAt(z,W),polygonAt(z,H))&&isRightOn(polygonAt(z,W-1),polygonAt(z,W),polygonAt(z,H-1))&&(M=getIntersectionPoint(polygonAt(z,W-1),polygonAt(z,W),polygonAt(z,H),polygonAt(z,H-1)),isRight(polygonAt(z,W+1),polygonAt(z,W),M)&&(O=sqdist(z[W],M))<R&&(R=O,C=M,Y=H)),isLeft(polygonAt(z,W+1),polygonAt(z,W),polygonAt(z,H+1))&&isRightOn(polygonAt(z,W+1),polygonAt(z,W),polygonAt(z,H))&&(M=getIntersectionPoint(polygonAt(z,W+1),polygonAt(z,W),polygonAt(z,H),polygonAt(z,H+1)),isLeft(polygonAt(z,W-1),polygonAt(z,W),M)&&(O=sqdist(z[W],M))<P&&(P=O,S=M,N=H));if(Y===(N+1)%t.length)M[0]=(C[0]+S[0])/2,M[1]=(C[1]+S[1])/2,a.push(M),W<N?(polygonAppend(X,z,W,N+1),X.push(M),U.push(M),0!==Y&&polygonAppend(U,z,Y,z.length),polygonAppend(U,z,0,W+1)):(0!==W&&polygonAppend(X,z,W,z.length),polygonAppend(X,z,0,N+1),X.push(M),U.push(M),polygonAppend(U,z,Y,W+1));else{if(Y>N&&(N+=t.length),B=Number.MAX_VALUE,N<Y)return i;for(H=Y;H<=N;++H)isLeftOn(polygonAt(z,W-1),polygonAt(z,W),polygonAt(z,H))&&isRightOn(polygonAt(z,W+1),polygonAt(z,W),polygonAt(z,H))&&(O=sqdist(polygonAt(z,W),polygonAt(z,H)))<B&&polygonCanSee2(z,W,H)&&(B=O,G=H%t.length);W<G?(polygonAppend(X,z,W,G+1),0!==G&&polygonAppend(U,z,G,V.length),polygonAppend(U,z,0,W+1)):(0!==W&&polygonAppend(X,z,W,V.length),polygonAppend(X,z,0,G+1),polygonAppend(U,z,G,W+1))}return X.length<U.length?(polygonQuickDecomp(X,i,o,a,u,d,b),polygonQuickDecomp(U,i,o,a,u,d,b)):(polygonQuickDecomp(U,i,o,a,u,d,b),polygonQuickDecomp(X,i,o,a,u,d,b)),i}return i.push(t),i},isSimple:function polygonIsSimple(t){var i,o=t;for(i=0;i<o.length-1;i++)for(var a=0;a<i-1;a++)if(lineSegmentsIntersect(o[i],o[i+1],o[a],o[a+1]))return!1;for(i=1;i<o.length-2;i++)if(lineSegmentsIntersect(o[0],o[o.length-1],o[i],o[i+1]))return!1;return!0},removeCollinearPoints:function polygonRemoveCollinearPoints(t,i){for(var o=0,a=t.length-1;t.length>3&&a>=0;--a)collinear(polygonAt(t,a-1),polygonAt(t,a),polygonAt(t,a+1),i)&&(t.splice(a%t.length,1),o++);return o},removeDuplicatePoints:function polygonRemoveDuplicatePoints(t,i){for(var o=t.length-1;o>=1;--o)for(var a=t[o],u=o-1;u>=0;--u)points_eq(a,t[u],i)&&t.splice(o,1)},makeCCW:function polygonMakeCCW(t){for(var i=0,o=t,a=1;a<t.length;++a)(o[a][1]<o[i][1]||o[a][1]===o[i][1]&&o[a][0]>o[i][0])&&(i=a);return!isLeft(polygonAt(t,i-1),polygonAt(t,i),polygonAt(t,i+1))&&(function polygonReverse(t){for(var i=[],o=t.length,a=0;a!==o;a++)i.push(t.pop());for(a=0;a!==o;a++)t[a]=i[a]}(t),!0)}};var o=[],a=[];function collinear(t,i,u,d){if(d){var b=o,S=a;b[0]=i[0]-t[0],b[1]=i[1]-t[1],S[0]=u[0]-i[0],S[1]=u[1]-i[1];var C=b[0]*S[0]+b[1]*S[1],M=Math.sqrt(b[0]*b[0]+b[1]*b[1]),P=Math.sqrt(S[0]*S[0]+S[1]*S[1]);return Math.acos(C/(M*P))<d}return 0===triangleArea(t,i,u)}function sqdist(t,i){var o=i[0]-t[0],a=i[1]-t[1];return o*o+a*a}function polygonAt(t,i){var o=t.length;return t[i<0?i%o+o:i%o]}function polygonAppend(t,i,o,a){for(var u=o;u<a;u++)t.push(i[u])}function polygonIsReflex(t,i){return isRight(polygonAt(t,i-1),polygonAt(t,i),polygonAt(t,i+1))}var u=[],d=[];function polygonCanSee(t,i,o){var a,b,S=u,C=d;if(isLeftOn(polygonAt(t,i+1),polygonAt(t,i),polygonAt(t,o))&&isRightOn(polygonAt(t,i-1),polygonAt(t,i),polygonAt(t,o)))return!1;b=sqdist(polygonAt(t,i),polygonAt(t,o));for(var M=0;M!==t.length;++M)if((M+1)%t.length!==i&&M!==i&&isLeftOn(polygonAt(t,i),polygonAt(t,o),polygonAt(t,M+1))&&isRightOn(polygonAt(t,i),polygonAt(t,o),polygonAt(t,M))&&(S[0]=polygonAt(t,i),S[1]=polygonAt(t,o),C[0]=polygonAt(t,M),C[1]=polygonAt(t,M+1),a=lineInt(S,C),sqdist(polygonAt(t,i),a)<b))return!1;return!0}function polygonCanSee2(t,i,o){for(var a=0;a!==t.length;++a)if(a!==i&&a!==o&&(a+1)%t.length!==i&&(a+1)%t.length!==o&&lineSegmentsIntersect(polygonAt(t,i),polygonAt(t,o),polygonAt(t,a),polygonAt(t,a+1)))return!1;return!0}function polygonCopy(t,i,o,a){var u=a||[];if(function polygonClear(t){t.length=0}(u),i<o)for(var d=i;d<=o;d++)u.push(t[d]);else{for(d=0;d<=o;d++)u.push(t[d]);for(d=i;d<t.length;d++)u.push(t[d])}return u}function polygonGetCutEdges(t){for(var i=[],o=[],a=[],u=[],d=Number.MAX_VALUE,b=0;b<t.length;++b)if(polygonIsReflex(t,b))for(var S=0;S<t.length;++S)if(polygonCanSee(t,b,S)){o=polygonGetCutEdges(polygonCopy(t,b,S,u)),a=polygonGetCutEdges(polygonCopy(t,S,b,u));for(var C=0;C<a.length;C++)o.push(a[C]);o.length<d&&(i=o,d=o.length,i.push([polygonAt(t,b),polygonAt(t,S)]))}return i}function polygonSlice(t,i){if(0===i.length)return[t];if(i instanceof Array&&i.length&&i[0]instanceof Array&&2===i[0].length&&i[0][0]instanceof Array){for(var o=[t],a=0;a<i.length;a++)for(var u=i[a],d=0;d<o.length;d++){var b=polygonSlice(o[d],u);if(b){o.splice(d,1),o.push(b[0],b[1]);break}}return o}return u=i,a=t.indexOf(u[0]),d=t.indexOf(u[1]),-1!==a&&-1!==d&&[polygonCopy(t,a,d),polygonCopy(t,d,a)]}function getIntersectionPoint(t,i,o,a,u){u=u||0;var d=i[1]-t[1],b=t[0]-i[0],S=d*t[0]+b*t[1],C=a[1]-o[1],M=o[0]-a[0],P=C*o[0]+M*o[1],R=d*M-C*b;return scalar_eq(R,0,u)?[0,0]:[(M*S-b*P)/R,(d*P-C*S)/R]}function scalar_eq(t,i,o){return o=o||0,Math.abs(t-i)<=o}function points_eq(t,i,o){return scalar_eq(t[0],i[0],o)&&scalar_eq(t[1],i[1],o)}},function(t,i,o){var a=o(86),u=o(0),d=o(591),b=o(128),S=o(592),C=o(1395),M=o(1396),P=o(1397),R=o(593),O=o(589),B=o(590),N=o(1398),Y=o(64),G=new u({initialize:function Factory(t){this.world=t,this.scene=t.scene,this.sys=t.scene.sys},rectangle:function rectangle(t,i,o,u,d){var b=a.rectangle(t,i,o,u,d);return this.world.add(b),b},trapezoid:function trapezoid(t,i,o,u,d,b){var S=a.trapezoid(t,i,o,u,d,b);return this.world.add(S),S},circle:function circle(t,i,o,u,d){var b=a.circle(t,i,o,u,d);return this.world.add(b),b},polygon:function polygon(t,i,o,u,d){var b=a.polygon(t,i,o,u,d);return this.world.add(b),b},fromVertices:function fromVertices(t,i,o,u,d,b,S){"string"==typeof o&&(o=Y.fromPath(o));var C=a.fromVertices(t,i,o,u,d,b,S);return this.world.add(C),C},fromPhysicsEditor:function fromPhysicsEditor(t,i,o,a,u){void 0===u&&(u=!0);var d=O.parseBody(t,i,o,a);return u&&!this.world.has(d)&&this.world.add(d),d},fromSVG:function fromSVG(t,i,o,u,d,b){void 0===u&&(u=1),void 0===d&&(d={}),void 0===b&&(b=!0);for(var C=o.getElementsByTagName("path"),M=[],P=0;P<C.length;P++){var R=S.pathToVertices(C[P],30);1!==u&&Y.scale(R,u,u),M.push(R)}var O=a.fromVertices(t,i,M,d);return b&&this.world.add(O),O},fromJSON:function fromJSON(t,i,o,a,u){void 0===a&&(a={}),void 0===u&&(u=!0);var d=B.parseBody(t,i,o,a);return d&&u&&this.world.add(d),d},imageStack:function imageStack(t,i,o,a,u,b,S,C,P){void 0===S&&(S=0),void 0===C&&(C=0),void 0===P&&(P={});var R=this.world,O=this.sys.displayList;P.addToWorld=!1;var B=d.stack(o,a,u,b,S,C,(function(o,a){var u=new M(R,o,a,t,i,P);return O.add(u),u.body}));return R.add(B),B},stack:function stack(t,i,o,a,u,b,S){var stack=d.stack(t,i,o,a,u,b,S);return this.world.add(stack),stack},pyramid:function pyramid(t,i,o,a,u,b,S){var C=d.pyramid(t,i,o,a,u,b,S);return this.world.add(C),C},chain:function chain(t,i,o,a,u,b){return d.chain(t,i,o,a,u,b)},mesh:function mesh(t,i,o,a,u){return d.mesh(t,i,o,a,u)},newtonsCradle:function newtonsCradle(t,i,o,a,u){var b=d.newtonsCradle(t,i,o,a,u);return this.world.add(b),b},car:function car(t,i,o,a,u){var b=d.car(t,i,o,a,u);return this.world.add(b),b},softBody:function softBody(t,i,o,a,u,b,S,C,M,P){var R=d.softBody(t,i,o,a,u,b,S,C,M,P);return this.world.add(R),R},joint:function joint(t,i,o,a,u){return this.constraint(t,i,o,a,u)},spring:function spring(t,i,o,a,u){return this.constraint(t,i,o,a,u)},constraint:function constraint(t,i,o,a,u){void 0===a&&(a=1),void 0===u&&(u={}),u.bodyA="body"===t.type?t:t.body,u.bodyB="body"===i.type?i:i.body,isNaN(o)||(u.length=o),u.stiffness=a;var constraint=b.create(u);return this.world.add(constraint),constraint},worldConstraint:function worldConstraint(t,i,o,a){void 0===o&&(o=1),void 0===a&&(a={}),a.bodyB="body"===t.type?t:t.body,isNaN(i)||(a.length=i),a.stiffness=o;var u=b.create(a);return this.world.add(u),u},mouseSpring:function mouseSpring(t){return this.pointerConstraint(t)},pointerConstraint:function pointerConstraint(t){void 0===t&&(t={}),t.hasOwnProperty("render")||(t.render={visible:!1});var pointerConstraint=new N(this.scene,this.world,t);return this.world.add(pointerConstraint.constraint),pointerConstraint},image:function image(t,i,o,a,u){var image=new M(this.world,t,i,o,a,u);return this.sys.displayList.add(image),image},tileBody:function tileBody(t,i){return new R(this.world,t,i)},sprite:function sprite(t,i,o,a,u){var sprite=new P(this.world,t,i,o,a,u);return this.sys.displayList.add(sprite),this.sys.updateList.add(sprite),sprite},gameObject:function gameObject(t,i,o){return C(this.world,t,i,o)},destroy:function destroy(){this.world=null,this.scene=null,this.sys=null}});t.exports=G},function(t,i,o){var a=o(249),u=o(2),d=o(3);t.exports=function MatterGameObject(t,i,o,b){void 0===o&&(o={}),void 0===b&&(b=!0);var S=i.x,C=i.y;if(i.body={temp:!0,position:{x:S,y:C}},[a.Bounce,a.Collision,a.Force,a.Friction,a.Gravity,a.Mass,a.Sensor,a.SetBody,a.Sleep,a.Static,a.Transform,a.Velocity].forEach((function(t){for(var o in t)(a=t[o]).get&&"function"==typeof a.get||a.set&&"function"==typeof a.set?Object.defineProperty(i,o,{get:t[o].get,set:t[o].set}):Object.defineProperty(i,o,{value:t[o]});var a})),i.world=t,i._tempVec2=new d(S,C),o.hasOwnProperty("type")&&"body"===o.type)i.setExistingBody(o,b);else{var M=u(o,"shape",null);M||(M="rectangle"),o.addToWorld=b,i.setBody(M,o)}return i}},function(t,i,o){var a=o(0),u=o(249),d=o(15),b=o(2),S=o(125),C=o(167),M=o(3),P=new a({Extends:S,Mixins:[u.Bounce,u.Collision,u.Force,u.Friction,u.Gravity,u.Mass,u.Sensor,u.SetBody,u.Sleep,u.Static,u.Transform,u.Velocity,C],initialize:function MatterImage(t,i,o,a,u,S){d.call(this,t.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(a,u),this.setSizeToFrame(),this.setOrigin(),this.world=t,this._tempVec2=new M(i,o);var C=b(S,"shape",null);C?this.setBody(C,S):this.setRectangle(this.width,this.height,S),this.setPosition(i,o),this.initPipeline()}});t.exports=P},function(t,i,o){var a=o(164),u=o(0),d=o(249),b=o(15),S=o(2),C=o(167),M=o(73),P=o(3),R=new u({Extends:M,Mixins:[d.Bounce,d.Collision,d.Force,d.Friction,d.Gravity,d.Mass,d.Sensor,d.SetBody,d.Sleep,d.Static,d.Transform,d.Velocity,C],initialize:function MatterSprite(t,i,o,u,d,C){b.call(this,t.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new a(this),this.setTexture(u,d),this.setSizeToFrame(),this.setOrigin(),this.world=t,this._tempVec2=new P(i,o);var M=S(C,"shape",null);M?this.setBody(M,C):this.setRectangle(this.width,this.height,C),this.setPosition(i,o),this.initPipeline()}});t.exports=R},function(t,i,o){var a=o(84),u=o(0),d=o(118),b=o(128),S=o(273),C=o(272),M=o(51),P=o(127),R=o(165),O=o(3),B=o(64),N=new u({initialize:function PointerConstraint(t,i,o){void 0===o&&(o={}),this.scene=t,this.world=i,this.camera=null,this.pointer=null,this.active=!0,this.position=new O,this.body=null,this.part=null,this.constraint=b.create(P(o,{label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}})),this.world.on(C.BEFORE_UPDATE,this.update,this),t.sys.input.on(M.POINTER_DOWN,this.onDown,this),t.sys.input.on(M.POINTER_UP,this.onUp,this)},onDown:function onDown(t){this.pointer||(this.pointer=t,this.camera=t.camera)},onUp:function onUp(t){t===this.pointer&&(this.pointer=null)},getBody:function getBody(t){var i=this.position,o=this.constraint;this.camera.getWorldPoint(t.x,t.y,i);for(var u=d.allBodies(this.world.localWorld),b=0;b<u.length;b++){var M=u[b];if(!M.ignorePointer&&a.contains(M.bounds,i)&&S.canCollide(M.collisionFilter,o.collisionFilter)&&this.hitTestBody(M,i))return this.world.emit(C.DRAG_START,M,this.part,this),!0}return!1},hitTestBody:function hitTestBody(t,i){for(var o=this.constraint,a=t.parts.length,u=a>1?1:0;u<a;u++){var d=t.parts[u];if(B.contains(d.vertices,i))return o.pointA=i,o.pointB={x:i.x-t.position.x,y:i.y-t.position.y},o.bodyB=t,o.angleB=t.angle,R.set(t,!1),this.part=d,this.body=t,!0}return!1},update:function update(){var t=this.pointer,i=this.body;if(this.active&&t)if(t.isDown||!i){if(t.isDown){if(!i&&!this.getBody(t))return;i=this.body;var o=this.position,a=this.constraint;this.camera.getWorldPoint(t.x,t.y,o),a.pointA.x=o.x,a.pointA.y=o.y,R.set(i,!1),this.world.emit(C.DRAG,i,this)}}else this.stopDrag();else i&&this.stopDrag()},stopDrag:function stopDrag(){var t=this.body,i=this.constraint;i.bodyB=null,i.pointB=null,this.pointer=null,this.body=null,this.part=null,t&&this.world.emit(C.DRAG_END,t,this)},destroy:function destroy(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(C.BEFORE_UPDATE,this.update),this.scene.sys.input.off(M.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(M.POINTER_UP,this.onUp,this)}});t.exports=N},function(t,i,o){var a={};t.exports=a;var u=o(595),d=o(32);a.name="matter-js",a.version="0.14.2",a.uses=[],a.used=[],a.use=function(){u.use(a,Array.prototype.slice.call(arguments))},a.before=function(t,i){return t=t.replace(/^Matter./,""),d.chainPathBefore(a,t,i)},a.after=function(t,i){return t=t.replace(/^Matter./,""),d.chainPathAfter(a,t,i)}},function(t,i,o){var a={};t.exports=a;var u=o(83),d=o(274),b=o(84),S=o(86),C=o(64);a.collides=function(t,i){for(var o=[],a=0;a<i.length;a++){var u=i[a];if(t!==u&&b.overlaps(u.bounds,t.bounds))for(var S=1===u.parts.length?0:1;S<u.parts.length;S++){var C=u.parts[S];if(b.overlaps(C.bounds,t.bounds)){var M=d.collides(C,t);if(M.collided){o.push(M);break}}}}return o},a.ray=function(t,i,o,d){d=d||1e-100;for(var b=u.angle(i,o),C=u.magnitude(u.sub(i,o)),M=.5*(o.x+i.x),P=.5*(o.y+i.y),R=S.rectangle(M,P,C,d,{angle:b}),O=a.collides(R,t),B=0;B<O.length;B+=1){var N=O[B];N.body=N.bodyB=N.bodyA}return O},a.region=function(t,i,o){for(var a=[],u=0;u<t.length;u++){var d=t[u],S=b.overlaps(d.bounds,i);(S&&!o||!S&&o)&&a.push(d)}return a},a.point=function(t,i){for(var o=[],a=0;a<t.length;a++){var u=t[a];if(b.contains(u.bounds,i))for(var d=1===u.parts.length?0:1;d<u.parts.length;d++){var S=u.parts[d];if(b.contains(S.bounds,i)&&C.contains(S.vertices,i)){o.push(u);break}}}return o}},function(t,i,o){var a={};t.exports=a;var u=o(596),d=o(165),b=o(599),S=o(598),C=o(1523),M=o(597),P=o(166),R=o(118),O=o(128),B=o(32),N=o(41);a.create=function(t,i){i=(i=B.isElement(t)?i:t)||{},((t=B.isElement(t)?t:null)||i.render)&&B.warn("Engine.create: engine.render is deprecated (see docs)");var o={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:M}},a=B.extend(o,i);return a.world=i.world||u.create(a.world),a.pairs=S.create(),a.broadphase=a.broadphase.controller.create(a.broadphase),a.metrics=a.metrics||{extended:!1},a.metrics=C.create(a.metrics),a},a.update=function(t,i,o){i=i||1e3/60,o=o||1;var u,M=t.world,B=t.timing,N=t.broadphase,Y=[];B.timestamp+=i*B.timeScale;var G={timestamp:B.timestamp};P.trigger(t,"beforeUpdate",G);var X=R.allBodies(M),U=R.allConstraints(M);for(C.reset(t.metrics),t.enableSleeping&&d.update(X,B.timeScale),a._bodiesApplyGravity(X,M.gravity),a._bodiesUpdate(X,i,B.timeScale,o,M.bounds),O.preSolveAll(X),u=0;u<t.constraintIterations;u++)O.solveAll(U,B.timeScale);O.postSolveAll(X),N.controller?(M.isModified&&N.controller.clear(N),N.controller.update(N,X,t,M.isModified),Y=N.pairsList):Y=X,M.isModified&&R.setModified(M,!1,!1,!0);var z=N.detector(Y,t),V=t.pairs,W=B.timestamp;for(S.update(V,z,W),S.removeOld(V,W),t.enableSleeping&&d.afterCollisions(V.list,B.timeScale),V.collisionStart.length>0&&P.trigger(t,"collisionStart",{pairs:V.collisionStart}),b.preSolvePosition(V.list),u=0;u<t.positionIterations;u++)b.solvePosition(V.list,X,B.timeScale);for(b.postSolvePosition(X),O.preSolveAll(X),u=0;u<t.constraintIterations;u++)O.solveAll(U,B.timeScale);for(O.postSolveAll(X),b.preSolveVelocity(V.list),u=0;u<t.velocityIterations;u++)b.solveVelocity(V.list,B.timeScale);return V.collisionActive.length>0&&P.trigger(t,"collisionActive",{pairs:V.collisionActive}),V.collisionEnd.length>0&&P.trigger(t,"collisionEnd",{pairs:V.collisionEnd}),C.update(t.metrics,t),a._bodiesClearForces(X),P.trigger(t,"afterUpdate",G),t},a.merge=function(t,i){if(B.extend(t,i),i.world){t.world=i.world,a.clear(t);for(var o=R.allBodies(t.world),u=0;u<o.length;u++){var b=o[u];d.set(b,!1),b.id=B.nextId()}}},a.clear=function(t){var i=t.world;S.clear(t.pairs);var o=t.broadphase;if(o.controller){var a=R.allBodies(i);o.controller.clear(o),o.controller.update(o,a,t,!0)}},a._bodiesClearForces=function(t){for(var i=0;i<t.length;i++){var o=t[i];o.force.x=0,o.force.y=0,o.torque=0}},a._bodiesApplyGravity=function(t,i){var o=void 0!==i.scale?i.scale:.001;if((0!==i.x||0!==i.y)&&0!==o)for(var a=0;a<t.length;a++){var u=t[a];u.ignoreGravity||u.isStatic||u.isSleeping||(u.force.x+=u.mass*i.x*o*u.gravityScale.x,u.force.y+=u.mass*i.y*o*u.gravityScale.y)}},a._bodiesUpdate=function(t,i,o,a,u){for(var d=0;d<t.length;d++){var b=t[d];b.isStatic||b.isSleeping||N.update(b,i,o,a)}}},function(t,i,o){var a=o(86),u=o(41),d=o(0),b=o(32),S=o(118),C=o(1401),M=o(9),P=o(272),R=o(2),O=o(6),B=o(41),N=o(166),Y=o(593),G=o(596),X=o(83),U=new d({Extends:M,initialize:function World(t,i){M.call(this),this.scene=t,this.engine=C.create(i),this.localWorld=this.engine.world;var o=O(i,"gravity",null);o?this.setGravity(o.x,o.y,o.scale):!1===o&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=O(i,"enabled",!0),this.correction=O(i,"correction",1),this.getDelta=O(i,"getDelta",this.update60Hz);var a=R(i,"runner",{}),u=R(a,"fps",!1),d=R(a,"fps",60),b=R(a,"delta",1e3/d),S=R(a,"deltaMin",1e3/d),P=R(a,"deltaMax",1e3/(.5*d));u||(d=1e3/b),this.runner={fps:d,correction:R(a,"correction",1),deltaSampleSize:R(a,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:R(a,"isFixed",!1),delta:b,deltaMin:S,deltaMax:P},this.autoUpdate=O(i,"autoUpdate",!0);var B=O(i,"debug",!1);if(this.drawDebug="object"===_typeof(B)||B,this.debugGraphic,this.debugConfig={showAxes:R(B,"showAxes",!1),showAngleIndicator:R(B,"showAngleIndicator",!1),angleColor:R(B,"angleColor",15208787),showBroadphase:R(B,"showBroadphase",!1),broadphaseColor:R(B,"broadphaseColor",16757760),showBounds:R(B,"showBounds",!1),boundsColor:R(B,"boundsColor",16777215),showVelocity:R(B,"showVelocity",!1),velocityColor:R(B,"velocityColor",44783),showCollisions:R(B,"showCollisions",!1),collisionColor:R(B,"collisionColor",16094476),showSeparations:R(B,"showSeparations",!1),separationColor:R(B,"separationColor",16753920),showBody:R(B,"showBody",!0),showStaticBody:R(B,"showStaticBody",!0),showInternalEdges:R(B,"showInternalEdges",!1),renderFill:R(B,"renderFill",!1),renderLine:R(B,"renderLine",!0),fillColor:R(B,"fillColor",1075465),fillOpacity:R(B,"fillOpacity",1),lineColor:R(B,"lineColor",2678297),lineOpacity:R(B,"lineOpacity",1),lineThickness:R(B,"lineThickness",1),staticFillColor:R(B,"staticFillColor",857979),staticLineColor:R(B,"staticLineColor",1255396),showSleeping:R(B,"showSleeping",!1),staticBodySleepOpacity:R(B,"staticBodySleepOpacity",.7),sleepFillColor:R(B,"sleepFillColor",4605510),sleepLineColor:R(B,"sleepLineColor",10066585),showSensors:R(B,"showSensors",!0),sensorFillColor:R(B,"sensorFillColor",857979),sensorLineColor:R(B,"sensorLineColor",1255396),showPositions:R(B,"showPositions",!0),positionSize:R(B,"positionSize",4),positionColor:R(B,"positionColor",14697178),showJoint:R(B,"showJoint",!0),jointColor:R(B,"jointColor",14737474),jointLineOpacity:R(B,"jointLineOpacity",1),jointLineThickness:R(B,"jointLineThickness",2),pinSize:R(B,"pinSize",4),pinColor:R(B,"pinColor",4382944),springColor:R(B,"springColor",14697184),anchorColor:R(B,"anchorColor",15724527),anchorSize:R(B,"anchorSize",4),showConvexHulls:R(B,"showConvexHulls",!1),hullColor:R(B,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),R(i,"setBounds",!1)){var N=i.setBounds;if("boolean"==typeof N)this.setBounds();else{var Y=R(N,"x",0),G=R(N,"y",0),X=R(N,"width",t.sys.scale.width),U=R(N,"height",t.sys.scale.height),z=R(N,"thickness",64),V=R(N,"left",!0),W=R(N,"right",!0),H=R(N,"top",!0),j=R(N,"bottom",!0);this.setBounds(Y,G,X,U,z,V,W,H,j)}}},setCompositeRenderStyle:function setCompositeRenderStyle(t){var i,o,a,u=t.bodies,d=t.constraints,b=t.composites;for(i=0;i<u.length;i++)a=(o=u[i]).render,this.setBodyRenderStyle(o,a.lineColor,a.lineOpacity,a.lineThickness,a.fillColor,a.fillOpacity);for(i=0;i<d.length;i++)a=(o=d[i]).render,this.setConstraintRenderStyle(o,a.lineColor,a.lineOpacity,a.lineThickness,a.pinSize,a.anchorColor,a.anchorSize);for(i=0;i<b.length;i++)o=b[i],this.setCompositeRenderStyle(o);return this},setBodyRenderStyle:function setBodyRenderStyle(t,i,o,a,u,d){var b=t.render,S=this.debugConfig;return b?(null==i&&(i=t.isStatic?S.staticLineColor:S.lineColor),null==o&&(o=S.lineOpacity),null==a&&(a=S.lineThickness),null==u&&(u=t.isStatic?S.staticFillColor:S.fillColor),null==d&&(d=S.fillOpacity),!1!==i&&(b.lineColor=i),!1!==o&&(b.lineOpacity=o),!1!==a&&(b.lineThickness=a),!1!==u&&(b.fillColor=u),!1!==d&&(b.fillOpacity=d),this):this},setConstraintRenderStyle:function setConstraintRenderStyle(t,i,o,a,u,d,b){var S=t.render,C=this.debugConfig;if(!S)return this;if(null==i){var M=S.type;"line"===M?i=C.jointColor:"pin"===M?i=C.pinColor:"spring"===M&&(i=C.springColor)}return null==o&&(o=C.jointLineOpacity),null==a&&(a=C.jointLineThickness),null==u&&(u=C.pinSize),null==d&&(d=C.anchorColor),null==b&&(b=C.anchorSize),!1!==i&&(S.lineColor=i),!1!==o&&(S.lineOpacity=o),!1!==a&&(S.lineThickness=a),!1!==u&&(S.pinSize=u),!1!==d&&(S.anchorColor=d),!1!==b&&(S.anchorSize=b),this},setEventsProxy:function setEventsProxy(){var t=this,i=this.engine,o=this.localWorld;this.drawDebug&&(N.on(o,"compositeModified",(function(i){t.setCompositeRenderStyle(i)})),N.on(o,"beforeAdd",(function(i){for(var o=[].concat(i.object),a=0;a<o.length;a++){var u=o[a],d=u.render;"body"===u.type?t.setBodyRenderStyle(u,d.lineColor,d.lineOpacity,d.lineThickness,d.fillColor,d.fillOpacity):"composite"===u.type?t.setCompositeRenderStyle(u):"constraint"===u.type&&t.setConstraintRenderStyle(u,d.lineColor,d.lineOpacity,d.lineThickness,d.pinSize,d.anchorColor,d.anchorSize)}}))),N.on(o,"beforeAdd",(function(i){t.emit(P.BEFORE_ADD,i)})),N.on(o,"afterAdd",(function(i){t.emit(P.AFTER_ADD,i)})),N.on(o,"beforeRemove",(function(i){t.emit(P.BEFORE_REMOVE,i)})),N.on(o,"afterRemove",(function(i){t.emit(P.AFTER_REMOVE,i)})),N.on(i,"beforeUpdate",(function(i){t.emit(P.BEFORE_UPDATE,i)})),N.on(i,"afterUpdate",(function(i){t.emit(P.AFTER_UPDATE,i)})),N.on(i,"collisionStart",(function(i){var o,a,u=i.pairs;u.length>0&&(o=u[0].bodyA,a=u[0].bodyB),t.emit(P.COLLISION_START,i,o,a)})),N.on(i,"collisionActive",(function(i){var o,a,u=i.pairs;u.length>0&&(o=u[0].bodyA,a=u[0].bodyB),t.emit(P.COLLISION_ACTIVE,i,o,a)})),N.on(i,"collisionEnd",(function(i){var o,a,u=i.pairs;u.length>0&&(o=u[0].bodyA,a=u[0].bodyB),t.emit(P.COLLISION_END,i,o,a)}))},setBounds:function setBounds(t,i,o,a,u,d,b,S,C){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=this.scene.sys.scale.width),void 0===a&&(a=this.scene.sys.scale.height),void 0===u&&(u=64),void 0===d&&(d=!0),void 0===b&&(b=!0),void 0===S&&(S=!0),void 0===C&&(C=!0),this.updateWall(d,"left",t-u,i-u,u,a+2*u),this.updateWall(b,"right",t+o,i-u,u,a+2*u),this.updateWall(S,"top",t,i-u,o,u),this.updateWall(C,"bottom",t,i+a,o,u),this},updateWall:function updateWall(t,i,o,a,u,d){var b=this.walls[i];t?(b&&G.remove(this.localWorld,b),o+=u/2,a+=d/2,this.walls[i]=this.create(o,a,u,d,{isStatic:!0,friction:0,frictionStatic:0})):(b&&G.remove(this.localWorld,b),this.walls[i]=null)},createDebugGraphic:function createDebugGraphic(){var t=this.scene.sys.add.graphics({x:0,y:0});return t.setDepth(Number.MAX_VALUE),this.debugGraphic=t,this.drawDebug=!0,t},disableGravity:function disableGravity(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function setGravity(t,i,o){return void 0===t&&(t=0),void 0===i&&(i=1),this.localWorld.gravity.x=t,this.localWorld.gravity.y=i,void 0!==o&&(this.localWorld.gravity.scale=o),this},create:function create(t,i,o,u,d){var b=a.rectangle(t,i,o,u,d);return G.add(this.localWorld,b),b},add:function add(t){return G.add(this.localWorld,t),this},remove:function remove(t,i){Array.isArray(t)||(t=[t]);for(var o=0;o<t.length;o++){var a=t[o],u=a.body?a.body:a;S.remove(this.localWorld,u,i)}return this},removeConstraint:function removeConstraint(t,i){return S.remove(this.localWorld,t,i),this},convertTilemapLayer:function convertTilemapLayer(t,i){var o=t.layer,a=t.getTilesWithin(0,0,o.width,o.height,{isColliding:!0});return this.convertTiles(a,i),this},convertTiles:function convertTiles(t,i){if(0===t.length)return this;for(var o=0;o<t.length;o++)new Y(this,t[o],i);return this},nextGroup:function nextGroup(t){return B.nextGroup(t)},nextCategory:function nextCategory(){return B.nextCategory()},pause:function pause(){return this.enabled=!1,this.emit(P.PAUSE),this},resume:function resume(){return this.enabled=!0,this.emit(P.RESUME),this},update:function update(t,i){if(this.enabled&&this.autoUpdate){var o=this.engine,a=this.runner,u=o.timing,d=this.correction;a.isFixed?i=this.getDelta(t,i):(i=t-a.timePrev||a.delta,a.timePrev=t,a.deltaHistory.push(i),a.deltaHistory=a.deltaHistory.slice(-a.deltaSampleSize),d=(i=(i=(i=Math.min.apply(null,a.deltaHistory))<a.deltaMin?a.deltaMin:i)>a.deltaMax?a.deltaMax:i)/a.delta,a.delta=i),0!==a.timeScalePrev&&(d*=u.timeScale/a.timeScalePrev),0===u.timeScale&&(d=0),a.timeScalePrev=u.timeScale,a.correction=d,a.frameCounter+=1,t-a.counterTimestamp>=1e3&&(a.fps=a.frameCounter*((t-a.counterTimestamp)/1e3),a.counterTimestamp=t,a.frameCounter=0),C.update(o,i,d)}},step:function step(t,i){C.update(this.engine,t,i)},update60Hz:function update60Hz(){return 1e3/60},update30Hz:function update30Hz(){return 1e3/30},has:function has(t){var i=t.hasOwnProperty("body")?t.body:t;return null!==S.get(this.localWorld,i.id,i.type)},getAllBodies:function getAllBodies(){return S.allBodies(this.localWorld)},getAllConstraints:function getAllConstraints(){return S.allConstraints(this.localWorld)},getAllComposites:function getAllComposites(){return S.allComposites(this.localWorld)},postUpdate:function postUpdate(){if(this.drawDebug){var t=this.debugConfig,i=this.engine,o=this.debugGraphic,a=S.allBodies(this.localWorld);this.debugGraphic.clear(),t.showBroadphase&&i.broadphase.controller&&this.renderGrid(i.broadphase,o,t.broadphaseColor,.5),t.showBounds&&this.renderBodyBounds(a,o,t.boundsColor,.5),(t.showBody||t.showStaticBody)&&this.renderBodies(a),t.showJoint&&this.renderJoints(),(t.showAxes||t.showAngleIndicator)&&this.renderBodyAxes(a,o,t.showAxes,t.angleColor,.5),t.showVelocity&&this.renderBodyVelocity(a,o,t.velocityColor,1,2),t.showSeparations&&this.renderSeparations(i.pairs.list,o,t.separationColor),t.showCollisions&&this.renderCollisions(i.pairs.list,o,t.collisionColor)}},renderGrid:function renderGrid(t,i,o,a){i.lineStyle(1,o,a);for(var u=b.keys(t.buckets),d=0;d<u.length;d++){var S=u[d];if(!(t.buckets[S].length<2)){var C=S.split(/C|R/);i.strokeRect(parseInt(C[1],10)*t.bucketWidth,parseInt(C[2],10)*t.bucketHeight,t.bucketWidth,t.bucketHeight)}}return this},renderSeparations:function renderSeparations(t,i,o){i.lineStyle(1,o,1);for(var a=0;a<t.length;a++){var u=t[a];if(u.isActive){var d=u.collision,b=d.bodyA,S=d.bodyB,C=b.position,M=S.position,P=d.penetration,R=b.isStatic||S.isStatic?1:4;S.isStatic&&(R=0),i.lineBetween(M.x,M.y,M.x-P.x*R,M.y-P.y*R),R=b.isStatic||S.isStatic?1:4,b.isStatic&&(R=0),i.lineBetween(C.x,C.y,C.x-P.x*R,C.y-P.y*R)}}return this},renderCollisions:function renderCollisions(t,i,o){var a,u;for(i.lineStyle(1,o,.5),i.fillStyle(o,1),a=0;a<t.length;a++)if((u=t[a]).isActive)for(var d=0;d<u.activeContacts.length;d++){var b=u.activeContacts[d].vertex;i.fillRect(b.x-2,b.y-2,5,5)}for(a=0;a<t.length;a++)if((u=t[a]).isActive){var S=u.collision,C=u.activeContacts;if(C.length>0){var M=C[0].vertex.x,P=C[0].vertex.y;2===C.length&&(M=(C[0].vertex.x+C[1].vertex.x)/2,P=(C[0].vertex.y+C[1].vertex.y)/2),S.bodyB===S.supports[0].body||S.bodyA.isStatic?i.lineBetween(M-8*S.normal.x,P-8*S.normal.y,M,P):i.lineBetween(M+8*S.normal.x,P+8*S.normal.y,M,P)}}return this},renderBodyBounds:function renderBodyBounds(t,i,o,a){i.lineStyle(1,o,a);for(var u=0;u<t.length;u++){var d=t[u];if(d.render.visible){var b=d.bounds;if(b)i.strokeRect(b.min.x,b.min.y,b.max.x-b.min.x,b.max.y-b.min.y);else for(var S=d.parts,C=S.length>1?1:0;C<S.length;C++){var M=S[C];i.strokeRect(M.bounds.min.x,M.bounds.min.y,M.bounds.max.x-M.bounds.min.x,M.bounds.max.y-M.bounds.min.y)}}}return this},renderBodyAxes:function renderBodyAxes(t,i,o,a,u){i.lineStyle(1,a,u);for(var d=0;d<t.length;d++){var b,S,C,M=t[d],P=M.parts;if(M.render.visible)if(o)for(S=P.length>1?1:0;S<P.length;S++)for(b=P[S],C=0;C<b.axes.length;C++){var R=b.axes[C];i.lineBetween(b.position.x,b.position.y,b.position.x+20*R.x,b.position.y+20*R.y)}else for(S=P.length>1?1:0;S<P.length;S++)for(b=P[S],C=0;C<b.axes.length;C++)i.lineBetween(b.position.x,b.position.y,(b.vertices[0].x+b.vertices[b.vertices.length-1].x)/2,(b.vertices[0].y+b.vertices[b.vertices.length-1].y)/2)}return this},renderBodyVelocity:function renderBodyVelocity(t,i,o,a,u){i.lineStyle(u,o,a);for(var d=0;d<t.length;d++){var b=t[d];b.render.visible&&i.lineBetween(b.position.x,b.position.y,b.position.x+2*(b.position.x-b.positionPrev.x),b.position.y+2*(b.position.y-b.positionPrev.y))}return this},renderBodies:function renderBodies(t){for(var i=this.debugGraphic,o=this.debugConfig,a=o.showBody,u=o.showStaticBody,d=o.showSleeping,b=o.showInternalEdges,S=o.showConvexHulls,C=o.renderFill,M=o.renderLine,P=o.staticBodySleepOpacity,R=o.sleepFillColor,O=o.sleepLineColor,B=o.hullColor,N=0;N<t.length;N++){var Y=t[N];if(Y.render.visible&&(u||!Y.isStatic)&&(a||Y.isStatic)){var G=Y.render.lineColor,X=Y.render.lineOpacity,U=Y.render.lineThickness,z=Y.render.fillColor,V=Y.render.fillOpacity;d&&Y.isSleeping&&(Y.isStatic?(X*=P,V*=P):(G=O,z=R)),C||(z=null),M||(G=null),this.renderBody(Y,i,b,G,X,U,z,V);var W=Y.parts.length;S&&W>1&&this.renderConvexHull(Y,i,B,U)}}},renderBody:function renderBody(t,i,o,a,u,d,b,S){void 0===a&&(a=null),void 0===u&&(u=null),void 0===d&&(d=1),void 0===b&&(b=null),void 0===S&&(S=null);for(var C=this.debugConfig,M=C.sensorFillColor,P=C.sensorLineColor,R=t.parts,O=R.length,B=O>1?1:0;B<O;B++){var N=R[B],Y=N.render,G=Y.opacity;if(Y.visible&&0!==G&&(!N.isSensor||C.showSensors)){var X=N.circleRadius;if(i.beginPath(),N.isSensor?(null!==b&&i.fillStyle(M,S*G),null!==a&&i.lineStyle(d,P,u*G)):(null!==b&&i.fillStyle(b,S*G),null!==a&&i.lineStyle(d,a,u*G)),X)i.arc(N.position.x,N.position.y,X,0,2*Math.PI);else{var U=N.vertices,z=U.length;i.moveTo(U[0].x,U[0].y);for(var V=1;V<z;V++){var W=U[V];if(!U[V-1].isInternal||o?i.lineTo(W.x,W.y):i.moveTo(W.x,W.y),V<z&&W.isInternal&&!o){var H=(V+1)%z;i.moveTo(U[H].x,U[H].y)}}i.closePath()}null!==b&&i.fillPath(),null!==a&&i.strokePath()}}if(C.showPositions&&!t.isStatic){var j=t.position.x,q=t.position.y,Z=Math.ceil(C.positionSize/2);i.fillStyle(C.positionColor,1),i.fillRect(j-Z,q-Z,C.positionSize,C.positionSize)}return this},renderConvexHull:function renderConvexHull(t,i,o,a){if(void 0===a&&(a=1),t.parts.length>1){var u=t.vertices;i.lineStyle(a,o),i.beginPath(),i.moveTo(u[0].x,u[0].y);for(var d=1;d<u.length;d++)i.lineTo(u[d].x,u[d].y);i.lineTo(u[0].x,u[0].y),i.strokePath()}return this},renderJoints:function renderJoints(){for(var t=this.debugGraphic,i=S.allConstraints(this.localWorld),o=0;o<i.length;o++){var a=i[o].render,u=a.lineColor,d=a.lineOpacity,b=a.lineThickness,C=a.pinSize,M=a.anchorColor,P=a.anchorSize;this.renderConstraint(i[o],t,u,d,b,C,M,P)}},renderConstraint:function renderConstraint(t,i,o,a,u,d,S,C){var M=t.render;if(!M.visible||!t.pointA||!t.pointB)return this;i.lineStyle(u,o,a);var P,R,O=t.bodyA,B=t.bodyB;if(P=O?X.add(O.position,t.pointA):t.pointA,"pin"===M.type)i.strokeCircle(P.x,P.y,d);else{if(R=B?X.add(B.position,t.pointB):t.pointB,i.beginPath(),i.moveTo(P.x,P.y),"spring"===M.type)for(var N,Y=X.sub(R,P),G=X.perp(X.normalise(Y)),U=Math.ceil(b.clamp(t.length/5,12,20)),z=1;z<U;z+=1)N=z%2==0?1:-1,i.lineTo(P.x+Y.x*(z/U)+G.x*N*4,P.y+Y.y*(z/U)+G.y*N*4);i.lineTo(R.x,R.y)}return i.strokePath(),M.anchors&&C>0&&(i.fillStyle(S),i.fillCircle(P.x,P.y,C),i.fillCircle(R.x,R.y,C)),this},resetCollisionIDs:function resetCollisionIDs(){return u._nextCollidingGroupId=1,u._nextNonCollidingGroupId=-1,u._nextCategory=1,this},shutdown:function shutdown(){N.off(this.engine),this.removeAllListeners(),G.clear(this.localWorld,!1),C.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function destroy(){this.shutdown()}});t.exports=U},function(t,i,o){t.exports={BasePlugin:o(540),DefaultPlugins:o(197),PluginCache:o(24),PluginManager:o(414),ScenePlugin:o(1404)}},function(t,i,o){var a=o(540),u=o(0),d=o(20),b=new u({Extends:a,initialize:function ScenePlugin(t,i,o){a.call(this,i),this.scene=t,this.systems=t.sys,this.pluginKey=o,t.sys.events.once(d.BOOT,this.boot,this)},boot:function boot(){},destroy:function destroy(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=b},function(t,i,o){t.exports={Canvas:o(1406),Events:o(91),Snapshot:o(1407),WebGL:o(1408)}},function(t,i,o){t.exports={CanvasRenderer:o(368),GetBlendModes:o(370),SetTransform:o(30)}},function(t,i,o){t.exports={Canvas:o(369),WebGL:o(383)}},function(t,i,o){var a=o(107),u=o(17),d={PipelineManager:o(372),Pipelines:o(1409),RenderTarget:o(141),Utils:o(12),WebGLPipeline:o(58),WebGLRenderer:o(371),WebGLShader:o(375)};d=u(!1,d,a),t.exports=d},function(t,i,o){var a=o(92),u=o(17),d={BitmapMaskPipeline:o(373),Events:o(374),GraphicsPipeline:o(376),LightPipeline:o(377),MultiPipeline:o(108),PointLightPipeline:o(378),PostFXPipeline:o(1410),RopePipeline:o(379),SinglePipeline:o(380),UtilityPipeline:o(381)};d=u(!1,d,a),t.exports=d},function(t,i,o){var a=o(0),u=o(198),d=o(2),b=o(1411),S=o(382),C=o(58),M=new a({Extends:C,initialize:function PostFXPipeline(t){t.renderTarget=d(t,"renderTarget",1),t.fragShader=d(t,"fragShader",b),t.vertShader=d(t,"vertShader",S),t.attributes=d(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.batchSize=1,t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],C.call(this,t),this.isPostFX=!0,this.gameObject,this.colorMatrix=new u,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function boot(){C.prototype.boot.call(this);var t=this.manager.UTILITY_PIPELINE;this.fullFrame1=t.fullFrame1,this.fullFrame2=t.fullFrame2,this.halfFrame1=t.halfFrame1,this.halfFrame2=t.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function onDraw(t){this.bindAndDraw(t)},copyFrame:function copyFrame(t,i,o,a,u){this.manager.copyFrame(t,i,o,a,u)},copyToGame:function copyToGame(t){this.manager.copyToGame(t)},drawFrame:function drawFrame(t,i,o){this.manager.drawFrame(t,i,o,this.colorMatrix)},blendFrames:function blendFrames(t,i,o,a,u){this.manager.blendFrames(t,i,o,a,u)},blendFramesAdditive:function blendFramesAdditive(t,i,o,a,u){this.manager.blendFramesAdditive(t,i,o,a,u)},clearFrame:function clearFrame(t,i){this.manager.clearFrame(t,i)},blitFrame:function blitFrame(t,i,o,a,u,d){this.manager.blitFrame(t,i,o,a,u,d)},copyFrameRect:function copyFrameRect(t,i,o,a,u,d,b,S){this.manager.copyFrameRect(t,i,o,a,u,d,b,S)},bindAndDraw:function bindAndDraw(t,i,o,a,u){void 0===o&&(o=!0),void 0===a&&(a=!0);var d=this.gl,b=this.renderer;this.bind(u),this.set1i("uMainSampler",0),i?(d.viewport(0,0,i.width,i.height),d.bindFramebuffer(d.FRAMEBUFFER,i.framebuffer),d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,i.texture,0),o&&(a?d.clearColor(0,0,0,0):d.clearColor(0,0,0,1),d.clear(d.COLOR_BUFFER_BIT))):(b.popFramebuffer(!1,!1,!1),b.currentFramebuffer||d.viewport(0,0,b.width,b.height)),d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,t.texture),d.bufferData(d.ARRAY_BUFFER,this.vertexData,d.STATIC_DRAW),d.drawArrays(d.TRIANGLES,0,6),i?(d.bindTexture(d.TEXTURE_2D,null),d.bindFramebuffer(d.FRAMEBUFFER,null)):b.resetTextures()}});t.exports=M},function(t,i){t.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join("\n")},function(t,i,o){var a=o(17),u=o(201),d={Center:o(403),Events:o(104),Orientation:o(404),ScaleManager:o(415),ScaleModes:o(405),Zoom:o(406)};d=a(!1,d,u.CENTER),d=a(!1,d,u.ORIENTATION),d=a(!1,d,u.SCALE_MODE),d=a(!1,d,u.ZOOM),t.exports=d},function(t,i,o){var a=o(144),u=o(17),d={Events:o(20),GetPhysicsPlugins:o(419),GetScenePlugins:o(420),SceneManager:o(417),ScenePlugin:o(1414),Settings:o(421),Systems:o(204)};d=u(!1,d,a),t.exports=d},function(t,i,o){var a=o(18),u=o(0),d=o(20),b=o(2),S=o(24),C=new u({initialize:function ScenePlugin(t){this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.key=t.sys.settings.key,this.manager=t.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,t.sys.events.once(d.BOOT,this.boot,this),t.sys.events.on(d.START,this.pluginStart,this)},boot:function boot(){this.systems.events.once(d.DESTROY,this.destroy,this)},pluginStart:function pluginStart(){this._target=null,this.systems.events.once(d.SHUTDOWN,this.shutdown,this)},start:function start(t,i){return void 0===t&&(t=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",t,i),this},restart:function restart(t){var i=this.key;return this.manager.queueOp("stop",i),this.manager.queueOp("start",i,t),this},transition:function transition(t){void 0===t&&(t={});var i=b(t,"target",!1),o=this.manager.getScene(i);if(!i||!this.checkValidTransition(o))return!1;var a=b(t,"duration",1e3);this._elapsed=0,this._target=o,this._duration=a,this._willSleep=b(t,"sleep",!1),this._willRemove=b(t,"remove",!1);var u=b(t,"onUpdate",null);u&&(this._onUpdate=u,this._onUpdateScope=b(t,"onUpdateScope",this.scene));var S=b(t,"allowInput",!1);this.settings.transitionAllowInput=S;var C=o.sys.settings;return C.isTransition=!0,C.transitionFrom=this.scene,C.transitionDuration=a,C.transitionAllowInput=S,b(t,"moveAbove",!1)?this.manager.moveAbove(this.key,i):b(t,"moveBelow",!1)&&this.manager.moveBelow(this.key,i),o.sys.isSleeping()?o.sys.wake(b(t,"data")):this.manager.start(i,b(t,"data")),this.systems.events.emit(d.TRANSITION_OUT,o,a),this.systems.events.on(d.UPDATE,this.step,this),!0},checkValidTransition:function checkValidTransition(t){return!(!t||t.sys.isActive()||t.sys.isTransitioning()||t===this.scene||this.systems.isTransitioning())},step:function step(t,i){this._elapsed+=i,this.transitionProgress=a(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function transitionComplete(){var t=this._target.sys,i=this._target.sys.settings;this.systems.events.off(d.UPDATE,this.step,this),t.events.emit(d.TRANSITION_COMPLETE,this.scene),i.isTransition=!1,i.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function add(t,i,o,a){return this.manager.add(t,i,o,a)},launch:function launch(t,i){return t&&t!==this.key&&this.manager.queueOp("start",t,i),this},run:function run(t,i){return t&&t!==this.key&&this.manager.queueOp("run",t,i),this},pause:function pause(t,i){return void 0===t&&(t=this.key),this.manager.queueOp("pause",t,i),this},resume:function resume(t,i){return void 0===t&&(t=this.key),this.manager.queueOp("resume",t,i),this},sleep:function sleep(t,i){return void 0===t&&(t=this.key),this.manager.queueOp("sleep",t,i),this},wake:function wake(t,i){return void 0===t&&(t=this.key),this.manager.queueOp("wake",t,i),this},switch:function _switch(t){return t!==this.key&&this.manager.queueOp("switch",this.key,t),this},stop:function stop(t,i){return void 0===t&&(t=this.key),this.manager.queueOp("stop",t,i),this},setActive:function setActive(t,i,o){void 0===i&&(i=this.key);var a=this.manager.getScene(i);return a&&a.sys.setActive(t,o),this},setVisible:function setVisible(t,i){void 0===i&&(i=this.key);var o=this.manager.getScene(i);return o&&o.sys.setVisible(t),this},isSleeping:function isSleeping(t){return void 0===t&&(t=this.key),this.manager.isSleeping(t)},isActive:function isActive(t){return void 0===t&&(t=this.key),this.manager.isActive(t)},isPaused:function isPaused(t){return void 0===t&&(t=this.key),this.manager.isPaused(t)},isVisible:function isVisible(t){return void 0===t&&(t=this.key),this.manager.isVisible(t)},swapPosition:function swapPosition(t,i){return void 0===i&&(i=this.key),t!==i&&this.manager.swapPosition(t,i),this},moveAbove:function moveAbove(t,i){return void 0===i&&(i=this.key),t!==i&&this.manager.moveAbove(t,i),this},moveBelow:function moveBelow(t,i){return void 0===i&&(i=this.key),t!==i&&this.manager.moveBelow(t,i),this},remove:function remove(t){return void 0===t&&(t=this.key),this.manager.remove(t),this},moveUp:function moveUp(t){return void 0===t&&(t=this.key),this.manager.moveUp(t),this},moveDown:function moveDown(t){return void 0===t&&(t=this.key),this.manager.moveDown(t),this},bringToTop:function bringToTop(t){return void 0===t&&(t=this.key),this.manager.bringToTop(t),this},sendToBack:function sendToBack(t){return void 0===t&&(t=this.key),this.manager.sendToBack(t),this},get:function get(t){return this.manager.getScene(t)},getIndex:function getIndex(t){return void 0===t&&(t=this.key),this.manager.getIndex(t)},shutdown:function shutdown(){var t=this.systems.events;t.off(d.SHUTDOWN,this.shutdown,this),t.off(d.POST_UPDATE,this.step,this),t.off(d.TRANSITION_OUT)},destroy:function destroy(){this.shutdown(),this.scene.sys.events.off(d.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});S.register("ScenePlugin",C,"scenePlugin"),t.exports=C},function(t,i,o){t.exports={Events:o(438),List:o(110),Map:o(102),ProcessQueue:o(211),RTree:o(531),Set:o(149),Size:o(416)}},function(t,i,o){var a=o(17),u=o(1417),d={CanvasTexture:o(423),Events:o(106),FilterMode:u,Frame:o(109),Parsers:o(425),Texture:o(206),TextureManager:o(422),TextureSource:o(424)};d=a(!1,d,u),t.exports=d},function(t,i){t.exports={LINEAR:0,NEAREST:1}},function(t,i,o){var a=o(17),u=o(1419),d={Components:o(251),Parsers:o(1452),Formats:o(40),ImageCollection:o(576),ParseToTilemap:o(262),Tile:o(85),Tilemap:o(580),TilemapCreator:o(1459),TilemapFactory:o(1460),Tileset:o(122),TilemapLayer:o(581),Orientation:o(29),LayerData:o(120),MapData:o(121),ObjectLayer:o(572)};d=a(!1,d,u.ORIENTATION),t.exports=d},function(t,i,o){var a={ORIENTATION:o(29)};t.exports=a},function(t,i,o){var a=o(26),u=o(63);t.exports=function Copy(t,i,o,d,b,S,C,M){void 0===C&&(C=!0),t<0&&(t=0),i<0&&(i=0);for(var P=a(t,i,o,d,null,M),R=b-t,O=S-i,B=0;B<P.length;B++){var N=P[B].x+R,Y=P[B].y+O;N>=0&&N<M.width&&Y>=0&&Y<M.height&&M.data[Y][N]&&M.data[Y][N].copy(P[B])}C&&u(b-1,S-1,o+2,d+2,M)}},function(t,i,o){var a=o(26),u=o(542);t.exports=function CreateFromTiles(t,i,o,d,b,S){o||(o={}),Array.isArray(t)||(t=[t]);var C=S.tilemapLayer;d||(d=C.scene),b||(b=d.cameras.main);var M,P=a(0,0,S.width,S.height,null,S),R=[];for(M=0;M<P.length;M++){var O=P[M];if(-1!==t.indexOf(O.index)){var B=C.tileToWorldXY(O.x,O.y,void 0,b,S);o.x=B.x,o.y=B.y,R.push(d.make.sprite(o))}}if("number"==typeof i)for(M=0;M<t.length;M++)u(t[M],i,0,0,S.width,S.height,S);else if(Array.isArray(i))for(M=0;M<t.length;M++)u(t[M],i[M],0,0,S.width,S.height,S);return R}},function(t,i,o){var a=o(26),u=o(63),d=o(72);t.exports=function Fill(t,i,o,b,S,C,M){for(var P=-1!==M.collideIndexes.indexOf(t),R=a(i,o,b,S,null,M),O=0;O<R.length;O++)R[O].index=t,d(R[O],P);C&&u(i-1,o-1,b+2,S+2,M)}},function(t,i,o){var a=o(26);t.exports=function FilterTiles(t,i,o,u,d,b,S,C){return a(o,u,d,b,S,C).filter(t,i)}},function(t,i){t.exports=function FindByIndex(t,i,o,a){void 0===i&&(i=0),void 0===o&&(o=!1);var u,d,b,S=0;if(o){for(d=a.height-1;d>=0;d--)for(u=a.width-1;u>=0;u--)if((b=a.data[d][u])&&b.index===t){if(S===i)return b;S+=1}}else for(d=0;d<a.height;d++)for(u=0;u<a.width;u++)if((b=a.data[d][u])&&b.index===t){if(S===i)return b;S+=1}return null}},function(t,i,o){var a=o(26);t.exports=function FindTile(t,i,o,u,d,b,S,C){return a(o,u,d,b,S,C).find(t,i)||null}},function(t,i,o){var a=o(26);t.exports=function ForEachTile(t,i,o,u,d,b,S,C){a(o,u,d,b,S,C).forEach(t,i)}},function(t,i,o){var a=o(29),u=o(544),d=o(545),b=o(547),S=o(1),C=o(548);t.exports=function GetCullTilesFunction(t){return t===a.ORTHOGONAL?u:t===a.HEXAGONAL?d:t===a.STAGGERED?C:t===a.ISOMETRIC?b:S}},function(t,i,o){var a=o(158),u=new(o(3));t.exports=function GetTileAtWorldXY(t,i,o,d,b){return b.tilemapLayer.worldToTileXY(t,i,!0,u,d),a(u.x,u.y,o,b)}},function(t,i,o){var a=o(483),u=o(26),d=o(484),b=o(1),S=o(3),C=function TriangleToRectangle(t,i){return d.RectangleToTriangle(i,t)},M=new S,P=new S,R=new S;t.exports=function GetTilesWithinShape(t,i,o,S){if(void 0===t)return[];var O=b;t instanceof a.Circle?O=d.CircleToRectangle:t instanceof a.Rectangle?O=d.RectangleToRectangle:t instanceof a.Triangle?O=C:t instanceof a.Line&&(O=d.LineToRectangle),S.tilemapLayer.worldToTileXY(t.left,t.top,!0,P,o);var B=P.x,N=P.y;S.tilemapLayer.worldToTileXY(t.right,t.bottom,!0,R,o);var Y=Math.ceil(R.x),G=Math.ceil(R.y),X=Math.max(Y-B,1),U=Math.max(G-N,1),z=u(B,N,X,U,i,S),V=S.tileWidth,W=S.tileHeight;S.tilemapLayer&&(V*=S.tilemapLayer.scaleX,W*=S.tilemapLayer.scaleY);for(var H=[],j=new a.Rectangle(0,0,V,W),q=0;q<z.length;q++){var Z=z[q];S.tilemapLayer.tileToWorldXY(Z.x,Z.y,M,o),j.x=M.x,j.y=M.y,O(t,j)&&H.push(Z)}return H}},function(t,i,o){var a=o(29),u=o(1),d=o(253);t.exports=function GetTileToWorldXFunction(t){return t===a.ORTHOGONAL?d:u}},function(t,i,o){var a=o(29),u=o(550),d=o(551),b=o(1),S=o(552),C=o(553);t.exports=function GetTileToWorldXYFunction(t){return t===a.ORTHOGONAL?C:t===a.ISOMETRIC?d:t===a.HEXAGONAL?u:t===a.STAGGERED?S:b}},function(t,i,o){var a=o(29),u=o(554),d=o(1),b=o(555),S=o(254);t.exports=function GetTileToWorldYFunction(t){return t===a.ORTHOGONAL?S:t===a.HEXAGONAL?u:t===a.STAGGERED?b:d}},function(t,i,o){var a=o(29),u=o(1),d=o(255);t.exports=function GetWorldToTileXFunction(t){return t===a.ORTHOGONAL?d:u}},function(t,i,o){var a=o(29),u=o(556),d=o(557),b=o(1),S=o(558),C=o(559);t.exports=function GetWorldToTileXYFunction(t){return t===a.ORTHOGONAL?C:t===a.ISOMETRIC?d:t===a.HEXAGONAL?u:t===a.STAGGERED?S:b}},function(t,i,o){var a=o(29),u=o(560),d=o(1),b=o(561),S=o(256);t.exports=function GetWorldToTileYFunction(t){return t===a.ORTHOGONAL?S:t===a.HEXAGONAL?u:t===a.STAGGERED?b:d}},function(t,i,o){var a=o(562),u=new(o(3));t.exports=function HasTileAtWorldXY(t,i,o,d){d.tilemapLayer.worldToTileXY(t,i,!0,u,o);var b=u.x,S=u.y;return a(b,S,d)}},function(t,i,o){var a=o(257),u=new(o(3));t.exports=function PutTileAtWorldXY(t,i,o,d,b,S){return S.tilemapLayer.worldToTileXY(i,o,!0,u,b,S),a(t,u.x,u.y,d,S)}},function(t,i,o){var a=o(63),u=o(257);t.exports=function PutTilesAt(t,i,o,d,b){if(void 0===d&&(d=!0),!Array.isArray(t))return null;Array.isArray(t[0])||(t=[t]);for(var S=t.length,C=t[0].length,M=0;M<S;M++)for(var P=0;P<C;P++){var R=t[M][P];u(R,i+P,o+M,!1,b)}d&&a(i-1,o-1,C+2,S+2,b)}},function(t,i,o){var a=o(26),u=o(210);t.exports=function Randomize(t,i,o,d,b,S){var C,M=a(t,i,o,d,{},S);if(!b)for(b=[],C=0;C<M.length;C++)-1===b.indexOf(M[C].index)&&b.push(M[C].index);for(C=0;C<M.length;C++)M[C].index=u(b)}},function(t,i,o){var a=o(563),u=new(o(3));t.exports=function RemoveTileAtWorldXY(t,i,o,d,b,S){return S.tilemapLayer.worldToTileXY(t,i,!0,u,b,S),a(u.x,u.y,o,d,S)}},function(t,i,o){var a=o(26),u=o(397),d=new u(105,210,231,150),b=new u(243,134,48,200),S=new u(40,39,37,150);t.exports=function RenderDebug(t,i,o){void 0===i&&(i={});var u=void 0!==i.tileColor?i.tileColor:d,C=void 0!==i.collidingTileColor?i.collidingTileColor:b,M=void 0!==i.faceColor?i.faceColor:S,P=a(0,0,o.width,o.height,null,o);t.translateCanvas(o.tilemapLayer.x,o.tilemapLayer.y),t.scaleCanvas(o.tilemapLayer.scaleX,o.tilemapLayer.scaleY);for(var R=0;R<P.length;R++){var O=P[R],B=O.width,N=O.height,Y=O.pixelX,G=O.pixelY,X=O.collides?C:u;null!==X&&(t.fillStyle(X.color,X.alpha/255),t.fillRect(Y,G,B,N)),Y+=1,G+=1,B-=2,N-=2,null!==M&&(t.lineStyle(1,M.color,M.alpha/255),O.faceTop&&t.lineBetween(Y,G,Y+B,G),O.faceRight&&t.lineBetween(Y+B,G,Y+B,G+N),O.faceBottom&&t.lineBetween(Y,G+N,Y+B,G+N),O.faceLeft&&t.lineBetween(Y,G,Y,G+N))}}},function(t,i,o){var a=o(72),u=o(63),d=o(160);t.exports=function SetCollision(t,i,o,b,S){void 0===i&&(i=!0),void 0===o&&(o=!0),void 0===S&&(S=!0),Array.isArray(t)||(t=[t]);for(var C=0;C<t.length;C++)d(t[C],i,b);if(S)for(var M=0;M<b.height;M++)for(var P=0;P<b.width;P++){var R=b.data[M][P];R&&-1!==t.indexOf(R.index)&&a(R,i)}o&&u(0,0,b.width,b.height,b)}},function(t,i,o){var a=o(72),u=o(63),d=o(160);t.exports=function SetCollisionBetween(t,i,o,b,S,C){if(void 0===o&&(o=!0),void 0===b&&(b=!0),void 0===C&&(C=!0),!(t>i)){for(var M=t;M<=i;M++)d(M,o,S);if(C)for(var P=0;P<S.height;P++)for(var R=0;R<S.width;R++){var O=S.data[P][R];O&&O.index>=t&&O.index<=i&&a(O,o)}b&&u(0,0,S.width,S.height,S)}}},function(t,i,o){var a=o(72),u=o(63),d=o(160);t.exports=function SetCollisionByExclusion(t,i,o,b){void 0===i&&(i=!0),void 0===o&&(o=!0),Array.isArray(t)||(t=[t]);for(var S=0;S<b.height;S++)for(var C=0;C<b.width;C++){var M=b.data[S][C];M&&-1===t.indexOf(M.index)&&(a(M,i),d(M.index,i,b))}o&&u(0,0,b.width,b.height,b)}},function(t,i,o){var a=o(72),u=o(63),d=o(126);t.exports=function SetCollisionByProperty(t,i,o,b){void 0===i&&(i=!0),void 0===o&&(o=!0);for(var S=0;S<b.height;S++)for(var C=0;C<b.width;C++){var M=b.data[S][C];if(M)for(var P in t)if(d(M.properties,P)){var R=t[P];Array.isArray(R)||(R=[R]);for(var O=0;O<R.length;O++)M.properties[P]===R[O]&&a(M,i)}}o&&u(0,0,b.width,b.height,b)}},function(t,i,o){var a=o(72),u=o(63);t.exports=function SetCollisionFromCollisionGroup(t,i,o){void 0===t&&(t=!0),void 0===i&&(i=!0);for(var d=0;d<o.height;d++)for(var b=0;b<o.width;b++){var S=o.data[d][b];if(S){var C=S.getCollisionGroup();C&&C.objects&&C.objects.length>0&&a(S,t)}}i&&u(0,0,o.width,o.height,o)}},function(t,i){t.exports=function SetTileIndexCallback(t,i,o,a){if("number"==typeof t)a.callbacks[t]=null!==i?{callback:i,callbackContext:o}:void 0;else for(var u=0,d=t.length;u<d;u++)a.callbacks[t[u]]=null!==i?{callback:i,callbackContext:o}:void 0}},function(t,i,o){var a=o(26);t.exports=function SetTileLocationCallback(t,i,o,u,d,b,S){for(var C=a(t,i,o,u,null,S),M=0;M<C.length;M++)C[M].setCollisionCallback(d,b)}},function(t,i,o){var a=o(26),u=o(131);t.exports=function Shuffle(t,i,o,d,b){var S=a(t,i,o,d,null,b),C=S.map((function(t){return t.index}));u(C);for(var M=0;M<S.length;M++)S[M].index=C[M]}},function(t,i,o){var a=o(26);t.exports=function SwapByIndex(t,i,o,u,d,b,S){for(var C=a(o,u,d,b,null,S),M=0;M<C.length;M++)C[M]&&(C[M].index===t?C[M].index=i:C[M].index===i&&(C[M].index=t))}},function(t,i,o){var a=o(26);t.exports=function WeightedRandomize(t,i,o,u,d,b){if(d){var S,C=a(t,i,o,u,null,b),M=0;for(S=0;S<d.length;S++)M+=d[S].weight;if(!(M<=0))for(S=0;S<C.length;S++){for(var P=Math.random()*M,R=0,O=-1,B=0;B<d.length;B++)if(P<=(R+=d[B].weight)){var N=d[B].index;O=Array.isArray(N)?N[Math.floor(Math.random()*N.length)]:N;break}C[S].index=O}}}},function(t,i,o){t.exports={FromOrientationString:o(258),Parse:o(564),Parse2DArray:o(259),ParseCSV:o(565),Impact:o(1454),Tiled:o(1455)}},function(t,i){t.exports=function ParseWangsets(t,i){for(var o=0;o<t.length;o++){var a=t[o],u=o;if(a.name&&""!==a.name&&(u=a.name),Array.isArray(a.wangtiles)&&a.wangtiles.length>0){var d,b,S,C={},M={};if(Array.isArray(a.edgecolors))for(d=0;d<a.edgecolors.length;d++)S=1+d,""!==(b=a.edgecolors[d]).name&&(C[S]=b.name);if(Array.isArray(a.cornercolors))for(d=0;d<a.cornercolors.length;d++)S=1+d,""!==(b=a.cornercolors[d]).name&&(M[S]=b.name);if(Array.isArray(a.colors))for(d=0;d<a.colors.length;d++)S=1+d,""!==(b=a.colors[d]).name&&(C[S]=M[S]=b.name);for(var P=[C,M,C,M,C,M,C,M],R=0;R<a.wangtiles.length;R++){var O=a.wangtiles[R],B=i[O.tileid]||(i[O.tileid]={});B=B.wangid||(B.wangid={});for(var N=[],Y=0;Y<Math.min(P.length,O.wangid.length);Y++)if(0!==(b=O.wangid[Y])){var G=P[Y][b];void 0===G?N.push(b):N.push(G)}else N.push(void 0);B[u]=N}}}}},function(t,i,o){t.exports={ParseTileLayers:o(578),ParseTilesets:o(579),ParseWeltmeister:o(577)}},function(t,i,o){t.exports={AssignTileProperties:o(567),Base64Decode:o(574),BuildTilesetIndex:o(568),CreateGroupLayer:o(161),ParseGID:o(261),ParseImageLayers:o(569),ParseJSONTiled:o(566),ParseObject:o(260),ParseObjectLayers:o(570),ParseTileLayers:o(573),ParseTilesets:o(575)}},function(t,i,o){var a=o(1),u=o(1);a=o(1457),u=o(1458),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i,o){var a=o(12);t.exports=function TilemapLayerWebGLRenderer(t,i,o){var u=i.cull(o),d=u.length,b=o.alpha*i.alpha;if(!(0===d||b<=0)){var S=i.gidMap,C=t.pipelines.set(i.pipeline,i),M=a.getTintAppendFloatAlpha,P=i.scrollFactorX,R=i.scrollFactorY,O=i.x,B=i.y,N=i.scaleX,Y=i.scaleY;t.pipelines.preBatch(i);for(var G=0;G<d;G++){var X=u[G],U=S[X.index];if(U){var z=U.getTileTextureCoordinates(X.index);if(null!==z){var V=U.glTexture,W=C.setTexture2D(V,i),H=U.tileWidth,j=U.tileHeight,q=z.x,Z=z.y,K=.5*U.tileWidth,$=.5*U.tileHeight,tt=M(X.tint,b*X.alpha);C.batchTexture(i,V,V.width,V.height,O+(K+X.pixelX)*N,B+($+X.pixelY)*Y,X.width,X.height,N,Y,X.rotation,X.flipX,X.flipY,P,R,K,$,q,Z,H,j,tt,tt,tt,tt,!1,0,0,o,null,!0,W)}}}t.pipelines.postBatch(i)}}},function(t,i,o){var a=o(25),u=new a,d=new a,b=new a;t.exports=function TilemapLayerCanvasRenderer(t,i,o,a){var S=i.cull(o),C=S.length,M=o.alpha*i.alpha;if(!(0===C||M<=0)){var P=u,R=d,O=b;R.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY),P.copyFrom(o.matrix);var B=t.currentContext,N=i.gidMap;B.save(),a?(P.multiplyWithOffset(a,-o.scrollX*i.scrollFactorX,-o.scrollY*i.scrollFactorY),R.e=i.x,R.f=i.y,P.multiply(R,O),O.copyToContext(B)):(R.e-=o.scrollX*i.scrollFactorX,R.f-=o.scrollY*i.scrollFactorY,R.copyToContext(B)),(!t.antialias||i.scaleX>1||i.scaleY>1)&&(B.imageSmoothingEnabled=!1);for(var Y=0;Y<C;Y++){var G=S[Y],X=N[G.index];if(X){var U=X.image.getSourceImage(),z=X.getTileTextureCoordinates(G.index);if(null!==z){var V=X.tileWidth,W=X.tileHeight,H=.5*V,j=.5*W;B.save(),B.translate(G.pixelX+H,G.pixelY+j),0!==G.rotation&&B.rotate(G.rotation),(G.flipX||G.flipY)&&B.scale(G.flipX?-1:1,G.flipY?-1:1),B.globalAlpha=M*G.alpha,B.drawImage(U,z.x,z.y,V,W,-H,-j,V,W),B.restore()}}}B.restore()}}},function(t,i,o){var a=o(16),u=o(262);a.register("tilemap",(function(t){var i=void 0!==t?t:{};return u(this.scene,i.key,i.tileWidth,i.tileHeight,i.width,i.height,i.data,i.insertNull)}))},function(t,i,o){var a=o(5),u=o(262);a.register("tilemap",(function(t,i,o,a,d,b,S){return null===t&&(t=void 0),null===i&&(i=void 0),null===o&&(o=void 0),null===a&&(a=void 0),null===d&&(d=void 0),u(this.scene,t,i,o,a,d,b,S)}))},function(t,i,o){t.exports={Clock:o(1462),TimerEvent:o(582)}},function(t,i,o){var a=o(0),u=o(24),d=o(20),b=o(582),S=o(93),C=new a({initialize:function Clock(t){this.scene=t,this.systems=t.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],t.sys.events.once(d.BOOT,this.boot,this),t.sys.events.on(d.START,this.start,this)},boot:function boot(){this.now=this.systems.game.loop.time,this.systems.events.once(d.DESTROY,this.destroy,this)},start:function start(){var t=this.systems.events;t.on(d.PRE_UPDATE,this.preUpdate,this),t.on(d.UPDATE,this.update,this),t.once(d.SHUTDOWN,this.shutdown,this)},addEvent:function addEvent(t){var i;return t instanceof b?(i=t,this.removeEvent(i),i.elapsed=i.startAt,i.hasDispatched=!1,i.repeatCount=-1===i.repeat||i.loop?999999999999:i.repeat):i=new b(t),this._pendingInsertion.push(i),i},delayedCall:function delayedCall(t,i,o,a){return this.addEvent({delay:t,callback:i,args:o,callbackScope:a})},clearPendingEvents:function clearPendingEvents(){return this._pendingInsertion=[],this},removeEvent:function removeEvent(t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var o=t[i];S(this._pendingRemoval,o),S(this._pendingInsertion,o),S(this._active,o)}return this},removeAllEvents:function removeAllEvents(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function preUpdate(){var t=this._pendingRemoval.length,i=this._pendingInsertion.length;if(0!==t||0!==i){var o,a;for(o=0;o<t;o++){a=this._pendingRemoval[o];var u=this._active.indexOf(a);u>-1&&this._active.splice(u,1),a.destroy()}for(o=0;o<i;o++)a=this._pendingInsertion[o],this._active.push(a);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function update(t,i){if(this.now=t,!this.paused){i*=this.timeScale;for(var o=0;o<this._active.length;o++){var a=this._active[o];if(!a.paused&&(a.elapsed+=i*a.timeScale,a.elapsed>=a.delay)){var u=a.elapsed-a.delay;a.elapsed=a.delay,!a.hasDispatched&&a.callback&&(a.hasDispatched=!0,a.callback.apply(a.callbackScope,a.args)),a.repeatCount>0?(a.repeatCount--,a.elapsed=u,a.hasDispatched=!1):this._pendingRemoval.push(a)}}}},shutdown:function shutdown(){var t;for(t=0;t<this._pendingInsertion.length;t++)this._pendingInsertion[t].destroy();for(t=0;t<this._active.length;t++)this._active[t].destroy();for(t=0;t<this._pendingRemoval.length;t++)this._pendingRemoval[t].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var i=this.systems.events;i.off(d.PRE_UPDATE,this.preUpdate,this),i.off(d.UPDATE,this.update,this),i.off(d.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown(),this.scene.sys.events.off(d.START,this.start,this),this.scene=null,this.systems=null}});u.register("Clock",C,"time"),t.exports=C},function(t,i,o){var a=o(100),u=o(17),d={Builders:o(1464),Events:o(267),TweenManager:o(1480),Tween:o(266),TweenData:o(268),Timeline:o(588)};d=u(!1,d,a),t.exports=d},function(t,i,o){t.exports={GetBoolean:o(99),GetEaseFunction:o(80),GetNewValue:o(162),GetProps:o(583),GetTargets:o(263),GetTweens:o(584),GetValueOp:o(264),NumberTweenBuilder:o(585),StaggerBuilder:o(586),TimelineBuilder:o(587),TweenBuilder:o(163)}},function(t,i){t.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(t,i){t.exports="complete"},function(t,i){t.exports="loop"},function(t,i){t.exports="pause"},function(t,i){t.exports="resume"},function(t,i){t.exports="start"},function(t,i){t.exports="update"},function(t,i){t.exports="active"},function(t,i){t.exports="complete"},function(t,i){t.exports="loop"},function(t,i){t.exports="repeat"},function(t,i){t.exports="start"},function(t,i){t.exports="stop"},function(t,i){t.exports="update"},function(t,i){t.exports="yoyo"},function(t,i,o){var a=o(93),u=o(0),d=o(585),b=o(24),S=o(20),C=o(586),M=o(587),P=o(100),R=o(163),O=new u({initialize:function TweenManager(t){this.scene=t,this.systems=t.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,t.sys.events.once(S.BOOT,this.boot,this),t.sys.events.on(S.START,this.start,this)},boot:function boot(){this.systems.events.once(S.DESTROY,this.destroy,this)},start:function start(){var t=this.systems.events;t.on(S.PRE_UPDATE,this.preUpdate,this),t.on(S.UPDATE,this.update,this),t.once(S.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function createTimeline(t){return M(this,t)},timeline:function timeline(t){var timeline=M(this,t);return timeline.paused||(this._add.push(timeline),this._toProcess++),timeline},create:function create(t){return R(this,t)},add:function add(t){var i=R(this,t);return this._add.push(i),this._toProcess++,i},existing:function existing(t){return this._add.push(t),this._toProcess++,this},addCounter:function addCounter(t){var i=d(this,t);return this._add.push(i),this._toProcess++,i},stagger:function stagger(t,i){return C(t,i)},preUpdate:function preUpdate(){if(0!==this._toProcess){var t,i,o=this._destroy,a=this._active,u=this._pending;for(t=0;t<o.length;t++){i=o[t];var d=a.indexOf(i);-1===d?(d=u.indexOf(i))>-1&&(i.state=P.REMOVED,u.splice(d,1)):(i.state=P.REMOVED,a.splice(d,1))}for(o.length=0,o=this._add,t=0;t<o.length;t++)(i=o[t]).state===P.PENDING_ADD&&(i.init()?(i.play(),this._active.push(i)):this._pending.push(i));o.length=0,this._toProcess=0}},update:function update(t,i){var o,a=this._active;i*=this.timeScale;for(var u=0;u<a.length;u++)(o=a[u]).update(t,i)&&(this._destroy.push(o),this._toProcess++)},remove:function remove(t){return a(this._add,t),a(this._pending,t),a(this._active,t),a(this._destroy,t),t.state=P.REMOVED,this},makeActive:function makeActive(t){if(-1!==this._add.indexOf(t)||-1!==this._active.indexOf(t))return this;var i=this._pending.indexOf(t);return-1!==i&&this._pending.splice(i,1),this._add.push(t),t.state=P.PENDING_ADD,this._toProcess++,this},each:function each(t,i){for(var o=[null],a=1;a<arguments.length;a++)o.push(arguments[a]);for(var u in this.list)o[0]=this.list[u],t.apply(i,o)},getAllTweens:function getAllTweens(){for(var t=this._active,i=[],o=0;o<t.length;o++)i.push(t[o]);return i},getGlobalTimeScale:function getGlobalTimeScale(){return this.timeScale},getTweensOf:function getTweensOf(t,i){void 0===i&&(i=!1);var o,a,u,d=this._active,b=[];for(Array.isArray(t)||(t=[t]),a=0;a<d.length;a++)for(o=d[a],u=0;u<t.length;u++)o.hasTarget(t[u])&&b.push(o);if(i)for(d=this._pending,a=0;a<d.length;a++)for(o=d[a],u=0;u<t.length;u++)o.hasTarget(t[u])&&b.push(o);return b},isTweening:function isTweening(t){for(var i,o=this._active,a=0;a<o.length;a++)if((i=o[a]).hasTarget(t)&&i.isPlaying())return!0;return!1},killAll:function killAll(){for(var t=this.getAllTweens(),i=0;i<t.length;i++)t[i].stop();return this},killTweensOf:function killTweensOf(t){for(var i=this.getTweensOf(t),o=0;o<i.length;o++)i[o].stop();return this},pauseAll:function pauseAll(){for(var t=this._active,i=0;i<t.length;i++)t[i].pause();return this},resumeAll:function resumeAll(){for(var t=this._active,i=0;i<t.length;i++)t[i].resume();return this},setGlobalTimeScale:function setGlobalTimeScale(t){return this.timeScale=t,this},shutdown:function shutdown(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var t=this.systems.events;t.off(S.PRE_UPDATE,this.preUpdate,this),t.off(S.UPDATE,this.update,this),t.off(S.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown(),this.scene.sys.events.off(S.START,this.start,this),this.scene=null,this.systems=null}});b.register("TweenManager",O,"tweens"),t.exports=O},function(t,i,o){t.exports={Array:o(208),Base64:o(1482),Objects:o(1484),String:o(1488),NOOP:o(1)}},function(t,i,o){t.exports={ArrayBufferToBase64:o(1483),Base64ToArrayBuffer:o(433)}},function(t,i){var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";t.exports=function ArrayBufferToBase64(t,i){for(var a=new Uint8Array(t),u=a.length,d=i?"data:"+i+";base64,":"",b=0;b<u;b+=3)d+=o[a[b]>>2],d+=o[(3&a[b])<<4|a[b+1]>>4],d+=o[(15&a[b+1])<<2|a[b+2]>>6],d+=o[63&a[b+2]];return u%3==2?d=d.substring(0,d.length-1)+"=":u%3==1&&(d=d.substring(0,d.length-2)+"=="),d}},function(t,i,o){t.exports={Clone:o(77),DeepCopy:o(175),Extend:o(17),GetAdvancedValue:o(13),GetFastValue:o(2),GetMinMaxValue:o(1485),GetValue:o(6),HasAll:o(1486),HasAny:o(455),HasValue:o(126),IsPlainObject:o(7),Merge:o(127),MergeRight:o(1487),Pick:o(571),SetValue:o(478)}},function(t,i,o){var a=o(6),u=o(18);t.exports=function GetMinMaxValue(t,i,o,d,b){void 0===b&&(b=o);var S=a(t,i,b);return u(S,o,d)}},function(t,i){t.exports=function HasAll(t,i){for(var o=0;o<i.length;o++)if(!t.hasOwnProperty(i[o]))return!1;return!0}},function(t,i,o){var a=o(77);t.exports=function MergeRight(t,i){var o=a(t);for(var u in i)o.hasOwnProperty(u)&&(o[u]=i[u]);return o}},function(t,i,o){t.exports={Format:o(1489),Pad:o(186),RemoveAt:o(1490),Reverse:o(1491),UppercaseFirst:o(205),UUID:o(222)}},function(t,i){t.exports=function Format(t,i){return t.replace(/%([0-9]+)/g,(function(t,o){return i[Number(o)-1]}))}},function(t,i){t.exports=function RemoveAt(t,i){return 0===i?t.slice(1):t.slice(0,i-1)+t.slice(i)}},function(t,i){t.exports=function Reverse(t){return t.split("").reverse().join("")}},function(t,i,o){t.exports={SoundManagerCreator:o(426),Events:o(70),BaseSound:o(146),BaseSoundManager:o(145),WebAudioSound:o(434),WebAudioSoundManager:o(432),HTML5AudioSound:o(429),HTML5AudioSoundManager:o(427),NoAudioSound:o(431),NoAudioSoundManager:o(430)}},function(t,i,o){t.exports={Arcade:o(1366),Matter:o(1494)}},function(t,i,o){t.exports={BodyBounds:o(1392),Components:o(249),Events:o(272),Factory:o(1394),MatterGameObject:o(1395),Image:o(1396),Matter:o(594),MatterPhysics:o(1524),PolyDecomp:o(1393),Sprite:o(1397),TileBody:o(593),PhysicsEditorParser:o(589),PhysicsJSONParser:o(590),PointerConstraint:o(1398),World:o(1402)}},function(t,i){t.exports={setBounce:function setBounce(t){return this.body.restitution=t,this}}},function(t,i){var o={setCollisionCategory:function setCollisionCategory(t){return this.body.collisionFilter.category=t,this},setCollisionGroup:function setCollisionGroup(t){return this.body.collisionFilter.group=t,this},setCollidesWith:function setCollidesWith(t){var i=0;if(Array.isArray(t))for(var o=0;o<t.length;o++)i|=t[o];else i=t;return this.body.collisionFilter.mask=i,this},setOnCollide:function setOnCollide(t){return this.body.onCollideCallback=t,this},setOnCollideEnd:function setOnCollideEnd(t){return this.body.onCollideEndCallback=t,this},setOnCollideActive:function setOnCollideActive(t){return this.body.onCollideActiveCallback=t,this},setOnCollideWith:function setOnCollideWith(t,i){Array.isArray(t)||(t=[t]);for(var o=0;o<t.length;o++){var a=t[o].hasOwnProperty("body")?t[o].body:t[o];this.body.setOnCollideWith(a,i)}return this}};t.exports=o},function(t,i,o){var a=o(41),u={applyForce:function applyForce(t){return this._tempVec2.set(this.body.position.x,this.body.position.y),a.applyForce(this.body,this._tempVec2,t),this},applyForceFrom:function applyForceFrom(t,i){return a.applyForce(this.body,t,i),this},thrust:function thrust(t){var i=this.body.angle;return this._tempVec2.set(t*Math.cos(i),t*Math.sin(i)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function thrustLeft(t){var i=this.body.angle-Math.PI/2;return this._tempVec2.set(t*Math.cos(i),t*Math.sin(i)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function thrustRight(t){var i=this.body.angle+Math.PI/2;return this._tempVec2.set(t*Math.cos(i),t*Math.sin(i)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function thrustBack(t){var i=this.body.angle-Math.PI;return this._tempVec2.set(t*Math.cos(i),t*Math.sin(i)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};t.exports=u},function(t,i){var o={setFriction:function setFriction(t,i,o){return this.body.friction=t,void 0!==i&&(this.body.frictionAir=i),void 0!==o&&(this.body.frictionStatic=o),this},setFrictionAir:function setFrictionAir(t){return this.body.frictionAir=t,this},setFrictionStatic:function setFrictionStatic(t){return this.body.frictionStatic=t,this}};t.exports=o},function(t,i){t.exports={setIgnoreGravity:function setIgnoreGravity(t){return this.body.ignoreGravity=t,this}}},function(t,i,o){var a=o(41),u=o(3),d={setMass:function setMass(t){return a.setMass(this.body,t),this},setDensity:function setDensity(t){return a.setDensity(this.body,t),this},centerOfMass:{get:function get(){return new u(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};t.exports=d},function(t,i){t.exports={setSensor:function setSensor(t){return this.body.isSensor=t,this},isSensor:function isSensor(){return this.body.isSensor}}},function(t,i,o){var a=o(86),u=o(41),d=o(124),b=o(2),S=o(589),C=o(590),M=o(64),P={setRectangle:function setRectangle(t,i,o){return this.setBody({type:"rectangle",width:t,height:i},o)},setCircle:function setCircle(t,i){return this.setBody({type:"circle",radius:t},i)},setPolygon:function setPolygon(t,i,o){return this.setBody({type:"polygon",sides:i,radius:t},o)},setTrapezoid:function setTrapezoid(t,i,o,a){return this.setBody({type:"trapezoid",width:t,height:i,slope:o},a)},setExistingBody:function setExistingBody(t,i){void 0===i&&(i=!0),this.body&&this.world.remove(this.body,!0),this.body=t;for(var o=0;o<t.parts.length;o++)t.parts[o].gameObject=this;var a=this;if(t.destroy=function destroy(){a.world.remove(a.body,!0),a.body.gameObject=null},i&&(this.world.has(t)&&this.world.remove(t,!0),this.world.add(t)),this._originComponent){var u=t.render.sprite.xOffset,b=t.render.sprite.yOffset,S=t.centerOfMass.x,C=t.centerOfMass.y;if(d(S,.5)&&d(C,.5))this.setOrigin(u+.5,b+.5);else{var M=t.centerOffset.x,P=t.centerOffset.y;this.setOrigin(u+M/this.displayWidth,b+P/this.displayHeight)}}return this},setBody:function setBody(t,i){if(!t)return this;var o;"string"==typeof t&&(t={type:t});var d=b(t,"type","rectangle"),P=b(t,"x",this._tempVec2.x),R=b(t,"y",this._tempVec2.y),O=b(t,"width",this.width),B=b(t,"height",this.height);switch(d){case"rectangle":o=a.rectangle(P,R,O,B,i);break;case"circle":var N=b(t,"radius",Math.max(O,B)/2),Y=b(t,"maxSides",25);o=a.circle(P,R,N,i,Y);break;case"trapezoid":var G=b(t,"slope",.5);o=a.trapezoid(P,R,O,B,G,i);break;case"polygon":var X=b(t,"sides",5),U=b(t,"radius",Math.max(O,B)/2);o=a.polygon(P,R,X,U,i);break;case"fromVertices":case"fromVerts":var z=b(t,"verts",null);if(z)if("string"==typeof z&&(z=M.fromPath(z)),this.body&&!this.body.hasOwnProperty("temp"))u.setVertices(this.body,z),o=this.body;else{var V=b(t,"flagInternal",!1),W=b(t,"removeCollinear",.01),H=b(t,"minimumArea",10);o=a.fromVertices(P,R,z,i,V,W,H)}break;case"fromPhysicsEditor":o=S.parseBody(P,R,t,i);break;case"fromPhysicsTracer":o=C.parseBody(P,R,t,i)}return o&&this.setExistingBody(o,t.addToWorld),this}};t.exports=P},function(t,i,o){var a=o(272),u=o(165),d=o(166),b={setToSleep:function setToSleep(){return u.set(this.body,!0),this},setAwake:function setAwake(){return u.set(this.body,!1),this},setSleepThreshold:function setSleepThreshold(t){return void 0===t&&(t=60),this.body.sleepThreshold=t,this},setSleepEvents:function setSleepEvents(t,i){return this.setSleepStartEvent(t),this.setSleepEndEvent(i),this},setSleepStartEvent:function setSleepStartEvent(t){if(t){var i=this.world;d.on(this.body,"sleepStart",(function(t){i.emit(a.SLEEP_START,t,this)}))}else d.off(this.body,"sleepStart");return this},setSleepEndEvent:function setSleepEndEvent(t){if(t){var i=this.world;d.on(this.body,"sleepEnd",(function(t){i.emit(a.SLEEP_END,t,this)}))}else d.off(this.body,"sleepEnd");return this}};t.exports=b},function(t,i){t.exports="afteradd"},function(t,i){t.exports="afterremove"},function(t,i){t.exports="afterupdate"},function(t,i){t.exports="beforeadd"},function(t,i){t.exports="beforeremove"},function(t,i){t.exports="beforeupdate"},function(t,i){t.exports="collisionactive"},function(t,i){t.exports="collisionend"},function(t,i){t.exports="collisionstart"},function(t,i){t.exports="dragend"},function(t,i){t.exports="drag"},function(t,i){t.exports="dragstart"},function(t,i){t.exports="pause"},function(t,i){t.exports="resume"},function(t,i){t.exports="sleepend"},function(t,i){t.exports="sleepstart"},function(t,i,o){var a=o(41),u={setStatic:function setStatic(t){return a.setStatic(this.body,t),this},isStatic:function isStatic(){return this.body.isStatic}};t.exports=u},function(t,i,o){var a=o(41),u=o(14),d=o(269),b=o(270),S={x:{get:function get(){return this.body.position.x},set:function set(t){this._tempVec2.set(t,this.y),a.setPosition(this.body,this._tempVec2)}},y:{get:function get(){return this.body.position.y},set:function set(t){this._tempVec2.set(this.x,t),a.setPosition(this.body,this._tempVec2)}},scaleX:{get:function get(){return this._scaleX},set:function set(t){var i=1/this._scaleX,o=1/this._scaleY;this._scaleX=t,0===this._scaleX?this.renderFlags&=-5:this.renderFlags|=4,a.scale(this.body,i,o),a.scale(this.body,t,this._scaleY)}},scaleY:{get:function get(){return this._scaleY},set:function set(t){var i=1/this._scaleX,o=1/this._scaleY;this._scaleY=t,0===this._scaleY?this.renderFlags&=-5:this.renderFlags|=4,a.scale(this.body,i,o),a.scale(this.body,this._scaleX,t)}},angle:{get:function get(){return b(this.body.angle*u.RAD_TO_DEG)},set:function set(t){this.rotation=b(t)*u.DEG_TO_RAD}},rotation:{get:function get(){return this.body.angle},set:function set(t){this._rotation=d(t),a.setAngle(this.body,this._rotation)}},setPosition:function setPosition(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this._tempVec2.set(t,i),a.setPosition(this.body,this._tempVec2),this},setRotation:function setRotation(t){return void 0===t&&(t=0),this._rotation=d(t),a.setAngle(this.body,t),this},setFixedRotation:function setFixedRotation(){return a.setInertia(this.body,1/0),this},setAngle:function setAngle(t){return void 0===t&&(t=0),this.angle=t,a.setAngle(this.body,this.rotation),this},setScale:function setScale(t,i,o){void 0===t&&(t=1),void 0===i&&(i=t);var u=1/this._scaleX,d=1/this._scaleY;return this._scaleX=t,this._scaleY=i,a.scale(this.body,u,d,o),a.scale(this.body,t,i,o),this}};t.exports=S},function(t,i,o){var a=o(41),u={setAngularVelocity:function setAngularVelocity(t){return a.setAngularVelocity(this.body,t),this},setVelocityX:function setVelocityX(t){return this._tempVec2.set(t,this.body.velocity.y),a.setVelocity(this.body,this._tempVec2),this},setVelocityY:function setVelocityY(t){return this._tempVec2.set(this.body.velocity.x,t),a.setVelocity(this.body,this._tempVec2),this},setVelocity:function setVelocity(t,i){return this._tempVec2.set(t,i),a.setVelocity(this.body,this._tempVec2),this}};t.exports=u},function(t,i,o){var a={};t.exports=a;var u=o(118),d=o(32);a.create=function(t){return d.extend({extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0},!1,t)},a.reset=function(t){t.extended&&(t.narrowDetections=0,t.narrowphaseTests=0,t.narrowReuse=0,t.narrowReuseCount=0,t.midphaseTests=0,t.broadphaseTests=0,t.narrowEff=0,t.midEff=0,t.broadEff=0,t.collisions=0,t.buckets=0,t.pairs=0,t.bodies=0)},a.update=function(t,i){if(t.extended){var o=i.world,a=u.allBodies(o);t.collisions=t.narrowDetections,t.pairs=i.pairs.list.length,t.bodies=a.length,t.midEff=(t.narrowDetections/(t.midphaseTests||1)).toFixed(2),t.narrowEff=(t.narrowDetections/(t.narrowphaseTests||1)).toFixed(2),t.broadEff=(1-t.broadphaseTests/(a.length||1)).toFixed(2),t.narrowReuse=(t.narrowReuseCount/(t.narrowphaseTests||1)).toFixed(2)}}},function(t,i,o){var a=o(123),u=o(271),d=o(86),b=o(41),S=o(1392),C=o(84),M=o(0),P=o(118),R=o(591),O=o(128),B=o(273),N=o(50),Y=o(1394),G=o(2),X=o(6),U=o(597),z=o(1525),V=o(1526),W=o(1399),H=o(1527),j=o(127),q=o(250),Z=o(598),K=o(595),$=o(24),tt=o(1400),et=o(599),it=o(274),nt=o(20),rt=o(592),st=o(83),ot=o(64),at=o(1402),ht=new M({initialize:function MatterPhysics(t){this.scene=t,this.systems=t.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=b,this.composite=P,this.detector=B,this.grid=U,this.pair=q,this.pairs=Z,this.query=tt,this.resolver=et,this.sat=it,this.constraint=O,this.bodies=d,this.composites=R,this.axes=u,this.bounds=C,this.svg=rt,this.vector=st,this.vertices=ot,this.verts=ot,this._tempVec2=st.create(),X(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),X(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),X(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),et._restingThresh=X(this.config,"restingThresh",4),et._restingThreshTangent=X(this.config,"restingThreshTangent",6),et._positionDampen=X(this.config,"positionDampen",.9),et._positionWarming=X(this.config,"positionWarming",.8),et._frictionNormalMultiplier=X(this.config,"frictionNormalMultiplier",5),t.sys.events.once(nt.BOOT,this.boot,this),t.sys.events.on(nt.START,this.start,this)},boot:function boot(){this.world=new at(this.scene,this.config),this.add=new Y(this.world),this.bodyBounds=new S,this.systems.events.once(nt.DESTROY,this.destroy,this)},start:function start(){this.world||(this.world=new at(this.scene,this.config),this.add=new Y(this.world));var t=this.systems.events;t.on(nt.UPDATE,this.world.update,this.world),t.on(nt.POST_UPDATE,this.world.postUpdate,this.world),t.once(nt.SHUTDOWN,this.shutdown,this)},getConfig:function getConfig(){var t=this.systems.game.config.physics,i=this.systems.settings.physics;return j(G(i,"matter",{}),G(t,"matter",{}))},enableAttractorPlugin:function enableAttractorPlugin(){return K.register(z),K.use(W,z),this},enableWrapPlugin:function enableWrapPlugin(){return K.register(H),K.use(W,H),this},enableCollisionEventsPlugin:function enableCollisionEventsPlugin(){return K.register(V),K.use(W,V),this},pause:function pause(){return this.world.pause()},resume:function resume(){return this.world.resume()},set60Hz:function set60Hz(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function set30Hz(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function step(t,i){this.world.step(t,i)},containsPoint:function containsPoint(t,i,o){t=this.getMatterBodies(t);var a=st.create(i,o);return tt.point(t,a).length>0},intersectPoint:function intersectPoint(t,i,o){o=this.getMatterBodies(o);var a=st.create(t,i),u=[];return tt.point(o,a).forEach((function(t){-1===u.indexOf(t)&&u.push(t)})),u},intersectRect:function intersectRect(t,i,o,a,u,d){void 0===u&&(u=!1),d=this.getMatterBodies(d);var b={min:{x:t,y:i},max:{x:t+o,y:i+a}},S=[];return tt.region(d,b,u).forEach((function(t){-1===S.indexOf(t)&&S.push(t)})),S},intersectRay:function intersectRay(t,i,o,a,u,d){void 0===u&&(u=1),d=this.getMatterBodies(d);for(var b=[],S=tt.ray(d,st.create(t,i),st.create(o,a),u),C=0;C<S.length;C++)b.push(S[C].body);return b},intersectBody:function intersectBody(t,i){i=this.getMatterBodies(i);for(var o=[],a=tt.collides(t,i),u=0;u<a.length;u++){var d=a[u];d.bodyA===t?o.push(d.bodyB):o.push(d.bodyA)}return o},overlap:function overlap(t,i,o,a,u){void 0===o&&(o=null),void 0===a&&(a=null),void 0===u&&(u=o),Array.isArray(t)||(t=[t]),t=this.getMatterBodies(t),i=this.getMatterBodies(i);for(var d=!1,b=0;b<t.length;b++)for(var S=t[b],C=tt.collides(S,i),M=0;M<C.length;M++){var P=C[M],R=P.bodyA.id===S.id?P.bodyB:P.bodyA;if(!a||a.call(u,S,R,P))if(d=!0,o)o.call(u,S,R,P);else if(!a)return!0}return d},setCollisionCategory:function setCollisionCategory(t,i){return(t=this.getMatterBodies(t)).forEach((function(t){t.collisionFilter.category=i})),this},setCollisionGroup:function setCollisionGroup(t,i){return(t=this.getMatterBodies(t)).forEach((function(t){t.collisionFilter.group=i})),this},setCollidesWith:function setCollidesWith(t,i){t=this.getMatterBodies(t);var o=0;if(Array.isArray(i))for(var a=0;a<i.length;a++)o|=i[a];else o=i;return t.forEach((function(t){t.collisionFilter.mask=o})),this},getMatterBodies:function getMatterBodies(t){if(!t)return this.world.getAllBodies();Array.isArray(t)||(t=[t]);for(var i=[],o=0;o<t.length;o++){var a=t[o].hasOwnProperty("body")?t[o].body:t[o];i.push(a)}return i},setVelocity:function setVelocity(t,i,o){t=this.getMatterBodies(t);var a=this._tempVec2;return a.x=i,a.y=o,t.forEach((function(t){b.setVelocity(t,a)})),this},setVelocityX:function setVelocityX(t,i){t=this.getMatterBodies(t);var o=this._tempVec2;return o.x=i,t.forEach((function(t){o.y=t.velocity.y,b.setVelocity(t,o)})),this},setVelocityY:function setVelocityY(t,i){t=this.getMatterBodies(t);var o=this._tempVec2;return o.y=i,t.forEach((function(t){o.x=t.velocity.x,b.setVelocity(t,o)})),this},setAngularVelocity:function setAngularVelocity(t,i){return(t=this.getMatterBodies(t)).forEach((function(t){b.setAngularVelocity(t,i)})),this},applyForce:function applyForce(t,i){t=this.getMatterBodies(t);var o=this._tempVec2;return t.forEach((function(t){o.x=t.position.x,o.y=t.position.y,b.applyForce(t,o,i)})),this},applyForceFromPosition:function applyForceFromPosition(t,i,o,a){t=this.getMatterBodies(t);var u=this._tempVec2;return t.forEach((function(t){void 0===a&&(a=t.angle),u.x=o*Math.cos(a),u.y=o*Math.sin(a),b.applyForce(t,i,u)})),this},applyForceFromAngle:function applyForceFromAngle(t,i,o){t=this.getMatterBodies(t);var a=this._tempVec2;return t.forEach((function(t){void 0===o&&(o=t.angle),a.x=i*Math.cos(o),a.y=i*Math.sin(o),b.applyForce(t,{x:t.position.x,y:t.position.y},a)})),this},getConstraintLength:function getConstraintLength(t){var i=t.pointA.x,o=t.pointA.y,a=t.pointB.x,u=t.pointB.y;return t.bodyA&&(i+=t.bodyA.position.x,o+=t.bodyA.position.y),t.bodyB&&(a+=t.bodyB.position.x,u+=t.bodyB.position.y),N(i,o,a,u)},alignBody:function alignBody(t,i,o,u){var d;switch(t=t.hasOwnProperty("body")?t.body:t,u){case a.TOP_LEFT:case a.LEFT_TOP:d=this.bodyBounds.getTopLeft(t,i,o);break;case a.TOP_CENTER:d=this.bodyBounds.getTopCenter(t,i,o);break;case a.TOP_RIGHT:case a.RIGHT_TOP:d=this.bodyBounds.getTopRight(t,i,o);break;case a.LEFT_CENTER:d=this.bodyBounds.getLeftCenter(t,i,o);break;case a.CENTER:d=this.bodyBounds.getCenter(t,i,o);break;case a.RIGHT_CENTER:d=this.bodyBounds.getRightCenter(t,i,o);break;case a.LEFT_BOTTOM:case a.BOTTOM_LEFT:d=this.bodyBounds.getBottomLeft(t,i,o);break;case a.BOTTOM_CENTER:d=this.bodyBounds.getBottomCenter(t,i,o);break;case a.BOTTOM_RIGHT:case a.RIGHT_BOTTOM:d=this.bodyBounds.getBottomRight(t,i,o)}return d&&b.setPosition(t,d),this},shutdown:function shutdown(){var t=this.systems.events;this.world&&(t.off(nt.UPDATE,this.world.update,this.world),t.off(nt.POST_UPDATE,this.world.postUpdate,this.world)),t.off(nt.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function destroy(){this.shutdown(),this.scene.sys.events.off(nt.START,this.start,this),this.scene=null,this.systems=null}});$.register("MatterPhysics",ht,"matterPhysics"),t.exports=ht},function(t,i,o){var a=o(594),u={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.14.2",silent:!0,install:function install(t){t.after("Body.create",(function(){u.Body.init(this)})),t.before("Engine.update",(function(t){u.Engine.update(t)}))},Body:{init:function init(t){t.plugin.attractors=t.plugin.attractors||[]}},Engine:{update:function update(t){for(var i=a.Composite.allBodies(t.world),o=0;o<i.length;o++){var u=i[o],d=u.plugin.attractors;if(d&&d.length>0)for(var b=0;b<i.length;b++){var S=i[b];if(o!==b)for(var C=0;C<d.length;C++){var M=d[C],P=M;a.Common.isFunction(M)&&(P=M(u,S)),P&&a.Body.applyForce(S,S.position,P)}}}}},Attractors:{gravityConstant:.001,gravity:function gravity(t,i){var o=a.Vector.sub(i.position,t.position),d=a.Vector.magnitudeSquared(o)||1e-4,b=a.Vector.normalise(o),S=-u.Attractors.gravityConstant*(t.mass*i.mass/d),C=a.Vector.mult(b,S);a.Body.applyForce(t,t.position,a.Vector.neg(C)),a.Body.applyForce(i,i.position,C)}}};t.exports=u},function(t,i){t.exports={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function install(t){t.after("Engine.create",(function(){t.Events.on(this,"collisionStart",(function(i){i.pairs.map((function(i){var o=i.bodyA,a=i.bodyB;o.gameObject&&o.gameObject.emit("collide",o,a,i),a.gameObject&&a.gameObject.emit("collide",a,o,i),t.Events.trigger(o,"onCollide",{pair:i}),t.Events.trigger(a,"onCollide",{pair:i}),o.onCollideCallback&&o.onCollideCallback(i),a.onCollideCallback&&a.onCollideCallback(i),o.onCollideWith[a.id]&&o.onCollideWith[a.id](a,i),a.onCollideWith[o.id]&&a.onCollideWith[o.id](o,i)}))})),t.Events.on(this,"collisionActive",(function(i){i.pairs.map((function(i){var o=i.bodyA,a=i.bodyB;o.gameObject&&o.gameObject.emit("collideActive",o,a,i),a.gameObject&&a.gameObject.emit("collideActive",a,o,i),t.Events.trigger(o,"onCollideActive",{pair:i}),t.Events.trigger(a,"onCollideActive",{pair:i}),o.onCollideActiveCallback&&o.onCollideActiveCallback(i),a.onCollideActiveCallback&&a.onCollideActiveCallback(i)}))})),t.Events.on(this,"collisionEnd",(function(i){i.pairs.map((function(i){var o=i.bodyA,a=i.bodyB;o.gameObject&&o.gameObject.emit("collideEnd",o,a,i),a.gameObject&&a.gameObject.emit("collideEnd",a,o,i),t.Events.trigger(o,"onCollideEnd",{pair:i}),t.Events.trigger(a,"onCollideEnd",{pair:i}),o.onCollideEndCallback&&o.onCollideEndCallback(i),a.onCollideEndCallback&&a.onCollideEndCallback(i)}))}))}))}}},function(t,i,o){var a=o(594),u={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function install(t){t.after("Engine.update",(function(){u.Engine.update(this)}))},Engine:{update:function update(t){for(var i=t.world,o=a.Composite.allBodies(i),d=a.Composite.allComposites(i),b=0;b<o.length;b+=1){var S=o[b];S.plugin.wrap&&u.Body.wrap(S,S.plugin.wrap)}for(b=0;b<d.length;b+=1){var C=d[b];C.plugin.wrap&&u.Composite.wrap(C,C.plugin.wrap)}}},Bounds:{wrap:function wrap(t,i){var o=null,a=null;if(void 0!==i.min.x&&void 0!==i.max.x&&(t.min.x>i.max.x?o=i.min.x-t.max.x:t.max.x<i.min.x&&(o=i.max.x-t.min.x)),void 0!==i.min.y&&void 0!==i.max.y&&(t.min.y>i.max.y?a=i.min.y-t.max.y:t.max.y<i.min.y&&(a=i.max.y-t.min.y)),null!==o||null!==a)return{x:o||0,y:a||0}}},Body:{wrap:function wrap(t,i){var o=u.Bounds.wrap(t.bounds,i);return o&&a.Body.translate(t,o),o}},Composite:{bounds:function bounds(t){for(var i=a.Composite.allBodies(t),o=[],u=0;u<i.length;u+=1){var d=i[u];o.push(d.bounds.min,d.bounds.max)}return a.Bounds.create(o)},wrap:function wrap(t,i){var o=u.Bounds.wrap(u.Composite.bounds(t),i);return o&&a.Composite.translate(t,o),o}}};t.exports=u},function(t,i,o){(function(i){var a=o(33),u=o(17),d={Actions:o(275),Animations:o(723),BlendModes:o(35),Cache:o(735),Cameras:o(738),Core:o(806),Class:o(0),Create:o(888),Curves:o(894),Data:o(896),Display:o(898),DOM:o(917),Events:o(918),Game:o(920),GameObjects:o(1011),Geom:o(483),Input:o(1308),Loader:o(1338),Math:o(193),Physics:o(1493),Plugins:o(1403),Renderer:o(1405),Scale:o(1412),ScaleModes:o(168),Scene:o(418),Scenes:o(1413),Structs:o(1415),Textures:o(1416),Tilemaps:o(1418),Time:o(1461),Tweens:o(1463),Utils:o(1481)};d.Sound=o(1492),d=u(!1,d,a),t.exports=d,i.Phaser=d}).call(this,o(600))}])}));var b,S=getDefaultExportFromCjs(d.exports),C=new(_createClass((function RoutinesData(){_classCallCheck(this,RoutinesData),this.routines=[],this.routinesByNames={}}))),M=function(){function RoutinesManager(){_classCallCheck(this,RoutinesManager)}return _createClass(RoutinesManager,null,[{key:"RegisterRoutine",value:function RegisterRoutine(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;C.routines.push(t),t.GetName(),C.routinesByNames[i]=t,console.assert(t.OnRegister,t),t.OnRegister()}},{key:"InitRoutines",value:function InitRoutines(){for(var t in C.routines){var i=C.routines[t];console.assert(i.Init,i),i.Init()}}},{key:"UpdateRoutines",value:function UpdateRoutines(t,i){for(var o in C.routines){C.routines[o].Update(i)}}}]),RoutinesManager}(),P="undefined"!=typeof global&&(global.crypto||global.msCrypto);if(P&&P.getRandomValues){var R=new Uint8Array(16);b=function whatwgRNG(){return P.getRandomValues(R),R}}if(!b){var O=new Array(16);b=function rng(){for(var t,i=0;i<16;i++)0==(3&i)&&(t=4294967296*Math.random()),O[i]=t>>>((3&i)<<3)&255;return O}}for(var B=[],N=0;N<256;++N)B[N]=(N+256).toString(16).substr(1);function v4(t,i,o){var a=i&&o||0;"string"==typeof t&&(i="binary"==t?new Array(16):null,t=null);var u=(t=t||{}).random||(t.rng||b)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,i)for(var d=0;d<16;++d)i[a+d]=u[d];return i||function bytesToUuid(t,i){var o=i||0,a=B;return a[t[o++]]+a[t[o++]]+a[t[o++]]+a[t[o++]]+"-"+a[t[o++]]+a[t[o++]]+"-"+a[t[o++]]+a[t[o++]]+"-"+a[t[o++]]+a[t[o++]]+"-"+a[t[o++]]+a[t[o++]]+a[t[o++]]+a[t[o++]]+a[t[o++]]+a[t[o++]]}(u)}function GetGUID(){return v4()}function clone(t){return Array.isArray(t)?t.slice():t instanceof Object?Object.assign({},t):t}function forEach(t,i){return Array.isArray(t)?forEachOfArray(t,i):function forOwnOfNonArray(t,i){return forEachOfArray(function keysOfNonArray(t){return t?Object.getOwnPropertyNames(t):[]}(t),(function(o){return i(t[o],o)})),t}(t,i),t}function forEachOfArray(t,i){for(var o=0,a=t.length;o<a&&!1!==i(t[o],o);++o);}var Y=function merge(t){for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];for(var u=0,d=o;u<d.length;u++){var b=d[u];forEach(b,(function(i,o){var a=t[o];a instanceof Object&&(i=merge(clone(a),i)),t[o]=i}))}return t},G=function(){function Component(){_classCallCheck(this,Component),null==this._cbit&&console.warn("COMPONENT NOT REGISTERED")}return _createClass(Component,[{key:"world",get:function get(){return this.entity.world}},{key:"allowMultiple",get:function get(){return this.constructor.allowMultiple}},{key:"keyProperty",get:function get(){return this.constructor.keyProperty}},{key:"destroy",value:function destroy(){this.entity.remove(this)}},{key:"_onDestroyed",value:function _onDestroyed(){this.onDestroyed(),delete this.entity}},{key:"_onEvent",value:function _onEvent(t){this.onEvent(t),"function"==typeof this[t.handlerName]&&this[t.handlerName](t)}},{key:"_onAttached",value:function _onAttached(t){this.entity=t,this.onAttached(t)}},{key:"serialize",value:function serialize(){var t={};for(var i in this.constructor.properties)t[i]=this[i];return JSON.parse(JSON.stringify(t))}},{key:"onAttached",value:function onAttached(t){}},{key:"onDestroyed",value:function onDestroyed(){}},{key:"onEvent",value:function onEvent(t){}}]),Component}();_defineProperty(G,"allowMultiple",!1),_defineProperty(G,"keyProperty",null),_defineProperty(G,"properties",{});var X={},U=function camelString(t){var i=X[t];return i||(X[t]=function camelCase$1(t){return function words$1(t){var i;return null!==(i=t.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/(\d)([A-Za-z])/g,"$1 $2").replace(/([A-Za-z])(\d)/g,"$1 $2").replace(/\b([A-Z]+)([A-Z])([a-z])/,"$1 $2$3").match(/[A-Za-z0-9]+/g))&&void 0!==i?i:[]}(t).map((function(t,i){return i?function capitalize$1(t){return function upperFirst(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""}(t.toLowerCase())}(t):t.toLowerCase()})).join("")}(t),X[t])},z=function(){function EntityEvent(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,EntityEvent),_defineProperty(this,"data",{}),_defineProperty(this,"prevented",!1),_defineProperty(this,"handled",!1),this.name=t,this.data=i,this.handlerName=U("on ".concat(this.name))}return _createClass(EntityEvent,[{key:"is",value:function is(t){return this.name===t}},{key:"handle",value:function handle(){this.handled=!0,this.prevented=!0}},{key:"prevent",value:function prevent(){this.prevented=!0}}]),EntityEvent}(),V=0,W=function subtractBit(t,i){return t&~(1<<i)},H=function addBit(t,i){return t|1<<i},j=function bitIntersection(t,i){return t&i},q=function serializeComponent(t){return t.serialize()},Z=function serializeComponentArray(t){return t.map(q)},K=function serializeComponentKeyed(t){var i={};for(var o in t)i[o]=q(t[o]);return i},$=function(){function Entity(t,i){_classCallCheck(this,Entity),_defineProperty(this,"_cbits",function GetBitZero(){return V}()),_defineProperty(this,"_qeligible",!0),this.world=t,this.id=i,this.components={},this.isDestroyed=!1}return _createClass(Entity,[{key:"_candidacy",value:function _candidacy(){this._qeligible&&this.world._candidate(this)}},{key:"add",value:function add(t,i){var o=new t(i);o.keyProperty?function attachComponentKeyed(t,i){var o=i._ckey;t.components[o]||(t[o]={},t.components[o]={}),t[o][i[i.keyProperty]]=i,t.components[o][i[i.keyProperty]]=i}(this,o):o.allowMultiple?function attachComponentArray(t,i){var o=i._ckey;t.components[o]||(t[o]=[],t.components[o]=[]),t[o].push(i),t.components[o].push(i)}(this,o):function attachComponent(t,i){var o=i._ckey;t[o]=i,t.components[o]=i}(this,o),this._cbits=H(this._cbits,o._cbit),o._onAttached(this),this._candidacy()}},{key:"has",value:function has(t){return function hasBit(t,i){return(t>>i)%2!==V}(this._cbits,t.prototype._cbit)}},{key:"remove",value:function remove(t){t.keyProperty?function removeComponentKeyed(t,i){var o=i._ckey,a=i[i.keyProperty];delete t[o][a],delete t.components[o][a],Object.keys(t[o]).length<=0&&(t._cbits=W(t._cbits,i._cbit),t._candidacy(),delete t.components[o],delete t[o])}(this,t):t.allowMultiple?function removeComponentArray(t,i){var o=i._ckey,a=t[o].indexOf(i);t[o].splice(a,1),t.components[o].splice(a,1),t[o].length<=0&&(t._cbits=W(t._cbits,i._cbit),t._candidacy(),delete t.components[o],delete t[o])}(this,t):function removeComponent(t,i){var o=i._ckey;t._cbits=W(t._cbits,i._cbit),t._candidacy(),delete t.components[o],delete t[o]}(this,t),t._onDestroyed()}},{key:"destroy",value:function destroy(){for(var t in this.components){var i=this.components[t];if(i instanceof G)this._cbits=W(this._cbits,i._cbit);else if(i instanceof Array){var o,a=_createForOfIteratorHelper(i);try{for(a.s();!(o=a.n()).done;){var u=o.value;this._cbits=W(this._cbits,u._cbit)}}catch(N){a.e(N)}finally{a.f()}}else for(var d=0,b=Object.values(i);d<b.length;d++){var S=b[d];this._cbits=W(this._cbits,S._cbit)}}for(var C in this._candidacy(),this.components){var M=this.components[C];if(M instanceof G)M._onDestroyed();else if(M instanceof Array){var P,R=_createForOfIteratorHelper(M);try{for(R.s();!(P=R.n()).done;){P.value._onDestroyed()}}catch(N){R.e(N)}finally{R.f()}}else for(var O=0,B=Object.values(M);O<B.length;O++){B[O]._onDestroyed()}delete this[C],delete this.components[C]}this.world._destroyed(this.id),this.components={},this.isDestroyed=!0}},{key:"serialize",value:function serialize(){var t={};for(var i in this.components){var o=this.components[i];t[i]=o instanceof G?q(o):o instanceof Array?Z(o):K(o)}return function _objectSpread(t){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(o),!0).forEach((function(i){_defineProperty(t,i,o[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(o,i))}))}return t}({id:this.id},t)}},{key:"clone",value:function clone(){return this.world.cloneEntity(this)}},{key:"fireEvent",value:function fireEvent(t,i){var o=new z(t,i);for(var a in this.components){var u=this.components[a];if(u instanceof G){if(u._onEvent(o),o.prevented)return o}else if(u instanceof Array){for(var d=0;d<u.length;d++)if(u[d]._onEvent(o),o.prevented)return o}else for(var b=0,S=Object.values(u);b<S.length;b++){if(S[b]._onEvent(o),o.prevented)return o}}return o}}]),Entity}(),tt=function(t){_inherits(DataComponent,t);var i=_createSuper(DataComponent);function DataComponent(t){var o;_classCallCheck(this,DataComponent),(o=i.call(this,null)).gameStateName=null;var a=JSON.parse(JSON.stringify(o.constructor.properties));return Object.assign(_assertThisInitialized(o),a,t),o}return _createClass(DataComponent,null,[{key:"At",value:function At(t){return t.data}},{key:"properties",get:function get(){return{}}},{key:"AddToEntityWithProperties",value:function AddToEntityWithProperties(t,i){return t.has(DataComponent)||t.add(DataComponent,{}),Y(DataComponent.At(t),i),DataComponent.At(t)}}]),DataComponent}(G),et=new(_createClass((function InternalData$b(){_classCallCheck(this,InternalData$b),this.bags={},this.entitiesByAlias={}}))),it=function(){function EntityKeeper(){_classCallCheck(this,EntityKeeper)}return _createClass(EntityKeeper,null,[{key:"Init",value:function Init(){}},{key:"PutActorIntoHisBags",value:function PutActorIntoHisBags(t){var i=nt.At(t);for(var o in i.keys)et.bags[o]||(et.bags[o]=[]),et.bags[o].indexOf(t)<=-1&&et.bags[o].push(t);i.alias&&(et.entitiesByAlias[i.alias]&&et.entitiesByAlias[i.alias],et.entitiesByAlias[i.alias]=t)}},{key:"RemoveActorFromAllHisBags",value:function RemoveActorFromAllHisBags(t){var i=nt.At(t);for(var o in i.keys){et.bags[o]||(et.bags[o]=[]);var a=et.bags[o].indexOf(t);a>=0&&et.bags[o].splice(a,1)}i.alias&&et.entitiesByAlias[i.alias]&&et.entitiesByAlias[i.alias]==t&&delete et.entitiesByAlias[i.alias]}},{key:"QueueDisposeActorsInBag",value:function QueueDisposeActorsInBag(t){for(var i=et.bags[t],o=i.length-1;o>=0;o--)Mt.QueueActorToDisposeBuffer(i[o])}},{key:"GetBagActorsReferenceList",value:function GetBagActorsReferenceList(t){return et.bags[t]||(et.bags[t]=[]),et.bags[t]}},{key:"GetEntityByAlias",value:function GetEntityByAlias(t){return et.entitiesByAlias[t]}},{key:"GetEntityByID",value:function GetEntityByID(t){return dt.GetWorld().getEntity(t)}},{key:"DumpLogBags",value:function DumpLogBags(){console.log(et.bags)}},{key:"DumpLogLengthALL",value:function DumpLogLengthALL(){console.log(et.bags.ALL.length)}}]),EntityKeeper}(),nt=function(t){_inherits(BagsComponent,t);var i=_createSuper(BagsComponent);function BagsComponent(t){var o;_classCallCheck(this,BagsComponent),(o=i.call(this,null)).keys={},o.alias=null;var a=JSON.parse(JSON.stringify(o.constructor.properties));return Object.assign(_assertThisInitialized(o),a,t),o}return _createClass(BagsComponent,[{key:"setAlias",value:function setAlias(t){this.alias&&console.warn("FIX ME! ",this.alias,t),this.alias=t,it.PutActorIntoHisBags(this.entity)}},{key:"onAttached",value:function onAttached(t){it.PutActorIntoHisBags(t)}},{key:"onDestroyed",value:function onDestroyed(){it.RemoveActorFromAllHisBags(this.entity)}}],[{key:"At",value:function At(t){return t.bags}},{key:"AddBagList",value:function AddBagList(t,i){console.assert(o(i),"not an array! ",i);var a={};for(var u in i){a[i[u]]=!0}t.has(BagsComponent)||t.add(BagsComponent,{});var d=BagsComponent.At(t);return Y(d.keys,a),it.PutActorIntoHisBags(t),this}},{key:"properties",get:function get(){return{}}}]),BagsComponent}(G),rt=function(){function ComponentRegistry(){_classCallCheck(this,ComponentRegistry),_defineProperty(this,"_cbit",0),_defineProperty(this,"_map",{})}return _createClass(ComponentRegistry,[{key:"register",value:function register(t){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i=U(t.name),null!=o&&(i=o),t.prototype._ckey=i,t.prototype._cbit=++this._cbit,this._map[i]=t}},{key:"get",value:function get(t){return this._map[t]}}]),ComponentRegistry}(),st=function(){function PrefabComponent(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];_classCallCheck(this,PrefabComponent),this.clazz=t,this.properties=i,this.overwrite=o}return _createClass(PrefabComponent,[{key:"applyToEntity",value:function applyToEntity(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.clazz.allowMultiple&&t.has(this.clazz)){if(!this.overwrite)return;var o=t[this.clazz.prototype._ckey];t.remove(o)}var a=Y(this.properties,i);t.add(this.clazz,a)}}]),PrefabComponent}(),ot=function(){function Prefab(t){_classCallCheck(this,Prefab),_defineProperty(this,"name",""),_defineProperty(this,"inherit",[]),_defineProperty(this,"components",[]),this.name=t}return _createClass(Prefab,[{key:"addComponent",value:function addComponent(t){this.components.push(t)}},{key:"applyToEntity",value:function applyToEntity(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.inherit.forEach((function(o){o.applyToEntity(t,i)}));var o={};return this.components.forEach((function(a){var u=a.clazz,d=u.prototype._ckey,b={};if(u.allowMultiple)if(u.keyProperty){var S=a.properties[u.keyProperty];i[d]&&i[d][S]&&(b=i[d][S])}else o[d]||(o[d]=0),i[d]&&i[d][o[d]]&&(b=i[d][o[d]]),o[d]++;else b=i[d];a.applyToEntity(t,b)})),t}}]),Prefab}(),at=function(){function PrefabRegistry(t){_classCallCheck(this,PrefabRegistry),_defineProperty(this,"_prefabs",{}),_defineProperty(this,"_engine",null),this._engine=t}return _createClass(PrefabRegistry,[{key:"deserialize",value:function deserialize(t){var i=this,o=this.get(t.name);if(o)return o;var a,u=new ot(t.name);return a=Array.isArray(t.inherit)?t.inherit:"string"==typeof t.inherit?[t.inherit]:[],u.inherit=a.map((function(o){var a=i.get(o);return a||(console.warn('Prefab "'.concat(t.name,'" cannot inherit from Prefab "').concat(o,'" because is not registered yet! Prefabs must be registered in the right order.')),o)})),(t.components||[]).forEach((function(o){var a="unknown";if("string"==typeof o){a=o;var d=U(o),b=i._engine._components.get(d);if(b)return void u.addComponent(new st(b))}if("object"===_typeof(o)){a=o.type||"unknown";var S=U(o.type),C=i._engine._components.get(S);if(C)return void u.addComponent(new st(C,o.properties,o.overwrite))}console.warn('Unrecognized component reference "'.concat(a,'" in prefab "').concat(t.name,'". Ensure the component is registered before the prefab.'),o)})),u}},{key:"register",value:function register(t){var i=this.deserialize(t);this._prefabs[i.name]=i}},{key:"get",value:function get(t){return this._prefabs[t]}},{key:"create",value:function create(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=this.get(i);if(a){var u=t.createEntity();return u._qeligible=!1,a.applyToEntity(u,o),u._qeligible=!0,u._candidacy(),u}console.warn('Could not instantiate prefab "'.concat(i,'" since it is not registered'))}}]),PrefabRegistry}(),ht=function(){function Query(t,i){_classCallCheck(this,Query),_defineProperty(this,"_cache",[]),_defineProperty(this,"_onAddListeners",[]),_defineProperty(this,"_onRemoveListeners",[]),_defineProperty(this,"_immutableResult",!0),this._world=t;var o=i.any||[],a=i.all||[],u=i.none||[];this._any=o.reduce((function(t,i){return H(t,i.prototype._cbit)}),V),this._all=a.reduce((function(t,i){return H(t,i.prototype._cbit)}),V),this._none=u.reduce((function(t,i){return H(t,i.prototype._cbit)}),V),this._immutableResult=null==i.immutableResult||i.immutableResult,this.refresh()}return _createClass(Query,[{key:"onEntityAdded",value:function onEntityAdded(t){this._onAddListeners.push(t)}},{key:"onEntityRemoved",value:function onEntityRemoved(t){this._onRemoveListeners.push(t)}},{key:"has",value:function has(t){return this.idx(t)>=0}},{key:"idx",value:function idx(t){return this._cache.indexOf(t)}},{key:"matches",value:function matches(t){var i=t._cbits,o=this._any===V||j(i,this._any)>0,a=j(i,this._all)===this._all,u=j(i,this._none)===V;return o&&a&&u}},{key:"candidate",value:function candidate(t){var i=this.idx(t),o=i>=0;return!t.isDestroyed&&this.matches(t)?(o||(this._cache.push(t),this._onAddListeners.forEach((function(i){return i(t)}))),!0):(o&&(this._cache.splice(i,1),this._onRemoveListeners.forEach((function(i){return i(t)}))),!1)}},{key:"refresh",value:function refresh(){var t=this;this._cache=[],this._world._entities.forEach((function(i){t.candidate(i)}))}},{key:"get",value:function get(){return this._immutableResult?_toConsumableArray2(this._cache):this._cache}}]),Query}(),lt=function(){function World(t){_classCallCheck(this,World),_defineProperty(this,"_id",0),_defineProperty(this,"_queries",[]),_defineProperty(this,"_entities",new Map),this.engine=t}return _createClass(World,[{key:"createId",value:function createId(){return++this._id+Math.random().toString(36).substr(2,9)}},{key:"getEntity",value:function getEntity(t){return this._entities.get(t)}},{key:"getEntities",value:function getEntities(){return this._entities.values()}},{key:"createEntity",value:function createEntity(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.createId(),i=new $(this,t);return this._entities.set(t,i),i}},{key:"destroyEntity",value:function destroyEntity(t){var i=this.getEntity(t);i&&i.destroy()}},{key:"destroyEntities",value:function destroyEntities(){this._entities.forEach((function(t){t.destroy()}))}},{key:"destroy",value:function destroy(){this.destroyEntities(),this._id=0,this._queries=[],this._entities=new Map}},{key:"createQuery",value:function createQuery(t){var i=new ht(this,t);return this._queries.push(i),i}},{key:"createPrefab",value:function createPrefab(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.engine._prefabs.create(this,t,i)}},{key:"serialize",value:function serialize(t){var i=[];return(t||this._entities).forEach((function(t){i.push(t.serialize())})),{entities:i}}},{key:"cloneEntity",value:function cloneEntity(t){var i=t.serialize();return i.id=this.createId(),this._deserializeEntity(i)}},{key:"deserialize",value:function deserialize(t){var i,o=_createForOfIteratorHelper(t.entities);try{for(o.s();!(i=o.n()).done;){var a=i.value;this._createOrGetEntityById(a.id)}}catch(S){o.e(S)}finally{o.f()}var u,d=_createForOfIteratorHelper(t.entities);try{for(d.s();!(u=d.n()).done;){var b=u.value;this._deserializeEntity(b)}}catch(S){d.e(S)}finally{d.f()}}},{key:"_createOrGetEntityById",value:function _createOrGetEntityById(t){return this.getEntity(t)||this.createEntity(t)}},{key:"_deserializeEntity",value:function _deserializeEntity(i){var o=this,a=i.id,u=_objectWithoutProperties(i,t),d=this._createOrGetEntityById(a);return d._qeligible=!1,Object.entries(u).forEach((function(t){var i=_slicedToArray2(t,2),a=i[0],u=i[1],b=U(a),S=o.engine._components.get(b);S.allowMultiple?Object.values(u).forEach((function(t){d.add(S,t)})):d.add(S,u)})),d._qeligible=!0,d._candidacy(),d}},{key:"_candidate",value:function _candidate(t){this._queries.forEach((function(i){return i.candidate(t)}))}},{key:"_destroyed",value:function _destroyed(t){return this._entities.delete(t)}}]),World}(),ut=function(){function Engine(){_classCallCheck(this,Engine),_defineProperty(this,"_components",new rt),_defineProperty(this,"_prefabs",new at(this))}return _createClass(Engine,[{key:"registerComponent",value:function registerComponent(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._components.register(t,i)}},{key:"registerPrefab",value:function registerPrefab(t){this._prefabs.register(t)}},{key:"createWorld",value:function createWorld(){return new lt(this)}},{key:"destroyWorld",value:function destroyWorld(t){t.destroy()}}]),Engine}(),ct=new(_createClass((function InternalDataClass$8(){_classCallCheck(this,InternalDataClass$8),this.engine=null,this.world=null}))),dt=function(){function GeoticManager(){_classCallCheck(this,GeoticManager)}return _createClass(GeoticManager,null,[{key:"SetEngine",value:function SetEngine(t){ct.engine=t}},{key:"GetEngine",value:function GetEngine(){return ct.engine}},{key:"SetWorld",value:function SetWorld(t){ct.world=t}},{key:"GetWorld",value:function GetWorld(){return ct.world}},{key:"CreateEntity",value:function CreateEntity(t){console.assert(t,"GameState: ",t),t.name&&(t=t.name);var i=ct.world.createEntity();return tt.AddToEntityWithProperties(i,{gameStateName:t}),nt.AddBagList(i,["ALL"]),nt.AddBagList(i,[t]),i}},{key:"InstantActorDestroy",value:function InstantActorDestroy(t){t.isDestroyed||t.destroy()}}]),GeoticManager}(),ft=function(){function DataHolder(){_classCallCheck(this,DataHolder),this.data={},this.keyList=[]}return _createClass(DataHolder,[{key:"register",value:function register(t,i){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.data[t]&&0==o&&console.warn(t," ALREADY EXIST IN DATA HOLDER"),this.data[t]=i,this.keyList.indexOf(t)<=-1&&this.keyList.push(t),i}},{key:"hasKey",value:function hasKey(t){return!!this.data[t]}},{key:"getData",value:function getData(t){return console.assert(this.data[t],t," not in: ",this.data),this.data[t]}},{key:"getKeyList",value:function getKeyList(){return this.keyList}}]),DataHolder}(),pt=function(){function GameBranding(){_classCallCheck(this,GameBranding),this.topScore=0}return _createClass(GameBranding,[{key:"init",value:function init(){}},{key:"getPremadeOverrides",value:function getPremadeOverrides(){return{}}},{key:"gameEvent",value:function gameEvent(t){}},{key:"updateTime",value:function updateTime(t){}},{key:"getAudioOverrides",value:function getAudioOverrides(){return{}}},{key:"getFlags",value:function getFlags(){return{disableSaveUserPrefs:0,disableSaveGameData:0,disableFakeMusicPreload:0,cordovaListenersEnabled:0,disableAutoPause:0,allowPauseAlways:0}}},{key:"getUntypedFlags",value:function getUntypedFlags(){return{}}},{key:"onGetRendererTypeOverride",value:function onGetRendererTypeOverride(t){return t}},{key:"hasToResetScoreEachLevel",value:function hasToResetScoreEachLevel(){return!1}},{key:"adaptLocalStorageSetItem",value:function adaptLocalStorageSetItem(t,i){localStorage.setItem(t,i)}},{key:"adaptLocalStorageGetItem",value:function adaptLocalStorageGetItem(t){return localStorage.getItem(t)}},{key:"showAd",value:function showAd(t){t()}},{key:"onUpdateScore",value:function onUpdateScore(t){this.topScore=t}},{key:"onUpdateLevelNumber",value:function onUpdateLevelNumber(t){}},{key:"pushAPIGameLoadObj",value:function pushAPIGameLoadObj(t){}}],[{key:"SetSingleton",value:function SetSingleton(t){GameBranding.Singleton=t,GameBranding.Singleton.init(),console.log(t)}},{key:"GetSingleton",value:function GetSingleton(){return this.Singleton}}]),GameBranding}();_defineProperty(pt,"Singleton",void 0);var gt=function(){function GameCommand(t){_classCallCheck(this,GameCommand),this._func=t}return _createClass(GameCommand,[{key:"run",value:function run(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._func(t)}}]),GameCommand}(),vt=function(t){_inherits(ExtendedDataHolder$1,t);var i=_createSuper(ExtendedDataHolder$1);function ExtendedDataHolder$1(){return _classCallCheck(this,ExtendedDataHolder$1),i.apply(this,arguments)}return _createClass(ExtendedDataHolder$1,[{key:"register",value:function register(t,i){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _get(_getPrototypeOf(ExtendedDataHolder$1.prototype),"register",this).call(this,t,i,o),i}},{key:"getData",value:function getData(t){return _get(_getPrototypeOf(ExtendedDataHolder$1.prototype),"getData",this).call(this,t)}},{key:"runCommand",value:function runCommand(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.getData(t).run(i)}},{key:"runCommandObj",value:function runCommandObj(t){this.runCommand(t.key,t)}}]),ExtendedDataHolder$1}(ft),mt=new vt,yt=function(t){_inherits(CommandsComponent,t);var i=_createSuper(CommandsComponent);function CommandsComponent(t){var o;_classCallCheck(this,CommandsComponent),(o=i.call(this,null)).byTriggers={};var a=JSON.parse(JSON.stringify(o.constructor.properties));return Object.assign(_assertThisInitialized(o),a,t),o}return _createClass(CommandsComponent,[{key:"runCommandAtTriggerKey",value:function runCommandAtTriggerKey(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=this.byTriggers[t]){var o=this.byTriggers[t];if(mt.hasKey(o.key)){var a={entity:this.entity};o&&Y(a,o),o.pOptPayload&&Y(a,i),mt.runCommand(o.key,a)}else console.warn("GameCommandsRegistry no defined command: ",o.key)}}}],[{key:"At",value:function At(t){return t.commands||CommandsComponent.AddWithData(t,{}),t.commands}},{key:"AddWithData",value:function AddWithData(t,i){t.has(CommandsComponent)||t.add(CommandsComponent,{});var o=CommandsComponent.At(t);return Y(o,{byTriggers:i}),o}},{key:"properties",get:function get(){return{}}}]),CommandsComponent}(G),xt="quit",Tt="exit",bt="enterFresh",wt=function(){function GameState(t){_classCallCheck(this,GameState),this.name=t,this.state="null",this.curQuitDelay=0,this.onEnter=function(){},this.onExit=function(){},this.onQuit=function(){},Ct.register(this.name,this)}return _createClass(GameState,[{key:"enterFresh",value:function enterFresh(){this.state!=xt&&"null"!=this.state&&(this.state!=Tt&&this.exit(),this.quit()),this.state=bt,this.onEnter(),pt.GetSingleton().gameEvent("stateChange",{stateName:this.name,stateChangeType:"enter"})}},{key:"exit",value:function exit(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;if(this.delayedFunctionDict={},this.state!=Tt&&this.state!=xt&&"null"!=this.state){this.curQuitDelay=t,this.state=Tt,this.onExit(),pt.GetSingleton().gameEvent("stateChange",{stateName:this.name,stateChangeType:"exit"});var i=it.GetBagActorsReferenceList(this.name);for(var o in i){var a=i[o];yt.At(a).runCommandAtTriggerKey("exit")}}}},{key:"quit",value:function quit(){this.delayedFunctionDict={},this.state!=xt&&"null"!=this.state&&(this.state=xt,it.QueueDisposeActorsInBag(this.name),this.onQuit())}},{key:"continue",value:function _continue(){this.state==Tt&&this.quit(),this.state!=bt&&this.enterFresh()}},{key:"isRunning",value:function isRunning(){return this.state==bt}},{key:"updateDelayedQuit",value:function updateDelayedQuit(t){this.state==Tt&&(this.curQuitDelay-=t,this.curQuitDelay<0&&this.quit())}}]),GameState}(),St=function(t){_inherits(ExtendedDataHolder,t);var i=_createSuper(ExtendedDataHolder);function ExtendedDataHolder(){return _classCallCheck(this,ExtendedDataHolder),i.apply(this,arguments)}return _createClass(ExtendedDataHolder,[{key:"register",value:function register(t,i){return _get(_getPrototypeOf(ExtendedDataHolder.prototype),"register",this).call(this,t,i),i}},{key:"getData",value:function getData(t){return _get(_getPrototypeOf(ExtendedDataHolder.prototype),"getData",this).call(this,t)}}]),ExtendedDataHolder}(ft),Ct=new St,Et={entityDisposeBuffer:[],delayedFunctionDict:{},delayedFunctionDeleteKeysList:[],active:!0};var Mt=function(){function EndOfLoopRoutine(){_classCallCheck(this,EndOfLoopRoutine)}return _createClass(EndOfLoopRoutine,null,[{key:"OnRegister",value:function OnRegister(){}},{key:"Init",value:function Init(){}},{key:"Register",value:function Register(){M.RegisterRoutine(EndOfLoopRoutine)}},{key:"GetName",value:function GetName(){return"EndOfLoopRoutine"}},{key:"QueueActorToDisposeBuffer",value:function QueueActorToDisposeBuffer(t){t&&(t.isDestroyed||Et.entityDisposeBuffer.indexOf(t)>-1||Et.entityDisposeBuffer.push(t))}},{key:"QueueDelayedFunction",value:function QueueDelayedFunction(t,i,o){return null==t&&(t=GetGUID()),Et.delayedFunctionDict[t]={tag:t,delay:i,func:o},t}},{key:"Update",value:function Update(t){var i=Ct.getKeyList();for(var o in i){var a=i[o];Ct.getData(a).updateDelayedQuit(t)}for(var u in Et.delayedFunctionDict){var d=Et.delayedFunctionDict[u];d.delay-=t,d.delay<=0&&(Et.delayedFunctionDeleteKeysList.push(u),d.func())}for(var b=Et.delayedFunctionDeleteKeysList.length-1;b>=0;b--){var S=Et.delayedFunctionDeleteKeysList[b];delete Et.delayedFunctionDict[S],Et.delayedFunctionDeleteKeysList.splice(b,1)}Et.entityDisposeBuffer.length>0&&function _FlushDisposeBuffer(){var t=Et.entityDisposeBuffer;Et.entityDisposeBuffer=[];for(var i=t.length-1;i>=0;i--){var o=t[i];dt.InstantActorDestroy(o)}}()}}]),EndOfLoopRoutine}(),_t={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1},Pt=!1;function GetOs(){if(Pt)return _t;Pt=!0;var t=navigator.userAgent;/Windows/.test(t)?_t.windows=!0:/Mac OS/.test(t)&&!/like Mac OS/.test(t)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(_t.iOS=!0,_t.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),_t.iOSVersion=parseInt(RegExp.$1,10)):_t.macOS=!0:/Android/.test(t)?_t.android=!0:/Linux/.test(t)?_t.linux=!0:/iP[ao]d|iPhone/i.test(t)?(_t.iOS=!0,navigator.appVersion.match(/OS (\d+)/),_t.iOSVersion=parseInt(RegExp.$1,10),_t.iPhone=-1!==t.toLowerCase().indexOf("iphone"),_t.iPad=-1!==t.toLowerCase().indexOf("ipad")):/Kindle/.test(t)||/\bKF[A-Z][A-Z]+/.test(t)||/Silk.*Mobile Safari/.test(t)?_t.kindle=!0:/CrOS/.test(t)&&(_t.chromeOS=!0),(/Windows Phone/i.test(t)||/IEMobile/i.test(t))&&(_t.android=!1,_t.iOS=!1,_t.macOS=!1,_t.windows=!0,_t.windowsPhone=!0);var i=/Silk/.test(t);return(_t.windows||_t.macOS||_t.linux&&!i||_t.chromeOS)&&(_t.desktop=!0),(_t.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(_t.desktop=!1),navigator.standalone&&(_t.webApp=!0),void 0!==window.cordova&&(_t.cordova=!0),"undefined"!=typeof process&&process.versions&&process.versions.node&&(_t.node=!0),_t.node&&"object"===_typeof(process.versions)&&(_t.nodeWebkit=!!process.versions["node-webkit"],_t.electron=!!process.versions.electron),void 0!==window.ejecta&&(_t.ejecta=!0),/Crosswalk/.test(t)&&(_t.crosswalk=!0),_t.pixelRatio=window.devicePixelRatio||1,_t}var Rt={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0},kt=!1;var Ot=function(){function ObjectFactory$1(t){_classCallCheck(this,ObjectFactory$1),this.scene=t,this.displayList=t.sys.displayList,this.updateList=t.sys.updateList,t.sys.events.once("destroy",this.destroy,this)}return _createClass(ObjectFactory$1,[{key:"destroy",value:function destroy(){this.scene=null,this.displayList=null,this.updateList=null}}],[{key:"register",value:function register(t,i){ObjectFactory$1.prototype[t]=i}}]),ObjectFactory$1}(),Lt={exports:{}};!function(t){var i=Object.prototype.hasOwnProperty,o="~";function Events(){}function EE(t,i,o){this.fn=t,this.context=i,this.once=o||!1}function addListener(t,i,a,u,d){if("function"!=typeof a)throw new TypeError("The listener must be a function");var b=new EE(a,u||t,d),S=o?o+i:i;return t._events[S]?t._events[S].fn?t._events[S]=[t._events[S],b]:t._events[S].push(b):(t._events[S]=b,t._eventsCount++),t}function clearEvent(t,i){0==--t._eventsCount?t._events=new Events:delete t._events[i]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(o=!1)),EventEmitter.prototype.eventNames=function eventNames(){var t,a,u=[];if(0===this._eventsCount)return u;for(a in t=this._events)i.call(t,a)&&u.push(o?a.slice(1):a);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(t)):u},EventEmitter.prototype.listeners=function listeners(t){var i=o?o+t:t,a=this._events[i];if(!a)return[];if(a.fn)return[a.fn];for(var u=0,d=a.length,b=new Array(d);u<d;u++)b[u]=a[u].fn;return b},EventEmitter.prototype.listenerCount=function listenerCount(t){var i=o?o+t:t,a=this._events[i];return a?a.fn?1:a.length:0},EventEmitter.prototype.emit=function emit(t,i,a,u,d,b){var S=o?o+t:t;if(!this._events[S])return!1;var C,M,P=this._events[S],R=arguments.length;if(P.fn){switch(P.once&&this.removeListener(t,P.fn,void 0,!0),R){case 1:return P.fn.call(P.context),!0;case 2:return P.fn.call(P.context,i),!0;case 3:return P.fn.call(P.context,i,a),!0;case 4:return P.fn.call(P.context,i,a,u),!0;case 5:return P.fn.call(P.context,i,a,u,d),!0;case 6:return P.fn.call(P.context,i,a,u,d,b),!0}for(M=1,C=new Array(R-1);M<R;M++)C[M-1]=arguments[M];P.fn.apply(P.context,C)}else{var O,B=P.length;for(M=0;M<B;M++)switch(P[M].once&&this.removeListener(t,P[M].fn,void 0,!0),R){case 1:P[M].fn.call(P[M].context);break;case 2:P[M].fn.call(P[M].context,i);break;case 3:P[M].fn.call(P[M].context,i,a);break;case 4:P[M].fn.call(P[M].context,i,a,u);break;default:if(!C)for(O=1,C=new Array(R-1);O<R;O++)C[O-1]=arguments[O];P[M].fn.apply(P[M].context,C)}}return!0},EventEmitter.prototype.on=function on(t,i,o){return addListener(this,t,i,o,!1)},EventEmitter.prototype.once=function once(t,i,o){return addListener(this,t,i,o,!0)},EventEmitter.prototype.removeListener=function removeListener(t,i,a,u){var d=o?o+t:t;if(!this._events[d])return this;if(!i)return clearEvent(this,d),this;var b=this._events[d];if(b.fn)b.fn!==i||u&&!b.once||a&&b.context!==a||clearEvent(this,d);else{for(var S=0,C=[],M=b.length;S<M;S++)(b[S].fn!==i||u&&!b[S].once||a&&b[S].context!==a)&&C.push(b[S]);C.length?this._events[d]=1===C.length?C[0]:C:clearEvent(this,d)}return this},EventEmitter.prototype.removeAllListeners=function removeAllListeners(t){var i;return t?(i=o?o+t:t,this._events[i]&&clearEvent(this,i)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=o,EventEmitter.EventEmitter=EventEmitter,t.exports=EventEmitter}(Lt);var Dt=function(t){_inherits(EventEmitter,t);var i=_createSuper(EventEmitter);function EventEmitter(){return _classCallCheck(this,EventEmitter),i.apply(this,arguments)}return _createClass(EventEmitter,[{key:"shutdown",value:function shutdown(){this.removeAllListeners()}},{key:"destroy",value:function destroy(){this.removeAllListeners()}}]),EventEmitter}(Lt.exports),It=function GetValue$l(t,i,o){if(t&&"number"!=typeof t){if(t.hasOwnProperty(i))return t[i];if(-1!==i.indexOf(".")){for(var a=i.split("."),u=t,d=o,b=0;b<a.length;b++){if(!u.hasOwnProperty(a[b])){d=o;break}d=u[a[b]],u=u[a[b]]}return d}return o}return o},Ft=function(){function Bank(t){_classCallCheck(this,Bank),this.nextId=It(t,"start",1),this.uidKey=It(t,"uidKey","$uid"),this.autoRemove=It(t,"remove",!0),this.refs={},this.count=0}return _createClass(Bank,[{key:"add",value:function add(t,i){var o=this.refs,a=this.uidKey;if(a&&null!=(i=t[a]))return this;if(null==i)do{i=this.nextId,this.nextId++}while(o.hasOwnProperty(i));return o.hasOwnProperty(i)?i=null:(o[i]=t,this.count++,a&&(t[a]=i),this.autoRemove&&t.on&&t.once("destroy",(function(){this.remove(i)}),this)),a?this:i}},{key:"addMultiple",value:function addMultiple(t){for(var i=0,o=t.length;i<o;i++)this.add(t[i]);return this}},{key:"get",value:function get(t){return this.refs[t]}},{key:"has",value:function has(t){return this.refs.hasOwnProperty(t)}},{key:"remove",value:function remove(t){var i=this.refs;if(i.hasOwnProperty(t)){if(this.uidKey)i[t][this.uidKey]=void 0;delete i[t],this.count--}return this}},{key:"forEach",value:function forEach(t,i){var o,a=this.refs;for(var u in a)o=a[u],i?t.call(i,o,u):t(o,u)}},{key:"clear",value:function clear(){this.forEach((function(t){this.remove(t)}),this)}}]),Bank}(),Bt=new Ft({uidKey:"$uid",remove:!1}),Nt={setEventEmitter:function setEventEmitter(t,i){return void 0===i&&(i=Phaser.Events.EventEmitter),this._privateEE=!0===t||void 0===t,this._eventEmitter=this._privateEE?new i:t,this},destroyEventEmitter:function destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter:function getEventEmitter(){return this._eventEmitter},on:function on(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function once(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function off(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function emit(t){return this._eventEmitter&&t&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function addListener(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function removeListener(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function removeAllListeners(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function listenerCount(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function listeners(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function eventNames(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},Yt=Phaser.Scene,Gt=function IsSceneObject(t){return t instanceof Yt},Xt=function GetSceneObject(t){return null==t||"object"!==_typeof(t)?null:Gt(t)?t:t.scene&&Gt(t.scene)?t.scene:t.parent&&t.parent.scene&&Gt(t.parent.scene)?t.parent.scene:void 0},Ut=Phaser.Utils.Objects.GetValue,zt=function(){function ComponentBase(t,i){_classCallCheck(this,ComponentBase),this.parent=t,this.scene=Xt(t),this.isShutdown=!1,this.setEventEmitter(Ut(i,"eventEmitter",!0)),this.parent&&this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this)}return _createClass(ComponentBase,[{key:"shutdown",value:function shutdown(t){this.isShutdown||(this.parent&&this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.isShutdown=!0)}},{key:"destroy",value:function destroy(t){this.shutdown(t)}},{key:"onSceneDestroy",value:function onSceneDestroy(){this.destroy(!0)}},{key:"onParentDestroy",value:function onParentDestroy(t,i){this.destroy(i)}}]),ComponentBase}();Object.assign(zt.prototype,Nt);var Vt={x:0,y:0},Wt=function IsPlainObject(t){if("object"!==_typeof(t)||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}return!0},Ht=Bt.uidKey,jt=function(t){_inherits(Chess,t);var i=_createSuper(Chess);function Chess(t,o){var a;return _classCallCheck(this,Chess),a=i.call(this,t,{eventEmitter:!1}),Bt.add(_assertThisInitialized(a),o),a.board=null,a.blocker=!1,a}return _createClass(Chess,[{key:"shutdown",value:function shutdown(t){this.isShutdown||(this.board&&this.board.removeChess(this[Ht]),Bt.remove(this[Ht]),this.board=null,_get(_getPrototypeOf(Chess.prototype),"shutdown",this).call(this,t))}},{key:"setBoard",value:function setBoard(t){return this.board=t,this}},{key:"tileXYZ",get:function get(){return null==this.board?null:this.board.chessToTileXYZ(this[Ht])}},{key:"setTileZ",value:function setTileZ(t){return null==this.board||this.board.setChessTileZ(this.parent,t),this}},{key:"setBlocker",value:function setBlocker(t){return void 0===t&&(t=!0),this.blocker=t,this}},{key:"setBlockEdge",value:function setBlockEdge(t,i){!1===this.blocker&&(this.blocker={});var o=this.blocker;if(Wt(t)){var a=t;for(t in a)o[t]=a[t]}else void 0===i&&(i=!0),o[t]=i;return this}},{key:"getBlockEdge",value:function getBlockEdge(t){var i=this.blocker;return!1!==i&&(!!i.hasOwnProperty(t)&&i[t])}}]),Chess}(zt),qt={getTileDirection:function GetTileDirection(t,i){var o=this.board;return null===o?null:(Vt.x=t,Vt.y=i,o.getNeighborTileDirection(this.tileXYZ,Vt))}};Object.assign(jt.prototype,qt);var Zt=function IsUID(t){var i=_typeof(t);return"number"===i||"string"===i},Kt=function GetChessData(t){return Zt(t)?Bt.get(t):(t.hasOwnProperty("rexChess")||(t.rexChess=new jt(t)),t.rexChess)},Jt=Bt.uidKey,Qt=function GetChessUID(t){return Zt(t)?t:Kt(t)[Jt]},$t=function TileXYToKey(t,i,o){return void 0===o&&(o=","),"".concat(t).concat(o).concat(i)},te={},ee={},ie=function Between$1(t,i,o,a){return Math.atan2(a-i,o-t)},ne=function Normalize(t){return(t%=2*Math.PI)>=0?t:t+2*Math.PI},re=2*Math.PI,se={x:0,y:0},oe=180/Math.PI,ae=function RadToDeg$3(t){return t*oe},he=function ShortestBetween$1(t,i){var o=i-t;return 0===o?0:o-360*Math.floor((o- -180)/360)},le=function GetGridPoints$2(t,i,o){if(t&&"number"!=typeof t){o=i;var a=this.chessToTileXYZ(t);t=a.x,i=a.y}return this.grid.getGridPoints(t,i,o)},ue=function Linear$1(t,i,o){return(i-t)*o+t},ce=function AreTileXYEqual(t,i){return t&&i&&t.x===i.x&&t.y===i.y},de=function Contains$5(t,i,o){return t.radius>0&&i>=t.left&&i<=t.right&&o>=t.top&&o<=t.bottom&&(t.x-i)*(t.x-i)+(t.y-o)*(t.y-o)<=t.radius*t.radius},fe=function Contains$4(t,i,o){if(t.width<=0||t.height<=0)return!1;var a=(i-t.x)/t.width,u=(o-t.y)/t.height;return(a*=a)+(u*=u)<.25},pe=function Contains$3(t,i,o){for(var a=!1,u=-1,d=t.points.length-1;++u<t.points.length;d=u){var b=t.points[u].x,S=t.points[u].y,C=t.points[d].x,M=t.points[d].y;(S<=o&&o<M||M<=o&&o<S)&&i<(C-b)*(o-S)/(M-S)+b&&(a=!a)}return a};function getProperty(t,i,o){var a=o?t[i]:Object.getOwnPropertyDescriptor(t,i);return!o&&a.value&&"object"===_typeof(a.value)&&(a=a.value),!(!a||!function hasGetterOrSetter(t){return!!t.get&&"function"==typeof t.get||!!t.set&&"function"==typeof t.set}(a))&&(void 0===a.enumerable&&(a.enumerable=!0),void 0===a.configurable&&(a.configurable=!0),a)}function hasNonConfigurable(t,i){var o=Object.getOwnPropertyDescriptor(t,i);return!!o&&(o.value&&"object"===_typeof(o.value)&&(o=o.value),!1===o.configurable)}function extend(t,i,o,a){for(var u in i)if(i.hasOwnProperty(u)){var d=getProperty(i,u,o);if(!1!==d){if(hasNonConfigurable((a||t).prototype,u)){if(Class.ignoreFinals)continue;throw new Error("cannot override final property '"+u+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,u,d)}else t.prototype[u]=i[u]}}function mixin(t,i){if(i){Array.isArray(i)||(i=[i]);for(var o=0;o<i.length;o++)extend(t,i[o].prototype||i[o])}}function Class(t){var i,o;if(t||(t={}),t.initialize){if("function"!=typeof t.initialize)throw new Error("initialize must be a function");i=t.initialize,delete t.initialize}else if(t.Extends){var a=t.Extends;i=function initialize(){a.apply(this,arguments)}}else i=function initialize(){};t.Extends?(i.prototype=Object.create(t.Extends.prototype),i.prototype.constructor=i,o=t.Extends,delete t.Extends):i.prototype.constructor=i;var u=null;return t.Mixins&&(u=t.Mixins,delete t.Mixins),mixin(i,u),extend(i,t,!0,o),i}Class.extend=extend,Class.mixin=mixin,Class.ignoreFinals=!1;var ge=function Contains$2(t,i,o){return!(t.width<=0||t.height<=0)&&(t.x<=i&&t.x+t.width>=i&&t.y<=o&&t.y+t.height>=o)},ve=function Perimeter(t){return 2*(t.width+t.height)},me=new Class({initialize:function Point(t,i){void 0===t&&(t=0),void 0===i&&(i=t),this.x=t,this.y=i},setTo:function setTo(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.x=t,this.y=i,this}}),ye=function GetPoint$1(t,i,o){if(void 0===o&&(o=new me),i<=0||i>=1)return o.x=t.x,o.y=t.y,o;var a=ve(t)*i;return i>.5?(a-=t.width+t.height)<=t.width?(o.x=t.right-a,o.y=t.bottom):(o.x=t.x,o.y=t.bottom-(a-t.width)):a<=t.width?(o.x=t.x+a,o.y=t.y):(o.x=t.right,o.y=t.y+(a-t.width)),o},xe=function GetPoints(t,i,o,a){void 0===a&&(a=[]),i||(i=function Length(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))}(t)/o);for(var u=t.x1,d=t.y1,b=t.x2,S=t.y2,C=0;C<i;C++){var M=C/i,P=u+(b-u)*M,R=d+(S-d)*M;a.push(new me(P,R))}return a},Te=new Class({initialize:function Vector2(t,i){this.x=0,this.y=0,"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0):(void 0===i&&(i=t),this.x=t||0,this.y=i||0)},clone:function clone(){return new Te(this.x,this.y)},copy:function copy(t){return this.x=t.x||0,this.y=t.y||0,this},setFromObject:function setFromObject(t){return this.x=t.x||0,this.y=t.y||0,this},set:function set(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setTo:function setTo(t,i){return this.set(t,i)},setToPolar:function setToPolar(t,i){return null==i&&(i=1),this.x=Math.cos(t)*i,this.y=Math.sin(t)*i,this},equals:function equals(t){return this.x===t.x&&this.y===t.y},angle:function angle(){var angle=Math.atan2(this.y,this.x);return angle<0&&(angle+=2*Math.PI),angle},add:function add(t){return this.x+=t.x,this.y+=t.y,this},subtract:function subtract(t){return this.x-=t.x,this.y-=t.y,this},multiply:function multiply(t){return this.x*=t.x,this.y*=t.y,this},scale:function scale(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function divide(t){return this.x/=t.x,this.y/=t.y,this},negate:function negate(){return this.x=-this.x,this.y=-this.y,this},distance:function distance(t){var i=t.x-this.x,o=t.y-this.y;return Math.sqrt(i*i+o*o)},distanceSq:function distanceSq(t){var i=t.x-this.x,o=t.y-this.y;return i*i+o*o},length:function length(){var t=this.x,i=this.y;return Math.sqrt(t*t+i*i)},lengthSq:function lengthSq(){var t=this.x,i=this.y;return t*t+i*i},normalize:function normalize(){var t=this.x,i=this.y,o=t*t+i*i;return o>0&&(o=1/Math.sqrt(o),this.x=t*o,this.y=i*o),this},normalizeRightHand:function normalizeRightHand(){var t=this.x;return this.x=-1*this.y,this.y=t,this},dot:function dot(t){return this.x*t.x+this.y*t.y},cross:function cross(t){return this.x*t.y-this.y*t.x},lerp:function lerp(t,i){void 0===i&&(i=0);var o=this.x,a=this.y;return this.x=o+i*(t.x-o),this.y=a+i*(t.y-a),this},transformMat3:function transformMat3(t){var i=this.x,o=this.y,a=t.val;return this.x=a[0]*i+a[3]*o+a[6],this.y=a[1]*i+a[4]*o+a[7],this},transformMat4:function transformMat4(t){var i=this.x,o=this.y,a=t.val;return this.x=a[0]*i+a[4]*o+a[12],this.y=a[1]*i+a[5]*o+a[13],this},reset:function reset(){return this.x=0,this.y=0,this}});Te.ZERO=new Te,Te.RIGHT=new Te(1,0),Te.LEFT=new Te(-1,0),Te.UP=new Te(0,-1),Te.DOWN=new Te(0,1),Te.ONE=new Te(1,1);var be,we,Se,Ce=new Class({initialize:function Line(t,i,o,a){void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),this.x1=t,this.y1=i,this.x2=o,this.y2=a},getPoint:function getPoint(t,i){return function GetPoint(t,i,o){return void 0===o&&(o=new me),o.x=t.x1+(t.x2-t.x1)*i,o.y=t.y1+(t.y2-t.y1)*i,o}(this,t,i)},getPoints:function getPoints(t,i,o){return xe(this,t,i,o)},getRandomPoint:function getRandomPoint(t){return function Random$1(t,i){void 0===i&&(i=new me);var o=Math.random();return i.x=t.x1+o*(t.x2-t.x1),i.y=t.y1+o*(t.y2-t.y1),i}(this,t)},setTo:function setTo(t,i,o,a){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),this.x1=t,this.y1=i,this.x2=o,this.y2=a,this},getPointA:function getPointA(t){return void 0===t&&(t=new Te),t.set(this.x1,this.y1),t},getPointB:function getPointB(t){return void 0===t&&(t=new Te),t.set(this.x2,this.y2),t},left:{get:function get(){return Math.min(this.x1,this.x2)},set:function set(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function get(){return Math.max(this.x1,this.x2)},set:function set(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function get(){return Math.min(this.y1,this.y2)},set:function set(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function get(){return Math.max(this.y1,this.y2)},set:function set(t){this.y1>this.y2?this.y1=t:this.y2=t}}}),Ae=new Class({initialize:function Rectangle(t,i,o,a){void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),this.x=t,this.y=i,this.width=o,this.height=a},contains:function contains(t,i){return ge(this,t,i)},getPoint:function getPoint(t,i){return ye(this,t,i)},getPoints:function getPoints(t,i,o){return function GetPoints$1(t,i,o,a){void 0===a&&(a=[]),i||(i=ve(t)/o);for(var u=0;u<i;u++){var d=u/i;a.push(ye(t,d))}return a}(this,t,i,o)},getRandomPoint:function getRandomPoint(t){return function Random(t,i){return void 0===i&&(i=new me),i.x=t.x+Math.random()*t.width,i.y=t.y+Math.random()*t.height,i}(this,t)},setTo:function setTo(t,i,o,a){return this.x=t,this.y=i,this.width=o,this.height=a,this},setEmpty:function setEmpty(){return this.setTo(0,0,0,0)},setPosition:function setPosition(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setSize:function setSize(t,i){return void 0===i&&(i=t),this.width=t,this.height=i,this},isEmpty:function isEmpty(){return this.width<=0||this.height<=0},getLineA:function getLineA(t){return void 0===t&&(t=new Ce),t.setTo(this.x,this.y,this.right,this.y),t},getLineB:function getLineB(t){return void 0===t&&(t=new Ce),t.setTo(this.right,this.y,this.right,this.bottom),t},getLineC:function getLineC(t){return void 0===t&&(t=new Ce),t.setTo(this.right,this.bottom,this.x,this.bottom),t},getLineD:function getLineD(t){return void 0===t&&(t=new Ce),t.setTo(this.x,this.bottom,this.x,this.y),t},left:{get:function get(){return this.x},set:function set(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}},right:{get:function get(){return this.x+this.width},set:function set(t){t<=this.x?this.width=0:this.width=t-this.x}},top:{get:function get(){return this.y},set:function set(t){t>=this.bottom?this.height=0:this.height=this.bottom-t,this.y=t}},bottom:{get:function get(){return this.y+this.height},set:function set(t){t<=this.y?this.height=0:this.height=t-this.y}},centerX:{get:function get(){return this.x+this.width/2},set:function set(t){this.x=t-this.width/2}},centerY:{get:function get(){return this.y+this.height/2},set:function set(t){this.y=t-this.height/2}}}),Ee=function Contains$1(t,i,o){var a=t.x3-t.x1,u=t.y3-t.y1,d=t.x2-t.x1,b=t.y2-t.y1,S=i-t.x1,C=o-t.y1,M=a*a+u*u,P=a*d+u*b,R=a*S+u*C,O=d*d+b*b,B=d*S+b*C,N=M*O-P*P,Y=0===N?0:1/N,G=(O*R-P*B)*Y,X=(M*B-P*R)*Y;return G>=0&&X>=0&&G+X<1},Me=function Clamp$1(t,i,o){return Math.max(i,Math.min(o,t))},_e=function AddChess$1(t,i,o,a,u){if(!this.contains(i,o))return this;void 0===u&&(u=!0);var d=this.chessToTileXYZ(t);if(void 0===a&&(a=d?d.z:0),d&&d.x===i&&d.y===o&&d.z===a)return this;var b=this.tileXYZToChess(i,o,a);return b&&this.emit("kickout",t,b,d),this.removeChess(t),b&&this.removeChess(b,i,o,a),this.boardData.addUID(this.getChessUID(t),i,o,a),this.isBoard&&this.getChessData(t).setBoard(this),u&&this.gridAlign(t,i,o),this},Pe={x:0,y:0},Re=function Wrap(t,i,o){var a=o-i;return i+((t-i)%a+a)%a},ke={},Oe={},Le={},De={},Ie=function Between(t,i){return Math.floor(Math.random()*(i-t+1)+t)},Fe=function GetRandom(t,i,o){void 0===i&&(i=0),void 0===o&&(o=t.length);var a=i+Math.floor(Math.random()*o);return void 0===t[a]?null:t[a]},Be=[],Ne={},Ye=[],Ge=[],Xe=[],Ue=[],ze=function isEdgeBlocker(t,i){return!1===t||!0===t?t:!0===t[i]},Ve=[],We=function GetBoard(t){return t?t.rexChess?t.rexChess.board:t.mainBoard?t.mainBoard:void 0:void 0},He=(i={getChessData:Kt,getChessUID:Qt,setBoardWidth:function SetBoardWidth(t){if(this.infinityMode)return this;if(void 0===this.width||this.width<=t)return this.width=t,this;var i,o,a;for(i=t;i<this.width;i++)for(o=0;o<this.height;o++)for(a in this.boardData.getUID(i,o))this.RemoveChess(!1,i,o,a);return this.width=t,this},setBoardHeight:function SetBoardHeight(t){if(this.infinityMode)return this;if(void 0===this.height||this.height<=t)return this.height=t,this;var i,o,a;for(o=t;o<this.height;o++)for(i=0;i<this.width;i++)for(a in this.boardData.getUID(i,o))this.RemoveChess(!1,i,o,a);return this.height=t,this},tileXYZToKey:function TileXYZToKey(t,i,o,a){return void 0===a&&(a=","),"".concat(t).concat(a).concat(i).concat(a).concat(o)},tileXYToKey:$t,keyToTileXYZ:function KeyToTileXYZ(t,i,o){void 0===i?i={}:!0===i&&(i=te),void 0===o&&(o=",");var a=t.split(o);return i.x=a[0],i.y=a[1],i.z=a[2],i},tileXYToWorldX:function TileXYToWorldX(t,i){return this.tileXYToWorldXY(t,i,!0).x},tileXYToWorldY:function TileXYToWorldY(t,i){return this.tileXYToWorldXY(t,i,!0).y},tileXYToWorldXY:function TileXYToWorldXY(t,i,o){return this.grid.getWorldXY(t,i,o)},tileXYArrayToWorldXYArray:function TileXYArrayToWorldXYArray(t,i){var o;void 0===i&&(i=[]);for(var a=0,u=t.length;a<u;a++)o=t[a],i.push(this.tileXYToWorldXY(o.x,o.y));return i},worldXYToTileX:function WorldXYToTileX(t,i){return this.worldXYToTileXY(t,i,!0).x},worldXYToTileY:function WorldXYToTileY(t,i){return this.worldXYToTileXY(t,i,!0).y},worldXYToTileXY:function WorldXYToTileXY(t,i,o){return this.grid.getTileXY(t,i,o)},worldXYToChessArray:function WorldXYToChessArray(t,i,o){var a=this.worldXYToTileXY(t,i,!0);return this.tileXYToChessArray(a.x,a.y,o)},worldXYToChess:function WorldXYToChess(t,i,o){var a=this.worldXYToTileXY(t,i,!0);if(void 0!==o)return this.tileXYZToChess(a.x,a.y,o);var u=this.boardData.getUID(a.x,a.y);if(null==u)return null;for(var o in u)return this.uidToChess(u[o])},worldXYSnapToGrid:function WorldXYSnapToGrid(t,i,o){return void 0===o?o={}:!0===o&&(o=ee),this.worldXYToTileXY(t,i,o),this.tileXYToWorldXY(o.x,o.y,o),o},angleBetween:function AngleBetween$4(t,i){t=this.chessToTileXYZ(t),i=this.chessToTileXYZ(i);var o=this.tileXYToWorldXY(t.x,t.y,!0),a=o.x,u=o.y,d=(o=this.tileXYToWorldXY(i.x,i.y,!0)).x,b=o.y;return ie(a,u,d,b)},isAngleInCone:function IsAngleInCone(t,i,o,a){var u=this.chessToTileXYZ(t),d=this.chessToTileXYZ(i),b=this.angleBetween(u,d);b=ne(b);var S=Math.abs(b-o),C=a/2;return function Equal(t,i,o){return void 0===o&&(o=1e-4),Math.abs(t-i)<o}(S=Math.min(S,re-S),C)||S<C},angleToward:function AngleToward(t,i){void 0===t&&(t=se);var o=this.wrapMode,a=this.infinityMode;this.wrapMode=!1,this.infinityMode=!0;var u=this.getNeighborTileXY(t,i,!0);return this.wrapMode=o,this.infinityMode=a,this.angleBetween(t,u)},angleSnapToDirection:function AngleSnapToDirection(t,i){i=ae(i);for(var o,a,u=this.grid.allDirections,d=1/0,b=void 0,S=0,C=u.length;S<C;S++)o=ae(this.angleToward(t,u[S])),(a=Math.abs(he(i,o)))<d&&(d=a,b=S);return b},isOverlappingPoint:function IsOverlappingPoint(t,i,o){if(this.infinityMode&&void 0===o)return!0;var a=this.worldXYToTileXY(t,i,!0);return this.contains(a.x,a.y,o)},gridAlign:function GridAlign(t,i,o){if(void 0===t)for(var a=this.getAllChess(),u=0,d=a.length;u<d;u++)this.gridAlign(a[u]);else{if(Zt(t)&&(t=this.uidToChess(t)),void 0===i){var b=this.chessToTileXYZ(t);i=b.x,o=b.y}this.tileXYToWorldXY(i,o,t)}return this},getGridPoints:le,lineToTileXYArray:function LineToTileXYArray(t,i,o,a,u){if("number"!=typeof t){var d=t;u=i,t=d.x1,i=d.y1,o=d.x2,a=d.y2}void 0===u&&(u=[]);for(var b,S,C,M,P,R=function DistanceBetween$4(t,i,o,a){var u=t-o,d=i-a;return Math.sqrt(u*u+d*d)}(t,i,o,a),O=Math.min(this.grid.cellWidth,this.grid.cellHeight),B=Math.ceil(R/(O/4)),N=0;N<=B;N++)S=ue(t,o,b=N/B),C=ue(i,a,b),P=this.worldXYToTileXY(S,C),this.contains(P.x,P.y)&&(M&&ce(M,P)||(u.push(P),M=P));return u},circleToTileXYArray:function CircleToTileXYArray(t,i){return this.shapeToTileXYArray(t,de,i)},ellipseToTileXYArray:function EllipseToTileXYArray(t,i){return this.shapeToTileXYArray(t,fe,i)},polygonToTileXYArray:function PolygonToTileXYArray(t,i){return be=function GetAABB(t,i){void 0===i&&(i=new Ae);for(var o,a=1/0,u=1/0,d=-a,b=-u,S=0;S<t.points.length;S++)o=t.points[S],a=Math.min(a,o.x),u=Math.min(u,o.y),d=Math.max(d,o.x),b=Math.max(b,o.y);return i.x=a,i.y=u,i.width=d-a,i.height=b-u,i}(t,be),this.shapeToTileXYArray(t,pe,be,i)},rectangleToTileXYArray:function RectangleToTileXYArray(t,i){return this.shapeToTileXYArray(t,ge,i)},triangleToTileXYArray:function TriangleToTileXYArray(t,i){return this.shapeToTileXYArray(t,Ee,i)},shapeToTileXYArray:function ShapeToTileXYArray(t,i,o){void 0===o&&(o=[]),we=this.worldXYToTileXY(t.left,t.top,we),Se=this.worldXYToTileXY(t.right,t.bottom,Se);var a,u=we.x-1,d=we.y-1,b=Se.x+1,S=Se.y+1;this.infinityMode||(u=Me(u,0,this.width-1),d=Me(d,0,this.height-1),b=Me(b,0,this.width-1),S=Me(S,0,this.height-1));for(var C=u;C<=b;C++)for(var M=d;M<=S;M++)i(t,(a=this.tileXYToWorldXY(C,M,!0)).x,a.y)&&o.push({x:C,y:M});return o},uidToChess:function UidToChess(t){return null==t?null:this.boardData.exists(t)?Bt.get(t).parent:null},addChess:_e,removeChess:function RemoveChess$1(t,i,o,a,u,d){if(void 0===u&&(u=!1),void 0===d&&(d=!1),t){var b=this.chessToTileXYZ(t);if(!b)return this;i=b.x,o=b.y,a=b.z}else if(!(t=this.tileXYZToChess(i,o,a)))return this;return d||this.boardData.removeUID(i,o,a),this.isBoard&&this.getChessData(t).setBoard(null),u&&t.destroy&&t.destroy(),this},removeAllChess:function RemoveAllChess$1(t,i){for(var o=this.getAllChess(),a=0,u=o.length;a<u;a++)this.removeChess(o[a],void 0,void 0,void 0,t,i);return this},swapChess:function SwapChess(t,i,o){void 0===o&&(o=!0);var a=this.chessToTileXYZ(t),u=this.chessToTileXYZ(i);return null==a||null==u||(this.removeChess(t),this.removeChess(i),this.addChess(t,u.x,u.y,u.z,o),this.addChess(i,a.x,a.y,a.z,o)),this},moveChess:_e,setChessTileZ:function SetChessTileZ(t,i,o){void 0===o&&(o=!1);var a=this.chessToTileXYZ(t);return a&&this.moveChess(t,a.x,a.y,i,o),this},getAllChess:function GetAllChess(t){void 0===t&&(t=[]);var i=this.boardData.UIDToXYZ;for(var o in i)t.push(this.uidToChess(o));return t},contains:function Contains(t,i,o){var a;return(a=!!this.infinityMode||t>=0&&t<this.width&&i>=0&&i<this.height)&&void 0!==o&&(a=this.boardData.contains(t,i,o)),a},forEachTileXY:function ForEachTileXY(t,i,o){switch(void 0===o&&(o=0),o){case 0:for(var a=0;a<this.height;a++)for(var u=0;u<this.width&&(Pe.x=u,Pe.y=a,!(i?t.call(i,Pe,this):t(Pe,this)));u++);break;case 1:for(a=0;a<this.height;a++)for(u=this.width-1;u>=0&&(Pe.x=u,Pe.y=a,!(i?t.call(i,Pe,this):t(Pe,this)));u--);break;case 2:for(u=0;u<this.width;u++)for(a=0;a<this.height&&(Pe.x=u,Pe.y=a,!(i?t.call(i,Pe,this):t(Pe,this)));a++);break;case 3:for(u=0;u<this.width;u++)for(a=this.height-1;a>=0&&(Pe.x=u,Pe.y=a,!(i?t.call(i,Pe,this):t(Pe,this)));a--);}return this},getWrapTileXY:function GetWrapTileXY(t,i,o){return void 0===o?o={}:!0===o&&(o=ke),this.wrapMode?t=Re(t,0,this.width):!this.infinityMode&&(t<0||t>=this.width)&&(t=null),this.wrapMode?i=Re(i,0,this.height):!this.infinityMode&&(i<0||i>=this.height)&&(i=null),o.x=t,o.y=i,o},tileXYZToChess:function TileXYZToChess(t,i,o){var a=this.boardData.getUID(t,i,o);return this.uidToChess(a)},tileXYToChessArray:function TileXYToChessArray(t,i,o){void 0===o&&(o=[]);var a=this.boardData.getUID(t,i);if(null==a)return o;for(var u in a)o.push(this.uidToChess(a[u]));return o},tileZToChessArray:function TileZToChessArray(t,i){void 0===i&&(i=[]);var o=this.boardData.UIDToXYZ;for(var a in o)o[a].z===t&&i.push(this.uidToChess(a));return i},tileXYArrayToChessArray:function TileXYArrayToChessArray(t,i,o){Array.isArray(i)&&(o=i,i=void 0),void 0===o&&(o=[]);for(var a,u=null!=i,d=0,b=t.length;d<b;d++)a=t[d],u?o.push(this.tileXYZToChess(a.x,a.y,i)):this.tileXYToChessArray(a.x,a.y,o);return o},chessToTileXYZ:function ChessToTileXYZ(t){if(!t)return null;if(Zt(t)||function IsChess(t){return!Zt(t)&&t&&!!t.rexChess}(t)){var i=Qt(t);return this.boardData.getXYZ(i)}return function IsTileXYZ(t){return t&&(Wt(t)||t.isTileXYZ)}(t)?t:null},offset:function Offset$3(t,i,o,a){return void 0===a?a={}:!0===a&&(a=Oe),0===i&&0===o?(a.x=t.x,a.y=t.y):this.grid.offset(t,i,o,a),a},mirror:function Mirror$4(t,i,o,a){return void 0===a?a={}:!0===a&&(a=Le),void 0!==o?this.offset(t,-o.x,-o.y,a):(a.x=t.x,a.y=t.y),this.grid.mirror(a,i,a),void 0!==o&&this.offset(a,o.x,o.y,a),a},rotate:function Rotate$5(t,i,o,a){return void 0===a?a={}:!0===a&&(a=De),void 0!==o?this.offset(t,-o.x,-o.y,a):(a.x=t.x,a.y=t.y),this.grid.rotate(a,i,a),void 0!==o&&this.offset(a,o.x,o.y,a),a},getOppositeDirection:function GetOppositeDirection$2(t,i,o){if(t&&"number"!=typeof t){o=i;var a=t,u=this.chessToTileXYZ(a);t=u.x,i=u.y}return this.grid.getOppositeDirection(t,i,o)},getDistance:function GetDistance$2(t,i,o){return t=this.chessToTileXYZ(t),i=this.chessToTileXYZ(i),this.grid.getDistance(t,i,o)},directionBetween:function DirectionBetween$2(t,i,o){void 0===o&&(o=!0);var a=this.chessToTileXYZ(t),u=this.chessToTileXYZ(i);return this.grid.directionBetween(a,u,o)},isDirectionInCone:function IsDirectionInCone(t,i,o,a){var u=this.chessToTileXYZ(t),d=this.chessToTileXYZ(i),b=this.grid.directions;this.grid.setDirectionMode(this.sides);var S=this.grid.directionBetween(u,d,!1);this.grid.setDirectionMode(b);var C=Math.abs(S-o);return(C=Math.min(C,this.grid.directions-C))<=a/2},fit:function Fit(t){var i,o=1/0,a=1/0;for(var u in t)i=t[u],o=Math.min(o,i.x),a=Math.min(a,i.y);if(0!==o||0!==a)for(var u in t)i=t[u],this.offset(i,-o,-a,i);var d=-1/0,b=-1/0;for(var u in t)i=t[u],d=Math.max(d,i.x),b=Math.max(b,i.y);return this.setBoardWidth(d+1),this.setBoardHeight(b+1),t},getEmptyTileXYArray:function GetEmptyTileXYArray(t,i){void 0===i&&(i=[]),void 0===t&&(t=0);for(var o=0;o<this.height;o++)for(var a=0;a<this.width;a++)null===this.tileXYZToChess(a,o,t)&&i.push({x:a,y:o});return i},getRandomEmptyTileXY:function GetRandomEmptyTileXY(t,i){var o,a;void 0===t&&(t=0),void 0===i?i={}:!0===i&&(i=Ne);for(var u=!0,d=20;u&&d>0;)o=Ie(0,this.width-1),a=Ie(0,this.height-1),u=null!==this.tileXYZToChess(o,a,t),d--;if(u){if(0===(Be=this.getEmptyTileXYArray(t,Be)).length)return null;var b=Fe(Be);return i.x=b.x,i.y=b.y,Be.length=0,i}return i.x=o,i.y=a,i},getTileXYAtDirection:function GetTileXYAtDirection(t,i,o,a){var u=this.chessToTileXYZ(t);if(!u)return null;"string"==typeof i&&(i=-1===i.indexOf(",")?parseInt(i):i.split(","));var d,b="number"==typeof i,S="number"==typeof o;if(b&&S)a=this.grid.getTileXYAtDirection(u.x,u.y,i,o,a),this.getWrapTileXY(a.x,a.y,a),null!=a.x&&null!=a.y||(a=null);else if(void 0===a&&(a=[]),null==i&&(i=this.grid.allDirections),b)if(Wt(o)){var C=It(o,"end",1),M=It(o,"start",C>0?1:-1),P=It(o,"step",C>=M?1:-1);if(M===C)null!==(d=this.getTileXYAtDirection(u,i,C))&&a.push(d);else if(M<C)for(var R=M;R<=C;R+=P)null!==(d=this.getTileXYAtDirection(u,i,R))&&a.push(d);else for(R=M;R>=C;R+=P)null!==(d=this.getTileXYAtDirection(u,i,R))&&a.push(d)}else{R=0;for(var O=o.length;R<O;R++)null!==(d=this.getTileXYAtDirection(u,i,o[R]))&&a.push(d)}else for(R=0,O=i.length;R<O;R++)S?null!==(d=this.getTileXYAtDirection(u,i[R],o))&&a.push(d):this.getTileXYAtDirection(u,i[R],o,a);return a},getNeighborTileXY:function GetNeighborTileXY$2(t,i,o){return this.getTileXYAtDirection(t,i,1,o)},getNeighborTileXYAtAngle:function GetNeighborTileXYAtAngle(t,i,o){var a=this.angleSnapToDirection(t,i);return this.getTileXYAtDirection(t,a,1,o)},getNeighborChess:function GetNeighborChess(t,i,o,a){if(null===(t=this.chessToTileXYZ(t)))return null;null==o&&(o=t.z);var u,d=_typeof(i);if("number"===d||"string"===d&&-1===i.indexOf(",")){var b=i,S=this.getNeighborTileXY(t,b,!0);return null===S?null:this.tileXYZToChess(S.x,S.y,o)}void 0===a&&(a=[]),this.getNeighborTileXY(t,i,Ye);for(var C=0,M=Ye.length;C<M;C++)null!=(u=this.tileXYZToChess(Ye[C].x,Ye[C].y,o))&&a.push(u);return Ye.length=0,a},getNeighborTileDirection:function GetNeighborTileDirection$2(t,i){if(null===t||null===i)return null;if(t=this.chessToTileXYZ(t),i=this.chessToTileXYZ(i),ce(t,i))return null;var o=this.grid.getNeighborTileDirection(t,i);if(this.wrapMode&&null===o){for(var a=0,u=(Ge=this.getNeighborTileXY(t,null,Ge)).length;a<u;a++)if(ce(i,Ge[a])){o=a;break}Ge.length=0}return o},getNeighborChessDirection:function GetNeighborChessDirection(t,i){var o=this.chessToTileXYZ(t),a=this.chessToTileXYZ(i);return this.getNeighborTileDirection(o,a)},areNeighbors:function AreNeighbors(t,i){return null!==this.getNeighborChessDirection(t,i)},ringToTileXYArray:function RingToTileXYArray$2(t,i,o){var a;void 0===o&&(o=[]),t=this.chessToTileXYZ(t),this.grid.ringToTileXYArray(t,i,Xe);for(var u=0,d=Xe.length;u<d;u++)a=Xe[u],this.contains(a.x,a.y)&&o.push(a);return Xe.length=0,o},filledRingToTileXYArray:function FilledRingToTileXYArray(t,i,a,u){var d;o(a)&&(u=a,a=void 0),void 0===a&&(a=!0),void 0===u&&(u=[]),t=this.chessToTileXYZ(t);for(var b=0;b<=i;b++)d=a?b:i-b,this.ringToTileXYArray(t,d,u);return u},hasBlocker:function HasBlocker(t,i,o){if(t&&"number"!=typeof t){var a=this.chessToTileXYZ(t);t=a.x,i=a.y,o=a.z}var u;if(void 0===o){for(var d=0,b=(u=this.tileXYToChessArray(t,i,Ue)).length;d<b;d++)if(!0===this.getChessData(u[d]).blocker)return Ue.length=0,!0;return Ue.length=0,!1}return null!==(u=this.tileXYZToChess(t,i,o))&&!0===this.getChessData(u).blocker},hasEdgeBlocker:function HasEdgeBlocker(t,i,o,a){var u;if(void 0===o){for(var d=0,b=(u=this.tileXYToChessArray(t,i,Ve)).length;d<b;d++)if(ze(this.getChessData(u[d]).blocker))return Ve.length=0,!0;return Ve.length=0,!1}return null!==(u=this.tileXYZToChess(t,i,o))&&ze(this.getChessData(u).blocker)}},_defineProperty(i,"getGridPoints",le),_defineProperty(i,"chessToBoard",We),i),je=function Clear(t){if("object"!==_typeof(t)||null===t)return t;if(Array.isArray(t))t.length=0;else for(var i in t)delete t[i];return t},qe=function IsEmpty(t){for(var i in t)return!1;return!0},Ze=function(){function BoardData(){_classCallCheck(this,BoardData),this.XYZToUID={},this.UIDToXYZ={},this.clear()}return _createClass(BoardData,[{key:"shutdown",value:function shutdown(t){return this.XYZToUID=void 0,this.UIDToXYZ=void 0,this}},{key:"destroy",value:function destroy(t){return this.shutdown(t),this}},{key:"clear",value:function clear(){return je(this.UIDToXYZ),je(this.XYZToUID),this.chessCount=0,this.clearBounds(),this}},{key:"clearBounds",value:function clearBounds(){return this._xMax=void 0,this._xMin=void 0,this._yMax=void 0,this._yMin=void 0,this}},{key:"addUID",value:function addUID(t,i,o,a){this.XYZToUID.hasOwnProperty(i)||(this.XYZToUID[i]={});var u=this.XYZToUID[i];return u.hasOwnProperty(o)||(u[o]={}),u[o][a]=t,this.UIDToXYZ[t]={x:i,y:o,z:a},this.chessCount++,this.clearBounds(),this}},{key:"getUID",value:function getUID(t,i,o){var a=this.XYZToUID[t];return a&&(a=a[i])&&void 0!==o&&(a=a[o]),a}},{key:"removeUID",value:function removeUID(t,i,o){if(!this.XYZToUID.hasOwnProperty(t))return this;var a=this.XYZToUID[t];if(!a.hasOwnProperty(i))return this;var u=a[i];if(!u.hasOwnProperty(o))return this;var d=u[o];return delete u[o],delete this.UIDToXYZ[d],qe(u)&&delete a[i],qe(a)&&delete this.XYZToUID[t],this.chessCount--,this.clearBounds(),this}},{key:"exists",value:function exists(t){return this.UIDToXYZ.hasOwnProperty(t)}},{key:"contains",value:function contains(t,i,o){return null!=this.getUID(t,i,o)}},{key:"getXYZ",value:function getXYZ(t){return this.exists(t)?this.UIDToXYZ[t]:null}},{key:"xMax",get:function get(){if(void 0===this._xMax){this._xMax=-1/0;var t,i=this.UIDToXYZ;for(var o in i)t=i[o].x,this._xMax<t&&(this._xMax=t)}return this._xMax}},{key:"xMin",get:function get(){if(void 0===this._xMin){this._xMin=1/0;var t,i=this.UIDToXYZ;for(var o in i)t=i[o].x,this._xMin>t&&(this._xMin=t)}return this._xMin}},{key:"yMax",get:function get(){if(void 0===this._yMax){this._yMax=-1/0;var t,i=this.UIDToXYZ;for(var o in i)t=i[o].y,this._yMax<t&&(this._yMax=t)}return this._yMax}},{key:"yMin",get:function get(){if(void 0===this._yMin){this._yMin=1/0;var t,i=this.UIDToXYZ;for(var o in i)t=i[o].y,this._yMin>t&&(this._yMin=t)}return this._yMin}}]),BoardData}(),Ke={},Je={},Qe=function(){function Quad(t){_classCallCheck(this,Quad),this.resetFromJSON(t)}return _createClass(Quad,[{key:"resetFromJSON",value:function resetFromJSON(t){this.setType(It(t,"type",0)),this.setDirectionMode(It(t,"dir",4)),this.setOriginPosition(It(t,"x",0),It(t,"y",0)),this.setCellSize(It(t,"cellWidth",0),It(t,"cellHeight",0))}},{key:"setType",value:function setType(t){return"string"==typeof t&&(t=ti[t]),this.mode=t,this}},{key:"setDirectionMode",value:function setDirectionMode(t){return"string"==typeof t&&(t=ei[t]),this.directions=t,this}},{key:"setOriginPosition",value:function setOriginPosition(t,i){return this.x=t,this.y=i,this}},{key:"width",get:function get(){return this._width},set:function set(t){this._width=t,this._halfWidth=t/2}},{key:"height",get:function get(){return this._height},set:function set(t){this._height=t,this._halfHeight=t/2}},{key:"setCellSize",value:function setCellSize(t,i){return this.width=t,this.height=i,this}},{key:"cellWidth",get:function get(){return this.width},set:function set(t){this.width=t}},{key:"cellHeight",get:function get(){return this.height},set:function set(t){this.height=t}}]),Quad}(),$e={getWorldXY:function GetWorldX$2(t,i,o){var a,u;switch(void 0===o?o={}:!0===o&&(o=Ke),this.mode){case 0:a=t*this.width,u=i*this.height;break;case 1:a=(t-i)*this._halfWidth,u=(t+i)*this._halfHeight}return a+=this.x,u+=this.y,o.x=a,o.y=u,o},getWorldX:function GetWorldX$1(t,i){return this.getWorldXY(t,i,!0).x},getWorldY:function GetWorldY$1(t,i){return this.getWorldXY(t,i,!0).y},getTileXY:function GetTileXY$1(t,i,o){void 0===o?o={}:!0===o&&(o=Je),t-=this.x,i-=this.y;var a=t/this.width,u=i/this.height;switch(this.mode){case 0:o.x=Math.round(a),o.y=Math.round(u);break;case 1:o.x=Math.round(+a+u),o.y=Math.round(-a+u)}return o},getTileX:function GetTileX$1(t,i){return this.getTileXY(t,i,!0).x},getTileY:function GetTileY$1(t,i){return this.getTileXY(t,i,!0).y}};Object.assign(Qe.prototype,$e);var ti={orthogonal:0,isometric:1,staggered:2},ei={"4dir":4,"8dir":8},ii=function SaveOrigin(){return this._savedOriginX=this.x,this._savedOriginY=this.y,this},ni=function RestoreOrigin(){return this.x=this._savedOriginX,this.y=this._savedOriginY,this},ri=[[1,0],[0,1],[-1,0],[0,-1],[1,1],[-1,1],[-1,-1],[1,-1]],si=ri,oi=function GetTileXAtDirection$1(t,i,o,a,u){var d,b;switch(void 0===u?u={}:!0===u&&(u=ai),this.mode){case 0:d=ri[o][0],b=ri[o][1];break;case 1:d=si[o][0],b=si[o][1]}return 1===a?(u.x=t+d,u.y=i+b):(u.x=t+a*d,u.y=i+a*b),u},ai={},hi=function ReverseDirMap$1(t){var i,o,a,u={};for(var d in t)o=(i=t[d])[0],a=i[1],u.hasOwnProperty(o)||(u[o]={}),u[o][a]=parseInt(d);return u}(ri),li=hi,ui={0:2,1:3,2:0,3:1,4:6,5:7,6:4,7:5},ci=function Offset$2(t,i,o,a){void 0===a?a={}:!0===a&&(a=di);var u=t.x+i,d=t.y+o;return a.x=u,a.y=d,a},di={},fi={},pi={},gi=function DirectionNormalize(t){return Re(t,0,this.directions)},vi=function InitPoints(t){for(var i=[],o=0;o<t;o++)i.push({x:0,y:0});return i},mi={},yi=vi(4),xi=function(t){_inherits(QuadGrid,t);var i=_createSuper(QuadGrid);function QuadGrid(t){var o;return _classCallCheck(this,QuadGrid),(o=i.call(this,t)).sides=4,o}return _createClass(QuadGrid,[{key:"allDirections",get:function get(){return 4===this.directions?Ti:bi}},{key:"halfDirections",get:function get(){return 4===this.directions?wi:Si}}]),QuadGrid}(Qe),Ti=[0,1,2,3],bi=[0,1,2,3,4,5,6,7],wi=[0,1],Si=[0,1,4,5],Ci={saveOrigin:ii,restoreOrigin:ni,getTileXYAtDirection:oi,getNeighborTileXY:function GetNeighborTileXY$1(t,i,o,a){return oi.call(this,t,i,o,1,a)},getNeighborTileDirection:function GetNeighborTileDirection$1(t,i){var o;switch(this.mode){case 0:o=hi;break;case 1:o=li}var a=i.x-t.x,u=i.y-t.y;if(o.hasOwnProperty(a)){var d=o[a];if(d.hasOwnProperty(u))return d[u]}return null},getOppositeDirection:function GetOppositeDirection$1(t,i,o){return ui[o]},offset:ci,mirror:function Mirror$3(t,i,o){return void 0===o?o={}:!0===o&&(o=fi),o.x=1&i?-t.x:t.x,o.y=2&i?-t.y:t.y,o},rotate:function Rotate$4(t,i,o){var a,u;switch(void 0===o?o={}:!0===o&&(o=pi),i=Re(i,0,3)){case 1:a=-t.y,u=t.x;break;case 2:a=-t.x,u=-t.y;break;case 3:a=t.y,u=-t.x;break;default:a=t.x,u=t.y}return o.x=a,o.y=u,o},getDistance:function GetDistance$1(t,i,o){var a=i.x-t.x,u=i.y-t.y;return o?Math.abs(a)+Math.abs(u):Math.sqrt(a*a+u*u)},directionBetween:function DirectionBetween$1(t,i,o){var a;switch(void 0===o&&(o=!0),this.mode){case 0:case 1:if(t.y===i.y)a=i.x>=t.x?0:2;else if(t.x===i.x)a=i.y>=t.y?1:3;else if(4===this.directions){(b=ae(ie(t.x,t.y,i.x,i.y)))<0&&(b+=360),a=b/90,o&&(a=Math.round(a))}else{var u=i.x-t.x,d=i.y-t.y;if(u===d)a=u>0?4:6;else if(u===-d)a=u>0?7:5;else{var b;(b=ae(Math.atan2(d,u)))<0&&(b+=360);var S=b/45;o&&(S=Math.round(S)),a=S>=0&&S<1?S:S>=1&&S<2?S+3:S>=2&&S<3?S-1:S>=3&&S<4?S+2:S>=4&&S<5?S-2:S>=5&&S<6?S+1:S>=6&&S<7?S-3:S}}}return a===this.directions&&(a=0),a},directionNormalize:gi,getGridPoints:function GetGridPoints$1(t,i,o){void 0===o?o=vi(4):!0===o&&(o=yi),void 0===t?(mi.x=0,mi.y=0):this.getWorldXY(t,i,mi);var a=0===this.mode?0:1;return function SetPoints$1(t,i,o,a,u,d){void 0===d&&(d=vi(4));var b=o/2,S=a/2;0===u?(d[0].x=t+b,d[0].y=i-S,d[1].x=t+b,d[1].y=i+S,d[2].x=t-b,d[2].y=i+S,d[3].x=t-b,d[3].y=i-S):(d[0].x=t+b,d[0].y=i,d[1].x=t,d[1].y=i+S,d[2].x=t-b,d[2].y=i,d[3].x=t,d[3].y=i-S)}(mi.x,mi.y,this.width,this.height,a,o),o},ringToTileXYArray:function RingToTileXYArray$1(t,i,o){var a,u;for(void 0===o&&(o=[]),a=i,u=-i;u<=i;u++)o.push(ci(t,a,u));for(u=i,a=i-1;a>=-i;a--)o.push(ci(t,a,u));for(a=-i,u=i-1;u>=-i;u--)o.push(ci(t,a,u));for(u=-i,a=1-i;a<=i-1;a++)o.push(ci(t,a,u));return o}};Object.assign(xi.prototype,Ci);var Ai=Math.sqrt(3),Ei=Math.sqrt(3),Mi=0,_i=1,Pi=2,Ri=3,ki=Mi,Oi=_i,Li=Pi,Di=Ri,Ii={},Fi=Mi,Bi=_i,Ni=Pi,Yi=Ri,Gi=function cr2cube(t,i,o,a){switch(void 0===a?a={}:!0===a&&(a=Ui),t){case Fi:a.x=i-(o-(1&o))/2,a.z=o;break;case Bi:a.x=i-(o+(1&o))/2,a.z=o;break;case Ni:a.x=i,a.z=o-(i-(1&i))/2;break;case Yi:a.x=i,a.z=o-(i+(1&i))/2}return a.y=-a.x-a.z,a},Xi=function cube2cr(t,i,o,a,u){switch(void 0===u?u={}:!0===u&&(u=zi),t){case Fi:u.x=i+(a-(1&a))/2,u.y=a;break;case Bi:u.x=i+(a+(1&a))/2,u.y=a;break;case Ni:u.x=i,u.y=a+(i-(1&i))/2;break;case Yi:u.x=i,u.y=a+(i+(1&i))/2}return u},Ui={},zi={},Vi=Mi,Wi=_i,Hi=Pi,ji=Ri,qi=4/3,Zi=2/3,Ki={},Ji={},Qi=Mi,$i=_i,tn=Pi,en=Ri,nn=function(){function Hexagon(t){_classCallCheck(this,Hexagon),this.resetFromJSON(t)}return _createClass(Hexagon,[{key:"resetFromJSON",value:function resetFromJSON(t){this.setType(It(t,"staggeraxis",1),It(t,"staggerindex",1)),this.setDirectionMode(),this.setOriginPosition(It(t,"x",0),It(t,"y",0));var i=It(t,"size",void 0);void 0!==i?this.setCellRadius(i):this.setCellSize(It(t,"cellWidth",0),It(t,"cellHeight",0))}},{key:"setType",value:function setType(t,i){return"string"==typeof t&&(t=sn[t]),"string"==typeof i&&(i=an[i]),this.staggeraxis=t,this.staggerindex=i,this.mode=0===t?0===i?en:tn:0===i?$i:Qi,this}},{key:"setDirectionMode",value:function setDirectionMode(){return this.directions=6,this}},{key:"setOriginPosition",value:function setOriginPosition(t,i){return this.x=t,this.y=i,this}},{key:"width",get:function get(){return this._width},set:function set(t){this._width=t,this._halfWidth=t/2}},{key:"height",get:function get(){return this._height},set:function set(t){this._height=t,this._halfHeight=t/2}},{key:"setCellSize",value:function setCellSize(t,i){return this.width=t,this.height=i,this}},{key:"setCellRadius",value:function setCellRadius(t){this.size=t;var i={size:this.size,type:this.staggeraxis},o=function Width(t){return 0===t.type?2*t.size:Ai*t.size}(i),a=function Height(t){return 0===t.type?Ei*t.size:2*t.size}(i);return this.setCellSize(o,a),this}},{key:"cellWidth",get:function get(){return this.width},set:function set(t){this.width=t}},{key:"cellHeight",get:function get(){return this.height},set:function set(t){this.height=t}}]),Hexagon}(),rn={getWorldXY:function GetWorldXY(t,i,o){void 0===o?o={}:!0===o&&(o=Ii);var a=t*this.width,u=i*this.height;switch(this.mode){case ki:1&i&&(a+=this._halfWidth),u*=.75;break;case Oi:1&i&&(a-=this._halfWidth),u*=.75;break;case Li:a*=.75,1&t&&(u+=this._halfHeight);break;case Di:a*=.75,1&t&&(u-=this._halfHeight)}return a+=this.x,u+=this.y,o.x=a,o.y=u,o},getWorldX:function GetWorldX(t,i){return this.getWorldXY(t,i,!0).x},getWorldY:function GetWorldY(t,i){return this.getWorldXY(t,i,!0).y},getTileXY:function GetTileXY(t,i,o){var a,u;switch(void 0===o?o={}:!0===o&&(o=Ji),t-=this.x,i-=this.y,this.mode){case Vi:case Wi:u=i*qi/this.height,a=t/this.width-Zi*(i/this.height);break;case Hi:case ji:u=i/this.height-Zi*(t/this.width),a=t*qi/this.width}var d=function qr2cube(t,i,o){return void 0===o?o={}:!0===o&&(o=Ui),o.x=t,o.y=-t-i,o.z=i,o}(a,u,Ki);return function roundcube(t,i,o,a){"number"!=typeof t&&(t=(a=t).x,i=a.y,o=a.z),void 0===a?a={}:!0===a&&(a=Ui);var u=Math.round(t),d=Math.round(i),b=Math.round(o),S=Math.abs(u-t),C=Math.abs(d-i),M=Math.abs(b-o);S>C&&S>M?u=-d-b:C>M?d=-u-b:b=-u-d,a.x=u,a.y=d,a.z=b}(d),Xi(this.mode,d.x,d.y,d.z,o),o},getTileX:function GetTileX(t,i){return this.getTileXY(t,i,!0).x},getTileY:function GetTileY(t,i){return this.getTileXY(t,i,!0).y}};Object.assign(nn.prototype,rn);var sn={y:0,x:1},an={even:0,odd:1},hn=[[[[1,0],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1]],[[1,0],[1,1],[0,1],[-1,0],[0,-1],[1,-1]]],[[[1,0],[1,1],[0,1],[-1,0],[0,-1],[1,-1]],[[1,0],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1]]],[[[1,0],[0,1],[-1,0],[-1,-1],[0,-1],[1,-1]],[[1,1],[0,1],[-1,1],[-1,0],[0,-1],[1,0]]],[[[1,1],[0,1],[-1,1],[-1,0],[0,-1],[1,0]],[[1,0],[0,1],[-1,0],[-1,-1],[0,-1],[1,-1]]]],ln=Mi,un=_i,cn=Pi,dn=Ri,fn=function GetParity(t,i,o){var a;switch(t){case ln:case un:a=1&o;break;case cn:case dn:a=1&i}return a},pn=function GetTileXAtDirection(t,i,o,a,u){if(void 0===u?u={}:!0===u&&(u=gn),1===a){var d=fn(this.mode,t,i);u.x=t+hn[this.mode][d][o][0],u.y=i+hn[this.mode][d][o][1]}else if(0===a)u.x=t,u.y=i;else{var b,S,C=Gi(this.mode,t,i,!0);switch(o){case 1:b=C.x,C.y-a,S=C.z+a;break;case 2:b=C.x-a,C.y,S=C.z+a;break;case 3:b=C.x-a,C.y+a,S=C.z;break;case 4:b=C.x,C.y+a,S=C.z-a;break;case 5:b=C.x+a,C.y,S=C.z-a;break;default:b=C.x+a,C.y-a,S=C.z}Xi(this.mode,b,0,S,u)}return u},gn={},vn=function ReverseDirMap(t){var i,o,a,u={};for(var d in t)o=(i=t[d])[0],a=i[1],u.hasOwnProperty(o)||(u[o]={}),u[o][a]=parseInt(d);return u},mn=[[vn(hn[0][0]),vn(hn[0][1])],[vn(hn[1][0]),vn(hn[1][1])],[vn(hn[2][0]),vn(hn[2][1])],[vn(hn[3][0]),vn(hn[3][1])]],yn=Mi,xn=_i,Tn=Pi,bn=Ri,wn={},Sn=Mi,Cn=_i,An={},En={},Mn={},_n={},Pn={},Rn={},kn=Math.PI/180,On=function DegToRad$3(t){return t*kn},Ln=vi(6),Dn={},Fn={},Bn=function(t){_inherits(HexagonGrid,t);var i=_createSuper(HexagonGrid);function HexagonGrid(t){var o;return _classCallCheck(this,HexagonGrid),(o=i.call(this,t)).sides=6,o}return _createClass(HexagonGrid,[{key:"allDirections",get:function get(){return Nn}},{key:"halfDirections",get:function get(){return Yn}}]),HexagonGrid}(nn),Nn=[0,1,2,3,4,5],Yn=[0,1,2],Gn={saveOrigin:ii,restoreOrigin:ni,getTileXYAtDirection:pn,getNeighborTileXY:function GetNeighborTileXY(t,i,o,a){return pn.call(this,t,i,o,1,a)},getNeighborTileDirection:function GetNeighborTileDirection(t,i){var o=fn(this.mode,t.x,t.y),a=mn[this.mode][o],u=i.x-t.x,d=i.y-t.y;if(a.hasOwnProperty(u)){var b=a[u];if(b.hasOwnProperty(d))return b[d]}return null},getOppositeDirection:function GetOppositeDirection(t,i,o){return(o+3)%6},offset:function Offset$1(t,i,o,a){void 0===a?a={}:!0===a&&(a=wn);var u=t.x+i,d=t.y+o;switch(this.mode){case yn:0!=(1&o)&&0==(1&d)&&(u+=1);break;case xn:0!=(1&o)&&0==(1&d)&&(u-=1);break;case Tn:0!=(1&i)&&0==(1&u)&&(d+=1);break;case bn:0!=(1&i)&&0==(1&u)&&(d-=1)}return a.x=u,a.y=d,a},mirror:function Mirror$2(t,i,o){void 0===o?o={}:!0===o&&(o=An);var a,u,d,b=Gi(this.mode,t.x,t.y,!0),S=this.mode===Sn||this.mode===Cn;return 1&i&&(S?(a=b.y,u=b.x,d=b.z):(a=-b.x,u=-b.z,d=-b.y),b.x=a,b.y=u,b.z=d),2&i&&(S?(a=-b.y,u=-b.x,d=-b.z):(a=b.x,u=b.z,d=b.y)),Xi(this.mode,a,0,d,o),o},rotate:function Rotate$3(t,i,o){void 0===o?o={}:!0===o&&(o=En),i=Re(i,0,5);var a,u,d=Gi(this.mode,t.x,t.y,!0);switch(i){case 1:a=-d.z,-d.x,u=-d.y;break;case 2:a=d.y,d.z,u=d.x;break;case 3:a=-d.x,-d.y,u=-d.z;break;case 4:a=d.z,d.x,u=d.y;break;case 5:a=-d.y,-d.z,u=-d.x;break;default:a=d.x,d.y,u=d.z}return Xi(this.mode,a,0,u,o),o},getDistance:function GetDistance(t,i,o){Gi(this.mode,t.x,t.y,Mn),Gi(this.mode,i.x,i.y,_n);var a=_n.x-Mn.x,u=_n.y-Mn.y,d=_n.z-Mn.z;return(Math.abs(a)+Math.abs(u)+Math.abs(d))/2},directionBetween:function DirectionBetween(t,i,o){var a;void 0===o&&(o=!0),Gi(this.mode,t.x,t.y,Pn),Gi(this.mode,i.x,i.y,Rn);var u=Rn.x-Pn.x,d=Rn.y-Pn.y,b=Rn.z-Pn.z;return a=0===b?u>0?0:3:0===u?b>0?1:4:0===d?b>0?2:5:u>0&&d<0&&b>0?0+b/-d:u<0&&d<0&&b>0?1+-d/b:u<0&&d>0&&b>0?2+d/-u:u<0&&d>0&&b<0?3+-b/d:u>0&&d>0&&b<0?4+u/-b:5+-d/u,o&&(a=Math.round(a)),a},directionNormalize:gi,getGridPoints:function GetGridPoints(t,i,o){var a;return void 0===o?o=vi(6):!0===o&&(o=Ln),void 0===t?(Dn.x=0,Dn.y=0):this.getWorldXY(t,i,Dn),void 0!==this.size?a=this.size:((a=Fn).width=this.width,a.height=this.height),function SetPoints(t,i,o,a,u){if(void 0===u&&(u=vi(6)),void 0===o);else if("number"==typeof o)for(var d,b=0===a?0:-30,S=0;S<6;S++)d=On(60*S+b),u[S].x=t+o*Math.cos(d),u[S].y=i+o*Math.sin(d);else{var C=o,M=C.width,P=C.height,R=M/2,O=M/4,B=P/2,N=P/4;0===a?(u[0].x=t+R,u[0].y=i,u[1].x=t+O,u[1].y=i+B,u[2].x=t-O,u[2].y=i+B,u[3].x=t-R,u[3].y=i,u[4].x=t-O,u[4].y=i-B,u[5].x=t+O,u[5].y=i-B):(u[0].x=t+R,u[0].y=i-N,u[1].x=t+R,u[1].y=i+N,u[2].x=t,u[2].y=i+B,u[3].x=t-R,u[3].y=i+N,u[4].x=t-R,u[4].y=i-N,u[5].x=t,u[5].y=i-B)}}(Dn.x,Dn.y,a,this.staggeraxis,o),o},ringToTileXYArray:function RingToTileXYArray(t,i,o){void 0===o&&(o=[]);var a,u,d,b=Gi(this.mode,t.x,t.y,!0),S=b.x,C=(b.y,b.z);for(d=i,a=0;a>=-i;a--)u=-a-d,o.push(Xi(this.mode,S+a,0,C+d));for(a=-i,u=1;u<=i;u++)d=-a-u,o.push(Xi(this.mode,S+a,0,C+d));for(u=i,d=-1;d>=-i;d--)a=-u-d,o.push(Xi(this.mode,S+a,0,C+d));for(d=-i,a=1;a<=i;a++)u=-a-d,o.push(Xi(this.mode,S+a,0,C+d));for(a=i,u=-1;u>=-i;u--)d=-a-u,o.push(Xi(this.mode,S+a,0,C+d));for(u=-i,d=1;d<=i-1;d++)a=-u-d,o.push(Xi(this.mode,S+a,0,C+d));return o}};Object.assign(Bn.prototype,Gn);var Xn={quadGrid:xi,hexagonGrid:Bn},Un=function(t){_inherits(Board$1,t);var i=_createSuper(Board$1);function Board$1(t,o){var a;return _classCallCheck(this,Board$1),(a=i.call(this)).isShutdown=!1,a.scene=t,a.boardData=new Ze,a.resetFromJSON(o),a.boot(),a}return _createClass(Board$1,[{key:"resetFromJSON",value:function resetFromJSON(t){return this.isBoard=It(t,"isBoard",!0),this.setGrid(It(t,"grid",void 0)),this.setWrapMode(It(t,"wrap",!1)),this.setInfinityMode(It(t,"infinity",!1)),this.setBoardWidth(It(t,"width",0)),this.setBoardHeight(It(t,"height",0)),this}},{key:"boot",value:function boot(){this.scene&&this.isBoard&&this.scene.sys.events.once("shutdown",this.destroy,this)}},{key:"shutdown",value:function shutdown(t){if(!this.isShutdown)return this.scene&&this.isBoard&&this.scene.sys.events.off("shutdown",this.destroy,this),this.isBoard&&this.removeAllChess(!t,!0),_get(_getPrototypeOf(Board$1.prototype),"shutdown",this).call(this),this.boardData.shutdown(t),this.scene=void 0,this.boardData=void 0,this.isShutdown=!0,this}},{key:"destroy",value:function destroy(t){this.isShutdown||(this.emit("destroy",this,t),this.shutdown(t))}},{key:"setGrid",value:function setGrid(t){if(Wt(t)){var i=t,o=It(i,"gridType","quadGrid");t=new Xn[o](i)}return this.grid=t,this}},{key:"setWrapMode",value:function setWrapMode(t){return void 0===t&&(t=!0),this.wrapMode=t,this}},{key:"setInfinityMode",value:function setInfinityMode(t){return void 0===t&&(t=!0),this.infinityMode=t,this}},{key:"setBoardSize",value:function setBoardSize(t,i){return this.setBoardWidth(t),this.setBoardHeight(i),this}},{key:"exists",value:function exists(t){return this.boardData.exists(this.getChessUID(t))}},{key:"chessCount",get:function get(){return this.boardData.chessCount}},{key:"clear",value:function clear(t){return void 0===t&&(t=!0),this.removeAllChess(t,!0),this.boardData.clear(),this}}],[{key:"GetBoard",value:function GetBoard(t){return We(t)}}]),Board$1}(Dt);Object.assign(Un.prototype,He);var zn=function(t){_inherits(TouchZone,t);var i=_createSuper(TouchZone);function TouchZone(t){var o;return _classCallCheck(this,TouchZone),o=i.call(this,t,0,0,1,1),t.add.existing(_assertThisInitialized(o)),o.setScrollFactor(0),o.setInteractive({hitArea:{},hitAreaCallback:function hitAreaCallback(){return!0}}),o}return _createClass(TouchZone)}(Phaser.GameObjects.Zone),Vn=Phaser.GameObjects.GameObject.RENDER_MASK,Wn=function InputCandidate(t){if(t.renderFlags!==Vn)return!1;var i=!0,o=t.parentContainer;if(o)do{if(o.renderFlags!==Vn){i=!1;break}o=o.parentContainer}while(o);return i},Hn=function EmitChessEvent(t,i,o,a,u,d){if(null!=a&&null!=u){for(var b,S="string"!=typeof t?t:void 0,C="string"!=typeof i?i:void 0,M=o.tileXYToChessArray(a,u,jn),P=0,R=M.length;P<R;P++)b=M[P],Wn(b)&&(b.emit&&(C?C(b):b.emit(i,d)),S?S(b):o.emit(t,d,b));jn.length=0}},jn=[],qn=function OnPointerDown$1(t){if(this.enable&&t.isDown){var i=this.board;null===this.pointer&&(this.pointer=t);var o=i.worldXYToTileXY(t.worldX,t.worldY,!0),a=o.x,u=o.y;if(this.prevTilePosition.x=this.tilePosition.x,this.prevTilePosition.y=this.tilePosition.y,this.tilePosition.x=a,this.tilePosition.y=u,i.contains(a,u)){i.emit("tiledown",t,this.tilePosition),i.emit("tileover",t,this.tilePosition);Hn((function boardEventCallback(o){i.emit("gameobjectdown",t,o),i.emit("gameobjectover",t,o)}),(function chessEventCallback(i){i.emit("board.pointerdown",t),i.emit("board.pointerover",t)}),i,a,u,t)}}},Zn=function OnPointerUp$1(t){if(this.enable){var i=this.board,o=i.worldXYToTileXY(t.worldX,t.worldY,!0),a=o.x,u=o.y;if(this.prevTilePosition.x=this.tilePosition.x,this.prevTilePosition.y=this.tilePosition.y,this.tilePosition.x=a,this.tilePosition.y=u,i.contains(a,u)){i.emit("tileup",t,this.tilePosition),i.emit("tileout",t,this.prevTilePosition);Hn((function boardEventCallback(o){i.emit("gameobjectup",t,o),i.emit("gameobjectout",t,o)}),(function chessEventCallback(i){i.emit("board.pointerup",t),i.emit("board.pointerout",t)}),i,a,u,t),this.pointer===t&&(this.pointer=null)}}},Kn=function OnPointerMove$1(t){if(this.enable){var i=this.board,o=i.worldXYToTileXY(t.worldX,t.worldY,!0);if(!ce(this.tilePosition,o)){this.prevTilePosition.x=this.tilePosition.x,this.prevTilePosition.y=this.tilePosition.y,null!=this.prevTilePosition.x&&null!=this.prevTilePosition.y&&i.emit("tileout",t,this.prevTilePosition);var a=o.x,u=o.y;if(this.tilePosition.x=a,this.tilePosition.y=u,i.contains(a,u)){null===this.pointer&&(this.pointer=t),i.emit("tilemove",t,this.tilePosition),i.emit("tileover",t,this.tilePosition),Hn("gameobjectout","board.pointerout",i,this.prevTilePosition.x,this.prevTilePosition.y,t);Hn((function boardEventCallback(o){i.emit("gameobjectmove",t,o),i.emit("gameobjectover",t,o)}),(function chessEventCallback(i){i.emit("board.pointermove",t),i.emit("board.pointerover",t)}),i,a,u,t)}else this.pointer===t&&(this.pointer=null)}}},Jn=Phaser.Utils.Objects.GetValue,Qn=function(t){_inherits(TickTask,t);var i=_createSuper(TickTask);function TickTask(t,o){var a;return _classCallCheck(this,TickTask),(a=i.call(this,t,o))._isRunning=!1,a.isPaused=!1,a.tickingState=!1,a.setTickingMode(Jn(o,"tickingMode",1)),a}return _createClass(TickTask,[{key:"boot",value:function boot(){2!==this.tickingMode||this.tickingState||this.startTicking()}},{key:"shutdown",value:function shutdown(t){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),_get(_getPrototypeOf(TickTask.prototype),"shutdown",this).call(this,t))}},{key:"setTickingMode",value:function setTickingMode(t){"string"==typeof t&&(t=$n[t]),this.tickingMode=t}},{key:"startTicking",value:function startTicking(){this.tickingState=!0}},{key:"stopTicking",value:function stopTicking(){this.tickingState=!1}},{key:"isRunning",get:function get(){return this._isRunning},set:function set(t){this._isRunning!==t&&(this._isRunning=t,1===this.tickingMode&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}},{key:"start",value:function start(){return this.isPaused=!1,this.isRunning=!0,this}},{key:"pause",value:function pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}},{key:"resume",value:function resume(){return this.isPaused&&(this.isRunning=!0),this}},{key:"stop",value:function stop(){return this.isPaused=!1,this.isRunning=!1,this}},{key:"complete",value:function complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}}]),TickTask}(zt),$n={no:0,lazy:1,always:2},er=Phaser.Utils.Objects.GetValue,ir=function(t){_inherits(OnePointerTracer,t);var i=_createSuper(OnePointerTracer);function OnePointerTracer(t,o){var a;_classCallCheck(this,OnePointerTracer);var u=Xt(t);return u===t&&(t=void 0),(a=i.call(this,u,o)).gameObject=t,t&&t.setInteractive(er(o,"inputConfig",void 0)),a._enable=void 0,a.resetFromJSON(o),a.boot(),a}return _createClass(OnePointerTracer,[{key:"resetFromJSON",value:function resetFromJSON(t){return this.setEnable(er(t,"enable",!0)),this.setDetectBounds(),void 0===this.gameObject?this.setDetectBounds(er(t,"bounds",void 0)):this.setDetectBounds(),this.tracerState=nr,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}},{key:"boot",value:function boot(){_get(_getPrototypeOf(OnePointerTracer.prototype),"boot",this).call(this),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}},{key:"shutdown",value:function shutdown(t){this.scene&&(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,_get(_getPrototypeOf(OnePointerTracer.prototype),"shutdown",this).call(this,t))}},{key:"enable",get:function get(){return this._enable},set:function set(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}},{key:"setEnable",value:function setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}},{key:"setDetectBounds",value:function setDetectBounds(t){return this.bounds=t,this}},{key:"toggleEnable",value:function toggleEnable(){return this.setEnable(!this.enable),this}},{key:"onPointerDown",value:function onPointerDown(t,i){this.enable&&(void 0===this.pointer&&(!this.bounds||this.bounds.contains(t.x,t.y))&&this.pointer!==t&&(this.pointer=t,this.lastPointer=t,this.movedState=!1,this.tracerState=rr,void 0===this.gameObject&&(this.isTouchingAnyObject=i.length>0),this.onDragStart()))}},{key:"onPointerUp",value:function onPointerUp(t){this.enable&&((!this.bounds||this.bounds.contains(t.x,t.y))&&this.pointer===t&&(this.pointer=void 0,this.movedState=!1,this.tracerState=nr,this.onDragEnd()))}},{key:"onPointerMove",value:function onPointerMove(t){if(this.enable&&t.isDown){var i=!this.bounds||this.bounds.contains(t.x,t.y),o=this.pointer===t;!o&&i||(o&&!i?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}}},{key:"dragCancel",value:function dragCancel(){return this.tracerState===rr&&this.onDragEnd(),this.pointer=void 0,this.tracerState=nr,this}},{key:"onDragStart",value:function onDragStart(){this.emit("dragstart",this)}},{key:"onDragEnd",value:function onDragEnd(){this.emit("dragend",this)}},{key:"onDrag",value:function onDrag(){this.emit("drag",this)}},{key:"preUpdate",value:function preUpdate(t,i){}},{key:"postUpdate",value:function postUpdate(t,i){}},{key:"startTicking",value:function startTicking(){_get(_getPrototypeOf(OnePointerTracer.prototype),"startTicking",this).call(this),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}},{key:"stopTicking",value:function stopTicking(){_get(_getPrototypeOf(OnePointerTracer.prototype),"stopTicking",this).call(this),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}},{key:"setRecongizedStateObject",value:function setRecongizedStateObject(t){return this.recongizedState=t,this}},{key:"state",get:function get(){return this.recongizedState.state},set:function set(t){this.recongizedState.state=t}},{key:"cancel",value:function cancel(){return this.state=sr,this}}]),OnePointerTracer}(Qn),nr=0,rr=1,sr="IDLE",or=function(){function FSM(t){_classCallCheck(this,FSM);var i=It(t,"states",void 0);i&&this.addStates(i);var o=It(t,"extend",void 0);if(o)for(var a in o)this.hasOwnProperty(a)&&void 0!==this[a]||(this[a]=o[a]);var u=It(t,"eventEmitter",void 0),d=It(t,"EventEmitterClass",void 0);this.setEventEmitter(u,d),this._stateLock=!1,this.resetFromJSON(t)}return _createClass(FSM,[{key:"shutdown",value:function shutdown(){this.destroyEventEmitter()}},{key:"destroy",value:function destroy(){this.shutdown()}},{key:"resetFromJSON",value:function resetFromJSON(t){this.setEnable(It(t,"enable",!0)),this.start(It(t,"start",void 0));var i=It(t,"init",void 0);return i&&i.call(this),this}},{key:"toJSON",value:function toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}},{key:"setEnable",value:function setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}},{key:"toggleEnable",value:function toggleEnable(){return this.setEnable(!this.enable),this}},{key:"state",get:function get(){return this._state},set:function set(t){if(this.enable&&!this._stateLock&&this._state!==t){if(this._prevState=this._state,this._state=t,this._stateLock=!0,this.emit("statechange",this),null!=this._prevState){var i="exit_"+this._prevState,o=this[i];o&&o.call(this),this.emit(i,this)}if(this._stateLock=!1,null!=this._state){var a="enter_"+this._state,u=this[a];u&&u.call(this),this.emit(a,this)}}}},{key:"prevState",get:function get(){return this._prevState}},{key:"start",value:function start(t){return this._start=t,this._prevState=void 0,this._state=t,this}},{key:"goto",value:function goto(t){return null!=t&&(this.state=t),this}},{key:"next",value:function next(){var t,i=this["next_"+this.state];return i&&(t="string"==typeof i?i:i.call(this)),this.goto(t),this}},{key:"addState",value:function addState(t,i){"string"!=typeof t&&(t=(i=t).name);var o=i.next;o&&(this["next_"+t]=o);var a=i.exit;a&&(this["exit_"+t]=a);var u=i.enter;return u&&(this["enter_"+t]=u),this}},{key:"addStates",value:function addStates(t){if(Array.isArray(t))for(var i=0,o=t.length;i<o;i++)this.addState(t[i]);else for(var a in t)this.addState(a,t[a]);return this}},{key:"runMethod",value:function runMethod(t,i,o,a,u,d){var b=this[t+"_"+this.state];if(b){var S=arguments.length;switch(S){case 1:return b.call(this);case 2:return b.call(this,i);case 3:return b.call(this,i,o);case 4:return b.call(this,i,o,a);case 5:return b.call(this,i,o,a,u);case 6:return b.call(this,i,o,a,u,d)}for(var C=new Array(S-1),M=1;M<S;M++)C[M-1]=arguments[M];return b.apply(this,C)}}},{key:"update",value:function update(t,i){this.runMethod("update",t,i)}},{key:"preupdate",value:function preupdate(t,i){this.runMethod("preupdate",t,i)}},{key:"postupdate",value:function postupdate(t,i){this.runMethod("postupdate",t,i)}}]),FSM}();Object.assign(or.prototype,Nt);var ar=Phaser.Utils.Objects.GetValue,hr=Phaser.Math.Distance.Between,lr=function(t){_inherits(Tap,t);var i=_createSuper(Tap);function Tap(t,o){var a;_classCallCheck(this,Tap);var u=_assertThisInitialized(a=i.call(this,t,o)),d={states:{IDLE:{enter:function enter(){u.stop(),u.tapsCount=0,u.x=0,u.y=0,u.worldX=0,u.worldY=0},exit:function exit(){var t=u.lastPointer;u.x=t.x,u.y=t.y,u.worldX=t.worldX,u.worldY=t.worldY}},BEGIN:{enter:function enter(){u.start(),u.tapsCount=0,u.emit("tappingstart",u,u.gameObject,u.lastPointer)}},RECOGNIZED:{enter:function enter(){u.start(),u.emit("tap",u,u.gameObject,u.lastPointer),u.emit("".concat(u.tapsCount,"tap"),u,u.gameObject,u.lastPointer)}}},init:function init(){this.state=ur},eventEmitter:!1};return a.setRecongizedStateObject(new or(d)),a}return _createClass(Tap,[{key:"resetFromJSON",value:function resetFromJSON(t){_get(_getPrototypeOf(Tap.prototype),"resetFromJSON",this).call(this,t),this.setHoldTime(ar(t,"time",250)),this.setTapInterval(ar(t,"tapInterval",200)),this.setDragThreshold(ar(t,"threshold",9)),this.setTapOffset(ar(t,"tapOffset",10));var i=ar(t,"taps",void 0);return void 0!==i?this.setTaps(i):(this.setMaxTaps(ar(t,"maxTaps",void 0)),this.setMinTaps(ar(t,"minTaps",void 0))),this}},{key:"onDragStart",value:function onDragStart(){switch(this.state){case ur:this.state=cr;break;case cr:var t=this.lastPointer;hr(t.upX,t.upY,t.x,t.y)>this.tapOffset&&(this.state=dr,this.state=cr);break;case dr:this.state=cr}}},{key:"onDragEnd",value:function onDragEnd(){this.state===cr&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),void 0!==this.maxTaps&&this.tapsCount===this.maxTaps&&(this.state=dr))}},{key:"onDrag",value:function onDrag(){this.state!==ur&&this.pointer.getDistance()>this.dragThreshold&&(this.state=ur)}},{key:"preUpdate",value:function preUpdate(t,i){if(this.isRunning&&this.enable&&this.state===cr){var o=this.lastPointer;if(o.isDown)t-o.downTime>this.holdTime&&(this.state=ur);else t-o.upTime>this.tapInterval&&(void 0===this.minTaps||this.tapsCount>=this.minTaps?this.state=dr:this.state=ur)}}},{key:"postUpdate",value:function postUpdate(t,i){this.isRunning&&this.enable&&this.state===dr&&(this.state=ur)}},{key:"isTapped",get:function get(){return this.state===dr}},{key:"setHoldTime",value:function setHoldTime(t){return this.holdTime=t,this}},{key:"setTapInterval",value:function setTapInterval(t){return this.tapInterval=t,this}},{key:"setDragThreshold",value:function setDragThreshold(t){return this.dragThreshold=t,this}},{key:"setTapOffset",value:function setTapOffset(t){return this.tapOffset=t,this}},{key:"setMaxTaps",value:function setMaxTaps(t){return this.maxTaps=t,this}},{key:"setMinTaps",value:function setMinTaps(t){return this.minTaps=t,this}},{key:"setTaps",value:function setTaps(t,i){return void 0===i&&(i=t),this.setMinTaps(t).setMaxTaps(i),this}}]),Tap}(ir),ur="IDLE",cr="BEGIN",dr="RECOGNIZED",fr=function InstallTap(){var t=this.touchZone?this.touchZone:this.board.scene,i=new lr(t);return i.on("tap",pr,this),i},pr=function OnTap(t){var i=this.board,o=i.worldXYToTileXY(t.worldX,t.worldY),a=o.x,u=o.y;if(i.contains(a,u)){i.emit("tiletap",t,o),i.emit("tile".concat(t.tapsCount,"tap"),t,o);Hn((function boardEventCallback(o){i.emit("gameobjecttap",t,o),i.emit("gameobject".concat(t.tapsCount,"tap"),t,o)}),(function chessEventCallback(i){i.emit("board.tap",t),i.emit("board.".concat(t.tapsCount,"tap"),t)}),i,a,u,t)}},gr=Phaser.Utils.Objects.GetValue,vr=function(t){_inherits(Press,t);var i=_createSuper(Press);function Press(t,o){var a;_classCallCheck(this,Press);var u=_assertThisInitialized(a=i.call(this,t,o)),d={states:{IDLE:{enter:function enter(){u.x=0,u.y=0,u.worldX=0,u.worldY=0},exit:function exit(){var t=u.lastPointer;u.x=t.x,u.y=t.y,u.worldX=t.worldX,u.worldY=t.worldY}},BEGIN:{enter:function enter(){u.start()},exit:function exit(){u.stop()}},RECOGNIZED:{enter:function enter(){u.emit("pressstart",u,u.gameObject,u.lastPointer)},exit:function exit(){u.emit("pressend",u,u.gameObject,u.lastPointer)}}},init:function init(){this.state=mr},eventEmitter:!1};return a.setRecongizedStateObject(new or(d)),a}return _createClass(Press,[{key:"resetFromJSON",value:function resetFromJSON(t){return _get(_getPrototypeOf(Press.prototype),"resetFromJSON",this).call(this,t),this.setDragThreshold(gr(t,"threshold",9)),this.setHoldTime(gr(t,"time",251)),this}},{key:"onDragStart",value:function onDragStart(){this.state=yr,0===this.holdTime&&(this.state=xr)}},{key:"onDragEnd",value:function onDragEnd(){this.state=mr}},{key:"onDrag",value:function onDrag(){this.state!==mr&&this.pointer.getDistance()>this.dragThreshold&&(this.state=mr)}},{key:"preUpdate",value:function preUpdate(t,i){this.isRunning&&this.enable&&(this.state===yr&&t-this.pointer.downTime>=this.holdTime&&(this.state=xr))}},{key:"isPressed",get:function get(){return this.state===xr}},{key:"setHoldTime",value:function setHoldTime(t){return this.holdTime=t,this}},{key:"setDragThreshold",value:function setDragThreshold(t){return this.dragThreshold=t,this}}]),Press}(ir),mr="IDLE",yr="BEGIN",xr="RECOGNIZED",Tr=function InstallPress(){var t=this.touchZone?this.touchZone:this.board.scene,i=new vr(t);return i.on("pressstart",br,this).on("pressend",wr,this),i},br=function OnPressStart(t){var i=this.board,o=i.worldXYToTileXY(t.worldX,t.worldY),a=o.x,u=o.y;i.contains(a,u)&&(i.emit("tilepressstart",t,o),Hn("gameobjectpressstart","board.pressstart",i,a,u,t))},wr=function OnPressEnd(t){var i=this.board,o=i.worldXYToTileXY(t.worldX,t.worldY),a=o.x,u=o.y;i.contains(a,u)&&(i.emit("tilepressend",t,o),Hn("gameobjectpressend","board.pressend",i,a,u,t))},Sr=Phaser.Math.Distance.Between,Cr=Phaser.Math.Angle.Between,Ar={getDt:function getDt(){return this.scene.sys.game.loop.delta},getVelocity:function getVelocity(){var t=this.pointer.position,i=this.pointer.prevPosition;return Sr(i.x,i.y,t.x,t.y)/(.001*this.getDt())},getVelocityX:function getVelocityX(){var t=this.pointer.position,i=this.pointer.prevPosition;return Math.abs(t.x-i.x)/(.001*this.getDt())},getVelocityY:function getVelocityY(){var t=this.pointer.position,i=this.pointer.prevPosition;return Math.abs(t.y-i.y)/(.001*this.getDt())},getVelocityAngle:function getVelocityAngle(){var t=this.pointer.position,i=this.pointer.prevPosition;return Cr(i.x,i.y,t.x,t.y)}},Er={"up&down":0,"left&right":1,"4dir":2,"8dir":3},Mr={},_r=Phaser.Utils.Objects.GetValue,Pr=Phaser.Math.RadToDeg,Rr=function(t){_inherits(Swipe,t);var i=_createSuper(Swipe);function Swipe(t,o){var a;_classCallCheck(this,Swipe);var u=_assertThisInitialized(a=i.call(this,t,o)),d={states:{IDLE:{enter:function enter(){u.x=0,u.y=0,u.worldX=0,u.worldY=0},exit:function exit(){var t=u.lastPointer;u.x=t.x,u.y=t.y,u.worldX=t.worldX,u.worldY=t.worldY}},BEGIN:{enter:function enter(){u.validDrag=!1}},RECOGNIZED:{enter:function enter(){u.start(),u.updateDirectionStates(),u.emit("swipe",u,u.gameObject,u.lastPointer)},exit:function exit(){u.stop(),u.clearDirectionStates()}}},init:function init(){this.state=kr},eventEmitter:!1};return a.setRecongizedStateObject(new or(d)),a.clearDirectionStates(),a}return _createClass(Swipe,[{key:"resetFromJSON",value:function resetFromJSON(t){return _get(_getPrototypeOf(Swipe.prototype),"resetFromJSON",this).call(this,t),this.setDragThreshold(_r(t,"threshold",10)),this.setVelocityThreshold(_r(t,"velocityThreshold",1e3)),this.setDirectionMode(_r(t,"dir","8dir")),this}},{key:"onDragStart",value:function onDragStart(){this.state=Or}},{key:"onDragEnd",value:function onDragEnd(){this.state=kr}},{key:"onDrag",value:function onDrag(){this.state===Or&&(this.validDrag||(this.validDrag=0===this.dragThreshold||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=Lr))}},{key:"postUpdate",value:function postUpdate(t,i){this.isRunning&&this.enable&&this.state===Lr&&(this.state=kr)}},{key:"isSwiped",get:function get(){return this.state===Lr}},{key:"dragVelocity",get:function get(){var t;switch(this.dirMode){case 0:t=this.getVelocityY();break;case 1:t=this.getVelocityX();break;default:t=this.getVelocity()}return t}},{key:"setDragThreshold",value:function setDragThreshold(t){return this.dragThreshold=t,this}},{key:"setVelocityThreshold",value:function setVelocityThreshold(t){return this.velocityThreshold=t,this}},{key:"setDirectionMode",value:function setDirectionMode(t){return"string"==typeof t&&(t=Er[t]),this.dirMode=t,this}},{key:"updateDirectionStates",value:function updateDirectionStates(){return function AngleToDirections(t,i,o){switch(void 0===o?o={}:!0===o&&(o=Mr),o.left=!1,o.right=!1,o.up=!1,o.down=!1,t=(t+360)%360,i){case 0:t<180?o.down=!0:o.up=!0;break;case 1:t>90&&t<=270?o.left=!0:o.right=!0;break;case 2:t>45&&t<=135?o.down=!0:t>135&&t<=225?o.left=!0:t>225&&t<=315?o.up=!0:o.right=!0;break;case 3:t>22.5&&t<=67.5?(o.down=!0,o.right=!0):t>67.5&&t<=112.5?o.down=!0:t>112.5&&t<=157.5?(o.down=!0,o.left=!0):t>157.5&&t<=202.5?o.left=!0:t>202.5&&t<=247.5?(o.left=!0,o.up=!0):t>247.5&&t<=292.5?o.up=!0:t>292.5&&t<=337.5?(o.up=!0,o.right=!0):o.right=!0}}(Pr(this.getVelocityAngle()),this.dirMode,this),this}},{key:"clearDirectionStates",value:function clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}]),Swipe}(ir);Object.assign(Rr.prototype,Ar);var kr="IDLE",Or="BEGIN",Lr="RECOGNIZED",Dr=function InstallSwipe(){var t=this.touchZone?this.touchZone:this.board.scene,i=new Rr(t);return i.on("swipe",Ir,this),i},Ir=function OnSwipe(t){var i=this.board,o=i.worldXYToTileXY(t.worldX,t.worldY),a=o.x,u=o.y;i.contains(a,u)&&(t.direction=i.angleSnapToDirection(o,t.getVelocityAngle()),i.emit("tileswipe",t,o),Hn("gameobjectswipe","board.swipe",i,a,u,t))},Fr=function(){function Input(t,i){_classCallCheck(this,Input);var o=It(i,"enable",!0),a=It(i,"useTouchZone",!0),u=t.scene;if(this.board=t,this.touchZone=void 0,this._enable=!0,this.pointer=null,this.tilePosition={x:void 0,y:void 0},this.prevTilePosition={x:void 0,y:void 0},a){var d=new zn(u);d.on("pointerdown",qn,this),d.on("pointerup",Zn,this),d.on("pointermove",Kn,this),this.touchZone=d}else u.input.on("pointerdown",qn,this),u.input.on("pointerup",Zn,this),u.input.on("pointermove",Kn,this);this.tap=fr.call(this),this.press=Tr.call(this),this.swipe=Dr.call(this),t.once("destroy",this.onBoardDestroy,this),this.setEnable(o)}return _createClass(Input,[{key:"destroy",value:function destroy(t){if(this.tap.destroy(t),this.press.destroy(t),this.swipe.destroy(t),this.touchZone)this.touchZone.destroy(t),this.touchZone=void 0;else{var i=this.board.scene;i&&(i.input.off("pointerdown",qn,this),i.input.off("pointerup",Zn,this),i.input.off("pointermove",Kn,this))}this.board=void 0}},{key:"onBoardDestroy",value:function onBoardDestroy(t,i){this.destroy(i)}},{key:"enable",get:function get(){return this._enable},set:function set(t){this._enable!==t&&(t||(this.pointer=null),this._enable=t,this.touchZone&&(t?this.touchZone.setInteractive():this.touchZone.disableInteractive()),this.tap.setEnable(t),this.press.setEnable(t),this.swipe.setEnable(t))}},{key:"setEnable",value:function setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}}]),Input}(),Br=function(t){_inherits(Board,t);var i=_createSuper(Board);function Board(){return _classCallCheck(this,Board),i.apply(this,arguments)}return _createClass(Board,[{key:"touchZone",get:function get(){return this.input?this.input.touchZone:null}},{key:"getTouchZone",value:function getTouchZone(){return this.touchZone}}]),Board}(Un),Nr={setInteractive:function SetInteractive$1(t){if(this.input){var i=!1!==t;this.input.setEnable(i)}else this.input=new Fr(this,t);return this}};Object.assign(Br.prototype,Nr);var Yr=function IsInValidKey(t){return null==t||""===t||0===t.length},Gr=function SetValue(t,i,o,a){if(void 0===a&&(a="."),"object"===_typeof(t)){if(Yr(i)){if(null==o)return;"object"===_typeof(o)&&(t=o)}else{"string"==typeof i&&(i=i.split(a));var u=i.pop(),d=function GetEntry(t,i,o){var a=t;if(Yr(i));else{var u;"string"==typeof i&&(i=i.split("."));for(var d=0,b=i.length;d<b;d++){var S;null!=a[u=i[d]]&&"object"===_typeof(a[u])||(S=d===b-1?void 0===o?{}:o:{},a[u]=S),a=a[u]}}return a}(t,i);d[u]=o}return t}};Ot.register("board",(function(t){return new Br(this.scene,t)})),Gr(window,"RexPlugins.Board.Board",Br),Ot.register("hexagonGrid",(function(t){return new Bn(t)})),Ot.register("quadGrid",(function(t){return new xi(t)}));var Xr=function IsMiniBoardObject(t){return"rexMiniBoard"===t.type},Ur=function(t){_inherits(Shape,t);var i=_createSuper(Shape);function Shape(t,o,a,u,d,b,S){var C;_classCallCheck(this,Shape),void 0===S&&(S=!0);var M,P=Xr(t);P&&(t=(M=t).board);var R,O,B=t.scene;S?(R=0,O=0):(R=o,O=a);var N=t.getGridPoints(void 0,void 0,!0);return zr(N),C=i.call(this,B,R,O,N,d,b),S?P?M.addChess(_assertThisInitialized(C),o,a,u):t.addChess(_assertThisInitialized(C),o,a,u,!0):Kt(_assertThisInitialized(C)),C}return _createClass(Shape)}(Phaser.GameObjects.Polygon),zr=function ShiftToO(t){for(var i,o=1/0,a=1/0,u=0,d=t.length;u<d;u++)i=t[u],o=Math.min(o,i.x),a=Math.min(a,i.y);if(0===o&&0===a)return t;for(u=0,d=t.length;u<d;u++)(i=t[u]).x-=o,i.y-=a;return t};Ot.register("shape",(function(t,i,o,a,u,d,b){var S=new Ur(t,i,o,a,u,d,b);return t.scene.add.existing(S),S})),Gr(window,"RexPlugins.Board.Shape",Ur);var Vr=function(t){_inherits(SceneUpdateTickTask,t);var i=_createSuper(SceneUpdateTickTask);function SceneUpdateTickTask(){return _classCallCheck(this,SceneUpdateTickTask),i.apply(this,arguments)}return _createClass(SceneUpdateTickTask,[{key:"startTicking",value:function startTicking(){_get(_getPrototypeOf(SceneUpdateTickTask.prototype),"startTicking",this).call(this),this.scene.sys.events.on("update",this.update,this)}},{key:"stopTicking",value:function stopTicking(){_get(_getPrototypeOf(SceneUpdateTickTask.prototype),"stopTicking",this).call(this),this.scene&&this.scene.sys.events.off("update",this.update,this)}}]),SceneUpdateTickTask}(Qn),Wr={x:0,y:0,z:0},Hr=function GetSneakTileZ(t,i,o,a){var u=t.chessData.board,d=a.toString();do{d+="."}while(u.contains(i,o,d));return d},jr={},qr={},Zr=function Clone(t,i){var o=Array.isArray(t);if(void 0===i?i=o?[]:{}:je(i),o){i.length=t.length;for(var a=0,u=t.length;a<u;a++)i[a]=t[a]}else for(var d in t)i[d]=t[d];return i},Kr=function Shuffle(t){for(var i=t.length-1;i>0;i--){var o=Math.floor(Math.random()*(i+1)),a=t[i];t[i]=t[o],t[o]=a}return t},Jr=[],Qr={x:0,y:0},$r=[],ts={canMoveTo:function CanMoveToTile$1(t,i,o){var a=this.chessData.board;if(null==a)return!1;var u=this.chessData.tileXYZ,d=u.x,b=u.y,S=u.z;if(t===d&&i===b)return!0;if(!a.contains(t,i))return!1;if(this.blockerTest&&a.hasBlocker(t,i))return!1;if(this.edgeBlockerTest,this.moveableTestCallback){if(void 0===o&&(o=this.chessData.getTileDirection(t,i)),Wr.x=t,Wr.y=i,Wr.z=S,this.moveableTestScope)var C=this.moveableTestCallback.call(this.moveableTestScope,u,Wr,o,a);else C=this.moveableTestCallback(u,Wr,o,a);if(!C)return!1}if(this.occupiedTest&&!this.sneakMode){var M=a.tileXYZToChess(t,i,S);if(M&&(this.emit("occupy",M,this.parent,this),a.contains(t,i,S)))return!1}return!0},moveTo:function MoveToTile$1(t,i,o){var a=this.chessData.board;if(null===a)return this.lastMoveResult=!1,this;if(null!=t&&"number"!=typeof t){var u=t;t=It(u,"x",void 0),i=It(u,"y",void 0),o=It(u,"direction",void 0)}var d=this.chessData.tileXYZ;if(void 0!==o&&null==t||null==i){var b=a.getNeighborTileXY(d,o,!0);null!==b?(t=b.x,i=b.y):(t=null,i=null)}if(null==t||null==i)return this.lastMoveResult=!1,this;if(void 0===o&&(jr.x=t,jr.y=i,o=a.getNeighborTileDirection(d,jr)),!this.canMoveTo(t,i,o))return this.lastMoveResult=!1,this;if(this.destinationTileX=t,this.destinationTileY=i,this.destinationDirection=o,a.wrapMode&&null!==o)if(a.grid.getNeighborTileXY(d.x,d.y,o,qr),qr.x===t&&qr.y===i){var S=a.tileXYToWorldXY(t,i,!0);this.moveAlongLine(void 0,void 0,S.x,S.y)}else{var C=(S=a.tileXYToWorldXY(qr.x,qr.y,!0)).x,M=S.y,P=(S=a.tileXYToWorldXY(d.x,d.y,!0)).x,R=S.y,O=(P+C)/2,B=(R+M)/2;this.moveAlongLine(void 0,void 0,O,B);var N=a.getOppositeDirection(t,i,o);a.grid.getNeighborTileXY(t,i,N,qr),C=(S=a.tileXYToWorldXY(qr.x,qr.y,!0)).x,M=S.y,P=(C+(O=(S=a.tileXYToWorldXY(t,i,!0)).x))/2,R=(M+(B=S.y))/2,this.addMoveLine(P,R,O,B)}else{S=a.tileXYToWorldXY(t,i,!0);this.moveAlongLine(void 0,void 0,S.x,S.y)}var Y=d.z;return this.sneakMode&&(void 0===this.tileZSave?a.contains(t,i,Y)&&(this.tileZSave=Y,Y=Hr(this,t,i,this.tileZSave)):a.contains(t,i,this.tileZSave)?Y=Hr(this,t,i,this.tileZSave):(Y=this.tileZSave,this.tileZSave=void 0)),a.moveChess(this.parent,t,i,Y,!1),this.isRunning=!0,this.lastMoveResult=!0,this},moveToward:function MoveToward$1(t){return this.moveTo(void 0,void 0,t),this},moveToRandomNeighbor:function MoveToRandomNeighbor$1(){var t=this.chessData.board;if(null===t)return this.lastMoveResult=!1,this;var i=t.grid.allDirections;Jr.length!==i.length&&Zr(i,Jr),Kr(Jr);for(var o=0,a=Jr.length;o<a;o++)if(this.moveToward(Jr[o]),this.lastMoveResult)return this;return this},moveAway:function MoveAway(t,i,o){var a=this.chessData.board;if(null===a)return this.lastMoveResult=!1,this;if("number"!=typeof t){var u=t;t=u.x,i=u.y}Qr.x=t,Qr.y=i,void 0===o&&(o=!0);var d,b,S=this.chessData.tileXYZ,C=a.grid.allDirections;if($r.length!==C.length+1){$r.length=0;for(var M=0,P=C.length;M<P;M++)$r.push({direction:M});$r.push({direction:null})}for(M=0,P=$r.length;M<P;M++){if(null===(b=(d=$r[M]).direction))d.x=S.x,d.y=S.y;else if(null===a.getNeighborTileXY(S,b,d)){d.x=null,d.y=null,d.distance=null;continue}d.distance=a.getDistance(d,Qr,!0)}var R=this.destinationDirection;$r.sort((function(t,i){return null===t.distance?1:null===i.distance?-1:t.distance>i.distance?o?-1:1:t.distance<i.distance?o?1:-1:t.direction===R?1:i.direction===R?-1:null===t.direction?1:null===i.direction?-1:0}));for(M=0,P=$r.length;M<P;M++){if(null===(d=$r[M]).distance)return this;if(this.moveTo(d),this.lastMoveResult)return this}return this},moveCloser:function MoveCloser(t,i){return this.moveAway(t,i,!1),this}},es=Phaser.Utils.Objects.GetValue,ns=Phaser.Math.Distance.Between,rs=Phaser.Math.Linear,ss=Phaser.Math.Angle.Between,os=function(t){_inherits(MoveTo$2,t);var i=_createSuper(MoveTo$2);function MoveTo$2(t,o){var a;return _classCallCheck(this,MoveTo$2),(a=i.call(this,t,o)).resetFromJSON(o),a.boot(),a}return _createClass(MoveTo$2,[{key:"resetFromJSON",value:function resetFromJSON(t){return this.isRunning=es(t,"isRunning",!1),this.setEnable(es(t,"enable",!0)),this.timeScale=es(t,"timeScale",1),this.setSpeed(es(t,"speed",400)),this.setRotateToTarget(es(t,"rotateToTarget",!1)),this.targetX=es(t,"targetX",0),this.targetY=es(t,"targetY",0),this}},{key:"toJSON",value:function toJSON(){return{isRunning:this.isRunning,enable:this.enable,timeScale:this.timeScale,speed:this.speed,rotateToTarget:this.rotateToTarget,targetX:this.targetX,targetY:this.targetY,tickingMode:this.tickingMode}}},{key:"setEnable",value:function setEnable(t){return null==t&&(t=!0),this.enable=t,this}},{key:"setSpeed",value:function setSpeed(t){return this.speed=t,this}},{key:"setRotateToTarget",value:function setRotateToTarget(t){return this.rotateToTarget=t,this}},{key:"moveTo",value:function moveTo(t,i){if("number"!=typeof t){var o=t;t=o.x,i=o.y}return this.targetX=t,this.targetY=i,_get(_getPrototypeOf(MoveTo$2.prototype),"start",this).call(this),this}},{key:"moveFrom",value:function moveFrom(t,i){if("number"!=typeof t){var o=t;t=o.x,i=o.y}var a=this.parent,u=a.x,d=a.y;return a.setPosition(t,i),this.moveTo(u,d),this}},{key:"moveToward",value:function moveToward(t,i){var o=this.parent,a=o.x+Math.cos(t)*i,u=o.y+Math.sin(t)*i;return this.moveTo(a,u),this}},{key:"update",value:function update(t,i){if(!this.isRunning||!this.enable)return this;var o=this.parent;if(!o.active)return this;var a=o.x,u=o.y,d=this.targetX,b=this.targetY;if(a===d&&u===b)return this.complete(),this;if(0===this.speed||0===i||0===this.timeScale)return this;var S,C,M=i*this.timeScale/1e3,P=this.speed*M,R=ns(a,u,d,b);if(P<R){var O=P/R;S=rs(a,d,O),C=rs(u,b,O)}else S=d,C=b;return o.setPosition(S,C),this.rotateToTarget&&(o.rotation=ss(a,u,S,C)),this}}]),MoveTo$2}(Vr),as=function(t){_inherits(MoveTo$1,t);var i=_createSuper(MoveTo$1);function MoveTo$1(t,o){var a;return _classCallCheck(this,MoveTo$1),(a=i.call(this,t,o)).chessData=Kt(t),a.scene=t.scene,a.moveToTask=new os(t,{tickingMode:0}),a.resetFromJSON(o),a.boot(),a}return _createClass(MoveTo$1,[{key:"resetFromJSON",value:function resetFromJSON(t){return this.isRunning=It(t,"isRunning",!1),this.setEnable(It(t,"enable",!0)),this.timeScale=It(t,"timeScale",1),this.setSpeed(It(t,"speed",400)),this.setRotateToTarget(It(t,"rotateToTarget",!1)),this.setOccupiedTest(It(t,"occupiedTest",!1)),this.setBlockerTest(It(t,"blockerTest",!1)),this.setEdgeBlockerTest(It(t,"edgeBlockerTest",!1)),this.setMoveableTestCallback(It(t,"moveableTest",void 0),It(t,"moveableTestScope",void 0)),this.setSneakEnable(It(t,"sneak",!1)),this.destinationTileX=It(t,"destinationTileX",null),this.destinationTileY=It(t,"destinationTileY",null),this.destinationDirection=It(t,"destinationDirection",null),this.lastMoveResult=It(t,"lastMoveResult",void 0),this}},{key:"toJSON",value:function toJSON(){return{isRunning:this.isRunning,enable:this.enable,timeScale:this.timeScale,speed:this.speed,occupiedTest:this.occupiedTest,blockerTest:this.blockerTest,edgeBlockerTest:this.edgeBlockerTest,moveableTest:this.moveableTestCallback,moveableTestScope:this.moveableTestScope,rotateToTarget:this.rotateToTarget,destinationTileX:this.destinationTileX,destinationTileY:this.destinationTileY,destinationDirection:this.destinationDirection,lastMoveResult:this.lastMoveResult,tickingMode:this.tickingMode}}},{key:"shutdown",value:function shutdown(t){this.moveToTask.shutdown(t),_get(_getPrototypeOf(MoveTo$1.prototype),"shutdown",this).call(this,t)}},{key:"enable",get:function get(){return this.moveToTask.enable},set:function set(t){this.moveToTask.setEnable(t)}},{key:"setEnable",value:function setEnable(t){return null==t&&(t=!0),this.enable=t,this}},{key:"timeScale",get:function get(){return this.moveToTask.timeScale},set:function set(t){this.moveToTask.timeScale=t}},{key:"speed",get:function get(){return this.moveToTask.speed},set:function set(t){this.moveToTask.setSpeed(t)}},{key:"setSpeed",value:function setSpeed(t){return this.speed=t,this}},{key:"rotateToTarget",get:function get(){return this.moveToTask.rotateToTarget},set:function set(t){this.moveToTask.setRotateToTarget(t)}},{key:"setRotateToTarget",value:function setRotateToTarget(t){return void 0===t&&(t=!0),this.rotateToTarget=t,this}},{key:"setOccupiedTest",value:function setOccupiedTest(t){return void 0===t&&(t=!0),this.occupiedTest=t,this}},{key:"setBlockerTest",value:function setBlockerTest(t){return void 0===t&&(t=!0),this.blockerTest=t,this}},{key:"setEdgeBlockerTest",value:function setEdgeBlockerTest(t){return void 0===t&&(t=!0),this.edgeBlockerTest=t,this}},{key:"setMoveableTestCallback",value:function setMoveableTestCallback(t,i){return this.moveableTestCallback=t,this.moveableTestScope=i,this}},{key:"setSneakEnable",value:function setSneakEnable(t){return void 0===t&&(t=!0),this.sneakMode=t,this.tileZSave=void 0,this}},{key:"moveAlongLine",value:function moveAlongLine(t,i,o,a){return void 0!==t&&(this.parent.x=t),void 0!==i&&(this.parent.y=i),this.moveToTask.moveTo(o,a),this}},{key:"addMoveLine",value:function addMoveLine(t,i,o,a){return this.moveToTask.hasOwnProperty("nextlines")||(this.moveToTask.nextlines=[]),this.moveToTask.nextlines.push([t,i,o,a]),this}},{key:"moveNextLine",value:function moveNextLine(){var t=this.moveToTask.nextlines;return!!t&&(0!==t.length&&(this.moveAlongLine.apply(this,t[0]),t.length=0,!0))}},{key:"update",value:function update(t,i){if(!this.isRunning||!this.enable)return this;var o=this.moveToTask;return o.update(t,i),o.isRunning||this.moveNextLine()||this.complete(),this}}]),MoveTo$1}(Vr);Object.assign(as.prototype,ts);var hs={x:0,y:0,z:0},ls={x:0,y:0,z:0},us={},cs={},ds=[],fs=function(t){_inherits(MoveTo,t);var i=_createSuper(MoveTo);function MoveTo(t,o){var a;return _classCallCheck(this,MoveTo),(a=i.call(this,t,o)).moveToTask=new os(t,{tickingMode:0}),a.resetFromJSON(o),a.boot(),a}return _createClass(MoveTo,[{key:"resetFromJSON",value:function resetFromJSON(t){return this.isRunning=It(t,"isRunning",!1),this.setEnable(It(t,"enable",!0)),this.timeScale=It(t,"timeScale",1),this.setSpeed(It(t,"speed",400)),this.destinationTileX=It(t,"destinationTileX",null),this.destinationTileY=It(t,"destinationTileY",null),this.destinationDirection=It(t,"destinationDirection",null),this.lastMoveResult=It(t,"lastMoveResult",void 0),this}},{key:"toJSON",value:function toJSON(){return{isRunning:this.isRunning,enable:this.enable,timeScale:this.timeScale,speed:this.speed,moveableTest:this.moveableTestCallback,moveableTestScope:this.moveableTestScope,destinationTileX:this.destinationTileX,destinationTileY:this.destinationTileY,destinationDirection:this.destinationDirection,lastMoveResult:this.lastMoveResult,tickingMode:this.tickingMode}}},{key:"shutdown",value:function shutdown(t){this.isShutdown||(this.moveToTask.shutdown(t),_get(_getPrototypeOf(MoveTo.prototype),"shutdown",this).call(this,t))}},{key:"enable",get:function get(){return this.moveToTask.enable},set:function set(t){this.moveToTask.setEnable(t)}},{key:"setEnable",value:function setEnable(t){return null==t&&(t=!0),this.enable=t,this}},{key:"timeScale",get:function get(){return this.moveToTask.timeScale},set:function set(t){this.moveToTask.timeScale=t}},{key:"speed",get:function get(){return this.moveToTask.speed},set:function set(t){this.moveToTask.setSpeed(t)}},{key:"setSpeed",value:function setSpeed(t){return this.speed=t,this}},{key:"moveAlongLine",value:function moveAlongLine(t,i,o,a){return void 0!==t&&(this.parent.x=t),void 0!==i&&(this.parent.y=i),this.moveToTask.moveTo(o,a),this}},{key:"update",value:function update(t,i){if(!this.isRunning||!this.enable)return this;var o=this.moveToTask;return o.update(t,i),o.isRunning||this.complete(),this}}]),MoveTo}(Vr),ps={canMoveTo:function CanMoveToTile(t,i,o){var a=this.parent,u=a.mainBoard;if(null==u)return!1;if(hs.x=a.tileX,hs.y=a.tileY,ls.x=t,ls.y=i,ls.x===hs.x&&ls.y===hs.y)return!0;if(a.pullOutFromMainBoard(),!a.canPutOnMainBoard(u,ls.x,ls.y))return a.putBack(),!1;if(this.moveableTestCallback){if(void 0===o&&(o=u.getNeighborTileDirection(hs,ls)),this.moveableTestScope)var d=this.moveableTestCallback.call(this.moveableTestScope,hs,ls,o,u);else d=this.moveableTestCallback(hs,ls,o,u);if(!d)return a.putBack(),!1}return a.putBack(),!0},moveTo:function MoveToTile(t,i,o){var a=this.parent,u=a.mainBoard;if(null==u)return this.lastMoveResult=!1,this;if(null!=t&&"number"!=typeof t){var d=t;t=It(d,"x",void 0),i=It(d,"y",void 0),o=It(d,"direction",void 0)}(us.x=a.tileX,us.y=a.tileY,void 0!==o&&null==t||null==i)&&(null!==(b=u.getNeighborTileXY(us,o,!0))?(t=b.x,i=b.y):(t=null,i=null));if(null==t||null==i)return this.lastMoveResult=!1,this;if(void 0===o&&(cs.x=t,cs.y=i,o=board.getNeighborTileDirection(us,cs)),!this.canMoveTo(t,i,o))return this.lastMoveResult=!1,this;this.destinationTileX=t,this.destinationTileY=i,this.destinationDirection=o;var b=u.tileXYToWorldXY(t,i,!0);return this.moveToTask.moveTo(b.x,b.y),a.putOnMainBoard(u,t,i,!1),this.isRunning=!0,this.lastMoveResult=!0,this},moveToward:function MoveToward(t){return this.moveTo(void 0,void 0,t),this},moveToRandomNeighbor:function MoveToRandomNeighbor(){var t=this.parent.mainBoard;if(null==t)return this.lastMoveResult=!1,this;var i=t.grid.allDirections;ds.length!==i.length&&Zr(i,ds),Kr(ds);for(var o=0,a=ds.length;o<a;o++)if(this.moveToward(ds[o]),this.lastMoveResult)return this;return this}};Object.assign(fs.prototype,ps),Ot.register("moveTo",(function(t,i){return new(Xr(t)?fs:as)(t,i)})),Gr(window,"RexPlugins.Board.MoveTo",as),Gr(window,"RexPlugins.Board.MiniBoardMoveTo",fs);var gs,vs={tileXY:[],direction:void 0,pattern:void 0},ms=function(){function Queue(){_classCallCheck(this,Queue),this.data=[],this.visited={}}return _createClass(Queue,[{key:"push",value:function push(t,i){if(o(t)){for(var a=t,u=0,d=a.length;u<d;u++)this.push(a[u]);return this}if(Wt(t)){var b=t;t=b.x,i=b.y}var S="".concat(t,",").concat(i);return this.visited.hasOwnProperty(S)||(this.data.push({x:t,y:i}),this.visited[S]=!0),this}},{key:"pop",value:function pop(){return this.data.pop()}},{key:"length",get:function get(){return this.data.length}},{key:"clear",value:function clear(){return je(this.data),je(this.visited),this}}]),Queue}(),ys={match:function MatchBoard(t,i,o,a){for(var u,d,b,S=this.board,C=S.grid.halfDirections,M=this.dirMask,P=S.width,R=S.height,O=0,B=C.length;O<B;O++)if(!1!==M[u=C[O]])for(var N=0;N<R;N++){for(var Y=0;Y<P;Y++)if(!1!==(d=this.matchAtDir(t,Y,N,u))){if(i&&(b=o?i.call(o,d,S):i(d,S)),a)return d;if(b)break}if(b)break}return this},matchAtDir:function MatchAtDir(t,i,o,a){var u,d="number"==typeof t;d?(u=t,t=null):u=t.length;var b,S,C=this.wildcard,M=this.board,P=vs.tileXY;P.length=0;for(var R=0;R<u;R++){if(void 0===S)S={x:i,y:o};else if(null===(S=M.getNeighborTileXY(S,a,S)))return!1;if(null==(b=this.getSymbol(S.x,S.y)))return!1;if(b!==C)if(d){if(null===t)t=b;else if(t!==b)return!1}else if(t[R]!==b)return!1;P.push({x:S.x,y:S.y})}return vs.direction=a,vs.pattern=t,vs},group:function Group(t,i,o){void 0===o&&(o=[]);var a,u,d=this.board,b=this.wildcard,S=this.getSymbol(t,i);if(null==S||S===b)return o;for(void 0===gs&&(gs=new ms),gs.push(t,i);gs.length;)a=gs.pop(),(u=this.getSymbol(a.x,a.y))!==S&&u!==b||(o.push(a),gs.push(d.getNeighborTileXY(a)));return gs.clear(),o}},xs=function(){function Match(t){_classCallCheck(this,Match),this.symbols=[],this.dirMask={},this.resetFromJSON(t),this.boot()}return _createClass(Match,[{key:"resetFromJSON",value:function resetFromJSON(t){this.setBoard(It(t,"board",void 0)),this.setWildcard(It(t,"wildcard",void 0));var i=It(t,"dirMask",void 0);return void 0!==i&&this.setDirMask(i),this}},{key:"boot",value:function boot(){}},{key:"shutdown",value:function shutdown(){return this.board=void 0,this.symbols=void 0,this.dirMask=void 0,this}},{key:"destroy",value:function destroy(){return this.shutdown(),this}},{key:"setBoard",value:function setBoard(t){return this.board=t,t&&this.clearSymbols(),this}},{key:"setDirMask",value:function setDirMask(t,i){if(Wt(t)){var o=t;for(t in o)this.dirMask[t]=o[t]}else this.dirMask[t]=i;return this}},{key:"setDirectionMode",value:function setDirectionMode(t){return this.board.grid.setDirectionMode(t),this}},{key:"clearSymbols",value:function clearSymbols(){return this.refreshSymbols(null),this}},{key:"setSymbol",value:function setSymbol(t,i,o){return this.board.contains(t,i)?(this.symbols[this.tileXYToKey(t,i)]=o,this):this}},{key:"getSymbol",value:function getSymbol(t,i){return this.symbols[this.tileXYToKey(t,i)]}},{key:"forEach",value:function forEach(t,i){for(var o,a,u=this.board,d=0,b=this.symbols.length;d<b&&(a=this.symbols[d],o=this.keyToTileXY(d),!(i?t.call(i,o,a,u):t(o,a,u)));d++);return this}},{key:"refreshSymbols",value:function refreshSymbols(t,i){var o,a,u=this.board,d=u.width,b=u.height;if(this.symbols.length=d*b,function IsFunction(t){return t&&"function"==typeof t}(t))for(var S=0,C=this.symbols.length;S<C;S++)a=this.keyToTileXY(S,!0),o=i?t.call(i,a,u):t(a,u),this.symbols[S]=o;else{o=t;for(S=0,C=this.symbols.length;S<C;S++)this.symbols[S]=o}return this}},{key:"setWildcard",value:function setWildcard(t){return this.wildcard=t,this}},{key:"tileXYToKey",value:function tileXYToKey(t,i){return t+i*this.board.width}},{key:"keyToTileXY",value:function keyToTileXY(t,i){void 0===i?i={}:!0===i&&(i=Ts);var o=this.board.width;return i.x=t%o,i.y=Math.floor(t/o),i}},{key:"anyMatch",value:function anyMatch(t){return this.match(t,null,null,!0)}}]),Match}(),Ts={x:0,y:0};Object.assign(xs.prototype,ys),Ot.register("match",(function(t){return new xs(t)})),Gr(window,"RexPlugins.Board.Match",xs);var bs=function(){function Stack(){_classCallCheck(this,Stack),this.items=[]}return _createClass(Stack,[{key:"destroy",value:function destroy(){this.clear(),this.items=void 0}},{key:"pop",value:function pop(){return this.items.length>0?this.items.pop():null}},{key:"push",value:function push(t){return this.items.push(t),this}},{key:"pushMultiple",value:function pushMultiple(t){return this.items.push.apply(this.items,t),t.length=0,this}},{key:"clear",value:function clear(){return this.items.length=0,this}}]),Stack}(),ws=function(){function Node(){_classCallCheck(this,Node),this.preNodes=[],this.manager=void 0}return _createClass(Node,[{key:"reset",value:function reset(t){this.manager=t,this.sn=void 0,this.key=void 0,this.x=void 0,this.y=void 0,this.isTileXYZ=!0,this._px=void 0,this._py=void 0,this.cost=void 0,this.f=0,this.g=0,this.h=0,this.closerH=0,this.visited=!1,this.closed=!1,this.preNodes.length=0}},{key:"destroy",value:function destroy(){this.preNodes.length=0,this.manager=void 0}},{key:"heuristic",value:function heuristic(t,i,o){if(null===i)return 0;var a,u=this.board.getDistance(t,this,!0)*this.pathFinder.weight;if(1===i&&void 0!==o){var d=t.angleTo(o)-this.angleTo(o);a=u+Math.abs(d)}else a=2===i?u+Math.random():u;return a}},{key:"getNeighborNodes",value:function getNeighborNodes(){var t=this.board.getNeighborTileXY(this);this.pathFinder.shuffleNeighbors&&Kr(t);for(var i,o=[],a=0,u=t.length;a<u;a++)i=this.manager.getNode(t[a],!0),o.push(i);return o}},{key:"getCost",value:function getCost(t){return this.pathFinder.cacheCost?void 0===this.cost&&(this.cost=this.pathFinder.getCost(this,t)):this.cost=this.pathFinder.getCost(this,t),this.cost}},{key:"angleTo",value:function angleTo(t){return ie(this.worldX,this.wroldY,t.worldX,t.wroldY)}},{key:"pathFinder",get:function get(){return this.manager.pathFinder}},{key:"board",get:function get(){return this.manager.pathFinder.board}},{key:"worldX",get:function get(){return void 0===this._px&&(this._px=this.board.tileXYToWroldX(this.x,this.y)),this._px}},{key:"wroldY",get:function get(){return void 0===this._py&&(this._py=this.board.tileXYToWroldY(this.x,this.y)),this._py}},{key:"pathCost",get:function get(){return this.g}}]),Node}(),Ss=new bs,Cs=function(){function NodeCache(t){_classCallCheck(this,NodeCache),this.sn=0,this.pool=Ss,this.nodes={},this.pathFinder=t,this.closestNode=null}return _createClass(NodeCache,[{key:"destroy",value:function destroy(){return this.freeAllNodes(),this.pathFinder=null,this.pool=void 0,this}},{key:"getNode",value:function getNode(t,i,o){var a;switch(_typeof(t)){case"number":a=$t(t,i);break;case"string":a=t,o=i;break;default:var u=t;o=i,t=u.x,i=u.y,a=$t(t,i)}if(void 0===o&&(o=!1),this.sn++,!this.nodes.hasOwnProperty(a)){if(!o)return null;var d=this.pool.pop();null===d&&(d=new ws),d.reset(this),d.sn=this.sn,d.key=a,d.x=t,d.y=i,this.nodes[a]=d}return this.nodes[a]}},{key:"freeAllNodes",value:function freeAllNodes(){this.closestNode=null;var t,i=this.nodes,o=this.pool;for(var a in i)(t=i[a]).destroy(),o.push(t),delete i[a];return this.sn=0,this}},{key:"getAllNodes",value:function getAllNodes(){return this.nodes}}]),NodeCache}(),As=function(){function BinaryHeap(t){_classCallCheck(this,BinaryHeap),this.content=[],this.scoreFunction=t}return _createClass(BinaryHeap,[{key:"clear",value:function clear(){this.content.length=0}},{key:"push",value:function push(t){this.content.push(t),this.sinkDown(this.content.length-1)}},{key:"pop",value:function pop(){var t=this.content[0],i=this.content.pop();return this.content.length>0&&(this.content[0]=i,this.bubbleUp(0)),t}},{key:"remove",value:function remove(t){var i=this.content.indexOf(t),o=this.content.pop();i!==this.content.length-1&&(this.content[i]=o,this.scoreFunction(o)<this.scoreFunction(t)?this.sinkDown(i):this.bubbleUp(i))}},{key:"size",value:function size(){return this.content.length}},{key:"rescoreElement",value:function rescoreElement(t){this.sinkDown(this.content.indexOf(t))}},{key:"sinkDown",value:function sinkDown(t){for(var i=this.content[t];t>0;){var o=(t+1>>1)-1,a=this.content[o];if(!(this.scoreFunction(i)<this.scoreFunction(a)))break;this.content[o]=i,this.content[t]=a,t=o}}},{key:"bubbleUp",value:function bubbleUp(t){for(var i=this.content.length,o=this.content[t],a=this.scoreFunction(o);;){var u,d=t+1<<1,b=d-1,S=null;if(b<i){var C=this.content[b];(u=this.scoreFunction(C))<a&&(S=b)}if(d<i){var M=this.content[d];this.scoreFunction(M)<(null===S?a:u)&&(S=d)}if(null===S)break;this.content[t]=this.content[S],this.content[S]=o,t=S}}}]),BinaryHeap}(),Es={AREA_MODE:16,PATH_MODE:0,random:0,diagonal:1,straight:2,line:3,"A*":10,"A*-random":11,"A*-line":12,BLOCKER:null,INFINITY:void 0},Ms=Es.PATH_MODE,_s=Es["A*"],Ps=Es["A*-line"],Rs=Es["A*-random"],ks=Es.BLOCKER,Os=Es.INFINITY,Ls=new As((function(t){return t.f})),Ds=Es.BLOCKER,Is=Es.AREA_MODE,Fs=Es.INFINITY,Bs=Es.random,Ns=Es.diagonal,Ys=Es.straight,Gs=Es.line,Xs=Es["A*"],Us=Es["A*-line"],zs=Es["A*-random"],Vs=Es.PATH_MODE,Ws=Es.INFINITY,Hs={aStarSearch:function AStarSerach(t,i,o,a){void 0===this.nodeManager&&(this.nodeManager=new Cs(this));var u=this.nodeManager;u.freeAllNodes();var d,b=a===Ms,S=this.pathMode===_s||this.pathMode===Ps||this.pathMode===Rs,C=b&&!S,M=b&&S?this.pathMode==_s?0:this.pathMode==Ps?1:this.pathMode==Rs?2:null:null,P=null!==i?u.getNode(i.x,i.y,!0):null,R=u.getNode(t.x,t.y,!0);for(R.h=R.heuristic(P,M),b&&((d=R).closerH=d.h||d.heuristic(P,0)),Ls.push(R);Ls.size()>0;){var O=Ls.pop();if(b&&O===P){d=P;break}O.closed=!0;for(var B,N,Y=O.getNeighborNodes(),G=0,X=Y.length;G<X;++G)if(N=(B=Y[G]).getCost(O),!B.closed&&N!==ks){var U=O.g+N,z=B.visited;o!=Os&&U>o||(!z||U<B.g?(B.visited=!0,B.preNodes.length=0,B.preNodes.push(O),B.h=B.h||B.heuristic(P,M,R),B.g=U,B.f=B.g+B.h,b&&(B.closerH=B.h||B.heuristic(P,0),(B.closerH<d.closerH||B.closerH===d.closerH&&B.g<d.g)&&(d=B)),z?Ls.rescoreElement(B):Ls.push(B)):C&&U==B.g&&B.preNodes.push(O))}}return u.closestNode=b?d:null,Ls.clear(),this},getCost:function GetCost$2(t,i){return this.occupiedTest&&this.board.contains(t.x,t.y,this.chessData.tileXYZ.z)||this.blockerTest&&this.board.hasBlocker(t.x,t.y)?Ds:(this.edgeBlockerTest,"number"==typeof this.costCallback?this.costCallback:(void 0===(o=this.costCallbackScope?this.costCallback.call(this.costCallbackScope,t,i,this):this.costCallback(t,i,this))&&(o=Ds),o));var o},findArea:function FindArea(t,i){if(void 0===i&&(i=[]),null===this.board)return i;if(t!==Fs&&t<=0)return i;var o=this.chessData.tileXYZ,a=o.x,u=o.y;this.aStarSearch(o,null,t,Is);var d,b=this.nodeManager.getAllNodes(),S=[];for(var C in b)(d=b[C]).x===a&&d.y===u||d.closed&&S.push(d);S.sort((function(t,i){var o=t.sn,a=i.sn;return o>a?1:o<a?-1:0}));for(var M=0,P=S.length;M<P;M++)d=S[M],i.push({x:d.x,y:d.y,cost:d.g});return i},getPath:function GetPath$1(t,i){if(void 0===i&&(i=[]),void 0===this.board)return i;var o=this.nodeManager;if(void 0===o)return i;var a=o.getNode(this.chessData.tileXYZ,!1),u=o.getNode(t,!1);if(null===a||null===u)return i;for(var d,b=function GetNodePath(t,i,o){for(var a,u,d,b,S,C=t.board,M=i,P=[];M.preNodes.length>0;)switch(P.push(M),S=M.preNodes.length,o){case Xs:case Us:case zs:M=b=M.preNodes[0];break;case Bs:M=b=1===S?M.preNodes[0]:M.preNodes[Ie(0,S-1)];break;case Ns:for(var R=0;R<S;R++)if(b=M.preNodes[R],(u=C.getNeighborTileDirection(M,b))!==a){a=u;break}M=b;break;case Ys:for(R=0;R<S&&(b=M.preNodes[R],(u=C.getNeighborTileDirection(M,b))!==a);R++);a=u,M=b;break;case Gs:if(void 0===d&&(d=i.angleTo(t)),1===S)M=b=M.preNodes[0],d=i.angleTo(M);else{b=M.preNodes[0];var O,B=Math.abs(i.angleTo(b)-d);for(R=1;R<S;R++)O=M.preNodes[R],Math.abs(i.angleTo(O)-d)<B&&(b=O);M=b}}return P.reverse()}(a,u,this.pathMode),S=0,C=b.length;S<C;S++)d=b[S],i.push({x:d.x,y:d.y,cost:d.g});return i},findPath:function FindPath(t,i,o,a){if(void 0===o&&(o=!0),void 0===a&&(a=[]),null===this.board)return a;if(i!==Ws&&i<=0)return a;var u=this.chessData.tileXYZ;this.aStarSearch(u,t,i,Vs);var d=this.nodeManager,b=o?d.closestNode:d.getNode(t);return null===b?a:this.getPath(b,a)},tileXYToCost:function TileXYToCost(t,i,o){if(void 0===this.nodeManager)return null;var a=this.nodeManager.getNode(t,i);return null===a?null:(void 0===o&&(o=!0),o?a.g:a.cost)}},js=Es.BLOCKER,qs=Es.INFINITY,Zs=function(t){_inherits(PathFinder,t);var i=_createSuper(PathFinder);function PathFinder(t,o){var a;return _classCallCheck(this,PathFinder),Wt(t)&&(o=t,t=void 0),(a=i.call(this,t,{eventEmitter:!1})).setChess(t),a.nodeManager=void 0,a.resetFromJSON(o),a}return _createClass(PathFinder,[{key:"resetFromJSON",value:function resetFromJSON(t){var i=It(t,"costCallback",void 0),o=It(t,"costCallbackScope",void 0);return void 0===i&&(i=It(t,"cost",1)),this.setOccupiedTest(It(t,"occupiedTest",!1)),this.setBlockerTest(It(t,"blockerTest",!1)),this.setEdgeBlockerTest(It(t,"edgeBlockerTest",!1)),this.setCostFunction(i,o),this.setPathMode(It(t,"pathMode",0)),this.setCacheCostMode(It(t,"cacheCost",!0)),this.setWeight(It(t,"weight",10)),this.setShuffleNeighborsMode(It(t,"shuffleNeighbors",!1)),this}},{key:"shutdown",value:function shutdown(t){this.isShutdown||(void 0!==this.nodeManager&&this.nodeManager.destroy(),this.chessData=void 0,_get(_getPrototypeOf(PathFinder.prototype),"shutdown",this).call(this,t))}},{key:"gameObject",get:function get(){return this.parent}},{key:"setChess",value:function setChess(t){return t?(this.chessData=Kt(t),this.parent!==t&&(this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.parent=t,this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this))):(this.parent=void 0,this.chessData=void 0),this}},{key:"setCostFunction",value:function setCostFunction(t,i){return this.costCallback=t,this.costCallbackScope=i,this}},{key:"setPathMode",value:function setPathMode(t){return"string"==typeof t&&(t=Es[t]),this.pathMode=t,this}},{key:"setCacheCostMode",value:function setCacheCostMode(t){return void 0===t&&(t=!0),this.cacheCost=t,this}},{key:"setOccupiedTest",value:function setOccupiedTest(t){return void 0===t&&(t=!0),this.occupiedTest=t,this}},{key:"setBlockerTest",value:function setBlockerTest(t){return void 0===t&&(t=!0),this.blockerTest=t,this}},{key:"setEdgeBlockerTest",value:function setEdgeBlockerTest(t){return void 0===t&&(t=!0),this.edgeBlockerTest=t,this}},{key:"setWeight",value:function setWeight(t){return this.weight=t,this}},{key:"setShuffleNeighborsMode",value:function setShuffleNeighborsMode(t){return void 0===t&&(t=!0),this.shuffleNeighbors=t,this}},{key:"BLOCKER",get:function get(){return js}},{key:"INFINITY",get:function get(){return qs}},{key:"board",get:function get(){return this.chessData.board}}]),PathFinder}(zt);Object.assign(Zs.prototype,Hs),Ot.register("pathFinder",(function(t,i){return new Zs(t,i)})),Gr(window,"RexPlugins.Board.PathFinder",Zs);var Ks={BLOCKER:null,INFINITY:void 0},Js=Ks.BLOCKER,Qs=Ks.INFINITY,$s=Ks.INFINITY,to=.001,eo=function drawLine(t,i,o,a,u,d){t&&void 0!==i&&t.lineStyle(1,i,1).lineBetween(o,a,u,d)},io=[],no=[],ro=[],so={preTest:function PreTest(t,i){if(this.occupiedTest||this.blockerTest||this.edgeBlockerTest)for(var o,a=this.chessData.tileXYZ.z,u=1,d=t.length;u<d;u++){if(o=t[u],this.occupiedTest&&this.board.contains(o.x,o.y,a))return!1;if(this.blockerTest&&this.board.hasBlocker(o.x,o.y))return!1;this.edgeBlockerTest}return!this.preTestCallback||(this.preTestCallbackScope?this.preTestCallback.call(this.preTestCallbackScope,t,i,this):this.preTestCallback(t,i,this))},getCost:function GetCost$1(t,i){return"number"==typeof this.costCallback?this.costCallback:this.costCallbackScope?this.costCallback.call(this.costCallbackScope,t,this,i):this.costCallback(t,this,i)},isInCone:function IsInCone(t){if(void 0===this.cone)return!0;var i=this.board,o=this.chessData.tileXYZ;return 0===this.coneMode?i.isDirectionInCone(o,t,this.face,this.cone):i.isAngleInCone(o,t,this.faceAngle,this.coneRad)},isPathVisible:function IsPathVisible(t,i){if(!1===this.preTest(t,i))return!1;if(void 0===this.costCallback)return!0;for(var o,a,u=this.chessData.tileXYZ,d=!1,b=1,S=t.length;b<S;b++)if(o=t[b],!ce(u,o)){if(d)return!1;if((a=this.getCost(o,t))!==Js){if(i!==Qs&&(i-=a)<0)return!1}else d=!0}return!0},isInLOS:function IsInLOS(t,i,o){if(i!==$s&&i<=0)return!1;var a=this.board,u=a.chessToTileXYZ(t);if(!this.isInCone(u))return!1;void 0===o&&(o=this.chessData.tileXYZ),this.debugLog&&console.log("Visible test from ("+o.x+","+o.y+") to ("+u.x+","+u.y+")");var d,b,S,C=a.tileXYToWorldXY(o.x,o.y,!0),M=C.x,P=C.y,R=(C=a.tileXYToWorldXY(u.x,u.y,!0)).x,O=C.y,B=ie(M,P,R,O);B+=Math.PI/2;var N=M+(d=to*Math.cos(B)),Y=P+(b=to*Math.sin(B)),G=R+d,X=O+b;if(a.lineToTileXYArray(N,Y,G,X,io),this.debugLog&&console.log("Line 0: "+JSON.stringify(io)),S=this.isPathVisible(io,i))return io.length=0,eo(this.debugGraphics,this.debugVisibleLineColor,M,P,R,O),!0;B+=Math.PI;N=M+(d=to*Math.cos(B)),Y=P+(b=to*Math.sin(B)),G=R+d,X=O+b;return a.lineToTileXYArray(N,Y,G,X,no),this.debugLog&&console.log("Line 1: "+JSON.stringify(no)),function AreTileXYArrayEqual(t,i){if(t.length!==i.length)return!1;for(var o=0,a=t.length;o<a;o++)if(!ce(t[o],i[o]))return!1;return!0}(io,no)||(S=this.isPathVisible(no,i)),io.length=0,no.length=0,eo(this.debugGraphics,S?this.debugVisibleLineColor:this.debugInvisibleLineColor,M,P,R,O),S},LOS:function LOS(t,i,a,u){if(o(t)){Wt(i)?(u=a,a=i,i=void 0):o(i)&&(u=i,i=void 0,a=void 0),o(a)&&(u=a,a=void 0),void 0===u&&(u=[]);for(var d=0,b=t.length;d<b;d++)S=t[d],this.isInLOS(S,i,a)&&u.push(S);return u}var S=t;return this.isInLOS(S,i,a)},findFOV:function FindFOV(t,i,a){Wt(t)?(a=i,i=t,t=void 0):o(t)&&(a=t,i=void 0,t=void 0),o(i)&&(a=i,i=void 0),void 0===a&&(a=[]);var u,d,b=this.board,S=this.chessData.tileXYZ,C=1;do{u=!1,b.ringToTileXYArray(S,C,ro);for(var M=0,P=ro.length;M<P;M++)d=ro[M],this.isInLOS(d,t,i)&&(u=!0,a.push(d));C++,ro.length=0}while(u);return a}},oo=Ks.BLOCKER,ao=Ks.INFINITY,ho=function(t){_inherits(FieldOfView,t);var i=_createSuper(FieldOfView);function FieldOfView(t,o){var a;return _classCallCheck(this,FieldOfView),(a=i.call(this,t,{eventEmitter:!1})).chessData=Kt(t),a.resetFromJSON(o),a}return _createClass(FieldOfView,[{key:"resetFromJSON",value:function resetFromJSON(t){var i=It(t,"occupiedTest",!1),o=It(t,"blockerTest",!1),a=It(t,"edgeBlockerTest",!1),u=It(t,"preTestCallback",void 0),d=It(t,"preTestCallbackScope",void 0),b=It(t,"costCallback",void 0),S=It(t,"costCallbackScope",void 0);return void 0===b&&(b=It(t,"cost",void 0)),this.setFace(It(t,"face",0)),this.setConeMode(It(t,"coneMode",0)),this.setCone(It(t,"cone",void 0)),this.setOccupiedTest(i),this.setBlockerTest(o),this.setEdgeBlockerTest(a),this.setPreTestFunction(u,d),this.setCostFunction(b,S),this.setDebugGraphics(It(t,"debug.graphics",void 0)),this.setDebugLineColor(It(t,"debug.visibleLineColor",65280),It(t,"debug.invisibleLineColor",16711680)),this.setDebugLog(It(t,"debug.log",!1)),this}},{key:"shutdown",value:function shutdown(t){this.isShutdown||(this.debugGraphics=void 0,this.chessData=void 0,_get(_getPrototypeOf(FieldOfView.prototype),"shutdown",this).call(this,t))}},{key:"face",get:function get(){return this._face},set:function set(t){if(t=this.board.grid.directionNormalize(t),this._face=t,0===this.coneMode);else{var i=this.board.angleToward(this.chessData.tileXYZ,t);this.faceAngle=ne(i)}}},{key:"setFace",value:function setFace(t){return this.face=t,this}},{key:"cone",get:function get(){return this._cone},set:function set(t){this._cone=t,void 0!==t&&(0===this.coneMode||(this.coneRad=On(t)))}},{key:"setConeMode",value:function setConeMode(t){return"string"==typeof t&&(t=lo[t]),this.coneMode=t,this}},{key:"setCone",value:function setCone(t){return this.cone=t,this}},{key:"setOccupiedTest",value:function setOccupiedTest(t){return void 0===t&&(t=!0),this.occupiedTest=t,this}},{key:"setBlockerTest",value:function setBlockerTest(t){return void 0===t&&(t=!0),this.blockerTest=t,this}},{key:"setEdgeBlockerTest",value:function setEdgeBlockerTest(t){return void 0===t&&(t=!0),this.edgeBlockerTest=t,this}},{key:"setCostFunction",value:function setCostFunction(t,i){return this.costCallback=t,this.costCallbackScope=i,this}},{key:"setPreTestFunction",value:function setPreTestFunction(t,i){return this.preTestCallback=t,this.preTestCallbackScope=i,this}},{key:"setDebugGraphics",value:function setDebugGraphics(t){return this.debugGraphics=t,this}},{key:"setDebugLineColor",value:function setDebugLineColor(t,i){return this.debugVisibleLineColor=t,this.debugInvisibleLineColor=i,this}},{key:"setDebugLog",value:function setDebugLog(t){return void 0===t&&(t=!0),this.debugLog=t,this}},{key:"clearDebugGraphics",value:function clearDebugGraphics(){return this.debugGraphics&&this.debugGraphics.clear(),this}},{key:"BLOCKER",get:function get(){return oo}},{key:"INFINITY",get:function get(){return ao}},{key:"board",get:function get(){return this.chessData.board}}]),FieldOfView}(zt),lo={direction:0,angle:1};Object.assign(ho.prototype,so),Ot.register("fieldOfView",(function(t,i){return new ho(t,i)})),Gr(window,"RexPlugins.Board.FieldOfView",ho);var uo=function CreateTileData(t,i,o){return{x:t,y:i,direction:o}},co=-1,fo=co,po={getPath:function GetPath(t,i){if(void 0===i&&(i=[]),null===this.board)return i;for(var o,a,u=this.chessData.tileXYZ,d=uo(u.x,u.y,this.face);t>0&&null!==(o=this.getNextTile(d,this.preTileXY));)(a=this.getCost(o,d))===fo&&(a=t),o.cost=a,t>=a&&i.push(o),t-=a,this.preTileXY=d,d=o;for(var b=i.length-1;b>=0&&0===i[b].cost;b--)i.length=b;return i},getNextTile:function GetNextTile(t,i){for(var o,a,u=this.board,d=u.grid.allDirections,b=null,S=null,C=[],M=null,P=0,R=d.length;P<R;P++)null!==(o=u.getNeighborTileXY(t,d[P],!0))&&u.contains(o.x,o.y,this.pathTileZ)&&(M=uo(o.x,o.y,d[P]),d[P]===t.direction&&(b=M),void 0!==i&&ce(o,i)?S=M:C.push(M));if(null===S&&0===C.length)a=null;else if(null===S&&1===C.length)a=C[0];else if(null!==S&&0===C.length)a=S;else if(1===this.pickMode)null!==S&&C.push(S),a=Fe(C);else a=null!==b?b:Fe(C);return a},getCost:function GetCost(t,i){return"number"==typeof this.costCallback?this.costCallback:this.costCallbackScope?this.costCallback.call(this.costCallbackScope,t,i,this):this.costCallback(t,i,this)}},go=null,vo=co,mo=function(t){_inherits(Monopoly,t);var i=_createSuper(Monopoly);function Monopoly(t,o){var a;return _classCallCheck(this,Monopoly),(a=i.call(this,t,{eventEmitter:!1})).chessData=Kt(t),a.resetFromJSON(o),a}return _createClass(Monopoly,[{key:"resetFromJSON",value:function resetFromJSON(t){this.preTileXY=It(t,"preTileXY",void 0);var i=It(t,"costCallback",void 0),o=It(t,"costCallbackScope",void 0);return void 0===i&&(i=It(t,"cost",1)),this.setFace(It(t,"face",0)),this.setPathMode(It(t,"pathMode",0)),this.setPathTileZ(It(t,"pathTileZ",0)),this.setCostFunction(i,o),this}},{key:"shutdown",value:function shutdown(t){this.isShutdown||(this.chessData=void 0,_get(_getPrototypeOf(Monopoly.prototype),"shutdown",this).call(this,t))}},{key:"setFace",value:function setFace(t){return t=this.board.grid.directionNormalize(t),this.face=t,this}},{key:"setPathMode",value:function setPathMode(t){return"string"==typeof t&&(t=yo[t]),this.pathMode=t,this}},{key:"setCostFunction",value:function setCostFunction(t,i){return this.costCallback=t,this.costCallbackScope=i,this}},{key:"setPathTileZ",value:function setPathTileZ(t){return void 0===t&&(t=!0),this.pathTileZ=t,this}},{key:"BLOCKER",get:function get(){return go}},{key:"STOP",get:function get(){return vo}},{key:"board",get:function get(){return this.chessData.board}}]),Monopoly}(zt);Object.assign(mo.prototype,po);var yo={forward:0,random:1};Ot.register("monopoly",(function(t,i){return new mo(t,i)})),Gr(window,"RexPlugins.Board.Monopoly",mo);var xo=Phaser.GameObjects.Zone,To=Phaser.Utils.Array.Add,bo=Phaser.Utils.Array.Remove,wo=function(t){_inherits(Base,t);var i=_createSuper(Base);function Base(t,o,a,u,d){var b;return _classCallCheck(this,Base),void 0===o&&(o=0),void 0===a&&(a=0),void 0===u&&(u=1),void 0===d&&(d=1),(b=i.call(this,t,o,a,u,d)).children=[],b}return _createClass(Base,[{key:"destroy",value:function destroy(t){if(this.scene){if(t)for(var i,o=this.children.length-1;o>=0;o--)(i=this.children[o]).parentContainer||i.displayList||i.destroy(t);this.clear(!t),_get(_getPrototypeOf(Base.prototype),"destroy",this).call(this,t)}}},{key:"contains",value:function contains(t){return-1!==this.children.indexOf(t)}},{key:"add",value:function add(t){var i=this;return To(this.children,t,0,(function(t){t.once("destroy",i.onChildDestroy,i)}),this),this}},{key:"remove",value:function remove(t,i){var o=this;return bo(this.children,t,(function(t){t.off("destroy",o.onChildDestroy,o),i&&t.destroy()})),this}},{key:"onChildDestroy",value:function onChildDestroy(t,i){this.remove(t,!1)}},{key:"clear",value:function clear(t){for(var i,o=0,a=this.children.length;o<a;o++)(i=this.children[o]).off("destroy",this.onChildDestroy,this),t&&i.destroy();return this.children.length=0,this}}]),Base}(xo),So=Phaser.GameObjects.Components;Phaser.Class.mixin(wo,[So.Alpha,So.Flip]);var Co=function GetParent(t,i){var o;if(void 0===i)t.hasOwnProperty("rexContainer")&&(o=t.rexContainer.parent);else for(o=Co(t);o&&o.name!==i;)o=Co(o);return o},Ao=Phaser.Math.DegToRad,Eo=Phaser.Math.RadToDeg,Mo=function GetLocalState(t){if(!t.hasOwnProperty("rexContainer")){var i={parent:null,self:null,x:0,y:0,syncPosition:!0,rotation:0,syncRotation:!0,scaleX:0,scaleY:0,syncScale:!0,alpha:0,syncAlpha:!0,visible:!0,active:!0};Object.defineProperty(i,"angle",{get:function get(){return Eo(this.rotation)},set:function set(t){this.rotation=Ao(t)}}),Object.defineProperty(i,"displayWidth",{get:function get(){return t.width*this.scaleX},set:function set(i){this.scaleX=i/t.width}}),Object.defineProperty(i,"displayHeight",{get:function get(){return t.height*this.scaleY},set:function set(i){this.scaleY=i/t.height}}),t.rexContainer=i}return t.rexContainer},_o={setParent:function setParent(t,i){void 0===i&&(i=this);var o=Mo(t);return i?(o.parent=i,o.self=t):(o.parent=null,o.self=null),this},getParent:function getParent(t,i){return"string"==typeof t&&(i=t,t=void 0),void 0===t&&(t=this),Co(t,i)},getTopmostParent:function getTopmostParent(t){return void 0===t&&(t=this),function GetTopmostParent(t){for(var i=Co(t);i;)t=i,i=Co(i);return t}(t)}},Po=Phaser.Utils.Objects.GetValue,Ro=wo.prototype.add,ko=function Add(t,i){this.setParent(t);var o=Mo(t);return Lo(o,i),this.resetChildState(t).updateChildVisible(t).updateChildActive(t).updateChildScrollFactor(t).updateChildMask(t),Ro.call(this,t),this},Oo=function AddLocal(t,i){this.setParent(t);var o=Mo(t);return Lo(o,i),o.x=t.x,o.y=t.y,o.rotation=t.rotation,o.scaleX=t.scaleX,o.scaleY=t.scaleY,o.alpha=t.alpha,o.visible=t.visible,o.active=t.active,this.updateChildPosition(t).updateChildAlpha(t).updateChildVisible(t).updateChildActive(t).updateChildScrollFactor(t).updateChildMask(t),Ro.call(this,t),this},Lo=function SetupSyncFlags(t,i){t.syncPosition=Po(i,"syncPosition",!0),t.syncRotation=Po(i,"syncRotation",!0),t.syncScale=Po(i,"syncScale",!0),t.syncAlpha=Po(i,"syncAlpha",!0)},Do={add:function add(t){return Array.isArray(t)?this.addMultiple(t):ko.call(this,t),this},pin:function pin(t,i){return Array.isArray(t)?this.addMultiple(t,i):ko.call(this,t,i),this},addMultiple:function addMultiple(t){for(var i=0,o=t.length;i<o;i++)ko.call(this,t[i]);return this},addLocal:function addLocal(t){return Array.isArray(t)?this.addMultiple(t):Oo.call(this,t),this},pinLocal:function pinLocal(t,i){return Array.isArray(t)?this.addMultiple(t,i):Oo.call(this,t,i),this},addLocalMultiple:function addLocalMultiple(t){for(var i=0,o=t.length;i<o;i++)Oo.call(this,t[i]);return this}},Io=wo.prototype.remove,Fo=wo.prototype.clear,Bo={remove:function remove(t,i){return Co(t)!==this||(this.setParent(t,null),Io.call(this,t,i)),this},clear:function clear(t){for(var i=0,o=this.children.length;i<o;i++)this.setParent(this.children[i],null);return Fo.call(this,t),this}},No={getLocalState:function getLocalState(t){return Mo(t)},resetChildState:function resetChildState(t){return this.resetChildPositionState(t).resetChildVisibleState(t).resetChildAlphaState(t).resetChildActiveState(t),this},resetChildrenState:function resetChildrenState(t){for(var i=0,o=t.length;i<o;i++)this.resetChildState(t[i]);return this},syncProperties:function syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}},Yo=Phaser.Math.RotateAround,Go={worldToLocal:function worldToLocal(t){return t.x-=this.x,t.y-=this.y,Yo(t,0,0,-this.rotation),t.x/=this.scaleX,t.y/=this.scaleY,t},localToWorld:function localToWorld(t){return t.x*=this.scaleX,t.y*=this.scaleY,Yo(t,0,0,this.rotation),t.x+=this.x,t.y+=this.y,t}},Xo=function GetScale(t,i){return t===i?1:t/i},Uo={updateChildPosition:function updateChildPosition(t){t.isRexContainerLite&&(t.syncChildrenEnable=!1);var i=Mo(t),o=i.parent;return i.syncPosition&&(t.x=i.x,t.y=i.y,o.localToWorld(t)),i.syncRotation&&(t.rotation=i.rotation+o.rotation),i.syncScale&&(t.scaleX=i.scaleX*o.scaleX,t.scaleY=i.scaleY*o.scaleY),t.isRexContainerLite&&(t.syncChildrenEnable=!0,t.syncPosition()),this},syncPosition:function syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState:function resetChildPositionState(t){var i=Mo(t),o=i.parent;return i.x=t.x,i.y=t.y,o.worldToLocal(i),i.scaleX=Xo(t.scaleX,o.scaleX),i.scaleY=Xo(t.scaleY,o.scaleY),i.rotation=t.rotation-o.rotation,this},setChildPosition:function setChildPosition(t,i,o){return t.x=i,t.y=o,this.resetChildPositionState(t),this},setChildLocalPosition:function setChildLocalPosition(t,i,o){var a=Mo(t);return a.x=i,a.y=o,this.updateChildPosition(t),this},resetLocalPositionState:function resetLocalPositionState(){var t=Mo(this).parent;return t&&t.resetChildPositionState(this),this}},zo=Phaser.Math.DegToRad,Vo={updateChildRotation:function updateChildRotation(t){var i=Mo(t),o=i.parent;return i.syncRotation&&(t.rotation=o.rotation+i.rotation),this},syncRotation:function syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState:function resetChildRotationState(t){var i=Mo(t),o=i.parent;return i.rotation=t.rotation-o.rotation,this},setChildRotation:function setChildRotation(t,i){return t.rotation=i,this.resetChildRotationState(t),this},setChildAngle:function setChildAngle(t,i){return t.angle=i,this.resetChildRotationState(t),this},setChildLocalRotation:function setChildLocalRotation(t,i){return Mo(t).rotation=i,this.updateChildRotation(t),this},setChildLocalAngle:function setChildLocalAngle(t,i){return Mo(t).rotation=zo(i),this.updateChildRotation(t),this},resetLocalRotationState:function resetLocalRotationState(){var t=Mo(this).parent;return t&&t.resetChildRotationState(this),this}},Wo={updateChildScale:function updateChildScale(t){var i=Mo(t),o=i.parent;return i.syncScale&&(t.scaleX=o.scaleX*i.scaleX,t.scaleY=o.scaleY*i.scaleY),this},syncScale:function syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState:function resetChildScaleState(t){var i=Mo(t),o=i.parent;return i.scaleX=Xo(t.scaleX,o.scaleX),i.scaleY=Xo(t.scaleY,o.scaleY),this},setChildScale:function setChildScale(t,i,o){return void 0===o&&(o=i),t.scaleX=i,t.scaleY=o,this.resetChildScaleState(t),this},setChildLocalScale:function setChildLocalScale(t,i,o){void 0===o&&(o=i);var a=Mo(t);return a.scaleX=i,a.scaleY=o,this.updateChildScale(t),this},setChildDisplaySize:function setChildDisplaySize(t,i,o){return t.setDisplaySize(i,o),this.resetChildScaleState(t),this},resetLocalScaleState:function resetLocalScaleState(){var t=Mo(this).parent;return t&&t.resetChildScaleState(this),this}},Ho={updateChildVisible:function updateChildVisible(t){var i=Mo(t),o=i.parent,a=!i.hasOwnProperty("maskVisible")||i.maskVisible;return t.visible=o.visible&&i.visible&&a,this},syncVisible:function syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState:function resetChildVisibleState(t){var i=Mo(t);return i.hasOwnProperty("maskVisible")&&delete i.maskVisible,i.visible=t.visible,this},setChildVisible:function setChildVisible(t,i){return this.setChildLocalVisible(t,i),this},setChildLocalVisible:function setChildLocalVisible(t,i){return void 0===i&&(i=!0),Mo(t).visible=i,this.updateChildVisible(t),this},setChildMaskVisible:function setChildMaskVisible(t,i){return void 0===i&&(i=!0),Mo(t).maskVisible=i,this.updateChildVisible(t),this},resetLocalVisibleState:function resetLocalVisibleState(){var t=Mo(this).parent;return t&&t.resetChildVisibleState(this),this}},jo={updateChildAlpha:function updateChildAlpha(t){var i=Mo(t),o=i.parent;return i.syncAlpha&&(t.alpha=o.alpha*i.alpha),this},syncAlpha:function syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState:function resetChildAlphaState(t){var i=Mo(t),o=i.parent;return i.alpha=Xo(t.alpha,o.alpha),this},setChildAlpha:function setChildAlpha(t,i){return t.alpha=i,this.resetChildAlphaState(t),this},setChildLocalAlpha:function setChildLocalAlpha(t,i){return Mo(t).alpha=i,this.updateChildAlpha(t),this},resetLocalAlphaState:function resetLocalAlphaState(){var t=Mo(this).parent;return t&&t.resetChildAlphaState(this),this}},qo={updateChildActive:function updateChildActive(t){var i=Mo(t),o=i.parent;return t.active=o.active&&i.active,this},syncActive:function syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState:function resetChildActiveState(t){return Mo(t).active=t.active,this},setChildActive:function setChildActive(t,i){return t.active=i,this.resetChildActiveState(t),this},setChildLocalActive:function setChildLocalActive(t,i){return void 0===i&&(i=!0),Mo(t).active=i,this.updateChildActive(t),this},resetLocalActiveState:function resetLocalActiveState(){var t=Mo(this).parent;return t&&t.resetChildActiveState(this),this}},Zo={updateChildScrollFactor:function updateChildScrollFactor(t){var i=Mo(t).parent;return t.setScrollFactor(i.scrollFactorX,i.scrollFactorY),this},syncScrollFactor:function syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},Ko={updateChildMask:function updateChildMask(t){return null==this.mask||(this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask)!==t&&(t.mask=this.mask),this},syncMask:function syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask:function setMask(t){return this.mask=t,this},clearMask:function clearMask(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this}},Jo=function SortGameObjectsByDepth(t,i){if(0===t.length)return t;void 0===i&&(i=!1);var o=t[0].scene.sys.displayList;return o.depthSort(),i?t.sort((function(t,i){return o.getIndex(i)-o.getIndex(t)})):t.sort((function(t,i){return o.getIndex(t)-o.getIndex(i)})),t},Qo={setDepth:function setDepth(t,i){if(this.depth=t,!i&&this.children)for(var o=this.getAllChildren(),a=0,u=o.length;a<u;a++)o[a].depth=t;return this},swapDepth:function swapDepth(t){var i=this.depth,o=t.depth;return this.setDepth(o),t.setDepth(i),this},incDepth:function incDepth(t){if(this.depth+=t,this.children)for(var i=this.getAllChildren(),o=0,a=i.length;o<a;o++)i[o].depth+=t;return this},moveDepthBelow:function moveDepthBelow(t){var i=t.scene.children,o=this.getAllChildren([this]);Jo(o);for(var a=0,u=o.length;a<u;a++){var d=o[a];if(i.exists(d)){i.moveBelow(t,d);break}}return this},moveDepthAbove:function moveDepthAbove(t){var i=t.scene.children,o=this.getAllChildren([this]);Jo(o,!0);for(var a=0,u=o.length;a<u;a++){var d=o[a];if(i.exists(d)){i.moveAbove(t,d);break}}return this}},$o=function DepthFirstSearch(t,i){if(!i(t)&&t.isRexContainerLite)for(var o=t.children,a=0,u=o.length;a<u;a++)DepthFirstSearch(o[a],i)},ta=function BreadthFirstSearch(t,i){for(var o=[t];o.length>0;){var a=o.shift();!i(a)&&a.isRexContainerLite&&o.push.apply(o,_toConsumableArray2(a.children))}},ea=Phaser.Utils.Array,ia={getChildren:function getChildren(t){if(t)for(var i=0,o=this.children.length;i<o;i++)t.push(this.children[i]);else t=this.children;return t},getAllChildren:function getAllChildren(t){void 0===t&&(t=[]);var i=this;return ta(i,(function(o){o!==i&&t.push(o)})),t},getAllVisibleChildren:function getAllVisibleChildren(t){void 0===t&&(t=[]);var i=this;return ta(i,(function(o){if(o!==i)return!o.visible||void t.push(o)})),t},bfs:function bfs(t,i){return void 0===i&&(i=this),ta(i,t),this},dfs:function dfs(t,i){return void 0===i&&(i=this),$o(i,t),this},contains:function contains(t){var i=Co(t);return!!i&&(i===this||this.contains(i))},getByName:function getByName(t,i){if(i){for(var o,a,u=[this];u.length;)for(var d=0,b=(o=u.shift()).children.length;d<b;d++){if((a=o.children[d]).name===t)return a;a.isRexContainerLite&&u.push(a)}return null}return ea.GetFirst(this.children,"name",t)},getRandom:function getRandom(t,i){return ea.GetRandom(this.children,t,i)},getFirst:function getFirst(t,i,o,a){return ea.GetFirstElement(this.children,t,i,o,a)},getAll:function getAll(t,i,o,a){return ea.GetAll(this.children,t,i,o,a)},count:function count(t,i,o,a){return ea.CountAllMatching(this.children,t,i,o,a)},swap:function swap(t,i){return ea.Swap(this.children,t,i),this},setAll:function setAll(t,i,o,a){return ea.SetAll(this.children,t,i,o,a),this}},na=function GetLocalStates(t){for(var i=[],o=0,a=t.length;o<a;o++){var u=t[o];u.hasOwnProperty("rexContainer")&&i.push(u.rexContainer)}return i},ra=function UpdateChild(t,i,o){if(o.parent){var a=o.parent,u=o.self;switch(i){case"x":case"y":a.updateChildPosition(u);break;case"angle":case"rotation":a.updateChildRotation(u);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":a.updateChildScale(u);break;case"alpha":a.updateChildAlpha(u);break;default:a.updateChildPosition(u),a.updateChildRotation(u),a.updateChildScale(u),a.updateChildAlpha(u)}}else t.remove()},sa={tweenChild:function tweenChild(t){var i=t.targets;Array.isArray(i)||(i=[i]);var o=this.scene||function GetScene(t){for(var i=0,o=t.length;i<o;i++){var a=t[i].scene;if(a)return a}return null}(i);if(o){t.targets=na(i);var a=o.tweens.add(t);return a.on("update",ra),a}},createTweenChildConfig:function createTweenChildConfig(t){var i=t.targets;i&&(Array.isArray(i)||(i=[i]),t.targets=na(i));var o=t.onUpdate;return t.onUpdate=function(t,i){o&&o(t,i),ra(t,void 0,i)},t},tween:function tween(t){var i=this.scene;return t.targets||(t.targets=this),i.tweens.add(t)},timelineChild:function timelineChild(t){var i=t.targets;i&&(Array.isArray(i)||(i=[i]),t.targets=na(i));for(var o=t.tweens,a=0,u=o.length;a<u;a++)o[a]=this.createTweenChildConfig(o[a]);return this.scene.tweens.timeline(t)}},oa=function AddToLayer(t){var i=this.getAllChildren([this]);return Jo(i),t.add(i),this},aa={addToLayer:oa,addToContainer:oa},ha=Phaser.Math.RotateAround,la={changeOrigin:function ChangeOrigin(t,i){this.syncChildrenEnable=!1,function ChangeOrigin$1(t,i,o){void 0===o&&(o=i);var a={x:(i-t.originX)*t.displayWidth,y:(o-t.originY)*t.displayHeight};ha(a,0,0,t.rotation),t.originX=i,t.originY=o,t.x=t.x+a.x,t.y=t.y+a.y}(this,t,i),this.syncChildrenEnable=!0;for(var o=this.getAllChildren(),a=0,u=o.length;a<u;a++)this.resetChildPositionState(o[a]);return this}};Object.assign(la,_o,Do,Bo,No,Go,Uo,Vo,Wo,Ho,jo,qo,Zo,Ko,Qo,ia,sa,aa);var ua=function(t){_inherits(ContainerLite,t);var i=_createSuper(ContainerLite);function ContainerLite(t,o,a,u,d,b){var S;return _classCallCheck(this,ContainerLite),(S=i.call(this,t,o,a,u,d)).type="rexContainerLite",S.isRexContainerLite=!0,S.syncChildrenEnable=!0,S._active=!0,S._mask=null,S._scrollFactorX=1,S._scrollFactorY=1,b&&S.add(b),S}return _createClass(ContainerLite,[{key:"destroy",value:function destroy(t){this.scene&&(this.syncChildrenEnable=!1,_get(_getPrototypeOf(ContainerLite.prototype),"destroy",this).call(this,t))}},{key:"resize",value:function resize(t,i){return this.setSize(t,i),this}},{key:"x",get:function get(){return this._x},set:function set(t){this._x!==t&&(this._x=t,this.syncPosition())}},{key:"y",get:function get(){return this._y},set:function set(t){this._y!==t&&(this._y=t,this.syncPosition())}},{key:"rotation",get:function get(){return _get(_getPrototypeOf(ContainerLite.prototype),"rotation",this)},set:function set(t){this.rotation!==t&&(_set(_getPrototypeOf(ContainerLite.prototype),"rotation",t,this,!0),this.syncPosition())}},{key:"scaleX",get:function get(){return _get(_getPrototypeOf(ContainerLite.prototype),"scaleX",this)},set:function set(t){this.scaleX!==t&&(_set(_getPrototypeOf(ContainerLite.prototype),"scaleX",t,this,!0),this.syncPosition())}},{key:"scaleY",get:function get(){return _get(_getPrototypeOf(ContainerLite.prototype),"scaleY",this)},set:function set(t){this.scaleY!==t&&(_set(_getPrototypeOf(ContainerLite.prototype),"scaleY",t,this,!0),this.syncPosition())}},{key:"scale",get:function get(){return _get(_getPrototypeOf(ContainerLite.prototype),"scale",this)},set:function set(t){this.scale!==t&&(_set(_getPrototypeOf(ContainerLite.prototype),"scale",t,this,!0),this.syncPosition())}},{key:"visible",get:function get(){return _get(_getPrototypeOf(ContainerLite.prototype),"visible",this)},set:function set(t){_get(_getPrototypeOf(ContainerLite.prototype),"visible",this)!==t&&(_set(_getPrototypeOf(ContainerLite.prototype),"visible",t,this,!0),this.syncVisible())}},{key:"alpha",get:function get(){return _get(_getPrototypeOf(ContainerLite.prototype),"alpha",this)},set:function set(t){_get(_getPrototypeOf(ContainerLite.prototype),"alpha",this)!==t&&(_set(_getPrototypeOf(ContainerLite.prototype),"alpha",t,this,!0),this.syncAlpha())}},{key:"active",get:function get(){return this._active},set:function set(t){this._active!==t&&(this._active=t,this.syncActive())}},{key:"mask",get:function get(){return this._mask},set:function set(t){this._mask!==t&&(this._mask=t,this.syncMask())}},{key:"scrollFactorX",get:function get(){return this._scrollFactorX},set:function set(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}},{key:"scrollFactorY",get:function get(){return this._scrollFactorY},set:function set(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}},{key:"list",get:function get(){return this.children}}],[{key:"GetParent",value:function GetParent(t){return Co(t)}}]),ContainerLite}(wo);Object.assign(ua.prototype,la);var ca={x:0,y:0,z:0},da=function OnPointerDown(t){this.input.enable&&(t.isDown&&(null===this.input.pointer&&(this.input.pointer=t),fa.call(this,t)&&pa.call(this,t)))},fa=function OnTouchTileStart(t){var i=this.grid;i.saveOrigin(),i.setOriginPosition(this.x,this.y);var o=this.board.worldXYToTileXY(t.x,t.y,!0),a=o.x,u=o.y;i.restoreOrigin(),this.input.tilePosition.x=a,this.input.tilePosition.y=u;var d=this.board.tileXYToChessArray(a,u,ga),b=d.length>0;if(b){for(var S,C=0,M=d.length;C<M;C++)(S=d[C]).emit&&S.emit("miniboard.pointerdown",t),this.emit("gameobjectdown",t,S);this.emit("pointerdown",t,this)}return ga.length=0,b},pa=function OnDragStart(t){var i=this.input.drag;if(1!==i.state){var o=i.position;o.x=t.x-this.x,o.y=t.y-this.y,i.state=1,this.emit("dragstart",t,o.x,o.y)}},ga=[],va=function DragEnd(t){var i=this.input.drag;if(0!==i.state){void 0===t&&(t=this.input.pointer);var o=i.position,a=t.x-o.x,u=t.y-o.y;return i.state=0,this.emit("dragend",t,a,u),this}},ma=function OnPointerUp(t){this.input.enable&&(ya.call(this,t),va.call(this,t),this.input.pointer===t&&(this.input.pointer=null))},ya=function OnTouchTileEnd(t){var i=this.grid;i.saveOrigin(),i.setOriginPosition(this.x,this.y);var o=this.board.worldXYToTileXY(t.x,t.y,!0),a=o.x,u=o.y;i.restoreOrigin(),this.input.tilePosition.x=a,this.input.tilePosition.y=u;var d=this.board.tileXYToChessArray(a,u,xa),b=d.length>0;if(b){for(var S,C=0,M=d.length;C<M;C++)(S=d[C]).emit&&S.emit("miniboard.pointerup",t),this.emit("gameobjectup",t,S);this.emit("pointerup",t,this)}return xa.length=0,b},xa=[],Ta=function OnPointerMove(t){this.input.enable&&(ba.call(this,t),wa.call(this,t))},ba=function OnTouchTileMove(t){var i=this.grid;i.saveOrigin(),i.setOriginPosition(this.x,this.y);var o=this.board.worldXYToTileXY(t.x,t.y,!0),a=o.x,u=o.y;if(i.restoreOrigin(),this.input.tilePosition.x!==a||this.input.tilePosition.y!==u){this.input.tilePosition.x=a,this.input.tilePosition.y=u;var d=this.board.tileXYToChessArray(a,u,Sa),b=d.length>0;if(b){for(var S,C=0,M=d.length;C<M;C++)(S=d[C]).emit&&S.emit("miniboard.pointermove",t),this.emit("gameobjectmove",t,S);this.emit("pointermove",t,this)}else this.input.pointer===t&&(this.input.pointer=null);Sa.length=0,0===this.input.drag.state&&(this.input.pointer===t?b||(this.input.pointer=null):null===this.input.pointer&&(this.input.pointer=t))}},wa=function OnDrag(t){var i=this.input.drag;if(0!==i.state){var o=i.position,a=t.x-o.x,u=t.y-o.y;this.emit("drag",t,a,u)}},Sa=[],Ca=function Mirror$1(t,i,o){var a,u;for(var d in void 0===t?t=1:"string"==typeof t&&(t=Aa[t]),void 0===i&&(i=this.tileXYZMap),void 0===o&&(o={}),i)a=i[d],(u=this.board.mirror(a,t)).z=a.z,o[d]=u;return o},Aa={x:1,y:2,"x&y":3},Ea=function ResetChessTileXYZ(t){var i;for(var o in this.removeAllChess(),t)i=t[o],o=parseInt(o),this.addChess(o,i.x,i.y,i.z,!1);return this},Ma=function Rotate$2(t,i,o){var a,u;for(var d in void 0===t&&(t=0),void 0===i&&(i=this.tileXYZMap),void 0===o&&(o={}),i)a=i[d],(u=this.board.rotate(a,t)).z=a.z,o[d]=u;return o},_a=function GetMinMaxTileXY(t,i){void 0===t&&(t=this.tileXYZMap),void 0===i?i={}:!0===i&&(i=Pa);var o,a=1/0,u=-1/0,d=1/0,b=-1/0;for(var S in this.tileXYZMap)(o=this.tileXYZMap[S]).x<a&&(a=o.x),o.x>u&&(u=o.x),o.y<d&&(d=o.y),o.y>b&&(b=o.y);return i.minX=a,i.minY=d,i.maxX=u,i.maxY=b,i},Pa={},Ra=function Offset(t,i,o,a){var u,d;for(var b in void 0===o&&(o=this.tileXYZMap),void 0===a&&(a={}),o)u=o[b],(d=this.board.offset(u,t,i)).z=u.z,a[b]=d;return a},ka={addChess:function AddChess(t,i,o,a){var u=this.grid;return u.saveOrigin(),u.setOriginPosition(this.x,this.y),this.board.addChess(t,i,o,a,!0),Zt(t)&&(t=this.board.uidToChess(t)),this.add(t),u.restoreOrigin(),this},removeChess:function RemoveChess(t,i,o,a,u){return this.board.removeChess(t,i,o,a,u),this},removeAllChess:function RemoveAllChess(t){return this.board.removeAllChess(t),this},pullOutFromMainBoard:function PullOutFromMainBoard(){var t=this.mainBoard;if(null===t)return this;var i=this.tileXYZMap;for(var o in i)t.removeChess(parseInt(o));return this.setMainBoard(null),this},canPutOnMainBoard:function CanPutOnMainBoard(t,i,o,a){if(!t)return!1;var u,d,b;for(var S in void 0===a&&(a=this.tileXYZMap),a){if(u=a[S],d=t.offset(u,i,o,!0),!t.contains(d.x,d.y))return!1;if(this.putTestCallback){ca.x=d.x,ca.y=d.x,ca.z=u.z;var C=this.board.uidToChess(S);b=this.putTestCallbackScpe?this.putTestCallback.call(this.putTestCallbackScpe,ca,t,C):this.putTestCallback(ca,t,C)}else b=t.contains(d.x,d.y,u.z);if(b)return!1}return!0},putOnMainBoard:function PutOnMainBoard(t,i,o,a){if(!t)return this;if(void 0===i){var u=t.worldXYToTileXY(this.x,this.y,!0);i=u.x,o=u.y}if(void 0===a&&(a=!0),this.pullOutFromMainBoard(),!this.canPutOnMainBoard(t,i,o))return this;this.setMainBoard(t,i,o);var d,b,S=this.tileXYZMap;for(var C in S)d=S[C],C=parseInt(C),b=t.offset(d,i,o,!0),t.addChess(C,b.x,b.y,d.z,!1);return a&&this.alignToMainBoard(t,i,o),this},putBack:function PutBack(){var t=this.lastMainBoardRef.mainBoard,i=this.lastMainBoardRef.tileX,o=this.lastMainBoardRef.tileY;return this.putOnMainBoard(t,i,o,!1),this},isOverlapping:function IsOverlapping(t,i){if(!t)return!1;var o;for(var a in this.tileXYZMap)if(o=this.board.uidToChess(a),t.isOverlappingPoint(o.x,o.y,i))return!0;return!1},alignToMainBoard:function AlignToMainBoard(t,i,o){if(!t)return this;if(void 0===i){var a=t.worldXYToTileXY(this.x,this.y,!0);i=a.x,o=a.y}return t.gridAlign(this,i,o),this},setInteractive:function SetInteractive(t){return void 0===t&&(t=!0),this.input||(this.input={enable:!0,tilePosition:{x:void 0,y:void 0},pointer:void 0,drag:{enable:!1,state:0,position:{x:void 0,y:void 0}}},this.scene.input.on("pointerdown",da,this),this.scene.input.on("pointerup",ma,this),this.scene.input.on("pointermove",Ta,this),this.once("destroy",(function(){this.scene&&(this.scene.input.off("pointerdown",da,this),this.scene.input.off("pointerup",ma,this),this.scene.input.off("pointermove",Ta,this))}),this)),this.input.enable=t,t||(this.input.pointer=null),this},setDraggable:function SetDraggable(t){return void 0===t&&(t=!0),this.setInteractive(),this.input.drag.enable=t,t||(this.input.drag.state=0),this},dragEnd:va,setMainBoard:function SetMainBoard(t,i,o){return this.mainBoardRef.set(t,i,o),t&&this.lastMainBoardRef.set(t,i,o),this},canMirror:function CanMirror(t){if(null===this.mainBoard)return!0;var i=Ca.call(this,t);return this.canPutOnMainBoard(this.mainBoard,tileX,tileY,i)},mirror:function Mirror(t){var i=null!=this.mainBoard;i&&this.pullOutFromMainBoard();var o=Ca.call(this,t);if(i){var a=this.lastMainBoardRef.mainBoard,u=this.lastMainBoardRef.tileX,d=this.lastMainBoardRef.tileY;this.lastTransferResult=this.canPutOnMainBoard(a,u,d,o),this.lastTransferResult&&Ea.call(this,o),this.putBack()}else this.lastTransferResult=!0,Ea.call(this,o);return this},canRotate:function CanRotate(t){if(null===this.mainBoard)return!0;var i=Ma.call(this,t);return this.canPutOnMainBoard(this.mainBoard,tileX,tileY,i)},rotate:function Rotate$1(t){if(0===t)return this;var i=null!=this.mainBoard;i&&this.pullOutFromMainBoard();var o=Ma.call(this,t);if(i){var a=this.lastMainBoardRef.mainBoard,u=this.lastMainBoardRef.tileX,d=this.lastMainBoardRef.tileY;this.lastTransferResult=this.canPutOnMainBoard(a,u,d,o),this.lastTransferResult&&Ea.call(this,o),this.putBack()}else this.lastTransferResult=!0,Ea.call(this,o);return this.lastTransferResult&&this.setFace(this.face+t),this},canRotateTo:function CanRotateTo(t){return t-=this.face,this.canRotate(t)},rotateTo:function RotateTo$1(t){return t-=this.face,this.rotate(t),this},setOrigin:function SetOrigin(t,i){switch(t){case"center":t=.5,i=.5;break;case"top-left":case"left-top":t=0,i=0}void 0===t&&(t=.5),void 0===i&&(i=t);var o=_a.call(this,void 0,!0),a=-Math.floor(ue(o.minX,o.maxX,t)),u=-Math.floor(ue(o.minY,o.maxY,i));if(0!==a||0!==u){var d=Ra.call(this,a,u);Ea.call(this,d);var b=this.board.tileXYToWorldXY(a,u),S=this.board.tileXYToWorldXY(0,0);this.setPosition(this.x+(S.x-b.x),this.y+(S.y-b.y))}return this}},Oa=function(){function MainBoardReference(t){_classCallCheck(this,MainBoardReference),this.miniBoard=t,this.set(null)}return _createClass(MainBoardReference,[{key:"set",value:function set(t,i,o){t||(t=null,i=null,o=null),this.mainBoard=t,this.tileX=i,this.tileY=o}}]),MainBoardReference}(),La=function(t){_inherits(MiniBoard,t);var i=_createSuper(MiniBoard);function MiniBoard(t,o,a,u){var d;_classCallCheck(this,MiniBoard),(d=i.call(this,t,o,a,0,0)).type="rexMiniBoard";var b={isBoard:!1,grid:It(u,"grid",void 0),infinity:!0,wrap:!1};return d.board=new Un(t,b),d.mainBoardRef=new Oa,d.lastMainBoardRef=new Oa,d.resetFromJSON(u),d}return _createClass(MiniBoard,[{key:"resetFromJSON",value:function resetFromJSON(t){this.setFace(It(t,"face",0));var i=It(t,"draggable",void 0);return void 0!==i&&this.setDraggable(i),this.setPutTestCallback(It(t,"putTestCallback",void 0),It(t,"putTestCallbackScpe",void 0)),this.lastTransferResult=It(t,"lastTransferResult",void 0),this}},{key:"destroy",value:function destroy(t){this.scene&&(this.clear(!t),this.board.shutdown(t),this.board=void 0,this.setPutTestCallback(void 0,void 0),_get(_getPrototypeOf(MiniBoard.prototype),"destroy",this).call(this,t))}},{key:"setFace",value:function setFace(t){return this.face=this.board.grid.directionNormalize(t),this}},{key:"mainBoard",get:function get(){return this.mainBoardRef.mainBoard}},{key:"tileX",get:function get(){return this.mainBoardRef.tileX}},{key:"tileY",get:function get(){return this.mainBoardRef.tileY}},{key:"grid",get:function get(){return this.board.grid}},{key:"tileXYZMap",get:function get(){return this.board.boardData.UIDToXYZ}},{key:"setPutTestCallback",value:function setPutTestCallback(t,i){return this.putTestCallback=t,this.putTestCallbackScpe=i,this}}]),MiniBoard}(ua);Object.assign(La.prototype,ka),Ot.register("miniBoard",(function(t,i,o){var a=new La(this.scene,t,i,o);return this.scene.add.existing(a),a})),Gr(window,"RexPlugins.Board.MiniBoard",La);var Da={hexagon:function GetHexagonMap(t,i,o){void 0===o&&(o=[]);for(var a,u,d=t.grid.mode,b=-i;b<=i;b++){a=Math.max(-i,-b-i),u=Math.min(i,-b+i);for(var S=a;S<=u;S++)o.push(Xi(d,b,0,-b-S))}return o},triangle:function GetTriangleMap(t,i,o,a){void 0===a&&(a=[]);for(var u,d,b=t.grid.mode,S=0;S<=o;S++){1===i?(u=o-S,d=o):(u=0,d=o-S);for(var C=u;C<=d;C++)a.push(Xi(b,S,0,-S-C))}return a},parallelogram:function GetParallelogramMap(t,i,o,a,u){void 0===u&&(u=[]);var d=t.grid.mode;switch(i){case 1:for(var b=0;b<=o;b++)for(var S=0;S<=a;S++)u.push(Xi(d,S,0,b));break;case 2:for(var C=0;C<=o;C++)for(b=0;b<=a;b++)u.push(Xi(d,-C-b,0,b));break;default:for(S=0;S<=o;S++)for(C=0;C<=a;C++)u.push(Xi(d,S,0,-S-C))}return u}},Ia=Phaser.Utils.String.Pad,Fa=function GetStyle(t,i,o){if(null==t)return t;switch(_typeof(t)){case"string":default:return t;case"number":return"#".concat(Ia(Math.floor(t).toString(16),6,"0",1));case"function":return t(i,o);case"object":return t.hasOwnProperty("r")?t.hasOwnProperty("a")?"rgba(".concat(t.r,",").concat(t.g,",").concat(t.b,",").concat(t.a,")"):"rgb(".concat(t.r,",").concat(t.g,",").concat(t.b,")"):t.hasOwnProperty("h")?t.hasOwnProperty("a")?"hsla(".concat(t.h,",").concat(t.s,",").concat(t.l,",").concat(t.a,")"):"hsl(".concat(t.h,",").concat(t.s,",").concat(t.l,")"):t}},Ba=function Indent(t,i,o){return t<i?t+o:t>i?t-o:t},Na=function CreateTileTexture(t,i,o,a,u,d){void 0===d&&(d="miter"),function CreatePolygonTexture(t,i,o,a,u,d,b){void 0===a&&void 0===u&&(a=16777215),void 0===u?d=0:void 0===d&&(d=2);for(var S=1/0,C=1/0,M=-1/0,P=-1/0,R=0,O=o.length;R<O;R++){var B=(q=o[R]).x,N=q.y;S=Math.min(S,B),C=Math.min(C,N),M=Math.max(M,B),P=Math.max(P,N)}var Y=M-S,G=P-C,X=t.sys.textures.createCanvas(i,Math.ceil(Y),Math.ceil(G)),U=X.getCanvas(),z=X.getContext(),V=Y/2,W=G/2,H=d/2,j=[];for(R=0,O=o.length;R<O;R++){var q=o[R];j.push({x:Ba(q.x-S,V,H),y:Ba(q.y-C,W,H)})}!function DrawPolygon(t,i,o,a,u,d,b){void 0===b&&(b="round"),i.beginPath(),i.lineJoin=b;var S=o[0];i.moveTo(S.x,S.y);for(var C=1,M=o.length;C<M;C++)S=o[C],i.lineTo(S.x,S.y);i.closePath(),null!=a&&(i.fillStyle=a,i.fill()),null!=u&&(i.strokeStyle=u,i.lineWidth=d,i.stroke())}(0,z,j,Fa(a,U,z),Fa(u,U,z),d,b),X.refresh()}(t.scene,i,t.getGridPoints(0,0,!0),o,a,u,d)},Ya=function(t){_inherits(BoardPlugin,Phaser.Plugins.ScenePlugin);var i=_createSuper(BoardPlugin);function BoardPlugin(t,o){var a;return _classCallCheck(this,BoardPlugin),(a=i.call(this,t,o)).add=new Ot(t),a.hexagonMap=Da,a.createTileTexture=Na,a}return _createClass(BoardPlugin,[{key:"start",value:function start(){this.scene.sys.events.on("destroy",this.destroy,this)}}]),BoardPlugin}(),Ga=function SetVelocity(t,i,o,a){var u=t.body,d=u.velocity.x,b=u.velocity.y;i===d&&o===b||(u.setVelocity(i,o),a&&a(i,o,d,b))},Xa=Phaser.Utils.Objects.GetValue,Ua=function(t){_inherits(Bullet,t);var i=_createSuper(Bullet);function Bullet(t,o){var a;return _classCallCheck(this,Bullet),(a=i.call(this,t,o)).resetFromJSON(o),a.boot(),a}return _createClass(Bullet,[{key:"resetFromJSON",value:function resetFromJSON(t){return this.parent.body||this.scene.physics.add.existing(this.parent,!1),this.setWrapMode(Xa(t,"wrap",!1),Xa(t,"padding",0)),this.setEnable(Xa(t,"enable",!0)),this.setSpeed(Xa(t,"speed",200)),this}},{key:"enable",get:function get(){return this.isRunning},set:function set(t){this.isRunning=t,t||Ga(this.parent,0,0)}},{key:"setEnable",value:function setEnable(t){return null==t&&(t=!0),this.enable=t,this}},{key:"setSpeed",value:function setSpeed(t){return this.speed=t,this}},{key:"setWrapMode",value:function setWrapMode(t,i){return void 0===t&&(t=!0),this.wrap=t,this.padding=i,this}},{key:"update",value:function update(t,i){var o=this.parent;if(!this.enable)return Ga(o,0,0),this;if(!o.active)return this;var a=o.rotation,u=this.speed*Math.cos(a),d=this.speed*Math.sin(a);return Ga(o,u,d),this.wrap&&o.body.world.wrap(o,this.padding),this}}]),Bullet}(Vr),za=function(t){_inherits(BulletPlugin,Phaser.Plugins.BasePlugin);var i=_createSuper(BulletPlugin);function BulletPlugin(t){return _classCallCheck(this,BulletPlugin),i.call(this,t)}return _createClass(BulletPlugin,[{key:"start",value:function start(){this.game.events.on("destroy",this.destroy,this)}},{key:"add",value:function add(t,i){return new Ua(t,i)}}]),BulletPlugin}(),Va=Phaser.Utils.Objects.GetValue,Wa=Phaser.Math.Clamp,Ha=function(){function Timer(t){_classCallCheck(this,Timer),this.resetFromJSON(t)}return _createClass(Timer,[{key:"resetFromJSON",value:function resetFromJSON(t){this.state=Va(t,"state",ja),this.timeScale=Va(t,"timeScale",1),this.delay=Va(t,"delay",0),this.repeat=Va(t,"repeat",0),this.repeatCounter=Va(t,"repeatCounter",0),this.duration=Va(t,"duration",0),this.nowTime=Va(t,"nowTime",0),this.justRestart=Va(t,"justRestart",!1)}},{key:"toJSON",value:function toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}},{key:"destroy",value:function destroy(){}},{key:"setTimeScale",value:function setTimeScale(t){return this.timeScale=t,this}},{key:"setDelay",value:function setDelay(t){return void 0===t&&(t=0),this.delay=t,this}},{key:"setDuration",value:function setDuration(t){return this.duration=t,this}},{key:"setRepeat",value:function setRepeat(t){return this.repeat=t,this}},{key:"setRepeatInfinity",value:function setRepeatInfinity(){return this.repeat=-1,this}},{key:"start",value:function start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?Za:qa,this.repeatCounter=0,this}},{key:"stop",value:function stop(){return this.state=ja,this}},{key:"update",value:function update(t,i){this.state!==ja&&this.state!==Ka&&0!==i&&0!==this.timeScale&&(this.nowTime+=i*this.timeScale,this.state=this.nowTime>=0?Za:qa,this.justRestart=!1,this.nowTime>=this.duration&&(-1===this.repeat||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration):(this.nowTime=this.duration,this.state=Ka)))}},{key:"t",get:function get(){var t;switch(this.state){case ja:case qa:t=0;break;case Za:t=this.nowTime/this.duration;break;case Ka:t=1}return Wa(t,0,1)},set:function set(t){(t=Wa(t,-1,1))<0?(this.state=qa,this.nowTime=-this.delay*t):(this.state=Za,this.nowTime=this.duration*t,1===t&&0!==this.repeat&&this.repeatCounter++)}},{key:"setT",value:function setT(t){return this.t=t,this}},{key:"isIdle",get:function get(){return this.state===ja}},{key:"isDelay",get:function get(){return this.state===qa}},{key:"isCountDown",get:function get(){return this.state===Za}},{key:"isRunning",get:function get(){return this.state===qa||this.state===Za}},{key:"isDone",get:function get(){return this.state===Ka}},{key:"isOddIteration",get:function get(){return 1==(1&this.repeatCounter)}},{key:"isEvenIteration",get:function get(){return 0==(1&this.repeatCounter)}}]),Timer}(),ja=0,qa=1,Za=2,Ka=-1,Ja=function(t){_inherits(TimerTickTask,t);var i=_createSuper(TimerTickTask);function TimerTickTask(t,o){var a;return _classCallCheck(this,TimerTickTask),(a=i.call(this,t,o)).timer=new Ha,a}return _createClass(TimerTickTask,[{key:"shutdown",value:function shutdown(t){this.isShutdown||(_get(_getPrototypeOf(TimerTickTask.prototype),"shutdown",this).call(this,t),this.timer.destroy(),this.timer=void 0)}},{key:"start",value:function start(){return this.timer.start(),_get(_getPrototypeOf(TimerTickTask.prototype),"start",this).call(this),this}},{key:"stop",value:function stop(){return this.timer.stop(),_get(_getPrototypeOf(TimerTickTask.prototype),"stop",this).call(this),this}},{key:"complete",value:function complete(){return this.timer.stop(),_get(_getPrototypeOf(TimerTickTask.prototype),"complete",this).call(this),this}}]),TimerTickTask}(Vr),Qa=Phaser.Utils.Objects.GetValue,$a=Phaser.Utils.Objects.GetAdvancedValue,th=Phaser.Tweens.Builders.GetEaseFunction,eh=function(t){_inherits(EaseValueTaskBase,t);var i=_createSuper(EaseValueTaskBase);function EaseValueTaskBase(){return _classCallCheck(this,EaseValueTaskBase),i.apply(this,arguments)}return _createClass(EaseValueTaskBase,[{key:"resetFromJSON",value:function resetFromJSON(t){return this.timer.resetFromJSON(Qa(t,"timer")),this.setEnable(Qa(t,"enable",!0)),this.setTarget(Qa(t,"target",this.parent)),this.setDelay($a(t,"delay",0)),this.setDuration($a(t,"duration",1e3)),this.setEase(Qa(t,"ease","Linear")),this.setRepeat(Qa(t,"repeat",0)),this}},{key:"setEnable",value:function setEnable(t){return null==t&&(t=!0),this.enable=t,this}},{key:"setTarget",value:function setTarget(t){return void 0===t&&(t=this.parent),this.target=t,this}},{key:"setDelay",value:function setDelay(t){return this.delay=t,this}},{key:"setDuration",value:function setDuration(t){return this.duration=t,this}},{key:"setEase",value:function setEase(t){return void 0===t&&(t="Linear"),this.ease=t,this.easeFn=th(t),this}},{key:"setRepeat",value:function setRepeat(t){return this.repeat=t,this}},{key:"start",value:function start(){return this.timer.isRunning||_get(_getPrototypeOf(EaseValueTaskBase.prototype),"start",this).call(this),this}},{key:"restart",value:function restart(){return this.timer.stop(),this.start.apply(this,arguments),this}},{key:"stop",value:function stop(t){return void 0===t&&(t=!1),_get(_getPrototypeOf(EaseValueTaskBase.prototype),"stop",this).call(this),t&&(this.timer.setT(1),this.updateGameObject(this.target,this.timer),this.complete()),this}},{key:"update",value:function update(t,i){if(!this.isRunning||!this.enable||!this.parent.active)return this;var o=this.target,a=this.timer;return a.update(t,i),a.isDelay||this.updateGameObject(o,a),this.emit("update",o,this),a.isDone&&this.complete(),this}},{key:"updateGameObject",value:function updateGameObject(t,i){}}]),EaseValueTaskBase}(Ja),ih=Phaser.Utils.Objects.GetValue,nh=Phaser.Utils.Objects.GetAdvancedValue,rh=Phaser.Math.Linear,sh=function(t){_inherits(EaseMove,t);var i=_createSuper(EaseMove);function EaseMove(t,o){var a;return _classCallCheck(this,EaseMove),(a=i.call(this,t,o)).resetFromJSON(o),a.boot(),a}return _createClass(EaseMove,[{key:"resetFromJSON",value:function resetFromJSON(t){if(_get(_getPrototypeOf(EaseMove.prototype),"resetFromJSON",this).call(this,t),this.setMode(ih(t,"mode",0)),t&&(t.hasOwnProperty("x")||t.hasOwnProperty("y"))){var i=nh(t,"x",void 0),o=nh(t,"y",void 0);this.setTargetPosition(i,o)}else this.setTargetPosition(t);return this}},{key:"setMode",value:function setMode(t){return"string"==typeof t&&(t=oh[t]),this.mode=t,this}},{key:"setTargetPosition",value:function setTargetPosition(t,i){if("number"==typeof t||"number"==typeof i)this.startX=this.parent.x,this.startY=this.parent.y,this.endX=t,this.endY=i;else{var o=t;this.startX=nh(o,"startX",void 0),this.startY=nh(o,"startY",void 0),this.endX=nh(o,"endX",void 0),this.endY=nh(o,"endY",void 0)}return this.hasMoveX=void 0!==this.startX&&void 0!==this.endX,this.hasMoveY=void 0!==this.startY&&void 0!==this.endY,this}},{key:"start",value:function start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasMoveX&&(t.x=this.startX),this.hasMoveY&&(t.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(2===this.mode?-1:0),_get(_getPrototypeOf(EaseMove.prototype),"start",this).call(this),this}},{key:"updateGameObject",value:function updateGameObject(t,i){var o=i.t;i.isOddIteration&&(o=1-o),o=this.easeFn(o),this.hasMoveX&&(t.x=rh(this.startX,this.endX,o)),this.hasMoveY&&(t.y=rh(this.startY,this.endY,o))}},{key:"complete",value:function complete(){return _get(_getPrototypeOf(EaseMove.prototype),"complete",this).call(this),1===this.mode&&this.parent.destroy(),this}}]),EaseMove}(eh),oh={stop:0,destroy:1,yoyo:2},ah=function ParseValue(t,i){if("number"==typeof t)return t;var o=t[0],a=parseFloat(t.substr(2));switch(o){case"+":return i+a;case"-":return i-a;case"*":return i*a;case"/":return i/a}},hh=function EaseMoveTo(t,i,o,a,u,d,b){d instanceof sh&&(b=d,d=void 0),void 0===d&&(d=!1);var S={};return S.mode=d?1:0,void 0!==o&&(S.startX=t.x,S.endX=ah(o,t.x)),void 0!==a&&(S.startY=t.y,S.endY=ah(a,t.y)),S.duration=i,S.ease=void 0===u?"Linear":u,void 0===b?b=new sh(t,S):b.resetFromJSON(S),b.restart(),b},lh=function EaseMoveFrom(t,i,o,a,u,d,b){d instanceof sh&&(b=d,d=void 0),void 0===d&&(d=!1);var S={};return S.mode=d?1:0,void 0!==o&&(S.startX=ah(o,t.x),S.endX=t.x),void 0!==a&&(S.startY=ah(a,t.y),S.endY=t.y),S.duration=i,S.ease=void 0===u?"Linear":u,void 0===b?b=new sh(t,S):b.resetFromJSON(S),b.restart(),b},uh=function(t){_inherits(EaseMovePlugin,Phaser.Plugins.BasePlugin);var i=_createSuper(EaseMovePlugin);function EaseMovePlugin(t){return _classCallCheck(this,EaseMovePlugin),i.call(this,t)}return _createClass(EaseMovePlugin,[{key:"start",value:function start(){this.game.events.on("destroy",this.destroy,this)}},{key:"add",value:function add(t,i){return new sh(t,i)}}]),EaseMovePlugin}(),ch={moveTo:hh,moveFrom:lh,moveToDestroy:function EaseMoveToDestroy(t,i,o,a,u,d){return hh(t,i,o,a,u,!0,d)},moveFromDestroy:function EaseMoveFromDestroy(t,i,o,a,u,d){return lh(t,i,o,a,u,!0,d)}};Object.assign(uh.prototype,ch);var dh=function(){function ObjectFactory(t){_classCallCheck(this,ObjectFactory),this.scene=t}return _createClass(ObjectFactory,null,[{key:"register",value:function register(t,i){ObjectFactory.prototype[t]=i}}]),ObjectFactory}(),fh=Phaser.GameObjects.GameObject,ph=function IsGameObject(t){return!!t.skeleton||t instanceof fh};dh.register("tap",(function(t,i){return ph(t)||(i=t,t=this.scene),new lr(t,i)})),Gr(window,"RexPlugins.Gestures.Tap",lr),dh.register("press",(function(t,i){return ph(t)||(i=t,t=this.scene),new vr(t,i)})),Gr(window,"RexPlugins.Gestures.Press",vr);var gh=Phaser.Utils.Objects.GetValue,vh=function(t){_inherits(Pan,t);var i=_createSuper(Pan);function Pan(t,o){var a;_classCallCheck(this,Pan);var u=_assertThisInitialized(a=i.call(this,t,o)),d={states:{IDLE:{},BEGIN:{enter:function enter(){var t=u.pointer;u.startX=t.x,u.startY=t.y,u.startWorldX=t.worldX,u.startWorldY=t.worldY}},RECOGNIZED:{enter:function enter(){u.emit("panstart",u,u.gameObject,u.lastPointer)},exit:function exit(){var t=u.lastPointer;u.endX=t.x,u.endY=t.y,u.endWorldX=t.worldX,u.endWorldY=t.worldY,u.emit("panend",u,u.gameObject,u.lastPointer)}}},init:function init(){this.state=mh},eventEmitter:!1};return a.setRecongizedStateObject(new or(d)),a}return _createClass(Pan,[{key:"resetFromJSON",value:function resetFromJSON(t){return _get(_getPrototypeOf(Pan.prototype),"resetFromJSON",this).call(this,t),this.setDragThreshold(gh(t,"threshold",10)),this}},{key:"onDragStart",value:function onDragStart(){this.state=yh,0===this.dragThreshold&&(this.state=xh)}},{key:"onDragEnd",value:function onDragEnd(){this.state=mh}},{key:"onDrag",value:function onDrag(){switch(this.state){case yh:this.pointer.getDistance()>=this.dragThreshold&&(this.state=xh);break;case xh:var t=this.pointer.position,i=this.pointer.prevPosition;this.dx=t.x-i.x,this.dy=t.y-i.y;var o=this.pointer;this.x=o.x,this.y=o.y,this.worldX=o.worldX,this.worldY=o.worldY,this.emit("pan",this,this.gameObject,this.lastPointer)}}},{key:"isPanned",get:function get(){return this.state===xh}},{key:"setDragThreshold",value:function setDragThreshold(t){return this.dragThreshold=t,this}}]),Pan}(ir),mh="IDLE",yh="BEGIN",xh="RECOGNIZED";dh.register("pan",(function(t,i){return ph(t)||(i=t,t=this.scene),new vh(t,i)})),Gr(window,"RexPlugins.Gestures.Pan",vh),dh.register("swipe",(function(t,i){return ph(t)||(i=t,t=this.scene),new Rr(t,i)})),Gr(window,"RexPlugins.Gestures.Swipe",Rr);var Th=Phaser.Utils.Objects.GetValue,bh=Phaser.Utils.Array.SpliceOne,wh=Phaser.Math.Distance.Between,Sh=Phaser.Math.Angle.Between,Ch=function(){function TwoPointersTracer(t,i){_classCallCheck(this,TwoPointersTracer);var o=t.input.manager.pointersTotal-1;o<2&&t.input.addPointer(2-o),this.scene=t,this.setEventEmitter(Th(i,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(i),this.boot()}return _createClass(TwoPointersTracer,[{key:"resetFromJSON",value:function resetFromJSON(t){return this.setEnable(Th(t,"enable",!0)),this.bounds=Th(t,"bounds",void 0),this.tracerState=Eh,this.pointers.length=0,je(this.movedState),this}},{key:"boot",value:function boot(){this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}},{key:"shutdown",value:function shutdown(){this.scene&&(this.destroyEventEmitter(),this.pointers.length=0,je(this.movedState),this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0)}},{key:"destroy",value:function destroy(){this.shutdown()}},{key:"enable",get:function get(){return this._enable},set:function set(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}},{key:"setEnable",value:function setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}},{key:"toggleEnable",value:function toggleEnable(){return this.setEnable(!this.enable),this}},{key:"onPointerDown",value:function onPointerDown(t){if(this.enable&&(2!==this.pointers.length&&(!this.bounds||this.bounds.contains(t.x,t.y))&&-1===this.pointers.indexOf(t)))switch(this.movedState[t.id]=!1,this.pointers.push(t),this.tracerState){case Eh:this.tracerState=Mh,this.onDrag1Start();break;case Mh:this.tracerState=_h,this.onDrag2Start()}}},{key:"onPointerUp",value:function onPointerUp(t){if(this.enable&&(!this.bounds||this.bounds.contains(t.x,t.y))){var i=this.pointers.indexOf(t);if(-1!==i)switch(delete this.movedState[t.id],bh(this.pointers,i),this.tracerState){case Mh:this.tracerState=Eh,this.onDrag1End();break;case _h:this.tracerState=Mh,this.onDrag2End(),this.onDrag1Start()}}}},{key:"onPointerMove",value:function onPointerMove(t){if(this.enable&&t.isDown){var i=!this.bounds||this.bounds.contains(t.x,t.y),o=-1!==this.pointers.indexOf(t);if(!o&&i);else if(o&&!i)this.onPointerUp(t);else if(this.movedState[t.id]||(this.movedState[t.id]=t.x!==t.downX||t.y!==t.downY),this.movedState[t.id])switch(this.tracerState){case Mh:this.onDrag1();break;case _h:this.onDrag2()}}}},{key:"dragCancel",value:function dragCancel(){return this.tracerState===_h&&this.onDrag2End(),this.pointers.length=0,je(this.movedState),this.tracerState=Eh,this}},{key:"onDrag1Start",value:function onDrag1Start(){this.emit("drag1start",this)}},{key:"onDrag1End",value:function onDrag1End(){this.emit("drag1end",this)}},{key:"onDrag1",value:function onDrag1(){this.emit("drag1",this)}},{key:"onDrag2Start",value:function onDrag2Start(){this.emit("drag2start",this)}},{key:"onDrag2End",value:function onDrag2End(){this.emit("drag2end",this)}},{key:"onDrag2",value:function onDrag2(){this.emit("drag2",this)}},{key:"distanceBetween",get:function get(){if(this.tracerState!==_h)return 0;var t=this.pointers[0],i=this.pointers[1];return wh(t.x,t.y,i.x,i.y)}},{key:"angleBetween",get:function get(){if(this.tracerState!==_h)return 0;var t=this.pointers[0],i=this.pointers[1];return Sh(t.x,t.y,i.x,i.y)}},{key:"drag1Vector",get:function get(){var t=this.pointers[0];if(t&&this.movedState[t.id]){var i=t.position,o=t.prevPosition;Ah.x=i.x-o.x,Ah.y=i.y-o.y}else Ah.x=0,Ah.y=0;return Ah}},{key:"centerX",get:function get(){if(this.tracerState!==_h)return 0;var t=this.pointers[0].position,i=this.pointers[1].position;return(t.x+i.x)/2}},{key:"centerY",get:function get(){if(this.tracerState!==_h)return 0;var t=this.pointers[0].position,i=this.pointers[1].position;return(t.y+i.y)/2}},{key:"prevCenterX",get:function get(){if(this.tracerState!==_h)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,i=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.x+i.x)/2}},{key:"prevCenterY",get:function get(){if(this.tracerState!==_h)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,i=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.y+i.y)/2}},{key:"movementCenterX",get:function get(){return this.centerX-this.prevCenterX}},{key:"movementCenterY",get:function get(){return this.centerY-this.prevCenterY}},{key:"setRecongizedStateObject",value:function setRecongizedStateObject(t){return this.recongizedState=t,this}},{key:"state",get:function get(){return this.recongizedState.state},set:function set(t){this.recongizedState.state=t}},{key:"cancel",value:function cancel(){return this.state=Ph,this}}]),TwoPointersTracer}();Object.assign(Ch.prototype,Nt);var Ah={},Eh=0,Mh=1,_h=2,Ph="IDLE",Rh=Phaser.Utils.Objects.GetValue,kh=function(t){_inherits(Pinch,t);var i=_createSuper(Pinch);function Pinch(t,o){var a;_classCallCheck(this,Pinch);var u=_assertThisInitialized(a=i.call(this,t,o)),d={states:{IDLE:{enter:function enter(){u.prevDistance=void 0,u.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function enter(){u.emit("pinchstart",u)},exit:function exit(){u.emit("pinchend",u)}}},init:function init(){this.state=Oh},eventEmitter:!1};return a.setRecongizedStateObject(new or(d)),a}return _createClass(Pinch,[{key:"resetFromJSON",value:function resetFromJSON(t){return _get(_getPrototypeOf(Pinch.prototype),"resetFromJSON",this).call(this,t),this.setDragThreshold(Rh(t,"threshold",0)),this}},{key:"onDrag2Start",value:function onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=Lh,0===this.dragThreshold&&(this.state=Dh)}},{key:"onDrag2End",value:function onDrag2End(){this.state=Oh}},{key:"onDrag2",value:function onDrag2(){switch(this.state){case Lh:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.prevDistance=t,this.state=Dh}break;case Dh:t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.emit("pinch",this),this.prevDistance=t}}},{key:"isPinched",get:function get(){return this.state===Dh}},{key:"setDragThreshold",value:function setDragThreshold(t){return this.dragThreshold=t,this}}]),Pinch}(Ch),Oh="IDLE",Lh="BEGIN",Dh="RECOGNIZED";dh.register("pinch",(function(t){return new kh(this.scene,t)})),Gr(window,"RexPlugins.Gestures.Pinch",kh);var Ih=Phaser.Math.RotateAround,Fh=function RotateObjectAround(t,i,o,a){return Ih(t,i,o,a),t.rotation+=a,t},Bh={},Nh=Phaser.Utils.Objects.GetValue,Yh=Phaser.Math.Angle.WrapDegrees,Gh=Phaser.Math.Angle.ShortestBetween,Xh=Phaser.Math.RadToDeg,Uh=Phaser.Math.DegToRad,zh=function(t){_inherits(Rotate,t);var i=_createSuper(Rotate);function Rotate(t,o){var a;_classCallCheck(this,Rotate);var u=_assertThisInitialized(a=i.call(this,t,o)),d={states:{IDLE:{enter:function enter(){u.prevAngle=void 0,u.angle=0}},BEGIN:{},RECOGNIZED:{enter:function enter(){u.emit("rotatestart",u)},exit:function exit(){u.emit("rotateend",u)}}},init:function init(){this.state=Wh},eventEmitter:!1};return a.setRecongizedStateObject(new or(d)),a}return _createClass(Rotate,[{key:"resetFromJSON",value:function resetFromJSON(t){return _get(_getPrototypeOf(Rotate.prototype),"resetFromJSON",this).call(this,t),this.setDragThreshold(Nh(t,"threshold",0)),this}},{key:"onDrag2Start",value:function onDrag2Start(){this.prevAngle=Yh(Xh(this.angleBetween)),this.state=Hh,0===this.dragThreshold&&(this.state=jh)}},{key:"onDrag2End",value:function onDrag2End(){this.state=Wh}},{key:"onDrag2",value:function onDrag2(){switch(this.state){case Hh:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=Yh(Xh(this.angleBetween));this.angle=Gh(this.prevAngle,t),this.prevAngle=t,this.state=jh}break;case jh:t=Yh(Xh(this.angleBetween));this.angle=Gh(this.prevAngle,t),this.prevAngle=t,this.emit("rotate",this)}}},{key:"isRotated",get:function get(){return this.state===jh}},{key:"rotation",get:function get(){return Uh(this.angle)}},{key:"setDragThreshold",value:function setDragThreshold(t){return this.dragThreshold=t,this}}]),Rotate}(Ch),Vh={spinObject:function SpinObject(t,i){if(!this.isRotation)return this;void 0===i&&(i=this.pointers[0].camera);var o=this.movementCenterX,a=this.movementCenterY,u=function ScreenXYToWorldXY(t,i,o,a){return void 0===a?a={}:!0===a&&(a=Bh),o.getWorldPoint(t,i,a),a}(this.centerX,this.centerY,i,!0),d=u.x,b=u.y,S=this.rotation;if(Array.isArray(t))for(var C=t,M=0,P=C.length;M<P;M++)(t=C[M]).x+=o,t.y+=a,Fh(t,d,b,S);else t.x+=o,t.y+=a,Fh(t,d,b,S);return this}};Object.assign(zh.prototype,Vh);var Wh="IDLE",Hh="BEGIN",jh="RECOGNIZED";dh.register("rotate",(function(t){return new zh(this.scene,t)})),Gr(window,"RexPlugins.Gestures.Rotate",zh);var qh=function(t){_inherits(GesturesPlugin,Phaser.Plugins.ScenePlugin);var i=_createSuper(GesturesPlugin);function GesturesPlugin(t,o){var a;return _classCallCheck(this,GesturesPlugin),(a=i.call(this,t,o)).add=new dh(t),a}return _createClass(GesturesPlugin)}(),Zh=function(t){_inherits(MoveToPlugin,Phaser.Plugins.BasePlugin);var i=_createSuper(MoveToPlugin);function MoveToPlugin(t){return _classCallCheck(this,MoveToPlugin),i.call(this,t)}return _createClass(MoveToPlugin,[{key:"start",value:function start(){this.game.events.on("destroy",this.destroy,this)}},{key:"add",value:function add(t,i){return new os(t,i)}}]),MoveToPlugin}(),Kh=Phaser.Utils.Objects.GetValue,Jh=Phaser.Math.Wrap,Qh=Phaser.Math.Angle.Wrap,$h=Phaser.Math.Angle.Between,tl=function(t){_inherits(RotateTo,t);var i=_createSuper(RotateTo);function RotateTo(t,o){var a;return _classCallCheck(this,RotateTo),(a=i.call(this,t,o)).resetFromJSON(o),a.boot(),a}return _createClass(RotateTo,[{key:"resetFromJSON",value:function resetFromJSON(t){return this.isRunning=Kh(t,"isRunning",!1),this.setEnable(Kh(t,"enable",!0)),this.timeScale=Kh(t,"timeScale",1),this.setSpeed(Kh(t,"speed",180)),this.target=Kh(t,"target",0),this.dir=Kh(t,"dir",0),this}},{key:"toJSON",value:function toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,speed:this.speed,target:this.target,dir:this.dir,tickingMode:this.tickingMode}}},{key:"setEnable",value:function setEnable(t){return null==t&&(t=!0),this.enable=t,this}},{key:"setSpeed",value:function setSpeed(t){return this.speed=t,this}},{key:"rotateTo",value:function rotateTo(t,i,o){if("number"!=typeof t){var a=t;t=Kh(a,"angle",void 0),i=Kh(a,"dir",void 0)}return this.target=Jh(t,0,360),void 0===i&&(i=0),this.dir="string"==typeof i?il[i]:i,void 0!==o&&this.setSpeed(o),_get(_getPrototypeOf(RotateTo.prototype),"start",this).call(this),this}},{key:"rotateTowardsPosition",value:function rotateTowardsPosition(t,i,o,a){var u=this.parent,d=$h(u.x,u.y,t,i),b=ae(d);return this.rotateTo(b,o,a),this}},{key:"update",value:function update(t,i){if(!this.isRunning||!this.enable)return this;var o=this.parent;if(!o.active)return this;var a=this.target;if(Qh(On(a))===o.rotation)return this.complete(),this;if(0===this.speed||0===i||0===this.timeScale)return this;var u,d,b=(360+o.angle)%360,S=i*this.timeScale/1e3,C=this.speed*S,M=this.dir;switch(M){case 0:var P=el(b,a,!0),R=360-P;P<R?(M=1,u=P):(M=2,u=R);break;case 1:u=el(b,a,!0);break;case 2:u=el(b,a,!1)}return d=C<u?1===M?b+C:b-C:a,o.rotation=On(d),this}}]),RotateTo}(Vr),el=function diffAngle(t,i,o){var a=o?i-t:t-i;return a=Jh(a,0,360)},il={shortest:0,cw:1,ccw:2},nl=function(t){_inherits(RotateToPlugin,Phaser.Plugins.BasePlugin);var i=_createSuper(RotateToPlugin);function RotateToPlugin(t){return _classCallCheck(this,RotateToPlugin),i.call(this,t)}return _createClass(RotateToPlugin,[{key:"start",value:function start(){this.game.events.on("destroy",this.destroy,this)}},{key:"add",value:function add(t,i){return new tl(t,i)}}]),RotateToPlugin}(),rl={exports:{}};!function(t,i){t.exports=function s(){var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},i=!t.document&&!!t.postMessage,o=t.IS_PAPA_WORKER||!1,a={},u=0,d={parse:function parse(i,o){var b=(o=o||{}).dynamicTyping||!1;if(J(b)&&(o.dynamicTypingFunction=b,b={}),o.dynamicTyping=b,o.transform=!!J(o.transform)&&o.transform,o.worker&&d.WORKERS_SUPPORTED){var S=function(){if(!d.WORKERS_SUPPORTED)return!1;var i,o,b=(i=t.URL||t.webkitURL||null,o=s.toString(),d.BLOB_URL||(d.BLOB_URL=i.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",o,")();"],{type:"text/javascript"})))),S=new t.Worker(b);return S.onmessage=_,S.id=u++,a[S.id]=S}();return S.userStep=o.step,S.userChunk=o.chunk,S.userComplete=o.complete,S.userError=o.error,o.step=J(o.step),o.chunk=J(o.chunk),o.complete=J(o.complete),o.error=J(o.error),delete o.worker,void S.postMessage({input:i,config:o,workerId:S.id})}var C=null;return d.NODE_STREAM_INPUT,"string"==typeof i?(i=function(t){return 65279===t.charCodeAt(0)?t.slice(1):t}(i),C=o.download?new l(o):new p(o)):!0===i.readable&&J(i.read)&&J(i.on)?C=new g(o):(t.File&&i instanceof File||i instanceof Object)&&(C=new c(o)),C.stream(i)},unparse:function unparse(t,i){var o=!1,a=!0,u=",",b="\r\n",S='"',C=S+S,M=!1,P=null,R=!1;!function(){if("object"==_typeof(i)){if("string"!=typeof i.delimiter||d.BAD_DELIMITERS.filter((function(t){return-1!==i.delimiter.indexOf(t)})).length||(u=i.delimiter),("boolean"==typeof i.quotes||"function"==typeof i.quotes||Array.isArray(i.quotes))&&(o=i.quotes),"boolean"!=typeof i.skipEmptyLines&&"string"!=typeof i.skipEmptyLines||(M=i.skipEmptyLines),"string"==typeof i.newline&&(b=i.newline),"string"==typeof i.quoteChar&&(S=i.quoteChar),"boolean"==typeof i.header&&(a=i.header),Array.isArray(i.columns)){if(0===i.columns.length)throw new Error("Option columns is empty");P=i.columns}void 0!==i.escapeChar&&(C=i.escapeChar+S),("boolean"==typeof i.escapeFormulae||i.escapeFormulae instanceof RegExp)&&(R=i.escapeFormulae instanceof RegExp?i.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var O=new RegExp(Q(S),"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return h(null,t,M);if("object"==_typeof(t[0]))return h(P||Object.keys(t[0]),t,M)}else if("object"==_typeof(t))return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||P),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:"object"==_typeof(t.data[0])?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||"object"==_typeof(t.data[0])||(t.data=[t.data])),h(t.fields||[],t.data||[],M);throw new Error("Unable to serialize unrecognized input");function h(t,i,o){var d="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof i&&(i=JSON.parse(i));var S=Array.isArray(t)&&0<t.length,C=!Array.isArray(i[0]);if(S&&a){for(var M=0;M<t.length;M++)0<M&&(d+=u),d+=v(t[M],M);0<i.length&&(d+=b)}for(var P=0;P<i.length;P++){var R=S?t.length:i[P].length,O=!1,B=S?0===Object.keys(i[P]).length:0===i[P].length;if(o&&!S&&(O="greedy"===o?""===i[P].join("").trim():1===i[P].length&&0===i[P][0].length),"greedy"===o&&S){for(var N=[],Y=0;Y<R;Y++){var G=C?t[Y]:Y;N.push(i[P][G])}O=""===N.join("").trim()}if(!O){for(var X=0;X<R;X++){0<X&&!B&&(d+=u);var U=S&&C?t[X]:X;d+=v(i[P][U],X)}P<i.length-1&&(!o||0<R&&!B)&&(d+=b)}}return d}function v(t,i){if(null==t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);var a=!1;R&&"string"==typeof t&&R.test(t)&&(t="'"+t,a=!0);var b=t.toString().replace(O,C);return(a=a||!0===o||"function"==typeof o&&o(t,i)||Array.isArray(o)&&o[i]||function(t,i){for(var o=0;o<i.length;o++)if(-1<t.indexOf(i[o]))return!0;return!1}(b,d.BAD_DELIMITERS)||-1<b.indexOf(u)||" "===b.charAt(0)||" "===b.charAt(b.length-1))?S+b+S:b}}};if(d.RECORD_SEP=String.fromCharCode(30),d.UNIT_SEP=String.fromCharCode(31),d.BYTE_ORDER_MARK="\ufeff",d.BAD_DELIMITERS=["\r","\n",'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!i&&!!t.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=E,d.ParserHandle=r,d.NetworkStreamer=l,d.FileStreamer=c,d.StringStreamer=p,d.ReadableStreamStreamer=g,t.jQuery){var b=t.jQuery;b.fn.parse=function(i){var o=i.config||{},a=[];return this.each((function(i){if("INPUT"!==b(this).prop("tagName").toUpperCase()||"file"!==b(this).attr("type").toLowerCase()||!t.FileReader||!this.files||0===this.files.length)return!0;for(var u=0;u<this.files.length;u++)a.push({file:this.files[u],inputElem:this,instanceConfig:b.extend({},o)})})),e(),this;function e(){if(0!==a.length){var t,o,u,S,C=a[0];if(J(i.before)){var M=i.before(C.file,C.inputElem);if("object"==_typeof(M)){if("abort"===M.action)return t="AbortError",o=C.file,u=C.inputElem,S=M.reason,void(J(i.error)&&i.error({name:t},o,u,S));if("skip"===M.action)return void h();"object"==_typeof(M.config)&&(C.instanceConfig=b.extend(C.instanceConfig,M.config))}else if("skip"===M)return void h()}var P=C.instanceConfig.complete;C.instanceConfig.complete=function(t){J(P)&&P(t,C.file,C.inputElem),h()},d.parse(C.file,C.instanceConfig)}else J(i.complete)&&i.complete()}function h(){a.splice(0,1),e()}}}function h(i){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var i=w(t);i.chunkSize=parseInt(i.chunkSize),t.step||t.chunk||(i.chunkSize=null),this._handle=new r(i),(this._handle.streamer=this)._config=i}.call(this,i),this.parseChunk=function(i,a){if(this.isFirstChunk&&J(this._config.beforeFirstChunk)){var u=this._config.beforeFirstChunk(i);void 0!==u&&(i=u)}this.isFirstChunk=!1,this._halted=!1;var b=this._partialLine+i;this._partialLine="";var S=this._handle.parse(b,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var C=S.meta.cursor;this._finished||(this._partialLine=b.substring(C-this._baseIndex),this._baseIndex=C),S&&S.data&&(this._rowCount+=S.data.length);var M=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(o)t.postMessage({results:S,workerId:d.WORKER_ID,finished:M});else if(J(this._config.chunk)&&!a){if(this._config.chunk(S,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);S=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(S.data),this._completeResults.errors=this._completeResults.errors.concat(S.errors),this._completeResults.meta=S.meta),this._completed||!M||!J(this._config.complete)||S&&S.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),M||S&&S.meta.paused||this._nextChunk(),S}this._halted=!0},this._sendError=function(i){J(this._config.error)?this._config.error(i):o&&this._config.error&&t.postMessage({workerId:d.WORKER_ID,error:i,finished:!1})}}function l(t){var o;(t=t||{}).chunkSize||(t.chunkSize=d.RemoteChunkSize),h.call(this,t),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(o=new XMLHttpRequest,this._config.withCredentials&&(o.withCredentials=this._config.withCredentials),i||(o.onload=v(this._chunkLoaded,this),o.onerror=v(this._chunkError,this)),o.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var a in t)o.setRequestHeader(a,t[a])}if(this._config.chunkSize){var u=this._start+this._config.chunkSize-1;o.setRequestHeader("Range","bytes="+this._start+"-"+u)}try{o.send(this._config.downloadRequestBody)}catch(t){this._chunkError(t.message)}i&&0===o.status&&this._chunkError()}},this._chunkLoaded=function(){4===o.readyState&&(o.status<200||400<=o.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:o.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(t){var i=t.getResponseHeader("Content-Range");return null===i?-1:parseInt(i.substring(i.lastIndexOf("/")+1))}(o),this.parseChunk(o.responseText)))},this._chunkError=function(t){var i=o.statusText||t;this._sendError(new Error(i))}}function c(t){var i,o;(t=t||{}).chunkSize||(t.chunkSize=d.LocalChunkSize),h.call(this,t);var a="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,o=t.slice||t.webkitSlice||t.mozSlice,a?((i=new FileReader).onload=v(this._chunkLoaded,this),i.onerror=v(this._chunkError,this)):i=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var u=Math.min(this._start+this._config.chunkSize,this._input.size);t=o.call(t,this._start,u)}var d=i.readAsText(t,this._config.encoding);a||this._chunkLoaded({target:{result:d}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(i.error)}}function p(t){var i;h.call(this,t=t||{}),this.stream=function(t){return i=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t,o=this._config.chunkSize;return o?(t=i.substring(0,o),i=i.substring(o)):(t=i,i=""),this._finished=!i,this.parseChunk(t)}}}function g(t){h.call(this,t=t||{});var i=[],o=!0,a=!1;this.pause=function(){h.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){h.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){a&&1===i.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),i.length?this.parseChunk(i.shift()):o=!0},this._streamData=v((function(t){try{i.push("string"==typeof t?t:t.toString(this._config.encoding)),o&&(o=!1,this._checkIsFinished(),this.parseChunk(i.shift()))}catch(t){this._streamError(t)}}),this),this._streamError=v((function(t){this._streamCleanUp(),this._sendError(t)}),this),this._streamEnd=v((function(){this._streamCleanUp(),a=!0,this._streamData("")}),this),this._streamCleanUp=v((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function r(t){var i,o,a,u=Math.pow(2,53),b=-u,S=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,C=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,M=this,P=0,R=0,O=!1,B=!1,N=[],Y={data:[],errors:[],meta:{}};if(J(t.step)){var G=t.step;t.step=function(i){if(Y=i,_())g();else{if(g(),0===Y.data.length)return;P+=i.data.length,t.preview&&P>t.preview?o.abort():(Y.data=Y.data[0],G(Y,M))}}}function y(i){return"greedy"===t.skipEmptyLines?""===i.join("").trim():1===i.length&&0===i[0].length}function g(){return Y&&a&&(k("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),a=!1),t.skipEmptyLines&&(Y.data=Y.data.filter((function(t){return!y(t)}))),_()&&function(){if(Y)if(Array.isArray(Y.data[0])){for(var i=0;_()&&i<Y.data.length;i++)Y.data[i].forEach(e);Y.data.splice(0,1)}else Y.data.forEach(e);function e(i,o){J(t.transformHeader)&&(i=t.transformHeader(i,o)),N.push(i)}}(),function(){if(!Y||!t.header&&!t.dynamicTyping&&!t.transform)return Y;function e(i,o){var a,u=t.header?{}:[];for(a=0;a<i.length;a++){var d=a,b=i[a];t.header&&(d=a>=N.length?"__parsed_extra":N[a]),t.transform&&(b=t.transform(b,d)),b=v(d,b),"__parsed_extra"===d?(u[d]=u[d]||[],u[d].push(b)):u[d]=b}return t.header&&(a>N.length?k("FieldMismatch","TooManyFields","Too many fields: expected "+N.length+" fields but parsed "+a,R+o):a<N.length&&k("FieldMismatch","TooFewFields","Too few fields: expected "+N.length+" fields but parsed "+a,R+o)),u}var i=1;return!Y.data.length||Array.isArray(Y.data[0])?(Y.data=Y.data.map(e),i=Y.data.length):Y.data=e(Y.data,0),t.header&&Y.meta&&(Y.meta.fields=N),R+=i,Y}()}function _(){return t.header&&0===N.length}function v(i,o){return a=i,t.dynamicTypingFunction&&void 0===t.dynamicTyping[a]&&(t.dynamicTyping[a]=t.dynamicTypingFunction(a)),!0===(t.dynamicTyping[a]||t.dynamicTyping)?"true"===o||"TRUE"===o||"false"!==o&&"FALSE"!==o&&(function(t){if(S.test(t)){var i=parseFloat(t);if(b<i&&i<u)return!0}return!1}(o)?parseFloat(o):C.test(o)?new Date(o):""===o?null:o):o;var a}function k(t,i,o,a){var u={type:t,code:i,message:o};void 0!==a&&(u.row=a),Y.errors.push(u)}this.parse=function(u,b,S){var C=t.quoteChar||'"';if(t.newline||(t.newline=function(t,i){t=t.substring(0,1048576);var o=new RegExp(Q(i)+"([^]*?)"+Q(i),"gm"),a=(t=t.replace(o,"")).split("\r"),u=t.split("\n"),d=1<u.length&&u[0].length<a[0].length;if(1===a.length||d)return"\n";for(var b=0,S=0;S<a.length;S++)"\n"===a[S][0]&&b++;return b>=a.length/2?"\r\n":"\r"}(u,C)),a=!1,t.delimiter)J(t.delimiter)&&(t.delimiter=t.delimiter(u),Y.meta.delimiter=t.delimiter);else{var M=function(i,o,a,u,b){var S,C,M,P;b=b||[",","\t","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var R=0;R<b.length;R++){var O=b[R],B=0,N=0,Y=0;M=void 0;for(var G=new E({comments:u,delimiter:O,newline:o,preview:10}).parse(i),X=0;X<G.data.length;X++)if(a&&y(G.data[X]))Y++;else{var U=G.data[X].length;N+=U,void 0!==M?0<U&&(B+=Math.abs(U-M),M=U):M=U}0<G.data.length&&(N/=G.data.length-Y),(void 0===C||B<=C)&&(void 0===P||P<N)&&1.99<N&&(C=B,S=O,P=N)}return{successful:!!(t.delimiter=S),bestDelimiter:S}}(u,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);M.successful?t.delimiter=M.bestDelimiter:(a=!0,t.delimiter=d.DefaultDelimiter),Y.meta.delimiter=t.delimiter}var P=w(t);return t.preview&&t.header&&P.preview++,i=u,o=new E(P),Y=o.parse(i,b,S),g(),O?{meta:{paused:!0}}:Y||{meta:{paused:!1}}},this.paused=function(){return O},this.pause=function(){O=!0,o.abort(),i=J(t.chunk)?"":i.substring(o.getCharIndex())},this.resume=function(){M.streamer._halted?(O=!1,M.streamer.parseChunk(i,!0)):setTimeout(M.resume,3)},this.aborted=function(){return B},this.abort=function(){B=!0,o.abort(),Y.meta.aborted=!0,J(t.complete)&&t.complete(Y),i=""}}function Q(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function E(t){var i,o=(t=t||{}).delimiter,a=t.newline,u=t.comments,b=t.step,S=t.preview,C=t.fastMode,M=i=void 0===t.quoteChar||null===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(M=t.escapeChar),("string"!=typeof o||-1<d.BAD_DELIMITERS.indexOf(o))&&(o=","),u===o)throw new Error("Comment character same as delimiter");!0===u?u="#":("string"!=typeof u||-1<d.BAD_DELIMITERS.indexOf(u))&&(u=!1),"\n"!==a&&"\r"!==a&&"\r\n"!==a&&(a="\n");var P=0,R=!1;this.parse=function(d,O,B){if("string"!=typeof d)throw new Error("Input must be a string");var N=d.length,Y=o.length,G=a.length,X=u.length,U=J(b),z=[],V=[],W=[],H=P=0;if(!d)return L();if(t.header){var j=d.split(a)[0].split(o),q=[],Z={},K=!1;for(var $ in j){var tt=j[$];J(t.transformHeader)&&(tt=t.transformHeader(tt,$));var et=tt,it=Z[tt]||0;0<it&&(K=!0,et=tt+"_"+it),Z[tt]=it+1,q.push(et)}if(K){var nt=d.split(a);nt[0]=q.join(o),d=nt.join(a)}}if(C||!1!==C&&-1===d.indexOf(i)){for(var rt=d.split(a),st=0;st<rt.length;st++){if(W=rt[st],P+=W.length,st!==rt.length-1)P+=a.length;else if(B)return L();if(!u||W.substring(0,X)!==u){if(U){if(z=[],I(W.split(o)),F(),R)return L()}else I(W.split(o));if(S&&S<=st)return z=z.slice(0,S),L(!0)}}return L()}for(var ot=d.indexOf(o,P),at=d.indexOf(a,P),ht=new RegExp(Q(M)+Q(i),"g"),lt=d.indexOf(i,P);;)if(d[P]!==i)if(u&&0===W.length&&d.substring(P,P+X)===u){if(-1===at)return L();P=at+G,at=d.indexOf(a,P),ot=d.indexOf(o,P)}else if(-1!==ot&&(ot<at||-1===at))W.push(d.substring(P,ot)),P=ot+Y,ot=d.indexOf(o,P);else{if(-1===at)break;if(W.push(d.substring(P,at)),D(at+G),U&&(F(),R))return L();if(S&&z.length>=S)return L(!0)}else for(lt=P,P++;;){if(-1===(lt=d.indexOf(i,lt+1)))return B||V.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:z.length,index:P}),T();if(lt===N-1)return T(d.substring(P,lt).replace(ht,i));if(i!==M||d[lt+1]!==M){if(i===M||0===lt||d[lt-1]!==M){-1!==ot&&ot<lt+1&&(ot=d.indexOf(o,lt+1)),-1!==at&&at<lt+1&&(at=d.indexOf(a,lt+1));var ut=A(-1===at?ot:Math.min(ot,at));if(d.substr(lt+1+ut,Y)===o){W.push(d.substring(P,lt).replace(ht,i)),d[P=lt+1+ut+Y]!==i&&(lt=d.indexOf(i,P)),ot=d.indexOf(o,P),at=d.indexOf(a,P);break}var ct=A(at);if(d.substring(lt+1+ct,lt+1+ct+G)===a){if(W.push(d.substring(P,lt).replace(ht,i)),D(lt+1+ct+G),ot=d.indexOf(o,P),lt=d.indexOf(i,P),U&&(F(),R))return L();if(S&&z.length>=S)return L(!0);break}V.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:z.length,index:P}),lt++}}else lt++}return T();function I(t){z.push(t),H=P}function A(t){var i=0;if(-1!==t){var o=d.substring(lt+1,t);o&&""===o.trim()&&(i=o.length)}return i}function T(t){return B||(void 0===t&&(t=d.substring(P)),W.push(t),P=N,I(W),U&&F()),L()}function D(t){P=t,I(W),W=[],at=d.indexOf(a,P)}function L(t){return{data:z,errors:V,meta:{delimiter:o,linebreak:a,aborted:R,truncated:!!t,cursor:H+(O||0)}}}function F(){b(L()),z=[],V=[]}},this.abort=function(){R=!0},this.getCharIndex=function(){return P}}function _(t){var i=t.data,o=a[i.workerId],u=!1;if(i.error)o.userError(i.error,i.file);else if(i.results&&i.results.data){var d={abort:function abort(){u=!0,m(i.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:y,resume:y};if(J(o.userStep)){for(var b=0;b<i.results.data.length&&(o.userStep({data:i.results.data[b],errors:i.results.errors,meta:i.results.meta},d),!u);b++);delete i.results}else J(o.userChunk)&&(o.userChunk(i.results,d,i.file),delete i.results)}i.finished&&!u&&m(i.workerId,i.results)}function m(t,i){var o=a[t];J(o.userComplete)&&o.userComplete(i),o.terminate(),delete a[t]}function y(){throw new Error("Not implemented.")}function w(t){if("object"!=_typeof(t)||null===t)return t;var i=Array.isArray(t)?[]:{};for(var o in t)i[o]=w(t[o]);return i}function v(t,i){return function(){t.apply(i,arguments)}}function J(t){return"function"==typeof t}return o&&(t.onmessage=function(i){var o=i.data;if(void 0===d.WORKER_ID&&o&&(d.WORKER_ID=o.workerId),"string"==typeof o.input)t.postMessage({workerId:d.WORKER_ID,results:d.parse(o.input,o.config),finished:!0});else if(t.File&&o.input instanceof File||o.input instanceof Object){var a=d.parse(o.input,o.config);a&&t.postMessage({workerId:d.WORKER_ID,results:a,finished:!0})}}),(l.prototype=Object.create(h.prototype)).constructor=l,(c.prototype=Object.create(h.prototype)).constructor=c,(p.prototype=Object.create(p.prototype)).constructor=p,(g.prototype=Object.create(h.prototype)).constructor=g,d}()}(rl);var sl=rl.exports,ol=Phaser.Utils.Objects.GetValue,al=function(){function InstMem(t){_classCallCheck(this,InstMem),this.scenario=t,this.queue=[],this.currentIdx=-1,this.nextIdx=0}return _createClass(InstMem,[{key:"resetFromJSON",value:function resetFromJSON(t){var i=ol(t,"queue",void 0);return void 0===i?je(this.queue):Zr(i,this.queue),this.currentIdx=ol(t,"curIdx",-1),this.nextIdx=ol(t,"nextIdx",0),this}},{key:"clear",value:function clear(){return this.currentIdx=-1,this.nextIdx=0,this.queue.length=0,this}},{key:"append",value:function append(t){return this.queue.push(t),this}},{key:"setNextIndex",value:function setNextIndex(t){return void 0===t&&(t=this.currentIdx+1),this.nextIdx=t,this}},{key:"get",value:function get(t){return void 0===t&&(t=this.nextIdx),this.currentIdx=t,this.queue[t]}},{key:"length",get:function get(){return this.queue.length}}]),InstMem}(),hl=function(){function BaseCmd(t,i){_classCallCheck(this,BaseCmd),this.scenario=t,this.type=i}return _createClass(BaseCmd,[{key:"resetFromJSON",value:function resetFromJSON(t){}},{key:"toJSON",value:function toJSON(){return{}}},{key:"parse",value:function parse(t,i){return t}},{key:"run",value:function run(t){}}]),BaseCmd}(),ll=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,ul=function convert(t){return"string"!=typeof t||(""===t?t=null:ll.test(t)?t=parseFloat(t):"false"===t?t=!1:"true"===t&&(t=!0)),t},cl=Phaser.Utils.Objects.GetValue,dl=function RunCommands(t,i,a){var u,d=cl(a,"reverse",!1);if(o(t[0]))if(d)for(b=(S=t.length)-1;b>=0;b--)u=RunCommands(t[b],i,a);else for(var b=0,S=t.length;b<S;b++)u=RunCommands(t[b],i,a);else u=fl(t,i,a);return u},fl=function RunCommand(t,i,o){var a,u=cl(o,"argsConvert",void 0),d=cl(o,"argsConvertScope",void 0),b=t[0];if(pl=function Copy(t,i,o,a){void 0===o&&(o=0),void 0===a&&(a=i.length),t.length=a-o;for(var u=0,d=t.length;u<d;u++)t[u]=i[u+o];return t}(pl,t,1),u){!0===u&&(u=ul,d=void 0);for(var S=0,C=pl.length;S<C;S++)pl[S]=d?u.call(d,pl[S],t):u(pl[S],t)}return"string"==typeof b?null==(a=i[b])&&(a=cl(i,b,null)):a=b,a.apply(i,pl)},pl=[],gl=Phaser.Utils.Array.SpliceOne,vl=function(t){_inherits(CustomCmd,t);var i=_createSuper(CustomCmd);function CustomCmd(t){var o;return _classCallCheck(this,CustomCmd),(o=i.call(this,t,"-")).task=void 0,o}return _createClass(CustomCmd,[{key:"resetFromJSON",value:function resetFromJSON(t){this.task&&(this.task.off("complete",this.resume,this),this.task=void 0)}},{key:"parse",value:function parse(t,i){var o=gl(t,0),a=this.scenario,u=a.argsConvert,d=a.argsConvertScope;if(u){!0===u&&(u=ul,d=void 0);for(var b=1,S=t.length;b<S;b++)t[b]=d?u.call(d,t[b],t):u(t[b],t)}return t=[o,t]}},{key:"run",value:function run(t){var i=this.scenario,o=dl(t[1],i.scope);o&&"function"==typeof o.once?(o.once("complete",this.resume,this),this.pause(),this.task=o):this.task=void 0}},{key:"pause",value:function pause(){this.scenario.pause()}},{key:"resume",value:function resume(){this.task=void 0;var t=this.scenario;t.resume(),t.runNextCmd()}}]),CustomCmd}(hl),ml=function(t){_inherits(WaitCmd,t);var i=_createSuper(WaitCmd);function WaitCmd(t){return _classCallCheck(this,WaitCmd),i.call(this,t,"wait")}return _createClass(WaitCmd,[{key:"parse",value:function parse(t,i){t.length=2;var o=this.getEventName(t);return isNaN(o)||(t[1]=parseFloat(o)),t}},{key:"run",value:function run(t){var i=this.getEventName(t);"number"==typeof i?this.waitTime(i):this.waitEvent(i)}},{key:"waitTime",value:function waitTime(t){t>this.scenario.offset?(t-=this.scenario.offset,this.scenario.offset=0,this.scenario.isDebugMode&&this.scenario.log("#WAIT: "+t),this.scenario.wait(t)):this.scenario.offset-=t}},{key:"waitEvent",value:function waitEvent(t){this.scenario.isDebugMode&&this.scenario.log("#WAIT: "+t),this.scenario.wait(t)}},{key:"getEventName",value:function getEventName(t){var i=t[1];return null==i&&(i="",t[1]=i),i}}]),WaitCmd}(hl),yl=Phaser.Utils.Objects.GetValue,xl=function(t){_inherits(LabelCmd,t);var i=_createSuper(LabelCmd);function LabelCmd(t){var o;return _classCallCheck(this,LabelCmd),(o=i.call(this,t,"label")).labels={},o.prevLabel="",o.lastLabel="",o}return _createClass(LabelCmd,[{key:"resetFromJSON",value:function resetFromJSON(t){this.prevLabel=yl(t,"preLabel",""),this.lastLabel=yl(t,"lastLabel","");var i=yl(t,"labels",void 0);void 0===i?je(this.labels):Zr(i,this.labels)}},{key:"toJSON",value:function toJSON(){return{preLabel:this.prevLabel,lastLabel:this.lastLabel,labels:this.labels}}},{key:"parse",value:function parse(t,i){t.length=2;var o=this.getLabel(t);return this.addLabel(o,i),t}},{key:"run",value:function run(t){var i=this.getLabel(t);this.scenario.isDebugMode&&this.scenario.log("#LABEL: "+i),this.prevLabel=this.lastLabel,this.lastLabel=i;var o=this.scenario;o.emit("labelchange",this.lastLabel,this.prevLabel,o.scope,o)}},{key:"getLabel",value:function getLabel(t){var i=t[1];return null==i&&(i="",t[1]=i),i}},{key:"addLabel",value:function addLabel(t,i){this.labels[t]=i}},{key:"getIndex",value:function getIndex(t){return""!==t&&this.hasLabel(t)?this.labels[t]:0}},{key:"hasLabel",value:function hasLabel(t){return this.labels.hasOwnProperty(t)}}]),LabelCmd}(hl),Tl=function(t){_inherits(ExitCmd,t);var i=_createSuper(ExitCmd);function ExitCmd(t){return _classCallCheck(this,ExitCmd),i.call(this,t,"exit")}return _createClass(ExitCmd,[{key:"parse",value:function parse(t,i){return t.length=1,t}},{key:"run",value:function run(t){this.scenario.log("#EXIT"),this.scenario.complete()}}]),ExitCmd}(hl),bl=function(t){_inherits(GotoCmd,t);var i=_createSuper(GotoCmd);function GotoCmd(t){return _classCallCheck(this,GotoCmd),i.call(this,t,"goto")}return _createClass(GotoCmd,[{key:"parse",value:function parse(t,i){return t.length=2,t}},{key:"run",value:function run(t){var i=this.getLabel(t);this.scenario.isDebugMode&&this.scenario.log("#GOTO label: "+i),this.scenario.goto(i)}},{key:"getLabel",value:function getLabel(t){var i=t[1];return null==i&&(i="",t[1]=i),i}}]),GotoCmd}(hl),wl=function(t){_inherits(IfCmd,t);var i=_createSuper(IfCmd);function IfCmd(t){return _classCallCheck(this,IfCmd),i.call(this,t,"if")}return _createClass(IfCmd,[{key:"parse",value:function parse(t,i){t.length=4;var o="("+this.getCond(t)+")";return t[1]=new Function("return "+o),t}},{key:"run",value:function run(t){var i=this.getCond(t).call(this.scenario.scope),o=i?this.getTrueLabel(t):this.getFalseLabel(t);""!==o&&(this.scenario.isDebugMode&&this.scenario.log("#IF "+i+"- GOTO label: "+o),this.scenario.goto(o))}},{key:"getCond",value:function getCond(t){var i=t[1];return null!=i&&""!==i||(i="true",t[1]=i),i}},{key:"getTrueLabel",value:function getTrueLabel(t){var i=t[2];return null==i&&(i="",t[2]=i),i}},{key:"getFalseLabel",value:function getFalseLabel(t){var i=t[3];return null==i&&(i="",t[3]=i),i}}]),IfCmd}(hl),Sl=Phaser.Utils.Objects.GetValue,Cl=function(){function CmdHandlers(t){_classCallCheck(this,CmdHandlers),this.cmds={"-":new vl(t),wait:new ml(t),label:new xl(t),exit:new Tl(t),goto:new bl(t),if:new wl(t)}}return _createClass(CmdHandlers,[{key:"resetFromJSON",value:function resetFromJSON(t){for(var i in this.cmds)this.cmds[i].resetFromJSON(Sl(t,i,void 0));return this}},{key:"toJSON",value:function toJSON(){var t={};for(var i in this.cmds)t[i]=this.cmds[i].toJSON();return t}},{key:"get",value:function get(t){return this.cmds[t]}},{key:"isValidCmdName",value:function isValidCmdName(t){return this.cmds.hasOwnProperty(t)}}]),CmdHandlers}(),Al=function(){function CSVScenario(t,i){_classCallCheck(this,CSVScenario),this.setEventEmitter(It(i,"eventEmitter",void 0)),this.scene=t,this.timer=void 0,this.instMem=new al(this),this.cmdHandlers=new Cl(this),this.resetFromJSON(i),this.boot()}return _createClass(CSVScenario,[{key:"resetFromJSON",value:function resetFromJSON(t){return this._inRunCmdLoop=!1,this.isRunning=It(t,"state",!1),this.isPaused=It(t,"pause",!1),this.waitEvent=It(t,"wait",void 0),this.scope=It(t,"scope",void 0),this.timeUnit=It(t,"timeUnit",0),this.cmdPrefix=It(t,"prefix",Ml),this.argsConvert=It(t,"argsConvert",!0),this.argsConvertScope=It(t,"argsConvertScope",void 0),this.cmdHandlers.resetFromJSON(It(t,"handlers",void 0)),this.instMem.resetFromJSON(It(t,"instMem",void 0)),this.delimiter=It(t,"delimiter",","),this}},{key:"toJSON",value:function toJSON(){return{state:this.isRunning,pause:this.isPaused,wait:this.waitEvent,scope:this.scope,timeUnit:this.timeUnit,prefix:this.cmdPrefix,argsConvert:this.argsConvert,argsConvertScope:this.argsConvertScope,handlers:this.cmdHandlers.toJSON(),instMem:this.instMem.toJSON(),delimiter:this.delimiter}}},{key:"boot",value:function boot(){this.scene.sys.events.once("shutdown",this.destroy,this)}},{key:"shutdown",value:function shutdown(){this.scene&&(this.destroyEventEmitter(),this.clear(),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0)}},{key:"destroy",value:function destroy(){this.shutdown()}},{key:"load",value:function load(t,i,o){return this.clear(),this.timeUnit=It(o,"timeUnit",this.timeUnit),"string"==typeof this.timeUnit&&(this.timeUnit=El[this.timeUnit]),this.cmdPrefix=It(o,"prefix",this.cmdPrefix),"string"==typeof this.cmdPrefix&&(this.cmdPrefix=new RegExp(this.cmdPrefix)),this.argsConvert=It(o,"argsConvert",this.argsConvert),this.argsConvertScope=It(o,"argsConvertScope",this.argsConvertScope),this.scope=i,this.delimiter=It(o,"delimiter",this.delimiter),this.append(t),this}},{key:"clear",value:function clear(){this.stop(),this.instMem.resetFromJSON(),this.cmdHandlers.resetFromJSON()}},{key:"start",value:function start(t){this.stop();var i=It(t,"label","");return this.offset=It(t,"offset",0),this.isDebugMode&&this.log("Start at Label: "+i),!!this.goto(i)&&(this.isRunning=!0,this.runNextCmd(),!0)}},{key:"getIndex",value:function getIndex(t){var i=this.getCmdHandler("label").getIndex(t);return null==i&&this.error("Label: "+t+" is not found"),i}},{key:"goto",value:function goto(t){var i;return null!=(i="string"==typeof t?this.getIndex(t):t)&&(this.instMem.setNextIndex(i),!0)}},{key:"wait",value:function wait(t){if(this.waitEvent=t,"number"==typeof t){var i=t;1===this.timeUnit&&(i*=1e3),this.timer=this.scene.time.delayedCall(i,this.continue,[t],this)}return this}},{key:"stop",value:function stop(){return this.isRunning?(this.isRunning=!1,this.isPaused=!1,this.waitEvent=void 0,this.timer&&(this.timer.remove(),this.timer=void 0),this):this}},{key:"complete",value:function complete(){return this.emit("complete",this.scope,this),this.stop(),this}},{key:"append",value:function append(t){var i=sl.parse(t,{delimiter:this.delimiter}).data;return this.parse(i),this}},{key:"pause",value:function pause(){return this.isRunning?(this.isPaused||(this.isPaused=!0,this.timer&&(this.timer.paused=!0)),this):this}},{key:"resume",value:function resume(){return this.isRunning&&this.isPaused?(this.isPaused=!1,this.timer&&(this.timer.paused=!1),this):this}},{key:"continue",value:function _continue(t){return!this.isRunning||this.isPaused||void 0===this.waitEvent||t===this.waitEvent&&(this.timer=void 0,this.waitEvent=void 0,this.runNextCmd()),this}},{key:"lastLabel",get:function get(){return this.cmdHandlers.labelCmd.lastLabel}},{key:"previousLabel",get:function get(){return this.cmdHandlers.labelCmd.preLabel}},{key:"getCmdHandler",value:function getCmdHandler(t){return"string"!=typeof t&&(t=t[0]),this.cmdHandlers.get(t)}},{key:"parse",value:function parse(t){for(var i,o,a=this.cmdPrefix,u=0,d=t.length;u<d;u++)if("-"===(o=(i=t[u])[0]))this.appendCommand(i);else if(isNaN(o))if(a.test(o)){var b=o.match(a);i[0]=b[1].toLowerCase(),this.appendCommand(i)||this.error("Line "+u+": "+JSON.stringify(i)+" is not a valid command")}else this.appendCommand(["wait",o]),i[0]="-",this.appendCommand(i);else{var S=parseFloat(o);S>0&&this.appendCommand(["wait",S]),i[0]="-",this.appendCommand(i)}return this}},{key:"appendCommand",value:function appendCommand(t){var i=this.getCmdHandler(t);return null!=i&&((t=i.parse(t,this.instMem.length))&&this.instMem.append(t),!0)}},{key:"runNextCmd",value:function runNextCmd(){if(!this._inRunCmdLoop){this.threadId;var t,i=this.instMem;for(this._inRunCmdLoop=!0;this.isRunning&&!this.isPaused&&void 0===this.waitEvent;){if(t=i.get(),i.setNextIndex(),null==t){this.complete();break}this.getCmdHandler(t).run(t)}return this._inRunCmdLoop=!1,this}}},{key:"log",value:function log(t){return this.emit("log",t,this.scope,this),this}},{key:"isDebugMode",get:function get(){return this.listenerCount("log")>0}},{key:"error",value:function error(t){return this.emit("error",t,this.scope,this),this}}]),CSVScenario}();Object.assign(Al.prototype,Nt);var El={ms:0,s:1,sec:1},Ml=/^#([a-zA-Z]+)/,_l=function(t){_inherits(CSVScenarioPlugin,Phaser.Plugins.BasePlugin);var i=_createSuper(CSVScenarioPlugin);function CSVScenarioPlugin(t){return _classCallCheck(this,CSVScenarioPlugin),i.call(this,t)}return _createClass(CSVScenarioPlugin,[{key:"start",value:function start(){this.game.events.on("destroy",this.destroy,this)}},{key:"add",value:function add(t,i){return new Al(t,i)}}]),CSVScenarioPlugin}();window.SpinePlugin=function(t){var i={};function __webpack_require__(o){if(i[o])return i[o].exports;var a=i[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,__webpack_require__),a.l=!0,a.exports}return __webpack_require__.m=t,__webpack_require__.c=i,__webpack_require__.d=function(t,i,o){__webpack_require__.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:o})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(t,i){if(1&i&&(t=__webpack_require__(t)),8&i)return t;if(4&i&&"object"===_typeof(t)&&t&&t.__esModule)return t;var o=Object.create(null);if(__webpack_require__.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var a in t)__webpack_require__.d(o,a,function(i){return t[i]}.bind(null,a));return o},__webpack_require__.n=function(t){var i=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(i,"a",i),i},__webpack_require__.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=63)}([function(t,i){function getProperty(t,i,o){var a=o?t[i]:Object.getOwnPropertyDescriptor(t,i);return!o&&a.value&&"object"===_typeof(a.value)&&(a=a.value),!(!a||!function hasGetterOrSetter(t){return!!t.get&&"function"==typeof t.get||!!t.set&&"function"==typeof t.set}(a))&&(void 0===a.enumerable&&(a.enumerable=!0),void 0===a.configurable&&(a.configurable=!0),a)}function hasNonConfigurable(t,i){var o=Object.getOwnPropertyDescriptor(t,i);return!!o&&(o.value&&"object"===_typeof(o.value)&&(o=o.value),!1===o.configurable)}function extend(t,i,o,a){for(var u in i)if(i.hasOwnProperty(u)){var d=getProperty(i,u,o);if(!1!==d){if(hasNonConfigurable((a||t).prototype,u)){if(Class.ignoreFinals)continue;throw new Error("cannot override final property '"+u+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,u,d)}else t.prototype[u]=i[u]}}function mixin(t,i){if(i){Array.isArray(i)||(i=[i]);for(var o=0;o<i.length;o++)extend(t,i[o].prototype||i[o])}}function Class(t){var i,o;if(t||(t={}),t.initialize){if("function"!=typeof t.initialize)throw new Error("initialize must be a function");i=t.initialize,delete t.initialize}else if(t.Extends){var a=t.Extends;i=function initialize(){a.apply(this,arguments)}}else i=function initialize(){};t.Extends?(i.prototype=Object.create(t.Extends.prototype),i.prototype.constructor=i,o=t.Extends,delete t.Extends):i.prototype.constructor=i;var u=null;return t.Mixins&&(u=t.Mixins,delete t.Mixins),mixin(i,u),extend(i,t,!0,o),i}Class.extend=extend,Class.mixin=mixin,Class.ignoreFinals=!1,t.exports=Class},function(t,i){t.exports=function NOOP(){}},function(t,i,o){var a=o(0),u=o(32),d=new a({initialize:function Vector2(t,i){this.x=0,this.y=0,"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0):(void 0===i&&(i=t),this.x=t||0,this.y=i||0)},clone:function clone(){return new d(this.x,this.y)},copy:function copy(t){return this.x=t.x||0,this.y=t.y||0,this},setFromObject:function setFromObject(t){return this.x=t.x||0,this.y=t.y||0,this},set:function set(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setTo:function setTo(t,i){return this.set(t,i)},setToPolar:function setToPolar(t,i){return null==i&&(i=1),this.x=Math.cos(t)*i,this.y=Math.sin(t)*i,this},equals:function equals(t){return this.x===t.x&&this.y===t.y},fuzzyEquals:function fuzzyEquals(t,i){return u(this.x,t.x,i)&&u(this.y,t.y,i)},angle:function angle(){var angle=Math.atan2(this.y,this.x);return angle<0&&(angle+=2*Math.PI),angle},setAngle:function setAngle(t){return this.setToPolar(t,this.length())},add:function add(t){return this.x+=t.x,this.y+=t.y,this},subtract:function subtract(t){return this.x-=t.x,this.y-=t.y,this},multiply:function multiply(t){return this.x*=t.x,this.y*=t.y,this},scale:function scale(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function divide(t){return this.x/=t.x,this.y/=t.y,this},negate:function negate(){return this.x=-this.x,this.y=-this.y,this},distance:function distance(t){var i=t.x-this.x,o=t.y-this.y;return Math.sqrt(i*i+o*o)},distanceSq:function distanceSq(t){var i=t.x-this.x,o=t.y-this.y;return i*i+o*o},length:function length(){var t=this.x,i=this.y;return Math.sqrt(t*t+i*i)},setLength:function setLength(t){return this.normalize().scale(t)},lengthSq:function lengthSq(){var t=this.x,i=this.y;return t*t+i*i},normalize:function normalize(){var t=this.x,i=this.y,o=t*t+i*i;return o>0&&(o=1/Math.sqrt(o),this.x=t*o,this.y=i*o),this},normalizeRightHand:function normalizeRightHand(){var t=this.x;return this.x=-1*this.y,this.y=t,this},normalizeLeftHand:function normalizeLeftHand(){var t=this.x;return this.x=this.y,this.y=-1*t,this},dot:function dot(t){return this.x*t.x+this.y*t.y},cross:function cross(t){return this.x*t.y-this.y*t.x},lerp:function lerp(t,i){void 0===i&&(i=0);var o=this.x,a=this.y;return this.x=o+i*(t.x-o),this.y=a+i*(t.y-a),this},transformMat3:function transformMat3(t){var i=this.x,o=this.y,a=t.val;return this.x=a[0]*i+a[3]*o+a[6],this.y=a[1]*i+a[4]*o+a[7],this},transformMat4:function transformMat4(t){var i=this.x,o=this.y,a=t.val;return this.x=a[0]*i+a[4]*o+a[12],this.y=a[1]*i+a[5]*o+a[13],this},reset:function reset(){return this.x=0,this.y=0,this},limit:function limit(t){var i=this.length();return i&&i>t&&this.scale(t/i),this},reflect:function reflect(t){return t=t.clone().normalize(),this.subtract(t.scale(2*this.dot(t)))},mirror:function mirror(t){return this.reflect(t).negate()},rotate:function rotate(t){var i=Math.cos(t),o=Math.sin(t);return this.set(i*this.x-o*this.y,o*this.x+i*this.y)}});d.ZERO=new d,d.RIGHT=new d(1,0),d.LEFT=new d(-1,0),d.UP=new d(0,-1),d.DOWN=new d(0,1),d.ONE=new d(1,1),t.exports=d},function(t,i){t.exports=function Clamp(t,i,o){return Math.max(i,Math.min(o,t))}},function(t,i){var o={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};t.exports=o},function(t,i){t.exports=function SafeRange(t,i,o,a){var u=t.length;if(i<0||i>u||i>=o||o>u||i+o>u){if(a)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},function(t,i){t.exports=function Wrap(t,i,o){var a=o-i;return i+((t-i)%a+a)%a}},function(t,i){t.exports=function IsPlainObject(t){if("object"!==_typeof(t)||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}return!0}},function(t,i,o){var a=o(4);t.exports=function CounterClockwise(t){return t>Math.PI&&(t-=a.PI2),Math.abs(((t+a.TAU)%a.PI2-a.PI2)%a.PI2)}},function(t,i,o){var a=o(4);t.exports=function RadToDeg(t){return t*a.RAD_TO_DEG}},function(t,i){t.exports=function GetValue(t,i,o){if(t&&"number"!=typeof t){if(t.hasOwnProperty(i))return t[i];if(-1!==i.indexOf(".")){for(var a=i.split("."),u=t,d=o,b=0;b<a.length;b++){if(!u.hasOwnProperty(a[b])){d=o;break}d=u[a[b]],u=u[a[b]]}return d}return o}return o}},function(t,i){t.exports=function GetFastValue(t,i,o){var a=_typeof(t);return t&&"number"!==a&&"string"!==a&&t.hasOwnProperty(i)&&void 0!==t[i]?t[i]:o}},function(t,i){t.exports=function SpliceOne(t,i){if(!(i>=t.length)){for(var o=t.length-1,a=t[i],u=i;u<o;u++)t[u]=t[u+1];return t.length=o,a}}},function(t,i,o){var a=o(0),u=o(26),d=new a({initialize:function Point(t,i){void 0===t&&(t=0),void 0===i&&(i=t),this.type=u.POINT,this.x=t,this.y=i},setTo:function setTo(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.x=t,this.y=i,this}});t.exports=d},function(t,i,o){var a=new(o(0))({initialize:function Vector3(t,i,o){this.x=0,this.y=0,this.z=0,"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=i||0,this.z=o||0)},up:function up(){return this.x=0,this.y=1,this.z=0,this},min:function min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clone:function clone(){return new a(this.x,this.y,this.z)},addVectors:function addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this},crossVectors:function crossVectors(t,i){var o=t.x,a=t.y,u=t.z,d=i.x,b=i.y,S=i.z;return this.x=a*S-u*b,this.y=u*d-o*S,this.z=o*b-a*d,this},equals:function equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},copy:function copy(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},set:function set(t,i,o){return"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=i||0,this.z=o||0),this},setFromMatrixPosition:function setFromMatrixPosition(t){return this.fromArray(t.val,12)},setFromMatrixColumn:function setFromMatrixColumn(t,i){return this.fromArray(t.val,4*i)},fromArray:function fromArray(t,i){return void 0===i&&(i=0),this.x=t[i],this.y=t[i+1],this.z=t[i+2],this},add:function add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this},addScalar:function addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this},addScale:function addScale(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i||0,this},subtract:function subtract(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this},multiply:function multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this},scale:function scale(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divide:function divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this},negate:function negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function distance(t){var i=t.x-this.x,o=t.y-this.y,a=t.z-this.z||0;return Math.sqrt(i*i+o*o+a*a)},distanceSq:function distanceSq(t){var i=t.x-this.x,o=t.y-this.y,a=t.z-this.z||0;return i*i+o*o+a*a},length:function length(){var t=this.x,i=this.y,o=this.z;return Math.sqrt(t*t+i*i+o*o)},lengthSq:function lengthSq(){var t=this.x,i=this.y,o=this.z;return t*t+i*i+o*o},normalize:function normalize(){var t=this.x,i=this.y,o=this.z,a=t*t+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),this.x=t*a,this.y=i*a,this.z=o*a),this},dot:function dot(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function cross(t){var i=this.x,o=this.y,a=this.z,u=t.x,d=t.y,b=t.z;return this.x=o*b-a*d,this.y=a*u-i*b,this.z=i*d-o*u,this},lerp:function lerp(t,i){void 0===i&&(i=0);var o=this.x,a=this.y,u=this.z;return this.x=o+i*(t.x-o),this.y=a+i*(t.y-a),this.z=u+i*(t.z-u),this},applyMatrix3:function applyMatrix3(t){var i=this.x,o=this.y,a=this.z,u=t.val;return this.x=u[0]*i+u[3]*o+u[6]*a,this.y=u[1]*i+u[4]*o+u[7]*a,this.z=u[2]*i+u[5]*o+u[8]*a,this},applyMatrix4:function applyMatrix4(t){var i=this.x,o=this.y,a=this.z,u=t.val,d=1/(u[3]*i+u[7]*o+u[11]*a+u[15]);return this.x=(u[0]*i+u[4]*o+u[8]*a+u[12])*d,this.y=(u[1]*i+u[5]*o+u[9]*a+u[13])*d,this.z=(u[2]*i+u[6]*o+u[10]*a+u[14])*d,this},transformMat3:function transformMat3(t){var i=this.x,o=this.y,a=this.z,u=t.val;return this.x=i*u[0]+o*u[3]+a*u[6],this.y=i*u[1]+o*u[4]+a*u[7],this.z=i*u[2]+o*u[5]+a*u[8],this},transformMat4:function transformMat4(t){var i=this.x,o=this.y,a=this.z,u=t.val;return this.x=u[0]*i+u[4]*o+u[8]*a+u[12],this.y=u[1]*i+u[5]*o+u[9]*a+u[13],this.z=u[2]*i+u[6]*o+u[10]*a+u[14],this},transformCoordinates:function transformCoordinates(t){var i=this.x,o=this.y,a=this.z,u=t.val,d=i*u[0]+o*u[4]+a*u[8]+u[12],b=i*u[1]+o*u[5]+a*u[9]+u[13],S=i*u[2]+o*u[6]+a*u[10]+u[14],C=i*u[3]+o*u[7]+a*u[11]+u[15];return this.x=d/C,this.y=b/C,this.z=S/C,this},transformQuat:function transformQuat(t){var i=this.x,o=this.y,a=this.z,u=t.x,d=t.y,b=t.z,S=t.w,C=S*i+d*a-b*o,M=S*o+b*i-u*a,P=S*a+u*o-d*i,R=-u*i-d*o-b*a;return this.x=C*S+R*-u+M*-b-P*-d,this.y=M*S+R*-d+P*-u-C*-b,this.z=P*S+R*-b+C*-d-M*-u,this},project:function project(t){var i=this.x,o=this.y,a=this.z,u=t.val,d=u[0],b=u[1],S=u[2],C=u[3],M=u[4],P=u[5],R=u[6],O=u[7],B=u[8],N=u[9],Y=u[10],G=u[11],X=u[12],U=u[13],z=u[14],V=1/(i*C+o*O+a*G+u[15]);return this.x=(i*d+o*M+a*B+X)*V,this.y=(i*b+o*P+a*N+U)*V,this.z=(i*S+o*R+a*Y+z)*V,this},projectViewMatrix:function projectViewMatrix(t,i){return this.applyMatrix4(t).applyMatrix4(i)},unprojectViewMatrix:function unprojectViewMatrix(t,i){return this.applyMatrix4(t).applyMatrix4(i)},unproject:function unproject(t,i){var o=t.x,a=t.y,u=t.z,d=t.w,b=this.x-o,S=d-this.y-1-a,C=this.z;return this.x=2*b/u-1,this.y=2*S/d-1,this.z=2*C-1,this.project(i)},reset:function reset(){return this.x=0,this.y=0,this.z=0,this}});a.ZERO=new a,a.RIGHT=new a(1,0,0),a.LEFT=new a(-1,0,0),a.UP=new a(0,-1,0),a.DOWN=new a(0,1,0),a.FORWARD=new a(0,0,1),a.BACK=new a(0,0,-1),a.ONE=new a(1,1,1),t.exports=a},function(t,i){t.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},function(t,i,o){var a=o(24),u=o(57);t.exports=function RotateMatrix(t,i){if(void 0===i&&(i=90),!a(t))return null;if("string"!=typeof i&&(i=(i%360+360)%360),90===i||-270===i||"rotateLeft"===i)(t=u(t)).reverse();else if(-90===i||270===i||"rotateRight"===i)t.reverse(),t=u(t);else if(180===Math.abs(i)||"rotate180"===i){for(var o=0;o<t.length;o++)t[o].reverse();t.reverse()}return t}},function(t,i){t.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(t,i){t.exports=function FloatBetween(t,i){return Math.random()*(i-t)+t}},function(t,i,o){var a=o(4);t.exports=function DegToRad(t){return t*a.DEG_TO_RAD}},function(t,i,o){var a=o(0),u=o(14),d=1e-6,b=new a({initialize:function Matrix4(t){this.val=new Float32Array(16),t?this.copy(t):this.identity()},clone:function clone(){return new b(this)},set:function set(t){return this.copy(t)},setValues:function setValues(t,i,o,a,u,d,b,S,C,M,P,R,O,B,N,Y){var G=this.val;return G[0]=t,G[1]=i,G[2]=o,G[3]=a,G[4]=u,G[5]=d,G[6]=b,G[7]=S,G[8]=C,G[9]=M,G[10]=P,G[11]=R,G[12]=O,G[13]=B,G[14]=N,G[15]=Y,this},copy:function copy(t){var i=t.val;return this.setValues(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9],i[10],i[11],i[12],i[13],i[14],i[15])},fromArray:function fromArray(t){return this.setValues(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},zero:function zero(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function transform(t,i,o){var a=S.fromQuat(o).val,u=i.x,d=i.y,b=i.z;return this.setValues(a[0]*u,a[1]*u,a[2]*u,0,a[4]*d,a[5]*d,a[6]*d,0,a[8]*b,a[9]*b,a[10]*b,0,t.x,t.y,t.z,1)},xyz:function xyz(t,i,o){this.identity();var a=this.val;return a[12]=t,a[13]=i,a[14]=o,this},scaling:function scaling(t,i,o){this.zero();var a=this.val;return a[0]=t,a[5]=i,a[10]=o,a[15]=1,this},identity:function identity(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function transpose(){var t=this.val,i=t[1],o=t[2],a=t[3],u=t[6],d=t[7],b=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=i,t[6]=t[9],t[7]=t[13],t[8]=o,t[9]=u,t[11]=t[14],t[12]=a,t[13]=d,t[14]=b,this},getInverse:function getInverse(t){return this.copy(t),this.invert()},invert:function invert(){var t=this.val,i=t[0],o=t[1],a=t[2],u=t[3],d=t[4],b=t[5],S=t[6],C=t[7],M=t[8],P=t[9],R=t[10],O=t[11],B=t[12],N=t[13],Y=t[14],G=t[15],X=i*b-o*d,U=i*S-a*d,z=i*C-u*d,V=o*S-a*b,W=o*C-u*b,H=a*C-u*S,j=M*N-P*B,q=M*Y-R*B,Z=M*G-O*B,K=P*Y-R*N,$=P*G-O*N,tt=R*G-O*Y,et=X*tt-U*$+z*K+V*Z-W*q+H*j;return et?(et=1/et,this.setValues((b*tt-S*$+C*K)*et,(a*$-o*tt-u*K)*et,(N*H-Y*W+G*V)*et,(R*W-P*H-O*V)*et,(S*Z-d*tt-C*q)*et,(i*tt-a*Z+u*q)*et,(Y*z-B*H-G*U)*et,(M*H-R*z+O*U)*et,(d*$-b*Z+C*j)*et,(o*Z-i*$-u*j)*et,(B*W-N*z+G*X)*et,(P*z-M*W-O*X)*et,(b*q-d*K-S*j)*et,(i*K-o*q+a*j)*et,(N*U-B*V-Y*X)*et,(M*V-P*U+R*X)*et)):this},adjoint:function adjoint(){var t=this.val,i=t[0],o=t[1],a=t[2],u=t[3],d=t[4],b=t[5],S=t[6],C=t[7],M=t[8],P=t[9],R=t[10],O=t[11],B=t[12],N=t[13],Y=t[14],G=t[15];return this.setValues(b*(R*G-O*Y)-P*(S*G-C*Y)+N*(S*O-C*R),-(o*(R*G-O*Y)-P*(a*G-u*Y)+N*(a*O-u*R)),o*(S*G-C*Y)-b*(a*G-u*Y)+N*(a*C-u*S),-(o*(S*O-C*R)-b*(a*O-u*R)+P*(a*C-u*S)),-(d*(R*G-O*Y)-M*(S*G-C*Y)+B*(S*O-C*R)),i*(R*G-O*Y)-M*(a*G-u*Y)+B*(a*O-u*R),-(i*(S*G-C*Y)-d*(a*G-u*Y)+B*(a*C-u*S)),i*(S*O-C*R)-d*(a*O-u*R)+M*(a*C-u*S),d*(P*G-O*N)-M*(b*G-C*N)+B*(b*O-C*P),-(i*(P*G-O*N)-M*(o*G-u*N)+B*(o*O-u*P)),i*(b*G-C*N)-d*(o*G-u*N)+B*(o*C-u*b),-(i*(b*O-C*P)-d*(o*O-u*P)+M*(o*C-u*b)),-(d*(P*Y-R*N)-M*(b*Y-S*N)+B*(b*R-S*P)),i*(P*Y-R*N)-M*(o*Y-a*N)+B*(o*R-a*P),-(i*(b*Y-S*N)-d*(o*Y-a*N)+B*(o*S-a*b)),i*(b*R-S*P)-d*(o*R-a*P)+M*(o*S-a*b))},determinant:function determinant(){var t=this.val,i=t[0],o=t[1],a=t[2],u=t[3],d=t[4],b=t[5],S=t[6],C=t[7],M=t[8],P=t[9],R=t[10],O=t[11],B=t[12],N=t[13],Y=t[14],G=t[15];return(i*b-o*d)*(R*G-O*Y)-(i*S-a*d)*(P*G-O*N)+(i*C-u*d)*(P*Y-R*N)+(o*S-a*b)*(M*G-O*B)-(o*C-u*b)*(M*Y-R*B)+(a*C-u*S)*(M*N-P*B)},multiply:function multiply(t){var i=this.val,o=i[0],a=i[1],u=i[2],d=i[3],b=i[4],S=i[5],C=i[6],M=i[7],P=i[8],R=i[9],O=i[10],B=i[11],N=i[12],Y=i[13],G=i[14],X=i[15],U=t.val,z=U[0],V=U[1],W=U[2],H=U[3];return i[0]=z*o+V*b+W*P+H*N,i[1]=z*a+V*S+W*R+H*Y,i[2]=z*u+V*C+W*O+H*G,i[3]=z*d+V*M+W*B+H*X,z=U[4],V=U[5],W=U[6],H=U[7],i[4]=z*o+V*b+W*P+H*N,i[5]=z*a+V*S+W*R+H*Y,i[6]=z*u+V*C+W*O+H*G,i[7]=z*d+V*M+W*B+H*X,z=U[8],V=U[9],W=U[10],H=U[11],i[8]=z*o+V*b+W*P+H*N,i[9]=z*a+V*S+W*R+H*Y,i[10]=z*u+V*C+W*O+H*G,i[11]=z*d+V*M+W*B+H*X,z=U[12],V=U[13],W=U[14],H=U[15],i[12]=z*o+V*b+W*P+H*N,i[13]=z*a+V*S+W*R+H*Y,i[14]=z*u+V*C+W*O+H*G,i[15]=z*d+V*M+W*B+H*X,this},multiplyLocal:function multiplyLocal(t){var i=this.val,o=t.val;return this.setValues(i[0]*o[0]+i[1]*o[4]+i[2]*o[8]+i[3]*o[12],i[0]*o[1]+i[1]*o[5]+i[2]*o[9]+i[3]*o[13],i[0]*o[2]+i[1]*o[6]+i[2]*o[10]+i[3]*o[14],i[0]*o[3]+i[1]*o[7]+i[2]*o[11]+i[3]*o[15],i[4]*o[0]+i[5]*o[4]+i[6]*o[8]+i[7]*o[12],i[4]*o[1]+i[5]*o[5]+i[6]*o[9]+i[7]*o[13],i[4]*o[2]+i[5]*o[6]+i[6]*o[10]+i[7]*o[14],i[4]*o[3]+i[5]*o[7]+i[6]*o[11]+i[7]*o[15],i[8]*o[0]+i[9]*o[4]+i[10]*o[8]+i[11]*o[12],i[8]*o[1]+i[9]*o[5]+i[10]*o[9]+i[11]*o[13],i[8]*o[2]+i[9]*o[6]+i[10]*o[10]+i[11]*o[14],i[8]*o[3]+i[9]*o[7]+i[10]*o[11]+i[11]*o[15],i[12]*o[0]+i[13]*o[4]+i[14]*o[8]+i[15]*o[12],i[12]*o[1]+i[13]*o[5]+i[14]*o[9]+i[15]*o[13],i[12]*o[2]+i[13]*o[6]+i[14]*o[10]+i[15]*o[14],i[12]*o[3]+i[13]*o[7]+i[14]*o[11]+i[15]*o[15])},premultiply:function premultiply(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function multiplyMatrices(t,i){var o=t.val,a=i.val,u=o[0],d=o[4],b=o[8],S=o[12],C=o[1],M=o[5],P=o[9],R=o[13],O=o[2],B=o[6],N=o[10],Y=o[14],G=o[3],X=o[7],U=o[11],z=o[15],V=a[0],W=a[4],H=a[8],j=a[12],q=a[1],Z=a[5],K=a[9],$=a[13],tt=a[2],et=a[6],it=a[10],nt=a[14],rt=a[3],st=a[7],ot=a[11],at=a[15];return this.setValues(u*V+d*q+b*tt+S*rt,C*V+M*q+P*tt+R*rt,O*V+B*q+N*tt+Y*rt,G*V+X*q+U*tt+z*rt,u*W+d*Z+b*et+S*st,C*W+M*Z+P*et+R*st,O*W+B*Z+N*et+Y*st,G*W+X*Z+U*et+z*st,u*H+d*K+b*it+S*ot,C*H+M*K+P*it+R*ot,O*H+B*K+N*it+Y*ot,G*H+X*K+U*it+z*ot,u*j+d*$+b*nt+S*at,C*j+M*$+P*nt+R*at,O*j+B*$+N*nt+Y*at,G*j+X*$+U*nt+z*at)},translate:function translate(t){return this.translateXYZ(t.x,t.y,t.z)},translateXYZ:function translateXYZ(t,i,o){var a=this.val;return a[12]=a[0]*t+a[4]*i+a[8]*o+a[12],a[13]=a[1]*t+a[5]*i+a[9]*o+a[13],a[14]=a[2]*t+a[6]*i+a[10]*o+a[14],a[15]=a[3]*t+a[7]*i+a[11]*o+a[15],this},scale:function scale(t){return this.scaleXYZ(t.x,t.y,t.z)},scaleXYZ:function scaleXYZ(t,i,o){var a=this.val;return a[0]=a[0]*t,a[1]=a[1]*t,a[2]=a[2]*t,a[3]=a[3]*t,a[4]=a[4]*i,a[5]=a[5]*i,a[6]=a[6]*i,a[7]=a[7]*i,a[8]=a[8]*o,a[9]=a[9]*o,a[10]=a[10]*o,a[11]=a[11]*o,this},makeRotationAxis:function makeRotationAxis(t,i){var o=Math.cos(i),a=Math.sin(i),u=1-o,d=t.x,b=t.y,S=t.z,C=u*d,M=u*b;return this.setValues(C*d+o,C*b-a*S,C*S+a*b,0,C*b+a*S,M*b+o,M*S-a*d,0,C*S-a*b,M*S+a*d,u*S*S+o,0,0,0,0,1)},rotate:function rotate(t,i){var o=this.val,a=i.x,u=i.y,b=i.z,S=Math.sqrt(a*a+u*u+b*b);if(Math.abs(S)<d)return this;a*=S=1/S,u*=S,b*=S;var C=Math.sin(t),M=Math.cos(t),P=1-M,R=o[0],O=o[1],B=o[2],N=o[3],Y=o[4],G=o[5],X=o[6],U=o[7],z=o[8],V=o[9],W=o[10],H=o[11],j=o[12],q=o[13],Z=o[14],K=o[15],$=a*a*P+M,tt=u*a*P+b*C,et=b*a*P-u*C,it=a*u*P-b*C,nt=u*u*P+M,rt=b*u*P+a*C,st=a*b*P+u*C,ot=u*b*P-a*C,at=b*b*P+M;return this.setValues(R*$+Y*tt+z*et,O*$+G*tt+V*et,B*$+X*tt+W*et,N*$+U*tt+H*et,R*it+Y*nt+z*rt,O*it+G*nt+V*rt,B*it+X*nt+W*rt,N*it+U*nt+H*rt,R*st+Y*ot+z*at,O*st+G*ot+V*at,B*st+X*ot+W*at,N*st+U*ot+H*at,j,q,Z,K)},rotateX:function rotateX(t){var i=this.val,o=Math.sin(t),a=Math.cos(t),u=i[4],d=i[5],b=i[6],S=i[7],C=i[8],M=i[9],P=i[10],R=i[11];return i[4]=u*a+C*o,i[5]=d*a+M*o,i[6]=b*a+P*o,i[7]=S*a+R*o,i[8]=C*a-u*o,i[9]=M*a-d*o,i[10]=P*a-b*o,i[11]=R*a-S*o,this},rotateY:function rotateY(t){var i=this.val,o=Math.sin(t),a=Math.cos(t),u=i[0],d=i[1],b=i[2],S=i[3],C=i[8],M=i[9],P=i[10],R=i[11];return i[0]=u*a-C*o,i[1]=d*a-M*o,i[2]=b*a-P*o,i[3]=S*a-R*o,i[8]=u*o+C*a,i[9]=d*o+M*a,i[10]=b*o+P*a,i[11]=S*o+R*a,this},rotateZ:function rotateZ(t){var i=this.val,o=Math.sin(t),a=Math.cos(t),u=i[0],d=i[1],b=i[2],S=i[3],C=i[4],M=i[5],P=i[6],R=i[7];return i[0]=u*a+C*o,i[1]=d*a+M*o,i[2]=b*a+P*o,i[3]=S*a+R*o,i[4]=C*a-u*o,i[5]=M*a-d*o,i[6]=P*a-b*o,i[7]=R*a-S*o,this},fromRotationTranslation:function fromRotationTranslation(t,i){var o=t.x,a=t.y,u=t.z,d=t.w,b=o+o,S=a+a,C=u+u,M=o*b,P=o*S,R=o*C,O=a*S,B=a*C,N=u*C,Y=d*b,G=d*S,X=d*C;return this.setValues(1-(O+N),P+X,R-G,0,P-X,1-(M+N),B+Y,0,R+G,B-Y,1-(M+O),0,i.x,i.y,i.z,1)},fromQuat:function fromQuat(t){var i=t.x,o=t.y,a=t.z,u=t.w,d=i+i,b=o+o,S=a+a,C=i*d,M=i*b,P=i*S,R=o*b,O=o*S,B=a*S,N=u*d,Y=u*b,G=u*S;return this.setValues(1-(R+B),M+G,P-Y,0,M-G,1-(C+B),O+N,0,P+Y,O-N,1-(C+R),0,0,0,0,1)},frustum:function frustum(t,i,o,a,u,d){var b=1/(i-t),S=1/(a-o),C=1/(u-d);return this.setValues(2*u*b,0,0,0,0,2*u*S,0,0,(i+t)*b,(a+o)*S,(d+u)*C,-1,0,0,d*u*2*C,0)},perspective:function perspective(t,i,o,a){var u=1/Math.tan(t/2),d=1/(o-a);return this.setValues(u/i,0,0,0,0,u,0,0,0,0,(a+o)*d,-1,0,0,2*a*o*d,0)},perspectiveLH:function perspectiveLH(t,i,o,a){return this.setValues(2*o/t,0,0,0,0,2*o/i,0,0,0,0,-a/(o-a),1,0,0,o*a/(o-a),0)},ortho:function ortho(t,i,o,a,u,d){var b=t-i,S=o-a,C=u-d;return b=0===b?b:1/b,S=0===S?S:1/S,C=0===C?C:1/C,this.setValues(-2*b,0,0,0,0,-2*S,0,0,0,0,2*C,0,(t+i)*b,(a+o)*S,(d+u)*C,1)},lookAtRH:function lookAtRH(t,i,o){var a=this.val;return R.subVectors(t,i),0===R.getLengthSquared()&&(R.z=1),R.normalize(),M.crossVectors(o,R),0===M.getLengthSquared()&&(1===Math.abs(o.z)?R.x+=1e-4:R.z+=1e-4,R.normalize(),M.crossVectors(o,R)),M.normalize(),P.crossVectors(R,M),a[0]=M.x,a[1]=M.y,a[2]=M.z,a[4]=P.x,a[5]=P.y,a[6]=P.z,a[8]=R.x,a[9]=R.y,a[10]=R.z,this},lookAt:function lookAt(t,i,o){var a=t.x,u=t.y,b=t.z,S=o.x,C=o.y,M=o.z,P=i.x,R=i.y,O=i.z;if(Math.abs(a-P)<d&&Math.abs(u-R)<d&&Math.abs(b-O)<d)return this.identity();var B=a-P,N=u-R,Y=b-O,G=1/Math.sqrt(B*B+N*N+Y*Y),X=C*(Y*=G)-M*(N*=G),U=M*(B*=G)-S*Y,z=S*N-C*B;(G=Math.sqrt(X*X+U*U+z*z))?(X*=G=1/G,U*=G,z*=G):(X=0,U=0,z=0);var V=N*z-Y*U,W=Y*X-B*z,H=B*U-N*X;return(G=Math.sqrt(V*V+W*W+H*H))?(V*=G=1/G,W*=G,H*=G):(V=0,W=0,H=0),this.setValues(X,V,B,0,U,W,N,0,z,H,Y,0,-(X*a+U*u+z*b),-(V*a+W*u+H*b),-(B*a+N*u+Y*b),1)},yawPitchRoll:function yawPitchRoll(t,i,o){this.zero(),S.zero(),C.zero();var a=this.val,u=S.val,d=C.val,b=Math.sin(o),M=Math.cos(o);return a[10]=1,a[15]=1,a[0]=M,a[1]=b,a[4]=-b,a[5]=M,b=Math.sin(i),M=Math.cos(i),u[0]=1,u[15]=1,u[5]=M,u[10]=M,u[9]=-b,u[6]=b,b=Math.sin(t),M=Math.cos(t),d[5]=1,d[15]=1,d[0]=M,d[2]=-b,d[8]=b,d[10]=M,this.multiplyLocal(S),this.multiplyLocal(C),this},setWorldMatrix:function setWorldMatrix(t,i,o,a,u){return this.yawPitchRoll(t.y,t.x,t.z),S.scaling(o.x,o.y,o.z),C.xyz(i.x,i.y,i.z),this.multiplyLocal(S),this.multiplyLocal(C),a&&this.multiplyLocal(a),u&&this.multiplyLocal(u),this},multiplyToMat4:function multiplyToMat4(t,i){var o=this.val,a=t.val,u=o[0],d=o[1],b=o[2],S=o[3],C=o[4],M=o[5],P=o[6],R=o[7],O=o[8],B=o[9],N=o[10],Y=o[11],G=o[12],X=o[13],U=o[14],z=o[15],V=a[0],W=a[1],H=a[2],j=a[3],q=a[4],Z=a[5],K=a[6],$=a[7],tt=a[8],et=a[9],it=a[10],nt=a[11],rt=a[12],st=a[13],ot=a[14],at=a[15];return i.setValues(V*u+W*C+H*O+j*G,W*d+W*M+H*B+j*X,H*b+W*P+H*N+j*U,j*S+W*R+H*Y+j*z,q*u+Z*C+K*O+$*G,q*d+Z*M+K*B+$*X,q*b+Z*P+K*N+$*U,q*S+Z*R+K*Y+$*z,tt*u+et*C+it*O+nt*G,tt*d+et*M+it*B+nt*X,tt*b+et*P+it*N+nt*U,tt*S+et*R+it*Y+nt*z,rt*u+st*C+ot*O+at*G,rt*d+st*M+ot*B+at*X,rt*b+st*P+ot*N+at*U,rt*S+st*R+ot*Y+at*z)},fromRotationXYTranslation:function fromRotationXYTranslation(t,i,o){var a=i.x,u=i.y,d=i.z,b=Math.sin(t.x),S=Math.cos(t.x),C=Math.sin(t.y),M=Math.cos(t.y),P=a,R=u,O=d,B=-b,N=0-B*C,Y=0-S*C,G=B*M,X=S*M;return o||(P=M*a+C*d,R=N*a+S*u+G*d,O=Y*a+b*u+X*d),this.setValues(M,N,Y,0,0,S,b,0,C,G,X,0,P,R,O,1)},getMaxScaleOnAxis:function getMaxScaleOnAxis(){var t=this.val,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],o=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],a=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(i,o,a))}}),S=new b,C=new b,M=new u,P=new u,R=new u;t.exports=b},function(t,i,o){var a=o(0),u=o(15),d=o(205),b=o(11),S=o(216),C=o(45),M=o(217),P=o(46),R=new a({initialize:function File(t,i){this.loader=t,this.cache=b(i,"cache",!1),this.type=b(i,"type",!1),this.key=b(i,"key",!1);var o=this.key;if(t.prefix&&""!==t.prefix&&(this.key=t.prefix+o),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var a=b(i,"url");void 0===a?a=t.path+o+"."+b(i,"extension",""):"string"!=typeof a||a.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)||(a=t.path+a),this.url=a,this.src="",this.xhrSettings=P(b(i,"responseType",void 0)),b(i,"xhrSettings",!1)&&(this.xhrSettings=C(this.xhrSettings,b(i,"xhrSettings",{}))),this.xhrLoader=null,this.state="function"==typeof this.url?u.FILE_POPULATED:u.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=b(i,"config",{}),this.multiFile,this.linkFile},setLink:function setLink(t){this.linkFile=t,t.linkFile=this},resetXHR:function resetXHR(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function load(){this.state===u.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=u.FILE_LOADING,this.src=S(this,this.loader.baseURL),0===this.src.indexOf("data:")?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=M(this,this.loader.xhr))},onLoad:function onLoad(t,i){var o=t.responseURL&&0===t.responseURL.indexOf("file://")&&0===i.target.status,a=!(i.target&&200!==i.target.status)||o;4===t.readyState&&t.status>=400&&t.status<=599&&(a=!1),this.state=u.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,a)},onError:function onError(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function onProgress(t){t.lengthComputable&&(this.bytesLoaded=t.loaded,this.bytesTotal=t.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(d.FILE_PROGRESS,this,this.percentComplete))},onProcess:function onProcess(){this.state=u.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function onProcessComplete(){this.state=u.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function onProcessError(){this.state=u.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function hasCacheConflict(){return this.cache&&this.cache.exists(this.key)},addToCache:function addToCache(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function pendingDestroy(t){void 0===t&&(t=this.data);var i=this.key,o=this.type;this.loader.emit(d.FILE_COMPLETE,i,o,t),this.loader.emit(d.FILE_KEY_COMPLETE+o+"-"+i,i,o,t),this.loader.flagForRemoval(this)},destroy:function destroy(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});R.createObjectURL=function(t,i,o){if("function"==typeof URL)t.src=URL.createObjectURL(i);else{var a=new FileReader;a.onload=function(){t.removeAttribute("crossOrigin"),t.src="data:"+(i.type||o)+";base64,"+a.result.split(",")[1]},a.onerror=t.onerror,a.readAsDataURL(i)}},R.revokeObjectURL=function(t){"function"==typeof URL&&URL.revokeObjectURL(t.src)},t.exports=R},function(t,i){var o={},a={install:function install(t){for(var i in o)t[i]=o[i]},register:function register(t,i){o[t]=i},destroy:function destroy(){o={}}};t.exports=a},function(t,i,o){var a=o(0),u=o(4),d=o(2),b=new a({initialize:function TransformMatrix(t,i,o,a,u,d){void 0===t&&(t=1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=1),void 0===u&&(u=0),void 0===d&&(d=0),this.matrix=new Float32Array([t,i,o,a,u,d,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function get(){return this.matrix[0]},set:function set(t){this.matrix[0]=t}},b:{get:function get(){return this.matrix[1]},set:function set(t){this.matrix[1]=t}},c:{get:function get(){return this.matrix[2]},set:function set(t){this.matrix[2]=t}},d:{get:function get(){return this.matrix[3]},set:function set(t){this.matrix[3]=t}},e:{get:function get(){return this.matrix[4]},set:function set(t){this.matrix[4]=t}},f:{get:function get(){return this.matrix[5]},set:function set(t){this.matrix[5]=t}},tx:{get:function get(){return this.matrix[4]},set:function set(t){this.matrix[4]=t}},ty:{get:function get(){return this.matrix[5]},set:function set(t){this.matrix[5]=t}},rotation:{get:function get(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function get(){var t=this.matrix,i=t[0],o=t[1],a=t[2],d=t[3];return i||o?o>0?Math.acos(i/this.scaleX):-Math.acos(i/this.scaleX):a||d?u.TAU-(d>0?Math.acos(-a/this.scaleY):-Math.acos(a/this.scaleY)):0}},scaleX:{get:function get(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function get(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function loadIdentity(){var t=this.matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},translate:function translate(t,i){var o=this.matrix;return o[4]=o[0]*t+o[2]*i+o[4],o[5]=o[1]*t+o[3]*i+o[5],this},scale:function scale(t,i){var o=this.matrix;return o[0]*=t,o[1]*=t,o[2]*=i,o[3]*=i,this},rotate:function rotate(t){var i=Math.sin(t),o=Math.cos(t),a=this.matrix,u=a[0],d=a[1],b=a[2],S=a[3];return a[0]=u*o+b*i,a[1]=d*o+S*i,a[2]=u*-i+b*o,a[3]=d*-i+S*o,this},multiply:function multiply(t,i){var o=this.matrix,a=t.matrix,u=o[0],d=o[1],b=o[2],S=o[3],C=o[4],M=o[5],P=a[0],R=a[1],O=a[2],B=a[3],N=a[4],Y=a[5],G=void 0===i?this:i;return G.a=P*u+R*b,G.b=P*d+R*S,G.c=O*u+B*b,G.d=O*d+B*S,G.e=N*u+Y*b+C,G.f=N*d+Y*S+M,G},multiplyWithOffset:function multiplyWithOffset(t,i,o){var a=this.matrix,u=t.matrix,d=a[0],b=a[1],S=a[2],C=a[3],M=i*d+o*S+a[4],P=i*b+o*C+a[5],R=u[0],O=u[1],B=u[2],N=u[3],Y=u[4],G=u[5];return a[0]=R*d+O*S,a[1]=R*b+O*C,a[2]=B*d+N*S,a[3]=B*b+N*C,a[4]=Y*d+G*S+M,a[5]=Y*b+G*C+P,this},transform:function transform(t,i,o,a,u,d){var b=this.matrix,S=b[0],C=b[1],M=b[2],P=b[3],R=b[4],O=b[5];return b[0]=t*S+i*M,b[1]=t*C+i*P,b[2]=o*S+a*M,b[3]=o*C+a*P,b[4]=u*S+d*M+R,b[5]=u*C+d*P+O,this},transformPoint:function transformPoint(t,i,o){void 0===o&&(o={x:0,y:0});var a=this.matrix,u=a[0],d=a[1],b=a[2],S=a[3],C=a[4],M=a[5];return o.x=t*u+i*b+C,o.y=t*d+i*S+M,o},invert:function invert(){var t=this.matrix,i=t[0],o=t[1],a=t[2],u=t[3],d=t[4],b=t[5],S=i*u-o*a;return t[0]=u/S,t[1]=-o/S,t[2]=-a/S,t[3]=i/S,t[4]=(a*b-u*d)/S,t[5]=-(i*b-o*d)/S,this},copyFrom:function copyFrom(t){var i=this.matrix;return i[0]=t.a,i[1]=t.b,i[2]=t.c,i[3]=t.d,i[4]=t.e,i[5]=t.f,this},copyFromArray:function copyFromArray(t){var i=this.matrix;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],this},copyToContext:function copyToContext(t){var i=this.matrix;return t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),t},setToContext:function setToContext(t){var i=this.matrix;return t.setTransform(i[0],i[1],i[2],i[3],i[4],i[5]),t},copyToArray:function copyToArray(t){var i=this.matrix;return void 0===t?t=[i[0],i[1],i[2],i[3],i[4],i[5]]:(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5]),t},setTransform:function setTransform(t,i,o,a,u,d){var b=this.matrix;return b[0]=t,b[1]=i,b[2]=o,b[3]=a,b[4]=u,b[5]=d,this},decomposeMatrix:function decomposeMatrix(){var t=this.decomposedMatrix,i=this.matrix,o=i[0],a=i[1],u=i[2],d=i[3],b=o*d-a*u;if(t.translateX=i[4],t.translateY=i[5],o||a){var S=Math.sqrt(o*o+a*a);t.rotation=a>0?Math.acos(o/S):-Math.acos(o/S),t.scaleX=S,t.scaleY=b/S}else if(u||d){var C=Math.sqrt(u*u+d*d);t.rotation=.5*Math.PI-(d>0?Math.acos(-u/C):-Math.acos(u/C)),t.scaleX=b/C,t.scaleY=C}else t.rotation=0,t.scaleX=0,t.scaleY=0;return t},applyITRS:function applyITRS(t,i,o,a,u){var d=this.matrix,b=Math.sin(o),S=Math.cos(o);return d[4]=t,d[5]=i,d[0]=S*a,d[1]=b*a,d[2]=-b*u,d[3]=S*u,this},applyInverse:function applyInverse(t,i,o){void 0===o&&(o=new d);var a=this.matrix,u=a[0],b=a[1],S=a[2],C=a[3],M=a[4],P=a[5],R=1/(u*C+S*-b);return o.x=C*R*t+-S*R*i+(P*S-M*C)*R,o.y=u*R*i+-b*R*t+(-P*u+M*b)*R,o},getX:function getX(t,i){return t*this.a+i*this.c+this.e},getY:function getY(t,i){return t*this.b+i*this.d+this.f},getXRound:function getXRound(t,i,o){var a=this.getX(t,i);return o&&(a=Math.round(a)),a},getYRound:function getYRound(t,i,o){var a=this.getY(t,i);return o&&(a=Math.round(a)),a},getCSSMatrix:function getCSSMatrix(){var t=this.matrix;return"matrix("+t[0]+","+t[1]+","+t[2]+","+t[3]+","+t[4]+","+t[5]+")"},destroy:function destroy(){this.matrix=null,this.decomposedMatrix=null}});t.exports=b},function(t,i){t.exports=function CheckMatrix(t){if(!Array.isArray(t)||t.length<2||!Array.isArray(t[0]))return!1;for(var i=t[0].length,o=1;o<t.length;o++)if(t[o].length!==i)return!1;return!0}},function(t,i,o){var a=o(0),u=o(299),d=o(61),b=o(300),S=o(26),C=o(301),M=o(306),P=new a({initialize:function Rectangle(t,i,o,a){void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),this.type=S.RECTANGLE,this.x=t,this.y=i,this.width=o,this.height=a},contains:function contains(t,i){return u(this,t,i)},getPoint:function getPoint(t,i){return d(this,t,i)},getPoints:function getPoints(t,i,o){return b(this,t,i,o)},getRandomPoint:function getRandomPoint(t){return M(this,t)},setTo:function setTo(t,i,o,a){return this.x=t,this.y=i,this.width=o,this.height=a,this},setEmpty:function setEmpty(){return this.setTo(0,0,0,0)},setPosition:function setPosition(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setSize:function setSize(t,i){return void 0===i&&(i=t),this.width=t,this.height=i,this},isEmpty:function isEmpty(){return this.width<=0||this.height<=0},getLineA:function getLineA(t){return void 0===t&&(t=new C),t.setTo(this.x,this.y,this.right,this.y),t},getLineB:function getLineB(t){return void 0===t&&(t=new C),t.setTo(this.right,this.y,this.right,this.bottom),t},getLineC:function getLineC(t){return void 0===t&&(t=new C),t.setTo(this.right,this.bottom,this.x,this.bottom),t},getLineD:function getLineD(t){return void 0===t&&(t=new C),t.setTo(this.x,this.bottom,this.x,this.y),t},left:{get:function get(){return this.x},set:function set(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}},right:{get:function get(){return this.x+this.width},set:function set(t){t<=this.x?this.width=0:this.width=t-this.x}},top:{get:function get(){return this.y},set:function set(t){t>=this.bottom?this.height=0:this.height=this.bottom-t,this.y=t}},bottom:{get:function get(){return this.y+this.height},set:function set(t){t<=this.y?this.height=0:this.height=t-this.y}},centerX:{get:function get(){return this.x+this.width/2},set:function set(t){this.x=t-this.width/2}},centerY:{get:function get(){return this.y+this.height/2},set:function set(t){this.y=t-this.height/2}}});t.exports=P},function(t,i){t.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},function(t,i,o){var a=o(7);t.exports=function Extend(){var t,i,o,u,d,b,S=arguments[0]||{},C=1,M=arguments.length,P=!1;for("boolean"==typeof S&&(P=S,S=arguments[1]||{},C=2),M===C&&(S=this,--C);C<M;C++)if(null!=(t=arguments[C]))for(i in t)o=S[i],S!==(u=t[i])&&(P&&u&&(a(u)||(d=Array.isArray(u)))?(d?(d=!1,b=o&&Array.isArray(o)?o:[]):b=o&&a(o)?o:{},S[i]=Extend(P,b,u)):void 0!==u&&(S[i]=u));return S}},function(t,i){t.exports=function Between(t,i,o,a){return Math.atan2(a-i,o-t)}},function(t,i){t.exports=function Normalize(t){return(t%=2*Math.PI)>=0?t:t+2*Math.PI}},function(t,i,o){var a=o(6);t.exports=function Wrap(t){return a(t,-Math.PI,Math.PI)}},function(t,i,o){var a=o(6);t.exports=function WrapDegrees(t){return a(t,-180,180)}},function(t,i){t.exports=function Equal(t,i,o){return void 0===o&&(o=1e-4),Math.abs(t-i)<o}},function(t,i,o){var a=o(34);t.exports=function Bernstein(t,i){return a(t)/a(i)/a(t-i)}},function(t,i){t.exports=function Factorial(t){if(0===t)return 1;for(var i=t;--t;)i*=t;return i}},function(t,i){t.exports=function CatmullRom(t,i,o,a,u){var d=.5*(a-i),b=.5*(u-o),S=t*t;return(2*o-2*a+d+b)*(t*S)+(-3*o+3*a-2*d-b)*S+d*t+o}},function(t,i){t.exports=function Linear(t,i,o){return(i-t)*o+t}},function(t,i){t.exports=function SmoothStep(t,i,o){return t<=i?0:t>=o?1:(t=(t-i)/(o-i))*t*(3-2*t)}},function(t,i){t.exports=function SmootherStep(t,i,o){return(t=Math.max(0,Math.min(1,(t-i)/(o-i))))*t*t*(t*(6*t-15)+10)}},function(t,i){t.exports=function RotateAround(t,i,o,a){var u=Math.cos(a),d=Math.sin(a),b=t.x-i,S=t.y-o;return t.x=b*u-S*d+i,t.y=b*d+S*u+o,t}},function(t,i){t.exports=function RoundAwayFromZero(t){return t>0?Math.ceil(t):Math.floor(t)}},function(t,i,o){var a=o(2);t.exports=function TransformXY(t,i,o,u,d,b,S,C){void 0===C&&(C=new a);var M=Math.sin(d),P=Math.cos(d),R=P*b,O=M*b,B=-M*S,N=P*S,Y=1/(R*N+B*-O);return C.x=N*Y*t+-B*Y*i+(u*B-o*N)*Y,C.y=R*Y*i+-O*Y*t+(-u*R+o*O)*Y,C}},function(t,i,o){var a=new(o(0))({initialize:function Matrix3(t){this.val=new Float32Array(9),t?this.copy(t):this.identity()},clone:function clone(){return new a(this)},set:function set(t){return this.copy(t)},copy:function copy(t){var i=this.val,o=t.val;return i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],i[4]=o[4],i[5]=o[5],i[6]=o[6],i[7]=o[7],i[8]=o[8],this},fromMat4:function fromMat4(t){var i=t.val,o=this.val;return o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[4],o[4]=i[5],o[5]=i[6],o[6]=i[8],o[7]=i[9],o[8]=i[10],this},fromArray:function fromArray(t){var i=this.val;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],this},identity:function identity(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},transpose:function transpose(){var t=this.val,i=t[1],o=t[2],a=t[5];return t[1]=t[3],t[2]=t[6],t[3]=i,t[5]=t[7],t[6]=o,t[7]=a,this},invert:function invert(){var t=this.val,i=t[0],o=t[1],a=t[2],u=t[3],d=t[4],b=t[5],S=t[6],C=t[7],M=t[8],P=M*d-b*C,R=-M*u+b*S,O=C*u-d*S,B=i*P+o*R+a*O;return B?(B=1/B,t[0]=P*B,t[1]=(-M*o+a*C)*B,t[2]=(b*o-a*d)*B,t[3]=R*B,t[4]=(M*i-a*S)*B,t[5]=(-b*i+a*u)*B,t[6]=O*B,t[7]=(-C*i+o*S)*B,t[8]=(d*i-o*u)*B,this):null},adjoint:function adjoint(){var t=this.val,i=t[0],o=t[1],a=t[2],u=t[3],d=t[4],b=t[5],S=t[6],C=t[7],M=t[8];return t[0]=d*M-b*C,t[1]=a*C-o*M,t[2]=o*b-a*d,t[3]=b*S-u*M,t[4]=i*M-a*S,t[5]=a*u-i*b,t[6]=u*C-d*S,t[7]=o*S-i*C,t[8]=i*d-o*u,this},determinant:function determinant(){var t=this.val,i=t[0],o=t[1],a=t[2],u=t[3],d=t[4],b=t[5],S=t[6],C=t[7],M=t[8];return i*(M*d-b*C)+o*(-M*u+b*S)+a*(C*u-d*S)},multiply:function multiply(t){var i=this.val,o=i[0],a=i[1],u=i[2],d=i[3],b=i[4],S=i[5],C=i[6],M=i[7],P=i[8],R=t.val,O=R[0],B=R[1],N=R[2],Y=R[3],G=R[4],X=R[5],U=R[6],z=R[7],V=R[8];return i[0]=O*o+B*d+N*C,i[1]=O*a+B*b+N*M,i[2]=O*u+B*S+N*P,i[3]=Y*o+G*d+X*C,i[4]=Y*a+G*b+X*M,i[5]=Y*u+G*S+X*P,i[6]=U*o+z*d+V*C,i[7]=U*a+z*b+V*M,i[8]=U*u+z*S+V*P,this},translate:function translate(t){var i=this.val,o=t.x,a=t.y;return i[6]=o*i[0]+a*i[3]+i[6],i[7]=o*i[1]+a*i[4]+i[7],i[8]=o*i[2]+a*i[5]+i[8],this},rotate:function rotate(t){var i=this.val,o=i[0],a=i[1],u=i[2],d=i[3],b=i[4],S=i[5],C=Math.sin(t),M=Math.cos(t);return i[0]=M*o+C*d,i[1]=M*a+C*b,i[2]=M*u+C*S,i[3]=M*d-C*o,i[4]=M*b-C*a,i[5]=M*S-C*u,this},scale:function scale(t){var i=this.val,o=t.x,a=t.y;return i[0]=o*i[0],i[1]=o*i[1],i[2]=o*i[2],i[3]=a*i[3],i[4]=a*i[4],i[5]=a*i[5],this},fromQuat:function fromQuat(t){var i=t.x,o=t.y,a=t.z,u=t.w,d=i+i,b=o+o,S=a+a,C=i*d,M=i*b,P=i*S,R=o*b,O=o*S,B=a*S,N=u*d,Y=u*b,G=u*S,X=this.val;return X[0]=1-(R+B),X[3]=M+G,X[6]=P-Y,X[1]=M-G,X[4]=1-(C+B),X[7]=O+N,X[2]=P+Y,X[5]=O-N,X[8]=1-(C+R),this},normalFromMat4:function normalFromMat4(t){var i=t.val,o=this.val,a=i[0],u=i[1],d=i[2],b=i[3],S=i[4],C=i[5],M=i[6],P=i[7],R=i[8],O=i[9],B=i[10],N=i[11],Y=i[12],G=i[13],X=i[14],U=i[15],z=a*C-u*S,V=a*M-d*S,W=a*P-b*S,H=u*M-d*C,j=u*P-b*C,q=d*P-b*M,Z=R*G-O*Y,K=R*X-B*Y,$=R*U-N*Y,tt=O*X-B*G,et=O*U-N*G,it=B*U-N*X,nt=z*it-V*et+W*tt+H*$-j*K+q*Z;return nt?(nt=1/nt,o[0]=(C*it-M*et+P*tt)*nt,o[1]=(M*$-S*it-P*K)*nt,o[2]=(S*et-C*$+P*Z)*nt,o[3]=(d*et-u*it-b*tt)*nt,o[4]=(a*it-d*$+b*K)*nt,o[5]=(u*$-a*et-b*Z)*nt,o[6]=(G*q-X*j+U*H)*nt,o[7]=(X*W-Y*q-U*V)*nt,o[8]=(Y*j-G*W+U*z)*nt,this):null}});t.exports=a},function(t,i,o){var a=o(0),u=o(42),d=o(1),b=o(14),S=1e-6,C=new Int8Array([1,2,0]),M=new Float32Array([0,0,0]),P=new b(1,0,0),R=new b(0,1,0),O=new b,B=new u,N=new a({initialize:function Quaternion(t,i,o,a){this.onChangeCallback=d,this.set(t,i,o,a)},x:{get:function get(){return this._x},set:function set(t){this._x=t,this.onChangeCallback(this)}},y:{get:function get(){return this._y},set:function set(t){this._y=t,this.onChangeCallback(this)}},z:{get:function get(){return this._z},set:function set(t){this._z=t,this.onChangeCallback(this)}},w:{get:function get(){return this._w},set:function set(t){this._w=t,this.onChangeCallback(this)}},copy:function copy(t){return this.set(t)},set:function set(t,i,o,a,u){return void 0===u&&(u=!0),"object"===_typeof(t)?(this._x=t.x||0,this._y=t.y||0,this._z=t.z||0,this._w=t.w||0):(this._x=t||0,this._y=i||0,this._z=o||0,this._w=a||0),u&&this.onChangeCallback(this),this},add:function add(t){return this._x+=t.x,this._y+=t.y,this._z+=t.z,this._w+=t.w,this.onChangeCallback(this),this},subtract:function subtract(t){return this._x-=t.x,this._y-=t.y,this._z-=t.z,this._w-=t.w,this.onChangeCallback(this),this},scale:function scale(t){return this._x*=t,this._y*=t,this._z*=t,this._w*=t,this.onChangeCallback(this),this},length:function length(){var t=this.x,i=this.y,o=this.z,a=this.w;return Math.sqrt(t*t+i*i+o*o+a*a)},lengthSq:function lengthSq(){var t=this.x,i=this.y,o=this.z,a=this.w;return t*t+i*i+o*o+a*a},normalize:function normalize(){var t=this.x,i=this.y,o=this.z,a=this.w,u=t*t+i*i+o*o+a*a;return u>0&&(u=1/Math.sqrt(u),this._x=t*u,this._y=i*u,this._z=o*u,this._w=a*u),this.onChangeCallback(this),this},dot:function dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function lerp(t,i){void 0===i&&(i=0);var o=this.x,a=this.y,u=this.z,d=this.w;return this.set(o+i*(t.x-o),a+i*(t.y-a),u+i*(t.z-u),d+i*(t.w-d))},rotationTo:function rotationTo(t,i){var o=t.x*i.x+t.y*i.y+t.z*i.z;return o<-.999999?(O.copy(P).cross(t).length()<S&&O.copy(R).cross(t),O.normalize(),this.setAxisAngle(O,Math.PI)):o>.999999?this.set(0,0,0,1):(O.copy(t).cross(i),this._x=O.x,this._y=O.y,this._z=O.z,this._w=1+o,this.normalize())},setAxes:function setAxes(t,i,o){var a=B.val;return a[0]=i.x,a[3]=i.y,a[6]=i.z,a[1]=o.x,a[4]=o.y,a[7]=o.z,a[2]=-t.x,a[5]=-t.y,a[8]=-t.z,this.fromMat3(B).normalize()},identity:function identity(){return this.set(0,0,0,1)},setAxisAngle:function setAxisAngle(t,i){i*=.5;var o=Math.sin(i);return this.set(o*t.x,o*t.y,o*t.z,Math.cos(i))},multiply:function multiply(t){var i=this.x,o=this.y,a=this.z,u=this.w,d=t.x,b=t.y,S=t.z,C=t.w;return this.set(i*C+u*d+o*S-a*b,o*C+u*b+a*d-i*S,a*C+u*S+i*b-o*d,u*C-i*d-o*b-a*S)},slerp:function slerp(t,i){var o=this.x,a=this.y,u=this.z,d=this.w,b=t.x,C=t.y,M=t.z,P=t.w,R=o*b+a*C+u*M+d*P;R<0&&(R=-R,b=-b,C=-C,M=-M,P=-P);var O=1-i,B=i;if(1-R>S){var N=Math.acos(R),Y=Math.sin(N);O=Math.sin((1-i)*N)/Y,B=Math.sin(i*N)/Y}return this.set(O*o+B*b,O*a+B*C,O*u+B*M,O*d+B*P)},invert:function invert(){var t=this.x,i=this.y,o=this.z,a=this.w,u=t*t+i*i+o*o+a*a,d=u?1/u:0;return this.set(-t*d,-i*d,-o*d,a*d)},conjugate:function conjugate(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function rotateX(t){t*=.5;var i=this.x,o=this.y,a=this.z,u=this.w,d=Math.sin(t),b=Math.cos(t);return this.set(i*b+u*d,o*b+a*d,a*b-o*d,u*b-i*d)},rotateY:function rotateY(t){t*=.5;var i=this.x,o=this.y,a=this.z,u=this.w,d=Math.sin(t),b=Math.cos(t);return this.set(i*b-a*d,o*b+u*d,a*b+i*d,u*b-o*d)},rotateZ:function rotateZ(t){t*=.5;var i=this.x,o=this.y,a=this.z,u=this.w,d=Math.sin(t),b=Math.cos(t);return this.set(i*b+o*d,o*b-i*d,a*b+u*d,u*b-a*d)},calculateW:function calculateW(){var t=this.x,i=this.y,o=this.z;return this.w=-Math.sqrt(1-t*t-i*i-o*o),this},setFromEuler:function setFromEuler(t,i){var o=t.x/2,a=t.y/2,u=t.z/2,d=Math.cos(o),b=Math.cos(a),S=Math.cos(u),C=Math.sin(o),M=Math.sin(a),P=Math.sin(u);switch(t.order){case"XYZ":this.set(C*b*S+d*M*P,d*M*S-C*b*P,d*b*P+C*M*S,d*b*S-C*M*P,i);break;case"YXZ":this.set(C*b*S+d*M*P,d*M*S-C*b*P,d*b*P-C*M*S,d*b*S+C*M*P,i);break;case"ZXY":this.set(C*b*S-d*M*P,d*M*S+C*b*P,d*b*P+C*M*S,d*b*S-C*M*P,i);break;case"ZYX":this.set(C*b*S-d*M*P,d*M*S+C*b*P,d*b*P-C*M*S,d*b*S+C*M*P,i);break;case"YZX":this.set(C*b*S+d*M*P,d*M*S+C*b*P,d*b*P-C*M*S,d*b*S-C*M*P,i);break;case"XZY":this.set(C*b*S-d*M*P,d*M*S-C*b*P,d*b*P+C*M*S,d*b*S+C*M*P,i)}return this},setFromRotationMatrix:function setFromRotationMatrix(t){var i,o=t.val,a=o[0],u=o[4],d=o[8],b=o[1],S=o[5],C=o[9],M=o[2],P=o[6],R=o[10],O=a+S+R;return O>0?(i=.5/Math.sqrt(O+1),this.set((P-C)*i,(d-M)*i,(b-u)*i,.25/i)):a>S&&a>R?(i=2*Math.sqrt(1+a-S-R),this.set(.25*i,(u+b)/i,(d+M)/i,(P-C)/i)):S>R?(i=2*Math.sqrt(1+S-a-R),this.set((u+b)/i,.25*i,(C+P)/i,(d-M)/i)):(i=2*Math.sqrt(1+R-a-S),this.set((d+M)/i,(C+P)/i,.25*i,(b-u)/i)),this},fromMat3:function fromMat3(t){var i,o=t.val,a=o[0]+o[4]+o[8];if(a>0)i=Math.sqrt(a+1),this.w=.5*i,i=.5/i,this._x=(o[7]-o[5])*i,this._y=(o[2]-o[6])*i,this._z=(o[3]-o[1])*i;else{var u=0;o[4]>o[0]&&(u=1),o[8]>o[3*u+u]&&(u=2);var d=C[u],b=C[d];i=Math.sqrt(o[3*u+u]-o[3*d+d]-o[3*b+b]+1),M[u]=.5*i,i=.5/i,M[d]=(o[3*d+u]+o[3*u+d])*i,M[b]=(o[3*b+u]+o[3*u+b])*i,this._x=M[0],this._y=M[1],this._z=M[2],this._w=(o[3*b+d]-o[3*d+b])*i}return this.onChangeCallback(this),this}});t.exports=N},function(t,i,o){t.exports={ADDED_TO_SCENE:o(180),BOOT:o(181),CREATE:o(182),DESTROY:o(183),PAUSE:o(184),POST_UPDATE:o(185),PRE_RENDER:o(186),PRE_UPDATE:o(187),READY:o(188),REMOVED_FROM_SCENE:o(189),RENDER:o(190),RESUME:o(191),SHUTDOWN:o(192),SLEEP:o(193),START:o(194),TRANSITION_COMPLETE:o(195),TRANSITION_INIT:o(196),TRANSITION_OUT:o(197),TRANSITION_START:o(198),TRANSITION_WAKE:o(199),UPDATE:o(200),WAKE:o(201)}},function(t,i,o){var a=o(27),u=o(46);t.exports=function MergeXHRSettings(t,i){var o=void 0===t?u():a({},t);if(i)for(var d in i)void 0!==i[d]&&(o[d]=i[d]);return o}},function(t,i){t.exports=function XHRSettings(t,i,o,a,u,d){return void 0===t&&(t=""),void 0===i&&(i=!0),void 0===o&&(o=""),void 0===a&&(a=""),void 0===u&&(u=0),void 0===d&&(d=!1),{responseType:t,async:i,user:o,password:a,timeout:u,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:d}}},function(t,i){t.exports={width:0,height:0,displayWidth:{get:function get(){return this.scaleX*this.width},set:function set(t){this.scaleX=t/this.width}},displayHeight:{get:function get(){return this.scaleY*this.height},set:function set(t){this.scaleY=t/this.height}},setSize:function setSize(t,i){return this.width=t,this.height=i,this},setDisplaySize:function setDisplaySize(t,i){return this.displayWidth=t,this.displayHeight=i,this}}},function(t,i){var o={_depth:0,depth:{get:function get(){return this._depth},set:function set(t){this.displayList&&this.displayList.queueDepthSort(),this._depth=t}},setDepth:function setDepth(t){return void 0===t&&(t=0),this.depth=t,this}};t.exports=o},function(t,i){t.exports={flipX:!1,flipY:!1,toggleFlipX:function toggleFlipX(){return this.flipX=!this.flipX,this},toggleFlipY:function toggleFlipY(){return this.flipY=!this.flipY,this},setFlipX:function setFlipX(t){return this.flipX=t,this},setFlipY:function setFlipY(t){return this.flipY=t,this},setFlip:function setFlip(t,i){return this.flipX=t,this.flipY=i,this},resetFlip:function resetFlip(){return this.flipX=!1,this.flipY=!1,this}}},function(t,i){var o={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function setScrollFactor(t,i){return void 0===i&&(i=t),this.scrollFactorX=t,this.scrollFactorY=i,this}};t.exports=o},function(t,i,o){var a=o(4),u=o(23),d=o(41),b=o(30),S=o(31),C=o(2),M={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function get(){return(this._scaleX+this._scaleY)/2},set:function set(t){this._scaleX=t,this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function get(){return this._scaleX},set:function set(t){this._scaleX=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleY:{get:function get(){return this._scaleY},set:function set(t){this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},angle:{get:function get(){return S(this._rotation*a.RAD_TO_DEG)},set:function set(t){this.rotation=S(t)*a.DEG_TO_RAD}},rotation:{get:function get(){return this._rotation},set:function set(t){this._rotation=b(t)}},setPosition:function setPosition(t,i,o,a){return void 0===t&&(t=0),void 0===i&&(i=t),void 0===o&&(o=0),void 0===a&&(a=0),this.x=t,this.y=i,this.z=o,this.w=a,this},copyPosition:function copyPosition(t){return void 0!==t.x&&(this.x=t.x),void 0!==t.y&&(this.y=t.y),void 0!==t.z&&(this.z=t.z),void 0!==t.w&&(this.w=t.w),this},setRandomPosition:function setRandomPosition(t,i,o,a){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=this.scene.sys.scale.width),void 0===a&&(a=this.scene.sys.scale.height),this.x=t+Math.random()*o,this.y=i+Math.random()*a,this},setRotation:function setRotation(t){return void 0===t&&(t=0),this.rotation=t,this},setAngle:function setAngle(t){return void 0===t&&(t=0),this.angle=t,this},setScale:function setScale(t,i){return void 0===t&&(t=1),void 0===i&&(i=t),this.scaleX=t,this.scaleY=i,this},setX:function setX(t){return void 0===t&&(t=0),this.x=t,this},setY:function setY(t){return void 0===t&&(t=0),this.y=t,this},setZ:function setZ(t){return void 0===t&&(t=0),this.z=t,this},setW:function setW(t){return void 0===t&&(t=0),this.w=t,this},getLocalTransformMatrix:function getLocalTransformMatrix(t){return void 0===t&&(t=new u),t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function getWorldTransformMatrix(t,i){void 0===t&&(t=new u),void 0===i&&(i=new u);var o=this.parentContainer;if(!o)return this.getLocalTransformMatrix(t);for(t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);o;)i.applyITRS(o.x,o.y,o._rotation,o._scaleX,o._scaleY),i.multiply(t,t),o=o.parentContainer;return t},getLocalPoint:function getLocalPoint(t,i,o,a){o||(o=new C),a||(a=this.scene.sys.cameras.main);var u=a.scrollX,b=a.scrollY,S=t+u*this.scrollFactorX-u,M=i+b*this.scrollFactorY-b;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(S,M,o):d(S,M,this.x,this.y,this.rotation,this.scaleX,this.scaleY,o),this._originComponent&&(o.x+=this._displayOriginX,o.y+=this._displayOriginY),o},getParentRotation:function getParentRotation(){for(var t=0,i=this.parentContainer;i;)t+=i.rotation,i=i.parentContainer;return t}};t.exports=M},function(t,i){var o={_visible:!0,visible:{get:function get(){return this._visible},set:function set(t){t?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function setVisible(t){return this.visible=t,this}};t.exports=o},function(t,i,o){var a=o(0),u=o(54),d=o(222),b=o(229),S=o(55),C=o(44),M=new a({Extends:b,initialize:function GameObject(t,i){b.call(this),this.scene=t,this.displayList=null,this.type=i,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(S.ADDED_TO_SCENE,this.addedToScene,this),this.on(S.REMOVED_FROM_SCENE,this.removedFromScene,this),t.sys.queueDepthSort()},setActive:function setActive(t){return this.active=t,this},setName:function setName(t){return this.name=t,this},setState:function setState(t){return this.state=t,this},setDataEnabled:function setDataEnabled(){return this.data||(this.data=new d(this)),this},setData:function setData(t,i){return this.data||(this.data=new d(this)),this.data.set(t,i),this},incData:function incData(t,i){return this.data||(this.data=new d(this)),this.data.inc(t,i),this},toggleData:function toggleData(t){return this.data||(this.data=new d(this)),this.data.toggle(t),this},getData:function getData(t){return this.data||(this.data=new d(this)),this.data.get(t)},setInteractive:function setInteractive(t,i,o){return this.scene.sys.input.enable(this,t,i,o),this},disableInteractive:function disableInteractive(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function removeInteractive(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function addedToScene(){},removedFromScene:function removedFromScene(){},update:function update(){},toJSON:function toJSON(){return u(this)},willRender:function willRender(t){return!(M.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function getIndexList(){for(var t=this,i=this.parentContainer,o=[];i&&(o.unshift(i.getIndex(t)),t=i,i.parentContainer);)i=i.parentContainer;return this.displayList?o.unshift(this.displayList.getIndex(t)):o.unshift(this.scene.sys.displayList.getIndex(t)),o},addToDisplayList:function addToDisplayList(t){return void 0===t&&(t=this.scene.sys.displayList),this.displayList&&this.displayList!==t&&this.removeFromDisplayList(),t.exists(this)||(this.displayList=t,t.add(this,!0),t.queueDepthSort(),this.emit(S.ADDED_TO_SCENE,this,this.scene),t.events.emit(C.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function addToUpdateList(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function removeFromDisplayList(){var t=this.displayList||this.scene.sys.displayList;return t.exists(this)&&(t.remove(this,!0),t.queueDepthSort(),this.displayList=null,this.emit(S.REMOVED_FROM_SCENE,this,this.scene),t.events.emit(C.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function removeFromUpdateList(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function destroy(){this.scene&&!this.ignoreDestroy&&(this.preDestroy&&this.preDestroy.call(this),this.emit(S.DESTROY,this),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});M.RENDER_MASK=15,t.exports=M},function(t,i){t.exports=function ToJSON(t){var i={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(i.textureKey=t.texture.key,i.frameKey=t.frame.name),i}},function(t,i,o){t.exports={ADDED_TO_SCENE:o(230),DESTROY:o(231),REMOVED_FROM_SCENE:o(232),VIDEO_COMPLETE:o(233),VIDEO_CREATED:o(234),VIDEO_ERROR:o(235),VIDEO_LOOP:o(236),VIDEO_PLAY:o(237),VIDEO_SEEKED:o(238),VIDEO_SEEKING:o(239),VIDEO_STOP:o(240),VIDEO_TIMEOUT:o(241),VIDEO_UNLOCKED:o(242)}},function(t,i,o){var a=o(23),u=new a,d=new a,b=new a,S={camera:u,sprite:d,calc:b};t.exports=function GetCalcMatrix(t,i,o){var a=u,C=d,M=b;return C.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),a.copyFrom(i.matrix),o?(a.multiplyWithOffset(o,-i.scrollX*t.scrollFactorX,-i.scrollY*t.scrollFactorY),C.e=t.x,C.f=t.y):(C.e-=i.scrollX*t.scrollFactorX,C.f-=i.scrollY*t.scrollFactorY),a.multiply(C,M),S}},function(t,i){t.exports=function TransposeMatrix(t){for(var i=t.length,o=t[0].length,a=new Array(o),u=0;u<o;u++){a[u]=new Array(i);for(var d=i-1;d>-1;d--)a[u][d]=t[d][u]}return a}},function(t,i){t.exports=function RotateLeft(t,i){void 0===i&&(i=1);for(var o=null,a=0;a<i;a++)o=t.shift(),t.push(o);return o}},function(t,i){t.exports=function RotateRight(t,i){void 0===i&&(i=1);for(var o=null,a=0;a<i;a++)o=t.pop(),t.unshift(o);return o}},function(t,i){t.exports=function Shuffle(t){for(var i=t.length-1;i>0;i--){var o=Math.floor(Math.random()*(i+1)),a=t[i];t[i]=t[o],t[o]=a}return t}},function(t,i,o){var a=o(62),u=o(13);t.exports=function GetPoint(t,i,o){if(void 0===o&&(o=new u),i<=0||i>=1)return o.x=t.x,o.y=t.y,o;var d=a(t)*i;return i>.5?(d-=t.width+t.height)<=t.width?(o.x=t.right-d,o.y=t.bottom):(o.x=t.x,o.y=t.bottom-(d-t.width)):d<=t.width?(o.x=t.x+d,o.y=t.y):(o.x=t.right,o.y=t.y+(d-t.width)),o}},function(t,i){t.exports=function Perimeter(t){return 2*(t.width+t.height)}},function(t,i,o){var a,u=o(64),d=o(0),b=o(10),S=o(177),C=o(178),M=o(202),P=o(203),R=o(221),O=o(254),B=o(1),N=new d({Extends:C,initialize:function SpinePlugin(t,i,o){C.call(this,t,i,o);var a=i.game;this.isWebGL=2===a.config.renderType,this.cache=a.cache.addCustom("spine"),this.spineTextures=a.cache.addCustom("spineTextures"),this.json=a.cache.json,this.textures=a.textures,this.drawDebug=!1,this.gl,this.renderer,this.sceneRenderer,this.skeletonRenderer,this.skeletonDebugRenderer,this.plugin=M,this.temp1,this.temp2,this.isWebGL?(this.runtime=M.webgl,this.renderer=a.renderer,this.gl=a.renderer.gl,this.getAtlas=this.getAtlasWebGL):(this.runtime=M.canvas,this.renderer=a.renderer,this.getAtlas=this.getAtlasCanvas),this.renderer||(this.renderer={width:a.scale.width,height:a.scale.height,preRender:B,postRender:B,render:B,destroy:B});i.registerFileType("spine",this.spineFileCallback,t),i.registerGameObject("spine",(function add(t,i,a,u,d){var b=this.scene.sys[o],S=new R(this.scene,b,t,i,a,u,d);return this.displayList.add(S),this.updateList.add(S),S}),(function make(t,i){void 0===t&&(t={});var a=b(t,"key",null),d=b(t,"animationName",null),S=b(t,"loop",!1),C=this.scene.sys[o],M=new R(this.scene,C,0,0,a,d,S);void 0!==i&&(t.add=i),u(this.scene,M,t);var P=b(t,"skinName",!1);P&&M.setSkinByName(P);var O=b(t,"slotName",!1),B=b(t,"attachmentName",null);return O&&M.setAttachment(O,B),M.refresh()})),i.registerGameObject("spineContainer",(function addContainer(t,i,a){var u=this.scene.sys[o],d=new O(this.scene,u,t,i,a);return this.displayList.add(d),d}),(function makeContainer(t,i){void 0===t&&(t={});var a=b(t,"x",0),d=b(t,"y",0),S=b(t,"children",null),C=this.scene.sys[o],M=new O(this.scene,C,a,d,S);return void 0!==i&&(t.add=i),u(this.scene,M,t),M}))},boot:function boot(){this.isWebGL?(this.bootWebGL(),this.onResize(),this.game.scale.on(S,this.onResize,this)):this.bootCanvas();var t=this.systems.events;t.once("shutdown",this.shutdown,this),t.once("destroy",this.destroy,this),this.game.events.once("destroy",this.gameDestroy,this)},bootCanvas:function bootCanvas(){this.skeletonRenderer=new M.canvas.SkeletonRenderer(this.scene.sys.context)},bootWebGL:function bootWebGL(){var t=function setBlendMode(t,i){if(t!==this.srcBlend||i!==this.dstBlend){var o=this.context.gl;this.srcBlend=t,this.dstBlend=i,this.isDrawing&&(this.flush(),o.blendFunc(this.srcBlend,this.dstBlend))}};a||((a=new M.webgl.SceneRenderer(this.renderer.canvas,this.gl,!0)).batcher.setBlendMode=t,a.shapes.setBlendMode=t),this.sceneRenderer=a,this.skeletonRenderer=a.skeletonRenderer,this.skeletonDebugRenderer=a.skeletonDebugRenderer,this.temp1=new M.webgl.Vector3(0,0,0),this.temp2=new M.webgl.Vector3(0,0,0)},getAtlasCanvas:function getAtlasCanvas(t){var i=this.cache.get(t);if(i){var o,a=this.spineTextures;if(a.has(t))o=a.get(t);else{var u=this.textures;o=new M.TextureAtlas(i.data,(function(t){return new M.canvas.CanvasTexture(u.get(i.prefix+t).getSourceImage())}))}return o}console.warn("No atlas data for: "+t)},getAtlasWebGL:function getAtlasWebGL(t){var i=this.cache.get(t);if(i){var o,a=this.spineTextures;if(a.has(t))o=a.get(t);else{var u=this.textures,d=this.sceneRenderer.context.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),o=new M.TextureAtlas(i.data,(function(t){return new M.webgl.GLTexture(d,u.get(i.prefix+t).getSourceImage(),!1)}))}return o}console.warn("No atlas data for: "+t)},spineFileCallback:function spineFileCallback(t,i,o,a,u,d){var b;if(Array.isArray(t))for(var S=0;S<t.length;S++)b=new P(this,t[S]),this.addFile(b.files);else b=new P(this,t,i,o,a,u,d),this.addFile(b.files);return this},worldToLocal:function worldToLocal(t,i,o,a){var u=this.temp1,d=this.temp2,b=this.sceneRenderer.camera;u.set(t+o.x,i-o.y,0);var S=b.viewportWidth,C=b.viewportHeight;return b.screenToWorld(u,S,C),a&&null!==a.parent?(a.parent.worldToLocal(d.set(u.x-o.x,u.y-o.y,0)),new M.Vector2(d.x,d.y)):a?new M.Vector2(u.x-o.x,u.y-o.y):new M.Vector2(u.x,u.y)},getVector2:function getVector2(t,i){return new M.Vector2(t,i)},getVector3:function getVector3(t,i,o){return new M.webgl.Vector3(t,i,o)},setDebugBones:function setDebugBones(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawBones=t,this},setDebugRegionAttachments:function setDebugRegionAttachments(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawRegionAttachments=t,this},setDebugBoundingBoxes:function setDebugBoundingBoxes(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawBoundingBoxes=t,this},setDebugMeshHull:function setDebugMeshHull(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawMeshHull=t,this},setDebugMeshTriangles:function setDebugMeshTriangles(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawMeshTriangles=t,this},setDebugPaths:function setDebugPaths(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawPaths=t,this},setDebugSkeletonXY:function setDebugSkeletonXY(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawSkeletonXY=t,this},setDebugClipping:function setDebugClipping(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawClipping=t,this},setEffect:function setEffect(t){return this.sceneRenderer.skeletonRenderer.vertexEffect=t,this},createSkeleton:function createSkeleton(t,i){var o=t,a=t,u=-1!==t.indexOf(".");if(u){var d=t.split(".");o=d.shift(),a=d.join(".")}var S=this.cache.get(o),C=this.getAtlas(o);if(!C)return null;this.spineTextures.has(o)||this.spineTextures.add(o,C);var P,R=S.preMultipliedAlpha,O=new M.AtlasAttachmentLoader(C),B=new M.SkeletonJson(O);if(i)P=i;else{var N=this.json.get(o);P=u?b(N,a):N}if(P){var Y=B.readSkeletonData(P);return{skeletonData:Y,skeleton:new M.Skeleton(Y),preMultipliedAlpha:R}}return null},createAnimationState:function createAnimationState(t){var i=new M.AnimationStateData(t.data);return{stateData:i,state:new M.AnimationState(i)}},getBounds:function getBounds(t){var i=new M.Vector2,o=new M.Vector2;return t.getBounds(i,o,[]),{offset:i,size:o}},onResize:function onResize(){var t=this.renderer,i=this.sceneRenderer,o=t.width,a=t.height;i.camera.position.x=o/2,i.camera.position.y=a/2,i.camera.setViewport(o,a)},shutdown:function shutdown(){this.systems.events.off("shutdown",this.shutdown,this),this.isWebGL&&this.game.scale.off(S,this.onResize,this)},destroy:function destroy(){this.shutdown(),this.game=null,this.scene=null,this.systems=null,this.cache=null,this.spineTextures=null,this.json=null,this.textures=null,this.skeletonRenderer=null,this.gl=null},gameDestroy:function gameDestroy(){this.pluginManager.removeGameObject("spine",!0,!0),this.pluginManager.removeGameObject("spineContainer",!0,!0),this.pluginManager=null,a&&(a.dispose(),a=null),this.sceneRenderer=null}});N.SpineGameObject=R,N.SpineContainer=O,t.exports=N},function(t,i,o){var a=o(17),u=o(65);t.exports=function BuildGameObject(t,i,o){i.x=u(o,"x",0),i.y=u(o,"y",0),i.depth=u(o,"depth",0),i.flipX=u(o,"flipX",!1),i.flipY=u(o,"flipY",!1);var d=u(o,"scale",null);"number"==typeof d?i.setScale(d):null!==d&&(i.scaleX=u(d,"x",1),i.scaleY=u(d,"y",1));var b=u(o,"scrollFactor",null);"number"==typeof b?i.setScrollFactor(b):null!==b&&(i.scrollFactorX=u(b,"x",1),i.scrollFactorY=u(b,"y",1)),i.rotation=u(o,"rotation",0);var S=u(o,"angle",null);null!==S&&(i.angle=S),i.alpha=u(o,"alpha",1);var C=u(o,"origin",null);if("number"==typeof C)i.setOrigin(C);else if(null!==C){var M=u(C,"x",.5),P=u(C,"y",.5);i.setOrigin(M,P)}return i.blendMode=u(o,"blendMode",a.NORMAL),i.visible=u(o,"visible",!0),u(o,"add",!0)&&t.sys.displayList.add(i),i.preUpdate&&t.sys.updateList.add(i),i}},function(t,i,o){var a=o(66),u=o(10);t.exports=function GetAdvancedValue(t,i,o){var d=u(t,i,null);if(null===d)return o;if(Array.isArray(d))return a.RND.pick(d);if("object"===_typeof(d)){if(d.hasOwnProperty("randInt"))return a.RND.integerInRange(d.randInt[0],d.randInt[1]);if(d.hasOwnProperty("randFloat"))return a.RND.realInRange(d.randFloat[0],d.randFloat[1])}else if("function"==typeof d)return d(i);return d}},function(t,i,o){var a=o(4),u=o(27),d={Angle:o(67),Distance:o(76),Easing:o(84),Fuzzy:o(129),Interpolation:o(134),Pow2:o(142),Snap:o(146),RandomDataGenerator:o(150),Average:o(151),Bernstein:o(33),Between:o(152),CatmullRom:o(35),CeilTo:o(153),Clamp:o(3),DegToRad:o(19),Difference:o(154),Euler:o(155),Factorial:o(34),FloatBetween:o(18),FloorTo:o(156),FromPercent:o(157),GetSpeed:o(158),IsEven:o(159),IsEvenStrict:o(160),Linear:o(36),MaxAdd:o(161),Median:o(162),MinSub:o(163),Percent:o(164),RadToDeg:o(9),RandomXY:o(165),RandomXYZ:o(166),RandomXYZW:o(167),Rotate:o(168),RotateAround:o(39),RotateAroundDistance:o(169),RotateTo:o(170),RoundAwayFromZero:o(40),RoundTo:o(171),SinCosTableGenerator:o(172),SmootherStep:o(38),SmoothStep:o(37),ToXY:o(173),TransformXY:o(41),Within:o(174),Wrap:o(6),Vector2:o(2),Vector3:o(14),Vector4:o(175),Matrix3:o(42),Matrix4:o(20),Quaternion:o(43),RotateVec3:o(176)};d=u(!1,d,a),t.exports=d},function(t,i,o){t.exports={Between:o(28),BetweenPoints:o(68),BetweenPointsY:o(69),BetweenY:o(70),CounterClockwise:o(8),Normalize:o(29),Random:o(71),RandomDegrees:o(72),Reverse:o(73),RotateTo:o(74),ShortestBetween:o(75),Wrap:o(30),WrapDegrees:o(31)}},function(t,i){t.exports=function BetweenPoints(t,i){return Math.atan2(i.y-t.y,i.x-t.x)}},function(t,i){t.exports=function BetweenPointsY(t,i){return Math.atan2(i.x-t.x,i.y-t.y)}},function(t,i){t.exports=function BetweenY(t,i,o,a){return Math.atan2(o-t,a-i)}},function(t,i,o){var a=o(18);t.exports=function Random(){return a(-Math.PI,Math.PI)}},function(t,i,o){var a=o(18);t.exports=function RandomDegrees(){return a(-180,180)}},function(t,i,o){var a=o(29);t.exports=function Reverse(t){return a(t+Math.PI)}},function(t,i,o){var a=o(4);t.exports=function RotateTo(t,i,o){return void 0===o&&(o=.05),t===i||(Math.abs(i-t)<=o||Math.abs(i-t)>=a.PI2-o?t=i:(Math.abs(i-t)>Math.PI&&(i<t?i+=a.PI2:i-=a.PI2),i>t?t+=o:i<t&&(t-=o))),t}},function(t,i){t.exports=function ShortestBetween(t,i){var o=i-t;return 0===o?0:o-360*Math.floor((o- -180)/360)}},function(t,i,o){t.exports={Between:o(77),BetweenPoints:o(78),BetweenPointsSquared:o(79),Chebyshev:o(80),Power:o(81),Snake:o(82),Squared:o(83)}},function(t,i){t.exports=function DistanceBetween(t,i,o,a){var u=t-o,d=i-a;return Math.sqrt(u*u+d*d)}},function(t,i){t.exports=function DistanceBetweenPoints(t,i){var o=t.x-i.x,a=t.y-i.y;return Math.sqrt(o*o+a*a)}},function(t,i){t.exports=function DistanceBetweenPointsSquared(t,i){var o=t.x-i.x,a=t.y-i.y;return o*o+a*a}},function(t,i){t.exports=function ChebyshevDistance(t,i,o,a){return Math.max(Math.abs(t-o),Math.abs(i-a))}},function(t,i){t.exports=function DistancePower(t,i,o,a,u){return void 0===u&&(u=2),Math.sqrt(Math.pow(o-t,u)+Math.pow(a-i,u))}},function(t,i){t.exports=function SnakeDistance(t,i,o,a){return Math.abs(t-o)+Math.abs(i-a)}},function(t,i){t.exports=function DistanceSquared(t,i,o,a){var u=t-o,d=i-a;return u*u+d*d}},function(t,i,o){t.exports={Back:o(85),Bounce:o(89),Circular:o(93),Cubic:o(97),Elastic:o(101),Expo:o(105),Linear:o(109),Quadratic:o(111),Quartic:o(115),Quintic:o(119),Sine:o(123),Stepped:o(127)}},function(t,i,o){t.exports={In:o(86),Out:o(87),InOut:o(88)}},function(t,i){t.exports=function In(t,i){return void 0===i&&(i=1.70158),t*t*((i+1)*t-i)}},function(t,i){t.exports=function Out(t,i){return void 0===i&&(i=1.70158),--t*t*((i+1)*t+i)+1}},function(t,i){t.exports=function InOut(t,i){void 0===i&&(i=1.70158);var o=1.525*i;return(t*=2)<1?t*t*((o+1)*t-o)*.5:.5*((t-=2)*t*((o+1)*t+o)+2)}},function(t,i,o){t.exports={In:o(90),Out:o(91),InOut:o(92)}},function(t,i){t.exports=function In(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}},function(t,i){t.exports=function Out(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},function(t,i){t.exports=function InOut(t){var i=!1;return t<.5?(t=1-2*t,i=!0):t=2*t-1,t<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,i?.5*(1-t):.5*t+.5}},function(t,i,o){t.exports={In:o(94),Out:o(95),InOut:o(96)}},function(t,i){t.exports=function In(t){return 1-Math.sqrt(1-t*t)}},function(t,i){t.exports=function Out(t){return Math.sqrt(1- --t*t)}},function(t,i){t.exports=function InOut(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},function(t,i,o){t.exports={In:o(98),Out:o(99),InOut:o(100)}},function(t,i){t.exports=function In(t){return t*t*t}},function(t,i){t.exports=function Out(t){return--t*t*t+1}},function(t,i){t.exports=function InOut(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},function(t,i,o){t.exports={In:o(102),Out:o(103),InOut:o(104)}},function(t,i){t.exports=function In(t,i,o){if(void 0===i&&(i=.1),void 0===o&&(o=.1),0===t)return 0;if(1===t)return 1;var a=o/4;return i<1?i=1:a=o*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(t-=1))*Math.sin((t-a)*(2*Math.PI)/o)}},function(t,i){t.exports=function Out(t,i,o){if(void 0===i&&(i=.1),void 0===o&&(o=.1),0===t)return 0;if(1===t)return 1;var a=o/4;return i<1?i=1:a=o*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin((t-a)*(2*Math.PI)/o)+1}},function(t,i){t.exports=function InOut(t,i,o){if(void 0===i&&(i=.1),void 0===o&&(o=.1),0===t)return 0;if(1===t)return 1;var a=o/4;return i<1?i=1:a=o*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?i*Math.pow(2,10*(t-=1))*Math.sin((t-a)*(2*Math.PI)/o)*-.5:i*Math.pow(2,-10*(t-=1))*Math.sin((t-a)*(2*Math.PI)/o)*.5+1}},function(t,i,o){t.exports={In:o(106),Out:o(107),InOut:o(108)}},function(t,i){t.exports=function In(t){return Math.pow(2,10*(t-1))-.001}},function(t,i){t.exports=function Out(t){return 1-Math.pow(2,-10*t)}},function(t,i){t.exports=function InOut(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}},function(t,i,o){t.exports=o(110)},function(t,i){t.exports=function Linear(t){return t}},function(t,i,o){t.exports={In:o(112),Out:o(113),InOut:o(114)}},function(t,i){t.exports=function In(t){return t*t}},function(t,i){t.exports=function Out(t){return t*(2-t)}},function(t,i){t.exports=function InOut(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},function(t,i,o){t.exports={In:o(116),Out:o(117),InOut:o(118)}},function(t,i){t.exports=function In(t){return t*t*t*t}},function(t,i){t.exports=function Out(t){return 1- --t*t*t*t}},function(t,i){t.exports=function InOut(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},function(t,i,o){t.exports={In:o(120),Out:o(121),InOut:o(122)}},function(t,i){t.exports=function In(t){return t*t*t*t*t}},function(t,i){t.exports=function Out(t){return--t*t*t*t*t+1}},function(t,i){t.exports=function InOut(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},function(t,i,o){t.exports={In:o(124),Out:o(125),InOut:o(126)}},function(t,i){t.exports=function In(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)}},function(t,i){t.exports=function Out(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)}},function(t,i){t.exports=function InOut(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))}},function(t,i,o){t.exports=o(128)},function(t,i){t.exports=function Stepped(t,i){return void 0===i&&(i=1),t<=0?0:t>=1?1:1/i*(1+(i*t|0))}},function(t,i,o){t.exports={Ceil:o(130),Equal:o(32),Floor:o(131),GreaterThan:o(132),LessThan:o(133)}},function(t,i){t.exports=function Ceil(t,i){return void 0===i&&(i=1e-4),Math.ceil(t-i)}},function(t,i){t.exports=function Floor(t,i){return void 0===i&&(i=1e-4),Math.floor(t+i)}},function(t,i){t.exports=function GreaterThan(t,i,o){return void 0===o&&(o=1e-4),t>i-o}},function(t,i){t.exports=function LessThan(t,i,o){return void 0===o&&(o=1e-4),t<i+o}},function(t,i,o){t.exports={Bezier:o(135),CatmullRom:o(136),CubicBezier:o(137),Linear:o(138),QuadraticBezier:o(139),SmoothStep:o(140),SmootherStep:o(141)}},function(t,i,o){var a=o(33);t.exports=function BezierInterpolation(t,i){for(var o=0,u=t.length-1,d=0;d<=u;d++)o+=Math.pow(1-i,u-d)*Math.pow(i,d)*t[d]*a(u,d);return o}},function(t,i,o){var a=o(35);t.exports=function CatmullRomInterpolation(t,i){var o=t.length-1,u=o*i,d=Math.floor(u);return t[0]===t[o]?(i<0&&(d=Math.floor(u=o*(1+i))),a(u-d,t[(d-1+o)%o],t[d],t[(d+1)%o],t[(d+2)%o])):i<0?t[0]-(a(-u,t[0],t[0],t[1],t[1])-t[0]):i>1?t[o]-(a(u-o,t[o],t[o],t[o-1],t[o-1])-t[o]):a(u-d,t[d?d-1:0],t[d],t[o<d+1?o:d+1],t[o<d+2?o:d+2])}},function(t,i){t.exports=function CubicBezierInterpolation(t,i,o,a,u){return function P0(t,i){var o=1-t;return o*o*o*i}(t,i)+function P1(t,i){var o=1-t;return 3*o*o*t*i}(t,o)+function P2(t,i){return 3*(1-t)*t*t*i}(t,a)+function P3(t,i){return t*t*t*i}(t,u)}},function(t,i,o){var a=o(36);t.exports=function LinearInterpolation(t,i){var o=t.length-1,u=o*i,d=Math.floor(u);return i<0?a(t[0],t[1],u):i>1?a(t[o],t[o-1],o-u):a(t[d],t[d+1>o?o:d+1],u-d)}},function(t,i){t.exports=function QuadraticBezierInterpolation(t,i,o,a){return function P0(t,i){var o=1-t;return o*o*i}(t,i)+function P1(t,i){return 2*(1-t)*t*i}(t,o)+function P2(t,i){return t*t*i}(t,a)}},function(t,i,o){var a=o(37);t.exports=function SmoothStepInterpolation(t,i,o){return i+(o-i)*a(t,0,1)}},function(t,i,o){var a=o(38);t.exports=function SmootherStepInterpolation(t,i,o){return i+(o-i)*a(t,0,1)}},function(t,i,o){t.exports={GetNext:o(143),IsSize:o(144),IsValue:o(145)}},function(t,i){t.exports=function GetPowerOfTwo(t){var i=Math.log(t)/.6931471805599453;return 1<<Math.ceil(i)}},function(t,i){t.exports=function IsSizePowerOfTwo(t,i){return t>0&&0==(t&t-1)&&i>0&&0==(i&i-1)}},function(t,i){t.exports=function IsValuePowerOfTwo(t){return t>0&&0==(t&t-1)}},function(t,i,o){t.exports={Ceil:o(147),Floor:o(148),To:o(149)}},function(t,i){t.exports=function SnapCeil(t,i,o,a){return void 0===o&&(o=0),0===i?t:(t-=o,t=i*Math.ceil(t/i),a?(o+t)/i:o+t)}},function(t,i){t.exports=function SnapFloor(t,i,o,a){return void 0===o&&(o=0),0===i?t:(t-=o,t=i*Math.floor(t/i),a?(o+t)/i:o+t)}},function(t,i){t.exports=function SnapTo(t,i,o,a){return void 0===o&&(o=0),0===i?t:(t-=o,t=i*Math.round(t/i),a?(o+t)/i:o+t)}},function(t,i,o){var a=new(o(0))({initialize:function RandomDataGenerator(t){void 0===t&&(t=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],t&&this.init(t)},rnd:function rnd(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},hash:function hash(t){var i,o=this.n;t=t.toString();for(var a=0;a<t.length;a++)i=.02519603282416938*(o+=t.charCodeAt(a)),i-=o=i>>>0,o=(i*=o)>>>0,o+=4294967296*(i-=o);return this.n=o,2.3283064365386963e-10*(o>>>0)},init:function init(t){"string"==typeof t?this.state(t):this.sow(t)},sow:function sow(t){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,t)for(var i=0;i<t.length&&null!=t[i];i++){var o=t[i];this.s0-=this.hash(o),this.s0+=~~(this.s0<0),this.s1-=this.hash(o),this.s1+=~~(this.s1<0),this.s2-=this.hash(o),this.s2+=~~(this.s2<0)}},integer:function integer(){return 4294967296*this.rnd()},frac:function frac(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function real(){return this.integer()+this.frac()},integerInRange:function integerInRange(t,i){return Math.floor(this.realInRange(0,i-t+1)+t)},between:function between(t,i){return Math.floor(this.realInRange(0,i-t+1)+t)},realInRange:function realInRange(t,i){return this.frac()*(i-t)+t},normal:function normal(){return 1-2*this.frac()},uuid:function uuid(){var t="",i="";for(i=t="";t++<36;i+=~t%5|3*t&4?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return i},pick:function pick(t){return t[this.integerInRange(0,t.length-1)]},sign:function sign(){return this.pick(this.signs)},weightedPick:function weightedPick(t){return t[~~(Math.pow(this.frac(),2)*(t.length-1)+.5)]},timestamp:function timestamp(t,i){return this.realInRange(t||9466848e5,i||1577862e6)},angle:function angle(){return this.integerInRange(-180,180)},rotation:function rotation(){return this.realInRange(-3.1415926,3.1415926)},state:function state(t){return"string"==typeof t&&t.match(/^!rnd/)&&(t=t.split(","),this.c=parseFloat(t[1]),this.s0=parseFloat(t[2]),this.s1=parseFloat(t[3]),this.s2=parseFloat(t[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function shuffle(t){for(var i=t.length-1;i>0;i--){var o=Math.floor(this.frac()*(i+1)),a=t[o];t[o]=t[i],t[i]=a}return t}});t.exports=a},function(t,i){t.exports=function Average(t){for(var i=0,o=0;o<t.length;o++)i+=+t[o];return i/t.length}},function(t,i){t.exports=function Between(t,i){return Math.floor(Math.random()*(i-t+1)+t)}},function(t,i){t.exports=function CeilTo(t,i,o){void 0===i&&(i=0),void 0===o&&(o=10);var a=Math.pow(o,-i);return Math.ceil(t*a)/a}},function(t,i){t.exports=function Difference(t,i){return Math.abs(t-i)}},function(t,i,o){var a=o(3),u=o(0),d=o(20),b=o(1),S=new d,C=new u({initialize:function Euler(t,i,o,a){void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=Euler.DefaultOrder),this._x=t,this._y=i,this._z=o,this._order=a,this.onChangeCallback=b},x:{get:function get(){return this._x},set:function set(t){this._x=t,this.onChangeCallback(this)}},y:{get:function get(){return this._y},set:function set(t){this._y=t,this.onChangeCallback(this)}},z:{get:function get(){return this._z},set:function set(t){this._z=t,this.onChangeCallback(this)}},order:{get:function get(){return this._order},set:function set(t){this._order=t,this.onChangeCallback(this)}},set:function set(t,i,o,a){return void 0===a&&(a=this._order),this._x=t,this._y=i,this._z=o,this._order=a,this.onChangeCallback(this),this},copy:function copy(t){return this.set(t.x,t.y,t.z,t.order)},setFromQuaternion:function setFromQuaternion(t,i,o){return void 0===i&&(i=this._order),void 0===o&&(o=!1),S.fromQuat(t),this.setFromRotationMatrix(S,i,o)},setFromRotationMatrix:function setFromRotationMatrix(t,i,o){void 0===i&&(i=this._order),void 0===o&&(o=!1);var u=t.val,d=u[0],b=u[4],S=u[8],C=u[1],M=u[5],P=u[9],R=u[2],O=u[6],B=u[10],N=0,Y=0,G=0,X=.99999;switch(i){case"XYZ":Y=Math.asin(a(S,-1,1)),Math.abs(S)<X?(N=Math.atan2(-P,B),G=Math.atan2(-b,d)):N=Math.atan2(O,M);break;case"YXZ":N=Math.asin(-a(P,-1,1)),Math.abs(P)<X?(Y=Math.atan2(S,B),G=Math.atan2(C,M)):Y=Math.atan2(-R,d);break;case"ZXY":N=Math.asin(a(O,-1,1)),Math.abs(O)<X?(Y=Math.atan2(-R,B),G=Math.atan2(-b,M)):G=Math.atan2(C,d);break;case"ZYX":Y=Math.asin(-a(R,-1,1)),Math.abs(R)<X?(N=Math.atan2(O,B),G=Math.atan2(C,d)):G=Math.atan2(-b,M);break;case"YZX":G=Math.asin(a(C,-1,1)),Math.abs(C)<X?(N=Math.atan2(-P,M),Y=Math.atan2(-R,d)):Y=Math.atan2(S,B);break;case"XZY":G=Math.asin(-a(b,-1,1)),Math.abs(b)<X?(N=Math.atan2(O,M),Y=Math.atan2(S,d)):N=Math.atan2(-P,B)}return this._x=N,this._y=Y,this._z=G,this._order=i,o&&this.onChangeCallback(this),this}});C.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],C.DefaultOrder="XYZ",t.exports=C},function(t,i){t.exports=function FloorTo(t,i,o){void 0===i&&(i=0),void 0===o&&(o=10);var a=Math.pow(o,-i);return Math.floor(t*a)/a}},function(t,i,o){var a=o(3);t.exports=function FromPercent(t,i,o){return(o-i)*(t=a(t,0,1))+i}},function(t,i){t.exports=function GetSpeed(t,i){return t/i/1e3}},function(t,i){t.exports=function IsEven(t){return t==parseFloat(t)?!(t%2):void 0}},function(t,i){t.exports=function IsEvenStrict(t){return t===parseFloat(t)?!(t%2):void 0}},function(t,i){t.exports=function MaxAdd(t,i,o){return Math.min(t+i,o)}},function(t,i){t.exports=function Median(t){var i=t.length;if(0===i)return 0;t.sort((function(t,i){return t-i}));var o=Math.floor(i/2);return i%2==0?(t[o]+t[o-1])/2:t[o]}},function(t,i){t.exports=function MinSub(t,i,o){return Math.max(t-i,o)}},function(t,i){t.exports=function Percent(t,i,o,a){void 0===o&&(o=i+1);var u=(t-i)/(o-i);return u>1?void 0!==a?(u=(a-t)/(a-o))<0&&(u=0):u=1:u<0&&(u=0),u}},function(t,i){t.exports=function RandomXY(t,i){void 0===i&&(i=1);var o=2*Math.random()*Math.PI;return t.x=Math.cos(o)*i,t.y=Math.sin(o)*i,t}},function(t,i){t.exports=function RandomXYZ(t,i){void 0===i&&(i=1);var o=2*Math.random()*Math.PI,a=2*Math.random()-1,u=Math.sqrt(1-a*a)*i;return t.x=Math.cos(o)*u,t.y=Math.sin(o)*u,t.z=a*i,t}},function(t,i){t.exports=function RandomXYZW(t,i){return void 0===i&&(i=1),t.x=(2*Math.random()-1)*i,t.y=(2*Math.random()-1)*i,t.z=(2*Math.random()-1)*i,t.w=(2*Math.random()-1)*i,t}},function(t,i){t.exports=function Rotate(t,i){var o=t.x,a=t.y;return t.x=o*Math.cos(i)-a*Math.sin(i),t.y=o*Math.sin(i)+a*Math.cos(i),t}},function(t,i){t.exports=function RotateAroundDistance(t,i,o,a,u){var d=a+Math.atan2(t.y-o,t.x-i);return t.x=i+u*Math.cos(d),t.y=o+u*Math.sin(d),t}},function(t,i){t.exports=function RotateTo(t,i,o,a,u){return t.x=i+u*Math.cos(a),t.y=o+u*Math.sin(a),t}},function(t,i){t.exports=function RoundTo(t,i,o){void 0===i&&(i=0),void 0===o&&(o=10);var a=Math.pow(o,-i);return Math.round(t*a)/a}},function(t,i){t.exports=function SinCosTableGenerator(t,i,o,a){void 0===i&&(i=1),void 0===o&&(o=1),void 0===a&&(a=1),a*=Math.PI/t;for(var u=[],d=[],b=0;b<t;b++)i+=(o-=i*a)*a,u[b]=o,d[b]=i;return{sin:d,cos:u,length:t}}},function(t,i,o){var a=o(2);t.exports=function ToXY(t,i,o,u){void 0===u&&(u=new a);var d=0,b=0;return t>0&&t<=i*o&&(d=t>i-1?t-(b=Math.floor(t/i))*i:t,u.set(d,b)),u}},function(t,i){t.exports=function Within(t,i,o){return Math.abs(t-i)<=o}},function(t,i,o){var a=new(o(0))({initialize:function Vector4(t,i,o,a){this.x=0,this.y=0,this.z=0,this.w=0,"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=o||0,this.w=a||0)},clone:function clone(){return new a(this.x,this.y,this.z,this.w)},copy:function copy(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this.w=t.w||0,this},equals:function equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},set:function set(t,i,o,a){return"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=o||0,this.w=a||0),this},add:function add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this.w+=t.w||0,this},subtract:function subtract(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this.w-=t.w||0,this},scale:function scale(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function length(){var t=this.x,i=this.y,o=this.z,a=this.w;return Math.sqrt(t*t+i*i+o*o+a*a)},lengthSq:function lengthSq(){var t=this.x,i=this.y,o=this.z,a=this.w;return t*t+i*i+o*o+a*a},normalize:function normalize(){var t=this.x,i=this.y,o=this.z,a=this.w,u=t*t+i*i+o*o+a*a;return u>0&&(u=1/Math.sqrt(u),this.x=t*u,this.y=i*u,this.z=o*u,this.w=a*u),this},dot:function dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function lerp(t,i){void 0===i&&(i=0);var o=this.x,a=this.y,u=this.z,d=this.w;return this.x=o+i*(t.x-o),this.y=a+i*(t.y-a),this.z=u+i*(t.z-u),this.w=d+i*(t.w-d),this},multiply:function multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this.w*=t.w||1,this},divide:function divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this.w/=t.w||1,this},distance:function distance(t){var i=t.x-this.x,o=t.y-this.y,a=t.z-this.z||0,u=t.w-this.w||0;return Math.sqrt(i*i+o*o+a*a+u*u)},distanceSq:function distanceSq(t){var i=t.x-this.x,o=t.y-this.y,a=t.z-this.z||0,u=t.w-this.w||0;return i*i+o*o+a*a+u*u},negate:function negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function transformMat4(t){var i=this.x,o=this.y,a=this.z,u=this.w,d=t.val;return this.x=d[0]*i+d[4]*o+d[8]*a+d[12]*u,this.y=d[1]*i+d[5]*o+d[9]*a+d[13]*u,this.z=d[2]*i+d[6]*o+d[10]*a+d[14]*u,this.w=d[3]*i+d[7]*o+d[11]*a+d[15]*u,this},transformQuat:function transformQuat(t){var i=this.x,o=this.y,a=this.z,u=t.x,d=t.y,b=t.z,S=t.w,C=S*i+d*a-b*o,M=S*o+b*i-u*a,P=S*a+u*o-d*i,R=-u*i-d*o-b*a;return this.x=C*S+R*-u+M*-b-P*-d,this.y=M*S+R*-d+P*-u-C*-b,this.z=P*S+R*-b+C*-d-M*-u,this},reset:function reset(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});a.prototype.sub=a.prototype.subtract,a.prototype.mul=a.prototype.multiply,a.prototype.div=a.prototype.divide,a.prototype.dist=a.prototype.distance,a.prototype.distSq=a.prototype.distanceSq,a.prototype.len=a.prototype.length,a.prototype.lenSq=a.prototype.lengthSq,t.exports=a},function(t,i,o){var a=o(14),u=o(20),d=o(43),b=new u,S=new d,C=new a;t.exports=function RotateVec3(t,i,o){return S.setAxisAngle(i,o),b.fromRotationTranslation(S,C.set(0,0,0)),t.transformMat4(b)}},function(t,i){t.exports="resize"},function(t,i,o){var a=o(179),u=o(0),d=o(44),b=new u({Extends:a,initialize:function ScenePlugin(t,i,o){a.call(this,i),this.scene=t,this.systems=t.sys,this.pluginKey=o,t.sys.events.once(d.BOOT,this.boot,this)},boot:function boot(){},destroy:function destroy(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=b},function(t,i,o){var a=new(o(0))({initialize:function BasePlugin(t){this.pluginManager=t,this.game=t.game},init:function init(){},start:function start(){},stop:function stop(){},destroy:function destroy(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=a},function(t,i){t.exports="addedtoscene"},function(t,i){t.exports="boot"},function(t,i){t.exports="create"},function(t,i){t.exports="destroy"},function(t,i){t.exports="pause"},function(t,i){t.exports="postupdate"},function(t,i){t.exports="prerender"},function(t,i){t.exports="preupdate"},function(t,i){t.exports="ready"},function(t,i){t.exports="removedfromscene"},function(t,i){t.exports="render"},function(t,i){t.exports="resume"},function(t,i){t.exports="shutdown"},function(t,i){t.exports="sleep"},function(t,i){t.exports="start"},function(t,i){t.exports="transitioncomplete"},function(t,i){t.exports="transitioninit"},function(t,i){t.exports="transitionout"},function(t,i){t.exports="transitionstart"},function(t,i){t.exports="transitionwake"},function(t,i){t.exports="update"},function(t,i){t.exports="wake"},function(t,i){(function(){var i,o,a,u=this&&this.__extends||(i=function extendStatics(t,o){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])},i(t,o)},function(t,o){function __(){this.constructor=t}i(t,o),t.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)});!function(t){var i,o,a,d=function(){function Animation(t,i,o){if(null==t)throw new Error("name cannot be null.");if(null==i)throw new Error("timelines cannot be null.");this.name=t,this.timelines=i,this.timelineIds=[];for(var a=0;a<i.length;a++)this.timelineIds[i[a].getPropertyId()]=!0;this.duration=o}return Animation.prototype.hasTimeline=function(t){return 1==this.timelineIds[t]},Animation.prototype.apply=function(t,i,o,a,u,d,b,S){if(null==t)throw new Error("skeleton cannot be null.");a&&0!=this.duration&&(o%=this.duration,i>0&&(i%=this.duration));for(var C=this.timelines,M=0,P=C.length;M<P;M++)C[M].apply(t,i,o,u,d,b,S)},Animation.binarySearch=function(t,i,o){void 0===o&&(o=1);var a=0,u=t.length/o-2;if(0==u)return o;for(var d=u>>>1;;){if(t[(d+1)*o]<=i?a=d+1:u=d,a==u)return(a+1)*o;d=a+u>>>1}},Animation.linearSearch=function(t,i,o){for(var a=0,u=t.length-o;a<=u;a+=o)if(t[a]>i)return a;return-1},Animation}();t.Animation=d,function(t){t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add"}(i=t.MixBlend||(t.MixBlend={})),function(t){t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut"}(o=t.MixDirection||(t.MixDirection={})),function(t){t[t.rotate=0]="rotate",t[t.translate=1]="translate",t[t.scale=2]="scale",t[t.shear=3]="shear",t[t.attachment=4]="attachment",t[t.color=5]="color",t[t.deform=6]="deform",t[t.event=7]="event",t[t.drawOrder=8]="drawOrder",t[t.ikConstraint=9]="ikConstraint",t[t.transformConstraint=10]="transformConstraint",t[t.pathConstraintPosition=11]="pathConstraintPosition",t[t.pathConstraintSpacing=12]="pathConstraintSpacing",t[t.pathConstraintMix=13]="pathConstraintMix",t[t.twoColor=14]="twoColor"}(a=t.TimelineType||(t.TimelineType={}));var b=function(){function CurveTimeline(i){if(i<=0)throw new Error("frameCount must be > 0: "+i);this.curves=t.Utils.newFloatArray((i-1)*CurveTimeline.BEZIER_SIZE)}return CurveTimeline.prototype.getFrameCount=function(){return this.curves.length/CurveTimeline.BEZIER_SIZE+1},CurveTimeline.prototype.setLinear=function(t){this.curves[t*CurveTimeline.BEZIER_SIZE]=CurveTimeline.LINEAR},CurveTimeline.prototype.setStepped=function(t){this.curves[t*CurveTimeline.BEZIER_SIZE]=CurveTimeline.STEPPED},CurveTimeline.prototype.getCurveType=function(t){var i=t*CurveTimeline.BEZIER_SIZE;if(i==this.curves.length)return CurveTimeline.LINEAR;var o=this.curves[i];return o==CurveTimeline.LINEAR?CurveTimeline.LINEAR:o==CurveTimeline.STEPPED?CurveTimeline.STEPPED:CurveTimeline.BEZIER},CurveTimeline.prototype.setCurve=function(t,i,o,a,u){var d=.03*(2*-i+a),b=.03*(2*-o+u),S=.006*(3*(i-a)+1),C=.006*(3*(o-u)+1),M=2*d+S,P=2*b+C,R=.3*i+d+.16666667*S,O=.3*o+b+.16666667*C,B=t*CurveTimeline.BEZIER_SIZE,N=this.curves;N[B++]=CurveTimeline.BEZIER;for(var Y=R,G=O,X=B+CurveTimeline.BEZIER_SIZE-1;B<X;B+=2)N[B]=Y,N[B+1]=G,R+=M,O+=P,M+=S,P+=C,Y+=R,G+=O},CurveTimeline.prototype.getCurvePercent=function(i,o){o=t.MathUtils.clamp(o,0,1);var a=this.curves,u=i*CurveTimeline.BEZIER_SIZE,d=a[u];if(d==CurveTimeline.LINEAR)return o;if(d==CurveTimeline.STEPPED)return 0;for(var b=0,S=++u,C=u+CurveTimeline.BEZIER_SIZE-1;u<C;u+=2)if((b=a[u])>=o){var M=void 0,P=void 0;return u==S?(M=0,P=0):(M=a[u-2],P=a[u-1]),P+(a[u+1]-P)*(o-M)/(b-M)}var R=a[u-1];return R+(1-R)*(o-b)/(1-b)},CurveTimeline.LINEAR=0,CurveTimeline.STEPPED=1,CurveTimeline.BEZIER=2,CurveTimeline.BEZIER_SIZE=19,CurveTimeline}();t.CurveTimeline=b;var S=function(o){function RotateTimeline(i){var a=o.call(this,i)||this;return a.frames=t.Utils.newFloatArray(i<<1),a}return u(RotateTimeline,o),RotateTimeline.prototype.getPropertyId=function(){return(a.rotate<<24)+this.boneIndex},RotateTimeline.prototype.setFrame=function(t,i,o){t<<=1,this.frames[t]=i,this.frames[t+RotateTimeline.ROTATION]=o},RotateTimeline.prototype.apply=function(t,o,a,u,b,S,C){var M=this.frames,P=t.bones[this.boneIndex];if(P.active)if(a<M[0])switch(S){case i.setup:return void(P.rotation=P.data.rotation);case i.first:var R=P.data.rotation-P.rotation;P.rotation+=(R-360*(16384-(16384.499999999996-R/360|0)))*b}else if(a>=M[M.length-RotateTimeline.ENTRIES]){var O=M[M.length+RotateTimeline.PREV_ROTATION];switch(S){case i.setup:P.rotation=P.data.rotation+O*b;break;case i.first:case i.replace:O+=P.data.rotation-P.rotation,O-=360*(16384-(16384.499999999996-O/360|0));case i.add:P.rotation+=O*b}}else{var B=d.binarySearch(M,a,RotateTimeline.ENTRIES),N=M[B+RotateTimeline.PREV_ROTATION],Y=M[B],G=this.getCurvePercent((B>>1)-1,1-(a-Y)/(M[B+RotateTimeline.PREV_TIME]-Y)),X=M[B+RotateTimeline.ROTATION]-N;switch(X=N+(X-360*(16384-(16384.499999999996-X/360|0)))*G,S){case i.setup:P.rotation=P.data.rotation+(X-360*(16384-(16384.499999999996-X/360|0)))*b;break;case i.first:case i.replace:X+=P.data.rotation-P.rotation;case i.add:P.rotation+=(X-360*(16384-(16384.499999999996-X/360|0)))*b}}},RotateTimeline.ENTRIES=2,RotateTimeline.PREV_TIME=-2,RotateTimeline.PREV_ROTATION=-1,RotateTimeline.ROTATION=1,RotateTimeline}(b);t.RotateTimeline=S;var C=function(o){function TranslateTimeline(i){var a=o.call(this,i)||this;return a.frames=t.Utils.newFloatArray(i*TranslateTimeline.ENTRIES),a}return u(TranslateTimeline,o),TranslateTimeline.prototype.getPropertyId=function(){return(a.translate<<24)+this.boneIndex},TranslateTimeline.prototype.setFrame=function(t,i,o,a){t*=TranslateTimeline.ENTRIES,this.frames[t]=i,this.frames[t+TranslateTimeline.X]=o,this.frames[t+TranslateTimeline.Y]=a},TranslateTimeline.prototype.apply=function(t,o,a,u,b,S,C){var M=this.frames,P=t.bones[this.boneIndex];if(P.active)if(a<M[0])switch(S){case i.setup:return P.x=P.data.x,void(P.y=P.data.y);case i.first:P.x+=(P.data.x-P.x)*b,P.y+=(P.data.y-P.y)*b}else{var R=0,O=0;if(a>=M[M.length-TranslateTimeline.ENTRIES])R=M[M.length+TranslateTimeline.PREV_X],O=M[M.length+TranslateTimeline.PREV_Y];else{var B=d.binarySearch(M,a,TranslateTimeline.ENTRIES);R=M[B+TranslateTimeline.PREV_X],O=M[B+TranslateTimeline.PREV_Y];var N=M[B],Y=this.getCurvePercent(B/TranslateTimeline.ENTRIES-1,1-(a-N)/(M[B+TranslateTimeline.PREV_TIME]-N));R+=(M[B+TranslateTimeline.X]-R)*Y,O+=(M[B+TranslateTimeline.Y]-O)*Y}switch(S){case i.setup:P.x=P.data.x+R*b,P.y=P.data.y+O*b;break;case i.first:case i.replace:P.x+=(P.data.x+R-P.x)*b,P.y+=(P.data.y+O-P.y)*b;break;case i.add:P.x+=R*b,P.y+=O*b}}},TranslateTimeline.ENTRIES=3,TranslateTimeline.PREV_TIME=-3,TranslateTimeline.PREV_X=-2,TranslateTimeline.PREV_Y=-1,TranslateTimeline.X=1,TranslateTimeline.Y=2,TranslateTimeline}(b);t.TranslateTimeline=C;var M=function(b){function ScaleTimeline(t){return b.call(this,t)||this}return u(ScaleTimeline,b),ScaleTimeline.prototype.getPropertyId=function(){return(a.scale<<24)+this.boneIndex},ScaleTimeline.prototype.apply=function(a,u,b,S,C,M,P){var R=this.frames,O=a.bones[this.boneIndex];if(O.active)if(b<R[0])switch(M){case i.setup:return O.scaleX=O.data.scaleX,void(O.scaleY=O.data.scaleY);case i.first:O.scaleX+=(O.data.scaleX-O.scaleX)*C,O.scaleY+=(O.data.scaleY-O.scaleY)*C}else{var B=0,N=0;if(b>=R[R.length-ScaleTimeline.ENTRIES])B=R[R.length+ScaleTimeline.PREV_X]*O.data.scaleX,N=R[R.length+ScaleTimeline.PREV_Y]*O.data.scaleY;else{var Y=d.binarySearch(R,b,ScaleTimeline.ENTRIES);B=R[Y+ScaleTimeline.PREV_X],N=R[Y+ScaleTimeline.PREV_Y];var G=R[Y],X=this.getCurvePercent(Y/ScaleTimeline.ENTRIES-1,1-(b-G)/(R[Y+ScaleTimeline.PREV_TIME]-G));B=(B+(R[Y+ScaleTimeline.X]-B)*X)*O.data.scaleX,N=(N+(R[Y+ScaleTimeline.Y]-N)*X)*O.data.scaleY}if(1==C)M==i.add?(O.scaleX+=B-O.data.scaleX,O.scaleY+=N-O.data.scaleY):(O.scaleX=B,O.scaleY=N);else{var U=0,z=0;if(P==o.mixOut)switch(M){case i.setup:U=O.data.scaleX,z=O.data.scaleY,O.scaleX=U+(Math.abs(B)*t.MathUtils.signum(U)-U)*C,O.scaleY=z+(Math.abs(N)*t.MathUtils.signum(z)-z)*C;break;case i.first:case i.replace:U=O.scaleX,z=O.scaleY,O.scaleX=U+(Math.abs(B)*t.MathUtils.signum(U)-U)*C,O.scaleY=z+(Math.abs(N)*t.MathUtils.signum(z)-z)*C;break;case i.add:U=O.scaleX,z=O.scaleY,O.scaleX=U+(Math.abs(B)*t.MathUtils.signum(U)-O.data.scaleX)*C,O.scaleY=z+(Math.abs(N)*t.MathUtils.signum(z)-O.data.scaleY)*C}else switch(M){case i.setup:U=Math.abs(O.data.scaleX)*t.MathUtils.signum(B),z=Math.abs(O.data.scaleY)*t.MathUtils.signum(N),O.scaleX=U+(B-U)*C,O.scaleY=z+(N-z)*C;break;case i.first:case i.replace:U=Math.abs(O.scaleX)*t.MathUtils.signum(B),z=Math.abs(O.scaleY)*t.MathUtils.signum(N),O.scaleX=U+(B-U)*C,O.scaleY=z+(N-z)*C;break;case i.add:U=t.MathUtils.signum(B),z=t.MathUtils.signum(N),O.scaleX=Math.abs(O.scaleX)*U+(B-Math.abs(O.data.scaleX)*U)*C,O.scaleY=Math.abs(O.scaleY)*z+(N-Math.abs(O.data.scaleY)*z)*C}}}},ScaleTimeline}(C);t.ScaleTimeline=M;var P=function(t){function ShearTimeline(i){return t.call(this,i)||this}return u(ShearTimeline,t),ShearTimeline.prototype.getPropertyId=function(){return(a.shear<<24)+this.boneIndex},ShearTimeline.prototype.apply=function(t,o,a,u,b,S,C){var M=this.frames,P=t.bones[this.boneIndex];if(P.active)if(a<M[0])switch(S){case i.setup:return P.shearX=P.data.shearX,void(P.shearY=P.data.shearY);case i.first:P.shearX+=(P.data.shearX-P.shearX)*b,P.shearY+=(P.data.shearY-P.shearY)*b}else{var R=0,O=0;if(a>=M[M.length-ShearTimeline.ENTRIES])R=M[M.length+ShearTimeline.PREV_X],O=M[M.length+ShearTimeline.PREV_Y];else{var B=d.binarySearch(M,a,ShearTimeline.ENTRIES);R=M[B+ShearTimeline.PREV_X],O=M[B+ShearTimeline.PREV_Y];var N=M[B],Y=this.getCurvePercent(B/ShearTimeline.ENTRIES-1,1-(a-N)/(M[B+ShearTimeline.PREV_TIME]-N));R+=(M[B+ShearTimeline.X]-R)*Y,O+=(M[B+ShearTimeline.Y]-O)*Y}switch(S){case i.setup:P.shearX=P.data.shearX+R*b,P.shearY=P.data.shearY+O*b;break;case i.first:case i.replace:P.shearX+=(P.data.shearX+R-P.shearX)*b,P.shearY+=(P.data.shearY+O-P.shearY)*b;break;case i.add:P.shearX+=R*b,P.shearY+=O*b}}},ShearTimeline}(C);t.ShearTimeline=P;var R=function(o){function ColorTimeline(i){var a=o.call(this,i)||this;return a.frames=t.Utils.newFloatArray(i*ColorTimeline.ENTRIES),a}return u(ColorTimeline,o),ColorTimeline.prototype.getPropertyId=function(){return(a.color<<24)+this.slotIndex},ColorTimeline.prototype.setFrame=function(t,i,o,a,u,d){t*=ColorTimeline.ENTRIES,this.frames[t]=i,this.frames[t+ColorTimeline.R]=o,this.frames[t+ColorTimeline.G]=a,this.frames[t+ColorTimeline.B]=u,this.frames[t+ColorTimeline.A]=d},ColorTimeline.prototype.apply=function(t,o,a,u,b,S,C){var M=t.slots[this.slotIndex];if(M.bone.active){var P=this.frames;if(a<P[0])switch(S){case i.setup:return void M.color.setFromColor(M.data.color);case i.first:var R=M.color,O=M.data.color;R.add((O.r-R.r)*b,(O.g-R.g)*b,(O.b-R.b)*b,(O.a-R.a)*b)}else{var B=0,N=0,Y=0,G=0;if(a>=P[P.length-ColorTimeline.ENTRIES]){var X=P.length;B=P[X+ColorTimeline.PREV_R],N=P[X+ColorTimeline.PREV_G],Y=P[X+ColorTimeline.PREV_B],G=P[X+ColorTimeline.PREV_A]}else{var U=d.binarySearch(P,a,ColorTimeline.ENTRIES);B=P[U+ColorTimeline.PREV_R],N=P[U+ColorTimeline.PREV_G],Y=P[U+ColorTimeline.PREV_B],G=P[U+ColorTimeline.PREV_A];var z=P[U],V=this.getCurvePercent(U/ColorTimeline.ENTRIES-1,1-(a-z)/(P[U+ColorTimeline.PREV_TIME]-z));B+=(P[U+ColorTimeline.R]-B)*V,N+=(P[U+ColorTimeline.G]-N)*V,Y+=(P[U+ColorTimeline.B]-Y)*V,G+=(P[U+ColorTimeline.A]-G)*V}if(1==b)M.color.set(B,N,Y,G);else{R=M.color;S==i.setup&&R.setFromColor(M.data.color),R.add((B-R.r)*b,(N-R.g)*b,(Y-R.b)*b,(G-R.a)*b)}}}},ColorTimeline.ENTRIES=5,ColorTimeline.PREV_TIME=-5,ColorTimeline.PREV_R=-4,ColorTimeline.PREV_G=-3,ColorTimeline.PREV_B=-2,ColorTimeline.PREV_A=-1,ColorTimeline.R=1,ColorTimeline.G=2,ColorTimeline.B=3,ColorTimeline.A=4,ColorTimeline}(b);t.ColorTimeline=R;var O=function(o){function TwoColorTimeline(i){var a=o.call(this,i)||this;return a.frames=t.Utils.newFloatArray(i*TwoColorTimeline.ENTRIES),a}return u(TwoColorTimeline,o),TwoColorTimeline.prototype.getPropertyId=function(){return(a.twoColor<<24)+this.slotIndex},TwoColorTimeline.prototype.setFrame=function(t,i,o,a,u,d,b,S,C){t*=TwoColorTimeline.ENTRIES,this.frames[t]=i,this.frames[t+TwoColorTimeline.R]=o,this.frames[t+TwoColorTimeline.G]=a,this.frames[t+TwoColorTimeline.B]=u,this.frames[t+TwoColorTimeline.A]=d,this.frames[t+TwoColorTimeline.R2]=b,this.frames[t+TwoColorTimeline.G2]=S,this.frames[t+TwoColorTimeline.B2]=C},TwoColorTimeline.prototype.apply=function(t,o,a,u,b,S,C){var M=t.slots[this.slotIndex];if(M.bone.active){var P=this.frames;if(a<P[0])switch(S){case i.setup:return M.color.setFromColor(M.data.color),void M.darkColor.setFromColor(M.data.darkColor);case i.first:var R=M.color,O=M.darkColor,B=M.data.color,N=M.data.darkColor;R.add((B.r-R.r)*b,(B.g-R.g)*b,(B.b-R.b)*b,(B.a-R.a)*b),O.add((N.r-O.r)*b,(N.g-O.g)*b,(N.b-O.b)*b,0)}else{var Y=0,G=0,X=0,U=0,z=0,V=0,W=0;if(a>=P[P.length-TwoColorTimeline.ENTRIES]){var H=P.length;Y=P[H+TwoColorTimeline.PREV_R],G=P[H+TwoColorTimeline.PREV_G],X=P[H+TwoColorTimeline.PREV_B],U=P[H+TwoColorTimeline.PREV_A],z=P[H+TwoColorTimeline.PREV_R2],V=P[H+TwoColorTimeline.PREV_G2],W=P[H+TwoColorTimeline.PREV_B2]}else{var j=d.binarySearch(P,a,TwoColorTimeline.ENTRIES);Y=P[j+TwoColorTimeline.PREV_R],G=P[j+TwoColorTimeline.PREV_G],X=P[j+TwoColorTimeline.PREV_B],U=P[j+TwoColorTimeline.PREV_A],z=P[j+TwoColorTimeline.PREV_R2],V=P[j+TwoColorTimeline.PREV_G2],W=P[j+TwoColorTimeline.PREV_B2];var q=P[j],Z=this.getCurvePercent(j/TwoColorTimeline.ENTRIES-1,1-(a-q)/(P[j+TwoColorTimeline.PREV_TIME]-q));Y+=(P[j+TwoColorTimeline.R]-Y)*Z,G+=(P[j+TwoColorTimeline.G]-G)*Z,X+=(P[j+TwoColorTimeline.B]-X)*Z,U+=(P[j+TwoColorTimeline.A]-U)*Z,z+=(P[j+TwoColorTimeline.R2]-z)*Z,V+=(P[j+TwoColorTimeline.G2]-V)*Z,W+=(P[j+TwoColorTimeline.B2]-W)*Z}if(1==b)M.color.set(Y,G,X,U),M.darkColor.set(z,V,W,1);else{R=M.color,O=M.darkColor;S==i.setup&&(R.setFromColor(M.data.color),O.setFromColor(M.data.darkColor)),R.add((Y-R.r)*b,(G-R.g)*b,(X-R.b)*b,(U-R.a)*b),O.add((z-O.r)*b,(V-O.g)*b,(W-O.b)*b,0)}}}},TwoColorTimeline.ENTRIES=8,TwoColorTimeline.PREV_TIME=-8,TwoColorTimeline.PREV_R=-7,TwoColorTimeline.PREV_G=-6,TwoColorTimeline.PREV_B=-5,TwoColorTimeline.PREV_A=-4,TwoColorTimeline.PREV_R2=-3,TwoColorTimeline.PREV_G2=-2,TwoColorTimeline.PREV_B2=-1,TwoColorTimeline.R=1,TwoColorTimeline.G=2,TwoColorTimeline.B=3,TwoColorTimeline.A=4,TwoColorTimeline.R2=5,TwoColorTimeline.G2=6,TwoColorTimeline.B2=7,TwoColorTimeline}(b);t.TwoColorTimeline=O;var B=function(){function AttachmentTimeline(i){this.frames=t.Utils.newFloatArray(i),this.attachmentNames=new Array(i)}return AttachmentTimeline.prototype.getPropertyId=function(){return(a.attachment<<24)+this.slotIndex},AttachmentTimeline.prototype.getFrameCount=function(){return this.frames.length},AttachmentTimeline.prototype.setFrame=function(t,i,o){this.frames[t]=i,this.attachmentNames[t]=o},AttachmentTimeline.prototype.apply=function(t,a,u,b,S,C,M){var P=t.slots[this.slotIndex];if(P.bone.active)if(M!=o.mixOut){var R=this.frames;if(u<R[0])C!=i.setup&&C!=i.first||this.setAttachment(t,P,P.data.attachmentName);else{var O=0;O=u>=R[R.length-1]?R.length-1:d.binarySearch(R,u,1)-1;var B=this.attachmentNames[O];t.slots[this.slotIndex].setAttachment(null==B?null:t.getAttachment(this.slotIndex,B))}}else C==i.setup&&this.setAttachment(t,P,P.data.attachmentName)},AttachmentTimeline.prototype.setAttachment=function(t,i,o){i.attachment=null==o?null:t.getAttachment(this.slotIndex,o)},AttachmentTimeline}();t.AttachmentTimeline=B;var N=null,Y=function(o){function DeformTimeline(i){var a=o.call(this,i)||this;return a.frames=t.Utils.newFloatArray(i),a.frameVertices=new Array(i),null==N&&(N=t.Utils.newFloatArray(64)),a}return u(DeformTimeline,o),DeformTimeline.prototype.getPropertyId=function(){return(a.deform<<27)+ +this.attachment.id+this.slotIndex},DeformTimeline.prototype.setFrame=function(t,i,o){this.frames[t]=i,this.frameVertices[t]=o},DeformTimeline.prototype.apply=function(o,a,u,b,S,C,M){var P=o.slots[this.slotIndex];if(P.bone.active){var R=P.getAttachment();if(R instanceof t.VertexAttachment&&R.deformAttachment==this.attachment){var O=P.deform;0==O.length&&(C=i.setup);var B=this.frameVertices,N=B[0].length,Y=this.frames;if(u<Y[0]){var G=R;switch(C){case i.setup:return void(O.length=0);case i.first:if(1==S){O.length=0;break}var X=t.Utils.setArraySize(O,N);if(null==G.bones)for(var U=G.vertices,z=0;z<N;z++)X[z]+=(U[z]-X[z])*S;else{S=1-S;for(z=0;z<N;z++)X[z]*=S}}}else{var V=t.Utils.setArraySize(O,N);if(u>=Y[Y.length-1]){var W=B[Y.length-1];if(1==S)if(C==i.add)if(null==(G=R).bones){U=G.vertices;for(var H=0;H<N;H++)V[H]+=W[H]-U[H]}else for(var j=0;j<N;j++)V[j]+=W[j];else t.Utils.arrayCopy(W,0,V,0,N);else switch(C){case i.setup:var q=R;if(null==q.bones){U=q.vertices;for(var Z=0;Z<N;Z++){var K=U[Z];V[Z]=K+(W[Z]-K)*S}}else for(var $=0;$<N;$++)V[$]=W[$]*S;break;case i.first:case i.replace:for(var tt=0;tt<N;tt++)V[tt]+=(W[tt]-V[tt])*S;break;case i.add:if(null==(G=R).bones){U=G.vertices;for(var et=0;et<N;et++)V[et]+=(W[et]-U[et])*S}else for(var it=0;it<N;it++)V[it]+=W[it]*S}}else{var nt=d.binarySearch(Y,u),rt=B[nt-1],st=B[nt],ot=Y[nt],at=this.getCurvePercent(nt-1,1-(u-ot)/(Y[nt-1]-ot));if(1==S)if(C==i.add)if(null==(G=R).bones){U=G.vertices;for(var ht=0;ht<N;ht++){var lt=rt[ht];V[ht]+=lt+(st[ht]-lt)*at-U[ht]}}else for(var ut=0;ut<N;ut++){lt=rt[ut];V[ut]+=lt+(st[ut]-lt)*at}else for(var ct=0;ct<N;ct++){lt=rt[ct];V[ct]=lt+(st[ct]-lt)*at}else switch(C){case i.setup:var dt=R;if(null==dt.bones){U=dt.vertices;for(var ft=0;ft<N;ft++){lt=rt[ft],K=U[ft];V[ft]=K+(lt+(st[ft]-lt)*at-K)*S}}else for(var pt=0;pt<N;pt++){lt=rt[pt];V[pt]=(lt+(st[pt]-lt)*at)*S}break;case i.first:case i.replace:for(var gt=0;gt<N;gt++){lt=rt[gt];V[gt]+=(lt+(st[gt]-lt)*at-V[gt])*S}break;case i.add:if(null==(G=R).bones){U=G.vertices;for(var vt=0;vt<N;vt++){lt=rt[vt];V[vt]+=(lt+(st[vt]-lt)*at-U[vt])*S}}else for(var mt=0;mt<N;mt++){lt=rt[mt];V[mt]+=(lt+(st[mt]-lt)*at)*S}}}}}}},DeformTimeline}(b);t.DeformTimeline=Y;var G=function(){function EventTimeline(i){this.frames=t.Utils.newFloatArray(i),this.events=new Array(i)}return EventTimeline.prototype.getPropertyId=function(){return a.event<<24},EventTimeline.prototype.getFrameCount=function(){return this.frames.length},EventTimeline.prototype.setFrame=function(t,i){this.frames[t]=i.time,this.events[t]=i},EventTimeline.prototype.apply=function(t,i,o,a,u,b,S){if(null!=a){var C=this.frames,M=this.frames.length;if(i>o)this.apply(t,i,Number.MAX_VALUE,a,u,b,S),i=-1;else if(i>=C[M-1])return;if(!(o<C[0])){var P=0;if(i<C[0])P=0;else for(var R=C[P=d.binarySearch(C,i)];P>0&&C[P-1]==R;)P--;for(;P<M&&o>=C[P];P++)a.push(this.events[P])}}},EventTimeline}();t.EventTimeline=G;var X=function(){function DrawOrderTimeline(i){this.frames=t.Utils.newFloatArray(i),this.drawOrders=new Array(i)}return DrawOrderTimeline.prototype.getPropertyId=function(){return a.drawOrder<<24},DrawOrderTimeline.prototype.getFrameCount=function(){return this.frames.length},DrawOrderTimeline.prototype.setFrame=function(t,i,o){this.frames[t]=i,this.drawOrders[t]=o},DrawOrderTimeline.prototype.apply=function(a,u,b,S,C,M,P){var R=a.drawOrder,O=a.slots;if(P!=o.mixOut){var B=this.frames;if(b<B[0])M!=i.setup&&M!=i.first||t.Utils.arrayCopy(a.slots,0,a.drawOrder,0,a.slots.length);else{var N=0;N=b>=B[B.length-1]?B.length-1:d.binarySearch(B,b)-1;var Y=this.drawOrders[N];if(null==Y)t.Utils.arrayCopy(O,0,R,0,O.length);else for(var G=0,X=Y.length;G<X;G++)R[G]=O[Y[G]]}}else M==i.setup&&t.Utils.arrayCopy(a.slots,0,a.drawOrder,0,a.slots.length)},DrawOrderTimeline}();t.DrawOrderTimeline=X;var U=function(b){function IkConstraintTimeline(i){var o=b.call(this,i)||this;return o.frames=t.Utils.newFloatArray(i*IkConstraintTimeline.ENTRIES),o}return u(IkConstraintTimeline,b),IkConstraintTimeline.prototype.getPropertyId=function(){return(a.ikConstraint<<24)+this.ikConstraintIndex},IkConstraintTimeline.prototype.setFrame=function(t,i,o,a,u,d,b){t*=IkConstraintTimeline.ENTRIES,this.frames[t]=i,this.frames[t+IkConstraintTimeline.MIX]=o,this.frames[t+IkConstraintTimeline.SOFTNESS]=a,this.frames[t+IkConstraintTimeline.BEND_DIRECTION]=u,this.frames[t+IkConstraintTimeline.COMPRESS]=d?1:0,this.frames[t+IkConstraintTimeline.STRETCH]=b?1:0},IkConstraintTimeline.prototype.apply=function(t,a,u,b,S,C,M){var P=this.frames,R=t.ikConstraints[this.ikConstraintIndex];if(R.active)if(u<P[0])switch(C){case i.setup:return R.mix=R.data.mix,R.softness=R.data.softness,R.bendDirection=R.data.bendDirection,R.compress=R.data.compress,void(R.stretch=R.data.stretch);case i.first:R.mix+=(R.data.mix-R.mix)*S,R.softness+=(R.data.softness-R.softness)*S,R.bendDirection=R.data.bendDirection,R.compress=R.data.compress,R.stretch=R.data.stretch}else if(u>=P[P.length-IkConstraintTimeline.ENTRIES])C==i.setup?(R.mix=R.data.mix+(P[P.length+IkConstraintTimeline.PREV_MIX]-R.data.mix)*S,R.softness=R.data.softness+(P[P.length+IkConstraintTimeline.PREV_SOFTNESS]-R.data.softness)*S,M==o.mixOut?(R.bendDirection=R.data.bendDirection,R.compress=R.data.compress,R.stretch=R.data.stretch):(R.bendDirection=P[P.length+IkConstraintTimeline.PREV_BEND_DIRECTION],R.compress=0!=P[P.length+IkConstraintTimeline.PREV_COMPRESS],R.stretch=0!=P[P.length+IkConstraintTimeline.PREV_STRETCH])):(R.mix+=(P[P.length+IkConstraintTimeline.PREV_MIX]-R.mix)*S,R.softness+=(P[P.length+IkConstraintTimeline.PREV_SOFTNESS]-R.softness)*S,M==o.mixIn&&(R.bendDirection=P[P.length+IkConstraintTimeline.PREV_BEND_DIRECTION],R.compress=0!=P[P.length+IkConstraintTimeline.PREV_COMPRESS],R.stretch=0!=P[P.length+IkConstraintTimeline.PREV_STRETCH]));else{var O=d.binarySearch(P,u,IkConstraintTimeline.ENTRIES),B=P[O+IkConstraintTimeline.PREV_MIX],N=P[O+IkConstraintTimeline.PREV_SOFTNESS],Y=P[O],G=this.getCurvePercent(O/IkConstraintTimeline.ENTRIES-1,1-(u-Y)/(P[O+IkConstraintTimeline.PREV_TIME]-Y));C==i.setup?(R.mix=R.data.mix+(B+(P[O+IkConstraintTimeline.MIX]-B)*G-R.data.mix)*S,R.softness=R.data.softness+(N+(P[O+IkConstraintTimeline.SOFTNESS]-N)*G-R.data.softness)*S,M==o.mixOut?(R.bendDirection=R.data.bendDirection,R.compress=R.data.compress,R.stretch=R.data.stretch):(R.bendDirection=P[O+IkConstraintTimeline.PREV_BEND_DIRECTION],R.compress=0!=P[O+IkConstraintTimeline.PREV_COMPRESS],R.stretch=0!=P[O+IkConstraintTimeline.PREV_STRETCH])):(R.mix+=(B+(P[O+IkConstraintTimeline.MIX]-B)*G-R.mix)*S,R.softness+=(N+(P[O+IkConstraintTimeline.SOFTNESS]-N)*G-R.softness)*S,M==o.mixIn&&(R.bendDirection=P[O+IkConstraintTimeline.PREV_BEND_DIRECTION],R.compress=0!=P[O+IkConstraintTimeline.PREV_COMPRESS],R.stretch=0!=P[O+IkConstraintTimeline.PREV_STRETCH]))}},IkConstraintTimeline.ENTRIES=6,IkConstraintTimeline.PREV_TIME=-6,IkConstraintTimeline.PREV_MIX=-5,IkConstraintTimeline.PREV_SOFTNESS=-4,IkConstraintTimeline.PREV_BEND_DIRECTION=-3,IkConstraintTimeline.PREV_COMPRESS=-2,IkConstraintTimeline.PREV_STRETCH=-1,IkConstraintTimeline.MIX=1,IkConstraintTimeline.SOFTNESS=2,IkConstraintTimeline.BEND_DIRECTION=3,IkConstraintTimeline.COMPRESS=4,IkConstraintTimeline.STRETCH=5,IkConstraintTimeline}(b);t.IkConstraintTimeline=U;var z=function(o){function TransformConstraintTimeline(i){var a=o.call(this,i)||this;return a.frames=t.Utils.newFloatArray(i*TransformConstraintTimeline.ENTRIES),a}return u(TransformConstraintTimeline,o),TransformConstraintTimeline.prototype.getPropertyId=function(){return(a.transformConstraint<<24)+this.transformConstraintIndex},TransformConstraintTimeline.prototype.setFrame=function(t,i,o,a,u,d){t*=TransformConstraintTimeline.ENTRIES,this.frames[t]=i,this.frames[t+TransformConstraintTimeline.ROTATE]=o,this.frames[t+TransformConstraintTimeline.TRANSLATE]=a,this.frames[t+TransformConstraintTimeline.SCALE]=u,this.frames[t+TransformConstraintTimeline.SHEAR]=d},TransformConstraintTimeline.prototype.apply=function(t,o,a,u,b,S,C){var M=this.frames,P=t.transformConstraints[this.transformConstraintIndex];if(P.active)if(a<M[0]){var R=P.data;switch(S){case i.setup:return P.rotateMix=R.rotateMix,P.translateMix=R.translateMix,P.scaleMix=R.scaleMix,void(P.shearMix=R.shearMix);case i.first:P.rotateMix+=(R.rotateMix-P.rotateMix)*b,P.translateMix+=(R.translateMix-P.translateMix)*b,P.scaleMix+=(R.scaleMix-P.scaleMix)*b,P.shearMix+=(R.shearMix-P.shearMix)*b}}else{var O=0,B=0,N=0,Y=0;if(a>=M[M.length-TransformConstraintTimeline.ENTRIES]){var G=M.length;O=M[G+TransformConstraintTimeline.PREV_ROTATE],B=M[G+TransformConstraintTimeline.PREV_TRANSLATE],N=M[G+TransformConstraintTimeline.PREV_SCALE],Y=M[G+TransformConstraintTimeline.PREV_SHEAR]}else{var X=d.binarySearch(M,a,TransformConstraintTimeline.ENTRIES);O=M[X+TransformConstraintTimeline.PREV_ROTATE],B=M[X+TransformConstraintTimeline.PREV_TRANSLATE],N=M[X+TransformConstraintTimeline.PREV_SCALE],Y=M[X+TransformConstraintTimeline.PREV_SHEAR];var U=M[X],z=this.getCurvePercent(X/TransformConstraintTimeline.ENTRIES-1,1-(a-U)/(M[X+TransformConstraintTimeline.PREV_TIME]-U));O+=(M[X+TransformConstraintTimeline.ROTATE]-O)*z,B+=(M[X+TransformConstraintTimeline.TRANSLATE]-B)*z,N+=(M[X+TransformConstraintTimeline.SCALE]-N)*z,Y+=(M[X+TransformConstraintTimeline.SHEAR]-Y)*z}if(S==i.setup){R=P.data;P.rotateMix=R.rotateMix+(O-R.rotateMix)*b,P.translateMix=R.translateMix+(B-R.translateMix)*b,P.scaleMix=R.scaleMix+(N-R.scaleMix)*b,P.shearMix=R.shearMix+(Y-R.shearMix)*b}else P.rotateMix+=(O-P.rotateMix)*b,P.translateMix+=(B-P.translateMix)*b,P.scaleMix+=(N-P.scaleMix)*b,P.shearMix+=(Y-P.shearMix)*b}},TransformConstraintTimeline.ENTRIES=5,TransformConstraintTimeline.PREV_TIME=-5,TransformConstraintTimeline.PREV_ROTATE=-4,TransformConstraintTimeline.PREV_TRANSLATE=-3,TransformConstraintTimeline.PREV_SCALE=-2,TransformConstraintTimeline.PREV_SHEAR=-1,TransformConstraintTimeline.ROTATE=1,TransformConstraintTimeline.TRANSLATE=2,TransformConstraintTimeline.SCALE=3,TransformConstraintTimeline.SHEAR=4,TransformConstraintTimeline}(b);t.TransformConstraintTimeline=z;var V=function(o){function PathConstraintPositionTimeline(i){var a=o.call(this,i)||this;return a.frames=t.Utils.newFloatArray(i*PathConstraintPositionTimeline.ENTRIES),a}return u(PathConstraintPositionTimeline,o),PathConstraintPositionTimeline.prototype.getPropertyId=function(){return(a.pathConstraintPosition<<24)+this.pathConstraintIndex},PathConstraintPositionTimeline.prototype.setFrame=function(t,i,o){t*=PathConstraintPositionTimeline.ENTRIES,this.frames[t]=i,this.frames[t+PathConstraintPositionTimeline.VALUE]=o},PathConstraintPositionTimeline.prototype.apply=function(t,o,a,u,b,S,C){var M=this.frames,P=t.pathConstraints[this.pathConstraintIndex];if(P.active)if(a<M[0])switch(S){case i.setup:return void(P.position=P.data.position);case i.first:P.position+=(P.data.position-P.position)*b}else{var R=0;if(a>=M[M.length-PathConstraintPositionTimeline.ENTRIES])R=M[M.length+PathConstraintPositionTimeline.PREV_VALUE];else{var O=d.binarySearch(M,a,PathConstraintPositionTimeline.ENTRIES);R=M[O+PathConstraintPositionTimeline.PREV_VALUE];var B=M[O],N=this.getCurvePercent(O/PathConstraintPositionTimeline.ENTRIES-1,1-(a-B)/(M[O+PathConstraintPositionTimeline.PREV_TIME]-B));R+=(M[O+PathConstraintPositionTimeline.VALUE]-R)*N}S==i.setup?P.position=P.data.position+(R-P.data.position)*b:P.position+=(R-P.position)*b}},PathConstraintPositionTimeline.ENTRIES=2,PathConstraintPositionTimeline.PREV_TIME=-2,PathConstraintPositionTimeline.PREV_VALUE=-1,PathConstraintPositionTimeline.VALUE=1,PathConstraintPositionTimeline}(b);t.PathConstraintPositionTimeline=V;var W=function(t){function PathConstraintSpacingTimeline(i){return t.call(this,i)||this}return u(PathConstraintSpacingTimeline,t),PathConstraintSpacingTimeline.prototype.getPropertyId=function(){return(a.pathConstraintSpacing<<24)+this.pathConstraintIndex},PathConstraintSpacingTimeline.prototype.apply=function(t,o,a,u,b,S,C){var M=this.frames,P=t.pathConstraints[this.pathConstraintIndex];if(P.active)if(a<M[0])switch(S){case i.setup:return void(P.spacing=P.data.spacing);case i.first:P.spacing+=(P.data.spacing-P.spacing)*b}else{var R=0;if(a>=M[M.length-PathConstraintSpacingTimeline.ENTRIES])R=M[M.length+PathConstraintSpacingTimeline.PREV_VALUE];else{var O=d.binarySearch(M,a,PathConstraintSpacingTimeline.ENTRIES);R=M[O+PathConstraintSpacingTimeline.PREV_VALUE];var B=M[O],N=this.getCurvePercent(O/PathConstraintSpacingTimeline.ENTRIES-1,1-(a-B)/(M[O+PathConstraintSpacingTimeline.PREV_TIME]-B));R+=(M[O+PathConstraintSpacingTimeline.VALUE]-R)*N}S==i.setup?P.spacing=P.data.spacing+(R-P.data.spacing)*b:P.spacing+=(R-P.spacing)*b}},PathConstraintSpacingTimeline}(V);t.PathConstraintSpacingTimeline=W;var H=function(o){function PathConstraintMixTimeline(i){var a=o.call(this,i)||this;return a.frames=t.Utils.newFloatArray(i*PathConstraintMixTimeline.ENTRIES),a}return u(PathConstraintMixTimeline,o),PathConstraintMixTimeline.prototype.getPropertyId=function(){return(a.pathConstraintMix<<24)+this.pathConstraintIndex},PathConstraintMixTimeline.prototype.setFrame=function(t,i,o,a){t*=PathConstraintMixTimeline.ENTRIES,this.frames[t]=i,this.frames[t+PathConstraintMixTimeline.ROTATE]=o,this.frames[t+PathConstraintMixTimeline.TRANSLATE]=a},PathConstraintMixTimeline.prototype.apply=function(t,o,a,u,b,S,C){var M=this.frames,P=t.pathConstraints[this.pathConstraintIndex];if(P.active)if(a<M[0])switch(S){case i.setup:return P.rotateMix=P.data.rotateMix,void(P.translateMix=P.data.translateMix);case i.first:P.rotateMix+=(P.data.rotateMix-P.rotateMix)*b,P.translateMix+=(P.data.translateMix-P.translateMix)*b}else{var R=0,O=0;if(a>=M[M.length-PathConstraintMixTimeline.ENTRIES])R=M[M.length+PathConstraintMixTimeline.PREV_ROTATE],O=M[M.length+PathConstraintMixTimeline.PREV_TRANSLATE];else{var B=d.binarySearch(M,a,PathConstraintMixTimeline.ENTRIES);R=M[B+PathConstraintMixTimeline.PREV_ROTATE],O=M[B+PathConstraintMixTimeline.PREV_TRANSLATE];var N=M[B],Y=this.getCurvePercent(B/PathConstraintMixTimeline.ENTRIES-1,1-(a-N)/(M[B+PathConstraintMixTimeline.PREV_TIME]-N));R+=(M[B+PathConstraintMixTimeline.ROTATE]-R)*Y,O+=(M[B+PathConstraintMixTimeline.TRANSLATE]-O)*Y}S==i.setup?(P.rotateMix=P.data.rotateMix+(R-P.data.rotateMix)*b,P.translateMix=P.data.translateMix+(O-P.data.translateMix)*b):(P.rotateMix+=(R-P.rotateMix)*b,P.translateMix+=(O-P.translateMix)*b)}},PathConstraintMixTimeline.ENTRIES=3,PathConstraintMixTimeline.PREV_TIME=-3,PathConstraintMixTimeline.PREV_ROTATE=-2,PathConstraintMixTimeline.PREV_TRANSLATE=-1,PathConstraintMixTimeline.ROTATE=1,PathConstraintMixTimeline.TRANSLATE=2,PathConstraintMixTimeline}(b);t.PathConstraintMixTimeline=H}(a||(a={})),function(t){var i=function(){function AnimationState(i){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new u(this),this.propertyIDs=new t.IntSet,this.animationsChanged=!1,this.trackEntryPool=new t.Pool((function(){return new o})),this.data=i}return AnimationState.prototype.update=function(t){t*=this.timeScale;for(var i=this.tracks,o=0,a=i.length;o<a;o++){var u=i[o];if(null!=u){u.animationLast=u.nextAnimationLast,u.trackLast=u.nextTrackLast;var d=t*u.timeScale;if(u.delay>0){if(u.delay-=d,u.delay>0)continue;d=-u.delay,u.delay=0}var b=u.next;if(null!=b){var S=u.trackLast-b.delay;if(S>=0){for(b.delay=0,b.trackTime+=0==u.timeScale?0:(S/u.timeScale+t)*b.timeScale,u.trackTime+=d,this.setCurrent(o,b,!0);null!=b.mixingFrom;)b.mixTime+=t,b=b.mixingFrom;continue}}else if(u.trackLast>=u.trackEnd&&null==u.mixingFrom){i[o]=null,this.queue.end(u),this.disposeNext(u);continue}if(null!=u.mixingFrom&&this.updateMixingFrom(u,t)){var C=u.mixingFrom;for(u.mixingFrom=null,null!=C&&(C.mixingTo=null);null!=C;)this.queue.end(C),C=C.mixingFrom}u.trackTime+=d}}this.queue.drain()},AnimationState.prototype.updateMixingFrom=function(t,i){var o=t.mixingFrom;if(null==o)return!0;var a=this.updateMixingFrom(o,i);return o.animationLast=o.nextAnimationLast,o.trackLast=o.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=o.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=o.mixingFrom,null!=o.mixingFrom&&(o.mixingFrom.mixingTo=t),t.interruptAlpha=o.interruptAlpha,this.queue.end(o)),a):(o.trackTime+=i*o.timeScale,t.mixTime+=i,!1)},AnimationState.prototype.apply=function(i){if(null==i)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var o=this.events,a=this.tracks,u=!1,d=0,b=a.length;d<b;d++){var S=a[d];if(!(null==S||S.delay>0)){u=!0;var C=0==d?t.MixBlend.first:S.mixBlend,M=S.alpha;null!=S.mixingFrom?M*=this.applyMixingFrom(S,i,C):S.trackTime>=S.trackEnd&&null==S.next&&(M=0);var P=S.animationLast,R=S.getAnimationTime(),O=S.animation.timelines.length,B=S.animation.timelines;if(0==d&&1==M||C==t.MixBlend.add)for(var N=0;N<O;N++){t.Utils.webkit602BugfixHelper(M,C);var Y=B[N];Y instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(Y,i,R,C,!0):Y.apply(i,P,R,o,M,C,t.MixDirection.mixIn)}else{var G=S.timelineMode,X=0==S.timelinesRotation.length;X&&t.Utils.setArraySize(S.timelinesRotation,O<<1,null);var U=S.timelinesRotation;for(N=0;N<O;N++){var z=B[N],V=G[N]==AnimationState.SUBSEQUENT?C:t.MixBlend.setup;z instanceof t.RotateTimeline?this.applyRotateTimeline(z,i,R,M,V,U,N<<1,X):z instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(z,i,R,C,!0):(t.Utils.webkit602BugfixHelper(M,C),z.apply(i,P,R,o,M,V,t.MixDirection.mixIn))}}this.queueEvents(S,R),o.length=0,S.nextAnimationLast=R,S.nextTrackLast=S.trackTime}}for(var W=this.unkeyedState+AnimationState.SETUP,H=i.slots,j=0,q=i.slots.length;j<q;j++){var Z=H[j];if(Z.attachmentState==W){var K=Z.data.attachmentName;Z.attachment=null==K?null:i.getAttachment(Z.data.index,K)}}return this.unkeyedState+=2,this.queue.drain(),u},AnimationState.prototype.applyMixingFrom=function(i,o,a){var u=i.mixingFrom;null!=u.mixingFrom&&this.applyMixingFrom(u,o,a);var d=0;0==i.mixDuration?(d=1,a==t.MixBlend.first&&(a=t.MixBlend.setup)):((d=i.mixTime/i.mixDuration)>1&&(d=1),a!=t.MixBlend.first&&(a=u.mixBlend));var b=d<u.eventThreshold?this.events:null,S=d<u.attachmentThreshold,C=d<u.drawOrderThreshold,M=u.animationLast,P=u.getAnimationTime(),R=u.animation.timelines.length,O=u.animation.timelines,B=u.alpha*i.interruptAlpha,N=B*(1-d);if(a==t.MixBlend.add)for(var Y=0;Y<R;Y++)O[Y].apply(o,M,P,b,N,a,t.MixDirection.mixOut);else{var G=u.timelineMode,X=u.timelineHoldMix,U=0==u.timelinesRotation.length;U&&t.Utils.setArraySize(u.timelinesRotation,R<<1,null);var z=u.timelinesRotation;u.totalAlpha=0;for(Y=0;Y<R;Y++){var V=O[Y],W=t.MixDirection.mixOut,H=void 0,j=0;switch(G[Y]){case AnimationState.SUBSEQUENT:if(!C&&V instanceof t.DrawOrderTimeline)continue;H=a,j=N;break;case AnimationState.FIRST:H=t.MixBlend.setup,j=N;break;case AnimationState.HOLD_SUBSEQUENT:H=a,j=B;break;case AnimationState.HOLD_FIRST:H=t.MixBlend.setup,j=B;break;default:H=t.MixBlend.setup;var q=X[Y];j=B*Math.max(0,1-q.mixTime/q.mixDuration)}u.totalAlpha+=j,V instanceof t.RotateTimeline?this.applyRotateTimeline(V,o,P,j,H,z,Y<<1,U):V instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(V,o,P,H,S):(t.Utils.webkit602BugfixHelper(j,a),C&&V instanceof t.DrawOrderTimeline&&H==t.MixBlend.setup&&(W=t.MixDirection.mixIn),V.apply(o,M,P,b,j,H,W))}}return i.mixDuration>0&&this.queueEvents(u,P),this.events.length=0,u.nextAnimationLast=P,u.nextTrackLast=u.trackTime,d},AnimationState.prototype.applyAttachmentTimeline=function(i,o,a,u,d){var b=o.slots[i.slotIndex];if(b.bone.active){var S,C=i.frames;if(a<C[0])u!=t.MixBlend.setup&&u!=t.MixBlend.first||this.setAttachment(o,b,b.data.attachmentName,d);else S=a>=C[C.length-1]?C.length-1:t.Animation.binarySearch(C,a)-1,this.setAttachment(o,b,i.attachmentNames[S],d);b.attachmentState<=this.unkeyedState&&(b.attachmentState=this.unkeyedState+AnimationState.SETUP)}},AnimationState.prototype.setAttachment=function(t,i,o,a){i.attachment=null==o?null:t.getAttachment(i.data.index,o),a&&(i.attachmentState=this.unkeyedState+AnimationState.CURRENT)},AnimationState.prototype.applyRotateTimeline=function(i,o,a,u,d,b,S,C){if(C&&(b[S]=0),1!=u){var M=i,P=M.frames,R=o.bones[M.boneIndex];if(R.active){var O=0,B=0;if(a<P[0])switch(d){case t.MixBlend.setup:R.rotation=R.data.rotation;default:return;case t.MixBlend.first:O=R.rotation,B=R.data.rotation}else if(O=d==t.MixBlend.setup?R.data.rotation:R.rotation,a>=P[P.length-t.RotateTimeline.ENTRIES])B=R.data.rotation+P[P.length+t.RotateTimeline.PREV_ROTATION];else{var N=t.Animation.binarySearch(P,a,t.RotateTimeline.ENTRIES),Y=P[N+t.RotateTimeline.PREV_ROTATION],G=P[N],X=M.getCurvePercent((N>>1)-1,1-(a-G)/(P[N+t.RotateTimeline.PREV_TIME]-G));B=P[N+t.RotateTimeline.ROTATION]-Y,B=Y+(B-=360*(16384-(16384.499999999996-B/360|0)))*X+R.data.rotation,B-=360*(16384-(16384.499999999996-B/360|0))}var U=0,z=B-O;if(0==(z-=360*(16384-(16384.499999999996-z/360|0))))U=b[S];else{var V=0,W=0;C?(V=0,W=z):(V=b[S],W=b[S+1]);var H=z>0,j=V>=0;t.MathUtils.signum(W)!=t.MathUtils.signum(z)&&Math.abs(W)<=90&&(Math.abs(V)>180&&(V+=360*t.MathUtils.signum(V)),j=H),U=z+V-V%360,j!=H&&(U+=360*t.MathUtils.signum(V)),b[S]=U}b[S+1]=z,O+=U*u,R.rotation=O-360*(16384-(16384.499999999996-O/360|0))}}else i.apply(o,0,a,null,1,d,t.MixDirection.mixIn)},AnimationState.prototype.queueEvents=function(t,i){for(var o=t.animationStart,a=t.animationEnd,u=a-o,d=t.trackLast%u,b=this.events,S=0,C=b.length;S<C;S++){var M=b[S];if(M.time<d)break;M.time>a||this.queue.event(t,M)}for((t.loop?0==u||d>t.trackTime%u:i>=a&&t.animationLast<a)&&this.queue.complete(t);S<C;S++){b[S].time<o||this.queue.event(t,b[S])}},AnimationState.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var i=0,o=this.tracks.length;i<o;i++)this.clearTrack(i);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},AnimationState.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var i=this.tracks[t];if(null!=i){this.queue.end(i),this.disposeNext(i);for(var o=i;;){var a=o.mixingFrom;if(null==a)break;this.queue.end(a),o.mixingFrom=null,o.mixingTo=null,o=a}this.tracks[i.trackIndex]=null,this.queue.drain()}}},AnimationState.prototype.setCurrent=function(t,i,o){var a=this.expandToIndex(t);this.tracks[t]=i,null!=a&&(o&&this.queue.interrupt(a),i.mixingFrom=a,a.mixingTo=i,i.mixTime=0,null!=a.mixingFrom&&a.mixDuration>0&&(i.interruptAlpha*=Math.min(1,a.mixTime/a.mixDuration)),a.timelinesRotation.length=0),this.queue.start(i)},AnimationState.prototype.setAnimation=function(t,i,o){var a=this.data.skeletonData.findAnimation(i);if(null==a)throw new Error("Animation not found: "+i);return this.setAnimationWith(t,a,o)},AnimationState.prototype.setAnimationWith=function(t,i,o){if(null==i)throw new Error("animation cannot be null.");var a=!0,u=this.expandToIndex(t);null!=u&&(-1==u.nextTrackLast?(this.tracks[t]=u.mixingFrom,this.queue.interrupt(u),this.queue.end(u),this.disposeNext(u),u=u.mixingFrom,a=!1):this.disposeNext(u));var d=this.trackEntry(t,i,o,u);return this.setCurrent(t,d,a),this.queue.drain(),d},AnimationState.prototype.addAnimation=function(t,i,o,a){var u=this.data.skeletonData.findAnimation(i);if(null==u)throw new Error("Animation not found: "+i);return this.addAnimationWith(t,u,o,a)},AnimationState.prototype.addAnimationWith=function(t,i,o,a){if(null==i)throw new Error("animation cannot be null.");var u=this.expandToIndex(t);if(null!=u)for(;null!=u.next;)u=u.next;var d=this.trackEntry(t,i,o,u);if(null==u)this.setCurrent(t,d,!0),this.queue.drain();else if(u.next=d,a<=0){var b=u.animationEnd-u.animationStart;0!=b?(u.loop?a+=b*(1+(u.trackTime/b|0)):a+=Math.max(b,u.trackTime),a-=this.data.getMix(u.animation,i)):a=u.trackTime}return d.delay=a,d},AnimationState.prototype.setEmptyAnimation=function(t,i){var o=this.setAnimationWith(t,AnimationState.emptyAnimation,!1);return o.mixDuration=i,o.trackEnd=i,o},AnimationState.prototype.addEmptyAnimation=function(t,i,o){o<=0&&(o-=i);var a=this.addAnimationWith(t,AnimationState.emptyAnimation,!1,o);return a.mixDuration=i,a.trackEnd=i,a},AnimationState.prototype.setEmptyAnimations=function(t){var i=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var o=0,a=this.tracks.length;o<a;o++){var u=this.tracks[o];null!=u&&this.setEmptyAnimation(u.trackIndex,t)}this.queue.drainDisabled=i,this.queue.drain()},AnimationState.prototype.expandToIndex=function(i){return i<this.tracks.length?this.tracks[i]:(t.Utils.ensureArrayCapacity(this.tracks,i+1,null),this.tracks.length=i+1,null)},AnimationState.prototype.trackEntry=function(i,o,a,u){var d=this.trackEntryPool.obtain();return d.trackIndex=i,d.animation=o,d.loop=a,d.holdPrevious=!1,d.eventThreshold=0,d.attachmentThreshold=0,d.drawOrderThreshold=0,d.animationStart=0,d.animationEnd=o.duration,d.animationLast=-1,d.nextAnimationLast=-1,d.delay=0,d.trackTime=0,d.trackLast=-1,d.nextTrackLast=-1,d.trackEnd=Number.MAX_VALUE,d.timeScale=1,d.alpha=1,d.interruptAlpha=1,d.mixTime=0,d.mixDuration=null==u?0:this.data.getMix(u.animation,o),d.mixBlend=t.MixBlend.replace,d},AnimationState.prototype.disposeNext=function(t){for(var i=t.next;null!=i;)this.queue.dispose(i),i=i.next;t.next=null},AnimationState.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var i=0,o=this.tracks.length;i<o;i++){var a=this.tracks[i];if(null!=a){for(;null!=a.mixingFrom;)a=a.mixingFrom;do{null!=a.mixingFrom&&a.mixBlend==t.MixBlend.add||this.computeHold(a),a=a.mixingTo}while(null!=a)}}},AnimationState.prototype.computeHold=function(i){var o=i.mixingTo,a=i.animation.timelines,u=i.animation.timelines.length,d=t.Utils.setArraySize(i.timelineMode,u);i.timelineHoldMix.length=0;var b=t.Utils.setArraySize(i.timelineHoldMix,u),S=this.propertyIDs;if(null!=o&&o.holdPrevious)for(var C=0;C<u;C++)d[C]=S.add(a[C].getPropertyId())?AnimationState.HOLD_FIRST:AnimationState.HOLD_SUBSEQUENT;else t:for(C=0;C<u;C++){var M=a[C],P=M.getPropertyId();if(S.add(P))if(null==o||M instanceof t.AttachmentTimeline||M instanceof t.DrawOrderTimeline||M instanceof t.EventTimeline||!o.animation.hasTimeline(P))d[C]=AnimationState.FIRST;else{for(var R=o.mixingTo;null!=R;R=R.mixingTo)if(!R.animation.hasTimeline(P)){if(i.mixDuration>0){d[C]=AnimationState.HOLD_MIX,b[C]=R;continue t}break}d[C]=AnimationState.HOLD_FIRST}else d[C]=AnimationState.SUBSEQUENT}},AnimationState.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},AnimationState.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},AnimationState.prototype.removeListener=function(t){var i=this.listeners.indexOf(t);i>=0&&this.listeners.splice(i,1)},AnimationState.prototype.clearListeners=function(){this.listeners.length=0},AnimationState.prototype.clearListenerNotifications=function(){this.queue.clear()},AnimationState.emptyAnimation=new t.Animation("<empty>",[],0),AnimationState.SUBSEQUENT=0,AnimationState.FIRST=1,AnimationState.HOLD_SUBSEQUENT=2,AnimationState.HOLD_FIRST=3,AnimationState.HOLD_MIX=4,AnimationState.SETUP=1,AnimationState.CURRENT=2,AnimationState}();t.AnimationState=i;var o=function(){function TrackEntry(){this.mixBlend=t.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return TrackEntry.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},TrackEntry.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},TrackEntry.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},TrackEntry.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},TrackEntry.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},TrackEntry}();t.TrackEntry=o;var a,u=function(){function EventQueue(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return EventQueue.prototype.start=function(t){this.objects.push(a.start),this.objects.push(t),this.animState.animationsChanged=!0},EventQueue.prototype.interrupt=function(t){this.objects.push(a.interrupt),this.objects.push(t)},EventQueue.prototype.end=function(t){this.objects.push(a.end),this.objects.push(t),this.animState.animationsChanged=!0},EventQueue.prototype.dispose=function(t){this.objects.push(a.dispose),this.objects.push(t)},EventQueue.prototype.complete=function(t){this.objects.push(a.complete),this.objects.push(t)},EventQueue.prototype.event=function(t,i){this.objects.push(a.event),this.objects.push(t),this.objects.push(i)},EventQueue.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,i=this.animState.listeners,o=0;o<t.length;o+=2){var u=t[o],d=t[o+1];switch(u){case a.start:null!=d.listener&&d.listener.start&&d.listener.start(d);for(var b=0;b<i.length;b++)i[b].start&&i[b].start(d);break;case a.interrupt:null!=d.listener&&d.listener.interrupt&&d.listener.interrupt(d);for(b=0;b<i.length;b++)i[b].interrupt&&i[b].interrupt(d);break;case a.end:null!=d.listener&&d.listener.end&&d.listener.end(d);for(b=0;b<i.length;b++)i[b].end&&i[b].end(d);case a.dispose:null!=d.listener&&d.listener.dispose&&d.listener.dispose(d);for(b=0;b<i.length;b++)i[b].dispose&&i[b].dispose(d);this.animState.trackEntryPool.free(d);break;case a.complete:null!=d.listener&&d.listener.complete&&d.listener.complete(d);for(b=0;b<i.length;b++)i[b].complete&&i[b].complete(d);break;case a.event:var S=t[2+o++];null!=d.listener&&d.listener.event&&d.listener.event(d,S);for(b=0;b<i.length;b++)i[b].event&&i[b].event(d,S)}}this.clear(),this.drainDisabled=!1}},EventQueue.prototype.clear=function(){this.objects.length=0},EventQueue}();t.EventQueue=u,function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(a=t.EventType||(t.EventType={}));var d=function(){function AnimationStateAdapter(){}return AnimationStateAdapter.prototype.start=function(t){},AnimationStateAdapter.prototype.interrupt=function(t){},AnimationStateAdapter.prototype.end=function(t){},AnimationStateAdapter.prototype.dispose=function(t){},AnimationStateAdapter.prototype.complete=function(t){},AnimationStateAdapter.prototype.event=function(t,i){},AnimationStateAdapter}();t.AnimationStateAdapter=d}(a||(a={})),function(t){var i=function(){function AnimationStateData(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return AnimationStateData.prototype.setMix=function(t,i,o){var a=this.skeletonData.findAnimation(t);if(null==a)throw new Error("Animation not found: "+t);var u=this.skeletonData.findAnimation(i);if(null==u)throw new Error("Animation not found: "+i);this.setMixWith(a,u,o)},AnimationStateData.prototype.setMixWith=function(t,i,o){if(null==t)throw new Error("from cannot be null.");if(null==i)throw new Error("to cannot be null.");var a=t.name+"."+i.name;this.animationToMixTime[a]=o},AnimationStateData.prototype.getMix=function(t,i){var o=t.name+"."+i.name,a=this.animationToMixTime[o];return void 0===a?this.defaultMix:a},AnimationStateData}();t.AnimationStateData=i}(a||(a={})),function(t){var i=function(){function AssetManager(t,i){void 0===i&&(i=""),this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.rawDataUris={},this.textureLoader=t,this.pathPrefix=i}return AssetManager.prototype.downloadText=function(t,i,o){var a=new XMLHttpRequest;a.overrideMimeType("text/html"),this.rawDataUris[t]&&(t=this.rawDataUris[t]),a.open("GET",t,!0),a.onload=function(){200==a.status?i(a.responseText):o(a.status,a.responseText)},a.onerror=function(){o(a.status,a.responseText)},a.send()},AssetManager.prototype.downloadBinary=function(t,i,o){var a=new XMLHttpRequest;this.rawDataUris[t]&&(t=this.rawDataUris[t]),a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){200==a.status?i(new Uint8Array(a.response)):o(a.status,a.responseText)},a.onerror=function(){o(a.status,a.responseText)},a.send()},AssetManager.prototype.setRawDataURI=function(t,i){this.rawDataUris[this.pathPrefix+t]=i},AssetManager.prototype.loadBinary=function(t,i,o){var a=this;void 0===i&&(i=null),void 0===o&&(o=null),t=this.pathPrefix+t,this.toLoad++,this.downloadBinary(t,(function(o){a.assets[t]=o,i&&i(t,o),a.toLoad--,a.loaded++}),(function(i,u){a.errors[t]="Couldn't load binary "+t+": status "+status+", "+u,o&&o(t,"Couldn't load binary "+t+": status "+status+", "+u),a.toLoad--,a.loaded++}))},AssetManager.prototype.loadText=function(t,i,o){var a=this;void 0===i&&(i=null),void 0===o&&(o=null),t=this.pathPrefix+t,this.toLoad++,this.downloadText(t,(function(o){a.assets[t]=o,i&&i(t,o),a.toLoad--,a.loaded++}),(function(i,u){a.errors[t]="Couldn't load text "+t+": status "+status+", "+u,o&&o(t,"Couldn't load text "+t+": status "+status+", "+u),a.toLoad--,a.loaded++}))},AssetManager.prototype.loadTexture=function(t,i,o){var a=this;void 0===i&&(i=null),void 0===o&&(o=null);var u=t=this.pathPrefix+t;this.toLoad++;var d=new Image;d.crossOrigin="anonymous",d.onload=function(o){var b=a.textureLoader(d);a.assets[u]=b,a.toLoad--,a.loaded++,i&&i(t,d)},d.onerror=function(i){a.errors[t]="Couldn't load image "+t,a.toLoad--,a.loaded++,o&&o(t,"Couldn't load image "+t)},this.rawDataUris[t]&&(t=this.rawDataUris[t]),d.src=t},AssetManager.prototype.loadTextureAtlas=function(i,o,a){var u=this;void 0===o&&(o=null),void 0===a&&(a=null);var d=i.lastIndexOf("/")>=0?i.substring(0,i.lastIndexOf("/")):"";i=this.pathPrefix+i,this.toLoad++,this.downloadText(i,(function(b){var S={count:0},C=new Array;try{new t.TextureAtlas(b,(function(i){C.push(""==d?i:d+"/"+i);var o=document.createElement("img");return o.width=16,o.height=16,new t.FakeTexture(o)}))}catch(B){var M=B;return u.errors[i]="Couldn't load texture atlas "+i+": "+M.message,a&&a(i,"Couldn't load texture atlas "+i+": "+M.message),u.toLoad--,void u.loaded++}for(var P=function _loop_1(M){var P=!1;u.loadTexture(M,(function(M,R){if(S.count++,S.count==C.length)if(P)u.errors[i]="Couldn't load texture atlas page "+M+"} of atlas "+i,a&&a(i,"Couldn't load texture atlas page "+M+" of atlas "+i),u.toLoad--,u.loaded++;else try{var O=new t.TextureAtlas(b,(function(t){return u.get(""==d?t:d+"/"+t)}));u.assets[i]=O,o&&o(i,O),u.toLoad--,u.loaded++}catch(B){var N=B;u.errors[i]="Couldn't load texture atlas "+i+": "+N.message,a&&a(i,"Couldn't load texture atlas "+i+": "+N.message),u.toLoad--,u.loaded++}}),(function(t,o){P=!0,S.count++,S.count==C.length&&(u.errors[i]="Couldn't load texture atlas page "+t+"} of atlas "+i,a&&a(i,"Couldn't load texture atlas page "+t+" of atlas "+i),u.toLoad--,u.loaded++)}))},R=0,O=C;R<O.length;R++){P(O[R])}}),(function(t,o){u.errors[i]="Couldn't load texture atlas "+i+": status "+status+", "+o,a&&a(i,"Couldn't load texture atlas "+i+": status "+status+", "+o),u.toLoad--,u.loaded++}))},AssetManager.prototype.get=function(t){return t=this.pathPrefix+t,this.assets[t]},AssetManager.prototype.remove=function(t){t=this.pathPrefix+t;var i=this.assets[t];i.dispose&&i.dispose(),this.assets[t]=null},AssetManager.prototype.removeAll=function(){for(var t in this.assets){var i=this.assets[t];i.dispose&&i.dispose()}this.assets={}},AssetManager.prototype.isLoadingComplete=function(){return 0==this.toLoad},AssetManager.prototype.getToLoad=function(){return this.toLoad},AssetManager.prototype.getLoaded=function(){return this.loaded},AssetManager.prototype.dispose=function(){this.removeAll()},AssetManager.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},AssetManager.prototype.getErrors=function(){return this.errors},AssetManager}();t.AssetManager=i}(a||(a={})),function(t){var i=function(){function AtlasAttachmentLoader(t){this.atlas=t}return AtlasAttachmentLoader.prototype.newRegionAttachment=function(i,o,a){var u=this.atlas.findRegion(a);if(null==u)throw new Error("Region not found in atlas: "+a+" (region attachment: "+o+")");u.renderObject=u;var d=new t.RegionAttachment(o);return d.setRegion(u),d},AtlasAttachmentLoader.prototype.newMeshAttachment=function(i,o,a){var u=this.atlas.findRegion(a);if(null==u)throw new Error("Region not found in atlas: "+a+" (mesh attachment: "+o+")");u.renderObject=u;var d=new t.MeshAttachment(o);return d.region=u,d},AtlasAttachmentLoader.prototype.newBoundingBoxAttachment=function(i,o){return new t.BoundingBoxAttachment(o)},AtlasAttachmentLoader.prototype.newPathAttachment=function(i,o){return new t.PathAttachment(o)},AtlasAttachmentLoader.prototype.newPointAttachment=function(i,o){return new t.PointAttachment(o)},AtlasAttachmentLoader.prototype.newClippingAttachment=function(i,o){return new t.ClippingAttachment(o)},AtlasAttachmentLoader}();t.AtlasAttachmentLoader=i}(a||(a={})),function(t){var i;(i=t.BlendMode||(t.BlendMode={}))[i.Normal=0]="Normal",i[i.Additive=1]="Additive",i[i.Multiply=2]="Multiply",i[i.Screen=3]="Screen"}(a||(a={})),function(t){var i=function(){function Bone(t,i,o){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==i)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=i,this.parent=o,this.setToSetupPose()}return Bone.prototype.isActive=function(){return this.active},Bone.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},Bone.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},Bone.prototype.updateWorldTransformWith=function(i,o,a,u,d,b,S){this.ax=i,this.ay=o,this.arotation=a,this.ascaleX=u,this.ascaleY=d,this.ashearX=b,this.ashearY=S,this.appliedValid=!0;var C=this.parent;if(null==C){var M=this.skeleton,P=a+90+S,R=M.scaleX,O=M.scaleY;return this.a=t.MathUtils.cosDeg(a+b)*u*R,this.b=t.MathUtils.cosDeg(P)*d*R,this.c=t.MathUtils.sinDeg(a+b)*u*O,this.d=t.MathUtils.sinDeg(P)*d*O,this.worldX=i*R+M.x,void(this.worldY=o*O+M.y)}var B=C.a,N=C.b,Y=C.c,G=C.d;switch(this.worldX=B*i+N*o+C.worldX,this.worldY=Y*i+G*o+C.worldY,this.data.transformMode){case t.TransformMode.Normal:P=a+90+S;var X=t.MathUtils.cosDeg(a+b)*u,U=t.MathUtils.cosDeg(P)*d,z=t.MathUtils.sinDeg(a+b)*u,V=t.MathUtils.sinDeg(P)*d;return this.a=B*X+N*z,this.b=B*U+N*V,this.c=Y*X+G*z,void(this.d=Y*U+G*V);case t.TransformMode.OnlyTranslation:P=a+90+S;this.a=t.MathUtils.cosDeg(a+b)*u,this.b=t.MathUtils.cosDeg(P)*d,this.c=t.MathUtils.sinDeg(a+b)*u,this.d=t.MathUtils.sinDeg(P)*d;break;case t.TransformMode.NoRotationOrReflection:var W=0;(q=B*B+Y*Y)>1e-4?(q=Math.abs(B*G-N*Y)/q,B/=this.skeleton.scaleX,N=(Y/=this.skeleton.scaleY)*q,G=B*q,W=Math.atan2(Y,B)*t.MathUtils.radDeg):(B=0,Y=0,W=90-Math.atan2(G,N)*t.MathUtils.radDeg);var H=a+b-W,j=a+S-W+90;X=t.MathUtils.cosDeg(H)*u,U=t.MathUtils.cosDeg(j)*d,z=t.MathUtils.sinDeg(H)*u,V=t.MathUtils.sinDeg(j)*d;this.a=B*X-N*z,this.b=B*U-N*V,this.c=Y*X+G*z,this.d=Y*U+G*V;break;case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:var q,Z=t.MathUtils.cosDeg(a),K=t.MathUtils.sinDeg(a),$=(B*Z+N*K)/this.skeleton.scaleX,tt=(Y*Z+G*K)/this.skeleton.scaleY;(q=Math.sqrt($*$+tt*tt))>1e-5&&(q=1/q),$*=q,tt*=q,q=Math.sqrt($*$+tt*tt),this.data.transformMode==t.TransformMode.NoScale&&B*G-N*Y<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(q=-q);var et=Math.PI/2+Math.atan2(tt,$),it=Math.cos(et)*q,nt=Math.sin(et)*q;X=t.MathUtils.cosDeg(b)*u,U=t.MathUtils.cosDeg(90+S)*d,z=t.MathUtils.sinDeg(b)*u,V=t.MathUtils.sinDeg(90+S)*d;this.a=$*X+it*z,this.b=$*U+it*V,this.c=tt*X+nt*z,this.d=tt*U+nt*V}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY},Bone.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},Bone.prototype.getWorldRotationX=function(){return Math.atan2(this.c,this.a)*t.MathUtils.radDeg},Bone.prototype.getWorldRotationY=function(){return Math.atan2(this.d,this.b)*t.MathUtils.radDeg},Bone.prototype.getWorldScaleX=function(){return Math.sqrt(this.a*this.a+this.c*this.c)},Bone.prototype.getWorldScaleY=function(){return Math.sqrt(this.b*this.b+this.d*this.d)},Bone.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var i=this.parent;if(null==i)return this.ax=this.worldX,this.ay=this.worldY,this.arotation=Math.atan2(this.c,this.a)*t.MathUtils.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*t.MathUtils.radDeg);var o=i.a,a=i.b,u=i.c,d=i.d,b=1/(o*d-a*u),S=this.worldX-i.worldX,C=this.worldY-i.worldY;this.ax=S*d*b-C*a*b,this.ay=C*o*b-S*u*b;var M=b*d,P=b*o,R=b*a,O=b*u,B=M*this.a-R*this.c,N=M*this.b-R*this.d,Y=P*this.c-O*this.a,G=P*this.d-O*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(B*B+Y*Y),this.ascaleX>1e-4){var X=B*G-N*Y;this.ascaleY=X/this.ascaleX,this.ashearY=Math.atan2(B*N+Y*G,X)*t.MathUtils.radDeg,this.arotation=Math.atan2(Y,B)*t.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(N*N+G*G),this.ashearY=0,this.arotation=90-Math.atan2(G,N)*t.MathUtils.radDeg},Bone.prototype.worldToLocal=function(t){var i=this.a,o=this.b,a=this.c,u=this.d,d=1/(i*u-o*a),b=t.x-this.worldX,S=t.y-this.worldY;return t.x=b*u*d-S*o*d,t.y=S*i*d-b*a*d,t},Bone.prototype.localToWorld=function(t){var i=t.x,o=t.y;return t.x=i*this.a+o*this.b+this.worldX,t.y=i*this.c+o*this.d+this.worldY,t},Bone.prototype.worldToLocalRotation=function(i){var o=t.MathUtils.sinDeg(i),a=t.MathUtils.cosDeg(i);return Math.atan2(this.a*o-this.c*a,this.d*a-this.b*o)*t.MathUtils.radDeg+this.rotation-this.shearX},Bone.prototype.localToWorldRotation=function(i){i-=this.rotation-this.shearX;var o=t.MathUtils.sinDeg(i),a=t.MathUtils.cosDeg(i);return Math.atan2(a*this.c+o*this.d,a*this.a+o*this.b)*t.MathUtils.radDeg},Bone.prototype.rotateWorld=function(i){var o=this.a,a=this.b,u=this.c,d=this.d,b=t.MathUtils.cosDeg(i),S=t.MathUtils.sinDeg(i);this.a=b*o-S*u,this.b=b*a-S*d,this.c=S*o+b*u,this.d=S*a+b*d,this.appliedValid=!1},Bone}();t.Bone=i}(a||(a={})),function(t){var i,o=function o(a,u,d){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=i.Normal,this.skinRequired=!1,this.color=new t.Color,a<0)throw new Error("index must be >= 0.");if(null==u)throw new Error("name cannot be null.");this.index=a,this.name=u,this.parent=d};t.BoneData=o,function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(i=t.TransformMode||(t.TransformMode={}))}(a||(a={})),function(t){var i=function i(t,o,a){this.name=t,this.order=o,this.skinRequired=a};t.ConstraintData=i}(a||(a={})),function(t){var i=function i(t,o){if(null==o)throw new Error("data cannot be null.");this.time=t,this.data=o};t.Event=i}(a||(a={})),function(t){var i=function i(t){this.name=t};t.EventData=i}(a||(a={})),function(t){var i=function(){function IkConstraint(t,i){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==i)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var o=0;o<t.bones.length;o++)this.bones.push(i.findBone(t.bones[o].name));this.target=i.findBone(t.target.name)}return IkConstraint.prototype.isActive=function(){return this.active},IkConstraint.prototype.apply=function(){this.update()},IkConstraint.prototype.update=function(){var t=this.target,i=this.bones;switch(i.length){case 1:this.apply1(i[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(i[0],i[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}},IkConstraint.prototype.apply1=function(i,o,a,u,d,b,S){i.appliedValid||i.updateAppliedTransform();var C=i.parent,M=C.a,P=C.b,R=C.c,O=C.d,B=-i.ashearX-i.arotation,N=0,Y=0;switch(i.data.transformMode){case t.TransformMode.OnlyTranslation:N=o-i.worldX,Y=a-i.worldY;break;case t.TransformMode.NoRotationOrReflection:var G=Math.abs(M*O-P*R)/(M*M+R*R),X=M/i.skeleton.scaleX,U=R/i.skeleton.scaleY;P=-U*G*i.skeleton.scaleX,O=X*G*i.skeleton.scaleY,B+=Math.atan2(U,X)*t.MathUtils.radDeg;default:var z=o-C.worldX,V=a-C.worldY,W=M*O-P*R;N=(z*O-V*P)/W-i.ax,Y=(V*M-z*R)/W-i.ay}B+=Math.atan2(Y,N)*t.MathUtils.radDeg,i.ascaleX<0&&(B+=180),B>180?B-=360:B<-180&&(B+=360);var H=i.ascaleX,j=i.ascaleY;if(u||d){switch(i.data.transformMode){case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:N=o-i.worldX,Y=a-i.worldY}var q=i.data.length*H,Z=Math.sqrt(N*N+Y*Y);if(u&&Z<q||d&&Z>q&&q>1e-4)H*=G=(Z/q-1)*S+1,b&&(j*=G)}i.updateWorldTransformWith(i.ax,i.ay,i.arotation+B*S,H,j,i.ashearX,i.ashearY)},IkConstraint.prototype.apply2=function(i,o,a,u,d,b,S,C){if(0!=C){i.appliedValid||i.updateAppliedTransform(),o.appliedValid||o.updateAppliedTransform();var M=i.ax,P=i.ay,R=i.ascaleX,O=R,B=i.ascaleY,N=o.ascaleX,Y=0,G=0,X=0;R<0?(R=-R,Y=180,X=-1):(Y=0,X=1),B<0&&(B=-B,X=-X),N<0?(N=-N,G=180):G=0;var U=o.ax,z=0,V=0,W=0,H=i.a,j=i.b,q=i.c,Z=i.d,K=Math.abs(R-B)<=1e-4;K?(V=H*U+j*(z=o.ay)+i.worldX,W=q*U+Z*z+i.worldY):(z=0,V=H*U+i.worldX,W=q*U+i.worldY);var $=i.parent;H=$.a,j=$.b,q=$.c;var tt,et,it=1/(H*(Z=$.d)-j*q),nt=V-$.worldX,rt=W-$.worldY,st=(nt*Z-rt*j)*it-M,ot=(rt*H-nt*q)*it-P,at=Math.sqrt(st*st+ot*ot),ht=o.data.length*N;if(at<1e-4)return this.apply1(i,a,u,!1,b,!1,C),void o.updateWorldTransformWith(U,z,0,o.ascaleX,o.ascaleY,o.ashearX,o.ashearY);var lt=((nt=a-$.worldX)*Z-(rt=u-$.worldY)*j)*it-M,ut=(rt*H-nt*q)*it-P,ct=lt*lt+ut*ut;if(0!=S){S*=R*(N+1)/2;var dt=Math.sqrt(ct),ft=dt-at-ht*R+S;if(ft>0){var pt=Math.min(1,ft/(2*S))-1;ct=(lt-=(pt=(ft-S*(1-pt*pt))/dt)*lt)*lt+(ut-=pt*ut)*ut}}t:if(K){var gt=(ct-at*at-(ht*=R)*ht)/(2*at*ht);gt<-1?gt=-1:gt>1&&(gt=1,b&&(O*=(Math.sqrt(ct)/(at+ht)-1)*C+1)),et=Math.acos(gt)*d,H=at+ht*gt,j=ht*Math.sin(et),tt=Math.atan2(ut*H-lt*j,lt*H+ut*j)}else{var vt=(H=R*ht)*H,mt=(j=B*ht)*j,yt=Math.atan2(ut,lt),xt=-2*mt*at,Tt=mt-vt;if((Z=xt*xt-4*Tt*(q=mt*at*at+vt*ct-vt*mt))>=0){var bt=Math.sqrt(Z);xt<0&&(bt=-bt);var wt=(bt=-(xt+bt)/2)/Tt,St=q/bt,Ct=Math.abs(wt)<Math.abs(St)?wt:St;if(Ct*Ct<=ct){rt=Math.sqrt(ct-Ct*Ct)*d,tt=yt-Math.atan2(rt,Ct),et=Math.atan2(rt/B,(Ct-at)/R);break t}}var Et=t.MathUtils.PI,Mt=at-H,_t=Mt*Mt,Pt=0,Rt=0,kt=at+H,Ot=kt*kt,Lt=0;(q=-H*at/(vt-mt))>=-1&&q<=1&&(q=Math.acos(q),(Z=(nt=H*Math.cos(q)+at)*nt+(rt=j*Math.sin(q))*rt)<_t&&(Et=q,_t=Z,Mt=nt,Pt=rt),Z>Ot&&(Rt=q,Ot=Z,kt=nt,Lt=rt)),ct<=(_t+Ot)/2?(tt=yt-Math.atan2(Pt*d,Mt),et=Et*d):(tt=yt-Math.atan2(Lt*d,kt),et=Rt*d)}var Dt=Math.atan2(z,U)*X,It=i.arotation;(tt=(tt-Dt)*t.MathUtils.radDeg+Y-It)>180?tt-=360:tt<-180&&(tt+=360),i.updateWorldTransformWith(M,P,It+tt*C,O,i.ascaleY,0,0),It=o.arotation,(et=((et+Dt)*t.MathUtils.radDeg-o.ashearX)*X+G-It)>180?et-=360:et<-180&&(et+=360),o.updateWorldTransformWith(U,z,It+et*C,o.ascaleX,o.ascaleY,o.ashearX,o.ashearY)}else o.updateWorldTransform()},IkConstraint}();t.IkConstraint=i}(a||(a={})),function(t){var i=function(t){function IkConstraintData(i){var o=t.call(this,i,0,!1)||this;return o.bones=new Array,o.bendDirection=1,o.compress=!1,o.stretch=!1,o.uniform=!1,o.mix=1,o.softness=0,o}return u(IkConstraintData,t),IkConstraintData}(t.ConstraintData);t.IkConstraintData=i}(a||(a={})),function(t){var i=function(){function PathConstraint(t,i){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==i)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var o=0,a=t.bones.length;o<a;o++)this.bones.push(i.findBone(t.bones[o].name));this.target=i.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return PathConstraint.prototype.isActive=function(){return this.active},PathConstraint.prototype.apply=function(){this.update()},PathConstraint.prototype.update=function(){var i=this.target.getAttachment();if(i instanceof t.PathAttachment){var o=this.rotateMix,a=this.translateMix,u=o>0;if(a>0||u){var d=this.data,b=d.spacingMode==t.SpacingMode.Percent,S=d.rotateMode,C=S==t.RotateMode.Tangent,M=S==t.RotateMode.ChainScale,P=this.bones.length,R=C?P:P+1,O=this.bones,B=t.Utils.setArraySize(this.spaces,R),N=null,Y=this.spacing;if(M||!b){M&&(N=t.Utils.setArraySize(this.lengths,P));for(var G=d.spacingMode==t.SpacingMode.Length,X=0,U=R-1;X<U;){var z=(it=O[X]).data.length;if(z<PathConstraint.epsilon)M&&(N[X]=0),B[++X]=0;else if(b){if(M){var V=z*it.a,W=z*it.c,H=Math.sqrt(V*V+W*W);N[X]=H}B[++X]=Y}else{V=z*it.a,W=z*it.c;var j=Math.sqrt(V*V+W*W);M&&(N[X]=j),B[++X]=(G?z+Y:Y)*j/z}}}else for(X=1;X<R;X++)B[X]=Y;var q=this.computeWorldPositions(i,R,C,d.positionMode==t.PositionMode.Percent,b),Z=q[0],K=q[1],$=d.offsetRotation,tt=!1;if(0==$)tt=S==t.RotateMode.Chain;else tt=!1,$*=(et=this.target.bone).a*et.d-et.b*et.c>0?t.MathUtils.degRad:-t.MathUtils.degRad;X=0;for(var et=3;X<P;X++,et+=3){var it;(it=O[X]).worldX+=(Z-it.worldX)*a,it.worldY+=(K-it.worldY)*a;var nt=(V=q[et])-Z,rt=(W=q[et+1])-K;if(M){var st=N[X];if(0!=st){var ot=(Math.sqrt(nt*nt+rt*rt)/st-1)*o+1;it.a*=ot,it.c*=ot}}if(Z=V,K=W,u){var at=it.a,ht=it.b,lt=it.c,ut=it.d,ct=0,dt=0,ft=0;if(ct=C?q[et-1]:0==B[X+1]?q[et+2]:Math.atan2(rt,nt),ct-=Math.atan2(lt,at),tt){dt=Math.cos(ct),ft=Math.sin(ct);var pt=it.data.length;Z+=(pt*(dt*at-ft*lt)-nt)*o,K+=(pt*(ft*at+dt*lt)-rt)*o}else ct+=$;ct>t.MathUtils.PI?ct-=t.MathUtils.PI2:ct<-t.MathUtils.PI&&(ct+=t.MathUtils.PI2),ct*=o,dt=Math.cos(ct),ft=Math.sin(ct),it.a=dt*at-ft*lt,it.b=dt*ht-ft*ut,it.c=ft*at+dt*lt,it.d=ft*ht+dt*ut}it.appliedValid=!1}}}},PathConstraint.prototype.computeWorldPositions=function(i,o,a,u,d){var b=this.target,S=this.position,C=this.spaces,M=t.Utils.setArraySize(this.positions,3*o+2),P=null,R=i.closed,O=i.worldVerticesLength,B=O/6,N=PathConstraint.NONE;if(!i.constantSpeed){var Y=i.lengths,G=Y[B-=R?1:2];if(u&&(S*=G),d)for(var X=1;X<o;X++)C[X]*=G;P=t.Utils.setArraySize(this.world,8);X=0;for(var U=0,z=0;X<o;X++,U+=3){var V=S+=vt=C[X];if(R)(V%=G)<0&&(V+=G),z=0;else{if(V<0){N!=PathConstraint.BEFORE&&(N=PathConstraint.BEFORE,i.computeWorldVertices(b,2,4,P,0,2)),this.addBeforePosition(V,P,0,M,U);continue}if(V>G){N!=PathConstraint.AFTER&&(N=PathConstraint.AFTER,i.computeWorldVertices(b,O-6,4,P,0,2)),this.addAfterPosition(V-G,P,0,M,U);continue}}for(;;z++){var W=Y[z];if(!(V>W)){if(0==z)V/=W;else V=(V-(Tt=Y[z-1]))/(W-Tt);break}}z!=N&&(N=z,R&&z==B?(i.computeWorldVertices(b,O-4,4,P,0,2),i.computeWorldVertices(b,0,4,P,4,2)):i.computeWorldVertices(b,6*z+2,8,P,0,2)),this.addCurvePosition(V,P[0],P[1],P[2],P[3],P[4],P[5],P[6],P[7],M,U,a||X>0&&0==vt)}return M}R?(O+=2,P=t.Utils.setArraySize(this.world,O),i.computeWorldVertices(b,2,O-4,P,0,2),i.computeWorldVertices(b,0,2,P,O-4,2),P[O-2]=P[0],P[O-1]=P[1]):(B--,O-=4,P=t.Utils.setArraySize(this.world,O),i.computeWorldVertices(b,2,O,P,0,2));for(var H=t.Utils.setArraySize(this.curves,B),j=0,q=P[0],Z=P[1],K=0,$=0,tt=0,et=0,it=0,nt=0,rt=0,st=0,ot=0,at=0,ht=0,lt=0,ut=0,ct=0,dt=(X=0,2);X<B;X++,dt+=6)K=P[dt],$=P[dt+1],tt=P[dt+2],et=P[dt+3],ht=2*(rt=.1875*(q-2*K+tt))+(ot=.09375*(3*(K-tt)-q+(it=P[dt+4]))),lt=2*(st=.1875*(Z-2*$+et))+(at=.09375*(3*($-et)-Z+(nt=P[dt+5]))),ut=.75*(K-q)+rt+.16666667*ot,ct=.75*($-Z)+st+.16666667*at,j+=Math.sqrt(ut*ut+ct*ct),ut+=ht,ct+=lt,ht+=ot,lt+=at,j+=Math.sqrt(ut*ut+ct*ct),ut+=ht,ct+=lt,j+=Math.sqrt(ut*ut+ct*ct),ut+=ht+ot,ct+=lt+at,j+=Math.sqrt(ut*ut+ct*ct),H[X]=j,q=it,Z=nt;if(S*=u?j:j/i.lengths[B-1],d)for(X=1;X<o;X++)C[X]*=j;for(var ft=this.segments,pt=0,gt=(X=0,U=0,z=0,0);X<o;X++,U+=3){var vt;V=S+=vt=C[X];if(R)(V%=j)<0&&(V+=j),z=0;else{if(V<0){this.addBeforePosition(V,P,0,M,U);continue}if(V>j){this.addAfterPosition(V-j,P,O-4,M,U);continue}}for(;;z++){var mt=H[z];if(!(V>mt)){if(0==z)V/=mt;else V=(V-(Tt=H[z-1]))/(mt-Tt);break}}if(z!=N){N=z;var yt=6*z;for(q=P[yt],Z=P[yt+1],K=P[yt+2],$=P[yt+3],tt=P[yt+4],et=P[yt+5],ht=2*(rt=.03*(q-2*K+tt))+(ot=.006*(3*(K-tt)-q+(it=P[yt+6]))),lt=2*(st=.03*(Z-2*$+et))+(at=.006*(3*($-et)-Z+(nt=P[yt+7]))),ut=.3*(K-q)+rt+.16666667*ot,ct=.3*($-Z)+st+.16666667*at,pt=Math.sqrt(ut*ut+ct*ct),ft[0]=pt,yt=1;yt<8;yt++)ut+=ht,ct+=lt,ht+=ot,lt+=at,pt+=Math.sqrt(ut*ut+ct*ct),ft[yt]=pt;ut+=ht,ct+=lt,pt+=Math.sqrt(ut*ut+ct*ct),ft[8]=pt,ut+=ht+ot,ct+=lt+at,pt+=Math.sqrt(ut*ut+ct*ct),ft[9]=pt,gt=0}for(V*=pt;;gt++){var xt=ft[gt];if(!(V>xt)){var Tt;if(0==gt)V/=xt;else V=gt+(V-(Tt=ft[gt-1]))/(xt-Tt);break}}this.addCurvePosition(.1*V,q,Z,K,$,tt,et,it,nt,M,U,a||X>0&&0==vt)}return M},PathConstraint.prototype.addBeforePosition=function(t,i,o,a,u){var d=i[o],b=i[o+1],S=i[o+2]-d,C=i[o+3]-b,M=Math.atan2(C,S);a[u]=d+t*Math.cos(M),a[u+1]=b+t*Math.sin(M),a[u+2]=M},PathConstraint.prototype.addAfterPosition=function(t,i,o,a,u){var d=i[o+2],b=i[o+3],S=d-i[o],C=b-i[o+1],M=Math.atan2(C,S);a[u]=d+t*Math.cos(M),a[u+1]=b+t*Math.sin(M),a[u+2]=M},PathConstraint.prototype.addCurvePosition=function(t,i,o,a,u,d,b,S,C,M,P,R){if(0==t||isNaN(t))return M[P]=i,M[P+1]=o,void(M[P+2]=Math.atan2(u-o,a-i));var O=t*t,B=O*t,N=1-t,Y=N*N,G=Y*N,X=N*t,U=3*X,z=N*U,V=U*t,W=i*G+a*z+d*V+S*B,H=o*G+u*z+b*V+C*B;M[P]=W,M[P+1]=H,R&&(M[P+2]=t<.001?Math.atan2(u-o,a-i):Math.atan2(H-(o*Y+u*X*2+b*O),W-(i*Y+a*X*2+d*O)))},PathConstraint.NONE=-1,PathConstraint.BEFORE=-2,PathConstraint.AFTER=-3,PathConstraint.epsilon=1e-5,PathConstraint}();t.PathConstraint=i}(a||(a={})),function(t){var i,o,a,d=function(t){function PathConstraintData(i){var o=t.call(this,i,0,!1)||this;return o.bones=new Array,o}return u(PathConstraintData,t),PathConstraintData}(t.ConstraintData);t.PathConstraintData=d,(i=t.PositionMode||(t.PositionMode={}))[i.Fixed=0]="Fixed",i[i.Percent=1]="Percent",(o=t.SpacingMode||(t.SpacingMode={}))[o.Length=0]="Length",o[o.Fixed=1]="Fixed",o[o.Percent=2]="Percent",(a=t.RotateMode||(t.RotateMode={}))[a.Tangent=0]="Tangent",a[a.Chain=1]="Chain",a[a.ChainScale=2]="ChainScale"}(a||(a={})),function(t){var i=function(){function Assets(t){this.toLoad=new Array,this.assets={},this.clientId=t}return Assets.prototype.loaded=function(){var t=0;for(var i in this.assets)t++;return t},Assets}(),o=function(){function SharedAssetManager(t){void 0===t&&(t=""),this.clientAssets={},this.queuedAssets={},this.rawAssets={},this.errors={},this.pathPrefix=t}return SharedAssetManager.prototype.queueAsset=function(t,o,a){var u=this.clientAssets[t];return null==u&&(u=new i(t),this.clientAssets[t]=u),null!==o&&(u.textureLoader=o),u.toLoad.push(a),this.queuedAssets[a]!==a&&(this.queuedAssets[a]=a,!0)},SharedAssetManager.prototype.loadText=function(t,i){var o=this;if(i=this.pathPrefix+i,this.queueAsset(t,null,i)){var a=new XMLHttpRequest;a.overrideMimeType("text/html"),a.onreadystatechange=function(){a.readyState==XMLHttpRequest.DONE&&(a.status>=200&&a.status<300?o.rawAssets[i]=a.responseText:o.errors[i]="Couldn't load text "+i+": status "+a.status+", "+a.responseText)},a.open("GET",i,!0),a.send()}},SharedAssetManager.prototype.loadJson=function(t,i){var o=this;if(i=this.pathPrefix+i,this.queueAsset(t,null,i)){var a=new XMLHttpRequest;a.overrideMimeType("text/html"),a.onreadystatechange=function(){a.readyState==XMLHttpRequest.DONE&&(a.status>=200&&a.status<300?o.rawAssets[i]=JSON.parse(a.responseText):o.errors[i]="Couldn't load text "+i+": status "+a.status+", "+a.responseText)},a.open("GET",i,!0),a.send()}},SharedAssetManager.prototype.loadTexture=function(t,i,o){var a=this;if(o=this.pathPrefix+o,this.queueAsset(t,i,o))if(!!("undefined"==typeof window||"undefined"==typeof navigator||!window.document)&&"undefined"!=typeof importScripts){fetch(o,{mode:"cors"}).then((function(t){return t.ok||(a.errors[o]="Couldn't load image "+o),t.blob()})).then((function(t){return createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"})})).then((function(t){a.rawAssets[o]=t}))}else{var u=new Image;u.crossOrigin="anonymous",u.onload=function(t){a.rawAssets[o]=u},u.onerror=function(t){a.errors[o]="Couldn't load image "+o},u.src=o}},SharedAssetManager.prototype.get=function(t,i){i=this.pathPrefix+i;var o=this.clientAssets[t];return null==o||o.assets[i]},SharedAssetManager.prototype.updateClientAssets=function(t){for(var i=!!("undefined"==typeof window||"undefined"==typeof navigator||!window.document)&&"undefined"!=typeof importScripts,o=0;o<t.toLoad.length;o++){var a=t.toLoad[o],u=t.assets[a];if(null==u){var d=this.rawAssets[a];if(null==d)continue;i?d instanceof ImageBitmap?t.assets[a]=t.textureLoader(d):t.assets[a]=d:d instanceof HTMLImageElement?t.assets[a]=t.textureLoader(d):t.assets[a]=d}}},SharedAssetManager.prototype.isLoadingComplete=function(t){var i=this.clientAssets[t];return null==i||(this.updateClientAssets(i),i.toLoad.length==i.loaded())},SharedAssetManager.prototype.dispose=function(){},SharedAssetManager.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},SharedAssetManager.prototype.getErrors=function(){return this.errors},SharedAssetManager}();t.SharedAssetManager=o}(a||(a={})),function(t){var i=function(){function Skeleton(i){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==i)throw new Error("data cannot be null.");this.data=i,this.bones=new Array;for(var o=0;o<i.bones.length;o++){var a=i.bones[o],u=void 0;if(null==a.parent)u=new t.Bone(a,this,null);else{var d=this.bones[a.parent.index];u=new t.Bone(a,this,d),d.children.push(u)}this.bones.push(u)}this.slots=new Array,this.drawOrder=new Array;for(o=0;o<i.slots.length;o++){var b=i.slots[o],S=(u=this.bones[b.boneData.index],new t.Slot(b,u));this.slots.push(S),this.drawOrder.push(S)}this.ikConstraints=new Array;for(o=0;o<i.ikConstraints.length;o++){var C=i.ikConstraints[o];this.ikConstraints.push(new t.IkConstraint(C,this))}this.transformConstraints=new Array;for(o=0;o<i.transformConstraints.length;o++){var M=i.transformConstraints[o];this.transformConstraints.push(new t.TransformConstraint(M,this))}this.pathConstraints=new Array;for(o=0;o<i.pathConstraints.length;o++){var P=i.pathConstraints[o];this.pathConstraints.push(new t.PathConstraint(P,this))}this.color=new t.Color(1,1,1,1),this.updateCache()}return Skeleton.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,i=0,o=t.length;i<o;i++){(u=t[i]).sorted=u.data.skinRequired,u.active=!u.sorted}if(null!=this.skin){var a=this.skin.bones;for(i=0,o=this.skin.bones.length;i<o;i++){var u=this.bones[a[i].index];do{u.sorted=!1,u.active=!0,u=u.parent}while(null!=u)}}var d=this.ikConstraints,b=this.transformConstraints,S=this.pathConstraints,C=d.length,M=b.length,P=S.length,R=C+M+P;t:for(i=0;i<R;i++){for(var O=0;O<C;O++){if((B=d[O]).data.order==i){this.sortIkConstraint(B);continue t}}for(O=0;O<M;O++){if((B=b[O]).data.order==i){this.sortTransformConstraint(B);continue t}}for(O=0;O<P;O++){var B;if((B=S[O]).data.order==i){this.sortPathConstraint(B);continue t}}}for(i=0,o=t.length;i<o;i++)this.sortBone(t[i])},Skeleton.prototype.sortIkConstraint=function(i){if(i.active=i.target.isActive()&&(!i.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,i.data,!0)),i.active){var o=i.target;this.sortBone(o);var a=i.bones,u=a[0];if(this.sortBone(u),a.length>1){var d=a[a.length-1];this._updateCache.indexOf(d)>-1||this.updateCacheReset.push(d)}this._updateCache.push(i),this.sortReset(u.children),a[a.length-1].sorted=!0}},Skeleton.prototype.sortPathConstraint=function(i){if(i.active=i.target.bone.isActive()&&(!i.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,i.data,!0)),i.active){var o=i.target,a=o.data.index,u=o.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,a,u),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,a,u);for(var d=0,b=this.data.skins.length;d<b;d++)this.sortPathConstraintAttachment(this.data.skins[d],a,u);var S=o.getAttachment();S instanceof t.PathAttachment&&this.sortPathConstraintAttachmentWith(S,u);var C=i.bones,M=C.length;for(d=0;d<M;d++)this.sortBone(C[d]);this._updateCache.push(i);for(d=0;d<M;d++)this.sortReset(C[d].children);for(d=0;d<M;d++)C[d].sorted=!0}},Skeleton.prototype.sortTransformConstraint=function(i){if(i.active=i.target.isActive()&&(!i.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,i.data,!0)),i.active){this.sortBone(i.target);var o=i.bones,a=o.length;if(i.data.local)for(var u=0;u<a;u++){var d=o[u];this.sortBone(d.parent),this._updateCache.indexOf(d)>-1||this.updateCacheReset.push(d)}else for(u=0;u<a;u++)this.sortBone(o[u]);this._updateCache.push(i);for(var b=0;b<a;b++)this.sortReset(o[b].children);for(b=0;b<a;b++)o[b].sorted=!0}},Skeleton.prototype.sortPathConstraintAttachment=function(t,i,o){var a=t.attachments[i];if(a)for(var u in a)this.sortPathConstraintAttachmentWith(a[u],o)},Skeleton.prototype.sortPathConstraintAttachmentWith=function(i,o){if(i instanceof t.PathAttachment){var a=i.bones;if(null==a)this.sortBone(o);else for(var u=this.bones,d=0;d<a.length;)for(var b=a[d++],S=d+b;d<S;d++){var C=a[d];this.sortBone(u[C])}}},Skeleton.prototype.sortBone=function(t){if(!t.sorted){var i=t.parent;null!=i&&this.sortBone(i),t.sorted=!0,this._updateCache.push(t)}},Skeleton.prototype.sortReset=function(t){for(var i=0,o=t.length;i<o;i++){var a=t[i];a.active&&(a.sorted&&this.sortReset(a.children),a.sorted=!1)}},Skeleton.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,i=0,o=t.length;i<o;i++){var a=t[i];a.ax=a.x,a.ay=a.y,a.arotation=a.rotation,a.ascaleX=a.scaleX,a.ascaleY=a.scaleY,a.ashearX=a.shearX,a.ashearY=a.shearY,a.appliedValid=!0}var u=this._updateCache;for(i=0,o=u.length;i<o;i++)u[i].update()},Skeleton.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},Skeleton.prototype.setBonesToSetupPose=function(){for(var t=this.bones,i=0,o=t.length;i<o;i++)t[i].setToSetupPose();var a=this.ikConstraints;for(i=0,o=a.length;i<o;i++){(S=a[i]).mix=S.data.mix,S.softness=S.data.softness,S.bendDirection=S.data.bendDirection,S.compress=S.data.compress,S.stretch=S.data.stretch}var u=this.transformConstraints;for(i=0,o=u.length;i<o;i++){var d=(S=u[i]).data;S.rotateMix=d.rotateMix,S.translateMix=d.translateMix,S.scaleMix=d.scaleMix,S.shearMix=d.shearMix}var b=this.pathConstraints;for(i=0,o=b.length;i<o;i++){var S;d=(S=b[i]).data;S.position=d.position,S.spacing=d.spacing,S.rotateMix=d.rotateMix,S.translateMix=d.translateMix}},Skeleton.prototype.setSlotsToSetupPose=function(){var i=this.slots;t.Utils.arrayCopy(i,0,this.drawOrder,0,i.length);for(var o=0,a=i.length;o<a;o++)i[o].setToSetupPose()},Skeleton.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},Skeleton.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var i=this.bones,o=0,a=i.length;o<a;o++){var u=i[o];if(u.data.name==t)return u}return null},Skeleton.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var i=this.bones,o=0,a=i.length;o<a;o++)if(i[o].data.name==t)return o;return-1},Skeleton.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var i=this.slots,o=0,a=i.length;o<a;o++){var u=i[o];if(u.data.name==t)return u}return null},Skeleton.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var i=this.slots,o=0,a=i.length;o<a;o++)if(i[o].data.name==t)return o;return-1},Skeleton.prototype.setSkinByName=function(t){var i=this.data.findSkin(t);if(null==i)throw new Error("Skin not found: "+t);this.setSkin(i)},Skeleton.prototype.setSkin=function(t){if(t!=this.skin){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var i=this.slots,o=0,a=i.length;o<a;o++){var u=i[o],d=u.data.attachmentName;if(null!=d){var b=t.getAttachment(o,d);null!=b&&u.setAttachment(b)}}this.skin=t,this.updateCache()}},Skeleton.prototype.getAttachmentByName=function(t,i){return this.getAttachment(this.data.findSlotIndex(t),i)},Skeleton.prototype.getAttachment=function(t,i){if(null==i)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var o=this.skin.getAttachment(t,i);if(null!=o)return o}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,i):null},Skeleton.prototype.setAttachment=function(t,i){if(null==t)throw new Error("slotName cannot be null.");for(var o=this.slots,a=0,u=o.length;a<u;a++){var d=o[a];if(d.data.name==t){var b=null;if(null!=i&&null==(b=this.getAttachment(a,i)))throw new Error("Attachment not found: "+i+", for slot: "+t);return void d.setAttachment(b)}}throw new Error("Slot not found: "+t)},Skeleton.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var i=this.ikConstraints,o=0,a=i.length;o<a;o++){var u=i[o];if(u.data.name==t)return u}return null},Skeleton.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var i=this.transformConstraints,o=0,a=i.length;o<a;o++){var u=i[o];if(u.data.name==t)return u}return null},Skeleton.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var i=this.pathConstraints,o=0,a=i.length;o<a;o++){var u=i[o];if(u.data.name==t)return u}return null},Skeleton.prototype.getBounds=function(i,o,a){if(void 0===a&&(a=new Array(2)),null==i)throw new Error("offset cannot be null.");if(null==o)throw new Error("size cannot be null.");for(var u=this.drawOrder,d=Number.POSITIVE_INFINITY,b=Number.POSITIVE_INFINITY,S=Number.NEGATIVE_INFINITY,C=Number.NEGATIVE_INFINITY,M=0,P=u.length;M<P;M++){var R=u[M];if(R.bone.active){var O=0,B=null,N=R.getAttachment();if(N instanceof t.RegionAttachment)O=8,B=t.Utils.setArraySize(a,O,0),N.computeWorldVertices(R.bone,B,0,2);else if(N instanceof t.MeshAttachment){var Y=N;O=Y.worldVerticesLength,B=t.Utils.setArraySize(a,O,0),Y.computeWorldVertices(R,0,O,B,0,2)}if(null!=B)for(var G=0,X=B.length;G<X;G+=2){var U=B[G],z=B[G+1];d=Math.min(d,U),b=Math.min(b,z),S=Math.max(S,U),C=Math.max(C,z)}}}i.set(d,b),o.set(S-d,C-b)},Skeleton.prototype.update=function(t){this.time+=t},Skeleton}();t.Skeleton=i}(a||(a={})),function(t){var i=function(){function SkeletonBinary(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return SkeletonBinary.prototype.readSkeletonData=function(i){var a=this.scale,u=new t.SkeletonData;u.name="";var d=new o(i);if(u.hash=d.readString(),u.version=d.readString(),"3.8.75"==u.version)throw new Error("Unsupported skeleton data, please export with a newer version of Spine.");u.x=d.readFloat(),u.y=d.readFloat(),u.width=d.readFloat(),u.height=d.readFloat();var b=d.readBoolean();b&&(u.fps=d.readFloat(),u.imagesPath=d.readString(),u.audioPath=d.readString());var S=0;S=d.readInt(!0);for(var C=0;C<S;C++)d.strings.push(d.readString());S=d.readInt(!0);for(C=0;C<S;C++){var M=d.readString(),P=0==C?null:u.bones[d.readInt(!0)];(B=new t.BoneData(C,M,P)).rotation=d.readFloat(),B.x=d.readFloat()*a,B.y=d.readFloat()*a,B.scaleX=d.readFloat(),B.scaleY=d.readFloat(),B.shearX=d.readFloat(),B.shearY=d.readFloat(),B.length=d.readFloat()*a,B.transformMode=SkeletonBinary.TransformModeValues[d.readInt(!0)],B.skinRequired=d.readBoolean(),b&&t.Color.rgba8888ToColor(B.color,d.readInt32()),u.bones.push(B)}S=d.readInt(!0);for(C=0;C<S;C++){var R=d.readString(),O=u.bones[d.readInt(!0)],B=new t.SlotData(C,R,O);t.Color.rgba8888ToColor(B.color,d.readInt32());var N=d.readInt32();-1!=N&&t.Color.rgb888ToColor(B.darkColor=new t.Color,N),B.attachmentName=d.readStringRef(),B.blendMode=SkeletonBinary.BlendModeValues[d.readInt(!0)],u.slots.push(B)}S=d.readInt(!0);C=0;for(var Y=void 0;C<S;C++){(B=new t.IkConstraintData(d.readString())).order=d.readInt(!0),B.skinRequired=d.readBoolean(),Y=d.readInt(!0);for(var G=0;G<Y;G++)B.bones.push(u.bones[d.readInt(!0)]);B.target=u.bones[d.readInt(!0)],B.mix=d.readFloat(),B.softness=d.readFloat()*a,B.bendDirection=d.readByte(),B.compress=d.readBoolean(),B.stretch=d.readBoolean(),B.uniform=d.readBoolean(),u.ikConstraints.push(B)}S=d.readInt(!0);for(C=0,Y=void 0;C<S;C++){(B=new t.TransformConstraintData(d.readString())).order=d.readInt(!0),B.skinRequired=d.readBoolean(),Y=d.readInt(!0);for(G=0;G<Y;G++)B.bones.push(u.bones[d.readInt(!0)]);B.target=u.bones[d.readInt(!0)],B.local=d.readBoolean(),B.relative=d.readBoolean(),B.offsetRotation=d.readFloat(),B.offsetX=d.readFloat()*a,B.offsetY=d.readFloat()*a,B.offsetScaleX=d.readFloat(),B.offsetScaleY=d.readFloat(),B.offsetShearY=d.readFloat(),B.rotateMix=d.readFloat(),B.translateMix=d.readFloat(),B.scaleMix=d.readFloat(),B.shearMix=d.readFloat(),u.transformConstraints.push(B)}S=d.readInt(!0);for(C=0,Y=void 0;C<S;C++){(B=new t.PathConstraintData(d.readString())).order=d.readInt(!0),B.skinRequired=d.readBoolean(),Y=d.readInt(!0);for(G=0;G<Y;G++)B.bones.push(u.bones[d.readInt(!0)]);B.target=u.slots[d.readInt(!0)],B.positionMode=SkeletonBinary.PositionModeValues[d.readInt(!0)],B.spacingMode=SkeletonBinary.SpacingModeValues[d.readInt(!0)],B.rotateMode=SkeletonBinary.RotateModeValues[d.readInt(!0)],B.offsetRotation=d.readFloat(),B.position=d.readFloat(),B.positionMode==t.PositionMode.Fixed&&(B.position*=a),B.spacing=d.readFloat(),B.spacingMode!=t.SpacingMode.Length&&B.spacingMode!=t.SpacingMode.Fixed||(B.spacing*=a),B.rotateMix=d.readFloat(),B.translateMix=d.readFloat(),u.pathConstraints.push(B)}var X=this.readSkin(d,u,!0,b);null!=X&&(u.defaultSkin=X,u.skins.push(X));C=u.skins.length;for(t.Utils.setArraySize(u.skins,S=C+d.readInt(!0));C<S;C++)u.skins[C]=this.readSkin(d,u,!1,b);S=this.linkedMeshes.length;for(C=0;C<S;C++){var U=this.linkedMeshes[C],z=null==U.skin?u.defaultSkin:u.findSkin(U.skin);if(null==z)throw new Error("Skin not found: "+U.skin);var V=z.getAttachment(U.slotIndex,U.parent);if(null==V)throw new Error("Parent mesh not found: "+U.parent);U.mesh.deformAttachment=U.inheritDeform?V:U.mesh,U.mesh.setParentMesh(V),U.mesh.updateUVs()}this.linkedMeshes.length=0,S=d.readInt(!0);for(C=0;C<S;C++){(B=new t.EventData(d.readStringRef())).intValue=d.readInt(!1),B.floatValue=d.readFloat(),B.stringValue=d.readString(),B.audioPath=d.readString(),null!=B.audioPath&&(B.volume=d.readFloat(),B.balance=d.readFloat()),u.events.push(B)}S=d.readInt(!0);for(C=0;C<S;C++)u.animations.push(this.readAnimation(d,d.readString(),u));return u},SkeletonBinary.prototype.readSkin=function(i,o,a,u){var d=null,b=0;if(a){if(0==(b=i.readInt(!0)))return null;d=new t.Skin("default")}else{(d=new t.Skin(i.readStringRef())).bones.length=i.readInt(!0);for(var S=0,C=d.bones.length;S<C;S++)d.bones[S]=o.bones[i.readInt(!0)];for(S=0,C=i.readInt(!0);S<C;S++)d.constraints.push(o.ikConstraints[i.readInt(!0)]);for(S=0,C=i.readInt(!0);S<C;S++)d.constraints.push(o.transformConstraints[i.readInt(!0)]);for(S=0,C=i.readInt(!0);S<C;S++)d.constraints.push(o.pathConstraints[i.readInt(!0)]);b=i.readInt(!0)}for(S=0;S<b;S++)for(var M=i.readInt(!0),P=0,R=i.readInt(!0);P<R;P++){var O=i.readStringRef(),B=this.readAttachment(i,o,d,M,O,u);null!=B&&d.setAttachment(M,O,B)}return d},SkeletonBinary.prototype.readAttachment=function(i,o,u,d,b,S){var C=this.scale,M=i.readStringRef();null==M&&(M=b);var P=i.readByte();switch(SkeletonBinary.AttachmentTypeValues[P]){case t.AttachmentType.Region:var R=i.readStringRef(),O=i.readFloat(),B=i.readFloat(),N=i.readFloat(),Y=i.readFloat(),G=i.readFloat(),X=i.readFloat(),U=i.readFloat(),z=i.readInt32();null==R&&(R=M);var V=this.attachmentLoader.newRegionAttachment(u,M,R);return null==V?null:(V.path=R,V.x=B*C,V.y=N*C,V.scaleX=Y,V.scaleY=G,V.rotation=O,V.width=X*C,V.height=U*C,t.Color.rgba8888ToColor(V.color,z),V.updateOffset(),V);case t.AttachmentType.BoundingBox:var W=i.readInt(!0),H=this.readVertices(i,W),j=(z=S?i.readInt32():0,this.attachmentLoader.newBoundingBoxAttachment(u,M));return null==j?null:(j.worldVerticesLength=W<<1,j.vertices=H.vertices,j.bones=H.bones,S&&t.Color.rgba8888ToColor(j.color,z),j);case t.AttachmentType.Mesh:R=i.readStringRef(),z=i.readInt32(),W=i.readInt(!0);var q=this.readFloatArray(i,W<<1,1),Z=this.readShortArray(i),K=(H=this.readVertices(i,W),i.readInt(!0)),$=null;X=0,U=0;return S&&($=this.readShortArray(i),X=i.readFloat(),U=i.readFloat()),null==R&&(R=M),null==(tt=this.attachmentLoader.newMeshAttachment(u,M,R))?null:(tt.path=R,t.Color.rgba8888ToColor(tt.color,z),tt.bones=H.bones,tt.vertices=H.vertices,tt.worldVerticesLength=W<<1,tt.triangles=Z,tt.regionUVs=q,tt.updateUVs(),tt.hullLength=K<<1,S&&(tt.edges=$,tt.width=X*C,tt.height=U*C),tt);case t.AttachmentType.LinkedMesh:R=i.readStringRef(),z=i.readInt32();var tt,et=i.readStringRef(),it=i.readStringRef(),nt=i.readBoolean();X=0,U=0;return S&&(X=i.readFloat(),U=i.readFloat()),null==R&&(R=M),null==(tt=this.attachmentLoader.newMeshAttachment(u,M,R))?null:(tt.path=R,t.Color.rgba8888ToColor(tt.color,z),S&&(tt.width=X*C,tt.height=U*C),this.linkedMeshes.push(new a(tt,et,d,it,nt)),tt);case t.AttachmentType.Path:for(var rt=i.readBoolean(),st=i.readBoolean(),ot=(W=i.readInt(!0),H=this.readVertices(i,W),t.Utils.newArray(W/3,0)),at=0,ht=ot.length;at<ht;at++)ot[at]=i.readFloat()*C;z=S?i.readInt32():0;return null==(R=this.attachmentLoader.newPathAttachment(u,M))?null:(R.closed=rt,R.constantSpeed=st,R.worldVerticesLength=W<<1,R.vertices=H.vertices,R.bones=H.bones,R.lengths=ot,S&&t.Color.rgba8888ToColor(R.color,z),R);case t.AttachmentType.Point:O=i.readFloat(),B=i.readFloat(),N=i.readFloat(),z=S?i.readInt32():0;var lt=this.attachmentLoader.newPointAttachment(u,M);return null==lt?null:(lt.x=B*C,lt.y=N*C,lt.rotation=O,S&&t.Color.rgba8888ToColor(lt.color,z),lt);case t.AttachmentType.Clipping:var ut=i.readInt(!0),ct=(W=i.readInt(!0),H=this.readVertices(i,W),z=S?i.readInt32():0,this.attachmentLoader.newClippingAttachment(u,M));return null==ct?null:(ct.endSlot=o.slots[ut],ct.worldVerticesLength=W<<1,ct.vertices=H.vertices,ct.bones=H.bones,S&&t.Color.rgba8888ToColor(ct.color,z),ct)}return null},SkeletonBinary.prototype.readVertices=function(i,o){var a=o<<1,d=new u,b=this.scale;if(!i.readBoolean())return d.vertices=this.readFloatArray(i,a,b),d;for(var S=new Array,C=new Array,M=0;M<o;M++){var P=i.readInt(!0);C.push(P);for(var R=0;R<P;R++)C.push(i.readInt(!0)),S.push(i.readFloat()*b),S.push(i.readFloat()*b),S.push(i.readFloat())}return d.vertices=t.Utils.toFloatArray(S),d.bones=C,d},SkeletonBinary.prototype.readFloatArray=function(t,i,o){var a=new Array(i);if(1==o)for(var u=0;u<i;u++)a[u]=t.readFloat();else for(u=0;u<i;u++)a[u]=t.readFloat()*o;return a},SkeletonBinary.prototype.readShortArray=function(t){for(var i=t.readInt(!0),o=new Array(i),a=0;a<i;a++)o[a]=t.readShort();return o},SkeletonBinary.prototype.readAnimation=function(i,o,a){for(var u=new Array,d=this.scale,b=0,S=new t.Color,C=new t.Color,M=0,P=i.readInt(!0);M<P;M++)for(var R=i.readInt(!0),O=0,B=i.readInt(!0);O<B;O++){var N=i.readByte(),Y=i.readInt(!0);switch(N){case SkeletonBinary.SLOT_ATTACHMENT:(z=new t.AttachmentTimeline(Y)).slotIndex=R;for(var G=0;G<Y;G++)z.setFrame(G,i.readFloat(),i.readStringRef());u.push(z),b=Math.max(b,z.frames[Y-1]);break;case SkeletonBinary.SLOT_COLOR:(z=new t.ColorTimeline(Y)).slotIndex=R;for(G=0;G<Y;G++){var X=i.readFloat();t.Color.rgba8888ToColor(S,i.readInt32()),z.setFrame(G,X,S.r,S.g,S.b,S.a),G<Y-1&&this.readCurve(i,G,z)}u.push(z),b=Math.max(b,z.frames[(Y-1)*t.ColorTimeline.ENTRIES]);break;case SkeletonBinary.SLOT_TWO_COLOR:(z=new t.TwoColorTimeline(Y)).slotIndex=R;for(G=0;G<Y;G++){X=i.readFloat();t.Color.rgba8888ToColor(S,i.readInt32()),t.Color.rgb888ToColor(C,i.readInt32()),z.setFrame(G,X,S.r,S.g,S.b,S.a,C.r,C.g,C.b),G<Y-1&&this.readCurve(i,G,z)}u.push(z),b=Math.max(b,z.frames[(Y-1)*t.TwoColorTimeline.ENTRIES])}}for(M=0,P=i.readInt(!0);M<P;M++){var U=i.readInt(!0);for(O=0,B=i.readInt(!0);O<B;O++){N=i.readByte(),Y=i.readInt(!0);switch(N){case SkeletonBinary.BONE_ROTATE:(z=new t.RotateTimeline(Y)).boneIndex=U;for(G=0;G<Y;G++)z.setFrame(G,i.readFloat(),i.readFloat()),G<Y-1&&this.readCurve(i,G,z);u.push(z),b=Math.max(b,z.frames[(Y-1)*t.RotateTimeline.ENTRIES]);break;case SkeletonBinary.BONE_TRANSLATE:case SkeletonBinary.BONE_SCALE:case SkeletonBinary.BONE_SHEAR:var z=void 0,V=1;N==SkeletonBinary.BONE_SCALE?z=new t.ScaleTimeline(Y):N==SkeletonBinary.BONE_SHEAR?z=new t.ShearTimeline(Y):(z=new t.TranslateTimeline(Y),V=d),z.boneIndex=U;for(G=0;G<Y;G++)z.setFrame(G,i.readFloat(),i.readFloat()*V,i.readFloat()*V),G<Y-1&&this.readCurve(i,G,z);u.push(z),b=Math.max(b,z.frames[(Y-1)*t.TranslateTimeline.ENTRIES])}}}for(M=0,P=i.readInt(!0);M<P;M++){var W=i.readInt(!0);Y=i.readInt(!0);(z=new t.IkConstraintTimeline(Y)).ikConstraintIndex=W;for(G=0;G<Y;G++)z.setFrame(G,i.readFloat(),i.readFloat(),i.readFloat()*d,i.readByte(),i.readBoolean(),i.readBoolean()),G<Y-1&&this.readCurve(i,G,z);u.push(z),b=Math.max(b,z.frames[(Y-1)*t.IkConstraintTimeline.ENTRIES])}for(M=0,P=i.readInt(!0);M<P;M++){W=i.readInt(!0),Y=i.readInt(!0);(z=new t.TransformConstraintTimeline(Y)).transformConstraintIndex=W;for(G=0;G<Y;G++)z.setFrame(G,i.readFloat(),i.readFloat(),i.readFloat(),i.readFloat(),i.readFloat()),G<Y-1&&this.readCurve(i,G,z);u.push(z),b=Math.max(b,z.frames[(Y-1)*t.TransformConstraintTimeline.ENTRIES])}for(M=0,P=i.readInt(!0);M<P;M++){W=i.readInt(!0);var H=a.pathConstraints[W];for(O=0,B=i.readInt(!0);O<B;O++){N=i.readByte(),Y=i.readInt(!0);switch(N){case SkeletonBinary.PATH_POSITION:case SkeletonBinary.PATH_SPACING:z=void 0,V=1;N==SkeletonBinary.PATH_SPACING?(z=new t.PathConstraintSpacingTimeline(Y),H.spacingMode!=t.SpacingMode.Length&&H.spacingMode!=t.SpacingMode.Fixed||(V=d)):(z=new t.PathConstraintPositionTimeline(Y),H.positionMode==t.PositionMode.Fixed&&(V=d)),z.pathConstraintIndex=W;for(G=0;G<Y;G++)z.setFrame(G,i.readFloat(),i.readFloat()*V),G<Y-1&&this.readCurve(i,G,z);u.push(z),b=Math.max(b,z.frames[(Y-1)*t.PathConstraintPositionTimeline.ENTRIES]);break;case SkeletonBinary.PATH_MIX:(z=new t.PathConstraintMixTimeline(Y)).pathConstraintIndex=W;for(G=0;G<Y;G++)z.setFrame(G,i.readFloat(),i.readFloat(),i.readFloat()),G<Y-1&&this.readCurve(i,G,z);u.push(z),b=Math.max(b,z.frames[(Y-1)*t.PathConstraintMixTimeline.ENTRIES])}}}for(M=0,P=i.readInt(!0);M<P;M++){var j=a.skins[i.readInt(!0)];for(O=0,B=i.readInt(!0);O<B;O++){R=i.readInt(!0);for(var q=0,Z=i.readInt(!0);q<Z;q++){var K=j.getAttachment(R,i.readStringRef()),$=null!=K.bones,tt=K.vertices,et=$?tt.length/3*2:tt.length;Y=i.readInt(!0);(z=new t.DeformTimeline(Y)).slotIndex=R,z.attachment=K;for(G=0;G<Y;G++){X=i.readFloat();var it=void 0,nt=i.readInt(!0);if(0==nt)it=$?t.Utils.newFloatArray(et):tt;else{it=t.Utils.newFloatArray(et);var rt=i.readInt(!0);if(nt+=rt,1==d)for(var st=rt;st<nt;st++)it[st]=i.readFloat();else for(st=rt;st<nt;st++)it[st]=i.readFloat()*d;if(!$){st=0;for(var ot=it.length;st<ot;st++)it[st]+=tt[st]}}z.setFrame(G,X,it),G<Y-1&&this.readCurve(i,G,z)}u.push(z),b=Math.max(b,z.frames[Y-1])}}}var at=i.readInt(!0);if(at>0){z=new t.DrawOrderTimeline(at);var ht=a.slots.length;for(M=0;M<at;M++){X=i.readFloat();var lt=i.readInt(!0),ut=t.Utils.newArray(ht,0);for(O=ht-1;O>=0;O--)ut[O]=-1;var ct=t.Utils.newArray(ht-lt,0),dt=0,ft=0;for(O=0;O<lt;O++){for(R=i.readInt(!0);dt!=R;)ct[ft++]=dt++;ut[dt+i.readInt(!0)]=dt++}for(;dt<ht;)ct[ft++]=dt++;for(O=ht-1;O>=0;O--)-1==ut[O]&&(ut[O]=ct[--ft]);z.setFrame(M,X,ut)}u.push(z),b=Math.max(b,z.frames[at-1])}var pt=i.readInt(!0);if(pt>0){for(z=new t.EventTimeline(pt),M=0;M<pt;M++){X=i.readFloat();var gt=a.events[i.readInt(!0)],vt=new t.Event(X,gt);vt.intValue=i.readInt(!1),vt.floatValue=i.readFloat(),vt.stringValue=i.readBoolean()?i.readString():gt.stringValue,null!=vt.data.audioPath&&(vt.volume=i.readFloat(),vt.balance=i.readFloat()),z.setFrame(M,vt)}u.push(z),b=Math.max(b,z.frames[pt-1])}return new t.Animation(o,u,b)},SkeletonBinary.prototype.readCurve=function(t,i,o){switch(t.readByte()){case SkeletonBinary.CURVE_STEPPED:o.setStepped(i);break;case SkeletonBinary.CURVE_BEZIER:this.setCurve(o,i,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat())}},SkeletonBinary.prototype.setCurve=function(t,i,o,a,u,d){t.setCurve(i,o,a,u,d)},SkeletonBinary.AttachmentTypeValues=[0,1,2,3,4,5,6],SkeletonBinary.TransformModeValues=[t.TransformMode.Normal,t.TransformMode.OnlyTranslation,t.TransformMode.NoRotationOrReflection,t.TransformMode.NoScale,t.TransformMode.NoScaleOrReflection],SkeletonBinary.PositionModeValues=[t.PositionMode.Fixed,t.PositionMode.Percent],SkeletonBinary.SpacingModeValues=[t.SpacingMode.Length,t.SpacingMode.Fixed,t.SpacingMode.Percent],SkeletonBinary.RotateModeValues=[t.RotateMode.Tangent,t.RotateMode.Chain,t.RotateMode.ChainScale],SkeletonBinary.BlendModeValues=[t.BlendMode.Normal,t.BlendMode.Additive,t.BlendMode.Multiply,t.BlendMode.Screen],SkeletonBinary.BONE_ROTATE=0,SkeletonBinary.BONE_TRANSLATE=1,SkeletonBinary.BONE_SCALE=2,SkeletonBinary.BONE_SHEAR=3,SkeletonBinary.SLOT_ATTACHMENT=0,SkeletonBinary.SLOT_COLOR=1,SkeletonBinary.SLOT_TWO_COLOR=2,SkeletonBinary.PATH_POSITION=0,SkeletonBinary.PATH_SPACING=1,SkeletonBinary.PATH_MIX=2,SkeletonBinary.CURVE_LINEAR=0,SkeletonBinary.CURVE_STEPPED=1,SkeletonBinary.CURVE_BEZIER=2,SkeletonBinary}();t.SkeletonBinary=i;var o=function(){function BinaryInput(t,i,o,a){void 0===i&&(i=new Array),void 0===o&&(o=0),void 0===a&&(a=new DataView(t.buffer)),this.strings=i,this.index=o,this.buffer=a}return BinaryInput.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},BinaryInput.prototype.readShort=function(){var t=this.buffer.getInt16(this.index);return this.index+=2,t},BinaryInput.prototype.readInt32=function(){var t=this.buffer.getInt32(this.index);return this.index+=4,t},BinaryInput.prototype.readInt=function(t){var i=this.readByte(),o=127&i;return 0!=(128&i)&&(o|=(127&(i=this.readByte()))<<7,0!=(128&i)&&(o|=(127&(i=this.readByte()))<<14,0!=(128&i)&&(o|=(127&(i=this.readByte()))<<21,0!=(128&i)&&(o|=(127&(i=this.readByte()))<<28)))),t?o:o>>>1^-(1&o)},BinaryInput.prototype.readStringRef=function(){var t=this.readInt(!0);return 0==t?null:this.strings[t-1]},BinaryInput.prototype.readString=function(){var t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;for(var i="",o=0;o<t;){var a=this.readByte();switch(a>>4){case 12:case 13:i+=String.fromCharCode((31&a)<<6|63&this.readByte()),o+=2;break;case 14:i+=String.fromCharCode((15&a)<<12|(63&this.readByte())<<6|63&this.readByte()),o+=3;break;default:i+=String.fromCharCode(a),o++}}return i},BinaryInput.prototype.readFloat=function(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t},BinaryInput.prototype.readBoolean=function(){return 0!=this.readByte()},BinaryInput}(),a=function a(t,i,o,u,d){this.mesh=t,this.skin=i,this.slotIndex=o,this.parent=u,this.inheritDeform=d},u=function u(t,i){void 0===t&&(t=null),void 0===i&&(i=null),this.bones=t,this.vertices=i}}(a||(a={})),function(t){var i=function(){function SkeletonBounds(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new t.Pool((function(){return t.Utils.newFloatArray(16)}))}return SkeletonBounds.prototype.update=function(i,o){if(null==i)throw new Error("skeleton cannot be null.");var a=this.boundingBoxes,u=this.polygons,d=this.polygonPool,b=i.slots,S=b.length;a.length=0,d.freeAll(u),u.length=0;for(var C=0;C<S;C++){var M=b[C];if(M.bone.active){var P=M.getAttachment();if(P instanceof t.BoundingBoxAttachment){var R=P;a.push(R);var O=d.obtain();O.length!=R.worldVerticesLength&&(O=t.Utils.newFloatArray(R.worldVerticesLength)),u.push(O),R.computeWorldVertices(M,0,R.worldVerticesLength,O,0,2)}}}o?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},SkeletonBounds.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,u=this.polygons,d=0,b=u.length;d<b;d++)for(var S=u[d],C=S,M=0,P=S.length;M<P;M+=2){var R=C[M],O=C[M+1];t=Math.min(t,R),i=Math.min(i,O),o=Math.max(o,R),a=Math.max(a,O)}this.minX=t,this.minY=i,this.maxX=o,this.maxY=a},SkeletonBounds.prototype.aabbContainsPoint=function(t,i){return t>=this.minX&&t<=this.maxX&&i>=this.minY&&i<=this.maxY},SkeletonBounds.prototype.aabbIntersectsSegment=function(t,i,o,a){var u=this.minX,d=this.minY,b=this.maxX,S=this.maxY;if(t<=u&&o<=u||i<=d&&a<=d||t>=b&&o>=b||i>=S&&a>=S)return!1;var C=(a-i)/(o-t),M=C*(u-t)+i;if(M>d&&M<S)return!0;if((M=C*(b-t)+i)>d&&M<S)return!0;var P=(d-i)/C+t;return P>u&&P<b||(P=(S-i)/C+t)>u&&P<b},SkeletonBounds.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},SkeletonBounds.prototype.containsPoint=function(t,i){for(var o=this.polygons,a=0,u=o.length;a<u;a++)if(this.containsPointPolygon(o[a],t,i))return this.boundingBoxes[a];return null},SkeletonBounds.prototype.containsPointPolygon=function(t,i,o){for(var a=t,u=t.length,d=u-2,b=!1,S=0;S<u;S+=2){var C=a[S+1],M=a[d+1];if(C<o&&M>=o||M<o&&C>=o){var P=a[S];P+(o-C)/(M-C)*(a[d]-P)<i&&(b=!b)}d=S}return b},SkeletonBounds.prototype.intersectsSegment=function(t,i,o,a){for(var u=this.polygons,d=0,b=u.length;d<b;d++)if(this.intersectsSegmentPolygon(u[d],t,i,o,a))return this.boundingBoxes[d];return null},SkeletonBounds.prototype.intersectsSegmentPolygon=function(t,i,o,a,u){for(var d=t,b=t.length,S=i-a,C=o-u,M=i*u-o*a,P=d[b-2],R=d[b-1],O=0;O<b;O+=2){var B=d[O],N=d[O+1],Y=P*N-R*B,G=P-B,X=R-N,U=S*X-C*G,z=(M*G-S*Y)/U;if((z>=P&&z<=B||z>=B&&z<=P)&&(z>=i&&z<=a||z>=a&&z<=i)){var V=(M*X-C*Y)/U;if((V>=R&&V<=N||V>=N&&V<=R)&&(V>=o&&V<=u||V>=u&&V<=o))return!0}P=B,R=N}return!1},SkeletonBounds.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");var i=this.boundingBoxes.indexOf(t);return-1==i?null:this.polygons[i]},SkeletonBounds.prototype.getWidth=function(){return this.maxX-this.minX},SkeletonBounds.prototype.getHeight=function(){return this.maxY-this.minY},SkeletonBounds}();t.SkeletonBounds=i}(a||(a={})),function(t){var i=function(){function SkeletonClipping(){this.triangulator=new t.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}return SkeletonClipping.prototype.clipStart=function(i,o){if(null!=this.clipAttachment)return 0;this.clipAttachment=o;var a=o.worldVerticesLength,u=t.Utils.setArraySize(this.clippingPolygon,a);o.computeWorldVertices(i,0,a,u,0,2);var d=this.clippingPolygon;SkeletonClipping.makeClockwise(d);for(var b=this.clippingPolygons=this.triangulator.decompose(d,this.triangulator.triangulate(d)),S=0,C=b.length;S<C;S++){var M=b[S];SkeletonClipping.makeClockwise(M),M.push(M[0]),M.push(M[1])}return b.length},SkeletonClipping.prototype.clipEndWithSlot=function(t){null!=this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()},SkeletonClipping.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},SkeletonClipping.prototype.isClipping=function(){return null!=this.clipAttachment},SkeletonClipping.prototype.clipTriangles=function(i,o,a,u,d,b,S,C){var M=this.clipOutput,P=this.clippedVertices,R=this.clippedTriangles,O=this.clippingPolygons,B=this.clippingPolygons.length,N=C?12:8,Y=0;P.length=0,R.length=0;t:for(var G=0;G<u;G+=3)for(var X=a[G]<<1,U=i[X],z=i[X+1],V=d[X],W=d[X+1],H=i[X=a[G+1]<<1],j=i[X+1],q=d[X],Z=d[X+1],K=i[X=a[G+2]<<1],$=i[X+1],tt=d[X],et=d[X+1],it=0;it<B;it++){var nt=P.length;if(!this.clip(U,z,H,j,K,$,O[it],M)){(dt=t.Utils.setArraySize(P,nt+3*N))[nt]=U,dt[nt+1]=z,dt[nt+2]=b.r,dt[nt+3]=b.g,dt[nt+4]=b.b,dt[nt+5]=b.a,C?(dt[nt+6]=V,dt[nt+7]=W,dt[nt+8]=S.r,dt[nt+9]=S.g,dt[nt+10]=S.b,dt[nt+11]=S.a,dt[nt+12]=H,dt[nt+13]=j,dt[nt+14]=b.r,dt[nt+15]=b.g,dt[nt+16]=b.b,dt[nt+17]=b.a,dt[nt+18]=q,dt[nt+19]=Z,dt[nt+20]=S.r,dt[nt+21]=S.g,dt[nt+22]=S.b,dt[nt+23]=S.a,dt[nt+24]=K,dt[nt+25]=$,dt[nt+26]=b.r,dt[nt+27]=b.g,dt[nt+28]=b.b,dt[nt+29]=b.a,dt[nt+30]=tt,dt[nt+31]=et,dt[nt+32]=S.r,dt[nt+33]=S.g,dt[nt+34]=S.b,dt[nt+35]=S.a):(dt[nt+6]=V,dt[nt+7]=W,dt[nt+8]=H,dt[nt+9]=j,dt[nt+10]=b.r,dt[nt+11]=b.g,dt[nt+12]=b.b,dt[nt+13]=b.a,dt[nt+14]=q,dt[nt+15]=Z,dt[nt+16]=K,dt[nt+17]=$,dt[nt+18]=b.r,dt[nt+19]=b.g,dt[nt+20]=b.b,dt[nt+21]=b.a,dt[nt+22]=tt,dt[nt+23]=et),nt=R.length,(bt=t.Utils.setArraySize(R,nt+3))[nt]=Y,bt[nt+1]=Y+1,bt[nt+2]=Y+2,Y+=3;continue t}var rt=M.length;if(0!=rt){for(var st=j-$,ot=K-H,at=U-K,ht=$-z,lt=1/(st*at+ot*(z-$)),ut=rt>>1,ct=this.clipOutput,dt=t.Utils.setArraySize(P,nt+ut*N),ft=0;ft<rt;ft+=2){var pt=ct[ft],gt=ct[ft+1];dt[nt]=pt,dt[nt+1]=gt,dt[nt+2]=b.r,dt[nt+3]=b.g,dt[nt+4]=b.b,dt[nt+5]=b.a;var vt=pt-K,mt=gt-$,yt=(st*vt+ot*mt)*lt,xt=(ht*vt+at*mt)*lt,Tt=1-yt-xt;dt[nt+6]=V*yt+q*xt+tt*Tt,dt[nt+7]=W*yt+Z*xt+et*Tt,C&&(dt[nt+8]=S.r,dt[nt+9]=S.g,dt[nt+10]=S.b,dt[nt+11]=S.a),nt+=N}nt=R.length;var bt=t.Utils.setArraySize(R,nt+3*(ut-2));ut--;for(ft=1;ft<ut;ft++)bt[nt]=Y,bt[nt+1]=Y+ft,bt[nt+2]=Y+ft+1,nt+=3;Y+=ut+1}}},SkeletonClipping.prototype.clip=function(t,i,o,a,u,d,b,S){var C=S,M=!1,P=null;b.length%4>=2?(P=S,S=this.scratch):P=this.scratch,P.length=0,P.push(t),P.push(i),P.push(o),P.push(a),P.push(u),P.push(d),P.push(t),P.push(i),S.length=0;for(var R=b,O=b.length-4,B=0;;B+=2){for(var N=R[B],Y=R[B+1],G=R[B+2],X=R[B+3],U=N-G,z=Y-X,V=P,W=P.length-2,H=S.length,j=0;j<W;j+=2){var q=V[j],Z=V[j+1],K=V[j+2],$=V[j+3],tt=U*($-X)-z*(K-G)>0;if(U*(Z-X)-z*(q-G)>0){if(tt){S.push(K),S.push($);continue}var et=(nt=$-Z)*(G-N)-(rt=K-q)*(X-Y);if(Math.abs(et)>1e-6){var it=(rt*(Y-Z)-nt*(N-q))/et;S.push(N+(G-N)*it),S.push(Y+(X-Y)*it)}else S.push(N),S.push(Y)}else if(tt){var nt,rt;et=(nt=$-Z)*(G-N)-(rt=K-q)*(X-Y);if(Math.abs(et)>1e-6){it=(rt*(Y-Z)-nt*(N-q))/et;S.push(N+(G-N)*it),S.push(Y+(X-Y)*it)}else S.push(N),S.push(Y);S.push(K),S.push($)}M=!0}if(H==S.length)return C.length=0,!0;if(S.push(S[0]),S.push(S[1]),B==O)break;var st=S;(S=P).length=0,P=st}if(C!=S){C.length=0;B=0;for(var ot=S.length-2;B<ot;B++)C[B]=S[B]}else C.length=C.length-2;return M},SkeletonClipping.makeClockwise=function(t){for(var i=t,o=t.length,a=i[o-2]*i[1]-i[0]*i[o-1],u=0,d=0,b=0,S=0,C=o-3;S<C;S+=2)u=i[S],d=i[S+1],b=i[S+2],a+=u*i[S+3]-b*d;if(!(a<0)){S=0;var M=o-2;for(C=o>>1;S<C;S+=2){var P=i[S],R=i[S+1],O=M-S;i[S]=i[O],i[S+1]=i[O+1],i[O]=P,i[O+1]=R}}},SkeletonClipping}();t.SkeletonClipping=i}(a||(a={})),function(t){var i=function(){function SkeletonData(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return SkeletonData.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var i=this.bones,o=0,a=i.length;o<a;o++){var u=i[o];if(u.name==t)return u}return null},SkeletonData.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var i=this.bones,o=0,a=i.length;o<a;o++)if(i[o].name==t)return o;return-1},SkeletonData.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var i=this.slots,o=0,a=i.length;o<a;o++){var u=i[o];if(u.name==t)return u}return null},SkeletonData.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var i=this.slots,o=0,a=i.length;o<a;o++)if(i[o].name==t)return o;return-1},SkeletonData.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var i=this.skins,o=0,a=i.length;o<a;o++){var u=i[o];if(u.name==t)return u}return null},SkeletonData.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var i=this.events,o=0,a=i.length;o<a;o++){var u=i[o];if(u.name==t)return u}return null},SkeletonData.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var i=this.animations,o=0,a=i.length;o<a;o++){var u=i[o];if(u.name==t)return u}return null},SkeletonData.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var i=this.ikConstraints,o=0,a=i.length;o<a;o++){var u=i[o];if(u.name==t)return u}return null},SkeletonData.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var i=this.transformConstraints,o=0,a=i.length;o<a;o++){var u=i[o];if(u.name==t)return u}return null},SkeletonData.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var i=this.pathConstraints,o=0,a=i.length;o<a;o++){var u=i[o];if(u.name==t)return u}return null},SkeletonData.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var i=this.pathConstraints,o=0,a=i.length;o<a;o++)if(i[o].name==t)return o;return-1},SkeletonData}();t.SkeletonData=i}(a||(a={})),function(t){var i=function(){function SkeletonJson(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return SkeletonJson.prototype.readSkeletonData=function(i){var o=this.scale,a=new t.SkeletonData,u="string"==typeof i?JSON.parse(i):i,d=u.skeleton;if(null!=d){if(a.hash=d.hash,a.version=d.spine,"3.8.75"==a.version)throw new Error("Unsupported skeleton data, please export with a newer version of Spine.");a.x=d.x,a.y=d.y,a.width=d.width,a.height=d.height,a.fps=d.fps,a.imagesPath=d.images}if(u.bones)for(var b=0;b<u.bones.length;b++){var S=u.bones[b],C=null,M=this.getValue(S,"parent",null);if(null!=M&&null==(C=a.findBone(M)))throw new Error("Parent bone not found: "+M);(B=new t.BoneData(a.bones.length,S.name,C)).length=this.getValue(S,"length",0)*o,B.x=this.getValue(S,"x",0)*o,B.y=this.getValue(S,"y",0)*o,B.rotation=this.getValue(S,"rotation",0),B.scaleX=this.getValue(S,"scaleX",1),B.scaleY=this.getValue(S,"scaleY",1),B.shearX=this.getValue(S,"shearX",0),B.shearY=this.getValue(S,"shearY",0),B.transformMode=SkeletonJson.transformModeFromString(this.getValue(S,"transform","normal")),B.skinRequired=this.getValue(S,"skin",!1),a.bones.push(B)}if(u.slots)for(b=0;b<u.slots.length;b++){var P=(Z=u.slots[b]).name,R=Z.bone,O=a.findBone(R);if(null==O)throw new Error("Slot bone not found: "+R);var B=new t.SlotData(a.slots.length,P,O),N=this.getValue(Z,"color",null);null!=N&&B.color.setFromString(N);var Y=this.getValue(Z,"dark",null);null!=Y&&(B.darkColor=new t.Color(1,1,1,1),B.darkColor.setFromString(Y)),B.attachmentName=this.getValue(Z,"attachment",null),B.blendMode=SkeletonJson.blendModeFromString(this.getValue(Z,"blend","normal")),a.slots.push(B)}if(u.ik)for(b=0;b<u.ik.length;b++){var G=u.ik[b];(B=new t.IkConstraintData(G.name)).order=this.getValue(G,"order",0),B.skinRequired=this.getValue(G,"skin",!1);for(var X=0;X<G.bones.length;X++){R=G.bones[X];if(null==(H=a.findBone(R)))throw new Error("IK bone not found: "+R);B.bones.push(H)}var U=G.target;if(B.target=a.findBone(U),null==B.target)throw new Error("IK target bone not found: "+U);B.mix=this.getValue(G,"mix",1),B.softness=this.getValue(G,"softness",0)*o,B.bendDirection=this.getValue(G,"bendPositive",!0)?1:-1,B.compress=this.getValue(G,"compress",!1),B.stretch=this.getValue(G,"stretch",!1),B.uniform=this.getValue(G,"uniform",!1),a.ikConstraints.push(B)}if(u.transform)for(b=0;b<u.transform.length;b++){G=u.transform[b];(B=new t.TransformConstraintData(G.name)).order=this.getValue(G,"order",0),B.skinRequired=this.getValue(G,"skin",!1);for(X=0;X<G.bones.length;X++){R=G.bones[X];if(null==(H=a.findBone(R)))throw new Error("Transform constraint bone not found: "+R);B.bones.push(H)}U=G.target;if(B.target=a.findBone(U),null==B.target)throw new Error("Transform constraint target bone not found: "+U);B.local=this.getValue(G,"local",!1),B.relative=this.getValue(G,"relative",!1),B.offsetRotation=this.getValue(G,"rotation",0),B.offsetX=this.getValue(G,"x",0)*o,B.offsetY=this.getValue(G,"y",0)*o,B.offsetScaleX=this.getValue(G,"scaleX",0),B.offsetScaleY=this.getValue(G,"scaleY",0),B.offsetShearY=this.getValue(G,"shearY",0),B.rotateMix=this.getValue(G,"rotateMix",1),B.translateMix=this.getValue(G,"translateMix",1),B.scaleMix=this.getValue(G,"scaleMix",1),B.shearMix=this.getValue(G,"shearMix",1),a.transformConstraints.push(B)}if(u.path)for(b=0;b<u.path.length;b++){G=u.path[b];(B=new t.PathConstraintData(G.name)).order=this.getValue(G,"order",0),B.skinRequired=this.getValue(G,"skin",!1);for(X=0;X<G.bones.length;X++){R=G.bones[X];if(null==(H=a.findBone(R)))throw new Error("Transform constraint bone not found: "+R);B.bones.push(H)}U=G.target;if(B.target=a.findSlot(U),null==B.target)throw new Error("Path target slot not found: "+U);B.positionMode=SkeletonJson.positionModeFromString(this.getValue(G,"positionMode","percent")),B.spacingMode=SkeletonJson.spacingModeFromString(this.getValue(G,"spacingMode","length")),B.rotateMode=SkeletonJson.rotateModeFromString(this.getValue(G,"rotateMode","tangent")),B.offsetRotation=this.getValue(G,"rotation",0),B.position=this.getValue(G,"position",0),B.positionMode==t.PositionMode.Fixed&&(B.position*=o),B.spacing=this.getValue(G,"spacing",0),B.spacingMode!=t.SpacingMode.Length&&B.spacingMode!=t.SpacingMode.Fixed||(B.spacing*=o),B.rotateMix=this.getValue(G,"rotateMix",1),B.translateMix=this.getValue(G,"translateMix",1),a.pathConstraints.push(B)}if(u.skins)for(b=0;b<u.skins.length;b++){var z=u.skins[b],V=new t.Skin(z.name);if(z.bones)for(var W=0;W<z.bones.length;W++){var H;if(null==(H=a.findBone(z.bones[W])))throw new Error("Skin bone not found: "+z.bones[b]);V.bones.push(H)}if(z.ik)for(W=0;W<z.ik.length;W++){if(null==(j=a.findIkConstraint(z.ik[W])))throw new Error("Skin IK constraint not found: "+z.ik[b]);V.constraints.push(j)}if(z.transform)for(W=0;W<z.transform.length;W++){if(null==(j=a.findTransformConstraint(z.transform[W])))throw new Error("Skin transform constraint not found: "+z.transform[b]);V.constraints.push(j)}if(z.path)for(W=0;W<z.path.length;W++){var j;if(null==(j=a.findPathConstraint(z.path[W])))throw new Error("Skin path constraint not found: "+z.path[b]);V.constraints.push(j)}for(var P in z.attachments){var q=a.findSlot(P);if(null==q)throw new Error("Slot not found: "+P);var Z=z.attachments[P];for(var K in Z){var $=this.readAttachment(Z[K],V,q.index,K,a);null!=$&&V.setAttachment(q.index,K,$)}}a.skins.push(V),"default"==V.name&&(a.defaultSkin=V)}b=0;for(var tt=this.linkedMeshes.length;b<tt;b++){var et=this.linkedMeshes[b];if(null==(V=null==et.skin?a.defaultSkin:a.findSkin(et.skin)))throw new Error("Skin not found: "+et.skin);var it=V.getAttachment(et.slotIndex,et.parent);if(null==it)throw new Error("Parent mesh not found: "+et.parent);et.mesh.deformAttachment=et.inheritDeform?it:et.mesh,et.mesh.setParentMesh(it),et.mesh.updateUVs()}if(this.linkedMeshes.length=0,u.events)for(var nt in u.events){var rt=u.events[nt];(B=new t.EventData(nt)).intValue=this.getValue(rt,"int",0),B.floatValue=this.getValue(rt,"float",0),B.stringValue=this.getValue(rt,"string",""),B.audioPath=this.getValue(rt,"audio",null),null!=B.audioPath&&(B.volume=this.getValue(rt,"volume",1),B.balance=this.getValue(rt,"balance",0)),a.events.push(B)}if(u.animations)for(var st in u.animations){var ot=u.animations[st];this.readAnimation(ot,st,a)}return a},SkeletonJson.prototype.readAttachment=function(i,a,u,d,b){var S=this.scale;switch(d=this.getValue(i,"name",d),this.getValue(i,"type","region")){case"region":var C=this.getValue(i,"path",d),M=this.attachmentLoader.newRegionAttachment(a,d,C);return null==M?null:(M.path=C,M.x=this.getValue(i,"x",0)*S,M.y=this.getValue(i,"y",0)*S,M.scaleX=this.getValue(i,"scaleX",1),M.scaleY=this.getValue(i,"scaleY",1),M.rotation=this.getValue(i,"rotation",0),M.width=i.width*S,M.height=i.height*S,null!=(W=this.getValue(i,"color",null))&&M.color.setFromString(W),M.updateOffset(),M);case"boundingbox":var P=this.attachmentLoader.newBoundingBoxAttachment(a,d);return null==P?null:(this.readVertices(i,P,i.vertexCount<<1),null!=(W=this.getValue(i,"color",null))&&P.color.setFromString(W),P);case"mesh":case"linkedmesh":C=this.getValue(i,"path",d);var R=this.attachmentLoader.newMeshAttachment(a,d,C);if(null==R)return null;R.path=C,null!=(W=this.getValue(i,"color",null))&&R.color.setFromString(W),R.width=this.getValue(i,"width",0)*S,R.height=this.getValue(i,"height",0)*S;var O=this.getValue(i,"parent",null);if(null!=O)return this.linkedMeshes.push(new o(R,this.getValue(i,"skin",null),u,O,this.getValue(i,"deform",!0))),R;var B=i.uvs;return this.readVertices(i,R,B.length),R.triangles=i.triangles,R.regionUVs=B,R.updateUVs(),R.edges=this.getValue(i,"edges",null),R.hullLength=2*this.getValue(i,"hull",0),R;case"path":if(null==(C=this.attachmentLoader.newPathAttachment(a,d)))return null;C.closed=this.getValue(i,"closed",!1),C.constantSpeed=this.getValue(i,"constantSpeed",!0);var N=i.vertexCount;this.readVertices(i,C,N<<1);for(var Y=t.Utils.newArray(N/3,0),G=0;G<i.lengths.length;G++)Y[G]=i.lengths[G]*S;return C.lengths=Y,null!=(W=this.getValue(i,"color",null))&&C.color.setFromString(W),C;case"point":var X=this.attachmentLoader.newPointAttachment(a,d);return null==X?null:(X.x=this.getValue(i,"x",0)*S,X.y=this.getValue(i,"y",0)*S,X.rotation=this.getValue(i,"rotation",0),null!=(W=this.getValue(i,"color",null))&&X.color.setFromString(W),X);case"clipping":var U=this.attachmentLoader.newClippingAttachment(a,d);if(null==U)return null;var z=this.getValue(i,"end",null);if(null!=z){var V=b.findSlot(z);if(null==V)throw new Error("Clipping end slot not found: "+z);U.endSlot=V}var W;N=i.vertexCount;return this.readVertices(i,U,N<<1),null!=(W=this.getValue(i,"color",null))&&U.color.setFromString(W),U}return null},SkeletonJson.prototype.readVertices=function(i,o,a){var u=this.scale;o.worldVerticesLength=a;var d=i.vertices;if(a!=d.length){var b=new Array,S=new Array;for(R=0,O=d.length;R<O;){var C=d[R++];S.push(C);for(var M=R+4*C;R<M;R+=4)S.push(d[R]),b.push(d[R+1]*u),b.push(d[R+2]*u),b.push(d[R+3])}o.bones=S,o.vertices=t.Utils.toFloatArray(b)}else{var P=t.Utils.toFloatArray(d);if(1!=u)for(var R=0,O=d.length;R<O;R++)P[R]*=u;o.vertices=P}},SkeletonJson.prototype.readAnimation=function(i,o,a){var u=this.scale,d=new Array,b=0;if(i.slots)for(var S in i.slots){var C=i.slots[S];if(-1==(wt=a.findSlotIndex(S)))throw new Error("Slot not found: "+S);for(var M in C){var P=C[M];if("attachment"==M){(V=new t.AttachmentTimeline(P.length)).slotIndex=wt;for(var R=0,O=0;O<P.length;O++){var B=P[O];V.setFrame(R++,this.getValue(B,"time",0),B.name)}d.push(V),b=Math.max(b,V.frames[V.getFrameCount()-1])}else if("color"==M){(V=new t.ColorTimeline(P.length)).slotIndex=wt;for(R=0,O=0;O<P.length;O++){B=P[O];var N=new t.Color;N.setFromString(B.color),V.setFrame(R,this.getValue(B,"time",0),N.r,N.g,N.b,N.a),this.readCurve(B,V,R),R++}d.push(V),b=Math.max(b,V.frames[(V.getFrameCount()-1)*t.ColorTimeline.ENTRIES])}else{if("twoColor"!=M)throw new Error("Invalid timeline type for a slot: "+M+" ("+S+")");(V=new t.TwoColorTimeline(P.length)).slotIndex=wt;for(R=0,O=0;O<P.length;O++){B=P[O];var Y=new t.Color,G=new t.Color;Y.setFromString(B.light),G.setFromString(B.dark),V.setFrame(R,this.getValue(B,"time",0),Y.r,Y.g,Y.b,Y.a,G.r,G.g,G.b),this.readCurve(B,V,R),R++}d.push(V),b=Math.max(b,V.frames[(V.getFrameCount()-1)*t.TwoColorTimeline.ENTRIES])}}}if(i.bones)for(var X in i.bones){var U=i.bones[X],z=a.findBoneIndex(X);if(-1==z)throw new Error("Bone not found: "+X);for(var M in U){P=U[M];if("rotate"===M){(V=new t.RotateTimeline(P.length)).boneIndex=z;for(R=0,O=0;O<P.length;O++){B=P[O];V.setFrame(R,this.getValue(B,"time",0),this.getValue(B,"angle",0)),this.readCurve(B,V,R),R++}d.push(V),b=Math.max(b,V.frames[(V.getFrameCount()-1)*t.RotateTimeline.ENTRIES])}else{if("translate"!==M&&"scale"!==M&&"shear"!==M)throw new Error("Invalid timeline type for a bone: "+M+" ("+X+")");var V=null,W=1,H=0;"scale"===M?(V=new t.ScaleTimeline(P.length),H=1):"shear"===M?V=new t.ShearTimeline(P.length):(V=new t.TranslateTimeline(P.length),W=u),V.boneIndex=z;for(R=0,O=0;O<P.length;O++){B=P[O];var j=this.getValue(B,"x",H),q=this.getValue(B,"y",H);V.setFrame(R,this.getValue(B,"time",0),j*W,q*W),this.readCurve(B,V,R),R++}d.push(V),b=Math.max(b,V.frames[(V.getFrameCount()-1)*t.TranslateTimeline.ENTRIES])}}}if(i.ik)for(var Z in i.ik){var K=i.ik[Z],$=a.findIkConstraint(Z);(V=new t.IkConstraintTimeline(K.length)).ikConstraintIndex=a.ikConstraints.indexOf($);for(R=0,O=0;O<K.length;O++){B=K[O];V.setFrame(R,this.getValue(B,"time",0),this.getValue(B,"mix",1),this.getValue(B,"softness",0)*u,this.getValue(B,"bendPositive",!0)?1:-1,this.getValue(B,"compress",!1),this.getValue(B,"stretch",!1)),this.readCurve(B,V,R),R++}d.push(V),b=Math.max(b,V.frames[(V.getFrameCount()-1)*t.IkConstraintTimeline.ENTRIES])}if(i.transform)for(var Z in i.transform){K=i.transform[Z],$=a.findTransformConstraint(Z);(V=new t.TransformConstraintTimeline(K.length)).transformConstraintIndex=a.transformConstraints.indexOf($);for(R=0,O=0;O<K.length;O++){B=K[O];V.setFrame(R,this.getValue(B,"time",0),this.getValue(B,"rotateMix",1),this.getValue(B,"translateMix",1),this.getValue(B,"scaleMix",1),this.getValue(B,"shearMix",1)),this.readCurve(B,V,R),R++}d.push(V),b=Math.max(b,V.frames[(V.getFrameCount()-1)*t.TransformConstraintTimeline.ENTRIES])}if(i.path)for(var Z in i.path){K=i.path[Z];var tt=a.findPathConstraintIndex(Z);if(-1==tt)throw new Error("Path constraint not found: "+Z);var et=a.pathConstraints[tt];for(var M in K){P=K[M];if("position"===M||"spacing"===M){V=null,W=1;"spacing"===M?(V=new t.PathConstraintSpacingTimeline(P.length),et.spacingMode!=t.SpacingMode.Length&&et.spacingMode!=t.SpacingMode.Fixed||(W=u)):(V=new t.PathConstraintPositionTimeline(P.length),et.positionMode==t.PositionMode.Fixed&&(W=u)),V.pathConstraintIndex=tt;for(R=0,O=0;O<P.length;O++){B=P[O];V.setFrame(R,this.getValue(B,"time",0),this.getValue(B,M,0)*W),this.readCurve(B,V,R),R++}d.push(V),b=Math.max(b,V.frames[(V.getFrameCount()-1)*t.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===M){(V=new t.PathConstraintMixTimeline(P.length)).pathConstraintIndex=tt;for(R=0,O=0;O<P.length;O++){B=P[O];V.setFrame(R,this.getValue(B,"time",0),this.getValue(B,"rotateMix",1),this.getValue(B,"translateMix",1)),this.readCurve(B,V,R),R++}d.push(V),b=Math.max(b,V.frames[(V.getFrameCount()-1)*t.PathConstraintMixTimeline.ENTRIES])}}}if(i.deform)for(var it in i.deform){var nt=i.deform[it],rt=a.findSkin(it);if(null==rt)throw new Error("Skin not found: "+it);for(var S in nt){C=nt[S];if(-1==(wt=a.findSlotIndex(S)))throw new Error("Slot not found: "+C.name);for(var M in C){P=C[M];var st=rt.getAttachment(wt,M);if(null==st)throw new Error("Deform attachment not found: "+P.name);var ot=null!=st.bones,at=st.vertices,ht=ot?at.length/3*2:at.length;(V=new t.DeformTimeline(P.length)).slotIndex=wt,V.attachment=st;R=0;for(var lt=0;lt<P.length;lt++){B=P[lt];var ut=void 0,ct=this.getValue(B,"vertices",null);if(null==ct)ut=ot?t.Utils.newFloatArray(ht):at;else{ut=t.Utils.newFloatArray(ht);var dt=this.getValue(B,"offset",0);if(t.Utils.arrayCopy(ct,0,ut,dt,ct.length),1!=u)for(var ft=(O=dt)+ct.length;O<ft;O++)ut[O]*=u;if(!ot)for(O=0;O<ht;O++)ut[O]+=at[O]}V.setFrame(R,this.getValue(B,"time",0),ut),this.readCurve(B,V,R),R++}d.push(V),b=Math.max(b,V.frames[V.getFrameCount()-1])}}}var pt=i.drawOrder;if(null==pt&&(pt=i.draworder),null!=pt){V=new t.DrawOrderTimeline(pt.length);var gt=a.slots.length;for(R=0,lt=0;lt<pt.length;lt++){var vt=pt[lt],mt=null,yt=this.getValue(vt,"offsets",null);if(null!=yt){mt=t.Utils.newArray(gt,-1);var xt=t.Utils.newArray(gt-yt.length,0),Tt=0,bt=0;for(O=0;O<yt.length;O++){var wt,St=yt[O];if(-1==(wt=a.findSlotIndex(St.slot)))throw new Error("Slot not found: "+St.slot);for(;Tt!=wt;)xt[bt++]=Tt++;mt[Tt+St.offset]=Tt++}for(;Tt<gt;)xt[bt++]=Tt++;for(O=gt-1;O>=0;O--)-1==mt[O]&&(mt[O]=xt[--bt])}V.setFrame(R++,this.getValue(vt,"time",0),mt)}d.push(V),b=Math.max(b,V.frames[V.getFrameCount()-1])}if(i.events){for(V=new t.EventTimeline(i.events.length),R=0,O=0;O<i.events.length;O++){var Ct=i.events[O],Et=a.findEvent(Ct.name);if(null==Et)throw new Error("Event not found: "+Ct.name);var Mt=new t.Event(t.Utils.toSinglePrecision(this.getValue(Ct,"time",0)),Et);Mt.intValue=this.getValue(Ct,"int",Et.intValue),Mt.floatValue=this.getValue(Ct,"float",Et.floatValue),Mt.stringValue=this.getValue(Ct,"string",Et.stringValue),null!=Mt.data.audioPath&&(Mt.volume=this.getValue(Ct,"volume",1),Mt.balance=this.getValue(Ct,"balance",0)),V.setFrame(R++,Mt)}d.push(V),b=Math.max(b,V.frames[V.getFrameCount()-1])}if(isNaN(b))throw new Error("Error while parsing animation, duration is NaN");a.animations.push(new t.Animation(o,d,b))},SkeletonJson.prototype.readCurve=function(t,i,o){if(t.hasOwnProperty("curve"))if("stepped"==t.curve)i.setStepped(o);else{var a=t.curve;i.setCurve(o,a,this.getValue(t,"c2",0),this.getValue(t,"c3",1),this.getValue(t,"c4",1))}},SkeletonJson.prototype.getValue=function(t,i,o){return void 0!==t[i]?t[i]:o},SkeletonJson.blendModeFromString=function(i){if("normal"==(i=i.toLowerCase()))return t.BlendMode.Normal;if("additive"==i)return t.BlendMode.Additive;if("multiply"==i)return t.BlendMode.Multiply;if("screen"==i)return t.BlendMode.Screen;throw new Error("Unknown blend mode: "+i)},SkeletonJson.positionModeFromString=function(i){if("fixed"==(i=i.toLowerCase()))return t.PositionMode.Fixed;if("percent"==i)return t.PositionMode.Percent;throw new Error("Unknown position mode: "+i)},SkeletonJson.spacingModeFromString=function(i){if("length"==(i=i.toLowerCase()))return t.SpacingMode.Length;if("fixed"==i)return t.SpacingMode.Fixed;if("percent"==i)return t.SpacingMode.Percent;throw new Error("Unknown position mode: "+i)},SkeletonJson.rotateModeFromString=function(i){if("tangent"==(i=i.toLowerCase()))return t.RotateMode.Tangent;if("chain"==i)return t.RotateMode.Chain;if("chainscale"==i)return t.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+i)},SkeletonJson.transformModeFromString=function(i){if("normal"==(i=i.toLowerCase()))return t.TransformMode.Normal;if("onlytranslation"==i)return t.TransformMode.OnlyTranslation;if("norotationorreflection"==i)return t.TransformMode.NoRotationOrReflection;if("noscale"==i)return t.TransformMode.NoScale;if("noscaleorreflection"==i)return t.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+i)},SkeletonJson}();t.SkeletonJson=i;var o=function o(t,i,a,u,d){this.mesh=t,this.skin=i,this.slotIndex=a,this.parent=u,this.inheritDeform=d}}(a||(a={})),function(t){var i=function i(t,o,a){this.slotIndex=t,this.name=o,this.attachment=a};t.SkinEntry=i;var o=function(){function Skin(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,null==t)throw new Error("name cannot be null.");this.name=t}return Skin.prototype.setAttachment=function(t,i,o){if(null==o)throw new Error("attachment cannot be null.");var a=this.attachments;t>=a.length&&(a.length=t+1),a[t]||(a[t]={}),a[t][i]=o},Skin.prototype.addSkin=function(t){for(var i=0;i<t.bones.length;i++){for(var o=t.bones[i],a=!1,u=0;u<this.bones.length;u++)if(this.bones[u]==o){a=!0;break}a||this.bones.push(o)}for(i=0;i<t.constraints.length;i++){var d=t.constraints[i];for(a=!1,u=0;u<this.constraints.length;u++)if(this.constraints[u]==d){a=!0;break}a||this.constraints.push(d)}var b=t.getAttachments();for(i=0;i<b.length;i++){var S=b[i];this.setAttachment(S.slotIndex,S.name,S.attachment)}},Skin.prototype.copySkin=function(i){for(var o=0;o<i.bones.length;o++){for(var a=i.bones[o],u=!1,d=0;d<this.bones.length;d++)if(this.bones[d]==a){u=!0;break}u||this.bones.push(a)}for(o=0;o<i.constraints.length;o++){var b=i.constraints[o];for(u=!1,d=0;d<this.constraints.length;d++)if(this.constraints[d]==b){u=!0;break}u||this.constraints.push(b)}var S=i.getAttachments();for(o=0;o<S.length;o++){var C=S[o];null!=C.attachment&&(C.attachment instanceof t.MeshAttachment?(C.attachment=C.attachment.newLinkedMesh(),this.setAttachment(C.slotIndex,C.name,C.attachment)):(C.attachment=C.attachment.copy(),this.setAttachment(C.slotIndex,C.name,C.attachment)))}},Skin.prototype.getAttachment=function(t,i){var o=this.attachments[t];return o?o[i]:null},Skin.prototype.removeAttachment=function(t,i){var o=this.attachments[t];o&&(o[i]=null)},Skin.prototype.getAttachments=function(){for(var t=new Array,o=0;o<this.attachments.length;o++){var a=this.attachments[o];if(a)for(var u in a){var d=a[u];d&&t.push(new i(o,u,d))}}return t},Skin.prototype.getAttachmentsForSlot=function(t,o){var a=this.attachments[t];if(a)for(var u in a){var d=a[u];d&&o.push(new i(t,u,d))}},Skin.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},Skin.prototype.attachAll=function(t,i){for(var o=0,a=0;a<t.slots.length;a++){var u=t.slots[a],d=u.getAttachment();if(d&&o<i.attachments.length){var b=i.attachments[o];for(var S in b){if(d==b[S]){var C=this.getAttachment(o,S);null!=C&&u.setAttachment(C);break}}}o++}},Skin}();t.Skin=o}(a||(a={})),function(t){var i=function(){function Slot(i,o){if(this.deform=new Array,null==i)throw new Error("data cannot be null.");if(null==o)throw new Error("bone cannot be null.");this.data=i,this.bone=o,this.color=new t.Color,this.darkColor=null==i.darkColor?null:new t.Color,this.setToSetupPose()}return Slot.prototype.getSkeleton=function(){return this.bone.skeleton},Slot.prototype.getAttachment=function(){return this.attachment},Slot.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},Slot.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},Slot.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},Slot.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},Slot}();t.Slot=i}(a||(a={})),function(t){var i=function i(o,a,u){if(this.color=new t.Color(1,1,1,1),o<0)throw new Error("index must be >= 0.");if(null==a)throw new Error("name cannot be null.");if(null==u)throw new Error("boneData cannot be null.");this.index=o,this.name=a,this.boneData=u};t.SlotData=i}(a||(a={})),function(t){var i,o,a=function(){function Texture(t){this._image=t}return Texture.prototype.getImage=function(){return this._image},Texture.filterFromString=function(t){switch(t.toLowerCase()){case"nearest":return i.Nearest;case"linear":return i.Linear;case"mipmap":return i.MipMap;case"mipmapnearestnearest":return i.MipMapNearestNearest;case"mipmaplinearnearest":return i.MipMapLinearNearest;case"mipmapnearestlinear":return i.MipMapNearestLinear;case"mipmaplinearlinear":return i.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}},Texture.wrapFromString=function(t){switch(t.toLowerCase()){case"mirroredtepeat":return o.MirroredRepeat;case"clamptoedge":return o.ClampToEdge;case"repeat":return o.Repeat;default:throw new Error("Unknown texture wrap "+t)}},Texture}();t.Texture=a,function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(i=t.TextureFilter||(t.TextureFilter={})),function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"}(o=t.TextureWrap||(t.TextureWrap={}));var d=function d(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.rotate=!1,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0};t.TextureRegion=d;var b=function(t){function FakeTexture(){return null!==t&&t.apply(this,arguments)||this}return u(FakeTexture,t),FakeTexture.prototype.setFilters=function(t,i){},FakeTexture.prototype.setWraps=function(t,i){},FakeTexture.prototype.dispose=function(){},FakeTexture}(a);t.FakeTexture=b}(a||(a={})),function(t){var i=function(){function TextureAtlas(t,i){this.pages=new Array,this.regions=new Array,this.load(t,i)}return TextureAtlas.prototype.load=function(i,u){if(null==u)throw new Error("textureLoader cannot be null.");for(var b=new o(i),S=new Array(4),C=null;;){var M=b.readLine();if(null==M)break;if(0==(M=M.trim()).length)C=null;else if(C){var P=new d;P.name=M,P.page=C;var R=b.readValue();"true"==R.toLocaleLowerCase()?P.degrees=90:"false"==R.toLocaleLowerCase()?P.degrees=0:P.degrees=parseFloat(R),P.rotate=90==P.degrees,b.readTuple(S);var O=parseInt(S[0]),B=parseInt(S[1]);b.readTuple(S);var N=parseInt(S[0]),Y=parseInt(S[1]);P.u=O/C.width,P.v=B/C.height,P.rotate?(P.u2=(O+Y)/C.width,P.v2=(B+N)/C.height):(P.u2=(O+N)/C.width,P.v2=(B+Y)/C.height),P.x=O,P.y=B,P.width=Math.abs(N),P.height=Math.abs(Y),4==b.readTuple(S)&&4==b.readTuple(S)&&b.readTuple(S),P.originalWidth=parseInt(S[0]),P.originalHeight=parseInt(S[1]),b.readTuple(S),P.offsetX=parseInt(S[0]),P.offsetY=parseInt(S[1]),P.index=parseInt(b.readValue()),P.texture=C.texture,this.regions.push(P)}else{(C=new a).name=M,2==b.readTuple(S)&&(C.width=parseInt(S[0]),C.height=parseInt(S[1]),b.readTuple(S)),b.readTuple(S),C.minFilter=t.Texture.filterFromString(S[0]),C.magFilter=t.Texture.filterFromString(S[1]);var G=b.readValue();C.uWrap=t.TextureWrap.ClampToEdge,C.vWrap=t.TextureWrap.ClampToEdge,"x"==G?C.uWrap=t.TextureWrap.Repeat:"y"==G?C.vWrap=t.TextureWrap.Repeat:"xy"==G&&(C.uWrap=C.vWrap=t.TextureWrap.Repeat),C.texture=u(M),C.texture.setFilters(C.minFilter,C.magFilter),C.texture.setWraps(C.uWrap,C.vWrap),C.width=C.texture.getImage().width,C.height=C.texture.getImage().height,this.pages.push(C)}}},TextureAtlas.prototype.findRegion=function(t){for(var i=0;i<this.regions.length;i++)if(this.regions[i].name==t)return this.regions[i];return null},TextureAtlas.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].texture.dispose()},TextureAtlas}();t.TextureAtlas=i;var o=function(){function TextureAtlasReader(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}return TextureAtlasReader.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},TextureAtlasReader.prototype.readValue=function(){var t=this.readLine(),i=t.indexOf(":");if(-1==i)throw new Error("Invalid line: "+t);return t.substring(i+1).trim()},TextureAtlasReader.prototype.readTuple=function(t){var i=this.readLine(),o=i.indexOf(":");if(-1==o)throw new Error("Invalid line: "+i);for(var a=0,u=o+1;a<3;a++){var d=i.indexOf(",",u);if(-1==d)break;t[a]=i.substr(u,d-u).trim(),u=d+1}return t[a]=i.substring(u).trim(),a+1},TextureAtlasReader}(),a=function a(){};t.TextureAtlasPage=a;var d=function(t){function TextureAtlasRegion(){return null!==t&&t.apply(this,arguments)||this}return u(TextureAtlasRegion,t),TextureAtlasRegion}(t.TextureRegion);t.TextureAtlasRegion=d}(a||(a={})),function(t){var i=function(){function TransformConstraint(i,o){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new t.Vector2,this.active=!1,null==i)throw new Error("data cannot be null.");if(null==o)throw new Error("skeleton cannot be null.");this.data=i,this.rotateMix=i.rotateMix,this.translateMix=i.translateMix,this.scaleMix=i.scaleMix,this.shearMix=i.shearMix,this.bones=new Array;for(var a=0;a<i.bones.length;a++)this.bones.push(o.findBone(i.bones[a].name));this.target=o.findBone(i.target.name)}return TransformConstraint.prototype.isActive=function(){return this.active},TransformConstraint.prototype.apply=function(){this.update()},TransformConstraint.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},TransformConstraint.prototype.applyAbsoluteWorld=function(){for(var i=this.rotateMix,o=this.translateMix,a=this.scaleMix,u=this.shearMix,d=this.target,b=d.a,S=d.b,C=d.c,M=d.d,P=b*M-S*C>0?t.MathUtils.degRad:-t.MathUtils.degRad,R=this.data.offsetRotation*P,O=this.data.offsetShearY*P,B=this.bones,N=0,Y=B.length;N<Y;N++){var G=B[N],X=!1;if(0!=i){var U=G.a,z=G.b,V=G.c,W=G.d;($=Math.atan2(C,b)-Math.atan2(V,U)+R)>t.MathUtils.PI?$-=t.MathUtils.PI2:$<-t.MathUtils.PI&&($+=t.MathUtils.PI2),$*=i;var H=Math.cos($),j=Math.sin($);G.a=H*U-j*V,G.b=H*z-j*W,G.c=j*U+H*V,G.d=j*z+H*W,X=!0}if(0!=o){var q=this.temp;d.localToWorld(q.set(this.data.offsetX,this.data.offsetY)),G.worldX+=(q.x-G.worldX)*o,G.worldY+=(q.y-G.worldY)*o,X=!0}if(a>0){var Z=Math.sqrt(G.a*G.a+G.c*G.c),K=Math.sqrt(b*b+C*C);Z>1e-5&&(Z=(Z+(K-Z+this.data.offsetScaleX)*a)/Z),G.a*=Z,G.c*=Z,Z=Math.sqrt(G.b*G.b+G.d*G.d),K=Math.sqrt(S*S+M*M),Z>1e-5&&(Z=(Z+(K-Z+this.data.offsetScaleY)*a)/Z),G.b*=Z,G.d*=Z,X=!0}if(u>0){z=G.b,W=G.d;var $,tt=Math.atan2(W,z);($=Math.atan2(M,S)-Math.atan2(C,b)-(tt-Math.atan2(G.c,G.a)))>t.MathUtils.PI?$-=t.MathUtils.PI2:$<-t.MathUtils.PI&&($+=t.MathUtils.PI2),$=tt+($+O)*u;Z=Math.sqrt(z*z+W*W);G.b=Math.cos($)*Z,G.d=Math.sin($)*Z,X=!0}X&&(G.appliedValid=!1)}},TransformConstraint.prototype.applyRelativeWorld=function(){for(var i=this.rotateMix,o=this.translateMix,a=this.scaleMix,u=this.shearMix,d=this.target,b=d.a,S=d.b,C=d.c,M=d.d,P=b*M-S*C>0?t.MathUtils.degRad:-t.MathUtils.degRad,R=this.data.offsetRotation*P,O=this.data.offsetShearY*P,B=this.bones,N=0,Y=B.length;N<Y;N++){var G=B[N],X=!1;if(0!=i){var U=G.a,z=G.b,V=G.c,W=G.d;(K=Math.atan2(C,b)+R)>t.MathUtils.PI?K-=t.MathUtils.PI2:K<-t.MathUtils.PI&&(K+=t.MathUtils.PI2),K*=i;var H=Math.cos(K),j=Math.sin(K);G.a=H*U-j*V,G.b=H*z-j*W,G.c=j*U+H*V,G.d=j*z+H*W,X=!0}if(0!=o){var q=this.temp;d.localToWorld(q.set(this.data.offsetX,this.data.offsetY)),G.worldX+=q.x*o,G.worldY+=q.y*o,X=!0}if(a>0){var Z=(Math.sqrt(b*b+C*C)-1+this.data.offsetScaleX)*a+1;G.a*=Z,G.c*=Z,Z=(Math.sqrt(S*S+M*M)-1+this.data.offsetScaleY)*a+1,G.b*=Z,G.d*=Z,X=!0}if(u>0){var K;(K=Math.atan2(M,S)-Math.atan2(C,b))>t.MathUtils.PI?K-=t.MathUtils.PI2:K<-t.MathUtils.PI&&(K+=t.MathUtils.PI2);z=G.b,W=G.d;K=Math.atan2(W,z)+(K-t.MathUtils.PI/2+O)*u;Z=Math.sqrt(z*z+W*W);G.b=Math.cos(K)*Z,G.d=Math.sin(K)*Z,X=!0}X&&(G.appliedValid=!1)}},TransformConstraint.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,i=this.translateMix,o=this.scaleMix,a=this.shearMix,u=this.target;u.appliedValid||u.updateAppliedTransform();for(var d=this.bones,b=0,S=d.length;b<S;b++){var C=d[b];C.appliedValid||C.updateAppliedTransform();var M=C.arotation;if(0!=t){var P=u.arotation-M+this.data.offsetRotation;M+=(P-=360*(16384-(16384.499999999996-P/360|0)))*t}var R=C.ax,O=C.ay;0!=i&&(R+=(u.ax-R+this.data.offsetX)*i,O+=(u.ay-O+this.data.offsetY)*i);var B=C.ascaleX,N=C.ascaleY;0!=o&&(B>1e-5&&(B=(B+(u.ascaleX-B+this.data.offsetScaleX)*o)/B),N>1e-5&&(N=(N+(u.ascaleY-N+this.data.offsetScaleY)*o)/N));var Y=C.ashearY;if(0!=a){P=u.ashearY-Y+this.data.offsetShearY;P-=360*(16384-(16384.499999999996-P/360|0)),C.shearY+=P*a}C.updateWorldTransformWith(R,O,M,B,N,C.ashearX,Y)}},TransformConstraint.prototype.applyRelativeLocal=function(){var t=this.rotateMix,i=this.translateMix,o=this.scaleMix,a=this.shearMix,u=this.target;u.appliedValid||u.updateAppliedTransform();for(var d=this.bones,b=0,S=d.length;b<S;b++){var C=d[b];C.appliedValid||C.updateAppliedTransform();var M=C.arotation;0!=t&&(M+=(u.arotation+this.data.offsetRotation)*t);var P=C.ax,R=C.ay;0!=i&&(P+=(u.ax+this.data.offsetX)*i,R+=(u.ay+this.data.offsetY)*i);var O=C.ascaleX,B=C.ascaleY;0!=o&&(O>1e-5&&(O*=(u.ascaleX-1+this.data.offsetScaleX)*o+1),B>1e-5&&(B*=(u.ascaleY-1+this.data.offsetScaleY)*o+1));var N=C.ashearY;0!=a&&(N+=(u.ashearY+this.data.offsetShearY)*a),C.updateWorldTransformWith(P,R,M,O,B,C.ashearX,N)}},TransformConstraint}();t.TransformConstraint=i}(a||(a={})),function(t){var i=function(t){function TransformConstraintData(i){var o=t.call(this,i,0,!1)||this;return o.bones=new Array,o.rotateMix=0,o.translateMix=0,o.scaleMix=0,o.shearMix=0,o.offsetRotation=0,o.offsetX=0,o.offsetY=0,o.offsetScaleX=0,o.offsetScaleY=0,o.offsetShearY=0,o.relative=!1,o.local=!1,o}return u(TransformConstraintData,t),TransformConstraintData}(t.ConstraintData);t.TransformConstraintData=i}(a||(a={})),function(t){var i=function(){function Triangulator(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new t.Pool((function(){return new Array})),this.polygonIndicesPool=new t.Pool((function(){return new Array}))}return Triangulator.prototype.triangulate=function(t){var i=t,o=t.length>>1,a=this.indicesArray;a.length=0;for(var u=0;u<o;u++)a[u]=u;var d=this.isConcaveArray;d.length=0;u=0;for(var b=o;u<b;++u)d[u]=Triangulator.isConcave(u,o,i,a);var S=this.triangles;for(S.length=0;o>3;){for(var C=o-1,M=(u=0,1);;){t:if(!d[u]){for(var P=a[C]<<1,R=a[u]<<1,O=a[M]<<1,B=i[P],N=i[P+1],Y=i[R],G=i[R+1],X=i[O],U=i[O+1],z=(M+1)%o;z!=C;z=(z+1)%o)if(d[z]){var V=a[z]<<1,W=i[V],H=i[V+1];if(Triangulator.positiveArea(X,U,B,N,W,H)&&Triangulator.positiveArea(B,N,Y,G,W,H)&&Triangulator.positiveArea(Y,G,X,U,W,H))break t}break}if(0==M){do{if(!d[u])break;u--}while(u>0);break}C=u,u=M,M=(M+1)%o}S.push(a[(o+u-1)%o]),S.push(a[u]),S.push(a[(u+1)%o]),a.splice(u,1),d.splice(u,1);var j=(--o+u-1)%o,q=u==o?0:u;d[j]=Triangulator.isConcave(j,o,i,a),d[q]=Triangulator.isConcave(q,o,i,a)}return 3==o&&(S.push(a[2]),S.push(a[0]),S.push(a[1])),S},Triangulator.prototype.decompose=function(t,i){var o=t,a=this.convexPolygons;this.polygonPool.freeAll(a),a.length=0;var u=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(u),u.length=0;var d=this.polygonIndicesPool.obtain();d.length=0;var b=this.polygonPool.obtain();b.length=0;for(var S=-1,C=0,M=0,P=i.length;M<P;M+=3){var R=i[M]<<1,O=i[M+1]<<1,B=i[M+2]<<1,N=o[R],Y=o[R+1],G=o[O],X=o[O+1],U=o[B],z=o[B+1],V=!1;if(S==R){var W=b.length-4,H=Triangulator.winding(b[W],b[W+1],b[W+2],b[W+3],U,z),j=Triangulator.winding(U,z,b[0],b[1],b[2],b[3]);H==C&&j==C&&(b.push(U),b.push(z),d.push(B),V=!0)}V||(b.length>0?(a.push(b),u.push(d)):(this.polygonPool.free(b),this.polygonIndicesPool.free(d)),(b=this.polygonPool.obtain()).length=0,b.push(N),b.push(Y),b.push(G),b.push(X),b.push(U),b.push(z),(d=this.polygonIndicesPool.obtain()).length=0,d.push(R),d.push(O),d.push(B),C=Triangulator.winding(N,Y,G,X,U,z),S=R)}b.length>0&&(a.push(b),u.push(d));for(M=0,P=a.length;M<P;M++)if(0!=(d=u[M]).length)for(var q=d[0],Z=d[d.length-1],K=(b=a[M])[W=b.length-4],$=b[W+1],tt=b[W+2],et=b[W+3],it=b[0],nt=b[1],rt=b[2],st=b[3],ot=Triangulator.winding(K,$,tt,et,it,nt),at=0;at<P;at++)if(at!=M){var ht=u[at];if(3==ht.length){var lt=ht[0],ut=ht[1],ct=ht[2],dt=a[at];U=dt[dt.length-2],z=dt[dt.length-1];if(lt==q&&ut==Z){H=Triangulator.winding(K,$,tt,et,U,z),j=Triangulator.winding(U,z,it,nt,rt,st);H==ot&&j==ot&&(dt.length=0,ht.length=0,b.push(U),b.push(z),d.push(ct),K=tt,$=et,tt=U,et=z,at=0)}}}for(M=a.length-1;M>=0;M--)0==(b=a[M]).length&&(a.splice(M,1),this.polygonPool.free(b),d=u[M],u.splice(M,1),this.polygonIndicesPool.free(d));return a},Triangulator.isConcave=function(t,i,o,a){var u=a[(i+t-1)%i]<<1,d=a[t]<<1,b=a[(t+1)%i]<<1;return!this.positiveArea(o[u],o[u+1],o[d],o[d+1],o[b],o[b+1])},Triangulator.positiveArea=function(t,i,o,a,u,d){return t*(d-a)+o*(i-d)+u*(a-i)>=0},Triangulator.winding=function(t,i,o,a,u,d){var b=o-t,S=a-i;return u*S-d*b+b*i-t*S>=0?1:-1},Triangulator}();t.Triangulator=i}(a||(a={})),function(t){var i=function(){function IntSet(){this.array=new Array}return IntSet.prototype.add=function(t){var i=this.contains(t);return this.array[0|t]=0|t,!i},IntSet.prototype.contains=function(t){return null!=this.array[0|t]},IntSet.prototype.remove=function(t){this.array[0|t]=void 0},IntSet.prototype.clear=function(){this.array.length=0},IntSet}();t.IntSet=i;var o=function(){function Color(t,i,o,a){void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),this.r=t,this.g=i,this.b=o,this.a=a}return Color.prototype.set=function(t,i,o,a){return this.r=t,this.g=i,this.b=o,this.a=a,this.clamp(),this},Color.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},Color.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255,this},Color.prototype.add=function(t,i,o,a){return this.r+=t,this.g+=i,this.b+=o,this.a+=a,this.clamp(),this},Color.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},Color.rgba8888ToColor=function(t,i){t.r=((4278190080&i)>>>24)/255,t.g=((16711680&i)>>>16)/255,t.b=((65280&i)>>>8)/255,t.a=(255&i)/255},Color.rgb888ToColor=function(t,i){t.r=((16711680&i)>>>16)/255,t.g=((65280&i)>>>8)/255,t.b=(255&i)/255},Color.WHITE=new Color(1,1,1,1),Color.RED=new Color(1,0,0,1),Color.GREEN=new Color(0,1,0,1),Color.BLUE=new Color(0,0,1,1),Color.MAGENTA=new Color(1,0,1,1),Color}();t.Color=o;var a=function(){function MathUtils(){}return MathUtils.clamp=function(t,i,o){return t<i?i:t>o?o:t},MathUtils.cosDeg=function(t){return Math.cos(t*MathUtils.degRad)},MathUtils.sinDeg=function(t){return Math.sin(t*MathUtils.degRad)},MathUtils.signum=function(t){return t>0?1:t<0?-1:0},MathUtils.toInt=function(t){return t>0?Math.floor(t):Math.ceil(t)},MathUtils.cbrt=function(t){var i=Math.pow(Math.abs(t),1/3);return t<0?-i:i},MathUtils.randomTriangular=function(t,i){return MathUtils.randomTriangularWith(t,i,.5*(t+i))},MathUtils.randomTriangularWith=function(t,i,o){var a=Math.random(),u=i-t;return a<=(o-t)/u?t+Math.sqrt(a*u*(o-t)):i-Math.sqrt((1-a)*u*(i-o))},MathUtils.PI=3.1415927,MathUtils.PI2=2*MathUtils.PI,MathUtils.radiansToDegrees=180/MathUtils.PI,MathUtils.radDeg=MathUtils.radiansToDegrees,MathUtils.degreesToRadians=MathUtils.PI/180,MathUtils.degRad=MathUtils.degreesToRadians,MathUtils}();t.MathUtils=a;var d=function(){function Interpolation(){}return Interpolation.prototype.apply=function(t,i,o){return t+(i-t)*this.applyInternal(o)},Interpolation}();t.Interpolation=d;var b=function(t){function Pow(i){var o=t.call(this)||this;return o.power=2,o.power=i,o}return u(Pow,t),Pow.prototype.applyInternal=function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1},Pow}(d);t.Pow=b;var S=function(t){function PowOut(i){return t.call(this,i)||this}return u(PowOut,t),PowOut.prototype.applyInternal=function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1},PowOut}(b);t.PowOut=S;var C=function(){function Utils(){}return Utils.arrayCopy=function(t,i,o,a,u){for(var d=i,b=a;d<i+u;d++,b++)o[b]=t[d]},Utils.setArraySize=function(t,i,o){void 0===o&&(o=0);var a=t.length;if(a==i)return t;if(t.length=i,a<i)for(var u=a;u<i;u++)t[u]=o;return t},Utils.ensureArrayCapacity=function(t,i,o){return void 0===o&&(o=0),t.length>=i?t:Utils.setArraySize(t,i,o)},Utils.newArray=function(t,i){for(var o=new Array(t),a=0;a<t;a++)o[a]=i;return o},Utils.newFloatArray=function(t){if(Utils.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);for(var i=new Array(t),o=0;o<i.length;o++)i[o]=0;return i},Utils.newShortArray=function(t){if(Utils.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);for(var i=new Array(t),o=0;o<i.length;o++)i[o]=0;return i},Utils.toFloatArray=function(t){return Utils.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t},Utils.toSinglePrecision=function(t){return Utils.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t},Utils.webkit602BugfixHelper=function(t,i){},Utils.contains=function(t,i,o){for(var a=0;a<t.length;a++)if(t[a]==i)return!0;return!1},Utils.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,Utils}();t.Utils=C;var M=function(){function DebugUtils(){}return DebugUtils.logBones=function(t){for(var i=0;i<t.bones.length;i++){var o=t.bones[i];console.log(o.data.name+", "+o.a+", "+o.b+", "+o.c+", "+o.d+", "+o.worldX+", "+o.worldY)}},DebugUtils}();t.DebugUtils=M;var P=function(){function Pool(t){this.items=new Array,this.instantiator=t}return Pool.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},Pool.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},Pool.prototype.freeAll=function(t){for(var i=0;i<t.length;i++)this.free(t[i])},Pool.prototype.clear=function(){this.items.length=0},Pool}();t.Pool=P;var R=function(){function Vector2(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.x=t,this.y=i}return Vector2.prototype.set=function(t,i){return this.x=t,this.y=i,this},Vector2.prototype.length=function(){var t=this.x,i=this.y;return Math.sqrt(t*t+i*i)},Vector2.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},Vector2}();t.Vector2=R;var O=function(){function TimeKeeper(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return TimeKeeper.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},TimeKeeper}();t.TimeKeeper=O;var B=function(){function WindowedMean(t){void 0===t&&(t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}return WindowedMean.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},WindowedMean.prototype.addValue=function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},WindowedMean.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,i=0;i<this.values.length;i++)t+=this.values[i];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0},WindowedMean}();t.WindowedMean=B}(a||(a={})),Math.fround||(Math.fround=(o=new Float32Array(1),function(t){return o[0]=t,o[0]})),function(t){var i=function i(t){if(null==t)throw new Error("name cannot be null.");this.name=t};t.Attachment=i;var o=function(i){function VertexAttachment(t){var o=i.call(this,t)||this;return o.id=(65535&VertexAttachment.nextID++)<<11,o.worldVerticesLength=0,o.deformAttachment=o,o}return u(VertexAttachment,i),VertexAttachment.prototype.computeWorldVertices=function(t,i,o,a,u,d){o=u+(o>>1)*d;var b=t.bone.skeleton,S=t.deform,C=this.vertices,M=this.bones;if(null!=M){for(var P=0,R=0,O=0;O<i;O+=2){P+=(G=M[P])+1,R+=G}var B=b.bones;if(0==S.length)for(tt=u,q=3*R;tt<o;tt+=d){var N=0,Y=0,G=M[P++];for(G+=P;P<G;P++,q+=3){V=B[M[P]],et=C[q],it=C[q+1];var X=C[q+2];N+=(et*V.a+it*V.b+V.worldX)*X,Y+=(et*V.c+it*V.d+V.worldY)*X}a[tt]=N,a[tt+1]=Y}else for(var U=S,z=(tt=u,q=3*R,R<<1);tt<o;tt+=d){N=0,Y=0,G=M[P++];for(G+=P;P<G;P++,q+=3,z+=2){V=B[M[P]],et=C[q]+U[z],it=C[q+1]+U[z+1],X=C[q+2];N+=(et*V.a+it*V.b+V.worldX)*X,Y+=(et*V.c+it*V.d+V.worldY)*X}a[tt]=N,a[tt+1]=Y}}else{S.length>0&&(C=S);for(var V,W=(V=t.bone).worldX,H=V.worldY,j=V.a,q=V.b,Z=V.c,K=V.d,$=i,tt=u;tt<o;$+=2,tt+=d){var et=C[$],it=C[$+1];a[tt]=et*j+it*q+W,a[tt+1]=et*Z+it*K+H}}},VertexAttachment.prototype.copyTo=function(i){null!=this.bones?(i.bones=new Array(this.bones.length),t.Utils.arrayCopy(this.bones,0,i.bones,0,this.bones.length)):i.bones=null,null!=this.vertices?(i.vertices=t.Utils.newFloatArray(this.vertices.length),t.Utils.arrayCopy(this.vertices,0,i.vertices,0,this.vertices.length)):i.vertices=null,i.worldVerticesLength=this.worldVerticesLength,i.deformAttachment=this.deformAttachment},VertexAttachment.nextID=0,VertexAttachment}(i);t.VertexAttachment=o}(a||(a={})),function(t){var i;(i=t.AttachmentType||(t.AttachmentType={}))[i.Region=0]="Region",i[i.BoundingBox=1]="BoundingBox",i[i.Mesh=2]="Mesh",i[i.LinkedMesh=3]="LinkedMesh",i[i.Path=4]="Path",i[i.Point=5]="Point",i[i.Clipping=6]="Clipping"}(a||(a={})),function(t){var i=function(i){function BoundingBoxAttachment(o){var a=i.call(this,o)||this;return a.color=new t.Color(1,1,1,1),a}return u(BoundingBoxAttachment,i),BoundingBoxAttachment.prototype.copy=function(){var t=new BoundingBoxAttachment(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t},BoundingBoxAttachment}(t.VertexAttachment);t.BoundingBoxAttachment=i}(a||(a={})),function(t){var i=function(i){function ClippingAttachment(o){var a=i.call(this,o)||this;return a.color=new t.Color(.2275,.2275,.8078,1),a}return u(ClippingAttachment,i),ClippingAttachment.prototype.copy=function(){var t=new ClippingAttachment(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t},ClippingAttachment}(t.VertexAttachment);t.ClippingAttachment=i}(a||(a={})),function(t){var i=function(i){function MeshAttachment(o){var a=i.call(this,o)||this;return a.color=new t.Color(1,1,1,1),a.tempColor=new t.Color(0,0,0,0),a}return u(MeshAttachment,i),MeshAttachment.prototype.updateUVs=function(){var i=this.regionUVs;null!=this.uvs&&this.uvs.length==i.length||(this.uvs=t.Utils.newFloatArray(i.length));var o=this.uvs,a=this.uvs.length,u=this.region.u,d=this.region.v,b=0,S=0;if(this.region instanceof t.TextureAtlasRegion){var C=this.region,M=C.texture.getImage().width,P=C.texture.getImage().height;switch(C.degrees){case 90:u-=(C.originalHeight-C.offsetY-C.height)/M,d-=(C.originalWidth-C.offsetX-C.width)/P,b=C.originalHeight/M,S=C.originalWidth/P;for(var R=0;R<a;R+=2)o[R]=u+i[R+1]*b,o[R+1]=d+(1-i[R])*S;return;case 180:u-=(C.originalWidth-C.offsetX-C.width)/M,d-=C.offsetY/P,b=C.originalWidth/M,S=C.originalHeight/P;for(R=0;R<a;R+=2)o[R]=u+(1-i[R])*b,o[R+1]=d+(1-i[R+1])*S;return;case 270:u-=C.offsetY/M,d-=C.offsetX/P,b=C.originalHeight/M,S=C.originalWidth/P;for(R=0;R<a;R+=2)o[R]=u+(1-i[R+1])*b,o[R+1]=d+i[R]*S;return}u-=C.offsetX/M,d-=(C.originalHeight-C.offsetY-C.height)/P,b=C.originalWidth/M,S=C.originalHeight/P}else null==this.region?(u=d=0,b=S=1):(b=this.region.u2-u,S=this.region.v2-d);for(R=0;R<a;R+=2)o[R]=u+i[R]*b,o[R+1]=d+i[R+1]*S},MeshAttachment.prototype.getParentMesh=function(){return this.parentMesh},MeshAttachment.prototype.setParentMesh=function(t){this.parentMesh=t,null!=t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},MeshAttachment.prototype.copy=function(){if(null!=this.parentMesh)return this.newLinkedMesh();var i=new MeshAttachment(this.name);return i.region=this.region,i.path=this.path,i.color.setFromColor(this.color),this.copyTo(i),i.regionUVs=new Array(this.regionUVs.length),t.Utils.arrayCopy(this.regionUVs,0,i.regionUVs,0,this.regionUVs.length),i.uvs=new Array(this.uvs.length),t.Utils.arrayCopy(this.uvs,0,i.uvs,0,this.uvs.length),i.triangles=new Array(this.triangles.length),t.Utils.arrayCopy(this.triangles,0,i.triangles,0,this.triangles.length),i.hullLength=this.hullLength,null!=this.edges&&(i.edges=new Array(this.edges.length),t.Utils.arrayCopy(this.edges,0,i.edges,0,this.edges.length)),i.width=this.width,i.height=this.height,i},MeshAttachment.prototype.newLinkedMesh=function(){var t=new MeshAttachment(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(null!=this.parentMesh?this.parentMesh:this),t.updateUVs(),t},MeshAttachment}(t.VertexAttachment);t.MeshAttachment=i}(a||(a={})),function(t){var i=function(i){function PathAttachment(o){var a=i.call(this,o)||this;return a.closed=!1,a.constantSpeed=!1,a.color=new t.Color(1,1,1,1),a}return u(PathAttachment,i),PathAttachment.prototype.copy=function(){var i=new PathAttachment(this.name);return this.copyTo(i),i.lengths=new Array(this.lengths.length),t.Utils.arrayCopy(this.lengths,0,i.lengths,0,this.lengths.length),i.closed=closed,i.constantSpeed=this.constantSpeed,i.color.setFromColor(this.color),i},PathAttachment}(t.VertexAttachment);t.PathAttachment=i}(a||(a={})),function(t){var i=function(i){function PointAttachment(o){var a=i.call(this,o)||this;return a.color=new t.Color(.38,.94,0,1),a}return u(PointAttachment,i),PointAttachment.prototype.computeWorldPosition=function(t,i){return i.x=this.x*t.a+this.y*t.b+t.worldX,i.y=this.x*t.c+this.y*t.d+t.worldY,i},PointAttachment.prototype.computeWorldRotation=function(i){var o=t.MathUtils.cosDeg(this.rotation),a=t.MathUtils.sinDeg(this.rotation),u=o*i.a+a*i.b,d=o*i.c+a*i.d;return Math.atan2(d,u)*t.MathUtils.radDeg},PointAttachment.prototype.copy=function(){var t=new PointAttachment(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t},PointAttachment}(t.VertexAttachment);t.PointAttachment=i}(a||(a={})),function(t){var i=function(i){function RegionAttachment(o){var a=i.call(this,o)||this;return a.x=0,a.y=0,a.scaleX=1,a.scaleY=1,a.rotation=0,a.width=0,a.height=0,a.color=new t.Color(1,1,1,1),a.offset=t.Utils.newFloatArray(8),a.uvs=t.Utils.newFloatArray(8),a.tempColor=new t.Color(1,1,1,1),a}return u(RegionAttachment,i),RegionAttachment.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,i=this.height/this.region.originalHeight*this.scaleY,o=-this.width/2*this.scaleX+this.region.offsetX*t,a=-this.height/2*this.scaleY+this.region.offsetY*i,u=o+this.region.width*t,d=a+this.region.height*i,b=this.rotation*Math.PI/180,S=Math.cos(b),C=Math.sin(b),M=o*S+this.x,P=o*C,R=a*S+this.y,O=a*C,B=u*S+this.x,N=u*C,Y=d*S+this.y,G=d*C,X=this.offset;X[RegionAttachment.OX1]=M-O,X[RegionAttachment.OY1]=R+P,X[RegionAttachment.OX2]=M-G,X[RegionAttachment.OY2]=Y+P,X[RegionAttachment.OX3]=B-G,X[RegionAttachment.OY3]=Y+N,X[RegionAttachment.OX4]=B-O,X[RegionAttachment.OY4]=R+N},RegionAttachment.prototype.setRegion=function(t){this.region=t;var i=this.uvs;t.rotate?(i[2]=t.u,i[3]=t.v2,i[4]=t.u,i[5]=t.v,i[6]=t.u2,i[7]=t.v,i[0]=t.u2,i[1]=t.v2):(i[0]=t.u,i[1]=t.v2,i[2]=t.u,i[3]=t.v,i[4]=t.u2,i[5]=t.v,i[6]=t.u2,i[7]=t.v2)},RegionAttachment.prototype.computeWorldVertices=function(t,i,o,a){var u=this.offset,d=t.worldX,b=t.worldY,S=t.a,C=t.b,M=t.c,P=t.d,R=0,O=0;R=u[RegionAttachment.OX1],O=u[RegionAttachment.OY1],i[o]=R*S+O*C+d,i[o+1]=R*M+O*P+b,o+=a,R=u[RegionAttachment.OX2],O=u[RegionAttachment.OY2],i[o]=R*S+O*C+d,i[o+1]=R*M+O*P+b,o+=a,R=u[RegionAttachment.OX3],O=u[RegionAttachment.OY3],i[o]=R*S+O*C+d,i[o+1]=R*M+O*P+b,o+=a,R=u[RegionAttachment.OX4],O=u[RegionAttachment.OY4],i[o]=R*S+O*C+d,i[o+1]=R*M+O*P+b},RegionAttachment.prototype.copy=function(){var i=new RegionAttachment(this.name);return i.region=this.region,i.rendererObject=this.rendererObject,i.path=this.path,i.x=this.x,i.y=this.y,i.scaleX=this.scaleX,i.scaleY=this.scaleY,i.rotation=this.rotation,i.width=this.width,i.height=this.height,t.Utils.arrayCopy(this.uvs,0,i.uvs,0,8),t.Utils.arrayCopy(this.offset,0,i.offset,0,8),i.color.setFromColor(this.color),i},RegionAttachment.OX1=0,RegionAttachment.OY1=1,RegionAttachment.OX2=2,RegionAttachment.OY2=3,RegionAttachment.OX3=4,RegionAttachment.OY3=5,RegionAttachment.OX4=6,RegionAttachment.OY4=7,RegionAttachment.X1=0,RegionAttachment.Y1=1,RegionAttachment.C1R=2,RegionAttachment.C1G=3,RegionAttachment.C1B=4,RegionAttachment.C1A=5,RegionAttachment.U1=6,RegionAttachment.V1=7,RegionAttachment.X2=8,RegionAttachment.Y2=9,RegionAttachment.C2R=10,RegionAttachment.C2G=11,RegionAttachment.C2B=12,RegionAttachment.C2A=13,RegionAttachment.U2=14,RegionAttachment.V2=15,RegionAttachment.X3=16,RegionAttachment.Y3=17,RegionAttachment.C3R=18,RegionAttachment.C3G=19,RegionAttachment.C3B=20,RegionAttachment.C3A=21,RegionAttachment.U3=22,RegionAttachment.V3=23,RegionAttachment.X4=24,RegionAttachment.Y4=25,RegionAttachment.C4R=26,RegionAttachment.C4G=27,RegionAttachment.C4B=28,RegionAttachment.C4A=29,RegionAttachment.U4=30,RegionAttachment.V4=31,RegionAttachment}(t.Attachment);t.RegionAttachment=i}(a||(a={})),function(t){var i=function(){function JitterEffect(t,i){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=i}return JitterEffect.prototype.begin=function(t){},JitterEffect.prototype.transform=function(i,o,a,u){i.x+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY),i.y+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},JitterEffect.prototype.end=function(){},JitterEffect}();t.JitterEffect=i}(a||(a={})),function(t){var i=function(){function SwirlEffect(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return SwirlEffect.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},SwirlEffect.prototype.transform=function(i,o,a,u){var d=this.angle*t.MathUtils.degreesToRadians,b=i.x-this.worldX,S=i.y-this.worldY,C=Math.sqrt(b*b+S*S);if(C<this.radius){var M=SwirlEffect.interpolation.apply(0,d,(this.radius-C)/this.radius),P=Math.cos(M),R=Math.sin(M);i.x=P*b-R*S+this.worldX,i.y=R*b+P*S+this.worldY}},SwirlEffect.prototype.end=function(){},SwirlEffect.interpolation=new t.PowOut(2),SwirlEffect}();t.SwirlEffect=i}(a||(a={})),function(t){var i,o;i=t.canvas||(t.canvas={}),o=function(i){function AssetManager(o){return void 0===o&&(o=""),i.call(this,(function(i){return new t.canvas.CanvasTexture(i)}),o)||this}return u(AssetManager,i),AssetManager}(t.AssetManager),i.AssetManager=o}(a||(a={})),function(t){var i,o;i=t.canvas||(t.canvas={}),o=function(t){function CanvasTexture(i){return t.call(this,i)||this}return u(CanvasTexture,t),CanvasTexture.prototype.setFilters=function(t,i){},CanvasTexture.prototype.setWraps=function(t,i){},CanvasTexture.prototype.dispose=function(){},CanvasTexture}(t.Texture),i.CanvasTexture=o}(a||(a={})),function(t){var i,o;i=t.canvas||(t.canvas={}),o=function(){function SkeletonRenderer(i){this.triangleRendering=!1,this.debugRendering=!1,this.vertices=t.Utils.newFloatArray(8192),this.tempColor=new t.Color,this.ctx=i}return SkeletonRenderer.prototype.draw=function(t){this.triangleRendering?this.drawTriangles(t):this.drawImages(t)},SkeletonRenderer.prototype.drawImages=function(i){var o=this.ctx,a=i.drawOrder;this.debugRendering&&(o.strokeStyle="green"),o.save();for(var u=0,d=a.length;u<d;u++){var b=a[u];if(b.bone.active){var S=b.getAttachment(),C=null,M=null,P=null;if(S instanceof t.RegionAttachment){P=(M=(C=S).region).texture.getImage();var R=b.bone.skeleton.color,O=b.color,B=C.color,N=R.a*O.a*B.a,Y=this.tempColor;Y.set(R.r*O.r*B.r,R.g*O.g*B.g,R.b*O.b*B.b,N);var G=S,X=b.bone,U=M.width,z=M.height;o.save(),o.transform(X.a,X.c,X.b,X.d,X.worldX,X.worldY),o.translate(S.offset[0],S.offset[1]),o.rotate(S.rotation*Math.PI/180);var V=G.width/U;if(o.scale(V*S.scaleX,V*S.scaleY),o.translate(U/2,z/2),S.region.rotate){var W=U;U=z,z=W,o.rotate(-Math.PI/2)}o.scale(1,-1),o.translate(-U/2,-z/2),1==Y.r&&1==Y.g&&1==Y.b&&1==Y.a||(o.globalAlpha=Y.a),o.drawImage(P,M.x,M.y,U,z,0,0,U,z),this.debugRendering&&o.strokeRect(0,0,U,z),o.restore()}}}o.restore()},SkeletonRenderer.prototype.drawTriangles=function(i){for(var o=this.vertices,a=null,u=i.drawOrder,d=0,b=u.length;d<b;d++){var S=u[d],C=S.getAttachment(),M=null;if(C instanceof t.RegionAttachment){var P=C;o=this.computeRegionVertices(S,P,!1),a=SkeletonRenderer.QUAD_TRIANGLES,M=P.region.texture.getImage()}else{if(!(C instanceof t.MeshAttachment))continue;var R=C;o=this.computeMeshVertices(S,R,!1),a=R.triangles,M=R.region.renderObject.texture.getImage()}if(null!=M){S.data.blendMode;var O=S.bone.skeleton.color,B=S.color,N=C.color,Y=O.a*B.a*N.a,G=this.tempColor;G.set(O.r*B.r*N.r,O.g*B.g*N.g,O.b*B.b*N.b,Y);var X=this.ctx;1==G.r&&1==G.g&&1==G.b&&1==G.a||(X.globalAlpha=G.a);for(var U=0;U<a.length;U+=3){var z=8*a[U],V=8*a[U+1],W=8*a[U+2],H=o[z],j=o[z+1],q=o[z+6],Z=o[z+7],K=o[V],$=o[V+1],tt=o[V+6],et=o[V+7],it=o[W],nt=o[W+1],rt=o[W+6],st=o[W+7];this.drawTriangle(M,H,j,q,Z,K,$,tt,et,it,nt,rt,st),this.debugRendering&&(X.strokeStyle="green",X.beginPath(),X.moveTo(H,j),X.lineTo(K,$),X.lineTo(it,nt),X.lineTo(H,j),X.stroke())}}}this.ctx.globalAlpha=1},SkeletonRenderer.prototype.drawTriangle=function(t,i,o,a,u,d,b,S,C,M,P,R,O){var B=this.ctx;a*=t.width,u*=t.height,S*=t.width,C*=t.height,R*=t.width,O*=t.height,B.beginPath(),B.moveTo(i,o),B.lineTo(d,b),B.lineTo(M,P),B.closePath();var N=1/((S-=a)*(O-=u)-(R-=a)*(C-=u)),Y=(O*(d-=i)-C*(M-=i))*N,G=(O*(b-=o)-C*(P-=o))*N,X=(S*M-R*d)*N,U=(S*P-R*b)*N,z=i-Y*a-X*u,V=o-G*a-U*u;B.save(),B.transform(Y,G,X,U,z,V),B.clip(),B.drawImage(t,0,0),B.restore()},SkeletonRenderer.prototype.computeRegionVertices=function(i,o,a){var u=i.bone.skeleton.color,d=i.color,b=o.color,S=u.a*d.a*b.a,C=a?S:1,M=this.tempColor;M.set(u.r*d.r*b.r*C,u.g*d.g*b.g*C,u.b*d.b*b.b*C,S),o.computeWorldVertices(i.bone,this.vertices,0,SkeletonRenderer.VERTEX_SIZE);var P=this.vertices,R=o.uvs;return P[t.RegionAttachment.C1R]=M.r,P[t.RegionAttachment.C1G]=M.g,P[t.RegionAttachment.C1B]=M.b,P[t.RegionAttachment.C1A]=M.a,P[t.RegionAttachment.U1]=R[0],P[t.RegionAttachment.V1]=R[1],P[t.RegionAttachment.C2R]=M.r,P[t.RegionAttachment.C2G]=M.g,P[t.RegionAttachment.C2B]=M.b,P[t.RegionAttachment.C2A]=M.a,P[t.RegionAttachment.U2]=R[2],P[t.RegionAttachment.V2]=R[3],P[t.RegionAttachment.C3R]=M.r,P[t.RegionAttachment.C3G]=M.g,P[t.RegionAttachment.C3B]=M.b,P[t.RegionAttachment.C3A]=M.a,P[t.RegionAttachment.U3]=R[4],P[t.RegionAttachment.V3]=R[5],P[t.RegionAttachment.C4R]=M.r,P[t.RegionAttachment.C4G]=M.g,P[t.RegionAttachment.C4B]=M.b,P[t.RegionAttachment.C4A]=M.a,P[t.RegionAttachment.U4]=R[6],P[t.RegionAttachment.V4]=R[7],P},SkeletonRenderer.prototype.computeMeshVertices=function(i,o,a){var u=i.bone.skeleton.color,d=i.color,b=o.color,S=u.a*d.a*b.a,C=a?S:1,M=this.tempColor;M.set(u.r*d.r*b.r*C,u.g*d.g*b.g*C,u.b*d.b*b.b*C,S);var P=o.worldVerticesLength/2;this.vertices.length<o.worldVerticesLength&&(this.vertices=t.Utils.newFloatArray(o.worldVerticesLength));var R=this.vertices;o.computeWorldVertices(i,0,o.worldVerticesLength,R,0,SkeletonRenderer.VERTEX_SIZE);for(var O=o.uvs,B=0,N=P,Y=0,G=2;B<N;B++)R[G++]=M.r,R[G++]=M.g,R[G++]=M.b,R[G++]=M.a,R[G++]=O[Y++],R[G++]=O[Y++],G+=2;return R},SkeletonRenderer.QUAD_TRIANGLES=[0,1,2,2,3,0],SkeletonRenderer.VERTEX_SIZE=8,SkeletonRenderer}(),i.SkeletonRenderer=o}(a||(a={})),function(t){var i,o;i=t.webgl||(t.webgl={}),o=function(i){function AssetManager(o,a){return void 0===a&&(a=""),i.call(this,(function(i){return new t.webgl.GLTexture(o,i)}),a)||this}return u(AssetManager,i),AssetManager}(t.AssetManager),i.AssetManager=o}(a||(a={})),function(t){var i,o;i=t.webgl||(t.webgl={}),o=function(){function OrthoCamera(t,o){this.position=new i.Vector3(0,0,0),this.direction=new i.Vector3(0,0,-1),this.up=new i.Vector3(0,1,0),this.near=0,this.far=100,this.zoom=1,this.viewportWidth=0,this.viewportHeight=0,this.projectionView=new i.Matrix4,this.inverseProjectionView=new i.Matrix4,this.projection=new i.Matrix4,this.view=new i.Matrix4,this.tmp=new i.Vector3,this.viewportWidth=t,this.viewportHeight=o,this.update()}return OrthoCamera.prototype.update=function(){var t=this.projection,i=this.view,o=this.projectionView,a=this.inverseProjectionView,u=this.zoom,d=this.viewportWidth,b=this.viewportHeight;t.ortho(u*(-d/2),u*(d/2),u*(-b/2),u*(b/2),this.near,this.far),i.lookAt(this.position,this.direction,this.up),o.set(t.values),o.multiply(i),a.set(o.values).invert()},OrthoCamera.prototype.screenToWorld=function(t,i,o){var a=t.x,u=o-t.y-1,d=this.tmp;return d.x=2*a/i-1,d.y=2*u/o-1,d.z=2*t.z-1,d.project(this.inverseProjectionView),t.set(d.x,d.y,d.z),t},OrthoCamera.prototype.setViewport=function(t,i){this.viewportWidth=t,this.viewportHeight=i},OrthoCamera}(),i.OrthoCamera=o}(a||(a={})),function(t){var i,o;i=t.webgl||(t.webgl={}),o=function(o){function GLTexture(t,a,u){void 0===u&&(u=!1);var d=o.call(this,a)||this;return d.texture=null,d.boundUnit=0,d.useMipMaps=!1,d.context=t instanceof i.ManagedWebGLRenderingContext?t:new i.ManagedWebGLRenderingContext(t),d.useMipMaps=u,d.restore(),d.context.addRestorable(d),d}return u(GLTexture,o),GLTexture.prototype.setFilters=function(t,i){var o=this.context.gl;this.bind(),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,t),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,GLTexture.validateMagFilter(i))},GLTexture.validateMagFilter=function(i){switch(i){case t.TextureFilter.MipMap:case t.TextureFilter.MipMapLinearLinear:case t.TextureFilter.MipMapLinearNearest:case t.TextureFilter.MipMapNearestLinear:case t.TextureFilter.MipMapNearestNearest:return t.TextureFilter.Linear;default:return i}},GLTexture.prototype.setWraps=function(t,i){var o=this.context.gl;this.bind(),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,t),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,i)},GLTexture.prototype.update=function(t){var i=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),GLTexture.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL&&i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,this._image),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,t?i.LINEAR_MIPMAP_LINEAR:i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),t&&i.generateMipmap(i.TEXTURE_2D)},GLTexture.prototype.restore=function(){this.texture=null,this.update(this.useMipMaps)},GLTexture.prototype.bind=function(t){void 0===t&&(t=0);var i=this.context.gl;this.boundUnit=t,i.activeTexture(i.TEXTURE0+t),i.bindTexture(i.TEXTURE_2D,this.texture)},GLTexture.prototype.unbind=function(){var t=this.context.gl;t.activeTexture(t.TEXTURE0+this.boundUnit),t.bindTexture(t.TEXTURE_2D,null)},GLTexture.prototype.dispose=function(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture)},GLTexture.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL=!1,GLTexture}(t.Texture),i.GLTexture=o}(a||(a={})),function(t){!function(t){t.M00=0,t.M01=4,t.M02=8,t.M03=12,t.M10=1,t.M11=5,t.M12=9,t.M13=13,t.M20=2,t.M21=6,t.M22=10,t.M23=14,t.M30=3,t.M31=7,t.M32=11,t.M33=15;var i=function(){function Matrix4(){this.temp=new Float32Array(16),this.values=new Float32Array(16);var i=this.values;i[t.M00]=1,i[t.M11]=1,i[t.M22]=1,i[t.M33]=1}return Matrix4.prototype.set=function(t){return this.values.set(t),this},Matrix4.prototype.transpose=function(){var i=this.temp,o=this.values;return i[t.M00]=o[t.M00],i[t.M01]=o[t.M10],i[t.M02]=o[t.M20],i[t.M03]=o[t.M30],i[t.M10]=o[t.M01],i[t.M11]=o[t.M11],i[t.M12]=o[t.M21],i[t.M13]=o[t.M31],i[t.M20]=o[t.M02],i[t.M21]=o[t.M12],i[t.M22]=o[t.M22],i[t.M23]=o[t.M32],i[t.M30]=o[t.M03],i[t.M31]=o[t.M13],i[t.M32]=o[t.M23],i[t.M33]=o[t.M33],this.set(i)},Matrix4.prototype.identity=function(){var i=this.values;return i[t.M00]=1,i[t.M01]=0,i[t.M02]=0,i[t.M03]=0,i[t.M10]=0,i[t.M11]=1,i[t.M12]=0,i[t.M13]=0,i[t.M20]=0,i[t.M21]=0,i[t.M22]=1,i[t.M23]=0,i[t.M30]=0,i[t.M31]=0,i[t.M32]=0,i[t.M33]=1,this},Matrix4.prototype.invert=function(){var i=this.values,o=this.temp,a=i[t.M30]*i[t.M21]*i[t.M12]*i[t.M03]-i[t.M20]*i[t.M31]*i[t.M12]*i[t.M03]-i[t.M30]*i[t.M11]*i[t.M22]*i[t.M03]+i[t.M10]*i[t.M31]*i[t.M22]*i[t.M03]+i[t.M20]*i[t.M11]*i[t.M32]*i[t.M03]-i[t.M10]*i[t.M21]*i[t.M32]*i[t.M03]-i[t.M30]*i[t.M21]*i[t.M02]*i[t.M13]+i[t.M20]*i[t.M31]*i[t.M02]*i[t.M13]+i[t.M30]*i[t.M01]*i[t.M22]*i[t.M13]-i[t.M00]*i[t.M31]*i[t.M22]*i[t.M13]-i[t.M20]*i[t.M01]*i[t.M32]*i[t.M13]+i[t.M00]*i[t.M21]*i[t.M32]*i[t.M13]+i[t.M30]*i[t.M11]*i[t.M02]*i[t.M23]-i[t.M10]*i[t.M31]*i[t.M02]*i[t.M23]-i[t.M30]*i[t.M01]*i[t.M12]*i[t.M23]+i[t.M00]*i[t.M31]*i[t.M12]*i[t.M23]+i[t.M10]*i[t.M01]*i[t.M32]*i[t.M23]-i[t.M00]*i[t.M11]*i[t.M32]*i[t.M23]-i[t.M20]*i[t.M11]*i[t.M02]*i[t.M33]+i[t.M10]*i[t.M21]*i[t.M02]*i[t.M33]+i[t.M20]*i[t.M01]*i[t.M12]*i[t.M33]-i[t.M00]*i[t.M21]*i[t.M12]*i[t.M33]-i[t.M10]*i[t.M01]*i[t.M22]*i[t.M33]+i[t.M00]*i[t.M11]*i[t.M22]*i[t.M33];if(0==a)throw new Error("non-invertible matrix");var u=1/a;return o[t.M00]=i[t.M12]*i[t.M23]*i[t.M31]-i[t.M13]*i[t.M22]*i[t.M31]+i[t.M13]*i[t.M21]*i[t.M32]-i[t.M11]*i[t.M23]*i[t.M32]-i[t.M12]*i[t.M21]*i[t.M33]+i[t.M11]*i[t.M22]*i[t.M33],o[t.M01]=i[t.M03]*i[t.M22]*i[t.M31]-i[t.M02]*i[t.M23]*i[t.M31]-i[t.M03]*i[t.M21]*i[t.M32]+i[t.M01]*i[t.M23]*i[t.M32]+i[t.M02]*i[t.M21]*i[t.M33]-i[t.M01]*i[t.M22]*i[t.M33],o[t.M02]=i[t.M02]*i[t.M13]*i[t.M31]-i[t.M03]*i[t.M12]*i[t.M31]+i[t.M03]*i[t.M11]*i[t.M32]-i[t.M01]*i[t.M13]*i[t.M32]-i[t.M02]*i[t.M11]*i[t.M33]+i[t.M01]*i[t.M12]*i[t.M33],o[t.M03]=i[t.M03]*i[t.M12]*i[t.M21]-i[t.M02]*i[t.M13]*i[t.M21]-i[t.M03]*i[t.M11]*i[t.M22]+i[t.M01]*i[t.M13]*i[t.M22]+i[t.M02]*i[t.M11]*i[t.M23]-i[t.M01]*i[t.M12]*i[t.M23],o[t.M10]=i[t.M13]*i[t.M22]*i[t.M30]-i[t.M12]*i[t.M23]*i[t.M30]-i[t.M13]*i[t.M20]*i[t.M32]+i[t.M10]*i[t.M23]*i[t.M32]+i[t.M12]*i[t.M20]*i[t.M33]-i[t.M10]*i[t.M22]*i[t.M33],o[t.M11]=i[t.M02]*i[t.M23]*i[t.M30]-i[t.M03]*i[t.M22]*i[t.M30]+i[t.M03]*i[t.M20]*i[t.M32]-i[t.M00]*i[t.M23]*i[t.M32]-i[t.M02]*i[t.M20]*i[t.M33]+i[t.M00]*i[t.M22]*i[t.M33],o[t.M12]=i[t.M03]*i[t.M12]*i[t.M30]-i[t.M02]*i[t.M13]*i[t.M30]-i[t.M03]*i[t.M10]*i[t.M32]+i[t.M00]*i[t.M13]*i[t.M32]+i[t.M02]*i[t.M10]*i[t.M33]-i[t.M00]*i[t.M12]*i[t.M33],o[t.M13]=i[t.M02]*i[t.M13]*i[t.M20]-i[t.M03]*i[t.M12]*i[t.M20]+i[t.M03]*i[t.M10]*i[t.M22]-i[t.M00]*i[t.M13]*i[t.M22]-i[t.M02]*i[t.M10]*i[t.M23]+i[t.M00]*i[t.M12]*i[t.M23],o[t.M20]=i[t.M11]*i[t.M23]*i[t.M30]-i[t.M13]*i[t.M21]*i[t.M30]+i[t.M13]*i[t.M20]*i[t.M31]-i[t.M10]*i[t.M23]*i[t.M31]-i[t.M11]*i[t.M20]*i[t.M33]+i[t.M10]*i[t.M21]*i[t.M33],o[t.M21]=i[t.M03]*i[t.M21]*i[t.M30]-i[t.M01]*i[t.M23]*i[t.M30]-i[t.M03]*i[t.M20]*i[t.M31]+i[t.M00]*i[t.M23]*i[t.M31]+i[t.M01]*i[t.M20]*i[t.M33]-i[t.M00]*i[t.M21]*i[t.M33],o[t.M22]=i[t.M01]*i[t.M13]*i[t.M30]-i[t.M03]*i[t.M11]*i[t.M30]+i[t.M03]*i[t.M10]*i[t.M31]-i[t.M00]*i[t.M13]*i[t.M31]-i[t.M01]*i[t.M10]*i[t.M33]+i[t.M00]*i[t.M11]*i[t.M33],o[t.M23]=i[t.M03]*i[t.M11]*i[t.M20]-i[t.M01]*i[t.M13]*i[t.M20]-i[t.M03]*i[t.M10]*i[t.M21]+i[t.M00]*i[t.M13]*i[t.M21]+i[t.M01]*i[t.M10]*i[t.M23]-i[t.M00]*i[t.M11]*i[t.M23],o[t.M30]=i[t.M12]*i[t.M21]*i[t.M30]-i[t.M11]*i[t.M22]*i[t.M30]-i[t.M12]*i[t.M20]*i[t.M31]+i[t.M10]*i[t.M22]*i[t.M31]+i[t.M11]*i[t.M20]*i[t.M32]-i[t.M10]*i[t.M21]*i[t.M32],o[t.M31]=i[t.M01]*i[t.M22]*i[t.M30]-i[t.M02]*i[t.M21]*i[t.M30]+i[t.M02]*i[t.M20]*i[t.M31]-i[t.M00]*i[t.M22]*i[t.M31]-i[t.M01]*i[t.M20]*i[t.M32]+i[t.M00]*i[t.M21]*i[t.M32],o[t.M32]=i[t.M02]*i[t.M11]*i[t.M30]-i[t.M01]*i[t.M12]*i[t.M30]-i[t.M02]*i[t.M10]*i[t.M31]+i[t.M00]*i[t.M12]*i[t.M31]+i[t.M01]*i[t.M10]*i[t.M32]-i[t.M00]*i[t.M11]*i[t.M32],o[t.M33]=i[t.M01]*i[t.M12]*i[t.M20]-i[t.M02]*i[t.M11]*i[t.M20]+i[t.M02]*i[t.M10]*i[t.M21]-i[t.M00]*i[t.M12]*i[t.M21]-i[t.M01]*i[t.M10]*i[t.M22]+i[t.M00]*i[t.M11]*i[t.M22],i[t.M00]=o[t.M00]*u,i[t.M01]=o[t.M01]*u,i[t.M02]=o[t.M02]*u,i[t.M03]=o[t.M03]*u,i[t.M10]=o[t.M10]*u,i[t.M11]=o[t.M11]*u,i[t.M12]=o[t.M12]*u,i[t.M13]=o[t.M13]*u,i[t.M20]=o[t.M20]*u,i[t.M21]=o[t.M21]*u,i[t.M22]=o[t.M22]*u,i[t.M23]=o[t.M23]*u,i[t.M30]=o[t.M30]*u,i[t.M31]=o[t.M31]*u,i[t.M32]=o[t.M32]*u,i[t.M33]=o[t.M33]*u,this},Matrix4.prototype.determinant=function(){var i=this.values;return i[t.M30]*i[t.M21]*i[t.M12]*i[t.M03]-i[t.M20]*i[t.M31]*i[t.M12]*i[t.M03]-i[t.M30]*i[t.M11]*i[t.M22]*i[t.M03]+i[t.M10]*i[t.M31]*i[t.M22]*i[t.M03]+i[t.M20]*i[t.M11]*i[t.M32]*i[t.M03]-i[t.M10]*i[t.M21]*i[t.M32]*i[t.M03]-i[t.M30]*i[t.M21]*i[t.M02]*i[t.M13]+i[t.M20]*i[t.M31]*i[t.M02]*i[t.M13]+i[t.M30]*i[t.M01]*i[t.M22]*i[t.M13]-i[t.M00]*i[t.M31]*i[t.M22]*i[t.M13]-i[t.M20]*i[t.M01]*i[t.M32]*i[t.M13]+i[t.M00]*i[t.M21]*i[t.M32]*i[t.M13]+i[t.M30]*i[t.M11]*i[t.M02]*i[t.M23]-i[t.M10]*i[t.M31]*i[t.M02]*i[t.M23]-i[t.M30]*i[t.M01]*i[t.M12]*i[t.M23]+i[t.M00]*i[t.M31]*i[t.M12]*i[t.M23]+i[t.M10]*i[t.M01]*i[t.M32]*i[t.M23]-i[t.M00]*i[t.M11]*i[t.M32]*i[t.M23]-i[t.M20]*i[t.M11]*i[t.M02]*i[t.M33]+i[t.M10]*i[t.M21]*i[t.M02]*i[t.M33]+i[t.M20]*i[t.M01]*i[t.M12]*i[t.M33]-i[t.M00]*i[t.M21]*i[t.M12]*i[t.M33]-i[t.M10]*i[t.M01]*i[t.M22]*i[t.M33]+i[t.M00]*i[t.M11]*i[t.M22]*i[t.M33]},Matrix4.prototype.translate=function(i,o,a){var u=this.values;return u[t.M03]+=i,u[t.M13]+=o,u[t.M23]+=a,this},Matrix4.prototype.copy=function(){return(new Matrix4).set(this.values)},Matrix4.prototype.projection=function(i,o,a,u){this.identity();var d=1/Math.tan(a*(Math.PI/180)/2),b=(o+i)/(i-o),S=2*o*i/(i-o),C=this.values;return C[t.M00]=d/u,C[t.M10]=0,C[t.M20]=0,C[t.M30]=0,C[t.M01]=0,C[t.M11]=d,C[t.M21]=0,C[t.M31]=0,C[t.M02]=0,C[t.M12]=0,C[t.M22]=b,C[t.M32]=-1,C[t.M03]=0,C[t.M13]=0,C[t.M23]=S,C[t.M33]=0,this},Matrix4.prototype.ortho2d=function(t,i,o,a){return this.ortho(t,t+o,i,i+a,0,1)},Matrix4.prototype.ortho=function(i,o,a,u,d,b){this.identity();var S=2/(o-i),C=2/(u-a),M=-2/(b-d),P=-(o+i)/(o-i),R=-(u+a)/(u-a),O=-(b+d)/(b-d),B=this.values;return B[t.M00]=S,B[t.M10]=0,B[t.M20]=0,B[t.M30]=0,B[t.M01]=0,B[t.M11]=C,B[t.M21]=0,B[t.M31]=0,B[t.M02]=0,B[t.M12]=0,B[t.M22]=M,B[t.M32]=0,B[t.M03]=P,B[t.M13]=R,B[t.M23]=O,B[t.M33]=1,this},Matrix4.prototype.multiply=function(i){var o=this.temp,a=this.values,u=i.values;return o[t.M00]=a[t.M00]*u[t.M00]+a[t.M01]*u[t.M10]+a[t.M02]*u[t.M20]+a[t.M03]*u[t.M30],o[t.M01]=a[t.M00]*u[t.M01]+a[t.M01]*u[t.M11]+a[t.M02]*u[t.M21]+a[t.M03]*u[t.M31],o[t.M02]=a[t.M00]*u[t.M02]+a[t.M01]*u[t.M12]+a[t.M02]*u[t.M22]+a[t.M03]*u[t.M32],o[t.M03]=a[t.M00]*u[t.M03]+a[t.M01]*u[t.M13]+a[t.M02]*u[t.M23]+a[t.M03]*u[t.M33],o[t.M10]=a[t.M10]*u[t.M00]+a[t.M11]*u[t.M10]+a[t.M12]*u[t.M20]+a[t.M13]*u[t.M30],o[t.M11]=a[t.M10]*u[t.M01]+a[t.M11]*u[t.M11]+a[t.M12]*u[t.M21]+a[t.M13]*u[t.M31],o[t.M12]=a[t.M10]*u[t.M02]+a[t.M11]*u[t.M12]+a[t.M12]*u[t.M22]+a[t.M13]*u[t.M32],o[t.M13]=a[t.M10]*u[t.M03]+a[t.M11]*u[t.M13]+a[t.M12]*u[t.M23]+a[t.M13]*u[t.M33],o[t.M20]=a[t.M20]*u[t.M00]+a[t.M21]*u[t.M10]+a[t.M22]*u[t.M20]+a[t.M23]*u[t.M30],o[t.M21]=a[t.M20]*u[t.M01]+a[t.M21]*u[t.M11]+a[t.M22]*u[t.M21]+a[t.M23]*u[t.M31],o[t.M22]=a[t.M20]*u[t.M02]+a[t.M21]*u[t.M12]+a[t.M22]*u[t.M22]+a[t.M23]*u[t.M32],o[t.M23]=a[t.M20]*u[t.M03]+a[t.M21]*u[t.M13]+a[t.M22]*u[t.M23]+a[t.M23]*u[t.M33],o[t.M30]=a[t.M30]*u[t.M00]+a[t.M31]*u[t.M10]+a[t.M32]*u[t.M20]+a[t.M33]*u[t.M30],o[t.M31]=a[t.M30]*u[t.M01]+a[t.M31]*u[t.M11]+a[t.M32]*u[t.M21]+a[t.M33]*u[t.M31],o[t.M32]=a[t.M30]*u[t.M02]+a[t.M31]*u[t.M12]+a[t.M32]*u[t.M22]+a[t.M33]*u[t.M32],o[t.M33]=a[t.M30]*u[t.M03]+a[t.M31]*u[t.M13]+a[t.M32]*u[t.M23]+a[t.M33]*u[t.M33],this.set(this.temp)},Matrix4.prototype.multiplyLeft=function(i){var o=this.temp,a=this.values,u=i.values;return o[t.M00]=u[t.M00]*a[t.M00]+u[t.M01]*a[t.M10]+u[t.M02]*a[t.M20]+u[t.M03]*a[t.M30],o[t.M01]=u[t.M00]*a[t.M01]+u[t.M01]*a[t.M11]+u[t.M02]*a[t.M21]+u[t.M03]*a[t.M31],o[t.M02]=u[t.M00]*a[t.M02]+u[t.M01]*a[t.M12]+u[t.M02]*a[t.M22]+u[t.M03]*a[t.M32],o[t.M03]=u[t.M00]*a[t.M03]+u[t.M01]*a[t.M13]+u[t.M02]*a[t.M23]+u[t.M03]*a[t.M33],o[t.M10]=u[t.M10]*a[t.M00]+u[t.M11]*a[t.M10]+u[t.M12]*a[t.M20]+u[t.M13]*a[t.M30],o[t.M11]=u[t.M10]*a[t.M01]+u[t.M11]*a[t.M11]+u[t.M12]*a[t.M21]+u[t.M13]*a[t.M31],o[t.M12]=u[t.M10]*a[t.M02]+u[t.M11]*a[t.M12]+u[t.M12]*a[t.M22]+u[t.M13]*a[t.M32],o[t.M13]=u[t.M10]*a[t.M03]+u[t.M11]*a[t.M13]+u[t.M12]*a[t.M23]+u[t.M13]*a[t.M33],o[t.M20]=u[t.M20]*a[t.M00]+u[t.M21]*a[t.M10]+u[t.M22]*a[t.M20]+u[t.M23]*a[t.M30],o[t.M21]=u[t.M20]*a[t.M01]+u[t.M21]*a[t.M11]+u[t.M22]*a[t.M21]+u[t.M23]*a[t.M31],o[t.M22]=u[t.M20]*a[t.M02]+u[t.M21]*a[t.M12]+u[t.M22]*a[t.M22]+u[t.M23]*a[t.M32],o[t.M23]=u[t.M20]*a[t.M03]+u[t.M21]*a[t.M13]+u[t.M22]*a[t.M23]+u[t.M23]*a[t.M33],o[t.M30]=u[t.M30]*a[t.M00]+u[t.M31]*a[t.M10]+u[t.M32]*a[t.M20]+u[t.M33]*a[t.M30],o[t.M31]=u[t.M30]*a[t.M01]+u[t.M31]*a[t.M11]+u[t.M32]*a[t.M21]+u[t.M33]*a[t.M31],o[t.M32]=u[t.M30]*a[t.M02]+u[t.M31]*a[t.M12]+u[t.M32]*a[t.M22]+u[t.M33]*a[t.M32],o[t.M33]=u[t.M30]*a[t.M03]+u[t.M31]*a[t.M13]+u[t.M32]*a[t.M23]+u[t.M33]*a[t.M33],this.set(this.temp)},Matrix4.prototype.lookAt=function(i,o,a){Matrix4.initTemps();var u=Matrix4.xAxis,d=Matrix4.yAxis,b=Matrix4.zAxis;b.setFrom(o).normalize(),u.setFrom(o).normalize(),u.cross(a).normalize(),d.setFrom(u).cross(b).normalize(),this.identity();var S=this.values;return S[t.M00]=u.x,S[t.M01]=u.y,S[t.M02]=u.z,S[t.M10]=d.x,S[t.M11]=d.y,S[t.M12]=d.z,S[t.M20]=-b.x,S[t.M21]=-b.y,S[t.M22]=-b.z,Matrix4.tmpMatrix.identity(),Matrix4.tmpMatrix.values[t.M03]=-i.x,Matrix4.tmpMatrix.values[t.M13]=-i.y,Matrix4.tmpMatrix.values[t.M23]=-i.z,this.multiply(Matrix4.tmpMatrix),this},Matrix4.initTemps=function(){null===Matrix4.xAxis&&(Matrix4.xAxis=new t.Vector3),null===Matrix4.yAxis&&(Matrix4.yAxis=new t.Vector3),null===Matrix4.zAxis&&(Matrix4.zAxis=new t.Vector3)},Matrix4.xAxis=null,Matrix4.yAxis=null,Matrix4.zAxis=null,Matrix4.tmpMatrix=new Matrix4,Matrix4}();t.Matrix4=i}(t.webgl||(t.webgl={}))}(a||(a={})),function(t){!function(t){var i=function(){function Mesh(i,o,a,u){this.attributes=o,this.verticesLength=0,this.dirtyVertices=!1,this.indicesLength=0,this.dirtyIndices=!1,this.elementsPerVertex=0,this.context=i instanceof t.ManagedWebGLRenderingContext?i:new t.ManagedWebGLRenderingContext(i),this.elementsPerVertex=0;for(var d=0;d<o.length;d++)this.elementsPerVertex+=o[d].numElements;this.vertices=new Float32Array(a*this.elementsPerVertex),this.indices=new Uint16Array(u),this.context.addRestorable(this)}return Mesh.prototype.getAttributes=function(){return this.attributes},Mesh.prototype.maxVertices=function(){return this.vertices.length/this.elementsPerVertex},Mesh.prototype.numVertices=function(){return this.verticesLength/this.elementsPerVertex},Mesh.prototype.setVerticesLength=function(t){this.dirtyVertices=!0,this.verticesLength=t},Mesh.prototype.getVertices=function(){return this.vertices},Mesh.prototype.maxIndices=function(){return this.indices.length},Mesh.prototype.numIndices=function(){return this.indicesLength},Mesh.prototype.setIndicesLength=function(t){this.dirtyIndices=!0,this.indicesLength=t},Mesh.prototype.getIndices=function(){return this.indices},Mesh.prototype.getVertexSizeInFloats=function(){for(var t=0,i=0;i<this.attributes.length;i++){t+=this.attributes[i].numElements}return t},Mesh.prototype.setVertices=function(t){if(this.dirtyVertices=!0,t.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(t,0),this.verticesLength=t.length},Mesh.prototype.setIndices=function(t){if(this.dirtyIndices=!0,t.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(t,0),this.indicesLength=t.length},Mesh.prototype.draw=function(t,i){this.drawWithOffset(t,i,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex)},Mesh.prototype.drawWithOffset=function(t,i,o,a){var u=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(t),this.indicesLength>0?u.drawElements(i,a,u.UNSIGNED_SHORT,2*o):u.drawArrays(i,o,a),this.unbind(t)},Mesh.prototype.bind=function(t){var i=this.context.gl;i.bindBuffer(i.ARRAY_BUFFER,this.verticesBuffer);for(var o=0,a=0;a<this.attributes.length;a++){var u=this.attributes[a],d=t.getAttributeLocation(u.name);i.enableVertexAttribArray(d),i.vertexAttribPointer(d,u.numElements,i.FLOAT,!1,4*this.elementsPerVertex,4*o),o+=u.numElements}this.indicesLength>0&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.indicesBuffer)},Mesh.prototype.unbind=function(t){for(var i=this.context.gl,o=0;o<this.attributes.length;o++){var a=this.attributes[o],u=t.getAttributeLocation(a.name);i.disableVertexAttribArray(u)}i.bindBuffer(i.ARRAY_BUFFER,null),this.indicesLength>0&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null)},Mesh.prototype.update=function(){var t=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.verticesBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),t.DYNAMIC_DRAW),this.dirtyVertices=!1),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),t.DYNAMIC_DRAW),this.dirtyIndices=!1)},Mesh.prototype.restore=function(){this.verticesBuffer=null,this.indicesBuffer=null,this.update()},Mesh.prototype.dispose=function(){this.context.removeRestorable(this);var t=this.context.gl;t.deleteBuffer(this.verticesBuffer),t.deleteBuffer(this.indicesBuffer)},Mesh}();t.Mesh=i;var o=function o(t,i,a){this.name=t,this.type=i,this.numElements=a};t.VertexAttribute=o;var a=function(i){function Position2Attribute(){return i.call(this,t.Shader.POSITION,C.Float,2)||this}return u(Position2Attribute,i),Position2Attribute}(o);t.Position2Attribute=a;var d=function(i){function Position3Attribute(){return i.call(this,t.Shader.POSITION,C.Float,3)||this}return u(Position3Attribute,i),Position3Attribute}(o);t.Position3Attribute=d;var b=function(i){function TexCoordAttribute(o){return void 0===o&&(o=0),i.call(this,t.Shader.TEXCOORDS+(0==o?"":o),C.Float,2)||this}return u(TexCoordAttribute,i),TexCoordAttribute}(o);t.TexCoordAttribute=b;var S=function(i){function ColorAttribute(){return i.call(this,t.Shader.COLOR,C.Float,4)||this}return u(ColorAttribute,i),ColorAttribute}(o);t.ColorAttribute=S;var C,M=function(i){function Color2Attribute(){return i.call(this,t.Shader.COLOR2,C.Float,4)||this}return u(Color2Attribute,i),Color2Attribute}(o);t.Color2Attribute=M,function(t){t[t.Float=0]="Float"}(C=t.VertexAttributeType||(t.VertexAttributeType={}))}(t.webgl||(t.webgl={}))}(a||(a={})),function(t){var i,o;i=t.webgl||(t.webgl={}),o=function(){function PolygonBatcher(t,o,a){if(void 0===o&&(o=!0),void 0===a&&(a=10920),this.isDrawing=!1,this.shader=null,this.lastTexture=null,this.verticesLength=0,this.indicesLength=0,a>10920)throw new Error("Can't have more than 10920 triangles per batch: "+a);this.context=t instanceof i.ManagedWebGLRenderingContext?t:new i.ManagedWebGLRenderingContext(t);var u=o?[new i.Position2Attribute,new i.ColorAttribute,new i.TexCoordAttribute,new i.Color2Attribute]:[new i.Position2Attribute,new i.ColorAttribute,new i.TexCoordAttribute];this.mesh=new i.Mesh(t,u,a,3*a),this.srcBlend=this.context.gl.SRC_ALPHA,this.dstBlend=this.context.gl.ONE_MINUS_SRC_ALPHA}return PolygonBatcher.prototype.begin=function(t){var i=this.context.gl;if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=t,this.lastTexture=null,this.isDrawing=!0,i.enable(i.BLEND),i.blendFunc(this.srcBlend,this.dstBlend)},PolygonBatcher.prototype.setBlendMode=function(t,i){var o=this.context.gl;this.srcBlend=t,this.dstBlend=i,this.isDrawing&&(this.flush(),o.blendFunc(this.srcBlend,this.dstBlend))},PolygonBatcher.prototype.draw=function(t,i,o){t!=this.lastTexture?(this.flush(),this.lastTexture=t):(this.verticesLength+i.length>this.mesh.getVertices().length||this.indicesLength+o.length>this.mesh.getIndices().length)&&this.flush();var a=this.mesh.numVertices();this.mesh.getVertices().set(i,this.verticesLength),this.verticesLength+=i.length,this.mesh.setVerticesLength(this.verticesLength);for(var u=this.mesh.getIndices(),d=this.indicesLength,b=0;b<o.length;d++,b++)u[d]=o[b]+a;this.indicesLength+=o.length,this.mesh.setIndicesLength(this.indicesLength)},PolygonBatcher.prototype.flush=function(){var t=this.context.gl;0!=this.verticesLength&&(this.lastTexture.bind(),this.mesh.draw(this.shader,t.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++)},PolygonBatcher.prototype.end=function(){var t=this.context.gl;if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=!1,t.disable(t.BLEND)},PolygonBatcher.prototype.getDrawCalls=function(){return this.drawCalls},PolygonBatcher.prototype.dispose=function(){this.mesh.dispose()},PolygonBatcher}(),i.PolygonBatcher=o}(a||(a={})),function(t){var i,o,a;i=t.webgl||(t.webgl={}),a=function(){function SceneRenderer(o,a,u){void 0===u&&(u=!0),this.twoColorTint=!1,this.activeRenderer=null,this.QUAD=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],this.QUAD_TRIANGLES=[0,1,2,2,3,0],this.WHITE=new t.Color(1,1,1,1),this.canvas=o,this.context=a instanceof i.ManagedWebGLRenderingContext?a:new i.ManagedWebGLRenderingContext(a),this.twoColorTint=u,this.camera=new i.OrthoCamera(o.width,o.height),this.batcherShader=u?i.Shader.newTwoColoredTextured(this.context):i.Shader.newColoredTextured(this.context),this.batcher=new i.PolygonBatcher(this.context,u),this.shapesShader=i.Shader.newColored(this.context),this.shapes=new i.ShapeRenderer(this.context),this.skeletonRenderer=new i.SkeletonRenderer(this.context,u),this.skeletonDebugRenderer=new i.SkeletonDebugRenderer(this.context)}return SceneRenderer.prototype.begin=function(){this.camera.update(),this.enableRenderer(this.batcher)},SceneRenderer.prototype.drawSkeleton=function(t,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=-1),void 0===a&&(a=-1),this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=i,this.skeletonRenderer.draw(this.batcher,t,o,a)},SceneRenderer.prototype.drawSkeletonDebug=function(t,i,o){void 0===i&&(i=!1),void 0===o&&(o=null),this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=i,this.skeletonDebugRenderer.draw(this.shapes,t,o)},SceneRenderer.prototype.drawTexture=function(t,i,o,a,u,d){void 0===d&&(d=null),this.enableRenderer(this.batcher),null===d&&(d=this.WHITE);var b=this.QUAD,S=0;b[S++]=i,b[S++]=o,b[S++]=d.r,b[S++]=d.g,b[S++]=d.b,b[S++]=d.a,b[S++]=0,b[S++]=1,this.twoColorTint&&(b[S++]=0,b[S++]=0,b[S++]=0,b[S++]=0),b[S++]=i+a,b[S++]=o,b[S++]=d.r,b[S++]=d.g,b[S++]=d.b,b[S++]=d.a,b[S++]=1,b[S++]=1,this.twoColorTint&&(b[S++]=0,b[S++]=0,b[S++]=0,b[S++]=0),b[S++]=i+a,b[S++]=o+u,b[S++]=d.r,b[S++]=d.g,b[S++]=d.b,b[S++]=d.a,b[S++]=1,b[S++]=0,this.twoColorTint&&(b[S++]=0,b[S++]=0,b[S++]=0,b[S++]=0),b[S++]=i,b[S++]=o+u,b[S++]=d.r,b[S++]=d.g,b[S++]=d.b,b[S++]=d.a,b[S++]=0,b[S++]=0,this.twoColorTint&&(b[S++]=0,b[S++]=0,b[S++]=0,b[S++]=0),this.batcher.draw(t,b,this.QUAD_TRIANGLES)},SceneRenderer.prototype.drawTextureUV=function(t,i,o,a,u,d,b,S,C,M){void 0===M&&(M=null),this.enableRenderer(this.batcher),null===M&&(M=this.WHITE);var P=this.QUAD,R=0;P[R++]=i,P[R++]=o,P[R++]=M.r,P[R++]=M.g,P[R++]=M.b,P[R++]=M.a,P[R++]=d,P[R++]=b,this.twoColorTint&&(P[R++]=0,P[R++]=0,P[R++]=0,P[R++]=0),P[R++]=i+a,P[R++]=o,P[R++]=M.r,P[R++]=M.g,P[R++]=M.b,P[R++]=M.a,P[R++]=S,P[R++]=b,this.twoColorTint&&(P[R++]=0,P[R++]=0,P[R++]=0,P[R++]=0),P[R++]=i+a,P[R++]=o+u,P[R++]=M.r,P[R++]=M.g,P[R++]=M.b,P[R++]=M.a,P[R++]=S,P[R++]=C,this.twoColorTint&&(P[R++]=0,P[R++]=0,P[R++]=0,P[R++]=0),P[R++]=i,P[R++]=o+u,P[R++]=M.r,P[R++]=M.g,P[R++]=M.b,P[R++]=M.a,P[R++]=d,P[R++]=C,this.twoColorTint&&(P[R++]=0,P[R++]=0,P[R++]=0,P[R++]=0),this.batcher.draw(t,P,this.QUAD_TRIANGLES)},SceneRenderer.prototype.drawTextureRotated=function(i,o,a,u,d,b,S,C,M,P){void 0===M&&(M=null),this.enableRenderer(this.batcher),null===M&&(M=this.WHITE);var R=this.QUAD,O=o+b,B=a+S,N=-b,Y=-S,G=u-b,X=d-S,U=N,z=Y,V=N,W=X,H=G,j=X,q=G,Z=Y,K=0,$=0,tt=0,et=0,it=0,nt=0,rt=0,st=0;if(0!=C){var ot=t.MathUtils.cosDeg(C),at=t.MathUtils.sinDeg(C);tt=(it=ot*H-at*j)+((K=ot*U-at*z)-(rt=ot*V-at*W)),et=(nt=at*H+ot*j)+(($=at*U+ot*z)-(st=at*V+ot*W))}else K=U,$=z,rt=V,st=W,it=H,nt=j,tt=q,et=Z;K+=O,$+=B,tt+=O,et+=B,it+=O,nt+=B,rt+=O,st+=B;var ht=0;R[ht++]=K,R[ht++]=$,R[ht++]=M.r,R[ht++]=M.g,R[ht++]=M.b,R[ht++]=M.a,R[ht++]=0,R[ht++]=1,this.twoColorTint&&(R[ht++]=0,R[ht++]=0,R[ht++]=0,R[ht++]=0),R[ht++]=tt,R[ht++]=et,R[ht++]=M.r,R[ht++]=M.g,R[ht++]=M.b,R[ht++]=M.a,R[ht++]=1,R[ht++]=1,this.twoColorTint&&(R[ht++]=0,R[ht++]=0,R[ht++]=0,R[ht++]=0),R[ht++]=it,R[ht++]=nt,R[ht++]=M.r,R[ht++]=M.g,R[ht++]=M.b,R[ht++]=M.a,R[ht++]=1,R[ht++]=0,this.twoColorTint&&(R[ht++]=0,R[ht++]=0,R[ht++]=0,R[ht++]=0),R[ht++]=rt,R[ht++]=st,R[ht++]=M.r,R[ht++]=M.g,R[ht++]=M.b,R[ht++]=M.a,R[ht++]=0,R[ht++]=0,this.twoColorTint&&(R[ht++]=0,R[ht++]=0,R[ht++]=0,R[ht++]=0),this.batcher.draw(i,R,this.QUAD_TRIANGLES)},SceneRenderer.prototype.drawRegion=function(t,i,o,a,u,d,b){void 0===d&&(d=null),this.enableRenderer(this.batcher),null===d&&(d=this.WHITE);var S=this.QUAD,C=0;S[C++]=i,S[C++]=o,S[C++]=d.r,S[C++]=d.g,S[C++]=d.b,S[C++]=d.a,S[C++]=t.u,S[C++]=t.v2,this.twoColorTint&&(S[C++]=0,S[C++]=0,S[C++]=0,S[C++]=0),S[C++]=i+a,S[C++]=o,S[C++]=d.r,S[C++]=d.g,S[C++]=d.b,S[C++]=d.a,S[C++]=t.u2,S[C++]=t.v2,this.twoColorTint&&(S[C++]=0,S[C++]=0,S[C++]=0,S[C++]=0),S[C++]=i+a,S[C++]=o+u,S[C++]=d.r,S[C++]=d.g,S[C++]=d.b,S[C++]=d.a,S[C++]=t.u2,S[C++]=t.v,this.twoColorTint&&(S[C++]=0,S[C++]=0,S[C++]=0,S[C++]=0),S[C++]=i,S[C++]=o+u,S[C++]=d.r,S[C++]=d.g,S[C++]=d.b,S[C++]=d.a,S[C++]=t.u,S[C++]=t.v,this.twoColorTint&&(S[C++]=0,S[C++]=0,S[C++]=0,S[C++]=0),this.batcher.draw(t.texture,S,this.QUAD_TRIANGLES)},SceneRenderer.prototype.line=function(t,i,o,a,u,d){void 0===u&&(u=null),this.enableRenderer(this.shapes),this.shapes.line(t,i,o,a,u)},SceneRenderer.prototype.triangle=function(t,i,o,a,u,d,b,S,C,M){void 0===S&&(S=null),void 0===C&&(C=null),void 0===M&&(M=null),this.enableRenderer(this.shapes),this.shapes.triangle(t,i,o,a,u,d,b,S,C,M)},SceneRenderer.prototype.quad=function(t,i,o,a,u,d,b,S,C,M,P,R,O){void 0===M&&(M=null),void 0===P&&(P=null),void 0===R&&(R=null),void 0===O&&(O=null),this.enableRenderer(this.shapes),this.shapes.quad(t,i,o,a,u,d,b,S,C,M,P,R,O)},SceneRenderer.prototype.rect=function(t,i,o,a,u,d){void 0===d&&(d=null),this.enableRenderer(this.shapes),this.shapes.rect(t,i,o,a,u,d)},SceneRenderer.prototype.rectLine=function(t,i,o,a,u,d,b){void 0===b&&(b=null),this.enableRenderer(this.shapes),this.shapes.rectLine(t,i,o,a,u,d,b)},SceneRenderer.prototype.polygon=function(t,i,o,a){void 0===a&&(a=null),this.enableRenderer(this.shapes),this.shapes.polygon(t,i,o,a)},SceneRenderer.prototype.circle=function(t,i,o,a,u,d){void 0===u&&(u=null),void 0===d&&(d=0),this.enableRenderer(this.shapes),this.shapes.circle(t,i,o,a,u,d)},SceneRenderer.prototype.curve=function(t,i,o,a,u,d,b,S,C,M){void 0===M&&(M=null),this.enableRenderer(this.shapes),this.shapes.curve(t,i,o,a,u,d,b,S,C,M)},SceneRenderer.prototype.end=function(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null},SceneRenderer.prototype.resize=function(t){var i=this.canvas,a=i.clientWidth,u=i.clientHeight;if(i.width==a&&i.height==u||(i.width=a,i.height=u),this.context.gl.viewport(0,0,i.width,i.height),t===o.Stretch);else if(t===o.Expand)this.camera.setViewport(a,u);else if(t===o.Fit){var d=i.width,b=i.height,S=this.camera.viewportWidth,C=this.camera.viewportHeight,M=C/S<b/d?S/d:C/b;this.camera.viewportWidth=d*M,this.camera.viewportHeight=b*M}this.camera.update()},SceneRenderer.prototype.enableRenderer=function(t){this.activeRenderer!==t&&(this.end(),t instanceof i.PolygonBatcher?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(i.Shader.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):t instanceof i.ShapeRenderer?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(i.Shader.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer)},SceneRenderer.prototype.dispose=function(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose()},SceneRenderer}(),i.SceneRenderer=a,function(t){t[t.Stretch=0]="Stretch",t[t.Expand=1]="Expand",t[t.Fit=2]="Fit"}(o=i.ResizeMode||(i.ResizeMode={}))}(a||(a={})),function(t){var i,o;i=t.webgl||(t.webgl={}),o=function(){function Shader(t,o,a){this.vertexShader=o,this.fragmentShader=a,this.vs=null,this.fs=null,this.program=null,this.tmp2x2=new Float32Array(4),this.tmp3x3=new Float32Array(9),this.tmp4x4=new Float32Array(16),this.vsSource=o,this.fsSource=a,this.context=t instanceof i.ManagedWebGLRenderingContext?t:new i.ManagedWebGLRenderingContext(t),this.context.addRestorable(this),this.compile()}return Shader.prototype.getProgram=function(){return this.program},Shader.prototype.getVertexShader=function(){return this.vertexShader},Shader.prototype.getFragmentShader=function(){return this.fragmentShader},Shader.prototype.getVertexShaderSource=function(){return this.vsSource},Shader.prototype.getFragmentSource=function(){return this.fsSource},Shader.prototype.compile=function(){var t=this.context.gl;try{this.vs=this.compileShader(t.VERTEX_SHADER,this.vertexShader),this.fs=this.compileShader(t.FRAGMENT_SHADER,this.fragmentShader),this.program=this.compileProgram(this.vs,this.fs)}catch(i){throw this.dispose(),i}},Shader.prototype.compileShader=function(t,i){var o=this.context.gl,a=o.createShader(t);if(o.shaderSource(a,i),o.compileShader(a),!o.getShaderParameter(a,o.COMPILE_STATUS)){var u="Couldn't compile shader: "+o.getShaderInfoLog(a);if(o.deleteShader(a),!o.isContextLost())throw new Error(u)}return a},Shader.prototype.compileProgram=function(t,i){var o=this.context.gl,a=o.createProgram();if(o.attachShader(a,t),o.attachShader(a,i),o.linkProgram(a),!o.getProgramParameter(a,o.LINK_STATUS)){var u="Couldn't compile shader program: "+o.getProgramInfoLog(a);if(o.deleteProgram(a),!o.isContextLost())throw new Error(u)}return a},Shader.prototype.restore=function(){this.compile()},Shader.prototype.bind=function(){this.context.gl.useProgram(this.program)},Shader.prototype.unbind=function(){this.context.gl.useProgram(null)},Shader.prototype.setUniformi=function(t,i){this.context.gl.uniform1i(this.getUniformLocation(t),i)},Shader.prototype.setUniformf=function(t,i){this.context.gl.uniform1f(this.getUniformLocation(t),i)},Shader.prototype.setUniform2f=function(t,i,o){this.context.gl.uniform2f(this.getUniformLocation(t),i,o)},Shader.prototype.setUniform3f=function(t,i,o,a){this.context.gl.uniform3f(this.getUniformLocation(t),i,o,a)},Shader.prototype.setUniform4f=function(t,i,o,a,u){this.context.gl.uniform4f(this.getUniformLocation(t),i,o,a,u)},Shader.prototype.setUniform2x2f=function(t,i){var o=this.context.gl;this.tmp2x2.set(i),o.uniformMatrix2fv(this.getUniformLocation(t),!1,this.tmp2x2)},Shader.prototype.setUniform3x3f=function(t,i){var o=this.context.gl;this.tmp3x3.set(i),o.uniformMatrix3fv(this.getUniformLocation(t),!1,this.tmp3x3)},Shader.prototype.setUniform4x4f=function(t,i){var o=this.context.gl;this.tmp4x4.set(i),o.uniformMatrix4fv(this.getUniformLocation(t),!1,this.tmp4x4)},Shader.prototype.getUniformLocation=function(t){var i=this.context.gl,o=i.getUniformLocation(this.program,t);if(!o&&!i.isContextLost())throw new Error("Couldn't find location for uniform "+t);return o},Shader.prototype.getAttributeLocation=function(t){var i=this.context.gl,o=i.getAttribLocation(this.program,t);if(-1==o&&!i.isContextLost())throw new Error("Couldn't find location for attribute "+t);return o},Shader.prototype.dispose=function(){this.context.removeRestorable(this);var t=this.context.gl;this.vs&&(t.deleteShader(this.vs),this.vs=null),this.fs&&(t.deleteShader(this.fs),this.fs=null),this.program&&(t.deleteProgram(this.program),this.program=null)},Shader.newColoredTextured=function(t){return new Shader(t,"\n\t\t\t\tattribute vec4 "+Shader.POSITION+";\n\t\t\t\tattribute vec4 "+Shader.COLOR+";\n\t\t\t\tattribute vec2 "+Shader.TEXCOORDS+";\n\t\t\t\tuniform mat4 "+Shader.MVP_MATRIX+";\n\t\t\t\tvarying vec4 v_color;\n\t\t\t\tvarying vec2 v_texCoords;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_color = "+Shader.COLOR+";\n\t\t\t\t\tv_texCoords = "+Shader.TEXCOORDS+";\n\t\t\t\t\tgl_Position = "+Shader.MVP_MATRIX+" * "+Shader.POSITION+";\n\t\t\t\t}\n\t\t\t","\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_color;\n\t\t\t\tvarying vec2 v_texCoords;\n\t\t\t\tuniform sampler2D u_texture;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tgl_FragColor = v_color * texture2D(u_texture, v_texCoords);\n\t\t\t\t}\n\t\t\t")},Shader.newTwoColoredTextured=function(t){return new Shader(t,"\n\t\t\t\tattribute vec4 "+Shader.POSITION+";\n\t\t\t\tattribute vec4 "+Shader.COLOR+";\n\t\t\t\tattribute vec4 "+Shader.COLOR2+";\n\t\t\t\tattribute vec2 "+Shader.TEXCOORDS+";\n\t\t\t\tuniform mat4 "+Shader.MVP_MATRIX+";\n\t\t\t\tvarying vec4 v_light;\n\t\t\t\tvarying vec4 v_dark;\n\t\t\t\tvarying vec2 v_texCoords;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_light = "+Shader.COLOR+";\n\t\t\t\t\tv_dark = "+Shader.COLOR2+";\n\t\t\t\t\tv_texCoords = "+Shader.TEXCOORDS+";\n\t\t\t\t\tgl_Position = "+Shader.MVP_MATRIX+" * "+Shader.POSITION+";\n\t\t\t\t}\n\t\t\t","\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_light;\n\t\t\t\tvarying LOWP vec4 v_dark;\n\t\t\t\tvarying vec2 v_texCoords;\n\t\t\t\tuniform sampler2D u_texture;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tvec4 texColor = texture2D(u_texture, v_texCoords);\n\t\t\t\t\tgl_FragColor.a = texColor.a * v_light.a;\n\t\t\t\t\tgl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;\n\t\t\t\t}\n\t\t\t")},Shader.newColored=function(t){return new Shader(t,"\n\t\t\t\tattribute vec4 "+Shader.POSITION+";\n\t\t\t\tattribute vec4 "+Shader.COLOR+";\n\t\t\t\tuniform mat4 "+Shader.MVP_MATRIX+";\n\t\t\t\tvarying vec4 v_color;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_color = "+Shader.COLOR+";\n\t\t\t\t\tgl_Position = "+Shader.MVP_MATRIX+" * "+Shader.POSITION+";\n\t\t\t\t}\n\t\t\t","\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_color;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tgl_FragColor = v_color;\n\t\t\t\t}\n\t\t\t")},Shader.MVP_MATRIX="u_projTrans",Shader.POSITION="a_position",Shader.COLOR="a_color",Shader.COLOR2="a_color2",Shader.TEXCOORDS="a_texCoords",Shader.SAMPLER="u_texture",Shader}(),i.Shader=o}(a||(a={})),function(t){var i,o,a;i=t.webgl||(t.webgl={}),a=function(){function ShapeRenderer(a,u){if(void 0===u&&(u=10920),this.isDrawing=!1,this.shapeType=o.Filled,this.color=new t.Color(1,1,1,1),this.vertexIndex=0,this.tmp=new t.Vector2,u>10920)throw new Error("Can't have more than 10920 triangles per batch: "+u);this.context=a instanceof i.ManagedWebGLRenderingContext?a:new i.ManagedWebGLRenderingContext(a),this.mesh=new i.Mesh(a,[new i.Position2Attribute,new i.ColorAttribute],u,0),this.srcBlend=this.context.gl.SRC_ALPHA,this.dstBlend=this.context.gl.ONE_MINUS_SRC_ALPHA}return ShapeRenderer.prototype.begin=function(t){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=t,this.vertexIndex=0,this.isDrawing=!0;var i=this.context.gl;i.enable(i.BLEND),i.blendFunc(this.srcBlend,this.dstBlend)},ShapeRenderer.prototype.setBlendMode=function(t,i){var o=this.context.gl;this.srcBlend=t,this.dstBlend=i,this.isDrawing&&(this.flush(),o.blendFunc(this.srcBlend,this.dstBlend))},ShapeRenderer.prototype.setColor=function(t){this.color.setFromColor(t)},ShapeRenderer.prototype.setColorWith=function(t,i,o,a){this.color.set(t,i,o,a)},ShapeRenderer.prototype.point=function(t,i,a){void 0===a&&(a=null),this.check(o.Point,1),null===a&&(a=this.color),this.vertex(t,i,a)},ShapeRenderer.prototype.line=function(t,i,a,u,d){void 0===d&&(d=null),this.check(o.Line,2),this.mesh.getVertices(),this.vertexIndex,null===d&&(d=this.color),this.vertex(t,i,d),this.vertex(a,u,d)},ShapeRenderer.prototype.triangle=function(t,i,a,u,d,b,S,C,M,P){void 0===C&&(C=null),void 0===M&&(M=null),void 0===P&&(P=null),this.check(t?o.Filled:o.Line,3),this.mesh.getVertices(),this.vertexIndex,null===C&&(C=this.color),null===M&&(M=this.color),null===P&&(P=this.color),t?(this.vertex(i,a,C),this.vertex(u,d,M),this.vertex(b,S,P)):(this.vertex(i,a,C),this.vertex(u,d,M),this.vertex(u,d,C),this.vertex(b,S,M),this.vertex(b,S,C),this.vertex(i,a,M))},ShapeRenderer.prototype.quad=function(t,i,a,u,d,b,S,C,M,P,R,O,B){void 0===P&&(P=null),void 0===R&&(R=null),void 0===O&&(O=null),void 0===B&&(B=null),this.check(t?o.Filled:o.Line,3),this.mesh.getVertices(),this.vertexIndex,null===P&&(P=this.color),null===R&&(R=this.color),null===O&&(O=this.color),null===B&&(B=this.color),t?(this.vertex(i,a,P),this.vertex(u,d,R),this.vertex(b,S,O),this.vertex(b,S,O),this.vertex(C,M,B),this.vertex(i,a,P)):(this.vertex(i,a,P),this.vertex(u,d,R),this.vertex(u,d,R),this.vertex(b,S,O),this.vertex(b,S,O),this.vertex(C,M,B),this.vertex(C,M,B),this.vertex(i,a,P))},ShapeRenderer.prototype.rect=function(t,i,o,a,u,d){void 0===d&&(d=null),this.quad(t,i,o,i+a,o,i+a,o+u,i,o+u,d,d,d,d)},ShapeRenderer.prototype.rectLine=function(t,i,a,u,d,b,S){void 0===S&&(S=null),this.check(t?o.Filled:o.Line,8),null===S&&(S=this.color);var C=this.tmp.set(d-a,i-u);C.normalize(),b*=.5;var M=C.x*b,P=C.y*b;t?(this.vertex(i+M,a+P,S),this.vertex(i-M,a-P,S),this.vertex(u+M,d+P,S),this.vertex(u-M,d-P,S),this.vertex(u+M,d+P,S),this.vertex(i-M,a-P,S)):(this.vertex(i+M,a+P,S),this.vertex(i-M,a-P,S),this.vertex(u+M,d+P,S),this.vertex(u-M,d-P,S),this.vertex(u+M,d+P,S),this.vertex(i+M,a+P,S),this.vertex(u-M,d-P,S),this.vertex(i-M,a-P,S))},ShapeRenderer.prototype.x=function(t,i,o){this.line(t-o,i-o,t+o,i+o),this.line(t-o,i+o,t+o,i-o)},ShapeRenderer.prototype.polygon=function(t,i,a,u){if(void 0===u&&(u=null),a<3)throw new Error("Polygon must contain at least 3 vertices");this.check(o.Line,2*a),null===u&&(u=this.color),this.mesh.getVertices(),this.vertexIndex,a<<=1;for(var d=t[i<<=1],b=t[i+1],S=i+a,C=i,M=i+a-2;C<M;C+=2){var P=t[C],R=t[C+1],O=0,B=0;C+2>=S?(O=d,B=b):(O=t[C+2],B=t[C+3]),this.vertex(P,R,u),this.vertex(O,B,u)}},ShapeRenderer.prototype.circle=function(i,a,u,d,b,S){if(void 0===b&&(b=null),void 0===S&&(S=0),0===S&&(S=Math.max(1,6*t.MathUtils.cbrt(d)|0)),S<=0)throw new Error("segments must be > 0.");null===b&&(b=this.color);var C=2*t.MathUtils.PI/S,M=Math.cos(C),P=Math.sin(C),R=d,O=0;if(i){for(this.check(o.Filled,3*S+3),S--,N=0;N<S;N++){this.vertex(a,u,b),this.vertex(a+R,u+O,b);var B=R;R=M*R-P*O,O=P*B+M*O,this.vertex(a+R,u+O,b)}this.vertex(a,u,b),this.vertex(a+R,u+O,b)}else{this.check(o.Line,2*S+2);for(var N=0;N<S;N++){this.vertex(a+R,u+O,b);var Y=R;R=M*R-P*O,O=P*Y+M*O,this.vertex(a+R,u+O,b)}this.vertex(a+R,u+O,b)}R=d,O=0,this.vertex(a+R,u+O,b)},ShapeRenderer.prototype.curve=function(t,i,a,u,d,b,S,C,M,P){void 0===P&&(P=null),this.check(o.Line,2*M+2),null===P&&(P=this.color);for(var R=1/M,O=R*R,B=R*R*R,N=3*R,Y=3*O,G=6*O,X=6*B,U=t-2*a+d,z=i-2*u+b,V=3*(a-d)-t+S,W=3*(u-b)-i+C,H=t,j=i,q=(a-t)*N+U*Y+V*B,Z=(u-i)*N+z*Y+W*B,K=U*G+V*X,$=z*G+W*X,tt=V*X,et=W*X;M-- >0;)this.vertex(H,j,P),H+=q,j+=Z,q+=K,Z+=$,K+=tt,$+=et,this.vertex(H,j,P);this.vertex(H,j,P),this.vertex(S,C,P)},ShapeRenderer.prototype.vertex=function(t,i,o){var a=this.vertexIndex,u=this.mesh.getVertices();u[a++]=t,u[a++]=i,u[a++]=o.r,u[a++]=o.g,u[a++]=o.b,u[a++]=o.a,this.vertexIndex=a},ShapeRenderer.prototype.end=function(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush(),this.context.gl.disable(this.context.gl.BLEND),this.isDrawing=!1},ShapeRenderer.prototype.flush=function(){0!=this.vertexIndex&&(this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0)},ShapeRenderer.prototype.check=function(t,i){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==t){if(!(this.mesh.maxVertices()-this.mesh.numVertices()<i))return;this.flush()}else this.flush(),this.shapeType=t},ShapeRenderer.prototype.dispose=function(){this.mesh.dispose()},ShapeRenderer}(),i.ShapeRenderer=a,function(t){t[t.Point=0]="Point",t[t.Line=1]="Line",t[t.Filled=4]="Filled"}(o=i.ShapeType||(i.ShapeType={}))}(a||(a={})),function(t){var i,o;i=t.webgl||(t.webgl={}),o=function(){function SkeletonDebugRenderer(o){this.boneLineColor=new t.Color(1,0,0,1),this.boneOriginColor=new t.Color(0,1,0,1),this.attachmentLineColor=new t.Color(0,0,1,.5),this.triangleLineColor=new t.Color(1,.64,0,.5),this.pathColor=(new t.Color).setFromString("FF7F00"),this.clipColor=new t.Color(.8,0,0,2),this.aabbColor=new t.Color(0,1,0,.5),this.drawBones=!0,this.drawRegionAttachments=!0,this.drawBoundingBoxes=!0,this.drawMeshHull=!0,this.drawMeshTriangles=!0,this.drawPaths=!0,this.drawSkeletonXY=!1,this.drawClipping=!0,this.premultipliedAlpha=!1,this.scale=1,this.boneWidth=2,this.bounds=new t.SkeletonBounds,this.temp=new Array,this.vertices=t.Utils.newFloatArray(2048),this.context=o instanceof i.ManagedWebGLRenderingContext?o:new i.ManagedWebGLRenderingContext(o)}return SkeletonDebugRenderer.prototype.draw=function(i,o,a){void 0===a&&(a=null);var u=o.x,d=o.y,b=this.context.gl,S=this.premultipliedAlpha?b.ONE:b.SRC_ALPHA;i.setBlendMode(S,b.ONE_MINUS_SRC_ALPHA);var C=o.bones;if(this.drawBones){i.setColor(this.boneLineColor);for(var M=0,P=C.length;M<P;M++){var R=C[M];if(!(a&&a.indexOf(R.data.name)>-1)&&null!=R.parent){var O=u+R.data.length*R.a+R.worldX,B=d+R.data.length*R.c+R.worldY;i.rectLine(!0,u+R.worldX,d+R.worldY,O,B,this.boneWidth*this.scale)}}this.drawSkeletonXY&&i.x(u,d,4*this.scale)}if(this.drawRegionAttachments)for(i.setColor(this.attachmentLineColor),M=0,P=(ft=o.slots).length;M<P;M++)if((gt=(pt=ft[M]).getAttachment())instanceof t.RegionAttachment){var N=gt,Y=this.vertices;N.computeWorldVertices(pt.bone,Y,0,2),i.line(Y[0],Y[1],Y[2],Y[3]),i.line(Y[2],Y[3],Y[4],Y[5]),i.line(Y[4],Y[5],Y[6],Y[7]),i.line(Y[6],Y[7],Y[0],Y[1])}if(this.drawMeshHull||this.drawMeshTriangles)for(M=0,P=(ft=o.slots).length;M<P;M++)if((pt=ft[M]).bone.active&&(gt=pt.getAttachment())instanceof t.MeshAttachment){var G=gt;Y=this.vertices,G.computeWorldVertices(pt,0,G.worldVerticesLength,Y,0,2);var X=G.triangles,U=G.hullLength;if(this.drawMeshTriangles){i.setColor(this.triangleLineColor);for(var z=0,V=X.length;z<V;z+=3){var W=2*X[z],H=2*X[z+1],j=2*X[z+2];i.triangle(!1,Y[W],Y[W+1],Y[H],Y[H+1],Y[j],Y[j+1])}}if(this.drawMeshHull&&U>0){i.setColor(this.attachmentLineColor);var q=Y[(U=2*(U>>1))-2],Z=Y[U-1];for(z=0,V=U;z<V;z+=2)O=Y[z],B=Y[z+1],i.line(O,B,q,Z),q=O,Z=B}}if(this.drawBoundingBoxes){var K=this.bounds;K.update(o,!0),i.setColor(this.aabbColor),i.rect(!1,K.minX,K.minY,K.getWidth(),K.getHeight());var $=K.polygons,tt=K.boundingBoxes;for(M=0,P=$.length;M<P;M++){var et=$[M];i.setColor(tt[M].color),i.polygon(et,0,et.length)}}if(this.drawPaths)for(M=0,P=(ft=o.slots).length;M<P;M++)if((pt=ft[M]).bone.active&&(gt=pt.getAttachment())instanceof t.PathAttachment){var it=gt,nt=(V=it.worldVerticesLength,this.temp=t.Utils.setArraySize(this.temp,V,0));it.computeWorldVertices(pt,0,V,nt,0,2);var rt=this.pathColor,st=nt[2],ot=nt[3],at=0,ht=0;if(it.closed){i.setColor(rt);var lt=nt[0],ut=nt[1],ct=nt[V-2],dt=nt[V-1];at=nt[V-4],ht=nt[V-3],i.curve(st,ot,lt,ut,ct,dt,at,ht,32),i.setColor(SkeletonDebugRenderer.LIGHT_GRAY),i.line(st,ot,lt,ut),i.line(at,ht,ct,dt)}for(V-=4,z=4;z<V;z+=6)lt=nt[z],ut=nt[z+1],ct=nt[z+2],dt=nt[z+3],at=nt[z+4],ht=nt[z+5],i.setColor(rt),i.curve(st,ot,lt,ut,ct,dt,at,ht,32),i.setColor(SkeletonDebugRenderer.LIGHT_GRAY),i.line(st,ot,lt,ut),i.line(at,ht,ct,dt),st=at,ot=ht}if(this.drawBones)for(i.setColor(this.boneOriginColor),M=0,P=C.length;M<P;M++)R=C[M],a&&a.indexOf(R.data.name)>-1||i.circle(!0,u+R.worldX,d+R.worldY,3*this.scale,SkeletonDebugRenderer.GREEN,8);if(this.drawClipping){var ft=o.slots;for(i.setColor(this.clipColor),M=0,P=ft.length;M<P;M++){var pt,gt;if((pt=ft[M]).bone.active&&(gt=pt.getAttachment())instanceof t.ClippingAttachment){var vt=gt;V=vt.worldVerticesLength,nt=this.temp=t.Utils.setArraySize(this.temp,V,0),vt.computeWorldVertices(pt,0,V,nt,0,2);for(var mt=0,yt=nt.length;mt<yt;mt+=2)O=nt[mt],B=nt[mt+1],at=nt[(mt+2)%nt.length],ht=nt[(mt+3)%nt.length],i.line(O,B,at,ht)}}}},SkeletonDebugRenderer.prototype.dispose=function(){},SkeletonDebugRenderer.LIGHT_GRAY=new t.Color(192/255,192/255,192/255,1),SkeletonDebugRenderer.GREEN=new t.Color(0,1,0,1),SkeletonDebugRenderer}(),i.SkeletonDebugRenderer=o}(a||(a={})),function(t){var i,o,a;i=t.webgl||(t.webgl={}),o=function o(t,i,a){this.vertices=t,this.numVertices=i,this.numFloats=a},a=function(){function SkeletonRenderer(i,a){void 0===a&&(a=!0),this.premultipliedAlpha=!1,this.vertexEffect=null,this.tempColor=new t.Color,this.tempColor2=new t.Color,this.vertexSize=8,this.twoColorTint=!1,this.renderable=new o(null,0,0),this.clipper=new t.SkeletonClipping,this.temp=new t.Vector2,this.temp2=new t.Vector2,this.temp3=new t.Color,this.temp4=new t.Color,this.twoColorTint=a,a&&(this.vertexSize+=4),this.vertices=t.Utils.newFloatArray(1024*this.vertexSize)}return SkeletonRenderer.prototype.draw=function(o,a,u,d){void 0===u&&(u=-1),void 0===d&&(d=-1);var b=this.clipper,S=this.premultipliedAlpha,C=this.twoColorTint,M=null,P=this.temp,R=this.temp2,O=this.temp3,B=this.temp4,N=this.renderable,Y=null,G=null,X=a.drawOrder,U=null,z=a.color,V=C?12:8,W=!1;-1==u&&(W=!0);for(var H=0,j=X.length;H<j;H++){var q=b.isClipping()?2:V,Z=X[H];if(Z.bone.active)if(u>=0&&u==Z.data.index&&(W=!0),W){d>=0&&d==Z.data.index&&(W=!1);var K=Z.getAttachment(),$=null;if(K instanceof t.RegionAttachment){var tt=K;N.vertices=this.vertices,N.numVertices=4,N.numFloats=q<<2,tt.computeWorldVertices(Z.bone,N.vertices,0,q),G=SkeletonRenderer.QUAD_TRIANGLES,Y=tt.uvs,$=tt.region.renderObject.texture,U=tt.color}else{if(!(K instanceof t.MeshAttachment)){if(K instanceof t.ClippingAttachment){var et=K;b.clipStart(Z,et);continue}b.clipEndWithSlot(Z);continue}var it=K;N.vertices=this.vertices,N.numVertices=it.worldVerticesLength>>1,N.numFloats=N.numVertices*q,N.numFloats>N.vertices.length&&(N.vertices=this.vertices=t.Utils.newFloatArray(N.numFloats)),it.computeWorldVertices(Z,0,it.worldVerticesLength,N.vertices,0,q),G=it.triangles,$=it.region.renderObject.texture,Y=it.uvs,U=it.color}if(null!=$){var nt=Z.color,rt=this.tempColor;rt.r=z.r*nt.r*U.r,rt.g=z.g*nt.g*U.g,rt.b=z.b*nt.b*U.b,rt.a=z.a*nt.a*U.a,S&&(rt.r*=rt.a,rt.g*=rt.a,rt.b*=rt.a);var st=this.tempColor2;null==Z.darkColor?st.set(0,0,0,1):(S?(st.r=Z.darkColor.r*rt.a,st.g=Z.darkColor.g*rt.a,st.b=Z.darkColor.b*rt.a):st.setFromColor(Z.darkColor),st.a=S?1:0);var ot=Z.data.blendMode;if(ot!=M&&(M=ot,o.setBlendMode(i.WebGLBlendModeConverter.getSourceGLBlendMode(M,S),i.WebGLBlendModeConverter.getDestGLBlendMode(M))),b.isClipping()){b.clipTriangles(N.vertices,N.numFloats,G,G.length,Y,rt,st,C);var at=new Float32Array(b.clippedVertices),ht=b.clippedTriangles;if(null!=this.vertexEffect){var lt=this.vertexEffect,ut=at;if(C){dt=0;for(var ct=at.length;dt<ct;dt+=V)P.x=ut[dt],P.y=ut[dt+1],O.set(ut[dt+2],ut[dt+3],ut[dt+4],ut[dt+5]),R.x=ut[dt+6],R.y=ut[dt+7],B.set(ut[dt+8],ut[dt+9],ut[dt+10],ut[dt+11]),lt.transform(P,R,O,B),ut[dt]=P.x,ut[dt+1]=P.y,ut[dt+2]=O.r,ut[dt+3]=O.g,ut[dt+4]=O.b,ut[dt+5]=O.a,ut[dt+6]=R.x,ut[dt+7]=R.y,ut[dt+8]=B.r,ut[dt+9]=B.g,ut[dt+10]=B.b,ut[dt+11]=B.a}else for(var dt=0,ft=at.length;dt<ft;dt+=V)P.x=ut[dt],P.y=ut[dt+1],O.set(ut[dt+2],ut[dt+3],ut[dt+4],ut[dt+5]),R.x=ut[dt+6],R.y=ut[dt+7],B.set(0,0,0,0),lt.transform(P,R,O,B),ut[dt]=P.x,ut[dt+1]=P.y,ut[dt+2]=O.r,ut[dt+3]=O.g,ut[dt+4]=O.b,ut[dt+5]=O.a,ut[dt+6]=R.x,ut[dt+7]=R.y}o.draw($,at,ht)}else{if(ut=N.vertices,null!=this.vertexEffect)if(lt=this.vertexEffect,C){dt=0,gt=0;for(var pt=N.numFloats;dt<pt;dt+=V,gt+=2)P.x=ut[dt],P.y=ut[dt+1],R.x=Y[gt],R.y=Y[gt+1],O.setFromColor(rt),B.setFromColor(st),lt.transform(P,R,O,B),ut[dt]=P.x,ut[dt+1]=P.y,ut[dt+2]=O.r,ut[dt+3]=O.g,ut[dt+4]=O.b,ut[dt+5]=O.a,ut[dt+6]=R.x,ut[dt+7]=R.y,ut[dt+8]=B.r,ut[dt+9]=B.g,ut[dt+10]=B.b,ut[dt+11]=B.a}else for(var dt=0,gt=0,vt=N.numFloats;dt<vt;dt+=V,gt+=2)P.x=ut[dt],P.y=ut[dt+1],R.x=Y[gt],R.y=Y[gt+1],O.setFromColor(rt),B.set(0,0,0,0),lt.transform(P,R,O,B),ut[dt]=P.x,ut[dt+1]=P.y,ut[dt+2]=O.r,ut[dt+3]=O.g,ut[dt+4]=O.b,ut[dt+5]=O.a,ut[dt+6]=R.x,ut[dt+7]=R.y;else if(C){dt=2,gt=0;for(var mt=N.numFloats;dt<mt;dt+=V,gt+=2)ut[dt]=rt.r,ut[dt+1]=rt.g,ut[dt+2]=rt.b,ut[dt+3]=rt.a,ut[dt+4]=Y[gt],ut[dt+5]=Y[gt+1],ut[dt+6]=st.r,ut[dt+7]=st.g,ut[dt+8]=st.b,ut[dt+9]=st.a}else{dt=2;for(var gt=0,yt=N.numFloats;dt<yt;dt+=V,gt+=2)ut[dt]=rt.r,ut[dt+1]=rt.g,ut[dt+2]=rt.b,ut[dt+3]=rt.a,ut[dt+4]=Y[gt],ut[dt+5]=Y[gt+1]}var xt=N.vertices.subarray(0,N.numFloats);o.draw($,xt,G)}}b.clipEndWithSlot(Z)}else b.clipEndWithSlot(Z);else b.clipEndWithSlot(Z)}b.clipEnd()},SkeletonRenderer.QUAD_TRIANGLES=[0,1,2,2,3,0],SkeletonRenderer}(),i.SkeletonRenderer=a}(a||(a={})),function(t){var i,o;i=t.webgl||(t.webgl={}),o=function(){function Vector3(t,i,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0),this.x=0,this.y=0,this.z=0,this.x=t,this.y=i,this.z=o}return Vector3.prototype.setFrom=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},Vector3.prototype.set=function(t,i,o){return this.x=t,this.y=i,this.z=o,this},Vector3.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},Vector3.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},Vector3.prototype.scale=function(t){return this.x*=t,this.y*=t,this.z*=t,this},Vector3.prototype.normalize=function(){var t=this.length();return 0==t||(t=1/t,this.x*=t,this.y*=t,this.z*=t),this},Vector3.prototype.cross=function(t){return this.set(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},Vector3.prototype.multiply=function(t){var o=t.values;return this.set(this.x*o[i.M00]+this.y*o[i.M01]+this.z*o[i.M02]+o[i.M03],this.x*o[i.M10]+this.y*o[i.M11]+this.z*o[i.M12]+o[i.M13],this.x*o[i.M20]+this.y*o[i.M21]+this.z*o[i.M22]+o[i.M23])},Vector3.prototype.project=function(t){var o=t.values,a=1/(this.x*o[i.M30]+this.y*o[i.M31]+this.z*o[i.M32]+o[i.M33]);return this.set((this.x*o[i.M00]+this.y*o[i.M01]+this.z*o[i.M02]+o[i.M03])*a,(this.x*o[i.M10]+this.y*o[i.M11]+this.z*o[i.M12]+o[i.M13])*a,(this.x*o[i.M20]+this.y*o[i.M21]+this.z*o[i.M22]+o[i.M23])*a)},Vector3.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},Vector3.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},Vector3.prototype.distance=function(t){var i=t.x-this.x,o=t.y-this.y,a=t.z-this.z;return Math.sqrt(i*i+o*o+a*a)},Vector3}(),i.Vector3=o}(a||(a={})),function(t){!function(i){var o=function(){function ManagedWebGLRenderingContext(t,i){void 0===i&&(i={alpha:"true"}),this.restorables=new Array,t instanceof HTMLCanvasElement||t instanceof EventTarget?this.setupCanvas(t,i):(this.gl=t,this.canvas=this.gl.canvas)}return ManagedWebGLRenderingContext.prototype.setupCanvas=function(t,i){var o=this;this.gl=t.getContext("webgl2",i)||t.getContext("webgl",i),this.canvas=t,t.addEventListener("webglcontextlost",(function(t){t&&t.preventDefault()})),t.addEventListener("webglcontextrestored",(function(t){for(var i=0,a=o.restorables.length;i<a;i++)o.restorables[i].restore()}))},ManagedWebGLRenderingContext.prototype.addRestorable=function(t){this.restorables.push(t)},ManagedWebGLRenderingContext.prototype.removeRestorable=function(t){var i=this.restorables.indexOf(t);i>-1&&this.restorables.splice(i,1)},ManagedWebGLRenderingContext}();i.ManagedWebGLRenderingContext=o;var a=function(){function WebGLBlendModeConverter(){}return WebGLBlendModeConverter.getDestGLBlendMode=function(i){switch(i){case t.BlendMode.Normal:return WebGLBlendModeConverter.ONE_MINUS_SRC_ALPHA;case t.BlendMode.Additive:return WebGLBlendModeConverter.ONE;case t.BlendMode.Multiply:case t.BlendMode.Screen:return WebGLBlendModeConverter.ONE_MINUS_SRC_ALPHA;default:throw new Error("Unknown blend mode: "+i)}},WebGLBlendModeConverter.getSourceGLBlendMode=function(i,o){switch(void 0===o&&(o=!1),i){case t.BlendMode.Normal:case t.BlendMode.Additive:return o?WebGLBlendModeConverter.ONE:WebGLBlendModeConverter.SRC_ALPHA;case t.BlendMode.Multiply:return WebGLBlendModeConverter.DST_COLOR;case t.BlendMode.Screen:return WebGLBlendModeConverter.ONE;default:throw new Error("Unknown blend mode: "+i)}},WebGLBlendModeConverter.ZERO=0,WebGLBlendModeConverter.ONE=1,WebGLBlendModeConverter.SRC_COLOR=768,WebGLBlendModeConverter.ONE_MINUS_SRC_COLOR=769,WebGLBlendModeConverter.SRC_ALPHA=770,WebGLBlendModeConverter.ONE_MINUS_SRC_ALPHA=771,WebGLBlendModeConverter.DST_ALPHA=772,WebGLBlendModeConverter.ONE_MINUS_DST_ALPHA=773,WebGLBlendModeConverter.DST_COLOR=774,WebGLBlendModeConverter}();i.WebGLBlendModeConverter=a}(t.webgl||(t.webgl={}))}(a||(a={})),t.exports=a}).call(window)},function(t,i,o){var a=o(0),u=o(11),d=o(204),b=o(7),S=o(218),C=o(219),M=o(220),P=new a({Extends:C,initialize:function SpineFile(t,i,o,a,d,P,R){var O,B,N,Y=[],G=t.cacheManager.custom.spine;if(b(i)){var X=i;for(i=u(X,"key"),B=new S(t,{key:i,url:u(X,"jsonURL"),extension:u(X,"jsonExtension","json"),xhrSettings:u(X,"jsonXhrSettings")}),a=u(X,"atlasURL"),d=u(X,"preMultipliedAlpha"),Array.isArray(a)||(a=[a]),O=0;O<a.length;O++)(N=new M(t,{key:i+"!"+O,url:a[O],extension:u(X,"atlasExtension","atlas"),xhrSettings:u(X,"atlasXhrSettings")})).cache=G,Y.push(N)}else for(B=new S(t,i,o,P),Array.isArray(a)||(a=[a]),O=0;O<a.length;O++)(N=new M(t,i+"!"+O,a[O],R)).cache=G,Y.push(N);Y.unshift(B),C.call(this,t,"spine",i,Y),this.config.preMultipliedAlpha=d},onFileComplete:function onFileComplete(t){if(-1!==this.files.indexOf(t)&&(this.pending--,"text"===t.type)){for(var i=t.data.split("\n"),o=[],a=0;a<i.length;a++){var b=i[a];""===b.trim()&&a<i.length-1&&(b=i[a+1],o.push(b))}var S=this.config,C=this.loader,M=C.baseURL,P=C.path,R=C.prefix,O=u(S,"baseURL",this.baseURL),B=u(S,"path",t.src.match(/^.*\//))[0],N=u(S,"prefix",this.prefix),Y=u(S,"textureXhrSettings");C.setBaseURL(O),C.setPath(B),C.setPrefix(N);for(var G=0;G<o.length;G++){var X=o[G],U=new d(C,X,X,Y);C.keyExists(U)||(this.addToMultiFile(U),C.addFile(U))}C.setBaseURL(M),C.setPath(P),C.setPrefix(R)}},addToCache:function addToCache(){if(this.isReadyToProcess()){var t;this.files[0].addToCache();for(var i="",o="",a=!!this.config.preMultipliedAlpha,u=this.loader.textureManager,d=1;d<this.files.length;d++){var b=this.files[d];if("text"===b.type)i=b.key.replace(/![\d]$/,""),t=b.cache,o=o.concat(b.data);else{var S=b.key.trim(),C=S.indexOf("!"),M=S.substr(C+1);u.exists(M)||u.addImage(M,b.data)}b.pendingDestroy()}t.add(i,{preMultipliedAlpha:a,data:o,prefix:this.prefix}),this.complete=!0}}});t.exports=P},function(t,i,o){var a=o(0),u=o(15),d=o(21),b=o(22),S=o(11),C=o(7),M=new a({Extends:d,initialize:function ImageFile(t,i,o,a,u){var b,M="png";if(C(i)){var P=i;i=S(P,"key"),o=S(P,"url"),b=S(P,"normalMap"),a=S(P,"xhrSettings"),M=S(P,"extension",M),u=S(P,"frameConfig")}Array.isArray(o)&&(b=o[1],o=o[0]);var R={type:"image",cache:t.textureManager,extension:M,responseType:"blob",key:i,url:o,xhrSettings:a,config:u};if(d.call(this,t,R),b){var O=new ImageFile(t,this.key,b,a,u);O.type="normalMap",this.setLink(O),t.addFile(O)}},onProcess:function onProcess(){this.state=u.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var t=this;this.data.onload=function(){d.revokeObjectURL(t.data),t.onProcessComplete()},this.data.onerror=function(){d.revokeObjectURL(t.data),t.onProcessError()},d.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function addToCache(){var t,i=this.linkFile;i&&i.state===u.FILE_COMPLETE?(t="image"===this.type?this.cache.addImage(this.key,this.data,i.data):this.cache.addImage(i.key,i.data,this.data),this.pendingDestroy(t),i.pendingDestroy(t)):i||(t=this.cache.addImage(this.key,this.data),this.pendingDestroy(t))}});b.register("image",(function(t,i,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new M(this,t[a]));else this.addFile(new M(this,t,i,o));return this})),t.exports=M},function(t,i,o){t.exports={ADD:o(206),COMPLETE:o(207),FILE_COMPLETE:o(208),FILE_KEY_COMPLETE:o(209),FILE_LOAD_ERROR:o(210),FILE_LOAD:o(211),FILE_PROGRESS:o(212),POST_PROCESS:o(213),PROGRESS:o(214),START:o(215)}},function(t,i){t.exports="addfile"},function(t,i){t.exports="complete"},function(t,i){t.exports="filecomplete"},function(t,i){t.exports="filecomplete-"},function(t,i){t.exports="loaderror"},function(t,i){t.exports="load"},function(t,i){t.exports="fileprogress"},function(t,i){t.exports="postprocess"},function(t,i){t.exports="progress"},function(t,i){t.exports="start"},function(t,i){t.exports=function GetURL(t,i){return!!t.url&&(t.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?t.url:i+t.url)}},function(t,i,o){var a=o(45);t.exports=function XHRLoader(t,i){var o=a(i,t.xhrSettings),u=new XMLHttpRequest;if(u.open("GET",t.src,o.async,o.user,o.password),u.responseType=t.xhrSettings.responseType,u.timeout=o.timeout,o.headers)for(var d in o.headers)u.setRequestHeader(d,o.headers[d]);return o.header&&o.headerValue&&u.setRequestHeader(o.header,o.headerValue),o.requestedWith&&u.setRequestHeader("X-Requested-With",o.requestedWith),o.overrideMimeType&&u.overrideMimeType(o.overrideMimeType),o.withCredentials&&(u.withCredentials=!0),u.onload=t.onLoad.bind(t,u),u.onerror=t.onError.bind(t,u),u.onprogress=t.onProgress.bind(t),u.send(),u}},function(t,i,o){var a=o(0),u=o(15),d=o(21),b=o(22),S=o(11),C=o(10),M=o(7),P=new a({Extends:d,initialize:function JSONFile(t,i,o,a,b){var P="json";if(M(i)){var R=i;i=S(R,"key"),o=S(R,"url"),a=S(R,"xhrSettings"),P=S(R,"extension",P),b=S(R,"dataKey",b)}var O={type:"json",cache:t.cacheManager.json,extension:P,responseType:"text",key:i,url:o,xhrSettings:a,config:b};d.call(this,t,O),M(o)&&(this.data=b?C(o,b):o,this.state=u.FILE_POPULATED)},onProcess:function onProcess(){if(this.state!==u.FILE_POPULATED){this.state=u.FILE_PROCESSING;try{var t=JSON.parse(this.xhrLoader.responseText)}catch(o){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),o}var i=this.config;this.data="string"==typeof i?C(t,i,t):t}this.onProcessComplete()}});b.register("json",(function(t,i,o,a){if(Array.isArray(t))for(var u=0;u<t.length;u++)this.addFile(new P(this,t[u]));else this.addFile(new P(this,t,i,a,o));return this})),t.exports=P},function(t,i,o){var a=new(o(0))({initialize:function MultiFile(t,i,o,a){var u=[];a.forEach((function(t){t&&u.push(t)})),this.loader=t,this.type=i,this.key=o,this.multiKeyIndex=t.multiKeyIndex++,this.files=u,this.complete=!1,this.pending=u.length,this.failed=0,this.config={},this.baseURL=t.baseURL,this.path=t.path,this.prefix=t.prefix;for(var d=0;d<u.length;d++)u[d].multiFile=this},isReadyToProcess:function isReadyToProcess(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function addToMultiFile(t){return this.files.push(t),t.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function onFileComplete(t){-1!==this.files.indexOf(t)&&this.pending--},onFileFailed:function onFileFailed(t){-1!==this.files.indexOf(t)&&this.failed++}});t.exports=a},function(t,i,o){var a=o(0),u=o(15),d=o(21),b=o(22),S=o(11),C=o(7),M=new a({Extends:d,initialize:function TextFile(t,i,o,a){var u="text",b="txt",M=t.cacheManager.text;if(C(i)){var P=i;i=S(P,"key"),o=S(P,"url"),a=S(P,"xhrSettings"),b=S(P,"extension",b),u=S(P,"type",u),M=S(P,"cache",M)}var R={type:u,cache:M,extension:b,responseType:"text",key:i,url:o,xhrSettings:a};d.call(this,t,R)},onProcess:function onProcess(){this.state=u.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});b.register("text",(function(t,i,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new M(this,t[a]));else this.addFile(new M(this,t,i,o));return this})),t.exports=M},function(t,i,o){var a=o(28),u=o(3),d=o(0),b=o(47),S=o(48),C=o(49),M=o(50),P=o(51),R=o(52),O=o(8),B=o(19),N=o(53),Y=o(9),G=o(243),X=o(250),U=new d({Extends:N,Mixins:[b,S,C,M,P,R,X],initialize:function SpineGameObject(t,i,o,a,u,d,b){N.call(this,t,"Spine"),this.plugin=i,this.skeleton=null,this.skeletonData=null,this.state=null,this.stateData=null,this.root=null,this.bounds=null,this.drawDebug=!1,this.timeScale=1,this.displayOriginX=0,this.displayOriginY=0,this.preMultipliedAlpha=!1,this.blendMode=-1,this.setPosition(o,a),u&&this.setSkeleton(u,d,b)},willRender:function willRender(t,i){var o=!this.skeleton||!(15!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id);if(!i&&!o&&this.parentContainer){var a=this.plugin,u=a.sceneRenderer;a.gl&&u.batcher.isDrawing&&(u.end(),a.renderer.pipelines.rebind())}return o},setAlpha:function setAlpha(t,i){if(void 0===t&&(t=1),i){var o=this.findSlot(i);o&&(o.color.a=u(t,0,1))}else this.alpha=t;return this},alpha:{get:function get(){return this.skeleton.color.a},set:function set(t){var i=u(t,0,1);this.skeleton&&(this.skeleton.color.a=i),0===i?this.renderFlags&=-3:this.renderFlags|=2}},red:{get:function get(){return this.skeleton.color.r},set:function set(t){var i=u(t,0,1);this.skeleton&&(this.skeleton.color.r=i)}},green:{get:function get(){return this.skeleton.color.g},set:function set(t){var i=u(t,0,1);this.skeleton&&(this.skeleton.color.g=i)}},blue:{get:function get(){return this.skeleton.color.b},set:function set(t){var i=u(t,0,1);this.skeleton&&(this.skeleton.color.b=i)}},setColor:function setColor(t,i){void 0===t&&(t=16777215);var o=(t>>16&255)/255,a=(t>>8&255)/255,u=(255&t)/255,d=t>16777215?(t>>>24)/255:null,b=this.skeleton;if(i){var S=this.findSlot(i);S&&(b=S)}return b.color.r=o,b.color.g=a,b.color.b=u,null!==d&&(b.color.a=d),this},setSkeletonFromJSON:function setSkeletonFromJSON(t,i,o,a){return this.setSkeleton(t,i,o,a)},setSkeleton:function setSkeleton(t,i,o,a){this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications());var u=this.plugin.createSkeleton(t,a);this.skeletonData=u.skeletonData,this.preMultipliedAlpha=u.preMultipliedAlpha;var d=u.skeleton;return d.setSkin(),d.setToSetupPose(),this.skeleton=d,u=this.plugin.createAnimationState(d),this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications()),this.state=u.state,this.stateData=u.stateData,this.state.addListener({event:this.onEvent.bind(this),complete:this.onComplete.bind(this),start:this.onStart.bind(this),end:this.onEnd.bind(this),dispose:this.onDispose.bind(this),interrupted:this.onInterrupted.bind(this)}),i&&this.setAnimation(0,i,o),this.root=this.getRootBone(),this.root&&(this.root.rotation=Y(O(this.rotation))+90),this.state.apply(d),d.updateCache(),this.updateSize()},onComplete:function onComplete(t){this.emit(G.COMPLETE,t)},onDispose:function onDispose(t){this.emit(G.DISPOSE,t)},onEnd:function onEnd(t){this.emit(G.END,t)},onEvent:function onEvent(t,i){this.emit(G.EVENT,t,i)},onInterrupted:function onInterrupted(t){this.emit(G.INTERRUPTED,t)},onStart:function onStart(t){this.emit(G.START,t)},refresh:function refresh(){return this.root&&(this.root.rotation=Y(O(this.rotation))+90),this.updateSize(),this.skeleton.updateCache(),this},setSize:function setSize(t,i,o,a){var u=this.skeleton;return void 0===t&&(t=u.data.width),void 0===i&&(i=u.data.height),void 0===o&&(o=0),void 0===a&&(a=0),this.width=t,this.height=i,this.displayOriginX=u.x-o,this.displayOriginY=u.y-a,this},setOffset:function setOffset(t,i){var o=this.skeleton;return void 0===t&&(t=0),void 0===i&&(i=0),this.displayOriginX=o.x-t,this.displayOriginY=o.y-i,this},updateSize:function updateSize(){var t=this.skeleton,i=this.plugin.renderer.height,o=this.scaleX,a=this.scaleY;t.x=this.x,t.y=i-this.y,t.scaleX=1,t.scaleY=1,t.updateWorldTransform();var u=this.getBounds();return this.width=u.size.x,this.height=u.size.y,this.displayOriginX=this.x-u.offset.x,this.displayOriginY=this.y-(i-(this.height+u.offset.y)),t.scaleX=o,t.scaleY=a,t.updateWorldTransform(),this},scaleX:{get:function get(){return this._scaleX},set:function set(t){this._scaleX=t,this.refresh()}},scaleY:{get:function get(){return this._scaleY},set:function set(t){this._scaleY=t,this.refresh()}},getBoneList:function getBoneList(){var t=[],i=this.skeletonData;if(i)for(var o=0;o<i.bones.length;o++)t.push(i.bones[o].name);return t},getSkinList:function getSkinList(){var t=[],i=this.skeletonData;if(i)for(var o=0;o<i.skins.length;o++)t.push(i.skins[o].name);return t},getSlotList:function getSlotList(){for(var t=[],i=this.skeleton,o=0;o<i.slots.length;o++)t.push(i.slots[o].data.name);return t},getAnimationList:function getAnimationList(){var t=[],i=this.skeletonData;if(i)for(var o=0;o<i.animations.length;o++)t.push(i.animations[o].name);return t},getCurrentAnimation:function getCurrentAnimation(t){void 0===t&&(t=0);var i=this.state.getCurrent(t);if(i)return i.animation},play:function play(t,i,o){return this.setAnimation(0,t,i,o),this},setAnimation:function setAnimation(t,i,o,a){if(void 0===o&&(o=!1),void 0===a&&(a=!1),a&&this.state){var u=this.state.getCurrent(t);if(u&&u.animation.name===i&&!u.isComplete())return}if(this.findAnimation(i))return this.state.setAnimation(t,i,o)},addAnimation:function addAnimation(t,i,o,a){return void 0===o&&(o=!1),void 0===a&&(a=0),this.state.addAnimation(t,i,o,a)},setEmptyAnimation:function setEmptyAnimation(t,i){return this.state.setEmptyAnimation(t,i)},clearTrack:function clearTrack(t){return this.state.clearTrack(t),this},clearTracks:function clearTracks(){return this.state.clearTracks(),this},setSkinByName:function setSkinByName(t){var i=this.skeleton;return i.setSkinByName(t),i.setSlotsToSetupPose(),this.state.apply(i),this},setSkin:function setSkin(t){var i=this.skeleton;return i.setSkin(t),i.setSlotsToSetupPose(),this.state.apply(i),this},setMix:function setMix(t,i,o){return this.stateData.setMix(t,i,o),this},getAttachment:function getAttachment(t,i){return this.skeleton.getAttachment(t,i)},getAttachmentByName:function getAttachmentByName(t,i){return this.skeleton.getAttachmentByName(t,i)},setAttachment:function setAttachment(t,i){if(Array.isArray(t)&&Array.isArray(i)&&t.length===i.length)for(var o=0;o<t.length;o++)this.skeleton.setAttachment(t[o],i[o]);else this.skeleton.setAttachment(t,i);return this},setToSetupPose:function setToSetupPose(){return this.skeleton.setToSetupPose(),this},setSlotsToSetupPose:function setSlotsToSetupPose(){return this.skeleton.setSlotsToSetupPose(),this},setBonesToSetupPose:function setBonesToSetupPose(){return this.skeleton.setBonesToSetupPose(),this},getRootBone:function getRootBone(){return this.skeleton.getRootBone()},angleBoneToXY:function angleBoneToXY(t,i,o,d,b,S){void 0===d&&(d=0),void 0===b&&(b=0),void 0===S&&(S=360);var C=this.plugin.renderer.height,M=O(a(t.worldX,C-t.worldY,i,o)+B(d));return t.rotation=u(Y(M),b,S),this},findBone:function findBone(t){return this.skeleton.findBone(t)},findBoneIndex:function findBoneIndex(t){return this.skeleton.findBoneIndex(t)},findSlot:function findSlot(t){return this.skeleton.findSlot(t)},findSlotIndex:function findSlotIndex(t){return this.skeleton.findSlotIndex(t)},findSkin:function findSkin(t){return this.skeletonData.findSkin(t)},findEvent:function findEvent(t){return this.skeletonData.findEvent(t)},findAnimation:function findAnimation(t){return this.skeletonData.findAnimation(t)},findIkConstraint:function findIkConstraint(t){return this.skeletonData.findIkConstraint(t)},findTransformConstraint:function findTransformConstraint(t){return this.skeletonData.findTransformConstraint(t)},findPathConstraint:function findPathConstraint(t){return this.skeletonData.findPathConstraint(t)},findPathConstraintIndex:function findPathConstraintIndex(t){return this.skeletonData.findPathConstraintIndex(t)},getBounds:function getBounds(){return this.plugin.getBounds(this.skeleton)},preUpdate:function preUpdate(t,i){var o=this.skeleton;this.state.update(i/1e3*this.timeScale),this.state.apply(o)},preDestroy:function preDestroy(){this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications()),this.plugin=null,this.skeleton=null,this.skeletonData=null,this.state=null,this.stateData=null}});t.exports=U},function(t,i,o){var a=o(0),u=o(223),d=new a({initialize:function DataManager(t,i){this.parent=t,this.events=i,i||(this.events=t.events?t.events:t),this.list={},this.values={},this._frozen=!1,!t.hasOwnProperty("sys")&&this.events&&this.events.once(u.DESTROY,this.destroy,this)},get:function get(t){var i=this.list;if(Array.isArray(t)){for(var o=[],a=0;a<t.length;a++)o.push(i[t[a]]);return o}return i[t]},getAll:function getAll(){var t={};for(var i in this.list)this.list.hasOwnProperty(i)&&(t[i]=this.list[i]);return t},query:function query(t){var i={};for(var o in this.list)this.list.hasOwnProperty(o)&&o.match(t)&&(i[o]=this.list[o]);return i},set:function set(t,i){if(this._frozen)return this;if("string"==typeof t)return this.setValue(t,i);for(var o in t)this.setValue(o,t[o]);return this},inc:function inc(t,i){if(this._frozen)return this;void 0===i&&(i=1);var o=this.get(t);return void 0===o&&(o=0),this.set(t,o+i),this},toggle:function toggle(t){return this._frozen||this.set(t,!this.get(t)),this},setValue:function setValue(t,i){if(this._frozen)return this;if(this.has(t))this.values[t]=i;else{var o=this,a=this.list,d=this.events,b=this.parent;Object.defineProperty(this.values,t,{enumerable:!0,configurable:!0,get:function get(){return a[t]},set:function set(i){if(!o._frozen){var S=a[t];a[t]=i,d.emit(u.CHANGE_DATA,b,t,i,S),d.emit(u.CHANGE_DATA_KEY+t,b,i,S)}}}),a[t]=i,d.emit(u.SET_DATA,b,t,i)}return this},each:function each(t,i){for(var o=[this.parent,null,void 0],a=1;a<arguments.length;a++)o.push(arguments[a]);for(var u in this.list)o[1]=u,o[2]=this.list[u],t.apply(i,o);return this},merge:function merge(t,i){for(var o in void 0===i&&(i=!0),t)t.hasOwnProperty(o)&&(i||!i&&!this.has(o))&&this.setValue(o,t[o]);return this},remove:function remove(t){if(this._frozen)return this;if(!Array.isArray(t))return this.removeValue(t);for(var i=0;i<t.length;i++)this.removeValue(t[i]);return this},removeValue:function removeValue(t){if(this.has(t)){var i=this.list[t];delete this.list[t],delete this.values[t],this.events.emit(u.REMOVE_DATA,this.parent,t,i)}return this},pop:function pop(t){var i=void 0;return!this._frozen&&this.has(t)&&(i=this.list[t],delete this.list[t],delete this.values[t],this.events.emit(u.REMOVE_DATA,this.parent,t,i)),i},has:function has(t){return this.list.hasOwnProperty(t)},setFreeze:function setFreeze(t){return this._frozen=t,this},reset:function reset(){for(var t in this.list)delete this.list[t],delete this.values[t];return this._frozen=!1,this},destroy:function destroy(){this.reset(),this.events.off(u.CHANGE_DATA),this.events.off(u.SET_DATA),this.events.off(u.REMOVE_DATA),this.parent=null},freeze:{get:function get(){return this._frozen},set:function set(t){this._frozen=!!t}},count:{get:function get(){var t=0;for(var i in this.list)void 0!==this.list[i]&&t++;return t}}});t.exports=d},function(t,i,o){t.exports={CHANGE_DATA:o(224),CHANGE_DATA_KEY:o(225),DESTROY:o(226),REMOVE_DATA:o(227),SET_DATA:o(228)}},function(t,i){t.exports="changedata"},function(t,i){t.exports="changedata-"},function(t,i){t.exports="destroy"},function(t,i){t.exports="removedata"},function(t,i){t.exports="setdata"},function(t,i,o){var a=Object.prototype.hasOwnProperty,u="~";function Events(){}function EE(t,i,o){this.fn=t,this.context=i,this.once=o||!1}function addListener(t,i,o,a,d){if("function"!=typeof o)throw new TypeError("The listener must be a function");var b=new EE(o,a||t,d),S=u?u+i:i;return t._events[S]?t._events[S].fn?t._events[S]=[t._events[S],b]:t._events[S].push(b):(t._events[S]=b,t._eventsCount++),t}function clearEvent(t,i){0==--t._eventsCount?t._events=new Events:delete t._events[i]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(u=!1)),EventEmitter.prototype.eventNames=function eventNames(){var t,i,o=[];if(0===this._eventsCount)return o;for(i in t=this._events)a.call(t,i)&&o.push(u?i.slice(1):i);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},EventEmitter.prototype.listeners=function listeners(t){var i=u?u+t:t,o=this._events[i];if(!o)return[];if(o.fn)return[o.fn];for(var a=0,d=o.length,b=new Array(d);a<d;a++)b[a]=o[a].fn;return b},EventEmitter.prototype.listenerCount=function listenerCount(t){var i=u?u+t:t,o=this._events[i];return o?o.fn?1:o.length:0},EventEmitter.prototype.emit=function emit(t,i,o,a,d,b){var S=u?u+t:t;if(!this._events[S])return!1;var C,M,P=this._events[S],R=arguments.length;if(P.fn){switch(P.once&&this.removeListener(t,P.fn,void 0,!0),R){case 1:return P.fn.call(P.context),!0;case 2:return P.fn.call(P.context,i),!0;case 3:return P.fn.call(P.context,i,o),!0;case 4:return P.fn.call(P.context,i,o,a),!0;case 5:return P.fn.call(P.context,i,o,a,d),!0;case 6:return P.fn.call(P.context,i,o,a,d,b),!0}for(M=1,C=new Array(R-1);M<R;M++)C[M-1]=arguments[M];P.fn.apply(P.context,C)}else{var O,B=P.length;for(M=0;M<B;M++)switch(P[M].once&&this.removeListener(t,P[M].fn,void 0,!0),R){case 1:P[M].fn.call(P[M].context);break;case 2:P[M].fn.call(P[M].context,i);break;case 3:P[M].fn.call(P[M].context,i,o);break;case 4:P[M].fn.call(P[M].context,i,o,a);break;default:if(!C)for(O=1,C=new Array(R-1);O<R;O++)C[O-1]=arguments[O];P[M].fn.apply(P[M].context,C)}}return!0},EventEmitter.prototype.on=function on(t,i,o){return addListener(this,t,i,o,!1)},EventEmitter.prototype.once=function once(t,i,o){return addListener(this,t,i,o,!0)},EventEmitter.prototype.removeListener=function removeListener(t,i,o,a){var d=u?u+t:t;if(!this._events[d])return this;if(!i)return clearEvent(this,d),this;var b=this._events[d];if(b.fn)b.fn!==i||a&&!b.once||o&&b.context!==o||clearEvent(this,d);else{for(var S=0,C=[],M=b.length;S<M;S++)(b[S].fn!==i||a&&!b[S].once||o&&b[S].context!==o)&&C.push(b[S]);C.length?this._events[d]=1===C.length?C[0]:C:clearEvent(this,d)}return this},EventEmitter.prototype.removeAllListeners=function removeAllListeners(t){var i;return t?(i=u?u+t:t,this._events[i]&&clearEvent(this,i)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=u,EventEmitter.EventEmitter=EventEmitter,t.exports=EventEmitter},function(t,i){t.exports="addedtoscene"},function(t,i){t.exports="destroy"},function(t,i){t.exports="removedfromscene"},function(t,i){t.exports="complete"},function(t,i){t.exports="created"},function(t,i){t.exports="error"},function(t,i){t.exports="loop"},function(t,i){t.exports="play"},function(t,i){t.exports="seeked"},function(t,i){t.exports="seeking"},function(t,i){t.exports="stop"},function(t,i){t.exports="timeout"},function(t,i){t.exports="unlocked"},function(t,i,o){t.exports={COMPLETE:o(244),DISPOSE:o(245),END:o(246),EVENT:o(247),INTERRUPTED:o(248),START:o(249)}},function(t,i){t.exports="complete"},function(t,i){t.exports="dispose"},function(t,i){t.exports="end"},function(t,i){t.exports="event"},function(t,i){t.exports="interrupted"},function(t,i){t.exports="start"},function(t,i,o){var a=o(1),u=o(1),d=o(1);a=o(251),d=o(252),u=o(253),t.exports={renderWebGL:a,renderCanvas:u,renderDirect:d}},function(t,i,o){var a=o(3),u=o(8),d=o(56),b=o(9),S=o(6);t.exports=function SpineGameObjectWebGLRenderer(t,i,o,C,M){var P=i.plugin,R=i.skeleton,O=P.sceneRenderer;t.newType&&(t.pipelines.clear(),O.begin());var B=i.scrollFactorX,N=i.scrollFactorY,Y=R.color.a;M&&(i.scrollFactorX=M.scrollFactorX,i.scrollFactorY=M.scrollFactorY,R.color.a=a(Y*M.alpha,0,1)),o.addToRenderList(i);var G=d(i,o,C).calc,X=t.height;if(R.x=G.tx,R.y=X-G.ty,R.scaleX=G.scaleX,R.scaleY=G.scaleY,i.scaleX<0?(R.scaleX*=-1,i.root.rotation=S(b(G.rotationNormalized)-180,0,360)):i.root.rotation=S(b(u(G.rotationNormalized))+90,0,360),i.scaleY<0&&(R.scaleY*=-1,i.scaleX<0?i.root.rotation-=2*b(G.rotationNormalized):i.root.rotation+=2*b(G.rotationNormalized)),R.updateWorldTransform(),O.drawSkeleton(R,i.preMultipliedAlpha),M&&(i.scrollFactorX=B,i.scrollFactorY=N,R.color.a=Y),P.drawDebug||i.drawDebug){var U=R.x,z=R.y;R.x=0,R.y=0,O.drawSkeletonDebug(R,i.preMultipliedAlpha),R.x=U,R.y=z}t.nextTypeMatch||(O.end(),t.pipelines.rebind())}},function(t,i,o){var a=o(3),u=o(8),d=o(56),b=o(9),S=o(6);t.exports=function SpineGameObjectWebGLDirect(t,i,o,C,M){var P=i.plugin,R=i.skeleton,O=P.sceneRenderer;t.pipelines.clear(),O.begin();var B=i.scrollFactorX,N=i.scrollFactorY,Y=R.color.a;M&&(i.scrollFactorX=M.scrollFactorX,i.scrollFactorY=M.scrollFactorY,R.color.a=a(Y*M.alpha,0,1)),o.addToRenderList(i);var G=d(i,o,C).calc,X=t.height;if(R.x=G.tx,R.y=X-G.ty,R.scaleX=G.scaleX,R.scaleY=G.scaleY,i.scaleX<0?(R.scaleX*=-1,i.root.rotation=S(b(G.rotationNormalized)-180,0,360)):i.root.rotation=S(b(u(G.rotationNormalized))+90,0,360),i.scaleY<0&&(R.scaleY*=-1,i.scaleX<0?i.root.rotation-=2*b(G.rotationNormalized):i.root.rotation+=2*b(G.rotationNormalized)),R.updateWorldTransform(),O.drawSkeleton(R,i.preMultipliedAlpha),M&&(i.scrollFactorX=B,i.scrollFactorY=N,R.color.a=Y),P.drawDebug||i.drawDebug){var U=R.x,z=R.y;R.x=0,R.y=0,O.drawSkeletonDebug(R,i.preMultipliedAlpha),R.x=U,R.y=z}O.end(),t.pipelines.rebind()}},function(t,i,o){var a=o(8),u=o(9),d=o(6);t.exports=function SpineGameObjectCanvasRenderer(t,i,o,b){var S=t.currentContext,C=i.plugin,M=i.skeleton,P=C.skeletonRenderer,R=t._tempMatrix1,O=t._tempMatrix2,B=t._tempMatrix3;o.addToRenderList(i),O.applyITRS(i.x,i.y,i.rotation,Math.abs(i.scaleX),Math.abs(i.scaleY)),R.copyFrom(o.matrix),b?(R.multiplyWithOffset(b,-o.scrollX*i.scrollFactorX,-o.scrollY*i.scrollFactorY),O.e=i.x,O.f=i.y,R.multiply(O,B)):(O.e-=o.scrollX*i.scrollFactorX,O.f-=o.scrollY*i.scrollFactorY,R.multiply(O,B)),M.x=B.tx,M.y=B.ty,M.scaleX=B.scaleX,M.scaleY=-1*B.scaleY,i.scaleX<0?(M.scaleX*=-1,i.root.rotation=u(B.rotationNormalized)):i.root.rotation=d(u(a(B.rotationNormalized))+90,0,360),i.scaleY<0&&(M.scaleY*=-1,i.scaleX<0?i.root.rotation-=2*u(B.rotationNormalized):i.root.rotation+=2*u(B.rotationNormalized)),o.renderToTexture&&(M.y=B.ty,M.scaleY*=-1),M.updateWorldTransform(),P.ctx=S,P.debugRendering=C.drawDebug||i.drawDebug,S.save(),P.draw(M),S.restore()}},function(t,i,o){var a=o(0),u=o(255),d=o(347),b=new a({Extends:u,Mixins:[d],initialize:function SpineContainer(t,i,o,a,d){u.call(this,t,o,a,d),this.type="Spine",this.plugin=i},preDestroy:function preDestroy(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[],this._displayList=null,this.plugin=null}});t.exports=b},function(t,i,o){var a=o(256),u=o(17),d=o(0),b=o(293),S=o(55),C=o(53),M=o(25),P=o(343),R=o(346),O=o(2),B=new d({Extends:C,Mixins:[b.AlphaSingle,b.BlendMode,b.ComputedSize,b.Depth,b.Mask,b.Pipeline,b.Transform,b.Visible,P],initialize:function Container(t,i,o,a){C.call(this,t,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new b.TransformMatrix,this.tempTransformMatrix=new b.TransformMatrix,this._sortKey="",this._sysEvents=t.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(i,o),this.clearAlpha(),this.setBlendMode(u.SKIP_CHECK),a&&this.add(a)},originX:{get:function get(){return.5}},originY:{get:function get(){return.5}},displayOriginX:{get:function get(){return.5*this.width}},displayOriginY:{get:function get(){return.5*this.height}},setExclusive:function setExclusive(t){return void 0===t&&(t=!0),this.exclusive=t,this},getBounds:function getBounds(t){if(void 0===t&&(t=new M),t.setTo(this.x,this.y,0,0),this.parentContainer){var i=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y);t.setTo(i.x,i.y,0,0)}if(this.list.length>0){var o=this.list,a=new M,u=!1;t.setEmpty();for(var d=0;d<o.length;d++){var b=o[d];b.getBounds&&(b.getBounds(a),u?R(a,t,t):(t.setTo(a.x,a.y,a.width,a.height),u=!0))}}return t},addHandler:function addHandler(t){t.once(S.DESTROY,this.remove,this),this.exclusive&&(t.parentContainer&&t.parentContainer.remove(t),t.removeFromDisplayList(),t.parentContainer=this)},removeHandler:function removeHandler(t){t.off(S.DESTROY,this.remove),this.exclusive&&(t.parentContainer=null,t.addToDisplayList())},pointToContainer:function pointToContainer(t,i){void 0===i&&(i=new O),this.parentContainer?this.parentContainer.pointToContainer(t,i):i=new O(t.x,t.y);var o=this.tempTransformMatrix;return o.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),o.invert(),o.transformPoint(t.x,t.y,i),i},getBoundsTransformMatrix:function getBoundsTransformMatrix(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function add(t){return a.Add(this.list,t,this.maxSize,this.addHandler,this),this},addAt:function addAt(t,i){return a.AddAt(this.list,t,i,this.maxSize,this.addHandler,this),this},getAt:function getAt(t){return this.list[t]},getIndex:function getIndex(t){return this.list.indexOf(t)},sort:function sort(t,i){return t?(void 0===i&&(i=function handler(i,o){return i[t]-o[t]}),a.StableSort(this.list,i),this):this},getByName:function getByName(t){return a.GetFirst(this.list,"name",t)},getRandom:function getRandom(t,i){return a.GetRandom(this.list,t,i)},getFirst:function getFirst(t,i,o,u){return a.GetFirst(this.list,t,i,o,u)},getAll:function getAll(t,i,o,u){return a.GetAll(this.list,t,i,o,u)},count:function count(t,i,o,u){return a.CountAllMatching(this.list,t,i,o,u)},swap:function swap(t,i){return a.Swap(this.list,t,i),this},moveTo:function moveTo(t,i){return a.MoveTo(this.list,t,i),this},remove:function remove(t,i){var o=a.Remove(this.list,t,this.removeHandler,this);if(i&&o){Array.isArray(o)||(o=[o]);for(var u=0;u<o.length;u++)o[u].destroy()}return this},removeAt:function removeAt(t,i){var o=a.RemoveAt(this.list,t,this.removeHandler,this);return i&&o&&o.destroy(),this},removeBetween:function removeBetween(t,i,o){var u=a.RemoveBetween(this.list,t,i,this.removeHandler,this);if(o)for(var d=0;d<u.length;d++)u[d].destroy();return this},removeAll:function removeAll(t){var i=a.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(t)for(var o=0;o<i.length;o++)i[o].destroy();return this},bringToTop:function bringToTop(t){return a.BringToTop(this.list,t),this},sendToBack:function sendToBack(t){return a.SendToBack(this.list,t),this},moveUp:function moveUp(t){return a.MoveUp(this.list,t),this},moveDown:function moveDown(t){return a.MoveDown(this.list,t),this},reverse:function reverse(){return this.list.reverse(),this},shuffle:function shuffle(){return a.Shuffle(this.list),this},replace:function replace(t,i,o){return a.Replace(this.list,t,i)&&(this.addHandler(i),this.removeHandler(t),o&&t.destroy()),this},exists:function exists(t){return this.list.indexOf(t)>-1},setAll:function setAll(t,i,o,u){return a.SetAll(this.list,t,i,o,u),this},each:function each(t,i){var o,a=[null],u=this.list.slice(),d=u.length;for(o=2;o<arguments.length;o++)a.push(arguments[o]);for(o=0;o<d;o++)a[0]=u[o],t.apply(i,a);return this},iterate:function iterate(t,i){var o,a=[null];for(o=2;o<arguments.length;o++)a.push(arguments[o]);for(o=0;o<this.list.length;o++)a[0]=this.list[o],t.apply(i,a);return this},setScrollFactor:function setScrollFactor(t,i,o){return void 0===i&&(i=t),void 0===o&&(o=!1),this.scrollFactorX=t,this.scrollFactorY=i,o&&(a.SetAll(this.list,"scrollFactorX",t),a.SetAll(this.list,"scrollFactorY",i)),this},length:{get:function get(){return this.list.length}},first:{get:function get(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function get(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function get(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function get(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function preDestroy(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});t.exports=B},function(t,i,o){t.exports={Matrix:o(257),Add:o(266),AddAt:o(267),BringToTop:o(268),CountAllMatching:o(269),Each:o(270),EachInRange:o(271),FindClosestInSorted:o(272),GetAll:o(273),GetFirst:o(274),GetRandom:o(275),MoveDown:o(276),MoveTo:o(277),MoveUp:o(278),NumberArray:o(279),NumberArrayStep:o(280),QuickSelect:o(281),Range:o(282),Remove:o(283),RemoveAt:o(284),RemoveBetween:o(285),RemoveRandomElement:o(286),Replace:o(287),RotateLeft:o(58),RotateRight:o(59),SafeRange:o(5),SendToBack:o(288),SetAll:o(289),Shuffle:o(60),SortByDigits:o(290),SpliceOne:o(12),StableSort:o(291),Swap:o(292)}},function(t,i,o){t.exports={CheckMatrix:o(24),MatrixToString:o(258),ReverseColumns:o(260),ReverseRows:o(261),Rotate180:o(262),RotateLeft:o(263),RotateMatrix:o(16),RotateRight:o(264),Translate:o(265),TransposeMatrix:o(57)}},function(t,i,o){var a=o(259),u=o(24);t.exports=function MatrixToString(t){var i="";if(!u(t))return i;for(var o=0;o<t.length;o++){for(var d=0;d<t[o].length;d++){var b=t[o][d].toString();i+="undefined"!==b?a(b,2):"?",d<t[o].length-1&&(i+=" |")}if(o<t.length-1){i+="\n";for(var S=0;S<t[o].length;S++)i+="---",S<t[o].length-1&&(i+="+");i+="\n"}}return i}},function(t,i){t.exports=function Pad(t,i,o,a){void 0===i&&(i=0),void 0===o&&(o=" "),void 0===a&&(a=3);var u=0;if(i+1>=(t=t.toString()).length)switch(a){case 1:t=new Array(i+1-t.length).join(o)+t;break;case 3:var d=Math.ceil((u=i-t.length)/2);t=new Array(u-d+1).join(o)+t+new Array(d+1).join(o);break;default:t+=new Array(i+1-t.length).join(o)}return t}},function(t,i){t.exports=function ReverseColumns(t){return t.reverse()}},function(t,i){t.exports=function ReverseRows(t){for(var i=0;i<t.length;i++)t[i].reverse();return t}},function(t,i,o){var a=o(16);t.exports=function Rotate180(t){return a(t,180)}},function(t,i,o){var a=o(16);t.exports=function RotateLeft(t){return a(t,90)}},function(t,i,o){var a=o(16);t.exports=function RotateRight(t){return a(t,-90)}},function(t,i,o){var a=o(58),u=o(59);t.exports=function TranslateMatrix(t,i,o){if(void 0===i&&(i=0),void 0===o&&(o=0),0!==o&&(o<0?a(t,Math.abs(o)):u(t,o)),0!==i)for(var d=0;d<t.length;d++){var b=t[d];i<0?a(b,Math.abs(i)):u(b,i)}return t}},function(t,i){t.exports=function Add(t,i,o,a,u){if(void 0===u&&(u=t),o>0){var d=o-t.length;if(d<=0)return null}if(!Array.isArray(i))return-1===t.indexOf(i)?(t.push(i),a&&a.call(u,i),i):null;for(var b=i.length-1;b>=0;)-1!==t.indexOf(i[b])&&i.splice(b,1),b--;if(0===(b=i.length))return null;o>0&&b>d&&(i.splice(d),b=d);for(var S=0;S<b;S++){var C=i[S];t.push(C),a&&a.call(u,C)}return i}},function(t,i){t.exports=function AddAt(t,i,o,a,u,d){if(void 0===o&&(o=0),void 0===d&&(d=t),a>0){var b=a-t.length;if(b<=0)return null}if(!Array.isArray(i))return-1===t.indexOf(i)?(t.splice(o,0,i),u&&u.call(d,i),i):null;for(var S=i.length-1;S>=0;)-1!==t.indexOf(i[S])&&i.pop(),S--;if(0===(S=i.length))return null;a>0&&S>b&&(i.splice(b),S=b);for(var C=S-1;C>=0;C--){var M=i[C];t.splice(o,0,M),u&&u.call(d,M)}return i}},function(t,i){t.exports=function BringToTop(t,i){var o=t.indexOf(i);return-1!==o&&o<t.length&&(t.splice(o,1),t.push(i)),i}},function(t,i,o){var a=o(5);t.exports=function CountAllMatching(t,i,o,u,d){void 0===u&&(u=0),void 0===d&&(d=t.length);var b=0;if(a(t,u,d))for(var S=u;S<d;S++){t[S][i]===o&&b++}return b}},function(t,i){t.exports=function Each(t,i,o){var a,u=[null];for(a=3;a<arguments.length;a++)u.push(arguments[a]);for(a=0;a<t.length;a++)u[0]=t[a],i.apply(o,u);return t}},function(t,i,o){var a=o(5);t.exports=function EachInRange(t,i,o,u,d){if(void 0===u&&(u=0),void 0===d&&(d=t.length),a(t,u,d)){var b,S=[null];for(b=5;b<arguments.length;b++)S.push(arguments[b]);for(b=u;b<d;b++)S[0]=t[b],i.apply(o,S)}return t}},function(t,i){t.exports=function FindClosestInSorted(t,i,o){if(!i.length)return NaN;if(1===i.length)return i[0];var a,u,d=1;if(o){if(t<i[0][o])return i[0];for(;i[d][o]<t;)d++}else for(;i[d]<t;)d++;return d>i.length&&(d=i.length),o?(a=i[d-1][o],(u=i[d][o])-t<=t-a?i[d]:i[d-1]):(a=i[d-1],(u=i[d])-t<=t-a?u:a)}},function(t,i,o){var a=o(5);t.exports=function GetAll(t,i,o,u,d){void 0===u&&(u=0),void 0===d&&(d=t.length);var b=[];if(a(t,u,d))for(var S=u;S<d;S++){var C=t[S];(!i||i&&void 0===o&&C.hasOwnProperty(i)||i&&void 0!==o&&C[i]===o)&&b.push(C)}return b}},function(t,i,o){var a=o(5);t.exports=function GetFirst(t,i,o,u,d){if(void 0===u&&(u=0),void 0===d&&(d=t.length),a(t,u,d))for(var b=u;b<d;b++){var S=t[b];if(!i||i&&void 0===o&&S.hasOwnProperty(i)||i&&void 0!==o&&S[i]===o)return S}return null}},function(t,i){t.exports=function GetRandom(t,i,o){void 0===i&&(i=0),void 0===o&&(o=t.length);var a=i+Math.floor(Math.random()*o);return void 0===t[a]?null:t[a]}},function(t,i){t.exports=function MoveDown(t,i){var o=t.indexOf(i);if(o>0){var a=t[o-1],u=t.indexOf(a);t[o]=a,t[u]=i}return t}},function(t,i){t.exports=function MoveTo(t,i,o){var a=t.indexOf(i);if(-1===a||o<0||o>=t.length)throw new Error("Supplied index out of bounds");return a!==o&&(t.splice(a,1),t.splice(o,0,i)),i}},function(t,i){t.exports=function MoveUp(t,i){var o=t.indexOf(i);if(-1!==o&&o<t.length-1){var a=t[o+1],u=t.indexOf(a);t[o]=a,t[u]=i}return t}},function(t,i){t.exports=function NumberArray(t,i,o,a){var u,d=[],b=!1;if((o||a)&&(b=!0,o||(o=""),a||(a="")),i<t)for(u=t;u>=i;u--)b?d.push(o+u.toString()+a):d.push(u);else for(u=t;u<=i;u++)b?d.push(o+u.toString()+a):d.push(u);return d}},function(t,i,o){var a=o(40);t.exports=function NumberArrayStep(t,i,o){void 0===t&&(t=0),void 0===i&&(i=null),void 0===o&&(o=1),null===i&&(i=t,t=0);for(var u=[],d=Math.max(a((i-t)/(o||1)),0),b=0;b<d;b++)u.push(t),t+=o;return u}},function(t,i){function swap(t,i,o){var a=t[i];t[i]=t[o],t[o]=a}function defaultCompare(t,i){return t<i?-1:t>i?1:0}t.exports=function QuickSelect(t,i,o,a,u){for(void 0===o&&(o=0),void 0===a&&(a=t.length-1),void 0===u&&(u=defaultCompare);a>o;){if(a-o>600){var d=a-o+1,b=i-o+1,S=Math.log(d),C=.5*Math.exp(2*S/3),M=.5*Math.sqrt(S*C*(d-C)/d)*(b-d/2<0?-1:1);QuickSelect(t,i,Math.max(o,Math.floor(i-b*C/d+M)),Math.min(a,Math.floor(i+(d-b)*C/d+M)),u)}var P=t[i],R=o,O=a;for(swap(t,o,i),u(t[a],P)>0&&swap(t,o,a);R<O;){for(swap(t,R,O),R++,O--;u(t[R],P)<0;)R++;for(;u(t[O],P)>0;)O--}0===u(t[o],P)?swap(t,o,O):swap(t,++O,a),O<=i&&(o=O+1),i<=O&&(a=O-1)}}},function(t,i,o){var a=o(10),u=o(60),d=function BuildChunk(t,i,o){for(var a=[],u=0;u<t.length;u++)for(var d=0;d<i.length;d++)for(var b=0;b<o;b++)a.push({a:t[u],b:i[d]});return a};t.exports=function Range(t,i,o){var b=a(o,"max",0),S=a(o,"qty",1),C=a(o,"random",!1),M=a(o,"randomB",!1),P=a(o,"repeat",0),R=a(o,"yoyo",!1),O=[];if(M&&u(i),-1===P)if(0===b)P=0;else{var B=t.length*i.length*S;R&&(B*=2),P=Math.ceil(b/B)}for(var N=0;N<=P;N++){var Y=d(t,i,S);C&&u(Y),O=O.concat(Y),R&&(Y.reverse(),O=O.concat(Y))}return b&&O.splice(b),O}},function(t,i,o){var a=o(12);t.exports=function Remove(t,i,o,u){var d;if(void 0===u&&(u=t),!Array.isArray(i))return-1!==(d=t.indexOf(i))?(a(t,d),o&&o.call(u,i),i):null;for(var b=i.length-1,S=[];b>=0;){var C=i[b];-1!==(d=t.indexOf(C))&&(a(t,d),S.push(C),o&&o.call(u,C)),b--}return S}},function(t,i,o){var a=o(12);t.exports=function RemoveAt(t,i,o,u){if(void 0===u&&(u=t),i<0||i>t.length-1)throw new Error("Index out of bounds");var d=a(t,i);return o&&o.call(u,d),d}},function(t,i,o){var a=o(5);t.exports=function RemoveBetween(t,i,o,u,d){if(void 0===i&&(i=0),void 0===o&&(o=t.length),void 0===d&&(d=t),a(t,i,o)){var b=o-i,S=t.splice(i,b);if(u)for(var C=0;C<S.length;C++){var M=S[C];u.call(d,M)}return S}return[]}},function(t,i,o){var a=o(12);t.exports=function RemoveRandomElement(t,i,o){void 0===i&&(i=0),void 0===o&&(o=t.length);var u=i+Math.floor(Math.random()*o);return a(t,u)}},function(t,i){t.exports=function Replace(t,i,o){var a=t.indexOf(i),u=t.indexOf(o);return-1!==a&&-1===u&&(t[a]=o,!0)}},function(t,i){t.exports=function SendToBack(t,i){var o=t.indexOf(i);return-1!==o&&o>0&&(t.splice(o,1),t.unshift(i)),i}},function(t,i,o){var a=o(5);t.exports=function SetAll(t,i,o,u,d){if(void 0===u&&(u=0),void 0===d&&(d=t.length),a(t,u,d))for(var b=u;b<d;b++){var S=t[b];S.hasOwnProperty(i)&&(S[i]=o)}return t}},function(t,i){t.exports=function SortByDigits(t){var i=/\D/g;return t.sort((function(t,o){return parseInt(t.replace(i,""),10)-parseInt(o.replace(i,""),10)})),t}},function(t,i){function Compare(t,i){return String(t).localeCompare(i)}function RunPass(t,i,o,a){var u,d,b,S,C,M=t.length,P=0,R=2*o;for(u=0;u<M;u+=R)for(b=(d=u+o)+o,d>M&&(d=M),b>M&&(b=M),S=u,C=d;;)if(S<d&&C<b)i(t[S],t[C])<=0?a[P++]=t[S++]:a[P++]=t[C++];else if(S<d)a[P++]=t[S++];else{if(!(C<b))break;a[P++]=t[C++]}}t.exports=function StableSort(t,i){void 0===i&&(i=Compare);var o=function Process(t,i){var o=t.length;if(o<=1)return t;for(var a=new Array(o),u=1;u<o;u*=2){RunPass(t,i,u,a);var d=t;t=a,a=d}return t}(t,i);return o!==t&&RunPass(o,null,t.length,t),t}},function(t,i){t.exports=function Swap(t,i,o){if(i!==o){var a=t.indexOf(i),u=t.indexOf(o);if(a<0||u<0)throw new Error("Supplied items must be elements of the same array");return t[a]=o,t[u]=i,t}}},function(t,i,o){t.exports={Alpha:o(294),AlphaSingle:o(295),BlendMode:o(296),ComputedSize:o(47),Crop:o(297),Depth:o(48),Flip:o(49),GetBounds:o(298),Mask:o(307),Origin:o(332),PathFollower:o(333),Pipeline:o(336),ScrollFactor:o(50),Size:o(339),Texture:o(340),TextureCrop:o(341),Tint:o(342),ToJSON:o(54),Transform:o(51),TransformMatrix:o(23),Visible:o(52)}},function(t,i,o){var a=o(3),u={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function clearAlpha(){return this.setAlpha(1)},setAlpha:function setAlpha(t,i,o,u){return void 0===t&&(t=1),void 0===i?this.alpha=t:(this._alphaTL=a(t,0,1),this._alphaTR=a(i,0,1),this._alphaBL=a(o,0,1),this._alphaBR=a(u,0,1)),this},alpha:{get:function get(){return this._alpha},set:function set(t){var i=a(t,0,1);this._alpha=i,this._alphaTL=i,this._alphaTR=i,this._alphaBL=i,this._alphaBR=i,0===i?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function get(){return this._alphaTL},set:function set(t){var i=a(t,0,1);this._alphaTL=i,0!==i&&(this.renderFlags|=2)}},alphaTopRight:{get:function get(){return this._alphaTR},set:function set(t){var i=a(t,0,1);this._alphaTR=i,0!==i&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function get(){return this._alphaBL},set:function set(t){var i=a(t,0,1);this._alphaBL=i,0!==i&&(this.renderFlags|=2)}},alphaBottomRight:{get:function get(){return this._alphaBR},set:function set(t){var i=a(t,0,1);this._alphaBR=i,0!==i&&(this.renderFlags|=2)}}};t.exports=u},function(t,i,o){var a=o(3),u={_alpha:1,clearAlpha:function clearAlpha(){return this.setAlpha(1)},setAlpha:function setAlpha(t){return void 0===t&&(t=1),this.alpha=t,this},alpha:{get:function get(){return this._alpha},set:function set(t){var i=a(t,0,1);this._alpha=i,0===i?this.renderFlags&=-3:this.renderFlags|=2}}};t.exports=u},function(t,i,o){var a=o(17),u={_blendMode:a.NORMAL,blendMode:{get:function get(){return this._blendMode},set:function set(t){"string"==typeof t&&(t=a[t]),(t|=0)>=-1&&(this._blendMode=t)}},setBlendMode:function setBlendMode(t){return this.blendMode=t,this}};t.exports=u},function(t,i){var o={texture:null,frame:null,isCropped:!1,setCrop:function setCrop(t,i,o,a){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,i,o,a,this.flipX,this.flipY);else{var u=t;this.frame.setCropUVs(this._crop,u.x,u.y,u.width,u.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function resetCropObject(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};t.exports=o},function(t,i,o){var a=o(25),u=o(39),d=o(2),b={prepareBoundsOutput:function prepareBoundsOutput(t,i){(void 0===i&&(i=!1),0!==this.rotation&&u(t,this.x,this.y,this.rotation),i&&this.parentContainer)&&this.parentContainer.getBoundsTransformMatrix().transformPoint(t.x,t.y,t);return t},getCenter:function getCenter(t){return void 0===t&&(t=new d),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,t},getTopLeft:function getTopLeft(t,i){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,i)},getTopCenter:function getTopCenter(t,i){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,i)},getTopRight:function getTopRight(t,i){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,i)},getLeftCenter:function getLeftCenter(t,i){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,i)},getRightCenter:function getRightCenter(t,i){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,i)},getBottomLeft:function getBottomLeft(t,i){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,i)},getBottomCenter:function getBottomCenter(t,i){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,i)},getBottomRight:function getBottomRight(t,i){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,i)},getBounds:function getBounds(t){var i,o,u,d,b,S,C,M;if(void 0===t&&(t=new a),this.parentContainer){var P=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(t),P.transformPoint(t.x,t.y,t),i=t.x,o=t.y,this.getTopRight(t),P.transformPoint(t.x,t.y,t),u=t.x,d=t.y,this.getBottomLeft(t),P.transformPoint(t.x,t.y,t),b=t.x,S=t.y,this.getBottomRight(t),P.transformPoint(t.x,t.y,t),C=t.x,M=t.y}else this.getTopLeft(t),i=t.x,o=t.y,this.getTopRight(t),u=t.x,d=t.y,this.getBottomLeft(t),b=t.x,S=t.y,this.getBottomRight(t),C=t.x,M=t.y;return t.x=Math.min(i,u,b,C),t.y=Math.min(o,d,S,M),t.width=Math.max(i,u,b,C)-t.x,t.height=Math.max(o,d,S,M)-t.y,t}};t.exports=b},function(t,i){t.exports=function Contains(t,i,o){return!(t.width<=0||t.height<=0)&&(t.x<=i&&t.x+t.width>=i&&t.y<=o&&t.y+t.height>=o)}},function(t,i,o){var a=o(61),u=o(62);t.exports=function GetPoints(t,i,o,d){void 0===d&&(d=[]),!i&&o>0&&(i=u(t)/o);for(var b=0;b<i;b++){var S=b/i;d.push(a(t,S))}return d}},function(t,i,o){var a=o(0),u=o(302),d=o(303),b=o(26),S=o(305),C=o(2),M=new a({initialize:function Line(t,i,o,a){void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),this.type=b.LINE,this.x1=t,this.y1=i,this.x2=o,this.y2=a},getPoint:function getPoint(t,i){return u(this,t,i)},getPoints:function getPoints(t,i,o){return d(this,t,i,o)},getRandomPoint:function getRandomPoint(t){return S(this,t)},setTo:function setTo(t,i,o,a){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),this.x1=t,this.y1=i,this.x2=o,this.y2=a,this},getPointA:function getPointA(t){return void 0===t&&(t=new C),t.set(this.x1,this.y1),t},getPointB:function getPointB(t){return void 0===t&&(t=new C),t.set(this.x2,this.y2),t},left:{get:function get(){return Math.min(this.x1,this.x2)},set:function set(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function get(){return Math.max(this.x1,this.x2)},set:function set(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function get(){return Math.min(this.y1,this.y2)},set:function set(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function get(){return Math.max(this.y1,this.y2)},set:function set(t){this.y1>this.y2?this.y1=t:this.y2=t}}});t.exports=M},function(t,i,o){var a=o(13);t.exports=function GetPoint(t,i,o){return void 0===o&&(o=new a),o.x=t.x1+(t.x2-t.x1)*i,o.y=t.y1+(t.y2-t.y1)*i,o}},function(t,i,o){var a=o(304),u=o(13);t.exports=function GetPoints(t,i,o,d){void 0===d&&(d=[]),!i&&o>0&&(i=a(t)/o);for(var b=t.x1,S=t.y1,C=t.x2,M=t.y2,P=0;P<i;P++){var R=P/i,O=b+(C-b)*R,B=S+(M-S)*R;d.push(new u(O,B))}return d}},function(t,i){t.exports=function Length(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))}},function(t,i,o){var a=o(13);t.exports=function Random(t,i){void 0===i&&(i=new a);var o=Math.random();return i.x=t.x1+o*(t.x2-t.x1),i.y=t.y1+o*(t.y2-t.y1),i}},function(t,i,o){var a=o(13);t.exports=function Random(t,i){return void 0===i&&(i=new a),i.x=t.x+Math.random()*t.width,i.y=t.y+Math.random()*t.height,i}},function(t,i,o){var a=o(308),u=o(331),d={mask:null,setMask:function setMask(t){return this.mask=t,this},clearMask:function clearMask(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function createBitmapMask(t){return void 0===t&&(this.texture||this.shader)&&(t=this),new a(this.scene,t)},createGeometryMask:function createGeometryMask(t){return void 0===t&&"Graphics"===this.type&&(t=this),new u(this.scene,t)}};t.exports=d},function(t,i,o){var a=o(0),u=o(309),d=o(326),b=new a({initialize:function BitmapMask(t,i){var o=t.sys.renderer;this.renderer=o,this.bitmapMask=i,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),t.sys.game.events.on(u.CONTEXT_RESTORED,this.createMask,this),o&&o.on(d.RESIZE,this.createMask,this)},createMask:function createMask(){var t=this.renderer;if(t&&t.gl){this.mainTexture&&this.clearMask();var i=t.width,o=t.height,a=0==(i&i-1)&&0==(o&o-1),u=t.gl,d=a?u.REPEAT:u.CLAMP_TO_EDGE,b=u.LINEAR;this.mainTexture=t.createTexture2D(0,b,b,d,d,u.RGBA,null,i,o),this.maskTexture=t.createTexture2D(0,b,b,d,d,u.RGBA,null,i,o),this.mainFramebuffer=t.createFramebuffer(i,o,this.mainTexture,!0),this.maskFramebuffer=t.createFramebuffer(i,o,this.maskTexture,!0)}},clearMask:function clearMask(){var t=this.renderer;t&&t.gl&&this.mainTexture&&(t.deleteTexture(this.mainTexture),t.deleteTexture(this.maskTexture),t.deleteFramebuffer(this.mainFramebuffer),t.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function setBitmap(t){this.bitmapMask=t},preRenderWebGL:function preRenderWebGL(t,i,o){t.pipelines.BITMAPMASK_PIPELINE.beginMask(this,i,o)},postRenderWebGL:function postRenderWebGL(t,i){t.pipelines.BITMAPMASK_PIPELINE.endMask(this,i)},preRenderCanvas:function preRenderCanvas(){},postRenderCanvas:function postRenderCanvas(){},destroy:function destroy(){this.clearMask(),this.renderer&&this.renderer.off(d.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});t.exports=b},function(t,i,o){t.exports={BLUR:o(310),BOOT:o(311),CONTEXT_LOST:o(312),CONTEXT_RESTORED:o(313),DESTROY:o(314),FOCUS:o(315),HIDDEN:o(316),PAUSE:o(317),POST_RENDER:o(318),POST_STEP:o(319),PRE_RENDER:o(320),PRE_STEP:o(321),READY:o(322),RESUME:o(323),STEP:o(324),VISIBLE:o(325)}},function(t,i){t.exports="blur"},function(t,i){t.exports="boot"},function(t,i){t.exports="contextlost"},function(t,i){t.exports="contextrestored"},function(t,i){t.exports="destroy"},function(t,i){t.exports="focus"},function(t,i){t.exports="hidden"},function(t,i){t.exports="pause"},function(t,i){t.exports="postrender"},function(t,i){t.exports="poststep"},function(t,i){t.exports="prerender"},function(t,i){t.exports="prestep"},function(t,i){t.exports="ready"},function(t,i){t.exports="resume"},function(t,i){t.exports="step"},function(t,i){t.exports="visible"},function(t,i,o){t.exports={POST_RENDER:o(327),PRE_RENDER:o(328),RENDER:o(329),RESIZE:o(330)}},function(t,i){t.exports="postrender"},function(t,i){t.exports="prerender"},function(t,i){t.exports="render"},function(t,i){t.exports="resize"},function(t,i,o){var a=new(o(0))({initialize:function GeometryMask(t,i){this.geometryMask=i,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function setShape(t){return this.geometryMask=t,this},setInvertAlpha:function setInvertAlpha(t){return void 0===t&&(t=!0),this.invertAlpha=t,this},preRenderWebGL:function preRenderWebGL(t,i,o){var a=t.gl;t.flush(),0===t.maskStack.length&&(a.enable(a.STENCIL_TEST),a.clear(a.STENCIL_BUFFER_BIT),t.maskCount=0),t.currentCameraMask.mask!==this&&(t.currentMask.mask=this),t.maskStack.push({mask:this,camera:o}),this.applyStencil(t,o,!0),t.maskCount++},applyStencil:function applyStencil(t,i,o){var a=t.gl,u=this.geometryMask,d=t.maskCount;a.colorMask(!1,!1,!1,!1),o?(a.stencilFunc(a.EQUAL,d,255),a.stencilOp(a.KEEP,a.KEEP,a.INCR)):(a.stencilFunc(a.EQUAL,d+1,255),a.stencilOp(a.KEEP,a.KEEP,a.DECR)),u.renderWebGL(t,u,i),t.flush(),a.colorMask(!0,!0,!0,!0),a.stencilOp(a.KEEP,a.KEEP,a.KEEP),o?this.invertAlpha?a.stencilFunc(a.NOTEQUAL,d+1,255):a.stencilFunc(a.EQUAL,d+1,255):this.invertAlpha?a.stencilFunc(a.NOTEQUAL,d,255):a.stencilFunc(a.EQUAL,d,255)},postRenderWebGL:function postRenderWebGL(t){var i=t.gl;t.maskStack.pop(),t.maskCount--,t.flush();var o=t.currentMask;if(0===t.maskStack.length)o.mask=null,i.disable(i.STENCIL_TEST);else{var a=t.maskStack[t.maskStack.length-1];a.mask.applyStencil(t,a.camera,!1),t.currentCameraMask.mask!==a.mask?(o.mask=a.mask,o.camera=a.camera):o.mask=null}},preRenderCanvas:function preRenderCanvas(t,i,o){var a=this.geometryMask;t.currentContext.save(),a.renderCanvas(t,a,o,null,null,!0),t.currentContext.clip()},postRenderCanvas:function postRenderCanvas(t){t.currentContext.restore()},destroy:function destroy(){this.geometryMask=null}});t.exports=a},function(t,i){var o={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function get(){return this._displayOriginX},set:function set(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function get(){return this._displayOriginY},set:function set(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function setOrigin(t,i){return void 0===t&&(t=.5),void 0===i&&(i=t),this.originX=t,this.originY=i,this.updateDisplayOrigin()},setOriginFromFrame:function setOriginFromFrame(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function setDisplayOrigin(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.displayOriginX=t,this.displayOriginY=i,this},updateDisplayOrigin:function updateDisplayOrigin(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};t.exports=o},function(t,i,o){var a=o(19),u=o(334),d=o(10),b=o(335),S=o(2),C={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:b.PLAYING_FORWARD,setPath:function setPath(t,i){void 0===i&&(i=this.pathConfig);var o=this.pathTween;return o&&o.isPlaying()&&o.stop(),this.path=t,i&&this.startFollow(i),this},setRotateToPath:function setRotateToPath(t,i){return void 0===i&&(i=0),this.rotateToPath=t,this.pathRotationOffset=i,this},isFollowing:function isFollowing(){var t=this.pathTween;return t&&t.isPlaying()},startFollow:function startFollow(t,i){void 0===t&&(t={}),void 0===i&&(i=0);var o=this.pathTween;o&&o.isPlaying()&&o.stop(),"number"==typeof t&&(t={duration:t}),t.from=d(t,"from",0),t.to=d(t,"to",1);var C=u(t,"positionOnPath",!1);this.rotateToPath=u(t,"rotateToPath",!1),this.pathRotationOffset=d(t,"rotationOffset",0);var M=d(t,"startAt",i);if(M&&(t.onStart=function(t){var i=t.data[0];i.progress=M,i.elapsed=i.duration*M;var o=i.ease(i.progress);i.current=i.start+(i.end-i.start)*o,i.target[i.key]=i.current}),this.pathOffset||(this.pathOffset=new S(this.x,this.y)),this.pathVector||(this.pathVector=new S),this.pathDelta||(this.pathDelta=new S),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(t),this.path.getStartPoint(this.pathOffset),C&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=b.PLAYING_FORWARD,this.rotateToPath){var P=this.path.getPoint(.1);this.rotation=Math.atan2(P.y-this.y,P.x-this.x)+a(this.pathRotationOffset)}return this.pathConfig=t,this},pauseFollow:function pauseFollow(){var t=this.pathTween;return t&&t.isPlaying()&&t.pause(),this},resumeFollow:function resumeFollow(){var t=this.pathTween;return t&&t.isPaused()&&t.resume(),this},stopFollow:function stopFollow(){var t=this.pathTween;return t&&t.isPlaying()&&t.stop(),this},pathUpdate:function pathUpdate(){var t=this.pathTween;if(t){var i=t.data[0],o=this.pathDelta,u=this.pathVector;if(o.copy(u).negate(),i.state===b.COMPLETE)return this.path.getPoint(1,u),o.add(u),u.add(this.pathOffset),void this.setPosition(u.x,u.y);if(i.state!==b.PLAYING_FORWARD&&i.state!==b.PLAYING_BACKWARD)return;this.path.getPoint(t.getValue(),u),o.add(u),u.add(this.pathOffset);var d=this.x,S=this.y;this.setPosition(u.x,u.y);var C=this.x-d,M=this.y-S;if(0===C&&0===M)return;if(i.state!==this._prevDirection)return void(this._prevDirection=i.state);this.rotateToPath&&(this.rotation=Math.atan2(M,C)+a(this.pathRotationOffset))}}};t.exports=C},function(t,i){t.exports=function GetBoolean(t,i,o){return t&&t.hasOwnProperty(i)?t[i]:o}},function(t,i){t.exports={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26}},function(t,i,o){var a=o(337),u=o(338),d=o(12),b={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function initPipeline(t){void 0===t&&(t=u.MULTI_PIPELINE);var i=this.scene.sys.renderer;if(!i)return!1;var o=i.pipelines;if(this.postPipelines=[],this.pipelineData={},o){var a=o.get(t);if(a)return this.defaultPipeline=a,this.pipeline=a,!0}return!1},setPipeline:function setPipeline(t,i,o){var u=this.scene.sys.renderer;if(!u)return this;var d=u.pipelines;if(d){var b=d.get(t);b&&(this.pipeline=b),i&&(this.pipelineData=o?a(i):i)}return this},setPostPipeline:function setPostPipeline(t,i,o){var u=this.scene.sys.renderer;if(!u)return this;var d=u.pipelines;if(d){Array.isArray(t)||(t=[t]);for(var b=0;b<t.length;b++){var S=d.getPostPipeline(t[b],this);S&&this.postPipelines.push(S)}i&&(this.pipelineData=o?a(i):i)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function setPipelineData(t,i){var o=this.pipelineData;return void 0===i?delete o[t]:o[t]=i,this},getPostPipeline:function getPostPipeline(t){for(var i=this.postPipelines,o=[],a=0;a<i.length;a++){var u=i[a];("string"==typeof t&&u.name===t||u instanceof t)&&o.push(u)}return 1===o.length?o[0]:o},resetPipeline:function resetPipeline(t,i){return void 0===t&&(t=!1),void 0===i&&(i=!1),this.pipeline=this.defaultPipeline,t&&(this.postPipelines=[],this.hasPostPipeline=!1),i&&(this.pipelineData={}),null!==this.pipeline},resetPostPipeline:function resetPostPipeline(t){void 0===t&&(t=!1);for(var i=this.postPipelines,o=0;o<i.length;o++)i[o].destroy();this.postPipelines=[],this.hasPostPipeline=!1,t&&(this.pipelineData={})},removePostPipeline:function removePostPipeline(t){for(var i=this.postPipelines,o=i.length-1;o>=0;o--){var a=i[o];("string"==typeof t&&a.name===t||"string"!=typeof t&&a instanceof t)&&(a.destroy(),d(i,o))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function getPipelineName(){return this.pipeline.name}};t.exports=b},function(t,i){t.exports=function DeepCopy(t){var i,o,a;if("object"!==_typeof(t)||null===t)return t;for(a in i=Array.isArray(t)?[]:{},t)o=t[a],i[a]=DeepCopy(o);return i}},function(t,i){t.exports={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"}},function(t,i){var o={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function get(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function set(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function get(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function set(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function setSizeToFrame(t){return void 0===t&&(t=this.frame),this.width=t.realWidth,this.height=t.realHeight,this},setSize:function setSize(t,i){return this.width=t,this.height=i,this},setDisplaySize:function setDisplaySize(t,i){return this.displayWidth=t,this.displayHeight=i,this}};t.exports=o},function(t,i){var o={texture:null,frame:null,isCropped:!1,setTexture:function setTexture(t,i){return this.texture=this.scene.sys.textures.get(t),this.setFrame(i)},setFrame:function setFrame(t,i,o){return void 0===i&&(i=!0),void 0===o&&(o=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&i&&this.setSizeToFrame(),this._originComponent&&o&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};t.exports=o},function(t,i){var o={texture:null,frame:null,isCropped:!1,setCrop:function setCrop(t,i,o,a){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,i,o,a,this.flipX,this.flipY);else{var u=t;this.frame.setCropUVs(this._crop,u.x,u.y,u.width,u.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function setTexture(t,i){return this.texture=this.scene.sys.textures.get(t),this.setFrame(i)},setFrame:function setFrame(t,i,o){return void 0===i&&(i=!0),void 0===o&&(o=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&i&&this.setSizeToFrame(),this._originComponent&&o&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function resetCropObject(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};t.exports=o},function(t,i){var o={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function clearTint(){return this.setTint(16777215),this},setTint:function setTint(t,i,o,a){return void 0===t&&(t=16777215),void 0===i&&(i=t,o=t,a=t),this.tintTopLeft=t,this.tintTopRight=i,this.tintBottomLeft=o,this.tintBottomRight=a,this.tintFill=!1,this},setTintFill:function setTintFill(t,i,o,a){return this.setTint(t,i,o,a),this.tintFill=!0,this},tint:{set:function set(t){this.setTint(t,t,t,t)}},isTinted:{get:function get(){var t=16777215;return this.tintFill||this.tintTopLeft!==t||this.tintTopRight!==t||this.tintBottomLeft!==t||this.tintBottomRight!==t}}};t.exports=o},function(t,i,o){var a=o(1),u=o(1);a=o(344),u=o(345),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i){t.exports=function ContainerWebGLRenderer(t,i,o,a){var u=i.list,d=u.length;if(0!==d){o.addToRenderList(i);var b=i.localTransform;a?(b.loadIdentity(),b.multiply(a),b.translate(i.x,i.y),b.rotate(i.rotation),b.scale(i.scaleX,i.scaleY)):b.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY),t.pipelines.preBatch(i);var S=-1!==i.blendMode;S||t.setBlendMode(0);for(var C=i.alpha,M=i.scrollFactorX,P=i.scrollFactorY,R=0;R<d;R++){var O=u[R];if(O.willRender(o)){var B,N,Y,G;if(void 0!==O.alphaTopLeft)B=O.alphaTopLeft,N=O.alphaTopRight,Y=O.alphaBottomLeft,G=O.alphaBottomRight;else{var X=O.alpha;B=X,N=X,Y=X,G=X}var U=O.scrollFactorX,z=O.scrollFactorY;S||O.blendMode===t.currentBlendMode||t.setBlendMode(O.blendMode);var V=O.mask;V&&V.preRenderWebGL(t,O,o);var W=O.type;W!==t.currentType&&(t.newType=!0,t.currentType=W),t.nextTypeMatch=R<d-1&&u[R+1].type===t.currentType,O.setScrollFactor(U*M,z*P),O.setAlpha(B*C,N*C,Y*C,G*C),O.renderWebGL(t,O,o,b),O.setAlpha(B,N,Y,G),O.setScrollFactor(U,z),V&&V.postRenderWebGL(t,o),t.newType=!1}}t.pipelines.postBatch(i)}}},function(t,i){t.exports=function ContainerCanvasRenderer(t,i,o,a){var u=i.list;if(0!==u.length){o.addToRenderList(i);var d=i.localTransform;a?(d.loadIdentity(),d.multiply(a),d.translate(i.x,i.y),d.rotate(i.rotation),d.scale(i.scaleX,i.scaleY)):d.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY);var b=-1!==i.blendMode;b||t.setBlendMode(0);var S=i._alpha,C=i.scrollFactorX,M=i.scrollFactorY;i.mask&&i.mask.preRenderCanvas(t,null,o);for(var P=0;P<u.length;P++){var R=u[P];if(R.willRender(o)){var O=R.alpha,B=R.scrollFactorX,N=R.scrollFactorY;b||R.blendMode===t.currentBlendMode||t.setBlendMode(R.blendMode),R.setScrollFactor(B*C,N*M),R.setAlpha(O*S),R.renderCanvas(t,R,o,d),R.setAlpha(O),R.setScrollFactor(B,N)}}i.mask&&i.mask.postRenderCanvas(t)}}},function(t,i,o){var a=o(25);t.exports=function Union(t,i,o){void 0===o&&(o=new a);var u=Math.min(t.x,i.x),d=Math.min(t.y,i.y),b=Math.max(t.right,i.right)-u,S=Math.max(t.bottom,i.bottom)-d;return o.setTo(u,d,b,S)}},function(t,i,o){var a=o(1),u=o(1);a=o(348),u=o(349),t.exports={renderWebGL:a,renderCanvas:u}},function(t,i){t.exports=function SpineContainerWebGLRenderer(t,i,o,a){var u=i.plugin.sceneRenderer,d=i.list;if(0!==d.length){o.addToRenderList(i);var b=i.localTransform;a?(b.loadIdentity(),b.multiply(a),b.translate(i.x,i.y),b.rotate(i.rotation),b.scale(i.scaleX,i.scaleY)):b.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY),t.newType&&(t.pipelines.clear(),u.begin());var S=t.nextTypeMatch;t.nextTypeMatch=!0,t.newType=!1;for(var C=0;C<d.length;C++){var M=d[C];if(M.willRender(o,i)){var P=M.mask;P&&(u.end(),t.pipelines.rebind(),P.preRenderWebGL(t,M,o),t.pipelines.clear(),u.begin()),M.renderWebGL(t,M,o,b,i),P&&(u.end(),t.pipelines.rebind(),P.postRenderWebGL(t,o),t.pipelines.clear(),u.begin())}}t.nextTypeMatch=S,S||(u.end(),t.pipelines.rebind())}else u.batcher.isDrawing&&t.finalType&&(u.end(),t.pipelines.rebind())}},function(t,i){t.exports=function SpineContainerCanvasRenderer(t,i,o,a){var u=i.list;if(0!==u.length){o.addToRenderList(i);var d=i.localTransform;a?(d.loadIdentity(),d.multiply(a),d.translate(i.x,i.y),d.rotate(i.rotation),d.scale(i.scaleX,i.scaleY)):d.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY);var b=-1!==i.blendMode;b||t.setBlendMode(0);var S=i._alpha,C=i.scrollFactorX,M=i.scrollFactorY;i.mask&&i.mask.preRenderCanvas(t,null,o);for(var P=0;P<u.length;P++){var R=u[P];if(R.willRender(o)){var O=R.alpha,B=R.scrollFactorX,N=R.scrollFactorY;b||R.blendMode===t.currentBlendMode||t.setBlendMode(R.blendMode),R.setScrollFactor(B*C,N*M),R.setAlpha(O*S),R.renderCanvas(t,R,o,d),R.setAlpha(O),R.setScrollFactor(B,N)}}i.mask&&i.mask.postRenderCanvas(t)}}}]);var Pl=_createClass((function EngineInitVO(){_classCallCheck(this,EngineInitVO),this.data={flagOverrides:{},gameName:null,gameVersion:"_v1",gameSubEngineConfig:null,preloaderInitialsAssetsNames:{manifestJson:null,font:null,logo:null},initialAssetPackData:null,funcStartGame:null,funcRegisterComponents:null,funcDoGameRegisters:null,requiredScreenOrientation:"any"}})),Rl={scene:[{key:"spine",plugin:window.SpinePlugin,start:!0,sceneKey:"spine",mapping:"spine"},{key:"rexGestures",plugin:qh,start:!0,sceneKey:"rexGestures",mapping:"rexGestures"},{key:"rexBoard",plugin:Ya,mapping:"rexBoard"}],global:[{key:"rexEaseMove",plugin:uh,start:!0,sceneKey:"rexEaseMove",mapping:"rexEaseMove"},{key:"rexCsvScenario",plugin:_l,start:!0,sceneKey:"rexCsvScenario",mapping:"rexCsvScenario"},{key:"rexMoveTo",plugin:Zh,start:!0,sceneKey:"rexMoveTo",mapping:"rexMoveTo"},{key:"rexBullet",plugin:za,start:!0,sceneKey:"rexBullet",mapping:"rexBullet"},{key:"rexRotateTo",plugin:nl,start:!0}]},kl=function(){function BMEngine(){_classCallCheck(this,BMEngine)}return _createClass(BMEngine,null,[{key:"EnableEditor",value:function EnableEditor(){Ll.enabled=!0}},{key:"IsCanvas",value:function IsCanvas(){return Dl.phaserGameObject.renderer.type===S.CANVAS}},{key:"SetGameplayCameraOffset",value:function SetGameplayCameraOffset(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Ol.camera.x=t,Ol.camera.y=i,o&&_InternalUpdateCamera()}},{key:"GetGameplayCameraOffset",value:function GetGameplayCameraOffset(){return Ol.camera}},{key:"SetCameraCenter",value:function SetCameraCenter(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Ol.camera.centerX=t,Ol.camera.centerY=i}},{key:"SetPauseAllowedByStates",value:function SetPauseAllowedByStates(t){Ol.pauseAllowedByStates=t}},{key:"TryPauseGame",value:function TryPauseGame(){if(0==Ol.flags.allowPauseAlways){if(!Ol.pauseAllowedByStates)return;if(!Ol.pauseAllowedAfterStartGame)return}return!Ol.hasBeenPaused&&(Nl.PauseGameScenes(),!0)}},{key:"TryUnpauseGame",value:function TryUnpauseGame(){return!!Ol.hasBeenPaused&&(Nl.UnPauseGameScenes(),!0)}},{key:"UserMuteAudio",value:function UserMuteAudio(){Ol.audio.wasMutedManually=!0,Bl.MuteAudio(),Il.SaveGameSettings()}},{key:"UserUnmuteAudio",value:function UserUnmuteAudio(){Ol.audio.wasMutedManually=!1,Bl.UnmuteAudio(),Il.SaveGameSettings()}},{key:"PlayAudioFile",value:function PlayAudioFile(t){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Dl.soundInstanceCache[t])i=Dl.soundInstanceCache[t];else{if(!BMEngine.GetPhaserGame().cache.audio.exists(t))return void console.log("RETURNING, FAIL QUIETLY - NO AUDIO :",t);Ol.audioConfigCache[t]||(Ol.audioConfigCache[t]={volume:1,loop:!1},o&&Y(Ol.audioConfigCache[t],o));var a=Ol.audioConfigCache[t];i=BMEngine.GetPhaserGame().sound.add(t,a)}i.play(),Dl.soundInstanceCache[t]=i}},{key:"GetAudioState",value:function GetAudioState(){return Ol.audio.audioState}},{key:"GetDisplayDataCopy",value:function GetDisplayDataCopy(){return Y({},Ol.display)}},{key:"GetPhaserGame",value:function GetPhaserGame(){return Dl.phaserGameObject}},{key:"GetGameplayScene",value:function GetGameplayScene(){return console.assert(Dl.phaserScenes.game.ref,Dl.phaserScenes.game),Dl.phaserScenes.game.ref}},{key:"GetAudioModelInstance",value:function GetAudioModelInstance(){return Bl}},{key:"GetGameplayCamera",value:function GetGameplayCamera(){return BMEngine.GetGameplayScene().cameras.main}},{key:"GetRightForGameplayScene",value:function GetRightForGameplayScene(){var t=BMEngine.GetGameplayScene().cameras.main.worldView;return t.width+t.x}},{key:"GetInterfaceScene",value:function GetInterfaceScene(){return console.assert(Dl.phaserScenes.gameInterface.ref,Dl.phaserScenes.gameInterface),Dl.phaserScenes.gameInterface.ref}},{key:"GetEditorScene",value:function GetEditorScene(){return Dl.phaserScenes.pauseDisplayer.ref}},{key:"GetFileFromCache",value:function GetFileFromCache(t,i){return Dl.phaserGameObject.cache[t].get(i)}},{key:"IsRotationDisplayed",value:function IsRotationDisplayed(){return Ol.isRotationDisplayActive}},{key:"GetOrMakeContainerLayer",value:function GetOrMakeContainerLayer(t,i,o,a){var u=t+"_"+i+o+"_"+a;if(!Dl.phaserLayers[u]){if("gameplay"==t){var d=BMEngine.GetGameplayScene().make.container({},!1);BMEngine.GetGameplayScene().add.existing(d),d.setDepth(1e4*a),Dl.phaserLayers[u]={layer:d,anchorX:1,anchorY:1}}else{var b;"gui"==t?(b=BMEngine.GetInterfaceScene().make.container({},!1),BMEngine.GetInterfaceScene().add.existing(b)):"pause"==t&&(b=Dl.phaserScenes.pauseDisplayer.ref.make.container({},!1),Dl.phaserScenes.pauseDisplayer.ref.add.existing(b)),b.setDepth(1e4*a);var S=i,C=o;Dl.phaserLayers[u]={layer:b,anchorX:S,anchorY:C}}_InternalRepositionLayers()}return Dl.phaserLayers[u].layer}},{key:"GetSaveSlotReference",value:function GetSaveSlotReference(t){return Il.LoadGameData(t)}},{key:"SaveGame",value:function SaveGame(){Il.SaveCurrentSlot()}}]),BMEngine}(),Ol={refGameSave:{},refGameState:null,audioConfigCache:{},audio:{wasMutedManually:!1,wasMutedAutomatically:!1,audioState:1},pausedFromRotation:!1,isRotationDisplayActive:!1,hasBeenPaused:!1,pauseAllowedAfterStartGame:!1,pauseAllowedByStates:!1,flags:{disableSaveUserPrefs:0,disableSaveGameData:0,disableFakeMusicPreload:0,cordovaListenersEnabled:0,disableAutoPause:0,allowPauseAlways:0},camera:{x:0,y:0,centerX:!0,centerY:!1},display:{designWidth:1,designHeight:1,responsiveWidth:1,responsiveHeight:1,dpi:1,lastWidth:1,lastHeight:1},currentOrientation:"any",requiredOrientation:"any",gameManifestJSON:null,initVO:null},Ll={enabled:!1},Dl={gameSubEngineConfig:{},phaserGameObject:null,phaserLayers:{},soundInstanceCache:{},phaserScenes:{preloader:{ref:null,def:null,loadedPreloaderInitials:!1,loadedGameAssets:!1,assetsRealLoadPercentage:0,assetsRealLoadDone:!1,funcRefUpdatePreloaderFont:null,funcRefCompletePreload:null,extraMaxRequiredTime:5e3,extraCurRequiredTime:0},resizeHandler:{ref:null,def:null},pauseDisplayer:{ref:null,def:null},rotateDisplayer:{ref:null,def:null,layer:null,bg:null,rotateHelper:null},controlPauseGameLoop:{ref:null,def:null},game:{ref:null,def:null},gameInterface:{ref:null,def:null}}};function UsePhaserSubEngine(t){Y(Ol.flags,t.data.flagOverrides);var i=Y(Dl.gameSubEngineConfig,t.data.gameSubEngineConfig);Ll.enabled&&(i.backgroundColor="0x000000"),Ol.requiredOrientation=t.data.requiredScreenOrientation,Ol.initVO=t,t.data.funcDoGameRegisters();var o=t.data.preloaderInitialsAssetsNames,u=t.data.initialAssetPackData,d=t.data.funcStartGame,b=!1;GetOs().android&&function GetBrowser(){if(kt)return Rt;kt=!0;var t=navigator.userAgent;return/Edge\/\d+/.test(t)?Rt.edge=!0:/Chrome\/(\d+)/.test(t)&&!GetOs().windowsPhone?(Rt.chrome=!0,Rt.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(t)?(Rt.firefox=!0,Rt.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(t)&&GetOs().iOS?Rt.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(t)?(Rt.ie=!0,Rt.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(t)?Rt.opera=!0:/Safari/.test(t)&&!GetOs().windowsPhone?Rt.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(t)&&(Rt.ie=!0,Rt.trident=!0,Rt.tridentVersion=parseInt(RegExp.$1,10),Rt.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(t)&&(Rt.silk=!0),Rt}().firefox&&(i.type=S.CANVAS),!GetOs().desktop&&GetOs().iOS&&(b=!0),GetOs().desktop&&GetOs().macOS&&(b=!0),i.fps={forceSetTimeOut:!1,target:60},b&&(i.type=S.CANVAS,i.fps={forceSetTimeOut:!0,target:60},i.roundPixels=!1),i.type=pt.GetSingleton().onGetRendererTypeOverride(i.type);var C=function recalcDisplayValues(){if(GetOs().desktop)Ol.display.designWidth=i.scale.width,Ol.display.designHeight=i.scale.height;else{var t=i.scale.height/i.scale.width,o=Yl.GetRealScreenHeight()/Yl.GetRealScreenWidth()/t;o=Me(o,1,2),Ol.display.dpi=o,Ol.display.designWidth=i.scale.width*Ol.display.dpi,Ol.display.designHeight=i.scale.height*Ol.display.dpi}};C(),i.plugins=Rl;var P=new S.Game(i);Dl.phaserGameObject=P,P.events.addListener(S.Core.Events.BLUR,(function(){Ol.flags.disableAutoPause||mt.hasKey("PauseGame")&&(Bl.TryToAutomaticallyMuteIfNotMutedManually(),mt.runCommand("PauseGame"))})),P.events.addListener(S.Core.Events.FOCUS,(function(){Ol.pausedFromRotation||Bl.TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically()})),document.addEventListener("visibilitychange",(function(){if(document.hidden){if(Ol.flags.disableAutoPause)return;mt.hasKey("PauseGame")&&(mt.runCommand("PauseGame"),Bl.TryToAutomaticallyMuteIfNotMutedManually())}else{if(Ol.pausedFromRotation)return;Bl.TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically()}}),!1),document.addEventListener("pause",(function(){if(document.hidden){if(Ol.flags.disableAutoPause)return;mt.hasKey("PauseGame")&&(mt.runCommand("PauseGame"),Bl.TryToAutomaticallyMuteIfNotMutedManually())}}),!1),window.document.addEventListener("resume",(function(){Ol.pausedFromRotation||Bl.TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically()}),!1);var R=function _resize(){C();var t=Yl.GetRealScreenWidth()/Yl.GetRealScreenHeight(),i=Ol.display.designHeight/Ol.display.designWidth;if(Ol.display.responsiveWidth=Ol.display.designWidth*i*t,Ol.display.responsiveHeight=Ol.display.designHeight,Ol.display.responsiveWidth<10&&(Ol.display.responsiveWidth=10),Ol.display.responsiveHeight<10&&(Ol.display.responsiveWidth=10),Ol.display.responsiveWidth>15e3&&(Ol.display.responsiveWidth=15e3),Ol.display.responsiveHeight>15e3&&(Ol.display.responsiveWidth=15e3),P.scale.setGameSize(Ol.display.responsiveWidth,Ol.display.responsiveHeight),Ll.enabled){var o=[kl.GetGameplayScene().cameras,kl.GetInterfaceScene().cameras];for(var a in o){var u=o[a],d=Ol.display.responsiveHeight,b=Ol.display.responsiveWidth;u.main.setViewport(b/4,0,b/2,d)}}_InternalRepositionLayers()};Dl.phaserScenes.resizeHandler.def={create:function create(){R(),window.addEventListener("resize",(function(){R()}))},update:function update(){Yl.GetRealScreenWidth()==Ol.display.lastWidth&&Yl.GetRealScreenHeight()==Ol.display.lastHeight||(Ol.display.lastWidth=Yl.GetRealScreenWidth(),Ol.display.lastHeight=Yl.GetRealScreenHeight(),R())}},Dl.phaserScenes.preloader.def={preload:function preload(){var t=this,b=this,S=new a;S.fillRequestDataFrom(u),S.supplyLoadFunctionDictionary(b,(function(){var u=t.make.container({},!0),S=t.make.image({x:0,y:0,key:o.logo,add:!0},!1),C=t.make.bitmapText({x:0,y:125,font:o.font,text:"0",size:!1,add:!0,align:1},!1);u.add(S),u.add(C);var M=function repositionLayer(){u.x=Ol.display.responsiveWidth/2,u.y=Ol.display.responsiveHeight/2};M(),window.addEventListener("resize",M),Dl.phaserScenes.preloader.funcRefCompletePreload=function(){Dl.phaserScenes.preloader.funcRefCompletePreload=null,S.destroy(),C.destroy(),u.destroy(),window.removeEventListener("resize",M),b.game.scene.stop("PreloaderScene");!function validator(){i.optionalLoadDelayValidator?(i.optionalValidatorBreak&&(i.optionalValidatorBreak.val-=1,i.optionalValidatorBreak.val<=0&&(i.optionalValidatorBreak=null,i.optionalLoadDelayValidator=null)),i.optionalLoadDelayValidator()&&(i.optionalLoadDelayValidator=null),Mt.QueueDelayedFunction(GetGUID(),10,(function(){validator()}))):(Il.LoadGameSettings(),-1==Ol.audio.audioState&&kl.UserMuteAudio(),d(),Ol.pauseAllowedAfterStartGame=!0)}()},Dl.phaserScenes.preloader.funcRefUpdatePreloaderFont=function(){var t=Math.ceil(100*Dl.phaserScenes.preloader.assetsRealLoadPercentage);if(Ol.flags.disableFakeMusicPreload)C.text=t+"%",C.x=-C.width/2;else{t*=.75;var i=Dl.phaserScenes.preloader.extraCurRequiredTime/Dl.phaserScenes.preloader.extraMaxRequiredTime;i=Math.ceil(.25*i*100),t=Math.ceil(t+i),C.text=t+"%",C.x=-C.width/2}},Ol.gameManifestJSON=kl.GetFileFromCache("json",o.manifestJson);var P=new a;P.fillRequestDataFrom(Ol.gameManifestJSON.assets),P.supplyLoadFunctionDictionary(b,(function(){Dl.phaserScenes.preloader.assetsRealLoadPercentage=1,Dl.phaserScenes.preloader.assetsRealLoadDone=!0})),b.load.on("progress",(function(t){Dl.phaserScenes.preloader.funcRefUpdatePreloaderFont&&(Dl.phaserScenes.preloader.assetsRealLoadPercentage=t,Dl.phaserScenes.preloader.funcRefUpdatePreloaderFont())})),P.load(),b.load.start()})),S.load()},create:function create(){},update:function update(t,i){if(Dl.phaserScenes.preloader.funcRefCompletePreload&&Dl.phaserScenes.preloader.funcRefUpdatePreloaderFont){Dl.phaserScenes.preloader.assetsRealLoadDone&&(Dl.phaserScenes.preloader.assetsRealLoadPercentage=1);var o=!1;if(1==Ol.flags.disableFakeMusicPreload)o=!0;else if(Dl.phaserScenes.preloader.assetsRealLoadPercentage>=.75){var a=1;Dl.phaserScenes.preloader.assetsRealLoadDone&&(a=5),Dl.phaserScenes.preloader.extraCurRequiredTime+=i*a,Dl.phaserScenes.preloader.extraCurRequiredTime>=Dl.phaserScenes.preloader.extraMaxRequiredTime&&(Dl.phaserScenes.preloader.extraCurRequiredTime=Dl.phaserScenes.preloader.extraMaxRequiredTime,o=!0)}Dl.phaserScenes.preloader.funcRefUpdatePreloaderFont(),Dl.phaserScenes.preloader.assetsRealLoadDone&&o&&Dl.phaserScenes.preloader.funcRefCompletePreload()}}},Dl.phaserScenes.rotateDisplayer.def={create:function create(){Dl.phaserScenes.rotateDisplayer.ref=this,Dl.phaserScenes.rotateDisplayer.layer=this.make.container({},!0)},update:function update(){Dl.phaserScenes.rotateDisplayer.bg&&Dl.phaserScenes.rotateDisplayer.def.updateRotateSize()},showRotate:function showRotate(){Dl.phaserScenes.rotateDisplayer.bg||(Dl.phaserScenes.rotateDisplayer.bg=Dl.phaserScenes.rotateDisplayer.ref.make.image({x:0,y:0,key:"RotateBG",add:!1},!1),Dl.phaserScenes.rotateDisplayer.rotateHelper=Dl.phaserScenes.rotateDisplayer.ref.make.image({x:0,y:0,key:"NeedPortrait",add:!1},!1),Dl.phaserScenes.rotateDisplayer.def.updateRotateSize(),Dl.phaserScenes.rotateDisplayer.layer.add(Dl.phaserScenes.rotateDisplayer.bg),Dl.phaserScenes.rotateDisplayer.layer.add(Dl.phaserScenes.rotateDisplayer.rotateHelper))},hideRotate:function hideRotate(){Dl.phaserScenes.rotateDisplayer.bg&&Dl.phaserScenes.rotateDisplayer.bg.destroy(),Dl.phaserScenes.rotateDisplayer.bg=null,Dl.phaserScenes.rotateDisplayer.rotateHelper&&Dl.phaserScenes.rotateDisplayer.rotateHelper.destroy(),Dl.phaserScenes.rotateDisplayer.rotateHelper=null},updateRotateSize:function updateRotateSize(){Dl.phaserScenes.rotateDisplayer.bg.setDisplaySize(4096,4096),Dl.phaserScenes.rotateDisplayer.layer.x=Ol.display.responsiveWidth/2,Dl.phaserScenes.rotateDisplayer.layer.y=Ol.display.responsiveHeight/2}},Dl.phaserScenes.pauseDisplayer.def={create:function create(){Dl.phaserScenes.pauseDisplayer.ref=this},update:function update(){}},Dl.phaserScenes.controlPauseGameLoop.def={create:function create(){},update:function update(){var t;"any"!=Ol.requiredOrientation&&(Dl.phaserScenes.preloader.assetsRealLoadDone&&(t=Yl.GetRealScreenWidth()>Yl.GetRealScreenHeight()?"landscape":"portrait",Ol.currentOrientation!=t&&(Ol.currentOrientation=t,Ol.requiredOrientation==Ol.currentOrientation?(Ol.isRotationDisplayActive=!1,Dl.phaserScenes.rotateDisplayer.def.hideRotate(),Bl.TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically(),Ol.pausedFromRotation&&(Ol.pausedFromRotation=!1)):(Ol.isRotationDisplayActive=!0,Dl.phaserScenes.rotateDisplayer.def.showRotate(),Bl.TryToAutomaticallyMuteIfNotMutedManually(),Ol.hasBeenPaused||(mt.runCommand("PauseGame"),Ol.pausedFromRotation=!0)))))}},Dl.phaserScenes.gameInterface.def={create:function create(){Dl.phaserScenes.gameInterface.ref=this},update:function update(){}},Dl.phaserScenes.game.def={create:function create(){Dl.phaserScenes.game.ref=this,M.InitRoutines()},update:function update(t,i){Ol.isRotationDisplayActive||(_InternalUpdateCamera(),M.UpdateRoutines(t,i),pt.GetSingleton().updateTime(i))}},P.scene.add("PreloaderScene",Dl.phaserScenes.preloader.def,!0),P.scene.add("GameScene",Dl.phaserScenes.game.def,!0),P.scene.add("GameInterface",Dl.phaserScenes.gameInterface.def,!0),P.scene.add("RotateDeviceSceneDisplayer",Dl.phaserScenes.rotateDisplayer.def,!0),P.scene.add("ControlPauseGameLoop",Dl.phaserScenes.controlPauseGameLoop.def,!0),P.scene.add("PauseSceneDisplayer",Dl.phaserScenes.pauseDisplayer.def,!0),P.scene.add("ResizeHandlerScene",Dl.phaserScenes.resizeHandler.def,!0),console.log("DisplayData: ",Ol.display)}var Il=function(){function InternalSaveModel(){_classCallCheck(this,InternalSaveModel)}return _createClass(InternalSaveModel,null,[{key:"GetSaveSlotKey",value:function GetSaveSlotKey(){return Ol.initVO.data.gameName+"_slot_"+Ol.initVO.data.gameVersion+"_major_3"}},{key:"SaveCurrentSlot",value:function SaveCurrentSlot(){1!=Ol.flags.disableSaveGameData&&pt.GetSingleton().adaptLocalStorageSetItem(InternalSaveModel.GetSaveSlotKey(),JSON.stringify(Ol.refGameSave))}},{key:"SaveGameSettings",value:function SaveGameSettings(){1!=Ol.flags.disableSaveUserPrefs&&pt.GetSingleton().adaptLocalStorageSetItem(InternalSaveModel.GetSaveSlotKey(),JSON.stringify(Ol.refGameSave))}},{key:"LoadGameSettings",value:function LoadGameSettings(){if(1!=Ol.flags.disableSaveUserPrefs){var t=pt.GetSingleton().adaptLocalStorageGetItem(InternalSaveModel.GetSaveSlotKey()),i={version:1,audio:{audioState:Ol.audio.audioState},gameState:null};null==t?(Ol.refGameSave=i,this.SaveGameSettings()):(Ol.refGameSave=i,Y(Ol.refGameSave,JSON.parse(t))),Ol.audio=Ol.refGameSave.audio}}},{key:"LoadGameData",value:function LoadGameData(t){return 1==Ol.flags.disableSaveGameData?(Ol.refGameState=t,t):(null==Ol.refGameSave.gameState&&(Ol.refGameSave.gameState={},Y(Ol.refGameSave.gameState,t)),Ol.refGameState=Ol.refGameSave.gameState,Ol.refGameState)}}]),InternalSaveModel}(),Fl=function(){function InternalAudioModel(){_classCallCheck(this,InternalAudioModel)}return _createClass(InternalAudioModel,[{key:"MuteAudio",value:function MuteAudio(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&(Ol.audio.audioState=-1),kl.GetGameplayScene().sound.setMute(!0)}},{key:"UnmuteAudio",value:function UnmuteAudio(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&(Ol.audio.audioState=1),kl.GetGameplayScene().sound.setMute(!1)}},{key:"TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically",value:function TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically(){Ol.audio.wasMutedManually||Ol.audio.wasMutedAutomatically&&(Ol.audio.wasMutedAutomatically=!1,Bl.UnmuteAudio(!1))}},{key:"TryToAutomaticallyMuteIfNotMutedManually",value:function TryToAutomaticallyMuteIfNotMutedManually(){Ol.audio.wasMutedManually||Ol.audio.wasMutedAutomatically||(Ol.audio.wasMutedAutomatically=!0,Bl.MuteAudio(!1))}}]),InternalAudioModel}(),Bl=new Fl,Nl=function(){function InternalPauseModel(){_classCallCheck(this,InternalPauseModel)}return _createClass(InternalPauseModel,null,[{key:"PauseGameScenes",value:function PauseGameScenes(){Ol.hasBeenPaused||(Ol.hasBeenPaused=!0,Dl.phaserScenes.game.ref&&Dl.phaserScenes.game.ref.sys.pause(),Dl.phaserScenes.gameInterface.ref&&Dl.phaserScenes.gameInterface.ref.sys.pause())}},{key:"UnPauseGameScenes",value:function UnPauseGameScenes(){Ol.hasBeenPaused&&(Ol.hasBeenPaused=!1,Dl.phaserScenes.game.ref&&Dl.phaserScenes.game.ref.sys.resume(),Dl.phaserScenes.gameInterface.ref&&Dl.phaserScenes.gameInterface.ref.sys.resume())}}]),InternalPauseModel}(),Yl=function(){function InternalScreenModel(){_classCallCheck(this,InternalScreenModel)}return _createClass(InternalScreenModel,null,[{key:"GetRealScreenSize",value:function GetRealScreenSize(){var t=window.innerWidth,i=window.innerHeight;document.documentElement&&"clientWidth"in document.documentElement&&(t=document.documentElement.clientWidth,i=document.documentElement.clientHeight);var o={bottom:0,top:0};GetOs().iOS&&(document.documentElement&&"getBoundingClientRect"in document.documentElement?o=document.documentElement.getBoundingClientRect():"getBoundingClientRect"in document.body&&(o=document.body.getBoundingClientRect()),o&&(t=o.right-o.left,i=o.bottom-o.top));var a={w:t,h:i};return a.h=window.innerHeight,a}},{key:"GetRealScreenHeight",value:function GetRealScreenHeight(){return InternalScreenModel.GetRealScreenSize().h}},{key:"GetRealScreenWidth",value:function GetRealScreenWidth(){return InternalScreenModel.GetRealScreenSize().w}}]),InternalScreenModel}();function _InternalUpdateCamera(){kl.GetGameplayScene().cameras.main.scrollX=-kl.GetGameplayScene().cameras.main.width/2+Ol.camera.x,Ol.camera.centerY?kl.GetGameplayScene().cameras.main.scrollY=-kl.GetGameplayScene().cameras.main.height/2+Ol.camera.y:kl.GetGameplayScene().cameras.main.scrollY=Ol.camera.y}function _InternalRepositionLayers(){for(var t in Dl.phaserLayers){var i=Dl.phaserLayers[t],o=i.layer.scene.cameras.main.width,a=i.layer.scene.cameras.main.height;2==i.anchorX&&(i.layer.x=o/2),3==i.anchorX&&(i.layer.x=o),2==i.anchorY&&(i.layer.y=a/2),3==i.anchorY&&(i.layer.y=a)}}var Gl=function(t){_inherits(OffscreenDieComponent,t);var i=_createSuper(OffscreenDieComponent);function OffscreenDieComponent(t){var o;_classCallCheck(this,OffscreenDieComponent),(o=i.call(this,null)).timeOffScreenMS=0,o.maxTimeOffScreenMS=1e4,o.wasOnScreen=!1;var a=JSON.parse(JSON.stringify(o.constructor.properties));return Object.assign(_assertThisInitialized(o),a,t),o}return _createClass(OffscreenDieComponent,null,[{key:"GetName",value:function GetName(){return"offscreenDie"}},{key:"properties",get:function get(){return{}}},{key:"At",value:function At(t){return t.offscreenDie}},{key:"AddToEntity",value:function AddToEntity(t,i){t.add(OffscreenDieComponent,i)}}]),OffscreenDieComponent}(G),Xl=function(){function DisposeEntityAction(){_classCallCheck(this,DisposeEntityAction)}return _createClass(DisposeEntityAction,null,[{key:"RegisterPackedAsGameCommand",value:function RegisterPackedAsGameCommand(){mt.register(this.Name,new gt((function(t){DisposeEntityAction.Take(t.entity)})))}},{key:"Take",value:function Take(t){Mt.QueueActorToDisposeBuffer(t)}}]),DisposeEntityAction}();function isNil(t){return null==t}function coerceToBoolean(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return isNil(t)?i:Boolean(t)}function isString(t){return"string"==typeof t}function coerceToString(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return isNil(t)?i:isString(t)?t:String(t)}function capitalize(t,i){var o=coerceToString(t),a=coerceToBoolean(i);return""===o?"":(a&&(o=o.toLowerCase()),o.substr(0,1).toUpperCase()+o.substr(1))}function lowerCase(t){return coerceToString(t,"").toLowerCase()}_defineProperty(Xl,"Name","DisposeEntityAction");var Ul="\\s\\uFEFF\\xA0",zl="\\u0300-\\u036F\\u1AB0-\\u1AFF\\u1DC0-\\u1DFF\\u20D0-\\u20FF\\uFE20-\\uFE2F",Vl="\\0-\\u02FF\\u0370-\\u1AAF\\u1B00-\\u1DBF\\u1E00-\\u20CF\\u2100-\\uD7FF\\uE000-\\uFE1F\\uFE30-\\uFFFF",Wl=new RegExp("(["+Vl+"]|["+"\\uD800-\\uDBFF]["+"\\uDC00-\\uDFFF]|["+"\\uD800-\\uDBFF](?!["+"\\uDC00-\\uDFFF])|(?:[^"+"\\uD800-\\uDBFF]|^)["+"\\uDC00-\\uDFFF])(["+zl+"]+)","g"),Hl=new RegExp("([\\uD800-\\uDBFF])([\\uDC00-\\uDFFF])","g"),jl=new RegExp("((?:["+Vl+"]|["+"\\uD800-\\uDBFF]["+"\\uDC00-\\uDFFF]|["+"\\uD800-\\uDBFF](?!["+"\\uDC00-\\uDFFF])|(?:[^"+"\\uD800-\\uDBFF]|^)["+"\\uDC00-\\uDFFF])(?:["+zl+"]+))|(["+"\\uD800-\\uDBFF]["+"\\uDC00-\\uDFFF])|([\\n\\r\\u2028\\u2029])|(.)","g"),ql=new RegExp("[\\s\\uFEFF\\xA0]"),Zl=new RegExp("^[\\s\\uFEFF\\xA0]+"),Kl=new RegExp("[\\s\\uFEFF\\xA0]+$"),Jl=new RegExp("^\\d+$"),Ql=/[-[\]{}()*+!<=:?./\\^$|#,]/g,$l=/[^A-Za-z0-9]/g,tu=/[<>&"'`]/g,eu=/(%{1,2})(?:(\d+)\$)?(\+)?([ 0]|'.{1})?(-)?(\d+)?(?:\.(\d+))?([bcdiouxXeEfgGs])?/g,iu=/\.?0+$/g,nu=/[gimuy]*$/,ru=/<([A-Za-z0-9]+)>/g,su="a-z\\xB5\\xDF-\\xF6\\xF8-\\xFF\\u0101\\u0103\\u0105\\u0107\\u0109\\u010B\\u010D\\u010F\\u0111\\u0113\\u0115\\u0117\\u0119\\u011B\\u011D\\u011F\\u0121\\u0123\\u0125\\u0127\\u0129\\u012B\\u012D\\u012F\\u0131\\u0133\\u0135\\u0137\\u0138\\u013A\\u013C\\u013E\\u0140\\u0142\\u0144\\u0146\\u0148\\u0149\\u014B\\u014D\\u014F\\u0151\\u0153\\u0155\\u0157\\u0159\\u015B\\u015D\\u015F\\u0161\\u0163\\u0165\\u0167\\u0169\\u016B\\u016D\\u016F\\u0171\\u0173\\u0175\\u0177\\u017A\\u017C\\u017E-\\u0180\\u0183\\u0185\\u0188\\u018C\\u018D\\u0192\\u0195\\u0199-\\u019B\\u019E\\u01A1\\u01A3\\u01A5\\u01A8\\u01AA\\u01AB\\u01AD\\u01B0\\u01B4\\u01B6\\u01B9\\u01BA\\u01BD-\\u01BF\\u01C6\\u01C9\\u01CC\\u01CE\\u01D0\\u01D2\\u01D4\\u01D6\\u01D8\\u01DA\\u01DC\\u01DD\\u01DF\\u01E1\\u01E3\\u01E5\\u01E7\\u01E9\\u01EB\\u01ED\\u01EF\\u01F0\\u01F3\\u01F5\\u01F9\\u01FB\\u01FD\\u01FF\\u0201\\u0203\\u0205\\u0207\\u0209\\u020B\\u020D\\u020F\\u0211\\u0213\\u0215\\u0217\\u0219\\u021B\\u021D\\u021F\\u0221\\u0223\\u0225\\u0227\\u0229\\u022B\\u022D\\u022F\\u0231\\u0233-\\u0239\\u023C\\u023F\\u0240\\u0242\\u0247\\u0249\\u024B\\u024D\\u024F",ou="\\x41-\\x5a\\xc0-\\xd6\\xd8-\\xde\\u0100\\u0102\\u0104\\u0106\\u0108\\u010a\\u010c\\u010e\\u0110\\u0112\\u0114\\u0116\\u0118\\u011a\\u011c\\u011e\\u0120\\u0122\\u0124\\u0126\\u0128\\u012a\\u012c\\u012e\\u0130\\u0132\\u0134\\u0136\\u0139\\u013b\\u013d\\u013f\\u0141\\u0143\\u0145\\u0147\\u014a\\u014c\\u014e\\u0150\\u0152\\u0154\\u0156\\u0158\\u015a\\u015c\\u015e\\u0160\\u0162\\u0164\\u0166\\u0168\\u016a\\u016c\\u016e\\u0170\\u0172\\u0174\\u0176\\u0178\\u0179\\u017b\\u017d\\u0181\\u0182\\u0184\\u0186\\u0187\\u0189-\\u018b\\u018e-\\u0191\\u0193\\u0194\\u0196-\\u0198\\u019c\\u019d\\u019f\\u01a0\\u01a2\\u01a4\\u01a6\\u01a7\\u01a9\\u01ac\\u01ae\\u01af\\u01b1-\\u01b3\\u01b5\\u01b7\\u01b8\\u01bc\\u01c4\\u01c5\\u01c7\\u01c8\\u01ca\\u01cb\\u01cd\\u01cf\\u01d1\\u01d3\\u01d5\\u01d7\\u01d9\\u01db\\u01de\\u01e0\\u01e2\\u01e4\\u01e6\\u01e8\\u01ea\\u01ec\\u01ee\\u01f1\\u01f2\\u01f4\\u01f6-\\u01f8\\u01fa\\u01fc\\u01fe\\u0200\\u0202\\u0204\\u0206\\u0208\\u020a\\u020c\\u020e\\u0210\\u0212\\u0214\\u0216\\u0218\\u021a\\u021c\\u021e\\u0220\\u0222\\u0224\\u0226\\u0228\\u022a\\u022c\\u022e\\u0230\\u0232\\u023a\\u023b\\u023d\\u023e\\u0241\\u0243-\\u0246\\u0248\\u024a\\u024c\\u024e",au=new RegExp("(?:["+ou+"]["+zl+"]*)?(?:["+su+"]["+zl+"]*)+|(?:["+ou+"]["+zl+"]*)+(?!["+su+"])|["+"\\d]+|[\\u2700-\\u27BF]|[^\\x00-\\x2F\\x3A-\\x40\\x5B-\\x60\\x7b-\\xBF\\xD7\\xF7\\u2000-\\u206F"+Ul+"]+","g"),hu=/[A-Z\xC0-\xD6\xD8-\xDE]?[a-z\xDF-\xF6\xF8-\xFF]+|[A-Z\xC0-\xD6\xD8-\xDE]+(?![a-z\xDF-\xF6\xF8-\xFF])|\d+/g,lu=new RegExp("^(?:["+su+ou+"]["+zl+"]*)+$"),uu=new RegExp("^((?:["+su+ou+"]["+zl+"]*)|["+"\\d])+$"),cu=/^[\x01-\xFF]*$/;function nilDefault(t,i){return null==t?i:t}function toString(t){return isNil(t)?null:isString(t)?t:String(t)}function words(t,i,o){var a=coerceToString(t),u=void 0;if(isNil(i))u=cu.test(a)?hu:au;else if(i instanceof RegExp)u=i;else{var d=toString(nilDefault(o,""));u=new RegExp(toString(i),d)}return nilDefault(a.match(u),[])}function wordToCamel(t,i){return 0===i?lowerCase(t):capitalize(t,!0)}function kebabCase(t){var i=coerceToString(t);return""===i?"":words(i).map(lowerCase).join("-")}function swapAndConcat(t,i){var o=i.toLowerCase(),a=i.toUpperCase();return t+(i===o?a:o)}function clipNumber(t,i,o){return t<=i?i:t>=o?o:t}var du=9007199254740991;function toInteger(t){return t===1/0?du:t===-1/0?-9007199254740991:~~t}function truncate(t,i,o){var a=coerceToString(t),u=isNil(i)?a.length:clipNumber(toInteger(i),0,du),d=coerceToString(o,"...");return u>=a.length?a:a.substr(0,i-d.length)+d}function coerceToNumber(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return isNil(t)?i:"number"==typeof t?t:Number(t)}function nanDefault(t,i){return t!=t?i:t}function codePointAt(t,i){var o=coerceToString(t),a=o.length,u=coerceToNumber(i);if(!((u=nanDefault(u,0))<0||u>=a)){var d=o.charCodeAt(u),b=void 0;return function isHighSurrogate(t){return t>=55296&&t<=56319}(d)&&a>u+1&&function isLowSurrogate(t){return t>=56320&&t<=57343}(b=o.charCodeAt(u+1))?function getAstralNumberFromSurrogatePair(t,i){return 1024*(t-55296)+i-56320+65536}(d,b):d}}var fu=Array.prototype.reduce;function ReplacementIndex(){this.index=0}ReplacementIndex.prototype.increment=function(){this.index++},ReplacementIndex.prototype.incrementOnEmptyPosition=function(t){isNil(t)&&this.increment()},ReplacementIndex.prototype.getIndexByPosition=function(t){return isNil(t)?this.index:t-1};var pu="G";function repeat(t,i){for(var o=coerceToString(t),a=isNil(i)?1:clipNumber(toInteger(i),0,du),u="";a;)1&a&&(u+=o),a>1&&(o+=o),a>>=1;return u}function buildPadding(t,i){return repeat(t,toInteger(i/t.length)+i%t.length).substr(0,i)}function padLeft(t,i,o){var a=coerceToString(t),u=isNil(i)?0:clipNumber(toInteger(i),0,du),d=coerceToString(o," ");return u<=a.length?a:buildPadding(d,u-a.length)+a}function padRight(t,i,o){var a=coerceToString(t),u=isNil(i)?0:clipNumber(toInteger(i),0,du),d=coerceToString(o," ");return u<=a.length?a:a+buildPadding(d,u-a.length)}function addSignToFormattedNumber(t,i,o){return"+"===o.signSpecifier&&t>=0&&(i="+"+i),i}function float(t,i){var o=parseFloat(t),a=void 0;isNaN(o)&&(o=0);var u=coerceToNumber(i.precision,6);switch(i.typeSpecifier){case"f":a=o.toFixed(u);break;case"e":a=o.toExponential(u);break;case"E":a=o.toExponential(u).toUpperCase();break;case"g":case"G":a=function formatFloatAsShort(t,i,o){if(0===t)return"0";var a=0===i?1:i,u=t.toPrecision(a).replace(iu,"");o.typeSpecifier===pu&&(u=u.toUpperCase());return u}(o,u,i)}return coerceToString(a=addSignToFormattedNumber(o,a,i))}function integerBase(t,i){var o=parseInt(t);switch(isNaN(o)&&(o=0),o>>>=0,i.typeSpecifier){case"c":o=String.fromCharCode(o);break;case"b":o=o.toString(2);break;case"o":o=o.toString(8);break;case"x":o=o.toString(16);break;case"X":o=o.toString(16).toUpperCase()}return coerceToString(o)}function integerDecimal(t,i){var o=parseInt(t);return isNaN(o)&&(o=0),addSignToFormattedNumber(o,toString(o),i)}function stringFormat(t,i){var o=t,a=i.precision;return!isNil(a)&&o.length>a&&(o=truncate(o,a,"")),o}function compute(t,i){var o=void 0;switch(i.typeSpecifier){case"s":o=stringFormat;break;case"d":case"i":o=integerDecimal;break;case"c":case"b":case"o":case"x":case"X":case"u":o=integerBase;break;case"f":case"e":case"E":case"g":case pu:o=float}return function alignAndPad(t,i){var o=i.width;return isNil(o)||t.length>=o?t:("-"===i.alignmentSpecifier?padRight:padLeft)(t,o,i.getPaddingCharacter())}(o(t,i),i)}function ConversionSpecification(t){this.percent=t.percent,this.signSpecifier=t.signSpecifier,this.paddingSpecifier=t.paddingSpecifier,this.alignmentSpecifier=t.alignmentSpecifier,this.width=t.width,this.precision=t.precision,this.typeSpecifier=t.typeSpecifier}function match(t,i,o,a,u,d,b,S,C,M,P){var R=new ConversionSpecification({percent:a,signSpecifier:d,paddingSpecifier:b,alignmentSpecifier:S,width:coerceToNumber(C,null),precision:coerceToNumber(M,null),typeSpecifier:P});if(R.isPercentLiteral())return o.slice(1);var O=t.getIndexByPosition(u);return t.incrementOnEmptyPosition(u),function validate(t,i,o){if(isNil(o.typeSpecifier))throw new Error("sprintf(): Unknown type specifier");if(t>i-1)throw new Error("sprintf(): Too few arguments");if(t<0)throw new Error("sprintf(): Argument number must be greater than zero")}(O,i.length,R),compute(i[O],R)}function sprintf(t){var i=coerceToString(t);if(""===i)return i;for(var o=arguments.length,a=Array(o>1?o-1:0),u=1;u<o;u++)a[u-1]=arguments[u];var d=match.bind(void 0,new ReplacementIndex,a);return i.replace(eu,d)}ConversionSpecification.prototype.isPercentLiteral=function(){return"%%"===this.percent},ConversionSpecification.prototype.getPaddingCharacter=function(){var t=nilDefault(this.paddingSpecifier," ");return 2===t.length&&"'"===t[0]&&(t=t[1]),t};var gu={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};function replaceSpecialCharacter(t){return gu[t]}function escapeRegExp(t){return coerceToString(t).replace(Ql,"\\$&")}var vu={"<":/(&lt;)|(&#x0*3c;)|(&#0*60;)/gi,">":/(&gt;)|(&#x0*3e;)|(&#0*62;)/gi,"&":/(&amp;)|(&#x0*26;)|(&#0*38;)/gi,'"':/(&quot;)|(&#x0*22;)|(&#0*34;)/gi,"'":/(&#x0*27;)|(&#0*39;)/gi,"`":/(&#x0*60;)|(&#0*96;)/gi},mu=Object.keys(vu);function reduceUnescapedString(t,i){return t.replace(vu[i],i)}var yu={3:"",8:"",A:"A",B:"B",C:"C",D:"D",E:"E",F:"F",G:"G",H:"H",I:"I",J:"J",K:"K",L:"L",M:"M",N:"N",O:"O",P:"P",Q:"Q",R:"R",S:"S",T:"T",U:"U",V:"V",W:"W",X:"X",Y:"Y",Z:"Z",a:"a",b:"b",c:"c",d:"d",e:"e",f:"f",g:"g",h:"h",i:"i",j:"j",k:"k",l:"l",m:"m",n:"n",o:"o",p:"p",q:"q",r:"r",s:"s",t:"t",u:"u",v:"v",w:"w",x:"x",y:"y",z:"z",OE:"",oe:"",AE:"",ae:"",hv:"",OI:"",oi:"",DZ:"",Dz:"",dz:"",LJ:"",Lj:"",lj:"",NJ:"",Nj:"",nj:"",OU:"",ou:"",TZ:"",tz:"",AA:"",aa:"",AO:"",ao:"",AU:"",au:"",AV:"",av:"",AY:"",ay:"",OO:"",oo:"",VY:"",vy:"",TH:"",th:"",PS:"",ps:"",Yo:"",Ye:"",Yi:"",Zh:"",Ch:"",Sh:"","":"",Yu:"",Ya:"",zh:"",ch:"",sh:"",yu:"",ya:"",yo:"",ye:"",yi:""},xu=null;function getLatinCharacter(t){var i=function getDiacriticsMap(){return null!==xu||(xu={},Object.keys(yu).forEach((function(t){for(var i=yu[t],o=0;o<i.length;o++){var a=i[o];xu[a]=t}}))),xu}()[t];return i||t}function removeCombiningMarks(t,i){return i}function latinise(t){var i=coerceToString(t);return""===i?"":i.replace($l,getLatinCharacter).replace(Wl,removeCombiningMarks)}function includes(t,i,o){var a=coerceToString(t),u=toString(i);return null!==u&&(""===u||(o=isNil(o)?0:clipNumber(toInteger(o),0,a.length),-1!==a.indexOf(u,o)))}function appendFlagToRegExp(t,i){var o=function getRegExpFlags(t){return t.toString().match(nu)[0]}(t);return includes(o,i)?t:new RegExp(t.source,o+i)}var _slicedToArray=function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function sliceIterator(t,i){var o=[],a=!0,u=!1,d=void 0;try{for(var b,S=t[Symbol.iterator]();!(a=(b=S.next()).done)&&(o.push(b.value),!i||o.length!==i);a=!0);}catch(C){u=!0,d=C}finally{try{!a&&S.return&&S.return()}finally{if(u)throw d}}return o}(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function sortStringByLength(t,i){return t.length===i.length?0:t.length<i.length?1:-1}var Tu=Array.prototype.reduce;function trimLeft(t,i){var o=coerceToString(t);if(""===i||""===o)return o;var a=toString(i);if(isNil(a))return o.replace(Zl,"");var u=!0;return Tu.call(o,(function(t,i){return u&&includes(a,i)?t:(u=!1,t+i)}),"")}var bu=Array.prototype.reduceRight;function trimRight(t,i){var o=coerceToString(t);if(""===i||""===o)return o;var a=toString(i);if(isNil(a))return o.replace(Kl,"");var u=!0;return bu.call(o,(function(t,i){return u&&includes(a,i)?t:(u=!1,i+t)}),"")}function determineOptions(t){return{width:coerceToNumber(t.width,75),newLine:coerceToString(t.newLine,"\n"),indent:coerceToString(t.indent,""),cut:coerceToBoolean(t.cut,!1)}}function isAlpha(t){var i=coerceToString(t);return lu.test(i)}function hasSubstringAtIndex(t,i,o){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u=0;a&&(u=1-i.length);var d=t.substr(o+u,i.length);return d.toLowerCase()===i}function parseTagName(t){for(var i=0,o="",a=0;2!==i;){var u=t[a++].toLowerCase();switch(u){case"<":break;case">":i=2;break;default:ql.test(u)?1===i&&(i=2):(0===i&&(i=1),"/"!==u&&(o+=u))}}return o}var wu=null;var Su=function getGlobalObject(){return null!==wu?wu:wu="object"===("undefined"==typeof global?"undefined":_typeof(global))&&global.Object===Object?global:"object"===("undefined"==typeof self?"undefined":_typeof(self))&&self.Object===Object?self:new Function("return this")()}(),Cu=Su.v;var Au={camelCase:function camelCase(t){var i=coerceToString(t);return""===i?"":words(i).map(wordToCamel).join("")},capitalize:capitalize,decapitalize:function decapitalize(t){var i=coerceToString(t);return""===i?"":i.substr(0,1).toLowerCase()+i.substr(1)},kebabCase:kebabCase,lowerCase:lowerCase,snakeCase:function snakeCase(t){var i=coerceToString(t);return""===i?"":words(i).map(lowerCase).join("_")},swapCase:function swapCase(t){return coerceToString(t).split("").reduce(swapAndConcat,"")},titleCase:function titleCase(t,i){var o=coerceToString(t),a=Array.isArray(i)?i:[],u=cu.test(o)?hu:au;return o.replace(u,(function(t,i){return i>0&&a.indexOf(o[i-1])>=0?t.toLowerCase():capitalize(t,!0)}))},upperCase:function upperCase(t){return coerceToString(t).toUpperCase()},count:function count(t){return coerceToString(t).length},countGraphemes:function countGrapheme(t){return coerceToString(t).replace(Wl,"*").replace(Hl,"*").length},countSubstrings:function countSubstrings(t,i){var o=coerceToString(t),a=coerceToString(i),u=a.length,d=0,b=0;if(""===o||""===a)return d;do{-1!==(b=o.indexOf(a,b))&&(d++,b+=u)}while(-1!==b);return d},countWhere:function countWhere(t,i,o){var a=coerceToString(t);if(""===a||"function"!=typeof i)return 0;var u=i.bind(o);return fu.call(a,(function(t,i,o){return u(i,o,a)?t+1:t}),0)},countWords:function countWords(t,i,o){return words(t,i,o).length},escapeHtml:function escapeHtml(t){return coerceToString(t).replace(tu,replaceSpecialCharacter)},escapeRegExp:escapeRegExp,unescapeHtml:function unescapeHtml(t){var i=coerceToString(t);return mu.reduce(reduceUnescapedString,i)},sprintf:sprintf,vprintf:function vprintf(t,i){return sprintf.apply(void 0,[t].concat(function _toConsumableArray(t){if(Array.isArray(t)){for(var i=0,o=Array(t.length);i<t.length;i++)o[i]=t[i];return o}return Array.from(t)}(nilDefault(i,[]))))},indexOf:function indexOf(t,i,o){return coerceToString(t).indexOf(i,o)},lastIndexOf:function lastIndexOf(t,i,o){return coerceToString(t).lastIndexOf(i,o)},search:function search(t,i,o){var a=coerceToString(t),u=isNil(o)?0:clipNumber(toInteger(o),0,a.length),d=a.substr(u).search(i);return-1===d||isNaN(u)||(d+=u),d},charAt:function charAt(t,i){return coerceToString(t).charAt(i)},codePointAt:codePointAt,first:function first(t,i){var o=coerceToString(t),a=isNil(i)?1:clipNumber(toInteger(i),0,du);return o.length<=a?o:o.substr(0,a)},graphemeAt:function graphemeAt(t,i){var o=coerceToString(t),a=coerceToNumber(i),u=void 0,d=0;for(a=nanDefault(a,0);null!==(u=jl.exec(o));){if(d===a)return jl.lastIndex=0,u[0];d++}return""},last:function last(t,i){var o=coerceToString(t),a=isNil(i)?1:clipNumber(toInteger(i),0,du);return o.length<=a?o:o.substr(o.length-a,a)},prune:function prune(t,i,o){var a=coerceToString(t),u=isNil(i)?a.length:clipNumber(toInteger(i),0,du),d=coerceToString(o,"...");if(u>=a.length)return a;var b=cu.test(a)?hu:au,S=0;return a.replace(b,(function(t,i){var o=i+t.length;o<=u-d.length&&(S=o)})),a.substr(0,S)+d},slice:function slice(t,i,o){return coerceToString(t).slice(i,o)},substr:function substr(t,i,o){return coerceToString(t).substr(i,o)},substring:function substring(t,i,o){return coerceToString(t).substring(i,o)},truncate:truncate,insert:function insert(t,i,o){var a=coerceToString(t),u=coerceToString(i),d=coerceToNumber(o);return d<0||d>a.length||""===u?a:a.slice(0,d)+u+a.slice(d)},latinise:latinise,pad:function pad(t,i,o){var a=coerceToString(t),u=isNil(i)?0:clipNumber(toInteger(i),0,du),d=coerceToString(o," ");if(u<=a.length)return a;var b=u-a.length,S=toInteger(b/2),C=b%2;return buildPadding(d,S)+a+buildPadding(d,S+C)},padLeft:padLeft,padRight:padRight,repeat:repeat,replace:function replace(t,i,o){return coerceToString(t).replace(i,o)},replaceAll:function replaceAll(t,i,o){var a=coerceToString(t),u=i;return i instanceof RegExp?i.global||(u=appendFlagToRegExp(i,"g")):u=new RegExp(escapeRegExp(i),"g"),a.replace(u,o)},reverse:function reverse(t){return coerceToString(t).split("").reverse().join("")},reverseGrapheme:function reverseGrapheme(t){for(var i=coerceToString(t),o="",a=(i=i.replace(Wl,(function(t,i,o){return reverseGrapheme(o)+i})).replace(Hl,"$2$1")).length;a--;)o+=i.charAt(a);return o},slugify:function slugify(t){var i=coerceToString(t);return""===i?"":kebabCase(latinise(i).replace($l,"-"))},splice:function splice(t,i,o,a){var u=coerceToString(t),d=coerceToString(a),b=coerceToNumber(i);b<0?(b=u.length+b)<0&&(b=0):b>u.length&&(b=u.length);var S=coerceToNumber(o,u.length-b);return S<0&&(S=0),u.slice(0,b)+d+u.slice(b+S)},tr:function tr(t,i,o){var a=coerceToString(t),u=void 0,d=void 0;if(isString(i)&&isString(o))u=i.split(""),d=o.split("");else{var b=function extractKeysAndValues(t){var i=Object.keys(t),o=i.sort(sortStringByLength).map((function(i){return t[i]}));return[i,o]}(nilDefault(i,{})),S=_slicedToArray(b,2);u=S[0],d=S[1]}var C=u.length;if(0===C)return a;for(var M="",P=d.length,R=0;R<a.length;R++){for(var O=!1,B=void 0,N=0;N<C&&N<P;N++){var Y=u[N];if(a.substr(R,Y.length)===Y){O=!0,B=d[N],R=R+Y.length-1;break}}M+=O?B:a[R]}return M},trim:function trim(t,i){var o=coerceToString(t);if(""===i||""===o)return o;var a=toString(i);return isNil(a)?o.trim():trimRight(trimLeft(o,a),a)},trimLeft:trimLeft,trimRight:trimRight,wordWrap:function wordWrap(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=coerceToString(t),a=determineOptions(i),u=a.width,d=a.newLine,b=a.indent,S=a.cut;if(""===o||u<=0)return b;for(var C=o.length,M=o.substring.bind(o),P=0,R="";C-P>u;)if(" "!==o[P]){var O=o.lastIndexOf(" ",u+P);O>=P?(R+=b+M(P,O)+d,P=O+1):S?(R+=b+M(P,u+P)+d,P+=u):(O=o.indexOf(" ",u+P))>=0?(R+=b+M(P,O)+d,P=O+1):(R+=b+M(P),P=C)}else P++;return P<C&&(R+=b+M(P)),R},endsWith:function endsWith(t,i,o){if(isNil(i))return!1;var a=coerceToString(t),u=coerceToString(i);if(""===u)return!0;o=isNil(o)?a.length:clipNumber(toInteger(o),0,a.length),o-=u.length;var d=a.indexOf(u,o);return-1!==d&&d===o},includes:includes,isAlpha:isAlpha,isAlphaDigit:function isAlphaDigit(t){var i=coerceToString(t);return uu.test(i)},isBlank:function isBlank(t){return 0===coerceToString(t).trim().length},isDigit:function isDigit(t){var i=coerceToString(t);return Jl.test(i)},isEmpty:function isEmpty(t){return 0===coerceToString(t).length},isLowerCase:function isLowerCase(t){var i=coerceToString(t);return isAlpha(i)&&i.toLowerCase()===i},isNumeric:function isNumeric(t){var i="object"!==_typeof(t)||isNil(t)?t:Number(t);return("number"==typeof i||"string"==typeof i)&&!isNaN(i-parseFloat(i))},isString:isString,isUpperCase:function isUpperCase(t){var i=coerceToString(t);return isAlpha(i)&&i.toUpperCase()===i},matches:function matches(t,i,o){var a=coerceToString(t),u=coerceToString(o),d=void 0;if(!(i instanceof RegExp)){if(null===(d=toString(i)))return!1;i=new RegExp(d,u)}return i.test(a)},startsWith:function startsWith(t,i,o){var a=coerceToString(t),u=toString(i);return null!==u&&(""===u||(o=isNil(o)?0:clipNumber(toInteger(o),0,a.length),a.substr(o,u.length)===u))},chars:function chars(t){return coerceToString(t).split("")},codePoints:function codePoints(t){for(var i=coerceToString(t),o=i.length,a=[],u=0,d=void 0;u<o;)d=codePointAt(i,u),a.push(d),u+=d>65535?2:1;return a},graphemes:function graphemes(t){return nilDefault(coerceToString(t).match(jl),[])},split:function split(t,i,o){return coerceToString(t).split(i,o)},words:words,stripBom:function trim$1(t){var i=coerceToString(t);return""===i?"":"\ufeff"===i[0]?i.substring(1):i},stripTags:function trim$2(t,i,o){if(""===(t=coerceToString(t)))return"";if(!Array.isArray(i)){var a=coerceToString(i);i=""===a?[]:function parseTagList(t){for(var i=[],o=void 0;null!==(o=ru.exec(t));)i.push(o[1]);return i}(a)}for(var u=coerceToString(o),d=t.length,b=i.length>0,S=hasSubstringAtIndex.bind(null,t),C=0,M=0,P="",R="",O=null,B=0;B<d;B++){var N=t[B],Y=!1;switch(N){case"<":if(O)break;if(S("< ",B,!1)){Y=!0;break}if(0===C){Y=!0,C=1;break}if(1===C){M++;break}Y=!0;break;case"!":if(1===C&&S("<!",B)){C=2;break}Y=!0;break;case"-":if(2===C&&S("!--",B)){C=3;break}Y=!0;break;case'"':case"'":1===C&&(O===N?O=null:O||(O=N)),Y=!0;break;case"E":case"e":if(2===C&&S("doctype",B)){C=1;break}Y=!0;break;case">":if(M>0){M--;break}if(O)break;if(1===C){if(O=null,C=0,b){var G=parseTagName(R+=">");-1!==i.indexOf(G.toLowerCase())?P+=R:P+=u,R=""}else P+=u;break}if(2===C||3===C&&S("--\x3e",B)){O=null,C=0,R="";break}Y=!0;break;default:Y=!0}if(Y)switch(C){case 0:P+=N;break;case 1:b&&(R+=N)}}return P},noConflict:function noConflict(){return this===Su.v&&(Su.v=Cu),this},version:"1.4.0"};function ChainWrapper(t,i){this._wrappedValue=t,this._explicitChain=i}ChainWrapper.prototype.value=function(){return this._wrappedValue},ChainWrapper.prototype.valueOf=function(){return this.value()},ChainWrapper.prototype.toJSON=function(){return this.value()},ChainWrapper.prototype.toString=function(){return String(this.value())},ChainWrapper.prototype.chain=function(){return new ChainWrapper(this._wrappedValue,!0)},ChainWrapper.prototype.thru=function(t){return"function"==typeof t?new ChainWrapper(t(this._wrappedValue),this._explicitChain):this},ChainWrapper.prototype._explicitChain=!0,Object.keys(Au).forEach((function(t){ChainWrapper.prototype[t]=function makeFunctionChainable(t){return function(){for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];var u=t.apply(void 0,[this._wrappedValue].concat(o));return this._explicitChain||"string"==typeof u?new ChainWrapper(u,this._explicitChain):u}}(Au[t])}));var Eu=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a])}return t};function Voca(t){return new ChainWrapper(t,!1)}Eu(Voca,Au,{chain:function chain(t){return new ChainWrapper(t,!0)}});var Mu=26,_u="sprite",Pu="image",Ru="spine",ku="text",Ou="zone",Lu="particle",Du=function(){function OperateOnVisual(){_classCallCheck(this,OperateOnVisual)}return _createClass(OperateOnVisual,null,[{key:"GetDisplayedAsAny",value:function GetDisplayedAsAny(t){return Iu.At(t).refDisplayed}},{key:"GetDisplayed",value:function GetDisplayed(t){return Iu.At(t).refDisplayed}},{key:"GetDisplayedAsImage",value:function GetDisplayedAsImage(t){return Iu.At(t).refDisplayed}},{key:"GetDisplayedAsBitmapText",value:function GetDisplayedAsBitmapText(t){return Iu.At(t).refDisplayed}},{key:"GetBottomY",value:function GetBottomY(t){return OperateOnVisual.GetDisplayed(t).y+OperateOnVisual.GetHeight(t)/2}},{key:"GetHeight",value:function GetHeight(t){return OperateOnVisual.GetDisplayedAsImage(t).displayHeight}},{key:"GetWidth",value:function GetWidth(t){return OperateOnVisual.GetDisplayedAsImage(t).displayWidth}},{key:"IsImgOrSprite",value:function IsImgOrSprite(t){return Iu.At(t).type==Pu||Iu.At(t).type==_u}},{key:"IsSpine",value:function IsSpine(t){return Iu.At(t).type==Ru}},{key:"SpineListAttachmentsBySlots",value:function SpineListAttachmentsBySlots(t){for(var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=OperateOnVisual.GetDisplayedAsAny(t),a={},u=o.skeletonData.defaultSkin.attachments,d=o.getSlotList(),b=0;b<d.length;b++){var S=d[b],C=u[b];for(var M in C){var P=a[S];P||(P=[],a[S]=P),P.push(M)}}return i&&console.log(t,a),a}},{key:"RandomizeAnimationTime",value:function RandomizeAnimationTime(t){var i=OperateOnVisual.GetDisplayedAsAny(t).state.tracks[0];i.trackTime=Phaser.Math.FloatBetween(0,i.animationEnd)}},{key:"SpineSetAttachment",value:function SpineSetAttachment(t,i,o){OperateOnVisual.GetDisplayedAsAny(t).setAttachment(i,o)}},{key:"SetScale",value:function SetScale(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;1!=i&&(OperateOnVisual.GetDisplayedAsImage(t).scaleX=i,1!=o&&(OperateOnVisual.GetDisplayedAsImage(t).scaleY=i)),1!=o&&(OperateOnVisual.GetDisplayedAsImage(t).scaleY=o)}},{key:"SetTextWithZeroPad",value:function SetTextWithZeroPad(t,i,o){var a=Voca.padLeft(i,o,"0");OperateOnVisual.GetDisplayedAsBitmapText(t).setText(a)}},{key:"SetText",value:function SetText(t,i){OperateOnVisual.GetDisplayedAsBitmapText(t).setText(i)}},{key:"SortParentByProperty",value:function SortParentByProperty(t,i){OperateOnVisual.GetDisplayedAsImage(t).parentContainer.sort(i)}},{key:"ReparentLayer",value:function ReparentLayer(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Iu.At(t);Y(a,o),a.layerName=i,PostProcessLayerName(a);var u=OperateOnVisual.GetDisplayedAsImage(t),d=kl.GetOrMakeContainerLayer(a.layerData.layer,a.layerData.anchorX,a.layerData.anchorY,a.layerDepth),b=u.parentContainer,S=d,C=u.x,M=u.y;C-=b.scene.cameras.main.scrollX,M-=b.scene.cameras.main.scrollY,C+=S.scene.cameras.main.scrollX,M+=S.scene.cameras.main.scrollY,C+=b.x,M+=b.y,C-=S.x,M-=S.y,OperateOnVisual.GetDisplayedAsImage(t).x=C,OperateOnVisual.GetDisplayedAsImage(t).y=M,d.add(a.refDisplayed)}},{key:"GetBounds",value:function GetBounds(t){var i=Iu.At(t);if(OperateOnVisual.IsSpine(t)){var o=OperateOnVisual.GetDisplayedAsAny(t).getBounds();return i._boundCache.setTo(o.offset.x,o.offset.y,o.size.x,o.size.y),i._boundCache}return OperateOnVisual.GetDisplayedAsImage(t).getBounds(i._boundCache)}},{key:"GetParticles",value:function GetParticles(t){return Iu.At(t).refDisplayed}}]),OperateOnVisual}();function PostProcessLayerName(t){if(Voca.countSubstrings(t.layerName,"_")>0){var i=Voca.split(t.layerName,"_");t.layerData.layer=i[0],t.layerData.anchorX=parseInt(Voca.charAt(i[1],0)),t.layerData.anchorY=parseInt(Voca.charAt(i[1],1))}else t.layerData.layer=t.layerName,t.layerData.anchorX=1,t.layerData.anchorY=1}var Iu=function(t){_inherits(VisualComponent,t);var i=_createSuper(VisualComponent);function VisualComponent(t){var o;_classCallCheck(this,VisualComponent),(o=i.call(this,null))._boundCache=new Phaser.Geom.Rectangle(0,0,1,1),o.type=null,o.texture=null,o.animations={},o.curAnimation=null,o.curAnimationCfg=null,o.curAnimationFinishCount=0,o.emitterConfig=null,o.layerName="gameplay",o.selfDepth=0,o.layerDepth=0,o.scale=1,o.layerData={layer:"gameplay",x:1,y:1},o.tweens={position:null,scale:null,alpha:null},o.refDisplayed=null;var a=JSON.parse(JSON.stringify(o.constructor.properties));return Object.assign(_assertThisInitialized(o),a,t),o}return _createClass(VisualComponent,[{key:"onAttached",value:function onAttached(t){var i,o=this;_get(_getPrototypeOf(VisualComponent.prototype),"onAttached",this).call(this,t),PostProcessLayerName(this);var a=kl.GetOrMakeContainerLayer(this.layerData.layer,this.layerData.anchorX,this.layerData.anchorY,this.layerDepth),u=a.scene;if(this.type==Pu)if(kl.GetPhaserGame().textures.exists(this.texture))i=u.make.image({x:0,y:0,key:this.texture,add:!0},!1);else{var d=this.texture;i=u.make.image({x:0,y:0,key:"megaset",frame:d,add:!0},!1)}else if(this.type==Ru)null==this.animations&&(this.animations={Idle:{loop:!0}},this.curAnimation="Idle"),(i=u.make.spine({x:0,y:0,key:this.texture,animationName:this.curAnimation,loop:this.animations[this.curAnimation].loop,add:!1},!1)).state.addListener({complete:function complete(t){t.animation.name,o.curAnimationCfg&&(0==o.curAnimationCfg.loop&&o.curAnimationFinishCount<=0&&o.curAnimationFinishCount++,o.curAnimationCfg.onAnimationLoopedCmd&&(o.curAnimationCfg.onAnimationLoopedCmd.entity=o.entity,mt.runCommandObj(o.curAnimationCfg.onAnimationLoopedCmd)))}});else if(this.type==ku){var b=this.text;null==b&&(b="000000",this.text=b),(i=u.make.bitmapText({x:0,y:0,font:this.texture,text:b,add:!0},!1)).setOrigin(.5,.5)}else if(this.type==Ou)null==this.width&&(this.width=100),null==this.height&&(this.height=100),i=u.make.zone({x:0,y:0,width:this.width,height:this.height,add:!0});else if(this.type==Lu){var S=this.emitterConfig,C=u.add.particles(this.texture);C.createEmitter(S),i=C}i.setScale(this.scale),this.refDisplayed=i,a.add(i),i.selfEntity=t,0!=this.selfDepth&&(i.setDepth(this.selfDepth),Du.SortParentByProperty(this.entity,"depth"))}},{key:"bringToTop",value:function bringToTop(){Du.GetDisplayedAsImage(this.entity).parentContainer.bringToTop(Du.GetDisplayedAsImage(this.entity))}},{key:"setTexture",value:function setTexture(t){if(Du.IsImgOrSprite(this.entity)){var i=Du.GetDisplayedAsImage(this.entity);kl.GetPhaserGame().textures.exists(t)?i.setTexture(t):i.setTexture("megaset",t)}}},{key:"setAnimation",value:function setAnimation(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Du.IsImgOrSprite(this.entity))this.curAnimation=t,this.setTexture(this.animations[this.curAnimation].texture);else if(Du.IsSpine(this.entity)){var o=!1;if(this.curAnimation==t&&(o=!0),this.animations[t]&&0==this.animations[t].loop&&this.curAnimationFinishCount>=1&&(o=!1),o)return;this.curAnimation=t,this.curAnimationFinishCount=0;var a={};this.animations[t]&&Y(a,this.animations[t]),i&&Y(a,i),null==a.loop&&(a.loop=!0),this.curAnimationCfg=a,this.refDisplayed.setAnimation(0,t,a.loop)}else console.warn("IMPLEMENT HERE!")}},{key:"getAnimationName",value:function getAnimationName(){return this.curAnimation}},{key:"getDisplayedAsImage",value:function getDisplayedAsImage(){return this.refDisplayed}},{key:"getDisplayedAsZone",value:function getDisplayedAsZone(){return this.refDisplayed}},{key:"getEmitter",value:function getEmitter(){return this.refDisplayed.emitters.list[0]}},{key:"isDisplayedOnScreen",value:function isDisplayedOnScreen(){var t=this.getDisplayedAsImage(),i=Du.GetBounds(this.entity),o=t.scene.cameras.main.worldView,a=!1;return 0==Du.IsSpine(this.entity)?(a=!0,i.y+i.height<o.y&&(a=!1),i.y>o.bottom&&(a=!1),i.x+i.width<o.x&&(a=!1),i.x>o.width&&(a=!1)):(a=!0,i.x=this.refDisplayed.x,i.y=this.refDisplayed.y,i.y+i.height<o.y&&(a=!1),i.y-i.height>o.y+o.height&&(a=!1),i.x+i.width<o.x&&(a=!1),i.x-i.width>o.right&&(a=!1)),a}},{key:"setFlipX",value:function setFlipX(t){var i=this.getDisplayedAsImage();Du.IsSpine(this.entity)?t?i.scaleX>=0&&(i.scaleX*=-1):i.scaleX<=0&&(i.scaleX*=-1):i.setFlipX(t)}},{key:"setFlipY",value:function setFlipY(t){var i=this.getDisplayedAsImage();Du.IsSpine(this.entity)?t?i.scaleY>=0&&(i.scaleY*=-1):i.scaleY<=0&&(i.scaleY*=-1):i.setFlipY(t)}},{key:"disposePositionTween",value:function disposePositionTween(){this.tweens.position&&(this.tweens.position.stop(0),this.tweens.position.remove(),this.tweens.position=null)}},{key:"disposeAllTweens",value:function disposeAllTweens(){this.disposePositionTween(),this.tweens.scale&&(this.tweens.scale.stop(0),this.tweens.scale.remove(),this.tweens.scale=null),this.tweens.alpha&&(this.tweens.alpha.stop(0),this.tweens.alpha.remove(),this.tweens.alpha=null)}},{key:"fastTrackPosition",value:function fastTrackPosition(t){var i=this.tweens;if(i.position){var o=i.position;if(o.state!=Mu){o.stop(),o.remove();for(var a=0;a<o.data.length;a++){var u=o.data[a];u.target[u.key]=u.end}}i.position=null}}},{key:"tweenPosition",value:function tweenPosition(t){var i=this.tweens;i.position&&(i.position.state!=Mu&&i.position.stop(),i.position.remove(),i.position=null),t.targets=Du.GetDisplayedAsImage(this.entity),i.position=Du.GetDisplayedAsImage(this.entity).scene.tweens.add(t)}},{key:"isTweeningPosition",value:function isTweeningPosition(){var t=this.tweens;return!!t.position&&t.position.state!=Mu}},{key:"isTweeningScale",value:function isTweeningScale(){var t=this.tweens;return!!t.scale&&t.scale.state!=Mu}},{key:"tweenScale",value:function tweenScale(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=this.tweens;o.scale&&(o.scale.state!=Mu&&o.scale.stop(),o.scale.remove(),o.scale=null),t.targets=Du.GetDisplayedAsImage(this.entity),null==i?o.scale=Du.GetDisplayedAsImage(this.entity).scene.tweens.add(t):Du.GetDisplayedAsImage(this.entity).scene.tweens.add(t)}},{key:"tweenAlpha",value:function tweenAlpha(t){var i=this.tweens;i.alpha&&(i.alpha.state!=Mu&&i.alpha.stop(),i.alpha.remove(),i.alpha=null),t.targets=Du.GetDisplayedAsImage(this.entity),i.alpha=Du.GetDisplayedAsImage(this.entity).scene.tweens.add(t)}},{key:"getSpineSlotsList",value:function getSpineSlotsList(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.refDisplayed,o=i.getSlotList();return t&&console.log(this.entity,o),o}},{key:"getSpineAnimationList",value:function getSpineAnimationList(){for(var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=[],o=Du.GetDisplayedAsAny(this.entity),a=0;a<o.stateData.skeletonData.animations.length;a++){var u=o.stateData.skeletonData.animations[a],d=u.name;i.push(d)}return t&&console.log(this.entity,i),i}},{key:"spineRandomizeSlotsAttachments",value:function spineRandomizeSlotsAttachments(t){Du.GetDisplayedAsAny(this.entity);for(var i=0;i<t.length;i++){var o=t[i],a=Du.SpineListAttachmentsBySlots(this.entity,!1)[o],u=Phaser.Utils.Array.GetRandom(a);Du.SpineSetAttachment(this.entity,o,u)}}},{key:"onDestroyed",value:function onDestroyed(t){this.refDisplayed&&(this.disposeAllTweens(),this.refDisplayed.selfEntity=null,this.refDisplayed.destroy(),this.refDisplayed=null)}}],[{key:"At",value:function At(t){return t.visual}},{key:"properties",get:function get(){return{}}}]),VisualComponent}(G),Fu=function(){function VisualTemplates(){_classCallCheck(this,VisualTemplates)}return _createClass(VisualTemplates,null,[{key:"DefaultImage",value:function DefaultImage(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"_NONE",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o={type:Pu,texture:t};return i&&Y(o,i),o}},{key:"DefaultSpine",value:function DefaultSpine(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"_NONE",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o={type:Ru,texture:t};return i&&Y(o,i),o}},{key:"DefaultText",value:function DefaultText(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"_NONE",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o={type:ku,texture:t};return i&&Y(o,i),o}},{key:"DefaultParticle",value:function DefaultParticle(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"_NONE",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o={type:Lu,texture:t};return i&&Y(o,i),o}},{key:"DefaultZone",value:function DefaultZone(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i={type:Ou};return t&&Y(i,t),i}}]),VisualTemplates}(),Bu=new(_createClass((function InternalDataClass$7(){_classCallCheck(this,InternalDataClass$7),this.query}))),Nu=function(){function ReactiveOffscreenDieAndVisualQuery(){_classCallCheck(this,ReactiveOffscreenDieAndVisualQuery)}return _createClass(ReactiveOffscreenDieAndVisualQuery,null,[{key:"RegisterQuery",value:function RegisterQuery(){Bu.query=dt.GetWorld().createQuery({all:[Iu,Gl]}),Bu.query.onEntityAdded((function(t){})),Bu.query.onEntityRemoved((function(t){}))}},{key:"GetReference",value:function GetReference(){return Bu.query}}]),ReactiveOffscreenDieAndVisualQuery}(),Yu=function(){function OffscreenDieRoutine(){_classCallCheck(this,OffscreenDieRoutine)}return _createClass(OffscreenDieRoutine,null,[{key:"OnRegister",value:function OnRegister(){}},{key:"Register",value:function Register(){M.RegisterRoutine(OffscreenDieRoutine)}},{key:"Init",value:function Init(){}},{key:"GetName",value:function GetName(){return"OffscreenDieRoutine"}},{key:"Update",value:function Update(t){for(var i=Nu.GetReference()._cache,o=0;o<i.length;o++){var a=i[o],u=Gl.At(a);u.timeOffScreenMS+=t,u.timeOffScreenMS>=1e4&&(u.wasOnScreen=!0);var d=Iu.At(a).isDisplayedOnScreen();0==d&&u.wasOnScreen?Xl.Take(a):1==d&&(u.wasOnScreen=!0)}}}]),OffscreenDieRoutine}(),Gu=function(t){_inherits(PinOthers,t);var i=_createSuper(PinOthers);function PinOthers(t){var o;_classCallCheck(this,PinOthers),(o=i.call(this,null)).pinnedEntitiesList=[],o.killPinnedOnDestroy=!1;var a=JSON.parse(JSON.stringify(o.constructor.properties));return Object.assign(_assertThisInitialized(o),a,t),o}return _createClass(PinOthers,[{key:"addPin",value:function addPin(t,i){var o,a;null!==(o=i.x)&&void 0!==o||(i.x=0),null!==(a=i.y)&&void 0!==a||(i.y=0),this.pinnedEntitiesList.push({ref:t,relation:i}),Wu.UpdateEntity(this.entity)}},{key:"onDestroyed",value:function onDestroyed(){if(_get(_getPrototypeOf(PinOthers.prototype),"onDestroyed",this).call(this),this.killPinnedOnDestroy)for(var t=0;t<this.pinnedEntitiesList.length;t++){var i=this.pinnedEntitiesList[t].ref;Xl.Take(i)}}},{key:"unpinAll",value:function unpinAll(){this.pinnedEntitiesList=[]}}],[{key:"AddWithPin",value:function AddWithPin(t,i,o){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t.has(PinOthers)||t.add(PinOthers);var u=PinOthers.At(t);u.addPin(i,o),u.killPinnedOnDestroy=a}},{key:"At",value:function At(t){return t.pinOthers}},{key:"properties",get:function get(){return{}}}]),PinOthers}(G),Xu=function(t){_inherits(TransformComponent,t);var i=_createSuper(TransformComponent);function TransformComponent(t){var o;_classCallCheck(this,TransformComponent),(o=i.call(this,null)).refTarget={x:t.x,y:t.y,angle:t.angle};var a=JSON.parse(JSON.stringify(o.constructor.properties));return Object.assign(_assertThisInitialized(o),a,t),o}return _createClass(TransformComponent,[{key:"setPosition",value:function setPosition(t,i){null!=t&&(this.refTarget.x=t),null!=i&&(this.refTarget.y=i)}},{key:"getTarget",value:function getTarget(){return this.refTarget}}],[{key:"CalculateDeltaBetween",value:function CalculateDeltaBetween(t,i){var o=TransformComponent.At(t),a=TransformComponent.At(i),u={x:0,y:0};return o&&a&&(u.x=a.refTarget.x-o.refTarget.x,u.y=a.refTarget.y-o.refTarget.y),u}},{key:"At",value:function At(t){return t.transform}},{key:"properties",get:function get(){return{}}},{key:"AddToEntity",value:function AddToEntity(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;t.add(TransformComponent,{x:i,y:o,angle:a})}}]),TransformComponent}(G),Uu=new(_createClass((function InternalDataClass$6(){_classCallCheck(this,InternalDataClass$6),this.query}))),zu=function(){function ReactivePinOthersQuery(){_classCallCheck(this,ReactivePinOthersQuery)}return _createClass(ReactivePinOthersQuery,null,[{key:"RegisterQuery",value:function RegisterQuery(){Uu.query=dt.GetWorld().createQuery({all:[Gu,Xu]}),Uu.query.onEntityAdded((function(t){})),Uu.query.onEntityRemoved((function(t){}))}},{key:"GetReference",value:function GetReference(){return Uu.query}}]),ReactivePinOthersQuery}(),Vu=new(_createClass((function InternalDataClass$5(){_classCallCheck(this,InternalDataClass$5),_defineProperty(this,"active",!0),_defineProperty(this,"queryPinOthers",null)}))),Wu=function(){function SynchPinsRoutine(){_classCallCheck(this,SynchPinsRoutine)}return _createClass(SynchPinsRoutine,null,[{key:"Register",value:function Register(){M.RegisterRoutine(SynchPinsRoutine)}},{key:"OnRegister",value:function OnRegister(){}},{key:"Init",value:function Init(){Vu.queryPinOthers=zu.GetReference()}},{key:"GetName",value:function GetName(){return"SynchPinsRoutine"}},{key:"UpdateEntity",value:function UpdateEntity(t){for(var i=Gu.At(t).pinnedEntitiesList,o=0;o<i.length;o++){var a=i[o].ref,u=i[o].relation;if(!a.isDestroyed){var d=Xu.At(a),b=Xu.At(t);d.refTarget.x=b.refTarget.x+u.x,d.refTarget.y=b.refTarget.y+u.y}}}},{key:"Update",value:function Update(t){for(var i=Vu.queryPinOthers._cache,o=0;o<i.length;o++){var a=i[o];SynchPinsRoutine.UpdateEntity(a)}}}]),SynchPinsRoutine}();function CmdTweenAlphaTo(t,i){var o,a={duration:1e3,delay:0,ease:"Cubic.InOut"};null!==(o=i.alpha)&&void 0!==o||(i.alpha=1),Y(a,i),Iu.At(t).tweenAlpha(a)}function CmdTweenVisualByDeltaFrom(t,i){Iu.At(t).fastTrackPosition(t);var o={x:0,y:0,duration:1e3,delay:0,ease:"Cubic.InOut"};Y(o,i);var a=Du.GetDisplayed(t),u=o.x,d=o.y;o.x=a.x,o.y=a.y,a.x=a.x+u,a.y=a.y+d,Iu.At(t).tweenPosition(o)}function CmdTweenVisualByDeltaTo(t,i){Iu.At(t).fastTrackPosition();var o=Y({x:0,y:0,duration:1e3,delay:0,ease:"Cubic.InOut"},i),a=Du.GetDisplayed(t);o.x=a.x+o.x,o.y=a.y+o.y,Iu.At(t).tweenPosition(o)}function CmdTweenScaleTo(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(t&&!t.isDestroyed){var a={scale:1,duration:1e3,delay:0,ease:"Cubic.InOut"};Y(a,i),Iu.At(t).tweenScale(a,o)}}var Hu=function(){function GlobalMuteAudioAction(){_classCallCheck(this,GlobalMuteAudioAction)}return _createClass(GlobalMuteAudioAction,null,[{key:"RegisterPackedAsGameCommand",value:function RegisterPackedAsGameCommand(){mt.register(this.Name,new gt((function(t){GlobalMuteAudioAction.Take()})))}},{key:"Take",value:function Take(){kl.UserMuteAudio()}}]),GlobalMuteAudioAction}();_defineProperty(Hu,"Name","GlobalMuteAudioAction");var ju=function(){function GlobalUnmuteAudioAction(){_classCallCheck(this,GlobalUnmuteAudioAction)}return _createClass(GlobalUnmuteAudioAction,null,[{key:"RegisterPackedAsGameCommand",value:function RegisterPackedAsGameCommand(){mt.register(this.Name,new gt((function(t){GlobalUnmuteAudioAction.Take()})))}},{key:"Take",value:function Take(){kl.UserUnmuteAudio()}}]),GlobalUnmuteAudioAction}();_defineProperty(ju,"Name","GlobalUnmuteAudioAction");var qu=function(){function SetEntityAnimationAction(){_classCallCheck(this,SetEntityAnimationAction)}return _createClass(SetEntityAnimationAction,null,[{key:"RegisterPackedAsGameCommand",value:function RegisterPackedAsGameCommand(){mt.register(this.Name,new gt((function(t){SetEntityAnimationAction.Take(t.entity,t.animationName,t)})))}},{key:"Take",value:function Take(t,i,o){Iu.At(t).setAnimation(i,o)}}]),SetEntityAnimationAction}();_defineProperty(qu,"Name","SetEntityAnimationAction");var Zu=function(){function BasicInteractionAction(){_classCallCheck(this,BasicInteractionAction)}return _createClass(BasicInteractionAction,null,[{key:"RegisterPackedAsGameCommand",value:function RegisterPackedAsGameCommand(){mt.register(this.Name,new gt((function(t){BasicInteractionAction.Take(t.entity,t.reason)})))}},{key:"Take",value:function Take(t,i){"over"==i?CmdTweenScaleTo(t,{scale:1.1,duration:100}):"out"==i||"up"==i?CmdTweenScaleTo(t,{scale:1,duration:100}):"down"==i&&CmdTweenScaleTo(t,{scale:.9,duration:100})}}]),BasicInteractionAction}();_defineProperty(Zu,"Name","BasicInteractionAction");var Ku=function(){function ButtonInteractionAction(){_classCallCheck(this,ButtonInteractionAction)}return _createClass(ButtonInteractionAction,null,[{key:"RegisterPackedAsGameCommand",value:function RegisterPackedAsGameCommand(){mt.register(this.Name,new gt((function(t){ButtonInteractionAction.Take(t.entity,t.reason)})))}},{key:"Take",value:function Take(t,i){"over"==i?CmdTweenScaleTo(t,{scale:1.1,duration:100}):"out"==i?CmdTweenScaleTo(t,{scale:1,duration:100}):"up"==i?(kl.PlayAudioFile("tap"),CmdTweenScaleTo(t,{scale:1,duration:100})):"down"==i&&CmdTweenScaleTo(t,{scale:.9,duration:100})}}]),ButtonInteractionAction}();_defineProperty(Ku,"Name","ButtonInteractionAction");var Ju=function(){function NoInteractionAction(){_classCallCheck(this,NoInteractionAction)}return _createClass(NoInteractionAction,null,[{key:"RegisterPackedAsGameCommand",value:function RegisterPackedAsGameCommand(){mt.register(this.Name,new gt((function(t){NoInteractionAction.Take(t.entity,t.reason)})))}},{key:"Take",value:function Take(t,i){}}]),NoInteractionAction}();_defineProperty(Ju,"Name","NoInteractionAction");var Qu=function(){function RepositionEntityByDeltaAction(){_classCallCheck(this,RepositionEntityByDeltaAction)}return _createClass(RepositionEntityByDeltaAction,null,[{key:"RegisterPackedAsGameCommand",value:function RegisterPackedAsGameCommand(){mt.register(this.Name,new gt((function(t){RepositionEntityByDeltaAction.Take(t.entity,t.deltaX,t.deltaY)})))}},{key:"Take",value:function Take(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null==i&&(i=0),null==o&&(o=0);var a=Xu.At(t);a.refTarget.x+=i,a.refTarget.y+=o}}]),RepositionEntityByDeltaAction}();_defineProperty(Qu,"Name","RepositionEntityByDeltaAction");var $u=function(){function RepositionEntityBySizeAction(){_classCallCheck(this,RepositionEntityBySizeAction)}return _createClass(RepositionEntityBySizeAction,null,[{key:"RegisterPackedAsGameCommand",value:function RegisterPackedAsGameCommand(){mt.register(this.Name,new gt((function(t){RepositionEntityBySizeAction.Take(t.entity,t.multX,t.multY)})))}},{key:"Take",value:function Take(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null==i&&(i=0),null==o&&(o=0);var a=Xu.At(t),u=Du.GetDisplayed(t);a.refTarget.x+=u.displayWidth*i,a.refTarget.y+=u.displayHeight*o}}]),RepositionEntityBySizeAction}();_defineProperty($u,"Name","RepositionEntityToAction");var tc=function(){function RepositionEntityToEntityAction(){_classCallCheck(this,RepositionEntityToEntityAction)}return _createClass(RepositionEntityToEntityAction,null,[{key:"RegisterPackedAsGameCommand",value:function RegisterPackedAsGameCommand(){mt.register(this.Name,new gt((function(t){console.log("IMPLEMENT: RepositionEntityToEntityAction as GameCommand")})))}},{key:"Take",value:function Take(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0},a=Xu.At(t),u=Xu.At(i);a.refTarget.x=u.refTarget.x+o.x,a.refTarget.y=u.refTarget.y+o.y}}]),RepositionEntityToEntityAction}();_defineProperty(tc,"Name","RepositionEntityToEntityAction");var ec=function(t){_inherits(ToggleComponent,t);var i=_createSuper(ToggleComponent);function ToggleComponent(t){var o;_classCallCheck(this,ToggleComponent),(o=i.call(this,null)).curStateName=null,o.states=null;var a=JSON.parse(JSON.stringify(o.constructor.properties));return Object.assign(_assertThisInitialized(o),a,t),o}return _createClass(ToggleComponent,[{key:"synchAnimationToState",value:function synchAnimationToState(){qu.Take(this.entity,this.curStateName)}},{key:"setToggleStateAsNext",value:function setToggleStateAsNext(){this.curStateName=this.states[this.curStateName].nextState,this.synchAnimationToState()}},{key:"runCommandsAtCurrentState",value:function runCommandsAtCurrentState(){mt.runCommandObj(Y({entity:this.entity},this.states[this.curStateName].command))}},{key:"setToggleState",value:function setToggleState(t){this.curStateName=t,this.synchAnimationToState()}}],[{key:"At",value:function At(t){return console.assert(null!=t,t),console.assert(null!=t.toggle,t),t.toggle}},{key:"properties",get:function get(){return{}}},{key:"AddWithToggleStatesDictionary",value:function AddWithToggleStatesDictionary(t,i,o){var a={curStateName:i,states:o};t.add(ToggleComponent,a)}}]),ToggleComponent}(G),ic=function(){function RunEntityToggleLogic(){_classCallCheck(this,RunEntityToggleLogic)}return _createClass(RunEntityToggleLogic,null,[{key:"RegisterPackedAsGameCommand",value:function RegisterPackedAsGameCommand(){mt.register(this.Name,new gt((function(t){RunEntityToggleLogic.Take(t.entity)})))}},{key:"Take",value:function Take(t){var i=ec.At(t);i.runCommandsAtCurrentState(),i.setToggleStateAsNext()}}]),RunEntityToggleLogic}();_defineProperty(ic,"Name","RunEntityToggleLogic");var nc=function BuildCommand(t,i){return Y({key:t},i)},rc=function(t){_inherits(Interactive,t);var i=_createSuper(Interactive);function Interactive(t){var o;_classCallCheck(this,Interactive),(o=i.call(this,null)).isDisabled=!1,o.canDrag=!1,o.canSwipe=!1,o.pressed=!1,o.dict={},o.onSwipeCmdName=null,o.swipeCfg=null,o.runtime={rexSwipe:null},o.refHitArea=null;var a=JSON.parse(JSON.stringify(o.constructor.properties));return Object.assign(_assertThisInitialized(o),a,t),o}return _createClass(Interactive,[{key:"setEnabled",value:function setEnabled(t){this.isDisabled=!t}},{key:"resizeInputAreaAsRectangle",value:function resizeInputAreaAsRectangle(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.refHitArea.setSize(t,i),null!=o&&(this.refHitArea.x=o),null!=a&&(this.refHitArea.y=a)}},{key:"debugInput",value:function debugInput(){var t=Iu.At(this.entity).getDisplayedAsImage();t.scene.input.enableDebug(t)}}],[{key:"At",value:function At(t){return t.interactive}},{key:"AddPlain",value:function AddPlain(t,i,o,a,u,d){if(t.has(Interactive))console.warn("CANT ADD COMPONENT SECOND TIME");else{var b={};o&&(b.up=nc(o)),i&&(b.down=nc(i)),a&&(b.over=nc(a)),u&&(b.move=nc(u)),d&&(b.always=nc(d)),t.add(Interactive,GetInitialData(b))}}},{key:"AddWithCmdOnUpAndBtnInteraction",value:function AddWithCmdOnUpAndBtnInteraction(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(t.has(Interactive))console.warn("CANT ADD COMPONENT SECOND TIME");else{var u={};null==o&&(o=Ku.Name),o&&(u.always=nc(o)),a&&(u.down=nc(a)),u.up=nc(i),t.add(Interactive,GetInitialData(u))}}},{key:"AddWithDrag",value:function AddWithDrag(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(t.has(Interactive))console.warn("CANT ADD COMPONENT SECOND TIME");else{var u={};null==a&&(a=Ku.Name),a&&(u.always=nc(a)),i&&(u.down=nc(i)),o&&(u.up=nc(o)),t.add(Interactive,GetInitialData(u,{canDrag:!0}))}}},{key:"AddWithSwipe",value:function AddWithSwipe(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(t.has(Interactive))console.warn("CANT ADD COMPONENT SECOND TIME");else{var u={};null==a&&(a=Zu.Name),a&&(u.always=nc(a)),t.add(Interactive,GetInitialData(u,{canSwipe:!0,onSwipeCmdName:i,swipeCfg:o}))}}},{key:"properties",get:function get(){return{}}}]),Interactive}(G);function GetInitialData(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o={dict:t};return i&&Y(o,i),o}var sc=new(_createClass((function InternalDataClass$4(){_classCallCheck(this,InternalDataClass$4),this.groups={},this.colliders={}}))),oc=function(){function PhysicsModel(){_classCallCheck(this,PhysicsModel)}return _createClass(PhysicsModel,null,[{key:"GetGroup",value:function GetGroup(t){return sc.groups[t]?sc.groups[t]:(console.warn("NO GROUP: ",t),null)}},{key:"PhysicsAddCollider",value:function PhysicsAddCollider(t,i,o,a){if(!sc.colliders[t]){var u=PhysicsModel.GetGroup(i),d=PhysicsModel.GetGroup(o),b=kl.GetGameplayScene().physics.add.collider(u,d,a,null);sc.colliders[t]={group1:i,group2:o,callbackFn:a,collider:b}}}},{key:"PhysicsAddOverlap",value:function PhysicsAddOverlap(t,i,o,a){if(!sc.colliders[t]){var u=PhysicsModel.GetGroup(i),d=PhysicsModel.GetGroup(o),b=kl.GetGameplayScene().physics.add.overlap(u,d,a,null);sc.colliders[t]={group1:i,group2:o,callbackFn:a,collider:b}}}},{key:"OverlapGroupsByNames",value:function OverlapGroupsByNames(t,i,o,a,u){console.assert(o);var d=PhysicsModel.GetGroup(t),b=PhysicsModel.GetGroup(i);d&&b&&kl.GetGameplayScene().physics.world.overlap(d,b,o,a,u)}},{key:"OverlapObjects",value:function OverlapObjects(t,i,o,a,u){return kl.GetGameplayScene().physics.world.overlap(t,i,o,a,u)}}]),PhysicsModel}();_defineProperty(oc,"AddGroup",(function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!sc.groups[t])return sc.groups[t]=i?kl.GetGameplayScene().physics.add.staticGroup():kl.GetGameplayScene().physics.add.group(),sc.groups[t]}));var ac=function(){function OperateOnPhysics(){_classCallCheck(this,OperateOnPhysics)}return _createClass(OperateOnPhysics,null,[{key:"GetBodyAsDynamic",value:function GetBodyAsDynamic(t){return t.physics.body}},{key:"GetBodyAsStatic",value:function GetBodyAsStatic(t){return t.physics.body}},{key:"PutIntoPhysicsGroups",value:function PutIntoPhysicsGroups(t){for(var i=hc.At(t),o=0;o<i.groupsList.length;o++){var a=i.groupsList[o],u=oc.GetGroup(a);u||console.warn("NO GROUP: ",a),u.add(t.physics.body.gameObject)}}},{key:"DisableBody",value:function DisableBody(t){t.physics.body.stop(),t.physics.body.enable=!1,t.physics.body.gameObject.active=!1}}]),OperateOnPhysics}(),hc=function(t){_inherits(PhysicsComponent,t);var i=_createSuper(PhysicsComponent);function PhysicsComponent(t){var o;_classCallCheck(this,PhysicsComponent),(o=i.call(this,null)).isStatic=!1,o.isCircle=!1,o.groupsList=[],o.offsetX=0,o.offsetY=0,o.circleRadius=0,o.bulletData=null,o.body=null,o.bullet=null;var a=JSON.parse(JSON.stringify(o.constructor.properties));return Object.assign(_assertThisInitialized(o),a,t),o}return _createClass(PhysicsComponent,[{key:"getBodyAsDynamic",value:function getBodyAsDynamic(){return this.body}},{key:"setSizeScaled",value:function setSizeScaled(t){var i=this.getBodyAsDynamic().sourceWidth*t,o=this.getBodyAsDynamic().sourceHeight*t;this.getBodyAsDynamic().setSize(i,o,!0)}},{key:"resizeTo",value:function resizeTo(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.isCircle?console.warn("IMPLEMENT!"):(this.body.setSize(t,i),null!=o&&(this.offsetX=o),null!=a&&(this.offsetY=a),this.body.setOffset(this.offsetX,this.offsetY))}},{key:"resizeDeltaOwnSize",value:function resizeDeltaOwnSize(t,i,o,a){this.isCircle?console.warn("IMPLEMENT!"):this.resizeTo(this.body.width+t,this.body.height+i,o,a)}}],[{key:"properties",get:function get(){return{}}},{key:"At",value:function At(t){return t.physics}},{key:"AddToEntity",value:function AddToEntity(t,i){t.add(PhysicsComponent,i)}},{key:"AddToEntityWithBulletBehaviour",value:function AddToEntityWithBulletBehaviour(t,i){var o={bulletData:{speed:100,rotateToTarget:!0,enable:!0}};Y(o,i),t.has(PhysicsComponent)||PhysicsComponent.AddToEntity(t,o)}},{key:"BootBody",value:function BootBody(t){var i=PhysicsComponent.At(t);if(i.isCircle){var o=i.body.halfWidth-i.circleRadius,a=i.body.halfWidth-i.circleRadius;i.body.setCircle(i.circleRadius),i.body.setOffset(o+i.offsetX,a+i.offsetY)}else i.body.setSize(i.body.width,i.body.height),i.body.setOffset(i.offsetX,i.offsetY);if(i.bulletData){var u=kl.GetGameplayScene().plugins.get("rexBullet");i.bullet=u.add(i.body.gameObject,i.bulletData)}ac.PutIntoPhysicsGroups(t)}}]),PhysicsComponent}(G),lc=new(_createClass((function InternalDataClass$3(){_classCallCheck(this,InternalDataClass$3),this.query}))),uc=function(){function ReactiveInteractiveAndVisualQuery(){_classCallCheck(this,ReactiveInteractiveAndVisualQuery)}return _createClass(ReactiveInteractiveAndVisualQuery,null,[{key:"RegisterQuery",value:function RegisterQuery(){lc.query=dt.GetWorld().createQuery({all:[rc,Iu]}),lc.query.onEntityAdded((function(t){var i=Iu.At(t),o=rc.At(t);i.getDisplayedAsImage().setInteractive(),o.refHitArea=i.refDisplayed.input.hitArea})),lc.query.onEntityRemoved((function(t){}))}},{key:"GetReference",value:function GetReference(){return lc.query}}]),ReactiveInteractiveAndVisualQuery}(),cc=new(_createClass((function InternalDataClass$2(){_classCallCheck(this,InternalDataClass$2),this.query}))),dc=function(){function ReactivePhysicsAndVisualQuery(){_classCallCheck(this,ReactivePhysicsAndVisualQuery)}return _createClass(ReactivePhysicsAndVisualQuery,null,[{key:"RegisterQuery",value:function RegisterQuery(){cc.query=dt.GetWorld().createQuery({all:[Iu,hc]}),cc.query.onEntityAdded((function(t){var i=hc.At(t),o=Iu.At(t).getDisplayedAsImage();o.body?console.warn("IMPLEMENT! ReactivePhysicsAndVisualQuery:onEntityAdded"):(i.body=o.scene.physics.add.existing(o,i.isStatic).body,hc.BootBody(t))})),cc.query.onEntityRemoved((function(t){}))}},{key:"GetReference",value:function GetReference(){return cc.query}}]),ReactivePhysicsAndVisualQuery}(),fc=new(_createClass((function InternalDataClass$1(){_classCallCheck(this,InternalDataClass$1),this.query}))),pc=function(){function ReactiveTransformAndVisualQuery(){_classCallCheck(this,ReactiveTransformAndVisualQuery)}return _createClass(ReactiveTransformAndVisualQuery,null,[{key:"RegisterQuery",value:function RegisterQuery(){fc.query=dt.GetWorld().createQuery({all:[Iu,Xu]}),fc.query.onEntityAdded((function(t){var i=Xu.At(t);Du.GetDisplayed(t).x=i.refTarget.x,Du.GetDisplayed(t).y=i.refTarget.y,Du.GetDisplayed(t).angle=i.refTarget.angle,i.refTarget=Du.GetDisplayed(t)})),fc.query.onEntityRemoved((function(t){}))}},{key:"GetReference",value:function GetReference(){return fc.query}}]),ReactiveTransformAndVisualQuery}(),gc=function(t){_inherits(ParticleTrailFollowerComponent,t);var i=_createSuper(ParticleTrailFollowerComponent);function ParticleTrailFollowerComponent(t){var o;_classCallCheck(this,ParticleTrailFollowerComponent),(o=i.call(this,null)).targetGuid=null,o.angleMinOffset=0,o.angleMaxOffset=0,o.offsetX=0,o.offsetY=0;var a=JSON.parse(JSON.stringify(o.constructor.properties));return Object.assign(_assertThisInitialized(o),a,t),o}return _createClass(ParticleTrailFollowerComponent,null,[{key:"GetName",value:function GetName(){return"particleTrailFollower"}},{key:"At",value:function At(t){return t.particleTrailFollower}},{key:"properties",get:function get(){return{}}},{key:"AddToEntity",value:function AddToEntity(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a={targetGuid:i};Y(a,o),t.add(ParticleTrailFollowerComponent,a)}}]),ParticleTrailFollowerComponent}(G),vc=new(_createClass((function InternalDataClass(){_classCallCheck(this,InternalDataClass),this.query}))),mc=function(){function ReactiveParticleTrailAndTransformAndVisualQuery(){_classCallCheck(this,ReactiveParticleTrailAndTransformAndVisualQuery)}return _createClass(ReactiveParticleTrailAndTransformAndVisualQuery,null,[{key:"RegisterQuery",value:function RegisterQuery(){vc.query=dt.GetWorld().createQuery({all:[Xu,Iu,gc]})}},{key:"GetReference",value:function GetReference(){return console.assert(vc.query),vc.query}}]),ReactiveParticleTrailAndTransformAndVisualQuery}();var yc=function(){function RepositionEntityToAction(){_classCallCheck(this,RepositionEntityToAction)}return _createClass(RepositionEntityToAction,null,[{key:"RegisterPackedAsGameCommand",value:function RegisterPackedAsGameCommand(){mt.register(this.Name,new gt((function(t){RepositionEntityToAction.Take(t.entity,t.x,t.y)})))}},{key:"Take",value:function Take(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Xu.At(t).setPosition(i,o)}}]),RepositionEntityToAction}();_defineProperty(yc,"Name","RepositionEntityToAction");var xc=new(_createClass((function Data(){_classCallCheck(this,Data),this.trackedTaps={},this.trackedInputs=[{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null}],this.keys={},this.sinceButtonPress=1e4,this.swipe=null,this.swipeCallback=null,this.keyCallbacks={},this.wasPointerUpOutside=!1}))),Tc=function TryUp(t){var i=rc.At(t);kl.IsRotationDisplayed()||i.pressed&&Ct.getData(tt.At(t).gameStateName).isRunning()&&(_RemoveButtonTracking(t),_PerformInteraction(t,"always","up"),i.isDisabled||_PerformInteraction(t,"up","up"))},bc=function(){function InputRoutine(){_classCallCheck(this,InputRoutine)}return _createClass(InputRoutine,null,[{key:"Register",value:function Register(){M.RegisterRoutine(InputRoutine)}},{key:"OnRegister",value:function OnRegister(){uc.GetReference().onEntityAdded((function(t){!function _AddActorInteractivity(t){var i=Du.GetDisplayedAsImage(t),o=rc.At(t);if(o.canSwipe){var a=kl.GetGameplayScene(),u={threshold:35,velocityThreshold:10,workaroundEnabled:1,workaroundMaxTime:1e3};Y(u,o.swipeCfg),a.rexGestures.add.swipe(i,u).on("swipe",(function(t,i,o){var a=rc.At(i.selfEntity);mt.runCommand(a.onSwipeCmdName,{entity:i.selfEntity,swipe:t})}))}i.on("pointerup",(function(i,a,u,d){kl.IsRotationDisplayed()||o.pressed&&Ct.getData(tt.At(t).gameStateName).isRunning()&&(_RemoveButtonTracking(t),_PerformInteraction(t,"always","up"),o.isDisabled||_PerformInteraction(t,"up","up"))})),i.on("pointerdown",(function(i,a,u,d){kl.IsRotationDisplayed()||Ct.getData(tt.At(t).gameStateName).isRunning()&&(o.isDisabled||(_PerformInteraction(t,"always","down"),_PerformInteraction(t,"down","down"),o.pressed=!0,function _AddButtonTracking(t,i){xc.trackedInputs[i].obj?console.warn("ALREADY TRACKING BUTTON AT ID: ",i):xc.trackedInputs[i].obj=t}(t,i.id)))})),i.on("pointerover",(function(i,a,u,d){kl.IsRotationDisplayed()||Ct.getData(tt.At(t).gameStateName).isRunning()&&(o.isDisabled||o.pressed||(_PerformInteraction(t,"always","over"),_PerformInteraction(t,"over","over")))})),i.on("pointermove",(function(i,a,u,d){kl.IsRotationDisplayed()||Ct.getData(tt.At(t).gameStateName).isRunning()&&(o.isDisabled||o.pressed&&(_PerformInteraction(t,"always","move"),_PerformInteraction(t,"move","move")))})),i.on("pointerout",(function(i,a,u,d){kl.IsRotationDisplayed()||Ct.getData(tt.At(t).gameStateName).isRunning()&&(o.pressed||(_PerformInteraction(t,"always","out"),_PerformInteraction(t,"out","out")))}))}(t)})),uc.GetReference().onEntityRemoved((function(t){_RemoveButtonTracking(t),Du.GetDisplayedAsImage(t).removeInteractive()}))}},{key:"Init",value:function Init(){var t=kl.GetGameplayScene();t.input.addPointer(10),xc.trackedInputs[0].input=t.input.mousePointer,xc.trackedInputs[1].input=t.input.pointer1,xc.trackedInputs[2].input=t.input.pointer2,xc.trackedInputs[3].input=t.input.pointer3,xc.trackedInputs[4].input=t.input.pointer4,xc.trackedInputs[5].input=t.input.pointer5,xc.trackedInputs[6].input=t.input.pointer6,xc.trackedInputs[7].input=t.input.pointer7,xc.trackedInputs[8].input=t.input.pointer8,xc.trackedInputs[9].input=t.input.pointer9,xc.trackedInputs[10].input=t.input.pointer10,xc.keys.w=t.input.keyboard.addKey("w"),xc.keys.s=t.input.keyboard.addKey("s"),xc.keys.a=t.input.keyboard.addKey("a"),xc.keys.d=t.input.keyboard.addKey("d"),xc.keys[" "]=t.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE),xc.keys["/"]=t.input.keyboard.addKey("/"),xc.keys.right=t.input.keyboard.addKey("right"),xc.keys.left=t.input.keyboard.addKey("left"),xc.keys.up=t.input.keyboard.addKey("up"),xc.keys.down=t.input.keyboard.addKey("down"),t.input.keyboard.on("keydown",(function(t){xc.keyCallbacks[t.key]&&xc.keyCallbacks[t.key](t)})),xc.swipe=t.rexGestures.add.swipe({threshold:35,velocityThreshold:10,workaroundEnabled:1,workaroundMaxTime:1e9}),xc.swipe.on("swipe",(function(t){xc.swipeCallback&&xc.swipeCallback(t)})),t.input.on("pointerupoutside",(function(){xc.wasPointerUpOutside=!0}))}},{key:"GetName",value:function GetName(){return"InputRoutine"}},{key:"Update",value:function Update(t){kl.GetGameplayScene();var i=xc.wasPointerUpOutside;xc.wasPointerUpOutside=!1;for(var o=0;o<xc.trackedInputs.length;o++){var a=xc.trackedInputs[o].input;if(xc.trackedInputs[o].obj)if(rc.At(xc.trackedInputs[o].obj).canDrag){var u=Du.GetDisplayedAsImage(xc.trackedInputs[o].obj);yc.Take(xc.trackedInputs[o].obj,a.x+u.scene.cameras.main.scrollX,a.y+u.scene.cameras.main.scrollY),i&&Tc(xc.trackedInputs[o].obj)}a&&!a.isDown&&xc.trackedInputs[o].obj&&_RemoveButtonTracking(xc.trackedInputs[o].obj)}InputRoutine.GetPointerIfNotPressingButton()?(xc.sinceButtonPress+=t,xc.sinceButtonPress>=1e4&&(xc.sinceButtonPress=1e4)):xc.sinceButtonPress=0}},{key:"GetSinceButtonPress",value:function GetSinceButtonPress(){return xc.sinceButtonPress}},{key:"SetSwipeCallback",value:function SetSwipeCallback(t){xc.swipeCallback=t}},{key:"AddKeyDown",value:function AddKeyDown(t,i){if(Array.isArray(t))for(var o=0;o<t.length;o++){var a=t[o];xc.keyCallbacks[a]=i}else xc.keyCallbacks[t]=i}},{key:"HasTrackedButton",value:function HasTrackedButton(){for(var t=0;t<xc.trackedInputs.length;t++)if(null!=xc.trackedInputs[t].obj)return!0;return!1}},{key:"GetPointerIfNotPressingButton",value:function GetPointerIfNotPressingButton(){return 0==InputRoutine.HasTrackedButton()?kl.GetGameplayScene().input.activePointer:null}},{key:"GetPointer",value:function GetPointer(){return kl.GetGameplayScene().input.activePointer}},{key:"IsKeyFromListDown",value:function IsKeyFromListDown(t){for(var i=0;i<t.length;i++){if(xc.keys[t[i]].isDown)return!0}return!1}}]),InputRoutine}();function _PerformInteraction(t,i,o){var a=rc.At(t);if(a.dict[i]&&a.dict[i].key){var u=a.dict[i],d=Y({entity:t,reason:o},u);mt.runCommand(u.key,d)}}function _RemoveButtonTracking(t){var i=rc.At(t);i.pressed&&(_PerformInteraction(t,"always","out"),function _NullifyTrackedButton(t){for(var i=0;i<xc.trackedInputs.length;i++)if(xc.trackedInputs[i].obj==t)return void(xc.trackedInputs[i].obj=null)}(t)),i.pressed=!1}var wc=new ft,Sc=function(){function LogicLoopRoutine(){_classCallCheck(this,LogicLoopRoutine)}return _createClass(LogicLoopRoutine,null,[{key:"Init",value:function Init(){}},{key:"OnRegister",value:function OnRegister(){}},{key:"Register",value:function Register(){M.RegisterRoutine(LogicLoopRoutine)}},{key:"GetName",value:function GetName(){return"LogicLoopRoutine"}},{key:"Update",value:function Update(t){for(var i=wc.getKeyList(),o=0;o<i.length;o++){var a=i[o];wc.getData(a).f(t)}}},{key:"SetUpdateFunc",value:function SetUpdateFunc(t,i){wc.register(t,{f:i},!0)}},{key:"CleanFunction",value:function CleanFunction(t){wc.register(t,{f:function f(){}},!0)}}]),LogicLoopRoutine}(),Cc=_createClass((function GameSession(){_classCallCheck(this,GameSession),this.seenTutorial=!1,this.initialized=!1})),Ac=_createClass((function GameSubsession(){_classCallCheck(this,GameSubsession),this.score=0,this.latestScore=0})),Ec=_createClass((function InternalGameLevelData(){_classCallCheck(this,InternalGameLevelData),this.levelLoopEnded=!1,this.levelLoopStarted=!1,this.activeLevelTime=0})),Mc=new(function(){function InternalGlobals(){_classCallCheck(this,InternalGlobals),this.session=new Cc,this.subsession=new Ac,this.currentLevelData=new Ec}return _createClass(InternalGlobals,[{key:"ResetLevelData",value:function ResetLevelData(){this.currentLevelData=new Ec}},{key:"ResetSubsession",value:function ResetSubsession(){this.subsession=new Ac}}]),InternalGlobals}()),_c=_createClass((function CommonGamePrefabs(){var t=this;_classCallCheck(this,CommonGamePrefabs),this.EmptyObject=function(t){return dt.CreateEntity(t)},this.GuiImageObject=function(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"gui_22",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=dt.CreateEntity(t);return Xu.AddToEntity(u),u.add(Iu,Fu.DefaultImage(i,{layerName:o})),"bottom"==a?yt.AddWithData(u,{postmake:nc("TweenPositionFromBottom"),exit:nc("TweenPositionToBottom")}):"top"==a?yt.AddWithData(u,{postmake:nc("TweenPositionFromTop"),exit:nc("TweenPositionToTop")}):null!=a&&(a.postmake&&yt.AddWithData(u,{postmake:nc(a.postmake)}),a.exit&&yt.AddWithData(u,{exit:nc(a.exit)})),u},this.GuiSpineObject=function(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Idle",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"gui_22",b=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{layerDepth:0};console.assert(null!=t);var S=dt.CreateEntity(t);Xu.AddToEntity(S,a,u);var C={curAnimation:o,animations:_defineProperty({},o,{loop:!0}),layerName:d};Y(C,b);var M=Fu.DefaultSpine(i,C);return S.add(Iu,M),S},this.GuiButtonObject=function(t,i,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"gui_22",u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,d=dt.CreateEntity(t);return Xu.AddToEntity(d),d.add(Iu,Fu.DefaultImage(i,{layerName:a})),"bottom"==u&&yt.AddWithData(d,{postmake:nc("TweenPositionFromBottom"),exit:nc("TweenPositionToBottom")}),rc.AddWithCmdOnUpAndBtnInteraction(d,o),d},this.GuiFont=function(t,i,o){var a=dt.CreateEntity(t);return Xu.AddToEntity(a),a.add(Iu,Fu.DefaultText(i,{layerName:o})),a},this.GameplayImageObject=function(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},d=dt.CreateEntity(t);return Xu.AddToEntity(d,o,a),d.add(Iu,Fu.DefaultImage(i,u)),d},this.GameplayZoneObject=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=dt.CreateEntity(t);return Xu.AddToEntity(u,i,o),u.add(Iu,Fu.DefaultZone(a)),u},this.GameplaySpineObject=function(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Idle",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{layerDepth:0};console.assert(null!=t);var b=dt.CreateEntity(t);Xu.AddToEntity(b,a,u);var S={curAnimation:o,animations:_defineProperty({},o,{loop:!0})};return Y(S,d),b.add(Iu,Fu.DefaultSpine(i,S)),b},this.GameplaySpineObjectDieAfterAnim=function(i,o){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Idle",u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,b=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{layerDepth:0},S={curAnimation:a,layerDepth:0,animations:_defineProperty({},a,{loop:!1,onAnimationLoopedCmd:nc(Xl.Name,{})})};return Y(S,b),t.GameplaySpineObject(i,o,a,u,d,S)},this.GameplayTextObject=function(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,d=dt.CreateEntity(t);return Xu.AddToEntity(d,o,a),d.add(Iu,Fu.DefaultText(i,u)),d},this.GameplayParticleObject=function(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},d=dt.CreateEntity(t);return Xu.AddToEntity(d,o,a),d.add(Iu,Fu.DefaultParticle(i,u)),d}})),Pc=function(t){_inherits(CasualGameSharedPrefabs,t);var i=_createSuper(CasualGameSharedPrefabs);function CasualGameSharedPrefabs(){var t;return _classCallCheck(this,CasualGameSharedPrefabs),(t=i.call(this)).Background=function(t){var i=dt.CreateEntity(t);return Xu.AddToEntity(i),i.add(Iu,Fu.DefaultImage("BG")),i},t.CoverTitle=function(t){var i=dt.CreateEntity(t);return Xu.AddToEntity(i),i.add(Iu,Fu.DefaultImage("GameTitle",{layerName:"gui_22"})),yt.AddWithData(i,{postmake:nc("TweenCoverTitle"),exit:nc("TweenPositionToTop")}),i},t.CoverLogo=function(i,o){var a=t.GuiImageObject(i,"BM_Logo",o),u="TweenPositionFromTop",d="TweenPositionToTop";return"gui_33"==o&&(u="TweenPositionFromBottom",d="TweenPositionToBottom"),yt.AddWithData(a,{postmake:nc(u,{delay:200}),exit:nc(d)}),a},t.ScorePanel=function(i,o){var a=t.GuiImageObject(i,"ScorePanel",o);return yt.AddWithData(a,{postmake:nc("TweenPositionFromTop",{delay:100}),exit:nc("TweenPositionToTop")}),a},t.CoverScoreFont=function(t){var i=dt.CreateEntity(t);return nt.At(i).setAlias("AliasCoverScoreText"),Xu.AddToEntity(i),i.add(Iu,Fu.DefaultText("scorefont",{layerName:"gui_11"})),i},t.CoverHighscoreIcon=function(t){var i=dt.CreateEntity(t);return Xu.AddToEntity(i),i.add(Iu,Fu.DefaultImage("HighscoreIcon",{layerName:"gui_11"})),i},t.CoverPlayBtn=function(t){var i=dt.CreateEntity(t);return Xu.AddToEntity(i),i.add(Iu,Fu.DefaultImage("Btn_Play",{layerName:"gui_22"})),yt.AddWithData(i,{postmake:nc("TweenPositionFromBottom",{duration:800,delay:300}),exit:nc("TweenPositionToBottom")}),rc.AddWithCmdOnUpAndBtnInteraction(i,"RequestGameplay"),i},t.GameOverRestartIcon=function(t){var i=dt.CreateEntity(t);return Xu.AddToEntity(i),i.add(Iu,Fu.DefaultImage("TryAgain",{layerName:"gui_22"})),yt.AddWithData(i,{postmake:nc("TweenPositionFromTop",{delay:100}),exit:nc("TweenPositionToTop")}),i},t.GameOverPlayBtn=function(t){var i=dt.CreateEntity(t);return Xu.AddToEntity(i),i.add(Iu,Fu.DefaultImage("Btn_Play",{layerName:"gui_22"})),yt.AddWithData(i,{postmake:nc("TweenPositionFromBottom"),exit:nc("TweenPositionToBottom")}),rc.AddWithCmdOnUpAndBtnInteraction(i,"RequestCoverFromGameOver"),i},t.GameOverHighscoreIcon=function(t){var i=dt.CreateEntity(t);return Xu.AddToEntity(i),i.add(Iu,Fu.DefaultImage("HighscoreIcon",{layerName:"gui_11"})),yt.AddWithData(i,{postmake:nc("TweenPositionFromTop"),exit:nc("TweenPositionToTop")}),i},t.FadeCurtain=function(t){var i=dt.CreateEntity(t);return Xu.AddToEntity(i),i.add(Iu,Fu.DefaultImage("ZaslonkaFade",{layerName:"pause_22",scale:32})),yt.AddWithData(i,{exit:nc("TweenAlphaTo",{alpha:0,duration:400})}),i},t.PauseBackground=function(t){var i=dt.CreateEntity(t);return Xu.AddToEntity(i),i.add(Iu,Fu.DefaultImage("PauseCurtain",{layerName:"pause_22",scale:32})),i},t.PauseIcon=function(t){var i=dt.CreateEntity(t);return Xu.AddToEntity(i),i.add(Iu,Fu.DefaultImage("PauseIcon",{layerName:"pause_22"})),i},t.PauseButtonCallUnpause=function(t){var i=dt.CreateEntity(t);return Xu.AddToEntity(i),i.add(Iu,Fu.DefaultImage("Btn_Play",{layerName:"pause_22"})),rc.AddWithCmdOnUpAndBtnInteraction(i,"UnpauseGame"),i},t.BtnAudioToggle=function(t){var i=dt.CreateEntity(t);return nt.At(i).setAlias("SettingsToggleBtnAudio"),Xu.AddToEntity(i),i.add(Iu,Fu.DefaultImage("Btn_SoundOn",{layerName:"gui_31",animations:{active:{texture:"Btn_SoundOn"},inactive:{texture:"Btn_SoundOff"}}})),yt.AddWithData(i,{postmake:nc("TweenPositionFromTop"),exit:nc("TweenPositionToTop")}),rc.AddWithCmdOnUpAndBtnInteraction(i,ic.Name),ec.AddWithToggleStatesDictionary(i,"active",{active:{nextState:"inactive",command:nc(Hu.Name)},inactive:{nextState:"active",command:nc(ju.Name)}}),i},t.TutorialHowToPlayHand=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=dt.CreateEntity(t);nt.At(o).setAlias("TutorialHowToPlayHand"),Xu.AddToEntity(o);var a={selfDepth:50,layerDepth:25,curAnimation:"SwipeRight",animations:{Hold:{loop:!0},SwipeRight:{loop:!0}}};return i&&Y(a,i),o.add(Iu,Fu.DefaultSpine("HTP_MinimalHand",a)),o},t.GameplayBtnPause=function(t){var i=dt.CreateEntity(t);return Xu.AddToEntity(i),i.add(Iu,Fu.DefaultImage("Btn_Pause",{layerName:"gui_31"})),yt.AddWithData(i,{postmake:nc("TweenPositionFromRight"),exit:nc("TweenPositionToRight")}),rc.AddWithCmdOnUpAndBtnInteraction(i,"PauseGame"),i},t.GameplayScoreFont=function(t){var i=dt.CreateEntity(t);return nt.At(i).setAlias("GameplayScoreText"),Xu.AddToEntity(i),i.add(Iu,Fu.DefaultText("scorefont",{layerName:"gui_11"})),i},t.GameplayScoreIcon=function(t){var i=dt.CreateEntity(t);return Xu.AddToEntity(i),i.add(Iu,Fu.DefaultImage("ScoreIcon",{layerName:"gui_11"})),i},t.FontInGameplayLayer=function(t,i,o){var a=dt.CreateEntity(t);return Xu.AddToEntity(a,i,o),a.add(Iu,Fu.DefaultText("ingameplayscore",{layerDepth:100})),a},t}return _createClass(CasualGameSharedPrefabs)}(_c),Rc=function(t){_inherits(HoneySnapPrefabs,t);var i=_createSuper(HoneySnapPrefabs);function HoneySnapPrefabs(){var t;return _classCallCheck(this,HoneySnapPrefabs),(t=i.call(this)).GameOverRestartIcon=function(t){var i=dt.CreateEntity(t);return Xu.AddToEntity(i),i.add(Iu,Fu.DefaultImage("TryAgain",{layerName:"gui_22"})),yt.AddWithData(i,{postmake:nc("TweenPositionFromTop",{delay:600,duration:900}),exit:nc("TweenPositionToTop")}),i},t.GameOverPlayBtn=function(t){var i=dt.CreateEntity(t);return Xu.AddToEntity(i),i.add(Iu,Fu.DefaultImage("Btn_Play",{layerName:"gui_22"})),yt.AddWithData(i,{postmake:nc("TweenPositionFromBottom",{delay:600,duration:600}),exit:nc("TweenPositionToBottom")}),rc.AddWithCmdOnUpAndBtnInteraction(i,"RequestCoverFromGameOver"),i},t}return _createClass(HoneySnapPrefabs,[{key:"Bee",value:function Bee(t){return this.GameplaySpineObject(t.name,"Bee","flying",0,0,{layerDepth:100})}},{key:"PostProcessBee",value:function PostProcessBee(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=0,u=0;a=i,u=o,yc.Take(t,a,u),Iu.At(t).getDisplayedAsImage().depth=150,Du.RandomizeAnimationTime(t);var d=Phaser.Math.Between(0,1);tt.At(t).dirX=d,0==tt.At(t).dirX&&(tt.At(t).dirX=-1),tt.At(t).speed=Phaser.Math.Between(150,210),hc.AddToEntityWithBulletBehaviour(t,{speed:Phaser.Math.Between(150,300)});var b={duration:Phaser.Math.Between(2e3,3500),delay:0,ease:"Linear",yoyo:!0,angle:Phaser.Math.Between(-70,70),loop:-1};0==d&&(Iu.At(t).setFlipX(!0),Iu.At(t).setFlipY(!0),Iu.At(t).getDisplayedAsImage().angle=-180,b.angle=-180,b.angle=Phaser.Math.Between(-110,-270),Iu.At(t).setAnimation("FlyLeft",{loop:!0})),Gl.AddToEntity(t),nt.AddBagList(t,["BEES"]),-1e4==o&&(a=0,u=Phaser.Math.Between(200,700),a=0==d?kl.GetDisplayDataCopy().responsiveWidth/2+100+Phaser.Math.Between(0,150):-kl.GetDisplayDataCopy().responsiveWidth/2-100-Phaser.Math.Between(0,150)),yc.Take(t,a,u),b.targets=Du.GetDisplayedAsImage(t),Du.GetDisplayedAsImage(t).scene.tweens.add(b)}},{key:"Glut",value:function Glut(t,i,o){var a=Phaser.Utils.Array.GetRandom(["HoneyGlut_1","HoneyGlut_2","HoneyGlut_3"]),u=this.GameplaySpineObject(t.name,a,"glut",i,o,{layerDepth:0});return nt.AddBagList(u,["HONEY"]),u}}]),HoneySnapPrefabs}(Pc),kc=new Rc,Oc=_createClass((function CasualGameStates(){var t=this;_classCallCheck(this,CasualGameStates),this.Always=new wt("Always"),this.GameplayLoop=new wt("GameplayLoop"),this.GameplayLevel=new wt("GameplayLevel"),this.GameplayGui=new wt("GameplayGui"),this.Cover=new wt("Cover"),this.GameOver=new wt("GameOver"),this.Fade=new wt("Fade"),this.AudioController=new wt("AudioController"),this.Pause=new wt("Pause"),this.CommandRequestCover=mt.register("RequestCover",new gt((function(){kl.SetPauseAllowedByStates(!1),t.Always.continue(),t.GameplayLoop.quit(),t.GameplayGui.quit(),t.GameplayLevel.enterFresh(),t.GameOver.quit(),t.Cover.enterFresh(),t.AudioController.continue()}))),this.CommandRequestCoverFromGameOver=mt.register("RequestCoverFromGameOver",new gt((function(){kl.SetPauseAllowedByStates(!1),t.Always.continue(),t.GameplayLevel.exit(),t.GameplayGui.exit(),t.GameplayLoop.exit(),t.GameOver.exit(),t.AudioController.continue(),t.Fade.enterFresh(),Mt.QueueDelayedFunction(null,550,(function(){t.Cover.enterFresh(),t.GameplayLevel.enterFresh(),t.Fade.exit()}))}))),this.CommandRequestGameplay=mt.register("RequestGameplay",new gt((function(){var i=function func(){kl.SetPauseAllowedByStates(!0),t.Always.continue(),t.Cover.exit(),t.GameOver.quit(),t.GameplayLevel.continue(),t.GameplayGui.enterFresh(),t.GameplayLoop.enterFresh(),t.AudioController.continue()};window.startGame?window.startGame(i):i()}))),this.CommandRequestGameOver=mt.register("RequestGameOver",new gt((function(){kl.SetPauseAllowedByStates(!0),t.Always.continue(),t.GameplayLevel.continue(),t.GameplayGui.continue(),t.GameplayLoop.exit(),t.Cover.quit(),t.GameOver.enterFresh(),t.AudioController.continue()}))),this.CommandRestartLevelLogic=mt.register("RestartLevelLogic",new gt((function(){kl.SetPauseAllowedByStates(!0),t.Always.continue(),t.Cover.exit(),t.GameOver.quit(),t.GameplayLevel.exit(),t.GameplayGui.continue(),t.GameplayLoop.exit(),t.AudioController.continue(),Mt.QueueDelayedFunction(null,100,(function(){var i=function fStartNextLevel(){t.GameplayLevel.enterFresh(),t.GameplayGui.continue(),t.GameplayLoop.enterFresh()};window.startGame?window.startGame(i):i()}))}))),this.CommandPauseGame=mt.register("PauseGame",new gt((function(i){kl.TryPauseGame()&&t.Pause.continue()}))),this.CommandUnpauseGame=mt.register("UnpauseGame",new gt((function(i){kl.TryUnpauseGame()&&(t.Pause.exit(),t.Pause.quit())})))}));var Lc,Dc=_createClass((function CasualGamePremadeOverrides(){_classCallCheck(this,CasualGamePremadeOverrides),this.cover={delta:{x:0,y:0}},this.coverBtnPlay={delta:{x:0,y:0}},this.scorePanel={layer:"gui_11",x:0,y:0},this.coverLogo={layer:"gui_31"},this.gameplayScoreIcon={x:-145,y:0},this.coverScoreIcon={x:-145,y:3}})),Ic=new(function(t){_inherits(InternalGamePremades,t);var i=_createSuper(InternalGamePremades);function InternalGamePremades(){var t;return _classCallCheck(this,InternalGamePremades),(t=i.call(this)).overrides.cover.delta.y=100,t.overrides.coverBtnPlay.delta.y=100,t.overrides.gameplayScoreIcon={x:-145,y:12},t}return _createClass(InternalGamePremades,[{key:"Always",value:function Always(t,i){var o=t.GameplayImageObject(i,"HoneySnap_FullHDBG",0,0);$u.Take(o,0,.5);var a=t.GameplayImageObject(i,"Pasek",0,0);Du.SetScale(a,1,24);var u=t.Background(i);$u.Take(u,0,.5);var d=t.GameplayImageObject(i,"TreeTop");$u.Take(d,0,.5)}},{key:"GameplayLoop",value:function GameplayLoop(t,i){_get(_getPrototypeOf(InternalGamePremades.prototype),"GameplayLoop",this).call(this,t,i)}}]),InternalGamePremades}(function(){function CasualGamePremades(){_classCallCheck(this,CasualGamePremades),this.overrides=new Dc}return _createClass(CasualGamePremades,[{key:"Always",value:function Always(t,i){console.warn("PLEASE DON'T CALL ALWAYS ON CASUAL PREMADES")}},{key:"GameplayLevel",value:function GameplayLevel(t,i){}},{key:"GameplayLoop",value:function GameplayLoop(t,i){var o=t.GameplayBtnPause(i.name);$u.Take(o,-.5,.5),Qu.Take(o,0,80),yt.At(o).runCommandAtTriggerKey("postmake")}},{key:"AudioController",value:function AudioController(t,i){var o=t.BtnAudioToggle(i.name);$u.Take(o,-.5,.5),Qu.Take(o,0,7),yt.At(o).runCommandAtTriggerKey("postmake")}},{key:"GameOver",value:function GameOver(t,i){var o=t.GameOverRestartIcon(i.name);$u.Take(o,0,-.5),Qu.Take(o,0,-30),yt.At(o).runCommandAtTriggerKey("postmake");var a=t.GameOverPlayBtn(i.name);$u.Take(a,0,.5),Qu.Take(a,0,30),yt.At(a).runCommandAtTriggerKey("postmake")}},{key:"Fade",value:function Fade(t,i){var o=t.FadeCurtain(i.name);yt.At(o).runCommandAtTriggerKey("postmake"),Iu.At(o).getDisplayedAsImage().alpha=0,CmdTweenAlphaTo(o,{alpha:1,duration:450})}},{key:"Pause",value:function Pause(t,i){t.PauseBackground(i.name);var o=t.PauseIcon(i.name);$u.Take(o,0,-.5),Qu.Take(o,0,-40);var a=t.PauseButtonCallUnpause(i.name);$u.Take(a,0,.5),Qu.Take(a,0,40),yt.At(a).runCommandAtTriggerKey("postmake")}},{key:"GameplayGui",value:function GameplayGui(t,i){Y(this.overrides,pt.GetSingleton().getPremadeOverrides());var o=t.ScorePanel(i.name,this.overrides.scorePanel.layer);yc.Take(o,this.overrides.scorePanel.x,this.overrides.scorePanel.y),"gui_11"==this.overrides.scorePanel.layer&&$u.Take(o,.5,.5),"gui_21"==this.overrides.scorePanel.layer&&$u.Take(o,0,.5),yt.At(o).runCommandAtTriggerKey("postmake");var a=t.GameplayScoreFont(i.name);Du.ReparentLayer(a,this.overrides.scorePanel.layer),Gu.AddWithPin(o,a,{x:25,y:2});var u=t.GameplayScoreIcon(i.name);Du.ReparentLayer(u,this.overrides.scorePanel.layer),nt.At(u).setAlias("AliasGameplayGuiScoreIcon"),Gu.AddWithPin(o,u,{x:this.overrides.gameplayScoreIcon.x,y:this.overrides.gameplayScoreIcon.y})}},{key:"Cover",value:function Cover(t,i){Y(this.overrides,pt.GetSingleton().getPremadeOverrides());var o=t.CoverTitle(i.name);$u.Take(o,0,-.5),Qu.Take(o,this.overrides.cover.delta.x,this.overrides.cover.delta.y),yt.At(o).runCommandAtTriggerKey("postmake");var a=t.CoverLogo(i.name,this.overrides.coverLogo.layer);"gui_31"==this.overrides.coverLogo.layer?($u.Take(a,-.5,.5),Qu.Take(a,-85,8)):($u.Take(a,-.5,-.5),Qu.Take(a,-10,-10)),yt.At(a).runCommandAtTriggerKey("postmake");var u=t.ScorePanel(i.name,this.overrides.scorePanel.layer);yc.Take(u,this.overrides.scorePanel.x,this.overrides.scorePanel.y),nt.At(u).setAlias("AliasCoverScorePanel"),"gui_11"==this.overrides.scorePanel.layer&&$u.Take(u,.5,.5),"gui_21"==this.overrides.scorePanel.layer&&$u.Take(u,0,.5),yt.At(u).runCommandAtTriggerKey("postmake");var d=t.CoverScoreFont(i.name);Du.ReparentLayer(d,this.overrides.scorePanel.layer),Gu.AddWithPin(u,d,{x:25,y:2});var b=t.CoverHighscoreIcon(i.name);nt.At(b).setAlias("AliasCoverScoreIcon"),Du.ReparentLayer(b,this.overrides.scorePanel.layer),Gu.AddWithPin(u,b,{x:this.overrides.coverScoreIcon.x,y:this.overrides.coverScoreIcon.y});var S=t.CoverPlayBtn(i.name);$u.Take(S,0,.5),Qu.Take(S,this.overrides.coverBtnPlay.delta.x,150+this.overrides.coverBtnPlay.delta.y),yt.At(S).runCommandAtTriggerKey("postmake")}}]),CasualGamePremades}())),Fc={version:"1",highscore:0},Bc="LOOP_COUNT_GAMEPLAY_TIME",Nc=Mc,Yc=Ic,Gc=kc,Xc=function(){function InternalMainScript(){_classCallCheck(this,InternalMainScript)}return _createClass(InternalMainScript,[{key:"Init",value:function Init(){var t=this;Lc=Jc;!function _InitStates(){Lc.AudioController.onEnter=function(){if(Yc.AudioController(Gc,Lc.AudioController),-1==kl.GetAudioState()){var t=it.GetEntityByAlias("SettingsToggleBtnAudio");ec.At(t).setToggleState("inactive")}},Lc.Pause.onEnter=function(){Yc.Pause(Gc,Lc.Pause)},Lc.Fade.onEnter=function(){Yc.Fade(Gc,Lc.Fade)},Lc.Always.onEnter=function(){Yc.Always(Gc,Lc.Always)},Lc.GameplayGui.onEnter=function(){Yc.GameplayGui(Gc,Lc.GameplayGui),t.AddToScore(0)},Lc.GameplayLoop.onEnter=function(){Yc.GameplayLoop(Gc,Lc.GameplayLoop),t.StateEnterGameplayLoop()},Lc.GameplayLoop.onExit=function(){},Lc.GameplayLevel.onEnter=function(){Yc.GameplayLevel(Gc,Lc.GameplayLevel),pt.GetSingleton().hasToResetScoreEachLevel()&&(Nc.subsession.score=0,Nc.subsession.latestScore=0),t.AddToScore(0),t.StateEnterGameplayLevel()},Lc.Cover.onEnter=function(){Yc.Cover(Gc,Lc.Cover),Nc.ResetSubsession(),null!=Fc&&Du.SetTextWithZeroPad(it.GetEntityByAlias("AliasCoverScoreText"),Fc.highscore,6);for(var t=[{x:Phaser.Math.Between(-150,150),y:Phaser.Math.Between(100,200)},{x:Phaser.Math.Between(-250,250),y:Phaser.Math.Between(600,750)},{x:Phaser.Math.Between(-200,200),y:Phaser.Math.Between(800,900)}],i=0;i<5;i++)t.push({x:Phaser.Math.Between(-300,300),y:Phaser.Math.Between(100,800)});for(var o=0;o<t.length;o++){var a=t[o],u=kc.Bee(Lc.GameplayLevel);kc.PostProcessBee(u,a.x,a.y)}},Lc.GameOver.onEnter=function(){if(Yc.GameOver(Gc,Lc.GameOver),t.TrySaveNewHighscore()){var i=Gc.GameOverHighscoreIcon(Lc.GameOver);$u.Take(i,.5,.5),Qu.Take(i,10,80),yt.At(i).runCommandAtTriggerKey("postmake")}}}()}},{key:"AddToScore",value:function AddToScore(t){Nc.subsession.score+=t,Nc.subsession.latestScore=Nc.subsession.score,pt.GetSingleton().onUpdateScore(Nc.subsession.latestScore),it.GetEntityByAlias("GameplayScoreText")&&Du.SetTextWithZeroPad(it.GetEntityByAlias("GameplayScoreText"),Nc.subsession.score,6)}},{key:"ShowTutorialHand",value:function ShowTutorialHand(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Tap",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,a=Gc.TutorialHowToPlayHand(Lc.GameplayLevel);return Iu.At(a).getSpineAnimationList(!1),Iu.At(a).setAnimation(t,{loop:!0}),Xu.At(a).setPosition(i,o),a}},{key:"TrySaveNewHighscore",value:function TrySaveNewHighscore(){return Fc.highscore<Nc.subsession.score&&(Fc.highscore=Nc.subsession.score,kl.SaveGame(),!0)}},{key:"TryKillTutorial",value:function TryKillTutorial(){var t=it.GetEntityByAlias("TutorialHowToPlayHand");t&&Mt.QueueActorToDisposeBuffer(t)}},{key:"RequestLevelWon",value:function RequestLevelWon(){Nc.session.seenTutorial=!0,Nc.currentLevelData.levelLoopEnded||(Nc.currentLevelData.levelLoopEnded=!0,this.TrySaveNewHighscore(),Mt.QueueDelayedFunction(null,750,(function(){pt.GetSingleton().showAd((function(){})),Lc.CommandRestartLevelLogic.run({levelResult:"won"})})),Sc.CleanFunction(Bc))}},{key:"RequestLevelLost",value:function RequestLevelLost(){Nc.session.seenTutorial=!0,Nc.currentLevelData.levelLoopEnded||(Nc.currentLevelData.levelLoopEnded=!0,this.TryKillTutorial(),Lc.CommandRequestGameOver.run(),pt.GetSingleton().showAd((function(){})),Sc.CleanFunction(Bc))}},{key:"StateEnterGameplayLevel",value:function StateEnterGameplayLevel(){Nc.ResetLevelData(),Lc.EnterGameplayLevel()}},{key:"StateEnterGameplayLoop",value:function StateEnterGameplayLoop(){Nc.currentLevelData.levelLoopStarted=!0,0==Nc.session.seenTutorial&&(this.ShowTutorialHand("SwipeUp",-100,600),Nc.session.seenTutorial=!0),Sc.SetUpdateFunc(Bc,(function(t){if(0!=Nc.currentLevelData.levelLoopStarted&&1!=Nc.currentLevelData.levelLoopEnded){var i=function DeltaScaled(t){return t/1e3}(t);Nc.currentLevelData.activeLevelTime+=i}})),Lc.EnterGameplayLoop()}}]),InternalMainScript}(),Uc=new Xc;var zc=function(t){_inherits(RexBoardComponent,t);var i=_createSuper(RexBoardComponent);function RexBoardComponent(t){var o;_classCallCheck(this,RexBoardComponent),(o=i.call(this,null)).board=null,o.boardCfg=null,o.tileXYArray=null;var a=JSON.parse(JSON.stringify(o.constructor.properties));Object.assign(_assertThisInitialized(o),a,t);var u=kl.GetGameplayScene();return o.board=u.rexBoard.add.board(o.boardCfg),o}return _createClass(RexBoardComponent,[{key:"getBoard",value:function getBoard(){return this.board}},{key:"fitAsHexagon",value:function fitAsHexagon(t){var i=kl.GetGameplayScene();this.tileXYArray=this.board.fit(i.rexBoard.hexagonMap.hexagon(this.board,t))}},{key:"onDestroyed",value:function onDestroyed(){console.log("IMPLEMENT PLEASE")}},{key:"enableInput",value:function enableInput(t){this.board.setInteractive(),this.board.on("tiledown",(function(i,o){t(i,o)}))}},{key:"debugTile",value:function debugTile(t){var i=this.getBoard().tileXYToWorldXY(t.x,t.y);kl.GetGameplayScene().add.text(i.x,i.y,"".concat(t.x,",").concat(t.y)).setOrigin(.5)}}],[{key:"GetName",value:function GetName(t){return"rexBoard"}},{key:"At",value:function At(t){return t.rexBoard}},{key:"properties",get:function get(){return{}}},{key:"AddToEntity",value:function AddToEntity(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.add(RexBoardComponent,{boardCfg:i})}}]),RexBoardComponent}(G);var Vc=[{x:2,y:0},{x:1,y:1},{x:1,y:2},{x:0,y:3},{x:0,y:4},{x:0,y:5},{x:1,y:6},{x:1,y:7},{x:2,y:8}],Wc=[{x:0,y:4},{x:0,y:3},{x:1,y:2},{x:1,y:1},{x:2,y:0},{x:3,y:0},{x:4,y:0},{x:5,y:0},{x:6,y:0}],Hc=[{x:0,y:4},{x:0,y:5},{x:0,y:4},{x:1,y:6},{x:1,y:7},{x:2,y:8},{x:3,y:8},{x:4,y:8},{x:5,y:8},{x:6,y:8}],jc=[],qc=function(){function InternalModel$1(){_classCallCheck(this,InternalModel$1),_defineProperty(this,"slots",{s_1:null,s_2:null,s_3:null})}return _createClass(InternalModel$1,[{key:"killFilledTiles",value:function killFilledTiles(){for(var t=this,i=it.GetEntityByAlias("gameBoard"),o=[],a=0;a<Vc.length;a++){for(var u=Vc[a],d=0,b=[];d<100;){var S=u.x+d,C=u.y,M=zc.At(i).getBoard().tileXYZToChess(S,C,0);if(null==M&&(d=100),M){var P=zc.At(i).getBoard().tileXYZToChess(S,C,1);P?b.push({ref:P,x:S,y:C}):(b=[],d=100)}d++}b.length>0&&o.push(b)}for(var R=0;R<Hc.length;R++){for(var O=Hc[R],B=0,N=[];B<10;){var Y=zc.At(i).getBoard().getTileXYAtDirection(O,5,B);if(!Y)break;var G=Math.floor(O.x+B/2),X=O.y;G=Y.x,X=Y.y;var U=zc.At(i).getBoard().tileXYZToChess(G,X,0);if(null==U&&(B=100),U){var z=zc.At(i).getBoard().tileXYZToChess(G,X,1);z?N.push({ref:z,x:G,y:X}):(N=[],B=100)}B++}N.length>0&&o.push(N)}for(var V=0;V<Wc.length;V++){for(var W=Wc[V],H=0,j=[];H<10;){var q=zc.At(i).getBoard().getTileXYAtDirection(W,1,H);if(!q)break;var Z=Math.floor(W.x+H/2),K=W.y;Z=q.x,K=q.y;var $=zc.At(i).getBoard().tileXYZToChess(Z,K,0);if(null==$&&(H=100),$){var et=zc.At(i).getBoard().tileXYZToChess(Z,K,1);et?j.push({ref:et,x:Z,y:K}):(j=[],H=100)}H++}j.length>0&&o.push(j)}for(var nt=0,rt=0;rt<o.length;rt++)for(var st=function _loop(){var a=o[rt][ot];zc.At(i).getBoard().tileXYZToChess(a.x,a.y,1)&&(zc.At(i).getBoard().removeChess(a.ref,a.x,a.y,1),CmdTweenScaleTo(a.ref,{scale:.1,duration:300,delay:50*nt,onComplete:function onComplete(){Xl.Take(a.ref)}}),nt++),t.create(Xu.At(a.ref).refTarget.x,Xu.At(a.ref).refTarget.y,10*o.length),Uc.AddToScore(10*o.length)},ot=0;ot<o[rt].length;ot++)st();for(var at=0;at<nt;at++)Mt.QueueDelayedFunction(GetGUID(),70*at,(function(){kl.PlayAudioFile("Pick_03")}));this.validateForGameOver();for(var ht=it.GetBagActorsReferenceList("HONEY"),lt=0;lt<ht.length;lt++){var ut=ht[lt],ct=tt.At(ut),dt=zc.At(i).getBoard().tileXYZToChess(ct.parent_1.x,ct.parent_1.y,1),ft=zc.At(i).getBoard().tileXYZToChess(ct.parent_2.x,ct.parent_2.y,1);null!=dt&&null!=ft||Xl.Take(ut)}}},{key:"create",value:function create(t,i,o){var a=kc.FontInGameplayLayer(Jc.GameplayLevel,t,i);Du.SetText(a,o);CmdTweenScaleTo(a,{scale:.1,duration:700,delay:300,onComplete:function onComplete(){!function dispose(t){t&&Xl.Take(t)}(a)}}),CmdTweenVisualByDeltaTo(a,{y:-50,duration:400})}},{key:"validateForGameOver",value:function validateForGameOver(){var t=this,i=!1,o=function _loop2(){var o=t.slots[a];if(o){var u=it.GetEntityByAlias("gameBoard");zc.At(u).getBoard().forEachTileXY((function(t){var a=zc.At(u).getBoard().tileXYZToChess(t.x,t.y,0),d=zc.At(u).getBoard().tileXYZToChess(t.x,t.y,1),b=!0;if(a&&null==d)for(var S=tt.At(o),C=Xu.At(a),M=0;M<S.relationList.length;M++){var P=S.relationList[M],R=zc.At(u).getBoard().worldXYToTileXY(C.refTarget.x+P.x,C.refTarget.y+P.y),O=zc.At(u).getBoard().tileXYZToChess(R.x,R.y,0),B=zc.At(u).getBoard().tileXYZToChess(R.x,R.y,1);null!=O&&null==B||(b=!1)}else b=!1;b&&(i=!0)}))}};for(var a in this.slots)o();0==i&&Uc.RequestLevelLost()}},{key:"validateForHoneyDangling",value:function validateForHoneyDangling(){for(var t=it.GetEntityByAlias("gameBoard"),i=0;i<10;i++)for(var o=0;o<10;o++){var a=zc.At(t).getBoard().tileXYZToChess(o,i,0),u=zc.At(t).getBoard().tileXYZToChess(o,i,1),d=o+1,b=i+1;i%2==0&&(d-=1);var S=zc.At(t).getBoard().tileXYZToChess(d,b,0),C=zc.At(t).getBoard().tileXYZToChess(d,b,1),M=zc.At(t).getBoard().tileXYZToChess(d,b,2),P=zc.At(t).getBoard().tileXYZToChess(o+1,i,0),R=zc.At(t).getBoard().tileXYZToChess(o+1,i,1);if(null!=a&&null!=u&&null!=S&&null==C&&null!=P&&null!=R&&null==M){var O=kc.Glut(Jc.GameplayLevel,Xu.At(S).refTarget.x,Xu.At(S).refTarget.y-30);Iu.At(O).getDisplayedAsImage().depth=1,zc.At(t).getBoard().addChess(O,d,b,2),tt.At(O).hexX=d,tt.At(O).hexY=b,tt.At(O).parent_1={x:o,y:i},tt.At(O).parent_2={x:o,y:i}}}for(var B=it.GetBagActorsReferenceList("HONEY"),N=0;N<B.length;N++){var Y=B[N],G=tt.At(Y);zc.At(t).getBoard().tileXYZToChess(G.hexX,G.hexY,1)&&Xl.Take(Y)}}},{key:"registerCommands",value:function registerCommands(){var t=this;mt.register("CmdFigureMove",new gt((function(t){var i=0;0==GetOs().desktop&&(i=-150);for(var o=!0,a=tt.At(t.entity),u=Xu.At(t.entity),d=it.GetEntityByAlias("gameBoard"),b=0;b<a.relationList.length;b++){var S=a.relationList[b];Xu.At(S.entity);var C=zc.At(d).getBoard().worldXYToTileXY(u.refTarget.x+S.x,u.refTarget.y+S.y+i),M=zc.At(d).getBoard().tileXYZToChess(C.x,C.y,0),P=zc.At(d).getBoard().tileXYZToChess(C.x,C.y,1);null!=M&&null==P||(o=!1)}var R=[];if(o)for(var O=0;O<a.relationList.length;O++){var B=a.relationList[O],N=zc.At(d).getBoard().worldXYToTileXY(u.refTarget.x+B.x,u.refTarget.y+B.y+i),Y=zc.At(d).getBoard().tileXYZToChess(N.x,N.y,2);Y&&Iu.At(Y).getDisplayedAsImage().setVisible(!0),R.push(Y)}for(var G=0;G<R.length;G++){var X=R[G],U=jc.indexOf(X);U>=0&&jc.splice(U,1)}for(var z=0;z<jc.length;z++){X=jc[z];Iu.At(X).getDisplayedAsImage().setVisible(!1)}jc=R}))),mt.register("CmdFigureDown",new gt((function(t){kl.PlayAudioFile("Pick_02",{},{});for(var i=Gu.At(t.entity).pinnedEntitiesList,o=0;o<i.length;o++){var a=0;0==GetOs().desktop&&(a=-150),i[o].relation.x=tt.At(i[o].ref).unscaledX,i[o].relation.y=tt.At(i[o].ref).unscaledY+a,Iu.At(i[o].ref).getDisplayedAsImage().depth=110,Iu.At(i[o].ref).bringToTop()}Iu.At(t.entity).getDisplayedAsImage().depth=120,Iu.At(t.entity).bringToTop(),Du.SortParentByProperty(t.entity,"depth")}))),mt.register("CmdFigureUp",new gt((function(i){var o=it.GetEntityByAlias("TutorialHowToPlayHand");o&&(Xl.Take(o),Zc.createRandomFigureWithInput(1),Zc.createRandomFigureWithInput(3));var a=0;0==GetOs().desktop&&(a=-150);for(var u,d,b=!0,S=tt.At(i.entity),C=Xu.At(i.entity),M=it.GetEntityByAlias("gameBoard"),P=0;P<S.relationList.length;P++){var R=S.relationList[P];Xu.At(R.entity);var O=zc.At(M).getBoard().worldXYToTileXY(C.refTarget.x+R.x,C.refTarget.y+R.y+a),B=zc.At(M).getBoard().tileXYZToChess(O.x,O.y,0),N=zc.At(M).getBoard().tileXYZToChess(O.x,O.y,1);null!=B&&null==N||(b=!1)}if(b){kl.PlayAudioFile("Pick_01",{},{});for(var G=0;G<S.relationList.length;G++){var X=S.relationList[G],U=Xu.At(X.entity),z=zc.At(M).getBoard().worldXYToTileXY(C.refTarget.x+X.x,C.refTarget.y+X.y+a);zc.At(M).getBoard().addChess(X.entity,z.x,z.y,1),Iu.At(X.entity).getDisplayedAsImage().depth=90;var V=zc.At(M).getBoard().tileXYToWorldXY(z.x,z.y);U.refTarget.x=V.x,U.refTarget.y=V.y,Iu.At(X.entity).getDisplayedAsImage().setScale(1),u=X.entity,d={duration:200},Iu.At(u).getDisplayedAsImage().setScale(0),Iu.At(u).tweenScale(Y({scale:1,duration:400,delay:0,ease:"Bounce"},d)),t.create(V.x,V.y,3),Uc.AddToScore(3)}Gu.At(i.entity).unpinAll();var W=S.slot;Xl.Take(i.entity),t.slots["s_"+W]=null,Zc.createRandomFigureWithInput(W),Mt.QueueDelayedFunction(GetGUID(),220,(function(){t.killFilledTiles()})),t.validateForHoneyDangling()}else{kl.PlayAudioFile("Place_03",{},{}),function CmdTweenPositionTo(t,i){var o,a;(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&Iu.At(t).fastTrackPosition();var u={duration:1e3,delay:0,ease:"Cubic.InOut"};null!==(o=i.x)&&void 0!==o||(i.x=Du.GetDisplayed(t).x),null!==(a=i.y)&&void 0!==a||(i.y=Du.GetDisplayed(t).y),Y(u,i),Iu.At(t).tweenPosition(u)}(i.entity,{x:S.startX,y:S.startY,duration:200});for(var H=Gu.At(i.entity).pinnedEntitiesList,j=0;j<H.length;j++)H[j].relation.x=tt.At(H[j].ref).scaledX,H[j].relation.y=tt.At(H[j].ref).scaledY,Iu.At(H[j].ref).getDisplayedAsImage().depth=90;Iu.At(i.entity).getDisplayedAsImage().depth=95,Du.SortParentByProperty(i.entity,"depth")}for(var q=0;q<jc.length;q++){var Z=jc[q];Iu.At(Z).getDisplayedAsImage().setVisible(!1)}jc=[]})))}},{key:"addFigureInputToEntity",value:function addFigureInputToEntity(t){if(t){var i=tt.At(t);Iu.At(t).getDisplayedAsZone().setSize(i.input.width,i.input.height),rc.AddWithDrag(t,"CmdFigureDown","CmdFigureUp","CmdFigureMove")}}},{key:"createRandomFigureWithInput",value:function createRandomFigureWithInput(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,o=0,a=900;1==t?o=-210:2==t?o=0:3==t&&(o=210);var u=ed.getShapeDef(),d=Phaser.Math.Between(0,u.length-1);-1!=i&&(d=i);var b=u[d],S=ed.generateFigure(o,a,b,d);tt.At(S).slot=t,this.slots["s_"+t]=S,Zc.addFigureInputToEntity(S)}},{key:"verifyBees",value:function verifyBees(){for(var t=it.GetBagActorsReferenceList("BEES"),i=0;i<t.length;i++){var o=t[i];tt.At(o).speed,0==Iu.At(o).isDisplayedOnScreen()&&tt.At(o).dirX}if(t.length<2){for(var a=[],u=0;u<3;u++)a.push({x:Phaser.Math.Between(-300,300),y:Phaser.Math.Between(100,800)});for(var d=0;d<a.length;d++){var b=kc.Bee(Jc.GameplayLevel);kc.PostProcessBee(b,0,-1e4)}}}}]),InternalModel$1}(),Zc=new qc,Kc=function(t){_inherits(InternalStatesModel,t);var i=_createSuper(InternalStatesModel);function InternalStatesModel(){return _classCallCheck(this,InternalStatesModel),i.apply(this,arguments)}return _createClass(InternalStatesModel,[{key:"EnterGameplayLevel",value:function EnterGameplayLevel(){ed.generateLevel()}},{key:"EnterGameplayLoop",value:function EnterGameplayLoop(){var t=it.GetEntityByAlias("TutorialHowToPlayHand");t?(Du.SetScale(t,.75,.75),yc.Take(t,20,900),Zc.createRandomFigureWithInput(2,9),Iu.At(t).setAnimation("SwipeWayUp",{loop:!0})):(Zc.createRandomFigureWithInput(1),Zc.createRandomFigureWithInput(2),Zc.createRandomFigureWithInput(3))}}]),InternalStatesModel}(Oc),Jc=new Kc,Qc=Jc,$c=[[{x:4,y:4},{x:3,y:3},{x:5,y:4},{x:5,y:3}],[{x:4,y:4},{x:3,y:5},{x:5,y:4},{x:5,y:5}],[{x:4,y:4},{x:3,y:3},{x:2,y:3},{x:3,y:5}],[{x:4,y:4},{x:4,y:3},{x:5,y:3},{x:4,y:5}],[{x:4,y:4},{x:4,y:3},{x:4,y:5},{x:5,y:5}],[{x:4,y:4},{x:3,y:3},{x:2,y:5},{x:3,y:5}],[{x:4,y:4},{x:3,y:5},{x:4,y:3},{x:5,y:2}],[{x:4,y:4},{x:4,y:5},{x:3,y:3},{x:3,y:2}],[{x:4,y:4},{x:2,y:4},{x:3,y:4},{x:5,y:4}],[{x:4,y:4},{x:3,y:4},{x:3,y:3},{x:4,y:3}],[{x:4,y:4},{x:3,y:3},{x:4,y:3},{x:5,y:4}],[{x:4,y:4},{x:3,y:3},{x:3,y:5},{x:4,y:5}],[{x:4,y:4},{x:4,y:3},{x:3,y:5},{x:4,y:5}],[{x:4,y:4},{x:3,y:4},{x:5,y:4},{x:3,y:5}],[{x:4,y:4},{x:4,y:3},{x:5,y:4},{x:4,y:5}],[{x:4,y:4},{x:3,y:4},{x:3,y:3},{x:5,y:4}],[{x:4,y:4},{x:4,y:3},{x:5,y:4},{x:3,y:4}],[{x:4,y:4},{x:3,y:4},{x:5,y:4},{x:4,y:5}],[{x:4,y:4},{x:3,y:4},{x:3,y:5},{x:4,y:3}],[{x:4,y:4},{x:3,y:3},{x:5,y:4},{x:4,y:5}],[{x:4,y:4},{x:3,y:3},{x:4,y:3},{x:4,y:5}],[{x:4,y:4},{x:3,y:3},{x:4,y:3},{x:3,y:5}],[{x:4,y:4},{x:4,y:3},{x:5,y:4},{x:3,y:5}],[{x:4,y:4},{x:3,y:3},{x:3,y:4},{x:4,y:5}],[{x:4,y:4}],[{x:4,y:4}],[{x:4,y:4}],[{x:4,y:4}]],td=.7,ed=new(function(){function InternalModel(){_classCallCheck(this,InternalModel)}return _createClass(InternalModel,[{key:"generateLevel",value:function generateLevel(){var t=kc.EmptyObject(Qc.GameplayLevel);nt.At(t).setAlias("gameBoard"),zc.AddToEntity(t,{grid:{gridType:"hexagonGrid",x:-280,y:220,size:40,staggeraxis:"x",staggerindex:"odd"}});var i=zc.At(t);for(var o in i.fitAsHexagon(4),i.tileXYArray){var a=i.tileXYArray[o],u=i.getBoard().tileXYToWorldXY(a.x,a.y),d=kc.GameplayImageObject(Jc.GameplayLevel,"HexBackground",u.x,u.y);i.getBoard().addChess(d,a.x,a.y,0);var b=kc.GameplayImageObject(Jc.GameplayLevel,"HoneyHex",u.x,u.y);Iu.At(b).getDisplayedAsImage().setAlpha(.25),Iu.At(b).getDisplayedAsImage().setVisible(!1),i.getBoard().addChess(b,a.x,a.y,2)}}},{key:"getShapeDef",value:function getShapeDef(){return $c}},{key:"generateFigure",value:function generateFigure(t,i,o,a){for(var u=it.GetEntityByAlias("gameBoard"),d=zc.At(u),b=o,S=[],C=0;C<b.length;C++){var M=b[C];S.push(d.getBoard().tileXYToWorldXY(M.x,M.y))}var P,R=[],O=S[0];P=kc.GameplayZoneObject(Jc.GameplayLevel,O.x,O.y);for(var B=4,N=4,Y=4,G=4,X=0;X<S.length;X++){var U=S[X],z=b[X];0==X&&(B=z.x,N=z.x,Y=z.y,G=z.y,z.x,z.y),z.x<B&&(B=z.x),z.x>N&&(N=z.x),z.y<Y&&(Y=z.y),z.y>G&&(G=z.y);var V=kc.GameplayImageObject(Jc.GameplayLevel,"HoneyHex",U.x,U.y,{layerDepth:20});Iu.At(V).getDisplayedAsImage().setScale(td,td),R.push(V)}for(var W=0;W<R.length;W++){var H=R[W];Gu.AddWithPin(P,H,Xu.CalculateDeltaBetween(P,H))}yc.Take(P,t,i),Wu.Update(0);var j=Gu.At(P),q=[];if(j)for(var Z=0;Z<j.pinnedEntitiesList.length;Z++){var K=j.pinnedEntitiesList[Z],$=K.relation;q.push({x:$.x,y:$.y,entity:K.ref}),tt.At(K.ref).unscaledX=$.x,tt.At(K.ref).unscaledY=$.y,$.x*=td,$.y*=td,tt.At(K.ref).scaledX=$.x,tt.At(K.ref).scaledY=$.y}var et=Xu.At(P),nt=N-B+1,rt=G-Y+1;if(N%2==0&&G%2!=0&&j)for(var st=0;st<j.pinnedEntitiesList.length;st++){j.pinnedEntitiesList[st].relation.x+=22*td}0==a&&(et.refTarget.x-=25.2,et.refTarget.y+=25.2),1==a&&(et.refTarget.x-=25.2,et.refTarget.y-=25.2),2==a&&(et.refTarget.x+=25.2),3==a&&(et.refTarget.x-=50.4),4==a&&(et.refTarget.x-=50.4),5==a&&(et.refTarget.x+=25.2),6==a&&(et.refTarget.y+=25.2),7==a&&(et.refTarget.y+=25.2),8==a&&(et.refTarget.x+=25.2),9==a&&(et.refTarget.x+=24*td,et.refTarget.y+=25.2),10==a&&(et.refTarget.x+=0,et.refTarget.y+=25.2),11==a&&(et.refTarget.x-=24*td),12==a&&(et.refTarget.x-=24*td),13==a&&(et.refTarget.y-=25.2),14==a&&(et.refTarget.x-=25.2),15==a&&(et.refTarget.y+=25.2),16==a&&(et.refTarget.y+=25.2),17==a&&(et.refTarget.y-=25.2),20==a&&(et.refTarget.x-=24*td),21==a&&(et.refTarget.x-=24*td);var ot=et.refTarget.x,at=et.refTarget.y;return Wu.Update(0),tt.AddToEntityWithProperties(P,{hasInput:!1,input:{width:72*nt,height:72*rt},startX:ot,startY:at}),tt.At(P).relationList=q,P}}]),InternalModel}()),id=function(){function ScriptLoopRoutine(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0;_classCallCheck(this,ScriptLoopRoutine),null==o&&(o=GetGUID()),this.name=o,this.func=t,this.guards=i}return _createClass(ScriptLoopRoutine,[{key:"Init",value:function Init(){}},{key:"OnRegister",value:function OnRegister(){}},{key:"GetName",value:function GetName(){return this.name}},{key:"Update",value:function Update(t){for(var i=0;i<this.guards.length;i++){if((0,this.guards[i])())return}this.func(t)}}],[{key:"Register",value:function Register(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0;M.RegisterRoutine(new ScriptLoopRoutine(t,i,o))}}]),ScriptLoopRoutine}();var nd="HoneySnapManifest",rd="#7d8700",sd="HoneySnap",od="HoneySnap",ad=function HoneySnapGameCentralRegistry(){var t=Mc;Zc.registerCommands();var i=new ut;dt.SetEngine(i);var o=i.createWorld();dt.SetWorld(o),function DoCommonGameRegisters(t){t.registerComponent(tt,"data"),t.registerComponent(Xu,"transform"),t.registerComponent(Iu,"visual"),t.registerComponent(yt,"commands"),t.registerComponent(nt,"bags"),t.registerComponent(Gu,"pinOthers"),t.registerComponent(rc,"interactive"),t.registerComponent(ec,"toggle"),t.registerComponent(hc,"physics"),t.registerComponent(gc,gc.GetName()),pc.RegisterQuery(),uc.RegisterQuery(),zu.RegisterQuery(),dc.RegisterQuery(),mc.RegisterQuery(),Xl.RegisterPackedAsGameCommand(),tc.RegisterPackedAsGameCommand(),qu.RegisterPackedAsGameCommand(),$u.RegisterPackedAsGameCommand(),Qu.RegisterPackedAsGameCommand(),Ku.RegisterPackedAsGameCommand(),Zu.RegisterPackedAsGameCommand(),Ju.RegisterPackedAsGameCommand(),ic.RegisterPackedAsGameCommand(),Hu.RegisterPackedAsGameCommand(),ju.RegisterPackedAsGameCommand()}(i),function DoCasualGameRegisters(t){mt.register("TweenCoverTitle",new gt((function(t){var i=t.entity;CmdTweenVisualByDeltaFrom(i,{y:-800,duration:1e3,onComplete:function onComplete(){CmdTweenVisualByDeltaTo(i,{y:-25,duration:1800,yoyo:!0,repeat:-1,ease:"Quadratic.In"})}})}))),mt.register("TweenPositionFromTop",new gt((function(t){CmdTweenVisualByDeltaFrom(t.entity,Y({y:-700,duration:700},t))}))),mt.register("TweenPositionToTop",new gt((function(t){CmdTweenVisualByDeltaTo(t.entity,Y({y:-700,duration:450},t))}))),mt.register("TweenPositionFromBottom",new gt((function(t){CmdTweenVisualByDeltaFrom(t.entity,Y({y:700,duration:450},t))}))),mt.register("TweenPositionToBottom",new gt((function(t){CmdTweenVisualByDeltaTo(t.entity,Y({y:700,duration:700},t))}))),mt.register("TweenScaleToZero",new gt((function(t){var i={scale:0,duration:700};console.log(i),CmdTweenScaleTo(t.entity,Y(i,t))}))),mt.register("TweenPositionFromRight",new gt((function(t){CmdTweenVisualByDeltaFrom(t.entity,Y({x:700,duration:450},t))}))),mt.register("TweenPositionToRight",new gt((function(t){CmdTweenVisualByDeltaTo(t.entity,Y({x:700,duration:700},t))}))),mt.register("TweenAlphaTo",new gt((function(t){CmdTweenAlphaTo(t.entity,Y({alpha:1,duration:500},t))})))}(),i.registerComponent(Gl,Gl.GetName()),Nu.RegisterQuery(),i.registerComponent(zc,zc.GetName()),bc.Register(),Sc.Register(),id.Register((function(t){Zc.verifyBees()}),[function fBlockIfGameInitializedFalse(){return 0==t.session.initialized},function fBlockIfLevelEnded(){return 1==t.currentLevelData.levelLoopEnded}]),Wu.Register(),Yu.Register(),Mt.Register()},hd=function HoneySnapGameStartNormal(){Fc=kl.GetSaveSlotReference(Fc),Uc.Init(),Nc.session.initialized=!0,Mt.QueueDelayedFunction(null,0,(function(){return Lc.CommandRequestCover.run()})),kl.PlayAudioFile("GameMusic",null,{loop:!0,volume:.3})};var ld=function(){function EventTargetPolyfill(){_classCallCheck(this,EventTargetPolyfill),this.listeners={}}return _createClass(EventTargetPolyfill,[{key:"addEventListener",value:function addEventListener(t,i){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(i)}},{key:"removeEventListener",value:function removeEventListener(t,i){if(t in this.listeners)for(var o=this.listeners[t],a=0,u=o.length;a<u;a++)if(o[a]===i)return void o.splice(a,1)}},{key:"dispatchEvent",value:function dispatchEvent(t){if(!(t.type in this.listeners))return!0;for(var i=this.listeners[t.type].slice(),o=0,a=i.length;o<a;o++)i[o].call(this,t);return!t.defaultPrevented}}]),EventTargetPolyfill}();!function ____FPatchFixObjectAssign(){"function"!=typeof Object.assign&&(console.log("PolyfillPatch: Object.Assign"),Object.defineProperty(Object,"assign",{value:function assign(t,i){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(t),a=1;a<arguments.length;a++){var u=arguments[a];if(null!=u)for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(o[d]=u[d])}return o},writable:!0,configurable:!0}))}(),function ____FPatchFixEventTargetForIE(){window.EventTarget||(console.log("PolyfillPatch: EventTarget"),window.EventTarget=ld)}(),function ____FPatchFixObjectEntries(){Object.entries||console.log("PolyfillPatch: Object.Entries"),Object.entries=function(t){for(var i=Object.keys(t),o=i.length,a=new Array(o);o--;)a[o]=[i[o],t[i[o]]];return a}}(),function ____PolyfixObjectValues(){Object.values||(console.log("PolyfillPatch: Object.Values"),Object.values=function(t){return Object.keys(t).map((function(i){return t[i]}))})}(),function ____PolyfixFunctionName(){var t=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^\(\s\/]*)\s*/;function _name(){var i,o;return this===Function||this===Function.prototype.constructor?o="Function":this!==Function.prototype&&(o=(i=(""+this).match(t))&&i[1]),o||""}var i=!("name"in Function.prototype&&"name"in function x(){}),o="function"==typeof Object.defineProperty&&function(){var t;try{Object.defineProperty(Function.prototype,"_xyz",{get:function get(){return"blah"},configurable:!0}),t="blah"===Function.prototype._xyz,delete Function.prototype._xyz}catch(i){t=!1}return t}(),a="function"==typeof Object.prototype.__defineGetter__&&function(){var t;try{Function.prototype.__defineGetter__("_abc",(function(){return"foo"})),t="foo"===Function.prototype._abc,delete Function.prototype._abc}catch(i){t=!1}return t}();Function.prototype._name=_name,i&&(console.log("PolyfixPatch: Function.name"),o?Object.defineProperty(Function.prototype,"name",{get:function get(){var t=_name.call(this);return this!==Function.prototype&&Object.defineProperty(this,"name",{value:t,configurable:!0}),t},configurable:!0}):a&&Function.prototype.__defineGetter__("name",(function(){var t=_name.call(this);return this!==Function.prototype&&this.__defineGetter__("name",(function(){return t})),t})))}();var ud=function(t){_inherits(BlackmoonReleaseBranding,t);var i=_createSuper(BlackmoonReleaseBranding);function BlackmoonReleaseBranding(){return _classCallCheck(this,BlackmoonReleaseBranding),i.apply(this,arguments)}return _createClass(BlackmoonReleaseBranding,[{key:"getFlags",value:function getFlags(){return{disableSaveUserPrefs:0,disableSaveGameData:0,disableFakeMusicPreload:0,cordovaListenersEnabled:0,disableAutoPause:0,allowPauseAlways:0}}}]),BlackmoonReleaseBranding}(pt);pt.SetSingleton(new ud),function InitHoneySnapGame(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=new Pl;o.data.flagOverrides=t,o.data.gameName=sd,o.data.gameSubEngineConfig=Y({dom:{createContainer:!0},title:od,type:Phaser.AUTO,parent:"game",backgroundColor:rd,scale:{width:640,height:1050,min:{width:135,height:240},max:{width:4320,height:7680},mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{debug:false}}},i),o.data.requiredScreenOrientation="portrait",GetOs().desktop&&(o.data.requiredScreenOrientation="any"),o.data.preloaderInitialsAssetsNames={manifestJson:nd,logo:"PreloaderLogo",font:"PreloaderFontObelix_63"},o.data.initialAssetPackData=a.GetRequestAsJsonFromArray([{path:"json",type:"json",files:[nd]},{path:"preloader",type:"png",files:["PreloaderLogo","EmptyPNG"]},{path:"preloader",type:"font",files:["PreloaderFontObelix_63"]}]),o.data.funcDoGameRegisters=ad,o.data.funcStartGame=hd,UsePhaserSubEngine(o)}(pt.GetSingleton().getFlags(),{})}}}))}();
