var t=Object.defineProperty,__publicField=(i,n,o)=>(((i,n,o)=>{n in i?t(i,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[n]=o})(i,"symbol"!=typeof n?n+"":n,o),o);import("data:text/javascript;base64,Cg==");!function polyfill(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))processPreload(t);new MutationObserver((t=>{for(const i of t)if("childList"===i.type)for(const t of i.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&processPreload(t)})).observe(document,{childList:!0,subtree:!0})}function processPreload(t){if(t.ep)return;t.ep=!0;const i=function getFetchOpts(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerpolicy&&(i.referrerPolicy=t.referrerpolicy),"use-credentials"===t.crossorigin?i.credentials="include":"anonymous"===t.crossorigin?i.credentials="omit":i.credentials="same-origin",i}(t);fetch(t.href,i)}}();const i=class{static SetSingleton(t){i.Singleton=t,i.Singleton.init(),console.log(t)}constructor(){this.topScore=0}init(){}getPremadeOverrides(){return{}}gameEvent(t,i=null){}static GetSingleton(){return this.Singleton}getAudioOverrides(){return{}}getFlags(){return{disableSaveUserPrefs:0,disableSaveGameData:0,disableFakeMusicPreload:0,cordovaListenersEnabled:0,disableAutoPause:0,allowPauseAlways:0}}getUntypedFlags(){return{}}onGetRendererTypeOverride(t){return t}hasToResetScoreEachLevel(){return!1}adaptLocalStorageSetItem(t,i){localStorage.setItem(t,i)}adaptLocalStorageGetItem(t){return localStorage.getItem(t)}showAd(t){t()}onUpdateScore(t){this.topScore=t}onUpdateLevelNumber(t){}pushAPIGameLoadObj(t){}};let n=i;__publicField(n,"Singleton");class EventTargetPolyfill{constructor(){this.listeners={}}addEventListener(t,i){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(i)}removeEventListener(t,i){if(!(t in this.listeners))return;const n=this.listeners[t];for(let o=0,a=n.length;o<a;o++)if(n[o]===i)return void n.splice(o,1)}dispatchEvent(t){if(!(t.type in this.listeners))return!0;const i=this.listeners[t.type].slice();for(let n=0,o=i.length;n<o;n++)i[n].call(this,t);return!t.defaultPrevented}}"function"!=typeof Object.assign&&(console.log("PolyfillPatch: Object.Assign"),Object.defineProperty(Object,"assign",{value:function assign(t,i){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),o=1;o<arguments.length;o++){var a=arguments[o];if(null!=a)for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(n[u]=a[u])}return n},writable:!0,configurable:!0})),window.EventTarget||(console.log("PolyfillPatch: EventTarget"),window.EventTarget=EventTargetPolyfill),Object.entries||console.log("PolyfillPatch: Object.Entries"),Object.entries=function(t){for(var i=Object.keys(t),n=i.length,o=new Array(n);n--;)o[n]=[i[n],t[i[n]]];return o},Object.values||(console.log("PolyfillPatch: Object.Values"),Object.values=function(t){return Object.keys(t).map((function(i){return t[i]}))}),function(){var t=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^\(\s\/]*)\s*/;function _name(){var i,n;return this===Function||this===Function.prototype.constructor?n="Function":this!==Function.prototype&&(n=(i=(""+this).match(t))&&i[1]),n||""}var i=!("name"in Function.prototype&&"name"in function x(){}),n="function"==typeof Object.defineProperty&&function(){var t;try{Object.defineProperty(Function.prototype,"_xyz",{get:function(){return"blah"},configurable:!0}),t="blah"===Function.prototype._xyz,delete Function.prototype._xyz}catch(i){t=!1}return t}(),o="function"==typeof Object.prototype.__defineGetter__&&function(){var t;try{Function.prototype.__defineGetter__("_abc",(function(){return"foo"})),t="foo"===Function.prototype._abc,delete Function.prototype._abc}catch(i){t=!1}return t}();Function.prototype._name=_name,i&&(console.log("PolyfixPatch: Function.name"),n?Object.defineProperty(Function.prototype,"name",{get:function(){var t=_name.call(this);return this!==Function.prototype&&Object.defineProperty(this,"name",{value:t,configurable:!0}),t},configurable:!0}):o&&Function.prototype.__defineGetter__("name",(function(){var t=_name.call(this);return this!==Function.prototype&&this.__defineGetter__("name",(function(){return t})),t})))}();var IsArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)};class AssetPackLoader{static GetRequestAsJsonFromArray(t){const i=new AssetPackLoader;return i.addRequestArray(t),i.getRequestAsJson()}constructor(){this._files={jsons:[],png:[]},this.request=null,this.loadFuncDict=null}fillRequestDataFrom(t){console.assert(t,"data is: ",t),IsArray(t)||console.error("TODO: implement for object that isnt array"),this.request=t}supplyLoadFunctionDictionary(t,i){var n,o;this.loadFuncDict=(n=t,o=i,{begin:function(){n.load.on("loaderror",(function(t){console.warn("error loading: ",t)}),n),n.load.once("complete",(function(){const t=o;n.load.removeAllListeners(),n.load.reset(),t()}))},audio:function(t,i){n.load.audio(t,[i+"/"+t+".mp3",i+"/"+t+".ogg"])},font:function(t,i){n.load.bitmapFont(t,i+"/"+t+".png",i+"/"+t+".xml")},text:(t,i)=>{n.load.text(t,i+"/"+t+".txt")},json:function(t,i){n.load.json(t,i+"/"+t+".json")},png:function(t,i){n.load.image(t,i+"/"+t+".png")},spine:(t,i)=>{n.load.spine(t,i+"/"+t+".json",i+"/"+t+".atlas")},multiatlas:(t,i)=>{n.load.multiatlas("megaset","megaset/megaset.json")}})}load(){console.assert(null!=this.loadFuncDict,"load func dict: ",this.loadFuncDict),console.assert(this.request,"request: ",this.request),this.loadFuncDict.begin();for(const t in this.request){const i=this.request[t],n=i.path,o=i.type,a=i.files;if(i.mode){const t=i.mode;if("sequential"==t.def)for(let i=t.from;i<=t.to;i++)a.push(t.base+i)}for(const t in a){const i=a[t];null==this.loadFuncDict[o]&&console.error("loader dict didnt implement: ",o),this.loadFuncDict[o](i,n)}}}getRequestAsJson(){return JSON.parse(JSON.stringify(this.request))}addRequestArray(t){this.request&&console.error("TODO: implement request merge"),this.request=t}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var o,a={exports:{}};o=a,function webpackUniversalModuleDefinition(t,i){o.exports=i()}(0,(function(){return function(t){var i={};function __webpack_require__(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,__webpack_require__),o.l=!0,o.exports}return __webpack_require__.m=t,__webpack_require__.c=i,__webpack_require__.d=function(t,i,n){__webpack_require__.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(t,i){if(1&i&&(t=__webpack_require__(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var o in t)__webpack_require__.d(n,o,function(i){return t[i]}.bind(null,o));return n},__webpack_require__.n=function(t){var i=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(i,"a",i),i},__webpack_require__.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=1528)}([function(t,i){function getProperty2(t,i,n){var o=n?t[i]:Object.getOwnPropertyDescriptor(t,i);return!n&&o.value&&"object"==typeof o.value&&(o=o.value),!(!o||!function hasGetterOrSetter2(t){return!!t.get&&"function"==typeof t.get||!!t.set&&"function"==typeof t.set}(o))&&(void 0===o.enumerable&&(o.enumerable=!0),void 0===o.configurable&&(o.configurable=!0),o)}function hasNonConfigurable2(t,i){var n=Object.getOwnPropertyDescriptor(t,i);return!!n&&(n.value&&"object"==typeof n.value&&(n=n.value),!1===n.configurable)}function extend2(t,i,n,o){for(var a in i)if(i.hasOwnProperty(a)){var u=getProperty2(i,a,n);if(!1!==u){if(hasNonConfigurable2((o||t).prototype,a)){if(Class2.ignoreFinals)continue;throw new Error("cannot override final property '"+a+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,a,u)}else t.prototype[a]=i[a]}}function mixin2(t,i){if(i){Array.isArray(i)||(i=[i]);for(var n=0;n<i.length;n++)extend2(t,i[n].prototype||i[n])}}function Class2(t){var i,n;if(t||(t={}),t.initialize){if("function"!=typeof t.initialize)throw new Error("initialize must be a function");i=t.initialize,delete t.initialize}else if(t.Extends){var o=t.Extends;i=function(){o.apply(this,arguments)}}else i=function(){};t.Extends?(i.prototype=Object.create(t.Extends.prototype),i.prototype.constructor=i,n=t.Extends,delete t.Extends):i.prototype.constructor=i;var a=null;return t.Mixins&&(a=t.Mixins,delete t.Mixins),mixin2(i,a),extend2(i,t,!0,n),i}Class2.extend=extend2,Class2.mixin=mixin2,Class2.ignoreFinals=!1,t.exports=Class2},function(t,i){t.exports=function(){}},function(t,i){t.exports=function(t,i,n){var o=typeof t;return t&&"number"!==o&&"string"!==o&&t.hasOwnProperty(i)&&void 0!==t[i]?t[i]:n}},function(t,i,n){var o=n(0),a=n(124),u=new o({initialize:function Vector24(t,i){this.x=0,this.y=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0):(void 0===i&&(i=t),this.x=t||0,this.y=i||0)},clone:function(){return new u(this.x,this.y)},copy:function(t){return this.x=t.x||0,this.y=t.y||0,this},setFromObject:function(t){return this.x=t.x||0,this.y=t.y||0,this},set:function(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setTo:function(t,i){return this.set(t,i)},setToPolar:function(t,i){return null==i&&(i=1),this.x=Math.cos(t)*i,this.y=Math.sin(t)*i,this},equals:function(t){return this.x===t.x&&this.y===t.y},fuzzyEquals:function(t,i){return a(this.x,t.x,i)&&a(this.y,t.y,i)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},setAngle:function(t){return this.setToPolar(t,this.length())},add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(t){var i=t.x-this.x,n=t.y-this.y;return Math.sqrt(i*i+n*n)},distanceSq:function(t){var i=t.x-this.x,n=t.y-this.y;return i*i+n*n},length:function(){var t=this.x,i=this.y;return Math.sqrt(t*t+i*i)},setLength:function(t){return this.normalize().scale(t)},lengthSq:function(){var t=this.x,i=this.y;return t*t+i*i},normalize:function(){var t=this.x,i=this.y,n=t*t+i*i;return n>0&&(n=1/Math.sqrt(n),this.x=t*n,this.y=i*n),this},normalizeRightHand:function(){var t=this.x;return this.x=-1*this.y,this.y=t,this},normalizeLeftHand:function(){var t=this.x;return this.x=this.y,this.y=-1*t,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lerp:function(t,i){void 0===i&&(i=0);var n=this.x,o=this.y;return this.x=n+i*(t.x-n),this.y=o+i*(t.y-o),this},transformMat3:function(t){var i=this.x,n=this.y,o=t.val;return this.x=o[0]*i+o[3]*n+o[6],this.y=o[1]*i+o[4]*n+o[7],this},transformMat4:function(t){var i=this.x,n=this.y,o=t.val;return this.x=o[0]*i+o[4]*n+o[12],this.y=o[1]*i+o[5]*n+o[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(t){var i=this.length();return i&&i>t&&this.scale(t/i),this},reflect:function(t){return t=t.clone().normalize(),this.subtract(t.scale(2*this.dot(t)))},mirror:function(t){return this.reflect(t).negate()},rotate:function(t){var i=Math.cos(t),n=Math.sin(t);return this.set(i*this.x-n*this.y,n*this.x+i*this.y)}});u.ZERO=new u,u.RIGHT=new u(1,0),u.LEFT=new u(-1,0),u.UP=new u(0,-1),u.DOWN=new u(0,1),u.ONE=new u(1,1),t.exports=u},function(t,i,n){var o=n(0),a=n(56),u=new o({initialize:function Point4(t,i){void 0===t&&(t=0),void 0===i&&(i=t),this.type=a.POINT,this.x=t,this.y=i},setTo:function(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.x=t,this.y=i,this}});t.exports=u},function(t,i,n){var o=n(0),a=n(24),u=n(20),d=new o({initialize:function GameObjectFactory2(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(u.BOOT,this.boot,this),this.events.on(u.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(u.DESTROY,this.destroy,this)},start:function(){this.events.once(u.SHUTDOWN,this.shutdown,this)},existing:function(t){return(t.renderCanvas||t.renderWebGL)&&this.displayList.add(t),t.preUpdate&&this.updateList.add(t),t},shutdown:function(){this.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});d.register=function(t,i){d.prototype.hasOwnProperty(t)||(d.prototype[t]=i)},d.remove=function(t){d.prototype.hasOwnProperty(t)&&delete d.prototype[t]},a.register("GameObjectFactory",d,"add"),t.exports=d},function(t,i){t.exports=function(t,i,n){if(t&&"number"!=typeof t){if(t.hasOwnProperty(i))return t[i];if(-1!==i.indexOf(".")){for(var o=i.split("."),a=t,u=n,d=0;d<o.length;d++){if(!a.hasOwnProperty(o[d])){u=n;break}u=a[o[d]],a=a[o[d]]}return u}return n}return n}},function(t,i){t.exports=function(t){if("object"!=typeof t||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}return!0}},function(t,i){var n={},o={install:function(t){for(var i in n)t[i]=n[i]},register:function(t,i){n[t]=i},destroy:function(){n={}}};t.exports=o},function(t,i,n){var o=Object.prototype.hasOwnProperty,a="~";function Events(){}function EE2(t,i,n){this.fn=t,this.context=i,this.once=n||!1}function addListener(t,i,n,o,u){if("function"!=typeof n)throw new TypeError("The listener must be a function");var d=new EE2(n,o||t,u),f=a?a+i:i;return t._events[f]?t._events[f].fn?t._events[f]=[t._events[f],d]:t._events[f].push(d):(t._events[f]=d,t._eventsCount++),t}function clearEvent(t,i){0==--t._eventsCount?t._events=new Events:delete t._events[i]}function EventEmitter2(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(a=!1)),EventEmitter2.prototype.eventNames=function eventNames(){var t,i,n=[];if(0===this._eventsCount)return n;for(i in t=this._events)o.call(t,i)&&n.push(a?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},EventEmitter2.prototype.listeners=function listeners(t){var i=a?a+t:t,n=this._events[i];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,u=n.length,d=new Array(u);o<u;o++)d[o]=n[o].fn;return d},EventEmitter2.prototype.listenerCount=function listenerCount(t){var i=a?a+t:t,n=this._events[i];return n?n.fn?1:n.length:0},EventEmitter2.prototype.emit=function emit(t,i,n,o,u,d){var f=a?a+t:t;if(!this._events[f])return!1;var p,b,S=this._events[f],M=arguments.length;if(S.fn){switch(S.once&&this.removeListener(t,S.fn,void 0,!0),M){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,i),!0;case 3:return S.fn.call(S.context,i,n),!0;case 4:return S.fn.call(S.context,i,n,o),!0;case 5:return S.fn.call(S.context,i,n,o,u),!0;case 6:return S.fn.call(S.context,i,n,o,u,d),!0}for(b=1,p=new Array(M-1);b<M;b++)p[b-1]=arguments[b];S.fn.apply(S.context,p)}else{var C,P=S.length;for(b=0;b<P;b++)switch(S[b].once&&this.removeListener(t,S[b].fn,void 0,!0),M){case 1:S[b].fn.call(S[b].context);break;case 2:S[b].fn.call(S[b].context,i);break;case 3:S[b].fn.call(S[b].context,i,n);break;case 4:S[b].fn.call(S[b].context,i,n,o);break;default:if(!p)for(C=1,p=new Array(M-1);C<M;C++)p[C-1]=arguments[C];S[b].fn.apply(S[b].context,p)}}return!0},EventEmitter2.prototype.on=function on(t,i,n){return addListener(this,t,i,n,!1)},EventEmitter2.prototype.once=function once(t,i,n){return addListener(this,t,i,n,!0)},EventEmitter2.prototype.removeListener=function removeListener(t,i,n,o){var u=a?a+t:t;if(!this._events[u])return this;if(!i)return clearEvent(this,u),this;var d=this._events[u];if(d.fn)d.fn!==i||o&&!d.once||n&&d.context!==n||clearEvent(this,u);else{for(var f=0,p=[],b=d.length;f<b;f++)(d[f].fn!==i||o&&!d[f].once||n&&d[f].context!==n)&&p.push(d[f]);p.length?this._events[u]=1===p.length?p[0]:p:clearEvent(this,u)}return this},EventEmitter2.prototype.removeAllListeners=function removeAllListeners(t){var i;return t?(i=a?a+t:t,this._events[i]&&clearEvent(this,i)):(this._events=new Events,this._eventsCount=0),this},EventEmitter2.prototype.off=EventEmitter2.prototype.removeListener,EventEmitter2.prototype.addListener=EventEmitter2.prototype.on,EventEmitter2.prefixed=a,EventEmitter2.EventEmitter=EventEmitter2,t.exports=EventEmitter2},function(t,i,n){var o=n(0),a=n(57),u=n(171),d=n(306),f=n(56),p=n(47),b=n(174),S=new o({initialize:function Rectangle4(t,i,n,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),this.type=f.RECTANGLE,this.x=t,this.y=i,this.width=n,this.height=o},contains:function(t,i){return a(this,t,i)},getPoint:function(t,i){return u(this,t,i)},getPoints:function(t,i,n){return d(this,t,i,n)},getRandomPoint:function(t){return b(this,t)},setTo:function(t,i,n,o){return this.x=t,this.y=i,this.width=n,this.height=o,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setSize:function(t,i){return void 0===i&&(i=t),this.width=t,this.height=i,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(t){return void 0===t&&(t=new p),t.setTo(this.x,this.y,this.right,this.y),t},getLineB:function(t){return void 0===t&&(t=new p),t.setTo(this.right,this.y,this.right,this.bottom),t},getLineC:function(t){return void 0===t&&(t=new p),t.setTo(this.right,this.bottom,this.x,this.bottom),t},getLineD:function(t){return void 0===t&&(t=new p),t.setTo(this.x,this.bottom,this.x,this.y),t},left:{get:function(){return this.x},set:function(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}},right:{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x}},top:{get:function(){return this.y},set:function(t){t>=this.bottom?this.height=0:this.height=this.bottom-t,this.y=t}},bottom:{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});t.exports=S},function(t,i,n){t.exports={Alpha:n(607),AlphaSingle:n(303),BlendMode:n(304),ComputedSize:n(608),Crop:n(609),Depth:n(305),Flip:n(610),GetBounds:n(611),Mask:n(309),Origin:n(632),PathFollower:n(633),Pipeline:n(167),ScrollFactor:n(312),Size:n(634),Texture:n(635),TextureCrop:n(636),Tint:n(637),ToJSON:n(176),Transform:n(313),TransformMatrix:n(25),Visible:n(314)}},function(t,i){function GenerateSrc(t){for(var i="",n=0;n<t;++n)n>0&&(i+="\nelse "),n<t-1&&(i+="if(test == "+n+".0){}");return i}t.exports={getTintFromFloats:function(t,i,n,o){return((255&(255*o|0))<<24|(255&(255*t|0))<<16|(255&(255*i|0))<<8|255&(255*n|0))>>>0},getTintAppendFloatAlpha:function(t,i){return((255&(255*i|0))<<24|t)>>>0},getTintAppendFloatAlphaAndSwap:function(t,i){return((255&(255*i|0))<<24|(255&(0|t))<<16|(255&(t>>8|0))<<8|255&(t>>16|0))>>>0},getFloatsFromUintRGB:function(t){return[(255&(t>>16|0))/255,(255&(t>>8|0))/255,(255&(0|t))/255]},checkShaderMax:function(t,i){i&&-1!==i||(i=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS));for(var n=t.createShader(t.FRAGMENT_SHADER),o=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");;){var a=o.replace(/%forloop%/gi,GenerateSrc(i));if(t.shaderSource(n,a),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS))break;i=i/2|0}return i},parseFragmentShaderMaxTextures:function(t,i){if(!t)return"";for(var n="",o=0;o<i;o++)o>0&&(n+="\n\telse "),o<i-1&&(n+="if (outTexId < "+o+".5)"),n+="\n\t{",n+="\n\t\ttexture = texture2D(uMainSampler["+o+"], outTexCoord);",n+="\n\t}";return(t=t.replace(/%count%/gi,i.toString())).replace(/%forloop%/gi,n)}}},function(t,i,n){var o=n(193),a=n(6);t.exports=function(t,i,n){var u=a(t,i,null);if(null===u)return n;if(Array.isArray(u))return o.RND.pick(u);if("object"==typeof u){if(u.hasOwnProperty("randInt"))return o.RND.integerInRange(u.randInt[0],u.randInt[1]);if(u.hasOwnProperty("randFloat"))return o.RND.realInRange(u.randFloat[0],u.randFloat[1])}else if("function"==typeof u)return u(i);return u}},function(t,i){var n={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};t.exports=n},function(t,i,n){var o=n(0),a=n(176),u=n(101),d=n(9),f=n(75),p=n(20),b=new o({Extends:d,initialize:function GameObject2(t,i){d.call(this),this.scene=t,this.displayList=null,this.type=i,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(f.ADDED_TO_SCENE,this.addedToScene,this),this.on(f.REMOVED_FROM_SCENE,this.removedFromScene,this),t.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setState:function(t){return this.state=t,this},setDataEnabled:function(){return this.data||(this.data=new u(this)),this},setData:function(t,i){return this.data||(this.data=new u(this)),this.data.set(t,i),this},incData:function(t,i){return this.data||(this.data=new u(this)),this.data.inc(t,i),this},toggleData:function(t){return this.data||(this.data=new u(this)),this.data.toggle(t),this},getData:function(t){return this.data||(this.data=new u(this)),this.data.get(t)},setInteractive:function(t,i,n){return this.scene.sys.input.enable(this,t,i,n),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return a(this)},willRender:function(t){return!(b.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function(){for(var t=this,i=this.parentContainer,n=[];i&&(n.unshift(i.getIndex(t)),t=i,i.parentContainer);)i=i.parentContainer;return this.displayList?n.unshift(this.displayList.getIndex(t)):n.unshift(this.scene.sys.displayList.getIndex(t)),n},addToDisplayList:function(t){return void 0===t&&(t=this.scene.sys.displayList),this.displayList&&this.displayList!==t&&this.removeFromDisplayList(),t.exists(this)||(this.displayList=t,t.add(this,!0),t.queueDepthSort(),this.emit(f.ADDED_TO_SCENE,this,this.scene),t.events.emit(p.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var t=this.displayList||this.scene.sys.displayList;return t.exists(this)&&(t.remove(this,!0),t.queueDepthSort(),this.displayList=null,this.emit(f.REMOVED_FROM_SCENE,this,this.scene),t.events.emit(p.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(t){this.scene&&!this.ignoreDestroy&&(void 0===t&&(t=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(f.DESTROY,this,t),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});b.RENDER_MASK=15,t.exports=b},function(t,i,n){var o=n(0),a=n(24),u=n(20),d=new o({initialize:function GameObjectCreator2(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(u.BOOT,this.boot,this),this.events.on(u.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(u.DESTROY,this.destroy,this)},start:function(){this.events.once(u.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});d.register=function(t,i){d.prototype.hasOwnProperty(t)||(d.prototype[t]=i)},d.remove=function(t){d.prototype.hasOwnProperty(t)&&delete d.prototype[t]},a.register("GameObjectCreator",d,"make"),t.exports=d},function(t,i,n){var o=n(7),Extend=function(){var t,i,n,a,u,d,f=arguments[0]||{},p=1,b=arguments.length,S=!1;for("boolean"==typeof f&&(S=f,f=arguments[1]||{},p=2),b===p&&(f=this,--p);p<b;p++)if(null!=(t=arguments[p]))for(i in t)n=f[i],f!==(a=t[i])&&(S&&a&&(o(a)||(u=Array.isArray(a)))?(u?(u=!1,d=n&&Array.isArray(n)?n:[]):d=n&&o(n)?n:{},f[i]=Extend(S,d,a)):void 0!==a&&(f[i]=a));return f};t.exports=Extend},function(t,i){t.exports=function(t,i,n){return Math.max(i,Math.min(n,t))}},function(t,i,n){var o=n(25),a=new o,u=new o,d=new o,f={camera:a,sprite:u,calc:d};t.exports=function(t,i,n){var o=a,p=u,b=d;return p.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),o.copyFrom(i.matrix),n?(o.multiplyWithOffset(n,-i.scrollX*t.scrollFactorX,-i.scrollY*t.scrollFactorY),p.e=t.x,p.f=t.y):(p.e-=i.scrollX*t.scrollFactorX,p.f-=i.scrollY*t.scrollFactorY),o.multiply(p,b),f}},function(t,i,n){t.exports={ADDED_TO_SCENE:n(656),BOOT:n(657),CREATE:n(658),DESTROY:n(659),PAUSE:n(660),POST_UPDATE:n(661),PRE_RENDER:n(662),PRE_UPDATE:n(663),READY:n(664),REMOVED_FROM_SCENE:n(665),RENDER:n(666),RESUME:n(667),SHUTDOWN:n(668),SLEEP:n(669),START:n(670),TRANSITION_COMPLETE:n(671),TRANSITION_INIT:n(672),TRANSITION_OUT:n(673),TRANSITION_START:n(674),TRANSITION_WAKE:n(675),UPDATE:n(676),WAKE:n(677)}},function(t,i){t.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},function(t,i,n){t.exports={BLUR:n(612),BOOT:n(613),CONTEXT_LOST:n(614),CONTEXT_RESTORED:n(615),DESTROY:n(616),FOCUS:n(617),HIDDEN:n(618),PAUSE:n(619),POST_RENDER:n(620),POST_STEP:n(621),PRE_RENDER:n(622),PRE_STEP:n(623),READY:n(624),RESUME:n(625),STEP:n(626),VISIBLE:n(627)}},function(t,i,n){var o=n(0),a=n(21),u=n(95),d=n(2),f=n(155),p=n(240),b=n(517),S=n(156),M=new o({initialize:function File3(t,i){this.loader=t,this.cache=d(i,"cache",!1),this.type=d(i,"type",!1),this.key=d(i,"key",!1);var n=this.key;if(t.prefix&&""!==t.prefix&&(this.key=t.prefix+n),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var o=d(i,"url");void 0===o?o=t.path+n+"."+d(i,"extension",""):"string"!=typeof o||o.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)||(o=t.path+o),this.url=o,this.src="",this.xhrSettings=S(d(i,"responseType",void 0)),d(i,"xhrSettings",!1)&&(this.xhrSettings=p(this.xhrSettings,d(i,"xhrSettings",{}))),this.xhrLoader=null,this.state="function"==typeof this.url?a.FILE_POPULATED:a.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=d(i,"config",{}),this.multiFile,this.linkFile},setLink:function(t){this.linkFile=t,t.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===a.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=a.FILE_LOADING,this.src=f(this,this.loader.baseURL),0===this.src.indexOf("data:")?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=b(this,this.loader.xhr))},onLoad:function(t,i){var n=t.responseURL&&(0===t.responseURL.indexOf("file://")||0===t.responseURL.indexOf("capacitor://"))&&0===i.target.status,o=!(i.target&&200!==i.target.status)||n;4===t.readyState&&t.status>=400&&t.status<=599&&(o=!1),this.state=a.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,o)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(t){t.lengthComputable&&(this.bytesLoaded=t.loaded,this.bytesTotal=t.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(u.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=a.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=a.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=a.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(t){void 0===t&&(t=this.data);var i=this.key,n=this.type;this.loader.emit(u.FILE_COMPLETE,i,n,t),this.loader.emit(u.FILE_KEY_COMPLETE+n+"-"+i,i,n,t),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});M.createObjectURL=function(t,i,n){if("function"==typeof URL)t.src=URL.createObjectURL(i);else{var o=new FileReader;o.onload=function(){t.removeAttribute("crossOrigin"),t.src="data:"+(i.type||n)+";base64,"+o.result.split(",")[1]},o.onerror=t.onerror,o.readAsDataURL(i)}},M.revokeObjectURL=function(t){"function"==typeof URL&&URL.revokeObjectURL(t.src)},t.exports=M},function(t,i){var n={},o={},a={register:function(t,i,o,a){void 0===a&&(a=!1),n[t]={plugin:i,mapping:o,custom:a}},registerCustom:function(t,i,n,a){o[t]={plugin:i,mapping:n,data:a}},hasCore:function(t){return n.hasOwnProperty(t)},hasCustom:function(t){return o.hasOwnProperty(t)},getCore:function(t){return n[t]},getCustom:function(t){return o[t]},getCustomClass:function(t){return o.hasOwnProperty(t)?o[t].plugin:null},remove:function(t){n.hasOwnProperty(t)&&delete n[t]},removeCustom:function(t){o.hasOwnProperty(t)&&delete o[t]},destroyCorePlugins:function(){for(var t in n)n.hasOwnProperty(t)&&delete n[t]},destroyCustomPlugins:function(){for(var t in o)o.hasOwnProperty(t)&&delete o[t]}};t.exports=a},function(t,i,n){var o=n(0),a=n(14),u=n(3),d=new o({initialize:function TransformMatrix2(t,i,n,o,a,u){void 0===t&&(t=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=1),void 0===a&&(a=0),void 0===u&&(u=0),this.matrix=new Float32Array([t,i,n,o,a,u,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(t){this.matrix[0]=t}},b:{get:function(){return this.matrix[1]},set:function(t){this.matrix[1]=t}},c:{get:function(){return this.matrix[2]},set:function(t){this.matrix[2]=t}},d:{get:function(){return this.matrix[3]},set:function(t){this.matrix[3]=t}},e:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},f:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},tx:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},ty:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var t=this.matrix,i=t[0],n=t[1],o=t[2],u=t[3];return i||n?n>0?Math.acos(i/this.scaleX):-Math.acos(i/this.scaleX):o||u?a.TAU-(u>0?Math.acos(-o/this.scaleY):-Math.acos(o/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var t=this.matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},translate:function(t,i){var n=this.matrix;return n[4]=n[0]*t+n[2]*i+n[4],n[5]=n[1]*t+n[3]*i+n[5],this},scale:function(t,i){var n=this.matrix;return n[0]*=t,n[1]*=t,n[2]*=i,n[3]*=i,this},rotate:function(t){var i=Math.sin(t),n=Math.cos(t),o=this.matrix,a=o[0],u=o[1],d=o[2],f=o[3];return o[0]=a*n+d*i,o[1]=u*n+f*i,o[2]=a*-i+d*n,o[3]=u*-i+f*n,this},multiply:function(t,i){var n=this.matrix,o=t.matrix,a=n[0],u=n[1],d=n[2],f=n[3],p=n[4],b=n[5],S=o[0],M=o[1],C=o[2],P=o[3],R=o[4],O=o[5],B=void 0===i?this:i;return B.a=S*a+M*d,B.b=S*u+M*f,B.c=C*a+P*d,B.d=C*u+P*f,B.e=R*a+O*d+p,B.f=R*u+O*f+b,B},multiplyWithOffset:function(t,i,n){var o=this.matrix,a=t.matrix,u=o[0],d=o[1],f=o[2],p=o[3],b=i*u+n*f+o[4],S=i*d+n*p+o[5],M=a[0],C=a[1],P=a[2],R=a[3],O=a[4],B=a[5];return o[0]=M*u+C*f,o[1]=M*d+C*p,o[2]=P*u+R*f,o[3]=P*d+R*p,o[4]=O*u+B*f+b,o[5]=O*d+B*p+S,this},transform:function(t,i,n,o,a,u){var d=this.matrix,f=d[0],p=d[1],b=d[2],S=d[3],M=d[4],C=d[5];return d[0]=t*f+i*b,d[1]=t*p+i*S,d[2]=n*f+o*b,d[3]=n*p+o*S,d[4]=a*f+u*b+M,d[5]=a*p+u*S+C,this},transformPoint:function(t,i,n){void 0===n&&(n={x:0,y:0});var o=this.matrix,a=o[0],u=o[1],d=o[2],f=o[3],p=o[4],b=o[5];return n.x=t*a+i*d+p,n.y=t*u+i*f+b,n},invert:function(){var t=this.matrix,i=t[0],n=t[1],o=t[2],a=t[3],u=t[4],d=t[5],f=i*a-n*o;return t[0]=a/f,t[1]=-n/f,t[2]=-o/f,t[3]=i/f,t[4]=(o*d-a*u)/f,t[5]=-(i*d-n*u)/f,this},copyFrom:function(t){var i=this.matrix;return i[0]=t.a,i[1]=t.b,i[2]=t.c,i[3]=t.d,i[4]=t.e,i[5]=t.f,this},copyFromArray:function(t){var i=this.matrix;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],this},copyToContext:function(t){var i=this.matrix;return t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),t},setToContext:function(t){var i=this.matrix;return t.setTransform(i[0],i[1],i[2],i[3],i[4],i[5]),t},copyToArray:function(t){var i=this.matrix;return void 0===t?t=[i[0],i[1],i[2],i[3],i[4],i[5]]:(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5]),t},setTransform:function(t,i,n,o,a,u){var d=this.matrix;return d[0]=t,d[1]=i,d[2]=n,d[3]=o,d[4]=a,d[5]=u,this},decomposeMatrix:function(){var t=this.decomposedMatrix,i=this.matrix,n=i[0],o=i[1],a=i[2],u=i[3],d=n*u-o*a;if(t.translateX=i[4],t.translateY=i[5],n||o){var f=Math.sqrt(n*n+o*o);t.rotation=o>0?Math.acos(n/f):-Math.acos(n/f),t.scaleX=f,t.scaleY=d/f}else if(a||u){var p=Math.sqrt(a*a+u*u);t.rotation=.5*Math.PI-(u>0?Math.acos(-a/p):-Math.acos(a/p)),t.scaleX=d/p,t.scaleY=p}else t.rotation=0,t.scaleX=0,t.scaleY=0;return t},applyITRS:function(t,i,n,o,a){var u=this.matrix,d=Math.sin(n),f=Math.cos(n);return u[4]=t,u[5]=i,u[0]=f*o,u[1]=d*o,u[2]=-d*a,u[3]=f*a,this},applyInverse:function(t,i,n){void 0===n&&(n=new u);var o=this.matrix,a=o[0],d=o[1],f=o[2],p=o[3],b=o[4],S=o[5],M=1/(a*p+f*-d);return n.x=p*M*t+-f*M*i+(S*f-b*p)*M,n.y=a*M*i+-d*M*t+(-S*a+b*d)*M,n},getX:function(t,i){return t*this.a+i*this.c+this.e},getY:function(t,i){return t*this.b+i*this.d+this.f},getXRound:function(t,i,n){var o=this.getX(t,i);return n&&(o=Math.round(o)),o},getYRound:function(t,i,n){var o=this.getY(t,i);return n&&(o=Math.round(o)),o},getCSSMatrix:function(){var t=this.matrix;return"matrix("+t[0]+","+t[1]+","+t[2]+","+t[3]+","+t[4]+","+t[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});t.exports=d},function(t,i,n){var o=n(2);t.exports=function(t,i,n,a,u,d){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=d.width),void 0===a&&(a=d.height),u||(u={});var f=o(u,"isNotEmpty",!1),p=o(u,"isColliding",!1),b=o(u,"hasInterestingFace",!1);t<0&&(n+=t,t=0),i<0&&(a+=i,i=0),t+n>d.width&&(n=Math.max(d.width-t,0)),i+a>d.height&&(a=Math.max(d.height-i,0));for(var S=[],M=i;M<i+a;M++)for(var C=t;C<t+n;C++){var P=d.data[M][C];if(null!==P){if(f&&-1===P.index)continue;if(p&&!P.collides)continue;if(b&&!P.hasInterestingFace)continue;S.push(P)}}return S}},function(t,i){t.exports=function(t,i,n,o,a,u){var d;void 0===o&&(o=0),void 0===a&&(a=0),void 0===u&&(u=1);var f=0,p=t.length;if(1===u)for(d=a;d<p;d++)t[d][i]=n+f*o,f++;else for(d=a;d>=0;d--)t[d][i]=n+f*o,f++;return t}},function(t,i,n){var o=n(35),a=n(13);t.exports=function(t,i,n){i.x=a(n,"x",0),i.y=a(n,"y",0),i.depth=a(n,"depth",0),i.flipX=a(n,"flipX",!1),i.flipY=a(n,"flipY",!1);var u=a(n,"scale",null);"number"==typeof u?i.setScale(u):null!==u&&(i.scaleX=a(u,"x",1),i.scaleY=a(u,"y",1));var d=a(n,"scrollFactor",null);"number"==typeof d?i.setScrollFactor(d):null!==d&&(i.scrollFactorX=a(d,"x",1),i.scrollFactorY=a(d,"y",1)),i.rotation=a(n,"rotation",0);var f=a(n,"angle",null);null!==f&&(i.angle=f),i.alpha=a(n,"alpha",1);var p=a(n,"origin",null);if("number"==typeof p)i.setOrigin(p);else if(null!==p){var b=a(p,"x",.5),S=a(p,"y",.5);i.setOrigin(b,S)}return i.blendMode=a(n,"blendMode",o.NORMAL),i.visible=a(n,"visible",!0),a(n,"add",!0)&&t.sys.displayList.add(i),i.preUpdate&&t.sys.updateList.add(i),i}},function(t,i){t.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},function(t,i,n){var o=n(19);t.exports=function(t,i,n,a,u){var d=a.alpha*n.alpha;if(d<=0)return!1;var f=o(n,a,u).calc;return i.globalCompositeOperation=t.blendModes[n.blendMode],i.globalAlpha=d,i.save(),f.setToContext(i),i.imageSmoothingEnabled=!(!t.antialias||n.frame&&n.frame.source.scaleMode),!0}},function(t,i,n){var o,a,u,d=n(33),f=n(192),p=[],b=!1;t.exports=(u=function(){var t=0;return p.forEach((function(i){i.parent&&t++})),t},{create2D:function(t,i,n){return o(t,i,n,d.CANVAS)},create:o=function(t,i,n,o,u){var S;void 0===i&&(i=1),void 0===n&&(n=1),void 0===o&&(o=d.CANVAS),void 0===u&&(u=!1);var M=a(o);return null===M?(M={parent:t,canvas:document.createElement("canvas"),type:o},o===d.CANVAS&&p.push(M),S=M.canvas):(M.parent=t,S=M.canvas),u&&(M.parent=S),S.width=i,S.height=n,b&&o===d.CANVAS&&f.disable(S.getContext("2d")),S},createWebGL:function(t,i,n){return o(t,i,n,d.WEBGL)},disableSmoothing:function(){b=!0},enableSmoothing:function(){b=!1},first:a=function(t){if(void 0===t&&(t=d.CANVAS),t===d.WEBGL)return null;for(var i=0;i<p.length;i++){var n=p[i];if(!n.parent&&n.type===t)return n}return null},free:function(){return p.length-u()},pool:p,remove:function(t){var i=t instanceof HTMLCanvasElement;p.forEach((function(n){(i&&n.canvas===t||!i&&n.parent===t)&&(n.parent=null,n.canvas.width=1,n.canvas.height=1)}))},total:u})},function(t,i){var n={};t.exports=n,function(){n._nextId=0,n._seed=0,n._nowStartTime=+new Date,n.extend=function(t,i){var o,a;"boolean"==typeof i?(o=2,a=i):(o=1,a=!0);for(var u=o;u<arguments.length;u++){var d=arguments[u];if(d)for(var f in d)a&&d[f]&&d[f].constructor===Object?t[f]&&t[f].constructor!==Object?t[f]=d[f]:(t[f]=t[f]||{},n.extend(t[f],a,d[f])):t[f]=d[f]}return t},n.clone=function(t,i){return n.extend({},i,t)},n.keys=function(t){if(Object.keys)return Object.keys(t);var i=[];for(var n in t)i.push(n);return i},n.values=function(t){var i=[];if(Object.keys){for(var n=Object.keys(t),o=0;o<n.length;o++)i.push(t[n[o]]);return i}for(var a in t)i.push(t[a]);return i},n.get=function(t,i,n,o){i=i.split(".").slice(n,o);for(var a=0;a<i.length;a+=1)t=t[i[a]];return t},n.set=function(t,i,o,a,u){var d=i.split(".").slice(a,u);return n.get(t,i,0,-1)[d[d.length-1]]=o,o},n.shuffle=function(t){for(var i=t.length-1;i>0;i--){var o=Math.floor(n.random()*(i+1)),a=t[i];t[i]=t[o],t[o]=a}return t},n.choose=function(t){return t[Math.floor(n.random()*t.length)]},n.isElement=function(t){return"undefined"!=typeof HTMLElement?t instanceof HTMLElement:!!(t&&t.nodeType&&t.nodeName)},n.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},n.isFunction=function(t){return"function"==typeof t},n.isPlainObject=function(t){return"object"==typeof t&&t.constructor===Object},n.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},n.clamp=function(t,i,n){return t<i?i:t>n?n:t},n.sign=function(t){return t<0?-1:1},n.now=function(){if("undefined"!=typeof window&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-n._nowStartTime},n.random=function(t,i){return i=void 0!==i?i:1,(t=void 0!==t?t:0)+_seededRandom()*(i-t)};var _seededRandom=function(){return n._seed=(9301*n._seed+49297)%233280,n._seed/233280};n.colorToNumber=function(t){return 3==(t=t.replace("#","")).length&&(t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)),parseInt(t,16)},n.logLevel=1,n.log=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.info=function(){console&&n.logLevel>0&&n.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.warn=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.nextId=function(){return n._nextId++},n.indexOf=function(t,i){if(t.indexOf)return t.indexOf(i);for(var n=0;n<t.length;n++)if(t[n]===i)return n;return-1},n.map=function(t,i){if(t.map)return t.map(i);for(var n=[],o=0;o<t.length;o+=1)n.push(i(t[o]));return n},n.topologicalSort=function(t){var i=[],o=[],a=[];for(var u in t)o[u]||a[u]||n._topologicalSort(u,o,a,t,i);return i},n._topologicalSort=function(t,i,o,a,u){var d=a[t]||[];o[t]=!0;for(var f=0;f<d.length;f+=1){var p=d[f];o[p]||i[p]||n._topologicalSort(p,i,o,a,u)}o[t]=!1,i[t]=!0,u.push(t)},n.chain=function(){for(var t=[],i=0;i<arguments.length;i+=1){var n=arguments[i];n._chained?t.push.apply(t,n._chained):t.push(n)}var chain2=function(){for(var i,n=new Array(arguments.length),o=0,a=arguments.length;o<a;o++)n[o]=arguments[o];for(o=0;o<t.length;o+=1){var u=t[o].apply(i,n);void 0!==u&&(i=u)}return i};return chain2._chained=t,chain2},n.chainPathBefore=function(t,i,o){return n.set(t,i,n.chain(o,n.get(t,i)))},n.chainPathAfter=function(t,i,o){return n.set(t,i,n.chain(n.get(t,i),o))}}()},function(t,i,n){var o={VERSION:"3.55.2",BlendModes:n(35),ScaleModes:n(168),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};t.exports=o},function(t,i,n){var o=n(0),a=n(11),u=n(15),d=n(47),f=new o({Extends:u,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Transform,a.Visible],initialize:function Shape3(t,i,n){void 0===i&&(i="Shape"),u.call(this,t,i),this.geom=n,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new d,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(t,i){return void 0===i&&(i=1),void 0===t?this.isFilled=!1:(this.fillColor=t,this.fillAlpha=i,this.isFilled=!0),this},setStrokeStyle:function(t,i,n){return void 0===n&&(n=1),void 0===t?this.isStroked=!1:(this.lineWidth=t,this.strokeColor=i,this.strokeAlpha=n,this.isStroked=!0),this},setClosePath:function(t){return this.closePath=t,this},setSize:function(t,i){return this.width=t,this.height=i,this},setDisplaySize:function(t,i){return this.displayWidth=t,this.displayHeight=i,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}}});t.exports=f},function(t,i){t.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(t,i,n){var o=n(14);t.exports=function(t){return t*o.DEG_TO_RAD}},function(t,i,n){t.exports={DESTROY:n(743),FADE_IN_COMPLETE:n(744),FADE_IN_START:n(745),FADE_OUT_COMPLETE:n(746),FADE_OUT_START:n(747),FLASH_COMPLETE:n(748),FLASH_START:n(749),FOLLOW_UPDATE:n(750),PAN_COMPLETE:n(751),PAN_START:n(752),POST_RENDER:n(753),PRE_RENDER:n(754),ROTATE_COMPLETE:n(755),ROTATE_START:n(756),SHAKE_COMPLETE:n(757),SHAKE_START:n(758),ZOOM_COMPLETE:n(759),ZOOM_START:n(760)}},function(t,i,n){var o=n(0),a=n(103),u=n(328),d=n(188),f=n(329),p=new o({initialize:function Color2(t,i,n,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(t,i,n,o)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(t,i,n,o,a){return void 0===o&&(o=255),void 0===a&&(a=!0),this._locked=!0,this.red=t,this.green=i,this.blue=n,this.alpha=o,this._locked=!1,this.update(a)},setGLTo:function(t,i,n,o){return void 0===o&&(o=1),this._locked=!0,this.redGL=t,this.greenGL=i,this.blueGL=n,this.alphaGL=o,this._locked=!1,this.update(!0)},setFromRGB:function(t){return this._locked=!0,this.red=t.r,this.green=t.g,this.blue=t.b,t.hasOwnProperty("a")&&(this.alpha=t.a),this._locked=!1,this.update(!0)},setFromHSV:function(t,i,n){return d(t,i,n,this)},update:function(t){if(void 0===t&&(t=!1),this._locked)return this;var i=this.r,n=this.g,o=this.b,d=this.a;return this._color=a(i,n,o),this._color32=u(i,n,o,d),this._rgba="rgba("+i+","+n+","+o+","+d/255+")",t&&f(i,n,o,this),this},updateHSV:function(){var t=this.r,i=this.g,n=this.b;return f(t,i,n,this),this},clone:function(){return new p(this.r,this.g,this.b,this.a)},gray:function(t){return this.setTo(t,t,t)},random:function(t,i){void 0===t&&(t=0),void 0===i&&(i=255);var n=Math.floor(t+Math.random()*(i-t)),o=Math.floor(t+Math.random()*(i-t)),a=Math.floor(t+Math.random()*(i-t));return this.setTo(n,o,a)},randomGray:function(t,i){void 0===t&&(t=0),void 0===i&&(i=255);var n=Math.floor(t+Math.random()*(i-t));return this.setTo(n,n,n)},saturate:function(t){return this.s+=t/100,this},desaturate:function(t){return this.s-=t/100,this},lighten:function(t){return this.v+=t/100,this},darken:function(t){return this.v-=t/100,this},brighten:function(t){var i=this.r,n=this.g,o=this.b;return i=Math.max(0,Math.min(255,i-Math.round(-t/100*255))),n=Math.max(0,Math.min(255,n-Math.round(-t/100*255))),o=Math.max(0,Math.min(255,o-Math.round(-t/100*255))),this.setTo(i,n,o)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(t){this.gl[0]=Math.min(Math.abs(t),1),this.r=Math.floor(255*this.gl[0]),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(t){this.gl[1]=Math.min(Math.abs(t),1),this.g=Math.floor(255*this.gl[1]),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(t){this.gl[2]=Math.min(Math.abs(t),1),this.b=Math.floor(255*this.gl[2]),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(t){this.gl[3]=Math.min(Math.abs(t),1),this.a=Math.floor(255*this.gl[3]),this.update()}},red:{get:function(){return this.r},set:function(t){t=Math.floor(Math.abs(t)),this.r=Math.min(t,255),this.gl[0]=t/255,this.update(!0)}},green:{get:function(){return this.g},set:function(t){t=Math.floor(Math.abs(t)),this.g=Math.min(t,255),this.gl[1]=t/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(t){t=Math.floor(Math.abs(t)),this.b=Math.min(t,255),this.gl[2]=t/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(t){t=Math.floor(Math.abs(t)),this.a=Math.min(t,255),this.gl[3]=t/255,this.update()}},h:{get:function(){return this._h},set:function(t){this._h=t,d(t,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(t){this._s=t,d(this._h,t,this._v,this)}},v:{get:function(){return this._v},set:function(t){this._v=t,d(this._h,this._s,t,this)}}});t.exports=p},function(t,i,n){var o=new(n(0))({initialize:function Vector32(t,i,n){this.x=0,this.y=0,this.z=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=i||0,this.z=n||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clone:function(){return new o(this.x,this.y,this.z)},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this},crossVectors:function(t,i){var n=t.x,o=t.y,a=t.z,u=i.x,d=i.y,f=i.z;return this.x=o*f-a*d,this.y=a*u-n*f,this.z=n*d-o*u,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},set:function(t,i,n){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=i||0,this.z=n||0),this},setFromMatrixPosition:function(t){return this.fromArray(t.val,12)},setFromMatrixColumn:function(t,i){return this.fromArray(t.val,4*i)},fromArray:function(t,i){return void 0===i&&(i=0),this.x=t[i],this.y=t[i+1],this.z=t[i+2],this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addScale:function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(t){var i=t.x-this.x,n=t.y-this.y,o=t.z-this.z||0;return Math.sqrt(i*i+n*n+o*o)},distanceSq:function(t){var i=t.x-this.x,n=t.y-this.y,o=t.z-this.z||0;return i*i+n*n+o*o},length:function(){var t=this.x,i=this.y,n=this.z;return Math.sqrt(t*t+i*i+n*n)},lengthSq:function(){var t=this.x,i=this.y,n=this.z;return t*t+i*i+n*n},normalize:function(){var t=this.x,i=this.y,n=this.z,o=t*t+i*i+n*n;return o>0&&(o=1/Math.sqrt(o),this.x=t*o,this.y=i*o,this.z=n*o),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function(t){var i=this.x,n=this.y,o=this.z,a=t.x,u=t.y,d=t.z;return this.x=n*d-o*u,this.y=o*a-i*d,this.z=i*u-n*a,this},lerp:function(t,i){void 0===i&&(i=0);var n=this.x,o=this.y,a=this.z;return this.x=n+i*(t.x-n),this.y=o+i*(t.y-o),this.z=a+i*(t.z-a),this},applyMatrix3:function(t){var i=this.x,n=this.y,o=this.z,a=t.val;return this.x=a[0]*i+a[3]*n+a[6]*o,this.y=a[1]*i+a[4]*n+a[7]*o,this.z=a[2]*i+a[5]*n+a[8]*o,this},applyMatrix4:function(t){var i=this.x,n=this.y,o=this.z,a=t.val,u=1/(a[3]*i+a[7]*n+a[11]*o+a[15]);return this.x=(a[0]*i+a[4]*n+a[8]*o+a[12])*u,this.y=(a[1]*i+a[5]*n+a[9]*o+a[13])*u,this.z=(a[2]*i+a[6]*n+a[10]*o+a[14])*u,this},transformMat3:function(t){var i=this.x,n=this.y,o=this.z,a=t.val;return this.x=i*a[0]+n*a[3]+o*a[6],this.y=i*a[1]+n*a[4]+o*a[7],this.z=i*a[2]+n*a[5]+o*a[8],this},transformMat4:function(t){var i=this.x,n=this.y,o=this.z,a=t.val;return this.x=a[0]*i+a[4]*n+a[8]*o+a[12],this.y=a[1]*i+a[5]*n+a[9]*o+a[13],this.z=a[2]*i+a[6]*n+a[10]*o+a[14],this},transformCoordinates:function(t){var i=this.x,n=this.y,o=this.z,a=t.val,u=i*a[0]+n*a[4]+o*a[8]+a[12],d=i*a[1]+n*a[5]+o*a[9]+a[13],f=i*a[2]+n*a[6]+o*a[10]+a[14],p=i*a[3]+n*a[7]+o*a[11]+a[15];return this.x=u/p,this.y=d/p,this.z=f/p,this},transformQuat:function(t){var i=this.x,n=this.y,o=this.z,a=t.x,u=t.y,d=t.z,f=t.w,p=f*i+u*o-d*n,b=f*n+d*i-a*o,S=f*o+a*n-u*i,M=-a*i-u*n-d*o;return this.x=p*f+M*-a+b*-d-S*-u,this.y=b*f+M*-u+S*-a-p*-d,this.z=S*f+M*-d+p*-u-b*-a,this},project:function(t){var i=this.x,n=this.y,o=this.z,a=t.val,u=a[0],d=a[1],f=a[2],p=a[3],b=a[4],S=a[5],M=a[6],C=a[7],P=a[8],R=a[9],O=a[10],B=a[11],N=a[12],Y=a[13],X=a[14],G=1/(i*p+n*C+o*B+a[15]);return this.x=(i*u+n*b+o*P+N)*G,this.y=(i*d+n*S+o*R+Y)*G,this.z=(i*f+n*M+o*O+X)*G,this},projectViewMatrix:function(t,i){return this.applyMatrix4(t).applyMatrix4(i)},unprojectViewMatrix:function(t,i){return this.applyMatrix4(t).applyMatrix4(i)},unproject:function(t,i){var n=t.x,o=t.y,a=t.z,u=t.w,d=this.x-n,f=u-this.y-1-o,p=this.z;return this.x=2*d/a-1,this.y=2*f/u-1,this.z=2*p-1,this.project(i)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});o.ZERO=new o,o.RIGHT=new o(1,0,0),o.LEFT=new o(-1,0,0),o.UP=new o(0,-1,0),o.DOWN=new o(0,1,0),o.FORWARD=new o(0,0,1),o.BACK=new o(0,0,-1),o.ONE=new o(1,1,1),t.exports=o},function(t,i){t.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(t,i,n){var o={};t.exports=o;var a=n(64),u=n(83),d=n(165),f=n(32),p=n(84),b=n(271);!function(){o._inertiaScale=4,o._nextCollidingGroupId=1,o._nextNonCollidingGroupId=-1,o._nextCategory=1,o.create=function(t){var i={id:f.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!t.hasOwnProperty("position")&&t.hasOwnProperty("vertices")?t.position=a.centre(t.vertices):t.hasOwnProperty("vertices")||(i.vertices=a.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var n=f.extend(i,t);return _initProperties(n,t),n.setOnCollideWith=function(t,i){return i?this.onCollideWith[t.id]=i:delete this.onCollideWith[t.id],this},n},o.nextGroup=function(t){return t?o._nextNonCollidingGroupId--:o._nextCollidingGroupId++},o.nextCategory=function(){return o._nextCategory=o._nextCategory<<1,o._nextCategory};var _initProperties=function(t,i){i=i||{},o.set(t,{bounds:t.bounds||p.create(t.vertices),positionPrev:t.positionPrev||u.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t});var n=t.bounds;if(a.rotate(t.vertices,t.angle,t.position),b.rotate(t.axes,t.angle),p.update(n,t.vertices,t.velocity),o.set(t,{axes:i.axes||t.axes,area:i.area||t.area,mass:i.mass||t.mass,inertia:i.inertia||t.inertia}),1===t.parts.length){var d=t.centerOfMass,f=t.centerOffset,S=n.max.x-n.min.x,M=n.max.y-n.min.y;d.x=-(n.min.x-t.position.x)/S,d.y=-(n.min.y-t.position.y)/M,f.x=S*d.x,f.y=M*d.y}};o.set=function(t,i,n){var a;for(a in"string"==typeof i&&(a=i,(i={})[a]=n),i)if(Object.prototype.hasOwnProperty.call(i,a))switch(n=i[a],a){case"isStatic":o.setStatic(t,n);break;case"isSleeping":d.set(t,n);break;case"mass":o.setMass(t,n);break;case"density":o.setDensity(t,n);break;case"inertia":o.setInertia(t,n);break;case"vertices":o.setVertices(t,n);break;case"position":o.setPosition(t,n);break;case"angle":o.setAngle(t,n);break;case"velocity":o.setVelocity(t,n);break;case"angularVelocity":o.setAngularVelocity(t,n);break;case"parts":o.setParts(t,n);break;case"centre":o.setCentre(t,n);break;default:t[a]=n}},o.setStatic=function(t,i){for(var n=0;n<t.parts.length;n++){var o=t.parts[n];o.isStatic=i,i?(o._original={restitution:o.restitution,friction:o.friction,mass:o.mass,inertia:o.inertia,density:o.density,inverseMass:o.inverseMass,inverseInertia:o.inverseInertia},o.restitution=0,o.friction=1,o.mass=o.inertia=o.density=1/0,o.inverseMass=o.inverseInertia=0,o.positionPrev.x=o.position.x,o.positionPrev.y=o.position.y,o.anglePrev=o.angle,o.angularVelocity=0,o.speed=0,o.angularSpeed=0,o.motion=0):o._original&&(o.restitution=o._original.restitution,o.friction=o._original.friction,o.mass=o._original.mass,o.inertia=o._original.inertia,o.density=o._original.density,o.inverseMass=o._original.inverseMass,o.inverseInertia=o._original.inverseInertia,o._original=null)}},o.setMass=function(t,i){var n=t.inertia/(t.mass/6);t.inertia=n*(i/6),t.inverseInertia=1/t.inertia,t.mass=i,t.inverseMass=1/t.mass,t.density=t.mass/t.area},o.setDensity=function(t,i){o.setMass(t,i*t.area),t.density=i},o.setInertia=function(t,i){t.inertia=i,t.inverseInertia=1/t.inertia},o.setVertices=function(t,i){i[0].body===t?t.vertices=i:t.vertices=a.create(i,t),t.axes=b.fromVertices(t.vertices),t.area=a.area(t.vertices),o.setMass(t,t.density*t.area);var n=a.centre(t.vertices);a.translate(t.vertices,n,-1),o.setInertia(t,o._inertiaScale*a.inertia(t.vertices,t.mass)),a.translate(t.vertices,t.position),p.update(t.bounds,t.vertices,t.velocity)},o.setParts=function(t,i,n){var u;for(i=i.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,u=0;u<i.length;u++){var d=i[u];d!==t&&(d.parent=t,t.parts.push(d))}if(1!==t.parts.length){if(n=void 0===n||n){var f=[];for(u=0;u<i.length;u++)f=f.concat(i[u].vertices);a.clockwiseSort(f);var b=a.hull(f),S=a.centre(b);o.setVertices(t,b),a.translate(t.vertices,S)}var M=o._totalProperties(t),C=M.centre.x,P=M.centre.y,R=t.bounds,O=t.centerOfMass,B=t.centerOffset;p.update(R,t.vertices,t.velocity),O.x=-(R.min.x-C)/(R.max.x-R.min.x),O.y=-(R.min.y-P)/(R.max.y-R.min.y),B.x=C,B.y=P,t.area=M.area,t.parent=t,t.position.x=C,t.position.y=P,t.positionPrev.x=C,t.positionPrev.y=P,o.setMass(t,M.mass),o.setInertia(t,M.inertia),o.setPosition(t,M.centre)}},o.setCentre=function(t,i,n){n?(t.positionPrev.x+=i.x,t.positionPrev.y+=i.y,t.position.x+=i.x,t.position.y+=i.y):(t.positionPrev.x=i.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=i.y-(t.position.y-t.positionPrev.y),t.position.x=i.x,t.position.y=i.y)},o.setPosition=function(t,i){var n=u.sub(i,t.position);t.positionPrev.x+=n.x,t.positionPrev.y+=n.y;for(var o=0;o<t.parts.length;o++){var d=t.parts[o];d.position.x+=n.x,d.position.y+=n.y,a.translate(d.vertices,n),p.update(d.bounds,d.vertices,t.velocity)}},o.setAngle=function(t,i){var n=i-t.angle;t.anglePrev+=n;for(var o=0;o<t.parts.length;o++){var d=t.parts[o];d.angle+=n,a.rotate(d.vertices,n,t.position),b.rotate(d.axes,n),p.update(d.bounds,d.vertices,t.velocity),o>0&&u.rotateAbout(d.position,n,t.position,d.position)}},o.setVelocity=function(t,i){t.positionPrev.x=t.position.x-i.x,t.positionPrev.y=t.position.y-i.y,t.velocity.x=i.x,t.velocity.y=i.y,t.speed=u.magnitude(t.velocity)},o.setAngularVelocity=function(t,i){t.anglePrev=t.angle-i,t.angularVelocity=i,t.angularSpeed=Math.abs(t.angularVelocity)},o.translate=function(t,i){o.setPosition(t,u.add(t.position,i))},o.rotate=function(t,i,n){if(n){var a=Math.cos(i),u=Math.sin(i),d=t.position.x-n.x,f=t.position.y-n.y;o.setPosition(t,{x:n.x+(d*a-f*u),y:n.y+(d*u+f*a)}),o.setAngle(t,t.angle+i)}else o.setAngle(t,t.angle+i)},o.scale=function(t,i,n,u){var d=0,f=0;u=u||t.position;for(var S=0;S<t.parts.length;S++){var M=t.parts[S];M.scale.x=i,M.scale.y=n,a.scale(M.vertices,i,n,u),M.axes=b.fromVertices(M.vertices),M.area=a.area(M.vertices),o.setMass(M,t.density*M.area),a.translate(M.vertices,{x:-M.position.x,y:-M.position.y}),o.setInertia(M,o._inertiaScale*a.inertia(M.vertices,M.mass)),a.translate(M.vertices,{x:M.position.x,y:M.position.y}),S>0&&(d+=M.area,f+=M.inertia),M.position.x=u.x+(M.position.x-u.x)*i,M.position.y=u.y+(M.position.y-u.y)*n,p.update(M.bounds,M.vertices,t.velocity)}t.parts.length>1&&(t.area=d,t.isStatic||(o.setMass(t,t.density*d),o.setInertia(t,f))),t.circleRadius&&(i===n?t.circleRadius*=i:t.circleRadius=null)},o.update=function(t,i,n,o){var d=Math.pow(i*n*t.timeScale,2),f=1-t.frictionAir*n*t.timeScale,S=t.position.x-t.positionPrev.x,M=t.position.y-t.positionPrev.y;t.velocity.x=S*f*o+t.force.x/t.mass*d,t.velocity.y=M*f*o+t.force.y/t.mass*d,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*f*o+t.torque/t.inertia*d,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=u.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var C=0;C<t.parts.length;C++){var P=t.parts[C];a.translate(P.vertices,t.velocity),C>0&&(P.position.x+=t.velocity.x,P.position.y+=t.velocity.y),0!==t.angularVelocity&&(a.rotate(P.vertices,t.angularVelocity,t.position),b.rotate(P.axes,t.angularVelocity),C>0&&u.rotateAbout(P.position,t.angularVelocity,t.position,P.position)),p.update(P.bounds,P.vertices,t.velocity)}},o.applyForce=function(t,i,n){t.force.x+=n.x,t.force.y+=n.y;var o=i.x-t.position.x,a=i.y-t.position.y;t.torque+=o*n.y-a*n.x},o._totalProperties=function(t){for(var i={mass:0,area:0,inertia:0,centre:{x:0,y:0}},n=1===t.parts.length?0:1;n<t.parts.length;n++){var o=t.parts[n],a=o.mass!==1/0?o.mass:1;i.mass+=a,i.area+=o.area,i.inertia+=o.inertia,i.centre=u.add(i.centre,u.mult(o.position,a))}return i.centre=u.div(i.centre,i.mass),i}}()},function(t,i){t.exports=function(t){return t.y+t.height-t.height*t.originY}},function(t,i){t.exports=function(t){return t.x-t.width*t.originX}},function(t,i){t.exports=function(t){return t.x+t.width-t.width*t.originX}},function(t,i){t.exports=function(t){return t.y-t.height*t.originY}},function(t,i){t.exports=function(t,i,n,o,a,u){var d;void 0===o&&(o=0),void 0===a&&(a=0),void 0===u&&(u=1);var f=0,p=t.length;if(1===u)for(d=a;d<p;d++)t[d][i]+=n+f*o,f++;else for(d=a;d>=0;d--)t[d][i]+=n+f*o,f++;return t}},function(t,i,n){var o=n(0),a=n(307),u=n(172),d=n(56),f=n(173),p=n(3),b=new o({initialize:function Line4(t,i,n,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),this.type=d.LINE,this.x1=t,this.y1=i,this.x2=n,this.y2=o},getPoint:function(t,i){return a(this,t,i)},getPoints:function(t,i,n){return u(this,t,i,n)},getRandomPoint:function(t){return f(this,t)},setTo:function(t,i,n,o){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),this.x1=t,this.y1=i,this.x2=n,this.y2=o,this},getPointA:function(t){return void 0===t&&(t=new p),t.set(this.x1,this.y1),t},getPointB:function(t){return void 0===t&&(t=new p),t.set(this.x2,this.y2),t},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(t){this.y1>this.y2?this.y1=t:this.y2=t}}});t.exports=b},function(t,i){t.exports=function(t,i,n,o){var a=n||i.fillColor,u=o||i.fillAlpha,d=(16711680&a)>>>16,f=(65280&a)>>>8,p=255&a;t.fillStyle="rgba("+d+","+f+","+p+","+u+")"}},function(t,i,n){var o=new(n(0))({initialize:function MultiFile2(t,i,n,o){var a=[];o.forEach((function(t){t&&a.push(t)})),this.loader=t,this.type=i,this.key=n,this.multiKeyIndex=t.multiKeyIndex++,this.files=a,this.complete=!1,this.pending=a.length,this.failed=0,this.config={},this.baseURL=t.baseURL,this.path=t.path,this.prefix=t.prefix;for(var u=0;u<a.length;u++)a[u].multiFile=this},isReadyToProcess:function(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function(t){return this.files.push(t),t.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(t){-1!==this.files.indexOf(t)&&this.pending--},onFileFailed:function(t){-1!==this.files.indexOf(t)&&this.failed++}});t.exports=o},function(t,i){t.exports=function(t,i,n,o){var a=t-n,u=i-o;return Math.sqrt(a*a+u*u)}},function(t,i,n){t.exports={BOOT:n(922),DESTROY:n(923),DRAG_END:n(924),DRAG_ENTER:n(925),DRAG:n(926),DRAG_LEAVE:n(927),DRAG_OVER:n(928),DRAG_START:n(929),DROP:n(930),GAME_OUT:n(931),GAME_OVER:n(932),GAMEOBJECT_DOWN:n(933),GAMEOBJECT_DRAG_END:n(934),GAMEOBJECT_DRAG_ENTER:n(935),GAMEOBJECT_DRAG:n(936),GAMEOBJECT_DRAG_LEAVE:n(937),GAMEOBJECT_DRAG_OVER:n(938),GAMEOBJECT_DRAG_START:n(939),GAMEOBJECT_DROP:n(940),GAMEOBJECT_MOVE:n(941),GAMEOBJECT_OUT:n(942),GAMEOBJECT_OVER:n(943),GAMEOBJECT_POINTER_DOWN:n(944),GAMEOBJECT_POINTER_MOVE:n(945),GAMEOBJECT_POINTER_OUT:n(946),GAMEOBJECT_POINTER_OVER:n(947),GAMEOBJECT_POINTER_UP:n(948),GAMEOBJECT_POINTER_WHEEL:n(949),GAMEOBJECT_UP:n(950),GAMEOBJECT_WHEEL:n(951),MANAGER_BOOT:n(952),MANAGER_PROCESS:n(953),MANAGER_UPDATE:n(954),POINTER_DOWN:n(955),POINTER_DOWN_OUTSIDE:n(956),POINTER_MOVE:n(957),POINTER_OUT:n(958),POINTER_OVER:n(959),POINTER_UP:n(960),POINTER_UP_OUTSIDE:n(961),POINTER_WHEEL:n(962),POINTERLOCK_CHANGE:n(963),PRE_UPDATE:n(964),SHUTDOWN:n(965),START:n(966),UPDATE:n(967)}},function(t,i){t.exports=function(t,i){return t.y=i+t.height*t.originY,t}},function(t,i){t.exports=function(t,i){return t.x=i+t.width*t.originX,t}},function(t,i){t.exports=function(t,i){return t.x=i-t.width+t.width*t.originX,t}},function(t,i){t.exports=function(t,i){return t.y=i-t.height+t.height*t.originY,t}},function(t,i){t.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},function(t,i){t.exports=function(t,i,n){return!(t.width<=0||t.height<=0)&&t.x<=i&&t.x+t.width>=i&&t.y<=n&&t.y+t.height>=n}},function(t,i,n){var o=n(0),a=n(175),u=n(9),d=n(374),f=n(2),p=n(69),b=n(91),S=n(141),M=n(12),C=n(375),P=new o({Extends:u,initialize:function WebGLPipeline2(t){u.call(this);var i=t.game,n=i.renderer,o=n.gl;this.name=f(t,"name","WebGLPipeline"),this.game=i,this.renderer=n,this.manager,this.gl=o,this.view=i.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=f(t,"topology",o.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=f(t,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=t,this.glReset=!1},boot:function(){var t,i=this.gl,n=this.config,o=this.renderer;this.isPostFX||(this.projectionMatrix=(new p).identity());var a=this.renderTargets,u=f(n,"renderTarget",!1);"boolean"==typeof u&&u&&(u=1);var M=o.width,C=o.height;if("number"==typeof u)for(t=0;t<u;t++)a.push(new S(o,M,C,1,0,!0));else if(Array.isArray(u))for(t=0;t<u.length;t++){var P=f(u[t],"scale",1),R=f(u[t],"minFilter",0),O=f(u[t],"autoClear",1);a.push(new S(o,M,C,P,R,O))}a.length&&(this.currentRenderTarget=a[0]),this.setShadersFromConfig(n);var B=this.shaders,N=0;for(t=0;t<B.length;t++)B[t].vertexSize>N&&(N=B[t].vertexSize);var Y=f(n,"batchSize",o.config.batchSize);this.vertexCapacity=6*Y;var X=new ArrayBuffer(this.vertexCapacity*N);this.vertexData=X,this.bytes=new Uint8Array(X),this.vertexViewF32=new Float32Array(X),this.vertexViewU32=new Uint32Array(X);var G=f(n,"vertices",null);for(G?(this.vertexViewF32.set(G),this.vertexBuffer=o.createVertexBuffer(X,i.STATIC_DRAW)):this.vertexBuffer=o.createVertexBuffer(X.byteLength,i.DYNAMIC_DRAW),this.setVertexBuffer(),t=B.length-1;t>=0;t--)B[t].rebind();this.hasBooted=!0,o.on(b.RESIZE,this.resize,this),o.on(b.PRE_RENDER,this.onPreRender,this),o.on(b.RENDER,this.onRender,this),o.on(b.POST_RENDER,this.onPostRender,this),this.emit(d.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(t,i){var n=this.renderer;return t===this.currentShader&&n.currentProgram===this.currentShader.program||(this.flush(),n.resetTextures(),this.setVertexBuffer()&&!i&&(i=!0),t.bind(i,!1),this.currentShader=t),this},getShaderByName:function(t){for(var i=this.shaders,n=0;n<i.length;n++)if(i[n].name===t)return i[n]},setShadersFromConfig:function(t){var i,n=this.shaders,o=this.renderer;for(i=0;i<n.length;i++)n[i].destroy();var u="vertShader",d="fragShader",p="attributes",b=f(t,u,null),S=M.parseFragmentShaderMaxTextures(f(t,d,null),o.maxTextures),P=f(t,p,null),R=f(t,"shaders",[]),O=R.length;if(0===O)b&&S&&(this.shaders=[new C(this,"default",b,S,a(P))]);else{var B=[];for(i=0;i<O;i++){var N=R[i],Y=f(N,"name","default"),X=f(N,u,b),G=M.parseFragmentShaderMaxTextures(f(N,d,S),o.maxTextures),U=f(N,p,P);X&&G&&B.push(new C(this,Y,X,G,a(U)))}this.shaders=B}return 0===this.shaders.length?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function(t,i){return void 0===i&&(i=t.frame),this.currentUnit=this.renderer.setTextureSource(i.source),this.currentUnit},shouldFlush:function(t){return void 0===t&&(t=0),this.vertexCount+t>this.vertexCapacity},resize:function(t,i){t===this.width&&i===this.height||this.flush(),this.width=t,this.height=i;for(var n=this.renderTargets,o=0;o<n.length;o++)n[o].resize(t,i);return this.setProjectionMatrix(t,i),this.emit(d.RESIZE,t,i,this),this.onResize(t,i),this},setProjectionMatrix:function(t,i){var n=this.projectionMatrix;if(!n)return this;this.projectionWidth=t,this.projectionHeight=i,n.ortho(0,t,i,0,-1e3,1e3);for(var o=this.shaders,a="uProjectionMatrix",u=0;u<o.length;u++){var d=o[u];d.hasUniform(a)&&(d.resetUniform(a),d.setMatrix4fv(a,!1,n.val,d))}return this},updateProjectionMatrix:function(){if(this.projectionMatrix){var t=this.renderer.projectionWidth,i=this.renderer.projectionHeight;this.projectionWidth===t&&this.projectionHeight===i||this.setProjectionMatrix(t,i)}},bind:function(t){if(void 0===t&&(t=this.currentShader),this.glReset)return this.rebind(t);var i=this.setVertexBuffer();return t.bind(i),this.currentShader=t,this.emit(d.BIND,this,t),this.onActive(t),this},rebind:function(t){this.setVertexBuffer();for(var i=this.shaders,n=i.length-1;n>=0;n--){var o=i[n].rebind();t&&o!==t||(this.currentShader=o)}return this.emit(d.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(){var t=this.gl,i=this.vertexBuffer;return t.getParameter(t.ARRAY_BUFFER_BINDING)!==i&&(t.bindBuffer(t.ARRAY_BUFFER,i),!0)},preBatch:function(t){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(t),this},postBatch:function(t){return this.onDraw(this.currentRenderTarget),this.onPostBatch(t),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(t){if(void 0===t&&(t=!1),this.vertexCount>0){this.emit(d.BEFORE_FLUSH,this,t),this.onBeforeFlush(t);var i=this.gl,n=this.vertexCount,o=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),n===this.vertexCapacity?i.bufferData(i.ARRAY_BUFFER,this.vertexData,i.DYNAMIC_DRAW):i.bufferSubData(i.ARRAY_BUFFER,0,this.bytes.subarray(0,n*o)),i.drawArrays(this.topology,0,n)),this.vertexCount=0,this.emit(d.AFTER_FLUSH,this,t),this.onAfterFlush(t)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(t,i,n,o,a,u,d){var f=this.vertexViewF32,p=this.vertexViewU32,b=this.vertexCount*this.currentShader.vertexComponentCount-1;f[++b]=t,f[++b]=i,f[++b]=n,f[++b]=o,f[++b]=a,f[++b]=u,p[++b]=d,this.vertexCount++},batchQuad:function(t,i,n,o,a,u,d,f,p,b,S,M,C,P,R,O,B,N,Y,X){void 0===X&&(X=this.currentUnit);var G=!1;return this.shouldFlush(6)&&(this.flush(),G=!0,X=this.setTexture2D(Y)),this.batchVert(i,n,b,S,X,N,P),this.batchVert(o,a,b,C,X,N,O),this.batchVert(u,d,M,C,X,N,B),this.batchVert(i,n,b,S,X,N,P),this.batchVert(u,d,M,C,X,N,B),this.batchVert(f,p,M,S,X,N,R),this.onBatch(t),G},batchTri:function(t,i,n,o,a,u,d,f,p,b,S,M,C,P,R,O,B){void 0===B&&(B=this.currentUnit);var N=!1;return this.shouldFlush(3)&&(this.flush(),N=!0,B=this.setTexture2D(O)),this.batchVert(i,n,f,p,B,R,M),this.batchVert(o,a,f,S,B,R,C),this.batchVert(u,d,b,S,B,R,P),this.onBatch(t),N},drawFillRect:function(t,i,n,o,a,u,d,f){void 0===d&&(d=this.renderer.whiteTexture.glTexture),void 0===f&&(f=!0),t=Math.floor(t),i=Math.floor(i);var p=Math.floor(t+n),b=Math.floor(i+o),S=this.setTexture2D(d),C=M.getTintAppendFloatAlphaAndSwap(a,u),P=0,R=1;f&&(P=1,R=0),this.batchQuad(null,t,i,t,b,p,b,p,i,0,P,1,R,C,C,C,C,0,d,S)},setTexture2D:function(t){return void 0===t&&(t=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(t),this.currentUnit},bindTexture:function(t,i){void 0===i&&(i=0);var n=this.gl;return n.activeTexture(n.TEXTURE0+i),n.bindTexture(n.TEXTURE_2D,t),this},bindRenderTarget:function(t,i){return this.bindTexture(t.texture,i)},setTime:function(t){return this.set1f(t,this.game.loop.getDuration()),this},set1f:function(t,i,n){return void 0===n&&(n=this.currentShader),n.set1f(t,i),this},set2f:function(t,i,n,o){return void 0===o&&(o=this.currentShader),o.set2f(t,i,n),this},set3f:function(t,i,n,o,a){return void 0===a&&(a=this.currentShader),a.set3f(t,i,n,o),this},set4f:function(t,i,n,o,a,u){return void 0===u&&(u=this.currentShader),u.set4f(t,i,n,o,a),this},set1fv:function(t,i,n){return void 0===n&&(n=this.currentShader),n.set1fv(t,i),this},set2fv:function(t,i,n){return void 0===n&&(n=this.currentShader),n.set2fv(t,i),this},set3fv:function(t,i,n){return void 0===n&&(n=this.currentShader),n.set3fv(t,i),this},set4fv:function(t,i,n){return void 0===n&&(n=this.currentShader),n.set4fv(t,i),this},set1iv:function(t,i,n){return void 0===n&&(n=this.currentShader),n.set1iv(t,i),this},set2iv:function(t,i,n){return void 0===n&&(n=this.currentShader),n.set2iv(t,i),this},set3iv:function(t,i,n){return void 0===n&&(n=this.currentShader),n.set3iv(t,i),this},set4iv:function(t,i,n){return void 0===n&&(n=this.currentShader),n.set4iv(t,i),this},set1i:function(t,i,n){return void 0===n&&(n=this.currentShader),n.set1i(t,i),this},set2i:function(t,i,n,o){return void 0===o&&(o=this.currentShader),o.set2i(t,i,n),this},set3i:function(t,i,n,o,a){return void 0===a&&(a=this.currentShader),a.set3i(t,i,n,o),this},set4i:function(t,i,n,o,a,u){return void 0===u&&(u=this.currentShader),u.set4i(t,i,n,o,a),this},setMatrix2fv:function(t,i,n,o){return void 0===o&&(o=this.currentShader),o.setMatrix2fv(t,i,n),this},setMatrix3fv:function(t,i,n,o){return void 0===o&&(o=this.currentShader),o.setMatrix3fv(t,i,n),this},setMatrix4fv:function(t,i,n,o){return void 0===o&&(o=this.currentShader),o.setMatrix4fv(t,i,n),this},destroy:function(){var t;this.emit(d.DESTROY,this);var i=this.shaders;for(t=0;t<i.length;t++)i[t].destroy();var n=this.renderTargets;for(t=0;t<n.length;t++)n[t].destroy();this.gl.deleteBuffer(this.vertexBuffer);var o=this.renderer;return o.off(b.RESIZE,this.resize,this),o.off(b.PRE_RENDER,this.onPreRender,this),o.off(b.RENDER,this.onRender,this),o.off(b.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});t.exports=P},function(t,i,n){function earcut(t,i,n){n=n||2;var o,a,u,d,f,p,b,S=i&&i.length,M=S?i[0]*n:t.length,C=linkedList(t,0,M,n,!0),P=[];if(!C||C.next===C.prev)return P;if(S&&(C=function eliminateHoles(t,i,n,o){var a,u,d,f=[];for(a=0,u=i.length;a<u;a++)(d=linkedList(t,i[a]*o,a<u-1?i[a+1]*o:t.length,o,!1))===d.next&&(d.steiner=!0),f.push(getLeftmost(d));for(f.sort(compareX),a=0;a<f.length;a++)eliminateHole(f[a],n),n=filterPoints(n,n.next);return n}(t,i,C,n)),t.length>80*n){o=u=t[0],a=d=t[1];for(var R=n;R<M;R+=n)(f=t[R])<o&&(o=f),(p=t[R+1])<a&&(a=p),f>u&&(u=f),p>d&&(d=p);b=0!==(b=Math.max(u-o,d-a))?1/b:0}return earcutLinked(C,P,n,o,a,b),P}function linkedList(t,i,n,o,a){var u,d;if(a===signedArea(t,i,n,o)>0)for(u=i;u<n;u+=o)d=insertNode(u,t[u],t[u+1],d);else for(u=n-o;u>=i;u-=o)d=insertNode(u,t[u],t[u+1],d);return d&&equals(d,d.next)&&(removeNode(d),d=d.next),d}function filterPoints(t,i){if(!t)return t;i||(i=t);var n,o=t;do{if(n=!1,o.steiner||!equals(o,o.next)&&0!==area(o.prev,o,o.next))o=o.next;else{if(removeNode(o),(o=i=o.prev)===o.next)break;n=!0}}while(n||o!==i);return i}function earcutLinked(t,i,n,o,a,u,d){if(t){!d&&u&&function indexCurve(t,i,n,o){var a=t;do{null===a.z&&(a.z=zOrder(a.x,a.y,i,n,o)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next}while(a!==t);a.prevZ.nextZ=null,a.prevZ=null,function sortLinked(t){var i,n,o,a,u,d,f,p,b=1;do{for(n=t,t=null,u=null,d=0;n;){for(d++,o=n,f=0,i=0;i<b&&(f++,o=o.nextZ);i++);for(p=b;f>0||p>0&&o;)0!==f&&(0===p||!o||n.z<=o.z)?(a=n,n=n.nextZ,f--):(a=o,o=o.nextZ,p--),u?u.nextZ=a:t=a,a.prevZ=u,u=a;n=o}u.nextZ=null,b*=2}while(d>1);return t}(a)}(t,o,a,u);for(var f,p,b=t;t.prev!==t.next;)if(f=t.prev,p=t.next,u?isEarHashed(t,o,a,u):isEar(t))i.push(f.i/n),i.push(t.i/n),i.push(p.i/n),removeNode(t),t=p.next,b=p.next;else if((t=p)===b){d?1===d?earcutLinked(t=cureLocalIntersections(filterPoints(t),i,n),i,n,o,a,u,2):2===d&&splitEarcut(t,i,n,o,a,u):earcutLinked(filterPoints(t),i,n,o,a,u,1);break}}}function isEar(t){var i=t.prev,n=t,o=t.next;if(area(i,n,o)>=0)return!1;for(var a=t.next.next;a!==t.prev;){if(pointInTriangle(i.x,i.y,n.x,n.y,o.x,o.y,a.x,a.y)&&area(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function isEarHashed(t,i,n,o){var a=t.prev,u=t,d=t.next;if(area(a,u,d)>=0)return!1;for(var f=a.x<u.x?a.x<d.x?a.x:d.x:u.x<d.x?u.x:d.x,p=a.y<u.y?a.y<d.y?a.y:d.y:u.y<d.y?u.y:d.y,b=a.x>u.x?a.x>d.x?a.x:d.x:u.x>d.x?u.x:d.x,S=a.y>u.y?a.y>d.y?a.y:d.y:u.y>d.y?u.y:d.y,M=zOrder(f,p,i,n,o),C=zOrder(b,S,i,n,o),P=t.prevZ,R=t.nextZ;P&&P.z>=M&&R&&R.z<=C;){if(P!==t.prev&&P!==t.next&&pointInTriangle(a.x,a.y,u.x,u.y,d.x,d.y,P.x,P.y)&&area(P.prev,P,P.next)>=0)return!1;if(P=P.prevZ,R!==t.prev&&R!==t.next&&pointInTriangle(a.x,a.y,u.x,u.y,d.x,d.y,R.x,R.y)&&area(R.prev,R,R.next)>=0)return!1;R=R.nextZ}for(;P&&P.z>=M;){if(P!==t.prev&&P!==t.next&&pointInTriangle(a.x,a.y,u.x,u.y,d.x,d.y,P.x,P.y)&&area(P.prev,P,P.next)>=0)return!1;P=P.prevZ}for(;R&&R.z<=C;){if(R!==t.prev&&R!==t.next&&pointInTriangle(a.x,a.y,u.x,u.y,d.x,d.y,R.x,R.y)&&area(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function cureLocalIntersections(t,i,n){var o=t;do{var a=o.prev,u=o.next.next;!equals(a,u)&&intersects(a,o,o.next,u)&&locallyInside(a,u)&&locallyInside(u,a)&&(i.push(a.i/n),i.push(o.i/n),i.push(u.i/n),removeNode(o),removeNode(o.next),o=t=u),o=o.next}while(o!==t);return filterPoints(o)}function splitEarcut(t,i,n,o,a,u){var d=t;do{for(var f=d.next.next;f!==d.prev;){if(d.i!==f.i&&isValidDiagonal(d,f)){var p=splitPolygon(d,f);return d=filterPoints(d,d.next),p=filterPoints(p,p.next),earcutLinked(d,i,n,o,a,u),void earcutLinked(p,i,n,o,a,u)}f=f.next}d=d.next}while(d!==t)}function compareX(t,i){return t.x-i.x}function eliminateHole(t,i){if(i=function findHoleBridge(t,i){var n,o=i,a=t.x,u=t.y,d=-1/0;do{if(u<=o.y&&u>=o.next.y&&o.next.y!==o.y){var f=o.x+(u-o.y)*(o.next.x-o.x)/(o.next.y-o.y);if(f<=a&&f>d){if(d=f,f===a){if(u===o.y)return o;if(u===o.next.y)return o.next}n=o.x<o.next.x?o:o.next}}o=o.next}while(o!==i);if(!n)return null;if(a===d)return n;var p,b=n,S=n.x,M=n.y,C=1/0;o=n;do{a>=o.x&&o.x>=S&&a!==o.x&&pointInTriangle(u<M?a:d,u,S,M,u<M?d:a,u,o.x,o.y)&&(p=Math.abs(u-o.y)/(a-o.x),locallyInside(o,t)&&(p<C||p===C&&(o.x>n.x||o.x===n.x&&sectorContainsSector(n,o)))&&(n=o,C=p)),o=o.next}while(o!==b);return n}(t,i),i){var n=splitPolygon(i,t);filterPoints(i,i.next),filterPoints(n,n.next)}}function sectorContainsSector(t,i){return area(t.prev,t,i.prev)<0&&area(i.next,t,t.next)<0}function zOrder(t,i,n,o,a){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*a)|t<<8))|t<<4))|t<<2))|t<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-o)*a)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function getLeftmost(t){var i=t,n=t;do{(i.x<n.x||i.x===n.x&&i.y<n.y)&&(n=i),i=i.next}while(i!==t);return n}function pointInTriangle(t,i,n,o,a,u,d,f){return(a-d)*(i-f)-(t-d)*(u-f)>=0&&(t-d)*(o-f)-(n-d)*(i-f)>=0&&(n-d)*(u-f)-(a-d)*(o-f)>=0}function isValidDiagonal(t,i){return t.next.i!==i.i&&t.prev.i!==i.i&&!function intersectsPolygon(t,i){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==i.i&&n.next.i!==i.i&&intersects(n,n.next,t,i))return!0;n=n.next}while(n!==t);return!1}(t,i)&&(locallyInside(t,i)&&locallyInside(i,t)&&function middleInside(t,i){var n=t,o=!1,a=(t.x+i.x)/2,u=(t.y+i.y)/2;do{n.y>u!=n.next.y>u&&n.next.y!==n.y&&a<(n.next.x-n.x)*(u-n.y)/(n.next.y-n.y)+n.x&&(o=!o),n=n.next}while(n!==t);return o}(t,i)&&(area(t.prev,t,i.prev)||area(t,i.prev,i))||equals(t,i)&&area(t.prev,t,t.next)>0&&area(i.prev,i,i.next)>0)}function area(t,i,n){return(i.y-t.y)*(n.x-i.x)-(i.x-t.x)*(n.y-i.y)}function equals(t,i){return t.x===i.x&&t.y===i.y}function intersects(t,i,n,o){var a=sign(area(t,i,n)),u=sign(area(t,i,o)),d=sign(area(n,o,t)),f=sign(area(n,o,i));return a!==u&&d!==f||!(0!==a||!onSegment(t,n,i))||!(0!==u||!onSegment(t,o,i))||!(0!==d||!onSegment(n,t,o))||!(0!==f||!onSegment(n,i,o))}function onSegment(t,i,n){return i.x<=Math.max(t.x,n.x)&&i.x>=Math.min(t.x,n.x)&&i.y<=Math.max(t.y,n.y)&&i.y>=Math.min(t.y,n.y)}function sign(t){return t>0?1:t<0?-1:0}function locallyInside(t,i){return area(t.prev,t,t.next)<0?area(t,i,t.next)>=0&&area(t,t.prev,i)>=0:area(t,i,t.prev)<0||area(t,t.next,i)<0}function splitPolygon(t,i){var n=new Node2(t.i,t.x,t.y),o=new Node2(i.i,i.x,i.y),a=t.next,u=i.prev;return t.next=i,i.prev=t,n.next=a,a.prev=n,o.next=n,n.prev=o,u.next=o,o.prev=u,o}function insertNode(t,i,n,o){var a=new Node2(t,i,n);return o?(a.next=o.next,a.prev=o,o.next.prev=a,o.next=a):(a.prev=a,a.next=a),a}function removeNode(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Node2(t,i,n){this.i=t,this.x=i,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(t,i,n,o){for(var a=0,u=i,d=n-o;u<n;u+=o)a+=(t[d]-t[u])*(t[u+1]+t[d+1]),d=u;return a}earcut.deviation=function(t,i,n,o){var a=i&&i.length,u=a?i[0]*n:t.length,d=Math.abs(signedArea(t,0,u,n));if(a)for(var f=0,p=i.length;f<p;f++){var b=i[f]*n,S=f<p-1?i[f+1]*n:t.length;d-=Math.abs(signedArea(t,b,S,n))}var M=0;for(f=0;f<o.length;f+=3){var C=o[f]*n,P=o[f+1]*n,R=o[f+2]*n;M+=Math.abs((t[C]-t[R])*(t[P+1]-t[C+1])-(t[C]-t[P])*(t[R+1]-t[C+1]))}return 0===d&&0===M?0:Math.abs((M-d)/d)},earcut.flatten=function(t){for(var i=t[0][0].length,n={vertices:[],holes:[],dimensions:i},o=0,a=0;a<t.length;a++){for(var u=0;u<t[a].length;u++)for(var d=0;d<i;d++)n.vertices.push(t[a][u][d]);a>0&&(o+=t[a-1].length,n.holes.push(o))}return n},t.exports=earcut},function(t,i){t.exports=function(t,i,n,o){var a=n||i.strokeColor,u=o||i.strokeAlpha,d=(16711680&a)>>>16,f=(65280&a)>>>8,p=255&a;t.strokeStyle="rgba("+d+","+f+","+p+","+u+")",t.lineWidth=i.lineWidth}},function(t,i,n){var o=n(0),a=n(21),u=n(23),d=n(8),f=n(2),p=n(6),b=n(7),S=new o({Extends:u,initialize:function JSONFile2(t,i,n,o,d){var S="json";if(b(i)){var M=i;i=f(M,"key"),n=f(M,"url"),o=f(M,"xhrSettings"),S=f(M,"extension",S),d=f(M,"dataKey",d)}var C={type:"json",cache:t.cacheManager.json,extension:S,responseType:"text",key:i,url:n,xhrSettings:o,config:d};u.call(this,t,C),b(n)&&(this.data=d?p(n,d):n,this.state=a.FILE_POPULATED)},onProcess:function(){if(this.state!==a.FILE_POPULATED){this.state=a.FILE_PROCESSING;try{var t=JSON.parse(this.xhrLoader.responseText)}catch(n){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),n}var i=this.config;this.data="string"==typeof i?p(t,i,t):t}this.onProcessComplete()}});d.register("json",(function(t,i,n,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new S(this,t[a]));else this.addFile(new S(this,t,i,o,n));return this})),t.exports=S},function(t,i){t.exports={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14}},function(t,i,n){var o=n(158),a=n(26);t.exports=function(t,i,n,u,d){for(var f=null,p=null,b=null,S=null,M=a(t,i,n,u,null,d),C=0;C<M.length;C++){var P=M[C];P&&(P.collides?(f=o(P.x,P.y-1,!0,d),p=o(P.x,P.y+1,!0,d),b=o(P.x-1,P.y,!0,d),S=o(P.x+1,P.y,!0,d),P.faceTop=!f||!f.collides,P.faceBottom=!p||!p.collides,P.faceLeft=!b||!b.collides,P.faceRight=!S||!S.collides):P.resetFaces())}}},function(t,i,n){var o={};t.exports=o;var a=n(83),u=n(32);o.create=function(t,i){for(var n=[],o=0;o<t.length;o++){var a=t[o],u={x:a.x,y:a.y,index:o,body:i,isInternal:!1,contact:null,offset:null};u.contact={vertex:u,normalImpulse:0,tangentImpulse:0},n.push(u)}return n},o.fromPath=function(t,i){var n=[];return t.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/gi,(function(t,i,o){n.push({x:parseFloat(i),y:parseFloat(o)})})),o.create(n,i)},o.centre=function(t){for(var i,n,u,d=o.area(t,!0),f={x:0,y:0},p=0;p<t.length;p++)u=(p+1)%t.length,i=a.cross(t[p],t[u]),n=a.mult(a.add(t[p],t[u]),i),f=a.add(f,n);return a.div(f,6*d)},o.mean=function(t){for(var i={x:0,y:0},n=0;n<t.length;n++)i.x+=t[n].x,i.y+=t[n].y;return a.div(i,t.length)},o.area=function(t,i){for(var n=0,o=t.length-1,a=0;a<t.length;a++)n+=(t[o].x-t[a].x)*(t[o].y+t[a].y),o=a;return i?n/2:Math.abs(n)/2},o.inertia=function(t,i){for(var n,o,u=0,d=0,f=t,p=0;p<f.length;p++)o=(p+1)%f.length,u+=(n=Math.abs(a.cross(f[o],f[p])))*(a.dot(f[o],f[o])+a.dot(f[o],f[p])+a.dot(f[p],f[p])),d+=n;return i/6*(u/d)},o.translate=function(t,i,n){var o;if(n)for(o=0;o<t.length;o++)t[o].x+=i.x*n,t[o].y+=i.y*n;else for(o=0;o<t.length;o++)t[o].x+=i.x,t[o].y+=i.y;return t},o.rotate=function(t,i,n){if(0!==i){for(var o=Math.cos(i),a=Math.sin(i),u=0;u<t.length;u++){var d=t[u],f=d.x-n.x,p=d.y-n.y;d.x=n.x+(f*o-p*a),d.y=n.y+(f*a+p*o)}return t}},o.contains=function(t,i){for(var n=0;n<t.length;n++){var o=t[n],a=t[(n+1)%t.length];if((i.x-o.x)*(a.y-o.y)+(i.y-o.y)*(o.x-a.x)>0)return!1}return!0},o.scale=function(t,i,n,u){if(1===i&&1===n)return t;var d,f;u=u||o.centre(t);for(var p=0;p<t.length;p++)d=t[p],f=a.sub(d,u),t[p].x=u.x+f.x*i,t[p].y=u.y+f.y*n;return t},o.chamfer=function(t,i,n,o,d){i="number"==typeof i?[i]:i||[8],n=void 0!==n?n:-1,o=o||2,d=d||14;for(var f=[],p=0;p<t.length;p++){var b=t[p-1>=0?p-1:t.length-1],S=t[p],M=t[(p+1)%t.length],C=i[p<i.length?p:i.length-1];if(0!==C){var P=a.normalise({x:S.y-b.y,y:b.x-S.x}),R=a.normalise({x:M.y-S.y,y:S.x-M.x}),O=Math.sqrt(2*Math.pow(C,2)),B=a.mult(u.clone(P),C),N=a.normalise(a.mult(a.add(P,R),.5)),Y=a.sub(S,a.mult(N,O)),X=n;-1===n&&(X=1.75*Math.pow(C,.32)),(X=u.clamp(X,o,d))%2==1&&(X+=1);for(var G=Math.acos(a.dot(P,R))/X,U=0;U<X;U++)f.push(a.add(a.rotate(B,G*U),Y))}else f.push(S)}return f},o.clockwiseSort=function(t){var i=o.mean(t);return t.sort((function(t,n){return a.angle(i,t)-a.angle(i,n)})),t},o.isConvex=function(t){var i,n,o,a,u=0,d=t.length;if(d<3)return null;for(i=0;i<d;i++)if(o=(i+2)%d,a=(t[n=(i+1)%d].x-t[i].x)*(t[o].y-t[n].y),(a-=(t[n].y-t[i].y)*(t[o].x-t[n].x))<0?u|=1:a>0&&(u|=2),3===u)return!1;return 0!==u||null},o.hull=function(t){var i,n,o=[],u=[];for((t=t.slice(0)).sort((function(t,i){var n=t.x-i.x;return 0!==n?n:t.y-i.y})),n=0;n<t.length;n+=1){for(i=t[n];u.length>=2&&a.cross3(u[u.length-2],u[u.length-1],i)<=0;)u.pop();u.push(i)}for(n=t.length-1;n>=0;n-=1){for(i=t[n];o.length>=2&&a.cross3(o[o.length-2],o[o.length-1],i)<=0;)o.pop();o.push(i)}return o.pop(),u.pop(),o.concat(u)}},function(t,i,n){var o=n(0),a=n(66),u=n(300),d=n(301),f=n(56),p=n(170),b=new o({initialize:function Circle2(t,i,n){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),this.type=f.CIRCLE,this.x=t,this.y=i,this._radius=n,this._diameter=2*n},contains:function(t,i){return a(this,t,i)},getPoint:function(t,i){return u(this,t,i)},getPoints:function(t,i,n){return d(this,t,i,n)},getRandomPoint:function(t){return p(this,t)},setTo:function(t,i,n){return this.x=t,this.y=i,this._radius=n,this._diameter=2*n,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(t){this._radius=t,this._diameter=2*t}},diameter:{get:function(){return this._diameter},set:function(t){this._diameter=t,this._radius=.5*t}},left:{get:function(){return this.x-this._radius},set:function(t){this.x=t+this._radius}},right:{get:function(){return this.x+this._radius},set:function(t){this.x=t-this._radius}},top:{get:function(){return this.y-this._radius},set:function(t){this.y=t+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(t){this.y=t-this._radius}}});t.exports=b},function(t,i){t.exports=function(t,i,n){return t.radius>0&&i>=t.left&&i<=t.right&&n>=t.top&&n<=t.bottom&&(t.x-i)*(t.x-i)+(t.y-n)*(t.y-n)<=t.radius*t.radius}},function(t,i){t.exports=function(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))}},function(t,i){t.exports=function(t,i,n){var o=n-i;return i+((t-i)%o+o)%o}},function(t,i,n){var o=n(0),a=n(39),u=1e-6,d=new o({initialize:function Matrix42(t){this.val=new Float32Array(16),t?this.copy(t):this.identity()},clone:function(){return new d(this)},set:function(t){return this.copy(t)},setValues:function(t,i,n,o,a,u,d,f,p,b,S,M,C,P,R,O){var B=this.val;return B[0]=t,B[1]=i,B[2]=n,B[3]=o,B[4]=a,B[5]=u,B[6]=d,B[7]=f,B[8]=p,B[9]=b,B[10]=S,B[11]=M,B[12]=C,B[13]=P,B[14]=R,B[15]=O,this},copy:function(t){var i=t.val;return this.setValues(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9],i[10],i[11],i[12],i[13],i[14],i[15])},fromArray:function(t){return this.setValues(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(t,i,n){var o=f.fromQuat(n).val,a=i.x,u=i.y,d=i.z;return this.setValues(o[0]*a,o[1]*a,o[2]*a,0,o[4]*u,o[5]*u,o[6]*u,0,o[8]*d,o[9]*d,o[10]*d,0,t.x,t.y,t.z,1)},xyz:function(t,i,n){this.identity();var o=this.val;return o[12]=t,o[13]=i,o[14]=n,this},scaling:function(t,i,n){this.zero();var o=this.val;return o[0]=t,o[5]=i,o[10]=n,o[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var t=this.val,i=t[1],n=t[2],o=t[3],a=t[6],u=t[7],d=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=i,t[6]=t[9],t[7]=t[13],t[8]=n,t[9]=a,t[11]=t[14],t[12]=o,t[13]=u,t[14]=d,this},getInverse:function(t){return this.copy(t),this.invert()},invert:function(){var t=this.val,i=t[0],n=t[1],o=t[2],a=t[3],u=t[4],d=t[5],f=t[6],p=t[7],b=t[8],S=t[9],M=t[10],C=t[11],P=t[12],R=t[13],O=t[14],B=t[15],N=i*d-n*u,Y=i*f-o*u,X=i*p-a*u,G=n*f-o*d,U=n*p-a*d,V=o*p-a*f,z=b*R-S*P,W=b*O-M*P,H=b*B-C*P,j=S*O-M*R,q=S*B-C*R,Z=M*B-C*O,K=N*Z-Y*q+X*j+G*H-U*W+V*z;return K?(K=1/K,this.setValues((d*Z-f*q+p*j)*K,(o*q-n*Z-a*j)*K,(R*V-O*U+B*G)*K,(M*U-S*V-C*G)*K,(f*H-u*Z-p*W)*K,(i*Z-o*H+a*W)*K,(O*X-P*V-B*Y)*K,(b*V-M*X+C*Y)*K,(u*q-d*H+p*z)*K,(n*H-i*q-a*z)*K,(P*U-R*X+B*N)*K,(S*X-b*U-C*N)*K,(d*W-u*j-f*z)*K,(i*j-n*W+o*z)*K,(R*Y-P*G-O*N)*K,(b*G-S*Y+M*N)*K)):this},adjoint:function(){var t=this.val,i=t[0],n=t[1],o=t[2],a=t[3],u=t[4],d=t[5],f=t[6],p=t[7],b=t[8],S=t[9],M=t[10],C=t[11],P=t[12],R=t[13],O=t[14],B=t[15];return this.setValues(d*(M*B-C*O)-S*(f*B-p*O)+R*(f*C-p*M),-(n*(M*B-C*O)-S*(o*B-a*O)+R*(o*C-a*M)),n*(f*B-p*O)-d*(o*B-a*O)+R*(o*p-a*f),-(n*(f*C-p*M)-d*(o*C-a*M)+S*(o*p-a*f)),-(u*(M*B-C*O)-b*(f*B-p*O)+P*(f*C-p*M)),i*(M*B-C*O)-b*(o*B-a*O)+P*(o*C-a*M),-(i*(f*B-p*O)-u*(o*B-a*O)+P*(o*p-a*f)),i*(f*C-p*M)-u*(o*C-a*M)+b*(o*p-a*f),u*(S*B-C*R)-b*(d*B-p*R)+P*(d*C-p*S),-(i*(S*B-C*R)-b*(n*B-a*R)+P*(n*C-a*S)),i*(d*B-p*R)-u*(n*B-a*R)+P*(n*p-a*d),-(i*(d*C-p*S)-u*(n*C-a*S)+b*(n*p-a*d)),-(u*(S*O-M*R)-b*(d*O-f*R)+P*(d*M-f*S)),i*(S*O-M*R)-b*(n*O-o*R)+P*(n*M-o*S),-(i*(d*O-f*R)-u*(n*O-o*R)+P*(n*f-o*d)),i*(d*M-f*S)-u*(n*M-o*S)+b*(n*f-o*d))},determinant:function(){var t=this.val,i=t[0],n=t[1],o=t[2],a=t[3],u=t[4],d=t[5],f=t[6],p=t[7],b=t[8],S=t[9],M=t[10],C=t[11],P=t[12],R=t[13],O=t[14],B=t[15];return(i*d-n*u)*(M*B-C*O)-(i*f-o*u)*(S*B-C*R)+(i*p-a*u)*(S*O-M*R)+(n*f-o*d)*(b*B-C*P)-(n*p-a*d)*(b*O-M*P)+(o*p-a*f)*(b*R-S*P)},multiply:function(t){var i=this.val,n=i[0],o=i[1],a=i[2],u=i[3],d=i[4],f=i[5],p=i[6],b=i[7],S=i[8],M=i[9],C=i[10],P=i[11],R=i[12],O=i[13],B=i[14],N=i[15],Y=t.val,X=Y[0],G=Y[1],U=Y[2],V=Y[3];return i[0]=X*n+G*d+U*S+V*R,i[1]=X*o+G*f+U*M+V*O,i[2]=X*a+G*p+U*C+V*B,i[3]=X*u+G*b+U*P+V*N,X=Y[4],G=Y[5],U=Y[6],V=Y[7],i[4]=X*n+G*d+U*S+V*R,i[5]=X*o+G*f+U*M+V*O,i[6]=X*a+G*p+U*C+V*B,i[7]=X*u+G*b+U*P+V*N,X=Y[8],G=Y[9],U=Y[10],V=Y[11],i[8]=X*n+G*d+U*S+V*R,i[9]=X*o+G*f+U*M+V*O,i[10]=X*a+G*p+U*C+V*B,i[11]=X*u+G*b+U*P+V*N,X=Y[12],G=Y[13],U=Y[14],V=Y[15],i[12]=X*n+G*d+U*S+V*R,i[13]=X*o+G*f+U*M+V*O,i[14]=X*a+G*p+U*C+V*B,i[15]=X*u+G*b+U*P+V*N,this},multiplyLocal:function(t){var i=this.val,n=t.val;return this.setValues(i[0]*n[0]+i[1]*n[4]+i[2]*n[8]+i[3]*n[12],i[0]*n[1]+i[1]*n[5]+i[2]*n[9]+i[3]*n[13],i[0]*n[2]+i[1]*n[6]+i[2]*n[10]+i[3]*n[14],i[0]*n[3]+i[1]*n[7]+i[2]*n[11]+i[3]*n[15],i[4]*n[0]+i[5]*n[4]+i[6]*n[8]+i[7]*n[12],i[4]*n[1]+i[5]*n[5]+i[6]*n[9]+i[7]*n[13],i[4]*n[2]+i[5]*n[6]+i[6]*n[10]+i[7]*n[14],i[4]*n[3]+i[5]*n[7]+i[6]*n[11]+i[7]*n[15],i[8]*n[0]+i[9]*n[4]+i[10]*n[8]+i[11]*n[12],i[8]*n[1]+i[9]*n[5]+i[10]*n[9]+i[11]*n[13],i[8]*n[2]+i[9]*n[6]+i[10]*n[10]+i[11]*n[14],i[8]*n[3]+i[9]*n[7]+i[10]*n[11]+i[11]*n[15],i[12]*n[0]+i[13]*n[4]+i[14]*n[8]+i[15]*n[12],i[12]*n[1]+i[13]*n[5]+i[14]*n[9]+i[15]*n[13],i[12]*n[2]+i[13]*n[6]+i[14]*n[10]+i[15]*n[14],i[12]*n[3]+i[13]*n[7]+i[14]*n[11]+i[15]*n[15])},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,i){var n=t.val,o=i.val,a=n[0],u=n[4],d=n[8],f=n[12],p=n[1],b=n[5],S=n[9],M=n[13],C=n[2],P=n[6],R=n[10],O=n[14],B=n[3],N=n[7],Y=n[11],X=n[15],G=o[0],U=o[4],V=o[8],z=o[12],W=o[1],H=o[5],j=o[9],q=o[13],Z=o[2],K=o[6],$=o[10],tt=o[14],et=o[3],it=o[7],nt=o[11],st=o[15];return this.setValues(a*G+u*W+d*Z+f*et,p*G+b*W+S*Z+M*et,C*G+P*W+R*Z+O*et,B*G+N*W+Y*Z+X*et,a*U+u*H+d*K+f*it,p*U+b*H+S*K+M*it,C*U+P*H+R*K+O*it,B*U+N*H+Y*K+X*it,a*V+u*j+d*$+f*nt,p*V+b*j+S*$+M*nt,C*V+P*j+R*$+O*nt,B*V+N*j+Y*$+X*nt,a*z+u*q+d*tt+f*st,p*z+b*q+S*tt+M*st,C*z+P*q+R*tt+O*st,B*z+N*q+Y*tt+X*st)},translate:function(t){return this.translateXYZ(t.x,t.y,t.z)},translateXYZ:function(t,i,n){var o=this.val;return o[12]=o[0]*t+o[4]*i+o[8]*n+o[12],o[13]=o[1]*t+o[5]*i+o[9]*n+o[13],o[14]=o[2]*t+o[6]*i+o[10]*n+o[14],o[15]=o[3]*t+o[7]*i+o[11]*n+o[15],this},scale:function(t){return this.scaleXYZ(t.x,t.y,t.z)},scaleXYZ:function(t,i,n){var o=this.val;return o[0]=o[0]*t,o[1]=o[1]*t,o[2]=o[2]*t,o[3]=o[3]*t,o[4]=o[4]*i,o[5]=o[5]*i,o[6]=o[6]*i,o[7]=o[7]*i,o[8]=o[8]*n,o[9]=o[9]*n,o[10]=o[10]*n,o[11]=o[11]*n,this},makeRotationAxis:function(t,i){var n=Math.cos(i),o=Math.sin(i),a=1-n,u=t.x,d=t.y,f=t.z,p=a*u,b=a*d;return this.setValues(p*u+n,p*d-o*f,p*f+o*d,0,p*d+o*f,b*d+n,b*f-o*u,0,p*f-o*d,b*f+o*u,a*f*f+n,0,0,0,0,1)},rotate:function(t,i){var n=this.val,o=i.x,a=i.y,d=i.z,f=Math.sqrt(o*o+a*a+d*d);if(Math.abs(f)<u)return this;o*=f=1/f,a*=f,d*=f;var p=Math.sin(t),b=Math.cos(t),S=1-b,M=n[0],C=n[1],P=n[2],R=n[3],O=n[4],B=n[5],N=n[6],Y=n[7],X=n[8],G=n[9],U=n[10],V=n[11],z=n[12],W=n[13],H=n[14],j=n[15],q=o*o*S+b,Z=a*o*S+d*p,K=d*o*S-a*p,$=o*a*S-d*p,tt=a*a*S+b,et=d*a*S+o*p,it=o*d*S+a*p,nt=a*d*S-o*p,st=d*d*S+b;return this.setValues(M*q+O*Z+X*K,C*q+B*Z+G*K,P*q+N*Z+U*K,R*q+Y*Z+V*K,M*$+O*tt+X*et,C*$+B*tt+G*et,P*$+N*tt+U*et,R*$+Y*tt+V*et,M*it+O*nt+X*st,C*it+B*nt+G*st,P*it+N*nt+U*st,R*it+Y*nt+V*st,z,W,H,j)},rotateX:function(t){var i=this.val,n=Math.sin(t),o=Math.cos(t),a=i[4],u=i[5],d=i[6],f=i[7],p=i[8],b=i[9],S=i[10],M=i[11];return i[4]=a*o+p*n,i[5]=u*o+b*n,i[6]=d*o+S*n,i[7]=f*o+M*n,i[8]=p*o-a*n,i[9]=b*o-u*n,i[10]=S*o-d*n,i[11]=M*o-f*n,this},rotateY:function(t){var i=this.val,n=Math.sin(t),o=Math.cos(t),a=i[0],u=i[1],d=i[2],f=i[3],p=i[8],b=i[9],S=i[10],M=i[11];return i[0]=a*o-p*n,i[1]=u*o-b*n,i[2]=d*o-S*n,i[3]=f*o-M*n,i[8]=a*n+p*o,i[9]=u*n+b*o,i[10]=d*n+S*o,i[11]=f*n+M*o,this},rotateZ:function(t){var i=this.val,n=Math.sin(t),o=Math.cos(t),a=i[0],u=i[1],d=i[2],f=i[3],p=i[4],b=i[5],S=i[6],M=i[7];return i[0]=a*o+p*n,i[1]=u*o+b*n,i[2]=d*o+S*n,i[3]=f*o+M*n,i[4]=p*o-a*n,i[5]=b*o-u*n,i[6]=S*o-d*n,i[7]=M*o-f*n,this},fromRotationTranslation:function(t,i){var n=t.x,o=t.y,a=t.z,u=t.w,d=n+n,f=o+o,p=a+a,b=n*d,S=n*f,M=n*p,C=o*f,P=o*p,R=a*p,O=u*d,B=u*f,N=u*p;return this.setValues(1-(C+R),S+N,M-B,0,S-N,1-(b+R),P+O,0,M+B,P-O,1-(b+C),0,i.x,i.y,i.z,1)},fromQuat:function(t){var i=t.x,n=t.y,o=t.z,a=t.w,u=i+i,d=n+n,f=o+o,p=i*u,b=i*d,S=i*f,M=n*d,C=n*f,P=o*f,R=a*u,O=a*d,B=a*f;return this.setValues(1-(M+P),b+B,S-O,0,b-B,1-(p+P),C+R,0,S+O,C-R,1-(p+M),0,0,0,0,1)},frustum:function(t,i,n,o,a,u){var d=1/(i-t),f=1/(o-n),p=1/(a-u);return this.setValues(2*a*d,0,0,0,0,2*a*f,0,0,(i+t)*d,(o+n)*f,(u+a)*p,-1,0,0,u*a*2*p,0)},perspective:function(t,i,n,o){var a=1/Math.tan(t/2),u=1/(n-o);return this.setValues(a/i,0,0,0,0,a,0,0,0,0,(o+n)*u,-1,0,0,2*o*n*u,0)},perspectiveLH:function(t,i,n,o){return this.setValues(2*n/t,0,0,0,0,2*n/i,0,0,0,0,-o/(n-o),1,0,0,n*o/(n-o),0)},ortho:function(t,i,n,o,a,u){var d=t-i,f=n-o,p=a-u;return d=0===d?d:1/d,f=0===f?f:1/f,p=0===p?p:1/p,this.setValues(-2*d,0,0,0,0,-2*f,0,0,0,0,2*p,0,(t+i)*d,(o+n)*f,(u+a)*p,1)},lookAtRH:function(t,i,n){var o=this.val;return M.subVectors(t,i),0===M.getLengthSquared()&&(M.z=1),M.normalize(),b.crossVectors(n,M),0===b.getLengthSquared()&&(1===Math.abs(n.z)?M.x+=1e-4:M.z+=1e-4,M.normalize(),b.crossVectors(n,M)),b.normalize(),S.crossVectors(M,b),o[0]=b.x,o[1]=b.y,o[2]=b.z,o[4]=S.x,o[5]=S.y,o[6]=S.z,o[8]=M.x,o[9]=M.y,o[10]=M.z,this},lookAt:function(t,i,n){var o=t.x,a=t.y,d=t.z,f=n.x,p=n.y,b=n.z,S=i.x,M=i.y,C=i.z;if(Math.abs(o-S)<u&&Math.abs(a-M)<u&&Math.abs(d-C)<u)return this.identity();var P=o-S,R=a-M,O=d-C,B=1/Math.sqrt(P*P+R*R+O*O),N=p*(O*=B)-b*(R*=B),Y=b*(P*=B)-f*O,X=f*R-p*P;(B=Math.sqrt(N*N+Y*Y+X*X))?(N*=B=1/B,Y*=B,X*=B):(N=0,Y=0,X=0);var G=R*X-O*Y,U=O*N-P*X,V=P*Y-R*N;return(B=Math.sqrt(G*G+U*U+V*V))?(G*=B=1/B,U*=B,V*=B):(G=0,U=0,V=0),this.setValues(N,G,P,0,Y,U,R,0,X,V,O,0,-(N*o+Y*a+X*d),-(G*o+U*a+V*d),-(P*o+R*a+O*d),1)},yawPitchRoll:function(t,i,n){this.zero(),f.zero(),p.zero();var o=this.val,a=f.val,u=p.val,d=Math.sin(n),b=Math.cos(n);return o[10]=1,o[15]=1,o[0]=b,o[1]=d,o[4]=-d,o[5]=b,d=Math.sin(i),b=Math.cos(i),a[0]=1,a[15]=1,a[5]=b,a[10]=b,a[9]=-d,a[6]=d,d=Math.sin(t),b=Math.cos(t),u[5]=1,u[15]=1,u[0]=b,u[2]=-d,u[8]=d,u[10]=b,this.multiplyLocal(f),this.multiplyLocal(p),this},setWorldMatrix:function(t,i,n,o,a){return this.yawPitchRoll(t.y,t.x,t.z),f.scaling(n.x,n.y,n.z),p.xyz(i.x,i.y,i.z),this.multiplyLocal(f),this.multiplyLocal(p),o&&this.multiplyLocal(o),a&&this.multiplyLocal(a),this},multiplyToMat4:function(t,i){var n=this.val,o=t.val,a=n[0],u=n[1],d=n[2],f=n[3],p=n[4],b=n[5],S=n[6],M=n[7],C=n[8],P=n[9],R=n[10],O=n[11],B=n[12],N=n[13],Y=n[14],X=n[15],G=o[0],U=o[1],V=o[2],z=o[3],W=o[4],H=o[5],j=o[6],q=o[7],Z=o[8],K=o[9],$=o[10],tt=o[11],et=o[12],it=o[13],nt=o[14],st=o[15];return i.setValues(G*a+U*p+V*C+z*B,U*u+U*b+V*P+z*N,V*d+U*S+V*R+z*Y,z*f+U*M+V*O+z*X,W*a+H*p+j*C+q*B,W*u+H*b+j*P+q*N,W*d+H*S+j*R+q*Y,W*f+H*M+j*O+q*X,Z*a+K*p+$*C+tt*B,Z*u+K*b+$*P+tt*N,Z*d+K*S+$*R+tt*Y,Z*f+K*M+$*O+tt*X,et*a+it*p+nt*C+st*B,et*u+it*b+nt*P+st*N,et*d+it*S+nt*R+st*Y,et*f+it*M+nt*O+st*X)},fromRotationXYTranslation:function(t,i,n){var o=i.x,a=i.y,u=i.z,d=Math.sin(t.x),f=Math.cos(t.x),p=Math.sin(t.y),b=Math.cos(t.y),S=o,M=a,C=u,P=-d,R=0-P*p,O=0-f*p,B=P*b,N=f*b;return n||(S=b*o+p*u,M=R*o+f*a+B*u,C=O*o+d*a+N*u),this.setValues(b,R,O,0,0,f,d,0,p,B,N,0,S,M,C,1)},getMaxScaleOnAxis:function(){var t=this.val,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],o=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(i,n,o))}}),f=new d,p=new d,b=new a,S=new a,M=new a;t.exports=d},function(t,i,n){t.exports={COMPLETE:n(987),DECODED:n(988),DECODED_ALL:n(989),DESTROY:n(990),DETUNE:n(991),GLOBAL_DETUNE:n(992),GLOBAL_MUTE:n(993),GLOBAL_RATE:n(994),GLOBAL_VOLUME:n(995),LOOP:n(996),LOOPED:n(997),MUTE:n(998),PAN:n(999),PAUSE_ALL:n(1e3),PAUSE:n(1001),PLAY:n(1002),RATE:n(1003),RESUME_ALL:n(1004),RESUME:n(1005),SEEK:n(1006),STOP_ALL:n(1007),STOP:n(1008),UNLOCKED:n(1009),VOLUME:n(1010)}},function(t,i,n){var o=n(0),a=n(21),u=n(23),d=n(8),f=n(2),p=n(7),b=new o({Extends:u,initialize:function ImageFile2(t,i,n,o,a){var d,b="png";if(p(i)){var S=i;i=f(S,"key"),n=f(S,"url"),d=f(S,"normalMap"),o=f(S,"xhrSettings"),b=f(S,"extension",b),a=f(S,"frameConfig")}Array.isArray(n)&&(d=n[1],n=n[0]);var M={type:"image",cache:t.textureManager,extension:b,responseType:"blob",key:i,url:n,xhrSettings:o,config:a};if(u.call(this,t,M),d){var C=new ImageFile2(t,this.key,d,o,a);C.type="normalMap",this.setLink(C),t.addFile(C)}},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var t=this;this.data.onload=function(){u.revokeObjectURL(t.data),t.onProcessComplete()},this.data.onerror=function(){u.revokeObjectURL(t.data),t.onProcessError()},u.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var t,i=this.linkFile;i&&i.state===a.FILE_COMPLETE?(t="image"===this.type?this.cache.addImage(this.key,this.data,i.data):this.cache.addImage(i.key,i.data,this.data),this.pendingDestroy(t),i.pendingDestroy(t)):i||(t=this.cache.addImage(this.key,this.data),this.pendingDestroy(t))}});d.register("image",(function(t,i,n){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new b(this,t[o]));else this.addFile(new b(this,t,i,n));return this})),t.exports=b},function(t,i){t.exports=function(t,i){i?t.setCollision(!0,!0,!0,!0,!1):t.resetCollision(!1)}},function(t,i,n){var o=n(164),a=n(0),u=n(11),d=n(15),f=n(1065),p=new a({Extends:d,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.ScrollFactor,u.Size,u.TextureCrop,u.Tint,u.Transform,u.Visible,f],initialize:function Sprite2(t,i,n,a,u){d.call(this,t,"Sprite"),this._crop=this.resetCropObject(),this.anims=new o(this),this.setTexture(a,u),this.setPosition(i,n),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(t,i){this.anims.update(t,i)},play:function(t,i){return this.anims.play(t,i)},playReverse:function(t,i){return this.anims.playReverse(t,i)},playAfterDelay:function(t,i){return this.anims.playAfterDelay(t,i)},playAfterRepeat:function(t,i){return this.anims.playAfterRepeat(t,i)},chain:function(t){return this.anims.chain(t)},stop:function(){return this.anims.stop()},stopAfterDelay:function(t){return this.anims.stopAfterDelay(t)},stopAfterRepeat:function(t){return this.anims.stopAfterRepeat(t)},stopOnFrame:function(t){return this.anims.stopOnFrame(t)},toJSON:function(){return u.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});t.exports=p},function(t,i){t.exports=function(t,i){if(!(i>=t.length)){for(var n=t.length-1,o=t[i],a=i;a<n;a++)t[a]=t[a+1];return t.length=n,o}}},function(t,i,n){t.exports={ADDED_TO_SCENE:n(643),DESTROY:n(644),REMOVED_FROM_SCENE:n(645),VIDEO_COMPLETE:n(646),VIDEO_CREATED:n(647),VIDEO_ERROR:n(648),VIDEO_LOOP:n(649),VIDEO_PLAY:n(650),VIDEO_SEEKED:n(651),VIDEO_SEEKING:n(652),VIDEO_STOP:n(653),VIDEO_TIMEOUT:n(654),VIDEO_UNLOCKED:n(655)}},function(t,i){t.exports=function(t,i,n,o){return void 0===n&&(n=0),0===i?t:(t-=n,t=i*Math.floor(t/i),o?(n+t)/i:n+t)}},function(t,i){t.exports=function(t){var i={};for(var n in t)Array.isArray(t[n])?i[n]=t[n].slice(0):i[n]=t[n];return i}},function(t,i){t.exports=function(t,i,n,o){var a=t.length;if(i<0||i>a||i>=n||n>a||i+n>a){if(o)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},function(t,i){function Compare(t,i){return String(t).localeCompare(i)}function RunPass(t,i,n,o){var a,u,d,f,p,b=t.length,S=0,M=2*n;for(a=0;a<b;a+=M)for(d=(u=a+n)+n,u>b&&(u=b),d>b&&(d=b),f=a,p=u;;)if(f<u&&p<d)i(t[f],t[p])<=0?o[S++]=t[f++]:o[S++]=t[p++];else if(f<u)o[S++]=t[f++];else{if(!(p<d))break;o[S++]=t[p++]}}t.exports=function(t,i){void 0===i&&(i=Compare);var n=function Process(t,i){var n=t.length;if(n<=1)return t;for(var o=new Array(n),a=1;a<n;a*=2){RunPass(t,i,a,o);var u=t;t=o,o=u}return t}(t,i);return n!==t&&RunPass(n,null,t.length,t),t}},function(t,i,n){var o=n(134),a=n(205);t.exports=function(t,i){var n=o.Power0;if("string"==typeof t)if(o.hasOwnProperty(t))n=o[t];else{var u="";t.indexOf(".")&&("in"===(u=t.substr(t.indexOf(".")+1)).toLowerCase()?u="easeIn":"out"===u.toLowerCase()?u="easeOut":"inout"===u.toLowerCase()&&(u="easeInOut")),t=a(t.substr(0,t.indexOf(".")+1)+u),o.hasOwnProperty(t)&&(n=o[t])}else"function"==typeof t?n=t:Array.isArray(t)&&t.length;if(!i)return n;var d=i.slice(0);return d.unshift(0),function(t){return d[0]=t,n.apply(this,d)}}},function(t,i,n){var o=n(12);t.exports=function(t,i,n,a,u){var d=t.strokeTint,f=o.getTintAppendFloatAlpha(i.strokeColor,i.strokeAlpha*n);d.TL=f,d.TR=f,d.BL=f,d.BR=f;var p=i.pathData,b=p.length-1,S=i.lineWidth,M=S/2,C=p[0]-a,P=p[1]-u;i.closePath||(b-=2);for(var R=2;R<b;R+=2){var O=p[R]-a,B=p[R+1]-u;t.batchLine(C,P,O,B,M,M,S,R-2,!!i.closePath&&R===b-1),C=O,P=B}}},function(t,i,n){var o=n(0),a=n(115),u=n(476),d=n(477),f=n(56),p=n(47),b=n(181),S=new o({initialize:function Triangle2(t,i,n,o,a,u){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===u&&(u=0),this.type=f.TRIANGLE,this.x1=t,this.y1=i,this.x2=n,this.y2=o,this.x3=a,this.y3=u},contains:function(t,i){return a(this,t,i)},getPoint:function(t,i){return u(this,t,i)},getPoints:function(t,i,n){return d(this,t,i,n)},getRandomPoint:function(t){return b(this,t)},setTo:function(t,i,n,o,a,u){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===u&&(u=0),this.x1=t,this.y1=i,this.x2=n,this.y2=o,this.x3=a,this.y3=u,this},getLineA:function(t){return void 0===t&&(t=new p),t.setTo(this.x1,this.y1,this.x2,this.y2),t},getLineB:function(t){return void 0===t&&(t=new p),t.setTo(this.x2,this.y2,this.x3,this.y3),t},getLineC:function(t){return void 0===t&&(t=new p),t.setTo(this.x3,this.y3,this.x1,this.y1),t},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(t){var i=0;i=this.x1<=this.x2&&this.x1<=this.x3?this.x1-t:this.x2<=this.x1&&this.x2<=this.x3?this.x2-t:this.x3-t,this.x1-=i,this.x2-=i,this.x3-=i}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(t){var i=0;i=this.x1>=this.x2&&this.x1>=this.x3?this.x1-t:this.x2>=this.x1&&this.x2>=this.x3?this.x2-t:this.x3-t,this.x1-=i,this.x2-=i,this.x3-=i}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(t){var i=0;i=this.y1<=this.y2&&this.y1<=this.y3?this.y1-t:this.y2<=this.y1&&this.y2<=this.y3?this.y2-t:this.y3-t,this.y1-=i,this.y2-=i,this.y3-=i}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(t){var i=0;i=this.y1>=this.y2&&this.y1>=this.y3?this.y1-t:this.y2>=this.y1&&this.y2>=this.y3?this.y2-t:this.y3-t,this.y1-=i,this.y2-=i,this.y3-=i}}});t.exports=S},function(t,i){var n={};t.exports=n,n.create=function(t,i){return{x:t||0,y:i||0}},n.clone=function(t){return{x:t.x,y:t.y}},n.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},n.magnitudeSquared=function(t){return t.x*t.x+t.y*t.y},n.rotate=function(t,i,n){var o=Math.cos(i),a=Math.sin(i);n||(n={});var u=t.x*o-t.y*a;return n.y=t.x*a+t.y*o,n.x=u,n},n.rotateAbout=function(t,i,n,o){var a=Math.cos(i),u=Math.sin(i);o||(o={});var d=n.x+((t.x-n.x)*a-(t.y-n.y)*u);return o.y=n.y+((t.x-n.x)*u+(t.y-n.y)*a),o.x=d,o},n.normalise=function(t){var i=n.magnitude(t);return 0===i?{x:0,y:0}:{x:t.x/i,y:t.y/i}},n.dot=function(t,i){return t.x*i.x+t.y*i.y},n.cross=function(t,i){return t.x*i.y-t.y*i.x},n.cross3=function(t,i,n){return(i.x-t.x)*(n.y-t.y)-(i.y-t.y)*(n.x-t.x)},n.add=function(t,i,n){return n||(n={}),n.x=t.x+i.x,n.y=t.y+i.y,n},n.sub=function(t,i,n){return n||(n={}),n.x=t.x-i.x,n.y=t.y-i.y,n},n.mult=function(t,i){return{x:t.x*i,y:t.y*i}},n.div=function(t,i){return{x:t.x/i,y:t.y/i}},n.perp=function(t,i){return{x:(i=!0===i?-1:1)*-t.y,y:i*t.x}},n.neg=function(t){return{x:-t.x,y:-t.y}},n.angle=function(t,i){return Math.atan2(i.y-t.y,i.x-t.x)},n._temp=[n.create(),n.create(),n.create(),n.create(),n.create(),n.create()]},function(t,i){var n={};t.exports=n,n.create=function(t){var i={min:{x:0,y:0},max:{x:0,y:0}};return t&&n.update(i,t),i},n.update=function(t,i,n){t.min.x=1/0,t.max.x=-1/0,t.min.y=1/0,t.max.y=-1/0;for(var o=0;o<i.length;o++){var a=i[o];a.x>t.max.x&&(t.max.x=a.x),a.x<t.min.x&&(t.min.x=a.x),a.y>t.max.y&&(t.max.y=a.y),a.y<t.min.y&&(t.min.y=a.y)}n&&(n.x>0?t.max.x+=n.x:t.min.x+=n.x,n.y>0?t.max.y+=n.y:t.min.y+=n.y)},n.contains=function(t,i){return i.x>=t.min.x&&i.x<=t.max.x&&i.y>=t.min.y&&i.y<=t.max.y},n.overlaps=function(t,i){return t.min.x<=i.max.x&&t.max.x>=i.min.x&&t.max.y>=i.min.y&&t.min.y<=i.max.y},n.translate=function(t,i){t.min.x+=i.x,t.max.x+=i.x,t.min.y+=i.y,t.max.y+=i.y},n.shift=function(t,i){var n=t.max.x-t.min.x,o=t.max.y-t.min.y;t.min.x=i.x,t.max.x=i.x+n,t.min.y=i.y,t.max.y=i.y+o}},function(t,i,n){var o=n(29),a=n(0),u=n(11),d=n(502),f=new a({Mixins:[u.Alpha,u.Flip,u.Visible],initialize:function Tile2(t,i,n,o,a,u,d,f){this.layer=t,this.index=i,this.x=n,this.y=o,this.width=a,this.height=u,this.right,this.bottom,this.baseWidth=void 0!==d?d:a,this.baseHeight=void 0!==f?f:u,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(t,i){return!(t<this.pixelX||i<this.pixelY||t>this.right||i>this.bottom)},copy:function(t){return this.index=t.index,this.alpha=t.alpha,this.properties=t.properties,this.visible=t.visible,this.setFlip(t.flipX,t.flipY),this.tint=t.tint,this.rotation=t.rotation,this.collideUp=t.collideUp,this.collideDown=t.collideDown,this.collideLeft=t.collideLeft,this.collideRight=t.collideRight,this.collisionCallback=t.collisionCallback,this.collisionCallbackContext=t.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(t){var i=this.tilemapLayer;return i?i.tileToWorldX(this.x,t):this.x*this.baseWidth},getRight:function(t){var i=this.tilemapLayer;return i?this.getLeft(t)+this.width*i.scaleX:this.getLeft(t)+this.width},getTop:function(t){var i=this.tilemapLayer;return i?i.tileToWorldY(this.y,t)-(this.height-this.baseHeight)*i.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(t){var i=this.tilemapLayer;return i?this.getTop(t)+this.height*i.scaleY:this.getTop(t)+this.height},getBounds:function(t,i){return void 0===i&&(i=new d),i.x=this.getLeft(),i.y=this.getTop(),i.width=this.getRight()-i.x,i.height=this.getBottom()-i.y,i},getCenterX:function(t){return(this.getLeft(t)+this.getRight(t))/2},getCenterY:function(t){return(this.getTop(t)+this.getBottom(t))/2},intersects:function(t,i,n,o){return!(n<=this.pixelX||o<=this.pixelY||t>=this.right||i>=this.bottom)},isInteresting:function(t,i){return t&&i?this.canCollide||this.hasInterestingFace:t?this.collides:!!i&&this.hasInterestingFace},resetCollision:function(t){return void 0===t&&(t=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,t&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(t,i,n,o,a){return void 0===i&&(i=t),void 0===n&&(n=t),void 0===o&&(o=t),void 0===a&&(a=!0),this.collideLeft=t,this.collideRight=i,this.collideUp=n,this.collideDown=o,this.faceLeft=t,this.faceRight=i,this.faceTop=n,this.faceBottom=o,a&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},setCollisionCallback:function(t,i){return null===t?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=t,this.collisionCallbackContext=i),this},setSize:function(t,i,n,o){return void 0!==t&&(this.width=t),void 0!==i&&(this.height=i),void 0!==n&&(this.baseWidth=n),void 0!==o&&(this.baseHeight=o),this.updatePixelXY(),this},updatePixelXY:function(){var t=this.layer.orientation;if(t===o.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(t===o.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(t===o.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(t===o.HEXAGONAL){var i=this.layer.hexSideLength,n=(this.baseHeight-i)/2+i;this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*n}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||void 0!==this.collisionCallback}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var t=this.layer.tilemapLayer;if(t){var i=t.gidMap[this.index];if(i)return i}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var t=this.tilemapLayer;return t?t.tilemap:null}}});t.exports=f},function(t,i,n){var o={};t.exports=o;var a=n(64),u=n(32),d=n(41),f=n(84),p=n(83),b=n(1393);o.rectangle=function(t,i,n,o,f){f=f||{};var p={label:"Rectangle Body",position:{x:t,y:i},vertices:a.fromPath("L 0 0 L "+n+" 0 L "+n+" "+o+" L 0 "+o)};if(f.chamfer){var b=f.chamfer;p.vertices=a.chamfer(p.vertices,b.radius,b.quality,b.qualityMin,b.qualityMax),delete f.chamfer}return d.create(u.extend({},p,f))},o.trapezoid=function(t,i,n,o,f,p){p=p||{};var b,S=n*(f*=.5),M=S+(1-2*f)*n,C=M+S;b=f<.5?"L 0 0 L "+S+" "+-o+" L "+M+" "+-o+" L "+C+" 0":"L 0 0 L "+M+" "+-o+" L "+C+" 0";var P={label:"Trapezoid Body",position:{x:t,y:i},vertices:a.fromPath(b)};if(p.chamfer){var R=p.chamfer;P.vertices=a.chamfer(P.vertices,R.radius,R.quality,R.qualityMin,R.qualityMax),delete p.chamfer}return d.create(u.extend({},P,p))},o.circle=function(t,i,n,a,d){a=a||{};var f={label:"Circle Body",circleRadius:n};d=d||25;var p=Math.ceil(Math.max(10,Math.min(d,n)));return p%2==1&&(p+=1),o.polygon(t,i,p,n,u.extend({},f,a))},o.polygon=function(t,i,n,f,p){if(p=p||{},n<3)return o.circle(t,i,f,p);for(var b=2*Math.PI/n,S="",M=.5*b,C=0;C<n;C+=1){var P=M+C*b,R=Math.cos(P)*f,O=Math.sin(P)*f;S+="L "+R.toFixed(3)+" "+O.toFixed(3)+" "}var B={label:"Polygon Body",position:{x:t,y:i},vertices:a.fromPath(S)};if(p.chamfer){var N=p.chamfer;B.vertices=a.chamfer(B.vertices,N.radius,N.quality,N.qualityMin,N.qualityMax),delete p.chamfer}return d.create(u.extend({},B,p))},o.fromVertices=function(t,i,n,f,p,S,M){var C,P,R,O,B,N;for(f=f||{},P=[],p=void 0!==p&&p,S=void 0!==S?S:.01,M=void 0!==M?M:10,b||u.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),u.isArray(n[0])||(n=[n]),N=0;N<n.length;N+=1)if(O=n[N],(R=a.isConvex(O))||!b)O=R?a.clockwiseSort(O):a.hull(O),P.push({position:{x:t,y:i},vertices:O});else{var Y=O.map((function(t){return[t.x,t.y]}));b.makeCCW(Y),!1!==S&&b.removeCollinearPoints(Y,S);var X=b.quickDecomp(Y);for(B=0;B<X.length;B++){var G=X[B].map((function(t){return{x:t[0],y:t[1]}}));M>0&&a.area(G)<M||P.push({position:a.centre(G),vertices:G})}}for(B=0;B<P.length;B++)P[B]=d.create(u.extend(P[B],f));return p&&o.flagCoincidentParts(P,5),P.length>1?(C=d.create(u.extend({parts:P.slice(0)},f)),d.setPosition(C,{x:t,y:i}),C):P[0]},o.flagCoincidentParts=function(t,i){void 0===i&&(i=5);for(var n=0;n<t.length;n++)for(var o=t[n],a=n+1;a<t.length;a++){var u=t[a];if(f.overlaps(o.bounds,u.bounds))for(var d=o.vertices,b=u.vertices,S=0;S<o.vertices.length;S++)for(var M=0;M<u.vertices.length;M++){var C=p.magnitudeSquared(p.sub(d[(S+1)%d.length],b[M])),P=p.magnitudeSquared(p.sub(d[S],b[(M+1)%b.length]));C<i&&P<i&&(d[S].isInternal=!0,b[M].isInternal=!0)}}return t}},function(t,i){t.exports=function(t){return t.x-t.width*t.originX+.5*t.width}},function(t,i){t.exports=function(t,i){var n=t.width*t.originX;return t.x=i+n-.5*t.width,t}},function(t,i){t.exports=function(t){return t.y-t.height*t.originY+.5*t.height}},function(t,i){t.exports=function(t,i){var n=t.height*t.originY;return t.y=i+n-.5*t.height,t}},function(t,i,n){t.exports={POST_RENDER:n(628),PRE_RENDER:n(629),RENDER:n(630),RESIZE:n(631)}},function(t,i){t.exports={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"}},function(t,i,n){var o=n(74);t.exports=function(t,i,n,a){var u;if(void 0===a&&(a=t),!Array.isArray(i))return-1!==(u=t.indexOf(i))?(o(t,u),n&&n.call(a,i),i):null;for(var d=i.length-1,f=[];d>=0;){var p=i[d];-1!==(u=t.indexOf(p))&&(o(t,u),f.push(p),n&&n.call(a,p)),d--}return f}},function(t,i,n){var o=n(0),a=n(199),u=n(10),d=n(3),f=new o({initialize:function Curve2(t){this.type=t,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new d,this._tmpVec2B=new d},draw:function(t,i){return void 0===i&&(i=32),t.strokePoints(this.getPoints(i))},getBounds:function(t,i){t||(t=new u),void 0===i&&(i=16);var n=this.getLength();i>n&&(i=n/2);var o=Math.max(1,Math.round(n/i));return a(this.getSpacedPoints(o),t)},getDistancePoints:function(t){var i=this.getLength(),n=Math.max(1,i/t);return this.getSpacedPoints(n)},getEndPoint:function(t){return void 0===t&&(t=new d),this.getPointAt(1,t)},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var i,n=[],o=this.getPoint(0,this._tmpVec2A),a=0;n.push(0);for(var u=1;u<=t;u++)a+=(i=this.getPoint(u/t,this._tmpVec2B)).distance(o),n.push(a),o.copy(i);return this.cacheArcLengths=n,n},getPointAt:function(t,i){var n=this.getUtoTmapping(t);return this.getPoint(n,i)},getPoints:function(t,i,n){void 0===n&&(n=[]),t||(t=i?this.getLength()/i:this.defaultDivisions);for(var o=0;o<=t;o++)n.push(this.getPoint(o/t));return n},getRandomPoint:function(t){return void 0===t&&(t=new d),this.getPoint(Math.random(),t)},getSpacedPoints:function(t,i,n){void 0===n&&(n=[]),t||(t=i?this.getLength()/i:this.defaultDivisions);for(var o=0;o<=t;o++){var a=this.getUtoTmapping(o/t,null,t);n.push(this.getPoint(a))}return n},getStartPoint:function(t){return void 0===t&&(t=new d),this.getPointAt(0,t)},getTangent:function(t,i){void 0===i&&(i=new d);var n=1e-4,o=t-n,a=t+n;return o<0&&(o=0),a>1&&(a=1),this.getPoint(o,this._tmpVec2A),this.getPoint(a,i),i.subtract(this._tmpVec2A).normalize()},getTangentAt:function(t,i){var n=this.getUtoTmapping(t);return this.getTangent(n,i)},getTFromDistance:function(t,i){return t<=0?0:this.getUtoTmapping(0,t,i)},getUtoTmapping:function(t,i,n){var o,a=this.getLengths(n),u=0,d=a.length;o=i?Math.min(i,a[d-1]):t*a[d-1];for(var f,p=0,b=d-1;p<=b;)if((f=a[u=Math.floor(p+(b-p)/2)]-o)<0)p=u+1;else{if(!(f>0)){b=u;break}b=u-1}if(a[u=b]===o)return u/(d-1);var S=a[u];return(u+(o-S)/(a[u+1]-S))/(d-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});t.exports=f},function(t,i,n){t.exports={ADD:n(968),COMPLETE:n(969),FILE_COMPLETE:n(970),FILE_KEY_COMPLETE:n(971),FILE_LOAD_ERROR:n(972),FILE_LOAD:n(973),FILE_PROGRESS:n(974),POST_PROCESS:n(975),PROGRESS:n(976),START:n(977)}},function(t,i,n){var o=n(4);t.exports=function(t,i,n){void 0===n&&(n=new o);var a=t.x1,u=t.y1,d=t.x2,f=t.y2,p=i.x1,b=i.y1,S=i.x2,M=i.y2,C=(M-b)*(d-a)-(S-p)*(f-u);if(0===C)return!1;var P=((S-p)*(u-b)-(M-b)*(a-p))/C,R=((d-a)*(u-b)-(f-u)*(a-p))/C;return P>=0&&P<=1&&R>=0&&R<=1&&(n.x=a+P*(d-a),n.y=u+P*(f-u),!0)}},function(t,i){t.exports=function(t){return Math.atan2(t.y2-t.y1,t.x2-t.x1)}},function(t,i,n){var o=n(18);t.exports=function(t,i,n){return(n-i)*(t=o(t,0,1))+i}},function(t,i){t.exports=function(t,i,n){return t&&t.hasOwnProperty(i)?t[i]:n}},function(t,i){t.exports={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26}},function(t,i,n){var o=n(0),a=n(315),u=new o({initialize:function DataManager2(t,i){this.parent=t,this.events=i,i||(this.events=t.events?t.events:t),this.list={},this.values={},this._frozen=!1,!t.hasOwnProperty("sys")&&this.events&&this.events.once(a.DESTROY,this.destroy,this)},get:function(t){var i=this.list;if(Array.isArray(t)){for(var n=[],o=0;o<t.length;o++)n.push(i[t[o]]);return n}return i[t]},getAll:function(){var t={};for(var i in this.list)this.list.hasOwnProperty(i)&&(t[i]=this.list[i]);return t},query:function(t){var i={};for(var n in this.list)this.list.hasOwnProperty(n)&&n.match(t)&&(i[n]=this.list[n]);return i},set:function(t,i){if(this._frozen)return this;if("string"==typeof t)return this.setValue(t,i);for(var n in t)this.setValue(n,t[n]);return this},inc:function(t,i){if(this._frozen)return this;void 0===i&&(i=1);var n=this.get(t);return void 0===n&&(n=0),this.set(t,n+i),this},toggle:function(t){return this._frozen||this.set(t,!this.get(t)),this},setValue:function(t,i){if(this._frozen)return this;if(this.has(t))this.values[t]=i;else{var n=this,o=this.list,u=this.events,d=this.parent;Object.defineProperty(this.values,t,{enumerable:!0,configurable:!0,get:function(){return o[t]},set:function(i){if(!n._frozen){var f=o[t];o[t]=i,u.emit(a.CHANGE_DATA,d,t,i,f),u.emit(a.CHANGE_DATA_KEY+t,d,i,f)}}}),o[t]=i,u.emit(a.SET_DATA,d,t,i)}return this},each:function(t,i){for(var n=[this.parent,null,void 0],o=1;o<arguments.length;o++)n.push(arguments[o]);for(var a in this.list)n[1]=a,n[2]=this.list[a],t.apply(i,n);return this},merge:function(t,i){for(var n in void 0===i&&(i=!0),t)t.hasOwnProperty(n)&&(i||!i&&!this.has(n))&&this.setValue(n,t[n]);return this},remove:function(t){if(this._frozen)return this;if(!Array.isArray(t))return this.removeValue(t);for(var i=0;i<t.length;i++)this.removeValue(t[i]);return this},removeValue:function(t){if(this.has(t)){var i=this.list[t];delete this.list[t],delete this.values[t],this.events.emit(a.REMOVE_DATA,this.parent,t,i)}return this},pop:function(t){var i=void 0;return!this._frozen&&this.has(t)&&(i=this.list[t],delete this.list[t],delete this.values[t],this.events.emit(a.REMOVE_DATA,this.parent,t,i)),i},has:function(t){return this.list.hasOwnProperty(t)},setFreeze:function(t){return this._frozen=t,this},reset:function(){for(var t in this.list)delete this.list[t],delete this.values[t];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(a.CHANGE_DATA),this.events.off(a.SET_DATA),this.events.off(a.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(t){this._frozen=!!t}},count:{get:function(){var t=0;for(var i in this.list)void 0!==this.list[i]&&t++;return t}}});t.exports=u},function(t,i,n){var o=new(n(0))({initialize:function Map3(t){if(this.entries={},this.size=0,Array.isArray(t))for(var i=0;i<t.length;i++)this.set(t[i][0],t[i][1])},set:function(t,i){return this.has(t)||this.size++,this.entries[t]=i,this},get:function(t){if(this.has(t))return this.entries[t]},getArray:function(){var t=[],i=this.entries;for(var n in i)t.push(i[n]);return t},has:function(t){return this.entries.hasOwnProperty(t)},delete:function(t){return this.has(t)&&(delete this.entries[t],this.size--),this},clear:function(){return Object.keys(this.entries).forEach((function(t){delete this.entries[t]}),this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var t=[],i=this.entries;for(var n in i)t.push(i[n]);return t},dump:function(){var t=this.entries;for(var i in console.group("Map"),t)console.log(i,t[i]);console.groupEnd()},each:function(t){var i=this.entries;for(var n in i)if(!1===t(n,i[n]))break;return this},contains:function(t){var i=this.entries;for(var n in i)if(i[n]===t)return!0;return!1},merge:function(t,i){void 0===i&&(i=!1);var n=this.entries,o=t.entries;for(var a in o)n.hasOwnProperty(a)&&i?n[a]=o[a]:this.set(a,o[a]);return this}});t.exports=o},function(t,i){t.exports=function(t,i,n){return t<<16|i<<8|n}},function(t,i,n){t.exports={ENTER_FULLSCREEN:n(800),FULLSCREEN_FAILED:n(801),FULLSCREEN_UNSUPPORTED:n(802),LEAVE_FULLSCREEN:n(803),ORIENTATION_CHANGE:n(804),RESIZE:n(805)}},function(t,i,n){(function(i){var n={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};t.exports=function init(){if("function"==typeof importScripts)return n;var t=navigator.userAgent;/Windows/.test(t)?n.windows=!0:/Mac OS/.test(t)&&!/like Mac OS/.test(t)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(n.iOS=!0,n.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),n.iOSVersion=parseInt(RegExp.$1,10)):n.macOS=!0:/Android/.test(t)?n.android=!0:/Linux/.test(t)?n.linux=!0:/iP[ao]d|iPhone/i.test(t)?(n.iOS=!0,navigator.appVersion.match(/OS (\d+)/),n.iOSVersion=parseInt(RegExp.$1,10),n.iPhone=-1!==t.toLowerCase().indexOf("iphone"),n.iPad=-1!==t.toLowerCase().indexOf("ipad")):/Kindle/.test(t)||/\bKF[A-Z][A-Z]+/.test(t)||/Silk.*Mobile Safari/.test(t)?n.kindle=!0:/CrOS/.test(t)&&(n.chromeOS=!0),(/Windows Phone/i.test(t)||/IEMobile/i.test(t))&&(n.android=!1,n.iOS=!1,n.macOS=!1,n.windows=!0,n.windowsPhone=!0);var o=/Silk/.test(t);return(n.windows||n.macOS||n.linux&&!o||n.chromeOS)&&(n.desktop=!0),(n.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(n.desktop=!1),navigator.standalone&&(n.webApp=!0),"function"!=typeof importScripts&&(void 0!==window.cordova&&(n.cordova=!0),void 0!==window.ejecta&&(n.ejecta=!0)),void 0!==i&&i.versions&&i.versions.node&&(n.node=!0),n.node&&"object"==typeof i.versions&&(n.nodeWebkit=!!i.versions["node-webkit"],n.electron=!!i.versions.electron),/Crosswalk/.test(t)&&(n.crosswalk=!0),n.pixelRatio=window.devicePixelRatio||1,n}()}).call(this,n(807))},function(t,i,n){t.exports={ADD:n(861),ERROR:n(862),LOAD:n(863),READY:n(864),REMOVE:n(865)}},function(t,i){t.exports={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}}},function(t,i,n){var o=n(0),a=n(59),u=n(2),d=n(878),f=n(879),p=n(25),b=n(12),S=n(107),M=n(58),C=new o({Extends:M,initialize:function MultiPipeline2(t){var i=t.game.renderer,n=u(t,"fragShader",d);t.fragShader=b.parseFragmentShaderMaxTextures(n,i.maxTextures),t.vertShader=u(t,"vertShader",f),t.attributes=u(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:S.UNSIGNED_BYTE,normalized:!0}]),M.call(this,t),this._tempMatrix1=new p,this._tempMatrix2=new p,this._tempMatrix3=new p,this.calcMatrix=new p,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){M.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(t,i,n){this.manager.set(this,t);var o=this._tempMatrix1,a=this._tempMatrix2,u=this._tempMatrix3,d=t.frame,f=d.glTexture,p=d.u0,S=d.v0,M=d.u1,C=d.v1,P=d.x,R=d.y,O=d.cutWidth,B=d.cutHeight,N=d.customPivot,Y=t.displayOriginX,X=t.displayOriginY,G=-Y+P,U=-X+R;if(t.isCropped){var V=t._crop;V.flipX===t.flipX&&V.flipY===t.flipY||d.updateCropUVs(V,t.flipX,t.flipY),p=V.u0,S=V.v0,M=V.u1,C=V.v1,O=V.width,B=V.height,G=-Y+(P=V.x),U=-X+(R=V.y)}var z=1,W=1;t.flipX&&(N||(G+=-d.realWidth+2*Y),z=-1),(t.flipY||d.source.isGLTexture&&!f.flipY)&&(N||(U+=-d.realHeight+2*X),W=-1),a.applyITRS(t.x,t.y,t.rotation,t.scaleX*z,t.scaleY*W),o.copyFrom(i.matrix),n?(o.multiplyWithOffset(n,-i.scrollX*t.scrollFactorX,-i.scrollY*t.scrollFactorY),a.e=t.x,a.f=t.y):(a.e-=i.scrollX*t.scrollFactorX,a.f-=i.scrollY*t.scrollFactorY),o.multiply(a,u);var H=G+O,j=U+B,q=i.roundPixels,Z=u.getXRound(G,U,q),K=u.getYRound(G,U,q),$=u.getXRound(G,j,q),tt=u.getYRound(G,j,q),et=u.getXRound(H,j,q),it=u.getYRound(H,j,q),nt=u.getXRound(H,U,q),st=u.getYRound(H,U,q),rt=b.getTintAppendFloatAlpha,ot=i.alpha,at=rt(t.tintTopLeft,ot*t._alphaTL),ht=rt(t.tintTopRight,ot*t._alphaTR),lt=rt(t.tintBottomLeft,ot*t._alphaBL),ut=rt(t.tintBottomRight,ot*t._alphaBR);this.shouldFlush(6)&&this.flush();var ct=this.setGameObject(t,d);this.manager.preBatch(t),this.batchQuad(t,Z,K,$,tt,et,it,nt,st,p,S,M,C,at,ht,lt,ut,t.tintFill,f,ct),this.manager.postBatch(t)},batchTexture:function(t,i,n,o,a,u,d,f,p,b,S,M,C,P,R,O,B,N,Y,X,G,U,V,z,W,H,j,q,Z,K,$,tt){this.manager.set(this,t);var et=this._tempMatrix1,it=this._tempMatrix2,nt=this._tempMatrix3,st=N/n+j,rt=Y/o+q,ot=(N+X)/n+j,at=(Y+G)/o+q,ht=d,lt=f,ut=-O,ct=-B;if(t.isCropped){var dt=t._crop,ft=dt.width,pt=dt.height;ht=ft,lt=pt,d=ft,f=pt;var gt=N=dt.x,vt=Y=dt.y;M&&(gt=X-dt.x-ft),C&&(vt=G-dt.y-pt),st=gt/n+j,rt=vt/o+q,ot=(gt+ft)/n+j,at=(vt+pt)/o+q,ut=-O+N,ct=-B+Y}M&&(ht*=-1,ut+=d),(C^=!$&&i.isRenderTexture?1:0)&&(lt*=-1,ct+=f);var mt=ut+ht,yt=ct+lt;it.applyITRS(a,u,S,p,b),et.copyFrom(Z.matrix),K?(et.multiplyWithOffset(K,-Z.scrollX*P,-Z.scrollY*R),it.e=a,it.f=u):(it.e-=Z.scrollX*P,it.f-=Z.scrollY*R),et.multiply(it,nt);var xt=Z.roundPixels,Tt=nt.getXRound(ut,ct,xt),wt=nt.getYRound(ut,ct,xt),bt=nt.getXRound(ut,yt,xt),St=nt.getYRound(ut,yt,xt),Et=nt.getXRound(mt,yt,xt),Mt=nt.getYRound(mt,yt,xt),Ct=nt.getXRound(mt,ct,xt),At=nt.getYRound(mt,ct,xt);void 0===tt&&(tt=this.renderer.setTexture2D(i)),t&&this.manager.preBatch(t),this.batchQuad(t,Tt,wt,bt,St,Et,Mt,Ct,At,st,rt,ot,at,U,V,z,W,H,i,tt),t&&this.manager.postBatch(t)},batchTextureFrame:function(t,i,n,o,a,u,d){this.manager.set(this);var f=this._tempMatrix1.copyFrom(u),p=this._tempMatrix2,S=i+t.width,M=n+t.height;d?f.multiply(d,p):p=f;var C=p.getX(i,n),P=p.getY(i,n),R=p.getX(i,M),O=p.getY(i,M),B=p.getX(S,M),N=p.getY(S,M),Y=p.getX(S,n),X=p.getY(S,n),G=this.renderer.setTextureSource(t.source);o=b.getTintAppendFloatAlpha(o,a),this.batchQuad(null,C,P,R,O,B,N,Y,X,t.u0,t.v0,t.u1,t.v1,o,o,o,o,0,t.glTexture,G)},batchFillRect:function(t,i,n,o,a,u){this.renderer.pipelines.set(this);var d=this.calcMatrix;u&&u.multiply(a,d);var f=t+n,p=i+o,b=d.getX(t,i),S=d.getY(t,i),M=d.getX(t,p),C=d.getY(t,p),P=d.getX(f,p),R=d.getY(f,p),O=d.getX(f,i),B=d.getY(f,i),N=this.fillTint;this.batchQuad(null,b,S,M,C,P,R,O,B,0,0,1,1,N.TL,N.TR,N.BL,N.BR,2)},batchFillTriangle:function(t,i,n,o,a,u,d,f){this.renderer.pipelines.set(this);var p=this.calcMatrix;f&&f.multiply(d,p);var b=p.getX(t,i),S=p.getY(t,i),M=p.getX(n,o),C=p.getY(n,o),P=p.getX(a,u),R=p.getY(a,u),O=this.fillTint;this.batchTri(null,b,S,M,C,P,R,0,0,1,1,O.TL,O.TR,O.BL,2)},batchStrokeTriangle:function(t,i,n,o,a,u,d,f,p){var b=this.tempTriangle;b[0].x=t,b[0].y=i,b[0].width=d,b[1].x=n,b[1].y=o,b[1].width=d,b[2].x=a,b[2].y=u,b[2].width=d,b[3].x=t,b[3].y=i,b[3].width=d,this.batchStrokePath(b,d,!1,f,p)},batchFillPath:function(t,i,n){this.renderer.pipelines.set(this);var o=this.calcMatrix;n&&n.multiply(i,o);for(var u,d,f=t.length,p=this.polygonCache,b=this.fillTint.TL,S=this.fillTint.TR,M=this.fillTint.BL,C=0;C<f;++C)d=t[C],p.push(d.x,d.y);f=(u=a(p)).length;for(var P=0;P<f;P+=3){var R=2*u[P+0],O=2*u[P+1],B=2*u[P+2],N=p[R+0],Y=p[R+1],X=p[O+0],G=p[O+1],U=p[B+0],V=p[B+1],z=o.getX(N,Y),W=o.getY(N,Y),H=o.getX(X,G),j=o.getY(X,G),q=o.getX(U,V),Z=o.getY(U,V);this.batchTri(null,z,W,H,j,q,Z,0,0,1,1,b,S,M,2)}p.length=0},batchStrokePath:function(t,i,n,o,a){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var u=t.length-1,d=0;d<u;d++){var f=t[d],p=t[d+1];this.batchLine(f.x,f.y,p.x,p.y,f.width/2,p.width/2,i,d,!n&&d===u-1,o,a)}},batchLine:function(t,i,n,o,a,u,d,f,p,b,S){this.renderer.pipelines.set(this);var M=this.calcMatrix;S&&S.multiply(b,M);var C=n-t,P=o-i,R=Math.sqrt(C*C+P*P),O=a*(o-i)/R,B=a*(t-n)/R,N=u*(o-i)/R,Y=u*(t-n)/R,X=n-N,G=o-Y,U=t-O,V=i-B,z=n+N,W=o+Y,H=t+O,j=i+B,q=M.getX(X,G),Z=M.getY(X,G),K=M.getX(U,V),$=M.getY(U,V),tt=M.getX(z,W),et=M.getY(z,W),it=M.getX(H,j),nt=M.getY(H,j),st=this.strokeTint,rt=st.TL,ot=st.TR,at=st.BL,ht=st.BR;if(this.batchQuad(null,it,nt,K,$,q,Z,tt,et,0,0,1,1,rt,ot,at,ht,2),!(d<=2)){var lt=this.prevQuad,ut=this.firstQuad;f>0&&lt[4]?this.batchQuad(null,it,nt,K,$,lt[0],lt[1],lt[2],lt[3],0,0,1,1,rt,ot,at,ht,2):(ut[0]=it,ut[1]=nt,ut[2]=K,ut[3]=$,ut[4]=1),p&&ut[4]?this.batchQuad(null,q,Z,tt,et,ut[0],ut[1],ut[2],ut[3],0,0,1,1,rt,ot,at,ht,2):(lt[0]=q,lt[1]=Z,lt[2]=tt,lt[3]=et,lt[4]=1)}}});t.exports=C},function(t,i,n){var o=n(0),a=n(18),u=n(17),d=new o({initialize:function Frame2(t,i,n,o,a,u,d){this.texture=t,this.name=i,this.source=t.source[n],this.sourceIndex=n,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(u,d,o,a)},setSize:function(t,i,n,o){void 0===n&&(n=0),void 0===o&&(o=0),this.cutX=n,this.cutY=o,this.cutWidth=t,this.cutHeight=i,this.width=t,this.height=i,this.halfWidth=Math.floor(.5*t),this.halfHeight=Math.floor(.5*i),this.centerX=Math.floor(t/2),this.centerY=Math.floor(i/2);var a=this.data,u=a.cut;u.x=n,u.y=o,u.w=t,u.h=i,u.r=n+t,u.b=o+i,a.sourceSize.w=t,a.sourceSize.h=i,a.spriteSourceSize.w=t,a.spriteSourceSize.h=i,a.radius=.5*Math.sqrt(t*t+i*i);var d=a.drawImage;return d.x=n,d.y=o,d.width=t,d.height=i,this.updateUVs()},setTrim:function(t,i,n,o,a,u){var d=this.data,f=d.spriteSourceSize;return d.trim=!0,d.sourceSize.w=t,d.sourceSize.h=i,f.x=n,f.y=o,f.w=a,f.h=u,f.r=n+a,f.b=o+u,this.x=n,this.y=o,this.width=a,this.height=u,this.halfWidth=.5*a,this.halfHeight=.5*u,this.centerX=Math.floor(a/2),this.centerY=Math.floor(u/2),this.updateUVs()},setCropUVs:function(t,i,n,o,u,d,f){var p=this.cutX,b=this.cutY,S=this.cutWidth,M=this.cutHeight,C=this.realWidth,P=this.realHeight,R=p+(i=a(i,0,C)),O=b+(n=a(n,0,P)),B=o=a(o,0,C-i),N=u=a(u,0,P-n),Y=this.data;if(Y.trim){var X=Y.spriteSourceSize,G=i+(o=a(o,0,S-i)),U=n+(u=a(u,0,M-n));if(X.r<i||X.b<n||X.x>G||X.y>U)R=0,O=0,B=0,N=0;else{var V=Math.max(X.x,i),z=Math.max(X.y,n),W=Math.min(X.r,G)-V,H=Math.min(X.b,U)-z;B=W,N=H,R=d?p+(S-(V-X.x)-W):p+(V-X.x),O=f?b+(M-(z-X.y)-H):b+(z-X.y),i=V,n=z,o=W,u=H}}else d&&(R=p+(S-i-o)),f&&(O=b+(M-n-u));var j=this.source.width,q=this.source.height;return t.u0=Math.max(0,R/j),t.v0=Math.max(0,O/q),t.u1=Math.min(1,(R+B)/j),t.v1=Math.min(1,(O+N)/q),t.x=i,t.y=n,t.cx=R,t.cy=O,t.cw=B,t.ch=N,t.width=o,t.height=u,t.flipX=d,t.flipY=f,t},updateCropUVs:function(t,i,n){return this.setCropUVs(t,t.x,t.y,t.width,t.height,i,n)},setUVs:function(t,i,n,o,a,u){var d=this.data.drawImage;return d.width=t,d.height=i,this.u0=n,this.v0=o,this.u1=a,this.v1=u,this},updateUVs:function(){var t=this.cutX,i=this.cutY,n=this.cutWidth,o=this.cutHeight,a=this.data.drawImage;a.width=n,a.height=o;var u=this.source.width,d=this.source.height;return this.u0=t/u,this.v0=i/d,this.u1=(t+n)/u,this.v1=(i+o)/d,this},updateUVsInverted:function(){var t=this.source.width,i=this.source.height;return this.u0=(this.cutX+this.cutHeight)/t,this.v0=this.cutY/i,this.u1=this.cutX/t,this.v1=(this.cutY+this.cutWidth)/i,this},clone:function(){var t=new d(this.texture,this.name,this.sourceIndex);return t.cutX=this.cutX,t.cutY=this.cutY,t.cutWidth=this.cutWidth,t.cutHeight=this.cutHeight,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t.halfWidth=this.halfWidth,t.halfHeight=this.halfHeight,t.centerX=this.centerX,t.centerY=this.centerY,t.rotated=this.rotated,t.data=u(!0,t.data,this.data),t.updateUVs(),t},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});t.exports=d},function(t,i,n){var o=n(208),a=n(0),u=n(1),d=n(79),f=new a({initialize:function List2(t){this.parent=t,this.list=[],this.position=0,this.addCallback=u,this.removeCallback=u,this._sortKey=""},add:function(t,i){return i?o.Add(this.list,t):o.Add(this.list,t,0,this.addCallback,this)},addAt:function(t,i,n){return n?o.AddAt(this.list,t,i):o.AddAt(this.list,t,i,0,this.addCallback,this)},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,i){return t?(void 0===i&&(i=function(i,n){return i[t]-n[t]}),d(this.list,i),this):this},getByName:function(t){return o.GetFirst(this.list,"name",t)},getRandom:function(t,i){return o.GetRandom(this.list,t,i)},getFirst:function(t,i,n,a){return o.GetFirst(this.list,t,i,n,a)},getAll:function(t,i,n,a){return o.GetAll(this.list,t,i,n,a)},count:function(t,i){return o.CountAllMatching(this.list,t,i)},swap:function(t,i){o.Swap(this.list,t,i)},moveTo:function(t,i){return o.MoveTo(this.list,t,i)},moveAbove:function(t,i){return o.MoveAbove(this.list,t,i)},moveBelow:function(t,i){return o.MoveBelow(this.list,t,i)},remove:function(t,i){return i?o.Remove(this.list,t):o.Remove(this.list,t,this.removeCallback,this)},removeAt:function(t,i){return i?o.RemoveAt(this.list,t):o.RemoveAt(this.list,t,this.removeCallback,this)},removeBetween:function(t,i,n){return n?o.RemoveBetween(this.list,t,i):o.RemoveBetween(this.list,t,i,this.removeCallback,this)},removeAll:function(t){for(var i=this.list.length;i--;)this.remove(this.list[i],t);return this},bringToTop:function(t){return o.BringToTop(this.list,t)},sendToBack:function(t){return o.SendToBack(this.list,t)},moveUp:function(t){return o.MoveUp(this.list,t),t},moveDown:function(t){return o.MoveDown(this.list,t),t},reverse:function(){return this.list.reverse(),this},shuffle:function(){return o.Shuffle(this.list),this},replace:function(t,i){return o.Replace(this.list,t,i)},exists:function(t){return this.list.indexOf(t)>-1},setAll:function(t,i,n,a){return o.SetAll(this.list,t,i,n,a),this},each:function(t,i){for(var n=[null],o=2;o<arguments.length;o++)n.push(arguments[o]);for(o=0;o<this.list.length;o++)n[0]=this.list[o],t.apply(i,n)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});t.exports=f},function(t,i,n){var o=n(0),a=n(112),u=n(445),d=n(446),f=n(56),p=n(180),b=new o({initialize:function Ellipse2(t,i,n,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),this.type=f.ELLIPSE,this.x=t,this.y=i,this.width=n,this.height=o},contains:function(t,i){return a(this,t,i)},getPoint:function(t,i){return u(this,t,i)},getPoints:function(t,i,n){return d(this,t,i,n)},getRandomPoint:function(t){return p(this,t)},setTo:function(t,i,n,o){return this.x=t,this.y=i,this.width=n,this.height=o,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setSize:function(t,i){return void 0===i&&(i=t),this.width=t,this.height=i,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(t){this.x=t+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(t){this.y=t+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});t.exports=b},function(t,i){t.exports=function(t,i,n){if(t.width<=0||t.height<=0)return!1;var o=(i-t.x)/t.width,a=(n-t.y)/t.height;return(o*=o)+(a*=a)<.25}},function(t,i,n){var o=n(275),a=n(0),u=n(75),d=n(9),f=n(207),p=n(2),b=n(6),S=n(7),M=n(437),C=n(149),P=n(73),R=new a({Extends:d,initialize:function Group3(t,i,n){d.call(this),n?i&&!Array.isArray(i)&&(i=[i]):Array.isArray(i)?S(i[0])&&(n=i,i=null):S(i)&&(n=i,i=null),this.scene=t,this.children=new C,this.isParent=!0,this.type="Group",this.classType=p(n,"classType",P),this.name=p(n,"name",""),this.active=p(n,"active",!0),this.maxSize=p(n,"maxSize",-1),this.defaultKey=p(n,"defaultKey",null),this.defaultFrame=p(n,"defaultFrame",null),this.runChildUpdate=p(n,"runChildUpdate",!1),this.createCallback=p(n,"createCallback",null),this.removeCallback=p(n,"removeCallback",null),this.createMultipleCallback=p(n,"createMultipleCallback",null),this.internalCreateCallback=p(n,"internalCreateCallback",null),this.internalRemoveCallback=p(n,"internalRemoveCallback",null),i&&this.addMultiple(i),n&&this.createMultiple(n),this.on(u.ADDED_TO_SCENE,this.addedToScene,this),this.on(u.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(t,i,n,o,a,u){if(void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=this.defaultKey),void 0===o&&(o=this.defaultFrame),void 0===a&&(a=!0),void 0===u&&(u=!0),this.isFull())return null;var d=new this.classType(this.scene,t,i,n,o);return d.addToDisplayList(this.scene.sys.displayList),d.addToUpdateList(),d.visible=a,d.setActive(u),this.add(d),d},createMultiple:function(t){if(this.isFull())return[];Array.isArray(t)||(t=[t]);var i=[];if(t[0].key)for(var n=0;n<t.length;n++){var o=this.createFromConfig(t[n]);i=i.concat(o)}return i},createFromConfig:function(t){if(this.isFull())return[];this.classType=p(t,"classType",this.classType);var i=p(t,"key",void 0),n=p(t,"frame",null),a=p(t,"visible",!0),u=p(t,"active",!0),d=[];if(void 0===i)return d;Array.isArray(i)||(i=[i]),Array.isArray(n)||(n=[n]);var f=p(t,"repeat",0),S=p(t,"randomKey",!1),C=p(t,"randomFrame",!1),P=p(t,"yoyo",!1),R=p(t,"quantity",!1),O=p(t,"frameQuantity",1),B=p(t,"max",0),N=M(i,n,{max:B,qty:R||O,random:S,randomB:C,repeat:f,yoyo:P});t.createCallback&&(this.createCallback=t.createCallback),t.removeCallback&&(this.removeCallback=t.removeCallback);for(var Y=0;Y<N.length;Y++){var X=this.create(0,0,N[Y].a,N[Y].b,a,u);if(!X)break;d.push(X)}var G=b(t,"setXY.x",0),U=b(t,"setXY.y",0),V=b(t,"setXY.stepX",0),z=b(t,"setXY.stepY",0);o.SetXY(d,G,U,V,z);var W=b(t,"setRotation.value",0),H=b(t,"setRotation.step",0);o.SetRotation(d,W,H);var j=b(t,"setScale.x",1),q=b(t,"setScale.y",j),Z=b(t,"setScale.stepX",0),K=b(t,"setScale.stepY",0);o.SetScale(d,j,q,Z,K);var $=b(t,"setOrigin.x",.5),tt=b(t,"setOrigin.y",$),et=b(t,"setOrigin.stepX",0),it=b(t,"setOrigin.stepY",0);o.SetOrigin(d,$,tt,et,it);var nt=b(t,"setAlpha.value",1),st=b(t,"setAlpha.step",0);o.SetAlpha(d,nt,st);var rt=b(t,"setDepth.value",0),ot=b(t,"setDepth.step",0);o.SetDepth(d,rt,ot);var at=b(t,"setScrollFactor.x",1),ht=b(t,"setScrollFactor.y",at),lt=b(t,"setScrollFactor.stepX",0),ut=b(t,"setScrollFactor.stepY",0);o.SetScrollFactor(d,at,ht,lt,ut);var ct=p(t,"hitArea",null),dt=p(t,"hitAreaCallback",null);ct&&o.SetHitArea(d,ct,dt);var ft=p(t,"gridAlign",!1);return ft&&o.GridAlign(d,ft),this.createMultipleCallback&&this.createMultipleCallback.call(this,d),d},preUpdate:function(t,i){if(this.runChildUpdate&&0!==this.children.size)for(var n=this.children.entries.slice(),o=0;o<n.length;o++){var a=n[o];a.active&&a.update(t,i)}},add:function(t,i){return void 0===i&&(i=!1),this.isFull()||(this.children.set(t),this.internalCreateCallback&&this.internalCreateCallback.call(this,t),this.createCallback&&this.createCallback.call(this,t),i&&(t.addToDisplayList(this.scene.sys.displayList),t.addToUpdateList()),t.on(u.DESTROY,this.remove,this)),this},addMultiple:function(t,i){if(void 0===i&&(i=!1),Array.isArray(t))for(var n=0;n<t.length;n++)this.add(t[n],i);return this},remove:function(t,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!1),this.children.contains(t)?(this.children.delete(t),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,t),this.removeCallback&&this.removeCallback.call(this,t),t.off(u.DESTROY,this.remove,this),n?t.destroy():i&&(t.removeFromDisplayList(),t.removeFromUpdateList()),this):this},clear:function(t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);for(var n=this.children,o=0;o<n.size;o++){var a=n.entries[o];a.off(u.DESTROY,this.remove,this),i?a.destroy():t&&(a.removeFromDisplayList(),a.removeFromUpdateList())}return this.children.clear(),this},contains:function(t){return this.children.contains(t)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(t,i,n,o){return f(this.children.entries,t,i,n,o)},getFirst:function(t,i,n,o,a,u,d){return this.getHandler(!0,1,t,i,n,o,a,u,d)},getFirstNth:function(t,i,n,o,a,u,d,f){return this.getHandler(!0,t,i,n,o,a,u,d,f)},getLast:function(t,i,n,o,a,u,d){return this.getHandler(!1,1,t,i,n,o,a,u,d)},getLastNth:function(t,i,n,o,a,u,d,f){return this.getHandler(!1,t,i,n,o,a,u,d,f)},getHandler:function(t,i,n,o,a,u,d,f,p){var b,S;void 0===n&&(n=!1),void 0===o&&(o=!1);var M=0,C=this.children.entries;if(t)for(S=0;S<C.length;S++)if((b=C[S]).active===n){if(++M===i)break}else b=null;else for(S=C.length-1;S>=0;S--)if((b=C[S]).active===n){if(++M===i)break}else b=null;return b?("number"==typeof a&&(b.x=a),"number"==typeof u&&(b.y=u),b):o?this.create(a,u,d,f,p):null},get:function(t,i,n,o,a){return this.getFirst(!1,!0,t,i,n,o,a)},getFirstAlive:function(t,i,n,o,a,u){return this.getFirst(!0,t,i,n,o,a,u)},getFirstDead:function(t,i,n,o,a,u){return this.getFirst(!1,t,i,n,o,a,u)},playAnimation:function(t,i){return o.PlayAnimation(this.children.entries,t,i),this},isFull:function(){return-1!==this.maxSize&&this.children.size>=this.maxSize},countActive:function(t){void 0===t&&(t=!0);for(var i=0,n=0;n<this.children.size;n++)this.children.entries[n].active===t&&i++;return i},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var t=this.getTotalUsed();return(-1===this.maxSize?999999999999:this.maxSize)-t},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},propertyValueSet:function(t,i,n,a,u){return o.PropertyValueSet(this.children.entries,t,i,n,a,u),this},propertyValueInc:function(t,i,n,a,u){return o.PropertyValueInc(this.children.entries,t,i,n,a,u),this},setX:function(t,i){return o.SetX(this.children.entries,t,i),this},setY:function(t,i){return o.SetY(this.children.entries,t,i),this},setXY:function(t,i,n,a){return o.SetXY(this.children.entries,t,i,n,a),this},incX:function(t,i){return o.IncX(this.children.entries,t,i),this},incY:function(t,i){return o.IncY(this.children.entries,t,i),this},incXY:function(t,i,n,a){return o.IncXY(this.children.entries,t,i,n,a),this},shiftPosition:function(t,i,n){return o.ShiftPosition(this.children.entries,t,i,n),this},angle:function(t,i){return o.Angle(this.children.entries,t,i),this},rotate:function(t,i){return o.Rotate(this.children.entries,t,i),this},rotateAround:function(t,i){return o.RotateAround(this.children.entries,t,i),this},rotateAroundDistance:function(t,i,n){return o.RotateAroundDistance(this.children.entries,t,i,n),this},setAlpha:function(t,i){return o.SetAlpha(this.children.entries,t,i),this},setTint:function(t,i,n,a){return o.SetTint(this.children.entries,t,i,n,a),this},setOrigin:function(t,i,n,a){return o.SetOrigin(this.children.entries,t,i,n,a),this},scaleX:function(t,i){return o.ScaleX(this.children.entries,t,i),this},scaleY:function(t,i){return o.ScaleY(this.children.entries,t,i),this},scaleXY:function(t,i,n,a){return o.ScaleXY(this.children.entries,t,i,n,a),this},setDepth:function(t,i){return o.SetDepth(this.children.entries,t,i),this},setBlendMode:function(t){return o.SetBlendMode(this.children.entries,t),this},setHitArea:function(t,i){return o.SetHitArea(this.children.entries,t,i),this},shuffle:function(){return o.Shuffle(this.children.entries),this},kill:function(t){this.children.contains(t)&&t.setActive(!1)},killAndHide:function(t){this.children.contains(t)&&(t.setActive(!1),t.setVisible(!1))},setVisible:function(t,i,n){return o.SetVisible(this.children.entries,t,i,n),this},toggleVisible:function(){return o.ToggleVisible(this.children.entries),this},destroy:function(t,i){void 0===t&&(t=!1),void 0===i&&(i=!1),this.scene&&!this.ignoreDestroy&&(this.emit(u.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(i,t),this.scene=void 0,this.children=void 0)}});t.exports=R},function(t,i,n){var o=n(12);t.exports=function(t,i,n,a,u,d){for(var f=o.getTintAppendFloatAlpha(n.fillColor,n.fillAlpha*a),p=n.pathData,b=n.pathIndexes,S=0;S<b.length;S+=3){var M=2*b[S],C=2*b[S+1],P=2*b[S+2],R=p[M+0]-u,O=p[M+1]-d,B=p[C+0]-u,N=p[C+1]-d,Y=p[P+0]-u,X=p[P+1]-d,G=i.getX(R,O),U=i.getY(R,O),V=i.getX(B,N),z=i.getY(B,N),W=i.getX(Y,X),H=i.getY(Y,X);t.batchTri(n,G,U,V,z,W,H,0,0,1,1,f,f,f,2)}}},function(t,i){t.exports=function(t,i,n){var o=t.x3-t.x1,a=t.y3-t.y1,u=t.x2-t.x1,d=t.y2-t.y1,f=i-t.x1,p=n-t.y1,b=o*o+a*a,S=o*u+a*d,M=o*f+a*p,C=u*u+d*d,P=u*f+d*p,R=b*C-S*S,O=0===R?0:1/R,B=(C*M-S*P)*O,N=(b*P-S*M)*O;return B>=0&&N>=0&&B+N<1}},function(t,i,n){var o=n(0),a=n(10),u=n(3);function GetLength(t,i,n,o){var a=t-n,u=i-o,d=a*a+u*u;return Math.sqrt(d)}var d=new o({initialize:function Face2(t,i,n){this.vertex1=t,this.vertex2=i,this.vertex3=n,this.bounds=new a,this._inCenter=new u},getInCenter:function(t){void 0===t&&(t=!0);var i,n,o,a,u,d,f=this.vertex1,p=this.vertex2,b=this.vertex3;t?(i=f.x,n=f.y,o=p.x,a=p.y,u=b.x,d=b.y):(i=f.vx,n=f.vy,o=p.vx,a=p.vy,u=b.vx,d=b.vy);var S=GetLength(u,d,o,a),M=GetLength(i,n,u,d),C=GetLength(o,a,i,n),P=S+M+C;return this._inCenter.set((i*S+o*M+u*C)/P,(n*S+a*M+d*C)/P)},contains:function(t,i,n){var o=this.vertex1,a=this.vertex2,u=this.vertex3,d=o.vx,f=o.vy,p=a.vx,b=a.vy,S=u.vx,M=u.vy;if(n){var C=n.a,P=n.b,R=n.c,O=n.d,B=n.e,N=n.f;d=o.vx*C+o.vy*R+B,f=o.vx*P+o.vy*O+N,p=a.vx*C+a.vy*R+B,b=a.vx*P+a.vy*O+N,S=u.vx*C+u.vy*R+B,M=u.vx*P+u.vy*O+N}var Y=S-d,X=M-f,G=p-d,U=b-f,V=t-d,z=i-f,W=Y*Y+X*X,H=Y*G+X*U,j=Y*V+X*z,q=G*G+U*U,Z=G*V+U*z,K=W*q-H*H,$=0===K?0:1/K,tt=(q*j-H*Z)*$,et=(W*Z-H*j)*$;return tt>=0&&et>=0&&tt+et<1},isCounterClockwise:function(t){var i=this.vertex1,n=this.vertex2,o=this.vertex3,a=(n.vx-i.vx)*(o.vy-i.vy)-(n.vy-i.vy)*(o.vx-i.vx);return t<=0?a>=0:a<0},load:function(t,i,n,o,a){return n=this.vertex1.load(t,i,n,o,a),n=this.vertex2.load(t,i,n,o,a),n=this.vertex3.load(t,i,n,o,a)},transformCoordinatesLocal:function(t,i,n,o){return this.vertex1.transformCoordinatesLocal(t,i,n,o),this.vertex2.transformCoordinatesLocal(t,i,n,o),this.vertex3.transformCoordinatesLocal(t,i,n,o),this},updateBounds:function(){var t=this.vertex1,i=this.vertex2,n=this.vertex3,o=this.bounds;return o.x=Math.min(t.vx,i.vx,n.vx),o.y=Math.min(t.vy,i.vy,n.vy),o.width=Math.max(t.vx,i.vx,n.vx)-o.x,o.height=Math.max(t.vy,i.vy,n.vy)-o.y,this},isInView:function(t,i,n,o,a,u,d,f,p,b,S){var M=this.vertex1.update(a,u,d,f,p,b,S,o),C=this.vertex2.update(a,u,d,f,p,b,S,o),P=this.vertex3.update(a,u,d,f,p,b,S,o);if(M.ta<=0&&C.ta<=0&&P.ta<=0)return!1;if(i&&!this.isCounterClockwise(n))return!1;var R=this.bounds;R.x=Math.min(M.tx,C.tx,P.tx),R.y=Math.min(M.ty,C.ty,P.ty),R.width=Math.max(M.tx,C.tx,P.tx)-R.x,R.height=Math.max(M.ty,C.ty,P.ty)-R.y;var O=t.x+t.width,B=t.y+t.height;return!(R.width<=0||R.height<=0||t.width<=0||t.height<=0||R.right<t.x||R.bottom<t.y||R.x>O||R.y>B)},translate:function(t,i){void 0===i&&(i=0);var n=this.vertex1,o=this.vertex2,a=this.vertex3;return n.x+=t,n.y+=i,o.x+=t,o.y+=i,a.x+=t,a.y+=i,this},x:{get:function(){return this.getInCenter().x},set:function(t){var i=this.getInCenter();this.translate(t-i.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(t){var i=this.getInCenter();this.translate(0,t-i.y)}},alpha:{get:function(){var t=this.vertex1,i=this.vertex2,n=this.vertex3;return(t.alpha+i.alpha+n.alpha)/3},set:function(t){this.vertex1.alpha=t,this.vertex2.alpha=t,this.vertex3.alpha=t}},depth:{get:function(){var t=this.vertex1,i=this.vertex2,n=this.vertex3;return(t.vz+i.vz+n.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});t.exports=d},function(t,i,n){var o=n(0),a=n(12),u=n(39),d=new o({Extends:u,initialize:function Vertex2(t,i,n,o,a,d,f,p,b,S){void 0===d&&(d=16777215),void 0===f&&(f=1),void 0===p&&(p=0),void 0===b&&(b=0),void 0===S&&(S=0),u.call(this,t,i,n),this.vx=0,this.vy=0,this.vz=0,this.nx=p,this.ny=b,this.nz=S,this.u=o,this.v=a,this.color=d,this.alpha=f,this.tx=0,this.ty=0,this.ta=0},setUVs:function(t,i){return this.u=t,this.v=i,this},transformCoordinatesLocal:function(t,i,n,o){var a=this.x,u=this.y,d=this.z,f=t.val,p=a*f[0]+u*f[4]+d*f[8]+f[12],b=a*f[1]+u*f[5]+d*f[9]+f[13],S=a*f[2]+u*f[6]+d*f[10]+f[14],M=a*f[3]+u*f[7]+d*f[11]+f[15];this.vx=p/M*i,this.vy=-b/M*n,this.vz=o<=0?S/M:-S/M},update:function(t,i,n,o,a,u,d,f){var p=this.vx*t+this.vy*n+a,b=this.vx*i+this.vy*o+u;return d&&(p=Math.round(p),b=Math.round(b)),this.tx=p,this.ty=b,this.ta=this.alpha*f,this},load:function(t,i,n,o,u){return t[++n]=this.tx,t[++n]=this.ty,t[++n]=this.u,t[++n]=this.v,t[++n]=o,t[++n]=u,i[++n]=a.getTintAppendFloatAlpha(this.color,this.ta),n}});t.exports=d},function(t,i,n){var o={};t.exports=o;var a=n(166),u=n(32),d=n(84),f=n(41);o.create=function(t){return u.extend({id:u.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},t)},o.setModified=function(t,i,n,u){if(a.trigger(t,"compositeModified",t),t.isModified=i,n&&t.parent&&o.setModified(t.parent,i,n,u),u)for(var d=0;d<t.composites.length;d++){var f=t.composites[d];o.setModified(f,i,n,u)}},o.add=function(t,i){var n=[].concat(i);a.trigger(t,"beforeAdd",{object:i});for(var d=0;d<n.length;d++){var f=n[d];switch(f.type){case"body":if(f.parent!==f){u.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}o.addBody(t,f);break;case"constraint":o.addConstraint(t,f);break;case"composite":o.addComposite(t,f);break;case"mouseConstraint":o.addConstraint(t,f.constraint)}}return a.trigger(t,"afterAdd",{object:i}),t},o.remove=function(t,i,n){var u=[].concat(i);a.trigger(t,"beforeRemove",{object:i});for(var d=0;d<u.length;d++){var f=u[d];switch(f.type){case"body":o.removeBody(t,f,n);break;case"constraint":o.removeConstraint(t,f,n);break;case"composite":o.removeComposite(t,f,n);break;case"mouseConstraint":o.removeConstraint(t,f.constraint)}}return a.trigger(t,"afterRemove",{object:i}),t},o.addComposite=function(t,i){return t.composites.push(i),i.parent=t,o.setModified(t,!0,!0,!1),t},o.removeComposite=function(t,i,n){var a=t.composites.indexOf(i);if(-1!==a&&(o.removeCompositeAt(t,a),o.setModified(t,!0,!0,!1)),n)for(var u=0;u<t.composites.length;u++)o.removeComposite(t.composites[u],i,!0);return t},o.removeCompositeAt=function(t,i){return t.composites.splice(i,1),o.setModified(t,!0,!0,!1),t},o.addBody=function(t,i){return t.bodies.push(i),o.setModified(t,!0,!0,!1),t},o.removeBody=function(t,i,n){var a=t.bodies.indexOf(i);if(-1!==a&&(o.removeBodyAt(t,a),o.setModified(t,!0,!0,!1)),n)for(var u=0;u<t.composites.length;u++)o.removeBody(t.composites[u],i,!0);return t},o.removeBodyAt=function(t,i){return t.bodies.splice(i,1),o.setModified(t,!0,!0,!1),t},o.addConstraint=function(t,i){return t.constraints.push(i),o.setModified(t,!0,!0,!1),t},o.removeConstraint=function(t,i,n){var a=t.constraints.indexOf(i);if(-1!==a&&o.removeConstraintAt(t,a),n)for(var u=0;u<t.composites.length;u++)o.removeConstraint(t.composites[u],i,!0);return t},o.removeConstraintAt=function(t,i){return t.constraints.splice(i,1),o.setModified(t,!0,!0,!1),t},o.clear=function(t,i,n){if(n)for(var a=0;a<t.composites.length;a++)o.clear(t.composites[a],i,!0);return i?t.bodies=t.bodies.filter((function(t){return t.isStatic})):t.bodies.length=0,t.constraints.length=0,t.composites.length=0,o.setModified(t,!0,!0,!1),t},o.allBodies=function(t){for(var i=[].concat(t.bodies),n=0;n<t.composites.length;n++)i=i.concat(o.allBodies(t.composites[n]));return i},o.allConstraints=function(t){for(var i=[].concat(t.constraints),n=0;n<t.composites.length;n++)i=i.concat(o.allConstraints(t.composites[n]));return i},o.allComposites=function(t){for(var i=[].concat(t.composites),n=0;n<t.composites.length;n++)i=i.concat(o.allComposites(t.composites[n]));return i},o.get=function(t,i,n){var a,u;switch(n){case"body":a=o.allBodies(t);break;case"constraint":a=o.allConstraints(t);break;case"composite":a=o.allComposites(t).concat(t)}return a?0===(u=a.filter((function(t){return t.id.toString()===i.toString()}))).length?null:u[0]:null},o.move=function(t,i,n){return o.remove(t,i),o.add(n,i),t},o.rebase=function(t){for(var i=o.allBodies(t).concat(o.allConstraints(t)).concat(o.allComposites(t)),n=0;n<i.length;n++)i[n].id=u.nextId();return o.setModified(t,!0,!0,!1),t},o.translate=function(t,i,n){for(var a=n?o.allBodies(t):t.bodies,u=0;u<a.length;u++)f.translate(a[u],i);return o.setModified(t,!0,!0,!1),t},o.rotate=function(t,i,n,a){for(var u=Math.cos(i),d=Math.sin(i),p=a?o.allBodies(t):t.bodies,b=0;b<p.length;b++){var S=p[b],M=S.position.x-n.x,C=S.position.y-n.y;f.setPosition(S,{x:n.x+(M*u-C*d),y:n.y+(M*d+C*u)}),f.rotate(S,i)}return o.setModified(t,!0,!0,!1),t},o.scale=function(t,i,n,a,u){for(var d=u?o.allBodies(t):t.bodies,p=0;p<d.length;p++){var b=d[p],S=b.position.x-a.x,M=b.position.y-a.y;f.setPosition(b,{x:a.x+S*i,y:a.y+M*n}),f.scale(b,i,n)}return o.setModified(t,!0,!0,!1),t},o.bounds=function(t){for(var i=o.allBodies(t),n=[],a=0;a<i.length;a+=1){var u=i[a];n.push(u.bounds.min,u.bounds.max)}return d.create(n)}},function(t,i){t.exports=function(t,i,n){return t>=0&&t<n.width&&i>=0&&i<n.height}},function(t,i,n){var o=n(0),a=n(29),u=n(2),d=new o({initialize:function LayerData2(t){void 0===t&&(t={}),this.name=u(t,"name","layer"),this.x=u(t,"x",0),this.y=u(t,"y",0),this.width=u(t,"width",0),this.height=u(t,"height",0),this.tileWidth=u(t,"tileWidth",0),this.tileHeight=u(t,"tileHeight",0),this.baseTileWidth=u(t,"baseTileWidth",this.tileWidth),this.baseTileHeight=u(t,"baseTileHeight",this.tileHeight),this.orientation=u(t,"orientation",a.ORTHOGONAL),this.widthInPixels=u(t,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=u(t,"heightInPixels",this.height*this.baseTileHeight),this.alpha=u(t,"alpha",1),this.visible=u(t,"visible",!0),this.properties=u(t,"properties",[]),this.indexes=u(t,"indexes",[]),this.collideIndexes=u(t,"collideIndexes",[]),this.callbacks=u(t,"callbacks",[]),this.bodies=u(t,"bodies",[]),this.data=u(t,"data",[]),this.tilemapLayer=u(t,"tilemapLayer",null),this.hexSideLength=u(t,"hexSideLength",0)}});t.exports=d},function(t,i,n){var o=n(0),a=n(29),u=n(2),d=new o({initialize:function MapData2(t){void 0===t&&(t={}),this.name=u(t,"name","map"),this.width=u(t,"width",0),this.height=u(t,"height",0),this.infinite=u(t,"infinite",!1),this.tileWidth=u(t,"tileWidth",0),this.tileHeight=u(t,"tileHeight",0),this.widthInPixels=u(t,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=u(t,"heightInPixels",this.height*this.tileHeight),this.format=u(t,"format",null),this.orientation=u(t,"orientation",a.ORTHOGONAL),this.renderOrder=u(t,"renderOrder","right-down"),this.version=u(t,"version","1"),this.properties=u(t,"properties",{}),this.layers=u(t,"layers",[]),this.images=u(t,"images",[]),this.objects=u(t,"objects",{}),this.collision=u(t,"collision",{}),this.tilesets=u(t,"tilesets",[]),this.imageCollections=u(t,"imageCollections",[]),this.tiles=u(t,"tiles",[]),this.hexSideLength=u(t,"hexSideLength",0)}});t.exports=d},function(t,i,n){var o=new(n(0))({initialize:function Tileset2(t,i,n,o,a,u,d,f){(void 0===n||n<=0)&&(n=32),(void 0===o||o<=0)&&(o=32),void 0===a&&(a=0),void 0===u&&(u=0),void 0===d&&(d={}),void 0===f&&(f={}),this.name=t,this.firstgid=i,this.tileWidth=n,this.tileHeight=o,this.tileMargin=a,this.tileSpacing=u,this.tileProperties=d,this.tileData=f,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(t){return this.containsTileIndex(t)?this.tileProperties[t-this.firstgid]:null},getTileData:function(t){return this.containsTileIndex(t)?this.tileData[t-this.firstgid]:null},getTileCollisionGroup:function(t){var i=this.getTileData(t);return i&&i.objectgroup?i.objectgroup:null},containsTileIndex:function(t){return t>=this.firstgid&&t<this.firstgid+this.total},getTileTextureCoordinates:function(t){return this.containsTileIndex(t)?this.texCoordinates[t-this.firstgid]:null},setImage:function(t){return this.image=t,this.glTexture=t.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(t,i){return void 0!==t&&(this.tileWidth=t),void 0!==i&&(this.tileHeight=i),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(t,i){return void 0!==t&&(this.tileMargin=t),void 0!==i&&(this.tileSpacing=i),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(t,i){var n=(i-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),o=(t-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);n%1==0&&o%1==0||console.warn("Image tile area not tile size multiple in: "+this.name),n=Math.floor(n),o=Math.floor(o),this.rows=n,this.columns=o,this.total=n*o,this.texCoordinates.length=0;for(var a=this.tileMargin,u=this.tileMargin,d=0;d<this.rows;d++){for(var f=0;f<this.columns;f++)this.texCoordinates.push({x:a,y:u}),a+=this.tileWidth+this.tileSpacing;a=this.tileMargin,u+=this.tileHeight+this.tileSpacing}return this}});t.exports=o},function(t,i){t.exports={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12}},function(t,i){t.exports=function(t,i,n){return void 0===n&&(n=1e-4),Math.abs(t-i)<n}},function(t,i,n){var o=n(0),a=n(11),u=n(15),d=n(1068),f=new o({Extends:u,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Size,a.TextureCrop,a.Tint,a.Transform,a.Visible,d],initialize:function Image3(t,i,n,o,a){u.call(this,t,"Image"),this._crop=this.resetCropObject(),this.setTexture(o,a),this.setPosition(i,n),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});t.exports=f},function(t,i){t.exports=function(t,i){return t.hasOwnProperty(i)}},function(t,i,n){var o=n(77);t.exports=function(t,i){var n=o(t);for(var a in i)n.hasOwnProperty(a)||(n[a]=i[a]);return n}},function(t,i,n){var o={};t.exports=o;var a=n(64),u=n(83),d=n(165),f=n(84),p=n(271),b=n(32);o._warming=.4,o._torqueDampen=1,o._minLength=1e-6,o.create=function(t){var i=t;i.bodyA&&!i.pointA&&(i.pointA={x:0,y:0}),i.bodyB&&!i.pointB&&(i.pointB={x:0,y:0});var n=i.bodyA?u.add(i.bodyA.position,i.pointA):i.pointA,o=i.bodyB?u.add(i.bodyB.position,i.pointB):i.pointB,a=u.magnitude(u.sub(n,o));i.length=void 0!==i.length?i.length:a,i.id=i.id||b.nextId(),i.label=i.label||"Constraint",i.type="constraint",i.stiffness=i.stiffness||(i.length>0?1:.7),i.damping=i.damping||0,i.angularStiffness=i.angularStiffness||0,i.angleA=i.bodyA?i.bodyA.angle:i.angleA,i.angleB=i.bodyB?i.bodyB.angle:i.angleB,i.plugin={};var d={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return 0===i.length&&i.stiffness>.1?(d.type="pin",d.anchors=!1):i.stiffness<.9&&(d.type="spring"),i.render=b.extend(d,i.render),i},o.preSolveAll=function(t){for(var i=0;i<t.length;i+=1){var n=t[i],o=n.constraintImpulse;n.isStatic||0===o.x&&0===o.y&&0===o.angle||(n.position.x+=o.x,n.position.y+=o.y,n.angle+=o.angle)}},o.solveAll=function(t,i){for(var n=0;n<t.length;n+=1){var a=t[n],u=!a.bodyA||a.bodyA&&a.bodyA.isStatic,d=!a.bodyB||a.bodyB&&a.bodyB.isStatic;(u||d)&&o.solve(t[n],i)}for(n=0;n<t.length;n+=1)u=!(a=t[n]).bodyA||a.bodyA&&a.bodyA.isStatic,d=!a.bodyB||a.bodyB&&a.bodyB.isStatic,u||d||o.solve(t[n],i)},o.solve=function(t,i){var n=t.bodyA,a=t.bodyB,d=t.pointA,f=t.pointB;if(n||a){n&&!n.isStatic&&(u.rotate(d,n.angle-t.angleA,d),t.angleA=n.angle),a&&!a.isStatic&&(u.rotate(f,a.angle-t.angleB,f),t.angleB=a.angle);var p=d,b=f;if(n&&(p=u.add(n.position,d)),a&&(b=u.add(a.position,f)),p&&b){var S=u.sub(p,b),M=u.magnitude(S);M<o._minLength&&(M=o._minLength);var C,P,R,O,B,N=(M-t.length)/M,Y=t.stiffness<1?t.stiffness*i:t.stiffness,X=u.mult(S,N*Y),G=(n?n.inverseMass:0)+(a?a.inverseMass:0),U=G+((n?n.inverseInertia:0)+(a?a.inverseInertia:0));if(t.damping){var V=u.create();R=u.div(S,M),B=u.sub(a&&u.sub(a.position,a.positionPrev)||V,n&&u.sub(n.position,n.positionPrev)||V),O=u.dot(R,B)}n&&!n.isStatic&&(P=n.inverseMass/G,n.constraintImpulse.x-=X.x*P,n.constraintImpulse.y-=X.y*P,n.position.x-=X.x*P,n.position.y-=X.y*P,t.damping&&(n.positionPrev.x-=t.damping*R.x*O*P,n.positionPrev.y-=t.damping*R.y*O*P),C=u.cross(d,X)/U*o._torqueDampen*n.inverseInertia*(1-t.angularStiffness),n.constraintImpulse.angle-=C,n.angle-=C),a&&!a.isStatic&&(P=a.inverseMass/G,a.constraintImpulse.x+=X.x*P,a.constraintImpulse.y+=X.y*P,a.position.x+=X.x*P,a.position.y+=X.y*P,t.damping&&(a.positionPrev.x+=t.damping*R.x*O*P,a.positionPrev.y+=t.damping*R.y*O*P),C=u.cross(f,X)/U*o._torqueDampen*a.inverseInertia*(1-t.angularStiffness),a.constraintImpulse.angle+=C,a.angle+=C)}}},o.postSolveAll=function(t){for(var i=0;i<t.length;i++){var n=t[i],b=n.constraintImpulse;if(!(n.isStatic||0===b.x&&0===b.y&&0===b.angle)){d.set(n,!1);for(var S=0;S<n.parts.length;S++){var M=n.parts[S];a.translate(M.vertices,b),S>0&&(M.position.x+=b.x,M.position.y+=b.y),0!==b.angle&&(a.rotate(M.vertices,b.angle,n.position),p.rotate(M.axes,b.angle),S>0&&u.rotateAbout(M.position,b.angle,n.position,M.position)),f.update(M.bounds,M.vertices,n.velocity)}b.angle*=o._warming,b.x*=o._warming,b.y*=o._warming}}},o.pointAWorld=function(t){return{x:(t.bodyA?t.bodyA.position.x:0)+t.pointA.x,y:(t.bodyA?t.bodyA.position.y:0)+t.pointA.y}},o.pointBWorld=function(t){return{x:(t.bodyB?t.bodyB.position.x:0)+t.pointB.x,y:(t.bodyB?t.bodyB.position.y:0)+t.pointB.y}}},function(t,i,n){var o=n(35),a=n(65),u=n(66),d=n(0),f=n(11),p=n(15),b=n(10),S=n(57),M=new d({Extends:p,Mixins:[f.Depth,f.GetBounds,f.Origin,f.Transform,f.ScrollFactor,f.Visible],initialize:function Zone3(t,i,n,a,u){void 0===a&&(a=1),void 0===u&&(u=a),p.call(this,t,"Zone"),this.setPosition(i,n),this.width=a,this.height=u,this.blendMode=o.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,i,n){void 0===n&&(n=!0),this.width=t,this.height=i,this.updateDisplayOrigin();var o=this.input;return n&&o&&!o.customHitArea&&(o.hitArea.width=t,o.hitArea.height=i),this},setDisplaySize:function(t,i){return this.displayWidth=t,this.displayHeight=i,this},setCircleDropZone:function(t){return this.setDropZone(new a(0,0,t),u)},setRectangleDropZone:function(t,i){return this.setDropZone(new b(0,0,t,i),S)},setDropZone:function(t,i){return void 0===t?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(t,i,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(t,i,n){n.addToRenderList(i)},renderWebGL:function(t,i,n){n.addToRenderList(i)}});t.exports=M},function(t,i){t.exports=function(t){return 2*(t.width+t.height)}},function(t,i){t.exports=function(t){for(var i=t.length-1;i>0;i--){var n=Math.floor(Math.random()*(i+1)),o=t[i];t[i]=t[n],t[n]=o}return t}},function(t,i,n){t.exports={ADD_ANIMATION:n(724),ANIMATION_COMPLETE:n(725),ANIMATION_COMPLETE_KEY:n(726),ANIMATION_REPEAT:n(727),ANIMATION_RESTART:n(728),ANIMATION_START:n(729),ANIMATION_STOP:n(730),ANIMATION_UPDATE:n(731),PAUSE_ALL:n(732),REMOVE_ANIMATION:n(733),RESUME_ALL:n(734)}},function(t,i,n){var o=n(0),a=n(11),u=n(36),d=n(9),f=n(37),p=n(10),b=n(25),S=n(187),M=n(3),C=new o({Extends:d,Mixins:[a.Alpha,a.Visible],initialize:function BaseCamera2(t,i,n,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),d.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new p,this.dirty=!0,this._x=t,this._y=i,this._width=n,this._height=o,this._bounds=new p,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new b,this.transparent=!0,this.backgroundColor=S("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new M(n/2,o/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function(t){this.renderList.push(t)},setOrigin:function(t,i){return void 0===t&&(t=.5),void 0===i&&(i=t),this.originX=t,this.originY=i,this},getScroll:function(t,i,n){void 0===n&&(n=new M);var o=.5*this.width,a=.5*this.height;return n.x=t-o,n.y=i-a,this.useBounds&&(n.x=this.clampX(n.x),n.y=this.clampY(n.y)),n},centerOnX:function(t){var i=.5*this.width;return this.midPoint.x=t,this.scrollX=t-i,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(t){var i=.5*this.height;return this.midPoint.y=t,this.scrollY=t-i,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(t,i){return this.centerOnX(t),this.centerOnY(i),this},centerToBounds:function(){if(this.useBounds){var t=this._bounds,i=.5*this.width,n=.5*this.height;this.midPoint.set(t.centerX,t.centerY),this.scrollX=t.centerX-i,this.scrollY=t.centerY-n}return this},centerToSize:function(){return this.scrollX=.5*this.width,this.scrollY=.5*this.height,this},cull:function(t){if(this.disableCull)return t;var i=this.matrix.matrix,n=i[0],o=i[1],a=i[2],u=i[3],d=n*u-o*a;if(!d)return t;var f=i[4],p=i[5],b=this.scrollX,S=this.scrollY,M=this.width,C=this.height,P=this.y,R=P+C,O=this.x,B=O+M,N=this.culledObjects,Y=t.length;d=1/d,N.length=0;for(var X=0;X<Y;++X){var G=t[X];if(G.hasOwnProperty("width")&&!G.parentContainer){var U=G.width,V=G.height,z=G.x-b*G.scrollFactorX-U*G.originX,W=G.y-S*G.scrollFactorY-V*G.originY;(z+U)*n+(W+V)*a+f>O&&z*n+W*a+f<B&&(z+U)*o+(W+V)*u+p>P&&z*o+W*u+p<R&&N.push(G)}else N.push(G)}return N},getWorldPoint:function(t,i,n){void 0===n&&(n=new M);var o=this.matrix.matrix,a=o[0],u=o[1],d=o[2],f=o[3],p=o[4],b=o[5],S=a*f-u*d;if(!S)return n.x=t,n.y=i,n;var C=f*(S=1/S),P=-u*S,R=-d*S,O=a*S,B=(d*b-f*p)*S,N=(u*p-a*b)*S,Y=Math.cos(this.rotation),X=Math.sin(this.rotation),G=this.zoomX,U=this.zoomY,V=this.scrollX,z=this.scrollY,W=t+(V*Y-z*X)*G,H=i+(V*X+z*Y)*U;return n.x=W*C+H*R+B,n.y=W*P+H*O+N,n},ignore:function(t){var i=this.id;Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var o=t[n];Array.isArray(o)?this.ignore(o):o.isParent?this.ignore(o.getChildren()):o.cameraFilter|=i}return this},preRender:function(){this.renderList.length=0;var t=this.width,i=this.height,n=.5*t,o=.5*i,a=this.zoomX,u=this.zoomY,d=this.matrix,f=t*this.originX,p=i*this.originY,b=this.scrollX,S=this.scrollY;this.useBounds&&(b=this.clampX(b),S=this.clampY(S)),this.roundPixels&&(f=Math.round(f),p=Math.round(p)),this.scrollX=b,this.scrollY=S;var M=b+n,C=S+o;this.midPoint.set(M,C);var P=t/a,R=i/u;this.worldView.setTo(M-P/2,C-R/2,P,R),d.applyITRS(this.x+f,this.y+p,this.rotation,a,u),d.translate(-f,-p)},clampX:function(t){var i=this._bounds,n=this.displayWidth,o=i.x+(n-this.width)/2,a=Math.max(o,o+i.width-n);return t<o?t=o:t>a&&(t=a),t},clampY:function(t){var i=this._bounds,n=this.displayHeight,o=i.y+(n-this.height)/2,a=Math.max(o,o+i.height-n);return t<o?t=o:t>a&&(t=a),t},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(t){return void 0===t&&(t=0),this.rotation=u(t),this},setBackgroundColor:function(t){return void 0===t&&(t="rgba(0,0,0,0)"),this.backgroundColor=S(t),this.transparent=0===this.backgroundColor.alpha,this},setBounds:function(t,i,n,o,a){return void 0===a&&(a=!1),this._bounds.setTo(t,i,n,o),this.dirty=!0,this.useBounds=!0,a?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(t){void 0===t&&(t=new p);var i=this._bounds;return t.setTo(i.x,i.y,i.width,i.height),t},setName:function(t){return void 0===t&&(t=""),this.name=t,this},setPosition:function(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setRotation:function(t){return void 0===t&&(t=0),this.rotation=t,this},setRoundPixels:function(t){return this.roundPixels=t,this},setScene:function(t){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=t;var i=t.sys;return this.sceneManager=i.game.scene,this.scaleManager=i.scale,this.cameraManager=i.cameras,this.updateSystem(),this},setScroll:function(t,i){return void 0===i&&(i=t),this.scrollX=t,this.scrollY=i,this},setSize:function(t,i){return void 0===i&&(i=t),this.width=t,this.height=i,this},setViewport:function(t,i,n,o){return this.x=t,this.y=i,this.width=n,this.height=o,this},setZoom:function(t,i){return void 0===t&&(t=1),void 0===i&&(i=t),0===t&&(t=.001),0===i&&(i=.001),this.zoomX=t,this.zoomY=i,this},setMask:function(t,i){return void 0===i&&(i=!0),this.mask=t,this._maskCamera=i?this.cameraManager.default:this,this},clearMask:function(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var t={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(t.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),t},update:function(){},updateSystem:function(){if(this.scaleManager){var t=0!==this._x||0!==this._y||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,i=this.sceneManager;t&&!this._customViewport?i.customViewports++:!t&&this._customViewport&&i.customViewports--,this.dirty=!0,this._customViewport=t}},destroy:function(){this.emit(f.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(t){this._x=t,this.updateSystem()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.updateSystem()}},width:{get:function(){return this._width},set:function(t){this._width=t,this.updateSystem()}},height:{get:function(){return this._height},set:function(t){this._height=t,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(t){this._scrollX=t,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(t){this._scrollY=t,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(t){this._zoomX=t,this._zoomY=t,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(t){this._zoomX=t,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(t){this._zoomY=t,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=t,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});t.exports=C},function(t,i,n){var o=n(334),a=n(335),u=n(336),d=n(337),f=n(338),p=n(339),b=n(340),S=n(341),M=n(342),C=n(343),P=n(344),R=n(345);t.exports={Power0:b,Power1:S.Out,Power2:d.Out,Power3:M.Out,Power4:C.Out,Linear:b,Quad:S.Out,Cubic:d.Out,Quart:M.Out,Quint:C.Out,Sine:P.Out,Expo:p.Out,Circ:u.Out,Elastic:f.Out,Back:o.Out,Bounce:a.Out,Stepped:R,"Quad.easeIn":S.In,"Cubic.easeIn":d.In,"Quart.easeIn":M.In,"Quint.easeIn":C.In,"Sine.easeIn":P.In,"Expo.easeIn":p.In,"Circ.easeIn":u.In,"Elastic.easeIn":f.In,"Back.easeIn":o.In,"Bounce.easeIn":a.In,"Quad.easeOut":S.Out,"Cubic.easeOut":d.Out,"Quart.easeOut":M.Out,"Quint.easeOut":C.Out,"Sine.easeOut":P.Out,"Expo.easeOut":p.Out,"Circ.easeOut":u.Out,"Elastic.easeOut":f.Out,"Back.easeOut":o.Out,"Bounce.easeOut":a.Out,"Quad.easeInOut":S.InOut,"Cubic.easeInOut":d.InOut,"Quart.easeInOut":M.InOut,"Quint.easeInOut":C.InOut,"Sine.easeInOut":P.InOut,"Expo.easeInOut":p.InOut,"Circ.easeInOut":u.InOut,"Elastic.easeInOut":f.InOut,"Back.easeInOut":o.InOut,"Bounce.easeInOut":a.InOut}},function(t,i){t.exports=function(t,i,n){return(i-t)*n+t}},function(t,i,n){var o=n(105),a={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};t.exports=function init(){var t=navigator.userAgent;return/Edge\/\d+/.test(t)?a.edge=!0:/Chrome\/(\d+)/.test(t)&&!o.windowsPhone?(a.chrome=!0,a.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(t)?(a.firefox=!0,a.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(t)&&o.iOS?a.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(t)?(a.ie=!0,a.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(t)?a.opera=!0:/Safari/.test(t)&&!o.windowsPhone?a.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(t)&&(a.ie=!0,a.trident=!0,a.tridentVersion=parseInt(RegExp.$1,10),a.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(t)&&(a.silk=!0),a}()},function(t,i){t.exports=function(t,i){return Math.random()*(i-t)+t}},function(t,i){t.exports=function(t,i){return t>0&&0==(t&t-1)&&i>0&&0==(i&i-1)}},function(t,i){t.exports=function(t,i,n,o){return void 0===n&&(n=0),0===i?t:(t-=n,t=i*Math.ceil(t/i),o?(n+t)/i:n+t)}},function(t,i,n){var o=new(n(0))({initialize:function Vector42(t,i,n,o){this.x=0,this.y=0,this.z=0,this.w=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=n||0,this.w=o||0)},clone:function(){return new o(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this.w=t.w||0,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},set:function(t,i,n,o){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=n||0,this.w=o||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this.w+=t.w||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this.w-=t.w||0,this},scale:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function(){var t=this.x,i=this.y,n=this.z,o=this.w;return Math.sqrt(t*t+i*i+n*n+o*o)},lengthSq:function(){var t=this.x,i=this.y,n=this.z,o=this.w;return t*t+i*i+n*n+o*o},normalize:function(){var t=this.x,i=this.y,n=this.z,o=this.w,a=t*t+i*i+n*n+o*o;return a>0&&(a=1/Math.sqrt(a),this.x=t*a,this.y=i*a,this.z=n*a,this.w=o*a),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,i){void 0===i&&(i=0);var n=this.x,o=this.y,a=this.z,u=this.w;return this.x=n+i*(t.x-n),this.y=o+i*(t.y-o),this.z=a+i*(t.z-a),this.w=u+i*(t.w-u),this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this.w*=t.w||1,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this.w/=t.w||1,this},distance:function(t){var i=t.x-this.x,n=t.y-this.y,o=t.z-this.z||0,a=t.w-this.w||0;return Math.sqrt(i*i+n*n+o*o+a*a)},distanceSq:function(t){var i=t.x-this.x,n=t.y-this.y,o=t.z-this.z||0,a=t.w-this.w||0;return i*i+n*n+o*o+a*a},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(t){var i=this.x,n=this.y,o=this.z,a=this.w,u=t.val;return this.x=u[0]*i+u[4]*n+u[8]*o+u[12]*a,this.y=u[1]*i+u[5]*n+u[9]*o+u[13]*a,this.z=u[2]*i+u[6]*n+u[10]*o+u[14]*a,this.w=u[3]*i+u[7]*n+u[11]*o+u[15]*a,this},transformQuat:function(t){var i=this.x,n=this.y,o=this.z,a=t.x,u=t.y,d=t.z,f=t.w,p=f*i+u*o-d*n,b=f*n+d*i-a*o,S=f*o+a*n-u*i,M=-a*i-u*n-d*o;return this.x=p*f+M*-a+b*-d-S*-u,this.y=b*f+M*-u+S*-a-p*-d,this.z=S*f+M*-d+p*-u-b*-a,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});o.prototype.sub=o.prototype.subtract,o.prototype.mul=o.prototype.multiply,o.prototype.div=o.prototype.divide,o.prototype.dist=o.prototype.distance,o.prototype.distSq=o.prototype.distanceSq,o.prototype.len=o.prototype.length,o.prototype.lenSq=o.prototype.lengthSq,t.exports=o},function(t,i,n){var o=n(0),a=n(91),u=new o({initialize:function RenderTarget2(t,i,n,o,a,u,d){void 0===o&&(o=1),void 0===a&&(a=0),void 0===u&&(u=!0),void 0===d&&(d=!1),this.renderer=t,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=o,this.minFilter=a,this.autoClear=u,this.autoResize=!1,this.resize(i,n),d&&this.setAutoResize(!0)},setAutoResize:function(t){return t&&!this.autoResize?(this.renderer.on(a.RESIZE,this.resize,this),this.autoResize=!0):!t&&this.autoResize&&(this.renderer.off(a.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(t,i){var n=t*this.scale,o=i*this.scale;if(n!==this.width||o!==this.height){var a=this.renderer;a.deleteFramebuffer(this.framebuffer),a.deleteTexture(this.texture),t*=this.scale,i*=this.scale,(t=Math.round(t))<=0&&(t=1),(i=Math.round(i))<=0&&(i=1),this.texture=a.createTextureFromSource(null,t,i,this.minFilter),this.framebuffer=a.createFramebuffer(t,i,this.texture,!1),this.width=t,this.height=i}return this},bind:function(t,i,n){if(void 0===t&&(t=!1),t&&this.renderer.flush(),i&&n&&this.resize(i,n),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),t&&this.adjustViewport(),this.autoClear){var o=this.renderer.gl;o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT)}},adjustViewport:function(){var t=this.renderer.gl;t.viewport(0,0,this.width,this.height),t.disable(t.SCISSOR_TEST)},clear:function(){var t=this.renderer,i=t.gl;t.pushFramebuffer(this.framebuffer),i.disable(i.SCISSOR_TEST),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),t.popFramebuffer(),t.resetScissor()},unbind:function(t){void 0===t&&(t=!1);var i=this.renderer;return t&&i.flush(),i.popFramebuffer()},destroy:function(){var t=this.renderer;t.deleteFramebuffer(this.framebuffer),t.deleteTexture(this.texture),t.off(a.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});t.exports=u},function(t,i){t.exports=function(t,i){var n;if(i)"string"==typeof i?n=document.getElementById(i):"object"==typeof i&&1===i.nodeType&&(n=i);else if(t.parentElement||null===i)return t;return n||(n=document.body),n.appendChild(t),t}},function(t,i){t.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175}},function(t,i){t.exports={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9}},function(t,i,n){var o=n(0),a=n(77),u=n(9),d=n(70),f=n(22),p=n(1),b=n(207),S=n(428),M=new o({Extends:u,initialize:function BaseSoundManager2(t){u.call(this),this.game=t,this.jsonCache=t.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,t.events.on(f.BLUR,this.onGameBlur,this),t.events.on(f.FOCUS,this.onGameFocus,this),t.events.on(f.PRE_STEP,this.update,this),t.events.once(f.DESTROY,this.destroy,this)},add:p,addAudioSprite:function(t,i){void 0===i&&(i={});var n=this.add(t,i);for(var o in n.spritemap=this.jsonCache.get(t).spritemap,n.spritemap)if(n.spritemap.hasOwnProperty(o)){var u=a(i),d=n.spritemap[o];u.loop=!!d.hasOwnProperty("loop")&&d.loop,n.addMarker({name:o,start:d.start,duration:d.end-d.start,config:u})}return n},get:function(t){return S(this.sounds,"key",t)},getAll:function(t){return b(this.sounds,"key",t)},play:function(t,i){var n=this.add(t);return n.once(d.COMPLETE,n.destroy,n),i?i.name?(n.addMarker(i),n.play(i.name)):n.play(i):n.play()},playAudioSprite:function(t,i,n){var o=this.addAudioSprite(t);return o.once(d.COMPLETE,o.destroy,o),o.play(i,n)},remove:function(t){var i=this.sounds.indexOf(t);return-1!==i&&(t.destroy(),this.sounds.splice(i,1),!0)},removeAll:function(){this.sounds.forEach((function(t){t.destroy()})),this.sounds.length=0},removeByKey:function(t){for(var i=0,n=this.sounds.length-1;n>=0;n--){var o=this.sounds[n];o.key===t&&(o.destroy(),this.sounds.splice(n,1),i++)}return i},pauseAll:function(){this.forEachActiveSound((function(t){t.pause()})),this.emit(d.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound((function(t){t.resume()})),this.emit(d.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound((function(t){t.stop()})),this.emit(d.STOP_ALL,this)},stopByKey:function(t){var i=0;return this.getAll(t).forEach((function(t){t.stop()&&i++})),i},unlock:p,onBlur:p,onFocus:p,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(t,i){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(d.UNLOCKED,this));for(var n=this.sounds.length-1;n>=0;n--)this.sounds[n].pendingRemove&&this.sounds.splice(n,1);this.sounds.forEach((function(n){n.update(t,i)}))},destroy:function(){this.game.events.off(f.BLUR,this.onGameBlur,this),this.game.events.off(f.FOCUS,this.onGameFocus,this),this.game.events.off(f.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(t,i){var n=this;this.sounds.forEach((function(o,a){o&&!o.pendingRemove&&t.call(i||n,o,a,n.sounds)}))},setRate:function(t){return this.rate=t,this},rate:{get:function(){return this._rate},set:function(t){this._rate=t,this.forEachActiveSound((function(t){t.calculateRate()})),this.emit(d.GLOBAL_RATE,this,t)}},setDetune:function(t){return this.detune=t,this},detune:{get:function(){return this._detune},set:function(t){this._detune=t,this.forEachActiveSound((function(t){t.calculateRate()})),this.emit(d.GLOBAL_DETUNE,this,t)}}});t.exports=M},function(t,i,n){var o=n(0),a=n(9),u=n(70),d=n(17),f=n(1),p=new o({Extends:a,initialize:function BaseSound2(t,i,n){a.call(this),this.manager=t,this.key=i,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=d(this.config,n),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(t){return!(!t||!t.name||"string"!=typeof t.name||(this.markers[t.name]?(console.error("addMarker "+t.name+" already exists in Sound"),1):(t=d(!0,{name:"",start:0,duration:this.totalDuration-(t.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},t),this.markers[t.name]=t,0)))},updateMarker:function(t){return!(!t||!t.name||"string"!=typeof t.name||(this.markers[t.name]?(this.markers[t.name]=d(!0,this.markers[t.name],t),0):(console.warn("Audio Marker: "+t.name+" missing in Sound: "+this.key),1)))},removeMarker:function(t){var i=this.markers[t];return i?(this.markers[t]=null,i):null},play:function(t,i){if(void 0===t&&(t=""),"object"==typeof t&&(i=t,t=""),"string"!=typeof t)return!1;if(t){if(!this.markers[t])return console.warn("Marker: "+t+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[t],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}else this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;return this.resetConfig(),this.currentConfig=d(this.currentConfig,i),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return!(this.isPaused||!this.isPlaying||(this.isPlaying=!1,this.isPaused=!0,0))},resume:function(){return!(!this.isPaused||this.isPlaying||(this.isPlaying=!0,this.isPaused=!1,0))},stop:function(){return!(!this.isPaused&&!this.isPlaying||(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),0))},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:f,calculateRate:function(){var t=this.currentConfig.detune+this.manager.detune,i=Math.pow(1.0005777895065548,t);this.totalRate=this.currentConfig.rate*this.manager.rate*i},destroy:function(){this.pendingRemove||(this.emit(u.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});t.exports=p},function(t,i,n){var o=n(209),a=n(435);t.exports=function(t,i){if(void 0===i&&(i=90),!o(t))return null;if("string"!=typeof i&&(i=(i%360+360)%360),90===i||-270===i||"rotateLeft"===i)(t=a(t)).reverse();else if(-90===i||270===i||"rotateRight"===i)t.reverse(),t=a(t);else if(180===Math.abs(i)||"rotate180"===i){for(var n=0;n<t.length;n++)t[n].reverse();t.reverse()}return t}},function(t,i,n){var o=n(0),a=n(18),u=n(11),d=n(15),f=n(1043),p=n(1044),b=n(212),S=n(10),M=n(1045),C=new o({Extends:d,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Mask,u.Origin,u.Pipeline,u.ScrollFactor,u.Texture,u.Tint,u.Transform,u.Visible,M],initialize:function BitmapText2(t,i,n,o,a,u,p){void 0===a&&(a=""),void 0===p&&(p=0),d.call(this,t,"BitmapText"),this.font=o;var b=this.scene.sys.cache.bitmapFont.get(o);b||console.warn("Invalid BitmapText key: "+o),this.fontData=b.data,this._text="",this._fontSize=u||this.fontData.size,this._letterSpacing=0,this._align=p,this._bounds=f(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=b.fromAtlas,this.setTexture(b.texture,b.frame),this.setPosition(i,n),this.setOrigin(0,0),this.initPipeline(),this.setText(a)},setLeftAlign:function(){return this._align=C.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=C.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=C.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(t){return this._fontSize=t,this._dirty=!0,this},setLetterSpacing:function(t){return void 0===t&&(t=0),this._letterSpacing=t,this._dirty=!0,this},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this.text&&(this._text=t.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(t,i,n,o){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=.5),this.dropShadowX=t,this.dropShadowY=i,this.dropShadowColor=n,this.dropShadowAlpha=o,this},setCharacterTint:function(t,i,n,o,u,d,f){void 0===t&&(t=0),void 0===i&&(i=1),void 0===n&&(n=!1),void 0===o&&(o=-1),void 0===u&&(u=o,d=o,f=o);var p=this.text.length;-1===i&&(i=p),t<0&&(t=p+t),t=a(t,0,p-1);for(var b=a(t+i,t,p),S=this.charColors,M=t;M<b;M++){var C=S[M];if(-1===o)S[M]=null;else{var P=n?1:0;C?(C.tintEffect=P,C.tintTL=o,C.tintTR=u,C.tintBL=d,C.tintBR=f):S[M]={tintEffect:P,tintTL:o,tintTR:u,tintBL:d,tintBR:f}}}return this},setWordTint:function(t,i,n,o,a,u,d){void 0===i&&(i=1);for(var f=this.getTextBounds().words,p="number"==typeof t,b=0,S=0;S<f.length;S++){var M=f[S];if((p&&S===t||!p&&M.word===t)&&(this.setCharacterTint(M.i,M.word.length,n,o,a,u,d),++b===i))return this}return this},getTextBounds:function(t){var i=this._bounds;return(this._dirty||t||this.scaleX!==i.scaleX||this.scaleY!==i.scaleY)&&(f(this,t,!0,i),this._dirty=!1),i},getCharacterAt:function(t,i,n){for(var o=this.getLocalPoint(t,i,null,n),a=this.getTextBounds().characters,u=new S,d=0;d<a.length;d++){var f=a[d];if(u.setTo(f.x,f.t,f.r-f.x,f.b),u.contains(o.x,o.y))return f}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(t,i,n){if(void 0===i&&(i=this._fontSize),void 0===n&&(n=this._align),t!==this.font){var o=this.scene.sys.cache.bitmapFont.get(t);o&&(this.font=t,this.fontData=o.data,this._fontSize=i,this._align=n,this.fromAtlas=!0===o.fromAtlas,this.setTexture(o.texture,o.frame),f(this,!1,!0,this._bounds))}return this},setMaxWidth:function(t,i){return this._maxWidth=t,this._dirty=!0,void 0!==i&&(this.wordWrapCharCode=i),this},align:{set:function(t){this._align=t,this._dirty=!0},get:function(){return this._align}},text:{set:function(t){this.setText(t)},get:function(){return this._text}},fontSize:{set:function(t){this._fontSize=t,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(t){this._letterSpacing=t,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(t){this._maxWidth=t,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var t=u.ToJSON(this),i={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return t.data=i,t},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});C.ALIGN_LEFT=0,C.ALIGN_CENTER=1,C.ALIGN_RIGHT=2,C.ParseFromAtlas=p,C.ParseXMLBitmapFont=b,t.exports=C},function(t,i,n){var o=new(n(0))({initialize:function Set2(t){if(this.entries=[],Array.isArray(t))for(var i=0;i<t.length;i++)this.set(t[i])},set:function(t){return-1===this.entries.indexOf(t)&&this.entries.push(t),this},get:function(t,i){for(var n=0;n<this.entries.length;n++){var o=this.entries[n];if(o[t]===i)return o}},getArray:function(){return this.entries.slice(0)},delete:function(t){var i=this.entries.indexOf(t);return i>-1&&this.entries.splice(i,1),this},dump:function(){console.group("Set");for(var t=0;t<this.entries.length;t++){var i=this.entries[t];console.log(i)}console.groupEnd()},each:function(t,i){var n,o=this.entries.slice(),a=o.length;if(i)for(n=0;n<a&&!1!==t.call(i,o[n],n);n++);else for(n=0;n<a&&!1!==t(o[n],n);n++);return this},iterate:function(t,i){var n,o=this.entries.length;if(i)for(n=0;n<o&&!1!==t.call(i,this.entries[n],n);n++);else for(n=0;n<o&&!1!==t(this.entries[n],n);n++);return this},iterateLocal:function(t){var i,n=[];for(i=1;i<arguments.length;i++)n.push(arguments[i]);var o=this.entries.length;for(i=0;i<o;i++){var a=this.entries[i];a[t].apply(a,n)}return this},clear:function(){return this.entries.length=0,this},contains:function(t){return this.entries.indexOf(t)>-1},union:function(t){var i=new o;return t.entries.forEach((function(t){i.set(t)})),this.entries.forEach((function(t){i.set(t)})),i},intersect:function(t){var i=new o;return this.entries.forEach((function(n){t.contains(n)&&i.set(n)})),i},difference:function(t){var i=new o;return this.entries.forEach((function(n){t.contains(n)||i.set(n)})),i},size:{get:function(){return this.entries.length},set:function(t){return t<this.entries.length?this.entries.length=t:this.entries.length}}});t.exports=o},function(t,i,n){var o=n(0),a=n(11),u=n(15),d=n(189),f=n(92),p=n(1182),b=new o({Extends:u,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.GetBounds,a.Mask,a.Pipeline,a.ScrollFactor,a.Transform,a.Visible,p],initialize:function PointLight2(t,i,n,o,a,p,b){void 0===o&&(o=16777215),void 0===a&&(a=128),void 0===p&&(p=1),void 0===b&&(b=.1),u.call(this,t,"PointLight"),this.initPipeline(f.POINTLIGHT_PIPELINE),this.setPosition(i,n),this.color=d(o),this.intensity=p,this.attenuation=b,this.width=2*a,this.height=2*a,this._radius=a},radius:{get:function(){return this._radius},set:function(t){this._radius=t,this.width=2*t,this.height=2*t}},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});t.exports=b},function(t,i){t.exports=function(t,i){var n=i.width/2,o=i.height/2,a=Math.abs(t.x-i.x-n),u=Math.abs(t.y-i.y-o),d=n+t.radius,f=o+t.radius;if(a>d||u>f)return!1;if(a<=n||u<=o)return!0;var p=a-n,b=u-o;return p*p+b*b<=t.radius*t.radius}},function(t,i){t.exports=function(t,i){return!(t.width<=0||t.height<=0||i.width<=0||i.height<=0||t.right<i.x||t.bottom<i.y||t.x>i.right||t.y>i.bottom)}},function(t,i,n){var o=n(6),a={},u={register:function(t,i,n,o,u){a[t]={plugin:i,mapping:n,settingsKey:o,configKey:u}},getPlugin:function(t){return a[t]},install:function(t){var i=t.scene.sys,n=i.settings.input,u=i.game.config;for(var d in a){var f=a[d].plugin,p=a[d].mapping,b=a[d].settingsKey,S=a[d].configKey;o(n,b,u[S])&&(t[p]=new f(t))}},remove:function(t){a.hasOwnProperty(t)&&delete a[t]}};t.exports=u},function(t,i,n){t.exports={ANY_KEY_DOWN:n(1323),ANY_KEY_UP:n(1324),COMBO_MATCH:n(1325),DOWN:n(1326),KEY_DOWN:n(1327),KEY_UP:n(1328),UP:n(1329)}},function(t,i){t.exports=function(t,i){return!!t.url&&(t.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?t.url:i+t.url)}},function(t,i){t.exports=function(t,i,n,o,a,u){return void 0===t&&(t=""),void 0===i&&(i=!0),void 0===n&&(n=""),void 0===o&&(o=""),void 0===a&&(a=0),void 0===u&&(u=!1),{responseType:t,async:i,user:n,password:o,timeout:a,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:u}}},function(t,i,n){var o=n(0),a=n(243),u=n(73),d=new o({Extends:u,Mixins:[a.Acceleration,a.Angular,a.Bounce,a.Debug,a.Drag,a.Enable,a.Friction,a.Gravity,a.Immovable,a.Mass,a.Pushable,a.Size,a.Velocity],initialize:function ArcadeSprite2(t,i,n,o,a){u.call(this,t,i,n,o,a),this.body=null}});t.exports=d},function(t,i,n){var o=n(119);t.exports=function(t,i,n,a){if(void 0===n&&(n=!1),o(t,i,a)){var u=a.data[i][t]||null;return u?-1===u.index?n?u:null:u:null}return null}},function(t,i){t.exports=function(t,i,n,o){var a,u,d,f=t.data,p=t.width,b=t.height,S=t.tilemapLayer,M=Math.max(0,i.left),C=Math.min(p,i.right),P=Math.max(0,i.top),R=Math.min(b,i.bottom);if(0===n)for(u=P;u<R;u++)for(a=M;f[u]&&a<C;a++)(d=f[u][a])&&-1!==d.index&&d.visible&&0!==d.alpha&&o.push(d);else if(1===n)for(u=P;u<R;u++)for(a=C;f[u]&&a>=M;a--)(d=f[u][a])&&-1!==d.index&&d.visible&&0!==d.alpha&&o.push(d);else if(2===n)for(u=R;u>=P;u--)for(a=M;f[u]&&a<C;a++)(d=f[u][a])&&-1!==d.index&&d.visible&&0!==d.alpha&&o.push(d);else if(3===n)for(u=R;u>=P;u--)for(a=C;f[u]&&a>=M;a--)(d=f[u][a])&&-1!==d.index&&d.visible&&0!==d.alpha&&o.push(d);return S.tilesDrawn=o.length,S.tilesTotal=p*b,o}},function(t,i){t.exports=function(t,i,n){var o=n.collideIndexes.indexOf(t);i&&-1===o?n.collideIndexes.push(t):i||-1===o||n.collideIndexes.splice(o,1)}},function(t,i,n){var o=n(2);t.exports=function(t,i,n){if(!i)return{i:0,layers:t.layers,name:"",opacity:1,visible:!0,x:0,y:0};var a=i.x+o(i,"startx",0)*t.tilewidth+o(i,"offsetx",0),u=i.y+o(i,"starty",0)*t.tileheight+o(i,"offsety",0);return{i:0,layers:i.layers,name:n.name+i.name+"/",opacity:n.opacity*i.opacity,visible:n.visible&&i.visible,x:n.x+a,y:n.y+u}}},function(t,i){t.exports=function(t,i,n){return t.hasOwnProperty(i)?"function"==typeof t[i]?function(n,o,a,u,d,f){return t[i](n,o,a,u,d,f)}:function(){return t[i]}:"function"==typeof n?n:function(){return n}}},function(t,i,n){var o=n(265),a=n(13),u=n(99),d=n(80),f=n(162),p=n(583),b=n(263),S=n(6),M=n(264),C=n(266),P=n(268);t.exports=function(t,i,n){void 0===n&&(n=o);for(var R=n.targets?n.targets:b(i),O=p(i),B=f(i,"delay",n.delay),N=f(i,"duration",n.duration),Y=S(i,"easeParams",n.easeParams),X=d(S(i,"ease",n.ease),Y),G=f(i,"hold",n.hold),U=f(i,"repeat",n.repeat),V=f(i,"repeatDelay",n.repeatDelay),z=u(i,"yoyo",n.yoyo),W=u(i,"flipX",n.flipX),H=u(i,"flipY",n.flipY),j=[],q=0;q<O.length;q++)for(var Z=O[q].key,K=O[q].value,$=0;$<R.length;$++){var tt=M(Z,K),et=P(R[$],$,Z,tt.getEnd,tt.getStart,tt.getActive,d(S(K,"ease",X),S(K,"easeParams",Y)),f(K,"delay",B),f(K,"duration",N),u(K,"yoyo",z),f(K,"hold",G),f(K,"repeat",U),f(K,"repeatDelay",V),u(K,"flipX",W),u(K,"flipY",H));j.push(et)}var it=new C(t,j,R);it.offset=a(i,"offset",null),it.completeDelay=a(i,"completeDelay",0),it.loop=Math.round(a(i,"loop",0)),it.loopDelay=Math.round(a(i,"loopDelay",0)),it.paused=u(i,"paused",!1),it.useFrames=u(i,"useFrames",!1);for(var nt=S(i,"callbackScope",it),st=[it,null],rt=C.TYPES,ot=0;ot<rt.length;ot++){var at=rt[ot],ht=S(i,at,!1);if(ht){var lt=S(i,at+"Scope",nt),ut=S(i,at+"Params",[]);it.setCallback(at,ht,st.concat(ut),lt)}}return it}},function(t,i,n){var o=n(0),a=n(102),u=n(2),d=n(132),f=n(185),p=new o({initialize:function AnimationState2(t){this.parent=t,this.animationManager=t.scene.sys.anims,this.animationManager.on(d.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(t){var i=this.parent;if(void 0===t)return this.nextAnimsQueue.length=0,this.nextAnim=null,i;Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var o=t[n];null===this.nextAnim?this.nextAnim=o:this.nextAnimsQueue.push(o)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(t){this.isPlaying&&this.stop();var i=this.animationManager,n="string"==typeof t?t:u(t,"key",null),o=this.exists(n)?this.get(n):i.get(n);if(o){this.currentAnim=o;var a=o.getTotalFrames(),d=u(t,"frameRate",o.frameRate),f=u(t,"duration",o.duration);o.calculateDuration(this,a,f,d),this.delay=u(t,"delay",o.delay),this.repeat=u(t,"repeat",o.repeat),this.repeatDelay=u(t,"repeatDelay",o.repeatDelay),this.yoyo=u(t,"yoyo",o.yoyo),this.showOnStart=u(t,"showOnStart",o.showOnStart),this.hideOnComplete=u(t,"hideOnComplete",o.hideOnComplete),this.skipMissedFrames=u(t,"skipMissedFrames",o.skipMissedFrames),this.timeScale=u(t,"timeScale",this.timeScale);var p=u(t,"startFrame",0);p>o.getTotalFrames()&&(p=0);var b=o.frames[p];0!==p||this.forward||(b=o.getLastFrame()),this.currentFrame=b}else console.warn("Missing animation: "+n);return this.parent},pause:function(t){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),void 0!==t&&this.setCurrentFrame(t),this.parent},resume:function(t){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),void 0!==t&&this.setCurrentFrame(t),this.parent},playAfterDelay:function(t,i){if(this.isPlaying){var n=this.nextAnim,o=this.nextAnimsQueue;n&&o.unshift(n),this.nextAnim=t,this._pendingStop=1,this._pendingStopValue=i}else this.delayCounter=i,this.play(t,!0);return this.parent},playAfterRepeat:function(t,i){if(void 0===i&&(i=1),this.isPlaying){var n=this.nextAnim,o=this.nextAnimsQueue;n&&o.unshift(n),-1!==this.repeatCounter&&i>this.repeatCounter&&(i=this.repeatCounter),this.nextAnim=t,this._pendingStop=2,this._pendingStopValue=i}else this.play(t);return this.parent},play:function(t,i){void 0===i&&(i=!1);var n=this.currentAnim,o=this.parent,a="string"==typeof t?t:t.key;if(i&&this.isPlaying&&n.key===a)return o;if(n&&this.isPlaying){var u=this.animationManager.getMix(n.key,t);if(u>0)return this.playAfterDelay(t,u)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(t)},playReverse:function(t,i){void 0===i&&(i=!1);var n="string"==typeof t?t:t.key;return i&&this.isPlaying&&this.currentAnim.key===n?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(t))},startAnimation:function(t){this.load(t);var i=this.currentAnim,n=this.parent;return i?(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat,i.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,0===this.delayCounter&&this.handleStart(),n):n},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(d.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(d.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(d.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(d.ANIMATION_COMPLETE,d.ANIMATION_COMPLETE_KEY)},emitEvents:function(t,i){var n=this.currentAnim,o=this.currentFrame,a=this.parent,u=o.textureFrame;a.emit(t,n,o,a,u),i&&a.emit(i+n.key,n,o,a,u)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var t=this.currentFrame;if(!t)return 0;var i=t.progress;return this.inReverse&&(i*=-1),i},setProgress:function(t){return this.forward||(t=1-t),this.setCurrentFrame(this.currentAnim.getFrameByProgress(t)),this.parent},setRepeat:function(t){return this.repeatCounter=-1===t?Number.MAX_VALUE:t,this.parent},globalRemove:function(t,i){void 0===i&&(i=this.currentAnim),this.isPlaying&&i.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var n=this.currentAnim,o=this.parent;return n?(i&&(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat),n.getFirstTick(this),this.emitEvents(d.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!t,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(n.frames[0]),this.parent):o},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var t=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(t)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var t=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(t)}return this.parent},stopAfterDelay:function(t){return this._pendingStop=1,this._pendingStopValue=t,this.parent},stopAfterRepeat:function(t){return void 0===t&&(t=1),-1!==this.repeatCounter&&t>this.repeatCounter&&(t=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=t,this.parent},stopOnFrame:function(t){return this._pendingStop=3,this._pendingStopValue=t,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(t,i){var n=this.currentAnim;if(this.isPlaying&&n&&!n.paused){if(this.accumulator+=i*this.timeScale,1===this._pendingStop&&(this._pendingStopValue-=i,this._pendingStopValue<=0))return this.stop();if(this.hasStarted){if(this.accumulator>=this.nextTick&&(this.forward?n.nextFrame(this):n.previousFrame(this),this.isPlaying&&0===this._pendingStop&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var o=0;do{this.forward?n.nextFrame(this):n.previousFrame(this),o++}while(this.isPlaying&&this.accumulator>this.nextTick&&o<60)}}else this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart())}},setCurrentFrame:function(t){var i=this.parent;return this.currentFrame=t,i.texture=t.frame.texture,i.frame=t.frame,i.isCropped&&i.frame.updateCropUVs(i._crop,i.flipX,i.flipY),t.setAlpha&&(i.alpha=t.alpha),i.setSizeToFrame(),i._originComponent&&(t.frame.customPivot?i.setOrigin(t.frame.pivotX,t.frame.pivotY):i.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(d.ANIMATION_UPDATE),3===this._pendingStop&&this._pendingStopValue===t&&this.stop()),i},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(t){return this.anims?this.anims.get(t):null},exists:function(t){return!!this.anims&&this.anims.has(t)},create:function(t){var i=t.key,n=!1;return i&&((n=this.get(i))||(n=new f(this,i,t),this.anims||(this.anims=new a),this.anims.set(i,n))),n},generateFrameNames:function(t,i){return this.animationManager.generateFrameNames(t,i)},generateFrameNumbers:function(t,i){return this.animationManager.generateFrameNumbers(t,i)},remove:function(t){var i=this.get(t);return i&&(this.currentAnim===i&&this.stop(),this.anims.delete(t)),i},destroy:function(){this.animationManager.off(d.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});t.exports=p},function(t,i,n){var o={};t.exports=o;var a=n(166);o._motionWakeThreshold=.18,o._motionSleepThreshold=.08,o._minBias=.9,o.update=function(t,i){for(var n=i*i*i,a=0;a<t.length;a++){var u=t[a],d=u.speed*u.speed+u.angularSpeed*u.angularSpeed;if(0===u.force.x&&0===u.force.y){var f=Math.min(u.motion,d),p=Math.max(u.motion,d);u.motion=o._minBias*f+(1-o._minBias)*p,u.sleepThreshold>0&&u.motion<o._motionSleepThreshold*n?(u.sleepCounter+=1,u.sleepCounter>=u.sleepThreshold&&o.set(u,!0)):u.sleepCounter>0&&(u.sleepCounter-=1)}else o.set(u,!1)}},o.afterCollisions=function(t,i){for(var n=i*i*i,a=0;a<t.length;a++){var u=t[a];if(u.isActive){var d=u.collision,f=d.bodyA.parent,p=d.bodyB.parent;if(!(f.isSleeping&&p.isSleeping||f.isStatic||p.isStatic)&&(f.isSleeping||p.isSleeping)){var b=f.isSleeping&&!f.isStatic?f:p,S=b===f?p:f;!b.isStatic&&S.motion>o._motionWakeThreshold*n&&o.set(b,!1)}}}},o.set=function(t,i){var n=t.isSleeping;i?(t.isSleeping=!0,t.sleepCounter=t.sleepThreshold,t.positionImpulse.x=0,t.positionImpulse.y=0,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.anglePrev=t.angle,t.speed=0,t.angularSpeed=0,t.motion=0,n||a.trigger(t,"sleepStart")):(t.isSleeping=!1,t.sleepCounter=0,n&&a.trigger(t,"sleepEnd"))}},function(t,i,n){var o={};t.exports=o;var a=n(32);o.on=function(t,i,n){for(var o,a=i.split(" "),u=0;u<a.length;u++)o=a[u],t.events=t.events||{},t.events[o]=t.events[o]||[],t.events[o].push(n);return n},o.off=function(t,i,n){if(i){"function"==typeof i&&(n=i,i=a.keys(t.events).join(" "));for(var o=i.split(" "),u=0;u<o.length;u++){var d=t.events[o[u]],f=[];if(n&&d)for(var p=0;p<d.length;p++)d[p]!==n&&f.push(d[p]);t.events[o[u]]=f}}else t.events={}},o.trigger=function(t,i,n){var o,u,d,f,p=t.events;if(p&&a.keys(p).length>0){n||(n={}),o=i.split(" ");for(var b=0;b<o.length;b++)if(d=p[u=o[b]]){(f=a.clone(n,!1)).name=u,f.source=t;for(var S=0;S<d.length;S++)d[S].apply(t,[f])}}}},function(t,i,n){var o=n(175),a=n(92),u=n(74),d={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(t){void 0===t&&(t=a.MULTI_PIPELINE);var i=this.scene.sys.renderer;if(!i)return!1;var n=i.pipelines;if(this.postPipelines=[],this.pipelineData={},n){var o=n.get(t);if(o)return this.defaultPipeline=o,this.pipeline=o,!0}return!1},setPipeline:function(t,i,n){var a=this.scene.sys.renderer;if(!a)return this;var u=a.pipelines;if(u){var d=u.get(t);d&&(this.pipeline=d),i&&(this.pipelineData=n?o(i):i)}return this},setPostPipeline:function(t,i,n){var a=this.scene.sys.renderer;if(!a)return this;var u=a.pipelines;if(u){Array.isArray(t)||(t=[t]);for(var d=0;d<t.length;d++){var f=u.getPostPipeline(t[d],this);f&&this.postPipelines.push(f)}i&&(this.pipelineData=n?o(i):i)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(t,i){var n=this.pipelineData;return void 0===i?delete n[t]:n[t]=i,this},getPostPipeline:function(t){for(var i=this.postPipelines,n=[],o=0;o<i.length;o++){var a=i[o];("string"==typeof t&&a.name===t||a instanceof t)&&n.push(a)}return 1===n.length?n[0]:n},resetPipeline:function(t,i){return void 0===t&&(t=!1),void 0===i&&(i=!1),this.pipeline=this.defaultPipeline,t&&(this.postPipelines=[],this.hasPostPipeline=!1),i&&(this.pipelineData={}),null!==this.pipeline},resetPostPipeline:function(t){void 0===t&&(t=!1);for(var i=this.postPipelines,n=0;n<i.length;n++)i[n].destroy();this.postPipelines=[],this.hasPostPipeline=!1,t&&(this.pipelineData={})},removePostPipeline:function(t){for(var i=this.postPipelines,n=i.length-1;n>=0;n--){var o=i[n];("string"==typeof t&&o.name===t||"string"!=typeof t&&o instanceof t)&&(o.destroy(),u(i,n))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};t.exports=d},function(t,i){t.exports={DEFAULT:0,LINEAR:0,NEAREST:1}},function(t,i,n){var o=n(4);t.exports=function(t,i,n){return void 0===n&&(n=new o),n.x=t.x+t.radius*Math.cos(i),n.y=t.y+t.radius*Math.sin(i),n}},function(t,i,n){var o=n(4);t.exports=function(t,i){void 0===i&&(i=new o);var n=2*Math.PI*Math.random(),a=Math.random()+Math.random(),u=a>1?2-a:a,d=u*Math.cos(n),f=u*Math.sin(n);return i.x=t.x+d*t.radius,i.y=t.y+f*t.radius,i}},function(t,i,n){var o=n(130),a=n(4);t.exports=function(t,i,n){if(void 0===n&&(n=new a),i<=0||i>=1)return n.x=t.x,n.y=t.y,n;var u=o(t)*i;return i>.5?(u-=t.width+t.height)<=t.width?(n.x=t.right-u,n.y=t.bottom):(n.x=t.x,n.y=t.bottom-(u-t.width)):u<=t.width?(n.x=t.x+u,n.y=t.y):(n.x=t.right,n.y=t.y+(u-t.width)),n}},function(t,i,n){var o=n(67),a=n(4);t.exports=function(t,i,n,u){void 0===u&&(u=[]),!i&&n>0&&(i=o(t)/n);for(var d=t.x1,f=t.y1,p=t.x2,b=t.y2,S=0;S<i;S++){var M=S/i,C=d+(p-d)*M,P=f+(b-f)*M;u.push(new a(C,P))}return u}},function(t,i,n){var o=n(4);t.exports=function(t,i){void 0===i&&(i=new o);var n=Math.random();return i.x=t.x1+n*(t.x2-t.x1),i.y=t.y1+n*(t.y2-t.y1),i}},function(t,i,n){var o=n(4);t.exports=function(t,i){return void 0===i&&(i=new o),i.x=t.x+Math.random()*t.width,i.y=t.y+Math.random()*t.height,i}},function(t,i){var DeepCopy=function(t){var i,n,o;if("object"!=typeof t||null===t)return t;for(o in i=Array.isArray(t)?[]:{},t)n=t[o],i[o]=DeepCopy(n);return i};t.exports=DeepCopy},function(t,i){t.exports=function(t){var i={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(i.textureKey=t.texture.key,i.frameKey=t.frame.name),i}},function(t,i,n){var o=n(3);t.exports=function(t,i,n,a,u,d,f,p){void 0===p&&(p=new o);var b=Math.sin(u),S=Math.cos(u),M=S*d,C=b*d,P=-b*f,R=S*f,O=1/(M*R+P*-C);return p.x=R*O*t+-P*O*i+(a*P-n*R)*O,p.y=M*O*i+-C*O*t+(-a*M+n*C)*O,p}},function(t,i){t.exports=function(t,i){void 0===i&&(i=1);for(var n=null,o=0;o<i;o++)n=t.shift(),t.push(n);return n}},function(t,i){t.exports=function(t,i){void 0===i&&(i=1);for(var n=null,o=0;o<i;o++)n=t.pop(),t.unshift(n);return n}},function(t,i,n){var o=n(4);t.exports=function(t,i){void 0===i&&(i=new o);var n=Math.random()*Math.PI*2,a=Math.sqrt(Math.random());return i.x=t.x+a*Math.cos(n)*t.width/2,i.y=t.y+a*Math.sin(n)*t.height/2,i}},function(t,i,n){var o=n(4);t.exports=function(t,i){void 0===i&&(i=new o);var n=t.x2-t.x1,a=t.y2-t.y1,u=t.x3-t.x1,d=t.y3-t.y1,f=Math.random(),p=Math.random();return f+p>=1&&(f=1-f,p=1-p),i.x=t.x1+(n*f+u*p),i.y=t.y1+(a*f+d*p),i}},function(t,i){t.exports=function(t,i,n,o,a){var u=o+Math.atan2(t.y-n,t.x-i);return t.x=i+a*Math.cos(u),t.y=n+a*Math.sin(u),t}},function(t,i){t.exports=function(t,i,n){return(t=Math.max(0,Math.min(1,(t-i)/(n-i))))*t*t*(t*(6*t-15)+10)}},function(t,i){t.exports=function(t,i,n){return t<=i?0:t>=n?1:(t=(t-i)/(n-i))*t*(3-2*t)}},function(t,i,n){var o=n(18),a=n(0),u=n(132),d=n(318),f=n(319),p=n(6),b=n(320),S=new a({initialize:function Animation2(t,i,n){this.manager=t,this.key=i,this.type="frame",this.frames=this.getFrames(t.textureManager,p(n,"frames",[]),p(n,"defaultTextureKey",null),p(n,"sortFrames",!0)),this.frameRate=p(n,"frameRate",null),this.duration=p(n,"duration",null),this.msPerFrame,this.skipMissedFrames=p(n,"skipMissedFrames",!0),this.delay=p(n,"delay",0),this.repeat=p(n,"repeat",0),this.repeatDelay=p(n,"repeatDelay",0),this.yoyo=p(n,"yoyo",!1),this.showOnStart=p(n,"showOnStart",!1),this.hideOnComplete=p(n,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(u.PAUSE_ALL,this.pause,this),this.manager.on(u.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(t,i,n,o){null===n&&null===o?(t.frameRate=24,t.duration=24/i*1e3):n&&null===o?(t.duration=n,t.frameRate=i/(n/1e3)):(t.frameRate=o,t.duration=i/o*1e3),t.msPerFrame=1e3/t.frameRate},addFrame:function(t){return this.addFrameAt(this.frames.length,t)},addFrameAt:function(t,i){var n=this.getFrames(this.manager.textureManager,i);if(n.length>0){if(0===t)this.frames=n.concat(this.frames);else if(t===this.frames.length)this.frames=this.frames.concat(n);else{var o=this.frames.slice(0,t),a=this.frames.slice(t);this.frames=o.concat(n,a)}this.updateFrameSequence()}return this},checkFrame:function(t){return t>=0&&t<this.frames.length},getFirstTick:function(t){t.accumulator=0,t.nextTick=t.msPerFrame+t.currentFrame.duration},getFrameAt:function(t){return this.frames[t]},getFrames:function(t,i,n,o){void 0===o&&(o=!0);var a,u,d,S,M=[],C=1;if("string"==typeof i){S=i;var P=t.get(S).getFrameNames();o&&b(P),i=[],P.forEach((function(t){i.push({key:S,frame:t})}))}if(!Array.isArray(i)||0===i.length)return M;for(d=0;d<i.length;d++){var R=i[d],O=p(R,"key",n);if(O){var B=p(R,"frame",0),N=t.getFrame(O,B);(u=new f(O,B,C,N)).duration=p(R,"duration",0),u.isFirst=!a,a&&(a.nextFrame=u,u.prevFrame=a),M.push(u),a=u,C++}}if(M.length>0){u.isLast=!0,u.nextFrame=M[0],M[0].prevFrame=u;var Y=1/(M.length-1);for(d=0;d<M.length;d++)M[d].progress=d*Y}return M},getNextTick:function(t){t.accumulator-=t.nextTick,t.nextTick=t.msPerFrame+t.currentFrame.duration},getFrameByProgress:function(t){return t=o(t,0,1),d(t,this.frames,"progress")},nextFrame:function(t){var i=t.currentFrame;i.isLast?t.yoyo?this.handleYoyoFrame(t,!1):t.repeatCounter>0?t.inReverse&&t.forward?t.forward=!1:this.repeatAnimation(t):t.complete():this.updateAndGetNextTick(t,i.nextFrame)},handleYoyoFrame:function(t,i){if(i||(i=!1),t.inReverse===!i&&t.repeatCounter>0)return(0===t.repeatDelay||t.pendingRepeat)&&(t.forward=i),void this.repeatAnimation(t);if(t.inReverse===i||0!==t.repeatCounter){t.forward=i;var n=i?t.currentFrame.nextFrame:t.currentFrame.prevFrame;this.updateAndGetNextTick(t,n)}else t.complete()},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(t){var i=t.currentFrame;i.isFirst?t.yoyo?this.handleYoyoFrame(t,!0):t.repeatCounter>0?(t.inReverse&&!t.forward||(t.forward=!0),this.repeatAnimation(t)):t.complete():this.updateAndGetNextTick(t,i.prevFrame)},updateAndGetNextTick:function(t,i){t.setCurrentFrame(i),this.getNextTick(t)},removeFrame:function(t){var i=this.frames.indexOf(t);return-1!==i&&this.removeFrameAt(i),this},removeFrameAt:function(t){return this.frames.splice(t,1),this.updateFrameSequence(),this},repeatAnimation:function(t){if(2===t._pendingStop){if(0===t._pendingStopValue)return t.stop();t._pendingStopValue--}t.repeatDelay>0&&!t.pendingRepeat?(t.pendingRepeat=!0,t.accumulator-=t.nextTick,t.nextTick+=t.repeatDelay):(t.repeatCounter--,t.forward?t.setCurrentFrame(t.currentFrame.nextFrame):t.setCurrentFrame(t.currentFrame.prevFrame),t.isPlaying&&(this.getNextTick(t),t.handleRepeat()))},toJSON:function(){var t={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach((function(i){t.frames.push(i.toJSON())})),t},updateFrameSequence:function(){for(var t,i=this.frames.length,n=1/(i-1),o=0;o<i;o++)(t=this.frames[o]).index=o+1,t.isFirst=!1,t.isLast=!1,t.progress=o*n,0===o?(t.isFirst=!0,1===i?(t.isLast=!0,t.nextFrame=t,t.prevFrame=t):(t.isLast=!1,t.prevFrame=this.frames[i-1],t.nextFrame=this.frames[o+1])):o===i-1&&i>1?(t.isLast=!0,t.prevFrame=this.frames[i-2],t.nextFrame=this.frames[0]):i>1&&(t.prevFrame=this.frames[o-1],t.nextFrame=this.frames[o+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(u.PAUSE_ALL,this.pause,this),this.manager.off(u.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var t=0;t<this.frames.length;t++)this.frames[t].destroy();this.frames=[],this.manager=null}});t.exports=S},function(t,i){t.exports=function(t,i,n,o){void 0===i&&(i=0),void 0===n&&(n=" "),void 0===o&&(o=3);var a=0;if(i+1>=(t=t.toString()).length)switch(o){case 1:t=new Array(i+1-t.length).join(n)+t;break;case 3:var u=Math.ceil((a=i-t.length)/2);t=new Array(a-u+1).join(n)+t+new Array(u+1).join(n);break;default:t+=new Array(i+1-t.length).join(n)}return t}},function(t,i,n){var o=n(327),a=n(189),u=n(331),d=n(332);t.exports=function(t){switch(typeof t){case"string":return"rgb"===t.substr(0,3).toLowerCase()?d(t):o(t);case"number":return a(t);case"object":return u(t)}}},function(t,i,n){var o=n(103);function ConvertValue(t,i,n,o){var a=(t+6*i)%6,u=Math.min(a,4-a,1);return Math.round(255*(o-o*n*Math.max(0,u)))}t.exports=function(t,i,n,a){void 0===i&&(i=1),void 0===n&&(n=1);var u=ConvertValue(5,t,i,n),d=ConvertValue(3,t,i,n),f=ConvertValue(1,t,i,n);return a?a.setTo?a.setTo(u,d,f,a.alpha,!1):(a.r=u,a.g=d,a.b=f,a.color=o(u,d,f),a):{r:u,g:d,b:f,color:o(u,d,f)}}},function(t,i,n){var o=n(38),a=n(330);t.exports=function(t){var i=a(t);return new o(i.r,i.g,i.b,i.a)}},function(t,i){t.exports=function(t,i,n){return t.x=i-t.width/2,t.y=n-t.height/2,t}},function(t,i,n){var o=n(105),a=n(136),u=n(31),d={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};t.exports=function init(){if("function"==typeof importScripts)return d;d.canvas=!!window.CanvasRenderingContext2D;try{d.localStorage=!!localStorage.getItem}catch(i){d.localStorage=!1}d.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),d.fileSystem=!!window.requestFileSystem;var t=!1;return d.webGL=function(){if(window.WebGLRenderingContext)try{var i=u.createWebGL(this),n=i.getContext("webgl")||i.getContext("experimental-webgl"),o=u.create2D(this),a=o.getContext("2d").createImageData(1,1);return t=a.data instanceof Uint8ClampedArray,u.remove(i),u.remove(o),!!n}catch(d){return!1}return!1}(),d.worker=!!window.Worker,d.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,d.getUserMedia=d.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,a.firefox&&a.firefoxVersion<21&&(d.getUserMedia=!1),!o.iOS&&(a.ie||a.firefox||a.chrome)&&(d.canvasBitBltShift=!0),(a.safari||a.mobileSafari)&&(d.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(d.vibration=!0),"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint32Array&&(d.littleEndian=function checkIsLittleEndian(){var t=new ArrayBuffer(4),i=new Uint8Array(t),n=new Uint32Array(t);return i[0]=161,i[1]=178,i[2]=195,i[3]=212,3569595041===n[0]||2712847316!==n[0]&&null}()),d.support32bit="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof Int32Array&&null!==d.littleEndian&&t,d}()},function(t,i){var n,o="";t.exports={disable:function(t){return""===o&&(o=n(t)),o&&(t[o]=!1),t},enable:function(t){return""===o&&(o=n(t)),o&&(t[o]=!0),t},getPrefix:n=function(t){for(var i=["i","webkitI","msI","mozI","oI"],n=0;n<i.length;n++){var o=i[n]+"mageSmoothingEnabled";if(o in t)return o}return null},isEnabled:function(t){return null!==o?t[o]:null}}},function(t,i,n){var o=n(14),a=n(17),u={Angle:n(812),Distance:n(821),Easing:n(826),Fuzzy:n(827),Interpolation:n(830),Pow2:n(835),Snap:n(837),RandomDataGenerator:n(839),Average:n(840),Bernstein:n(356),Between:n(195),CatmullRom:n(194),CeilTo:n(841),Clamp:n(18),DegToRad:n(36),Difference:n(842),Euler:n(843),Factorial:n(357),FloatBetween:n(137),FloorTo:n(844),FromPercent:n(98),GetSpeed:n(845),IsEven:n(846),IsEvenStrict:n(847),Linear:n(135),MaxAdd:n(848),Median:n(849),MinSub:n(850),Percent:n(851),RadToDeg:n(196),RandomXY:n(852),RandomXYZ:n(853),RandomXYZW:n(854),Rotate:n(362),RotateAround:n(308),RotateAroundDistance:n(182),RotateTo:n(855),RoundAwayFromZero:n(363),RoundTo:n(856),SinCosTableGenerator:n(857),SmootherStep:n(183),SmoothStep:n(184),ToXY:n(858),TransformXY:n(177),Within:n(859),Wrap:n(68),Vector2:n(3),Vector3:n(39),Vector4:n(140),Matrix3:n(364),Matrix4:n(69),Quaternion:n(365),RotateVec3:n(860)};u=a(!1,u,o),t.exports=u},function(t,i){t.exports=function(t,i,n,o,a){var u=.5*(o-i),d=.5*(a-n),f=t*t;return(2*n-2*o+u+d)*(t*f)+(-3*n+3*o-2*u-d)*f+u*t+n}},function(t,i){t.exports=function(t,i){return Math.floor(Math.random()*(i-t+1)+t)}},function(t,i,n){var o=n(14);t.exports=function(t){return t*o.RAD_TO_DEG}},function(t,i,n){t.exports={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]}},function(t,i,n){var o=new(n(0))({initialize:function ColorMatrix2(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function(t){return this._matrix=t,this._dirty=!0,this},reset:function(){var t=this._matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=1,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=1,t[13]=0,t[14]=0,t[15]=0,t[16]=0,t[17]=0,t[18]=1,t[19]=0,this._dirty=!0,this},getData:function(){if(this._dirty){var t=new Float32Array(this._matrix);t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,this._data=t,this._dirty=!1}return this._data},brightness:function(t,i){void 0===t&&(t=0),void 0===i&&(i=!1);var n=t;return this.multiply([n,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0],i)},saturate:function(t,i){void 0===t&&(t=0),void 0===i&&(i=!1);var n=2*t/3+1,o=-.5*(n-1);return this.multiply([n,o,o,0,0,o,n,o,0,0,o,o,n,0,0,0,0,0,1,0],i)},desaturate:function(t){return void 0===t&&(t=!1),this.saturate(-1,t)},hue:function(t,i){void 0===t&&(t=0),void 0===i&&(i=!1),t=t/180*Math.PI;var n=Math.cos(t),o=Math.sin(t),a=.213,u=.715,d=.072;return this.multiply([a+.787*n+o*-a,u+n*-u+o*-u,d+n*-d+.928*o,0,0,a+n*-a+.143*o,u+n*(1-u)+.14*o,d+n*-d+-.283*o,0,0,a+n*-a+-.787*o,u+n*-u+o*u,d+.928*n+o*d,0,0,0,0,0,1,0],i)},grayscale:function(t,i){return void 0===t&&(t=1),void 0===i&&(i=!1),this.saturate(-t,i)},blackWhite:function(t){return void 0===t&&(t=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},contrast:function(t,i){void 0===t&&(t=0),void 0===i&&(i=!1);var n=t+1,o=-.5*(n-1);return this.multiply([n,0,0,0,o,0,n,0,0,o,0,0,n,0,o,0,0,0,1,0],i)},negative:function(t){return void 0===t&&(t=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},desaturateLuminance:function(t){return void 0===t&&(t=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],t)},sepia:function(t){return void 0===t&&(t=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},night:function(t,i){return void 0===t&&(t=.1),void 0===i&&(i=!1),this.multiply([-2*t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0],i)},lsd:function(t){return void 0===t&&(t=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},brown:function(t){return void 0===t&&(t=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},vintagePinhole:function(t){return void 0===t&&(t=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},kodachrome:function(t){return void 0===t&&(t=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},technicolor:function(t){return void 0===t&&(t=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},polaroid:function(t){return void 0===t&&(t=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},shiftToBGR:function(t){return void 0===t&&(t=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},multiply:function(t,i){i||this.reset();for(var n=this._matrix,o=[],a=0;a<20;a++)o[a]=n[a];return n[0]=o[0]*t[0]+o[1]*t[5]+o[2]*t[10]+o[3]*t[15],n[1]=o[0]*t[1]+o[1]*t[6]+o[2]*t[11]+o[3]*t[16],n[2]=o[0]*t[2]+o[1]*t[7]+o[2]*t[12]+o[3]*t[17],n[3]=o[0]*t[3]+o[1]*t[8]+o[2]*t[13]+o[3]*t[18],n[4]=o[0]*t[4]+o[1]*t[9]+o[2]*t[14]+o[3]*t[19]+o[4],n[5]=o[5]*t[0]+o[6]*t[5]+o[7]*t[10]+o[8]*t[15],n[6]=o[5]*t[1]+o[6]*t[6]+o[7]*t[11]+o[8]*t[16],n[7]=o[5]*t[2]+o[6]*t[7]+o[7]*t[12]+o[8]*t[17],n[8]=o[5]*t[3]+o[6]*t[8]+o[7]*t[13]+o[8]*t[18],n[9]=o[5]*t[4]+o[6]*t[9]+o[7]*t[14]+o[8]*t[19]+o[9],n[10]=o[10]*t[0]+o[11]*t[5]+o[12]*t[10]+o[13]*t[15],n[11]=o[10]*t[1]+o[11]*t[6]+o[12]*t[11]+o[13]*t[16],n[12]=o[10]*t[2]+o[11]*t[7]+o[12]*t[12]+o[13]*t[17],n[13]=o[10]*t[3]+o[11]*t[8]+o[12]*t[13]+o[13]*t[18],n[14]=o[10]*t[4]+o[11]*t[9]+o[12]*t[14]+o[13]*t[19]+o[14],n[15]=o[15]*t[0]+o[16]*t[5]+o[17]*t[10]+o[18]*t[15],n[16]=o[15]*t[1]+o[16]*t[6]+o[17]*t[11]+o[18]*t[16],n[17]=o[15]*t[2]+o[16]*t[7]+o[17]*t[12]+o[18]*t[17],n[18]=o[15]*t[3]+o[16]*t[8]+o[17]*t[13]+o[18]*t[18],n[19]=o[15]*t[4]+o[16]*t[9]+o[17]*t[14]+o[18]*t[19]+o[19],this._dirty=!0,this}});t.exports=o},function(t,i,n){var o=n(10),a=n(14);t.exports=function(t,i){if(void 0===i&&(i=new o),0===t.length)return i;for(var n,u,d,f=Number.MAX_VALUE,p=Number.MAX_VALUE,b=a.MIN_SAFE_INTEGER,S=a.MIN_SAFE_INTEGER,M=0;M<t.length;M++)n=t[M],Array.isArray(n)?(u=n[0],d=n[1]):(u=n.x,d=n.y),f=Math.min(f,u),p=Math.min(p,d),b=Math.max(b,u),S=Math.max(S,d);return i.x=f,i.y=p,i.width=b-f,i.height=S-p,i}},function(t,i,n){var o=n(0),a=n(1),u=new o({initialize:function RGB2(t,i,n){this._rgb=[0,0,0],this.onChangeCallback=a,this.dirty=!1,this.set(t,i,n)},set:function(t,i,n){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),this._rgb=[t,i,n],this.onChange(),this},equals:function(t,i,n){var o=this._rgb;return o.r===t&&o.g===i&&o.b===n},onChange:function(){this.dirty=!0;var t=this._rgb;this.onChangeCallback.call(this,t[0],t[1],t[2])},r:{get:function(){return this._rgb[0]},set:function(t){this._rgb[0]=t,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(t){this._rgb[1]=t,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(t){this._rgb[2]=t,this.onChange()}},destroy:function(){this.onChangeCallback=null}});t.exports=u},function(t,i,n){var o={CENTER:n(403),ORIENTATION:n(404),SCALE_MODE:n(405),ZOOM:n(406)};t.exports=o},function(t,i){t.exports=function(t){t.parentNode&&t.parentNode.removeChild(t)}},function(t,i){t.exports={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8}},function(t,i,n){var o=n(0),a=n(144),u=n(197),d=n(20),f=n(419),p=n(420),b=n(33),S=n(1),M=n(421),C=new o({initialize:function Systems2(t,i){this.scene=t,this.game,this.renderer,this.config=i,this.settings=M.create(i),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=S},init:function(t){this.settings.status=a.INIT,this.sceneUpdate=S,this.game=t,this.renderer=t.renderer,this.canvas=t.canvas,this.context=t.context;var i=t.plugins;this.plugins=i,i.addToScene(this,u.Global,[u.CoreScene,p(this),f(this)]),this.events.emit(d.BOOT,this),this.settings.isBooted=!0},step:function(t,i){var n=this.events;n.emit(d.PRE_UPDATE,t,i),n.emit(d.UPDATE,t,i),this.sceneUpdate.call(this.scene,t,i),n.emit(d.POST_UPDATE,t,i)},render:function(t){var i=this.displayList;i.depthSort(),this.events.emit(d.PRE_RENDER,t),this.cameras.render(t,i),this.events.emit(d.RENDER,t)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(t){var i=this.events,n=this.settings;return this.settings.active&&(n.status=a.PAUSED,n.active=!1,i.emit(d.PAUSE,this,t)),this},resume:function(t){var i=this.events,n=this.settings;return this.settings.active||(n.status=a.RUNNING,n.active=!0,i.emit(d.RESUME,this,t)),this},sleep:function(t){var i=this.events,n=this.settings;return n.status=a.SLEEPING,n.active=!1,n.visible=!1,i.emit(d.SLEEP,this,t),this},wake:function(t){var i=this.events,n=this.settings;return n.status=a.RUNNING,n.active=!0,n.visible=!0,i.emit(d.WAKE,this,t),n.isTransition&&i.emit(d.TRANSITION_WAKE,n.transitionFrom,n.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===a.SLEEPING},isActive:function(){return this.settings.status===a.RUNNING},isPaused:function(){return this.settings.status===a.PAUSED},isTransitioning:function(){return this.settings.isTransition||null!==this.scenePlugin._target},isTransitionOut:function(){return null!==this.scenePlugin._target&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(t){return this.settings.visible=t,this},setActive:function(t,i){return t?this.resume(i):this.pause(i)},start:function(t){var i=this.events,n=this.settings;t&&(n.data=t),n.status=a.START,n.active=!0,n.visible=!0,i.emit(d.START,this),i.emit(d.READY,this,t)},shutdown:function(t){var i=this.events,n=this.settings;i.off(d.TRANSITION_INIT),i.off(d.TRANSITION_START),i.off(d.TRANSITION_COMPLETE),i.off(d.TRANSITION_OUT),n.status=a.SHUTDOWN,n.active=!1,n.visible=!1,this.renderer===b.WEBGL&&this.renderer.resetTextures(!0),i.emit(d.SHUTDOWN,this,t)},destroy:function(){var t=this.events,i=this.settings;i.status=a.DESTROYED,i.active=!1,i.visible=!1,t.emit(d.DESTROY,this),t.removeAllListeners();for(var n=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],o=0;o<n.length;o++)this[n[o]]=null}});t.exports=C},function(t,i){t.exports=function(t){return t&&t[0].toUpperCase()+t.slice(1)}},function(t,i,n){var o=n(33),a=n(0),u=n(109),d=n(424),f="Texture.frame missing: ",p=new a({initialize:function Texture2(t,i,n,o,a){Array.isArray(n)||(n=[n]),this.manager=t,this.key=i,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var u=0;u<n.length;u++)this.source.push(new d(this,n[u],o,a))},add:function(t,i,n,o,a,d){if(this.has(t))return null;var f=new u(this,t,i,n,o,a,d);return this.frames[t]=f,"__BASE"===this.firstFrame&&(this.firstFrame=t),this.frameTotal++,f},remove:function(t){return!!this.has(t)&&(this.get(t).destroy(),delete this.frames[t],!0)},has:function(t){return this.frames[t]},get:function(t){t||(t=this.firstFrame);var i=this.frames[t];return i||(console.warn(f+t),i=this.frames[this.firstFrame]),i},getTextureSourceIndex:function(t){for(var i=0;i<this.source.length;i++)if(this.source[i]===t)return i;return-1},getFramesFromTextureSource:function(t,i){void 0===i&&(i=!1);var n=[];for(var o in this.frames)if("__BASE"!==o||i){var a=this.frames[o];a.sourceIndex===t&&n.push(a)}return n},getFrameNames:function(t){void 0===t&&(t=!1);var i=Object.keys(this.frames);if(!t){var n=i.indexOf("__BASE");-1!==n&&i.splice(n,1)}return i},getSourceImage:function(t){null!=t&&1!==this.frameTotal||(t="__BASE");var i=this.frames[t];return i?i.source.image:(console.warn(f+t),this.frames.__BASE.source.image)},getDataSourceImage:function(t){null!=t&&1!==this.frameTotal||(t="__BASE");var i,n=this.frames[t];return n?i=n.sourceIndex:(console.warn(f+t),i=this.frames.__BASE.sourceIndex),this.dataSource[i].image},setDataSource:function(t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var n=this.source[i];this.dataSource.push(new d(this,t[i],n.width,n.height))}},setFilter:function(t){var i;for(i=0;i<this.source.length;i++)this.source[i].setFilter(t);for(i=0;i<this.dataSource.length;i++)this.dataSource[i].setFilter(t)},destroy:function(){var t;for(t=0;t<this.source.length;t++)this.source[t].destroy();for(t=0;t<this.dataSource.length;t++)this.dataSource[t].destroy();for(var i in this.frames)this.frames[i].destroy();this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var n=this.manager.game.renderer;n&&n.type===o.WEBGL&&n.resetTextures(!0),this.manager=null}});t.exports=p},function(t,i,n){var o=n(78);t.exports=function(t,i,n,a,u){void 0===a&&(a=0),void 0===u&&(u=t.length);var d=[];if(o(t,a,u))for(var f=a;f<u;f++){var p=t[f];(!i||i&&void 0===n&&p.hasOwnProperty(i)||i&&void 0!==n&&p[i]===n)&&d.push(p)}return d}},function(t,i,n){t.exports={Matrix:n(1013),Add:n(1021),AddAt:n(1022),BringToTop:n(1023),CountAllMatching:n(1024),Each:n(1025),EachInRange:n(1026),FindClosestInSorted:n(318),GetAll:n(207),GetFirst:n(428),GetRandom:n(210),MoveDown:n(1027),MoveTo:n(1028),MoveUp:n(1029),MoveAbove:n(1030),MoveBelow:n(1031),NumberArray:n(322),NumberArrayStep:n(1032),QuickSelect:n(436),Range:n(437),Remove:n(93),RemoveAt:n(1033),RemoveBetween:n(1034),RemoveRandomElement:n(1035),Replace:n(1036),RotateLeft:n(178),RotateRight:n(179),SafeRange:n(78),SendToBack:n(1037),SetAll:n(1038),Shuffle:n(131),SortByDigits:n(320),SpliceOne:n(74),StableSort:n(79),Swap:n(1039)}},function(t,i){t.exports=function(t){if(!Array.isArray(t)||t.length<2||!Array.isArray(t[0]))return!1;for(var i=t[0].length,n=1;n<t.length;n++)if(t[n].length!==i)return!1;return!0}},function(t,i){t.exports=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=t.length);var o=i+Math.floor(Math.random()*n);return void 0===t[o]?null:t[o]}},function(t,i,n){var o=n(0),a=n(9),u=n(438),d=new o({Extends:a,initialize:function ProcessQueue2(){a.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(t){return this._pending.push(t),this._toProcess++,t},remove:function(t){return this._destroy.push(t),this._toProcess++,t},removeAll:function(){for(var t=this._active,i=this._destroy,n=t.length;n--;)i.push(t[n]),this._toProcess++;return this},update:function(){if(0===this._toProcess)return this._active;var t,i,n=this._destroy,o=this._active;for(t=0;t<n.length;t++){i=n[t];var a=o.indexOf(i);-1!==a&&(o.splice(a,1),this.emit(u.PROCESS_QUEUE_REMOVE,i))}for(n.length=0,n=this._pending,t=0;t<n.length;t++)i=n[t],(!this.checkQueue||this.checkQueue&&-1===o.indexOf(i))&&(o.push(i),this.emit(u.PROCESS_QUEUE_ADD,i));return n.length=0,this._toProcess=0,o},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});t.exports=d},function(t,i){function getValue(t,i){return parseInt(t.getAttribute(i),10)}t.exports=function(t,i,n,o,a){void 0===n&&(n=0),void 0===o&&(o=0);var u=i.cutX,d=i.cutY,f=i.source.width,p=i.source.height,b=i.sourceIndex,S={},M=t.getElementsByTagName("info")[0],C=t.getElementsByTagName("common")[0];S.font=M.getAttribute("face"),S.size=getValue(M,"size"),S.lineHeight=getValue(C,"lineHeight")+o,S.chars={};var P=t.getElementsByTagName("char"),R=void 0!==i&&i.trimmed;if(R)var O=i.height,B=i.width;for(var N=0;N<P.length;N++){var Y=P[N],X=getValue(Y,"id"),G=String.fromCharCode(X),U=getValue(Y,"x"),V=getValue(Y,"y"),z=getValue(Y,"width"),W=getValue(Y,"height");R&&(U<B&&(B=U),V<O&&(O=V)),R&&0!==O&&0!==B&&(U-=i.x,V-=i.y);var H=(u+U)/f,j=(d+V)/p,q=(u+U+z)/f,Z=(d+V+W)/p;if(S.chars[X]={x:U,y:V,width:z,height:W,centerX:Math.floor(z/2),centerY:Math.floor(W/2),xOffset:getValue(Y,"xoffset"),yOffset:getValue(Y,"yoffset"),xAdvance:getValue(Y,"xadvance")+n,data:{},kerning:{},u0:H,v0:j,u1:q,v1:Z},a&&0!==z&&0!==W){var K=a.add(G,b,U,V,z,W);K&&K.setUVs(z,W,H,j,q,Z)}}var $=t.getElementsByTagName("kerning");for(N=0;N<$.length;N++){var tt=$[N],et=getValue(tt,"first"),it=getValue(tt,"second"),nt=getValue(tt,"amount");S.chars[it].kerning[et]=nt}return S}},function(t,i,n){var o=n(1049),a=n(440),u=n(0),d=n(11),f=n(109),p=n(15),b=n(110),S=new u({Extends:p,Mixins:[d.Alpha,d.BlendMode,d.Depth,d.Mask,d.Pipeline,d.ScrollFactor,d.Size,d.Texture,d.Transform,d.Visible,o],initialize:function Blitter2(t,i,n,o,a){p.call(this,t,"Blitter"),this.setTexture(o,a),this.setPosition(i,n),this.initPipeline(),this.children=new b,this.renderList=[],this.dirty=!1},create:function(t,i,n,o,u){void 0===o&&(o=!0),void 0===u&&(u=this.children.length),void 0===n?n=this.frame:n instanceof f||(n=this.texture.get(n));var d=new a(this,t,i,n,o);return this.children.addAt(d,u,!1),this.dirty=!0,d},createFromCallback:function(t,i,n,o){for(var a=this.createMultiple(i,n,o),u=0;u<a.length;u++){var d=a[u];t.call(this,d,u)}return a},createMultiple:function(t,i,n){void 0===i&&(i=this.frame.name),void 0===n&&(n=!0),Array.isArray(i)||(i=[i]);var o=[],a=this;return i.forEach((function(i){for(var u=0;u<t;u++)o.push(a.create(0,0,i,n))})),o},childCanRender:function(t){return t.visible&&t.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});t.exports=S},function(t,i,n){var o=n(208),a=n(35),u=n(0),d=n(11),f=n(75),p=n(15),b=n(10),S=n(1052),M=n(441),C=n(3),P=new u({Extends:p,Mixins:[d.AlphaSingle,d.BlendMode,d.ComputedSize,d.Depth,d.Mask,d.Pipeline,d.Transform,d.Visible,S],initialize:function Container2(t,i,n,o){p.call(this,t,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new d.TransformMatrix,this.tempTransformMatrix=new d.TransformMatrix,this._sortKey="",this._sysEvents=t.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(i,n),this.clearAlpha(),this.setBlendMode(a.SKIP_CHECK),o&&this.add(o)},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return.5*this.width}},displayOriginY:{get:function(){return.5*this.height}},setExclusive:function(t){return void 0===t&&(t=!0),this.exclusive=t,this},getBounds:function(t){if(void 0===t&&(t=new b),t.setTo(this.x,this.y,0,0),this.parentContainer){var i=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y);t.setTo(i.x,i.y,0,0)}if(this.list.length>0){var n=this.list,o=new b,a=!1;t.setEmpty();for(var u=0;u<n.length;u++){var d=n[u];d.getBounds&&(d.getBounds(o),a?M(o,t,t):(t.setTo(o.x,o.y,o.width,o.height),a=!0))}}return t},addHandler:function(t){t.once(f.DESTROY,this.remove,this),this.exclusive&&(t.parentContainer&&t.parentContainer.remove(t),t.removeFromDisplayList(),t.parentContainer=this)},removeHandler:function(t){t.off(f.DESTROY,this.remove),this.exclusive&&(t.parentContainer=null,t.addToDisplayList())},pointToContainer:function(t,i){void 0===i&&(i=new C),this.parentContainer?this.parentContainer.pointToContainer(t,i):i=new C(t.x,t.y);var n=this.tempTransformMatrix;return n.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),n.invert(),n.transformPoint(t.x,t.y,i),i},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(t){return o.Add(this.list,t,this.maxSize,this.addHandler,this),this},addAt:function(t,i){return o.AddAt(this.list,t,i,this.maxSize,this.addHandler,this),this},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,i){return t?(void 0===i&&(i=function(i,n){return i[t]-n[t]}),o.StableSort(this.list,i),this):this},getByName:function(t){return o.GetFirst(this.list,"name",t)},getRandom:function(t,i){return o.GetRandom(this.list,t,i)},getFirst:function(t,i,n,a){return o.GetFirst(this.list,t,i,n,a)},getAll:function(t,i,n,a){return o.GetAll(this.list,t,i,n,a)},count:function(t,i,n,a){return o.CountAllMatching(this.list,t,i,n,a)},swap:function(t,i){return o.Swap(this.list,t,i),this},moveTo:function(t,i){return o.MoveTo(this.list,t,i),this},moveAbove:function(t,i){return o.MoveAbove(this.list,t,i),this},moveBelow:function(t,i){return o.MoveBelow(this.list,t,i),this},remove:function(t,i){var n=o.Remove(this.list,t,this.removeHandler,this);if(i&&n){Array.isArray(n)||(n=[n]);for(var a=0;a<n.length;a++)n[a].destroy()}return this},removeAt:function(t,i){var n=o.RemoveAt(this.list,t,this.removeHandler,this);return i&&n&&n.destroy(),this},removeBetween:function(t,i,n){var a=o.RemoveBetween(this.list,t,i,this.removeHandler,this);if(n)for(var u=0;u<a.length;u++)a[u].destroy();return this},removeAll:function(t){var i=o.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(t)for(var n=0;n<i.length;n++)i[n].destroy();return this},bringToTop:function(t){return o.BringToTop(this.list,t),this},sendToBack:function(t){return o.SendToBack(this.list,t),this},moveUp:function(t){return o.MoveUp(this.list,t),this},moveDown:function(t){return o.MoveDown(this.list,t),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return o.Shuffle(this.list),this},replace:function(t,i,n){return o.Replace(this.list,t,i)&&(this.addHandler(i),this.removeHandler(t),n&&t.destroy()),this},exists:function(t){return this.list.indexOf(t)>-1},setAll:function(t,i,n,a){return o.SetAll(this.list,t,i,n,a),this},each:function(t,i){var n,o=[null],a=this.list.slice(),u=a.length;for(n=2;n<arguments.length;n++)o.push(arguments[n]);for(n=0;n<u;n++)o[0]=a[n],t.apply(i,o);return this},iterate:function(t,i){var n,o=[null];for(n=2;n<arguments.length;n++)o.push(arguments[n]);for(n=0;n<this.list.length;n++)o[0]=this.list[n],t.apply(i,o);return this},setScrollFactor:function(t,i,n){return void 0===i&&(i=t),void 0===n&&(n=!1),this.scrollFactorX=t,this.scrollFactorY=i,n&&(o.SetAll(this.list,"scrollFactorX",t),o.SetAll(this.list,"scrollFactorY",i)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});t.exports=P},function(t,i,n){var o=n(148),a=n(0),u=n(1057),d=new a({Extends:o,Mixins:[u],initialize:function DynamicBitmapText2(t,i,n,a,u,d,f){o.call(this,t,i,n,a,u,d,f),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(t,i){return this.cropWidth=t,this.cropHeight=i,this},setDisplayCallback:function(t){return this.displayCallback=t,this},setScrollX:function(t){return this.scrollX=t,this},setScrollY:function(t){return this.scrollY=t,this}});t.exports=d},function(t,i,n){var o=n(133),a=n(0),u=n(217),d=n(303),f=n(304),p=n(305),b=n(309),S=n(167),M=n(312),C=n(313),P=n(314),R=n(111),O=n(15),B=n(2),N=n(6),Y=n(14),X=n(1063),G=new a({Extends:O,Mixins:[d,f,p,b,S,C,P,M,X],initialize:function Graphics2(t,i){var n=N(i,"x",0),o=N(i,"y",0);O.call(this,t,"Graphics"),this.setPosition(n,o),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(i)},setDefaultStyles:function(t){return N(t,"lineStyle",null)&&(this.defaultStrokeWidth=N(t,"lineStyle.width",1),this.defaultStrokeColor=N(t,"lineStyle.color",16777215),this.defaultStrokeAlpha=N(t,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),N(t,"fillStyle",null)&&(this.defaultFillColor=N(t,"fillStyle.color",16777215),this.defaultFillAlpha=N(t,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(t,i,n){return void 0===n&&(n=1),this.commandBuffer.push(u.LINE_STYLE,t,i,n),this._lineWidth=t,this},fillStyle:function(t,i){return void 0===i&&(i=1),this.commandBuffer.push(u.FILL_STYLE,t,i),this},fillGradientStyle:function(t,i,n,o,a,d,f,p){return void 0===a&&(a=1),void 0===d&&(d=a),void 0===f&&(f=a),void 0===p&&(p=a),this.commandBuffer.push(u.GRADIENT_FILL_STYLE,a,d,f,p,t,i,n,o),this},lineGradientStyle:function(t,i,n,o,a,d){return void 0===d&&(d=1),this.commandBuffer.push(u.GRADIENT_LINE_STYLE,t,d,i,n,o,a),this},beginPath:function(){return this.commandBuffer.push(u.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(u.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(u.FILL_PATH),this},fill:function(){return this.commandBuffer.push(u.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(u.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(u.STROKE_PATH),this},fillCircleShape:function(t){return this.fillCircle(t.x,t.y,t.radius)},strokeCircleShape:function(t){return this.strokeCircle(t.x,t.y,t.radius)},fillCircle:function(t,i,n){return this.beginPath(),this.arc(t,i,n,0,Y.PI2),this.fillPath(),this},strokeCircle:function(t,i,n){return this.beginPath(),this.arc(t,i,n,0,Y.PI2),this.strokePath(),this},fillRectShape:function(t){return this.fillRect(t.x,t.y,t.width,t.height)},strokeRectShape:function(t){return this.strokeRect(t.x,t.y,t.width,t.height)},fillRect:function(t,i,n,o){return this.commandBuffer.push(u.FILL_RECT,t,i,n,o),this},strokeRect:function(t,i,n,o){var a=this._lineWidth/2,u=t-a,d=t+a;return this.beginPath(),this.moveTo(t,i),this.lineTo(t,i+o),this.strokePath(),this.beginPath(),this.moveTo(t+n,i),this.lineTo(t+n,i+o),this.strokePath(),this.beginPath(),this.moveTo(u,i),this.lineTo(d+n,i),this.strokePath(),this.beginPath(),this.moveTo(u,i+o),this.lineTo(d+n,i+o),this.strokePath(),this},fillRoundedRect:function(t,i,n,o,a){void 0===a&&(a=20);var u=a,d=a,f=a,p=a;return"number"!=typeof a&&(u=B(a,"tl",20),d=B(a,"tr",20),f=B(a,"bl",20),p=B(a,"br",20)),this.beginPath(),this.moveTo(t+u,i),this.lineTo(t+n-d,i),this.arc(t+n-d,i+d,d,-Y.TAU,0),this.lineTo(t+n,i+o-p),this.arc(t+n-p,i+o-p,p,0,Y.TAU),this.lineTo(t+f,i+o),this.arc(t+f,i+o-f,f,Y.TAU,Math.PI),this.lineTo(t,i+u),this.arc(t+u,i+u,u,-Math.PI,-Y.TAU),this.fillPath(),this},strokeRoundedRect:function(t,i,n,o,a){void 0===a&&(a=20);var u=a,d=a,f=a,p=a;return"number"!=typeof a&&(u=B(a,"tl",20),d=B(a,"tr",20),f=B(a,"bl",20),p=B(a,"br",20)),this.beginPath(),this.moveTo(t+u,i),this.lineTo(t+n-d,i),this.moveTo(t+n-d,i),this.arc(t+n-d,i+d,d,-Y.TAU,0),this.lineTo(t+n,i+o-p),this.moveTo(t+n,i+o-p),this.arc(t+n-p,i+o-p,p,0,Y.TAU),this.lineTo(t+f,i+o),this.moveTo(t+f,i+o),this.arc(t+f,i+o-f,f,Y.TAU,Math.PI),this.lineTo(t,i+u),this.moveTo(t,i+u),this.arc(t+u,i+u,u,-Math.PI,-Y.TAU),this.strokePath(),this},fillPointShape:function(t,i){return this.fillPoint(t.x,t.y,i)},fillPoint:function(t,i,n){return!n||n<1?n=1:(t-=n/2,i-=n/2),this.commandBuffer.push(u.FILL_RECT,t,i,n,n),this},fillTriangleShape:function(t){return this.fillTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},strokeTriangleShape:function(t){return this.strokeTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},fillTriangle:function(t,i,n,o,a,d){return this.commandBuffer.push(u.FILL_TRIANGLE,t,i,n,o,a,d),this},strokeTriangle:function(t,i,n,o,a,d){return this.commandBuffer.push(u.STROKE_TRIANGLE,t,i,n,o,a,d),this},strokeLineShape:function(t){return this.lineBetween(t.x1,t.y1,t.x2,t.y2)},lineBetween:function(t,i,n,o){return this.beginPath(),this.moveTo(t,i),this.lineTo(n,o),this.strokePath(),this},lineTo:function(t,i){return this.commandBuffer.push(u.LINE_TO,t,i),this},moveTo:function(t,i){return this.commandBuffer.push(u.MOVE_TO,t,i),this},strokePoints:function(t,i,n,o){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===o&&(o=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var a=1;a<o;a++)this.lineTo(t[a].x,t[a].y);return i&&this.lineTo(t[0].x,t[0].y),n&&this.closePath(),this.strokePath(),this},fillPoints:function(t,i,n,o){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===o&&(o=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var a=1;a<o;a++)this.lineTo(t[a].x,t[a].y);return i&&this.lineTo(t[0].x,t[0].y),n&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(t,i){void 0===i&&(i=32);var n=t.getPoints(i);return this.strokePoints(n,!0)},strokeEllipse:function(t,i,n,o,a){void 0===a&&(a=32);var u=new R(t,i,n,o).getPoints(a);return this.strokePoints(u,!0)},fillEllipseShape:function(t,i){void 0===i&&(i=32);var n=t.getPoints(i);return this.fillPoints(n,!0)},fillEllipse:function(t,i,n,o,a){void 0===a&&(a=32);var u=new R(t,i,n,o).getPoints(a);return this.fillPoints(u,!0)},arc:function(t,i,n,o,a,d,f){return void 0===d&&(d=!1),void 0===f&&(f=0),this.commandBuffer.push(u.ARC,t,i,n,o,a,d,f),this},slice:function(t,i,n,o,a,d,f){return void 0===d&&(d=!1),void 0===f&&(f=0),this.commandBuffer.push(u.BEGIN_PATH),this.commandBuffer.push(u.MOVE_TO,t,i),this.commandBuffer.push(u.ARC,t,i,n,o,a,d,f),this.commandBuffer.push(u.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(u.SAVE),this},restore:function(){return this.commandBuffer.push(u.RESTORE),this},translateCanvas:function(t,i){return this.commandBuffer.push(u.TRANSLATE,t,i),this},scaleCanvas:function(t,i){return this.commandBuffer.push(u.SCALE,t,i),this},rotateCanvas:function(t){return this.commandBuffer.push(u.ROTATE,t),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(t,i,n){var o,a,u=this.scene.sys,d=u.game.renderer;if(void 0===i&&(i=u.scale.width),void 0===n&&(n=u.scale.height),G.TargetCamera.setScene(this.scene),G.TargetCamera.setViewport(0,0,i,n),G.TargetCamera.scrollX=this.x,G.TargetCamera.scrollY=this.y,"string"==typeof t)if(u.textures.exists(t)){var f=(o=u.textures.get(t)).getSourceImage();f instanceof HTMLCanvasElement&&(a=f.getContext("2d"))}else a=(o=u.textures.createCanvas(t,i,n)).getSourceImage().getContext("2d");else t instanceof HTMLCanvasElement&&(a=t.getContext("2d"));return a&&(this.renderCanvas(d,this,G.TargetCamera,null,a,!1),o&&o.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});G.TargetCamera=new o,t.exports=G},function(t,i){t.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(t,i,n){var o=n(4);t.exports=function(t,i,n){void 0===n&&(n=new o);var a=t.width/2,u=t.height/2;return n.x=t.x+a*Math.cos(i),n.y=t.y+u*Math.sin(i),n}},function(t,i,n){var o=n(35),a=n(0),u=n(11),d=n(176),f=n(101),p=n(9),b=n(75),S=n(110),M=n(1071),C=n(20),P=n(79),R=new a({Extends:S,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Mask,u.Pipeline,u.Visible,p,M],initialize:function Layer2(t,i){S.call(this,t),p.call(this),this.scene=t,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=t.sys,this.events=t.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(o.SKIP_CHECK),i&&this.add(i),t.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setState:function(t){return this.state=t,this},setDataEnabled:function(){return this.data||(this.data=new f(this)),this},setData:function(t,i){return this.data||(this.data=new f(this)),this.data.set(t,i),this},incData:function(t,i){return this.data||(this.data=new f(this)),this.data.inc(t,i),this},toggleData:function(t){return this.data||(this.data=new f(this)),this.data.toggle(t),this},getData:function(t){return this.data||(this.data=new f(this)),this.data.get(t)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return d(this)},willRender:function(t){return!(15!==this.renderFlags||0===this.list.length||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function(){for(var t=this,i=this.parentContainer,n=[];i&&(n.unshift(i.getIndex(t)),t=i,i.parentContainer);)i=i.parentContainer;return n.unshift(this.displayList.getIndex(t)),n},addChildCallback:function(t){t.displayList&&t.displayList!==this&&t.removeFromDisplayList(),t.displayList||(this.queueDepthSort(),t.displayList=this,t.emit(b.ADDED_TO_SCENE,t,this.scene),this.events.emit(C.ADDED_TO_SCENE,t,this.scene))},removeChildCallback:function(t){this.queueDepthSort(),t.displayList=null,t.emit(b.REMOVED_FROM_SCENE,t,this.scene),this.events.emit(C.REMOVED_FROM_SCENE,t,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(P(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(t,i){return t._depth-i._depth},getChildren:function(){return this.list},destroy:function(){if(this.scene&&!this.ignoreDestroy){this.emit(b.DESTROY,this);for(var t=this.list.length;t--;)this.list[t].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});t.exports=R},function(t,i,n){var o=n(0),a=n(11),u=n(15),d=n(450),f=n(110),p=n(452),b=n(1075),S=new o({Extends:u,Mixins:[a.Depth,a.Mask,a.Pipeline,a.Transform,a.Visible,b],initialize:function ParticleEmitterManager2(t,i,n,o){if(u.call(this,t,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],null===n||"object"!=typeof n&&!Array.isArray(n)||(o=n,n=null),this.setTexture(i,n),this.initPipeline(),this.emitters=new f(this),this.wells=new f(this),o){Array.isArray(o)||(o=[o]);for(var a=0;a<o.length;a++)this.createEmitter(o[a])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(t,i){return this.texture=this.scene.sys.textures.get(t),this.setFrame(i)},setFrame:function(t){this.frame=this.texture.get(t);var i=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),n=[];return i.forEach((function(t){n.push(t.name)})),this.frameNames=n,this.defaultFrame=this.frame,this},setEmitterFrames:function(t,i){Array.isArray(t)||(t=[t]);var n=i.frames;n.length=0;for(var o=0;o<t.length;o++){var a=t[o];-1!==this.frameNames.indexOf(a)&&n.push(this.texture.get(a))}return n.length>0?i.defaultFrame=n[0]:i.defaultFrame=this.defaultFrame,this},addEmitter:function(t){return this.emitters.add(t)},createEmitter:function(t){return this.addEmitter(new p(this,t))},removeEmitter:function(t){return this.emitters.remove(t,!0)},addGravityWell:function(t){return this.wells.add(t)},createGravityWell:function(t){return this.addGravityWell(new d(t))},emitParticle:function(t,i,n){for(var o=this.emitters.list,a=0;a<o.length;a++){var u=o[a];u.active&&u.emitParticle(t,i,n)}return this},emitParticleAt:function(t,i,n){return this.emitParticle(n,t,i)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(t,i){i*=this.timeScale;for(var n=this.emitters.list,o=0;o<n.length;o++){var a=n[o];a.active&&a.preUpdate(t,i)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});t.exports=S},function(t,i,n){var o=n(35),a=n(133),u=n(31),d=n(0),f=n(11),p=n(33),b=n(109),S=n(15),M=n(1),C=n(92),P=n(1079),R=n(141),O=n(12),B=n(222),N=new d({Extends:S,Mixins:[f.Alpha,f.BlendMode,f.ComputedSize,f.Crop,f.Depth,f.Flip,f.GetBounds,f.Mask,f.Origin,f.Pipeline,f.ScrollFactor,f.Tint,f.Transform,f.Visible,P],initialize:function RenderTexture2(t,i,n,o,d,f,b){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=32),void 0===d&&(d=32),S.call(this,t,"RenderTexture"),this.renderer=t.sys.renderer,this.textureManager=t.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,void 0===f?(this.canvas=u.create2D(this,o,d),this.texture=t.sys.textures.addCanvas(B(),this.canvas),this.frame=this.texture.get()):(this.texture=t.sys.textures.get(f),this.frame=this.texture.get(b),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new a(0,0,o,d),this.renderTarget=null;var P=this.renderer;P?P.type===p.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new R(P,o,d,1,0,!1)):P.type===p.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=M,this.camera.setScene(t),this.setPosition(i,n),void 0===f&&this.setSize(o,d),this.setOrigin(0,0),this.initPipeline(C.SINGLE_PIPELINE)},setSize:function(t,i){return this.resize(t,i)},resize:function(t,i){void 0===i&&(i=t);var n=this.frame;if(t!==this.width||i!==this.height){if("__BASE"===n.name){this.canvas.width=t,this.canvas.height=i,this.texture.width=t,this.texture.height=i;var o=this.renderTarget;o&&(o.resize(t,i),n.glTexture=o.texture,n.source.isRenderTexture=!0,n.source.isGLTexture=!0,n.source.glTexture=o.texture),this.camera.setSize(t,i),n.source.width=t,n.source.height=i,n.setSize(t,i),this.width=t,this.height=i}}else{var a=this.texture.getSourceImage();n.cutX+t>a.width&&(t=a.width-n.cutX),n.cutY+i>a.height&&(i=a.height-n.cutY),n.setSize(t,i,n.cutX,n.cutY)}this.updateDisplayOrigin();var u=this.input;return u&&!u.customHitArea&&(u.hitArea.width=t,u.hitArea.height=i),this},setGlobalTint:function(t){return this.globalTint=t,this},setGlobalAlpha:function(t){return this.globalAlpha=t,this},saveTexture:function(t){return this.textureManager.renameTexture(this.texture.key,t),this._saved=!0,this.texture},fill:function(t,i,n,o,a,u){var d=this.frame,f=this.camera,p=this.renderer;void 0===i&&(i=1),void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=d.cutWidth),void 0===u&&(u=d.cutHeight);var b=(t>>16&255)/255,S=(t>>8&255)/255,M=(255&t)/255,C=this.renderTarget;if(f.preRender(),C){C.bind(!0);var P=this.pipeline;P.manager.set(P);var R=C.width,B=C.height,N=p.width/R,Y=p.height/B;P.drawFillRect(n*N,o*Y,a*N,u*Y,O.getTintFromFloats(M,S,b,1),i),C.unbind(!0)}else{var X=this.context;p.setContext(X),X.fillStyle="rgba("+b+","+S+","+M+","+i+")",X.fillRect(n+d.cutX,o+d.cutY,a,u),p.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var t=this.renderTarget;if(t)t.clear();else{var i=this.context;i.save(),i.setTransform(1,0,0,1,0,0),i.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),i.restore()}this.dirty=!1}return this},erase:function(t,i,n){return this._eraseMode=!0,this.draw(t,i,n,1,16777215),this._eraseMode=!1,this},draw:function(t,i,n,o,a){return this.beginDraw(),this.batchDraw(t,i,n,o,a),this.endDraw(),this},drawFrame:function(t,i,n,o,a,u){return this.beginDraw(),this.batchDrawFrame(t,i,n,o,a,u),this.endDraw(),this},beginDraw:function(){var t=this.camera,i=this.renderer,n=this.renderTarget;return t.preRender(),n?i.beginCapture(n.width,n.height):i.setContext(this.context),this},batchDraw:function(t,i,n,o,a){return void 0===o&&(o=this.globalAlpha),a=void 0===a?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(a>>16)+(65280&a)+((255&a)<<16),Array.isArray(t)||(t=[t]),this.batchList(t,i,n,o,a),this},batchDrawFrame:function(t,i,n,o,a,u){void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=this.globalAlpha),u=void 0===u?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(u>>16)+(65280&u)+((255&u)<<16);var d=this.textureManager.getFrame(t,i);return d&&(this.renderTarget?this.pipeline.batchTextureFrame(d,n,o,u,a,this.camera.matrix,null):this.batchTextureFrame(d,n+this.frame.cutX,o+this.frame.cutY,a,u)),this},endDraw:function(t){void 0===t&&(t=this._eraseMode);var i=this.renderer,n=this.renderTarget;if(n){var o=i.endCapture();i.pipelines.setUtility().blitFrame(o,n,1,!1,!1,t),i.resetScissor(),i.resetViewport()}else i.setContext();return this.dirty=!0,this},batchList:function(t,i,n,o,a){for(var u=0;u<t.length;u++){var d=t[u];d&&d!==this&&(d.renderWebGL||d.renderCanvas?this.drawGameObject(d,i,n):d.isParent||d.list?this.batchGroup(d.getChildren(),i,n):"string"==typeof d?this.batchTextureFrameKey(d,null,i,n,o,a):d instanceof b?this.batchTextureFrame(d,i,n,o,a):Array.isArray(d)&&this.batchList(d,i,n,o,a))}},batchGroup:function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=0),i+=this.frame.cutX,n+=this.frame.cutY;for(var o=0;o<t.length;o++){var a=t[o];if(a.willRender(this.camera)){var u=a.x+i,d=a.y+n;this.drawGameObject(a,u,d)}}},batchGameObjectWebGL:function(t,i,n){void 0===i&&(i=t.x),void 0===n&&(n=t.y);var o=t.x,a=t.y;t.setPosition(i+this.frame.cutX,n+this.frame.cutY),t.renderDirect?t.renderDirect(this.renderer,t,this.camera):t.renderWebGL(this.renderer,t,this.camera),t.setPosition(o,a)},batchGameObjectCanvas:function(t,i,n){void 0===i&&(i=t.x),void 0===n&&(n=t.y);var a=t.x,u=t.y;if(this._eraseMode){var d=t.blendMode;t.blendMode=o.ERASE}t.setPosition(i+this.frame.cutX,n+this.frame.cutY),t.renderCanvas(this.renderer,t,this.camera,null),t.setPosition(a,u),this._eraseMode&&(t.blendMode=d)},batchTextureFrameKey:function(t,i,n,o,a,u){var d=this.textureManager.getFrame(t,i);d&&this.batchTextureFrame(d,n,o,a,u)},batchTextureFrame:function(t,i,n,o,a){if(void 0===i&&(i=0),void 0===n&&(n=0),i+=this.frame.cutX,n+=this.frame.cutY,this.renderTarget)this.pipeline.batchTextureFrame(t,i,n,a,o,this.camera.matrix,null);else{var u=this.context,d=t.canvasData,f=t.source.image,p=this.camera.matrix;u.save(),u.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",u.globalAlpha=o,p.setToContext(u),u.drawImage(f,d.x,d.y,d.width,d.height,i,n,d.width,d.height),u.restore()}},snapshotArea:function(t,i,n,o,a,u,d){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,a,!1,t,i,n,o,u,d):this.renderer.snapshotCanvas(this.canvas,a,!1,t,i,n,o,u,d),this},snapshot:function(t,i,n){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,t,!1,0,0,this.width,this.height,i,n):this.renderer.snapshotCanvas(this.canvas,t,!1,0,0,this.width,this.height,i,n),this},snapshotPixel:function(t,i,n){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,n,!0,t,i):this.renderer.snapshotCanvas(this.canvas,n,!0,t,i),this},preDestroy:function(){this._saved||(u.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});t.exports=N},function(t,i){t.exports=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var i=16*Math.random()|0;return("x"===t?i:3&i|8).toString(16)}))}},function(t,i,n){var o=n(164),a=n(0),u=n(11),d=n(15),f=n(92),p=n(1085),b=n(3),S=new a({Extends:d,Mixins:[u.AlphaSingle,u.BlendMode,u.Depth,u.Flip,u.Mask,u.Pipeline,u.Size,u.Texture,u.Transform,u.Visible,u.ScrollFactor,p],initialize:function Rope2(t,i,n,a,u,p,S,M,C){void 0===a&&(a="__DEFAULT"),void 0===p&&(p=2),void 0===S&&(S=!0),d.call(this,t,"Rope"),this.anims=new o(this),this.points=p,this.vertices,this.uv,this.colors,this.alphas,this.tintFill="__DEFAULT"===a,this.dirty=!1,this.horizontal=S,this._flipX=!1,this._flipY=!1,this._perp=new b,this.debugCallback=null,this.debugGraphic=null,this.setTexture(a,u),this.setPosition(i,n),this.setSizeToFrame(),this.initPipeline(f.ROPE_PIPELINE),Array.isArray(p)&&this.resizeArrays(p.length),this.setPoints(p,M,C),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(t,i){var n=this.anims.currentFrame;this.anims.update(t,i),this.anims.currentFrame!==n&&(this.updateUVs(),this.updateVertices())},play:function(t,i,n){return this.anims.play(t,i,n),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(t,i,n){return void 0===t&&(t=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(t,i,n))},setVertical:function(t,i,n){return void 0===t&&(t=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(t,i,n)):this},setTintFill:function(t){return void 0===t&&(t=!1),this.tintFill=t,this},setAlphas:function(t,i){var n=this.points.length;if(n<1)return this;var o,a=this.alphas;void 0===t?t=[1]:Array.isArray(t)||void 0!==i||(t=[t]);var u=0;if(void 0!==i)for(o=0;o<n;o++)a[u=2*o]=t,a[u+1]=i;else if(t.length===n)for(o=0;o<n;o++)a[u=2*o]=t[o],a[u+1]=t[o];else{var d=t[0];for(o=0;o<n;o++)u=2*o,t.length>u&&(d=t[u]),a[u]=d,t.length>u+1&&(d=t[u+1]),a[u+1]=d}return this},setColors:function(t){var i=this.points.length;if(i<1)return this;var n,o=this.colors;void 0===t?t=[16777215]:Array.isArray(t)||(t=[t]);var a=0;if(t.length===i)for(n=0;n<i;n++)o[a=2*n]=t[n],o[a+1]=t[n];else{var u=t[0];for(n=0;n<i;n++)a=2*n,t.length>a&&(u=t[a]),o[a]=u,t.length>a+1&&(u=t[a+1]),o[a+1]=u}return this},setPoints:function(t,i,n){if(void 0===t&&(t=2),"number"==typeof t){var o,a,u,d=t;if(d<2&&(d=2),t=[],this.horizontal)for(u=-this.frame.halfWidth,a=this.frame.width/(d-1),o=0;o<d;o++)t.push({x:u+o*a,y:0});else for(u=-this.frame.halfHeight,a=this.frame.height/(d-1),o=0;o<d;o++)t.push({x:0,y:u+o*a})}var f=t.length,p=this.points.length;return f<1?(console.warn("Rope: Not enough points given"),this):(1===f&&(t.unshift({x:0,y:0}),f++),p!==f&&this.resizeArrays(f),this.points=t,this.updateUVs(),null!=i&&this.setColors(i),null!=n&&this.setAlphas(n),this)},updateUVs:function(){for(var t=this.uv,i=this.points.length,n=this.frame.u0,o=this.frame.v0,a=this.frame.u1,u=this.frame.v1,d=(a-n)/(i-1),f=(u-o)/(i-1),p=0;p<i;p++){var b,S,M,C,P=4*p;this.horizontal?(this._flipX?(b=a-p*d,M=a-p*d):(b=n+p*d,M=n+p*d),this._flipY?(S=u,C=o):(S=o,C=u)):(this._flipX?(b=n,M=a):(b=a,M=n),this._flipY?(S=u-p*f,C=u-p*f):(S=o+p*f,C=o+p*f)),t[P+0]=b,t[P+1]=S,t[P+2]=M,t[P+3]=C}return this},resizeArrays:function(t){var i=this.colors,n=this.alphas;this.vertices=new Float32Array(4*t),this.uv=new Float32Array(4*t),i=new Uint32Array(2*t),n=new Float32Array(2*t);for(var o=0;o<2*t;o++)i[o]=16777215,n[o]=1;return this.colors=i,this.alphas=n,this.dirty=!0,this},updateVertices:function(){var t=this._perp,i=this.points,n=this.vertices,o=i.length;if(this.dirty=!1,!(o<1)){for(var a,u=i[0],d=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,f=0;f<o;f++){var p=i[f],b=4*f;a=f<o-1?i[f+1]:p,t.x=a.y-u.y,t.y=-(a.x-u.x);var S=t.length();t.x/=S,t.y/=S,t.x*=d,t.y*=d,n[b]=p.x+t.x,n[b+1]=p.y+t.y,n[b+2]=p.x-t.x,n[b+3]=p.y-t.y,u=p}return this}},setDebug:function(t,i){return this.debugGraphic=t,this.debugCallback=t||i?i||this.renderDebugVerts:null,this},renderDebugVerts:function(t,i,n){var o=t.debugGraphic,a=n[0],u=n[1],d=n[2],f=n[3];o.lineBetween(a,u,d,f);for(var p=4;p<i;p+=4){var b=n[p+0],S=n[p+1],M=n[p+2],C=n[p+3];o.lineBetween(a,u,b,S),o.lineBetween(d,f,M,C),o.lineBetween(d,f,b,S),o.lineBetween(b,S,M,C),a=b,u=S,d=M,f=C}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(t){return this._flipX=t,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(t){return this._flipY=t,this.updateUVs()}}});t.exports=S},function(t,i,n){var o=n(142),a=n(31),u=n(0),d=n(11),f=n(22),p=n(15),b=n(458),S=n(6),M=n(202),C=n(1088),P=n(459),R=new u({Extends:p,Mixins:[d.Alpha,d.BlendMode,d.ComputedSize,d.Crop,d.Depth,d.Flip,d.GetBounds,d.Mask,d.Origin,d.Pipeline,d.ScrollFactor,d.Tint,d.Transform,d.Visible,C],initialize:function Text2(t,i,n,o,u){void 0===i&&(i=0),void 0===n&&(n=0),p.call(this,t,"Text"),this.renderer=t.sys.renderer,this.setPosition(i,n),this.setOrigin(0,0),this.initPipeline(),this.canvas=a.create(this),this.context=this.canvas.getContext("2d"),this.style=new P(this,u),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,0===this.style.resolution&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(o),u&&u.padding&&this.setPadding(u.padding),u&&u.lineSpacing&&this.setLineSpacing(u.lineSpacing),t.sys.game.events.on(f.CONTEXT_RESTORED,(function(){this.dirty=!0}),this)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",o(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(t){var i=this.style;if(i.wordWrapCallback){var n=i.wordWrapCallback.call(i.wordWrapCallbackScope,t,this);return Array.isArray(n)&&(n=n.join("\n")),n}return i.wordWrapWidth?i.wordWrapUseAdvanced?this.advancedWordWrap(t,this.context,this.style.wordWrapWidth):this.basicWordWrap(t,this.context,this.style.wordWrapWidth):t},advancedWordWrap:function(t,i,n){for(var o="",a=t.replace(/ +/gi," ").split(this.splitRegExp),u=a.length,d=0;d<u;d++){var f=a[d],p="";if(f=f.replace(/^ *|\s*$/gi,""),i.measureText(f).width<n)o+=f+"\n";else{for(var b=n,S=f.split(" "),M=0;M<S.length;M++){var C=S[M],P=C+" ",R=i.measureText(P).width;if(R>b){if(0===M){for(var O=P;O.length&&(O=O.slice(0,-1),!((R=i.measureText(O).width)<=b)););if(!O.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var B=C.substr(O.length);S[M]=B,p+=O}var N=S[M].length?M:M+1,Y=S.slice(N).join(" ").replace(/[ \n]*$/gi,"");a[d+1]=Y+" "+(a[d+1]||""),u=a.length;break}p+=P,b-=R}o+=p.replace(/[ \n]*$/gi,"")+"\n"}}return o=o.replace(/[\s|\n]*$/gi,"")},basicWordWrap:function(t,i,n){for(var o="",a=t.split(this.splitRegExp),u=a.length-1,d=i.measureText(" ").width,f=0;f<=u;f++){for(var p=n,b=a[f].split(" "),S=b.length-1,M=0;M<=S;M++){var C=b[M],P=i.measureText(C).width,R=P;M<S&&(R+=d),R>p&&M>0&&(o+="\n",p=n),o+=C,M<S?(o+=" ",p-=R):p-=P}f<u&&(o+="\n")}return o},getWrappedText:function(t){return void 0===t&&(t=this._text),this.style.syncFont(this.canvas,this.context),this.runWordWrap(t).split(this.splitRegExp)},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this._text&&(this._text=t.toString(),this.updateText()),this},setStyle:function(t){return this.style.setStyle(t)},setFont:function(t){return this.style.setFont(t)},setFontFamily:function(t){return this.style.setFontFamily(t)},setFontSize:function(t){return this.style.setFontSize(t)},setFontStyle:function(t){return this.style.setFontStyle(t)},setFixedSize:function(t,i){return this.style.setFixedSize(t,i)},setBackgroundColor:function(t){return this.style.setBackgroundColor(t)},setFill:function(t){return this.style.setFill(t)},setColor:function(t){return this.style.setColor(t)},setStroke:function(t,i){return this.style.setStroke(t,i)},setShadow:function(t,i,n,o,a,u){return this.style.setShadow(t,i,n,o,a,u)},setShadowOffset:function(t,i){return this.style.setShadowOffset(t,i)},setShadowColor:function(t){return this.style.setShadowColor(t)},setShadowBlur:function(t){return this.style.setShadowBlur(t)},setShadowStroke:function(t){return this.style.setShadowStroke(t)},setShadowFill:function(t){return this.style.setShadowFill(t)},setWordWrapWidth:function(t,i){return this.style.setWordWrapWidth(t,i)},setWordWrapCallback:function(t,i){return this.style.setWordWrapCallback(t,i)},setAlign:function(t){return this.style.setAlign(t)},setResolution:function(t){return this.style.setResolution(t)},setLineSpacing:function(t){return this.lineSpacing=t,this.updateText()},setPadding:function(t,i,n,o){if("object"==typeof t){var a=t,u=S(a,"x",null);null!==u?(t=u,n=u):(t=S(a,"left",0),n=S(a,"right",t));var d=S(a,"y",null);null!==d?(i=d,o=d):(i=S(a,"top",0),o=S(a,"bottom",i))}else void 0===t&&(t=0),void 0===i&&(i=t),void 0===n&&(n=t),void 0===o&&(o=i);return this.padding.left=t,this.padding.top=i,this.padding.right=n,this.padding.bottom=o,this.updateText()},setMaxLines:function(t){return this.style.setMaxLines(t)},updateText:function(){var t=this.canvas,i=this.context,n=this.style,o=n.resolution,a=n.metrics;n.syncFont(t,i);var u=this._text;(n.wordWrapWidth||n.wordWrapCallback)&&(u=this.runWordWrap(this._text));var d,f=u.split(this.splitRegExp),p=b(this,a,f),S=this.padding;0===n.fixedWidth?(this.width=p.width+S.left+S.right,d=p.width):(this.width=n.fixedWidth,(d=this.width-S.left-S.right)<p.width&&(d=p.width)),0===n.fixedHeight?this.height=p.height+S.top+S.bottom:this.height=n.fixedHeight;var M,C,P=this.width,R=this.height;this.updateDisplayOrigin(),P*=o,R*=o,P=Math.max(P,1),R=Math.max(R,1),t.width!==P||t.height!==R?(t.width=P,t.height=R,this.frame.setSize(P,R),n.syncFont(t,i)):i.clearRect(0,0,P,R),i.save(),i.scale(o,o),n.backgroundColor&&(i.fillStyle=n.backgroundColor,i.fillRect(0,0,P,R)),n.syncStyle(t,i),i.textBaseline="alphabetic",i.translate(S.left,S.top);for(var O=0;O<p.lines;O++){if(M=n.strokeThickness/2,C=n.strokeThickness/2+O*p.lineHeight+a.ascent,O>0&&(C+=p.lineSpacing*O),n.rtl)M=P-M;else if("right"===n.align)M+=d-p.lineWidths[O];else if("center"===n.align)M+=(d-p.lineWidths[O])/2;else if("justify"===n.align&&p.lineWidths[O]/p.width>=.85){var B=p.width-p.lineWidths[O],N=i.measureText(" ").width,Y=f[O].trim(),X=Y.split(" ");B+=(f[O].length-Y.length)*N;for(var G=Math.floor(B/N),U=0;G>0;)X[U]+=" ",U=(U+1)%(X.length-1||1),--G;f[O]=X.join(" ")}this.autoRound&&(M=Math.round(M),C=Math.round(C)),n.strokeThickness&&(this.style.syncShadow(i,n.shadowStroke),i.strokeText(f[O],M,C)),n.color&&(this.style.syncShadow(i,n.shadowFill),i.fillText(f[O],M,C))}i.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(t,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var V=this.input;return V&&!V.customHitArea&&(V.hitArea.width=this.width,V.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(t){this.setText(t)}},toJSON:function(){var t=d.ToJSON(this),i={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=i,t},preDestroy:function(){this.style.rtl&&M(this.canvas),a.remove(this.canvas),this.texture.destroy()}});t.exports=R},function(t,i,n){var o=n(31),a=n(0),u=n(11),d=n(22),f=n(15),p=n(361),b=n(192),S=n(1091),M=n(3),C=new a({Extends:f,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Crop,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.ScrollFactor,u.Tint,u.Transform,u.Visible,S],initialize:function TileSprite2(t,i,n,a,u,b,S){var C=t.sys.renderer;f.call(this,t,"TileSprite");var P=t.sys.textures.get(b),R=P.get(S);a&&u?(a=Math.floor(a),u=Math.floor(u)):(a=R.width,u=R.height),this._tilePosition=new M,this._tileScale=new M(1,1),this.dirty=!1,this.renderer=C,this.canvas=o.create(this,a,u),this.context=this.canvas.getContext("2d"),this.displayTexture=P,this.displayFrame=R,this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=p(R.width),this.potHeight=p(R.height),this.fillCanvas=o.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(i,n),this.setSize(a,u),this.setFrame(S),this.setOriginFromFrame(),this.initPipeline(),t.sys.game.events.on(d.CONTEXT_RESTORED,(function(t){if(t){var i=t.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=t.createTexture2D(0,i.LINEAR,i.LINEAR,i.REPEAT,i.REPEAT,i.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}}),this)},setTexture:function(t,i){return this.displayTexture=this.scene.sys.textures.get(t),this.setFrame(i)},setFrame:function(t){var i=this.displayTexture.get(t);return this.potWidth=p(i.width),this.potHeight=p(i.height),this.canvas.width=0,i.cutWidth&&i.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this.displayFrame=i,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(t,i){return void 0!==t&&(this.tilePositionX=t),void 0!==i&&(this.tilePositionY=i),this},setTileScale:function(t,i){return void 0===t&&(t=this.tileScaleX),void 0===i&&(i=t),this.tileScaleX=t,this.tileScaleY=i,this},updateTileTexture:function(){if(this.dirty&&this.renderer){var t=this.displayFrame;if(t.source.isRenderTexture||t.source.isGLTexture)return console.warn("TileSprites can only use Image or Canvas based textures"),void(this.dirty=!1);var i=this.fillContext,n=this.fillCanvas,o=this.potWidth,a=this.potHeight;this.renderer&&this.renderer.gl||(o=t.cutWidth,a=t.cutHeight),i.clearRect(0,0,o,a),n.width=o,n.height=a,i.drawImage(t.source.image,t.cutX,t.cutY,t.cutWidth,t.cutHeight,0,0,o,a),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(n,this.fillPattern):this.fillPattern=i.createPattern(n,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var t=this.canvas;if(t.width===this.width&&t.height===this.height||(t.width=this.width,t.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl)this.dirty=!1;else{var i=this.context;this.scene.sys.game.config.antialias||b.disable(i);var n=this._tileScale.x,o=this._tileScale.y,a=this._tilePosition.x,u=this._tilePosition.y;i.clearRect(0,0,this.width,this.height),i.save(),i.scale(n,o),i.translate(-a,-u),i.fillStyle=this.fillPattern,i.fillRect(a,u,this.width/n,this.height/o),i.restore(),this.dirty=!1}},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),o.remove(this.canvas),o.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(t){this._tilePosition.x=t,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(t){this._tilePosition.y=t,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(t){this._tileScale.x=t,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(t){this._tileScale.y=t,this.dirty=!0}}});t.exports=C},function(t,i,n){var o=n(0),a=n(18),u=n(11),d=n(75),f=n(22),p=n(51),b=n(15),S=n(70),M=n(222),C=n(1094),P=n(14),R=new o({Extends:b,Mixins:[u.Alpha,u.BlendMode,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.ScrollFactor,u.Size,u.TextureCrop,u.Tint,u.Transform,u.Visible,C],initialize:function Video2(t,i,n,o){b.call(this,t,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=M(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=P.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(i,n),this.initPipeline(),o&&this.changeSource(o,!1);var a=t.sys.game.events;a.on(f.PAUSE,this.globalPause,this),a.on(f.RESUME,this.globalResume,this);var u=t.sys.sound;u&&u.on(S.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(t,i,n){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var o=this.video;if(!o)return console.warn("Video not loaded"),this;void 0===t&&(t=o.loop);var a=this.scene.sys.sound;a&&a.mute&&this.setMute(!0),isNaN(i)||(this._markerIn=i),!isNaN(n)&&n>i&&(this._markerOut=n),o.loop=t;var u=this._callbacks,d=o.play();return void 0!==d?d.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(o.addEventListener("playing",u.play,!0),o.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),o.addEventListener("ended",u.end,!0),o.addEventListener("timeupdate",u.time,!0),o.addEventListener("seeking",u.seeking,!0),o.addEventListener("seeked",u.seeked,!0),this},changeSource:function(t,i,n,o,a){void 0===i&&(i=!0),this.video&&this.stop();var u=this.scene.sys.cache.video.get(t);return u?(this.video=u,this._cacheKey=t,this._codePaused=u.paused,this._codeMuted=u.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,u,u.videoWidth,u.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,u.videoWidth,u.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(d.VIDEO_CREATED,this,u.videoWidth,u.videoHeight)):this.updateTexture(),u.currentTime=0,this._lastUpdate=0,i&&this.play(n,o,a)):this.video=null,this},addMarker:function(t,i,n){return!isNaN(i)&&i>=0&&!isNaN(n)&&(this.markers[t]=[i,n]),this},playMarker:function(t,i){var n=this.markers[t];return n&&this.play(i,n[0],n[1]),this},removeMarker:function(t){return delete this.markers[t],this},snapshot:function(t,i){return void 0===t&&(t=this.width),void 0===i&&(i=this.height),this.snapshotArea(0,0,this.width,this.height,t,i)},snapshotArea:function(t,i,n,o,a,u){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=this.width),void 0===o&&(o=this.height),void 0===a&&(a=n),void 0===u&&(u=o);var d=this.video,f=this.snapshotTexture;return f?(f.setSize(a,u),d&&f.context.drawImage(d,t,i,n,o,0,0,a,u)):(f=this.scene.sys.textures.createCanvas(M(),a,u),this.snapshotTexture=f,d&&f.context.drawImage(d,t,i,n,o,0,0,a,u)),f.update()},saveSnapshotTexture:function(t){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,t):this.snapshotTexture=this.scene.sys.textures.createCanvas(t,this.width,this.height),this.snapshotTexture},loadURL:function(t,i,n){void 0===n&&(n=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var o=document.createElement("video");return o.controls=!1,n&&(o.muted=!0,o.defaultMuted=!0,o.setAttribute("autoplay","autoplay")),o.setAttribute("playsinline","playsinline"),o.setAttribute("preload","auto"),o.addEventListener("error",this._callbacks.error,!0),o.src=t,o.load(),this.video=o,this},loadMediaStream:function(t,i,n){void 0===n&&(n=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var o=document.createElement("video");o.controls=!1,n&&(o.muted=!0,o.defaultMuted=!0,o.setAttribute("autoplay","autoplay")),o.setAttribute("playsinline","playsinline"),o.setAttribute("preload","auto"),o.addEventListener("error",this._callbacks.error,!0);try{o.srcObject=t}catch(a){o.src=window.URL.createObjectURL(t)}return o.load(),this.video=o,this},playPromiseSuccessHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(d.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(t){this.scene.sys.input.once(p.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(d.VIDEO_ERROR,this,t)},playHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(d.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(t){this.stop(),this.emit(d.VIDEO_ERROR,this,t)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(d.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(d.VIDEO_PLAY,this)},completeHandler:function(){this.emit(d.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(d.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var t=this.video;if(t){var i=t.currentTime;i!==this._lastUpdate&&(this._lastUpdate=i,this.updateTexture(),i>=this._markerOut&&(t.loop?(t.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=i,this.emit(d.VIDEO_LOOP,this)):(this.emit(d.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(d.VIDEO_TIMEOUT,this))},updateTexture:function(){var t=this.video,i=t.videoWidth,n=t.videoHeight;if(this.videoTexture){var o=this.videoTextureSource;o.source!==t&&(o.source=t,o.width=i,o.height=n),o.update()}else this.videoTexture=this.scene.sys.textures.create(this._key,t,i,n),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,i,n),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(d.VIDEO_CREATED,this,i,n)},getVideoKey:function(){return this._cacheKey},seekTo:function(t){var i=this.video;if(i){var n=i.duration;if(n!==1/0&&!isNaN(n)){var o=n*t;this.setCurrentTime(o)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(t){var i=this.video;if(i){if("string"==typeof t){var n=t[0],o=parseFloat(t.substr(1));"+"===n?t=i.currentTime+o:"-"===n&&(t=i.currentTime-o)}i.currentTime=t,this._lastUpdate=t}return this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(d.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(d.VIDEO_SEEKED,this),this.video&&this.updateTexture()},getProgress:function(){var t=this.video;if(t){var i=t.currentTime,n=t.duration;if(n!==1/0&&!isNaN(n))return i/n}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(t){void 0===t&&(t=!0),this._codeMuted=t;var i=this.video;return i&&(i.muted=!!this._systemMuted||t),this},isMuted:function(){return this._codeMuted},globalMute:function(t,i){this._systemMuted=i;var n=this.video;n&&(n.muted=!!this._codeMuted||i)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(t){void 0===t&&(t=!0);var i=this.video;return this._codePaused=t,i&&(t?i.paused||i.pause():t||i.paused&&!this._systemPaused&&i.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(t){return void 0===t&&(t=1),this.video&&(this.video.volume=a(t,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(t){return this.video&&(this.video.playbackRate=t),this},getLoop:function(){return!!this.video&&this.video.loop},setLoop:function(t){return void 0===t&&(t=!0),this.video&&(this.video.loop=t),this},isPlaying:function(){return!!this.video&&!(this.video.paused||this.video.ended)},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(t,i){return void 0===i&&(i=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,t),this._key=t,this.flipY=i,this.videoTextureSource&&this.videoTextureSource.setFlipY(i),this.videoTexture},stop:function(){var t=this.video;if(t){var i=this._callbacks;for(var n in i)t.removeEventListener(n,i[n],!0);t.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(d.VIDEO_STOP,this),this},removeVideoElement:function(){var t=this.video;if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("autoplay"),t.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var t=this.scene.sys.game.events;t.off(f.PAUSE,this.globalPause,this),t.off(f.RESUME,this.globalResume,this);var i=this.scene.sys.sound;i&&i.off(S.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});t.exports=R},function(t,i,n){var o=n(0),a=n(228),u=n(470),d=n(56),f=new o({initialize:function Polygon2(t){this.type=d.POLYGON,this.area=0,this.points=[],t&&this.setTo(t)},contains:function(t,i){return a(this,t,i)},setTo:function(t){if(this.area=0,this.points=[],"string"==typeof t&&(t=t.split(" ")),!Array.isArray(t))return this;for(var i,n=Number.MAX_VALUE,o=0;o<t.length;o++)i={x:0,y:0},"number"==typeof t[o]||"string"==typeof t[o]?(i.x=parseFloat(t[o]),i.y=parseFloat(t[o+1]),o++):Array.isArray(t[o])?(i.x=t[o][0],i.y=t[o][1]):(i.x=t[o].x,i.y=t[o].y),this.points.push(i),i.y<n&&(n=i.y);return this.calculateArea(n),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var t,i,n=0,o=0;o<this.points.length-1;o++)t=this.points[o],n+=((i=this.points[o+1]).x-t.x)*(t.y+i.y);return t=this.points[0],i=this.points[this.points.length-1],n+=(t.x-i.x)*(i.y+t.y),this.area=.5*-n,this.area},getPoints:function(t,i,n){return u(this,t,i,n)}});t.exports=f},function(t,i){t.exports=function(t,i,n){for(var o=!1,a=-1,u=t.points.length-1;++a<t.points.length;u=a){var d=t.points[a].x,f=t.points[a].y,p=t.points[u].x,b=t.points[u].y;(f<=n&&n<b||b<=n&&n<f)&&i<(p-d)*(n-f)/(b-f)+d&&(o=!o)}return o}},function(t,i,n){var o=n(0),a=n(11),u=n(15),d=n(2),f=n(17),p=n(478),b=n(1176),S=n(25),M=new o({Extends:u,Mixins:[a.ComputedSize,a.Depth,a.GetBounds,a.Mask,a.Origin,a.ScrollFactor,a.Transform,a.Visible,b],initialize:function Shader2(t,i,n,o,a,d,f,p){void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=128),void 0===d&&(d=128),u.call(this,t,"Shader"),this.blendMode=-1,this.shader;var b=t.sys.renderer;this.renderer=b,this.gl=b.gl,this.vertexData=new ArrayBuffer(2*Float32Array.BYTES_PER_ELEMENT*6),this.vertexBuffer=b.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new S,this._tempMatrix2=new S,this._tempMatrix3=new S,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=b.width,this._rendererHeight=b.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(n,o),this.setSize(a,d),this.setOrigin(.5,.5),this.setShader(i,f,p)},willRender:function(t){return!!this.renderToTexture||!(u.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},setRenderToTexture:function(t,i){if(void 0===i&&(i=!1),!this.renderToTexture){var n=this.width,o=this.height,a=this.renderer;this.glTexture=a.createTextureFromSource(null,n,o,0),this.glTexture.flipY=i,this.framebuffer=a.createFramebuffer(n,o,this.glTexture,!1),this._rendererWidth=n,this._rendererHeight=o,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),t&&(this.texture=this.scene.sys.textures.addGLTexture(t,this.glTexture,n,o))}return this.shader&&(a.pipelines.clear(),this.load(),this.flush(),a.pipelines.rebind()),this},setShader:function(t,i,n){if(void 0===i&&(i=[]),"string"==typeof t){var o=this.scene.sys.cache.shader;if(!o.has(t))return console.warn("Shader missing: "+t),this;this.shader=o.get(t)}else this.shader=t;var a=this.gl,u=this.renderer;this.program&&a.deleteProgram(this.program);var d=u.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);a.uniformMatrix4fv(a.getUniformLocation(d,"uViewMatrix"),!1,this.viewMatrix),a.uniformMatrix4fv(a.getUniformLocation(d,"uProjectionMatrix"),!1,this.projectionMatrix),a.uniform2f(a.getUniformLocation(d,"uResolution"),this.width,this.height),this.program=d;var p=new Date,b={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[p.getFullYear(),p.getMonth(),p.getDate(),60*p.getHours()*60+60*p.getMinutes()+p.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=f(!0,{},this.shader.uniforms,b):this.uniforms=b;for(var S=0;S<4;S++)i[S]&&this.setSampler2D("iChannel"+S,i[S],S,n);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(t){return this.pointer=t,this},projOrtho:function(t,i,n,o){var a=1/(t-i),u=1/(n-o),d=this.projectionMatrix;d[0]=-2*a,d[5]=-2*u,d[10]=-.001,d[12]=(t+i)*a,d[13]=(o+n)*u,d[14]=-0;var f=this.program,p=this.gl;this.renderer.setProgram(f),p.uniformMatrix4fv(p.getUniformLocation(f,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=i,this._rendererHeight=n},initUniforms:function(){var t=this.gl,i=this.renderer.glFuncMap,n=this.program;for(var o in this._textureCount=0,this.uniforms){var a=this.uniforms[o],u=a.type,d=i[u];a.uniformLocation=t.getUniformLocation(n,o),"sampler2D"!==u&&(a.glMatrix=d.matrix,a.glValueLength=d.length,a.glFunc=d.func)}},setSampler2DBuffer:function(t,i,n,o,a,u){void 0===a&&(a=0),void 0===u&&(u={});var d=this.uniforms[t];return d.value=i,u.width=n,u.height=o,d.textureData=u,this._textureCount=a,this.initSampler2D(d),this},setSampler2D:function(t,i,n,o){void 0===n&&(n=0);var a=this.scene.sys.textures;if(a.exists(i)){var u=a.getFrame(i);if(u.glTexture&&u.glTexture.isRenderTexture)return this.setSampler2DBuffer(t,u.glTexture,u.width,u.height,n,o);var d=this.uniforms[t],f=u.source;d.textureKey=i,d.source=f.image,d.value=u.glTexture,f.isGLTexture&&(o||(o={}),o.width=f.width,o.height=f.height),o&&(d.textureData=o),this._textureCount=n,this.initSampler2D(d)}return this},setUniform:function(t,i){return p(this.uniforms,t,i),this},getUniform:function(t){return d(this.uniforms,t,null)},setChannel0:function(t,i){return this.setSampler2D("iChannel0",t,0,i)},setChannel1:function(t,i){return this.setSampler2D("iChannel1",t,1,i)},setChannel2:function(t,i){return this.setSampler2D("iChannel2",t,2,i)},setChannel3:function(t,i){return this.setSampler2D("iChannel3",t,3,i)},initSampler2D:function(t){if(t.value){var i=this.gl;i.activeTexture(i.TEXTURE0+this._textureCount),i.bindTexture(i.TEXTURE_2D,t.value);var n=t.textureData;if(n&&!t.value.isRenderTexture){var o=i[d(n,"magFilter","linear").toUpperCase()],a=i[d(n,"minFilter","linear").toUpperCase()],u=i[d(n,"wrapS","repeat").toUpperCase()],f=i[d(n,"wrapT","repeat").toUpperCase()],p=i[d(n,"format","rgba").toUpperCase()];if(n.repeat&&(u=i.REPEAT,f=i.REPEAT),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!!n.flipY),n.width){var b=d(n,"width",512),S=d(n,"height",2),M=d(n,"border",0);i.texImage2D(i.TEXTURE_2D,0,p,b,S,M,p,i.UNSIGNED_BYTE,null)}else i.texImage2D(i.TEXTURE_2D,0,p,i.RGBA,i.UNSIGNED_BYTE,t.source);i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,o),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,a),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,u),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,f)}this.renderer.setProgram(this.program),i.uniform1i(t.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var t,i,n,o,a,u=this.gl,d=this.uniforms,f=0;for(var p in d)n=(t=d[p]).glFunc,i=t.glValueLength,o=t.uniformLocation,null!==(a=t.value)&&(1===i?t.glMatrix?n.call(u,o,t.transpose,a):n.call(u,o,a):2===i?n.call(u,o,a.x,a.y):3===i?n.call(u,o,a.x,a.y,a.z):4===i?n.call(u,o,a.x,a.y,a.z,a.w):"sampler2D"===t.type&&(u.activeTexture(u.TEXTURE0+f),u.bindTexture(u.TEXTURE_2D,a),u.uniform1i(o,f),f++))},load:function(t){var i=this.gl,n=this.width,o=this.height,a=this.renderer,u=this.program,d=this.viewMatrix;if(!this.renderToTexture){var f=-this._displayOriginX,p=-this._displayOriginY;d[0]=t[0],d[1]=t[1],d[4]=t[2],d[5]=t[3],d[8]=t[4],d[9]=t[5],d[12]=d[0]*f+d[4]*p,d[13]=d[1]*f+d[5]*p}i.useProgram(u),i.uniformMatrix4fv(i.getUniformLocation(u,"uViewMatrix"),!1,d),i.uniform2f(i.getUniformLocation(u,"uResolution"),this.width,this.height);var b=this.uniforms,S=b.resolution;S.value.x=n,S.value.y=o,b.time.value=a.game.loop.getDuration();var M=this.pointer;if(M){var C=b.mouse,P=M.x/n,R=1-M.y/o;C.value.x=P.toFixed(2),C.value.y=R.toFixed(2)}this.syncUniforms()},flush:function(){var t=this.width,i=this.height,n=this.program,o=this.gl,a=this.vertexBuffer,u=this.renderer,d=2*Float32Array.BYTES_PER_ELEMENT;this.renderToTexture&&(u.setFramebuffer(this.framebuffer),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT)),o.bindBuffer(o.ARRAY_BUFFER,a);var f=o.getAttribLocation(n,"inPosition");-1!==f&&(o.enableVertexAttribArray(f),o.vertexAttribPointer(f,2,o.FLOAT,!1,d,0));var p=this.vertexViewF32;p[3]=i,p[4]=t,p[5]=i,p[8]=t,p[9]=i,p[10]=t,o.bufferSubData(o.ARRAY_BUFFER,0,this.bytes.subarray(0,6*d)),o.drawArrays(o.TRIANGLES,0,6),this.renderToTexture&&u.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var t=this.gl;t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});t.exports=M},function(t,i,n){var o=n(0),a=n(11),u=n(36),d=n(116),f=n(15),p=n(479),b=n(480),S=n(19),M=n(69),C=n(1179),P=n(79),R=n(39),O=n(117),B=new o({Extends:f,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.Mask,a.Pipeline,a.Size,a.Texture,a.Transform,a.Visible,a.ScrollFactor,C],initialize:function Mesh2(t,i,n,o,a,u,d,p,b,S,C,P){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o="__WHITE"),f.call(this,t,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new R,this.modelScale=new R(1,1,1),this.modelRotation=new R,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new M,this.viewPosition=new R,this.viewMatrix=new M,this.projectionMatrix=new M,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var O=t.sys.renderer;this.setPosition(i,n),this.setTexture(o,a),this.setSize(O.width,O.height),this.initPipeline(),this.setPerspective(O.width,O.height),u&&this.addVertices(u,d,p,b,S,C,P)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(t){return this.viewPosition.addScale(R.LEFT,t),this.dirtyCache[10]=1,this},panY:function(t){return this.viewPosition.y+=R.DOWN.y*t,this.dirtyCache[10]=1,this},panZ:function(t){return this.viewPosition.z+=t,this.dirtyCache[10]=1,this},setPerspective:function(t,i,n,o,a){return void 0===n&&(n=45),void 0===o&&(o=.01),void 0===a&&(a=1e3),this.projectionMatrix.perspective(u(n),t/i,o,a),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(t,i,n,o){return void 0===t&&(t=this.scene.sys.renderer.getAspectRatio()),void 0===i&&(i=1),void 0===n&&(n=-1e3),void 0===o&&(o=1e3),this.projectionMatrix.ortho(-t,t,-i,i,n,o),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach((function(t){t.destroy()})),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(t,i,n,o,a,u,d,f,p){var S=this.scene.sys.cache.obj.get(t);return S&&b(S,this,i,n,o,a,u,d,f,p),this},sortByDepth:function(t,i){return t.depth-i.depth},depthSort:function(){return P(this.faces,this.sortByDepth),this},addVertex:function(t,i,n,o,a,u,d){var f=new O(t,i,n,o,a,u,d);return this.vertices.push(f),f},addFace:function(t,i,n){var o=new d(t,i,n);return this.faces.push(o),this.dirtyCache[9]=-1,o},addVertices:function(t,i,n,o,a,u,d){var f=p(t,i,n,o,a,u,d);return f&&(this.faces=this.faces.concat(f.faces),this.vertices=this.vertices.concat(f.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(t){return this.faces[t]},getFaceAt:function(t,i,n){void 0===n&&(n=this.scene.sys.cameras.main);for(var o=S(this,n).calc,a=this.faces,u=[],d=0;d<a.length;d++){var f=a[d];f.contains(t,i,o)&&u.push(f)}return P(u,this.sortByDepth)},setDebug:function(t,i){return this.debugGraphic=t,this.debugCallback=t||i?i||this.renderDebug:null,this},isDirty:function(){var t=this.modelPosition,i=this.modelRotation,n=this.modelScale,o=this.dirtyCache,a=t.x,u=t.y,d=t.z,f=i.x,p=i.y,b=i.z,S=n.x,M=n.y,C=n.z,P=this.getFaceCount(),R=o[0],O=o[1],B=o[2],N=o[3],Y=o[4],X=o[5],G=o[6],U=o[7],V=o[8],z=o[9];return o[0]=a,o[1]=u,o[2]=d,o[3]=f,o[4]=p,o[5]=b,o[6]=S,o[7]=M,o[8]=C,o[9]=P,R!==a||O!==u||B!==d||N!==f||Y!==p||X!==b||G!==S||U!==M||V!==C||z!==P},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var t=this.dirtyCache;if(this.ignoreDirtyCache||t[10]||this.isDirty()){var i=this.width,n=this.height,o=this.viewMatrix,a=this.viewPosition;t[10]&&(o.identity(),o.translate(a),o.invert(),t[10]=0);var u=this.transformMatrix;u.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var d=a.z,f=this.faces,p=0;p<f.length;p++)f[p].transformCoordinatesLocal(u,i,n,d);this.depthSort()}},renderDebug:function(t,i){for(var n=t.debugGraphic,o=0;o<i.length;o++){var a=i[o],u=a.vertex1.tx,d=a.vertex1.ty,f=a.vertex2.tx,p=a.vertex2.ty,b=a.vertex3.tx,S=a.vertex3.ty;n.strokeTriangle(u,d,f,p,b,S)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});t.exports=B},function(t,i,n){var o=n(50);t.exports=function(t,i){return o(t.x,t.y,i.x,i.y)<=t.radius+i.radius}},function(t,i,n){var o=n(4),a=n(233);t.exports=function(t,i,n){if(void 0===n&&(n=[]),a(t,i)){var u,d,f=t.x1,p=t.y1,b=t.x2,S=t.y2,M=i.x,C=i.y,P=i.radius,R=b-f,O=S-p,B=f-M,N=p-C,Y=R*R+O*O,X=2*(R*B+O*N),G=X*X-4*Y*(B*B+N*N-P*P);if(0===G){var U=-X/(2*Y);u=f+U*R,d=p+U*O,U>=0&&U<=1&&n.push(new o(u,d))}else if(G>0){var V=(-X-Math.sqrt(G))/(2*Y);u=f+V*R,d=p+V*O,V>=0&&V<=1&&n.push(new o(u,d));var z=(-X+Math.sqrt(G))/(2*Y);u=f+z*R,d=p+z*O,z>=0&&z<=1&&n.push(new o(u,d))}}return n}},function(t,i,n){var o=n(66),a=new(n(4));t.exports=function(t,i,n){if(void 0===n&&(n=a),o(i,t.x1,t.y1))return n.x=t.x1,n.y=t.y1,!0;if(o(i,t.x2,t.y2))return n.x=t.x2,n.y=t.y2,!0;var u=t.x2-t.x1,d=t.y2-t.y1,f=i.x-t.x1,p=i.y-t.y1,b=u*u+d*d,S=u,M=d;if(b>0){var C=(f*u+p*d)/b;S*=C,M*=C}return n.x=t.x1+S,n.y=t.y1+M,S*S+M*M<=b&&S*u+M*d>=0&&o(i,n.x,n.y)}},function(t,i,n){var o=n(4),a=n(96),u=n(488);t.exports=function(t,i,n){if(void 0===n&&(n=[]),u(t,i))for(var d=i.getLineA(),f=i.getLineB(),p=i.getLineC(),b=i.getLineD(),S=[new o,new o,new o,new o],M=[a(d,t,S[0]),a(f,t,S[1]),a(p,t,S[2]),a(b,t,S[3])],C=0;C<4;C++)M[C]&&n.push(S[C]);return n}},function(t,i){t.exports=function(t,i,n,o){void 0===n&&(n=!1),void 0===o&&(o=[]);for(var a,u,d,f,p,b,S=t.x3-t.x1,M=t.y3-t.y1,C=t.x2-t.x1,P=t.y2-t.y1,R=S*S+M*M,O=S*C+M*P,B=C*C+P*P,N=R*B-O*O,Y=0===N?0:1/N,X=t.x1,G=t.y1,U=0;U<i.length&&(u=(R*(b=C*(d=i[U].x-X)+P*(f=i[U].y-G))-O*(p=S*d+M*f))*Y,!((a=(B*p-O*b)*Y)>=0&&u>=0&&a+u<1&&(o.push({x:i[U].x,y:i[U].y}),n)));U++);return o}},function(t,i){t.exports=function(t,i,n,o){var a=Math.cos(o),u=Math.sin(o),d=t.x1-i,f=t.y1-n;return t.x1=d*a-f*u+i,t.y1=d*u+f*a+n,d=t.x2-i,f=t.y2-n,t.x2=d*a-f*u+i,t.y2=d*u+f*a+n,t}},function(t,i){t.exports=function(t){return 0===t.height?NaN:t.width/t.height}},function(t,i){t.exports=function(t,i,n,o){var a=Math.cos(o),u=Math.sin(o),d=t.x1-i,f=t.y1-n;return t.x1=d*a-f*u+i,t.y1=d*u+f*a+n,d=t.x2-i,f=t.y2-n,t.x2=d*a-f*u+i,t.y2=d*u+f*a+n,d=t.x3-i,f=t.y3-n,t.x3=d*a-f*u+i,t.y3=d*u+f*a+n,t}},function(t,i,n){t.exports={BUTTON_DOWN:n(1310),BUTTON_UP:n(1311),CONNECTED:n(1312),DISCONNECTED:n(1313),GAMEPAD_BUTTON_DOWN:n(1314),GAMEPAD_BUTTON_UP:n(1315)}},function(t,i,n){var o=n(17),a=n(156);t.exports=function(t,i){var n=void 0===t?a():o({},t);if(i)for(var u in i)void 0!==i[u]&&(n[u]=i[u]);return n}},function(t,i,n){var o=n(0),a=n(21),u=n(23),d=n(8),f=n(2),p=n(7),b=n(408),S=new o({Extends:u,initialize:function XMLFile2(t,i,n,o){var a="xml";if(p(i)){var d=i;i=f(d,"key"),n=f(d,"url"),o=f(d,"xhrSettings"),a=f(d,"extension",a)}var b={type:"xml",cache:t.cacheManager.xml,extension:a,responseType:"text",key:i,url:n,xhrSettings:o};u.call(this,t,b)},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=b(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});d.register("xml",(function(t,i,n){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new S(this,t[o]));else this.addFile(new S(this,t,i,n));return this})),t.exports=S},function(t,i,n){var o=n(0),a=n(21),u=n(23),d=n(8),f=n(2),p=n(7),b=new o({Extends:u,initialize:function TextFile2(t,i,n,o){var a="text",d="txt",b=t.cacheManager.text;if(p(i)){var S=i;i=f(S,"key"),n=f(S,"url"),o=f(S,"xhrSettings"),d=f(S,"extension",d),a=f(S,"type",a),b=f(S,"cache",b)}var M={type:a,cache:b,extension:d,responseType:"text",key:i,url:n,xhrSettings:o};u.call(this,t,M)},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});d.register("text",(function(t,i,n){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new b(this,t[o]));else this.addFile(new b(this,t,i,n));return this})),t.exports=b},function(t,i,n){t.exports={Acceleration:n(1368),Angular:n(1369),Bounce:n(1370),Debug:n(1371),Drag:n(1372),Enable:n(1373),Friction:n(1374),Gravity:n(1375),Immovable:n(1376),Mass:n(1377),OverlapCirc:n(523),OverlapRect:n(244),Pushable:n(1378),Size:n(1379),Velocity:n(1380)}},function(t,i){t.exports=function(t,i,n,o,a,u,d){void 0===u&&(u=!0),void 0===d&&(d=!1);var f=[],p=[],b=t.treeMinMax;if(b.minX=i,b.minY=n,b.maxX=i+o,b.maxY=n+a,d&&(p=t.staticTree.search(b)),u&&t.useTree)f=t.tree.search(b);else if(u){var S=t.bodies,M={position:{x:i,y:n},left:i,top:n,right:i+o,bottom:n+a,isCircle:!1},C=t.intersects;S.iterate((function(t){C(t,M)&&f.push(t)}))}return p.concat(f)}},function(t,i,n){t.exports={COLLIDE:n(1381),OVERLAP:n(1382),PAUSE:n(1383),RESUME:n(1384),TILE_COLLIDE:n(1385),TILE_OVERLAP:n(1386),WORLD_BOUNDS:n(1387),WORLD_STEP:n(1388)}},function(t,i,n){var o=n(62);t.exports=function(t,i,n,a){var u=0,d=t.deltaAbsX()+i.deltaAbsX()+a;return 0===t._dx&&0===i._dx?(t.embedded=!0,i.embedded=!0):t._dx>i._dx?(u=t.right-i.x)>d&&!n||!1===t.checkCollision.right||!1===i.checkCollision.left?u=0:(t.touching.none=!1,t.touching.right=!0,i.touching.none=!1,i.touching.left=!0,i.physicsType!==o.STATIC_BODY||n||(t.blocked.none=!1,t.blocked.right=!0),t.physicsType!==o.STATIC_BODY||n||(i.blocked.none=!1,i.blocked.left=!0)):t._dx<i._dx&&(-(u=t.x-i.width-i.x)>d&&!n||!1===t.checkCollision.left||!1===i.checkCollision.right?u=0:(t.touching.none=!1,t.touching.left=!0,i.touching.none=!1,i.touching.right=!0,i.physicsType!==o.STATIC_BODY||n||(t.blocked.none=!1,t.blocked.left=!0),t.physicsType!==o.STATIC_BODY||n||(i.blocked.none=!1,i.blocked.right=!0))),t.overlapX=u,i.overlapX=u,u}},function(t,i,n){var o=n(62);t.exports=function(t,i,n,a){var u=0,d=t.deltaAbsY()+i.deltaAbsY()+a;return 0===t._dy&&0===i._dy?(t.embedded=!0,i.embedded=!0):t._dy>i._dy?(u=t.bottom-i.y)>d&&!n||!1===t.checkCollision.down||!1===i.checkCollision.up?u=0:(t.touching.none=!1,t.touching.down=!0,i.touching.none=!1,i.touching.up=!0,i.physicsType!==o.STATIC_BODY||n||(t.blocked.none=!1,t.blocked.down=!0),t.physicsType!==o.STATIC_BODY||n||(i.blocked.none=!1,i.blocked.up=!0)):t._dy<i._dy&&(-(u=t.y-i.bottom)>d&&!n||!1===t.checkCollision.up||!1===i.checkCollision.down?u=0:(t.touching.none=!1,t.touching.up=!0,i.touching.none=!1,i.touching.down=!0,i.physicsType!==o.STATIC_BODY||n||(t.blocked.none=!1,t.blocked.up=!0),t.physicsType!==o.STATIC_BODY||n||(i.blocked.none=!1,i.blocked.down=!0))),t.overlapY=u,i.overlapY=u,u}},function(t,i){t.exports=function(t,i){return!(i.right<=t.left||i.bottom<=t.top||i.position.x>=t.right||i.position.y>=t.bottom)}},function(t,i,n){t.exports={Bounce:n(1495),Collision:n(1496),Force:n(1497),Friction:n(1498),Gravity:n(1499),Mass:n(1500),Sensor:n(1501),SetBody:n(1502),Sleep:n(1503),Static:n(1520),Transform:n(1521),Velocity:n(1522)}},function(t,i){var n={};t.exports=n,n.create=function(t,i){var o=t.bodyA,a=t.bodyB,u={id:n.id(o,a),bodyA:o,bodyB:a,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:o.isSensor||a.isSensor,timeCreated:i,timeUpdated:i,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return n.update(u,t,i),u},n.update=function(t,i,o){if(t.collision=i,i.collided){var a=i.supports,u=t.activeContacts,d=i.parentA,f=i.parentB;t.inverseMass=d.inverseMass+f.inverseMass,t.friction=Math.min(d.friction,f.friction),t.frictionStatic=Math.max(d.frictionStatic,f.frictionStatic),t.restitution=Math.max(d.restitution,f.restitution),t.slop=Math.max(d.slop,f.slop);for(var p=0;p<a.length;p++)u[p]=a[p].contact;var b=a.length;b<u.length&&(u.length=b),t.separation=i.depth,n.setActive(t,!0,o)}else!0===t.isActive&&n.setActive(t,!1,o)},n.setActive=function(t,i,n){i?(t.isActive=!0,t.timeUpdated=n):(t.isActive=!1,t.activeContacts.length=0)},n.id=function(t,i){return t.id<i.id?"A"+t.id+"B"+i.id:"A"+i.id+"B"+t.id}},function(t,i,n){t.exports={CalculateFacesAt:n(252),CalculateFacesWithin:n(63),CheckIsoBounds:n(541),Copy:n(1420),CreateFromTiles:n(1421),CullBounds:n(543),CullTiles:n(544),Fill:n(1422),FilterTiles:n(1423),FindByIndex:n(1424),FindTile:n(1425),ForEachTile:n(1426),GetCullTilesFunction:n(1427),GetTileAt:n(158),GetTileAtWorldXY:n(1428),GetTilesWithin:n(26),GetTilesWithinShape:n(1429),GetTilesWithinWorldXY:n(529),GetTileToWorldXFunction:n(1430),GetTileToWorldXYFunction:n(1431),GetTileToWorldYFunction:n(1432),GetWorldToTileXFunction:n(1433),GetWorldToTileXYFunction:n(1434),GetWorldToTileYFunction:n(1435),HasTileAt:n(562),HasTileAtWorldXY:n(1436),HexagonalCullBounds:n(546),HexagonalCullTiles:n(545),HexagonalTileToWorldXY:n(550),HexagonalTileToWorldY:n(554),HexagonalWorldToTileXY:n(556),HexagonalWorldToTileY:n(560),IsInLayerBounds:n(119),IsometricCullTiles:n(547),IsometricTileToWorldXY:n(551),IsometricWorldToTileXY:n(557),PutTileAt:n(257),PutTileAtWorldXY:n(1437),PutTilesAt:n(1438),Randomize:n(1439),RemoveTileAt:n(563),RemoveTileAtWorldXY:n(1440),RenderDebug:n(1441),ReplaceByIndex:n(542),RunCull:n(159),SetCollision:n(1442),SetCollisionBetween:n(1443),SetCollisionByExclusion:n(1444),SetCollisionByProperty:n(1445),SetCollisionFromCollisionGroup:n(1446),SetLayerCollisionIndex:n(160),SetTileCollision:n(72),SetTileIndexCallback:n(1447),SetTileLocationCallback:n(1448),Shuffle:n(1449),StaggeredCullBounds:n(549),StaggeredCullTiles:n(548),StaggeredTileToWorldXY:n(552),StaggeredTileToWorldY:n(555),StaggeredWorldToTileXY:n(558),StaggeredWorldToTileY:n(561),SwapByIndex:n(1450),TileToWorldX:n(253),TileToWorldXY:n(553),TileToWorldY:n(254),WeightedRandomize:n(1451),WorldToTileX:n(255),WorldToTileXY:n(559),WorldToTileY:n(256)}},function(t,i,n){var o=n(158);t.exports=function(t,i,n){var a=o(t,i,!0,n),u=o(t,i-1,!0,n),d=o(t,i+1,!0,n),f=o(t-1,i,!0,n),p=o(t+1,i,!0,n),b=a&&a.collides;return b&&(a.faceTop=!0,a.faceBottom=!0,a.faceLeft=!0,a.faceRight=!0),u&&u.collides&&(b&&(a.faceTop=!1),u.faceBottom=!b),d&&d.collides&&(b&&(a.faceBottom=!1),d.faceTop=!b),f&&f.collides&&(b&&(a.faceLeft=!1),f.faceRight=!b),p&&p.collides&&(b&&(a.faceRight=!1),p.faceLeft=!b),a&&!a.collides&&a.resetFaces(),a}},function(t,i){t.exports=function(t,i,n){var o=n.baseTileWidth,a=n.tilemapLayer,u=0;return a&&(i||(i=a.scene.cameras.main),u=a.x+i.scrollX*(1-a.scrollFactorX),o*=a.scaleX),u+t*o}},function(t,i){t.exports=function(t,i,n){var o=n.baseTileHeight,a=n.tilemapLayer,u=0;return a&&(i||(i=a.scene.cameras.main),u=a.y+i.scrollY*(1-a.scrollFactorY),o*=a.scaleY),u+t*o}},function(t,i){t.exports=function(t,i,n,o){void 0===i&&(i=!0);var a=o.baseTileWidth,u=o.tilemapLayer;return u&&(n||(n=u.scene.cameras.main),t-=u.x+n.scrollX*(1-u.scrollFactorX),a*=u.scaleX),i?Math.floor(t/a):t/a}},function(t,i){t.exports=function(t,i,n,o){void 0===i&&(i=!0);var a=o.baseTileHeight,u=o.tilemapLayer;return u&&(n||(n=u.scene.cameras.main),t-=u.y+n.scrollY*(1-u.scrollFactorY),a*=u.scaleY),i?Math.floor(t/a):t/a}},function(t,i,n){var o=n(85),a=n(119),u=n(252),d=n(72);t.exports=function(t,i,n,f,p){if(void 0===f&&(f=!0),!a(i,n,p))return null;var b=p.data[n][i],S=b&&b.collides;if(t instanceof o)null===p.data[n][i]&&(p.data[n][i]=new o(p,t.index,i,n,p.tileWidth,p.tileHeight)),p.data[n][i].copy(t);else{var M=t;null===p.data[n][i]?p.data[n][i]=new o(p,M,i,n,p.tileWidth,p.tileHeight):p.data[n][i].index=M}var C=p.data[n][i],P=-1!==p.collideIndexes.indexOf(C.index);return d(C,P),f&&S!==C.collides&&u(i,n,p),C}},function(t,i,n){var o=n(29);t.exports=function(t){return"isometric"===(t=t.toLowerCase())?o.ISOMETRIC:"staggered"===t?o.STAGGERED:"hexagonal"===t?o.HEXAGONAL:o.ORTHOGONAL}},function(t,i,n){var o=n(40),a=n(120),u=n(121),d=n(85);t.exports=function(t,i,n,f,p){for(var b=new a({tileWidth:n,tileHeight:f}),S=new u({name:t,tileWidth:n,tileHeight:f,format:o.ARRAY_2D,layers:[b]}),M=[],C=i.length,P=0,R=0;R<i.length;R++){M[R]=[];for(var O=i[R],B=0;B<O.length;B++){var N=parseInt(O[B],10);isNaN(N)||-1===N?M[R][B]=p?null:new d(b,-1,B,R,n,f):M[R][B]=new d(b,N,B,R,n,f)}0===P&&(P=O.length)}return S.width=b.width=P,S.height=b.height=C,S.widthInPixels=b.widthInPixels=P*n,S.heightInPixels=b.heightInPixels=C*f,b.data=M,S}},function(t,i,n){var o=n(571),a=n(261),copyPoints=function(t){return{x:t.x,y:t.y}},u=["id","name","type","rotation","properties","visible","x","y","width","height"];t.exports=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var d=o(t,u);if(d.x+=i,d.y+=n,t.gid){var f=a(t.gid);d.gid=f.gid,d.flippedHorizontal=f.flippedHorizontal,d.flippedVertical=f.flippedVertical,d.flippedAntiDiagonal=f.flippedAntiDiagonal}else t.polyline?d.polyline=t.polyline.map(copyPoints):t.polygon?d.polygon=t.polygon.map(copyPoints):t.ellipse?d.ellipse=t.ellipse:t.text?d.text=t.text:t.point?d.point=!0:d.rectangle=!0;return d}},function(t,i){var n=2147483648,o=1073741824,a=536870912;t.exports=function(t){var i=Boolean(t&n),u=Boolean(t&o),d=Boolean(t&a);t&=536870911;var f=0,p=!1;return i&&u&&d?(f=Math.PI/2,p=!0):i&&u&&!d?(f=Math.PI,p=!1):i&&!u&&d?(f=Math.PI/2,p=!1):!i||u||d?!i&&u&&d?(f=3*Math.PI/2,p=!1):i||!u||d?i||u||!d?i||u||d||(f=0,p=!1):(f=3*Math.PI/2,p=!0):(f=Math.PI,p=!0):(f=0,p=!0),{gid:t,flippedHorizontal:i,flippedVertical:u,flippedAntiDiagonal:d,rotation:f,flipped:p}}},function(t,i,n){var o=n(40),a=n(121),u=n(564),d=n(580);t.exports=function(t,i,n,f,p,b,S,M){void 0===n&&(n=32),void 0===f&&(f=32),void 0===p&&(p=10),void 0===b&&(b=10),void 0===M&&(M=!1);var C=null;if(Array.isArray(S))C=u(void 0!==i?i:"map",o.ARRAY_2D,S,n,f,M);else if(void 0!==i){var P=t.cache.tilemap.get(i);P?C=u(i,P.format,P.data,n,f,M):console.warn("No map data found for key "+i)}return null===C&&(C=new a({tileWidth:n,tileHeight:f,width:p,height:b})),new d(t,C)}},function(t,i,n){var o=n(6);t.exports=function(t){var i=o(t,"targets",null);return null===i||("function"==typeof i&&(i=i.call()),Array.isArray(i)||(i=[i])),i}},function(t,i){function hasGetActive(t){return!!t.getActive&&"function"==typeof t.getActive}function hasGetStart(t){return!!t.getStart&&"function"==typeof t.getStart}function hasGetEnd(t){return!!t.getEnd&&"function"==typeof t.getEnd}var GetValueOp=function(t,i){var n,getEnd=function(t,i,n){return n},getStart=function(t,i,n){return n},o=null,a=typeof i;if("number"===a)getEnd=function(){return i};else if("string"===a){var u=i[0],d=parseFloat(i.substr(2));switch(u){case"+":getEnd=function(t,i,n){return n+d};break;case"-":getEnd=function(t,i,n){return n-d};break;case"*":getEnd=function(t,i,n){return n*d};break;case"/":getEnd=function(t,i,n){return n/d};break;default:getEnd=function(){return parseFloat(i)}}}else if("function"===a)getEnd=i;else if("object"===a)if(function hasGetters(t){return hasGetStart(t)||hasGetEnd(t)||hasGetActive(t)}(i))hasGetActive(i)&&(o=i.getActive),hasGetEnd(i)&&(getEnd=i.getEnd),hasGetStart(i)&&(getStart=i.getStart);else if(i.hasOwnProperty("value"))n=GetValueOp(t,i.value);else{var f=i.hasOwnProperty("to"),p=i.hasOwnProperty("from"),b=i.hasOwnProperty("start");if(f&&(p||b)){if(n=GetValueOp(t,i.to),b){var S=GetValueOp(t,i.start);n.getActive=S.getEnd}if(p){var M=GetValueOp(t,i.from);n.getStart=M.getEnd}}}return n||(n={getActive:o,getEnd:getEnd,getStart:getStart}),n};t.exports=GetValueOp},function(t,i){t.exports={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1}},function(t,i,n){var o=n(0),a=n(9),u=n(267),d=n(16),f=n(5),p=n(100),b=n(14),S=new o({Extends:a,initialize:function Tween3(t,i,n){a.call(this),this.parent=t,this.parentIsTimeline=t.hasOwnProperty("isTimeline"),this.data=i,this.totalData=i.length,this.targets=n,this.totalTargets=n.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=p.PENDING_ADD,this._pausedState=p.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(t){return void 0===t&&(t=0),this.data[t].current},setTimeScale:function(t){return this.timeScale=t,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===p.ACTIVE},isPaused:function(){return this.state===p.PAUSED},hasTarget:function(t){return-1!==this.targets.indexOf(t)},updateTo:function(t,i,n){void 0===n&&(n=!1);for(var o=0;o<this.totalData;o++){var a=this.data[o];a.key===t&&(a.end=i,n&&(a.start=a.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===p.ACTIVE?this.seek(0):this.state===p.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===p.PENDING_ADD?this:this.play()},calcDuration:function(){for(var t=0,i=b.MAX_SAFE_INTEGER,n=this.data,o=0;o<this.totalData;o++){var a=n[o];a.t1=a.duration+a.hold,a.yoyo&&(a.t1+=a.duration),a.t2=a.t1+a.repeatDelay,a.totalDuration=a.delay+a.t1,-1===a.repeat?a.totalDuration+=999999999999*a.t2:a.repeat>0&&(a.totalDuration+=a.t2*a.repeat),a.totalDuration>t&&(t=a.totalDuration),a.delay<i&&(i=a.delay)}this.duration=Math.max(t,.001),this.loopCounter=-1===this.loop?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=i},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=p.PENDING_ADD,this._pausedState=p.INIT,!1;for(var t=this.data,i=this.totalTargets,n=0;n<this.totalData;n++){var o=t[n],a=o.target,u=o.gen,d=o.key,f=o.index;o.delay=u.delay(a,d,0,f,i,this),o.duration=Math.max(u.duration(a,d,0,f,i,this),.001),o.hold=u.hold(a,d,0,f,i,this),o.repeat=u.repeat(a,d,0,f,i,this),o.repeatDelay=u.repeatDelay(a,d,0,f,i,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=p.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(u.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=p.LOOP_DELAY):(this.state=p.ACTIVE,this.dispatchTweenEvent(u.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=p.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=p.PENDING_REMOVE,this.dispatchTweenEvent(u.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===p.PAUSED||(this.paused=!0,this._pausedState=this.state,this.state=p.PAUSED),this},play:function(t){void 0===t&&(t=!1);var i=this.state;return i!==p.INIT||this.parentIsTimeline?i===p.ACTIVE||i===p.PENDING_ADD&&this._pausedState===p.PENDING_ADD?this:this.parentIsTimeline||i!==p.PENDING_REMOVE&&i!==p.REMOVED?(this.parentIsTimeline?(this.resetTweenData(t),0===this.calculatedOffset?this.state=p.ACTIVE:(this.countdown=this.calculatedOffset,this.state=p.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(t),this.state=p.ACTIVE,this.makeActive()),this):(this.seek(0),this.parent.makeActive(this),this):(this.resetTweenData(!1),this.state=p.ACTIVE,this)},resetTweenData:function(t){for(var i=this.data,n=this.totalData,o=this.totalTargets,a=0;a<n;a++){var u=i[a],d=u.target,f=u.key,b=u.index;u.progress=0,u.elapsed=0,u.repeatCounter=-1===u.repeat?999999999999:u.repeat,t?(u.start=u.getStartValue(d,f,u.start,b,o,this),u.end=u.getEndValue(d,f,u.end,b,o,this),u.current=u.start,u.state=p.PLAYING_FORWARD):u.state=p.PENDING_RENDER,u.delay>0&&(u.elapsed=u.delay,u.state=p.DELAY),u.getActiveValue&&(d[f]=u.getActiveValue(u.target,u.key,u.start))}},resume:function(){return this.state===p.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(t,i){void 0===i&&(i=16.6),this.state===p.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var n=this.data,o=this.totalTargets,a=0;a<this.totalData;a++){var u=n[a],d=u.target,f=u.gen,b=u.key,S=u.index;u.progress=0,u.elapsed=0,u.repeatCounter=-1===u.repeat?999999999999:u.repeat,u.delay=f.delay(d,b,0,S,o,this),u.duration=Math.max(f.duration(d,b,0,S,o,this),.001),u.hold=f.hold(d,b,0,S,o,this),u.repeat=f.repeat(d,b,0,S,o,this),u.repeatDelay=f.repeatDelay(d,b,0,S,o,this),u.current=u.start,u.state=p.PLAYING_FORWARD,this.updateTweenData(this,u,0,S,o),u.delay>0&&(u.elapsed=u.delay,u.state=p.DELAY)}this.calcDuration();var M=!1;this.state===p.PAUSED&&(M=!0,this.state=p.ACTIVE),this.isSeeking=!0;do{this.update(0,i)}while(this.totalProgress<t);return this.isSeeking=!1,M&&(this.state=p.PAUSED),this},setCallback:function(t,i,n,o){return this.callbacks[t]={func:i,scope:o,params:n},this},complete:function(t){return void 0===t&&(t=0),t?(this.state=p.COMPLETE_DELAY,this.countdown=t):(this.state=p.PENDING_REMOVE,this.dispatchTweenEvent(u.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(t){return this.state===p.ACTIVE&&void 0!==t&&this.seek(t),this.state!==p.REMOVED&&(this.state!==p.PAUSED&&this.state!==p.PENDING_ADD||(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(u.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=p.PENDING_REMOVE),this},update:function(t,i){if(this.state===p.PAUSED)return!1;switch(this.useFrames&&(i=1*this.parent.timeScale),i*=this.timeScale,this.elapsed+=i,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=i,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case p.ACTIVE:this.hasStarted||this.isSeeking||(this.startDelay-=i,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(u.TWEEN_START,this.callbacks.onStart)));for(var n=!1,o=0;o<this.totalData;o++){var a=this.data[o];this.updateTweenData(this,a,i)&&(n=!0)}n||this.nextState();break;case p.LOOP_DELAY:this.countdown-=i,this.countdown<=0&&(this.state=p.ACTIVE,this.dispatchTweenEvent(u.TWEEN_LOOP,this.callbacks.onLoop));break;case p.OFFSET_DELAY:this.countdown-=i,this.countdown<=0&&(this.state=p.ACTIVE);break;case p.COMPLETE_DELAY:this.countdown-=i,this.countdown<=0&&(this.state=p.PENDING_REMOVE,this.dispatchTweenEvent(u.TWEEN_COMPLETE,this.callbacks.onComplete))}return this.state===p.PENDING_REMOVE},dispatchTweenDataEvent:function(t,i,n){this.isSeeking||(this.emit(t,this,n.key,n.target,n.current,n.previous),i&&(i.params[1]=n.target,i.func.apply(i.scope,i.params)))},dispatchTweenEvent:function(t,i){this.isSeeking||(this.emit(t,this,this.targets),i&&(i.params[1]=this.targets,i.func.apply(i.scope,i.params)))},setStateFromEnd:function(t,i,n){return i.yoyo?(i.elapsed=n,i.progress=n/i.duration,i.flipX&&i.target.toggleFlipX(),i.flipY&&i.target.toggleFlipY(),this.dispatchTweenDataEvent(u.TWEEN_YOYO,t.callbacks.onYoyo,i),i.start=i.getStartValue(i.target,i.key,i.start,i.index,t.totalTargets,t),p.PLAYING_BACKWARD):i.repeatCounter>0?(i.repeatCounter--,i.elapsed=n,i.progress=n/i.duration,i.flipX&&i.target.toggleFlipX(),i.flipY&&i.target.toggleFlipY(),i.start=i.getStartValue(i.target,i.key,i.start,i.index,t.totalTargets,t),i.end=i.getEndValue(i.target,i.key,i.start,i.index,t.totalTargets,t),i.repeatDelay>0?(i.elapsed=i.repeatDelay-n,i.current=i.start,i.target[i.key]=i.current,p.REPEAT_DELAY):(this.dispatchTweenDataEvent(u.TWEEN_REPEAT,t.callbacks.onRepeat,i),p.PLAYING_FORWARD)):p.COMPLETE},setStateFromStart:function(t,i,n){return i.repeatCounter>0?(i.repeatCounter--,i.elapsed=n,i.progress=n/i.duration,i.flipX&&i.target.toggleFlipX(),i.flipY&&i.target.toggleFlipY(),i.end=i.getEndValue(i.target,i.key,i.start,i.index,t.totalTargets,t),i.repeatDelay>0?(i.elapsed=i.repeatDelay-n,i.current=i.start,i.target[i.key]=i.current,p.REPEAT_DELAY):(this.dispatchTweenDataEvent(u.TWEEN_REPEAT,t.callbacks.onRepeat,i),p.PLAYING_FORWARD)):p.COMPLETE},updateTweenData:function(t,i,n){var o=i.target;switch(i.state){case p.PLAYING_FORWARD:case p.PLAYING_BACKWARD:if(!o){i.state=p.COMPLETE;break}var a=i.elapsed,d=i.duration,f=0;(a+=n)>d&&(f=a-d,a=d);var b=i.state===p.PLAYING_FORWARD,S=a/d;if(i.elapsed=a,i.progress=S,i.previous=i.current,1===S)b?(i.current=i.end,o[i.key]=i.end,i.hold>0?(i.elapsed=i.hold-f,i.state=p.HOLD_DELAY):i.state=this.setStateFromEnd(t,i,f)):(i.current=i.start,o[i.key]=i.start,i.state=this.setStateFromStart(t,i,f));else{var M=b?i.ease(S):i.ease(1-S);i.current=i.start+(i.end-i.start)*M,o[i.key]=i.current}this.dispatchTweenDataEvent(u.TWEEN_UPDATE,t.callbacks.onUpdate,i);break;case p.DELAY:i.elapsed-=n,i.elapsed<=0&&(i.elapsed=Math.abs(i.elapsed),i.state=p.PENDING_RENDER);break;case p.REPEAT_DELAY:i.elapsed-=n,i.elapsed<=0&&(i.elapsed=Math.abs(i.elapsed),i.state=p.PLAYING_FORWARD,this.dispatchTweenDataEvent(u.TWEEN_REPEAT,t.callbacks.onRepeat,i));break;case p.HOLD_DELAY:i.elapsed-=n,i.elapsed<=0&&(i.state=this.setStateFromEnd(t,i,Math.abs(i.elapsed)));break;case p.PENDING_RENDER:o?(i.start=i.getStartValue(o,i.key,o[i.key],i.index,t.totalTargets,t),i.end=i.getEndValue(o,i.key,i.start,i.index,t.totalTargets,t),i.current=i.start,o[i.key]=i.start,i.state=p.PLAYING_FORWARD):i.state=p.COMPLETE}return i.state!==p.COMPLETE}});S.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],f.register("tween",(function(t){return this.scene.sys.tweens.add(t)})),d.register("tween",(function(t){return this.scene.sys.tweens.create(t)})),t.exports=S},function(t,i,n){t.exports={TIMELINE_COMPLETE:n(1466),TIMELINE_LOOP:n(1467),TIMELINE_PAUSE:n(1468),TIMELINE_RESUME:n(1469),TIMELINE_START:n(1470),TIMELINE_UPDATE:n(1471),TWEEN_ACTIVE:n(1472),TWEEN_COMPLETE:n(1473),TWEEN_LOOP:n(1474),TWEEN_REPEAT:n(1475),TWEEN_START:n(1476),TWEEN_STOP:n(1477),TWEEN_UPDATE:n(1478),TWEEN_YOYO:n(1479)}},function(t,i){t.exports=function(t,i,n,o,a,u,d,f,p,b,S,M,C,P,R){return{target:t,index:i,key:n,getActiveValue:u,getEndValue:o,getStartValue:a,ease:d,duration:0,totalDuration:0,delay:0,yoyo:b,hold:0,repeat:0,repeatDelay:0,flipX:P,flipY:R,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:f,duration:p,hold:S,repeat:M,repeatDelay:C},state:0}}},function(t,i,n){var o=n(68);t.exports=function(t){return o(t,-Math.PI,Math.PI)}},function(t,i,n){var o=n(68);t.exports=function(t){return o(t,-180,180)}},function(t,i,n){var o={};t.exports=o;var a=n(83),u=n(32);o.fromVertices=function(t){for(var i={},n=0;n<t.length;n++){var o=(n+1)%t.length,d=a.normalise({x:t[o].y-t[n].y,y:t[n].x-t[o].x}),f=0===d.y?1/0:d.x/d.y;i[f=f.toFixed(3).toString()]=d}return u.values(i)},o.rotate=function(t,i){if(0!==i)for(var n=Math.cos(i),o=Math.sin(i),a=0;a<t.length;a++){var u,d=t[a];u=d.x*n-d.y*o,d.y=d.x*o+d.y*n,d.x=u}}},function(t,i,n){t.exports={AFTER_ADD:n(1504),AFTER_REMOVE:n(1505),AFTER_UPDATE:n(1506),BEFORE_ADD:n(1507),BEFORE_REMOVE:n(1508),BEFORE_UPDATE:n(1509),COLLISION_ACTIVE:n(1510),COLLISION_END:n(1511),COLLISION_START:n(1512),DRAG_END:n(1513),DRAG:n(1514),DRAG_START:n(1515),PAUSE:n(1516),RESUME:n(1517),SLEEP_END:n(1518),SLEEP_START:n(1519)}},function(t,i,n){var o={};t.exports=o;var a=n(274),u=n(250),d=n(84);o.collisions=function(t,i){for(var n=[],f=i.pairs.table,p=i.metrics,b=0;b<t.length;b++){var S=t[b][0],M=t[b][1];if((!S.isStatic&&!S.isSleeping||!M.isStatic&&!M.isSleeping)&&o.canCollide(S.collisionFilter,M.collisionFilter)&&(p.midphaseTests+=1,d.overlaps(S.bounds,M.bounds)))for(var C=S.parts.length>1?1:0;C<S.parts.length;C++)for(var P=S.parts[C],R=M.parts.length>1?1:0;R<M.parts.length;R++){var O=M.parts[R];if(P===S&&O===M||d.overlaps(P.bounds,O.bounds)){var B,N=f[u.id(P,O)];B=N&&N.isActive?N.collision:null;var Y=a.collides(P,O,B);p.narrowphaseTests+=1,Y.reused&&(p.narrowReuseCount+=1),Y.collided&&(n.push(Y),p.narrowDetections+=1)}}}return n},o.canCollide=function(t,i){return t.group===i.group&&0!==t.group?t.group>0:0!=(t.mask&i.category)&&0!=(i.mask&t.category)}},function(t,i,n){var o={};t.exports=o;var a=n(64),u=n(83);o.collides=function(t,i,n){var d,f,p,b,S=!1;if(n){var M=t.parent,C=i.parent,P=M.speed*M.speed+M.angularSpeed*M.angularSpeed+C.speed*C.speed+C.angularSpeed*C.angularSpeed;S=n&&n.collided&&P<.2,b=n}else b={collided:!1,bodyA:t,bodyB:i};if(n&&S){var R=b.axisBody,O=R===t?i:t,B=[R.axes[n.axisNumber]];if(p=o._overlapAxes(R.vertices,O.vertices,B),b.reused=!0,p.overlap<=0)return b.collided=!1,b}else{if((d=o._overlapAxes(t.vertices,i.vertices,t.axes)).overlap<=0)return b.collided=!1,b;if((f=o._overlapAxes(i.vertices,t.vertices,i.axes)).overlap<=0)return b.collided=!1,b;d.overlap<f.overlap?(p=d,b.axisBody=t):(p=f,b.axisBody=i),b.axisNumber=p.axisNumber}b.bodyA=t.id<i.id?t:i,b.bodyB=t.id<i.id?i:t,b.collided=!0,b.depth=p.overlap,b.parentA=b.bodyA.parent,b.parentB=b.bodyB.parent,t=b.bodyA,i=b.bodyB,u.dot(p.axis,u.sub(i.position,t.position))<0?b.normal={x:p.axis.x,y:p.axis.y}:b.normal={x:-p.axis.x,y:-p.axis.y},b.tangent=u.perp(b.normal),b.penetration=b.penetration||{},b.penetration.x=b.normal.x*b.depth,b.penetration.y=b.normal.y*b.depth;var N=o._findSupports(t,i,b.normal),Y=[];if(a.contains(t.vertices,N[0])&&Y.push(N[0]),a.contains(t.vertices,N[1])&&Y.push(N[1]),Y.length<2){var X=o._findSupports(i,t,u.neg(b.normal));a.contains(i.vertices,X[0])&&Y.push(X[0]),Y.length<2&&a.contains(i.vertices,X[1])&&Y.push(X[1])}return Y.length<1&&(Y=[N[0]]),b.supports=Y,b},o._overlapAxes=function(t,i,n){for(var a,d,f=u._temp[0],p=u._temp[1],b={overlap:Number.MAX_VALUE},S=0;S<n.length;S++){if(d=n[S],o._projectToAxis(f,t,d),o._projectToAxis(p,i,d),(a=Math.min(f.max-p.min,p.max-f.min))<=0)return b.overlap=a,b;a<b.overlap&&(b.overlap=a,b.axis=d,b.axisNumber=S)}return b},o._projectToAxis=function(t,i,n){for(var o=u.dot(i[0],n),a=o,d=1;d<i.length;d+=1){var f=u.dot(i[d],n);f>a?a=f:f<o&&(o=f)}t.min=o,t.max=a},o._findSupports=function(t,i,n){for(var o,a,d,f,p=Number.MAX_VALUE,b=u._temp[0],S=i.vertices,M=t.position,C=0;C<S.length;C++)a=S[C],b.x=a.x-M.x,b.y=a.y-M.y,(o=-u.dot(n,b))<p&&(p=o,d=a);return a=S[d.index-1>=0?d.index-1:S.length-1],b.x=a.x-M.x,b.y=a.y-M.y,p=-u.dot(n,b),f=a,a=S[(d.index+1)%S.length],b.x=a.x-M.x,b.y=a.y-M.y,(o=-u.dot(n,b))<p&&(f=a),[d,f]}},function(t,i,n){t.exports={AlignTo:n(601),Angle:n(602),Call:n(603),GetFirst:n(604),GetLast:n(605),GridAlign:n(606),IncAlpha:n(678),IncX:n(679),IncXY:n(680),IncY:n(681),PlaceOnCircle:n(682),PlaceOnEllipse:n(683),PlaceOnLine:n(684),PlaceOnRectangle:n(685),PlaceOnTriangle:n(686),PlayAnimation:n(687),PropertyValueInc:n(46),PropertyValueSet:n(27),RandomCircle:n(688),RandomEllipse:n(689),RandomLine:n(690),RandomRectangle:n(691),RandomTriangle:n(692),Rotate:n(693),RotateAround:n(694),RotateAroundDistance:n(695),ScaleX:n(696),ScaleXY:n(697),ScaleY:n(698),SetAlpha:n(699),SetBlendMode:n(700),SetDepth:n(701),SetHitArea:n(702),SetOrigin:n(703),SetRotation:n(704),SetScale:n(705),SetScaleX:n(706),SetScaleY:n(707),SetScrollFactor:n(708),SetScrollFactorX:n(709),SetScrollFactorY:n(710),SetTint:n(711),SetVisible:n(712),SetX:n(713),SetXY:n(714),SetY:n(715),ShiftPosition:n(716),Shuffle:n(717),SmootherStep:n(718),SmoothStep:n(719),Spread:n(720),ToggleVisible:n(721),WrapInRectangle:n(722)}},function(t,i,n){var o=n(123),a=[];a[o.BOTTOM_CENTER]=n(277),a[o.BOTTOM_LEFT]=n(278),a[o.BOTTOM_RIGHT]=n(279),a[o.LEFT_BOTTOM]=n(280),a[o.LEFT_CENTER]=n(281),a[o.LEFT_TOP]=n(282),a[o.RIGHT_BOTTOM]=n(283),a[o.RIGHT_CENTER]=n(284),a[o.RIGHT_TOP]=n(285),a[o.TOP_CENTER]=n(286),a[o.TOP_LEFT]=n(287),a[o.TOP_RIGHT]=n(288),t.exports=function(t,i,n,o,u){return a[n](t,i,o,u)}},function(t,i,n){var o=n(42),a=n(87),u=n(88),d=n(52);t.exports=function(t,i,n,f){return void 0===n&&(n=0),void 0===f&&(f=0),u(t,a(i)+n),d(t,o(i)+f),t}},function(t,i,n){var o=n(42),a=n(43),u=n(53),d=n(52);t.exports=function(t,i,n,f){return void 0===n&&(n=0),void 0===f&&(f=0),u(t,a(i)-n),d(t,o(i)+f),t}},function(t,i,n){var o=n(42),a=n(44),u=n(54),d=n(52);t.exports=function(t,i,n,f){return void 0===n&&(n=0),void 0===f&&(f=0),u(t,a(i)+n),d(t,o(i)+f),t}},function(t,i,n){var o=n(42),a=n(43),u=n(55),d=n(54);t.exports=function(t,i,n,f){return void 0===n&&(n=0),void 0===f&&(f=0),d(t,a(i)-n),u(t,o(i)+f),t}},function(t,i,n){var o=n(89),a=n(43),u=n(90),d=n(54);t.exports=function(t,i,n,f){return void 0===n&&(n=0),void 0===f&&(f=0),d(t,a(i)-n),u(t,o(i)+f),t}},function(t,i,n){var o=n(43),a=n(45),u=n(54),d=n(52);t.exports=function(t,i,n,f){return void 0===n&&(n=0),void 0===f&&(f=0),u(t,o(i)-n),d(t,a(i)-f),t}},function(t,i,n){var o=n(42),a=n(44),u=n(55),d=n(53);t.exports=function(t,i,n,f){return void 0===n&&(n=0),void 0===f&&(f=0),d(t,a(i)+n),u(t,o(i)+f),t}},function(t,i,n){var o=n(89),a=n(44),u=n(90),d=n(53);t.exports=function(t,i,n,f){return void 0===n&&(n=0),void 0===f&&(f=0),d(t,a(i)+n),u(t,o(i)+f),t}},function(t,i,n){var o=n(44),a=n(45),u=n(53),d=n(52);t.exports=function(t,i,n,f){return void 0===n&&(n=0),void 0===f&&(f=0),u(t,o(i)+n),d(t,a(i)-f),t}},function(t,i,n){var o=n(87),a=n(45),u=n(55),d=n(88);t.exports=function(t,i,n,f){return void 0===n&&(n=0),void 0===f&&(f=0),d(t,o(i)+n),u(t,a(i)-f),t}},function(t,i,n){var o=n(43),a=n(45),u=n(55),d=n(53);t.exports=function(t,i,n,f){return void 0===n&&(n=0),void 0===f&&(f=0),d(t,o(i)-n),u(t,a(i)-f),t}},function(t,i,n){var o=n(44),a=n(45),u=n(55),d=n(54);t.exports=function(t,i,n,f){return void 0===n&&(n=0),void 0===f&&(f=0),d(t,o(i)+n),u(t,a(i)-f),t}},function(t,i,n){var o=n(123),a=[];a[o.BOTTOM_CENTER]=n(290),a[o.BOTTOM_LEFT]=n(291),a[o.BOTTOM_RIGHT]=n(292),a[o.CENTER]=n(293),a[o.LEFT_CENTER]=n(295),a[o.RIGHT_CENTER]=n(296),a[o.TOP_CENTER]=n(297),a[o.TOP_LEFT]=n(298),a[o.TOP_RIGHT]=n(299),a[o.LEFT_BOTTOM]=a[o.BOTTOM_LEFT],a[o.LEFT_TOP]=a[o.TOP_LEFT],a[o.RIGHT_BOTTOM]=a[o.BOTTOM_RIGHT],a[o.RIGHT_TOP]=a[o.TOP_RIGHT],t.exports=function(t,i,n,o,u){return a[n](t,i,o,u)}},function(t,i,n){var o=n(42),a=n(87),u=n(55),d=n(88);t.exports=function(t,i,n,f){return void 0===n&&(n=0),void 0===f&&(f=0),d(t,a(i)+n),u(t,o(i)+f),t}},function(t,i,n){var o=n(42),a=n(43),u=n(55),d=n(53);t.exports=function(t,i,n,f){return void 0===n&&(n=0),void 0===f&&(f=0),d(t,a(i)-n),u(t,o(i)+f),t}},function(t,i,n){var o=n(42),a=n(44),u=n(55),d=n(54);t.exports=function(t,i,n,f){return void 0===n&&(n=0),void 0===f&&(f=0),d(t,a(i)+n),u(t,o(i)+f),t}},function(t,i,n){var o=n(294),a=n(87),u=n(89);t.exports=function(t,i,n,d){return void 0===n&&(n=0),void 0===d&&(d=0),o(t,a(i)+n,u(i)+d),t}},function(t,i,n){var o=n(88),a=n(90);t.exports=function(t,i,n){return o(t,i),a(t,n)}},function(t,i,n){var o=n(89),a=n(43),u=n(90),d=n(53);t.exports=function(t,i,n,f){return void 0===n&&(n=0),void 0===f&&(f=0),d(t,a(i)-n),u(t,o(i)+f),t}},function(t,i,n){var o=n(89),a=n(44),u=n(90),d=n(54);t.exports=function(t,i,n,f){return void 0===n&&(n=0),void 0===f&&(f=0),d(t,a(i)+n),u(t,o(i)+f),t}},function(t,i,n){var o=n(87),a=n(45),u=n(88),d=n(52);t.exports=function(t,i,n,f){return void 0===n&&(n=0),void 0===f&&(f=0),u(t,o(i)+n),d(t,a(i)-f),t}},function(t,i,n){var o=n(43),a=n(45),u=n(53),d=n(52);t.exports=function(t,i,n,f){return void 0===n&&(n=0),void 0===f&&(f=0),u(t,o(i)-n),d(t,a(i)-f),t}},function(t,i,n){var o=n(44),a=n(45),u=n(54),d=n(52);t.exports=function(t,i,n,f){return void 0===n&&(n=0),void 0===f&&(f=0),u(t,o(i)+n),d(t,a(i)-f),t}},function(t,i,n){var o=n(169),a=n(98),u=n(14),d=n(4);t.exports=function(t,i,n){void 0===n&&(n=new d);var f=a(i,0,u.PI2);return o(t,f,n)}},function(t,i,n){var o=n(302),a=n(169),u=n(98),d=n(14);t.exports=function(t,i,n,f){void 0===f&&(f=[]),!i&&n>0&&(i=o(t)/n);for(var p=0;p<i;p++){var b=u(p/i,0,d.PI2);f.push(a(t,b))}return f}},function(t,i){t.exports=function(t){return Math.PI*t.radius*2}},function(t,i,n){var o=n(18),a={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t){return void 0===t&&(t=1),this.alpha=t,this},alpha:{get:function(){return this._alpha},set:function(t){var i=o(t,0,1);this._alpha=i,0===i?this.renderFlags&=-3:this.renderFlags|=2}}};t.exports=a},function(t,i,n){var o=n(35),a={_blendMode:o.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(t){"string"==typeof t&&(t=o[t]),(t|=0)>=-1&&(this._blendMode=t)}},setBlendMode:function(t){return this.blendMode=t,this}};t.exports=a},function(t,i){t.exports={_depth:0,depth:{get:function(){return this._depth},set:function(t){this.displayList&&this.displayList.queueDepthSort(),this._depth=t}},setDepth:function(t){return void 0===t&&(t=0),this.depth=t,this}}},function(t,i,n){var o=n(171),a=n(130);t.exports=function(t,i,n,u){void 0===u&&(u=[]),!i&&n>0&&(i=a(t)/n);for(var d=0;d<i;d++){var f=d/i;u.push(o(t,f))}return u}},function(t,i,n){var o=n(4);t.exports=function(t,i,n){return void 0===n&&(n=new o),n.x=t.x1+(t.x2-t.x1)*i,n.y=t.y1+(t.y2-t.y1)*i,n}},function(t,i){t.exports=function(t,i,n,o){var a=Math.cos(o),u=Math.sin(o),d=t.x-i,f=t.y-n;return t.x=d*a-f*u+i,t.y=d*u+f*a+n,t}},function(t,i,n){var o=n(310),a=n(311),u={mask:null,setMask:function(t){return this.mask=t,this},clearMask:function(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(t){return void 0===t&&(this.texture||this.shader)&&(t=this),new o(this.scene,t)},createGeometryMask:function(t){return void 0===t&&"Graphics"===this.type&&(t=this),new a(this.scene,t)}};t.exports=u},function(t,i,n){var o=n(0),a=n(22),u=n(91),d=new o({initialize:function BitmapMask2(t,i){var n=t.sys.renderer;this.renderer=n,this.bitmapMask=i,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),t.sys.game.events.on(a.CONTEXT_RESTORED,this.createMask,this),n&&n.on(u.RESIZE,this.createMask,this)},createMask:function(){var t=this.renderer;if(t&&t.gl){this.mainTexture&&this.clearMask();var i=t.width,n=t.height,o=0==(i&i-1)&&0==(n&n-1),a=t.gl,u=o?a.REPEAT:a.CLAMP_TO_EDGE,d=a.LINEAR;this.mainTexture=t.createTexture2D(0,d,d,u,u,a.RGBA,null,i,n),this.maskTexture=t.createTexture2D(0,d,d,u,u,a.RGBA,null,i,n),this.mainFramebuffer=t.createFramebuffer(i,n,this.mainTexture,!0),this.maskFramebuffer=t.createFramebuffer(i,n,this.maskTexture,!0)}},clearMask:function(){var t=this.renderer;t&&t.gl&&this.mainTexture&&(t.deleteTexture(this.mainTexture),t.deleteTexture(this.maskTexture),t.deleteFramebuffer(this.mainFramebuffer),t.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(t){this.bitmapMask=t},preRenderWebGL:function(t,i,n){t.pipelines.BITMAPMASK_PIPELINE.beginMask(this,i,n)},postRenderWebGL:function(t,i){t.pipelines.BITMAPMASK_PIPELINE.endMask(this,i)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(u.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});t.exports=d},function(t,i,n){var o=new(n(0))({initialize:function GeometryMask2(t,i){this.geometryMask=i,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(t){return this.geometryMask=t,this},setInvertAlpha:function(t){return void 0===t&&(t=!0),this.invertAlpha=t,this},preRenderWebGL:function(t,i,n){var o=t.gl;t.flush(),0===t.maskStack.length&&(o.enable(o.STENCIL_TEST),o.clear(o.STENCIL_BUFFER_BIT),t.maskCount=0),t.currentCameraMask.mask!==this&&(t.currentMask.mask=this),t.maskStack.push({mask:this,camera:n}),this.applyStencil(t,n,!0),t.maskCount++},applyStencil:function(t,i,n){var o=t.gl,a=this.geometryMask,u=t.maskCount;o.colorMask(!1,!1,!1,!1),n?(o.stencilFunc(o.EQUAL,u,255),o.stencilOp(o.KEEP,o.KEEP,o.INCR)):(o.stencilFunc(o.EQUAL,u+1,255),o.stencilOp(o.KEEP,o.KEEP,o.DECR)),a.renderWebGL(t,a,i),t.flush(),o.colorMask(!0,!0,!0,!0),o.stencilOp(o.KEEP,o.KEEP,o.KEEP),n?this.invertAlpha?o.stencilFunc(o.NOTEQUAL,u+1,255):o.stencilFunc(o.EQUAL,u+1,255):this.invertAlpha?o.stencilFunc(o.NOTEQUAL,u,255):o.stencilFunc(o.EQUAL,u,255)},postRenderWebGL:function(t){var i=t.gl;t.maskStack.pop(),t.maskCount--,t.flush();var n=t.currentMask;if(0===t.maskStack.length)n.mask=null,i.disable(i.STENCIL_TEST);else{var o=t.maskStack[t.maskStack.length-1];o.mask.applyStencil(t,o.camera,!1),t.currentCameraMask.mask!==o.mask?(n.mask=o.mask,n.camera=o.camera):n.mask=null}},preRenderCanvas:function(t,i,n){var o=this.geometryMask;t.currentContext.save(),o.renderCanvas(t,o,n,null,null,!0),t.currentContext.clip()},postRenderCanvas:function(t){t.currentContext.restore()},destroy:function(){this.geometryMask=null}});t.exports=o},function(t,i){t.exports={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(t,i){return void 0===i&&(i=t),this.scrollFactorX=t,this.scrollFactorY=i,this}}},function(t,i,n){var o=n(14),a=n(25),u=n(177),d=n(269),f=n(270),p=n(3),b={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(t){this._scaleX=t,this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function(){return this._scaleX},set:function(t){this._scaleX=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleY:{get:function(){return this._scaleY},set:function(t){this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},angle:{get:function(){return f(this._rotation*o.RAD_TO_DEG)},set:function(t){this.rotation=f(t)*o.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=d(t)}},setPosition:function(t,i,n,o){return void 0===t&&(t=0),void 0===i&&(i=t),void 0===n&&(n=0),void 0===o&&(o=0),this.x=t,this.y=i,this.z=n,this.w=o,this},copyPosition:function(t){return void 0!==t.x&&(this.x=t.x),void 0!==t.y&&(this.y=t.y),void 0!==t.z&&(this.z=t.z),void 0!==t.w&&(this.w=t.w),this},setRandomPosition:function(t,i,n,o){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=this.scene.sys.scale.width),void 0===o&&(o=this.scene.sys.scale.height),this.x=t+Math.random()*n,this.y=i+Math.random()*o,this},setRotation:function(t){return void 0===t&&(t=0),this.rotation=t,this},setAngle:function(t){return void 0===t&&(t=0),this.angle=t,this},setScale:function(t,i){return void 0===t&&(t=1),void 0===i&&(i=t),this.scaleX=t,this.scaleY=i,this},setX:function(t){return void 0===t&&(t=0),this.x=t,this},setY:function(t){return void 0===t&&(t=0),this.y=t,this},setZ:function(t){return void 0===t&&(t=0),this.z=t,this},setW:function(t){return void 0===t&&(t=0),this.w=t,this},getLocalTransformMatrix:function(t){return void 0===t&&(t=new a),t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(t,i){void 0===t&&(t=new a),void 0===i&&(i=new a);var n=this.parentContainer;if(!n)return this.getLocalTransformMatrix(t);for(t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);n;)i.applyITRS(n.x,n.y,n._rotation,n._scaleX,n._scaleY),i.multiply(t,t),n=n.parentContainer;return t},getLocalPoint:function(t,i,n,o){n||(n=new p),o||(o=this.scene.sys.cameras.main);var a=o.scrollX,d=o.scrollY,f=t+a*this.scrollFactorX-a,b=i+d*this.scrollFactorY-d;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(f,b,n):u(f,b,this.x,this.y,this.rotation,this.scaleX,this.scaleY,n),this._originComponent&&(n.x+=this._displayOriginX,n.y+=this._displayOriginY),n},getParentRotation:function(){for(var t=0,i=this.parentContainer;i;)t+=i.rotation,i=i.parentContainer;return t}};t.exports=b},function(t,i){var n={_visible:!0,visible:{get:function(){return this._visible},set:function(t){t?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function(t){return this.visible=t,this}};t.exports=n},function(t,i,n){t.exports={CHANGE_DATA:n(638),CHANGE_DATA_KEY:n(639),DESTROY:n(640),REMOVE_DATA:n(641),SET_DATA:n(642)}},function(t,i,n){var o=n(130),a=n(4);t.exports=function(t,i,n,u){if(void 0===u&&(u=[]),!i&&!n)return u;i?n=Math.round(o(t)/i):i=o(t)/n;for(var d=t.x,f=t.y,p=0,b=0;b<n;b++)switch(u.push(new a(d,f)),p){case 0:(d+=i)>=t.right&&(p=1,f+=d-t.right,d=t.right);break;case 1:(f+=i)>=t.bottom&&(p=2,d-=f-t.bottom,f=t.bottom);break;case 2:(d-=i)<=t.left&&(p=3,f-=t.left-d,d=t.left);break;case 3:(f-=i)<=t.top&&(p=0,f=t.top)}return u}},function(t,i){t.exports=function(t,i,n){void 0===i&&(i=1),void 0===n&&(n=[]);var o=Math.round(t.x1),a=Math.round(t.y1),u=Math.round(t.x2),d=Math.round(t.y2),f=Math.abs(u-o),p=Math.abs(d-a),b=o<u?1:-1,S=a<d?1:-1,M=f-p;n.push({x:o,y:a});for(var C=1;o!==u||a!==d;){var P=M<<1;P>-p&&(M-=p,o+=b),P<f&&(M+=f,a+=S),C%i==0&&n.push({x:o,y:a}),C++}return n}},function(t,i){t.exports=function(t,i,n){if(!i.length)return NaN;if(1===i.length)return i[0];var o,a,u=1;if(n){if(t<i[0][n])return i[0];for(;i[u][n]<t;)u++}else for(;i[u]<t;)u++;return u>i.length&&(u=i.length),n?(o=i[u-1][n],(a=i[u][n])-t<=t-o?i[u]:i[u-1]):(o=i[u-1],(a=i[u])-t<=t-o?a:o)}},function(t,i,n){var o=new(n(0))({initialize:function AnimationFrame2(t,i,n,o,a){void 0===a&&(a=!1),this.textureKey=t,this.textureFrame=i,this.index=n,this.frame=o,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=a},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});t.exports=o},function(t,i){t.exports=function(t){var i=/\D/g;return t.sort((function(t,n){return parseInt(t.replace(i,""),10)-parseInt(n.replace(i,""),10)})),t}},function(t,i,n){var o=n(185),a=n(0),u=n(102),d=n(9),f=n(132),p=n(22),b=n(2),S=n(6),M=n(186),C=n(322),P=new a({Extends:d,initialize:function AnimationManager2(t){d.call(this),this.game=t,this.textureManager=null,this.globalTimeScale=1,this.anims=new u,this.mixes=new u,this.paused=!1,this.name="AnimationManager",t.events.once(p.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(p.DESTROY,this.destroy,this)},addMix:function(t,i,n){var o=this.anims,a=this.mixes,u="string"==typeof t?t:t.key,d="string"==typeof i?i:i.key;if(o.has(u)&&o.has(d)){var f=a.get(u);f||(f={}),f[d]=n,a.set(u,f)}return this},removeMix:function(t,i){var n=this.mixes,o="string"==typeof t?t:t.key,a=n.get(o);if(a)if(i){var u="string"==typeof i?i:i.key;a.hasOwnProperty(u)&&delete a[u]}else i||n.delete(o);return this},getMix:function(t,i){var n=this.mixes,o="string"==typeof t?t:t.key,a="string"==typeof i?i:i.key,u=n.get(o);return u&&u.hasOwnProperty(a)?u[a]:0},add:function(t,i){return this.anims.has(t)?(console.warn("Animation key exists: "+t),this):(i.key=t,this.anims.set(t,i),this.emit(f.ADD_ANIMATION,t,i),this)},exists:function(t){return this.anims.has(t)},createFromAseprite:function(t,i){var n=[],o=this.game.cache.json.get(t);if(!o)return n;var a=this,u=S(o,"meta",null),d=S(o,"frames",null);return u&&d&&S(u,"frameTags",[]).forEach((function(o){var u=[],f=b(o,"name",null),p=b(o,"from",0),S=b(o,"to",0),M=b(o,"direction","forward");if(f&&(!i||i&&i.indexOf(f)>-1)){for(var C=[],P=Number.MAX_SAFE_INTEGER,R=p;R<=S;R++){var O=R.toString(),B=d[O];if(B){var N=b(B,"duration",Number.MAX_SAFE_INTEGER);N<P&&(P=N),C.push({frame:O,duration:N})}}C.forEach((function(i){u.push({key:t,frame:i.frame,duration:P-i.duration})}));var Y=P*u.length;"reverse"===M&&(u=u.reverse());var X={key:f,frames:u,duration:Y,yoyo:"pingpong"===M},G=a.create(X);G&&n.push(G)}})),n},create:function(t){var i=t.key,n=!1;return i&&((n=this.get(i))||(n=new o(this,i,t),this.anims.set(i,n),this.emit(f.ADD_ANIMATION,i,n))),n},fromJSON:function(t,i){void 0===i&&(i=!1),i&&this.anims.clear(),"string"==typeof t&&(t=JSON.parse(t));var n=[];if(t.hasOwnProperty("anims")&&Array.isArray(t.anims)){for(var o=0;o<t.anims.length;o++)n.push(this.create(t.anims[o]));t.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=t.globalTimeScale)}else t.hasOwnProperty("key")&&"frame"===t.type&&n.push(this.create(t));return n},generateFrameNames:function(t,i){var n,o=S(i,"prefix",""),a=S(i,"start",0),u=S(i,"end",0),d=S(i,"suffix",""),f=S(i,"zeroPad",0),p=S(i,"outputArray",[]),b=S(i,"frames",!1),P=this.textureManager.get(t);if(!P)return p;if(i)for(b||(b=C(a,u)),n=0;n<b.length;n++){var R=o+M(b[n],f,"0",1)+d;P.has(R)?p.push({key:t,frame:R}):console.warn("generateFrameNames: Frame missing: "+R+" from texture: "+t)}else for(b=P.getFrameNames(),n=0;n<b.length;n++)p.push({key:t,frame:b[n]});return p},generateFrameNumbers:function(t,i){var n=S(i,"start",0),o=S(i,"end",-1),a=S(i,"first",!1),u=S(i,"outputArray",[]),d=S(i,"frames",!1),f=this.textureManager.get(t);if(!f)return u;a&&f.has(a)&&u.push({key:t,frame:a}),d||(-1===o&&(o=f.frameTotal-2),d=C(n,o));for(var p=0;p<d.length;p++)f.has(d[p])?u.push({key:t,frame:d[p]}):console.warn("generateFrameNumbers: Frame "+p+" missing from texture: "+t);return u},get:function(t){return this.anims.get(t)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(f.PAUSE_ALL)),this},play:function(t,i){Array.isArray(i)||(i=[i]);for(var n=0;n<i.length;n++)i[n].anims.play(t);return this},staggerPlay:function(t,i,n,o){void 0===n&&(n=0),void 0===o&&(o=!0),Array.isArray(i)||(i=[i]);var a=i.length;o||a--;for(var u=0;u<i.length;u++){var d=n<0?Math.abs(n)*(a-u):n*u;i[u].anims.playAfterDelay(t,d)}return this},remove:function(t){var i=this.get(t);return i&&(this.emit(f.REMOVE_ANIMATION,t,i),this.anims.delete(t),this.removeMix(t)),i},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(f.RESUME_ALL)),this},toJSON:function(t){var i={anims:[],globalTimeScale:this.globalTimeScale};return void 0!==t&&""!==t?i.anims.push(this.anims.get(t).toJSON()):this.anims.each((function(t,n){i.anims.push(n.toJSON())})),i},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});t.exports=P},function(t,i){t.exports=function(t,i,n,o){var a,u=[],d=!1;if((n||o)&&(d=!0,n||(n=""),o||(o="")),i<t)for(a=t;a>=i;a--)d?u.push(n+a.toString()+o):u.push(a);else for(a=t;a<=i;a++)d?u.push(n+a.toString()+o):u.push(a);return u}},function(t,i,n){var o=n(0),a=n(102),u=n(9),d=n(324),f=new o({initialize:function BaseCache2(){this.entries=new a,this.events=new u},add:function(t,i){return this.entries.set(t,i),this.events.emit(d.ADD,this,t,i),this},has:function(t){return this.entries.has(t)},exists:function(t){return this.entries.has(t)},get:function(t){return this.entries.get(t)},remove:function(t){var i=this.get(t);return i&&(this.entries.delete(t),this.events.emit(d.REMOVE,this,t,i.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});t.exports=f},function(t,i,n){t.exports={ADD:n(736),REMOVE:n(737)}},function(t,i,n){var o=n(323),a=n(0),u=n(22),d=new a({initialize:function CacheManager2(t){this.game=t,this.binary=new o,this.bitmapFont=new o,this.json=new o,this.physics=new o,this.shader=new o,this.audio=new o,this.video=new o,this.text=new o,this.html=new o,this.obj=new o,this.tilemap=new o,this.xml=new o,this.custom={},this.game.events.once(u.DESTROY,this.destroy,this)},addCustom:function(t){return this.custom.hasOwnProperty(t)||(this.custom[t]=new o),this.custom[t]},destroy:function(){for(var t=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],i=0;i<t.length;i++)this[t[i]].destroy(),this[t[i]]=null;for(var n in this.custom)this.custom[n].destroy();this.custom=null,this.game=null}});t.exports=d},function(t,i,n){var o=n(133),a=n(190),u=n(18),d=n(0),f=n(11),p=n(333),b=n(37),S=n(135),M=n(10),C=n(3),P=new d({Extends:o,Mixins:[f.Flip,f.Tint,f.Pipeline],initialize:function Camera2(t,i,n,a){o.call(this,t,i,n,a),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new p.Fade(this),this.flashEffect=new p.Flash(this),this.shakeEffect=new p.Shake(this),this.panEffect=new p.Pan(this),this.rotateToEffect=new p.RotateTo(this),this.zoomEffect=new p.Zoom(this),this.lerp=new C(1,1),this.followOffset=new C,this.deadzone=null,this._follow=null},setDeadzone:function(t,i){if(void 0===t)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=t,this.deadzone.height=i):this.deadzone=new M(0,0,t,i),this._follow){var n=this.width/2,o=this.height/2,u=this._follow.x-this.followOffset.x,d=this._follow.y-this.followOffset.y;this.midPoint.set(u,d),this.scrollX=u-n,this.scrollY=d-o}a(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(t,i,n,o,a,u){return this.fadeEffect.start(!1,t,i,n,o,!0,a,u)},fadeOut:function(t,i,n,o,a,u){return this.fadeEffect.start(!0,t,i,n,o,!0,a,u)},fadeFrom:function(t,i,n,o,a,u,d){return this.fadeEffect.start(!1,t,i,n,o,a,u,d)},fade:function(t,i,n,o,a,u,d){return this.fadeEffect.start(!0,t,i,n,o,a,u,d)},flash:function(t,i,n,o,a,u,d){return this.flashEffect.start(t,i,n,o,a,u,d)},shake:function(t,i,n,o,a){return this.shakeEffect.start(t,i,n,o,a)},pan:function(t,i,n,o,a,u,d){return this.panEffect.start(t,i,n,o,a,u,d)},rotateTo:function(t,i,n,o,a,u,d){return this.rotateToEffect.start(t,i,n,o,a,u,d)},zoomTo:function(t,i,n,o,a,u){return this.zoomEffect.start(t,i,n,o,a,u)},preRender:function(){this.renderList.length=0;var t=this.width,i=this.height,n=.5*t,o=.5*i,u=this.zoom,d=this.matrix,f=t*this.originX,p=i*this.originY,M=this._follow,C=this.deadzone,P=this.scrollX,R=this.scrollY;C&&a(C,this.midPoint.x,this.midPoint.y);var O=!1;if(M&&!this.panEffect.isRunning){var B=M.x-this.followOffset.x,N=M.y-this.followOffset.y;C?(B<C.x?P=S(P,P-(C.x-B),this.lerp.x):B>C.right&&(P=S(P,P+(B-C.right),this.lerp.x)),N<C.y?R=S(R,R-(C.y-N),this.lerp.y):N>C.bottom&&(R=S(R,R+(N-C.bottom),this.lerp.y))):(P=S(P,B-f,this.lerp.x),R=S(R,N-p,this.lerp.y)),O=!0}this.useBounds&&(P=this.clampX(P),R=this.clampY(R)),this.roundPixels&&(f=Math.round(f),p=Math.round(p),P=Math.round(P),R=Math.round(R)),this.scrollX=P,this.scrollY=R;var Y=P+n,X=R+o;this.midPoint.set(Y,X);var G=t/u,U=i/u,V=Y-G/2,z=X-U/2;this.roundPixels&&(V=Math.round(V),z=Math.round(z)),this.worldView.setTo(V,z,G,U),d.applyITRS(this.x+f,this.y+p,this.rotation,u,u),d.translate(-f,-p),this.shakeEffect.preRender(),O&&this.emit(b.FOLLOW_UPDATE,this,M)},setLerp:function(t,i){return void 0===t&&(t=1),void 0===i&&(i=t),this.lerp.set(t,i),this},setFollowOffset:function(t,i){return void 0===t&&(t=0),void 0===i&&(i=0),this.followOffset.set(t,i),this},startFollow:function(t,i,n,o,a,d){void 0===i&&(i=!1),void 0===n&&(n=1),void 0===o&&(o=n),void 0===a&&(a=0),void 0===d&&(d=a),this._follow=t,this.roundPixels=i,n=u(n,0,1),o=u(o,0,1),this.lerp.set(n,o),this.followOffset.set(a,d);var f=this.width/2,p=this.height/2,b=t.x-a,S=t.y-d;return this.midPoint.set(b,S),this.scrollX=b-f,this.scrollY=S-p,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(t,i){this.visible&&(this.rotateToEffect.update(t,i),this.panEffect.update(t,i),this.zoomEffect.update(t,i),this.shakeEffect.update(t,i),this.flashEffect.update(t,i),this.fadeEffect.update(t,i))},destroy:function(){this.resetFX(),o.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});t.exports=P},function(t,i,n){var o=n(38);t.exports=function(t){var i=new o;t=t.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,i,n,o){return i+i+n+n+o+o}));var n=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(n){var a=parseInt(n[1],16),u=parseInt(n[2],16),d=parseInt(n[3],16);i.setTo(a,u,d)}return i}},function(t,i){t.exports=function(t,i,n,o){return o<<24|t<<16|i<<8|n}},function(t,i){t.exports=function(t,i,n,o){void 0===o&&(o={h:0,s:0,v:0}),t/=255,i/=255,n/=255;var a=Math.min(t,i,n),u=Math.max(t,i,n),d=u-a,f=0,p=0===u?0:d/u,b=u;return u!==a&&(u===t?f=(i-n)/d+(i<n?6:0):u===i?f=(n-t)/d+2:u===n&&(f=(t-i)/d+4),f/=6),o.hasOwnProperty("_h")?(o._h=f,o._s=p,o._v=b):(o.h=f,o.s=p,o.v=b),o}},function(t,i){t.exports=function(t){return t>16777215?{a:t>>>24,r:t>>16&255,g:t>>8&255,b:255&t}:{a:255,r:t>>16&255,g:t>>8&255,b:255&t}}},function(t,i,n){var o=n(38);t.exports=function(t){return new o(t.r,t.g,t.b,t.a)}},function(t,i,n){var o=n(38);t.exports=function(t){var i=new o,n=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(t.toLowerCase());if(n){var a=parseInt(n[1],10),u=parseInt(n[2],10),d=parseInt(n[3],10),f=void 0!==n[4]?parseFloat(n[4]):1;i.setTo(a,u,d,255*f)}return i}},function(t,i,n){t.exports={Fade:n(761),Flash:n(762),Pan:n(763),Shake:n(796),RotateTo:n(797),Zoom:n(798)}},function(t,i,n){t.exports={In:n(764),Out:n(765),InOut:n(766)}},function(t,i,n){t.exports={In:n(767),Out:n(768),InOut:n(769)}},function(t,i,n){t.exports={In:n(770),Out:n(771),InOut:n(772)}},function(t,i,n){t.exports={In:n(773),Out:n(774),InOut:n(775)}},function(t,i,n){t.exports={In:n(776),Out:n(777),InOut:n(778)}},function(t,i,n){t.exports={In:n(779),Out:n(780),InOut:n(781)}},function(t,i,n){t.exports=n(782)},function(t,i,n){t.exports={In:n(783),Out:n(784),InOut:n(785)}},function(t,i,n){t.exports={In:n(786),Out:n(787),InOut:n(788)}},function(t,i,n){t.exports={In:n(789),Out:n(790),InOut:n(791)}},function(t,i,n){t.exports={In:n(792),Out:n(793),InOut:n(794)}},function(t,i,n){t.exports=n(795)},function(t,i,n){var o=n(0),a=n(33),u=n(347),d=n(2),f=n(6),p=n(7),b=n(193),S=n(1),M=n(197),C=n(187),P=new o({initialize:function Config2(t){void 0===t&&(t={}),this.width=f(t,"width",1024),this.height=f(t,"height",768),this.zoom=f(t,"zoom",1),this.parent=f(t,"parent",void 0),this.scaleMode=f(t,"scaleMode",0),this.expandParent=f(t,"expandParent",!0),this.autoRound=f(t,"autoRound",!1),this.autoCenter=f(t,"autoCenter",0),this.resizeInterval=f(t,"resizeInterval",500),this.fullscreenTarget=f(t,"fullscreenTarget",null),this.minWidth=f(t,"minWidth",0),this.maxWidth=f(t,"maxWidth",0),this.minHeight=f(t,"minHeight",0),this.maxHeight=f(t,"maxHeight",0);var i=f(t,"scale",null);i&&(this.width=f(i,"width",this.width),this.height=f(i,"height",this.height),this.zoom=f(i,"zoom",this.zoom),this.parent=f(i,"parent",this.parent),this.scaleMode=f(i,"mode",this.scaleMode),this.expandParent=f(i,"expandParent",this.expandParent),this.autoRound=f(i,"autoRound",this.autoRound),this.autoCenter=f(i,"autoCenter",this.autoCenter),this.resizeInterval=f(i,"resizeInterval",this.resizeInterval),this.fullscreenTarget=f(i,"fullscreenTarget",this.fullscreenTarget),this.minWidth=f(i,"min.width",this.minWidth),this.maxWidth=f(i,"max.width",this.maxWidth),this.minHeight=f(i,"min.height",this.minHeight),this.maxHeight=f(i,"max.height",this.maxHeight)),this.renderType=f(t,"type",a.AUTO),this.canvas=f(t,"canvas",null),this.context=f(t,"context",null),this.canvasStyle=f(t,"canvasStyle",null),this.customEnvironment=f(t,"customEnvironment",!1),this.sceneConfig=f(t,"scene",null),this.seed=f(t,"seed",[(Date.now()*Math.random()).toString()]),b.RND=new b.RandomDataGenerator(this.seed),this.gameTitle=f(t,"title",""),this.gameURL=f(t,"url","https://phaser.io"),this.gameVersion=f(t,"version",""),this.autoFocus=f(t,"autoFocus",!0),this.domCreateContainer=f(t,"dom.createContainer",!1),this.domBehindCanvas=f(t,"dom.behindCanvas",!1),this.domPointerEvents=f(t,"dom.pointerEvents","none"),this.inputKeyboard=f(t,"input.keyboard",!0),this.inputKeyboardEventTarget=f(t,"input.keyboard.target",window),this.inputKeyboardCapture=f(t,"input.keyboard.capture",[]),this.inputMouse=f(t,"input.mouse",!0),this.inputMouseEventTarget=f(t,"input.mouse.target",null),this.inputMousePreventDefaultDown=f(t,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=f(t,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=f(t,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=f(t,"input.mouse.preventDefaultWheel",!0),this.inputTouch=f(t,"input.touch",u.input.touch),this.inputTouchEventTarget=f(t,"input.touch.target",null),this.inputTouchCapture=f(t,"input.touch.capture",!0),this.inputActivePointers=f(t,"input.activePointers",1),this.inputSmoothFactor=f(t,"input.smoothFactor",0),this.inputWindowEvents=f(t,"input.windowEvents",!0),this.inputGamepad=f(t,"input.gamepad",!1),this.inputGamepadEventTarget=f(t,"input.gamepad.target",window),this.disableContextMenu=f(t,"disableContextMenu",!1),this.audio=f(t,"audio",{}),this.hideBanner=!1===f(t,"banner",null),this.hidePhaser=f(t,"banner.hidePhaser",!1),this.bannerTextColor=f(t,"banner.text","#ffffff"),this.bannerBackgroundColor=f(t,"banner.background",["#ff0000","#ffff00","#00ff00","#00ffff","#000000"]),""===this.gameTitle&&this.hidePhaser&&(this.hideBanner=!0),this.fps=f(t,"fps",null);var n=f(t,"render",t);this.pipeline=f(n,"pipeline",null),this.antialias=f(n,"antialias",!0),this.antialiasGL=f(n,"antialiasGL",!0),this.mipmapFilter=f(n,"mipmapFilter","LINEAR"),this.desynchronized=f(n,"desynchronized",!1),this.roundPixels=f(n,"roundPixels",!1),this.pixelArt=f(n,"pixelArt",1!==this.zoom),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=f(n,"transparent",!1),this.clearBeforeRender=f(n,"clearBeforeRender",!0),this.preserveDrawingBuffer=f(n,"preserveDrawingBuffer",!1),this.premultipliedAlpha=f(n,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=f(n,"failIfMajorPerformanceCaveat",!1),this.powerPreference=f(n,"powerPreference","default"),this.batchSize=f(n,"batchSize",4096),this.maxTextures=f(n,"maxTextures",-1),this.maxLights=f(n,"maxLights",10);var o=f(t,"backgroundColor",0);this.backgroundColor=C(o),this.transparent&&(this.backgroundColor=C(0),this.backgroundColor.alpha=0),this.preBoot=f(t,"callbacks.preBoot",S),this.postBoot=f(t,"callbacks.postBoot",S),this.physics=f(t,"physics",{}),this.defaultPhysicsSystem=f(this.physics,"default",!1),this.loaderBaseURL=f(t,"loader.baseURL",""),this.loaderPath=f(t,"loader.path","");var P=u.os.android?6:32;this.loaderMaxParallelDownloads=f(t,"loader.maxParallelDownloads",P),this.loaderCrossOrigin=f(t,"loader.crossOrigin",void 0),this.loaderResponseType=f(t,"loader.responseType",""),this.loaderAsync=f(t,"loader.async",!0),this.loaderUser=f(t,"loader.user",""),this.loaderPassword=f(t,"loader.password",""),this.loaderTimeout=f(t,"loader.timeout",0),this.loaderWithCredentials=f(t,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var R=f(t,"plugins",null),O=M.DefaultScene;R&&(Array.isArray(R)?this.defaultPlugins=R:p(R)&&(this.installGlobalPlugins=d(R,"global",[]),this.installScenePlugins=d(R,"scene",[]),Array.isArray(R.default)?O=R.default:Array.isArray(R.defaultMerge)&&(O=O.concat(R.defaultMerge)))),this.defaultPlugins=O;var B="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=f(t,"images.default",B+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=f(t,"images.missing",B+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=f(t,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=a.WEBGL:window.FORCE_CANVAS&&(this.renderType=a.CANVAS))}});t.exports=P},function(t,i,n){t.exports={os:n(105),browser:n(136),features:n(191),input:n(808),audio:n(809),video:n(810),fullscreen:n(811),canvasFeatures:n(348)}},function(t,i,n){var o=n(31),a={supportInverseAlpha:!1,supportNewBlendModes:!1};t.exports=function init(){return"function"!=typeof importScripts&&void 0!==document&&(a.supportNewBlendModes=function checkBlendMode(){var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",i="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",n=new Image;return n.onload=function(){var u=new Image;u.onload=function(){var t=o.create(u,6,1).getContext("2d");if(t.globalCompositeOperation="multiply",t.drawImage(n,0,0),t.drawImage(u,2,0),!t.getImageData(2,0,1,1))return!1;var i=t.getImageData(2,0,1,1).data;o.remove(u),a.supportNewBlendModes=255===i[0]&&0===i[1]&&0===i[2]},u.src=t+"/wCKxvRF"+i},n.src=t+"AP804Oa6"+i,!1}(),a.supportInverseAlpha=function checkInverseAlpha(){var t=o.create(this,2,1).getContext("2d");t.fillStyle="rgba(10, 20, 30, 0.5)",t.fillRect(0,0,1,1);var i=t.getImageData(0,0,1,1);if(null===i)return!1;t.putImageData(i,1,0);var n=t.getImageData(1,0,1,1);return n.data[0]===i.data[0]&&n.data[1]===i.data[1]&&n.data[2]===i.data[2]&&n.data[3]===i.data[3]}()),a}()},function(t,i){t.exports=function(t,i,n,o){return Math.atan2(o-i,n-t)}},function(t,i){t.exports=function(t,i){return Math.atan2(i.y-t.y,i.x-t.x)}},function(t,i){t.exports=function(t){return(t%=2*Math.PI)>=0?t:t+2*Math.PI}},function(t,i){t.exports=function(t,i){var n=t.x-i.x,o=t.y-i.y;return Math.sqrt(n*n+o*o)}},function(t,i){t.exports=function(t,i,n,o){var a=t-n,u=i-o;return a*a+u*u}},function(t,i){t.exports=function(t,i,n){return void 0===n&&(n=1e-4),t>i-n}},function(t,i){t.exports=function(t,i,n){return void 0===n&&(n=1e-4),t<i+n}},function(t,i,n){var o=n(357);t.exports=function(t,i){return o(t)/o(i)/o(t-i)}},function(t,i){t.exports=function(t){if(0===t)return 1;for(var i=t;--t;)i*=t;return i}},function(t,i){t.exports=function(t,i,n,o,a){return function P0(t,i){var n=1-t;return n*n*n*i}(t,i)+function P1(t,i){var n=1-t;return 3*n*n*t*i}(t,n)+function P2(t,i){return 3*(1-t)*t*t*i}(t,o)+function P3(t,i){return t*t*t*i}(t,a)}},function(t,i){t.exports=function(t,i,n,o){return function P0(t,i){var n=1-t;return n*n*i}(t,i)+function P1(t,i){return 2*(1-t)*t*i}(t,n)+function P2(t,i){return t*t*i}(t,o)}},function(t,i,n){var o=n(184);t.exports=function(t,i,n){return i+(n-i)*o(t,0,1)}},function(t,i){t.exports=function(t){var i=Math.log(t)/.6931471805599453;return 1<<Math.ceil(i)}},function(t,i){t.exports=function(t,i){var n=t.x,o=t.y;return t.x=n*Math.cos(i)-o*Math.sin(i),t.y=n*Math.sin(i)+o*Math.cos(i),t}},function(t,i){t.exports=function(t){return t>0?Math.ceil(t):Math.floor(t)}},function(t,i,n){var o=new(n(0))({initialize:function Matrix32(t){this.val=new Float32Array(9),t?this.copy(t):this.identity()},clone:function(){return new o(this)},set:function(t){return this.copy(t)},copy:function(t){var i=this.val,n=t.val;return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],this},fromMat4:function(t){var i=t.val,n=this.val;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[4],n[4]=i[5],n[5]=i[6],n[6]=i[8],n[7]=i[9],n[8]=i[10],this},fromArray:function(t){var i=this.val;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],this},identity:function(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},transpose:function(){var t=this.val,i=t[1],n=t[2],o=t[5];return t[1]=t[3],t[2]=t[6],t[3]=i,t[5]=t[7],t[6]=n,t[7]=o,this},invert:function(){var t=this.val,i=t[0],n=t[1],o=t[2],a=t[3],u=t[4],d=t[5],f=t[6],p=t[7],b=t[8],S=b*u-d*p,M=-b*a+d*f,C=p*a-u*f,P=i*S+n*M+o*C;return P?(P=1/P,t[0]=S*P,t[1]=(-b*n+o*p)*P,t[2]=(d*n-o*u)*P,t[3]=M*P,t[4]=(b*i-o*f)*P,t[5]=(-d*i+o*a)*P,t[6]=C*P,t[7]=(-p*i+n*f)*P,t[8]=(u*i-n*a)*P,this):null},adjoint:function(){var t=this.val,i=t[0],n=t[1],o=t[2],a=t[3],u=t[4],d=t[5],f=t[6],p=t[7],b=t[8];return t[0]=u*b-d*p,t[1]=o*p-n*b,t[2]=n*d-o*u,t[3]=d*f-a*b,t[4]=i*b-o*f,t[5]=o*a-i*d,t[6]=a*p-u*f,t[7]=n*f-i*p,t[8]=i*u-n*a,this},determinant:function(){var t=this.val,i=t[0],n=t[1],o=t[2],a=t[3],u=t[4],d=t[5],f=t[6],p=t[7],b=t[8];return i*(b*u-d*p)+n*(-b*a+d*f)+o*(p*a-u*f)},multiply:function(t){var i=this.val,n=i[0],o=i[1],a=i[2],u=i[3],d=i[4],f=i[5],p=i[6],b=i[7],S=i[8],M=t.val,C=M[0],P=M[1],R=M[2],O=M[3],B=M[4],N=M[5],Y=M[6],X=M[7],G=M[8];return i[0]=C*n+P*u+R*p,i[1]=C*o+P*d+R*b,i[2]=C*a+P*f+R*S,i[3]=O*n+B*u+N*p,i[4]=O*o+B*d+N*b,i[5]=O*a+B*f+N*S,i[6]=Y*n+X*u+G*p,i[7]=Y*o+X*d+G*b,i[8]=Y*a+X*f+G*S,this},translate:function(t){var i=this.val,n=t.x,o=t.y;return i[6]=n*i[0]+o*i[3]+i[6],i[7]=n*i[1]+o*i[4]+i[7],i[8]=n*i[2]+o*i[5]+i[8],this},rotate:function(t){var i=this.val,n=i[0],o=i[1],a=i[2],u=i[3],d=i[4],f=i[5],p=Math.sin(t),b=Math.cos(t);return i[0]=b*n+p*u,i[1]=b*o+p*d,i[2]=b*a+p*f,i[3]=b*u-p*n,i[4]=b*d-p*o,i[5]=b*f-p*a,this},scale:function(t){var i=this.val,n=t.x,o=t.y;return i[0]=n*i[0],i[1]=n*i[1],i[2]=n*i[2],i[3]=o*i[3],i[4]=o*i[4],i[5]=o*i[5],this},fromQuat:function(t){var i=t.x,n=t.y,o=t.z,a=t.w,u=i+i,d=n+n,f=o+o,p=i*u,b=i*d,S=i*f,M=n*d,C=n*f,P=o*f,R=a*u,O=a*d,B=a*f,N=this.val;return N[0]=1-(M+P),N[3]=b+B,N[6]=S-O,N[1]=b-B,N[4]=1-(p+P),N[7]=C+R,N[2]=S+O,N[5]=C-R,N[8]=1-(p+M),this},normalFromMat4:function(t){var i=t.val,n=this.val,o=i[0],a=i[1],u=i[2],d=i[3],f=i[4],p=i[5],b=i[6],S=i[7],M=i[8],C=i[9],P=i[10],R=i[11],O=i[12],B=i[13],N=i[14],Y=i[15],X=o*p-a*f,G=o*b-u*f,U=o*S-d*f,V=a*b-u*p,z=a*S-d*p,W=u*S-d*b,H=M*B-C*O,j=M*N-P*O,q=M*Y-R*O,Z=C*N-P*B,K=C*Y-R*B,$=P*Y-R*N,tt=X*$-G*K+U*Z+V*q-z*j+W*H;return tt?(tt=1/tt,n[0]=(p*$-b*K+S*Z)*tt,n[1]=(b*q-f*$-S*j)*tt,n[2]=(f*K-p*q+S*H)*tt,n[3]=(u*K-a*$-d*Z)*tt,n[4]=(o*$-u*q+d*j)*tt,n[5]=(a*q-o*K-d*H)*tt,n[6]=(B*W-N*z+Y*V)*tt,n[7]=(N*U-O*W-Y*G)*tt,n[8]=(O*z-B*U+Y*X)*tt,this):null}});t.exports=o},function(t,i,n){var o=n(0),a=n(364),u=n(1),d=n(39),f=1e-6,p=new Int8Array([1,2,0]),b=new Float32Array([0,0,0]),S=new d(1,0,0),M=new d(0,1,0),C=new d,P=new a,R=new o({initialize:function Quaternion2(t,i,n,o){this.onChangeCallback=u,this.set(t,i,n,o)},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback(this)}},copy:function(t){return this.set(t)},set:function(t,i,n,o,a){return void 0===a&&(a=!0),"object"==typeof t?(this._x=t.x||0,this._y=t.y||0,this._z=t.z||0,this._w=t.w||0):(this._x=t||0,this._y=i||0,this._z=n||0,this._w=o||0),a&&this.onChangeCallback(this),this},add:function(t){return this._x+=t.x,this._y+=t.y,this._z+=t.z,this._w+=t.w,this.onChangeCallback(this),this},subtract:function(t){return this._x-=t.x,this._y-=t.y,this._z-=t.z,this._w-=t.w,this.onChangeCallback(this),this},scale:function(t){return this._x*=t,this._y*=t,this._z*=t,this._w*=t,this.onChangeCallback(this),this},length:function(){var t=this.x,i=this.y,n=this.z,o=this.w;return Math.sqrt(t*t+i*i+n*n+o*o)},lengthSq:function(){var t=this.x,i=this.y,n=this.z,o=this.w;return t*t+i*i+n*n+o*o},normalize:function(){var t=this.x,i=this.y,n=this.z,o=this.w,a=t*t+i*i+n*n+o*o;return a>0&&(a=1/Math.sqrt(a),this._x=t*a,this._y=i*a,this._z=n*a,this._w=o*a),this.onChangeCallback(this),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,i){void 0===i&&(i=0);var n=this.x,o=this.y,a=this.z,u=this.w;return this.set(n+i*(t.x-n),o+i*(t.y-o),a+i*(t.z-a),u+i*(t.w-u))},rotationTo:function(t,i){var n=t.x*i.x+t.y*i.y+t.z*i.z;return n<-.999999?(C.copy(S).cross(t).length()<f&&C.copy(M).cross(t),C.normalize(),this.setAxisAngle(C,Math.PI)):n>.999999?this.set(0,0,0,1):(C.copy(t).cross(i),this._x=C.x,this._y=C.y,this._z=C.z,this._w=1+n,this.normalize())},setAxes:function(t,i,n){var o=P.val;return o[0]=i.x,o[3]=i.y,o[6]=i.z,o[1]=n.x,o[4]=n.y,o[7]=n.z,o[2]=-t.x,o[5]=-t.y,o[8]=-t.z,this.fromMat3(P).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(t,i){i*=.5;var n=Math.sin(i);return this.set(n*t.x,n*t.y,n*t.z,Math.cos(i))},multiply:function(t){var i=this.x,n=this.y,o=this.z,a=this.w,u=t.x,d=t.y,f=t.z,p=t.w;return this.set(i*p+a*u+n*f-o*d,n*p+a*d+o*u-i*f,o*p+a*f+i*d-n*u,a*p-i*u-n*d-o*f)},slerp:function(t,i){var n=this.x,o=this.y,a=this.z,u=this.w,d=t.x,p=t.y,b=t.z,S=t.w,M=n*d+o*p+a*b+u*S;M<0&&(M=-M,d=-d,p=-p,b=-b,S=-S);var C=1-i,P=i;if(1-M>f){var R=Math.acos(M),O=Math.sin(R);C=Math.sin((1-i)*R)/O,P=Math.sin(i*R)/O}return this.set(C*n+P*d,C*o+P*p,C*a+P*b,C*u+P*S)},invert:function(){var t=this.x,i=this.y,n=this.z,o=this.w,a=t*t+i*i+n*n+o*o,u=a?1/a:0;return this.set(-t*u,-i*u,-n*u,o*u)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(t){t*=.5;var i=this.x,n=this.y,o=this.z,a=this.w,u=Math.sin(t),d=Math.cos(t);return this.set(i*d+a*u,n*d+o*u,o*d-n*u,a*d-i*u)},rotateY:function(t){t*=.5;var i=this.x,n=this.y,o=this.z,a=this.w,u=Math.sin(t),d=Math.cos(t);return this.set(i*d-o*u,n*d+a*u,o*d+i*u,a*d-n*u)},rotateZ:function(t){t*=.5;var i=this.x,n=this.y,o=this.z,a=this.w,u=Math.sin(t),d=Math.cos(t);return this.set(i*d+n*u,n*d-i*u,o*d+a*u,a*d-o*u)},calculateW:function(){var t=this.x,i=this.y,n=this.z;return this.w=-Math.sqrt(1-t*t-i*i-n*n),this},setFromEuler:function(t,i){var n=t.x/2,o=t.y/2,a=t.z/2,u=Math.cos(n),d=Math.cos(o),f=Math.cos(a),p=Math.sin(n),b=Math.sin(o),S=Math.sin(a);switch(t.order){case"XYZ":this.set(p*d*f+u*b*S,u*b*f-p*d*S,u*d*S+p*b*f,u*d*f-p*b*S,i);break;case"YXZ":this.set(p*d*f+u*b*S,u*b*f-p*d*S,u*d*S-p*b*f,u*d*f+p*b*S,i);break;case"ZXY":this.set(p*d*f-u*b*S,u*b*f+p*d*S,u*d*S+p*b*f,u*d*f-p*b*S,i);break;case"ZYX":this.set(p*d*f-u*b*S,u*b*f+p*d*S,u*d*S-p*b*f,u*d*f+p*b*S,i);break;case"YZX":this.set(p*d*f+u*b*S,u*b*f+p*d*S,u*d*S-p*b*f,u*d*f-p*b*S,i);break;case"XZY":this.set(p*d*f-u*b*S,u*b*f-p*d*S,u*d*S+p*b*f,u*d*f+p*b*S,i)}return this},setFromRotationMatrix:function(t){var i,n=t.val,o=n[0],a=n[4],u=n[8],d=n[1],f=n[5],p=n[9],b=n[2],S=n[6],M=n[10],C=o+f+M;return C>0?(i=.5/Math.sqrt(C+1),this.set((S-p)*i,(u-b)*i,(d-a)*i,.25/i)):o>f&&o>M?(i=2*Math.sqrt(1+o-f-M),this.set(.25*i,(a+d)/i,(u+b)/i,(S-p)/i)):f>M?(i=2*Math.sqrt(1+f-o-M),this.set((a+d)/i,.25*i,(p+S)/i,(u-b)/i)):(i=2*Math.sqrt(1+M-o-f),this.set((u+b)/i,(p+S)/i,.25*i,(d-a)/i)),this},fromMat3:function(t){var i,n=t.val,o=n[0]+n[4]+n[8];if(o>0)i=Math.sqrt(o+1),this.w=.5*i,i=.5/i,this._x=(n[7]-n[5])*i,this._y=(n[2]-n[6])*i,this._z=(n[3]-n[1])*i;else{var a=0;n[4]>n[0]&&(a=1),n[8]>n[3*a+a]&&(a=2);var u=p[a],d=p[u];i=Math.sqrt(n[3*a+a]-n[3*u+u]-n[3*d+d]+1),b[a]=.5*i,i=.5/i,b[u]=(n[3*u+a]+n[3*a+u])*i,b[d]=(n[3*d+a]+n[3*a+d])*i,this._x=b[0],this._y=b[1],this._z=b[2],this._w=(n[3*d+u]-n[3*u+d])*i}return this.onChangeCallback(this),this}});t.exports=R},function(t,i,n){var o=n(367),a=n(31),u=n(33),d=n(191);t.exports=function(t){var i=t.config;if((i.customEnvironment||i.canvas)&&i.renderType===u.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!i.customEnvironment&&!i.canvas&&i.renderType!==u.HEADLESS)if(i.renderType===u.CANVAS||i.renderType!==u.CANVAS&&!d.webGL){if(!d.canvas)throw new Error("Cannot create Canvas or WebGL context, aborting.");i.renderType=u.CANVAS}else i.renderType=u.WEBGL;i.antialias||a.disableSmoothing();var f,p,b=t.scale.baseSize,S=b.width,M=b.height;i.canvas?(t.canvas=i.canvas,t.canvas.width=S,t.canvas.height=M):t.canvas=a.create(t,S,M,i.renderType),i.canvasStyle&&(t.canvas.style=i.canvasStyle),i.antialias||o.setCrisp(t.canvas),i.renderType!==u.HEADLESS&&(f=n(368),p=n(371),i.renderType===u.WEBGL?t.renderer=new p(t):(t.renderer=new f(t),t.context=t.renderer.gameContext))}},function(t,i){t.exports={setCrisp:function(t){return["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"].forEach((function(i){t.style["image-rendering"]=i})),t.style.msInterpolationMode="nearest-neighbor",t},setBicubic:function(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}}},function(t,i,n){var o=n(37),a=n(369),u=n(0),d=n(33),f=n(9),p=n(91),b=n(370),S=n(104),M=n(106),C=n(25),P=new u({Extends:f,initialize:function CanvasRenderer2(t){f.call(this);var i=t.config;this.config={clearBeforeRender:i.clearBeforeRender,backgroundColor:i.backgroundColor,antialias:i.antialias,roundPixels:i.roundPixels},this.game=t,this.type=d.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=t.canvas;var n={alpha:t.config.transparent,desynchronized:t.config.desynchronized};this.gameContext=i.context?i.context:this.gameCanvas.getContext("2d",n),this.currentContext=this.gameContext,this.antialias=t.config.antialias,this.blendModes=b(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new C,this._tempMatrix2=new C,this._tempMatrix3=new C,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(M.READY,this.boot,this)},boot:function(){var t=this.game,i=t.scale.baseSize;this.width=i.width,this.height=i.height,this.isBooted=!0,t.scale.on(S.RESIZE,this.onResize,this),this.resize(i.width,i.height)},onResize:function(t,i){i.width===this.width&&i.height===this.height||this.resize(i.width,i.height)},resize:function(t,i){this.width=t,this.height=i,this.emit(p.RESIZE,t,i)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(t){return this.currentContext.globalCompositeOperation=t,this},setContext:function(t){return this.currentContext=t||this.gameContext,this},setAlpha:function(t){return this.currentContext.globalAlpha=t,this},preRender:function(){var t=this.gameContext,i=this.config,n=this.width,o=this.height;t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),i.clearBeforeRender&&(t.clearRect(0,0,n,o),i.transparent||(t.fillStyle=i.backgroundColor.rgba,t.fillRect(0,0,n,o))),t.save(),this.drawCount=0,this.emit(p.PRE_RENDER)},render:function(t,i,n){var a=i.length;this.emit(p.RENDER,t,n);var u=n.x,d=n.y,f=n.width,b=n.height,S=n.renderToTexture?n.context:t.sys.context;S.save(),this.game.scene.customViewports&&(S.beginPath(),S.rect(u,d,f,b),S.clip()),this.currentContext=S;var M=n.mask;M&&M.preRenderCanvas(this,null,n._maskCamera),n.transparent||(S.fillStyle=n.backgroundColor.rgba,S.fillRect(u,d,f,b)),S.globalAlpha=n.alpha,S.globalCompositeOperation="source-over",this.drawCount+=a,n.renderToTexture&&n.emit(o.PRE_RENDER,n),n.matrix.copyToContext(S);for(var C=0;C<a;C++){var P=i[C];P.mask&&P.mask.preRenderCanvas(this,P,n),P.renderCanvas(this,P,n),P.mask&&P.mask.postRenderCanvas(this,P,n)}S.setTransform(1,0,0,1,0,0),S.globalCompositeOperation="source-over",S.globalAlpha=1,n.flashEffect.postRenderCanvas(S),n.fadeEffect.postRenderCanvas(S),n.dirty=!1,M&&M.postRenderCanvas(this),S.restore(),n.renderToTexture&&(n.emit(o.POST_RENDER,n),n.renderToGame&&t.sys.context.drawImage(n.canvas,u,d))},postRender:function(){this.gameContext.restore(),this.emit(p.POST_RENDER);var t=this.snapshotState;t.callback&&(a(this.gameCanvas,t),t.callback=null)},snapshotCanvas:function(t,i,n,o,u,d,f,p,b){void 0===n&&(n=!1),this.snapshotArea(o,u,d,f,i,p,b);var S=this.snapshotState;return S.getPixel=n,a(this.canvas,S),S.callback=null,this},snapshot:function(t,i,n){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,t,i,n)},snapshotArea:function(t,i,n,o,a,u,d){var f=this.snapshotState;return f.callback=a,f.type=u,f.encoder=d,f.getPixel=!1,f.x=t,f.y=i,f.width=Math.min(n,this.gameCanvas.width),f.height=Math.min(o,this.gameCanvas.height),this},snapshotPixel:function(t,i,n){return this.snapshotArea(t,i,1,1,n),this.snapshotState.getPixel=!0,this},batchSprite:function(t,i,n,o){var a=n.alpha*t.alpha;if(0!==a){var u=this.currentContext,d=this._tempMatrix1,f=this._tempMatrix2,p=i.canvasData,b=p.x,S=p.y,M=i.cutWidth,C=i.cutHeight,P=i.customPivot,R=i.source.resolution,O=t.displayOriginX,B=t.displayOriginY,N=-O+i.x,Y=-B+i.y;if(t.isCropped){var X=t._crop;X.flipX===t.flipX&&X.flipY===t.flipY||i.updateCropUVs(X,t.flipX,t.flipY),M=X.cw,C=X.ch,b=X.cx,S=X.cy,N=-O+X.x,Y=-B+X.y,t.flipX&&(N>=0?N=-(N+M):N<0&&(N=Math.abs(N)-M)),t.flipY&&(Y>=0?Y=-(Y+C):Y<0&&(Y=Math.abs(Y)-C))}var G=1,U=1;t.flipX&&(P||(N+=-i.realWidth+2*O),G=-1),t.flipY&&(P||(Y+=-i.realHeight+2*B),U=-1),f.applyITRS(t.x,t.y,t.rotation,t.scaleX*G,t.scaleY*U),d.copyFrom(n.matrix),o?(d.multiplyWithOffset(o,-n.scrollX*t.scrollFactorX,-n.scrollY*t.scrollFactorY),f.e=t.x,f.f=t.y):(f.e-=n.scrollX*t.scrollFactorX,f.f-=n.scrollY*t.scrollFactorY),d.multiply(f),u.save(),d.setToContext(u),u.globalCompositeOperation=this.blendModes[t.blendMode],u.globalAlpha=a,u.imageSmoothingEnabled=!(!this.antialias||i.source.scaleMode),t.mask&&t.mask.preRenderCanvas(this,t,n),u.drawImage(i.source.image,b,S,M,C,N,Y,M/R,C/R),t.mask&&t.mask.postRenderCanvas(this,t,n),u.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});t.exports=P},function(t,i,n){var o=n(31),a=n(38),u=n(2);t.exports=function(t,i){var n=u(i,"callback"),d=u(i,"type","image/png"),f=u(i,"encoder",.92),p=Math.abs(Math.round(u(i,"x",0))),b=Math.abs(Math.round(u(i,"y",0))),S=u(i,"width",t.width),M=u(i,"height",t.height);if(u(i,"getPixel",!1)){var C=t.getContext("2d").getImageData(p,b,1,1).data;n.call(null,new a(C[0],C[1],C[2],C[3]/255))}else if(0!==p||0!==b||S!==t.width||M!==t.height){var P=o.createWebGL(this,S,M);P.getContext("2d").drawImage(t,p,b,S,M,0,0,S,M);var R=new Image;R.onerror=function(){n.call(null),o.remove(P)},R.onload=function(){n.call(null,R),o.remove(P)},R.src=P.toDataURL(d,f)}else{var O=new Image;O.onerror=function(){n.call(null)},O.onload=function(){n.call(null,O)},O.src=t.toDataURL(d,f)}}},function(t,i,n){var o=n(35),a=n(348);t.exports=function(){var t=[],i=a.supportNewBlendModes,n="source-over";return t[o.NORMAL]=n,t[o.ADD]="lighter",t[o.MULTIPLY]=i?"multiply":n,t[o.SCREEN]=i?"screen":n,t[o.OVERLAY]=i?"overlay":n,t[o.DARKEN]=i?"darken":n,t[o.LIGHTEN]=i?"lighten":n,t[o.COLOR_DODGE]=i?"color-dodge":n,t[o.COLOR_BURN]=i?"color-burn":n,t[o.HARD_LIGHT]=i?"hard-light":n,t[o.SOFT_LIGHT]=i?"soft-light":n,t[o.DIFFERENCE]=i?"difference":n,t[o.EXCLUSION]=i?"exclusion":n,t[o.HUE]=i?"hue":n,t[o.SATURATION]=i?"saturation":n,t[o.COLOR]=i?"color":n,t[o.LUMINOSITY]=i?"luminosity":n,t[o.ERASE]="destination-out",t[o.SOURCE_IN]="source-in",t[o.SOURCE_OUT]="source-out",t[o.SOURCE_ATOP]="source-atop",t[o.DESTINATION_OVER]="destination-over",t[o.DESTINATION_IN]="destination-in",t[o.DESTINATION_OUT]="destination-out",t[o.DESTINATION_ATOP]="destination-atop",t[o.LIGHTER]="lighter",t[o.COPY]="copy",t[o.XOR]="xor",t}},function(t,i,n){var o=n(93),a=n(37),u=n(0),d=n(33),f=n(9),p=n(91),b=n(22),S=n(138),M=n(69),C=n(1),P=n(372),R=n(141),O=n(104),B=n(106),N=n(12),Y=n(383),X=new u({Extends:f,initialize:function WebGLRenderer2(t){f.call(this);var i=t.config,n={alpha:i.transparent,desynchronized:i.desynchronized,depth:!1,antialias:i.antialiasGL,premultipliedAlpha:i.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:i.failIfMajorPerformanceCaveat,powerPreference:i.powerPreference,preserveDrawingBuffer:i.preserveDrawingBuffer};this.config={clearBeforeRender:i.clearBeforeRender,antialias:i.antialias,backgroundColor:i.backgroundColor,contextCreation:n,roundPixels:i.roundPixels,maxTextures:i.maxTextures,maxTextureSize:i.maxTextureSize,batchSize:i.batchSize,maxLights:i.maxLights,mipmapFilter:i.mipmapFilter},this.game=t,this.type=d.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=t.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=C,this.contextRestoredHandler=C,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(t){var i,n=this.game,o=this.canvas,a=t.backgroundColor;if(!(i=n.config.context?n.config.context:o.getContext("webgl",t.contextCreation)||o.getContext("experimental-webgl",t.contextCreation))||i.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=i;var u=this;this.contextLostHandler=function(t){u.contextLost=!0,u.game.events.emit(b.CONTEXT_LOST,u),t.preventDefault()},this.contextRestoredHandler=function(){u.contextLost=!1,u.init(u.config),u.game.events.emit(b.CONTEXT_RESTORED,u)},o.addEventListener("webglcontextlost",this.contextLostHandler,!1),o.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),n.context=i;for(var f=0;f<=27;f++)this.blendModes.push({func:[i.ONE,i.ONE_MINUS_SRC_ALPHA],equation:i.FUNC_ADD});this.blendModes[1].func=[i.ONE,i.DST_ALPHA],this.blendModes[2].func=[i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[i.ONE,i.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[i.ZERO,i.ONE_MINUS_SRC_ALPHA],equation:i.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=i.BYTE,this.glFormats[1]=i.SHORT,this.glFormats[2]=i.UNSIGNED_BYTE,this.glFormats[3]=i.UNSIGNED_SHORT,this.glFormats[4]=i.FLOAT,this.glFuncMap={mat2:{func:i.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:i.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:i.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:i.uniform1f,length:1},"1fv":{func:i.uniform1fv,length:1},"1i":{func:i.uniform1i,length:1},"1iv":{func:i.uniform1iv,length:1},"2f":{func:i.uniform2f,length:2},"2fv":{func:i.uniform2fv,length:1},"2i":{func:i.uniform2i,length:2},"2iv":{func:i.uniform2iv,length:1},"3f":{func:i.uniform3f,length:3},"3fv":{func:i.uniform3fv,length:1},"3i":{func:i.uniform3i,length:3},"3iv":{func:i.uniform3iv,length:1},"4f":{func:i.uniform4f,length:4},"4fv":{func:i.uniform4fv,length:1},"4i":{func:i.uniform4i,length:4},"4iv":{func:i.uniform4iv,length:1}};var p=i.getSupportedExtensions();t.maxTextures&&-1!==t.maxTextures||(t.maxTextures=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS)),t.maxTextureSize||(t.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE));var S="WEBGL_compressed_texture_",C="WEBKIT_"+S;this.compression.ETC1=i.getExtension(S+"etc1")||i.getExtension(C+"etc1"),this.compression.PVRTC=i.getExtension(S+"pvrtc")||i.getExtension(C+"pvrtc"),this.compression.S3TC=i.getExtension(S+"s3tc")||i.getExtension(C+"s3tc"),this.supportedExtensions=p;var R="ANGLE_instanced_arrays";this.instancedArraysExtension=p.indexOf(R)>-1?i.getExtension(R):null;var O="OES_vertex_array_object";this.vaoExtension=p.indexOf(O)>-1?i.getExtension(O):null,i.disable(i.DEPTH_TEST),i.disable(i.CULL_FACE),i.enable(i.BLEND),i.clearColor(a.redGL,a.greenGL,a.blueGL,a.alphaGL),this.mipmapFilter=i[t.mipmapFilter],this.maxTextures=N.checkShaderMax(i,t.maxTextures),this.textureIndexes=[];var Y=this.tempTextures;if(Array.isArray(Y))for(var X=0;f<this.maxTextures;X++)i.deleteTexture(Y[X]);else Y=new Array(this.maxTextures);for(var G=0;G<this.maxTextures;G++){var U=i.createTexture();i.activeTexture(i.TEXTURE0+G),i.bindTexture(i.TEXTURE_2D,U),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),Y[G]=U,this.textureIndexes.push(G)}return this.tempTextures=Y,this.currentActiveTexture=1,this.startActiveTexture++,i.activeTexture(i.TEXTURE1),this.pipelines=new P(this),this.setBlendMode(d.BlendModes.NORMAL),this.projectionMatrix=(new M).identity(),n.textures.once(B.READY,this.boot,this),this},boot:function(){var t=this.game,i=this.pipelines,n=t.scale.baseSize;this.width=n.width,this.height=n.height,this.isBooted=!0,this.renderTarget=new R(this,this.width,this.height,1,0,!0,!0),i.boot(t.config.pipeline),this.blankTexture=t.textures.getFrame("__DEFAULT"),this.whiteTexture=t.textures.getFrame("__WHITE");var o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,null),o.enable(o.SCISSOR_TEST),t.scale.on(O.RESIZE,this.onResize,this),this.resize(n.width,n.height)},onResize:function(t,i){i.width===this.width&&i.height===this.height||this.resize(i.width,i.height)},beginCapture:function(t,i){void 0===t&&(t=this.width),void 0===i&&(i=this.height),this.renderTarget.bind(!0,t,i),this.setProjectionMatrix(t,i),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(t,i){var n=this.gl;return this.width=t,this.height=i,this.setProjectionMatrix(t,i),n.viewport(0,0,t,i),this.drawingBufferHeight=n.drawingBufferHeight,n.scissor(0,n.drawingBufferHeight-i,t,i),this.defaultScissor[2]=t,this.defaultScissor[3]=i,this.emit(p.RESIZE,t,i),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(t,i){return t===this.projectionWidth&&i===this.projectionHeight||(this.projectionWidth=t,this.projectionHeight=i,this.projectionMatrix.ortho(0,t,i,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(t){return!!this.supportedExtensions&&this.supportedExtensions.indexOf(t)},getExtension:function(t){return this.hasExtension(t)?(t in this.extensions||(this.extensions[t]=this.gl.getExtension(t)),this.extensions[t]):null},flush:function(){this.pipelines.flush()},pushScissor:function(t,i,n,o,a){void 0===a&&(a=this.drawingBufferHeight);var u=[t,i,n,o];return this.scissorStack.push(u),this.setScissor(t,i,n,o,a),this.currentScissor=u,u},setScissor:function(t,i,n,o,a){void 0===a&&(a=this.drawingBufferHeight);var u=this.gl,d=this.currentScissor,f=n>0&&o>0;if(d&&f){var p=d[0],b=d[1],S=d[2],M=d[3];f=p!==t||b!==i||S!==n||M!==o}f&&(this.flush(),u.scissor(t,a-i-o,n,o))},resetScissor:function(){var t=this.gl;t.enable(t.SCISSOR_TEST);var i=this.currentScissor;if(i){var n=i[0],o=i[1],a=i[2],u=i[3];a>0&&u>0&&t.scissor(n,this.drawingBufferHeight-o-u,a,u)}},popScissor:function(){var t=this.scissorStack;t.pop();var i=t[t.length-1];i&&this.setScissor(i[0],i[1],i[2],i[3]),this.currentScissor=i},hasActiveStencilMask:function(){var t=this.currentMask.mask,i=this.currentCameraMask.mask;return t&&t.isStencil||i&&i.isStencil},resetViewport:function(){var t=this.gl;t.viewport(0,0,this.width,this.height),this.drawingBufferHeight=t.drawingBufferHeight},setBlendMode:function(t,i){void 0===i&&(i=!1);var n=this.gl,o=this.blendModes[t];return!!(i||t!==d.BlendModes.SKIP_CHECK&&this.currentBlendMode!==t)&&(this.flush(),n.enable(n.BLEND),n.blendEquation(o.equation),o.func.length>2?n.blendFuncSeparate(o.func[0],o.func[1],o.func[2],o.func[3]):n.blendFunc(o.func[0],o.func[1]),this.currentBlendMode=t,!0)},addBlendMode:function(t,i){return this.blendModes.push({func:t,equation:i})-1},updateBlendMode:function(t,i,n){return this.blendModes[t]&&(this.blendModes[t].func=i,n&&(this.blendModes[t].equation=n)),this},removeBlendMode:function(t){return t>17&&this.blendModes[t]&&this.blendModes.splice(t,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(t){if(this.pipelines.forceZero())return this.setTextureZero(t.glTexture,!0),0;var i=this.gl,n=this.currentActiveTexture;return t.glIndexCounter<this.startActiveTexture&&(t.glIndexCounter=this.startActiveTexture,n<this.maxTextures?(t.glIndex=n,i.activeTexture(i.TEXTURE0+n),i.bindTexture(i.TEXTURE_2D,t.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,t.glIndexCounter=this.startActiveTexture,t.glIndex=1,i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,t.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,t.glIndex},isNewNormalMap:function(t,i){return this.textureZero!==t||this.normalTexture!==i},setTextureZero:function(t,i){if(this.textureZero!==t){i&&this.flush();var n=this.gl;n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,t),this.textureZero=t}},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(t){if(this.normalTexture!==t){var i=this.gl;i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,t),this.normalTexture=t,1===this.currentActiveTexture&&(this.currentActiveTexture=2)}},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var t=this.gl,i=this.tempTextures,n=0;n<i.length;n++)t.activeTexture(t.TEXTURE0+n),t.bindTexture(t.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(t){if(void 0===t&&(t=!1),!this.isTextureClean){this.flush();var i=this.gl,n=this.tempTextures;if(t){for(var o=0;o<n.length;o++)i.activeTexture(i.TEXTURE0+o),i.bindTexture(i.TEXTURE_2D,n[o]);i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,n[1]),this.isTextureClean=!0}else i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,n[0]),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,n[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function(t){if(this.pipelines.forceZero())return this.setTextureZero(t,!0),0;var i=this.gl,n=this.currentActiveTexture;return t.glIndexCounter<this.startActiveTexture&&(t.glIndexCounter=this.startActiveTexture,n<this.maxTextures?(t.glIndex=n,i.activeTexture(i.TEXTURE0+n),i.bindTexture(i.TEXTURE_2D,t),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,t.glIndexCounter=this.startActiveTexture,t.glIndex=1,i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,t),this.currentActiveTexture=2)),this.isTextureClean=!1,t.glIndex},pushFramebuffer:function(t,i,n,o){return t===this.currentFramebuffer?this:(this.fboStack.push(t),this.setFramebuffer(t,i,n,o))},setFramebuffer:function(t,i,n,o){if(void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===o&&(o=!0),t===this.currentFramebuffer)return this;var a=this.gl,u=this.width,d=this.height;return t&&t.renderTexture&&o?(u=t.renderTexture.width,d=t.renderTexture.height):this.flush(),a.bindFramebuffer(a.FRAMEBUFFER,t),o&&a.viewport(0,0,u,d),i&&(t?(this.drawingBufferHeight=d,this.pushScissor(0,0,u,d)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=t,n&&this.resetTextures(),this},popFramebuffer:function(t,i,n){void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===n&&(n=!0);var o=this.fboStack;o.pop();var a=o[o.length-1];return a||(a=null),this.setFramebuffer(a,t,i,n),a},setProgram:function(t){return t!==this.currentProgram&&(this.flush(),this.gl.useProgram(t),this.currentProgram=t,!0)},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(t,i,n,o){var a=this.gl,u=a.NEAREST,f=a.NEAREST,p=a.CLAMP_TO_EDGE;i=t?t.width:i,n=t?t.height:n;var b=S(i,n);return b&&(p=a.REPEAT),o===d.ScaleModes.LINEAR&&this.config.antialias&&(u=b?this.mipmapFilter:a.LINEAR,f=a.LINEAR),t||"number"!=typeof i||"number"!=typeof n?this.createTexture2D(0,u,f,p,p,a.RGBA,t):this.createTexture2D(0,u,f,p,p,a.RGBA,null,i,n)},createTexture2D:function(t,i,n,o,a,u,d,f,p,b,M,C){b=null==b||b,void 0===M&&(M=!1),void 0===C&&(C=!1);var P=this.gl,R=P.createTexture();P.activeTexture(P.TEXTURE0);var O=P.getParameter(P.TEXTURE_BINDING_2D);return P.bindTexture(P.TEXTURE_2D,R),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MIN_FILTER,i),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_MAG_FILTER,n),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_S,a),P.texParameteri(P.TEXTURE_2D,P.TEXTURE_WRAP_T,o),P.pixelStorei(P.UNPACK_PREMULTIPLY_ALPHA_WEBGL,b),P.pixelStorei(P.UNPACK_FLIP_Y_WEBGL,C),null==d?P.texImage2D(P.TEXTURE_2D,t,u,f,p,0,u,P.UNSIGNED_BYTE,null):(M||(f=d.width,p=d.height),P.texImage2D(P.TEXTURE_2D,t,u,u,P.UNSIGNED_BYTE,d)),S(f,p)&&P.generateMipmap(P.TEXTURE_2D),O&&P.bindTexture(P.TEXTURE_2D,O),R.isAlphaPremultiplied=b,R.isRenderTexture=!1,R.width=f,R.height=p,R.glIndex=0,R.glIndexCounter=-1,R},createFramebuffer:function(t,i,n,o){var a,u=this.gl,d=u.createFramebuffer();if(this.setFramebuffer(d),o){var f=u.createRenderbuffer();u.bindRenderbuffer(u.RENDERBUFFER,f),u.renderbufferStorage(u.RENDERBUFFER,u.DEPTH_STENCIL,t,i),u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,f)}if(n.isRenderTexture=!0,n.isAlphaPremultiplied=!1,u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,n,0),(a=u.checkFramebufferStatus(u.FRAMEBUFFER))!==u.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+{36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"}[a]);return d.renderTexture=n,this.setFramebuffer(null),this.resetTextures(),d},createProgram:function(t,i){var n=this.gl,o=n.createProgram(),a=n.createShader(n.VERTEX_SHADER),u=n.createShader(n.FRAGMENT_SHADER);if(n.shaderSource(a,t),n.shaderSource(u,i),n.compileShader(a),n.compileShader(u),!n.getShaderParameter(a,n.COMPILE_STATUS))throw new Error("Vertex Shader failed:\n"+n.getShaderInfoLog(a));if(!n.getShaderParameter(u,n.COMPILE_STATUS))throw new Error("Fragment Shader failed:\n"+n.getShaderInfoLog(u));if(n.attachShader(o,a),n.attachShader(o,u),n.linkProgram(o),!n.getProgramParameter(o,n.LINK_STATUS))throw new Error("Link Program failed:\n"+n.getProgramInfoLog(o));return n.useProgram(o),o},createVertexBuffer:function(t,i){var n=this.gl,o=n.createBuffer();return n.bindBuffer(n.ARRAY_BUFFER,o),n.bufferData(n.ARRAY_BUFFER,t,i),n.bindBuffer(n.ARRAY_BUFFER,null),o},createIndexBuffer:function(t,i){var n=this.gl,o=n.createBuffer();return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,o),n.bufferData(n.ELEMENT_ARRAY_BUFFER,t,i),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null),o},deleteTexture:function(t,i){return i&&this.resetTextures(!0),t&&this.gl.deleteTexture(t),this},deleteFramebuffer:function(t){return t&&(this.gl.deleteFramebuffer(t),o(this.fboStack,t),this.currentFramebuffer===t&&(this.currentFramebuffer=null)),this},deleteProgram:function(t){return t&&this.gl.deleteProgram(t),this},deleteBuffer:function(t){return this.gl.deleteBuffer(t),this},preRenderCamera:function(t){var i=t.x,n=t.y,o=t.width,u=t.height,d=t.backgroundColor;t.emit(a.PRE_RENDER,t),this.pipelines.preBatchCamera(t),this.pushScissor(i,n,o,u),t.mask&&(this.currentCameraMask.mask=t.mask,this.currentCameraMask.camera=t._maskCamera,t.mask.preRenderWebGL(this,t,t._maskCamera)),d.alphaGL>0&&this.pipelines.setMulti().drawFillRect(i,n,o,u,N.getTintFromFloats(d.blueGL,d.greenGL,d.redGL,1),d.alphaGL)},getCurrentStencilMask:function(){var t=null,i=this.maskStack,n=this.currentCameraMask;return i.length>0?t=i[i.length-1]:n.mask&&n.mask.isStencil&&(t=n),t},postRenderCamera:function(t){var i=t.flashEffect,n=t.fadeEffect;if(i.isRunning||n.isRunning||n.isComplete){var o=this.pipelines.setMulti();i.postRenderWebGL(o,N.getTintFromFloats),n.postRenderWebGL(o,N.getTintFromFloats)}t.dirty=!1,this.popScissor(),t.mask&&(this.currentCameraMask.mask=null,t.mask.postRenderWebGL(this,t._maskCamera)),this.pipelines.postBatchCamera(t),t.emit(a.POST_RENDER,t)},preRender:function(){if(!this.contextLost){var t=this.gl;if(t.bindFramebuffer(t.FRAMEBUFFER,null),this.config.clearBeforeRender){var i=this.config.backgroundColor;t.clearColor(i.redGL,i.greenGL,i.blueGL,i.alphaGL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT)}t.enable(t.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&t.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(p.PRE_RENDER)}},render:function(t,i,n){if(!this.contextLost){var o=i.length;if(this.emit(p.RENDER,t,n),this.preRenderCamera(n),0===o)return this.setBlendMode(d.BlendModes.NORMAL),void this.postRenderCamera(n);this.currentType="";for(var a=this.currentMask,u=0;u<o;u++){this.finalType=u===o-1;var f=i[u],b=f.mask;(a=this.currentMask).mask&&a.mask!==b&&a.mask.postRenderWebGL(this,a.camera),b&&a.mask!==b&&b.preRenderWebGL(this,f,n),f.blendMode!==this.currentBlendMode&&this.setBlendMode(f.blendMode);var S=f.type;S!==this.currentType&&(this.newType=!0,this.currentType=S),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=i[u+1].type===this.currentType,f.renderWebGL(this,f,n),this.newType=!1}(a=this.currentMask).mask&&a.mask.postRenderWebGL(this,a.camera),this.setBlendMode(d.BlendModes.NORMAL),this.postRenderCamera(n)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(p.POST_RENDER);var t=this.snapshotState;t.callback&&(Y(this.canvas,t),t.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function(t,i,n){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,t,i,n)},snapshotArea:function(t,i,n,o,a,u,d){var f=this.snapshotState;return f.callback=a,f.type=u,f.encoder=d,f.getPixel=!1,f.x=t,f.y=i,f.width=Math.min(n,this.gl.drawingBufferWidth),f.height=Math.min(o,this.gl.drawingBufferHeight),this},snapshotPixel:function(t,i,n){return this.snapshotArea(t,i,1,1,n),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(t,i,n,o,a,u,d,f,p,b,S){void 0===a&&(a=!1),void 0===u&&(u=0),void 0===d&&(d=0),void 0===f&&(f=i),void 0===p&&(p=n);var M=this.currentFramebuffer;this.snapshotArea(u,d,f,p,o,b,S);var C=this.snapshotState;return C.getPixel=a,C.isFramebuffer=!0,C.bufferWidth=i,C.bufferHeight=n,this.setFramebuffer(t),Y(this.canvas,C),this.setFramebuffer(M),C.callback=null,C.isFramebuffer=!1,this},canvasToTexture:function(t,i,n,o){return void 0===n&&(n=!1),void 0===o&&(o=!1),i?this.updateCanvasTexture(t,i,o):this.createCanvasTexture(t,n,o)},createCanvasTexture:function(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1);var o=this.gl,a=o.NEAREST,u=o.NEAREST,d=t.width,f=t.height,p=o.CLAMP_TO_EDGE,b=S(d,f);return!i&&b&&(p=o.REPEAT),this.config.antialias&&(a=b?this.mipmapFilter:o.LINEAR,u=o.LINEAR),this.createTexture2D(0,a,u,p,p,o.RGBA,t,d,f,!0,!1,n)},updateCanvasTexture:function(t,i,n){void 0===n&&(n=!1);var o=this.gl,a=t.width,u=t.height;if(a>0&&u>0){o.activeTexture(o.TEXTURE0);var d=o.getParameter(o.TEXTURE_BINDING_2D);o.bindTexture(o.TEXTURE_2D,i),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,n),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,t),i.width=a,i.height=u,d&&o.bindTexture(o.TEXTURE_2D,d)}return i},createVideoTexture:function(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1);var o=this.gl,a=o.NEAREST,u=o.NEAREST,d=t.videoWidth,f=t.videoHeight,p=o.CLAMP_TO_EDGE,b=S(d,f);return!i&&b&&(p=o.REPEAT),this.config.antialias&&(a=b?this.mipmapFilter:o.LINEAR,u=o.LINEAR),this.createTexture2D(0,a,u,p,p,o.RGBA,t,d,f,!0,!0,n)},updateVideoTexture:function(t,i,n){void 0===n&&(n=!1);var o=this.gl,a=t.videoWidth,u=t.videoHeight;if(a>0&&u>0){o.activeTexture(o.TEXTURE0);var d=o.getParameter(o.TEXTURE_BINDING_2D);o.bindTexture(o.TEXTURE_2D,i),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,n),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,t),i.width=a,i.height=u,d&&o.bindTexture(o.TEXTURE_2D,d)}return i},setTextureFilter:function(t,i){var n=this.gl,o=[n.LINEAR,n.NEAREST][i];n.activeTexture(n.TEXTURE0);var a=n.getParameter(n.TEXTURE_BINDING_2D);return n.bindTexture(n.TEXTURE_2D,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,o),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,o),a&&n.bindTexture(n.TEXTURE_2D,a),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var t=this.gl,i=this.tempTextures,n=0;n<i.length;n++)t.deleteTexture(i[n]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});t.exports=X},function(t,i,n){var o=n(0),a=n(92),u=n(102),d=n(373),f=n(376),p=n(377),b=n(108),S=n(378),M=n(379),C=n(380),P=n(381),R=new o({initialize:function PipelineManager2(t){this.game=t.game,this.renderer=t,this.classes=new u([[a.UTILITY_PIPELINE,P],[a.MULTI_PIPELINE,b],[a.BITMAPMASK_PIPELINE,d],[a.SINGLE_PIPELINE,C],[a.ROPE_PIPELINE,M],[a.LIGHT_PIPELINE,p],[a.POINTLIGHT_PIPELINE,S],[a.GRAPHICS_PIPELINE,f]]),this.postPipelineClasses=new u,this.pipelines=new u,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(t){var i,n,o=this,u=this.game;if(this.classes.each((function(t,n){i=o.add(t,new n({game:u})),t===a.UTILITY_PIPELINE&&(o.UTILITY_PIPELINE=i,o.fullFrame1=i.fullFrame1,o.fullFrame2=i.fullFrame2,o.halfFrame1=i.halfFrame1,o.halfFrame2=i.halfFrame2)})),this.MULTI_PIPELINE=this.get(a.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(a.BITMAPMASK_PIPELINE),t)for(n in t){var d=t[n];(i=new d(u)).isPostFX?this.postPipelineClasses.set(n,d):this.has(n)||(this.classes.set(n,d),this.add(n,i))}},add:function(t,i){if(!i.isPostFX){var n=this.pipelines,o=this.renderer;return n.has(t)?console.warn("Pipeline exists: "+t):(i.name=t,i.manager=this,n.set(t,i)),i.hasBooted||i.boot(),0!==o.width&&0!==o.height&&i.resize(o.width,o.height),i}console.warn(t+" is a Post Pipeline. Use `addPostPipeline` instead")},addPostPipeline:function(t,i){this.postPipelineClasses.has(t)||this.postPipelineClasses.set(t,i)},flush:function(){this.current&&this.current.flush()},has:function(t){var i=this.pipelines;return"string"==typeof t?i.has(t):!!i.contains(t)},get:function(t){var i=this.pipelines;return"string"==typeof t?i.get(t):i.contains(t)?t:void 0},getPostPipeline:function(t,i){var n,o=this.postPipelineClasses;if("string"==typeof t?n=o.get(t):"function"==typeof t?o.contains(t)&&(n=t):"object"==typeof t&&(n=o.get(t.name)),n){var a=new n(this.game);return i&&(a.gameObject=i),a}},remove:function(t,i,n){void 0===i&&(i=!0),void 0===n&&(n=!0),this.pipelines.delete(t),i&&this.classes.delete(t),n&&this.postPipelineClasses.delete(t)},set:function(t,i,n){if(!t.isPostFX)return this.isCurrent(t,n)||(this.flush(),this.current&&this.current.unbind(),this.current=t,t.bind(n)),t.updateProjectionMatrix(),t.onBind(i),t},preBatch:function(t){if(t.hasPostPipeline){this.flush();for(var i=t.postPipelines,n=i.length-1;n>=0;n--){var o=i[n];o.active&&o.preBatch(t)}}},postBatch:function(t){if(t.hasPostPipeline){this.flush();for(var i=t.postPipelines,n=0;n<i.length;n++){var o=i[n];o.active&&o.postBatch(t)}}},preBatchCamera:function(t){if(t.hasPostPipeline){this.flush();for(var i=t.postPipelines,n=i.length-1;n>=0;n--){var o=i[n];o.active&&o.preBatch(t)}}},postBatchCamera:function(t){if(t.hasPostPipeline){this.flush();for(var i=t.postPipelines,n=0;n<i.length;n++){var o=i[n];o.active&&o.postBatch(t)}}},isCurrent:function(t,i){var n=this.renderer,o=this.current;return o&&!i&&(i=o.currentShader),!(o!==t||i.program!==n.currentProgram)},copyFrame:function(t,i,n,o,a){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(t,i,n,o,a),this},copyToGame:function(t){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(t),this},drawFrame:function(t,i,n,o){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(t,i,n,o),this},blendFrames:function(t,i,n,o,a){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(t,i,n,o,a),this},blendFramesAdditive:function(t,i,n,o,a){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(t,i,n,o,a),this},clearFrame:function(t,i){return this.UTILITY_PIPELINE.clearFrame(t,i),this},blitFrame:function(t,i,n,o,a,u){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(t,i,n,o,a,u),this},copyFrameRect:function(t,i,n,o,a,u,d,f){return this.UTILITY_PIPELINE.copyFrameRect(t,i,n,o,a,u,d,f),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(t){return this.UTILITY_PIPELINE.bind(t)},rebind:function(t){void 0===t&&this.previous&&(t=this.previous);var i=this.renderer,n=i.gl;n.disable(n.DEPTH_TEST),n.disable(n.CULL_FACE),i.hasActiveStencilMask()?n.clear(n.DEPTH_BUFFER_BIT):(n.disable(n.STENCIL_TEST),n.clear(n.DEPTH_BUFFER_BIT|n.STENCIL_BUFFER_BIT)),n.viewport(0,0,i.width,i.height),i.currentProgram=null,i.setBlendMode(0,!0);var o=this.pipelines.entries;for(var a in o)o[a].glReset=!0;t&&(this.current=t,t.rebind()),i.resetTextures()},clear:function(){var t=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,t.currentProgram=null,t.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});t.exports=R},function(t,i,n){var o=n(0),a=n(2),u=n(866),d=n(867),f=n(107),p=n(58),b=new o({Extends:p,initialize:function BitmapMaskPipeline2(t){t.fragShader=a(t,"fragShader",u),t.vertShader=a(t,"vertShader",d),t.batchSize=a(t,"batchSize",1),t.vertices=a(t,"vertices",[-1,1,-1,-7,7,1]),t.attributes=a(t,"attributes",[{name:"inPosition",size:2,type:f.FLOAT}]),p.call(this,t)},boot:function(){p.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(t,i){p.prototype.resize.call(this,t,i),this.set2f("uResolution",t,i)},beginMask:function(t,i,n){var o=this.gl;if(t.bitmapMask&&o){var a=this.renderer;a.flush(),a.pushFramebuffer(t.mainFramebuffer),o.disable(o.STENCIL_TEST),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),a.currentCameraMask.mask!==t&&(a.currentMask.mask=t,a.currentMask.camera=n)}},endMask:function(t,i){var n=this.gl,o=this.renderer,a=t.bitmapMask;if(a&&n){o.flush(),o.pushFramebuffer(t.maskFramebuffer),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),o.setBlendMode(0,!0),a.renderWebGL(o,a,i),o.flush(),o.popFramebuffer(),o.popFramebuffer();var u=o.getCurrentStencilMask();u?(n.enable(n.STENCIL_TEST),u.mask.applyStencil(o,u.camera,!0)):o.currentMask.mask=null,o.pipelines.set(this),n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,t.maskTexture),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,t.mainTexture),this.set1i("uInvertMaskAlpha",t.invertAlpha),n.drawArrays(this.topology,0,3),o.resetTextures()}}});t.exports=b},function(t,i,n){t.exports={AFTER_FLUSH:n(868),BEFORE_FLUSH:n(869),BIND:n(870),BOOT:n(871),DESTROY:n(872),REBIND:n(873),RESIZE:n(874)}},function(t,i,n){var o=n(0),a=n(2),u=n(107),d=new o({initialize:function WebGLShader2(t,i,n,o,a){this.pipeline=t,this.name=i,this.renderer=t.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(n,o),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(a),this.createUniforms()},createAttributes:function(t){var i=0,n=0,o=[];this.vertexComponentCount=0;for(var d=0;d<t.length;d++){var f=t[d],p=f.name,b=a(f,"size",1),S=a(f,"type",u.FLOAT),M=S.enum,C=S.size,P=!!f.normalized;o.push({name:p,size:b,type:M,normalized:P,offset:n,enabled:!1,location:-1}),4===C?i+=b:i++,n+=b*C}this.vertexSize=n,this.vertexComponentCount=i,this.attributes=o},bind:function(t,i){return void 0===t&&(t=!1),void 0===i&&(i=!1),i&&this.pipeline.flush(),this.renderer.setProgram(this.program),t&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(t){void 0===t&&(t=!1);for(var i=this.gl,n=this.vertexSize,o=this.attributes,a=this.program,u=0;u<o.length;u++){var d=o[u],f=d.size,p=d.type,b=d.offset,S=d.enabled,M=d.location,C=!!d.normalized;if(t){var P=i.getAttribLocation(a,d.name);P>=0?(i.enableVertexAttribArray(P),i.vertexAttribPointer(P,f,p,C,n,b),d.enabled=!0,d.location=P):-1!==P&&i.disableVertexAttribArray(P)}else S?i.vertexAttribPointer(M,f,p,C,n,b):!S&&M>-1&&(i.disableVertexAttribArray(M),d.location=-1)}return this},createUniforms:function(){var t,i,n,o=this.gl,a=this.program,u=this.uniforms,d=o.getProgramParameter(a,o.ACTIVE_UNIFORMS);for(t=0;t<d;t++){var f=o.getActiveUniform(a,t);if(f){i=f.name,null!==(n=o.getUniformLocation(a,i))&&(u[i]={name:i,location:n,value1:null,value2:null,value3:null,value4:null});var p=i.indexOf("[");p>0&&(i=i.substr(0,p),u.hasOwnProperty(i)||null!==(n=o.getUniformLocation(a,i))&&(u[i]={name:i,location:n,value1:null,value2:null,value3:null,value4:null}))}}return this},hasUniform:function(t){return this.uniforms.hasOwnProperty(t)},resetUniform:function(t){var i=this.uniforms[t];return i&&(i.value1=null,i.value2=null,i.value3=null,i.value4=null),this},setUniform1:function(t,i,n,o){var a=this.uniforms[i];return a?((o||a.value1!==n)&&(a.value1=n,this.renderer.setProgram(this.program),t.call(this.gl,a.location,n),this.pipeline.currentShader=this),this):this},setUniform2:function(t,i,n,o,a){var u=this.uniforms[i];return u?((a||u.value1!==n||u.value2!==o)&&(u.value1=n,u.value2=o,this.renderer.setProgram(this.program),t.call(this.gl,u.location,n,o),this.pipeline.currentShader=this),this):this},setUniform3:function(t,i,n,o,a,u){var d=this.uniforms[i];return d?((u||d.value1!==n||d.value2!==o||d.value3!==a)&&(d.value1=n,d.value2=o,d.value3=a,this.renderer.setProgram(this.program),t.call(this.gl,d.location,n,o,a),this.pipeline.currentShader=this),this):this},setUniform4:function(t,i,n,o,a,u,d){var f=this.uniforms[i];return f?((d||f.value1!==n||f.value2!==o||f.value3!==a||f.value4!==u)&&(f.value1=n,f.value2=o,f.value3=a,f.value4=u,this.renderer.setProgram(this.program),t.call(this.gl,f.location,n,o,a,u),this.pipeline.currentShader=this),this):this},set1f:function(t,i){return this.setUniform1(this.gl.uniform1f,t,i)},set2f:function(t,i,n){return this.setUniform2(this.gl.uniform2f,t,i,n)},set3f:function(t,i,n,o){return this.setUniform3(this.gl.uniform3f,t,i,n,o)},set4f:function(t,i,n,o,a){return this.setUniform4(this.gl.uniform4f,t,i,n,o,a)},set1fv:function(t,i){return this.setUniform1(this.gl.uniform1fv,t,i,!0)},set2fv:function(t,i){return this.setUniform1(this.gl.uniform2fv,t,i,!0)},set3fv:function(t,i){return this.setUniform1(this.gl.uniform3fv,t,i,!0)},set4fv:function(t,i){return this.setUniform1(this.gl.uniform4fv,t,i,!0)},set1iv:function(t,i){return this.setUniform1(this.gl.uniform1iv,t,i,!0)},set2iv:function(t,i){return this.setUniform1(this.gl.uniform2iv,t,i,!0)},set3iv:function(t,i){return this.setUniform1(this.gl.uniform3iv,t,i,!0)},set4iv:function(t,i){return this.setUniform1(this.gl.uniform4iv,t,i,!0)},set1i:function(t,i){return this.setUniform1(this.gl.uniform1i,t,i)},set2i:function(t,i,n){return this.setUniform2(this.gl.uniform2i,t,i,n)},set3i:function(t,i,n,o){return this.setUniform3(this.gl.uniform3i,t,i,n,o)},set4i:function(t,i,n,o,a){return this.setUniform4(this.gl.uniform4i,t,i,n,o,a)},setMatrix2fv:function(t,i,n){return this.setUniform2(this.gl.uniformMatrix2fv,t,i,n,!0)},setMatrix3fv:function(t,i,n){return this.setUniform2(this.gl.uniformMatrix3fv,t,i,n,!0)},setMatrix4fv:function(t,i,n){return this.setUniform2(this.gl.uniformMatrix4fv,t,i,n,!0)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});t.exports=d},function(t,i,n){var o=n(0),a=n(59),u=n(2),d=n(875),f=n(876),p=n(25),b=n(107),S=n(58),M=new o({Extends:S,initialize:function GraphicsPipeline2(t){t.fragShader=u(t,"fragShader",d),t.vertShader=u(t,"vertShader",f),t.attributes=u(t,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:b.UNSIGNED_BYTE,normalized:!0}]),S.call(this,t),this.calcMatrix=new p,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(t,i,n,o,a,u){this.renderer.pipelines.set(this);var d=this.calcMatrix;u&&u.multiply(a,d);var f=t+n,p=i+o,b=d.getX(t,i),S=d.getY(t,i),M=d.getX(t,p),C=d.getY(t,p),P=d.getX(f,p),R=d.getY(f,p),O=d.getX(f,i),B=d.getY(f,i),N=this.fillTint;this.batchQuad(b,S,M,C,P,R,O,B,N.TL,N.TR,N.BL,N.BR)},batchFillTriangle:function(t,i,n,o,a,u,d,f){this.renderer.pipelines.set(this);var p=this.calcMatrix;f&&f.multiply(d,p);var b=p.getX(t,i),S=p.getY(t,i),M=p.getX(n,o),C=p.getY(n,o),P=p.getX(a,u),R=p.getY(a,u),O=this.fillTint;this.batchTri(b,S,M,C,P,R,O.TL,O.TR,O.BL)},batchStrokeTriangle:function(t,i,n,o,a,u,d,f,p){var b=this.tempTriangle;b[0].x=t,b[0].y=i,b[0].width=d,b[1].x=n,b[1].y=o,b[1].width=d,b[2].x=a,b[2].y=u,b[2].width=d,b[3].x=t,b[3].y=i,b[3].width=d,this.batchStrokePath(b,d,!1,f,p)},batchFillPath:function(t,i,n){this.renderer.pipelines.set(this);var o=this.calcMatrix;n&&n.multiply(i,o);for(var u,d,f=t.length,p=this.polygonCache,b=this.fillTint.TL,S=this.fillTint.TR,M=this.fillTint.BL,C=0;C<f;++C)d=t[C],p.push(d.x,d.y);f=(u=a(p)).length;for(var P=0;P<f;P+=3){var R=2*u[P+0],O=2*u[P+1],B=2*u[P+2],N=p[R+0],Y=p[R+1],X=p[O+0],G=p[O+1],U=p[B+0],V=p[B+1],z=o.getX(N,Y),W=o.getY(N,Y),H=o.getX(X,G),j=o.getY(X,G),q=o.getX(U,V),Z=o.getY(U,V);this.batchTri(z,W,H,j,q,Z,b,S,M)}p.length=0},batchStrokePath:function(t,i,n,o,a){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var u=t.length-1,d=0;d<u;d++){var f=t[d],p=t[d+1];this.batchLine(f.x,f.y,p.x,p.y,f.width/2,p.width/2,i,d,!n&&d===u-1,o,a)}},batchLine:function(t,i,n,o,a,u,d,f,p,b,S){this.renderer.pipelines.set(this);var M=this.calcMatrix;S&&S.multiply(b,M);var C=n-t,P=o-i,R=Math.sqrt(C*C+P*P),O=a*(o-i)/R,B=a*(t-n)/R,N=u*(o-i)/R,Y=u*(t-n)/R,X=n-N,G=o-Y,U=t-O,V=i-B,z=n+N,W=o+Y,H=t+O,j=i+B,q=M.getX(X,G),Z=M.getY(X,G),K=M.getX(U,V),$=M.getY(U,V),tt=M.getX(z,W),et=M.getY(z,W),it=M.getX(H,j),nt=M.getY(H,j),st=this.strokeTint,rt=st.TL,ot=st.TR,at=st.BL,ht=st.BR;if(this.batchQuad(it,nt,K,$,q,Z,tt,et,rt,ot,at,ht),!(d<=2)){var lt=this.prevQuad,ut=this.firstQuad;f>0&&lt[4]?this.batchQuad(it,nt,K,$,lt[0],lt[1],lt[2],lt[3],rt,ot,at,ht):(ut[0]=it,ut[1]=nt,ut[2]=K,ut[3]=$,ut[4]=1),p&&ut[4]?this.batchQuad(q,Z,tt,et,ut[0],ut[1],ut[2],ut[3],rt,ot,at,ht):(lt[0]=q,lt[1]=Z,lt[2]=tt,lt[3]=et,lt[4]=1)}},batchVert:function(t,i,n){var o=this.vertexViewF32,a=this.vertexViewU32,u=this.vertexCount*this.currentShader.vertexComponentCount-1;o[++u]=t,o[++u]=i,a[++u]=n,this.vertexCount++},batchQuad:function(t,i,n,o,a,u,d,f,p,b,S,M){var C=!1;return this.shouldFlush(6)&&(this.flush(),C=!0),this.batchVert(t,i,p),this.batchVert(n,o,S),this.batchVert(a,u,M),this.batchVert(t,i,p),this.batchVert(a,u,M),this.batchVert(d,f,b),C},batchTri:function(t,i,n,o,a,u,d,f,p){var b=!1;return this.shouldFlush(3)&&(this.flush(),b=!0),this.batchVert(t,i,d),this.batchVert(n,o,f),this.batchVert(a,u,p),b},destroy:function(){return S.prototype.destroy.call(this),this.polygonCache=null,this}});t.exports=M},function(t,i,n){var o=n(0),a=n(2),u=n(877),d=n(108),f=n(3),p=n(58),b=10,S=new f,M=new o({Extends:d,initialize:function LightPipeline2(t){b=t.game.renderer.config.maxLights;for(var i=a(t,"fragShader",u),n=[],o=1;o<=b;o++)n.push({name:"lights"+o,fragShader:i.replace("%LIGHT_COUNT%",o.toString())});t.shaders=n,d.call(this,t),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function(){p.prototype.boot.call(this);var t=this.gl,i=t.createTexture();t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:i};for(var n=0;n<this.shaders.length;n++)this["lightShader"+(n+1)]=this.shaders[n]},onRender:function(t,i){var n=t.sys.lights;if(this.lightsActive=!1,n&&n.active){var o=n.getLights(i),a=o.length;if(0!==a){var u;this.lightsActive=!0,this.setShader(this["lightShader"+a],!0);var d=this.renderer.height,f=i.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",i.x,i.y,i.rotation,i.zoom),this.set3f("uAmbientLightColor",n.ambientColor.r,n.ambientColor.g,n.ambientColor.b),u=0;u<a;u++){var p=o[u].light,b=p.color,M="uLights["+u+"].";f.transformPoint(p.x,p.y,S),this.set2f(M+"position",S.x-i.scrollX*p.scrollFactorX*i.zoom,d-(S.y-i.scrollY*p.scrollFactorY*i.zoom)),this.set3f(M+"color",b.r,b.g,b.b),this.set1f(M+"intensity",p.intensity),this.set1f(M+"radius",p.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(t){if(t!==this.currentNormalMapRotation||0===this.vertexCount){this.vertexCount>0&&this.flush();var i=this.inverseRotationMatrix;if(t){var n=-t,o=Math.cos(n),a=Math.sin(n);i[1]=a,i[3]=-a,i[0]=i[4]=o}else i[0]=i[4]=1,i[1]=i[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,i),this.currentNormalMapRotation=t}},setTexture2D:function(t,i){var n=this.renderer;void 0===t&&(t=n.tempTextures[0]);var o=this.getNormalMap(i);n.isNewNormalMap(t,o)&&(this.flush(),n.setTextureZero(t),n.setNormalMap(o));var a=i?i.rotation:0;return this.setNormalMapRotation(a),this.currentUnit=0,0},setGameObject:function(t,i){void 0===i&&(i=t.frame);var n=this.renderer,o=i.glTexture,a=this.getNormalMap(t);return n.isNewNormalMap()&&(this.flush(),n.setTextureZero(o),n.setNormalMap(a)),this.setNormalMapRotation(t.rotation),this.currentUnit=0,0},getNormalMap:function(t){var i;return t?t.displayTexture?i=t.displayTexture.dataSource[t.displayFrame.sourceIndex]:t.texture?i=t.texture.dataSource[t.frame.sourceIndex]:t.tileset&&(i=Array.isArray(t.tileset)?t.tileset[0].image.dataSource[0]:t.tileset.image.dataSource[0]):i=this.defaultNormalMap,i||(i=this.defaultNormalMap),i.glTexture},batchSprite:function(t,i,n){this.lightsActive&&d.prototype.batchSprite.call(this,t,i,n)},batchTexture:function(t,i,n,o,a,u,f,p,b,S,M,C,P,R,O,B,N,Y,X,G,U,V,z,W,H,j,q,Z,K,$,tt,et){this.lightsActive&&d.prototype.batchTexture.call(this,t,i,n,o,a,u,f,p,b,S,M,C,P,R,O,B,N,Y,X,G,U,V,z,W,H,j,q,Z,K,$,tt,et)},batchTextureFrame:function(t,i,n,o,a,u,f){this.lightsActive&&d.prototype.batchTextureFrame.call(this,t,i,n,o,a,u,f)}});M.LIGHT_COUNT=b,t.exports=M},function(t,i,n){var o=n(0),a=n(2),u=n(880),d=n(881),f=n(58),p=new o({Extends:f,initialize:function PointLightPipeline2(t){t.vertShader=a(t,"vertShader",d),t.fragShader=a(t,"fragShader",u),t.attributes=a(t,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),f.call(this,t)},onRender:function(t,i){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",i.zoom)},batchPointLight:function(t,i,n,o,a,u,d,f,p,b,S,M){var C=t.color,P=t.intensity,R=t.radius,O=t.attenuation,B=C.r*P,N=C.g*P,Y=C.b*P,X=i.alpha*t.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(n,o,S,M,R,O,B,N,Y,X),this.batchLightVert(a,u,S,M,R,O,B,N,Y,X),this.batchLightVert(d,f,S,M,R,O,B,N,Y,X),this.batchLightVert(n,o,S,M,R,O,B,N,Y,X),this.batchLightVert(d,f,S,M,R,O,B,N,Y,X),this.batchLightVert(p,b,S,M,R,O,B,N,Y,X)},batchLightVert:function(t,i,n,o,a,u,d,f,p,b){var S=this.vertexViewF32,M=this.vertexCount*this.currentShader.vertexComponentCount-1;S[++M]=t,S[++M]=i,S[++M]=n,S[++M]=o,S[++M]=a,S[++M]=u,S[++M]=d,S[++M]=f,S[++M]=p,S[++M]=b,this.vertexCount++}});t.exports=p},function(t,i,n){var o=n(0),a=n(2),u=n(108),d=new o({Extends:u,initialize:function RopePipeline2(t){t.topology=5,t.batchSize=a(t,"batchSize",256),u.call(this,t)}});t.exports=d},function(t,i,n){var o=n(0),a=n(2),u=n(108),d=n(882),f=n(883),p=n(58),b=new o({Extends:u,initialize:function SinglePipeline2(t){t.fragShader=a(t,"fragShader",d),t.vertShader=a(t,"vertShader",f),t.forceZero=!0,u.call(this,t)},boot:function(){p.prototype.boot.call(this),this.set1i("uMainSampler",0)}});t.exports=b},function(t,i,n){var o=n(884),a=n(35),u=n(0),d=n(198),f=n(885),p=n(886),b=n(2),S=n(887),M=n(382),C=n(58),P=new u({Extends:C,initialize:function UtilityPipeline2(t){t.renderTarget=b(t,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),t.vertShader=b(t,"vertShader",M),t.shaders=b(t,"shaders",[{name:"Copy",fragShader:p},{name:"AddBlend",fragShader:o},{name:"LinearBlend",fragShader:S},{name:"ColorMatrix",fragShader:f}]),t.attributes=b(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],t.batchSize=1,C.call(this,t),this.colorMatrix=new d,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){C.prototype.boot.call(this);var t=this.shaders,i=this.renderTargets;this.copyShader=t[0],this.addShader=t[1],this.linearShader=t[2],this.colorMatrixShader=t[3],this.fullFrame1=i[0],this.fullFrame2=i[1],this.halfFrame1=i[2],this.halfFrame2=i[3]},copyFrame:function(t,i,n,o,a){void 0===n&&(n=1),void 0===o&&(o=!0),void 0===a&&(a=!0);var u=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",n),u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,t.texture),i?(u.viewport(0,0,i.width,i.height),u.bindFramebuffer(u.FRAMEBUFFER,i.framebuffer),u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,i.texture,0)):u.viewport(0,0,t.width,t.height),o&&(a?u.clearColor(0,0,0,0):u.clearColor(0,0,0,1),u.clear(u.COLOR_BUFFER_BIT)),u.bufferData(u.ARRAY_BUFFER,this.vertexData,u.STATIC_DRAW),u.drawArrays(u.TRIANGLES,0,6),u.bindFramebuffer(u.FRAMEBUFFER,null),u.bindTexture(u.TEXTURE_2D,null)},blitFrame:function(t,i,n,o,u,d){void 0===n&&(n=1),void 0===o&&(o=!0),void 0===u&&(u=!0),void 0===d&&(d=!1);var f=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",n),f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,t.texture),t.height>i.height)f.viewport(0,0,t.width,t.height),this.setTargetUVs(t,i);else{var p=i.height-t.height;f.viewport(0,p,t.width,t.height)}if(f.bindFramebuffer(f.FRAMEBUFFER,i.framebuffer),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,i.texture,0),o&&(u?f.clearColor(0,0,0,0):f.clearColor(0,0,0,1),f.clear(f.COLOR_BUFFER_BIT)),d){var b=this.renderer.currentBlendMode;this.renderer.setBlendMode(a.ERASE)}f.bufferData(f.ARRAY_BUFFER,this.vertexData,f.STATIC_DRAW),f.drawArrays(f.TRIANGLES,0,6),d&&this.renderer.setBlendMode(b),f.bindFramebuffer(f.FRAMEBUFFER,null),f.bindTexture(f.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(t,i,n,o,a,u,d,f){void 0===d&&(d=!0),void 0===f&&(f=!0);var p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,t.framebuffer),p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,t.texture,0),d&&(f?p.clearColor(0,0,0,0):p.clearColor(0,0,0,1),p.clear(p.COLOR_BUFFER_BIT)),p.activeTexture(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,i.texture),p.copyTexSubImage2D(p.TEXTURE_2D,0,0,0,n,o,a,u),p.bindFramebuffer(p.FRAMEBUFFER,null),p.bindTexture(p.TEXTURE_2D,null)},copyToGame:function(t){var i=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,t.texture),i.bufferData(i.ARRAY_BUFFER,this.vertexData,i.STATIC_DRAW),i.drawArrays(i.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(t,i,n,o){void 0===n&&(n=!0),void 0===o&&(o=this.colorMatrix);var a=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",o.getData()),this.set1f("uAlpha",o.alpha),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,t.texture),i?(a.viewport(0,0,i.width,i.height),a.bindFramebuffer(a.FRAMEBUFFER,i.framebuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,i.texture,0)):a.viewport(0,0,t.width,t.height),n?a.clearColor(0,0,0,0):a.clearColor(0,0,0,1),a.clear(a.COLOR_BUFFER_BIT),a.bufferData(a.ARRAY_BUFFER,this.vertexData,a.STATIC_DRAW),a.drawArrays(a.TRIANGLES,0,6),a.bindFramebuffer(a.FRAMEBUFFER,null),a.bindTexture(a.TEXTURE_2D,null)},blendFrames:function(t,i,n,o,a,u){void 0===o&&(o=1),void 0===a&&(a=!0),void 0===u&&(u=this.linearShader);var d=this.gl;this.setShader(u),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",o),d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,t.texture),d.activeTexture(d.TEXTURE1),d.bindTexture(d.TEXTURE_2D,i.texture),n?(d.bindFramebuffer(d.FRAMEBUFFER,n.framebuffer),d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,n.texture,0),d.viewport(0,0,n.width,n.height)):d.viewport(0,0,t.width,t.height),a?d.clearColor(0,0,0,0):d.clearColor(0,0,0,1),d.clear(d.COLOR_BUFFER_BIT),d.bufferData(d.ARRAY_BUFFER,this.vertexData,d.STATIC_DRAW),d.drawArrays(d.TRIANGLES,0,6),d.bindFramebuffer(d.FRAMEBUFFER,null),d.bindTexture(d.TEXTURE_2D,null)},blendFramesAdditive:function(t,i,n,o,a){this.blendFrames(t,i,n,o,a,this.addShader)},clearFrame:function(t,i){void 0===i&&(i=!0);var n=this.gl;n.viewport(0,0,t.width,t.height),n.bindFramebuffer(n.FRAMEBUFFER,t.framebuffer),i?n.clearColor(0,0,0,0):n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT);var o=this.renderer.currentFramebuffer;n.bindFramebuffer(n.FRAMEBUFFER,o)},setUVs:function(t,i,n,o,a,u,d,f){var p=this.vertexViewF32;p[2]=t,p[3]=i,p[6]=n,p[7]=o,p[10]=a,p[11]=u,p[14]=t,p[15]=i,p[18]=a,p[19]=u,p[22]=d,p[23]=f},setTargetUVs:function(t,i){var n=i.height/t.height;n=n>.5?.5-(n-.5):.5-n+.5,this.setUVs(0,n,0,1+n,1,1+n,1,n)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});t.exports=P},function(t,i){t.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join("\n")},function(t,i,n){var o=n(31),a=n(38),u=n(2);t.exports=function(t,i){var n=t.getContext("experimental-webgl"),d=u(i,"callback"),f=u(i,"type","image/png"),p=u(i,"encoder",.92),b=u(i,"x",0),S=u(i,"y",0),M=u(i,"getPixel",!1),C=u(i,"isFramebuffer",!1),P=C?u(i,"bufferWidth",1):n.drawingBufferWidth,R=C?u(i,"bufferHeight",1):n.drawingBufferHeight;if(M){var O=new Uint8Array(4),B=C?S:R-S;n.readPixels(b,B,1,1,n.RGBA,n.UNSIGNED_BYTE,O),d.call(null,new a(O[0],O[1],O[2],O[3]/255))}else{var N=u(i,"width",P),Y=u(i,"height",R),X=new Uint8Array(N*Y*4);n.readPixels(b,R-S-Y,N,Y,n.RGBA,n.UNSIGNED_BYTE,X);for(var G=o.createWebGL(this,N,Y),U=G.getContext("2d"),V=U.getImageData(0,0,N,Y),z=V.data,W=0;W<Y;W++)for(var H=0;H<N;H++){var j=4*((Y-W-1)*N+H),q=4*(W*N+H);z[q+0]=X[j+0],z[q+1]=X[j+1],z[q+2]=X[j+2],z[q+3]=X[j+3]}U.putImageData(V,0,0);var Z=new Image;Z.onerror=function(){d.call(null),o.remove(G)},Z.onload=function(){d.call(null,Z),o.remove(G)},Z.src=G.toDataURL(f,p)}}},function(t,i,n){var o=n(33);t.exports=function(t){var i=t.config;if(!i.hideBanner){var n="WebGL";i.renderType===o.CANVAS?n="Canvas":i.renderType===o.HEADLESS&&(n="Headless");var a,u=i.audio,d=t.device.audio;if(a=d.webAudio&&!u.disableWebAudio?"Web Audio":u.noAudio||!d.webAudio&&!d.audioData?"No Audio":"HTML5 Audio",t.device.browser.ie)window.console&&console.log("Phaser v"+o.VERSION+" / https://phaser.io");else{var f,p="",b=[p];Array.isArray(i.bannerBackgroundColor)?(i.bannerBackgroundColor.forEach((function(t){p=p.concat("%c "),b.push("background: "+t),f=t})),b[b.length-1]="color: "+i.bannerTextColor+"; background: "+f):(p=p.concat("%c "),b.push("color: "+i.bannerTextColor+"; background: "+i.bannerBackgroundColor)),b.push("background: transparent"),i.gameTitle&&(p=p.concat(i.gameTitle),i.gameVersion&&(p=p.concat(" v"+i.gameVersion)),i.hidePhaser||(p=p.concat(" / "))),i.hidePhaser||(p=p.concat("Phaser v"+o.VERSION+" ("+n+" | "+a+")")),p=p.concat(" %c "+i.gameURL),b[0]=p,console.log.apply(console,b)}}}},function(t,i,n){var o=n(0),a=n(6),u=n(1),d=n(386),f=new o({initialize:function TimeStep2(t,i){this.game=t,this.raf=new d,this.started=!1,this.running=!1,this.minFps=a(i,"min",5),this.targetFps=a(i,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=u,this.forceSetTimeOut=a(i,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=a(i,"deltaHistory",10),this.panicMax=a(i,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=a(i,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var t=window.performance.now();this.time=t,this.lastTime=t,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0;for(var i=0;i<this.deltaSmoothingMax;i++)this.deltaHistory[i]=Math.min(this._target,this.deltaHistory[i]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(t){if(this.started)return this;this.started=!0,this.running=!0;for(var i=0;i<this.deltaSmoothingMax;i++)this.deltaHistory[i]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=t,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var t=window.performance.now();this.now=t;var i=t-this.lastTime;i<0&&(i=0),this.rawDelta=i;var n=this.deltaIndex,o=this.deltaHistory,a=this.deltaSmoothingMax,u=i,d=i;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,u=Math.min(u,this._target)),u>this._min&&(u=o[n],u=Math.min(u,this._min)),o[n]=u,this.deltaIndex++,this.deltaIndex>a&&(this.deltaIndex=0),d=0;for(var f=0;f<a;f++)d+=o[f];d/=a}this.delta=d,this.time+=this.rawDelta,t>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0),this.framesThisSecond++;var p=d/this._target;this.callback(t,d,p),this.lastTime=t,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(t){this.running||(t&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=u,this.raf=null,this.game=null}});t.exports=f},function(t,i,n){var o=n(0),a=n(1),u=new o({initialize:function RequestAnimationFrame2(){this.isRunning=!1,this.callback=a,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var t=this;this.step=function step(){var i=window.performance.now();t.lastTime=t.tick,t.tick=i,t.callback(i),t.timeOutID=window.requestAnimationFrame(step)},this.stepTimeout=function stepTimeout(){var i=Date.now(),n=Math.min(Math.max(2*t.target+t.tick-i,0),t.target);t.lastTime=t.tick,t.tick=i,t.callback(i),t.timeOutID=window.setTimeout(stepTimeout,n)}},start:function(t,i,n){this.isRunning||(this.callback=t,this.isSetTimeOut=i,this.target=n,this.isRunning=!0,this.timeOutID=i?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=a}});t.exports=u},function(t,i,n){var o=n(22);t.exports=function(t){var i,n=t.events;void 0!==document.hidden?i="visibilitychange":["webkit","moz","ms"].forEach((function(t){void 0!==document[t+"Hidden"]&&(document.hidden=function(){return document[t+"Hidden"]},i=t+"visibilitychange")})),i&&document.addEventListener(i,(function(t){document.hidden||"pause"===t.type?n.emit(o.HIDDEN):n.emit(o.VISIBLE)}),!1),window.onblur=function(){n.emit(o.BLUR)},window.onfocus=function(){n.emit(o.FOCUS)},window.focus&&t.config.autoFocus&&window.focus()}},function(t,i,n){var o=n(389),a=n(31),u=n(6);t.exports=function(t){var i=u(t,"data",[]),n=u(t,"canvas",null),d=u(t,"palette",o),f=u(t,"pixelWidth",1),p=u(t,"pixelHeight",f),b=u(t,"resizeCanvas",!0),S=u(t,"clearCanvas",!0),M=u(t,"preRender",null),C=u(t,"postRender",null),P=Math.floor(Math.abs(i[0].length*f)),R=Math.floor(Math.abs(i.length*p));n||(n=a.create2D(this,P,R),b=!1,S=!1),b&&(n.width=P,n.height=R);var O=n.getContext("2d");S&&O.clearRect(0,0,P,R),M&&M(n,O);for(var B=0;B<i.length;B++)for(var N=i[B],Y=0;Y<N.length;Y++){var X=N[Y];"."!==X&&" "!==X&&(O.fillStyle=d[X],O.fillRect(Y*f,B*p,f,p))}return C&&C(n,O),n}},function(t,i){t.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(t,i,n){var o=n(0),a=n(358),u=n(94),d=n(3),f=new o({Extends:u,initialize:function CubicBezierCurve2(t,i,n,o){u.call(this,"CubicBezierCurve"),Array.isArray(t)&&(o=new d(t[6],t[7]),n=new d(t[4],t[5]),i=new d(t[2],t[3]),t=new d(t[0],t[1])),this.p0=t,this.p1=i,this.p2=n,this.p3=o},getStartPoint:function(t){return void 0===t&&(t=new d),t.copy(this.p0)},getResolution:function(t){return t},getPoint:function(t,i){void 0===i&&(i=new d);var n=this.p0,o=this.p1,u=this.p2,f=this.p3;return i.set(a(t,n.x,o.x,u.x,f.x),a(t,n.y,o.y,u.y,f.y))},draw:function(t,i){void 0===i&&(i=32);var n=this.getPoints(i);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var o=1;o<n.length;o++)t.lineTo(n[o].x,n[o].y);return t.strokePath(),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});f.fromJSON=function(t){var i=t.points,n=new d(i[0],i[1]),o=new d(i[2],i[3]),a=new d(i[4],i[5]),u=new d(i[6],i[7]);return new f(n,o,a,u)},t.exports=f},function(t,i,n){var o=n(0),a=n(94),u=n(36),d=n(6),f=n(196),p=n(3),b=new o({Extends:a,initialize:function EllipseCurve2(t,i,n,o,f,b,S,M){if("object"==typeof t){var C=t;t=d(C,"x",0),i=d(C,"y",0),n=d(C,"xRadius",0),o=d(C,"yRadius",n),f=d(C,"startAngle",0),b=d(C,"endAngle",360),S=d(C,"clockwise",!1),M=d(C,"rotation",0)}else void 0===o&&(o=n),void 0===f&&(f=0),void 0===b&&(b=360),void 0===S&&(S=!1),void 0===M&&(M=0);a.call(this,"EllipseCurve"),this.p0=new p(t,i),this._xRadius=n,this._yRadius=o,this._startAngle=u(f),this._endAngle=u(b),this._clockwise=S,this._rotation=u(M)},getStartPoint:function(t){return void 0===t&&(t=new p),this.getPoint(0,t)},getResolution:function(t){return 2*t},getPoint:function(t,i){void 0===i&&(i=new p);for(var n=2*Math.PI,o=this._endAngle-this._startAngle,a=Math.abs(o)<Number.EPSILON;o<0;)o+=n;for(;o>n;)o-=n;o<Number.EPSILON&&(o=a?0:n),this._clockwise&&!a&&(o===n?o=-n:o-=n);var u=this._startAngle+t*o,d=this.p0.x+this._xRadius*Math.cos(u),f=this.p0.y+this._yRadius*Math.sin(u);if(0!==this._rotation){var b=Math.cos(this._rotation),S=Math.sin(this._rotation),M=d-this.p0.x,C=f-this.p0.y;d=M*b-C*S+this.p0.x,f=M*S+C*b+this.p0.y}return i.set(d,f)},setXRadius:function(t){return this.xRadius=t,this},setYRadius:function(t){return this.yRadius=t,this},setWidth:function(t){return this.xRadius=t/2,this},setHeight:function(t){return this.yRadius=t/2,this},setStartAngle:function(t){return this.startAngle=t,this},setEndAngle:function(t){return this.endAngle=t,this},setClockwise:function(t){return this.clockwise=t,this},setRotation:function(t){return this.rotation=t,this},x:{get:function(){return this.p0.x},set:function(t){this.p0.x=t}},y:{get:function(){return this.p0.y},set:function(t){this.p0.y=t}},xRadius:{get:function(){return this._xRadius},set:function(t){this._xRadius=t}},yRadius:{get:function(){return this._yRadius},set:function(t){this._yRadius=t}},startAngle:{get:function(){return f(this._startAngle)},set:function(t){this._startAngle=u(t)}},endAngle:{get:function(){return f(this._endAngle)},set:function(t){this._endAngle=u(t)}},clockwise:{get:function(){return this._clockwise},set:function(t){this._clockwise=t}},angle:{get:function(){return f(this._rotation)},set:function(t){this._rotation=u(t)}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=t}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:f(this._startAngle),endAngle:f(this._endAngle),clockwise:this._clockwise,rotation:f(this._rotation)}}});b.fromJSON=function(t){return new b(t)},t.exports=b},function(t,i,n){var o=n(0),a=n(94),u=n(199),d=n(10),f=n(3),p=new o({Extends:a,initialize:function LineCurve2(t,i){a.call(this,"LineCurve"),Array.isArray(t)&&(i=new f(t[2],t[3]),t=new f(t[0],t[1])),this.p0=t,this.p1=i,this.arcLengthDivisions=1},getBounds:function(t){return void 0===t&&(t=new d),u([this.p0,this.p1],t)},getStartPoint:function(t){return void 0===t&&(t=new f),t.copy(this.p0)},getResolution:function(t){return void 0===t&&(t=1),t},getPoint:function(t,i){return void 0===i&&(i=new f),1===t?i.copy(this.p1):(i.copy(this.p1).subtract(this.p0).scale(t).add(this.p0),i)},getPointAt:function(t,i){return this.getPoint(t,i)},getTangent:function(t,i){return void 0===i&&(i=new f),i.copy(this.p1).subtract(this.p0).normalize(),i},getUtoTmapping:function(t,i,n){var o;if(i){var a=this.getLengths(n),u=a[a.length-1];o=Math.min(i,u)/u}else o=t;return o},draw:function(t){return t.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});p.fromJSON=function(t){var i=t.points,n=new f(i[0],i[1]),o=new f(i[2],i[3]);return new p(n,o)},t.exports=p},function(t,i,n){var o=n(0),a=n(3),u=new o({initialize:function MoveTo3(t,i){this.active=!1,this.p0=new a(t,i)},getPoint:function(t,i){return void 0===i&&(i=new a),i.copy(this.p0)},getPointAt:function(t,i){return this.getPoint(t,i)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});t.exports=u},function(t,i,n){var o=n(0),a=n(94),u=n(359),d=n(3),f=new o({Extends:a,initialize:function QuadraticBezier2(t,i,n){a.call(this,"QuadraticBezier"),Array.isArray(t)&&(n=new d(t[4],t[5]),i=new d(t[2],t[3]),t=new d(t[0],t[1])),this.p0=t,this.p1=i,this.p2=n},getStartPoint:function(t){return void 0===t&&(t=new d),t.copy(this.p0)},getResolution:function(t){return t},getPoint:function(t,i){void 0===i&&(i=new d);var n=this.p0,o=this.p1,a=this.p2;return i.set(u(t,n.x,o.x,a.x),u(t,n.y,o.y,a.y))},draw:function(t,i){void 0===i&&(i=32);var n=this.getPoints(i);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var o=1;o<n.length;o++)t.lineTo(n[o].x,n[o].y);return t.strokePath(),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});f.fromJSON=function(t){var i=t.points,n=new d(i[0],i[1]),o=new d(i[2],i[3]),a=new d(i[4],i[5]);return new f(n,o,a)},t.exports=f},function(t,i,n){var o=n(194),a=n(0),u=n(94),d=n(3),f=new a({Extends:u,initialize:function SplineCurve2(t){void 0===t&&(t=[]),u.call(this,"SplineCurve"),this.points=[],this.addPoints(t)},addPoints:function(t){for(var i=0;i<t.length;i++){var n=new d;"number"==typeof t[i]?(n.x=t[i],n.y=t[i+1],i++):Array.isArray(t[i])?(n.x=t[i][0],n.y=t[i][1]):(n.x=t[i].x,n.y=t[i].y),this.points.push(n)}return this},addPoint:function(t,i){var n=new d(t,i);return this.points.push(n),n},getStartPoint:function(t){return void 0===t&&(t=new d),t.copy(this.points[0])},getResolution:function(t){return t*this.points.length},getPoint:function(t,i){void 0===i&&(i=new d);var n=this.points,a=(n.length-1)*t,u=Math.floor(a),f=a-u,p=n[0===u?u:u-1],b=n[u],S=n[u>n.length-2?n.length-1:u+1],M=n[u>n.length-3?n.length-1:u+2];return i.set(o(f,p.x,b.x,S.x,M.x),o(f,p.y,b.y,S.y,M.y))},toJSON:function(){for(var t=[],i=0;i<this.points.length;i++)t.push(this.points[i].x),t.push(this.points[i].y);return{type:this.type,points:t}}});f.fromJSON=function(t){return new f(t.points)},t.exports=f},function(t,i,n){var o=new(n(0))({initialize:function BaseShader2(t,i,n,o){i&&""!==i||(i=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join("\n")),n&&""!==n||(n=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join("\n")),void 0===o&&(o=null),this.key=t,this.fragmentSrc=i,this.vertexSrc=n,this.uniforms=o}});t.exports=o},function(t,i,n){var o=n(38);o.ColorSpectrum=n(909),o.ColorToRGBA=n(910),o.ComponentToHex=n(398),o.GetColor=n(103),o.GetColor32=n(328),o.HexStringToColor=n(327),o.HSLToColor=n(911),o.HSVColorWheel=n(912),o.HSVToRGB=n(188),o.HueToComponent=n(399),o.IntegerToColor=n(189),o.IntegerToRGB=n(330),o.Interpolate=n(913),o.ObjectToColor=n(331),o.RandomRGB=n(914),o.RGBStringToColor=n(332),o.RGBToHSV=n(329),o.RGBToString=n(915),o.ValueToColor=n(187),t.exports=o},function(t,i){t.exports=function(t){var i=t.toString(16);return 1===i.length?"0"+i:i}},function(t,i){t.exports=function(t,i,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(i-t)*n:n<.5?i:n<2/3?t+(i-t)*(2/3-n)*6:t}},function(t,i,n){var o=n(105);t.exports=function(t){if("complete"!==document.readyState&&"interactive"!==document.readyState){var check=function(){document.removeEventListener("deviceready",check,!0),document.removeEventListener("DOMContentLoaded",check,!0),window.removeEventListener("load",check,!0),t()};document.body?o.cordova?document.addEventListener("deviceready",check,!1):(document.addEventListener("DOMContentLoaded",check,!0),window.addEventListener("load",check,!0)):window.setTimeout(check,20)}else t()}},function(t,i){t.exports=function(t){if(!t)return window.innerHeight;var i=Math.abs(window.orientation),n={w:0,h:0},o=document.createElement("div");return o.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(o),n.w=90===i?o.offsetHeight:window.innerWidth,n.h=90===i?window.innerWidth:o.offsetHeight,document.documentElement.removeChild(o),o=null,90!==Math.abs(window.orientation)?n.h:n.w}},function(t,i,n){var o=n(201);t.exports=function(t,i){var n=window.screen,a=!!n&&(n.orientation||n.mozOrientation||n.msOrientation);return a&&"string"==typeof a.type?a.type:"string"==typeof a?a:"number"==typeof window.orientation?0===window.orientation||180===window.orientation?o.ORIENTATION.PORTRAIT:o.ORIENTATION.LANDSCAPE:window.matchMedia?window.matchMedia("(orientation: portrait)").matches?o.ORIENTATION.PORTRAIT:window.matchMedia("(orientation: landscape)").matches?o.ORIENTATION.LANDSCAPE:void 0:i>t?o.ORIENTATION.PORTRAIT:o.ORIENTATION.LANDSCAPE}},function(t,i){t.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(t,i){t.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(t,i){t.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(t,i){t.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(t,i){t.exports=function(t){var i;return""!==t&&("string"==typeof t?i=document.getElementById(t):t&&1===t.nodeType&&(i=t)),i||(i=document.body),i}},function(t,i){t.exports=function(t){var i="";try{window.DOMParser?i=(new DOMParser).parseFromString(t,"text/xml"):(i=new ActiveXObject("Microsoft.XMLDOM")).loadXML(t)}catch(n){i=null}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length?i:null}},function(t,i,n){var o=n(0),a=n(203),u=n(9),d=n(51),f=n(22),p=n(410),b=n(411),S=n(412),M=n(413),C=n(25),P=n(177),R=new o({initialize:function InputManager2(t,i){this.game=t,this.scaleManager,this.canvas,this.config=i,this.enabled=!0,this.events=new u,this.isOver=!0,this.defaultCursor="",this.keyboard=i.inputKeyboard?new p(this):null,this.mouse=i.inputMouse?new b(this):null,this.touch=i.inputTouch?new M(this):null,this.pointers=[],this.pointersTotal=i.inputActivePointers,i.inputTouch&&1===this.pointersTotal&&(this.pointersTotal=2);for(var n=0;n<=this.pointersTotal;n++){var o=new S(this,n);o.smoothFactor=i.inputSmoothFactor,this.pointers.push(o)}this.mousePointer=i.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new C,this._tempMatrix2=new C,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],t.events.once(f.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(d.MANAGER_BOOT),this.game.events.on(f.PRE_RENDER,this.preRender,this),this.game.events.once(f.DESTROY,this.destroy,this)},setCanvasOver:function(t){this.isOver=!0,this.events.emit(d.GAME_OVER,t)},setCanvasOut:function(t){this.isOver=!1,this.events.emit(d.GAME_OUT,t)},preRender:function(){var t=this.game.loop.now,i=this.game.loop.delta,n=this.game.scene.getScenes(!0,!0);this.time=t,this.events.emit(d.MANAGER_UPDATE);for(var o=0;o<n.length;o++){var a=n[o];if(a.sys.input&&a.sys.input.updatePoll(t,i)&&this.globalTopOnly)return}},setDefaultCursor:function(t){this.defaultCursor=t,this.canvas.style.cursor!==t&&(this.canvas.style.cursor=t)},setCursor:function(t){t.cursor&&(this.canvas.style.cursor=t.cursor)},resetCursor:function(t){t.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(t){void 0===t&&(t=1);var i=[];this.pointersTotal+t>10&&(t=10-this.pointersTotal);for(var n=0;n<t;n++){var o=this.pointers.length,a=new S(this,o);a.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(a),this.pointersTotal++,i.push(a)}return i},updateInputPlugins:function(t,i){var n=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var o=0;o<n.length;o++){var a=n[o];if(a.sys.input&&(a.sys.input.update(t,i)&&this.globalTopOnly||this._tempSkip))return}},onTouchStart:function(t){for(var i=this.pointers,n=[],o=0;o<t.changedTouches.length;o++)for(var u=t.changedTouches[o],d=1;d<this.pointersTotal;d++){var f=i[d];if(!f.active){f.touchstart(u,t),this.activePointer=f,n.push(f);break}}this.updateInputPlugins(a.TOUCH_START,n)},onTouchMove:function(t){for(var i=this.pointers,n=[],o=0;o<t.changedTouches.length;o++)for(var u=t.changedTouches[o],d=1;d<this.pointersTotal;d++){var f=i[d];if(f.active&&f.identifier===u.identifier){f.touchmove(u,t),this.activePointer=f,n.push(f);break}}this.updateInputPlugins(a.TOUCH_MOVE,n)},onTouchEnd:function(t){for(var i=this.pointers,n=[],o=0;o<t.changedTouches.length;o++)for(var u=t.changedTouches[o],d=1;d<this.pointersTotal;d++){var f=i[d];if(f.active&&f.identifier===u.identifier){f.touchend(u,t),n.push(f);break}}this.updateInputPlugins(a.TOUCH_END,n)},onTouchCancel:function(t){for(var i=this.pointers,n=[],o=0;o<t.changedTouches.length;o++)for(var u=t.changedTouches[o],d=1;d<this.pointersTotal;d++){var f=i[d];if(f.active&&f.identifier===u.identifier){f.touchcancel(u,t),n.push(f);break}}this.updateInputPlugins(a.TOUCH_CANCEL,n)},onMouseDown:function(t){var i=this.mousePointer;i.down(t),i.updateMotion(),this.activePointer=i,this.updateInputPlugins(a.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(t){var i=this.mousePointer;i.move(t),i.updateMotion(),this.activePointer=i,this.updateInputPlugins(a.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(t){var i=this.mousePointer;i.up(t),i.updateMotion(),this.activePointer=i,this.updateInputPlugins(a.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(t){var i=this.mousePointer;i.wheel(t),this.activePointer=i,this.updateInputPlugins(a.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(t){var i=this.mouse.locked;this.mousePointer.locked=i,this.events.emit(d.POINTERLOCK_CHANGE,t,i)},inputCandidate:function(t,i){var n=t.input;if(!n||!n.enabled||!n.alwaysEnabled&&!t.willRender(i))return!1;var o=!0,a=t.parentContainer;if(a)do{if(!a.willRender(i)){o=!1;break}a=a.parentContainer}while(a);return o},hitTest:function(t,i,n,o){void 0===o&&(o=this._tempHitTest);var a=this._tempPoint,u=n.scrollX,d=n.scrollY;o.length=0;var f=t.x,p=t.y;n.getWorldPoint(f,p,a),t.worldX=a.x,t.worldY=a.y;for(var b={x:0,y:0},S=this._tempMatrix,M=this._tempMatrix2,C=0;C<i.length;C++){var R=i[C];if(this.inputCandidate(R,n)){var O=a.x+u*R.scrollFactorX-u,B=a.y+d*R.scrollFactorY-d;R.parentContainer?(R.getWorldTransformMatrix(S,M),S.applyInverse(O,B,b)):P(O,B,R.x,R.y,R.rotation,R.scaleX,R.scaleY,b),this.pointWithinHitArea(R,b.x,b.y)&&o.push(R)}}return o},pointWithinHitArea:function(t,i,n){i+=t.displayOriginX,n+=t.displayOriginY;var o=t.input;return!(!o||!o.hitAreaCallback(o.hitArea,i,n,t)||(o.localX=i,o.localY=n,0))},pointWithinInteractiveObject:function(t,i,n){return!!t.hitArea&&(i+=t.gameObject.displayOriginX,n+=t.gameObject.displayOriginY,t.localX=i,t.localY=n,t.hitAreaCallback(t.hitArea,i,n,t))},transformPointer:function(t,i,n,o){var a=t.position,u=t.prevPosition;u.x=a.x,u.y=a.y;var d=this.scaleManager.transformX(i),f=this.scaleManager.transformY(n),p=t.smoothFactor;o&&0!==p?(a.x=d*p+u.x*(1-p),a.y=f*p+u.y*(1-p)):(a.x=d,a.y=f)},destroy:function(){this.events.removeAllListeners(),this.game.events.off(f.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var t=0;t<this.pointers.length;t++)this.pointers[t].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});t.exports=R},function(t,i,n){var o=n(93),a=n(0),u=n(22),d=n(51),f=n(143),p=n(1),b=new a({initialize:function KeyboardManager2(t){this.manager=t,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=p,this.onKeyUp=p,t.events.once(d.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputKeyboard,this.target=t.inputKeyboardEventTarget,this.addCapture(t.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(u.POST_STEP,this.postUpdate,this)},startListeners:function(){var t=this;this.onKeyDown=function(i){if(!i.defaultPrevented&&t.enabled&&t.manager){t.queue.push(i),t.manager.events.emit(d.MANAGER_PROCESS);var n=i.altKey||i.ctrlKey||i.shiftKey||i.metaKey;t.preventDefault&&!n&&t.captures.indexOf(i.keyCode)>-1&&i.preventDefault()}},this.onKeyUp=function(i){if(!i.defaultPrevented&&t.enabled&&t.manager){t.queue.push(i),t.manager.events.emit(d.MANAGER_PROCESS);var n=i.altKey||i.ctrlKey||i.shiftKey||i.metaKey;t.preventDefault&&!n&&t.captures.indexOf(i.keyCode)>-1&&i.preventDefault()}};var i=this.target;i&&(i.addEventListener("keydown",this.onKeyDown,!1),i.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var t=this.target;t.removeEventListener("keydown",this.onKeyDown,!1),t.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(t){"string"==typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]);for(var i=this.captures,n=0;n<t.length;n++){var o=t[n];"string"==typeof o&&(o=f[o.trim().toUpperCase()]),-1===i.indexOf(o)&&i.push(o)}this.preventDefault=i.length>0},removeCapture:function(t){"string"==typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]);for(var i=this.captures,n=0;n<t.length;n++){var a=t[n];"string"==typeof a&&(a=f[a.toUpperCase()]),o(i,a)}this.preventDefault=i.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(u.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});t.exports=b},function(t,i,n){var o=n(0),a=n(191),u=n(51),d=n(1),f=new o({initialize:function MouseManager2(t){this.manager=t,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=d,this.onMouseDown=d,this.onMouseUp=d,this.onMouseDownWindow=d,this.onMouseUpWindow=d,this.onMouseOver=d,this.onMouseOut=d,this.onMouseWheel=d,this.pointerLockChange=d,this.isTop=!0,t.events.once(u.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputMouse,this.target=t.inputMouseEventTarget,this.passive=t.inputMousePassive,this.preventDefaultDown=t.inputMousePreventDefaultDown,this.preventDefaultUp=t.inputMousePreventDefaultUp,this.preventDefaultMove=t.inputMousePreventDefaultMove,this.preventDefaultWheel=t.inputMousePreventDefaultWheel,this.target?"string"==typeof this.target&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,t.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),this},requestPointerLock:function(){if(a.pointerLock){var t=this.target;t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock()}},releasePointerLock:function(){a.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var t=this.target;if(t){var i=this,n=this.manager,o=n.canvas,u=window&&window.focus&&n.game.config.autoFocus;this.onMouseMove=function(t){!t.defaultPrevented&&i.enabled&&n&&n.enabled&&(n.onMouseMove(t),i.preventDefaultMove&&t.preventDefault())},this.onMouseDown=function(t){u&&window.focus(),!t.defaultPrevented&&i.enabled&&n&&n.enabled&&(n.onMouseDown(t),i.preventDefaultDown&&t.target===o&&t.preventDefault())},this.onMouseDownWindow=function(t){!t.defaultPrevented&&i.enabled&&n&&n.enabled&&t.target!==o&&n.onMouseDown(t)},this.onMouseUp=function(t){!t.defaultPrevented&&i.enabled&&n&&n.enabled&&(n.onMouseUp(t),i.preventDefaultUp&&t.target===o&&t.preventDefault())},this.onMouseUpWindow=function(t){!t.defaultPrevented&&i.enabled&&n&&n.enabled&&t.target!==o&&n.onMouseUp(t)},this.onMouseOver=function(t){!t.defaultPrevented&&i.enabled&&n&&n.enabled&&n.setCanvasOver(t)},this.onMouseOut=function(t){!t.defaultPrevented&&i.enabled&&n&&n.enabled&&n.setCanvasOut(t)},this.onMouseWheel=function(t){!t.defaultPrevented&&i.enabled&&n&&n.enabled&&n.onMouseWheel(t),i.preventDefaultWheel&&t.target===o&&t.preventDefault()};var d={passive:!0};if(t.addEventListener("mousemove",this.onMouseMove),t.addEventListener("mousedown",this.onMouseDown),t.addEventListener("mouseup",this.onMouseUp),t.addEventListener("mouseover",this.onMouseOver,d),t.addEventListener("mouseout",this.onMouseOut,d),this.preventDefaultWheel?t.addEventListener("wheel",this.onMouseWheel,{passive:!1}):t.addEventListener("wheel",this.onMouseWheel,d),window&&n.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,d),window.top.addEventListener("mouseup",this.onMouseUpWindow,d)}catch(f){window.addEventListener("mousedown",this.onMouseDownWindow,d),window.addEventListener("mouseup",this.onMouseUpWindow,d),this.isTop=!1}a.pointerLock&&(this.pointerLockChange=function(t){var o=i.target;i.locked=document.pointerLockElement===o||document.mozPointerLockElement===o||document.webkitPointerLockElement===o,n.onPointerLockChange(t)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var t=this.target;t.removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("mouseover",this.onMouseOver),t.removeEventListener("mouseout",this.onMouseOut),window&&((t=this.isTop?window.top:window).removeEventListener("mousedown",this.onMouseDownWindow),t.removeEventListener("mouseup",this.onMouseUpWindow)),a.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=f},function(t,i,n){var o=n(349),a=n(0),u=n(50),d=n(124),f=n(360),p=n(3),b=n(105),S=new a({initialize:function Pointer2(t,i){this.manager=t,this.id=i,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new p,this.prevPosition=new p,this.midPoint=new p(-1,-1),this.velocity=new p,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=0===i,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(t){var i=t.getWorldPoint(this.x,this.y);return this.worldX=i.x,this.worldY=i.y,this},positionToCamera:function(t,i){return t.getWorldPoint(this.x,this.y,i)},updateMotion:function(){var t=this.position.x,i=this.position.y,n=this.midPoint.x,a=this.midPoint.y;if(t!==n||i!==a){var u=f(this.motionFactor,n,t),p=f(this.motionFactor,a,i);d(u,t,.1)&&(u=t),d(p,i,.1)&&(p=i),this.midPoint.set(u,p);var b=t-u,S=i-p;this.velocity.set(b,S),this.angle=o(u,p,t,i),this.distance=Math.sqrt(b*b+S*S)}},up:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),0===this.buttons&&(this.isDown=!1,this.upTime=t.timeStamp,this.wasTouch=!1)},down:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),b.macOS&&t.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=t.timeStamp),this.wasTouch=!1},move:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.locked&&(this.movementX=t.movementX||t.mozMovementX||t.webkitMovementX||0,this.movementY=t.movementY||t.mozMovementY||t.webkitMovementY||0),this.moveTime=t.timeStamp,this.wasTouch=!1},wheel:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.deltaX=t.deltaX,this.deltaY=t.deltaY,this.deltaZ=t.deltaZ,this.wasTouch=!1},touchstart:function(t,i){t.pointerId&&(this.pointerId=t.pointerId),this.identifier=t.identifier,this.target=t.target,this.active=!0,this.buttons=1,this.event=i,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=i.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(t,i){this.event=i,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.moveTime=i.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(t,i){this.buttons=0,this.event=i,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=i.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(t,i){this.buttons=0,this.event=i,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=i.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return 0===this.buttons},leftButtonDown:function(){return!!(1&this.buttons)},rightButtonDown:function(){return!!(2&this.buttons)},middleButtonDown:function(){return!!(4&this.buttons)},backButtonDown:function(){return!!(8&this.buttons)},forwardButtonDown:function(){return!!(16&this.buttons)},leftButtonReleased:function(){return 0===this.button&&!this.isDown},rightButtonReleased:function(){return 2===this.button&&!this.isDown},middleButtonReleased:function(){return 1===this.button&&!this.isDown},backButtonReleased:function(){return 3===this.button&&!this.isDown},forwardButtonReleased:function(){return 4===this.button&&!this.isDown},getDistance:function(){return this.isDown?u(this.downX,this.downY,this.x,this.y):u(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?o(this.downX,this.downY,this.x,this.y):o(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(t,i){void 0===t&&(t=10),void 0===i&&(i=[]);for(var n=this.prevPosition.x,o=this.prevPosition.y,a=this.position.x,u=this.position.y,d=0;d<t;d++){var p=1/t*d;i[d]={x:f(p,n,a),y:f(p,o,u)}}return i},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},time:{get:function(){return this.event?this.event.timeStamp:0}}});t.exports=S},function(t,i,n){var o=n(0),a=n(51),u=n(1),d=new o({initialize:function TouchManager2(t){this.manager=t,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=u,this.onTouchStartWindow=u,this.onTouchMove=u,this.onTouchEnd=u,this.onTouchEndWindow=u,this.onTouchCancel=u,this.onTouchCancelWindow=u,this.onTouchOver=u,this.onTouchOut=u,t.events.once(a.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputTouch,this.target=t.inputTouchEventTarget,this.capture=t.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),t.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),this},startListeners:function(){var t=this,i=this.manager.canvas,n=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(o){n&&window.focus(),!o.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchStart(o),t.capture&&o.cancelable&&o.target===i&&o.preventDefault())},this.onTouchStartWindow=function(n){!n.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&n.target!==i&&t.manager.onTouchStart(n)},this.onTouchMove=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchMove(i),t.capture&&i.cancelable&&i.preventDefault())},this.onTouchEnd=function(n){!n.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchEnd(n),t.capture&&n.cancelable&&n.target===i&&n.preventDefault())},this.onTouchEndWindow=function(n){!n.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&n.target!==i&&t.manager.onTouchEnd(n)},this.onTouchCancel=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchCancel(i),t.capture&&i.preventDefault())},this.onTouchCancelWindow=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.onTouchCancel(i)},this.onTouchOver=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOver(i)},this.onTouchOut=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOut(i)};var o=this.target;if(o){var a={passive:!0},u={passive:!1};o.addEventListener("touchstart",this.onTouchStart,this.capture?u:a),o.addEventListener("touchmove",this.onTouchMove,this.capture?u:a),o.addEventListener("touchend",this.onTouchEnd,this.capture?u:a),o.addEventListener("touchcancel",this.onTouchCancel,this.capture?u:a),o.addEventListener("touchover",this.onTouchOver,this.capture?u:a),o.addEventListener("touchout",this.onTouchOut,this.capture?u:a),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,u),window.addEventListener("touchend",this.onTouchEndWindow,u),window.addEventListener("touchcancel",this.onTouchCancelWindow,u)),this.enabled=!0}},stopListeners:function(){var t=this.target;t.removeEventListener("touchstart",this.onTouchStart),t.removeEventListener("touchmove",this.onTouchMove),t.removeEventListener("touchend",this.onTouchEnd),t.removeEventListener("touchcancel",this.onTouchCancel),t.removeEventListener("touchover",this.onTouchOver),t.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=d},function(t,i,n){var o=n(0),a=n(22),u=n(9),d=n(8),f=n(16),p=n(5),b=n(2),S=n(24),M=n(93),C=new o({Extends:u,initialize:function PluginManager2(t){u.call(this),this.game=t,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],t.isBooted?this.boot():t.events.once(a.BOOT,this.boot,this)},boot:function(){var t,i,n,o,u,d,f,p=this.game.config,S=p.installGlobalPlugins;for(S=S.concat(this._pendingGlobal),t=0;t<S.length;t++)i=S[t],n=b(i,"key",null),o=b(i,"plugin",null),u=b(i,"start",!1),d=b(i,"mapping",null),f=b(i,"data",null),n&&(o?this.install(n,o,u,d,f):console.warn("Missing `plugin` for key: "+n));for(S=(S=p.installScenePlugins).concat(this._pendingScene),t=0;t<S.length;t++)i=S[t],n=b(i,"key",null),o=b(i,"plugin",null),d=b(i,"mapping",null),n&&(o?this.installScenePlugin(n,o,d):console.warn("Missing `plugin` for key: "+n));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(a.DESTROY,this.destroy,this)},addToScene:function(t,i,n){var o,a,u,d=this.game,f=t.scene,p=t.settings.map,b=t.settings.isBooted;for(o=0;o<i.length;o++)d[a=i[o]]?(t[a]=d[a],p.hasOwnProperty(a)&&(f[p[a]]=t[a])):"game"===a&&p.hasOwnProperty(a)&&(f[p[a]]=d);for(var M=0;M<n.length;M++)for(u=n[M],o=0;o<u.length;o++)if(a=u[o],S.hasCore(a)){var C=S.getCore(a),P=C.mapping,R=new C.plugin(f,this,P);t[P]=R,C.custom?f[P]=R:p.hasOwnProperty(P)&&(f[p[P]]=R),b&&R.boot()}for(u=this.plugins,o=0;o<u.length;o++){var O=u[o];O.mapping&&(f[O.mapping]=O.plugin)}},getDefaultScenePlugins:function(){var t=this.game.config.defaultPlugins;return t=t.concat(this.scenePlugins)},installScenePlugin:function(t,i,n,o,a){if(void 0===a&&(a=!1),"function"==typeof i){if(S.hasCore(t)){if(!a&&S.hasCore(t))return void console.warn("Scene Plugin key in use: "+t)}else S.register(t,i,n,!0),this.scenePlugins.push(t);if(o){var u=new i(o,this,t);o.sys[t]=u,n&&""!==n&&(o[n]=u),u.boot()}}else console.warn("Invalid Scene Plugin: "+t)},install:function(t,i,n,o,a){if(void 0===n&&(n=!1),void 0===o&&(o=null),void 0===a&&(a=null),"function"!=typeof i)return console.warn("Invalid Plugin: "+t),null;if(S.hasCustom(t))return console.warn("Plugin key in use: "+t),null;if(null!==o&&(n=!0),this.game.isBooted){if(S.registerCustom(t,i,o,a),n)return this.start(t)}else this._pendingGlobal.push({key:t,plugin:i,start:n,mapping:o,data:a});return null},getIndex:function(t){for(var i=this.plugins,n=0;n<i.length;n++)if(i[n].key===t)return n;return-1},getEntry:function(t){var i=this.getIndex(t);if(-1!==i)return this.plugins[i]},isActive:function(t){var i=this.getEntry(t);return i&&i.active},start:function(t,i){void 0===i&&(i=t);var n=this.getEntry(i);return n&&!n.active?(n.active=!0,n.plugin.start()):n||(n=this.createEntry(t,i)),n?n.plugin:null},createEntry:function(t,i){var n=S.getCustom(t);if(n){var o=new n.plugin(this);n={key:i,plugin:o,active:!0,mapping:n.mapping,data:n.data},this.plugins.push(n),o.init(n.data),o.start()}return n},stop:function(t){var i=this.getEntry(t);return i&&i.active&&(i.active=!1,i.plugin.stop()),this},get:function(t,i){void 0===i&&(i=!0);var n=this.getEntry(t);if(n)return n.plugin;var o=this.getClass(t);return o&&i?(n=this.createEntry(t,t))?n.plugin:null:o||null},getClass:function(t){return S.getCustomClass(t)},removeGlobalPlugin:function(t){var i=this.getEntry(t);i&&M(this.plugins,i),S.removeCustom(t)},removeScenePlugin:function(t){M(this.scenePlugins,t),S.remove(t)},registerGameObject:function(t,i,n){return i&&p.register(t,i),n&&f.register(t,n),this},removeGameObject:function(t,i,n){return void 0===i&&(i=!0),void 0===n&&(n=!0),i&&p.remove(t),n&&f.remove(t),this},registerFileType:function(t,i,n){d.register(t,i),n&&n.sys.load&&(n.sys.load[t]=i)},destroy:function(){for(var t=0;t<this.plugins.length;t++)this.plugins[t].plugin.destroy();S.destroyCustomPlugins(),this.game.noReturn&&S.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});t.exports=C},function(t,i,n){var o=n(201),a=n(0),u=n(9),d=n(104),f=n(22),p=n(401),b=n(407),S=n(402),M=n(1),C=n(10),P=n(416),R=n(76),O=n(3),B=new a({Extends:u,initialize:function ScaleManager2(t){u.call(this),this.game=t,this.canvas,this.canvasBounds=new C,this.parent=null,this.parentIsWindow=!1,this.parentSize=new P,this.gameSize=new P,this.baseSize=new P,this.displaySize=new P,this.scaleMode=o.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new O(1,1),this.autoRound=!1,this.autoCenter=o.CENTER.NO_CENTER,this.orientation=o.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:M,windowResize:M,fullScreenChange:M,fullScreenError:M}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(f.BOOT,this.boot,this)},boot:function(){var t=this.game;this.canvas=t.canvas,this.fullscreen=t.device.fullscreen,this.scaleMode!==o.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===o.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),t.events.on(f.PRE_STEP,this.step,this),t.events.once(f.READY,this.refresh,this),t.events.once(f.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(t){this.getParent(t),this.getParentBounds();var i=t.width,n=t.height,a=t.scaleMode,u=t.zoom,d=t.autoRound;if("string"==typeof i){var f=this.parentSize.width;0===f&&(f=window.innerWidth);var p=parseInt(i,10)/100;i=Math.floor(f*p)}if("string"==typeof n){var b=this.parentSize.height;0===b&&(b=window.innerHeight);var M=parseInt(n,10)/100;n=Math.floor(b*M)}this.scaleMode=a,this.autoRound=d,this.autoCenter=t.autoCenter,this.resizeInterval=t.resizeInterval,d&&(i=Math.floor(i),n=Math.floor(n)),this.gameSize.setSize(i,n),u===o.ZOOM.MAX_ZOOM&&(u=this.getMaxZoom()),this.zoom=u,1!==u&&(this._resetZoom=!0),this.baseSize.setSize(i,n),d&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),t.minWidth>0&&this.displaySize.setMin(t.minWidth*u,t.minHeight*u),t.maxWidth>0&&this.displaySize.setMax(t.maxWidth*u,t.maxHeight*u),this.displaySize.setSize(i,n),this.orientation=S(i,n)},getParent:function(t){var i=t.parent;if(null!==i){if(this.parent=b(i),this.parentIsWindow=this.parent===document.body,t.expandParent&&t.scaleMode!==o.SCALE_MODE.NONE){var n=this.parent.getBoundingClientRect();(this.parentIsWindow||0===n.height)&&(document.documentElement.style.height="100%",document.body.style.height="100%",n=this.parent.getBoundingClientRect(),this.parentIsWindow||0!==n.height||(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}t.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=b(t.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var t=this.parentSize,i=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(i.height=p(!0));var n=i.width,o=i.height;return(t.width!==n||t.height!==o)&&(t.setSize(n,o),!0)},lockOrientation:function(t){var i=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return!!i&&i.call(screen,t)},setParentSize:function(t,i){return this.parentSize.setSize(t,i),this.refresh()},setGameSize:function(t,i){var n=this.autoRound;n&&(t=Math.floor(t),i=Math.floor(i));var o=this.width,a=this.height;return this.gameSize.resize(t,i),this.baseSize.resize(t,i),n&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(t/i),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(o,a)},resize:function(t,i){var n=this.zoom,o=this.autoRound;o&&(t=Math.floor(t),i=Math.floor(i));var a=this.width,u=this.height;this.gameSize.resize(t,i),this.baseSize.resize(t,i),o&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(t*n,i*n),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var d=this.canvas.style,f=t*n,p=i*n;return o&&(f=Math.floor(f),p=Math.floor(p)),f===t&&p===i||(d.width=f+"px",d.height=p+"px"),this.refresh(a,u)},setZoom:function(t){return this.zoom=t,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(t,i){void 0===t&&(t=this.width),void 0===i&&(i=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var n=this.game.domContainer;if(n){this.baseSize.setCSS(n);var o=this.canvas.style,a=n.style;a.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",a.marginLeft=o.marginLeft,a.marginTop=o.marginTop}return this.emit(d.RESIZE,this.gameSize,this.baseSize,this.displaySize,t,i),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var t=S(this.width,this.height);t!==this.orientation&&(this.orientation=t,this.emit(d.ORIENTATION_CHANGE,t))}},updateScale:function(){var t,i,n=this.canvas.style,a=this.gameSize.width,u=this.gameSize.height,d=this.zoom,f=this.autoRound;this.scaleMode===o.SCALE_MODE.NONE?(this.displaySize.setSize(a*d,u*d),t=this.displaySize.width,i=this.displaySize.height,f&&(t=Math.floor(t),i=Math.floor(i)),this._resetZoom&&(n.width=t+"px",n.height=i+"px",this._resetZoom=!1)):this.scaleMode===o.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),t=this.displaySize.width,i=this.displaySize.height,f&&(t=Math.floor(t),i=Math.floor(i)),this.canvas.width=t,this.canvas.height=i):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),t=this.displaySize.width,i=this.displaySize.height,f&&(t=Math.floor(t),i=Math.floor(i)),n.width=t+"px",n.height=i+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var t=R(this.parentSize.width,this.gameSize.width,0,!0),i=R(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(t,i),1)},updateCenter:function(){var t=this.autoCenter;if(t!==o.CENTER.NO_CENTER){var i=this.canvas,n=i.style,a=i.getBoundingClientRect(),u=a.width,d=a.height,f=Math.floor((this.parentSize.width-u)/2),p=Math.floor((this.parentSize.height-d)/2);t===o.CENTER.CENTER_HORIZONTALLY?p=0:t===o.CENTER.CENTER_VERTICALLY&&(f=0),n.marginLeft=f+"px",n.marginTop=p+"px"}},updateBounds:function(){var t=this.canvasBounds,i=this.canvas.getBoundingClientRect();t.x=i.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),t.y=i.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),t.width=i.width,t.height=i.height},transformX:function(t){return(t-this.canvasBounds.left)*this.displayScale.x},transformY:function(t){return(t-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(t){void 0===t&&(t={navigationUI:"hide"});var i=this.fullscreen;if(i.available){if(!i.active){var n=this.getFullscreenTarget();i.keyboard?n[i.request](Element.ALLOW_KEYBOARD_INPUT):n[i.request](t)}}else this.emit(d.FULLSCREEN_UNSUPPORTED)},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(d.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(t){this.removeFullscreenTarget(),this.emit(d.FULLSCREEN_FAILED,t)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var t=document.createElement("div");t.style.margin="0",t.style.padding="0",t.style.width="100%",t.style.height="100%",this.fullscreenTarget=t,this._createdFullscreenTarget=!0}return this._createdFullscreenTarget&&(this.canvas.parentNode.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)),this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var t=this.fullscreenTarget;if(t&&t.parentNode){var i=t.parentNode;i.insertBefore(this.canvas,t),i.removeChild(t)}}},stopFullscreen:function(){var t=this.fullscreen;if(!t.available)return this.emit(d.FULLSCREEN_UNSUPPORTED),!1;t.active&&document[t.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(d.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(t){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(t)},startListeners:function(){var t=this,i=this.listeners;i.orientationChange=function(){t.updateBounds(),t._checkOrientation=!0,t.dirty=!0},i.windowResize=function(){t.updateBounds(),t.dirty=!0},window.addEventListener("orientationchange",i.orientationChange,!1),window.addEventListener("resize",i.windowResize,!1),this.fullscreen.available&&(i.fullScreenChange=function(i){return t.onFullScreenChange(i)},i.fullScreenError=function(i){return t.onFullScreenError(i)},["webkit","moz",""].forEach((function(t){document.addEventListener(t+"fullscreenchange",i.fullScreenChange,!1),document.addEventListener(t+"fullscreenerror",i.fullScreenError,!1)})),document.addEventListener("MSFullscreenChange",i.fullScreenChange,!1),document.addEventListener("MSFullscreenError",i.fullScreenError,!1))},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(t,i){this.parent&&(this._lastCheck+=i,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var t=this.listeners;window.removeEventListener("orientationchange",t.orientationChange,!1),window.removeEventListener("resize",t.windowResize,!1),["webkit","moz",""].forEach((function(i){document.removeEventListener(i+"fullscreenchange",t.fullScreenChange,!1),document.removeEventListener(i+"fullscreenerror",t.fullScreenError,!1)})),document.removeEventListener("MSFullscreenChange",t.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",t.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===o.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===o.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});t.exports=B},function(t,i,n){var o=n(18),a=n(0),u=n(76),d=n(3),f=new a({initialize:function Size2(t,i,n,o){void 0===t&&(t=0),void 0===i&&(i=t),void 0===n&&(n=0),void 0===o&&(o=null),this._width=t,this._height=i,this._parent=o,this.aspectMode=n,this.aspectRatio=0===i?1:t/i,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new d},setAspectMode:function(t){return void 0===t&&(t=0),this.aspectMode=t,this.setSize(this._width,this._height)},setSnap:function(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.snapTo.set(t,i),this.setSize(this._width,this._height)},setParent:function(t){return this._parent=t,this.setSize(this._width,this._height)},setMin:function(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.minWidth=o(t,0,this.maxWidth),this.minHeight=o(i,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(t,i){return void 0===t&&(t=Number.MAX_VALUE),void 0===i&&(i=t),this.maxWidth=o(t,this.minWidth,Number.MAX_VALUE),this.maxHeight=o(i,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(t,i){switch(void 0===t&&(t=0),void 0===i&&(i=t),this.aspectMode){case f.NONE:this._width=this.getNewWidth(u(t,this.snapTo.x)),this._height=this.getNewHeight(u(i,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height;break;case f.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(u(t,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case f.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(u(i,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case f.FIT:this.constrain(t,i,!0);break;case f.ENVELOP:this.constrain(t,i,!1)}return this},setAspectRatio:function(t){return this.aspectRatio=t,this.setSize(this._width,this._height)},resize:function(t,i){return this._width=this.getNewWidth(u(t,this.snapTo.x)),this._height=this.getNewHeight(u(i,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height,this},getNewWidth:function(t,i){return void 0===i&&(i=!0),t=o(t,this.minWidth,this.maxWidth),i&&this._parent&&t>this._parent.width&&(t=Math.max(this.minWidth,this._parent.width)),t},getNewHeight:function(t,i){return void 0===i&&(i=!0),t=o(t,this.minHeight,this.maxHeight),i&&this._parent&&t>this._parent.height&&(t=Math.max(this.minHeight,this._parent.height)),t},constrain:function(t,i,n){void 0===t&&(t=0),void 0===i&&(i=t),void 0===n&&(n=!0),t=this.getNewWidth(t),i=this.getNewHeight(i);var o=this.snapTo,a=0===i?1:t/i;return n&&this.aspectRatio>a||!n&&this.aspectRatio<a?(i=(t=u(t,o.x))/this.aspectRatio,o.y>0&&(t=(i=u(i,o.y))*this.aspectRatio)):(n&&this.aspectRatio<a||!n&&this.aspectRatio>a)&&(t=(i=u(i,o.y))*this.aspectRatio,o.x>0&&(i=(t=u(t,o.x))*(1/this.aspectRatio))),this._width=t,this._height=i,this},fitTo:function(t,i){return this.constrain(t,i,!0)},envelop:function(t,i){return this.constrain(t,i,!1)},setWidth:function(t){return this.setSize(t,this._height)},setHeight:function(t){return this.setSize(this._width,t)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(t){t&&t.style&&(t.style.width=this._width+"px",t.style.height=this._height+"px")},copy:function(t){return t.setAspectMode(this.aspectMode),t.aspectRatio=this.aspectRatio,t.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(t){this.setSize(t,this._height)}},height:{get:function(){return this._height},set:function(t){this.setSize(this._width,t)}}});f.NONE=0,f.WIDTH_CONTROLS_HEIGHT=1,f.HEIGHT_CONTROLS_WIDTH=2,f.FIT=3,f.ENVELOP=4,t.exports=f},function(t,i,n){var o=n(0),a=n(144),u=n(20),d=n(22),f=n(6),p=n(95),b=n(1),S=n(418),M=n(204),C=new o({initialize:function SceneManager2(t,i){if(this.game=t,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,i){Array.isArray(i)||(i=[i]);for(var n=0;n<i.length;n++)this._pending.push({key:"default",scene:i[n],autoStart:0===n,data:{}})}t.events.once(d.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var t,i,n,o;for(t=0;t<this._pending.length;t++){var a;n=(i=this._pending[t]).key,(o=i.scene)instanceof S?a=this.createSceneFromInstance(n,o):"object"==typeof o?a=this.createSceneFromObject(n,o):"function"==typeof o&&(a=this.createSceneFromFunction(n,o)),n=a.sys.settings.key,this.keys[n]=a,this.scenes.push(a),this._data[n]&&(a.sys.settings.data=this._data[n].data,this._data[n].autoStart&&(i.autoStart=!0)),(i.autoStart||a.sys.settings.active)&&this._start.push(n)}for(this._pending.length=0,this._data={},this.isBooted=!0,t=0;t<this._start.length;t++)i=this._start[t],this.start(i);this._start.length=0}},processQueue:function(){var t=this._pending.length,i=this._queue.length;if(0!==t||0!==i){var n,o;if(t){for(n=0;n<t;n++)o=this._pending[n],this.add(o.key,o.scene,o.autoStart,o.data);for(n=0;n<this._start.length;n++)o=this._start[n],this.start(o);return this._start.length=0,void(this._pending.length=0)}for(n=0;n<this._queue.length;n++)this[(o=this._queue[n]).op](o.keyA,o.keyB);this._queue.length=0}},add:function(t,i,n,o){return void 0===n&&(n=!1),void 0===o&&(o={}),this.isProcessing||!this.isBooted?(this._pending.push({key:t,scene:i,autoStart:n,data:o}),this.isBooted||(this._data[t]={data:o}),null):(t=this.getKey(t,i),i instanceof S?a=this.createSceneFromInstance(t,i):"object"==typeof i?(i.key=t,a=this.createSceneFromObject(t,i)):"function"==typeof i&&(a=this.createSceneFromFunction(t,i)),a.sys.settings.data=o,t=a.sys.settings.key,this.keys[t]=a,this.scenes.push(a),(n||a.sys.settings.active)&&(this._pending.length?this._start.push(t):this.start(t)),a);var a},remove:function(t){if(this.isProcessing)this._queue.push({op:"remove",keyA:t,keyB:null});else{var i=this.getScene(t);if(!i||i.sys.isTransitioning())return this;var n=this.scenes.indexOf(i),o=i.sys.settings.key;n>-1&&(delete this.keys[o],this.scenes.splice(n,1),this._start.indexOf(o)>-1&&(n=this._start.indexOf(o),this._start.splice(n,1)),i.sys.destroy())}return this},bootScene:function(t){var i,n=t.sys,o=n.settings;n.sceneUpdate=b,t.init&&(t.init.call(t,o.data),o.status=a.INIT,o.isTransition&&n.events.emit(u.TRANSITION_INIT,o.transitionFrom,o.transitionDuration)),n.load&&(i=n.load).reset(),i&&t.preload?(t.preload.call(t),0===i.list.size?this.create(t):(o.status=a.LOADING,i.once(p.COMPLETE,this.loadComplete,this),i.start())):this.create(t)},loadComplete:function(t){this.create(t.scene)},payloadComplete:function(t){this.bootScene(t.scene)},update:function(t,i){this.processQueue(),this.isProcessing=!0;for(var n=this.scenes.length-1;n>=0;n--){var o=this.scenes[n].sys;o.settings.status>a.START&&o.settings.status<=a.RUNNING&&o.step(t,i)}},render:function(t){for(var i=0;i<this.scenes.length;i++){var n=this.scenes[i].sys;n.settings.visible&&n.settings.status>=a.LOADING&&n.settings.status<a.SLEEPING&&n.render(t)}this.isProcessing=!1},create:function(t){var i=t.sys,n=i.settings;t.create&&(n.status=a.CREATING,t.create.call(t,n.data),n.status===a.DESTROYED)||(n.isTransition&&i.events.emit(u.TRANSITION_START,n.transitionFrom,n.transitionDuration),t.update&&(i.sceneUpdate=t.update),n.status=a.RUNNING,i.events.emit(u.CREATE,t))},createSceneFromFunction:function(t,i){var n=new i;if(n instanceof S){var o=n.sys.settings.key;if(""!==o&&(t=o),this.keys.hasOwnProperty(t))throw new Error("Cannot add a Scene with duplicate key: "+t);return this.createSceneFromInstance(t,n)}return n.sys=new M(n),n.sys.settings.key=t,n.sys.init(this.game),n},createSceneFromInstance:function(t,i){return""===i.sys.settings.key&&(i.sys.settings.key=t),i.sys.init(this.game),i},createSceneFromObject:function(t,i){var n=new S(i),o=n.sys.settings.key;""!==o?t=o:n.sys.settings.key=t,n.sys.init(this.game);for(var a=["init","preload","create","update","render"],u=0;u<a.length;u++){var d=f(i,a[u],null);d&&(n[a[u]]=d)}if(i.hasOwnProperty("extend"))for(var p in i.extend)if(i.extend.hasOwnProperty(p)){var b=i.extend[p];"data"===p&&n.hasOwnProperty("data")&&"object"==typeof b?n.data.merge(b):"sys"!==p&&(n[p]=b)}return n},getKey:function(t,i){if(t||(t="default"),"function"==typeof i)return t;if(i instanceof S?t=i.sys.settings.key:"object"==typeof i&&i.hasOwnProperty("key")&&(t=i.key),this.keys.hasOwnProperty(t))throw new Error("Cannot add a Scene with duplicate key: "+t);return t},getScenes:function(t,i){void 0===t&&(t=!0),void 0===i&&(i=!1);for(var n=[],o=this.scenes,a=0;a<o.length;a++){var u=o[a];u&&(!t||t&&u.sys.isActive())&&n.push(u)}return i?n.reverse():n},getScene:function(t){if("string"==typeof t){if(this.keys[t])return this.keys[t]}else for(var i=0;i<this.scenes.length;i++)if(t===this.scenes[i])return t;return null},isActive:function(t){var i=this.getScene(t);return i?i.sys.isActive():null},isPaused:function(t){var i=this.getScene(t);return i?i.sys.isPaused():null},isVisible:function(t){var i=this.getScene(t);return i?i.sys.isVisible():null},isSleeping:function(t){var i=this.getScene(t);return i?i.sys.isSleeping():null},pause:function(t,i){var n=this.getScene(t);return n&&n.sys.pause(i),this},resume:function(t,i){var n=this.getScene(t);return n&&n.sys.resume(i),this},sleep:function(t,i){var n=this.getScene(t);return n&&!n.sys.isTransitioning()&&n.sys.sleep(i),this},wake:function(t,i){var n=this.getScene(t);return n&&n.sys.wake(i),this},run:function(t,i){var n=this.getScene(t);if(!n){for(var o=0;o<this._pending.length;o++)if(this._pending[o].key===t){this.queueOp("start",t,i);break}return this}n.sys.isSleeping()?n.sys.wake(i):n.sys.isPaused()?n.sys.resume(i):this.start(t,i)},start:function(t,i){if(!this.isBooted)return this._data[t]={autoStart:!0,data:i},this;var n=this.getScene(t);if(n){var o,u=n.sys;if(u.isActive()||u.isPaused())u.shutdown(),u.sceneUpdate=b,u.start(i);else if(u.sceneUpdate=b,u.start(i),u.load&&(o=u.load),o&&u.settings.hasOwnProperty("pack")&&(o.reset(),o.addPack({payload:u.settings.pack})))return u.settings.status=a.LOADING,o.once(p.COMPLETE,this.payloadComplete,this),o.start(),this;this.bootScene(n)}return this},stop:function(t,i){var n=this.getScene(t);return n&&!n.sys.isTransitioning()&&n.sys.shutdown(i),this},switch:function(t,i){var n=this.getScene(t),o=this.getScene(i);return n&&o&&n!==o&&(this.sleep(t),this.isSleeping(i)?this.wake(i):this.start(i)),this},getAt:function(t){return this.scenes[t]},getIndex:function(t){var i=this.getScene(t);return this.scenes.indexOf(i)},bringToTop:function(t){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:t,keyB:null});else{var i=this.getIndex(t);if(-1!==i&&i<this.scenes.length){var n=this.getScene(t);this.scenes.splice(i,1),this.scenes.push(n)}}return this},sendToBack:function(t){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:t,keyB:null});else{var i=this.getIndex(t);if(-1!==i&&i>0){var n=this.getScene(t);this.scenes.splice(i,1),this.scenes.unshift(n)}}return this},moveDown:function(t){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:t,keyB:null});else{var i=this.getIndex(t);if(i>0){var n=i-1,o=this.getScene(t),a=this.getAt(n);this.scenes[i]=a,this.scenes[n]=o}}return this},moveUp:function(t){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:t,keyB:null});else{var i=this.getIndex(t);if(i<this.scenes.length-1){var n=i+1,o=this.getScene(t),a=this.getAt(n);this.scenes[i]=a,this.scenes[n]=o}}return this},moveAbove:function(t,i){if(t===i)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:t,keyB:i});else{var n=this.getIndex(t),o=this.getIndex(i);if(-1!==n&&-1!==o){var a=this.getAt(o);this.scenes.splice(o,1),this.scenes.splice(n+1,0,a)}}return this},moveBelow:function(t,i){if(t===i)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:t,keyB:i});else{var n=this.getIndex(t),o=this.getIndex(i);if(-1!==n&&-1!==o){var a=this.getAt(o);this.scenes.splice(o,1),0===n?this.scenes.unshift(a):this.scenes.splice(n,0,a)}}return this},queueOp:function(t,i,n){return this._queue.push({op:t,keyA:i,keyB:n}),this},swapPosition:function(t,i){if(t===i)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:t,keyB:i});else{var n=this.getIndex(t),o=this.getIndex(i);if(n!==o&&-1!==n&&-1!==o){var a=this.getAt(n);this.scenes[n]=this.scenes[o],this.scenes[o]=a}}return this},dump:function(){for(var t=[],i=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],n=0;n<this.scenes.length;n++){var o=this.scenes[n].sys,u=!o.settings.visible||o.settings.status!==a.RUNNING&&o.settings.status!==a.PAUSED?"[-] ":"[*] ";u+=o.settings.key+" ("+i[o.settings.status]+")",t.push(u)}console.log(t.join("\n"))},destroy:function(){for(var t=0;t<this.scenes.length;t++)this.scenes[t].sys.destroy();this.update=b,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});t.exports=C},function(t,i,n){var o=n(0),a=n(204),u=new o({initialize:function Scene2(t){this.sys=new a(this,t),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});t.exports=u},function(t,i,n){var o=n(2),a=n(205);t.exports=function(t){var i=t.game.config.defaultPhysicsSystem,n=o(t.settings,"physics",!1);if(i||n){var u=[];if(i&&u.push(a(i+"Physics")),n)for(var d in n)d=a(d.concat("Physics")),-1===u.indexOf(d)&&u.push(d);return u}}},function(t,i,n){var o=n(2);t.exports=function(t){var i=t.plugins.getDefaultScenePlugins(),n=o(t.settings,"plugins",!1);return Array.isArray(n)?n:i||[]}},function(t,i,n){var o=n(144),a=n(6),u=n(127),d=n(978),f={create:function(t){return"string"==typeof t?t={key:t}:void 0===t&&(t={}),{status:o.PENDING,key:a(t,"key",""),active:a(t,"active",!1),visible:a(t,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:a(t,"pack",!1),cameras:a(t,"cameras",null),map:a(t,"map",u(d,a(t,"mapAdd",{}))),physics:a(t,"physics",{}),loader:a(t,"loader",{}),plugins:a(t,"plugins",!1),input:a(t,"input",{})}}};t.exports=f},function(t,i,n){var o=n(31),a=n(423),u=n(0),d=n(38),f=n(33),p=n(9),b=n(106),S=n(22),M=n(388),C=n(6),P=n(425),R=n(206),O=new u({Extends:p,initialize:function TextureManager2(t){p.call(this),this.game=t,this.name="TextureManager",this.list={},this._tempCanvas=o.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,t.events.once(S.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(b.LOAD,this.updatePending,this),this.on(b.ERROR,this.updatePending,this);var t=this.game.config;this.addBase64("__DEFAULT",t.defaultImage),this.addBase64("__MISSING",t.missingImage),this.addBase64("__WHITE",t.whiteImage),this.game.events.once(S.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,0===this._pending&&(this.off(b.LOAD),this.off(b.ERROR),this.emit(b.READY))},checkKey:function(t){return!this.exists(t)||(console.error("Texture key already in use: "+t),!1)},remove:function(t){if("string"==typeof t){if(!this.exists(t))return console.warn("No texture found matching key: "+t),this;t=this.get(t)}return this.list.hasOwnProperty(t.key)&&(t.destroy(),this.emit(b.REMOVE,t.key)),this},removeKey:function(t){return this.list.hasOwnProperty(t)&&delete this.list[t],this},addBase64:function(t,i){if(this.checkKey(t)){var n=this,o=new Image;o.onerror=function(){n.emit(b.ERROR,t)},o.onload=function(){var i=n.create(t,o);P.Image(i,0),n.emit(b.ADD,t,i),n.emit(b.LOAD,t,i)},o.src=i}return this},getBase64:function(t,i,n,a){void 0===n&&(n="image/png"),void 0===a&&(a=.92);var u="",d=this.getFrame(t,i);if(d&&(d.source.isRenderTexture||d.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(d){var f=d.canvasData,p=o.create2D(this,f.width,f.height);p.getContext("2d").drawImage(d.source.image,f.x,f.y,f.width,f.height,0,0,f.width,f.height),u=p.toDataURL(n,a),o.remove(p)}return u},addImage:function(t,i,n){var o=null;return this.checkKey(t)&&(o=this.create(t,i),P.Image(o,0),n&&o.setDataSource(n),this.emit(b.ADD,t,o)),o},addGLTexture:function(t,i,n,o){var a=null;return this.checkKey(t)&&(void 0===n&&(n=i.width),void 0===o&&(o=i.height),(a=this.create(t,i,n,o)).add("__BASE",0,0,0,n,o),this.emit(b.ADD,t,a)),a},addRenderTexture:function(t,i){var n=null;return this.checkKey(t)&&((n=this.create(t,i)).add("__BASE",0,0,0,i.width,i.height),this.emit(b.ADD,t,n)),n},generate:function(t,i){if(this.checkKey(t)){var n=o.create(this,1,1);return i.canvas=n,M(i),this.addCanvas(t,n)}return null},createCanvas:function(t,i,n){if(void 0===i&&(i=256),void 0===n&&(n=256),this.checkKey(t)){var a=o.create(this,i,n,f.CANVAS,!0);return this.addCanvas(t,a)}return null},addCanvas:function(t,i,n){void 0===n&&(n=!1);var o=null;return n?o=new a(this,t,i,i.width,i.height):this.checkKey(t)&&(o=new a(this,t,i,i.width,i.height),this.list[t]=o,this.emit(b.ADD,t,o)),o},addAtlas:function(t,i,n,o){return Array.isArray(n.textures)||Array.isArray(n.frames)?this.addAtlasJSONArray(t,i,n,o):this.addAtlasJSONHash(t,i,n,o)},addAtlasJSONArray:function(t,i,n,o){var a=null;if(this.checkKey(t)){if(a=this.create(t,i),Array.isArray(n))for(var u=1===n.length,d=0;d<a.source.length;d++){var f=u?n[0]:n[d];P.JSONArray(a,d,f)}else P.JSONArray(a,0,n);o&&a.setDataSource(o),this.emit(b.ADD,t,a)}return a},addAtlasJSONHash:function(t,i,n,o){var a=null;if(this.checkKey(t)){if(a=this.create(t,i),Array.isArray(n))for(var u=0;u<n.length;u++)P.JSONHash(a,u,n[u]);else P.JSONHash(a,0,n);o&&a.setDataSource(o),this.emit(b.ADD,t,a)}return a},addAtlasXML:function(t,i,n,o){var a=null;return this.checkKey(t)&&(a=this.create(t,i),P.AtlasXML(a,0,n),o&&a.setDataSource(o),this.emit(b.ADD,t,a)),a},addUnityAtlas:function(t,i,n,o){var a=null;return this.checkKey(t)&&(a=this.create(t,i),P.UnityYAML(a,0,n),o&&a.setDataSource(o),this.emit(b.ADD,t,a)),a},addSpriteSheet:function(t,i,n){var o=null;if(this.checkKey(t)){var a=(o=this.create(t,i)).source[0].width,u=o.source[0].height;P.SpriteSheet(o,0,0,0,a,u,n),this.emit(b.ADD,t,o)}return o},addSpriteSheetFromAtlas:function(t,i){if(!this.checkKey(t))return null;var n=C(i,"atlas",null),o=C(i,"frame",null);if(n&&o){var a=this.get(n).get(o);if(a){var u=this.create(t,a.source.image);return a.trimmed?P.SpriteSheetFromAtlas(u,a,i):P.SpriteSheet(u,0,a.cutX,a.cutY,a.cutWidth,a.cutHeight,i),this.emit(b.ADD,t,u),u}}},create:function(t,i,n,o){var a=null;return this.checkKey(t)&&(a=new R(this,t,i,n,o),this.list[t]=a),a},exists:function(t){return this.list.hasOwnProperty(t)},get:function(t){return void 0===t&&(t="__DEFAULT"),this.list[t]?this.list[t]:t instanceof R?t:this.list.__MISSING},cloneFrame:function(t,i){if(this.list[t])return this.list[t].get(i).clone()},getFrame:function(t,i){if(this.list[t])return this.list[t].get(i)},getTextureKeys:function(){var t=[];for(var i in this.list)"__DEFAULT"!==i&&"__MISSING"!==i&&t.push(i);return t},getPixel:function(t,i,n,o){var a=this.getFrame(n,o);if(a){t-=a.x,i-=a.y;var u=a.data.cut;if(t+=u.x,i+=u.y,t>=u.x&&t<u.r&&i>=u.y&&i<u.b){var f=this._tempContext;f.clearRect(0,0,1,1),f.drawImage(a.source.image,t,i,1,1,0,0,1,1);var p=f.getImageData(0,0,1,1);return new d(p.data[0],p.data[1],p.data[2],p.data[3])}}return null},getPixelAlpha:function(t,i,n,o){var a=this.getFrame(n,o);if(a){t-=a.x,i-=a.y;var u=a.data.cut;if(t+=u.x,i+=u.y,t>=u.x&&t<u.r&&i>=u.y&&i<u.b){var d=this._tempContext;return d.clearRect(0,0,1,1),d.drawImage(a.source.image,t,i,1,1,0,0,1,1),d.getImageData(0,0,1,1).data[3]}}return null},setTexture:function(t,i,n){return this.list[i]&&(t.texture=this.list[i],t.frame=t.texture.get(n)),t},renameTexture:function(t,i){var n=this.get(t);return!(!n||t===i||(n.key=i,this.list[i]=n,delete this.list[t],0))},each:function(t,i){for(var n=[null],o=1;o<arguments.length;o++)n.push(arguments[o]);for(var a in this.list)n[0]=this.list[a],t.apply(i,n)},destroy:function(){for(var t in this.list)this.list[t].destroy();this.list={},this.game=null,o.remove(this._tempCanvas)}});t.exports=O},function(t,i,n){var o=n(0),a=n(18),u=n(38),d=n(33),f=n(138),p=n(206),b=new o({Extends:p,initialize:function CanvasTexture2(t,i,n,o,a){p.call(this,t,i,n,o,a),this.add("__BASE",0,0,0,o,a),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=o,this.height=a,this.imageData=this.context.getImageData(0,0,o,a),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===d.WEBGL&&this.refresh(),this},draw:function(t,i,n){return this.context.drawImage(n,t,i),this.update()},drawFrame:function(t,i,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var a=this.manager.getFrame(t,i);if(a){var u=a.canvasData,d=a.cutWidth,f=a.cutHeight,p=a.source.resolution;return this.context.drawImage(a.source.image,u.x,u.y,d,f,n,o,d/p,f/p),this.update()}return this},setPixel:function(t,i,n,o,a,u){if(void 0===u&&(u=255),t=Math.abs(Math.floor(t)),i=Math.abs(Math.floor(i)),this.getIndex(t,i)>-1){var d=this.context.getImageData(t,i,1,1);d.data[0]=n,d.data[1]=o,d.data[2]=a,d.data[3]=u,this.context.putImageData(d,t,i)}return this},putData:function(t,i,n,o,a,u,d){return void 0===o&&(o=0),void 0===a&&(a=0),void 0===u&&(u=t.width),void 0===d&&(d=t.height),this.context.putImageData(t,i,n,o,a,u,d),this},getData:function(t,i,n,o){return t=a(Math.floor(t),0,this.width-1),i=a(Math.floor(i),0,this.height-1),n=a(n,1,this.width-t),o=a(o,1,this.height-i),this.context.getImageData(t,i,n,o)},getPixel:function(t,i,n){n||(n=new u);var o=this.getIndex(t,i);if(o>-1){var a=this.data,d=a[o+0],f=a[o+1],p=a[o+2],b=a[o+3];n.setTo(d,f,p,b)}return n},getPixels:function(t,i,n,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=this.width),void 0===o&&(o=n),t=Math.abs(Math.round(t)),i=Math.abs(Math.round(i));for(var d=a(t,0,this.width),f=a(t+n,0,this.width),p=a(i,0,this.height),b=a(i+o,0,this.height),S=new u,M=[],C=p;C<b;C++){for(var P=[],R=d;R<f;R++)S=this.getPixel(R,C,S),P.push({x:R,y:C,color:S.color,alpha:S.alphaGL});M.push(P)}return M},getIndex:function(t,i){return t=Math.abs(Math.round(t)),i=Math.abs(Math.round(i)),t<this.width&&i<this.height?4*(t+i*this.width):-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(t,i,n,o){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=this.width),void 0===o&&(o=this.height),this.context.clearRect(t,i,n,o),this.update()},setSize:function(t,i){return void 0===i&&(i=t),t===this.width&&i===this.height||(this.canvas.width=t,this.canvas.height=i,this._source.width=t,this._source.height=i,this._source.isPowerOf2=f(t,i),this.frames.__BASE.setSize(t,i,0,0),this.width=t,this.height=i,this.refresh()),this},destroy:function(){p.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});t.exports=b},function(t,i,n){var o=n(31),a=n(0),u=n(138),d=n(168),f=new a({initialize:function TextureSource2(t,i,n,o,a){void 0===a&&(a=!1);var f=t.manager.game;this.renderer=f.renderer,this.texture=t,this.source=i,this.image=i,this.compressionAlgorithm=null,this.resolution=1,this.width=n||i.naturalWidth||i.videoWidth||i.width||0,this.height=o||i.naturalHeight||i.videoHeight||i.height||0,this.scaleMode=d.DEFAULT,this.isCanvas=i instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&i instanceof HTMLVideoElement,this.isRenderTexture="RenderTexture"===i.type,this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&i instanceof WebGLTexture,this.isPowerOf2=u(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=a,this.init(f)},init:function(t){var i=this.renderer;i&&(i.gl?this.isCanvas?this.glTexture=i.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=i.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=i.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=i.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),t.config.antialias||this.setFilter(1)},setFilter:function(t){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,t),this.scaleMode=t},setFlipY:function(t){return void 0===t&&(t=!0),this.flipY=t,this},update:function(){var t=this.renderer.gl;t&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):t&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&o.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});t.exports=f},function(t,i,n){t.exports={AtlasXML:n(979),Canvas:n(980),Image:n(981),JSONArray:n(982),JSONHash:n(983),SpriteSheet:n(984),SpriteSheetFromAtlas:n(985),UnityYAML:n(986)}},function(t,i,n){var o=n(427),a=n(430),u=n(432),d={create:function(t){var i=t.config.audio,n=t.device.audio;return i.noAudio||!n.webAudio&&!n.audioData?new a(t):n.webAudio&&!i.disableWebAudio?new u(t):new o(t)}};t.exports=d},function(t,i,n){var o=n(145),a=n(0),u=n(70),d=n(429),f=new a({Extends:o,initialize:function HTML5AudioSoundManager2(t){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,o.call(this,t)},add:function(t,i){var n=new d(this,t,i);return this.sounds.push(n),n},unlock:function(){this.locked=!1;var t=this;if(this.game.cache.audio.entries.each((function(i,n){for(var o=0;o<n.length;o++)if("true"===n[o].dataset.locked)return t.locked=!0,!1;return!0})),this.locked){var i=!1,detectMove=function(){i=!0},unlock=function(){if(i)i=!1;else{document.body.removeEventListener("touchmove",detectMove),document.body.removeEventListener("touchend",unlock);var n=[];if(t.game.cache.audio.entries.each((function(t,i){for(var o=0;o<i.length;o++){var a=i[o];"true"===a.dataset.locked&&n.push(a)}return!0})),0!==n.length){var o=n[n.length-1];o.oncanplaythrough=function(){o.oncanplaythrough=null,n.forEach((function(t){t.dataset.locked="false"})),t.unlocked=!0},n.forEach((function(t){t.load()}))}}};this.once(u.UNLOCKED,(function(){for(this.forEachActiveSound((function(t){null===t.currentMarker&&0===t.duration&&(t.duration=t.tags[0].duration),t.totalDuration=t.tags[0].duration}));this.lockedActionsQueue.length;){var t=this.lockedActionsQueue.shift();t.sound[t.prop].apply?t.sound[t.prop].apply(t.sound,t.value||[]):t.sound[t.prop]=t.value}}),this),document.body.addEventListener("touchmove",detectMove,!1),document.body.addEventListener("touchend",unlock,!1)}},onBlur:function(){this.forEachActiveSound((function(t){t.isPlaying&&(this.onBlurPausedSounds.push(t),t.onBlur())}))},onFocus:function(){this.onBlurPausedSounds.forEach((function(t){t.onFocus()})),this.onBlurPausedSounds.length=0},destroy:function(){o.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(t,i,n){return"true"===t.tags[0].dataset.locked&&(this.lockedActionsQueue.push({sound:t,prop:i,value:n}),!0)},setMute:function(t){return this.mute=t,this},mute:{get:function(){return this._mute},set:function(t){this._mute=t,this.forEachActiveSound((function(t){t.updateMute()})),this.emit(u.GLOBAL_MUTE,this,t)}},setVolume:function(t){return this.volume=t,this},volume:{get:function(){return this._volume},set:function(t){this._volume=t,this.forEachActiveSound((function(t){t.updateVolume()})),this.emit(u.GLOBAL_VOLUME,this,t)}}});t.exports=f},function(t,i,n){var o=n(78);t.exports=function(t,i,n,a,u){if(void 0===a&&(a=0),void 0===u&&(u=t.length),o(t,a,u))for(var d=a;d<u;d++){var f=t[d];if(!i||i&&void 0===n&&f.hasOwnProperty(i)||i&&void 0!==n&&f[i]===n)return f}return null}},function(t,i,n){var o=n(146),a=n(0),u=n(70),d=n(18),f=new a({Extends:o,initialize:function HTML5AudioSound2(t,i,n){if(void 0===n&&(n={}),this.tags=t.game.cache.audio.get(i),!this.tags)throw new Error('There is no audio asset with key "'+i+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,o.call(this,t,i,n)},play:function(t,i){return!(this.manager.isLocked(this,"play",[t,i])||!o.prototype.play.call(this,t,i)||!this.pickAndPlayAudioTag()||(this.emit(u.PLAY,this),0))},pause:function(){return!(this.manager.isLocked(this,"pause")||this.startTime>0||!o.prototype.pause.call(this)||(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(u.PAUSE,this),0))},resume:function(){return!(this.manager.isLocked(this,"resume")||this.startTime>0||!o.prototype.resume.call(this)||!this.pickAndPlayAudioTag()||(this.emit(u.RESUME,this),0))},stop:function(){return!this.manager.isLocked(this,"stop")&&!!o.prototype.stop.call(this)&&(this.stopAndReleaseAudioTag(),this.emit(u.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var t=this.currentConfig.seek,i=this.currentConfig.delay,n=(this.currentMarker?this.currentMarker.start:0)+t;return this.previousTime=n,this.audio.currentTime=n,this.applyConfig(),0===i?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+1e3*i,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var t=0;t<this.tags.length;t++){var i=this.tags[t];if("false"===i.dataset.used)return i.dataset.used="true",this.audio=i,!0}if(!this.manager.override)return!1;var n=[];this.manager.forEachActiveSound((function(t){t.key===this.key&&t.audio&&n.push(t)}),this),n.sort((function(t,i){return t.loop===i.loop?i.seek/i.duration-t.seek/t.duration:t.loop?1:-1}));var o=n[0];return this.audio=o.audio,o.reset(),o.audio=null,o.startTime=0,o.previousTime=0,!0},playCatchPromise:function(){var t=this.audio.play();t&&t.catch((function(t){console.warn(t)}))},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){o.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(t){if(this.isPlaying)if(this.startTime>0)this.startTime<t-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,t-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());else{var i=this.currentMarker?this.currentMarker.start:0,n=i+this.duration,o=this.audio.currentTime;if(this.currentConfig.loop)o>=n-this.manager.loopEndOffset?(this.audio.currentTime=i+Math.max(0,o-n),o=this.audio.currentTime):o<i&&(this.audio.currentTime+=i,o=this.audio.currentTime),o<this.previousTime&&this.emit(u.LOOPED,this);else if(o>=n)return this.reset(),this.stopAndReleaseAudioTag(),void this.emit(u.COMPLETE,this);this.previousTime=o}},destroy:function(){o.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=d(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){o.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(t){this.currentConfig.mute=t,this.manager.isLocked(this,"mute",t)||(this.updateMute(),this.emit(u.MUTE,this,t))}},setMute:function(t){return this.mute=t,this},volume:{get:function(){return this.currentConfig.volume},set:function(t){this.currentConfig.volume=t,this.manager.isLocked(this,"volume",t)||(this.updateVolume(),this.emit(u.VOLUME,this,t))}},setVolume:function(t){return this.volume=t,this},rate:{get:function(){return this.currentConfig.rate},set:function(t){this.currentConfig.rate=t,this.manager.isLocked(this,u.RATE,t)||(this.calculateRate(),this.emit(u.RATE,this,t))}},setRate:function(t){return this.rate=t,this},detune:{get:function(){return this.currentConfig.detune},set:function(t){this.currentConfig.detune=t,this.manager.isLocked(this,u.DETUNE,t)||(this.calculateRate(),this.emit(u.DETUNE,this,t))}},setDetune:function(t){return this.detune=t,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(t){this.manager.isLocked(this,"seek",t)||this.startTime>0||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.isPlaying?(this.previousTime=t,this.audio.currentTime=t):this.isPaused&&(this.currentConfig.seek=t),this.emit(u.SEEK,this,t))}},setSeek:function(t){return this.seek=t,this},loop:{get:function(){return this.currentConfig.loop},set:function(t){this.currentConfig.loop=t,this.manager.isLocked(this,"loop",t)||(this.audio&&(this.audio.loop=t),this.emit(u.LOOP,this,t))}},setLoop:function(t){return this.loop=t,this},pan:{get:function(){return this.currentConfig.pan},set:function(t){this.currentConfig.pan=t,this.emit(u.PAN,this,t)}},setPan:function(t){return this.pan=t,this}});t.exports=f},function(t,i,n){var o=n(145),a=n(0),u=n(9),d=n(431),f=n(1),p=new a({Extends:u,initialize:function NoAudioSoundManager2(t){u.call(this),this.game=t,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(t,i){var n=new d(this,t,i);return this.sounds.push(n),n},addAudioSprite:function(t,i){var n=this.add(t,i);return n.spritemap={},n},play:function(t,i){return!1},playAudioSprite:function(t,i,n){return!1},remove:function(t){return o.prototype.remove.call(this,t)},removeByKey:function(t){return o.prototype.removeByKey.call(this,t)},pauseAll:f,resumeAll:f,stopAll:f,update:f,setRate:f,setDetune:f,setMute:f,setVolume:f,forEachActiveSound:function(t,i){o.prototype.forEachActiveSound.call(this,t,i)},destroy:function(){o.prototype.destroy.call(this)}});t.exports=p},function(t,i,n){var o=n(146),a=n(0),u=n(9),d=n(17),returnFalse=function(){return!1},returnThis=function(){return this},f=new a({Extends:u,initialize:function NoAudioSound2(t,i,n){void 0===n&&(n={}),u.call(this),this.manager=t,this.key=i,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=d({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},n),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:returnFalse,updateMarker:returnFalse,removeMarker:function(){return null},play:returnFalse,pause:returnFalse,resume:returnFalse,stop:returnFalse,destroy:function(){o.prototype.destroy.call(this)},setMute:returnThis,setVolume:returnThis,setRate:returnThis,setDetune:returnThis,setSeek:returnThis,setLoop:returnThis,setPan:returnThis});t.exports=f},function(t,i,n){var o=n(433),a=n(145),u=n(0),d=n(70),f=n(22),p=n(434),b=new u({Extends:a,initialize:function WebAudioSoundManager2(t){this.context=this.createAudioContext(t),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked="suspended"===this.context.state&&("ontouchstart"in window||"onclick"in window),a.call(this,t),this.locked&&t.isBooted?this.unlock():t.events.once(f.BOOT,this.unlock,this)},createAudioContext:function(t){var i=t.config.audio;return i.context?(i.context.resume(),i.context):window.hasOwnProperty("AudioContext")?new AudioContext:window.hasOwnProperty("webkitAudioContext")?new window.webkitAudioContext:void 0},setAudioContext:function(t){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=t,this.masterMuteNode=t.createGain(),this.masterVolumeNode=t.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(t.destination),this.destination=this.masterMuteNode,this},add:function(t,i){var n=new p(this,t,i);return this.sounds.push(n),n},decodeAudio:function(t,i){var n;n=Array.isArray(t)?t:[{key:t,data:i}];for(var a=this.game.cache.audio,u=n.length,f=0;f<n.length;f++){var p=n[f],b=p.key,S=p.data;"string"==typeof S&&(S=o(S));var M=function(t,i){a.add(t,i),this.emit(d.DECODED,t),0==--u&&this.emit(d.DECODED_ALL)}.bind(this,b),C=function(t,i){console.error("Error decoding audio: "+t+" - ",i?i.message:""),0==--u&&this.emit(d.DECODED_ALL)}.bind(this,b);this.context.decodeAudioData(S,M,C)}},unlock:function(){var t=this,i=document.body,n=function unlockHandler2(){if(t.context&&i){var n=i.removeEventListener;t.context.resume().then((function(){n("touchstart",unlockHandler2),n("touchend",unlockHandler2),n("click",unlockHandler2),n("keydown",unlockHandler2),t.unlocked=!0}),(function(){n("touchstart",unlockHandler2),n("touchend",unlockHandler2),n("click",unlockHandler2),n("keydown",unlockHandler2)}))}};i&&(i.addEventListener("touchstart",n,!1),i.addEventListener("touchend",n,!1),i.addEventListener("click",n,!1),i.addEventListener("keydown",n,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var t=this.context;"suspended"!==t.state&&"interrupted"!==t.state||this.locked||t.resume()},update:function(t,i){a.prototype.update.call(this,t,i);var n=this.context;n&&"interrupted"===n.state&&n.resume()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var t=this;this.context.close().then((function(){t.context=null}))}a.prototype.destroy.call(this)},setMute:function(t){return this.mute=t,this},mute:{get:function(){return 0===this.masterMuteNode.gain.value},set:function(t){this.masterMuteNode.gain.setValueAtTime(t?0:1,0),this.emit(d.GLOBAL_MUTE,this,t)}},setVolume:function(t){return this.volume=t,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(t){this.masterVolumeNode.gain.setValueAtTime(t,0),this.emit(d.GLOBAL_VOLUME,this,t)}}});t.exports=b},function(t,i){for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=new Uint8Array(256),a=0;a<n.length;a++)o[n.charCodeAt(a)]=a;t.exports=function(t){var i,n,a,u,d=(t=t.substr(t.indexOf(",")+1)).length,f=.75*d,p=0;"="===t[d-1]&&(f--,"="===t[d-2]&&f--);for(var b=new ArrayBuffer(f),S=new Uint8Array(b),M=0;M<d;M+=4)i=o[t.charCodeAt(M)],n=o[t.charCodeAt(M+1)],a=o[t.charCodeAt(M+2)],u=o[t.charCodeAt(M+3)],S[p++]=i<<2|n>>4,S[p++]=(15&n)<<4|a>>2,S[p++]=(3&a)<<6|63&u;return b}},function(t,i,n){var o=n(146),a=n(0),u=n(70),d=new a({Extends:o,initialize:function WebAudioSound2(t,i,n){if(void 0===n&&(n={}),this.audioBuffer=t.game.cache.audio.get(i),!this.audioBuffer)throw new Error('Audio key "'+i+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=t.context.createGain(),this.volumeNode=t.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),t.context.createStereoPanner?(this.pannerNode=t.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(t.destination)):this.volumeNode.connect(t.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,o.call(this,t,i,n)},play:function(t,i){return!!o.prototype.play.call(this,t,i)&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(u.PLAY,this),!0)},pause:function(){return!(this.manager.context.currentTime<this.startTime||!o.prototype.pause.call(this)||(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(u.PAUSE,this),0))},resume:function(){return!(this.manager.context.currentTime<this.startTime||!o.prototype.resume.call(this)||(this.createAndStartBufferSource(),this.emit(u.RESUME,this),0))},stop:function(){return!!o.prototype.stop.call(this)&&(this.stopAndRemoveBufferSource(),this.emit(u.STOP,this),!0)},createAndStartBufferSource:function(){var t=this.currentConfig.seek,i=this.currentConfig.delay,n=this.manager.context.currentTime+i,o=(this.currentMarker?this.currentMarker.start:0)+t,a=this.duration-t;this.playTime=n-t,this.startTime=n,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,n),Math.max(0,o),Math.max(0,a)),this.resetConfig()},createAndStartLoopBufferSource:function(){var t=this.getLoopTime(),i=this.currentMarker?this.currentMarker.start:0,n=this.duration;this.loopTime=t,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,t),Math.max(0,i),Math.max(0,n))},createBufferSource:function(){var t=this,i=this.manager.context.createBufferSource();return i.buffer=this.audioBuffer,i.connect(this.muteNode),i.onended=function(i){i.target===t.source&&(t.currentConfig.loop?t.hasLooped=!0:t.hasEnded=!0)},i},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),o.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,o.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(u.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(u.LOOPED,this))},destroy:function(){o.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){o.prototype.calculateRate.call(this);var t=this.manager.context.currentTime;this.source&&"number"==typeof this.totalRate&&this.source.playbackRate.setValueAtTime(this.totalRate,t),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,t)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var t=0,i=0;i<this.rateUpdates.length;i++)t+=((i<this.rateUpdates.length-1?this.rateUpdates[i+1].time:this.manager.context.currentTime-this.playTime)-this.rateUpdates[i].time)*this.rateUpdates[i].rate;return t},getLoopTime:function(){for(var t=0,i=0;i<this.rateUpdates.length-1;i++)t+=(this.rateUpdates[i+1].time-this.rateUpdates[i].time)*this.rateUpdates[i].rate;var n=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+n.time+(this.duration-t)/n.rate},rate:{get:function(){return this.currentConfig.rate},set:function(t){this.currentConfig.rate=t,this.calculateRate(),this.emit(u.RATE,this,t)}},setRate:function(t){return this.rate=t,this},detune:{get:function(){return this.currentConfig.detune},set:function(t){this.currentConfig.detune=t,this.calculateRate(),this.emit(u.DETUNE,this,t)}},setDetune:function(t){return this.detune=t,this},mute:{get:function(){return 0===this.muteNode.gain.value},set:function(t){this.currentConfig.mute=t,this.muteNode.gain.setValueAtTime(t?0:1,0),this.emit(u.MUTE,this,t)}},setMute:function(t){return this.mute=t,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(t){this.currentConfig.volume=t,this.volumeNode.gain.setValueAtTime(t,0),this.emit(u.VOLUME,this,t)}},setVolume:function(t){return this.volume=t,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(t){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.currentConfig.seek=t,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(u.SEEK,this,t))}},setSeek:function(t){return this.seek=t,this},loop:{get:function(){return this.currentConfig.loop},set:function(t){this.currentConfig.loop=t,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),t&&this.createAndStartLoopBufferSource()),this.emit(u.LOOP,this,t)}},setLoop:function(t){return this.loop=t,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(t){this.currentConfig.pan=t,this.pannerNode&&this.pannerNode.pan.setValueAtTime(t,this.manager.context.currentTime),this.emit(u.PAN,this,t)}},setPan:function(t){return this.pan=t,this}});t.exports=d},function(t,i){t.exports=function(t){for(var i=t.length,n=t[0].length,o=new Array(n),a=0;a<n;a++){o[a]=new Array(i);for(var u=i-1;u>-1;u--)o[a][u]=t[u][a]}return o}},function(t,i){function swap(t,i,n){var o=t[i];t[i]=t[n],t[n]=o}function defaultCompare(t,i){return t<i?-1:t>i?1:0}var QuickSelect=function(t,i,n,o,a){for(void 0===n&&(n=0),void 0===o&&(o=t.length-1),void 0===a&&(a=defaultCompare);o>n;){if(o-n>600){var u=o-n+1,d=i-n+1,f=Math.log(u),p=.5*Math.exp(2*f/3),b=.5*Math.sqrt(f*p*(u-p)/u)*(d-u/2<0?-1:1),S=Math.max(n,Math.floor(i-d*p/u+b)),M=Math.min(o,Math.floor(i+(u-d)*p/u+b));QuickSelect(t,i,S,M,a)}var C=t[i],P=n,R=o;for(swap(t,n,i),a(t[o],C)>0&&swap(t,n,o);P<R;){for(swap(t,P,R),P++,R--;a(t[P],C)<0;)P++;for(;a(t[R],C)>0;)R--}0===a(t[n],C)?swap(t,n,R):swap(t,++R,o),R<=i&&(n=R+1),i<=R&&(o=R-1)}};t.exports=QuickSelect},function(t,i,n){var o=n(6),a=n(131),BuildChunk=function(t,i,n){for(var o=[],a=0;a<t.length;a++)for(var u=0;u<i.length;u++)for(var d=0;d<n;d++)o.push({a:t[a],b:i[u]});return o};t.exports=function(t,i,n){var u=o(n,"max",0),d=o(n,"qty",1),f=o(n,"random",!1),p=o(n,"randomB",!1),b=o(n,"repeat",0),S=o(n,"yoyo",!1),M=[];if(p&&a(i),-1===b)if(0===u)b=0;else{var C=t.length*i.length*d;S&&(C*=2),b=Math.ceil(u/C)}for(var P=0;P<=b;P++){var R=BuildChunk(t,i,d);f&&a(R),M=M.concat(R),S&&(R.reverse(),M=M.concat(R))}return u&&M.splice(u),M}},function(t,i,n){t.exports={PROCESS_QUEUE_ADD:n(1041),PROCESS_QUEUE_REMOVE:n(1042)}},function(t,i,n){var o=n(13);t.exports=function(t,i){var n=o(i,"anims",null);if(null===n)return t;if("string"==typeof n)t.anims.play(n);else if("object"==typeof n){var a=t.anims,u=o(n,"key",void 0);if(u){var d=o(n,"startFrame",void 0),f=o(n,"delay",0),p=o(n,"repeat",0),b=o(n,"repeatDelay",0),S=o(n,"yoyo",!1),M=o(n,"play",!1),C=o(n,"delayedPlay",0),P={key:u,delay:f,repeat:p,repeatDelay:b,yoyo:S,startFrame:d};M?a.play(P):C>0?a.playAfterDelay(P,C):a.load(P)}}return t}},function(t,i,n){var o=n(0),a=n(109),u=new o({initialize:function Bob2(t,i,n,o,a){this.parent=t,this.x=i,this.y=n,this.frame=o,this.data={},this.tint=16777215,this._visible=a,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(t){return void 0===t?this.frame=this.parent.frame:t instanceof a&&t.texture===this.parent.texture?this.frame=t:this.frame=this.parent.texture.get(t),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(t,i,n){return this.x=t,this.y=i,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,n&&this.setFrame(n),this},setPosition:function(t,i){return this.x=t,this.y=i,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,i){return this.flipX=t,this.flipY=i,this},setVisible:function(t){return this.visible=t,this},setAlpha:function(t){return this.alpha=t,this},setTint:function(t){return this.tint=t,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(t){this.parent.dirty|=this._visible!==t,this._visible=t}},alpha:{get:function(){return this._alpha},set:function(t){this.parent.dirty|=this._alpha>0!=t>0,this._alpha=t}}});t.exports=u},function(t,i,n){var o=n(10);t.exports=function(t,i,n){void 0===n&&(n=new o);var a=Math.min(t.x,i.x),u=Math.min(t.y,i.y),d=Math.max(t.right,i.right)-a,f=Math.max(t.bottom,i.bottom)-u;return n.setTo(a,u,d,f)}},function(t,i,n){var o=n(0),a=n(11),u=n(1055),d=n(15),f=n(7),p=n(202),b=n(20),S=n(140),M=new o({Extends:d,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.Origin,a.ScrollFactor,a.Transform,a.Visible,u],initialize:function DOMElement2(t,i,n,o,a,u){d.call(this,t,"DOMElement"),this.parent=t.sys.game.domContainer,this.cache=t.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new S,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(i,n),"string"==typeof o?"#"===o[0]?this.setElement(o.substr(1),a,u):this.createElement(o,a,u):o&&this.setElement(o,a,u),t.sys.events.on(b.SLEEP,this.handleSceneEvent,this),t.sys.events.on(b.WAKE,this.handleSceneEvent,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function(t){var i=this.node,n=i.style;i&&(n.display=t.settings.visible?"block":"none")},setSkew:function(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.skewX=t,this.skewY=i,this},setPerspective:function(t){return this.parent.style.perspective=t+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(t){this.parent.style.perspective=t+"px"}},addListener:function(t){if(this.node){t=t.split(" ");for(var i=0;i<t.length;i++)this.node.addEventListener(t[i],this.handler,!1)}return this},removeListener:function(t){if(this.node){t=t.split(" ");for(var i=0;i<t.length;i++)this.node.removeEventListener(t[i],this.handler)}return this},dispatchNativeEvent:function(t){this.emit(t.type,t)},createElement:function(t,i,n){return this.setElement(document.createElement(t),i,n)},setElement:function(t,i,n){var o;if(this.removeElement(),"string"==typeof t?("#"===t[0]&&(t=t.substr(1)),o=document.getElementById(t)):"object"==typeof t&&1===t.nodeType&&(o=t),!o)return this;if(this.node=o,i&&f(i))for(var a in i)o.style[a]=i[a];else"string"==typeof i&&(o.style=i);return o.style.zIndex="0",o.style.display="inline",o.style.position="absolute",o.phaser=this,this.parent&&this.parent.appendChild(o),n&&(o.innerText=n),this.updateSize()},createFromCache:function(t,i){var n=this.cache.get(t);return n&&this.createFromHTML(n,i),this},createFromHTML:function(t,i){void 0===i&&(i="div"),this.removeElement();var n=document.createElement(i);return this.node=n,n.style.zIndex="0",n.style.display="inline",n.style.position="absolute",n.phaser=this,this.parent&&this.parent.appendChild(n),n.innerHTML=t,this.updateSize()},removeElement:function(){return this.node&&(p(this.node),this.node=null),this},updateSize:function(){var t=this.node,i=t.getBoundingClientRect();return this.width=t.clientWidth,this.height=t.clientHeight,this.displayWidth=i.width||0,this.displayHeight=i.height||0,this},getChildByProperty:function(t,i){if(this.node)for(var n=this.node.querySelectorAll("*"),o=0;o<n.length;o++)if(n[o][t]===i)return n[o];return null},getChildByID:function(t){return this.getChildByProperty("id",t)},getChildByName:function(t){return this.getChildByProperty("name",t)},setClassName:function(t){return this.node&&(this.node.className=t,this.updateSize()),this},setText:function(t){return this.node&&(this.node.innerText=t,this.updateSize()),this},setHTML:function(t){return this.node&&(this.node.innerHTML=t,this.updateSize()),this},preUpdate:function(){var t=this.parentContainer,i=this.node;i&&t&&!t.willRender()&&(i.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(b.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(b.WAKE,this.handleSceneEvent,this)}});t.exports=M},function(t,i,n){var o=n(1056),a=n(15),u=n(25),d=new u,f=new u,p=new u;t.exports=function(t,i,n,u){if(i.node){var b=i.node.style,S=i.scene.sys.settings;if(!b||!S.visible||a.RENDER_MASK!==i.renderFlags||0!==i.cameraFilter&&i.cameraFilter&n.id||i.parentContainer&&!i.parentContainer.willRender())b.display="none";else{var M=i.parentContainer,C=n.alpha*i.alpha;M&&(C*=M.alpha);var P=d,R=f,O=p,B=0,N=0,Y="0%",X="0%";u?(B=i.width*i.scaleX*i.originX,N=i.height*i.scaleY*i.originY,R.applyITRS(i.x-B,i.y-N,i.rotation,i.scaleX,i.scaleY),P.copyFrom(n.matrix),P.multiplyWithOffset(u,-n.scrollX*i.scrollFactorX,-n.scrollY*i.scrollFactorY),R.e=i.x-B,R.f=i.y-N,P.multiply(R,O)):(B=i.width*i.originX,N=i.height*i.originY,R.applyITRS(i.x-B,i.y-N,i.rotation,i.scaleX,i.scaleY),P.copyFrom(n.matrix),Y=100*i.originX+"%",X=100*i.originY+"%",R.e-=n.scrollX*i.scrollFactorX,R.f-=n.scrollY*i.scrollFactorY,P.multiply(R,O)),i.transformOnly||(b.display="block",b.opacity=C,b.zIndex=i._depth,b.pointerEvents=i.pointerEvents,b.mixBlendMode=o[i._blendMode]),b.transform=O.getCSSMatrix()+" skew("+i.skewX+"rad, "+i.skewY+"rad) rotate3d("+i.rotate3d.x+","+i.rotate3d.y+","+i.rotate3d.z+","+i.rotate3d.w+i.rotate3dAngle+")",b.transformOrigin=Y+" "+X}}}},function(t,i,n){var o=n(0),a=n(11),u=n(15),d=n(1060),f=new o({Extends:u,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Flip,a.Origin,a.ScrollFactor,a.Size,a.Texture,a.Tint,a.Transform,a.Visible,d],initialize:function Extern2(t){u.call(this,t,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});t.exports=f},function(t,i,n){var o=n(218),a=n(98),u=n(14),d=n(4);t.exports=function(t,i,n){void 0===n&&(n=new d);var f=a(i,0,u.PI2);return o(t,f,n)}},function(t,i,n){var o=n(447),a=n(218),u=n(98),d=n(14);t.exports=function(t,i,n,f){void 0===f&&(f=[]),!i&&n>0&&(i=o(t)/n);for(var p=0;p<i;p++){var b=u(p/i,0,d.PI2);f.push(a(t,b))}return f}},function(t,i){t.exports=function(t){var i=t.width/2,n=t.height/2,o=Math.pow(i-n,2)/Math.pow(i+n,2);return Math.PI*(i+n)*(1+3*o/(10+Math.sqrt(4-3*o)))}},function(t,i,n){var o=n(217),a=n(30);t.exports=function(t,i,n,u,d,f){var p=i.commandBuffer,b=p.length,S=d||t.currentContext;if(0!==b&&a(t,S,i,n,u)){n.addToRenderList(i);var M=1,C=1,P=0,R=0,O=1,B=0,N=0,Y=0;S.beginPath();for(var X=0;X<b;++X)switch(p[X]){case o.ARC:S.arc(p[X+1],p[X+2],p[X+3],p[X+4],p[X+5],p[X+6]),X+=7;break;case o.LINE_STYLE:O=p[X+1],P=p[X+2],M=p[X+3],B=(16711680&P)>>>16,N=(65280&P)>>>8,Y=255&P,S.strokeStyle="rgba("+B+","+N+","+Y+","+M+")",S.lineWidth=O,X+=3;break;case o.FILL_STYLE:R=p[X+1],C=p[X+2],B=(16711680&R)>>>16,N=(65280&R)>>>8,Y=255&R,S.fillStyle="rgba("+B+","+N+","+Y+","+C+")",X+=2;break;case o.BEGIN_PATH:S.beginPath();break;case o.CLOSE_PATH:S.closePath();break;case o.FILL_PATH:f||S.fill();break;case o.STROKE_PATH:f||S.stroke();break;case o.FILL_RECT:f?S.rect(p[X+1],p[X+2],p[X+3],p[X+4]):S.fillRect(p[X+1],p[X+2],p[X+3],p[X+4]),X+=4;break;case o.FILL_TRIANGLE:S.beginPath(),S.moveTo(p[X+1],p[X+2]),S.lineTo(p[X+3],p[X+4]),S.lineTo(p[X+5],p[X+6]),S.closePath(),f||S.fill(),X+=6;break;case o.STROKE_TRIANGLE:S.beginPath(),S.moveTo(p[X+1],p[X+2]),S.lineTo(p[X+3],p[X+4]),S.lineTo(p[X+5],p[X+6]),S.closePath(),f||S.stroke(),X+=6;break;case o.LINE_TO:S.lineTo(p[X+1],p[X+2]),X+=2;break;case o.MOVE_TO:S.moveTo(p[X+1],p[X+2]),X+=2;break;case o.LINE_FX_TO:S.lineTo(p[X+1],p[X+2]),X+=5;break;case o.MOVE_FX_TO:S.moveTo(p[X+1],p[X+2]),X+=5;break;case o.SAVE:S.save();break;case o.RESTORE:S.restore();break;case o.TRANSLATE:S.translate(p[X+1],p[X+2]),X+=2;break;case o.SCALE:S.scale(p[X+1],p[X+2]),X+=2;break;case o.ROTATE:S.rotate(p[X+1]),X+=1;break;case o.GRADIENT_FILL_STYLE:X+=5;break;case o.GRADIENT_LINE_STYLE:X+=6}S.restore()}}},function(t,i,n){var o=n(0),a=n(137),u=n(80),d=n(2),f=n(68),p=new o({initialize:function EmitterOp2(t,i,n,o){void 0===o&&(o=!1),this.propertyKey=i,this.propertyValue=n,this.defaultValue=n,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=o,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(t)},loadConfig:function(t,i){void 0===t&&(t={}),i&&(this.propertyKey=i),this.propertyValue=d(t,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(t){return this.propertyValue=t,this.setMethods()},setMethods:function(){var t=this.propertyValue,i=typeof t;if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,"number"===i)this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(t))this.onEmit=this.randomStaticValueEmit;else if("function"===i)this.emitOnly?this.onEmit=t:this.onUpdate=t;else if("object"===i&&this.hasBoth(t,"start","end")){this.start=t.start,this.end=t.end;var n=this.has(t,"random");if(n&&(this.onEmit=this.randomRangedValueEmit),this.has(t,"steps"))this.steps=t.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var o=this.has(t,"ease")?t.ease:"Linear";this.ease=u(o,t.easeParams),n||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if("object"===i&&this.hasBoth(t,"min","max"))this.start=t.min,this.end=t.max,this.onEmit=this.randomRangedValueEmit;else if("object"===i&&this.has(t,"random")){var a=t.random;Array.isArray(a)&&(this.start=a[0],this.end=a[1]),this.onEmit=this.randomRangedValueEmit}else"object"===i&&this.hasEither(t,"onEmit","onUpdate")&&(this.has(t,"onEmit")&&(this.onEmit=t.onEmit),this.has(t,"onUpdate")&&(this.onUpdate=t.onUpdate));return this},has:function(t,i){return t.hasOwnProperty(i)},hasBoth:function(t,i,n){return t.hasOwnProperty(i)&&t.hasOwnProperty(n)},hasEither:function(t,i,n){return t.hasOwnProperty(i)||t.hasOwnProperty(n)},defaultEmit:function(t,i,n){return n},defaultUpdate:function(t,i,n,o){return o},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var t=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[t]},randomRangedValueEmit:function(t,i){var n=a(this.start,this.end);return t&&t.data[i]&&(t.data[i].min=n),n},steppedEmit:function(){var t=this.counter,i=this.counter+(this.end-this.start)/this.steps;return this.counter=f(i,this.start,this.end),t},easedValueEmit:function(t,i){if(t&&t.data[i]){var n=t.data[i];n.min=this.start,n.max=this.end}return this.start},easeValueUpdate:function(t,i,n){var o=t.data[i];return(o.max-o.min)*this.ease(n)+o.min}});t.exports=p},function(t,i,n){var o=n(0),a=n(2),u=new o({initialize:function GravityWell2(t,i,n,o,u){if("object"==typeof t){var d=t;t=a(d,"x",0),i=a(d,"y",0),n=a(d,"power",0),o=a(d,"epsilon",100),u=a(d,"gravity",50)}else void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=100),void 0===u&&(u=50);this.x=t,this.y=i,this.active=!0,this._gravity=u,this._power=0,this._epsilon=0,this.power=n,this.epsilon=o},update:function(t,i){var n=this.x-t.x,o=this.y-t.y,a=n*n+o*o;if(0!==a){var u=Math.sqrt(a);a<this._epsilon&&(a=this._epsilon);var d=this._power*i/(a*u)*100;t.velocityX+=n*d,t.velocityY+=o*d}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(t){this._epsilon=t*t}},power:{get:function(){return this._power/this._gravity},set:function(t){this._power=t*this._gravity}},gravity:{get:function(){return this._gravity},set:function(t){var i=this.power;this._gravity=t,this.power=i}}});t.exports=u},function(t,i,n){var o=n(0),a=n(36),u=n(50),d=new o({initialize:function Particle2(t){this.emitter=t,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(t,i){var n=this.emitter;this.frame=n.getFrame(),n.emitZone&&n.emitZone.getPoint(this),this.x+=void 0===t?n.x.onEmit(this,"x"):t,this.y+=void 0===i?n.y.onEmit(this,"y"):i,this.life=n.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var o=n.speedX.onEmit(this,"speedX"),d=n.speedY?n.speedY.onEmit(this,"speedY"):o;if(n.radial){var f=a(n.angle.onEmit(this,"angle"));this.velocityX=Math.cos(f)*Math.abs(o),this.velocityY=Math.sin(f)*Math.abs(d)}else if(n.moveTo){var p=n.moveToX.onEmit(this,"moveToX"),b=n.moveToY?n.moveToY.onEmit(this,"moveToY"):p,S=Math.atan2(b-this.y,p-this.x),M=u(this.x,this.y,p,b)/(this.life/1e3);this.velocityX=Math.cos(S)*M,this.velocityY=Math.sin(S)*M}else this.velocityX=o,this.velocityY=d;n.acceleration&&(this.accelerationX=n.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=n.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=n.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=n.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=n.delay.onEmit(this,"delay"),this.scaleX=n.scaleX.onEmit(this,"scaleX"),this.scaleY=n.scaleY?n.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=n.rotate.onEmit(this,"rotate"),this.rotation=a(this.angle),this.bounce=n.bounce.onEmit(this,"bounce"),this.alpha=n.alpha.onEmit(this,"alpha"),this.tint=n.tint.onEmit(this,"tint")},computeVelocity:function(t,i,n,o){var a=this.velocityX,u=this.velocityY,d=this.accelerationX,f=this.accelerationY,p=this.maxVelocityX,b=this.maxVelocityY;a+=t.gravityX*n,u+=t.gravityY*n,d&&(a+=d*n),f&&(u+=f*n),a>p?a=p:a<-p&&(a=-p),u>b?u=b:u<-b&&(u=-b),this.velocityX=a,this.velocityY=u;for(var S=0;S<o.length;S++)o[S].update(this,i,n)},checkBounds:function(t){var i=t.bounds,n=-this.bounce;this.x<i.x&&t.collideLeft?(this.x=i.x,this.velocityX*=n):this.x>i.right&&t.collideRight&&(this.x=i.right,this.velocityX*=n),this.y<i.y&&t.collideTop?(this.y=i.y,this.velocityY*=n):this.y>i.bottom&&t.collideBottom&&(this.y=i.bottom,this.velocityY*=n)},update:function(t,i,n){if(this.delayCurrent>0)return this.delayCurrent-=t,!1;var o=this.emitter,u=1-this.lifeCurrent/this.life;return this.lifeT=u,this.computeVelocity(o,t,i,n),this.x+=this.velocityX*i,this.y+=this.velocityY*i,o.bounds&&this.checkBounds(o),o.deathZone&&o.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=o.scaleX.onUpdate(this,"scaleX",u,this.scaleX),o.scaleY?this.scaleY=o.scaleY.onUpdate(this,"scaleY",u,this.scaleY):this.scaleY=this.scaleX,this.angle=o.rotate.onUpdate(this,"rotate",u,this.angle),this.rotation=a(this.angle),this.alpha=o.alpha.onUpdate(this,"alpha",u,this.alpha),this.tint=o.tint.onUpdate(this,"tint",u,this.tint),this.lifeCurrent-=t,this.lifeCurrent<=0)}});t.exports=d},function(t,i,n){var o=n(35),a=n(0),u=n(11),d=n(453),f=n(454),p=n(449),b=n(2),S=n(210),M=n(455),C=n(126),P=n(451),R=n(456),O=n(10),B=n(79),N=n(3),Y=n(68),X=new a({Mixins:[u.BlendMode,u.Mask,u.ScrollFactor,u.Visible],initialize:function ParticleEmitter2(t,i){this.manager=t,this.texture=t.texture,this.frames=[t.defaultFrame],this.defaultFrame=t.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=P,this.x=new p(i,"x",0,!0),this.y=new p(i,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new p(i,"accelerationX",0,!0),this.accelerationY=new p(i,"accelerationY",0,!0),this.maxVelocityX=new p(i,"maxVelocityX",1e4,!0),this.maxVelocityY=new p(i,"maxVelocityY",1e4,!0),this.speedX=new p(i,"speedX",0,!0),this.speedY=new p(i,"speedY",0,!0),this.moveTo=!1,this.moveToX=new p(i,"moveToX",0,!0),this.moveToY=new p(i,"moveToY",0,!0),this.bounce=new p(i,"bounce",0,!0),this.scaleX=new p(i,"scaleX",1),this.scaleY=new p(i,"scaleY",1),this.tint=new p(i,"tint",16777215),this.alpha=new p(i,"alpha",1),this.lifespan=new p(i,"lifespan",1e3,!0),this.angle=new p(i,"angle",{min:0,max:360},!0),this.rotate=new p(i,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new p(i,"quantity",1,!0),this.delay=new p(i,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=o.NORMAL,this.follow=null,this.followOffset=new N,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,i&&this.fromJSON(i)},fromJSON:function(t){if(!t)return this;var i=0,n="";for(i=0;i<this.configFastMap.length;i++)n=this.configFastMap[i],C(t,n)&&(this[n]=b(t,n));for(i=0;i<this.configOpMap.length;i++)n=this.configOpMap[i],C(t,n)&&this[n].loadConfig(t);if(this.acceleration=0!==this.accelerationX.propertyValue||0!==this.accelerationY.propertyValue,this.moveTo=0!==this.moveToX.propertyValue||0!==this.moveToY.propertyValue,C(t,"speed")&&(this.speedX.loadConfig(t,"speed"),this.speedY=null),(M(t,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),C(t,"scale")&&(this.scaleX.loadConfig(t,"scale"),this.scaleY=null),C(t,"callbackScope")){var o=b(t,"callbackScope",null);this.emitCallbackScope=o,this.deathCallbackScope=o}return C(t,"emitZone")&&this.setEmitZone(t.emitZone),C(t,"deathZone")&&this.setDeathZone(t.deathZone),C(t,"bounds")&&this.setBounds(t.bounds),C(t,"followOffset")&&this.followOffset.setFromObject(b(t,"followOffset",0)),C(t,"frame")&&this.setFrame(t.frame),C(t,"reserve")&&this.reserve(t.reserve),this},toJSON:function(t){void 0===t&&(t={});var i=0,n="";for(i=0;i<this.configFastMap.length;i++)t[n=this.configFastMap[i]]=this[n];for(i=0;i<this.configOpMap.length;i++)this[n=this.configOpMap[i]]&&(t[n]=this[n].toJSON());return this.speedY||(delete t.speedX,t.speed=this.speedX.toJSON()),this.scaleY||(delete t.scaleX,t.scale=this.scaleX.toJSON()),t},startFollow:function(t,i,n,o){return void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=!1),this.follow=t,this.followOffset.set(i,n),this.trackVisible=o,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(1===this.frames.length)return this.defaultFrame;if(this.randomFrame)return S(this.frames);var t=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=Y(this.currentFrame+1,0,this._frameLength)),t},setFrame:function(t,i,n){void 0===i&&(i=!0),void 0===n&&(n=1),this.randomFrame=i,this.frameQuantity=n,this.currentFrame=0,this._frameCounter=0;var o=typeof t;if(Array.isArray(t)||"string"===o||"number"===o)this.manager.setEmitterFrames(t,this);else if("object"===o){var a=t;(t=b(a,"frames",null))&&this.manager.setEmitterFrames(t,this);var u=b(a,"cycle",!1);this.randomFrame=!u,this.frameQuantity=b(a,"quantity",n)}return this._frameLength=this.frames.length,1===this._frameLength&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(t){return void 0===t&&(t=!0),this.radial=t,this},setPosition:function(t,i){return this.x.onChange(t),this.y.onChange(i),this},setBounds:function(t,i,n,o){if("object"==typeof t){var a=t;t=a.x,i=a.y,n=C(a,"w")?a.w:a.width,o=C(a,"h")?a.h:a.height}return this.bounds?this.bounds.setTo(t,i,n,o):this.bounds=new O(t,i,n,o),this},setSpeedX:function(t){return this.speedX.onChange(t),this.radial=!1,this},setSpeedY:function(t){return this.speedY&&(this.speedY.onChange(t),this.radial=!1),this},setSpeed:function(t){return this.speedX.onChange(t),this.speedY=null,this.radial=!0,this},setScaleX:function(t){return this.scaleX.onChange(t),this},setScaleY:function(t){return this.scaleY.onChange(t),this},setScale:function(t){return this.scaleX.onChange(t),this.scaleY=null,this},setGravityX:function(t){return this.gravityX=t,this},setGravityY:function(t){return this.gravityY=t,this},setGravity:function(t,i){return this.gravityX=t,this.gravityY=i,this},setAlpha:function(t){return this.alpha.onChange(t),this},setTint:function(t){return this.tint.onChange(t),this},setEmitterAngle:function(t){return this.angle.onChange(t),this},setAngle:function(t){return this.angle.onChange(t),this},setLifespan:function(t){return this.lifespan.onChange(t),this},setQuantity:function(t){return this.quantity.onChange(t),this},setFrequency:function(t,i){return this.frequency=t,this._counter=0,i&&this.quantity.onChange(i),this},setEmitZone:function(t){if(void 0===t)this.emitZone=null;else{var i=b(t,"type","random"),n=b(t,"source",null);switch(i){case"random":this.emitZone=new R(n);break;case"edge":var o=b(t,"quantity",1),a=b(t,"stepRate",0),u=b(t,"yoyo",!1),d=b(t,"seamless",!0);this.emitZone=new f(n,o,a,u,d)}}return this},setDeathZone:function(t){if(void 0===t)this.deathZone=null;else{var i=b(t,"type","onEnter"),n=b(t,"source",null);if(n&&"function"==typeof n.contains){var o="onEnter"===i;this.deathZone=new d(n,o)}}return this},reserve:function(t){for(var i=this.dead,n=0;n<t;n++)i.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(t,i){return void 0===t?(this.emitCallback=null,this.emitCallbackScope=null):"function"==typeof t&&(this.emitCallback=t,i&&(this.emitCallbackScope=i)),this},onParticleDeath:function(t,i){return void 0===t?(this.deathCallback=null,this.deathCallbackScope=null):"function"==typeof t&&(this.deathCallback=t,i&&(this.deathCallbackScope=i)),this},killAll:function(){for(var t=this.dead,i=this.alive;i.length>0;)t.push(i.pop());return this},forEachAlive:function(t,i){for(var n=this.alive,o=n.length,a=0;a<o;++a)t.call(i,n[a],this);return this},forEachDead:function(t,i){for(var n=this.dead,o=n.length,a=0;a<o;++a)t.call(i,n[a],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return B(this.alive,this.depthSortCallback),this},flow:function(t,i){return void 0===i&&(i=1),this.frequency=t,this.quantity.onChange(i),this.start()},explode:function(t,i,n){return this.frequency=-1,this.emitParticle(t,i,n)},emitParticleAt:function(t,i,n){return this.emitParticle(n,t,i)},emitParticle:function(t,i,n){if(!this.atLimit()){void 0===t&&(t=this.quantity.onEmit());for(var o=this.dead,a=this.follow?this.follow.x+this.followOffset.x:i,u=this.follow?this.follow.y+this.followOffset.y:n,d=0;d<t;d++){var f=o.pop();if(f||(f=new this.particleClass(this)),f.fire(a,u),this.particleBringToTop?this.alive.push(f):this.alive.unshift(f),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,f,this),this.atLimit())break}return f}},preUpdate:function(t,i){var n=(i*=this.timeScale)/1e3;this.trackVisible&&(this.visible=this.follow.visible);var o=this.manager.getProcessors(),a=this.alive,u=this.dead,d=0,f=[],p=a.length;for(d=0;d<p;d++){var b=a[d];b.update(i,n,o)&&f.push({index:d,particle:b})}if((p=f.length)>0){var S=this.deathCallback,M=this.deathCallbackScope;for(d=p-1;d>=0;d--){var C=f[d];a.splice(C.index,1),u.push(C.particle),S&&S.call(M,C.particle),C.particle.resetPosition()}}this.on&&(0===this.frequency?this.emitParticle():this.frequency>0&&(this._counter-=i,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(t,i){return t.y-i.y}});t.exports=X},function(t,i,n){var o=new(n(0))({initialize:function DeathZone2(t,i){this.source=t,this.killOnEnter=i},willKill:function(t){var i=this.source.contains(t.x,t.y);return i&&this.killOnEnter||!i&&!this.killOnEnter}});t.exports=o},function(t,i,n){var o=new(n(0))({initialize:function EdgeZone2(t,i,n,o,a){void 0===o&&(o=!1),void 0===a&&(a=!0),this.source=t,this.points=[],this.quantity=i,this.stepRate=n,this.yoyo=o,this.counter=-1,this.seamless=a,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var t=this.points[0],i=this.points[this.points.length-1];t.x===i.x&&t.y===i.y&&this.points.pop()}var n=this._length;return this._length=this.points.length,this._length<n&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(t){return this.source=t,this.updateSource()},getPoint:function(t){0===this._direction?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,-1===this.counter&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var i=this.points[this.counter];i&&(t.x=i.x,t.y=i.y)}});t.exports=o},function(t,i){t.exports=function(t,i){for(var n=0;n<i.length;n++)if(t.hasOwnProperty(i[n]))return!0;return!1}},function(t,i,n){var o=n(0),a=n(3),u=new o({initialize:function RandomZone2(t){this.source=t,this._tempVec=new a},getPoint:function(t){var i=this._tempVec;this.source.getRandomPoint(i),t.x=i.x,t.y=i.y}});t.exports=u},function(t,i,n){var o=n(0),a=n(11),u=n(73),d=new o({Extends:u,Mixins:[a.PathFollower],initialize:function PathFollower2(t,i,n,o,a,d){u.call(this,t,n,o,a,d),this.path=i},preUpdate:function(t,i){this.anims.update(t,i),this.pathUpdate(t)}});t.exports=d},function(t,i){t.exports=function(t,i,n){var o=t.canvas,a=t.context,u=t.style,d=[],f=0,p=n.length;u.maxLines>0&&u.maxLines<n.length&&(p=u.maxLines),u.syncFont(o,a);for(var b=0;b<p;b++){var S=u.strokeThickness;S+=a.measureText(n[b]).width,u.wordWrap&&(S-=a.measureText(" ").width),d[b]=Math.ceil(S),f=Math.max(f,d[b])}var M=i.fontSize+u.strokeThickness,C=M*p,P=t.lineSpacing;return p>1&&(C+=P*(p-1)),{width:f,height:C,lines:p,lineWidths:d,lineSpacing:P,lineHeight:M}}},function(t,i,n){var o=n(0),a=n(13),u=n(6),d=n(460),f={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|Mqgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},p=new o({initialize:function TextStyle2(t,i){this.parent=t,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(i,!1,!0);var n=u(i,"metrics",!1);this.metrics=n?{ascent:u(n,"ascent",0),descent:u(n,"descent",0),fontSize:u(n,"fontSize",0)}:d(this)},setStyle:function(t,i,n){for(var o in void 0===i&&(i=!0),void 0===n&&(n=!1),t&&t.hasOwnProperty("fontSize")&&"number"==typeof t.fontSize&&(t.fontSize=t.fontSize.toString()+"px"),f){var d=n?f[o][1]:this[o];this[o]="wordWrapCallback"===o||"wordWrapCallbackScope"===o?u(t,f[o][0],d):a(t,f[o][0],d)}var p=u(t,"font",null);null!==p&&this.setFont(p,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var b=u(t,"fill",null);return null!==b&&(this.color=b),i?this.update(!0):this.parent},syncFont:function(t,i){i.font=this._font},syncStyle:function(t,i){i.textBaseline="alphabetic",i.fillStyle=this.color,i.strokeStyle=this.stroke,i.lineWidth=this.strokeThickness,i.lineCap="round",i.lineJoin="round"},syncShadow:function(t,i){i?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)},update:function(t){return t&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=d(this)),this.parent.updateText()},setFont:function(t,i){void 0===i&&(i=!0);var n=t,o="",a="";if("string"!=typeof t)n=u(t,"fontFamily","Courier"),o=u(t,"fontSize","16px"),a=u(t,"fontStyle","");else{var d=t.split(" "),f=0;a=d.length>2?d[f++]:"",o=d[f++]||"16px",n=d[f++]||"Courier"}return n===this.fontFamily&&o===this.fontSize&&a===this.fontStyle||(this.fontFamily=n,this.fontSize=o,this.fontStyle=a,i&&this.update(!0)),this.parent},setFontFamily:function(t){return this.fontFamily!==t&&(this.fontFamily=t,this.update(!0)),this.parent},setFontStyle:function(t){return this.fontStyle!==t&&(this.fontStyle=t,this.update(!0)),this.parent},setFontSize:function(t){return"number"==typeof t&&(t=t.toString()+"px"),this.fontSize!==t&&(this.fontSize=t,this.update(!0)),this.parent},setTestString:function(t){return this.testString=t,this.update(!0)},setFixedSize:function(t,i){return this.fixedWidth=t,this.fixedHeight=i,t&&(this.parent.width=t),i&&(this.parent.height=i),this.update(!1)},setBackgroundColor:function(t){return this.backgroundColor=t,this.update(!1)},setFill:function(t){return this.color=t,this.update(!1)},setColor:function(t){return this.color=t,this.update(!1)},setResolution:function(t){return this.resolution=t,this.update(!1)},setStroke:function(t,i){return void 0===i&&(i=this.strokeThickness),void 0===t&&0!==this.strokeThickness?(this.strokeThickness=0,this.update(!0)):this.stroke===t&&this.strokeThickness===i||(this.stroke=t,this.strokeThickness=i,this.update(!0)),this.parent},setShadow:function(t,i,n,o,a,u){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n="#000"),void 0===o&&(o=0),void 0===a&&(a=!1),void 0===u&&(u=!0),this.shadowOffsetX=t,this.shadowOffsetY=i,this.shadowColor=n,this.shadowBlur=o,this.shadowStroke=a,this.shadowFill=u,this.update(!1)},setShadowOffset:function(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.shadowOffsetX=t,this.shadowOffsetY=i,this.update(!1)},setShadowColor:function(t){return void 0===t&&(t="#000"),this.shadowColor=t,this.update(!1)},setShadowBlur:function(t){return void 0===t&&(t=0),this.shadowBlur=t,this.update(!1)},setShadowStroke:function(t){return this.shadowStroke=t,this.update(!1)},setShadowFill:function(t){return this.shadowFill=t,this.update(!1)},setWordWrapWidth:function(t,i){return void 0===i&&(i=!1),this.wordWrapWidth=t,this.wordWrapUseAdvanced=i,this.update(!1)},setWordWrapCallback:function(t,i){return void 0===i&&(i=null),this.wordWrapCallback=t,this.wordWrapCallbackScope=i,this.update(!1)},setAlign:function(t){return void 0===t&&(t="left"),this.align=t,this.update(!1)},setMaxLines:function(t){return void 0===t&&(t=0),this.maxLines=t,this.update(!1)},getTextMetrics:function(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}},toJSON:function(){var t={};for(var i in f)t[i]=this[i];return t.metrics=this.getTextMetrics(),t},destroy:function(){this.parent=void 0}});t.exports=p},function(t,i,n){var o=n(31);t.exports=function(t){var i=o.create(this),n=i.getContext("2d");t.syncFont(i,n);var a=n.measureText(t.testString);if("actualBoundingBoxAscent"in a){var u=a.actualBoundingBoxAscent,d=a.actualBoundingBoxDescent;return o.remove(i),{ascent:u,descent:d,fontSize:u+d}}var f=Math.ceil(a.width*t.baselineX),p=f,b=2*p;p=p*t.baselineY|0,i.width=f,i.height=b,n.fillStyle="#f00",n.fillRect(0,0,f,b),n.font=t._font,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(t.testString,0,p);var S={ascent:0,descent:0,fontSize:0},M=n.getImageData(0,0,f,b);if(!M)return S.ascent=p,S.descent=p+6,S.fontSize=S.ascent+S.descent,o.remove(i),S;var C,P,R=M.data,O=R.length,B=4*f,N=0,Y=!1;for(C=0;C<p;C++){for(P=0;P<B;P+=4)if(255!==R[N+P]){Y=!0;break}if(Y)break;N+=B}for(S.ascent=p-C,N=O-B,Y=!1,C=b;C>p;C--){for(P=0;P<B;P+=4)if(255!==R[N+P]){Y=!0;break}if(Y)break;N-=B}return S.descent=C-p,S.fontSize=S.ascent+S.descent,o.remove(i),S}},function(t,i,n){var o=n(1097),a=n(0),u=n(36),d=n(59),f=n(65),p=n(14),b=n(34),S=new a({Extends:b,Mixins:[o],initialize:function Arc2(t,i,n,o,a,u,d,p,S){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=128),void 0===a&&(a=0),void 0===u&&(u=360),void 0===d&&(d=!1),b.call(this,t,"Arc",new f(0,0,o)),this._startAngle=a,this._endAngle=u,this._anticlockwise=d,this._iterations=.01,this.setPosition(i,n);var M=2*this.geom.radius;this.setSize(M,M),void 0!==p&&this.setFillStyle(p,S),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(t){this._iterations=t,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(t){this.geom.radius=t;var i=2*t;this.setSize(i,i),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(t){this._startAngle=t,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(t){this._endAngle=t,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(t){this._anticlockwise=t,this.updateData()}},setRadius:function(t){return this.radius=t,this},setIterations:function(t){return void 0===t&&(t=.01),this.iterations=t,this},setStartAngle:function(t,i){return this._startAngle=t,void 0!==i&&(this._anticlockwise=i),this.updateData()},setEndAngle:function(t,i){return this._endAngle=t,void 0!==i&&(this._anticlockwise=i),this.updateData()},updateData:function(){var t=this._iterations,i=t,n=this.geom.radius,o=u(this._startAngle),a=u(this._endAngle),f=n,b=n;a-=o,this._anticlockwise?a<-p.PI2?a=-p.PI2:a>0&&(a=-p.PI2+a%p.PI2):a>p.PI2?a=p.PI2:a<0&&(a=p.PI2+a%p.PI2);for(var S,M=[f+Math.cos(o)*n,b+Math.sin(o)*n];i<1;)S=a*i+o,M.push(f+Math.cos(S)*n,b+Math.sin(S)*n),i+=t;return S=a+o,M.push(f+Math.cos(S)*n,b+Math.sin(S)*n),M.push(f+Math.cos(o)*n,b+Math.sin(o)*n),this.pathIndexes=d(M),this.pathData=M,this}});t.exports=S},function(t,i,n){var o=n(0),a=n(1100),u=n(59),d=n(10),f=n(34),p=new o({Extends:f,Mixins:[a],initialize:function Curve2(t,i,n,o,a,u){void 0===i&&(i=0),void 0===n&&(n=0),f.call(this,t,"Curve",o),this._smoothness=32,this._curveBounds=new d,this.closePath=!1,this.setPosition(i,n),void 0!==a&&this.setFillStyle(a,u),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(t){this._smoothness=t,this.updateData()}},setSmoothness:function(t){return this._smoothness=t,this.updateData()},updateData:function(){var t=this._curveBounds,i=this._smoothness;this.geom.getBounds(t,i),this.setSize(t.width,t.height),this.updateDisplayOrigin();for(var n=[],o=this.geom.getPoints(i),a=0;a<o.length;a++)n.push(o[a].x,o[a].y);return n.push(o[0].x,o[0].y),this.pathIndexes=u(n),this.pathData=n,this}});t.exports=p},function(t,i,n){var o=n(0),a=n(59),u=n(1103),d=n(111),f=n(34),p=new o({Extends:f,Mixins:[u],initialize:function Ellipse2(t,i,n,o,a,u,p){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=128),void 0===a&&(a=128),f.call(this,t,"Ellipse",new d(o/2,a/2,o,a)),this._smoothness=64,this.setPosition(i,n),this.width=o,this.height=a,void 0!==u&&this.setFillStyle(u,p),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(t){this._smoothness=t,this.updateData()}},setSize:function(t,i){return this.width=t,this.height=i,this.geom.setPosition(t/2,i/2),this.geom.setSize(t,i),this.updateData()},setSmoothness:function(t){return this._smoothness=t,this.updateData()},updateData:function(){for(var t=[],i=this.geom.getPoints(this._smoothness),n=0;n<i.length;n++)t.push(i[n].x,i[n].y);return t.push(i[0].x,i[0].y),this.pathIndexes=a(t),this.pathData=t,this}});t.exports=p},function(t,i,n){var o=n(0),a=n(34),u=n(1106),d=new o({Extends:a,Mixins:[u],initialize:function Grid2(t,i,n,o,u,d,f,p,b,S,M){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=128),void 0===u&&(u=128),void 0===d&&(d=32),void 0===f&&(f=32),a.call(this,t,"Grid",null),this.cellWidth=d,this.cellHeight=f,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(i,n),this.setSize(o,u),this.setFillStyle(p,b),void 0!==S&&this.setOutlineStyle(S,M),this.updateDisplayOrigin()},setFillStyle:function(t,i){return void 0===i&&(i=1),void 0===t?this.showCells=!1:(this.fillColor=t,this.fillAlpha=i,this.showCells=!0),this},setAltFillStyle:function(t,i){return void 0===i&&(i=1),void 0===t?this.showAltCells=!1:(this.altFillColor=t,this.altFillAlpha=i,this.showAltCells=!0),this},setOutlineStyle:function(t,i){return void 0===i&&(i=1),void 0===t?this.showOutline=!1:(this.outlineFillColor=t,this.outlineFillAlpha=i,this.showOutline=!0),this}});t.exports=d},function(t,i,n){var o=n(1109),a=n(0),u=n(34),d=new a({Extends:u,Mixins:[o],initialize:function IsoBox2(t,i,n,o,a,d,f,p){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=48),void 0===a&&(a=32),void 0===d&&(d=15658734),void 0===f&&(f=10066329),void 0===p&&(p=13421772),u.call(this,t,"IsoBox",null),this.projection=4,this.fillTop=d,this.fillLeft=f,this.fillRight=p,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(i,n),this.setSize(o,a),this.updateDisplayOrigin()},setProjection:function(t){return this.projection=t,this},setFaces:function(t,i,n){return void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===n&&(n=!0),this.showTop=t,this.showLeft=i,this.showRight=n,this},setFillStyle:function(t,i,n){return this.fillTop=t,this.fillLeft=i,this.fillRight=n,this.isFilled=!0,this}});t.exports=d},function(t,i,n){var o=n(0),a=n(1112),u=n(34),d=new o({Extends:u,Mixins:[a],initialize:function IsoTriangle2(t,i,n,o,a,d,f,p,b){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=48),void 0===a&&(a=32),void 0===d&&(d=!1),void 0===f&&(f=15658734),void 0===p&&(p=10066329),void 0===b&&(b=13421772),u.call(this,t,"IsoTriangle",null),this.projection=4,this.fillTop=f,this.fillLeft=p,this.fillRight=b,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=d,this.isFilled=!0,this.setPosition(i,n),this.setSize(o,a),this.updateDisplayOrigin()},setProjection:function(t){return this.projection=t,this},setReversed:function(t){return this.isReversed=t,this},setFaces:function(t,i,n){return void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===n&&(n=!0),this.showTop=t,this.showLeft=i,this.showRight=n,this},setFillStyle:function(t,i,n){return this.fillTop=t,this.fillLeft=i,this.fillRight=n,this.isFilled=!0,this}});t.exports=d},function(t,i,n){var o=n(0),a=n(34),u=n(47),d=n(1115),f=new o({Extends:a,Mixins:[d],initialize:function Line4(t,i,n,o,d,f,p,b,S){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===d&&(d=0),void 0===f&&(f=128),void 0===p&&(p=0),a.call(this,t,"Line",new u(o,d,f,p));var M=Math.max(1,this.geom.right-this.geom.left),C=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(i,n),this.setSize(M,C),void 0!==b&&this.setStrokeStyle(1,b,S),this.updateDisplayOrigin()},setLineWidth:function(t,i){return void 0===i&&(i=t),this._startWidth=t,this._endWidth=i,this.lineWidth=t,this},setTo:function(t,i,n,o){return this.geom.setTo(t,i,n,o),this}});t.exports=f},function(t,i,n){var o=n(1118),a=n(0),u=n(59),d=n(469),f=n(227),p=n(34),b=n(472),S=new a({Extends:p,Mixins:[o],initialize:function Polygon2(t,i,n,o,a,u){void 0===i&&(i=0),void 0===n&&(n=0),p.call(this,t,"Polygon",new f(o));var b=d(this.geom);this.setPosition(i,n),this.setSize(b.width,b.height),void 0!==a&&this.setFillStyle(a,u),this.updateDisplayOrigin(),this.updateData()},smooth:function(t){void 0===t&&(t=1);for(var i=0;i<t;i++)b(this.geom);return this.updateData()},updateData:function(){for(var t=[],i=this.geom.points,n=0;n<i.length;n++)t.push(i[n].x,i[n].y);return t.push(i[0].x,i[0].y),this.pathIndexes=u(t),this.pathData=t,this}});t.exports=S},function(t,i,n){var o=n(10);t.exports=function(t,i){void 0===i&&(i=new o);for(var n,a=1/0,u=1/0,d=-a,f=-u,p=0;p<t.points.length;p++)n=t.points[p],a=Math.min(a,n.x),u=Math.min(u,n.y),d=Math.max(d,n.x),f=Math.max(f,n.y);return i.x=a,i.y=u,i.width=d-a,i.height=f-u,i}},function(t,i,n){var o=n(67),a=n(47),u=n(471);t.exports=function(t,i,n,d){void 0===d&&(d=[]);var f=t.points,p=u(t);!i&&n>0&&(i=p/n);for(var b=0;b<i;b++)for(var S=p*(b/i),M=0,C=0;C<f.length;C++){var P=f[C],R=f[(C+1)%f.length],O=new a(P.x,P.y,R.x,R.y),B=o(O);if(!(S<M||S>M+B)){var N=O.getPoint((S-M)/B);d.push(N);break}M+=B}return d}},function(t,i,n){var o=n(67),a=n(47);t.exports=function(t){for(var i=t.points,n=0,u=0;u<i.length;u++){var d=i[u],f=i[(u+1)%i.length],p=new a(d.x,d.y,f.x,f.y);n+=o(p)}return n}},function(t,i){var copy=function(t,i){return t[0]=i[0],t[1]=i[1],t};t.exports=function(t){var i,n=[],o=t.points;for(i=0;i<o.length;i++)n.push([o[i].x,o[i].y]);var a=[];for(n.length>0&&a.push(copy([0,0],n[0])),i=0;i<n.length-1;i++){var u=n[i],d=n[i+1],f=u[0],p=u[1],b=d[0],S=d[1];a.push([.85*f+.15*b,.85*p+.15*S]),a.push([.15*f+.85*b,.15*p+.85*S])}return n.length>1&&a.push(copy([0,0],n[n.length-1])),t.setTo(a)}},function(t,i,n){var o=n(0),a=n(10),u=n(34),d=n(1121),f=new o({Extends:u,Mixins:[d],initialize:function Rectangle4(t,i,n,o,d,f,p){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=128),void 0===d&&(d=128),u.call(this,t,"Rectangle",new a(0,0,o,d)),this.setPosition(i,n),this.setSize(o,d),void 0!==f&&this.setFillStyle(f,p),this.updateDisplayOrigin(),this.updateData()},setSize:function(t,i){return this.width=t,this.height=i,this.geom.setSize(t,i),this.updateData(),this},updateData:function(){var t=[],i=this.geom,n=this._tempLine;return i.getLineA(n),t.push(n.x1,n.y1,n.x2,n.y2),i.getLineB(n),t.push(n.x2,n.y2),i.getLineC(n),t.push(n.x2,n.y2),i.getLineD(n),t.push(n.x2,n.y2),this.pathData=t,this}});t.exports=f},function(t,i,n){var o=n(1124),a=n(0),u=n(59),d=n(34),f=new a({Extends:d,Mixins:[o],initialize:function Star2(t,i,n,o,a,u,f,p){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=5),void 0===a&&(a=32),void 0===u&&(u=64),d.call(this,t,"Star",null),this._points=o,this._innerRadius=a,this._outerRadius=u,this.setPosition(i,n),this.setSize(2*u,2*u),void 0!==f&&this.setFillStyle(f,p),this.updateDisplayOrigin(),this.updateData()},setPoints:function(t){return this._points=t,this.updateData()},setInnerRadius:function(t){return this._innerRadius=t,this.updateData()},setOuterRadius:function(t){return this._outerRadius=t,this.updateData()},points:{get:function(){return this._points},set:function(t){this._points=t,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(t){this._innerRadius=t,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(t){this._outerRadius=t,this.updateData()}},updateData:function(){var t=[],i=this._points,n=this._innerRadius,o=this._outerRadius,a=Math.PI/2*3,d=Math.PI/i,f=o,p=o;t.push(f,p+-o);for(var b=0;b<i;b++)t.push(f+Math.cos(a)*o,p+Math.sin(a)*o),a+=d,t.push(f+Math.cos(a)*n,p+Math.sin(a)*n),a+=d;return t.push(f,p+-o),this.pathIndexes=u(t),this.pathData=t,this}});t.exports=f},function(t,i,n){var o=n(0),a=n(34),u=n(82),d=n(1127),f=new o({Extends:a,Mixins:[d],initialize:function Triangle2(t,i,n,o,d,f,p,b,S,M,C){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===d&&(d=128),void 0===f&&(f=64),void 0===p&&(p=0),void 0===b&&(b=128),void 0===S&&(S=128),a.call(this,t,"Triangle",new u(o,d,f,p,b,S));var P=this.geom.right-this.geom.left,R=this.geom.bottom-this.geom.top;this.setPosition(i,n),this.setSize(P,R),void 0!==M&&this.setFillStyle(M,C),this.updateDisplayOrigin(),this.updateData()},setTo:function(t,i,n,o,a,u){return this.geom.setTo(t,i,n,o,a,u),this.updateData()},updateData:function(){var t=[],i=this.geom,n=this._tempLine;return i.getLineA(n),t.push(n.x1,n.y1,n.x2,n.y2),i.getLineB(n),t.push(n.x2,n.y2),i.getLineC(n),t.push(n.x2,n.y2),this.pathData=t,this}});t.exports=f},function(t,i,n){var o=n(4),a=n(67);t.exports=function(t,i,n){void 0===n&&(n=new o);var u=t.getLineA(),d=t.getLineB(),f=t.getLineC();if(i<=0||i>=1)return n.x=u.x1,n.y=u.y1,n;var p=a(u),b=a(d),S=a(f),M=(p+b+S)*i,C=0;return M<p?(C=M/p,n.x=u.x1+(u.x2-u.x1)*C,n.y=u.y1+(u.y2-u.y1)*C):M>p+b?(C=(M-=p+b)/S,n.x=f.x1+(f.x2-f.x1)*C,n.y=f.y1+(f.y2-f.y1)*C):(C=(M-=p)/b,n.x=d.x1+(d.x2-d.x1)*C,n.y=d.y1+(d.y2-d.y1)*C),n}},function(t,i,n){var o=n(67),a=n(4);t.exports=function(t,i,n,u){void 0===u&&(u=[]);var d=t.getLineA(),f=t.getLineB(),p=t.getLineC(),b=o(d),S=o(f),M=o(p),C=b+S+M;!i&&n>0&&(i=C/n);for(var P=0;P<i;P++){var R=C*(P/i),O=0,B=new a;R<b?(O=R/b,B.x=d.x1+(d.x2-d.x1)*O,B.y=d.y1+(d.y2-d.y1)*O):R>b+S?(O=(R-=b+S)/M,B.x=p.x1+(p.x2-p.x1)*O,B.y=p.y1+(p.y2-p.y1)*O):(O=(R-=b)/S,B.x=f.x1+(f.x2-f.x1)*O,B.y=f.y1+(f.y2-f.y1)*O),u.push(B)}return u}},function(t,i){t.exports=function(t,i,n){if(!t||"number"==typeof t)return!1;if(t.hasOwnProperty(i))return t[i]=n,!0;if(-1!==i.indexOf(".")){for(var o=i.split("."),a=t,u=t,d=0;d<o.length;d++){if(!a.hasOwnProperty(o[d]))return!1;u=a,a=a[o[d]]}return u[o[o.length-1]]=n,!0}return!1}},function(t,i,n){var o=n(116),a=n(117);t.exports=function(t,i,n,u,d,f,p){if(void 0===u&&(u=!1),void 0===f&&(f=16777215),void 0===p&&(p=1),t.length===i.length){var b,S,M,C,P,R,O,B,N,Y,X,G={faces:[],vertices:[]},U=u?3:2,V=Array.isArray(f),z=Array.isArray(p);if(Array.isArray(n)&&n.length>0)for(b=0;b<n.length;b++){var W=n[b],H=2*n[b],j=n[b]*U;S=t[j],M=t[j+1],C=u?t[j+2]:0,P=i[H],R=i[H+1],O=V?f[W]:f,B=z?p[W]:p,N=0,Y=0,X=0,d&&(N=d[j],Y=d[j+1],X=u?d[j+2]:0),G.vertices.push(new a(S,M,C,P,R,O,B,N,Y,X))}else{var q=0,Z=0;for(b=0;b<t.length;b+=U)S=t[b],M=t[b+1],C=u?t[b+2]:0,P=i[q],R=i[q+1],O=V?f[Z]:f,B=z?p[Z]:p,N=0,Y=0,X=0,d&&(N=d[b],Y=d[b+1],X=u?d[b+2]:0),G.vertices.push(new a(S,M,C,P,R,O,B,N,Y,X)),q+=2,Z++}for(b=0;b<G.vertices.length;b+=3){var K=G.vertices[b],$=G.vertices[b+1],tt=G.vertices[b+2];G.faces.push(new o(K,$,tt))}return G}console.warn("GenerateVerts: vertices and uvs count not equal")}},function(t,i,n){var o=n(116),a=n(69),u=n(39),d=n(117),f=new u,p=new u,b=new a;t.exports=function(t,i,n,a,u,S,M,C,P,R){void 0===n&&(n=1),void 0===a&&(a=0),void 0===u&&(u=0),void 0===S&&(S=0),void 0===M&&(M=0),void 0===C&&(C=0),void 0===P&&(P=0),void 0===R&&(R=!0);var O={faces:[],verts:[]},B=t.materials;f.set(a,u,S),p.set(M,C,P),b.fromRotationXYTranslation(p,f,R);for(var N=0;N<t.models.length;N++)for(var Y=t.models[N],X=Y.vertices,G=Y.textureCoords,U=Y.faces,V=0;V<U.length;V++){var z=U[V],W=z.vertices[0],H=z.vertices[1],j=z.vertices[2],q=X[W.vertexIndex],Z=X[H.vertexIndex],K=X[j.vertexIndex],$=W.textureCoordsIndex,tt=H.textureCoordsIndex,et=j.textureCoordsIndex,it=-1===$?{u:0,v:1}:G[$],nt=-1===tt?{u:0,v:0}:G[tt],st=-1===et?{u:1,v:1}:G[et],rt=16777215;""!==z.material&&B[z.material]&&(rt=B[z.material]);var ot=new d(q.x*n,q.y*n,q.z*n,it.u,it.v,rt).transformMat4(b),at=new d(Z.x*n,Z.y*n,Z.z*n,nt.u,nt.v,rt).transformMat4(b),ht=new d(K.x*n,K.y*n,K.z*n,st.u,st.v,rt).transformMat4(b);O.verts.push(ot,at,ht),O.faces.push(new o(ot,at,ht))}return i&&(i.faces=i.faces.concat(O.faces),i.vertices=i.vertices.concat(O.verts)),O}},function(t,i,n){var o=n(65),a=n(0),u=n(11),d=n(200),f=n(12),p=new a({Extends:o,Mixins:[u.ScrollFactor,u.Visible],initialize:function Light2(t,i,n,a,u,f,p){o.call(this,t,i,n),this.color=new d(a,u,f),this.intensity=p,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function(t){return!(p.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},setColor:function(t){var i=f.getFloatsFromUintRGB(t);return this.color.set(i[0],i[1],i[2]),this},setIntensity:function(t){return this.intensity=t,this},setRadius:function(t){return this.radius=t,this}});p.RENDER_MASK=15,t.exports=p},function(t,i,n){var o=n(151),a=n(0),u=n(50),d=n(481),f=n(150),p=n(200),b=n(74),S=n(79),M=n(12),C=new a({initialize:function LightsManager2(){this.lights=[],this.ambientColor=new p(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(t,i,n,o,a,u){return this.systems.displayList.add(new f(this.scene,t,i,n,o,a,u))},enable:function(){return-1===this.maxLights&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(t){for(var i=this.lights,n=t.worldView,a=[],d=0;d<i.length;d++){var f=i[d];f.willRender(t)&&o(f,n)&&a.push({light:f,distance:u(f.x,f.y,n.centerX,n.centerY)})}return a.length>this.maxLights&&(S(a,this.sortByDistance),a=a.slice(0,this.maxLights)),this.visibleLights=a.length,a},sortByDistance:function(t,i){return t.distance>=i.distance},setAmbientColor:function(t){var i=M.getFloatsFromUintRGB(t);return this.ambientColor.set(i[0],i[1],i[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(t,i,n,o,a){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=128),void 0===o&&(o=16777215),void 0===a&&(a=1);var u=M.getFloatsFromUintRGB(o),f=new d(t,i,n,u[0],u[1],u[2],a);return this.lights.push(f),f},removeLight:function(t){var i=this.lights.indexOf(t);return i>=0&&b(this.lights,i),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});t.exports=C},function(t,i,n){var o=n(56),a=n(17),u={Circle:n(1191),Ellipse:n(1201),Intersects:n(484),Line:n(1221),Mesh:n(1243),Point:n(1246),Polygon:n(1260),Rectangle:n(502),Triangle:n(1293)};u=a(!1,u,o),t.exports=u},function(t,i,n){t.exports={CircleToCircle:n(231),CircleToRectangle:n(151),GetCircleToCircle:n(1211),GetCircleToRectangle:n(1212),GetLineToCircle:n(232),GetLineToLine:n(485),GetLineToPoints:n(486),GetLineToPolygon:n(487),GetLineToRectangle:n(234),GetRaysFromPointToPolygon:n(1213),GetRectangleIntersection:n(1214),GetRectangleToRectangle:n(1215),GetRectangleToTriangle:n(1216),GetTriangleToCircle:n(1217),GetTriangleToLine:n(492),GetTriangleToTriangle:n(1218),LineToCircle:n(233),LineToLine:n(96),LineToRectangle:n(488),PointToLine:n(496),PointToLineSegment:n(1219),RectangleToRectangle:n(152),RectangleToTriangle:n(489),RectangleToValues:n(1220),TriangleToCircle:n(491),TriangleToLine:n(493),TriangleToTriangle:n(494)}},function(t,i,n){var o=n(39);t.exports=function(t,i,n){var a=t.x1,u=t.y1,d=t.x2,f=t.y2,p=i.x1,b=i.y1,S=d-a,M=f-u,C=i.x2-p,P=i.y2-b;if(0===S||0==P*S-C*M)return!1;var R=(S*(b-u)+M*(a-p))/(C*M-P*S),O=(p+C*R-a)/S;return O<0||R<0||R>1?null:(void 0===n&&(n=new o),n.set(a+S*O,u+M*O,O))}},function(t,i,n){var o=n(39),a=n(485),u=new(n(47)),d=new o;t.exports=function(t,i,n){void 0===n&&(n=new o);var f=!1;n.set(),d.set();for(var p=i[0],b=1;b<i.length;b++){var S=i[b];u.setTo(p.x,p.y,S.x,S.y),p=S,a(t,u,d)&&(!f||d.z<n.z)&&(n.copy(d),f=!0)}return f?n:null}},function(t,i,n){var o=n(39),a=n(140),u=n(486),d=new o;t.exports=function(t,i,n){void 0===n&&(n=new a),Array.isArray(i)||(i=[i]);var o=!1;n.set(),d.set();for(var f=0;f<i.length;f++)u(t,i[f].points,d)&&(!o||d.z<n.z)&&(n.set(d.x,d.y,d.z,f),o=!0);return o?n:null}},function(t,i){t.exports=function(t,i){var n=t.x1,o=t.y1,a=t.x2,u=t.y2,d=i.x,f=i.y,p=i.right,b=i.bottom,S=0;if(n>=d&&n<=p&&o>=f&&o<=b||a>=d&&a<=p&&u>=f&&u<=b)return!0;if(n<d&&a>=d){if((S=o+(u-o)*(d-n)/(a-n))>f&&S<=b)return!0}else if(n>p&&a<=p&&(S=o+(u-o)*(p-n)/(a-n))>=f&&S<=b)return!0;if(o<f&&u>=f){if((S=n+(a-n)*(f-o)/(u-o))>=d&&S<=p)return!0}else if(o>b&&u<=b&&(S=n+(a-n)*(b-o)/(u-o))>=d&&S<=p)return!0;return!1}},function(t,i,n){var o=n(96),a=n(57),u=n(235),d=n(490);t.exports=function(t,i){if(i.left>t.right||i.right<t.left||i.top>t.bottom||i.bottom<t.top)return!1;var n=i.getLineA(),f=i.getLineB(),p=i.getLineC();if(a(t,n.x1,n.y1)||a(t,n.x2,n.y2))return!0;if(a(t,f.x1,f.y1)||a(t,f.x2,f.y2))return!0;if(a(t,p.x1,p.y1)||a(t,p.x2,p.y2))return!0;var b=t.getLineA(),S=t.getLineB(),M=t.getLineC(),C=t.getLineD();if(o(n,b)||o(n,S)||o(n,M)||o(n,C))return!0;if(o(f,b)||o(f,S)||o(f,M)||o(f,C))return!0;if(o(p,b)||o(p,S)||o(p,M)||o(p,C))return!0;var P=d(t);return u(i,P,!0).length>0}},function(t,i){t.exports=function(t,i){return void 0===i&&(i=[]),i.push({x:t.x,y:t.y}),i.push({x:t.right,y:t.y}),i.push({x:t.right,y:t.bottom}),i.push({x:t.x,y:t.bottom}),i}},function(t,i,n){var o=n(233),a=n(115);t.exports=function(t,i){return!(t.left>i.right||t.right<i.left||t.top>i.bottom||t.bottom<i.top||!a(t,i.x,i.y)&&!o(t.getLineA(),i)&&!o(t.getLineB(),i)&&!o(t.getLineC(),i))}},function(t,i,n){var o=n(4),a=n(493),u=n(96);t.exports=function(t,i,n){if(void 0===n&&(n=[]),a(t,i))for(var d=t.getLineA(),f=t.getLineB(),p=t.getLineC(),b=[new o,new o,new o],S=[u(d,i,b[0]),u(f,i,b[1]),u(p,i,b[2])],M=0;M<3;M++)S[M]&&n.push(b[M]);return n}},function(t,i,n){var o=n(96);t.exports=function(t,i){return!!(t.contains(i.x1,i.y1)||t.contains(i.x2,i.y2)||o(t.getLineA(),i)||o(t.getLineB(),i)||o(t.getLineC(),i))}},function(t,i,n){var o=n(235),a=n(495),u=n(96);t.exports=function(t,i){if(t.left>i.right||t.right<i.left||t.top>i.bottom||t.bottom<i.top)return!1;var n=t.getLineA(),d=t.getLineB(),f=t.getLineC(),p=i.getLineA(),b=i.getLineB(),S=i.getLineC();if(u(n,p)||u(n,b)||u(n,S))return!0;if(u(d,p)||u(d,b)||u(d,S))return!0;if(u(f,p)||u(f,b)||u(f,S))return!0;var M=a(t),C=o(i,M,!0);return C.length>0||(M=a(i),(C=o(t,M,!0)).length>0)}},function(t,i){t.exports=function(t,i){return void 0===i&&(i=[]),i.push({x:t.x1,y:t.y1}),i.push({x:t.x2,y:t.y2}),i.push({x:t.x3,y:t.y3}),i}},function(t,i){t.exports=function(t,i,n){void 0===n&&(n=1);var o=i.x1,a=i.y1,u=i.x2,d=i.y2,f=t.x,p=t.y,b=(u-o)*(u-o)+(d-a)*(d-a);if(0===b)return!1;var S=((f-o)*(u-o)+(p-a)*(d-a))/b;if(S<0)return Math.sqrt((o-f)*(o-f)+(a-p)*(a-p))<=n;if(S>=0&&S<=1){var M=((a-p)*(u-o)-(o-f)*(d-a))/b;return Math.abs(M)*Math.sqrt(b)<=n}return Math.sqrt((u-f)*(u-f)+(d-p)*(d-p))<=n}},function(t,i,n){var o=n(14),a=n(68),u=n(97);t.exports=function(t){var i=u(t)-o.TAU;return a(i,-Math.PI,Math.PI)}},function(t,i){var n=!0,o="untitled",a="",u="";function stripComments(t){var i=t.indexOf("#");return i>-1?t.substring(0,i):t}function currentModel(t){return 0===t.models.length&&t.models.push({faces:[],name:o,textureCoords:[],vertexNormals:[],vertices:[]}),a="",t.models[t.models.length-1]}function parseObject(t,i){var n=t.length>=2?t[1]:o;i.models.push({faces:[],name:n,textureCoords:[],vertexNormals:[],vertices:[]}),a=""}function parseGroup(t){2===t.length&&(a=t[1])}function parseVertexCoords(t,i){var n=t.length,o=n>=2?parseFloat(t[1]):0,a=n>=3?parseFloat(t[2]):0,u=n>=4?parseFloat(t[3]):0;currentModel(i).vertices.push({x:o,y:a,z:u})}function parseTextureCoords(t,i){var o=t.length,a=o>=2?parseFloat(t[1]):0,u=o>=3?parseFloat(t[2]):0,d=o>=4?parseFloat(t[3]):0;isNaN(a)&&(a=0),isNaN(u)&&(u=0),isNaN(d)&&(d=0),n&&(u=1-u),currentModel(i).textureCoords.push({u:a,v:u,w:d})}function parseVertexNormal(t,i){var n=t.length,o=n>=2?parseFloat(t[1]):0,a=n>=3?parseFloat(t[2]):0,u=n>=4?parseFloat(t[3]):0;currentModel(i).vertexNormals.push({x:o,y:a,z:u})}function parsePolygon(t,i){var n=t.length-1;if(!(n<3)){for(var o={group:a,material:u,vertices:[]},d=0;d<n;d++){var f=t[d+1].split("/"),p=f.length;if(!(p<1||p>3)){var b=0,S=0,M=0;b=parseInt(f[0],10),p>1&&""!==f[1]&&(S=parseInt(f[1],10)),p>2&&(M=parseInt(f[2],10)),0!==b&&(b<0&&(b=currentModel(i).vertices.length+1+b),S-=1,b-=1,M-=1,o.vertices.push({textureCoordsIndex:S,vertexIndex:b,vertexNormalIndex:M}))}}currentModel(i).faces.push(o)}}function parseMtlLib(t,i){t.length>=2&&i.materialLibraries.push(t[1])}function parseUseMtl(t){t.length>=2&&(u=t[1])}t.exports=function(t,i){void 0===i&&(i=!0),n=i;var o={materials:{},materialLibraries:[],models:[]};a="",u="";for(var d=t.split("\n"),f=0;f<d.length;f++){var p=stripComments(d[f]).replace(/\s\s+/g," ").trim().split(" ");switch(p[0].toLowerCase()){case"o":parseObject(p,o);break;case"g":parseGroup(p);break;case"v":parseVertexCoords(p,o);break;case"vt":parseTextureCoords(p,o);break;case"vn":parseVertexNormal(p,o);break;case"f":parsePolygon(p,o);break;case"mtllib":parseMtlLib(p,o);break;case"usemtl":parseUseMtl(p)}}return o}},function(t,i,n){var o=n(103);t.exports=function(t){for(var i={},n=t.split("\n"),a="",u=0;u<n.length;u++){var d=n[u].trim();if(0!==d.indexOf("#")&&""!==d){var f=d.replace(/\s\s+/g," ").trim().split(" ");switch(f[0].toLowerCase()){case"newmtl":a=f[1];break;case"kd":var p=Math.floor(255*f[1]),b=f.length>=2?Math.floor(255*f[2]):p,S=f.length>=3?Math.floor(255*f[3]):p;i[a]=o(p,b,S)}}}return i}},function(t,i){t.exports=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)}},function(t,i){t.exports=function(t){return t.x*t.x+t.y*t.y}},function(t,i,n){var o=n(10);o.Area=n(1267),o.Ceil=n(1268),o.CeilAll=n(1269),o.CenterOn=n(190),o.Clone=n(1270),o.Contains=n(57),o.ContainsPoint=n(1271),o.ContainsRect=n(503),o.CopyFrom=n(1272),o.Decompose=n(490),o.Equals=n(1273),o.FitInside=n(1274),o.FitOutside=n(1275),o.Floor=n(1276),o.FloorAll=n(1277),o.FromPoints=n(199),o.FromXY=n(1278),o.GetAspectRatio=n(237),o.GetCenter=n(1279),o.GetPoint=n(171),o.GetPoints=n(306),o.GetSize=n(1280),o.Inflate=n(1281),o.Intersection=n(1282),o.MarchingAnts=n(316),o.MergePoints=n(1283),o.MergeRect=n(1284),o.MergeXY=n(1285),o.Offset=n(1286),o.OffsetPoint=n(1287),o.Overlaps=n(1288),o.Perimeter=n(130),o.PerimeterPoint=n(1289),o.Random=n(174),o.RandomOutside=n(1290),o.SameDimensions=n(1291),o.Scale=n(1292),o.Union=n(441),t.exports=o},function(t,i){t.exports=function(t,i){return!(i.width*i.height>t.width*t.height)&&i.x>t.x&&i.x<t.right&&i.right>t.x&&i.right<t.right&&i.y>t.y&&i.y<t.bottom&&i.bottom>t.y&&i.bottom<t.bottom}},function(t,i,n){var o=n(4);t.exports=function(t,i){return void 0===i&&(i=new o),i.x=(t.x1+t.x2+t.x3)/3,i.y=(t.y1+t.y2+t.y3)/3,i}},function(t,i){t.exports=function(t,i,n){return t.x1+=i,t.y1+=n,t.x2+=i,t.y2+=n,t.x3+=i,t.y3+=n,t}},function(t,i,n){var o=n(4);function getLength(t,i,n,o){var a=t-n,u=i-o,d=a*a+u*u;return Math.sqrt(d)}t.exports=function(t,i){void 0===i&&(i=new o);var n=t.x1,a=t.y1,u=t.x2,d=t.y2,f=t.x3,p=t.y3,b=getLength(f,p,u,d),S=getLength(n,a,f,p),M=getLength(u,d,n,a),C=b+S+M;return i.x=(n*b+u*S+f*M)/C,i.y=(a*b+d*S+p*M)/C,i}},function(t,i){t.exports=function(t,i){return function(n,o,a,u){var d=t.getPixelAlpha(o,a,u.texture.key,u.frame.name);return d&&d>=i}}},function(t,i){t.exports=function(t,i,n){return{gameObject:t,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:i,hitAreaCallback:n,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}}},function(t,i,n){var o=new(n(0))({initialize:function Axis2(t,i){this.pad=t,this.events=t.events,this.index=i,this.value=0,this.threshold=.1},update:function(t){this.value=t},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});t.exports=o},function(t,i,n){var o=n(0),a=n(239),u=new o({initialize:function Button2(t,i){this.pad=t,this.events=t.manager,this.index=i,this.value=0,this.threshold=1,this.pressed=!1},update:function(t){this.value=t;var i=this.pad,n=this.index;t>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(a.BUTTON_DOWN,i,this,t),this.pad.emit(a.GAMEPAD_BUTTON_DOWN,n,t,this)):this.pressed&&(this.pressed=!1,this.events.emit(a.BUTTON_UP,i,this,t),this.pad.emit(a.GAMEPAD_BUTTON_UP,n,t,this))},destroy:function(){this.pad=null,this.events=null}});t.exports=u},function(t,i,n){var o=n(509),a=n(510),u=n(0),d=n(9),f=n(3),p=new u({Extends:d,initialize:function Gamepad2(t,i){d.call(this),this.manager=t,this.pad=i,this.id=i.id,this.index=i.index;for(var n=[],u=0;u<i.buttons.length;u++)n.push(new a(this,u));this.buttons=n;var p=[];for(u=0;u<i.axes.length;u++)p.push(new o(this,u));this.axes=p,this.vibration=i.vibrationActuator;var b={value:0,pressed:!1};this._LCLeft=n[14]?n[14]:b,this._LCRight=n[15]?n[15]:b,this._LCTop=n[12]?n[12]:b,this._LCBottom=n[13]?n[13]:b,this._RCLeft=n[2]?n[2]:b,this._RCRight=n[1]?n[1]:b,this._RCTop=n[3]?n[3]:b,this._RCBottom=n[0]?n[0]:b,this._FBLeftTop=n[4]?n[4]:b,this._FBLeftBottom=n[6]?n[6]:b,this._FBRightTop=n[5]?n[5]:b,this._FBRightBottom=n[7]?n[7]:b;var S={value:0};this._HAxisLeft=p[0]?p[0]:S,this._VAxisLeft=p[1]?p[1]:S,this._HAxisRight=p[2]?p[2]:S,this._VAxisRight=p[3]?p[3]:S,this.leftStick=new f,this.rightStick=new f,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(t){return this.axes[t].getValue()},setAxisThreshold:function(t){for(var i=0;i<this.axes.length;i++)this.axes[i].threshold=t},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(t){return this.buttons[t].value},isButtonDown:function(t){return this.buttons[t].pressed},update:function(t){if(!(t.timestamp<this._created)){var i,n=this.buttons,o=t.buttons,a=n.length;for(i=0;i<a;i++)n[i].update(o[i].value);var u=this.axes,d=t.axes;for(a=u.length,i=0;i<a;i++)u[i].update(d[i]);a>=2&&(this.leftStick.set(u[0].getValue(),u[1].getValue()),a>=4&&this.rightStick.set(u[2].getValue(),u[3].getValue()))}},destroy:function(){var t;for(this.removeAllListeners(),this.manager=null,this.pad=null,t=0;t<this.buttons.length;t++)this.buttons[t].destroy();for(t=0;t<this.axes.length;t++)this.axes[t].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});t.exports=p},function(t,i,n){var o=n(0),a=n(9),u=n(154),d=new o({Extends:a,initialize:function Key2(t,i){a.call(this),this.plugin=t,this.keyCode=i,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(t){return this.emitOnRepeat=t,this},onDown:function(t){this.originalEvent=t,this.enabled&&(this.altKey=t.altKey,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.location=t.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(u.DOWN,this,t):(this.isDown=!0,this.isUp=!1,this.timeDown=t.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(u.DOWN,this,t)))},onUp:function(t){this.originalEvent=t,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=t.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(u.UP,this,t))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});t.exports=d},function(t,i,n){var o=n(0),a=n(154),u=n(2),d=n(514),f=n(516),p=new o({initialize:function KeyCombo2(t,i,n){if(void 0===n&&(n={}),i.length<2)return!1;this.manager=t,this.enabled=!0,this.keyCodes=[];for(var o=0;o<i.length;o++){var p=i[o];"string"==typeof p?this.keyCodes.push(p.toUpperCase().charCodeAt(0)):"number"==typeof p?this.keyCodes.push(p):p.hasOwnProperty("keyCode")&&this.keyCodes.push(p.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=u(n,"resetOnWrongKey",!0),this.maxKeyDelay=u(n,"maxKeyDelay",0),this.resetOnMatch=u(n,"resetOnMatch",!1),this.deleteOnMatch=u(n,"deleteOnMatch",!1);var b=this;this.onKeyDown=function(t){!b.matched&&b.enabled&&d(t,b)&&(b.manager.emit(a.COMBO_MATCH,b,t),b.resetOnMatch?f(b):b.deleteOnMatch&&b.destroy())},this.manager.on(a.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(a.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});t.exports=p},function(t,i,n){var o=n(515);t.exports=function(t,i){if(i.matched)return!0;var n=!1,a=!1;if(t.keyCode===i.current)if(i.index>0&&i.maxKeyDelay>0){var u=i.timeLastMatched+i.maxKeyDelay;t.timeStamp<=u&&(a=!0,n=o(t,i))}else a=!0,n=o(t,i);return!a&&i.resetOnWrongKey&&(i.index=0,i.current=i.keyCodes[0]),n&&(i.timeLastMatched=t.timeStamp,i.matched=!0,i.timeMatched=t.timeStamp),n}},function(t,i){t.exports=function(t,i){return i.timeLastMatched=t.timeStamp,i.index++,i.index===i.size||(i.current=i.keyCodes[i.index],!1)}},function(t,i){t.exports=function(t){return t.current=t.keyCodes[0],t.index=0,t.timeLastMatched=0,t.matched=!1,t.timeMatched=0,t}},function(t,i,n){var o=n(240);t.exports=function(t,i){var n=o(i,t.xhrSettings),a=new XMLHttpRequest;if(a.open("GET",t.src,n.async,n.user,n.password),a.responseType=t.xhrSettings.responseType,a.timeout=n.timeout,n.headers)for(var u in n.headers)a.setRequestHeader(u,n.headers[u]);return n.header&&n.headerValue&&a.setRequestHeader(n.header,n.headerValue),n.requestedWith&&a.setRequestHeader("X-Requested-With",n.requestedWith),n.overrideMimeType&&a.overrideMimeType(n.overrideMimeType),n.withCredentials&&(a.withCredentials=!0),a.onload=t.onLoad.bind(t,a),a.onerror=t.onError.bind(t,a),a.onprogress=t.onProgress.bind(t),a.send(),a}},function(t,i,n){var o=n(0),a=n(21),u=n(23),d=n(8),f=n(2),p=n(519),b=n(7),S=new o({Extends:u,initialize:function AudioFile2(t,i,n,o,a){if(b(i)){var d=i;i=f(d,"key"),o=f(d,"xhrSettings"),a=f(d,"context",a)}var p={type:"audio",cache:t.cacheManager.audio,extension:n.type,responseType:"arraybuffer",key:i,url:n.url,xhrSettings:o,config:{context:a}};u.call(this,t,p)},onProcess:function(){this.state=a.FILE_PROCESSING;var t=this;this.config.context.decodeAudioData(this.xhrLoader.response,(function(i){t.data=i,t.onProcessComplete()}),(function(i){console.error("Error decoding audio: "+t.key+" - ",i?i.message:null),t.onProcessError()})),this.config.context=null}});S.create=function(t,i,n,o,a){var u=t.systems.game,d=u.config.audio,M=u.device.audio;b(i)&&(n=f(i,"url",[]),o=f(i,"config",{}));var C=S.getAudioURL(u,n);return C?M.webAudio&&!d.disableWebAudio?new S(t,i,C,a,u.sound.context):new p(t,i,C,o):null},S.getAudioURL=function(t,i){Array.isArray(i)||(i=[i]);for(var n=0;n<i.length;n++){var o=f(i[n],"url",i[n]);if(0===o.indexOf("blob:")||0===o.indexOf("data:"))return{url:o,type:""};var a=o.match(/\.([a-zA-Z0-9]+)($|\?)/);if(a=f(i[n],"type",a?a[1]:"").toLowerCase(),t.device.audio[a])return{url:o,type:a}}return null},d.register("audio",(function(t,i,n,o){var a,u=this.systems.game,d=u.config.audio,f=u.device.audio;if(d.noAudio||!f.webAudio&&!f.audioData)return this;if(Array.isArray(t))for(var p=0;p<t.length;p++)(a=S.create(this,t[p]))&&this.addFile(a);else(a=S.create(this,t,i,n,o))&&this.addFile(a);return this})),t.exports=S},function(t,i,n){var o=n(0),a=n(95),u=n(23),d=n(2),f=n(155),p=n(7),b=new o({Extends:u,initialize:function HTML5AudioFile2(t,i,n,o){if(p(i)){var a=i;i=d(a,"key"),o=d(a,"config",o)}var f={type:"audio",cache:t.cacheManager.audio,extension:n.type,key:i,url:n.url,config:o};u.call(this,t,f),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var t=0;t<this.data.length;t++){var i=this.data[t];i.oncanplaythrough=null,i.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(t){var i=t.target;i.oncanplaythrough=null,i.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(a.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var t=this.config&&this.config.instances||1;this.filesTotal=t,this.filesLoaded=0,this.percentComplete=0;for(var i=0;i<t;i++){var n=new Audio;n.dataset||(n.dataset={}),n.dataset.name=this.key+("0"+i).slice(-2),n.dataset.used="false",this.locked?n.dataset.locked="true":(n.dataset.locked="false",n.preload="auto",n.oncanplaythrough=this.onProgress.bind(this),n.onerror=this.onError.bind(this)),this.data.push(n)}for(i=0;i<this.data.length;i++)(n=this.data[i]).src=f(this,this.loader.baseURL),this.locked||n.load();this.locked&&setTimeout(this.onLoad.bind(this))}});t.exports=b},function(t,i,n){var o=n(0),a=n(21),u=n(23),d=n(8),f=n(2),p=n(7),b=new o({Extends:u,initialize:function ScriptFile2(t,i,n,o){var a="js";if(p(i)){var d=i;i=f(d,"key"),n=f(d,"url"),o=f(d,"xhrSettings"),a=f(d,"extension",a)}var b={type:"script",cache:!1,extension:a,responseType:"text",key:i,url:n,xhrSettings:o};u.call(this,t,b)},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});d.register("script",(function(t,i,n){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new b(this,t[o]));else this.addFile(new b(this,t,i,n));return this})),t.exports=b},function(t,i,n){var o=n(522),a=n(157),u=n(0),d=n(62),f=n(524),p=n(525),b=new u({initialize:function Factory2(t){this.world=t,this.scene=t.scene,this.sys=t.scene.sys},collider:function(t,i,n,o,a){return this.world.addCollider(t,i,n,o,a)},overlap:function(t,i,n,o,a){return this.world.addOverlap(t,i,n,o,a)},existing:function(t,i){var n=i?d.STATIC_BODY:d.DYNAMIC_BODY;return this.world.enableBody(t,n),t},staticImage:function(t,i,n,a){var u=new o(this.scene,t,i,n,a);return this.sys.displayList.add(u),this.world.enableBody(u,d.STATIC_BODY),u},image:function(t,i,n,a){var u=new o(this.scene,t,i,n,a);return this.sys.displayList.add(u),this.world.enableBody(u,d.DYNAMIC_BODY),u},staticSprite:function(t,i,n,o){var u=new a(this.scene,t,i,n,o);return this.sys.displayList.add(u),this.sys.updateList.add(u),this.world.enableBody(u,d.STATIC_BODY),u},sprite:function(t,i,n,o){var u=new a(this.scene,t,i,n,o);return this.sys.displayList.add(u),this.sys.updateList.add(u),this.world.enableBody(u,d.DYNAMIC_BODY),u},staticGroup:function(t,i){return this.sys.updateList.add(new p(this.world,this.world.scene,t,i))},group:function(t,i){return this.sys.updateList.add(new f(this.world,this.world.scene,t,i))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});t.exports=b},function(t,i,n){var o=n(0),a=n(243),u=n(125),d=new o({Extends:u,Mixins:[a.Acceleration,a.Angular,a.Bounce,a.Debug,a.Drag,a.Enable,a.Friction,a.Gravity,a.Immovable,a.Mass,a.Pushable,a.Size,a.Velocity],initialize:function ArcadeImage2(t,i,n,o,a){u.call(this,t,i,n,o,a),this.body=null}});t.exports=d},function(t,i,n){var o=n(244),a=n(65),u=n(231),d=n(151);t.exports=function(t,i,n,f,p,b){var S=o(t,i-f,n-f,2*f,2*f,p,b);if(0===S.length)return S;for(var M=new a(i,n,f),C=new a,P=[],R=0;R<S.length;R++){var O=S[R];O.isCircle?(C.setTo(O.center.x,O.center.y,O.halfWidth),u(M,C)&&P.push(O)):d(M,O)&&P.push(O)}return P}},function(t,i,n){var o=n(157),a=n(0),u=n(62),d=n(2),f=n(113),p=n(7),b=new a({Extends:f,initialize:function PhysicsGroup2(t,i,n,a){if(n||a)if(p(n))a=n,n=null,a.internalCreateCallback=this.createCallbackHandler,a.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(n)&&p(n[0])){a=n[0];var b=this;n.forEach((function(t){t.internalCreateCallback=b.createCallbackHandler,t.internalRemoveCallback=b.removeCallbackHandler})),n=null}else a={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else a={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=t,a.classType=d(a,"classType",o),this.physicsType=u.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:d(a,"collideWorldBounds",!1),setBoundsRectangle:d(a,"customBoundsRectangle",null),setAccelerationX:d(a,"accelerationX",0),setAccelerationY:d(a,"accelerationY",0),setAllowDrag:d(a,"allowDrag",!0),setAllowGravity:d(a,"allowGravity",!0),setAllowRotation:d(a,"allowRotation",!0),setBounceX:d(a,"bounceX",0),setBounceY:d(a,"bounceY",0),setDragX:d(a,"dragX",0),setDragY:d(a,"dragY",0),setEnable:d(a,"enable",!0),setGravityX:d(a,"gravityX",0),setGravityY:d(a,"gravityY",0),setFrictionX:d(a,"frictionX",0),setFrictionY:d(a,"frictionY",0),setMaxVelocityX:d(a,"maxVelocityX",1e4),setMaxVelocityY:d(a,"maxVelocityY",1e4),setVelocityX:d(a,"velocityX",0),setVelocityY:d(a,"velocityY",0),setAngularVelocity:d(a,"angularVelocity",0),setAngularAcceleration:d(a,"angularAcceleration",0),setAngularDrag:d(a,"angularDrag",0),setMass:d(a,"mass",1),setImmovable:d(a,"immovable",!1)},f.call(this,i,n,a),this.type="PhysicsGroup"},createCallbackHandler:function(t){t.body||this.world.enableBody(t,u.DYNAMIC_BODY);var i=t.body;for(var n in this.defaults)i[n](this.defaults[n])},removeCallbackHandler:function(t){t.body&&this.world.disableBody(t)},setVelocity:function(t,i,n){void 0===n&&(n=0);for(var o=this.getChildren(),a=0;a<o.length;a++)o[a].body.velocity.set(t+a*n,i+a*n);return this},setVelocityX:function(t,i){void 0===i&&(i=0);for(var n=this.getChildren(),o=0;o<n.length;o++)n[o].body.velocity.x=t+o*i;return this},setVelocityY:function(t,i){void 0===i&&(i=0);for(var n=this.getChildren(),o=0;o<n.length;o++)n[o].body.velocity.y=t+o*i;return this}});t.exports=b},function(t,i,n){var o=n(157),a=n(0),u=n(62),d=n(2),f=n(113),p=n(7),b=new a({Extends:f,initialize:function StaticPhysicsGroup2(t,i,n,a){n||a?p(n)?(a=n,n=null,a.internalCreateCallback=this.createCallbackHandler,a.internalRemoveCallback=this.removeCallbackHandler,a.createMultipleCallback=this.createMultipleCallbackHandler,a.classType=d(a,"classType",o)):Array.isArray(n)&&p(n[0])?(a=n,n=null,a.forEach((function(t){t.internalCreateCallback=this.createCallbackHandler,t.internalRemoveCallback=this.removeCallbackHandler,t.createMultipleCallback=this.createMultipleCallbackHandler,t.classType=d(t,"classType",o)}))):a={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler}:a={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:o},this.world=t,this.physicsType=u.STATIC_BODY,f.call(this,i,n,a),this.type="StaticPhysicsGroup"},createCallbackHandler:function(t){t.body||this.world.enableBody(t,u.STATIC_BODY)},removeCallbackHandler:function(t){t.body&&this.world.disableBody(t)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var t=this.children.entries,i=0;i<t.length;i++)t[i].body.reset();return this}});t.exports=b},function(t,i,n){var o=n(350),a=n(527),u=n(18),d=n(0),f=n(528),p=n(62),b=n(50),S=n(9),M=n(245),C=n(124),P=n(354),R=n(355),O=n(246),B=n(247),N=n(529),Y=n(6),X=n(14),G=n(211),U=n(530),V=n(10),z=n(531),W=n(532),H=n(537),j=n(538),q=n(149),Z=n(539),K=n(248),$=n(25),tt=n(3),et=n(68),it=new d({Extends:S,initialize:function World3(t,i){S.call(this),this.scene=t,this.bodies=new q,this.staticBodies=new q,this.pendingDestroy=new q,this.colliders=new G,this.gravity=new tt(Y(i,"gravity.x",0),Y(i,"gravity.y",0)),this.bounds=new V(Y(i,"x",0),Y(i,"y",0),Y(i,"width",t.sys.scale.width),Y(i,"height",t.sys.scale.height)),this.checkCollision={up:Y(i,"checkCollision.up",!0),down:Y(i,"checkCollision.down",!0),left:Y(i,"checkCollision.left",!0),right:Y(i,"checkCollision.right",!0)},this.fps=Y(i,"fps",60),this.fixedStep=Y(i,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=Y(i,"timeScale",1),this.OVERLAP_BIAS=Y(i,"overlapBias",4),this.TILE_BIAS=Y(i,"tileBias",16),this.forceX=Y(i,"forceX",!1),this.isPaused=Y(i,"isPaused",!1),this._total=0,this.drawDebug=Y(i,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:Y(i,"debugShowBody",!0),debugShowStaticBody:Y(i,"debugShowStaticBody",!0),debugShowVelocity:Y(i,"debugShowVelocity",!0),bodyDebugColor:Y(i,"debugBodyColor",16711935),staticBodyDebugColor:Y(i,"debugStaticBodyColor",255),velocityDebugColor:Y(i,"debugVelocityColor",65280)},this.maxEntries=Y(i,"maxEntries",16),this.useTree=Y(i,"useTree",!0),this.tree=new z(this.maxEntries),this.staticTree=new z(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new $,this._tempMatrix2=new $,this.drawDebug&&this.createDebugGraphic()},enable:function(t,i){void 0===i&&(i=p.DYNAMIC_BODY),Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var o=t[n];if(o.isParent)for(var a=o.getChildren(),u=0;u<a.length;u++){var d=a[u];d.isParent?this.enable(d,i):this.enableBody(d,i)}else this.enableBody(o,i)}},enableBody:function(t,i){return void 0===i&&(i=p.DYNAMIC_BODY),t.body||(i===p.DYNAMIC_BODY?t.body=new a(this,t):i===p.STATIC_BODY&&(t.body=new Z(this,t))),this.add(t.body),t},add:function(t){return t.physicsType===p.DYNAMIC_BODY?this.bodies.set(t):t.physicsType===p.STATIC_BODY&&(this.staticBodies.set(t),this.staticTree.insert(t)),t.enable=!0,t},disable:function(t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var n=t[i];if(n.isParent)for(var o=n.getChildren(),a=0;a<o.length;a++){var u=o[a];u.isParent?this.disable(u):this.disableBody(u.body)}else this.disableBody(n.body)}},disableBody:function(t){this.remove(t),t.enable=!1},remove:function(t){t.physicsType===p.DYNAMIC_BODY?(this.tree.remove(t),this.bodies.delete(t)):t.physicsType===p.STATIC_BODY&&(this.staticBodies.delete(t),this.staticTree.remove(t))},createDebugGraphic:function(){var t=this.scene.sys.add.graphics({x:0,y:0});return t.setDepth(Number.MAX_VALUE),this.debugGraphic=t,this.drawDebug=!0,t},setBounds:function(t,i,n,o,a,u,d,f){return this.bounds.setTo(t,i,n,o),void 0!==a&&this.setBoundsCollision(a,u,d,f),this},setBoundsCollision:function(t,i,n,o){return void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===n&&(n=!0),void 0===o&&(o=!0),this.checkCollision.left=t,this.checkCollision.right=i,this.checkCollision.up=n,this.checkCollision.down=o,this},pause:function(){return this.isPaused=!0,this.emit(M.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(M.RESUME),this},addCollider:function(t,i,n,o,a){void 0===n&&(n=null),void 0===o&&(o=null),void 0===a&&(a=n);var u=new f(this,!1,t,i,n,o,a);return this.colliders.add(u),u},addOverlap:function(t,i,n,o,a){void 0===n&&(n=null),void 0===o&&(o=null),void 0===a&&(a=n);var u=new f(this,!0,t,i,n,o,a);return this.colliders.add(u),u},removeCollider:function(t){return this.colliders.remove(t),this},setFPS:function(t){return this.fps=t,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(t,i){if(!this.isPaused&&0!==this.bodies.size){var n,o,a=this._frameTime,u=this._frameTimeMS*this.timeScale;this._elapsed+=i;var d=this.bodies.entries,f=this._elapsed>=u;for(this.fixedStep||(a=.001*i,f=!0,this._elapsed=0),n=0;n<d.length;n++)(o=d[n]).enable&&o.preUpdate(f,a);if(f){this._elapsed-=u,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(d));var p=this.colliders.update();for(n=0;n<p.length;n++){var b=p[n];b.active&&b.update()}this.emit(M.WORLD_STEP,a)}for(;this._elapsed>=u;)this._elapsed-=u,this.step(a)}},step:function(t){var i,n,o=this.bodies.entries,a=o.length;for(i=0;i<a;i++)(n=o[i]).enable&&n.update(t);this.useTree&&(this.tree.clear(),this.tree.load(o));var u=this.colliders.update();for(i=0;i<u.length;i++){var d=u[i];d.active&&d.update()}this.emit(M.WORLD_STEP,t),this.stepsLastFrame++},postUpdate:function(){var t,i,n=this.bodies.entries,o=n.length,a=this.bodies,u=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,t=0;t<o;t++)(i=n[t]).enable&&i.postUpdate();if(this.drawDebug){var d=this.debugGraphic;for(d.clear(),t=0;t<o;t++)(i=n[t]).willDrawDebug()&&i.drawDebug(d);for(o=(n=u.entries).length,t=0;t<o;t++)(i=n[t]).willDrawDebug()&&i.drawDebug(d)}var f=this.pendingDestroy;if(f.size>0){var b=this.tree,S=this.staticTree;for(o=(n=f.entries).length,t=0;t<o;t++)(i=n[t]).physicsType===p.DYNAMIC_BODY?(b.remove(i),a.delete(i)):i.physicsType===p.STATIC_BODY&&(S.remove(i),u.delete(i)),i.world=void 0,i.gameObject=void 0;f.clear()}},updateMotion:function(t,i){t.allowRotation&&this.computeAngularVelocity(t,i),this.computeVelocity(t,i)},computeAngularVelocity:function(t,i){var n=t.angularVelocity,o=t.angularAcceleration,a=t.angularDrag,d=t.maxAngular;o?n+=o*i:t.allowDrag&&a&&(P(n-(a*=i),0,.1)?n-=a:R(n+a,0,.1)?n+=a:n=0);var f=(n=u(n,-d,d))-t.angularVelocity;t.angularVelocity+=f,t.rotation+=t.angularVelocity*i},computeVelocity:function(t,i){var n=t.velocity.x,o=t.acceleration.x,a=t.drag.x,d=t.maxVelocity.x,f=t.velocity.y,p=t.acceleration.y,b=t.drag.y,S=t.maxVelocity.y,M=t.speed,O=t.maxSpeed,B=t.allowDrag,N=t.useDamping;t.allowGravity&&(n+=(this.gravity.x+t.gravity.x)*i,f+=(this.gravity.y+t.gravity.y)*i),o?n+=o*i:B&&a&&(N?(n*=a=Math.pow(a,i),M=Math.sqrt(n*n+f*f),C(M,0,.001)&&(n=0)):P(n-(a*=i),0,.01)?n-=a:R(n+a,0,.01)?n+=a:n=0),p?f+=p*i:B&&b&&(N?(f*=b=Math.pow(b,i),M=Math.sqrt(n*n+f*f),C(M,0,.001)&&(f=0)):P(f-(b*=i),0,.01)?f-=b:R(f+b,0,.01)?f+=b:f=0),n=u(n,-d,d),f=u(f,-S,S),t.velocity.set(n,f),O>-1&&M>O&&(t.velocity.normalize().scale(O),M=O),t.speed=M},separate:function(t,i,n,o,a,u){if(!u&&!t.enable||!i.enable||t.checkCollision.none||i.checkCollision.none||!this.intersects(t,i))return!1;if(n&&!1===n.call(o,t.gameObject,i.gameObject))return!1;if(t.isCircle&&i.isCircle)return this.separateCircle(t,i,a);if(t.isCircle!==i.isCircle){var d=t.isCircle?i:t,f=t.isCircle?t:i,p={x:d.x,y:d.y,right:d.right,bottom:d.bottom},b=f.center;if((b.y<p.y||b.y>p.bottom)&&(b.x<p.x||b.x>p.right))return this.separateCircle(t,i,a)}var S=!1,C=!1;a?(S=H(t,i,a,this.OVERLAP_BIAS),C=j(t,i,a,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+t.gravity.y)<Math.abs(this.gravity.x+t.gravity.x)?(S=H(t,i,a,this.OVERLAP_BIAS),this.intersects(t,i)&&(C=j(t,i,a,this.OVERLAP_BIAS))):(C=j(t,i,a,this.OVERLAP_BIAS),this.intersects(t,i)&&(S=H(t,i,a,this.OVERLAP_BIAS)));var P=S||C;return P&&(a?(t.onOverlap||i.onOverlap)&&this.emit(M.OVERLAP,t.gameObject,i.gameObject,t,i):(t.onCollide||i.onCollide)&&this.emit(M.COLLIDE,t.gameObject,i.gameObject,t,i)),P},separateCircle:function(t,i,n,a){O(t,i,!1,a),B(t,i,!1,a);var u=0;if(t.isCircle!==i.isCircle){var d={x:i.isCircle?t.position.x:i.position.x,y:i.isCircle?t.position.y:i.position.y,right:i.isCircle?t.right:i.right,bottom:i.isCircle?t.bottom:i.bottom},f={x:t.isCircle?t.center.x:i.center.x,y:t.isCircle?t.center.y:i.center.y,radius:t.isCircle?t.halfWidth:i.halfWidth};f.y<d.y?f.x<d.x?u=b(f.x,f.y,d.x,d.y)-f.radius:f.x>d.right&&(u=b(f.x,f.y,d.right,d.y)-f.radius):f.y>d.bottom&&(f.x<d.x?u=b(f.x,f.y,d.x,d.bottom)-f.radius:f.x>d.right&&(u=b(f.x,f.y,d.right,d.bottom)-f.radius)),u*=-1}else u=t.halfWidth+i.halfWidth-b(t.center.x,t.center.y,i.center.x,i.center.y);if(t.overlapR=u,i.overlapR=u,n||0===u||t.immovable&&i.immovable||t.customSeparateX||i.customSeparateX)return 0!==u&&(t.onOverlap||i.onOverlap)&&this.emit(M.OVERLAP,t.gameObject,i.gameObject,t,i),0!==u;var p=t.center.x-i.center.x,S=t.center.y-i.center.y,C=Math.sqrt(Math.pow(p,2)+Math.pow(S,2)),P=(i.center.x-t.center.x)/C||0,R=(i.center.y-t.center.y)/C||0,N=2*(t.velocity.x*P+t.velocity.y*R-i.velocity.x*P-i.velocity.y*R)/(t.mass+i.mass);(t.immovable||i.immovable)&&(N*=2),t.immovable||(t.velocity.x=t.velocity.x-N/t.mass*P,t.velocity.y=t.velocity.y-N/t.mass*R),i.immovable||(i.velocity.x=i.velocity.x+N/i.mass*P,i.velocity.y=i.velocity.y+N/i.mass*R),t.immovable||i.immovable||(u/=2);var Y=o(t.center,i.center),G=(u+X.EPSILON)*Math.cos(Y),U=(u+X.EPSILON)*Math.sin(Y);return t.immovable||(t.x-=G,t.y-=U,t.updateCenter()),i.immovable||(i.x+=G,i.y+=U,i.updateCenter()),t.velocity.x*=t.bounce.x,t.velocity.y*=t.bounce.y,i.velocity.x*=i.bounce.x,i.velocity.y*=i.bounce.y,(t.onCollide||i.onCollide)&&this.emit(M.COLLIDE,t.gameObject,i.gameObject,t,i),!0},intersects:function(t,i){return t!==i&&(t.isCircle||i.isCircle?t.isCircle?i.isCircle?b(t.center.x,t.center.y,i.center.x,i.center.y)<=t.halfWidth+i.halfWidth:this.circleBodyIntersects(t,i):this.circleBodyIntersects(i,t):!(t.right<=i.position.x||t.bottom<=i.position.y||t.position.x>=i.right||t.position.y>=i.bottom))},circleBodyIntersects:function(t,i){var n=u(t.center.x,i.left,i.right),o=u(t.center.y,i.top,i.bottom);return(t.center.x-n)*(t.center.x-n)+(t.center.y-o)*(t.center.y-o)<=t.halfWidth*t.halfWidth},overlap:function(t,i,n,o,a){return void 0===n&&(n=null),void 0===o&&(o=null),void 0===a&&(a=n),this.collideObjects(t,i,n,o,a,!0)},collide:function(t,i,n,o,a){return void 0===n&&(n=null),void 0===o&&(o=null),void 0===a&&(a=n),this.collideObjects(t,i,n,o,a,!1)},collideObjects:function(t,i,n,o,a,u){var d,f;t.isParent&&void 0===t.physicsType&&(t=t.children.entries),i&&i.isParent&&void 0===i.physicsType&&(i=i.children.entries);var p=Array.isArray(t),b=Array.isArray(i);if(this._total=0,p||b)if(!p&&b)for(d=0;d<i.length;d++)this.collideHandler(t,i[d],n,o,a,u);else if(p&&!b)if(i)for(d=0;d<t.length;d++)this.collideHandler(t[d],i,n,o,a,u);else for(d=0;d<t.length;d++){var S=t[d];for(f=d+1;f<t.length;f++)d!==f&&this.collideHandler(S,t[f],n,o,a,u)}else for(d=0;d<t.length;d++)for(f=0;f<i.length;f++)this.collideHandler(t[d],i[f],n,o,a,u);else this.collideHandler(t,i,n,o,a,u);return this._total>0},collideHandler:function(t,i,n,o,a,u){if(void 0===i&&t.isParent)return this.collideGroupVsGroup(t,t,n,o,a,u);if(!t||!i)return!1;if(t.body){if(i.body)return this.collideSpriteVsSprite(t,i,n,o,a,u);if(i.isParent)return this.collideSpriteVsGroup(t,i,n,o,a,u);if(i.isTilemap)return this.collideSpriteVsTilemapLayer(t,i,n,o,a,u)}else if(t.isParent){if(i.body)return this.collideSpriteVsGroup(i,t,n,o,a,u);if(i.isParent)return this.collideGroupVsGroup(t,i,n,o,a,u);if(i.isTilemap)return this.collideGroupVsTilemapLayer(t,i,n,o,a,u)}else if(t.isTilemap){if(i.body)return this.collideSpriteVsTilemapLayer(i,t,n,o,a,u);if(i.isParent)return this.collideGroupVsTilemapLayer(i,t,n,o,a,u)}},collideSpriteVsSprite:function(t,i,n,o,a,u){return!(!t.body||!i.body||(this.separate(t.body,i.body,o,a,u)&&(n&&n.call(a,t,i),this._total++),0))},collideSpriteVsGroup:function(t,i,n,o,a,u){var d,f,b,S=t.body;if(0!==i.length&&S&&S.enable&&!S.checkCollision.none)if(this.useTree||i.physicsType===p.STATIC_BODY){var M=this.treeMinMax;M.minX=S.left,M.minY=S.top,M.maxX=S.right,M.maxY=S.bottom;var C=i.physicsType===p.DYNAMIC_BODY?this.tree.search(M):this.staticTree.search(M);for(f=C.length,d=0;d<f;d++)S!==(b=C[d])&&b.enable&&!b.checkCollision.none&&i.contains(b.gameObject)&&this.separate(S,b,o,a,u,!0)&&(n&&n.call(a,S.gameObject,b.gameObject),this._total++)}else{var P=i.getChildren(),R=i.children.entries.indexOf(t);for(f=P.length,d=0;d<f;d++)(b=P[d].body)&&d!==R&&b.enable&&this.separate(S,b,o,a,u)&&(n&&n.call(a,S.gameObject,b.gameObject),this._total++)}},collideGroupVsTilemapLayer:function(t,i,n,o,a,u){var d=t.getChildren();if(0===d.length)return!1;for(var f=!1,p=0;p<d.length;p++)d[p].body&&this.collideSpriteVsTilemapLayer(d[p],i,n,o,a,u)&&(f=!0);return f},collideTiles:function(t,i,n,o,a){return!(!t.body.enable||0===i.length)&&this.collideSpriteVsTilesHandler(t,i,n,o,a,!1,!1)},overlapTiles:function(t,i,n,o,a){return!(!t.body.enable||0===i.length)&&this.collideSpriteVsTilesHandler(t,i,n,o,a,!0,!1)},collideSpriteVsTilemapLayer:function(t,i,n,o,a,u){var d=t.body;if(!d.enable||d.checkCollision.none)return!1;var f=d.position.x,p=d.position.y,b=d.width,S=d.height,M=i.layer;if(M.tileWidth>M.baseTileWidth){var C=(M.tileWidth-M.baseTileWidth)*i.scaleX;f-=C,b+=C}M.tileHeight>M.baseTileHeight&&(S+=(M.tileHeight-M.baseTileHeight)*i.scaleY);var P=N(f,p,b,S,null,i.scene.cameras.main,i.layer);return 0!==P.length&&this.collideSpriteVsTilesHandler(t,P,n,o,a,u,!0)},collideSpriteVsTilesHandler:function(t,i,n,o,a,u,d){for(var f,p,b=t.body,S={left:0,right:0,top:0,bottom:0},C=!1,P=0;P<i.length;P++){var R=(p=(f=i[P]).tilemapLayer).tileToWorldXY(f.x,f.y);S.left=R.x,S.top=R.y,f.baseHeight!==f.height&&(S.top-=(f.height-f.baseHeight)*p.scaleY),S.right=S.left+f.width*p.scaleX,S.bottom=S.top+f.height*p.scaleY,K(S,b)&&(!o||o.call(a,t,f))&&U(f,t)&&(u||W(P,b,f,S,p,this.TILE_BIAS,d))&&(this._total++,C=!0,n&&n.call(a,t,f),u&&b.onOverlap?this.emit(M.TILE_OVERLAP,t,f,b):b.onCollide&&this.emit(M.TILE_COLLIDE,t,f,b))}return C},collideGroupVsGroup:function(t,i,n,o,a,u){if(0!==t.length&&0!==i.length)for(var d=t.getChildren(),f=0;f<d.length;f++)this.collideSpriteVsGroup(d[f],i,n,o,a,u)},wrap:function(t,i){t.body?this.wrapObject(t,i):t.getChildren?this.wrapArray(t.getChildren(),i):Array.isArray(t)?this.wrapArray(t,i):this.wrapObject(t,i)},wrapArray:function(t,i){for(var n=0;n<t.length;n++)this.wrapObject(t[n],i)},wrapObject:function(t,i){void 0===i&&(i=0),t.x=et(t.x,this.bounds.left-i,this.bounds.right+i),t.y=et(t.y,this.bounds.top-i,this.bounds.bottom+i)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});t.exports=it},function(t,i,n){var o=n(0),a=n(62),u=n(245),d=n(196),f=n(10),p=n(57),b=n(3),S=new o({initialize:function Body2(t,i){var n=i.displayWidth?i.displayWidth:64,o=i.displayHeight?i.displayHeight:64;this.world=t,this.gameObject=i,this.transform={x:i.x,y:i.y,rotation:i.angle,scaleX:i.scaleX,scaleY:i.scaleY,displayOriginX:i.displayOriginX,displayOriginY:i.displayOriginY},this.debugShowBody=t.defaults.debugShowBody,this.debugShowVelocity=t.defaults.debugShowVelocity,this.debugBodyColor=t.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new b,this.position=new b(i.x-i.scaleX*i.displayOriginX,i.y-i.scaleY*i.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=i.angle,this.preRotation=i.angle,this.width=n,this.height=o,this.sourceWidth=n,this.sourceHeight=o,i.frame&&(this.sourceWidth=i.frame.realWidth,this.sourceHeight=i.frame.realHeight),this.halfWidth=Math.abs(n/2),this.halfHeight=Math.abs(o/2),this.center=new b(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new b,this.newVelocity=new b,this.deltaMax=new b,this.acceleration=new b,this.allowDrag=!0,this.drag=new b,this.allowGravity=!0,this.gravity=new b,this.bounce=new b,this.worldBounce=null,this.customBoundsRectangle=t.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new b(1e4,1e4),this.maxSpeed=-1,this.friction=new b(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=a.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=a.DYNAMIC_BODY,this._sx=i.scaleX,this._sy=i.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new f},updateBounds:function(){var t=this.gameObject,i=this.transform;if(t.parentContainer){var n=t.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);i.x=n.tx,i.y=n.ty,i.rotation=d(n.rotation),i.scaleX=n.scaleX,i.scaleY=n.scaleY,i.displayOriginX=t.displayOriginX,i.displayOriginY=t.displayOriginY}else i.x=t.x,i.y=t.y,i.rotation=t.angle,i.scaleX=t.scaleX,i.scaleY=t.scaleY,i.displayOriginX=t.displayOriginX,i.displayOriginY=t.displayOriginY;var o=!1;if(this.syncBounds){var a=t.getBounds(this._bounds);this.width=a.width,this.height=a.height,o=!0}else{var u=Math.abs(i.scaleX),f=Math.abs(i.scaleY);this._sx===u&&this._sy===f||(this.width=this.sourceWidth*u,this.height=this.sourceHeight*f,this._sx=u,this._sy=f,o=!0)}o&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var t=this.transform;this.position.x=t.x+t.scaleX*(this.offset.x-t.displayOriginX),this.position.y=t.y+t.scaleY*(this.offset.y-t.displayOriginY),this.updateCenter()},resetFlags:function(t){void 0===t&&(t=!1);var i=this.wasTouching,n=this.touching,o=this.blocked;t?(i.none=!0,i.up=!1,i.down=!1,i.left=!1,i.right=!1):(i.none=n.none,i.up=n.up,i.down=n.down,i.left=n.left,i.right=n.right),n.none=!0,n.up=!1,n.down=!1,n.left=!1,n.right=!1,o.none=!0,o.up=!1,o.down=!1,o.left=!1,o.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(t,i){t&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),t&&this.update(i)},update:function(t){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,t);var i=this.velocity.x,n=this.velocity.y;this.newVelocity.set(i*t,n*t),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(n,i),this.speed=Math.sqrt(i*i+n*n),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(u.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var t=this.position.x-this.prevFrame.x,i=this.position.y-this.prevFrame.y;if(this.moves){var n=this.deltaMax.x,o=this.deltaMax.y;0!==n&&0!==t&&(t<0&&t<-n?t=-n:t>0&&t>n&&(t=n)),0!==o&&0!==i&&(i<0&&i<-o?i=-o:i>0&&i>o&&(i=o)),this.gameObject.x+=t,this.gameObject.y+=i}t<0?this.facing=a.FACING_LEFT:t>0&&(this.facing=a.FACING_RIGHT),i<0?this.facing=a.FACING_UP:i>0&&(this.facing=a.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=t,this._ty=i},setBoundsRectangle:function(t){return this.customBoundsRectangle=t||this.world.bounds,this},checkWorldBounds:function(){var t=this.position,i=this.customBoundsRectangle,n=this.world.checkCollision,o=this.worldBounce?-this.worldBounce.x:-this.bounce.x,a=this.worldBounce?-this.worldBounce.y:-this.bounce.y,u=!1;return t.x<i.x&&n.left?(t.x=i.x,this.velocity.x*=o,this.blocked.left=!0,u=!0):this.right>i.right&&n.right&&(t.x=i.right-this.width,this.velocity.x*=o,this.blocked.right=!0,u=!0),t.y<i.y&&n.up?(t.y=i.y,this.velocity.y*=a,this.blocked.up=!0,u=!0):this.bottom>i.bottom&&n.down&&(t.y=i.bottom-this.height,this.velocity.y*=a,this.blocked.down=!0,u=!0),u&&(this.blocked.none=!1,this.updateCenter()),u},setOffset:function(t,i){return void 0===i&&(i=t),this.offset.set(t,i),this},setSize:function(t,i,n){void 0===n&&(n=!0);var o=this.gameObject;if(!t&&o.frame&&(t=o.frame.realWidth),!i&&o.frame&&(i=o.frame.realHeight),this.sourceWidth=t,this.sourceHeight=i,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),n&&o.getCenter){var a=(o.width-t)/2,u=(o.height-i)/2;this.offset.set(a,u)}return this.isCircle=!1,this.radius=0,this},setCircle:function(t,i,n){return void 0===i&&(i=this.offset.x),void 0===n&&(n=this.offset.y),t>0?(this.isCircle=!0,this.radius=t,this.sourceWidth=2*t,this.sourceHeight=2*t,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(i,n),this.updateCenter()):this.isCircle=!1,this},reset:function(t,i){this.stop();var n=this.gameObject;n.setPosition(t,i),n.getTopLeft?n.getTopLeft(this.position):this.position.set(t,i),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=n.angle,this.preRotation=n.angle,this.updateBounds(),this.updateCenter(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function(t,i){return this.isCircle?this.radius>0&&t>=this.left&&t<=this.right&&i>=this.top&&i<=this.bottom&&(this.center.x-t)*(this.center.x-t)+(this.center.y-i)*(this.center.y-i)<=this.radius*this.radius:p(this,t,i)},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(t){var i=this.position,n=i.x+this.halfWidth,o=i.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor),this.isCircle?t.strokeCircle(n,o,this.width/2):(this.checkCollision.up&&t.lineBetween(i.x,i.y,i.x+this.width,i.y),this.checkCollision.right&&t.lineBetween(i.x+this.width,i.y,i.x+this.width,i.y+this.height),this.checkCollision.down&&t.lineBetween(i.x,i.y+this.height,i.x+this.width,i.y+this.height),this.checkCollision.left&&t.lineBetween(i.x,i.y,i.x,i.y+this.height))),this.debugShowVelocity&&(t.lineStyle(t.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),t.lineBetween(n,o,n+this.velocity.x/2,o+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(t,i,n,o){void 0===t&&(t=!0),this.collideWorldBounds=t;var a=void 0!==i,u=void 0!==n;return(a||u)&&(this.worldBounce||(this.worldBounce=new b),a&&(this.worldBounce.x=i),u&&(this.worldBounce.y=n)),void 0!==o&&(this.onWorldBounds=o),this},setVelocity:function(t,i){return this.velocity.set(t,i),t=this.velocity.x,i=this.velocity.y,this.speed=Math.sqrt(t*t+i*i),this},setVelocityX:function(t){this.velocity.x=t;var i=t,n=this.velocity.y;return this.speed=Math.sqrt(i*i+n*n),this},setVelocityY:function(t){this.velocity.y=t;var i=this.velocity.x,n=t;return this.speed=Math.sqrt(i*i+n*n),this},setMaxVelocity:function(t,i){return this.maxVelocity.set(t,i),this},setMaxVelocityX:function(t){return this.maxVelocity.x=t,this},setMaxVelocityY:function(t){return this.maxVelocity.y=t,this},setMaxSpeed:function(t){return this.maxSpeed=t,this},setBounce:function(t,i){return this.bounce.set(t,i),this},setBounceX:function(t){return this.bounce.x=t,this},setBounceY:function(t){return this.bounce.y=t,this},setAcceleration:function(t,i){return this.acceleration.set(t,i),this},setAccelerationX:function(t){return this.acceleration.x=t,this},setAccelerationY:function(t){return this.acceleration.y=t,this},setAllowDrag:function(t){return void 0===t&&(t=!0),this.allowDrag=t,this},setAllowGravity:function(t){return void 0===t&&(t=!0),this.allowGravity=t,this},setAllowRotation:function(t){return void 0===t&&(t=!0),this.allowRotation=t,this},setDrag:function(t,i){return this.drag.set(t,i),this},setDamping:function(t){return this.useDamping=t,this},setDragX:function(t){return this.drag.x=t,this},setDragY:function(t){return this.drag.y=t,this},setGravity:function(t,i){return this.gravity.set(t,i),this},setGravityX:function(t){return this.gravity.x=t,this},setGravityY:function(t){return this.gravity.y=t,this},setFriction:function(t,i){return this.friction.set(t,i),this},setFrictionX:function(t){return this.friction.x=t,this},setFrictionY:function(t){return this.friction.y=t,this},setAngularVelocity:function(t){return this.angularVelocity=t,this},setAngularAcceleration:function(t){return this.angularAcceleration=t,this},setAngularDrag:function(t){return this.angularDrag=t,this},setMass:function(t){return this.mass=t,this},setImmovable:function(t){return void 0===t&&(t=!0),this.immovable=t,this},setEnable:function(t){return void 0===t&&(t=!0),this.enable=t,this},processX:function(t,i,n,o){this.x+=t,this.updateCenter(),null!==i&&(this.velocity.x=i);var a=this.blocked;n&&(a.left=!0),o&&(a.right=!0)},processY:function(t,i,n,o){this.y+=t,this.updateCenter(),null!==i&&(this.velocity.y=i);var a=this.blocked;n&&(a.up=!0),o&&(a.down=!0)},x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});t.exports=S},function(t,i,n){var o=new(n(0))({initialize:function Collider2(t,i,n,o,a,u,d){this.world=t,this.name="",this.active=!0,this.overlapOnly=i,this.object1=n,this.object2=o,this.collideCallback=a,this.processCallback=u,this.callbackContext=d},setName:function(t){return this.name=t,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});t.exports=o},function(t,i,n){var o=n(26),a=n(3),u=new a,d=new a;t.exports=function(t,i,n,a,f,p,b){var S=b.tilemapLayer.tilemap._convert.WorldToTileXY;S(t,i,!0,u,p,b);var M=u.x,C=u.y;S(t+n,i+a,!1,d,p,b);var P=Math.ceil(d.x),R=Math.ceil(d.y);return o(M,C,P-M,R-C,f,b)}},function(t,i){t.exports=function(t,i){return t.collisionCallback?!t.collisionCallback.call(t.collisionCallbackContext,i,t):!t.layer.callbacks[t.index]||!t.layer.callbacks[t.index].callback.call(t.layer.callbacks[t.index].callbackContext,i,t)}},function(t,i,n){var o=n(436);function rbush(t){if(!(this instanceof rbush))return new rbush(t);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}function findItem(t,i,n){if(!n)return i.indexOf(t);for(var o=0;o<i.length;o++)if(n(t,i[o]))return o;return-1}function calcBBox(t,i){distBBox(t,0,t.children.length,i,t)}function distBBox(t,i,n,o,a){a||(a=createNode(null)),a.minX=1/0,a.minY=1/0,a.maxX=-1/0,a.maxY=-1/0;for(var u,d=i;d<n;d++)u=t.children[d],extend2(a,t.leaf?o(u):u);return a}function extend2(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function compareNodeMinX(t,i){return t.minX-i.minX}function compareNodeMinY(t,i){return t.minY-i.minY}function bboxArea(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function bboxMargin(t){return t.maxX-t.minX+(t.maxY-t.minY)}function contains(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function intersects(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function createNode(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function multiSelect(t,i,n,a,u){for(var d,f=[i,n];f.length;)(n=f.pop())-(i=f.pop())<=a||(d=i+Math.ceil((n-i)/a/2)*a,o(t,d,i,n,u),f.push(i,d,d,n))}rbush.prototype={all:function(){return this._all(this.data,[])},search:function(t){var i=this.data,n=[],o=this.toBBox;if(!intersects(t,i))return n;for(var a,u,d,f,p=[];i;){for(a=0,u=i.children.length;a<u;a++)d=i.children[a],intersects(t,f=i.leaf?o(d):d)&&(i.leaf?n.push(d):contains(t,f)?this._all(d,n):p.push(d));i=p.pop()}return n},collides:function(t){var i=this.data,n=this.toBBox;if(!intersects(t,i))return!1;for(var o,a,u,d,f=[];i;){for(o=0,a=i.children.length;o<a;o++)if(u=i.children[o],intersects(t,d=i.leaf?n(u):u)){if(i.leaf||contains(t,d))return!0;f.push(u)}i=f.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}var o=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===o.height)this._splitRoot(this.data,o);else{if(this.data.height<o.height){var a=this.data;this.data=o,o=a}this._insert(o,this.data.height-o.height-1,!0)}else this.data=o;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=createNode([]),this},remove:function(t,i){if(!t)return this;for(var n,o,a,u,d=this.data,f=this.toBBox(t),p=[],b=[];d||p.length;){if(d||(d=p.pop(),o=p[p.length-1],n=b.pop(),u=!0),d.leaf&&-1!==(a=findItem(t,d.children,i)))return d.children.splice(a,1),p.push(d),this._condense(p),this;u||d.leaf||!contains(d,f)?o?(n++,d=o.children[n],u=!1):d=null:(p.push(d),b.push(n),n=0,o=d,d=d.children[0])}return this},toBBox:function(t){return t},compareMinX:compareNodeMinX,compareMinY:compareNodeMinY,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},_build:function(t,i,n,o){var a,u=n-i+1,d=this._maxEntries;if(u<=d)return calcBBox(a=createNode(t.slice(i,n+1)),this.toBBox),a;o||(o=Math.ceil(Math.log(u)/Math.log(d)),d=Math.ceil(u/Math.pow(d,o-1))),(a=createNode([])).leaf=!1,a.height=o;var f,p,b,S,M=Math.ceil(u/d),C=M*Math.ceil(Math.sqrt(d));for(multiSelect(t,i,n,C,this.compareMinX),f=i;f<=n;f+=C)for(multiSelect(t,f,b=Math.min(f+C-1,n),M,this.compareMinY),p=f;p<=b;p+=M)S=Math.min(p+M-1,b),a.children.push(this._build(t,p,S,o-1));return calcBBox(a,this.toBBox),a},_chooseSubtree:function(t,i,n,o){for(var a,u,d,f,p,b,S,M,C,P;o.push(i),!i.leaf&&o.length-1!==n;){for(S=M=1/0,a=0,u=i.children.length;a<u;a++)p=bboxArea(d=i.children[a]),C=t,P=d,(b=(Math.max(P.maxX,C.maxX)-Math.min(P.minX,C.minX))*(Math.max(P.maxY,C.maxY)-Math.min(P.minY,C.minY))-p)<M?(M=b,S=p<S?p:S,f=d):b===M&&p<S&&(S=p,f=d);i=f||i.children[0]}return i},_insert:function(t,i,n){var o=this.toBBox,a=n?t:o(t),u=[],d=this._chooseSubtree(a,this.data,i,u);for(d.children.push(t),extend2(d,a);i>=0&&u[i].children.length>this._maxEntries;)this._split(u,i),i--;this._adjustParentBBoxes(a,u,i)},_split:function(t,i){var n=t[i],o=n.children.length,a=this._minEntries;this._chooseSplitAxis(n,a,o);var u=this._chooseSplitIndex(n,a,o),d=createNode(n.children.splice(u,n.children.length-u));d.height=n.height,d.leaf=n.leaf,calcBBox(n,this.toBBox),calcBBox(d,this.toBBox),i?t[i-1].children.push(d):this._splitRoot(n,d)},_splitRoot:function(t,i){this.data=createNode([t,i]),this.data.height=t.height+1,this.data.leaf=!1,calcBBox(this.data,this.toBBox)},_chooseSplitIndex:function(t,i,n){var o,a,u,d,f,p,b,S,M,C,P,R,O,B;for(p=b=1/0,o=i;o<=n-i;o++)a=distBBox(t,0,o,this.toBBox),u=distBBox(t,o,n,this.toBBox),M=a,C=u,P=void 0,R=void 0,O=void 0,B=void 0,P=Math.max(M.minX,C.minX),R=Math.max(M.minY,C.minY),O=Math.min(M.maxX,C.maxX),B=Math.min(M.maxY,C.maxY),d=Math.max(0,O-P)*Math.max(0,B-R),f=bboxArea(a)+bboxArea(u),d<p?(p=d,S=o,b=f<b?f:b):d===p&&f<b&&(b=f,S=o);return S},_chooseSplitAxis:function(t,i,n){var o=t.leaf?this.compareMinX:compareNodeMinX,a=t.leaf?this.compareMinY:compareNodeMinY;this._allDistMargin(t,i,n,o)<this._allDistMargin(t,i,n,a)&&t.children.sort(o)},_allDistMargin:function(t,i,n,o){t.children.sort(o);var a,u,d=this.toBBox,f=distBBox(t,0,i,d),p=distBBox(t,n-i,n,d),b=bboxMargin(f)+bboxMargin(p);for(a=i;a<n-i;a++)u=t.children[a],extend2(f,t.leaf?d(u):u),b+=bboxMargin(f);for(a=n-i-1;a>=i;a--)u=t.children[a],extend2(p,t.leaf?d(u):u),b+=bboxMargin(p);return b},_adjustParentBBoxes:function(t,i,n){for(var o=n;o>=0;o--)extend2(i[o],t)},_condense:function(t){for(var i,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(i=t[n-1].children).splice(i.indexOf(t[n]),1):this.clear():calcBBox(t[n],this.toBBox)},compareMinX:function(t,i){return t.left-i.left},compareMinY:function(t,i){return t.top-i.top},toBBox:function(t){return{minX:t.left,minY:t.top,maxX:t.right,maxY:t.bottom}}},t.exports=rbush},function(t,i,n){var o=n(533),a=n(535),u=n(248);t.exports=function(t,i,n,d,f,p,b){var S=d.left,M=d.top,C=d.right,P=d.bottom,R=n.faceLeft||n.faceRight,O=n.faceTop||n.faceBottom;if(b||(R=!0,O=!0),!R&&!O)return!1;var B=0,N=0,Y=0,X=1;if(i.deltaAbsX()>i.deltaAbsY()?Y=-1:i.deltaAbsX()<i.deltaAbsY()&&(X=-1),0!==i.deltaX()&&0!==i.deltaY()&&R&&O&&(Y=Math.min(Math.abs(i.position.x-C),Math.abs(i.right-S)),X=Math.min(Math.abs(i.position.y-P),Math.abs(i.bottom-M))),Y<X){if(R&&0!==(B=o(i,n,S,C,p,b))&&!u(d,i))return!0;O&&(N=a(i,n,M,P,p,b))}else{if(O&&0!==(N=a(i,n,M,P,p,b))&&!u(d,i))return!0;R&&(B=o(i,n,S,C,p,b))}return 0!==B||0!==N}},function(t,i,n){var o=n(534);t.exports=function(t,i,n,a,u,d){var f=0,p=i.faceLeft,b=i.faceRight,S=i.collideLeft,M=i.collideRight;return d||(p=!0,b=!0,S=!0,M=!0),t.deltaX()<0&&M&&t.checkCollision.left?b&&t.x<a&&(f=t.x-a)<-u&&(f=0):t.deltaX()>0&&S&&t.checkCollision.right&&p&&t.right>n&&(f=t.right-n)>u&&(f=0),0!==f&&(t.customSeparateX?t.overlapX=f:o(t,f)),f}},function(t,i){t.exports=function(t,i){i<0?(t.blocked.none=!1,t.blocked.left=!0):i>0&&(t.blocked.none=!1,t.blocked.right=!0),t.position.x-=i,0===t.bounce.x?t.velocity.x=0:t.velocity.x=-t.velocity.x*t.bounce.x}},function(t,i,n){var o=n(536);t.exports=function(t,i,n,a,u,d){var f=0,p=i.faceTop,b=i.faceBottom,S=i.collideUp,M=i.collideDown;return d||(p=!0,b=!0,S=!0,M=!0),t.deltaY()<0&&M&&t.checkCollision.up?b&&t.y<a&&(f=t.y-a)<-u&&(f=0):t.deltaY()>0&&S&&t.checkCollision.down&&p&&t.bottom>n&&(f=t.bottom-n)>u&&(f=0),0!==f&&(t.customSeparateY?t.overlapY=f:o(t,f)),f}},function(t,i){t.exports=function(t,i){i<0?(t.blocked.none=!1,t.blocked.up=!0):i>0&&(t.blocked.none=!1,t.blocked.down=!0),t.position.y-=i,0===t.bounce.y?t.velocity.y=0:t.velocity.y=-t.velocity.y*t.bounce.y}},function(t,i,n){var o=n(246),a=n(1389);t.exports=function(t,i,n,u){var d=o(t,i,n,u),f=t.immovable,p=i.immovable;if(n||0===d||f&&p||t.customSeparateX||i.customSeparateX)return 0!==d||t.embedded&&i.embedded;var b=a.Set(t,i,d);return f||p?(f?a.RunImmovableBody1(b):p&&a.RunImmovableBody2(b),!0):b>0||a.Check()}},function(t,i,n){var o=n(247),a=n(1390);t.exports=function(t,i,n,u){var d=o(t,i,n,u),f=t.immovable,p=i.immovable;if(n||0===d||f&&p||t.customSeparateY||i.customSeparateY)return 0!==d||t.embedded&&i.embedded;var b=a.Set(t,i,d);return f||p?(f?a.RunImmovableBody1(b):p&&a.RunImmovableBody2(b),!0):b>0||a.Check()}},function(t,i,n){var o=n(66),a=n(0),u=n(62),d=n(57),f=n(3),p=new a({initialize:function StaticBody2(t,i){var n=i.displayWidth?i.displayWidth:64,o=i.displayHeight?i.displayHeight:64;this.world=t,this.gameObject=i,this.debugShowBody=t.defaults.debugShowStaticBody,this.debugBodyColor=t.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new f,this.position=new f(i.x-n*i.originX,i.y-o*i.originY),this.width=n,this.height=o,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new f(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=f.ZERO,this.allowGravity=!1,this.gravity=f.ZERO,this.bounce=f.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=u.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(t,i){return t&&t!==this.gameObject&&(this.gameObject.body=null,t.body=this,this.gameObject=t),i&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var t=this.gameObject;return t.getTopLeft(this.position),this.width=t.displayWidth,this.height=t.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(t,i){return void 0===i&&(i=t),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(t,i),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(t,i,n){void 0===n&&(n=!0);var o=this.gameObject;if(!t&&o.frame&&(t=o.frame.realWidth),!i&&o.frame&&(i=o.frame.realHeight),this.world.staticTree.remove(this),this.width=t,this.height=i,this.halfWidth=Math.floor(t/2),this.halfHeight=Math.floor(i/2),n&&o.getCenter){var a=o.displayWidth/2,u=o.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(a-this.halfWidth,u-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(t,i,n){return void 0===i&&(i=this.offset.x),void 0===n&&(n=this.offset.y),t>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=t,this.width=2*t,this.height=2*t,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(i,n),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(t,i){var n=this.gameObject;void 0===t&&(t=n.x),void 0===i&&(i=n.y),this.world.staticTree.remove(this),n.setPosition(t,i),n.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function(t,i){return this.isCircle?o(this,t,i):d(this,t,i)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(t){var i=this.position,n=i.x+this.halfWidth,o=i.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?t.strokeCircle(n,o,this.width/2):t.strokeRect(i.x,i.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(t){return t<=0&&(t=.1),this.mass=t,this},x:{get:function(){return this.position.x},set:function(t){this.world.staticTree.remove(this),this.position.x=t,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(t){this.world.staticTree.remove(this),this.position.y=t,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});t.exports=p},function(t,i,n){var o=new(n(0))({initialize:function BasePlugin2(t){this.pluginManager=t,this.game=t.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=o},function(t,i,n){var o=new(n(3));t.exports=function(t,i,n,a){var u=n.tilemapLayer,d=u.cullPaddingX,f=u.cullPaddingY,p=u.tilemap.tileToWorldXY(t,i,o,a,u);return p.x>a.worldView.x+u.scaleX*n.tileWidth*(-d-.5)&&p.x<a.worldView.right+u.scaleX*n.tileWidth*(d-.5)&&p.y>a.worldView.y+u.scaleY*n.tileHeight*(-f-1)&&p.y<a.worldView.bottom+u.scaleY*n.tileHeight*(f-.5)}},function(t,i,n){var o=n(26);t.exports=function(t,i,n,a,u,d,f){for(var p=o(n,a,u,d,null,f),b=0;b<p.length;b++)p[b]&&p[b].index===t&&(p[b].index=i)}},function(t,i,n){var o=n(10),a=n(139),u=n(76),d=new o;t.exports=function(t,i){var n=t.tilemapLayer.tilemap,o=t.tilemapLayer,f=Math.floor(n.tileWidth*o.scaleX),p=Math.floor(n.tileHeight*o.scaleY),b=u(i.worldView.x-o.x,f,0,!0)-o.cullPaddingX,S=a(i.worldView.right-o.x,f,0,!0)+o.cullPaddingX,M=u(i.worldView.y-o.y,p,0,!0)-o.cullPaddingY,C=a(i.worldView.bottom-o.y,p,0,!0)+o.cullPaddingY;return d.setTo(b,M,S-b,C-M)}},function(t,i,n){var o=n(543),a=n(159);t.exports=function(t,i,n,u){void 0===n&&(n=[]),void 0===u&&(u=0),n.length=0;var d=t.tilemapLayer,f=o(t,i);return(d.skipCull||1!==d.scrollFactorX||1!==d.scrollFactorY)&&(f.left=0,f.right=t.width,f.top=0,f.bottom=t.height),a(t,f,u,n),n}},function(t,i,n){var o=n(546),a=n(159);t.exports=function(t,i,n,u){void 0===n&&(n=[]),void 0===u&&(u=0),n.length=0;var d=t.tilemapLayer;if(!d.skipCull&&1===d.scrollFactorX&&1===d.scrollFactorY){var f=o(t,i);a(t,f,u,n)}return n}},function(t,i,n){var o=n(139),a=n(76);t.exports=function(t,i){var n=t.tilemapLayer.tilemap,u=t.tilemapLayer,d=Math.floor(n.tileWidth*u.scaleX),f=Math.floor(n.tileHeight*u.scaleY),p=t.hexSideLength,b=(f-p)/2+p;return{left:a(i.worldView.x-u.x,d,0,!0)-u.cullPaddingX,right:o(i.worldView.right-u.x,d,0,!0)+u.cullPaddingX,top:a(i.worldView.y-u.y,b,0,!0)-u.cullPaddingY,bottom:o(i.worldView.bottom-u.y,b,0,!0)+u.cullPaddingY}}},function(t,i,n){var o=n(541);t.exports=function(t,i,n,a){void 0===n&&(n=[]),void 0===a&&(a=0),n.length=0;var u,d,f,p=t.tilemapLayer,b=t.data,S=t.width,M=t.height,C=S,P=M;if(!p.skipCull)if(0===a){for(d=0;d<P;d++)for(u=0;b[d]&&u<C;u++)if(o(u,d,t,i)){if(!(f=b[d][u])||-1===f.index||!f.visible||0===f.alpha)continue;n.push(f)}}else if(1===a){for(d=0;d<P;d++)for(u=C;b[d]&&u>=0;u--)if(o(u,d,t,i)){if(!(f=b[d][u])||-1===f.index||!f.visible||0===f.alpha)continue;n.push(f)}}else if(2===a){for(d=P;d>=0;d--)for(u=0;b[d]&&u<C;u++)if(o(u,d,t,i)){if(!(f=b[d][u])||-1===f.index||!f.visible||0===f.alpha)continue;n.push(f)}}else if(3===a)for(d=P;d>=0;d--)for(u=C;b[d]&&u>=0;u--)if(o(u,d,t,i)){if(!(f=b[d][u])||-1===f.index||!f.visible||0===f.alpha)continue;n.push(f)}return p.tilesDrawn=n.length,p.tilesTotal=S*M,n}},function(t,i,n){var o=n(549),a=n(159);t.exports=function(t,i,n,u){void 0===n&&(n=[]),void 0===u&&(u=0),n.length=0;var d=t.tilemapLayer;if(!d.skipCull&&1===d.scrollFactorX&&1===d.scrollFactorY){var f=o(t,i);a(t,f,u,n)}return n}},function(t,i,n){var o=n(139),a=n(76);t.exports=function(t,i){var n=t.tilemapLayer.tilemap,u=t.tilemapLayer,d=Math.floor(n.tileWidth*u.scaleX),f=Math.floor(n.tileHeight*u.scaleY);return{left:a(i.worldView.x-u.x,d,0,!0)-u.cullPaddingX,right:o(i.worldView.right-u.x,d,0,!0)+u.cullPaddingX,top:a(i.worldView.y-u.y,f/2,0,!0)-u.cullPaddingY,bottom:o(i.worldView.bottom-u.y,f/2,0,!0)+u.cullPaddingY}}},function(t,i,n){var o=n(3);t.exports=function(t,i,n,a,u){n||(n=new o);var d=u.baseTileWidth,f=u.baseTileHeight,p=u.tilemapLayer,b=0,S=0;p&&(a||(a=p.scene.cameras.main),b=p.x+a.scrollX*(1-p.scrollFactorX),d*=p.scaleX,S=p.y+a.scrollY*(1-p.scrollFactorY),f*=p.scaleY);var M=u.hexSideLength,C=b+t*d+i%2*(d/2),P=S+i*((f-M)/2+M);return n.set(C,P)}},function(t,i,n){var o=n(3);t.exports=function(t,i,n,a,u){n||(n=new o);var d=u.baseTileWidth,f=u.baseTileHeight,p=u.tilemapLayer,b=0,S=0;p&&(a||(a=p.scene.cameras.main),b=p.x+a.scrollX*(1-p.scrollFactorX),d*=p.scaleX,S=p.y+a.scrollY*(1-p.scrollFactorY),f*=p.scaleY);var M=b+d/2*(t-i),C=S+(t+i)*(f/2);return n.set(M,C)}},function(t,i,n){var o=n(3);t.exports=function(t,i,n,a,u){n||(n=new o);var d=u.baseTileWidth,f=u.baseTileHeight,p=u.tilemapLayer,b=0,S=0;p&&(a||(a=p.scene.cameras.main),b=p.x+a.scrollX*(1-p.scrollFactorX),d*=p.scaleX,S=p.y+a.scrollY*(1-p.scrollFactorY),f*=p.scaleY);var M=b+t*d+i%2*(d/2),C=S+i*(f/2);return n.set(M,C)}},function(t,i,n){var o=n(253),a=n(254),u=n(3);t.exports=function(t,i,n,d,f){return n||(n=new u(0,0)),n.x=o(t,d,f),n.y=a(i,d,f),n}},function(t,i){t.exports=function(t,i,n){var o=n.baseTileHeight,a=n.tilemapLayer,u=0;a&&(void 0===i&&(i=a.scene.cameras.main),u=a.y+i.scrollY*(1-a.scrollFactorY),o*=a.scaleY);var d=a.tilemap.hexSideLength;return u+t*((o-d)/2+d)}},function(t,i){t.exports=function(t,i,n){var o=n.baseTileHeight,a=n.tilemapLayer,u=0;return a&&(void 0===i&&(i=a.scene.cameras.main),u=a.y+i.scrollY*(1-a.scrollFactorY),o*=a.scaleY),u+t*(o/2)}},function(t,i,n){var o=n(3);t.exports=function(t,i,n,a,u,d){a||(a=new o);var f=d.baseTileWidth,p=d.baseTileHeight,b=d.tilemapLayer;b&&(u||(u=b.scene.cameras.main),i-=b.y+u.scrollY*(1-b.scrollFactorY),p*=b.scaleY,t-=b.x+u.scrollX*(1-b.scrollFactorX),f*=b.scaleX);var S=d.hexSideLength,M=(p-S)/2+S,C=n?Math.floor(i/M):i/M,P=n?Math.floor((t-C%2*.5*f)/f):(t-C%2*.5*f)/f;return a.set(P,C)}},function(t,i,n){var o=n(3);t.exports=function(t,i,n,a,u,d){a||(a=new o);var f=d.baseTileWidth,p=d.baseTileHeight,b=d.tilemapLayer;b&&(u||(u=b.scene.cameras.main),i-=b.y+u.scrollY*(1-b.scrollFactorY),p*=b.scaleY,t-=b.x+u.scrollX*(1-b.scrollFactorX),f*=b.scaleX);var S=n?Math.floor((t/(f/2)+i/(p/2))/2):(t/(f/2)+i/(p/2))/2,M=n?Math.floor((i/(p/2)-t/(f/2))/2):(i/(p/2)-t/(f/2))/2;return a.set(S,M)}},function(t,i,n){var o=n(3);t.exports=function(t,i,n,a,u,d){a||(a=new o);var f=d.baseTileWidth,p=d.baseTileHeight,b=d.tilemapLayer;b&&(u||(u=b.scene.cameras.main),i-=b.y+u.scrollY*(1-b.scrollFactorY),p*=b.scaleY,t-=b.x+u.scrollX*(1-b.scrollFactorX),f*=b.scaleX);var S=n?Math.floor(i/(p/2)):i/(p/2),M=n?Math.floor((t+S%2*.5*f)/f):(t+S%2*.5*f)/f;return a.set(M,S)}},function(t,i,n){var o=n(255),a=n(256),u=n(3);t.exports=function(t,i,n,d,f,p){return void 0===n&&(n=!0),d||(d=new u(0,0)),d.x=o(t,n,f,p),d.y=a(i,n,f,p),d}},function(t,i){t.exports=function(t,i,n,o){var a=o.baseTileHeight,u=o.tilemapLayer;u&&(n||(n=u.scene.cameras.main),t-=u.y+n.scrollY*(1-u.scrollFactorY),a*=u.scaleY);var d=o.hexSideLength,f=(a-d)/2+d;return i?Math.floor(t/f):t/f}},function(t,i){t.exports=function(t,i,n,o){var a=o.baseTileHeight,u=o.tilemapLayer;return u&&(n||(n=u.scene.cameras.main),t-=u.y+n.scrollY*(1-u.scrollFactorY),a*=u.scaleY),i?Math.floor(t/(a/2)):t/(a/2)}},function(t,i,n){var o=n(119);t.exports=function(t,i,n){if(o(t,i,n)){var a=n.data[i][t];return null!==a&&a.index>-1}return!1}},function(t,i,n){var o=n(85),a=n(119),u=n(252);t.exports=function(t,i,n,d,f){if(void 0===n&&(n=!0),void 0===d&&(d=!0),!a(t,i,f))return null;var p=f.data[i][t];return p?(f.data[i][t]=n?null:new o(f,-1,t,i,f.tileWidth,f.tileHeight),d&&p&&p.collides&&u(t,i,f),p):null}},function(t,i,n){var o=n(40),a=n(259),u=n(565),d=n(566),f=n(577);t.exports=function(t,i,n,p,b,S){var M;switch(i){case o.ARRAY_2D:M=a(t,n,p,b,S);break;case o.CSV:M=u(t,n,p,b,S);break;case o.TILED_JSON:M=d(t,n,S);break;case o.WELTMEISTER:M=f(t,n,S);break;default:console.warn("Unrecognized tilemap data format: "+i),M=null}return M}},function(t,i,n){var o=n(40),a=n(259);t.exports=function(t,i,n,u,d){var f=i.trim().split("\n").map((function(t){return t.split(",")})),p=a(t,f,n,u,d);return p.format=o.CSV,p}},function(t,i,n){var o=n(567),a=n(568),u=n(29),d=n(40),f=n(258),p=n(121),b=n(569),S=n(570),M=n(573),C=n(575);t.exports=function(t,i,n){var P=new p({width:i.width,height:i.height,name:t,tileWidth:i.tilewidth,tileHeight:i.tileheight,orientation:f(i.orientation),format:d.TILED_JSON,version:i.version,properties:i.properties,renderOrder:i.renderorder,infinite:i.infinite});P.orientation===u.HEXAGONAL&&(P.hexSideLength=i.hexsidelength),P.layers=M(i,n),P.images=b(i);var R=C(i);return P.tilesets=R.tilesets,P.imageCollections=R.imageCollections,P.objects=S(i),P.tiles=a(P),o(P),P}},function(t,i,n){var o=n(17);t.exports=function(t){for(var i,n,a,u,d,f=0;f<t.layers.length;f++){i=t.layers[f],u=null;for(var p=0;p<i.data.length;p++){d=i.data[p];for(var b=0;b<d.length;b++)null===(n=d[b])||n.index<0||(a=t.tiles[n.index][2],u=t.tilesets[a],n.width=u.tileWidth,n.height=u.tileHeight,u.tileProperties&&u.tileProperties[n.index-u.firstgid]&&(n.properties=o(n.properties,u.tileProperties[n.index-u.firstgid])))}}}},function(t,i,n){var o=n(122);t.exports=function(t){var i,n,a=[];for(i=0;i<t.imageCollections.length;i++)for(var u=t.imageCollections[i],d=u.images,f=0;f<d.length;f++){var p=d[f];(n=new o(p.image,p.gid,u.imageWidth,u.imageHeight,0,0)).updateTileData(u.imageWidth,u.imageHeight),t.tilesets.push(n)}for(i=0;i<t.tilesets.length;i++)for(var b=(n=t.tilesets[i]).tileMargin,S=n.tileMargin,M=0,C=0,P=0,R=n.firstgid;R<n.firstgid+n.total&&(a[R]=[b,S,i],b+=n.tileWidth+n.tileSpacing,++M!==n.total)&&(++C!==n.columns||(b=n.tileMargin,S+=n.tileHeight+n.tileSpacing,C=0,++P!==n.rows));R++);return a}},function(t,i,n){var o=n(2),a=n(161);t.exports=function(t){for(var i=[],n=[],u=a(t);u.i<u.layers.length||n.length>0;)if(u.i>=u.layers.length){if(n.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}u=n.pop()}else{var d=u.layers[u.i];if(u.i++,"imagelayer"===d.type){var f=o(d,"offsetx",0)+o(d,"startx",0),p=o(d,"offsety",0)+o(d,"starty",0);i.push({name:u.name+d.name,image:d.image,x:u.x+f+d.x,y:u.y+p+d.y,alpha:u.opacity*d.opacity,visible:u.visible&&d.visible,properties:o(d,"properties",{})})}else if("group"===d.type){var b=a(t,d,u);n.push(u),u=b}}return i}},function(t,i,n){var o=n(2),a=n(260),u=n(572),d=n(161);t.exports=function(t){for(var i=[],n=[],f=d(t);f.i<f.layers.length||n.length>0;)if(f.i>=f.layers.length){if(n.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}f=n.pop()}else{var p=f.layers[f.i];if(f.i++,p.opacity*=f.opacity,p.visible=f.visible&&p.visible,"objectgroup"===p.type){p.name=f.name+p.name;for(var b=f.x+o(p,"startx",0)+o(p,"offsetx",0),S=f.y+o(p,"starty",0)+o(p,"offsety",0),M=[],C=0;C<p.objects.length;C++){var P=a(p.objects[C],b,S);M.push(P)}var R=new u(p);R.objects=M,i.push(R)}else if("group"===p.type){var O=d(t,p,f);n.push(f),f=O}}return i}},function(t,i,n){var o=n(126);t.exports=function(t,i){for(var n={},a=0;a<i.length;a++){var u=i[a];o(t,u)&&(n[u]=t[u])}return n}},function(t,i,n){var o=n(0),a=n(2),u=new o({initialize:function ObjectLayer2(t){void 0===t&&(t={}),this.name=a(t,"name","object layer"),this.opacity=a(t,"opacity",1),this.properties=a(t,"properties",{}),this.propertyTypes=a(t,"propertytypes",{}),this.type=a(t,"type","objectgroup"),this.visible=a(t,"visible",!0),this.objects=a(t,"objects",[])}});t.exports=u},function(t,i,n){var o=n(574),a=n(29),u=n(161),d=n(258),f=n(2),p=n(120),b=n(261),S=n(85);t.exports=function(t,i){for(var n=f(t,"infinite",!1),M=[],C=[],P=u(t);P.i<P.layers.length||C.length>0;)if(P.i>=P.layers.length){if(C.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}P=C.pop()}else{var R=P.layers[P.i];if(P.i++,"tilelayer"===R.type)if(R.compression)console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+R.name+"'");else{if(R.encoding&&"base64"===R.encoding){if(R.chunks)for(var O=0;O<R.chunks.length;O++)R.chunks[O].data=o(R.chunks[O].data);R.data&&(R.data=o(R.data)),delete R.encoding}var B,N,Y,X,G=[],U=0;if(n){var V=f(R,"startx",0)+R.x,z=f(R,"starty",0)+R.y;(B=new p({name:P.name+R.name,x:P.x+f(R,"offsetx",0)+V*t.tilewidth,y:P.y+f(R,"offsety",0)+z*t.tileheight,width:R.width,height:R.height,tileWidth:t.tilewidth,tileHeight:t.tileheight,alpha:P.opacity*R.opacity,visible:P.visible&&R.visible,properties:f(R,"properties",[]),orientation:d(t.orientation)})).orientation===a.HEXAGONAL&&(B.hexSideLength=t.hexsidelength);for(var W=0;W<R.height;W++){G.push([null]);for(var H=0;H<R.width;H++)G[W][H]=null}for(W=0,rt=R.chunks.length;W<rt;W++)for(var j=R.chunks[W],q=j.x-V,Z=j.y-z,K=0,$=0,tt=j.data.length;$<tt;$++){var et=U+q,it=K+Z;(N=b(j.data[$])).gid>0?((Y=new S(B,N.gid,et,it,t.tilewidth,t.tileheight)).rotation=N.rotation,Y.flipX=N.flipped,G[it][et]=Y):(X=i?null:new S(B,-1,et,it,t.tilewidth,t.tileheight),G[it][et]=X),++U===j.width&&(K++,U=0)}}else{(B=new p({name:P.name+R.name,x:P.x+f(R,"offsetx",0)+R.x,y:P.y+f(R,"offsety",0)+R.y,width:R.width,height:R.height,tileWidth:t.tilewidth,tileHeight:t.tileheight,alpha:P.opacity*R.opacity,visible:P.visible&&R.visible,properties:f(R,"properties",[]),orientation:d(t.orientation)})).orientation===a.HEXAGONAL&&(B.hexSideLength=t.hexsidelength);for(var nt=[],st=0,rt=R.data.length;st<rt;st++)(N=b(R.data[st])).gid>0?((Y=new S(B,N.gid,U,G.length,t.tilewidth,t.tileheight)).rotation=N.rotation,Y.flipX=N.flipped,nt.push(Y)):(X=i?null:new S(B,-1,U,G.length,t.tilewidth,t.tileheight),nt.push(X)),++U===R.width&&(G.push(nt),U=0,nt=[])}B.data=G,M.push(B)}else if("group"===R.type){var ot=u(t,R,P);C.push(P),P=ot}}return M}},function(t,i){t.exports=function(t){for(var i=window.atob(t),n=i.length,o=new Array(n/4),a=0;a<n;a+=4)o[a/4]=(i.charCodeAt(a)|i.charCodeAt(a+1)<<8|i.charCodeAt(a+2)<<16|i.charCodeAt(a+3)<<24)>>>0;return o}},function(t,i,n){var o=n(122),a=n(576),u=n(260),d=n(1453);t.exports=function(t){for(var i,n=[],f=[],p=null,b=0;b<t.tilesets.length;b++){var S=t.tilesets[b];if(S.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(S.image){var M=new o(S.name,S.firstgid,S.tilewidth,S.tileheight,S.margin,S.spacing);if(t.version>1){var C=void 0,P=void 0;if(Array.isArray(S.tiles)){C=C||{},P=P||{};for(var R=0;R<S.tiles.length;R++){var O=S.tiles[R];if(O.properties){var B={};O.properties.forEach((function(t){B[t.name]=t.value})),P[O.id]=B}if(O.objectgroup&&((C[O.id]||(C[O.id]={})).objectgroup=O.objectgroup,O.objectgroup.objects)){var N=O.objectgroup.objects.map((function(t){return u(t)}));C[O.id].objectgroup.objects=N}O.animation&&((C[O.id]||(C[O.id]={})).animation=O.animation),O.type&&((C[O.id]||(C[O.id]={})).type=O.type)}}Array.isArray(S.wangsets)&&(C=C||{},P=P||{},d(S.wangsets,C)),C&&(M.tileData=C,M.tileProperties=P)}else if(S.tileproperties&&(M.tileProperties=S.tileproperties),S.tiles)for(i in M.tileData=S.tiles,M.tileData){var Y=M.tileData[i].objectgroup;if(Y&&Y.objects){var X=Y.objects.map((function(t){return u(t)}));M.tileData[i].objectgroup.objects=X}}M.updateTileData(S.imagewidth,S.imageheight),n.push(M)}else{var G=new a(S.name,S.firstgid,S.tilewidth,S.tileheight,S.margin,S.spacing,S.properties),U=0;for(R=0;R<S.tiles.length;R++){var V=(O=S.tiles[R]).image,z=parseInt(O.id,10),W=S.firstgid+z;G.addImage(W,V),U=Math.max(z,U)}G.maxId=U,f.push(G)}p&&(p.lastgid=S.firstgid-1),p=S}return{tilesets:n,imageCollections:f}}},function(t,i,n){var o=new(n(0))({initialize:function ImageCollection2(t,i,n,o,a,u,d){(void 0===n||n<=0)&&(n=32),(void 0===o||o<=0)&&(o=32),void 0===a&&(a=0),void 0===u&&(u=0),this.name=t,this.firstgid=0|i,this.imageWidth=0|n,this.imageHeight=0|o,this.imageMargin=0|a,this.imageSpacing=0|u,this.properties=d||{},this.images=[],this.total=0},containsImageIndex:function(t){return t>=this.firstgid&&t<this.firstgid+this.total},addImage:function(t,i){return this.images.push({gid:t,image:i}),this.total++,this}});t.exports=o},function(t,i,n){var o=n(40),a=n(121),u=n(578),d=n(579);t.exports=function(t,i,n){if(0===i.layer.length)return console.warn("No layers found in the Weltmeister map: "+t),null;for(var f=0,p=0,b=0;b<i.layer.length;b++)i.layer[b].width>f&&(f=i.layer[b].width),i.layer[b].height>p&&(p=i.layer[b].height);var S=new a({width:f,height:p,name:t,tileWidth:i.layer[0].tilesize,tileHeight:i.layer[0].tilesize,format:o.WELTMEISTER});return S.layers=u(i,n),S.tilesets=d(i),S}},function(t,i,n){var o=n(120),a=n(85);t.exports=function(t,i){for(var n=[],u=0;u<t.layer.length;u++){for(var d=t.layer[u],f=new o({name:d.name,width:d.width,height:d.height,tileWidth:d.tilesize,tileHeight:d.tilesize,visible:1===d.visible}),p=[],b=[],S=0;S<d.data.length;S++){for(var M=0;M<d.data[S].length;M++){var C,P=d.data[S][M]-1;C=P>-1?new a(f,P,M,S,d.tilesize,d.tilesize):i?null:new a(f,-1,M,S,d.tilesize,d.tilesize),p.push(C)}b.push(p),p=[]}f.data=b,n.push(f)}return n}},function(t,i,n){var o=n(122);t.exports=function(t){for(var i=[],n=[],a=0;a<t.layer.length;a++){var u=t.layer[a],d=u.tilesetName;""!==d&&-1===n.indexOf(d)&&(n.push(d),i.push(new o(d,0,u.tilesize,u.tilesize,0,0)))}return i}},function(t,i,n){var o=n(0),a=n(36),u=n(40),d=n(2),f=n(120),p=n(29),b=n(362),S=n(74),M=n(73),C=n(85),P=n(251),R=n(581),O=n(122),B=new o({initialize:function Tilemap2(t,i){this.scene=t,this.tileWidth=i.tileWidth,this.tileHeight=i.tileHeight,this.width=i.width,this.height=i.height,this.orientation=i.orientation,this.renderOrder=i.renderOrder,this.format=i.format,this.version=i.version,this.properties=i.properties,this.widthInPixels=i.widthInPixels,this.heightInPixels=i.heightInPixels,this.imageCollections=i.imageCollections,this.images=i.images,this.layers=i.layers,this.tilesets=i.tilesets,this.objects=i.objects,this.currentLayerIndex=0,this.hexSideLength=i.hexSideLength;var n=this.orientation;this._convert={WorldToTileXY:P.GetWorldToTileXYFunction(n),WorldToTileX:P.GetWorldToTileXFunction(n),WorldToTileY:P.GetWorldToTileYFunction(n),TileToWorldXY:P.GetTileToWorldXYFunction(n),TileToWorldX:P.GetTileToWorldXFunction(n),TileToWorldY:P.GetTileToWorldYFunction(n)}},createBlankDynamicLayer:function(t,i,n,o,a,u,d,f){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(t,i,n,o,a,u,d,f)},createDynamicLayer:function(t,i,n,o){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(t,i,n,o)},createStaticLayer:function(t,i,n,o){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(t,i,n,o)},setRenderOrder:function(t){var i=["right-down","left-down","right-up","left-up"];return"number"==typeof t&&(t=i[t]),i.indexOf(t)>-1&&(this.renderOrder=t),this},addTilesetImage:function(t,i,n,o,a,d,f){if(void 0===t)return null;if(null==i&&(i=t),!this.scene.sys.textures.exists(i))return console.warn("Invalid Tileset Image: "+i),null;var p=this.scene.sys.textures.get(i),b=this.getTilesetIndex(t);if(null===b&&this.format===u.TILED_JSON)return console.warn("No data found for Tileset: "+t),null;var S=this.tilesets[b];return S?(S.setTileSize(n,o),S.setSpacing(a,d),S.setImage(p),S):(void 0===n&&(n=this.tileWidth),void 0===o&&(o=this.tileHeight),void 0===a&&(a=0),void 0===d&&(d=0),void 0===f&&(f=0),(S=new O(t,f,n,o,a,d)).setImage(p),this.tilesets.push(S),S)},copy:function(t,i,n,o,a,u,d,f){return null!==(f=this.getLayer(f))?(P.Copy(t,i,n,o,a,u,d,f),this):null},createBlankLayer:function(t,i,n,o,a,u,d,p){if(void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=this.width),void 0===u&&(u=this.height),void 0===d&&(d=this.tileWidth),void 0===p&&(p=this.tileHeight),null!==this.getLayerIndex(t))return console.warn("Invalid Tilemap Layer ID: "+t),null;for(var b,S=new f({name:t,tileWidth:d,tileHeight:p,width:a,height:u,orientation:this.orientation}),M=0;M<u;M++){b=[];for(var P=0;P<a;P++)b.push(new C(S,-1,P,M,d,p,this.tileWidth,this.tileHeight));S.data.push(b)}this.layers.push(S),this.currentLayerIndex=this.layers.length-1;var O=new R(this.scene,this,this.currentLayerIndex,i,n,o);return O.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(O),O},createLayer:function(t,i,n,o){var a=this.getLayerIndex(t);if(null===a)return console.warn("Invalid Tilemap Layer ID: "+t),"string"==typeof t&&console.warn("Valid tilelayer names:\n\t"+this.getTileLayerNames().join(",\n\t")),null;var u=this.layers[a];if(u.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+t),null;this.currentLayerIndex=a,void 0===n&&(n=u.x),void 0===o&&(o=u.y);var d=new R(this.scene,this,a,i,n,o);return d.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(d),d},createFromObjects:function(t,i){var n=[],o=this.getObjectLayer(t);if(!o)return console.warn("createFromObjects: Invalid objectLayerName given: "+t),n;Array.isArray(i)||(i=[i]);for(var u=o.objects,f=0;f<i.length;f++){for(var p,S=i[f],C=d(S,"id",null),P=d(S,"gid",null),R=d(S,"name",null),O=[],B=0;B<u.length;B++)p=u[B],(null===C&&null===P&&null===R||null!==C&&p.id===C||null!==P&&p.gid===P||null!==R&&p.name===R)&&O.push(p);for(var N=d(S,"classType",M),Y=d(S,"scene",this.scene),X=d(S,"container",null),G=d(S,"key",null),U=d(S,"frame",null),V=0;V<O.length;V++){p=O[V];var z=new N(Y);z.setName(p.name),z.setPosition(p.x,p.y),z.setTexture(G,U),p.width&&(z.displayWidth=p.width),p.height&&(z.displayHeight=p.height);var W={x:z.originX*p.width,y:(z.originY-1)*p.height};if(p.rotation){var H=a(p.rotation);b(W,H),z.rotation=H}if(z.x+=W.x,z.y+=W.y,void 0===p.flippedHorizontal&&void 0===p.flippedVertical||z.setFlip(p.flippedHorizontal,p.flippedVertical),p.visible||(z.visible=!1),Array.isArray(p.properties))p.properties.forEach((function(t){var i=t.name;void 0!==z[i]?z[i]=t.value:z.setData(i,t.value)}));else for(var j in p.properties)void 0!==z[j]?z[j]=p.properties[j]:z.setData(j,p.properties[j]);X?X.add(z):Y.add.existing(z),n.push(z)}}return n},createFromTiles:function(t,i,n,o,a,u){return null===(u=this.getLayer(u))?null:P.CreateFromTiles(t,i,n,o,a,u)},fill:function(t,i,n,o,a,u,d){return void 0===u&&(u=!0),null===(d=this.getLayer(d))?null:(P.Fill(t,i,n,o,a,u,d),this)},filterObjects:function(t,i,n){if("string"==typeof t){var o=t;if(!(t=this.getObjectLayer(t)))return console.warn("No object layer found with the name: "+o),null}return t.objects.filter(i,n)},filterTiles:function(t,i,n,o,a,u,d,f){return null===(f=this.getLayer(f))?null:P.FilterTiles(t,i,n,o,a,u,d,f)},findByIndex:function(t,i,n,o){return null===(o=this.getLayer(o))?null:P.FindByIndex(t,i,n,o)},findObject:function(t,i,n){if("string"==typeof t){var o=t;if(!(t=this.getObjectLayer(t)))return console.warn("No object layer found with the name: "+o),null}return t.objects.find(i,n)||null},findTile:function(t,i,n,o,a,u,d,f){return null===(f=this.getLayer(f))?null:P.FindTile(t,i,n,o,a,u,d,f)},forEachTile:function(t,i,n,o,a,u,d,f){return null===(f=this.getLayer(f))?null:(P.ForEachTile(t,i,n,o,a,u,d,f),this)},getImageIndex:function(t){return this.getIndex(this.images,t)},getImageLayerNames:function(){return this.images&&Array.isArray(this.images)?this.images.map((function(t){return t.name})):[]},getIndex:function(t,i){for(var n=0;n<t.length;n++)if(t[n].name===i)return n;return null},getLayer:function(t){var i=this.getLayerIndex(t);return null!==i?this.layers[i]:null},getObjectLayer:function(t){var i=this.getIndex(this.objects,t);return null!==i?this.objects[i]:null},getObjectLayerNames:function(){return this.objects&&Array.isArray(this.objects)?this.objects.map((function(t){return t.name})):[]},getLayerIndex:function(t){return void 0===t?this.currentLayerIndex:"string"==typeof t?this.getLayerIndexByName(t):"number"==typeof t&&t<this.layers.length?t:t instanceof R?t.layerIndex:null},getLayerIndexByName:function(t){return this.getIndex(this.layers,t)},getTileAt:function(t,i,n,o){return null===(o=this.getLayer(o))?null:P.GetTileAt(t,i,n,o)},getTileAtWorldXY:function(t,i,n,o,a){return null===(a=this.getLayer(a))?null:P.GetTileAtWorldXY(t,i,n,o,a)},getTileLayerNames:function(){return this.layers&&Array.isArray(this.layers)?this.layers.map((function(t){return t.name})):[]},getTilesWithin:function(t,i,n,o,a,u){return null===(u=this.getLayer(u))?null:P.GetTilesWithin(t,i,n,o,a,u)},getTilesWithinShape:function(t,i,n,o){return null===(o=this.getLayer(o))?null:P.GetTilesWithinShape(t,i,n,o)},getTilesWithinWorldXY:function(t,i,n,o,a,u,d){return null===(d=this.getLayer(d))?null:P.GetTilesWithinWorldXY(t,i,n,o,a,u,d)},getTileset:function(t){var i=this.getIndex(this.tilesets,t);return null!==i?this.tilesets[i]:null},getTilesetIndex:function(t){return this.getIndex(this.tilesets,t)},hasTileAt:function(t,i,n){return null===(n=this.getLayer(n))?null:P.HasTileAt(t,i,n)},hasTileAtWorldXY:function(t,i,n,o){return null===(o=this.getLayer(o))?null:P.HasTileAtWorldXY(t,i,n,o)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(t){this.setLayer(t)}},putTileAt:function(t,i,n,o,a){return void 0===o&&(o=!0),null===(a=this.getLayer(a))?null:P.PutTileAt(t,i,n,o,a)},putTileAtWorldXY:function(t,i,n,o,a,u){return void 0===o&&(o=!0),null===(u=this.getLayer(u))?null:P.PutTileAtWorldXY(t,i,n,o,a,u)},putTilesAt:function(t,i,n,o,a){return void 0===o&&(o=!0),null===(a=this.getLayer(a))?null:(P.PutTilesAt(t,i,n,o,a),this)},randomize:function(t,i,n,o,a,u){return null===(u=this.getLayer(u))?null:(P.Randomize(t,i,n,o,a,u),this)},calculateFacesAt:function(t,i,n){return null===(n=this.getLayer(n))?null:(P.CalculateFacesAt(t,i,n),this)},calculateFacesWithin:function(t,i,n,o,a){return null===(a=this.getLayer(a))?null:(P.CalculateFacesWithin(t,i,n,o,a),this)},removeLayer:function(t){var i=this.getLayerIndex(t);if(null!==i){S(this.layers,i);for(var n=i;n<this.layers.length;n++)this.layers[n].tilemapLayer&&this.layers[n].tilemapLayer.layerIndex--;return this.currentLayerIndex===i&&(this.currentLayerIndex=0),this}return null},destroyLayer:function(t){var i=this.getLayerIndex(t);return null!==i?((t=this.layers[i]).destroy(),S(this.layers,i),this.currentLayerIndex===i&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var t=this.layers,i=0;i<t.length;i++)t[i].tilemapLayer&&t[i].tilemapLayer.destroy(!1);return t.length=0,this.currentLayerIndex=0,this},removeTile:function(t,i,n){void 0===i&&(i=-1),void 0===n&&(n=!0);var o=[];Array.isArray(t)||(t=[t]);for(var a=0;a<t.length;a++){var u=t[a];o.push(this.removeTileAt(u.x,u.y,!0,n,u.tilemapLayer)),i>-1&&this.putTileAt(i,u.x,u.y,n,u.tilemapLayer)}return o},removeTileAt:function(t,i,n,o,a){return void 0===n&&(n=!0),void 0===o&&(o=!0),null===(a=this.getLayer(a))?null:P.RemoveTileAt(t,i,n,o,a)},removeTileAtWorldXY:function(t,i,n,o,a,u){return void 0===n&&(n=!0),void 0===o&&(o=!0),null===(u=this.getLayer(u))?null:P.RemoveTileAtWorldXY(t,i,n,o,a,u)},renderDebug:function(t,i,n){return null===(n=this.getLayer(n))?null:(this.orientation===p.ORTHOGONAL&&P.RenderDebug(t,i,n),this)},renderDebugFull:function(t,i){for(var n=this.layers,o=0;o<n.length;o++)P.RenderDebug(t,i,n[o]);return this},replaceByIndex:function(t,i,n,o,a,u,d){return null===(d=this.getLayer(d))?null:(P.ReplaceByIndex(t,i,n,o,a,u,d),this)},setCollision:function(t,i,n,o,a){return void 0===i&&(i=!0),void 0===n&&(n=!0),void 0===a&&(a=!0),null===(o=this.getLayer(o))?null:(P.SetCollision(t,i,n,o,a),this)},setCollisionBetween:function(t,i,n,o,a){return void 0===n&&(n=!0),void 0===o&&(o=!0),null===(a=this.getLayer(a))?null:(P.SetCollisionBetween(t,i,n,o,a),this)},setCollisionByProperty:function(t,i,n,o){return void 0===i&&(i=!0),void 0===n&&(n=!0),null===(o=this.getLayer(o))?null:(P.SetCollisionByProperty(t,i,n,o),this)},setCollisionByExclusion:function(t,i,n,o){return void 0===i&&(i=!0),void 0===n&&(n=!0),null===(o=this.getLayer(o))?null:(P.SetCollisionByExclusion(t,i,n,o),this)},setCollisionFromCollisionGroup:function(t,i,n){return void 0===t&&(t=!0),void 0===i&&(i=!0),null===(n=this.getLayer(n))?null:(P.SetCollisionFromCollisionGroup(t,i,n),this)},setTileIndexCallback:function(t,i,n,o){return null===(o=this.getLayer(o))?null:(P.SetTileIndexCallback(t,i,n,o),this)},setTileLocationCallback:function(t,i,n,o,a,u,d){return null===(d=this.getLayer(d))?null:(P.SetTileLocationCallback(t,i,n,o,a,u,d),this)},setLayer:function(t){var i=this.getLayerIndex(t);return null!==i&&(this.currentLayerIndex=i),this},setBaseTileSize:function(t,i){this.tileWidth=t,this.tileHeight=i,this.widthInPixels=this.width*t,this.heightInPixels=this.height*i;for(var n=0;n<this.layers.length;n++){this.layers[n].baseTileWidth=t,this.layers[n].baseTileHeight=i;for(var o=this.layers[n].data,a=this.layers[n].width,u=this.layers[n].height,d=0;d<u;d++)for(var f=0;f<a;f++){var p=o[d][f];null!==p&&p.setSize(void 0,void 0,t,i)}}return this},setLayerTileSize:function(t,i,n){if(null===(n=this.getLayer(n)))return this;n.tileWidth=t,n.tileHeight=i;for(var o=n.data,a=n.width,u=n.height,d=0;d<u;d++)for(var f=0;f<a;f++){var p=o[d][f];null!==p&&p.setSize(t,i)}return this},shuffle:function(t,i,n,o,a){return null===(a=this.getLayer(a))?null:(P.Shuffle(t,i,n,o,a),this)},swapByIndex:function(t,i,n,o,a,u,d){return null===(d=this.getLayer(d))?null:(P.SwapByIndex(t,i,n,o,a,u,d),this)},tileToWorldX:function(t,i,n){return null===(n=this.getLayer(n))?null:this._convert.TileToWorldX(t,i,n)},tileToWorldY:function(t,i,n){return null===(n=this.getLayer(n))?null:this._convert.TileToWorldY(t,i,n)},tileToWorldXY:function(t,i,n,o,a){return null===(a=this.getLayer(a))?null:this._convert.TileToWorldXY(t,i,n,o,a)},weightedRandomize:function(t,i,n,o,a,u){return null===(u=this.getLayer(u))?null:(P.WeightedRandomize(i,n,o,a,t,u),this)},worldToTileX:function(t,i,n,o){return null===(o=this.getLayer(o))?null:this._convert.WorldToTileX(t,i,n,o)},worldToTileY:function(t,i,n,o){return null===(o=this.getLayer(o))?null:this._convert.WorldToTileY(t,i,n,o)},worldToTileXY:function(t,i,n,o,a,u){return null===(u=this.getLayer(u))?null:this._convert.WorldToTileXY(t,i,n,o,a,u)},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});t.exports=B},function(t,i,n){var o=n(0),a=n(11),u=n(15),d=n(251),f=n(1456),p=new o({Extends:u,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Depth,a.Flip,a.GetBounds,a.Origin,a.Pipeline,a.Transform,a.Visible,a.ScrollFactor,f],initialize:function TilemapLayer2(t,i,n,o,a,f){u.call(this,t,"TilemapLayer"),this.isTilemap=!0,this.tilemap=i,this.layerIndex=n,this.layer=i.layers[n],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=d.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(o),this.setAlpha(this.layer.alpha),this.setPosition(a,f),this.setOrigin(),this.setSize(i.tileWidth*this.layer.width,i.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function(t){var i=[],n=[],o=this.tilemap;Array.isArray(t)||(t=[t]);for(var a=0;a<t.length;a++){var u=t[a];if("string"==typeof u&&(u=o.getTileset(u)),u){n.push(u);for(var d=u.firstgid,f=0;f<u.total;f++)i[d+f]=u}}this.gidMap=i,this.tileset=n},setRenderOrder:function(t){return"string"==typeof t&&(t=["right-down","left-down","right-up","left-up"].indexOf(t)),t>=0&&t<4&&(this._renderOrder=t),this},calculateFacesAt:function(t,i){return d.CalculateFacesAt(t,i,this.layer),this},calculateFacesWithin:function(t,i,n,o){return d.CalculateFacesWithin(t,i,n,o,this.layer),this},createFromTiles:function(t,i,n,o,a){return d.CreateFromTiles(t,i,n,o,a,this.layer)},cull:function(t){return this.cullCallback(this.layer,t,this.culledTiles,this._renderOrder)},copy:function(t,i,n,o,a,u,f){return d.Copy(t,i,n,o,a,u,f,this.layer),this},fill:function(t,i,n,o,a,u){return d.Fill(t,i,n,o,a,u,this.layer),this},filterTiles:function(t,i,n,o,a,u,f){return d.FilterTiles(t,i,n,o,a,u,f,this.layer)},findByIndex:function(t,i,n){return d.FindByIndex(t,i,n,this.layer)},findTile:function(t,i,n,o,a,u,f){return d.FindTile(t,i,n,o,a,u,f,this.layer)},forEachTile:function(t,i,n,o,a,u,f){return d.ForEachTile(t,i,n,o,a,u,f,this.layer),this},getTileAt:function(t,i,n){return d.GetTileAt(t,i,n,this.layer)},getTileAtWorldXY:function(t,i,n,o){return d.GetTileAtWorldXY(t,i,n,o,this.layer)},getTilesWithin:function(t,i,n,o,a){return d.GetTilesWithin(t,i,n,o,a,this.layer)},getTilesWithinShape:function(t,i,n){return d.GetTilesWithinShape(t,i,n,this.layer)},getTilesWithinWorldXY:function(t,i,n,o,a,u){return d.GetTilesWithinWorldXY(t,i,n,o,a,u,this.layer)},hasTileAt:function(t,i){return d.HasTileAt(t,i,this.layer)},hasTileAtWorldXY:function(t,i,n){return d.HasTileAtWorldXY(t,i,n,this.layer)},putTileAt:function(t,i,n,o){return d.PutTileAt(t,i,n,o,this.layer)},putTileAtWorldXY:function(t,i,n,o,a){return d.PutTileAtWorldXY(t,i,n,o,a,this.layer)},putTilesAt:function(t,i,n,o){return d.PutTilesAt(t,i,n,o,this.layer),this},randomize:function(t,i,n,o,a){return d.Randomize(t,i,n,o,a,this.layer),this},removeTileAt:function(t,i,n,o){return d.RemoveTileAt(t,i,n,o,this.layer)},removeTileAtWorldXY:function(t,i,n,o,a){return d.RemoveTileAtWorldXY(t,i,n,o,a,this.layer)},renderDebug:function(t,i){return d.RenderDebug(t,i,this.layer),this},replaceByIndex:function(t,i,n,o,a,u){return d.ReplaceByIndex(t,i,n,o,a,u,this.layer),this},setSkipCull:function(t){return void 0===t&&(t=!0),this.skipCull=t,this},setCullPadding:function(t,i){return void 0===t&&(t=1),void 0===i&&(i=1),this.cullPaddingX=t,this.cullPaddingY=i,this},setCollision:function(t,i,n,o){return d.SetCollision(t,i,n,this.layer,o),this},setCollisionBetween:function(t,i,n,o){return d.SetCollisionBetween(t,i,n,o,this.layer),this},setCollisionByProperty:function(t,i,n){return d.SetCollisionByProperty(t,i,n,this.layer),this},setCollisionByExclusion:function(t,i,n){return d.SetCollisionByExclusion(t,i,n,this.layer),this},setCollisionFromCollisionGroup:function(t,i){return d.SetCollisionFromCollisionGroup(t,i,this.layer),this},setTileIndexCallback:function(t,i,n){return d.SetTileIndexCallback(t,i,n,this.layer),this},setTileLocationCallback:function(t,i,n,o,a,u){return d.SetTileLocationCallback(t,i,n,o,a,u,this.layer),this},shuffle:function(t,i,n,o){return d.Shuffle(t,i,n,o,this.layer),this},swapByIndex:function(t,i,n,o,a,u){return d.SwapByIndex(t,i,n,o,a,u,this.layer),this},tileToWorldX:function(t,i){return this.tilemap.tileToWorldX(t,i,this)},tileToWorldY:function(t,i){return this.tilemap.tileToWorldY(t,i,this)},tileToWorldXY:function(t,i,n,o){return this.tilemap.tileToWorldXY(t,i,n,o,this)},weightedRandomize:function(t,i,n,o,a){return d.WeightedRandomize(i,n,o,a,t,this.layer),this},worldToTileX:function(t,i,n){return this.tilemap.worldToTileX(t,i,n,this)},worldToTileY:function(t,i,n){return this.tilemap.worldToTileY(t,i,n,this)},worldToTileXY:function(t,i,n,o,a){return this.tilemap.worldToTileXY(t,i,n,o,a,this)},destroy:function(t){void 0===t&&(t=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),t&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],u.prototype.destroy.call(this))}});t.exports=p},function(t,i,n){var o=n(0),a=n(2),u=new o({initialize:function TimerEvent2(t){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(t)},reset:function(t){return this.delay=a(t,"delay",0),this.repeat=a(t,"repeat",0),this.loop=a(t,"loop",!1),this.callback=a(t,"callback",void 0),this.callbackScope=a(t,"callbackScope",this.callback),this.args=a(t,"args",[]),this.timeScale=a(t,"timeScale",1),this.startAt=a(t,"startAt",0),this.paused=a(t,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=-1===this.repeat||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var t=this.delay+this.delay*this.repeat;return(this.elapsed+this.delay*(this.repeat-this.repeatCount))/t}return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return.001*this.elapsed},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return.001*this.getRemaining()},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return.001*this.getOverallRemaining()},remove:function(t){void 0===t&&(t=!1),this.elapsed=this.delay,this.hasDispatched=!t,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});t.exports=u},function(t,i,n){var o=n(1465);t.exports=function(t){var i,n=[];if(t.hasOwnProperty("props"))for(i in t.props)"_"!==i.substr(0,1)&&n.push({key:i,value:t.props[i]});else for(i in t)-1===o.indexOf(i)&&"_"!==i.substr(0,1)&&n.push({key:i,value:t[i]});return n}},function(t,i,n){var o=n(6);t.exports=function(t){var i=o(t,"tweens",null);return null===i?[]:("function"==typeof i&&(i=i.call()),Array.isArray(i)||(i=[i]),i)}},function(t,i,n){var o=n(265),a=n(13),u=n(99),d=n(80),f=n(162),p=n(6),b=n(264),S=n(266),M=n(268);t.exports=function(t,i,n){void 0===n&&(n=o);var C=p(i,"from",0),P=p(i,"to",1),R=[{value:C}],O=f(i,"delay",n.delay),B=f(i,"duration",n.duration),N=p(i,"easeParams",n.easeParams),Y=d(p(i,"ease",n.ease),N),X=f(i,"hold",n.hold),G=f(i,"repeat",n.repeat),U=f(i,"repeatDelay",n.repeatDelay),V=u(i,"yoyo",n.yoyo),z=[],W=b("value",P),H=M(R[0],0,"value",W.getEnd,W.getStart,W.getActive,Y,O,B,V,X,G,U,!1,!1);H.start=C,H.current=C,H.to=P,z.push(H);var j=new S(t,z,R);j.offset=a(i,"offset",null),j.completeDelay=a(i,"completeDelay",0),j.loop=Math.round(a(i,"loop",0)),j.loopDelay=Math.round(a(i,"loopDelay",0)),j.paused=u(i,"paused",!1),j.useFrames=u(i,"useFrames",!1);for(var q=p(i,"callbackScope",j),Z=[j,null],K=S.TYPES,$=0;$<K.length;$++){var tt=K[$],et=p(i,tt,!1);if(et){var it=p(i,tt+"Scope",q),nt=p(i,tt+"Params",[]);j.setCallback(tt,et,Z.concat(nt),it)}}return j}},function(t,i,n){var o=n(80),a=n(6),u=n(14);t.exports=function(t,i){void 0===i&&(i={});var n=a(i,"start",0),d=a(i,"ease",null),f=a(i,"grid",null),p=a(i,"from",0),b="first"===p,S="center"===p,M="last"===p,C="number"==typeof p,P=Array.isArray(t),R=P?parseFloat(t[0]):parseFloat(t),O=P?parseFloat(t[1]):0,B=Math.max(R,O);if(P&&(n+=R),f){var N=f[0],Y=f[1],X=0,G=0,U=0,V=0,z=[];M?(X=N-1,G=Y-1):C?(X=p%N,G=Math.floor(p/N)):S&&(X=(N-1)/2,G=(Y-1)/2);for(var W=u.MIN_SAFE_INTEGER,H=0;H<Y;H++){z[H]=[];for(var j=0;j<N;j++){U=X-j,V=G-H;var q=Math.sqrt(U*U+V*V);q>W&&(W=q),z[H][j]=q}}}var Z=d?o(d):null;return f?function(t,i,o,a){var u,d=0,f=a%N,p=Math.floor(a/N);if(f>=0&&f<N&&p>=0&&p<Y&&(d=z[p][f]),P){var b=O-R;u=Z?d/W*b*Z(d/W):d/W*b}else u=Z?d*R*Z(d/W):d*R;return u+n}:function(t,i,o,a,u){var d,f,N;return u--,b?d=a:S?d=Math.abs(u/2-a):M?d=u-a:C&&(d=Math.abs(p-a)),P?(N=S?(O-R)/u*(2*d):(O-R)/u*d,f=Z?N*Z(d/u):N):f=Z?u*B*Z(d/u):d*R,f+n}}},function(t,i,n){var o=n(77),a=n(265),u=n(13),d=n(99),f=n(80),p=n(162),b=n(263),S=n(584),M=n(6),C=n(588),P=n(163);t.exports=function(t,i){var n=new C(t);n.completeDelay=u(i,"completeDelay",0),n.loop=Math.round(u(i,"loop",0)),n.loopDelay=Math.round(u(i,"loopDelay",0)),n.paused=d(i,"paused",!1),n.useFrames=d(i,"useFrames",!1);var R=M(i,"callbackScope",n),O=[n],B=M(i,"onStart",!1);if(B){var N=M(i,"onStartScope",R),Y=M(i,"onStartParams",[]);n.setCallback("onStart",B,O.concat(Y),N)}var X=M(i,"onUpdate",!1);if(X){var G=M(i,"onUpdateScope",R),U=M(i,"onUpdateParams",[]);n.setCallback("onUpdate",X,O.concat(U),G)}var V=M(i,"onLoop",!1);if(V){var z=M(i,"onLoopScope",R),W=M(i,"onLoopParams",[]);n.setCallback("onLoop",V,O.concat(W),z)}var H=M(i,"onYoyo",!1);if(H){var j=M(i,"onYoyoScope",R),q=M(i,"onYoyoParams",[]);n.setCallback("onYoyo",H,O.concat(null,q),j)}var Z=M(i,"onComplete",!1);if(Z){var K=M(i,"onCompleteScope",R),$=M(i,"onCompleteParams",[]);n.setCallback("onComplete",Z,O.concat($),K)}var tt=S(i);if(0===tt.length)return n.paused=!0,n;var et=o(a);et.targets=b(i);var it=u(i,"totalDuration",0);et.duration=it>0?Math.floor(it/tt.length):p(i,"duration",et.duration),et.delay=p(i,"delay",et.delay),et.easeParams=M(i,"easeParams",et.easeParams),et.ease=f(M(i,"ease",et.ease),et.easeParams),et.hold=p(i,"hold",et.hold),et.repeat=p(i,"repeat",et.repeat),et.repeatDelay=p(i,"repeatDelay",et.repeatDelay),et.yoyo=d(i,"yoyo",et.yoyo),et.flipX=d(i,"flipX",et.flipX),et.flipY=d(i,"flipY",et.flipY);for(var nt=0;nt<tt.length;nt++)n.queue(P(n,tt[nt],et));return n}},function(t,i,n){var o=n(0),a=n(9),u=n(267),d=n(163),f=n(100),p=new o({Extends:a,initialize:function Timeline2(t){a.call(this),this.manager=t,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=f.PENDING_ADD,this._pausedState=f.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(t,i){this.emit(t,this),i&&i.func.apply(i.scope,i.params)},setTimeScale:function(t){return this.timeScale=t,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===f.ACTIVE},add:function(t){return this.queue(d(this,t))},queue:function(t){return this.isPlaying()||(t.parent=this,t.parentIsTimeline=!0,this.data.push(t),this.totalData=this.data.length),this},hasOffset:function(t){return null!==t.offset},isOffsetAbsolute:function(t){return"number"==typeof t},isOffsetRelative:function(t){if("string"==typeof t){var i=t[0];if("-"===i||"+"===i)return!0}return!1},getRelativeOffset:function(t,i){var n=t[0],o=parseFloat(t.substr(2)),a=i;switch(n){case"+":a+=o;break;case"-":a-=o}return Math.max(0,a)},calcDuration:function(){for(var t=0,i=0,n=0,o=0;o<this.totalData;o++){var a=this.data[o];a.init(),this.hasOffset(a)?this.isOffsetAbsolute(a.offset)?(a.calculatedOffset=a.offset,0===a.offset&&(n=0)):this.isOffsetRelative(a.offset)&&(a.calculatedOffset=this.getRelativeOffset(a.offset,t)):a.calculatedOffset=n,t=a.totalDuration+a.calculatedOffset,i+=a.totalDuration,n+=a.totalDuration}this.duration=i,this.loopCounter=-1===this.loop?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,!this.paused||(this.state=f.PAUSED,!1)},resetTweens:function(t){for(var i=0;i<this.totalData;i++)this.data[i].play(t)},setCallback:function(t,i,n,o){return-1!==p.TYPES.indexOf(t)&&(this.callbacks[t]={func:i,scope:o,params:n}),this},makeActive:function(t){return this.manager.makeActive(t)},play:function(){if(this.state!==f.ACTIVE){if(this.paused)return this.paused=!1,void this.manager.makeActive(this);this.resetTweens(!1),this.state=f.ACTIVE,this.dispatchTimelineEvent(u.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=f.LOOP_DELAY):(this.state=f.ACTIVE,this.dispatchTimelineEvent(u.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=f.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=f.PENDING_REMOVE,this.dispatchTimelineEvent(u.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(t,i){if(this.state!==f.PAUSED){switch(this.useFrames&&(i=1*this.manager.timeScale),i*=this.timeScale,this.elapsed+=i,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=i,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case f.ACTIVE:for(var n=this.totalData,o=0;o<this.totalData;o++)this.data[o].update(t,i)&&n--;this.dispatchTimelineEvent(u.TIMELINE_UPDATE,this.callbacks.onUpdate),0===n&&this.nextState();break;case f.LOOP_DELAY:this.countdown-=i,this.countdown<=0&&(this.state=f.ACTIVE,this.dispatchTimelineEvent(u.TIMELINE_LOOP,this.callbacks.onLoop));break;case f.COMPLETE_DELAY:this.countdown-=i,this.countdown<=0&&(this.state=f.PENDING_REMOVE,this.dispatchTimelineEvent(u.TIMELINE_COMPLETE,this.callbacks.onComplete))}return this.state===f.PENDING_REMOVE}},stop:function(){this.state=f.PENDING_REMOVE},pause:function(){if(this.state!==f.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=f.PAUSED,this.emit(u.TIMELINE_PAUSE,this),this},resume:function(){return this.state===f.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(u.TIMELINE_RESUME,this)),this},hasTarget:function(t){for(var i=0;i<this.data.length;i++)if(this.data[i].hasTarget(t))return!0;return!1},destroy:function(){for(var t=0;t<this.data.length;t++)this.data[t].stop()}});p.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],t.exports=p},function(t,i,n){var o=n(86),a=n(41),u=n(32),d=n(2),f=n(64),p={parseBody:function(t,i,n,o){void 0===o&&(o={});for(var f=d(n,"fixtures",[]),p=[],b=0;b<f.length;b++)for(var S=this.parseFixture(f[b]),M=0;M<S.length;M++)p.push(S[M]);var C=u.clone(n,!0);u.extend(C,o,!0),delete C.fixtures,delete C.type;var P=a.create(C);return a.setParts(P,p),a.setPosition(P,{x:t,y:i}),P},parseFixture:function(t){var i,n=u.extend({},!1,t);if(delete n.circle,delete n.vertices,t.circle){var a=d(t.circle,"x"),f=d(t.circle,"y"),p=d(t.circle,"radius");i=[o.circle(a,f,p,n)]}else t.vertices&&(i=this.parseVertices(t.vertices,n));return i},parseVertices:function(t,i){void 0===i&&(i={});for(var n=[],d=0;d<t.length;d++)f.clockwiseSort(t[d]),n.push(a.create(u.extend({position:f.centre(t[d]),vertices:t[d]},i)));return o.flagCoincidentParts(n)}};t.exports=p},function(t,i,n){var o=n(86),a=n(41),u={parseBody:function(t,i,n,u){var d;void 0===u&&(u={});var f=n.vertices;if(1===f.length)u.vertices=f[0],d=a.create(u),o.flagCoincidentParts(d.parts);else{for(var p=[],b=0;b<f.length;b++){var S=a.create({vertices:f[b]});p.push(S)}o.flagCoincidentParts(p),u.parts=p,d=a.create(u)}return d.label=n.label,a.setPosition(d,{x:t,y:i}),d}};t.exports=u},function(t,i,n){var o={};t.exports=o;var a=n(118),u=n(128),d=n(32),f=n(41),p=n(86);o.stack=function(t,i,n,o,u,d,p){for(var b,S=a.create({label:"Stack"}),M=t,C=i,P=0,R=0;R<o;R++){for(var O=0,B=0;B<n;B++){var N=p(M,C,B,R,b,P);if(N){var Y=N.bounds.max.y-N.bounds.min.y,X=N.bounds.max.x-N.bounds.min.x;Y>O&&(O=Y),f.translate(N,{x:.5*X,y:.5*Y}),M=N.bounds.max.x+u,a.addBody(S,N),b=N,P+=1}else M+=u}C+=O+d,M=t}return S},o.chain=function(t,i,n,o,f,p){for(var b=t.bodies,S=1;S<b.length;S++){var M=b[S-1],C=b[S],P=M.bounds.max.y-M.bounds.min.y,R=M.bounds.max.x-M.bounds.min.x,O=C.bounds.max.y-C.bounds.min.y,B={bodyA:M,pointA:{x:R*i,y:P*n},bodyB:C,pointB:{x:(C.bounds.max.x-C.bounds.min.x)*o,y:O*f}},N=d.extend(B,p);a.addConstraint(t,u.create(N))}return t.label+=" Chain",t},o.mesh=function(t,i,n,o,f){var p,b,S,M,C,P=t.bodies;for(p=0;p<n;p++){for(b=1;b<i;b++)S=P[b-1+p*i],M=P[b+p*i],a.addConstraint(t,u.create(d.extend({bodyA:S,bodyB:M},f)));if(p>0)for(b=0;b<i;b++)S=P[b+(p-1)*i],M=P[b+p*i],a.addConstraint(t,u.create(d.extend({bodyA:S,bodyB:M},f))),o&&b>0&&(C=P[b-1+(p-1)*i],a.addConstraint(t,u.create(d.extend({bodyA:C,bodyB:M},f)))),o&&b<i-1&&(C=P[b+1+(p-1)*i],a.addConstraint(t,u.create(d.extend({bodyA:C,bodyB:M},f))))}return t.label+=" Mesh",t},o.pyramid=function(t,i,n,a,u,d,p){return o.stack(t,i,n,a,u,d,(function(i,o,d,b,S,M){var C=Math.min(a,Math.ceil(n/2)),P=S?S.bounds.max.x-S.bounds.min.x:0;if(!(b>C||d<(b=C-b)||d>n-1-b))return 1===M&&f.translate(S,{x:(d+(n%2==1?1:-1))*P,y:0}),p(t+(S?d*P:0)+d*u,o,d,b,S,M)}))},o.newtonsCradle=function(t,i,n,o,d){for(var f=a.create({label:"Newtons Cradle"}),b=0;b<n;b++){var S=p.circle(t+b*(1.9*o),i+d,o,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),M=u.create({pointA:{x:t+b*(1.9*o),y:i},bodyB:S});a.addBody(f,S),a.addConstraint(f,M)}return f},o.car=function(t,i,n,o,d){var b=f.nextGroup(!0),S=.5*-n+20,M=.5*n-20,C=a.create({label:"Car"}),P=p.rectangle(t,i,n,o,{collisionFilter:{group:b},chamfer:{radius:.5*o},density:2e-4}),R=p.circle(t+S,i+0,d,{collisionFilter:{group:b},friction:.8}),O=p.circle(t+M,i+0,d,{collisionFilter:{group:b},friction:.8}),B=u.create({bodyB:P,pointB:{x:S,y:0},bodyA:R,stiffness:1,length:0}),N=u.create({bodyB:P,pointB:{x:M,y:0},bodyA:O,stiffness:1,length:0});return a.addBody(C,P),a.addBody(C,R),a.addBody(C,O),a.addConstraint(C,B),a.addConstraint(C,N),C},o.softBody=function(t,i,n,a,u,f,b,S,M,C){M=d.extend({inertia:1/0},M),C=d.extend({stiffness:.2,render:{type:"line",anchors:!1}},C);var P=o.stack(t,i,n,a,u,f,(function(t,i){return p.circle(t,i,S,M)}));return o.mesh(P,n,a,b,C),P.label="Soft Body",P}},function(t,i,n){var o={};t.exports=o,n(84);var a=n(32);o.pathToVertices=function(t,i){"undefined"==typeof window||"SVGPathSeg"in window||a.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var n,u,d,f,p,b,S,M,C,P,R,O=[],B=0,N=0,Y=0;i=i||15;var addPoint=function(t,i,n){var o=n%2==1&&n>1;if(!C||t!=C.x||i!=C.y){C&&o?(P=C.x,R=C.y):(P=0,R=0);var a={x:P+t,y:R+i};!o&&C||(C=a),O.push(a),N=P+t,Y=R+i}},addSegmentPoint=function(t){var i=t.pathSegTypeAsLetter.toUpperCase();if("Z"!==i){switch(i){case"M":case"L":case"T":case"C":case"S":case"Q":N=t.x,Y=t.y;break;case"H":N=t.x;break;case"V":Y=t.y}addPoint(N,Y,t.pathSegType)}};for(o._svgPathToAbsolute(t),d=t.getTotalLength(),b=[],n=0;n<t.pathSegList.numberOfItems;n+=1)b.push(t.pathSegList.getItem(n));for(S=b.concat();B<d;){if((p=b[t.getPathSegAtLength(B)])!=M){for(;S.length&&S[0]!=p;)addSegmentPoint(S.shift());M=p}switch(p.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":f=t.getPointAtLength(B),addPoint(f.x,f.y,0)}B+=i}for(n=0,u=S.length;n<u;++n)addSegmentPoint(S[n]);return O},o._svgPathToAbsolute=function(t){for(var i,n,o,a,u,d,f=t.pathSegList,p=0,b=0,S=f.numberOfItems,M=0;M<S;++M){var C=f.getItem(M),P=C.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(P))"x"in C&&(p=C.x),"y"in C&&(b=C.y);else switch("x1"in C&&(o=p+C.x1),"x2"in C&&(u=p+C.x2),"y1"in C&&(a=b+C.y1),"y2"in C&&(d=b+C.y2),"x"in C&&(p+=C.x),"y"in C&&(b+=C.y),P){case"m":f.replaceItem(t.createSVGPathSegMovetoAbs(p,b),M);break;case"l":f.replaceItem(t.createSVGPathSegLinetoAbs(p,b),M);break;case"h":f.replaceItem(t.createSVGPathSegLinetoHorizontalAbs(p),M);break;case"v":f.replaceItem(t.createSVGPathSegLinetoVerticalAbs(b),M);break;case"c":f.replaceItem(t.createSVGPathSegCurvetoCubicAbs(p,b,o,a,u,d),M);break;case"s":f.replaceItem(t.createSVGPathSegCurvetoCubicSmoothAbs(p,b,u,d),M);break;case"q":f.replaceItem(t.createSVGPathSegCurvetoQuadraticAbs(p,b,o,a),M);break;case"t":f.replaceItem(t.createSVGPathSegCurvetoQuadraticSmoothAbs(p,b),M);break;case"a":f.replaceItem(t.createSVGPathSegArcAbs(p,b,C.r1,C.r2,C.angle,C.largeArcFlag,C.sweepFlag),M);break;case"z":case"Z":p=i,b=n}"M"!=P&&"m"!=P||(i=p,n=b)}}},function(t,i,n){var o=n(86),a=n(41),u=n(0),d=n(249),f=n(9),p=n(2),b=n(126),S=n(64),M=new u({Extends:f,Mixins:[d.Bounce,d.Collision,d.Friction,d.Gravity,d.Mass,d.Sensor,d.Sleep,d.Static],initialize:function MatterTileBody2(t,i,n){f.call(this),this.tile=i,this.world=t,i.physics.matterBody&&i.physics.matterBody.destroy(),i.physics.matterBody=this;var o=p(n,"body",null),a=p(n,"addToWorld",!0);if(o)this.setBody(o,a);else{var u=i.getCollisionGroup();p(u,"objects",[]).length>0?this.setFromTileCollision(n):this.setFromTileRectangle(n)}},setFromTileRectangle:function(t){void 0===t&&(t={}),b(t,"isStatic")||(t.isStatic=!0),b(t,"addToWorld")||(t.addToWorld=!0);var i=this.tile.getBounds(),n=i.x+i.width/2,a=i.y+i.height/2,u=o.rectangle(n,a,i.width,i.height,t);return this.setBody(u,t.addToWorld),this},setFromTileCollision:function(t){void 0===t&&(t={}),b(t,"isStatic")||(t.isStatic=!0),b(t,"addToWorld")||(t.addToWorld=!0);for(var i=this.tile.tilemapLayer.scaleX,n=this.tile.tilemapLayer.scaleY,u=this.tile.getLeft(),d=this.tile.getTop(),f=this.tile.getCollisionGroup(),M=p(f,"objects",[]),C=[],P=0;P<M.length;P++){var R=M[P],O=u+R.x*i,B=d+R.y*n,N=R.width*i,Y=R.height*n,X=null;if(R.rectangle)X=o.rectangle(O+N/2,B+Y/2,N,Y,t);else if(R.ellipse)X=o.circle(O+N/2,B+Y/2,N/2,t);else if(R.polygon||R.polyline){var G=(R.polygon?R.polygon:R.polyline).map((function(t){return{x:t.x*i,y:t.y*n}})),U=S.create(G),V=S.centre(U);O+=V.x,B+=V.y,X=o.fromVertices(O,B,U,t)}X&&C.push(X)}return 1===C.length?this.setBody(C[0],t.addToWorld):C.length>1&&(t.parts=C,this.setBody(a.create(t),t.addToWorld)),this},setBody:function(t,i){return void 0===i&&(i=!0),this.body&&this.removeBody(),this.body=t,this.body.gameObject=this,i&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});t.exports=M},function(t,i,n){var o=n(1399);o.Body=n(41),o.Composite=n(118),o.World=n(596),o.Detector=n(273),o.Grid=n(597),o.Pairs=n(598),o.Pair=n(250),o.Query=n(1400),o.Resolver=n(599),o.SAT=n(274),o.Constraint=n(128),o.Common=n(32),o.Engine=n(1401),o.Events=n(166),o.Sleeping=n(165),o.Plugin=n(595),o.Bodies=n(86),o.Composites=n(591),o.Axes=n(271),o.Bounds=n(84),o.Svg=n(592),o.Vector=n(83),o.Vertices=n(64),o.World.add=o.Composite.add,o.World.remove=o.Composite.remove,o.World.addComposite=o.Composite.addComposite,o.World.addBody=o.Composite.addBody,o.World.addConstraint=o.Composite.addConstraint,o.World.clear=o.Composite.clear,t.exports=o},function(t,i,n){var o={};t.exports=o;var a=n(32);o._registry={},o.register=function(t){if(o.isPlugin(t)||a.warn("Plugin.register:",o.toString(t),"does not implement all required fields."),t.name in o._registry){var i=o._registry[t.name],n=o.versionParse(t.version).number,u=o.versionParse(i.version).number;n>u?(a.warn("Plugin.register:",o.toString(i),"was upgraded to",o.toString(t)),o._registry[t.name]=t):n<u?a.warn("Plugin.register:",o.toString(i),"can not be downgraded to",o.toString(t)):t!==i&&a.warn("Plugin.register:",o.toString(t),"is already registered to different plugin object")}else o._registry[t.name]=t;return t},o.resolve=function(t){return o._registry[o.dependencyParse(t).name]},o.toString=function(t){return"string"==typeof t?t:(t.name||"anonymous")+"@"+(t.version||t.range||"0.0.0")},o.isPlugin=function(t){return t&&t.name&&t.version&&t.install},o.isUsed=function(t,i){return t.used.indexOf(i)>-1},o.isFor=function(t,i){var n=t.for&&o.dependencyParse(t.for);return!t.for||i.name===n.name&&o.versionSatisfies(i.version,n.range)},o.use=function(t,i){if(t.uses=(t.uses||[]).concat(i||[]),0!==t.uses.length){for(var n=o.dependencies(t),u=a.topologicalSort(n),d=[],f=0;f<u.length;f+=1)if(u[f]!==t.name){var p=o.resolve(u[f]);p?o.isUsed(t,p.name)||(o.isFor(p,t)||(a.warn("Plugin.use:",o.toString(p),"is for",p.for,"but installed on",o.toString(t)+"."),p._warned=!0),p.install?p.install(t):(a.warn("Plugin.use:",o.toString(p),"does not specify an install function."),p._warned=!0),p._warned?(d.push(" "+o.toString(p)),delete p._warned):d.push(" "+o.toString(p)),t.used.push(p.name)):d.push(" "+u[f])}d.length>0&&!p.silent&&a.info(d.join("  "))}else a.warn("Plugin.use:",o.toString(t),"does not specify any dependencies to install.")},o.dependencies=function(t,i){var n=o.dependencyParse(t),u=n.name;if(!(u in(i=i||{}))){t=o.resolve(t)||t,i[u]=a.map(t.uses||[],(function(i){o.isPlugin(i)&&o.register(i);var u=o.dependencyParse(i),d=o.resolve(i);return d&&!o.versionSatisfies(d.version,u.range)?(a.warn("Plugin.dependencies:",o.toString(d),"does not satisfy",o.toString(u),"used by",o.toString(n)+"."),d._warned=!0,t._warned=!0):d||(a.warn("Plugin.dependencies:",o.toString(i),"used by",o.toString(n),"could not be resolved."),t._warned=!0),u.name}));for(var d=0;d<i[u].length;d+=1)o.dependencies(i[u][d],i);return i}},o.dependencyParse=function(t){return a.isString(t)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/.test(t)||a.warn("Plugin.dependencyParse:",t,"is not a valid dependency string."),{name:t.split("@")[0],range:t.split("@")[1]||"*"}):{name:t.name,range:t.range||t.version}},o.versionParse=function(t){/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/.test(t)||a.warn("Plugin.versionParse:",t,"is not a valid version or range.");var i=t.split("-");t=i[0];var n=isNaN(Number(t[0])),o=n?t.substr(1):t,u=a.map(o.split("."),(function(t){return Number(t)}));return{isRange:n,version:o,range:t,operator:n?t[0]:"",parts:u,prerelease:i[1],number:1e8*u[0]+1e4*u[1]+u[2]}},o.versionSatisfies=function(t,i){i=i||"*";var n=o.versionParse(i),a=n.parts,u=o.versionParse(t),d=u.parts;if(n.isRange){if("*"===n.operator||"*"===t)return!0;if("~"===n.operator)return d[0]===a[0]&&d[1]===a[1]&&d[2]>=a[2];if("^"===n.operator)return a[0]>0?d[0]===a[0]&&u.number>=n.number:a[1]>0?d[1]===a[1]&&d[2]>=a[2]:d[2]===a[2]}return t===i||"*"===t}},function(t,i,n){var o={};t.exports=o;var a=n(118);n(128);var u=n(32);o.create=function(t){var i=a.create(),n={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return u.extend(i,n,t)}},function(t,i,n){var o={};t.exports=o;var a=n(250),u=n(273),d=n(32);o.create=function(t){var i={controller:o,detector:u.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return d.extend(i,t)},o.update=function(t,i,n,a){var u,d,f,p,b,S=n.world,M=t.buckets,C=!1,P=n.metrics;for(P.broadphaseTests=0,u=0;u<i.length;u++){var R=i[u];if((!R.isSleeping||a)&&!(R.bounds.max.x<S.bounds.min.x||R.bounds.min.x>S.bounds.max.x||R.bounds.max.y<S.bounds.min.y||R.bounds.min.y>S.bounds.max.y)){var O=o._getRegion(t,R);if(!R.region||O.id!==R.region.id||a){P.broadphaseTests+=1,R.region&&!a||(R.region=O);var B=o._regionUnion(O,R.region);for(d=B.startCol;d<=B.endCol;d++)for(f=B.startRow;f<=B.endRow;f++){p=M[b=o._getBucketId(d,f)];var N=d>=O.startCol&&d<=O.endCol&&f>=O.startRow&&f<=O.endRow,Y=d>=R.region.startCol&&d<=R.region.endCol&&f>=R.region.startRow&&f<=R.region.endRow;!N&&Y&&Y&&p&&o._bucketRemoveBody(t,p,R),(R.region===O||N&&!Y||a)&&(p||(p=o._createBucket(M,b)),o._bucketAddBody(t,p,R))}R.region=O,C=!0}}}C&&(t.pairsList=o._createActivePairsList(t))},o.clear=function(t){t.buckets={},t.pairs={},t.pairsList=[]},o._regionUnion=function(t,i){var n=Math.min(t.startCol,i.startCol),a=Math.max(t.endCol,i.endCol),u=Math.min(t.startRow,i.startRow),d=Math.max(t.endRow,i.endRow);return o._createRegion(n,a,u,d)},o._getRegion=function(t,i){var n=i.bounds,a=Math.floor(n.min.x/t.bucketWidth),u=Math.floor(n.max.x/t.bucketWidth),d=Math.floor(n.min.y/t.bucketHeight),f=Math.floor(n.max.y/t.bucketHeight);return o._createRegion(a,u,d,f)},o._createRegion=function(t,i,n,o){return{id:t+","+i+","+n+","+o,startCol:t,endCol:i,startRow:n,endRow:o}},o._getBucketId=function(t,i){return"C"+t+"R"+i},o._createBucket=function(t,i){return t[i]=[]},o._bucketAddBody=function(t,i,n){for(var o=0;o<i.length;o++){var u=i[o];if(!(n.id===u.id||n.isStatic&&u.isStatic)){var d=a.id(n,u),f=t.pairs[d];f?f[2]+=1:t.pairs[d]=[n,u,1]}}i.push(n)},o._bucketRemoveBody=function(t,i,n){i.splice(i.indexOf(n),1);for(var o=0;o<i.length;o++){var u=i[o],d=a.id(n,u),f=t.pairs[d];f&&(f[2]-=1)}},o._createActivePairsList=function(t){var i,n,o=[];i=d.keys(t.pairs);for(var a=0;a<i.length;a++)(n=t.pairs[i[a]])[2]>0?o.push(n):delete t.pairs[i[a]];return o}},function(t,i,n){var o={};t.exports=o;var a=n(250),u=n(32);o._pairMaxIdleLife=1e3,o.create=function(t){return u.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},t)},o.update=function(t,i,n){var o,u,d,f,p=t.list,b=t.table,S=t.collisionStart,M=t.collisionEnd,C=t.collisionActive;for(S.length=0,M.length=0,C.length=0,f=0;f<p.length;f++)p[f].confirmedActive=!1;for(f=0;f<i.length;f++)(o=i[f]).collided&&((d=b[u=a.id(o.bodyA,o.bodyB)])?(d.isActive?C.push(d):S.push(d),a.update(d,o,n),d.confirmedActive=!0):(d=a.create(o,n),b[u]=d,S.push(d),p.push(d)));for(f=0;f<p.length;f++)(d=p[f]).isActive&&!d.confirmedActive&&(a.setActive(d,!1,n),M.push(d))},o.removeOld=function(t,i){var n,a,u,d,f=t.list,p=t.table,b=[];for(d=0;d<f.length;d++)(a=(n=f[d]).collision).bodyA.isSleeping||a.bodyB.isSleeping?n.timeUpdated=i:i-n.timeUpdated>o._pairMaxIdleLife&&b.push(d);for(d=0;d<b.length;d++)delete p[(n=f[u=b[d]-d]).id],f.splice(u,1)},o.clear=function(t){return t.table={},t.list.length=0,t.collisionStart.length=0,t.collisionActive.length=0,t.collisionEnd.length=0,t}},function(t,i,n){var o={};t.exports=o;var a=n(64),u=n(83),d=n(32),f=n(84);o._restingThresh=4,o._restingThreshTangent=6,o._positionDampen=.9,o._positionWarming=.8,o._frictionNormalMultiplier=5,o.preSolvePosition=function(t){var i,n,o;for(i=0;i<t.length;i++)(n=t[i]).isActive&&(o=n.activeContacts.length,n.collision.parentA.totalContacts+=o,n.collision.parentB.totalContacts+=o)},o.solvePosition=function(t,i,n){var a,u,d,f,p,b,S,M,C,P,R,O,B,N,Y,X,G=n*o._positionDampen;for(a=0;a<i.length;a++){var U=i[a];U.previousPositionImpulse.x=U.positionImpulse.x,U.previousPositionImpulse.y=U.positionImpulse.y}for(a=0;a<t.length;a++)(f=t[a]).isActive&&!f.isSensor&&(b=(p=f.collision).parentA,S=p.parentB,M=p.normal,R=b.previousPositionImpulse,O=S.previousPositionImpulse,P=p.penetration,N=O.x-R.x+P.x,Y=O.y-R.y+P.y,C=(u=M.x)*N+(d=M.y)*Y,f.separation=C,X=(C-f.slop)*G,(b.isStatic||S.isStatic)&&(X*=2),b.isStatic||b.isSleeping||(B=X/b.totalContacts,b.positionImpulse.x+=u*B,b.positionImpulse.y+=d*B),S.isStatic||S.isSleeping||(B=X/S.totalContacts,S.positionImpulse.x-=u*B,S.positionImpulse.y-=d*B))},o.postSolvePosition=function(t){for(var i=0;i<t.length;i++){var n=t[i];if(n.totalContacts=0,0!==n.positionImpulse.x||0!==n.positionImpulse.y){for(var d=0;d<n.parts.length;d++){var p=n.parts[d];a.translate(p.vertices,n.positionImpulse),f.update(p.bounds,p.vertices,n.velocity),p.position.x+=n.positionImpulse.x,p.position.y+=n.positionImpulse.y}n.positionPrev.x+=n.positionImpulse.x,n.positionPrev.y+=n.positionImpulse.y,u.dot(n.positionImpulse,n.velocity)<0?(n.positionImpulse.x=0,n.positionImpulse.y=0):(n.positionImpulse.x*=o._positionWarming,n.positionImpulse.y*=o._positionWarming)}}},o.preSolveVelocity=function(t){var i,n,o,a,d,f,p,b,S,M,C,P,R,O,B=u._temp[0],N=u._temp[1];for(i=0;i<t.length;i++)if((o=t[i]).isActive&&!o.isSensor)for(a=o.activeContacts,f=(d=o.collision).parentA,p=d.parentB,b=d.normal,S=d.tangent,n=0;n<a.length;n++)C=(M=a[n]).vertex,P=M.normalImpulse,R=M.tangentImpulse,0===P&&0===R||(B.x=b.x*P+S.x*R,B.y=b.y*P+S.y*R,f.isStatic||f.isSleeping||(O=u.sub(C,f.position,N),f.positionPrev.x+=B.x*f.inverseMass,f.positionPrev.y+=B.y*f.inverseMass,f.anglePrev+=u.cross(O,B)*f.inverseInertia),p.isStatic||p.isSleeping||(O=u.sub(C,p.position,N),p.positionPrev.x-=B.x*p.inverseMass,p.positionPrev.y-=B.y*p.inverseMass,p.anglePrev-=u.cross(O,B)*p.inverseInertia))},o.solveVelocity=function(t,i){for(var n=i*i,a=u._temp[0],f=u._temp[1],p=u._temp[2],b=u._temp[3],S=u._temp[4],M=u._temp[5],C=0;C<t.length;C++){var P=t[C];if(P.isActive&&!P.isSensor){var R=P.collision,O=R.parentA,B=R.parentB,N=R.normal,Y=R.tangent,X=P.activeContacts,G=1/X.length;O.velocity.x=O.position.x-O.positionPrev.x,O.velocity.y=O.position.y-O.positionPrev.y,B.velocity.x=B.position.x-B.positionPrev.x,B.velocity.y=B.position.y-B.positionPrev.y,O.angularVelocity=O.angle-O.anglePrev,B.angularVelocity=B.angle-B.anglePrev;for(var U=0;U<X.length;U++){var V=X[U],z=V.vertex,W=u.sub(z,O.position,f),H=u.sub(z,B.position,p),j=u.add(O.velocity,u.mult(u.perp(W),O.angularVelocity),b),q=u.add(B.velocity,u.mult(u.perp(H),B.angularVelocity),S),Z=u.sub(j,q,M),K=u.dot(N,Z),$=u.dot(Y,Z),tt=Math.abs($),et=d.sign($),it=(1+P.restitution)*K,nt=d.clamp(P.separation+K,0,1)*o._frictionNormalMultiplier,st=$,rt=1/0;tt>P.friction*P.frictionStatic*nt*n&&(rt=tt,st=d.clamp(P.friction*et*n,-rt,rt));var ot=u.cross(W,N),at=u.cross(H,N),ht=G/(O.inverseMass+B.inverseMass+O.inverseInertia*ot*ot+B.inverseInertia*at*at);if(it*=ht,st*=ht,K<0&&K*K>o._restingThresh*n)V.normalImpulse=0;else{var lt=V.normalImpulse;V.normalImpulse=Math.min(V.normalImpulse+it,0),it=V.normalImpulse-lt}if($*$>o._restingThreshTangent*n)V.tangentImpulse=0;else{var ut=V.tangentImpulse;V.tangentImpulse=d.clamp(V.tangentImpulse+st,-rt,rt),st=V.tangentImpulse-ut}a.x=N.x*it+Y.x*st,a.y=N.y*it+Y.y*st,O.isStatic||O.isSleeping||(O.positionPrev.x+=a.x*O.inverseMass,O.positionPrev.y+=a.y*O.inverseMass,O.anglePrev+=u.cross(W,a)*O.inverseInertia),B.isStatic||B.isSleeping||(B.positionPrev.x-=a.x*B.inverseMass,B.positionPrev.y-=a.y*B.inverseMass,B.anglePrev-=u.cross(H,a)*B.inverseInertia)}}}}},function(t,i){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(o){"object"==typeof window&&(n=window)}t.exports=n},function(t,i,n){var o=n(276);t.exports=function(t,i,n,a){for(var u=t[0],d=1;d<t.length;d++){var f=t[d];o(f,u,i,n,a),u=f}return t}},function(t,i,n){var o=n(46);t.exports=function(t,i,n,a,u){return o(t,"angle",i,n,a,u)}},function(t,i){t.exports=function(t,i,n){for(var o=0;o<t.length;o++){var a=t[o];i.call(n,a)}return t}},function(t,i){t.exports=function(t,i,n){void 0===n&&(n=0);for(var o=n;o<t.length;o++){var a=t[o],u=!0;for(var d in i)a[d]!==i[d]&&(u=!1);if(u)return a}return null}},function(t,i){t.exports=function(t,i,n){void 0===n&&(n=0);for(var o=n;o<t.length;o++){var a=t[o],u=!0;for(var d in i)a[d]!==i[d]&&(u=!1);if(u)return a}return null}},function(t,i,n){var o=n(289),a=n(123),u=n(2),d=n(1),f=new(n(129))({sys:{queueDepthSort:d,events:{once:d}}},0,0,1,1);t.exports=function(t,i){void 0===i&&(i={});var n=i.hasOwnProperty("width"),d=i.hasOwnProperty("height"),p=u(i,"width",-1),b=u(i,"height",-1),S=u(i,"cellWidth",1),M=u(i,"cellHeight",S),C=u(i,"position",a.TOP_LEFT),P=u(i,"x",0),R=u(i,"y",0),O=0,B=0,N=p*S,Y=b*M;f.setPosition(P,R),f.setSize(S,M);for(var X=0;X<t.length;X++)if(o(t[X],f,C),n&&-1===p)f.x+=S;else if(d&&-1===b)f.y+=M;else if(d&&!n){if(B+=M,f.y+=M,B===Y&&(B=0,O+=S,f.y=R,f.x+=S,O===N))break}else if(O+=S,f.x+=S,O===N&&(O=0,B+=M,f.x=P,f.y+=M,B===Y))break;return t}},function(t,i,n){var o=n(18),a={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t,i,n,a){return void 0===t&&(t=1),void 0===i?this.alpha=t:(this._alphaTL=o(t,0,1),this._alphaTR=o(i,0,1),this._alphaBL=o(n,0,1),this._alphaBR=o(a,0,1)),this},alpha:{get:function(){return this._alpha},set:function(t){var i=o(t,0,1);this._alpha=i,this._alphaTL=i,this._alphaTR=i,this._alphaBL=i,this._alphaBR=i,0===i?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(t){var i=o(t,0,1);this._alphaTL=i,0!==i&&(this.renderFlags|=2)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(t){var i=o(t,0,1);this._alphaTR=i,0!==i&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(t){var i=o(t,0,1);this._alphaBL=i,0!==i&&(this.renderFlags|=2)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(t){var i=o(t,0,1);this._alphaBR=i,0!==i&&(this.renderFlags|=2)}}};t.exports=a},function(t,i){t.exports={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,i){return this.width=t,this.height=i,this},setDisplaySize:function(t,i){return this.displayWidth=t,this.displayHeight=i,this}}},function(t,i){t.exports={texture:null,frame:null,isCropped:!1,setCrop:function(t,i,n,o){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,i,n,o,this.flipX,this.flipY);else{var a=t;this.frame.setCropUVs(this._crop,a.x,a.y,a.width,a.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},function(t,i){t.exports={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,i){return this.flipX=t,this.flipY=i,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}}},function(t,i,n){var o=n(10),a=n(308),u=n(3),d={prepareBoundsOutput:function(t,i){return void 0===i&&(i=!1),0!==this.rotation&&a(t,this.x,this.y,this.rotation),i&&this.parentContainer&&this.parentContainer.getBoundsTransformMatrix().transformPoint(t.x,t.y,t),t},getCenter:function(t){return void 0===t&&(t=new u),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,t},getTopLeft:function(t,i){return t||(t=new u),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,i)},getTopCenter:function(t,i){return t||(t=new u),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,i)},getTopRight:function(t,i){return t||(t=new u),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,i)},getLeftCenter:function(t,i){return t||(t=new u),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,i)},getRightCenter:function(t,i){return t||(t=new u),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,i)},getBottomLeft:function(t,i){return t||(t=new u),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,i)},getBottomCenter:function(t,i){return t||(t=new u),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,i)},getBottomRight:function(t,i){return t||(t=new u),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,i)},getBounds:function(t){var i,n,a,u,d,f,p,b;if(void 0===t&&(t=new o),this.parentContainer){var S=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(t),S.transformPoint(t.x,t.y,t),i=t.x,n=t.y,this.getTopRight(t),S.transformPoint(t.x,t.y,t),a=t.x,u=t.y,this.getBottomLeft(t),S.transformPoint(t.x,t.y,t),d=t.x,f=t.y,this.getBottomRight(t),S.transformPoint(t.x,t.y,t),p=t.x,b=t.y}else this.getTopLeft(t),i=t.x,n=t.y,this.getTopRight(t),a=t.x,u=t.y,this.getBottomLeft(t),d=t.x,f=t.y,this.getBottomRight(t),p=t.x,b=t.y;return t.x=Math.min(i,a,d,p),t.y=Math.min(n,u,f,b),t.width=Math.max(i,a,d,p)-t.x,t.height=Math.max(n,u,f,b)-t.y,t}};t.exports=d},function(t,i){t.exports="blur"},function(t,i){t.exports="boot"},function(t,i){t.exports="contextlost"},function(t,i){t.exports="contextrestored"},function(t,i){t.exports="destroy"},function(t,i){t.exports="focus"},function(t,i){t.exports="hidden"},function(t,i){t.exports="pause"},function(t,i){t.exports="postrender"},function(t,i){t.exports="poststep"},function(t,i){t.exports="prerender"},function(t,i){t.exports="prestep"},function(t,i){t.exports="ready"},function(t,i){t.exports="resume"},function(t,i){t.exports="step"},function(t,i){t.exports="visible"},function(t,i){t.exports="postrender"},function(t,i){t.exports="prerender"},function(t,i){t.exports="render"},function(t,i){t.exports="resize"},function(t,i){t.exports={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function(t,i){return void 0===t&&(t=.5),void 0===i&&(i=t),this.originX=t,this.originY=i,this.updateDisplayOrigin()},setOriginFromFrame:function(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.displayOriginX=t,this.displayOriginY=i,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}}},function(t,i,n){var o=n(36),a=n(99),u=n(6),d=n(100),f=n(3),p={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:d.PLAYING_FORWARD,setPath:function(t,i){void 0===i&&(i=this.pathConfig);var n=this.pathTween;return n&&n.isPlaying()&&n.stop(),this.path=t,i&&this.startFollow(i),this},setRotateToPath:function(t,i){return void 0===i&&(i=0),this.rotateToPath=t,this.pathRotationOffset=i,this},isFollowing:function(){var t=this.pathTween;return t&&t.isPlaying()},startFollow:function(t,i){void 0===t&&(t={}),void 0===i&&(i=0);var n=this.pathTween;n&&n.isPlaying()&&n.stop(),"number"==typeof t&&(t={duration:t}),t.from=u(t,"from",0),t.to=u(t,"to",1);var p=a(t,"positionOnPath",!1);this.rotateToPath=a(t,"rotateToPath",!1),this.pathRotationOffset=u(t,"rotationOffset",0);var b=u(t,"startAt",i);if(b&&(t.onStart=function(t){var i=t.data[0];i.progress=b,i.elapsed=i.duration*b;var n=i.ease(i.progress);i.current=i.start+(i.end-i.start)*n,i.target[i.key]=i.current}),this.pathOffset||(this.pathOffset=new f(this.x,this.y)),this.pathVector||(this.pathVector=new f),this.pathDelta||(this.pathDelta=new f),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(t),this.path.getStartPoint(this.pathOffset),p&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=d.PLAYING_FORWARD,this.rotateToPath){var S=this.path.getPoint(.1);this.rotation=Math.atan2(S.y-this.y,S.x-this.x)+o(this.pathRotationOffset)}return this.pathConfig=t,this},pauseFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.pause(),this},resumeFollow:function(){var t=this.pathTween;return t&&t.isPaused()&&t.resume(),this},stopFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.stop(),this},pathUpdate:function(){var t=this.pathTween;if(t){var i=t.data[0],n=this.pathDelta,a=this.pathVector;if(n.copy(a).negate(),i.state===d.COMPLETE)return this.path.getPoint(1,a),n.add(a),a.add(this.pathOffset),void this.setPosition(a.x,a.y);if(i.state!==d.PLAYING_FORWARD&&i.state!==d.PLAYING_BACKWARD)return;this.path.getPoint(t.getValue(),a),n.add(a),a.add(this.pathOffset);var u=this.x,f=this.y;this.setPosition(a.x,a.y);var p=this.x-u,b=this.y-f;if(0===p&&0===b)return;if(i.state!==this._prevDirection)return void(this._prevDirection=i.state);this.rotateToPath&&(this.rotation=Math.atan2(b,p)+o(this.pathRotationOffset))}}};t.exports=p},function(t,i){var n={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function(t){return void 0===t&&(t=this.frame),this.width=t.realWidth,this.height=t.realHeight,this},setSize:function(t,i){return this.width=t,this.height=i,this},setDisplaySize:function(t,i){return this.displayWidth=t,this.displayHeight=i,this}};t.exports=n},function(t,i){var n={texture:null,frame:null,isCropped:!1,setTexture:function(t,i){return this.texture=this.scene.sys.textures.get(t),this.setFrame(i)},setFrame:function(t,i,n){return void 0===i&&(i=!0),void 0===n&&(n=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&i&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};t.exports=n},function(t,i){var n={texture:null,frame:null,isCropped:!1,setCrop:function(t,i,n,o){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,i,n,o,this.flipX,this.flipY);else{var a=t;this.frame.setCropUVs(this._crop,a.x,a.y,a.width,a.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(t,i){return this.texture=this.scene.sys.textures.get(t),this.setFrame(i)},setFrame:function(t,i,n){return void 0===i&&(i=!0),void 0===n&&(n=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&i&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};t.exports=n},function(t,i){t.exports={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(t,i,n,o){return void 0===t&&(t=16777215),void 0===i&&(i=t,n=t,o=t),this.tintTopLeft=t,this.tintTopRight=i,this.tintBottomLeft=n,this.tintBottomRight=o,this.tintFill=!1,this},setTintFill:function(t,i,n,o){return this.setTint(t,i,n,o),this.tintFill=!0,this},tint:{set:function(t){this.setTint(t,t,t,t)}},isTinted:{get:function(){var t=16777215;return this.tintFill||this.tintTopLeft!==t||this.tintTopRight!==t||this.tintBottomLeft!==t||this.tintBottomRight!==t}}}},function(t,i){t.exports="changedata"},function(t,i){t.exports="changedata-"},function(t,i){t.exports="destroy"},function(t,i){t.exports="removedata"},function(t,i){t.exports="setdata"},function(t,i){t.exports="addedtoscene"},function(t,i){t.exports="destroy"},function(t,i){t.exports="removedfromscene"},function(t,i){t.exports="complete"},function(t,i){t.exports="created"},function(t,i){t.exports="error"},function(t,i){t.exports="loop"},function(t,i){t.exports="play"},function(t,i){t.exports="seeked"},function(t,i){t.exports="seeking"},function(t,i){t.exports="stop"},function(t,i){t.exports="timeout"},function(t,i){t.exports="unlocked"},function(t,i){t.exports="addedtoscene"},function(t,i){t.exports="boot"},function(t,i){t.exports="create"},function(t,i){t.exports="destroy"},function(t,i){t.exports="pause"},function(t,i){t.exports="postupdate"},function(t,i){t.exports="prerender"},function(t,i){t.exports="preupdate"},function(t,i){t.exports="ready"},function(t,i){t.exports="removedfromscene"},function(t,i){t.exports="render"},function(t,i){t.exports="resume"},function(t,i){t.exports="shutdown"},function(t,i){t.exports="sleep"},function(t,i){t.exports="start"},function(t,i){t.exports="transitioncomplete"},function(t,i){t.exports="transitioninit"},function(t,i){t.exports="transitionout"},function(t,i){t.exports="transitionstart"},function(t,i){t.exports="transitionwake"},function(t,i){t.exports="update"},function(t,i){t.exports="wake"},function(t,i,n){var o=n(46);t.exports=function(t,i,n,a,u){return o(t,"alpha",i,n,a,u)}},function(t,i,n){var o=n(46);t.exports=function(t,i,n,a,u){return o(t,"x",i,n,a,u)}},function(t,i,n){var o=n(46);t.exports=function(t,i,n,a,u,d,f){return null==n&&(n=i),o(t,"x",i,a,d,f),o(t,"y",n,u,d,f)}},function(t,i,n){var o=n(46);t.exports=function(t,i,n,a,u){return o(t,"y",i,n,a,u)}},function(t,i){t.exports=function(t,i,n,o){void 0===n&&(n=0),void 0===o&&(o=6.28);for(var a=n,u=(o-n)/t.length,d=0;d<t.length;d++)t[d].x=i.x+i.radius*Math.cos(a),t[d].y=i.y+i.radius*Math.sin(a),a+=u;return t}},function(t,i){t.exports=function(t,i,n,o){void 0===n&&(n=0),void 0===o&&(o=6.28);for(var a=n,u=(o-n)/t.length,d=i.width/2,f=i.height/2,p=0;p<t.length;p++)t[p].x=i.x+d*Math.cos(a),t[p].y=i.y+f*Math.sin(a),a+=u;return t}},function(t,i,n){var o=n(172);t.exports=function(t,i){for(var n=o(i,t.length),a=0;a<t.length;a++){var u=t[a],d=n[a];u.x=d.x,u.y=d.y}return t}},function(t,i,n){var o=n(316),a=n(178),u=n(179);t.exports=function(t,i,n){void 0===n&&(n=0);var d=o(i,!1,t.length);n>0?a(d,n):n<0&&u(d,Math.abs(n));for(var f=0;f<t.length;f++)t[f].x=d[f].x,t[f].y=d[f].y;return t}},function(t,i,n){var o=n(317);t.exports=function(t,i,n){var a=o({x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},n),u=o({x1:i.x2,y1:i.y2,x2:i.x3,y2:i.y3},n),d=o({x1:i.x3,y1:i.y3,x2:i.x1,y2:i.y1},n);a.pop(),u.pop(),d.pop();for(var f=(a=a.concat(u,d)).length/t.length,p=0,b=0;b<t.length;b++){var S=t[b],M=a[Math.floor(p)];S.x=M.x,S.y=M.y,p+=f}return t}},function(t,i){t.exports=function(t,i,n){for(var o=0;o<t.length;o++){var a=t[o];a.anims&&a.anims.play(i,n)}return t}},function(t,i,n){var o=n(170);t.exports=function(t,i){for(var n=0;n<t.length;n++)o(i,t[n]);return t}},function(t,i,n){var o=n(180);t.exports=function(t,i){for(var n=0;n<t.length;n++)o(i,t[n]);return t}},function(t,i,n){var o=n(173);t.exports=function(t,i){for(var n=0;n<t.length;n++)o(i,t[n]);return t}},function(t,i,n){var o=n(174);t.exports=function(t,i){for(var n=0;n<t.length;n++)o(i,t[n]);return t}},function(t,i,n){var o=n(181);t.exports=function(t,i){for(var n=0;n<t.length;n++)o(i,t[n]);return t}},function(t,i,n){var o=n(46);t.exports=function(t,i,n,a,u){return o(t,"rotation",i,n,a,u)}},function(t,i,n){var o=n(182),a=n(50);t.exports=function(t,i,n){for(var u=i.x,d=i.y,f=0;f<t.length;f++){var p=t[f];o(p,u,d,n,Math.max(1,a(p.x,p.y,u,d)))}return t}},function(t,i,n){var o=n(182);t.exports=function(t,i,n,a){var u=i.x,d=i.y;if(0===a)return t;for(var f=0;f<t.length;f++)o(t[f],u,d,n,a);return t}},function(t,i,n){var o=n(46);t.exports=function(t,i,n,a,u){return o(t,"scaleX",i,n,a,u)}},function(t,i,n){var o=n(46);t.exports=function(t,i,n,a,u,d,f){return null==n&&(n=i),o(t,"scaleX",i,a,d,f),o(t,"scaleY",n,u,d,f)}},function(t,i,n){var o=n(46);t.exports=function(t,i,n,a,u){return o(t,"scaleY",i,n,a,u)}},function(t,i,n){var o=n(27);t.exports=function(t,i,n,a,u){return o(t,"alpha",i,n,a,u)}},function(t,i,n){var o=n(27);t.exports=function(t,i,n,a){return o(t,"blendMode",i,0,n,a)}},function(t,i,n){var o=n(27);t.exports=function(t,i,n,a,u){return o(t,"depth",i,n,a,u)}},function(t,i){t.exports=function(t,i,n){for(var o=0;o<t.length;o++)t[o].setInteractive(i,n);return t}},function(t,i,n){var o=n(27);t.exports=function(t,i,n,a,u,d,f){return null==n&&(n=i),o(t,"originX",i,a,d,f),o(t,"originY",n,u,d,f),t.forEach((function(t){t.updateDisplayOrigin()})),t}},function(t,i,n){var o=n(27);t.exports=function(t,i,n,a,u){return o(t,"rotation",i,n,a,u)}},function(t,i,n){var o=n(27);t.exports=function(t,i,n,a,u,d,f){return null==n&&(n=i),o(t,"scaleX",i,a,d,f),o(t,"scaleY",n,u,d,f)}},function(t,i,n){var o=n(27);t.exports=function(t,i,n,a,u){return o(t,"scaleX",i,n,a,u)}},function(t,i,n){var o=n(27);t.exports=function(t,i,n,a,u){return o(t,"scaleY",i,n,a,u)}},function(t,i,n){var o=n(27);t.exports=function(t,i,n,a,u,d,f){return null==n&&(n=i),o(t,"scrollFactorX",i,a,d,f),o(t,"scrollFactorY",n,u,d,f)}},function(t,i,n){var o=n(27);t.exports=function(t,i,n,a,u){return o(t,"scrollFactorX",i,n,a,u)}},function(t,i,n){var o=n(27);t.exports=function(t,i,n,a,u){return o(t,"scrollFactorY",i,n,a,u)}},function(t,i){t.exports=function(t,i,n,o,a){for(var u=0;u<t.length;u++)t[u].setTint(i,n,o,a);return t}},function(t,i,n){var o=n(27);t.exports=function(t,i,n,a){return o(t,"visible",i,0,n,a)}},function(t,i,n){var o=n(27);t.exports=function(t,i,n,a,u){return o(t,"x",i,n,a,u)}},function(t,i,n){var o=n(27);t.exports=function(t,i,n,a,u,d,f){return null==n&&(n=i),o(t,"x",i,a,d,f),o(t,"y",n,u,d,f)}},function(t,i,n){var o=n(27);t.exports=function(t,i,n,a,u){return o(t,"y",i,n,a,u)}},function(t,i,n){var o=n(3);t.exports=function(t,i,n,a,u){var d,f,p,b,S,M;if(void 0===a&&(a=0),void 0===u&&(u=new o),t.length>1)if(0===a){var C=t.length-1;for(d=t[C].x,f=t[C].y,p=C-1;p>=0;p--)b=(M=t[p]).x,S=M.y,M.x=d,M.y=f,d=b,f=S;t[C].x=i,t[C].y=n}else{for(d=t[0].x,f=t[0].y,p=1;p<t.length;p++)b=(M=t[p]).x,S=M.y,M.x=d,M.y=f,d=b,f=S;t[0].x=i,t[0].y=n}else d=t[0].x,f=t[0].y,t[0].x=i,t[0].y=n;return u.x=d,u.y=f,u}},function(t,i,n){var o=n(131);t.exports=function(t){return o(t)}},function(t,i,n){var o=n(183);t.exports=function(t,i,n,a,u){void 0===u&&(u=!1);var d,f=Math.abs(a-n)/t.length;if(u)for(d=0;d<t.length;d++)t[d][i]+=o(d*f,n,a);else for(d=0;d<t.length;d++)t[d][i]=o(d*f,n,a);return t}},function(t,i,n){var o=n(184);t.exports=function(t,i,n,a,u){void 0===u&&(u=!1);var d,f=Math.abs(a-n)/t.length;if(u)for(d=0;d<t.length;d++)t[d][i]+=o(d*f,n,a);else for(d=0;d<t.length;d++)t[d][i]=o(d*f,n,a);return t}},function(t,i){t.exports=function(t,i,n,o,a){void 0===a&&(a=!1);var u,d=Math.abs(o-n)/t.length;if(a)for(u=0;u<t.length;u++)t[u][i]+=u*d+n;else for(u=0;u<t.length;u++)t[u][i]=u*d+n;return t}},function(t,i){t.exports=function(t){for(var i=0;i<t.length;i++)t[i].visible=!t[i].visible;return t}},function(t,i,n){var o=n(68);t.exports=function(t,i,n){void 0===n&&(n=0);for(var a=0;a<t.length;a++){var u=t[a];u.x=o(u.x,i.left-n,i.right+n),u.y=o(u.y,i.top-n,i.bottom+n)}return t}},function(t,i,n){t.exports={Animation:n(185),AnimationFrame:n(319),AnimationManager:n(321),AnimationState:n(164),Events:n(132)}},function(t,i){t.exports="add"},function(t,i){t.exports="animationcomplete"},function(t,i){t.exports="animationcomplete-"},function(t,i){t.exports="animationrepeat"},function(t,i){t.exports="animationrestart"},function(t,i){t.exports="animationstart"},function(t,i){t.exports="animationstop"},function(t,i){t.exports="animationupdate"},function(t,i){t.exports="pauseall"},function(t,i){t.exports="remove"},function(t,i){t.exports="resumeall"},function(t,i,n){t.exports={BaseCache:n(323),CacheManager:n(325),Events:n(324)}},function(t,i){t.exports="add"},function(t,i){t.exports="remove"},function(t,i,n){t.exports={Controls:n(739),Scene2D:n(742)}},function(t,i,n){t.exports={FixedKeyControl:n(740),SmoothedKeyControl:n(741)}},function(t,i,n){var o=n(0),a=n(6),u=new o({initialize:function FixedKeyControl2(t){this.camera=a(t,"camera",null),this.left=a(t,"left",null),this.right=a(t,"right",null),this.up=a(t,"up",null),this.down=a(t,"down",null),this.zoomIn=a(t,"zoomIn",null),this.zoomOut=a(t,"zoomOut",null),this.zoomSpeed=a(t,"zoomSpeed",.01),this.minZoom=a(t,"minZoom",.001),this.maxZoom=a(t,"maxZoom",1e3),this.speedX=0,this.speedY=0;var i=a(t,"speed",null);"number"==typeof i?(this.speedX=i,this.speedY=i):(this.speedX=a(t,"speed.x",0),this.speedY=a(t,"speed.y",0)),this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(t){return this.camera=t,this},update:function(t){if(this.active){void 0===t&&(t=1);var i=this.camera;this.up&&this.up.isDown?i.scrollY-=this.speedY*t|0:this.down&&this.down.isDown&&(i.scrollY+=this.speedY*t|0),this.left&&this.left.isDown?i.scrollX-=this.speedX*t|0:this.right&&this.right.isDown&&(i.scrollX+=this.speedX*t|0),this.zoomIn&&this.zoomIn.isDown?(i.zoom-=this.zoomSpeed,i.zoom<this.minZoom&&(i.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(i.zoom+=this.zoomSpeed,i.zoom>this.maxZoom&&(i.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});t.exports=u},function(t,i,n){var o=n(0),a=n(6),u=new o({initialize:function SmoothedKeyControl2(t){this.camera=a(t,"camera",null),this.left=a(t,"left",null),this.right=a(t,"right",null),this.up=a(t,"up",null),this.down=a(t,"down",null),this.zoomIn=a(t,"zoomIn",null),this.zoomOut=a(t,"zoomOut",null),this.zoomSpeed=a(t,"zoomSpeed",.01),this.minZoom=a(t,"minZoom",.001),this.maxZoom=a(t,"maxZoom",1e3),this.accelX=0,this.accelY=0;var i=a(t,"acceleration",null);"number"==typeof i?(this.accelX=i,this.accelY=i):(this.accelX=a(t,"acceleration.x",0),this.accelY=a(t,"acceleration.y",0)),this.dragX=0,this.dragY=0;var n=a(t,"drag",null);"number"==typeof n?(this.dragX=n,this.dragY=n):(this.dragX=a(t,"drag.x",0),this.dragY=a(t,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var o=a(t,"maxSpeed",null);"number"==typeof o?(this.maxSpeedX=o,this.maxSpeedY=o):(this.maxSpeedX=a(t,"maxSpeed.x",0),this.maxSpeedY=a(t,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(t){return this.camera=t,this},update:function(t){if(this.active){void 0===t&&(t=1);var i=this.camera;this._speedX>0?(this._speedX-=this.dragX*t,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*t,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*t,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*t,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,0!==this._speedX&&(i.scrollX-=this._speedX*t|0),0!==this._speedY&&(i.scrollY-=this._speedY*t|0),0!==this._zoom&&(i.zoom+=this._zoom,i.zoom<this.minZoom?i.zoom=this.minZoom:i.zoom>this.maxZoom&&(i.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});t.exports=u},function(t,i,n){t.exports={Camera:n(326),BaseCamera:n(133),CameraManager:n(799),Effects:n(333),Events:n(37)}},function(t,i){t.exports="cameradestroy"},function(t,i){t.exports="camerafadeincomplete"},function(t,i){t.exports="camerafadeinstart"},function(t,i){t.exports="camerafadeoutcomplete"},function(t,i){t.exports="camerafadeoutstart"},function(t,i){t.exports="cameraflashcomplete"},function(t,i){t.exports="cameraflashstart"},function(t,i){t.exports="followupdate"},function(t,i){t.exports="camerapancomplete"},function(t,i){t.exports="camerapanstart"},function(t,i){t.exports="postrender"},function(t,i){t.exports="prerender"},function(t,i){t.exports="camerarotatecomplete"},function(t,i){t.exports="camerarotatestart"},function(t,i){t.exports="camerashakecomplete"},function(t,i){t.exports="camerashakestart"},function(t,i){t.exports="camerazoomcomplete"},function(t,i){t.exports="camerazoomstart"},function(t,i,n){var o=n(18),a=n(0),u=n(37),d=new a({initialize:function Fade2(t){this.camera=t,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,i,n,o,a,d,f,p){if(void 0===t&&(t=!0),void 0===i&&(i=1e3),void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===d&&(d=!1),void 0===f&&(f=null),void 0===p&&(p=this.camera.scene),!d&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=i,this.direction=t,this.progress=0,this.red=n,this.green=o,this.blue=a,this.alpha=t?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=f,this._onUpdateScope=p;var b=t?u.FADE_OUT_START:u.FADE_IN_START;return this.camera.emit(b,this.camera,this,i,n,o,a),this.camera},update:function(t,i){this.isRunning&&(this._elapsed+=i,this.progress=o(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(t){if(!this.isRunning&&!this.isComplete)return!1;var i=this.camera;return t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(i.x,i.y,i.width,i.height),!0},postRenderWebGL:function(t,i){if(!this.isRunning&&!this.isComplete)return!1;var n=this.camera,o=this.red/255,a=this.green/255,u=this.blue/255;return t.drawFillRect(n.x,n.y,n.width,n.height,i(u,a,o,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var t=this.direction?u.FADE_OUT_COMPLETE:u.FADE_IN_COMPLETE;this.camera.emit(t,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=d},function(t,i,n){var o=n(18),a=n(0),u=n(37),d=new a({initialize:function Flash2(t){this.camera=t,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,i,n,o,a,d,f){return void 0===t&&(t=250),void 0===i&&(i=255),void 0===n&&(n=255),void 0===o&&(o=255),void 0===a&&(a=!1),void 0===d&&(d=null),void 0===f&&(f=this.camera.scene),!a&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,this.red=i,this.green=n,this.blue=o,this.alpha=1,this._elapsed=0,this._onUpdate=d,this._onUpdateScope=f,this.camera.emit(u.FLASH_START,this.camera,this,t,i,n,o)),this.camera},update:function(t,i){this.isRunning&&(this._elapsed+=i,this.progress=o(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(t){if(!this.isRunning)return!1;var i=this.camera;return t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(i.x,i.y,i.width,i.height),!0},postRenderWebGL:function(t,i){if(!this.isRunning)return!1;var n=this.camera,o=this.red/255,a=this.green/255,u=this.blue/255;return t.drawFillRect(n.x,n.y,n.width,n.height,i(u,a,o,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=d},function(t,i,n){var o=n(18),a=n(0),u=n(134),d=n(37),f=n(3),p=new a({initialize:function Pan3(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=new f,this.current=new f,this.destination=new f,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,i,n,o,a,f,p){void 0===n&&(n=1e3),void 0===o&&(o=u.Linear),void 0===a&&(a=!1),void 0===f&&(f=null),void 0===p&&(p=this.camera.scene);var b=this.camera;return!a&&this.isRunning||(this.isRunning=!0,this.duration=n,this.progress=0,this.source.set(b.scrollX,b.scrollY),this.destination.set(t,i),b.getScroll(t,i,this.current),"string"==typeof o&&u.hasOwnProperty(o)?this.ease=u[o]:"function"==typeof o&&(this.ease=o),this._elapsed=0,this._onUpdate=f,this._onUpdateScope=p,this.camera.emit(d.PAN_START,this.camera,this,n,t,i)),b},update:function(t,i){if(this.isRunning){this._elapsed+=i;var n=o(this._elapsed/this.duration,0,1);this.progress=n;var a=this.camera;if(this._elapsed<this.duration){var u=this.ease(n);a.getScroll(this.destination.x,this.destination.y,this.current);var d=this.source.x+(this.current.x-this.source.x)*u,f=this.source.y+(this.current.y-this.source.y)*u;a.setScroll(d,f),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,a,n,d,f)}else a.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,a,n,a.scrollX,a.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(d.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});t.exports=p},function(t,i){t.exports=function(t,i){return void 0===i&&(i=1.70158),t*t*((i+1)*t-i)}},function(t,i){t.exports=function(t,i){return void 0===i&&(i=1.70158),--t*t*((i+1)*t+i)+1}},function(t,i){t.exports=function(t,i){void 0===i&&(i=1.70158);var n=1.525*i;return(t*=2)<1?t*t*((n+1)*t-n)*.5:.5*((t-=2)*t*((n+1)*t+n)+2)}},function(t,i){t.exports=function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}},function(t,i){t.exports=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},function(t,i){t.exports=function(t){var i=!1;return t<.5?(t=1-2*t,i=!0):t=2*t-1,t<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,i?.5*(1-t):.5*t+.5}},function(t,i){t.exports=function(t){return 1-Math.sqrt(1-t*t)}},function(t,i){t.exports=function(t){return Math.sqrt(1- --t*t)}},function(t,i){t.exports=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},function(t,i){t.exports=function(t){return t*t*t}},function(t,i){t.exports=function(t){return--t*t*t+1}},function(t,i){t.exports=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},function(t,i){t.exports=function(t,i,n){if(void 0===i&&(i=.1),void 0===n&&(n=.1),0===t)return 0;if(1===t)return 1;var o=n/4;return i<1?i=1:o=n*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(t-=1))*Math.sin((t-o)*(2*Math.PI)/n)}},function(t,i){t.exports=function(t,i,n){if(void 0===i&&(i=.1),void 0===n&&(n=.1),0===t)return 0;if(1===t)return 1;var o=n/4;return i<1?i=1:o=n*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin((t-o)*(2*Math.PI)/n)+1}},function(t,i){t.exports=function(t,i,n){if(void 0===i&&(i=.1),void 0===n&&(n=.1),0===t)return 0;if(1===t)return 1;var o=n/4;return i<1?i=1:o=n*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?i*Math.pow(2,10*(t-=1))*Math.sin((t-o)*(2*Math.PI)/n)*-.5:i*Math.pow(2,-10*(t-=1))*Math.sin((t-o)*(2*Math.PI)/n)*.5+1}},function(t,i){t.exports=function(t){return Math.pow(2,10*(t-1))-.001}},function(t,i){t.exports=function(t){return 1-Math.pow(2,-10*t)}},function(t,i){t.exports=function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}},function(t,i){t.exports=function(t){return t}},function(t,i){t.exports=function(t){return t*t}},function(t,i){t.exports=function(t){return t*(2-t)}},function(t,i){t.exports=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},function(t,i){t.exports=function(t){return t*t*t*t}},function(t,i){t.exports=function(t){return 1- --t*t*t*t}},function(t,i){t.exports=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},function(t,i){t.exports=function(t){return t*t*t*t*t}},function(t,i){t.exports=function(t){return--t*t*t*t*t+1}},function(t,i){t.exports=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},function(t,i){t.exports=function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)}},function(t,i){t.exports=function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)}},function(t,i){t.exports=function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))}},function(t,i){t.exports=function(t,i){return void 0===i&&(i=1),t<=0?0:t>=1?1:1/i*(1+(i*t|0))}},function(t,i,n){var o=n(18),a=n(0),u=n(37),d=n(3),f=new a({initialize:function Shake2(t){this.camera=t,this.isRunning=!1,this.duration=0,this.intensity=new d,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(t,i,n,o,a){return void 0===t&&(t=100),void 0===i&&(i=.05),void 0===n&&(n=!1),void 0===o&&(o=null),void 0===a&&(a=this.camera.scene),!n&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,"number"==typeof i?this.intensity.set(i):this.intensity.set(i.x,i.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=o,this._onUpdateScope=a,this.camera.emit(u.SHAKE_START,this.camera,this,t,i)),this.camera},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(t,i){if(this.isRunning)if(this._elapsed+=i,this.progress=o(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var n=this.intensity,a=this.camera.width,u=this.camera.height,d=this.camera.zoom;this._offsetX=(Math.random()*n.x*a*2-n.x*a)*d,this._offsetY=(Math.random()*n.y*u*2-n.y*u)*d,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});t.exports=f},function(t,i,n){var o=n(18),a=n(0),u=n(37),d=n(134),f=new a({initialize:function RotateTo3(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(t,i,n,o,a,f,p){void 0===n&&(n=1e3),void 0===o&&(o=d.Linear),void 0===a&&(a=!1),void 0===f&&(f=null),void 0===p&&(p=this.camera.scene),void 0===i&&(i=!1),this.shortestPath=i;var b=t;t<0?(b=-1*t,this.clockwise=!1):this.clockwise=!0;var S=360*Math.PI/180;b-=Math.floor(b/S)*S;var M=this.camera;if(!a&&this.isRunning)return M;if(this.isRunning=!0,this.duration=n,this.progress=0,this.source=M.rotation,this.destination=b,"string"==typeof o&&d.hasOwnProperty(o)?this.ease=d[o]:"function"==typeof o&&(this.ease=o),this._elapsed=0,this._onUpdate=f,this._onUpdateScope=p,this.shortestPath){var C=0,P=0;(C=this.destination>this.source?Math.abs(this.destination-this.source):Math.abs(this.destination+S)-this.source)<(P=this.source>this.destination?Math.abs(this.source-this.destination):Math.abs(this.source+S)-this.destination)?this.clockwise=!0:C>P&&(this.clockwise=!1)}return this.camera.emit(u.ROTATE_START,this.camera,this,n,b),M},update:function(t,i){if(this.isRunning){this._elapsed+=i;var n=o(this._elapsed/this.duration,0,1);this.progress=n;var a=this.camera;if(this._elapsed<this.duration){var u=this.ease(n);this.current=a.rotation;var d=0,f=360*Math.PI/180,p=this.destination,b=this.current;!1===this.clockwise&&(p=this.current,b=this.destination),d=p>=b?Math.abs(p-b):Math.abs(p+f)-b;var S=0;S=this.clockwise?a.rotation+d*u:a.rotation-d*u,a.rotation=S,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,a,n,S)}else a.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,a,n,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(u.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});t.exports=f},function(t,i,n){var o=n(18),a=n(0),u=n(134),d=n(37),f=new a({initialize:function Zoom2(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,i,n,o,a,f){void 0===i&&(i=1e3),void 0===n&&(n=u.Linear),void 0===o&&(o=!1),void 0===a&&(a=null),void 0===f&&(f=this.camera.scene);var p=this.camera;return!o&&this.isRunning||(this.isRunning=!0,this.duration=i,this.progress=0,this.source=p.zoom,this.destination=t,"string"==typeof n&&u.hasOwnProperty(n)?this.ease=u[n]:"function"==typeof n&&(this.ease=n),this._elapsed=0,this._onUpdate=a,this._onUpdateScope=f,this.camera.emit(d.ZOOM_START,this.camera,this,i,t)),p},update:function(t,i){this.isRunning&&(this._elapsed+=i,this.progress=o(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(d.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=f},function(t,i,n){var o=n(326),a=n(0),u=n(2),d=n(24),f=n(57),p=n(104),b=n(20),S=new a({initialize:function CameraManager2(t){this.scene=t,this.systems=t.sys,this.roundPixels=t.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,t.sys.events.once(b.BOOT,this.boot,this),t.sys.events.on(b.START,this.start,this)},boot:function(){var t=this.systems;t.settings.cameras?this.fromJSON(t.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new o(0,0,t.scale.width,t.scale.height).setScene(this.scene),t.game.scale.on(p.RESIZE,this.onResize,this),this.systems.events.once(b.DESTROY,this.destroy,this)},start:function(){if(!this.main){var t=this.systems;t.settings.cameras?this.fromJSON(t.settings.cameras):this.add(),this.main=this.cameras[0]}var i=this.systems.events;i.on(b.UPDATE,this.update,this),i.once(b.SHUTDOWN,this.shutdown,this)},add:function(t,i,n,a,u,d){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=this.scene.sys.scale.width),void 0===a&&(a=this.scene.sys.scale.height),void 0===u&&(u=!1),void 0===d&&(d="");var f=new o(t,i,n,a);return f.setName(d),f.setScene(this.scene),f.setRoundPixels(this.roundPixels),f.id=this.getNextID(),this.cameras.push(f),u&&(this.main=f),f},addExisting:function(t,i){return void 0===i&&(i=!1),-1===this.cameras.indexOf(t)?(t.id=this.getNextID(),t.setRoundPixels(this.roundPixels),this.cameras.push(t),i&&(this.main=t),t):null},getNextID:function(){for(var t=this.cameras,i=1,n=0;n<32;n++){for(var o=!1,a=0;a<t.length;a++){var u=t[a];u&&u.id===i&&(o=!0)}if(!o)return i;i<<=1}return 0},getTotal:function(t){void 0===t&&(t=!1);for(var i=0,n=this.cameras,o=0;o<n.length;o++){var a=n[o];(!t||t&&a.visible)&&i++}return i},fromJSON:function(t){Array.isArray(t)||(t=[t]);for(var i=this.scene.sys.scale.width,n=this.scene.sys.scale.height,o=0;o<t.length;o++){var a=t[o],d=u(a,"x",0),f=u(a,"y",0),p=u(a,"width",i),b=u(a,"height",n),S=this.add(d,f,p,b);S.name=u(a,"name",""),S.zoom=u(a,"zoom",1),S.rotation=u(a,"rotation",0),S.scrollX=u(a,"scrollX",0),S.scrollY=u(a,"scrollY",0),S.roundPixels=u(a,"roundPixels",!1),S.visible=u(a,"visible",!0);var M=u(a,"backgroundColor",!1);M&&S.setBackgroundColor(M);var C=u(a,"bounds",null);if(C){var P=u(C,"x",0),R=u(C,"y",0),O=u(C,"width",i),B=u(C,"height",n);S.setBounds(P,R,O,B)}}return this},getCamera:function(t){for(var i=this.cameras,n=0;n<i.length;n++)if(i[n].name===t)return i[n];return null},getCamerasBelowPointer:function(t){for(var i=this.cameras,n=t.x,o=t.y,a=[],u=0;u<i.length;u++){var d=i[u];d.visible&&d.inputEnabled&&f(d,n,o)&&a.unshift(d)}return a},remove:function(t,i){void 0===i&&(i=!0),Array.isArray(t)||(t=[t]);for(var n=0,o=this.cameras,a=0;a<t.length;a++){var u=o.indexOf(t[a]);-1!==u&&(i?o[u].destroy():o[u].renderList=[],o.splice(u,1),n++)}return!this.main&&o[0]&&(this.main=o[0]),n},render:function(t,i){for(var n=this.scene,o=this.cameras,a=0;a<this.cameras.length;a++){var u=o[a];if(u.visible&&u.alpha>0){u.preRender();var d=this.getVisibleChildren(i.getChildren(),u);t.render(n,d,u)}}},getVisibleChildren:function(t,i){for(var n=[],o=0;o<t.length;o++){var a=t[o];a.willRender(i)&&n.push(a)}return n},resetAll:function(){for(var t=0;t<this.cameras.length;t++)this.cameras[t].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(t,i){for(var n=0;n<this.cameras.length;n++)this.cameras[n].update(t,i)},onResize:function(t,i,n,o,a){for(var u=0;u<this.cameras.length;u++){var d=this.cameras[u];0===d._x&&0===d._y&&d._width===o&&d._height===a&&d.setSize(i.width,i.height)}},resize:function(t,i){for(var n=0;n<this.cameras.length;n++)this.cameras[n].setSize(t,i)},shutdown:function(){this.main=void 0;for(var t=0;t<this.cameras.length;t++)this.cameras[t].destroy();this.cameras=[];var i=this.systems.events;i.off(b.UPDATE,this.update,this),i.off(b.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(b.START,this.start,this),this.scene=null,this.systems=null}});d.register("CameraManager",S,"cameras"),t.exports=S},function(t,i){t.exports="enterfullscreen"},function(t,i){t.exports="fullscreenfailed"},function(t,i){t.exports="fullscreenunsupported"},function(t,i){t.exports="leavefullscreen"},function(t,i){t.exports="orientationchange"},function(t,i){t.exports="resize"},function(t,i,n){t.exports={Config:n(346),CreateRenderer:n(366),DebugHeader:n(384),Events:n(22),TimeStep:n(385),VisibilityHandler:n(387)}},function(t,i){var n,o,a=t.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(t){if(n===setTimeout)return setTimeout(t,0);if((n===defaultSetTimout||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(i){try{return n.call(null,t,0)}catch(o){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(t){n=defaultSetTimout}try{o="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(t){o=defaultClearTimeout}}();var u,d=[],f=!1,p=-1;function cleanUpNextTick(){f&&u&&(f=!1,u.length?d=u.concat(d):p=-1,d.length&&drainQueue())}function drainQueue(){if(!f){var t=runTimeout(cleanUpNextTick);f=!0;for(var i=d.length;i;){for(u=d,d=[];++p<i;)u&&u[p].run();p=-1,i=d.length}u=null,f=!1,function runClearTimeout(t){if(o===clearTimeout)return clearTimeout(t);if((o===defaultClearTimeout||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{return o(t)}catch(i){try{return o.call(null,t)}catch(n){return o.call(this,t)}}}(t)}}function Item(t,i){this.fun=t,this.array=i}function noop(){}a.nextTick=function(t){var i=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)i[n-1]=arguments[n];d.push(new Item(t,i)),1!==d.length||f||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=noop,a.addListener=noop,a.once=noop,a.off=noop,a.removeListener=noop,a.removeAllListeners=noop,a.emit=noop,a.prependListener=noop,a.prependOnceListener=noop,a.listeners=function(t){return[]},a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,i,n){var o=n(136),a={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};t.exports=function init(){return"function"==typeof importScripts||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(a.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(a.mspointer=!0),navigator.getGamepads&&(a.gamepads=!0),"onwheel"in window||o.ie&&"WheelEvent"in window?a.wheelEvent="wheel":"onmousewheel"in window?a.wheelEvent="mousewheel":o.firefox&&"MouseScrollEvent"in window&&(a.wheelEvent="DOMMouseScroll")),a}()},function(t,i,n){var o=n(136),a={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};t.exports=function init(){if("function"==typeof importScripts)return a;a.audioData=!!window.Audio,a.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var t=document.createElement("audio"),i=!!t.canPlayType;try{if(i&&(t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(a.ogg=!0),(t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||t.canPlayType("audio/opus;").replace(/^no$/,""))&&(a.opus=!0),t.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(a.mp3=!0),t.canPlayType("audio/wav").replace(/^no$/,"")&&(a.wav=!0),(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;").replace(/^no$/,""))&&(a.m4a=!0),t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(a.webm=!0),""!==t.canPlayType('audio/mp4;codecs="ec-3"')))if(o.edge)a.dolby=!0;else if(o.safari&&o.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var n=parseInt(RegExp.$1,10),u=parseInt(RegExp.$2,10);(10===n&&u>=11||n>10)&&(a.dolby=!0)}}catch(d){}return a}()},function(t,i){var n={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};t.exports=function init(){if("function"==typeof importScripts)return n;var t=document.createElement("video"),i=!!t.canPlayType;try{i&&(t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(n.ogg=!0),t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(n.h264=!0,n.mp4=!0),t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(n.webm=!0),t.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(n.vp9=!0),t.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(n.hls=!0))}catch(o){}return n}()},function(t,i){var n={available:!1,cancel:"",keyboard:!1,request:""};t.exports=function init(){if("function"==typeof importScripts)return n;var t,i="Fullscreen",o="FullScreen",a=["request"+i,"request"+o,"webkitRequest"+i,"webkitRequest"+o,"msRequest"+i,"msRequest"+o,"mozRequest"+o,"mozRequest"+i];for(t=0;t<a.length;t++)if(document.documentElement[a[t]]){n.available=!0,n.request=a[t];break}var u=["cancel"+o,"exit"+i,"webkitCancel"+o,"webkitExit"+i,"msCancel"+o,"msExit"+i,"mozCancel"+o,"mozExit"+i];if(n.available)for(t=0;t<u.length;t++)if(document[u[t]]){n.cancel=u[t];break}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(n.keyboard=!0),Object.defineProperty(n,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),n}()},function(t,i,n){t.exports={Between:n(349),BetweenPoints:n(350),BetweenPointsY:n(813),BetweenY:n(814),CounterClockwise:n(815),Normalize:n(351),Random:n(816),RandomDegrees:n(817),Reverse:n(818),RotateTo:n(819),ShortestBetween:n(820),Wrap:n(269),WrapDegrees:n(270)}},function(t,i){t.exports=function(t,i){return Math.atan2(i.x-t.x,i.y-t.y)}},function(t,i){t.exports=function(t,i,n,o){return Math.atan2(n-t,o-i)}},function(t,i,n){var o=n(14);t.exports=function(t){return t>Math.PI&&(t-=o.PI2),Math.abs(((t+o.TAU)%o.PI2-o.PI2)%o.PI2)}},function(t,i,n){var o=n(137);t.exports=function(){return o(-Math.PI,Math.PI)}},function(t,i,n){var o=n(137);t.exports=function(){return o(-180,180)}},function(t,i,n){var o=n(351);t.exports=function(t){return o(t+Math.PI)}},function(t,i,n){var o=n(14);t.exports=function(t,i,n){return void 0===n&&(n=.05),t===i||(Math.abs(i-t)<=n||Math.abs(i-t)>=o.PI2-n?t=i:(Math.abs(i-t)>Math.PI&&(i<t?i+=o.PI2:i-=o.PI2),i>t?t+=n:i<t&&(t-=n))),t}},function(t,i){t.exports=function(t,i){var n=i-t;return 0===n?0:n-360*Math.floor((n- -180)/360)}},function(t,i,n){t.exports={Between:n(50),BetweenPoints:n(352),BetweenPointsSquared:n(822),Chebyshev:n(823),Power:n(824),Snake:n(825),Squared:n(353)}},function(t,i){t.exports=function(t,i){var n=t.x-i.x,o=t.y-i.y;return n*n+o*o}},function(t,i){t.exports=function(t,i,n,o){return Math.max(Math.abs(t-n),Math.abs(i-o))}},function(t,i){t.exports=function(t,i,n,o,a){return void 0===a&&(a=2),Math.sqrt(Math.pow(n-t,a)+Math.pow(o-i,a))}},function(t,i){t.exports=function(t,i,n,o){return Math.abs(t-n)+Math.abs(i-o)}},function(t,i,n){t.exports={Back:n(334),Bounce:n(335),Circular:n(336),Cubic:n(337),Elastic:n(338),Expo:n(339),Linear:n(340),Quadratic:n(341),Quartic:n(342),Quintic:n(343),Sine:n(344),Stepped:n(345)}},function(t,i,n){t.exports={Ceil:n(828),Equal:n(124),Floor:n(829),GreaterThan:n(354),LessThan:n(355)}},function(t,i){t.exports=function(t,i){return void 0===i&&(i=1e-4),Math.ceil(t-i)}},function(t,i){t.exports=function(t,i){return void 0===i&&(i=1e-4),Math.floor(t+i)}},function(t,i,n){t.exports={Bezier:n(831),CatmullRom:n(832),CubicBezier:n(358),Linear:n(833),QuadraticBezier:n(359),SmoothStep:n(360),SmootherStep:n(834)}},function(t,i,n){var o=n(356);t.exports=function(t,i){for(var n=0,a=t.length-1,u=0;u<=a;u++)n+=Math.pow(1-i,a-u)*Math.pow(i,u)*t[u]*o(a,u);return n}},function(t,i,n){var o=n(194);t.exports=function(t,i){var n=t.length-1,a=n*i,u=Math.floor(a);return t[0]===t[n]?(i<0&&(u=Math.floor(a=n*(1+i))),o(a-u,t[(u-1+n)%n],t[u],t[(u+1)%n],t[(u+2)%n])):i<0?t[0]-(o(-a,t[0],t[0],t[1],t[1])-t[0]):i>1?t[n]-(o(a-n,t[n],t[n],t[n-1],t[n-1])-t[n]):o(a-u,t[u?u-1:0],t[u],t[n<u+1?n:u+1],t[n<u+2?n:u+2])}},function(t,i,n){var o=n(135);t.exports=function(t,i){var n=t.length-1,a=n*i,u=Math.floor(a);return i<0?o(t[0],t[1],a):i>1?o(t[n],t[n-1],n-a):o(t[u],t[u+1>n?n:u+1],a-u)}},function(t,i,n){var o=n(183);t.exports=function(t,i,n){return i+(n-i)*o(t,0,1)}},function(t,i,n){t.exports={GetNext:n(361),IsSize:n(138),IsValue:n(836)}},function(t,i){t.exports=function(t){return t>0&&0==(t&t-1)}},function(t,i,n){t.exports={Ceil:n(139),Floor:n(76),To:n(838)}},function(t,i){t.exports=function(t,i,n,o){return void 0===n&&(n=0),0===i?t:(t-=n,t=i*Math.round(t/i),o?(n+t)/i:n+t)}},function(t,i,n){var o=new(n(0))({initialize:function RandomDataGenerator2(t){void 0===t&&(t=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],t&&this.init(t)},rnd:function(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},hash:function(t){var i,n=this.n;t=t.toString();for(var o=0;o<t.length;o++)i=.02519603282416938*(n+=t.charCodeAt(o)),i-=n=i>>>0,n=(i*=n)>>>0,n+=4294967296*(i-=n);return this.n=n,2.3283064365386963e-10*(n>>>0)},init:function(t){"string"==typeof t?this.state(t):this.sow(t)},sow:function(t){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,t)for(var i=0;i<t.length&&null!=t[i];i++){var n=t[i];this.s0-=this.hash(n),this.s0+=~~(this.s0<0),this.s1-=this.hash(n),this.s1+=~~(this.s1<0),this.s2-=this.hash(n),this.s2+=~~(this.s2<0)}},integer:function(){return 4294967296*this.rnd()},frac:function(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(t,i){return Math.floor(this.realInRange(0,i-t+1)+t)},between:function(t,i){return Math.floor(this.realInRange(0,i-t+1)+t)},realInRange:function(t,i){return this.frac()*(i-t)+t},normal:function(){return 1-2*this.frac()},uuid:function(){var t="",i="";for(i=t="";t++<36;i+=~t%5|3*t&4?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return i},pick:function(t){return t[this.integerInRange(0,t.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(t){return t[~~(Math.pow(this.frac(),2)*(t.length-1)+.5)]},timestamp:function(t,i){return this.realInRange(t||9466848e5,i||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(t){return"string"==typeof t&&t.match(/^!rnd/)&&(t=t.split(","),this.c=parseFloat(t[1]),this.s0=parseFloat(t[2]),this.s1=parseFloat(t[3]),this.s2=parseFloat(t[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(t){for(var i=t.length-1;i>0;i--){var n=Math.floor(this.frac()*(i+1)),o=t[n];t[n]=t[i],t[i]=o}return t}});t.exports=o},function(t,i){t.exports=function(t){for(var i=0,n=0;n<t.length;n++)i+=+t[n];return i/t.length}},function(t,i){t.exports=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=10);var o=Math.pow(n,-i);return Math.ceil(t*o)/o}},function(t,i){t.exports=function(t,i){return Math.abs(t-i)}},function(t,i,n){var o=n(18),a=n(0),u=n(69),d=n(1),f=new u,p=new a({initialize:function Euler2(t,i,n,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=Euler2.DefaultOrder),this._x=t,this._y=i,this._z=n,this._order=o,this.onChangeCallback=d},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback(this)}},set:function(t,i,n,o){return void 0===o&&(o=this._order),this._x=t,this._y=i,this._z=n,this._order=o,this.onChangeCallback(this),this},copy:function(t){return this.set(t.x,t.y,t.z,t.order)},setFromQuaternion:function(t,i,n){return void 0===i&&(i=this._order),void 0===n&&(n=!1),f.fromQuat(t),this.setFromRotationMatrix(f,i,n)},setFromRotationMatrix:function(t,i,n){void 0===i&&(i=this._order),void 0===n&&(n=!1);var a=t.val,u=a[0],d=a[4],f=a[8],p=a[1],b=a[5],S=a[9],M=a[2],C=a[6],P=a[10],R=0,O=0,B=0,N=.99999;switch(i){case"XYZ":O=Math.asin(o(f,-1,1)),Math.abs(f)<N?(R=Math.atan2(-S,P),B=Math.atan2(-d,u)):R=Math.atan2(C,b);break;case"YXZ":R=Math.asin(-o(S,-1,1)),Math.abs(S)<N?(O=Math.atan2(f,P),B=Math.atan2(p,b)):O=Math.atan2(-M,u);break;case"ZXY":R=Math.asin(o(C,-1,1)),Math.abs(C)<N?(O=Math.atan2(-M,P),B=Math.atan2(-d,b)):B=Math.atan2(p,u);break;case"ZYX":O=Math.asin(-o(M,-1,1)),Math.abs(M)<N?(R=Math.atan2(C,P),B=Math.atan2(p,u)):B=Math.atan2(-d,b);break;case"YZX":B=Math.asin(o(p,-1,1)),Math.abs(p)<N?(R=Math.atan2(-S,b),O=Math.atan2(-M,u)):O=Math.atan2(f,P);break;case"XZY":B=Math.asin(-o(d,-1,1)),Math.abs(d)<N?(R=Math.atan2(C,b),O=Math.atan2(f,u)):R=Math.atan2(-S,P)}return this._x=R,this._y=O,this._z=B,this._order=i,n&&this.onChangeCallback(this),this}});p.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],p.DefaultOrder="XYZ",t.exports=p},function(t,i){t.exports=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=10);var o=Math.pow(n,-i);return Math.floor(t*o)/o}},function(t,i){t.exports=function(t,i){return t/i/1e3}},function(t,i){t.exports=function(t){return t==parseFloat(t)?!(t%2):void 0}},function(t,i){t.exports=function(t){return t===parseFloat(t)?!(t%2):void 0}},function(t,i){t.exports=function(t,i,n){return Math.min(t+i,n)}},function(t,i){t.exports=function(t){var i=t.length;if(0===i)return 0;t.sort((function(t,i){return t-i}));var n=Math.floor(i/2);return i%2==0?(t[n]+t[n-1])/2:t[n]}},function(t,i){t.exports=function(t,i,n){return Math.max(t-i,n)}},function(t,i){t.exports=function(t,i,n,o){void 0===n&&(n=i+1);var a=(t-i)/(n-i);return a>1?void 0!==o?(a=(o-t)/(o-n))<0&&(a=0):a=1:a<0&&(a=0),a}},function(t,i){t.exports=function(t,i){void 0===i&&(i=1);var n=2*Math.random()*Math.PI;return t.x=Math.cos(n)*i,t.y=Math.sin(n)*i,t}},function(t,i){t.exports=function(t,i){void 0===i&&(i=1);var n=2*Math.random()*Math.PI,o=2*Math.random()-1,a=Math.sqrt(1-o*o)*i;return t.x=Math.cos(n)*a,t.y=Math.sin(n)*a,t.z=o*i,t}},function(t,i){t.exports=function(t,i){return void 0===i&&(i=1),t.x=(2*Math.random()-1)*i,t.y=(2*Math.random()-1)*i,t.z=(2*Math.random()-1)*i,t.w=(2*Math.random()-1)*i,t}},function(t,i){t.exports=function(t,i,n,o,a){return t.x=i+a*Math.cos(o),t.y=n+a*Math.sin(o),t}},function(t,i){t.exports=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=10);var o=Math.pow(n,-i);return Math.round(t*o)/o}},function(t,i){t.exports=function(t,i,n,o){void 0===i&&(i=1),void 0===n&&(n=1),void 0===o&&(o=1),o*=Math.PI/t;for(var a=[],u=[],d=0;d<t;d++)i+=(n-=i*o)*o,a[d]=n,u[d]=i;return{sin:u,cos:a,length:t}}},function(t,i,n){var o=n(3);t.exports=function(t,i,n,a){void 0===a&&(a=new o);var u=0,d=0;return t>0&&t<=i*n&&(u=t>i-1?t-(d=Math.floor(t/i))*i:t),a.set(u,d)}},function(t,i){t.exports=function(t,i,n){return Math.abs(t-i)<=n}},function(t,i,n){var o=n(39),a=n(69),u=n(365),d=new a,f=new u,p=new o;t.exports=function(t,i,n){return f.setAxisAngle(i,n),d.fromRotationTranslation(f,p.set(0,0,0)),t.transformMat4(d)}},function(t,i){t.exports="addtexture"},function(t,i){t.exports="onerror"},function(t,i){t.exports="onload"},function(t,i){t.exports="ready"},function(t,i){t.exports="removetexture"},function(t,i){t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join("\n")},function(t,i){t.exports="pipelineafterflush"},function(t,i){t.exports="pipelinebeforeflush"},function(t,i){t.exports="pipelinebind"},function(t,i){t.exports="pipelineboot"},function(t,i){t.exports="pipelinedestroy"},function(t,i){t.exports="pipelinerebind"},function(t,i){t.exports="pipelineresize"},function(t,i){t.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join("\n")},function(t,i,n){t.exports={GenerateTexture:n(388),Palettes:n(889)}},function(t,i,n){t.exports={ARNE16:n(389),C64:n(890),CGA:n(891),JMP:n(892),MSX:n(893)}},function(t,i){t.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(t,i){t.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(t,i){t.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(t,i){t.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(t,i,n){t.exports={Path:n(895),MoveTo:n(393),CubicBezier:n(390),Curve:n(94),Ellipse:n(391),Line:n(392),QuadraticBezier:n(394),Spline:n(395)}},function(t,i,n){var o=n(0),a=n(390),u=n(391),d=n(5),f=n(392),p=n(393),b=n(394),S=n(10),M=n(395),C=n(3),P=n(14),R=new o({initialize:function Path2(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new C,this._tmpVec2A=new C,this._tmpVec2B=new C,"object"==typeof t?this.fromJSON(t):this.startPoint.set(t,i)},add:function(t){return this.curves.push(t),this},circleTo:function(t,i,n){return void 0===i&&(i=!1),this.ellipseTo(t,t,0,360,i,n)},closePath:function(){var t=this.curves[0].getPoint(0),i=this.curves[this.curves.length-1].getPoint(1);return t.equals(i)||this.curves.push(new f(i,t)),this},cubicBezierTo:function(t,i,n,o,u,d){var f,p,b,S=this.getEndPoint();return t instanceof C?(f=t,p=i,b=n):(f=new C(n,o),p=new C(u,d),b=new C(t,i)),this.add(new a(S,f,p,b))},quadraticBezierTo:function(t,i,n,o){var a,u,d=this.getEndPoint();return t instanceof C?(a=t,u=i):(a=new C(n,o),u=new C(t,i)),this.add(new b(d,a,u))},draw:function(t,i){for(var n=0;n<this.curves.length;n++){var o=this.curves[n];o.active&&o.draw(t,i)}return t},ellipseTo:function(t,i,n,o,a,d){var f=new u(0,0,t,i,n,o,a,d),p=this.getEndPoint(this._tmpVec2A),b=f.getStartPoint(this._tmpVec2B);return p.subtract(b),f.x=p.x,f.y=p.y,this.add(f)},fromJSON:function(t){this.curves=[],this.cacheLengths=[],this.startPoint.set(t.x,t.y),this.autoClose=t.autoClose;for(var i=0;i<t.curves.length;i++){var n=t.curves[i];switch(n.type){case"LineCurve":this.add(f.fromJSON(n));break;case"EllipseCurve":this.add(u.fromJSON(n));break;case"SplineCurve":this.add(M.fromJSON(n));break;case"CubicBezierCurve":this.add(a.fromJSON(n));break;case"QuadraticBezierCurve":this.add(b.fromJSON(n))}}return this},getBounds:function(t,i){void 0===t&&(t=new S),void 0===i&&(i=16),t.x=Number.MAX_VALUE,t.y=Number.MAX_VALUE;for(var n=new S,o=P.MIN_SAFE_INTEGER,a=P.MIN_SAFE_INTEGER,u=0;u<this.curves.length;u++){var d=this.curves[u];d.active&&(d.getBounds(n,i),t.x=Math.min(t.x,n.x),t.y=Math.min(t.y,n.y),o=Math.max(o,n.right),a=Math.max(a,n.bottom))}return t.right=o,t.bottom=a,t},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],i=0,n=0;n<this.curves.length;n++)i+=this.curves[n].getLength(),t.push(i);return this.cacheLengths=t,t},getEndPoint:function(t){return void 0===t&&(t=new C),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,t):t.copy(this.startPoint),t},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},getPoint:function(t,i){void 0===i&&(i=new C);for(var n=t*this.getLength(),o=this.getCurveLengths(),a=0;a<o.length;){if(o[a]>=n){var u=o[a]-n,d=this.curves[a],f=d.getLength(),p=0===f?0:1-u/f;return d.getPointAt(p,i)}a++}return null},getPoints:function(t){void 0===t&&(t=12);for(var i,n=[],o=0;o<this.curves.length;o++){var a=this.curves[o];if(a.active)for(var u=a.getResolution(t),d=a.getPoints(u),f=0;f<d.length;f++){var p=d[f];i&&i.equals(p)||(n.push(p),i=p)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},getRandomPoint:function(t){return void 0===t&&(t=new C),this.getPoint(Math.random(),t)},getSpacedPoints:function(t){void 0===t&&(t=40);for(var i=[],n=0;n<=t;n++)i.push(this.getPoint(n/t));return this.autoClose&&i.push(i[0]),i},getStartPoint:function(t){return void 0===t&&(t=new C),t.copy(this.startPoint)},getTangent:function(t,i){void 0===i&&(i=new C);for(var n=t*this.getLength(),o=this.getCurveLengths(),a=0;a<o.length;){if(o[a]>=n){var u=o[a]-n,d=this.curves[a],f=d.getLength(),p=0===f?0:1-u/f;return d.getTangentAt(p,i)}a++}return null},lineTo:function(t,i){t instanceof C?this._tmpVec2B.copy(t):this._tmpVec2B.set(t,i);var n=this.getEndPoint(this._tmpVec2A);return this.add(new f([n.x,n.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(t){return t.unshift(this.getEndPoint()),this.add(new M(t))},moveTo:function(t,i){return t instanceof C?this.add(new p(t.x,t.y)):this.add(new p(t,i))},toJSON:function(){for(var t=[],i=0;i<this.curves.length;i++)t.push(this.curves[i].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:t}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});d.register("path",(function(t,i){return new R(t,i)})),t.exports=R},function(t,i,n){t.exports={DataManager:n(101),DataManagerPlugin:n(897),Events:n(315)}},function(t,i,n){var o=n(0),a=n(101),u=n(24),d=n(20),f=new o({Extends:a,initialize:function DataManagerPlugin2(t){a.call(this,t,t.sys.events),this.scene=t,this.systems=t.sys,t.sys.events.once(d.BOOT,this.boot,this),t.sys.events.on(d.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(d.DESTROY,this.destroy,this)},start:function(){this.events.once(d.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(d.SHUTDOWN,this.shutdown,this)},destroy:function(){a.prototype.destroy.call(this),this.events.off(d.START,this.start,this),this.scene=null,this.systems=null}});u.register("DataManagerPlugin",f,"data"),t.exports=f},function(t,i,n){t.exports={Align:n(899),BaseShader:n(396),Bounds:n(902),Canvas:n(906),Color:n(397),ColorMatrix:n(198),Masks:n(916),RGB:n(200)}},function(t,i,n){var o=n(123),a=n(17),u={In:n(900),To:n(901)};u=a(!1,u,o),t.exports=u},function(t,i,n){t.exports={BottomCenter:n(290),BottomLeft:n(291),BottomRight:n(292),Center:n(293),LeftCenter:n(295),QuickSet:n(289),RightCenter:n(296),TopCenter:n(297),TopLeft:n(298),TopRight:n(299)}},function(t,i,n){t.exports={BottomCenter:n(277),BottomLeft:n(278),BottomRight:n(279),LeftBottom:n(280),LeftCenter:n(281),LeftTop:n(282),QuickSet:n(276),RightBottom:n(283),RightCenter:n(284),RightTop:n(285),TopCenter:n(286),TopLeft:n(287),TopRight:n(288)}},function(t,i,n){t.exports={CenterOn:n(294),GetBottom:n(42),GetBounds:n(903),GetCenterX:n(87),GetCenterY:n(89),GetLeft:n(43),GetOffsetX:n(904),GetOffsetY:n(905),GetRight:n(44),GetTop:n(45),SetBottom:n(55),SetCenterX:n(88),SetCenterY:n(90),SetLeft:n(53),SetRight:n(54),SetTop:n(52)}},function(t,i,n){var o=n(42),a=n(43),u=n(44),d=n(45);t.exports=function(t,i){void 0===i&&(i={});var n=a(t),f=d(t);return i.x=n,i.y=f,i.width=u(t)-n,i.height=o(t)-f,i}},function(t,i){t.exports=function(t){return t.width*t.originX}},function(t,i){t.exports=function(t){return t.height*t.originY}},function(t,i,n){t.exports={CanvasInterpolation:n(367),CanvasPool:n(31),Smoothing:n(192),TouchAction:n(907),UserSelect:n(908)}},function(t,i){t.exports=function(t,i){return void 0===i&&(i="none"),t.style.msTouchAction=i,t.style["ms-touch-action"]=i,t.style["touch-action"]=i,t}},function(t,i){t.exports=function(t,i){return void 0===i&&(i="none"),["-webkit-","-khtml-","-moz-","-ms-",""].forEach((function(n){t.style[n+"user-select"]=i})),t.style["-webkit-touch-callout"]=i,t.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",t}},function(t,i,n){var o=n(103);t.exports=function(t){void 0===t&&(t=1024);var i,n=[],a=255,u=255,d=0,f=0;for(i=0;i<=a;i++)n.push({r:u,g:i,b:f,color:o(u,i,f)});for(d=255,i=a;i>=0;i--)n.push({r:i,g:d,b:f,color:o(i,d,f)});for(u=0,i=0;i<=a;i++,d--)n.push({r:u,g:d,b:i,color:o(u,d,i)});for(d=0,f=255,i=0;i<=a;i++,f--,u++)n.push({r:u,g:d,b:f,color:o(u,d,f)});if(1024===t)return n;var p=[],b=0,S=1024/t;for(i=0;i<t;i++)p.push(n[Math.floor(b)]),b+=S;return p}},function(t,i){t.exports=function(t){var i={r:t>>16&255,g:t>>8&255,b:255&t,a:255};return t>16777215&&(i.a=t>>>24),i}},function(t,i,n){var o=n(38),a=n(399);t.exports=function(t,i,n){var u=n,d=n,f=n;if(0!==i){var p=n<.5?n*(1+i):n+i-n*i,b=2*n-p;u=a(b,p,t+1/3),d=a(b,p,t),f=a(b,p,t-1/3)}return(new o).setGLTo(u,d,f,1)}},function(t,i,n){var o=n(188);t.exports=function(t,i){void 0===t&&(t=1),void 0===i&&(i=1);for(var n=[],a=0;a<=359;a++)n.push(o(a/359,t,i));return n}},function(t,i,n){var o=n(135),RGBWithRGB=function(t,i,n,a,u,d,f,p){void 0===f&&(f=100),void 0===p&&(p=0);var b=p/f;return{r:o(t,a,b),g:o(i,u,b),b:o(n,d,b)}};t.exports={RGBWithRGB:RGBWithRGB,ColorWithRGB:function(t,i,n,o,a,u){return void 0===a&&(a=100),void 0===u&&(u=0),RGBWithRGB(t.r,t.g,t.b,i,n,o,a,u)},ColorWithColor:function(t,i,n,o){return void 0===n&&(n=100),void 0===o&&(o=0),RGBWithRGB(t.r,t.g,t.b,i.r,i.g,i.b,n,o)}}},function(t,i,n){var o=n(195),a=n(38);t.exports=function(t,i){return void 0===t&&(t=0),void 0===i&&(i=255),new a(o(t,i),o(t,i),o(t,i))}},function(t,i,n){var o=n(398);t.exports=function(t,i,n,a,u){return void 0===a&&(a=255),void 0===u&&(u="#"),"#"===u?"#"+((1<<24)+(t<<16)+(i<<8)+n).toString(16).slice(1,7):"0x"+o(a)+o(t)+o(i)+o(n)}},function(t,i,n){t.exports={BitmapMask:n(310),GeometryMask:n(311)}},function(t,i,n){var o={AddToDOM:n(142),DOMContentLoaded:n(400),GetInnerHeight:n(401),GetScreenOrientation:n(402),GetTarget:n(407),ParseXML:n(408),RemoveFromDOM:n(202),RequestAnimationFrame:n(386)};t.exports=o},function(t,i,n){t.exports={EventEmitter:n(919)}},function(t,i,n){var o=n(0),a=n(9),u=n(24),d=new o({Extends:a,initialize:function EventEmitter3(){a.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});u.register("EventEmitter",d,"events"),t.exports=d},function(t,i,n){var o=n(142),a=n(321),u=n(325),d=n(31),f=n(0),p=n(346),b=n(921),S=n(366),M=n(101),C=n(384),P=n(347),R=n(400),O=n(9),B=n(22),N=n(409),Y=n(24),X=n(414),G=n(415),U=n(417),V=n(106),z=n(422),W=n(385),H=n(387),j=n(426),q=new f({initialize:function Game2(t){this.config=new p(t),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new O,this.anims=new a(this),this.textures=new z(this),this.cache=new u(this),this.registry=new M(this),this.input=new N(this,this.config),this.scene=new U(this,this.config.sceneConfig),this.device=P,this.scale=new G(this,this.config),this.sound=null,this.sound=j.create(this),this.loop=new W(this,this.config.fps),this.plugins=new X(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,R(this.boot.bind(this))},boot:function(){Y.hasCore("EventEmitter")?(this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),S(this),b(this),C(this),o(this.canvas,this.config.parent),this.textures.once(V.READY,this.texturesReady,this),this.events.emit(B.BOOT)):console.warn("Aborting. Core Plugins missing.")},texturesReady:function(){this.events.emit(B.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),H(this);var t=this.events;t.on(B.HIDDEN,this.onHidden,this),t.on(B.VISIBLE,this.onVisible,this),t.on(B.BLUR,this.onBlur,this),t.on(B.FOCUS,this.onFocus,this)},step:function(t,i){if(this.pendingDestroy)return this.runDestroy();var n=this.events;n.emit(B.PRE_STEP,t,i),n.emit(B.STEP,t,i),this.scene.update(t,i),n.emit(B.POST_STEP,t,i);var o=this.renderer;o.preRender(),n.emit(B.PRE_RENDER,o,t,i),this.scene.render(o),o.postRender(),n.emit(B.POST_RENDER,o,t,i)},headlessStep:function(t,i){if(this.pendingDestroy)return this.runDestroy();var n=this.events;n.emit(B.PRE_STEP,t,i),n.emit(B.STEP,t,i),this.scene.update(t,i),n.emit(B.POST_STEP,t,i),n.emit(B.PRE_RENDER),n.emit(B.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(B.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(B.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(t,i){void 0===i&&(i=!1),this.pendingDestroy=!0,this.removeCanvas=t,this.noReturn=i},runDestroy:function(){this.scene.destroy(),this.events.emit(B.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(d.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});t.exports=q},function(t,i,n){var o=n(142);t.exports=function(t){var i=t.config;if(i.parent&&i.domCreateContainer){var n=document.createElement("div");n.style.cssText=["display: block;","width: "+t.scale.width+"px;","height: "+t.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+i.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),t.domContainer=n,o(n,i.parent)}}},function(t,i){t.exports="boot"},function(t,i){t.exports="destroy"},function(t,i){t.exports="dragend"},function(t,i){t.exports="dragenter"},function(t,i){t.exports="drag"},function(t,i){t.exports="dragleave"},function(t,i){t.exports="dragover"},function(t,i){t.exports="dragstart"},function(t,i){t.exports="drop"},function(t,i){t.exports="gameout"},function(t,i){t.exports="gameover"},function(t,i){t.exports="gameobjectdown"},function(t,i){t.exports="dragend"},function(t,i){t.exports="dragenter"},function(t,i){t.exports="drag"},function(t,i){t.exports="dragleave"},function(t,i){t.exports="dragover"},function(t,i){t.exports="dragstart"},function(t,i){t.exports="drop"},function(t,i){t.exports="gameobjectmove"},function(t,i){t.exports="gameobjectout"},function(t,i){t.exports="gameobjectover"},function(t,i){t.exports="pointerdown"},function(t,i){t.exports="pointermove"},function(t,i){t.exports="pointerout"},function(t,i){t.exports="pointerover"},function(t,i){t.exports="pointerup"},function(t,i){t.exports="wheel"},function(t,i){t.exports="gameobjectup"},function(t,i){t.exports="gameobjectwheel"},function(t,i){t.exports="boot"},function(t,i){t.exports="process"},function(t,i){t.exports="update"},function(t,i){t.exports="pointerdown"},function(t,i){t.exports="pointerdownoutside"},function(t,i){t.exports="pointermove"},function(t,i){t.exports="pointerout"},function(t,i){t.exports="pointerover"},function(t,i){t.exports="pointerup"},function(t,i){t.exports="pointerupoutside"},function(t,i){t.exports="wheel"},function(t,i){t.exports="pointerlockchange"},function(t,i){t.exports="preupdate"},function(t,i){t.exports="shutdown"},function(t,i){t.exports="start"},function(t,i){t.exports="update"},function(t,i){t.exports="addfile"},function(t,i){t.exports="complete"},function(t,i){t.exports="filecomplete"},function(t,i){t.exports="filecomplete-"},function(t,i){t.exports="loaderror"},function(t,i){t.exports="load"},function(t,i){t.exports="fileprogress"},function(t,i){t.exports="postprocess"},function(t,i){t.exports="progress"},function(t,i){t.exports="start"},function(t,i,n){t.exports={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"}},function(t,i){t.exports=function(t,i,n){if(n.getElementsByTagName("TextureAtlas")){var o=t.source[i];t.add("__BASE",i,0,0,o.width,o.height);for(var a,u=n.getElementsByTagName("SubTexture"),d=0;d<u.length;d++){var f=u[d].attributes,p=f.name.value,b=parseInt(f.x.value,10),S=parseInt(f.y.value,10),M=parseInt(f.width.value,10),C=parseInt(f.height.value,10);if(a=t.add(p,i,b,S,M,C),f.frameX){var P=Math.abs(parseInt(f.frameX.value,10)),R=Math.abs(parseInt(f.frameY.value,10)),O=parseInt(f.frameWidth.value,10),B=parseInt(f.frameHeight.value,10);a.setTrim(M,C,P,R,O,B)}}return t}console.warn("Invalid Texture Atlas XML given")}},function(t,i){t.exports=function(t,i){var n=t.source[i];return t.add("__BASE",i,0,0,n.width,n.height),t}},function(t,i){t.exports=function(t,i){var n=t.source[i];return t.add("__BASE",i,0,0,n.width,n.height),t}},function(t,i,n){var o=n(77);t.exports=function(t,i,n){if(n.frames||n.textures){var a=t.source[i];t.add("__BASE",i,0,0,a.width,a.height);for(var u,d=Array.isArray(n.textures)?n.textures[i].frames:n.frames,f=0;f<d.length;f++){var p=d[f];u=t.add(p.filename,i,p.frame.x,p.frame.y,p.frame.w,p.frame.h),p.trimmed&&u.setTrim(p.sourceSize.w,p.sourceSize.h,p.spriteSourceSize.x,p.spriteSourceSize.y,p.spriteSourceSize.w,p.spriteSourceSize.h),p.rotated&&(u.rotated=!0,u.updateUVsInverted());var b=p.anchor||p.pivot;b&&(u.customPivot=!0,u.pivotX=b.x,u.pivotY=b.y),u.customData=o(p)}for(var S in n)"frames"!==S&&(Array.isArray(n[S])?t.customData[S]=n[S].slice(0):t.customData[S]=n[S]);return t}console.warn("Invalid Texture Atlas JSON Array")}},function(t,i,n){var o=n(77);t.exports=function(t,i,n){if(n.frames){var a=t.source[i];t.add("__BASE",i,0,0,a.width,a.height);var u,d=n.frames;for(var f in d)if(d.hasOwnProperty(f)){var p=d[f];u=t.add(f,i,p.frame.x,p.frame.y,p.frame.w,p.frame.h),p.trimmed&&u.setTrim(p.sourceSize.w,p.sourceSize.h,p.spriteSourceSize.x,p.spriteSourceSize.y,p.spriteSourceSize.w,p.spriteSourceSize.h),p.rotated&&(u.rotated=!0,u.updateUVsInverted());var b=p.anchor||p.pivot;b&&(u.customPivot=!0,u.pivotX=b.x,u.pivotY=b.y),u.customData=o(p)}for(var S in n)"frames"!==S&&(Array.isArray(n[S])?t.customData[S]=n[S].slice(0):t.customData[S]=n[S]);return t}console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object")}},function(t,i,n){var o=n(2);t.exports=function(t,i,n,a,u,d,f){var p=o(f,"frameWidth",null),b=o(f,"frameHeight",p);if(null===p)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var S=t.source[i];t.add("__BASE",i,0,0,S.width,S.height);var M=o(f,"startFrame",0),C=o(f,"endFrame",-1),P=o(f,"margin",0),R=o(f,"spacing",0),O=Math.floor((u-P+R)/(p+R))*Math.floor((d-P+R)/(b+R));0===O&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",t.key),(M>O||M<-O)&&(M=0),M<0&&(M=O+M),-1!==C&&(O=M+(C+1));for(var B=P,N=P,Y=0,X=0,G=0;G<O;G++){Y=0,X=0;var U=B+p,V=N+b;U>u&&(Y=U-u),V>d&&(X=V-d),t.add(G,i,n+B,a+N,p-Y,b-X),(B+=p+R)+p>u&&(B=P,N+=b+R)}return t}},function(t,i,n){var o=n(2);t.exports=function(t,i,n){var a=o(n,"frameWidth",null),u=o(n,"frameHeight",a);if(!a)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var d=t.source[0];t.add("__BASE",0,0,0,d.width,d.height),o(n,"startFrame",0),o(n,"endFrame",-1);for(var f,p=o(n,"margin",0),b=o(n,"spacing",0),S=i.cutX,M=i.cutY,C=i.cutWidth,P=i.cutHeight,R=i.realWidth,O=i.realHeight,B=Math.floor((R-p+b)/(a+b)),N=Math.floor((O-p+b)/(u+b)),Y=i.x,X=a-Y,G=a-(R-C-Y),U=i.y,V=u-U,z=u-(O-P-U),W=p,H=p,j=0,q=i.sourceIndex,Z=0;Z<N;Z++){for(var K=0===Z,$=Z===N-1,tt=0;tt<B;tt++){var et=0===tt,it=tt===B-1;if(f=t.add(j,q,S+W,M+H,a,u),et||K||it||$){var nt=et?Y:0,st=K?U:0,rt=0,ot=0;et&&(rt+=a-X),it&&(rt+=a-G),K&&(ot+=u-V),$&&(ot+=u-z);var at=a-rt,ht=u-ot;f.cutWidth=at,f.cutHeight=ht,f.setTrim(a,u,nt,st,at,ht)}W+=b,W+=et?X:it?G:a,j++}W=p,H+=b,H+=K?V:$?z:u}return t}},function(t,i){var n=0,addFrame=function(t,i,o,a){var u=n-a.y-a.height;t.add(o,i,a.x,u,a.width,a.height)};t.exports=function(t,i,o){var a=t.source[i];t.add("__BASE",i,0,0,a.width,a.height),n=a.height;for(var u=o.split("\n"),d=/^[ ]*(- )*(\w+)+[: ]+(.*)/,f="",p="",b={x:0,y:0,width:0,height:0},S=0;S<u.length;S++){var M=u[S].match(d);if(M){var C="- "===M[1],P=M[2],R=M[3];if(C&&(p!==f&&(addFrame(t,i,p,b),f=p),b={x:0,y:0,width:0,height:0}),"name"!==P)switch(P){case"x":case"y":case"width":case"height":b[P]=parseInt(R,10)}else p=R}}return p!==f&&addFrame(t,i,p,b),t}},function(t,i){t.exports="complete"},function(t,i){t.exports="decoded"},function(t,i){t.exports="decodedall"},function(t,i){t.exports="destroy"},function(t,i){t.exports="detune"},function(t,i){t.exports="detune"},function(t,i){t.exports="mute"},function(t,i){t.exports="rate"},function(t,i){t.exports="volume"},function(t,i){t.exports="loop"},function(t,i){t.exports="looped"},function(t,i){t.exports="mute"},function(t,i){t.exports="pan"},function(t,i){t.exports="pauseall"},function(t,i){t.exports="pause"},function(t,i){t.exports="play"},function(t,i){t.exports="rate"},function(t,i){t.exports="resumeall"},function(t,i){t.exports="resume"},function(t,i){t.exports="seek"},function(t,i){t.exports="stopall"},function(t,i){t.exports="stop"},function(t,i){t.exports="unlocked"},function(t,i){t.exports="volume"},function(t,i,n){var o={Events:n(75),DisplayList:n(1012),GameObjectCreator:n(16),GameObjectFactory:n(5),UpdateList:n(1040),Components:n(11),GetCalcMatrix:n(19),BuildGameObject:n(28),BuildGameObjectAnimation:n(439),GameObject:n(15),BitmapText:n(148),Blitter:n(213),Bob:n(440),Container:n(214),DOMElement:n(442),DynamicBitmapText:n(215),Extern:n(444),Graphics:n(216),Group:n(113),Image:n(125),Layer:n(219),Particles:n(1074),PathFollower:n(457),RenderTexture:n(221),RetroFont:n(1082),Rope:n(223),Sprite:n(73),Text:n(224),GetTextSize:n(458),MeasureText:n(460),TextStyle:n(459),TileSprite:n(225),Zone:n(129),Video:n(226),Shape:n(34),Arc:n(461),Curve:n(462),Ellipse:n(463),Grid:n(464),IsoBox:n(465),IsoTriangle:n(466),Line:n(467),Polygon:n(468),Rectangle:n(473),Star:n(474),Triangle:n(475),Factories:{Blitter:n(1130),Container:n(1131),DOMElement:n(1132),DynamicBitmapText:n(1133),Extern:n(1134),Graphics:n(1135),Group:n(1136),Image:n(1137),Layer:n(1138),Particles:n(1139),PathFollower:n(1140),RenderTexture:n(1141),Rope:n(1142),Sprite:n(1143),StaticBitmapText:n(1144),Text:n(1145),TileSprite:n(1146),Zone:n(1147),Video:n(1148),Arc:n(1149),Curve:n(1150),Ellipse:n(1151),Grid:n(1152),IsoBox:n(1153),IsoTriangle:n(1154),Line:n(1155),Polygon:n(1156),Rectangle:n(1157),Star:n(1158),Triangle:n(1159)},Creators:{Blitter:n(1160),Container:n(1161),DynamicBitmapText:n(1162),Graphics:n(1163),Group:n(1164),Image:n(1165),Layer:n(1166),Particles:n(1167),RenderTexture:n(1168),Rope:n(1169),Sprite:n(1170),StaticBitmapText:n(1171),Text:n(1172),TileSprite:n(1173),Zone:n(1174),Video:n(1175)}};o.Shader=n(229),o.Mesh=n(230),o.PointLight=n(150),o.Factories.Shader=n(1184),o.Factories.Mesh=n(1185),o.Factories.PointLight=n(1186),o.Creators.Shader=n(1187),o.Creators.Mesh=n(1188),o.Creators.PointLight=n(1189),o.Light=n(481),o.LightsManager=n(482),o.LightsPlugin=n(1190),t.exports=o},function(t,i,n){var o=n(0),a=n(110),u=n(24),d=n(75),f=n(20),p=n(79),b=new o({Extends:a,initialize:function DisplayList2(t){a.call(this,t),this.sortChildrenFlag=!1,this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(f.BOOT,this.boot,this),this.events.on(f.START,this.start,this)},boot:function(){this.events.once(f.DESTROY,this.destroy,this)},addChildCallback:function(t){t.displayList&&t.displayList!==this&&t.removeFromDisplayList(),t.displayList||(this.queueDepthSort(),t.displayList=this,t.emit(d.ADDED_TO_SCENE,t,this.scene),this.events.emit(f.ADDED_TO_SCENE,t,this.scene))},removeChildCallback:function(t){this.queueDepthSort(),t.displayList=null,t.emit(d.REMOVED_FROM_SCENE,t,this.scene),this.events.emit(f.REMOVED_FROM_SCENE,t,this.scene)},start:function(){this.events.once(f.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(p(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(t,i){return t._depth-i._depth},getChildren:function(){return this.list},shutdown:function(){for(var t=this.list,i=t.length;i--;)t[i].destroy(!0);t.length=0,this.events.off(f.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(f.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});u.register("DisplayList",b,"displayList"),t.exports=b},function(t,i,n){t.exports={CheckMatrix:n(209),MatrixToString:n(1014),ReverseColumns:n(1015),ReverseRows:n(1016),Rotate180:n(1017),RotateLeft:n(1018),RotateMatrix:n(147),RotateRight:n(1019),Translate:n(1020),TransposeMatrix:n(435)}},function(t,i,n){var o=n(186),a=n(209);t.exports=function(t){var i="";if(!a(t))return i;for(var n=0;n<t.length;n++){for(var u=0;u<t[n].length;u++){var d=t[n][u].toString();i+="undefined"!==d?o(d,2):"?",u<t[n].length-1&&(i+=" |")}if(n<t.length-1){i+="\n";for(var f=0;f<t[n].length;f++)i+="---",f<t[n].length-1&&(i+="+");i+="\n"}}return i}},function(t,i){t.exports=function(t){return t.reverse()}},function(t,i){t.exports=function(t){for(var i=0;i<t.length;i++)t[i].reverse();return t}},function(t,i,n){var o=n(147);t.exports=function(t){return o(t,180)}},function(t,i,n){var o=n(147);t.exports=function(t){return o(t,90)}},function(t,i,n){var o=n(147);t.exports=function(t){return o(t,-90)}},function(t,i,n){var o=n(178),a=n(179);t.exports=function(t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),0!==n&&(n<0?o(t,Math.abs(n)):a(t,n)),0!==i)for(var u=0;u<t.length;u++){var d=t[u];i<0?o(d,Math.abs(i)):a(d,i)}return t}},function(t,i){t.exports=function(t,i,n,o,a){if(void 0===a&&(a=t),n>0){var u=n-t.length;if(u<=0)return null}if(!Array.isArray(i))return-1===t.indexOf(i)?(t.push(i),o&&o.call(a,i),i):null;for(var d=i.length-1;d>=0;)-1!==t.indexOf(i[d])&&i.splice(d,1),d--;if(0===(d=i.length))return null;n>0&&d>u&&(i.splice(u),d=u);for(var f=0;f<d;f++){var p=i[f];t.push(p),o&&o.call(a,p)}return i}},function(t,i){t.exports=function(t,i,n,o,a,u){if(void 0===n&&(n=0),void 0===u&&(u=t),o>0){var d=o-t.length;if(d<=0)return null}if(!Array.isArray(i))return-1===t.indexOf(i)?(t.splice(n,0,i),a&&a.call(u,i),i):null;for(var f=i.length-1;f>=0;)-1!==t.indexOf(i[f])&&i.pop(),f--;if(0===(f=i.length))return null;o>0&&f>d&&(i.splice(d),f=d);for(var p=f-1;p>=0;p--){var b=i[p];t.splice(n,0,b),a&&a.call(u,b)}return i}},function(t,i){t.exports=function(t,i){var n=t.indexOf(i);return-1!==n&&n<t.length&&(t.splice(n,1),t.push(i)),i}},function(t,i,n){var o=n(78);t.exports=function(t,i,n,a,u){void 0===a&&(a=0),void 0===u&&(u=t.length);var d=0;if(o(t,a,u))for(var f=a;f<u;f++)t[f][i]===n&&d++;return d}},function(t,i){t.exports=function(t,i,n){var o,a=[null];for(o=3;o<arguments.length;o++)a.push(arguments[o]);for(o=0;o<t.length;o++)a[0]=t[o],i.apply(n,a);return t}},function(t,i,n){var o=n(78);t.exports=function(t,i,n,a,u){if(void 0===a&&(a=0),void 0===u&&(u=t.length),o(t,a,u)){var d,f=[null];for(d=5;d<arguments.length;d++)f.push(arguments[d]);for(d=a;d<u;d++)f[0]=t[d],i.apply(n,f)}return t}},function(t,i){t.exports=function(t,i){var n=t.indexOf(i);if(n>0){var o=t[n-1],a=t.indexOf(o);t[n]=o,t[a]=i}return t}},function(t,i){t.exports=function(t,i,n){var o=t.indexOf(i);if(-1===o||n<0||n>=t.length)throw new Error("Supplied index out of bounds");return o!==n&&(t.splice(o,1),t.splice(n,0,i)),i}},function(t,i){t.exports=function(t,i){var n=t.indexOf(i);if(-1!==n&&n<t.length-1){var o=t[n+1],a=t.indexOf(o);t[n]=o,t[a]=i}return t}},function(t,i){t.exports=function(t,i,n){if(i===n)return t;var o=t.indexOf(i),a=t.indexOf(n);if(o<0||a<0)throw new Error("Supplied items must be elements of the same array");return o>a||(t.splice(o,1),a===t.length-1?t.push(i):t.splice(a,0,i)),t}},function(t,i){t.exports=function(t,i,n){if(i===n)return t;var o=t.indexOf(i),a=t.indexOf(n);if(o<0||a<0)throw new Error("Supplied items must be elements of the same array");return o<a||(t.splice(o,1),0===a?t.unshift(i):t.splice(a,0,i)),t}},function(t,i,n){var o=n(363);t.exports=function(t,i,n){void 0===t&&(t=0),void 0===i&&(i=null),void 0===n&&(n=1),null===i&&(i=t,t=0);for(var a=[],u=Math.max(o((i-t)/(n||1)),0),d=0;d<u;d++)a.push(t),t+=n;return a}},function(t,i,n){var o=n(74);t.exports=function(t,i,n,a){if(void 0===a&&(a=t),i<0||i>t.length-1)throw new Error("Index out of bounds");var u=o(t,i);return n&&n.call(a,u),u}},function(t,i,n){var o=n(78);t.exports=function(t,i,n,a,u){if(void 0===i&&(i=0),void 0===n&&(n=t.length),void 0===u&&(u=t),o(t,i,n)){var d=n-i,f=t.splice(i,d);if(a)for(var p=0;p<f.length;p++){var b=f[p];a.call(u,b)}return f}return[]}},function(t,i,n){var o=n(74);t.exports=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=t.length);var a=i+Math.floor(Math.random()*n);return o(t,a)}},function(t,i){t.exports=function(t,i,n){var o=t.indexOf(i),a=t.indexOf(n);return-1!==o&&-1===a&&(t[o]=n,!0)}},function(t,i){t.exports=function(t,i){var n=t.indexOf(i);return-1!==n&&n>0&&(t.splice(n,1),t.unshift(i)),i}},function(t,i,n){var o=n(78);t.exports=function(t,i,n,a,u){if(void 0===a&&(a=0),void 0===u&&(u=t.length),o(t,a,u))for(var d=a;d<u;d++){var f=t[d];f.hasOwnProperty(i)&&(f[i]=n)}return t}},function(t,i){t.exports=function(t,i,n){if(i===n)return t;var o=t.indexOf(i),a=t.indexOf(n);if(o<0||a<0)throw new Error("Supplied items must be elements of the same array");return t[o]=n,t[a]=i,t}},function(t,i,n){var o=n(0),a=n(211),u=n(24),d=n(20),f=new o({Extends:a,initialize:function UpdateList2(t){a.call(this),this.checkQueue=!0,this.scene=t,this.systems=t.sys,t.sys.events.once(d.BOOT,this.boot,this),t.sys.events.on(d.START,this.start,this)},boot:function(){this.systems.events.once(d.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(d.PRE_UPDATE,this.update,this),t.on(d.UPDATE,this.sceneUpdate,this),t.once(d.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(t,i){for(var n=this._active,o=n.length,a=0;a<o;a++){var u=n[a];u.active&&u.preUpdate.call(u,t,i)}},shutdown:function(){for(var t=this._active.length;t--;)this._active[t].destroy(!0);for(t=this._pending.length;t--;)this._pending[t].destroy(!0);for(t=this._destroy.length;t--;)this._destroy[t].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var i=this.systems.events;i.off(d.PRE_UPDATE,this.update,this),i.off(d.UPDATE,this.sceneUpdate,this),i.off(d.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(d.START,this.start,this),this.scene=null,this.systems=null}});u.register("UpdateList",f,"updateList"),t.exports=f},function(t,i){t.exports="add"},function(t,i){t.exports="remove"},function(t,i){t.exports=function(t,i,n,o){if(void 0===n&&(n=!1),void 0===o)return o={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0};var a,u,d,f,p=t.text,b=p.length,S=t.maxWidth,M=t.wordWrapCharCode,C=Number.MAX_VALUE,P=Number.MAX_VALUE,R=0,O=0,B=t.fontData.chars,N=t.fontData.lineHeight,Y=t.letterSpacing,X=0,G=0,U=0,V=null,z=t._align,W=0,H=0,j=t.fontSize/t.fontData.size,q=j*t.scaleX,Z=j*t.scaleY,K=null,$=0,tt=[],et=Number.MAX_VALUE,it=0,nt=0,st=0,rt=[],ot=[],at=null;if(S>0){for(a=0;a<b;a++)if(10!==(U=p.charCodeAt(a))){if(V=B[U]){if(null!==K)var ht=V.kerning[$];U===M?null!==at&&(rt.push({word:at.word,i:at.i,x:at.x*q,y:at.y*Z,w:at.w*q,h:at.h*Z,cr:!1}),at=null):(null===at&&(at={word:"",i:a,x:X,y:G,w:0,h:N,cr:!1}),at.word=at.word.concat(p[a]),at.w+=V.xOffset+V.xAdvance+(void 0!==ht?ht:0)),X+=V.xAdvance+Y,K=V,$=U}}else null!==at&&(rt.push({word:at.word,i:at.i,x:at.x*q,y:at.y*Z,w:at.w*q,h:at.h*Z,cr:!0}),at=null),X=0,G+=N,K=null;var lt;null!==at&&rt.push({word:at.word,i:at.i,x:at.x*q,y:at.y*Z,w:at.w*q,h:at.h*Z,cr:!1}),X=0,G=0,K=null,$=0;var ut=0,ct=[];for(a=0;a<rt.length;a++){var dt=rt[a],ft=dt.x,pt=dt.x+dt.w;lt&&(ut=ft-(ft-(lt.x+lt.w)+lt.w),lt=null),ft-ut>S||pt-ut>S?(ct.push(dt.i-1),dt.cr?(ct.push(dt.i+dt.word.length),ut=0,lt=null):lt=dt):dt.cr&&(ct.push(dt.i+dt.word.length),ut=0,lt=null)}for(a=ct.length-1;a>=0;a--)u=p,d=ct[a],f="\n",p=u.substr(0,d)+f+u.substr(d+1);o.wrappedText=p,b=p.length,rt=[],at=null}var gt=0;for(a=0;a<b;a++)if(10!==(U=p.charCodeAt(a))){if(V=B[U]){if(W=X,H=G,null!==K){var vt=V.kerning[$];W+=void 0!==vt?vt:0}C>W&&(C=W),P>H&&(P=H);var mt=W+V.xAdvance,yt=H+N;R<mt&&(R=mt),O<yt&&(O=yt);var xt=V.xOffset+V.xAdvance+(void 0!==vt?vt:0);U===M?null!==at&&(rt.push({word:at.word,i:at.i,x:at.x*q,y:at.y*Z,w:at.w*q,h:at.h*Z}),at=null):(null===at&&(at={word:"",i:gt,x:X,y:G,w:0,h:N}),at.word=at.word.concat(p[a]),at.w+=xt),ot.push({i:gt,char:p[a],code:U,x:(V.xOffset+X)*j,y:(V.yOffset+G)*j,w:V.width*j,h:V.height*j,t:G*j,r:mt*j,b:N*j,line:nt,glyph:V}),X+=V.xAdvance+Y,K=V,$=U,st=mt*j,gt++}}else null!==at&&(rt.push({word:at.word,i:at.i,x:at.x*q,y:at.y*Z,w:at.w*q,h:at.h*Z}),at=null),X=0,G+=N,K=null,tt[nt]=st,st>it&&(it=st),st<et&&(et=st),nt++,st=0;if(null!==at&&rt.push({word:at.word,i:at.i,x:at.x*q,y:at.y*Z,w:at.w*q,h:at.h*Z}),tt[nt]=st,st>it&&(it=st),st<et&&(et=st),z>0)for(var Tt=0;Tt<ot.length;Tt++){var wt=ot[Tt];if(1===z){var bt=(it-tt[wt.line])/2;wt.x+=bt,wt.r+=bt}else if(2===z){var St=it-tt[wt.line];wt.x+=St,wt.r+=St}}var Et=o.local,Mt=o.global,Ct=o.lines;return Et.x=C*j,Et.y=P*j,Et.width=R*j,Et.height=O*j,Mt.x=t.x-t._displayOriginX+C*q,Mt.y=t.y-t._displayOriginY+P*Z,Mt.width=R*q,Mt.height=O*Z,Ct.shortest=et,Ct.longest=it,Ct.lengths=tt,i&&(Et.x=Math.ceil(Et.x),Et.y=Math.ceil(Et.y),Et.width=Math.ceil(Et.width),Et.height=Math.ceil(Et.height),Mt.x=Math.ceil(Mt.x),Mt.y=Math.ceil(Mt.y),Mt.width=Math.ceil(Mt.width),Mt.height=Math.ceil(Mt.height),Ct.shortest=Math.ceil(et),Ct.longest=Math.ceil(it)),n&&(t._displayOriginX=t.originX*Et.width,t._displayOriginY=t.originY*Et.height,Mt.x=t.x-t._displayOriginX*t.scaleX,Mt.y=t.y-t._displayOriginY*t.scaleY,i&&(Mt.x=Math.ceil(Mt.x),Mt.y=Math.ceil(Mt.y))),o.words=rt,o.characters=ot,o.lines.height=N,o.scale=j,o.scaleX=t.scaleX,o.scaleY=t.scaleY,o}},function(t,i,n){var o=n(212);t.exports=function(t,i,n,a,u,d,f){var p=t.sys.textures.get(n),b=p.get(a),S=t.sys.cache.xml.get(u);if(b&&S){var M=o(S,b,d,f,p);return t.sys.cache.bitmapFont.add(i,{data:M,texture:n,frame:a,fromAtlas:!0}),!0}return!1}},function(t,i,n){var o=n(1),a=n(1);o=n(1046),a=n(1048),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,n){var o=n(1047),a=n(19),u=n(12);t.exports=function(t,i,n,d){if(0!==i._text.length){n.addToRenderList(i);var f,p,b,S=t.pipelines.set(i.pipeline,i),M=a(i,n,d).calc,C=n.roundPixels,P=n.alpha,R=i.charColors,O=i.tintFill,B=u.getTintAppendFloatAlpha,N=B(i.tintTopLeft,P*i._alphaTL),Y=B(i.tintTopRight,P*i._alphaTR),X=B(i.tintBottomLeft,P*i._alphaBL),G=B(i.tintBottomRight,P*i._alphaBR),U=i.frame.glTexture,V=S.setGameObject(i),z=i.getTextBounds(!1).characters,W=i.dropShadowX,H=i.dropShadowY,j=0!==W||0!==H;if(t.pipelines.preBatch(i),j){var q=i.dropShadowColor,Z=i.dropShadowAlpha,K=B(q,P*Z*i._alphaTL),$=B(q,P*Z*i._alphaTR),tt=B(q,P*Z*i._alphaBL),et=B(q,P*Z*i._alphaBR);for(f=0;f<z.length;f++)b=(p=z[f]).glyph,32!==p.code&&0!==b.width&&0!==b.height&&o(S,i,p,b,W,H,M,C,K,$,tt,et,1,U,V)}for(f=0;f<z.length;f++)if(b=(p=z[f]).glyph,32!==p.code&&0!==b.width&&0!==b.height)if(R[p.i]){var it=R[p.i],nt=it.tintEffect,st=B(it.tintTL,P*i._alphaTL),rt=B(it.tintTR,P*i._alphaTR),ot=B(it.tintBL,P*i._alphaBL),at=B(it.tintBR,P*i._alphaBR);o(S,i,p,b,0,0,M,C,st,rt,ot,at,nt,U,V)}else o(S,i,p,b,0,0,M,C,N,Y,X,G,O,U,V);t.pipelines.postBatch(i)}}},function(t,i){t.exports=function(t,i,n,o,a,u,d,f,p,b,S,M,C,P,R){var O=n.x-i.displayOriginX+a,B=n.y-i.displayOriginY+u,N=O+n.w,Y=B+n.h,X=d.getXRound(O,B,f),G=d.getYRound(O,B,f),U=d.getXRound(O,Y,f),V=d.getYRound(O,Y,f),z=d.getXRound(N,Y,f),W=d.getYRound(N,Y,f),H=d.getXRound(N,B,f),j=d.getYRound(N,B,f);t.batchQuad(i,X,G,U,V,z,W,H,j,o.u0,o.v0,o.u1,o.v1,p,b,S,M,C,P,R)}},function(t,i,n){var o=n(30);t.exports=function(t,i,n,a){var u=i._text,d=u.length,f=t.currentContext;if(0!==d&&o(t,f,i,n,a)){n.addToRenderList(i);var p=i.fromAtlas?i.frame:i.texture.frames.__BASE,b=i.fontData.chars,S=i.fontData.lineHeight,M=i._letterSpacing,C=0,P=0,R=0,O=null,B=0,N=0,Y=0,X=0,G=0,U=0,V=null,z=0,W=p.source.image,H=p.cutX,j=p.cutY,q=i._fontSize/i.fontData.size,Z=i._align,K=0,$=0,tt=i.getTextBounds(!1);i.maxWidth>0&&(d=(u=tt.wrappedText).length);var et=i._bounds.lines;1===Z?$=(et.longest-et.lengths[0])/2:2===Z&&($=et.longest-et.lengths[0]),f.translate(-i.displayOriginX,-i.displayOriginY);for(var it=n.roundPixels,nt=0;nt<d;nt++)if(10!==(R=u.charCodeAt(nt))){if(O=b[R]){if(B=H+O.x,N=j+O.y,Y=O.width,X=O.height,G=O.xOffset+C,U=O.yOffset+P,null!==V){var st=O.kerning[z];G+=void 0!==st?st:0}G*=q,U*=q,G+=$,C+=O.xAdvance+M,V=O,z=R,0!==Y&&0!==X&&32!==R&&(it&&(G=Math.round(G),U=Math.round(U)),f.save(),f.translate(G,U),f.scale(q,q),f.drawImage(W,B,N,Y,X,0,0,Y,X),f.restore())}}else K++,1===Z?$=(et.longest-et.lengths[K])/2:2===Z&&($=et.longest-et.lengths[K]),C=0,P+=S,V=null;f.restore()}}},function(t,i,n){var o=n(1),a=n(1);o=n(1050),a=n(1051),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,n){var o=n(25),a=n(12),u=new o;t.exports=function(t,i,n,o){var d=i.getRenderList();if(0!==d.length){var f=n.alpha*i.alpha;if(0!==f){n.addToRenderList(i);var p=t.pipelines.set(this.pipeline,i),b=n.scrollX*i.scrollFactorX,S=n.scrollY*i.scrollFactorY,M=u.copyFrom(n.matrix);o&&(M.multiplyWithOffset(o,-b,-S),b=0,S=0);var C=i.x-b,P=i.y-S,R=-1,O=n.roundPixels;t.pipelines.preBatch(i);for(var B=0;B<d.length;B++){var N=d[B],Y=N.frame,X=N.alpha*f;if(0!==X){var G=Y.width,U=Y.height,V=C+N.x+Y.x,z=P+N.y+Y.y;N.flipX&&(G*=-1,V+=Y.width),N.flipY&&(U*=-1,z+=Y.height);var W=V+G,H=z+U,j=M.getX(V,z),q=M.getY(V,z),Z=M.getX(W,H),K=M.getY(W,H),$=a.getTintAppendFloatAlpha(N.tint,X);if(Y.sourceIndex!==R){var tt=p.setGameObject(i,Y);R=Y.sourceIndex}O&&(j=Math.round(j),q=Math.round(q),Z=Math.round(Z),K=Math.round(K)),p.batchQuad(i,j,q,j,K,Z,K,Z,q,Y.u0,Y.v0,Y.u1,Y.v1,$,$,$,$,!1,Y.glTexture,tt)&&(R=-1)}}t.pipelines.postBatch(i)}}}},function(t,i){t.exports=function(t,i,n,o){var a=i.getRenderList();if(0!==a.length){var u=t.currentContext,d=n.alpha*i.alpha;if(0!==d){n.addToRenderList(i),u.globalCompositeOperation=t.blendModes[i.blendMode],u.imageSmoothingEnabled=!(!t.antialias||i.frame.source.scaleMode);var f=i.x-n.scrollX*i.scrollFactorX,p=i.y-n.scrollY*i.scrollFactorY;u.save(),o&&o.copyToContext(u);for(var b=n.roundPixels,S=0;S<a.length;S++){var M=a[S],C=M.flipX||M.flipY,P=M.frame,R=P.canvasData,O=P.x,B=P.y,N=1,Y=1,X=M.alpha*d;0!==X&&(u.globalAlpha=X,C?(M.flipX&&(N=-1,O-=R.width),M.flipY&&(Y=-1,B-=R.height),u.save(),u.translate(M.x+f,M.y+p),u.scale(N,Y),u.drawImage(P.source.image,R.x,R.y,R.width,R.height,O,B,R.width,R.height),u.restore()):(b&&(O=Math.round(O),B=Math.round(B)),u.drawImage(P.source.image,R.x,R.y,R.width,R.height,O+M.x+f,B+M.y+p,R.width,R.height)))}u.restore()}}}},function(t,i,n){var o=n(1),a=n(1);o=n(1053),a=n(1054),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i){t.exports=function(t,i,n,o){n.addToRenderList(i);var a=i.list,u=a.length;if(0!==u){var d=i.localTransform;o?(d.loadIdentity(),d.multiply(o),d.translate(i.x,i.y),d.rotate(i.rotation),d.scale(i.scaleX,i.scaleY)):d.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY),t.pipelines.preBatch(i);var f=-1!==i.blendMode;f||t.setBlendMode(0);for(var p=i.alpha,b=i.scrollFactorX,S=i.scrollFactorY,M=0;M<u;M++){var C=a[M];if(C.willRender(n)){var P,R,O,B;if(void 0!==C.alphaTopLeft)P=C.alphaTopLeft,R=C.alphaTopRight,O=C.alphaBottomLeft,B=C.alphaBottomRight;else{var N=C.alpha;P=N,R=N,O=N,B=N}var Y=C.scrollFactorX,X=C.scrollFactorY;f||C.blendMode===t.currentBlendMode||t.setBlendMode(C.blendMode);var G=C.mask;G&&G.preRenderWebGL(t,C,n);var U=C.type;U!==t.currentType&&(t.newType=!0,t.currentType=U),t.nextTypeMatch=M<u-1&&a[M+1].type===t.currentType,C.setScrollFactor(Y*b,X*S),C.setAlpha(P*p,R*p,O*p,B*p),C.renderWebGL(t,C,n,d),C.setAlpha(P,R,O,B),C.setScrollFactor(Y,X),G&&G.postRenderWebGL(t,n),t.newType=!1}}t.pipelines.postBatch(i)}}},function(t,i){t.exports=function(t,i,n,o){n.addToRenderList(i);var a=i.list;if(0!==a.length){var u=i.localTransform;o?(u.loadIdentity(),u.multiply(o),u.translate(i.x,i.y),u.rotate(i.rotation),u.scale(i.scaleX,i.scaleY)):u.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY);var d=-1!==i.blendMode;d||t.setBlendMode(0);var f=i._alpha,p=i.scrollFactorX,b=i.scrollFactorY;i.mask&&i.mask.preRenderCanvas(t,null,n);for(var S=0;S<a.length;S++){var M=a[S];if(M.willRender(n)){var C=M.alpha,P=M.scrollFactorX,R=M.scrollFactorY;d||M.blendMode===t.currentBlendMode||t.setBlendMode(M.blendMode),M.setScrollFactor(P*p,R*b),M.setAlpha(C*f),M.renderCanvas(t,M,n,u),M.setAlpha(C),M.setScrollFactor(P,R)}}i.mask&&i.mask.postRenderCanvas(t)}}},function(t,i,n){var o=n(1),a=n(1);o=n(443),a=n(443),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i){t.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(t,i,n){var o=n(1),a=n(1);o=n(1058),a=n(1059),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,n){var o=n(19),a=n(25),u=n(12),d=new a;t.exports=function(t,i,n,a){var f=i.text,p=f.length;if(0!==p){n.addToRenderList(i);var b=t.pipelines.set(i.pipeline,i),S=o(i,n,a),M=S.sprite,C=S.calc,P=d,R=i.cropWidth>0||i.cropHeight>0;R&&(b.flush(),t.pushScissor(C.tx,C.ty,i.cropWidth*C.scaleX,i.cropHeight*C.scaleY));var O,B,N=i.frame.glTexture,Y=i.tintFill,X=u.getTintAppendFloatAlpha(i.tintTopLeft,n.alpha*i._alphaTL),G=u.getTintAppendFloatAlpha(i.tintTopRight,n.alpha*i._alphaTR),U=u.getTintAppendFloatAlpha(i.tintBottomLeft,n.alpha*i._alphaBL),V=u.getTintAppendFloatAlpha(i.tintBottomRight,n.alpha*i._alphaBR),z=b.setGameObject(i),W=0,H=0,j=0,q=0,Z=i.letterSpacing,K=0,$=0,tt=i.scrollX,et=i.scrollY,it=i.fontData,nt=it.chars,st=it.lineHeight,rt=i.fontSize/it.size,ot=0,at=i._align,ht=0,lt=0,ut=i.getTextBounds(!1);i.maxWidth>0&&(p=(f=ut.wrappedText).length);var ct=i._bounds.lines;1===at?lt=(ct.longest-ct.lengths[0])/2:2===at&&(lt=ct.longest-ct.lengths[0]);var dt=n.roundPixels,ft=i.displayCallback,pt=i.callbackData;t.pipelines.preBatch(i);for(var gt=0;gt<p;gt++)if(10!==(j=f.charCodeAt(gt))){if(O=nt[j]){K=O.width,$=O.height;var vt=O.xOffset+W-tt,mt=O.yOffset+H-et;if(null!==B){var yt=O.kerning[q];vt+=void 0!==yt?yt:0}if(W+=O.xAdvance+Z,B=O,q=j,0!==K&&0!==$&&32!==j){if(rt=i.fontSize/i.fontData.size,ot=0,ft){pt.color=0,pt.tint.topLeft=X,pt.tint.topRight=G,pt.tint.bottomLeft=U,pt.tint.bottomRight=V,pt.index=gt,pt.charCode=j,pt.x=vt,pt.y=mt,pt.scale=rt,pt.rotation=ot,pt.data=O.data;var xt=ft(pt);vt=xt.x,mt=xt.y,rt=xt.scale,ot=xt.rotation,xt.color?(X=xt.color,G=xt.color,U=xt.color,V=xt.color):(X=xt.tint.topLeft,G=xt.tint.topRight,U=xt.tint.bottomLeft,V=xt.tint.bottomRight),X=u.getTintAppendFloatAlpha(X,n.alpha*i._alphaTL),G=u.getTintAppendFloatAlpha(G,n.alpha*i._alphaTR),U=u.getTintAppendFloatAlpha(U,n.alpha*i._alphaBL),V=u.getTintAppendFloatAlpha(V,n.alpha*i._alphaBR)}vt*=rt,mt*=rt,vt-=i.displayOriginX,mt-=i.displayOriginY,vt+=lt,P.applyITRS(vt,mt,ot,rt,rt),C.multiply(P,M);var Tt=O.u0,wt=O.v0,bt=O.u1,St=O.v1,Et=K,Mt=$,Ct=M.e,At=M.f,Pt=Mt*M.c+M.e,_t=Mt*M.d+M.f,Rt=Et*M.a+Mt*M.c+M.e,Ot=Et*M.b+Mt*M.d+M.f,Lt=Et*M.a+M.e,kt=Et*M.b+M.f;dt&&(Ct=Math.round(Ct),At=Math.round(At),Pt=Math.round(Pt),_t=Math.round(_t),Rt=Math.round(Rt),Ot=Math.round(Ot),Lt=Math.round(Lt),kt=Math.round(kt)),b.batchQuad(i,Ct,At,Pt,_t,Rt,Ot,Lt,kt,Tt,wt,bt,St,X,G,U,V,Y,N,z)}}}else ht++,1===at?lt=(ct.longest-ct.lengths[ht])/2:2===at&&(lt=ct.longest-ct.lengths[ht]),W=0,H+=st,B=null;R&&(b.flush(),t.popScissor()),t.pipelines.postBatch(i)}}},function(t,i,n){var o=n(30);t.exports=function(t,i,n,a){var u=i._text,d=u.length,f=t.currentContext;if(0!==d&&o(t,f,i,n,a)){n.addToRenderList(i);var p=i.fromAtlas?i.frame:i.texture.frames.__BASE,b=i.displayCallback,S=i.callbackData,M=i.fontData.chars,C=i.fontData.lineHeight,P=i._letterSpacing,R=0,O=0,B=0,N=null,Y=0,X=0,G=0,U=0,V=0,z=0,W=null,H=0,j=i.frame.source.image,q=p.cutX,Z=p.cutY,K=0,$=0,tt=i._fontSize/i.fontData.size,et=i._align,it=0,nt=0;i.getTextBounds(!1);var st=i._bounds.lines;1===et?nt=(st.longest-st.lengths[0])/2:2===et&&(nt=st.longest-st.lengths[0]),f.translate(-i.displayOriginX,-i.displayOriginY);var rt=n.roundPixels;i.cropWidth>0&&i.cropHeight>0&&(f.beginPath(),f.rect(0,0,i.cropWidth,i.cropHeight),f.clip());for(var ot=0;ot<d;ot++)if($=tt,K=0,10!==(B=u.charCodeAt(ot))){if(N=M[B]){if(Y=q+N.x,X=Z+N.y,G=N.width,U=N.height,V=N.xOffset+R-i.scrollX,z=N.yOffset+O-i.scrollY,null!==W){var at=N.kerning[H];V+=void 0!==at?at:0}if(b){S.index=ot,S.charCode=B,S.x=V,S.y=z,S.scale=$,S.rotation=K,S.data=N.data;var ht=b(S);V=ht.x,z=ht.y,$=ht.scale,K=ht.rotation}V*=$,z*=$,V+=nt,R+=N.xAdvance+P,W=N,H=B,0!==G&&0!==U&&32!==B&&(rt&&(V=Math.round(V),z=Math.round(z)),f.save(),f.translate(V,z),f.rotate(K),f.scale($,$),f.drawImage(j,Y,X,G,U,0,0,G,U),f.restore())}}else it++,1===et?nt=(st.longest-st.lengths[it])/2:2===et&&(nt=st.longest-st.lengths[it]),R=0,O+=C,W=null;f.restore()}}},function(t,i,n){var o=n(1),a=n(1);o=n(1061),a=n(1062),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,n){var o=n(19);t.exports=function(t,i,n,a){t.pipelines.clear();var u=o(i,n,a).calc;i.render.call(i,t,n,u),t.pipelines.rebind()}},function(t,i){},function(t,i,n){var o=n(1),a=n(1);o=n(1064),n(448),a=n(448),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,n){var o=n(217),a=n(19),u=n(25),d=n(12),Point3=function(t,i,n){this.x=t,this.y=i,this.width=n},Path=function(t,i,n){this.points=[],this.pointsLength=1,this.points[0]=new Point3(t,i,n)},f=[],p=new u;t.exports=function(t,i,n,u){if(0!==i.commandBuffer.length){n.addToRenderList(i);var b=t.pipelines.set(i.pipeline,i);t.pipelines.preBatch(i);for(var S=a(i,n,u).calc,M=p.loadIdentity(),C=i.commandBuffer,P=n.alpha*i.alpha,R=1,O=b.fillTint,B=b.strokeTint,N=0,Y=0,X=0,G=2*Math.PI,U=[],V=0,z=!0,W=null,H=d.getTintAppendFloatAlpha,j=0;j<C.length;j++)switch(C[j]){case o.BEGIN_PATH:U.length=0,W=null,z=!0;break;case o.CLOSE_PATH:z=!1,W&&W.points.length&&W.points.push(W.points[0]);break;case o.FILL_PATH:for(V=0;V<U.length;V++)b.batchFillPath(U[V].points,M,S);break;case o.STROKE_PATH:for(V=0;V<U.length;V++)b.batchStrokePath(U[V].points,R,z,M,S);break;case o.LINE_STYLE:R=C[++j];var q=H(C[++j],C[++j]*P);B.TL=q,B.TR=q,B.BL=q,B.BR=q;break;case o.FILL_STYLE:var Z=H(C[++j],C[++j]*P);O.TL=Z,O.TR=Z,O.BL=Z,O.BR=Z;break;case o.GRADIENT_FILL_STYLE:var K=C[++j]*P,$=C[++j]*P,tt=C[++j]*P,et=C[++j]*P;O.TL=H(C[++j],K),O.TR=H(C[++j],$),O.BL=H(C[++j],tt),O.BR=H(C[++j],et);break;case o.GRADIENT_LINE_STYLE:R=C[++j];var it=C[++j]*P;B.TL=H(C[++j],it),B.TR=H(C[++j],it),B.BL=H(C[++j],it),B.BR=H(C[++j],it);break;case o.ARC:var nt=0,st=C[++j],rt=C[++j],ot=C[++j],at=C[++j],ht=C[++j],lt=C[++j],ut=C[++j];for(ht-=at,lt?ht<-G?ht=-G:ht>0&&(ht=ht%G-G):ht>G?ht=G:ht<0&&(ht=G+ht%G),null===W&&(W=new Path(st+Math.cos(at)*ot,rt+Math.sin(at)*ot,R),U.push(W),nt+=.01);nt<1+ut;)X=ht*nt+at,N=st+Math.cos(X)*ot,Y=rt+Math.sin(X)*ot,W.points.push(new Point3(N,Y,R)),nt+=.01;X=ht+at,N=st+Math.cos(X)*ot,Y=rt+Math.sin(X)*ot,W.points.push(new Point3(N,Y,R));break;case o.FILL_RECT:b.batchFillRect(C[++j],C[++j],C[++j],C[++j],M,S);break;case o.FILL_TRIANGLE:b.batchFillTriangle(C[++j],C[++j],C[++j],C[++j],C[++j],C[++j],M,S);break;case o.STROKE_TRIANGLE:b.batchStrokeTriangle(C[++j],C[++j],C[++j],C[++j],C[++j],C[++j],R,M,S);break;case o.LINE_TO:null!==W?W.points.push(new Point3(C[++j],C[++j],R)):(W=new Path(C[++j],C[++j],R),U.push(W));break;case o.MOVE_TO:W=new Path(C[++j],C[++j],R),U.push(W);break;case o.SAVE:f.push(M.copyToArray());break;case o.RESTORE:M.copyFromArray(f.pop());break;case o.TRANSLATE:st=C[++j],rt=C[++j],M.translate(st,rt);break;case o.SCALE:st=C[++j],rt=C[++j],M.scale(st,rt);break;case o.ROTATE:M.rotate(C[++j])}t.pipelines.postBatch(i)}}},function(t,i,n){var o=n(1),a=n(1);o=n(1066),a=n(1067),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i){t.exports=function(t,i,n,o){n.addToRenderList(i),i.pipeline.batchSprite(i,n,o)}},function(t,i){t.exports=function(t,i,n,o){n.addToRenderList(i),t.batchSprite(i,i.frame,n,o)}},function(t,i,n){var o=n(1),a=n(1);o=n(1069),a=n(1070),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i){t.exports=function(t,i,n,o){n.addToRenderList(i),this.pipeline.batchSprite(i,n,o)}},function(t,i){t.exports=function(t,i,n,o){n.addToRenderList(i),t.batchSprite(i,i.frame,n,o)}},function(t,i,n){var o=n(1),a=n(1);o=n(1072),a=n(1073),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i){t.exports=function(t,i,n){var o=i.list,a=o.length;if(0!==a){i.depthSort(),t.pipelines.preBatch(i);var u=-1!==i.blendMode;u||t.setBlendMode(0);for(var d=i.alpha,f=0;f<a;f++){var p=o[f];if(p.willRender(n)){var b,S,M,C;if(void 0!==p.alphaTopLeft)b=p.alphaTopLeft,S=p.alphaTopRight,M=p.alphaBottomLeft,C=p.alphaBottomRight;else{var P=p.alpha;b=P,S=P,M=P,C=P}u||p.blendMode===t.currentBlendMode||t.setBlendMode(p.blendMode);var R=p.mask;R&&R.preRenderWebGL(t,p,n);var O=p.type;O!==t.currentType&&(t.newType=!0,t.currentType=O),t.nextTypeMatch=f<a-1&&o[f+1].type===t.currentType,p.setAlpha(b*d,S*d,M*d,C*d),p.renderWebGL(t,p,n),p.setAlpha(b,S,M,C),R&&R.postRenderWebGL(t,n),t.newType=!1}}t.pipelines.postBatch(i)}}},function(t,i){t.exports=function(t,i,n){var o=i.list;if(0!==o.length){i.depthSort();var a=-1!==i.blendMode;a||t.setBlendMode(0);var u=i._alpha;i.mask&&i.mask.preRenderCanvas(t,null,n);for(var d=0;d<o.length;d++){var f=o[d];if(f.willRender(n)){var p=f.alpha;a||f.blendMode===t.currentBlendMode||t.setBlendMode(f.blendMode),f.setAlpha(p*u),f.renderCanvas(t,f,n),f.setAlpha(p)}}i.mask&&i.mask.postRenderCanvas(t)}}},function(t,i,n){t.exports={EmitterOp:n(449),GravityWell:n(450),Particle:n(451),ParticleEmitter:n(452),ParticleEmitterManager:n(220),Zones:n(1078)}},function(t,i,n){var o=n(1),a=n(1);o=n(1076),a=n(1077),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,n){var o=n(25),a=n(12),u=new o,d=new o,f=new o,p=new o;t.exports=function(t,i,n,o){var b=i.emitters.list,S=b.length;if(0!==S){var M=t.pipelines.set(i.pipeline),C=u,P=d,R=f,O=p;o?(O.loadIdentity(),O.multiply(o),O.translate(i.x,i.y),O.rotate(i.rotation),O.scale(i.scaleX,i.scaleY)):O.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY);var B=n.roundPixels,N=i.defaultFrame.glTexture,Y=a.getTintAppendFloatAlpha,X=M.setGameObject(i,i.defaultFrame);t.pipelines.preBatch(i);for(var G=0;G<S;G++){var U=b[G],V=U.alive,z=V.length;if(U.visible&&0!==z){n.addToRenderList(U);var W=U.scrollFactorX,H=U.scrollFactorY;t.setBlendMode(U.blendMode),U.mask&&(U.mask.preRenderWebGL(t,U,n),t.pipelines.set(i.pipeline));for(var j=0;j<z;j++){var q=V[j],Z=q.alpha*n.alpha;if(!(Z<=0)){R.applyITRS(q.x,q.y,q.rotation,q.scaleX,q.scaleY),C.copyFrom(n.matrix),C.multiplyWithOffset(O,-n.scrollX*W,-n.scrollY*H),R.e=q.x,R.f=q.y,C.multiply(R,P);var K=q.frame,$=-K.halfWidth,tt=-K.halfHeight,et=$+K.width,it=tt+K.height,nt=P.getXRound($,tt,B),st=P.getYRound($,tt,B),rt=P.getXRound($,it,B),ot=P.getYRound($,it,B),at=P.getXRound(et,it,B),ht=P.getYRound(et,it,B),lt=P.getXRound(et,tt,B),ut=P.getYRound(et,tt,B),ct=Y(q.tint,Z);M.batchQuad(U,nt,st,rt,ot,at,ht,lt,ut,K.u0,K.v0,K.u1,K.v1,ct,ct,ct,ct,0,N,X)}}U.mask&&U.mask.postRenderWebGL(t,n)}}t.pipelines.postBatch(i)}}},function(t,i,n){var o=n(25),a=new o,u=new o,d=new o,f=new o;t.exports=function(t,i,n,o){var p=i.emitters.list,b=p.length;if(0!==b){var S=a.copyFrom(n.matrix),M=u,C=d,P=f;o?(P.loadIdentity(),P.multiply(o),P.translate(i.x,i.y),P.rotate(i.rotation),P.scale(i.scaleX,i.scaleY)):P.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY);for(var R=t.currentContext,O=n.roundPixels,B=0;B<b;B++){var N=p[B],Y=N.alive,X=Y.length;if(N.visible&&0!==X){n.addToRenderList(N);var G=N.scrollFactorX,U=N.scrollFactorY;R.save(),R.globalCompositeOperation=t.blendModes[N.blendMode];for(var V=0;V<X;V++){var z=Y[V],W=z.alpha*n.alpha;if(!(W<=0)){C.applyITRS(z.x,z.y,z.rotation,z.scaleX,z.scaleY),S.copyFrom(n.matrix),S.multiplyWithOffset(P,-n.scrollX*G,-n.scrollY*U),C.e=z.x,C.f=z.y,S.multiply(C,M);var H=z.frame,j=H.canvasData,q=-H.halfWidth,Z=-H.halfHeight;R.globalAlpha=W,R.save(),M.setToContext(R),O&&(q=Math.round(q),Z=Math.round(Z)),R.imageSmoothingEnabled=!(!t.antialias||H.source.scaleMode),R.drawImage(H.source.image,j.x,j.y,j.width,j.height,q,Z,j.width,j.height),R.restore()}}R.restore()}}}}},function(t,i,n){t.exports={DeathZone:n(453),EdgeZone:n(454),RandomZone:n(456)}},function(t,i,n){var o=n(1),a=n(1);o=n(1080),a=n(1081),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,n){var o=n(12);t.exports=function(t,i,n,a){n.addToRenderList(i);var u=n.alpha,d=i.renderTarget,f=d.width,p=d.height,b=o.getTintAppendFloatAlpha,S=t.pipelines.set(i.pipeline),M=S.setTexture2D(d.texture);t.pipelines.preBatch(i),S.batchTexture(i,d.texture,f,p,i.x,i.y,f,p,i.scaleX,i.scaleY,i.rotation,i.flipX,!i.flipY,i.scrollFactorX,i.scrollFactorY,i.displayOriginX,i.displayOriginY,0,0,f,p,b(i.tintTopLeft,u*i._alphaTL),b(i.tintTopRight,u*i._alphaTR),b(i.tintBottomLeft,u*i._alphaBL),b(i.tintBottomRight,u*i._alphaBR),i.tintFill,0,0,n,a,!0,M),t.resetTextures(),t.pipelines.postBatch(i)}},function(t,i){t.exports=function(t,i,n,o){n.addToRenderList(i),t.batchSprite(i,i.frame,n,o)}},function(t,i,n){var o=n(1083),a=n(17),u={Parse:n(1084)};u=a(!1,u,o),t.exports=u},function(t,i){var n={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:"ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",TEXT_SET7:"AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:"ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789"};t.exports=n},function(t,i,n){var o=n(6);t.exports=function(t,i){var n=i.width,a=i.height,u=Math.floor(n/2),d=Math.floor(a/2),f=o(i,"chars","");if(""!==f){var p=o(i,"image",""),b=t.sys.textures.getFrame(p),S=b.cutX,M=b.cutY,C=b.source.width,P=b.source.height,R=o(i,"offset.x",0),O=o(i,"offset.y",0),B=o(i,"spacing.x",0),N=o(i,"spacing.y",0),Y=o(i,"lineSpacing",0),X=o(i,"charsPerRow",null);null===X&&(X=C/n)>f.length&&(X=f.length);for(var G=R,U=O,V={retroFont:!0,font:p,size:n,lineHeight:a+Y,chars:{}},z=0,W=0;W<f.length;W++){var H=f.charCodeAt(W),j=(S+G)/C,q=(M+U)/P,Z=(S+G+n)/C,K=(M+U+a)/P;V.chars[H]={x:G,y:U,width:n,height:a,centerX:u,centerY:d,xOffset:0,yOffset:0,xAdvance:n,data:{},kerning:{},u0:j,v0:q,u1:Z,v1:K},++z===X?(z=0,G=R,U+=a+N):G+=n+B}return{data:V,frame:null,texture:p}}}},function(t,i,n){var o=n(1),a=n(1);o=n(1086),a=n(1087),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,n){var o=n(19),a=n(12);t.exports=function(t,i,n,u){n.addToRenderList(i);var d=t.pipelines.set(i.pipeline,i),f=o(i,n,u).calc,p=i.vertices,b=i.uv,S=i.colors,M=i.alphas,C=i.alpha,P=a.getTintAppendFloatAlpha,R=n.roundPixels,O=p.length,B=Math.floor(.5*O);d.flush(),t.pipelines.preBatch(i);var N=d.setGameObject(i),Y=d.vertexViewF32,X=d.vertexViewU32,G=d.vertexCount*d.currentShader.vertexComponentCount-1,U=0,V=i.tintFill;i.dirty&&i.updateVertices();for(var z=i.debugCallback,W=[],H=0;H<O;H+=2){var j=p[H+0],q=p[H+1],Z=j*f.a+q*f.c+f.e,K=j*f.b+q*f.d+f.f;R&&(Z=Math.round(Z),K=Math.round(K)),Y[++G]=Z,Y[++G]=K,Y[++G]=b[H+0],Y[++G]=b[H+1],Y[++G]=N,Y[++G]=V,X[++G]=P(S[U],n.alpha*(M[U]*C)),U++,z&&(W[H+0]=Z,W[H+1]=K)}z&&z.call(i,i,O,W),d.vertexCount+=B,t.pipelines.postBatch(i)}},function(t,i){t.exports=function(){}},function(t,i,n){var o=n(1),a=n(1);o=n(1089),a=n(1090),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,n){var o=n(12);t.exports=function(t,i,n,a){if(0!==i.width&&0!==i.height){n.addToRenderList(i);var u=i.frame,d=u.width,f=u.height,p=o.getTintAppendFloatAlpha,b=t.pipelines.set(i.pipeline,i),S=b.setTexture2D(u.glTexture,i);t.pipelines.preBatch(i),b.batchTexture(i,u.glTexture,d,f,i.x,i.y,d/i.style.resolution,f/i.style.resolution,i.scaleX,i.scaleY,i.rotation,i.flipX,i.flipY,i.scrollFactorX,i.scrollFactorY,i.displayOriginX,i.displayOriginY,0,0,d,f,p(i.tintTopLeft,n.alpha*i._alphaTL),p(i.tintTopRight,n.alpha*i._alphaTR),p(i.tintBottomLeft,n.alpha*i._alphaBL),p(i.tintBottomRight,n.alpha*i._alphaBR),i.tintFill,0,0,n,a,!1,S),t.pipelines.postBatch(i)}}},function(t,i){t.exports=function(t,i,n,o){0!==i.width&&0!==i.height&&(n.addToRenderList(i),t.batchSprite(i,i.frame,n,o))}},function(t,i,n){var o=n(1),a=n(1);o=n(1092),a=n(1093),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,n){var o=n(12);t.exports=function(t,i,n,a){i.updateCanvas();var u=i.width,d=i.height;if(0!==u&&0!==d){n.addToRenderList(i),t.pipelines.preBatch(i);var f=o.getTintAppendFloatAlpha,p=t.pipelines.set(i.pipeline,i),b=p.setTexture2D(i.fillPattern,i);p.batchTexture(i,i.fillPattern,i.displayFrame.width*i.tileScaleX,i.displayFrame.height*i.tileScaleY,i.x,i.y,u,d,i.scaleX,i.scaleY,i.rotation,i.flipX,i.flipY,i.scrollFactorX,i.scrollFactorY,i.originX*u,i.originY*d,0,0,u,d,f(i.tintTopLeft,n.alpha*i._alphaTL),f(i.tintTopRight,n.alpha*i._alphaTR),f(i.tintBottomLeft,n.alpha*i._alphaBL),f(i.tintBottomRight,n.alpha*i._alphaBR),i.tintFill,i.tilePositionX%i.displayFrame.width/i.displayFrame.width,i.tilePositionY%i.displayFrame.height/i.displayFrame.height,n,a,!1,b),t.pipelines.postBatch(i)}}},function(t,i){t.exports=function(t,i,n,o){i.updateCanvas(),n.addToRenderList(i),t.batchSprite(i,i.frame,n,o)}},function(t,i,n){var o=n(1),a=n(1);o=n(1095),a=n(1096),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i){t.exports=function(t,i,n,o){i.videoTexture&&(n.addToRenderList(i),i.pipeline.batchSprite(i,n,o))}},function(t,i){t.exports=function(t,i,n,o){i.videoTexture&&(n.addToRenderList(i),t.batchSprite(i,i.frame,n,o))}},function(t,i,n){var o=n(1),a=n(1);o=n(1098),a=n(1099),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,n){var o=n(19),a=n(114),u=n(81);t.exports=function(t,i,n,d){n.addToRenderList(i);var f=t.pipelines.set(i.pipeline),p=o(i,n,d),b=f.calcMatrix.copyFrom(p.calc),S=i._displayOriginX,M=i._displayOriginY,C=n.alpha*i.alpha;t.pipelines.preBatch(i),i.isFilled&&a(f,b,i,C,S,M),i.isStroked&&u(f,i,C,S,M),t.pipelines.postBatch(i)}},function(t,i,n){var o=n(36),a=n(48),u=n(60),d=n(30);t.exports=function(t,i,n,f){n.addToRenderList(i);var p=t.currentContext;if(d(t,p,i,n,f)){var b=i.radius;p.beginPath(),p.arc(b-i.originX*(2*b),b-i.originY*(2*b),b,o(i._startAngle),o(i._endAngle),i.anticlockwise),i.closePath&&p.closePath(),i.isFilled&&(a(p,i),p.fill()),i.isStroked&&(u(p,i),p.stroke()),p.restore()}}},function(t,i,n){var o=n(1),a=n(1);o=n(1101),a=n(1102),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,n){var o=n(114),a=n(19),u=n(81);t.exports=function(t,i,n,d){n.addToRenderList(i);var f=t.pipelines.set(i.pipeline),p=a(i,n,d),b=f.calcMatrix.copyFrom(p.calc),S=i._displayOriginX+i._curveBounds.x,M=i._displayOriginY+i._curveBounds.y,C=n.alpha*i.alpha;t.pipelines.preBatch(i),i.isFilled&&o(f,b,i,C,S,M),i.isStroked&&u(f,i,C,S,M),t.pipelines.postBatch(i)}},function(t,i,n){var o=n(48),a=n(60),u=n(30);t.exports=function(t,i,n,d){n.addToRenderList(i);var f=t.currentContext;if(u(t,f,i,n,d)){var p=i._displayOriginX+i._curveBounds.x,b=i._displayOriginY+i._curveBounds.y,S=i.pathData,M=S.length-1,C=S[0]-p,P=S[1]-b;f.beginPath(),f.moveTo(C,P),i.closePath||(M-=2);for(var R=2;R<M;R+=2){var O=S[R]-p,B=S[R+1]-b;f.lineTo(O,B)}i.closePath&&f.closePath(),i.isFilled&&(o(f,i),f.fill()),i.isStroked&&(a(f,i),f.stroke()),f.restore()}}},function(t,i,n){var o=n(1),a=n(1);o=n(1104),a=n(1105),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,n){var o=n(114),a=n(19),u=n(81);t.exports=function(t,i,n,d){n.addToRenderList(i);var f=t.pipelines.set(i.pipeline),p=a(i,n,d),b=f.calcMatrix.copyFrom(p.calc),S=i._displayOriginX,M=i._displayOriginY,C=n.alpha*i.alpha;t.pipelines.preBatch(i),i.isFilled&&o(f,b,i,C,S,M),i.isStroked&&u(f,i,C,S,M),t.pipelines.postBatch(i)}},function(t,i,n){var o=n(48),a=n(60),u=n(30);t.exports=function(t,i,n,d){n.addToRenderList(i);var f=t.currentContext;if(u(t,f,i,n,d)){var p=i._displayOriginX,b=i._displayOriginY,S=i.pathData,M=S.length-1,C=S[0]-p,P=S[1]-b;f.beginPath(),f.moveTo(C,P),i.closePath||(M-=2);for(var R=2;R<M;R+=2){var O=S[R]-p,B=S[R+1]-b;f.lineTo(O,B)}f.closePath(),i.isFilled&&(o(f,i),f.fill()),i.isStroked&&(a(f,i),f.stroke()),f.restore()}}},function(t,i,n){var o=n(1),a=n(1);o=n(1107),a=n(1108),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,n){var o=n(19),a=n(12);t.exports=function(t,i,n,u){n.addToRenderList(i);var d=t.pipelines.set(i.pipeline),f=o(i,n,u);d.calcMatrix.copyFrom(f.calc).translate(-i._displayOriginX,-i._displayOriginY);var p,b,S=n.alpha*i.alpha,M=i.width,C=i.height,P=i.cellWidth,R=i.cellHeight,O=Math.ceil(M/P),B=Math.ceil(C/R),N=P,Y=R,X=P-(O*P-M),G=R-(B*R-C),U=i.showCells,V=i.showAltCells,z=i.showOutline,W=0,H=0,j=0,q=0,Z=0;if(z&&(N--,Y--,X===P&&X--,G===R&&G--),t.pipelines.preBatch(i),U&&i.fillAlpha>0)for(p=d.fillTint,b=a.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*S),p.TL=b,p.TR=b,p.BL=b,p.BR=b,H=0;H<B;H++)for(V&&(j=H%2),W=0;W<O;W++)V&&j?j=0:(j++,q=W<O-1?N:X,Z=H<B-1?Y:G,d.batchFillRect(W*P,H*R,q,Z));if(V&&i.altFillAlpha>0)for(p=d.fillTint,b=a.getTintAppendFloatAlpha(i.altFillColor,i.altFillAlpha*S),p.TL=b,p.TR=b,p.BL=b,p.BR=b,H=0;H<B;H++)for(V&&(j=H%2),W=0;W<O;W++)!V||j?(j=0,q=W<O-1?N:X,Z=H<B-1?Y:G,d.batchFillRect(W*P,H*R,q,Z)):j=1;if(z&&i.outlineFillAlpha>0){var K=d.strokeTint,$=a.getTintAppendFloatAlpha(i.outlineFillColor,i.outlineFillAlpha*S);for(K.TL=$,K.TR=$,K.BL=$,K.BR=$,W=1;W<O;W++){var tt=W*P;d.batchLine(tt,0,tt,C,1,1,1,0,!1)}for(H=1;H<B;H++){var et=H*R;d.batchLine(0,et,M,et,1,1,1,0,!1)}}t.pipelines.postBatch(i)}},function(t,i,n){var o=n(48),a=n(60),u=n(30);t.exports=function(t,i,n,d){n.addToRenderList(i);var f=t.currentContext;if(u(t,f,i,n,d)){var p=-i._displayOriginX,b=-i._displayOriginY,S=n.alpha*i.alpha,M=i.width,C=i.height,P=i.cellWidth,R=i.cellHeight,O=Math.ceil(M/P),B=Math.ceil(C/R),N=P,Y=R,X=P-(O*P-M),G=R-(B*R-C),U=i.showCells,V=i.showAltCells,z=i.showOutline,W=0,H=0,j=0,q=0,Z=0;if(z&&(N--,Y--,X===P&&X--,G===R&&G--),U&&i.fillAlpha>0)for(o(f,i),H=0;H<B;H++)for(V&&(j=H%2),W=0;W<O;W++)V&&j?j=0:(j++,q=W<O-1?N:X,Z=H<B-1?Y:G,f.fillRect(p+W*P,b+H*R,q,Z));if(V&&i.altFillAlpha>0)for(o(f,i,i.altFillColor,i.altFillAlpha*S),H=0;H<B;H++)for(V&&(j=H%2),W=0;W<O;W++)!V||j?(j=0,q=W<O-1?N:X,Z=H<B-1?Y:G,f.fillRect(p+W*P,b+H*R,q,Z)):j=1;if(z&&i.outlineFillAlpha>0){for(a(f,i,i.outlineFillColor,i.outlineFillAlpha*S),W=1;W<O;W++){var K=W*P;f.beginPath(),f.moveTo(K+p,b),f.lineTo(K+p,C+b),f.stroke()}for(H=1;H<B;H++){var $=H*R;f.beginPath(),f.moveTo(p,$+b),f.lineTo(p+M,$+b),f.stroke()}}f.restore()}}},function(t,i,n){var o=n(1),a=n(1);o=n(1110),a=n(1111),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,n){var o=n(19),a=n(12);t.exports=function(t,i,n,u){n.addToRenderList(i);var d,f,p,b,S,M,C,P,R,O=t.pipelines.set(i.pipeline),B=o(i,n,u),N=O.calcMatrix.copyFrom(B.calc),Y=i.width,X=i.height,G=Y/2,U=Y/i.projection,V=n.alpha*i.alpha;i.isFilled&&(t.pipelines.preBatch(i),i.showTop&&(d=a.getTintAppendFloatAlpha(i.fillTop,V),f=N.getX(-G,-X),p=N.getY(-G,-X),b=N.getX(0,-U-X),S=N.getY(0,-U-X),M=N.getX(G,-X),C=N.getY(G,-X),P=N.getX(0,U-X),R=N.getY(0,U-X),O.batchQuad(i,f,p,b,S,M,C,P,R,0,0,1,1,d,d,d,d,2)),i.showLeft&&(d=a.getTintAppendFloatAlpha(i.fillLeft,V),f=N.getX(-G,0),p=N.getY(-G,0),b=N.getX(0,U),S=N.getY(0,U),M=N.getX(0,U-X),C=N.getY(0,U-X),P=N.getX(-G,-X),R=N.getY(-G,-X),O.batchQuad(i,f,p,b,S,M,C,P,R,0,0,1,1,d,d,d,d,2)),i.showRight&&(d=a.getTintAppendFloatAlpha(i.fillRight,V),f=N.getX(G,0),p=N.getY(G,0),b=N.getX(0,U),S=N.getY(0,U),M=N.getX(0,U-X),C=N.getY(0,U-X),P=N.getX(G,-X),R=N.getY(G,-X),O.batchQuad(i,f,p,b,S,M,C,P,R,0,0,1,1,d,d,d,d,2)),t.pipelines.postBatch(i))}},function(t,i,n){var o=n(48),a=n(30);t.exports=function(t,i,n,u){n.addToRenderList(i);var d=t.currentContext;if(a(t,d,i,n,u)&&i.isFilled){var f=i.width,p=i.height,b=f/2,S=f/i.projection;i.showTop&&(o(d,i,i.fillTop),d.beginPath(),d.moveTo(-b,-p),d.lineTo(0,-S-p),d.lineTo(b,-p),d.lineTo(b,-1),d.lineTo(0,S-1),d.lineTo(-b,-1),d.lineTo(-b,-p),d.fill()),i.showLeft&&(o(d,i,i.fillLeft),d.beginPath(),d.moveTo(-b,0),d.lineTo(0,S),d.lineTo(0,S-p),d.lineTo(-b,-p),d.lineTo(-b,0),d.fill()),i.showRight&&(o(d,i,i.fillRight),d.beginPath(),d.moveTo(b,0),d.lineTo(0,S),d.lineTo(0,S-p),d.lineTo(b,-p),d.lineTo(b,0),d.fill()),d.restore()}}},function(t,i,n){var o=n(1),a=n(1);o=n(1113),a=n(1114),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,n){var o=n(19),a=n(12);t.exports=function(t,i,n,u){n.addToRenderList(i);var d=t.pipelines.set(i.pipeline),f=o(i,n,u),p=d.calcMatrix.copyFrom(f.calc),b=i.width,S=i.height,M=b/2,C=b/i.projection,P=i.isReversed,R=n.alpha*i.alpha;if(i.isFilled){var O,B,N,Y,X,G,U;if(t.pipelines.preBatch(i),i.showTop&&P){O=a.getTintAppendFloatAlpha(i.fillTop,R),B=p.getX(-M,-S),N=p.getY(-M,-S),Y=p.getX(0,-C-S),X=p.getY(0,-C-S),G=p.getX(M,-S),U=p.getY(M,-S);var V=p.getX(0,C-S),z=p.getY(0,C-S);d.batchQuad(i,B,N,Y,X,G,U,V,z,0,0,1,1,O,O,O,O,2)}i.showLeft&&(O=a.getTintAppendFloatAlpha(i.fillLeft,R),P?(B=p.getX(-M,-S),N=p.getY(-M,-S),Y=p.getX(0,C),X=p.getY(0,C),G=p.getX(0,C-S),U=p.getY(0,C-S)):(B=p.getX(-M,0),N=p.getY(-M,0),Y=p.getX(0,C),X=p.getY(0,C),G=p.getX(0,C-S),U=p.getY(0,C-S)),d.batchTri(i,B,N,Y,X,G,U,0,0,1,1,O,O,O,2)),i.showRight&&(O=a.getTintAppendFloatAlpha(i.fillRight,R),P?(B=p.getX(M,-S),N=p.getY(M,-S),Y=p.getX(0,C),X=p.getY(0,C),G=p.getX(0,C-S),U=p.getY(0,C-S)):(B=p.getX(M,0),N=p.getY(M,0),Y=p.getX(0,C),X=p.getY(0,C),G=p.getX(0,C-S),U=p.getY(0,C-S)),d.batchTri(i,B,N,Y,X,G,U,0,0,1,1,O,O,O,2)),t.pipelines.postBatch(i)}}},function(t,i,n){var o=n(48),a=n(30);t.exports=function(t,i,n,u){n.addToRenderList(i);var d=t.currentContext;if(a(t,d,i,n,u)&&i.isFilled){var f=i.width,p=i.height,b=f/2,S=f/i.projection,M=i.isReversed;i.showTop&&M&&(o(d,i,i.fillTop),d.beginPath(),d.moveTo(-b,-p),d.lineTo(0,-S-p),d.lineTo(b,-p),d.lineTo(0,S-p),d.fill()),i.showLeft&&(o(d,i,i.fillLeft),d.beginPath(),M?(d.moveTo(-b,-p),d.lineTo(0,S),d.lineTo(0,S-p)):(d.moveTo(-b,0),d.lineTo(0,S),d.lineTo(0,S-p)),d.fill()),i.showRight&&(o(d,i,i.fillRight),d.beginPath(),M?(d.moveTo(b,-p),d.lineTo(0,S),d.lineTo(0,S-p)):(d.moveTo(b,0),d.lineTo(0,S),d.lineTo(0,S-p)),d.fill()),d.restore()}}},function(t,i,n){var o=n(1),a=n(1);o=n(1116),a=n(1117),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,n){var o=n(19),a=n(12);t.exports=function(t,i,n,u){n.addToRenderList(i);var d=t.pipelines.set(i.pipeline),f=o(i,n,u);d.calcMatrix.copyFrom(f.calc);var p=i._displayOriginX,b=i._displayOriginY,S=n.alpha*i.alpha;if(t.pipelines.preBatch(i),i.isStroked){var M=d.strokeTint,C=a.getTintAppendFloatAlpha(i.strokeColor,i.strokeAlpha*S);M.TL=C,M.TR=C,M.BL=C,M.BR=C;var P=i._startWidth,R=i._endWidth;d.batchLine(i.geom.x1-p,i.geom.y1-b,i.geom.x2-p,i.geom.y2-b,P,R,1,0,!1,f.sprite,f.camera)}t.pipelines.postBatch(i)}},function(t,i,n){var o=n(60),a=n(30);t.exports=function(t,i,n,u){n.addToRenderList(i);var d=t.currentContext;if(a(t,d,i,n,u)){var f=i._displayOriginX,p=i._displayOriginY;i.isStroked&&(o(d,i),d.beginPath(),d.moveTo(i.geom.x1-f,i.geom.y1-p),d.lineTo(i.geom.x2-f,i.geom.y2-p),d.stroke()),d.restore()}}},function(t,i,n){var o=n(1),a=n(1);o=n(1119),a=n(1120),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,n){var o=n(114),a=n(19),u=n(81);t.exports=function(t,i,n,d){n.addToRenderList(i);var f=t.pipelines.set(i.pipeline),p=a(i,n,d),b=f.calcMatrix.copyFrom(p.calc),S=i._displayOriginX,M=i._displayOriginY,C=n.alpha*i.alpha;t.pipelines.preBatch(i),i.isFilled&&o(f,b,i,C,S,M),i.isStroked&&u(f,i,C,S,M),t.pipelines.postBatch(i)}},function(t,i,n){var o=n(48),a=n(60),u=n(30);t.exports=function(t,i,n,d){n.addToRenderList(i);var f=t.currentContext;if(u(t,f,i,n,d)){var p=i._displayOriginX,b=i._displayOriginY,S=i.pathData,M=S.length-1,C=S[0]-p,P=S[1]-b;f.beginPath(),f.moveTo(C,P),i.closePath||(M-=2);for(var R=2;R<M;R+=2){var O=S[R]-p,B=S[R+1]-b;f.lineTo(O,B)}f.closePath(),i.isFilled&&(o(f,i),f.fill()),i.isStroked&&(a(f,i),f.stroke()),f.restore()}}},function(t,i,n){var o=n(1),a=n(1);o=n(1122),a=n(1123),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,n){var o=n(19),a=n(81),u=n(12);t.exports=function(t,i,n,d){n.addToRenderList(i);var f=t.pipelines.set(i.pipeline),p=o(i,n,d);f.calcMatrix.copyFrom(p.calc);var b=i._displayOriginX,S=i._displayOriginY,M=n.alpha*i.alpha;if(t.pipelines.preBatch(i),i.isFilled){var C=f.fillTint,P=u.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*M);C.TL=P,C.TR=P,C.BL=P,C.BR=P,f.batchFillRect(-b,-S,i.width,i.height)}i.isStroked&&a(f,i,M,b,S),t.pipelines.postBatch(i)}},function(t,i,n){var o=n(48),a=n(60),u=n(30);t.exports=function(t,i,n,d){n.addToRenderList(i);var f=t.currentContext;if(u(t,f,i,n,d)){var p=i._displayOriginX,b=i._displayOriginY;i.isFilled&&(o(f,i),f.fillRect(-p,-b,i.width,i.height)),i.isStroked&&(a(f,i),f.beginPath(),f.rect(-p,-b,i.width,i.height),f.stroke()),f.restore()}}},function(t,i,n){var o=n(1),a=n(1);o=n(1125),a=n(1126),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,n){var o=n(114),a=n(19),u=n(81);t.exports=function(t,i,n,d){n.addToRenderList(i);var f=t.pipelines.set(i.pipeline),p=a(i,n,d),b=f.calcMatrix.copyFrom(p.calc),S=i._displayOriginX,M=i._displayOriginY,C=n.alpha*i.alpha;t.pipelines.preBatch(i),i.isFilled&&o(f,b,i,C,S,M),i.isStroked&&u(f,i,C,S,M),t.pipelines.postBatch(i)}},function(t,i,n){var o=n(48),a=n(60),u=n(30);t.exports=function(t,i,n,d){n.addToRenderList(i);var f=t.currentContext;if(u(t,f,i,n,d)){var p=i._displayOriginX,b=i._displayOriginY,S=i.pathData,M=S.length-1,C=S[0]-p,P=S[1]-b;f.beginPath(),f.moveTo(C,P),i.closePath||(M-=2);for(var R=2;R<M;R+=2){var O=S[R]-p,B=S[R+1]-b;f.lineTo(O,B)}f.closePath(),i.isFilled&&(o(f,i),f.fill()),i.isStroked&&(a(f,i),f.stroke()),f.restore()}}},function(t,i,n){var o=n(1),a=n(1);o=n(1128),a=n(1129),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,n){var o=n(19),a=n(81),u=n(12);t.exports=function(t,i,n,d){n.addToRenderList(i);var f=t.pipelines.set(i.pipeline),p=o(i,n,d);f.calcMatrix.copyFrom(p.calc);var b=i._displayOriginX,S=i._displayOriginY,M=n.alpha*i.alpha;if(t.pipelines.preBatch(i),i.isFilled){var C=f.fillTint,P=u.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*M);C.TL=P,C.TR=P,C.BL=P,C.BR=P;var R=i.geom.x1-b,O=i.geom.y1-S,B=i.geom.x2-b,N=i.geom.y2-S,Y=i.geom.x3-b,X=i.geom.y3-S;f.batchFillTriangle(R,O,B,N,Y,X,p.sprite,p.camera)}i.isStroked&&a(f,i,M,b,S),t.pipelines.postBatch(i)}},function(t,i,n){var o=n(48),a=n(60),u=n(30);t.exports=function(t,i,n,d){n.addToRenderList(i);var f=t.currentContext;if(u(t,f,i,n,d)){var p=i._displayOriginX,b=i._displayOriginY,S=i.geom.x1-p,M=i.geom.y1-b,C=i.geom.x2-p,P=i.geom.y2-b,R=i.geom.x3-p,O=i.geom.y3-b;f.beginPath(),f.moveTo(S,M),f.lineTo(C,P),f.lineTo(R,O),f.closePath(),i.isFilled&&(o(f,i),f.fill()),i.isStroked&&(a(f,i),f.stroke()),f.restore()}}},function(t,i,n){var o=n(213);n(5).register("blitter",(function(t,i,n,a){return this.displayList.add(new o(this.scene,t,i,n,a))}))},function(t,i,n){var o=n(214);n(5).register("container",(function(t,i,n){return this.displayList.add(new o(this.scene,t,i,n))}))},function(t,i,n){var o=n(442);n(5).register("dom",(function(t,i,n,a,u){var d=new o(this.scene,t,i,n,a,u);return this.displayList.add(d),d}))},function(t,i,n){var o=n(215);n(5).register("dynamicBitmapText",(function(t,i,n,a,u){return this.displayList.add(new o(this.scene,t,i,n,a,u))}))},function(t,i,n){var o=n(444);n(5).register("extern",(function(){var t=new o(this.scene);return this.displayList.add(t),t}))},function(t,i,n){var o=n(216);n(5).register("graphics",(function(t){return this.displayList.add(new o(this.scene,t))}))},function(t,i,n){var o=n(113);n(5).register("group",(function(t,i){return this.updateList.add(new o(this.scene,t,i))}))},function(t,i,n){var o=n(125);n(5).register("image",(function(t,i,n,a){return this.displayList.add(new o(this.scene,t,i,n,a))}))},function(t,i,n){var o=n(219);n(5).register("layer",(function(t){return this.displayList.add(new o(this.scene,t))}))},function(t,i,n){var o=n(5),a=n(220);o.register("particles",(function(t,i,n){return this.displayList.add(new a(this.scene,t,i,n))}))},function(t,i,n){var o=n(5),a=n(457);o.register("follower",(function(t,i,n,o,u){var d=new a(this.scene,t,i,n,o,u);return this.displayList.add(d),this.updateList.add(d),d}))},function(t,i,n){var o=n(5),a=n(221);o.register("renderTexture",(function(t,i,n,o,u,d){return this.displayList.add(new a(this.scene,t,i,n,o,u,d))}))},function(t,i,n){var o=n(223);n(5).register("rope",(function(t,i,n,a,u,d,f,p){return this.displayList.add(new o(this.scene,t,i,n,a,u,d,f,p))}))},function(t,i,n){var o=n(5),a=n(73);o.register("sprite",(function(t,i,n,o){var u=new a(this.scene,t,i,n,o);return this.displayList.add(u),u}))},function(t,i,n){var o=n(148);n(5).register("bitmapText",(function(t,i,n,a,u,d){return this.displayList.add(new o(this.scene,t,i,n,a,u,d))}))},function(t,i,n){var o=n(224);n(5).register("text",(function(t,i,n,a){return this.displayList.add(new o(this.scene,t,i,n,a))}))},function(t,i,n){var o=n(225);n(5).register("tileSprite",(function(t,i,n,a,u,d){return this.displayList.add(new o(this.scene,t,i,n,a,u,d))}))},function(t,i,n){var o=n(129);n(5).register("zone",(function(t,i,n,a){return this.displayList.add(new o(this.scene,t,i,n,a))}))},function(t,i,n){var o=n(226);n(5).register("video",(function(t,i,n){return this.displayList.add(new o(this.scene,t,i,n))}))},function(t,i,n){var o=n(461),a=n(5);a.register("arc",(function(t,i,n,a,u,d,f,p){return this.displayList.add(new o(this.scene,t,i,n,a,u,d,f,p))})),a.register("circle",(function(t,i,n,a,u){return this.displayList.add(new o(this.scene,t,i,n,0,360,!1,a,u))}))},function(t,i,n){var o=n(5),a=n(462);o.register("curve",(function(t,i,n,o,u){return this.displayList.add(new a(this.scene,t,i,n,o,u))}))},function(t,i,n){var o=n(463);n(5).register("ellipse",(function(t,i,n,a,u,d){return this.displayList.add(new o(this.scene,t,i,n,a,u,d))}))},function(t,i,n){var o=n(5),a=n(464);o.register("grid",(function(t,i,n,o,u,d,f,p,b,S){return this.displayList.add(new a(this.scene,t,i,n,o,u,d,f,p,b,S))}))},function(t,i,n){var o=n(5),a=n(465);o.register("isobox",(function(t,i,n,o,u,d,f){return this.displayList.add(new a(this.scene,t,i,n,o,u,d,f))}))},function(t,i,n){var o=n(5),a=n(466);o.register("isotriangle",(function(t,i,n,o,u,d,f,p){return this.displayList.add(new a(this.scene,t,i,n,o,u,d,f,p))}))},function(t,i,n){var o=n(5),a=n(467);o.register("line",(function(t,i,n,o,u,d,f,p){return this.displayList.add(new a(this.scene,t,i,n,o,u,d,f,p))}))},function(t,i,n){var o=n(5),a=n(468);o.register("polygon",(function(t,i,n,o,u){return this.displayList.add(new a(this.scene,t,i,n,o,u))}))},function(t,i,n){var o=n(5),a=n(473);o.register("rectangle",(function(t,i,n,o,u,d){return this.displayList.add(new a(this.scene,t,i,n,o,u,d))}))},function(t,i,n){var o=n(474);n(5).register("star",(function(t,i,n,a,u,d,f){return this.displayList.add(new o(this.scene,t,i,n,a,u,d,f))}))},function(t,i,n){var o=n(5),a=n(475);o.register("triangle",(function(t,i,n,o,u,d,f,p,b,S){return this.displayList.add(new a(this.scene,t,i,n,o,u,d,f,p,b,S))}))},function(t,i,n){var o=n(213),a=n(28),u=n(16),d=n(13);u.register("blitter",(function(t,i){void 0===t&&(t={});var n=d(t,"key",null),u=d(t,"frame",null),f=new o(this.scene,0,0,n,u);return void 0!==i&&(t.add=i),a(this.scene,f,t),f}))},function(t,i,n){var o=n(28),a=n(214),u=n(16),d=n(13);u.register("container",(function(t,i){void 0===t&&(t={});var n=d(t,"x",0),u=d(t,"y",0),f=d(t,"children",null),p=new a(this.scene,n,u,f);return void 0!==i&&(t.add=i),o(this.scene,p,t),p}))},function(t,i,n){var o=n(215),a=n(28),u=n(16),d=n(13);u.register("dynamicBitmapText",(function(t,i){void 0===t&&(t={});var n=d(t,"font",""),u=d(t,"text",""),f=d(t,"size",!1),p=new o(this.scene,0,0,n,u,f);return void 0!==i&&(t.add=i),a(this.scene,p,t),p}))},function(t,i,n){var o=n(16),a=n(216);o.register("graphics",(function(t,i){void 0===t&&(t={}),void 0!==i&&(t.add=i);var n=new a(this.scene,t);return t.add&&this.scene.sys.displayList.add(n),n}))},function(t,i,n){var o=n(16),a=n(113);o.register("group",(function(t){return new a(this.scene,null,t)}))},function(t,i,n){var o=n(28),a=n(16),u=n(13),d=n(125);a.register("image",(function(t,i){void 0===t&&(t={});var n=u(t,"key",null),a=u(t,"frame",null),f=new d(this.scene,0,0,n,a);return void 0!==i&&(t.add=i),o(this.scene,f,t),f}))},function(t,i,n){var o=n(28),a=n(219),u=n(16),d=n(13);u.register("layer",(function(t,i){void 0===t&&(t={});var n=d(t,"children",null),u=new a(this.scene,n);return void 0!==i&&(t.add=i),o(this.scene,u,t),u}))},function(t,i,n){var o=n(16),a=n(13),u=n(2),d=n(220);o.register("particles",(function(t,i){void 0===t&&(t={});var n=a(t,"key",null),o=a(t,"frame",null),f=u(t,"emitters",null),p=new d(this.scene,n,o,f);return void 0!==i&&(t.add=i),u(t,"add",!1)?this.displayList.add(p):this.updateList.add(p),p}))},function(t,i,n){var o=n(28),a=n(16),u=n(13),d=n(221);a.register("renderTexture",(function(t,i){void 0===t&&(t={});var n=u(t,"x",0),a=u(t,"y",0),f=u(t,"width",32),p=u(t,"height",32),b=u(t,"key",void 0),S=u(t,"frame",void 0),M=new d(this.scene,n,a,f,p,b,S);return void 0!==i&&(t.add=i),o(this.scene,M,t),M}))},function(t,i,n){var o=n(28),a=n(16),u=n(13),d=n(6),f=n(223);a.register("rope",(function(t,i){void 0===t&&(t={});var n=u(t,"key",null),a=u(t,"frame",null),p=u(t,"horizontal",!0),b=d(t,"points",void 0),S=d(t,"colors",void 0),M=d(t,"alphas",void 0),C=new f(this.scene,0,0,n,a,b,p,S,M);return void 0!==i&&(t.add=i),o(this.scene,C,t),t.add||this.updateList.add(C),C}))},function(t,i,n){var o=n(28),a=n(439),u=n(16),d=n(13),f=n(73);u.register("sprite",(function(t,i){void 0===t&&(t={});var n=d(t,"key",null),u=d(t,"frame",null),p=new f(this.scene,0,0,n,u);return void 0!==i&&(t.add=i),o(this.scene,p,t),a(p,t),p}))},function(t,i,n){var o=n(148),a=n(28),u=n(16),d=n(13),f=n(6);u.register("bitmapText",(function(t,i){void 0===t&&(t={});var n=f(t,"font",""),u=d(t,"text",""),p=d(t,"size",!1),b=f(t,"align",0),S=new o(this.scene,0,0,n,u,p,b);return void 0!==i&&(t.add=i),a(this.scene,S,t),S}))},function(t,i,n){var o=n(28),a=n(16),u=n(13),d=n(224);a.register("text",(function(t,i){void 0===t&&(t={});var n=u(t,"text",""),a=u(t,"style",null),f=u(t,"padding",null);null!==f&&(a.padding=f);var p=new d(this.scene,0,0,n,a);return void 0!==i&&(t.add=i),o(this.scene,p,t),p.autoRound=u(t,"autoRound",!0),p.resolution=u(t,"resolution",1),p}))},function(t,i,n){var o=n(28),a=n(16),u=n(13),d=n(225);a.register("tileSprite",(function(t,i){void 0===t&&(t={});var n=u(t,"x",0),a=u(t,"y",0),f=u(t,"width",512),p=u(t,"height",512),b=u(t,"key",""),S=u(t,"frame",""),M=new d(this.scene,n,a,f,p,b,S);return void 0!==i&&(t.add=i),o(this.scene,M,t),M}))},function(t,i,n){var o=n(16),a=n(13),u=n(129);o.register("zone",(function(t){var i=a(t,"x",0),n=a(t,"y",0),o=a(t,"width",1),d=a(t,"height",o);return new u(this.scene,i,n,o,d)}))},function(t,i,n){var o=n(28),a=n(16),u=n(13),d=n(226);a.register("video",(function(t,i){void 0===t&&(t={});var n=u(t,"key",null),a=new d(this.scene,0,0,n);return void 0!==i&&(t.add=i),o(this.scene,a,t),t.add||this.updateList.add(a),a}))},function(t,i,n){var o=n(1),a=n(1);o=n(1177),a=n(1178),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,n){var o=n(19);t.exports=function(t,i,n,a){if(i.shader){if(n.addToRenderList(i),t.pipelines.clear(),i.renderToTexture)i.load(),i.flush();else{var u=o(i,n,a).calc;t.width===i._rendererWidth&&t.height===i._rendererHeight||i.projOrtho(0,t.width,t.height,0),i.load(u.matrix),i.flush()}t.pipelines.rebind()}}},function(t,i){t.exports=function(){}},function(t,i,n){var o=n(1),a=n(1);o=n(1180),a=n(1181),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,n){var o=n(19);t.exports=function(t,i,n,a){var u=i.faces,d=u.length;if(0!==d){n.addToRenderList(i);var f=t.pipelines.set(i.pipeline,i),p=o(i,n,a).calc,b=f.setGameObject(i),S=f.vertexViewF32,M=f.vertexViewU32,C=f.vertexCount*f.currentShader.vertexComponentCount-1,P=i.tintFill,R=[],O=i.debugCallback,B=p.a,N=p.b,Y=p.c,X=p.d,G=p.e,U=p.f,V=i.viewPosition.z,z=i.hideCCW,W=n.roundPixels,H=n.alpha*i.alpha,j=0;t.pipelines.preBatch(i);for(var q=0;q<d;q++){var Z=u[q];Z.isInView(n,z,V,H,B,N,Y,X,G,U,W)&&(f.shouldFlush(3)&&(f.flush(),C=0),C=Z.load(S,M,C,b,P),j++,f.vertexCount+=3,O&&R.push(Z))}i.totalFrame+=j,O&&O.call(i,i,R),t.pipelines.postBatch(i)}}},function(t,i){t.exports=function(){}},function(t,i,n){var o=n(1),a=n(1);o=n(1183),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,n){var o=n(19);t.exports=function(t,i,n,a){n.addToRenderList(i);var u=t.pipelines.set(i.pipeline),d=o(i,n,a).calc,f=i.width,p=i.height,b=-i._radius,S=-i._radius,M=b+f,C=S+p,P=d.getX(0,0),R=d.getY(0,0),O=d.getX(b,S),B=d.getY(b,S),N=d.getX(b,C),Y=d.getY(b,C),X=d.getX(M,C),G=d.getY(M,C),U=d.getX(M,S),V=d.getY(M,S);t.pipelines.preBatch(i),u.batchPointLight(i,n,O,B,N,Y,X,G,U,V,P,R),t.pipelines.postBatch(i)}},function(t,i,n){var o=n(229);n(5).register("shader",(function(t,i,n,a,u,d,f){return this.displayList.add(new o(this.scene,t,i,n,a,u,d,f))}))},function(t,i,n){var o=n(230);n(5).register("mesh",(function(t,i,n,a,u,d,f,p,b,S,M){return this.displayList.add(new o(this.scene,t,i,n,a,u,d,f,p,b,S,M))}))},function(t,i,n){var o=n(5),a=n(150);o.register("pointlight",(function(t,i,n,o,u,d){return this.displayList.add(new a(this.scene,t,i,n,o,u,d))}))},function(t,i,n){var o=n(28),a=n(16),u=n(13),d=n(229);a.register("shader",(function(t,i){void 0===t&&(t={});var n=u(t,"key",null),a=u(t,"x",0),f=u(t,"y",0),p=u(t,"width",128),b=u(t,"height",128),S=new d(this.scene,n,a,f,p,b);return void 0!==i&&(t.add=i),o(this.scene,S,t),S}))},function(t,i,n){var o=n(28),a=n(16),u=n(13),d=n(6),f=n(230);a.register("mesh",(function(t,i){void 0===t&&(t={});var n=u(t,"key",null),a=u(t,"frame",null),p=d(t,"vertices",[]),b=d(t,"uvs",[]),S=d(t,"indicies",[]),M=d(t,"containsZ",!1),C=d(t,"normals",[]),P=d(t,"colors",16777215),R=d(t,"alphas",1),O=new f(this.scene,0,0,n,a,p,b,S,M,C,P,R);return void 0!==i&&(t.add=i),o(this.scene,O,t),O}))},function(t,i,n){var o=n(28),a=n(16),u=n(13),d=n(150);a.register("pointlight",(function(t,i){void 0===t&&(t={});var n=u(t,"color",16777215),a=u(t,"radius",128),f=u(t,"intensity",1),p=u(t,"attenuation",.1),b=new d(this.scene,0,0,n,a,f,p);return void 0!==i&&(t.add=i),o(this.scene,b,t),b}))},function(t,i,n){var o=n(0),a=n(482),u=n(24),d=n(20),f=new o({Extends:a,initialize:function LightsPlugin2(t){this.scene=t,this.systems=t.sys,t.sys.settings.isBooted||t.sys.events.once(d.BOOT,this.boot,this),a.call(this)},boot:function(){var t=this.systems.events;t.on(d.SHUTDOWN,this.shutdown,this),t.on(d.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});u.register("LightsPlugin",f,"lights"),t.exports=f},function(t,i,n){var o=n(65);o.Area=n(1192),o.Circumference=n(302),o.CircumferencePoint=n(169),o.Clone=n(1193),o.Contains=n(66),o.ContainsPoint=n(1194),o.ContainsRect=n(1195),o.CopyFrom=n(1196),o.Equals=n(1197),o.GetBounds=n(1198),o.GetPoint=n(300),o.GetPoints=n(301),o.Offset=n(1199),o.OffsetPoint=n(1200),o.Random=n(170),t.exports=o},function(t,i){t.exports=function(t){return t.radius>0?Math.PI*t.radius*t.radius:0}},function(t,i,n){var o=n(65);t.exports=function(t){return new o(t.x,t.y,t.radius)}},function(t,i,n){var o=n(66);t.exports=function(t,i){return o(t,i.x,i.y)}},function(t,i,n){var o=n(66);t.exports=function(t,i){return o(t,i.x,i.y)&&o(t,i.right,i.y)&&o(t,i.x,i.bottom)&&o(t,i.right,i.bottom)}},function(t,i){t.exports=function(t,i){return i.setTo(t.x,t.y,t.radius)}},function(t,i){t.exports=function(t,i){return t.x===i.x&&t.y===i.y&&t.radius===i.radius}},function(t,i,n){var o=n(10);t.exports=function(t,i){return void 0===i&&(i=new o),i.x=t.left,i.y=t.top,i.width=t.diameter,i.height=t.diameter,i}},function(t,i){t.exports=function(t,i,n){return t.x+=i,t.y+=n,t}},function(t,i){t.exports=function(t,i){return t.x+=i.x,t.y+=i.y,t}},function(t,i,n){var o=n(111);o.Area=n(1202),o.Circumference=n(447),o.CircumferencePoint=n(218),o.Clone=n(1203),o.Contains=n(112),o.ContainsPoint=n(1204),o.ContainsRect=n(1205),o.CopyFrom=n(1206),o.Equals=n(1207),o.GetBounds=n(1208),o.GetPoint=n(445),o.GetPoints=n(446),o.Offset=n(1209),o.OffsetPoint=n(1210),o.Random=n(180),t.exports=o},function(t,i){t.exports=function(t){return t.isEmpty()?0:t.getMajorRadius()*t.getMinorRadius()*Math.PI}},function(t,i,n){var o=n(111);t.exports=function(t){return new o(t.x,t.y,t.width,t.height)}},function(t,i,n){var o=n(112);t.exports=function(t,i){return o(t,i.x,i.y)}},function(t,i,n){var o=n(112);t.exports=function(t,i){return o(t,i.x,i.y)&&o(t,i.right,i.y)&&o(t,i.x,i.bottom)&&o(t,i.right,i.bottom)}},function(t,i){t.exports=function(t,i){return i.setTo(t.x,t.y,t.width,t.height)}},function(t,i){t.exports=function(t,i){return t.x===i.x&&t.y===i.y&&t.width===i.width&&t.height===i.height}},function(t,i,n){var o=n(10);t.exports=function(t,i){return void 0===i&&(i=new o),i.x=t.left,i.y=t.top,i.width=t.width,i.height=t.height,i}},function(t,i){t.exports=function(t,i,n){return t.x+=i,t.y+=n,t}},function(t,i){t.exports=function(t,i){return t.x+=i.x,t.y+=i.y,t}},function(t,i,n){var o=n(4),a=n(231);t.exports=function(t,i,n){if(void 0===n&&(n=[]),a(t,i)){var u,d,f,p,b=t.x,S=t.y,M=t.radius,C=i.x,P=i.y,R=i.radius;if(S===P)0==(f=(d=-2*P)*d-4*(u=1)*(C*C+(p=(R*R-M*M-C*C+b*b)/(2*(b-C)))*p-2*C*p+P*P-R*R))?n.push(new o(p,-d/(2*u))):f>0&&(n.push(new o(p,(-d+Math.sqrt(f))/(2*u))),n.push(new o(p,(-d-Math.sqrt(f))/(2*u))));else{var O=(b-C)/(S-P),B=(R*R-M*M-C*C+b*b-P*P+S*S)/(2*(S-P));0==(f=(d=2*S*O-2*B*O-2*b)*d-4*(u=O*O+1)*(b*b+S*S+B*B-M*M-2*S*B))?(p=-d/(2*u),n.push(new o(p,B-p*O))):f>0&&(p=(-d+Math.sqrt(f))/(2*u),n.push(new o(p,B-p*O)),p=(-d-Math.sqrt(f))/(2*u),n.push(new o(p,B-p*O)))}}return n}},function(t,i,n){var o=n(232),a=n(151);t.exports=function(t,i,n){if(void 0===n&&(n=[]),a(t,i)){var u=i.getLineA(),d=i.getLineB(),f=i.getLineC(),p=i.getLineD();o(u,t,n),o(d,t,n),o(f,t,n),o(p,t,n)}return n}},function(t,i,n){var o=n(140),a=n(487),u=new(n(47));function CheckIntersects(t,i,n,d,f){var p=Math.cos(t),b=Math.sin(t);u.setTo(i,n,i+p,n+b);var S=a(u,d);S&&f.push(new o(S.x,S.y,t,S.w))}function SortIntersects(t,i){return t.z-i.z}t.exports=function(t,i,n){Array.isArray(n)||(n=[n]);for(var o=[],a=[],u=0;u<n.length;u++)for(var d=n[u].points,f=0;f<d.length;f++){var p=Math.atan2(d[f].y-i,d[f].x-t);-1===a.indexOf(p)&&(CheckIntersects(p,t,i,n,o),CheckIntersects(p-1e-5,t,i,n,o),CheckIntersects(p+1e-5,t,i,n,o),a.push(p))}return o.sort(SortIntersects)}},function(t,i,n){var o=n(10),a=n(152);t.exports=function(t,i,n){return void 0===n&&(n=new o),a(t,i)&&(n.x=Math.max(t.x,i.x),n.y=Math.max(t.y,i.y),n.width=Math.min(t.right,i.right)-n.x,n.height=Math.min(t.bottom,i.bottom)-n.y),n}},function(t,i,n){var o=n(234),a=n(152);t.exports=function(t,i,n){if(void 0===n&&(n=[]),a(t,i)){var u=t.getLineA(),d=t.getLineB(),f=t.getLineC(),p=t.getLineD();o(u,i,n),o(d,i,n),o(f,i,n),o(p,i,n)}return n}},function(t,i,n){var o=n(489),a=n(234);t.exports=function(t,i,n){if(void 0===n&&(n=[]),o(t,i)){var u=i.getLineA(),d=i.getLineB(),f=i.getLineC();a(u,t,n),a(d,t,n),a(f,t,n)}return n}},function(t,i,n){var o=n(232),a=n(491);t.exports=function(t,i,n){if(void 0===n&&(n=[]),a(t,i)){var u=t.getLineA(),d=t.getLineB(),f=t.getLineC();o(u,i,n),o(d,i,n),o(f,i,n)}return n}},function(t,i,n){var o=n(494),a=n(492);t.exports=function(t,i,n){if(void 0===n&&(n=[]),o(t,i)){var u=i.getLineA(),d=i.getLineB(),f=i.getLineC();a(t,u,n),a(t,d,n),a(t,f,n)}return n}},function(t,i,n){var o=n(496);t.exports=function(t,i){if(!o(t,i))return!1;var n=Math.min(i.x1,i.x2),a=Math.max(i.x1,i.x2),u=Math.min(i.y1,i.y2),d=Math.max(i.y1,i.y2);return t.x>=n&&t.x<=a&&t.y>=u&&t.y<=d}},function(t,i){t.exports=function(t,i,n,o,a,u){return void 0===u&&(u=0),!(i>t.right+u||n<t.left-u||o>t.bottom+u||a<t.top-u)}},function(t,i,n){var o=n(47);o.Angle=n(97),o.BresenhamPoints=n(317),o.CenterOn=n(1222),o.Clone=n(1223),o.CopyFrom=n(1224),o.Equals=n(1225),o.Extend=n(1226),o.GetEasedPoints=n(1227),o.GetMidPoint=n(1228),o.GetNearestPoint=n(1229),o.GetNormal=n(1230),o.GetPoint=n(307),o.GetPoints=n(172),o.GetShortestDistance=n(1231),o.Height=n(1232),o.Length=n(67),o.NormalAngle=n(497),o.NormalX=n(1233),o.NormalY=n(1234),o.Offset=n(1235),o.PerpSlope=n(1236),o.Random=n(173),o.ReflectAngle=n(1237),o.Rotate=n(1238),o.RotateAroundPoint=n(1239),o.RotateAroundXY=n(236),o.SetToAngle=n(1240),o.Slope=n(1241),o.Width=n(1242),t.exports=o},function(t,i){t.exports=function(t,i,n){var o=i-(t.x1+t.x2)/2,a=n-(t.y1+t.y2)/2;return t.x1+=o,t.y1+=a,t.x2+=o,t.y2+=a,t}},function(t,i,n){var o=n(47);t.exports=function(t){return new o(t.x1,t.y1,t.x2,t.y2)}},function(t,i){t.exports=function(t,i){return i.setTo(t.x1,t.y1,t.x2,t.y2)}},function(t,i){t.exports=function(t,i){return t.x1===i.x1&&t.y1===i.y1&&t.x2===i.x2&&t.y2===i.y2}},function(t,i,n){var o=n(67);t.exports=function(t,i,n){void 0===n&&(n=i);var a=o(t),u=t.x2-t.x1,d=t.y2-t.y1;return i&&(t.x1=t.x1-u/a*i,t.y1=t.y1-d/a*i),n&&(t.x2=t.x2+u/a*n,t.y2=t.y2+d/a*n),t}},function(t,i,n){var o=n(352),a=n(80),u=n(4);t.exports=function(t,i,n,d,f){void 0===d&&(d=0),void 0===f&&(f=[]);var p,b,S=[],M=t.x1,C=t.y1,P=t.x2-M,R=t.y2-C,O=a(i,f),B=n-1;for(p=0;p<B;p++)b=O(p/B),S.push(new u(M+P*b,C+R*b));if(b=O(1),S.push(new u(M+P*b,C+R*b)),d>0){var N=S[0],Y=[N];for(p=1;p<S.length-1;p++){var X=S[p];o(N,X)>=d&&(Y.push(X),N=X)}var G=S[S.length-1];return o(N,G)<d&&Y.pop(),Y.push(G),Y}return S}},function(t,i,n){var o=n(4);t.exports=function(t,i){return void 0===i&&(i=new o),i.x=(t.x1+t.x2)/2,i.y=(t.y1+t.y2)/2,i}},function(t,i,n){var o=n(4);t.exports=function(t,i,n){void 0===n&&(n=new o);var a=t.x1,u=t.y1,d=t.x2,f=t.y2,p=(d-a)*(d-a)+(f-u)*(f-u);if(0===p)return n;var b=((i.x-a)*(d-a)+(i.y-u)*(f-u))/p;return n.x=a+b*(d-a),n.y=u+b*(f-u),n}},function(t,i,n){var o=n(14),a=n(97),u=n(4);t.exports=function(t,i){void 0===i&&(i=new u);var n=a(t)-o.TAU;return i.x=Math.cos(n),i.y=Math.sin(n),i}},function(t,i){t.exports=function(t,i){var n=t.x1,o=t.y1,a=t.x2,u=t.y2,d=(a-n)*(a-n)+(u-o)*(u-o);if(0===d)return!1;var f=((o-i.y)*(a-n)-(n-i.x)*(u-o))/d;return Math.abs(f)*Math.sqrt(d)}},function(t,i){t.exports=function(t){return Math.abs(t.y1-t.y2)}},function(t,i,n){var o=n(14),a=n(97);t.exports=function(t){return Math.cos(a(t)-o.TAU)}},function(t,i,n){var o=n(14),a=n(97);t.exports=function(t){return Math.sin(a(t)-o.TAU)}},function(t,i){t.exports=function(t,i,n){return t.x1+=i,t.y1+=n,t.x2+=i,t.y2+=n,t}},function(t,i){t.exports=function(t){return-(t.x2-t.x1)/(t.y2-t.y1)}},function(t,i,n){var o=n(97),a=n(497);t.exports=function(t,i){return 2*a(i)-Math.PI-o(t)}},function(t,i,n){var o=n(236);t.exports=function(t,i){var n=(t.x1+t.x2)/2,a=(t.y1+t.y2)/2;return o(t,n,a,i)}},function(t,i,n){var o=n(236);t.exports=function(t,i,n){return o(t,i.x,i.y,n)}},function(t,i){t.exports=function(t,i,n,o,a){return t.x1=i,t.y1=n,t.x2=i+Math.cos(o)*a,t.y2=n+Math.sin(o)*a,t}},function(t,i){t.exports=function(t){return(t.y2-t.y1)/(t.x2-t.x1)}},function(t,i){t.exports=function(t){return Math.abs(t.x1-t.x2)}},function(t,i,n){var o={Face:n(116),GenerateGridVerts:n(1244),GenerateObjVerts:n(480),GenerateVerts:n(479),ParseObj:n(498),ParseObjMaterial:n(499),RotateFace:n(1245),Vertex:n(117)};t.exports=o},function(t,i,n){var o=n(116),a=n(2),u=n(69),d=n(39),f=n(117),p=new d,b=new d,S=new u;t.exports=function(t){var i=a(t,"mesh"),n=a(t,"texture",null),u=a(t,"frame"),d=a(t,"width",1),M=a(t,"height",d),C=a(t,"widthSegments",1),P=a(t,"heightSegments",C),R=a(t,"x",0),O=a(t,"y",0),B=a(t,"z",0),N=a(t,"rotateX",0),Y=a(t,"rotateY",0),X=a(t,"rotateZ",0),G=a(t,"zIsUp",!0),U=a(t,"isOrtho",!!i&&i.dirtyCache[11]),V=a(t,"colors",[16777215]),z=a(t,"alphas",[1]),W=a(t,"tile",!1),H=a(t,"flipY",!1),j=a(t,"width",null),q={faces:[],verts:[]};if(p.set(R,O,B),b.set(N,Y,X),S.fromRotationXYTranslation(b,p,G),!n&&i)n=i.texture;else{if(!i||"string"!=typeof n)return q;n=i.scene.sys.textures.get(n)}var Z=n.get(u);!j&&U&&n&&i&&(d=Z.width/i.height,M=Z.height/i.height);var K,$,tt=d/2,et=M/2,it=Math.floor(C),nt=Math.floor(P),st=it+1,rt=nt+1,ot=d/it,at=M/nt,ht=[],lt=[],ut=0,ct=1,dt=0,ft=1;Z&&(ut=Z.u0,ct=Z.u1,H?(dt=Z.v1,ft=Z.v0):(dt=Z.v0,ft=Z.v1));var pt=ct-ut,gt=ft-dt;for($=0;$<rt;$++){var vt=$*at-et;for(K=0;K<st;K++){var mt=K*ot-tt;lt.push(mt,-vt);var yt=ut+pt*(K/it),xt=dt+gt*($/nt);ht.push(yt,xt)}}Array.isArray(V)||(V=[V]),Array.isArray(z)||(z=[z]);var Tt=0,wt=0;for($=0;$<nt;$++)for(K=0;K<it;K++){var bt=2*(K+st*$),St=2*(K+st*($+1)),Et=2*(K+1+st*($+1)),Mt=2*(K+1+st*$),Ct=V[wt],At=z[Tt],Pt=new f(lt[bt],lt[bt+1],0,ht[bt],ht[bt+1],Ct,At).transformMat4(S),_t=new f(lt[St],lt[St+1],0,ht[St],ht[St+1],Ct,At).transformMat4(S),Rt=new f(lt[Mt],lt[Mt+1],0,ht[Mt],ht[Mt+1],Ct,At).transformMat4(S),Ot=new f(lt[St],lt[St+1],0,ht[St],ht[St+1],Ct,At).transformMat4(S),Lt=new f(lt[Et],lt[Et+1],0,ht[Et],ht[Et+1],Ct,At).transformMat4(S),kt=new f(lt[Mt],lt[Mt+1],0,ht[Mt],ht[Mt+1],Ct,At).transformMat4(S);W&&(Pt.setUVs(ut,ft),_t.setUVs(ut,dt),Rt.setUVs(ct,ft),Ot.setUVs(ut,dt),Lt.setUVs(ct,dt),kt.setUVs(ct,ft)),++wt===V.length&&(wt=0),++Tt===z.length&&(Tt=0),q.verts.push(Pt,_t,Rt,Ot,Lt,kt),q.faces.push(new o(Pt,_t,Rt),new o(Ot,Lt,kt))}return i&&(i.faces=i.faces.concat(q.faces),i.vertices=i.vertices.concat(q.verts)),q}},function(t,i){t.exports=function(t,i,n,o){var a,u;if(void 0===n&&void 0===o){var d=t.getInCenter();a=d.x,u=d.y}var f=Math.cos(i),p=Math.sin(i),b=t.vertex1,S=t.vertex2,M=t.vertex3,C=b.x-a,P=b.y-u;b.set(C*f-P*p+a,C*p+P*f+u),C=S.x-a,P=S.y-u,S.set(C*f-P*p+a,C*p+P*f+u),C=M.x-a,P=M.y-u,M.set(C*f-P*p+a,C*p+P*f+u)}},function(t,i,n){var o=n(4);o.Ceil=n(1247),o.Clone=n(1248),o.CopyFrom=n(1249),o.Equals=n(1250),o.Floor=n(1251),o.GetCentroid=n(1252),o.GetMagnitude=n(500),o.GetMagnitudeSq=n(501),o.GetRectangleFromPoints=n(1253),o.Interpolate=n(1254),o.Invert=n(1255),o.Negative=n(1256),o.Project=n(1257),o.ProjectUnit=n(1258),o.SetMagnitude=n(1259),t.exports=o},function(t,i){t.exports=function(t){return t.setTo(Math.ceil(t.x),Math.ceil(t.y))}},function(t,i,n){var o=n(4);t.exports=function(t){return new o(t.x,t.y)}},function(t,i){t.exports=function(t,i){return i.setTo(t.x,t.y)}},function(t,i){t.exports=function(t,i){return t.x===i.x&&t.y===i.y}},function(t,i){t.exports=function(t){return t.setTo(Math.floor(t.x),Math.floor(t.y))}},function(t,i,n){var o=n(4);t.exports=function(t,i){if(void 0===i&&(i=new o),!Array.isArray(t))throw new Error("GetCentroid points argument must be an array");var n=t.length;if(n<1)throw new Error("GetCentroid points array must not be empty");if(1===n)i.x=t[0].x,i.y=t[0].y;else{for(var a=0;a<n;a++)i.x+=t[a].x,i.y+=t[a].y;i.x/=n,i.y/=n}return i}},function(t,i,n){var o=n(10);t.exports=function(t,i){void 0===i&&(i=new o);for(var n=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY,f=0;f<t.length;f++){var p=t[f];p.x>n&&(n=p.x),p.x<a&&(a=p.x),p.y>u&&(u=p.y),p.y<d&&(d=p.y)}return i.x=a,i.y=d,i.width=n-a,i.height=u-d,i}},function(t,i,n){var o=n(4);t.exports=function(t,i,n,a){return void 0===n&&(n=0),void 0===a&&(a=new o),a.x=t.x+(i.x-t.x)*n,a.y=t.y+(i.y-t.y)*n,a}},function(t,i){t.exports=function(t){return t.setTo(t.y,t.x)}},function(t,i,n){var o=n(4);t.exports=function(t,i){return void 0===i&&(i=new o),i.setTo(-t.x,-t.y)}},function(t,i,n){var o=n(4),a=n(501);t.exports=function(t,i,n){void 0===n&&(n=new o);var u=(t.x*i.x+t.y*i.y)/a(i);return 0!==u&&(n.x=u*i.x,n.y=u*i.y),n}},function(t,i,n){var o=n(4);t.exports=function(t,i,n){void 0===n&&(n=new o);var a=t.x*i.x+t.y*i.y;return 0!==a&&(n.x=a*i.x,n.y=a*i.y),n}},function(t,i,n){var o=n(500);t.exports=function(t,i){if(0!==t.x||0!==t.y){var n=o(t);t.x/=n,t.y/=n}return t.x*=i,t.y*=i,t}},function(t,i,n){var o=n(227);o.Clone=n(1261),o.Contains=n(228),o.ContainsPoint=n(1262),o.Earcut=n(59),o.GetAABB=n(469),o.GetNumberArray=n(1263),o.GetPoints=n(470),o.Perimeter=n(471),o.Reverse=n(1264),o.Simplify=n(1265),o.Smooth=n(472),o.Translate=n(1266),t.exports=o},function(t,i,n){var o=n(227);t.exports=function(t){return new o(t.points)}},function(t,i,n){var o=n(228);t.exports=function(t,i){return o(t,i.x,i.y)}},function(t,i){t.exports=function(t,i){void 0===i&&(i=[]);for(var n=0;n<t.points.length;n++)i.push(t.points[n].x),i.push(t.points[n].y);return i}},function(t,i){t.exports=function(t){return t.points.reverse(),t}},function(t,i){function getSqSegDist(t,i,n){var o=i.x,a=i.y,u=n.x-o,d=n.y-a;if(0!==u||0!==d){var f=((t.x-o)*u+(t.y-a)*d)/(u*u+d*d);f>1?(o=n.x,a=n.y):f>0&&(o+=u*f,a+=d*f)}return(u=t.x-o)*u+(d=t.y-a)*d}function simplifyDPStep(t,i,n,o,a){for(var u,d=o,f=i+1;f<n;f++){var p=getSqSegDist(t[f],t[i],t[n]);p>d&&(u=f,d=p)}d>o&&(u-i>1&&simplifyDPStep(t,i,u,o,a),a.push(t[u]),n-u>1&&simplifyDPStep(t,u,n,o,a))}function simplifyDouglasPeucker(t,i){var n=t.length-1,o=[t[0]];return simplifyDPStep(t,0,n,i,o),o.push(t[n]),o}t.exports=function(t,i,n){void 0===i&&(i=1),void 0===n&&(n=!1);var o=t.points;if(o.length>2){var a=i*i;n||(o=function simplifyRadialDist(t,i){for(var n,o,a,u,d,f=t[0],p=[f],b=1,S=t.length;b<S;b++)n=t[b],a=f,u=void 0,d=void 0,u=(o=n).x-a.x,d=o.y-a.y,u*u+d*d>i&&(p.push(n),f=n);return f!==n&&p.push(n),p}(o,a)),t.setTo(simplifyDouglasPeucker(o,a))}return t}},function(t,i){t.exports=function(t,i,n){for(var o=t.points,a=0;a<o.length;a++)o[a].x+=i,o[a].y+=n;return t}},function(t,i){t.exports=function(t){return t.width*t.height}},function(t,i){t.exports=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t}},function(t,i){t.exports=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t}},function(t,i,n){var o=n(10);t.exports=function(t){return new o(t.x,t.y,t.width,t.height)}},function(t,i,n){var o=n(57);t.exports=function(t,i){return o(t,i.x,i.y)}},function(t,i){t.exports=function(t,i){return i.setTo(t.x,t.y,t.width,t.height)}},function(t,i){t.exports=function(t,i){return t.x===i.x&&t.y===i.y&&t.width===i.width&&t.height===i.height}},function(t,i,n){var o=n(237);t.exports=function(t,i){var n=o(t);return n<o(i)?t.setSize(i.height*n,i.height):t.setSize(i.width,i.width/n),t.setPosition(i.centerX-t.width/2,i.centerY-t.height/2)}},function(t,i,n){var o=n(237);t.exports=function(t,i){var n=o(t);return n>o(i)?t.setSize(i.height*n,i.height):t.setSize(i.width,i.width/n),t.setPosition(i.centerX-t.width/2,i.centerY-t.height/2)}},function(t,i){t.exports=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t}},function(t,i){t.exports=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t.width=Math.floor(t.width),t.height=Math.floor(t.height),t}},function(t,i,n){var o=n(10);t.exports=function(t,i,n,a,u){return void 0===u&&(u=new o),u.setTo(Math.min(t,n),Math.min(i,a),Math.abs(t-n),Math.abs(i-a))}},function(t,i,n){var o=n(4);t.exports=function(t,i){return void 0===i&&(i=new o),i.x=t.centerX,i.y=t.centerY,i}},function(t,i,n){var o=n(4);t.exports=function(t,i){return void 0===i&&(i=new o),i.x=t.width,i.y=t.height,i}},function(t,i,n){var o=n(190);t.exports=function(t,i,n){var a=t.centerX,u=t.centerY;return t.setSize(t.width+2*i,t.height+2*n),o(t,a,u)}},function(t,i,n){var o=n(10),a=n(152);t.exports=function(t,i,n){return void 0===n&&(n=new o),a(t,i)?(n.x=Math.max(t.x,i.x),n.y=Math.max(t.y,i.y),n.width=Math.min(t.right,i.right)-n.x,n.height=Math.min(t.bottom,i.bottom)-n.y):n.setEmpty(),n}},function(t,i){t.exports=function(t,i){for(var n=t.x,o=t.right,a=t.y,u=t.bottom,d=0;d<i.length;d++)n=Math.min(n,i[d].x),o=Math.max(o,i[d].x),a=Math.min(a,i[d].y),u=Math.max(u,i[d].y);return t.x=n,t.y=a,t.width=o-n,t.height=u-a,t}},function(t,i){t.exports=function(t,i){var n=Math.min(t.x,i.x),o=Math.max(t.right,i.right);t.x=n,t.width=o-n;var a=Math.min(t.y,i.y),u=Math.max(t.bottom,i.bottom);return t.y=a,t.height=u-a,t}},function(t,i){t.exports=function(t,i,n){var o=Math.min(t.x,i),a=Math.max(t.right,i);t.x=o,t.width=a-o;var u=Math.min(t.y,n),d=Math.max(t.bottom,n);return t.y=u,t.height=d-u,t}},function(t,i){t.exports=function(t,i,n){return t.x+=i,t.y+=n,t}},function(t,i){t.exports=function(t,i){return t.x+=i.x,t.y+=i.y,t}},function(t,i){t.exports=function(t,i){return t.x<i.right&&t.right>i.x&&t.y<i.bottom&&t.bottom>i.y}},function(t,i,n){var o=n(4),a=n(36);t.exports=function(t,i,n){void 0===n&&(n=new o),i=a(i);var u=Math.sin(i),d=Math.cos(i),f=d>0?t.width/2:t.width/-2,p=u>0?t.height/2:t.height/-2;return Math.abs(f*u)<Math.abs(p*d)?p=f*u/d:f=p*d/u,n.x=f+t.centerX,n.y=p+t.centerY,n}},function(t,i,n){var o=n(195),a=n(503),u=n(4);t.exports=function(t,i,n){if(void 0===n&&(n=new u),a(t,i))switch(o(0,3)){case 0:n.x=t.x+Math.random()*(i.right-t.x),n.y=t.y+Math.random()*(i.top-t.y);break;case 1:n.x=i.x+Math.random()*(t.right-i.x),n.y=i.bottom+Math.random()*(t.bottom-i.bottom);break;case 2:n.x=t.x+Math.random()*(i.x-t.x),n.y=i.y+Math.random()*(t.bottom-i.y);break;case 3:n.x=i.right+Math.random()*(t.right-i.right),n.y=t.y+Math.random()*(i.bottom-t.y)}return n}},function(t,i){t.exports=function(t,i){return t.width===i.width&&t.height===i.height}},function(t,i){t.exports=function(t,i,n){return void 0===n&&(n=i),t.width*=i,t.height*=n,t}},function(t,i,n){var o=n(82);o.Area=n(1294),o.BuildEquilateral=n(1295),o.BuildFromPolygon=n(1296),o.BuildRight=n(1297),o.CenterOn=n(1298),o.Centroid=n(504),o.CircumCenter=n(1299),o.CircumCircle=n(1300),o.Clone=n(1301),o.Contains=n(115),o.ContainsArray=n(235),o.ContainsPoint=n(1302),o.CopyFrom=n(1303),o.Decompose=n(495),o.Equals=n(1304),o.GetPoint=n(476),o.GetPoints=n(477),o.InCenter=n(506),o.Perimeter=n(1305),o.Offset=n(505),o.Random=n(181),o.Rotate=n(1306),o.RotateAroundPoint=n(1307),o.RotateAroundXY=n(238),t.exports=o},function(t,i){t.exports=function(t){var i=t.x1,n=t.y1,o=t.x2,a=t.y2,u=t.x3,d=t.y3;return Math.abs(((u-i)*(a-n)-(o-i)*(d-n))/2)}},function(t,i,n){var o=n(82);t.exports=function(t,i,n){var a=n*(Math.sqrt(3)/2);return new o(t,i,t+n/2,i+a,t-n/2,i+a)}},function(t,i,n){var o=n(59),a=n(82);t.exports=function(t,i,n,u,d){void 0===i&&(i=null),void 0===n&&(n=1),void 0===u&&(u=1),void 0===d&&(d=[]);for(var f,p,b,S,M,C,P,R,O,B=o(t,i),N=0;N<B.length;N+=3)f=B[N],p=B[N+1],b=B[N+2],S=t[2*f]*n,M=t[2*f+1]*u,C=t[2*p]*n,P=t[2*p+1]*u,R=t[2*b]*n,O=t[2*b+1]*u,d.push(new a(S,M,C,P,R,O));return d}},function(t,i,n){var o=n(82);t.exports=function(t,i,n,a){return void 0===a&&(a=n),new o(t,i,t,i-a,t+n,i)}},function(t,i,n){var o=n(504),a=n(505);t.exports=function(t,i,n,u){void 0===u&&(u=o);var d=u(t),f=i-d.x,p=n-d.y;return a(t,f,p)}},function(t,i,n){var o=n(3);function det(t,i,n,o){return t*o-i*n}t.exports=function(t,i){void 0===i&&(i=new o);var n=t.x3,a=t.y3,u=t.x1-n,d=t.y1-a,f=t.x2-n,p=t.y2-a,b=2*det(u,d,f,p),S=det(d,u*u+d*d,p,f*f+p*p),M=det(u,u*u+d*d,f,f*f+p*p);return i.x=n-S/b,i.y=a+M/b,i}},function(t,i,n){var o=n(65);t.exports=function(t,i){void 0===i&&(i=new o);var n,a,u=t.x1,d=t.y1,f=t.x2,p=t.y2,b=t.x3,S=t.y3,M=f-u,C=p-d,P=b-u,R=S-d,O=M*(u+f)+C*(d+p),B=P*(u+b)+R*(d+S),N=2*(M*(S-p)-C*(b-f));if(Math.abs(N)<1e-6){var Y=Math.min(u,f,b),X=Math.min(d,p,S);n=.5*(Math.max(u,f,b)-Y),a=.5*(Math.max(d,p,S)-X),i.x=Y+n,i.y=X+a,i.radius=Math.sqrt(n*n+a*a)}else i.x=(R*O-C*B)/N,i.y=(M*B-P*O)/N,n=i.x-u,a=i.y-d,i.radius=Math.sqrt(n*n+a*a);return i}},function(t,i,n){var o=n(82);t.exports=function(t){return new o(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},function(t,i,n){var o=n(115);t.exports=function(t,i){return o(t,i.x,i.y)}},function(t,i){t.exports=function(t,i){return i.setTo(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},function(t,i){t.exports=function(t,i){return t.x1===i.x1&&t.y1===i.y1&&t.x2===i.x2&&t.y2===i.y2&&t.x3===i.x3&&t.y3===i.y3}},function(t,i,n){var o=n(67);t.exports=function(t){var i=t.getLineA(),n=t.getLineB(),a=t.getLineC();return o(i)+o(n)+o(a)}},function(t,i,n){var o=n(238),a=n(506);t.exports=function(t,i){var n=a(t);return o(t,n.x,n.y,i)}},function(t,i,n){var o=n(238);t.exports=function(t,i,n){return o(t,i.x,i.y,n)}},function(t,i,n){var o=n(203),a=n(17),u={CreatePixelPerfectHandler:n(507),CreateInteractiveObject:n(508),Events:n(51),Gamepad:n(1309),InputManager:n(409),InputPlugin:n(1321),InputPluginCache:n(153),Keyboard:n(1322),Mouse:n(1336),Pointer:n(412),Touch:n(1337)};u=a(!1,u,o),t.exports=u},function(t,i,n){t.exports={Axis:n(509),Button:n(510),Events:n(239),Gamepad:n(511),GamepadPlugin:n(1316),Configs:n(1317)}},function(t,i){t.exports="down"},function(t,i){t.exports="up"},function(t,i){t.exports="connected"},function(t,i){t.exports="disconnected"},function(t,i){t.exports="down"},function(t,i){t.exports="up"},function(t,i,n){var o=n(0),a=n(9),u=n(239),d=n(511),f=n(6),p=n(153),b=n(51),S=new o({Extends:a,initialize:function GamepadPlugin2(t){a.call(this),this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,t.pluginEvents.once(b.BOOT,this.boot,this),t.pluginEvents.on(b.START,this.start,this)},boot:function(){var t=this.scene.sys.game,i=this.settings.input,n=t.config;this.enabled=f(i,"gamepad",n.inputGamepad)&&t.device.input.gamepads,this.target=f(i,"gamepad.target",n.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(b.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(b.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var t=this,i=this.target,handler=function(i){!i.defaultPrevented&&t.isActive()&&(t.refreshPads(),t.queue.push(i))};this.onGamepadHandler=handler,i.addEventListener("gamepadconnected",handler,!1),i.addEventListener("gamepaddisconnected",handler,!1),this.sceneInputPlugin.pluginEvents.on(b.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(b.UPDATE,this.update);for(var t=0;t<this.gamepads.length;t++)this.gamepads[t].removeAllListeners()},disconnectAll:function(){for(var t=0;t<this.gamepads.length;t++)this.gamepads[t].pad.connected=!1},refreshPads:function(){var t=navigator.getGamepads();if(t)for(var i=this.gamepads,n=0;n<t.length;n++){var o=t[n];if(o){var a=o.id,u=o.index,f=i[u];if(f)f.id!==a?(f.destroy(),i[u]=new d(this,o)):f.update(o);else{var p=new d(this,o);i[u]=p,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=p):this._pad3=p:this._pad2=p:this._pad1=p}}}else this.disconnectAll()},getAll:function(){for(var t=[],i=this.gamepads,n=0;n<i.length;n++)i[n]&&t.push(i[n]);return t},getPad:function(t){for(var i=this.gamepads,n=0;n<i.length;n++)if(i[n]&&i[n].index===t)return i[n]},update:function(){if(this.enabled){this.refreshPads();var t=this.queue.length;if(0!==t)for(var i=this.queue.splice(0,t),n=0;n<t;n++){var o=i[n],a=this.getPad(o.gamepad.index);"gamepadconnected"===o.type?this.emit(u.CONNECTED,a,o):"gamepaddisconnected"===o.type&&this.emit(u.DISCONNECTED,a,o)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var t=0;t<this.gamepads.length;t++)this.gamepads[t]&&this.gamepads[t].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});p.register("GamepadPlugin",S,"gamepad","gamepad","inputGamepad"),t.exports=S},function(t,i,n){t.exports={DUALSHOCK_4:n(1318),SNES_USB:n(1319),XBOX_360:n(1320)}},function(t,i){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(t,i){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(t,i){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(t,i,n){var o=n(65),a=n(66),u=n(0),d=n(203),f=n(508),p=n(507),b=n(50),S=n(111),M=n(112),C=n(51),P=n(9),R=n(2),O=n(56),B=n(153),N=n(7),Y=n(24),X=n(10),G=n(57),U=n(20),V=n(82),z=n(115),W=new u({Extends:P,initialize:function InputPlugin2(t){P.call(this),this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.manager=t.sys.game.input,this.pluginEvents=new P,this.enabled=!0,this.displayList,this.cameras,B.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var i={cancelled:!1};this._eventContainer={stopPropagation:function(){i.cancelled=!0}},this._eventData=i,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,t.sys.events.once(U.BOOT,this.boot,this),t.sys.events.on(U.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(U.DESTROY,this.destroy,this),this.pluginEvents.emit(C.BOOT)},start:function(){var t=this.systems.events;t.on(U.TRANSITION_START,this.transitionIn,this),t.on(U.TRANSITION_OUT,this.transitionOut,this),t.on(U.TRANSITION_COMPLETE,this.transitionComplete,this),t.on(U.PRE_UPDATE,this.preUpdate,this),t.once(U.SHUTDOWN,this.shutdown,this),this.manager.events.on(C.GAME_OUT,this.onGameOut,this),this.manager.events.on(C.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(C.START)},onGameOver:function(t){this.isActive()&&this.emit(C.GAME_OVER,t.timeStamp,t)},onGameOut:function(t){this.isActive()&&this.emit(C.GAME_OUT,t.timeStamp,t)},preUpdate:function(){this.pluginEvents.emit(C.PRE_UPDATE);var t=this._pendingRemoval,i=this._pendingInsertion,n=t.length,o=i.length;if(0!==n||0!==o){for(var a=this._list,u=0;u<n;u++){var d=t[u],f=a.indexOf(d);f>-1&&(a.splice(f,1),this.clear(d,!0))}t.length=0,this._pendingRemoval.length=0,this._list=a.concat(i.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(t,i){if(!this.isActive())return!1;if(this.pluginEvents.emit(C.UPDATE,t,i),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var n,o=this.manager,a=o.pointers,u=o.pointersTotal;for(n=0;n<u;n++)a[n].updateMotion();if(0===this._list.length)return!1;var d=this.pollRate;if(-1===d)return!1;if(d>0){if(this._pollTimer-=i,!(this._pollTimer<0))return!1;this._pollTimer=this.pollRate}var f=!1;for(n=0;n<u;n++){var p=0,b=a[n];this._tempZones=[],this._temp=this.hitTestPointer(b),this.sortGameObjects(this._temp,b),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),p+=this.processOverOutEvents(b),2===this.getDragState(b)&&this.processDragThresholdEvent(b,t),p>0&&(f=!0)}return f},update:function(t,i){if(!this.isActive())return!1;for(var n=i.length,o=!1,a=0;a<n;a++){var u=0,f=i[a];switch(this._tempZones=[],this._temp=this.hitTestPointer(f),this.sortGameObjects(this._temp,f),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),t){case d.MOUSE_DOWN:u+=this.processDragDownEvent(f),u+=this.processDownEvents(f),u+=this.processOverOutEvents(f);break;case d.MOUSE_UP:u+=this.processDragUpEvent(f),u+=this.processUpEvents(f),u+=this.processOverOutEvents(f);break;case d.TOUCH_START:u+=this.processDragDownEvent(f),u+=this.processDownEvents(f),u+=this.processOverEvents(f);break;case d.TOUCH_END:case d.TOUCH_CANCEL:u+=this.processDragUpEvent(f),u+=this.processUpEvents(f),u+=this.processOutEvents(f);break;case d.MOUSE_MOVE:case d.TOUCH_MOVE:u+=this.processDragMoveEvent(f),u+=this.processMoveEvents(f),u+=this.processOverOutEvents(f);break;case d.MOUSE_WHEEL:u+=this.processWheelEvent(f)}u>0&&(o=!0)}return this._updatedThisFrame=!0,o},clear:function(t,i){void 0===i&&(i=!1);var n=t.input;if(n){i||this.queueForRemoval(t),n.gameObject=void 0,n.target=void 0,n.hitArea=void 0,n.hitAreaCallback=void 0,n.callbackContext=void 0,t.input=null;var o=this._draggable.indexOf(t);return o>-1&&this._draggable.splice(o,1),(o=this._drag[0].indexOf(t))>-1&&this._drag[0].splice(o,1),(o=this._over[0].indexOf(t))>-1&&(this._over[0].splice(o,1),this.manager.resetCursor(n)),t}},disable:function(t){t.input.enabled=!1},enable:function(t,i,n,o){return void 0===o&&(o=!1),t.input?t.input.enabled=!0:this.setHitArea(t,i,n),t.input&&o&&!t.input.dropZone&&(t.input.dropZone=o),this},hitTestPointer:function(t){for(var i=this.cameras.getCamerasBelowPointer(t),n=0;n<i.length;n++){for(var o=i[n],a=this.manager.hitTest(t,this._list,o),u=0;u<a.length;u++){var d=a[u];d.input.dropZone&&this._tempZones.push(d)}if(a.length>0)return t.camera=o,a}return t.camera=i[0],[]},processDownEvents:function(t){var i=0,n=this._temp,o=this._eventData,a=this._eventContainer;o.cancelled=!1;for(var u=!1,d=0;d<n.length;d++){var f=n[d];if(f.input){if(i++,f.emit(C.GAMEOBJECT_POINTER_DOWN,t,f.input.localX,f.input.localY,a),o.cancelled||!f.input){u=!0;break}if(this.emit(C.GAMEOBJECT_DOWN,t,f,a),o.cancelled||!f.input){u=!0;break}}}return!u&&this.manager&&(t.downElement===this.manager.game.canvas?this.emit(C.POINTER_DOWN,t,n):this.emit(C.POINTER_DOWN_OUTSIDE,t)),i},getDragState:function(t){return this._dragState[t.id]},setDragState:function(t,i){this._dragState[t.id]=i},processDragThresholdEvent:function(t,i){var n=!1,o=this.dragTimeThreshold,a=this.dragDistanceThreshold;if((a>0&&b(t.x,t.y,t.downX,t.downY)>=a||o>0&&i>=t.downTime+o)&&(n=!0),n)return this.setDragState(t,3),this.processDragStartList(t)},processDragStartList:function(t){if(3!==this.getDragState(t))return 0;for(var i=this._drag[t.id],n=0;n<i.length;n++){var o=i[n],a=o.input;a.dragState=2,a.dragStartX=o.x,a.dragStartY=o.y,a.dragStartXGlobal=t.worldX,a.dragStartYGlobal=t.worldY,a.dragX=a.dragStartXGlobal-a.dragStartX,a.dragY=a.dragStartYGlobal-a.dragStartY,o.emit(C.GAMEOBJECT_DRAG_START,t,a.dragX,a.dragY),this.emit(C.DRAG_START,t,o)}return this.setDragState(t,4),i.length},processDragDownEvent:function(t){var i=this._temp;if(0===this._draggable.length||0===i.length||!t.primaryDown||0!==this.getDragState(t))return 0;this.setDragState(t,1);for(var n=[],o=0;o<i.length;o++){var a=i[o];a.input.draggable&&0===a.input.dragState&&n.push(a)}return 0===n.length?(this.setDragState(t,0),0):(n.length>1&&(this.sortGameObjects(n,t),this.topOnly&&n.splice(1)),this._drag[t.id]=n,0===this.dragDistanceThreshold&&0===this.dragTimeThreshold?(this.setDragState(t,3),this.processDragStartList(t)):(this.setDragState(t,2),0))},processDragMoveEvent:function(t){if(2===this.getDragState(t)&&this.processDragThresholdEvent(t,this.manager.game.loop.now),4!==this.getDragState(t))return 0;for(var i=this._tempZones,n=this._drag[t.id],o=0;o<n.length;o++){var a,u,d=n[o],f=d.input,p=f.target;if(p){var b=i.indexOf(p);0===b?(d.emit(C.GAMEOBJECT_DRAG_OVER,t,p),this.emit(C.DRAG_OVER,t,d,p)):b>0?(d.emit(C.GAMEOBJECT_DRAG_LEAVE,t,p),this.emit(C.DRAG_LEAVE,t,d,p),f.target=i[0],p=f.target,d.emit(C.GAMEOBJECT_DRAG_ENTER,t,p),this.emit(C.DRAG_ENTER,t,d,p)):(d.emit(C.GAMEOBJECT_DRAG_LEAVE,t,p),this.emit(C.DRAG_LEAVE,t,d,p),i[0]?(f.target=i[0],p=f.target,d.emit(C.GAMEOBJECT_DRAG_ENTER,t,p),this.emit(C.DRAG_ENTER,t,d,p)):f.target=null)}else!p&&i[0]&&(f.target=i[0],p=f.target,d.emit(C.GAMEOBJECT_DRAG_ENTER,t,p),this.emit(C.DRAG_ENTER,t,d,p));if(d.parentContainer){var S=t.worldX-f.dragStartXGlobal,M=t.worldY-f.dragStartYGlobal,P=d.getParentRotation(),R=S*Math.cos(P)+M*Math.sin(P),O=M*Math.cos(P)-S*Math.sin(P);R*=1/d.parentContainer.scaleX,O*=1/d.parentContainer.scaleY,a=R+f.dragStartX,u=O+f.dragStartY}else a=t.worldX-f.dragX,u=t.worldY-f.dragY;d.emit(C.GAMEOBJECT_DRAG,t,a,u),this.emit(C.DRAG,t,d,a,u)}return n.length},processDragUpEvent:function(t){for(var i=this._drag[t.id],n=0;n<i.length;n++){var o=i[n],a=o.input;if(a&&2===a.dragState){a.dragState=0,a.dragX=a.localX-o.displayOriginX,a.dragY=a.localY-o.displayOriginY;var u=!1,d=a.target;d&&(o.emit(C.GAMEOBJECT_DROP,t,d),this.emit(C.DROP,t,o,d),a.target=null,u=!0),o.input&&(o.emit(C.GAMEOBJECT_DRAG_END,t,a.dragX,a.dragY,u),this.emit(C.DRAG_END,t,o,u))}}return this.setDragState(t,0),i.splice(0),0},processMoveEvents:function(t){var i=0,n=this._temp,o=this._eventData,a=this._eventContainer;o.cancelled=!1;for(var u=!1,d=0;d<n.length;d++){var f=n[d];if(f.input){if(i++,f.emit(C.GAMEOBJECT_POINTER_MOVE,t,f.input.localX,f.input.localY,a),o.cancelled||!f.input){u=!0;break}if(this.emit(C.GAMEOBJECT_MOVE,t,f,a),o.cancelled||!f.input){u=!0;break}if(this.topOnly)break}}return u||this.emit(C.POINTER_MOVE,t,n),i},processWheelEvent:function(t){var i=0,n=this._temp,o=this._eventData,a=this._eventContainer;o.cancelled=!1;for(var u=!1,d=t.deltaX,f=t.deltaY,p=t.deltaZ,b=0;b<n.length;b++){var S=n[b];if(S.input){if(i++,S.emit(C.GAMEOBJECT_POINTER_WHEEL,t,d,f,p,a),o.cancelled||!S.input){u=!0;break}if(this.emit(C.GAMEOBJECT_WHEEL,t,S,d,f,p,a),o.cancelled||!S.input){u=!0;break}}}return u||this.emit(C.POINTER_WHEEL,t,n,d,f,p),i},processOverEvents:function(t){var i=this._temp,n=0,o=i.length,a=[];if(o>0){var u=this.manager,d=this._eventData,f=this._eventContainer;d.cancelled=!1;for(var p=!1,b=0;b<o;b++){var S=i[b];if(S.input){if(a.push(S),u.setCursor(S.input),S.emit(C.GAMEOBJECT_POINTER_OVER,t,S.input.localX,S.input.localY,f),n++,d.cancelled||!S.input){p=!0;break}if(this.emit(C.GAMEOBJECT_OVER,t,S,f),d.cancelled||!S.input){p=!0;break}}}p||this.emit(C.POINTER_OVER,t,a)}return this._over[t.id]=a,n},processOutEvents:function(t){var i=this._over[t.id],n=0,o=i.length;if(o>0){var a=this.manager,u=this._eventData,d=this._eventContainer;u.cancelled=!1;var f=!1;this.sortGameObjects(i,t);for(var p=0;p<o;p++){var b=i[p];if((b=i[p]).input){if(a.resetCursor(b.input),b.emit(C.GAMEOBJECT_POINTER_OUT,t,d),n++,u.cancelled||!b.input){f=!0;break}if(this.emit(C.GAMEOBJECT_OUT,t,b,d),u.cancelled||!b.input){f=!0;break}f||this.emit(C.POINTER_OUT,t,i)}}this._over[t.id]=[]}return n},processOverOutEvents:function(t){var i,n,o=this._temp,a=[],u=[],d=[],f=this._over[t.id],p=this._drag[t.id],b=this.manager;for(i=0;i<f.length;i++)n=f[i],-1===o.indexOf(n)&&-1===p.indexOf(n)?a.push(n):d.push(n);for(i=0;i<o.length;i++)n=o[i],-1===f.indexOf(n)&&u.push(n);var S=a.length,M=0,P=this._eventData,R=this._eventContainer;P.cancelled=!1;var O=!1;if(S>0){for(this.sortGameObjects(a,t),i=0;i<S;i++)if((n=a[i]).input){if(b.resetCursor(n.input),n.emit(C.GAMEOBJECT_POINTER_OUT,t,R),M++,P.cancelled||!n.input){O=!0;break}if(this.emit(C.GAMEOBJECT_OUT,t,n,R),P.cancelled||!n.input){O=!0;break}}O||this.emit(C.POINTER_OUT,t,a)}if(S=u.length,P.cancelled=!1,O=!1,S>0){for(this.sortGameObjects(u,t),i=0;i<S;i++)if((n=u[i]).input){if(b.setCursor(n.input),n.emit(C.GAMEOBJECT_POINTER_OVER,t,n.input.localX,n.input.localY,R),M++,P.cancelled||!n.input){O=!0;break}if(this.emit(C.GAMEOBJECT_OVER,t,n,R),P.cancelled||!n.input){O=!0;break}}O||this.emit(C.POINTER_OVER,t,u)}return f=d.concat(u),this._over[t.id]=this.sortGameObjects(f,t),M},processUpEvents:function(t){var i=this._temp,n=this._eventData,o=this._eventContainer;n.cancelled=!1;for(var a=!1,u=0;u<i.length;u++){var d=i[u];if(d.input){if(d.emit(C.GAMEOBJECT_POINTER_UP,t,d.input.localX,d.input.localY,o),n.cancelled||!d.input){a=!0;break}if(this.emit(C.GAMEOBJECT_UP,t,d,o),n.cancelled||!d.input){a=!0;break}}}return!a&&this.manager&&(t.upElement===this.manager.game.canvas?this.emit(C.POINTER_UP,t,i):this.emit(C.POINTER_UP_OUTSIDE,t)),i.length},queueForInsertion:function(t){return-1===this._pendingInsertion.indexOf(t)&&-1===this._list.indexOf(t)&&this._pendingInsertion.push(t),this},queueForRemoval:function(t){return this._pendingRemoval.push(t),this},setDraggable:function(t,i){void 0===i&&(i=!0),Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var o=t[n];o.input.draggable=i;var a=this._draggable.indexOf(o);i&&-1===a?this._draggable.push(o):!i&&a>-1&&this._draggable.splice(a,1)}return this},makePixelPerfect:function(t){void 0===t&&(t=1);var i=this.systems.textures;return p(i,t)},setHitArea:function(t,i,n){if(void 0===i)return this.setHitAreaFromTexture(t);Array.isArray(t)||(t=[t]);var o=!1,a=!1,u=!1,d=!1,p=!1,b=!0;if(N(i)){var S=i;i=R(S,"hitArea",null),n=R(S,"hitAreaCallback",null),o=R(S,"draggable",!1),a=R(S,"dropZone",!1),u=R(S,"cursor",!1),d=R(S,"useHandCursor",!1),p=R(S,"pixelPerfect",!1);var M=R(S,"alphaTolerance",1);p&&(i={},n=this.makePixelPerfect(M)),i&&n||(this.setHitAreaFromTexture(t),b=!1)}else"function"!=typeof i||n||(n=i,i={});for(var C=0;C<t.length;C++){var P=t[C];if(p&&"Container"===P.type)console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");else{var O=P.input?P.input:f(P,i,n);O.customHitArea=b,O.dropZone=a,O.cursor=d?"pointer":u,P.input=O,o&&this.setDraggable(P),this.queueForInsertion(P)}}return this},setHitAreaCircle:function(t,i,n,u,d){void 0===d&&(d=a);var f=new o(i,n,u);return this.setHitArea(t,f,d)},setHitAreaEllipse:function(t,i,n,o,a,u){void 0===u&&(u=M);var d=new S(i,n,o,a);return this.setHitArea(t,d,u)},setHitAreaFromTexture:function(t,i){void 0===i&&(i=G),Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var o=t[n],a=o.frame,u=0,d=0;o.width?(u=o.width,d=o.height):a&&(u=a.realWidth,d=a.realHeight),"Container"!==o.type||0!==u&&0!==d?0!==u&&0!==d&&(o.input=f(o,new X(0,0,u,d),i),this.queueForInsertion(o)):console.warn("Container.setInteractive must specify a Shape or call setSize() first")}return this},setHitAreaRectangle:function(t,i,n,o,a,u){void 0===u&&(u=G);var d=new X(i,n,o,a);return this.setHitArea(t,d,u)},setHitAreaTriangle:function(t,i,n,o,a,u,d,f){void 0===f&&(f=z);var p=new V(i,n,o,a,u,d);return this.setHitArea(t,p,f)},enableDebug:function(t,i){void 0===i&&(i=65280);var n=t.input;if(!n||!n.hitArea)return this;var o=n.hitArea,a=o.type,u=n.hitAreaDebug,d=this.systems.add,f=this.systems.updateList;u&&(f.remove(u),u.destroy(),u=null);var p=0,b=0;switch(a){case O.CIRCLE:u=d.arc(0,0,o.radius),p=o.x-o.radius,b=o.y-o.radius;break;case O.ELLIPSE:u=d.ellipse(0,0,o.width,o.height),p=o.x-o.width/2,b=o.y-o.height/2;break;case O.LINE:u=d.line(0,0,o.x1,o.y1,o.x2,o.y2);break;case O.POLYGON:u=d.polygon(0,0,o.points);break;case O.RECTANGLE:u=d.rectangle(0,0,o.width,o.height),p=o.x,b=o.y;break;case O.TRIANGLE:u=d.triangle(0,0,o.x1,o.y1,o.x2,o.y2,o.x3,o.y3)}return u&&(u.isFilled=!1,u.preUpdate=function(){u.setStrokeStyle(1/t.scale,i),u.setDisplayOrigin(t.displayOriginX,t.displayOriginY);var n=t.x,o=t.y,a=t.rotation,d=t.scaleX,f=t.scaleY;if(t.parentContainer){var S=t.getWorldTransformMatrix();n=S.tx,o=S.ty,a=S.rotation,d=S.scaleX,f=S.scaleY}u.setRotation(a),u.setScale(d,f),u.setPosition(n+p,o+b),u.setScrollFactor(t.scrollFactorX,t.scrollFactorY),u.setDepth(t.depth)},f.add(u),n.hitAreaDebug=u),this},removeDebug:function(t){var i=t.input;if(i&&i.hitAreaDebug){var n=i.hitAreaDebug;this.systems.updateList.remove(n),n.destroy(),i.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(t){return this.pollRate=t,this._pollTimer=0,this},setGlobalTopOnly:function(t){return this.manager.globalTopOnly=t,this},setTopOnly:function(t){return this.topOnly=t,this},sortGameObjects:function(t,i){if(t.length<2)return t;var n=i.camera.renderList;return t.sort((function(t,i){return n.indexOf(i)-n.indexOf(t)}))},sortDropZones:function(t){return t.length<2?t:(this.scene.sys.depthSort(),t.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(t,i){if(t.parentContainer||i.parentContainer){if(t.parentContainer===i.parentContainer)return i.parentContainer.getIndex(i)-t.parentContainer.getIndex(t);if(t.parentContainer===i)return-1;if(i.parentContainer===t)return 1;for(var n=t.getIndexList(),o=i.getIndexList(),a=Math.min(n.length,o.length),u=0;u<a;u++){var d=n[u],f=o[u];if(d!==f)return f-d}return o.length-n.length}return this.displayList.getIndex(i)-this.displayList.getIndex(t)},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(t){return this.manager.addPointer(t)},setDefaultCursor:function(t){return this.manager.setDefaultCursor(t),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(C.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var t=0;t<10;t++)this._drag[t]=[],this._over[t]=[];this.removeAllListeners();var i=this.manager;i.canvas.style.cursor=i.defaultCursor;var n=this.systems.events;n.off(U.TRANSITION_START,this.transitionIn,this),n.off(U.TRANSITION_OUT,this.transitionOut,this),n.off(U.TRANSITION_COMPLETE,this.transitionComplete,this),n.off(U.PRE_UPDATE,this.preUpdate,this),i.events.off(C.GAME_OUT,this.onGameOut,this),i.events.off(C.GAME_OVER,this.onGameOver,this),n.off(U.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(C.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(U.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});Y.register("InputPlugin",W,"input"),t.exports=W},function(t,i,n){t.exports={Events:n(154),KeyboardManager:n(410),KeyboardPlugin:n(1330),Key:n(512),KeyCodes:n(143),KeyCombo:n(513),AdvanceKeyCombo:n(515),ProcessKeyCombo:n(514),ResetKeyCombo:n(516),JustDown:n(1332),JustUp:n(1333),DownDuration:n(1334),UpDuration:n(1335)}},function(t,i){t.exports="keydown"},function(t,i){t.exports="keyup"},function(t,i){t.exports="keycombomatch"},function(t,i){t.exports="down"},function(t,i){t.exports="keydown-"},function(t,i){t.exports="keyup-"},function(t,i){t.exports="up"},function(t,i,n){var o=n(0),a=n(9),u=n(154),d=n(22),f=n(6),p=n(51),b=n(153),S=n(512),M=n(143),C=n(513),P=n(1331),R=n(20),O=n(76),B=new o({Extends:a,initialize:function KeyboardPlugin2(t){a.call(this),this.game=t.systems.game,this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.manager=t.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,t.pluginEvents.once(p.BOOT,this.boot,this),t.pluginEvents.on(p.START,this.start,this)},boot:function(){var t=this.settings.input;this.enabled=f(t,"keyboard",!0);var i=f(t,"keyboard.capture",null);i&&this.addCaptures(i),this.sceneInputPlugin.pluginEvents.once(p.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(p.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(p.SHUTDOWN,this.shutdown,this),this.game.events.on(d.BLUR,this.resetKeys,this),this.scene.sys.events.on(R.PAUSE,this.resetKeys,this),this.scene.sys.events.on(R.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(t){return this.manager.addCapture(t),this},removeCapture:function(t){return this.manager.removeCapture(t),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:M.UP,down:M.DOWN,left:M.LEFT,right:M.RIGHT,space:M.SPACE,shift:M.SHIFT})},addKeys:function(t,i,n){void 0===i&&(i=!0),void 0===n&&(n=!1);var o={};if("string"==typeof t){t=t.split(",");for(var a=0;a<t.length;a++){var u=t[a].trim();u&&(o[u]=this.addKey(u,i,n))}}else for(var d in t)o[d]=this.addKey(t[d],i,n);return o},addKey:function(t,i,n){void 0===i&&(i=!0),void 0===n&&(n=!1);var o=this.keys;if(t instanceof S){var a=o.indexOf(t);return a>-1?o[a]=t:o[t.keyCode]=t,i&&this.addCapture(t.keyCode),t.setEmitOnRepeat(n),t}return"string"==typeof t&&(t=M[t.toUpperCase()]),o[t]||(o[t]=new S(this,t),i&&this.addCapture(t),o[t].setEmitOnRepeat(n)),o[t]},removeKey:function(t,i){void 0===i&&(i=!1);var n,o=this.keys;if(t instanceof S){var a=o.indexOf(t);a>-1&&(n=this.keys[a],this.keys[a]=void 0)}else"string"==typeof t&&(t=M[t.toUpperCase()]);return o[t]&&(n=o[t],o[t]=void 0),n&&(n.plugin=null,i&&n.destroy()),this},removeAllKeys:function(t){for(var i=this.keys,n=0;n<i.length;n++){var o=i[n];o&&(i[n]=void 0,t&&o.destroy())}return this},createCombo:function(t,i){return new C(this,t,i)},checkDown:function(t,i){if(void 0===i&&(i=0),this.enabled&&t.isDown){var n=O(this.time-t.timeDown,i);if(n>t._tick)return t._tick=n,!0}return!1},update:function(){var t=this.manager.queue,i=t.length;if(this.isActive()&&0!==i)for(var n=this.keys,o=0;o<i;o++){var a=t[o],d=a.keyCode,f=n[d],p=!1;void 0===a.cancelled&&(a.cancelled=0,a.stopImmediatePropagation=function(){a.cancelled=1},a.stopPropagation=function(){a.cancelled=-1}),-1!==a.cancelled&&(d===this.prevCode&&a.timeStamp===this.prevTime&&a.type===this.prevType||(this.prevCode=d,this.prevTime=a.timeStamp,this.prevType=a.type,"keydown"===a.type?(f&&(p=f.isDown,f.onDown(a)),a.cancelled||f&&p||(P[d]&&this.emit(u.KEY_DOWN+P[d],a),a.cancelled||this.emit(u.ANY_KEY_DOWN,a))):(f&&f.onUp(a),a.cancelled||(P[d]&&this.emit(u.KEY_UP+P[d],a),a.cancelled||this.emit(u.ANY_KEY_UP,a))),1===a.cancelled&&(a.cancelled=0)))}},resetKeys:function(){for(var t=this.keys,i=0;i<t.length;i++)t[i]&&t[i].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(p.MANAGER_PROCESS,this.update,this),this.game.events.off(d.BLUR,this.resetKeys),this.scene.sys.events.off(R.PAUSE,this.resetKeys,this),this.scene.sys.events.off(R.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var t=this.keys,i=0;i<t.length;i++)t[i]&&t[i].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});b.register("KeyboardPlugin",B,"keyboard","keyboard","inputKeyboard"),t.exports=B},function(t,i,n){var o=n(143),a={};for(var u in o)a[o[u]]=u;t.exports=a},function(t,i){t.exports=function(t){return!!t._justDown&&(t._justDown=!1,!0)}},function(t,i){t.exports=function(t){return!!t._justUp&&(t._justUp=!1,!0)}},function(t,i){t.exports=function(t,i){void 0===i&&(i=50);var n=t.plugin.game.loop.time-t.timeDown;return t.isDown&&n<i}},function(t,i){t.exports=function(t,i){void 0===i&&(i=50);var n=t.plugin.game.loop.time-t.timeUp;return t.isUp&&n<i}},function(t,i,n){t.exports={MouseManager:n(411)}},function(t,i,n){t.exports={TouchManager:n(413)}},function(t,i,n){var o=n(21),a=n(17),u={Events:n(95),FileTypes:n(1339),File:n(23),FileTypesManager:n(8),GetURL:n(155),LoaderPlugin:n(1365),MergeXHRSettings:n(240),MultiFile:n(49),XHRLoader:n(517),XHRSettings:n(156)};u=a(!1,u,o),t.exports=u},function(t,i,n){t.exports={AnimationJSONFile:n(1340),AsepriteFile:n(1341),AtlasJSONFile:n(1342),AtlasXMLFile:n(1343),AudioFile:n(518),AudioSpriteFile:n(1344),BinaryFile:n(1345),BitmapFontFile:n(1346),CSSFile:n(1347),GLSLFile:n(1348),HTML5AudioFile:n(519),HTMLFile:n(1349),HTMLTextureFile:n(1350),ImageFile:n(71),JSONFile:n(61),MultiAtlasFile:n(1351),MultiScriptFile:n(1352),OBJFile:n(1353),PackFile:n(1354),PluginFile:n(1355),SceneFile:n(1356),ScenePluginFile:n(1357),ScriptFile:n(520),SpriteSheetFile:n(1358),SVGFile:n(1359),TextFile:n(242),TilemapCSVFile:n(1360),TilemapImpactFile:n(1361),TilemapJSONFile:n(1362),UnityAtlasFile:n(1363),VideoFile:n(1364),XMLFile:n(241)}},function(t,i,n){var o=n(0),a=n(8),u=n(61),d=n(95),f=new o({Extends:u,initialize:function AnimationJSONFile2(t,i,n,o,a){u.call(this,t,i,n,o,a),this.type="animationJSON"},onProcess:function(){this.loader.once(d.POST_PROCESS,this.onLoadComplete,this),u.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});a.register("animation",(function(t,i,n,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new f(this,t[a]));else this.addFile(new f(this,t,i,o,n));return this})),t.exports=f},function(t,i,n){var o=n(0),a=n(8),u=n(2),d=n(71),f=n(7),p=n(61),b=n(49),S=new o({Extends:b,initialize:function AsepriteFile2(t,i,n,o,a,S){var M,C;if(f(i)){var P=i;i=u(P,"key"),M=new d(t,{key:i,url:u(P,"textureURL"),extension:u(P,"textureExtension","png"),normalMap:u(P,"normalMap"),xhrSettings:u(P,"textureXhrSettings")}),C=new p(t,{key:i,url:u(P,"atlasURL"),extension:u(P,"atlasExtension","json"),xhrSettings:u(P,"atlasXhrSettings")})}else M=new d(t,i,n,a),C=new p(t,i,o,S);M.linkFile?b.call(this,t,"atlasjson",i,[M,C,M.linkFile]):b.call(this,t,"atlasjson",i,[M,C])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],i=this.files[1],n=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(t.key,t.data,i.data,n),i.addToCache(),this.complete=!0}}});a.register("aseprite",(function(t,i,n,o,a){var u;if(Array.isArray(t))for(var d=0;d<t.length;d++)u=new S(this,t[d]),this.addFile(u.files);else u=new S(this,t,i,n,o,a),this.addFile(u.files);return this})),t.exports=S},function(t,i,n){var o=n(0),a=n(8),u=n(2),d=n(71),f=n(7),p=n(61),b=n(49),S=new o({Extends:b,initialize:function AtlasJSONFile2(t,i,n,o,a,S){var M,C;if(f(i)){var P=i;i=u(P,"key"),M=new d(t,{key:i,url:u(P,"textureURL"),extension:u(P,"textureExtension","png"),normalMap:u(P,"normalMap"),xhrSettings:u(P,"textureXhrSettings")}),C=new p(t,{key:i,url:u(P,"atlasURL"),extension:u(P,"atlasExtension","json"),xhrSettings:u(P,"atlasXhrSettings")})}else M=new d(t,i,n,a),C=new p(t,i,o,S);M.linkFile?b.call(this,t,"atlasjson",i,[M,C,M.linkFile]):b.call(this,t,"atlasjson",i,[M,C])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],i=this.files[1],n=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(t.key,t.data,i.data,n),i.pendingDestroy(),this.complete=!0}}});a.register("atlas",(function(t,i,n,o,a){var u;if(Array.isArray(t))for(var d=0;d<t.length;d++)u=new S(this,t[d]),this.addFile(u.files);else u=new S(this,t,i,n,o,a),this.addFile(u.files);return this})),t.exports=S},function(t,i,n){var o=n(0),a=n(8),u=n(2),d=n(71),f=n(7),p=n(49),b=n(241),S=new o({Extends:p,initialize:function AtlasXMLFile2(t,i,n,o,a,S){var M,C;if(f(i)){var P=i;i=u(P,"key"),M=new d(t,{key:i,url:u(P,"textureURL"),extension:u(P,"textureExtension","png"),normalMap:u(P,"normalMap"),xhrSettings:u(P,"textureXhrSettings")}),C=new b(t,{key:i,url:u(P,"atlasURL"),extension:u(P,"atlasExtension","xml"),xhrSettings:u(P,"atlasXhrSettings")})}else M=new d(t,i,n,a),C=new b(t,i,o,S);M.linkFile?p.call(this,t,"atlasxml",i,[M,C,M.linkFile]):p.call(this,t,"atlasxml",i,[M,C])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],i=this.files[1],n=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(t.key,t.data,i.data,n),i.pendingDestroy(),this.complete=!0}}});a.register("atlasXML",(function(t,i,n,o,a){var u;if(Array.isArray(t))for(var d=0;d<t.length;d++)u=new S(this,t[d]),this.addFile(u.files);else u=new S(this,t,i,n,o,a),this.addFile(u.files);return this})),t.exports=S},function(t,i,n){var o=n(518),a=n(0),u=n(8),d=n(2),f=n(7),p=n(61),b=n(49),S=new a({Extends:b,initialize:function AudioSpriteFile2(t,i,n,a,u,S,M){if(f(i)){var C=i;i=d(C,"key"),n=d(C,"jsonURL"),a=d(C,"audioURL"),u=d(C,"audioConfig"),S=d(C,"audioXhrSettings"),M=d(C,"jsonXhrSettings")}var P;if(a){var R=o.create(t,i,a,u,S);R&&(P=new p(t,i,n,M),b.call(this,t,"audiosprite",i,[R,P]),this.config.resourceLoad=!1)}else P=new p(t,i,n,M),b.call(this,t,"audiosprite",i,[P]),this.config.resourceLoad=!0,this.config.audioConfig=u,this.config.audioXhrSettings=S},onFileComplete:function(t){if(-1!==this.files.indexOf(t)&&(this.pending--,this.config.resourceLoad&&"json"===t.type&&t.data.hasOwnProperty("resources"))){var i=t.data.resources,n=d(this.config,"audioConfig"),a=d(this.config,"audioXhrSettings"),u=o.create(this.loader,t.key,i,n,a);u&&(this.addToMultiFile(u),this.loader.addFile(u))}},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],i=this.files[1];t.addToCache(),i.addToCache(),this.complete=!0}}});u.register("audioSprite",(function(t,i,n,o,a,u){var d,f=this.systems.game,p=f.config.audio,b=f.device.audio;if(p&&p.noAudio||!b.webAudio&&!b.audioData)return this;if(Array.isArray(t))for(var M=0;M<t.length;M++)(d=new S(this,t[M])).files&&this.addFile(d.files);else(d=new S(this,t,i,n,o,a,u)).files&&this.addFile(d.files);return this}))},function(t,i,n){var o=n(0),a=n(21),u=n(23),d=n(8),f=n(2),p=n(7),b=new o({Extends:u,initialize:function BinaryFile2(t,i,n,o,a){var d="bin";if(p(i)){var b=i;i=f(b,"key"),n=f(b,"url"),o=f(b,"xhrSettings"),d=f(b,"extension",d),a=f(b,"dataType",a)}var S={type:"binary",cache:t.cacheManager.binary,extension:d,responseType:"arraybuffer",key:i,url:n,xhrSettings:o,config:{dataType:a}};u.call(this,t,S)},onProcess:function(){this.state=a.FILE_PROCESSING;var t=this.config.dataType;this.data=t?new t(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});d.register("binary",(function(t,i,n,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new b(this,t[a]));else this.addFile(new b(this,t,i,o,n));return this})),t.exports=b},function(t,i,n){var o=n(0),a=n(8),u=n(2),d=n(71),f=n(7),p=n(49),b=n(212),S=n(241),M=new o({Extends:p,initialize:function BitmapFontFile2(t,i,n,o,a,b){var M,C;if(f(i)){var P=i;i=u(P,"key"),M=new d(t,{key:i,url:u(P,"textureURL"),extension:u(P,"textureExtension","png"),normalMap:u(P,"normalMap"),xhrSettings:u(P,"textureXhrSettings")}),C=new S(t,{key:i,url:u(P,"fontDataURL"),extension:u(P,"fontDataExtension","xml"),xhrSettings:u(P,"fontDataXhrSettings")})}else M=new d(t,i,n,a),C=new S(t,i,o,b);M.linkFile?p.call(this,t,"bitmapfont",i,[M,C,M.linkFile]):p.call(this,t,"bitmapfont",i,[M,C])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],i=this.files[1];t.addToCache(),i.pendingDestroy();var n=t.cache.get(t.key),o=b(i.data,t.cache.getFrame(t.key),0,0,n);this.loader.cacheManager.bitmapFont.add(t.key,{data:o,texture:t.key,frame:null}),this.complete=!0}}});a.register("bitmapFont",(function(t,i,n,o,a){var u;if(Array.isArray(t))for(var d=0;d<t.length;d++)u=new M(this,t[d]),this.addFile(u.files);else u=new M(this,t,i,n,o,a),this.addFile(u.files);return this})),t.exports=M},function(t,i,n){var o=n(0),a=n(21),u=n(23),d=n(8),f=n(2),p=n(7),b=new o({Extends:u,initialize:function CSSFile2(t,i,n,o){var a="css";if(p(i)){var d=i;i=f(d,"key"),n=f(d,"url"),o=f(d,"xhrSettings"),a=f(d,"extension",a)}var b={type:"script",cache:!1,extension:a,responseType:"text",key:i,url:n,xhrSettings:o};u.call(this,t,b)},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});d.register("css",(function(t,i,n){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new b(this,t[o]));else this.addFile(new b(this,t,i,n));return this})),t.exports=b},function(t,i,n){var o=n(0),a=n(21),u=n(23),d=n(8),f=n(2),p=n(7),b=n(396),S=new o({Extends:u,initialize:function GLSLFile2(t,i,n,o,a){var d="glsl";if(p(i)){var b=i;i=f(b,"key"),n=f(b,"url"),o=f(b,"shaderType","fragment"),a=f(b,"xhrSettings"),d=f(b,"extension",d)}else void 0===o&&(o="fragment");var S={type:"glsl",cache:t.cacheManager.shader,extension:d,responseType:"text",key:i,url:n,config:{shaderType:o},xhrSettings:a};u.call(this,t,S)},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t=this.data.split("\n"),i=this.extractBlock(t,0);if(i)for(;i;){var n=this.getShaderName(i.header),o=this.getShaderType(i.header),a=this.getShaderUniforms(i.header),u=i.shader;if(this.cache.has(n)){var d=this.cache.get(n);"fragment"===o?d.fragmentSrc=u:d.vertexSrc=u,d.uniforms||(d.uniforms=a)}else"fragment"===o?this.cache.add(n,new b(n,u,"",a)):this.cache.add(n,new b(n,"",u,a));i=this.extractBlock(t,i.offset)}else"fragment"===this.config.shaderType?this.cache.add(this.key,new b(this.key,this.data)):this.cache.add(this.key,new b(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(t){for(var i=0;i<t.length;i++){var n=t[i].trim();if("name:"===n.substring(0,5))return n.substring(5).trim()}return this.key},getShaderType:function(t){for(var i=0;i<t.length;i++){var n=t[i].trim();if("type:"===n.substring(0,5))return n.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(t){for(var i={},n=0;n<t.length;n++){var o=t[n].trim();if("uniform."===o.substring(0,8)){var a=o.indexOf(":");if(a){var u=o.substring(8,a);try{i[u]=JSON.parse(o.substring(a+1))}catch(d){console.warn("Invalid uniform JSON: "+u)}}}}return i},extractBlock:function(t,i){for(var n=-1,o=-1,a=-1,u=!1,d=!1,f=[],p=[],b=i;b<t.length;b++){var S=t[b].trim();if("---"===S)if(-1===n)n=b,u=!0;else{if(!u){d=!1;break}o=b,u=!1,d=!0}else u?f.push(S):d&&(p.push(S),a=b)}return u||-1===o?null:{header:f,shader:p.join("\n"),offset:a}}});d.register("glsl",(function(t,i,n,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new S(this,t[a]));else this.addFile(new S(this,t,i,n,o));return this})),t.exports=S},function(t,i,n){var o=n(0),a=n(21),u=n(23),d=n(8),f=n(2),p=n(7),b=new o({Extends:u,initialize:function HTMLFile2(t,i,n,o){var a="html";if(p(i)){var d=i;i=f(d,"key"),n=f(d,"url"),o=f(d,"xhrSettings"),a=f(d,"extension",a)}var b={type:"text",cache:t.cacheManager.html,extension:a,responseType:"text",key:i,url:n,xhrSettings:o};u.call(this,t,b)},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});d.register("html",(function(t,i,n){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new b(this,t[o]));else this.addFile(new b(this,t,i,n));return this})),t.exports=b},function(t,i,n){var o=n(0),a=n(21),u=n(23),d=n(8),f=n(2),p=n(7),b=new o({Extends:u,initialize:function HTMLTextureFile2(t,i,n,o,a,d){void 0===o&&(o=512),void 0===a&&(a=512);var b="html";if(p(i)){var S=i;i=f(S,"key"),n=f(S,"url"),d=f(S,"xhrSettings"),b=f(S,"extension",b),o=f(S,"width",o),a=f(S,"height",a)}var M={type:"html",cache:t.textureManager,extension:b,responseType:"text",key:i,url:n,xhrSettings:d,config:{width:o,height:a}};u.call(this,t,M)},onProcess:function(){this.state=a.FILE_PROCESSING;var t=this.config.width,i=this.config.height,n=[];n.push('<svg width="'+t+'px" height="'+i+'px" viewBox="0 0 '+t+" "+i+'" xmlns="http://www.w3.org/2000/svg">'),n.push('<foreignObject width="100%" height="100%">'),n.push('<body xmlns="http://www.w3.org/1999/xhtml">'),n.push(this.xhrLoader.responseText),n.push("</body>"),n.push("</foreignObject>"),n.push("</svg>");var o=[n.join("\n")],d=this;try{var f=new window.Blob(o,{type:"image/svg+xml;charset=utf-8"})}catch(p){return d.state=a.FILE_ERRORED,void d.onProcessComplete()}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){u.revokeObjectURL(d.data),d.onProcessComplete()},this.data.onerror=function(){u.revokeObjectURL(d.data),d.onProcessError()},u.createObjectURL(this.data,f,"image/svg+xml")},addToCache:function(){var t=this.cache.addImage(this.key,this.data);this.pendingDestroy(t)}});d.register("htmlTexture",(function(t,i,n,o,a){if(Array.isArray(t))for(var u=0;u<t.length;u++)this.addFile(new b(this,t[u]));else this.addFile(new b(this,t,i,n,o,a));return this})),t.exports=b},function(t,i,n){var o=n(0),a=n(8),u=n(2),d=n(71),f=n(7),p=n(61),b=n(49),S=new o({Extends:b,initialize:function MultiAtlasFile2(t,i,n,o,a,d,S){if(f(i)){var M=i;i=u(M,"key"),n=u(M,"url",!1)?u(M,"url"):u(M,"atlasURL"),d=u(M,"xhrSettings"),o=u(M,"path"),a=u(M,"baseURL"),S=u(M,"textureXhrSettings")}var C=new p(t,i,n,d);b.call(this,t,"multiatlas",i,[C]),this.config.path=o,this.config.baseURL=a,this.config.textureXhrSettings=S},onFileComplete:function(t){if(-1!==this.files.indexOf(t)&&(this.pending--,"json"===t.type&&t.data.hasOwnProperty("textures"))){var i=t.data.textures,n=this.config,o=this.loader,a=o.baseURL,f=o.path,p=o.prefix,b=u(n,"baseURL",this.baseURL),S=u(n,"path",this.path),M=u(n,"prefix",this.prefix),C=u(n,"textureXhrSettings");o.setBaseURL(b),o.setPath(S),o.setPrefix(M);for(var P=0;P<i.length;P++){var R=i[P].image,O="MA"+this.multiKeyIndex+"_"+R,B=new d(o,O,R,C);if(this.addToMultiFile(B),o.addFile(B),i[P].normalMap){var N=new d(o,O,i[P].normalMap,C);N.type="normalMap",B.setLink(N),this.addToMultiFile(N),o.addFile(N)}}o.setBaseURL(a),o.setPath(f),o.setPrefix(p)}},addToCache:function(){if(this.isReadyToProcess()){for(var t=this.files[0],i=[],n=[],o=[],a=1;a<this.files.length;a++){var u=this.files[a];if("normalMap"!==u.type)for(var d=u.key.indexOf("_"),f=u.key.substr(d+1),p=u.data,b=0;b<t.data.textures.length;b++){var S=t.data.textures[b];if(S.image===f){n.push(p),i.push(S),u.linkFile&&o.push(u.linkFile.data);break}}}for(0===o.length&&(o=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,n,i,o),this.complete=!0,a=0;a<this.files.length;a++)this.files[a].pendingDestroy()}}});a.register("multiatlas",(function(t,i,n,o,a){var u;if(Array.isArray(t))for(var d=0;d<t.length;d++)u=new S(this,t[d]),this.addFile(u.files);else u=new S(this,t,i,n,o,a),this.addFile(u.files);return this})),t.exports=S},function(t,i,n){var o=n(0),a=n(8),u=n(2),d=n(7),f=n(49),p=n(520),b=new o({Extends:f,initialize:function MultiScriptFile2(t,i,n,o){var a="js",b=[];if(d(i)){var S=i;i=u(S,"key"),n=u(S,"url"),o=u(S,"xhrSettings"),a=u(S,"extension",a)}Array.isArray(n)||(n=[n]);for(var M=0;M<n.length;M++){var C=new p(t,{key:i+"_"+M.toString(),url:n[M],extension:a,xhrSettings:o});C.onProcess=function(){this.onProcessComplete()},b.push(C)}f.call(this,t,"scripts",i,b)},addToCache:function(){if(this.isReadyToProcess()){for(var t=0;t<this.files.length;t++){var i=this.files[t];i.data=document.createElement("script"),i.data.language="javascript",i.data.type="text/javascript",i.data.defer=!1,i.data.text=i.xhrLoader.responseText,document.head.appendChild(i.data)}this.complete=!0}}});a.register("scripts",(function(t,i,n){var o;if(Array.isArray(t))for(var a=0;a<t.length;a++)o=new b(this,t[a]),this.addFile(o.files);else o=new b(this,t,i,n),this.addFile(o.files);return this})),t.exports=b},function(t,i,n){var o=n(0),a=n(8),u=n(2),d=n(7),f=n(49),p=n(498),b=n(499),S=n(242),M=new o({Extends:f,initialize:function OBJFile2(t,i,n,o,a,p){var b,M,C=t.cacheManager.obj;if(d(i)){var P=i;i=u(P,"key"),b=new S(t,{key:i,type:"obj",cache:C,url:u(P,"url"),extension:u(P,"extension","obj"),xhrSettings:u(P,"xhrSettings"),config:{flipUV:u(P,"flipUV",a)}}),(o=u(P,"matURL"))&&(M=new S(t,{key:i,type:"mat",cache:C,url:o,extension:u(P,"matExtension","mat"),xhrSettings:u(P,"xhrSettings")}))}else b=new S(t,{key:i,url:n,type:"obj",cache:C,extension:"obj",xhrSettings:p,config:{flipUV:a}}),o&&(M=new S(t,{key:i,url:o,type:"mat",cache:C,extension:"mat",xhrSettings:p}));f.call(this,t,"obj",i,[b,M])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],i=this.files[1],n=p(t.data,t.config.flipUV);i&&(n.materials=b(i.data)),t.cache.add(t.key,n),this.complete=!0}}});a.register("obj",(function(t,i,n,o,a){var u;if(Array.isArray(t))for(var d=0;d<t.length;d++)u=new M(this,t[d]),this.addFile(u.files);else u=new M(this,t,i,n,o,a),this.addFile(u.files);return this})),t.exports=M},function(t,i,n){var o=n(0),a=n(21),u=n(8),d=n(61),f=new o({Extends:d,initialize:function PackFile2(t,i,n,o,a){d.call(this,t,i,n,o,a),this.type="packfile"},onProcess:function(){this.state!==a.FILE_POPULATED&&(this.state=a.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});u.register("pack",(function(t,i,n,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new f(this,t[a]));else this.addFile(new f(this,t,i,o,n));return this})),t.exports=f},function(t,i,n){var o=n(0),a=n(21),u=n(23),d=n(8),f=n(2),p=n(7),b=new o({Extends:u,initialize:function PluginFile2(t,i,n,o,d,b){var S="js";if(p(i)){var M=i;i=f(M,"key"),n=f(M,"url"),b=f(M,"xhrSettings"),S=f(M,"extension",S),o=f(M,"start"),d=f(M,"mapping")}var C={type:"plugin",cache:!1,extension:S,responseType:"text",key:i,url:n,xhrSettings:b,config:{start:o,mapping:d}};u.call(this,t,C),"function"==typeof n&&(this.data=n,this.state=a.FILE_POPULATED)},onProcess:function(){var t=this.loader.systems.plugins,i=this.config,n=f(i,"start",!1),o=f(i,"mapping",null);if(this.state===a.FILE_POPULATED)t.install(this.key,this.data,n,o);else{this.state=a.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var u=t.install(this.key,window[this.key],n,o);(n||o)&&(this.loader.systems[o]=u,this.loader.scene[o]=u)}this.onProcessComplete()}});d.register("plugin",(function(t,i,n,o,a){if(Array.isArray(t))for(var u=0;u<t.length;u++)this.addFile(new b(this,t[u]));else this.addFile(new b(this,t,i,n,o,a));return this})),t.exports=b},function(t,i,n){var o=n(0),a=n(21),u=n(23),d=n(8),f=n(2),p=n(7),b=new o({Extends:u,initialize:function SceneFile2(t,i,n,o){var a="js";if(p(i)){var d=i;i=f(d,"key"),n=f(d,"url"),o=f(d,"xhrSettings"),a=f(d,"extension",a)}var b={type:"text",extension:a,responseType:"text",key:i,url:n,xhrSettings:o};u.call(this,t,b)},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t=this.data.concat("(function(){\nreturn new "+this.key+"();\n}).call(this);"),i=eval;this.loader.sceneManager.add(this.key,i(t)),this.complete=!0}});d.register("sceneFile",(function(t,i,n){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new b(this,t[o]));else this.addFile(new b(this,t,i,n));return this})),t.exports=b},function(t,i,n){var o=n(0),a=n(21),u=n(23),d=n(8),f=n(2),p=n(7),b=new o({Extends:u,initialize:function ScenePluginFile2(t,i,n,o,d,b){var S="js";if(p(i)){var M=i;i=f(M,"key"),n=f(M,"url"),b=f(M,"xhrSettings"),S=f(M,"extension",S),o=f(M,"systemKey"),d=f(M,"sceneKey")}var C={type:"scenePlugin",cache:!1,extension:S,responseType:"text",key:i,url:n,xhrSettings:b,config:{systemKey:o,sceneKey:d}};u.call(this,t,C),"function"==typeof n&&(this.data=n,this.state=a.FILE_POPULATED)},onProcess:function(){var t=this.loader.systems.plugins,i=this.config,n=this.key,o=f(i,"systemKey",n),u=f(i,"sceneKey",n);this.state===a.FILE_POPULATED?t.installScenePlugin(o,this.data,u,this.loader.scene,!0):(this.state=a.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),t.installScenePlugin(o,window[this.key],u,this.loader.scene,!0)),this.onProcessComplete()}});d.register("scenePlugin",(function(t,i,n,o,a){if(Array.isArray(t))for(var u=0;u<t.length;u++)this.addFile(new b(this,t[u]));else this.addFile(new b(this,t,i,n,o,a));return this})),t.exports=b},function(t,i,n){var o=n(0),a=n(8),u=n(71),d=new o({Extends:u,initialize:function SpriteSheetFile2(t,i,n,o,a){u.call(this,t,i,n,a,o),this.type="spritesheet"},addToCache:function(){var t=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(t)}});a.register("spritesheet",(function(t,i,n,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new d(this,t[a]));else this.addFile(new d(this,t,i,n,o));return this})),t.exports=d},function(t,i,n){var o=n(0),a=n(21),u=n(23),d=n(8),f=n(2),p=n(7),b=new o({Extends:u,initialize:function SVGFile2(t,i,n,o,a){var d="svg";if(p(i)){var b=i;i=f(b,"key"),n=f(b,"url"),o=f(b,"svgConfig",{}),a=f(b,"xhrSettings"),d=f(b,"extension",d)}var S={type:"svg",cache:t.textureManager,extension:d,responseType:"text",key:i,url:n,xhrSettings:a,config:{width:f(o,"width"),height:f(o,"height"),scale:f(o,"scale")}};u.call(this,t,S)},onProcess:function(){this.state=a.FILE_PROCESSING;var t=this.xhrLoader.responseText,i=[t],n=this.config.width,o=this.config.height,d=this.config.scale;t:if(n&&o||d){var f=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("svg")[0],p=f.hasAttribute("viewBox"),b=parseFloat(f.getAttribute("width")),S=parseFloat(f.getAttribute("height"));if(!p&&b&&S)f.setAttribute("viewBox","0  0 "+b+" "+S);else if(p&&!b&&!S){var M=f.getAttribute("viewBox").split(/\s+|,/);b=M[2],S=M[3]}if(d){if(!b||!S)break t;n=b*d,o=S*d}f.setAttribute("width",n.toString()+"px"),f.setAttribute("height",o.toString()+"px"),i=[(new XMLSerializer).serializeToString(f)]}try{var C=new window.Blob(i,{type:"image/svg+xml;charset=utf-8"})}catch(O){return void this.onProcessError()}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var P=this,R=!1;this.data.onload=function(){R||u.revokeObjectURL(P.data),P.onProcessComplete()},this.data.onerror=function(){R?P.onProcessError():(R=!0,u.revokeObjectURL(P.data),P.data.src="data:image/svg+xml,"+encodeURIComponent(i.join("")))},u.createObjectURL(this.data,C,"image/svg+xml")},addToCache:function(){var t=this.cache.addImage(this.key,this.data);this.pendingDestroy(t)}});d.register("svg",(function(t,i,n,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new b(this,t[a]));else this.addFile(new b(this,t,i,n,o));return this})),t.exports=b},function(t,i,n){var o=n(0),a=n(21),u=n(23),d=n(8),f=n(2),p=n(7),b=n(40),S=new o({Extends:u,initialize:function TilemapCSVFile2(t,i,n,o){var a="csv";if(p(i)){var d=i;i=f(d,"key"),n=f(d,"url"),o=f(d,"xhrSettings"),a=f(d,"extension",a)}var S={type:"tilemapCSV",cache:t.cacheManager.tilemap,extension:a,responseType:"text",key:i,url:n,xhrSettings:o};u.call(this,t,S),this.tilemapFormat=b.CSV},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});d.register("tilemapCSV",(function(t,i,n){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new S(this,t[o]));else this.addFile(new S(this,t,i,n));return this})),t.exports=S},function(t,i,n){var o=n(0),a=n(8),u=n(61),d=n(40),f=new o({Extends:u,initialize:function TilemapImpactFile2(t,i,n,o){u.call(this,t,i,n,o),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var t={format:d.WELTMEISTER,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});a.register("tilemapImpact",(function(t,i,n){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new f(this,t[o]));else this.addFile(new f(this,t,i,n));return this})),t.exports=f},function(t,i,n){var o=n(0),a=n(8),u=n(61),d=n(40),f=new o({Extends:u,initialize:function TilemapJSONFile2(t,i,n,o){u.call(this,t,i,n,o),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var t={format:d.TILED_JSON,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});a.register("tilemapTiledJSON",(function(t,i,n){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new f(this,t[o]));else this.addFile(new f(this,t,i,n));return this})),t.exports=f},function(t,i,n){var o=n(0),a=n(8),u=n(2),d=n(71),f=n(7),p=n(49),b=n(242),S=new o({Extends:p,initialize:function UnityAtlasFile2(t,i,n,o,a,S){var M,C;if(f(i)){var P=i;i=u(P,"key"),M=new d(t,{key:i,url:u(P,"textureURL"),extension:u(P,"textureExtension","png"),normalMap:u(P,"normalMap"),xhrSettings:u(P,"textureXhrSettings")}),C=new b(t,{key:i,url:u(P,"atlasURL"),extension:u(P,"atlasExtension","txt"),xhrSettings:u(P,"atlasXhrSettings")})}else M=new d(t,i,n,a),C=new b(t,i,o,S);M.linkFile?p.call(this,t,"unityatlas",i,[M,C,M.linkFile]):p.call(this,t,"unityatlas",i,[M,C])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],i=this.files[1],n=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(t.key,t.data,i.data,n),i.pendingDestroy(),this.complete=!0}}});a.register("unityAtlas",(function(t,i,n,o,a){var u;if(Array.isArray(t))for(var d=0;d<t.length;d++)u=new S(this,t[d]),this.addFile(u.files);else u=new S(this,t,i,n,o,a),this.addFile(u.files);return this})),t.exports=S},function(t,i,n){var o=n(0),a=n(21),u=n(23),d=n(8),f=n(155),p=n(2),b=n(7),S=new o({Extends:u,initialize:function VideoFile2(t,i,n,o,a,d,f){void 0===o&&(o="loadeddata"),void 0===a&&(a=!1),void 0===d&&(d=!1),"loadeddata"!==o&&"canplay"!==o&&"canplaythrough"!==o&&(o="loadeddata");var p={type:"video",cache:t.cacheManager.video,extension:n.type,responseType:"blob",key:i,url:n.url,xhrSettings:f,config:{loadEvent:o,asBlob:a,noAudio:d}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),u.call(this,t,p)},onProcess:function(){if(this.state=a.FILE_PROCESSING,this.config.asBlob){var t=this.createVideoElement();this.data=t;var i=this;this.data.onloadeddata=function(){i.onProcessComplete()},this.data.onerror=function(){u.revokeObjectURL(i.data),i.onProcessError()},u.createObjectURL(t,this.xhrLoader.response,""),t.load()}else this.onProcessComplete()},createVideoElement:function(){var t=document.createElement("video");return t.controls=!1,t.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(t.muted=!0,t.defaultMuted=!0,t.setAttribute("autoplay","autoplay")),t.setAttribute("playsinline","playsinline"),t.setAttribute("preload","auto"),t},onVideoLoadHandler:function(t){var i=t.target;i.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),i.removeEventListener("error",this.onErrorCallback,!0),this.data=i,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(t){var i=t.target;i&&(i.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),i.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var t=this.config.loadEvent;if(this.config.asBlob)u.prototype.load.call(this);else{this.percentComplete=0;var i=this.createVideoElement();i.addEventListener(t,this.onLoadCallback,!0),i.addEventListener("error",this.onErrorCallback,!0),i.src=f(this,this.loader.baseURL),i.load()}}});S.create=function(t,i,n,o,a,u,d){var f=t.systems.game;b(i)&&(n=p(i,"url",[]),o=p(i,"loadEvent","loadeddata"),a=p(i,"asBlob",!1),u=p(i,"noAudio",!1),d=p(i,"xhrSettings"),i=p(i,"key"));var M=S.getVideoURL(f,n);if(M)return new S(t,i,M,o,a,u,d)},S.getVideoURL=function(t,i){Array.isArray(i)||(i=[i]);for(var n=0;n<i.length;n++){var o,a=p(i[n],"url",i[n]);if(0===a.indexOf("blob:"))return{url:a,type:""};if(o=0===a.indexOf("data:")?a.split(",")[0].match(/\/(.*?);/):a.match(/\.([a-zA-Z0-9]+)($|\?)/),o=p(i[n],"type",o?o[1]:"").toLowerCase(),t.device.video[o])return{url:a,type:o}}return null},d.register("video",(function(t,i,n,o,a,u){var d;if(Array.isArray(t))for(var f=0;f<t.length;f++)(d=S.create(this,t[f]))&&this.addFile(d);else(d=S.create(this,t,i,n,o,a,u))&&this.addFile(d);return this})),t.exports=S},function(t,i,n){var o=n(0),a=n(21),u=n(149),d=n(9),f=n(95),p=n(8),b=n(2),S=n(24),M=n(20),C=n(156),P=new o({Extends:d,initialize:function LoaderPlugin2(t){d.call(this);var i=t.sys.game.config,n=t.sys.settings.loader;this.scene=t,this.systems=t.sys,this.cacheManager=t.sys.cache,this.textureManager=t.sys.textures,this.sceneManager=t.sys.game.scene,p.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(b(n,"baseURL",i.loaderBaseURL)),this.setPath(b(n,"path",i.loaderPath)),this.setPrefix(b(n,"prefix",i.loaderPrefix)),this.maxParallelDownloads=b(n,"maxParallelDownloads",i.loaderMaxParallelDownloads),this.xhr=C(b(n,"responseType",i.loaderResponseType),b(n,"async",i.loaderAsync),b(n,"user",i.loaderUser),b(n,"password",i.loaderPassword),b(n,"timeout",i.loaderTimeout),b(n,"withCredentials",i.loaderWithCredentials)),this.crossOrigin=b(n,"crossOrigin",i.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new u,this.inflight=new u,this.queue=new u,this._deleteQueue=new u,this.totalFailed=0,this.totalComplete=0,this.state=a.LOADER_IDLE,this.multiKeyIndex=0,t.sys.events.once(M.BOOT,this.boot,this),t.sys.events.on(M.START,this.pluginStart,this)},boot:function(){this.systems.events.once(M.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(M.SHUTDOWN,this.shutdown,this)},setBaseURL:function(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.baseURL=t,this},setPath:function(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.path=t,this},setPrefix:function(t){return void 0===t&&(t=""),this.prefix=t,this},setCORS:function(t){return this.crossOrigin=t,this},addFile:function(t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var n=t[i];this.keyExists(n)||(this.list.set(n),this.emit(f.ADD,n.key,n.type,this,n),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(t){var i=t.hasCacheConflict();return i||this.list.iterate((function(n){if(n.type===t.type&&n.key===t.key)return i=!0,!1})),!i&&this.isLoading()&&(this.inflight.iterate((function(n){if(n.type===t.type&&n.key===t.key)return i=!0,!1})),this.queue.iterate((function(n){if(n.type===t.type&&n.key===t.key)return i=!0,!1}))),i},addPack:function(t,i){i&&t.hasOwnProperty(i)&&(t={packKey:t[i]});var n=0,o=this.baseURL,a=this.path,u=this.prefix;for(var d in t)if(Object.prototype.hasOwnProperty.call(t,d)){var f=t[d],p=b(f,"baseURL",o),S=b(f,"path",a),M=b(f,"prefix",u),C=b(f,"files",null),P=b(f,"defaultType","void");if(Array.isArray(C)){this.setBaseURL(p),this.setPath(S),this.setPrefix(M);for(var R=0;R<C.length;R++){var O=C[R],B=O.hasOwnProperty("type")?O.type:P;this[B]&&(this[B](O),n++)}}}return this.setBaseURL(o),this.setPath(a),this.setPrefix(u),n>0},isLoading:function(){return this.state===a.LOADER_LOADING||this.state===a.LOADER_PROCESSING},isReady:function(){return this.state===a.LOADER_IDLE||this.state===a.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(f.START,this),0===this.list.size?this.loadComplete():(this.state=a.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(M.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(f.PROGRESS,this.progress)},update:function(){this.state===a.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each((function(t){if((t.state===a.FILE_POPULATED||t.state===a.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(t),this.list.delete(t),t.crossOrigin||(t.crossOrigin=this.crossOrigin),t.load()),this.inflight.size===this.maxParallelDownloads)return!1}),this)},nextFile:function(t,i){this.inflight&&(this.inflight.delete(t),this.updateProgress(),i?(this.totalComplete++,this.queue.set(t),this.emit(f.FILE_LOAD,t),t.onProcess()):(this.totalFailed++,this._deleteQueue.set(t),this.emit(f.FILE_LOAD_ERROR,t),this.fileProcessComplete(t)))},fileProcessComplete:function(t){this.scene&&this.systems&&this.systems.game&&!this.systems.game.pendingDestroy&&(t.state===a.FILE_ERRORED?t.multiFile&&t.multiFile.onFileFailed(t):t.state===a.FILE_COMPLETE&&(t.multiFile?t.multiFile.isReadyToProcess()&&t.multiFile.addToCache():t.addToCache()),this.queue.delete(t),0===this.list.size&&0===this.inflight.size&&0===this.queue.size&&this.loadComplete())},loadComplete:function(){this.emit(f.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=a.LOADER_COMPLETE,this.systems.events.off(M.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(f.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(t){this._deleteQueue.set(t)},saveJSON:function(t,i){return this.save(JSON.stringify(t),i)},save:function(t,i,n){void 0===i&&(i="file.json"),void 0===n&&(n="application/json");var o=new Blob([t],{type:n}),a=URL.createObjectURL(o),u=document.createElement("a");return u.download=i,u.textContent="Download "+i,u.href=a,u.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var t=this.systems.game.config,i=this.systems.settings.loader;this.setBaseURL(b(i,"baseURL",t.loaderBaseURL)),this.setPath(b(i,"path",t.loaderPath)),this.setPrefix(b(i,"prefix",t.loaderPrefix)),this.state=a.LOADER_IDLE},shutdown:function(){this.reset(),this.state=a.LOADER_SHUTDOWN,this.systems.events.off(M.UPDATE,this.update,this),this.systems.events.off(M.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=a.LOADER_DESTROYED,this.systems.events.off(M.UPDATE,this.update,this),this.systems.events.off(M.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});S.register("Loader",P,"load"),t.exports=P},function(t,i,n){var o=n(62),a=n(17),u={ArcadePhysics:n(1367),Body:n(527),Collider:n(528),Components:n(243),Events:n(245),Factory:n(521),GetOverlapX:n(246),GetOverlapY:n(247),SeparateX:n(537),SeparateY:n(538),Group:n(524),Image:n(522),Sprite:n(157),StaticBody:n(539),StaticGroup:n(525),Tilemap:n(1391),World:n(526)};u=a(!1,u,o),t.exports=u},function(t,i,n){var o=n(0),a=n(36),u=n(50),d=n(353),f=n(521),p=n(2),b=n(127),S=n(523),M=n(244),C=n(24),P=n(20),R=n(3),O=n(526),B=new o({initialize:function ArcadePhysics2(t){this.scene=t,this.systems=t.sys,this.config=this.getConfig(),this.world,this.add,t.sys.events.once(P.BOOT,this.boot,this),t.sys.events.on(P.START,this.start,this)},boot:function(){this.world=new O(this.scene,this.config),this.add=new f(this.world),this.systems.events.once(P.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new O(this.scene,this.config),this.add=new f(this.world));var t=this.systems.events;p(this.config,"customUpdate",!1)||t.on(P.UPDATE,this.world.update,this.world),t.on(P.POST_UPDATE,this.world.postUpdate,this.world),t.once(P.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(P.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(P.UPDATE,this.world.update,this.world)},getConfig:function(){var t=this.systems.game.config.physics,i=this.systems.settings.physics;return b(p(i,"arcade",{}),p(t,"arcade",{}))},overlap:function(t,i,n,o,a){return void 0===n&&(n=null),void 0===o&&(o=null),void 0===a&&(a=n),this.world.collideObjects(t,i,n,o,a,!0)},collide:function(t,i,n,o,a){return void 0===n&&(n=null),void 0===o&&(o=null),void 0===a&&(a=n),this.world.collideObjects(t,i,n,o,a,!1)},collideTiles:function(t,i,n,o,a){return this.world.collideTiles(t,i,n,o,a)},overlapTiles:function(t,i,n,o,a){return this.world.overlapTiles(t,i,n,o,a)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(t,i,n,o,a,u){void 0===o&&(o=60);var d=Math.atan2(n-t.y,i-t.x);return t.body.acceleration.setToPolar(d,o),void 0!==a&&void 0!==u&&t.body.maxVelocity.set(a,u),d},accelerateToObject:function(t,i,n,o,a){return this.accelerateTo(t,i.x,i.y,n,o,a)},closest:function(t,i){i||(i=this.world.bodies.entries);for(var n=Number.MAX_VALUE,o=null,a=t.x,u=t.y,f=i.length,p=0;p<f;p++){var b=i[p],S=b.body||b;if(t!==b&&t!==S&&t!==S.gameObject&&t!==S.center){var M=d(a,u,S.center.x,S.center.y);M<n&&(o=b,n=M)}}return o},furthest:function(t,i){i||(i=this.world.bodies.entries);for(var n=-1,o=null,a=t.x,u=t.y,f=i.length,p=0;p<f;p++){var b=i[p],S=b.body||b;if(t!==b&&t!==S&&t!==S.gameObject&&t!==S.center){var M=d(a,u,S.center.x,S.center.y);M>n&&(o=b,n=M)}}return o},moveTo:function(t,i,n,o,a){void 0===o&&(o=60),void 0===a&&(a=0);var d=Math.atan2(n-t.y,i-t.x);return a>0&&(o=u(t.x,t.y,i,n)/(a/1e3)),t.body.velocity.setToPolar(d,o),d},moveToObject:function(t,i,n,o){return this.moveTo(t,i.x,i.y,n,o)},velocityFromAngle:function(t,i,n){return void 0===i&&(i=60),void 0===n&&(n=new R),n.setToPolar(a(t),i)},velocityFromRotation:function(t,i,n){return void 0===i&&(i=60),void 0===n&&(n=new R),n.setToPolar(t,i)},overlapRect:function(t,i,n,o,a,u){return M(this.world,t,i,n,o,a,u)},overlapCirc:function(t,i,n,o,a){return S(this.world,t,i,n,o,a)},shutdown:function(){if(this.world){var t=this.systems.events;t.off(P.UPDATE,this.world.update,this.world),t.off(P.POST_UPDATE,this.world.postUpdate,this.world),t.off(P.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(P.START,this.start,this),this.scene=null,this.systems=null}});C.register("ArcadePhysics",B,"arcadePhysics"),t.exports=B},function(t,i){t.exports={setAcceleration:function(t,i){return this.body.acceleration.set(t,i),this},setAccelerationX:function(t){return this.body.acceleration.x=t,this},setAccelerationY:function(t){return this.body.acceleration.y=t,this}}},function(t,i){t.exports={setAngularVelocity:function(t){return this.body.angularVelocity=t,this},setAngularAcceleration:function(t){return this.body.angularAcceleration=t,this},setAngularDrag:function(t){return this.body.angularDrag=t,this}}},function(t,i){t.exports={setBounce:function(t,i){return this.body.bounce.set(t,i),this},setBounceX:function(t){return this.body.bounce.x=t,this},setBounceY:function(t){return this.body.bounce.y=t,this},setCollideWorldBounds:function(t,i,n){return this.body.setCollideWorldBounds(t,i,n),this}}},function(t,i){t.exports={setDebug:function(t,i,n){return this.debugShowBody=t,this.debugShowVelocity=i,this.debugBodyColor=n,this},setDebugBodyColor:function(t){return this.body.debugBodyColor=t,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(t){this.body.debugShowBody=t}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(t){this.body.debugShowVelocity=t}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(t){this.body.debugBodyColor=t}}}},function(t,i){t.exports={setDrag:function(t,i){return this.body.drag.set(t,i),this},setDragX:function(t){return this.body.drag.x=t,this},setDragY:function(t){return this.body.drag.y=t,this},setDamping:function(t){return this.body.useDamping=t,this}}},function(t,i){t.exports={enableBody:function(t,i,n,o,a){return t&&this.body.reset(i,n),o&&(this.body.gameObject.active=!0),a&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(t,i){return void 0===t&&(t=!1),void 0===i&&(i=!1),this.body.stop(),this.body.enable=!1,t&&(this.body.gameObject.active=!1),i&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}}},function(t,i){t.exports={setFriction:function(t,i){return this.body.friction.set(t,i),this},setFrictionX:function(t){return this.body.friction.x=t,this},setFrictionY:function(t){return this.body.friction.y=t,this}}},function(t,i){t.exports={setGravity:function(t,i){return this.body.gravity.set(t,i),this},setGravityX:function(t){return this.body.gravity.x=t,this},setGravityY:function(t){return this.body.gravity.y=t,this}}},function(t,i){t.exports={setImmovable:function(t){return void 0===t&&(t=!0),this.body.immovable=t,this}}},function(t,i){t.exports={setMass:function(t){return this.body.mass=t,this}}},function(t,i){t.exports={setPushable:function(t){return void 0===t&&(t=!0),this.body.pushable=t,this}}},function(t,i){t.exports={setOffset:function(t,i){return this.body.setOffset(t,i),this},setSize:function(t,i,n){return this.body.setSize(t,i,n),this},setBodySize:function(t,i,n){return this.body.setSize(t,i,n),this},setCircle:function(t,i,n){return this.body.setCircle(t,i,n),this}}},function(t,i){t.exports={setVelocity:function(t,i){return this.body.setVelocity(t,i),this},setVelocityX:function(t){return this.body.setVelocityX(t),this},setVelocityY:function(t){return this.body.setVelocityY(t),this},setMaxVelocity:function(t,i){return this.body.maxVelocity.set(t,i),this}}},function(t,i){t.exports="collide"},function(t,i){t.exports="overlap"},function(t,i){t.exports="pause"},function(t,i){t.exports="resume"},function(t,i){t.exports="tilecollide"},function(t,i){t.exports="tileoverlap"},function(t,i){t.exports="worldbounds"},function(t,i){t.exports="worldstep"},function(t,i){var n,o,a,u,d,f,p,b,S,M,C,P,R,O,B,N,Y,BlockCheck=function(){return M&&B&&o.blocked.right?(n.processX(-Y,p,!1,!0),1):S&&N&&o.blocked.left?(n.processX(Y,p,!0),1):R&&N&&n.blocked.right?(o.processX(-Y,b,!1,!0),2):P&&B&&n.blocked.left?(o.processX(Y,b,!0),2):0},Run=function(t){if(a&&u)Y*=.5,0===t||3===t?(n.processX(Y,d),o.processX(-Y,f)):(n.processX(-Y,d),o.processX(Y,f));else if(a&&!u)0===t||3===t?n.processX(Y,p,!0):n.processX(-Y,p,!1,!0);else if(!a&&u)0===t||3===t?o.processX(-Y,b,!1,!0):o.processX(Y,b,!0);else{var i=.5*Y;0===t?O?(n.processX(Y,0,!0),o.processX(0,null,!1,!0)):R?(n.processX(i,0,!0),o.processX(-i,0,!1,!0)):(n.processX(i,o.velocity.x,!0),o.processX(-i,null,!1,!0)):1===t?C?(n.processX(0,null,!1,!0),o.processX(Y,0,!0)):M?(n.processX(-i,0,!1,!0),o.processX(i,0,!0)):(n.processX(-i,null,!1,!0),o.processX(i,n.velocity.x,!0)):2===t?O?(n.processX(-Y,0,!1,!0),o.processX(0,null,!0)):P?(n.processX(-i,0,!1,!0),o.processX(i,0,!0)):(n.processX(-i,o.velocity.x,!1,!0),o.processX(i,null,!0)):3===t&&(C?(n.processX(0,null,!0),o.processX(-Y,0,!1,!0)):S?(n.processX(i,0,!0),o.processX(-i,0,!1,!0)):(n.processX(i,o.velocity.y,!0),o.processX(-i,null,!1,!0)))}return!0};t.exports={BlockCheck:BlockCheck,Check:function(){var t=n.velocity.x,i=o.velocity.x,a=Math.sqrt(i*i*o.mass/n.mass)*(i>0?1:-1),u=Math.sqrt(t*t*n.mass/o.mass)*(t>0?1:-1),p=.5*(a+u);return u-=p,d=p+(a-=p)*n.bounce.x,f=p+u*o.bounce.x,S&&N?Run(0):P&&B?Run(1):M&&B?Run(2):!(!R||!N)&&Run(3)},Set:function(t,i,d){o=i;var f=(n=t).velocity.x,X=o.velocity.x;return a=n.pushable,S=n._dx<0,M=n._dx>0,C=0===n._dx,B=Math.abs(n.right-o.x)<=Math.abs(o.right-n.x),p=X-f*n.bounce.x,u=o.pushable,P=o._dx<0,R=o._dx>0,O=0===o._dx,N=!B,b=f-X*o.bounce.x,Y=Math.abs(d),BlockCheck()},Run:Run,RunImmovableBody1:function(t){1===t?o.velocity.x=0:B?o.processX(Y,b,!0):o.processX(-Y,b,!1,!0),n.moves&&(o.y+=(n.y-n.prev.y)*n.friction.y,o._dy=o.y-o.prev.y)},RunImmovableBody2:function(t){2===t?n.velocity.x=0:N?n.processX(Y,p,!0):n.processX(-Y,p,!1,!0),o.moves&&(n.y+=(o.y-o.prev.y)*o.friction.y,n._dy=n.y-n.prev.y)}}},function(t,i){var n,o,a,u,d,f,p,b,S,M,C,P,R,O,B,N,Y,BlockCheck=function(){return M&&B&&o.blocked.down?(n.processY(-Y,p,!1,!0),1):S&&N&&o.blocked.up?(n.processY(Y,p,!0),1):R&&N&&n.blocked.down?(o.processY(-Y,b,!1,!0),2):P&&B&&n.blocked.up?(o.processY(Y,b,!0),2):0},Run=function(t){if(a&&u)Y*=.5,0===t||3===t?(n.processY(Y,d),o.processY(-Y,f)):(n.processY(-Y,d),o.processY(Y,f));else if(a&&!u)0===t||3===t?n.processY(Y,p,!0):n.processY(-Y,p,!1,!0);else if(!a&&u)0===t||3===t?o.processY(-Y,b,!1,!0):o.processY(Y,b,!0);else{var i=.5*Y;0===t?O?(n.processY(Y,0,!0),o.processY(0,null,!1,!0)):R?(n.processY(i,0,!0),o.processY(-i,0,!1,!0)):(n.processY(i,o.velocity.y,!0),o.processY(-i,null,!1,!0)):1===t?C?(n.processY(0,null,!1,!0),o.processY(Y,0,!0)):M?(n.processY(-i,0,!1,!0),o.processY(i,0,!0)):(n.processY(-i,null,!1,!0),o.processY(i,n.velocity.y,!0)):2===t?O?(n.processY(-Y,0,!1,!0),o.processY(0,null,!0)):P?(n.processY(-i,0,!1,!0),o.processY(i,0,!0)):(n.processY(-i,o.velocity.y,!1,!0),o.processY(i,null,!0)):3===t&&(C?(n.processY(0,null,!0),o.processY(-Y,0,!1,!0)):S?(n.processY(i,0,!0),o.processY(-i,0,!1,!0)):(n.processY(i,o.velocity.y,!0),o.processY(-i,null,!1,!0)))}return!0};t.exports={BlockCheck:BlockCheck,Check:function(){var t=n.velocity.y,i=o.velocity.y,a=Math.sqrt(i*i*o.mass/n.mass)*(i>0?1:-1),u=Math.sqrt(t*t*n.mass/o.mass)*(t>0?1:-1),p=.5*(a+u);return u-=p,d=p+(a-=p)*n.bounce.y,f=p+u*o.bounce.y,S&&N?Run(0):P&&B?Run(1):M&&B?Run(2):!(!R||!N)&&Run(3)},Set:function(t,i,d){o=i;var f=(n=t).velocity.y,X=o.velocity.y;return a=n.pushable,S=n._dy<0,M=n._dy>0,C=0===n._dy,B=Math.abs(n.bottom-o.y)<=Math.abs(o.bottom-n.y),p=X-f*n.bounce.y,u=o.pushable,P=o._dy<0,R=o._dy>0,O=0===o._dy,N=!B,b=f-X*o.bounce.y,Y=Math.abs(d),BlockCheck()},Run:Run,RunImmovableBody1:function(t){1===t?o.velocity.y=0:B?o.processY(Y,b,!0):o.processY(-Y,b,!1,!0),n.moves&&(o.x+=(n.x-n.prev.x)*n.friction.x,o._dx=o.x-o.prev.x)},RunImmovableBody2:function(t){2===t?n.velocity.y=0:N?n.processY(Y,p,!0):n.processY(-Y,p,!1,!0),o.moves&&(n.x+=(o.x-o.prev.x)*o.friction.x,n._dx=n.x-n.prev.x)}}},function(t,i,n){var o={ProcessTileCallbacks:n(530),ProcessTileSeparationX:n(534),ProcessTileSeparationY:n(536),SeparateTile:n(532),TileCheckX:n(533),TileCheckY:n(535),TileIntersectsBody:n(248)};t.exports=o},function(t,i,n){var o=n(0),a=n(3),u=new o({initialize:function BodyBounds2(){this.boundsCenter=new a,this.centerDiff=new a},parseBody:function(t){if(!(t=t.hasOwnProperty("body")?t.body:t).hasOwnProperty("bounds")||!t.hasOwnProperty("centerOfMass"))return!1;var i=this.boundsCenter,n=this.centerDiff,o=t.bounds.max.x-t.bounds.min.x,a=t.bounds.max.y-t.bounds.min.y,u=o*t.centerOfMass.x,d=a*t.centerOfMass.y;return i.set(o/2,a/2),n.set(u-i.x,d-i.y),!0},getTopLeft:function(t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),this.parseBody(t)){var o=this.boundsCenter,u=this.centerDiff;return new a(i+o.x+u.x,n+o.y+u.y)}return!1},getTopCenter:function(t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),this.parseBody(t)){var o=this.boundsCenter,u=this.centerDiff;return new a(i+u.x,n+o.y+u.y)}return!1},getTopRight:function(t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),this.parseBody(t)){var o=this.boundsCenter,u=this.centerDiff;return new a(i-(o.x-u.x),n+o.y+u.y)}return!1},getLeftCenter:function(t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),this.parseBody(t)){var o=this.boundsCenter,u=this.centerDiff;return new a(i+o.x+u.x,n+u.y)}return!1},getCenter:function(t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),this.parseBody(t)){var o=this.centerDiff;return new a(i+o.x,n+o.y)}return!1},getRightCenter:function(t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),this.parseBody(t)){var o=this.boundsCenter,u=this.centerDiff;return new a(i-(o.x-u.x),n+u.y)}return!1},getBottomLeft:function(t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),this.parseBody(t)){var o=this.boundsCenter,u=this.centerDiff;return new a(i+o.x+u.x,n-(o.y-u.y))}return!1},getBottomCenter:function(t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),this.parseBody(t)){var o=this.boundsCenter,u=this.centerDiff;return new a(i+u.x,n-(o.y-u.y))}return!1},getBottomRight:function(t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),this.parseBody(t)){var o=this.boundsCenter,u=this.centerDiff;return new a(i-(o.x-u.x),n-(o.y-u.y))}return!1}});t.exports=u},function(t,i){function lineInt(t,i,n){n=n||0;var o,a,u,d,f,p,b,S=[0,0];return o=t[1][1]-t[0][1],a=t[0][0]-t[1][0],u=o*t[0][0]+a*t[0][1],d=i[1][1]-i[0][1],f=i[0][0]-i[1][0],p=d*i[0][0]+f*i[0][1],scalar_eq(b=o*f-d*a,0,n)||(S[0]=(f*u-a*p)/b,S[1]=(o*p-d*u)/b),S}function lineSegmentsIntersect(t,i,n,o){var a=i[0]-t[0],u=i[1]-t[1],d=o[0]-n[0],f=o[1]-n[1];if(d*u-f*a==0)return!1;var p=(a*(n[1]-t[1])+u*(t[0]-n[0]))/(d*u-f*a),b=(d*(t[1]-n[1])+f*(n[0]-t[0]))/(f*a-d*u);return p>=0&&p<=1&&b>=0&&b<=1}function triangleArea(t,i,n){return(i[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(i[1]-t[1])}function isLeft(t,i,n){return triangleArea(t,i,n)>0}function isLeftOn(t,i,n){return triangleArea(t,i,n)>=0}function isRight(t,i,n){return triangleArea(t,i,n)<0}function isRightOn(t,i,n){return triangleArea(t,i,n)<=0}t.exports={decomp:function polygonDecomp(t){var i=polygonGetCutEdges(t);return i.length>0?polygonSlice(t,i):[t]},quickDecomp:function polygonQuickDecomp(t,i,n,o,a,u,d){u=u||100,d=d||0,a=a||25,i=void 0!==i?i:[],n=n||[],o=o||[];var f=[0,0],p=[0,0],b=[0,0],S=0,M=0,C=0,P=0,R=0,O=0,B=0,N=[],Y=[],X=t,G=t;if(G.length<3)return i;if(++d>u)return console.warn("quickDecomp: max level ("+u+") reached."),i;for(var U=0;U<t.length;++U)if(polygonIsReflex(X,U)){n.push(X[U]),S=M=Number.MAX_VALUE;for(var V=0;V<t.length;++V)isLeft(polygonAt(X,U-1),polygonAt(X,U),polygonAt(X,V))&&isRightOn(polygonAt(X,U-1),polygonAt(X,U),polygonAt(X,V-1))&&(b=getIntersectionPoint(polygonAt(X,U-1),polygonAt(X,U),polygonAt(X,V),polygonAt(X,V-1)),isRight(polygonAt(X,U+1),polygonAt(X,U),b)&&(C=sqdist(X[U],b))<M&&(M=C,p=b,O=V)),isLeft(polygonAt(X,U+1),polygonAt(X,U),polygonAt(X,V+1))&&isRightOn(polygonAt(X,U+1),polygonAt(X,U),polygonAt(X,V))&&(b=getIntersectionPoint(polygonAt(X,U+1),polygonAt(X,U),polygonAt(X,V),polygonAt(X,V+1)),isLeft(polygonAt(X,U-1),polygonAt(X,U),b)&&(C=sqdist(X[U],b))<S&&(S=C,f=b,R=V));if(O===(R+1)%t.length)b[0]=(p[0]+f[0])/2,b[1]=(p[1]+f[1])/2,o.push(b),U<R?(polygonAppend(N,X,U,R+1),N.push(b),Y.push(b),0!==O&&polygonAppend(Y,X,O,X.length),polygonAppend(Y,X,0,U+1)):(0!==U&&polygonAppend(N,X,U,X.length),polygonAppend(N,X,0,R+1),N.push(b),Y.push(b),polygonAppend(Y,X,O,U+1));else{if(O>R&&(R+=t.length),P=Number.MAX_VALUE,R<O)return i;for(V=O;V<=R;++V)isLeftOn(polygonAt(X,U-1),polygonAt(X,U),polygonAt(X,V))&&isRightOn(polygonAt(X,U+1),polygonAt(X,U),polygonAt(X,V))&&(C=sqdist(polygonAt(X,U),polygonAt(X,V)))<P&&polygonCanSee2(X,U,V)&&(P=C,B=V%t.length);U<B?(polygonAppend(N,X,U,B+1),0!==B&&polygonAppend(Y,X,B,G.length),polygonAppend(Y,X,0,U+1)):(0!==U&&polygonAppend(N,X,U,G.length),polygonAppend(N,X,0,B+1),polygonAppend(Y,X,B,U+1))}return N.length<Y.length?(polygonQuickDecomp(N,i,n,o,a,u,d),polygonQuickDecomp(Y,i,n,o,a,u,d)):(polygonQuickDecomp(Y,i,n,o,a,u,d),polygonQuickDecomp(N,i,n,o,a,u,d)),i}return i.push(t),i},isSimple:function polygonIsSimple(t){var i,n=t;for(i=0;i<n.length-1;i++)for(var o=0;o<i-1;o++)if(lineSegmentsIntersect(n[i],n[i+1],n[o],n[o+1]))return!1;for(i=1;i<n.length-2;i++)if(lineSegmentsIntersect(n[0],n[n.length-1],n[i],n[i+1]))return!1;return!0},removeCollinearPoints:function polygonRemoveCollinearPoints(t,i){for(var n=0,o=t.length-1;t.length>3&&o>=0;--o)collinear(polygonAt(t,o-1),polygonAt(t,o),polygonAt(t,o+1),i)&&(t.splice(o%t.length,1),n++);return n},removeDuplicatePoints:function polygonRemoveDuplicatePoints(t,i){for(var n=t.length-1;n>=1;--n)for(var o=t[n],a=n-1;a>=0;--a)points_eq(o,t[a],i)&&t.splice(n,1)},makeCCW:function polygonMakeCCW(t){for(var i=0,n=t,o=1;o<t.length;++o)(n[o][1]<n[i][1]||n[o][1]===n[i][1]&&n[o][0]>n[i][0])&&(i=o);return!isLeft(polygonAt(t,i-1),polygonAt(t,i),polygonAt(t,i+1))&&(function polygonReverse(t){for(var i=[],n=t.length,o=0;o!==n;o++)i.push(t.pop());for(o=0;o!==n;o++)t[o]=i[o]}(t),!0)}};var n=[],o=[];function collinear(t,i,a,u){if(u){var d=n,f=o;d[0]=i[0]-t[0],d[1]=i[1]-t[1],f[0]=a[0]-i[0],f[1]=a[1]-i[1];var p=d[0]*f[0]+d[1]*f[1],b=Math.sqrt(d[0]*d[0]+d[1]*d[1]),S=Math.sqrt(f[0]*f[0]+f[1]*f[1]);return Math.acos(p/(b*S))<u}return 0===triangleArea(t,i,a)}function sqdist(t,i){var n=i[0]-t[0],o=i[1]-t[1];return n*n+o*o}function polygonAt(t,i){var n=t.length;return t[i<0?i%n+n:i%n]}function polygonAppend(t,i,n,o){for(var a=n;a<o;a++)t.push(i[a])}function polygonIsReflex(t,i){return isRight(polygonAt(t,i-1),polygonAt(t,i),polygonAt(t,i+1))}var a=[],u=[];function polygonCanSee(t,i,n){var o,d,f=a,p=u;if(isLeftOn(polygonAt(t,i+1),polygonAt(t,i),polygonAt(t,n))&&isRightOn(polygonAt(t,i-1),polygonAt(t,i),polygonAt(t,n)))return!1;d=sqdist(polygonAt(t,i),polygonAt(t,n));for(var b=0;b!==t.length;++b)if((b+1)%t.length!==i&&b!==i&&isLeftOn(polygonAt(t,i),polygonAt(t,n),polygonAt(t,b+1))&&isRightOn(polygonAt(t,i),polygonAt(t,n),polygonAt(t,b))&&(f[0]=polygonAt(t,i),f[1]=polygonAt(t,n),p[0]=polygonAt(t,b),p[1]=polygonAt(t,b+1),o=lineInt(f,p),sqdist(polygonAt(t,i),o)<d))return!1;return!0}function polygonCanSee2(t,i,n){for(var o=0;o!==t.length;++o)if(o!==i&&o!==n&&(o+1)%t.length!==i&&(o+1)%t.length!==n&&lineSegmentsIntersect(polygonAt(t,i),polygonAt(t,n),polygonAt(t,o),polygonAt(t,o+1)))return!1;return!0}function polygonCopy(t,i,n,o){var a=o||[];if(function polygonClear(t){t.length=0}(a),i<n)for(var u=i;u<=n;u++)a.push(t[u]);else{for(u=0;u<=n;u++)a.push(t[u]);for(u=i;u<t.length;u++)a.push(t[u])}return a}function polygonGetCutEdges(t){for(var i=[],n=[],o=[],a=[],u=Number.MAX_VALUE,d=0;d<t.length;++d)if(polygonIsReflex(t,d))for(var f=0;f<t.length;++f)if(polygonCanSee(t,d,f)){n=polygonGetCutEdges(polygonCopy(t,d,f,a)),o=polygonGetCutEdges(polygonCopy(t,f,d,a));for(var p=0;p<o.length;p++)n.push(o[p]);n.length<u&&(i=n,u=n.length,i.push([polygonAt(t,d),polygonAt(t,f)]))}return i}function polygonSlice(t,i){if(0===i.length)return[t];if(i instanceof Array&&i.length&&i[0]instanceof Array&&2===i[0].length&&i[0][0]instanceof Array){for(var n=[t],o=0;o<i.length;o++)for(var a=i[o],u=0;u<n.length;u++){var d=polygonSlice(n[u],a);if(d){n.splice(u,1),n.push(d[0],d[1]);break}}return n}return a=i,o=t.indexOf(a[0]),u=t.indexOf(a[1]),-1!==o&&-1!==u&&[polygonCopy(t,o,u),polygonCopy(t,u,o)]}function getIntersectionPoint(t,i,n,o,a){a=a||0;var u=i[1]-t[1],d=t[0]-i[0],f=u*t[0]+d*t[1],p=o[1]-n[1],b=n[0]-o[0],S=p*n[0]+b*n[1],M=u*b-p*d;return scalar_eq(M,0,a)?[0,0]:[(b*f-d*S)/M,(u*S-p*f)/M]}function scalar_eq(t,i,n){return n=n||0,Math.abs(t-i)<=n}function points_eq(t,i,n){return scalar_eq(t[0],i[0],n)&&scalar_eq(t[1],i[1],n)}},function(t,i,n){var o=n(86),a=n(0),u=n(591),d=n(128),f=n(592),p=n(1395),b=n(1396),S=n(1397),M=n(593),C=n(589),P=n(590),R=n(1398),O=n(64),B=new a({initialize:function Factory2(t){this.world=t,this.scene=t.scene,this.sys=t.scene.sys},rectangle:function(t,i,n,a,u){var d=o.rectangle(t,i,n,a,u);return this.world.add(d),d},trapezoid:function(t,i,n,a,u,d){var f=o.trapezoid(t,i,n,a,u,d);return this.world.add(f),f},circle:function(t,i,n,a,u){var d=o.circle(t,i,n,a,u);return this.world.add(d),d},polygon:function(t,i,n,a,u){var d=o.polygon(t,i,n,a,u);return this.world.add(d),d},fromVertices:function(t,i,n,a,u,d,f){"string"==typeof n&&(n=O.fromPath(n));var p=o.fromVertices(t,i,n,a,u,d,f);return this.world.add(p),p},fromPhysicsEditor:function(t,i,n,o,a){void 0===a&&(a=!0);var u=C.parseBody(t,i,n,o);return a&&!this.world.has(u)&&this.world.add(u),u},fromSVG:function(t,i,n,a,u,d){void 0===a&&(a=1),void 0===u&&(u={}),void 0===d&&(d=!0);for(var p=n.getElementsByTagName("path"),b=[],S=0;S<p.length;S++){var M=f.pathToVertices(p[S],30);1!==a&&O.scale(M,a,a),b.push(M)}var C=o.fromVertices(t,i,b,u);return d&&this.world.add(C),C},fromJSON:function(t,i,n,o,a){void 0===o&&(o={}),void 0===a&&(a=!0);var u=P.parseBody(t,i,n,o);return u&&a&&this.world.add(u),u},imageStack:function(t,i,n,o,a,d,f,p,S){void 0===f&&(f=0),void 0===p&&(p=0),void 0===S&&(S={});var M=this.world,C=this.sys.displayList;S.addToWorld=!1;var P=u.stack(n,o,a,d,f,p,(function(n,o){var a=new b(M,n,o,t,i,S);return C.add(a),a.body}));return M.add(P),P},stack:function(t,i,n,o,a,d,f){var p=u.stack(t,i,n,o,a,d,f);return this.world.add(p),p},pyramid:function(t,i,n,o,a,d,f){var p=u.pyramid(t,i,n,o,a,d,f);return this.world.add(p),p},chain:function(t,i,n,o,a,d){return u.chain(t,i,n,o,a,d)},mesh:function(t,i,n,o,a){return u.mesh(t,i,n,o,a)},newtonsCradle:function(t,i,n,o,a){var d=u.newtonsCradle(t,i,n,o,a);return this.world.add(d),d},car:function(t,i,n,o,a){var d=u.car(t,i,n,o,a);return this.world.add(d),d},softBody:function(t,i,n,o,a,d,f,p,b,S){var M=u.softBody(t,i,n,o,a,d,f,p,b,S);return this.world.add(M),M},joint:function(t,i,n,o,a){return this.constraint(t,i,n,o,a)},spring:function(t,i,n,o,a){return this.constraint(t,i,n,o,a)},constraint:function(t,i,n,o,a){void 0===o&&(o=1),void 0===a&&(a={}),a.bodyA="body"===t.type?t:t.body,a.bodyB="body"===i.type?i:i.body,isNaN(n)||(a.length=n),a.stiffness=o;var u=d.create(a);return this.world.add(u),u},worldConstraint:function(t,i,n,o){void 0===n&&(n=1),void 0===o&&(o={}),o.bodyB="body"===t.type?t:t.body,isNaN(i)||(o.length=i),o.stiffness=n;var a=d.create(o);return this.world.add(a),a},mouseSpring:function(t){return this.pointerConstraint(t)},pointerConstraint:function(t){void 0===t&&(t={}),t.hasOwnProperty("render")||(t.render={visible:!1});var i=new R(this.scene,this.world,t);return this.world.add(i.constraint),i},image:function(t,i,n,o,a){var u=new b(this.world,t,i,n,o,a);return this.sys.displayList.add(u),u},tileBody:function(t,i){return new M(this.world,t,i)},sprite:function(t,i,n,o,a){var u=new S(this.world,t,i,n,o,a);return this.sys.displayList.add(u),this.sys.updateList.add(u),u},gameObject:function(t,i,n){return p(this.world,t,i,n)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});t.exports=B},function(t,i,n){var o=n(249),a=n(2),u=n(3);t.exports=function(t,i,n,d){void 0===n&&(n={}),void 0===d&&(d=!0);var f=i.x,p=i.y;if(i.body={temp:!0,position:{x:f,y:p}},[o.Bounce,o.Collision,o.Force,o.Friction,o.Gravity,o.Mass,o.Sensor,o.SetBody,o.Sleep,o.Static,o.Transform,o.Velocity].forEach((function(t){for(var n in t)(o=t[n]).get&&"function"==typeof o.get||o.set&&"function"==typeof o.set?Object.defineProperty(i,n,{get:t[n].get,set:t[n].set}):Object.defineProperty(i,n,{value:t[n]});var o})),i.world=t,i._tempVec2=new u(f,p),n.hasOwnProperty("type")&&"body"===n.type)i.setExistingBody(n,d);else{var b=a(n,"shape",null);b||(b="rectangle"),n.addToWorld=d,i.setBody(b,n)}return i}},function(t,i,n){var o=n(0),a=n(249),u=n(15),d=n(2),f=n(125),p=n(167),b=n(3),S=new o({Extends:f,Mixins:[a.Bounce,a.Collision,a.Force,a.Friction,a.Gravity,a.Mass,a.Sensor,a.SetBody,a.Sleep,a.Static,a.Transform,a.Velocity,p],initialize:function MatterImage2(t,i,n,o,a,f){u.call(this,t.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(o,a),this.setSizeToFrame(),this.setOrigin(),this.world=t,this._tempVec2=new b(i,n);var p=d(f,"shape",null);p?this.setBody(p,f):this.setRectangle(this.width,this.height,f),this.setPosition(i,n),this.initPipeline()}});t.exports=S},function(t,i,n){var o=n(164),a=n(0),u=n(249),d=n(15),f=n(2),p=n(167),b=n(73),S=n(3),M=new a({Extends:b,Mixins:[u.Bounce,u.Collision,u.Force,u.Friction,u.Gravity,u.Mass,u.Sensor,u.SetBody,u.Sleep,u.Static,u.Transform,u.Velocity,p],initialize:function MatterSprite2(t,i,n,a,u,p){d.call(this,t.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new o(this),this.setTexture(a,u),this.setSizeToFrame(),this.setOrigin(),this.world=t,this._tempVec2=new S(i,n);var b=f(p,"shape",null);b?this.setBody(b,p):this.setRectangle(this.width,this.height,p),this.setPosition(i,n),this.initPipeline()}});t.exports=M},function(t,i,n){var o=n(84),a=n(0),u=n(118),d=n(128),f=n(273),p=n(272),b=n(51),S=n(127),M=n(165),C=n(3),P=n(64),R=new a({initialize:function PointerConstraint2(t,i,n){void 0===n&&(n={}),this.scene=t,this.world=i,this.camera=null,this.pointer=null,this.active=!0,this.position=new C,this.body=null,this.part=null,this.constraint=d.create(S(n,{label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}})),this.world.on(p.BEFORE_UPDATE,this.update,this),t.sys.input.on(b.POINTER_DOWN,this.onDown,this),t.sys.input.on(b.POINTER_UP,this.onUp,this)},onDown:function(t){this.pointer||(this.pointer=t,this.camera=t.camera)},onUp:function(t){t===this.pointer&&(this.pointer=null)},getBody:function(t){var i=this.position,n=this.constraint;this.camera.getWorldPoint(t.x,t.y,i);for(var a=u.allBodies(this.world.localWorld),d=0;d<a.length;d++){var b=a[d];if(!b.ignorePointer&&o.contains(b.bounds,i)&&f.canCollide(b.collisionFilter,n.collisionFilter)&&this.hitTestBody(b,i))return this.world.emit(p.DRAG_START,b,this.part,this),!0}return!1},hitTestBody:function(t,i){for(var n=this.constraint,o=t.parts.length,a=o>1?1:0;a<o;a++){var u=t.parts[a];if(P.contains(u.vertices,i))return n.pointA=i,n.pointB={x:i.x-t.position.x,y:i.y-t.position.y},n.bodyB=t,n.angleB=t.angle,M.set(t,!1),this.part=u,this.body=t,!0}return!1},update:function(){var t=this.pointer,i=this.body;if(this.active&&t)if(t.isDown||!i){if(t.isDown){if(!i&&!this.getBody(t))return;i=this.body;var n=this.position,o=this.constraint;this.camera.getWorldPoint(t.x,t.y,n),o.pointA.x=n.x,o.pointA.y=n.y,M.set(i,!1),this.world.emit(p.DRAG,i,this)}}else this.stopDrag();else i&&this.stopDrag()},stopDrag:function(){var t=this.body,i=this.constraint;i.bodyB=null,i.pointB=null,this.pointer=null,this.body=null,this.part=null,t&&this.world.emit(p.DRAG_END,t,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(p.BEFORE_UPDATE,this.update),this.scene.sys.input.off(b.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(b.POINTER_UP,this.onUp,this)}});t.exports=R},function(t,i,n){var o={};t.exports=o;var a=n(595),u=n(32);o.name="matter-js",o.version="0.14.2",o.uses=[],o.used=[],o.use=function(){a.use(o,Array.prototype.slice.call(arguments))},o.before=function(t,i){return t=t.replace(/^Matter./,""),u.chainPathBefore(o,t,i)},o.after=function(t,i){return t=t.replace(/^Matter./,""),u.chainPathAfter(o,t,i)}},function(t,i,n){var o={};t.exports=o;var a=n(83),u=n(274),d=n(84),f=n(86),p=n(64);o.collides=function(t,i){for(var n=[],o=0;o<i.length;o++){var a=i[o];if(t!==a&&d.overlaps(a.bounds,t.bounds))for(var f=1===a.parts.length?0:1;f<a.parts.length;f++){var p=a.parts[f];if(d.overlaps(p.bounds,t.bounds)){var b=u.collides(p,t);if(b.collided){n.push(b);break}}}}return n},o.ray=function(t,i,n,u){u=u||1e-100;for(var d=a.angle(i,n),p=a.magnitude(a.sub(i,n)),b=.5*(n.x+i.x),S=.5*(n.y+i.y),M=f.rectangle(b,S,p,u,{angle:d}),C=o.collides(M,t),P=0;P<C.length;P+=1){var R=C[P];R.body=R.bodyB=R.bodyA}return C},o.region=function(t,i,n){for(var o=[],a=0;a<t.length;a++){var u=t[a],f=d.overlaps(u.bounds,i);(f&&!n||!f&&n)&&o.push(u)}return o},o.point=function(t,i){for(var n=[],o=0;o<t.length;o++){var a=t[o];if(d.contains(a.bounds,i))for(var u=1===a.parts.length?0:1;u<a.parts.length;u++){var f=a.parts[u];if(d.contains(f.bounds,i)&&p.contains(f.vertices,i)){n.push(a);break}}}return n}},function(t,i,n){var o={};t.exports=o;var a=n(596),u=n(165),d=n(599),f=n(598),p=n(1523),b=n(597),S=n(166),M=n(118),C=n(128),P=n(32),R=n(41);o.create=function(t,i){i=(i=P.isElement(t)?i:t)||{},((t=P.isElement(t)?t:null)||i.render)&&P.warn("Engine.create: engine.render is deprecated (see docs)");var n={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:b}},o=P.extend(n,i);return o.world=i.world||a.create(o.world),o.pairs=f.create(),o.broadphase=o.broadphase.controller.create(o.broadphase),o.metrics=o.metrics||{extended:!1},o.metrics=p.create(o.metrics),o},o.update=function(t,i,n){i=i||1e3/60,n=n||1;var a,b=t.world,P=t.timing,R=t.broadphase,O=[];P.timestamp+=i*P.timeScale;var B={timestamp:P.timestamp};S.trigger(t,"beforeUpdate",B);var N=M.allBodies(b),Y=M.allConstraints(b);for(p.reset(t.metrics),t.enableSleeping&&u.update(N,P.timeScale),o._bodiesApplyGravity(N,b.gravity),o._bodiesUpdate(N,i,P.timeScale,n,b.bounds),C.preSolveAll(N),a=0;a<t.constraintIterations;a++)C.solveAll(Y,P.timeScale);C.postSolveAll(N),R.controller?(b.isModified&&R.controller.clear(R),R.controller.update(R,N,t,b.isModified),O=R.pairsList):O=N,b.isModified&&M.setModified(b,!1,!1,!0);var X=R.detector(O,t),G=t.pairs,U=P.timestamp;for(f.update(G,X,U),f.removeOld(G,U),t.enableSleeping&&u.afterCollisions(G.list,P.timeScale),G.collisionStart.length>0&&S.trigger(t,"collisionStart",{pairs:G.collisionStart}),d.preSolvePosition(G.list),a=0;a<t.positionIterations;a++)d.solvePosition(G.list,N,P.timeScale);for(d.postSolvePosition(N),C.preSolveAll(N),a=0;a<t.constraintIterations;a++)C.solveAll(Y,P.timeScale);for(C.postSolveAll(N),d.preSolveVelocity(G.list),a=0;a<t.velocityIterations;a++)d.solveVelocity(G.list,P.timeScale);return G.collisionActive.length>0&&S.trigger(t,"collisionActive",{pairs:G.collisionActive}),G.collisionEnd.length>0&&S.trigger(t,"collisionEnd",{pairs:G.collisionEnd}),p.update(t.metrics,t),o._bodiesClearForces(N),S.trigger(t,"afterUpdate",B),t},o.merge=function(t,i){if(P.extend(t,i),i.world){t.world=i.world,o.clear(t);for(var n=M.allBodies(t.world),a=0;a<n.length;a++){var d=n[a];u.set(d,!1),d.id=P.nextId()}}},o.clear=function(t){var i=t.world;f.clear(t.pairs);var n=t.broadphase;if(n.controller){var o=M.allBodies(i);n.controller.clear(n),n.controller.update(n,o,t,!0)}},o._bodiesClearForces=function(t){for(var i=0;i<t.length;i++){var n=t[i];n.force.x=0,n.force.y=0,n.torque=0}},o._bodiesApplyGravity=function(t,i){var n=void 0!==i.scale?i.scale:.001;if((0!==i.x||0!==i.y)&&0!==n)for(var o=0;o<t.length;o++){var a=t[o];a.ignoreGravity||a.isStatic||a.isSleeping||(a.force.x+=a.mass*i.x*n*a.gravityScale.x,a.force.y+=a.mass*i.y*n*a.gravityScale.y)}},o._bodiesUpdate=function(t,i,n,o,a){for(var u=0;u<t.length;u++){var d=t[u];d.isStatic||d.isSleeping||R.update(d,i,n,o)}}},function(t,i,n){var o=n(86),a=n(41),u=n(0),d=n(32),f=n(118),p=n(1401),b=n(9),S=n(272),M=n(2),C=n(6),P=n(41),R=n(166),O=n(593),B=n(596),N=n(83),Y=new u({Extends:b,initialize:function World3(t,i){b.call(this),this.scene=t,this.engine=p.create(i),this.localWorld=this.engine.world;var n=C(i,"gravity",null);n?this.setGravity(n.x,n.y,n.scale):!1===n&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=C(i,"enabled",!0),this.correction=C(i,"correction",1),this.getDelta=C(i,"getDelta",this.update60Hz);var o=M(i,"runner",{}),a=M(o,"fps",!1),u=M(o,"fps",60),d=M(o,"delta",1e3/u),f=M(o,"deltaMin",1e3/u),S=M(o,"deltaMax",1e3/(.5*u));a||(u=1e3/d),this.runner={fps:u,correction:M(o,"correction",1),deltaSampleSize:M(o,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:M(o,"isFixed",!1),delta:d,deltaMin:f,deltaMax:S},this.autoUpdate=C(i,"autoUpdate",!0);var P=C(i,"debug",!1);if(this.drawDebug="object"==typeof P||P,this.debugGraphic,this.debugConfig={showAxes:M(P,"showAxes",!1),showAngleIndicator:M(P,"showAngleIndicator",!1),angleColor:M(P,"angleColor",15208787),showBroadphase:M(P,"showBroadphase",!1),broadphaseColor:M(P,"broadphaseColor",16757760),showBounds:M(P,"showBounds",!1),boundsColor:M(P,"boundsColor",16777215),showVelocity:M(P,"showVelocity",!1),velocityColor:M(P,"velocityColor",44783),showCollisions:M(P,"showCollisions",!1),collisionColor:M(P,"collisionColor",16094476),showSeparations:M(P,"showSeparations",!1),separationColor:M(P,"separationColor",16753920),showBody:M(P,"showBody",!0),showStaticBody:M(P,"showStaticBody",!0),showInternalEdges:M(P,"showInternalEdges",!1),renderFill:M(P,"renderFill",!1),renderLine:M(P,"renderLine",!0),fillColor:M(P,"fillColor",1075465),fillOpacity:M(P,"fillOpacity",1),lineColor:M(P,"lineColor",2678297),lineOpacity:M(P,"lineOpacity",1),lineThickness:M(P,"lineThickness",1),staticFillColor:M(P,"staticFillColor",857979),staticLineColor:M(P,"staticLineColor",1255396),showSleeping:M(P,"showSleeping",!1),staticBodySleepOpacity:M(P,"staticBodySleepOpacity",.7),sleepFillColor:M(P,"sleepFillColor",4605510),sleepLineColor:M(P,"sleepLineColor",10066585),showSensors:M(P,"showSensors",!0),sensorFillColor:M(P,"sensorFillColor",857979),sensorLineColor:M(P,"sensorLineColor",1255396),showPositions:M(P,"showPositions",!0),positionSize:M(P,"positionSize",4),positionColor:M(P,"positionColor",14697178),showJoint:M(P,"showJoint",!0),jointColor:M(P,"jointColor",14737474),jointLineOpacity:M(P,"jointLineOpacity",1),jointLineThickness:M(P,"jointLineThickness",2),pinSize:M(P,"pinSize",4),pinColor:M(P,"pinColor",4382944),springColor:M(P,"springColor",14697184),anchorColor:M(P,"anchorColor",15724527),anchorSize:M(P,"anchorSize",4),showConvexHulls:M(P,"showConvexHulls",!1),hullColor:M(P,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),M(i,"setBounds",!1)){var R=i.setBounds;if("boolean"==typeof R)this.setBounds();else{var O=M(R,"x",0),B=M(R,"y",0),N=M(R,"width",t.sys.scale.width),Y=M(R,"height",t.sys.scale.height),X=M(R,"thickness",64),G=M(R,"left",!0),U=M(R,"right",!0),V=M(R,"top",!0),z=M(R,"bottom",!0);this.setBounds(O,B,N,Y,X,G,U,V,z)}}},setCompositeRenderStyle:function(t){var i,n,o,a=t.bodies,u=t.constraints,d=t.composites;for(i=0;i<a.length;i++)o=(n=a[i]).render,this.setBodyRenderStyle(n,o.lineColor,o.lineOpacity,o.lineThickness,o.fillColor,o.fillOpacity);for(i=0;i<u.length;i++)o=(n=u[i]).render,this.setConstraintRenderStyle(n,o.lineColor,o.lineOpacity,o.lineThickness,o.pinSize,o.anchorColor,o.anchorSize);for(i=0;i<d.length;i++)n=d[i],this.setCompositeRenderStyle(n);return this},setBodyRenderStyle:function(t,i,n,o,a,u){var d=t.render,f=this.debugConfig;return d?(null==i&&(i=t.isStatic?f.staticLineColor:f.lineColor),null==n&&(n=f.lineOpacity),null==o&&(o=f.lineThickness),null==a&&(a=t.isStatic?f.staticFillColor:f.fillColor),null==u&&(u=f.fillOpacity),!1!==i&&(d.lineColor=i),!1!==n&&(d.lineOpacity=n),!1!==o&&(d.lineThickness=o),!1!==a&&(d.fillColor=a),!1!==u&&(d.fillOpacity=u),this):this},setConstraintRenderStyle:function(t,i,n,o,a,u,d){var f=t.render,p=this.debugConfig;if(!f)return this;if(null==i){var b=f.type;"line"===b?i=p.jointColor:"pin"===b?i=p.pinColor:"spring"===b&&(i=p.springColor)}return null==n&&(n=p.jointLineOpacity),null==o&&(o=p.jointLineThickness),null==a&&(a=p.pinSize),null==u&&(u=p.anchorColor),null==d&&(d=p.anchorSize),!1!==i&&(f.lineColor=i),!1!==n&&(f.lineOpacity=n),!1!==o&&(f.lineThickness=o),!1!==a&&(f.pinSize=a),!1!==u&&(f.anchorColor=u),!1!==d&&(f.anchorSize=d),this},setEventsProxy:function(){var t=this,i=this.engine,n=this.localWorld;this.drawDebug&&(R.on(n,"compositeModified",(function(i){t.setCompositeRenderStyle(i)})),R.on(n,"beforeAdd",(function(i){for(var n=[].concat(i.object),o=0;o<n.length;o++){var a=n[o],u=a.render;"body"===a.type?t.setBodyRenderStyle(a,u.lineColor,u.lineOpacity,u.lineThickness,u.fillColor,u.fillOpacity):"composite"===a.type?t.setCompositeRenderStyle(a):"constraint"===a.type&&t.setConstraintRenderStyle(a,u.lineColor,u.lineOpacity,u.lineThickness,u.pinSize,u.anchorColor,u.anchorSize)}}))),R.on(n,"beforeAdd",(function(i){t.emit(S.BEFORE_ADD,i)})),R.on(n,"afterAdd",(function(i){t.emit(S.AFTER_ADD,i)})),R.on(n,"beforeRemove",(function(i){t.emit(S.BEFORE_REMOVE,i)})),R.on(n,"afterRemove",(function(i){t.emit(S.AFTER_REMOVE,i)})),R.on(i,"beforeUpdate",(function(i){t.emit(S.BEFORE_UPDATE,i)})),R.on(i,"afterUpdate",(function(i){t.emit(S.AFTER_UPDATE,i)})),R.on(i,"collisionStart",(function(i){var n,o,a=i.pairs;a.length>0&&(n=a[0].bodyA,o=a[0].bodyB),t.emit(S.COLLISION_START,i,n,o)})),R.on(i,"collisionActive",(function(i){var n,o,a=i.pairs;a.length>0&&(n=a[0].bodyA,o=a[0].bodyB),t.emit(S.COLLISION_ACTIVE,i,n,o)})),R.on(i,"collisionEnd",(function(i){var n,o,a=i.pairs;a.length>0&&(n=a[0].bodyA,o=a[0].bodyB),t.emit(S.COLLISION_END,i,n,o)}))},setBounds:function(t,i,n,o,a,u,d,f,p){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=this.scene.sys.scale.width),void 0===o&&(o=this.scene.sys.scale.height),void 0===a&&(a=64),void 0===u&&(u=!0),void 0===d&&(d=!0),void 0===f&&(f=!0),void 0===p&&(p=!0),this.updateWall(u,"left",t-a,i-a,a,o+2*a),this.updateWall(d,"right",t+n,i-a,a,o+2*a),this.updateWall(f,"top",t,i-a,n,a),this.updateWall(p,"bottom",t,i+o,n,a),this},updateWall:function(t,i,n,o,a,u){var d=this.walls[i];t?(d&&B.remove(this.localWorld,d),n+=a/2,o+=u/2,this.walls[i]=this.create(n,o,a,u,{isStatic:!0,friction:0,frictionStatic:0})):(d&&B.remove(this.localWorld,d),this.walls[i]=null)},createDebugGraphic:function(){var t=this.scene.sys.add.graphics({x:0,y:0});return t.setDepth(Number.MAX_VALUE),this.debugGraphic=t,this.drawDebug=!0,t},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(t,i,n){return void 0===t&&(t=0),void 0===i&&(i=1),this.localWorld.gravity.x=t,this.localWorld.gravity.y=i,void 0!==n&&(this.localWorld.gravity.scale=n),this},create:function(t,i,n,a,u){var d=o.rectangle(t,i,n,a,u);return B.add(this.localWorld,d),d},add:function(t){return B.add(this.localWorld,t),this},remove:function(t,i){Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var o=t[n],a=o.body?o.body:o;f.remove(this.localWorld,a,i)}return this},removeConstraint:function(t,i){return f.remove(this.localWorld,t,i),this},convertTilemapLayer:function(t,i){var n=t.layer,o=t.getTilesWithin(0,0,n.width,n.height,{isColliding:!0});return this.convertTiles(o,i),this},convertTiles:function(t,i){if(0===t.length)return this;for(var n=0;n<t.length;n++)new O(this,t[n],i);return this},nextGroup:function(t){return P.nextGroup(t)},nextCategory:function(){return P.nextCategory()},pause:function(){return this.enabled=!1,this.emit(S.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(S.RESUME),this},update:function(t,i){if(this.enabled&&this.autoUpdate){var n=this.engine,o=this.runner,a=n.timing,u=this.correction;o.isFixed?i=this.getDelta(t,i):(i=t-o.timePrev||o.delta,o.timePrev=t,o.deltaHistory.push(i),o.deltaHistory=o.deltaHistory.slice(-o.deltaSampleSize),u=(i=(i=(i=Math.min.apply(null,o.deltaHistory))<o.deltaMin?o.deltaMin:i)>o.deltaMax?o.deltaMax:i)/o.delta,o.delta=i),0!==o.timeScalePrev&&(u*=a.timeScale/o.timeScalePrev),0===a.timeScale&&(u=0),o.timeScalePrev=a.timeScale,o.correction=u,o.frameCounter+=1,t-o.counterTimestamp>=1e3&&(o.fps=o.frameCounter*((t-o.counterTimestamp)/1e3),o.counterTimestamp=t,o.frameCounter=0),p.update(n,i,u)}},step:function(t,i){p.update(this.engine,t,i)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(t){var i=t.hasOwnProperty("body")?t.body:t;return null!==f.get(this.localWorld,i.id,i.type)},getAllBodies:function(){return f.allBodies(this.localWorld)},getAllConstraints:function(){return f.allConstraints(this.localWorld)},getAllComposites:function(){return f.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var t=this.debugConfig,i=this.engine,n=this.debugGraphic,o=f.allBodies(this.localWorld);this.debugGraphic.clear(),t.showBroadphase&&i.broadphase.controller&&this.renderGrid(i.broadphase,n,t.broadphaseColor,.5),t.showBounds&&this.renderBodyBounds(o,n,t.boundsColor,.5),(t.showBody||t.showStaticBody)&&this.renderBodies(o),t.showJoint&&this.renderJoints(),(t.showAxes||t.showAngleIndicator)&&this.renderBodyAxes(o,n,t.showAxes,t.angleColor,.5),t.showVelocity&&this.renderBodyVelocity(o,n,t.velocityColor,1,2),t.showSeparations&&this.renderSeparations(i.pairs.list,n,t.separationColor),t.showCollisions&&this.renderCollisions(i.pairs.list,n,t.collisionColor)}},renderGrid:function(t,i,n,o){i.lineStyle(1,n,o);for(var a=d.keys(t.buckets),u=0;u<a.length;u++){var f=a[u];if(!(t.buckets[f].length<2)){var p=f.split(/C|R/);i.strokeRect(parseInt(p[1],10)*t.bucketWidth,parseInt(p[2],10)*t.bucketHeight,t.bucketWidth,t.bucketHeight)}}return this},renderSeparations:function(t,i,n){i.lineStyle(1,n,1);for(var o=0;o<t.length;o++){var a=t[o];if(a.isActive){var u=a.collision,d=u.bodyA,f=u.bodyB,p=d.position,b=f.position,S=u.penetration,M=d.isStatic||f.isStatic?1:4;f.isStatic&&(M=0),i.lineBetween(b.x,b.y,b.x-S.x*M,b.y-S.y*M),M=d.isStatic||f.isStatic?1:4,d.isStatic&&(M=0),i.lineBetween(p.x,p.y,p.x-S.x*M,p.y-S.y*M)}}return this},renderCollisions:function(t,i,n){var o,a;for(i.lineStyle(1,n,.5),i.fillStyle(n,1),o=0;o<t.length;o++)if((a=t[o]).isActive)for(var u=0;u<a.activeContacts.length;u++){var d=a.activeContacts[u].vertex;i.fillRect(d.x-2,d.y-2,5,5)}for(o=0;o<t.length;o++)if((a=t[o]).isActive){var f=a.collision,p=a.activeContacts;if(p.length>0){var b=p[0].vertex.x,S=p[0].vertex.y;2===p.length&&(b=(p[0].vertex.x+p[1].vertex.x)/2,S=(p[0].vertex.y+p[1].vertex.y)/2),f.bodyB===f.supports[0].body||f.bodyA.isStatic?i.lineBetween(b-8*f.normal.x,S-8*f.normal.y,b,S):i.lineBetween(b+8*f.normal.x,S+8*f.normal.y,b,S)}}return this},renderBodyBounds:function(t,i,n,o){i.lineStyle(1,n,o);for(var a=0;a<t.length;a++){var u=t[a];if(u.render.visible){var d=u.bounds;if(d)i.strokeRect(d.min.x,d.min.y,d.max.x-d.min.x,d.max.y-d.min.y);else for(var f=u.parts,p=f.length>1?1:0;p<f.length;p++){var b=f[p];i.strokeRect(b.bounds.min.x,b.bounds.min.y,b.bounds.max.x-b.bounds.min.x,b.bounds.max.y-b.bounds.min.y)}}}return this},renderBodyAxes:function(t,i,n,o,a){i.lineStyle(1,o,a);for(var u=0;u<t.length;u++){var d,f,p,b=t[u],S=b.parts;if(b.render.visible)if(n)for(f=S.length>1?1:0;f<S.length;f++)for(d=S[f],p=0;p<d.axes.length;p++){var M=d.axes[p];i.lineBetween(d.position.x,d.position.y,d.position.x+20*M.x,d.position.y+20*M.y)}else for(f=S.length>1?1:0;f<S.length;f++)for(d=S[f],p=0;p<d.axes.length;p++)i.lineBetween(d.position.x,d.position.y,(d.vertices[0].x+d.vertices[d.vertices.length-1].x)/2,(d.vertices[0].y+d.vertices[d.vertices.length-1].y)/2)}return this},renderBodyVelocity:function(t,i,n,o,a){i.lineStyle(a,n,o);for(var u=0;u<t.length;u++){var d=t[u];d.render.visible&&i.lineBetween(d.position.x,d.position.y,d.position.x+2*(d.position.x-d.positionPrev.x),d.position.y+2*(d.position.y-d.positionPrev.y))}return this},renderBodies:function(t){for(var i=this.debugGraphic,n=this.debugConfig,o=n.showBody,a=n.showStaticBody,u=n.showSleeping,d=n.showInternalEdges,f=n.showConvexHulls,p=n.renderFill,b=n.renderLine,S=n.staticBodySleepOpacity,M=n.sleepFillColor,C=n.sleepLineColor,P=n.hullColor,R=0;R<t.length;R++){var O=t[R];if(O.render.visible&&(a||!O.isStatic)&&(o||O.isStatic)){var B=O.render.lineColor,N=O.render.lineOpacity,Y=O.render.lineThickness,X=O.render.fillColor,G=O.render.fillOpacity;u&&O.isSleeping&&(O.isStatic?(N*=S,G*=S):(B=C,X=M)),p||(X=null),b||(B=null),this.renderBody(O,i,d,B,N,Y,X,G);var U=O.parts.length;f&&U>1&&this.renderConvexHull(O,i,P,Y)}}},renderBody:function(t,i,n,o,a,u,d,f){void 0===o&&(o=null),void 0===a&&(a=null),void 0===u&&(u=1),void 0===d&&(d=null),void 0===f&&(f=null);for(var p=this.debugConfig,b=p.sensorFillColor,S=p.sensorLineColor,M=t.parts,C=M.length,P=C>1?1:0;P<C;P++){var R=M[P],O=R.render,B=O.opacity;if(O.visible&&0!==B&&(!R.isSensor||p.showSensors)){var N=R.circleRadius;if(i.beginPath(),R.isSensor?(null!==d&&i.fillStyle(b,f*B),null!==o&&i.lineStyle(u,S,a*B)):(null!==d&&i.fillStyle(d,f*B),null!==o&&i.lineStyle(u,o,a*B)),N)i.arc(R.position.x,R.position.y,N,0,2*Math.PI);else{var Y=R.vertices,X=Y.length;i.moveTo(Y[0].x,Y[0].y);for(var G=1;G<X;G++){var U=Y[G];if(!Y[G-1].isInternal||n?i.lineTo(U.x,U.y):i.moveTo(U.x,U.y),G<X&&U.isInternal&&!n){var V=(G+1)%X;i.moveTo(Y[V].x,Y[V].y)}}i.closePath()}null!==d&&i.fillPath(),null!==o&&i.strokePath()}}if(p.showPositions&&!t.isStatic){var z=t.position.x,W=t.position.y,H=Math.ceil(p.positionSize/2);i.fillStyle(p.positionColor,1),i.fillRect(z-H,W-H,p.positionSize,p.positionSize)}return this},renderConvexHull:function(t,i,n,o){if(void 0===o&&(o=1),t.parts.length>1){var a=t.vertices;i.lineStyle(o,n),i.beginPath(),i.moveTo(a[0].x,a[0].y);for(var u=1;u<a.length;u++)i.lineTo(a[u].x,a[u].y);i.lineTo(a[0].x,a[0].y),i.strokePath()}return this},renderJoints:function(){for(var t=this.debugGraphic,i=f.allConstraints(this.localWorld),n=0;n<i.length;n++){var o=i[n].render,a=o.lineColor,u=o.lineOpacity,d=o.lineThickness,p=o.pinSize,b=o.anchorColor,S=o.anchorSize;this.renderConstraint(i[n],t,a,u,d,p,b,S)}},renderConstraint:function(t,i,n,o,a,u,f,p){var b=t.render;if(!b.visible||!t.pointA||!t.pointB)return this;i.lineStyle(a,n,o);var S,M,C=t.bodyA,P=t.bodyB;if(S=C?N.add(C.position,t.pointA):t.pointA,"pin"===b.type)i.strokeCircle(S.x,S.y,u);else{if(M=P?N.add(P.position,t.pointB):t.pointB,i.beginPath(),i.moveTo(S.x,S.y),"spring"===b.type)for(var R,O=N.sub(M,S),B=N.perp(N.normalise(O)),Y=Math.ceil(d.clamp(t.length/5,12,20)),X=1;X<Y;X+=1)R=X%2==0?1:-1,i.lineTo(S.x+O.x*(X/Y)+B.x*R*4,S.y+O.y*(X/Y)+B.y*R*4);i.lineTo(M.x,M.y)}return i.strokePath(),b.anchors&&p>0&&(i.fillStyle(f),i.fillCircle(S.x,S.y,p),i.fillCircle(M.x,M.y,p)),this},resetCollisionIDs:function(){return a._nextCollidingGroupId=1,a._nextNonCollidingGroupId=-1,a._nextCategory=1,this},shutdown:function(){R.off(this.engine),this.removeAllListeners(),B.clear(this.localWorld,!1),p.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});t.exports=Y},function(t,i,n){t.exports={BasePlugin:n(540),DefaultPlugins:n(197),PluginCache:n(24),PluginManager:n(414),ScenePlugin:n(1404)}},function(t,i,n){var o=n(540),a=n(0),u=n(20),d=new a({Extends:o,initialize:function ScenePlugin2(t,i,n){o.call(this,i),this.scene=t,this.systems=t.sys,this.pluginKey=n,t.sys.events.once(u.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=d},function(t,i,n){t.exports={Canvas:n(1406),Events:n(91),Snapshot:n(1407),WebGL:n(1408)}},function(t,i,n){t.exports={CanvasRenderer:n(368),GetBlendModes:n(370),SetTransform:n(30)}},function(t,i,n){t.exports={Canvas:n(369),WebGL:n(383)}},function(t,i,n){var o=n(107),a=n(17),u={PipelineManager:n(372),Pipelines:n(1409),RenderTarget:n(141),Utils:n(12),WebGLPipeline:n(58),WebGLRenderer:n(371),WebGLShader:n(375)};u=a(!1,u,o),t.exports=u},function(t,i,n){var o=n(92),a=n(17),u={BitmapMaskPipeline:n(373),Events:n(374),GraphicsPipeline:n(376),LightPipeline:n(377),MultiPipeline:n(108),PointLightPipeline:n(378),PostFXPipeline:n(1410),RopePipeline:n(379),SinglePipeline:n(380),UtilityPipeline:n(381)};u=a(!1,u,o),t.exports=u},function(t,i,n){var o=n(0),a=n(198),u=n(2),d=n(1411),f=n(382),p=n(58),b=new o({Extends:p,initialize:function PostFXPipeline2(t){t.renderTarget=u(t,"renderTarget",1),t.fragShader=u(t,"fragShader",d),t.vertShader=u(t,"vertShader",f),t.attributes=u(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.batchSize=1,t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],p.call(this,t),this.isPostFX=!0,this.gameObject,this.colorMatrix=new a,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){p.prototype.boot.call(this);var t=this.manager.UTILITY_PIPELINE;this.fullFrame1=t.fullFrame1,this.fullFrame2=t.fullFrame2,this.halfFrame1=t.halfFrame1,this.halfFrame2=t.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(t){this.bindAndDraw(t)},copyFrame:function(t,i,n,o,a){this.manager.copyFrame(t,i,n,o,a)},copyToGame:function(t){this.manager.copyToGame(t)},drawFrame:function(t,i,n){this.manager.drawFrame(t,i,n,this.colorMatrix)},blendFrames:function(t,i,n,o,a){this.manager.blendFrames(t,i,n,o,a)},blendFramesAdditive:function(t,i,n,o,a){this.manager.blendFramesAdditive(t,i,n,o,a)},clearFrame:function(t,i){this.manager.clearFrame(t,i)},blitFrame:function(t,i,n,o,a,u){this.manager.blitFrame(t,i,n,o,a,u)},copyFrameRect:function(t,i,n,o,a,u,d,f){this.manager.copyFrameRect(t,i,n,o,a,u,d,f)},bindAndDraw:function(t,i,n,o,a){void 0===n&&(n=!0),void 0===o&&(o=!0);var u=this.gl,d=this.renderer;this.bind(a),this.set1i("uMainSampler",0),i?(u.viewport(0,0,i.width,i.height),u.bindFramebuffer(u.FRAMEBUFFER,i.framebuffer),u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,i.texture,0),n&&(o?u.clearColor(0,0,0,0):u.clearColor(0,0,0,1),u.clear(u.COLOR_BUFFER_BIT))):(d.popFramebuffer(!1,!1,!1),d.currentFramebuffer||u.viewport(0,0,d.width,d.height)),u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,t.texture),u.bufferData(u.ARRAY_BUFFER,this.vertexData,u.STATIC_DRAW),u.drawArrays(u.TRIANGLES,0,6),i?(u.bindTexture(u.TEXTURE_2D,null),u.bindFramebuffer(u.FRAMEBUFFER,null)):d.resetTextures()}});t.exports=b},function(t,i){t.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join("\n")},function(t,i,n){var o=n(17),a=n(201),u={Center:n(403),Events:n(104),Orientation:n(404),ScaleManager:n(415),ScaleModes:n(405),Zoom:n(406)};u=o(!1,u,a.CENTER),u=o(!1,u,a.ORIENTATION),u=o(!1,u,a.SCALE_MODE),u=o(!1,u,a.ZOOM),t.exports=u},function(t,i,n){var o=n(144),a=n(17),u={Events:n(20),GetPhysicsPlugins:n(419),GetScenePlugins:n(420),SceneManager:n(417),ScenePlugin:n(1414),Settings:n(421),Systems:n(204)};u=a(!1,u,o),t.exports=u},function(t,i,n){var o=n(18),a=n(0),u=n(20),d=n(2),f=n(24),p=new a({initialize:function ScenePlugin2(t){this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.key=t.sys.settings.key,this.manager=t.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,t.sys.events.once(u.BOOT,this.boot,this),t.sys.events.on(u.START,this.pluginStart,this)},boot:function(){this.systems.events.once(u.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(u.SHUTDOWN,this.shutdown,this)},start:function(t,i){return void 0===t&&(t=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",t,i),this},restart:function(t){var i=this.key;return this.manager.queueOp("stop",i),this.manager.queueOp("start",i,t),this},transition:function(t){void 0===t&&(t={});var i=d(t,"target",!1),n=this.manager.getScene(i);if(!i||!this.checkValidTransition(n))return!1;var o=d(t,"duration",1e3);this._elapsed=0,this._target=n,this._duration=o,this._willSleep=d(t,"sleep",!1),this._willRemove=d(t,"remove",!1);var a=d(t,"onUpdate",null);a&&(this._onUpdate=a,this._onUpdateScope=d(t,"onUpdateScope",this.scene));var f=d(t,"allowInput",!1);this.settings.transitionAllowInput=f;var p=n.sys.settings;return p.isTransition=!0,p.transitionFrom=this.scene,p.transitionDuration=o,p.transitionAllowInput=f,d(t,"moveAbove",!1)?this.manager.moveAbove(this.key,i):d(t,"moveBelow",!1)&&this.manager.moveBelow(this.key,i),n.sys.isSleeping()?n.sys.wake(d(t,"data")):this.manager.start(i,d(t,"data")),this.systems.events.emit(u.TRANSITION_OUT,n,o),this.systems.events.on(u.UPDATE,this.step,this),!0},checkValidTransition:function(t){return!(!t||t.sys.isActive()||t.sys.isTransitioning()||t===this.scene||this.systems.isTransitioning())},step:function(t,i){this._elapsed+=i,this.transitionProgress=o(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var t=this._target.sys,i=this._target.sys.settings;this.systems.events.off(u.UPDATE,this.step,this),t.events.emit(u.TRANSITION_COMPLETE,this.scene),i.isTransition=!1,i.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(t,i,n,o){return this.manager.add(t,i,n,o)},launch:function(t,i){return t&&t!==this.key&&this.manager.queueOp("start",t,i),this},run:function(t,i){return t&&t!==this.key&&this.manager.queueOp("run",t,i),this},pause:function(t,i){return void 0===t&&(t=this.key),this.manager.queueOp("pause",t,i),this},resume:function(t,i){return void 0===t&&(t=this.key),this.manager.queueOp("resume",t,i),this},sleep:function(t,i){return void 0===t&&(t=this.key),this.manager.queueOp("sleep",t,i),this},wake:function(t,i){return void 0===t&&(t=this.key),this.manager.queueOp("wake",t,i),this},switch:function(t){return t!==this.key&&this.manager.queueOp("switch",this.key,t),this},stop:function(t,i){return void 0===t&&(t=this.key),this.manager.queueOp("stop",t,i),this},setActive:function(t,i,n){void 0===i&&(i=this.key);var o=this.manager.getScene(i);return o&&o.sys.setActive(t,n),this},setVisible:function(t,i){void 0===i&&(i=this.key);var n=this.manager.getScene(i);return n&&n.sys.setVisible(t),this},isSleeping:function(t){return void 0===t&&(t=this.key),this.manager.isSleeping(t)},isActive:function(t){return void 0===t&&(t=this.key),this.manager.isActive(t)},isPaused:function(t){return void 0===t&&(t=this.key),this.manager.isPaused(t)},isVisible:function(t){return void 0===t&&(t=this.key),this.manager.isVisible(t)},swapPosition:function(t,i){return void 0===i&&(i=this.key),t!==i&&this.manager.swapPosition(t,i),this},moveAbove:function(t,i){return void 0===i&&(i=this.key),t!==i&&this.manager.moveAbove(t,i),this},moveBelow:function(t,i){return void 0===i&&(i=this.key),t!==i&&this.manager.moveBelow(t,i),this},remove:function(t){return void 0===t&&(t=this.key),this.manager.remove(t),this},moveUp:function(t){return void 0===t&&(t=this.key),this.manager.moveUp(t),this},moveDown:function(t){return void 0===t&&(t=this.key),this.manager.moveDown(t),this},bringToTop:function(t){return void 0===t&&(t=this.key),this.manager.bringToTop(t),this},sendToBack:function(t){return void 0===t&&(t=this.key),this.manager.sendToBack(t),this},get:function(t){return this.manager.getScene(t)},getIndex:function(t){return void 0===t&&(t=this.key),this.manager.getIndex(t)},shutdown:function(){var t=this.systems.events;t.off(u.SHUTDOWN,this.shutdown,this),t.off(u.POST_UPDATE,this.step,this),t.off(u.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});f.register("ScenePlugin",p,"scenePlugin"),t.exports=p},function(t,i,n){t.exports={Events:n(438),List:n(110),Map:n(102),ProcessQueue:n(211),RTree:n(531),Set:n(149),Size:n(416)}},function(t,i,n){var o=n(17),a=n(1417),u={CanvasTexture:n(423),Events:n(106),FilterMode:a,Frame:n(109),Parsers:n(425),Texture:n(206),TextureManager:n(422),TextureSource:n(424)};u=o(!1,u,a),t.exports=u},function(t,i){t.exports={LINEAR:0,NEAREST:1}},function(t,i,n){var o=n(17),a=n(1419),u={Components:n(251),Parsers:n(1452),Formats:n(40),ImageCollection:n(576),ParseToTilemap:n(262),Tile:n(85),Tilemap:n(580),TilemapCreator:n(1459),TilemapFactory:n(1460),Tileset:n(122),TilemapLayer:n(581),Orientation:n(29),LayerData:n(120),MapData:n(121),ObjectLayer:n(572)};u=o(!1,u,a.ORIENTATION),t.exports=u},function(t,i,n){var o={ORIENTATION:n(29)};t.exports=o},function(t,i,n){var o=n(26),a=n(63);t.exports=function(t,i,n,u,d,f,p,b){void 0===p&&(p=!0),t<0&&(t=0),i<0&&(i=0);for(var S=o(t,i,n,u,null,b),M=d-t,C=f-i,P=0;P<S.length;P++){var R=S[P].x+M,O=S[P].y+C;R>=0&&R<b.width&&O>=0&&O<b.height&&b.data[O][R]&&b.data[O][R].copy(S[P])}p&&a(d-1,f-1,n+2,u+2,b)}},function(t,i,n){var o=n(26),a=n(542);t.exports=function(t,i,n,u,d,f){n||(n={}),Array.isArray(t)||(t=[t]);var p=f.tilemapLayer;u||(u=p.scene),d||(d=u.cameras.main);var b,S=o(0,0,f.width,f.height,null,f),M=[];for(b=0;b<S.length;b++){var C=S[b];if(-1!==t.indexOf(C.index)){var P=p.tileToWorldXY(C.x,C.y,void 0,d,f);n.x=P.x,n.y=P.y,M.push(u.make.sprite(n))}}if("number"==typeof i)for(b=0;b<t.length;b++)a(t[b],i,0,0,f.width,f.height,f);else if(Array.isArray(i))for(b=0;b<t.length;b++)a(t[b],i[b],0,0,f.width,f.height,f);return M}},function(t,i,n){var o=n(26),a=n(63),u=n(72);t.exports=function(t,i,n,d,f,p,b){for(var S=-1!==b.collideIndexes.indexOf(t),M=o(i,n,d,f,null,b),C=0;C<M.length;C++)M[C].index=t,u(M[C],S);p&&a(i-1,n-1,d+2,f+2,b)}},function(t,i,n){var o=n(26);t.exports=function(t,i,n,a,u,d,f,p){return o(n,a,u,d,f,p).filter(t,i)}},function(t,i){t.exports=function(t,i,n,o){void 0===i&&(i=0),void 0===n&&(n=!1);var a,u,d,f=0;if(n){for(u=o.height-1;u>=0;u--)for(a=o.width-1;a>=0;a--)if((d=o.data[u][a])&&d.index===t){if(f===i)return d;f+=1}}else for(u=0;u<o.height;u++)for(a=0;a<o.width;a++)if((d=o.data[u][a])&&d.index===t){if(f===i)return d;f+=1}return null}},function(t,i,n){var o=n(26);t.exports=function(t,i,n,a,u,d,f,p){return o(n,a,u,d,f,p).find(t,i)||null}},function(t,i,n){var o=n(26);t.exports=function(t,i,n,a,u,d,f,p){o(n,a,u,d,f,p).forEach(t,i)}},function(t,i,n){var o=n(29),a=n(544),u=n(545),d=n(547),f=n(1),p=n(548);t.exports=function(t){return t===o.ORTHOGONAL?a:t===o.HEXAGONAL?u:t===o.STAGGERED?p:t===o.ISOMETRIC?d:f}},function(t,i,n){var o=n(158),a=new(n(3));t.exports=function(t,i,n,u,d){return d.tilemapLayer.worldToTileXY(t,i,!0,a,u),o(a.x,a.y,n,d)}},function(t,i,n){var o=n(483),a=n(26),u=n(484),d=n(1),f=n(3),TriangleToRectangle=function(t,i){return u.RectangleToTriangle(i,t)},p=new f,b=new f,S=new f;t.exports=function(t,i,n,f){if(void 0===t)return[];var M=d;t instanceof o.Circle?M=u.CircleToRectangle:t instanceof o.Rectangle?M=u.RectangleToRectangle:t instanceof o.Triangle?M=TriangleToRectangle:t instanceof o.Line&&(M=u.LineToRectangle),f.tilemapLayer.worldToTileXY(t.left,t.top,!0,b,n);var C=b.x,P=b.y;f.tilemapLayer.worldToTileXY(t.right,t.bottom,!0,S,n);var R=Math.ceil(S.x),O=Math.ceil(S.y),B=Math.max(R-C,1),N=Math.max(O-P,1),Y=a(C,P,B,N,i,f),X=f.tileWidth,G=f.tileHeight;f.tilemapLayer&&(X*=f.tilemapLayer.scaleX,G*=f.tilemapLayer.scaleY);for(var U=[],V=new o.Rectangle(0,0,X,G),z=0;z<Y.length;z++){var W=Y[z];f.tilemapLayer.tileToWorldXY(W.x,W.y,p,n),V.x=p.x,V.y=p.y,M(t,V)&&U.push(W)}return U}},function(t,i,n){var o=n(29),a=n(1),u=n(253);t.exports=function(t){return t===o.ORTHOGONAL?u:a}},function(t,i,n){var o=n(29),a=n(550),u=n(551),d=n(1),f=n(552),p=n(553);t.exports=function(t){return t===o.ORTHOGONAL?p:t===o.ISOMETRIC?u:t===o.HEXAGONAL?a:t===o.STAGGERED?f:d}},function(t,i,n){var o=n(29),a=n(554),u=n(1),d=n(555),f=n(254);t.exports=function(t){return t===o.ORTHOGONAL?f:t===o.HEXAGONAL?a:t===o.STAGGERED?d:u}},function(t,i,n){var o=n(29),a=n(1),u=n(255);t.exports=function(t){return t===o.ORTHOGONAL?u:a}},function(t,i,n){var o=n(29),a=n(556),u=n(557),d=n(1),f=n(558),p=n(559);t.exports=function(t){return t===o.ORTHOGONAL?p:t===o.ISOMETRIC?u:t===o.HEXAGONAL?a:t===o.STAGGERED?f:d}},function(t,i,n){var o=n(29),a=n(560),u=n(1),d=n(561),f=n(256);t.exports=function(t){return t===o.ORTHOGONAL?f:t===o.HEXAGONAL?a:t===o.STAGGERED?d:u}},function(t,i,n){var o=n(562),a=new(n(3));t.exports=function(t,i,n,u){u.tilemapLayer.worldToTileXY(t,i,!0,a,n);var d=a.x,f=a.y;return o(d,f,u)}},function(t,i,n){var o=n(257),a=new(n(3));t.exports=function(t,i,n,u,d,f){return f.tilemapLayer.worldToTileXY(i,n,!0,a,d,f),o(t,a.x,a.y,u,f)}},function(t,i,n){var o=n(63),a=n(257);t.exports=function(t,i,n,u,d){if(void 0===u&&(u=!0),!Array.isArray(t))return null;Array.isArray(t[0])||(t=[t]);for(var f=t.length,p=t[0].length,b=0;b<f;b++)for(var S=0;S<p;S++){var M=t[b][S];a(M,i+S,n+b,!1,d)}u&&o(i-1,n-1,p+2,f+2,d)}},function(t,i,n){var o=n(26),a=n(210);t.exports=function(t,i,n,u,d,f){var p,b=o(t,i,n,u,{},f);if(!d)for(d=[],p=0;p<b.length;p++)-1===d.indexOf(b[p].index)&&d.push(b[p].index);for(p=0;p<b.length;p++)b[p].index=a(d)}},function(t,i,n){var o=n(563),a=new(n(3));t.exports=function(t,i,n,u,d,f){return f.tilemapLayer.worldToTileXY(t,i,!0,a,d,f),o(a.x,a.y,n,u,f)}},function(t,i,n){var o=n(26),a=n(397),u=new a(105,210,231,150),d=new a(243,134,48,200),f=new a(40,39,37,150);t.exports=function(t,i,n){void 0===i&&(i={});var a=void 0!==i.tileColor?i.tileColor:u,p=void 0!==i.collidingTileColor?i.collidingTileColor:d,b=void 0!==i.faceColor?i.faceColor:f,S=o(0,0,n.width,n.height,null,n);t.translateCanvas(n.tilemapLayer.x,n.tilemapLayer.y),t.scaleCanvas(n.tilemapLayer.scaleX,n.tilemapLayer.scaleY);for(var M=0;M<S.length;M++){var C=S[M],P=C.width,R=C.height,O=C.pixelX,B=C.pixelY,N=C.collides?p:a;null!==N&&(t.fillStyle(N.color,N.alpha/255),t.fillRect(O,B,P,R)),O+=1,B+=1,P-=2,R-=2,null!==b&&(t.lineStyle(1,b.color,b.alpha/255),C.faceTop&&t.lineBetween(O,B,O+P,B),C.faceRight&&t.lineBetween(O+P,B,O+P,B+R),C.faceBottom&&t.lineBetween(O,B+R,O+P,B+R),C.faceLeft&&t.lineBetween(O,B,O,B+R))}}},function(t,i,n){var o=n(72),a=n(63),u=n(160);t.exports=function(t,i,n,d,f){void 0===i&&(i=!0),void 0===n&&(n=!0),void 0===f&&(f=!0),Array.isArray(t)||(t=[t]);for(var p=0;p<t.length;p++)u(t[p],i,d);if(f)for(var b=0;b<d.height;b++)for(var S=0;S<d.width;S++){var M=d.data[b][S];M&&-1!==t.indexOf(M.index)&&o(M,i)}n&&a(0,0,d.width,d.height,d)}},function(t,i,n){var o=n(72),a=n(63),u=n(160);t.exports=function(t,i,n,d,f,p){if(void 0===n&&(n=!0),void 0===d&&(d=!0),void 0===p&&(p=!0),!(t>i)){for(var b=t;b<=i;b++)u(b,n,f);if(p)for(var S=0;S<f.height;S++)for(var M=0;M<f.width;M++){var C=f.data[S][M];C&&C.index>=t&&C.index<=i&&o(C,n)}d&&a(0,0,f.width,f.height,f)}}},function(t,i,n){var o=n(72),a=n(63),u=n(160);t.exports=function(t,i,n,d){void 0===i&&(i=!0),void 0===n&&(n=!0),Array.isArray(t)||(t=[t]);for(var f=0;f<d.height;f++)for(var p=0;p<d.width;p++){var b=d.data[f][p];b&&-1===t.indexOf(b.index)&&(o(b,i),u(b.index,i,d))}n&&a(0,0,d.width,d.height,d)}},function(t,i,n){var o=n(72),a=n(63),u=n(126);t.exports=function(t,i,n,d){void 0===i&&(i=!0),void 0===n&&(n=!0);for(var f=0;f<d.height;f++)for(var p=0;p<d.width;p++){var b=d.data[f][p];if(b)for(var S in t)if(u(b.properties,S)){var M=t[S];Array.isArray(M)||(M=[M]);for(var C=0;C<M.length;C++)b.properties[S]===M[C]&&o(b,i)}}n&&a(0,0,d.width,d.height,d)}},function(t,i,n){var o=n(72),a=n(63);t.exports=function(t,i,n){void 0===t&&(t=!0),void 0===i&&(i=!0);for(var u=0;u<n.height;u++)for(var d=0;d<n.width;d++){var f=n.data[u][d];if(f){var p=f.getCollisionGroup();p&&p.objects&&p.objects.length>0&&o(f,t)}}i&&a(0,0,n.width,n.height,n)}},function(t,i){t.exports=function(t,i,n,o){if("number"==typeof t)o.callbacks[t]=null!==i?{callback:i,callbackContext:n}:void 0;else for(var a=0,u=t.length;a<u;a++)o.callbacks[t[a]]=null!==i?{callback:i,callbackContext:n}:void 0}},function(t,i,n){var o=n(26);t.exports=function(t,i,n,a,u,d,f){for(var p=o(t,i,n,a,null,f),b=0;b<p.length;b++)p[b].setCollisionCallback(u,d)}},function(t,i,n){var o=n(26),a=n(131);t.exports=function(t,i,n,u,d){var f=o(t,i,n,u,null,d),p=f.map((function(t){return t.index}));a(p);for(var b=0;b<f.length;b++)f[b].index=p[b]}},function(t,i,n){var o=n(26);t.exports=function(t,i,n,a,u,d,f){for(var p=o(n,a,u,d,null,f),b=0;b<p.length;b++)p[b]&&(p[b].index===t?p[b].index=i:p[b].index===i&&(p[b].index=t))}},function(t,i,n){var o=n(26);t.exports=function(t,i,n,a,u,d){if(u){var f,p=o(t,i,n,a,null,d),b=0;for(f=0;f<u.length;f++)b+=u[f].weight;if(!(b<=0))for(f=0;f<p.length;f++){for(var S=Math.random()*b,M=0,C=-1,P=0;P<u.length;P++)if(S<=(M+=u[P].weight)){var R=u[P].index;C=Array.isArray(R)?R[Math.floor(Math.random()*R.length)]:R;break}p[f].index=C}}}},function(t,i,n){t.exports={FromOrientationString:n(258),Parse:n(564),Parse2DArray:n(259),ParseCSV:n(565),Impact:n(1454),Tiled:n(1455)}},function(t,i){t.exports=function(t,i){for(var n=0;n<t.length;n++){var o=t[n],a=n;if(o.name&&""!==o.name&&(a=o.name),Array.isArray(o.wangtiles)&&o.wangtiles.length>0){var u,d,f,p={},b={};if(Array.isArray(o.edgecolors))for(u=0;u<o.edgecolors.length;u++)f=1+u,""!==(d=o.edgecolors[u]).name&&(p[f]=d.name);if(Array.isArray(o.cornercolors))for(u=0;u<o.cornercolors.length;u++)f=1+u,""!==(d=o.cornercolors[u]).name&&(b[f]=d.name);if(Array.isArray(o.colors))for(u=0;u<o.colors.length;u++)f=1+u,""!==(d=o.colors[u]).name&&(p[f]=b[f]=d.name);for(var S=[p,b,p,b,p,b,p,b],M=0;M<o.wangtiles.length;M++){var C=o.wangtiles[M],P=i[C.tileid]||(i[C.tileid]={});P=P.wangid||(P.wangid={});for(var R=[],O=0;O<Math.min(S.length,C.wangid.length);O++)if(0!==(d=C.wangid[O])){var B=S[O][d];void 0===B?R.push(d):R.push(B)}else R.push(void 0);P[a]=R}}}}},function(t,i,n){t.exports={ParseTileLayers:n(578),ParseTilesets:n(579),ParseWeltmeister:n(577)}},function(t,i,n){t.exports={AssignTileProperties:n(567),Base64Decode:n(574),BuildTilesetIndex:n(568),CreateGroupLayer:n(161),ParseGID:n(261),ParseImageLayers:n(569),ParseJSONTiled:n(566),ParseObject:n(260),ParseObjectLayers:n(570),ParseTileLayers:n(573),ParseTilesets:n(575)}},function(t,i,n){var o=n(1),a=n(1);o=n(1457),a=n(1458),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,n){var o=n(12);t.exports=function(t,i,n){var a=i.cull(n),u=a.length,d=n.alpha*i.alpha;if(!(0===u||d<=0)){var f=i.gidMap,p=t.pipelines.set(i.pipeline,i),b=o.getTintAppendFloatAlpha,S=i.scrollFactorX,M=i.scrollFactorY,C=i.x,P=i.y,R=i.scaleX,O=i.scaleY;t.pipelines.preBatch(i);for(var B=0;B<u;B++){var N=a[B],Y=f[N.index];if(Y){var X=Y.getTileTextureCoordinates(N.index);if(null!==X){var G=Y.glTexture,U=p.setTexture2D(G,i),V=Y.tileWidth,z=Y.tileHeight,W=X.x,H=X.y,j=.5*Y.tileWidth,q=.5*Y.tileHeight,Z=b(N.tint,d*N.alpha);p.batchTexture(i,G,G.width,G.height,C+(j+N.pixelX)*R,P+(q+N.pixelY)*O,N.width,N.height,R,O,N.rotation,N.flipX,N.flipY,S,M,j,q,W,H,V,z,Z,Z,Z,Z,!1,0,0,n,null,!0,U)}}}t.pipelines.postBatch(i)}}},function(t,i,n){var o=n(25),a=new o,u=new o,d=new o;t.exports=function(t,i,n,o){var f=i.cull(n),p=f.length,b=n.alpha*i.alpha;if(!(0===p||b<=0)){var S=a,M=u,C=d;M.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY),S.copyFrom(n.matrix);var P=t.currentContext,R=i.gidMap;P.save(),o?(S.multiplyWithOffset(o,-n.scrollX*i.scrollFactorX,-n.scrollY*i.scrollFactorY),M.e=i.x,M.f=i.y,S.multiply(M,C),C.copyToContext(P)):(M.e-=n.scrollX*i.scrollFactorX,M.f-=n.scrollY*i.scrollFactorY,M.copyToContext(P)),(!t.antialias||i.scaleX>1||i.scaleY>1)&&(P.imageSmoothingEnabled=!1);for(var O=0;O<p;O++){var B=f[O],N=R[B.index];if(N){var Y=N.image.getSourceImage(),X=N.getTileTextureCoordinates(B.index);if(null!==X){var G=N.tileWidth,U=N.tileHeight,V=.5*G,z=.5*U;P.save(),P.translate(B.pixelX+V,B.pixelY+z),0!==B.rotation&&P.rotate(B.rotation),(B.flipX||B.flipY)&&P.scale(B.flipX?-1:1,B.flipY?-1:1),P.globalAlpha=b*B.alpha,P.drawImage(Y,X.x,X.y,G,U,-V,-z,G,U),P.restore()}}}P.restore()}}},function(t,i,n){var o=n(16),a=n(262);o.register("tilemap",(function(t){var i=void 0!==t?t:{};return a(this.scene,i.key,i.tileWidth,i.tileHeight,i.width,i.height,i.data,i.insertNull)}))},function(t,i,n){var o=n(5),a=n(262);o.register("tilemap",(function(t,i,n,o,u,d,f){return null===t&&(t=void 0),null===i&&(i=void 0),null===n&&(n=void 0),null===o&&(o=void 0),null===u&&(u=void 0),a(this.scene,t,i,n,o,u,d,f)}))},function(t,i,n){t.exports={Clock:n(1462),TimerEvent:n(582)}},function(t,i,n){var o=n(0),a=n(24),u=n(20),d=n(582),f=n(93),p=new o({initialize:function Clock2(t){this.scene=t,this.systems=t.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],t.sys.events.once(u.BOOT,this.boot,this),t.sys.events.on(u.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(u.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(u.PRE_UPDATE,this.preUpdate,this),t.on(u.UPDATE,this.update,this),t.once(u.SHUTDOWN,this.shutdown,this)},addEvent:function(t){var i;return t instanceof d?(i=t,this.removeEvent(i),i.elapsed=i.startAt,i.hasDispatched=!1,i.repeatCount=-1===i.repeat||i.loop?999999999999:i.repeat):i=new d(t),this._pendingInsertion.push(i),i},delayedCall:function(t,i,n,o){return this.addEvent({delay:t,callback:i,args:n,callbackScope:o})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var n=t[i];f(this._pendingRemoval,n),f(this._pendingInsertion,n),f(this._active,n)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var t=this._pendingRemoval.length,i=this._pendingInsertion.length;if(0!==t||0!==i){var n,o;for(n=0;n<t;n++){o=this._pendingRemoval[n];var a=this._active.indexOf(o);a>-1&&this._active.splice(a,1),o.destroy()}for(n=0;n<i;n++)o=this._pendingInsertion[n],this._active.push(o);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(t,i){if(this.now=t,!this.paused){i*=this.timeScale;for(var n=0;n<this._active.length;n++){var o=this._active[n];if(!o.paused&&(o.elapsed+=i*o.timeScale,o.elapsed>=o.delay)){var a=o.elapsed-o.delay;o.elapsed=o.delay,!o.hasDispatched&&o.callback&&(o.hasDispatched=!0,o.callback.apply(o.callbackScope,o.args)),o.repeatCount>0?(o.repeatCount--,o.elapsed=a,o.hasDispatched=!1):this._pendingRemoval.push(o)}}}},shutdown:function(){var t;for(t=0;t<this._pendingInsertion.length;t++)this._pendingInsertion[t].destroy();for(t=0;t<this._active.length;t++)this._active[t].destroy();for(t=0;t<this._pendingRemoval.length;t++)this._pendingRemoval[t].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var i=this.systems.events;i.off(u.PRE_UPDATE,this.preUpdate,this),i.off(u.UPDATE,this.update,this),i.off(u.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});a.register("Clock",p,"time"),t.exports=p},function(t,i,n){var o=n(100),a=n(17),u={Builders:n(1464),Events:n(267),TweenManager:n(1480),Tween:n(266),TweenData:n(268),Timeline:n(588)};u=a(!1,u,o),t.exports=u},function(t,i,n){t.exports={GetBoolean:n(99),GetEaseFunction:n(80),GetNewValue:n(162),GetProps:n(583),GetTargets:n(263),GetTweens:n(584),GetValueOp:n(264),NumberTweenBuilder:n(585),StaggerBuilder:n(586),TimelineBuilder:n(587),TweenBuilder:n(163)}},function(t,i){t.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(t,i){t.exports="complete"},function(t,i){t.exports="loop"},function(t,i){t.exports="pause"},function(t,i){t.exports="resume"},function(t,i){t.exports="start"},function(t,i){t.exports="update"},function(t,i){t.exports="active"},function(t,i){t.exports="complete"},function(t,i){t.exports="loop"},function(t,i){t.exports="repeat"},function(t,i){t.exports="start"},function(t,i){t.exports="stop"},function(t,i){t.exports="update"},function(t,i){t.exports="yoyo"},function(t,i,n){var o=n(93),a=n(0),u=n(585),d=n(24),f=n(20),p=n(586),b=n(587),S=n(100),M=n(163),C=new a({initialize:function TweenManager2(t){this.scene=t,this.systems=t.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,t.sys.events.once(f.BOOT,this.boot,this),t.sys.events.on(f.START,this.start,this)},boot:function(){this.systems.events.once(f.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(f.PRE_UPDATE,this.preUpdate,this),t.on(f.UPDATE,this.update,this),t.once(f.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(t){return b(this,t)},timeline:function(t){var i=b(this,t);return i.paused||(this._add.push(i),this._toProcess++),i},create:function(t){return M(this,t)},add:function(t){var i=M(this,t);return this._add.push(i),this._toProcess++,i},existing:function(t){return this._add.push(t),this._toProcess++,this},addCounter:function(t){var i=u(this,t);return this._add.push(i),this._toProcess++,i},stagger:function(t,i){return p(t,i)},preUpdate:function(){if(0!==this._toProcess){var t,i,n=this._destroy,o=this._active,a=this._pending;for(t=0;t<n.length;t++){i=n[t];var u=o.indexOf(i);-1===u?(u=a.indexOf(i))>-1&&(i.state=S.REMOVED,a.splice(u,1)):(i.state=S.REMOVED,o.splice(u,1))}for(n.length=0,n=this._add,t=0;t<n.length;t++)(i=n[t]).state===S.PENDING_ADD&&(i.init()?(i.play(),this._active.push(i)):this._pending.push(i));n.length=0,this._toProcess=0}},update:function(t,i){var n,o=this._active;i*=this.timeScale;for(var a=0;a<o.length;a++)(n=o[a]).update(t,i)&&(this._destroy.push(n),this._toProcess++)},remove:function(t){return o(this._add,t),o(this._pending,t),o(this._active,t),o(this._destroy,t),t.state=S.REMOVED,this},makeActive:function(t){if(-1!==this._add.indexOf(t)||-1!==this._active.indexOf(t))return this;var i=this._pending.indexOf(t);return-1!==i&&this._pending.splice(i,1),this._add.push(t),t.state=S.PENDING_ADD,this._toProcess++,this},each:function(t,i){for(var n=[null],o=1;o<arguments.length;o++)n.push(arguments[o]);for(var a in this.list)n[0]=this.list[a],t.apply(i,n)},getAllTweens:function(){for(var t=this._active,i=[],n=0;n<t.length;n++)i.push(t[n]);return i},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(t,i){void 0===i&&(i=!1);var n,o,a,u=this._active,d=[];for(Array.isArray(t)||(t=[t]),o=0;o<u.length;o++)for(n=u[o],a=0;a<t.length;a++)n.hasTarget(t[a])&&d.push(n);if(i)for(u=this._pending,o=0;o<u.length;o++)for(n=u[o],a=0;a<t.length;a++)n.hasTarget(t[a])&&d.push(n);return d},isTweening:function(t){for(var i,n=this._active,o=0;o<n.length;o++)if((i=n[o]).hasTarget(t)&&i.isPlaying())return!0;return!1},killAll:function(){for(var t=this.getAllTweens(),i=0;i<t.length;i++)t[i].stop();return this},killTweensOf:function(t){for(var i=this.getTweensOf(t),n=0;n<i.length;n++)i[n].stop();return this},pauseAll:function(){for(var t=this._active,i=0;i<t.length;i++)t[i].pause();return this},resumeAll:function(){for(var t=this._active,i=0;i<t.length;i++)t[i].resume();return this},setGlobalTimeScale:function(t){return this.timeScale=t,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var t=this.systems.events;t.off(f.PRE_UPDATE,this.preUpdate,this),t.off(f.UPDATE,this.update,this),t.off(f.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(f.START,this.start,this),this.scene=null,this.systems=null}});d.register("TweenManager",C,"tweens"),t.exports=C},function(t,i,n){t.exports={Array:n(208),Base64:n(1482),Objects:n(1484),String:n(1488),NOOP:n(1)}},function(t,i,n){t.exports={ArrayBufferToBase64:n(1483),Base64ToArrayBuffer:n(433)}},function(t,i){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";t.exports=function(t,i){for(var o=new Uint8Array(t),a=o.length,u=i?"data:"+i+";base64,":"",d=0;d<a;d+=3)u+=n[o[d]>>2],u+=n[(3&o[d])<<4|o[d+1]>>4],u+=n[(15&o[d+1])<<2|o[d+2]>>6],u+=n[63&o[d+2]];return a%3==2?u=u.substring(0,u.length-1)+"=":a%3==1&&(u=u.substring(0,u.length-2)+"=="),u}},function(t,i,n){t.exports={Clone:n(77),DeepCopy:n(175),Extend:n(17),GetAdvancedValue:n(13),GetFastValue:n(2),GetMinMaxValue:n(1485),GetValue:n(6),HasAll:n(1486),HasAny:n(455),HasValue:n(126),IsPlainObject:n(7),Merge:n(127),MergeRight:n(1487),Pick:n(571),SetValue:n(478)}},function(t,i,n){var o=n(6),a=n(18);t.exports=function(t,i,n,u,d){void 0===d&&(d=n);var f=o(t,i,d);return a(f,n,u)}},function(t,i){t.exports=function(t,i){for(var n=0;n<i.length;n++)if(!t.hasOwnProperty(i[n]))return!1;return!0}},function(t,i,n){var o=n(77);t.exports=function(t,i){var n=o(t);for(var a in i)n.hasOwnProperty(a)&&(n[a]=i[a]);return n}},function(t,i,n){t.exports={Format:n(1489),Pad:n(186),RemoveAt:n(1490),Reverse:n(1491),UppercaseFirst:n(205),UUID:n(222)}},function(t,i){t.exports=function(t,i){return t.replace(/%([0-9]+)/g,(function(t,n){return i[Number(n)-1]}))}},function(t,i){t.exports=function(t,i){return 0===i?t.slice(1):t.slice(0,i-1)+t.slice(i)}},function(t,i){t.exports=function(t){return t.split("").reverse().join("")}},function(t,i,n){t.exports={SoundManagerCreator:n(426),Events:n(70),BaseSound:n(146),BaseSoundManager:n(145),WebAudioSound:n(434),WebAudioSoundManager:n(432),HTML5AudioSound:n(429),HTML5AudioSoundManager:n(427),NoAudioSound:n(431),NoAudioSoundManager:n(430)}},function(t,i,n){t.exports={Arcade:n(1366),Matter:n(1494)}},function(t,i,n){t.exports={BodyBounds:n(1392),Components:n(249),Events:n(272),Factory:n(1394),MatterGameObject:n(1395),Image:n(1396),Matter:n(594),MatterPhysics:n(1524),PolyDecomp:n(1393),Sprite:n(1397),TileBody:n(593),PhysicsEditorParser:n(589),PhysicsJSONParser:n(590),PointerConstraint:n(1398),World:n(1402)}},function(t,i){t.exports={setBounce:function(t){return this.body.restitution=t,this}}},function(t,i){var n={setCollisionCategory:function(t){return this.body.collisionFilter.category=t,this},setCollisionGroup:function(t){return this.body.collisionFilter.group=t,this},setCollidesWith:function(t){var i=0;if(Array.isArray(t))for(var n=0;n<t.length;n++)i|=t[n];else i=t;return this.body.collisionFilter.mask=i,this},setOnCollide:function(t){return this.body.onCollideCallback=t,this},setOnCollideEnd:function(t){return this.body.onCollideEndCallback=t,this},setOnCollideActive:function(t){return this.body.onCollideActiveCallback=t,this},setOnCollideWith:function(t,i){Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var o=t[n].hasOwnProperty("body")?t[n].body:t[n];this.body.setOnCollideWith(o,i)}return this}};t.exports=n},function(t,i,n){var o=n(41),a={applyForce:function(t){return this._tempVec2.set(this.body.position.x,this.body.position.y),o.applyForce(this.body,this._tempVec2,t),this},applyForceFrom:function(t,i){return o.applyForce(this.body,t,i),this},thrust:function(t){var i=this.body.angle;return this._tempVec2.set(t*Math.cos(i),t*Math.sin(i)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(t){var i=this.body.angle-Math.PI/2;return this._tempVec2.set(t*Math.cos(i),t*Math.sin(i)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(t){var i=this.body.angle+Math.PI/2;return this._tempVec2.set(t*Math.cos(i),t*Math.sin(i)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(t){var i=this.body.angle-Math.PI;return this._tempVec2.set(t*Math.cos(i),t*Math.sin(i)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};t.exports=a},function(t,i){t.exports={setFriction:function(t,i,n){return this.body.friction=t,void 0!==i&&(this.body.frictionAir=i),void 0!==n&&(this.body.frictionStatic=n),this},setFrictionAir:function(t){return this.body.frictionAir=t,this},setFrictionStatic:function(t){return this.body.frictionStatic=t,this}}},function(t,i){t.exports={setIgnoreGravity:function(t){return this.body.ignoreGravity=t,this}}},function(t,i,n){var o=n(41),a=n(3),u={setMass:function(t){return o.setMass(this.body,t),this},setDensity:function(t){return o.setDensity(this.body,t),this},centerOfMass:{get:function(){return new a(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};t.exports=u},function(t,i){t.exports={setSensor:function(t){return this.body.isSensor=t,this},isSensor:function(){return this.body.isSensor}}},function(t,i,n){var o=n(86),a=n(41),u=n(124),d=n(2),f=n(589),p=n(590),b=n(64),S={setRectangle:function(t,i,n){return this.setBody({type:"rectangle",width:t,height:i},n)},setCircle:function(t,i){return this.setBody({type:"circle",radius:t},i)},setPolygon:function(t,i,n){return this.setBody({type:"polygon",sides:i,radius:t},n)},setTrapezoid:function(t,i,n,o){return this.setBody({type:"trapezoid",width:t,height:i,slope:n},o)},setExistingBody:function(t,i){void 0===i&&(i=!0),this.body&&this.world.remove(this.body,!0),this.body=t;for(var n=0;n<t.parts.length;n++)t.parts[n].gameObject=this;var o=this;if(t.destroy=function destroy(){o.world.remove(o.body,!0),o.body.gameObject=null},i&&(this.world.has(t)&&this.world.remove(t,!0),this.world.add(t)),this._originComponent){var a=t.render.sprite.xOffset,d=t.render.sprite.yOffset,f=t.centerOfMass.x,p=t.centerOfMass.y;if(u(f,.5)&&u(p,.5))this.setOrigin(a+.5,d+.5);else{var b=t.centerOffset.x,S=t.centerOffset.y;this.setOrigin(a+b/this.displayWidth,d+S/this.displayHeight)}}return this},setBody:function(t,i){if(!t)return this;var n;"string"==typeof t&&(t={type:t});var u=d(t,"type","rectangle"),S=d(t,"x",this._tempVec2.x),M=d(t,"y",this._tempVec2.y),C=d(t,"width",this.width),P=d(t,"height",this.height);switch(u){case"rectangle":n=o.rectangle(S,M,C,P,i);break;case"circle":var R=d(t,"radius",Math.max(C,P)/2),O=d(t,"maxSides",25);n=o.circle(S,M,R,i,O);break;case"trapezoid":var B=d(t,"slope",.5);n=o.trapezoid(S,M,C,P,B,i);break;case"polygon":var N=d(t,"sides",5),Y=d(t,"radius",Math.max(C,P)/2);n=o.polygon(S,M,N,Y,i);break;case"fromVertices":case"fromVerts":var X=d(t,"verts",null);if(X)if("string"==typeof X&&(X=b.fromPath(X)),this.body&&!this.body.hasOwnProperty("temp"))a.setVertices(this.body,X),n=this.body;else{var G=d(t,"flagInternal",!1),U=d(t,"removeCollinear",.01),V=d(t,"minimumArea",10);n=o.fromVertices(S,M,X,i,G,U,V)}break;case"fromPhysicsEditor":n=f.parseBody(S,M,t,i);break;case"fromPhysicsTracer":n=p.parseBody(S,M,t,i)}return n&&this.setExistingBody(n,t.addToWorld),this}};t.exports=S},function(t,i,n){var o=n(272),a=n(165),u=n(166),d={setToSleep:function(){return a.set(this.body,!0),this},setAwake:function(){return a.set(this.body,!1),this},setSleepThreshold:function(t){return void 0===t&&(t=60),this.body.sleepThreshold=t,this},setSleepEvents:function(t,i){return this.setSleepStartEvent(t),this.setSleepEndEvent(i),this},setSleepStartEvent:function(t){if(t){var i=this.world;u.on(this.body,"sleepStart",(function(t){i.emit(o.SLEEP_START,t,this)}))}else u.off(this.body,"sleepStart");return this},setSleepEndEvent:function(t){if(t){var i=this.world;u.on(this.body,"sleepEnd",(function(t){i.emit(o.SLEEP_END,t,this)}))}else u.off(this.body,"sleepEnd");return this}};t.exports=d},function(t,i){t.exports="afteradd"},function(t,i){t.exports="afterremove"},function(t,i){t.exports="afterupdate"},function(t,i){t.exports="beforeadd"},function(t,i){t.exports="beforeremove"},function(t,i){t.exports="beforeupdate"},function(t,i){t.exports="collisionactive"},function(t,i){t.exports="collisionend"},function(t,i){t.exports="collisionstart"},function(t,i){t.exports="dragend"},function(t,i){t.exports="drag"},function(t,i){t.exports="dragstart"},function(t,i){t.exports="pause"},function(t,i){t.exports="resume"},function(t,i){t.exports="sleepend"},function(t,i){t.exports="sleepstart"},function(t,i,n){var o=n(41),a={setStatic:function(t){return o.setStatic(this.body,t),this},isStatic:function(){return this.body.isStatic}};t.exports=a},function(t,i,n){var o=n(41),a=n(14),u=n(269),d=n(270),f={x:{get:function(){return this.body.position.x},set:function(t){this._tempVec2.set(t,this.y),o.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(t){this._tempVec2.set(this.x,t),o.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(t){var i=1/this._scaleX,n=1/this._scaleY;this._scaleX=t,0===this._scaleX?this.renderFlags&=-5:this.renderFlags|=4,o.scale(this.body,i,n),o.scale(this.body,t,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(t){var i=1/this._scaleX,n=1/this._scaleY;this._scaleY=t,0===this._scaleY?this.renderFlags&=-5:this.renderFlags|=4,o.scale(this.body,i,n),o.scale(this.body,this._scaleX,t)}},angle:{get:function(){return d(this.body.angle*a.RAD_TO_DEG)},set:function(t){this.rotation=d(t)*a.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(t){this._rotation=u(t),o.setAngle(this.body,this._rotation)}},setPosition:function(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this._tempVec2.set(t,i),o.setPosition(this.body,this._tempVec2),this},setRotation:function(t){return void 0===t&&(t=0),this._rotation=u(t),o.setAngle(this.body,t),this},setFixedRotation:function(){return o.setInertia(this.body,1/0),this},setAngle:function(t){return void 0===t&&(t=0),this.angle=t,o.setAngle(this.body,this.rotation),this},setScale:function(t,i,n){void 0===t&&(t=1),void 0===i&&(i=t);var a=1/this._scaleX,u=1/this._scaleY;return this._scaleX=t,this._scaleY=i,o.scale(this.body,a,u,n),o.scale(this.body,t,i,n),this}};t.exports=f},function(t,i,n){var o=n(41),a={setAngularVelocity:function(t){return o.setAngularVelocity(this.body,t),this},setVelocityX:function(t){return this._tempVec2.set(t,this.body.velocity.y),o.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(t){return this._tempVec2.set(this.body.velocity.x,t),o.setVelocity(this.body,this._tempVec2),this},setVelocity:function(t,i){return this._tempVec2.set(t,i),o.setVelocity(this.body,this._tempVec2),this}};t.exports=a},function(t,i,n){var o={};t.exports=o;var a=n(118),u=n(32);o.create=function(t){return u.extend({extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0},!1,t)},o.reset=function(t){t.extended&&(t.narrowDetections=0,t.narrowphaseTests=0,t.narrowReuse=0,t.narrowReuseCount=0,t.midphaseTests=0,t.broadphaseTests=0,t.narrowEff=0,t.midEff=0,t.broadEff=0,t.collisions=0,t.buckets=0,t.pairs=0,t.bodies=0)},o.update=function(t,i){if(t.extended){var n=i.world,o=a.allBodies(n);t.collisions=t.narrowDetections,t.pairs=i.pairs.list.length,t.bodies=o.length,t.midEff=(t.narrowDetections/(t.midphaseTests||1)).toFixed(2),t.narrowEff=(t.narrowDetections/(t.narrowphaseTests||1)).toFixed(2),t.broadEff=(1-t.broadphaseTests/(o.length||1)).toFixed(2),t.narrowReuse=(t.narrowReuseCount/(t.narrowphaseTests||1)).toFixed(2)}}},function(t,i,n){var o=n(123),a=n(271),u=n(86),d=n(41),f=n(1392),p=n(84),b=n(0),S=n(118),M=n(591),C=n(128),P=n(273),R=n(50),O=n(1394),B=n(2),N=n(6),Y=n(597),X=n(1525),G=n(1526),U=n(1399),V=n(1527),z=n(127),W=n(250),H=n(598),j=n(595),q=n(24),Z=n(1400),K=n(599),$=n(274),tt=n(20),et=n(592),it=n(83),nt=n(64),st=n(1402),rt=new b({initialize:function MatterPhysics2(t){this.scene=t,this.systems=t.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=d,this.composite=S,this.detector=P,this.grid=Y,this.pair=W,this.pairs=H,this.query=Z,this.resolver=K,this.sat=$,this.constraint=C,this.bodies=u,this.composites=M,this.axes=a,this.bounds=p,this.svg=et,this.vector=it,this.vertices=nt,this.verts=nt,this._tempVec2=it.create(),N(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),N(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),N(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),K._restingThresh=N(this.config,"restingThresh",4),K._restingThreshTangent=N(this.config,"restingThreshTangent",6),K._positionDampen=N(this.config,"positionDampen",.9),K._positionWarming=N(this.config,"positionWarming",.8),K._frictionNormalMultiplier=N(this.config,"frictionNormalMultiplier",5),t.sys.events.once(tt.BOOT,this.boot,this),t.sys.events.on(tt.START,this.start,this)},boot:function(){this.world=new st(this.scene,this.config),this.add=new O(this.world),this.bodyBounds=new f,this.systems.events.once(tt.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new st(this.scene,this.config),this.add=new O(this.world));var t=this.systems.events;t.on(tt.UPDATE,this.world.update,this.world),t.on(tt.POST_UPDATE,this.world.postUpdate,this.world),t.once(tt.SHUTDOWN,this.shutdown,this)},getConfig:function(){var t=this.systems.game.config.physics,i=this.systems.settings.physics;return z(B(i,"matter",{}),B(t,"matter",{}))},enableAttractorPlugin:function(){return j.register(X),j.use(U,X),this},enableWrapPlugin:function(){return j.register(V),j.use(U,V),this},enableCollisionEventsPlugin:function(){return j.register(G),j.use(U,G),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(t,i){this.world.step(t,i)},containsPoint:function(t,i,n){t=this.getMatterBodies(t);var o=it.create(i,n);return Z.point(t,o).length>0},intersectPoint:function(t,i,n){n=this.getMatterBodies(n);var o=it.create(t,i),a=[];return Z.point(n,o).forEach((function(t){-1===a.indexOf(t)&&a.push(t)})),a},intersectRect:function(t,i,n,o,a,u){void 0===a&&(a=!1),u=this.getMatterBodies(u);var d={min:{x:t,y:i},max:{x:t+n,y:i+o}},f=[];return Z.region(u,d,a).forEach((function(t){-1===f.indexOf(t)&&f.push(t)})),f},intersectRay:function(t,i,n,o,a,u){void 0===a&&(a=1),u=this.getMatterBodies(u);for(var d=[],f=Z.ray(u,it.create(t,i),it.create(n,o),a),p=0;p<f.length;p++)d.push(f[p].body);return d},intersectBody:function(t,i){i=this.getMatterBodies(i);for(var n=[],o=Z.collides(t,i),a=0;a<o.length;a++){var u=o[a];u.bodyA===t?n.push(u.bodyB):n.push(u.bodyA)}return n},overlap:function(t,i,n,o,a){void 0===n&&(n=null),void 0===o&&(o=null),void 0===a&&(a=n),Array.isArray(t)||(t=[t]),t=this.getMatterBodies(t),i=this.getMatterBodies(i);for(var u=!1,d=0;d<t.length;d++)for(var f=t[d],p=Z.collides(f,i),b=0;b<p.length;b++){var S=p[b],M=S.bodyA.id===f.id?S.bodyB:S.bodyA;if(!o||o.call(a,f,M,S))if(u=!0,n)n.call(a,f,M,S);else if(!o)return!0}return u},setCollisionCategory:function(t,i){return(t=this.getMatterBodies(t)).forEach((function(t){t.collisionFilter.category=i})),this},setCollisionGroup:function(t,i){return(t=this.getMatterBodies(t)).forEach((function(t){t.collisionFilter.group=i})),this},setCollidesWith:function(t,i){t=this.getMatterBodies(t);var n=0;if(Array.isArray(i))for(var o=0;o<i.length;o++)n|=i[o];else n=i;return t.forEach((function(t){t.collisionFilter.mask=n})),this},getMatterBodies:function(t){if(!t)return this.world.getAllBodies();Array.isArray(t)||(t=[t]);for(var i=[],n=0;n<t.length;n++){var o=t[n].hasOwnProperty("body")?t[n].body:t[n];i.push(o)}return i},setVelocity:function(t,i,n){t=this.getMatterBodies(t);var o=this._tempVec2;return o.x=i,o.y=n,t.forEach((function(t){d.setVelocity(t,o)})),this},setVelocityX:function(t,i){t=this.getMatterBodies(t);var n=this._tempVec2;return n.x=i,t.forEach((function(t){n.y=t.velocity.y,d.setVelocity(t,n)})),this},setVelocityY:function(t,i){t=this.getMatterBodies(t);var n=this._tempVec2;return n.y=i,t.forEach((function(t){n.x=t.velocity.x,d.setVelocity(t,n)})),this},setAngularVelocity:function(t,i){return(t=this.getMatterBodies(t)).forEach((function(t){d.setAngularVelocity(t,i)})),this},applyForce:function(t,i){t=this.getMatterBodies(t);var n=this._tempVec2;return t.forEach((function(t){n.x=t.position.x,n.y=t.position.y,d.applyForce(t,n,i)})),this},applyForceFromPosition:function(t,i,n,o){t=this.getMatterBodies(t);var a=this._tempVec2;return t.forEach((function(t){void 0===o&&(o=t.angle),a.x=n*Math.cos(o),a.y=n*Math.sin(o),d.applyForce(t,i,a)})),this},applyForceFromAngle:function(t,i,n){t=this.getMatterBodies(t);var o=this._tempVec2;return t.forEach((function(t){void 0===n&&(n=t.angle),o.x=i*Math.cos(n),o.y=i*Math.sin(n),d.applyForce(t,{x:t.position.x,y:t.position.y},o)})),this},getConstraintLength:function(t){var i=t.pointA.x,n=t.pointA.y,o=t.pointB.x,a=t.pointB.y;return t.bodyA&&(i+=t.bodyA.position.x,n+=t.bodyA.position.y),t.bodyB&&(o+=t.bodyB.position.x,a+=t.bodyB.position.y),R(i,n,o,a)},alignBody:function(t,i,n,a){var u;switch(t=t.hasOwnProperty("body")?t.body:t,a){case o.TOP_LEFT:case o.LEFT_TOP:u=this.bodyBounds.getTopLeft(t,i,n);break;case o.TOP_CENTER:u=this.bodyBounds.getTopCenter(t,i,n);break;case o.TOP_RIGHT:case o.RIGHT_TOP:u=this.bodyBounds.getTopRight(t,i,n);break;case o.LEFT_CENTER:u=this.bodyBounds.getLeftCenter(t,i,n);break;case o.CENTER:u=this.bodyBounds.getCenter(t,i,n);break;case o.RIGHT_CENTER:u=this.bodyBounds.getRightCenter(t,i,n);break;case o.LEFT_BOTTOM:case o.BOTTOM_LEFT:u=this.bodyBounds.getBottomLeft(t,i,n);break;case o.BOTTOM_CENTER:u=this.bodyBounds.getBottomCenter(t,i,n);break;case o.BOTTOM_RIGHT:case o.RIGHT_BOTTOM:u=this.bodyBounds.getBottomRight(t,i,n)}return u&&d.setPosition(t,u),this},shutdown:function(){var t=this.systems.events;this.world&&(t.off(tt.UPDATE,this.world.update,this.world),t.off(tt.POST_UPDATE,this.world.postUpdate,this.world)),t.off(tt.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(tt.START,this.start,this),this.scene=null,this.systems=null}});q.register("MatterPhysics",rt,"matterPhysics"),t.exports=rt},function(t,i,n){var o=n(594),a={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.14.2",silent:!0,install:function(t){t.after("Body.create",(function(){a.Body.init(this)})),t.before("Engine.update",(function(t){a.Engine.update(t)}))},Body:{init:function(t){t.plugin.attractors=t.plugin.attractors||[]}},Engine:{update:function(t){for(var i=o.Composite.allBodies(t.world),n=0;n<i.length;n++){var a=i[n],u=a.plugin.attractors;if(u&&u.length>0)for(var d=0;d<i.length;d++){var f=i[d];if(n!==d)for(var p=0;p<u.length;p++){var b=u[p],S=b;o.Common.isFunction(b)&&(S=b(a,f)),S&&o.Body.applyForce(f,f.position,S)}}}}},Attractors:{gravityConstant:.001,gravity:function(t,i){var n=o.Vector.sub(i.position,t.position),u=o.Vector.magnitudeSquared(n)||1e-4,d=o.Vector.normalise(n),f=-a.Attractors.gravityConstant*(t.mass*i.mass/u),p=o.Vector.mult(d,f);o.Body.applyForce(t,t.position,o.Vector.neg(p)),o.Body.applyForce(i,i.position,p)}}};t.exports=a},function(t,i){t.exports={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function(t){t.after("Engine.create",(function(){t.Events.on(this,"collisionStart",(function(i){i.pairs.map((function(i){var n=i.bodyA,o=i.bodyB;n.gameObject&&n.gameObject.emit("collide",n,o,i),o.gameObject&&o.gameObject.emit("collide",o,n,i),t.Events.trigger(n,"onCollide",{pair:i}),t.Events.trigger(o,"onCollide",{pair:i}),n.onCollideCallback&&n.onCollideCallback(i),o.onCollideCallback&&o.onCollideCallback(i),n.onCollideWith[o.id]&&n.onCollideWith[o.id](o,i),o.onCollideWith[n.id]&&o.onCollideWith[n.id](n,i)}))})),t.Events.on(this,"collisionActive",(function(i){i.pairs.map((function(i){var n=i.bodyA,o=i.bodyB;n.gameObject&&n.gameObject.emit("collideActive",n,o,i),o.gameObject&&o.gameObject.emit("collideActive",o,n,i),t.Events.trigger(n,"onCollideActive",{pair:i}),t.Events.trigger(o,"onCollideActive",{pair:i}),n.onCollideActiveCallback&&n.onCollideActiveCallback(i),o.onCollideActiveCallback&&o.onCollideActiveCallback(i)}))})),t.Events.on(this,"collisionEnd",(function(i){i.pairs.map((function(i){var n=i.bodyA,o=i.bodyB;n.gameObject&&n.gameObject.emit("collideEnd",n,o,i),o.gameObject&&o.gameObject.emit("collideEnd",o,n,i),t.Events.trigger(n,"onCollideEnd",{pair:i}),t.Events.trigger(o,"onCollideEnd",{pair:i}),n.onCollideEndCallback&&n.onCollideEndCallback(i),o.onCollideEndCallback&&o.onCollideEndCallback(i)}))}))}))}}},function(t,i,n){var o=n(594),a={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function(t){t.after("Engine.update",(function(){a.Engine.update(this)}))},Engine:{update:function(t){for(var i=t.world,n=o.Composite.allBodies(i),u=o.Composite.allComposites(i),d=0;d<n.length;d+=1){var f=n[d];f.plugin.wrap&&a.Body.wrap(f,f.plugin.wrap)}for(d=0;d<u.length;d+=1){var p=u[d];p.plugin.wrap&&a.Composite.wrap(p,p.plugin.wrap)}}},Bounds:{wrap:function(t,i){var n=null,o=null;if(void 0!==i.min.x&&void 0!==i.max.x&&(t.min.x>i.max.x?n=i.min.x-t.max.x:t.max.x<i.min.x&&(n=i.max.x-t.min.x)),void 0!==i.min.y&&void 0!==i.max.y&&(t.min.y>i.max.y?o=i.min.y-t.max.y:t.max.y<i.min.y&&(o=i.max.y-t.min.y)),null!==n||null!==o)return{x:n||0,y:o||0}}},Body:{wrap:function(t,i){var n=a.Bounds.wrap(t.bounds,i);return n&&o.Body.translate(t,n),n}},Composite:{bounds:function(t){for(var i=o.Composite.allBodies(t),n=[],a=0;a<i.length;a+=1){var u=i[a];n.push(u.bounds.min,u.bounds.max)}return o.Bounds.create(n)},wrap:function(t,i){var n=a.Bounds.wrap(a.Composite.bounds(t),i);return n&&o.Composite.translate(t,n),n}}};t.exports=a},function(t,i,n){(function(i){var o=n(33),a=n(17),u={Actions:n(275),Animations:n(723),BlendModes:n(35),Cache:n(735),Cameras:n(738),Core:n(806),Class:n(0),Create:n(888),Curves:n(894),Data:n(896),Display:n(898),DOM:n(917),Events:n(918),Game:n(920),GameObjects:n(1011),Geom:n(483),Input:n(1308),Loader:n(1338),Math:n(193),Physics:n(1493),Plugins:n(1403),Renderer:n(1405),Scale:n(1412),ScaleModes:n(168),Scene:n(418),Scenes:n(1413),Structs:n(1415),Textures:n(1416),Tilemaps:n(1418),Time:n(1461),Tweens:n(1463),Utils:n(1481)};u.Sound=n(1492),u=a(!1,u,o),t.exports=u,i.Phaser=u}).call(this,n(600))}])}));var u=getDefaultExportFromCjs(a.exports);const d=new class RoutinesData{constructor(){this.routines=[],this.routinesByNames={}}};class RoutinesManager{static RegisterRoutine(t,i=null){d.routines.push(t),t.GetName(),d.routinesByNames[i]=t,console.assert(t.OnRegister,t),t.OnRegister()}static InitRoutines(){for(const t in d.routines){const i=d.routines[t];console.assert(i.Init,i),i.Init()}}static UpdateRoutines(t,i){for(const n in d.routines){d.routines[n].Update(i)}}}let f;var p="undefined"!=typeof global&&(global.crypto||global.msCrypto);if(p&&p.getRandomValues){var b=new Uint8Array(16);f=function whatwgRNG(){return p.getRandomValues(b),b}}if(!f){var S=new Array(16);f=function(){for(var t,i=0;i<16;i++)0==(3&i)&&(t=4294967296*Math.random()),S[i]=t>>>((3&i)<<3)&255;return S}}for(var M=[],C=0;C<256;++C)M[C]=(C+256).toString(16).substr(1);function v4(t,i,n){var o=i&&n||0;"string"==typeof t&&(i="binary"==t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||f)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,i)for(var u=0;u<16;++u)i[o+u]=a[u];return i||function bytesToUuid(t,i){var n=i||0,o=M;return o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]}(a)}function GetGUID(){return v4()}function clone(t){return Array.isArray(t)?t.slice():t instanceof Object?Object.assign({},t):t}function forEach(t,i){return Array.isArray(t)?forEachOfArray(t,i):function forOwnOfNonArray(t,i){return forEachOfArray(function keysOfNonArray(t){return t?Object.getOwnPropertyNames(t):[]}(t),(n=>i(t[n],n))),t}(t,i),t}function forEachOfArray(t,i){for(let n=0,o=t.length;n<o&&!1!==i(t[n],n);++n);}const P=function merge(t,...i){for(const n of i)forEach(n,((i,n)=>{const o=t[n];o instanceof Object&&(i=merge(clone(o),i)),t[n]=i}));return t};class Component{get world(){return this.entity.world}get allowMultiple(){return this.constructor.allowMultiple}get keyProperty(){return this.constructor.keyProperty}constructor(t={}){null==this._cbit&&console.warn("COMPONENT NOT REGISTERED")}destroy(){this.entity.remove(this)}_onDestroyed(){this.onDestroyed(),delete this.entity}_onEvent(t){this.onEvent(t),"function"==typeof this[t.handlerName]&&this[t.handlerName](t)}_onAttached(t){this.entity=t,this.onAttached(t)}serialize(){const t={};for(const i in this.constructor.properties)t[i]=this[i];return JSON.parse(JSON.stringify(t))}onAttached(t){}onDestroyed(){}onEvent(t){}}__publicField(Component,"allowMultiple",!1),__publicField(Component,"keyProperty",null),__publicField(Component,"properties",{});const R={},camelString=t=>{const i=R[t];return i||(R[t]=function camelCase$1(t){return function words$1(t){var i;return null!==(i=t.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/(\d)([A-Za-z])/g,"$1 $2").replace(/([A-Za-z])(\d)/g,"$1 $2").replace(/\b([A-Z]+)([A-Z])([a-z])/,"$1 $2$3").match(/[A-Za-z0-9]+/g))&&void 0!==i?i:[]}(t).map(((t,i)=>i?function capitalize$1(t){return function upperFirst(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""}(t.toLowerCase())}(t):t.toLowerCase())).join("")}(t),R[t])};class EntityEvent{constructor(t,i={}){__publicField(this,"data",{}),__publicField(this,"prevented",!1),__publicField(this,"handled",!1),this.name=t,this.data=i,this.handlerName=camelString(`on ${this.name}`)}is(t){return this.name===t}handle(){this.handled=!0,this.prevented=!0}prevent(){this.prevented=!0}}const O=0,subtractBit=(t,i)=>t&~(1<<i),addBit=(t,i)=>t|1<<i,bitIntersection=(t,i)=>t&i,serializeComponent=t=>t.serialize(),serializeComponentKeyed=t=>{const i={};for(const n in t)i[n]=serializeComponent(t[n]);return i};class Entity{constructor(t,i){__publicField(this,"_cbits",O),__publicField(this,"_qeligible",!0),this.world=t,this.id=i,this.components={},this.isDestroyed=!1}_candidacy(){this._qeligible&&this.world._candidate(this)}add(t,i){const n=new t(i);n.keyProperty?((t,i)=>{const n=i._ckey;t.components[n]||(t[n]={},t.components[n]={}),t[n][i[i.keyProperty]]=i,t.components[n][i[i.keyProperty]]=i})(this,n):n.allowMultiple?((t,i)=>{const n=i._ckey;t.components[n]||(t[n]=[],t.components[n]=[]),t[n].push(i),t.components[n].push(i)})(this,n):((t,i)=>{const n=i._ckey;t[n]=i,t.components[n]=i})(this,n),this._cbits=addBit(this._cbits,n._cbit),n._onAttached(this),this._candidacy()}has(t){return i=this._cbits,n=t.prototype._cbit,(i>>n)%2!==O;var i,n}remove(t){t.keyProperty?((t,i)=>{const n=i._ckey,o=i[i.keyProperty];delete t[n][o],delete t.components[n][o],Object.keys(t[n]).length<=0&&(t._cbits=subtractBit(t._cbits,i._cbit),t._candidacy(),delete t.components[n],delete t[n])})(this,t):t.allowMultiple?((t,i)=>{const n=i._ckey,o=t[n].indexOf(i);t[n].splice(o,1),t.components[n].splice(o,1),t[n].length<=0&&(t._cbits=subtractBit(t._cbits,i._cbit),t._candidacy(),delete t.components[n],delete t[n])})(this,t):((t,i)=>{const n=i._ckey;t._cbits=subtractBit(t._cbits,i._cbit),t._candidacy(),delete t.components[n],delete t[n]})(this,t),t._onDestroyed()}destroy(){for(const t in this.components){const i=this.components[t];if(i instanceof Component)this._cbits=subtractBit(this._cbits,i._cbit);else if(i instanceof Array)for(const t of i)this._cbits=subtractBit(this._cbits,t._cbit);else for(const t of Object.values(i))this._cbits=subtractBit(this._cbits,t._cbit)}this._candidacy();for(const t in this.components){const i=this.components[t];if(i instanceof Component)i._onDestroyed();else if(i instanceof Array)for(const t of i)t._onDestroyed();else for(const t of Object.values(i))t._onDestroyed();delete this[t],delete this.components[t]}this.world._destroyed(this.id),this.components={},this.isDestroyed=!0}serialize(){const t={};for(const i in this.components){const n=this.components[i];t[i]=n instanceof Component?serializeComponent(n):n instanceof Array?n.map(serializeComponent):serializeComponentKeyed(n)}return{id:this.id,...t}}clone(){return this.world.cloneEntity(this)}fireEvent(t,i){const n=new EntityEvent(t,i);for(const o in this.components){const t=this.components[o];if(t instanceof Component){if(t._onEvent(n),n.prevented)return n}else if(t instanceof Array){for(let i=0;i<t.length;i++)if(t[i]._onEvent(n),n.prevented)return n}else for(const i of Object.values(t))if(i._onEvent(n),n.prevented)return n}return n}}class DataComponent extends Component{constructor(t){super(null),this.gameStateName=null;const i=JSON.parse(JSON.stringify(this.constructor.properties));Object.assign(this,i,t)}static At(t){return t.data}static get properties(){return{}}static AddToEntityWithProperties(t,i,n=!0){return t.has(DataComponent)||t.add(DataComponent,{}),P(DataComponent.At(t),i),DataComponent.At(t)}}const B=new class InternalData$b{constructor(){this.bags={},this.entitiesByAlias={}}};class EntityKeeper{static Init(){}static PutActorIntoHisBags(t){const i=BagsComponent.At(t);for(const n in i.keys)B.bags[n]||(B.bags[n]=[]),B.bags[n].indexOf(t)<=-1&&B.bags[n].push(t);i.alias&&(B.entitiesByAlias[i.alias]&&B.entitiesByAlias[i.alias],B.entitiesByAlias[i.alias]=t)}static RemoveActorFromAllHisBags(t){const i=BagsComponent.At(t);for(const n in i.keys){B.bags[n]||(B.bags[n]=[]);let i=B.bags[n].indexOf(t);i>=0&&B.bags[n].splice(i,1)}i.alias&&B.entitiesByAlias[i.alias]&&B.entitiesByAlias[i.alias]==t&&delete B.entitiesByAlias[i.alias]}static QueueDisposeActorsInBag(t){let i=B.bags[t];for(let n=i.length-1;n>=0;n--)EndOfLoopRoutine.QueueActorToDisposeBuffer(i[n])}static GetBagActorsReferenceList(t){return B.bags[t]||(B.bags[t]=[]),B.bags[t]}static GetEntityByAlias(t){return B.entitiesByAlias[t]}static GetEntityByID(t){return GeoticManager.GetWorld().getEntity(t)}static DumpLogBags(){console.log(B.bags)}static DumpLogLengthALL(){console.log(B.bags.ALL.length)}}class BagsComponent extends Component{constructor(t){super(null),this.keys={},this.alias=null;const i=JSON.parse(JSON.stringify(this.constructor.properties));Object.assign(this,i,t)}static At(t){return t.bags}static AddBagList(t,i){console.assert(IsArray(i),"not an array! ",i);const n={};for(const a in i){n[i[a]]=!0}t.has(BagsComponent)||t.add(BagsComponent,{});const o=BagsComponent.At(t);return P(o.keys,n),EntityKeeper.PutActorIntoHisBags(t),this}setAlias(t){this.alias&&console.warn("FIX ME! ",this.alias,t),this.alias=t,EntityKeeper.PutActorIntoHisBags(this.entity)}onAttached(t){EntityKeeper.PutActorIntoHisBags(t)}onDestroyed(){EntityKeeper.RemoveActorFromAllHisBags(this.entity)}static get properties(){return{}}}class ComponentRegistry{constructor(){__publicField(this,"_cbit",0),__publicField(this,"_map",{})}register(t,i=null){let n;n=camelString(t.name),null!=i&&(n=i),t.prototype._ckey=n,t.prototype._cbit=++this._cbit,this._map[n]=t}get(t){return this._map[t]}}class PrefabComponent{constructor(t,i={},n=!0){this.clazz=t,this.properties=i,this.overwrite=n}applyToEntity(t,i={}){if(!this.clazz.allowMultiple&&t.has(this.clazz)){if(!this.overwrite)return;const i=t[this.clazz.prototype._ckey];t.remove(i)}const n=P(this.properties,i);t.add(this.clazz,n)}}class Prefab{constructor(t){__publicField(this,"name",""),__publicField(this,"inherit",[]),__publicField(this,"components",[]),this.name=t}addComponent(t){this.components.push(t)}applyToEntity(t,i={}){this.inherit.forEach((n=>{n.applyToEntity(t,i)}));const n={};return this.components.forEach((o=>{const a=o.clazz,u=a.prototype._ckey;let d={};if(a.allowMultiple)if(a.keyProperty){const t=o.properties[a.keyProperty];i[u]&&i[u][t]&&(d=i[u][t])}else n[u]||(n[u]=0),i[u]&&i[u][n[u]]&&(d=i[u][n[u]]),n[u]++;else d=i[u];o.applyToEntity(t,d)})),t}}class PrefabRegistry{constructor(t){__publicField(this,"_prefabs",{}),__publicField(this,"_engine",null),this._engine=t}deserialize(t){const i=this.get(t.name);if(i)return i;const n=new Prefab(t.name);let o;o=Array.isArray(t.inherit)?t.inherit:"string"==typeof t.inherit?[t.inherit]:[],n.inherit=o.map((i=>{const n=this.get(i);return n||(console.warn(`Prefab "${t.name}" cannot inherit from Prefab "${i}" because is not registered yet! Prefabs must be registered in the right order.`),i)}));return(t.components||[]).forEach((i=>{let o="unknown";if("string"==typeof i){o=i;const t=camelString(i),a=this._engine._components.get(t);if(a)return void n.addComponent(new PrefabComponent(a))}if("object"==typeof i){o=i.type||"unknown";const t=camelString(i.type),a=this._engine._components.get(t);if(a)return void n.addComponent(new PrefabComponent(a,i.properties,i.overwrite))}console.warn(`Unrecognized component reference "${o}" in prefab "${t.name}". Ensure the component is registered before the prefab.`,i)})),n}register(t){const i=this.deserialize(t);this._prefabs[i.name]=i}get(t){return this._prefabs[t]}create(t,i,n={}){const o=this.get(i);if(!o)return void console.warn(`Could not instantiate prefab "${i}" since it is not registered`);const a=t.createEntity();return a._qeligible=!1,o.applyToEntity(a,n),a._qeligible=!0,a._candidacy(),a}}class Query{constructor(t,i){__publicField(this,"_cache",[]),__publicField(this,"_onAddListeners",[]),__publicField(this,"_onRemoveListeners",[]),__publicField(this,"_immutableResult",!0),this._world=t;const n=i.any||[],o=i.all||[],a=i.none||[];this._any=n.reduce(((t,i)=>addBit(t,i.prototype._cbit)),O),this._all=o.reduce(((t,i)=>addBit(t,i.prototype._cbit)),O),this._none=a.reduce(((t,i)=>addBit(t,i.prototype._cbit)),O),this._immutableResult=null==i.immutableResult||i.immutableResult,this.refresh()}onEntityAdded(t){this._onAddListeners.push(t)}onEntityRemoved(t){this._onRemoveListeners.push(t)}has(t){return this.idx(t)>=0}idx(t){return this._cache.indexOf(t)}matches(t){const i=t._cbits,n=this._any===O||bitIntersection(i,this._any)>0,o=bitIntersection(i,this._all)===this._all,a=bitIntersection(i,this._none)===O;return n&&o&&a}candidate(t){const i=this.idx(t),n=i>=0;return!t.isDestroyed&&this.matches(t)?(n||(this._cache.push(t),this._onAddListeners.forEach((i=>i(t)))),!0):(n&&(this._cache.splice(i,1),this._onRemoveListeners.forEach((i=>i(t)))),!1)}refresh(){this._cache=[],this._world._entities.forEach((t=>{this.candidate(t)}))}get(){return this._immutableResult?[...this._cache]:this._cache}}class World{constructor(t){__publicField(this,"_id",0),__publicField(this,"_queries",[]),__publicField(this,"_entities",new Map),this.engine=t}createId(){return++this._id+Math.random().toString(36).substr(2,9)}getEntity(t){return this._entities.get(t)}getEntities(){return this._entities.values()}createEntity(t=this.createId()){const i=new Entity(this,t);return this._entities.set(t,i),i}destroyEntity(t){const i=this.getEntity(t);i&&i.destroy()}destroyEntities(){this._entities.forEach((t=>{t.destroy()}))}destroy(){this.destroyEntities(),this._id=0,this._queries=[],this._entities=new Map}createQuery(t){const i=new Query(this,t);return this._queries.push(i),i}createPrefab(t,i={}){return this.engine._prefabs.create(this,t,i)}serialize(t){const i=[];return(t||this._entities).forEach((t=>{i.push(t.serialize())})),{entities:i}}cloneEntity(t){const i=t.serialize();return i.id=this.createId(),this._deserializeEntity(i)}deserialize(t){for(const i of t.entities)this._createOrGetEntityById(i.id);for(const i of t.entities)this._deserializeEntity(i)}_createOrGetEntityById(t){return this.getEntity(t)||this.createEntity(t)}_deserializeEntity(t){const{id:i,...n}=t,o=this._createOrGetEntityById(i);return o._qeligible=!1,Object.entries(n).forEach((([t,i])=>{const n=camelString(t),a=this.engine._components.get(n);a.allowMultiple?Object.values(i).forEach((t=>{o.add(a,t)})):o.add(a,i)})),o._qeligible=!0,o._candidacy(),o}_candidate(t){this._queries.forEach((i=>i.candidate(t)))}_destroyed(t){return this._entities.delete(t)}}class Engine{constructor(){__publicField(this,"_components",new ComponentRegistry),__publicField(this,"_prefabs",new PrefabRegistry(this))}registerComponent(t,i=null){this._components.register(t,i)}registerPrefab(t){this._prefabs.register(t)}createWorld(){return new World(this)}destroyWorld(t){t.destroy()}}const N=new class InternalDataClass$8{constructor(){this.engine=null,this.world=null}};class GeoticManager{static SetEngine(t){N.engine=t}static GetEngine(){return N.engine}static SetWorld(t){N.world=t}static GetWorld(){return N.world}static CreateEntity(t){console.assert(t,"GameState: ",t),t.name&&(t=t.name);const i=N.world.createEntity();return DataComponent.AddToEntityWithProperties(i,{gameStateName:t}),BagsComponent.AddBagList(i,["ALL"]),BagsComponent.AddBagList(i,[t]),i}static InstantActorDestroy(t){t.isDestroyed||t.destroy()}}class DataHolder{constructor(){this.data={},this.keyList=[]}register(t,i,n=!1){return this.data[t]&&0==n&&console.warn(t," ALREADY EXIST IN DATA HOLDER"),this.data[t]=i,this.keyList.indexOf(t)<=-1&&this.keyList.push(t),i}hasKey(t){return!!this.data[t]}getData(t){return console.assert(this.data[t],t," not in: ",this.data),this.data[t]}getKeyList(){return this.keyList}}class GameCommand{constructor(t){this._func=t}run(t=null){this._func(t)}}const Y=new class ExtendedDataHolder$1 extends DataHolder{register(t,i,n=!1){return super.register(t,i,n),i}getData(t){return super.getData(t)}runCommand(t,i={}){this.getData(t).run(i)}runCommandObj(t){this.runCommand(t.key,t)}};class CommandsComponent extends Component{constructor(t){super(null),this.byTriggers={};const i=JSON.parse(JSON.stringify(this.constructor.properties));Object.assign(this,i,t)}runCommandAtTriggerKey(t,i=null){if(null==this.byTriggers[t])return;const n=this.byTriggers[t];if(!Y.hasKey(n.key))return void console.warn("GameCommandsRegistry no defined command: ",n.key);let o={entity:this.entity};n&&P(o,n),n.pOptPayload&&P(o,i),Y.runCommand(n.key,o)}static At(t){return t.commands||CommandsComponent.AddWithData(t,{}),t.commands}static AddWithData(t,i){t.has(CommandsComponent)||t.add(CommandsComponent,{});const n=CommandsComponent.At(t);return P(n,{byTriggers:i}),n}static get properties(){return{}}}class GameState{constructor(t){this.name=t,this.state="null",this.curQuitDelay=0,this.onEnter=()=>{},this.onExit=()=>{},this.onQuit=()=>{},X.register(this.name,this)}enterFresh(){"quit"!=this.state&&"null"!=this.state&&("exit"!=this.state&&this.exit(),this.quit()),this.state="enterFresh",this.onEnter(),n.GetSingleton().gameEvent("stateChange",{stateName:this.name,stateChangeType:"enter"})}exit(t=500){if(this.delayedFunctionDict={},"exit"==this.state||"quit"==this.state||"null"==this.state)return;this.curQuitDelay=t,this.state="exit",this.onExit(),n.GetSingleton().gameEvent("stateChange",{stateName:this.name,stateChangeType:"exit"});const i=EntityKeeper.GetBagActorsReferenceList(this.name);for(const n in i){const t=i[n];CommandsComponent.At(t).runCommandAtTriggerKey("exit")}}quit(){this.delayedFunctionDict={},"quit"!=this.state&&"null"!=this.state&&(this.state="quit",EntityKeeper.QueueDisposeActorsInBag(this.name),this.onQuit())}continue(){"exit"==this.state&&this.quit(),"enterFresh"!=this.state&&this.enterFresh()}isRunning(){return"enterFresh"==this.state}updateDelayedQuit(t){"exit"==this.state&&(this.curQuitDelay-=t,this.curQuitDelay<0&&this.quit())}}const X=new class ExtendedDataHolder extends DataHolder{register(t,i){return super.register(t,i),i}getData(t){return super.getData(t)}},G={entityDisposeBuffer:[],delayedFunctionDict:{},delayedFunctionDeleteKeysList:[],active:!0};class EndOfLoopRoutine{static OnRegister(){}static Init(){}static Register(){RoutinesManager.RegisterRoutine(EndOfLoopRoutine)}static GetName(){return"EndOfLoopRoutine"}static QueueActorToDisposeBuffer(t){t&&(t.isDestroyed||G.entityDisposeBuffer.indexOf(t)>-1||G.entityDisposeBuffer.push(t))}static QueueDelayedFunction(t,i,n){return null==t&&(t=GetGUID()),G.delayedFunctionDict[t]={tag:t,delay:i,func:n},t}static Update(t){const i=X.getKeyList();for(const n in i){const o=i[n];X.getData(o).updateDelayedQuit(t)}for(const n in G.delayedFunctionDict){const i=G.delayedFunctionDict[n];i.delay-=t,i.delay<=0&&(G.delayedFunctionDeleteKeysList.push(n),i.func())}for(let n=G.delayedFunctionDeleteKeysList.length-1;n>=0;n--){const t=G.delayedFunctionDeleteKeysList[n];delete G.delayedFunctionDict[t],G.delayedFunctionDeleteKeysList.splice(n,1)}G.entityDisposeBuffer.length>0&&function _FlushDisposeBuffer(){const t=G.entityDisposeBuffer;G.entityDisposeBuffer=[];for(let i=t.length-1;i>=0;i--){const n=t[i];GeoticManager.InstantActorDestroy(n)}}()}}var U={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1},V=!1;function GetOs(){if(V)return U;V=!0;var t=navigator.userAgent;/Windows/.test(t)?U.windows=!0:/Mac OS/.test(t)&&!/like Mac OS/.test(t)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(U.iOS=!0,U.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),U.iOSVersion=parseInt(RegExp.$1,10)):U.macOS=!0:/Android/.test(t)?U.android=!0:/Linux/.test(t)?U.linux=!0:/iP[ao]d|iPhone/i.test(t)?(U.iOS=!0,navigator.appVersion.match(/OS (\d+)/),U.iOSVersion=parseInt(RegExp.$1,10),U.iPhone=-1!==t.toLowerCase().indexOf("iphone"),U.iPad=-1!==t.toLowerCase().indexOf("ipad")):/Kindle/.test(t)||/\bKF[A-Z][A-Z]+/.test(t)||/Silk.*Mobile Safari/.test(t)?U.kindle=!0:/CrOS/.test(t)&&(U.chromeOS=!0),(/Windows Phone/i.test(t)||/IEMobile/i.test(t))&&(U.android=!1,U.iOS=!1,U.macOS=!1,U.windows=!0,U.windowsPhone=!0);var i=/Silk/.test(t);return(U.windows||U.macOS||U.linux&&!i||U.chromeOS)&&(U.desktop=!0),(U.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(U.desktop=!1),navigator.standalone&&(U.webApp=!0),void 0!==window.cordova&&(U.cordova=!0),"undefined"!=typeof process&&process.versions&&process.versions.node&&(U.node=!0),U.node&&"object"==typeof process.versions&&(U.nodeWebkit=!!process.versions["node-webkit"],U.electron=!!process.versions.electron),void 0!==window.ejecta&&(U.ejecta=!0),/Crosswalk/.test(t)&&(U.crosswalk=!0),U.pixelRatio=window.devicePixelRatio||1,U}var z={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0},W=!1;class ObjectFactory$1{constructor(t){this.scene=t,this.displayList=t.sys.displayList,this.updateList=t.sys.updateList,t.sys.events.once("destroy",this.destroy,this)}destroy(){this.scene=null,this.displayList=null,this.updateList=null}static register(t,i){ObjectFactory$1.prototype[t]=i}}var H={exports:{}};!function(t){var i=Object.prototype.hasOwnProperty,n="~";function Events(){}function EE2(t,i,n){this.fn=t,this.context=i,this.once=n||!1}function addListener(t,i,o,a,u){if("function"!=typeof o)throw new TypeError("The listener must be a function");var d=new EE2(o,a||t,u),f=n?n+i:i;return t._events[f]?t._events[f].fn?t._events[f]=[t._events[f],d]:t._events[f].push(d):(t._events[f]=d,t._eventsCount++),t}function clearEvent(t,i){0==--t._eventsCount?t._events=new Events:delete t._events[i]}function EventEmitter2(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(n=!1)),EventEmitter2.prototype.eventNames=function eventNames(){var t,o,a=[];if(0===this._eventsCount)return a;for(o in t=this._events)i.call(t,o)&&a.push(n?o.slice(1):o);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(t)):a},EventEmitter2.prototype.listeners=function listeners(t){var i=n?n+t:t,o=this._events[i];if(!o)return[];if(o.fn)return[o.fn];for(var a=0,u=o.length,d=new Array(u);a<u;a++)d[a]=o[a].fn;return d},EventEmitter2.prototype.listenerCount=function listenerCount(t){var i=n?n+t:t,o=this._events[i];return o?o.fn?1:o.length:0},EventEmitter2.prototype.emit=function emit(t,i,o,a,u,d){var f=n?n+t:t;if(!this._events[f])return!1;var p,b,S=this._events[f],M=arguments.length;if(S.fn){switch(S.once&&this.removeListener(t,S.fn,void 0,!0),M){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,i),!0;case 3:return S.fn.call(S.context,i,o),!0;case 4:return S.fn.call(S.context,i,o,a),!0;case 5:return S.fn.call(S.context,i,o,a,u),!0;case 6:return S.fn.call(S.context,i,o,a,u,d),!0}for(b=1,p=new Array(M-1);b<M;b++)p[b-1]=arguments[b];S.fn.apply(S.context,p)}else{var C,P=S.length;for(b=0;b<P;b++)switch(S[b].once&&this.removeListener(t,S[b].fn,void 0,!0),M){case 1:S[b].fn.call(S[b].context);break;case 2:S[b].fn.call(S[b].context,i);break;case 3:S[b].fn.call(S[b].context,i,o);break;case 4:S[b].fn.call(S[b].context,i,o,a);break;default:if(!p)for(C=1,p=new Array(M-1);C<M;C++)p[C-1]=arguments[C];S[b].fn.apply(S[b].context,p)}}return!0},EventEmitter2.prototype.on=function on(t,i,n){return addListener(this,t,i,n,!1)},EventEmitter2.prototype.once=function once(t,i,n){return addListener(this,t,i,n,!0)},EventEmitter2.prototype.removeListener=function removeListener(t,i,o,a){var u=n?n+t:t;if(!this._events[u])return this;if(!i)return clearEvent(this,u),this;var d=this._events[u];if(d.fn)d.fn!==i||a&&!d.once||o&&d.context!==o||clearEvent(this,u);else{for(var f=0,p=[],b=d.length;f<b;f++)(d[f].fn!==i||a&&!d[f].once||o&&d[f].context!==o)&&p.push(d[f]);p.length?this._events[u]=1===p.length?p[0]:p:clearEvent(this,u)}return this},EventEmitter2.prototype.removeAllListeners=function removeAllListeners(t){var i;return t?(i=n?n+t:t,this._events[i]&&clearEvent(this,i)):(this._events=new Events,this._eventsCount=0),this},EventEmitter2.prototype.off=EventEmitter2.prototype.removeListener,EventEmitter2.prototype.addListener=EventEmitter2.prototype.on,EventEmitter2.prefixed=n,EventEmitter2.EventEmitter=EventEmitter2,t.exports=EventEmitter2}(H);var j=H.exports;class EventEmitter extends j{shutdown(){this.removeAllListeners()}destroy(){this.removeAllListeners()}}var GetValue$l=function(t,i,n){if(t&&"number"!=typeof t){if(t.hasOwnProperty(i))return t[i];if(-1!==i.indexOf(".")){for(var o=i.split("."),a=t,u=n,d=0;d<o.length;d++){if(!a.hasOwnProperty(o[d])){u=n;break}u=a[o[d]],a=a[o[d]]}return u}return n}return n};var q=new class Bank{constructor(t){this.nextId=GetValue$l(t,"start",1),this.uidKey=GetValue$l(t,"uidKey","$uid"),this.autoRemove=GetValue$l(t,"remove",!0),this.refs={},this.count=0}add(t,i){var n=this.refs,o=this.uidKey;if(o&&null!=(i=t[o]))return this;if(null==i)do{i=this.nextId,this.nextId++}while(n.hasOwnProperty(i));return n.hasOwnProperty(i)?i=null:(n[i]=t,this.count++,o&&(t[o]=i),this.autoRemove&&t.on&&t.once("destroy",(function(){this.remove(i)}),this)),o?this:i}addMultiple(t){for(var i=0,n=t.length;i<n;i++)this.add(t[i]);return this}get(t){return this.refs[t]}has(t){return this.refs.hasOwnProperty(t)}remove(t){var i=this.refs;if(i.hasOwnProperty(t)){if(this.uidKey)i[t][this.uidKey]=void 0;delete i[t],this.count--}return this}forEach(t,i){var n,o=this.refs;for(var a in o)n=o[a],i?t.call(i,n,a):t(n,a)}clear(){this.forEach((function(t){this.remove(t)}),this)}}({uidKey:"$uid",remove:!1}),Z={setEventEmitter(t,i){return void 0===i&&(i=Phaser.Events.EventEmitter),this._privateEE=!0===t||void 0===t,this._eventEmitter=this._privateEE?new i:t,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(t){return this._eventEmitter&&t&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}};const K=Phaser.Scene;var IsSceneObject=function(t){return t instanceof K},GetSceneObject=function(t){return null==t||"object"!=typeof t?null:IsSceneObject(t)?t:t.scene&&IsSceneObject(t.scene)?t.scene:t.parent&&t.parent.scene&&IsSceneObject(t.parent.scene)?t.parent.scene:void 0};const $=Phaser.Utils.Objects.GetValue;class ComponentBase{constructor(t,i){this.parent=t,this.scene=GetSceneObject(t),this.isShutdown=!1,this.setEventEmitter($(i,"eventEmitter",!0)),this.parent&&this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this)}shutdown(t){this.isShutdown||(this.parent&&this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.isShutdown=!0)}destroy(t){this.shutdown(t)}onSceneDestroy(){this.destroy(!0)}onParentDestroy(t,i){this.destroy(i)}}Object.assign(ComponentBase.prototype,Z);var tt={x:0,y:0},IsPlainObject=function(t){if("object"!=typeof t||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}return!0};const et=q.uidKey;class Chess extends ComponentBase{constructor(t,i){super(t,{eventEmitter:!1}),q.add(this,i),this.board=null,this.blocker=!1}shutdown(t){this.isShutdown||(this.board&&this.board.removeChess(this[et]),q.remove(this[et]),this.board=null,super.shutdown(t))}setBoard(t){return this.board=t,this}get tileXYZ(){return null==this.board?null:this.board.chessToTileXYZ(this[et])}setTileZ(t){return null==this.board||this.board.setChessTileZ(this.parent,t),this}setBlocker(t){return void 0===t&&(t=!0),this.blocker=t,this}setBlockEdge(t,i){!1===this.blocker&&(this.blocker={});var n=this.blocker;if(IsPlainObject(t)){var o=t;for(t in o)n[t]=o[t]}else void 0===i&&(i=!0),n[t]=i;return this}getBlockEdge(t){var i=this.blocker;return!1!==i&&(!!i.hasOwnProperty(t)&&i[t])}}var it={getTileDirection:function(t,i){var n=this.board;return null===n?null:(tt.x=t,tt.y=i,n.getNeighborTileDirection(this.tileXYZ,tt))}};Object.assign(Chess.prototype,it);var IsUID=function(t){var i=typeof t;return"number"===i||"string"===i},GetChessData=function(t){return IsUID(t)?q.get(t):(t.hasOwnProperty("rexChess")||(t.rexChess=new Chess(t)),t.rexChess)};const nt=q.uidKey;var GetChessUID=function(t){return IsUID(t)?t:GetChessData(t)[nt]},TileXYToKey=function(t,i,n){return void 0===n&&(n=","),`${t}${n}${i}`},st={},rt={},Between$1=function(t,i,n,o){return Math.atan2(o-i,n-t)},Normalize=function(t){return(t%=2*Math.PI)>=0?t:t+2*Math.PI};const ot=2*Math.PI;var at={x:0,y:0},ht=180/Math.PI,RadToDeg$3=function(t){return t*ht},GetGridPoints$2=function(t,i,n){if(t&&"number"!=typeof t){n=i;var o=this.chessToTileXYZ(t);t=o.x,i=o.y}return this.grid.getGridPoints(t,i,n)},Linear$1=function(t,i,n){return(i-t)*n+t},AreTileXYEqual=function(t,i){return t&&i&&t.x===i.x&&t.y===i.y},Contains$5=function(t,i,n){return t.radius>0&&i>=t.left&&i<=t.right&&n>=t.top&&n<=t.bottom&&(t.x-i)*(t.x-i)+(t.y-n)*(t.y-n)<=t.radius*t.radius},Contains$4=function(t,i,n){if(t.width<=0||t.height<=0)return!1;var o=(i-t.x)/t.width,a=(n-t.y)/t.height;return(o*=o)+(a*=a)<.25},Contains$3=function(t,i,n){for(var o=!1,a=-1,u=t.points.length-1;++a<t.points.length;u=a){var d=t.points[a].x,f=t.points[a].y,p=t.points[u].x,b=t.points[u].y;(f<=n&&n<b||b<=n&&n<f)&&i<(p-d)*(n-f)/(b-f)+d&&(o=!o)}return o};function getProperty(t,i,n){var o=n?t[i]:Object.getOwnPropertyDescriptor(t,i);return!n&&o.value&&"object"==typeof o.value&&(o=o.value),!(!o||!function hasGetterOrSetter(t){return!!t.get&&"function"==typeof t.get||!!t.set&&"function"==typeof t.set}(o))&&(void 0===o.enumerable&&(o.enumerable=!0),void 0===o.configurable&&(o.configurable=!0),o)}function hasNonConfigurable(t,i){var n=Object.getOwnPropertyDescriptor(t,i);return!!n&&(n.value&&"object"==typeof n.value&&(n=n.value),!1===n.configurable)}function extend(t,i,n,o){for(var a in i)if(i.hasOwnProperty(a)){var u=getProperty(i,a,n);if(!1!==u){if(hasNonConfigurable((o||t).prototype,a)){if(Class.ignoreFinals)continue;throw new Error("cannot override final property '"+a+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,a,u)}else t.prototype[a]=i[a]}}function mixin(t,i){if(i){Array.isArray(i)||(i=[i]);for(var n=0;n<i.length;n++)extend(t,i[n].prototype||i[n])}}function Class(t){var i,n;if(t||(t={}),t.initialize){if("function"!=typeof t.initialize)throw new Error("initialize must be a function");i=t.initialize,delete t.initialize}else if(t.Extends){var o=t.Extends;i=function(){o.apply(this,arguments)}}else i=function(){};t.Extends?(i.prototype=Object.create(t.Extends.prototype),i.prototype.constructor=i,n=t.Extends,delete t.Extends):i.prototype.constructor=i;var a=null;return t.Mixins&&(a=t.Mixins,delete t.Mixins),mixin(i,a),extend(i,t,!0,n),i}Class.extend=extend,Class.mixin=mixin,Class.ignoreFinals=!1;var Contains$2=function(t,i,n){return!(t.width<=0||t.height<=0)&&(t.x<=i&&t.x+t.width>=i&&t.y<=n&&t.y+t.height>=n)},Perimeter=function(t){return 2*(t.width+t.height)},lt=new Class({initialize:function Point2(t,i){void 0===t&&(t=0),void 0===i&&(i=t),this.x=t,this.y=i},setTo:function(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.x=t,this.y=i,this}}),GetPoint$1=function(t,i,n){if(void 0===n&&(n=new lt),i<=0||i>=1)return n.x=t.x,n.y=t.y,n;var o=Perimeter(t)*i;return i>.5?(o-=t.width+t.height)<=t.width?(n.x=t.right-o,n.y=t.bottom):(n.x=t.x,n.y=t.bottom-(o-t.width)):o<=t.width?(n.x=t.x+o,n.y=t.y):(n.x=t.right,n.y=t.y+(o-t.width)),n},GetPoints=function(t,i,n,o){void 0===o&&(o=[]),i||(i=function(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))}(t)/n);for(var a=t.x1,u=t.y1,d=t.x2,f=t.y2,p=0;p<i;p++){var b=p/i,S=a+(d-a)*b,M=u+(f-u)*b;o.push(new lt(S,M))}return o},ut=new Class({initialize:function Vector22(t,i){this.x=0,this.y=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0):(void 0===i&&(i=t),this.x=t||0,this.y=i||0)},clone:function(){return new ut(this.x,this.y)},copy:function(t){return this.x=t.x||0,this.y=t.y||0,this},setFromObject:function(t){return this.x=t.x||0,this.y=t.y||0,this},set:function(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setTo:function(t,i){return this.set(t,i)},setToPolar:function(t,i){return null==i&&(i=1),this.x=Math.cos(t)*i,this.y=Math.sin(t)*i,this},equals:function(t){return this.x===t.x&&this.y===t.y},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(t){var i=t.x-this.x,n=t.y-this.y;return Math.sqrt(i*i+n*n)},distanceSq:function(t){var i=t.x-this.x,n=t.y-this.y;return i*i+n*n},length:function(){var t=this.x,i=this.y;return Math.sqrt(t*t+i*i)},lengthSq:function(){var t=this.x,i=this.y;return t*t+i*i},normalize:function(){var t=this.x,i=this.y,n=t*t+i*i;return n>0&&(n=1/Math.sqrt(n),this.x=t*n,this.y=i*n),this},normalizeRightHand:function(){var t=this.x;return this.x=-1*this.y,this.y=t,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lerp:function(t,i){void 0===i&&(i=0);var n=this.x,o=this.y;return this.x=n+i*(t.x-n),this.y=o+i*(t.y-o),this},transformMat3:function(t){var i=this.x,n=this.y,o=t.val;return this.x=o[0]*i+o[3]*n+o[6],this.y=o[1]*i+o[4]*n+o[7],this},transformMat4:function(t){var i=this.x,n=this.y,o=t.val;return this.x=o[0]*i+o[4]*n+o[12],this.y=o[1]*i+o[5]*n+o[13],this},reset:function(){return this.x=0,this.y=0,this}});ut.ZERO=new ut,ut.RIGHT=new ut(1,0),ut.LEFT=new ut(-1,0),ut.UP=new ut(0,-1),ut.DOWN=new ut(0,1),ut.ONE=new ut(1,1);var ct,dt,ft,pt=new Class({initialize:function Line2(t,i,n,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),this.x1=t,this.y1=i,this.x2=n,this.y2=o},getPoint:function(t,i){return function(t,i,n){return void 0===n&&(n=new lt),n.x=t.x1+(t.x2-t.x1)*i,n.y=t.y1+(t.y2-t.y1)*i,n}(this,t,i)},getPoints:function(t,i,n){return GetPoints(this,t,i,n)},getRandomPoint:function(t){return function(t,i){void 0===i&&(i=new lt);var n=Math.random();return i.x=t.x1+n*(t.x2-t.x1),i.y=t.y1+n*(t.y2-t.y1),i}(this,t)},setTo:function(t,i,n,o){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),this.x1=t,this.y1=i,this.x2=n,this.y2=o,this},getPointA:function(t){return void 0===t&&(t=new ut),t.set(this.x1,this.y1),t},getPointB:function(t){return void 0===t&&(t=new ut),t.set(this.x2,this.y2),t},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(t){this.y1>this.y2?this.y1=t:this.y2=t}}}),gt=new Class({initialize:function Rectangle2(t,i,n,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),this.x=t,this.y=i,this.width=n,this.height=o},contains:function(t,i){return Contains$2(this,t,i)},getPoint:function(t,i){return GetPoint$1(this,t,i)},getPoints:function(t,i,n){return function(t,i,n,o){void 0===o&&(o=[]),i||(i=Perimeter(t)/n);for(var a=0;a<i;a++){var u=a/i;o.push(GetPoint$1(t,u))}return o}(this,t,i,n)},getRandomPoint:function(t){return i=this,void 0===(n=t)&&(n=new lt),n.x=i.x+Math.random()*i.width,n.y=i.y+Math.random()*i.height,n;var i,n},setTo:function(t,i,n,o){return this.x=t,this.y=i,this.width=n,this.height=o,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setSize:function(t,i){return void 0===i&&(i=t),this.width=t,this.height=i,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(t){return void 0===t&&(t=new pt),t.setTo(this.x,this.y,this.right,this.y),t},getLineB:function(t){return void 0===t&&(t=new pt),t.setTo(this.right,this.y,this.right,this.bottom),t},getLineC:function(t){return void 0===t&&(t=new pt),t.setTo(this.right,this.bottom,this.x,this.bottom),t},getLineD:function(t){return void 0===t&&(t=new pt),t.setTo(this.x,this.bottom,this.x,this.y),t},left:{get:function(){return this.x},set:function(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}},right:{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x}},top:{get:function(){return this.y},set:function(t){t>=this.bottom?this.height=0:this.height=this.bottom-t,this.y=t}},bottom:{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}}),Contains$1=function(t,i,n){var o=t.x3-t.x1,a=t.y3-t.y1,u=t.x2-t.x1,d=t.y2-t.y1,f=i-t.x1,p=n-t.y1,b=o*o+a*a,S=o*u+a*d,M=o*f+a*p,C=u*u+d*d,P=u*f+d*p,R=b*C-S*S,O=0===R?0:1/R,B=(C*M-S*P)*O,N=(b*P-S*M)*O;return B>=0&&N>=0&&B+N<1},Clamp$1=function(t,i,n){return Math.max(i,Math.min(n,t))},AddChess$1=function(t,i,n,o,a){if(!this.contains(i,n))return this;void 0===a&&(a=!0);var u=this.chessToTileXYZ(t);if(void 0===o&&(o=u?u.z:0),u&&u.x===i&&u.y===n&&u.z===o)return this;var d=this.tileXYZToChess(i,n,o);return d&&this.emit("kickout",t,d,u),this.removeChess(t),d&&this.removeChess(d,i,n,o),this.boardData.addUID(this.getChessUID(t),i,n,o),this.isBoard&&this.getChessData(t).setBoard(this),a&&this.gridAlign(t,i,n),this},vt={x:0,y:0},Wrap=function(t,i,n){var o=n-i;return i+((t-i)%o+o)%o},mt={},yt={},xt={},Tt={},Between=function(t,i){return Math.floor(Math.random()*(i-t+1)+t)},GetRandom=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=t.length);var o=i+Math.floor(Math.random()*n);return void 0===t[o]?null:t[o]},wt=[],bt={},St=[],Et=[],Mt=[],Ct=[],isEdgeBlocker=function(t,i){return!1===t||!0===t?t:!0===t[i]},At=[],GetBoard=function(t){return t?t.rexChess?t.rexChess.board:t.mainBoard?t.mainBoard:void 0:void 0},Pt={getChessData:GetChessData,getChessUID:GetChessUID,setBoardWidth:function(t){if(this.infinityMode)return this;if(void 0===this.width||this.width<=t)return this.width=t,this;var i,n,o;for(i=t;i<this.width;i++)for(n=0;n<this.height;n++)for(o in this.boardData.getUID(i,n))this.RemoveChess(!1,i,n,o);return this.width=t,this},setBoardHeight:function(t){if(this.infinityMode)return this;if(void 0===this.height||this.height<=t)return this.height=t,this;var i,n,o;for(n=t;n<this.height;n++)for(i=0;i<this.width;i++)for(o in this.boardData.getUID(i,n))this.RemoveChess(!1,i,n,o);return this.height=t,this},tileXYZToKey:function(t,i,n,o){return void 0===o&&(o=","),`${t}${o}${i}${o}${n}`},tileXYToKey:TileXYToKey,keyToTileXYZ:function(t,i,n){void 0===i?i={}:!0===i&&(i=st),void 0===n&&(n=",");var o=t.split(n);return i.x=o[0],i.y=o[1],i.z=o[2],i},tileXYToWorldX:function(t,i){return this.tileXYToWorldXY(t,i,!0).x},tileXYToWorldY:function(t,i){return this.tileXYToWorldXY(t,i,!0).y},tileXYToWorldXY:function(t,i,n){return this.grid.getWorldXY(t,i,n)},tileXYArrayToWorldXYArray:function(t,i){var n;void 0===i&&(i=[]);for(var o=0,a=t.length;o<a;o++)n=t[o],i.push(this.tileXYToWorldXY(n.x,n.y));return i},worldXYToTileX:function(t,i){return this.worldXYToTileXY(t,i,!0).x},worldXYToTileY:function(t,i){return this.worldXYToTileXY(t,i,!0).y},worldXYToTileXY:function(t,i,n){return this.grid.getTileXY(t,i,n)},worldXYToChessArray:function(t,i,n){var o=this.worldXYToTileXY(t,i,!0);return this.tileXYToChessArray(o.x,o.y,n)},worldXYToChess:function(t,i,n){var o=this.worldXYToTileXY(t,i,!0);if(void 0!==n)return this.tileXYZToChess(o.x,o.y,n);var a=this.boardData.getUID(o.x,o.y);if(null==a)return null;for(var n in a)return this.uidToChess(a[n])},worldXYSnapToGrid:function(t,i,n){return void 0===n?n={}:!0===n&&(n=rt),this.worldXYToTileXY(t,i,n),this.tileXYToWorldXY(n.x,n.y,n),n},angleBetween:function(t,i){t=this.chessToTileXYZ(t),i=this.chessToTileXYZ(i);var n=this.tileXYToWorldXY(t.x,t.y,!0),o=n.x,a=n.y,u=(n=this.tileXYToWorldXY(i.x,i.y,!0)).x,d=n.y;return Between$1(o,a,u,d)},isAngleInCone:function(t,i,n,o){var a=this.chessToTileXYZ(t),u=this.chessToTileXYZ(i),d=this.angleBetween(a,u);d=Normalize(d);var f=Math.abs(d-n);f=Math.min(f,ot-f);var p,b,S,M=o/2;return p=f,b=M,void 0===S&&(S=1e-4),Math.abs(p-b)<S||f<M},angleToward:function(t,i){void 0===t&&(t=at);var n=this.wrapMode,o=this.infinityMode;this.wrapMode=!1,this.infinityMode=!0;var a=this.getNeighborTileXY(t,i,!0);return this.wrapMode=n,this.infinityMode=o,this.angleBetween(t,a)},angleSnapToDirection:function(t,i){i=RadToDeg$3(i);for(var n,o,a,u=this.grid.allDirections,d=1/0,f=void 0,p=0,b=u.length;p<b;p++)n=RadToDeg$3(this.angleToward(t,u[p])),(o=Math.abs((a=void 0,0===(a=n-i)?0:a-360*Math.floor((a- -180)/360))))<d&&(d=o,f=p);return f},isOverlappingPoint:function(t,i,n){if(this.infinityMode&&void 0===n)return!0;var o=this.worldXYToTileXY(t,i,!0);return this.contains(o.x,o.y,n)},gridAlign:function(t,i,n){if(void 0===t)for(var o=this.getAllChess(),a=0,u=o.length;a<u;a++)this.gridAlign(o[a]);else{if(IsUID(t)&&(t=this.uidToChess(t)),void 0===i){var d=this.chessToTileXYZ(t);i=d.x,n=d.y}this.tileXYToWorldXY(i,n,t)}return this},getGridPoints:GetGridPoints$2,lineToTileXYArray:function(t,i,n,o,a){if("number"!=typeof t){var u=t;a=i,t=u.x1,i=u.y1,n=u.x2,o=u.y2}void 0===a&&(a=[]);for(var d,f,p,b,S,M,C,P=(d=t-n,f=i-o,Math.sqrt(d*d+f*f)),R=Math.min(this.grid.cellWidth,this.grid.cellHeight),O=Math.ceil(P/(R/4)),B=0;B<=O;B++)b=Linear$1(t,n,p=B/O),S=Linear$1(i,o,p),C=this.worldXYToTileXY(b,S),this.contains(C.x,C.y)&&(M&&AreTileXYEqual(M,C)||(a.push(C),M=C));return a},circleToTileXYArray:function(t,i){return this.shapeToTileXYArray(t,Contains$5,i)},ellipseToTileXYArray:function(t,i){return this.shapeToTileXYArray(t,Contains$4,i)},polygonToTileXYArray:function(t,i){return ct=function(t,i){void 0===i&&(i=new gt);for(var n,o=1/0,a=1/0,u=-o,d=-a,f=0;f<t.points.length;f++)n=t.points[f],o=Math.min(o,n.x),a=Math.min(a,n.y),u=Math.max(u,n.x),d=Math.max(d,n.y);return i.x=o,i.y=a,i.width=u-o,i.height=d-a,i}(t,ct),this.shapeToTileXYArray(t,Contains$3,ct,i)},rectangleToTileXYArray:function(t,i){return this.shapeToTileXYArray(t,Contains$2,i)},triangleToTileXYArray:function(t,i){return this.shapeToTileXYArray(t,Contains$1,i)},shapeToTileXYArray:function(t,i,n){void 0===n&&(n=[]),dt=this.worldXYToTileXY(t.left,t.top,dt),ft=this.worldXYToTileXY(t.right,t.bottom,ft);var o,a=dt.x-1,u=dt.y-1,d=ft.x+1,f=ft.y+1;this.infinityMode||(a=Clamp$1(a,0,this.width-1),u=Clamp$1(u,0,this.height-1),d=Clamp$1(d,0,this.width-1),f=Clamp$1(f,0,this.height-1));for(var p=a;p<=d;p++)for(var b=u;b<=f;b++)i(t,(o=this.tileXYToWorldXY(p,b,!0)).x,o.y)&&n.push({x:p,y:b});return n},uidToChess:function(t){return null==t?null:this.boardData.exists(t)?q.get(t).parent:null},addChess:AddChess$1,removeChess:function(t,i,n,o,a,u){if(void 0===a&&(a=!1),void 0===u&&(u=!1),t){var d=this.chessToTileXYZ(t);if(!d)return this;i=d.x,n=d.y,o=d.z}else if(!(t=this.tileXYZToChess(i,n,o)))return this;return u||this.boardData.removeUID(i,n,o),this.isBoard&&this.getChessData(t).setBoard(null),a&&t.destroy&&t.destroy(),this},removeAllChess:function(t,i){for(var n=this.getAllChess(),o=0,a=n.length;o<a;o++)this.removeChess(n[o],void 0,void 0,void 0,t,i);return this},swapChess:function(t,i,n){void 0===n&&(n=!0);var o=this.chessToTileXYZ(t),a=this.chessToTileXYZ(i);return null==o||null==a||(this.removeChess(t),this.removeChess(i),this.addChess(t,a.x,a.y,a.z,n),this.addChess(i,o.x,o.y,o.z,n)),this},moveChess:AddChess$1,setChessTileZ:function(t,i,n){void 0===n&&(n=!1);var o=this.chessToTileXYZ(t);return o&&this.moveChess(t,o.x,o.y,i,n),this},getAllChess:function(t){void 0===t&&(t=[]);var i=this.boardData.UIDToXYZ;for(var n in i)t.push(this.uidToChess(n));return t},contains:function(t,i,n){var o;return(o=!!this.infinityMode||t>=0&&t<this.width&&i>=0&&i<this.height)&&void 0!==n&&(o=this.boardData.contains(t,i,n)),o},forEachTileXY:function(t,i,n){switch(void 0===n&&(n=0),n){case 0:for(var o=0;o<this.height;o++)for(var a=0;a<this.width&&(vt.x=a,vt.y=o,!(i?t.call(i,vt,this):t(vt,this)));a++);break;case 1:for(o=0;o<this.height;o++)for(a=this.width-1;a>=0&&(vt.x=a,vt.y=o,!(i?t.call(i,vt,this):t(vt,this)));a--);break;case 2:for(a=0;a<this.width;a++)for(o=0;o<this.height&&(vt.x=a,vt.y=o,!(i?t.call(i,vt,this):t(vt,this)));o++);break;case 3:for(a=0;a<this.width;a++)for(o=this.height-1;o>=0&&(vt.x=a,vt.y=o,!(i?t.call(i,vt,this):t(vt,this)));o--);}return this},getWrapTileXY:function(t,i,n){return void 0===n?n={}:!0===n&&(n=mt),this.wrapMode?t=Wrap(t,0,this.width):!this.infinityMode&&(t<0||t>=this.width)&&(t=null),this.wrapMode?i=Wrap(i,0,this.height):!this.infinityMode&&(i<0||i>=this.height)&&(i=null),n.x=t,n.y=i,n},tileXYZToChess:function(t,i,n){var o=this.boardData.getUID(t,i,n);return this.uidToChess(o)},tileXYToChessArray:function(t,i,n){void 0===n&&(n=[]);var o=this.boardData.getUID(t,i);if(null==o)return n;for(var a in o)n.push(this.uidToChess(o[a]));return n},tileZToChessArray:function(t,i){void 0===i&&(i=[]);var n=this.boardData.UIDToXYZ;for(var o in n)n[o].z===t&&i.push(this.uidToChess(o));return i},tileXYArrayToChessArray:function(t,i,n){Array.isArray(i)&&(n=i,i=void 0),void 0===n&&(n=[]);for(var o,a=null!=i,u=0,d=t.length;u<d;u++)o=t[u],a?n.push(this.tileXYZToChess(o.x,o.y,i)):this.tileXYToChessArray(o.x,o.y,n);return n},chessToTileXYZ:function(t){if(!t)return null;if(IsUID(t)||function(t){return!IsUID(t)&&t&&!!t.rexChess}(t)){var i=GetChessUID(t);return this.boardData.getXYZ(i)}return(n=t)&&(IsPlainObject(n)||n.isTileXYZ)?t:null;var n},offset:function(t,i,n,o){return void 0===o?o={}:!0===o&&(o=yt),0===i&&0===n?(o.x=t.x,o.y=t.y):this.grid.offset(t,i,n,o),o},mirror:function(t,i,n,o){return void 0===o?o={}:!0===o&&(o=xt),void 0!==n?this.offset(t,-n.x,-n.y,o):(o.x=t.x,o.y=t.y),this.grid.mirror(o,i,o),void 0!==n&&this.offset(o,n.x,n.y,o),o},rotate:function(t,i,n,o){return void 0===o?o={}:!0===o&&(o=Tt),void 0!==n?this.offset(t,-n.x,-n.y,o):(o.x=t.x,o.y=t.y),this.grid.rotate(o,i,o),void 0!==n&&this.offset(o,n.x,n.y,o),o},getOppositeDirection:function(t,i,n){if(t&&"number"!=typeof t){n=i;var o=t,a=this.chessToTileXYZ(o);t=a.x,i=a.y}return this.grid.getOppositeDirection(t,i,n)},getDistance:function(t,i,n){return t=this.chessToTileXYZ(t),i=this.chessToTileXYZ(i),this.grid.getDistance(t,i,n)},directionBetween:function(t,i,n){void 0===n&&(n=!0);var o=this.chessToTileXYZ(t),a=this.chessToTileXYZ(i);return this.grid.directionBetween(o,a,n)},isDirectionInCone:function(t,i,n,o){var a=this.chessToTileXYZ(t),u=this.chessToTileXYZ(i),d=this.grid.directions;this.grid.setDirectionMode(this.sides);var f=this.grid.directionBetween(a,u,!1);this.grid.setDirectionMode(d);var p=Math.abs(f-n);return(p=Math.min(p,this.grid.directions-p))<=o/2},fit:function(t){var i,n=1/0,o=1/0;for(var a in t)i=t[a],n=Math.min(n,i.x),o=Math.min(o,i.y);if(0!==n||0!==o)for(var a in t)i=t[a],this.offset(i,-n,-o,i);var u=-1/0,d=-1/0;for(var a in t)i=t[a],u=Math.max(u,i.x),d=Math.max(d,i.y);return this.setBoardWidth(u+1),this.setBoardHeight(d+1),t},getEmptyTileXYArray:function(t,i){void 0===i&&(i=[]),void 0===t&&(t=0);for(var n=0;n<this.height;n++)for(var o=0;o<this.width;o++)null===this.tileXYZToChess(o,n,t)&&i.push({x:o,y:n});return i},getRandomEmptyTileXY:function(t,i){var n,o;void 0===t&&(t=0),void 0===i?i={}:!0===i&&(i=bt);for(var a=!0,u=20;a&&u>0;)n=Between(0,this.width-1),o=Between(0,this.height-1),a=null!==this.tileXYZToChess(n,o,t),u--;if(a){if(0===(wt=this.getEmptyTileXYArray(t,wt)).length)return null;var d=GetRandom(wt);return i.x=d.x,i.y=d.y,wt.length=0,i}return i.x=n,i.y=o,i},getTileXYAtDirection:function(t,i,n,o){var a=this.chessToTileXYZ(t);if(!a)return null;"string"==typeof i&&(i=-1===i.indexOf(",")?parseInt(i):i.split(","));var u,d="number"==typeof i,f="number"==typeof n;if(d&&f)o=this.grid.getTileXYAtDirection(a.x,a.y,i,n,o),this.getWrapTileXY(o.x,o.y,o),null!=o.x&&null!=o.y||(o=null);else if(void 0===o&&(o=[]),null==i&&(i=this.grid.allDirections),d)if(IsPlainObject(n)){var p=GetValue$l(n,"end",1),b=GetValue$l(n,"start",p>0?1:-1),S=GetValue$l(n,"step",p>=b?1:-1);if(b===p)null!==(u=this.getTileXYAtDirection(a,i,p))&&o.push(u);else if(b<p)for(var M=b;M<=p;M+=S)null!==(u=this.getTileXYAtDirection(a,i,M))&&o.push(u);else for(M=b;M>=p;M+=S)null!==(u=this.getTileXYAtDirection(a,i,M))&&o.push(u)}else{M=0;for(var C=n.length;M<C;M++)null!==(u=this.getTileXYAtDirection(a,i,n[M]))&&o.push(u)}else for(M=0,C=i.length;M<C;M++)f?null!==(u=this.getTileXYAtDirection(a,i[M],n))&&o.push(u):this.getTileXYAtDirection(a,i[M],n,o);return o},getNeighborTileXY:function(t,i,n){return this.getTileXYAtDirection(t,i,1,n)},getNeighborTileXYAtAngle:function(t,i,n){var o=this.angleSnapToDirection(t,i);return this.getTileXYAtDirection(t,o,1,n)},getNeighborChess:function(t,i,n,o){if(null===(t=this.chessToTileXYZ(t)))return null;null==n&&(n=t.z);var a,u=typeof i;if("number"===u||"string"===u&&-1===i.indexOf(",")){var d=i,f=this.getNeighborTileXY(t,d,!0);return null===f?null:this.tileXYZToChess(f.x,f.y,n)}void 0===o&&(o=[]),this.getNeighborTileXY(t,i,St);for(var p=0,b=St.length;p<b;p++)null!=(a=this.tileXYZToChess(St[p].x,St[p].y,n))&&o.push(a);return St.length=0,o},getNeighborTileDirection:function(t,i){if(null===t||null===i)return null;if(t=this.chessToTileXYZ(t),i=this.chessToTileXYZ(i),AreTileXYEqual(t,i))return null;var n=this.grid.getNeighborTileDirection(t,i);if(this.wrapMode&&null===n){for(var o=0,a=(Et=this.getNeighborTileXY(t,null,Et)).length;o<a;o++)if(AreTileXYEqual(i,Et[o])){n=o;break}Et.length=0}return n},getNeighborChessDirection:function(t,i){var n=this.chessToTileXYZ(t),o=this.chessToTileXYZ(i);return this.getNeighborTileDirection(n,o)},areNeighbors:function(t,i){return null!==this.getNeighborChessDirection(t,i)},ringToTileXYArray:function(t,i,n){var o;void 0===n&&(n=[]),t=this.chessToTileXYZ(t),this.grid.ringToTileXYArray(t,i,Mt);for(var a=0,u=Mt.length;a<u;a++)o=Mt[a],this.contains(o.x,o.y)&&n.push(o);return Mt.length=0,n},filledRingToTileXYArray:function(t,i,n,o){var a;IsArray(n)&&(o=n,n=void 0),void 0===n&&(n=!0),void 0===o&&(o=[]),t=this.chessToTileXYZ(t);for(var u=0;u<=i;u++)a=n?u:i-u,this.ringToTileXYArray(t,a,o);return o},hasBlocker:function(t,i,n){if(t&&"number"!=typeof t){var o=this.chessToTileXYZ(t);t=o.x,i=o.y,n=o.z}var a;if(void 0===n){for(var u=0,d=(a=this.tileXYToChessArray(t,i,Ct)).length;u<d;u++)if(!0===this.getChessData(a[u]).blocker)return Ct.length=0,!0;return Ct.length=0,!1}return null!==(a=this.tileXYZToChess(t,i,n))&&!0===this.getChessData(a).blocker},hasEdgeBlocker:function(t,i,n,o){var a;if(void 0===n){for(var u=0,d=(a=this.tileXYToChessArray(t,i,At)).length;u<d;u++)if(isEdgeBlocker(this.getChessData(a[u]).blocker))return At.length=0,!0;return At.length=0,!1}return null!==(a=this.tileXYZToChess(t,i,n))&&isEdgeBlocker(this.getChessData(a).blocker)},getGridPoints:GetGridPoints$2,chessToBoard:GetBoard},Clear=function(t){if("object"!=typeof t||null===t)return t;if(Array.isArray(t))t.length=0;else for(var i in t)delete t[i];return t},IsEmpty=function(t){for(var i in t)return!1;return!0};class BoardData{constructor(){this.XYZToUID={},this.UIDToXYZ={},this.clear()}shutdown(t){return this.XYZToUID=void 0,this.UIDToXYZ=void 0,this}destroy(t){return this.shutdown(t),this}clear(){return Clear(this.UIDToXYZ),Clear(this.XYZToUID),this.chessCount=0,this.clearBounds(),this}clearBounds(){return this._xMax=void 0,this._xMin=void 0,this._yMax=void 0,this._yMin=void 0,this}addUID(t,i,n,o){this.XYZToUID.hasOwnProperty(i)||(this.XYZToUID[i]={});var a=this.XYZToUID[i];return a.hasOwnProperty(n)||(a[n]={}),a[n][o]=t,this.UIDToXYZ[t]={x:i,y:n,z:o},this.chessCount++,this.clearBounds(),this}getUID(t,i,n){var o=this.XYZToUID[t];return o&&(o=o[i])&&void 0!==n&&(o=o[n]),o}removeUID(t,i,n){if(!this.XYZToUID.hasOwnProperty(t))return this;var o=this.XYZToUID[t];if(!o.hasOwnProperty(i))return this;var a=o[i];if(!a.hasOwnProperty(n))return this;var u=a[n];return delete a[n],delete this.UIDToXYZ[u],IsEmpty(a)&&delete o[i],IsEmpty(o)&&delete this.XYZToUID[t],this.chessCount--,this.clearBounds(),this}exists(t){return this.UIDToXYZ.hasOwnProperty(t)}contains(t,i,n){return null!=this.getUID(t,i,n)}getXYZ(t){return this.exists(t)?this.UIDToXYZ[t]:null}get xMax(){if(void 0===this._xMax){this._xMax=-1/0;var t,i=this.UIDToXYZ;for(var n in i)t=i[n].x,this._xMax<t&&(this._xMax=t)}return this._xMax}get xMin(){if(void 0===this._xMin){this._xMin=1/0;var t,i=this.UIDToXYZ;for(var n in i)t=i[n].x,this._xMin>t&&(this._xMin=t)}return this._xMin}get yMax(){if(void 0===this._yMax){this._yMax=-1/0;var t,i=this.UIDToXYZ;for(var n in i)t=i[n].y,this._yMax<t&&(this._yMax=t)}return this._yMax}get yMin(){if(void 0===this._yMin){this._yMin=1/0;var t,i=this.UIDToXYZ;for(var n in i)t=i[n].y,this._yMin>t&&(this._yMin=t)}return this._yMin}}var _t={},Rt={};class Quad{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.setType(GetValue$l(t,"type",0)),this.setDirectionMode(GetValue$l(t,"dir",4)),this.setOriginPosition(GetValue$l(t,"x",0),GetValue$l(t,"y",0)),this.setCellSize(GetValue$l(t,"cellWidth",0),GetValue$l(t,"cellHeight",0))}setType(t){return"string"==typeof t&&(t=Lt[t]),this.mode=t,this}setDirectionMode(t){return"string"==typeof t&&(t=kt[t]),this.directions=t,this}setOriginPosition(t,i){return this.x=t,this.y=i,this}get width(){return this._width}set width(t){this._width=t,this._halfWidth=t/2}get height(){return this._height}set height(t){this._height=t,this._halfHeight=t/2}setCellSize(t,i){return this.width=t,this.height=i,this}get cellWidth(){return this.width}set cellWidth(t){this.width=t}get cellHeight(){return this.height}set cellHeight(t){this.height=t}}var Ot={getWorldXY:function(t,i,n){var o,a;switch(void 0===n?n={}:!0===n&&(n=_t),this.mode){case 0:o=t*this.width,a=i*this.height;break;case 1:o=(t-i)*this._halfWidth,a=(t+i)*this._halfHeight}return o+=this.x,a+=this.y,n.x=o,n.y=a,n},getWorldX:function(t,i){return this.getWorldXY(t,i,!0).x},getWorldY:function(t,i){return this.getWorldXY(t,i,!0).y},getTileXY:function(t,i,n){void 0===n?n={}:!0===n&&(n=Rt),t-=this.x,i-=this.y;var o=t/this.width,a=i/this.height;switch(this.mode){case 0:n.x=Math.round(o),n.y=Math.round(a);break;case 1:n.x=Math.round(+o+a),n.y=Math.round(-o+a)}return n},getTileX:function(t,i){return this.getTileXY(t,i,!0).x},getTileY:function(t,i){return this.getTileXY(t,i,!0).y}};Object.assign(Quad.prototype,Ot);const Lt={orthogonal:0,isometric:1,staggered:2},kt={"4dir":4,"8dir":8};var SaveOrigin=function(){return this._savedOriginX=this.x,this._savedOriginY=this.y,this},RestoreOrigin=function(){return this.x=this._savedOriginX,this.y=this._savedOriginY,this};const Dt=[[1,0],[0,1],[-1,0],[0,-1],[1,1],[-1,1],[-1,-1],[1,-1]],It=Dt;var GetTileXAtDirection$1=function(t,i,n,o,a){var u,d;switch(void 0===a?a={}:!0===a&&(a=Ft),this.mode){case 0:u=Dt[n][0],d=Dt[n][1];break;case 1:u=It[n][0],d=It[n][1]}return 1===o?(a.x=t+u,a.y=i+d):(a.x=t+o*u,a.y=i+o*d),a},Ft={};const Bt=function(t){var i,n,o,a={};for(var u in t)n=(i=t[u])[0],o=i[1],a.hasOwnProperty(n)||(a[n]={}),a[n][o]=parseInt(u);return a}(Dt),Nt=Bt;const Yt={0:2,1:3,2:0,3:1,4:6,5:7,6:4,7:5};var Offset$2=function(t,i,n,o){void 0===o?o={}:!0===o&&(o=Xt);var a=t.x+i,u=t.y+n;return o.x=a,o.y=u,o},Xt={},Gt={},Ut={},DirectionNormalize=function(t){return Wrap(t,0,this.directions)},InitPoints=function(t){for(var i=[],n=0;n<t;n++)i.push({x:0,y:0});return i},Vt={},zt=InitPoints(4);class QuadGrid extends Quad{constructor(t){super(t),this.sides=4}get allDirections(){return 4===this.directions?Wt:Ht}get halfDirections(){return 4===this.directions?jt:qt}}const Wt=[0,1,2,3],Ht=[0,1,2,3,4,5,6,7],jt=[0,1],qt=[0,1,4,5];var Zt={saveOrigin:SaveOrigin,restoreOrigin:RestoreOrigin,getTileXYAtDirection:GetTileXAtDirection$1,getNeighborTileXY:function(t,i,n,o){return GetTileXAtDirection$1.call(this,t,i,n,1,o)},getNeighborTileDirection:function(t,i){var n;switch(this.mode){case 0:n=Bt;break;case 1:n=Nt}var o=i.x-t.x,a=i.y-t.y;if(n.hasOwnProperty(o)){var u=n[o];if(u.hasOwnProperty(a))return u[a]}return null},getOppositeDirection:function(t,i,n){return Yt[n]},offset:Offset$2,mirror:function(t,i,n){return void 0===n?n={}:!0===n&&(n=Gt),n.x=1&i?-t.x:t.x,n.y=2&i?-t.y:t.y,n},rotate:function(t,i,n){var o,a;switch(void 0===n?n={}:!0===n&&(n=Ut),i=Wrap(i,0,3)){case 1:o=-t.y,a=t.x;break;case 2:o=-t.x,a=-t.y;break;case 3:o=t.y,a=-t.x;break;default:o=t.x,a=t.y}return n.x=o,n.y=a,n},getDistance:function(t,i,n){var o=i.x-t.x,a=i.y-t.y;return n?Math.abs(o)+Math.abs(a):Math.sqrt(o*o+a*a)},directionBetween:function(t,i,n){var o;switch(void 0===n&&(n=!0),this.mode){case 0:case 1:if(t.y===i.y)o=i.x>=t.x?0:2;else if(t.x===i.x)o=i.y>=t.y?1:3;else if(4===this.directions){(d=RadToDeg$3(Between$1(t.x,t.y,i.x,i.y)))<0&&(d+=360),o=d/90,n&&(o=Math.round(o))}else{var a=i.x-t.x,u=i.y-t.y;if(a===u)o=a>0?4:6;else if(a===-u)o=a>0?7:5;else{var d;(d=RadToDeg$3(Math.atan2(u,a)))<0&&(d+=360);var f=d/45;n&&(f=Math.round(f)),o=f>=0&&f<1?f:f>=1&&f<2?f+3:f>=2&&f<3?f-1:f>=3&&f<4?f+2:f>=4&&f<5?f-2:f>=5&&f<6?f+1:f>=6&&f<7?f-3:f}}}return o===this.directions&&(o=0),o},directionNormalize:DirectionNormalize,getGridPoints:function(t,i,n){void 0===n?n=InitPoints(4):!0===n&&(n=zt),void 0===t?(Vt.x=0,Vt.y=0):this.getWorldXY(t,i,Vt);var o=0===this.mode?0:1;return function(t,i,n,o,a,u){void 0===u&&(u=InitPoints(4));var d=n/2,f=o/2;0===a?(u[0].x=t+d,u[0].y=i-f,u[1].x=t+d,u[1].y=i+f,u[2].x=t-d,u[2].y=i+f,u[3].x=t-d,u[3].y=i-f):(u[0].x=t+d,u[0].y=i,u[1].x=t,u[1].y=i+f,u[2].x=t-d,u[2].y=i,u[3].x=t,u[3].y=i-f)}(Vt.x,Vt.y,this.width,this.height,o,n),n},ringToTileXYArray:function(t,i,n){var o,a;for(void 0===n&&(n=[]),o=i,a=-i;a<=i;a++)n.push(Offset$2(t,o,a));for(a=i,o=i-1;o>=-i;o--)n.push(Offset$2(t,o,a));for(o=-i,a=i-1;a>=-i;a--)n.push(Offset$2(t,o,a));for(a=-i,o=1-i;o<=i-1;o++)n.push(Offset$2(t,o,a));return n}};Object.assign(QuadGrid.prototype,Zt);const Kt=Math.sqrt(3);const Jt=Math.sqrt(3);var Qt=0,$t=1,te=2,ee=3;const ie=Qt,ne=$t,se=te,re=ee;var oe={};const ae=Qt,he=$t,le=te,ue=ee;var cr2cube=function(t,i,n,o){switch(void 0===o?o={}:!0===o&&(o=ce),t){case ae:o.x=i-(n-(1&n))/2,o.z=n;break;case he:o.x=i-(n+(1&n))/2,o.z=n;break;case le:o.x=i,o.z=n-(i-(1&i))/2;break;case ue:o.x=i,o.z=n-(i+(1&i))/2}return o.y=-o.x-o.z,o},cube2cr=function(t,i,n,o,a){switch(void 0===a?a={}:!0===a&&(a=de),t){case ae:a.x=i+(o-(1&o))/2,a.y=o;break;case he:a.x=i+(o+(1&o))/2,a.y=o;break;case le:a.x=i,a.y=o+(i-(1&i))/2;break;case ue:a.x=i,a.y=o+(i+(1&i))/2}return a},ce={},de={};const fe=Qt,pe=$t,ge=te,ve=ee;var me={},ye={};const xe=Qt,Te=$t,we=te,be=ee;class Hexagon{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.setType(GetValue$l(t,"staggeraxis",1),GetValue$l(t,"staggerindex",1)),this.setDirectionMode(),this.setOriginPosition(GetValue$l(t,"x",0),GetValue$l(t,"y",0));var i=GetValue$l(t,"size",void 0);void 0!==i?this.setCellRadius(i):this.setCellSize(GetValue$l(t,"cellWidth",0),GetValue$l(t,"cellHeight",0))}setType(t,i){return"string"==typeof t&&(t=Ee[t]),"string"==typeof i&&(i=Me[i]),this.staggeraxis=t,this.staggerindex=i,this.mode=0===t?0===i?be:we:0===i?Te:xe,this}setDirectionMode(){return this.directions=6,this}setOriginPosition(t,i){return this.x=t,this.y=i,this}get width(){return this._width}set width(t){this._width=t,this._halfWidth=t/2}get height(){return this._height}set height(t){this._height=t,this._halfHeight=t/2}setCellSize(t,i){return this.width=t,this.height=i,this}setCellRadius(t){this.size=t;var i={size:this.size,type:this.staggeraxis},n=function(t){return 0===t.type?2*t.size:Kt*t.size}(i),o=function(t){return 0===t.type?Jt*t.size:2*t.size}(i);return this.setCellSize(n,o),this}get cellWidth(){return this.width}set cellWidth(t){this.width=t}get cellHeight(){return this.height}set cellHeight(t){this.height=t}}var Se={getWorldXY:function(t,i,n){void 0===n?n={}:!0===n&&(n=oe);var o=t*this.width,a=i*this.height;switch(this.mode){case ie:1&i&&(o+=this._halfWidth),a*=.75;break;case ne:1&i&&(o-=this._halfWidth),a*=.75;break;case se:o*=.75,1&t&&(a+=this._halfHeight);break;case re:o*=.75,1&t&&(a-=this._halfHeight)}return o+=this.x,a+=this.y,n.x=o,n.y=a,n},getWorldX:function(t,i){return this.getWorldXY(t,i,!0).x},getWorldY:function(t,i){return this.getWorldXY(t,i,!0).y},getTileXY:function(t,i,n){var o,a;switch(void 0===n?n={}:!0===n&&(n=ye),t-=this.x,i-=this.y,this.mode){case fe:case pe:a=1.3333333333333333*i/this.height,o=t/this.width-i/this.height*.6666666666666666;break;case ge:case ve:a=i/this.height-t/this.width*.6666666666666666,o=1.3333333333333333*t/this.width}var u=function(t,i,n){return void 0===n?n={}:!0===n&&(n=ce),n.x=t,n.y=-t-i,n.z=i,n}(o,a,me);return function(t,i,n,o){"number"!=typeof t&&(t=(o=t).x,i=o.y,n=o.z),void 0===o?o={}:!0===o&&(o=ce);var a=Math.round(t),u=Math.round(i),d=Math.round(n),f=Math.abs(a-t),p=Math.abs(u-i),b=Math.abs(d-n);f>p&&f>b?a=-u-d:p>b?u=-a-d:d=-a-u,o.x=a,o.y=u,o.z=d}(u),cube2cr(this.mode,u.x,u.y,u.z,n),n},getTileX:function(t,i){return this.getTileXY(t,i,!0).x},getTileY:function(t,i){return this.getTileXY(t,i,!0).y}};Object.assign(Hexagon.prototype,Se);const Ee={y:0,x:1},Me={even:0,odd:1},Ce=[[[[1,0],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1]],[[1,0],[1,1],[0,1],[-1,0],[0,-1],[1,-1]]],[[[1,0],[1,1],[0,1],[-1,0],[0,-1],[1,-1]],[[1,0],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1]]],[[[1,0],[0,1],[-1,0],[-1,-1],[0,-1],[1,-1]],[[1,1],[0,1],[-1,1],[-1,0],[0,-1],[1,0]]],[[[1,1],[0,1],[-1,1],[-1,0],[0,-1],[1,0]],[[1,0],[0,1],[-1,0],[-1,-1],[0,-1],[1,-1]]]],Ae=Qt,Pe=$t,_e=te,Re=ee;var GetParity=function(t,i,n){var o;switch(t){case Ae:case Pe:o=1&n;break;case _e:case Re:o=1&i}return o},GetTileXAtDirection=function(t,i,n,o,a){if(void 0===a?a={}:!0===a&&(a=Oe),1===o){var u=GetParity(this.mode,t,i);a.x=t+Ce[this.mode][u][n][0],a.y=i+Ce[this.mode][u][n][1]}else if(0===o)a.x=t,a.y=i;else{var d,f,p=cr2cube(this.mode,t,i,!0);switch(n){case 1:d=p.x,p.y-o,f=p.z+o;break;case 2:d=p.x-o,p.y,f=p.z+o;break;case 3:d=p.x-o,p.y+o,f=p.z;break;case 4:d=p.x,p.y+o,f=p.z-o;break;case 5:d=p.x+o,p.y,f=p.z-o;break;default:d=p.x+o,p.y-o,f=p.z}cube2cr(this.mode,d,0,f,a)}return a},Oe={},ReverseDirMap=function(t){var i,n,o,a={};for(var u in t)n=(i=t[u])[0],o=i[1],a.hasOwnProperty(n)||(a[n]={}),a[n][o]=parseInt(u);return a};const Le=[[ReverseDirMap(Ce[0][0]),ReverseDirMap(Ce[0][1])],[ReverseDirMap(Ce[1][0]),ReverseDirMap(Ce[1][1])],[ReverseDirMap(Ce[2][0]),ReverseDirMap(Ce[2][1])],[ReverseDirMap(Ce[3][0]),ReverseDirMap(Ce[3][1])]];const ke=Qt,De=$t,Ie=te,Fe=ee;var Be={};const Ne=Qt,Ye=$t;var Xe={},Ge={},Ue={},Ve={},ze={},We={};const He=Math.PI/180;var DegToRad$3=function(t){return t*He},je=InitPoints(6),qe={},Ze={};class HexagonGrid extends Hexagon{constructor(t){super(t),this.sides=6}get allDirections(){return Ke}get halfDirections(){return Je}}const Ke=[0,1,2,3,4,5],Je=[0,1,2];var Qe={saveOrigin:SaveOrigin,restoreOrigin:RestoreOrigin,getTileXYAtDirection:GetTileXAtDirection,getNeighborTileXY:function(t,i,n,o){return GetTileXAtDirection.call(this,t,i,n,1,o)},getNeighborTileDirection:function(t,i){var n=GetParity(this.mode,t.x,t.y),o=Le[this.mode][n],a=i.x-t.x,u=i.y-t.y;if(o.hasOwnProperty(a)){var d=o[a];if(d.hasOwnProperty(u))return d[u]}return null},getOppositeDirection:function(t,i,n){return(n+3)%6},offset:function(t,i,n,o){void 0===o?o={}:!0===o&&(o=Be);var a=t.x+i,u=t.y+n;switch(this.mode){case ke:0!=(1&n)&&0==(1&u)&&(a+=1);break;case De:0!=(1&n)&&0==(1&u)&&(a-=1);break;case Ie:0!=(1&i)&&0==(1&a)&&(u+=1);break;case Fe:0!=(1&i)&&0==(1&a)&&(u-=1)}return o.x=a,o.y=u,o},mirror:function(t,i,n){void 0===n?n={}:!0===n&&(n=Xe);var o,a,u,d=cr2cube(this.mode,t.x,t.y,!0),f=this.mode===Ne||this.mode===Ye;return 1&i&&(f?(o=d.y,a=d.x,u=d.z):(o=-d.x,a=-d.z,u=-d.y),d.x=o,d.y=a,d.z=u),2&i&&(f?(o=-d.y,a=-d.x,u=-d.z):(o=d.x,a=d.z,u=d.y)),cube2cr(this.mode,o,0,u,n),n},rotate:function(t,i,n){void 0===n?n={}:!0===n&&(n=Ge),i=Wrap(i,0,5);var o,a,u=cr2cube(this.mode,t.x,t.y,!0);switch(i){case 1:o=-u.z,-u.x,a=-u.y;break;case 2:o=u.y,u.z,a=u.x;break;case 3:o=-u.x,-u.y,a=-u.z;break;case 4:o=u.z,u.x,a=u.y;break;case 5:o=-u.y,-u.z,a=-u.x;break;default:o=u.x,u.y,a=u.z}return cube2cr(this.mode,o,0,a,n),n},getDistance:function(t,i,n){cr2cube(this.mode,t.x,t.y,Ue),cr2cube(this.mode,i.x,i.y,Ve);var o=Ve.x-Ue.x,a=Ve.y-Ue.y,u=Ve.z-Ue.z;return(Math.abs(o)+Math.abs(a)+Math.abs(u))/2},directionBetween:function(t,i,n){var o;void 0===n&&(n=!0),cr2cube(this.mode,t.x,t.y,ze),cr2cube(this.mode,i.x,i.y,We);var a=We.x-ze.x,u=We.y-ze.y,d=We.z-ze.z;return o=0===d?a>0?0:3:0===a?d>0?1:4:0===u?d>0?2:5:a>0&&u<0&&d>0?0+d/-u:a<0&&u<0&&d>0?1+-u/d:a<0&&u>0&&d>0?2+u/-a:a<0&&u>0&&d<0?3+-d/u:a>0&&u>0&&d<0?4+a/-d:5+-u/a,n&&(o=Math.round(o)),o},directionNormalize:DirectionNormalize,getGridPoints:function(t,i,n){var o;return void 0===n?n=InitPoints(6):!0===n&&(n=je),void 0===t?(qe.x=0,qe.y=0):this.getWorldXY(t,i,qe),void 0!==this.size?o=this.size:((o=Ze).width=this.width,o.height=this.height),function(t,i,n,o,a){if(void 0===a&&(a=InitPoints(6)),void 0===n);else if("number"==typeof n)for(var u,d=0===o?0:-30,f=0;f<6;f++)u=DegToRad$3(60*f+d),a[f].x=t+n*Math.cos(u),a[f].y=i+n*Math.sin(u);else{var p=n,b=p.width,S=p.height,M=b/2,C=b/4,P=S/2,R=S/4;0===o?(a[0].x=t+M,a[0].y=i,a[1].x=t+C,a[1].y=i+P,a[2].x=t-C,a[2].y=i+P,a[3].x=t-M,a[3].y=i,a[4].x=t-C,a[4].y=i-P,a[5].x=t+C,a[5].y=i-P):(a[0].x=t+M,a[0].y=i-R,a[1].x=t+M,a[1].y=i+R,a[2].x=t,a[2].y=i+P,a[3].x=t-M,a[3].y=i+R,a[4].x=t-M,a[4].y=i-R,a[5].x=t,a[5].y=i-P)}}(qe.x,qe.y,o,this.staggeraxis,n),n},ringToTileXYArray:function(t,i,n){void 0===n&&(n=[]);var o,a,u,d=cr2cube(this.mode,t.x,t.y,!0),f=d.x,p=(d.y,d.z);for(u=i,o=0;o>=-i;o--)a=-o-u,n.push(cube2cr(this.mode,f+o,0,p+u));for(o=-i,a=1;a<=i;a++)u=-o-a,n.push(cube2cr(this.mode,f+o,0,p+u));for(a=i,u=-1;u>=-i;u--)o=-a-u,n.push(cube2cr(this.mode,f+o,0,p+u));for(u=-i,o=1;o<=i;o++)a=-o-u,n.push(cube2cr(this.mode,f+o,0,p+u));for(o=i,a=-1;a>=-i;a--)u=-o-a,n.push(cube2cr(this.mode,f+o,0,p+u));for(a=-i,u=1;u<=i-1;u++)o=-a-u,n.push(cube2cr(this.mode,f+o,0,p+u));return n}};Object.assign(HexagonGrid.prototype,Qe);var $e={quadGrid:QuadGrid,hexagonGrid:HexagonGrid};class Board$1 extends EventEmitter{constructor(t,i){super(),this.isShutdown=!1,this.scene=t,this.boardData=new BoardData,this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.isBoard=GetValue$l(t,"isBoard",!0),this.setGrid(GetValue$l(t,"grid",void 0)),this.setWrapMode(GetValue$l(t,"wrap",!1)),this.setInfinityMode(GetValue$l(t,"infinity",!1)),this.setBoardWidth(GetValue$l(t,"width",0)),this.setBoardHeight(GetValue$l(t,"height",0)),this}boot(){this.scene&&this.isBoard&&this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(t){if(!this.isShutdown)return this.scene&&this.isBoard&&this.scene.sys.events.off("shutdown",this.destroy,this),this.isBoard&&this.removeAllChess(!t,!0),super.shutdown(),this.boardData.shutdown(t),this.scene=void 0,this.boardData=void 0,this.isShutdown=!0,this}destroy(t){this.isShutdown||(this.emit("destroy",this,t),this.shutdown(t))}setGrid(t){if(IsPlainObject(t)){var i=t,n=GetValue$l(i,"gridType","quadGrid");t=new $e[n](i)}return this.grid=t,this}setWrapMode(t){return void 0===t&&(t=!0),this.wrapMode=t,this}setInfinityMode(t){return void 0===t&&(t=!0),this.infinityMode=t,this}setBoardSize(t,i){return this.setBoardWidth(t),this.setBoardHeight(i),this}exists(t){return this.boardData.exists(this.getChessUID(t))}get chessCount(){return this.boardData.chessCount}clear(t){return void 0===t&&(t=!0),this.removeAllChess(t,!0),this.boardData.clear(),this}static GetBoard(t){return GetBoard(t)}}Object.assign(Board$1.prototype,Pt);const ti=Phaser.GameObjects.Zone;class TouchZone extends ti{constructor(t){super(t,0,0,1,1),t.add.existing(this),this.setScrollFactor(0),this.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}})}}const ei=Phaser.GameObjects.GameObject.RENDER_MASK;var InputCandidate=function(t){if(t.renderFlags!==ei)return!1;var i=!0,n=t.parentContainer;if(n)do{if(n.renderFlags!==ei){i=!1;break}n=n.parentContainer}while(n);return i},EmitChessEvent=function(t,i,n,o,a,u){if(null!=o&&null!=a){for(var d,f="string"!=typeof t?t:void 0,p="string"!=typeof i?i:void 0,b=n.tileXYToChessArray(o,a,ii),S=0,M=b.length;S<M;S++)d=b[S],InputCandidate(d)&&(d.emit&&(p?p(d):d.emit(i,u)),f?f(d):n.emit(t,u,d));ii.length=0}},ii=[],OnPointerDown$1=function(t){if(this.enable&&t.isDown){var i=this.board;null===this.pointer&&(this.pointer=t);var n=i.worldXYToTileXY(t.worldX,t.worldY,!0),o=n.x,a=n.y;if(this.prevTilePosition.x=this.tilePosition.x,this.prevTilePosition.y=this.tilePosition.y,this.tilePosition.x=o,this.tilePosition.y=a,i.contains(o,a)){i.emit("tiledown",t,this.tilePosition),i.emit("tileover",t,this.tilePosition);EmitChessEvent((function(n){i.emit("gameobjectdown",t,n),i.emit("gameobjectover",t,n)}),(function(i){i.emit("board.pointerdown",t),i.emit("board.pointerover",t)}),i,o,a,t)}}},OnPointerUp$1=function(t){if(this.enable){var i=this.board,n=i.worldXYToTileXY(t.worldX,t.worldY,!0),o=n.x,a=n.y;if(this.prevTilePosition.x=this.tilePosition.x,this.prevTilePosition.y=this.tilePosition.y,this.tilePosition.x=o,this.tilePosition.y=a,i.contains(o,a)){i.emit("tileup",t,this.tilePosition),i.emit("tileout",t,this.prevTilePosition);EmitChessEvent((function(n){i.emit("gameobjectup",t,n),i.emit("gameobjectout",t,n)}),(function(i){i.emit("board.pointerup",t),i.emit("board.pointerout",t)}),i,o,a,t),this.pointer===t&&(this.pointer=null)}}},OnPointerMove$1=function(t){if(this.enable){var i=this.board,n=i.worldXYToTileXY(t.worldX,t.worldY,!0);if(!AreTileXYEqual(this.tilePosition,n)){this.prevTilePosition.x=this.tilePosition.x,this.prevTilePosition.y=this.tilePosition.y,null!=this.prevTilePosition.x&&null!=this.prevTilePosition.y&&i.emit("tileout",t,this.prevTilePosition);var o=n.x,a=n.y;if(this.tilePosition.x=o,this.tilePosition.y=a,i.contains(o,a)){null===this.pointer&&(this.pointer=t),i.emit("tilemove",t,this.tilePosition),i.emit("tileover",t,this.tilePosition),EmitChessEvent("gameobjectout","board.pointerout",i,this.prevTilePosition.x,this.prevTilePosition.y,t);EmitChessEvent((function(n){i.emit("gameobjectmove",t,n),i.emit("gameobjectover",t,n)}),(function(i){i.emit("board.pointermove",t),i.emit("board.pointerover",t)}),i,o,a,t)}else this.pointer===t&&(this.pointer=null)}}};const ni=Phaser.Utils.Objects.GetValue;class TickTask extends ComponentBase{constructor(t,i){super(t,i),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(ni(i,"tickingMode",1))}boot(){2!==this.tickingMode||this.tickingState||this.startTicking()}shutdown(t){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(t))}setTickingMode(t){"string"==typeof t&&(t=si[t]),this.tickingMode=t}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(t){this._isRunning!==t&&(this._isRunning=t,1===this.tickingMode&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}}const si={no:0,lazy:1,always:2},ri=Phaser.Utils.Objects.GetValue;class OnePointerTracer extends TickTask{constructor(t,i){var n=GetSceneObject(t);n===t&&(t=void 0),super(n,i),this.gameObject=t,t&&t.setInteractive(ri(i,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.setEnable(ri(t,"enable",!0)),this.setDetectBounds(),void 0===this.gameObject?this.setDetectBounds(ri(t,"bounds",void 0)):this.setDetectBounds(),this.tracerState=oi,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(t){this.scene&&(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}setDetectBounds(t){return this.bounds=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t,i){this.enable&&(void 0===this.pointer&&(!this.bounds||this.bounds.contains(t.x,t.y))&&this.pointer!==t&&(this.pointer=t,this.lastPointer=t,this.movedState=!1,this.tracerState=ai,void 0===this.gameObject&&(this.isTouchingAnyObject=i.length>0),this.onDragStart()))}onPointerUp(t){this.enable&&((!this.bounds||this.bounds.contains(t.x,t.y))&&this.pointer===t&&(this.pointer=void 0,this.movedState=!1,this.tracerState=oi,this.onDragEnd()))}onPointerMove(t){if(this.enable&&t.isDown){var i=!this.bounds||this.bounds.contains(t.x,t.y),n=this.pointer===t;!n&&i||(n&&!i?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}}dragCancel(){return this.tracerState===ai&&this.onDragEnd(),this.pointer=void 0,this.tracerState=oi,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(t,i){}postUpdate(t,i){}startTicking(){super.startTicking(),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=hi,this}}const oi=0,ai=1,hi="IDLE";class FSM{constructor(t){var i=GetValue$l(t,"states",void 0);i&&this.addStates(i);var n=GetValue$l(t,"extend",void 0);if(n)for(var o in n)this.hasOwnProperty(o)&&void 0!==this[o]||(this[o]=n[o]);var a=GetValue$l(t,"eventEmitter",void 0),u=GetValue$l(t,"EventEmitterClass",void 0);this.setEventEmitter(a,u),this._stateLock=!1,this.resetFromJSON(t)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(t){this.setEnable(GetValue$l(t,"enable",!0)),this.start(GetValue$l(t,"start",void 0));var i=GetValue$l(t,"init",void 0);return i&&i.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(t){if(this.enable&&!this._stateLock&&this._state!==t){if(this._prevState=this._state,this._state=t,this._stateLock=!0,this.emit("statechange",this),null!=this._prevState){var i="exit_"+this._prevState,n=this[i];n&&n.call(this),this.emit(i,this)}if(this._stateLock=!1,null!=this._state){var o="enter_"+this._state,a=this[o];a&&a.call(this),this.emit(o,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(t){return this._start=t,this._prevState=void 0,this._state=t,this}goto(t){return null!=t&&(this.state=t),this}next(){var t,i=this["next_"+this.state];return i&&(t="string"==typeof i?i:i.call(this)),this.goto(t),this}addState(t,i){"string"!=typeof t&&(t=(i=t).name);var n=i.next;n&&(this["next_"+t]=n);var o=i.exit;o&&(this["exit_"+t]=o);var a=i.enter;return a&&(this["enter_"+t]=a),this}addStates(t){if(Array.isArray(t))for(var i=0,n=t.length;i<n;i++)this.addState(t[i]);else for(var o in t)this.addState(o,t[o]);return this}runMethod(t,i,n,o,a,u){var d=this[t+"_"+this.state];if(d){var f=arguments.length;switch(f){case 1:return d.call(this);case 2:return d.call(this,i);case 3:return d.call(this,i,n);case 4:return d.call(this,i,n,o);case 5:return d.call(this,i,n,o,a);case 6:return d.call(this,i,n,o,a,u)}for(var p=new Array(f-1),b=1;b<f;b++)p[b-1]=arguments[b];return d.apply(this,p)}}update(t,i){this.runMethod("update",t,i)}preupdate(t,i){this.runMethod("preupdate",t,i)}postupdate(t,i){this.runMethod("postupdate",t,i)}}Object.assign(FSM.prototype,Z);const li=Phaser.Utils.Objects.GetValue,ui=Phaser.Math.Distance.Between;class Tap extends OnePointerTracer{constructor(t,i){super(t,i);var n=this,o={states:{IDLE:{enter:function(){n.stop(),n.tapsCount=0,n.x=0,n.y=0,n.worldX=0,n.worldY=0},exit:function(){var t=n.lastPointer;n.x=t.x,n.y=t.y,n.worldX=t.worldX,n.worldY=t.worldY}},BEGIN:{enter:function(){n.start(),n.tapsCount=0,n.emit("tappingstart",n,n.gameObject,n.lastPointer)}},RECOGNIZED:{enter:function(){n.start(),n.emit("tap",n,n.gameObject,n.lastPointer),n.emit(`${n.tapsCount}tap`,n,n.gameObject,n.lastPointer)}}},init:function(){this.state=ci},eventEmitter:!1};this.setRecongizedStateObject(new FSM(o))}resetFromJSON(t){super.resetFromJSON(t),this.setHoldTime(li(t,"time",250)),this.setTapInterval(li(t,"tapInterval",200)),this.setDragThreshold(li(t,"threshold",9)),this.setTapOffset(li(t,"tapOffset",10));var i=li(t,"taps",void 0);return void 0!==i?this.setTaps(i):(this.setMaxTaps(li(t,"maxTaps",void 0)),this.setMinTaps(li(t,"minTaps",void 0))),this}onDragStart(){switch(this.state){case ci:this.state=di;break;case di:var t=this.lastPointer;ui(t.upX,t.upY,t.x,t.y)>this.tapOffset&&(this.state=fi,this.state=di);break;case fi:this.state=di}}onDragEnd(){this.state===di&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),void 0!==this.maxTaps&&this.tapsCount===this.maxTaps&&(this.state=fi))}onDrag(){this.state!==ci&&this.pointer.getDistance()>this.dragThreshold&&(this.state=ci)}preUpdate(t,i){if(this.isRunning&&this.enable&&this.state===di){var n=this.lastPointer;if(n.isDown)t-n.downTime>this.holdTime&&(this.state=ci);else t-n.upTime>this.tapInterval&&(void 0===this.minTaps||this.tapsCount>=this.minTaps?this.state=fi:this.state=ci)}}postUpdate(t,i){this.isRunning&&this.enable&&this.state===fi&&(this.state=ci)}get isTapped(){return this.state===fi}setHoldTime(t){return this.holdTime=t,this}setTapInterval(t){return this.tapInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setTapOffset(t){return this.tapOffset=t,this}setMaxTaps(t){return this.maxTaps=t,this}setMinTaps(t){return this.minTaps=t,this}setTaps(t,i){return void 0===i&&(i=t),this.setMinTaps(t).setMaxTaps(i),this}}const ci="IDLE",di="BEGIN",fi="RECOGNIZED";var InstallTap=function(){var t=this.touchZone?this.touchZone:this.board.scene,i=new Tap(t);return i.on("tap",OnTap,this),i},OnTap=function(t){var i=this.board,n=i.worldXYToTileXY(t.worldX,t.worldY),o=n.x,a=n.y;if(i.contains(o,a)){i.emit("tiletap",t,n),i.emit(`tile${t.tapsCount}tap`,t,n);EmitChessEvent((function(n){i.emit("gameobjecttap",t,n),i.emit(`gameobject${t.tapsCount}tap`,t,n)}),(function(i){i.emit("board.tap",t),i.emit(`board.${t.tapsCount}tap`,t)}),i,o,a,t)}};const pi=Phaser.Utils.Objects.GetValue;class Press extends OnePointerTracer{constructor(t,i){super(t,i);var n=this,o={states:{IDLE:{enter:function(){n.x=0,n.y=0,n.worldX=0,n.worldY=0},exit:function(){var t=n.lastPointer;n.x=t.x,n.y=t.y,n.worldX=t.worldX,n.worldY=t.worldY}},BEGIN:{enter:function(){n.start()},exit:function(){n.stop()}},RECOGNIZED:{enter:function(){n.emit("pressstart",n,n.gameObject,n.lastPointer)},exit:function(){n.emit("pressend",n,n.gameObject,n.lastPointer)}}},init:function(){this.state=gi},eventEmitter:!1};this.setRecongizedStateObject(new FSM(o))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(pi(t,"threshold",9)),this.setHoldTime(pi(t,"time",251)),this}onDragStart(){this.state=vi,0===this.holdTime&&(this.state=mi)}onDragEnd(){this.state=gi}onDrag(){this.state!==gi&&this.pointer.getDistance()>this.dragThreshold&&(this.state=gi)}preUpdate(t,i){this.isRunning&&this.enable&&(this.state===vi&&t-this.pointer.downTime>=this.holdTime&&(this.state=mi))}get isPressed(){return this.state===mi}setHoldTime(t){return this.holdTime=t,this}setDragThreshold(t){return this.dragThreshold=t,this}}const gi="IDLE",vi="BEGIN",mi="RECOGNIZED";var InstallPress=function(){var t=this.touchZone?this.touchZone:this.board.scene,i=new Press(t);return i.on("pressstart",OnPressStart,this).on("pressend",OnPressEnd,this),i},OnPressStart=function(t){var i=this.board,n=i.worldXYToTileXY(t.worldX,t.worldY),o=n.x,a=n.y;i.contains(o,a)&&(i.emit("tilepressstart",t,n),EmitChessEvent("gameobjectpressstart","board.pressstart",i,o,a,t))},OnPressEnd=function(t){var i=this.board,n=i.worldXYToTileXY(t.worldX,t.worldY),o=n.x,a=n.y;i.contains(o,a)&&(i.emit("tilepressend",t,n),EmitChessEvent("gameobjectpressend","board.pressend",i,o,a,t))};const yi=Phaser.Math.Distance.Between,xi=Phaser.Math.Angle.Between;var Ti={getDt:function(){return this.scene.sys.game.loop.delta},getVelocity:function(){var t=this.pointer.position,i=this.pointer.prevPosition;return yi(i.x,i.y,t.x,t.y)/(.001*this.getDt())},getVelocityX:function(){var t=this.pointer.position,i=this.pointer.prevPosition;return Math.abs(t.x-i.x)/(.001*this.getDt())},getVelocityY:function(){var t=this.pointer.position,i=this.pointer.prevPosition;return Math.abs(t.y-i.y)/(.001*this.getDt())},getVelocityAngle:function(){var t=this.pointer.position,i=this.pointer.prevPosition;return xi(i.x,i.y,t.x,t.y)}},wi={"up&down":0,"left&right":1,"4dir":2,"8dir":3},bi={};const Si=Phaser.Utils.Objects.GetValue,Ei=Phaser.Math.RadToDeg;class Swipe extends OnePointerTracer{constructor(t,i){super(t,i);var n=this,o={states:{IDLE:{enter:function(){n.x=0,n.y=0,n.worldX=0,n.worldY=0},exit:function(){var t=n.lastPointer;n.x=t.x,n.y=t.y,n.worldX=t.worldX,n.worldY=t.worldY}},BEGIN:{enter:function(){n.validDrag=!1}},RECOGNIZED:{enter:function(){n.start(),n.updateDirectionStates(),n.emit("swipe",n,n.gameObject,n.lastPointer)},exit:function(){n.stop(),n.clearDirectionStates()}}},init:function(){this.state=Mi},eventEmitter:!1};this.setRecongizedStateObject(new FSM(o)),this.clearDirectionStates()}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Si(t,"threshold",10)),this.setVelocityThreshold(Si(t,"velocityThreshold",1e3)),this.setDirectionMode(Si(t,"dir","8dir")),this}onDragStart(){this.state=Ci}onDragEnd(){this.state=Mi}onDrag(){this.state===Ci&&(this.validDrag||(this.validDrag=0===this.dragThreshold||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=Ai))}postUpdate(t,i){this.isRunning&&this.enable&&this.state===Ai&&(this.state=Mi)}get isSwiped(){return this.state===Ai}get dragVelocity(){var t;switch(this.dirMode){case 0:t=this.getVelocityY();break;case 1:t=this.getVelocityX();break;default:t=this.getVelocity()}return t}setDragThreshold(t){return this.dragThreshold=t,this}setVelocityThreshold(t){return this.velocityThreshold=t,this}setDirectionMode(t){return"string"==typeof t&&(t=wi[t]),this.dirMode=t,this}updateDirectionStates(){return function(t,i,n){switch(void 0===n?n={}:!0===n&&(n=bi),n.left=!1,n.right=!1,n.up=!1,n.down=!1,t=(t+360)%360,i){case 0:t<180?n.down=!0:n.up=!0;break;case 1:t>90&&t<=270?n.left=!0:n.right=!0;break;case 2:t>45&&t<=135?n.down=!0:t>135&&t<=225?n.left=!0:t>225&&t<=315?n.up=!0:n.right=!0;break;case 3:t>22.5&&t<=67.5?(n.down=!0,n.right=!0):t>67.5&&t<=112.5?n.down=!0:t>112.5&&t<=157.5?(n.down=!0,n.left=!0):t>157.5&&t<=202.5?n.left=!0:t>202.5&&t<=247.5?(n.left=!0,n.up=!0):t>247.5&&t<=292.5?n.up=!0:t>292.5&&t<=337.5?(n.up=!0,n.right=!0):n.right=!0}}(Ei(this.getVelocityAngle()),this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}Object.assign(Swipe.prototype,Ti);const Mi="IDLE",Ci="BEGIN",Ai="RECOGNIZED";var InstallSwipe=function(){var t=this.touchZone?this.touchZone:this.board.scene,i=new Swipe(t);return i.on("swipe",OnSwipe,this),i},OnSwipe=function(t){var i=this.board,n=i.worldXYToTileXY(t.worldX,t.worldY),o=n.x,a=n.y;i.contains(o,a)&&(t.direction=i.angleSnapToDirection(n,t.getVelocityAngle()),i.emit("tileswipe",t,n),EmitChessEvent("gameobjectswipe","board.swipe",i,o,a,t))};class Input{constructor(t,i){var n=GetValue$l(i,"enable",!0),o=GetValue$l(i,"useTouchZone",!0),a=t.scene;if(this.board=t,this.touchZone=void 0,this._enable=!0,this.pointer=null,this.tilePosition={x:void 0,y:void 0},this.prevTilePosition={x:void 0,y:void 0},o){var u=new TouchZone(a);u.on("pointerdown",OnPointerDown$1,this),u.on("pointerup",OnPointerUp$1,this),u.on("pointermove",OnPointerMove$1,this),this.touchZone=u}else a.input.on("pointerdown",OnPointerDown$1,this),a.input.on("pointerup",OnPointerUp$1,this),a.input.on("pointermove",OnPointerMove$1,this);this.tap=InstallTap.call(this),this.press=InstallPress.call(this),this.swipe=InstallSwipe.call(this),t.once("destroy",this.onBoardDestroy,this),this.setEnable(n)}destroy(t){if(this.tap.destroy(t),this.press.destroy(t),this.swipe.destroy(t),this.touchZone)this.touchZone.destroy(t),this.touchZone=void 0;else{var i=this.board.scene;i&&(i.input.off("pointerdown",OnPointerDown$1,this),i.input.off("pointerup",OnPointerUp$1,this),i.input.off("pointermove",OnPointerMove$1,this))}this.board=void 0}onBoardDestroy(t,i){this.destroy(i)}get enable(){return this._enable}set enable(t){this._enable!==t&&(t||(this.pointer=null),this._enable=t,this.touchZone&&(t?this.touchZone.setInteractive():this.touchZone.disableInteractive()),this.tap.setEnable(t),this.press.setEnable(t),this.swipe.setEnable(t))}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}}class Board extends Board$1{get touchZone(){return this.input?this.input.touchZone:null}getTouchZone(){return this.touchZone}}var Pi={setInteractive:function(t){if(this.input){var i=!1!==t;this.input.setEnable(i)}else this.input=new Input(this,t);return this}};Object.assign(Board.prototype,Pi);var IsInValidKey=function(t){return null==t||""===t||0===t.length},SetValue=function(t,i,n,o){if(void 0===o&&(o="."),"object"==typeof t){if(IsInValidKey(i)){if(null==n)return;"object"==typeof n&&(t=n)}else{"string"==typeof i&&(i=i.split(o));var a=i.pop(),u=function(t,i,n){var o=t;if(IsInValidKey(i));else{var a;"string"==typeof i&&(i=i.split("."));for(var u=0,d=i.length;u<d;u++){var f;null!=o[a=i[u]]&&"object"==typeof o[a]||(f=u===d-1?void 0===n?{}:n:{},o[a]=f),o=o[a]}}return o}(t,i);u[a]=n}return t}};ObjectFactory$1.register("board",(function(t){return new Board(this.scene,t)})),SetValue(window,"RexPlugins.Board.Board",Board),ObjectFactory$1.register("hexagonGrid",(function(t){return new HexagonGrid(t)})),ObjectFactory$1.register("quadGrid",(function(t){return new QuadGrid(t)}));var IsMiniBoardObject=function(t){return"rexMiniBoard"===t.type};const _i=Phaser.GameObjects.Polygon;class Shape extends _i{constructor(t,i,n,o,a,u,d){void 0===d&&(d=!0);var f,p=IsMiniBoardObject(t);p&&(t=(f=t).board);var b,S,M=t.scene;d?(b=0,S=0):(b=i,S=n);var C=t.getGridPoints(void 0,void 0,!0);ShiftToO(C),super(M,b,S,C,a,u),d?p?f.addChess(this,i,n,o):t.addChess(this,i,n,o,!0):GetChessData(this)}}var ShiftToO=function(t){for(var i,n=1/0,o=1/0,a=0,u=t.length;a<u;a++)i=t[a],n=Math.min(n,i.x),o=Math.min(o,i.y);if(0===n&&0===o)return t;for(a=0,u=t.length;a<u;a++)(i=t[a]).x-=n,i.y-=o;return t};ObjectFactory$1.register("shape",(function(t,i,n,o,a,u,d){var f=new Shape(t,i,n,o,a,u,d);return t.scene.add.existing(f),f})),SetValue(window,"RexPlugins.Board.Shape",Shape);class SceneUpdateTickTask extends TickTask{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}}var Ri={x:0,y:0,z:0},GetSneakTileZ=function(t,i,n,o){var a=t.chessData.board,u=o.toString();do{u+="."}while(a.contains(i,n,u));return u},Oi={},Li={},Clone=function(t,i){var n=Array.isArray(t);if(void 0===i?i=n?[]:{}:Clear(i),n){i.length=t.length;for(var o=0,a=t.length;o<a;o++)i[o]=t[o]}else for(var u in t)i[u]=t[u];return i},Shuffle=function(t){for(var i=t.length-1;i>0;i--){var n=Math.floor(Math.random()*(i+1)),o=t[i];t[i]=t[n],t[n]=o}return t},ki=[],Di={x:0,y:0},Ii=[],Fi={canMoveTo:function(t,i,n){var o=this.chessData.board;if(null==o)return!1;var a=this.chessData.tileXYZ,u=a.x,d=a.y,f=a.z;if(t===u&&i===d)return!0;if(!o.contains(t,i))return!1;if(this.blockerTest&&o.hasBlocker(t,i))return!1;if(this.edgeBlockerTest,this.moveableTestCallback){if(void 0===n&&(n=this.chessData.getTileDirection(t,i)),Ri.x=t,Ri.y=i,Ri.z=f,this.moveableTestScope)var p=this.moveableTestCallback.call(this.moveableTestScope,a,Ri,n,o);else p=this.moveableTestCallback(a,Ri,n,o);if(!p)return!1}if(this.occupiedTest&&!this.sneakMode){var b=o.tileXYZToChess(t,i,f);if(b&&(this.emit("occupy",b,this.parent,this),o.contains(t,i,f)))return!1}return!0},moveTo:function(t,i,n){var o=this.chessData.board;if(null===o)return this.lastMoveResult=!1,this;if(null!=t&&"number"!=typeof t){var a=t;t=GetValue$l(a,"x",void 0),i=GetValue$l(a,"y",void 0),n=GetValue$l(a,"direction",void 0)}var u=this.chessData.tileXYZ;if(void 0!==n&&null==t||null==i){var d=o.getNeighborTileXY(u,n,!0);null!==d?(t=d.x,i=d.y):(t=null,i=null)}if(null==t||null==i)return this.lastMoveResult=!1,this;if(void 0===n&&(Oi.x=t,Oi.y=i,n=o.getNeighborTileDirection(u,Oi)),!this.canMoveTo(t,i,n))return this.lastMoveResult=!1,this;if(this.destinationTileX=t,this.destinationTileY=i,this.destinationDirection=n,o.wrapMode&&null!==n)if(o.grid.getNeighborTileXY(u.x,u.y,n,Li),Li.x===t&&Li.y===i){var f=o.tileXYToWorldXY(t,i,!0);this.moveAlongLine(void 0,void 0,f.x,f.y)}else{var p=(f=o.tileXYToWorldXY(Li.x,Li.y,!0)).x,b=f.y,S=(f=o.tileXYToWorldXY(u.x,u.y,!0)).x,M=f.y,C=(S+p)/2,P=(M+b)/2;this.moveAlongLine(void 0,void 0,C,P);var R=o.getOppositeDirection(t,i,n);o.grid.getNeighborTileXY(t,i,R,Li),p=(f=o.tileXYToWorldXY(Li.x,Li.y,!0)).x,b=f.y,S=(p+(C=(f=o.tileXYToWorldXY(t,i,!0)).x))/2,M=(b+(P=f.y))/2,this.addMoveLine(S,M,C,P)}else{f=o.tileXYToWorldXY(t,i,!0);this.moveAlongLine(void 0,void 0,f.x,f.y)}var O=u.z;return this.sneakMode&&(void 0===this.tileZSave?o.contains(t,i,O)&&(this.tileZSave=O,O=GetSneakTileZ(this,t,i,this.tileZSave)):o.contains(t,i,this.tileZSave)?O=GetSneakTileZ(this,t,i,this.tileZSave):(O=this.tileZSave,this.tileZSave=void 0)),o.moveChess(this.parent,t,i,O,!1),this.isRunning=!0,this.lastMoveResult=!0,this},moveToward:function(t){return this.moveTo(void 0,void 0,t),this},moveToRandomNeighbor:function(){var t=this.chessData.board;if(null===t)return this.lastMoveResult=!1,this;var i=t.grid.allDirections;ki.length!==i.length&&Clone(i,ki),Shuffle(ki);for(var n=0,o=ki.length;n<o;n++)if(this.moveToward(ki[n]),this.lastMoveResult)return this;return this},moveAway:function(t,i,n){var o=this.chessData.board;if(null===o)return this.lastMoveResult=!1,this;if("number"!=typeof t){var a=t;t=a.x,i=a.y}Di.x=t,Di.y=i,void 0===n&&(n=!0);var u,d,f=this.chessData.tileXYZ,p=o.grid.allDirections;if(Ii.length!==p.length+1){Ii.length=0;for(var b=0,S=p.length;b<S;b++)Ii.push({direction:b});Ii.push({direction:null})}for(b=0,S=Ii.length;b<S;b++){if(null===(d=(u=Ii[b]).direction))u.x=f.x,u.y=f.y;else if(null===o.getNeighborTileXY(f,d,u)){u.x=null,u.y=null,u.distance=null;continue}u.distance=o.getDistance(u,Di,!0)}var M=this.destinationDirection;Ii.sort((function(t,i){return null===t.distance?1:null===i.distance?-1:t.distance>i.distance?n?-1:1:t.distance<i.distance?n?1:-1:t.direction===M?1:i.direction===M?-1:null===t.direction?1:null===i.direction?-1:0}));for(b=0,S=Ii.length;b<S;b++){if(null===(u=Ii[b]).distance)return this;if(this.moveTo(u),this.lastMoveResult)return this}return this},moveCloser:function(t,i){return this.moveAway(t,i,!1),this}};const Bi=Phaser.Utils.Objects.GetValue,Ni=Phaser.Math.Distance.Between,Yi=Phaser.Math.Linear,Xi=Phaser.Math.Angle.Between;class MoveTo$2 extends SceneUpdateTickTask{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.isRunning=Bi(t,"isRunning",!1),this.setEnable(Bi(t,"enable",!0)),this.timeScale=Bi(t,"timeScale",1),this.setSpeed(Bi(t,"speed",400)),this.setRotateToTarget(Bi(t,"rotateToTarget",!1)),this.targetX=Bi(t,"targetX",0),this.targetY=Bi(t,"targetY",0),this}toJSON(){return{isRunning:this.isRunning,enable:this.enable,timeScale:this.timeScale,speed:this.speed,rotateToTarget:this.rotateToTarget,targetX:this.targetX,targetY:this.targetY,tickingMode:this.tickingMode}}setEnable(t){return null==t&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}setRotateToTarget(t){return this.rotateToTarget=t,this}moveTo(t,i){if("number"!=typeof t){var n=t;t=n.x,i=n.y}return this.targetX=t,this.targetY=i,super.start(),this}moveFrom(t,i){if("number"!=typeof t){var n=t;t=n.x,i=n.y}var o=this.parent,a=o.x,u=o.y;return o.setPosition(t,i),this.moveTo(a,u),this}moveToward(t,i){var n=this.parent,o=n.x+Math.cos(t)*i,a=n.y+Math.sin(t)*i;return this.moveTo(o,a),this}update(t,i){if(!this.isRunning||!this.enable)return this;var n=this.parent;if(!n.active)return this;var o=n.x,a=n.y,u=this.targetX,d=this.targetY;if(o===u&&a===d)return this.complete(),this;if(0===this.speed||0===i||0===this.timeScale)return this;var f,p,b=i*this.timeScale/1e3,S=this.speed*b,M=Ni(o,a,u,d);if(S<M){var C=S/M;f=Yi(o,u,C),p=Yi(a,d,C)}else f=u,p=d;return n.setPosition(f,p),this.rotateToTarget&&(n.rotation=Xi(o,a,f,p)),this}}class MoveTo$1 extends SceneUpdateTickTask{constructor(t,i){super(t,i),this.chessData=GetChessData(t),this.scene=t.scene,this.moveToTask=new MoveTo$2(t,{tickingMode:0}),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.isRunning=GetValue$l(t,"isRunning",!1),this.setEnable(GetValue$l(t,"enable",!0)),this.timeScale=GetValue$l(t,"timeScale",1),this.setSpeed(GetValue$l(t,"speed",400)),this.setRotateToTarget(GetValue$l(t,"rotateToTarget",!1)),this.setOccupiedTest(GetValue$l(t,"occupiedTest",!1)),this.setBlockerTest(GetValue$l(t,"blockerTest",!1)),this.setEdgeBlockerTest(GetValue$l(t,"edgeBlockerTest",!1)),this.setMoveableTestCallback(GetValue$l(t,"moveableTest",void 0),GetValue$l(t,"moveableTestScope",void 0)),this.setSneakEnable(GetValue$l(t,"sneak",!1)),this.destinationTileX=GetValue$l(t,"destinationTileX",null),this.destinationTileY=GetValue$l(t,"destinationTileY",null),this.destinationDirection=GetValue$l(t,"destinationDirection",null),this.lastMoveResult=GetValue$l(t,"lastMoveResult",void 0),this}toJSON(){return{isRunning:this.isRunning,enable:this.enable,timeScale:this.timeScale,speed:this.speed,occupiedTest:this.occupiedTest,blockerTest:this.blockerTest,edgeBlockerTest:this.edgeBlockerTest,moveableTest:this.moveableTestCallback,moveableTestScope:this.moveableTestScope,rotateToTarget:this.rotateToTarget,destinationTileX:this.destinationTileX,destinationTileY:this.destinationTileY,destinationDirection:this.destinationDirection,lastMoveResult:this.lastMoveResult,tickingMode:this.tickingMode}}shutdown(t){this.moveToTask.shutdown(t),super.shutdown(t)}set enable(t){this.moveToTask.setEnable(t)}get enable(){return this.moveToTask.enable}setEnable(t){return null==t&&(t=!0),this.enable=t,this}get timeScale(){return this.moveToTask.timeScale}set timeScale(t){this.moveToTask.timeScale=t}set speed(t){this.moveToTask.setSpeed(t)}get speed(){return this.moveToTask.speed}setSpeed(t){return this.speed=t,this}set rotateToTarget(t){this.moveToTask.setRotateToTarget(t)}get rotateToTarget(){return this.moveToTask.rotateToTarget}setRotateToTarget(t){return void 0===t&&(t=!0),this.rotateToTarget=t,this}setOccupiedTest(t){return void 0===t&&(t=!0),this.occupiedTest=t,this}setBlockerTest(t){return void 0===t&&(t=!0),this.blockerTest=t,this}setEdgeBlockerTest(t){return void 0===t&&(t=!0),this.edgeBlockerTest=t,this}setMoveableTestCallback(t,i){return this.moveableTestCallback=t,this.moveableTestScope=i,this}setSneakEnable(t){return void 0===t&&(t=!0),this.sneakMode=t,this.tileZSave=void 0,this}moveAlongLine(t,i,n,o){return void 0!==t&&(this.parent.x=t),void 0!==i&&(this.parent.y=i),this.moveToTask.moveTo(n,o),this}addMoveLine(t,i,n,o){return this.moveToTask.hasOwnProperty("nextlines")||(this.moveToTask.nextlines=[]),this.moveToTask.nextlines.push([t,i,n,o]),this}moveNextLine(){var t=this.moveToTask.nextlines;return!!t&&(0!==t.length&&(this.moveAlongLine.apply(this,t[0]),t.length=0,!0))}update(t,i){if(!this.isRunning||!this.enable)return this;var n=this.moveToTask;return n.update(t,i),n.isRunning||this.moveNextLine()||this.complete(),this}}Object.assign(MoveTo$1.prototype,Fi);var Gi={x:0,y:0,z:0},Ui={x:0,y:0,z:0},Vi={},zi={},Wi=[];class MoveTo extends SceneUpdateTickTask{constructor(t,i){super(t,i),this.moveToTask=new MoveTo$2(t,{tickingMode:0}),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.isRunning=GetValue$l(t,"isRunning",!1),this.setEnable(GetValue$l(t,"enable",!0)),this.timeScale=GetValue$l(t,"timeScale",1),this.setSpeed(GetValue$l(t,"speed",400)),this.destinationTileX=GetValue$l(t,"destinationTileX",null),this.destinationTileY=GetValue$l(t,"destinationTileY",null),this.destinationDirection=GetValue$l(t,"destinationDirection",null),this.lastMoveResult=GetValue$l(t,"lastMoveResult",void 0),this}toJSON(){return{isRunning:this.isRunning,enable:this.enable,timeScale:this.timeScale,speed:this.speed,moveableTest:this.moveableTestCallback,moveableTestScope:this.moveableTestScope,destinationTileX:this.destinationTileX,destinationTileY:this.destinationTileY,destinationDirection:this.destinationDirection,lastMoveResult:this.lastMoveResult,tickingMode:this.tickingMode}}shutdown(t){this.isShutdown||(this.moveToTask.shutdown(t),super.shutdown(t))}set enable(t){this.moveToTask.setEnable(t)}get enable(){return this.moveToTask.enable}setEnable(t){return null==t&&(t=!0),this.enable=t,this}get timeScale(){return this.moveToTask.timeScale}set timeScale(t){this.moveToTask.timeScale=t}set speed(t){this.moveToTask.setSpeed(t)}get speed(){return this.moveToTask.speed}setSpeed(t){return this.speed=t,this}moveAlongLine(t,i,n,o){return void 0!==t&&(this.parent.x=t),void 0!==i&&(this.parent.y=i),this.moveToTask.moveTo(n,o),this}update(t,i){if(!this.isRunning||!this.enable)return this;var n=this.moveToTask;return n.update(t,i),n.isRunning||this.complete(),this}}var Hi={canMoveTo:function(t,i,n){var o=this.parent,a=o.mainBoard;if(null==a)return!1;if(Gi.x=o.tileX,Gi.y=o.tileY,Ui.x=t,Ui.y=i,Ui.x===Gi.x&&Ui.y===Gi.y)return!0;if(o.pullOutFromMainBoard(),!o.canPutOnMainBoard(a,Ui.x,Ui.y))return o.putBack(),!1;if(this.moveableTestCallback){if(void 0===n&&(n=a.getNeighborTileDirection(Gi,Ui)),this.moveableTestScope)var u=this.moveableTestCallback.call(this.moveableTestScope,Gi,Ui,n,a);else u=this.moveableTestCallback(Gi,Ui,n,a);if(!u)return o.putBack(),!1}return o.putBack(),!0},moveTo:function(t,i,n){var o=this.parent,a=o.mainBoard;if(null==a)return this.lastMoveResult=!1,this;if(null!=t&&"number"!=typeof t){var u=t;t=GetValue$l(u,"x",void 0),i=GetValue$l(u,"y",void 0),n=GetValue$l(u,"direction",void 0)}(Vi.x=o.tileX,Vi.y=o.tileY,void 0!==n&&null==t||null==i)&&(null!==(d=a.getNeighborTileXY(Vi,n,!0))?(t=d.x,i=d.y):(t=null,i=null));if(null==t||null==i)return this.lastMoveResult=!1,this;if(void 0===n&&(zi.x=t,zi.y=i,n=board.getNeighborTileDirection(Vi,zi)),!this.canMoveTo(t,i,n))return this.lastMoveResult=!1,this;this.destinationTileX=t,this.destinationTileY=i,this.destinationDirection=n;var d=a.tileXYToWorldXY(t,i,!0);return this.moveToTask.moveTo(d.x,d.y),o.putOnMainBoard(a,t,i,!1),this.isRunning=!0,this.lastMoveResult=!0,this},moveToward:function(t){return this.moveTo(void 0,void 0,t),this},moveToRandomNeighbor:function(){var t=this.parent.mainBoard;if(null==t)return this.lastMoveResult=!1,this;var i=t.grid.allDirections;Wi.length!==i.length&&Clone(i,Wi),Shuffle(Wi);for(var n=0,o=Wi.length;n<o;n++)if(this.moveToward(Wi[n]),this.lastMoveResult)return this;return this}};Object.assign(MoveTo.prototype,Hi),ObjectFactory$1.register("moveTo",(function(t,i){return new(IsMiniBoardObject(t)?MoveTo:MoveTo$1)(t,i)})),SetValue(window,"RexPlugins.Board.MoveTo",MoveTo$1),SetValue(window,"RexPlugins.Board.MiniBoardMoveTo",MoveTo);var ji,qi={tileXY:[],direction:void 0,pattern:void 0};class Queue{constructor(){this.data=[],this.visited={}}push(t,i){if(IsArray(t)){for(var n=t,o=0,a=n.length;o<a;o++)this.push(n[o]);return this}if(IsPlainObject(t)){var u=t;t=u.x,i=u.y}var d=`${t},${i}`;return this.visited.hasOwnProperty(d)||(this.data.push({x:t,y:i}),this.visited[d]=!0),this}pop(){return this.data.pop()}get length(){return this.data.length}clear(){return Clear(this.data),Clear(this.visited),this}}var Zi={match:function(t,i,n,o){for(var a,u,d,f=this.board,p=f.grid.halfDirections,b=this.dirMask,S=f.width,M=f.height,C=0,P=p.length;C<P;C++)if(!1!==b[a=p[C]])for(var R=0;R<M;R++){for(var O=0;O<S;O++)if(!1!==(u=this.matchAtDir(t,O,R,a))){if(i&&(d=n?i.call(n,u,f):i(u,f)),o)return u;if(d)break}if(d)break}return this},matchAtDir:function(t,i,n,o){var a,u="number"==typeof t;u?(a=t,t=null):a=t.length;var d,f,p=this.wildcard,b=this.board,S=qi.tileXY;S.length=0;for(var M=0;M<a;M++){if(void 0===f)f={x:i,y:n};else if(null===(f=b.getNeighborTileXY(f,o,f)))return!1;if(null==(d=this.getSymbol(f.x,f.y)))return!1;if(d!==p)if(u){if(null===t)t=d;else if(t!==d)return!1}else if(t[M]!==d)return!1;S.push({x:f.x,y:f.y})}return qi.direction=o,qi.pattern=t,qi},group:function(t,i,n){void 0===n&&(n=[]);var o,a,u=this.board,d=this.wildcard,f=this.getSymbol(t,i);if(null==f||f===d)return n;for(void 0===ji&&(ji=new Queue),ji.push(t,i);ji.length;)o=ji.pop(),(a=this.getSymbol(o.x,o.y))!==f&&a!==d||(n.push(o),ji.push(u.getNeighborTileXY(o)));return ji.clear(),n}};class Match{constructor(t){this.symbols=[],this.dirMask={},this.resetFromJSON(t),this.boot()}resetFromJSON(t){this.setBoard(GetValue$l(t,"board",void 0)),this.setWildcard(GetValue$l(t,"wildcard",void 0));var i=GetValue$l(t,"dirMask",void 0);return void 0!==i&&this.setDirMask(i),this}boot(){}shutdown(){return this.board=void 0,this.symbols=void 0,this.dirMask=void 0,this}destroy(){return this.shutdown(),this}setBoard(t){return this.board=t,t&&this.clearSymbols(),this}setDirMask(t,i){if(IsPlainObject(t)){var n=t;for(t in n)this.dirMask[t]=n[t]}else this.dirMask[t]=i;return this}setDirectionMode(t){return this.board.grid.setDirectionMode(t),this}clearSymbols(){return this.refreshSymbols(null),this}setSymbol(t,i,n){return this.board.contains(t,i)?(this.symbols[this.tileXYToKey(t,i)]=n,this):this}getSymbol(t,i){return this.symbols[this.tileXYToKey(t,i)]}forEach(t,i){for(var n,o,a=this.board,u=0,d=this.symbols.length;u<d&&(o=this.symbols[u],n=this.keyToTileXY(u),!(i?t.call(i,n,o,a):t(n,o,a)));u++);return this}refreshSymbols(t,i){var n,o,a,u=this.board,d=u.width,f=u.height;if(this.symbols.length=d*f,(a=t)&&"function"==typeof a)for(var p=0,b=this.symbols.length;p<b;p++)o=this.keyToTileXY(p,!0),n=i?t.call(i,o,u):t(o,u),this.symbols[p]=n;else{n=t;for(p=0,b=this.symbols.length;p<b;p++)this.symbols[p]=n}return this}setWildcard(t){return this.wildcard=t,this}tileXYToKey(t,i){return t+i*this.board.width}keyToTileXY(t,i){void 0===i?i={}:!0===i&&(i=Ki);var n=this.board.width;return i.x=t%n,i.y=Math.floor(t/n),i}anyMatch(t){return this.match(t,null,null,!0)}}var Ki={x:0,y:0};Object.assign(Match.prototype,Zi),ObjectFactory$1.register("match",(function(t){return new Match(t)})),SetValue(window,"RexPlugins.Board.Match",Match);class Node{constructor(){this.preNodes=[],this.manager=void 0}reset(t){this.manager=t,this.sn=void 0,this.key=void 0,this.x=void 0,this.y=void 0,this.isTileXYZ=!0,this._px=void 0,this._py=void 0,this.cost=void 0,this.f=0,this.g=0,this.h=0,this.closerH=0,this.visited=!1,this.closed=!1,this.preNodes.length=0}destroy(){this.preNodes.length=0,this.manager=void 0}heuristic(t,i,n){if(null===i)return 0;var o,a=this.board.getDistance(t,this,!0)*this.pathFinder.weight;if(1===i&&void 0!==n){var u=t.angleTo(n)-this.angleTo(n);o=a+Math.abs(u)}else o=2===i?a+Math.random():a;return o}getNeighborNodes(){var t=this.board.getNeighborTileXY(this);this.pathFinder.shuffleNeighbors&&Shuffle(t);for(var i,n=[],o=0,a=t.length;o<a;o++)i=this.manager.getNode(t[o],!0),n.push(i);return n}getCost(t){return this.pathFinder.cacheCost?void 0===this.cost&&(this.cost=this.pathFinder.getCost(this,t)):this.cost=this.pathFinder.getCost(this,t),this.cost}angleTo(t){return Between$1(this.worldX,this.wroldY,t.worldX,t.wroldY)}get pathFinder(){return this.manager.pathFinder}get board(){return this.manager.pathFinder.board}get worldX(){return void 0===this._px&&(this._px=this.board.tileXYToWroldX(this.x,this.y)),this._px}get wroldY(){return void 0===this._py&&(this._py=this.board.tileXYToWroldY(this.x,this.y)),this._py}get pathCost(){return this.g}}var Ji=new class Stack{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(t){return this.items.push(t),this}pushMultiple(t){return this.items.push.apply(this.items,t),t.length=0,this}clear(){return this.items.length=0,this}};class NodeCache{constructor(t){this.sn=0,this.pool=Ji,this.nodes={},this.pathFinder=t,this.closestNode=null}destroy(){return this.freeAllNodes(),this.pathFinder=null,this.pool=void 0,this}getNode(t,i,n){var o;switch(typeof t){case"number":o=TileXYToKey(t,i);break;case"string":o=t,n=i;break;default:var a=t;n=i,t=a.x,i=a.y,o=TileXYToKey(t,i)}if(void 0===n&&(n=!1),this.sn++,!this.nodes.hasOwnProperty(o)){if(!n)return null;var u=this.pool.pop();null===u&&(u=new Node),u.reset(this),u.sn=this.sn,u.key=o,u.x=t,u.y=i,this.nodes[o]=u}return this.nodes[o]}freeAllNodes(){this.closestNode=null;var t,i=this.nodes,n=this.pool;for(var o in i)(t=i[o]).destroy(),n.push(t),delete i[o];return this.sn=0,this}getAllNodes(){return this.nodes}}var Qi={AREA_MODE:16,PATH_MODE:0,random:0,diagonal:1,straight:2,line:3,"A*":10,"A*-random":11,"A*-line":12,BLOCKER:null,INFINITY:void 0};const $i=Qi.PATH_MODE,tn=Qi["A*"],en=Qi["A*-line"],nn=Qi["A*-random"],sn=Qi.BLOCKER,rn=Qi.INFINITY;var an=new class BinaryHeap{constructor(t){this.content=[],this.scoreFunction=t}clear(){this.content.length=0}push(t){this.content.push(t),this.sinkDown(this.content.length-1)}pop(){var t=this.content[0],i=this.content.pop();return this.content.length>0&&(this.content[0]=i,this.bubbleUp(0)),t}remove(t){var i=this.content.indexOf(t),n=this.content.pop();i!==this.content.length-1&&(this.content[i]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(i):this.bubbleUp(i))}size(){return this.content.length}rescoreElement(t){this.sinkDown(this.content.indexOf(t))}sinkDown(t){for(var i=this.content[t];t>0;){var n=(t+1>>1)-1,o=this.content[n];if(!(this.scoreFunction(i)<this.scoreFunction(o)))break;this.content[n]=i,this.content[t]=o,t=n}}bubbleUp(t){for(var i=this.content.length,n=this.content[t],o=this.scoreFunction(n);;){var a,u=t+1<<1,d=u-1,f=null;if(d<i){var p=this.content[d];(a=this.scoreFunction(p))<o&&(f=d)}if(u<i){var b=this.content[u];this.scoreFunction(b)<(null===f?o:a)&&(f=u)}if(null===f)break;this.content[t]=this.content[f],this.content[f]=n,t=f}}}((function(t){return t.f}));const hn=Qi.BLOCKER;const ln=Qi.AREA_MODE,un=Qi.INFINITY;const cn=Qi.random,dn=Qi.diagonal,fn=Qi.straight,pn=Qi.line,gn=Qi["A*"],vn=Qi["A*-line"],mn=Qi["A*-random"];const yn=Qi.PATH_MODE,xn=Qi.INFINITY;var Tn={aStarSearch:function(t,i,n,o){void 0===this.nodeManager&&(this.nodeManager=new NodeCache(this));var a=this.nodeManager;a.freeAllNodes();const u=o===$i,d=this.pathMode===tn||this.pathMode===en||this.pathMode===nn,f=u&&!d,p=u&&d?this.pathMode==tn?0:this.pathMode==en?1:this.pathMode==nn?2:null:null;var b,S=null!==i?a.getNode(i.x,i.y,!0):null,M=a.getNode(t.x,t.y,!0);for(M.h=M.heuristic(S,p),u&&((b=M).closerH=b.h||b.heuristic(S,0)),an.push(M);an.size()>0;){var C=an.pop();if(u&&C===S){b=S;break}C.closed=!0;for(var P,R,O=C.getNeighborNodes(),B=0,N=O.length;B<N;++B)if(R=(P=O[B]).getCost(C),!P.closed&&R!==sn){var Y=C.g+R,X=P.visited;n!=rn&&Y>n||(!X||Y<P.g?(P.visited=!0,P.preNodes.length=0,P.preNodes.push(C),P.h=P.h||P.heuristic(S,p,M),P.g=Y,P.f=P.g+P.h,u&&(P.closerH=P.h||P.heuristic(S,0),(P.closerH<b.closerH||P.closerH===b.closerH&&P.g<b.g)&&(b=P)),X?an.rescoreElement(P):an.push(P)):f&&Y==P.g&&P.preNodes.push(C))}}return a.closestNode=u?b:null,an.clear(),this},getCost:function(t,i){return this.occupiedTest&&this.board.contains(t.x,t.y,this.chessData.tileXYZ.z)||this.blockerTest&&this.board.hasBlocker(t.x,t.y)?hn:(this.edgeBlockerTest,"number"==typeof this.costCallback?this.costCallback:(void 0===(n=this.costCallbackScope?this.costCallback.call(this.costCallbackScope,t,i,this):this.costCallback(t,i,this))&&(n=hn),n));var n},findArea:function(t,i){if(void 0===i&&(i=[]),null===this.board)return i;if(t!==un&&t<=0)return i;var n=this.chessData.tileXYZ,o=n.x,a=n.y;this.aStarSearch(n,null,t,ln);var u,d=this.nodeManager.getAllNodes(),f=[];for(var p in d)(u=d[p]).x===o&&u.y===a||u.closed&&f.push(u);f.sort((function(t,i){var n=t.sn,o=i.sn;return n>o?1:n<o?-1:0}));for(var b=0,S=f.length;b<S;b++)u=f[b],i.push({x:u.x,y:u.y,cost:u.g});return i},getPath:function(t,i){if(void 0===i&&(i=[]),void 0===this.board)return i;var n=this.nodeManager;if(void 0===n)return i;var o=n.getNode(this.chessData.tileXYZ,!1),a=n.getNode(t,!1);if(null===o||null===a)return i;for(var u,d=function(t,i,n){for(var o,a,u,d,f,p=t.board,b=i,S=[];b.preNodes.length>0;)switch(S.push(b),f=b.preNodes.length,n){case gn:case vn:case mn:b=d=b.preNodes[0];break;case cn:b=d=1===f?b.preNodes[0]:b.preNodes[Between(0,f-1)];break;case dn:for(var M=0;M<f;M++)if(d=b.preNodes[M],(a=p.getNeighborTileDirection(b,d))!==o){o=a;break}b=d;break;case fn:for(M=0;M<f&&(d=b.preNodes[M],(a=p.getNeighborTileDirection(b,d))!==o);M++);o=a,b=d;break;case pn:if(void 0===u&&(u=i.angleTo(t)),1===f)b=d=b.preNodes[0],u=i.angleTo(b);else{d=b.preNodes[0];var C,P=Math.abs(i.angleTo(d)-u);for(M=1;M<f;M++)C=b.preNodes[M],Math.abs(i.angleTo(C)-u)<P&&(d=C);b=d}}return S.reverse()}(o,a,this.pathMode),f=0,p=d.length;f<p;f++)u=d[f],i.push({x:u.x,y:u.y,cost:u.g});return i},findPath:function(t,i,n,o){if(void 0===n&&(n=!0),void 0===o&&(o=[]),null===this.board)return o;if(i!==xn&&i<=0)return o;var a=this.chessData.tileXYZ;this.aStarSearch(a,t,i,yn);var u=this.nodeManager,d=n?u.closestNode:u.getNode(t);return null===d?o:this.getPath(d,o)},tileXYToCost:function(t,i,n){if(void 0===this.nodeManager)return null;var o=this.nodeManager.getNode(t,i);return null===o?null:(void 0===n&&(n=!0),n?o.g:o.cost)}};const wn=Qi.BLOCKER,bn=Qi.INFINITY;class PathFinder extends ComponentBase{constructor(t,i){IsPlainObject(t)&&(i=t,t=void 0),super(t,{eventEmitter:!1}),this.setChess(t),this.nodeManager=void 0,this.resetFromJSON(i)}resetFromJSON(t){var i=GetValue$l(t,"costCallback",void 0),n=GetValue$l(t,"costCallbackScope",void 0);return void 0===i&&(i=GetValue$l(t,"cost",1)),this.setOccupiedTest(GetValue$l(t,"occupiedTest",!1)),this.setBlockerTest(GetValue$l(t,"blockerTest",!1)),this.setEdgeBlockerTest(GetValue$l(t,"edgeBlockerTest",!1)),this.setCostFunction(i,n),this.setPathMode(GetValue$l(t,"pathMode",0)),this.setCacheCostMode(GetValue$l(t,"cacheCost",!0)),this.setWeight(GetValue$l(t,"weight",10)),this.setShuffleNeighborsMode(GetValue$l(t,"shuffleNeighbors",!1)),this}shutdown(t){this.isShutdown||(void 0!==this.nodeManager&&this.nodeManager.destroy(),this.chessData=void 0,super.shutdown(t))}get gameObject(){return this.parent}setChess(t){return t?(this.chessData=GetChessData(t),this.parent!==t&&(this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.parent=t,this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this))):(this.parent=void 0,this.chessData=void 0),this}setCostFunction(t,i){return this.costCallback=t,this.costCallbackScope=i,this}setPathMode(t){return"string"==typeof t&&(t=Qi[t]),this.pathMode=t,this}setCacheCostMode(t){return void 0===t&&(t=!0),this.cacheCost=t,this}setOccupiedTest(t){return void 0===t&&(t=!0),this.occupiedTest=t,this}setBlockerTest(t){return void 0===t&&(t=!0),this.blockerTest=t,this}setEdgeBlockerTest(t){return void 0===t&&(t=!0),this.edgeBlockerTest=t,this}setWeight(t){return this.weight=t,this}setShuffleNeighborsMode(t){return void 0===t&&(t=!0),this.shuffleNeighbors=t,this}get BLOCKER(){return wn}get INFINITY(){return bn}get board(){return this.chessData.board}}Object.assign(PathFinder.prototype,Tn),ObjectFactory$1.register("pathFinder",(function(t,i){return new PathFinder(t,i)})),SetValue(window,"RexPlugins.Board.PathFinder",PathFinder);var Sn=null,En=void 0;const Mn=Sn,Cn=En;const An=En;var drawLine=function(t,i,n,o,a,u){t&&void 0!==i&&t.lineStyle(1,i,1).lineBetween(n,o,a,u)},Pn=[],_n=[],Rn=[],On={preTest:function(t,i){if(this.occupiedTest||this.blockerTest||this.edgeBlockerTest)for(var n,o=this.chessData.tileXYZ.z,a=1,u=t.length;a<u;a++){if(n=t[a],this.occupiedTest&&this.board.contains(n.x,n.y,o))return!1;if(this.blockerTest&&this.board.hasBlocker(n.x,n.y))return!1;this.edgeBlockerTest}return!this.preTestCallback||(this.preTestCallbackScope?this.preTestCallback.call(this.preTestCallbackScope,t,i,this):this.preTestCallback(t,i,this))},getCost:function(t,i){return"number"==typeof this.costCallback?this.costCallback:this.costCallbackScope?this.costCallback.call(this.costCallbackScope,t,this,i):this.costCallback(t,this,i)},isInCone:function(t){if(void 0===this.cone)return!0;var i=this.board,n=this.chessData.tileXYZ;return 0===this.coneMode?i.isDirectionInCone(n,t,this.face,this.cone):i.isAngleInCone(n,t,this.faceAngle,this.coneRad)},isPathVisible:function(t,i){if(!1===this.preTest(t,i))return!1;if(void 0===this.costCallback)return!0;for(var n,o,a=this.chessData.tileXYZ,u=!1,d=1,f=t.length;d<f;d++)if(n=t[d],!AreTileXYEqual(a,n)){if(u)return!1;if((o=this.getCost(n,t))!==Mn){if(i!==Cn&&(i-=o)<0)return!1}else u=!0}return!0},isInLOS:function(t,i,n){if(i!==An&&i<=0)return!1;var o=this.board,a=o.chessToTileXYZ(t);if(!this.isInCone(a))return!1;void 0===n&&(n=this.chessData.tileXYZ),this.debugLog&&console.log("Visible test from ("+n.x+","+n.y+") to ("+a.x+","+a.y+")");var u,d,f,p=o.tileXYToWorldXY(n.x,n.y,!0),b=p.x,S=p.y,M=(p=o.tileXYToWorldXY(a.x,a.y,!0)).x,C=p.y,P=Between$1(b,S,M,C);P+=Math.PI/2;var R=b+(u=.001*Math.cos(P)),O=S+(d=.001*Math.sin(P)),B=M+u,N=C+d;if(o.lineToTileXYArray(R,O,B,N,Pn),this.debugLog&&console.log("Line 0: "+JSON.stringify(Pn)),f=this.isPathVisible(Pn,i))return Pn.length=0,drawLine(this.debugGraphics,this.debugVisibleLineColor,b,S,M,C),!0;P+=Math.PI;R=b+(u=.001*Math.cos(P)),O=S+(d=.001*Math.sin(P)),B=M+u,N=C+d;return o.lineToTileXYArray(R,O,B,N,_n),this.debugLog&&console.log("Line 1: "+JSON.stringify(_n)),function(t,i){if(t.length!==i.length)return!1;for(var n=0,o=t.length;n<o;n++)if(!AreTileXYEqual(t[n],i[n]))return!1;return!0}(Pn,_n)||(f=this.isPathVisible(_n,i)),Pn.length=0,_n.length=0,drawLine(this.debugGraphics,f?this.debugVisibleLineColor:this.debugInvisibleLineColor,b,S,M,C),f},LOS:function(t,i,n,o){if(IsArray(t)){IsPlainObject(i)?(o=n,n=i,i=void 0):IsArray(i)&&(o=i,i=void 0,n=void 0),IsArray(n)&&(o=n,n=void 0),void 0===o&&(o=[]);for(var a=0,u=t.length;a<u;a++)d=t[a],this.isInLOS(d,i,n)&&o.push(d);return o}var d=t;return this.isInLOS(d,i,n)},findFOV:function(t,i,n){IsPlainObject(t)?(n=i,i=t,t=void 0):IsArray(t)&&(n=t,i=void 0,t=void 0),IsArray(i)&&(n=i,i=void 0),void 0===n&&(n=[]);var o,a,u=this.board,d=this.chessData.tileXYZ,f=1;do{o=!1,u.ringToTileXYArray(d,f,Rn);for(var p=0,b=Rn.length;p<b;p++)a=Rn[p],this.isInLOS(a,t,i)&&(o=!0,n.push(a));f++,Rn.length=0}while(o);return n}};const Ln=Sn,kn=En;class FieldOfView extends ComponentBase{constructor(t,i){super(t,{eventEmitter:!1}),this.chessData=GetChessData(t),this.resetFromJSON(i)}resetFromJSON(t){var i=GetValue$l(t,"occupiedTest",!1),n=GetValue$l(t,"blockerTest",!1),o=GetValue$l(t,"edgeBlockerTest",!1),a=GetValue$l(t,"preTestCallback",void 0),u=GetValue$l(t,"preTestCallbackScope",void 0),d=GetValue$l(t,"costCallback",void 0),f=GetValue$l(t,"costCallbackScope",void 0);return void 0===d&&(d=GetValue$l(t,"cost",void 0)),this.setFace(GetValue$l(t,"face",0)),this.setConeMode(GetValue$l(t,"coneMode",0)),this.setCone(GetValue$l(t,"cone",void 0)),this.setOccupiedTest(i),this.setBlockerTest(n),this.setEdgeBlockerTest(o),this.setPreTestFunction(a,u),this.setCostFunction(d,f),this.setDebugGraphics(GetValue$l(t,"debug.graphics",void 0)),this.setDebugLineColor(GetValue$l(t,"debug.visibleLineColor",65280),GetValue$l(t,"debug.invisibleLineColor",16711680)),this.setDebugLog(GetValue$l(t,"debug.log",!1)),this}shutdown(t){this.isShutdown||(this.debugGraphics=void 0,this.chessData=void 0,super.shutdown(t))}get face(){return this._face}set face(t){if(t=this.board.grid.directionNormalize(t),this._face=t,0===this.coneMode);else{var i=this.board.angleToward(this.chessData.tileXYZ,t);this.faceAngle=Normalize(i)}}setFace(t){return this.face=t,this}get cone(){return this._cone}set cone(t){this._cone=t,void 0!==t&&(0===this.coneMode||(this.coneRad=DegToRad$3(t)))}setConeMode(t){return"string"==typeof t&&(t=Dn[t]),this.coneMode=t,this}setCone(t){return this.cone=t,this}setOccupiedTest(t){return void 0===t&&(t=!0),this.occupiedTest=t,this}setBlockerTest(t){return void 0===t&&(t=!0),this.blockerTest=t,this}setEdgeBlockerTest(t){return void 0===t&&(t=!0),this.edgeBlockerTest=t,this}setCostFunction(t,i){return this.costCallback=t,this.costCallbackScope=i,this}setPreTestFunction(t,i){return this.preTestCallback=t,this.preTestCallbackScope=i,this}setDebugGraphics(t){return this.debugGraphics=t,this}setDebugLineColor(t,i){return this.debugVisibleLineColor=t,this.debugInvisibleLineColor=i,this}setDebugLog(t){return void 0===t&&(t=!0),this.debugLog=t,this}clearDebugGraphics(){return this.debugGraphics&&this.debugGraphics.clear(),this}get BLOCKER(){return Ln}get INFINITY(){return kn}get board(){return this.chessData.board}}const Dn={direction:0,angle:1};Object.assign(FieldOfView.prototype,On),ObjectFactory$1.register("fieldOfView",(function(t,i){return new FieldOfView(t,i)})),SetValue(window,"RexPlugins.Board.FieldOfView",FieldOfView);var CreateTileData=function(t,i,n){return{x:t,y:i,direction:n}},In=-1;const Fn=In;var Bn={getPath:function(t,i){if(void 0===i&&(i=[]),null===this.board)return i;for(var n,o,a=this.chessData.tileXYZ,u=CreateTileData(a.x,a.y,this.face);t>0&&null!==(n=this.getNextTile(u,this.preTileXY));)(o=this.getCost(n,u))===Fn&&(o=t),n.cost=o,t>=o&&i.push(n),t-=o,this.preTileXY=u,u=n;for(var d=i.length-1;d>=0&&0===i[d].cost;d--)i.length=d;return i},getNextTile:function(t,i){for(var n,o,a=this.board,u=a.grid.allDirections,d=null,f=null,p=[],b=null,S=0,M=u.length;S<M;S++)null!==(n=a.getNeighborTileXY(t,u[S],!0))&&a.contains(n.x,n.y,this.pathTileZ)&&(b=CreateTileData(n.x,n.y,u[S]),u[S]===t.direction&&(d=b),void 0!==i&&AreTileXYEqual(n,i)?f=b:p.push(b));if(null===f&&0===p.length)o=null;else if(null===f&&1===p.length)o=p[0];else if(null!==f&&0===p.length)o=f;else if(1===this.pickMode)null!==f&&p.push(f),o=GetRandom(p);else o=null!==d?d:GetRandom(p);return o},getCost:function(t,i){return"number"==typeof this.costCallback?this.costCallback:this.costCallbackScope?this.costCallback.call(this.costCallbackScope,t,i,this):this.costCallback(t,i,this)}};const Nn=null,Yn=In;class Monopoly extends ComponentBase{constructor(t,i){super(t,{eventEmitter:!1}),this.chessData=GetChessData(t),this.resetFromJSON(i)}resetFromJSON(t){this.preTileXY=GetValue$l(t,"preTileXY",void 0);var i=GetValue$l(t,"costCallback",void 0),n=GetValue$l(t,"costCallbackScope",void 0);return void 0===i&&(i=GetValue$l(t,"cost",1)),this.setFace(GetValue$l(t,"face",0)),this.setPathMode(GetValue$l(t,"pathMode",0)),this.setPathTileZ(GetValue$l(t,"pathTileZ",0)),this.setCostFunction(i,n),this}shutdown(t){this.isShutdown||(this.chessData=void 0,super.shutdown(t))}setFace(t){return t=this.board.grid.directionNormalize(t),this.face=t,this}setPathMode(t){return"string"==typeof t&&(t=Xn[t]),this.pathMode=t,this}setCostFunction(t,i){return this.costCallback=t,this.costCallbackScope=i,this}setPathTileZ(t){return void 0===t&&(t=!0),this.pathTileZ=t,this}get BLOCKER(){return Nn}get STOP(){return Yn}get board(){return this.chessData.board}}Object.assign(Monopoly.prototype,Bn);const Xn={forward:0,random:1};ObjectFactory$1.register("monopoly",(function(t,i){return new Monopoly(t,i)})),SetValue(window,"RexPlugins.Board.Monopoly",Monopoly);const Gn=Phaser.GameObjects.Zone,Un=Phaser.Utils.Array.Add,Vn=Phaser.Utils.Array.Remove;class Base extends Gn{constructor(t,i,n,o,a){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=1),void 0===a&&(a=1),super(t,i,n,o,a),this.children=[]}destroy(t){if(this.scene){if(t)for(var i,n=this.children.length-1;n>=0;n--)(i=this.children[n]).parentContainer||i.displayList||i.destroy(t);this.clear(!t),super.destroy(t)}}contains(t){return-1!==this.children.indexOf(t)}add(t){var i=this;return Un(this.children,t,0,(function(t){t.once("destroy",i.onChildDestroy,i)}),this),this}remove(t,i){var n=this;return Vn(this.children,t,(function(t){t.off("destroy",n.onChildDestroy,n),i&&t.destroy()})),this}onChildDestroy(t,i){this.remove(t,!1)}clear(t){for(var i,n=0,o=this.children.length;n<o;n++)(i=this.children[n]).off("destroy",this.onChildDestroy,this),t&&i.destroy();return this.children.length=0,this}}const zn=Phaser.GameObjects.Components;Phaser.Class.mixin(Base,[zn.Alpha,zn.Flip]);var GetParent=function(t,i){var n;if(void 0===i)t.hasOwnProperty("rexContainer")&&(n=t.rexContainer.parent);else for(n=GetParent(t);n&&n.name!==i;)n=GetParent(n);return n};const Wn=Phaser.Math.DegToRad,Hn=Phaser.Math.RadToDeg;var GetLocalState=function(t){if(!t.hasOwnProperty("rexContainer")){var i={parent:null,self:null,x:0,y:0,syncPosition:!0,rotation:0,syncRotation:!0,scaleX:0,scaleY:0,syncScale:!0,alpha:0,syncAlpha:!0,visible:!0,active:!0};Object.defineProperty(i,"angle",{get:function(){return Hn(this.rotation)},set:function(t){this.rotation=Wn(t)}}),Object.defineProperty(i,"displayWidth",{get:function(){return t.width*this.scaleX},set:function(i){this.scaleX=i/t.width}}),Object.defineProperty(i,"displayHeight",{get:function(){return t.height*this.scaleY},set:function(i){this.scaleY=i/t.height}}),t.rexContainer=i}return t.rexContainer},jn={setParent(t,i){void 0===i&&(i=this);var n=GetLocalState(t);return i?(n.parent=i,n.self=t):(n.parent=null,n.self=null),this},getParent(t,i){return"string"==typeof t&&(i=t,t=void 0),void 0===t&&(t=this),GetParent(t,i)},getTopmostParent(t){return void 0===t&&(t=this),function(t){for(var i=GetParent(t);i;)t=i,i=GetParent(i);return t}(t)}};const qn=Phaser.Utils.Objects.GetValue,Zn=Base.prototype.add;var Add=function(t,i){this.setParent(t);var n=GetLocalState(t);return SetupSyncFlags(n,i),this.resetChildState(t).updateChildVisible(t).updateChildActive(t).updateChildScrollFactor(t).updateChildMask(t),Zn.call(this,t),this},AddLocal=function(t,i){this.setParent(t);var n=GetLocalState(t);return SetupSyncFlags(n,i),n.x=t.x,n.y=t.y,n.rotation=t.rotation,n.scaleX=t.scaleX,n.scaleY=t.scaleY,n.alpha=t.alpha,n.visible=t.visible,n.active=t.active,this.updateChildPosition(t).updateChildAlpha(t).updateChildVisible(t).updateChildActive(t).updateChildScrollFactor(t).updateChildMask(t),Zn.call(this,t),this},SetupSyncFlags=function(t,i){t.syncPosition=qn(i,"syncPosition",!0),t.syncRotation=qn(i,"syncRotation",!0),t.syncScale=qn(i,"syncScale",!0),t.syncAlpha=qn(i,"syncAlpha",!0)},Kn={add(t){return Array.isArray(t)?this.addMultiple(t):Add.call(this,t),this},pin(t,i){return Array.isArray(t)?this.addMultiple(t,i):Add.call(this,t,i),this},addMultiple(t){for(var i=0,n=t.length;i<n;i++)Add.call(this,t[i]);return this},addLocal(t){return Array.isArray(t)?this.addMultiple(t):AddLocal.call(this,t),this},pinLocal(t,i){return Array.isArray(t)?this.addMultiple(t,i):AddLocal.call(this,t,i),this},addLocalMultiple(t){for(var i=0,n=t.length;i<n;i++)AddLocal.call(this,t[i]);return this}};const Jn=Base.prototype.remove,Qn=Base.prototype.clear;var $n={remove(t,i){return GetParent(t)!==this||(this.setParent(t,null),Jn.call(this,t,i)),this},clear(t){for(var i=0,n=this.children.length;i<n;i++)this.setParent(this.children[i],null);return Qn.call(this,t),this}},ts={getLocalState:t=>GetLocalState(t),resetChildState(t){return this.resetChildPositionState(t).resetChildVisibleState(t).resetChildAlphaState(t).resetChildActiveState(t),this},resetChildrenState(t){for(var i=0,n=t.length;i<n;i++)this.resetChildState(t[i]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}};const es=Phaser.Math.RotateAround;var is={worldToLocal(t){return t.x-=this.x,t.y-=this.y,es(t,0,0,-this.rotation),t.x/=this.scaleX,t.y/=this.scaleY,t},localToWorld(t){return t.x*=this.scaleX,t.y*=this.scaleY,es(t,0,0,this.rotation),t.x+=this.x,t.y+=this.y,t}},GetScale=function(t,i){return t===i?1:t/i},ns={updateChildPosition(t){t.isRexContainerLite&&(t.syncChildrenEnable=!1);var i=GetLocalState(t),n=i.parent;return i.syncPosition&&(t.x=i.x,t.y=i.y,n.localToWorld(t)),i.syncRotation&&(t.rotation=i.rotation+n.rotation),i.syncScale&&(t.scaleX=i.scaleX*n.scaleX,t.scaleY=i.scaleY*n.scaleY),t.isRexContainerLite&&(t.syncChildrenEnable=!0,t.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(t){var i=GetLocalState(t),n=i.parent;return i.x=t.x,i.y=t.y,n.worldToLocal(i),i.scaleX=GetScale(t.scaleX,n.scaleX),i.scaleY=GetScale(t.scaleY,n.scaleY),i.rotation=t.rotation-n.rotation,this},setChildPosition(t,i,n){return t.x=i,t.y=n,this.resetChildPositionState(t),this},setChildLocalPosition(t,i,n){var o=GetLocalState(t);return o.x=i,o.y=n,this.updateChildPosition(t),this},resetLocalPositionState(){var t=GetLocalState(this).parent;return t&&t.resetChildPositionState(this),this}};const ss=Phaser.Math.DegToRad;var rs={updateChildRotation(t){var i=GetLocalState(t),n=i.parent;return i.syncRotation&&(t.rotation=n.rotation+i.rotation),this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(t){var i=GetLocalState(t),n=i.parent;return i.rotation=t.rotation-n.rotation,this},setChildRotation(t,i){return t.rotation=i,this.resetChildRotationState(t),this},setChildAngle(t,i){return t.angle=i,this.resetChildRotationState(t),this},setChildLocalRotation(t,i){return GetLocalState(t).rotation=i,this.updateChildRotation(t),this},setChildLocalAngle(t,i){return GetLocalState(t).rotation=ss(i),this.updateChildRotation(t),this},resetLocalRotationState(){var t=GetLocalState(this).parent;return t&&t.resetChildRotationState(this),this}},os={updateChildScale(t){var i=GetLocalState(t),n=i.parent;return i.syncScale&&(t.scaleX=n.scaleX*i.scaleX,t.scaleY=n.scaleY*i.scaleY),this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(t){var i=GetLocalState(t),n=i.parent;return i.scaleX=GetScale(t.scaleX,n.scaleX),i.scaleY=GetScale(t.scaleY,n.scaleY),this},setChildScale(t,i,n){return void 0===n&&(n=i),t.scaleX=i,t.scaleY=n,this.resetChildScaleState(t),this},setChildLocalScale(t,i,n){void 0===n&&(n=i);var o=GetLocalState(t);return o.scaleX=i,o.scaleY=n,this.updateChildScale(t),this},setChildDisplaySize(t,i,n){return t.setDisplaySize(i,n),this.resetChildScaleState(t),this},resetLocalScaleState(){var t=GetLocalState(this).parent;return t&&t.resetChildScaleState(this),this}},as={updateChildVisible(t){var i=GetLocalState(t),n=i.parent,o=!i.hasOwnProperty("maskVisible")||i.maskVisible;return t.visible=n.visible&&i.visible&&o,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(t){var i=GetLocalState(t);return i.hasOwnProperty("maskVisible")&&delete i.maskVisible,i.visible=t.visible,this},setChildVisible(t,i){return this.setChildLocalVisible(t,i),this},setChildLocalVisible(t,i){return void 0===i&&(i=!0),GetLocalState(t).visible=i,this.updateChildVisible(t),this},setChildMaskVisible(t,i){return void 0===i&&(i=!0),GetLocalState(t).maskVisible=i,this.updateChildVisible(t),this},resetLocalVisibleState(){var t=GetLocalState(this).parent;return t&&t.resetChildVisibleState(this),this}},hs={updateChildAlpha(t){var i=GetLocalState(t),n=i.parent;return i.syncAlpha&&(t.alpha=n.alpha*i.alpha),this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(t){var i=GetLocalState(t),n=i.parent;return i.alpha=GetScale(t.alpha,n.alpha),this},setChildAlpha(t,i){return t.alpha=i,this.resetChildAlphaState(t),this},setChildLocalAlpha(t,i){return GetLocalState(t).alpha=i,this.updateChildAlpha(t),this},resetLocalAlphaState(){var t=GetLocalState(this).parent;return t&&t.resetChildAlphaState(this),this}},ls={updateChildActive(t){var i=GetLocalState(t),n=i.parent;return t.active=n.active&&i.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(t){return GetLocalState(t).active=t.active,this},setChildActive(t,i){return t.active=i,this.resetChildActiveState(t),this},setChildLocalActive(t,i){return void 0===i&&(i=!0),GetLocalState(t).active=i,this.updateChildActive(t),this},resetLocalActiveState(){var t=GetLocalState(this).parent;return t&&t.resetChildActiveState(this),this}},us={updateChildScrollFactor(t){var i=GetLocalState(t).parent;return t.setScrollFactor(i.scrollFactorX,i.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},cs={updateChildMask(t){return null==this.mask||(this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask)!==t&&(t.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(t){return this.mask=t,this},clearMask(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this}},SortGameObjectsByDepth=function(t,i){if(0===t.length)return t;void 0===i&&(i=!1);var n=t[0].scene.sys.displayList;return n.depthSort(),i?t.sort((function(t,i){return n.getIndex(i)-n.getIndex(t)})):t.sort((function(t,i){return n.getIndex(t)-n.getIndex(i)})),t},ds={setDepth(t,i){if(this.depth=t,!i&&this.children)for(var n=this.getAllChildren(),o=0,a=n.length;o<a;o++)n[o].depth=t;return this},swapDepth(t){var i=this.depth,n=t.depth;return this.setDepth(n),t.setDepth(i),this},incDepth(t){if(this.depth+=t,this.children)for(var i=this.getAllChildren(),n=0,o=i.length;n<o;n++)i[n].depth+=t;return this},moveDepthBelow(t){var i=t.scene.children,n=this.getAllChildren([this]);SortGameObjectsByDepth(n);for(var o=0,a=n.length;o<a;o++){var u=n[o];if(i.exists(u)){i.moveBelow(t,u);break}}return this},moveDepthAbove(t){var i=t.scene.children,n=this.getAllChildren([this]);SortGameObjectsByDepth(n,!0);for(var o=0,a=n.length;o<a;o++){var u=n[o];if(i.exists(u)){i.moveAbove(t,u);break}}return this}},DepthFirstSearch=function(t,i){if(!i(t)&&t.isRexContainerLite)for(var n=t.children,o=0,a=n.length;o<a;o++)DepthFirstSearch(n[o],i)},BreadthFirstSearch=function(t,i){for(var n=[t];n.length>0;){var o=n.shift();!i(o)&&o.isRexContainerLite&&n.push(...o.children)}};const fs=Phaser.Utils.Array;var ps={getChildren(t){if(t)for(var i=0,n=this.children.length;i<n;i++)t.push(this.children[i]);else t=this.children;return t},getAllChildren(t){void 0===t&&(t=[]);var i=this;return BreadthFirstSearch(i,(function(n){n!==i&&t.push(n)})),t},getAllVisibleChildren(t){void 0===t&&(t=[]);var i=this;return BreadthFirstSearch(i,(function(n){if(n!==i)return!n.visible||void t.push(n)})),t},bfs(t,i){return void 0===i&&(i=this),BreadthFirstSearch(i,t),this},dfs(t,i){return void 0===i&&(i=this),DepthFirstSearch(i,t),this},contains(t){var i=GetParent(t);return!!i&&(i===this||this.contains(i))},getByName(t,i){if(i){for(var n,o,a=[this];a.length;)for(var u=0,d=(n=a.shift()).children.length;u<d;u++){if((o=n.children[u]).name===t)return o;o.isRexContainerLite&&a.push(o)}return null}return fs.GetFirst(this.children,"name",t)},getRandom(t,i){return fs.GetRandom(this.children,t,i)},getFirst(t,i,n,o){return fs.GetFirstElement(this.children,t,i,n,o)},getAll(t,i,n,o){return fs.GetAll(this.children,t,i,n,o)},count(t,i,n,o){return fs.CountAllMatching(this.children,t,i,n,o)},swap(t,i){return fs.Swap(this.children,t,i),this},setAll(t,i,n,o){return fs.SetAll(this.children,t,i,n,o),this}},GetLocalStates=function(t){for(var i=[],n=0,o=t.length;n<o;n++){var a=t[n];a.hasOwnProperty("rexContainer")&&i.push(a.rexContainer)}return i},UpdateChild=function(t,i,n){if(n.parent){var o=n.parent,a=n.self;switch(i){case"x":case"y":o.updateChildPosition(a);break;case"angle":case"rotation":o.updateChildRotation(a);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":o.updateChildScale(a);break;case"alpha":o.updateChildAlpha(a);break;default:o.updateChildPosition(a),o.updateChildRotation(a),o.updateChildScale(a),o.updateChildAlpha(a)}}else t.remove()},gs={tweenChild(t){var i=t.targets;Array.isArray(i)||(i=[i]);var n=this.scene||function(t){for(var i=0,n=t.length;i<n;i++){var o=t[i].scene;if(o)return o}return null}(i);if(n){t.targets=GetLocalStates(i);var o=n.tweens.add(t);return o.on("update",UpdateChild),o}},createTweenChildConfig(t){var i=t.targets;i&&(Array.isArray(i)||(i=[i]),t.targets=GetLocalStates(i));var n=t.onUpdate;return t.onUpdate=function(t,i){n&&n(t,i),UpdateChild(t,void 0,i)},t},tween(t){var i=this.scene;return t.targets||(t.targets=this),i.tweens.add(t)},timelineChild(t){var i=t.targets;i&&(Array.isArray(i)||(i=[i]),t.targets=GetLocalStates(i));for(var n=t.tweens,o=0,a=n.length;o<a;o++)n[o]=this.createTweenChildConfig(n[o]);return this.scene.tweens.timeline(t)}},AddToLayer=function(t){var i=this.getAllChildren([this]);return SortGameObjectsByDepth(i),t.add(i),this},vs={addToLayer:AddToLayer,addToContainer:AddToLayer};const ms=Phaser.Math.RotateAround;var ys={changeOrigin:function(t,i){this.syncChildrenEnable=!1,function(t,i,n){void 0===n&&(n=i);var o={x:(i-t.originX)*t.displayWidth,y:(n-t.originY)*t.displayHeight};ms(o,0,0,t.rotation),t.originX=i,t.originY=n,t.x=t.x+o.x,t.y=t.y+o.y}(this,t,i),this.syncChildrenEnable=!0;for(var n=this.getAllChildren(),o=0,a=n.length;o<a;o++)this.resetChildPositionState(n[o]);return this}};Object.assign(ys,jn,Kn,$n,ts,is,ns,rs,os,as,hs,ls,us,cs,ds,ps,gs,vs);class ContainerLite extends Base{constructor(t,i,n,o,a,u){super(t,i,n,o,a),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,u&&this.add(u)}destroy(t){this.scene&&(this.syncChildrenEnable=!1,super.destroy(t))}resize(t,i){return this.setSize(t,i),this}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.syncPosition())}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.syncPosition())}get rotation(){return super.rotation}set rotation(t){this.rotation!==t&&(super.rotation=t,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(t){this.scaleX!==t&&(super.scaleX=t,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(t){this.scaleY!==t&&(super.scaleY=t,this.syncPosition())}get scale(){return super.scale}set scale(t){this.scale!==t&&(super.scale=t,this.syncPosition())}get visible(){return super.visible}set visible(t){super.visible!==t&&(super.visible=t,this.syncVisible())}get alpha(){return super.alpha}set alpha(t){super.alpha!==t&&(super.alpha=t,this.syncAlpha())}get active(){return this._active}set active(t){this._active!==t&&(this._active=t,this.syncActive())}get mask(){return this._mask}set mask(t){this._mask!==t&&(this._mask=t,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}get list(){return this.children}static GetParent(t){return GetParent(t)}}Object.assign(ContainerLite.prototype,ys);var xs={x:0,y:0,z:0},OnPointerDown=function(t){this.input.enable&&(t.isDown&&(null===this.input.pointer&&(this.input.pointer=t),OnTouchTileStart.call(this,t)&&OnDragStart.call(this,t)))},OnTouchTileStart=function(t){var i=this.grid;i.saveOrigin(),i.setOriginPosition(this.x,this.y);var n=this.board.worldXYToTileXY(t.x,t.y,!0),o=n.x,a=n.y;i.restoreOrigin(),this.input.tilePosition.x=o,this.input.tilePosition.y=a;var u=this.board.tileXYToChessArray(o,a,Ts),d=u.length>0;if(d){for(var f,p=0,b=u.length;p<b;p++)(f=u[p]).emit&&f.emit("miniboard.pointerdown",t),this.emit("gameobjectdown",t,f);this.emit("pointerdown",t,this)}return Ts.length=0,d},OnDragStart=function(t){var i=this.input.drag;if(1!==i.state){var n=i.position;n.x=t.x-this.x,n.y=t.y-this.y,i.state=1,this.emit("dragstart",t,n.x,n.y)}},Ts=[],DragEnd=function(t){var i=this.input.drag;if(0!==i.state){void 0===t&&(t=this.input.pointer);var n=i.position,o=t.x-n.x,a=t.y-n.y;return i.state=0,this.emit("dragend",t,o,a),this}},OnPointerUp=function(t){this.input.enable&&(OnTouchTileEnd.call(this,t),DragEnd.call(this,t),this.input.pointer===t&&(this.input.pointer=null))},OnTouchTileEnd=function(t){var i=this.grid;i.saveOrigin(),i.setOriginPosition(this.x,this.y);var n=this.board.worldXYToTileXY(t.x,t.y,!0),o=n.x,a=n.y;i.restoreOrigin(),this.input.tilePosition.x=o,this.input.tilePosition.y=a;var u=this.board.tileXYToChessArray(o,a,ws),d=u.length>0;if(d){for(var f,p=0,b=u.length;p<b;p++)(f=u[p]).emit&&f.emit("miniboard.pointerup",t),this.emit("gameobjectup",t,f);this.emit("pointerup",t,this)}return ws.length=0,d},ws=[],OnPointerMove=function(t){this.input.enable&&(OnTouchTileMove.call(this,t),OnDrag.call(this,t))},OnTouchTileMove=function(t){var i=this.grid;i.saveOrigin(),i.setOriginPosition(this.x,this.y);var n=this.board.worldXYToTileXY(t.x,t.y,!0),o=n.x,a=n.y;if(i.restoreOrigin(),this.input.tilePosition.x!==o||this.input.tilePosition.y!==a){this.input.tilePosition.x=o,this.input.tilePosition.y=a;var u=this.board.tileXYToChessArray(o,a,bs),d=u.length>0;if(d){for(var f,p=0,b=u.length;p<b;p++)(f=u[p]).emit&&f.emit("miniboard.pointermove",t),this.emit("gameobjectmove",t,f);this.emit("pointermove",t,this)}else this.input.pointer===t&&(this.input.pointer=null);bs.length=0,0===this.input.drag.state&&(this.input.pointer===t?d||(this.input.pointer=null):null===this.input.pointer&&(this.input.pointer=t))}},OnDrag=function(t){var i=this.input.drag;if(0!==i.state){var n=i.position,o=t.x-n.x,a=t.y-n.y;this.emit("drag",t,o,a)}},bs=[],Mirror$1=function(t,i,n){var o,a;for(var u in void 0===t?t=1:"string"==typeof t&&(t=Ss[t]),void 0===i&&(i=this.tileXYZMap),void 0===n&&(n={}),i)o=i[u],(a=this.board.mirror(o,t)).z=o.z,n[u]=a;return n};const Ss={x:1,y:2,"x&y":3};var ResetChessTileXYZ=function(t){var i;for(var n in this.removeAllChess(),t)i=t[n],n=parseInt(n),this.addChess(n,i.x,i.y,i.z,!1);return this},Rotate$2=function(t,i,n){var o,a;for(var u in void 0===t&&(t=0),void 0===i&&(i=this.tileXYZMap),void 0===n&&(n={}),i)o=i[u],(a=this.board.rotate(o,t)).z=o.z,n[u]=a;return n},GetMinMaxTileXY=function(t,i){void 0===t&&(t=this.tileXYZMap),void 0===i?i={}:!0===i&&(i=Es);var n,o=1/0,a=-1/0,u=1/0,d=-1/0;for(var f in this.tileXYZMap)(n=this.tileXYZMap[f]).x<o&&(o=n.x),n.x>a&&(a=n.x),n.y<u&&(u=n.y),n.y>d&&(d=n.y);return i.minX=o,i.minY=u,i.maxX=a,i.maxY=d,i},Es={},Offset=function(t,i,n,o){var a,u;for(var d in void 0===n&&(n=this.tileXYZMap),void 0===o&&(o={}),n)a=n[d],(u=this.board.offset(a,t,i)).z=a.z,o[d]=u;return o},Ms={addChess:function(t,i,n,o){var a=this.grid;return a.saveOrigin(),a.setOriginPosition(this.x,this.y),this.board.addChess(t,i,n,o,!0),IsUID(t)&&(t=this.board.uidToChess(t)),this.add(t),a.restoreOrigin(),this},removeChess:function(t,i,n,o,a){return this.board.removeChess(t,i,n,o,a),this},removeAllChess:function(t){return this.board.removeAllChess(t),this},pullOutFromMainBoard:function(){var t=this.mainBoard;if(null===t)return this;var i=this.tileXYZMap;for(var n in i)t.removeChess(parseInt(n));return this.setMainBoard(null),this},canPutOnMainBoard:function(t,i,n,o){if(!t)return!1;var a,u,d;for(var f in void 0===o&&(o=this.tileXYZMap),o){if(a=o[f],u=t.offset(a,i,n,!0),!t.contains(u.x,u.y))return!1;if(this.putTestCallback){xs.x=u.x,xs.y=u.x,xs.z=a.z;var p=this.board.uidToChess(f);d=this.putTestCallbackScpe?this.putTestCallback.call(this.putTestCallbackScpe,xs,t,p):this.putTestCallback(xs,t,p)}else d=t.contains(u.x,u.y,a.z);if(d)return!1}return!0},putOnMainBoard:function(t,i,n,o){if(!t)return this;if(void 0===i){var a=t.worldXYToTileXY(this.x,this.y,!0);i=a.x,n=a.y}if(void 0===o&&(o=!0),this.pullOutFromMainBoard(),!this.canPutOnMainBoard(t,i,n))return this;this.setMainBoard(t,i,n);var u,d,f=this.tileXYZMap;for(var p in f)u=f[p],p=parseInt(p),d=t.offset(u,i,n,!0),t.addChess(p,d.x,d.y,u.z,!1);return o&&this.alignToMainBoard(t,i,n),this},putBack:function(){var t=this.lastMainBoardRef.mainBoard,i=this.lastMainBoardRef.tileX,n=this.lastMainBoardRef.tileY;return this.putOnMainBoard(t,i,n,!1),this},isOverlapping:function(t,i){if(!t)return!1;var n;for(var o in this.tileXYZMap)if(n=this.board.uidToChess(o),t.isOverlappingPoint(n.x,n.y,i))return!0;return!1},alignToMainBoard:function(t,i,n){if(!t)return this;if(void 0===i){var o=t.worldXYToTileXY(this.x,this.y,!0);i=o.x,n=o.y}return t.gridAlign(this,i,n),this},setInteractive:function(t){return void 0===t&&(t=!0),this.input||(this.input={enable:!0,tilePosition:{x:void 0,y:void 0},pointer:void 0,drag:{enable:!1,state:0,position:{x:void 0,y:void 0}}},this.scene.input.on("pointerdown",OnPointerDown,this),this.scene.input.on("pointerup",OnPointerUp,this),this.scene.input.on("pointermove",OnPointerMove,this),this.once("destroy",(function(){this.scene&&(this.scene.input.off("pointerdown",OnPointerDown,this),this.scene.input.off("pointerup",OnPointerUp,this),this.scene.input.off("pointermove",OnPointerMove,this))}),this)),this.input.enable=t,t||(this.input.pointer=null),this},setDraggable:function(t){return void 0===t&&(t=!0),this.setInteractive(),this.input.drag.enable=t,t||(this.input.drag.state=0),this},dragEnd:DragEnd,setMainBoard:function(t,i,n){return this.mainBoardRef.set(t,i,n),t&&this.lastMainBoardRef.set(t,i,n),this},canMirror:function(t){if(null===this.mainBoard)return!0;var i=Mirror$1.call(this,t);return this.canPutOnMainBoard(this.mainBoard,tileX,tileY,i)},mirror:function(t){var i=null!=this.mainBoard;i&&this.pullOutFromMainBoard();var n=Mirror$1.call(this,t);if(i){var o=this.lastMainBoardRef.mainBoard,a=this.lastMainBoardRef.tileX,u=this.lastMainBoardRef.tileY;this.lastTransferResult=this.canPutOnMainBoard(o,a,u,n),this.lastTransferResult&&ResetChessTileXYZ.call(this,n),this.putBack()}else this.lastTransferResult=!0,ResetChessTileXYZ.call(this,n);return this},canRotate:function(t){if(null===this.mainBoard)return!0;var i=Rotate$2.call(this,t);return this.canPutOnMainBoard(this.mainBoard,tileX,tileY,i)},rotate:function(t){if(0===t)return this;var i=null!=this.mainBoard;i&&this.pullOutFromMainBoard();var n=Rotate$2.call(this,t);if(i){var o=this.lastMainBoardRef.mainBoard,a=this.lastMainBoardRef.tileX,u=this.lastMainBoardRef.tileY;this.lastTransferResult=this.canPutOnMainBoard(o,a,u,n),this.lastTransferResult&&ResetChessTileXYZ.call(this,n),this.putBack()}else this.lastTransferResult=!0,ResetChessTileXYZ.call(this,n);return this.lastTransferResult&&this.setFace(this.face+t),this},canRotateTo:function(t){return t-=this.face,this.canRotate(t)},rotateTo:function(t){return t-=this.face,this.rotate(t),this},setOrigin:function(t,i){switch(t){case"center":t=.5,i=.5;break;case"top-left":case"left-top":t=0,i=0}void 0===t&&(t=.5),void 0===i&&(i=t);var n=GetMinMaxTileXY.call(this,void 0,!0),o=-Math.floor(Linear$1(n.minX,n.maxX,t)),a=-Math.floor(Linear$1(n.minY,n.maxY,i));if(0!==o||0!==a){var u=Offset.call(this,o,a);ResetChessTileXYZ.call(this,u);var d=this.board.tileXYToWorldXY(o,a),f=this.board.tileXYToWorldXY(0,0);this.setPosition(this.x+(f.x-d.x),this.y+(f.y-d.y))}return this}};class MainBoardReference{constructor(t){this.miniBoard=t,this.set(null)}set(t,i,n){t||(t=null,i=null,n=null),this.mainBoard=t,this.tileX=i,this.tileY=n}}class MiniBoard extends ContainerLite{constructor(t,i,n,o){super(t,i,n,0,0),this.type="rexMiniBoard";var a={isBoard:!1,grid:GetValue$l(o,"grid",void 0),infinity:!0,wrap:!1};this.board=new Board$1(t,a),this.mainBoardRef=new MainBoardReference,this.lastMainBoardRef=new MainBoardReference,this.resetFromJSON(o)}resetFromJSON(t){this.setFace(GetValue$l(t,"face",0));var i=GetValue$l(t,"draggable",void 0);return void 0!==i&&this.setDraggable(i),this.setPutTestCallback(GetValue$l(t,"putTestCallback",void 0),GetValue$l(t,"putTestCallbackScpe",void 0)),this.lastTransferResult=GetValue$l(t,"lastTransferResult",void 0),this}destroy(t){this.scene&&(this.clear(!t),this.board.shutdown(t),this.board=void 0,this.setPutTestCallback(void 0,void 0),super.destroy(t))}setFace(t){return this.face=this.board.grid.directionNormalize(t),this}get mainBoard(){return this.mainBoardRef.mainBoard}get tileX(){return this.mainBoardRef.tileX}get tileY(){return this.mainBoardRef.tileY}get grid(){return this.board.grid}get tileXYZMap(){return this.board.boardData.UIDToXYZ}setPutTestCallback(t,i){return this.putTestCallback=t,this.putTestCallbackScpe=i,this}}Object.assign(MiniBoard.prototype,Ms),ObjectFactory$1.register("miniBoard",(function(t,i,n){var o=new MiniBoard(this.scene,t,i,n);return this.scene.add.existing(o),o})),SetValue(window,"RexPlugins.Board.MiniBoard",MiniBoard);var Cs={hexagon:function(t,i,n){void 0===n&&(n=[]);for(var o,a,u=t.grid.mode,d=-i;d<=i;d++){o=Math.max(-i,-d-i),a=Math.min(i,-d+i);for(var f=o;f<=a;f++)n.push(cube2cr(u,d,0,-d-f))}return n},triangle:function(t,i,n,o){void 0===o&&(o=[]);for(var a,u,d=t.grid.mode,f=0;f<=n;f++){1===i?(a=n-f,u=n):(a=0,u=n-f);for(var p=a;p<=u;p++)o.push(cube2cr(d,f,0,-f-p))}return o},parallelogram:function(t,i,n,o,a){void 0===a&&(a=[]);var u=t.grid.mode;switch(i){case 1:for(var d=0;d<=n;d++)for(var f=0;f<=o;f++)a.push(cube2cr(u,f,0,d));break;case 2:for(var p=0;p<=n;p++)for(d=0;d<=o;d++)a.push(cube2cr(u,-p-d,0,d));break;default:for(f=0;f<=n;f++)for(p=0;p<=o;p++)a.push(cube2cr(u,f,0,-f-p))}return a}};const As=Phaser.Utils.String.Pad;var GetStyle=function(t,i,n){if(null==t)return t;switch(typeof t){case"string":default:return t;case"number":return`#${As(Math.floor(t).toString(16),6,"0",1)}`;case"function":return t(i,n);case"object":return t.hasOwnProperty("r")?t.hasOwnProperty("a")?`rgba(${t.r},${t.g},${t.b},${t.a})`:`rgb(${t.r},${t.g},${t.b})`:t.hasOwnProperty("h")?t.hasOwnProperty("a")?`hsla(${t.h},${t.s},${t.l},${t.a})`:`hsl(${t.h},${t.s},${t.l})`:t}},Indent=function(t,i,n){return t<i?t+n:t>i?t-n:t},CreateTileTexture=function(t,i,n,o,a,u){void 0===u&&(u="miter"),function(t,i,n,o,a,u,d){void 0===o&&void 0===a&&(o=16777215),void 0===a?u=0:void 0===u&&(u=2);for(var f=1/0,p=1/0,b=-1/0,S=-1/0,M=0,C=n.length;M<C;M++){var P=(W=n[M]).x,R=W.y;f=Math.min(f,P),p=Math.min(p,R),b=Math.max(b,P),S=Math.max(S,R)}var O=b-f,B=S-p,N=t.sys.textures.createCanvas(i,Math.ceil(O),Math.ceil(B)),Y=N.getCanvas(),X=N.getContext(),G=O/2,U=B/2,V=u/2,z=[];for(M=0,C=n.length;M<C;M++){var W=n[M];z.push({x:Indent(W.x-f,G,V),y:Indent(W.y-p,U,V)})}!function(t,i,n,o,a,u,d){void 0===d&&(d="round"),i.beginPath(),i.lineJoin=d;var f=n[0];i.moveTo(f.x,f.y);for(var p=1,b=n.length;p<b;p++)f=n[p],i.lineTo(f.x,f.y);i.closePath(),null!=o&&(i.fillStyle=o,i.fill()),null!=a&&(i.strokeStyle=a,i.lineWidth=u,i.stroke())}(0,X,z,GetStyle(o,Y,X),GetStyle(a,Y,X),u,d),N.refresh()}(t.scene,i,t.getGridPoints(0,0,!0),n,o,a,u)};class BoardPlugin extends Phaser.Plugins.ScenePlugin{constructor(t,i){super(t,i),this.add=new ObjectFactory$1(t),this.hexagonMap=Cs,this.createTileTexture=CreateTileTexture}start(){this.scene.sys.events.on("destroy",this.destroy,this)}}var SetVelocity=function(t,i,n,o){var a=t.body,u=a.velocity.x,d=a.velocity.y;i===u&&n===d||(a.setVelocity(i,n),o&&o(i,n,u,d))};const Ps=Phaser.Utils.Objects.GetValue;class Bullet extends SceneUpdateTickTask{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.parent.body||this.scene.physics.add.existing(this.parent,!1),this.setWrapMode(Ps(t,"wrap",!1),Ps(t,"padding",0)),this.setEnable(Ps(t,"enable",!0)),this.setSpeed(Ps(t,"speed",200)),this}get enable(){return this.isRunning}set enable(t){this.isRunning=t,t||SetVelocity(this.parent,0,0)}setEnable(t){return null==t&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}setWrapMode(t,i){return void 0===t&&(t=!0),this.wrap=t,this.padding=i,this}update(t,i){var n=this.parent;if(!this.enable)return SetVelocity(n,0,0),this;if(!n.active)return this;var o=n.rotation,a=this.speed*Math.cos(o),u=this.speed*Math.sin(o);return SetVelocity(n,a,u),this.wrap&&n.body.world.wrap(n,this.padding),this}}class BulletPlugin extends Phaser.Plugins.BasePlugin{constructor(t){super(t)}start(){this.game.events.on("destroy",this.destroy,this)}add(t,i){return new Bullet(t,i)}}const _s=Phaser.Utils.Objects.GetValue,Rs=Phaser.Math.Clamp;class Timer{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.state=_s(t,"state",Os),this.timeScale=_s(t,"timeScale",1),this.delay=_s(t,"delay",0),this.repeat=_s(t,"repeat",0),this.repeatCounter=_s(t,"repeatCounter",0),this.duration=_s(t,"duration",0),this.nowTime=_s(t,"nowTime",0),this.justRestart=_s(t,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(t){return this.timeScale=t,this}setDelay(t){return void 0===t&&(t=0),this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatInfinity(){return this.repeat=-1,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?ks:Ls,this.repeatCounter=0,this}stop(){return this.state=Os,this}update(t,i){this.state!==Os&&this.state!==Ds&&0!==i&&0!==this.timeScale&&(this.nowTime+=i*this.timeScale,this.state=this.nowTime>=0?ks:Ls,this.justRestart=!1,this.nowTime>=this.duration&&(-1===this.repeat||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration):(this.nowTime=this.duration,this.state=Ds)))}get t(){var t;switch(this.state){case Os:case Ls:t=0;break;case ks:t=this.nowTime/this.duration;break;case Ds:t=1}return Rs(t,0,1)}set t(t){(t=Rs(t,-1,1))<0?(this.state=Ls,this.nowTime=-this.delay*t):(this.state=ks,this.nowTime=this.duration*t,1===t&&0!==this.repeat&&this.repeatCounter++)}setT(t){return this.t=t,this}get isIdle(){return this.state===Os}get isDelay(){return this.state===Ls}get isCountDown(){return this.state===ks}get isRunning(){return this.state===Ls||this.state===ks}get isDone(){return this.state===Ds}get isOddIteration(){return 1==(1&this.repeatCounter)}get isEvenIteration(){return 0==(1&this.repeatCounter)}}const Os=0,Ls=1,ks=2,Ds=-1;class TimerTickTask extends SceneUpdateTickTask{constructor(t,i){super(t,i),this.timer=new Timer}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}}const Is=Phaser.Utils.Objects.GetValue,Fs=Phaser.Utils.Objects.GetAdvancedValue,Bs=Phaser.Tweens.Builders.GetEaseFunction;class EaseValueTaskBase extends TimerTickTask{resetFromJSON(t){return this.timer.resetFromJSON(Is(t,"timer")),this.setEnable(Is(t,"enable",!0)),this.setTarget(Is(t,"target",this.parent)),this.setDelay(Fs(t,"delay",0)),this.setDuration(Fs(t,"duration",1e3)),this.setEase(Is(t,"ease","Linear")),this.setRepeat(Is(t,"repeat",0)),this}setEnable(t){return null==t&&(t=!0),this.enable=t,this}setTarget(t){return void 0===t&&(t=this.parent),this.target=t,this}setDelay(t){return this.delay=t,this}setDuration(t){return this.duration=t,this}setEase(t){return void 0===t&&(t="Linear"),this.ease=t,this.easeFn=Bs(t),this}setRepeat(t){return this.repeat=t,this}start(){return this.timer.isRunning||super.start(),this}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}stop(t){return void 0===t&&(t=!1),super.stop(),t&&(this.timer.setT(1),this.updateGameObject(this.target,this.timer),this.complete()),this}update(t,i){if(!this.isRunning||!this.enable||!this.parent.active)return this;var n=this.target,o=this.timer;return o.update(t,i),o.isDelay||this.updateGameObject(n,o),this.emit("update",n,this),o.isDone&&this.complete(),this}updateGameObject(t,i){}}const Ns=Phaser.Utils.Objects.GetValue,Ys=Phaser.Utils.Objects.GetAdvancedValue,Xs=Phaser.Math.Linear;class EaseMove extends EaseValueTaskBase{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){if(super.resetFromJSON(t),this.setMode(Ns(t,"mode",0)),t&&(t.hasOwnProperty("x")||t.hasOwnProperty("y"))){var i=Ys(t,"x",void 0),n=Ys(t,"y",void 0);this.setTargetPosition(i,n)}else this.setTargetPosition(t);return this}setMode(t){return"string"==typeof t&&(t=Gs[t]),this.mode=t,this}setTargetPosition(t,i){if("number"==typeof t||"number"==typeof i)this.startX=this.parent.x,this.startY=this.parent.y,this.endX=t,this.endY=i;else{var n=t;this.startX=Ys(n,"startX",void 0),this.startY=Ys(n,"startY",void 0),this.endX=Ys(n,"endX",void 0),this.endY=Ys(n,"endY",void 0)}return this.hasMoveX=void 0!==this.startX&&void 0!==this.endX,this.hasMoveY=void 0!==this.startY&&void 0!==this.endY,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasMoveX&&(t.x=this.startX),this.hasMoveY&&(t.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(2===this.mode?-1:0),super.start(),this}updateGameObject(t,i){var n=i.t;i.isOddIteration&&(n=1-n),n=this.easeFn(n),this.hasMoveX&&(t.x=Xs(this.startX,this.endX,n)),this.hasMoveY&&(t.y=Xs(this.startY,this.endY,n))}complete(){return super.complete(),1===this.mode&&this.parent.destroy(),this}}const Gs={stop:0,destroy:1,yoyo:2};var ParseValue=function(t,i){if("number"==typeof t)return t;var n=t[0],o=parseFloat(t.substr(2));switch(n){case"+":return i+o;case"-":return i-o;case"*":return i*o;case"/":return i/o}},EaseMoveTo=function(t,i,n,o,a,u,d){u instanceof EaseMove&&(d=u,u=void 0),void 0===u&&(u=!1);var f={};return f.mode=u?1:0,void 0!==n&&(f.startX=t.x,f.endX=ParseValue(n,t.x)),void 0!==o&&(f.startY=t.y,f.endY=ParseValue(o,t.y)),f.duration=i,f.ease=void 0===a?"Linear":a,void 0===d?d=new EaseMove(t,f):d.resetFromJSON(f),d.restart(),d},EaseMoveFrom=function(t,i,n,o,a,u,d){u instanceof EaseMove&&(d=u,u=void 0),void 0===u&&(u=!1);var f={};return f.mode=u?1:0,void 0!==n&&(f.startX=ParseValue(n,t.x),f.endX=t.x),void 0!==o&&(f.startY=ParseValue(o,t.y),f.endY=t.y),f.duration=i,f.ease=void 0===a?"Linear":a,void 0===d?d=new EaseMove(t,f):d.resetFromJSON(f),d.restart(),d};class EaseMovePlugin extends Phaser.Plugins.BasePlugin{constructor(t){super(t)}start(){this.game.events.on("destroy",this.destroy,this)}add(t,i){return new EaseMove(t,i)}}var Us={moveTo:EaseMoveTo,moveFrom:EaseMoveFrom,moveToDestroy:function(t,i,n,o,a,u){return EaseMoveTo(t,i,n,o,a,!0,u)},moveFromDestroy:function(t,i,n,o,a,u){return EaseMoveFrom(t,i,n,o,a,!0,u)}};Object.assign(EaseMovePlugin.prototype,Us);class ObjectFactory{constructor(t){this.scene=t}static register(t,i){ObjectFactory.prototype[t]=i}}const Vs=Phaser.GameObjects.GameObject;var IsGameObject=function(t){return!!t.skeleton||t instanceof Vs};ObjectFactory.register("tap",(function(t,i){return IsGameObject(t)||(i=t,t=this.scene),new Tap(t,i)})),SetValue(window,"RexPlugins.Gestures.Tap",Tap),ObjectFactory.register("press",(function(t,i){return IsGameObject(t)||(i=t,t=this.scene),new Press(t,i)})),SetValue(window,"RexPlugins.Gestures.Press",Press);const zs=Phaser.Utils.Objects.GetValue;class Pan extends OnePointerTracer{constructor(t,i){super(t,i);var n=this,o={states:{IDLE:{},BEGIN:{enter:function(){var t=n.pointer;n.startX=t.x,n.startY=t.y,n.startWorldX=t.worldX,n.startWorldY=t.worldY}},RECOGNIZED:{enter:function(){n.emit("panstart",n,n.gameObject,n.lastPointer)},exit:function(){var t=n.lastPointer;n.endX=t.x,n.endY=t.y,n.endWorldX=t.worldX,n.endWorldY=t.worldY,n.emit("panend",n,n.gameObject,n.lastPointer)}}},init:function(){this.state=Ws},eventEmitter:!1};this.setRecongizedStateObject(new FSM(o))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(zs(t,"threshold",10)),this}onDragStart(){this.state=Hs,0===this.dragThreshold&&(this.state=js)}onDragEnd(){this.state=Ws}onDrag(){switch(this.state){case Hs:this.pointer.getDistance()>=this.dragThreshold&&(this.state=js);break;case js:var t=this.pointer.position,i=this.pointer.prevPosition;this.dx=t.x-i.x,this.dy=t.y-i.y;var n=this.pointer;this.x=n.x,this.y=n.y,this.worldX=n.worldX,this.worldY=n.worldY,this.emit("pan",this,this.gameObject,this.lastPointer)}}get isPanned(){return this.state===js}setDragThreshold(t){return this.dragThreshold=t,this}}const Ws="IDLE",Hs="BEGIN",js="RECOGNIZED";ObjectFactory.register("pan",(function(t,i){return IsGameObject(t)||(i=t,t=this.scene),new Pan(t,i)})),SetValue(window,"RexPlugins.Gestures.Pan",Pan),ObjectFactory.register("swipe",(function(t,i){return IsGameObject(t)||(i=t,t=this.scene),new Swipe(t,i)})),SetValue(window,"RexPlugins.Gestures.Swipe",Swipe);const qs=Phaser.Utils.Objects.GetValue,Zs=Phaser.Utils.Array.SpliceOne,Ks=Phaser.Math.Distance.Between,Js=Phaser.Math.Angle.Between;class TwoPointersTracer{constructor(t,i){var n=t.input.manager.pointersTotal-1;n<2&&t.input.addPointer(2-n),this.scene=t,this.setEventEmitter(qs(i,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.setEnable(qs(t,"enable",!0)),this.bounds=qs(t,"bounds",void 0),this.tracerState=$s,this.pointers.length=0,Clear(this.movedState),this}boot(){this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){this.scene&&(this.destroyEventEmitter(),this.pointers.length=0,Clear(this.movedState),this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t){if(this.enable&&(2!==this.pointers.length&&(!this.bounds||this.bounds.contains(t.x,t.y))&&-1===this.pointers.indexOf(t)))switch(this.movedState[t.id]=!1,this.pointers.push(t),this.tracerState){case $s:this.tracerState=er,this.onDrag1Start();break;case er:this.tracerState=ir,this.onDrag2Start()}}onPointerUp(t){if(this.enable&&(!this.bounds||this.bounds.contains(t.x,t.y))){var i=this.pointers.indexOf(t);if(-1!==i)switch(delete this.movedState[t.id],Zs(this.pointers,i),this.tracerState){case er:this.tracerState=$s,this.onDrag1End();break;case ir:this.tracerState=er,this.onDrag2End(),this.onDrag1Start()}}}onPointerMove(t){if(this.enable&&t.isDown){var i=!this.bounds||this.bounds.contains(t.x,t.y),n=-1!==this.pointers.indexOf(t);if(!n&&i);else if(n&&!i)this.onPointerUp(t);else if(this.movedState[t.id]||(this.movedState[t.id]=t.x!==t.downX||t.y!==t.downY),this.movedState[t.id])switch(this.tracerState){case er:this.onDrag1();break;case ir:this.onDrag2()}}}dragCancel(){return this.tracerState===ir&&this.onDrag2End(),this.pointers.length=0,Clear(this.movedState),this.tracerState=$s,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==ir)return 0;var t=this.pointers[0],i=this.pointers[1];return Ks(t.x,t.y,i.x,i.y)}get angleBetween(){if(this.tracerState!==ir)return 0;var t=this.pointers[0],i=this.pointers[1];return Js(t.x,t.y,i.x,i.y)}get drag1Vector(){var t=this.pointers[0];if(t&&this.movedState[t.id]){var i=t.position,n=t.prevPosition;Qs.x=i.x-n.x,Qs.y=i.y-n.y}else Qs.x=0,Qs.y=0;return Qs}get centerX(){if(this.tracerState!==ir)return 0;var t=this.pointers[0].position,i=this.pointers[1].position;return(t.x+i.x)/2}get centerY(){if(this.tracerState!==ir)return 0;var t=this.pointers[0].position,i=this.pointers[1].position;return(t.y+i.y)/2}get prevCenterX(){if(this.tracerState!==ir)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,i=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.x+i.x)/2}get prevCenterY(){if(this.tracerState!==ir)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,i=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.y+i.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=nr,this}}Object.assign(TwoPointersTracer.prototype,Z);var Qs={};const $s=0,er=1,ir=2,nr="IDLE",sr=Phaser.Utils.Objects.GetValue;class Pinch extends TwoPointersTracer{constructor(t,i){super(t,i);var n=this,o={states:{IDLE:{enter:function(){n.prevDistance=void 0,n.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function(){n.emit("pinchstart",n)},exit:function(){n.emit("pinchend",n)}}},init:function(){this.state=rr},eventEmitter:!1};this.setRecongizedStateObject(new FSM(o))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(sr(t,"threshold",0)),this}onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=or,0===this.dragThreshold&&(this.state=ar)}onDrag2End(){this.state=rr}onDrag2(){switch(this.state){case or:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.prevDistance=t,this.state=ar}break;case ar:t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.emit("pinch",this),this.prevDistance=t}}get isPinched(){return this.state===ar}setDragThreshold(t){return this.dragThreshold=t,this}}const rr="IDLE",or="BEGIN",ar="RECOGNIZED";ObjectFactory.register("pinch",(function(t){return new Pinch(this.scene,t)})),SetValue(window,"RexPlugins.Gestures.Pinch",Pinch);const hr=Phaser.Math.RotateAround;var RotateObjectAround=function(t,i,n,o){return hr(t,i,n,o),t.rotation+=o,t},lr={};const ur=Phaser.Utils.Objects.GetValue,cr=Phaser.Math.Angle.WrapDegrees,dr=Phaser.Math.Angle.ShortestBetween,fr=Phaser.Math.RadToDeg,pr=Phaser.Math.DegToRad;class Rotate extends TwoPointersTracer{constructor(t,i){super(t,i);var n=this,o={states:{IDLE:{enter:function(){n.prevAngle=void 0,n.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){n.emit("rotatestart",n)},exit:function(){n.emit("rotateend",n)}}},init:function(){this.state=vr},eventEmitter:!1};this.setRecongizedStateObject(new FSM(o))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(ur(t,"threshold",0)),this}onDrag2Start(){this.prevAngle=cr(fr(this.angleBetween)),this.state=mr,0===this.dragThreshold&&(this.state=yr)}onDrag2End(){this.state=vr}onDrag2(){switch(this.state){case mr:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=cr(fr(this.angleBetween));this.angle=dr(this.prevAngle,t),this.prevAngle=t,this.state=yr}break;case yr:t=cr(fr(this.angleBetween));this.angle=dr(this.prevAngle,t),this.prevAngle=t,this.emit("rotate",this)}}get isRotated(){return this.state===yr}get rotation(){return pr(this.angle)}setDragThreshold(t){return this.dragThreshold=t,this}}var gr={spinObject:function(t,i){if(!this.isRotation)return this;void 0===i&&(i=this.pointers[0].camera);var n=this.movementCenterX,o=this.movementCenterY,a=function(t,i,n,o){return void 0===o?o={}:!0===o&&(o=lr),n.getWorldPoint(t,i,o),o}(this.centerX,this.centerY,i,!0),u=a.x,d=a.y,f=this.rotation;if(Array.isArray(t))for(var p=t,b=0,S=p.length;b<S;b++)(t=p[b]).x+=n,t.y+=o,RotateObjectAround(t,u,d,f);else t.x+=n,t.y+=o,RotateObjectAround(t,u,d,f);return this}};Object.assign(Rotate.prototype,gr);const vr="IDLE",mr="BEGIN",yr="RECOGNIZED";ObjectFactory.register("rotate",(function(t){return new Rotate(this.scene,t)})),SetValue(window,"RexPlugins.Gestures.Rotate",Rotate);class GesturesPlugin extends Phaser.Plugins.ScenePlugin{constructor(t,i){super(t,i),this.add=new ObjectFactory(t)}}class MoveToPlugin extends Phaser.Plugins.BasePlugin{constructor(t){super(t)}start(){this.game.events.on("destroy",this.destroy,this)}add(t,i){return new MoveTo$2(t,i)}}const xr=Phaser.Utils.Objects.GetValue,Tr=Phaser.Math.Wrap,wr=Phaser.Math.Angle.Wrap,br=Phaser.Math.Angle.Between;class RotateTo extends SceneUpdateTickTask{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.isRunning=xr(t,"isRunning",!1),this.setEnable(xr(t,"enable",!0)),this.timeScale=xr(t,"timeScale",1),this.setSpeed(xr(t,"speed",180)),this.target=xr(t,"target",0),this.dir=xr(t,"dir",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,speed:this.speed,target:this.target,dir:this.dir,tickingMode:this.tickingMode}}setEnable(t){return null==t&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}rotateTo(t,i,n){if("number"!=typeof t){var o=t;t=xr(o,"angle",void 0),i=xr(o,"dir",void 0)}return this.target=Tr(t,0,360),void 0===i&&(i=0),this.dir="string"==typeof i?Sr[i]:i,void 0!==n&&this.setSpeed(n),super.start(),this}rotateTowardsPosition(t,i,n,o){var a=this.parent,u=br(a.x,a.y,t,i),d=RadToDeg$3(u);return this.rotateTo(d,n,o),this}update(t,i){if(!this.isRunning||!this.enable)return this;var n=this.parent;if(!n.active)return this;var o=this.target;if(wr(DegToRad$3(o))===n.rotation)return this.complete(),this;if(0===this.speed||0===i||0===this.timeScale)return this;var a,u,d=(360+n.angle)%360,f=i*this.timeScale/1e3,p=this.speed*f,b=this.dir;switch(b){case 0:var S=diffAngle(d,o,!0),M=360-S;S<M?(b=1,a=S):(b=2,a=M);break;case 1:a=diffAngle(d,o,!0);break;case 2:a=diffAngle(d,o,!1)}return u=p<a?1===b?d+p:d-p:o,n.rotation=DegToRad$3(u),this}}var diffAngle=function(t,i,n){var o=n?i-t:t-i;return o=Tr(o,0,360)};const Sr={shortest:0,cw:1,ccw:2};class RotateToPlugin extends Phaser.Plugins.BasePlugin{constructor(t){super(t)}start(){this.game.events.on("destroy",this.destroy,this)}add(t,i){return new RotateTo(t,i)}}var Er={exports:{}},Mr=Er.exports=function s(){var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},i=!t.document&&!!t.postMessage,n=t.IS_PAPA_WORKER||!1,o={},a=0,u={parse:function(i,n){var d=(n=n||{}).dynamicTyping||!1;if(J(d)&&(n.dynamicTypingFunction=d,d={}),n.dynamicTyping=d,n.transform=!!J(n.transform)&&n.transform,n.worker&&u.WORKERS_SUPPORTED){var f=function(){if(!u.WORKERS_SUPPORTED)return!1;var i,n,d=(i=t.URL||t.webkitURL||null,n=s.toString(),u.BLOB_URL||(u.BLOB_URL=i.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",n,")();"],{type:"text/javascript"})))),f=new t.Worker(d);return f.onmessage=_,f.id=a++,o[f.id]=f}();return f.userStep=n.step,f.userChunk=n.chunk,f.userComplete=n.complete,f.userError=n.error,n.step=J(n.step),n.chunk=J(n.chunk),n.complete=J(n.complete),n.error=J(n.error),delete n.worker,void f.postMessage({input:i,config:n,workerId:f.id})}var p,b=null;return u.NODE_STREAM_INPUT,"string"==typeof i?(i=65279===(p=i).charCodeAt(0)?p.slice(1):p,b=n.download?new l(n):new p2(n)):!0===i.readable&&J(i.read)&&J(i.on)?b=new g(n):(t.File&&i instanceof File||i instanceof Object)&&(b=new c(n)),b.stream(i)},unparse:function(t,i){var n=!1,o=!0,a=",",d="\r\n",f='"',p=f+f,b=!1,S=null,M=!1;!function(){if("object"==typeof i){if("string"!=typeof i.delimiter||u.BAD_DELIMITERS.filter((function(t){return-1!==i.delimiter.indexOf(t)})).length||(a=i.delimiter),("boolean"==typeof i.quotes||"function"==typeof i.quotes||Array.isArray(i.quotes))&&(n=i.quotes),"boolean"!=typeof i.skipEmptyLines&&"string"!=typeof i.skipEmptyLines||(b=i.skipEmptyLines),"string"==typeof i.newline&&(d=i.newline),"string"==typeof i.quoteChar&&(f=i.quoteChar),"boolean"==typeof i.header&&(o=i.header),Array.isArray(i.columns)){if(0===i.columns.length)throw new Error("Option columns is empty");S=i.columns}void 0!==i.escapeChar&&(p=i.escapeChar+f),("boolean"==typeof i.escapeFormulae||i.escapeFormulae instanceof RegExp)&&(M=i.escapeFormulae instanceof RegExp?i.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var C=new RegExp(Q(f),"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return h2(null,t,b);if("object"==typeof t[0])return h2(S||Object.keys(t[0]),t,b)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||S),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:"object"==typeof t.data[0]?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),h2(t.fields||[],t.data||[],b);throw new Error("Unable to serialize unrecognized input");function h2(t,i,n){var u="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof i&&(i=JSON.parse(i));var f=Array.isArray(t)&&0<t.length,p=!Array.isArray(i[0]);if(f&&o){for(var b=0;b<t.length;b++)0<b&&(u+=a),u+=v2(t[b],b);0<i.length&&(u+=d)}for(var S=0;S<i.length;S++){var M=f?t.length:i[S].length,C=!1,P=f?0===Object.keys(i[S]).length:0===i[S].length;if(n&&!f&&(C="greedy"===n?""===i[S].join("").trim():1===i[S].length&&0===i[S][0].length),"greedy"===n&&f){for(var R=[],O=0;O<M;O++){var B=p?t[O]:O;R.push(i[S][B])}C=""===R.join("").trim()}if(!C){for(var N=0;N<M;N++){0<N&&!P&&(u+=a);var Y=f&&p?t[N]:N;u+=v2(i[S][Y],N)}S<i.length-1&&(!n||0<M&&!P)&&(u+=d)}}return u}function v2(t,i){if(null==t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);var o=!1;M&&"string"==typeof t&&M.test(t)&&(t="'"+t,o=!0);var d=t.toString().replace(C,p);return(o=o||!0===n||"function"==typeof n&&n(t,i)||Array.isArray(n)&&n[i]||function(t,i){for(var n=0;n<i.length;n++)if(-1<t.indexOf(i[n]))return!0;return!1}(d,u.BAD_DELIMITERS)||-1<d.indexOf(a)||" "===d.charAt(0)||" "===d.charAt(d.length-1))?f+d+f:d}}};if(u.RECORD_SEP=String.fromCharCode(30),u.UNIT_SEP=String.fromCharCode(31),u.BYTE_ORDER_MARK="\ufeff",u.BAD_DELIMITERS=["\r","\n",'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!i&&!!t.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=E,u.ParserHandle=r,u.NetworkStreamer=l,u.FileStreamer=c,u.StringStreamer=p2,u.ReadableStreamStreamer=g,t.jQuery){var d=t.jQuery;d.fn.parse=function(i){var n=i.config||{},o=[];return this.each((function(i){if("INPUT"!==d(this).prop("tagName").toUpperCase()||"file"!==d(this).attr("type").toLowerCase()||!t.FileReader||!this.files||0===this.files.length)return!0;for(var a=0;a<this.files.length;a++)o.push({file:this.files[a],inputElem:this,instanceConfig:d.extend({},n)})})),e(),this;function e(){if(0!==o.length){var t,n,a,f,p=o[0];if(J(i.before)){var b=i.before(p.file,p.inputElem);if("object"==typeof b){if("abort"===b.action)return t="AbortError",n=p.file,a=p.inputElem,f=b.reason,void(J(i.error)&&i.error({name:t},n,a,f));if("skip"===b.action)return void h2();"object"==typeof b.config&&(p.instanceConfig=d.extend(p.instanceConfig,b.config))}else if("skip"===b)return void h2()}var S=p.instanceConfig.complete;p.instanceConfig.complete=function(t){J(S)&&S(t,p.file,p.inputElem),h2()},u.parse(p.file,p.instanceConfig)}else J(i.complete)&&i.complete()}function h2(){o.splice(0,1),e()}}}function h(i){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var i=w(t);i.chunkSize=parseInt(i.chunkSize),t.step||t.chunk||(i.chunkSize=null),this._handle=new r(i),(this._handle.streamer=this)._config=i}.call(this,i),this.parseChunk=function(i,o){if(this.isFirstChunk&&J(this._config.beforeFirstChunk)){var a=this._config.beforeFirstChunk(i);void 0!==a&&(i=a)}this.isFirstChunk=!1,this._halted=!1;var d=this._partialLine+i;this._partialLine="";var f=this._handle.parse(d,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var p=f.meta.cursor;this._finished||(this._partialLine=d.substring(p-this._baseIndex),this._baseIndex=p),f&&f.data&&(this._rowCount+=f.data.length);var b=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(n)t.postMessage({results:f,workerId:u.WORKER_ID,finished:b});else if(J(this._config.chunk)&&!o){if(this._config.chunk(f,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);f=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(f.data),this._completeResults.errors=this._completeResults.errors.concat(f.errors),this._completeResults.meta=f.meta),this._completed||!b||!J(this._config.complete)||f&&f.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),b||f&&f.meta.paused||this._nextChunk(),f}this._halted=!0},this._sendError=function(i){J(this._config.error)?this._config.error(i):n&&this._config.error&&t.postMessage({workerId:u.WORKER_ID,error:i,finished:!1})}}function l(t){var n;(t=t||{}).chunkSize||(t.chunkSize=u.RemoteChunkSize),h.call(this,t),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(n=new XMLHttpRequest,this._config.withCredentials&&(n.withCredentials=this._config.withCredentials),i||(n.onload=v(this._chunkLoaded,this),n.onerror=v(this._chunkError,this)),n.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var o in t)n.setRequestHeader(o,t[o])}if(this._config.chunkSize){var a=this._start+this._config.chunkSize-1;n.setRequestHeader("Range","bytes="+this._start+"-"+a)}try{n.send(this._config.downloadRequestBody)}catch(u){this._chunkError(u.message)}i&&0===n.status&&this._chunkError()}},this._chunkLoaded=function(){4===n.readyState&&(n.status<200||400<=n.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:n.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(t){var i=t.getResponseHeader("Content-Range");return null===i?-1:parseInt(i.substring(i.lastIndexOf("/")+1))}(n),this.parseChunk(n.responseText)))},this._chunkError=function(t){var i=n.statusText||t;this._sendError(new Error(i))}}function c(t){var i,n;(t=t||{}).chunkSize||(t.chunkSize=u.LocalChunkSize),h.call(this,t);var o="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,n=t.slice||t.webkitSlice||t.mozSlice,o?((i=new FileReader).onload=v(this._chunkLoaded,this),i.onerror=v(this._chunkError,this)):i=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var a=Math.min(this._start+this._config.chunkSize,this._input.size);t=n.call(t,this._start,a)}var u=i.readAsText(t,this._config.encoding);o||this._chunkLoaded({target:{result:u}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(i.error)}}function p2(t){var i;h.call(this,t=t||{}),this.stream=function(t){return i=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t,n=this._config.chunkSize;return n?(t=i.substring(0,n),i=i.substring(n)):(t=i,i=""),this._finished=!i,this.parseChunk(t)}}}function g(t){h.call(this,t=t||{});var i=[],n=!0,o=!1;this.pause=function(){h.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){h.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){o&&1===i.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),i.length?this.parseChunk(i.shift()):n=!0},this._streamData=v((function(t){try{i.push("string"==typeof t?t:t.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(i.shift()))}catch(o){this._streamError(o)}}),this),this._streamError=v((function(t){this._streamCleanUp(),this._sendError(t)}),this),this._streamEnd=v((function(){this._streamCleanUp(),o=!0,this._streamData("")}),this),this._streamCleanUp=v((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function r(t){var i,n,o,a=Math.pow(2,53),d=-a,f=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,p=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,b=this,S=0,M=0,C=!1,P=!1,R=[],O={data:[],errors:[],meta:{}};if(J(t.step)){var B=t.step;t.step=function(i){if(O=i,_2())g2();else{if(g2(),0===O.data.length)return;S+=i.data.length,t.preview&&S>t.preview?n.abort():(O.data=O.data[0],B(O,b))}}}function y2(i){return"greedy"===t.skipEmptyLines?""===i.join("").trim():1===i.length&&0===i[0].length}function g2(){return O&&o&&(k("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),o=!1),t.skipEmptyLines&&(O.data=O.data.filter((function(t){return!y2(t)}))),_2()&&function(){if(O)if(Array.isArray(O.data[0])){for(var i=0;_2()&&i<O.data.length;i++)O.data[i].forEach(e2);O.data.splice(0,1)}else O.data.forEach(e2);function e2(i,n){J(t.transformHeader)&&(i=t.transformHeader(i,n)),R.push(i)}}(),function(){if(!O||!t.header&&!t.dynamicTyping&&!t.transform)return O;function e2(i,n){var o,a=t.header?{}:[];for(o=0;o<i.length;o++){var u=o,d=i[o];t.header&&(u=o>=R.length?"__parsed_extra":R[o]),t.transform&&(d=t.transform(d,u)),d=v2(u,d),"__parsed_extra"===u?(a[u]=a[u]||[],a[u].push(d)):a[u]=d}return t.header&&(o>R.length?k("FieldMismatch","TooManyFields","Too many fields: expected "+R.length+" fields but parsed "+o,M+n):o<R.length&&k("FieldMismatch","TooFewFields","Too few fields: expected "+R.length+" fields but parsed "+o,M+n)),a}var i=1;return!O.data.length||Array.isArray(O.data[0])?(O.data=O.data.map(e2),i=O.data.length):O.data=e2(O.data,0),t.header&&O.meta&&(O.meta.fields=R),M+=i,O}()}function _2(){return t.header&&0===R.length}function v2(i,n){return o=i,t.dynamicTypingFunction&&void 0===t.dynamicTyping[o]&&(t.dynamicTyping[o]=t.dynamicTypingFunction(o)),!0===(t.dynamicTyping[o]||t.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(function(t){if(f.test(t)){var i=parseFloat(t);if(d<i&&i<a)return!0}return!1}(n)?parseFloat(n):p.test(n)?new Date(n):""===n?null:n):n;var o}function k(t,i,n,o){var a={type:t,code:i,message:n};void 0!==o&&(a.row=o),O.errors.push(a)}this.parse=function(a,d,f){var p=t.quoteChar||'"';if(t.newline||(t.newline=function(t,i){t=t.substring(0,1048576);var n=new RegExp(Q(i)+"([^]*?)"+Q(i),"gm"),o=(t=t.replace(n,"")).split("\r"),a=t.split("\n"),u=1<a.length&&a[0].length<o[0].length;if(1===o.length||u)return"\n";for(var d=0,f=0;f<o.length;f++)"\n"===o[f][0]&&d++;return d>=o.length/2?"\r\n":"\r"}(a,p)),o=!1,t.delimiter)J(t.delimiter)&&(t.delimiter=t.delimiter(a),O.meta.delimiter=t.delimiter);else{var b=function(i,n,o,a,d){var f,p,b,S;d=d||[",","\t","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var M=0;M<d.length;M++){var C=d[M],P=0,R=0,O=0;b=void 0;for(var B=new E({comments:a,delimiter:C,newline:n,preview:10}).parse(i),N=0;N<B.data.length;N++)if(o&&y2(B.data[N]))O++;else{var Y=B.data[N].length;R+=Y,void 0!==b?0<Y&&(P+=Math.abs(Y-b),b=Y):b=Y}0<B.data.length&&(R/=B.data.length-O),(void 0===p||P<=p)&&(void 0===S||S<R)&&1.99<R&&(p=P,f=C,S=R)}return{successful:!!(t.delimiter=f),bestDelimiter:f}}(a,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);b.successful?t.delimiter=b.bestDelimiter:(o=!0,t.delimiter=u.DefaultDelimiter),O.meta.delimiter=t.delimiter}var S=w(t);return t.preview&&t.header&&S.preview++,i=a,n=new E(S),O=n.parse(i,d,f),g2(),C?{meta:{paused:!0}}:O||{meta:{paused:!1}}},this.paused=function(){return C},this.pause=function(){C=!0,n.abort(),i=J(t.chunk)?"":i.substring(n.getCharIndex())},this.resume=function(){b.streamer._halted?(C=!1,b.streamer.parseChunk(i,!0)):setTimeout(b.resume,3)},this.aborted=function(){return P},this.abort=function(){P=!0,n.abort(),O.meta.aborted=!0,J(t.complete)&&t.complete(O),i=""}}function Q(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function E(t){var i,n=(t=t||{}).delimiter,o=t.newline,a=t.comments,d=t.step,f=t.preview,p=t.fastMode,b=i=void 0===t.quoteChar||null===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(b=t.escapeChar),("string"!=typeof n||-1<u.BAD_DELIMITERS.indexOf(n))&&(n=","),a===n)throw new Error("Comment character same as delimiter");!0===a?a="#":("string"!=typeof a||-1<u.BAD_DELIMITERS.indexOf(a))&&(a=!1),"\n"!==o&&"\r"!==o&&"\r\n"!==o&&(o="\n");var S=0,M=!1;this.parse=function(u,C,P){if("string"!=typeof u)throw new Error("Input must be a string");var R=u.length,O=n.length,B=o.length,N=a.length,Y=J(d),X=[],G=[],U=[],V=S=0;if(!u)return L();if(t.header){var z=u.split(o)[0].split(n),W=[],H={},j=!1;for(var q in z){var Z=z[q];J(t.transformHeader)&&(Z=t.transformHeader(Z,q));var K=Z,$=H[Z]||0;0<$&&(j=!0,K=Z+"_"+$),H[Z]=$+1,W.push(K)}if(j){var tt=u.split(o);tt[0]=W.join(n),u=tt.join(o)}}if(p||!1!==p&&-1===u.indexOf(i)){for(var et=u.split(o),it=0;it<et.length;it++){if(U=et[it],S+=U.length,it!==et.length-1)S+=o.length;else if(P)return L();if(!a||U.substring(0,N)!==a){if(Y){if(X=[],I(U.split(n)),F(),M)return L()}else I(U.split(n));if(f&&f<=it)return X=X.slice(0,f),L(!0)}}return L()}for(var nt=u.indexOf(n,S),st=u.indexOf(o,S),rt=new RegExp(Q(b)+Q(i),"g"),ot=u.indexOf(i,S);;)if(u[S]!==i)if(a&&0===U.length&&u.substring(S,S+N)===a){if(-1===st)return L();S=st+B,st=u.indexOf(o,S),nt=u.indexOf(n,S)}else if(-1!==nt&&(nt<st||-1===st))U.push(u.substring(S,nt)),S=nt+O,nt=u.indexOf(n,S);else{if(-1===st)break;if(U.push(u.substring(S,st)),D(st+B),Y&&(F(),M))return L();if(f&&X.length>=f)return L(!0)}else for(ot=S,S++;;){if(-1===(ot=u.indexOf(i,ot+1)))return P||G.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:X.length,index:S}),T();if(ot===R-1)return T(u.substring(S,ot).replace(rt,i));if(i!==b||u[ot+1]!==b){if(i===b||0===ot||u[ot-1]!==b){-1!==nt&&nt<ot+1&&(nt=u.indexOf(n,ot+1)),-1!==st&&st<ot+1&&(st=u.indexOf(o,ot+1));var at=A(-1===st?nt:Math.min(nt,st));if(u.substr(ot+1+at,O)===n){U.push(u.substring(S,ot).replace(rt,i)),u[S=ot+1+at+O]!==i&&(ot=u.indexOf(i,S)),nt=u.indexOf(n,S),st=u.indexOf(o,S);break}var ht=A(st);if(u.substring(ot+1+ht,ot+1+ht+B)===o){if(U.push(u.substring(S,ot).replace(rt,i)),D(ot+1+ht+B),nt=u.indexOf(n,S),ot=u.indexOf(i,S),Y&&(F(),M))return L();if(f&&X.length>=f)return L(!0);break}G.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:X.length,index:S}),ot++}}else ot++}return T();function I(t){X.push(t),V=S}function A(t){var i=0;if(-1!==t){var n=u.substring(ot+1,t);n&&""===n.trim()&&(i=n.length)}return i}function T(t){return P||(void 0===t&&(t=u.substring(S)),U.push(t),S=R,I(U),Y&&F()),L()}function D(t){S=t,I(U),U=[],st=u.indexOf(o,S)}function L(t){return{data:X,errors:G,meta:{delimiter:n,linebreak:o,aborted:M,truncated:!!t,cursor:V+(C||0)}}}function F(){d(L()),X=[],G=[]}},this.abort=function(){M=!0},this.getCharIndex=function(){return S}}function _(t){var i=t.data,n=o[i.workerId],a=!1;if(i.error)n.userError(i.error,i.file);else if(i.results&&i.results.data){var u={abort:function(){a=!0,m(i.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:y,resume:y};if(J(n.userStep)){for(var d=0;d<i.results.data.length&&(n.userStep({data:i.results.data[d],errors:i.results.errors,meta:i.results.meta},u),!a);d++);delete i.results}else J(n.userChunk)&&(n.userChunk(i.results,u,i.file),delete i.results)}i.finished&&!a&&m(i.workerId,i.results)}function m(t,i){var n=o[t];J(n.userComplete)&&n.userComplete(i),n.terminate(),delete o[t]}function y(){throw new Error("Not implemented.")}function w(t){if("object"!=typeof t||null===t)return t;var i=Array.isArray(t)?[]:{};for(var n in t)i[n]=w(t[n]);return i}function v(t,i){return function(){t.apply(i,arguments)}}function J(t){return"function"==typeof t}return n&&(t.onmessage=function(i){var n=i.data;if(void 0===u.WORKER_ID&&n&&(u.WORKER_ID=n.workerId),"string"==typeof n.input)t.postMessage({workerId:u.WORKER_ID,results:u.parse(n.input,n.config),finished:!0});else if(t.File&&n.input instanceof File||n.input instanceof Object){var o=u.parse(n.input,n.config);o&&t.postMessage({workerId:u.WORKER_ID,results:o,finished:!0})}}),(l.prototype=Object.create(h.prototype)).constructor=l,(c.prototype=Object.create(h.prototype)).constructor=c,(p2.prototype=Object.create(p2.prototype)).constructor=p2,(g.prototype=Object.create(h.prototype)).constructor=g,u}();const Cr=Phaser.Utils.Objects.GetValue;class InstMem{constructor(t){this.scenario=t,this.queue=[],this.currentIdx=-1,this.nextIdx=0}resetFromJSON(t){var i=Cr(t,"queue",void 0);return void 0===i?Clear(this.queue):Clone(i,this.queue),this.currentIdx=Cr(t,"curIdx",-1),this.nextIdx=Cr(t,"nextIdx",0),this}clear(){return this.currentIdx=-1,this.nextIdx=0,this.queue.length=0,this}append(t){return this.queue.push(t),this}setNextIndex(t){return void 0===t&&(t=this.currentIdx+1),this.nextIdx=t,this}get(t){return void 0===t&&(t=this.nextIdx),this.currentIdx=t,this.queue[t]}get length(){return this.queue.length}}class BaseCmd{constructor(t,i){this.scenario=t,this.type=i}resetFromJSON(t){}toJSON(){return{}}parse(t,i){return t}run(t){}}var Ar=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,convert=function(t){return"string"!=typeof t||(""===t?t=null:Ar.test(t)?t=parseFloat(t):"false"===t?t=!1:"true"===t&&(t=!0)),t};const Pr=Phaser.Utils.Objects.GetValue;var RunCommands=function(t,i,n){var o,a=Pr(n,"reverse",!1);if(IsArray(t[0]))if(a)for(u=(d=t.length)-1;u>=0;u--)o=RunCommands(t[u],i,n);else for(var u=0,d=t.length;u<d;u++)o=RunCommands(t[u],i,n);else o=RunCommand(t,i,n);return o},RunCommand=function(t,i,n){var o,a=Pr(n,"argsConvert",void 0),u=Pr(n,"argsConvertScope",void 0),d=t[0];if(_r=function(t,i,n,o){void 0===n&&(n=0),void 0===o&&(o=i.length),t.length=o-n;for(var a=0,u=t.length;a<u;a++)t[a]=i[a+n];return t}(_r,t,1),a){!0===a&&(a=convert,u=void 0);for(var f=0,p=_r.length;f<p;f++)_r[f]=u?a.call(u,_r[f],t):a(_r[f],t)}return"string"==typeof d?null==(o=i[d])&&(o=Pr(i,d,null)):o=d,o.apply(i,_r)},_r=[];const Rr=Phaser.Utils.Array.SpliceOne;class CustomCmd extends BaseCmd{constructor(t){super(t,"-"),this.task=void 0}resetFromJSON(t){this.task&&(this.task.off("complete",this.resume,this),this.task=void 0)}parse(t,i){var n=Rr(t,0),o=this.scenario,a=o.argsConvert,u=o.argsConvertScope;if(a){!0===a&&(a=convert,u=void 0);for(var d=1,f=t.length;d<f;d++)t[d]=u?a.call(u,t[d],t):a(t[d],t)}return t=[n,t]}run(t){var i=this.scenario,n=RunCommands(t[1],i.scope);n&&"function"==typeof n.once?(n.once("complete",this.resume,this),this.pause(),this.task=n):this.task=void 0}pause(){this.scenario.pause()}resume(){this.task=void 0;var t=this.scenario;t.resume(),t.runNextCmd()}}class WaitCmd extends BaseCmd{constructor(t){super(t,"wait")}parse(t,i){t.length=2;var n=this.getEventName(t);return isNaN(n)||(t[1]=parseFloat(n)),t}run(t){var i=this.getEventName(t);"number"==typeof i?this.waitTime(i):this.waitEvent(i)}waitTime(t){t>this.scenario.offset?(t-=this.scenario.offset,this.scenario.offset=0,this.scenario.isDebugMode&&this.scenario.log("#WAIT: "+t),this.scenario.wait(t)):this.scenario.offset-=t}waitEvent(t){this.scenario.isDebugMode&&this.scenario.log("#WAIT: "+t),this.scenario.wait(t)}getEventName(t){var i=t[1];return null==i&&(i="",t[1]=i),i}}const Or=Phaser.Utils.Objects.GetValue;class LabelCmd extends BaseCmd{constructor(t){super(t,"label"),this.labels={},this.prevLabel="",this.lastLabel=""}resetFromJSON(t){this.prevLabel=Or(t,"preLabel",""),this.lastLabel=Or(t,"lastLabel","");var i=Or(t,"labels",void 0);void 0===i?Clear(this.labels):Clone(i,this.labels)}toJSON(){return{preLabel:this.prevLabel,lastLabel:this.lastLabel,labels:this.labels}}parse(t,i){t.length=2;var n=this.getLabel(t);return this.addLabel(n,i),t}run(t){var i=this.getLabel(t);this.scenario.isDebugMode&&this.scenario.log("#LABEL: "+i),this.prevLabel=this.lastLabel,this.lastLabel=i;var n=this.scenario;n.emit("labelchange",this.lastLabel,this.prevLabel,n.scope,n)}getLabel(t){var i=t[1];return null==i&&(i="",t[1]=i),i}addLabel(t,i){this.labels[t]=i}getIndex(t){return""!==t&&this.hasLabel(t)?this.labels[t]:0}hasLabel(t){return this.labels.hasOwnProperty(t)}}class ExitCmd extends BaseCmd{constructor(t){super(t,"exit")}parse(t,i){return t.length=1,t}run(t){this.scenario.log("#EXIT"),this.scenario.complete()}}class GotoCmd extends BaseCmd{constructor(t){super(t,"goto")}parse(t,i){return t.length=2,t}run(t){var i=this.getLabel(t);this.scenario.isDebugMode&&this.scenario.log("#GOTO label: "+i),this.scenario.goto(i)}getLabel(t){var i=t[1];return null==i&&(i="",t[1]=i),i}}class IfCmd extends BaseCmd{constructor(t){super(t,"if")}parse(t,i){t.length=4;var n="("+this.getCond(t)+")";return t[1]=new Function("return "+n),t}run(t){var i=this.getCond(t).call(this.scenario.scope),n=i?this.getTrueLabel(t):this.getFalseLabel(t);""!==n&&(this.scenario.isDebugMode&&this.scenario.log("#IF "+i+"- GOTO label: "+n),this.scenario.goto(n))}getCond(t){var i=t[1];return null!=i&&""!==i||(i="true",t[1]=i),i}getTrueLabel(t){var i=t[2];return null==i&&(i="",t[2]=i),i}getFalseLabel(t){var i=t[3];return null==i&&(i="",t[3]=i),i}}const Lr=Phaser.Utils.Objects.GetValue;class CmdHandlers{constructor(t){this.cmds={"-":new CustomCmd(t),wait:new WaitCmd(t),label:new LabelCmd(t),exit:new ExitCmd(t),goto:new GotoCmd(t),if:new IfCmd(t)}}resetFromJSON(t){for(var i in this.cmds)this.cmds[i].resetFromJSON(Lr(t,i,void 0));return this}toJSON(){var t={};for(var i in this.cmds)t[i]=this.cmds[i].toJSON();return t}get(t){return this.cmds[t]}isValidCmdName(t){return this.cmds.hasOwnProperty(t)}}class CSVScenario{constructor(t,i){this.setEventEmitter(GetValue$l(i,"eventEmitter",void 0)),this.scene=t,this.timer=void 0,this.instMem=new InstMem(this),this.cmdHandlers=new CmdHandlers(this),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this._inRunCmdLoop=!1,this.isRunning=GetValue$l(t,"state",!1),this.isPaused=GetValue$l(t,"pause",!1),this.waitEvent=GetValue$l(t,"wait",void 0),this.scope=GetValue$l(t,"scope",void 0),this.timeUnit=GetValue$l(t,"timeUnit",0),this.cmdPrefix=GetValue$l(t,"prefix",Dr),this.argsConvert=GetValue$l(t,"argsConvert",!0),this.argsConvertScope=GetValue$l(t,"argsConvertScope",void 0),this.cmdHandlers.resetFromJSON(GetValue$l(t,"handlers",void 0)),this.instMem.resetFromJSON(GetValue$l(t,"instMem",void 0)),this.delimiter=GetValue$l(t,"delimiter",","),this}toJSON(){return{state:this.isRunning,pause:this.isPaused,wait:this.waitEvent,scope:this.scope,timeUnit:this.timeUnit,prefix:this.cmdPrefix,argsConvert:this.argsConvert,argsConvertScope:this.argsConvertScope,handlers:this.cmdHandlers.toJSON(),instMem:this.instMem.toJSON(),delimiter:this.delimiter}}boot(){this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){this.scene&&(this.destroyEventEmitter(),this.clear(),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0)}destroy(){this.shutdown()}load(t,i,n){return this.clear(),this.timeUnit=GetValue$l(n,"timeUnit",this.timeUnit),"string"==typeof this.timeUnit&&(this.timeUnit=kr[this.timeUnit]),this.cmdPrefix=GetValue$l(n,"prefix",this.cmdPrefix),"string"==typeof this.cmdPrefix&&(this.cmdPrefix=new RegExp(this.cmdPrefix)),this.argsConvert=GetValue$l(n,"argsConvert",this.argsConvert),this.argsConvertScope=GetValue$l(n,"argsConvertScope",this.argsConvertScope),this.scope=i,this.delimiter=GetValue$l(n,"delimiter",this.delimiter),this.append(t),this}clear(){this.stop(),this.instMem.resetFromJSON(),this.cmdHandlers.resetFromJSON()}start(t){this.stop();var i=GetValue$l(t,"label","");return this.offset=GetValue$l(t,"offset",0),this.isDebugMode&&this.log("Start at Label: "+i),!!this.goto(i)&&(this.isRunning=!0,this.runNextCmd(),!0)}getIndex(t){var i=this.getCmdHandler("label").getIndex(t);return null==i&&this.error("Label: "+t+" is not found"),i}goto(t){var i;return null!=(i="string"==typeof t?this.getIndex(t):t)&&(this.instMem.setNextIndex(i),!0)}wait(t){if(this.waitEvent=t,"number"==typeof t){var i=t;1===this.timeUnit&&(i*=1e3),this.timer=this.scene.time.delayedCall(i,this.continue,[t],this)}return this}stop(){return this.isRunning?(this.isRunning=!1,this.isPaused=!1,this.waitEvent=void 0,this.timer&&(this.timer.remove(),this.timer=void 0),this):this}complete(){return this.emit("complete",this.scope,this),this.stop(),this}append(t){var i=Mr.parse(t,{delimiter:this.delimiter}).data;return this.parse(i),this}pause(){return this.isRunning?(this.isPaused||(this.isPaused=!0,this.timer&&(this.timer.paused=!0)),this):this}resume(){return this.isRunning&&this.isPaused?(this.isPaused=!1,this.timer&&(this.timer.paused=!1),this):this}continue(t){return!this.isRunning||this.isPaused||void 0===this.waitEvent||t===this.waitEvent&&(this.timer=void 0,this.waitEvent=void 0,this.runNextCmd()),this}get lastLabel(){return this.cmdHandlers.labelCmd.lastLabel}get previousLabel(){return this.cmdHandlers.labelCmd.preLabel}getCmdHandler(t){return"string"!=typeof t&&(t=t[0]),this.cmdHandlers.get(t)}parse(t){for(var i,n,o=this.cmdPrefix,a=0,u=t.length;a<u;a++)if("-"===(n=(i=t[a])[0]))this.appendCommand(i);else if(isNaN(n))if(o.test(n)){var d=n.match(o);i[0]=d[1].toLowerCase(),this.appendCommand(i)||this.error("Line "+a+": "+JSON.stringify(i)+" is not a valid command")}else this.appendCommand(["wait",n]),i[0]="-",this.appendCommand(i);else{var f=parseFloat(n);f>0&&this.appendCommand(["wait",f]),i[0]="-",this.appendCommand(i)}return this}appendCommand(t){var i=this.getCmdHandler(t);return null!=i&&((t=i.parse(t,this.instMem.length))&&this.instMem.append(t),!0)}runNextCmd(){if(!this._inRunCmdLoop){this.threadId;var t,i=this.instMem;for(this._inRunCmdLoop=!0;this.isRunning&&!this.isPaused&&void 0===this.waitEvent;){if(t=i.get(),i.setNextIndex(),null==t){this.complete();break}this.getCmdHandler(t).run(t)}return this._inRunCmdLoop=!1,this}}log(t){return this.emit("log",t,this.scope,this),this}get isDebugMode(){return this.listenerCount("log")>0}error(t){return this.emit("error",t,this.scope,this),this}}Object.assign(CSVScenario.prototype,Z);const kr={ms:0,s:1,sec:1},Dr=/^#([a-zA-Z]+)/;class CSVScenarioPlugin extends Phaser.Plugins.BasePlugin{constructor(t){super(t)}start(){this.game.events.on("destroy",this.destroy,this)}add(t,i){return new CSVScenario(t,i)}}window.SpinePlugin=function(t){var i={};function __webpack_require__(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,__webpack_require__),o.l=!0,o.exports}return __webpack_require__.m=t,__webpack_require__.c=i,__webpack_require__.d=function(t,i,n){__webpack_require__.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(t,i){if(1&i&&(t=__webpack_require__(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var o in t)__webpack_require__.d(n,o,function(i){return t[i]}.bind(null,o));return n},__webpack_require__.n=function(t){var i=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(i,"a",i),i},__webpack_require__.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=63)}([function(t,i){function getProperty2(t,i,n){var o=n?t[i]:Object.getOwnPropertyDescriptor(t,i);return!n&&o.value&&"object"==typeof o.value&&(o=o.value),!(!o||!function hasGetterOrSetter2(t){return!!t.get&&"function"==typeof t.get||!!t.set&&"function"==typeof t.set}(o))&&(void 0===o.enumerable&&(o.enumerable=!0),void 0===o.configurable&&(o.configurable=!0),o)}function hasNonConfigurable2(t,i){var n=Object.getOwnPropertyDescriptor(t,i);return!!n&&(n.value&&"object"==typeof n.value&&(n=n.value),!1===n.configurable)}function extend2(t,i,n,o){for(var a in i)if(i.hasOwnProperty(a)){var u=getProperty2(i,a,n);if(!1!==u){if(hasNonConfigurable2((o||t).prototype,a)){if(Class2.ignoreFinals)continue;throw new Error("cannot override final property '"+a+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,a,u)}else t.prototype[a]=i[a]}}function mixin2(t,i){if(i){Array.isArray(i)||(i=[i]);for(var n=0;n<i.length;n++)extend2(t,i[n].prototype||i[n])}}function Class2(t){var i,n;if(t||(t={}),t.initialize){if("function"!=typeof t.initialize)throw new Error("initialize must be a function");i=t.initialize,delete t.initialize}else if(t.Extends){var o=t.Extends;i=function(){o.apply(this,arguments)}}else i=function(){};t.Extends?(i.prototype=Object.create(t.Extends.prototype),i.prototype.constructor=i,n=t.Extends,delete t.Extends):i.prototype.constructor=i;var a=null;return t.Mixins&&(a=t.Mixins,delete t.Mixins),mixin2(i,a),extend2(i,t,!0,n),i}Class2.extend=extend2,Class2.mixin=mixin2,Class2.ignoreFinals=!1,t.exports=Class2},function(t,i){t.exports=function(){}},function(t,i,n){var o=n(0),a=n(32),u=new o({initialize:function Vector24(t,i){this.x=0,this.y=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0):(void 0===i&&(i=t),this.x=t||0,this.y=i||0)},clone:function(){return new u(this.x,this.y)},copy:function(t){return this.x=t.x||0,this.y=t.y||0,this},setFromObject:function(t){return this.x=t.x||0,this.y=t.y||0,this},set:function(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setTo:function(t,i){return this.set(t,i)},setToPolar:function(t,i){return null==i&&(i=1),this.x=Math.cos(t)*i,this.y=Math.sin(t)*i,this},equals:function(t){return this.x===t.x&&this.y===t.y},fuzzyEquals:function(t,i){return a(this.x,t.x,i)&&a(this.y,t.y,i)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},setAngle:function(t){return this.setToPolar(t,this.length())},add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(t){var i=t.x-this.x,n=t.y-this.y;return Math.sqrt(i*i+n*n)},distanceSq:function(t){var i=t.x-this.x,n=t.y-this.y;return i*i+n*n},length:function(){var t=this.x,i=this.y;return Math.sqrt(t*t+i*i)},setLength:function(t){return this.normalize().scale(t)},lengthSq:function(){var t=this.x,i=this.y;return t*t+i*i},normalize:function(){var t=this.x,i=this.y,n=t*t+i*i;return n>0&&(n=1/Math.sqrt(n),this.x=t*n,this.y=i*n),this},normalizeRightHand:function(){var t=this.x;return this.x=-1*this.y,this.y=t,this},normalizeLeftHand:function(){var t=this.x;return this.x=this.y,this.y=-1*t,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lerp:function(t,i){void 0===i&&(i=0);var n=this.x,o=this.y;return this.x=n+i*(t.x-n),this.y=o+i*(t.y-o),this},transformMat3:function(t){var i=this.x,n=this.y,o=t.val;return this.x=o[0]*i+o[3]*n+o[6],this.y=o[1]*i+o[4]*n+o[7],this},transformMat4:function(t){var i=this.x,n=this.y,o=t.val;return this.x=o[0]*i+o[4]*n+o[12],this.y=o[1]*i+o[5]*n+o[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(t){var i=this.length();return i&&i>t&&this.scale(t/i),this},reflect:function(t){return t=t.clone().normalize(),this.subtract(t.scale(2*this.dot(t)))},mirror:function(t){return this.reflect(t).negate()},rotate:function(t){var i=Math.cos(t),n=Math.sin(t);return this.set(i*this.x-n*this.y,n*this.x+i*this.y)}});u.ZERO=new u,u.RIGHT=new u(1,0),u.LEFT=new u(-1,0),u.UP=new u(0,-1),u.DOWN=new u(0,1),u.ONE=new u(1,1),t.exports=u},function(t,i){t.exports=function(t,i,n){return Math.max(i,Math.min(n,t))}},function(t,i){var n={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};t.exports=n},function(t,i){t.exports=function(t,i,n,o){var a=t.length;if(i<0||i>a||i>=n||n>a||i+n>a){if(o)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},function(t,i){t.exports=function(t,i,n){var o=n-i;return i+((t-i)%o+o)%o}},function(t,i){t.exports=function(t){if("object"!=typeof t||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}return!0}},function(t,i,n){var o=n(4);t.exports=function(t){return t>Math.PI&&(t-=o.PI2),Math.abs(((t+o.TAU)%o.PI2-o.PI2)%o.PI2)}},function(t,i,n){var o=n(4);t.exports=function(t){return t*o.RAD_TO_DEG}},function(t,i){t.exports=function(t,i,n){if(t&&"number"!=typeof t){if(t.hasOwnProperty(i))return t[i];if(-1!==i.indexOf(".")){for(var o=i.split("."),a=t,u=n,d=0;d<o.length;d++){if(!a.hasOwnProperty(o[d])){u=n;break}u=a[o[d]],a=a[o[d]]}return u}return n}return n}},function(t,i){t.exports=function(t,i,n){var o=typeof t;return t&&"number"!==o&&"string"!==o&&t.hasOwnProperty(i)&&void 0!==t[i]?t[i]:n}},function(t,i){t.exports=function(t,i){if(!(i>=t.length)){for(var n=t.length-1,o=t[i],a=i;a<n;a++)t[a]=t[a+1];return t.length=n,o}}},function(t,i,n){var o=n(0),a=n(26),u=new o({initialize:function Point4(t,i){void 0===t&&(t=0),void 0===i&&(i=t),this.type=a.POINT,this.x=t,this.y=i},setTo:function(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.x=t,this.y=i,this}});t.exports=u},function(t,i,n){var o=new(n(0))({initialize:function Vector32(t,i,n){this.x=0,this.y=0,this.z=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=i||0,this.z=n||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clone:function(){return new o(this.x,this.y,this.z)},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this},crossVectors:function(t,i){var n=t.x,o=t.y,a=t.z,u=i.x,d=i.y,f=i.z;return this.x=o*f-a*d,this.y=a*u-n*f,this.z=n*d-o*u,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},set:function(t,i,n){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=i||0,this.z=n||0),this},setFromMatrixPosition:function(t){return this.fromArray(t.val,12)},setFromMatrixColumn:function(t,i){return this.fromArray(t.val,4*i)},fromArray:function(t,i){return void 0===i&&(i=0),this.x=t[i],this.y=t[i+1],this.z=t[i+2],this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addScale:function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(t){var i=t.x-this.x,n=t.y-this.y,o=t.z-this.z||0;return Math.sqrt(i*i+n*n+o*o)},distanceSq:function(t){var i=t.x-this.x,n=t.y-this.y,o=t.z-this.z||0;return i*i+n*n+o*o},length:function(){var t=this.x,i=this.y,n=this.z;return Math.sqrt(t*t+i*i+n*n)},lengthSq:function(){var t=this.x,i=this.y,n=this.z;return t*t+i*i+n*n},normalize:function(){var t=this.x,i=this.y,n=this.z,o=t*t+i*i+n*n;return o>0&&(o=1/Math.sqrt(o),this.x=t*o,this.y=i*o,this.z=n*o),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function(t){var i=this.x,n=this.y,o=this.z,a=t.x,u=t.y,d=t.z;return this.x=n*d-o*u,this.y=o*a-i*d,this.z=i*u-n*a,this},lerp:function(t,i){void 0===i&&(i=0);var n=this.x,o=this.y,a=this.z;return this.x=n+i*(t.x-n),this.y=o+i*(t.y-o),this.z=a+i*(t.z-a),this},applyMatrix3:function(t){var i=this.x,n=this.y,o=this.z,a=t.val;return this.x=a[0]*i+a[3]*n+a[6]*o,this.y=a[1]*i+a[4]*n+a[7]*o,this.z=a[2]*i+a[5]*n+a[8]*o,this},applyMatrix4:function(t){var i=this.x,n=this.y,o=this.z,a=t.val,u=1/(a[3]*i+a[7]*n+a[11]*o+a[15]);return this.x=(a[0]*i+a[4]*n+a[8]*o+a[12])*u,this.y=(a[1]*i+a[5]*n+a[9]*o+a[13])*u,this.z=(a[2]*i+a[6]*n+a[10]*o+a[14])*u,this},transformMat3:function(t){var i=this.x,n=this.y,o=this.z,a=t.val;return this.x=i*a[0]+n*a[3]+o*a[6],this.y=i*a[1]+n*a[4]+o*a[7],this.z=i*a[2]+n*a[5]+o*a[8],this},transformMat4:function(t){var i=this.x,n=this.y,o=this.z,a=t.val;return this.x=a[0]*i+a[4]*n+a[8]*o+a[12],this.y=a[1]*i+a[5]*n+a[9]*o+a[13],this.z=a[2]*i+a[6]*n+a[10]*o+a[14],this},transformCoordinates:function(t){var i=this.x,n=this.y,o=this.z,a=t.val,u=i*a[0]+n*a[4]+o*a[8]+a[12],d=i*a[1]+n*a[5]+o*a[9]+a[13],f=i*a[2]+n*a[6]+o*a[10]+a[14],p=i*a[3]+n*a[7]+o*a[11]+a[15];return this.x=u/p,this.y=d/p,this.z=f/p,this},transformQuat:function(t){var i=this.x,n=this.y,o=this.z,a=t.x,u=t.y,d=t.z,f=t.w,p=f*i+u*o-d*n,b=f*n+d*i-a*o,S=f*o+a*n-u*i,M=-a*i-u*n-d*o;return this.x=p*f+M*-a+b*-d-S*-u,this.y=b*f+M*-u+S*-a-p*-d,this.z=S*f+M*-d+p*-u-b*-a,this},project:function(t){var i=this.x,n=this.y,o=this.z,a=t.val,u=a[0],d=a[1],f=a[2],p=a[3],b=a[4],S=a[5],M=a[6],C=a[7],P=a[8],R=a[9],O=a[10],B=a[11],N=a[12],Y=a[13],X=a[14],G=1/(i*p+n*C+o*B+a[15]);return this.x=(i*u+n*b+o*P+N)*G,this.y=(i*d+n*S+o*R+Y)*G,this.z=(i*f+n*M+o*O+X)*G,this},projectViewMatrix:function(t,i){return this.applyMatrix4(t).applyMatrix4(i)},unprojectViewMatrix:function(t,i){return this.applyMatrix4(t).applyMatrix4(i)},unproject:function(t,i){var n=t.x,o=t.y,a=t.z,u=t.w,d=this.x-n,f=u-this.y-1-o,p=this.z;return this.x=2*d/a-1,this.y=2*f/u-1,this.z=2*p-1,this.project(i)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});o.ZERO=new o,o.RIGHT=new o(1,0,0),o.LEFT=new o(-1,0,0),o.UP=new o(0,-1,0),o.DOWN=new o(0,1,0),o.FORWARD=new o(0,0,1),o.BACK=new o(0,0,-1),o.ONE=new o(1,1,1),t.exports=o},function(t,i){t.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},function(t,i,n){var o=n(24),a=n(57);t.exports=function(t,i){if(void 0===i&&(i=90),!o(t))return null;if("string"!=typeof i&&(i=(i%360+360)%360),90===i||-270===i||"rotateLeft"===i)(t=a(t)).reverse();else if(-90===i||270===i||"rotateRight"===i)t.reverse(),t=a(t);else if(180===Math.abs(i)||"rotate180"===i){for(var n=0;n<t.length;n++)t[n].reverse();t.reverse()}return t}},function(t,i){t.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(t,i){t.exports=function(t,i){return Math.random()*(i-t)+t}},function(t,i,n){var o=n(4);t.exports=function(t){return t*o.DEG_TO_RAD}},function(t,i,n){var o=n(0),a=n(14),u=1e-6,d=new o({initialize:function Matrix42(t){this.val=new Float32Array(16),t?this.copy(t):this.identity()},clone:function(){return new d(this)},set:function(t){return this.copy(t)},setValues:function(t,i,n,o,a,u,d,f,p,b,S,M,C,P,R,O){var B=this.val;return B[0]=t,B[1]=i,B[2]=n,B[3]=o,B[4]=a,B[5]=u,B[6]=d,B[7]=f,B[8]=p,B[9]=b,B[10]=S,B[11]=M,B[12]=C,B[13]=P,B[14]=R,B[15]=O,this},copy:function(t){var i=t.val;return this.setValues(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9],i[10],i[11],i[12],i[13],i[14],i[15])},fromArray:function(t){return this.setValues(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(t,i,n){var o=f.fromQuat(n).val,a=i.x,u=i.y,d=i.z;return this.setValues(o[0]*a,o[1]*a,o[2]*a,0,o[4]*u,o[5]*u,o[6]*u,0,o[8]*d,o[9]*d,o[10]*d,0,t.x,t.y,t.z,1)},xyz:function(t,i,n){this.identity();var o=this.val;return o[12]=t,o[13]=i,o[14]=n,this},scaling:function(t,i,n){this.zero();var o=this.val;return o[0]=t,o[5]=i,o[10]=n,o[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var t=this.val,i=t[1],n=t[2],o=t[3],a=t[6],u=t[7],d=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=i,t[6]=t[9],t[7]=t[13],t[8]=n,t[9]=a,t[11]=t[14],t[12]=o,t[13]=u,t[14]=d,this},getInverse:function(t){return this.copy(t),this.invert()},invert:function(){var t=this.val,i=t[0],n=t[1],o=t[2],a=t[3],u=t[4],d=t[5],f=t[6],p=t[7],b=t[8],S=t[9],M=t[10],C=t[11],P=t[12],R=t[13],O=t[14],B=t[15],N=i*d-n*u,Y=i*f-o*u,X=i*p-a*u,G=n*f-o*d,U=n*p-a*d,V=o*p-a*f,z=b*R-S*P,W=b*O-M*P,H=b*B-C*P,j=S*O-M*R,q=S*B-C*R,Z=M*B-C*O,K=N*Z-Y*q+X*j+G*H-U*W+V*z;return K?(K=1/K,this.setValues((d*Z-f*q+p*j)*K,(o*q-n*Z-a*j)*K,(R*V-O*U+B*G)*K,(M*U-S*V-C*G)*K,(f*H-u*Z-p*W)*K,(i*Z-o*H+a*W)*K,(O*X-P*V-B*Y)*K,(b*V-M*X+C*Y)*K,(u*q-d*H+p*z)*K,(n*H-i*q-a*z)*K,(P*U-R*X+B*N)*K,(S*X-b*U-C*N)*K,(d*W-u*j-f*z)*K,(i*j-n*W+o*z)*K,(R*Y-P*G-O*N)*K,(b*G-S*Y+M*N)*K)):this},adjoint:function(){var t=this.val,i=t[0],n=t[1],o=t[2],a=t[3],u=t[4],d=t[5],f=t[6],p=t[7],b=t[8],S=t[9],M=t[10],C=t[11],P=t[12],R=t[13],O=t[14],B=t[15];return this.setValues(d*(M*B-C*O)-S*(f*B-p*O)+R*(f*C-p*M),-(n*(M*B-C*O)-S*(o*B-a*O)+R*(o*C-a*M)),n*(f*B-p*O)-d*(o*B-a*O)+R*(o*p-a*f),-(n*(f*C-p*M)-d*(o*C-a*M)+S*(o*p-a*f)),-(u*(M*B-C*O)-b*(f*B-p*O)+P*(f*C-p*M)),i*(M*B-C*O)-b*(o*B-a*O)+P*(o*C-a*M),-(i*(f*B-p*O)-u*(o*B-a*O)+P*(o*p-a*f)),i*(f*C-p*M)-u*(o*C-a*M)+b*(o*p-a*f),u*(S*B-C*R)-b*(d*B-p*R)+P*(d*C-p*S),-(i*(S*B-C*R)-b*(n*B-a*R)+P*(n*C-a*S)),i*(d*B-p*R)-u*(n*B-a*R)+P*(n*p-a*d),-(i*(d*C-p*S)-u*(n*C-a*S)+b*(n*p-a*d)),-(u*(S*O-M*R)-b*(d*O-f*R)+P*(d*M-f*S)),i*(S*O-M*R)-b*(n*O-o*R)+P*(n*M-o*S),-(i*(d*O-f*R)-u*(n*O-o*R)+P*(n*f-o*d)),i*(d*M-f*S)-u*(n*M-o*S)+b*(n*f-o*d))},determinant:function(){var t=this.val,i=t[0],n=t[1],o=t[2],a=t[3],u=t[4],d=t[5],f=t[6],p=t[7],b=t[8],S=t[9],M=t[10],C=t[11],P=t[12],R=t[13],O=t[14],B=t[15];return(i*d-n*u)*(M*B-C*O)-(i*f-o*u)*(S*B-C*R)+(i*p-a*u)*(S*O-M*R)+(n*f-o*d)*(b*B-C*P)-(n*p-a*d)*(b*O-M*P)+(o*p-a*f)*(b*R-S*P)},multiply:function(t){var i=this.val,n=i[0],o=i[1],a=i[2],u=i[3],d=i[4],f=i[5],p=i[6],b=i[7],S=i[8],M=i[9],C=i[10],P=i[11],R=i[12],O=i[13],B=i[14],N=i[15],Y=t.val,X=Y[0],G=Y[1],U=Y[2],V=Y[3];return i[0]=X*n+G*d+U*S+V*R,i[1]=X*o+G*f+U*M+V*O,i[2]=X*a+G*p+U*C+V*B,i[3]=X*u+G*b+U*P+V*N,X=Y[4],G=Y[5],U=Y[6],V=Y[7],i[4]=X*n+G*d+U*S+V*R,i[5]=X*o+G*f+U*M+V*O,i[6]=X*a+G*p+U*C+V*B,i[7]=X*u+G*b+U*P+V*N,X=Y[8],G=Y[9],U=Y[10],V=Y[11],i[8]=X*n+G*d+U*S+V*R,i[9]=X*o+G*f+U*M+V*O,i[10]=X*a+G*p+U*C+V*B,i[11]=X*u+G*b+U*P+V*N,X=Y[12],G=Y[13],U=Y[14],V=Y[15],i[12]=X*n+G*d+U*S+V*R,i[13]=X*o+G*f+U*M+V*O,i[14]=X*a+G*p+U*C+V*B,i[15]=X*u+G*b+U*P+V*N,this},multiplyLocal:function(t){var i=this.val,n=t.val;return this.setValues(i[0]*n[0]+i[1]*n[4]+i[2]*n[8]+i[3]*n[12],i[0]*n[1]+i[1]*n[5]+i[2]*n[9]+i[3]*n[13],i[0]*n[2]+i[1]*n[6]+i[2]*n[10]+i[3]*n[14],i[0]*n[3]+i[1]*n[7]+i[2]*n[11]+i[3]*n[15],i[4]*n[0]+i[5]*n[4]+i[6]*n[8]+i[7]*n[12],i[4]*n[1]+i[5]*n[5]+i[6]*n[9]+i[7]*n[13],i[4]*n[2]+i[5]*n[6]+i[6]*n[10]+i[7]*n[14],i[4]*n[3]+i[5]*n[7]+i[6]*n[11]+i[7]*n[15],i[8]*n[0]+i[9]*n[4]+i[10]*n[8]+i[11]*n[12],i[8]*n[1]+i[9]*n[5]+i[10]*n[9]+i[11]*n[13],i[8]*n[2]+i[9]*n[6]+i[10]*n[10]+i[11]*n[14],i[8]*n[3]+i[9]*n[7]+i[10]*n[11]+i[11]*n[15],i[12]*n[0]+i[13]*n[4]+i[14]*n[8]+i[15]*n[12],i[12]*n[1]+i[13]*n[5]+i[14]*n[9]+i[15]*n[13],i[12]*n[2]+i[13]*n[6]+i[14]*n[10]+i[15]*n[14],i[12]*n[3]+i[13]*n[7]+i[14]*n[11]+i[15]*n[15])},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,i){var n=t.val,o=i.val,a=n[0],u=n[4],d=n[8],f=n[12],p=n[1],b=n[5],S=n[9],M=n[13],C=n[2],P=n[6],R=n[10],O=n[14],B=n[3],N=n[7],Y=n[11],X=n[15],G=o[0],U=o[4],V=o[8],z=o[12],W=o[1],H=o[5],j=o[9],q=o[13],Z=o[2],K=o[6],$=o[10],tt=o[14],et=o[3],it=o[7],nt=o[11],st=o[15];return this.setValues(a*G+u*W+d*Z+f*et,p*G+b*W+S*Z+M*et,C*G+P*W+R*Z+O*et,B*G+N*W+Y*Z+X*et,a*U+u*H+d*K+f*it,p*U+b*H+S*K+M*it,C*U+P*H+R*K+O*it,B*U+N*H+Y*K+X*it,a*V+u*j+d*$+f*nt,p*V+b*j+S*$+M*nt,C*V+P*j+R*$+O*nt,B*V+N*j+Y*$+X*nt,a*z+u*q+d*tt+f*st,p*z+b*q+S*tt+M*st,C*z+P*q+R*tt+O*st,B*z+N*q+Y*tt+X*st)},translate:function(t){return this.translateXYZ(t.x,t.y,t.z)},translateXYZ:function(t,i,n){var o=this.val;return o[12]=o[0]*t+o[4]*i+o[8]*n+o[12],o[13]=o[1]*t+o[5]*i+o[9]*n+o[13],o[14]=o[2]*t+o[6]*i+o[10]*n+o[14],o[15]=o[3]*t+o[7]*i+o[11]*n+o[15],this},scale:function(t){return this.scaleXYZ(t.x,t.y,t.z)},scaleXYZ:function(t,i,n){var o=this.val;return o[0]=o[0]*t,o[1]=o[1]*t,o[2]=o[2]*t,o[3]=o[3]*t,o[4]=o[4]*i,o[5]=o[5]*i,o[6]=o[6]*i,o[7]=o[7]*i,o[8]=o[8]*n,o[9]=o[9]*n,o[10]=o[10]*n,o[11]=o[11]*n,this},makeRotationAxis:function(t,i){var n=Math.cos(i),o=Math.sin(i),a=1-n,u=t.x,d=t.y,f=t.z,p=a*u,b=a*d;return this.setValues(p*u+n,p*d-o*f,p*f+o*d,0,p*d+o*f,b*d+n,b*f-o*u,0,p*f-o*d,b*f+o*u,a*f*f+n,0,0,0,0,1)},rotate:function(t,i){var n=this.val,o=i.x,a=i.y,d=i.z,f=Math.sqrt(o*o+a*a+d*d);if(Math.abs(f)<u)return this;o*=f=1/f,a*=f,d*=f;var p=Math.sin(t),b=Math.cos(t),S=1-b,M=n[0],C=n[1],P=n[2],R=n[3],O=n[4],B=n[5],N=n[6],Y=n[7],X=n[8],G=n[9],U=n[10],V=n[11],z=n[12],W=n[13],H=n[14],j=n[15],q=o*o*S+b,Z=a*o*S+d*p,K=d*o*S-a*p,$=o*a*S-d*p,tt=a*a*S+b,et=d*a*S+o*p,it=o*d*S+a*p,nt=a*d*S-o*p,st=d*d*S+b;return this.setValues(M*q+O*Z+X*K,C*q+B*Z+G*K,P*q+N*Z+U*K,R*q+Y*Z+V*K,M*$+O*tt+X*et,C*$+B*tt+G*et,P*$+N*tt+U*et,R*$+Y*tt+V*et,M*it+O*nt+X*st,C*it+B*nt+G*st,P*it+N*nt+U*st,R*it+Y*nt+V*st,z,W,H,j)},rotateX:function(t){var i=this.val,n=Math.sin(t),o=Math.cos(t),a=i[4],u=i[5],d=i[6],f=i[7],p=i[8],b=i[9],S=i[10],M=i[11];return i[4]=a*o+p*n,i[5]=u*o+b*n,i[6]=d*o+S*n,i[7]=f*o+M*n,i[8]=p*o-a*n,i[9]=b*o-u*n,i[10]=S*o-d*n,i[11]=M*o-f*n,this},rotateY:function(t){var i=this.val,n=Math.sin(t),o=Math.cos(t),a=i[0],u=i[1],d=i[2],f=i[3],p=i[8],b=i[9],S=i[10],M=i[11];return i[0]=a*o-p*n,i[1]=u*o-b*n,i[2]=d*o-S*n,i[3]=f*o-M*n,i[8]=a*n+p*o,i[9]=u*n+b*o,i[10]=d*n+S*o,i[11]=f*n+M*o,this},rotateZ:function(t){var i=this.val,n=Math.sin(t),o=Math.cos(t),a=i[0],u=i[1],d=i[2],f=i[3],p=i[4],b=i[5],S=i[6],M=i[7];return i[0]=a*o+p*n,i[1]=u*o+b*n,i[2]=d*o+S*n,i[3]=f*o+M*n,i[4]=p*o-a*n,i[5]=b*o-u*n,i[6]=S*o-d*n,i[7]=M*o-f*n,this},fromRotationTranslation:function(t,i){var n=t.x,o=t.y,a=t.z,u=t.w,d=n+n,f=o+o,p=a+a,b=n*d,S=n*f,M=n*p,C=o*f,P=o*p,R=a*p,O=u*d,B=u*f,N=u*p;return this.setValues(1-(C+R),S+N,M-B,0,S-N,1-(b+R),P+O,0,M+B,P-O,1-(b+C),0,i.x,i.y,i.z,1)},fromQuat:function(t){var i=t.x,n=t.y,o=t.z,a=t.w,u=i+i,d=n+n,f=o+o,p=i*u,b=i*d,S=i*f,M=n*d,C=n*f,P=o*f,R=a*u,O=a*d,B=a*f;return this.setValues(1-(M+P),b+B,S-O,0,b-B,1-(p+P),C+R,0,S+O,C-R,1-(p+M),0,0,0,0,1)},frustum:function(t,i,n,o,a,u){var d=1/(i-t),f=1/(o-n),p=1/(a-u);return this.setValues(2*a*d,0,0,0,0,2*a*f,0,0,(i+t)*d,(o+n)*f,(u+a)*p,-1,0,0,u*a*2*p,0)},perspective:function(t,i,n,o){var a=1/Math.tan(t/2),u=1/(n-o);return this.setValues(a/i,0,0,0,0,a,0,0,0,0,(o+n)*u,-1,0,0,2*o*n*u,0)},perspectiveLH:function(t,i,n,o){return this.setValues(2*n/t,0,0,0,0,2*n/i,0,0,0,0,-o/(n-o),1,0,0,n*o/(n-o),0)},ortho:function(t,i,n,o,a,u){var d=t-i,f=n-o,p=a-u;return d=0===d?d:1/d,f=0===f?f:1/f,p=0===p?p:1/p,this.setValues(-2*d,0,0,0,0,-2*f,0,0,0,0,2*p,0,(t+i)*d,(o+n)*f,(u+a)*p,1)},lookAtRH:function(t,i,n){var o=this.val;return M.subVectors(t,i),0===M.getLengthSquared()&&(M.z=1),M.normalize(),b.crossVectors(n,M),0===b.getLengthSquared()&&(1===Math.abs(n.z)?M.x+=1e-4:M.z+=1e-4,M.normalize(),b.crossVectors(n,M)),b.normalize(),S.crossVectors(M,b),o[0]=b.x,o[1]=b.y,o[2]=b.z,o[4]=S.x,o[5]=S.y,o[6]=S.z,o[8]=M.x,o[9]=M.y,o[10]=M.z,this},lookAt:function(t,i,n){var o=t.x,a=t.y,d=t.z,f=n.x,p=n.y,b=n.z,S=i.x,M=i.y,C=i.z;if(Math.abs(o-S)<u&&Math.abs(a-M)<u&&Math.abs(d-C)<u)return this.identity();var P=o-S,R=a-M,O=d-C,B=1/Math.sqrt(P*P+R*R+O*O),N=p*(O*=B)-b*(R*=B),Y=b*(P*=B)-f*O,X=f*R-p*P;(B=Math.sqrt(N*N+Y*Y+X*X))?(N*=B=1/B,Y*=B,X*=B):(N=0,Y=0,X=0);var G=R*X-O*Y,U=O*N-P*X,V=P*Y-R*N;return(B=Math.sqrt(G*G+U*U+V*V))?(G*=B=1/B,U*=B,V*=B):(G=0,U=0,V=0),this.setValues(N,G,P,0,Y,U,R,0,X,V,O,0,-(N*o+Y*a+X*d),-(G*o+U*a+V*d),-(P*o+R*a+O*d),1)},yawPitchRoll:function(t,i,n){this.zero(),f.zero(),p.zero();var o=this.val,a=f.val,u=p.val,d=Math.sin(n),b=Math.cos(n);return o[10]=1,o[15]=1,o[0]=b,o[1]=d,o[4]=-d,o[5]=b,d=Math.sin(i),b=Math.cos(i),a[0]=1,a[15]=1,a[5]=b,a[10]=b,a[9]=-d,a[6]=d,d=Math.sin(t),b=Math.cos(t),u[5]=1,u[15]=1,u[0]=b,u[2]=-d,u[8]=d,u[10]=b,this.multiplyLocal(f),this.multiplyLocal(p),this},setWorldMatrix:function(t,i,n,o,a){return this.yawPitchRoll(t.y,t.x,t.z),f.scaling(n.x,n.y,n.z),p.xyz(i.x,i.y,i.z),this.multiplyLocal(f),this.multiplyLocal(p),o&&this.multiplyLocal(o),a&&this.multiplyLocal(a),this},multiplyToMat4:function(t,i){var n=this.val,o=t.val,a=n[0],u=n[1],d=n[2],f=n[3],p=n[4],b=n[5],S=n[6],M=n[7],C=n[8],P=n[9],R=n[10],O=n[11],B=n[12],N=n[13],Y=n[14],X=n[15],G=o[0],U=o[1],V=o[2],z=o[3],W=o[4],H=o[5],j=o[6],q=o[7],Z=o[8],K=o[9],$=o[10],tt=o[11],et=o[12],it=o[13],nt=o[14],st=o[15];return i.setValues(G*a+U*p+V*C+z*B,U*u+U*b+V*P+z*N,V*d+U*S+V*R+z*Y,z*f+U*M+V*O+z*X,W*a+H*p+j*C+q*B,W*u+H*b+j*P+q*N,W*d+H*S+j*R+q*Y,W*f+H*M+j*O+q*X,Z*a+K*p+$*C+tt*B,Z*u+K*b+$*P+tt*N,Z*d+K*S+$*R+tt*Y,Z*f+K*M+$*O+tt*X,et*a+it*p+nt*C+st*B,et*u+it*b+nt*P+st*N,et*d+it*S+nt*R+st*Y,et*f+it*M+nt*O+st*X)},fromRotationXYTranslation:function(t,i,n){var o=i.x,a=i.y,u=i.z,d=Math.sin(t.x),f=Math.cos(t.x),p=Math.sin(t.y),b=Math.cos(t.y),S=o,M=a,C=u,P=-d,R=0-P*p,O=0-f*p,B=P*b,N=f*b;return n||(S=b*o+p*u,M=R*o+f*a+B*u,C=O*o+d*a+N*u),this.setValues(b,R,O,0,0,f,d,0,p,B,N,0,S,M,C,1)},getMaxScaleOnAxis:function(){var t=this.val,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],o=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(i,n,o))}}),f=new d,p=new d,b=new a,S=new a,M=new a;t.exports=d},function(t,i,n){var o=n(0),a=n(15),u=n(205),d=n(11),f=n(216),p=n(45),b=n(217),S=n(46),M=new o({initialize:function File3(t,i){this.loader=t,this.cache=d(i,"cache",!1),this.type=d(i,"type",!1),this.key=d(i,"key",!1);var n=this.key;if(t.prefix&&""!==t.prefix&&(this.key=t.prefix+n),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var o=d(i,"url");void 0===o?o=t.path+n+"."+d(i,"extension",""):"string"!=typeof o||o.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)||(o=t.path+o),this.url=o,this.src="",this.xhrSettings=S(d(i,"responseType",void 0)),d(i,"xhrSettings",!1)&&(this.xhrSettings=p(this.xhrSettings,d(i,"xhrSettings",{}))),this.xhrLoader=null,this.state="function"==typeof this.url?a.FILE_POPULATED:a.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=d(i,"config",{}),this.multiFile,this.linkFile},setLink:function(t){this.linkFile=t,t.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===a.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=a.FILE_LOADING,this.src=f(this,this.loader.baseURL),0===this.src.indexOf("data:")?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=b(this,this.loader.xhr))},onLoad:function(t,i){var n=t.responseURL&&0===t.responseURL.indexOf("file://")&&0===i.target.status,o=!(i.target&&200!==i.target.status)||n;4===t.readyState&&t.status>=400&&t.status<=599&&(o=!1),this.state=a.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,o)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(t){t.lengthComputable&&(this.bytesLoaded=t.loaded,this.bytesTotal=t.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(u.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=a.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=a.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=a.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(t){void 0===t&&(t=this.data);var i=this.key,n=this.type;this.loader.emit(u.FILE_COMPLETE,i,n,t),this.loader.emit(u.FILE_KEY_COMPLETE+n+"-"+i,i,n,t),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});M.createObjectURL=function(t,i,n){if("function"==typeof URL)t.src=URL.createObjectURL(i);else{var o=new FileReader;o.onload=function(){t.removeAttribute("crossOrigin"),t.src="data:"+(i.type||n)+";base64,"+o.result.split(",")[1]},o.onerror=t.onerror,o.readAsDataURL(i)}},M.revokeObjectURL=function(t){"function"==typeof URL&&URL.revokeObjectURL(t.src)},t.exports=M},function(t,i){var n={},o={install:function(t){for(var i in n)t[i]=n[i]},register:function(t,i){n[t]=i},destroy:function(){n={}}};t.exports=o},function(t,i,n){var o=n(0),a=n(4),u=n(2),d=new o({initialize:function TransformMatrix2(t,i,n,o,a,u){void 0===t&&(t=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=1),void 0===a&&(a=0),void 0===u&&(u=0),this.matrix=new Float32Array([t,i,n,o,a,u,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(t){this.matrix[0]=t}},b:{get:function(){return this.matrix[1]},set:function(t){this.matrix[1]=t}},c:{get:function(){return this.matrix[2]},set:function(t){this.matrix[2]=t}},d:{get:function(){return this.matrix[3]},set:function(t){this.matrix[3]=t}},e:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},f:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},tx:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},ty:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var t=this.matrix,i=t[0],n=t[1],o=t[2],u=t[3];return i||n?n>0?Math.acos(i/this.scaleX):-Math.acos(i/this.scaleX):o||u?a.TAU-(u>0?Math.acos(-o/this.scaleY):-Math.acos(o/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var t=this.matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},translate:function(t,i){var n=this.matrix;return n[4]=n[0]*t+n[2]*i+n[4],n[5]=n[1]*t+n[3]*i+n[5],this},scale:function(t,i){var n=this.matrix;return n[0]*=t,n[1]*=t,n[2]*=i,n[3]*=i,this},rotate:function(t){var i=Math.sin(t),n=Math.cos(t),o=this.matrix,a=o[0],u=o[1],d=o[2],f=o[3];return o[0]=a*n+d*i,o[1]=u*n+f*i,o[2]=a*-i+d*n,o[3]=u*-i+f*n,this},multiply:function(t,i){var n=this.matrix,o=t.matrix,a=n[0],u=n[1],d=n[2],f=n[3],p=n[4],b=n[5],S=o[0],M=o[1],C=o[2],P=o[3],R=o[4],O=o[5],B=void 0===i?this:i;return B.a=S*a+M*d,B.b=S*u+M*f,B.c=C*a+P*d,B.d=C*u+P*f,B.e=R*a+O*d+p,B.f=R*u+O*f+b,B},multiplyWithOffset:function(t,i,n){var o=this.matrix,a=t.matrix,u=o[0],d=o[1],f=o[2],p=o[3],b=i*u+n*f+o[4],S=i*d+n*p+o[5],M=a[0],C=a[1],P=a[2],R=a[3],O=a[4],B=a[5];return o[0]=M*u+C*f,o[1]=M*d+C*p,o[2]=P*u+R*f,o[3]=P*d+R*p,o[4]=O*u+B*f+b,o[5]=O*d+B*p+S,this},transform:function(t,i,n,o,a,u){var d=this.matrix,f=d[0],p=d[1],b=d[2],S=d[3],M=d[4],C=d[5];return d[0]=t*f+i*b,d[1]=t*p+i*S,d[2]=n*f+o*b,d[3]=n*p+o*S,d[4]=a*f+u*b+M,d[5]=a*p+u*S+C,this},transformPoint:function(t,i,n){void 0===n&&(n={x:0,y:0});var o=this.matrix,a=o[0],u=o[1],d=o[2],f=o[3],p=o[4],b=o[5];return n.x=t*a+i*d+p,n.y=t*u+i*f+b,n},invert:function(){var t=this.matrix,i=t[0],n=t[1],o=t[2],a=t[3],u=t[4],d=t[5],f=i*a-n*o;return t[0]=a/f,t[1]=-n/f,t[2]=-o/f,t[3]=i/f,t[4]=(o*d-a*u)/f,t[5]=-(i*d-n*u)/f,this},copyFrom:function(t){var i=this.matrix;return i[0]=t.a,i[1]=t.b,i[2]=t.c,i[3]=t.d,i[4]=t.e,i[5]=t.f,this},copyFromArray:function(t){var i=this.matrix;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],this},copyToContext:function(t){var i=this.matrix;return t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),t},setToContext:function(t){var i=this.matrix;return t.setTransform(i[0],i[1],i[2],i[3],i[4],i[5]),t},copyToArray:function(t){var i=this.matrix;return void 0===t?t=[i[0],i[1],i[2],i[3],i[4],i[5]]:(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5]),t},setTransform:function(t,i,n,o,a,u){var d=this.matrix;return d[0]=t,d[1]=i,d[2]=n,d[3]=o,d[4]=a,d[5]=u,this},decomposeMatrix:function(){var t=this.decomposedMatrix,i=this.matrix,n=i[0],o=i[1],a=i[2],u=i[3],d=n*u-o*a;if(t.translateX=i[4],t.translateY=i[5],n||o){var f=Math.sqrt(n*n+o*o);t.rotation=o>0?Math.acos(n/f):-Math.acos(n/f),t.scaleX=f,t.scaleY=d/f}else if(a||u){var p=Math.sqrt(a*a+u*u);t.rotation=.5*Math.PI-(u>0?Math.acos(-a/p):-Math.acos(a/p)),t.scaleX=d/p,t.scaleY=p}else t.rotation=0,t.scaleX=0,t.scaleY=0;return t},applyITRS:function(t,i,n,o,a){var u=this.matrix,d=Math.sin(n),f=Math.cos(n);return u[4]=t,u[5]=i,u[0]=f*o,u[1]=d*o,u[2]=-d*a,u[3]=f*a,this},applyInverse:function(t,i,n){void 0===n&&(n=new u);var o=this.matrix,a=o[0],d=o[1],f=o[2],p=o[3],b=o[4],S=o[5],M=1/(a*p+f*-d);return n.x=p*M*t+-f*M*i+(S*f-b*p)*M,n.y=a*M*i+-d*M*t+(-S*a+b*d)*M,n},getX:function(t,i){return t*this.a+i*this.c+this.e},getY:function(t,i){return t*this.b+i*this.d+this.f},getXRound:function(t,i,n){var o=this.getX(t,i);return n&&(o=Math.round(o)),o},getYRound:function(t,i,n){var o=this.getY(t,i);return n&&(o=Math.round(o)),o},getCSSMatrix:function(){var t=this.matrix;return"matrix("+t[0]+","+t[1]+","+t[2]+","+t[3]+","+t[4]+","+t[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});t.exports=d},function(t,i){t.exports=function(t){if(!Array.isArray(t)||t.length<2||!Array.isArray(t[0]))return!1;for(var i=t[0].length,n=1;n<t.length;n++)if(t[n].length!==i)return!1;return!0}},function(t,i,n){var o=n(0),a=n(299),u=n(61),d=n(300),f=n(26),p=n(301),b=n(306),S=new o({initialize:function Rectangle4(t,i,n,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),this.type=f.RECTANGLE,this.x=t,this.y=i,this.width=n,this.height=o},contains:function(t,i){return a(this,t,i)},getPoint:function(t,i){return u(this,t,i)},getPoints:function(t,i,n){return d(this,t,i,n)},getRandomPoint:function(t){return b(this,t)},setTo:function(t,i,n,o){return this.x=t,this.y=i,this.width=n,this.height=o,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setSize:function(t,i){return void 0===i&&(i=t),this.width=t,this.height=i,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(t){return void 0===t&&(t=new p),t.setTo(this.x,this.y,this.right,this.y),t},getLineB:function(t){return void 0===t&&(t=new p),t.setTo(this.right,this.y,this.right,this.bottom),t},getLineC:function(t){return void 0===t&&(t=new p),t.setTo(this.right,this.bottom,this.x,this.bottom),t},getLineD:function(t){return void 0===t&&(t=new p),t.setTo(this.x,this.bottom,this.x,this.y),t},left:{get:function(){return this.x},set:function(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}},right:{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x}},top:{get:function(){return this.y},set:function(t){t>=this.bottom?this.height=0:this.height=this.bottom-t,this.y=t}},bottom:{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});t.exports=S},function(t,i){t.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},function(t,i,n){var o=n(7),Extend=function(){var t,i,n,a,u,d,f=arguments[0]||{},p=1,b=arguments.length,S=!1;for("boolean"==typeof f&&(S=f,f=arguments[1]||{},p=2),b===p&&(f=this,--p);p<b;p++)if(null!=(t=arguments[p]))for(i in t)n=f[i],f!==(a=t[i])&&(S&&a&&(o(a)||(u=Array.isArray(a)))?(u?(u=!1,d=n&&Array.isArray(n)?n:[]):d=n&&o(n)?n:{},f[i]=Extend(S,d,a)):void 0!==a&&(f[i]=a));return f};t.exports=Extend},function(t,i){t.exports=function(t,i,n,o){return Math.atan2(o-i,n-t)}},function(t,i){t.exports=function(t){return(t%=2*Math.PI)>=0?t:t+2*Math.PI}},function(t,i,n){var o=n(6);t.exports=function(t){return o(t,-Math.PI,Math.PI)}},function(t,i,n){var o=n(6);t.exports=function(t){return o(t,-180,180)}},function(t,i){t.exports=function(t,i,n){return void 0===n&&(n=1e-4),Math.abs(t-i)<n}},function(t,i,n){var o=n(34);t.exports=function(t,i){return o(t)/o(i)/o(t-i)}},function(t,i){t.exports=function(t){if(0===t)return 1;for(var i=t;--t;)i*=t;return i}},function(t,i){t.exports=function(t,i,n,o,a){var u=.5*(o-i),d=.5*(a-n),f=t*t;return(2*n-2*o+u+d)*(t*f)+(-3*n+3*o-2*u-d)*f+u*t+n}},function(t,i){t.exports=function(t,i,n){return(i-t)*n+t}},function(t,i){t.exports=function(t,i,n){return t<=i?0:t>=n?1:(t=(t-i)/(n-i))*t*(3-2*t)}},function(t,i){t.exports=function(t,i,n){return(t=Math.max(0,Math.min(1,(t-i)/(n-i))))*t*t*(t*(6*t-15)+10)}},function(t,i){t.exports=function(t,i,n,o){var a=Math.cos(o),u=Math.sin(o),d=t.x-i,f=t.y-n;return t.x=d*a-f*u+i,t.y=d*u+f*a+n,t}},function(t,i){t.exports=function(t){return t>0?Math.ceil(t):Math.floor(t)}},function(t,i,n){var o=n(2);t.exports=function(t,i,n,a,u,d,f,p){void 0===p&&(p=new o);var b=Math.sin(u),S=Math.cos(u),M=S*d,C=b*d,P=-b*f,R=S*f,O=1/(M*R+P*-C);return p.x=R*O*t+-P*O*i+(a*P-n*R)*O,p.y=M*O*i+-C*O*t+(-a*M+n*C)*O,p}},function(t,i,n){var o=new(n(0))({initialize:function Matrix32(t){this.val=new Float32Array(9),t?this.copy(t):this.identity()},clone:function(){return new o(this)},set:function(t){return this.copy(t)},copy:function(t){var i=this.val,n=t.val;return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],this},fromMat4:function(t){var i=t.val,n=this.val;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[4],n[4]=i[5],n[5]=i[6],n[6]=i[8],n[7]=i[9],n[8]=i[10],this},fromArray:function(t){var i=this.val;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],this},identity:function(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},transpose:function(){var t=this.val,i=t[1],n=t[2],o=t[5];return t[1]=t[3],t[2]=t[6],t[3]=i,t[5]=t[7],t[6]=n,t[7]=o,this},invert:function(){var t=this.val,i=t[0],n=t[1],o=t[2],a=t[3],u=t[4],d=t[5],f=t[6],p=t[7],b=t[8],S=b*u-d*p,M=-b*a+d*f,C=p*a-u*f,P=i*S+n*M+o*C;return P?(P=1/P,t[0]=S*P,t[1]=(-b*n+o*p)*P,t[2]=(d*n-o*u)*P,t[3]=M*P,t[4]=(b*i-o*f)*P,t[5]=(-d*i+o*a)*P,t[6]=C*P,t[7]=(-p*i+n*f)*P,t[8]=(u*i-n*a)*P,this):null},adjoint:function(){var t=this.val,i=t[0],n=t[1],o=t[2],a=t[3],u=t[4],d=t[5],f=t[6],p=t[7],b=t[8];return t[0]=u*b-d*p,t[1]=o*p-n*b,t[2]=n*d-o*u,t[3]=d*f-a*b,t[4]=i*b-o*f,t[5]=o*a-i*d,t[6]=a*p-u*f,t[7]=n*f-i*p,t[8]=i*u-n*a,this},determinant:function(){var t=this.val,i=t[0],n=t[1],o=t[2],a=t[3],u=t[4],d=t[5],f=t[6],p=t[7],b=t[8];return i*(b*u-d*p)+n*(-b*a+d*f)+o*(p*a-u*f)},multiply:function(t){var i=this.val,n=i[0],o=i[1],a=i[2],u=i[3],d=i[4],f=i[5],p=i[6],b=i[7],S=i[8],M=t.val,C=M[0],P=M[1],R=M[2],O=M[3],B=M[4],N=M[5],Y=M[6],X=M[7],G=M[8];return i[0]=C*n+P*u+R*p,i[1]=C*o+P*d+R*b,i[2]=C*a+P*f+R*S,i[3]=O*n+B*u+N*p,i[4]=O*o+B*d+N*b,i[5]=O*a+B*f+N*S,i[6]=Y*n+X*u+G*p,i[7]=Y*o+X*d+G*b,i[8]=Y*a+X*f+G*S,this},translate:function(t){var i=this.val,n=t.x,o=t.y;return i[6]=n*i[0]+o*i[3]+i[6],i[7]=n*i[1]+o*i[4]+i[7],i[8]=n*i[2]+o*i[5]+i[8],this},rotate:function(t){var i=this.val,n=i[0],o=i[1],a=i[2],u=i[3],d=i[4],f=i[5],p=Math.sin(t),b=Math.cos(t);return i[0]=b*n+p*u,i[1]=b*o+p*d,i[2]=b*a+p*f,i[3]=b*u-p*n,i[4]=b*d-p*o,i[5]=b*f-p*a,this},scale:function(t){var i=this.val,n=t.x,o=t.y;return i[0]=n*i[0],i[1]=n*i[1],i[2]=n*i[2],i[3]=o*i[3],i[4]=o*i[4],i[5]=o*i[5],this},fromQuat:function(t){var i=t.x,n=t.y,o=t.z,a=t.w,u=i+i,d=n+n,f=o+o,p=i*u,b=i*d,S=i*f,M=n*d,C=n*f,P=o*f,R=a*u,O=a*d,B=a*f,N=this.val;return N[0]=1-(M+P),N[3]=b+B,N[6]=S-O,N[1]=b-B,N[4]=1-(p+P),N[7]=C+R,N[2]=S+O,N[5]=C-R,N[8]=1-(p+M),this},normalFromMat4:function(t){var i=t.val,n=this.val,o=i[0],a=i[1],u=i[2],d=i[3],f=i[4],p=i[5],b=i[6],S=i[7],M=i[8],C=i[9],P=i[10],R=i[11],O=i[12],B=i[13],N=i[14],Y=i[15],X=o*p-a*f,G=o*b-u*f,U=o*S-d*f,V=a*b-u*p,z=a*S-d*p,W=u*S-d*b,H=M*B-C*O,j=M*N-P*O,q=M*Y-R*O,Z=C*N-P*B,K=C*Y-R*B,$=P*Y-R*N,tt=X*$-G*K+U*Z+V*q-z*j+W*H;return tt?(tt=1/tt,n[0]=(p*$-b*K+S*Z)*tt,n[1]=(b*q-f*$-S*j)*tt,n[2]=(f*K-p*q+S*H)*tt,n[3]=(u*K-a*$-d*Z)*tt,n[4]=(o*$-u*q+d*j)*tt,n[5]=(a*q-o*K-d*H)*tt,n[6]=(B*W-N*z+Y*V)*tt,n[7]=(N*U-O*W-Y*G)*tt,n[8]=(O*z-B*U+Y*X)*tt,this):null}});t.exports=o},function(t,i,n){var o=n(0),a=n(42),u=n(1),d=n(14),f=1e-6,p=new Int8Array([1,2,0]),b=new Float32Array([0,0,0]),S=new d(1,0,0),M=new d(0,1,0),C=new d,P=new a,R=new o({initialize:function Quaternion2(t,i,n,o){this.onChangeCallback=u,this.set(t,i,n,o)},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback(this)}},copy:function(t){return this.set(t)},set:function(t,i,n,o,a){return void 0===a&&(a=!0),"object"==typeof t?(this._x=t.x||0,this._y=t.y||0,this._z=t.z||0,this._w=t.w||0):(this._x=t||0,this._y=i||0,this._z=n||0,this._w=o||0),a&&this.onChangeCallback(this),this},add:function(t){return this._x+=t.x,this._y+=t.y,this._z+=t.z,this._w+=t.w,this.onChangeCallback(this),this},subtract:function(t){return this._x-=t.x,this._y-=t.y,this._z-=t.z,this._w-=t.w,this.onChangeCallback(this),this},scale:function(t){return this._x*=t,this._y*=t,this._z*=t,this._w*=t,this.onChangeCallback(this),this},length:function(){var t=this.x,i=this.y,n=this.z,o=this.w;return Math.sqrt(t*t+i*i+n*n+o*o)},lengthSq:function(){var t=this.x,i=this.y,n=this.z,o=this.w;return t*t+i*i+n*n+o*o},normalize:function(){var t=this.x,i=this.y,n=this.z,o=this.w,a=t*t+i*i+n*n+o*o;return a>0&&(a=1/Math.sqrt(a),this._x=t*a,this._y=i*a,this._z=n*a,this._w=o*a),this.onChangeCallback(this),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,i){void 0===i&&(i=0);var n=this.x,o=this.y,a=this.z,u=this.w;return this.set(n+i*(t.x-n),o+i*(t.y-o),a+i*(t.z-a),u+i*(t.w-u))},rotationTo:function(t,i){var n=t.x*i.x+t.y*i.y+t.z*i.z;return n<-.999999?(C.copy(S).cross(t).length()<f&&C.copy(M).cross(t),C.normalize(),this.setAxisAngle(C,Math.PI)):n>.999999?this.set(0,0,0,1):(C.copy(t).cross(i),this._x=C.x,this._y=C.y,this._z=C.z,this._w=1+n,this.normalize())},setAxes:function(t,i,n){var o=P.val;return o[0]=i.x,o[3]=i.y,o[6]=i.z,o[1]=n.x,o[4]=n.y,o[7]=n.z,o[2]=-t.x,o[5]=-t.y,o[8]=-t.z,this.fromMat3(P).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(t,i){i*=.5;var n=Math.sin(i);return this.set(n*t.x,n*t.y,n*t.z,Math.cos(i))},multiply:function(t){var i=this.x,n=this.y,o=this.z,a=this.w,u=t.x,d=t.y,f=t.z,p=t.w;return this.set(i*p+a*u+n*f-o*d,n*p+a*d+o*u-i*f,o*p+a*f+i*d-n*u,a*p-i*u-n*d-o*f)},slerp:function(t,i){var n=this.x,o=this.y,a=this.z,u=this.w,d=t.x,p=t.y,b=t.z,S=t.w,M=n*d+o*p+a*b+u*S;M<0&&(M=-M,d=-d,p=-p,b=-b,S=-S);var C=1-i,P=i;if(1-M>f){var R=Math.acos(M),O=Math.sin(R);C=Math.sin((1-i)*R)/O,P=Math.sin(i*R)/O}return this.set(C*n+P*d,C*o+P*p,C*a+P*b,C*u+P*S)},invert:function(){var t=this.x,i=this.y,n=this.z,o=this.w,a=t*t+i*i+n*n+o*o,u=a?1/a:0;return this.set(-t*u,-i*u,-n*u,o*u)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(t){t*=.5;var i=this.x,n=this.y,o=this.z,a=this.w,u=Math.sin(t),d=Math.cos(t);return this.set(i*d+a*u,n*d+o*u,o*d-n*u,a*d-i*u)},rotateY:function(t){t*=.5;var i=this.x,n=this.y,o=this.z,a=this.w,u=Math.sin(t),d=Math.cos(t);return this.set(i*d-o*u,n*d+a*u,o*d+i*u,a*d-n*u)},rotateZ:function(t){t*=.5;var i=this.x,n=this.y,o=this.z,a=this.w,u=Math.sin(t),d=Math.cos(t);return this.set(i*d+n*u,n*d-i*u,o*d+a*u,a*d-o*u)},calculateW:function(){var t=this.x,i=this.y,n=this.z;return this.w=-Math.sqrt(1-t*t-i*i-n*n),this},setFromEuler:function(t,i){var n=t.x/2,o=t.y/2,a=t.z/2,u=Math.cos(n),d=Math.cos(o),f=Math.cos(a),p=Math.sin(n),b=Math.sin(o),S=Math.sin(a);switch(t.order){case"XYZ":this.set(p*d*f+u*b*S,u*b*f-p*d*S,u*d*S+p*b*f,u*d*f-p*b*S,i);break;case"YXZ":this.set(p*d*f+u*b*S,u*b*f-p*d*S,u*d*S-p*b*f,u*d*f+p*b*S,i);break;case"ZXY":this.set(p*d*f-u*b*S,u*b*f+p*d*S,u*d*S+p*b*f,u*d*f-p*b*S,i);break;case"ZYX":this.set(p*d*f-u*b*S,u*b*f+p*d*S,u*d*S-p*b*f,u*d*f+p*b*S,i);break;case"YZX":this.set(p*d*f+u*b*S,u*b*f+p*d*S,u*d*S-p*b*f,u*d*f-p*b*S,i);break;case"XZY":this.set(p*d*f-u*b*S,u*b*f-p*d*S,u*d*S+p*b*f,u*d*f+p*b*S,i)}return this},setFromRotationMatrix:function(t){var i,n=t.val,o=n[0],a=n[4],u=n[8],d=n[1],f=n[5],p=n[9],b=n[2],S=n[6],M=n[10],C=o+f+M;return C>0?(i=.5/Math.sqrt(C+1),this.set((S-p)*i,(u-b)*i,(d-a)*i,.25/i)):o>f&&o>M?(i=2*Math.sqrt(1+o-f-M),this.set(.25*i,(a+d)/i,(u+b)/i,(S-p)/i)):f>M?(i=2*Math.sqrt(1+f-o-M),this.set((a+d)/i,.25*i,(p+S)/i,(u-b)/i)):(i=2*Math.sqrt(1+M-o-f),this.set((u+b)/i,(p+S)/i,.25*i,(d-a)/i)),this},fromMat3:function(t){var i,n=t.val,o=n[0]+n[4]+n[8];if(o>0)i=Math.sqrt(o+1),this.w=.5*i,i=.5/i,this._x=(n[7]-n[5])*i,this._y=(n[2]-n[6])*i,this._z=(n[3]-n[1])*i;else{var a=0;n[4]>n[0]&&(a=1),n[8]>n[3*a+a]&&(a=2);var u=p[a],d=p[u];i=Math.sqrt(n[3*a+a]-n[3*u+u]-n[3*d+d]+1),b[a]=.5*i,i=.5/i,b[u]=(n[3*u+a]+n[3*a+u])*i,b[d]=(n[3*d+a]+n[3*a+d])*i,this._x=b[0],this._y=b[1],this._z=b[2],this._w=(n[3*d+u]-n[3*u+d])*i}return this.onChangeCallback(this),this}});t.exports=R},function(t,i,n){t.exports={ADDED_TO_SCENE:n(180),BOOT:n(181),CREATE:n(182),DESTROY:n(183),PAUSE:n(184),POST_UPDATE:n(185),PRE_RENDER:n(186),PRE_UPDATE:n(187),READY:n(188),REMOVED_FROM_SCENE:n(189),RENDER:n(190),RESUME:n(191),SHUTDOWN:n(192),SLEEP:n(193),START:n(194),TRANSITION_COMPLETE:n(195),TRANSITION_INIT:n(196),TRANSITION_OUT:n(197),TRANSITION_START:n(198),TRANSITION_WAKE:n(199),UPDATE:n(200),WAKE:n(201)}},function(t,i,n){var o=n(27),a=n(46);t.exports=function(t,i){var n=void 0===t?a():o({},t);if(i)for(var u in i)void 0!==i[u]&&(n[u]=i[u]);return n}},function(t,i){t.exports=function(t,i,n,o,a,u){return void 0===t&&(t=""),void 0===i&&(i=!0),void 0===n&&(n=""),void 0===o&&(o=""),void 0===a&&(a=0),void 0===u&&(u=!1),{responseType:t,async:i,user:n,password:o,timeout:a,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:u}}},function(t,i){t.exports={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,i){return this.width=t,this.height=i,this},setDisplaySize:function(t,i){return this.displayWidth=t,this.displayHeight=i,this}}},function(t,i){t.exports={_depth:0,depth:{get:function(){return this._depth},set:function(t){this.displayList&&this.displayList.queueDepthSort(),this._depth=t}},setDepth:function(t){return void 0===t&&(t=0),this.depth=t,this}}},function(t,i){t.exports={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,i){return this.flipX=t,this.flipY=i,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}}},function(t,i){t.exports={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(t,i){return void 0===i&&(i=t),this.scrollFactorX=t,this.scrollFactorY=i,this}}},function(t,i,n){var o=n(4),a=n(23),u=n(41),d=n(30),f=n(31),p=n(2),b={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(t){this._scaleX=t,this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function(){return this._scaleX},set:function(t){this._scaleX=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleY:{get:function(){return this._scaleY},set:function(t){this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},angle:{get:function(){return f(this._rotation*o.RAD_TO_DEG)},set:function(t){this.rotation=f(t)*o.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=d(t)}},setPosition:function(t,i,n,o){return void 0===t&&(t=0),void 0===i&&(i=t),void 0===n&&(n=0),void 0===o&&(o=0),this.x=t,this.y=i,this.z=n,this.w=o,this},copyPosition:function(t){return void 0!==t.x&&(this.x=t.x),void 0!==t.y&&(this.y=t.y),void 0!==t.z&&(this.z=t.z),void 0!==t.w&&(this.w=t.w),this},setRandomPosition:function(t,i,n,o){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=this.scene.sys.scale.width),void 0===o&&(o=this.scene.sys.scale.height),this.x=t+Math.random()*n,this.y=i+Math.random()*o,this},setRotation:function(t){return void 0===t&&(t=0),this.rotation=t,this},setAngle:function(t){return void 0===t&&(t=0),this.angle=t,this},setScale:function(t,i){return void 0===t&&(t=1),void 0===i&&(i=t),this.scaleX=t,this.scaleY=i,this},setX:function(t){return void 0===t&&(t=0),this.x=t,this},setY:function(t){return void 0===t&&(t=0),this.y=t,this},setZ:function(t){return void 0===t&&(t=0),this.z=t,this},setW:function(t){return void 0===t&&(t=0),this.w=t,this},getLocalTransformMatrix:function(t){return void 0===t&&(t=new a),t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(t,i){void 0===t&&(t=new a),void 0===i&&(i=new a);var n=this.parentContainer;if(!n)return this.getLocalTransformMatrix(t);for(t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);n;)i.applyITRS(n.x,n.y,n._rotation,n._scaleX,n._scaleY),i.multiply(t,t),n=n.parentContainer;return t},getLocalPoint:function(t,i,n,o){n||(n=new p),o||(o=this.scene.sys.cameras.main);var a=o.scrollX,d=o.scrollY,f=t+a*this.scrollFactorX-a,b=i+d*this.scrollFactorY-d;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(f,b,n):u(f,b,this.x,this.y,this.rotation,this.scaleX,this.scaleY,n),this._originComponent&&(n.x+=this._displayOriginX,n.y+=this._displayOriginY),n},getParentRotation:function(){for(var t=0,i=this.parentContainer;i;)t+=i.rotation,i=i.parentContainer;return t}};t.exports=b},function(t,i){var n={_visible:!0,visible:{get:function(){return this._visible},set:function(t){t?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function(t){return this.visible=t,this}};t.exports=n},function(t,i,n){var o=n(0),a=n(54),u=n(222),d=n(229),f=n(55),p=n(44),b=new o({Extends:d,initialize:function GameObject2(t,i){d.call(this),this.scene=t,this.displayList=null,this.type=i,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(f.ADDED_TO_SCENE,this.addedToScene,this),this.on(f.REMOVED_FROM_SCENE,this.removedFromScene,this),t.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setState:function(t){return this.state=t,this},setDataEnabled:function(){return this.data||(this.data=new u(this)),this},setData:function(t,i){return this.data||(this.data=new u(this)),this.data.set(t,i),this},incData:function(t,i){return this.data||(this.data=new u(this)),this.data.inc(t,i),this},toggleData:function(t){return this.data||(this.data=new u(this)),this.data.toggle(t),this},getData:function(t){return this.data||(this.data=new u(this)),this.data.get(t)},setInteractive:function(t,i,n){return this.scene.sys.input.enable(this,t,i,n),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return a(this)},willRender:function(t){return!(b.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function(){for(var t=this,i=this.parentContainer,n=[];i&&(n.unshift(i.getIndex(t)),t=i,i.parentContainer);)i=i.parentContainer;return this.displayList?n.unshift(this.displayList.getIndex(t)):n.unshift(this.scene.sys.displayList.getIndex(t)),n},addToDisplayList:function(t){return void 0===t&&(t=this.scene.sys.displayList),this.displayList&&this.displayList!==t&&this.removeFromDisplayList(),t.exists(this)||(this.displayList=t,t.add(this,!0),t.queueDepthSort(),this.emit(f.ADDED_TO_SCENE,this,this.scene),t.events.emit(p.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var t=this.displayList||this.scene.sys.displayList;return t.exists(this)&&(t.remove(this,!0),t.queueDepthSort(),this.displayList=null,this.emit(f.REMOVED_FROM_SCENE,this,this.scene),t.events.emit(p.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(){this.scene&&!this.ignoreDestroy&&(this.preDestroy&&this.preDestroy.call(this),this.emit(f.DESTROY,this),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});b.RENDER_MASK=15,t.exports=b},function(t,i){t.exports=function(t){var i={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(i.textureKey=t.texture.key,i.frameKey=t.frame.name),i}},function(t,i,n){t.exports={ADDED_TO_SCENE:n(230),DESTROY:n(231),REMOVED_FROM_SCENE:n(232),VIDEO_COMPLETE:n(233),VIDEO_CREATED:n(234),VIDEO_ERROR:n(235),VIDEO_LOOP:n(236),VIDEO_PLAY:n(237),VIDEO_SEEKED:n(238),VIDEO_SEEKING:n(239),VIDEO_STOP:n(240),VIDEO_TIMEOUT:n(241),VIDEO_UNLOCKED:n(242)}},function(t,i,n){var o=n(23),a=new o,u=new o,d=new o,f={camera:a,sprite:u,calc:d};t.exports=function(t,i,n){var o=a,p=u,b=d;return p.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),o.copyFrom(i.matrix),n?(o.multiplyWithOffset(n,-i.scrollX*t.scrollFactorX,-i.scrollY*t.scrollFactorY),p.e=t.x,p.f=t.y):(p.e-=i.scrollX*t.scrollFactorX,p.f-=i.scrollY*t.scrollFactorY),o.multiply(p,b),f}},function(t,i){t.exports=function(t){for(var i=t.length,n=t[0].length,o=new Array(n),a=0;a<n;a++){o[a]=new Array(i);for(var u=i-1;u>-1;u--)o[a][u]=t[u][a]}return o}},function(t,i){t.exports=function(t,i){void 0===i&&(i=1);for(var n=null,o=0;o<i;o++)n=t.shift(),t.push(n);return n}},function(t,i){t.exports=function(t,i){void 0===i&&(i=1);for(var n=null,o=0;o<i;o++)n=t.pop(),t.unshift(n);return n}},function(t,i){t.exports=function(t){for(var i=t.length-1;i>0;i--){var n=Math.floor(Math.random()*(i+1)),o=t[i];t[i]=t[n],t[n]=o}return t}},function(t,i,n){var o=n(62),a=n(13);t.exports=function(t,i,n){if(void 0===n&&(n=new a),i<=0||i>=1)return n.x=t.x,n.y=t.y,n;var u=o(t)*i;return i>.5?(u-=t.width+t.height)<=t.width?(n.x=t.right-u,n.y=t.bottom):(n.x=t.x,n.y=t.bottom-(u-t.width)):u<=t.width?(n.x=t.x+u,n.y=t.y):(n.x=t.right,n.y=t.y+(u-t.width)),n}},function(t,i){t.exports=function(t){return 2*(t.width+t.height)}},function(t,i,n){var o,a=n(64),u=n(0),d=n(10),f=n(177),p=n(178),b=n(202),S=n(203),M=n(221),C=n(254),P=n(1),R=new u({Extends:p,initialize:function SpinePlugin2(t,i,n){p.call(this,t,i,n);var o=i.game;this.isWebGL=2===o.config.renderType,this.cache=o.cache.addCustom("spine"),this.spineTextures=o.cache.addCustom("spineTextures"),this.json=o.cache.json,this.textures=o.textures,this.drawDebug=!1,this.gl,this.renderer,this.sceneRenderer,this.skeletonRenderer,this.skeletonDebugRenderer,this.plugin=b,this.temp1,this.temp2,this.isWebGL?(this.runtime=b.webgl,this.renderer=o.renderer,this.gl=o.renderer.gl,this.getAtlas=this.getAtlasWebGL):(this.runtime=b.canvas,this.renderer=o.renderer,this.getAtlas=this.getAtlasCanvas),this.renderer||(this.renderer={width:o.scale.width,height:o.scale.height,preRender:P,postRender:P,render:P,destroy:P});i.registerFileType("spine",this.spineFileCallback,t),i.registerGameObject("spine",(function(t,i,o,a,u){var d=this.scene.sys[n],f=new M(this.scene,d,t,i,o,a,u);return this.displayList.add(f),this.updateList.add(f),f}),(function(t,i){void 0===t&&(t={});var o=d(t,"key",null),u=d(t,"animationName",null),f=d(t,"loop",!1),p=this.scene.sys[n],b=new M(this.scene,p,0,0,o,u,f);void 0!==i&&(t.add=i),a(this.scene,b,t);var S=d(t,"skinName",!1);S&&b.setSkinByName(S);var C=d(t,"slotName",!1),P=d(t,"attachmentName",null);return C&&b.setAttachment(C,P),b.refresh()})),i.registerGameObject("spineContainer",(function(t,i,o){var a=this.scene.sys[n],u=new C(this.scene,a,t,i,o);return this.displayList.add(u),u}),(function(t,i){void 0===t&&(t={});var o=d(t,"x",0),u=d(t,"y",0),f=d(t,"children",null),p=this.scene.sys[n],b=new C(this.scene,p,o,u,f);return void 0!==i&&(t.add=i),a(this.scene,b,t),b}))},boot:function(){this.isWebGL?(this.bootWebGL(),this.onResize(),this.game.scale.on(f,this.onResize,this)):this.bootCanvas();var t=this.systems.events;t.once("shutdown",this.shutdown,this),t.once("destroy",this.destroy,this),this.game.events.once("destroy",this.gameDestroy,this)},bootCanvas:function(){this.skeletonRenderer=new b.canvas.SkeletonRenderer(this.scene.sys.context)},bootWebGL:function(){var setBlendMode=function(t,i){if(t!==this.srcBlend||i!==this.dstBlend){var n=this.context.gl;this.srcBlend=t,this.dstBlend=i,this.isDrawing&&(this.flush(),n.blendFunc(this.srcBlend,this.dstBlend))}};o||((o=new b.webgl.SceneRenderer(this.renderer.canvas,this.gl,!0)).batcher.setBlendMode=setBlendMode,o.shapes.setBlendMode=setBlendMode),this.sceneRenderer=o,this.skeletonRenderer=o.skeletonRenderer,this.skeletonDebugRenderer=o.skeletonDebugRenderer,this.temp1=new b.webgl.Vector3(0,0,0),this.temp2=new b.webgl.Vector3(0,0,0)},getAtlasCanvas:function(t){var i=this.cache.get(t);if(i){var n,o=this.spineTextures;if(o.has(t))n=o.get(t);else{var a=this.textures;n=new b.TextureAtlas(i.data,(function(t){return new b.canvas.CanvasTexture(a.get(i.prefix+t).getSourceImage())}))}return n}console.warn("No atlas data for: "+t)},getAtlasWebGL:function(t){var i=this.cache.get(t);if(i){var n,o=this.spineTextures;if(o.has(t))n=o.get(t);else{var a=this.textures,u=this.sceneRenderer.context.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n=new b.TextureAtlas(i.data,(function(t){return new b.webgl.GLTexture(u,a.get(i.prefix+t).getSourceImage(),!1)}))}return n}console.warn("No atlas data for: "+t)},spineFileCallback:function(t,i,n,o,a,u){var d;if(Array.isArray(t))for(var f=0;f<t.length;f++)d=new S(this,t[f]),this.addFile(d.files);else d=new S(this,t,i,n,o,a,u),this.addFile(d.files);return this},worldToLocal:function(t,i,n,o){var a=this.temp1,u=this.temp2,d=this.sceneRenderer.camera;a.set(t+n.x,i-n.y,0);var f=d.viewportWidth,p=d.viewportHeight;return d.screenToWorld(a,f,p),o&&null!==o.parent?(o.parent.worldToLocal(u.set(a.x-n.x,a.y-n.y,0)),new b.Vector2(u.x,u.y)):o?new b.Vector2(a.x-n.x,a.y-n.y):new b.Vector2(a.x,a.y)},getVector2:function(t,i){return new b.Vector2(t,i)},getVector3:function(t,i,n){return new b.webgl.Vector3(t,i,n)},setDebugBones:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawBones=t,this},setDebugRegionAttachments:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawRegionAttachments=t,this},setDebugBoundingBoxes:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawBoundingBoxes=t,this},setDebugMeshHull:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawMeshHull=t,this},setDebugMeshTriangles:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawMeshTriangles=t,this},setDebugPaths:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawPaths=t,this},setDebugSkeletonXY:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawSkeletonXY=t,this},setDebugClipping:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawClipping=t,this},setEffect:function(t){return this.sceneRenderer.skeletonRenderer.vertexEffect=t,this},createSkeleton:function(t,i){var n=t,o=t,a=-1!==t.indexOf(".");if(a){var u=t.split(".");n=u.shift(),o=u.join(".")}var f=this.cache.get(n),p=this.getAtlas(n);if(!p)return null;this.spineTextures.has(n)||this.spineTextures.add(n,p);var S,M=f.preMultipliedAlpha,C=new b.AtlasAttachmentLoader(p),P=new b.SkeletonJson(C);if(i)S=i;else{var R=this.json.get(n);S=a?d(R,o):R}if(S){var O=P.readSkeletonData(S);return{skeletonData:O,skeleton:new b.Skeleton(O),preMultipliedAlpha:M}}return null},createAnimationState:function(t){var i=new b.AnimationStateData(t.data);return{stateData:i,state:new b.AnimationState(i)}},getBounds:function(t){var i=new b.Vector2,n=new b.Vector2;return t.getBounds(i,n,[]),{offset:i,size:n}},onResize:function(){var t=this.renderer,i=this.sceneRenderer,n=t.width,o=t.height;i.camera.position.x=n/2,i.camera.position.y=o/2,i.camera.setViewport(n,o)},shutdown:function(){this.systems.events.off("shutdown",this.shutdown,this),this.isWebGL&&this.game.scale.off(f,this.onResize,this)},destroy:function(){this.shutdown(),this.game=null,this.scene=null,this.systems=null,this.cache=null,this.spineTextures=null,this.json=null,this.textures=null,this.skeletonRenderer=null,this.gl=null},gameDestroy:function(){this.pluginManager.removeGameObject("spine",!0,!0),this.pluginManager.removeGameObject("spineContainer",!0,!0),this.pluginManager=null,o&&(o.dispose(),o=null),this.sceneRenderer=null}});R.SpineGameObject=M,R.SpineContainer=C,t.exports=R},function(t,i,n){var o=n(17),a=n(65);t.exports=function(t,i,n){i.x=a(n,"x",0),i.y=a(n,"y",0),i.depth=a(n,"depth",0),i.flipX=a(n,"flipX",!1),i.flipY=a(n,"flipY",!1);var u=a(n,"scale",null);"number"==typeof u?i.setScale(u):null!==u&&(i.scaleX=a(u,"x",1),i.scaleY=a(u,"y",1));var d=a(n,"scrollFactor",null);"number"==typeof d?i.setScrollFactor(d):null!==d&&(i.scrollFactorX=a(d,"x",1),i.scrollFactorY=a(d,"y",1)),i.rotation=a(n,"rotation",0);var f=a(n,"angle",null);null!==f&&(i.angle=f),i.alpha=a(n,"alpha",1);var p=a(n,"origin",null);if("number"==typeof p)i.setOrigin(p);else if(null!==p){var b=a(p,"x",.5),S=a(p,"y",.5);i.setOrigin(b,S)}return i.blendMode=a(n,"blendMode",o.NORMAL),i.visible=a(n,"visible",!0),a(n,"add",!0)&&t.sys.displayList.add(i),i.preUpdate&&t.sys.updateList.add(i),i}},function(t,i,n){var o=n(66),a=n(10);t.exports=function(t,i,n){var u=a(t,i,null);if(null===u)return n;if(Array.isArray(u))return o.RND.pick(u);if("object"==typeof u){if(u.hasOwnProperty("randInt"))return o.RND.integerInRange(u.randInt[0],u.randInt[1]);if(u.hasOwnProperty("randFloat"))return o.RND.realInRange(u.randFloat[0],u.randFloat[1])}else if("function"==typeof u)return u(i);return u}},function(t,i,n){var o=n(4),a=n(27),u={Angle:n(67),Distance:n(76),Easing:n(84),Fuzzy:n(129),Interpolation:n(134),Pow2:n(142),Snap:n(146),RandomDataGenerator:n(150),Average:n(151),Bernstein:n(33),Between:n(152),CatmullRom:n(35),CeilTo:n(153),Clamp:n(3),DegToRad:n(19),Difference:n(154),Euler:n(155),Factorial:n(34),FloatBetween:n(18),FloorTo:n(156),FromPercent:n(157),GetSpeed:n(158),IsEven:n(159),IsEvenStrict:n(160),Linear:n(36),MaxAdd:n(161),Median:n(162),MinSub:n(163),Percent:n(164),RadToDeg:n(9),RandomXY:n(165),RandomXYZ:n(166),RandomXYZW:n(167),Rotate:n(168),RotateAround:n(39),RotateAroundDistance:n(169),RotateTo:n(170),RoundAwayFromZero:n(40),RoundTo:n(171),SinCosTableGenerator:n(172),SmootherStep:n(38),SmoothStep:n(37),ToXY:n(173),TransformXY:n(41),Within:n(174),Wrap:n(6),Vector2:n(2),Vector3:n(14),Vector4:n(175),Matrix3:n(42),Matrix4:n(20),Quaternion:n(43),RotateVec3:n(176)};u=a(!1,u,o),t.exports=u},function(t,i,n){t.exports={Between:n(28),BetweenPoints:n(68),BetweenPointsY:n(69),BetweenY:n(70),CounterClockwise:n(8),Normalize:n(29),Random:n(71),RandomDegrees:n(72),Reverse:n(73),RotateTo:n(74),ShortestBetween:n(75),Wrap:n(30),WrapDegrees:n(31)}},function(t,i){t.exports=function(t,i){return Math.atan2(i.y-t.y,i.x-t.x)}},function(t,i){t.exports=function(t,i){return Math.atan2(i.x-t.x,i.y-t.y)}},function(t,i){t.exports=function(t,i,n,o){return Math.atan2(n-t,o-i)}},function(t,i,n){var o=n(18);t.exports=function(){return o(-Math.PI,Math.PI)}},function(t,i,n){var o=n(18);t.exports=function(){return o(-180,180)}},function(t,i,n){var o=n(29);t.exports=function(t){return o(t+Math.PI)}},function(t,i,n){var o=n(4);t.exports=function(t,i,n){return void 0===n&&(n=.05),t===i||(Math.abs(i-t)<=n||Math.abs(i-t)>=o.PI2-n?t=i:(Math.abs(i-t)>Math.PI&&(i<t?i+=o.PI2:i-=o.PI2),i>t?t+=n:i<t&&(t-=n))),t}},function(t,i){t.exports=function(t,i){var n=i-t;return 0===n?0:n-360*Math.floor((n- -180)/360)}},function(t,i,n){t.exports={Between:n(77),BetweenPoints:n(78),BetweenPointsSquared:n(79),Chebyshev:n(80),Power:n(81),Snake:n(82),Squared:n(83)}},function(t,i){t.exports=function(t,i,n,o){var a=t-n,u=i-o;return Math.sqrt(a*a+u*u)}},function(t,i){t.exports=function(t,i){var n=t.x-i.x,o=t.y-i.y;return Math.sqrt(n*n+o*o)}},function(t,i){t.exports=function(t,i){var n=t.x-i.x,o=t.y-i.y;return n*n+o*o}},function(t,i){t.exports=function(t,i,n,o){return Math.max(Math.abs(t-n),Math.abs(i-o))}},function(t,i){t.exports=function(t,i,n,o,a){return void 0===a&&(a=2),Math.sqrt(Math.pow(n-t,a)+Math.pow(o-i,a))}},function(t,i){t.exports=function(t,i,n,o){return Math.abs(t-n)+Math.abs(i-o)}},function(t,i){t.exports=function(t,i,n,o){var a=t-n,u=i-o;return a*a+u*u}},function(t,i,n){t.exports={Back:n(85),Bounce:n(89),Circular:n(93),Cubic:n(97),Elastic:n(101),Expo:n(105),Linear:n(109),Quadratic:n(111),Quartic:n(115),Quintic:n(119),Sine:n(123),Stepped:n(127)}},function(t,i,n){t.exports={In:n(86),Out:n(87),InOut:n(88)}},function(t,i){t.exports=function(t,i){return void 0===i&&(i=1.70158),t*t*((i+1)*t-i)}},function(t,i){t.exports=function(t,i){return void 0===i&&(i=1.70158),--t*t*((i+1)*t+i)+1}},function(t,i){t.exports=function(t,i){void 0===i&&(i=1.70158);var n=1.525*i;return(t*=2)<1?t*t*((n+1)*t-n)*.5:.5*((t-=2)*t*((n+1)*t+n)+2)}},function(t,i,n){t.exports={In:n(90),Out:n(91),InOut:n(92)}},function(t,i){t.exports=function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}},function(t,i){t.exports=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},function(t,i){t.exports=function(t){var i=!1;return t<.5?(t=1-2*t,i=!0):t=2*t-1,t<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,i?.5*(1-t):.5*t+.5}},function(t,i,n){t.exports={In:n(94),Out:n(95),InOut:n(96)}},function(t,i){t.exports=function(t){return 1-Math.sqrt(1-t*t)}},function(t,i){t.exports=function(t){return Math.sqrt(1- --t*t)}},function(t,i){t.exports=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},function(t,i,n){t.exports={In:n(98),Out:n(99),InOut:n(100)}},function(t,i){t.exports=function(t){return t*t*t}},function(t,i){t.exports=function(t){return--t*t*t+1}},function(t,i){t.exports=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},function(t,i,n){t.exports={In:n(102),Out:n(103),InOut:n(104)}},function(t,i){t.exports=function(t,i,n){if(void 0===i&&(i=.1),void 0===n&&(n=.1),0===t)return 0;if(1===t)return 1;var o=n/4;return i<1?i=1:o=n*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(t-=1))*Math.sin((t-o)*(2*Math.PI)/n)}},function(t,i){t.exports=function(t,i,n){if(void 0===i&&(i=.1),void 0===n&&(n=.1),0===t)return 0;if(1===t)return 1;var o=n/4;return i<1?i=1:o=n*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin((t-o)*(2*Math.PI)/n)+1}},function(t,i){t.exports=function(t,i,n){if(void 0===i&&(i=.1),void 0===n&&(n=.1),0===t)return 0;if(1===t)return 1;var o=n/4;return i<1?i=1:o=n*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?i*Math.pow(2,10*(t-=1))*Math.sin((t-o)*(2*Math.PI)/n)*-.5:i*Math.pow(2,-10*(t-=1))*Math.sin((t-o)*(2*Math.PI)/n)*.5+1}},function(t,i,n){t.exports={In:n(106),Out:n(107),InOut:n(108)}},function(t,i){t.exports=function(t){return Math.pow(2,10*(t-1))-.001}},function(t,i){t.exports=function(t){return 1-Math.pow(2,-10*t)}},function(t,i){t.exports=function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}},function(t,i,n){t.exports=n(110)},function(t,i){t.exports=function(t){return t}},function(t,i,n){t.exports={In:n(112),Out:n(113),InOut:n(114)}},function(t,i){t.exports=function(t){return t*t}},function(t,i){t.exports=function(t){return t*(2-t)}},function(t,i){t.exports=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},function(t,i,n){t.exports={In:n(116),Out:n(117),InOut:n(118)}},function(t,i){t.exports=function(t){return t*t*t*t}},function(t,i){t.exports=function(t){return 1- --t*t*t*t}},function(t,i){t.exports=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},function(t,i,n){t.exports={In:n(120),Out:n(121),InOut:n(122)}},function(t,i){t.exports=function(t){return t*t*t*t*t}},function(t,i){t.exports=function(t){return--t*t*t*t*t+1}},function(t,i){t.exports=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},function(t,i,n){t.exports={In:n(124),Out:n(125),InOut:n(126)}},function(t,i){t.exports=function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)}},function(t,i){t.exports=function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)}},function(t,i){t.exports=function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))}},function(t,i,n){t.exports=n(128)},function(t,i){t.exports=function(t,i){return void 0===i&&(i=1),t<=0?0:t>=1?1:1/i*(1+(i*t|0))}},function(t,i,n){t.exports={Ceil:n(130),Equal:n(32),Floor:n(131),GreaterThan:n(132),LessThan:n(133)}},function(t,i){t.exports=function(t,i){return void 0===i&&(i=1e-4),Math.ceil(t-i)}},function(t,i){t.exports=function(t,i){return void 0===i&&(i=1e-4),Math.floor(t+i)}},function(t,i){t.exports=function(t,i,n){return void 0===n&&(n=1e-4),t>i-n}},function(t,i){t.exports=function(t,i,n){return void 0===n&&(n=1e-4),t<i+n}},function(t,i,n){t.exports={Bezier:n(135),CatmullRom:n(136),CubicBezier:n(137),Linear:n(138),QuadraticBezier:n(139),SmoothStep:n(140),SmootherStep:n(141)}},function(t,i,n){var o=n(33);t.exports=function(t,i){for(var n=0,a=t.length-1,u=0;u<=a;u++)n+=Math.pow(1-i,a-u)*Math.pow(i,u)*t[u]*o(a,u);return n}},function(t,i,n){var o=n(35);t.exports=function(t,i){var n=t.length-1,a=n*i,u=Math.floor(a);return t[0]===t[n]?(i<0&&(u=Math.floor(a=n*(1+i))),o(a-u,t[(u-1+n)%n],t[u],t[(u+1)%n],t[(u+2)%n])):i<0?t[0]-(o(-a,t[0],t[0],t[1],t[1])-t[0]):i>1?t[n]-(o(a-n,t[n],t[n],t[n-1],t[n-1])-t[n]):o(a-u,t[u?u-1:0],t[u],t[n<u+1?n:u+1],t[n<u+2?n:u+2])}},function(t,i){t.exports=function(t,i,n,o,a){return function P0(t,i){var n=1-t;return n*n*n*i}(t,i)+function P1(t,i){var n=1-t;return 3*n*n*t*i}(t,n)+function P2(t,i){return 3*(1-t)*t*t*i}(t,o)+function P3(t,i){return t*t*t*i}(t,a)}},function(t,i,n){var o=n(36);t.exports=function(t,i){var n=t.length-1,a=n*i,u=Math.floor(a);return i<0?o(t[0],t[1],a):i>1?o(t[n],t[n-1],n-a):o(t[u],t[u+1>n?n:u+1],a-u)}},function(t,i){t.exports=function(t,i,n,o){return function P0(t,i){var n=1-t;return n*n*i}(t,i)+function P1(t,i){return 2*(1-t)*t*i}(t,n)+function P2(t,i){return t*t*i}(t,o)}},function(t,i,n){var o=n(37);t.exports=function(t,i,n){return i+(n-i)*o(t,0,1)}},function(t,i,n){var o=n(38);t.exports=function(t,i,n){return i+(n-i)*o(t,0,1)}},function(t,i,n){t.exports={GetNext:n(143),IsSize:n(144),IsValue:n(145)}},function(t,i){t.exports=function(t){var i=Math.log(t)/.6931471805599453;return 1<<Math.ceil(i)}},function(t,i){t.exports=function(t,i){return t>0&&0==(t&t-1)&&i>0&&0==(i&i-1)}},function(t,i){t.exports=function(t){return t>0&&0==(t&t-1)}},function(t,i,n){t.exports={Ceil:n(147),Floor:n(148),To:n(149)}},function(t,i){t.exports=function(t,i,n,o){return void 0===n&&(n=0),0===i?t:(t-=n,t=i*Math.ceil(t/i),o?(n+t)/i:n+t)}},function(t,i){t.exports=function(t,i,n,o){return void 0===n&&(n=0),0===i?t:(t-=n,t=i*Math.floor(t/i),o?(n+t)/i:n+t)}},function(t,i){t.exports=function(t,i,n,o){return void 0===n&&(n=0),0===i?t:(t-=n,t=i*Math.round(t/i),o?(n+t)/i:n+t)}},function(t,i,n){var o=new(n(0))({initialize:function RandomDataGenerator2(t){void 0===t&&(t=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],t&&this.init(t)},rnd:function(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},hash:function(t){var i,n=this.n;t=t.toString();for(var o=0;o<t.length;o++)i=.02519603282416938*(n+=t.charCodeAt(o)),i-=n=i>>>0,n=(i*=n)>>>0,n+=4294967296*(i-=n);return this.n=n,2.3283064365386963e-10*(n>>>0)},init:function(t){"string"==typeof t?this.state(t):this.sow(t)},sow:function(t){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,t)for(var i=0;i<t.length&&null!=t[i];i++){var n=t[i];this.s0-=this.hash(n),this.s0+=~~(this.s0<0),this.s1-=this.hash(n),this.s1+=~~(this.s1<0),this.s2-=this.hash(n),this.s2+=~~(this.s2<0)}},integer:function(){return 4294967296*this.rnd()},frac:function(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(t,i){return Math.floor(this.realInRange(0,i-t+1)+t)},between:function(t,i){return Math.floor(this.realInRange(0,i-t+1)+t)},realInRange:function(t,i){return this.frac()*(i-t)+t},normal:function(){return 1-2*this.frac()},uuid:function(){var t="",i="";for(i=t="";t++<36;i+=~t%5|3*t&4?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return i},pick:function(t){return t[this.integerInRange(0,t.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(t){return t[~~(Math.pow(this.frac(),2)*(t.length-1)+.5)]},timestamp:function(t,i){return this.realInRange(t||9466848e5,i||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(t){return"string"==typeof t&&t.match(/^!rnd/)&&(t=t.split(","),this.c=parseFloat(t[1]),this.s0=parseFloat(t[2]),this.s1=parseFloat(t[3]),this.s2=parseFloat(t[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(t){for(var i=t.length-1;i>0;i--){var n=Math.floor(this.frac()*(i+1)),o=t[n];t[n]=t[i],t[i]=o}return t}});t.exports=o},function(t,i){t.exports=function(t){for(var i=0,n=0;n<t.length;n++)i+=+t[n];return i/t.length}},function(t,i){t.exports=function(t,i){return Math.floor(Math.random()*(i-t+1)+t)}},function(t,i){t.exports=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=10);var o=Math.pow(n,-i);return Math.ceil(t*o)/o}},function(t,i){t.exports=function(t,i){return Math.abs(t-i)}},function(t,i,n){var o=n(3),a=n(0),u=n(20),d=n(1),f=new u,p=new a({initialize:function Euler2(t,i,n,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=Euler2.DefaultOrder),this._x=t,this._y=i,this._z=n,this._order=o,this.onChangeCallback=d},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback(this)}},set:function(t,i,n,o){return void 0===o&&(o=this._order),this._x=t,this._y=i,this._z=n,this._order=o,this.onChangeCallback(this),this},copy:function(t){return this.set(t.x,t.y,t.z,t.order)},setFromQuaternion:function(t,i,n){return void 0===i&&(i=this._order),void 0===n&&(n=!1),f.fromQuat(t),this.setFromRotationMatrix(f,i,n)},setFromRotationMatrix:function(t,i,n){void 0===i&&(i=this._order),void 0===n&&(n=!1);var a=t.val,u=a[0],d=a[4],f=a[8],p=a[1],b=a[5],S=a[9],M=a[2],C=a[6],P=a[10],R=0,O=0,B=0,N=.99999;switch(i){case"XYZ":O=Math.asin(o(f,-1,1)),Math.abs(f)<N?(R=Math.atan2(-S,P),B=Math.atan2(-d,u)):R=Math.atan2(C,b);break;case"YXZ":R=Math.asin(-o(S,-1,1)),Math.abs(S)<N?(O=Math.atan2(f,P),B=Math.atan2(p,b)):O=Math.atan2(-M,u);break;case"ZXY":R=Math.asin(o(C,-1,1)),Math.abs(C)<N?(O=Math.atan2(-M,P),B=Math.atan2(-d,b)):B=Math.atan2(p,u);break;case"ZYX":O=Math.asin(-o(M,-1,1)),Math.abs(M)<N?(R=Math.atan2(C,P),B=Math.atan2(p,u)):B=Math.atan2(-d,b);break;case"YZX":B=Math.asin(o(p,-1,1)),Math.abs(p)<N?(R=Math.atan2(-S,b),O=Math.atan2(-M,u)):O=Math.atan2(f,P);break;case"XZY":B=Math.asin(-o(d,-1,1)),Math.abs(d)<N?(R=Math.atan2(C,b),O=Math.atan2(f,u)):R=Math.atan2(-S,P)}return this._x=R,this._y=O,this._z=B,this._order=i,n&&this.onChangeCallback(this),this}});p.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],p.DefaultOrder="XYZ",t.exports=p},function(t,i){t.exports=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=10);var o=Math.pow(n,-i);return Math.floor(t*o)/o}},function(t,i,n){var o=n(3);t.exports=function(t,i,n){return(n-i)*(t=o(t,0,1))+i}},function(t,i){t.exports=function(t,i){return t/i/1e3}},function(t,i){t.exports=function(t){return t==parseFloat(t)?!(t%2):void 0}},function(t,i){t.exports=function(t){return t===parseFloat(t)?!(t%2):void 0}},function(t,i){t.exports=function(t,i,n){return Math.min(t+i,n)}},function(t,i){t.exports=function(t){var i=t.length;if(0===i)return 0;t.sort((function(t,i){return t-i}));var n=Math.floor(i/2);return i%2==0?(t[n]+t[n-1])/2:t[n]}},function(t,i){t.exports=function(t,i,n){return Math.max(t-i,n)}},function(t,i){t.exports=function(t,i,n,o){void 0===n&&(n=i+1);var a=(t-i)/(n-i);return a>1?void 0!==o?(a=(o-t)/(o-n))<0&&(a=0):a=1:a<0&&(a=0),a}},function(t,i){t.exports=function(t,i){void 0===i&&(i=1);var n=2*Math.random()*Math.PI;return t.x=Math.cos(n)*i,t.y=Math.sin(n)*i,t}},function(t,i){t.exports=function(t,i){void 0===i&&(i=1);var n=2*Math.random()*Math.PI,o=2*Math.random()-1,a=Math.sqrt(1-o*o)*i;return t.x=Math.cos(n)*a,t.y=Math.sin(n)*a,t.z=o*i,t}},function(t,i){t.exports=function(t,i){return void 0===i&&(i=1),t.x=(2*Math.random()-1)*i,t.y=(2*Math.random()-1)*i,t.z=(2*Math.random()-1)*i,t.w=(2*Math.random()-1)*i,t}},function(t,i){t.exports=function(t,i){var n=t.x,o=t.y;return t.x=n*Math.cos(i)-o*Math.sin(i),t.y=n*Math.sin(i)+o*Math.cos(i),t}},function(t,i){t.exports=function(t,i,n,o,a){var u=o+Math.atan2(t.y-n,t.x-i);return t.x=i+a*Math.cos(u),t.y=n+a*Math.sin(u),t}},function(t,i){t.exports=function(t,i,n,o,a){return t.x=i+a*Math.cos(o),t.y=n+a*Math.sin(o),t}},function(t,i){t.exports=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=10);var o=Math.pow(n,-i);return Math.round(t*o)/o}},function(t,i){t.exports=function(t,i,n,o){void 0===i&&(i=1),void 0===n&&(n=1),void 0===o&&(o=1),o*=Math.PI/t;for(var a=[],u=[],d=0;d<t;d++)i+=(n-=i*o)*o,a[d]=n,u[d]=i;return{sin:u,cos:a,length:t}}},function(t,i,n){var o=n(2);t.exports=function(t,i,n,a){void 0===a&&(a=new o);var u=0,d=0;return t>0&&t<=i*n&&(u=t>i-1?t-(d=Math.floor(t/i))*i:t,a.set(u,d)),a}},function(t,i){t.exports=function(t,i,n){return Math.abs(t-i)<=n}},function(t,i,n){var o=new(n(0))({initialize:function Vector42(t,i,n,o){this.x=0,this.y=0,this.z=0,this.w=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=n||0,this.w=o||0)},clone:function(){return new o(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this.w=t.w||0,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},set:function(t,i,n,o){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=n||0,this.w=o||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this.w+=t.w||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this.w-=t.w||0,this},scale:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function(){var t=this.x,i=this.y,n=this.z,o=this.w;return Math.sqrt(t*t+i*i+n*n+o*o)},lengthSq:function(){var t=this.x,i=this.y,n=this.z,o=this.w;return t*t+i*i+n*n+o*o},normalize:function(){var t=this.x,i=this.y,n=this.z,o=this.w,a=t*t+i*i+n*n+o*o;return a>0&&(a=1/Math.sqrt(a),this.x=t*a,this.y=i*a,this.z=n*a,this.w=o*a),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,i){void 0===i&&(i=0);var n=this.x,o=this.y,a=this.z,u=this.w;return this.x=n+i*(t.x-n),this.y=o+i*(t.y-o),this.z=a+i*(t.z-a),this.w=u+i*(t.w-u),this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this.w*=t.w||1,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this.w/=t.w||1,this},distance:function(t){var i=t.x-this.x,n=t.y-this.y,o=t.z-this.z||0,a=t.w-this.w||0;return Math.sqrt(i*i+n*n+o*o+a*a)},distanceSq:function(t){var i=t.x-this.x,n=t.y-this.y,o=t.z-this.z||0,a=t.w-this.w||0;return i*i+n*n+o*o+a*a},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(t){var i=this.x,n=this.y,o=this.z,a=this.w,u=t.val;return this.x=u[0]*i+u[4]*n+u[8]*o+u[12]*a,this.y=u[1]*i+u[5]*n+u[9]*o+u[13]*a,this.z=u[2]*i+u[6]*n+u[10]*o+u[14]*a,this.w=u[3]*i+u[7]*n+u[11]*o+u[15]*a,this},transformQuat:function(t){var i=this.x,n=this.y,o=this.z,a=t.x,u=t.y,d=t.z,f=t.w,p=f*i+u*o-d*n,b=f*n+d*i-a*o,S=f*o+a*n-u*i,M=-a*i-u*n-d*o;return this.x=p*f+M*-a+b*-d-S*-u,this.y=b*f+M*-u+S*-a-p*-d,this.z=S*f+M*-d+p*-u-b*-a,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});o.prototype.sub=o.prototype.subtract,o.prototype.mul=o.prototype.multiply,o.prototype.div=o.prototype.divide,o.prototype.dist=o.prototype.distance,o.prototype.distSq=o.prototype.distanceSq,o.prototype.len=o.prototype.length,o.prototype.lenSq=o.prototype.lengthSq,t.exports=o},function(t,i,n){var o=n(14),a=n(20),u=n(43),d=new a,f=new u,p=new o;t.exports=function(t,i,n){return f.setAxisAngle(i,n),d.fromRotationTranslation(f,p.set(0,0,0)),t.transformMat4(d)}},function(t,i){t.exports="resize"},function(t,i,n){var o=n(179),a=n(0),u=n(44),d=new a({Extends:o,initialize:function ScenePlugin2(t,i,n){o.call(this,i),this.scene=t,this.systems=t.sys,this.pluginKey=n,t.sys.events.once(u.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=d},function(t,i,n){var o=new(n(0))({initialize:function BasePlugin2(t){this.pluginManager=t,this.game=t.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=o},function(t,i){t.exports="addedtoscene"},function(t,i){t.exports="boot"},function(t,i){t.exports="create"},function(t,i){t.exports="destroy"},function(t,i){t.exports="pause"},function(t,i){t.exports="postupdate"},function(t,i){t.exports="prerender"},function(t,i){t.exports="preupdate"},function(t,i){t.exports="ready"},function(t,i){t.exports="removedfromscene"},function(t,i){t.exports="render"},function(t,i){t.exports="resume"},function(t,i){t.exports="shutdown"},function(t,i){t.exports="sleep"},function(t,i){t.exports="start"},function(t,i){t.exports="transitioncomplete"},function(t,i){t.exports="transitioninit"},function(t,i){t.exports="transitionout"},function(t,i){t.exports="transitionstart"},function(t,i){t.exports="transitionwake"},function(t,i){t.exports="update"},function(t,i){t.exports="wake"},function(t,i){(function(){var i,n,o,a,u,d=this&&this.__extends||(i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,n)},function(t,n){function __(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)});!function(t){var i,n,o,a,u,f,p=function(){function Animation2(t,i,n){if(null==t)throw new Error("name cannot be null.");if(null==i)throw new Error("timelines cannot be null.");this.name=t,this.timelines=i,this.timelineIds=[];for(var o=0;o<i.length;o++)this.timelineIds[i[o].getPropertyId()]=!0;this.duration=n}return Animation2.prototype.hasTimeline=function(t){return 1==this.timelineIds[t]},Animation2.prototype.apply=function(t,i,n,o,a,u,d,f){if(null==t)throw new Error("skeleton cannot be null.");o&&0!=this.duration&&(n%=this.duration,i>0&&(i%=this.duration));for(var p=this.timelines,b=0,S=p.length;b<S;b++)p[b].apply(t,i,n,a,u,d,f)},Animation2.binarySearch=function(t,i,n){void 0===n&&(n=1);var o=0,a=t.length/n-2;if(0==a)return n;for(var u=a>>>1;;){if(t[(u+1)*n]<=i?o=u+1:a=u,o==a)return(o+1)*n;u=o+a>>>1}},Animation2.linearSearch=function(t,i,n){for(var o=0,a=t.length-n;o<=a;o+=n)if(t[o]>i)return o;return-1},Animation2}();t.Animation=p,(n=i=t.MixBlend||(t.MixBlend={}))[n.setup=0]="setup",n[n.first=1]="first",n[n.replace=2]="replace",n[n.add=3]="add",(a=o=t.MixDirection||(t.MixDirection={}))[a.mixIn=0]="mixIn",a[a.mixOut=1]="mixOut",(f=u=t.TimelineType||(t.TimelineType={}))[f.rotate=0]="rotate",f[f.translate=1]="translate",f[f.scale=2]="scale",f[f.shear=3]="shear",f[f.attachment=4]="attachment",f[f.color=5]="color",f[f.deform=6]="deform",f[f.event=7]="event",f[f.drawOrder=8]="drawOrder",f[f.ikConstraint=9]="ikConstraint",f[f.transformConstraint=10]="transformConstraint",f[f.pathConstraintPosition=11]="pathConstraintPosition",f[f.pathConstraintSpacing=12]="pathConstraintSpacing",f[f.pathConstraintMix=13]="pathConstraintMix",f[f.twoColor=14]="twoColor";var b=function(){function CurveTimeline2(i){if(i<=0)throw new Error("frameCount must be > 0: "+i);this.curves=t.Utils.newFloatArray((i-1)*CurveTimeline2.BEZIER_SIZE)}return CurveTimeline2.prototype.getFrameCount=function(){return this.curves.length/CurveTimeline2.BEZIER_SIZE+1},CurveTimeline2.prototype.setLinear=function(t){this.curves[t*CurveTimeline2.BEZIER_SIZE]=CurveTimeline2.LINEAR},CurveTimeline2.prototype.setStepped=function(t){this.curves[t*CurveTimeline2.BEZIER_SIZE]=CurveTimeline2.STEPPED},CurveTimeline2.prototype.getCurveType=function(t){var i=t*CurveTimeline2.BEZIER_SIZE;if(i==this.curves.length)return CurveTimeline2.LINEAR;var n=this.curves[i];return n==CurveTimeline2.LINEAR?CurveTimeline2.LINEAR:n==CurveTimeline2.STEPPED?CurveTimeline2.STEPPED:CurveTimeline2.BEZIER},CurveTimeline2.prototype.setCurve=function(t,i,n,o,a){var u=.03*(2*-i+o),d=.03*(2*-n+a),f=.006*(3*(i-o)+1),p=.006*(3*(n-a)+1),b=2*u+f,S=2*d+p,M=.3*i+u+.16666667*f,C=.3*n+d+.16666667*p,P=t*CurveTimeline2.BEZIER_SIZE,R=this.curves;R[P++]=CurveTimeline2.BEZIER;for(var O=M,B=C,N=P+CurveTimeline2.BEZIER_SIZE-1;P<N;P+=2)R[P]=O,R[P+1]=B,M+=b,C+=S,b+=f,S+=p,O+=M,B+=C},CurveTimeline2.prototype.getCurvePercent=function(i,n){n=t.MathUtils.clamp(n,0,1);var o=this.curves,a=i*CurveTimeline2.BEZIER_SIZE,u=o[a];if(u==CurveTimeline2.LINEAR)return n;if(u==CurveTimeline2.STEPPED)return 0;for(var d=0,f=++a,p=a+CurveTimeline2.BEZIER_SIZE-1;a<p;a+=2)if((d=o[a])>=n){var b=void 0,S=void 0;return a==f?(b=0,S=0):(b=o[a-2],S=o[a-1]),S+(o[a+1]-S)*(n-b)/(d-b)}var M=o[a-1];return M+(1-M)*(n-d)/(1-d)},CurveTimeline2.LINEAR=0,CurveTimeline2.STEPPED=1,CurveTimeline2.BEZIER=2,CurveTimeline2.BEZIER_SIZE=19,CurveTimeline2}();t.CurveTimeline=b;var S=function(n){function RotateTimeline2(i){var o=n.call(this,i)||this;return o.frames=t.Utils.newFloatArray(i<<1),o}return d(RotateTimeline2,n),RotateTimeline2.prototype.getPropertyId=function(){return(u.rotate<<24)+this.boneIndex},RotateTimeline2.prototype.setFrame=function(t,i,n){t<<=1,this.frames[t]=i,this.frames[t+RotateTimeline2.ROTATION]=n},RotateTimeline2.prototype.apply=function(t,n,o,a,u,d,f){var b=this.frames,S=t.bones[this.boneIndex];if(S.active)if(o<b[0])switch(d){case i.setup:return void(S.rotation=S.data.rotation);case i.first:var M=S.data.rotation-S.rotation;S.rotation+=(M-360*(16384-(16384.499999999996-M/360|0)))*u}else if(o>=b[b.length-RotateTimeline2.ENTRIES]){var C=b[b.length+RotateTimeline2.PREV_ROTATION];switch(d){case i.setup:S.rotation=S.data.rotation+C*u;break;case i.first:case i.replace:C+=S.data.rotation-S.rotation,C-=360*(16384-(16384.499999999996-C/360|0));case i.add:S.rotation+=C*u}}else{var P=p.binarySearch(b,o,RotateTimeline2.ENTRIES),R=b[P+RotateTimeline2.PREV_ROTATION],O=b[P],B=this.getCurvePercent((P>>1)-1,1-(o-O)/(b[P+RotateTimeline2.PREV_TIME]-O)),N=b[P+RotateTimeline2.ROTATION]-R;switch(N=R+(N-360*(16384-(16384.499999999996-N/360|0)))*B,d){case i.setup:S.rotation=S.data.rotation+(N-360*(16384-(16384.499999999996-N/360|0)))*u;break;case i.first:case i.replace:N+=S.data.rotation-S.rotation;case i.add:S.rotation+=(N-360*(16384-(16384.499999999996-N/360|0)))*u}}},RotateTimeline2.ENTRIES=2,RotateTimeline2.PREV_TIME=-2,RotateTimeline2.PREV_ROTATION=-1,RotateTimeline2.ROTATION=1,RotateTimeline2}(b);t.RotateTimeline=S;var M=function(n){function TranslateTimeline2(i){var o=n.call(this,i)||this;return o.frames=t.Utils.newFloatArray(i*TranslateTimeline2.ENTRIES),o}return d(TranslateTimeline2,n),TranslateTimeline2.prototype.getPropertyId=function(){return(u.translate<<24)+this.boneIndex},TranslateTimeline2.prototype.setFrame=function(t,i,n,o){t*=TranslateTimeline2.ENTRIES,this.frames[t]=i,this.frames[t+TranslateTimeline2.X]=n,this.frames[t+TranslateTimeline2.Y]=o},TranslateTimeline2.prototype.apply=function(t,n,o,a,u,d,f){var b=this.frames,S=t.bones[this.boneIndex];if(S.active)if(o<b[0])switch(d){case i.setup:return S.x=S.data.x,void(S.y=S.data.y);case i.first:S.x+=(S.data.x-S.x)*u,S.y+=(S.data.y-S.y)*u}else{var M=0,C=0;if(o>=b[b.length-TranslateTimeline2.ENTRIES])M=b[b.length+TranslateTimeline2.PREV_X],C=b[b.length+TranslateTimeline2.PREV_Y];else{var P=p.binarySearch(b,o,TranslateTimeline2.ENTRIES);M=b[P+TranslateTimeline2.PREV_X],C=b[P+TranslateTimeline2.PREV_Y];var R=b[P],O=this.getCurvePercent(P/TranslateTimeline2.ENTRIES-1,1-(o-R)/(b[P+TranslateTimeline2.PREV_TIME]-R));M+=(b[P+TranslateTimeline2.X]-M)*O,C+=(b[P+TranslateTimeline2.Y]-C)*O}switch(d){case i.setup:S.x=S.data.x+M*u,S.y=S.data.y+C*u;break;case i.first:case i.replace:S.x+=(S.data.x+M-S.x)*u,S.y+=(S.data.y+C-S.y)*u;break;case i.add:S.x+=M*u,S.y+=C*u}}},TranslateTimeline2.ENTRIES=3,TranslateTimeline2.PREV_TIME=-3,TranslateTimeline2.PREV_X=-2,TranslateTimeline2.PREV_Y=-1,TranslateTimeline2.X=1,TranslateTimeline2.Y=2,TranslateTimeline2}(b);t.TranslateTimeline=M;var C=function(n){function ScaleTimeline2(t){return n.call(this,t)||this}return d(ScaleTimeline2,n),ScaleTimeline2.prototype.getPropertyId=function(){return(u.scale<<24)+this.boneIndex},ScaleTimeline2.prototype.apply=function(n,a,u,d,f,b,S){var M=this.frames,C=n.bones[this.boneIndex];if(C.active)if(u<M[0])switch(b){case i.setup:return C.scaleX=C.data.scaleX,void(C.scaleY=C.data.scaleY);case i.first:C.scaleX+=(C.data.scaleX-C.scaleX)*f,C.scaleY+=(C.data.scaleY-C.scaleY)*f}else{var P=0,R=0;if(u>=M[M.length-ScaleTimeline2.ENTRIES])P=M[M.length+ScaleTimeline2.PREV_X]*C.data.scaleX,R=M[M.length+ScaleTimeline2.PREV_Y]*C.data.scaleY;else{var O=p.binarySearch(M,u,ScaleTimeline2.ENTRIES);P=M[O+ScaleTimeline2.PREV_X],R=M[O+ScaleTimeline2.PREV_Y];var B=M[O],N=this.getCurvePercent(O/ScaleTimeline2.ENTRIES-1,1-(u-B)/(M[O+ScaleTimeline2.PREV_TIME]-B));P=(P+(M[O+ScaleTimeline2.X]-P)*N)*C.data.scaleX,R=(R+(M[O+ScaleTimeline2.Y]-R)*N)*C.data.scaleY}if(1==f)b==i.add?(C.scaleX+=P-C.data.scaleX,C.scaleY+=R-C.data.scaleY):(C.scaleX=P,C.scaleY=R);else{var Y=0,X=0;if(S==o.mixOut)switch(b){case i.setup:Y=C.data.scaleX,X=C.data.scaleY,C.scaleX=Y+(Math.abs(P)*t.MathUtils.signum(Y)-Y)*f,C.scaleY=X+(Math.abs(R)*t.MathUtils.signum(X)-X)*f;break;case i.first:case i.replace:Y=C.scaleX,X=C.scaleY,C.scaleX=Y+(Math.abs(P)*t.MathUtils.signum(Y)-Y)*f,C.scaleY=X+(Math.abs(R)*t.MathUtils.signum(X)-X)*f;break;case i.add:Y=C.scaleX,X=C.scaleY,C.scaleX=Y+(Math.abs(P)*t.MathUtils.signum(Y)-C.data.scaleX)*f,C.scaleY=X+(Math.abs(R)*t.MathUtils.signum(X)-C.data.scaleY)*f}else switch(b){case i.setup:Y=Math.abs(C.data.scaleX)*t.MathUtils.signum(P),X=Math.abs(C.data.scaleY)*t.MathUtils.signum(R),C.scaleX=Y+(P-Y)*f,C.scaleY=X+(R-X)*f;break;case i.first:case i.replace:Y=Math.abs(C.scaleX)*t.MathUtils.signum(P),X=Math.abs(C.scaleY)*t.MathUtils.signum(R),C.scaleX=Y+(P-Y)*f,C.scaleY=X+(R-X)*f;break;case i.add:Y=t.MathUtils.signum(P),X=t.MathUtils.signum(R),C.scaleX=Math.abs(C.scaleX)*Y+(P-Math.abs(C.data.scaleX)*Y)*f,C.scaleY=Math.abs(C.scaleY)*X+(R-Math.abs(C.data.scaleY)*X)*f}}}},ScaleTimeline2}(M);t.ScaleTimeline=C;var P=function(t){function ShearTimeline2(i){return t.call(this,i)||this}return d(ShearTimeline2,t),ShearTimeline2.prototype.getPropertyId=function(){return(u.shear<<24)+this.boneIndex},ShearTimeline2.prototype.apply=function(t,n,o,a,u,d,f){var b=this.frames,S=t.bones[this.boneIndex];if(S.active)if(o<b[0])switch(d){case i.setup:return S.shearX=S.data.shearX,void(S.shearY=S.data.shearY);case i.first:S.shearX+=(S.data.shearX-S.shearX)*u,S.shearY+=(S.data.shearY-S.shearY)*u}else{var M=0,C=0;if(o>=b[b.length-ShearTimeline2.ENTRIES])M=b[b.length+ShearTimeline2.PREV_X],C=b[b.length+ShearTimeline2.PREV_Y];else{var P=p.binarySearch(b,o,ShearTimeline2.ENTRIES);M=b[P+ShearTimeline2.PREV_X],C=b[P+ShearTimeline2.PREV_Y];var R=b[P],O=this.getCurvePercent(P/ShearTimeline2.ENTRIES-1,1-(o-R)/(b[P+ShearTimeline2.PREV_TIME]-R));M+=(b[P+ShearTimeline2.X]-M)*O,C+=(b[P+ShearTimeline2.Y]-C)*O}switch(d){case i.setup:S.shearX=S.data.shearX+M*u,S.shearY=S.data.shearY+C*u;break;case i.first:case i.replace:S.shearX+=(S.data.shearX+M-S.shearX)*u,S.shearY+=(S.data.shearY+C-S.shearY)*u;break;case i.add:S.shearX+=M*u,S.shearY+=C*u}}},ShearTimeline2}(M);t.ShearTimeline=P;var R=function(n){function ColorTimeline2(i){var o=n.call(this,i)||this;return o.frames=t.Utils.newFloatArray(i*ColorTimeline2.ENTRIES),o}return d(ColorTimeline2,n),ColorTimeline2.prototype.getPropertyId=function(){return(u.color<<24)+this.slotIndex},ColorTimeline2.prototype.setFrame=function(t,i,n,o,a,u){t*=ColorTimeline2.ENTRIES,this.frames[t]=i,this.frames[t+ColorTimeline2.R]=n,this.frames[t+ColorTimeline2.G]=o,this.frames[t+ColorTimeline2.B]=a,this.frames[t+ColorTimeline2.A]=u},ColorTimeline2.prototype.apply=function(t,n,o,a,u,d,f){var b=t.slots[this.slotIndex];if(b.bone.active){var S=this.frames;if(o<S[0])switch(d){case i.setup:return void b.color.setFromColor(b.data.color);case i.first:var M=b.color,C=b.data.color;M.add((C.r-M.r)*u,(C.g-M.g)*u,(C.b-M.b)*u,(C.a-M.a)*u)}else{var P=0,R=0,O=0,B=0;if(o>=S[S.length-ColorTimeline2.ENTRIES]){var N=S.length;P=S[N+ColorTimeline2.PREV_R],R=S[N+ColorTimeline2.PREV_G],O=S[N+ColorTimeline2.PREV_B],B=S[N+ColorTimeline2.PREV_A]}else{var Y=p.binarySearch(S,o,ColorTimeline2.ENTRIES);P=S[Y+ColorTimeline2.PREV_R],R=S[Y+ColorTimeline2.PREV_G],O=S[Y+ColorTimeline2.PREV_B],B=S[Y+ColorTimeline2.PREV_A];var X=S[Y],G=this.getCurvePercent(Y/ColorTimeline2.ENTRIES-1,1-(o-X)/(S[Y+ColorTimeline2.PREV_TIME]-X));P+=(S[Y+ColorTimeline2.R]-P)*G,R+=(S[Y+ColorTimeline2.G]-R)*G,O+=(S[Y+ColorTimeline2.B]-O)*G,B+=(S[Y+ColorTimeline2.A]-B)*G}if(1==u)b.color.set(P,R,O,B);else{M=b.color;d==i.setup&&M.setFromColor(b.data.color),M.add((P-M.r)*u,(R-M.g)*u,(O-M.b)*u,(B-M.a)*u)}}}},ColorTimeline2.ENTRIES=5,ColorTimeline2.PREV_TIME=-5,ColorTimeline2.PREV_R=-4,ColorTimeline2.PREV_G=-3,ColorTimeline2.PREV_B=-2,ColorTimeline2.PREV_A=-1,ColorTimeline2.R=1,ColorTimeline2.G=2,ColorTimeline2.B=3,ColorTimeline2.A=4,ColorTimeline2}(b);t.ColorTimeline=R;var O=function(n){function TwoColorTimeline2(i){var o=n.call(this,i)||this;return o.frames=t.Utils.newFloatArray(i*TwoColorTimeline2.ENTRIES),o}return d(TwoColorTimeline2,n),TwoColorTimeline2.prototype.getPropertyId=function(){return(u.twoColor<<24)+this.slotIndex},TwoColorTimeline2.prototype.setFrame=function(t,i,n,o,a,u,d,f,p){t*=TwoColorTimeline2.ENTRIES,this.frames[t]=i,this.frames[t+TwoColorTimeline2.R]=n,this.frames[t+TwoColorTimeline2.G]=o,this.frames[t+TwoColorTimeline2.B]=a,this.frames[t+TwoColorTimeline2.A]=u,this.frames[t+TwoColorTimeline2.R2]=d,this.frames[t+TwoColorTimeline2.G2]=f,this.frames[t+TwoColorTimeline2.B2]=p},TwoColorTimeline2.prototype.apply=function(t,n,o,a,u,d,f){var b=t.slots[this.slotIndex];if(b.bone.active){var S=this.frames;if(o<S[0])switch(d){case i.setup:return b.color.setFromColor(b.data.color),void b.darkColor.setFromColor(b.data.darkColor);case i.first:var M=b.color,C=b.darkColor,P=b.data.color,R=b.data.darkColor;M.add((P.r-M.r)*u,(P.g-M.g)*u,(P.b-M.b)*u,(P.a-M.a)*u),C.add((R.r-C.r)*u,(R.g-C.g)*u,(R.b-C.b)*u,0)}else{var O=0,B=0,N=0,Y=0,X=0,G=0,U=0;if(o>=S[S.length-TwoColorTimeline2.ENTRIES]){var V=S.length;O=S[V+TwoColorTimeline2.PREV_R],B=S[V+TwoColorTimeline2.PREV_G],N=S[V+TwoColorTimeline2.PREV_B],Y=S[V+TwoColorTimeline2.PREV_A],X=S[V+TwoColorTimeline2.PREV_R2],G=S[V+TwoColorTimeline2.PREV_G2],U=S[V+TwoColorTimeline2.PREV_B2]}else{var z=p.binarySearch(S,o,TwoColorTimeline2.ENTRIES);O=S[z+TwoColorTimeline2.PREV_R],B=S[z+TwoColorTimeline2.PREV_G],N=S[z+TwoColorTimeline2.PREV_B],Y=S[z+TwoColorTimeline2.PREV_A],X=S[z+TwoColorTimeline2.PREV_R2],G=S[z+TwoColorTimeline2.PREV_G2],U=S[z+TwoColorTimeline2.PREV_B2];var W=S[z],H=this.getCurvePercent(z/TwoColorTimeline2.ENTRIES-1,1-(o-W)/(S[z+TwoColorTimeline2.PREV_TIME]-W));O+=(S[z+TwoColorTimeline2.R]-O)*H,B+=(S[z+TwoColorTimeline2.G]-B)*H,N+=(S[z+TwoColorTimeline2.B]-N)*H,Y+=(S[z+TwoColorTimeline2.A]-Y)*H,X+=(S[z+TwoColorTimeline2.R2]-X)*H,G+=(S[z+TwoColorTimeline2.G2]-G)*H,U+=(S[z+TwoColorTimeline2.B2]-U)*H}if(1==u)b.color.set(O,B,N,Y),b.darkColor.set(X,G,U,1);else{M=b.color,C=b.darkColor;d==i.setup&&(M.setFromColor(b.data.color),C.setFromColor(b.data.darkColor)),M.add((O-M.r)*u,(B-M.g)*u,(N-M.b)*u,(Y-M.a)*u),C.add((X-C.r)*u,(G-C.g)*u,(U-C.b)*u,0)}}}},TwoColorTimeline2.ENTRIES=8,TwoColorTimeline2.PREV_TIME=-8,TwoColorTimeline2.PREV_R=-7,TwoColorTimeline2.PREV_G=-6,TwoColorTimeline2.PREV_B=-5,TwoColorTimeline2.PREV_A=-4,TwoColorTimeline2.PREV_R2=-3,TwoColorTimeline2.PREV_G2=-2,TwoColorTimeline2.PREV_B2=-1,TwoColorTimeline2.R=1,TwoColorTimeline2.G=2,TwoColorTimeline2.B=3,TwoColorTimeline2.A=4,TwoColorTimeline2.R2=5,TwoColorTimeline2.G2=6,TwoColorTimeline2.B2=7,TwoColorTimeline2}(b);t.TwoColorTimeline=O;var B=function(){function AttachmentTimeline2(i){this.frames=t.Utils.newFloatArray(i),this.attachmentNames=new Array(i)}return AttachmentTimeline2.prototype.getPropertyId=function(){return(u.attachment<<24)+this.slotIndex},AttachmentTimeline2.prototype.getFrameCount=function(){return this.frames.length},AttachmentTimeline2.prototype.setFrame=function(t,i,n){this.frames[t]=i,this.attachmentNames[t]=n},AttachmentTimeline2.prototype.apply=function(t,n,a,u,d,f,b){var S=t.slots[this.slotIndex];if(S.bone.active)if(b!=o.mixOut){var M=this.frames;if(a<M[0])f!=i.setup&&f!=i.first||this.setAttachment(t,S,S.data.attachmentName);else{var C=0;C=a>=M[M.length-1]?M.length-1:p.binarySearch(M,a,1)-1;var P=this.attachmentNames[C];t.slots[this.slotIndex].setAttachment(null==P?null:t.getAttachment(this.slotIndex,P))}}else f==i.setup&&this.setAttachment(t,S,S.data.attachmentName)},AttachmentTimeline2.prototype.setAttachment=function(t,i,n){i.attachment=null==n?null:t.getAttachment(this.slotIndex,n)},AttachmentTimeline2}();t.AttachmentTimeline=B;var N=null,Y=function(n){function DeformTimeline2(i){var o=n.call(this,i)||this;return o.frames=t.Utils.newFloatArray(i),o.frameVertices=new Array(i),null==N&&(N=t.Utils.newFloatArray(64)),o}return d(DeformTimeline2,n),DeformTimeline2.prototype.getPropertyId=function(){return(u.deform<<27)+ +this.attachment.id+this.slotIndex},DeformTimeline2.prototype.setFrame=function(t,i,n){this.frames[t]=i,this.frameVertices[t]=n},DeformTimeline2.prototype.apply=function(n,o,a,u,d,f,b){var S=n.slots[this.slotIndex];if(S.bone.active){var M=S.getAttachment();if(M instanceof t.VertexAttachment&&M.deformAttachment==this.attachment){var C=S.deform;0==C.length&&(f=i.setup);var P=this.frameVertices,R=P[0].length,O=this.frames;if(a<O[0]){var B=M;switch(f){case i.setup:return void(C.length=0);case i.first:if(1==d){C.length=0;break}var N=t.Utils.setArraySize(C,R);if(null==B.bones)for(var Y=B.vertices,X=0;X<R;X++)N[X]+=(Y[X]-N[X])*d;else{d=1-d;for(X=0;X<R;X++)N[X]*=d}}}else{var G=t.Utils.setArraySize(C,R);if(a>=O[O.length-1]){var U=P[O.length-1];if(1==d)if(f==i.add)if(null==(B=M).bones){Y=B.vertices;for(var V=0;V<R;V++)G[V]+=U[V]-Y[V]}else for(var z=0;z<R;z++)G[z]+=U[z];else t.Utils.arrayCopy(U,0,G,0,R);else switch(f){case i.setup:var W=M;if(null==W.bones){Y=W.vertices;for(var H=0;H<R;H++){var j=Y[H];G[H]=j+(U[H]-j)*d}}else for(var q=0;q<R;q++)G[q]=U[q]*d;break;case i.first:case i.replace:for(var Z=0;Z<R;Z++)G[Z]+=(U[Z]-G[Z])*d;break;case i.add:if(null==(B=M).bones){Y=B.vertices;for(var K=0;K<R;K++)G[K]+=(U[K]-Y[K])*d}else for(var $=0;$<R;$++)G[$]+=U[$]*d}}else{var tt=p.binarySearch(O,a),et=P[tt-1],it=P[tt],nt=O[tt],st=this.getCurvePercent(tt-1,1-(a-nt)/(O[tt-1]-nt));if(1==d)if(f==i.add)if(null==(B=M).bones){Y=B.vertices;for(var rt=0;rt<R;rt++){var ot=et[rt];G[rt]+=ot+(it[rt]-ot)*st-Y[rt]}}else for(var at=0;at<R;at++){ot=et[at];G[at]+=ot+(it[at]-ot)*st}else for(var ht=0;ht<R;ht++){ot=et[ht];G[ht]=ot+(it[ht]-ot)*st}else switch(f){case i.setup:var lt=M;if(null==lt.bones){Y=lt.vertices;for(var ut=0;ut<R;ut++){ot=et[ut],j=Y[ut];G[ut]=j+(ot+(it[ut]-ot)*st-j)*d}}else for(var ct=0;ct<R;ct++){ot=et[ct];G[ct]=(ot+(it[ct]-ot)*st)*d}break;case i.first:case i.replace:for(var dt=0;dt<R;dt++){ot=et[dt];G[dt]+=(ot+(it[dt]-ot)*st-G[dt])*d}break;case i.add:if(null==(B=M).bones){Y=B.vertices;for(var ft=0;ft<R;ft++){ot=et[ft];G[ft]+=(ot+(it[ft]-ot)*st-Y[ft])*d}}else for(var pt=0;pt<R;pt++){ot=et[pt];G[pt]+=(ot+(it[pt]-ot)*st)*d}}}}}}},DeformTimeline2}(b);t.DeformTimeline=Y;var X=function(){function EventTimeline2(i){this.frames=t.Utils.newFloatArray(i),this.events=new Array(i)}return EventTimeline2.prototype.getPropertyId=function(){return u.event<<24},EventTimeline2.prototype.getFrameCount=function(){return this.frames.length},EventTimeline2.prototype.setFrame=function(t,i){this.frames[t]=i.time,this.events[t]=i},EventTimeline2.prototype.apply=function(t,i,n,o,a,u,d){if(null!=o){var f=this.frames,b=this.frames.length;if(i>n)this.apply(t,i,Number.MAX_VALUE,o,a,u,d),i=-1;else if(i>=f[b-1])return;if(!(n<f[0])){var S=0;if(i<f[0])S=0;else for(var M=f[S=p.binarySearch(f,i)];S>0&&f[S-1]==M;)S--;for(;S<b&&n>=f[S];S++)o.push(this.events[S])}}},EventTimeline2}();t.EventTimeline=X;var G=function(){function DrawOrderTimeline2(i){this.frames=t.Utils.newFloatArray(i),this.drawOrders=new Array(i)}return DrawOrderTimeline2.prototype.getPropertyId=function(){return u.drawOrder<<24},DrawOrderTimeline2.prototype.getFrameCount=function(){return this.frames.length},DrawOrderTimeline2.prototype.setFrame=function(t,i,n){this.frames[t]=i,this.drawOrders[t]=n},DrawOrderTimeline2.prototype.apply=function(n,a,u,d,f,b,S){var M=n.drawOrder,C=n.slots;if(S!=o.mixOut){var P=this.frames;if(u<P[0])b!=i.setup&&b!=i.first||t.Utils.arrayCopy(n.slots,0,n.drawOrder,0,n.slots.length);else{var R=0;R=u>=P[P.length-1]?P.length-1:p.binarySearch(P,u)-1;var O=this.drawOrders[R];if(null==O)t.Utils.arrayCopy(C,0,M,0,C.length);else for(var B=0,N=O.length;B<N;B++)M[B]=C[O[B]]}}else b==i.setup&&t.Utils.arrayCopy(n.slots,0,n.drawOrder,0,n.slots.length)},DrawOrderTimeline2}();t.DrawOrderTimeline=G;var U=function(n){function IkConstraintTimeline2(i){var o=n.call(this,i)||this;return o.frames=t.Utils.newFloatArray(i*IkConstraintTimeline2.ENTRIES),o}return d(IkConstraintTimeline2,n),IkConstraintTimeline2.prototype.getPropertyId=function(){return(u.ikConstraint<<24)+this.ikConstraintIndex},IkConstraintTimeline2.prototype.setFrame=function(t,i,n,o,a,u,d){t*=IkConstraintTimeline2.ENTRIES,this.frames[t]=i,this.frames[t+IkConstraintTimeline2.MIX]=n,this.frames[t+IkConstraintTimeline2.SOFTNESS]=o,this.frames[t+IkConstraintTimeline2.BEND_DIRECTION]=a,this.frames[t+IkConstraintTimeline2.COMPRESS]=u?1:0,this.frames[t+IkConstraintTimeline2.STRETCH]=d?1:0},IkConstraintTimeline2.prototype.apply=function(t,n,a,u,d,f,b){var S=this.frames,M=t.ikConstraints[this.ikConstraintIndex];if(M.active)if(a<S[0])switch(f){case i.setup:return M.mix=M.data.mix,M.softness=M.data.softness,M.bendDirection=M.data.bendDirection,M.compress=M.data.compress,void(M.stretch=M.data.stretch);case i.first:M.mix+=(M.data.mix-M.mix)*d,M.softness+=(M.data.softness-M.softness)*d,M.bendDirection=M.data.bendDirection,M.compress=M.data.compress,M.stretch=M.data.stretch}else if(a>=S[S.length-IkConstraintTimeline2.ENTRIES])f==i.setup?(M.mix=M.data.mix+(S[S.length+IkConstraintTimeline2.PREV_MIX]-M.data.mix)*d,M.softness=M.data.softness+(S[S.length+IkConstraintTimeline2.PREV_SOFTNESS]-M.data.softness)*d,b==o.mixOut?(M.bendDirection=M.data.bendDirection,M.compress=M.data.compress,M.stretch=M.data.stretch):(M.bendDirection=S[S.length+IkConstraintTimeline2.PREV_BEND_DIRECTION],M.compress=0!=S[S.length+IkConstraintTimeline2.PREV_COMPRESS],M.stretch=0!=S[S.length+IkConstraintTimeline2.PREV_STRETCH])):(M.mix+=(S[S.length+IkConstraintTimeline2.PREV_MIX]-M.mix)*d,M.softness+=(S[S.length+IkConstraintTimeline2.PREV_SOFTNESS]-M.softness)*d,b==o.mixIn&&(M.bendDirection=S[S.length+IkConstraintTimeline2.PREV_BEND_DIRECTION],M.compress=0!=S[S.length+IkConstraintTimeline2.PREV_COMPRESS],M.stretch=0!=S[S.length+IkConstraintTimeline2.PREV_STRETCH]));else{var C=p.binarySearch(S,a,IkConstraintTimeline2.ENTRIES),P=S[C+IkConstraintTimeline2.PREV_MIX],R=S[C+IkConstraintTimeline2.PREV_SOFTNESS],O=S[C],B=this.getCurvePercent(C/IkConstraintTimeline2.ENTRIES-1,1-(a-O)/(S[C+IkConstraintTimeline2.PREV_TIME]-O));f==i.setup?(M.mix=M.data.mix+(P+(S[C+IkConstraintTimeline2.MIX]-P)*B-M.data.mix)*d,M.softness=M.data.softness+(R+(S[C+IkConstraintTimeline2.SOFTNESS]-R)*B-M.data.softness)*d,b==o.mixOut?(M.bendDirection=M.data.bendDirection,M.compress=M.data.compress,M.stretch=M.data.stretch):(M.bendDirection=S[C+IkConstraintTimeline2.PREV_BEND_DIRECTION],M.compress=0!=S[C+IkConstraintTimeline2.PREV_COMPRESS],M.stretch=0!=S[C+IkConstraintTimeline2.PREV_STRETCH])):(M.mix+=(P+(S[C+IkConstraintTimeline2.MIX]-P)*B-M.mix)*d,M.softness+=(R+(S[C+IkConstraintTimeline2.SOFTNESS]-R)*B-M.softness)*d,b==o.mixIn&&(M.bendDirection=S[C+IkConstraintTimeline2.PREV_BEND_DIRECTION],M.compress=0!=S[C+IkConstraintTimeline2.PREV_COMPRESS],M.stretch=0!=S[C+IkConstraintTimeline2.PREV_STRETCH]))}},IkConstraintTimeline2.ENTRIES=6,IkConstraintTimeline2.PREV_TIME=-6,IkConstraintTimeline2.PREV_MIX=-5,IkConstraintTimeline2.PREV_SOFTNESS=-4,IkConstraintTimeline2.PREV_BEND_DIRECTION=-3,IkConstraintTimeline2.PREV_COMPRESS=-2,IkConstraintTimeline2.PREV_STRETCH=-1,IkConstraintTimeline2.MIX=1,IkConstraintTimeline2.SOFTNESS=2,IkConstraintTimeline2.BEND_DIRECTION=3,IkConstraintTimeline2.COMPRESS=4,IkConstraintTimeline2.STRETCH=5,IkConstraintTimeline2}(b);t.IkConstraintTimeline=U;var V=function(n){function TransformConstraintTimeline2(i){var o=n.call(this,i)||this;return o.frames=t.Utils.newFloatArray(i*TransformConstraintTimeline2.ENTRIES),o}return d(TransformConstraintTimeline2,n),TransformConstraintTimeline2.prototype.getPropertyId=function(){return(u.transformConstraint<<24)+this.transformConstraintIndex},TransformConstraintTimeline2.prototype.setFrame=function(t,i,n,o,a,u){t*=TransformConstraintTimeline2.ENTRIES,this.frames[t]=i,this.frames[t+TransformConstraintTimeline2.ROTATE]=n,this.frames[t+TransformConstraintTimeline2.TRANSLATE]=o,this.frames[t+TransformConstraintTimeline2.SCALE]=a,this.frames[t+TransformConstraintTimeline2.SHEAR]=u},TransformConstraintTimeline2.prototype.apply=function(t,n,o,a,u,d,f){var b=this.frames,S=t.transformConstraints[this.transformConstraintIndex];if(S.active)if(o<b[0]){var M=S.data;switch(d){case i.setup:return S.rotateMix=M.rotateMix,S.translateMix=M.translateMix,S.scaleMix=M.scaleMix,void(S.shearMix=M.shearMix);case i.first:S.rotateMix+=(M.rotateMix-S.rotateMix)*u,S.translateMix+=(M.translateMix-S.translateMix)*u,S.scaleMix+=(M.scaleMix-S.scaleMix)*u,S.shearMix+=(M.shearMix-S.shearMix)*u}}else{var C=0,P=0,R=0,O=0;if(o>=b[b.length-TransformConstraintTimeline2.ENTRIES]){var B=b.length;C=b[B+TransformConstraintTimeline2.PREV_ROTATE],P=b[B+TransformConstraintTimeline2.PREV_TRANSLATE],R=b[B+TransformConstraintTimeline2.PREV_SCALE],O=b[B+TransformConstraintTimeline2.PREV_SHEAR]}else{var N=p.binarySearch(b,o,TransformConstraintTimeline2.ENTRIES);C=b[N+TransformConstraintTimeline2.PREV_ROTATE],P=b[N+TransformConstraintTimeline2.PREV_TRANSLATE],R=b[N+TransformConstraintTimeline2.PREV_SCALE],O=b[N+TransformConstraintTimeline2.PREV_SHEAR];var Y=b[N],X=this.getCurvePercent(N/TransformConstraintTimeline2.ENTRIES-1,1-(o-Y)/(b[N+TransformConstraintTimeline2.PREV_TIME]-Y));C+=(b[N+TransformConstraintTimeline2.ROTATE]-C)*X,P+=(b[N+TransformConstraintTimeline2.TRANSLATE]-P)*X,R+=(b[N+TransformConstraintTimeline2.SCALE]-R)*X,O+=(b[N+TransformConstraintTimeline2.SHEAR]-O)*X}if(d==i.setup){M=S.data;S.rotateMix=M.rotateMix+(C-M.rotateMix)*u,S.translateMix=M.translateMix+(P-M.translateMix)*u,S.scaleMix=M.scaleMix+(R-M.scaleMix)*u,S.shearMix=M.shearMix+(O-M.shearMix)*u}else S.rotateMix+=(C-S.rotateMix)*u,S.translateMix+=(P-S.translateMix)*u,S.scaleMix+=(R-S.scaleMix)*u,S.shearMix+=(O-S.shearMix)*u}},TransformConstraintTimeline2.ENTRIES=5,TransformConstraintTimeline2.PREV_TIME=-5,TransformConstraintTimeline2.PREV_ROTATE=-4,TransformConstraintTimeline2.PREV_TRANSLATE=-3,TransformConstraintTimeline2.PREV_SCALE=-2,TransformConstraintTimeline2.PREV_SHEAR=-1,TransformConstraintTimeline2.ROTATE=1,TransformConstraintTimeline2.TRANSLATE=2,TransformConstraintTimeline2.SCALE=3,TransformConstraintTimeline2.SHEAR=4,TransformConstraintTimeline2}(b);t.TransformConstraintTimeline=V;var z=function(n){function PathConstraintPositionTimeline2(i){var o=n.call(this,i)||this;return o.frames=t.Utils.newFloatArray(i*PathConstraintPositionTimeline2.ENTRIES),o}return d(PathConstraintPositionTimeline2,n),PathConstraintPositionTimeline2.prototype.getPropertyId=function(){return(u.pathConstraintPosition<<24)+this.pathConstraintIndex},PathConstraintPositionTimeline2.prototype.setFrame=function(t,i,n){t*=PathConstraintPositionTimeline2.ENTRIES,this.frames[t]=i,this.frames[t+PathConstraintPositionTimeline2.VALUE]=n},PathConstraintPositionTimeline2.prototype.apply=function(t,n,o,a,u,d,f){var b=this.frames,S=t.pathConstraints[this.pathConstraintIndex];if(S.active)if(o<b[0])switch(d){case i.setup:return void(S.position=S.data.position);case i.first:S.position+=(S.data.position-S.position)*u}else{var M=0;if(o>=b[b.length-PathConstraintPositionTimeline2.ENTRIES])M=b[b.length+PathConstraintPositionTimeline2.PREV_VALUE];else{var C=p.binarySearch(b,o,PathConstraintPositionTimeline2.ENTRIES);M=b[C+PathConstraintPositionTimeline2.PREV_VALUE];var P=b[C],R=this.getCurvePercent(C/PathConstraintPositionTimeline2.ENTRIES-1,1-(o-P)/(b[C+PathConstraintPositionTimeline2.PREV_TIME]-P));M+=(b[C+PathConstraintPositionTimeline2.VALUE]-M)*R}d==i.setup?S.position=S.data.position+(M-S.data.position)*u:S.position+=(M-S.position)*u}},PathConstraintPositionTimeline2.ENTRIES=2,PathConstraintPositionTimeline2.PREV_TIME=-2,PathConstraintPositionTimeline2.PREV_VALUE=-1,PathConstraintPositionTimeline2.VALUE=1,PathConstraintPositionTimeline2}(b);t.PathConstraintPositionTimeline=z;var W=function(t){function PathConstraintSpacingTimeline2(i){return t.call(this,i)||this}return d(PathConstraintSpacingTimeline2,t),PathConstraintSpacingTimeline2.prototype.getPropertyId=function(){return(u.pathConstraintSpacing<<24)+this.pathConstraintIndex},PathConstraintSpacingTimeline2.prototype.apply=function(t,n,o,a,u,d,f){var b=this.frames,S=t.pathConstraints[this.pathConstraintIndex];if(S.active)if(o<b[0])switch(d){case i.setup:return void(S.spacing=S.data.spacing);case i.first:S.spacing+=(S.data.spacing-S.spacing)*u}else{var M=0;if(o>=b[b.length-PathConstraintSpacingTimeline2.ENTRIES])M=b[b.length+PathConstraintSpacingTimeline2.PREV_VALUE];else{var C=p.binarySearch(b,o,PathConstraintSpacingTimeline2.ENTRIES);M=b[C+PathConstraintSpacingTimeline2.PREV_VALUE];var P=b[C],R=this.getCurvePercent(C/PathConstraintSpacingTimeline2.ENTRIES-1,1-(o-P)/(b[C+PathConstraintSpacingTimeline2.PREV_TIME]-P));M+=(b[C+PathConstraintSpacingTimeline2.VALUE]-M)*R}d==i.setup?S.spacing=S.data.spacing+(M-S.data.spacing)*u:S.spacing+=(M-S.spacing)*u}},PathConstraintSpacingTimeline2}(z);t.PathConstraintSpacingTimeline=W;var H=function(n){function PathConstraintMixTimeline2(i){var o=n.call(this,i)||this;return o.frames=t.Utils.newFloatArray(i*PathConstraintMixTimeline2.ENTRIES),o}return d(PathConstraintMixTimeline2,n),PathConstraintMixTimeline2.prototype.getPropertyId=function(){return(u.pathConstraintMix<<24)+this.pathConstraintIndex},PathConstraintMixTimeline2.prototype.setFrame=function(t,i,n,o){t*=PathConstraintMixTimeline2.ENTRIES,this.frames[t]=i,this.frames[t+PathConstraintMixTimeline2.ROTATE]=n,this.frames[t+PathConstraintMixTimeline2.TRANSLATE]=o},PathConstraintMixTimeline2.prototype.apply=function(t,n,o,a,u,d,f){var b=this.frames,S=t.pathConstraints[this.pathConstraintIndex];if(S.active)if(o<b[0])switch(d){case i.setup:return S.rotateMix=S.data.rotateMix,void(S.translateMix=S.data.translateMix);case i.first:S.rotateMix+=(S.data.rotateMix-S.rotateMix)*u,S.translateMix+=(S.data.translateMix-S.translateMix)*u}else{var M=0,C=0;if(o>=b[b.length-PathConstraintMixTimeline2.ENTRIES])M=b[b.length+PathConstraintMixTimeline2.PREV_ROTATE],C=b[b.length+PathConstraintMixTimeline2.PREV_TRANSLATE];else{var P=p.binarySearch(b,o,PathConstraintMixTimeline2.ENTRIES);M=b[P+PathConstraintMixTimeline2.PREV_ROTATE],C=b[P+PathConstraintMixTimeline2.PREV_TRANSLATE];var R=b[P],O=this.getCurvePercent(P/PathConstraintMixTimeline2.ENTRIES-1,1-(o-R)/(b[P+PathConstraintMixTimeline2.PREV_TIME]-R));M+=(b[P+PathConstraintMixTimeline2.ROTATE]-M)*O,C+=(b[P+PathConstraintMixTimeline2.TRANSLATE]-C)*O}d==i.setup?(S.rotateMix=S.data.rotateMix+(M-S.data.rotateMix)*u,S.translateMix=S.data.translateMix+(C-S.data.translateMix)*u):(S.rotateMix+=(M-S.rotateMix)*u,S.translateMix+=(C-S.translateMix)*u)}},PathConstraintMixTimeline2.ENTRIES=3,PathConstraintMixTimeline2.PREV_TIME=-3,PathConstraintMixTimeline2.PREV_ROTATE=-2,PathConstraintMixTimeline2.PREV_TRANSLATE=-1,PathConstraintMixTimeline2.ROTATE=1,PathConstraintMixTimeline2.TRANSLATE=2,PathConstraintMixTimeline2}(b);t.PathConstraintMixTimeline=H}(u||(u={})),function(t){var i=function(){function AnimationState2(i){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new u(this),this.propertyIDs=new t.IntSet,this.animationsChanged=!1,this.trackEntryPool=new t.Pool((function(){return new n})),this.data=i}return AnimationState2.prototype.update=function(t){t*=this.timeScale;for(var i=this.tracks,n=0,o=i.length;n<o;n++){var a=i[n];if(null!=a){a.animationLast=a.nextAnimationLast,a.trackLast=a.nextTrackLast;var u=t*a.timeScale;if(a.delay>0){if(a.delay-=u,a.delay>0)continue;u=-a.delay,a.delay=0}var d=a.next;if(null!=d){var f=a.trackLast-d.delay;if(f>=0){for(d.delay=0,d.trackTime+=0==a.timeScale?0:(f/a.timeScale+t)*d.timeScale,a.trackTime+=u,this.setCurrent(n,d,!0);null!=d.mixingFrom;)d.mixTime+=t,d=d.mixingFrom;continue}}else if(a.trackLast>=a.trackEnd&&null==a.mixingFrom){i[n]=null,this.queue.end(a),this.disposeNext(a);continue}if(null!=a.mixingFrom&&this.updateMixingFrom(a,t)){var p=a.mixingFrom;for(a.mixingFrom=null,null!=p&&(p.mixingTo=null);null!=p;)this.queue.end(p),p=p.mixingFrom}a.trackTime+=u}}this.queue.drain()},AnimationState2.prototype.updateMixingFrom=function(t,i){var n=t.mixingFrom;if(null==n)return!0;var o=this.updateMixingFrom(n,i);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=n.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=n.mixingFrom,null!=n.mixingFrom&&(n.mixingFrom.mixingTo=t),t.interruptAlpha=n.interruptAlpha,this.queue.end(n)),o):(n.trackTime+=i*n.timeScale,t.mixTime+=i,!1)},AnimationState2.prototype.apply=function(i){if(null==i)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var n=this.events,o=this.tracks,a=!1,u=0,d=o.length;u<d;u++){var f=o[u];if(!(null==f||f.delay>0)){a=!0;var p=0==u?t.MixBlend.first:f.mixBlend,b=f.alpha;null!=f.mixingFrom?b*=this.applyMixingFrom(f,i,p):f.trackTime>=f.trackEnd&&null==f.next&&(b=0);var S=f.animationLast,M=f.getAnimationTime(),C=f.animation.timelines.length,P=f.animation.timelines;if(0==u&&1==b||p==t.MixBlend.add)for(var R=0;R<C;R++){t.Utils.webkit602BugfixHelper(b,p);var O=P[R];O instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(O,i,M,p,!0):O.apply(i,S,M,n,b,p,t.MixDirection.mixIn)}else{var B=f.timelineMode,N=0==f.timelinesRotation.length;N&&t.Utils.setArraySize(f.timelinesRotation,C<<1,null);var Y=f.timelinesRotation;for(R=0;R<C;R++){var X=P[R],G=B[R]==AnimationState2.SUBSEQUENT?p:t.MixBlend.setup;X instanceof t.RotateTimeline?this.applyRotateTimeline(X,i,M,b,G,Y,R<<1,N):X instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(X,i,M,p,!0):(t.Utils.webkit602BugfixHelper(b,p),X.apply(i,S,M,n,b,G,t.MixDirection.mixIn))}}this.queueEvents(f,M),n.length=0,f.nextAnimationLast=M,f.nextTrackLast=f.trackTime}}for(var U=this.unkeyedState+AnimationState2.SETUP,V=i.slots,z=0,W=i.slots.length;z<W;z++){var H=V[z];if(H.attachmentState==U){var j=H.data.attachmentName;H.attachment=null==j?null:i.getAttachment(H.data.index,j)}}return this.unkeyedState+=2,this.queue.drain(),a},AnimationState2.prototype.applyMixingFrom=function(i,n,o){var a=i.mixingFrom;null!=a.mixingFrom&&this.applyMixingFrom(a,n,o);var u=0;0==i.mixDuration?(u=1,o==t.MixBlend.first&&(o=t.MixBlend.setup)):((u=i.mixTime/i.mixDuration)>1&&(u=1),o!=t.MixBlend.first&&(o=a.mixBlend));var d=u<a.eventThreshold?this.events:null,f=u<a.attachmentThreshold,p=u<a.drawOrderThreshold,b=a.animationLast,S=a.getAnimationTime(),M=a.animation.timelines.length,C=a.animation.timelines,P=a.alpha*i.interruptAlpha,R=P*(1-u);if(o==t.MixBlend.add)for(var O=0;O<M;O++)C[O].apply(n,b,S,d,R,o,t.MixDirection.mixOut);else{var B=a.timelineMode,N=a.timelineHoldMix,Y=0==a.timelinesRotation.length;Y&&t.Utils.setArraySize(a.timelinesRotation,M<<1,null);var X=a.timelinesRotation;a.totalAlpha=0;for(O=0;O<M;O++){var G=C[O],U=t.MixDirection.mixOut,V=void 0,z=0;switch(B[O]){case AnimationState2.SUBSEQUENT:if(!p&&G instanceof t.DrawOrderTimeline)continue;V=o,z=R;break;case AnimationState2.FIRST:V=t.MixBlend.setup,z=R;break;case AnimationState2.HOLD_SUBSEQUENT:V=o,z=P;break;case AnimationState2.HOLD_FIRST:V=t.MixBlend.setup,z=P;break;default:V=t.MixBlend.setup;var W=N[O];z=P*Math.max(0,1-W.mixTime/W.mixDuration)}a.totalAlpha+=z,G instanceof t.RotateTimeline?this.applyRotateTimeline(G,n,S,z,V,X,O<<1,Y):G instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(G,n,S,V,f):(t.Utils.webkit602BugfixHelper(z,o),p&&G instanceof t.DrawOrderTimeline&&V==t.MixBlend.setup&&(U=t.MixDirection.mixIn),G.apply(n,b,S,d,z,V,U))}}return i.mixDuration>0&&this.queueEvents(a,S),this.events.length=0,a.nextAnimationLast=S,a.nextTrackLast=a.trackTime,u},AnimationState2.prototype.applyAttachmentTimeline=function(i,n,o,a,u){var d=n.slots[i.slotIndex];if(d.bone.active){var f,p=i.frames;if(o<p[0])a!=t.MixBlend.setup&&a!=t.MixBlend.first||this.setAttachment(n,d,d.data.attachmentName,u);else f=o>=p[p.length-1]?p.length-1:t.Animation.binarySearch(p,o)-1,this.setAttachment(n,d,i.attachmentNames[f],u);d.attachmentState<=this.unkeyedState&&(d.attachmentState=this.unkeyedState+AnimationState2.SETUP)}},AnimationState2.prototype.setAttachment=function(t,i,n,o){i.attachment=null==n?null:t.getAttachment(i.data.index,n),o&&(i.attachmentState=this.unkeyedState+AnimationState2.CURRENT)},AnimationState2.prototype.applyRotateTimeline=function(i,n,o,a,u,d,f,p){if(p&&(d[f]=0),1!=a){var b=i,S=b.frames,M=n.bones[b.boneIndex];if(M.active){var C=0,P=0;if(o<S[0])switch(u){case t.MixBlend.setup:M.rotation=M.data.rotation;default:return;case t.MixBlend.first:C=M.rotation,P=M.data.rotation}else if(C=u==t.MixBlend.setup?M.data.rotation:M.rotation,o>=S[S.length-t.RotateTimeline.ENTRIES])P=M.data.rotation+S[S.length+t.RotateTimeline.PREV_ROTATION];else{var R=t.Animation.binarySearch(S,o,t.RotateTimeline.ENTRIES),O=S[R+t.RotateTimeline.PREV_ROTATION],B=S[R],N=b.getCurvePercent((R>>1)-1,1-(o-B)/(S[R+t.RotateTimeline.PREV_TIME]-B));P=S[R+t.RotateTimeline.ROTATION]-O,P=O+(P-=360*(16384-(16384.499999999996-P/360|0)))*N+M.data.rotation,P-=360*(16384-(16384.499999999996-P/360|0))}var Y=0,X=P-C;if(0==(X-=360*(16384-(16384.499999999996-X/360|0))))Y=d[f];else{var G=0,U=0;p?(G=0,U=X):(G=d[f],U=d[f+1]);var V=X>0,z=G>=0;t.MathUtils.signum(U)!=t.MathUtils.signum(X)&&Math.abs(U)<=90&&(Math.abs(G)>180&&(G+=360*t.MathUtils.signum(G)),z=V),Y=X+G-G%360,z!=V&&(Y+=360*t.MathUtils.signum(G)),d[f]=Y}d[f+1]=X,C+=Y*a,M.rotation=C-360*(16384-(16384.499999999996-C/360|0))}}else i.apply(n,0,o,null,1,u,t.MixDirection.mixIn)},AnimationState2.prototype.queueEvents=function(t,i){for(var n=t.animationStart,o=t.animationEnd,a=o-n,u=t.trackLast%a,d=this.events,f=0,p=d.length;f<p;f++){var b=d[f];if(b.time<u)break;b.time>o||this.queue.event(t,b)}for((t.loop?0==a||u>t.trackTime%a:i>=o&&t.animationLast<o)&&this.queue.complete(t);f<p;f++){d[f].time<n||this.queue.event(t,d[f])}},AnimationState2.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var i=0,n=this.tracks.length;i<n;i++)this.clearTrack(i);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},AnimationState2.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var i=this.tracks[t];if(null!=i){this.queue.end(i),this.disposeNext(i);for(var n=i;;){var o=n.mixingFrom;if(null==o)break;this.queue.end(o),n.mixingFrom=null,n.mixingTo=null,n=o}this.tracks[i.trackIndex]=null,this.queue.drain()}}},AnimationState2.prototype.setCurrent=function(t,i,n){var o=this.expandToIndex(t);this.tracks[t]=i,null!=o&&(n&&this.queue.interrupt(o),i.mixingFrom=o,o.mixingTo=i,i.mixTime=0,null!=o.mixingFrom&&o.mixDuration>0&&(i.interruptAlpha*=Math.min(1,o.mixTime/o.mixDuration)),o.timelinesRotation.length=0),this.queue.start(i)},AnimationState2.prototype.setAnimation=function(t,i,n){var o=this.data.skeletonData.findAnimation(i);if(null==o)throw new Error("Animation not found: "+i);return this.setAnimationWith(t,o,n)},AnimationState2.prototype.setAnimationWith=function(t,i,n){if(null==i)throw new Error("animation cannot be null.");var o=!0,a=this.expandToIndex(t);null!=a&&(-1==a.nextTrackLast?(this.tracks[t]=a.mixingFrom,this.queue.interrupt(a),this.queue.end(a),this.disposeNext(a),a=a.mixingFrom,o=!1):this.disposeNext(a));var u=this.trackEntry(t,i,n,a);return this.setCurrent(t,u,o),this.queue.drain(),u},AnimationState2.prototype.addAnimation=function(t,i,n,o){var a=this.data.skeletonData.findAnimation(i);if(null==a)throw new Error("Animation not found: "+i);return this.addAnimationWith(t,a,n,o)},AnimationState2.prototype.addAnimationWith=function(t,i,n,o){if(null==i)throw new Error("animation cannot be null.");var a=this.expandToIndex(t);if(null!=a)for(;null!=a.next;)a=a.next;var u=this.trackEntry(t,i,n,a);if(null==a)this.setCurrent(t,u,!0),this.queue.drain();else if(a.next=u,o<=0){var d=a.animationEnd-a.animationStart;0!=d?(a.loop?o+=d*(1+(a.trackTime/d|0)):o+=Math.max(d,a.trackTime),o-=this.data.getMix(a.animation,i)):o=a.trackTime}return u.delay=o,u},AnimationState2.prototype.setEmptyAnimation=function(t,i){var n=this.setAnimationWith(t,AnimationState2.emptyAnimation,!1);return n.mixDuration=i,n.trackEnd=i,n},AnimationState2.prototype.addEmptyAnimation=function(t,i,n){n<=0&&(n-=i);var o=this.addAnimationWith(t,AnimationState2.emptyAnimation,!1,n);return o.mixDuration=i,o.trackEnd=i,o},AnimationState2.prototype.setEmptyAnimations=function(t){var i=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var n=0,o=this.tracks.length;n<o;n++){var a=this.tracks[n];null!=a&&this.setEmptyAnimation(a.trackIndex,t)}this.queue.drainDisabled=i,this.queue.drain()},AnimationState2.prototype.expandToIndex=function(i){return i<this.tracks.length?this.tracks[i]:(t.Utils.ensureArrayCapacity(this.tracks,i+1,null),this.tracks.length=i+1,null)},AnimationState2.prototype.trackEntry=function(i,n,o,a){var u=this.trackEntryPool.obtain();return u.trackIndex=i,u.animation=n,u.loop=o,u.holdPrevious=!1,u.eventThreshold=0,u.attachmentThreshold=0,u.drawOrderThreshold=0,u.animationStart=0,u.animationEnd=n.duration,u.animationLast=-1,u.nextAnimationLast=-1,u.delay=0,u.trackTime=0,u.trackLast=-1,u.nextTrackLast=-1,u.trackEnd=Number.MAX_VALUE,u.timeScale=1,u.alpha=1,u.interruptAlpha=1,u.mixTime=0,u.mixDuration=null==a?0:this.data.getMix(a.animation,n),u.mixBlend=t.MixBlend.replace,u},AnimationState2.prototype.disposeNext=function(t){for(var i=t.next;null!=i;)this.queue.dispose(i),i=i.next;t.next=null},AnimationState2.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var i=0,n=this.tracks.length;i<n;i++){var o=this.tracks[i];if(null!=o){for(;null!=o.mixingFrom;)o=o.mixingFrom;do{null!=o.mixingFrom&&o.mixBlend==t.MixBlend.add||this.computeHold(o),o=o.mixingTo}while(null!=o)}}},AnimationState2.prototype.computeHold=function(i){var n=i.mixingTo,o=i.animation.timelines,a=i.animation.timelines.length,u=t.Utils.setArraySize(i.timelineMode,a);i.timelineHoldMix.length=0;var d=t.Utils.setArraySize(i.timelineHoldMix,a),f=this.propertyIDs;if(null!=n&&n.holdPrevious)for(var p=0;p<a;p++)u[p]=f.add(o[p].getPropertyId())?AnimationState2.HOLD_FIRST:AnimationState2.HOLD_SUBSEQUENT;else t:for(p=0;p<a;p++){var b=o[p],S=b.getPropertyId();if(f.add(S))if(null==n||b instanceof t.AttachmentTimeline||b instanceof t.DrawOrderTimeline||b instanceof t.EventTimeline||!n.animation.hasTimeline(S))u[p]=AnimationState2.FIRST;else{for(var M=n.mixingTo;null!=M;M=M.mixingTo)if(!M.animation.hasTimeline(S)){if(i.mixDuration>0){u[p]=AnimationState2.HOLD_MIX,d[p]=M;continue t}break}u[p]=AnimationState2.HOLD_FIRST}else u[p]=AnimationState2.SUBSEQUENT}},AnimationState2.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},AnimationState2.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},AnimationState2.prototype.removeListener=function(t){var i=this.listeners.indexOf(t);i>=0&&this.listeners.splice(i,1)},AnimationState2.prototype.clearListeners=function(){this.listeners.length=0},AnimationState2.prototype.clearListenerNotifications=function(){this.queue.clear()},AnimationState2.emptyAnimation=new t.Animation("<empty>",[],0),AnimationState2.SUBSEQUENT=0,AnimationState2.FIRST=1,AnimationState2.HOLD_SUBSEQUENT=2,AnimationState2.HOLD_FIRST=3,AnimationState2.HOLD_MIX=4,AnimationState2.SETUP=1,AnimationState2.CURRENT=2,AnimationState2}();t.AnimationState=i;var n=function(){function TrackEntry2(){this.mixBlend=t.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return TrackEntry2.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},TrackEntry2.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},TrackEntry2.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},TrackEntry2.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},TrackEntry2.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},TrackEntry2}();t.TrackEntry=n;var o,a,u=function(){function EventQueue2(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return EventQueue2.prototype.start=function(t){this.objects.push(o.start),this.objects.push(t),this.animState.animationsChanged=!0},EventQueue2.prototype.interrupt=function(t){this.objects.push(o.interrupt),this.objects.push(t)},EventQueue2.prototype.end=function(t){this.objects.push(o.end),this.objects.push(t),this.animState.animationsChanged=!0},EventQueue2.prototype.dispose=function(t){this.objects.push(o.dispose),this.objects.push(t)},EventQueue2.prototype.complete=function(t){this.objects.push(o.complete),this.objects.push(t)},EventQueue2.prototype.event=function(t,i){this.objects.push(o.event),this.objects.push(t),this.objects.push(i)},EventQueue2.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,i=this.animState.listeners,n=0;n<t.length;n+=2){var a=t[n],u=t[n+1];switch(a){case o.start:null!=u.listener&&u.listener.start&&u.listener.start(u);for(var d=0;d<i.length;d++)i[d].start&&i[d].start(u);break;case o.interrupt:null!=u.listener&&u.listener.interrupt&&u.listener.interrupt(u);for(d=0;d<i.length;d++)i[d].interrupt&&i[d].interrupt(u);break;case o.end:null!=u.listener&&u.listener.end&&u.listener.end(u);for(d=0;d<i.length;d++)i[d].end&&i[d].end(u);case o.dispose:null!=u.listener&&u.listener.dispose&&u.listener.dispose(u);for(d=0;d<i.length;d++)i[d].dispose&&i[d].dispose(u);this.animState.trackEntryPool.free(u);break;case o.complete:null!=u.listener&&u.listener.complete&&u.listener.complete(u);for(d=0;d<i.length;d++)i[d].complete&&i[d].complete(u);break;case o.event:var f=t[2+n++];null!=u.listener&&u.listener.event&&u.listener.event(u,f);for(d=0;d<i.length;d++)i[d].event&&i[d].event(u,f)}}this.clear(),this.drainDisabled=!1}},EventQueue2.prototype.clear=function(){this.objects.length=0},EventQueue2}();t.EventQueue=u,(a=o=t.EventType||(t.EventType={}))[a.start=0]="start",a[a.interrupt=1]="interrupt",a[a.end=2]="end",a[a.dispose=3]="dispose",a[a.complete=4]="complete",a[a.event=5]="event";var d=function(){function AnimationStateAdapter2(){}return AnimationStateAdapter2.prototype.start=function(t){},AnimationStateAdapter2.prototype.interrupt=function(t){},AnimationStateAdapter2.prototype.end=function(t){},AnimationStateAdapter2.prototype.dispose=function(t){},AnimationStateAdapter2.prototype.complete=function(t){},AnimationStateAdapter2.prototype.event=function(t,i){},AnimationStateAdapter2}();t.AnimationStateAdapter=d}(u||(u={})),n=u||(u={}),o=function(){function AnimationStateData2(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return AnimationStateData2.prototype.setMix=function(t,i,n){var o=this.skeletonData.findAnimation(t);if(null==o)throw new Error("Animation not found: "+t);var a=this.skeletonData.findAnimation(i);if(null==a)throw new Error("Animation not found: "+i);this.setMixWith(o,a,n)},AnimationStateData2.prototype.setMixWith=function(t,i,n){if(null==t)throw new Error("from cannot be null.");if(null==i)throw new Error("to cannot be null.");var o=t.name+"."+i.name;this.animationToMixTime[o]=n},AnimationStateData2.prototype.getMix=function(t,i){var n=t.name+"."+i.name,o=this.animationToMixTime[n];return void 0===o?this.defaultMix:o},AnimationStateData2}(),n.AnimationStateData=o,function(t){var i=function(){function AssetManager2(t,i){void 0===i&&(i=""),this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.rawDataUris={},this.textureLoader=t,this.pathPrefix=i}return AssetManager2.prototype.downloadText=function(t,i,n){var o=new XMLHttpRequest;o.overrideMimeType("text/html"),this.rawDataUris[t]&&(t=this.rawDataUris[t]),o.open("GET",t,!0),o.onload=function(){200==o.status?i(o.responseText):n(o.status,o.responseText)},o.onerror=function(){n(o.status,o.responseText)},o.send()},AssetManager2.prototype.downloadBinary=function(t,i,n){var o=new XMLHttpRequest;this.rawDataUris[t]&&(t=this.rawDataUris[t]),o.open("GET",t,!0),o.responseType="arraybuffer",o.onload=function(){200==o.status?i(new Uint8Array(o.response)):n(o.status,o.responseText)},o.onerror=function(){n(o.status,o.responseText)},o.send()},AssetManager2.prototype.setRawDataURI=function(t,i){this.rawDataUris[this.pathPrefix+t]=i},AssetManager2.prototype.loadBinary=function(t,i,n){var o=this;void 0===i&&(i=null),void 0===n&&(n=null),t=this.pathPrefix+t,this.toLoad++,this.downloadBinary(t,(function(n){o.assets[t]=n,i&&i(t,n),o.toLoad--,o.loaded++}),(function(i,a){o.errors[t]="Couldn't load binary "+t+": status "+status+", "+a,n&&n(t,"Couldn't load binary "+t+": status "+status+", "+a),o.toLoad--,o.loaded++}))},AssetManager2.prototype.loadText=function(t,i,n){var o=this;void 0===i&&(i=null),void 0===n&&(n=null),t=this.pathPrefix+t,this.toLoad++,this.downloadText(t,(function(n){o.assets[t]=n,i&&i(t,n),o.toLoad--,o.loaded++}),(function(i,a){o.errors[t]="Couldn't load text "+t+": status "+status+", "+a,n&&n(t,"Couldn't load text "+t+": status "+status+", "+a),o.toLoad--,o.loaded++}))},AssetManager2.prototype.loadTexture=function(t,i,n){var o=this;void 0===i&&(i=null),void 0===n&&(n=null);var a=t=this.pathPrefix+t;this.toLoad++;var u=new Image;u.crossOrigin="anonymous",u.onload=function(n){var d=o.textureLoader(u);o.assets[a]=d,o.toLoad--,o.loaded++,i&&i(t,u)},u.onerror=function(i){o.errors[t]="Couldn't load image "+t,o.toLoad--,o.loaded++,n&&n(t,"Couldn't load image "+t)},this.rawDataUris[t]&&(t=this.rawDataUris[t]),u.src=t},AssetManager2.prototype.loadTextureAtlas=function(i,n,o){var a=this;void 0===n&&(n=null),void 0===o&&(o=null);var u=i.lastIndexOf("/")>=0?i.substring(0,i.lastIndexOf("/")):"";i=this.pathPrefix+i,this.toLoad++,this.downloadText(i,(function(d){var f={count:0},p=new Array;try{new t.TextureAtlas(d,(function(i){p.push(""==u?i:u+"/"+i);var n=document.createElement("img");return n.width=16,n.height=16,new t.FakeTexture(n)}))}catch(C){var b=C;return a.errors[i]="Couldn't load texture atlas "+i+": "+b.message,o&&o(i,"Couldn't load texture atlas "+i+": "+b.message),a.toLoad--,void a.loaded++}for(var _loop_1=function(b){var S=!1;a.loadTexture(b,(function(b,M){if(f.count++,f.count==p.length)if(S)a.errors[i]="Couldn't load texture atlas page "+b+"} of atlas "+i,o&&o(i,"Couldn't load texture atlas page "+b+" of atlas "+i),a.toLoad--,a.loaded++;else try{var P=new t.TextureAtlas(d,(function(t){return a.get(""==u?t:u+"/"+t)}));a.assets[i]=P,n&&n(i,P),a.toLoad--,a.loaded++}catch(C){var R=C;a.errors[i]="Couldn't load texture atlas "+i+": "+R.message,o&&o(i,"Couldn't load texture atlas "+i+": "+R.message),a.toLoad--,a.loaded++}}),(function(t,n){S=!0,f.count++,f.count==p.length&&(a.errors[i]="Couldn't load texture atlas page "+t+"} of atlas "+i,o&&o(i,"Couldn't load texture atlas page "+t+" of atlas "+i),a.toLoad--,a.loaded++)}))},S=0,M=p;S<M.length;S++){_loop_1(M[S])}}),(function(t,n){a.errors[i]="Couldn't load texture atlas "+i+": status "+status+", "+n,o&&o(i,"Couldn't load texture atlas "+i+": status "+status+", "+n),a.toLoad--,a.loaded++}))},AssetManager2.prototype.get=function(t){return t=this.pathPrefix+t,this.assets[t]},AssetManager2.prototype.remove=function(t){t=this.pathPrefix+t;var i=this.assets[t];i.dispose&&i.dispose(),this.assets[t]=null},AssetManager2.prototype.removeAll=function(){for(var t in this.assets){var i=this.assets[t];i.dispose&&i.dispose()}this.assets={}},AssetManager2.prototype.isLoadingComplete=function(){return 0==this.toLoad},AssetManager2.prototype.getToLoad=function(){return this.toLoad},AssetManager2.prototype.getLoaded=function(){return this.loaded},AssetManager2.prototype.dispose=function(){this.removeAll()},AssetManager2.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},AssetManager2.prototype.getErrors=function(){return this.errors},AssetManager2}();t.AssetManager=i}(u||(u={})),function(t){var i=function(){function AtlasAttachmentLoader2(t){this.atlas=t}return AtlasAttachmentLoader2.prototype.newRegionAttachment=function(i,n,o){var a=this.atlas.findRegion(o);if(null==a)throw new Error("Region not found in atlas: "+o+" (region attachment: "+n+")");a.renderObject=a;var u=new t.RegionAttachment(n);return u.setRegion(a),u},AtlasAttachmentLoader2.prototype.newMeshAttachment=function(i,n,o){var a=this.atlas.findRegion(o);if(null==a)throw new Error("Region not found in atlas: "+o+" (mesh attachment: "+n+")");a.renderObject=a;var u=new t.MeshAttachment(n);return u.region=a,u},AtlasAttachmentLoader2.prototype.newBoundingBoxAttachment=function(i,n){return new t.BoundingBoxAttachment(n)},AtlasAttachmentLoader2.prototype.newPathAttachment=function(i,n){return new t.PathAttachment(n)},AtlasAttachmentLoader2.prototype.newPointAttachment=function(i,n){return new t.PointAttachment(n)},AtlasAttachmentLoader2.prototype.newClippingAttachment=function(i,n){return new t.ClippingAttachment(n)},AtlasAttachmentLoader2}();t.AtlasAttachmentLoader=i}(u||(u={})),function(t){var i;(i=t.BlendMode||(t.BlendMode={}))[i.Normal=0]="Normal",i[i.Additive=1]="Additive",i[i.Multiply=2]="Multiply",i[i.Screen=3]="Screen"}(u||(u={})),function(t){var i=function(){function Bone2(t,i,n){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==i)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=i,this.parent=n,this.setToSetupPose()}return Bone2.prototype.isActive=function(){return this.active},Bone2.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},Bone2.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},Bone2.prototype.updateWorldTransformWith=function(i,n,o,a,u,d,f){this.ax=i,this.ay=n,this.arotation=o,this.ascaleX=a,this.ascaleY=u,this.ashearX=d,this.ashearY=f,this.appliedValid=!0;var p=this.parent;if(null==p){var b=this.skeleton,S=o+90+f,M=b.scaleX,C=b.scaleY;return this.a=t.MathUtils.cosDeg(o+d)*a*M,this.b=t.MathUtils.cosDeg(S)*u*M,this.c=t.MathUtils.sinDeg(o+d)*a*C,this.d=t.MathUtils.sinDeg(S)*u*C,this.worldX=i*M+b.x,void(this.worldY=n*C+b.y)}var P=p.a,R=p.b,O=p.c,B=p.d;switch(this.worldX=P*i+R*n+p.worldX,this.worldY=O*i+B*n+p.worldY,this.data.transformMode){case t.TransformMode.Normal:S=o+90+f;var N=t.MathUtils.cosDeg(o+d)*a,Y=t.MathUtils.cosDeg(S)*u,X=t.MathUtils.sinDeg(o+d)*a,G=t.MathUtils.sinDeg(S)*u;return this.a=P*N+R*X,this.b=P*Y+R*G,this.c=O*N+B*X,void(this.d=O*Y+B*G);case t.TransformMode.OnlyTranslation:S=o+90+f;this.a=t.MathUtils.cosDeg(o+d)*a,this.b=t.MathUtils.cosDeg(S)*u,this.c=t.MathUtils.sinDeg(o+d)*a,this.d=t.MathUtils.sinDeg(S)*u;break;case t.TransformMode.NoRotationOrReflection:var U=0;(W=P*P+O*O)>1e-4?(W=Math.abs(P*B-R*O)/W,P/=this.skeleton.scaleX,R=(O/=this.skeleton.scaleY)*W,B=P*W,U=Math.atan2(O,P)*t.MathUtils.radDeg):(P=0,O=0,U=90-Math.atan2(B,R)*t.MathUtils.radDeg);var V=o+d-U,z=o+f-U+90;N=t.MathUtils.cosDeg(V)*a,Y=t.MathUtils.cosDeg(z)*u,X=t.MathUtils.sinDeg(V)*a,G=t.MathUtils.sinDeg(z)*u;this.a=P*N-R*X,this.b=P*Y-R*G,this.c=O*N+B*X,this.d=O*Y+B*G;break;case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:var W,H=t.MathUtils.cosDeg(o),j=t.MathUtils.sinDeg(o),q=(P*H+R*j)/this.skeleton.scaleX,Z=(O*H+B*j)/this.skeleton.scaleY;(W=Math.sqrt(q*q+Z*Z))>1e-5&&(W=1/W),q*=W,Z*=W,W=Math.sqrt(q*q+Z*Z),this.data.transformMode==t.TransformMode.NoScale&&P*B-R*O<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(W=-W);var K=Math.PI/2+Math.atan2(Z,q),$=Math.cos(K)*W,tt=Math.sin(K)*W;N=t.MathUtils.cosDeg(d)*a,Y=t.MathUtils.cosDeg(90+f)*u,X=t.MathUtils.sinDeg(d)*a,G=t.MathUtils.sinDeg(90+f)*u;this.a=q*N+$*X,this.b=q*Y+$*G,this.c=Z*N+tt*X,this.d=Z*Y+tt*G}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY},Bone2.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},Bone2.prototype.getWorldRotationX=function(){return Math.atan2(this.c,this.a)*t.MathUtils.radDeg},Bone2.prototype.getWorldRotationY=function(){return Math.atan2(this.d,this.b)*t.MathUtils.radDeg},Bone2.prototype.getWorldScaleX=function(){return Math.sqrt(this.a*this.a+this.c*this.c)},Bone2.prototype.getWorldScaleY=function(){return Math.sqrt(this.b*this.b+this.d*this.d)},Bone2.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var i=this.parent;if(null==i)return this.ax=this.worldX,this.ay=this.worldY,this.arotation=Math.atan2(this.c,this.a)*t.MathUtils.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*t.MathUtils.radDeg);var n=i.a,o=i.b,a=i.c,u=i.d,d=1/(n*u-o*a),f=this.worldX-i.worldX,p=this.worldY-i.worldY;this.ax=f*u*d-p*o*d,this.ay=p*n*d-f*a*d;var b=d*u,S=d*n,M=d*o,C=d*a,P=b*this.a-M*this.c,R=b*this.b-M*this.d,O=S*this.c-C*this.a,B=S*this.d-C*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(P*P+O*O),this.ascaleX>1e-4){var N=P*B-R*O;this.ascaleY=N/this.ascaleX,this.ashearY=Math.atan2(P*R+O*B,N)*t.MathUtils.radDeg,this.arotation=Math.atan2(O,P)*t.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(R*R+B*B),this.ashearY=0,this.arotation=90-Math.atan2(B,R)*t.MathUtils.radDeg},Bone2.prototype.worldToLocal=function(t){var i=this.a,n=this.b,o=this.c,a=this.d,u=1/(i*a-n*o),d=t.x-this.worldX,f=t.y-this.worldY;return t.x=d*a*u-f*n*u,t.y=f*i*u-d*o*u,t},Bone2.prototype.localToWorld=function(t){var i=t.x,n=t.y;return t.x=i*this.a+n*this.b+this.worldX,t.y=i*this.c+n*this.d+this.worldY,t},Bone2.prototype.worldToLocalRotation=function(i){var n=t.MathUtils.sinDeg(i),o=t.MathUtils.cosDeg(i);return Math.atan2(this.a*n-this.c*o,this.d*o-this.b*n)*t.MathUtils.radDeg+this.rotation-this.shearX},Bone2.prototype.localToWorldRotation=function(i){i-=this.rotation-this.shearX;var n=t.MathUtils.sinDeg(i),o=t.MathUtils.cosDeg(i);return Math.atan2(o*this.c+n*this.d,o*this.a+n*this.b)*t.MathUtils.radDeg},Bone2.prototype.rotateWorld=function(i){var n=this.a,o=this.b,a=this.c,u=this.d,d=t.MathUtils.cosDeg(i),f=t.MathUtils.sinDeg(i);this.a=d*n-f*a,this.b=d*o-f*u,this.c=f*n+d*a,this.d=f*o+d*u,this.appliedValid=!1},Bone2}();t.Bone=i}(u||(u={})),function(t){var i,n,o=function BoneData2(n,o,a){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=i.Normal,this.skinRequired=!1,this.color=new t.Color,n<0)throw new Error("index must be >= 0.");if(null==o)throw new Error("name cannot be null.");this.index=n,this.name=o,this.parent=a};t.BoneData=o,(n=i=t.TransformMode||(t.TransformMode={}))[n.Normal=0]="Normal",n[n.OnlyTranslation=1]="OnlyTranslation",n[n.NoRotationOrReflection=2]="NoRotationOrReflection",n[n.NoScale=3]="NoScale",n[n.NoScaleOrReflection=4]="NoScaleOrReflection"}(u||(u={})),function(t){var i=function ConstraintData2(t,i,n){this.name=t,this.order=i,this.skinRequired=n};t.ConstraintData=i}(u||(u={})),function(t){var i=function Event2(t,i){if(null==i)throw new Error("data cannot be null.");this.time=t,this.data=i};t.Event=i}(u||(u={})),function(t){var i=function EventData2(t){this.name=t};t.EventData=i}(u||(u={})),function(t){var i=function(){function IkConstraint2(t,i){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==i)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(i.findBone(t.bones[n].name));this.target=i.findBone(t.target.name)}return IkConstraint2.prototype.isActive=function(){return this.active},IkConstraint2.prototype.apply=function(){this.update()},IkConstraint2.prototype.update=function(){var t=this.target,i=this.bones;switch(i.length){case 1:this.apply1(i[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(i[0],i[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}},IkConstraint2.prototype.apply1=function(i,n,o,a,u,d,f){i.appliedValid||i.updateAppliedTransform();var p=i.parent,b=p.a,S=p.b,M=p.c,C=p.d,P=-i.ashearX-i.arotation,R=0,O=0;switch(i.data.transformMode){case t.TransformMode.OnlyTranslation:R=n-i.worldX,O=o-i.worldY;break;case t.TransformMode.NoRotationOrReflection:var B=Math.abs(b*C-S*M)/(b*b+M*M),N=b/i.skeleton.scaleX,Y=M/i.skeleton.scaleY;S=-Y*B*i.skeleton.scaleX,C=N*B*i.skeleton.scaleY,P+=Math.atan2(Y,N)*t.MathUtils.radDeg;default:var X=n-p.worldX,G=o-p.worldY,U=b*C-S*M;R=(X*C-G*S)/U-i.ax,O=(G*b-X*M)/U-i.ay}P+=Math.atan2(O,R)*t.MathUtils.radDeg,i.ascaleX<0&&(P+=180),P>180?P-=360:P<-180&&(P+=360);var V=i.ascaleX,z=i.ascaleY;if(a||u){switch(i.data.transformMode){case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:R=n-i.worldX,O=o-i.worldY}var W=i.data.length*V,H=Math.sqrt(R*R+O*O);if(a&&H<W||u&&H>W&&W>1e-4)V*=B=(H/W-1)*f+1,d&&(z*=B)}i.updateWorldTransformWith(i.ax,i.ay,i.arotation+P*f,V,z,i.ashearX,i.ashearY)},IkConstraint2.prototype.apply2=function(i,n,o,a,u,d,f,p){if(0!=p){i.appliedValid||i.updateAppliedTransform(),n.appliedValid||n.updateAppliedTransform();var b=i.ax,S=i.ay,M=i.ascaleX,C=M,P=i.ascaleY,R=n.ascaleX,O=0,B=0,N=0;M<0?(M=-M,O=180,N=-1):(O=0,N=1),P<0&&(P=-P,N=-N),R<0?(R=-R,B=180):B=0;var Y=n.ax,X=0,G=0,U=0,V=i.a,z=i.b,W=i.c,H=i.d,j=Math.abs(M-P)<=1e-4;j?(G=V*Y+z*(X=n.ay)+i.worldX,U=W*Y+H*X+i.worldY):(X=0,G=V*Y+i.worldX,U=W*Y+i.worldY);var q=i.parent;V=q.a,z=q.b,W=q.c;var Z,K,$=1/(V*(H=q.d)-z*W),tt=G-q.worldX,et=U-q.worldY,it=(tt*H-et*z)*$-b,nt=(et*V-tt*W)*$-S,st=Math.sqrt(it*it+nt*nt),rt=n.data.length*R;if(st<1e-4)return this.apply1(i,o,a,!1,d,!1,p),void n.updateWorldTransformWith(Y,X,0,n.ascaleX,n.ascaleY,n.ashearX,n.ashearY);var ot=((tt=o-q.worldX)*H-(et=a-q.worldY)*z)*$-b,at=(et*V-tt*W)*$-S,ht=ot*ot+at*at;if(0!=f){f*=M*(R+1)/2;var lt=Math.sqrt(ht),ut=lt-st-rt*M+f;if(ut>0){var ct=Math.min(1,ut/(2*f))-1;ht=(ot-=(ct=(ut-f*(1-ct*ct))/lt)*ot)*ot+(at-=ct*at)*at}}t:if(j){var dt=(ht-st*st-(rt*=M)*rt)/(2*st*rt);dt<-1?dt=-1:dt>1&&(dt=1,d&&(C*=(Math.sqrt(ht)/(st+rt)-1)*p+1)),K=Math.acos(dt)*u,V=st+rt*dt,z=rt*Math.sin(K),Z=Math.atan2(at*V-ot*z,ot*V+at*z)}else{var ft=(V=M*rt)*V,pt=(z=P*rt)*z,gt=Math.atan2(at,ot),vt=-2*pt*st,mt=pt-ft;if((H=vt*vt-4*mt*(W=pt*st*st+ft*ht-ft*pt))>=0){var yt=Math.sqrt(H);vt<0&&(yt=-yt);var xt=(yt=-(vt+yt)/2)/mt,Tt=W/yt,wt=Math.abs(xt)<Math.abs(Tt)?xt:Tt;if(wt*wt<=ht){et=Math.sqrt(ht-wt*wt)*u,Z=gt-Math.atan2(et,wt),K=Math.atan2(et/P,(wt-st)/M);break t}}var bt=t.MathUtils.PI,St=st-V,Et=St*St,Mt=0,Ct=0,At=st+V,Pt=At*At,_t=0;(W=-V*st/(ft-pt))>=-1&&W<=1&&(W=Math.acos(W),(H=(tt=V*Math.cos(W)+st)*tt+(et=z*Math.sin(W))*et)<Et&&(bt=W,Et=H,St=tt,Mt=et),H>Pt&&(Ct=W,Pt=H,At=tt,_t=et)),ht<=(Et+Pt)/2?(Z=gt-Math.atan2(Mt*u,St),K=bt*u):(Z=gt-Math.atan2(_t*u,At),K=Ct*u)}var Rt=Math.atan2(X,Y)*N,Ot=i.arotation;(Z=(Z-Rt)*t.MathUtils.radDeg+O-Ot)>180?Z-=360:Z<-180&&(Z+=360),i.updateWorldTransformWith(b,S,Ot+Z*p,C,i.ascaleY,0,0),Ot=n.arotation,(K=((K+Rt)*t.MathUtils.radDeg-n.ashearX)*N+B-Ot)>180?K-=360:K<-180&&(K+=360),n.updateWorldTransformWith(Y,X,Ot+K*p,n.ascaleX,n.ascaleY,n.ashearX,n.ashearY)}else n.updateWorldTransform()},IkConstraint2}();t.IkConstraint=i}(u||(u={})),function(t){var i=function(t){function IkConstraintData2(i){var n=t.call(this,i,0,!1)||this;return n.bones=new Array,n.bendDirection=1,n.compress=!1,n.stretch=!1,n.uniform=!1,n.mix=1,n.softness=0,n}return d(IkConstraintData2,t),IkConstraintData2}(t.ConstraintData);t.IkConstraintData=i}(u||(u={})),function(t){var i=function(){function PathConstraint2(t,i){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==i)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var n=0,o=t.bones.length;n<o;n++)this.bones.push(i.findBone(t.bones[n].name));this.target=i.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return PathConstraint2.prototype.isActive=function(){return this.active},PathConstraint2.prototype.apply=function(){this.update()},PathConstraint2.prototype.update=function(){var i=this.target.getAttachment();if(i instanceof t.PathAttachment){var n=this.rotateMix,o=this.translateMix,a=n>0;if(o>0||a){var u=this.data,d=u.spacingMode==t.SpacingMode.Percent,f=u.rotateMode,p=f==t.RotateMode.Tangent,b=f==t.RotateMode.ChainScale,S=this.bones.length,M=p?S:S+1,C=this.bones,P=t.Utils.setArraySize(this.spaces,M),R=null,O=this.spacing;if(b||!d){b&&(R=t.Utils.setArraySize(this.lengths,S));for(var B=u.spacingMode==t.SpacingMode.Length,N=0,Y=M-1;N<Y;){var X=($=C[N]).data.length;if(X<PathConstraint2.epsilon)b&&(R[N]=0),P[++N]=0;else if(d){if(b){var G=X*$.a,U=X*$.c,V=Math.sqrt(G*G+U*U);R[N]=V}P[++N]=O}else{G=X*$.a,U=X*$.c;var z=Math.sqrt(G*G+U*U);b&&(R[N]=z),P[++N]=(B?X+O:O)*z/X}}}else for(N=1;N<M;N++)P[N]=O;var W=this.computeWorldPositions(i,M,p,u.positionMode==t.PositionMode.Percent,d),H=W[0],j=W[1],q=u.offsetRotation,Z=!1;if(0==q)Z=f==t.RotateMode.Chain;else Z=!1,q*=(K=this.target.bone).a*K.d-K.b*K.c>0?t.MathUtils.degRad:-t.MathUtils.degRad;N=0;for(var K=3;N<S;N++,K+=3){var $;($=C[N]).worldX+=(H-$.worldX)*o,$.worldY+=(j-$.worldY)*o;var tt=(G=W[K])-H,et=(U=W[K+1])-j;if(b){var it=R[N];if(0!=it){var nt=(Math.sqrt(tt*tt+et*et)/it-1)*n+1;$.a*=nt,$.c*=nt}}if(H=G,j=U,a){var st=$.a,rt=$.b,ot=$.c,at=$.d,ht=0,lt=0,ut=0;if(ht=p?W[K-1]:0==P[N+1]?W[K+2]:Math.atan2(et,tt),ht-=Math.atan2(ot,st),Z){lt=Math.cos(ht),ut=Math.sin(ht);var ct=$.data.length;H+=(ct*(lt*st-ut*ot)-tt)*n,j+=(ct*(ut*st+lt*ot)-et)*n}else ht+=q;ht>t.MathUtils.PI?ht-=t.MathUtils.PI2:ht<-t.MathUtils.PI&&(ht+=t.MathUtils.PI2),ht*=n,lt=Math.cos(ht),ut=Math.sin(ht),$.a=lt*st-ut*ot,$.b=lt*rt-ut*at,$.c=ut*st+lt*ot,$.d=ut*rt+lt*at}$.appliedValid=!1}}}},PathConstraint2.prototype.computeWorldPositions=function(i,n,o,a,u){var d=this.target,f=this.position,p=this.spaces,b=t.Utils.setArraySize(this.positions,3*n+2),S=null,M=i.closed,C=i.worldVerticesLength,P=C/6,R=PathConstraint2.NONE;if(!i.constantSpeed){var O=i.lengths,B=O[P-=M?1:2];if(a&&(f*=B),u)for(var N=1;N<n;N++)p[N]*=B;S=t.Utils.setArraySize(this.world,8);N=0;for(var Y=0,X=0;N<n;N++,Y+=3){var G=f+=ft=p[N];if(M)(G%=B)<0&&(G+=B),X=0;else{if(G<0){R!=PathConstraint2.BEFORE&&(R=PathConstraint2.BEFORE,i.computeWorldVertices(d,2,4,S,0,2)),this.addBeforePosition(G,S,0,b,Y);continue}if(G>B){R!=PathConstraint2.AFTER&&(R=PathConstraint2.AFTER,i.computeWorldVertices(d,C-6,4,S,0,2)),this.addAfterPosition(G-B,S,0,b,Y);continue}}for(;;X++){var U=O[X];if(!(G>U)){if(0==X)G/=U;else G=(G-(mt=O[X-1]))/(U-mt);break}}X!=R&&(R=X,M&&X==P?(i.computeWorldVertices(d,C-4,4,S,0,2),i.computeWorldVertices(d,0,4,S,4,2)):i.computeWorldVertices(d,6*X+2,8,S,0,2)),this.addCurvePosition(G,S[0],S[1],S[2],S[3],S[4],S[5],S[6],S[7],b,Y,o||N>0&&0==ft)}return b}M?(C+=2,S=t.Utils.setArraySize(this.world,C),i.computeWorldVertices(d,2,C-4,S,0,2),i.computeWorldVertices(d,0,2,S,C-4,2),S[C-2]=S[0],S[C-1]=S[1]):(P--,C-=4,S=t.Utils.setArraySize(this.world,C),i.computeWorldVertices(d,2,C,S,0,2));for(var V=t.Utils.setArraySize(this.curves,P),z=0,W=S[0],H=S[1],j=0,q=0,Z=0,K=0,$=0,tt=0,et=0,it=0,nt=0,st=0,rt=0,ot=0,at=0,ht=0,lt=(N=0,2);N<P;N++,lt+=6)j=S[lt],q=S[lt+1],Z=S[lt+2],K=S[lt+3],rt=2*(et=.1875*(W-2*j+Z))+(nt=.09375*(3*(j-Z)-W+($=S[lt+4]))),ot=2*(it=.1875*(H-2*q+K))+(st=.09375*(3*(q-K)-H+(tt=S[lt+5]))),at=.75*(j-W)+et+.16666667*nt,ht=.75*(q-H)+it+.16666667*st,z+=Math.sqrt(at*at+ht*ht),at+=rt,ht+=ot,rt+=nt,ot+=st,z+=Math.sqrt(at*at+ht*ht),at+=rt,ht+=ot,z+=Math.sqrt(at*at+ht*ht),at+=rt+nt,ht+=ot+st,z+=Math.sqrt(at*at+ht*ht),V[N]=z,W=$,H=tt;if(f*=a?z:z/i.lengths[P-1],u)for(N=1;N<n;N++)p[N]*=z;for(var ut=this.segments,ct=0,dt=(N=0,Y=0,X=0,0);N<n;N++,Y+=3){var ft;G=f+=ft=p[N];if(M)(G%=z)<0&&(G+=z),X=0;else{if(G<0){this.addBeforePosition(G,S,0,b,Y);continue}if(G>z){this.addAfterPosition(G-z,S,C-4,b,Y);continue}}for(;;X++){var pt=V[X];if(!(G>pt)){if(0==X)G/=pt;else G=(G-(mt=V[X-1]))/(pt-mt);break}}if(X!=R){R=X;var gt=6*X;for(W=S[gt],H=S[gt+1],j=S[gt+2],q=S[gt+3],Z=S[gt+4],K=S[gt+5],rt=2*(et=.03*(W-2*j+Z))+(nt=.006*(3*(j-Z)-W+($=S[gt+6]))),ot=2*(it=.03*(H-2*q+K))+(st=.006*(3*(q-K)-H+(tt=S[gt+7]))),at=.3*(j-W)+et+.16666667*nt,ht=.3*(q-H)+it+.16666667*st,ct=Math.sqrt(at*at+ht*ht),ut[0]=ct,gt=1;gt<8;gt++)at+=rt,ht+=ot,rt+=nt,ot+=st,ct+=Math.sqrt(at*at+ht*ht),ut[gt]=ct;at+=rt,ht+=ot,ct+=Math.sqrt(at*at+ht*ht),ut[8]=ct,at+=rt+nt,ht+=ot+st,ct+=Math.sqrt(at*at+ht*ht),ut[9]=ct,dt=0}for(G*=ct;;dt++){var vt=ut[dt];if(!(G>vt)){var mt;if(0==dt)G/=vt;else G=dt+(G-(mt=ut[dt-1]))/(vt-mt);break}}this.addCurvePosition(.1*G,W,H,j,q,Z,K,$,tt,b,Y,o||N>0&&0==ft)}return b},PathConstraint2.prototype.addBeforePosition=function(t,i,n,o,a){var u=i[n],d=i[n+1],f=i[n+2]-u,p=i[n+3]-d,b=Math.atan2(p,f);o[a]=u+t*Math.cos(b),o[a+1]=d+t*Math.sin(b),o[a+2]=b},PathConstraint2.prototype.addAfterPosition=function(t,i,n,o,a){var u=i[n+2],d=i[n+3],f=u-i[n],p=d-i[n+1],b=Math.atan2(p,f);o[a]=u+t*Math.cos(b),o[a+1]=d+t*Math.sin(b),o[a+2]=b},PathConstraint2.prototype.addCurvePosition=function(t,i,n,o,a,u,d,f,p,b,S,M){if(0==t||isNaN(t))return b[S]=i,b[S+1]=n,void(b[S+2]=Math.atan2(a-n,o-i));var C=t*t,P=C*t,R=1-t,O=R*R,B=O*R,N=R*t,Y=3*N,X=R*Y,G=Y*t,U=i*B+o*X+u*G+f*P,V=n*B+a*X+d*G+p*P;b[S]=U,b[S+1]=V,M&&(b[S+2]=t<.001?Math.atan2(a-n,o-i):Math.atan2(V-(n*O+a*N*2+d*C),U-(i*O+o*N*2+u*C)))},PathConstraint2.NONE=-1,PathConstraint2.BEFORE=-2,PathConstraint2.AFTER=-3,PathConstraint2.epsilon=1e-5,PathConstraint2}();t.PathConstraint=i}(u||(u={})),function(t){var i,n,o,a=function(t){function PathConstraintData2(i){var n=t.call(this,i,0,!1)||this;return n.bones=new Array,n}return d(PathConstraintData2,t),PathConstraintData2}(t.ConstraintData);t.PathConstraintData=a,(i=t.PositionMode||(t.PositionMode={}))[i.Fixed=0]="Fixed",i[i.Percent=1]="Percent",(n=t.SpacingMode||(t.SpacingMode={}))[n.Length=0]="Length",n[n.Fixed=1]="Fixed",n[n.Percent=2]="Percent",(o=t.RotateMode||(t.RotateMode={}))[o.Tangent=0]="Tangent",o[o.Chain=1]="Chain",o[o.ChainScale=2]="ChainScale"}(u||(u={})),function(t){var i=function(){function Assets2(t){this.toLoad=new Array,this.assets={},this.clientId=t}return Assets2.prototype.loaded=function(){var t=0;for(var i in this.assets)t++;return t},Assets2}(),n=function(){function SharedAssetManager2(t){void 0===t&&(t=""),this.clientAssets={},this.queuedAssets={},this.rawAssets={},this.errors={},this.pathPrefix=t}return SharedAssetManager2.prototype.queueAsset=function(t,n,o){var a=this.clientAssets[t];return null==a&&(a=new i(t),this.clientAssets[t]=a),null!==n&&(a.textureLoader=n),a.toLoad.push(o),this.queuedAssets[o]!==o&&(this.queuedAssets[o]=o,!0)},SharedAssetManager2.prototype.loadText=function(t,i){var n=this;if(i=this.pathPrefix+i,this.queueAsset(t,null,i)){var o=new XMLHttpRequest;o.overrideMimeType("text/html"),o.onreadystatechange=function(){o.readyState==XMLHttpRequest.DONE&&(o.status>=200&&o.status<300?n.rawAssets[i]=o.responseText:n.errors[i]="Couldn't load text "+i+": status "+o.status+", "+o.responseText)},o.open("GET",i,!0),o.send()}},SharedAssetManager2.prototype.loadJson=function(t,i){var n=this;if(i=this.pathPrefix+i,this.queueAsset(t,null,i)){var o=new XMLHttpRequest;o.overrideMimeType("text/html"),o.onreadystatechange=function(){o.readyState==XMLHttpRequest.DONE&&(o.status>=200&&o.status<300?n.rawAssets[i]=JSON.parse(o.responseText):n.errors[i]="Couldn't load text "+i+": status "+o.status+", "+o.responseText)},o.open("GET",i,!0),o.send()}},SharedAssetManager2.prototype.loadTexture=function(t,i,n){var o=this;if(n=this.pathPrefix+n,this.queueAsset(t,i,n))if(!!("undefined"==typeof window||"undefined"==typeof navigator||!window.document)&&"undefined"!=typeof importScripts){fetch(n,{mode:"cors"}).then((function(t){return t.ok||(o.errors[n]="Couldn't load image "+n),t.blob()})).then((function(t){return createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"})})).then((function(t){o.rawAssets[n]=t}))}else{var a=new Image;a.crossOrigin="anonymous",a.onload=function(t){o.rawAssets[n]=a},a.onerror=function(t){o.errors[n]="Couldn't load image "+n},a.src=n}},SharedAssetManager2.prototype.get=function(t,i){i=this.pathPrefix+i;var n=this.clientAssets[t];return null==n||n.assets[i]},SharedAssetManager2.prototype.updateClientAssets=function(t){for(var i=!!("undefined"==typeof window||"undefined"==typeof navigator||!window.document)&&"undefined"!=typeof importScripts,n=0;n<t.toLoad.length;n++){var o=t.toLoad[n],a=t.assets[o];if(null==a){var u=this.rawAssets[o];if(null==u)continue;i?u instanceof ImageBitmap?t.assets[o]=t.textureLoader(u):t.assets[o]=u:u instanceof HTMLImageElement?t.assets[o]=t.textureLoader(u):t.assets[o]=u}}},SharedAssetManager2.prototype.isLoadingComplete=function(t){var i=this.clientAssets[t];return null==i||(this.updateClientAssets(i),i.toLoad.length==i.loaded())},SharedAssetManager2.prototype.dispose=function(){},SharedAssetManager2.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},SharedAssetManager2.prototype.getErrors=function(){return this.errors},SharedAssetManager2}();t.SharedAssetManager=n}(u||(u={})),function(t){var i=function(){function Skeleton2(i){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==i)throw new Error("data cannot be null.");this.data=i,this.bones=new Array;for(var n=0;n<i.bones.length;n++){var o=i.bones[n],a=void 0;if(null==o.parent)a=new t.Bone(o,this,null);else{var u=this.bones[o.parent.index];a=new t.Bone(o,this,u),u.children.push(a)}this.bones.push(a)}this.slots=new Array,this.drawOrder=new Array;for(n=0;n<i.slots.length;n++){var d=i.slots[n],f=(a=this.bones[d.boneData.index],new t.Slot(d,a));this.slots.push(f),this.drawOrder.push(f)}this.ikConstraints=new Array;for(n=0;n<i.ikConstraints.length;n++){var p=i.ikConstraints[n];this.ikConstraints.push(new t.IkConstraint(p,this))}this.transformConstraints=new Array;for(n=0;n<i.transformConstraints.length;n++){var b=i.transformConstraints[n];this.transformConstraints.push(new t.TransformConstraint(b,this))}this.pathConstraints=new Array;for(n=0;n<i.pathConstraints.length;n++){var S=i.pathConstraints[n];this.pathConstraints.push(new t.PathConstraint(S,this))}this.color=new t.Color(1,1,1,1),this.updateCache()}return Skeleton2.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,i=0,n=t.length;i<n;i++){(a=t[i]).sorted=a.data.skinRequired,a.active=!a.sorted}if(null!=this.skin){var o=this.skin.bones;for(i=0,n=this.skin.bones.length;i<n;i++){var a=this.bones[o[i].index];do{a.sorted=!1,a.active=!0,a=a.parent}while(null!=a)}}var u=this.ikConstraints,d=this.transformConstraints,f=this.pathConstraints,p=u.length,b=d.length,S=f.length,M=p+b+S;t:for(i=0;i<M;i++){for(var C=0;C<p;C++){if((P=u[C]).data.order==i){this.sortIkConstraint(P);continue t}}for(C=0;C<b;C++){if((P=d[C]).data.order==i){this.sortTransformConstraint(P);continue t}}for(C=0;C<S;C++){var P;if((P=f[C]).data.order==i){this.sortPathConstraint(P);continue t}}}for(i=0,n=t.length;i<n;i++)this.sortBone(t[i])},Skeleton2.prototype.sortIkConstraint=function(i){if(i.active=i.target.isActive()&&(!i.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,i.data,!0)),i.active){var n=i.target;this.sortBone(n);var o=i.bones,a=o[0];if(this.sortBone(a),o.length>1){var u=o[o.length-1];this._updateCache.indexOf(u)>-1||this.updateCacheReset.push(u)}this._updateCache.push(i),this.sortReset(a.children),o[o.length-1].sorted=!0}},Skeleton2.prototype.sortPathConstraint=function(i){if(i.active=i.target.bone.isActive()&&(!i.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,i.data,!0)),i.active){var n=i.target,o=n.data.index,a=n.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,o,a),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,o,a);for(var u=0,d=this.data.skins.length;u<d;u++)this.sortPathConstraintAttachment(this.data.skins[u],o,a);var f=n.getAttachment();f instanceof t.PathAttachment&&this.sortPathConstraintAttachmentWith(f,a);var p=i.bones,b=p.length;for(u=0;u<b;u++)this.sortBone(p[u]);this._updateCache.push(i);for(u=0;u<b;u++)this.sortReset(p[u].children);for(u=0;u<b;u++)p[u].sorted=!0}},Skeleton2.prototype.sortTransformConstraint=function(i){if(i.active=i.target.isActive()&&(!i.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,i.data,!0)),i.active){this.sortBone(i.target);var n=i.bones,o=n.length;if(i.data.local)for(var a=0;a<o;a++){var u=n[a];this.sortBone(u.parent),this._updateCache.indexOf(u)>-1||this.updateCacheReset.push(u)}else for(a=0;a<o;a++)this.sortBone(n[a]);this._updateCache.push(i);for(var d=0;d<o;d++)this.sortReset(n[d].children);for(d=0;d<o;d++)n[d].sorted=!0}},Skeleton2.prototype.sortPathConstraintAttachment=function(t,i,n){var o=t.attachments[i];if(o)for(var a in o)this.sortPathConstraintAttachmentWith(o[a],n)},Skeleton2.prototype.sortPathConstraintAttachmentWith=function(i,n){if(i instanceof t.PathAttachment){var o=i.bones;if(null==o)this.sortBone(n);else for(var a=this.bones,u=0;u<o.length;)for(var d=o[u++],f=u+d;u<f;u++){var p=o[u];this.sortBone(a[p])}}},Skeleton2.prototype.sortBone=function(t){if(!t.sorted){var i=t.parent;null!=i&&this.sortBone(i),t.sorted=!0,this._updateCache.push(t)}},Skeleton2.prototype.sortReset=function(t){for(var i=0,n=t.length;i<n;i++){var o=t[i];o.active&&(o.sorted&&this.sortReset(o.children),o.sorted=!1)}},Skeleton2.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,i=0,n=t.length;i<n;i++){var o=t[i];o.ax=o.x,o.ay=o.y,o.arotation=o.rotation,o.ascaleX=o.scaleX,o.ascaleY=o.scaleY,o.ashearX=o.shearX,o.ashearY=o.shearY,o.appliedValid=!0}var a=this._updateCache;for(i=0,n=a.length;i<n;i++)a[i].update()},Skeleton2.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},Skeleton2.prototype.setBonesToSetupPose=function(){for(var t=this.bones,i=0,n=t.length;i<n;i++)t[i].setToSetupPose();var o=this.ikConstraints;for(i=0,n=o.length;i<n;i++){(f=o[i]).mix=f.data.mix,f.softness=f.data.softness,f.bendDirection=f.data.bendDirection,f.compress=f.data.compress,f.stretch=f.data.stretch}var a=this.transformConstraints;for(i=0,n=a.length;i<n;i++){var u=(f=a[i]).data;f.rotateMix=u.rotateMix,f.translateMix=u.translateMix,f.scaleMix=u.scaleMix,f.shearMix=u.shearMix}var d=this.pathConstraints;for(i=0,n=d.length;i<n;i++){var f;u=(f=d[i]).data;f.position=u.position,f.spacing=u.spacing,f.rotateMix=u.rotateMix,f.translateMix=u.translateMix}},Skeleton2.prototype.setSlotsToSetupPose=function(){var i=this.slots;t.Utils.arrayCopy(i,0,this.drawOrder,0,i.length);for(var n=0,o=i.length;n<o;n++)i[n].setToSetupPose()},Skeleton2.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},Skeleton2.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var i=this.bones,n=0,o=i.length;n<o;n++){var a=i[n];if(a.data.name==t)return a}return null},Skeleton2.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var i=this.bones,n=0,o=i.length;n<o;n++)if(i[n].data.name==t)return n;return-1},Skeleton2.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var i=this.slots,n=0,o=i.length;n<o;n++){var a=i[n];if(a.data.name==t)return a}return null},Skeleton2.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var i=this.slots,n=0,o=i.length;n<o;n++)if(i[n].data.name==t)return n;return-1},Skeleton2.prototype.setSkinByName=function(t){var i=this.data.findSkin(t);if(null==i)throw new Error("Skin not found: "+t);this.setSkin(i)},Skeleton2.prototype.setSkin=function(t){if(t!=this.skin){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var i=this.slots,n=0,o=i.length;n<o;n++){var a=i[n],u=a.data.attachmentName;if(null!=u){var d=t.getAttachment(n,u);null!=d&&a.setAttachment(d)}}this.skin=t,this.updateCache()}},Skeleton2.prototype.getAttachmentByName=function(t,i){return this.getAttachment(this.data.findSlotIndex(t),i)},Skeleton2.prototype.getAttachment=function(t,i){if(null==i)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var n=this.skin.getAttachment(t,i);if(null!=n)return n}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,i):null},Skeleton2.prototype.setAttachment=function(t,i){if(null==t)throw new Error("slotName cannot be null.");for(var n=this.slots,o=0,a=n.length;o<a;o++){var u=n[o];if(u.data.name==t){var d=null;if(null!=i&&null==(d=this.getAttachment(o,i)))throw new Error("Attachment not found: "+i+", for slot: "+t);return void u.setAttachment(d)}}throw new Error("Slot not found: "+t)},Skeleton2.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var i=this.ikConstraints,n=0,o=i.length;n<o;n++){var a=i[n];if(a.data.name==t)return a}return null},Skeleton2.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var i=this.transformConstraints,n=0,o=i.length;n<o;n++){var a=i[n];if(a.data.name==t)return a}return null},Skeleton2.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var i=this.pathConstraints,n=0,o=i.length;n<o;n++){var a=i[n];if(a.data.name==t)return a}return null},Skeleton2.prototype.getBounds=function(i,n,o){if(void 0===o&&(o=new Array(2)),null==i)throw new Error("offset cannot be null.");if(null==n)throw new Error("size cannot be null.");for(var a=this.drawOrder,u=Number.POSITIVE_INFINITY,d=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,p=Number.NEGATIVE_INFINITY,b=0,S=a.length;b<S;b++){var M=a[b];if(M.bone.active){var C=0,P=null,R=M.getAttachment();if(R instanceof t.RegionAttachment)C=8,P=t.Utils.setArraySize(o,C,0),R.computeWorldVertices(M.bone,P,0,2);else if(R instanceof t.MeshAttachment){var O=R;C=O.worldVerticesLength,P=t.Utils.setArraySize(o,C,0),O.computeWorldVertices(M,0,C,P,0,2)}if(null!=P)for(var B=0,N=P.length;B<N;B+=2){var Y=P[B],X=P[B+1];u=Math.min(u,Y),d=Math.min(d,X),f=Math.max(f,Y),p=Math.max(p,X)}}}i.set(u,d),n.set(f-u,p-d)},Skeleton2.prototype.update=function(t){this.time+=t},Skeleton2}();t.Skeleton=i}(u||(u={})),function(t){var i=function(){function SkeletonBinary2(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return SkeletonBinary2.prototype.readSkeletonData=function(i){var o=this.scale,a=new t.SkeletonData;a.name="";var u=new n(i);if(a.hash=u.readString(),a.version=u.readString(),"3.8.75"==a.version)throw new Error("Unsupported skeleton data, please export with a newer version of Spine.");a.x=u.readFloat(),a.y=u.readFloat(),a.width=u.readFloat(),a.height=u.readFloat();var d=u.readBoolean();d&&(a.fps=u.readFloat(),a.imagesPath=u.readString(),a.audioPath=u.readString());var f=0;f=u.readInt(!0);for(var p=0;p<f;p++)u.strings.push(u.readString());f=u.readInt(!0);for(p=0;p<f;p++){var b=u.readString(),S=0==p?null:a.bones[u.readInt(!0)];(P=new t.BoneData(p,b,S)).rotation=u.readFloat(),P.x=u.readFloat()*o,P.y=u.readFloat()*o,P.scaleX=u.readFloat(),P.scaleY=u.readFloat(),P.shearX=u.readFloat(),P.shearY=u.readFloat(),P.length=u.readFloat()*o,P.transformMode=SkeletonBinary2.TransformModeValues[u.readInt(!0)],P.skinRequired=u.readBoolean(),d&&t.Color.rgba8888ToColor(P.color,u.readInt32()),a.bones.push(P)}f=u.readInt(!0);for(p=0;p<f;p++){var M=u.readString(),C=a.bones[u.readInt(!0)],P=new t.SlotData(p,M,C);t.Color.rgba8888ToColor(P.color,u.readInt32());var R=u.readInt32();-1!=R&&t.Color.rgb888ToColor(P.darkColor=new t.Color,R),P.attachmentName=u.readStringRef(),P.blendMode=SkeletonBinary2.BlendModeValues[u.readInt(!0)],a.slots.push(P)}f=u.readInt(!0);p=0;for(var O=void 0;p<f;p++){(P=new t.IkConstraintData(u.readString())).order=u.readInt(!0),P.skinRequired=u.readBoolean(),O=u.readInt(!0);for(var B=0;B<O;B++)P.bones.push(a.bones[u.readInt(!0)]);P.target=a.bones[u.readInt(!0)],P.mix=u.readFloat(),P.softness=u.readFloat()*o,P.bendDirection=u.readByte(),P.compress=u.readBoolean(),P.stretch=u.readBoolean(),P.uniform=u.readBoolean(),a.ikConstraints.push(P)}f=u.readInt(!0);for(p=0,O=void 0;p<f;p++){(P=new t.TransformConstraintData(u.readString())).order=u.readInt(!0),P.skinRequired=u.readBoolean(),O=u.readInt(!0);for(B=0;B<O;B++)P.bones.push(a.bones[u.readInt(!0)]);P.target=a.bones[u.readInt(!0)],P.local=u.readBoolean(),P.relative=u.readBoolean(),P.offsetRotation=u.readFloat(),P.offsetX=u.readFloat()*o,P.offsetY=u.readFloat()*o,P.offsetScaleX=u.readFloat(),P.offsetScaleY=u.readFloat(),P.offsetShearY=u.readFloat(),P.rotateMix=u.readFloat(),P.translateMix=u.readFloat(),P.scaleMix=u.readFloat(),P.shearMix=u.readFloat(),a.transformConstraints.push(P)}f=u.readInt(!0);for(p=0,O=void 0;p<f;p++){(P=new t.PathConstraintData(u.readString())).order=u.readInt(!0),P.skinRequired=u.readBoolean(),O=u.readInt(!0);for(B=0;B<O;B++)P.bones.push(a.bones[u.readInt(!0)]);P.target=a.slots[u.readInt(!0)],P.positionMode=SkeletonBinary2.PositionModeValues[u.readInt(!0)],P.spacingMode=SkeletonBinary2.SpacingModeValues[u.readInt(!0)],P.rotateMode=SkeletonBinary2.RotateModeValues[u.readInt(!0)],P.offsetRotation=u.readFloat(),P.position=u.readFloat(),P.positionMode==t.PositionMode.Fixed&&(P.position*=o),P.spacing=u.readFloat(),P.spacingMode!=t.SpacingMode.Length&&P.spacingMode!=t.SpacingMode.Fixed||(P.spacing*=o),P.rotateMix=u.readFloat(),P.translateMix=u.readFloat(),a.pathConstraints.push(P)}var N=this.readSkin(u,a,!0,d);null!=N&&(a.defaultSkin=N,a.skins.push(N));p=a.skins.length;for(t.Utils.setArraySize(a.skins,f=p+u.readInt(!0));p<f;p++)a.skins[p]=this.readSkin(u,a,!1,d);f=this.linkedMeshes.length;for(p=0;p<f;p++){var Y=this.linkedMeshes[p],X=null==Y.skin?a.defaultSkin:a.findSkin(Y.skin);if(null==X)throw new Error("Skin not found: "+Y.skin);var G=X.getAttachment(Y.slotIndex,Y.parent);if(null==G)throw new Error("Parent mesh not found: "+Y.parent);Y.mesh.deformAttachment=Y.inheritDeform?G:Y.mesh,Y.mesh.setParentMesh(G),Y.mesh.updateUVs()}this.linkedMeshes.length=0,f=u.readInt(!0);for(p=0;p<f;p++){(P=new t.EventData(u.readStringRef())).intValue=u.readInt(!1),P.floatValue=u.readFloat(),P.stringValue=u.readString(),P.audioPath=u.readString(),null!=P.audioPath&&(P.volume=u.readFloat(),P.balance=u.readFloat()),a.events.push(P)}f=u.readInt(!0);for(p=0;p<f;p++)a.animations.push(this.readAnimation(u,u.readString(),a));return a},SkeletonBinary2.prototype.readSkin=function(i,n,o,a){var u=null,d=0;if(o){if(0==(d=i.readInt(!0)))return null;u=new t.Skin("default")}else{(u=new t.Skin(i.readStringRef())).bones.length=i.readInt(!0);for(var f=0,p=u.bones.length;f<p;f++)u.bones[f]=n.bones[i.readInt(!0)];for(f=0,p=i.readInt(!0);f<p;f++)u.constraints.push(n.ikConstraints[i.readInt(!0)]);for(f=0,p=i.readInt(!0);f<p;f++)u.constraints.push(n.transformConstraints[i.readInt(!0)]);for(f=0,p=i.readInt(!0);f<p;f++)u.constraints.push(n.pathConstraints[i.readInt(!0)]);d=i.readInt(!0)}for(f=0;f<d;f++)for(var b=i.readInt(!0),S=0,M=i.readInt(!0);S<M;S++){var C=i.readStringRef(),P=this.readAttachment(i,n,u,b,C,a);null!=P&&u.setAttachment(b,C,P)}return u},SkeletonBinary2.prototype.readAttachment=function(i,n,a,u,d,f){var p=this.scale,b=i.readStringRef();null==b&&(b=d);var S=i.readByte();switch(SkeletonBinary2.AttachmentTypeValues[S]){case t.AttachmentType.Region:var M=i.readStringRef(),C=i.readFloat(),P=i.readFloat(),R=i.readFloat(),O=i.readFloat(),B=i.readFloat(),N=i.readFloat(),Y=i.readFloat(),X=i.readInt32();null==M&&(M=b);var G=this.attachmentLoader.newRegionAttachment(a,b,M);return null==G?null:(G.path=M,G.x=P*p,G.y=R*p,G.scaleX=O,G.scaleY=B,G.rotation=C,G.width=N*p,G.height=Y*p,t.Color.rgba8888ToColor(G.color,X),G.updateOffset(),G);case t.AttachmentType.BoundingBox:var U=i.readInt(!0),V=this.readVertices(i,U),z=(X=f?i.readInt32():0,this.attachmentLoader.newBoundingBoxAttachment(a,b));return null==z?null:(z.worldVerticesLength=U<<1,z.vertices=V.vertices,z.bones=V.bones,f&&t.Color.rgba8888ToColor(z.color,X),z);case t.AttachmentType.Mesh:M=i.readStringRef(),X=i.readInt32(),U=i.readInt(!0);var W=this.readFloatArray(i,U<<1,1),H=this.readShortArray(i),j=(V=this.readVertices(i,U),i.readInt(!0)),q=null;N=0,Y=0;return f&&(q=this.readShortArray(i),N=i.readFloat(),Y=i.readFloat()),null==M&&(M=b),null==(Z=this.attachmentLoader.newMeshAttachment(a,b,M))?null:(Z.path=M,t.Color.rgba8888ToColor(Z.color,X),Z.bones=V.bones,Z.vertices=V.vertices,Z.worldVerticesLength=U<<1,Z.triangles=H,Z.regionUVs=W,Z.updateUVs(),Z.hullLength=j<<1,f&&(Z.edges=q,Z.width=N*p,Z.height=Y*p),Z);case t.AttachmentType.LinkedMesh:M=i.readStringRef(),X=i.readInt32();var Z,K=i.readStringRef(),$=i.readStringRef(),tt=i.readBoolean();N=0,Y=0;return f&&(N=i.readFloat(),Y=i.readFloat()),null==M&&(M=b),null==(Z=this.attachmentLoader.newMeshAttachment(a,b,M))?null:(Z.path=M,t.Color.rgba8888ToColor(Z.color,X),f&&(Z.width=N*p,Z.height=Y*p),this.linkedMeshes.push(new o(Z,K,u,$,tt)),Z);case t.AttachmentType.Path:for(var et=i.readBoolean(),it=i.readBoolean(),nt=(U=i.readInt(!0),V=this.readVertices(i,U),t.Utils.newArray(U/3,0)),st=0,rt=nt.length;st<rt;st++)nt[st]=i.readFloat()*p;X=f?i.readInt32():0;return null==(M=this.attachmentLoader.newPathAttachment(a,b))?null:(M.closed=et,M.constantSpeed=it,M.worldVerticesLength=U<<1,M.vertices=V.vertices,M.bones=V.bones,M.lengths=nt,f&&t.Color.rgba8888ToColor(M.color,X),M);case t.AttachmentType.Point:C=i.readFloat(),P=i.readFloat(),R=i.readFloat(),X=f?i.readInt32():0;var ot=this.attachmentLoader.newPointAttachment(a,b);return null==ot?null:(ot.x=P*p,ot.y=R*p,ot.rotation=C,f&&t.Color.rgba8888ToColor(ot.color,X),ot);case t.AttachmentType.Clipping:var at=i.readInt(!0),ht=(U=i.readInt(!0),V=this.readVertices(i,U),X=f?i.readInt32():0,this.attachmentLoader.newClippingAttachment(a,b));return null==ht?null:(ht.endSlot=n.slots[at],ht.worldVerticesLength=U<<1,ht.vertices=V.vertices,ht.bones=V.bones,f&&t.Color.rgba8888ToColor(ht.color,X),ht)}return null},SkeletonBinary2.prototype.readVertices=function(i,n){var o=n<<1,u=new a,d=this.scale;if(!i.readBoolean())return u.vertices=this.readFloatArray(i,o,d),u;for(var f=new Array,p=new Array,b=0;b<n;b++){var S=i.readInt(!0);p.push(S);for(var M=0;M<S;M++)p.push(i.readInt(!0)),f.push(i.readFloat()*d),f.push(i.readFloat()*d),f.push(i.readFloat())}return u.vertices=t.Utils.toFloatArray(f),u.bones=p,u},SkeletonBinary2.prototype.readFloatArray=function(t,i,n){var o=new Array(i);if(1==n)for(var a=0;a<i;a++)o[a]=t.readFloat();else for(a=0;a<i;a++)o[a]=t.readFloat()*n;return o},SkeletonBinary2.prototype.readShortArray=function(t){for(var i=t.readInt(!0),n=new Array(i),o=0;o<i;o++)n[o]=t.readShort();return n},SkeletonBinary2.prototype.readAnimation=function(i,n,o){for(var a=new Array,u=this.scale,d=0,f=new t.Color,p=new t.Color,b=0,S=i.readInt(!0);b<S;b++)for(var M=i.readInt(!0),C=0,P=i.readInt(!0);C<P;C++){var R=i.readByte(),O=i.readInt(!0);switch(R){case SkeletonBinary2.SLOT_ATTACHMENT:(X=new t.AttachmentTimeline(O)).slotIndex=M;for(var B=0;B<O;B++)X.setFrame(B,i.readFloat(),i.readStringRef());a.push(X),d=Math.max(d,X.frames[O-1]);break;case SkeletonBinary2.SLOT_COLOR:(X=new t.ColorTimeline(O)).slotIndex=M;for(B=0;B<O;B++){var N=i.readFloat();t.Color.rgba8888ToColor(f,i.readInt32()),X.setFrame(B,N,f.r,f.g,f.b,f.a),B<O-1&&this.readCurve(i,B,X)}a.push(X),d=Math.max(d,X.frames[(O-1)*t.ColorTimeline.ENTRIES]);break;case SkeletonBinary2.SLOT_TWO_COLOR:(X=new t.TwoColorTimeline(O)).slotIndex=M;for(B=0;B<O;B++){N=i.readFloat();t.Color.rgba8888ToColor(f,i.readInt32()),t.Color.rgb888ToColor(p,i.readInt32()),X.setFrame(B,N,f.r,f.g,f.b,f.a,p.r,p.g,p.b),B<O-1&&this.readCurve(i,B,X)}a.push(X),d=Math.max(d,X.frames[(O-1)*t.TwoColorTimeline.ENTRIES])}}for(b=0,S=i.readInt(!0);b<S;b++){var Y=i.readInt(!0);for(C=0,P=i.readInt(!0);C<P;C++){R=i.readByte(),O=i.readInt(!0);switch(R){case SkeletonBinary2.BONE_ROTATE:(X=new t.RotateTimeline(O)).boneIndex=Y;for(B=0;B<O;B++)X.setFrame(B,i.readFloat(),i.readFloat()),B<O-1&&this.readCurve(i,B,X);a.push(X),d=Math.max(d,X.frames[(O-1)*t.RotateTimeline.ENTRIES]);break;case SkeletonBinary2.BONE_TRANSLATE:case SkeletonBinary2.BONE_SCALE:case SkeletonBinary2.BONE_SHEAR:var X=void 0,G=1;R==SkeletonBinary2.BONE_SCALE?X=new t.ScaleTimeline(O):R==SkeletonBinary2.BONE_SHEAR?X=new t.ShearTimeline(O):(X=new t.TranslateTimeline(O),G=u),X.boneIndex=Y;for(B=0;B<O;B++)X.setFrame(B,i.readFloat(),i.readFloat()*G,i.readFloat()*G),B<O-1&&this.readCurve(i,B,X);a.push(X),d=Math.max(d,X.frames[(O-1)*t.TranslateTimeline.ENTRIES])}}}for(b=0,S=i.readInt(!0);b<S;b++){var U=i.readInt(!0);O=i.readInt(!0);(X=new t.IkConstraintTimeline(O)).ikConstraintIndex=U;for(B=0;B<O;B++)X.setFrame(B,i.readFloat(),i.readFloat(),i.readFloat()*u,i.readByte(),i.readBoolean(),i.readBoolean()),B<O-1&&this.readCurve(i,B,X);a.push(X),d=Math.max(d,X.frames[(O-1)*t.IkConstraintTimeline.ENTRIES])}for(b=0,S=i.readInt(!0);b<S;b++){U=i.readInt(!0),O=i.readInt(!0);(X=new t.TransformConstraintTimeline(O)).transformConstraintIndex=U;for(B=0;B<O;B++)X.setFrame(B,i.readFloat(),i.readFloat(),i.readFloat(),i.readFloat(),i.readFloat()),B<O-1&&this.readCurve(i,B,X);a.push(X),d=Math.max(d,X.frames[(O-1)*t.TransformConstraintTimeline.ENTRIES])}for(b=0,S=i.readInt(!0);b<S;b++){U=i.readInt(!0);var V=o.pathConstraints[U];for(C=0,P=i.readInt(!0);C<P;C++){R=i.readByte(),O=i.readInt(!0);switch(R){case SkeletonBinary2.PATH_POSITION:case SkeletonBinary2.PATH_SPACING:X=void 0,G=1;R==SkeletonBinary2.PATH_SPACING?(X=new t.PathConstraintSpacingTimeline(O),V.spacingMode!=t.SpacingMode.Length&&V.spacingMode!=t.SpacingMode.Fixed||(G=u)):(X=new t.PathConstraintPositionTimeline(O),V.positionMode==t.PositionMode.Fixed&&(G=u)),X.pathConstraintIndex=U;for(B=0;B<O;B++)X.setFrame(B,i.readFloat(),i.readFloat()*G),B<O-1&&this.readCurve(i,B,X);a.push(X),d=Math.max(d,X.frames[(O-1)*t.PathConstraintPositionTimeline.ENTRIES]);break;case SkeletonBinary2.PATH_MIX:(X=new t.PathConstraintMixTimeline(O)).pathConstraintIndex=U;for(B=0;B<O;B++)X.setFrame(B,i.readFloat(),i.readFloat(),i.readFloat()),B<O-1&&this.readCurve(i,B,X);a.push(X),d=Math.max(d,X.frames[(O-1)*t.PathConstraintMixTimeline.ENTRIES])}}}for(b=0,S=i.readInt(!0);b<S;b++){var z=o.skins[i.readInt(!0)];for(C=0,P=i.readInt(!0);C<P;C++){M=i.readInt(!0);for(var W=0,H=i.readInt(!0);W<H;W++){var j=z.getAttachment(M,i.readStringRef()),q=null!=j.bones,Z=j.vertices,K=q?Z.length/3*2:Z.length;O=i.readInt(!0);(X=new t.DeformTimeline(O)).slotIndex=M,X.attachment=j;for(B=0;B<O;B++){N=i.readFloat();var $=void 0,tt=i.readInt(!0);if(0==tt)$=q?t.Utils.newFloatArray(K):Z;else{$=t.Utils.newFloatArray(K);var et=i.readInt(!0);if(tt+=et,1==u)for(var it=et;it<tt;it++)$[it]=i.readFloat();else for(it=et;it<tt;it++)$[it]=i.readFloat()*u;if(!q){it=0;for(var nt=$.length;it<nt;it++)$[it]+=Z[it]}}X.setFrame(B,N,$),B<O-1&&this.readCurve(i,B,X)}a.push(X),d=Math.max(d,X.frames[O-1])}}}var st=i.readInt(!0);if(st>0){X=new t.DrawOrderTimeline(st);var rt=o.slots.length;for(b=0;b<st;b++){N=i.readFloat();var ot=i.readInt(!0),at=t.Utils.newArray(rt,0);for(C=rt-1;C>=0;C--)at[C]=-1;var ht=t.Utils.newArray(rt-ot,0),lt=0,ut=0;for(C=0;C<ot;C++){for(M=i.readInt(!0);lt!=M;)ht[ut++]=lt++;at[lt+i.readInt(!0)]=lt++}for(;lt<rt;)ht[ut++]=lt++;for(C=rt-1;C>=0;C--)-1==at[C]&&(at[C]=ht[--ut]);X.setFrame(b,N,at)}a.push(X),d=Math.max(d,X.frames[st-1])}var ct=i.readInt(!0);if(ct>0){for(X=new t.EventTimeline(ct),b=0;b<ct;b++){N=i.readFloat();var dt=o.events[i.readInt(!0)],ft=new t.Event(N,dt);ft.intValue=i.readInt(!1),ft.floatValue=i.readFloat(),ft.stringValue=i.readBoolean()?i.readString():dt.stringValue,null!=ft.data.audioPath&&(ft.volume=i.readFloat(),ft.balance=i.readFloat()),X.setFrame(b,ft)}a.push(X),d=Math.max(d,X.frames[ct-1])}return new t.Animation(n,a,d)},SkeletonBinary2.prototype.readCurve=function(t,i,n){switch(t.readByte()){case SkeletonBinary2.CURVE_STEPPED:n.setStepped(i);break;case SkeletonBinary2.CURVE_BEZIER:this.setCurve(n,i,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat())}},SkeletonBinary2.prototype.setCurve=function(t,i,n,o,a,u){t.setCurve(i,n,o,a,u)},SkeletonBinary2.AttachmentTypeValues=[0,1,2,3,4,5,6],SkeletonBinary2.TransformModeValues=[t.TransformMode.Normal,t.TransformMode.OnlyTranslation,t.TransformMode.NoRotationOrReflection,t.TransformMode.NoScale,t.TransformMode.NoScaleOrReflection],SkeletonBinary2.PositionModeValues=[t.PositionMode.Fixed,t.PositionMode.Percent],SkeletonBinary2.SpacingModeValues=[t.SpacingMode.Length,t.SpacingMode.Fixed,t.SpacingMode.Percent],SkeletonBinary2.RotateModeValues=[t.RotateMode.Tangent,t.RotateMode.Chain,t.RotateMode.ChainScale],SkeletonBinary2.BlendModeValues=[t.BlendMode.Normal,t.BlendMode.Additive,t.BlendMode.Multiply,t.BlendMode.Screen],SkeletonBinary2.BONE_ROTATE=0,SkeletonBinary2.BONE_TRANSLATE=1,SkeletonBinary2.BONE_SCALE=2,SkeletonBinary2.BONE_SHEAR=3,SkeletonBinary2.SLOT_ATTACHMENT=0,SkeletonBinary2.SLOT_COLOR=1,SkeletonBinary2.SLOT_TWO_COLOR=2,SkeletonBinary2.PATH_POSITION=0,SkeletonBinary2.PATH_SPACING=1,SkeletonBinary2.PATH_MIX=2,SkeletonBinary2.CURVE_LINEAR=0,SkeletonBinary2.CURVE_STEPPED=1,SkeletonBinary2.CURVE_BEZIER=2,SkeletonBinary2}();t.SkeletonBinary=i;var n=function(){function BinaryInput2(t,i,n,o){void 0===i&&(i=new Array),void 0===n&&(n=0),void 0===o&&(o=new DataView(t.buffer)),this.strings=i,this.index=n,this.buffer=o}return BinaryInput2.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},BinaryInput2.prototype.readShort=function(){var t=this.buffer.getInt16(this.index);return this.index+=2,t},BinaryInput2.prototype.readInt32=function(){var t=this.buffer.getInt32(this.index);return this.index+=4,t},BinaryInput2.prototype.readInt=function(t){var i=this.readByte(),n=127&i;return 0!=(128&i)&&(n|=(127&(i=this.readByte()))<<7,0!=(128&i)&&(n|=(127&(i=this.readByte()))<<14,0!=(128&i)&&(n|=(127&(i=this.readByte()))<<21,0!=(128&i)&&(n|=(127&(i=this.readByte()))<<28)))),t?n:n>>>1^-(1&n)},BinaryInput2.prototype.readStringRef=function(){var t=this.readInt(!0);return 0==t?null:this.strings[t-1]},BinaryInput2.prototype.readString=function(){var t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;for(var i="",n=0;n<t;){var o=this.readByte();switch(o>>4){case 12:case 13:i+=String.fromCharCode((31&o)<<6|63&this.readByte()),n+=2;break;case 14:i+=String.fromCharCode((15&o)<<12|(63&this.readByte())<<6|63&this.readByte()),n+=3;break;default:i+=String.fromCharCode(o),n++}}return i},BinaryInput2.prototype.readFloat=function(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t},BinaryInput2.prototype.readBoolean=function(){return 0!=this.readByte()},BinaryInput2}(),o=function LinkedMesh2(t,i,n,o,a){this.mesh=t,this.skin=i,this.slotIndex=n,this.parent=o,this.inheritDeform=a},a=function Vertices2(t,i){void 0===t&&(t=null),void 0===i&&(i=null),this.bones=t,this.vertices=i}}(u||(u={})),function(t){var i=function(){function SkeletonBounds2(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new t.Pool((function(){return t.Utils.newFloatArray(16)}))}return SkeletonBounds2.prototype.update=function(i,n){if(null==i)throw new Error("skeleton cannot be null.");var o=this.boundingBoxes,a=this.polygons,u=this.polygonPool,d=i.slots,f=d.length;o.length=0,u.freeAll(a),a.length=0;for(var p=0;p<f;p++){var b=d[p];if(b.bone.active){var S=b.getAttachment();if(S instanceof t.BoundingBoxAttachment){var M=S;o.push(M);var C=u.obtain();C.length!=M.worldVerticesLength&&(C=t.Utils.newFloatArray(M.worldVerticesLength)),a.push(C),M.computeWorldVertices(b,0,M.worldVerticesLength,C,0,2)}}}n?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},SkeletonBounds2.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=this.polygons,u=0,d=a.length;u<d;u++)for(var f=a[u],p=f,b=0,S=f.length;b<S;b+=2){var M=p[b],C=p[b+1];t=Math.min(t,M),i=Math.min(i,C),n=Math.max(n,M),o=Math.max(o,C)}this.minX=t,this.minY=i,this.maxX=n,this.maxY=o},SkeletonBounds2.prototype.aabbContainsPoint=function(t,i){return t>=this.minX&&t<=this.maxX&&i>=this.minY&&i<=this.maxY},SkeletonBounds2.prototype.aabbIntersectsSegment=function(t,i,n,o){var a=this.minX,u=this.minY,d=this.maxX,f=this.maxY;if(t<=a&&n<=a||i<=u&&o<=u||t>=d&&n>=d||i>=f&&o>=f)return!1;var p=(o-i)/(n-t),b=p*(a-t)+i;if(b>u&&b<f)return!0;if((b=p*(d-t)+i)>u&&b<f)return!0;var S=(u-i)/p+t;return S>a&&S<d||(S=(f-i)/p+t)>a&&S<d},SkeletonBounds2.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},SkeletonBounds2.prototype.containsPoint=function(t,i){for(var n=this.polygons,o=0,a=n.length;o<a;o++)if(this.containsPointPolygon(n[o],t,i))return this.boundingBoxes[o];return null},SkeletonBounds2.prototype.containsPointPolygon=function(t,i,n){for(var o=t,a=t.length,u=a-2,d=!1,f=0;f<a;f+=2){var p=o[f+1],b=o[u+1];if(p<n&&b>=n||b<n&&p>=n){var S=o[f];S+(n-p)/(b-p)*(o[u]-S)<i&&(d=!d)}u=f}return d},SkeletonBounds2.prototype.intersectsSegment=function(t,i,n,o){for(var a=this.polygons,u=0,d=a.length;u<d;u++)if(this.intersectsSegmentPolygon(a[u],t,i,n,o))return this.boundingBoxes[u];return null},SkeletonBounds2.prototype.intersectsSegmentPolygon=function(t,i,n,o,a){for(var u=t,d=t.length,f=i-o,p=n-a,b=i*a-n*o,S=u[d-2],M=u[d-1],C=0;C<d;C+=2){var P=u[C],R=u[C+1],O=S*R-M*P,B=S-P,N=M-R,Y=f*N-p*B,X=(b*B-f*O)/Y;if((X>=S&&X<=P||X>=P&&X<=S)&&(X>=i&&X<=o||X>=o&&X<=i)){var G=(b*N-p*O)/Y;if((G>=M&&G<=R||G>=R&&G<=M)&&(G>=n&&G<=a||G>=a&&G<=n))return!0}S=P,M=R}return!1},SkeletonBounds2.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");var i=this.boundingBoxes.indexOf(t);return-1==i?null:this.polygons[i]},SkeletonBounds2.prototype.getWidth=function(){return this.maxX-this.minX},SkeletonBounds2.prototype.getHeight=function(){return this.maxY-this.minY},SkeletonBounds2}();t.SkeletonBounds=i}(u||(u={})),function(t){var i=function(){function SkeletonClipping2(){this.triangulator=new t.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}return SkeletonClipping2.prototype.clipStart=function(i,n){if(null!=this.clipAttachment)return 0;this.clipAttachment=n;var o=n.worldVerticesLength,a=t.Utils.setArraySize(this.clippingPolygon,o);n.computeWorldVertices(i,0,o,a,0,2);var u=this.clippingPolygon;SkeletonClipping2.makeClockwise(u);for(var d=this.clippingPolygons=this.triangulator.decompose(u,this.triangulator.triangulate(u)),f=0,p=d.length;f<p;f++){var b=d[f];SkeletonClipping2.makeClockwise(b),b.push(b[0]),b.push(b[1])}return d.length},SkeletonClipping2.prototype.clipEndWithSlot=function(t){null!=this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()},SkeletonClipping2.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},SkeletonClipping2.prototype.isClipping=function(){return null!=this.clipAttachment},SkeletonClipping2.prototype.clipTriangles=function(i,n,o,a,u,d,f,p){var b=this.clipOutput,S=this.clippedVertices,M=this.clippedTriangles,C=this.clippingPolygons,P=this.clippingPolygons.length,R=p?12:8,O=0;S.length=0,M.length=0;t:for(var B=0;B<a;B+=3)for(var N=o[B]<<1,Y=i[N],X=i[N+1],G=u[N],U=u[N+1],V=i[N=o[B+1]<<1],z=i[N+1],W=u[N],H=u[N+1],j=i[N=o[B+2]<<1],q=i[N+1],Z=u[N],K=u[N+1],$=0;$<P;$++){var tt=S.length;if(!this.clip(Y,X,V,z,j,q,C[$],b)){(lt=t.Utils.setArraySize(S,tt+3*R))[tt]=Y,lt[tt+1]=X,lt[tt+2]=d.r,lt[tt+3]=d.g,lt[tt+4]=d.b,lt[tt+5]=d.a,p?(lt[tt+6]=G,lt[tt+7]=U,lt[tt+8]=f.r,lt[tt+9]=f.g,lt[tt+10]=f.b,lt[tt+11]=f.a,lt[tt+12]=V,lt[tt+13]=z,lt[tt+14]=d.r,lt[tt+15]=d.g,lt[tt+16]=d.b,lt[tt+17]=d.a,lt[tt+18]=W,lt[tt+19]=H,lt[tt+20]=f.r,lt[tt+21]=f.g,lt[tt+22]=f.b,lt[tt+23]=f.a,lt[tt+24]=j,lt[tt+25]=q,lt[tt+26]=d.r,lt[tt+27]=d.g,lt[tt+28]=d.b,lt[tt+29]=d.a,lt[tt+30]=Z,lt[tt+31]=K,lt[tt+32]=f.r,lt[tt+33]=f.g,lt[tt+34]=f.b,lt[tt+35]=f.a):(lt[tt+6]=G,lt[tt+7]=U,lt[tt+8]=V,lt[tt+9]=z,lt[tt+10]=d.r,lt[tt+11]=d.g,lt[tt+12]=d.b,lt[tt+13]=d.a,lt[tt+14]=W,lt[tt+15]=H,lt[tt+16]=j,lt[tt+17]=q,lt[tt+18]=d.r,lt[tt+19]=d.g,lt[tt+20]=d.b,lt[tt+21]=d.a,lt[tt+22]=Z,lt[tt+23]=K),tt=M.length,(yt=t.Utils.setArraySize(M,tt+3))[tt]=O,yt[tt+1]=O+1,yt[tt+2]=O+2,O+=3;continue t}var et=b.length;if(0!=et){for(var it=z-q,nt=j-V,st=Y-j,rt=q-X,ot=1/(it*st+nt*(X-q)),at=et>>1,ht=this.clipOutput,lt=t.Utils.setArraySize(S,tt+at*R),ut=0;ut<et;ut+=2){var ct=ht[ut],dt=ht[ut+1];lt[tt]=ct,lt[tt+1]=dt,lt[tt+2]=d.r,lt[tt+3]=d.g,lt[tt+4]=d.b,lt[tt+5]=d.a;var ft=ct-j,pt=dt-q,gt=(it*ft+nt*pt)*ot,vt=(rt*ft+st*pt)*ot,mt=1-gt-vt;lt[tt+6]=G*gt+W*vt+Z*mt,lt[tt+7]=U*gt+H*vt+K*mt,p&&(lt[tt+8]=f.r,lt[tt+9]=f.g,lt[tt+10]=f.b,lt[tt+11]=f.a),tt+=R}tt=M.length;var yt=t.Utils.setArraySize(M,tt+3*(at-2));at--;for(ut=1;ut<at;ut++)yt[tt]=O,yt[tt+1]=O+ut,yt[tt+2]=O+ut+1,tt+=3;O+=at+1}}},SkeletonClipping2.prototype.clip=function(t,i,n,o,a,u,d,f){var p=f,b=!1,S=null;d.length%4>=2?(S=f,f=this.scratch):S=this.scratch,S.length=0,S.push(t),S.push(i),S.push(n),S.push(o),S.push(a),S.push(u),S.push(t),S.push(i),f.length=0;for(var M=d,C=d.length-4,P=0;;P+=2){for(var R=M[P],O=M[P+1],B=M[P+2],N=M[P+3],Y=R-B,X=O-N,G=S,U=S.length-2,V=f.length,z=0;z<U;z+=2){var W=G[z],H=G[z+1],j=G[z+2],q=G[z+3],Z=Y*(q-N)-X*(j-B)>0;if(Y*(H-N)-X*(W-B)>0){if(Z){f.push(j),f.push(q);continue}var K=(tt=q-H)*(B-R)-(et=j-W)*(N-O);if(Math.abs(K)>1e-6){var $=(et*(O-H)-tt*(R-W))/K;f.push(R+(B-R)*$),f.push(O+(N-O)*$)}else f.push(R),f.push(O)}else if(Z){var tt,et;K=(tt=q-H)*(B-R)-(et=j-W)*(N-O);if(Math.abs(K)>1e-6){$=(et*(O-H)-tt*(R-W))/K;f.push(R+(B-R)*$),f.push(O+(N-O)*$)}else f.push(R),f.push(O);f.push(j),f.push(q)}b=!0}if(V==f.length)return p.length=0,!0;if(f.push(f[0]),f.push(f[1]),P==C)break;var it=f;(f=S).length=0,S=it}if(p!=f){p.length=0;P=0;for(var nt=f.length-2;P<nt;P++)p[P]=f[P]}else p.length=p.length-2;return b},SkeletonClipping2.makeClockwise=function(t){for(var i=t,n=t.length,o=i[n-2]*i[1]-i[0]*i[n-1],a=0,u=0,d=0,f=0,p=n-3;f<p;f+=2)a=i[f],u=i[f+1],d=i[f+2],o+=a*i[f+3]-d*u;if(!(o<0)){f=0;var b=n-2;for(p=n>>1;f<p;f+=2){var S=i[f],M=i[f+1],C=b-f;i[f]=i[C],i[f+1]=i[C+1],i[C]=S,i[C+1]=M}}},SkeletonClipping2}();t.SkeletonClipping=i}(u||(u={})),function(t){var i=function(){function SkeletonData2(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return SkeletonData2.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var i=this.bones,n=0,o=i.length;n<o;n++){var a=i[n];if(a.name==t)return a}return null},SkeletonData2.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var i=this.bones,n=0,o=i.length;n<o;n++)if(i[n].name==t)return n;return-1},SkeletonData2.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var i=this.slots,n=0,o=i.length;n<o;n++){var a=i[n];if(a.name==t)return a}return null},SkeletonData2.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var i=this.slots,n=0,o=i.length;n<o;n++)if(i[n].name==t)return n;return-1},SkeletonData2.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var i=this.skins,n=0,o=i.length;n<o;n++){var a=i[n];if(a.name==t)return a}return null},SkeletonData2.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var i=this.events,n=0,o=i.length;n<o;n++){var a=i[n];if(a.name==t)return a}return null},SkeletonData2.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var i=this.animations,n=0,o=i.length;n<o;n++){var a=i[n];if(a.name==t)return a}return null},SkeletonData2.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var i=this.ikConstraints,n=0,o=i.length;n<o;n++){var a=i[n];if(a.name==t)return a}return null},SkeletonData2.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var i=this.transformConstraints,n=0,o=i.length;n<o;n++){var a=i[n];if(a.name==t)return a}return null},SkeletonData2.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var i=this.pathConstraints,n=0,o=i.length;n<o;n++){var a=i[n];if(a.name==t)return a}return null},SkeletonData2.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var i=this.pathConstraints,n=0,o=i.length;n<o;n++)if(i[n].name==t)return n;return-1},SkeletonData2}();t.SkeletonData=i}(u||(u={})),function(t){var i=function(){function SkeletonJson2(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return SkeletonJson2.prototype.readSkeletonData=function(i){var n=this.scale,o=new t.SkeletonData,a="string"==typeof i?JSON.parse(i):i,u=a.skeleton;if(null!=u){if(o.hash=u.hash,o.version=u.spine,"3.8.75"==o.version)throw new Error("Unsupported skeleton data, please export with a newer version of Spine.");o.x=u.x,o.y=u.y,o.width=u.width,o.height=u.height,o.fps=u.fps,o.imagesPath=u.images}if(a.bones)for(var d=0;d<a.bones.length;d++){var f=a.bones[d],p=null,b=this.getValue(f,"parent",null);if(null!=b&&null==(p=o.findBone(b)))throw new Error("Parent bone not found: "+b);(P=new t.BoneData(o.bones.length,f.name,p)).length=this.getValue(f,"length",0)*n,P.x=this.getValue(f,"x",0)*n,P.y=this.getValue(f,"y",0)*n,P.rotation=this.getValue(f,"rotation",0),P.scaleX=this.getValue(f,"scaleX",1),P.scaleY=this.getValue(f,"scaleY",1),P.shearX=this.getValue(f,"shearX",0),P.shearY=this.getValue(f,"shearY",0),P.transformMode=SkeletonJson2.transformModeFromString(this.getValue(f,"transform","normal")),P.skinRequired=this.getValue(f,"skin",!1),o.bones.push(P)}if(a.slots)for(d=0;d<a.slots.length;d++){var S=(H=a.slots[d]).name,M=H.bone,C=o.findBone(M);if(null==C)throw new Error("Slot bone not found: "+M);var P=new t.SlotData(o.slots.length,S,C),R=this.getValue(H,"color",null);null!=R&&P.color.setFromString(R);var O=this.getValue(H,"dark",null);null!=O&&(P.darkColor=new t.Color(1,1,1,1),P.darkColor.setFromString(O)),P.attachmentName=this.getValue(H,"attachment",null),P.blendMode=SkeletonJson2.blendModeFromString(this.getValue(H,"blend","normal")),o.slots.push(P)}if(a.ik)for(d=0;d<a.ik.length;d++){var B=a.ik[d];(P=new t.IkConstraintData(B.name)).order=this.getValue(B,"order",0),P.skinRequired=this.getValue(B,"skin",!1);for(var N=0;N<B.bones.length;N++){M=B.bones[N];if(null==(V=o.findBone(M)))throw new Error("IK bone not found: "+M);P.bones.push(V)}var Y=B.target;if(P.target=o.findBone(Y),null==P.target)throw new Error("IK target bone not found: "+Y);P.mix=this.getValue(B,"mix",1),P.softness=this.getValue(B,"softness",0)*n,P.bendDirection=this.getValue(B,"bendPositive",!0)?1:-1,P.compress=this.getValue(B,"compress",!1),P.stretch=this.getValue(B,"stretch",!1),P.uniform=this.getValue(B,"uniform",!1),o.ikConstraints.push(P)}if(a.transform)for(d=0;d<a.transform.length;d++){B=a.transform[d];(P=new t.TransformConstraintData(B.name)).order=this.getValue(B,"order",0),P.skinRequired=this.getValue(B,"skin",!1);for(N=0;N<B.bones.length;N++){M=B.bones[N];if(null==(V=o.findBone(M)))throw new Error("Transform constraint bone not found: "+M);P.bones.push(V)}Y=B.target;if(P.target=o.findBone(Y),null==P.target)throw new Error("Transform constraint target bone not found: "+Y);P.local=this.getValue(B,"local",!1),P.relative=this.getValue(B,"relative",!1),P.offsetRotation=this.getValue(B,"rotation",0),P.offsetX=this.getValue(B,"x",0)*n,P.offsetY=this.getValue(B,"y",0)*n,P.offsetScaleX=this.getValue(B,"scaleX",0),P.offsetScaleY=this.getValue(B,"scaleY",0),P.offsetShearY=this.getValue(B,"shearY",0),P.rotateMix=this.getValue(B,"rotateMix",1),P.translateMix=this.getValue(B,"translateMix",1),P.scaleMix=this.getValue(B,"scaleMix",1),P.shearMix=this.getValue(B,"shearMix",1),o.transformConstraints.push(P)}if(a.path)for(d=0;d<a.path.length;d++){B=a.path[d];(P=new t.PathConstraintData(B.name)).order=this.getValue(B,"order",0),P.skinRequired=this.getValue(B,"skin",!1);for(N=0;N<B.bones.length;N++){M=B.bones[N];if(null==(V=o.findBone(M)))throw new Error("Transform constraint bone not found: "+M);P.bones.push(V)}Y=B.target;if(P.target=o.findSlot(Y),null==P.target)throw new Error("Path target slot not found: "+Y);P.positionMode=SkeletonJson2.positionModeFromString(this.getValue(B,"positionMode","percent")),P.spacingMode=SkeletonJson2.spacingModeFromString(this.getValue(B,"spacingMode","length")),P.rotateMode=SkeletonJson2.rotateModeFromString(this.getValue(B,"rotateMode","tangent")),P.offsetRotation=this.getValue(B,"rotation",0),P.position=this.getValue(B,"position",0),P.positionMode==t.PositionMode.Fixed&&(P.position*=n),P.spacing=this.getValue(B,"spacing",0),P.spacingMode!=t.SpacingMode.Length&&P.spacingMode!=t.SpacingMode.Fixed||(P.spacing*=n),P.rotateMix=this.getValue(B,"rotateMix",1),P.translateMix=this.getValue(B,"translateMix",1),o.pathConstraints.push(P)}if(a.skins)for(d=0;d<a.skins.length;d++){var X=a.skins[d],G=new t.Skin(X.name);if(X.bones)for(var U=0;U<X.bones.length;U++){var V;if(null==(V=o.findBone(X.bones[U])))throw new Error("Skin bone not found: "+X.bones[d]);G.bones.push(V)}if(X.ik)for(U=0;U<X.ik.length;U++){if(null==(z=o.findIkConstraint(X.ik[U])))throw new Error("Skin IK constraint not found: "+X.ik[d]);G.constraints.push(z)}if(X.transform)for(U=0;U<X.transform.length;U++){if(null==(z=o.findTransformConstraint(X.transform[U])))throw new Error("Skin transform constraint not found: "+X.transform[d]);G.constraints.push(z)}if(X.path)for(U=0;U<X.path.length;U++){var z;if(null==(z=o.findPathConstraint(X.path[U])))throw new Error("Skin path constraint not found: "+X.path[d]);G.constraints.push(z)}for(var S in X.attachments){var W=o.findSlot(S);if(null==W)throw new Error("Slot not found: "+S);var H=X.attachments[S];for(var j in H){var q=this.readAttachment(H[j],G,W.index,j,o);null!=q&&G.setAttachment(W.index,j,q)}}o.skins.push(G),"default"==G.name&&(o.defaultSkin=G)}d=0;for(var Z=this.linkedMeshes.length;d<Z;d++){var K=this.linkedMeshes[d];if(null==(G=null==K.skin?o.defaultSkin:o.findSkin(K.skin)))throw new Error("Skin not found: "+K.skin);var $=G.getAttachment(K.slotIndex,K.parent);if(null==$)throw new Error("Parent mesh not found: "+K.parent);K.mesh.deformAttachment=K.inheritDeform?$:K.mesh,K.mesh.setParentMesh($),K.mesh.updateUVs()}if(this.linkedMeshes.length=0,a.events)for(var tt in a.events){var et=a.events[tt];(P=new t.EventData(tt)).intValue=this.getValue(et,"int",0),P.floatValue=this.getValue(et,"float",0),P.stringValue=this.getValue(et,"string",""),P.audioPath=this.getValue(et,"audio",null),null!=P.audioPath&&(P.volume=this.getValue(et,"volume",1),P.balance=this.getValue(et,"balance",0)),o.events.push(P)}if(a.animations)for(var it in a.animations){var nt=a.animations[it];this.readAnimation(nt,it,o)}return o},SkeletonJson2.prototype.readAttachment=function(i,o,a,u,d){var f=this.scale;switch(u=this.getValue(i,"name",u),this.getValue(i,"type","region")){case"region":var p=this.getValue(i,"path",u),b=this.attachmentLoader.newRegionAttachment(o,u,p);return null==b?null:(b.path=p,b.x=this.getValue(i,"x",0)*f,b.y=this.getValue(i,"y",0)*f,b.scaleX=this.getValue(i,"scaleX",1),b.scaleY=this.getValue(i,"scaleY",1),b.rotation=this.getValue(i,"rotation",0),b.width=i.width*f,b.height=i.height*f,null!=(U=this.getValue(i,"color",null))&&b.color.setFromString(U),b.updateOffset(),b);case"boundingbox":var S=this.attachmentLoader.newBoundingBoxAttachment(o,u);return null==S?null:(this.readVertices(i,S,i.vertexCount<<1),null!=(U=this.getValue(i,"color",null))&&S.color.setFromString(U),S);case"mesh":case"linkedmesh":p=this.getValue(i,"path",u);var M=this.attachmentLoader.newMeshAttachment(o,u,p);if(null==M)return null;M.path=p,null!=(U=this.getValue(i,"color",null))&&M.color.setFromString(U),M.width=this.getValue(i,"width",0)*f,M.height=this.getValue(i,"height",0)*f;var C=this.getValue(i,"parent",null);if(null!=C)return this.linkedMeshes.push(new n(M,this.getValue(i,"skin",null),a,C,this.getValue(i,"deform",!0))),M;var P=i.uvs;return this.readVertices(i,M,P.length),M.triangles=i.triangles,M.regionUVs=P,M.updateUVs(),M.edges=this.getValue(i,"edges",null),M.hullLength=2*this.getValue(i,"hull",0),M;case"path":if(null==(p=this.attachmentLoader.newPathAttachment(o,u)))return null;p.closed=this.getValue(i,"closed",!1),p.constantSpeed=this.getValue(i,"constantSpeed",!0);var R=i.vertexCount;this.readVertices(i,p,R<<1);for(var O=t.Utils.newArray(R/3,0),B=0;B<i.lengths.length;B++)O[B]=i.lengths[B]*f;return p.lengths=O,null!=(U=this.getValue(i,"color",null))&&p.color.setFromString(U),p;case"point":var N=this.attachmentLoader.newPointAttachment(o,u);return null==N?null:(N.x=this.getValue(i,"x",0)*f,N.y=this.getValue(i,"y",0)*f,N.rotation=this.getValue(i,"rotation",0),null!=(U=this.getValue(i,"color",null))&&N.color.setFromString(U),N);case"clipping":var Y=this.attachmentLoader.newClippingAttachment(o,u);if(null==Y)return null;var X=this.getValue(i,"end",null);if(null!=X){var G=d.findSlot(X);if(null==G)throw new Error("Clipping end slot not found: "+X);Y.endSlot=G}var U;R=i.vertexCount;return this.readVertices(i,Y,R<<1),null!=(U=this.getValue(i,"color",null))&&Y.color.setFromString(U),Y}return null},SkeletonJson2.prototype.readVertices=function(i,n,o){var a=this.scale;n.worldVerticesLength=o;var u=i.vertices;if(o!=u.length){var d=new Array,f=new Array;for(M=0,C=u.length;M<C;){var p=u[M++];f.push(p);for(var b=M+4*p;M<b;M+=4)f.push(u[M]),d.push(u[M+1]*a),d.push(u[M+2]*a),d.push(u[M+3])}n.bones=f,n.vertices=t.Utils.toFloatArray(d)}else{var S=t.Utils.toFloatArray(u);if(1!=a)for(var M=0,C=u.length;M<C;M++)S[M]*=a;n.vertices=S}},SkeletonJson2.prototype.readAnimation=function(i,n,o){var a=this.scale,u=new Array,d=0;if(i.slots)for(var f in i.slots){var p=i.slots[f];if(-1==(xt=o.findSlotIndex(f)))throw new Error("Slot not found: "+f);for(var b in p){var S=p[b];if("attachment"==b){(G=new t.AttachmentTimeline(S.length)).slotIndex=xt;for(var M=0,C=0;C<S.length;C++){var P=S[C];G.setFrame(M++,this.getValue(P,"time",0),P.name)}u.push(G),d=Math.max(d,G.frames[G.getFrameCount()-1])}else if("color"==b){(G=new t.ColorTimeline(S.length)).slotIndex=xt;for(M=0,C=0;C<S.length;C++){P=S[C];var R=new t.Color;R.setFromString(P.color),G.setFrame(M,this.getValue(P,"time",0),R.r,R.g,R.b,R.a),this.readCurve(P,G,M),M++}u.push(G),d=Math.max(d,G.frames[(G.getFrameCount()-1)*t.ColorTimeline.ENTRIES])}else{if("twoColor"!=b)throw new Error("Invalid timeline type for a slot: "+b+" ("+f+")");(G=new t.TwoColorTimeline(S.length)).slotIndex=xt;for(M=0,C=0;C<S.length;C++){P=S[C];var O=new t.Color,B=new t.Color;O.setFromString(P.light),B.setFromString(P.dark),G.setFrame(M,this.getValue(P,"time",0),O.r,O.g,O.b,O.a,B.r,B.g,B.b),this.readCurve(P,G,M),M++}u.push(G),d=Math.max(d,G.frames[(G.getFrameCount()-1)*t.TwoColorTimeline.ENTRIES])}}}if(i.bones)for(var N in i.bones){var Y=i.bones[N],X=o.findBoneIndex(N);if(-1==X)throw new Error("Bone not found: "+N);for(var b in Y){S=Y[b];if("rotate"===b){(G=new t.RotateTimeline(S.length)).boneIndex=X;for(M=0,C=0;C<S.length;C++){P=S[C];G.setFrame(M,this.getValue(P,"time",0),this.getValue(P,"angle",0)),this.readCurve(P,G,M),M++}u.push(G),d=Math.max(d,G.frames[(G.getFrameCount()-1)*t.RotateTimeline.ENTRIES])}else{if("translate"!==b&&"scale"!==b&&"shear"!==b)throw new Error("Invalid timeline type for a bone: "+b+" ("+N+")");var G=null,U=1,V=0;"scale"===b?(G=new t.ScaleTimeline(S.length),V=1):"shear"===b?G=new t.ShearTimeline(S.length):(G=new t.TranslateTimeline(S.length),U=a),G.boneIndex=X;for(M=0,C=0;C<S.length;C++){P=S[C];var z=this.getValue(P,"x",V),W=this.getValue(P,"y",V);G.setFrame(M,this.getValue(P,"time",0),z*U,W*U),this.readCurve(P,G,M),M++}u.push(G),d=Math.max(d,G.frames[(G.getFrameCount()-1)*t.TranslateTimeline.ENTRIES])}}}if(i.ik)for(var H in i.ik){var j=i.ik[H],q=o.findIkConstraint(H);(G=new t.IkConstraintTimeline(j.length)).ikConstraintIndex=o.ikConstraints.indexOf(q);for(M=0,C=0;C<j.length;C++){P=j[C];G.setFrame(M,this.getValue(P,"time",0),this.getValue(P,"mix",1),this.getValue(P,"softness",0)*a,this.getValue(P,"bendPositive",!0)?1:-1,this.getValue(P,"compress",!1),this.getValue(P,"stretch",!1)),this.readCurve(P,G,M),M++}u.push(G),d=Math.max(d,G.frames[(G.getFrameCount()-1)*t.IkConstraintTimeline.ENTRIES])}if(i.transform)for(var H in i.transform){j=i.transform[H],q=o.findTransformConstraint(H);(G=new t.TransformConstraintTimeline(j.length)).transformConstraintIndex=o.transformConstraints.indexOf(q);for(M=0,C=0;C<j.length;C++){P=j[C];G.setFrame(M,this.getValue(P,"time",0),this.getValue(P,"rotateMix",1),this.getValue(P,"translateMix",1),this.getValue(P,"scaleMix",1),this.getValue(P,"shearMix",1)),this.readCurve(P,G,M),M++}u.push(G),d=Math.max(d,G.frames[(G.getFrameCount()-1)*t.TransformConstraintTimeline.ENTRIES])}if(i.path)for(var H in i.path){j=i.path[H];var Z=o.findPathConstraintIndex(H);if(-1==Z)throw new Error("Path constraint not found: "+H);var K=o.pathConstraints[Z];for(var b in j){S=j[b];if("position"===b||"spacing"===b){G=null,U=1;"spacing"===b?(G=new t.PathConstraintSpacingTimeline(S.length),K.spacingMode!=t.SpacingMode.Length&&K.spacingMode!=t.SpacingMode.Fixed||(U=a)):(G=new t.PathConstraintPositionTimeline(S.length),K.positionMode==t.PositionMode.Fixed&&(U=a)),G.pathConstraintIndex=Z;for(M=0,C=0;C<S.length;C++){P=S[C];G.setFrame(M,this.getValue(P,"time",0),this.getValue(P,b,0)*U),this.readCurve(P,G,M),M++}u.push(G),d=Math.max(d,G.frames[(G.getFrameCount()-1)*t.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===b){(G=new t.PathConstraintMixTimeline(S.length)).pathConstraintIndex=Z;for(M=0,C=0;C<S.length;C++){P=S[C];G.setFrame(M,this.getValue(P,"time",0),this.getValue(P,"rotateMix",1),this.getValue(P,"translateMix",1)),this.readCurve(P,G,M),M++}u.push(G),d=Math.max(d,G.frames[(G.getFrameCount()-1)*t.PathConstraintMixTimeline.ENTRIES])}}}if(i.deform)for(var $ in i.deform){var tt=i.deform[$],et=o.findSkin($);if(null==et)throw new Error("Skin not found: "+$);for(var f in tt){p=tt[f];if(-1==(xt=o.findSlotIndex(f)))throw new Error("Slot not found: "+p.name);for(var b in p){S=p[b];var it=et.getAttachment(xt,b);if(null==it)throw new Error("Deform attachment not found: "+S.name);var nt=null!=it.bones,st=it.vertices,rt=nt?st.length/3*2:st.length;(G=new t.DeformTimeline(S.length)).slotIndex=xt,G.attachment=it;M=0;for(var ot=0;ot<S.length;ot++){P=S[ot];var at=void 0,ht=this.getValue(P,"vertices",null);if(null==ht)at=nt?t.Utils.newFloatArray(rt):st;else{at=t.Utils.newFloatArray(rt);var lt=this.getValue(P,"offset",0);if(t.Utils.arrayCopy(ht,0,at,lt,ht.length),1!=a)for(var ut=(C=lt)+ht.length;C<ut;C++)at[C]*=a;if(!nt)for(C=0;C<rt;C++)at[C]+=st[C]}G.setFrame(M,this.getValue(P,"time",0),at),this.readCurve(P,G,M),M++}u.push(G),d=Math.max(d,G.frames[G.getFrameCount()-1])}}}var ct=i.drawOrder;if(null==ct&&(ct=i.draworder),null!=ct){G=new t.DrawOrderTimeline(ct.length);var dt=o.slots.length;for(M=0,ot=0;ot<ct.length;ot++){var ft=ct[ot],pt=null,gt=this.getValue(ft,"offsets",null);if(null!=gt){pt=t.Utils.newArray(dt,-1);var vt=t.Utils.newArray(dt-gt.length,0),mt=0,yt=0;for(C=0;C<gt.length;C++){var xt,Tt=gt[C];if(-1==(xt=o.findSlotIndex(Tt.slot)))throw new Error("Slot not found: "+Tt.slot);for(;mt!=xt;)vt[yt++]=mt++;pt[mt+Tt.offset]=mt++}for(;mt<dt;)vt[yt++]=mt++;for(C=dt-1;C>=0;C--)-1==pt[C]&&(pt[C]=vt[--yt])}G.setFrame(M++,this.getValue(ft,"time",0),pt)}u.push(G),d=Math.max(d,G.frames[G.getFrameCount()-1])}if(i.events){for(G=new t.EventTimeline(i.events.length),M=0,C=0;C<i.events.length;C++){var wt=i.events[C],bt=o.findEvent(wt.name);if(null==bt)throw new Error("Event not found: "+wt.name);var St=new t.Event(t.Utils.toSinglePrecision(this.getValue(wt,"time",0)),bt);St.intValue=this.getValue(wt,"int",bt.intValue),St.floatValue=this.getValue(wt,"float",bt.floatValue),St.stringValue=this.getValue(wt,"string",bt.stringValue),null!=St.data.audioPath&&(St.volume=this.getValue(wt,"volume",1),St.balance=this.getValue(wt,"balance",0)),G.setFrame(M++,St)}u.push(G),d=Math.max(d,G.frames[G.getFrameCount()-1])}if(isNaN(d))throw new Error("Error while parsing animation, duration is NaN");o.animations.push(new t.Animation(n,u,d))},SkeletonJson2.prototype.readCurve=function(t,i,n){if(t.hasOwnProperty("curve"))if("stepped"==t.curve)i.setStepped(n);else{var o=t.curve;i.setCurve(n,o,this.getValue(t,"c2",0),this.getValue(t,"c3",1),this.getValue(t,"c4",1))}},SkeletonJson2.prototype.getValue=function(t,i,n){return void 0!==t[i]?t[i]:n},SkeletonJson2.blendModeFromString=function(i){if("normal"==(i=i.toLowerCase()))return t.BlendMode.Normal;if("additive"==i)return t.BlendMode.Additive;if("multiply"==i)return t.BlendMode.Multiply;if("screen"==i)return t.BlendMode.Screen;throw new Error("Unknown blend mode: "+i)},SkeletonJson2.positionModeFromString=function(i){if("fixed"==(i=i.toLowerCase()))return t.PositionMode.Fixed;if("percent"==i)return t.PositionMode.Percent;throw new Error("Unknown position mode: "+i)},SkeletonJson2.spacingModeFromString=function(i){if("length"==(i=i.toLowerCase()))return t.SpacingMode.Length;if("fixed"==i)return t.SpacingMode.Fixed;if("percent"==i)return t.SpacingMode.Percent;throw new Error("Unknown position mode: "+i)},SkeletonJson2.rotateModeFromString=function(i){if("tangent"==(i=i.toLowerCase()))return t.RotateMode.Tangent;if("chain"==i)return t.RotateMode.Chain;if("chainscale"==i)return t.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+i)},SkeletonJson2.transformModeFromString=function(i){if("normal"==(i=i.toLowerCase()))return t.TransformMode.Normal;if("onlytranslation"==i)return t.TransformMode.OnlyTranslation;if("norotationorreflection"==i)return t.TransformMode.NoRotationOrReflection;if("noscale"==i)return t.TransformMode.NoScale;if("noscaleorreflection"==i)return t.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+i)},SkeletonJson2}();t.SkeletonJson=i;var n=function LinkedMesh2(t,i,n,o,a){this.mesh=t,this.skin=i,this.slotIndex=n,this.parent=o,this.inheritDeform=a}}(u||(u={})),function(t){var i=function SkinEntry2(t,i,n){this.slotIndex=t,this.name=i,this.attachment=n};t.SkinEntry=i;var n=function(){function Skin2(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,null==t)throw new Error("name cannot be null.");this.name=t}return Skin2.prototype.setAttachment=function(t,i,n){if(null==n)throw new Error("attachment cannot be null.");var o=this.attachments;t>=o.length&&(o.length=t+1),o[t]||(o[t]={}),o[t][i]=n},Skin2.prototype.addSkin=function(t){for(var i=0;i<t.bones.length;i++){for(var n=t.bones[i],o=!1,a=0;a<this.bones.length;a++)if(this.bones[a]==n){o=!0;break}o||this.bones.push(n)}for(i=0;i<t.constraints.length;i++){var u=t.constraints[i];for(o=!1,a=0;a<this.constraints.length;a++)if(this.constraints[a]==u){o=!0;break}o||this.constraints.push(u)}var d=t.getAttachments();for(i=0;i<d.length;i++){var f=d[i];this.setAttachment(f.slotIndex,f.name,f.attachment)}},Skin2.prototype.copySkin=function(i){for(var n=0;n<i.bones.length;n++){for(var o=i.bones[n],a=!1,u=0;u<this.bones.length;u++)if(this.bones[u]==o){a=!0;break}a||this.bones.push(o)}for(n=0;n<i.constraints.length;n++){var d=i.constraints[n];for(a=!1,u=0;u<this.constraints.length;u++)if(this.constraints[u]==d){a=!0;break}a||this.constraints.push(d)}var f=i.getAttachments();for(n=0;n<f.length;n++){var p=f[n];null!=p.attachment&&(p.attachment instanceof t.MeshAttachment?(p.attachment=p.attachment.newLinkedMesh(),this.setAttachment(p.slotIndex,p.name,p.attachment)):(p.attachment=p.attachment.copy(),this.setAttachment(p.slotIndex,p.name,p.attachment)))}},Skin2.prototype.getAttachment=function(t,i){var n=this.attachments[t];return n?n[i]:null},Skin2.prototype.removeAttachment=function(t,i){var n=this.attachments[t];n&&(n[i]=null)},Skin2.prototype.getAttachments=function(){for(var t=new Array,n=0;n<this.attachments.length;n++){var o=this.attachments[n];if(o)for(var a in o){var u=o[a];u&&t.push(new i(n,a,u))}}return t},Skin2.prototype.getAttachmentsForSlot=function(t,n){var o=this.attachments[t];if(o)for(var a in o){var u=o[a];u&&n.push(new i(t,a,u))}},Skin2.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},Skin2.prototype.attachAll=function(t,i){for(var n=0,o=0;o<t.slots.length;o++){var a=t.slots[o],u=a.getAttachment();if(u&&n<i.attachments.length){var d=i.attachments[n];for(var f in d){if(u==d[f]){var p=this.getAttachment(n,f);null!=p&&a.setAttachment(p);break}}}n++}},Skin2}();t.Skin=n}(u||(u={})),function(t){var i=function(){function Slot2(i,n){if(this.deform=new Array,null==i)throw new Error("data cannot be null.");if(null==n)throw new Error("bone cannot be null.");this.data=i,this.bone=n,this.color=new t.Color,this.darkColor=null==i.darkColor?null:new t.Color,this.setToSetupPose()}return Slot2.prototype.getSkeleton=function(){return this.bone.skeleton},Slot2.prototype.getAttachment=function(){return this.attachment},Slot2.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},Slot2.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},Slot2.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},Slot2.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},Slot2}();t.Slot=i}(u||(u={})),function(t){var i=function SlotData2(i,n,o){if(this.color=new t.Color(1,1,1,1),i<0)throw new Error("index must be >= 0.");if(null==n)throw new Error("name cannot be null.");if(null==o)throw new Error("boneData cannot be null.");this.index=i,this.name=n,this.boneData=o};t.SlotData=i}(u||(u={})),function(t){var i,n,o,a,u=function(){function Texture2(t){this._image=t}return Texture2.prototype.getImage=function(){return this._image},Texture2.filterFromString=function(t){switch(t.toLowerCase()){case"nearest":return i.Nearest;case"linear":return i.Linear;case"mipmap":return i.MipMap;case"mipmapnearestnearest":return i.MipMapNearestNearest;case"mipmaplinearnearest":return i.MipMapLinearNearest;case"mipmapnearestlinear":return i.MipMapNearestLinear;case"mipmaplinearlinear":return i.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}},Texture2.wrapFromString=function(t){switch(t.toLowerCase()){case"mirroredtepeat":return o.MirroredRepeat;case"clamptoedge":return o.ClampToEdge;case"repeat":return o.Repeat;default:throw new Error("Unknown texture wrap "+t)}},Texture2}();t.Texture=u,(n=i=t.TextureFilter||(t.TextureFilter={}))[n.Nearest=9728]="Nearest",n[n.Linear=9729]="Linear",n[n.MipMap=9987]="MipMap",n[n.MipMapNearestNearest=9984]="MipMapNearestNearest",n[n.MipMapLinearNearest=9985]="MipMapLinearNearest",n[n.MipMapNearestLinear=9986]="MipMapNearestLinear",n[n.MipMapLinearLinear=9987]="MipMapLinearLinear",(a=o=t.TextureWrap||(t.TextureWrap={}))[a.MirroredRepeat=33648]="MirroredRepeat",a[a.ClampToEdge=33071]="ClampToEdge",a[a.Repeat=10497]="Repeat";var f=function TextureRegion2(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.rotate=!1,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0};t.TextureRegion=f;var p=function(t){function FakeTexture2(){return null!==t&&t.apply(this,arguments)||this}return d(FakeTexture2,t),FakeTexture2.prototype.setFilters=function(t,i){},FakeTexture2.prototype.setWraps=function(t,i){},FakeTexture2.prototype.dispose=function(){},FakeTexture2}(u);t.FakeTexture=p}(u||(u={})),function(t){var i=function(){function TextureAtlas2(t,i){this.pages=new Array,this.regions=new Array,this.load(t,i)}return TextureAtlas2.prototype.load=function(i,u){if(null==u)throw new Error("textureLoader cannot be null.");for(var d=new n(i),f=new Array(4),p=null;;){var b=d.readLine();if(null==b)break;if(0==(b=b.trim()).length)p=null;else if(p){var S=new a;S.name=b,S.page=p;var M=d.readValue();"true"==M.toLocaleLowerCase()?S.degrees=90:"false"==M.toLocaleLowerCase()?S.degrees=0:S.degrees=parseFloat(M),S.rotate=90==S.degrees,d.readTuple(f);var C=parseInt(f[0]),P=parseInt(f[1]);d.readTuple(f);var R=parseInt(f[0]),O=parseInt(f[1]);S.u=C/p.width,S.v=P/p.height,S.rotate?(S.u2=(C+O)/p.width,S.v2=(P+R)/p.height):(S.u2=(C+R)/p.width,S.v2=(P+O)/p.height),S.x=C,S.y=P,S.width=Math.abs(R),S.height=Math.abs(O),4==d.readTuple(f)&&4==d.readTuple(f)&&d.readTuple(f),S.originalWidth=parseInt(f[0]),S.originalHeight=parseInt(f[1]),d.readTuple(f),S.offsetX=parseInt(f[0]),S.offsetY=parseInt(f[1]),S.index=parseInt(d.readValue()),S.texture=p.texture,this.regions.push(S)}else{(p=new o).name=b,2==d.readTuple(f)&&(p.width=parseInt(f[0]),p.height=parseInt(f[1]),d.readTuple(f)),d.readTuple(f),p.minFilter=t.Texture.filterFromString(f[0]),p.magFilter=t.Texture.filterFromString(f[1]);var B=d.readValue();p.uWrap=t.TextureWrap.ClampToEdge,p.vWrap=t.TextureWrap.ClampToEdge,"x"==B?p.uWrap=t.TextureWrap.Repeat:"y"==B?p.vWrap=t.TextureWrap.Repeat:"xy"==B&&(p.uWrap=p.vWrap=t.TextureWrap.Repeat),p.texture=u(b),p.texture.setFilters(p.minFilter,p.magFilter),p.texture.setWraps(p.uWrap,p.vWrap),p.width=p.texture.getImage().width,p.height=p.texture.getImage().height,this.pages.push(p)}}},TextureAtlas2.prototype.findRegion=function(t){for(var i=0;i<this.regions.length;i++)if(this.regions[i].name==t)return this.regions[i];return null},TextureAtlas2.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].texture.dispose()},TextureAtlas2}();t.TextureAtlas=i;var n=function(){function TextureAtlasReader2(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}return TextureAtlasReader2.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},TextureAtlasReader2.prototype.readValue=function(){var t=this.readLine(),i=t.indexOf(":");if(-1==i)throw new Error("Invalid line: "+t);return t.substring(i+1).trim()},TextureAtlasReader2.prototype.readTuple=function(t){var i=this.readLine(),n=i.indexOf(":");if(-1==n)throw new Error("Invalid line: "+i);for(var o=0,a=n+1;o<3;o++){var u=i.indexOf(",",a);if(-1==u)break;t[o]=i.substr(a,u-a).trim(),a=u+1}return t[o]=i.substring(a).trim(),o+1},TextureAtlasReader2}(),o=function TextureAtlasPage2(){};t.TextureAtlasPage=o;var a=function(t){function TextureAtlasRegion2(){return null!==t&&t.apply(this,arguments)||this}return d(TextureAtlasRegion2,t),TextureAtlasRegion2}(t.TextureRegion);t.TextureAtlasRegion=a}(u||(u={})),function(t){var i=function(){function TransformConstraint2(i,n){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new t.Vector2,this.active=!1,null==i)throw new Error("data cannot be null.");if(null==n)throw new Error("skeleton cannot be null.");this.data=i,this.rotateMix=i.rotateMix,this.translateMix=i.translateMix,this.scaleMix=i.scaleMix,this.shearMix=i.shearMix,this.bones=new Array;for(var o=0;o<i.bones.length;o++)this.bones.push(n.findBone(i.bones[o].name));this.target=n.findBone(i.target.name)}return TransformConstraint2.prototype.isActive=function(){return this.active},TransformConstraint2.prototype.apply=function(){this.update()},TransformConstraint2.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},TransformConstraint2.prototype.applyAbsoluteWorld=function(){for(var i=this.rotateMix,n=this.translateMix,o=this.scaleMix,a=this.shearMix,u=this.target,d=u.a,f=u.b,p=u.c,b=u.d,S=d*b-f*p>0?t.MathUtils.degRad:-t.MathUtils.degRad,M=this.data.offsetRotation*S,C=this.data.offsetShearY*S,P=this.bones,R=0,O=P.length;R<O;R++){var B=P[R],N=!1;if(0!=i){var Y=B.a,X=B.b,G=B.c,U=B.d;(q=Math.atan2(p,d)-Math.atan2(G,Y)+M)>t.MathUtils.PI?q-=t.MathUtils.PI2:q<-t.MathUtils.PI&&(q+=t.MathUtils.PI2),q*=i;var V=Math.cos(q),z=Math.sin(q);B.a=V*Y-z*G,B.b=V*X-z*U,B.c=z*Y+V*G,B.d=z*X+V*U,N=!0}if(0!=n){var W=this.temp;u.localToWorld(W.set(this.data.offsetX,this.data.offsetY)),B.worldX+=(W.x-B.worldX)*n,B.worldY+=(W.y-B.worldY)*n,N=!0}if(o>0){var H=Math.sqrt(B.a*B.a+B.c*B.c),j=Math.sqrt(d*d+p*p);H>1e-5&&(H=(H+(j-H+this.data.offsetScaleX)*o)/H),B.a*=H,B.c*=H,H=Math.sqrt(B.b*B.b+B.d*B.d),j=Math.sqrt(f*f+b*b),H>1e-5&&(H=(H+(j-H+this.data.offsetScaleY)*o)/H),B.b*=H,B.d*=H,N=!0}if(a>0){X=B.b,U=B.d;var q,Z=Math.atan2(U,X);(q=Math.atan2(b,f)-Math.atan2(p,d)-(Z-Math.atan2(B.c,B.a)))>t.MathUtils.PI?q-=t.MathUtils.PI2:q<-t.MathUtils.PI&&(q+=t.MathUtils.PI2),q=Z+(q+C)*a;H=Math.sqrt(X*X+U*U);B.b=Math.cos(q)*H,B.d=Math.sin(q)*H,N=!0}N&&(B.appliedValid=!1)}},TransformConstraint2.prototype.applyRelativeWorld=function(){for(var i=this.rotateMix,n=this.translateMix,o=this.scaleMix,a=this.shearMix,u=this.target,d=u.a,f=u.b,p=u.c,b=u.d,S=d*b-f*p>0?t.MathUtils.degRad:-t.MathUtils.degRad,M=this.data.offsetRotation*S,C=this.data.offsetShearY*S,P=this.bones,R=0,O=P.length;R<O;R++){var B=P[R],N=!1;if(0!=i){var Y=B.a,X=B.b,G=B.c,U=B.d;(j=Math.atan2(p,d)+M)>t.MathUtils.PI?j-=t.MathUtils.PI2:j<-t.MathUtils.PI&&(j+=t.MathUtils.PI2),j*=i;var V=Math.cos(j),z=Math.sin(j);B.a=V*Y-z*G,B.b=V*X-z*U,B.c=z*Y+V*G,B.d=z*X+V*U,N=!0}if(0!=n){var W=this.temp;u.localToWorld(W.set(this.data.offsetX,this.data.offsetY)),B.worldX+=W.x*n,B.worldY+=W.y*n,N=!0}if(o>0){var H=(Math.sqrt(d*d+p*p)-1+this.data.offsetScaleX)*o+1;B.a*=H,B.c*=H,H=(Math.sqrt(f*f+b*b)-1+this.data.offsetScaleY)*o+1,B.b*=H,B.d*=H,N=!0}if(a>0){var j;(j=Math.atan2(b,f)-Math.atan2(p,d))>t.MathUtils.PI?j-=t.MathUtils.PI2:j<-t.MathUtils.PI&&(j+=t.MathUtils.PI2);X=B.b,U=B.d;j=Math.atan2(U,X)+(j-t.MathUtils.PI/2+C)*a;H=Math.sqrt(X*X+U*U);B.b=Math.cos(j)*H,B.d=Math.sin(j)*H,N=!0}N&&(B.appliedValid=!1)}},TransformConstraint2.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,i=this.translateMix,n=this.scaleMix,o=this.shearMix,a=this.target;a.appliedValid||a.updateAppliedTransform();for(var u=this.bones,d=0,f=u.length;d<f;d++){var p=u[d];p.appliedValid||p.updateAppliedTransform();var b=p.arotation;if(0!=t){var S=a.arotation-b+this.data.offsetRotation;b+=(S-=360*(16384-(16384.499999999996-S/360|0)))*t}var M=p.ax,C=p.ay;0!=i&&(M+=(a.ax-M+this.data.offsetX)*i,C+=(a.ay-C+this.data.offsetY)*i);var P=p.ascaleX,R=p.ascaleY;0!=n&&(P>1e-5&&(P=(P+(a.ascaleX-P+this.data.offsetScaleX)*n)/P),R>1e-5&&(R=(R+(a.ascaleY-R+this.data.offsetScaleY)*n)/R));var O=p.ashearY;if(0!=o){S=a.ashearY-O+this.data.offsetShearY;S-=360*(16384-(16384.499999999996-S/360|0)),p.shearY+=S*o}p.updateWorldTransformWith(M,C,b,P,R,p.ashearX,O)}},TransformConstraint2.prototype.applyRelativeLocal=function(){var t=this.rotateMix,i=this.translateMix,n=this.scaleMix,o=this.shearMix,a=this.target;a.appliedValid||a.updateAppliedTransform();for(var u=this.bones,d=0,f=u.length;d<f;d++){var p=u[d];p.appliedValid||p.updateAppliedTransform();var b=p.arotation;0!=t&&(b+=(a.arotation+this.data.offsetRotation)*t);var S=p.ax,M=p.ay;0!=i&&(S+=(a.ax+this.data.offsetX)*i,M+=(a.ay+this.data.offsetY)*i);var C=p.ascaleX,P=p.ascaleY;0!=n&&(C>1e-5&&(C*=(a.ascaleX-1+this.data.offsetScaleX)*n+1),P>1e-5&&(P*=(a.ascaleY-1+this.data.offsetScaleY)*n+1));var R=p.ashearY;0!=o&&(R+=(a.ashearY+this.data.offsetShearY)*o),p.updateWorldTransformWith(S,M,b,C,P,p.ashearX,R)}},TransformConstraint2}();t.TransformConstraint=i}(u||(u={})),function(t){var i=function(t){function TransformConstraintData2(i){var n=t.call(this,i,0,!1)||this;return n.bones=new Array,n.rotateMix=0,n.translateMix=0,n.scaleMix=0,n.shearMix=0,n.offsetRotation=0,n.offsetX=0,n.offsetY=0,n.offsetScaleX=0,n.offsetScaleY=0,n.offsetShearY=0,n.relative=!1,n.local=!1,n}return d(TransformConstraintData2,t),TransformConstraintData2}(t.ConstraintData);t.TransformConstraintData=i}(u||(u={})),function(t){var i=function(){function Triangulator2(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new t.Pool((function(){return new Array})),this.polygonIndicesPool=new t.Pool((function(){return new Array}))}return Triangulator2.prototype.triangulate=function(t){var i=t,n=t.length>>1,o=this.indicesArray;o.length=0;for(var a=0;a<n;a++)o[a]=a;var u=this.isConcaveArray;u.length=0;a=0;for(var d=n;a<d;++a)u[a]=Triangulator2.isConcave(a,n,i,o);var f=this.triangles;for(f.length=0;n>3;){for(var p=n-1,b=(a=0,1);;){t:if(!u[a]){for(var S=o[p]<<1,M=o[a]<<1,C=o[b]<<1,P=i[S],R=i[S+1],O=i[M],B=i[M+1],N=i[C],Y=i[C+1],X=(b+1)%n;X!=p;X=(X+1)%n)if(u[X]){var G=o[X]<<1,U=i[G],V=i[G+1];if(Triangulator2.positiveArea(N,Y,P,R,U,V)&&Triangulator2.positiveArea(P,R,O,B,U,V)&&Triangulator2.positiveArea(O,B,N,Y,U,V))break t}break}if(0==b){do{if(!u[a])break;a--}while(a>0);break}p=a,a=b,b=(b+1)%n}f.push(o[(n+a-1)%n]),f.push(o[a]),f.push(o[(a+1)%n]),o.splice(a,1),u.splice(a,1);var z=(--n+a-1)%n,W=a==n?0:a;u[z]=Triangulator2.isConcave(z,n,i,o),u[W]=Triangulator2.isConcave(W,n,i,o)}return 3==n&&(f.push(o[2]),f.push(o[0]),f.push(o[1])),f},Triangulator2.prototype.decompose=function(t,i){var n=t,o=this.convexPolygons;this.polygonPool.freeAll(o),o.length=0;var a=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(a),a.length=0;var u=this.polygonIndicesPool.obtain();u.length=0;var d=this.polygonPool.obtain();d.length=0;for(var f=-1,p=0,b=0,S=i.length;b<S;b+=3){var M=i[b]<<1,C=i[b+1]<<1,P=i[b+2]<<1,R=n[M],O=n[M+1],B=n[C],N=n[C+1],Y=n[P],X=n[P+1],G=!1;if(f==M){var U=d.length-4,V=Triangulator2.winding(d[U],d[U+1],d[U+2],d[U+3],Y,X),z=Triangulator2.winding(Y,X,d[0],d[1],d[2],d[3]);V==p&&z==p&&(d.push(Y),d.push(X),u.push(P),G=!0)}G||(d.length>0?(o.push(d),a.push(u)):(this.polygonPool.free(d),this.polygonIndicesPool.free(u)),(d=this.polygonPool.obtain()).length=0,d.push(R),d.push(O),d.push(B),d.push(N),d.push(Y),d.push(X),(u=this.polygonIndicesPool.obtain()).length=0,u.push(M),u.push(C),u.push(P),p=Triangulator2.winding(R,O,B,N,Y,X),f=M)}d.length>0&&(o.push(d),a.push(u));for(b=0,S=o.length;b<S;b++)if(0!=(u=a[b]).length)for(var W=u[0],H=u[u.length-1],j=(d=o[b])[U=d.length-4],q=d[U+1],Z=d[U+2],K=d[U+3],$=d[0],tt=d[1],et=d[2],it=d[3],nt=Triangulator2.winding(j,q,Z,K,$,tt),st=0;st<S;st++)if(st!=b){var rt=a[st];if(3==rt.length){var ot=rt[0],at=rt[1],ht=rt[2],lt=o[st];Y=lt[lt.length-2],X=lt[lt.length-1];if(ot==W&&at==H){V=Triangulator2.winding(j,q,Z,K,Y,X),z=Triangulator2.winding(Y,X,$,tt,et,it);V==nt&&z==nt&&(lt.length=0,rt.length=0,d.push(Y),d.push(X),u.push(ht),j=Z,q=K,Z=Y,K=X,st=0)}}}for(b=o.length-1;b>=0;b--)0==(d=o[b]).length&&(o.splice(b,1),this.polygonPool.free(d),u=a[b],a.splice(b,1),this.polygonIndicesPool.free(u));return o},Triangulator2.isConcave=function(t,i,n,o){var a=o[(i+t-1)%i]<<1,u=o[t]<<1,d=o[(t+1)%i]<<1;return!this.positiveArea(n[a],n[a+1],n[u],n[u+1],n[d],n[d+1])},Triangulator2.positiveArea=function(t,i,n,o,a,u){return t*(u-o)+n*(i-u)+a*(o-i)>=0},Triangulator2.winding=function(t,i,n,o,a,u){var d=n-t,f=o-i;return a*f-u*d+d*i-t*f>=0?1:-1},Triangulator2}();t.Triangulator=i}(u||(u={})),function(t){var i=function(){function IntSet2(){this.array=new Array}return IntSet2.prototype.add=function(t){var i=this.contains(t);return this.array[0|t]=0|t,!i},IntSet2.prototype.contains=function(t){return null!=this.array[0|t]},IntSet2.prototype.remove=function(t){this.array[0|t]=void 0},IntSet2.prototype.clear=function(){this.array.length=0},IntSet2}();t.IntSet=i;var n=function(){function Color2(t,i,n,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),this.r=t,this.g=i,this.b=n,this.a=o}return Color2.prototype.set=function(t,i,n,o){return this.r=t,this.g=i,this.b=n,this.a=o,this.clamp(),this},Color2.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},Color2.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255,this},Color2.prototype.add=function(t,i,n,o){return this.r+=t,this.g+=i,this.b+=n,this.a+=o,this.clamp(),this},Color2.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},Color2.rgba8888ToColor=function(t,i){t.r=((4278190080&i)>>>24)/255,t.g=((16711680&i)>>>16)/255,t.b=((65280&i)>>>8)/255,t.a=(255&i)/255},Color2.rgb888ToColor=function(t,i){t.r=((16711680&i)>>>16)/255,t.g=((65280&i)>>>8)/255,t.b=(255&i)/255},Color2.WHITE=new Color2(1,1,1,1),Color2.RED=new Color2(1,0,0,1),Color2.GREEN=new Color2(0,1,0,1),Color2.BLUE=new Color2(0,0,1,1),Color2.MAGENTA=new Color2(1,0,1,1),Color2}();t.Color=n;var o=function(){function MathUtils2(){}return MathUtils2.clamp=function(t,i,n){return t<i?i:t>n?n:t},MathUtils2.cosDeg=function(t){return Math.cos(t*MathUtils2.degRad)},MathUtils2.sinDeg=function(t){return Math.sin(t*MathUtils2.degRad)},MathUtils2.signum=function(t){return t>0?1:t<0?-1:0},MathUtils2.toInt=function(t){return t>0?Math.floor(t):Math.ceil(t)},MathUtils2.cbrt=function(t){var i=Math.pow(Math.abs(t),1/3);return t<0?-i:i},MathUtils2.randomTriangular=function(t,i){return MathUtils2.randomTriangularWith(t,i,.5*(t+i))},MathUtils2.randomTriangularWith=function(t,i,n){var o=Math.random(),a=i-t;return o<=(n-t)/a?t+Math.sqrt(o*a*(n-t)):i-Math.sqrt((1-o)*a*(i-n))},MathUtils2.PI=3.1415927,MathUtils2.PI2=2*MathUtils2.PI,MathUtils2.radiansToDegrees=180/MathUtils2.PI,MathUtils2.radDeg=MathUtils2.radiansToDegrees,MathUtils2.degreesToRadians=MathUtils2.PI/180,MathUtils2.degRad=MathUtils2.degreesToRadians,MathUtils2}();t.MathUtils=o;var a=function(){function Interpolation2(){}return Interpolation2.prototype.apply=function(t,i,n){return t+(i-t)*this.applyInternal(n)},Interpolation2}();t.Interpolation=a;var u=function(t){function Pow2(i){var n=t.call(this)||this;return n.power=2,n.power=i,n}return d(Pow2,t),Pow2.prototype.applyInternal=function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1},Pow2}(a);t.Pow=u;var f=function(t){function PowOut2(i){return t.call(this,i)||this}return d(PowOut2,t),PowOut2.prototype.applyInternal=function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1},PowOut2}(u);t.PowOut=f;var p=function(){function Utils2(){}return Utils2.arrayCopy=function(t,i,n,o,a){for(var u=i,d=o;u<i+a;u++,d++)n[d]=t[u]},Utils2.setArraySize=function(t,i,n){void 0===n&&(n=0);var o=t.length;if(o==i)return t;if(t.length=i,o<i)for(var a=o;a<i;a++)t[a]=n;return t},Utils2.ensureArrayCapacity=function(t,i,n){return void 0===n&&(n=0),t.length>=i?t:Utils2.setArraySize(t,i,n)},Utils2.newArray=function(t,i){for(var n=new Array(t),o=0;o<t;o++)n[o]=i;return n},Utils2.newFloatArray=function(t){if(Utils2.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);for(var i=new Array(t),n=0;n<i.length;n++)i[n]=0;return i},Utils2.newShortArray=function(t){if(Utils2.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);for(var i=new Array(t),n=0;n<i.length;n++)i[n]=0;return i},Utils2.toFloatArray=function(t){return Utils2.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t},Utils2.toSinglePrecision=function(t){return Utils2.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t},Utils2.webkit602BugfixHelper=function(t,i){},Utils2.contains=function(t,i,n){for(var o=0;o<t.length;o++)if(t[o]==i)return!0;return!1},Utils2.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,Utils2}();t.Utils=p;var b=function(){function DebugUtils2(){}return DebugUtils2.logBones=function(t){for(var i=0;i<t.bones.length;i++){var n=t.bones[i];console.log(n.data.name+", "+n.a+", "+n.b+", "+n.c+", "+n.d+", "+n.worldX+", "+n.worldY)}},DebugUtils2}();t.DebugUtils=b;var S=function(){function Pool2(t){this.items=new Array,this.instantiator=t}return Pool2.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},Pool2.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},Pool2.prototype.freeAll=function(t){for(var i=0;i<t.length;i++)this.free(t[i])},Pool2.prototype.clear=function(){this.items.length=0},Pool2}();t.Pool=S;var M=function(){function Vector24(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.x=t,this.y=i}return Vector24.prototype.set=function(t,i){return this.x=t,this.y=i,this},Vector24.prototype.length=function(){var t=this.x,i=this.y;return Math.sqrt(t*t+i*i)},Vector24.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},Vector24}();t.Vector2=M;var C=function(){function TimeKeeper2(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return TimeKeeper2.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},TimeKeeper2}();t.TimeKeeper=C;var P=function(){function WindowedMean2(t){void 0===t&&(t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}return WindowedMean2.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},WindowedMean2.prototype.addValue=function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},WindowedMean2.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,i=0;i<this.values.length;i++)t+=this.values[i];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0},WindowedMean2}();t.WindowedMean=P}(u||(u={})),Math.fround||(Math.fround=(a=new Float32Array(1),function(t){return a[0]=t,a[0]})),function(t){var i=function Attachment2(t){if(null==t)throw new Error("name cannot be null.");this.name=t};t.Attachment=i;var n=function(i){function VertexAttachment2(t){var n=i.call(this,t)||this;return n.id=(65535&VertexAttachment2.nextID++)<<11,n.worldVerticesLength=0,n.deformAttachment=n,n}return d(VertexAttachment2,i),VertexAttachment2.prototype.computeWorldVertices=function(t,i,n,o,a,u){n=a+(n>>1)*u;var d=t.bone.skeleton,f=t.deform,p=this.vertices,b=this.bones;if(null!=b){for(var S=0,M=0,C=0;C<i;C+=2){S+=(B=b[S])+1,M+=B}var P=d.bones;if(0==f.length)for(Z=a,W=3*M;Z<n;Z+=u){var R=0,O=0,B=b[S++];for(B+=S;S<B;S++,W+=3){G=P[b[S]],K=p[W],$=p[W+1];var N=p[W+2];R+=(K*G.a+$*G.b+G.worldX)*N,O+=(K*G.c+$*G.d+G.worldY)*N}o[Z]=R,o[Z+1]=O}else for(var Y=f,X=(Z=a,W=3*M,M<<1);Z<n;Z+=u){R=0,O=0,B=b[S++];for(B+=S;S<B;S++,W+=3,X+=2){G=P[b[S]],K=p[W]+Y[X],$=p[W+1]+Y[X+1],N=p[W+2];R+=(K*G.a+$*G.b+G.worldX)*N,O+=(K*G.c+$*G.d+G.worldY)*N}o[Z]=R,o[Z+1]=O}}else{f.length>0&&(p=f);for(var G,U=(G=t.bone).worldX,V=G.worldY,z=G.a,W=G.b,H=G.c,j=G.d,q=i,Z=a;Z<n;q+=2,Z+=u){var K=p[q],$=p[q+1];o[Z]=K*z+$*W+U,o[Z+1]=K*H+$*j+V}}},VertexAttachment2.prototype.copyTo=function(i){null!=this.bones?(i.bones=new Array(this.bones.length),t.Utils.arrayCopy(this.bones,0,i.bones,0,this.bones.length)):i.bones=null,null!=this.vertices?(i.vertices=t.Utils.newFloatArray(this.vertices.length),t.Utils.arrayCopy(this.vertices,0,i.vertices,0,this.vertices.length)):i.vertices=null,i.worldVerticesLength=this.worldVerticesLength,i.deformAttachment=this.deformAttachment},VertexAttachment2.nextID=0,VertexAttachment2}(i);t.VertexAttachment=n}(u||(u={})),function(t){var i;(i=t.AttachmentType||(t.AttachmentType={}))[i.Region=0]="Region",i[i.BoundingBox=1]="BoundingBox",i[i.Mesh=2]="Mesh",i[i.LinkedMesh=3]="LinkedMesh",i[i.Path=4]="Path",i[i.Point=5]="Point",i[i.Clipping=6]="Clipping"}(u||(u={})),function(t){var i=function(i){function BoundingBoxAttachment2(n){var o=i.call(this,n)||this;return o.color=new t.Color(1,1,1,1),o}return d(BoundingBoxAttachment2,i),BoundingBoxAttachment2.prototype.copy=function(){var t=new BoundingBoxAttachment2(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t},BoundingBoxAttachment2}(t.VertexAttachment);t.BoundingBoxAttachment=i}(u||(u={})),function(t){var i=function(i){function ClippingAttachment2(n){var o=i.call(this,n)||this;return o.color=new t.Color(.2275,.2275,.8078,1),o}return d(ClippingAttachment2,i),ClippingAttachment2.prototype.copy=function(){var t=new ClippingAttachment2(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t},ClippingAttachment2}(t.VertexAttachment);t.ClippingAttachment=i}(u||(u={})),function(t){var i=function(i){function MeshAttachment2(n){var o=i.call(this,n)||this;return o.color=new t.Color(1,1,1,1),o.tempColor=new t.Color(0,0,0,0),o}return d(MeshAttachment2,i),MeshAttachment2.prototype.updateUVs=function(){var i=this.regionUVs;null!=this.uvs&&this.uvs.length==i.length||(this.uvs=t.Utils.newFloatArray(i.length));var n=this.uvs,o=this.uvs.length,a=this.region.u,u=this.region.v,d=0,f=0;if(this.region instanceof t.TextureAtlasRegion){var p=this.region,b=p.texture.getImage().width,S=p.texture.getImage().height;switch(p.degrees){case 90:a-=(p.originalHeight-p.offsetY-p.height)/b,u-=(p.originalWidth-p.offsetX-p.width)/S,d=p.originalHeight/b,f=p.originalWidth/S;for(var M=0;M<o;M+=2)n[M]=a+i[M+1]*d,n[M+1]=u+(1-i[M])*f;return;case 180:a-=(p.originalWidth-p.offsetX-p.width)/b,u-=p.offsetY/S,d=p.originalWidth/b,f=p.originalHeight/S;for(M=0;M<o;M+=2)n[M]=a+(1-i[M])*d,n[M+1]=u+(1-i[M+1])*f;return;case 270:a-=p.offsetY/b,u-=p.offsetX/S,d=p.originalHeight/b,f=p.originalWidth/S;for(M=0;M<o;M+=2)n[M]=a+(1-i[M+1])*d,n[M+1]=u+i[M]*f;return}a-=p.offsetX/b,u-=(p.originalHeight-p.offsetY-p.height)/S,d=p.originalWidth/b,f=p.originalHeight/S}else null==this.region?(a=u=0,d=f=1):(d=this.region.u2-a,f=this.region.v2-u);for(M=0;M<o;M+=2)n[M]=a+i[M]*d,n[M+1]=u+i[M+1]*f},MeshAttachment2.prototype.getParentMesh=function(){return this.parentMesh},MeshAttachment2.prototype.setParentMesh=function(t){this.parentMesh=t,null!=t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},MeshAttachment2.prototype.copy=function(){if(null!=this.parentMesh)return this.newLinkedMesh();var i=new MeshAttachment2(this.name);return i.region=this.region,i.path=this.path,i.color.setFromColor(this.color),this.copyTo(i),i.regionUVs=new Array(this.regionUVs.length),t.Utils.arrayCopy(this.regionUVs,0,i.regionUVs,0,this.regionUVs.length),i.uvs=new Array(this.uvs.length),t.Utils.arrayCopy(this.uvs,0,i.uvs,0,this.uvs.length),i.triangles=new Array(this.triangles.length),t.Utils.arrayCopy(this.triangles,0,i.triangles,0,this.triangles.length),i.hullLength=this.hullLength,null!=this.edges&&(i.edges=new Array(this.edges.length),t.Utils.arrayCopy(this.edges,0,i.edges,0,this.edges.length)),i.width=this.width,i.height=this.height,i},MeshAttachment2.prototype.newLinkedMesh=function(){var t=new MeshAttachment2(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(null!=this.parentMesh?this.parentMesh:this),t.updateUVs(),t},MeshAttachment2}(t.VertexAttachment);t.MeshAttachment=i}(u||(u={})),function(t){var i=function(i){function PathAttachment2(n){var o=i.call(this,n)||this;return o.closed=!1,o.constantSpeed=!1,o.color=new t.Color(1,1,1,1),o}return d(PathAttachment2,i),PathAttachment2.prototype.copy=function(){var i=new PathAttachment2(this.name);return this.copyTo(i),i.lengths=new Array(this.lengths.length),t.Utils.arrayCopy(this.lengths,0,i.lengths,0,this.lengths.length),i.closed=closed,i.constantSpeed=this.constantSpeed,i.color.setFromColor(this.color),i},PathAttachment2}(t.VertexAttachment);t.PathAttachment=i}(u||(u={})),function(t){var i=function(i){function PointAttachment2(n){var o=i.call(this,n)||this;return o.color=new t.Color(.38,.94,0,1),o}return d(PointAttachment2,i),PointAttachment2.prototype.computeWorldPosition=function(t,i){return i.x=this.x*t.a+this.y*t.b+t.worldX,i.y=this.x*t.c+this.y*t.d+t.worldY,i},PointAttachment2.prototype.computeWorldRotation=function(i){var n=t.MathUtils.cosDeg(this.rotation),o=t.MathUtils.sinDeg(this.rotation),a=n*i.a+o*i.b,u=n*i.c+o*i.d;return Math.atan2(u,a)*t.MathUtils.radDeg},PointAttachment2.prototype.copy=function(){var t=new PointAttachment2(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t},PointAttachment2}(t.VertexAttachment);t.PointAttachment=i}(u||(u={})),function(t){var i=function(i){function RegionAttachment2(n){var o=i.call(this,n)||this;return o.x=0,o.y=0,o.scaleX=1,o.scaleY=1,o.rotation=0,o.width=0,o.height=0,o.color=new t.Color(1,1,1,1),o.offset=t.Utils.newFloatArray(8),o.uvs=t.Utils.newFloatArray(8),o.tempColor=new t.Color(1,1,1,1),o}return d(RegionAttachment2,i),RegionAttachment2.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,i=this.height/this.region.originalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.region.offsetX*t,o=-this.height/2*this.scaleY+this.region.offsetY*i,a=n+this.region.width*t,u=o+this.region.height*i,d=this.rotation*Math.PI/180,f=Math.cos(d),p=Math.sin(d),b=n*f+this.x,S=n*p,M=o*f+this.y,C=o*p,P=a*f+this.x,R=a*p,O=u*f+this.y,B=u*p,N=this.offset;N[RegionAttachment2.OX1]=b-C,N[RegionAttachment2.OY1]=M+S,N[RegionAttachment2.OX2]=b-B,N[RegionAttachment2.OY2]=O+S,N[RegionAttachment2.OX3]=P-B,N[RegionAttachment2.OY3]=O+R,N[RegionAttachment2.OX4]=P-C,N[RegionAttachment2.OY4]=M+R},RegionAttachment2.prototype.setRegion=function(t){this.region=t;var i=this.uvs;t.rotate?(i[2]=t.u,i[3]=t.v2,i[4]=t.u,i[5]=t.v,i[6]=t.u2,i[7]=t.v,i[0]=t.u2,i[1]=t.v2):(i[0]=t.u,i[1]=t.v2,i[2]=t.u,i[3]=t.v,i[4]=t.u2,i[5]=t.v,i[6]=t.u2,i[7]=t.v2)},RegionAttachment2.prototype.computeWorldVertices=function(t,i,n,o){var a=this.offset,u=t.worldX,d=t.worldY,f=t.a,p=t.b,b=t.c,S=t.d,M=0,C=0;M=a[RegionAttachment2.OX1],C=a[RegionAttachment2.OY1],i[n]=M*f+C*p+u,i[n+1]=M*b+C*S+d,n+=o,M=a[RegionAttachment2.OX2],C=a[RegionAttachment2.OY2],i[n]=M*f+C*p+u,i[n+1]=M*b+C*S+d,n+=o,M=a[RegionAttachment2.OX3],C=a[RegionAttachment2.OY3],i[n]=M*f+C*p+u,i[n+1]=M*b+C*S+d,n+=o,M=a[RegionAttachment2.OX4],C=a[RegionAttachment2.OY4],i[n]=M*f+C*p+u,i[n+1]=M*b+C*S+d},RegionAttachment2.prototype.copy=function(){var i=new RegionAttachment2(this.name);return i.region=this.region,i.rendererObject=this.rendererObject,i.path=this.path,i.x=this.x,i.y=this.y,i.scaleX=this.scaleX,i.scaleY=this.scaleY,i.rotation=this.rotation,i.width=this.width,i.height=this.height,t.Utils.arrayCopy(this.uvs,0,i.uvs,0,8),t.Utils.arrayCopy(this.offset,0,i.offset,0,8),i.color.setFromColor(this.color),i},RegionAttachment2.OX1=0,RegionAttachment2.OY1=1,RegionAttachment2.OX2=2,RegionAttachment2.OY2=3,RegionAttachment2.OX3=4,RegionAttachment2.OY3=5,RegionAttachment2.OX4=6,RegionAttachment2.OY4=7,RegionAttachment2.X1=0,RegionAttachment2.Y1=1,RegionAttachment2.C1R=2,RegionAttachment2.C1G=3,RegionAttachment2.C1B=4,RegionAttachment2.C1A=5,RegionAttachment2.U1=6,RegionAttachment2.V1=7,RegionAttachment2.X2=8,RegionAttachment2.Y2=9,RegionAttachment2.C2R=10,RegionAttachment2.C2G=11,RegionAttachment2.C2B=12,RegionAttachment2.C2A=13,RegionAttachment2.U2=14,RegionAttachment2.V2=15,RegionAttachment2.X3=16,RegionAttachment2.Y3=17,RegionAttachment2.C3R=18,RegionAttachment2.C3G=19,RegionAttachment2.C3B=20,RegionAttachment2.C3A=21,RegionAttachment2.U3=22,RegionAttachment2.V3=23,RegionAttachment2.X4=24,RegionAttachment2.Y4=25,RegionAttachment2.C4R=26,RegionAttachment2.C4G=27,RegionAttachment2.C4B=28,RegionAttachment2.C4A=29,RegionAttachment2.U4=30,RegionAttachment2.V4=31,RegionAttachment2}(t.Attachment);t.RegionAttachment=i}(u||(u={})),function(t){var i=function(){function JitterEffect2(t,i){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=i}return JitterEffect2.prototype.begin=function(t){},JitterEffect2.prototype.transform=function(i,n,o,a){i.x+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY),i.y+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},JitterEffect2.prototype.end=function(){},JitterEffect2}();t.JitterEffect=i}(u||(u={})),function(t){var i=function(){function SwirlEffect2(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return SwirlEffect2.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},SwirlEffect2.prototype.transform=function(i,n,o,a){var u=this.angle*t.MathUtils.degreesToRadians,d=i.x-this.worldX,f=i.y-this.worldY,p=Math.sqrt(d*d+f*f);if(p<this.radius){var b=SwirlEffect2.interpolation.apply(0,u,(this.radius-p)/this.radius),S=Math.cos(b),M=Math.sin(b);i.x=S*d-M*f+this.worldX,i.y=M*d+S*f+this.worldY}},SwirlEffect2.prototype.end=function(){},SwirlEffect2.interpolation=new t.PowOut(2),SwirlEffect2}();t.SwirlEffect=i}(u||(u={})),function(t){var i,n;i=t.canvas||(t.canvas={}),n=function(i){function AssetManager2(n){return void 0===n&&(n=""),i.call(this,(function(i){return new t.canvas.CanvasTexture(i)}),n)||this}return d(AssetManager2,i),AssetManager2}(t.AssetManager),i.AssetManager=n}(u||(u={})),function(t){var i,n;i=t.canvas||(t.canvas={}),n=function(t){function CanvasTexture2(i){return t.call(this,i)||this}return d(CanvasTexture2,t),CanvasTexture2.prototype.setFilters=function(t,i){},CanvasTexture2.prototype.setWraps=function(t,i){},CanvasTexture2.prototype.dispose=function(){},CanvasTexture2}(t.Texture),i.CanvasTexture=n}(u||(u={})),function(t){var i,n;i=t.canvas||(t.canvas={}),n=function(){function SkeletonRenderer2(i){this.triangleRendering=!1,this.debugRendering=!1,this.vertices=t.Utils.newFloatArray(8192),this.tempColor=new t.Color,this.ctx=i}return SkeletonRenderer2.prototype.draw=function(t){this.triangleRendering?this.drawTriangles(t):this.drawImages(t)},SkeletonRenderer2.prototype.drawImages=function(i){var n=this.ctx,o=i.drawOrder;this.debugRendering&&(n.strokeStyle="green"),n.save();for(var a=0,u=o.length;a<u;a++){var d=o[a];if(d.bone.active){var f=d.getAttachment(),p=null,b=null,S=null;if(f instanceof t.RegionAttachment){S=(b=(p=f).region).texture.getImage();var M=d.bone.skeleton.color,C=d.color,P=p.color,R=M.a*C.a*P.a,O=this.tempColor;O.set(M.r*C.r*P.r,M.g*C.g*P.g,M.b*C.b*P.b,R);var B=f,N=d.bone,Y=b.width,X=b.height;n.save(),n.transform(N.a,N.c,N.b,N.d,N.worldX,N.worldY),n.translate(f.offset[0],f.offset[1]),n.rotate(f.rotation*Math.PI/180);var G=B.width/Y;if(n.scale(G*f.scaleX,G*f.scaleY),n.translate(Y/2,X/2),f.region.rotate){var U=Y;Y=X,X=U,n.rotate(-Math.PI/2)}n.scale(1,-1),n.translate(-Y/2,-X/2),1==O.r&&1==O.g&&1==O.b&&1==O.a||(n.globalAlpha=O.a),n.drawImage(S,b.x,b.y,Y,X,0,0,Y,X),this.debugRendering&&n.strokeRect(0,0,Y,X),n.restore()}}}n.restore()},SkeletonRenderer2.prototype.drawTriangles=function(i){for(var n=this.vertices,o=null,a=i.drawOrder,u=0,d=a.length;u<d;u++){var f=a[u],p=f.getAttachment(),b=null;if(p instanceof t.RegionAttachment){var S=p;n=this.computeRegionVertices(f,S,!1),o=SkeletonRenderer2.QUAD_TRIANGLES,b=S.region.texture.getImage()}else{if(!(p instanceof t.MeshAttachment))continue;var M=p;n=this.computeMeshVertices(f,M,!1),o=M.triangles,b=M.region.renderObject.texture.getImage()}if(null!=b){f.data.blendMode;var C=f.bone.skeleton.color,P=f.color,R=p.color,O=C.a*P.a*R.a,B=this.tempColor;B.set(C.r*P.r*R.r,C.g*P.g*R.g,C.b*P.b*R.b,O);var N=this.ctx;1==B.r&&1==B.g&&1==B.b&&1==B.a||(N.globalAlpha=B.a);for(var Y=0;Y<o.length;Y+=3){var X=8*o[Y],G=8*o[Y+1],U=8*o[Y+2],V=n[X],z=n[X+1],W=n[X+6],H=n[X+7],j=n[G],q=n[G+1],Z=n[G+6],K=n[G+7],$=n[U],tt=n[U+1],et=n[U+6],it=n[U+7];this.drawTriangle(b,V,z,W,H,j,q,Z,K,$,tt,et,it),this.debugRendering&&(N.strokeStyle="green",N.beginPath(),N.moveTo(V,z),N.lineTo(j,q),N.lineTo($,tt),N.lineTo(V,z),N.stroke())}}}this.ctx.globalAlpha=1},SkeletonRenderer2.prototype.drawTriangle=function(t,i,n,o,a,u,d,f,p,b,S,M,C){var P=this.ctx;o*=t.width,a*=t.height,f*=t.width,p*=t.height,M*=t.width,C*=t.height,P.beginPath(),P.moveTo(i,n),P.lineTo(u,d),P.lineTo(b,S),P.closePath();var R=1/((f-=o)*(C-=a)-(M-=o)*(p-=a)),O=(C*(u-=i)-p*(b-=i))*R,B=(C*(d-=n)-p*(S-=n))*R,N=(f*b-M*u)*R,Y=(f*S-M*d)*R,X=i-O*o-N*a,G=n-B*o-Y*a;P.save(),P.transform(O,B,N,Y,X,G),P.clip(),P.drawImage(t,0,0),P.restore()},SkeletonRenderer2.prototype.computeRegionVertices=function(i,n,o){var a=i.bone.skeleton.color,u=i.color,d=n.color,f=a.a*u.a*d.a,p=o?f:1,b=this.tempColor;b.set(a.r*u.r*d.r*p,a.g*u.g*d.g*p,a.b*u.b*d.b*p,f),n.computeWorldVertices(i.bone,this.vertices,0,SkeletonRenderer2.VERTEX_SIZE);var S=this.vertices,M=n.uvs;return S[t.RegionAttachment.C1R]=b.r,S[t.RegionAttachment.C1G]=b.g,S[t.RegionAttachment.C1B]=b.b,S[t.RegionAttachment.C1A]=b.a,S[t.RegionAttachment.U1]=M[0],S[t.RegionAttachment.V1]=M[1],S[t.RegionAttachment.C2R]=b.r,S[t.RegionAttachment.C2G]=b.g,S[t.RegionAttachment.C2B]=b.b,S[t.RegionAttachment.C2A]=b.a,S[t.RegionAttachment.U2]=M[2],S[t.RegionAttachment.V2]=M[3],S[t.RegionAttachment.C3R]=b.r,S[t.RegionAttachment.C3G]=b.g,S[t.RegionAttachment.C3B]=b.b,S[t.RegionAttachment.C3A]=b.a,S[t.RegionAttachment.U3]=M[4],S[t.RegionAttachment.V3]=M[5],S[t.RegionAttachment.C4R]=b.r,S[t.RegionAttachment.C4G]=b.g,S[t.RegionAttachment.C4B]=b.b,S[t.RegionAttachment.C4A]=b.a,S[t.RegionAttachment.U4]=M[6],S[t.RegionAttachment.V4]=M[7],S},SkeletonRenderer2.prototype.computeMeshVertices=function(i,n,o){var a=i.bone.skeleton.color,u=i.color,d=n.color,f=a.a*u.a*d.a,p=o?f:1,b=this.tempColor;b.set(a.r*u.r*d.r*p,a.g*u.g*d.g*p,a.b*u.b*d.b*p,f);var S=n.worldVerticesLength/2;this.vertices.length<n.worldVerticesLength&&(this.vertices=t.Utils.newFloatArray(n.worldVerticesLength));var M=this.vertices;n.computeWorldVertices(i,0,n.worldVerticesLength,M,0,SkeletonRenderer2.VERTEX_SIZE);for(var C=n.uvs,P=0,R=S,O=0,B=2;P<R;P++)M[B++]=b.r,M[B++]=b.g,M[B++]=b.b,M[B++]=b.a,M[B++]=C[O++],M[B++]=C[O++],B+=2;return M},SkeletonRenderer2.QUAD_TRIANGLES=[0,1,2,2,3,0],SkeletonRenderer2.VERTEX_SIZE=8,SkeletonRenderer2}(),i.SkeletonRenderer=n}(u||(u={})),function(t){var i,n;i=t.webgl||(t.webgl={}),n=function(i){function AssetManager2(n,o){return void 0===o&&(o=""),i.call(this,(function(i){return new t.webgl.GLTexture(n,i)}),o)||this}return d(AssetManager2,i),AssetManager2}(t.AssetManager),i.AssetManager=n}(u||(u={})),function(t){var i,n;i=t.webgl||(t.webgl={}),n=function(){function OrthoCamera2(t,n){this.position=new i.Vector3(0,0,0),this.direction=new i.Vector3(0,0,-1),this.up=new i.Vector3(0,1,0),this.near=0,this.far=100,this.zoom=1,this.viewportWidth=0,this.viewportHeight=0,this.projectionView=new i.Matrix4,this.inverseProjectionView=new i.Matrix4,this.projection=new i.Matrix4,this.view=new i.Matrix4,this.tmp=new i.Vector3,this.viewportWidth=t,this.viewportHeight=n,this.update()}return OrthoCamera2.prototype.update=function(){var t=this.projection,i=this.view,n=this.projectionView,o=this.inverseProjectionView,a=this.zoom,u=this.viewportWidth,d=this.viewportHeight;t.ortho(a*(-u/2),a*(u/2),a*(-d/2),a*(d/2),this.near,this.far),i.lookAt(this.position,this.direction,this.up),n.set(t.values),n.multiply(i),o.set(n.values).invert()},OrthoCamera2.prototype.screenToWorld=function(t,i,n){var o=t.x,a=n-t.y-1,u=this.tmp;return u.x=2*o/i-1,u.y=2*a/n-1,u.z=2*t.z-1,u.project(this.inverseProjectionView),t.set(u.x,u.y,u.z),t},OrthoCamera2.prototype.setViewport=function(t,i){this.viewportWidth=t,this.viewportHeight=i},OrthoCamera2}(),i.OrthoCamera=n}(u||(u={})),function(t){var i,n;i=t.webgl||(t.webgl={}),n=function(n){function GLTexture2(t,o,a){void 0===a&&(a=!1);var u=n.call(this,o)||this;return u.texture=null,u.boundUnit=0,u.useMipMaps=!1,u.context=t instanceof i.ManagedWebGLRenderingContext?t:new i.ManagedWebGLRenderingContext(t),u.useMipMaps=a,u.restore(),u.context.addRestorable(u),u}return d(GLTexture2,n),GLTexture2.prototype.setFilters=function(t,i){var n=this.context.gl;this.bind(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,GLTexture2.validateMagFilter(i))},GLTexture2.validateMagFilter=function(i){switch(i){case t.TextureFilter.MipMap:case t.TextureFilter.MipMapLinearLinear:case t.TextureFilter.MipMapLinearNearest:case t.TextureFilter.MipMapNearestLinear:case t.TextureFilter.MipMapNearestNearest:return t.TextureFilter.Linear;default:return i}},GLTexture2.prototype.setWraps=function(t,i){var n=this.context.gl;this.bind(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,i)},GLTexture2.prototype.update=function(t){var i=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),GLTexture2.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL&&i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,this._image),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,t?i.LINEAR_MIPMAP_LINEAR:i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),t&&i.generateMipmap(i.TEXTURE_2D)},GLTexture2.prototype.restore=function(){this.texture=null,this.update(this.useMipMaps)},GLTexture2.prototype.bind=function(t){void 0===t&&(t=0);var i=this.context.gl;this.boundUnit=t,i.activeTexture(i.TEXTURE0+t),i.bindTexture(i.TEXTURE_2D,this.texture)},GLTexture2.prototype.unbind=function(){var t=this.context.gl;t.activeTexture(t.TEXTURE0+this.boundUnit),t.bindTexture(t.TEXTURE_2D,null)},GLTexture2.prototype.dispose=function(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture)},GLTexture2.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL=!1,GLTexture2}(t.Texture),i.GLTexture=n}(u||(u={})),function(t){!function(t){t.M00=0,t.M01=4,t.M02=8,t.M03=12,t.M10=1,t.M11=5,t.M12=9,t.M13=13,t.M20=2,t.M21=6,t.M22=10,t.M23=14,t.M30=3,t.M31=7,t.M32=11,t.M33=15;var i=function(){function Matrix42(){this.temp=new Float32Array(16),this.values=new Float32Array(16);var i=this.values;i[t.M00]=1,i[t.M11]=1,i[t.M22]=1,i[t.M33]=1}return Matrix42.prototype.set=function(t){return this.values.set(t),this},Matrix42.prototype.transpose=function(){var i=this.temp,n=this.values;return i[t.M00]=n[t.M00],i[t.M01]=n[t.M10],i[t.M02]=n[t.M20],i[t.M03]=n[t.M30],i[t.M10]=n[t.M01],i[t.M11]=n[t.M11],i[t.M12]=n[t.M21],i[t.M13]=n[t.M31],i[t.M20]=n[t.M02],i[t.M21]=n[t.M12],i[t.M22]=n[t.M22],i[t.M23]=n[t.M32],i[t.M30]=n[t.M03],i[t.M31]=n[t.M13],i[t.M32]=n[t.M23],i[t.M33]=n[t.M33],this.set(i)},Matrix42.prototype.identity=function(){var i=this.values;return i[t.M00]=1,i[t.M01]=0,i[t.M02]=0,i[t.M03]=0,i[t.M10]=0,i[t.M11]=1,i[t.M12]=0,i[t.M13]=0,i[t.M20]=0,i[t.M21]=0,i[t.M22]=1,i[t.M23]=0,i[t.M30]=0,i[t.M31]=0,i[t.M32]=0,i[t.M33]=1,this},Matrix42.prototype.invert=function(){var i=this.values,n=this.temp,o=i[t.M30]*i[t.M21]*i[t.M12]*i[t.M03]-i[t.M20]*i[t.M31]*i[t.M12]*i[t.M03]-i[t.M30]*i[t.M11]*i[t.M22]*i[t.M03]+i[t.M10]*i[t.M31]*i[t.M22]*i[t.M03]+i[t.M20]*i[t.M11]*i[t.M32]*i[t.M03]-i[t.M10]*i[t.M21]*i[t.M32]*i[t.M03]-i[t.M30]*i[t.M21]*i[t.M02]*i[t.M13]+i[t.M20]*i[t.M31]*i[t.M02]*i[t.M13]+i[t.M30]*i[t.M01]*i[t.M22]*i[t.M13]-i[t.M00]*i[t.M31]*i[t.M22]*i[t.M13]-i[t.M20]*i[t.M01]*i[t.M32]*i[t.M13]+i[t.M00]*i[t.M21]*i[t.M32]*i[t.M13]+i[t.M30]*i[t.M11]*i[t.M02]*i[t.M23]-i[t.M10]*i[t.M31]*i[t.M02]*i[t.M23]-i[t.M30]*i[t.M01]*i[t.M12]*i[t.M23]+i[t.M00]*i[t.M31]*i[t.M12]*i[t.M23]+i[t.M10]*i[t.M01]*i[t.M32]*i[t.M23]-i[t.M00]*i[t.M11]*i[t.M32]*i[t.M23]-i[t.M20]*i[t.M11]*i[t.M02]*i[t.M33]+i[t.M10]*i[t.M21]*i[t.M02]*i[t.M33]+i[t.M20]*i[t.M01]*i[t.M12]*i[t.M33]-i[t.M00]*i[t.M21]*i[t.M12]*i[t.M33]-i[t.M10]*i[t.M01]*i[t.M22]*i[t.M33]+i[t.M00]*i[t.M11]*i[t.M22]*i[t.M33];if(0==o)throw new Error("non-invertible matrix");var a=1/o;return n[t.M00]=i[t.M12]*i[t.M23]*i[t.M31]-i[t.M13]*i[t.M22]*i[t.M31]+i[t.M13]*i[t.M21]*i[t.M32]-i[t.M11]*i[t.M23]*i[t.M32]-i[t.M12]*i[t.M21]*i[t.M33]+i[t.M11]*i[t.M22]*i[t.M33],n[t.M01]=i[t.M03]*i[t.M22]*i[t.M31]-i[t.M02]*i[t.M23]*i[t.M31]-i[t.M03]*i[t.M21]*i[t.M32]+i[t.M01]*i[t.M23]*i[t.M32]+i[t.M02]*i[t.M21]*i[t.M33]-i[t.M01]*i[t.M22]*i[t.M33],n[t.M02]=i[t.M02]*i[t.M13]*i[t.M31]-i[t.M03]*i[t.M12]*i[t.M31]+i[t.M03]*i[t.M11]*i[t.M32]-i[t.M01]*i[t.M13]*i[t.M32]-i[t.M02]*i[t.M11]*i[t.M33]+i[t.M01]*i[t.M12]*i[t.M33],n[t.M03]=i[t.M03]*i[t.M12]*i[t.M21]-i[t.M02]*i[t.M13]*i[t.M21]-i[t.M03]*i[t.M11]*i[t.M22]+i[t.M01]*i[t.M13]*i[t.M22]+i[t.M02]*i[t.M11]*i[t.M23]-i[t.M01]*i[t.M12]*i[t.M23],n[t.M10]=i[t.M13]*i[t.M22]*i[t.M30]-i[t.M12]*i[t.M23]*i[t.M30]-i[t.M13]*i[t.M20]*i[t.M32]+i[t.M10]*i[t.M23]*i[t.M32]+i[t.M12]*i[t.M20]*i[t.M33]-i[t.M10]*i[t.M22]*i[t.M33],n[t.M11]=i[t.M02]*i[t.M23]*i[t.M30]-i[t.M03]*i[t.M22]*i[t.M30]+i[t.M03]*i[t.M20]*i[t.M32]-i[t.M00]*i[t.M23]*i[t.M32]-i[t.M02]*i[t.M20]*i[t.M33]+i[t.M00]*i[t.M22]*i[t.M33],n[t.M12]=i[t.M03]*i[t.M12]*i[t.M30]-i[t.M02]*i[t.M13]*i[t.M30]-i[t.M03]*i[t.M10]*i[t.M32]+i[t.M00]*i[t.M13]*i[t.M32]+i[t.M02]*i[t.M10]*i[t.M33]-i[t.M00]*i[t.M12]*i[t.M33],n[t.M13]=i[t.M02]*i[t.M13]*i[t.M20]-i[t.M03]*i[t.M12]*i[t.M20]+i[t.M03]*i[t.M10]*i[t.M22]-i[t.M00]*i[t.M13]*i[t.M22]-i[t.M02]*i[t.M10]*i[t.M23]+i[t.M00]*i[t.M12]*i[t.M23],n[t.M20]=i[t.M11]*i[t.M23]*i[t.M30]-i[t.M13]*i[t.M21]*i[t.M30]+i[t.M13]*i[t.M20]*i[t.M31]-i[t.M10]*i[t.M23]*i[t.M31]-i[t.M11]*i[t.M20]*i[t.M33]+i[t.M10]*i[t.M21]*i[t.M33],n[t.M21]=i[t.M03]*i[t.M21]*i[t.M30]-i[t.M01]*i[t.M23]*i[t.M30]-i[t.M03]*i[t.M20]*i[t.M31]+i[t.M00]*i[t.M23]*i[t.M31]+i[t.M01]*i[t.M20]*i[t.M33]-i[t.M00]*i[t.M21]*i[t.M33],n[t.M22]=i[t.M01]*i[t.M13]*i[t.M30]-i[t.M03]*i[t.M11]*i[t.M30]+i[t.M03]*i[t.M10]*i[t.M31]-i[t.M00]*i[t.M13]*i[t.M31]-i[t.M01]*i[t.M10]*i[t.M33]+i[t.M00]*i[t.M11]*i[t.M33],n[t.M23]=i[t.M03]*i[t.M11]*i[t.M20]-i[t.M01]*i[t.M13]*i[t.M20]-i[t.M03]*i[t.M10]*i[t.M21]+i[t.M00]*i[t.M13]*i[t.M21]+i[t.M01]*i[t.M10]*i[t.M23]-i[t.M00]*i[t.M11]*i[t.M23],n[t.M30]=i[t.M12]*i[t.M21]*i[t.M30]-i[t.M11]*i[t.M22]*i[t.M30]-i[t.M12]*i[t.M20]*i[t.M31]+i[t.M10]*i[t.M22]*i[t.M31]+i[t.M11]*i[t.M20]*i[t.M32]-i[t.M10]*i[t.M21]*i[t.M32],n[t.M31]=i[t.M01]*i[t.M22]*i[t.M30]-i[t.M02]*i[t.M21]*i[t.M30]+i[t.M02]*i[t.M20]*i[t.M31]-i[t.M00]*i[t.M22]*i[t.M31]-i[t.M01]*i[t.M20]*i[t.M32]+i[t.M00]*i[t.M21]*i[t.M32],n[t.M32]=i[t.M02]*i[t.M11]*i[t.M30]-i[t.M01]*i[t.M12]*i[t.M30]-i[t.M02]*i[t.M10]*i[t.M31]+i[t.M00]*i[t.M12]*i[t.M31]+i[t.M01]*i[t.M10]*i[t.M32]-i[t.M00]*i[t.M11]*i[t.M32],n[t.M33]=i[t.M01]*i[t.M12]*i[t.M20]-i[t.M02]*i[t.M11]*i[t.M20]+i[t.M02]*i[t.M10]*i[t.M21]-i[t.M00]*i[t.M12]*i[t.M21]-i[t.M01]*i[t.M10]*i[t.M22]+i[t.M00]*i[t.M11]*i[t.M22],i[t.M00]=n[t.M00]*a,i[t.M01]=n[t.M01]*a,i[t.M02]=n[t.M02]*a,i[t.M03]=n[t.M03]*a,i[t.M10]=n[t.M10]*a,i[t.M11]=n[t.M11]*a,i[t.M12]=n[t.M12]*a,i[t.M13]=n[t.M13]*a,i[t.M20]=n[t.M20]*a,i[t.M21]=n[t.M21]*a,i[t.M22]=n[t.M22]*a,i[t.M23]=n[t.M23]*a,i[t.M30]=n[t.M30]*a,i[t.M31]=n[t.M31]*a,i[t.M32]=n[t.M32]*a,i[t.M33]=n[t.M33]*a,this},Matrix42.prototype.determinant=function(){var i=this.values;return i[t.M30]*i[t.M21]*i[t.M12]*i[t.M03]-i[t.M20]*i[t.M31]*i[t.M12]*i[t.M03]-i[t.M30]*i[t.M11]*i[t.M22]*i[t.M03]+i[t.M10]*i[t.M31]*i[t.M22]*i[t.M03]+i[t.M20]*i[t.M11]*i[t.M32]*i[t.M03]-i[t.M10]*i[t.M21]*i[t.M32]*i[t.M03]-i[t.M30]*i[t.M21]*i[t.M02]*i[t.M13]+i[t.M20]*i[t.M31]*i[t.M02]*i[t.M13]+i[t.M30]*i[t.M01]*i[t.M22]*i[t.M13]-i[t.M00]*i[t.M31]*i[t.M22]*i[t.M13]-i[t.M20]*i[t.M01]*i[t.M32]*i[t.M13]+i[t.M00]*i[t.M21]*i[t.M32]*i[t.M13]+i[t.M30]*i[t.M11]*i[t.M02]*i[t.M23]-i[t.M10]*i[t.M31]*i[t.M02]*i[t.M23]-i[t.M30]*i[t.M01]*i[t.M12]*i[t.M23]+i[t.M00]*i[t.M31]*i[t.M12]*i[t.M23]+i[t.M10]*i[t.M01]*i[t.M32]*i[t.M23]-i[t.M00]*i[t.M11]*i[t.M32]*i[t.M23]-i[t.M20]*i[t.M11]*i[t.M02]*i[t.M33]+i[t.M10]*i[t.M21]*i[t.M02]*i[t.M33]+i[t.M20]*i[t.M01]*i[t.M12]*i[t.M33]-i[t.M00]*i[t.M21]*i[t.M12]*i[t.M33]-i[t.M10]*i[t.M01]*i[t.M22]*i[t.M33]+i[t.M00]*i[t.M11]*i[t.M22]*i[t.M33]},Matrix42.prototype.translate=function(i,n,o){var a=this.values;return a[t.M03]+=i,a[t.M13]+=n,a[t.M23]+=o,this},Matrix42.prototype.copy=function(){return(new Matrix42).set(this.values)},Matrix42.prototype.projection=function(i,n,o,a){this.identity();var u=1/Math.tan(o*(Math.PI/180)/2),d=(n+i)/(i-n),f=2*n*i/(i-n),p=this.values;return p[t.M00]=u/a,p[t.M10]=0,p[t.M20]=0,p[t.M30]=0,p[t.M01]=0,p[t.M11]=u,p[t.M21]=0,p[t.M31]=0,p[t.M02]=0,p[t.M12]=0,p[t.M22]=d,p[t.M32]=-1,p[t.M03]=0,p[t.M13]=0,p[t.M23]=f,p[t.M33]=0,this},Matrix42.prototype.ortho2d=function(t,i,n,o){return this.ortho(t,t+n,i,i+o,0,1)},Matrix42.prototype.ortho=function(i,n,o,a,u,d){this.identity();var f=2/(n-i),p=2/(a-o),b=-2/(d-u),S=-(n+i)/(n-i),M=-(a+o)/(a-o),C=-(d+u)/(d-u),P=this.values;return P[t.M00]=f,P[t.M10]=0,P[t.M20]=0,P[t.M30]=0,P[t.M01]=0,P[t.M11]=p,P[t.M21]=0,P[t.M31]=0,P[t.M02]=0,P[t.M12]=0,P[t.M22]=b,P[t.M32]=0,P[t.M03]=S,P[t.M13]=M,P[t.M23]=C,P[t.M33]=1,this},Matrix42.prototype.multiply=function(i){var n=this.temp,o=this.values,a=i.values;return n[t.M00]=o[t.M00]*a[t.M00]+o[t.M01]*a[t.M10]+o[t.M02]*a[t.M20]+o[t.M03]*a[t.M30],n[t.M01]=o[t.M00]*a[t.M01]+o[t.M01]*a[t.M11]+o[t.M02]*a[t.M21]+o[t.M03]*a[t.M31],n[t.M02]=o[t.M00]*a[t.M02]+o[t.M01]*a[t.M12]+o[t.M02]*a[t.M22]+o[t.M03]*a[t.M32],n[t.M03]=o[t.M00]*a[t.M03]+o[t.M01]*a[t.M13]+o[t.M02]*a[t.M23]+o[t.M03]*a[t.M33],n[t.M10]=o[t.M10]*a[t.M00]+o[t.M11]*a[t.M10]+o[t.M12]*a[t.M20]+o[t.M13]*a[t.M30],n[t.M11]=o[t.M10]*a[t.M01]+o[t.M11]*a[t.M11]+o[t.M12]*a[t.M21]+o[t.M13]*a[t.M31],n[t.M12]=o[t.M10]*a[t.M02]+o[t.M11]*a[t.M12]+o[t.M12]*a[t.M22]+o[t.M13]*a[t.M32],n[t.M13]=o[t.M10]*a[t.M03]+o[t.M11]*a[t.M13]+o[t.M12]*a[t.M23]+o[t.M13]*a[t.M33],n[t.M20]=o[t.M20]*a[t.M00]+o[t.M21]*a[t.M10]+o[t.M22]*a[t.M20]+o[t.M23]*a[t.M30],n[t.M21]=o[t.M20]*a[t.M01]+o[t.M21]*a[t.M11]+o[t.M22]*a[t.M21]+o[t.M23]*a[t.M31],n[t.M22]=o[t.M20]*a[t.M02]+o[t.M21]*a[t.M12]+o[t.M22]*a[t.M22]+o[t.M23]*a[t.M32],n[t.M23]=o[t.M20]*a[t.M03]+o[t.M21]*a[t.M13]+o[t.M22]*a[t.M23]+o[t.M23]*a[t.M33],n[t.M30]=o[t.M30]*a[t.M00]+o[t.M31]*a[t.M10]+o[t.M32]*a[t.M20]+o[t.M33]*a[t.M30],n[t.M31]=o[t.M30]*a[t.M01]+o[t.M31]*a[t.M11]+o[t.M32]*a[t.M21]+o[t.M33]*a[t.M31],n[t.M32]=o[t.M30]*a[t.M02]+o[t.M31]*a[t.M12]+o[t.M32]*a[t.M22]+o[t.M33]*a[t.M32],n[t.M33]=o[t.M30]*a[t.M03]+o[t.M31]*a[t.M13]+o[t.M32]*a[t.M23]+o[t.M33]*a[t.M33],this.set(this.temp)},Matrix42.prototype.multiplyLeft=function(i){var n=this.temp,o=this.values,a=i.values;return n[t.M00]=a[t.M00]*o[t.M00]+a[t.M01]*o[t.M10]+a[t.M02]*o[t.M20]+a[t.M03]*o[t.M30],n[t.M01]=a[t.M00]*o[t.M01]+a[t.M01]*o[t.M11]+a[t.M02]*o[t.M21]+a[t.M03]*o[t.M31],n[t.M02]=a[t.M00]*o[t.M02]+a[t.M01]*o[t.M12]+a[t.M02]*o[t.M22]+a[t.M03]*o[t.M32],n[t.M03]=a[t.M00]*o[t.M03]+a[t.M01]*o[t.M13]+a[t.M02]*o[t.M23]+a[t.M03]*o[t.M33],n[t.M10]=a[t.M10]*o[t.M00]+a[t.M11]*o[t.M10]+a[t.M12]*o[t.M20]+a[t.M13]*o[t.M30],n[t.M11]=a[t.M10]*o[t.M01]+a[t.M11]*o[t.M11]+a[t.M12]*o[t.M21]+a[t.M13]*o[t.M31],n[t.M12]=a[t.M10]*o[t.M02]+a[t.M11]*o[t.M12]+a[t.M12]*o[t.M22]+a[t.M13]*o[t.M32],n[t.M13]=a[t.M10]*o[t.M03]+a[t.M11]*o[t.M13]+a[t.M12]*o[t.M23]+a[t.M13]*o[t.M33],n[t.M20]=a[t.M20]*o[t.M00]+a[t.M21]*o[t.M10]+a[t.M22]*o[t.M20]+a[t.M23]*o[t.M30],n[t.M21]=a[t.M20]*o[t.M01]+a[t.M21]*o[t.M11]+a[t.M22]*o[t.M21]+a[t.M23]*o[t.M31],n[t.M22]=a[t.M20]*o[t.M02]+a[t.M21]*o[t.M12]+a[t.M22]*o[t.M22]+a[t.M23]*o[t.M32],n[t.M23]=a[t.M20]*o[t.M03]+a[t.M21]*o[t.M13]+a[t.M22]*o[t.M23]+a[t.M23]*o[t.M33],n[t.M30]=a[t.M30]*o[t.M00]+a[t.M31]*o[t.M10]+a[t.M32]*o[t.M20]+a[t.M33]*o[t.M30],n[t.M31]=a[t.M30]*o[t.M01]+a[t.M31]*o[t.M11]+a[t.M32]*o[t.M21]+a[t.M33]*o[t.M31],n[t.M32]=a[t.M30]*o[t.M02]+a[t.M31]*o[t.M12]+a[t.M32]*o[t.M22]+a[t.M33]*o[t.M32],n[t.M33]=a[t.M30]*o[t.M03]+a[t.M31]*o[t.M13]+a[t.M32]*o[t.M23]+a[t.M33]*o[t.M33],this.set(this.temp)},Matrix42.prototype.lookAt=function(i,n,o){Matrix42.initTemps();var a=Matrix42.xAxis,u=Matrix42.yAxis,d=Matrix42.zAxis;d.setFrom(n).normalize(),a.setFrom(n).normalize(),a.cross(o).normalize(),u.setFrom(a).cross(d).normalize(),this.identity();var f=this.values;return f[t.M00]=a.x,f[t.M01]=a.y,f[t.M02]=a.z,f[t.M10]=u.x,f[t.M11]=u.y,f[t.M12]=u.z,f[t.M20]=-d.x,f[t.M21]=-d.y,f[t.M22]=-d.z,Matrix42.tmpMatrix.identity(),Matrix42.tmpMatrix.values[t.M03]=-i.x,Matrix42.tmpMatrix.values[t.M13]=-i.y,Matrix42.tmpMatrix.values[t.M23]=-i.z,this.multiply(Matrix42.tmpMatrix),this},Matrix42.initTemps=function(){null===Matrix42.xAxis&&(Matrix42.xAxis=new t.Vector3),null===Matrix42.yAxis&&(Matrix42.yAxis=new t.Vector3),null===Matrix42.zAxis&&(Matrix42.zAxis=new t.Vector3)},Matrix42.xAxis=null,Matrix42.yAxis=null,Matrix42.zAxis=null,Matrix42.tmpMatrix=new Matrix42,Matrix42}();t.Matrix4=i}(t.webgl||(t.webgl={}))}(u||(u={})),function(t){!function(t){var i=function(){function Mesh2(i,n,o,a){this.attributes=n,this.verticesLength=0,this.dirtyVertices=!1,this.indicesLength=0,this.dirtyIndices=!1,this.elementsPerVertex=0,this.context=i instanceof t.ManagedWebGLRenderingContext?i:new t.ManagedWebGLRenderingContext(i),this.elementsPerVertex=0;for(var u=0;u<n.length;u++)this.elementsPerVertex+=n[u].numElements;this.vertices=new Float32Array(o*this.elementsPerVertex),this.indices=new Uint16Array(a),this.context.addRestorable(this)}return Mesh2.prototype.getAttributes=function(){return this.attributes},Mesh2.prototype.maxVertices=function(){return this.vertices.length/this.elementsPerVertex},Mesh2.prototype.numVertices=function(){return this.verticesLength/this.elementsPerVertex},Mesh2.prototype.setVerticesLength=function(t){this.dirtyVertices=!0,this.verticesLength=t},Mesh2.prototype.getVertices=function(){return this.vertices},Mesh2.prototype.maxIndices=function(){return this.indices.length},Mesh2.prototype.numIndices=function(){return this.indicesLength},Mesh2.prototype.setIndicesLength=function(t){this.dirtyIndices=!0,this.indicesLength=t},Mesh2.prototype.getIndices=function(){return this.indices},Mesh2.prototype.getVertexSizeInFloats=function(){for(var t=0,i=0;i<this.attributes.length;i++){t+=this.attributes[i].numElements}return t},Mesh2.prototype.setVertices=function(t){if(this.dirtyVertices=!0,t.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(t,0),this.verticesLength=t.length},Mesh2.prototype.setIndices=function(t){if(this.dirtyIndices=!0,t.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(t,0),this.indicesLength=t.length},Mesh2.prototype.draw=function(t,i){this.drawWithOffset(t,i,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex)},Mesh2.prototype.drawWithOffset=function(t,i,n,o){var a=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(t),this.indicesLength>0?a.drawElements(i,o,a.UNSIGNED_SHORT,2*n):a.drawArrays(i,n,o),this.unbind(t)},Mesh2.prototype.bind=function(t){var i=this.context.gl;i.bindBuffer(i.ARRAY_BUFFER,this.verticesBuffer);for(var n=0,o=0;o<this.attributes.length;o++){var a=this.attributes[o],u=t.getAttributeLocation(a.name);i.enableVertexAttribArray(u),i.vertexAttribPointer(u,a.numElements,i.FLOAT,!1,4*this.elementsPerVertex,4*n),n+=a.numElements}this.indicesLength>0&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.indicesBuffer)},Mesh2.prototype.unbind=function(t){for(var i=this.context.gl,n=0;n<this.attributes.length;n++){var o=this.attributes[n],a=t.getAttributeLocation(o.name);i.disableVertexAttribArray(a)}i.bindBuffer(i.ARRAY_BUFFER,null),this.indicesLength>0&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null)},Mesh2.prototype.update=function(){var t=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.verticesBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),t.DYNAMIC_DRAW),this.dirtyVertices=!1),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),t.DYNAMIC_DRAW),this.dirtyIndices=!1)},Mesh2.prototype.restore=function(){this.verticesBuffer=null,this.indicesBuffer=null,this.update()},Mesh2.prototype.dispose=function(){this.context.removeRestorable(this);var t=this.context.gl;t.deleteBuffer(this.verticesBuffer),t.deleteBuffer(this.indicesBuffer)},Mesh2}();t.Mesh=i;var n=function VertexAttribute2(t,i,n){this.name=t,this.type=i,this.numElements=n};t.VertexAttribute=n;var o=function(i){function Position2Attribute2(){return i.call(this,t.Shader.POSITION,p.Float,2)||this}return d(Position2Attribute2,i),Position2Attribute2}(n);t.Position2Attribute=o;var a=function(i){function Position3Attribute2(){return i.call(this,t.Shader.POSITION,p.Float,3)||this}return d(Position3Attribute2,i),Position3Attribute2}(n);t.Position3Attribute=a;var u=function(i){function TexCoordAttribute2(n){return void 0===n&&(n=0),i.call(this,t.Shader.TEXCOORDS+(0==n?"":n),p.Float,2)||this}return d(TexCoordAttribute2,i),TexCoordAttribute2}(n);t.TexCoordAttribute=u;var f=function(i){function ColorAttribute2(){return i.call(this,t.Shader.COLOR,p.Float,4)||this}return d(ColorAttribute2,i),ColorAttribute2}(n);t.ColorAttribute=f;var p,b,S=function(i){function Color2Attribute2(){return i.call(this,t.Shader.COLOR2,p.Float,4)||this}return d(Color2Attribute2,i),Color2Attribute2}(n);t.Color2Attribute=S,(b=p=t.VertexAttributeType||(t.VertexAttributeType={}))[b.Float=0]="Float"}(t.webgl||(t.webgl={}))}(u||(u={})),function(t){var i,n;i=t.webgl||(t.webgl={}),n=function(){function PolygonBatcher2(t,n,o){if(void 0===n&&(n=!0),void 0===o&&(o=10920),this.isDrawing=!1,this.shader=null,this.lastTexture=null,this.verticesLength=0,this.indicesLength=0,o>10920)throw new Error("Can't have more than 10920 triangles per batch: "+o);this.context=t instanceof i.ManagedWebGLRenderingContext?t:new i.ManagedWebGLRenderingContext(t);var a=n?[new i.Position2Attribute,new i.ColorAttribute,new i.TexCoordAttribute,new i.Color2Attribute]:[new i.Position2Attribute,new i.ColorAttribute,new i.TexCoordAttribute];this.mesh=new i.Mesh(t,a,o,3*o),this.srcBlend=this.context.gl.SRC_ALPHA,this.dstBlend=this.context.gl.ONE_MINUS_SRC_ALPHA}return PolygonBatcher2.prototype.begin=function(t){var i=this.context.gl;if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=t,this.lastTexture=null,this.isDrawing=!0,i.enable(i.BLEND),i.blendFunc(this.srcBlend,this.dstBlend)},PolygonBatcher2.prototype.setBlendMode=function(t,i){var n=this.context.gl;this.srcBlend=t,this.dstBlend=i,this.isDrawing&&(this.flush(),n.blendFunc(this.srcBlend,this.dstBlend))},PolygonBatcher2.prototype.draw=function(t,i,n){t!=this.lastTexture?(this.flush(),this.lastTexture=t):(this.verticesLength+i.length>this.mesh.getVertices().length||this.indicesLength+n.length>this.mesh.getIndices().length)&&this.flush();var o=this.mesh.numVertices();this.mesh.getVertices().set(i,this.verticesLength),this.verticesLength+=i.length,this.mesh.setVerticesLength(this.verticesLength);for(var a=this.mesh.getIndices(),u=this.indicesLength,d=0;d<n.length;u++,d++)a[u]=n[d]+o;this.indicesLength+=n.length,this.mesh.setIndicesLength(this.indicesLength)},PolygonBatcher2.prototype.flush=function(){var t=this.context.gl;0!=this.verticesLength&&(this.lastTexture.bind(),this.mesh.draw(this.shader,t.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++)},PolygonBatcher2.prototype.end=function(){var t=this.context.gl;if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=!1,t.disable(t.BLEND)},PolygonBatcher2.prototype.getDrawCalls=function(){return this.drawCalls},PolygonBatcher2.prototype.dispose=function(){this.mesh.dispose()},PolygonBatcher2}(),i.PolygonBatcher=n}(u||(u={})),function(t){var i,n,o,a;i=t.webgl||(t.webgl={}),a=function(){function SceneRenderer2(n,o,a){void 0===a&&(a=!0),this.twoColorTint=!1,this.activeRenderer=null,this.QUAD=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],this.QUAD_TRIANGLES=[0,1,2,2,3,0],this.WHITE=new t.Color(1,1,1,1),this.canvas=n,this.context=o instanceof i.ManagedWebGLRenderingContext?o:new i.ManagedWebGLRenderingContext(o),this.twoColorTint=a,this.camera=new i.OrthoCamera(n.width,n.height),this.batcherShader=a?i.Shader.newTwoColoredTextured(this.context):i.Shader.newColoredTextured(this.context),this.batcher=new i.PolygonBatcher(this.context,a),this.shapesShader=i.Shader.newColored(this.context),this.shapes=new i.ShapeRenderer(this.context),this.skeletonRenderer=new i.SkeletonRenderer(this.context,a),this.skeletonDebugRenderer=new i.SkeletonDebugRenderer(this.context)}return SceneRenderer2.prototype.begin=function(){this.camera.update(),this.enableRenderer(this.batcher)},SceneRenderer2.prototype.drawSkeleton=function(t,i,n,o){void 0===i&&(i=!1),void 0===n&&(n=-1),void 0===o&&(o=-1),this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=i,this.skeletonRenderer.draw(this.batcher,t,n,o)},SceneRenderer2.prototype.drawSkeletonDebug=function(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=null),this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=i,this.skeletonDebugRenderer.draw(this.shapes,t,n)},SceneRenderer2.prototype.drawTexture=function(t,i,n,o,a,u){void 0===u&&(u=null),this.enableRenderer(this.batcher),null===u&&(u=this.WHITE);var d=this.QUAD,f=0;d[f++]=i,d[f++]=n,d[f++]=u.r,d[f++]=u.g,d[f++]=u.b,d[f++]=u.a,d[f++]=0,d[f++]=1,this.twoColorTint&&(d[f++]=0,d[f++]=0,d[f++]=0,d[f++]=0),d[f++]=i+o,d[f++]=n,d[f++]=u.r,d[f++]=u.g,d[f++]=u.b,d[f++]=u.a,d[f++]=1,d[f++]=1,this.twoColorTint&&(d[f++]=0,d[f++]=0,d[f++]=0,d[f++]=0),d[f++]=i+o,d[f++]=n+a,d[f++]=u.r,d[f++]=u.g,d[f++]=u.b,d[f++]=u.a,d[f++]=1,d[f++]=0,this.twoColorTint&&(d[f++]=0,d[f++]=0,d[f++]=0,d[f++]=0),d[f++]=i,d[f++]=n+a,d[f++]=u.r,d[f++]=u.g,d[f++]=u.b,d[f++]=u.a,d[f++]=0,d[f++]=0,this.twoColorTint&&(d[f++]=0,d[f++]=0,d[f++]=0,d[f++]=0),this.batcher.draw(t,d,this.QUAD_TRIANGLES)},SceneRenderer2.prototype.drawTextureUV=function(t,i,n,o,a,u,d,f,p,b){void 0===b&&(b=null),this.enableRenderer(this.batcher),null===b&&(b=this.WHITE);var S=this.QUAD,M=0;S[M++]=i,S[M++]=n,S[M++]=b.r,S[M++]=b.g,S[M++]=b.b,S[M++]=b.a,S[M++]=u,S[M++]=d,this.twoColorTint&&(S[M++]=0,S[M++]=0,S[M++]=0,S[M++]=0),S[M++]=i+o,S[M++]=n,S[M++]=b.r,S[M++]=b.g,S[M++]=b.b,S[M++]=b.a,S[M++]=f,S[M++]=d,this.twoColorTint&&(S[M++]=0,S[M++]=0,S[M++]=0,S[M++]=0),S[M++]=i+o,S[M++]=n+a,S[M++]=b.r,S[M++]=b.g,S[M++]=b.b,S[M++]=b.a,S[M++]=f,S[M++]=p,this.twoColorTint&&(S[M++]=0,S[M++]=0,S[M++]=0,S[M++]=0),S[M++]=i,S[M++]=n+a,S[M++]=b.r,S[M++]=b.g,S[M++]=b.b,S[M++]=b.a,S[M++]=u,S[M++]=p,this.twoColorTint&&(S[M++]=0,S[M++]=0,S[M++]=0,S[M++]=0),this.batcher.draw(t,S,this.QUAD_TRIANGLES)},SceneRenderer2.prototype.drawTextureRotated=function(i,n,o,a,u,d,f,p,b,S){void 0===b&&(b=null),this.enableRenderer(this.batcher),null===b&&(b=this.WHITE);var M=this.QUAD,C=n+d,P=o+f,R=-d,O=-f,B=a-d,N=u-f,Y=R,X=O,G=R,U=N,V=B,z=N,W=B,H=O,j=0,q=0,Z=0,K=0,$=0,tt=0,et=0,it=0;if(0!=p){var nt=t.MathUtils.cosDeg(p),st=t.MathUtils.sinDeg(p);Z=($=nt*V-st*z)+((j=nt*Y-st*X)-(et=nt*G-st*U)),K=(tt=st*V+nt*z)+((q=st*Y+nt*X)-(it=st*G+nt*U))}else j=Y,q=X,et=G,it=U,$=V,tt=z,Z=W,K=H;j+=C,q+=P,Z+=C,K+=P,$+=C,tt+=P,et+=C,it+=P;var rt=0;M[rt++]=j,M[rt++]=q,M[rt++]=b.r,M[rt++]=b.g,M[rt++]=b.b,M[rt++]=b.a,M[rt++]=0,M[rt++]=1,this.twoColorTint&&(M[rt++]=0,M[rt++]=0,M[rt++]=0,M[rt++]=0),M[rt++]=Z,M[rt++]=K,M[rt++]=b.r,M[rt++]=b.g,M[rt++]=b.b,M[rt++]=b.a,M[rt++]=1,M[rt++]=1,this.twoColorTint&&(M[rt++]=0,M[rt++]=0,M[rt++]=0,M[rt++]=0),M[rt++]=$,M[rt++]=tt,M[rt++]=b.r,M[rt++]=b.g,M[rt++]=b.b,M[rt++]=b.a,M[rt++]=1,M[rt++]=0,this.twoColorTint&&(M[rt++]=0,M[rt++]=0,M[rt++]=0,M[rt++]=0),M[rt++]=et,M[rt++]=it,M[rt++]=b.r,M[rt++]=b.g,M[rt++]=b.b,M[rt++]=b.a,M[rt++]=0,M[rt++]=0,this.twoColorTint&&(M[rt++]=0,M[rt++]=0,M[rt++]=0,M[rt++]=0),this.batcher.draw(i,M,this.QUAD_TRIANGLES)},SceneRenderer2.prototype.drawRegion=function(t,i,n,o,a,u,d){void 0===u&&(u=null),this.enableRenderer(this.batcher),null===u&&(u=this.WHITE);var f=this.QUAD,p=0;f[p++]=i,f[p++]=n,f[p++]=u.r,f[p++]=u.g,f[p++]=u.b,f[p++]=u.a,f[p++]=t.u,f[p++]=t.v2,this.twoColorTint&&(f[p++]=0,f[p++]=0,f[p++]=0,f[p++]=0),f[p++]=i+o,f[p++]=n,f[p++]=u.r,f[p++]=u.g,f[p++]=u.b,f[p++]=u.a,f[p++]=t.u2,f[p++]=t.v2,this.twoColorTint&&(f[p++]=0,f[p++]=0,f[p++]=0,f[p++]=0),f[p++]=i+o,f[p++]=n+a,f[p++]=u.r,f[p++]=u.g,f[p++]=u.b,f[p++]=u.a,f[p++]=t.u2,f[p++]=t.v,this.twoColorTint&&(f[p++]=0,f[p++]=0,f[p++]=0,f[p++]=0),f[p++]=i,f[p++]=n+a,f[p++]=u.r,f[p++]=u.g,f[p++]=u.b,f[p++]=u.a,f[p++]=t.u,f[p++]=t.v,this.twoColorTint&&(f[p++]=0,f[p++]=0,f[p++]=0,f[p++]=0),this.batcher.draw(t.texture,f,this.QUAD_TRIANGLES)},SceneRenderer2.prototype.line=function(t,i,n,o,a,u){void 0===a&&(a=null),this.enableRenderer(this.shapes),this.shapes.line(t,i,n,o,a)},SceneRenderer2.prototype.triangle=function(t,i,n,o,a,u,d,f,p,b){void 0===f&&(f=null),void 0===p&&(p=null),void 0===b&&(b=null),this.enableRenderer(this.shapes),this.shapes.triangle(t,i,n,o,a,u,d,f,p,b)},SceneRenderer2.prototype.quad=function(t,i,n,o,a,u,d,f,p,b,S,M,C){void 0===b&&(b=null),void 0===S&&(S=null),void 0===M&&(M=null),void 0===C&&(C=null),this.enableRenderer(this.shapes),this.shapes.quad(t,i,n,o,a,u,d,f,p,b,S,M,C)},SceneRenderer2.prototype.rect=function(t,i,n,o,a,u){void 0===u&&(u=null),this.enableRenderer(this.shapes),this.shapes.rect(t,i,n,o,a,u)},SceneRenderer2.prototype.rectLine=function(t,i,n,o,a,u,d){void 0===d&&(d=null),this.enableRenderer(this.shapes),this.shapes.rectLine(t,i,n,o,a,u,d)},SceneRenderer2.prototype.polygon=function(t,i,n,o){void 0===o&&(o=null),this.enableRenderer(this.shapes),this.shapes.polygon(t,i,n,o)},SceneRenderer2.prototype.circle=function(t,i,n,o,a,u){void 0===a&&(a=null),void 0===u&&(u=0),this.enableRenderer(this.shapes),this.shapes.circle(t,i,n,o,a,u)},SceneRenderer2.prototype.curve=function(t,i,n,o,a,u,d,f,p,b){void 0===b&&(b=null),this.enableRenderer(this.shapes),this.shapes.curve(t,i,n,o,a,u,d,f,p,b)},SceneRenderer2.prototype.end=function(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null},SceneRenderer2.prototype.resize=function(t){var i=this.canvas,o=i.clientWidth,a=i.clientHeight;if(i.width==o&&i.height==a||(i.width=o,i.height=a),this.context.gl.viewport(0,0,i.width,i.height),t===n.Stretch);else if(t===n.Expand)this.camera.setViewport(o,a);else if(t===n.Fit){var u=i.width,d=i.height,f=this.camera.viewportWidth,p=this.camera.viewportHeight,b=p/f<d/u?f/u:p/d;this.camera.viewportWidth=u*b,this.camera.viewportHeight=d*b}this.camera.update()},SceneRenderer2.prototype.enableRenderer=function(t){this.activeRenderer!==t&&(this.end(),t instanceof i.PolygonBatcher?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(i.Shader.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):t instanceof i.ShapeRenderer?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(i.Shader.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer)},SceneRenderer2.prototype.dispose=function(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose()},SceneRenderer2}(),i.SceneRenderer=a,(o=n=i.ResizeMode||(i.ResizeMode={}))[o.Stretch=0]="Stretch",o[o.Expand=1]="Expand",o[o.Fit=2]="Fit"}(u||(u={})),function(t){var i,n;i=t.webgl||(t.webgl={}),n=function(){function Shader2(t,n,o){this.vertexShader=n,this.fragmentShader=o,this.vs=null,this.fs=null,this.program=null,this.tmp2x2=new Float32Array(4),this.tmp3x3=new Float32Array(9),this.tmp4x4=new Float32Array(16),this.vsSource=n,this.fsSource=o,this.context=t instanceof i.ManagedWebGLRenderingContext?t:new i.ManagedWebGLRenderingContext(t),this.context.addRestorable(this),this.compile()}return Shader2.prototype.getProgram=function(){return this.program},Shader2.prototype.getVertexShader=function(){return this.vertexShader},Shader2.prototype.getFragmentShader=function(){return this.fragmentShader},Shader2.prototype.getVertexShaderSource=function(){return this.vsSource},Shader2.prototype.getFragmentSource=function(){return this.fsSource},Shader2.prototype.compile=function(){var t=this.context.gl;try{this.vs=this.compileShader(t.VERTEX_SHADER,this.vertexShader),this.fs=this.compileShader(t.FRAGMENT_SHADER,this.fragmentShader),this.program=this.compileProgram(this.vs,this.fs)}catch(i){throw this.dispose(),i}},Shader2.prototype.compileShader=function(t,i){var n=this.context.gl,o=n.createShader(t);if(n.shaderSource(o,i),n.compileShader(o),!n.getShaderParameter(o,n.COMPILE_STATUS)){var a="Couldn't compile shader: "+n.getShaderInfoLog(o);if(n.deleteShader(o),!n.isContextLost())throw new Error(a)}return o},Shader2.prototype.compileProgram=function(t,i){var n=this.context.gl,o=n.createProgram();if(n.attachShader(o,t),n.attachShader(o,i),n.linkProgram(o),!n.getProgramParameter(o,n.LINK_STATUS)){var a="Couldn't compile shader program: "+n.getProgramInfoLog(o);if(n.deleteProgram(o),!n.isContextLost())throw new Error(a)}return o},Shader2.prototype.restore=function(){this.compile()},Shader2.prototype.bind=function(){this.context.gl.useProgram(this.program)},Shader2.prototype.unbind=function(){this.context.gl.useProgram(null)},Shader2.prototype.setUniformi=function(t,i){this.context.gl.uniform1i(this.getUniformLocation(t),i)},Shader2.prototype.setUniformf=function(t,i){this.context.gl.uniform1f(this.getUniformLocation(t),i)},Shader2.prototype.setUniform2f=function(t,i,n){this.context.gl.uniform2f(this.getUniformLocation(t),i,n)},Shader2.prototype.setUniform3f=function(t,i,n,o){this.context.gl.uniform3f(this.getUniformLocation(t),i,n,o)},Shader2.prototype.setUniform4f=function(t,i,n,o,a){this.context.gl.uniform4f(this.getUniformLocation(t),i,n,o,a)},Shader2.prototype.setUniform2x2f=function(t,i){var n=this.context.gl;this.tmp2x2.set(i),n.uniformMatrix2fv(this.getUniformLocation(t),!1,this.tmp2x2)},Shader2.prototype.setUniform3x3f=function(t,i){var n=this.context.gl;this.tmp3x3.set(i),n.uniformMatrix3fv(this.getUniformLocation(t),!1,this.tmp3x3)},Shader2.prototype.setUniform4x4f=function(t,i){var n=this.context.gl;this.tmp4x4.set(i),n.uniformMatrix4fv(this.getUniformLocation(t),!1,this.tmp4x4)},Shader2.prototype.getUniformLocation=function(t){var i=this.context.gl,n=i.getUniformLocation(this.program,t);if(!n&&!i.isContextLost())throw new Error("Couldn't find location for uniform "+t);return n},Shader2.prototype.getAttributeLocation=function(t){var i=this.context.gl,n=i.getAttribLocation(this.program,t);if(-1==n&&!i.isContextLost())throw new Error("Couldn't find location for attribute "+t);return n},Shader2.prototype.dispose=function(){this.context.removeRestorable(this);var t=this.context.gl;this.vs&&(t.deleteShader(this.vs),this.vs=null),this.fs&&(t.deleteShader(this.fs),this.fs=null),this.program&&(t.deleteProgram(this.program),this.program=null)},Shader2.newColoredTextured=function(t){return new Shader2(t,"\n\t\t\t\tattribute vec4 "+Shader2.POSITION+";\n\t\t\t\tattribute vec4 "+Shader2.COLOR+";\n\t\t\t\tattribute vec2 "+Shader2.TEXCOORDS+";\n\t\t\t\tuniform mat4 "+Shader2.MVP_MATRIX+";\n\t\t\t\tvarying vec4 v_color;\n\t\t\t\tvarying vec2 v_texCoords;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_color = "+Shader2.COLOR+";\n\t\t\t\t\tv_texCoords = "+Shader2.TEXCOORDS+";\n\t\t\t\t\tgl_Position = "+Shader2.MVP_MATRIX+" * "+Shader2.POSITION+";\n\t\t\t\t}\n\t\t\t","\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_color;\n\t\t\t\tvarying vec2 v_texCoords;\n\t\t\t\tuniform sampler2D u_texture;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tgl_FragColor = v_color * texture2D(u_texture, v_texCoords);\n\t\t\t\t}\n\t\t\t")},Shader2.newTwoColoredTextured=function(t){return new Shader2(t,"\n\t\t\t\tattribute vec4 "+Shader2.POSITION+";\n\t\t\t\tattribute vec4 "+Shader2.COLOR+";\n\t\t\t\tattribute vec4 "+Shader2.COLOR2+";\n\t\t\t\tattribute vec2 "+Shader2.TEXCOORDS+";\n\t\t\t\tuniform mat4 "+Shader2.MVP_MATRIX+";\n\t\t\t\tvarying vec4 v_light;\n\t\t\t\tvarying vec4 v_dark;\n\t\t\t\tvarying vec2 v_texCoords;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_light = "+Shader2.COLOR+";\n\t\t\t\t\tv_dark = "+Shader2.COLOR2+";\n\t\t\t\t\tv_texCoords = "+Shader2.TEXCOORDS+";\n\t\t\t\t\tgl_Position = "+Shader2.MVP_MATRIX+" * "+Shader2.POSITION+";\n\t\t\t\t}\n\t\t\t","\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_light;\n\t\t\t\tvarying LOWP vec4 v_dark;\n\t\t\t\tvarying vec2 v_texCoords;\n\t\t\t\tuniform sampler2D u_texture;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tvec4 texColor = texture2D(u_texture, v_texCoords);\n\t\t\t\t\tgl_FragColor.a = texColor.a * v_light.a;\n\t\t\t\t\tgl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;\n\t\t\t\t}\n\t\t\t")},Shader2.newColored=function(t){return new Shader2(t,"\n\t\t\t\tattribute vec4 "+Shader2.POSITION+";\n\t\t\t\tattribute vec4 "+Shader2.COLOR+";\n\t\t\t\tuniform mat4 "+Shader2.MVP_MATRIX+";\n\t\t\t\tvarying vec4 v_color;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_color = "+Shader2.COLOR+";\n\t\t\t\t\tgl_Position = "+Shader2.MVP_MATRIX+" * "+Shader2.POSITION+";\n\t\t\t\t}\n\t\t\t","\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_color;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tgl_FragColor = v_color;\n\t\t\t\t}\n\t\t\t")},Shader2.MVP_MATRIX="u_projTrans",Shader2.POSITION="a_position",Shader2.COLOR="a_color",Shader2.COLOR2="a_color2",Shader2.TEXCOORDS="a_texCoords",Shader2.SAMPLER="u_texture",Shader2}(),i.Shader=n}(u||(u={})),function(t){var i,n,o,a;i=t.webgl||(t.webgl={}),a=function(){function ShapeRenderer2(o,a){if(void 0===a&&(a=10920),this.isDrawing=!1,this.shapeType=n.Filled,this.color=new t.Color(1,1,1,1),this.vertexIndex=0,this.tmp=new t.Vector2,a>10920)throw new Error("Can't have more than 10920 triangles per batch: "+a);this.context=o instanceof i.ManagedWebGLRenderingContext?o:new i.ManagedWebGLRenderingContext(o),this.mesh=new i.Mesh(o,[new i.Position2Attribute,new i.ColorAttribute],a,0),this.srcBlend=this.context.gl.SRC_ALPHA,this.dstBlend=this.context.gl.ONE_MINUS_SRC_ALPHA}return ShapeRenderer2.prototype.begin=function(t){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=t,this.vertexIndex=0,this.isDrawing=!0;var i=this.context.gl;i.enable(i.BLEND),i.blendFunc(this.srcBlend,this.dstBlend)},ShapeRenderer2.prototype.setBlendMode=function(t,i){var n=this.context.gl;this.srcBlend=t,this.dstBlend=i,this.isDrawing&&(this.flush(),n.blendFunc(this.srcBlend,this.dstBlend))},ShapeRenderer2.prototype.setColor=function(t){this.color.setFromColor(t)},ShapeRenderer2.prototype.setColorWith=function(t,i,n,o){this.color.set(t,i,n,o)},ShapeRenderer2.prototype.point=function(t,i,o){void 0===o&&(o=null),this.check(n.Point,1),null===o&&(o=this.color),this.vertex(t,i,o)},ShapeRenderer2.prototype.line=function(t,i,o,a,u){void 0===u&&(u=null),this.check(n.Line,2),this.mesh.getVertices(),this.vertexIndex,null===u&&(u=this.color),this.vertex(t,i,u),this.vertex(o,a,u)},ShapeRenderer2.prototype.triangle=function(t,i,o,a,u,d,f,p,b,S){void 0===p&&(p=null),void 0===b&&(b=null),void 0===S&&(S=null),this.check(t?n.Filled:n.Line,3),this.mesh.getVertices(),this.vertexIndex,null===p&&(p=this.color),null===b&&(b=this.color),null===S&&(S=this.color),t?(this.vertex(i,o,p),this.vertex(a,u,b),this.vertex(d,f,S)):(this.vertex(i,o,p),this.vertex(a,u,b),this.vertex(a,u,p),this.vertex(d,f,b),this.vertex(d,f,p),this.vertex(i,o,b))},ShapeRenderer2.prototype.quad=function(t,i,o,a,u,d,f,p,b,S,M,C,P){void 0===S&&(S=null),void 0===M&&(M=null),void 0===C&&(C=null),void 0===P&&(P=null),this.check(t?n.Filled:n.Line,3),this.mesh.getVertices(),this.vertexIndex,null===S&&(S=this.color),null===M&&(M=this.color),null===C&&(C=this.color),null===P&&(P=this.color),t?(this.vertex(i,o,S),this.vertex(a,u,M),this.vertex(d,f,C),this.vertex(d,f,C),this.vertex(p,b,P),this.vertex(i,o,S)):(this.vertex(i,o,S),this.vertex(a,u,M),this.vertex(a,u,M),this.vertex(d,f,C),this.vertex(d,f,C),this.vertex(p,b,P),this.vertex(p,b,P),this.vertex(i,o,S))},ShapeRenderer2.prototype.rect=function(t,i,n,o,a,u){void 0===u&&(u=null),this.quad(t,i,n,i+o,n,i+o,n+a,i,n+a,u,u,u,u)},ShapeRenderer2.prototype.rectLine=function(t,i,o,a,u,d,f){void 0===f&&(f=null),this.check(t?n.Filled:n.Line,8),null===f&&(f=this.color);var p=this.tmp.set(u-o,i-a);p.normalize(),d*=.5;var b=p.x*d,S=p.y*d;t?(this.vertex(i+b,o+S,f),this.vertex(i-b,o-S,f),this.vertex(a+b,u+S,f),this.vertex(a-b,u-S,f),this.vertex(a+b,u+S,f),this.vertex(i-b,o-S,f)):(this.vertex(i+b,o+S,f),this.vertex(i-b,o-S,f),this.vertex(a+b,u+S,f),this.vertex(a-b,u-S,f),this.vertex(a+b,u+S,f),this.vertex(i+b,o+S,f),this.vertex(a-b,u-S,f),this.vertex(i-b,o-S,f))},ShapeRenderer2.prototype.x=function(t,i,n){this.line(t-n,i-n,t+n,i+n),this.line(t-n,i+n,t+n,i-n)},ShapeRenderer2.prototype.polygon=function(t,i,o,a){if(void 0===a&&(a=null),o<3)throw new Error("Polygon must contain at least 3 vertices");this.check(n.Line,2*o),null===a&&(a=this.color),this.mesh.getVertices(),this.vertexIndex,o<<=1;for(var u=t[i<<=1],d=t[i+1],f=i+o,p=i,b=i+o-2;p<b;p+=2){var S=t[p],M=t[p+1],C=0,P=0;p+2>=f?(C=u,P=d):(C=t[p+2],P=t[p+3]),this.vertex(S,M,a),this.vertex(C,P,a)}},ShapeRenderer2.prototype.circle=function(i,o,a,u,d,f){if(void 0===d&&(d=null),void 0===f&&(f=0),0===f&&(f=Math.max(1,6*t.MathUtils.cbrt(u)|0)),f<=0)throw new Error("segments must be > 0.");null===d&&(d=this.color);var p=2*t.MathUtils.PI/f,b=Math.cos(p),S=Math.sin(p),M=u,C=0;if(i){for(this.check(n.Filled,3*f+3),f--,R=0;R<f;R++){this.vertex(o,a,d),this.vertex(o+M,a+C,d);var P=M;M=b*M-S*C,C=S*P+b*C,this.vertex(o+M,a+C,d)}this.vertex(o,a,d),this.vertex(o+M,a+C,d)}else{this.check(n.Line,2*f+2);for(var R=0;R<f;R++){this.vertex(o+M,a+C,d);var O=M;M=b*M-S*C,C=S*O+b*C,this.vertex(o+M,a+C,d)}this.vertex(o+M,a+C,d)}M=u,C=0,this.vertex(o+M,a+C,d)},ShapeRenderer2.prototype.curve=function(t,i,o,a,u,d,f,p,b,S){void 0===S&&(S=null),this.check(n.Line,2*b+2),null===S&&(S=this.color);for(var M=1/b,C=M*M,P=M*M*M,R=3*M,O=3*C,B=6*C,N=6*P,Y=t-2*o+u,X=i-2*a+d,G=3*(o-u)-t+f,U=3*(a-d)-i+p,V=t,z=i,W=(o-t)*R+Y*O+G*P,H=(a-i)*R+X*O+U*P,j=Y*B+G*N,q=X*B+U*N,Z=G*N,K=U*N;b-- >0;)this.vertex(V,z,S),V+=W,z+=H,W+=j,H+=q,j+=Z,q+=K,this.vertex(V,z,S);this.vertex(V,z,S),this.vertex(f,p,S)},ShapeRenderer2.prototype.vertex=function(t,i,n){var o=this.vertexIndex,a=this.mesh.getVertices();a[o++]=t,a[o++]=i,a[o++]=n.r,a[o++]=n.g,a[o++]=n.b,a[o++]=n.a,this.vertexIndex=o},ShapeRenderer2.prototype.end=function(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush(),this.context.gl.disable(this.context.gl.BLEND),this.isDrawing=!1},ShapeRenderer2.prototype.flush=function(){0!=this.vertexIndex&&(this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0)},ShapeRenderer2.prototype.check=function(t,i){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==t){if(!(this.mesh.maxVertices()-this.mesh.numVertices()<i))return;this.flush()}else this.flush(),this.shapeType=t},ShapeRenderer2.prototype.dispose=function(){this.mesh.dispose()},ShapeRenderer2}(),i.ShapeRenderer=a,(o=n=i.ShapeType||(i.ShapeType={}))[o.Point=0]="Point",o[o.Line=1]="Line",o[o.Filled=4]="Filled"}(u||(u={})),function(t){var i,n;i=t.webgl||(t.webgl={}),n=function(){function SkeletonDebugRenderer2(n){this.boneLineColor=new t.Color(1,0,0,1),this.boneOriginColor=new t.Color(0,1,0,1),this.attachmentLineColor=new t.Color(0,0,1,.5),this.triangleLineColor=new t.Color(1,.64,0,.5),this.pathColor=(new t.Color).setFromString("FF7F00"),this.clipColor=new t.Color(.8,0,0,2),this.aabbColor=new t.Color(0,1,0,.5),this.drawBones=!0,this.drawRegionAttachments=!0,this.drawBoundingBoxes=!0,this.drawMeshHull=!0,this.drawMeshTriangles=!0,this.drawPaths=!0,this.drawSkeletonXY=!1,this.drawClipping=!0,this.premultipliedAlpha=!1,this.scale=1,this.boneWidth=2,this.bounds=new t.SkeletonBounds,this.temp=new Array,this.vertices=t.Utils.newFloatArray(2048),this.context=n instanceof i.ManagedWebGLRenderingContext?n:new i.ManagedWebGLRenderingContext(n)}return SkeletonDebugRenderer2.prototype.draw=function(i,n,o){void 0===o&&(o=null);var a=n.x,u=n.y,d=this.context.gl,f=this.premultipliedAlpha?d.ONE:d.SRC_ALPHA;i.setBlendMode(f,d.ONE_MINUS_SRC_ALPHA);var p=n.bones;if(this.drawBones){i.setColor(this.boneLineColor);for(var b=0,S=p.length;b<S;b++){var M=p[b];if(!(o&&o.indexOf(M.data.name)>-1)&&null!=M.parent){var C=a+M.data.length*M.a+M.worldX,P=u+M.data.length*M.c+M.worldY;i.rectLine(!0,a+M.worldX,u+M.worldY,C,P,this.boneWidth*this.scale)}}this.drawSkeletonXY&&i.x(a,u,4*this.scale)}if(this.drawRegionAttachments)for(i.setColor(this.attachmentLineColor),b=0,S=(ut=n.slots).length;b<S;b++)if((dt=(ct=ut[b]).getAttachment())instanceof t.RegionAttachment){var R=dt,O=this.vertices;R.computeWorldVertices(ct.bone,O,0,2),i.line(O[0],O[1],O[2],O[3]),i.line(O[2],O[3],O[4],O[5]),i.line(O[4],O[5],O[6],O[7]),i.line(O[6],O[7],O[0],O[1])}if(this.drawMeshHull||this.drawMeshTriangles)for(b=0,S=(ut=n.slots).length;b<S;b++)if((ct=ut[b]).bone.active&&(dt=ct.getAttachment())instanceof t.MeshAttachment){var B=dt;O=this.vertices,B.computeWorldVertices(ct,0,B.worldVerticesLength,O,0,2);var N=B.triangles,Y=B.hullLength;if(this.drawMeshTriangles){i.setColor(this.triangleLineColor);for(var X=0,G=N.length;X<G;X+=3){var U=2*N[X],V=2*N[X+1],z=2*N[X+2];i.triangle(!1,O[U],O[U+1],O[V],O[V+1],O[z],O[z+1])}}if(this.drawMeshHull&&Y>0){i.setColor(this.attachmentLineColor);var W=O[(Y=2*(Y>>1))-2],H=O[Y-1];for(X=0,G=Y;X<G;X+=2)C=O[X],P=O[X+1],i.line(C,P,W,H),W=C,H=P}}if(this.drawBoundingBoxes){var j=this.bounds;j.update(n,!0),i.setColor(this.aabbColor),i.rect(!1,j.minX,j.minY,j.getWidth(),j.getHeight());var q=j.polygons,Z=j.boundingBoxes;for(b=0,S=q.length;b<S;b++){var K=q[b];i.setColor(Z[b].color),i.polygon(K,0,K.length)}}if(this.drawPaths)for(b=0,S=(ut=n.slots).length;b<S;b++)if((ct=ut[b]).bone.active&&(dt=ct.getAttachment())instanceof t.PathAttachment){var $=dt,tt=(G=$.worldVerticesLength,this.temp=t.Utils.setArraySize(this.temp,G,0));$.computeWorldVertices(ct,0,G,tt,0,2);var et=this.pathColor,it=tt[2],nt=tt[3],st=0,rt=0;if($.closed){i.setColor(et);var ot=tt[0],at=tt[1],ht=tt[G-2],lt=tt[G-1];st=tt[G-4],rt=tt[G-3],i.curve(it,nt,ot,at,ht,lt,st,rt,32),i.setColor(SkeletonDebugRenderer2.LIGHT_GRAY),i.line(it,nt,ot,at),i.line(st,rt,ht,lt)}for(G-=4,X=4;X<G;X+=6)ot=tt[X],at=tt[X+1],ht=tt[X+2],lt=tt[X+3],st=tt[X+4],rt=tt[X+5],i.setColor(et),i.curve(it,nt,ot,at,ht,lt,st,rt,32),i.setColor(SkeletonDebugRenderer2.LIGHT_GRAY),i.line(it,nt,ot,at),i.line(st,rt,ht,lt),it=st,nt=rt}if(this.drawBones)for(i.setColor(this.boneOriginColor),b=0,S=p.length;b<S;b++)M=p[b],o&&o.indexOf(M.data.name)>-1||i.circle(!0,a+M.worldX,u+M.worldY,3*this.scale,SkeletonDebugRenderer2.GREEN,8);if(this.drawClipping){var ut=n.slots;for(i.setColor(this.clipColor),b=0,S=ut.length;b<S;b++){var ct,dt;if((ct=ut[b]).bone.active&&(dt=ct.getAttachment())instanceof t.ClippingAttachment){var ft=dt;G=ft.worldVerticesLength,tt=this.temp=t.Utils.setArraySize(this.temp,G,0),ft.computeWorldVertices(ct,0,G,tt,0,2);for(var pt=0,gt=tt.length;pt<gt;pt+=2)C=tt[pt],P=tt[pt+1],st=tt[(pt+2)%tt.length],rt=tt[(pt+3)%tt.length],i.line(C,P,st,rt)}}}},SkeletonDebugRenderer2.prototype.dispose=function(){},SkeletonDebugRenderer2.LIGHT_GRAY=new t.Color(192/255,192/255,192/255,1),SkeletonDebugRenderer2.GREEN=new t.Color(0,1,0,1),SkeletonDebugRenderer2}(),i.SkeletonDebugRenderer=n}(u||(u={})),function(t){var i,n,o;i=t.webgl||(t.webgl={}),n=function Renderable2(t,i,n){this.vertices=t,this.numVertices=i,this.numFloats=n},o=function(){function SkeletonRenderer2(i,o){void 0===o&&(o=!0),this.premultipliedAlpha=!1,this.vertexEffect=null,this.tempColor=new t.Color,this.tempColor2=new t.Color,this.vertexSize=8,this.twoColorTint=!1,this.renderable=new n(null,0,0),this.clipper=new t.SkeletonClipping,this.temp=new t.Vector2,this.temp2=new t.Vector2,this.temp3=new t.Color,this.temp4=new t.Color,this.twoColorTint=o,o&&(this.vertexSize+=4),this.vertices=t.Utils.newFloatArray(1024*this.vertexSize)}return SkeletonRenderer2.prototype.draw=function(n,o,a,u){void 0===a&&(a=-1),void 0===u&&(u=-1);var d=this.clipper,f=this.premultipliedAlpha,p=this.twoColorTint,b=null,S=this.temp,M=this.temp2,C=this.temp3,P=this.temp4,R=this.renderable,O=null,B=null,N=o.drawOrder,Y=null,X=o.color,G=p?12:8,U=!1;-1==a&&(U=!0);for(var V=0,z=N.length;V<z;V++){var W=d.isClipping()?2:G,H=N[V];if(H.bone.active)if(a>=0&&a==H.data.index&&(U=!0),U){u>=0&&u==H.data.index&&(U=!1);var j=H.getAttachment(),q=null;if(j instanceof t.RegionAttachment){var Z=j;R.vertices=this.vertices,R.numVertices=4,R.numFloats=W<<2,Z.computeWorldVertices(H.bone,R.vertices,0,W),B=SkeletonRenderer2.QUAD_TRIANGLES,O=Z.uvs,q=Z.region.renderObject.texture,Y=Z.color}else{if(!(j instanceof t.MeshAttachment)){if(j instanceof t.ClippingAttachment){var K=j;d.clipStart(H,K);continue}d.clipEndWithSlot(H);continue}var $=j;R.vertices=this.vertices,R.numVertices=$.worldVerticesLength>>1,R.numFloats=R.numVertices*W,R.numFloats>R.vertices.length&&(R.vertices=this.vertices=t.Utils.newFloatArray(R.numFloats)),$.computeWorldVertices(H,0,$.worldVerticesLength,R.vertices,0,W),B=$.triangles,q=$.region.renderObject.texture,O=$.uvs,Y=$.color}if(null!=q){var tt=H.color,et=this.tempColor;et.r=X.r*tt.r*Y.r,et.g=X.g*tt.g*Y.g,et.b=X.b*tt.b*Y.b,et.a=X.a*tt.a*Y.a,f&&(et.r*=et.a,et.g*=et.a,et.b*=et.a);var it=this.tempColor2;null==H.darkColor?it.set(0,0,0,1):(f?(it.r=H.darkColor.r*et.a,it.g=H.darkColor.g*et.a,it.b=H.darkColor.b*et.a):it.setFromColor(H.darkColor),it.a=f?1:0);var nt=H.data.blendMode;if(nt!=b&&(b=nt,n.setBlendMode(i.WebGLBlendModeConverter.getSourceGLBlendMode(b,f),i.WebGLBlendModeConverter.getDestGLBlendMode(b))),d.isClipping()){d.clipTriangles(R.vertices,R.numFloats,B,B.length,O,et,it,p);var st=new Float32Array(d.clippedVertices),rt=d.clippedTriangles;if(null!=this.vertexEffect){var ot=this.vertexEffect,at=st;if(p){lt=0;for(var ht=st.length;lt<ht;lt+=G)S.x=at[lt],S.y=at[lt+1],C.set(at[lt+2],at[lt+3],at[lt+4],at[lt+5]),M.x=at[lt+6],M.y=at[lt+7],P.set(at[lt+8],at[lt+9],at[lt+10],at[lt+11]),ot.transform(S,M,C,P),at[lt]=S.x,at[lt+1]=S.y,at[lt+2]=C.r,at[lt+3]=C.g,at[lt+4]=C.b,at[lt+5]=C.a,at[lt+6]=M.x,at[lt+7]=M.y,at[lt+8]=P.r,at[lt+9]=P.g,at[lt+10]=P.b,at[lt+11]=P.a}else for(var lt=0,ut=st.length;lt<ut;lt+=G)S.x=at[lt],S.y=at[lt+1],C.set(at[lt+2],at[lt+3],at[lt+4],at[lt+5]),M.x=at[lt+6],M.y=at[lt+7],P.set(0,0,0,0),ot.transform(S,M,C,P),at[lt]=S.x,at[lt+1]=S.y,at[lt+2]=C.r,at[lt+3]=C.g,at[lt+4]=C.b,at[lt+5]=C.a,at[lt+6]=M.x,at[lt+7]=M.y}n.draw(q,st,rt)}else{if(at=R.vertices,null!=this.vertexEffect)if(ot=this.vertexEffect,p){lt=0,dt=0;for(var ct=R.numFloats;lt<ct;lt+=G,dt+=2)S.x=at[lt],S.y=at[lt+1],M.x=O[dt],M.y=O[dt+1],C.setFromColor(et),P.setFromColor(it),ot.transform(S,M,C,P),at[lt]=S.x,at[lt+1]=S.y,at[lt+2]=C.r,at[lt+3]=C.g,at[lt+4]=C.b,at[lt+5]=C.a,at[lt+6]=M.x,at[lt+7]=M.y,at[lt+8]=P.r,at[lt+9]=P.g,at[lt+10]=P.b,at[lt+11]=P.a}else for(var lt=0,dt=0,ft=R.numFloats;lt<ft;lt+=G,dt+=2)S.x=at[lt],S.y=at[lt+1],M.x=O[dt],M.y=O[dt+1],C.setFromColor(et),P.set(0,0,0,0),ot.transform(S,M,C,P),at[lt]=S.x,at[lt+1]=S.y,at[lt+2]=C.r,at[lt+3]=C.g,at[lt+4]=C.b,at[lt+5]=C.a,at[lt+6]=M.x,at[lt+7]=M.y;else if(p){lt=2,dt=0;for(var pt=R.numFloats;lt<pt;lt+=G,dt+=2)at[lt]=et.r,at[lt+1]=et.g,at[lt+2]=et.b,at[lt+3]=et.a,at[lt+4]=O[dt],at[lt+5]=O[dt+1],at[lt+6]=it.r,at[lt+7]=it.g,at[lt+8]=it.b,at[lt+9]=it.a}else{lt=2;for(var dt=0,gt=R.numFloats;lt<gt;lt+=G,dt+=2)at[lt]=et.r,at[lt+1]=et.g,at[lt+2]=et.b,at[lt+3]=et.a,at[lt+4]=O[dt],at[lt+5]=O[dt+1]}var vt=R.vertices.subarray(0,R.numFloats);n.draw(q,vt,B)}}d.clipEndWithSlot(H)}else d.clipEndWithSlot(H);else d.clipEndWithSlot(H)}d.clipEnd()},SkeletonRenderer2.QUAD_TRIANGLES=[0,1,2,2,3,0],SkeletonRenderer2}(),i.SkeletonRenderer=o}(u||(u={})),function(t){var i,n;i=t.webgl||(t.webgl={}),n=function(){function Vector32(t,i,n){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=0,this.y=0,this.z=0,this.x=t,this.y=i,this.z=n}return Vector32.prototype.setFrom=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},Vector32.prototype.set=function(t,i,n){return this.x=t,this.y=i,this.z=n,this},Vector32.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},Vector32.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},Vector32.prototype.scale=function(t){return this.x*=t,this.y*=t,this.z*=t,this},Vector32.prototype.normalize=function(){var t=this.length();return 0==t||(t=1/t,this.x*=t,this.y*=t,this.z*=t),this},Vector32.prototype.cross=function(t){return this.set(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},Vector32.prototype.multiply=function(t){var n=t.values;return this.set(this.x*n[i.M00]+this.y*n[i.M01]+this.z*n[i.M02]+n[i.M03],this.x*n[i.M10]+this.y*n[i.M11]+this.z*n[i.M12]+n[i.M13],this.x*n[i.M20]+this.y*n[i.M21]+this.z*n[i.M22]+n[i.M23])},Vector32.prototype.project=function(t){var n=t.values,o=1/(this.x*n[i.M30]+this.y*n[i.M31]+this.z*n[i.M32]+n[i.M33]);return this.set((this.x*n[i.M00]+this.y*n[i.M01]+this.z*n[i.M02]+n[i.M03])*o,(this.x*n[i.M10]+this.y*n[i.M11]+this.z*n[i.M12]+n[i.M13])*o,(this.x*n[i.M20]+this.y*n[i.M21]+this.z*n[i.M22]+n[i.M23])*o)},Vector32.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},Vector32.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},Vector32.prototype.distance=function(t){var i=t.x-this.x,n=t.y-this.y,o=t.z-this.z;return Math.sqrt(i*i+n*n+o*o)},Vector32}(),i.Vector3=n}(u||(u={})),function(t){!function(i){var n=function(){function ManagedWebGLRenderingContext2(t,i){void 0===i&&(i={alpha:"true"}),this.restorables=new Array,t instanceof HTMLCanvasElement||t instanceof EventTarget?this.setupCanvas(t,i):(this.gl=t,this.canvas=this.gl.canvas)}return ManagedWebGLRenderingContext2.prototype.setupCanvas=function(t,i){var n=this;this.gl=t.getContext("webgl2",i)||t.getContext("webgl",i),this.canvas=t,t.addEventListener("webglcontextlost",(function(t){t&&t.preventDefault()})),t.addEventListener("webglcontextrestored",(function(t){for(var i=0,o=n.restorables.length;i<o;i++)n.restorables[i].restore()}))},ManagedWebGLRenderingContext2.prototype.addRestorable=function(t){this.restorables.push(t)},ManagedWebGLRenderingContext2.prototype.removeRestorable=function(t){var i=this.restorables.indexOf(t);i>-1&&this.restorables.splice(i,1)},ManagedWebGLRenderingContext2}();i.ManagedWebGLRenderingContext=n;var o=function(){function WebGLBlendModeConverter2(){}return WebGLBlendModeConverter2.getDestGLBlendMode=function(i){switch(i){case t.BlendMode.Normal:return WebGLBlendModeConverter2.ONE_MINUS_SRC_ALPHA;case t.BlendMode.Additive:return WebGLBlendModeConverter2.ONE;case t.BlendMode.Multiply:case t.BlendMode.Screen:return WebGLBlendModeConverter2.ONE_MINUS_SRC_ALPHA;default:throw new Error("Unknown blend mode: "+i)}},WebGLBlendModeConverter2.getSourceGLBlendMode=function(i,n){switch(void 0===n&&(n=!1),i){case t.BlendMode.Normal:case t.BlendMode.Additive:return n?WebGLBlendModeConverter2.ONE:WebGLBlendModeConverter2.SRC_ALPHA;case t.BlendMode.Multiply:return WebGLBlendModeConverter2.DST_COLOR;case t.BlendMode.Screen:return WebGLBlendModeConverter2.ONE;default:throw new Error("Unknown blend mode: "+i)}},WebGLBlendModeConverter2.ZERO=0,WebGLBlendModeConverter2.ONE=1,WebGLBlendModeConverter2.SRC_COLOR=768,WebGLBlendModeConverter2.ONE_MINUS_SRC_COLOR=769,WebGLBlendModeConverter2.SRC_ALPHA=770,WebGLBlendModeConverter2.ONE_MINUS_SRC_ALPHA=771,WebGLBlendModeConverter2.DST_ALPHA=772,WebGLBlendModeConverter2.ONE_MINUS_DST_ALPHA=773,WebGLBlendModeConverter2.DST_COLOR=774,WebGLBlendModeConverter2}();i.WebGLBlendModeConverter=o}(t.webgl||(t.webgl={}))}(u||(u={})),t.exports=u}).call(window)},function(t,i,n){var o=n(0),a=n(11),u=n(204),d=n(7),f=n(218),p=n(219),b=n(220),S=new o({Extends:p,initialize:function SpineFile2(t,i,n,o,u,S,M){var C,P,R,O=[],B=t.cacheManager.custom.spine;if(d(i)){var N=i;for(i=a(N,"key"),P=new f(t,{key:i,url:a(N,"jsonURL"),extension:a(N,"jsonExtension","json"),xhrSettings:a(N,"jsonXhrSettings")}),o=a(N,"atlasURL"),u=a(N,"preMultipliedAlpha"),Array.isArray(o)||(o=[o]),C=0;C<o.length;C++)(R=new b(t,{key:i+"!"+C,url:o[C],extension:a(N,"atlasExtension","atlas"),xhrSettings:a(N,"atlasXhrSettings")})).cache=B,O.push(R)}else for(P=new f(t,i,n,S),Array.isArray(o)||(o=[o]),C=0;C<o.length;C++)(R=new b(t,i+"!"+C,o[C],M)).cache=B,O.push(R);O.unshift(P),p.call(this,t,"spine",i,O),this.config.preMultipliedAlpha=u},onFileComplete:function(t){if(-1!==this.files.indexOf(t)&&(this.pending--,"text"===t.type)){for(var i=t.data.split("\n"),n=[],o=0;o<i.length;o++){var d=i[o];""===d.trim()&&o<i.length-1&&(d=i[o+1],n.push(d))}var f=this.config,p=this.loader,b=p.baseURL,S=p.path,M=p.prefix,C=a(f,"baseURL",this.baseURL),P=a(f,"path",t.src.match(/^.*\//))[0],R=a(f,"prefix",this.prefix),O=a(f,"textureXhrSettings");p.setBaseURL(C),p.setPath(P),p.setPrefix(R);for(var B=0;B<n.length;B++){var N=n[B],Y=new u(p,N,N,O);p.keyExists(Y)||(this.addToMultiFile(Y),p.addFile(Y))}p.setBaseURL(b),p.setPath(S),p.setPrefix(M)}},addToCache:function(){if(this.isReadyToProcess()){var t;this.files[0].addToCache();for(var i="",n="",o=!!this.config.preMultipliedAlpha,a=this.loader.textureManager,u=1;u<this.files.length;u++){var d=this.files[u];if("text"===d.type)i=d.key.replace(/![\d]$/,""),t=d.cache,n=n.concat(d.data);else{var f=d.key.trim(),p=f.indexOf("!"),b=f.substr(p+1);a.exists(b)||a.addImage(b,d.data)}d.pendingDestroy()}t.add(i,{preMultipliedAlpha:o,data:n,prefix:this.prefix}),this.complete=!0}}});t.exports=S},function(t,i,n){var o=n(0),a=n(15),u=n(21),d=n(22),f=n(11),p=n(7),b=new o({Extends:u,initialize:function ImageFile2(t,i,n,o,a){var d,b="png";if(p(i)){var S=i;i=f(S,"key"),n=f(S,"url"),d=f(S,"normalMap"),o=f(S,"xhrSettings"),b=f(S,"extension",b),a=f(S,"frameConfig")}Array.isArray(n)&&(d=n[1],n=n[0]);var M={type:"image",cache:t.textureManager,extension:b,responseType:"blob",key:i,url:n,xhrSettings:o,config:a};if(u.call(this,t,M),d){var C=new ImageFile2(t,this.key,d,o,a);C.type="normalMap",this.setLink(C),t.addFile(C)}},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var t=this;this.data.onload=function(){u.revokeObjectURL(t.data),t.onProcessComplete()},this.data.onerror=function(){u.revokeObjectURL(t.data),t.onProcessError()},u.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var t,i=this.linkFile;i&&i.state===a.FILE_COMPLETE?(t="image"===this.type?this.cache.addImage(this.key,this.data,i.data):this.cache.addImage(i.key,i.data,this.data),this.pendingDestroy(t),i.pendingDestroy(t)):i||(t=this.cache.addImage(this.key,this.data),this.pendingDestroy(t))}});d.register("image",(function(t,i,n){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new b(this,t[o]));else this.addFile(new b(this,t,i,n));return this})),t.exports=b},function(t,i,n){t.exports={ADD:n(206),COMPLETE:n(207),FILE_COMPLETE:n(208),FILE_KEY_COMPLETE:n(209),FILE_LOAD_ERROR:n(210),FILE_LOAD:n(211),FILE_PROGRESS:n(212),POST_PROCESS:n(213),PROGRESS:n(214),START:n(215)}},function(t,i){t.exports="addfile"},function(t,i){t.exports="complete"},function(t,i){t.exports="filecomplete"},function(t,i){t.exports="filecomplete-"},function(t,i){t.exports="loaderror"},function(t,i){t.exports="load"},function(t,i){t.exports="fileprogress"},function(t,i){t.exports="postprocess"},function(t,i){t.exports="progress"},function(t,i){t.exports="start"},function(t,i){t.exports=function(t,i){return!!t.url&&(t.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?t.url:i+t.url)}},function(t,i,n){var o=n(45);t.exports=function(t,i){var n=o(i,t.xhrSettings),a=new XMLHttpRequest;if(a.open("GET",t.src,n.async,n.user,n.password),a.responseType=t.xhrSettings.responseType,a.timeout=n.timeout,n.headers)for(var u in n.headers)a.setRequestHeader(u,n.headers[u]);return n.header&&n.headerValue&&a.setRequestHeader(n.header,n.headerValue),n.requestedWith&&a.setRequestHeader("X-Requested-With",n.requestedWith),n.overrideMimeType&&a.overrideMimeType(n.overrideMimeType),n.withCredentials&&(a.withCredentials=!0),a.onload=t.onLoad.bind(t,a),a.onerror=t.onError.bind(t,a),a.onprogress=t.onProgress.bind(t),a.send(),a}},function(t,i,n){var o=n(0),a=n(15),u=n(21),d=n(22),f=n(11),p=n(10),b=n(7),S=new o({Extends:u,initialize:function JSONFile2(t,i,n,o,d){var S="json";if(b(i)){var M=i;i=f(M,"key"),n=f(M,"url"),o=f(M,"xhrSettings"),S=f(M,"extension",S),d=f(M,"dataKey",d)}var C={type:"json",cache:t.cacheManager.json,extension:S,responseType:"text",key:i,url:n,xhrSettings:o,config:d};u.call(this,t,C),b(n)&&(this.data=d?p(n,d):n,this.state=a.FILE_POPULATED)},onProcess:function(){if(this.state!==a.FILE_POPULATED){this.state=a.FILE_PROCESSING;try{var t=JSON.parse(this.xhrLoader.responseText)}catch(n){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),n}var i=this.config;this.data="string"==typeof i?p(t,i,t):t}this.onProcessComplete()}});d.register("json",(function(t,i,n,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new S(this,t[a]));else this.addFile(new S(this,t,i,o,n));return this})),t.exports=S},function(t,i,n){var o=new(n(0))({initialize:function MultiFile2(t,i,n,o){var a=[];o.forEach((function(t){t&&a.push(t)})),this.loader=t,this.type=i,this.key=n,this.multiKeyIndex=t.multiKeyIndex++,this.files=a,this.complete=!1,this.pending=a.length,this.failed=0,this.config={},this.baseURL=t.baseURL,this.path=t.path,this.prefix=t.prefix;for(var u=0;u<a.length;u++)a[u].multiFile=this},isReadyToProcess:function(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function(t){return this.files.push(t),t.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(t){-1!==this.files.indexOf(t)&&this.pending--},onFileFailed:function(t){-1!==this.files.indexOf(t)&&this.failed++}});t.exports=o},function(t,i,n){var o=n(0),a=n(15),u=n(21),d=n(22),f=n(11),p=n(7),b=new o({Extends:u,initialize:function TextFile2(t,i,n,o){var a="text",d="txt",b=t.cacheManager.text;if(p(i)){var S=i;i=f(S,"key"),n=f(S,"url"),o=f(S,"xhrSettings"),d=f(S,"extension",d),a=f(S,"type",a),b=f(S,"cache",b)}var M={type:a,cache:b,extension:d,responseType:"text",key:i,url:n,xhrSettings:o};u.call(this,t,M)},onProcess:function(){this.state=a.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});d.register("text",(function(t,i,n){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new b(this,t[o]));else this.addFile(new b(this,t,i,n));return this})),t.exports=b},function(t,i,n){var o=n(28),a=n(3),u=n(0),d=n(47),f=n(48),p=n(49),b=n(50),S=n(51),M=n(52),C=n(8),P=n(19),R=n(53),O=n(9),B=n(243),N=n(250),Y=new u({Extends:R,Mixins:[d,f,p,b,S,M,N],initialize:function SpineGameObject2(t,i,n,o,a,u,d){R.call(this,t,"Spine"),this.plugin=i,this.skeleton=null,this.skeletonData=null,this.state=null,this.stateData=null,this.root=null,this.bounds=null,this.drawDebug=!1,this.timeScale=1,this.displayOriginX=0,this.displayOriginY=0,this.preMultipliedAlpha=!1,this.blendMode=-1,this.setPosition(n,o),a&&this.setSkeleton(a,u,d)},willRender:function(t,i){var n=!this.skeleton||!(15!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id);if(!i&&!n&&this.parentContainer){var o=this.plugin,a=o.sceneRenderer;o.gl&&a.batcher.isDrawing&&(a.end(),o.renderer.pipelines.rebind())}return n},setAlpha:function(t,i){if(void 0===t&&(t=1),i){var n=this.findSlot(i);n&&(n.color.a=a(t,0,1))}else this.alpha=t;return this},alpha:{get:function(){return this.skeleton.color.a},set:function(t){var i=a(t,0,1);this.skeleton&&(this.skeleton.color.a=i),0===i?this.renderFlags&=-3:this.renderFlags|=2}},red:{get:function(){return this.skeleton.color.r},set:function(t){var i=a(t,0,1);this.skeleton&&(this.skeleton.color.r=i)}},green:{get:function(){return this.skeleton.color.g},set:function(t){var i=a(t,0,1);this.skeleton&&(this.skeleton.color.g=i)}},blue:{get:function(){return this.skeleton.color.b},set:function(t){var i=a(t,0,1);this.skeleton&&(this.skeleton.color.b=i)}},setColor:function(t,i){void 0===t&&(t=16777215);var n=(t>>16&255)/255,o=(t>>8&255)/255,a=(255&t)/255,u=t>16777215?(t>>>24)/255:null,d=this.skeleton;if(i){var f=this.findSlot(i);f&&(d=f)}return d.color.r=n,d.color.g=o,d.color.b=a,null!==u&&(d.color.a=u),this},setSkeletonFromJSON:function(t,i,n,o){return this.setSkeleton(t,i,n,o)},setSkeleton:function(t,i,n,o){this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications());var a=this.plugin.createSkeleton(t,o);this.skeletonData=a.skeletonData,this.preMultipliedAlpha=a.preMultipliedAlpha;var u=a.skeleton;return u.setSkin(),u.setToSetupPose(),this.skeleton=u,a=this.plugin.createAnimationState(u),this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications()),this.state=a.state,this.stateData=a.stateData,this.state.addListener({event:this.onEvent.bind(this),complete:this.onComplete.bind(this),start:this.onStart.bind(this),end:this.onEnd.bind(this),dispose:this.onDispose.bind(this),interrupted:this.onInterrupted.bind(this)}),i&&this.setAnimation(0,i,n),this.root=this.getRootBone(),this.root&&(this.root.rotation=O(C(this.rotation))+90),this.state.apply(u),u.updateCache(),this.updateSize()},onComplete:function(t){this.emit(B.COMPLETE,t)},onDispose:function(t){this.emit(B.DISPOSE,t)},onEnd:function(t){this.emit(B.END,t)},onEvent:function(t,i){this.emit(B.EVENT,t,i)},onInterrupted:function(t){this.emit(B.INTERRUPTED,t)},onStart:function(t){this.emit(B.START,t)},refresh:function(){return this.root&&(this.root.rotation=O(C(this.rotation))+90),this.updateSize(),this.skeleton.updateCache(),this},setSize:function(t,i,n,o){var a=this.skeleton;return void 0===t&&(t=a.data.width),void 0===i&&(i=a.data.height),void 0===n&&(n=0),void 0===o&&(o=0),this.width=t,this.height=i,this.displayOriginX=a.x-n,this.displayOriginY=a.y-o,this},setOffset:function(t,i){var n=this.skeleton;return void 0===t&&(t=0),void 0===i&&(i=0),this.displayOriginX=n.x-t,this.displayOriginY=n.y-i,this},updateSize:function(){var t=this.skeleton,i=this.plugin.renderer.height,n=this.scaleX,o=this.scaleY;t.x=this.x,t.y=i-this.y,t.scaleX=1,t.scaleY=1,t.updateWorldTransform();var a=this.getBounds();return this.width=a.size.x,this.height=a.size.y,this.displayOriginX=this.x-a.offset.x,this.displayOriginY=this.y-(i-(this.height+a.offset.y)),t.scaleX=n,t.scaleY=o,t.updateWorldTransform(),this},scaleX:{get:function(){return this._scaleX},set:function(t){this._scaleX=t,this.refresh()}},scaleY:{get:function(){return this._scaleY},set:function(t){this._scaleY=t,this.refresh()}},getBoneList:function(){var t=[],i=this.skeletonData;if(i)for(var n=0;n<i.bones.length;n++)t.push(i.bones[n].name);return t},getSkinList:function(){var t=[],i=this.skeletonData;if(i)for(var n=0;n<i.skins.length;n++)t.push(i.skins[n].name);return t},getSlotList:function(){for(var t=[],i=this.skeleton,n=0;n<i.slots.length;n++)t.push(i.slots[n].data.name);return t},getAnimationList:function(){var t=[],i=this.skeletonData;if(i)for(var n=0;n<i.animations.length;n++)t.push(i.animations[n].name);return t},getCurrentAnimation:function(t){void 0===t&&(t=0);var i=this.state.getCurrent(t);if(i)return i.animation},play:function(t,i,n){return this.setAnimation(0,t,i,n),this},setAnimation:function(t,i,n,o){if(void 0===n&&(n=!1),void 0===o&&(o=!1),o&&this.state){var a=this.state.getCurrent(t);if(a&&a.animation.name===i&&!a.isComplete())return}if(this.findAnimation(i))return this.state.setAnimation(t,i,n)},addAnimation:function(t,i,n,o){return void 0===n&&(n=!1),void 0===o&&(o=0),this.state.addAnimation(t,i,n,o)},setEmptyAnimation:function(t,i){return this.state.setEmptyAnimation(t,i)},clearTrack:function(t){return this.state.clearTrack(t),this},clearTracks:function(){return this.state.clearTracks(),this},setSkinByName:function(t){var i=this.skeleton;return i.setSkinByName(t),i.setSlotsToSetupPose(),this.state.apply(i),this},setSkin:function(t){var i=this.skeleton;return i.setSkin(t),i.setSlotsToSetupPose(),this.state.apply(i),this},setMix:function(t,i,n){return this.stateData.setMix(t,i,n),this},getAttachment:function(t,i){return this.skeleton.getAttachment(t,i)},getAttachmentByName:function(t,i){return this.skeleton.getAttachmentByName(t,i)},setAttachment:function(t,i){if(Array.isArray(t)&&Array.isArray(i)&&t.length===i.length)for(var n=0;n<t.length;n++)this.skeleton.setAttachment(t[n],i[n]);else this.skeleton.setAttachment(t,i);return this},setToSetupPose:function(){return this.skeleton.setToSetupPose(),this},setSlotsToSetupPose:function(){return this.skeleton.setSlotsToSetupPose(),this},setBonesToSetupPose:function(){return this.skeleton.setBonesToSetupPose(),this},getRootBone:function(){return this.skeleton.getRootBone()},angleBoneToXY:function(t,i,n,u,d,f){void 0===u&&(u=0),void 0===d&&(d=0),void 0===f&&(f=360);var p=this.plugin.renderer.height,b=C(o(t.worldX,p-t.worldY,i,n)+P(u));return t.rotation=a(O(b),d,f),this},findBone:function(t){return this.skeleton.findBone(t)},findBoneIndex:function(t){return this.skeleton.findBoneIndex(t)},findSlot:function(t){return this.skeleton.findSlot(t)},findSlotIndex:function(t){return this.skeleton.findSlotIndex(t)},findSkin:function(t){return this.skeletonData.findSkin(t)},findEvent:function(t){return this.skeletonData.findEvent(t)},findAnimation:function(t){return this.skeletonData.findAnimation(t)},findIkConstraint:function(t){return this.skeletonData.findIkConstraint(t)},findTransformConstraint:function(t){return this.skeletonData.findTransformConstraint(t)},findPathConstraint:function(t){return this.skeletonData.findPathConstraint(t)},findPathConstraintIndex:function(t){return this.skeletonData.findPathConstraintIndex(t)},getBounds:function(){return this.plugin.getBounds(this.skeleton)},preUpdate:function(t,i){var n=this.skeleton;this.state.update(i/1e3*this.timeScale),this.state.apply(n)},preDestroy:function(){this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications()),this.plugin=null,this.skeleton=null,this.skeletonData=null,this.state=null,this.stateData=null}});t.exports=Y},function(t,i,n){var o=n(0),a=n(223),u=new o({initialize:function DataManager2(t,i){this.parent=t,this.events=i,i||(this.events=t.events?t.events:t),this.list={},this.values={},this._frozen=!1,!t.hasOwnProperty("sys")&&this.events&&this.events.once(a.DESTROY,this.destroy,this)},get:function(t){var i=this.list;if(Array.isArray(t)){for(var n=[],o=0;o<t.length;o++)n.push(i[t[o]]);return n}return i[t]},getAll:function(){var t={};for(var i in this.list)this.list.hasOwnProperty(i)&&(t[i]=this.list[i]);return t},query:function(t){var i={};for(var n in this.list)this.list.hasOwnProperty(n)&&n.match(t)&&(i[n]=this.list[n]);return i},set:function(t,i){if(this._frozen)return this;if("string"==typeof t)return this.setValue(t,i);for(var n in t)this.setValue(n,t[n]);return this},inc:function(t,i){if(this._frozen)return this;void 0===i&&(i=1);var n=this.get(t);return void 0===n&&(n=0),this.set(t,n+i),this},toggle:function(t){return this._frozen||this.set(t,!this.get(t)),this},setValue:function(t,i){if(this._frozen)return this;if(this.has(t))this.values[t]=i;else{var n=this,o=this.list,u=this.events,d=this.parent;Object.defineProperty(this.values,t,{enumerable:!0,configurable:!0,get:function(){return o[t]},set:function(i){if(!n._frozen){var f=o[t];o[t]=i,u.emit(a.CHANGE_DATA,d,t,i,f),u.emit(a.CHANGE_DATA_KEY+t,d,i,f)}}}),o[t]=i,u.emit(a.SET_DATA,d,t,i)}return this},each:function(t,i){for(var n=[this.parent,null,void 0],o=1;o<arguments.length;o++)n.push(arguments[o]);for(var a in this.list)n[1]=a,n[2]=this.list[a],t.apply(i,n);return this},merge:function(t,i){for(var n in void 0===i&&(i=!0),t)t.hasOwnProperty(n)&&(i||!i&&!this.has(n))&&this.setValue(n,t[n]);return this},remove:function(t){if(this._frozen)return this;if(!Array.isArray(t))return this.removeValue(t);for(var i=0;i<t.length;i++)this.removeValue(t[i]);return this},removeValue:function(t){if(this.has(t)){var i=this.list[t];delete this.list[t],delete this.values[t],this.events.emit(a.REMOVE_DATA,this.parent,t,i)}return this},pop:function(t){var i=void 0;return!this._frozen&&this.has(t)&&(i=this.list[t],delete this.list[t],delete this.values[t],this.events.emit(a.REMOVE_DATA,this.parent,t,i)),i},has:function(t){return this.list.hasOwnProperty(t)},setFreeze:function(t){return this._frozen=t,this},reset:function(){for(var t in this.list)delete this.list[t],delete this.values[t];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(a.CHANGE_DATA),this.events.off(a.SET_DATA),this.events.off(a.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(t){this._frozen=!!t}},count:{get:function(){var t=0;for(var i in this.list)void 0!==this.list[i]&&t++;return t}}});t.exports=u},function(t,i,n){t.exports={CHANGE_DATA:n(224),CHANGE_DATA_KEY:n(225),DESTROY:n(226),REMOVE_DATA:n(227),SET_DATA:n(228)}},function(t,i){t.exports="changedata"},function(t,i){t.exports="changedata-"},function(t,i){t.exports="destroy"},function(t,i){t.exports="removedata"},function(t,i){t.exports="setdata"},function(t,i,n){var o=Object.prototype.hasOwnProperty,a="~";function Events(){}function EE2(t,i,n){this.fn=t,this.context=i,this.once=n||!1}function addListener(t,i,n,o,u){if("function"!=typeof n)throw new TypeError("The listener must be a function");var d=new EE2(n,o||t,u),f=a?a+i:i;return t._events[f]?t._events[f].fn?t._events[f]=[t._events[f],d]:t._events[f].push(d):(t._events[f]=d,t._eventsCount++),t}function clearEvent(t,i){0==--t._eventsCount?t._events=new Events:delete t._events[i]}function EventEmitter2(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(a=!1)),EventEmitter2.prototype.eventNames=function eventNames(){var t,i,n=[];if(0===this._eventsCount)return n;for(i in t=this._events)o.call(t,i)&&n.push(a?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},EventEmitter2.prototype.listeners=function listeners(t){var i=a?a+t:t,n=this._events[i];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,u=n.length,d=new Array(u);o<u;o++)d[o]=n[o].fn;return d},EventEmitter2.prototype.listenerCount=function listenerCount(t){var i=a?a+t:t,n=this._events[i];return n?n.fn?1:n.length:0},EventEmitter2.prototype.emit=function emit(t,i,n,o,u,d){var f=a?a+t:t;if(!this._events[f])return!1;var p,b,S=this._events[f],M=arguments.length;if(S.fn){switch(S.once&&this.removeListener(t,S.fn,void 0,!0),M){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,i),!0;case 3:return S.fn.call(S.context,i,n),!0;case 4:return S.fn.call(S.context,i,n,o),!0;case 5:return S.fn.call(S.context,i,n,o,u),!0;case 6:return S.fn.call(S.context,i,n,o,u,d),!0}for(b=1,p=new Array(M-1);b<M;b++)p[b-1]=arguments[b];S.fn.apply(S.context,p)}else{var C,P=S.length;for(b=0;b<P;b++)switch(S[b].once&&this.removeListener(t,S[b].fn,void 0,!0),M){case 1:S[b].fn.call(S[b].context);break;case 2:S[b].fn.call(S[b].context,i);break;case 3:S[b].fn.call(S[b].context,i,n);break;case 4:S[b].fn.call(S[b].context,i,n,o);break;default:if(!p)for(C=1,p=new Array(M-1);C<M;C++)p[C-1]=arguments[C];S[b].fn.apply(S[b].context,p)}}return!0},EventEmitter2.prototype.on=function on(t,i,n){return addListener(this,t,i,n,!1)},EventEmitter2.prototype.once=function once(t,i,n){return addListener(this,t,i,n,!0)},EventEmitter2.prototype.removeListener=function removeListener(t,i,n,o){var u=a?a+t:t;if(!this._events[u])return this;if(!i)return clearEvent(this,u),this;var d=this._events[u];if(d.fn)d.fn!==i||o&&!d.once||n&&d.context!==n||clearEvent(this,u);else{for(var f=0,p=[],b=d.length;f<b;f++)(d[f].fn!==i||o&&!d[f].once||n&&d[f].context!==n)&&p.push(d[f]);p.length?this._events[u]=1===p.length?p[0]:p:clearEvent(this,u)}return this},EventEmitter2.prototype.removeAllListeners=function removeAllListeners(t){var i;return t?(i=a?a+t:t,this._events[i]&&clearEvent(this,i)):(this._events=new Events,this._eventsCount=0),this},EventEmitter2.prototype.off=EventEmitter2.prototype.removeListener,EventEmitter2.prototype.addListener=EventEmitter2.prototype.on,EventEmitter2.prefixed=a,EventEmitter2.EventEmitter=EventEmitter2,t.exports=EventEmitter2},function(t,i){t.exports="addedtoscene"},function(t,i){t.exports="destroy"},function(t,i){t.exports="removedfromscene"},function(t,i){t.exports="complete"},function(t,i){t.exports="created"},function(t,i){t.exports="error"},function(t,i){t.exports="loop"},function(t,i){t.exports="play"},function(t,i){t.exports="seeked"},function(t,i){t.exports="seeking"},function(t,i){t.exports="stop"},function(t,i){t.exports="timeout"},function(t,i){t.exports="unlocked"},function(t,i,n){t.exports={COMPLETE:n(244),DISPOSE:n(245),END:n(246),EVENT:n(247),INTERRUPTED:n(248),START:n(249)}},function(t,i){t.exports="complete"},function(t,i){t.exports="dispose"},function(t,i){t.exports="end"},function(t,i){t.exports="event"},function(t,i){t.exports="interrupted"},function(t,i){t.exports="start"},function(t,i,n){var o=n(1),a=n(1),u=n(1);o=n(251),u=n(252),a=n(253),t.exports={renderWebGL:o,renderCanvas:a,renderDirect:u}},function(t,i,n){var o=n(3),a=n(8),u=n(56),d=n(9),f=n(6);t.exports=function(t,i,n,p,b){var S=i.plugin,M=i.skeleton,C=S.sceneRenderer;t.newType&&(t.pipelines.clear(),C.begin());var P=i.scrollFactorX,R=i.scrollFactorY,O=M.color.a;b&&(i.scrollFactorX=b.scrollFactorX,i.scrollFactorY=b.scrollFactorY,M.color.a=o(O*b.alpha,0,1)),n.addToRenderList(i);var B=u(i,n,p).calc,N=t.height;if(M.x=B.tx,M.y=N-B.ty,M.scaleX=B.scaleX,M.scaleY=B.scaleY,i.scaleX<0?(M.scaleX*=-1,i.root.rotation=f(d(B.rotationNormalized)-180,0,360)):i.root.rotation=f(d(a(B.rotationNormalized))+90,0,360),i.scaleY<0&&(M.scaleY*=-1,i.scaleX<0?i.root.rotation-=2*d(B.rotationNormalized):i.root.rotation+=2*d(B.rotationNormalized)),M.updateWorldTransform(),C.drawSkeleton(M,i.preMultipliedAlpha),b&&(i.scrollFactorX=P,i.scrollFactorY=R,M.color.a=O),S.drawDebug||i.drawDebug){var Y=M.x,X=M.y;M.x=0,M.y=0,C.drawSkeletonDebug(M,i.preMultipliedAlpha),M.x=Y,M.y=X}t.nextTypeMatch||(C.end(),t.pipelines.rebind())}},function(t,i,n){var o=n(3),a=n(8),u=n(56),d=n(9),f=n(6);t.exports=function(t,i,n,p,b){var S=i.plugin,M=i.skeleton,C=S.sceneRenderer;t.pipelines.clear(),C.begin();var P=i.scrollFactorX,R=i.scrollFactorY,O=M.color.a;b&&(i.scrollFactorX=b.scrollFactorX,i.scrollFactorY=b.scrollFactorY,M.color.a=o(O*b.alpha,0,1)),n.addToRenderList(i);var B=u(i,n,p).calc,N=t.height;if(M.x=B.tx,M.y=N-B.ty,M.scaleX=B.scaleX,M.scaleY=B.scaleY,i.scaleX<0?(M.scaleX*=-1,i.root.rotation=f(d(B.rotationNormalized)-180,0,360)):i.root.rotation=f(d(a(B.rotationNormalized))+90,0,360),i.scaleY<0&&(M.scaleY*=-1,i.scaleX<0?i.root.rotation-=2*d(B.rotationNormalized):i.root.rotation+=2*d(B.rotationNormalized)),M.updateWorldTransform(),C.drawSkeleton(M,i.preMultipliedAlpha),b&&(i.scrollFactorX=P,i.scrollFactorY=R,M.color.a=O),S.drawDebug||i.drawDebug){var Y=M.x,X=M.y;M.x=0,M.y=0,C.drawSkeletonDebug(M,i.preMultipliedAlpha),M.x=Y,M.y=X}C.end(),t.pipelines.rebind()}},function(t,i,n){var o=n(8),a=n(9),u=n(6);t.exports=function(t,i,n,d){var f=t.currentContext,p=i.plugin,b=i.skeleton,S=p.skeletonRenderer,M=t._tempMatrix1,C=t._tempMatrix2,P=t._tempMatrix3;n.addToRenderList(i),C.applyITRS(i.x,i.y,i.rotation,Math.abs(i.scaleX),Math.abs(i.scaleY)),M.copyFrom(n.matrix),d?(M.multiplyWithOffset(d,-n.scrollX*i.scrollFactorX,-n.scrollY*i.scrollFactorY),C.e=i.x,C.f=i.y,M.multiply(C,P)):(C.e-=n.scrollX*i.scrollFactorX,C.f-=n.scrollY*i.scrollFactorY,M.multiply(C,P)),b.x=P.tx,b.y=P.ty,b.scaleX=P.scaleX,b.scaleY=-1*P.scaleY,i.scaleX<0?(b.scaleX*=-1,i.root.rotation=a(P.rotationNormalized)):i.root.rotation=u(a(o(P.rotationNormalized))+90,0,360),i.scaleY<0&&(b.scaleY*=-1,i.scaleX<0?i.root.rotation-=2*a(P.rotationNormalized):i.root.rotation+=2*a(P.rotationNormalized)),n.renderToTexture&&(b.y=P.ty,b.scaleY*=-1),b.updateWorldTransform(),S.ctx=f,S.debugRendering=p.drawDebug||i.drawDebug,f.save(),S.draw(b),f.restore()}},function(t,i,n){var o=n(0),a=n(255),u=n(347),d=new o({Extends:a,Mixins:[u],initialize:function SpineContainer2(t,i,n,o,u){a.call(this,t,n,o,u),this.type="Spine",this.plugin=i},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[],this._displayList=null,this.plugin=null}});t.exports=d},function(t,i,n){var o=n(256),a=n(17),u=n(0),d=n(293),f=n(55),p=n(53),b=n(25),S=n(343),M=n(346),C=n(2),P=new u({Extends:p,Mixins:[d.AlphaSingle,d.BlendMode,d.ComputedSize,d.Depth,d.Mask,d.Pipeline,d.Transform,d.Visible,S],initialize:function Container2(t,i,n,o){p.call(this,t,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new d.TransformMatrix,this.tempTransformMatrix=new d.TransformMatrix,this._sortKey="",this._sysEvents=t.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(i,n),this.clearAlpha(),this.setBlendMode(a.SKIP_CHECK),o&&this.add(o)},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return.5*this.width}},displayOriginY:{get:function(){return.5*this.height}},setExclusive:function(t){return void 0===t&&(t=!0),this.exclusive=t,this},getBounds:function(t){if(void 0===t&&(t=new b),t.setTo(this.x,this.y,0,0),this.parentContainer){var i=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y);t.setTo(i.x,i.y,0,0)}if(this.list.length>0){var n=this.list,o=new b,a=!1;t.setEmpty();for(var u=0;u<n.length;u++){var d=n[u];d.getBounds&&(d.getBounds(o),a?M(o,t,t):(t.setTo(o.x,o.y,o.width,o.height),a=!0))}}return t},addHandler:function(t){t.once(f.DESTROY,this.remove,this),this.exclusive&&(t.parentContainer&&t.parentContainer.remove(t),t.removeFromDisplayList(),t.parentContainer=this)},removeHandler:function(t){t.off(f.DESTROY,this.remove),this.exclusive&&(t.parentContainer=null,t.addToDisplayList())},pointToContainer:function(t,i){void 0===i&&(i=new C),this.parentContainer?this.parentContainer.pointToContainer(t,i):i=new C(t.x,t.y);var n=this.tempTransformMatrix;return n.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),n.invert(),n.transformPoint(t.x,t.y,i),i},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(t){return o.Add(this.list,t,this.maxSize,this.addHandler,this),this},addAt:function(t,i){return o.AddAt(this.list,t,i,this.maxSize,this.addHandler,this),this},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,i){return t?(void 0===i&&(i=function(i,n){return i[t]-n[t]}),o.StableSort(this.list,i),this):this},getByName:function(t){return o.GetFirst(this.list,"name",t)},getRandom:function(t,i){return o.GetRandom(this.list,t,i)},getFirst:function(t,i,n,a){return o.GetFirst(this.list,t,i,n,a)},getAll:function(t,i,n,a){return o.GetAll(this.list,t,i,n,a)},count:function(t,i,n,a){return o.CountAllMatching(this.list,t,i,n,a)},swap:function(t,i){return o.Swap(this.list,t,i),this},moveTo:function(t,i){return o.MoveTo(this.list,t,i),this},remove:function(t,i){var n=o.Remove(this.list,t,this.removeHandler,this);if(i&&n){Array.isArray(n)||(n=[n]);for(var a=0;a<n.length;a++)n[a].destroy()}return this},removeAt:function(t,i){var n=o.RemoveAt(this.list,t,this.removeHandler,this);return i&&n&&n.destroy(),this},removeBetween:function(t,i,n){var a=o.RemoveBetween(this.list,t,i,this.removeHandler,this);if(n)for(var u=0;u<a.length;u++)a[u].destroy();return this},removeAll:function(t){var i=o.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(t)for(var n=0;n<i.length;n++)i[n].destroy();return this},bringToTop:function(t){return o.BringToTop(this.list,t),this},sendToBack:function(t){return o.SendToBack(this.list,t),this},moveUp:function(t){return o.MoveUp(this.list,t),this},moveDown:function(t){return o.MoveDown(this.list,t),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return o.Shuffle(this.list),this},replace:function(t,i,n){return o.Replace(this.list,t,i)&&(this.addHandler(i),this.removeHandler(t),n&&t.destroy()),this},exists:function(t){return this.list.indexOf(t)>-1},setAll:function(t,i,n,a){return o.SetAll(this.list,t,i,n,a),this},each:function(t,i){var n,o=[null],a=this.list.slice(),u=a.length;for(n=2;n<arguments.length;n++)o.push(arguments[n]);for(n=0;n<u;n++)o[0]=a[n],t.apply(i,o);return this},iterate:function(t,i){var n,o=[null];for(n=2;n<arguments.length;n++)o.push(arguments[n]);for(n=0;n<this.list.length;n++)o[0]=this.list[n],t.apply(i,o);return this},setScrollFactor:function(t,i,n){return void 0===i&&(i=t),void 0===n&&(n=!1),this.scrollFactorX=t,this.scrollFactorY=i,n&&(o.SetAll(this.list,"scrollFactorX",t),o.SetAll(this.list,"scrollFactorY",i)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});t.exports=P},function(t,i,n){t.exports={Matrix:n(257),Add:n(266),AddAt:n(267),BringToTop:n(268),CountAllMatching:n(269),Each:n(270),EachInRange:n(271),FindClosestInSorted:n(272),GetAll:n(273),GetFirst:n(274),GetRandom:n(275),MoveDown:n(276),MoveTo:n(277),MoveUp:n(278),NumberArray:n(279),NumberArrayStep:n(280),QuickSelect:n(281),Range:n(282),Remove:n(283),RemoveAt:n(284),RemoveBetween:n(285),RemoveRandomElement:n(286),Replace:n(287),RotateLeft:n(58),RotateRight:n(59),SafeRange:n(5),SendToBack:n(288),SetAll:n(289),Shuffle:n(60),SortByDigits:n(290),SpliceOne:n(12),StableSort:n(291),Swap:n(292)}},function(t,i,n){t.exports={CheckMatrix:n(24),MatrixToString:n(258),ReverseColumns:n(260),ReverseRows:n(261),Rotate180:n(262),RotateLeft:n(263),RotateMatrix:n(16),RotateRight:n(264),Translate:n(265),TransposeMatrix:n(57)}},function(t,i,n){var o=n(259),a=n(24);t.exports=function(t){var i="";if(!a(t))return i;for(var n=0;n<t.length;n++){for(var u=0;u<t[n].length;u++){var d=t[n][u].toString();i+="undefined"!==d?o(d,2):"?",u<t[n].length-1&&(i+=" |")}if(n<t.length-1){i+="\n";for(var f=0;f<t[n].length;f++)i+="---",f<t[n].length-1&&(i+="+");i+="\n"}}return i}},function(t,i){t.exports=function(t,i,n,o){void 0===i&&(i=0),void 0===n&&(n=" "),void 0===o&&(o=3);var a=0;if(i+1>=(t=t.toString()).length)switch(o){case 1:t=new Array(i+1-t.length).join(n)+t;break;case 3:var u=Math.ceil((a=i-t.length)/2);t=new Array(a-u+1).join(n)+t+new Array(u+1).join(n);break;default:t+=new Array(i+1-t.length).join(n)}return t}},function(t,i){t.exports=function(t){return t.reverse()}},function(t,i){t.exports=function(t){for(var i=0;i<t.length;i++)t[i].reverse();return t}},function(t,i,n){var o=n(16);t.exports=function(t){return o(t,180)}},function(t,i,n){var o=n(16);t.exports=function(t){return o(t,90)}},function(t,i,n){var o=n(16);t.exports=function(t){return o(t,-90)}},function(t,i,n){var o=n(58),a=n(59);t.exports=function(t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),0!==n&&(n<0?o(t,Math.abs(n)):a(t,n)),0!==i)for(var u=0;u<t.length;u++){var d=t[u];i<0?o(d,Math.abs(i)):a(d,i)}return t}},function(t,i){t.exports=function(t,i,n,o,a){if(void 0===a&&(a=t),n>0){var u=n-t.length;if(u<=0)return null}if(!Array.isArray(i))return-1===t.indexOf(i)?(t.push(i),o&&o.call(a,i),i):null;for(var d=i.length-1;d>=0;)-1!==t.indexOf(i[d])&&i.splice(d,1),d--;if(0===(d=i.length))return null;n>0&&d>u&&(i.splice(u),d=u);for(var f=0;f<d;f++){var p=i[f];t.push(p),o&&o.call(a,p)}return i}},function(t,i){t.exports=function(t,i,n,o,a,u){if(void 0===n&&(n=0),void 0===u&&(u=t),o>0){var d=o-t.length;if(d<=0)return null}if(!Array.isArray(i))return-1===t.indexOf(i)?(t.splice(n,0,i),a&&a.call(u,i),i):null;for(var f=i.length-1;f>=0;)-1!==t.indexOf(i[f])&&i.pop(),f--;if(0===(f=i.length))return null;o>0&&f>d&&(i.splice(d),f=d);for(var p=f-1;p>=0;p--){var b=i[p];t.splice(n,0,b),a&&a.call(u,b)}return i}},function(t,i){t.exports=function(t,i){var n=t.indexOf(i);return-1!==n&&n<t.length&&(t.splice(n,1),t.push(i)),i}},function(t,i,n){var o=n(5);t.exports=function(t,i,n,a,u){void 0===a&&(a=0),void 0===u&&(u=t.length);var d=0;if(o(t,a,u))for(var f=a;f<u;f++){t[f][i]===n&&d++}return d}},function(t,i){t.exports=function(t,i,n){var o,a=[null];for(o=3;o<arguments.length;o++)a.push(arguments[o]);for(o=0;o<t.length;o++)a[0]=t[o],i.apply(n,a);return t}},function(t,i,n){var o=n(5);t.exports=function(t,i,n,a,u){if(void 0===a&&(a=0),void 0===u&&(u=t.length),o(t,a,u)){var d,f=[null];for(d=5;d<arguments.length;d++)f.push(arguments[d]);for(d=a;d<u;d++)f[0]=t[d],i.apply(n,f)}return t}},function(t,i){t.exports=function(t,i,n){if(!i.length)return NaN;if(1===i.length)return i[0];var o,a,u=1;if(n){if(t<i[0][n])return i[0];for(;i[u][n]<t;)u++}else for(;i[u]<t;)u++;return u>i.length&&(u=i.length),n?(o=i[u-1][n],(a=i[u][n])-t<=t-o?i[u]:i[u-1]):(o=i[u-1],(a=i[u])-t<=t-o?a:o)}},function(t,i,n){var o=n(5);t.exports=function(t,i,n,a,u){void 0===a&&(a=0),void 0===u&&(u=t.length);var d=[];if(o(t,a,u))for(var f=a;f<u;f++){var p=t[f];(!i||i&&void 0===n&&p.hasOwnProperty(i)||i&&void 0!==n&&p[i]===n)&&d.push(p)}return d}},function(t,i,n){var o=n(5);t.exports=function(t,i,n,a,u){if(void 0===a&&(a=0),void 0===u&&(u=t.length),o(t,a,u))for(var d=a;d<u;d++){var f=t[d];if(!i||i&&void 0===n&&f.hasOwnProperty(i)||i&&void 0!==n&&f[i]===n)return f}return null}},function(t,i){t.exports=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=t.length);var o=i+Math.floor(Math.random()*n);return void 0===t[o]?null:t[o]}},function(t,i){t.exports=function(t,i){var n=t.indexOf(i);if(n>0){var o=t[n-1],a=t.indexOf(o);t[n]=o,t[a]=i}return t}},function(t,i){t.exports=function(t,i,n){var o=t.indexOf(i);if(-1===o||n<0||n>=t.length)throw new Error("Supplied index out of bounds");return o!==n&&(t.splice(o,1),t.splice(n,0,i)),i}},function(t,i){t.exports=function(t,i){var n=t.indexOf(i);if(-1!==n&&n<t.length-1){var o=t[n+1],a=t.indexOf(o);t[n]=o,t[a]=i}return t}},function(t,i){t.exports=function(t,i,n,o){var a,u=[],d=!1;if((n||o)&&(d=!0,n||(n=""),o||(o="")),i<t)for(a=t;a>=i;a--)d?u.push(n+a.toString()+o):u.push(a);else for(a=t;a<=i;a++)d?u.push(n+a.toString()+o):u.push(a);return u}},function(t,i,n){var o=n(40);t.exports=function(t,i,n){void 0===t&&(t=0),void 0===i&&(i=null),void 0===n&&(n=1),null===i&&(i=t,t=0);for(var a=[],u=Math.max(o((i-t)/(n||1)),0),d=0;d<u;d++)a.push(t),t+=n;return a}},function(t,i){function swap(t,i,n){var o=t[i];t[i]=t[n],t[n]=o}function defaultCompare(t,i){return t<i?-1:t>i?1:0}var QuickSelect=function(t,i,n,o,a){for(void 0===n&&(n=0),void 0===o&&(o=t.length-1),void 0===a&&(a=defaultCompare);o>n;){if(o-n>600){var u=o-n+1,d=i-n+1,f=Math.log(u),p=.5*Math.exp(2*f/3),b=.5*Math.sqrt(f*p*(u-p)/u)*(d-u/2<0?-1:1),S=Math.max(n,Math.floor(i-d*p/u+b)),M=Math.min(o,Math.floor(i+(u-d)*p/u+b));QuickSelect(t,i,S,M,a)}var C=t[i],P=n,R=o;for(swap(t,n,i),a(t[o],C)>0&&swap(t,n,o);P<R;){for(swap(t,P,R),P++,R--;a(t[P],C)<0;)P++;for(;a(t[R],C)>0;)R--}0===a(t[n],C)?swap(t,n,R):swap(t,++R,o),R<=i&&(n=R+1),i<=R&&(o=R-1)}};t.exports=QuickSelect},function(t,i,n){var o=n(10),a=n(60),BuildChunk=function(t,i,n){for(var o=[],a=0;a<t.length;a++)for(var u=0;u<i.length;u++)for(var d=0;d<n;d++)o.push({a:t[a],b:i[u]});return o};t.exports=function(t,i,n){var u=o(n,"max",0),d=o(n,"qty",1),f=o(n,"random",!1),p=o(n,"randomB",!1),b=o(n,"repeat",0),S=o(n,"yoyo",!1),M=[];if(p&&a(i),-1===b)if(0===u)b=0;else{var C=t.length*i.length*d;S&&(C*=2),b=Math.ceil(u/C)}for(var P=0;P<=b;P++){var R=BuildChunk(t,i,d);f&&a(R),M=M.concat(R),S&&(R.reverse(),M=M.concat(R))}return u&&M.splice(u),M}},function(t,i,n){var o=n(12);t.exports=function(t,i,n,a){var u;if(void 0===a&&(a=t),!Array.isArray(i))return-1!==(u=t.indexOf(i))?(o(t,u),n&&n.call(a,i),i):null;for(var d=i.length-1,f=[];d>=0;){var p=i[d];-1!==(u=t.indexOf(p))&&(o(t,u),f.push(p),n&&n.call(a,p)),d--}return f}},function(t,i,n){var o=n(12);t.exports=function(t,i,n,a){if(void 0===a&&(a=t),i<0||i>t.length-1)throw new Error("Index out of bounds");var u=o(t,i);return n&&n.call(a,u),u}},function(t,i,n){var o=n(5);t.exports=function(t,i,n,a,u){if(void 0===i&&(i=0),void 0===n&&(n=t.length),void 0===u&&(u=t),o(t,i,n)){var d=n-i,f=t.splice(i,d);if(a)for(var p=0;p<f.length;p++){var b=f[p];a.call(u,b)}return f}return[]}},function(t,i,n){var o=n(12);t.exports=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=t.length);var a=i+Math.floor(Math.random()*n);return o(t,a)}},function(t,i){t.exports=function(t,i,n){var o=t.indexOf(i),a=t.indexOf(n);return-1!==o&&-1===a&&(t[o]=n,!0)}},function(t,i){t.exports=function(t,i){var n=t.indexOf(i);return-1!==n&&n>0&&(t.splice(n,1),t.unshift(i)),i}},function(t,i,n){var o=n(5);t.exports=function(t,i,n,a,u){if(void 0===a&&(a=0),void 0===u&&(u=t.length),o(t,a,u))for(var d=a;d<u;d++){var f=t[d];f.hasOwnProperty(i)&&(f[i]=n)}return t}},function(t,i){t.exports=function(t){var i=/\D/g;return t.sort((function(t,n){return parseInt(t.replace(i,""),10)-parseInt(n.replace(i,""),10)})),t}},function(t,i){function Compare(t,i){return String(t).localeCompare(i)}function RunPass(t,i,n,o){var a,u,d,f,p,b=t.length,S=0,M=2*n;for(a=0;a<b;a+=M)for(d=(u=a+n)+n,u>b&&(u=b),d>b&&(d=b),f=a,p=u;;)if(f<u&&p<d)i(t[f],t[p])<=0?o[S++]=t[f++]:o[S++]=t[p++];else if(f<u)o[S++]=t[f++];else{if(!(p<d))break;o[S++]=t[p++]}}t.exports=function(t,i){void 0===i&&(i=Compare);var n=function Process(t,i){var n=t.length;if(n<=1)return t;for(var o=new Array(n),a=1;a<n;a*=2){RunPass(t,i,a,o);var u=t;t=o,o=u}return t}(t,i);return n!==t&&RunPass(n,null,t.length,t),t}},function(t,i){t.exports=function(t,i,n){if(i!==n){var o=t.indexOf(i),a=t.indexOf(n);if(o<0||a<0)throw new Error("Supplied items must be elements of the same array");return t[o]=n,t[a]=i,t}}},function(t,i,n){t.exports={Alpha:n(294),AlphaSingle:n(295),BlendMode:n(296),ComputedSize:n(47),Crop:n(297),Depth:n(48),Flip:n(49),GetBounds:n(298),Mask:n(307),Origin:n(332),PathFollower:n(333),Pipeline:n(336),ScrollFactor:n(50),Size:n(339),Texture:n(340),TextureCrop:n(341),Tint:n(342),ToJSON:n(54),Transform:n(51),TransformMatrix:n(23),Visible:n(52)}},function(t,i,n){var o=n(3),a={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t,i,n,a){return void 0===t&&(t=1),void 0===i?this.alpha=t:(this._alphaTL=o(t,0,1),this._alphaTR=o(i,0,1),this._alphaBL=o(n,0,1),this._alphaBR=o(a,0,1)),this},alpha:{get:function(){return this._alpha},set:function(t){var i=o(t,0,1);this._alpha=i,this._alphaTL=i,this._alphaTR=i,this._alphaBL=i,this._alphaBR=i,0===i?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(t){var i=o(t,0,1);this._alphaTL=i,0!==i&&(this.renderFlags|=2)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(t){var i=o(t,0,1);this._alphaTR=i,0!==i&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(t){var i=o(t,0,1);this._alphaBL=i,0!==i&&(this.renderFlags|=2)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(t){var i=o(t,0,1);this._alphaBR=i,0!==i&&(this.renderFlags|=2)}}};t.exports=a},function(t,i,n){var o=n(3),a={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t){return void 0===t&&(t=1),this.alpha=t,this},alpha:{get:function(){return this._alpha},set:function(t){var i=o(t,0,1);this._alpha=i,0===i?this.renderFlags&=-3:this.renderFlags|=2}}};t.exports=a},function(t,i,n){var o=n(17),a={_blendMode:o.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(t){"string"==typeof t&&(t=o[t]),(t|=0)>=-1&&(this._blendMode=t)}},setBlendMode:function(t){return this.blendMode=t,this}};t.exports=a},function(t,i){t.exports={texture:null,frame:null,isCropped:!1,setCrop:function(t,i,n,o){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,i,n,o,this.flipX,this.flipY);else{var a=t;this.frame.setCropUVs(this._crop,a.x,a.y,a.width,a.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},function(t,i,n){var o=n(25),a=n(39),u=n(2),d={prepareBoundsOutput:function(t,i){(void 0===i&&(i=!1),0!==this.rotation&&a(t,this.x,this.y,this.rotation),i&&this.parentContainer)&&this.parentContainer.getBoundsTransformMatrix().transformPoint(t.x,t.y,t);return t},getCenter:function(t){return void 0===t&&(t=new u),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,t},getTopLeft:function(t,i){return t||(t=new u),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,i)},getTopCenter:function(t,i){return t||(t=new u),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,i)},getTopRight:function(t,i){return t||(t=new u),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,i)},getLeftCenter:function(t,i){return t||(t=new u),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,i)},getRightCenter:function(t,i){return t||(t=new u),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,i)},getBottomLeft:function(t,i){return t||(t=new u),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,i)},getBottomCenter:function(t,i){return t||(t=new u),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,i)},getBottomRight:function(t,i){return t||(t=new u),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,i)},getBounds:function(t){var i,n,a,u,d,f,p,b;if(void 0===t&&(t=new o),this.parentContainer){var S=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(t),S.transformPoint(t.x,t.y,t),i=t.x,n=t.y,this.getTopRight(t),S.transformPoint(t.x,t.y,t),a=t.x,u=t.y,this.getBottomLeft(t),S.transformPoint(t.x,t.y,t),d=t.x,f=t.y,this.getBottomRight(t),S.transformPoint(t.x,t.y,t),p=t.x,b=t.y}else this.getTopLeft(t),i=t.x,n=t.y,this.getTopRight(t),a=t.x,u=t.y,this.getBottomLeft(t),d=t.x,f=t.y,this.getBottomRight(t),p=t.x,b=t.y;return t.x=Math.min(i,a,d,p),t.y=Math.min(n,u,f,b),t.width=Math.max(i,a,d,p)-t.x,t.height=Math.max(n,u,f,b)-t.y,t}};t.exports=d},function(t,i){t.exports=function(t,i,n){return!(t.width<=0||t.height<=0)&&(t.x<=i&&t.x+t.width>=i&&t.y<=n&&t.y+t.height>=n)}},function(t,i,n){var o=n(61),a=n(62);t.exports=function(t,i,n,u){void 0===u&&(u=[]),!i&&n>0&&(i=a(t)/n);for(var d=0;d<i;d++){var f=d/i;u.push(o(t,f))}return u}},function(t,i,n){var o=n(0),a=n(302),u=n(303),d=n(26),f=n(305),p=n(2),b=new o({initialize:function Line4(t,i,n,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),this.type=d.LINE,this.x1=t,this.y1=i,this.x2=n,this.y2=o},getPoint:function(t,i){return a(this,t,i)},getPoints:function(t,i,n){return u(this,t,i,n)},getRandomPoint:function(t){return f(this,t)},setTo:function(t,i,n,o){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=0),this.x1=t,this.y1=i,this.x2=n,this.y2=o,this},getPointA:function(t){return void 0===t&&(t=new p),t.set(this.x1,this.y1),t},getPointB:function(t){return void 0===t&&(t=new p),t.set(this.x2,this.y2),t},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(t){this.y1>this.y2?this.y1=t:this.y2=t}}});t.exports=b},function(t,i,n){var o=n(13);t.exports=function(t,i,n){return void 0===n&&(n=new o),n.x=t.x1+(t.x2-t.x1)*i,n.y=t.y1+(t.y2-t.y1)*i,n}},function(t,i,n){var o=n(304),a=n(13);t.exports=function(t,i,n,u){void 0===u&&(u=[]),!i&&n>0&&(i=o(t)/n);for(var d=t.x1,f=t.y1,p=t.x2,b=t.y2,S=0;S<i;S++){var M=S/i,C=d+(p-d)*M,P=f+(b-f)*M;u.push(new a(C,P))}return u}},function(t,i){t.exports=function(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))}},function(t,i,n){var o=n(13);t.exports=function(t,i){void 0===i&&(i=new o);var n=Math.random();return i.x=t.x1+n*(t.x2-t.x1),i.y=t.y1+n*(t.y2-t.y1),i}},function(t,i,n){var o=n(13);t.exports=function(t,i){return void 0===i&&(i=new o),i.x=t.x+Math.random()*t.width,i.y=t.y+Math.random()*t.height,i}},function(t,i,n){var o=n(308),a=n(331),u={mask:null,setMask:function(t){return this.mask=t,this},clearMask:function(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(t){return void 0===t&&(this.texture||this.shader)&&(t=this),new o(this.scene,t)},createGeometryMask:function(t){return void 0===t&&"Graphics"===this.type&&(t=this),new a(this.scene,t)}};t.exports=u},function(t,i,n){var o=n(0),a=n(309),u=n(326),d=new o({initialize:function BitmapMask2(t,i){var n=t.sys.renderer;this.renderer=n,this.bitmapMask=i,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),t.sys.game.events.on(a.CONTEXT_RESTORED,this.createMask,this),n&&n.on(u.RESIZE,this.createMask,this)},createMask:function(){var t=this.renderer;if(t&&t.gl){this.mainTexture&&this.clearMask();var i=t.width,n=t.height,o=0==(i&i-1)&&0==(n&n-1),a=t.gl,u=o?a.REPEAT:a.CLAMP_TO_EDGE,d=a.LINEAR;this.mainTexture=t.createTexture2D(0,d,d,u,u,a.RGBA,null,i,n),this.maskTexture=t.createTexture2D(0,d,d,u,u,a.RGBA,null,i,n),this.mainFramebuffer=t.createFramebuffer(i,n,this.mainTexture,!0),this.maskFramebuffer=t.createFramebuffer(i,n,this.maskTexture,!0)}},clearMask:function(){var t=this.renderer;t&&t.gl&&this.mainTexture&&(t.deleteTexture(this.mainTexture),t.deleteTexture(this.maskTexture),t.deleteFramebuffer(this.mainFramebuffer),t.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(t){this.bitmapMask=t},preRenderWebGL:function(t,i,n){t.pipelines.BITMAPMASK_PIPELINE.beginMask(this,i,n)},postRenderWebGL:function(t,i){t.pipelines.BITMAPMASK_PIPELINE.endMask(this,i)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(u.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});t.exports=d},function(t,i,n){t.exports={BLUR:n(310),BOOT:n(311),CONTEXT_LOST:n(312),CONTEXT_RESTORED:n(313),DESTROY:n(314),FOCUS:n(315),HIDDEN:n(316),PAUSE:n(317),POST_RENDER:n(318),POST_STEP:n(319),PRE_RENDER:n(320),PRE_STEP:n(321),READY:n(322),RESUME:n(323),STEP:n(324),VISIBLE:n(325)}},function(t,i){t.exports="blur"},function(t,i){t.exports="boot"},function(t,i){t.exports="contextlost"},function(t,i){t.exports="contextrestored"},function(t,i){t.exports="destroy"},function(t,i){t.exports="focus"},function(t,i){t.exports="hidden"},function(t,i){t.exports="pause"},function(t,i){t.exports="postrender"},function(t,i){t.exports="poststep"},function(t,i){t.exports="prerender"},function(t,i){t.exports="prestep"},function(t,i){t.exports="ready"},function(t,i){t.exports="resume"},function(t,i){t.exports="step"},function(t,i){t.exports="visible"},function(t,i,n){t.exports={POST_RENDER:n(327),PRE_RENDER:n(328),RENDER:n(329),RESIZE:n(330)}},function(t,i){t.exports="postrender"},function(t,i){t.exports="prerender"},function(t,i){t.exports="render"},function(t,i){t.exports="resize"},function(t,i,n){var o=new(n(0))({initialize:function GeometryMask2(t,i){this.geometryMask=i,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(t){return this.geometryMask=t,this},setInvertAlpha:function(t){return void 0===t&&(t=!0),this.invertAlpha=t,this},preRenderWebGL:function(t,i,n){var o=t.gl;t.flush(),0===t.maskStack.length&&(o.enable(o.STENCIL_TEST),o.clear(o.STENCIL_BUFFER_BIT),t.maskCount=0),t.currentCameraMask.mask!==this&&(t.currentMask.mask=this),t.maskStack.push({mask:this,camera:n}),this.applyStencil(t,n,!0),t.maskCount++},applyStencil:function(t,i,n){var o=t.gl,a=this.geometryMask,u=t.maskCount;o.colorMask(!1,!1,!1,!1),n?(o.stencilFunc(o.EQUAL,u,255),o.stencilOp(o.KEEP,o.KEEP,o.INCR)):(o.stencilFunc(o.EQUAL,u+1,255),o.stencilOp(o.KEEP,o.KEEP,o.DECR)),a.renderWebGL(t,a,i),t.flush(),o.colorMask(!0,!0,!0,!0),o.stencilOp(o.KEEP,o.KEEP,o.KEEP),n?this.invertAlpha?o.stencilFunc(o.NOTEQUAL,u+1,255):o.stencilFunc(o.EQUAL,u+1,255):this.invertAlpha?o.stencilFunc(o.NOTEQUAL,u,255):o.stencilFunc(o.EQUAL,u,255)},postRenderWebGL:function(t){var i=t.gl;t.maskStack.pop(),t.maskCount--,t.flush();var n=t.currentMask;if(0===t.maskStack.length)n.mask=null,i.disable(i.STENCIL_TEST);else{var o=t.maskStack[t.maskStack.length-1];o.mask.applyStencil(t,o.camera,!1),t.currentCameraMask.mask!==o.mask?(n.mask=o.mask,n.camera=o.camera):n.mask=null}},preRenderCanvas:function(t,i,n){var o=this.geometryMask;t.currentContext.save(),o.renderCanvas(t,o,n,null,null,!0),t.currentContext.clip()},postRenderCanvas:function(t){t.currentContext.restore()},destroy:function(){this.geometryMask=null}});t.exports=o},function(t,i){t.exports={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function(t,i){return void 0===t&&(t=.5),void 0===i&&(i=t),this.originX=t,this.originY=i,this.updateDisplayOrigin()},setOriginFromFrame:function(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.displayOriginX=t,this.displayOriginY=i,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}}},function(t,i,n){var o=n(19),a=n(334),u=n(10),d=n(335),f=n(2),p={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:d.PLAYING_FORWARD,setPath:function(t,i){void 0===i&&(i=this.pathConfig);var n=this.pathTween;return n&&n.isPlaying()&&n.stop(),this.path=t,i&&this.startFollow(i),this},setRotateToPath:function(t,i){return void 0===i&&(i=0),this.rotateToPath=t,this.pathRotationOffset=i,this},isFollowing:function(){var t=this.pathTween;return t&&t.isPlaying()},startFollow:function(t,i){void 0===t&&(t={}),void 0===i&&(i=0);var n=this.pathTween;n&&n.isPlaying()&&n.stop(),"number"==typeof t&&(t={duration:t}),t.from=u(t,"from",0),t.to=u(t,"to",1);var p=a(t,"positionOnPath",!1);this.rotateToPath=a(t,"rotateToPath",!1),this.pathRotationOffset=u(t,"rotationOffset",0);var b=u(t,"startAt",i);if(b&&(t.onStart=function(t){var i=t.data[0];i.progress=b,i.elapsed=i.duration*b;var n=i.ease(i.progress);i.current=i.start+(i.end-i.start)*n,i.target[i.key]=i.current}),this.pathOffset||(this.pathOffset=new f(this.x,this.y)),this.pathVector||(this.pathVector=new f),this.pathDelta||(this.pathDelta=new f),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(t),this.path.getStartPoint(this.pathOffset),p&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=d.PLAYING_FORWARD,this.rotateToPath){var S=this.path.getPoint(.1);this.rotation=Math.atan2(S.y-this.y,S.x-this.x)+o(this.pathRotationOffset)}return this.pathConfig=t,this},pauseFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.pause(),this},resumeFollow:function(){var t=this.pathTween;return t&&t.isPaused()&&t.resume(),this},stopFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.stop(),this},pathUpdate:function(){var t=this.pathTween;if(t){var i=t.data[0],n=this.pathDelta,a=this.pathVector;if(n.copy(a).negate(),i.state===d.COMPLETE)return this.path.getPoint(1,a),n.add(a),a.add(this.pathOffset),void this.setPosition(a.x,a.y);if(i.state!==d.PLAYING_FORWARD&&i.state!==d.PLAYING_BACKWARD)return;this.path.getPoint(t.getValue(),a),n.add(a),a.add(this.pathOffset);var u=this.x,f=this.y;this.setPosition(a.x,a.y);var p=this.x-u,b=this.y-f;if(0===p&&0===b)return;if(i.state!==this._prevDirection)return void(this._prevDirection=i.state);this.rotateToPath&&(this.rotation=Math.atan2(b,p)+o(this.pathRotationOffset))}}};t.exports=p},function(t,i){t.exports=function(t,i,n){return t&&t.hasOwnProperty(i)?t[i]:n}},function(t,i){t.exports={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26}},function(t,i,n){var o=n(337),a=n(338),u=n(12),d={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(t){void 0===t&&(t=a.MULTI_PIPELINE);var i=this.scene.sys.renderer;if(!i)return!1;var n=i.pipelines;if(this.postPipelines=[],this.pipelineData={},n){var o=n.get(t);if(o)return this.defaultPipeline=o,this.pipeline=o,!0}return!1},setPipeline:function(t,i,n){var a=this.scene.sys.renderer;if(!a)return this;var u=a.pipelines;if(u){var d=u.get(t);d&&(this.pipeline=d),i&&(this.pipelineData=n?o(i):i)}return this},setPostPipeline:function(t,i,n){var a=this.scene.sys.renderer;if(!a)return this;var u=a.pipelines;if(u){Array.isArray(t)||(t=[t]);for(var d=0;d<t.length;d++){var f=u.getPostPipeline(t[d],this);f&&this.postPipelines.push(f)}i&&(this.pipelineData=n?o(i):i)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(t,i){var n=this.pipelineData;return void 0===i?delete n[t]:n[t]=i,this},getPostPipeline:function(t){for(var i=this.postPipelines,n=[],o=0;o<i.length;o++){var a=i[o];("string"==typeof t&&a.name===t||a instanceof t)&&n.push(a)}return 1===n.length?n[0]:n},resetPipeline:function(t,i){return void 0===t&&(t=!1),void 0===i&&(i=!1),this.pipeline=this.defaultPipeline,t&&(this.postPipelines=[],this.hasPostPipeline=!1),i&&(this.pipelineData={}),null!==this.pipeline},resetPostPipeline:function(t){void 0===t&&(t=!1);for(var i=this.postPipelines,n=0;n<i.length;n++)i[n].destroy();this.postPipelines=[],this.hasPostPipeline=!1,t&&(this.pipelineData={})},removePostPipeline:function(t){for(var i=this.postPipelines,n=i.length-1;n>=0;n--){var o=i[n];("string"==typeof t&&o.name===t||"string"!=typeof t&&o instanceof t)&&(o.destroy(),u(i,n))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};t.exports=d},function(t,i){var DeepCopy=function(t){var i,n,o;if("object"!=typeof t||null===t)return t;for(o in i=Array.isArray(t)?[]:{},t)n=t[o],i[o]=DeepCopy(n);return i};t.exports=DeepCopy},function(t,i){t.exports={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"}},function(t,i){var n={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function(t){return void 0===t&&(t=this.frame),this.width=t.realWidth,this.height=t.realHeight,this},setSize:function(t,i){return this.width=t,this.height=i,this},setDisplaySize:function(t,i){return this.displayWidth=t,this.displayHeight=i,this}};t.exports=n},function(t,i){var n={texture:null,frame:null,isCropped:!1,setTexture:function(t,i){return this.texture=this.scene.sys.textures.get(t),this.setFrame(i)},setFrame:function(t,i,n){return void 0===i&&(i=!0),void 0===n&&(n=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&i&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};t.exports=n},function(t,i){var n={texture:null,frame:null,isCropped:!1,setCrop:function(t,i,n,o){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,i,n,o,this.flipX,this.flipY);else{var a=t;this.frame.setCropUVs(this._crop,a.x,a.y,a.width,a.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(t,i){return this.texture=this.scene.sys.textures.get(t),this.setFrame(i)},setFrame:function(t,i,n){return void 0===i&&(i=!0),void 0===n&&(n=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&i&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};t.exports=n},function(t,i){t.exports={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(t,i,n,o){return void 0===t&&(t=16777215),void 0===i&&(i=t,n=t,o=t),this.tintTopLeft=t,this.tintTopRight=i,this.tintBottomLeft=n,this.tintBottomRight=o,this.tintFill=!1,this},setTintFill:function(t,i,n,o){return this.setTint(t,i,n,o),this.tintFill=!0,this},tint:{set:function(t){this.setTint(t,t,t,t)}},isTinted:{get:function(){var t=16777215;return this.tintFill||this.tintTopLeft!==t||this.tintTopRight!==t||this.tintBottomLeft!==t||this.tintBottomRight!==t}}}},function(t,i,n){var o=n(1),a=n(1);o=n(344),a=n(345),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i){t.exports=function(t,i,n,o){var a=i.list,u=a.length;if(0!==u){n.addToRenderList(i);var d=i.localTransform;o?(d.loadIdentity(),d.multiply(o),d.translate(i.x,i.y),d.rotate(i.rotation),d.scale(i.scaleX,i.scaleY)):d.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY),t.pipelines.preBatch(i);var f=-1!==i.blendMode;f||t.setBlendMode(0);for(var p=i.alpha,b=i.scrollFactorX,S=i.scrollFactorY,M=0;M<u;M++){var C=a[M];if(C.willRender(n)){var P,R,O,B;if(void 0!==C.alphaTopLeft)P=C.alphaTopLeft,R=C.alphaTopRight,O=C.alphaBottomLeft,B=C.alphaBottomRight;else{var N=C.alpha;P=N,R=N,O=N,B=N}var Y=C.scrollFactorX,X=C.scrollFactorY;f||C.blendMode===t.currentBlendMode||t.setBlendMode(C.blendMode);var G=C.mask;G&&G.preRenderWebGL(t,C,n);var U=C.type;U!==t.currentType&&(t.newType=!0,t.currentType=U),t.nextTypeMatch=M<u-1&&a[M+1].type===t.currentType,C.setScrollFactor(Y*b,X*S),C.setAlpha(P*p,R*p,O*p,B*p),C.renderWebGL(t,C,n,d),C.setAlpha(P,R,O,B),C.setScrollFactor(Y,X),G&&G.postRenderWebGL(t,n),t.newType=!1}}t.pipelines.postBatch(i)}}},function(t,i){t.exports=function(t,i,n,o){var a=i.list;if(0!==a.length){n.addToRenderList(i);var u=i.localTransform;o?(u.loadIdentity(),u.multiply(o),u.translate(i.x,i.y),u.rotate(i.rotation),u.scale(i.scaleX,i.scaleY)):u.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY);var d=-1!==i.blendMode;d||t.setBlendMode(0);var f=i._alpha,p=i.scrollFactorX,b=i.scrollFactorY;i.mask&&i.mask.preRenderCanvas(t,null,n);for(var S=0;S<a.length;S++){var M=a[S];if(M.willRender(n)){var C=M.alpha,P=M.scrollFactorX,R=M.scrollFactorY;d||M.blendMode===t.currentBlendMode||t.setBlendMode(M.blendMode),M.setScrollFactor(P*p,R*b),M.setAlpha(C*f),M.renderCanvas(t,M,n,u),M.setAlpha(C),M.setScrollFactor(P,R)}}i.mask&&i.mask.postRenderCanvas(t)}}},function(t,i,n){var o=n(25);t.exports=function(t,i,n){void 0===n&&(n=new o);var a=Math.min(t.x,i.x),u=Math.min(t.y,i.y),d=Math.max(t.right,i.right)-a,f=Math.max(t.bottom,i.bottom)-u;return n.setTo(a,u,d,f)}},function(t,i,n){var o=n(1),a=n(1);o=n(348),a=n(349),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i){t.exports=function(t,i,n,o){var a=i.plugin.sceneRenderer,u=i.list;if(0!==u.length){n.addToRenderList(i);var d=i.localTransform;o?(d.loadIdentity(),d.multiply(o),d.translate(i.x,i.y),d.rotate(i.rotation),d.scale(i.scaleX,i.scaleY)):d.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY),t.newType&&(t.pipelines.clear(),a.begin());var f=t.nextTypeMatch;t.nextTypeMatch=!0,t.newType=!1;for(var p=0;p<u.length;p++){var b=u[p];if(b.willRender(n,i)){var S=b.mask;S&&(a.end(),t.pipelines.rebind(),S.preRenderWebGL(t,b,n),t.pipelines.clear(),a.begin()),b.renderWebGL(t,b,n,d,i),S&&(a.end(),t.pipelines.rebind(),S.postRenderWebGL(t,n),t.pipelines.clear(),a.begin())}}t.nextTypeMatch=f,f||(a.end(),t.pipelines.rebind())}else a.batcher.isDrawing&&t.finalType&&(a.end(),t.pipelines.rebind())}},function(t,i){t.exports=function(t,i,n,o){var a=i.list;if(0!==a.length){n.addToRenderList(i);var u=i.localTransform;o?(u.loadIdentity(),u.multiply(o),u.translate(i.x,i.y),u.rotate(i.rotation),u.scale(i.scaleX,i.scaleY)):u.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY);var d=-1!==i.blendMode;d||t.setBlendMode(0);var f=i._alpha,p=i.scrollFactorX,b=i.scrollFactorY;i.mask&&i.mask.preRenderCanvas(t,null,n);for(var S=0;S<a.length;S++){var M=a[S];if(M.willRender(n)){var C=M.alpha,P=M.scrollFactorX,R=M.scrollFactorY;d||M.blendMode===t.currentBlendMode||t.setBlendMode(M.blendMode),M.setScrollFactor(P*p,R*b),M.setAlpha(C*f),M.renderCanvas(t,M,n,u),M.setAlpha(C),M.setScrollFactor(P,R)}}i.mask&&i.mask.postRenderCanvas(t)}}}]);class EngineInitVO{constructor(){this.data={flagOverrides:{},gameName:null,gameVersion:"_v1",gameSubEngineConfig:null,preloaderInitialsAssetsNames:{manifestJson:null,font:null,logo:null},initialAssetPackData:null,funcStartGame:null,funcRegisterComponents:null,funcDoGameRegisters:null,requiredScreenOrientation:"any"}}}const Ir={scene:[{key:"spine",plugin:window.SpinePlugin,start:!0,sceneKey:"spine",mapping:"spine"},{key:"rexGestures",plugin:GesturesPlugin,start:!0,sceneKey:"rexGestures",mapping:"rexGestures"},{key:"rexBoard",plugin:BoardPlugin,mapping:"rexBoard"}],global:[{key:"rexEaseMove",plugin:EaseMovePlugin,start:!0,sceneKey:"rexEaseMove",mapping:"rexEaseMove"},{key:"rexCsvScenario",plugin:CSVScenarioPlugin,start:!0,sceneKey:"rexCsvScenario",mapping:"rexCsvScenario"},{key:"rexMoveTo",plugin:MoveToPlugin,start:!0,sceneKey:"rexMoveTo",mapping:"rexMoveTo"},{key:"rexBullet",plugin:BulletPlugin,start:!0,sceneKey:"rexBullet",mapping:"rexBullet"},{key:"rexRotateTo",plugin:RotateToPlugin,start:!0}]};class BMEngine{static EnableEditor(){Br.enabled=!0}static IsCanvas(){return Nr.phaserGameObject.renderer.type===u.CANVAS}static SetGameplayCameraOffset(t=0,i=0,n=!1){Fr.camera.x=t,Fr.camera.y=i,n&&_InternalUpdateCamera()}static GetGameplayCameraOffset(){return Fr.camera}static SetCameraCenter(t=!0,i=!1){Fr.camera.centerX=t,Fr.camera.centerY=i}static SetPauseAllowedByStates(t){Fr.pauseAllowedByStates=t}static TryPauseGame(){if(0==Fr.flags.allowPauseAlways){if(!Fr.pauseAllowedByStates)return;if(!Fr.pauseAllowedAfterStartGame)return}return!Fr.hasBeenPaused&&(InternalPauseModel.PauseGameScenes(),!0)}static TryUnpauseGame(){return!!Fr.hasBeenPaused&&(InternalPauseModel.UnPauseGameScenes(),!0)}static UserMuteAudio(){Fr.audio.wasMutedManually=!0,Yr.MuteAudio(),InternalSaveModel.SaveGameSettings()}static UserUnmuteAudio(){Fr.audio.wasMutedManually=!1,Yr.UnmuteAudio(),InternalSaveModel.SaveGameSettings()}static PlayAudioFile(t,i=null,n=null){let o;if(Nr.soundInstanceCache[t])o=Nr.soundInstanceCache[t];else{if(!BMEngine.GetPhaserGame().cache.audio.exists(t))return void console.log("RETURNING, FAIL QUIETLY - NO AUDIO :",t);Fr.audioConfigCache[t]||(Fr.audioConfigCache[t]={volume:1,loop:!1},n&&P(Fr.audioConfigCache[t],n));const i=Fr.audioConfigCache[t];o=BMEngine.GetPhaserGame().sound.add(t,i)}o.play(),Nr.soundInstanceCache[t]=o}static GetAudioState(){return Fr.audio.audioState}static GetDisplayDataCopy(){return P({},Fr.display)}static GetPhaserGame(){return Nr.phaserGameObject}static GetGameplayScene(){return console.assert(Nr.phaserScenes.game.ref,Nr.phaserScenes.game),Nr.phaserScenes.game.ref}static GetAudioModelInstance(){return Yr}static GetGameplayCamera(){return BMEngine.GetGameplayScene().cameras.main}static GetRightForGameplayScene(){const t=BMEngine.GetGameplayScene().cameras.main.worldView;return t.width+t.x}static GetInterfaceScene(){return console.assert(Nr.phaserScenes.gameInterface.ref,Nr.phaserScenes.gameInterface),Nr.phaserScenes.gameInterface.ref}static GetEditorScene(){return Nr.phaserScenes.pauseDisplayer.ref}static GetFileFromCache(t,i){return Nr.phaserGameObject.cache[t].get(i)}static IsRotationDisplayed(){return Fr.isRotationDisplayActive}static GetOrMakeContainerLayer(t,i,n,o){const a=t+"_"+i+n+"_"+o;if(!Nr.phaserLayers[a]){if("gameplay"==t){const t=BMEngine.GetGameplayScene().make.container({},!1);BMEngine.GetGameplayScene().add.existing(t),t.setDepth(1e4*o),Nr.phaserLayers[a]={layer:t,anchorX:1,anchorY:1}}else{let u;"gui"==t?(u=BMEngine.GetInterfaceScene().make.container({},!1),BMEngine.GetInterfaceScene().add.existing(u)):"pause"==t&&(u=Nr.phaserScenes.pauseDisplayer.ref.make.container({},!1),Nr.phaserScenes.pauseDisplayer.ref.add.existing(u)),u.setDepth(1e4*o);let d=i,f=n;Nr.phaserLayers[a]={layer:u,anchorX:d,anchorY:f}}_InternalRepositionLayers()}return Nr.phaserLayers[a].layer}static GetSaveSlotReference(t){return InternalSaveModel.LoadGameData(t)}static SaveGame(){InternalSaveModel.SaveCurrentSlot()}}const Fr={refGameSave:{},refGameState:null,audioConfigCache:{},audio:{wasMutedManually:!1,wasMutedAutomatically:!1,audioState:1},pausedFromRotation:!1,isRotationDisplayActive:!1,hasBeenPaused:!1,pauseAllowedAfterStartGame:!1,pauseAllowedByStates:!1,flags:{disableSaveUserPrefs:0,disableSaveGameData:0,disableFakeMusicPreload:0,cordovaListenersEnabled:0,disableAutoPause:0,allowPauseAlways:0},camera:{x:0,y:0,centerX:!0,centerY:!1},display:{designWidth:1,designHeight:1,responsiveWidth:1,responsiveHeight:1,dpi:1,lastWidth:1,lastHeight:1},currentOrientation:"any",requiredOrientation:"any",gameManifestJSON:null,initVO:null},Br={enabled:!1},Nr={gameSubEngineConfig:{},phaserGameObject:null,phaserLayers:{},soundInstanceCache:{},phaserScenes:{preloader:{ref:null,def:null,loadedPreloaderInitials:!1,loadedGameAssets:!1,assetsRealLoadPercentage:0,assetsRealLoadDone:!1,funcRefUpdatePreloaderFont:null,funcRefCompletePreload:null,extraMaxRequiredTime:5e3,extraCurRequiredTime:0},resizeHandler:{ref:null,def:null},pauseDisplayer:{ref:null,def:null},rotateDisplayer:{ref:null,def:null,layer:null,bg:null,rotateHelper:null},controlPauseGameLoop:{ref:null,def:null},game:{ref:null,def:null},gameInterface:{ref:null,def:null}}};function UsePhaserSubEngine(t){P(Fr.flags,t.data.flagOverrides);const i=P(Nr.gameSubEngineConfig,t.data.gameSubEngineConfig);Br.enabled&&(i.backgroundColor="0x000000"),Fr.requiredOrientation=t.data.requiredScreenOrientation,Fr.initVO=t,InternalSaveModel.LoadGameSettings(),t.data.funcDoGameRegisters();const o=t.data.preloaderInitialsAssetsNames,a=t.data.initialAssetPackData,d=t.data.funcStartGame;let f=!1;GetOs().android&&function GetBrowser(){if(W)return z;W=!0;var t=navigator.userAgent;return/Edge\/\d+/.test(t)?z.edge=!0:/Chrome\/(\d+)/.test(t)&&!GetOs().windowsPhone?(z.chrome=!0,z.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(t)?(z.firefox=!0,z.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(t)&&GetOs().iOS?z.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(t)?(z.ie=!0,z.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(t)?z.opera=!0:/Safari/.test(t)&&!GetOs().windowsPhone?z.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(t)&&(z.ie=!0,z.trident=!0,z.tridentVersion=parseInt(RegExp.$1,10),z.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(t)&&(z.silk=!0),z}().firefox&&(i.type=u.CANVAS),!GetOs().desktop&&GetOs().iOS&&(f=!0),GetOs().desktop&&GetOs().macOS&&(f=!0),i.fps={forceSetTimeOut:!1,target:60},f&&(i.type=u.CANVAS,i.fps={forceSetTimeOut:!0,target:60},i.roundPixels=!1),i.type=n.GetSingleton().onGetRendererTypeOverride(i.type);const recalcDisplayValues=function(){if(GetOs().desktop)Fr.display.designWidth=i.scale.width,Fr.display.designHeight=i.scale.height;else{const t=i.scale.height/i.scale.width;let n=InternalScreenModel.GetRealScreenHeight()/InternalScreenModel.GetRealScreenWidth()/t;n=Clamp$1(n,1,2),Fr.display.dpi=n,Fr.display.designWidth=i.scale.width*Fr.display.dpi,Fr.display.designHeight=i.scale.height*Fr.display.dpi}};recalcDisplayValues(),i.plugins=Ir;const p=new u.Game(i);Nr.phaserGameObject=p,p.events.addListener(u.Core.Events.BLUR,(function(){Fr.flags.disableAutoPause||Y.hasKey("PauseGame")&&(console.log("PAUSE FROM: BLUR"),Yr.TryToAutomaticallyMuteIfNotMutedManually(),Y.runCommand("PauseGame"))})),p.events.addListener(u.Core.Events.FOCUS,(function(){Fr.pausedFromRotation||Yr.TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically()})),document.addEventListener("visibilitychange",(function(){if(document.hidden){if(Fr.flags.disableAutoPause)return;Y.hasKey("PauseGame")&&(console.log("PAUSE FROM: VISIBILITYCHANGE"),Y.runCommand("PauseGame"),Yr.TryToAutomaticallyMuteIfNotMutedManually())}else{if(Fr.pausedFromRotation)return;Yr.TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically()}}),!1),document.addEventListener("pause",(function(){if(document.hidden){if(Fr.flags.disableAutoPause)return;Y.hasKey("PauseGame")&&(console.log("PAUSE FROM: PAUSE"),Y.runCommand("PauseGame"),Yr.TryToAutomaticallyMuteIfNotMutedManually())}}),!1),window.document.addEventListener("resume",(function(){Fr.pausedFromRotation||Yr.TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically()}),!1);{const _resize=()=>{recalcDisplayValues();const t=InternalScreenModel.GetRealScreenWidth()/InternalScreenModel.GetRealScreenHeight(),i=Fr.display.designHeight/Fr.display.designWidth;if(Fr.display.responsiveWidth=Fr.display.designWidth*i*t,Fr.display.responsiveHeight=Fr.display.designHeight,p.scale.setGameSize(Fr.display.responsiveWidth,Fr.display.responsiveHeight),Br.enabled){const t=[BMEngine.GetGameplayScene().cameras,BMEngine.GetInterfaceScene().cameras];for(const i in t){const n=t[i],o=Fr.display.responsiveHeight,a=Fr.display.responsiveWidth;n.main.setViewport(a/4,0,a/2,o)}}_InternalRepositionLayers()};Nr.phaserScenes.resizeHandler.def={create:function(){_resize(),window.addEventListener("resize",(function(){_resize()}))},update:function(){InternalScreenModel.GetRealScreenWidth()==Fr.display.lastWidth&&InternalScreenModel.GetRealScreenHeight()==Fr.display.lastHeight||(Fr.display.lastWidth=InternalScreenModel.GetRealScreenWidth(),Fr.display.lastHeight=InternalScreenModel.GetRealScreenHeight(),_resize())}}}Nr.phaserScenes.preloader.def={preload:function(){const t=this,n=new AssetPackLoader;n.fillRequestDataFrom(a),n.supplyLoadFunctionDictionary(t,(()=>{const n=this.make.container({},!0),a=this.make.image({x:0,y:0,key:o.logo,add:!0},!1),u=this.make.bitmapText({x:0,y:125,font:o.font,text:"0",size:!1,add:!0,align:1},!1);n.add(a),n.add(u);const repositionLayer=()=>{n.x=Fr.display.responsiveWidth/2,n.y=Fr.display.responsiveHeight/2};repositionLayer(),window.addEventListener("resize",repositionLayer),Nr.phaserScenes.preloader.funcRefCompletePreload=()=>{Nr.phaserScenes.preloader.funcRefCompletePreload=null,a.destroy(),u.destroy(),n.destroy(),window.removeEventListener("resize",repositionLayer),t.game.scene.stop("PreloaderScene"),-1==Fr.audio.audioState&&BMEngine.UserMuteAudio();const validator=()=>{if(i.optionalLoadDelayValidator){i.optionalValidatorBreak&&(i.optionalValidatorBreak.val-=1,i.optionalValidatorBreak.val<=0&&(i.optionalValidatorBreak=null,i.optionalLoadDelayValidator=null));i.optionalLoadDelayValidator()&&(i.optionalLoadDelayValidator=null),EndOfLoopRoutine.QueueDelayedFunction(GetGUID(),10,(()=>{validator()}))}else d(),Fr.pauseAllowedAfterStartGame=!0};validator()},Nr.phaserScenes.preloader.funcRefUpdatePreloaderFont=()=>{let t=Math.ceil(100*Nr.phaserScenes.preloader.assetsRealLoadPercentage);if(Fr.flags.disableFakeMusicPreload)u.text=t+"%",u.x=-u.width/2;else{t*=.75;let i=Nr.phaserScenes.preloader.extraCurRequiredTime/Nr.phaserScenes.preloader.extraMaxRequiredTime;i=Math.ceil(.25*i*100),t=Math.ceil(t+i),u.text=t+"%",u.x=-u.width/2}},Fr.gameManifestJSON=BMEngine.GetFileFromCache("json",o.manifestJson);const f=new AssetPackLoader;f.fillRequestDataFrom(Fr.gameManifestJSON.assets),f.supplyLoadFunctionDictionary(t,(()=>{Nr.phaserScenes.preloader.assetsRealLoadPercentage=1,Nr.phaserScenes.preloader.assetsRealLoadDone=!0})),t.load.on("progress",(t=>{Nr.phaserScenes.preloader.funcRefUpdatePreloaderFont&&(Nr.phaserScenes.preloader.assetsRealLoadPercentage=t,Nr.phaserScenes.preloader.funcRefUpdatePreloaderFont())})),f.load(),t.load.start()})),n.load()},create:function(){},update:function(t,i){if(!Nr.phaserScenes.preloader.funcRefCompletePreload)return;if(!Nr.phaserScenes.preloader.funcRefUpdatePreloaderFont)return;Nr.phaserScenes.preloader.assetsRealLoadDone&&(Nr.phaserScenes.preloader.assetsRealLoadPercentage=1);let n=!1;if(1==Fr.flags.disableFakeMusicPreload)n=!0;else if(Nr.phaserScenes.preloader.assetsRealLoadPercentage>=.75){let t=1;Nr.phaserScenes.preloader.assetsRealLoadDone&&(t=5),Nr.phaserScenes.preloader.extraCurRequiredTime+=i*t,Nr.phaserScenes.preloader.extraCurRequiredTime>=Nr.phaserScenes.preloader.extraMaxRequiredTime&&(Nr.phaserScenes.preloader.extraCurRequiredTime=Nr.phaserScenes.preloader.extraMaxRequiredTime,n=!0)}Nr.phaserScenes.preloader.funcRefUpdatePreloaderFont(),Nr.phaserScenes.preloader.assetsRealLoadDone&&n&&Nr.phaserScenes.preloader.funcRefCompletePreload()}},Nr.phaserScenes.rotateDisplayer.def={create:function(){Nr.phaserScenes.rotateDisplayer.ref=this,Nr.phaserScenes.rotateDisplayer.layer=this.make.container({},!0)},update:function(){Nr.phaserScenes.rotateDisplayer.bg&&Nr.phaserScenes.rotateDisplayer.def.updateRotateSize()},showRotate:function(){Nr.phaserScenes.rotateDisplayer.bg||(Nr.phaserScenes.rotateDisplayer.bg=Nr.phaserScenes.rotateDisplayer.ref.make.image({x:0,y:0,key:"RotateBG",add:!1},!1),Nr.phaserScenes.rotateDisplayer.rotateHelper=Nr.phaserScenes.rotateDisplayer.ref.make.image({x:0,y:0,key:"NeedPortrait",add:!1},!1),Nr.phaserScenes.rotateDisplayer.def.updateRotateSize(),Nr.phaserScenes.rotateDisplayer.layer.add(Nr.phaserScenes.rotateDisplayer.bg),Nr.phaserScenes.rotateDisplayer.layer.add(Nr.phaserScenes.rotateDisplayer.rotateHelper))},hideRotate:function(){Nr.phaserScenes.rotateDisplayer.bg&&Nr.phaserScenes.rotateDisplayer.bg.destroy(),Nr.phaserScenes.rotateDisplayer.bg=null,Nr.phaserScenes.rotateDisplayer.rotateHelper&&Nr.phaserScenes.rotateDisplayer.rotateHelper.destroy(),Nr.phaserScenes.rotateDisplayer.rotateHelper=null},updateRotateSize(){Nr.phaserScenes.rotateDisplayer.bg.setDisplaySize(4096,4096),Nr.phaserScenes.rotateDisplayer.layer.x=Fr.display.responsiveWidth/2,Nr.phaserScenes.rotateDisplayer.layer.y=Fr.display.responsiveHeight/2}},Nr.phaserScenes.pauseDisplayer.def={create:function(){Nr.phaserScenes.pauseDisplayer.ref=this},update:function(){}},Nr.phaserScenes.controlPauseGameLoop.def={create:function(){},update:function(){if("any"==Fr.requiredOrientation)return;if(!Nr.phaserScenes.preloader.assetsRealLoadDone)return;let t;t=InternalScreenModel.GetRealScreenWidth()>InternalScreenModel.GetRealScreenHeight()?"landscape":"portrait",Fr.currentOrientation!=t&&(Fr.currentOrientation=t,Fr.requiredOrientation==Fr.currentOrientation?(Fr.isRotationDisplayActive=!1,Nr.phaserScenes.rotateDisplayer.def.hideRotate(),Yr.TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically(),Fr.pausedFromRotation&&(Fr.pausedFromRotation=!1)):(Fr.isRotationDisplayActive=!0,Nr.phaserScenes.rotateDisplayer.def.showRotate(),Yr.TryToAutomaticallyMuteIfNotMutedManually(),Fr.hasBeenPaused||(Y.runCommand("PauseGame"),Fr.pausedFromRotation=!0)))}},Nr.phaserScenes.gameInterface.def={create:function(){Nr.phaserScenes.gameInterface.ref=this},update:function(){}},Nr.phaserScenes.game.def={create:function(){Nr.phaserScenes.game.ref=this,RoutinesManager.InitRoutines()},update:function(t,i){Fr.isRotationDisplayActive||(_InternalUpdateCamera(),RoutinesManager.UpdateRoutines(t,i))}},p.scene.add("PreloaderScene",Nr.phaserScenes.preloader.def,!0),p.scene.add("GameScene",Nr.phaserScenes.game.def,!0),p.scene.add("GameInterface",Nr.phaserScenes.gameInterface.def,!0),p.scene.add("ControlPauseGameLoop",Nr.phaserScenes.controlPauseGameLoop.def,!0),p.scene.add("PauseSceneDisplayer",Nr.phaserScenes.pauseDisplayer.def,!0),p.scene.add("RotateDeviceSceneDisplayer",Nr.phaserScenes.rotateDisplayer.def,!0),p.scene.add("ResizeHandlerScene",Nr.phaserScenes.resizeHandler.def,!0),console.log("DisplayData: ",Fr.display)}class InternalSaveModel{static GetSaveSlotKey(){return Fr.initVO.data.gameName+"_slot_"+Fr.initVO.data.gameVersion+"_major_1"}static SaveCurrentSlot(){1!=Fr.flags.disableSaveGameData&&n.GetSingleton().adaptLocalStorageSetItem(InternalSaveModel.GetSaveSlotKey(),JSON.stringify(Fr.refGameSave))}static SaveGameSettings(){1!=Fr.flags.disableSaveUserPrefs&&n.GetSingleton().adaptLocalStorageSetItem(InternalSaveModel.GetSaveSlotKey(),JSON.stringify(Fr.refGameSave))}static LoadGameSettings(){if(1==Fr.flags.disableSaveUserPrefs)return;const t=n.GetSingleton().adaptLocalStorageGetItem(InternalSaveModel.GetSaveSlotKey());if(null==t){const t={version:1,audio:{audioState:Fr.audio.audioState},gameState:null};Fr.refGameSave=t,this.SaveGameSettings()}else P(Fr.refGameSave,JSON.parse(t));Fr.audio=Fr.refGameSave.audio}static LoadGameData(t){return 1==Fr.flags.disableSaveGameData?(Fr.refGameState=t,t):(null==Fr.refGameSave.gameState&&(Fr.refGameSave.gameState={},P(Fr.refGameSave.gameState,t)),Fr.refGameState=Fr.refGameSave.gameState,Fr.refGameState)}}const Yr=new class InternalAudioModel{MuteAudio(t=!0){t&&(Fr.audio.audioState=-1),BMEngine.GetGameplayScene().sound.setMute(!0)}UnmuteAudio(t=!0){t&&(Fr.audio.audioState=1),BMEngine.GetGameplayScene().sound.setMute(!1)}TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically(){Fr.audio.wasMutedManually||Fr.audio.wasMutedAutomatically&&(Fr.audio.wasMutedAutomatically=!1,Yr.UnmuteAudio(!1))}TryToAutomaticallyMuteIfNotMutedManually(){Fr.audio.wasMutedManually||Fr.audio.wasMutedAutomatically||(Fr.audio.wasMutedAutomatically=!0,Yr.MuteAudio(!1))}};class InternalPauseModel{static PauseGameScenes(){Fr.hasBeenPaused||(Fr.hasBeenPaused=!0,Nr.phaserScenes.game.ref&&Nr.phaserScenes.game.ref.sys.pause(),Nr.phaserScenes.gameInterface.ref&&Nr.phaserScenes.gameInterface.ref.sys.pause())}static UnPauseGameScenes(){Fr.hasBeenPaused&&(Fr.hasBeenPaused=!1,Nr.phaserScenes.game.ref&&Nr.phaserScenes.game.ref.sys.resume(),Nr.phaserScenes.gameInterface.ref&&Nr.phaserScenes.gameInterface.ref.sys.resume())}}class InternalScreenModel{static GetRealScreenSize(){let t=window.innerWidth,i=window.innerHeight;document.documentElement&&"clientWidth"in document.documentElement&&(t=document.documentElement.clientWidth,i=document.documentElement.clientHeight);let n={bottom:0,top:0};GetOs().iOS&&(document.documentElement&&"getBoundingClientRect"in document.documentElement?n=document.documentElement.getBoundingClientRect():"getBoundingClientRect"in document.body&&(n=document.body.getBoundingClientRect()),n&&(t=n.right-n.left,i=n.bottom-n.top));let o={w:t,h:i};return o.h=window.innerHeight,o}static GetRealScreenHeight(){return InternalScreenModel.GetRealScreenSize().h}static GetRealScreenWidth(){return InternalScreenModel.GetRealScreenSize().w}}function _InternalUpdateCamera(){BMEngine.GetGameplayScene().cameras.main.scrollX=-BMEngine.GetGameplayScene().cameras.main.width/2+Fr.camera.x,Fr.camera.centerY?BMEngine.GetGameplayScene().cameras.main.scrollY=-BMEngine.GetGameplayScene().cameras.main.height/2+Fr.camera.y:BMEngine.GetGameplayScene().cameras.main.scrollY=Fr.camera.y}function _InternalRepositionLayers(){for(const t in Nr.phaserLayers){const i=Nr.phaserLayers[t],n=i.layer.scene.cameras.main.width,o=i.layer.scene.cameras.main.height;2==i.anchorX&&(i.layer.x=n/2),3==i.anchorX&&(i.layer.x=n),2==i.anchorY&&(i.layer.y=o/2),3==i.anchorY&&(i.layer.y=o)}}class TransformComponent extends Component{constructor(t){super(null),this.refTarget={x:t.x,y:t.y,angle:t.angle};const i=JSON.parse(JSON.stringify(this.constructor.properties));Object.assign(this,i,t)}static CalculateDeltaBetween(t,i){const n=TransformComponent.At(t),o=TransformComponent.At(i),a={x:0,y:0};return n&&o&&(a.x=o.refTarget.x-n.refTarget.x,a.y=o.refTarget.y-n.refTarget.y),a}static At(t){return t.transform}setPosition(t,i){null!=t&&(this.refTarget.x=t),null!=i&&(this.refTarget.y=i)}getTarget(){return this.refTarget}static get properties(){return{}}static AddToEntity(t,i=0,n=0,o=0){t.add(TransformComponent,{x:i,y:n,angle:o})}}const Xr=class{static RegisterPackedAsGameCommand(){Y.register(this.Name,new GameCommand((t=>{Xr.Take(t.entity,t.deltaX,t.deltaY)})))}static Take(t,i=null,n=null){null==i&&(i=0),null==n&&(n=0);const o=TransformComponent.At(t);o.refTarget.x+=i,o.refTarget.y+=n}};let Gr=Xr;function isNil(t){return null==t}function coerceToBoolean(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return isNil(t)?i:Boolean(t)}function isString(t){return"string"==typeof t}function coerceToString(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return isNil(t)?i:isString(t)?t:String(t)}function capitalize(t,i){var n=coerceToString(t),o=coerceToBoolean(i);return""===n?"":(o&&(n=n.toLowerCase()),n.substr(0,1).toUpperCase()+n.substr(1))}function lowerCase(t){return coerceToString(t,"").toLowerCase()}__publicField(Gr,"Name","RepositionEntityByDeltaAction");var Ur="\\u0300-\\u036F\\u1AB0-\\u1AFF\\u1DC0-\\u1DFF\\u20D0-\\u20FF\\uFE20-\\uFE2F",Vr="\\0-\\u02FF\\u0370-\\u1AAF\\u1B00-\\u1DBF\\u1E00-\\u20CF\\u2100-\\uD7FF\\uE000-\\uFE1F\\uFE30-\\uFFFF",zr=new RegExp("(["+Vr+"]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])(["+Ur+"]+)","g"),Wr=new RegExp("([\\uD800-\\uDBFF])([\\uDC00-\\uDFFF])","g"),Hr=new RegExp("((?:["+Vr+"]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])(?:["+Ur+"]+))|([\\uD800-\\uDBFF][\\uDC00-\\uDFFF])|([\\n\\r\\u2028\\u2029])|(.)","g"),jr=new RegExp("[\\s\\uFEFF\\xA0]"),qr=new RegExp("^[\\s\\uFEFF\\xA0]+"),Zr=new RegExp("[\\s\\uFEFF\\xA0]+$"),Kr=new RegExp("^\\d+$"),Jr=/[-[\]{}()*+!<=:?./\\^$|#,]/g,Qr=/[^A-Za-z0-9]/g,$r=/[<>&"'`]/g,to=/(%{1,2})(?:(\d+)\$)?(\+)?([ 0]|'.{1})?(-)?(\d+)?(?:\.(\d+))?([bcdiouxXeEfgGs])?/g,eo=/\.?0+$/g,io=/[gimuy]*$/,no=/<([A-Za-z0-9]+)>/g,so="a-z\\xB5\\xDF-\\xF6\\xF8-\\xFF\\u0101\\u0103\\u0105\\u0107\\u0109\\u010B\\u010D\\u010F\\u0111\\u0113\\u0115\\u0117\\u0119\\u011B\\u011D\\u011F\\u0121\\u0123\\u0125\\u0127\\u0129\\u012B\\u012D\\u012F\\u0131\\u0133\\u0135\\u0137\\u0138\\u013A\\u013C\\u013E\\u0140\\u0142\\u0144\\u0146\\u0148\\u0149\\u014B\\u014D\\u014F\\u0151\\u0153\\u0155\\u0157\\u0159\\u015B\\u015D\\u015F\\u0161\\u0163\\u0165\\u0167\\u0169\\u016B\\u016D\\u016F\\u0171\\u0173\\u0175\\u0177\\u017A\\u017C\\u017E-\\u0180\\u0183\\u0185\\u0188\\u018C\\u018D\\u0192\\u0195\\u0199-\\u019B\\u019E\\u01A1\\u01A3\\u01A5\\u01A8\\u01AA\\u01AB\\u01AD\\u01B0\\u01B4\\u01B6\\u01B9\\u01BA\\u01BD-\\u01BF\\u01C6\\u01C9\\u01CC\\u01CE\\u01D0\\u01D2\\u01D4\\u01D6\\u01D8\\u01DA\\u01DC\\u01DD\\u01DF\\u01E1\\u01E3\\u01E5\\u01E7\\u01E9\\u01EB\\u01ED\\u01EF\\u01F0\\u01F3\\u01F5\\u01F9\\u01FB\\u01FD\\u01FF\\u0201\\u0203\\u0205\\u0207\\u0209\\u020B\\u020D\\u020F\\u0211\\u0213\\u0215\\u0217\\u0219\\u021B\\u021D\\u021F\\u0221\\u0223\\u0225\\u0227\\u0229\\u022B\\u022D\\u022F\\u0231\\u0233-\\u0239\\u023C\\u023F\\u0240\\u0242\\u0247\\u0249\\u024B\\u024D\\u024F",ro="\\x41-\\x5a\\xc0-\\xd6\\xd8-\\xde\\u0100\\u0102\\u0104\\u0106\\u0108\\u010a\\u010c\\u010e\\u0110\\u0112\\u0114\\u0116\\u0118\\u011a\\u011c\\u011e\\u0120\\u0122\\u0124\\u0126\\u0128\\u012a\\u012c\\u012e\\u0130\\u0132\\u0134\\u0136\\u0139\\u013b\\u013d\\u013f\\u0141\\u0143\\u0145\\u0147\\u014a\\u014c\\u014e\\u0150\\u0152\\u0154\\u0156\\u0158\\u015a\\u015c\\u015e\\u0160\\u0162\\u0164\\u0166\\u0168\\u016a\\u016c\\u016e\\u0170\\u0172\\u0174\\u0176\\u0178\\u0179\\u017b\\u017d\\u0181\\u0182\\u0184\\u0186\\u0187\\u0189-\\u018b\\u018e-\\u0191\\u0193\\u0194\\u0196-\\u0198\\u019c\\u019d\\u019f\\u01a0\\u01a2\\u01a4\\u01a6\\u01a7\\u01a9\\u01ac\\u01ae\\u01af\\u01b1-\\u01b3\\u01b5\\u01b7\\u01b8\\u01bc\\u01c4\\u01c5\\u01c7\\u01c8\\u01ca\\u01cb\\u01cd\\u01cf\\u01d1\\u01d3\\u01d5\\u01d7\\u01d9\\u01db\\u01de\\u01e0\\u01e2\\u01e4\\u01e6\\u01e8\\u01ea\\u01ec\\u01ee\\u01f1\\u01f2\\u01f4\\u01f6-\\u01f8\\u01fa\\u01fc\\u01fe\\u0200\\u0202\\u0204\\u0206\\u0208\\u020a\\u020c\\u020e\\u0210\\u0212\\u0214\\u0216\\u0218\\u021a\\u021c\\u021e\\u0220\\u0222\\u0224\\u0226\\u0228\\u022a\\u022c\\u022e\\u0230\\u0232\\u023a\\u023b\\u023d\\u023e\\u0241\\u0243-\\u0246\\u0248\\u024a\\u024c\\u024e",oo=new RegExp("(?:["+ro+"]["+Ur+"]*)?(?:["+so+"]["+Ur+"]*)+|(?:["+ro+"]["+Ur+"]*)+(?!["+so+"])|[\\d]+|[\\u2700-\\u27BF]|[^\\x00-\\x2F\\x3A-\\x40\\x5B-\\x60\\x7b-\\xBF\\xD7\\xF7\\u2000-\\u206F\\s\\uFEFF\\xA0]+","g"),ao=/[A-Z\xC0-\xD6\xD8-\xDE]?[a-z\xDF-\xF6\xF8-\xFF]+|[A-Z\xC0-\xD6\xD8-\xDE]+(?![a-z\xDF-\xF6\xF8-\xFF])|\d+/g,ho=new RegExp("^(?:["+so+ro+"]["+Ur+"]*)+$"),lo=new RegExp("^((?:["+so+ro+"]["+Ur+"]*)|[\\d])+$"),uo=/^[\x01-\xFF]*$/;function nilDefault(t,i){return null==t?i:t}function toString(t){return isNil(t)?null:isString(t)?t:String(t)}function words(t,i,n){var o=coerceToString(t),a=void 0;if(isNil(i))a=uo.test(o)?ao:oo;else if(i instanceof RegExp)a=i;else{var u=toString(nilDefault(n,""));a=new RegExp(toString(i),u)}return nilDefault(o.match(a),[])}function wordToCamel(t,i){return 0===i?lowerCase(t):capitalize(t,!0)}function kebabCase(t){var i=coerceToString(t);return""===i?"":words(i).map(lowerCase).join("-")}function swapAndConcat(t,i){var n=i.toLowerCase(),o=i.toUpperCase();return t+(i===n?o:n)}function clipNumber(t,i,n){return t<=i?i:t>=n?n:t}function toInteger(t){return t===1/0?9007199254740991:t===-1/0?-9007199254740991:~~t}function truncate(t,i,n){var o=coerceToString(t),a=isNil(i)?o.length:clipNumber(toInteger(i),0,9007199254740991),u=coerceToString(n,"...");return a>=o.length?o:o.substr(0,i-u.length)+u}function coerceToNumber(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return isNil(t)?i:"number"==typeof t?t:Number(t)}function nanDefault(t,i){return t!=t?i:t}function codePointAt(t,i){var n=coerceToString(t),o=n.length,a=coerceToNumber(i);if(!((a=nanDefault(a,0))<0||a>=o)){var u=n.charCodeAt(a),d=void 0;return function isHighSurrogate(t){return t>=55296&&t<=56319}(u)&&o>a+1&&function isLowSurrogate(t){return t>=56320&&t<=57343}(d=n.charCodeAt(a+1))?function getAstralNumberFromSurrogatePair(t,i){return 1024*(t-55296)+i-56320+65536}(u,d):u}}var co=Array.prototype.reduce;function ReplacementIndex(){this.index=0}ReplacementIndex.prototype.increment=function(){this.index++},ReplacementIndex.prototype.incrementOnEmptyPosition=function(t){isNil(t)&&this.increment()},ReplacementIndex.prototype.getIndexByPosition=function(t){return isNil(t)?this.index:t-1};function repeat(t,i){for(var n=coerceToString(t),o=isNil(i)?1:clipNumber(toInteger(i),0,9007199254740991),a="";o;)1&o&&(a+=n),o>1&&(n+=n),o>>=1;return a}function buildPadding(t,i){return repeat(t,toInteger(i/t.length)+i%t.length).substr(0,i)}function padLeft(t,i,n){var o=coerceToString(t),a=isNil(i)?0:clipNumber(toInteger(i),0,9007199254740991),u=coerceToString(n," ");return a<=o.length?o:buildPadding(u,a-o.length)+o}function padRight(t,i,n){var o=coerceToString(t),a=isNil(i)?0:clipNumber(toInteger(i),0,9007199254740991),u=coerceToString(n," ");return a<=o.length?o:o+buildPadding(u,a-o.length)}function addSignToFormattedNumber(t,i,n){return"+"===n.signSpecifier&&t>=0&&(i="+"+i),i}function float(t,i){var n=parseFloat(t),o=void 0;isNaN(n)&&(n=0);var a=coerceToNumber(i.precision,6);switch(i.typeSpecifier){case"f":o=n.toFixed(a);break;case"e":o=n.toExponential(a);break;case"E":o=n.toExponential(a).toUpperCase();break;case"g":case"G":o=function formatFloatAsShort(t,i,n){if(0===t)return"0";var o=0===i?1:i,a=t.toPrecision(o).replace(eo,"");"G"===n.typeSpecifier&&(a=a.toUpperCase());return a}(n,a,i)}return coerceToString(o=addSignToFormattedNumber(n,o,i))}function integerBase(t,i){var n=parseInt(t);switch(isNaN(n)&&(n=0),n>>>=0,i.typeSpecifier){case"c":n=String.fromCharCode(n);break;case"b":n=n.toString(2);break;case"o":n=n.toString(8);break;case"x":n=n.toString(16);break;case"X":n=n.toString(16).toUpperCase()}return coerceToString(n)}function integerDecimal(t,i){var n=parseInt(t);return isNaN(n)&&(n=0),addSignToFormattedNumber(n,toString(n),i)}function stringFormat(t,i){var n=t,o=i.precision;return!isNil(o)&&n.length>o&&(n=truncate(n,o,"")),n}function compute(t,i){var n=void 0;switch(i.typeSpecifier){case"s":n=stringFormat;break;case"d":case"i":n=integerDecimal;break;case"c":case"b":case"o":case"x":case"X":case"u":n=integerBase;break;case"f":case"e":case"E":case"g":case"G":n=float}return function alignAndPad(t,i){var n=i.width;return isNil(n)||t.length>=n?t:("-"===i.alignmentSpecifier?padRight:padLeft)(t,n,i.getPaddingCharacter())}(n(t,i),i)}function ConversionSpecification(t){this.percent=t.percent,this.signSpecifier=t.signSpecifier,this.paddingSpecifier=t.paddingSpecifier,this.alignmentSpecifier=t.alignmentSpecifier,this.width=t.width,this.precision=t.precision,this.typeSpecifier=t.typeSpecifier}function match(t,i,n,o,a,u,d,f,p,b,S){var M=new ConversionSpecification({percent:o,signSpecifier:u,paddingSpecifier:d,alignmentSpecifier:f,width:coerceToNumber(p,null),precision:coerceToNumber(b,null),typeSpecifier:S});if(M.isPercentLiteral())return n.slice(1);var C=t.getIndexByPosition(a);return t.incrementOnEmptyPosition(a),function validate(t,i,n){if(isNil(n.typeSpecifier))throw new Error("sprintf(): Unknown type specifier");if(t>i-1)throw new Error("sprintf(): Too few arguments");if(t<0)throw new Error("sprintf(): Argument number must be greater than zero")}(C,i.length,M),compute(i[C],M)}function sprintf(t){var i=coerceToString(t);if(""===i)return i;for(var n=arguments.length,o=Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];var u=match.bind(void 0,new ReplacementIndex,o);return i.replace(to,u)}ConversionSpecification.prototype.isPercentLiteral=function(){return"%%"===this.percent},ConversionSpecification.prototype.getPaddingCharacter=function(){var t=nilDefault(this.paddingSpecifier," ");return 2===t.length&&"'"===t[0]&&(t=t[1]),t};var fo={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};function replaceSpecialCharacter(t){return fo[t]}function escapeRegExp(t){return coerceToString(t).replace(Jr,"\\$&")}var po={"<":/(&lt;)|(&#x0*3c;)|(&#0*60;)/gi,">":/(&gt;)|(&#x0*3e;)|(&#0*62;)/gi,"&":/(&amp;)|(&#x0*26;)|(&#0*38;)/gi,'"':/(&quot;)|(&#x0*22;)|(&#0*34;)/gi,"'":/(&#x0*27;)|(&#0*39;)/gi,"`":/(&#x0*60;)|(&#0*96;)/gi},go=Object.keys(po);function reduceUnescapedString(t,i){return t.replace(po[i],i)}var vo={3:"",8:"",A:"A",B:"B",C:"C",D:"D",E:"E",F:"F",G:"G",H:"H",I:"I",J:"J",K:"K",L:"L",M:"M",N:"N",O:"O",P:"P",Q:"Q",R:"R",S:"S",T:"T",U:"U",V:"V",W:"W",X:"X",Y:"Y",Z:"Z",a:"a",b:"b",c:"c",d:"d",e:"e",f:"f",g:"g",h:"h",i:"i",j:"j",k:"k",l:"l",m:"m",n:"n",o:"o",p:"p",q:"q",r:"r",s:"s",t:"t",u:"u",v:"v",w:"w",x:"x",y:"y",z:"z",OE:"",oe:"",AE:"",ae:"",hv:"",OI:"",oi:"",DZ:"",Dz:"",dz:"",LJ:"",Lj:"",lj:"",NJ:"",Nj:"",nj:"",OU:"",ou:"",TZ:"",tz:"",AA:"",aa:"",AO:"",ao:"",AU:"",au:"",AV:"",av:"",AY:"",ay:"",OO:"",oo:"",VY:"",vy:"",TH:"",th:"",PS:"",ps:"",Yo:"",Ye:"",Yi:"",Zh:"",Ch:"",Sh:"","":"",Yu:"",Ya:"",zh:"",ch:"",sh:"",yu:"",ya:"",yo:"",ye:"",yi:""},mo=null;function getLatinCharacter(t){var i=function getDiacriticsMap(){return null!==mo||(mo={},Object.keys(vo).forEach((function(t){for(var i=vo[t],n=0;n<i.length;n++){var o=i[n];mo[o]=t}}))),mo}()[t];return i||t}function removeCombiningMarks(t,i){return i}function latinise(t){var i=coerceToString(t);return""===i?"":i.replace(Qr,getLatinCharacter).replace(zr,removeCombiningMarks)}function includes(t,i,n){var o=coerceToString(t),a=toString(i);return null!==a&&(""===a||(n=isNil(n)?0:clipNumber(toInteger(n),0,o.length),-1!==o.indexOf(a,n)))}function appendFlagToRegExp(t,i){var n=function getRegExpFlags(t){return t.toString().match(io)[0]}(t);return includes(n,i)?t:new RegExp(t.source,n+i)}var _slicedToArray=function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function sliceIterator(t,i){var n=[],o=!0,a=!1,u=void 0;try{for(var d,f=t[Symbol.iterator]();!(o=(d=f.next()).done)&&(n.push(d.value),!i||n.length!==i);o=!0);}catch(p){a=!0,u=p}finally{try{!o&&f.return&&f.return()}finally{if(a)throw u}}return n}(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function sortStringByLength(t,i){return t.length===i.length?0:t.length<i.length?1:-1}var yo=Array.prototype.reduce;function trimLeft(t,i){var n=coerceToString(t);if(""===i||""===n)return n;var o=toString(i);if(isNil(o))return n.replace(qr,"");var a=!0;return yo.call(n,(function(t,i){return a&&includes(o,i)?t:(a=!1,t+i)}),"")}var xo=Array.prototype.reduceRight;function trimRight(t,i){var n=coerceToString(t);if(""===i||""===n)return n;var o=toString(i);if(isNil(o))return n.replace(Zr,"");var a=!0;return xo.call(n,(function(t,i){return a&&includes(o,i)?t:(a=!1,i+t)}),"")}function determineOptions(t){return{width:coerceToNumber(t.width,75),newLine:coerceToString(t.newLine,"\n"),indent:coerceToString(t.indent,""),cut:coerceToBoolean(t.cut,!1)}}function isAlpha(t){var i=coerceToString(t);return ho.test(i)}function hasSubstringAtIndex(t,i,n){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=0;o&&(a=1-i.length);var u=t.substr(n+a,i.length);return u.toLowerCase()===i}function parseTagName(t){for(var i=0,n="",o=0;2!==i;){var a=t[o++].toLowerCase();switch(a){case"<":break;case">":i=2;break;default:jr.test(a)?1===i&&(i=2):(0===i&&(i=1),"/"!==a&&(n+=a))}}return n}var To=null;var wo=function getGlobalObject(){return null!==To?To:To="object"==typeof global&&global.Object===Object?global:"object"==typeof self&&self.Object===Object?self:new Function("return this")()}(),bo=wo.v;var So={camelCase:function camelCase(t){var i=coerceToString(t);return""===i?"":words(i).map(wordToCamel).join("")},capitalize:capitalize,decapitalize:function decapitalize(t){var i=coerceToString(t);return""===i?"":i.substr(0,1).toLowerCase()+i.substr(1)},kebabCase:kebabCase,lowerCase:lowerCase,snakeCase:function snakeCase(t){var i=coerceToString(t);return""===i?"":words(i).map(lowerCase).join("_")},swapCase:function swapCase(t){return coerceToString(t).split("").reduce(swapAndConcat,"")},titleCase:function titleCase(t,i){var n=coerceToString(t),o=Array.isArray(i)?i:[],a=uo.test(n)?ao:oo;return n.replace(a,(function(t,i){return i>0&&o.indexOf(n[i-1])>=0?t.toLowerCase():capitalize(t,!0)}))},upperCase:function upperCase(t){return coerceToString(t).toUpperCase()},count:function count(t){return coerceToString(t).length},countGraphemes:function countGrapheme(t){return coerceToString(t).replace(zr,"*").replace(Wr,"*").length},countSubstrings:function countSubstrings(t,i){var n=coerceToString(t),o=coerceToString(i),a=o.length,u=0,d=0;if(""===n||""===o)return u;do{-1!==(d=n.indexOf(o,d))&&(u++,d+=a)}while(-1!==d);return u},countWhere:function countWhere(t,i,n){var o=coerceToString(t);if(""===o||"function"!=typeof i)return 0;var a=i.bind(n);return co.call(o,(function(t,i,n){return a(i,n,o)?t+1:t}),0)},countWords:function countWords(t,i,n){return words(t,i,n).length},escapeHtml:function escapeHtml(t){return coerceToString(t).replace($r,replaceSpecialCharacter)},escapeRegExp:escapeRegExp,unescapeHtml:function unescapeHtml(t){var i=coerceToString(t);return go.reduce(reduceUnescapedString,i)},sprintf:sprintf,vprintf:function vprintf(t,i){return sprintf.apply(void 0,[t].concat(function _toConsumableArray(t){if(Array.isArray(t)){for(var i=0,n=Array(t.length);i<t.length;i++)n[i]=t[i];return n}return Array.from(t)}(nilDefault(i,[]))))},indexOf:function indexOf(t,i,n){return coerceToString(t).indexOf(i,n)},lastIndexOf:function lastIndexOf(t,i,n){return coerceToString(t).lastIndexOf(i,n)},search:function search(t,i,n){var o=coerceToString(t),a=isNil(n)?0:clipNumber(toInteger(n),0,o.length),u=o.substr(a).search(i);return-1===u||isNaN(a)||(u+=a),u},charAt:function charAt(t,i){return coerceToString(t).charAt(i)},codePointAt:codePointAt,first:function first(t,i){var n=coerceToString(t),o=isNil(i)?1:clipNumber(toInteger(i),0,9007199254740991);return n.length<=o?n:n.substr(0,o)},graphemeAt:function graphemeAt(t,i){var n=coerceToString(t),o=coerceToNumber(i),a=void 0,u=0;for(o=nanDefault(o,0);null!==(a=Hr.exec(n));){if(u===o)return Hr.lastIndex=0,a[0];u++}return""},last:function last(t,i){var n=coerceToString(t),o=isNil(i)?1:clipNumber(toInteger(i),0,9007199254740991);return n.length<=o?n:n.substr(n.length-o,o)},prune:function prune(t,i,n){var o=coerceToString(t),a=isNil(i)?o.length:clipNumber(toInteger(i),0,9007199254740991),u=coerceToString(n,"...");if(a>=o.length)return o;var d=uo.test(o)?ao:oo,f=0;return o.replace(d,(function(t,i){var n=i+t.length;n<=a-u.length&&(f=n)})),o.substr(0,f)+u},slice:function slice(t,i,n){return coerceToString(t).slice(i,n)},substr:function substr(t,i,n){return coerceToString(t).substr(i,n)},substring:function substring(t,i,n){return coerceToString(t).substring(i,n)},truncate:truncate,insert:function insert(t,i,n){var o=coerceToString(t),a=coerceToString(i),u=coerceToNumber(n);return u<0||u>o.length||""===a?o:o.slice(0,u)+a+o.slice(u)},latinise:latinise,pad:function pad(t,i,n){var o=coerceToString(t),a=isNil(i)?0:clipNumber(toInteger(i),0,9007199254740991),u=coerceToString(n," ");if(a<=o.length)return o;var d=a-o.length,f=toInteger(d/2),p=d%2;return buildPadding(u,f)+o+buildPadding(u,f+p)},padLeft:padLeft,padRight:padRight,repeat:repeat,replace:function replace(t,i,n){return coerceToString(t).replace(i,n)},replaceAll:function replaceAll(t,i,n){var o=coerceToString(t),a=i;return i instanceof RegExp?i.global||(a=appendFlagToRegExp(i,"g")):a=new RegExp(escapeRegExp(i),"g"),o.replace(a,n)},reverse:function reverse(t){return coerceToString(t).split("").reverse().join("")},reverseGrapheme:function reverseGrapheme(t){for(var i=coerceToString(t),n="",o=(i=i.replace(zr,(function(t,i,n){return reverseGrapheme(n)+i})).replace(Wr,"$2$1")).length;o--;)n+=i.charAt(o);return n},slugify:function slugify(t){var i=coerceToString(t);return""===i?"":kebabCase(latinise(i).replace(Qr,"-"))},splice:function splice(t,i,n,o){var a=coerceToString(t),u=coerceToString(o),d=coerceToNumber(i);d<0?(d=a.length+d)<0&&(d=0):d>a.length&&(d=a.length);var f=coerceToNumber(n,a.length-d);return f<0&&(f=0),a.slice(0,d)+u+a.slice(d+f)},tr:function tr(t,i,n){var o=coerceToString(t),a=void 0,u=void 0;if(isString(i)&&isString(n))a=i.split(""),u=n.split("");else{var d=function extractKeysAndValues(t){var i=Object.keys(t),n=i.sort(sortStringByLength).map((function(i){return t[i]}));return[i,n]}(nilDefault(i,{})),f=_slicedToArray(d,2);a=f[0],u=f[1]}var p=a.length;if(0===p)return o;for(var b="",S=u.length,M=0;M<o.length;M++){for(var C=!1,P=void 0,R=0;R<p&&R<S;R++){var O=a[R];if(o.substr(M,O.length)===O){C=!0,P=u[R],M=M+O.length-1;break}}b+=C?P:o[M]}return b},trim:function trim(t,i){var n=coerceToString(t);if(""===i||""===n)return n;var o=toString(i);return isNil(o)?n.trim():trimRight(trimLeft(n,o),o)},trimLeft:trimLeft,trimRight:trimRight,wordWrap:function wordWrap(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=coerceToString(t),o=determineOptions(i),a=o.width,u=o.newLine,d=o.indent,f=o.cut;if(""===n||a<=0)return d;for(var p=n.length,b=n.substring.bind(n),S=0,M="";p-S>a;)if(" "!==n[S]){var C=n.lastIndexOf(" ",a+S);C>=S?(M+=d+b(S,C)+u,S=C+1):f?(M+=d+b(S,a+S)+u,S+=a):(C=n.indexOf(" ",a+S))>=0?(M+=d+b(S,C)+u,S=C+1):(M+=d+b(S),S=p)}else S++;return S<p&&(M+=d+b(S)),M},endsWith:function endsWith(t,i,n){if(isNil(i))return!1;var o=coerceToString(t),a=coerceToString(i);if(""===a)return!0;n=isNil(n)?o.length:clipNumber(toInteger(n),0,o.length),n-=a.length;var u=o.indexOf(a,n);return-1!==u&&u===n},includes:includes,isAlpha:isAlpha,isAlphaDigit:function isAlphaDigit(t){var i=coerceToString(t);return lo.test(i)},isBlank:function isBlank(t){return 0===coerceToString(t).trim().length},isDigit:function isDigit(t){var i=coerceToString(t);return Kr.test(i)},isEmpty:function isEmpty(t){return 0===coerceToString(t).length},isLowerCase:function isLowerCase(t){var i=coerceToString(t);return isAlpha(i)&&i.toLowerCase()===i},isNumeric:function isNumeric(t){var i="object"!=typeof t||isNil(t)?t:Number(t);return("number"==typeof i||"string"==typeof i)&&!isNaN(i-parseFloat(i))},isString:isString,isUpperCase:function isUpperCase(t){var i=coerceToString(t);return isAlpha(i)&&i.toUpperCase()===i},matches:function matches(t,i,n){var o=coerceToString(t),a=coerceToString(n),u=void 0;if(!(i instanceof RegExp)){if(null===(u=toString(i)))return!1;i=new RegExp(u,a)}return i.test(o)},startsWith:function startsWith(t,i,n){var o=coerceToString(t),a=toString(i);return null!==a&&(""===a||(n=isNil(n)?0:clipNumber(toInteger(n),0,o.length),o.substr(n,a.length)===a))},chars:function chars(t){return coerceToString(t).split("")},codePoints:function codePoints(t){for(var i=coerceToString(t),n=i.length,o=[],a=0,u=void 0;a<n;)u=codePointAt(i,a),o.push(u),a+=u>65535?2:1;return o},graphemes:function graphemes(t){return nilDefault(coerceToString(t).match(Hr),[])},split:function split(t,i,n){return coerceToString(t).split(i,n)},words:words,stripBom:function trim$1(t){var i=coerceToString(t);return""===i?"":"\ufeff"===i[0]?i.substring(1):i},stripTags:function trim$2(t,i,n){if(""===(t=coerceToString(t)))return"";if(!Array.isArray(i)){var o=coerceToString(i);i=""===o?[]:function parseTagList(t){for(var i=[],n=void 0;null!==(n=no.exec(t));)i.push(n[1]);return i}(o)}for(var a=coerceToString(n),u=t.length,d=i.length>0,f=hasSubstringAtIndex.bind(null,t),p=0,b=0,S="",M="",C=null,P=0;P<u;P++){var R=t[P],O=!1;switch(R){case"<":if(C)break;if(f("< ",P,!1)){O=!0;break}if(0===p){O=!0,p=1;break}if(1===p){b++;break}O=!0;break;case"!":if(1===p&&f("<!",P)){p=2;break}O=!0;break;case"-":if(2===p&&f("!--",P)){p=3;break}O=!0;break;case'"':case"'":1===p&&(C===R?C=null:C||(C=R)),O=!0;break;case"E":case"e":if(2===p&&f("doctype",P)){p=1;break}O=!0;break;case">":if(b>0){b--;break}if(C)break;if(1===p){if(C=null,p=0,d){var B=parseTagName(M+=">");-1!==i.indexOf(B.toLowerCase())?S+=M:S+=a,M=""}else S+=a;break}if(2===p||3===p&&f("--\x3e",P)){C=null,p=0,M="";break}O=!0;break;default:O=!0}if(O)switch(p){case 0:S+=R;break;case 1:d&&(M+=R)}}return S},noConflict:function noConflict(){return this===wo.v&&(wo.v=bo),this},version:"1.4.0"};function ChainWrapper(t,i){this._wrappedValue=t,this._explicitChain=i}function Voca(t){return new ChainWrapper(t,!1)}ChainWrapper.prototype.value=function(){return this._wrappedValue},ChainWrapper.prototype.valueOf=function(){return this.value()},ChainWrapper.prototype.toJSON=function(){return this.value()},ChainWrapper.prototype.toString=function(){return String(this.value())},ChainWrapper.prototype.chain=function(){return new ChainWrapper(this._wrappedValue,!0)},ChainWrapper.prototype.thru=function(t){return"function"==typeof t?new ChainWrapper(t(this._wrappedValue),this._explicitChain):this},ChainWrapper.prototype._explicitChain=!0,Object.keys(So).forEach((function(t){ChainWrapper.prototype[t]=function makeFunctionChainable(t){return function(){for(var i=arguments.length,n=Array(i),o=0;o<i;o++)n[o]=arguments[o];var a=t.apply(void 0,[this._wrappedValue].concat(n));return this._explicitChain||"string"==typeof a?new ChainWrapper(a,this._explicitChain):a}}(So[t])})),(Object.assign||function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t})(Voca,So,{chain:function chain(t){return new ChainWrapper(t,!0)}});const Eo="sprite",Mo="image",Co="spine",Ao="text",Po="zone",_o="particle";class OperateOnVisual{static GetDisplayedAsAny(t){return VisualComponent.At(t).refDisplayed}static GetDisplayed(t){return VisualComponent.At(t).refDisplayed}static GetDisplayedAsImage(t){return VisualComponent.At(t).refDisplayed}static GetDisplayedAsBitmapText(t){return VisualComponent.At(t).refDisplayed}static GetBottomY(t){return OperateOnVisual.GetDisplayed(t).y+OperateOnVisual.GetHeight(t)/2}static GetHeight(t){return OperateOnVisual.GetDisplayedAsImage(t).displayHeight}static GetWidth(t){return OperateOnVisual.GetDisplayedAsImage(t).displayWidth}static IsImgOrSprite(t){return VisualComponent.At(t).type==Mo||VisualComponent.At(t).type==Eo}static IsSpine(t){return VisualComponent.At(t).type==Co}static SpineListAttachmentsBySlots(t,i=!1){const n=OperateOnVisual.GetDisplayedAsAny(t);let o={},a=n.skeletonData.defaultSkin.attachments,u=n.getSlotList();for(let d=0;d<u.length;d++){let t=u[d],i=a[d];for(let n in i){let i=o[t];i||(i=[],o[t]=i),i.push(n)}}return i&&console.log(t,o),o}static RandomizeAnimationTime(t){let i=OperateOnVisual.GetDisplayedAsAny(t).state.tracks[0];i.trackTime=Phaser.Math.FloatBetween(0,i.animationEnd)}static SpineSetAttachment(t,i,n){OperateOnVisual.GetDisplayedAsAny(t).setAttachment(i,n)}static SetScale(t,i=1,n=1){1!=i&&(OperateOnVisual.GetDisplayedAsImage(t).scaleX=i,1!=n&&(OperateOnVisual.GetDisplayedAsImage(t).scaleY=i)),1!=n&&(OperateOnVisual.GetDisplayedAsImage(t).scaleY=n)}static SetTextWithZeroPad(t,i,n){let o=Voca.padLeft(i,n,"0");OperateOnVisual.GetDisplayedAsBitmapText(t).setText(o)}static SetText(t,i){OperateOnVisual.GetDisplayedAsBitmapText(t).setText(i)}static SortParentByProperty(t,i){OperateOnVisual.GetDisplayedAsImage(t).parentContainer.sort(i)}static ReparentLayer(t,i,n={}){let o=VisualComponent.At(t);P(o,n),o.layerName=i,PostProcessLayerName(o);let a=OperateOnVisual.GetDisplayedAsImage(t),u=BMEngine.GetOrMakeContainerLayer(o.layerData.layer,o.layerData.anchorX,o.layerData.anchorY,o.layerDepth),d=a.parentContainer,f=u,p=a.x,b=a.y;p-=d.scene.cameras.main.scrollX,b-=d.scene.cameras.main.scrollY,p+=f.scene.cameras.main.scrollX,b+=f.scene.cameras.main.scrollY,p+=d.x,b+=d.y,p-=f.x,b-=f.y,OperateOnVisual.GetDisplayedAsImage(t).x=p,OperateOnVisual.GetDisplayedAsImage(t).y=b,u.add(o.refDisplayed)}static GetBounds(t){const i=VisualComponent.At(t);if(OperateOnVisual.IsSpine(t)){const n=OperateOnVisual.GetDisplayedAsAny(t).getBounds();return i._boundCache.setTo(n.offset.x,n.offset.y,n.size.x,n.size.y),i._boundCache}return OperateOnVisual.GetDisplayedAsImage(t).getBounds(i._boundCache)}static GetParticles(t){return VisualComponent.At(t).refDisplayed}}function PostProcessLayerName(t){if(Voca.countSubstrings(t.layerName,"_")>0){const i=Voca.split(t.layerName,"_");t.layerData.layer=i[0],t.layerData.anchorX=parseInt(Voca.charAt(i[1],0)),t.layerData.anchorY=parseInt(Voca.charAt(i[1],1))}else t.layerData.layer=t.layerName,t.layerData.anchorX=1,t.layerData.anchorY=1}class VisualComponent extends Component{constructor(t){super(null),this._boundCache=new Phaser.Geom.Rectangle(0,0,1,1),this.type=null,this.texture=null,this.animations={},this.curAnimation=null,this.curAnimationCfg=null,this.curAnimationFinishCount=0,this.emitterConfig=null,this.layerName="gameplay",this.selfDepth=0,this.layerDepth=0,this.scale=1,this.layerData={layer:"gameplay",x:1,y:1},this.tweens={position:null,scale:null,alpha:null},this.refDisplayed=null;const i=JSON.parse(JSON.stringify(this.constructor.properties));Object.assign(this,i,t)}static At(t){return t.visual}onAttached(t){let i;super.onAttached(t),PostProcessLayerName(this);let n=BMEngine.GetOrMakeContainerLayer(this.layerData.layer,this.layerData.anchorX,this.layerData.anchorY,this.layerDepth);const o=n.scene;if(this.type==Mo)if(BMEngine.GetPhaserGame().textures.exists(this.texture))i=o.make.image({x:0,y:0,key:this.texture,add:!0},!1);else{const t="megaset",n=this.texture;i=o.make.image({x:0,y:0,key:t,frame:n,add:!0},!1)}else if(this.type==Co)null==this.animations&&(this.animations={Idle:{loop:!0}},this.curAnimation="Idle"),i=o.make.spine({x:0,y:0,key:this.texture,animationName:this.curAnimation,loop:this.animations[this.curAnimation].loop,add:!1},!1),i.state.addListener({complete:t=>{t.animation.name,this.curAnimationCfg&&(0==this.curAnimationCfg.loop&&this.curAnimationFinishCount<=0&&this.curAnimationFinishCount++,this.curAnimationCfg.onAnimationLoopedCmd&&(this.curAnimationCfg.onAnimationLoopedCmd.entity=this.entity,Y.runCommandObj(this.curAnimationCfg.onAnimationLoopedCmd)))}});else if(this.type==Ao){let t=this.text;null==t&&(t="000000",this.text=t),i=o.make.bitmapText({x:0,y:0,font:this.texture,text:t,add:!0},!1),i.setOrigin(.5,.5)}else if(this.type==Po)null==this.width&&(this.width=100),null==this.height&&(this.height=100),i=o.make.zone({x:0,y:0,width:this.width,height:this.height,add:!0});else if(this.type==_o){const t=this.emitterConfig,n=o.add.particles(this.texture);n.createEmitter(t),i=n}i.setScale(this.scale),this.refDisplayed=i,n.add(i),i.selfEntity=t,0!=this.selfDepth&&(i.setDepth(this.selfDepth),OperateOnVisual.SortParentByProperty(this.entity,"depth"))}bringToTop(){OperateOnVisual.GetDisplayedAsImage(this.entity).parentContainer.bringToTop(OperateOnVisual.GetDisplayedAsImage(this.entity))}setTexture(t){if(OperateOnVisual.IsImgOrSprite(this.entity)){const i=OperateOnVisual.GetDisplayedAsImage(this.entity);BMEngine.GetPhaserGame().textures.exists(t)?i.setTexture(t):i.setTexture("megaset",t)}}setAnimation(t,i=null){if(OperateOnVisual.IsImgOrSprite(this.entity))this.curAnimation=t,this.setTexture(this.animations[this.curAnimation].texture);else if(OperateOnVisual.IsSpine(this.entity)){let n=!1;if(this.curAnimation==t&&(n=!0),this.animations[t]&&0==this.animations[t].loop&&this.curAnimationFinishCount>=1&&(n=!1),n)return;this.curAnimation=t,this.curAnimationFinishCount=0;let o={};this.animations[t]&&P(o,this.animations[t]),i&&P(o,i),null==o.loop&&(o.loop=!0),this.curAnimationCfg=o,this.refDisplayed.setAnimation(0,t,o.loop)}else console.warn("IMPLEMENT HERE!")}getAnimationName(){return this.curAnimation}getDisplayedAsImage(){return this.refDisplayed}getDisplayedAsZone(){return this.refDisplayed}getEmitter(){return this.refDisplayed.emitters.list[0]}isDisplayedOnScreen(t=!1){const i=this.getDisplayedAsImage(),n=OperateOnVisual.GetBounds(this.entity),o=i.scene.cameras.main.worldView;let a=!1;return 0==OperateOnVisual.IsSpine(this.entity)?(a=!0,n.y+n.height<o.y&&(a=!1),n.y>o.bottom&&(a=!1),n.x+n.width<o.x&&(a=!1),n.x>o.width&&(a=!1)):(a=!0,n.x=this.refDisplayed.x,n.y=this.refDisplayed.y,n.y+n.height<o.y&&(a=!1),n.y-n.height>o.y+o.height&&(a=!1),n.x+n.width<o.x&&(a=!1),n.x-n.width>o.right&&(a=!1)),a}setFlipX(t){const i=this.getDisplayedAsImage();OperateOnVisual.IsSpine(this.entity)?t?i.scaleX>=0&&(i.scaleX*=-1):i.scaleX<=0&&(i.scaleX*=-1):i.setFlipX(t)}setFlipY(t){const i=this.getDisplayedAsImage();OperateOnVisual.IsSpine(this.entity)?t?i.scaleY>=0&&(i.scaleY*=-1):i.scaleY<=0&&(i.scaleY*=-1):i.setFlipY(t)}disposePositionTween(){this.tweens.position&&(this.tweens.position.stop(0),this.tweens.position.remove(),this.tweens.position=null)}disposeAllTweens(){this.disposePositionTween(),this.tweens.scale&&(this.tweens.scale.stop(0),this.tweens.scale.remove(),this.tweens.scale=null),this.tweens.alpha&&(this.tweens.alpha.stop(0),this.tweens.alpha.remove(),this.tweens.alpha=null)}fastTrackPosition(t){const i=this.tweens;if(i.position){let t=i.position;if(26!=t.state){t.stop(),t.remove();for(let i=0;i<t.data.length;i++){let n=t.data[i];n.target[n.key]=n.end}}i.position=null}}tweenPosition(t){const i=this.tweens;i.position&&(26!=i.position.state&&i.position.stop(),i.position.remove(),i.position=null),t.targets=OperateOnVisual.GetDisplayedAsImage(this.entity),i.position=OperateOnVisual.GetDisplayedAsImage(this.entity).scene.tweens.add(t)}isTweeningPosition(){const t=this.tweens;if(!t.position)return!1;return 26!=t.position.state}isTweeningScale(){const t=this.tweens;if(!t.scale)return!1;return 26!=t.scale.state}tweenScale(t,i=null){const n=this.tweens;n.scale&&(26!=n.scale.state&&n.scale.stop(),n.scale.remove(),n.scale=null),t.targets=OperateOnVisual.GetDisplayedAsImage(this.entity),null==i?n.scale=OperateOnVisual.GetDisplayedAsImage(this.entity).scene.tweens.add(t):OperateOnVisual.GetDisplayedAsImage(this.entity).scene.tweens.add(t)}tweenAlpha(t){const i=this.tweens;i.alpha&&(26!=i.alpha.state&&i.alpha.stop(),i.alpha.remove(),i.alpha=null),t.targets=OperateOnVisual.GetDisplayedAsImage(this.entity),i.alpha=OperateOnVisual.GetDisplayedAsImage(this.entity).scene.tweens.add(t)}getSpineSlotsList(t=!1){const i=this.refDisplayed.getSlotList();return t&&console.log(this.entity,i),i}getSpineAnimationList(t=!1){const i=[],n=OperateOnVisual.GetDisplayedAsAny(this.entity);for(var o=0;o<n.stateData.skeletonData.animations.length;o++){var a=n.stateData.skeletonData.animations[o].name;i.push(a)}return t&&console.log(this.entity,i),i}spineRandomizeSlotsAttachments(t){OperateOnVisual.GetDisplayedAsAny(this.entity);for(let i=0;i<t.length;i++){let n=t[i],o=OperateOnVisual.SpineListAttachmentsBySlots(this.entity,!1)[n],a=Phaser.Utils.Array.GetRandom(o);OperateOnVisual.SpineSetAttachment(this.entity,n,a)}}onDestroyed(t){this.refDisplayed&&(this.disposeAllTweens(),this.refDisplayed.selfEntity=null,this.refDisplayed.destroy(),this.refDisplayed=null)}static get properties(){return{}}}class VisualTemplates{static DefaultImage(t="_NONE",i=null){let n={type:Mo,texture:t};return i&&P(n,i),n}static DefaultSpine(t="_NONE",i=null){let n={type:Co,texture:t};return i&&P(n,i),n}static DefaultText(t="_NONE",i=null){let n={type:Ao,texture:t};return i&&P(n,i),n}static DefaultParticle(t="_NONE",i=null){let n={type:_o,texture:t};return i&&P(n,i),n}static DefaultZone(t=null){let i={type:Po};return t&&P(i,t),i}}const Ro=class{static RegisterPackedAsGameCommand(){Y.register(this.Name,new GameCommand((t=>{Ro.Take(t.entity,t.multX,t.multY)})))}static Take(t,i=null,n=null){null==i&&(i=0),null==n&&(n=0);const o=TransformComponent.At(t),a=OperateOnVisual.GetDisplayed(t);o.refTarget.x+=a.displayWidth*i,o.refTarget.y+=a.displayHeight*n}};let Oo=Ro;__publicField(Oo,"Name","RepositionEntityToAction");const Lo=class{static RegisterPackedAsGameCommand(){Y.register(this.Name,new GameCommand((t=>{Lo.Take(t.entity,t.animationName,t)})))}static Take(t,i,n){VisualComponent.At(t).setAnimation(i,n)}};let ko=Lo;__publicField(ko,"Name","SetEntityAnimationAction");class ToggleComponent extends Component{constructor(t){super(null),this.curStateName=null,this.states=null;const i=JSON.parse(JSON.stringify(this.constructor.properties));Object.assign(this,i,t)}synchAnimationToState(){ko.Take(this.entity,this.curStateName)}setToggleStateAsNext(){this.curStateName=this.states[this.curStateName].nextState,this.synchAnimationToState()}runCommandsAtCurrentState(){Y.runCommandObj(P({entity:this.entity},this.states[this.curStateName].command))}setToggleState(t){this.curStateName=t,this.synchAnimationToState()}static At(t){return console.assert(null!=t,t),console.assert(null!=t.toggle,t),t.toggle}static get properties(){return{}}static AddWithToggleStatesDictionary(t,i,n){const o={curStateName:i,states:n};t.add(ToggleComponent,o)}}const Do=new class InternalDataClass$7{constructor(){this.groups={},this.colliders={}}},Io=class{static GetGroup(t){return Do.groups[t]?Do.groups[t]:(console.warn("NO GROUP: ",t),null)}static PhysicsAddCollider(t,i,n,o){if(Do.colliders[t])return;let a=Io.GetGroup(i),u=Io.GetGroup(n);const d=BMEngine.GetGameplayScene().physics.add.collider(a,u,o,null);Do.colliders[t]={group1:i,group2:n,callbackFn:o,collider:d}}static PhysicsAddOverlap(t,i,n,o){if(Do.colliders[t])return;let a=Io.GetGroup(i),u=Io.GetGroup(n);const d=BMEngine.GetGameplayScene().physics.add.overlap(a,u,o,null);Do.colliders[t]={group1:i,group2:n,callbackFn:o,collider:d}}static OverlapGroupsByNames(t,i,n,o,a){console.assert(n);let u=Io.GetGroup(t),d=Io.GetGroup(i);u&&d&&BMEngine.GetGameplayScene().physics.world.overlap(u,d,n,o,a)}static OverlapObjects(t,i,n,o,a){return BMEngine.GetGameplayScene().physics.world.overlap(t,i,n,o,a)}};let Fo=Io;__publicField(Fo,"AddGroup",(function(t,i=!1){if(!Do.groups[t])return Do.groups[t]=i?BMEngine.GetGameplayScene().physics.add.staticGroup():BMEngine.GetGameplayScene().physics.add.group(),Do.groups[t]}));const Bo=new DataHolder;class LogicLoopRoutine{static Init(){}static OnRegister(){}static Register(){RoutinesManager.RegisterRoutine(LogicLoopRoutine)}static GetName(){return"LogicLoopRoutine"}static Update(t){const i=Bo.getKeyList();for(let n=0;n<i.length;n++){let o=i[n];Bo.getData(o).f(t)}}static SetUpdateFunc(t,i){Bo.register(t,{f:i},!0)}static CleanFunction(t){Bo.register(t,{f:()=>{}},!0)}}function DeltaScaled(t){return t/1e3}class GameSession{constructor(){this.seenTutorial=!1,this.initialized=!1}}class GameSubsession{constructor(){this.score=0,this.latestScore=0}}class PandaJumpGameLevelData{constructor(){this.levelLoopEnded=!1,this.levelLoopStarted=!1,this.activeLevelTime=0,this.highestPlatformY=9999999999,this.difficulty=1,this.toNextSpring=0,this.totalSpawnedPlatform=0,this.touchedFirst=!1}}const No=new class PandaJumpGlobals{constructor(){this.session=new GameSession,this.subsession=new GameSubsession,this.currentLevelData=new PandaJumpGameLevelData}ResetLevelData(){this.currentLevelData=new PandaJumpGameLevelData}ResetSubsession(){this.subsession=new GameSubsession}};class PhysicsComponent extends Component{constructor(t){super(null),this.isStatic=!1,this.isCircle=!1,this.groupsList=[],this.offsetX=0,this.offsetY=0,this.circleRadius=0,this.bulletData=null,this.body=null,this.bullet=null;const i=JSON.parse(JSON.stringify(this.constructor.properties));Object.assign(this,i,t)}getBodyAsDynamic(){return this.body}setSizeScaled(t){var i=this.getBodyAsDynamic().sourceWidth*t,n=this.getBodyAsDynamic().sourceHeight*t;this.getBodyAsDynamic().setSize(i,n,!0)}resizeTo(t,i,n=null,o=null){this.isCircle?console.warn("IMPLEMENT!"):(this.body.setSize(t,i),null!=n&&(this.offsetX=n),null!=o&&(this.offsetY=o),this.body.setOffset(this.offsetX,this.offsetY))}resizeDeltaOwnSize(t,i,n,o){this.isCircle?console.warn("IMPLEMENT!"):this.resizeTo(this.body.width+t,this.body.height+i,n,o)}static get properties(){return{}}static At(t){return t.physics}static AddToEntity(t,i){t.add(PhysicsComponent,i)}static AddToEntityWithBulletBehaviour(t,i){let n={bulletData:{speed:100,rotateToTarget:!0,enable:!0}};P(n,i),t.has(PhysicsComponent)||PhysicsComponent.AddToEntity(t,n)}static BootBody(t){const i=PhysicsComponent.At(t);if(i.isCircle){let t=i.body.halfWidth-i.circleRadius,n=i.body.halfWidth-i.circleRadius;i.body.setCircle(i.circleRadius),i.body.setOffset(t+i.offsetX,n+i.offsetY)}else i.body.setSize(i.body.width,i.body.height),i.body.setOffset(i.offsetX,i.offsetY);if(i.bulletData){const t=BMEngine.GetGameplayScene().plugins.get("rexBullet");i.bullet=t.add(i.body.gameObject,i.bulletData)}(class OperateOnPhysics{static GetBodyAsDynamic(t){return t.physics.body}static GetBodyAsStatic(t){return t.physics.body}static PutIntoPhysicsGroups(t){const i=PhysicsComponent.At(t);for(let n=0;n<i.groupsList.length;n++){let o=i.groupsList[n];const a=Fo.GetGroup(o);a||console.warn("NO GROUP: ",o),a.add(t.physics.body.gameObject)}}static DisableBody(t){t.physics.body.stop(),t.physics.body.enable=!1,t.physics.body.gameObject.active=!1}}).PutIntoPhysicsGroups(t)}}const BuildCommand=(t,i)=>P({key:t},i);function CmdTweenScaleTo(t,i,n=null){if(!t)return;if(t.isDestroyed)return;let o={scale:1,duration:1e3,delay:0,ease:"Cubic.InOut"};P(o,i),VisualComponent.At(t).tweenScale(o,n)}const Yo=class{static RegisterPackedAsGameCommand(){Y.register(this.Name,new GameCommand((t=>{Yo.Take(t.entity,t.reason)})))}static Take(t,i){"over"==i?CmdTweenScaleTo(t,{scale:1.1,duration:100}):"out"==i?CmdTweenScaleTo(t,{scale:1,duration:100}):"up"==i?(BMEngine.PlayAudioFile("tap"),CmdTweenScaleTo(t,{scale:1,duration:100})):"down"==i&&CmdTweenScaleTo(t,{scale:.9,duration:100})}};let Xo=Yo;__publicField(Xo,"Name","ButtonInteractionAction");const Go=class{static RegisterPackedAsGameCommand(){Y.register(this.Name,new GameCommand((t=>{Go.Take(t.entity,t.reason)})))}static Take(t,i){"over"==i?CmdTweenScaleTo(t,{scale:1.1,duration:100}):"out"==i||"up"==i?CmdTweenScaleTo(t,{scale:1,duration:100}):"down"==i&&CmdTweenScaleTo(t,{scale:.9,duration:100})}};let Uo=Go;__publicField(Uo,"Name","BasicInteractionAction");class Interactive extends Component{constructor(t){super(null),this.isDisabled=!1,this.canDrag=!1,this.canSwipe=!1,this.pressed=!1,this.dict={},this.onSwipeCmdName=null,this.swipeCfg=null,this.runtime={rexSwipe:null},this.refHitArea=null;const i=JSON.parse(JSON.stringify(this.constructor.properties));Object.assign(this,i,t)}setEnabled(t){this.isDisabled=!t}resizeInputAreaAsRectangle(t,i,n=null,o=null){this.refHitArea.setSize(t,i),null!=n&&(this.refHitArea.x=n),null!=o&&(this.refHitArea.y=o)}debugInput(){const t=VisualComponent.At(this.entity).getDisplayedAsImage();t.scene.input.enableDebug(t)}static At(t){return t.interactive}static AddPlain(t,i,n,o,a,u){if(t.has(Interactive))return void console.warn("CANT ADD COMPONENT SECOND TIME");const d={};n&&(d.up=BuildCommand(n)),i&&(d.down=BuildCommand(i)),o&&(d.over=BuildCommand(o)),a&&(d.move=BuildCommand(a)),u&&(d.always=BuildCommand(u)),t.add(Interactive,GetInitialData(d))}static AddWithCmdOnUpAndBtnInteraction(t,i,n=null){if(t.has(Interactive))return void console.warn("CANT ADD COMPONENT SECOND TIME");const o={};null==n&&(n=Xo.Name),n&&(o.always=BuildCommand(n)),o.up=BuildCommand(i),t.add(Interactive,GetInitialData(o))}static AddWithDrag(t,i=null,n=null,o=null){if(t.has(Interactive))return void console.warn("CANT ADD COMPONENT SECOND TIME");const a={};null==o&&(o=Xo.Name),o&&(a.always=BuildCommand(o)),i&&(a.down=BuildCommand(i)),n&&(a.up=BuildCommand(n)),t.add(Interactive,GetInitialData(a,{canDrag:!0}))}static AddWithSwipe(t,i,n={},o=null){if(t.has(Interactive))return void console.warn("CANT ADD COMPONENT SECOND TIME");const a={};null==o&&(o=Uo.Name),o&&(a.always=BuildCommand(o)),t.add(Interactive,GetInitialData(a,{canSwipe:!0,onSwipeCmdName:i,swipeCfg:n}))}static get properties(){return{}}}function GetInitialData(t,i=null){let n={dict:t};return i&&P(n,i),n}const Vo=class{static RegisterPackedAsGameCommand(){Y.register(this.Name,new GameCommand((t=>{Vo.Take(t.entity)})))}static Take(t){EndOfLoopRoutine.QueueActorToDisposeBuffer(t)}};let zo=Vo;__publicField(zo,"Name","DisposeEntityAction");const Wo=class{static RegisterPackedAsGameCommand(){Y.register(this.Name,new GameCommand((t=>{Wo.Take(t.entity)})))}static Take(t){const i=ToggleComponent.At(t);i.runCommandsAtCurrentState(),i.setToggleStateAsNext()}};let Ho=Wo;__publicField(Ho,"Name","RunEntityToggleLogic");const jo=class{static RegisterPackedAsGameCommand(){Y.register(this.Name,new GameCommand((t=>{jo.Take()})))}static Take(){BMEngine.UserMuteAudio()}};let qo=jo;__publicField(qo,"Name","GlobalMuteAudioAction");const Zo=class{static RegisterPackedAsGameCommand(){Y.register(this.Name,new GameCommand((t=>{Zo.Take()})))}static Take(){BMEngine.UserUnmuteAudio()}};let Ko=Zo;__publicField(Ko,"Name","GlobalUnmuteAudioAction");const Jo=new class CasualGameStates{constructor(){this.Always=new GameState("Always"),this.GameplayLoop=new GameState("GameplayLoop"),this.GameplayLevel=new GameState("GameplayLevel"),this.GameplayGui=new GameState("GameplayGui"),this.Cover=new GameState("Cover"),this.GameOver=new GameState("GameOver"),this.Fade=new GameState("Fade"),this.AudioController=new GameState("AudioController"),this.Pause=new GameState("Pause"),this.CommandRequestCover=Y.register("RequestCover",new GameCommand((()=>{BMEngine.SetPauseAllowedByStates(!1),this.Always.continue(),this.GameplayLoop.quit(),this.GameplayGui.quit(),this.GameplayLevel.enterFresh(),this.GameOver.quit(),this.Cover.enterFresh(),this.AudioController.continue()}))),this.CommandRequestCoverFromGameOver=Y.register("RequestCoverFromGameOver",new GameCommand((()=>{BMEngine.SetPauseAllowedByStates(!1),this.Always.continue(),this.GameplayLevel.exit(),this.GameplayGui.exit(),this.GameplayLoop.exit(),this.GameOver.exit(),this.AudioController.continue(),this.Fade.enterFresh(),EndOfLoopRoutine.QueueDelayedFunction(null,550,(()=>{this.Cover.enterFresh(),this.GameplayLevel.enterFresh(),this.Fade.exit()}))}))),this.CommandRequestGameplay=Y.register("RequestGameplay",new GameCommand((()=>{var func=()=>{BMEngine.SetPauseAllowedByStates(!0),this.Always.continue(),this.Cover.exit(),this.GameOver.quit(),this.GameplayLevel.continue(),this.GameplayGui.enterFresh(),this.GameplayLoop.enterFresh(),this.AudioController.continue()};window.startGame?window.startGame(func):func()}))),this.CommandRequestGameOver=Y.register("RequestGameOver",new GameCommand((()=>{BMEngine.SetPauseAllowedByStates(!0),this.Always.continue(),this.GameplayLevel.continue(),this.GameplayGui.continue(),this.GameplayLoop.exit(),this.Cover.quit(),this.GameOver.enterFresh(),this.AudioController.continue()}))),this.CommandRestartLevelLogic=Y.register("RestartLevelLogic",new GameCommand((()=>{BMEngine.SetPauseAllowedByStates(!0),this.Always.continue(),this.Cover.exit(),this.GameOver.quit(),this.GameplayLevel.exit(),this.GameplayGui.continue(),this.GameplayLoop.exit(),this.AudioController.continue(),EndOfLoopRoutine.QueueDelayedFunction(null,100,(()=>{var fStartNextLevel=()=>{this.GameplayLevel.enterFresh(),this.GameplayGui.continue(),this.GameplayLoop.enterFresh()};window.startGame?window.startGame(fStartNextLevel):fStartNextLevel()}))}))),this.CommandPauseGame=Y.register("PauseGame",new GameCommand((t=>{BMEngine.TryPauseGame()&&this.Pause.continue()}))),this.CommandUnpauseGame=Y.register("UnpauseGame",new GameCommand((t=>{BMEngine.TryUnpauseGame()&&this.Pause.quit()})))}};const Qo=new class PandaJumpPrefabs extends class CasualGameSharedPrefabs extends class CommonGamePrefabs{constructor(){this.EmptyObject=t=>GeoticManager.CreateEntity(t),this.GuiImageObject=(t,i,n="gui_22",o=null)=>{const a=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(a),a.add(VisualComponent,VisualTemplates.DefaultImage(i,{layerName:n})),"bottom"==o?CommandsComponent.AddWithData(a,{postmake:BuildCommand("TweenPositionFromBottom"),exit:BuildCommand("TweenPositionToBottom")}):"top"==o?CommandsComponent.AddWithData(a,{postmake:BuildCommand("TweenPositionFromTop"),exit:BuildCommand("TweenPositionToTop")}):null!=o&&(o.postmake&&CommandsComponent.AddWithData(a,{postmake:BuildCommand(o.postmake)}),o.exit&&CommandsComponent.AddWithData(a,{exit:BuildCommand(o.exit)})),a},this.GuiSpineObject=(t,i,n="Idle",o=0,a=0,u="gui_22",d={layerDepth:0})=>{console.assert(null!=t);const f=GeoticManager.CreateEntity(t);TransformComponent.AddToEntity(f,o,a);let p={curAnimation:n,animations:{[n]:{loop:!0}},layerName:u};P(p,d);const b=VisualTemplates.DefaultSpine(i,p);return f.add(VisualComponent,b),f},this.GuiButtonObject=(t,i,n,o="gui_22",a=null)=>{const u=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(u),u.add(VisualComponent,VisualTemplates.DefaultImage(i,{layerName:o})),"bottom"==a&&CommandsComponent.AddWithData(u,{postmake:BuildCommand("TweenPositionFromBottom"),exit:BuildCommand("TweenPositionToBottom")}),Interactive.AddWithCmdOnUpAndBtnInteraction(u,n),u},this.GuiFont=(t,i,n)=>{const o=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(o),o.add(VisualComponent,VisualTemplates.DefaultText(i,{layerName:n})),o},this.GameplayImageObject=(t,i,n=0,o=0,a={})=>{const u=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(u,n,o),u.add(VisualComponent,VisualTemplates.DefaultImage(i,a)),u},this.GameplayZoneObject=(t,i=0,n=0,o={})=>{const a=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(a,i,n),a.add(VisualComponent,VisualTemplates.DefaultZone(o)),a},this.GameplaySpineObject=(t,i,n="Idle",o=0,a=0,u={layerDepth:0})=>{console.assert(null!=t);const d=GeoticManager.CreateEntity(t);TransformComponent.AddToEntity(d,o,a);let f={curAnimation:n,animations:{[n]:{loop:!0}}};return P(f,u),d.add(VisualComponent,VisualTemplates.DefaultSpine(i,f)),d},this.GameplaySpineObjectDieAfterAnim=(t,i,n="Idle",o=0,a=0,u={layerDepth:0})=>{let d={curAnimation:n,layerDepth:0,animations:{[n]:{loop:!1,onAnimationLoopedCmd:BuildCommand(zo.Name,{})}}};return P(d,u),this.GameplaySpineObject(t,i,n,o,a,d)},this.GameplayTextObject=(t,i,n=0,o=0,a=null)=>{const u=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(u,n,o),u.add(VisualComponent,VisualTemplates.DefaultText(i,a)),u},this.GameplayParticleObject=(t,i,n=0,o=0,a={})=>{const u=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(u,n,o),u.add(VisualComponent,VisualTemplates.DefaultParticle(i,a)),u}}}{constructor(){super(),this.Background=t=>{const i=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultImage("BG")),i},this.CoverTitle=t=>{const i=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultImage("GameTitle",{layerName:"gui_22"})),CommandsComponent.AddWithData(i,{postmake:BuildCommand("TweenCoverTitle"),exit:BuildCommand("TweenPositionToTop")}),i},this.CoverLogo=(t,i)=>{const n=this.GuiImageObject(t,"BM_Logo",i);let o="TweenPositionFromTop",a="TweenPositionToTop";return"gui_33"==i&&(o="TweenPositionFromBottom",a="TweenPositionToBottom"),CommandsComponent.AddWithData(n,{postmake:BuildCommand(o,{delay:200}),exit:BuildCommand(a)}),n},this.ScorePanel=(t,i)=>{const n=this.GuiImageObject(t,"ScorePanel",i);return CommandsComponent.AddWithData(n,{postmake:BuildCommand("TweenPositionFromTop",{delay:100}),exit:BuildCommand("TweenPositionToTop")}),n},this.CoverScoreFont=t=>{const i=GeoticManager.CreateEntity(t);return BagsComponent.At(i).setAlias("AliasCoverScoreText"),TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultText("scorefont",{layerName:"gui_11"})),i},this.CoverHighscoreIcon=t=>{const i=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultImage("HighscoreIcon",{layerName:"gui_11"})),i},this.CoverPlayBtn=t=>{const i=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultImage("Btn_Play",{layerName:"gui_22"})),CommandsComponent.AddWithData(i,{postmake:BuildCommand("TweenPositionFromBottom",{duration:800,delay:300}),exit:BuildCommand("TweenPositionToBottom")}),Interactive.AddWithCmdOnUpAndBtnInteraction(i,"RequestGameplay"),i},this.GameOverRestartIcon=t=>{const i=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultImage("TryAgain",{layerName:"gui_22"})),CommandsComponent.AddWithData(i,{postmake:BuildCommand("TweenPositionFromTop",{delay:100}),exit:BuildCommand("TweenPositionToTop")}),i},this.GameOverPlayBtn=t=>{const i=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultImage("Btn_Play",{layerName:"gui_22"})),CommandsComponent.AddWithData(i,{postmake:BuildCommand("TweenPositionFromBottom"),exit:BuildCommand("TweenPositionToBottom")}),Interactive.AddWithCmdOnUpAndBtnInteraction(i,"RequestCoverFromGameOver"),i},this.GameOverHighscoreIcon=t=>{const i=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultImage("HighscoreIcon",{layerName:"gui_11"})),CommandsComponent.AddWithData(i,{postmake:BuildCommand("TweenPositionFromTop"),exit:BuildCommand("TweenPositionToTop")}),i},this.FadeCurtain=t=>{const i=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultImage("ZaslonkaFade",{layerName:"pause_22",scale:32})),CommandsComponent.AddWithData(i,{exit:BuildCommand("TweenAlphaTo",{alpha:0,duration:400})}),i},this.PauseBackground=t=>{const i=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultImage("PauseCurtain",{layerName:"pause_22",scale:32})),i},this.PauseIcon=t=>{const i=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultImage("PauseIcon",{layerName:"pause_22"})),i},this.PauseButtonCallUnpause=t=>{const i=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultImage("Btn_Play",{layerName:"pause_22"})),Interactive.AddWithCmdOnUpAndBtnInteraction(i,"UnpauseGame"),i},this.BtnAudioToggle=t=>{const i=GeoticManager.CreateEntity(t);return BagsComponent.At(i).setAlias("SettingsToggleBtnAudio"),TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultImage("Btn_SoundOn",{layerName:"gui_31",animations:{active:{texture:"Btn_SoundOn"},inactive:{texture:"Btn_SoundOff"}}})),CommandsComponent.AddWithData(i,{postmake:BuildCommand("TweenPositionFromTop"),exit:BuildCommand("TweenPositionToTop")}),Interactive.AddWithCmdOnUpAndBtnInteraction(i,Ho.Name),ToggleComponent.AddWithToggleStatesDictionary(i,"active",{active:{nextState:"inactive",command:BuildCommand(qo.Name)},inactive:{nextState:"active",command:BuildCommand(Ko.Name)}}),i},this.TutorialHowToPlayHand=(t,i=null)=>{const n=GeoticManager.CreateEntity(t);BagsComponent.At(n).setAlias("TutorialHowToPlayHand"),TransformComponent.AddToEntity(n);const o={selfDepth:50,layerDepth:25,curAnimation:"SwipeRight",animations:{Hold:{loop:!0},SwipeRight:{loop:!0}}};return i&&P(o,i),n.add(VisualComponent,VisualTemplates.DefaultSpine("HTP_MinimalHand",o)),n},this.GameplayBtnPause=t=>{const i=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultImage("Btn_Pause",{layerName:"gui_31"})),CommandsComponent.AddWithData(i,{postmake:BuildCommand("TweenPositionFromRight"),exit:BuildCommand("TweenPositionToRight")}),Interactive.AddWithCmdOnUpAndBtnInteraction(i,"PauseGame"),i},this.GameplayScoreFont=t=>{const i=GeoticManager.CreateEntity(t);return BagsComponent.At(i).setAlias("GameplayScoreText"),TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultText("scorefont",{layerName:"gui_11"})),i},this.GameplayScoreIcon=t=>{const i=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultImage("ScoreIcon",{layerName:"gui_11"})),i}}}{constructor(){super()}DecayedHalfPlatforms(t,i){const n=Jo.GameplayLevel.name,o=this.GameplayImageObject(n,"OneTimePlatform_PartLeft",t-28,i,{layerDepth:11});BagsComponent.AddBagList(o,["CHECK_OFFSCREEN_DIE"]),PhysicsComponent.AddToEntity(o,{}),PhysicsComponent.At(o).getBodyAsDynamic().setGravity(0,700),PhysicsComponent.At(o).getBodyAsDynamic().setVelocity(-70,200),PhysicsComponent.At(o).getBodyAsDynamic().setAngularVelocity(25);const a=this.GameplayImageObject(n,"OneTimePlatform_PartRight",t+28,i,{layerDepth:11});BagsComponent.AddBagList(a,["CHECK_OFFSCREEN_DIE"]),PhysicsComponent.AddToEntity(a,{}),PhysicsComponent.At(a).getBodyAsDynamic().setGravity(0,700),PhysicsComponent.At(a).getBodyAsDynamic().setVelocity(70,200),PhysicsComponent.At(a).getBodyAsDynamic().setAngularVelocity(-25)}};function CmdTweenAlphaTo(t,i){let n={duration:1e3,delay:0,ease:"Cubic.InOut"};null!=i.alpha||(i.alpha=1),P(n,i),VisualComponent.At(t).tweenAlpha(n)}const $o=new class InternalDataClass$6{constructor(){this.query}};class ReactivePinOthersQuery{static RegisterQuery(){$o.query=GeoticManager.GetWorld().createQuery({all:[PinOthers,TransformComponent]}),$o.query.onEntityAdded((t=>{})),$o.query.onEntityRemoved((t=>{}))}static GetReference(){return $o.query}}const ta=new class InternalDataClass$5{constructor(){__publicField(this,"active",!0),__publicField(this,"queryPinOthers",null)}};class SynchPinsRoutine{static Register(){RoutinesManager.RegisterRoutine(SynchPinsRoutine)}static OnRegister(){}static Init(){ta.queryPinOthers=ReactivePinOthersQuery.GetReference()}static GetName(){return"SynchPinsRoutine"}static UpdateEntity(t){let i=PinOthers.At(t).pinnedEntitiesList;for(let n=0;n<i.length;n++){let o=i[n].ref,a=i[n].relation;if(!o.isDestroyed){const i=TransformComponent.At(o),n=TransformComponent.At(t);i.refTarget.x=n.refTarget.x+a.x,i.refTarget.y=n.refTarget.y+a.y}}}static Update(t){const i=ta.queryPinOthers._cache;for(let n=0;n<i.length;n++){let t=i[n];SynchPinsRoutine.UpdateEntity(t)}}}class PinOthers extends Component{constructor(t){super(null),this.pinnedEntitiesList=[],this.killPinnedOnDestroy=!1;const i=JSON.parse(JSON.stringify(this.constructor.properties));Object.assign(this,i,t)}addPin(t,i){null!=i.x||(i.x=0),null!=i.y||(i.y=0),this.pinnedEntitiesList.push({ref:t,relation:i}),SynchPinsRoutine.UpdateEntity(this.entity)}onDestroyed(){if(super.onDestroyed(),this.killPinnedOnDestroy)for(let t=0;t<this.pinnedEntitiesList.length;t++){const i=this.pinnedEntitiesList[t].ref;zo.Take(i)}}unpinAll(){this.pinnedEntitiesList=[]}static AddWithPin(t,i,n,o=!0){t.has(PinOthers)||t.add(PinOthers);const a=PinOthers.At(t);a.addPin(i,n),a.killPinnedOnDestroy=o}static At(t){return t.pinOthers}static get properties(){return{}}}const ea=class{static RegisterPackedAsGameCommand(){Y.register(this.Name,new GameCommand((t=>{ea.Take(t.entity,t.x,t.y)})))}static Take(t,i=null,n=null){TransformComponent.At(t).setPosition(i,n)}};let ia=ea;__publicField(ia,"Name","RepositionEntityToAction");class CasualGamePremadeOverrides{constructor(){this.cover={delta:{x:0,y:0}},this.coverBtnPlay={delta:{x:0,y:0}},this.scorePanel={layer:"gui_11",x:0,y:0},this.coverLogo={layer:"gui_31"},this.gameplayScoreIcon={x:-145,y:0},this.coverScoreIcon={x:-145,y:3}}}const na=new class GameSpecificPremades extends class CasualGamePremades{constructor(){this.overrides=new CasualGamePremadeOverrides}Always(t,i){console.warn("PLEASE DON'T CALL ALWAYS ON CASUAL PREMADES")}GameplayLevel(t,i){}GameplayLoop(t,i){const n=t.GameplayBtnPause(i.name);Oo.Take(n,-.5,.5),Gr.Take(n,0,80),CommandsComponent.At(n).runCommandAtTriggerKey("postmake")}AudioController(t,i){const n=t.BtnAudioToggle(i.name);Oo.Take(n,-.5,.5),Gr.Take(n,0,7),CommandsComponent.At(n).runCommandAtTriggerKey("postmake")}GameOver(t,i){const n=t.GameOverRestartIcon(i.name);Oo.Take(n,0,-.5),Gr.Take(n,0,-30),CommandsComponent.At(n).runCommandAtTriggerKey("postmake");const o=t.GameOverPlayBtn(i.name);Oo.Take(o,0,.5),Gr.Take(o,0,30),CommandsComponent.At(o).runCommandAtTriggerKey("postmake")}Fade(t,i){const n=t.FadeCurtain(i.name);CommandsComponent.At(n).runCommandAtTriggerKey("postmake"),VisualComponent.At(n).getDisplayedAsImage().alpha=0,CmdTweenAlphaTo(n,{alpha:1,duration:450})}Pause(t,i){t.PauseBackground(i.name);const n=t.PauseIcon(i.name);Oo.Take(n,0,-.5),Gr.Take(n,0,-40);const o=t.PauseButtonCallUnpause(i.name);Oo.Take(o,0,.5),Gr.Take(o,0,40),CommandsComponent.At(o).runCommandAtTriggerKey("postmake")}GameplayGui(t,i){P(this.overrides,n.GetSingleton().getPremadeOverrides());const o=t.ScorePanel(i.name,this.overrides.scorePanel.layer);ia.Take(o,this.overrides.scorePanel.x,this.overrides.scorePanel.y),"gui_11"==this.overrides.scorePanel.layer&&Oo.Take(o,.5,.5),"gui_21"==this.overrides.scorePanel.layer&&Oo.Take(o,0,.5),CommandsComponent.At(o).runCommandAtTriggerKey("postmake");const a=t.GameplayScoreFont(i.name);OperateOnVisual.ReparentLayer(a,this.overrides.scorePanel.layer),PinOthers.AddWithPin(o,a,{x:25,y:2});const u=t.GameplayScoreIcon(i.name);OperateOnVisual.ReparentLayer(u,this.overrides.scorePanel.layer),BagsComponent.At(u).setAlias("AliasGameplayGuiScoreIcon"),PinOthers.AddWithPin(o,u,{x:this.overrides.gameplayScoreIcon.x,y:this.overrides.gameplayScoreIcon.y})}Cover(t,i){P(this.overrides,n.GetSingleton().getPremadeOverrides());const o=t.CoverTitle(i.name);Oo.Take(o,0,-.5),Gr.Take(o,this.overrides.cover.delta.x,this.overrides.cover.delta.y),CommandsComponent.At(o).runCommandAtTriggerKey("postmake");const a=t.CoverLogo(i.name,this.overrides.coverLogo.layer);"gui_31"==this.overrides.coverLogo.layer?(Oo.Take(a,-.5,.5),Gr.Take(a,-85,8)):(Oo.Take(a,-.5,-.5),Gr.Take(a,-10,-10)),CommandsComponent.At(a).runCommandAtTriggerKey("postmake");const u=t.ScorePanel(i.name,this.overrides.scorePanel.layer);ia.Take(u,this.overrides.scorePanel.x,this.overrides.scorePanel.y),BagsComponent.At(u).setAlias("AliasCoverScorePanel"),"gui_11"==this.overrides.scorePanel.layer&&Oo.Take(u,.5,.5),"gui_21"==this.overrides.scorePanel.layer&&Oo.Take(u,0,.5),CommandsComponent.At(u).runCommandAtTriggerKey("postmake");const d=t.CoverScoreFont(i.name);OperateOnVisual.ReparentLayer(d,this.overrides.scorePanel.layer),PinOthers.AddWithPin(u,d,{x:25,y:2});const f=t.CoverHighscoreIcon(i.name);BagsComponent.At(f).setAlias("AliasCoverScoreIcon"),OperateOnVisual.ReparentLayer(f,this.overrides.scorePanel.layer),PinOthers.AddWithPin(u,f,{x:this.overrides.coverScoreIcon.x,y:this.overrides.coverScoreIcon.y});const p=t.CoverPlayBtn(i.name);Oo.Take(p,0,.5),Gr.Take(p,this.overrides.coverBtnPlay.delta.x,150+this.overrides.coverBtnPlay.delta.y),CommandsComponent.At(p).runCommandAtTriggerKey("postmake")}}{constructor(){super(),this.overrides.cover.delta.y=-100,this.overrides.coverBtnPlay.delta.y=-120}Always(t,i){const n=t.Background(i);VisualComponent.At(n).getDisplayedAsImage().setScale(8,8)}GameplayLoop(t,i){super.GameplayLoop(t,i)}};class FollowPointerMovementComponent extends Component{constructor(t){super(null),this.enabled=!0,this.processPointerConstantly=!0,this.processAxisX=!0,this.processAxisY=!0,this.boundsAxisX=null,this.boundsAxisY=null,this.offsetX=0,this.offsetY=0,this.speed=null;const i=JSON.parse(JSON.stringify(this.constructor.properties));Object.assign(this,i,t)}static GetName(){return"followPointerMovement"}static get properties(){return{}}static At(t){return t.followPointerMovement}static AddToEntity(t,i){t.add(FollowPointerMovementComponent,i)}}const sa=Qo,ra=Jo;function _SpawnPlatform(t,i,n,o,a,u){const d=ra.GameplayLevel.name,f=sa.GameplayImageObject(d,function GetTextureRegularPlatform(){return Phaser.Utils.Array.GetRandom(["Platform_Regular_01","Platform_Regular_02","Platform_Regular_03","Platform_Regular_04"])}(),t,i,{layerDepth:10});PhysicsComponent.AddToEntity(f,{groupsList:["PLATFORM"]}),BagsComponent.AddBagList(f,["CHECK_OFFSCREEN_DIE"]),i<No.currentLevelData.highestPlatformY&&(No.currentLevelData.highestPlatformY=i);let p=null;n&&(p=function _SpawnSpring(t,i){const n=ra.GameplayLevel.name,o=sa.GameplayImageObject(n,"Spring",t,i-35,{layerDepth:8});return PhysicsComponent.AddToEntity(o,{groupsList:["SPRING"]}),BagsComponent.AddBagList(o,["CHECK_OFFSCREEN_DIE"]),o}(t,i),No.currentLevelData.highestPlatformY-=30,PinOthers.AddWithPin(f,p,TransformComponent.CalculateDeltaBetween(f,p)));let b=null;a&&(b=function _SpawnWatermelon(t,i){const n=ra.GameplayLevel.name,o=sa.GameplayImageObject(n,"Watermelon",t,i-45,{layerDepth:20});return PhysicsComponent.AddToEntity(o,{groupsList:["PICKABLE"]}),BagsComponent.AddBagList(o,["CHECK_OFFSCREEN_DIE"]),VisualComponent.At(o).tweenScale({scale:.8,duration:Phaser.Math.Between(350,450),delay:0,ease:"Linear",repeat:-1,yoyo:!0}),o}(t,i),PinOthers.AddWithPin(f,b,TransformComponent.CalculateDeltaBetween(f,b)));let S=null;if(u&&(S=function _SpawnBrick(t,i){const n=ra.GameplayLevel.name,o=sa.GameplayImageObject(n,"Murek",t,i+20,{layerDepth:9});return BagsComponent.AddBagList(o,["BRICKS"]),PhysicsComponent.AddToEntity(o,{groupsList:["BRICK"]}),BagsComponent.AddBagList(o,["CHECK_OFFSCREEN_DIE"]),o}(t,i),PinOthers.AddWithPin(f,S,TransformComponent.CalculateDeltaBetween(f,S))),o){const n=sa.GameplaySpineObject(d,"Wiatraczek","spin",t-55,i,{layerDepth:15,loop:!0});PinOthers.AddWithPin(f,n,TransformComponent.CalculateDeltaBetween(f,n)),DataComponent.At(f).refWiatrak_1=n;const o=sa.GameplaySpineObject(d,"Wiatraczek","spin",t+55,i,{layerDepth:15,loop:!0});PinOthers.AddWithPin(f,o,TransformComponent.CalculateDeltaBetween(f,o)),DataComponent.At(f).refWiatrak_2=o,BagsComponent.AddBagList(f,["MOVING_PLATFORM"]),DataComponent.AddToEntityWithProperties(f,{direction:Phaser.Utils.Array.GetRandom([-1,1])})}return f}function _SpawnDecayedPlatform(t,i){const n=ra.GameplayLevel.name,o=sa.GameplayImageObject(n,function GetTextureOneTimePlatform(){return Phaser.Utils.Array.GetRandom(["Platform_OneTime_01","Platform_OneTime_02","Platform_OneTime_03","Platform_OneTime_04"])}(),t,i,{layerDepth:10});PhysicsComponent.AddToEntity(o,{groupsList:["PLATFORM_DECAYED"]}),BagsComponent.AddBagList(o,["CHECK_OFFSCREEN_DIE"]),i<No.currentLevelData.highestPlatformY&&(No.currentLevelData.highestPlatformY=i)}function _SpawnSkyPasek(t,i){const n=ra.GameplayLevel.name,o=sa.GameplayImageObject(n,"PasekNieba",t,i,{layerDepth:5});BagsComponent.AddBagList(o,["SKY_CHECK_OFFSCREEN_REPOSITION"]),VisualComponent.At(o).getDisplayedAsImage().setScale(8,1)}function _SpawnCloud(t,i){const n=ra.GameplayLevel.name,o=sa.GameplayImageObject(n,function GetTextureCloud(){return Phaser.Utils.Array.GetRandom(["Cloud_01","Cloud_02","Cloud_03","Cloud_04","Cloud_05","Cloud_06","Cloud_07"])}(),t,i,{layerDepth:7});return BagsComponent.AddBagList(o,["CLOUD_CHECK_OFFSCREEN_REPOSITION"]),o}function LevelStartGeneration(){const t=ra.GameplayLevel.name;for(let i=0;i<10;i++)_SpawnSkyPasek(0,2*i*128);{let t=1500;for(;t>-1500;){const i=_SpawnCloud(Phaser.Math.Between(-300,300),t),n=VisualComponent.At(i);Phaser.Math.Between(0,100)<50&&_SpawnCloud(Phaser.Math.Between(400,600),t+Phaser.Math.Between(-50,50)),t-=n.getDisplayedAsImage().displayHeight+Phaser.Math.Between(100,300)}}{const t=[{x:0+Phaser.Math.Between(-10,10),y:900},{x:-200+Phaser.Math.Between(-10,10),y:550+Phaser.Math.Between(0,50)},{x:200+Phaser.Math.Between(-10,10),y:550+Phaser.Math.Between(0,50)},{x:-140+Phaser.Math.Between(-10,10),y:900+Phaser.Math.Between(25,50)},{x:-280+Phaser.Math.Between(-10,10),y:900+Phaser.Math.Between(25,50)},{x:-420+Phaser.Math.Between(-10,10),y:900+Phaser.Math.Between(25,50)},{x:-560+Phaser.Math.Between(-10,10),y:900+Phaser.Math.Between(25,50)},{x:140+Phaser.Math.Between(-10,10),y:900+Phaser.Math.Between(25,50)},{x:280+Phaser.Math.Between(-10,10),y:900+Phaser.Math.Between(25,50)},{x:420+Phaser.Math.Between(-10,10),y:900+Phaser.Math.Between(25,50)},{x:560+Phaser.Math.Between(-10,10),y:900+Phaser.Math.Between(25,50)}];for(let i=0;i<t.length;i++){const n=_SpawnPlatform(t[i].x,t[i].y);0==i&&(DataComponent.At(n).isFirst=!0)}}{let i="Panda";0==BMEngine.IsCanvas()&&(i="Panda_Mesh");const n=sa.GameplaySpineObject(t,i,"down",0,850,{layerDepth:20,loop:!0});BagsComponent.At(n).setAlias("player"),DataComponent.AddToEntityWithProperties(n,{velocityY:-150,jumpDelay:0}),VisualComponent.At(n),OperateOnVisual.GetDisplayedAsAny(n).setMix("up","down",.15),OperateOnVisual.GetDisplayedAsAny(n).setMix("down","up",.15),PhysicsComponent.AddToEntity(n,{groupsList:["PLAYER"]}),PhysicsComponent.At(n).resizeDeltaOwnSize(-70,-45,40,40),FollowPointerMovementComponent.AddToEntity(n,{enabled:!1,processAxisY:!1,boundsAxisX:{min:-600,max:600},speed:600})}}function _GetIsDecayedPlatform(){const t=No.currentLevelData.difficulty;return Phaser.Math.Between(0,100)<30+10*t}function UpdateMapGeneration(t){const i=EntityKeeper.GetEntityByAlias("player");if(!i)return;VisualComponent.At(i);const n=DataComponent.At(i),o=TransformComponent.At(i);!function UpdateDifficulty(){const t=No.currentLevelData.difficulty,i=No.currentLevelData.totalSpawnedPlatform;1==t&&i>50&&(No.currentLevelData.difficulty=2),1==t&&i>150&&(No.currentLevelData.difficulty=3),1==t&&i>500&&(No.currentLevelData.difficulty=4)}();const a=No.currentLevelData.difficulty;if(o.refTarget.y-No.currentLevelData.highestPlatformY<1e3){const t=[],i=Phaser.Math.Between(-240,-60);t.push({x:Phaser.Math.Between(-300,300),y:i+Phaser.Math.Between(0,50),isDecayed:!1}),Phaser.Math.Between(0,100)<80-10*a&&Phaser.Math.Between(0,100)<100&&t.push({x:Phaser.Math.Between(-300,300),y:i+-80+Phaser.Math.Between(0,5),isDecayed:_GetIsDecayedPlatform()}),Phaser.Math.Between(0,100)<80-10*a&&Phaser.Math.Between(0,100)<100&&t.push({x:Phaser.Math.Between(-300,300),y:i+-160+Phaser.Math.Between(0,5),isDecayed:_GetIsDecayedPlatform()}),Phaser.Math.Between(0,100)<80-10*a&&Phaser.Math.Between(0,100)<100&&t.push({x:Phaser.Math.Between(-300,300),y:i+-240+Phaser.Math.Between(0,5),isDecayed:_GetIsDecayedPlatform()}),Phaser.Math.Between(0,100)<100&&t.push({x:Phaser.Math.Between(-300,300),y:i-320+Phaser.Math.Between(0,10),isDecayed:!1});const o=No.currentLevelData.highestPlatformY;let u=!1,d=!1,f=!1,p=!1;for(let b=0;b<t.length;b++){const i=t[b];let S=!1;Phaser.Math.Between(0,100)<30-5*a&&(S=!0),No.currentLevelData.toNextSpring-=1,No.currentLevelData.toNextSpring>0&&(S=!1,u=!1);let M=!1;Phaser.Math.Between(0,100)<50&&(M=!0);let C=!1;Phaser.Math.Between(0,100)<15*a&&(C=!0);let P=!1;Phaser.Math.Between(0,100)<25*a&&(P=!0),d&&(C=!0),u&&(S=!0),f&&(M=!0),p&&(P=!0),d=!1,u=!1,f=!1,p=!1,n.flyTime>0&&(P=!1);let R=i.isDecayed;R&&(S&&(u=!0),C&&(d=!0),M&&(f=!0),S=!1,C=!1,R=!0),S&&(M=!1),No.currentLevelData.totalSpawnedPlatform+=1,R?_SpawnDecayedPlatform(i.x,o+i.y):_SpawnPlatform(i.x,o+i.y,S,C,M,P)}}}const oa=new class InternalModel$1{constructor(){this.LevelStartGeneration=LevelStartGeneration,this.UpdateMapGeneration=UpdateMapGeneration}};const aa=new class PandaJumpStatesController{EnterGameplayLevel(){BMEngine.SetGameplayCameraOffset(0,0,!0),oa.LevelStartGeneration()}EnterGameplayLoop(){const t=EntityKeeper.GetEntityByAlias("player");t&&(FollowPointerMovementComponent.At(t).enabled=!0)}};function CmdTweenPositionTo(t,i,n=!0){n&&VisualComponent.At(t).fastTrackPosition();let o={duration:1e3,delay:0,ease:"Cubic.InOut"};null!=i.x||(i.x=OperateOnVisual.GetDisplayed(t).x),null!=i.y||(i.y=OperateOnVisual.GetDisplayed(t).y),P(o,i),VisualComponent.At(t).tweenPosition(o)}let ha={version:"1",highscore:0};const la=No,ua=na,ca=Jo,da=Qo,fa=aa;const pa=new class InternalMainScript{Init(){Fo.AddGroup("PLAYER"),Fo.AddGroup("PLATFORM"),Fo.AddGroup("SPRING"),Fo.AddGroup("PLATFORM_DECAYED"),Fo.AddGroup("PICKABLE"),Fo.AddGroup("BRICK");(()=>{ca.AudioController.onEnter=()=>{if(ua.AudioController(da,ca.AudioController),-1==BMEngine.GetAudioState()){const t=EntityKeeper.GetEntityByAlias("SettingsToggleBtnAudio");ToggleComponent.At(t).setToggleState("inactive")}},ca.Pause.onEnter=()=>{ua.Pause(da,ca.Pause)},ca.Fade.onEnter=()=>{ua.Fade(da,ca.Fade)},ca.Always.onEnter=()=>{ua.Always(da,ca.Always)},ca.GameplayGui.onEnter=()=>{ua.GameplayGui(da,ca.GameplayGui),this.AddToScore(0)},ca.GameplayLoop.onEnter=()=>{ua.GameplayLoop(da,ca.GameplayLoop),this.StateEnterGameplayLoop()},ca.GameplayLoop.onExit=()=>{},ca.GameplayLevel.onEnter=()=>{ua.GameplayLevel(da,ca.GameplayLevel),n.GetSingleton().hasToResetScoreEachLevel()&&(la.subsession.score=0,la.subsession.latestScore=0),this.AddToScore(0),this.StateEnterGameplayLevel()},ca.Cover.onEnter=()=>{ua.Cover(da,ca.Cover),la.ResetSubsession(),null!=ha&&OperateOnVisual.SetTextWithZeroPad(EntityKeeper.GetEntityByAlias("AliasCoverScoreText"),ha.highscore,6)},ca.GameOver.onEnter=()=>{if(ua.GameOver(da,ca.GameOver),this.TrySaveNewHighscore()){const t=da.GameOverHighscoreIcon(ca.GameOver);Oo.Take(t,.5,.5),Gr.Take(t,10,80),CommandsComponent.At(t).runCommandAtTriggerKey("postmake")}}})()}AddToScore(t){la.subsession.score+=t,la.subsession.latestScore=la.subsession.score,n.GetSingleton().onUpdateScore(la.subsession.latestScore),EntityKeeper.GetEntityByAlias("GameplayScoreText")&&OperateOnVisual.SetTextWithZeroPad(EntityKeeper.GetEntityByAlias("GameplayScoreText"),la.subsession.score,6)}ShowTutorialHand(t="ActuallyHold",i=0,n=300){const o=da.TutorialHowToPlayHand(ca.GameplayLevel);return VisualComponent.At(o).getSpineAnimationList(!1),GetOs().desktop?VisualComponent.At(o).setAnimation("Mouse",{loop:!1}):VisualComponent.At(o).setAnimation(t,{loop:!1}),TransformComponent.At(o).setPosition(i,n),o}TrySaveNewHighscore(){return ha.highscore<la.subsession.score&&(ha.highscore=la.subsession.score,BMEngine.SaveGame(),!0)}TryKillTutorial(){let t=EntityKeeper.GetEntityByAlias("TutorialHowToPlayHand");t&&EndOfLoopRoutine.QueueActorToDisposeBuffer(t)}RequestLevelWon(){la.session.seenTutorial=!0,la.currentLevelData.levelLoopEnded||(la.currentLevelData.levelLoopEnded=!0,this.TrySaveNewHighscore(),EndOfLoopRoutine.QueueDelayedFunction(null,750,(()=>{n.GetSingleton().showAd((()=>{})),ca.CommandRestartLevelLogic.run({levelResult:"won"})})),LogicLoopRoutine.CleanFunction("LOOP_COUNT_GAMEPLAY_TIME"))}RequestLevelLost(){la.session.seenTutorial=!0,la.currentLevelData.levelLoopEnded||(la.currentLevelData.levelLoopEnded=!0,this.TryKillTutorial(),ca.CommandRequestGameOver.run(),n.GetSingleton().showAd((()=>{})),LogicLoopRoutine.CleanFunction("LOOP_COUNT_GAMEPLAY_TIME"))}StateEnterGameplayLevel(){la.ResetLevelData(),fa.EnterGameplayLevel()}StateEnterGameplayLoop(){if(la.currentLevelData.levelLoopStarted=!0,0==la.session.seenTutorial){const n=this.ShowTutorialHand("ActuallyHold",-100,600);la.session.seenTutorial=!0;var t={x:300,y:TransformComponent.At(n).refTarget.y,onComplete:null},i={x:-300,y:TransformComponent.At(n).refTarget.y,onComplete:null};t.onComplete=()=>{n.isDestroyed||CmdTweenPositionTo(n,i,!1)},i.onComplete=()=>{n.isDestroyed||CmdTweenPositionTo(n,t,!1)},CmdTweenPositionTo(n,t,!1)}LogicLoopRoutine.SetUpdateFunc("LOOP_COUNT_GAMEPLAY_TIME",(t=>{if(0==la.currentLevelData.levelLoopStarted)return;if(1==la.currentLevelData.levelLoopEnded)return;const i=DeltaScaled(t);la.currentLevelData.activeLevelTime+=i})),fa.EnterGameplayLoop()}};const ga=new class InternalDataClass$4{constructor(){this.query}};class ReactiveInteractiveAndVisualQuery{static RegisterQuery(){ga.query=GeoticManager.GetWorld().createQuery({all:[Interactive,VisualComponent]}),ga.query.onEntityAdded((t=>{const i=VisualComponent.At(t),n=Interactive.At(t);i.getDisplayedAsImage().setInteractive(),n.refHitArea=i.refDisplayed.input.hitArea})),ga.query.onEntityRemoved((t=>{}))}static GetReference(){return ga.query}}const va=new class Data{constructor(){this.trackedTaps={},this.trackedInputs=[{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null}],this.keys={},this.sinceButtonPress=1e4,this.swipe=null,this.swipeCallback=null,this.keyCallbacks={}}};class InputRoutine{static Register(){RoutinesManager.RegisterRoutine(InputRoutine)}static OnRegister(){ReactiveInteractiveAndVisualQuery.GetReference().onEntityAdded((t=>{!function _AddActorInteractivity(t){const i=OperateOnVisual.GetDisplayedAsImage(t),n=Interactive.At(t);if(n.canSwipe){const t=BMEngine.GetGameplayScene();let o={threshold:35,velocityThreshold:10,workaroundEnabled:1,workaroundMaxTime:1e3};P(o,n.swipeCfg),t.rexGestures.add.swipe(i,o).on("swipe",((t,i,n)=>{const o=Interactive.At(i.selfEntity);Y.runCommand(o.onSwipeCmdName,{entity:i.selfEntity,swipe:t})}))}i.on("pointerup",(function(i,o,a,u){BMEngine.IsRotationDisplayed()||n.pressed&&X.getData(DataComponent.At(t).gameStateName).isRunning()&&(_RemoveButtonTracking(t),_PerformInteraction(t,"always","up"),n.isDisabled||_PerformInteraction(t,"up","up"))})),i.on("pointerdown",(function(i,o,a,u){BMEngine.IsRotationDisplayed()||X.getData(DataComponent.At(t).gameStateName).isRunning()&&(n.isDisabled||(_PerformInteraction(t,"always","down"),_PerformInteraction(t,"down","down"),n.pressed=!0,function _AddButtonTracking(t,i){va.trackedInputs[i].obj?console.warn("ALREADY TRACKING BUTTON AT ID: ",i):va.trackedInputs[i].obj=t}(t,i.id)))})),i.on("pointerover",(function(i,o,a,u){BMEngine.IsRotationDisplayed()||X.getData(DataComponent.At(t).gameStateName).isRunning()&&(n.isDisabled||n.pressed||(_PerformInteraction(t,"always","over"),_PerformInteraction(t,"over","over")))})),i.on("pointermove",(function(i,o,a,u){BMEngine.IsRotationDisplayed()||X.getData(DataComponent.At(t).gameStateName).isRunning()&&(n.isDisabled||n.pressed&&(_PerformInteraction(t,"always","move"),_PerformInteraction(t,"move","move")))})),i.on("pointerout",(function(i,o,a,u){BMEngine.IsRotationDisplayed()||X.getData(DataComponent.At(t).gameStateName).isRunning()&&(n.pressed||(_PerformInteraction(t,"always","out"),_PerformInteraction(t,"out","out")))}))}(t)})),ReactiveInteractiveAndVisualQuery.GetReference().onEntityRemoved((t=>{_RemoveButtonTracking(t),OperateOnVisual.GetDisplayedAsImage(t).removeInteractive()}))}static Init(){const t=BMEngine.GetGameplayScene();t.input.addPointer(10),va.trackedInputs[0].input=t.input.mousePointer,va.trackedInputs[1].input=t.input.pointer1,va.trackedInputs[2].input=t.input.pointer2,va.trackedInputs[3].input=t.input.pointer3,va.trackedInputs[4].input=t.input.pointer4,va.trackedInputs[5].input=t.input.pointer5,va.trackedInputs[6].input=t.input.pointer6,va.trackedInputs[7].input=t.input.pointer7,va.trackedInputs[8].input=t.input.pointer8,va.trackedInputs[9].input=t.input.pointer9,va.trackedInputs[10].input=t.input.pointer10,va.keys.w=t.input.keyboard.addKey("w"),va.keys.s=t.input.keyboard.addKey("s"),va.keys.a=t.input.keyboard.addKey("a"),va.keys.d=t.input.keyboard.addKey("d"),va.keys[" "]=t.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE),va.keys["/"]=t.input.keyboard.addKey("/"),va.keys.right=t.input.keyboard.addKey("right"),va.keys.left=t.input.keyboard.addKey("left"),va.keys.up=t.input.keyboard.addKey("up"),va.keys.down=t.input.keyboard.addKey("down"),t.input.keyboard.on("keydown",(function(t){va.keyCallbacks[t.key]&&va.keyCallbacks[t.key](t)})),va.swipe=t.rexGestures.add.swipe({threshold:35,velocityThreshold:10,workaroundEnabled:1,workaroundMaxTime:1e9}),va.swipe.on("swipe",(t=>{va.swipeCallback&&va.swipeCallback(t)}))}static GetName(){return"InputRoutine"}static Update(t){BMEngine.GetGameplayScene();for(let i=0;i<va.trackedInputs.length;i++){let t=va.trackedInputs[i].input;if(va.trackedInputs[i].obj){if(Interactive.At(va.trackedInputs[i].obj).canDrag){const n=OperateOnVisual.GetDisplayedAsImage(va.trackedInputs[i].obj);ia.Take(va.trackedInputs[i].obj,t.x+n.scene.cameras.main.scrollX,t.y+n.scene.cameras.main.scrollY)}}t&&!t.isDown&&va.trackedInputs[i].obj&&_RemoveButtonTracking(va.trackedInputs[i].obj)}InputRoutine.GetPointerIfNotPressingButton()?(va.sinceButtonPress+=t,va.sinceButtonPress>=1e4&&(va.sinceButtonPress=1e4)):va.sinceButtonPress=0}static GetSinceButtonPress(){return va.sinceButtonPress}static SetSwipeCallback(t){va.swipeCallback=t}static AddKeyDown(t,i){if(Array.isArray(t))for(let n=0;n<t.length;n++){let o=t[n];va.keyCallbacks[o]=i}else va.keyCallbacks[t]=i}static HasTrackedButton(){for(let t=0;t<va.trackedInputs.length;t++)if(null!=va.trackedInputs[t].obj)return!0;return!1}static GetPointerIfNotPressingButton(){return 0==InputRoutine.HasTrackedButton()?BMEngine.GetGameplayScene().input.activePointer:null}static GetPointer(){return BMEngine.GetGameplayScene().input.activePointer}static IsKeyFromListDown(t){for(let i=0;i<t.length;i++){if(va.keys[t[i]].isDown)return!0}return!1}}function _PerformInteraction(t,i,n){const o=Interactive.At(t);if(o.dict[i]&&o.dict[i].key){const a=o.dict[i];let u=P({entity:t,reason:n},a);Y.runCommand(a.key,u)}}function _RemoveButtonTracking(t){const i=Interactive.At(t);i.pressed&&(_PerformInteraction(t,"always","out"),function _NullifyTrackedButton(t){for(let i=0;i<va.trackedInputs.length;i++)if(va.trackedInputs[i].obj==t)return void(va.trackedInputs[i].obj=null)}(t)),i.pressed=!1}const ma=new class InternalDataClass$3{constructor(){this.query}};class ReactiveFollowPointerMovementAndVisualQuery{static RegisterQuery(){ma.query=GeoticManager.GetWorld().createQuery({all:[VisualComponent,FollowPointerMovementComponent]}),ma.query.onEntityAdded((t=>{})),ma.query.onEntityRemoved((t=>{}))}static GetReference(){return ma.query}}class FollowPointerMovementRoutine{static OnRegister(){}static Register(){RoutinesManager.RegisterRoutine(FollowPointerMovementRoutine)}static Init(){}static GetName(){return"FollowPointerMovementRoutine"}static Update(t){const i=ReactiveFollowPointerMovementAndVisualQuery.GetReference()._cache;for(let n=0;n<i.length;n++){const o=i[n],a=FollowPointerMovementComponent.At(o);if(0==a.enabled)return;const u=TransformComponent.At(o),d=VisualComponent.At(o).getDisplayedAsImage(),f={x:0,y:0},p=InputRoutine.GetPointerIfNotPressingButton();if(p&&p.active){let t=!1;if(p.isDown&&(t=!0),a.processPointerConstantly&&(t=!0),t){let t=d.scene.cameras.main.scrollX,i=d.scene.cameras.main.scrollY,n=p.x+a.offsetX+t,o=p.y+a.offsetY+i;f.x=n,f.y=o}}if((0!=f.x||0!=f.y)&&(a.boundsAxisX&&(f.x=Clamp$1(f.x,a.boundsAxisX.min,a.boundsAxisX.max)),a.boundsAxisY&&(f.y=Clamp$1(f.y,a.boundsAxisY.min,a.boundsAxisY.max)),a.processAxisX||(f.x=null),a.processAxisY||(f.y=null),!InputRoutine.HasTrackedButton()&&InputRoutine.GetSinceButtonPress()>=15)){if(null!=a.speed){if(null!=f.x){let i=a.speed*DeltaScaled(t);f.x<u.refTarget.x?(i*=-1,f.x=Clamp$1(u.refTarget.x+i,f.x,u.refTarget.x)):f.x=Clamp$1(u.refTarget.x+i,u.refTarget.x,f.x)}if(null!=f.y){let i=a.speed*DeltaScaled(t);f.y<u.refTarget.y?(i*=-1,f.y=Clamp$1(u.refTarget.y+i,f.y,u.refTarget.y)):f.y=Clamp$1(u.refTarget.y+i,u.refTarget.y,f.y)}}ia.Take(o,f.x,f.y)}}}}function CmdTweenVisualByDeltaFrom(t,i){VisualComponent.At(t).fastTrackPosition(t);let n={x:0,y:0,duration:1e3,delay:0,ease:"Cubic.InOut"};P(n,i);const o=OperateOnVisual.GetDisplayed(t),a=n.x,u=n.y;n.x=o.x,n.y=o.y,o.x=o.x+a,o.y=o.y+u,VisualComponent.At(t).tweenPosition(n)}function CmdTweenVisualByDeltaTo(t,i){VisualComponent.At(t).fastTrackPosition();let n=P({x:0,y:0,duration:1e3,delay:0,ease:"Cubic.InOut"},i);const o=OperateOnVisual.GetDisplayed(t);n.x=o.x+n.x,n.y=o.y+n.y,VisualComponent.At(t).tweenPosition(n)}const ya=class{static RegisterPackedAsGameCommand(){Y.register(this.Name,new GameCommand((t=>{ya.Take(t.entity,t.reason)})))}static Take(t,i){}};let xa=ya;__publicField(xa,"Name","NoInteractionAction");class RepositionEntityToEntityAction{static RegisterPackedAsGameCommand(){Y.register(this.Name,new GameCommand((t=>{console.log("IMPLEMENT: RepositionEntityToEntityAction as GameCommand")})))}static Take(t,i,n={x:0,y:0}){const o=TransformComponent.At(t),a=TransformComponent.At(i);o.refTarget.x=a.refTarget.x+n.x,o.refTarget.y=a.refTarget.y+n.y}}__publicField(RepositionEntityToEntityAction,"Name","RepositionEntityToEntityAction");const Ta=new class InternalDataClass$2{constructor(){this.query}};const wa=new class InternalDataClass$1{constructor(){this.query}};class ParticleTrailFollowerComponent extends Component{constructor(t){super(null),this.targetGuid=null,this.angleMinOffset=0,this.angleMaxOffset=0,this.offsetX=0,this.offsetY=0;const i=JSON.parse(JSON.stringify(this.constructor.properties));Object.assign(this,i,t)}static GetName(){return"particleTrailFollower"}static At(t){return t.particleTrailFollower}static get properties(){return{}}static AddToEntity(t,i,n={}){const o={targetGuid:i};P(o,n),t.add(ParticleTrailFollowerComponent,o)}}const ba=new class InternalDataClass{constructor(){this.query}};function DoCommonGameRegisters(t){t.registerComponent(DataComponent,"data"),t.registerComponent(TransformComponent,"transform"),t.registerComponent(VisualComponent,"visual"),t.registerComponent(CommandsComponent,"commands"),t.registerComponent(BagsComponent,"bags"),t.registerComponent(PinOthers,"pinOthers"),t.registerComponent(Interactive,"interactive"),t.registerComponent(ToggleComponent,"toggle"),t.registerComponent(PhysicsComponent,"physics"),t.registerComponent(ParticleTrailFollowerComponent,ParticleTrailFollowerComponent.GetName()),class ReactiveTransformAndVisualQuery{static RegisterQuery(){wa.query=GeoticManager.GetWorld().createQuery({all:[VisualComponent,TransformComponent]}),wa.query.onEntityAdded((t=>{const i=TransformComponent.At(t);OperateOnVisual.GetDisplayed(t).x=i.refTarget.x,OperateOnVisual.GetDisplayed(t).y=i.refTarget.y,OperateOnVisual.GetDisplayed(t).angle=i.refTarget.angle,i.refTarget=OperateOnVisual.GetDisplayed(t)})),wa.query.onEntityRemoved((t=>{}))}static GetReference(){return wa.query}}.RegisterQuery(),ReactiveInteractiveAndVisualQuery.RegisterQuery(),ReactivePinOthersQuery.RegisterQuery(),class ReactivePhysicsAndVisualQuery{static RegisterQuery(){Ta.query=GeoticManager.GetWorld().createQuery({all:[VisualComponent,PhysicsComponent]}),Ta.query.onEntityAdded((t=>{const i=PhysicsComponent.At(t),n=VisualComponent.At(t).getDisplayedAsImage();n.body?console.warn("IMPLEMENT! ReactivePhysicsAndVisualQuery:onEntityAdded"):(i.body=n.scene.physics.add.existing(n,i.isStatic).body,PhysicsComponent.BootBody(t))})),Ta.query.onEntityRemoved((t=>{}))}static GetReference(){return Ta.query}}.RegisterQuery(),class ReactiveParticleTrailAndTransformAndVisualQuery{static RegisterQuery(){ba.query=GeoticManager.GetWorld().createQuery({all:[TransformComponent,VisualComponent,ParticleTrailFollowerComponent]})}static GetReference(){return console.assert(ba.query),ba.query}}.RegisterQuery(),zo.RegisterPackedAsGameCommand(),RepositionEntityToEntityAction.RegisterPackedAsGameCommand(),ko.RegisterPackedAsGameCommand(),Oo.RegisterPackedAsGameCommand(),Gr.RegisterPackedAsGameCommand(),Xo.RegisterPackedAsGameCommand(),Uo.RegisterPackedAsGameCommand(),xa.RegisterPackedAsGameCommand(),Ho.RegisterPackedAsGameCommand(),qo.RegisterPackedAsGameCommand(),Ko.RegisterPackedAsGameCommand()}class ScriptLoopRoutine{Init(){}OnRegister(){}static Register(t,i=[],n){RoutinesManager.RegisterRoutine(new ScriptLoopRoutine(t,i,n))}constructor(t,i=[],n){null==n&&(n=GetGUID()),this.name=n,this.func=t,this.guards=i}GetName(){return this.name}Update(t){for(let i=0;i<this.guards.length;i++){if((0,this.guards[i])())return}this.func(t)}}function _OnCollisionOverlapPlayerVsPickable(t,i){t.selfEntity;const n=i.selfEntity,o=DataComponent.At(n);1!=o.picked&&(o.picked=!0,zo.Take(n),pa.AddToScore(50),BMEngine.PlayAudioFile("03_watermelon_03"))}function _OnCollisionOverlapVsBrick(t,i){const n=t.selfEntity,o=i.selfEntity,a=DataComponent.At(o),u=TransformComponent.At(o),d=DataComponent.At(n),f=VisualComponent.At(n).getAnimationName(),p=TransformComponent.At(n);d.cantDie||0!=a.hit&&(a.hit=!0,"up"==f&&(p.refTarget.y<u.refTarget.y||(Qo.GameplaySpineObjectDieAfterAnim(Jo.GameplayLevel,"Dust","dust",u.refTarget.x,u.refTarget.y,{layerDepth:25}),d.velocityY=500,d.jumpDelay=.1,BMEngine.PlayAudioFile("brickhit",{volume:4},{volume:4}))))}function _OnCollisionOverlapPlayerVsPlatform(t,i){const n=t.selfEntity,o=i.selfEntity;DataComponent.At(o).isFirst||(No.currentLevelData.touchedFirst=!0);const a=DataComponent.At(n),u=VisualComponent.At(n).getAnimationName();if(a.velocityY<0)return;if("up"==u)return;if(null!=a.jumpDelay&&a.jumpDelay>0)return;0==No.currentLevelData.levelLoopStarted?a.velocityY=-500:a.velocityY=-1100;const d=TransformComponent.At(o);Qo.GameplaySpineObjectDieAfterAnim(Jo.GameplayLevel,"Dust","dust",d.refTarget.x,d.refTarget.y,{layerDepth:25}),a.flyTime<=0&&(a.cantDie=!1),BMEngine.PlayAudioFile(Phaser.Utils.Array.GetRandom(["01_bounce_01_01","01_bounce_01_02"]))}function _OnCollisionOverlapPlayerVsSpring(t,i){const n=t.selfEntity;i.selfEntity;const o=DataComponent.At(n),a=VisualComponent.At(n).getAnimationName();if(o.velocityY<0)return;if("up"==a)return;o.velocityY=-2200,o.flyTime=100,o.cantDie=!0,No.currentLevelData.toNextSpring=20+10*No.currentLevelData.difficulty,BMEngine.PlayAudioFile("02_jump_spring_01");const u=EntityKeeper.GetBagActorsReferenceList("BRICKS");for(let d=0;d<u.length;d++){const t=u[d];0==VisualComponent.At(t).isDisplayedOnScreen()&&zo.Take(t)}}function _OnCollisionOverlapPlayerVsDecayedPlatform(t,i){const n=t.selfEntity,o=i.selfEntity,a=DataComponent.At(n),u=VisualComponent.At(n).getAnimationName();if(a.velocityY<0)return;if("up"==u)return;const d=DataComponent.At(o),f=TransformComponent.At(o);d.hasCollided||(d.hasCollided=!0,Qo.DecayedHalfPlatforms(f.refTarget.x,f.refTarget.y)),zo.Take(o),BMEngine.PlayAudioFile(Phaser.Utils.Array.GetRandom(["04_platform_crack_01","04_platform_crack_02","04_platform_crack_03"]))}function CollisionOverlapPlayerVsPlatform(t){Fo.OverlapGroupsByNames("PLAYER","PLATFORM",_OnCollisionOverlapPlayerVsPlatform)}function CollisionOverlapPlayerVsSpring(t){Fo.OverlapGroupsByNames("PLAYER","SPRING",_OnCollisionOverlapPlayerVsSpring)}function CollisionOverlapPlayerVsDecayedPlatform(t){Fo.OverlapGroupsByNames("PLAYER","PLATFORM_DECAYED",_OnCollisionOverlapPlayerVsDecayedPlatform)}function CollisionOverlapPlayerVsPickable(t){Fo.OverlapGroupsByNames("PLAYER","PICKABLE",_OnCollisionOverlapPlayerVsPickable)}function CollisionOverlapVsBrick(t){Fo.OverlapGroupsByNames("PLAYER","BRICK",_OnCollisionOverlapVsBrick)}function UpdatePlayerVelocity(t){const i=EntityKeeper.GetEntityByAlias("player");if(!i)return;const n=DataComponent.At(i);n.jumpDelay-=DeltaScaled(t),n.flyTime>0?(n.flyTime-=DeltaScaled(t),n.velocityY+=800*DeltaScaled(t),n.velocityY>=-500&&(n.flyTime=0)):(n.velocityY+=1500*DeltaScaled(t),n.velocityY>=1500&&(n.velocityY=1500));TransformComponent.At(i).refTarget.y+=n.velocityY*DeltaScaled(t)}function UpdatePlayerAnimationState(){const t=EntityKeeper.GetEntityByAlias("player");if(!t)return;const i=VisualComponent.At(t),n=DataComponent.At(t),o=i.getAnimationName();n.velocityY<0?"down"==o&&i.setAnimation("up",{loop:!0}):"up"==o&&i.setAnimation("down",{loop:!0})}function UpdateCameraOffset(t){const i=EntityKeeper.GetEntityByAlias("player");if(!i)return;const n=DataComponent.At(i),o=TransformComponent.At(i);let a=700;0==No.currentLevelData.touchedFirst&&(a=-5e4);let u=BMEngine.GetGameplayCameraOffset().y;if(o.refTarget.y-u<a){let i=1e3;i=o.refTarget.y-u,i=a-i,n.flyTime>0&&(i*=3),u-=i*DeltaScaled(t)*2,BMEngine.SetGameplayCameraOffset(0,u)}}function OffscreenDieCheck(){const t=EntityKeeper.GetEntityByAlias("player");if(!t)return;const i=TransformComponent.At(t),n=EntityKeeper.GetBagActorsReferenceList("CHECK_OFFSCREEN_DIE");for(let o=0;o<n.length;o++){const t=n[o],a=TransformComponent.At(t);VisualComponent.At(t).isDisplayedOnScreen()||a.refTarget.y-i.refTarget.y>300&&zo.Take(t)}}function PlayerOffscreenDieCheck(){const t=EntityKeeper.GetEntityByAlias("player");if(!t)return;TransformComponent.At(t);VisualComponent.At(t).isDisplayedOnScreen(!0)||pa.RequestLevelLost()}function UpdateMovingPlatforms(t){const i=EntityKeeper.GetBagActorsReferenceList("MOVING_PLATFORM");for(let n=0;n<i.length;n++){const o=i[n],a=DataComponent.At(o),u=TransformComponent.At(o);VisualComponent.At(o);const d=a.refWiatrak_1,f=a.refWiatrak_2,p=a.direction;let b=0;if(-1==p){if(b=-300,d){const t=VisualComponent.At(d),i=VisualComponent.At(f);"spin_left"!=t.getAnimationName()&&(t.setAnimation("spin_left",{loop:!0}),i.setAnimation("spin_left",{loop:!0}))}}else if(b=300,d){const t=VisualComponent.At(d),i=VisualComponent.At(f);"spin_right"!=t.getAnimationName()&&(t.setAnimation("spin_right",{loop:!0}),i.setAnimation("spin_right",{loop:!0}))}let S=200*DeltaScaled(t),M=0;-1==p?(S*=-1,M=Clamp$1(u.refTarget.x+S,b,u.refTarget.x),M<=b&&(a.direction=1)):(M=Clamp$1(u.refTarget.x+S,u.refTarget.x,b),M>=b&&(a.direction=-1)),u.refTarget.x=M}}function OffscreenRepositionSky(){const t=EntityKeeper.GetEntityByAlias("player");if(!t)return;const i=TransformComponent.At(t),n=EntityKeeper.GetBagActorsReferenceList("SKY_CHECK_OFFSCREEN_REPOSITION");for(let o=0;o<n.length;o++){const t=n[o],a=TransformComponent.At(t);VisualComponent.At(t).isDisplayedOnScreen()||a.refTarget.y>i.refTarget.y&&Oo.Take(t,null,2*-n.length)}}function OffscreenRepositionCloud(){const t=EntityKeeper.GetEntityByAlias("player");if(!t)return;const i=TransformComponent.At(t),n=EntityKeeper.GetBagActorsReferenceList("CLOUD_CHECK_OFFSCREEN_REPOSITION");for(let o=0;o<n.length;o++){const t=n[o],a=TransformComponent.At(t);VisualComponent.At(t).isDisplayedOnScreen()||a.refTarget.y>i.refTarget.y&&Gr.Take(t,null,-3e3)}}const Sa=new class InternalModel{constructor(){this.UpdatePlayerVelocity=UpdatePlayerVelocity,this.CollisionOverlapPlayerVsPlatform=CollisionOverlapPlayerVsPlatform,this.UpdatePlayerAnimationState=UpdatePlayerAnimationState,this.UpdateCameraOffset=UpdateCameraOffset,this.OffscreenDieCheck=OffscreenDieCheck,this.PlayerOffscreenDieCheck=PlayerOffscreenDieCheck,this.OffscreenRepositionSky=OffscreenRepositionSky,this.OffscreenRepositionCloud=OffscreenRepositionCloud,this.CollisionOverlapPlayerVsSpring=CollisionOverlapPlayerVsSpring,this.CollisionOverlapPlayerVsDecayedPlatform=CollisionOverlapPlayerVsDecayedPlatform,this.CollisionOverlapPlayerVsPickable=CollisionOverlapPlayerVsPickable,this.UpdateMovingPlatforms=UpdateMovingPlatforms,this.CollisionOverlapVsBrick=CollisionOverlapVsBrick}};const Ea=function PandaJumpGameCentralRegistry(){const t=Sa,i=oa,n=new Engine;GeoticManager.SetEngine(n);const o=n.createWorld();GeoticManager.SetWorld(o),DoCommonGameRegisters(n),function DoCasualGameRegisters(t){Y.register("TweenCoverTitle",new GameCommand((t=>{const i=t.entity;CmdTweenVisualByDeltaFrom(i,{y:-800,duration:1e3,onComplete:()=>{CmdTweenVisualByDeltaTo(i,{y:-25,duration:1800,yoyo:!0,repeat:-1,ease:"Quadratic.In"})}})}))),Y.register("TweenPositionFromTop",new GameCommand((t=>{CmdTweenVisualByDeltaFrom(t.entity,P({y:-700,duration:700},t))}))),Y.register("TweenPositionToTop",new GameCommand((t=>{CmdTweenVisualByDeltaTo(t.entity,P({y:-700,duration:450},t))}))),Y.register("TweenPositionFromBottom",new GameCommand((t=>{CmdTweenVisualByDeltaFrom(t.entity,P({y:700,duration:450},t))}))),Y.register("TweenPositionToBottom",new GameCommand((t=>{CmdTweenVisualByDeltaTo(t.entity,P({y:700,duration:700},t))}))),Y.register("TweenScaleToZero",new GameCommand((t=>{let i={scale:0,duration:700};console.log(i),CmdTweenScaleTo(t.entity,P(i,t))}))),Y.register("TweenPositionFromRight",new GameCommand((t=>{CmdTweenVisualByDeltaFrom(t.entity,P({x:700,duration:450},t))}))),Y.register("TweenPositionToRight",new GameCommand((t=>{CmdTweenVisualByDeltaTo(t.entity,P({x:700,duration:700},t))}))),Y.register("TweenAlphaTo",new GameCommand((t=>{CmdTweenAlphaTo(t.entity,P({alpha:1,duration:500},t))})))}(),Y.register("TweenCoverTitle",new GameCommand((t=>{const i=t.entity;let n=null,o=null;n=()=>{CmdTweenVisualByDeltaTo(i,{y:120,duration:Phaser.Math.Between(450,600),ease:"Quadratic.In",scaleX:.9,scaleY:1.1,onComplete:()=>{o()}})},o=()=>{CmdTweenVisualByDeltaTo(i,{y:-120,duration:Phaser.Math.Between(450,600),ease:"Quadratic.In",scaleX:1.1,scaleY:.9,onComplete:()=>{n()}})},CmdTweenVisualByDeltaFrom(i,{y:-800,duration:1e3,onComplete:()=>{n()}})}))),n.registerComponent(FollowPointerMovementComponent,FollowPointerMovementComponent.GetName()),ReactiveFollowPointerMovementAndVisualQuery.RegisterQuery();const fBlockIfLevelEnded=()=>1==No.currentLevelData.levelLoopEnded,fBlockIfLevelLoopNotStarted=()=>0==No.currentLevelData.levelLoopStarted,fBlockIfGameInitializedFalse=()=>0==No.session.initialized;InputRoutine.Register(),LogicLoopRoutine.Register(),ScriptLoopRoutine.Register(t.UpdatePlayerVelocity),FollowPointerMovementRoutine.Register(),ScriptLoopRoutine.Register(t.CollisionOverlapVsBrick,[fBlockIfLevelEnded,fBlockIfGameInitializedFalse]),ScriptLoopRoutine.Register(t.CollisionOverlapPlayerVsSpring,[fBlockIfLevelEnded,fBlockIfGameInitializedFalse]),ScriptLoopRoutine.Register(t.CollisionOverlapPlayerVsDecayedPlatform,[fBlockIfLevelEnded,fBlockIfGameInitializedFalse]),ScriptLoopRoutine.Register(t.CollisionOverlapPlayerVsPickable,[fBlockIfLevelEnded,fBlockIfGameInitializedFalse]),ScriptLoopRoutine.Register(t.CollisionOverlapPlayerVsPlatform,[fBlockIfLevelEnded,fBlockIfGameInitializedFalse]),ScriptLoopRoutine.Register(t.UpdateMovingPlatforms,[fBlockIfGameInitializedFalse]),ScriptLoopRoutine.Register(t.UpdatePlayerAnimationState),ScriptLoopRoutine.Register(t.UpdateCameraOffset,[fBlockIfLevelLoopNotStarted]),ScriptLoopRoutine.Register(i.UpdateMapGeneration),ScriptLoopRoutine.Register(t.OffscreenDieCheck,[]),ScriptLoopRoutine.Register(t.OffscreenRepositionSky),ScriptLoopRoutine.Register(t.OffscreenRepositionCloud),ScriptLoopRoutine.Register(t.PlayerOffscreenDieCheck,[fBlockIfLevelLoopNotStarted]),SynchPinsRoutine.Register(),EndOfLoopRoutine.Register()},Ma=function PandaJumpStartNormal(){ha=BMEngine.GetSaveSlotReference(ha),pa.Init(),la.session.initialized=!0,EndOfLoopRoutine.QueueDelayedFunction(null,0,(()=>Jo.CommandRequestCover.run())),BMEngine.PlayAudioFile("GameMusic",null,{loop:!0,volume:.28})};n.SetSingleton(new class BlackmoonReleaseBranding extends n{getFlags(){return{disableSaveUserPrefs:0,disableSaveGameData:0,disableFakeMusicPreload:0,cordovaListenersEnabled:0,disableAutoPause:0,allowPauseAlways:0}}}),function InitPandaJumpGame(t={},i={}){const n=new EngineInitVO;n.data.flagOverrides=t,n.data.gameName="PandaJump",n.data.gameSubEngineConfig=P({dom:{createContainer:!0},title:"Panda Jump",type:Phaser.AUTO,parent:"game",backgroundColor:"#B3F8E0",scale:{width:640,height:1050,min:{width:135,height:240},max:{width:4320,height:7680},mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{debug:false}}},i),n.data.requiredScreenOrientation="portrait",GetOs().desktop&&(n.data.requiredScreenOrientation="any"),n.data.preloaderInitialsAssetsNames={manifestJson:"PandaJumpManifest",logo:"PreloaderLogo",font:"PreloaderFontObelix_63"},n.data.initialAssetPackData=AssetPackLoader.GetRequestAsJsonFromArray([{path:"json",type:"json",files:["PandaJumpManifest"]},{path:"preloader",type:"png",files:["PreloaderLogo","EmptyPNG"]},{path:"preloader",type:"font",files:["PreloaderFontObelix_63"]}]),n.data.funcDoGameRegisters=Ea,n.data.funcStartGame=Ma,UsePhaserSubEngine(n)}(n.GetSingleton().getFlags(),{});
