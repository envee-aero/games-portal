var t=Object.defineProperty,__publicField=(i,n,r)=>(((i,n,r)=>{n in i?t(i,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[n]=r})(i,"symbol"!=typeof n?n+"":n,r),r);import("data:text/javascript;base64,Cg==");!function polyfill(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))processPreload(t);new MutationObserver((t=>{for(const i of t)if("childList"===i.type)for(const t of i.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&processPreload(t)})).observe(document,{childList:!0,subtree:!0})}function processPreload(t){if(t.ep)return;t.ep=!0;const i=function getFetchOpts(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerpolicy&&(i.referrerPolicy=t.referrerpolicy),"use-credentials"===t.crossorigin?i.credentials="include":"anonymous"===t.crossorigin?i.credentials="omit":i.credentials="same-origin",i}(t);fetch(t.href,i)}}();var IsArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)};class AssetPackLoader{static GetRequestAsJsonFromArray(t){const i=new AssetPackLoader;return i.addRequestArray(t),i.getRequestAsJson()}constructor(){this._files={jsons:[],png:[]},this.request=null,this.loadFuncDict=null}fillRequestDataFrom(t){console.assert(t,"data is: ",t),IsArray(t)||console.error("TODO: implement for object that isnt array"),this.request=t}supplyLoadFunctionDictionary(t,i){var n,r;this.loadFuncDict=(n=t,r=i,{begin:function(){n.load.on("loaderror",(function(t){console.warn("error loading: ",t)}),n),n.load.once("complete",(function(){const t=r;n.load.removeAllListeners(),n.load.reset(),t()}))},audio:function(t,i){n.load.audio(t,[i+"/"+t+".mp3",i+"/"+t+".ogg"])},font:function(t,i){n.load.bitmapFont(t,i+"/"+t+".png",i+"/"+t+".xml")},text:(t,i)=>{n.load.text(t,i+"/"+t+".txt")},json:function(t,i){n.load.json(t,i+"/"+t+".json")},png:function(t,i){n.load.image(t,i+"/"+t+".png")},spine:(t,i)=>{n.load.spine(t,i+"/"+t+".json",i+"/"+t+".atlas")},multiatlas:(t,i)=>{n.load.multiatlas("megaset","megaset/megaset.json")}})}load(){console.assert(null!=this.loadFuncDict,"load func dict: ",this.loadFuncDict),console.assert(this.request,"request: ",this.request),this.loadFuncDict.begin();for(const t in this.request){const i=this.request[t],n=i.path,r=i.type,o=i.files;if(i.mode){const t=i.mode;if("sequential"==t.def)for(let i=t.from;i<=t.to;i++)o.push(t.base+i)}for(const t in o){const i=o[t];null==this.loadFuncDict[r]&&console.error("loader dict didnt implement: ",r),this.loadFuncDict[r](i,n)}}}getRequestAsJson(){return JSON.parse(JSON.stringify(this.request))}addRequestArray(t){this.request&&console.error("TODO: implement request merge"),this.request=t}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var i,n={exports:{}};i=n,function webpackUniversalModuleDefinition(t,n){i.exports=n()}(0,(function(){return function(t){var i={};function __webpack_require__(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}return __webpack_require__.m=t,__webpack_require__.c=i,__webpack_require__.d=function(t,i,n){__webpack_require__.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(t,i){if(1&i&&(t=__webpack_require__(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var r in t)__webpack_require__.d(n,r,function(i){return t[i]}.bind(null,r));return n},__webpack_require__.n=function(t){var i=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(i,"a",i),i},__webpack_require__.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=1528)}([function(t,i){function getProperty2(t,i,n){var r=n?t[i]:Object.getOwnPropertyDescriptor(t,i);return!n&&r.value&&"object"==typeof r.value&&(r=r.value),!(!r||!function hasGetterOrSetter2(t){return!!t.get&&"function"==typeof t.get||!!t.set&&"function"==typeof t.set}(r))&&(void 0===r.enumerable&&(r.enumerable=!0),void 0===r.configurable&&(r.configurable=!0),r)}function hasNonConfigurable2(t,i){var n=Object.getOwnPropertyDescriptor(t,i);return!!n&&(n.value&&"object"==typeof n.value&&(n=n.value),!1===n.configurable)}function extend2(t,i,n,r){for(var o in i)if(i.hasOwnProperty(o)){var a=getProperty2(i,o,n);if(!1!==a){if(hasNonConfigurable2((r||t).prototype,o)){if(Class2.ignoreFinals)continue;throw new Error("cannot override final property '"+o+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,o,a)}else t.prototype[o]=i[o]}}function mixin2(t,i){if(i){Array.isArray(i)||(i=[i]);for(var n=0;n<i.length;n++)extend2(t,i[n].prototype||i[n])}}function Class2(t){var i,n;if(t||(t={}),t.initialize){if("function"!=typeof t.initialize)throw new Error("initialize must be a function");i=t.initialize,delete t.initialize}else if(t.Extends){var r=t.Extends;i=function(){r.apply(this,arguments)}}else i=function(){};t.Extends?(i.prototype=Object.create(t.Extends.prototype),i.prototype.constructor=i,n=t.Extends,delete t.Extends):i.prototype.constructor=i;var o=null;return t.Mixins&&(o=t.Mixins,delete t.Mixins),mixin2(i,o),extend2(i,t,!0,n),i}Class2.extend=extend2,Class2.mixin=mixin2,Class2.ignoreFinals=!1,t.exports=Class2},function(t,i){t.exports=function(){}},function(t,i){t.exports=function(t,i,n){var r=typeof t;return t&&"number"!==r&&"string"!==r&&t.hasOwnProperty(i)&&void 0!==t[i]?t[i]:n}},function(t,i,n){var r=n(0),o=n(124),a=new r({initialize:function Vector24(t,i){this.x=0,this.y=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0):(void 0===i&&(i=t),this.x=t||0,this.y=i||0)},clone:function(){return new a(this.x,this.y)},copy:function(t){return this.x=t.x||0,this.y=t.y||0,this},setFromObject:function(t){return this.x=t.x||0,this.y=t.y||0,this},set:function(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setTo:function(t,i){return this.set(t,i)},setToPolar:function(t,i){return null==i&&(i=1),this.x=Math.cos(t)*i,this.y=Math.sin(t)*i,this},equals:function(t){return this.x===t.x&&this.y===t.y},fuzzyEquals:function(t,i){return o(this.x,t.x,i)&&o(this.y,t.y,i)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},setAngle:function(t){return this.setToPolar(t,this.length())},add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(t){var i=t.x-this.x,n=t.y-this.y;return Math.sqrt(i*i+n*n)},distanceSq:function(t){var i=t.x-this.x,n=t.y-this.y;return i*i+n*n},length:function(){var t=this.x,i=this.y;return Math.sqrt(t*t+i*i)},setLength:function(t){return this.normalize().scale(t)},lengthSq:function(){var t=this.x,i=this.y;return t*t+i*i},normalize:function(){var t=this.x,i=this.y,n=t*t+i*i;return n>0&&(n=1/Math.sqrt(n),this.x=t*n,this.y=i*n),this},normalizeRightHand:function(){var t=this.x;return this.x=-1*this.y,this.y=t,this},normalizeLeftHand:function(){var t=this.x;return this.x=this.y,this.y=-1*t,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lerp:function(t,i){void 0===i&&(i=0);var n=this.x,r=this.y;return this.x=n+i*(t.x-n),this.y=r+i*(t.y-r),this},transformMat3:function(t){var i=this.x,n=this.y,r=t.val;return this.x=r[0]*i+r[3]*n+r[6],this.y=r[1]*i+r[4]*n+r[7],this},transformMat4:function(t){var i=this.x,n=this.y,r=t.val;return this.x=r[0]*i+r[4]*n+r[12],this.y=r[1]*i+r[5]*n+r[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(t){var i=this.length();return i&&i>t&&this.scale(t/i),this},reflect:function(t){return t=t.clone().normalize(),this.subtract(t.scale(2*this.dot(t)))},mirror:function(t){return this.reflect(t).negate()},rotate:function(t){var i=Math.cos(t),n=Math.sin(t);return this.set(i*this.x-n*this.y,n*this.x+i*this.y)}});a.ZERO=new a,a.RIGHT=new a(1,0),a.LEFT=new a(-1,0),a.UP=new a(0,-1),a.DOWN=new a(0,1),a.ONE=new a(1,1),t.exports=a},function(t,i,n){var r=n(0),o=n(56),a=new r({initialize:function Point4(t,i){void 0===t&&(t=0),void 0===i&&(i=t),this.type=o.POINT,this.x=t,this.y=i},setTo:function(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.x=t,this.y=i,this}});t.exports=a},function(t,i,n){var r=n(0),o=n(24),a=n(20),h=new r({initialize:function GameObjectFactory2(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(a.BOOT,this.boot,this),this.events.on(a.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(a.DESTROY,this.destroy,this)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},existing:function(t){return(t.renderCanvas||t.renderWebGL)&&this.displayList.add(t),t.preUpdate&&this.updateList.add(t),t},shutdown:function(){this.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});h.register=function(t,i){h.prototype.hasOwnProperty(t)||(h.prototype[t]=i)},h.remove=function(t){h.prototype.hasOwnProperty(t)&&delete h.prototype[t]},o.register("GameObjectFactory",h,"add"),t.exports=h},function(t,i){t.exports=function(t,i,n){if(t&&"number"!=typeof t){if(t.hasOwnProperty(i))return t[i];if(-1!==i.indexOf(".")){for(var r=i.split("."),o=t,a=n,h=0;h<r.length;h++){if(!o.hasOwnProperty(r[h])){a=n;break}a=o[r[h]],o=o[r[h]]}return a}return n}return n}},function(t,i){t.exports=function(t){if("object"!=typeof t||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}return!0}},function(t,i){var n={},r={install:function(t){for(var i in n)t[i]=n[i]},register:function(t,i){n[t]=i},destroy:function(){n={}}};t.exports=r},function(t,i,n){var r=Object.prototype.hasOwnProperty,o="~";function Events(){}function EE2(t,i,n){this.fn=t,this.context=i,this.once=n||!1}function addListener(t,i,n,r,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var h=new EE2(n,r||t,a),d=o?o+i:i;return t._events[d]?t._events[d].fn?t._events[d]=[t._events[d],h]:t._events[d].push(h):(t._events[d]=h,t._eventsCount++),t}function clearEvent(t,i){0==--t._eventsCount?t._events=new Events:delete t._events[i]}function EventEmitter2(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(o=!1)),EventEmitter2.prototype.eventNames=function eventNames(){var t,i,n=[];if(0===this._eventsCount)return n;for(i in t=this._events)r.call(t,i)&&n.push(o?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},EventEmitter2.prototype.listeners=function listeners(t){var i=o?o+t:t,n=this._events[i];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,a=n.length,h=new Array(a);r<a;r++)h[r]=n[r].fn;return h},EventEmitter2.prototype.listenerCount=function listenerCount(t){var i=o?o+t:t,n=this._events[i];return n?n.fn?1:n.length:0},EventEmitter2.prototype.emit=function emit(t,i,n,r,a,h){var d=o?o+t:t;if(!this._events[d])return!1;var f,p,T=this._events[d],b=arguments.length;if(T.fn){switch(T.once&&this.removeListener(t,T.fn,void 0,!0),b){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,i),!0;case 3:return T.fn.call(T.context,i,n),!0;case 4:return T.fn.call(T.context,i,n,r),!0;case 5:return T.fn.call(T.context,i,n,r,a),!0;case 6:return T.fn.call(T.context,i,n,r,a,h),!0}for(p=1,f=new Array(b-1);p<b;p++)f[p-1]=arguments[p];T.fn.apply(T.context,f)}else{var S,A=T.length;for(p=0;p<A;p++)switch(T[p].once&&this.removeListener(t,T[p].fn,void 0,!0),b){case 1:T[p].fn.call(T[p].context);break;case 2:T[p].fn.call(T[p].context,i);break;case 3:T[p].fn.call(T[p].context,i,n);break;case 4:T[p].fn.call(T[p].context,i,n,r);break;default:if(!f)for(S=1,f=new Array(b-1);S<b;S++)f[S-1]=arguments[S];T[p].fn.apply(T[p].context,f)}}return!0},EventEmitter2.prototype.on=function on(t,i,n){return addListener(this,t,i,n,!1)},EventEmitter2.prototype.once=function once(t,i,n){return addListener(this,t,i,n,!0)},EventEmitter2.prototype.removeListener=function removeListener(t,i,n,r){var a=o?o+t:t;if(!this._events[a])return this;if(!i)return clearEvent(this,a),this;var h=this._events[a];if(h.fn)h.fn!==i||r&&!h.once||n&&h.context!==n||clearEvent(this,a);else{for(var d=0,f=[],p=h.length;d<p;d++)(h[d].fn!==i||r&&!h[d].once||n&&h[d].context!==n)&&f.push(h[d]);f.length?this._events[a]=1===f.length?f[0]:f:clearEvent(this,a)}return this},EventEmitter2.prototype.removeAllListeners=function removeAllListeners(t){var i;return t?(i=o?o+t:t,this._events[i]&&clearEvent(this,i)):(this._events=new Events,this._eventsCount=0),this},EventEmitter2.prototype.off=EventEmitter2.prototype.removeListener,EventEmitter2.prototype.addListener=EventEmitter2.prototype.on,EventEmitter2.prefixed=o,EventEmitter2.EventEmitter=EventEmitter2,t.exports=EventEmitter2},function(t,i,n){var r=n(0),o=n(57),a=n(171),h=n(306),d=n(56),f=n(47),p=n(174),T=new r({initialize:function Rectangle4(t,i,n,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),this.type=d.RECTANGLE,this.x=t,this.y=i,this.width=n,this.height=r},contains:function(t,i){return o(this,t,i)},getPoint:function(t,i){return a(this,t,i)},getPoints:function(t,i,n){return h(this,t,i,n)},getRandomPoint:function(t){return p(this,t)},setTo:function(t,i,n,r){return this.x=t,this.y=i,this.width=n,this.height=r,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setSize:function(t,i){return void 0===i&&(i=t),this.width=t,this.height=i,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(t){return void 0===t&&(t=new f),t.setTo(this.x,this.y,this.right,this.y),t},getLineB:function(t){return void 0===t&&(t=new f),t.setTo(this.right,this.y,this.right,this.bottom),t},getLineC:function(t){return void 0===t&&(t=new f),t.setTo(this.right,this.bottom,this.x,this.bottom),t},getLineD:function(t){return void 0===t&&(t=new f),t.setTo(this.x,this.bottom,this.x,this.y),t},left:{get:function(){return this.x},set:function(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}},right:{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x}},top:{get:function(){return this.y},set:function(t){t>=this.bottom?this.height=0:this.height=this.bottom-t,this.y=t}},bottom:{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});t.exports=T},function(t,i,n){t.exports={Alpha:n(607),AlphaSingle:n(303),BlendMode:n(304),ComputedSize:n(608),Crop:n(609),Depth:n(305),Flip:n(610),GetBounds:n(611),Mask:n(309),Origin:n(632),PathFollower:n(633),Pipeline:n(167),ScrollFactor:n(312),Size:n(634),Texture:n(635),TextureCrop:n(636),Tint:n(637),ToJSON:n(176),Transform:n(313),TransformMatrix:n(25),Visible:n(314)}},function(t,i){function GenerateSrc(t){for(var i="",n=0;n<t;++n)n>0&&(i+="\nelse "),n<t-1&&(i+="if(test == "+n+".0){}");return i}t.exports={getTintFromFloats:function(t,i,n,r){return((255&(255*r|0))<<24|(255&(255*t|0))<<16|(255&(255*i|0))<<8|255&(255*n|0))>>>0},getTintAppendFloatAlpha:function(t,i){return((255&(255*i|0))<<24|t)>>>0},getTintAppendFloatAlphaAndSwap:function(t,i){return((255&(255*i|0))<<24|(255&(0|t))<<16|(255&(t>>8|0))<<8|255&(t>>16|0))>>>0},getFloatsFromUintRGB:function(t){return[(255&(t>>16|0))/255,(255&(t>>8|0))/255,(255&(0|t))/255]},checkShaderMax:function(t,i){i&&-1!==i||(i=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS));for(var n=t.createShader(t.FRAGMENT_SHADER),r=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");;){var o=r.replace(/%forloop%/gi,GenerateSrc(i));if(t.shaderSource(n,o),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS))break;i=i/2|0}return i},parseFragmentShaderMaxTextures:function(t,i){if(!t)return"";for(var n="",r=0;r<i;r++)r>0&&(n+="\n\telse "),r<i-1&&(n+="if (outTexId < "+r+".5)"),n+="\n\t{",n+="\n\t\ttexture = texture2D(uMainSampler["+r+"], outTexCoord);",n+="\n\t}";return(t=t.replace(/%count%/gi,i.toString())).replace(/%forloop%/gi,n)}}},function(t,i,n){var r=n(193),o=n(6);t.exports=function(t,i,n){var a=o(t,i,null);if(null===a)return n;if(Array.isArray(a))return r.RND.pick(a);if("object"==typeof a){if(a.hasOwnProperty("randInt"))return r.RND.integerInRange(a.randInt[0],a.randInt[1]);if(a.hasOwnProperty("randFloat"))return r.RND.realInRange(a.randFloat[0],a.randFloat[1])}else if("function"==typeof a)return a(i);return a}},function(t,i){var n={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};t.exports=n},function(t,i,n){var r=n(0),o=n(176),a=n(101),h=n(9),d=n(75),f=n(20),p=new r({Extends:h,initialize:function GameObject2(t,i){h.call(this),this.scene=t,this.displayList=null,this.type=i,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(d.ADDED_TO_SCENE,this.addedToScene,this),this.on(d.REMOVED_FROM_SCENE,this.removedFromScene,this),t.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setState:function(t){return this.state=t,this},setDataEnabled:function(){return this.data||(this.data=new a(this)),this},setData:function(t,i){return this.data||(this.data=new a(this)),this.data.set(t,i),this},incData:function(t,i){return this.data||(this.data=new a(this)),this.data.inc(t,i),this},toggleData:function(t){return this.data||(this.data=new a(this)),this.data.toggle(t),this},getData:function(t){return this.data||(this.data=new a(this)),this.data.get(t)},setInteractive:function(t,i,n){return this.scene.sys.input.enable(this,t,i,n),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return o(this)},willRender:function(t){return!(p.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function(){for(var t=this,i=this.parentContainer,n=[];i&&(n.unshift(i.getIndex(t)),t=i,i.parentContainer);)i=i.parentContainer;return this.displayList?n.unshift(this.displayList.getIndex(t)):n.unshift(this.scene.sys.displayList.getIndex(t)),n},addToDisplayList:function(t){return void 0===t&&(t=this.scene.sys.displayList),this.displayList&&this.displayList!==t&&this.removeFromDisplayList(),t.exists(this)||(this.displayList=t,t.add(this,!0),t.queueDepthSort(),this.emit(d.ADDED_TO_SCENE,this,this.scene),t.events.emit(f.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var t=this.displayList||this.scene.sys.displayList;return t.exists(this)&&(t.remove(this,!0),t.queueDepthSort(),this.displayList=null,this.emit(d.REMOVED_FROM_SCENE,this,this.scene),t.events.emit(f.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(t){this.scene&&!this.ignoreDestroy&&(void 0===t&&(t=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(d.DESTROY,this,t),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});p.RENDER_MASK=15,t.exports=p},function(t,i,n){var r=n(0),o=n(24),a=n(20),h=new r({initialize:function GameObjectCreator2(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(a.BOOT,this.boot,this),this.events.on(a.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(a.DESTROY,this.destroy,this)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});h.register=function(t,i){h.prototype.hasOwnProperty(t)||(h.prototype[t]=i)},h.remove=function(t){h.prototype.hasOwnProperty(t)&&delete h.prototype[t]},o.register("GameObjectCreator",h,"make"),t.exports=h},function(t,i,n){var r=n(7),Extend=function(){var t,i,n,o,a,h,d=arguments[0]||{},f=1,p=arguments.length,T=!1;for("boolean"==typeof d&&(T=d,d=arguments[1]||{},f=2),p===f&&(d=this,--f);f<p;f++)if(null!=(t=arguments[f]))for(i in t)n=d[i],d!==(o=t[i])&&(T&&o&&(r(o)||(a=Array.isArray(o)))?(a?(a=!1,h=n&&Array.isArray(n)?n:[]):h=n&&r(n)?n:{},d[i]=Extend(T,h,o)):void 0!==o&&(d[i]=o));return d};t.exports=Extend},function(t,i){t.exports=function(t,i,n){return Math.max(i,Math.min(n,t))}},function(t,i,n){var r=n(25),o=new r,a=new r,h=new r,d={camera:o,sprite:a,calc:h};t.exports=function(t,i,n){var r=o,f=a,p=h;return f.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),r.copyFrom(i.matrix),n?(r.multiplyWithOffset(n,-i.scrollX*t.scrollFactorX,-i.scrollY*t.scrollFactorY),f.e=t.x,f.f=t.y):(f.e-=i.scrollX*t.scrollFactorX,f.f-=i.scrollY*t.scrollFactorY),r.multiply(f,p),d}},function(t,i,n){t.exports={ADDED_TO_SCENE:n(656),BOOT:n(657),CREATE:n(658),DESTROY:n(659),PAUSE:n(660),POST_UPDATE:n(661),PRE_RENDER:n(662),PRE_UPDATE:n(663),READY:n(664),REMOVED_FROM_SCENE:n(665),RENDER:n(666),RESUME:n(667),SHUTDOWN:n(668),SLEEP:n(669),START:n(670),TRANSITION_COMPLETE:n(671),TRANSITION_INIT:n(672),TRANSITION_OUT:n(673),TRANSITION_START:n(674),TRANSITION_WAKE:n(675),UPDATE:n(676),WAKE:n(677)}},function(t,i){t.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},function(t,i,n){t.exports={BLUR:n(612),BOOT:n(613),CONTEXT_LOST:n(614),CONTEXT_RESTORED:n(615),DESTROY:n(616),FOCUS:n(617),HIDDEN:n(618),PAUSE:n(619),POST_RENDER:n(620),POST_STEP:n(621),PRE_RENDER:n(622),PRE_STEP:n(623),READY:n(624),RESUME:n(625),STEP:n(626),VISIBLE:n(627)}},function(t,i,n){var r=n(0),o=n(21),a=n(95),h=n(2),d=n(155),f=n(240),p=n(517),T=n(156),b=new r({initialize:function File3(t,i){this.loader=t,this.cache=h(i,"cache",!1),this.type=h(i,"type",!1),this.key=h(i,"key",!1);var n=this.key;if(t.prefix&&""!==t.prefix&&(this.key=t.prefix+n),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var r=h(i,"url");void 0===r?r=t.path+n+"."+h(i,"extension",""):"string"!=typeof r||r.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)||(r=t.path+r),this.url=r,this.src="",this.xhrSettings=T(h(i,"responseType",void 0)),h(i,"xhrSettings",!1)&&(this.xhrSettings=f(this.xhrSettings,h(i,"xhrSettings",{}))),this.xhrLoader=null,this.state="function"==typeof this.url?o.FILE_POPULATED:o.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=h(i,"config",{}),this.multiFile,this.linkFile},setLink:function(t){this.linkFile=t,t.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===o.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=o.FILE_LOADING,this.src=d(this,this.loader.baseURL),0===this.src.indexOf("data:")?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=p(this,this.loader.xhr))},onLoad:function(t,i){var n=t.responseURL&&(0===t.responseURL.indexOf("file://")||0===t.responseURL.indexOf("capacitor://"))&&0===i.target.status,r=!(i.target&&200!==i.target.status)||n;4===t.readyState&&t.status>=400&&t.status<=599&&(r=!1),this.state=o.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,r)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(t){t.lengthComputable&&(this.bytesLoaded=t.loaded,this.bytesTotal=t.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(a.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=o.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=o.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=o.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(t){void 0===t&&(t=this.data);var i=this.key,n=this.type;this.loader.emit(a.FILE_COMPLETE,i,n,t),this.loader.emit(a.FILE_KEY_COMPLETE+n+"-"+i,i,n,t),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});b.createObjectURL=function(t,i,n){if("function"==typeof URL)t.src=URL.createObjectURL(i);else{var r=new FileReader;r.onload=function(){t.removeAttribute("crossOrigin"),t.src="data:"+(i.type||n)+";base64,"+r.result.split(",")[1]},r.onerror=t.onerror,r.readAsDataURL(i)}},b.revokeObjectURL=function(t){"function"==typeof URL&&URL.revokeObjectURL(t.src)},t.exports=b},function(t,i){var n={},r={},o={register:function(t,i,r,o){void 0===o&&(o=!1),n[t]={plugin:i,mapping:r,custom:o}},registerCustom:function(t,i,n,o){r[t]={plugin:i,mapping:n,data:o}},hasCore:function(t){return n.hasOwnProperty(t)},hasCustom:function(t){return r.hasOwnProperty(t)},getCore:function(t){return n[t]},getCustom:function(t){return r[t]},getCustomClass:function(t){return r.hasOwnProperty(t)?r[t].plugin:null},remove:function(t){n.hasOwnProperty(t)&&delete n[t]},removeCustom:function(t){r.hasOwnProperty(t)&&delete r[t]},destroyCorePlugins:function(){for(var t in n)n.hasOwnProperty(t)&&delete n[t]},destroyCustomPlugins:function(){for(var t in r)r.hasOwnProperty(t)&&delete r[t]}};t.exports=o},function(t,i,n){var r=n(0),o=n(14),a=n(3),h=new r({initialize:function TransformMatrix2(t,i,n,r,o,a){void 0===t&&(t=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===o&&(o=0),void 0===a&&(a=0),this.matrix=new Float32Array([t,i,n,r,o,a,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(t){this.matrix[0]=t}},b:{get:function(){return this.matrix[1]},set:function(t){this.matrix[1]=t}},c:{get:function(){return this.matrix[2]},set:function(t){this.matrix[2]=t}},d:{get:function(){return this.matrix[3]},set:function(t){this.matrix[3]=t}},e:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},f:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},tx:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},ty:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var t=this.matrix,i=t[0],n=t[1],r=t[2],a=t[3];return i||n?n>0?Math.acos(i/this.scaleX):-Math.acos(i/this.scaleX):r||a?o.TAU-(a>0?Math.acos(-r/this.scaleY):-Math.acos(r/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var t=this.matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},translate:function(t,i){var n=this.matrix;return n[4]=n[0]*t+n[2]*i+n[4],n[5]=n[1]*t+n[3]*i+n[5],this},scale:function(t,i){var n=this.matrix;return n[0]*=t,n[1]*=t,n[2]*=i,n[3]*=i,this},rotate:function(t){var i=Math.sin(t),n=Math.cos(t),r=this.matrix,o=r[0],a=r[1],h=r[2],d=r[3];return r[0]=o*n+h*i,r[1]=a*n+d*i,r[2]=o*-i+h*n,r[3]=a*-i+d*n,this},multiply:function(t,i){var n=this.matrix,r=t.matrix,o=n[0],a=n[1],h=n[2],d=n[3],f=n[4],p=n[5],T=r[0],b=r[1],S=r[2],A=r[3],P=r[4],O=r[5],L=void 0===i?this:i;return L.a=T*o+b*h,L.b=T*a+b*d,L.c=S*o+A*h,L.d=S*a+A*d,L.e=P*o+O*h+f,L.f=P*a+O*d+p,L},multiplyWithOffset:function(t,i,n){var r=this.matrix,o=t.matrix,a=r[0],h=r[1],d=r[2],f=r[3],p=i*a+n*d+r[4],T=i*h+n*f+r[5],b=o[0],S=o[1],A=o[2],P=o[3],O=o[4],L=o[5];return r[0]=b*a+S*d,r[1]=b*h+S*f,r[2]=A*a+P*d,r[3]=A*h+P*f,r[4]=O*a+L*d+p,r[5]=O*h+L*f+T,this},transform:function(t,i,n,r,o,a){var h=this.matrix,d=h[0],f=h[1],p=h[2],T=h[3],b=h[4],S=h[5];return h[0]=t*d+i*p,h[1]=t*f+i*T,h[2]=n*d+r*p,h[3]=n*f+r*T,h[4]=o*d+a*p+b,h[5]=o*f+a*T+S,this},transformPoint:function(t,i,n){void 0===n&&(n={x:0,y:0});var r=this.matrix,o=r[0],a=r[1],h=r[2],d=r[3],f=r[4],p=r[5];return n.x=t*o+i*h+f,n.y=t*a+i*d+p,n},invert:function(){var t=this.matrix,i=t[0],n=t[1],r=t[2],o=t[3],a=t[4],h=t[5],d=i*o-n*r;return t[0]=o/d,t[1]=-n/d,t[2]=-r/d,t[3]=i/d,t[4]=(r*h-o*a)/d,t[5]=-(i*h-n*a)/d,this},copyFrom:function(t){var i=this.matrix;return i[0]=t.a,i[1]=t.b,i[2]=t.c,i[3]=t.d,i[4]=t.e,i[5]=t.f,this},copyFromArray:function(t){var i=this.matrix;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],this},copyToContext:function(t){var i=this.matrix;return t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),t},setToContext:function(t){var i=this.matrix;return t.setTransform(i[0],i[1],i[2],i[3],i[4],i[5]),t},copyToArray:function(t){var i=this.matrix;return void 0===t?t=[i[0],i[1],i[2],i[3],i[4],i[5]]:(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5]),t},setTransform:function(t,i,n,r,o,a){var h=this.matrix;return h[0]=t,h[1]=i,h[2]=n,h[3]=r,h[4]=o,h[5]=a,this},decomposeMatrix:function(){var t=this.decomposedMatrix,i=this.matrix,n=i[0],r=i[1],o=i[2],a=i[3],h=n*a-r*o;if(t.translateX=i[4],t.translateY=i[5],n||r){var d=Math.sqrt(n*n+r*r);t.rotation=r>0?Math.acos(n/d):-Math.acos(n/d),t.scaleX=d,t.scaleY=h/d}else if(o||a){var f=Math.sqrt(o*o+a*a);t.rotation=.5*Math.PI-(a>0?Math.acos(-o/f):-Math.acos(o/f)),t.scaleX=h/f,t.scaleY=f}else t.rotation=0,t.scaleX=0,t.scaleY=0;return t},applyITRS:function(t,i,n,r,o){var a=this.matrix,h=Math.sin(n),d=Math.cos(n);return a[4]=t,a[5]=i,a[0]=d*r,a[1]=h*r,a[2]=-h*o,a[3]=d*o,this},applyInverse:function(t,i,n){void 0===n&&(n=new a);var r=this.matrix,o=r[0],h=r[1],d=r[2],f=r[3],p=r[4],T=r[5],b=1/(o*f+d*-h);return n.x=f*b*t+-d*b*i+(T*d-p*f)*b,n.y=o*b*i+-h*b*t+(-T*o+p*h)*b,n},getX:function(t,i){return t*this.a+i*this.c+this.e},getY:function(t,i){return t*this.b+i*this.d+this.f},getXRound:function(t,i,n){var r=this.getX(t,i);return n&&(r=Math.round(r)),r},getYRound:function(t,i,n){var r=this.getY(t,i);return n&&(r=Math.round(r)),r},getCSSMatrix:function(){var t=this.matrix;return"matrix("+t[0]+","+t[1]+","+t[2]+","+t[3]+","+t[4]+","+t[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});t.exports=h},function(t,i,n){var r=n(2);t.exports=function(t,i,n,o,a,h){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=h.width),void 0===o&&(o=h.height),a||(a={});var d=r(a,"isNotEmpty",!1),f=r(a,"isColliding",!1),p=r(a,"hasInterestingFace",!1);t<0&&(n+=t,t=0),i<0&&(o+=i,i=0),t+n>h.width&&(n=Math.max(h.width-t,0)),i+o>h.height&&(o=Math.max(h.height-i,0));for(var T=[],b=i;b<i+o;b++)for(var S=t;S<t+n;S++){var A=h.data[b][S];if(null!==A){if(d&&-1===A.index)continue;if(f&&!A.collides)continue;if(p&&!A.hasInterestingFace)continue;T.push(A)}}return T}},function(t,i){t.exports=function(t,i,n,r,o,a){var h;void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=1);var d=0,f=t.length;if(1===a)for(h=o;h<f;h++)t[h][i]=n+d*r,d++;else for(h=o;h>=0;h--)t[h][i]=n+d*r,d++;return t}},function(t,i,n){var r=n(35),o=n(13);t.exports=function(t,i,n){i.x=o(n,"x",0),i.y=o(n,"y",0),i.depth=o(n,"depth",0),i.flipX=o(n,"flipX",!1),i.flipY=o(n,"flipY",!1);var a=o(n,"scale",null);"number"==typeof a?i.setScale(a):null!==a&&(i.scaleX=o(a,"x",1),i.scaleY=o(a,"y",1));var h=o(n,"scrollFactor",null);"number"==typeof h?i.setScrollFactor(h):null!==h&&(i.scrollFactorX=o(h,"x",1),i.scrollFactorY=o(h,"y",1)),i.rotation=o(n,"rotation",0);var d=o(n,"angle",null);null!==d&&(i.angle=d),i.alpha=o(n,"alpha",1);var f=o(n,"origin",null);if("number"==typeof f)i.setOrigin(f);else if(null!==f){var p=o(f,"x",.5),T=o(f,"y",.5);i.setOrigin(p,T)}return i.blendMode=o(n,"blendMode",r.NORMAL),i.visible=o(n,"visible",!0),o(n,"add",!0)&&t.sys.displayList.add(i),i.preUpdate&&t.sys.updateList.add(i),i}},function(t,i){t.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},function(t,i,n){var r=n(19);t.exports=function(t,i,n,o,a){var h=o.alpha*n.alpha;if(h<=0)return!1;var d=r(n,o,a).calc;return i.globalCompositeOperation=t.blendModes[n.blendMode],i.globalAlpha=h,i.save(),d.setToContext(i),i.imageSmoothingEnabled=!(!t.antialias||n.frame&&n.frame.source.scaleMode),!0}},function(t,i,n){var r,o,a,h=n(33),d=n(192),f=[],p=!1;t.exports=(a=function(){var t=0;return f.forEach((function(i){i.parent&&t++})),t},{create2D:function(t,i,n){return r(t,i,n,h.CANVAS)},create:r=function(t,i,n,r,a){var T;void 0===i&&(i=1),void 0===n&&(n=1),void 0===r&&(r=h.CANVAS),void 0===a&&(a=!1);var b=o(r);return null===b?(b={parent:t,canvas:document.createElement("canvas"),type:r},r===h.CANVAS&&f.push(b),T=b.canvas):(b.parent=t,T=b.canvas),a&&(b.parent=T),T.width=i,T.height=n,p&&r===h.CANVAS&&d.disable(T.getContext("2d")),T},createWebGL:function(t,i,n){return r(t,i,n,h.WEBGL)},disableSmoothing:function(){p=!0},enableSmoothing:function(){p=!1},first:o=function(t){if(void 0===t&&(t=h.CANVAS),t===h.WEBGL)return null;for(var i=0;i<f.length;i++){var n=f[i];if(!n.parent&&n.type===t)return n}return null},free:function(){return f.length-a()},pool:f,remove:function(t){var i=t instanceof HTMLCanvasElement;f.forEach((function(n){(i&&n.canvas===t||!i&&n.parent===t)&&(n.parent=null,n.canvas.width=1,n.canvas.height=1)}))},total:a})},function(t,i){var n={};t.exports=n,function(){n._nextId=0,n._seed=0,n._nowStartTime=+new Date,n.extend=function(t,i){var r,o;"boolean"==typeof i?(r=2,o=i):(r=1,o=!0);for(var a=r;a<arguments.length;a++){var h=arguments[a];if(h)for(var d in h)o&&h[d]&&h[d].constructor===Object?t[d]&&t[d].constructor!==Object?t[d]=h[d]:(t[d]=t[d]||{},n.extend(t[d],o,h[d])):t[d]=h[d]}return t},n.clone=function(t,i){return n.extend({},i,t)},n.keys=function(t){if(Object.keys)return Object.keys(t);var i=[];for(var n in t)i.push(n);return i},n.values=function(t){var i=[];if(Object.keys){for(var n=Object.keys(t),r=0;r<n.length;r++)i.push(t[n[r]]);return i}for(var o in t)i.push(t[o]);return i},n.get=function(t,i,n,r){i=i.split(".").slice(n,r);for(var o=0;o<i.length;o+=1)t=t[i[o]];return t},n.set=function(t,i,r,o,a){var h=i.split(".").slice(o,a);return n.get(t,i,0,-1)[h[h.length-1]]=r,r},n.shuffle=function(t){for(var i=t.length-1;i>0;i--){var r=Math.floor(n.random()*(i+1)),o=t[i];t[i]=t[r],t[r]=o}return t},n.choose=function(t){return t[Math.floor(n.random()*t.length)]},n.isElement=function(t){return"undefined"!=typeof HTMLElement?t instanceof HTMLElement:!!(t&&t.nodeType&&t.nodeName)},n.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},n.isFunction=function(t){return"function"==typeof t},n.isPlainObject=function(t){return"object"==typeof t&&t.constructor===Object},n.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},n.clamp=function(t,i,n){return t<i?i:t>n?n:t},n.sign=function(t){return t<0?-1:1},n.now=function(){if("undefined"!=typeof window&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-n._nowStartTime},n.random=function(t,i){return i=void 0!==i?i:1,(t=void 0!==t?t:0)+_seededRandom()*(i-t)};var _seededRandom=function(){return n._seed=(9301*n._seed+49297)%233280,n._seed/233280};n.colorToNumber=function(t){return 3==(t=t.replace("#","")).length&&(t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)),parseInt(t,16)},n.logLevel=1,n.log=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.info=function(){console&&n.logLevel>0&&n.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.warn=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.nextId=function(){return n._nextId++},n.indexOf=function(t,i){if(t.indexOf)return t.indexOf(i);for(var n=0;n<t.length;n++)if(t[n]===i)return n;return-1},n.map=function(t,i){if(t.map)return t.map(i);for(var n=[],r=0;r<t.length;r+=1)n.push(i(t[r]));return n},n.topologicalSort=function(t){var i=[],r=[],o=[];for(var a in t)r[a]||o[a]||n._topologicalSort(a,r,o,t,i);return i},n._topologicalSort=function(t,i,r,o,a){var h=o[t]||[];r[t]=!0;for(var d=0;d<h.length;d+=1){var f=h[d];r[f]||i[f]||n._topologicalSort(f,i,r,o,a)}r[t]=!1,i[t]=!0,a.push(t)},n.chain=function(){for(var t=[],i=0;i<arguments.length;i+=1){var n=arguments[i];n._chained?t.push.apply(t,n._chained):t.push(n)}var chain2=function(){for(var i,n=new Array(arguments.length),r=0,o=arguments.length;r<o;r++)n[r]=arguments[r];for(r=0;r<t.length;r+=1){var a=t[r].apply(i,n);void 0!==a&&(i=a)}return i};return chain2._chained=t,chain2},n.chainPathBefore=function(t,i,r){return n.set(t,i,n.chain(r,n.get(t,i)))},n.chainPathAfter=function(t,i,r){return n.set(t,i,n.chain(n.get(t,i),r))}}()},function(t,i,n){var r={VERSION:"3.55.2",BlendModes:n(35),ScaleModes:n(168),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};t.exports=r},function(t,i,n){var r=n(0),o=n(11),a=n(15),h=n(47),d=new r({Extends:a,Mixins:[o.AlphaSingle,o.BlendMode,o.Depth,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.ScrollFactor,o.Transform,o.Visible],initialize:function Shape3(t,i,n){void 0===i&&(i="Shape"),a.call(this,t,i),this.geom=n,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new h,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(t,i){return void 0===i&&(i=1),void 0===t?this.isFilled=!1:(this.fillColor=t,this.fillAlpha=i,this.isFilled=!0),this},setStrokeStyle:function(t,i,n){return void 0===n&&(n=1),void 0===t?this.isStroked=!1:(this.lineWidth=t,this.strokeColor=i,this.strokeAlpha=n,this.isStroked=!0),this},setClosePath:function(t){return this.closePath=t,this},setSize:function(t,i){return this.width=t,this.height=i,this},setDisplaySize:function(t,i){return this.displayWidth=t,this.displayHeight=i,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}}});t.exports=d},function(t,i){t.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(t,i,n){var r=n(14);t.exports=function(t){return t*r.DEG_TO_RAD}},function(t,i,n){t.exports={DESTROY:n(743),FADE_IN_COMPLETE:n(744),FADE_IN_START:n(745),FADE_OUT_COMPLETE:n(746),FADE_OUT_START:n(747),FLASH_COMPLETE:n(748),FLASH_START:n(749),FOLLOW_UPDATE:n(750),PAN_COMPLETE:n(751),PAN_START:n(752),POST_RENDER:n(753),PRE_RENDER:n(754),ROTATE_COMPLETE:n(755),ROTATE_START:n(756),SHAKE_COMPLETE:n(757),SHAKE_START:n(758),ZOOM_COMPLETE:n(759),ZOOM_START:n(760)}},function(t,i,n){var r=n(0),o=n(103),a=n(328),h=n(188),d=n(329),f=new r({initialize:function Color2(t,i,n,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(t,i,n,r)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(t,i,n,r,o){return void 0===r&&(r=255),void 0===o&&(o=!0),this._locked=!0,this.red=t,this.green=i,this.blue=n,this.alpha=r,this._locked=!1,this.update(o)},setGLTo:function(t,i,n,r){return void 0===r&&(r=1),this._locked=!0,this.redGL=t,this.greenGL=i,this.blueGL=n,this.alphaGL=r,this._locked=!1,this.update(!0)},setFromRGB:function(t){return this._locked=!0,this.red=t.r,this.green=t.g,this.blue=t.b,t.hasOwnProperty("a")&&(this.alpha=t.a),this._locked=!1,this.update(!0)},setFromHSV:function(t,i,n){return h(t,i,n,this)},update:function(t){if(void 0===t&&(t=!1),this._locked)return this;var i=this.r,n=this.g,r=this.b,h=this.a;return this._color=o(i,n,r),this._color32=a(i,n,r,h),this._rgba="rgba("+i+","+n+","+r+","+h/255+")",t&&d(i,n,r,this),this},updateHSV:function(){var t=this.r,i=this.g,n=this.b;return d(t,i,n,this),this},clone:function(){return new f(this.r,this.g,this.b,this.a)},gray:function(t){return this.setTo(t,t,t)},random:function(t,i){void 0===t&&(t=0),void 0===i&&(i=255);var n=Math.floor(t+Math.random()*(i-t)),r=Math.floor(t+Math.random()*(i-t)),o=Math.floor(t+Math.random()*(i-t));return this.setTo(n,r,o)},randomGray:function(t,i){void 0===t&&(t=0),void 0===i&&(i=255);var n=Math.floor(t+Math.random()*(i-t));return this.setTo(n,n,n)},saturate:function(t){return this.s+=t/100,this},desaturate:function(t){return this.s-=t/100,this},lighten:function(t){return this.v+=t/100,this},darken:function(t){return this.v-=t/100,this},brighten:function(t){var i=this.r,n=this.g,r=this.b;return i=Math.max(0,Math.min(255,i-Math.round(-t/100*255))),n=Math.max(0,Math.min(255,n-Math.round(-t/100*255))),r=Math.max(0,Math.min(255,r-Math.round(-t/100*255))),this.setTo(i,n,r)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(t){this.gl[0]=Math.min(Math.abs(t),1),this.r=Math.floor(255*this.gl[0]),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(t){this.gl[1]=Math.min(Math.abs(t),1),this.g=Math.floor(255*this.gl[1]),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(t){this.gl[2]=Math.min(Math.abs(t),1),this.b=Math.floor(255*this.gl[2]),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(t){this.gl[3]=Math.min(Math.abs(t),1),this.a=Math.floor(255*this.gl[3]),this.update()}},red:{get:function(){return this.r},set:function(t){t=Math.floor(Math.abs(t)),this.r=Math.min(t,255),this.gl[0]=t/255,this.update(!0)}},green:{get:function(){return this.g},set:function(t){t=Math.floor(Math.abs(t)),this.g=Math.min(t,255),this.gl[1]=t/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(t){t=Math.floor(Math.abs(t)),this.b=Math.min(t,255),this.gl[2]=t/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(t){t=Math.floor(Math.abs(t)),this.a=Math.min(t,255),this.gl[3]=t/255,this.update()}},h:{get:function(){return this._h},set:function(t){this._h=t,h(t,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(t){this._s=t,h(this._h,t,this._v,this)}},v:{get:function(){return this._v},set:function(t){this._v=t,h(this._h,this._s,t,this)}}});t.exports=f},function(t,i,n){var r=new(n(0))({initialize:function Vector32(t,i,n){this.x=0,this.y=0,this.z=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=i||0,this.z=n||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clone:function(){return new r(this.x,this.y,this.z)},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this},crossVectors:function(t,i){var n=t.x,r=t.y,o=t.z,a=i.x,h=i.y,d=i.z;return this.x=r*d-o*h,this.y=o*a-n*d,this.z=n*h-r*a,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},set:function(t,i,n){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=i||0,this.z=n||0),this},setFromMatrixPosition:function(t){return this.fromArray(t.val,12)},setFromMatrixColumn:function(t,i){return this.fromArray(t.val,4*i)},fromArray:function(t,i){return void 0===i&&(i=0),this.x=t[i],this.y=t[i+1],this.z=t[i+2],this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addScale:function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(t){var i=t.x-this.x,n=t.y-this.y,r=t.z-this.z||0;return Math.sqrt(i*i+n*n+r*r)},distanceSq:function(t){var i=t.x-this.x,n=t.y-this.y,r=t.z-this.z||0;return i*i+n*n+r*r},length:function(){var t=this.x,i=this.y,n=this.z;return Math.sqrt(t*t+i*i+n*n)},lengthSq:function(){var t=this.x,i=this.y,n=this.z;return t*t+i*i+n*n},normalize:function(){var t=this.x,i=this.y,n=this.z,r=t*t+i*i+n*n;return r>0&&(r=1/Math.sqrt(r),this.x=t*r,this.y=i*r,this.z=n*r),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function(t){var i=this.x,n=this.y,r=this.z,o=t.x,a=t.y,h=t.z;return this.x=n*h-r*a,this.y=r*o-i*h,this.z=i*a-n*o,this},lerp:function(t,i){void 0===i&&(i=0);var n=this.x,r=this.y,o=this.z;return this.x=n+i*(t.x-n),this.y=r+i*(t.y-r),this.z=o+i*(t.z-o),this},applyMatrix3:function(t){var i=this.x,n=this.y,r=this.z,o=t.val;return this.x=o[0]*i+o[3]*n+o[6]*r,this.y=o[1]*i+o[4]*n+o[7]*r,this.z=o[2]*i+o[5]*n+o[8]*r,this},applyMatrix4:function(t){var i=this.x,n=this.y,r=this.z,o=t.val,a=1/(o[3]*i+o[7]*n+o[11]*r+o[15]);return this.x=(o[0]*i+o[4]*n+o[8]*r+o[12])*a,this.y=(o[1]*i+o[5]*n+o[9]*r+o[13])*a,this.z=(o[2]*i+o[6]*n+o[10]*r+o[14])*a,this},transformMat3:function(t){var i=this.x,n=this.y,r=this.z,o=t.val;return this.x=i*o[0]+n*o[3]+r*o[6],this.y=i*o[1]+n*o[4]+r*o[7],this.z=i*o[2]+n*o[5]+r*o[8],this},transformMat4:function(t){var i=this.x,n=this.y,r=this.z,o=t.val;return this.x=o[0]*i+o[4]*n+o[8]*r+o[12],this.y=o[1]*i+o[5]*n+o[9]*r+o[13],this.z=o[2]*i+o[6]*n+o[10]*r+o[14],this},transformCoordinates:function(t){var i=this.x,n=this.y,r=this.z,o=t.val,a=i*o[0]+n*o[4]+r*o[8]+o[12],h=i*o[1]+n*o[5]+r*o[9]+o[13],d=i*o[2]+n*o[6]+r*o[10]+o[14],f=i*o[3]+n*o[7]+r*o[11]+o[15];return this.x=a/f,this.y=h/f,this.z=d/f,this},transformQuat:function(t){var i=this.x,n=this.y,r=this.z,o=t.x,a=t.y,h=t.z,d=t.w,f=d*i+a*r-h*n,p=d*n+h*i-o*r,T=d*r+o*n-a*i,b=-o*i-a*n-h*r;return this.x=f*d+b*-o+p*-h-T*-a,this.y=p*d+b*-a+T*-o-f*-h,this.z=T*d+b*-h+f*-a-p*-o,this},project:function(t){var i=this.x,n=this.y,r=this.z,o=t.val,a=o[0],h=o[1],d=o[2],f=o[3],p=o[4],T=o[5],b=o[6],S=o[7],A=o[8],P=o[9],O=o[10],L=o[11],D=o[12],I=o[13],F=o[14],B=1/(i*f+n*S+r*L+o[15]);return this.x=(i*a+n*p+r*A+D)*B,this.y=(i*h+n*T+r*P+I)*B,this.z=(i*d+n*b+r*O+F)*B,this},projectViewMatrix:function(t,i){return this.applyMatrix4(t).applyMatrix4(i)},unprojectViewMatrix:function(t,i){return this.applyMatrix4(t).applyMatrix4(i)},unproject:function(t,i){var n=t.x,r=t.y,o=t.z,a=t.w,h=this.x-n,d=a-this.y-1-r,f=this.z;return this.x=2*h/o-1,this.y=2*d/a-1,this.z=2*f-1,this.project(i)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});r.ZERO=new r,r.RIGHT=new r(1,0,0),r.LEFT=new r(-1,0,0),r.UP=new r(0,-1,0),r.DOWN=new r(0,1,0),r.FORWARD=new r(0,0,1),r.BACK=new r(0,0,-1),r.ONE=new r(1,1,1),t.exports=r},function(t,i){t.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(t,i,n){var r={};t.exports=r;var o=n(64),a=n(83),h=n(165),d=n(32),f=n(84),p=n(271);!function(){r._inertiaScale=4,r._nextCollidingGroupId=1,r._nextNonCollidingGroupId=-1,r._nextCategory=1,r.create=function(t){var i={id:d.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!t.hasOwnProperty("position")&&t.hasOwnProperty("vertices")?t.position=o.centre(t.vertices):t.hasOwnProperty("vertices")||(i.vertices=o.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var n=d.extend(i,t);return _initProperties(n,t),n.setOnCollideWith=function(t,i){return i?this.onCollideWith[t.id]=i:delete this.onCollideWith[t.id],this},n},r.nextGroup=function(t){return t?r._nextNonCollidingGroupId--:r._nextCollidingGroupId++},r.nextCategory=function(){return r._nextCategory=r._nextCategory<<1,r._nextCategory};var _initProperties=function(t,i){i=i||{},r.set(t,{bounds:t.bounds||f.create(t.vertices),positionPrev:t.positionPrev||a.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t});var n=t.bounds;if(o.rotate(t.vertices,t.angle,t.position),p.rotate(t.axes,t.angle),f.update(n,t.vertices,t.velocity),r.set(t,{axes:i.axes||t.axes,area:i.area||t.area,mass:i.mass||t.mass,inertia:i.inertia||t.inertia}),1===t.parts.length){var h=t.centerOfMass,d=t.centerOffset,T=n.max.x-n.min.x,b=n.max.y-n.min.y;h.x=-(n.min.x-t.position.x)/T,h.y=-(n.min.y-t.position.y)/b,d.x=T*h.x,d.y=b*h.y}};r.set=function(t,i,n){var o;for(o in"string"==typeof i&&(o=i,(i={})[o]=n),i)if(Object.prototype.hasOwnProperty.call(i,o))switch(n=i[o],o){case"isStatic":r.setStatic(t,n);break;case"isSleeping":h.set(t,n);break;case"mass":r.setMass(t,n);break;case"density":r.setDensity(t,n);break;case"inertia":r.setInertia(t,n);break;case"vertices":r.setVertices(t,n);break;case"position":r.setPosition(t,n);break;case"angle":r.setAngle(t,n);break;case"velocity":r.setVelocity(t,n);break;case"angularVelocity":r.setAngularVelocity(t,n);break;case"parts":r.setParts(t,n);break;case"centre":r.setCentre(t,n);break;default:t[o]=n}},r.setStatic=function(t,i){for(var n=0;n<t.parts.length;n++){var r=t.parts[n];r.isStatic=i,i?(r._original={restitution:r.restitution,friction:r.friction,mass:r.mass,inertia:r.inertia,density:r.density,inverseMass:r.inverseMass,inverseInertia:r.inverseInertia},r.restitution=0,r.friction=1,r.mass=r.inertia=r.density=1/0,r.inverseMass=r.inverseInertia=0,r.positionPrev.x=r.position.x,r.positionPrev.y=r.position.y,r.anglePrev=r.angle,r.angularVelocity=0,r.speed=0,r.angularSpeed=0,r.motion=0):r._original&&(r.restitution=r._original.restitution,r.friction=r._original.friction,r.mass=r._original.mass,r.inertia=r._original.inertia,r.density=r._original.density,r.inverseMass=r._original.inverseMass,r.inverseInertia=r._original.inverseInertia,r._original=null)}},r.setMass=function(t,i){var n=t.inertia/(t.mass/6);t.inertia=n*(i/6),t.inverseInertia=1/t.inertia,t.mass=i,t.inverseMass=1/t.mass,t.density=t.mass/t.area},r.setDensity=function(t,i){r.setMass(t,i*t.area),t.density=i},r.setInertia=function(t,i){t.inertia=i,t.inverseInertia=1/t.inertia},r.setVertices=function(t,i){i[0].body===t?t.vertices=i:t.vertices=o.create(i,t),t.axes=p.fromVertices(t.vertices),t.area=o.area(t.vertices),r.setMass(t,t.density*t.area);var n=o.centre(t.vertices);o.translate(t.vertices,n,-1),r.setInertia(t,r._inertiaScale*o.inertia(t.vertices,t.mass)),o.translate(t.vertices,t.position),f.update(t.bounds,t.vertices,t.velocity)},r.setParts=function(t,i,n){var a;for(i=i.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,a=0;a<i.length;a++){var h=i[a];h!==t&&(h.parent=t,t.parts.push(h))}if(1!==t.parts.length){if(n=void 0===n||n){var d=[];for(a=0;a<i.length;a++)d=d.concat(i[a].vertices);o.clockwiseSort(d);var p=o.hull(d),T=o.centre(p);r.setVertices(t,p),o.translate(t.vertices,T)}var b=r._totalProperties(t),S=b.centre.x,A=b.centre.y,P=t.bounds,O=t.centerOfMass,L=t.centerOffset;f.update(P,t.vertices,t.velocity),O.x=-(P.min.x-S)/(P.max.x-P.min.x),O.y=-(P.min.y-A)/(P.max.y-P.min.y),L.x=S,L.y=A,t.area=b.area,t.parent=t,t.position.x=S,t.position.y=A,t.positionPrev.x=S,t.positionPrev.y=A,r.setMass(t,b.mass),r.setInertia(t,b.inertia),r.setPosition(t,b.centre)}},r.setCentre=function(t,i,n){n?(t.positionPrev.x+=i.x,t.positionPrev.y+=i.y,t.position.x+=i.x,t.position.y+=i.y):(t.positionPrev.x=i.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=i.y-(t.position.y-t.positionPrev.y),t.position.x=i.x,t.position.y=i.y)},r.setPosition=function(t,i){var n=a.sub(i,t.position);t.positionPrev.x+=n.x,t.positionPrev.y+=n.y;for(var r=0;r<t.parts.length;r++){var h=t.parts[r];h.position.x+=n.x,h.position.y+=n.y,o.translate(h.vertices,n),f.update(h.bounds,h.vertices,t.velocity)}},r.setAngle=function(t,i){var n=i-t.angle;t.anglePrev+=n;for(var r=0;r<t.parts.length;r++){var h=t.parts[r];h.angle+=n,o.rotate(h.vertices,n,t.position),p.rotate(h.axes,n),f.update(h.bounds,h.vertices,t.velocity),r>0&&a.rotateAbout(h.position,n,t.position,h.position)}},r.setVelocity=function(t,i){t.positionPrev.x=t.position.x-i.x,t.positionPrev.y=t.position.y-i.y,t.velocity.x=i.x,t.velocity.y=i.y,t.speed=a.magnitude(t.velocity)},r.setAngularVelocity=function(t,i){t.anglePrev=t.angle-i,t.angularVelocity=i,t.angularSpeed=Math.abs(t.angularVelocity)},r.translate=function(t,i){r.setPosition(t,a.add(t.position,i))},r.rotate=function(t,i,n){if(n){var o=Math.cos(i),a=Math.sin(i),h=t.position.x-n.x,d=t.position.y-n.y;r.setPosition(t,{x:n.x+(h*o-d*a),y:n.y+(h*a+d*o)}),r.setAngle(t,t.angle+i)}else r.setAngle(t,t.angle+i)},r.scale=function(t,i,n,a){var h=0,d=0;a=a||t.position;for(var T=0;T<t.parts.length;T++){var b=t.parts[T];b.scale.x=i,b.scale.y=n,o.scale(b.vertices,i,n,a),b.axes=p.fromVertices(b.vertices),b.area=o.area(b.vertices),r.setMass(b,t.density*b.area),o.translate(b.vertices,{x:-b.position.x,y:-b.position.y}),r.setInertia(b,r._inertiaScale*o.inertia(b.vertices,b.mass)),o.translate(b.vertices,{x:b.position.x,y:b.position.y}),T>0&&(h+=b.area,d+=b.inertia),b.position.x=a.x+(b.position.x-a.x)*i,b.position.y=a.y+(b.position.y-a.y)*n,f.update(b.bounds,b.vertices,t.velocity)}t.parts.length>1&&(t.area=h,t.isStatic||(r.setMass(t,t.density*h),r.setInertia(t,d))),t.circleRadius&&(i===n?t.circleRadius*=i:t.circleRadius=null)},r.update=function(t,i,n,r){var h=Math.pow(i*n*t.timeScale,2),d=1-t.frictionAir*n*t.timeScale,T=t.position.x-t.positionPrev.x,b=t.position.y-t.positionPrev.y;t.velocity.x=T*d*r+t.force.x/t.mass*h,t.velocity.y=b*d*r+t.force.y/t.mass*h,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*d*r+t.torque/t.inertia*h,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=a.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var S=0;S<t.parts.length;S++){var A=t.parts[S];o.translate(A.vertices,t.velocity),S>0&&(A.position.x+=t.velocity.x,A.position.y+=t.velocity.y),0!==t.angularVelocity&&(o.rotate(A.vertices,t.angularVelocity,t.position),p.rotate(A.axes,t.angularVelocity),S>0&&a.rotateAbout(A.position,t.angularVelocity,t.position,A.position)),f.update(A.bounds,A.vertices,t.velocity)}},r.applyForce=function(t,i,n){t.force.x+=n.x,t.force.y+=n.y;var r=i.x-t.position.x,o=i.y-t.position.y;t.torque+=r*n.y-o*n.x},r._totalProperties=function(t){for(var i={mass:0,area:0,inertia:0,centre:{x:0,y:0}},n=1===t.parts.length?0:1;n<t.parts.length;n++){var r=t.parts[n],o=r.mass!==1/0?r.mass:1;i.mass+=o,i.area+=r.area,i.inertia+=r.inertia,i.centre=a.add(i.centre,a.mult(r.position,o))}return i.centre=a.div(i.centre,i.mass),i}}()},function(t,i){t.exports=function(t){return t.y+t.height-t.height*t.originY}},function(t,i){t.exports=function(t){return t.x-t.width*t.originX}},function(t,i){t.exports=function(t){return t.x+t.width-t.width*t.originX}},function(t,i){t.exports=function(t){return t.y-t.height*t.originY}},function(t,i){t.exports=function(t,i,n,r,o,a){var h;void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=1);var d=0,f=t.length;if(1===a)for(h=o;h<f;h++)t[h][i]+=n+d*r,d++;else for(h=o;h>=0;h--)t[h][i]+=n+d*r,d++;return t}},function(t,i,n){var r=n(0),o=n(307),a=n(172),h=n(56),d=n(173),f=n(3),p=new r({initialize:function Line4(t,i,n,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),this.type=h.LINE,this.x1=t,this.y1=i,this.x2=n,this.y2=r},getPoint:function(t,i){return o(this,t,i)},getPoints:function(t,i,n){return a(this,t,i,n)},getRandomPoint:function(t){return d(this,t)},setTo:function(t,i,n,r){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x1=t,this.y1=i,this.x2=n,this.y2=r,this},getPointA:function(t){return void 0===t&&(t=new f),t.set(this.x1,this.y1),t},getPointB:function(t){return void 0===t&&(t=new f),t.set(this.x2,this.y2),t},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(t){this.y1>this.y2?this.y1=t:this.y2=t}}});t.exports=p},function(t,i){t.exports=function(t,i,n,r){var o=n||i.fillColor,a=r||i.fillAlpha,h=(16711680&o)>>>16,d=(65280&o)>>>8,f=255&o;t.fillStyle="rgba("+h+","+d+","+f+","+a+")"}},function(t,i,n){var r=new(n(0))({initialize:function MultiFile2(t,i,n,r){var o=[];r.forEach((function(t){t&&o.push(t)})),this.loader=t,this.type=i,this.key=n,this.multiKeyIndex=t.multiKeyIndex++,this.files=o,this.complete=!1,this.pending=o.length,this.failed=0,this.config={},this.baseURL=t.baseURL,this.path=t.path,this.prefix=t.prefix;for(var a=0;a<o.length;a++)o[a].multiFile=this},isReadyToProcess:function(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function(t){return this.files.push(t),t.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(t){-1!==this.files.indexOf(t)&&this.pending--},onFileFailed:function(t){-1!==this.files.indexOf(t)&&this.failed++}});t.exports=r},function(t,i){t.exports=function(t,i,n,r){var o=t-n,a=i-r;return Math.sqrt(o*o+a*a)}},function(t,i,n){t.exports={BOOT:n(922),DESTROY:n(923),DRAG_END:n(924),DRAG_ENTER:n(925),DRAG:n(926),DRAG_LEAVE:n(927),DRAG_OVER:n(928),DRAG_START:n(929),DROP:n(930),GAME_OUT:n(931),GAME_OVER:n(932),GAMEOBJECT_DOWN:n(933),GAMEOBJECT_DRAG_END:n(934),GAMEOBJECT_DRAG_ENTER:n(935),GAMEOBJECT_DRAG:n(936),GAMEOBJECT_DRAG_LEAVE:n(937),GAMEOBJECT_DRAG_OVER:n(938),GAMEOBJECT_DRAG_START:n(939),GAMEOBJECT_DROP:n(940),GAMEOBJECT_MOVE:n(941),GAMEOBJECT_OUT:n(942),GAMEOBJECT_OVER:n(943),GAMEOBJECT_POINTER_DOWN:n(944),GAMEOBJECT_POINTER_MOVE:n(945),GAMEOBJECT_POINTER_OUT:n(946),GAMEOBJECT_POINTER_OVER:n(947),GAMEOBJECT_POINTER_UP:n(948),GAMEOBJECT_POINTER_WHEEL:n(949),GAMEOBJECT_UP:n(950),GAMEOBJECT_WHEEL:n(951),MANAGER_BOOT:n(952),MANAGER_PROCESS:n(953),MANAGER_UPDATE:n(954),POINTER_DOWN:n(955),POINTER_DOWN_OUTSIDE:n(956),POINTER_MOVE:n(957),POINTER_OUT:n(958),POINTER_OVER:n(959),POINTER_UP:n(960),POINTER_UP_OUTSIDE:n(961),POINTER_WHEEL:n(962),POINTERLOCK_CHANGE:n(963),PRE_UPDATE:n(964),SHUTDOWN:n(965),START:n(966),UPDATE:n(967)}},function(t,i){t.exports=function(t,i){return t.y=i+t.height*t.originY,t}},function(t,i){t.exports=function(t,i){return t.x=i+t.width*t.originX,t}},function(t,i){t.exports=function(t,i){return t.x=i-t.width+t.width*t.originX,t}},function(t,i){t.exports=function(t,i){return t.y=i-t.height+t.height*t.originY,t}},function(t,i){t.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},function(t,i){t.exports=function(t,i,n){return!(t.width<=0||t.height<=0)&&t.x<=i&&t.x+t.width>=i&&t.y<=n&&t.y+t.height>=n}},function(t,i,n){var r=n(0),o=n(175),a=n(9),h=n(374),d=n(2),f=n(69),p=n(91),T=n(141),b=n(12),S=n(375),A=new r({Extends:a,initialize:function WebGLPipeline2(t){a.call(this);var i=t.game,n=i.renderer,r=n.gl;this.name=d(t,"name","WebGLPipeline"),this.game=i,this.renderer=n,this.manager,this.gl=r,this.view=i.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=d(t,"topology",r.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=d(t,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=t,this.glReset=!1},boot:function(){var t,i=this.gl,n=this.config,r=this.renderer;this.isPostFX||(this.projectionMatrix=(new f).identity());var o=this.renderTargets,a=d(n,"renderTarget",!1);"boolean"==typeof a&&a&&(a=1);var b=r.width,S=r.height;if("number"==typeof a)for(t=0;t<a;t++)o.push(new T(r,b,S,1,0,!0));else if(Array.isArray(a))for(t=0;t<a.length;t++){var A=d(a[t],"scale",1),P=d(a[t],"minFilter",0),O=d(a[t],"autoClear",1);o.push(new T(r,b,S,A,P,O))}o.length&&(this.currentRenderTarget=o[0]),this.setShadersFromConfig(n);var L=this.shaders,D=0;for(t=0;t<L.length;t++)L[t].vertexSize>D&&(D=L[t].vertexSize);var I=d(n,"batchSize",r.config.batchSize);this.vertexCapacity=6*I;var F=new ArrayBuffer(this.vertexCapacity*D);this.vertexData=F,this.bytes=new Uint8Array(F),this.vertexViewF32=new Float32Array(F),this.vertexViewU32=new Uint32Array(F);var B=d(n,"vertices",null);for(B?(this.vertexViewF32.set(B),this.vertexBuffer=r.createVertexBuffer(F,i.STATIC_DRAW)):this.vertexBuffer=r.createVertexBuffer(F.byteLength,i.DYNAMIC_DRAW),this.setVertexBuffer(),t=L.length-1;t>=0;t--)L[t].rebind();this.hasBooted=!0,r.on(p.RESIZE,this.resize,this),r.on(p.PRE_RENDER,this.onPreRender,this),r.on(p.RENDER,this.onRender,this),r.on(p.POST_RENDER,this.onPostRender,this),this.emit(h.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(t,i){var n=this.renderer;return t===this.currentShader&&n.currentProgram===this.currentShader.program||(this.flush(),n.resetTextures(),this.setVertexBuffer()&&!i&&(i=!0),t.bind(i,!1),this.currentShader=t),this},getShaderByName:function(t){for(var i=this.shaders,n=0;n<i.length;n++)if(i[n].name===t)return i[n]},setShadersFromConfig:function(t){var i,n=this.shaders,r=this.renderer;for(i=0;i<n.length;i++)n[i].destroy();var a="vertShader",h="fragShader",f="attributes",p=d(t,a,null),T=b.parseFragmentShaderMaxTextures(d(t,h,null),r.maxTextures),A=d(t,f,null),P=d(t,"shaders",[]),O=P.length;if(0===O)p&&T&&(this.shaders=[new S(this,"default",p,T,o(A))]);else{var L=[];for(i=0;i<O;i++){var D=P[i],I=d(D,"name","default"),F=d(D,a,p),B=b.parseFragmentShaderMaxTextures(d(D,h,T),r.maxTextures),N=d(D,f,A);F&&B&&L.push(new S(this,I,F,B,o(N)))}this.shaders=L}return 0===this.shaders.length?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function(t,i){return void 0===i&&(i=t.frame),this.currentUnit=this.renderer.setTextureSource(i.source),this.currentUnit},shouldFlush:function(t){return void 0===t&&(t=0),this.vertexCount+t>this.vertexCapacity},resize:function(t,i){t===this.width&&i===this.height||this.flush(),this.width=t,this.height=i;for(var n=this.renderTargets,r=0;r<n.length;r++)n[r].resize(t,i);return this.setProjectionMatrix(t,i),this.emit(h.RESIZE,t,i,this),this.onResize(t,i),this},setProjectionMatrix:function(t,i){var n=this.projectionMatrix;if(!n)return this;this.projectionWidth=t,this.projectionHeight=i,n.ortho(0,t,i,0,-1e3,1e3);for(var r=this.shaders,o="uProjectionMatrix",a=0;a<r.length;a++){var h=r[a];h.hasUniform(o)&&(h.resetUniform(o),h.setMatrix4fv(o,!1,n.val,h))}return this},updateProjectionMatrix:function(){if(this.projectionMatrix){var t=this.renderer.projectionWidth,i=this.renderer.projectionHeight;this.projectionWidth===t&&this.projectionHeight===i||this.setProjectionMatrix(t,i)}},bind:function(t){if(void 0===t&&(t=this.currentShader),this.glReset)return this.rebind(t);var i=this.setVertexBuffer();return t.bind(i),this.currentShader=t,this.emit(h.BIND,this,t),this.onActive(t),this},rebind:function(t){this.setVertexBuffer();for(var i=this.shaders,n=i.length-1;n>=0;n--){var r=i[n].rebind();t&&r!==t||(this.currentShader=r)}return this.emit(h.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(){var t=this.gl,i=this.vertexBuffer;return t.getParameter(t.ARRAY_BUFFER_BINDING)!==i&&(t.bindBuffer(t.ARRAY_BUFFER,i),!0)},preBatch:function(t){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(t),this},postBatch:function(t){return this.onDraw(this.currentRenderTarget),this.onPostBatch(t),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(t){if(void 0===t&&(t=!1),this.vertexCount>0){this.emit(h.BEFORE_FLUSH,this,t),this.onBeforeFlush(t);var i=this.gl,n=this.vertexCount,r=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),n===this.vertexCapacity?i.bufferData(i.ARRAY_BUFFER,this.vertexData,i.DYNAMIC_DRAW):i.bufferSubData(i.ARRAY_BUFFER,0,this.bytes.subarray(0,n*r)),i.drawArrays(this.topology,0,n)),this.vertexCount=0,this.emit(h.AFTER_FLUSH,this,t),this.onAfterFlush(t)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(t,i,n,r,o,a,h){var d=this.vertexViewF32,f=this.vertexViewU32,p=this.vertexCount*this.currentShader.vertexComponentCount-1;d[++p]=t,d[++p]=i,d[++p]=n,d[++p]=r,d[++p]=o,d[++p]=a,f[++p]=h,this.vertexCount++},batchQuad:function(t,i,n,r,o,a,h,d,f,p,T,b,S,A,P,O,L,D,I,F){void 0===F&&(F=this.currentUnit);var B=!1;return this.shouldFlush(6)&&(this.flush(),B=!0,F=this.setTexture2D(I)),this.batchVert(i,n,p,T,F,D,A),this.batchVert(r,o,p,S,F,D,O),this.batchVert(a,h,b,S,F,D,L),this.batchVert(i,n,p,T,F,D,A),this.batchVert(a,h,b,S,F,D,L),this.batchVert(d,f,b,T,F,D,P),this.onBatch(t),B},batchTri:function(t,i,n,r,o,a,h,d,f,p,T,b,S,A,P,O,L){void 0===L&&(L=this.currentUnit);var D=!1;return this.shouldFlush(3)&&(this.flush(),D=!0,L=this.setTexture2D(O)),this.batchVert(i,n,d,f,L,P,b),this.batchVert(r,o,d,T,L,P,S),this.batchVert(a,h,p,T,L,P,A),this.onBatch(t),D},drawFillRect:function(t,i,n,r,o,a,h,d){void 0===h&&(h=this.renderer.whiteTexture.glTexture),void 0===d&&(d=!0),t=Math.floor(t),i=Math.floor(i);var f=Math.floor(t+n),p=Math.floor(i+r),T=this.setTexture2D(h),S=b.getTintAppendFloatAlphaAndSwap(o,a),A=0,P=1;d&&(A=1,P=0),this.batchQuad(null,t,i,t,p,f,p,f,i,0,A,1,P,S,S,S,S,0,h,T)},setTexture2D:function(t){return void 0===t&&(t=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(t),this.currentUnit},bindTexture:function(t,i){void 0===i&&(i=0);var n=this.gl;return n.activeTexture(n.TEXTURE0+i),n.bindTexture(n.TEXTURE_2D,t),this},bindRenderTarget:function(t,i){return this.bindTexture(t.texture,i)},setTime:function(t){return this.set1f(t,this.game.loop.getDuration()),this},set1f:function(t,i,n){return void 0===n&&(n=this.currentShader),n.set1f(t,i),this},set2f:function(t,i,n,r){return void 0===r&&(r=this.currentShader),r.set2f(t,i,n),this},set3f:function(t,i,n,r,o){return void 0===o&&(o=this.currentShader),o.set3f(t,i,n,r),this},set4f:function(t,i,n,r,o,a){return void 0===a&&(a=this.currentShader),a.set4f(t,i,n,r,o),this},set1fv:function(t,i,n){return void 0===n&&(n=this.currentShader),n.set1fv(t,i),this},set2fv:function(t,i,n){return void 0===n&&(n=this.currentShader),n.set2fv(t,i),this},set3fv:function(t,i,n){return void 0===n&&(n=this.currentShader),n.set3fv(t,i),this},set4fv:function(t,i,n){return void 0===n&&(n=this.currentShader),n.set4fv(t,i),this},set1iv:function(t,i,n){return void 0===n&&(n=this.currentShader),n.set1iv(t,i),this},set2iv:function(t,i,n){return void 0===n&&(n=this.currentShader),n.set2iv(t,i),this},set3iv:function(t,i,n){return void 0===n&&(n=this.currentShader),n.set3iv(t,i),this},set4iv:function(t,i,n){return void 0===n&&(n=this.currentShader),n.set4iv(t,i),this},set1i:function(t,i,n){return void 0===n&&(n=this.currentShader),n.set1i(t,i),this},set2i:function(t,i,n,r){return void 0===r&&(r=this.currentShader),r.set2i(t,i,n),this},set3i:function(t,i,n,r,o){return void 0===o&&(o=this.currentShader),o.set3i(t,i,n,r),this},set4i:function(t,i,n,r,o,a){return void 0===a&&(a=this.currentShader),a.set4i(t,i,n,r,o),this},setMatrix2fv:function(t,i,n,r){return void 0===r&&(r=this.currentShader),r.setMatrix2fv(t,i,n),this},setMatrix3fv:function(t,i,n,r){return void 0===r&&(r=this.currentShader),r.setMatrix3fv(t,i,n),this},setMatrix4fv:function(t,i,n,r){return void 0===r&&(r=this.currentShader),r.setMatrix4fv(t,i,n),this},destroy:function(){var t;this.emit(h.DESTROY,this);var i=this.shaders;for(t=0;t<i.length;t++)i[t].destroy();var n=this.renderTargets;for(t=0;t<n.length;t++)n[t].destroy();this.gl.deleteBuffer(this.vertexBuffer);var r=this.renderer;return r.off(p.RESIZE,this.resize,this),r.off(p.PRE_RENDER,this.onPreRender,this),r.off(p.RENDER,this.onRender,this),r.off(p.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});t.exports=A},function(t,i,n){function earcut(t,i,n){n=n||2;var r,o,a,h,d,f,p,T=i&&i.length,b=T?i[0]*n:t.length,S=linkedList(t,0,b,n,!0),A=[];if(!S||S.next===S.prev)return A;if(T&&(S=function eliminateHoles(t,i,n,r){var o,a,h,d=[];for(o=0,a=i.length;o<a;o++)(h=linkedList(t,i[o]*r,o<a-1?i[o+1]*r:t.length,r,!1))===h.next&&(h.steiner=!0),d.push(getLeftmost(h));for(d.sort(compareX),o=0;o<d.length;o++)eliminateHole(d[o],n),n=filterPoints(n,n.next);return n}(t,i,S,n)),t.length>80*n){r=a=t[0],o=h=t[1];for(var P=n;P<b;P+=n)(d=t[P])<r&&(r=d),(f=t[P+1])<o&&(o=f),d>a&&(a=d),f>h&&(h=f);p=0!==(p=Math.max(a-r,h-o))?1/p:0}return earcutLinked(S,A,n,r,o,p),A}function linkedList(t,i,n,r,o){var a,h;if(o===signedArea(t,i,n,r)>0)for(a=i;a<n;a+=r)h=insertNode(a,t[a],t[a+1],h);else for(a=n-r;a>=i;a-=r)h=insertNode(a,t[a],t[a+1],h);return h&&equals(h,h.next)&&(removeNode(h),h=h.next),h}function filterPoints(t,i){if(!t)return t;i||(i=t);var n,r=t;do{if(n=!1,r.steiner||!equals(r,r.next)&&0!==area(r.prev,r,r.next))r=r.next;else{if(removeNode(r),(r=i=r.prev)===r.next)break;n=!0}}while(n||r!==i);return i}function earcutLinked(t,i,n,r,o,a,h){if(t){!h&&a&&function indexCurve(t,i,n,r){var o=t;do{null===o.z&&(o.z=zOrder(o.x,o.y,i,n,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==t);o.prevZ.nextZ=null,o.prevZ=null,function sortLinked(t){var i,n,r,o,a,h,d,f,p=1;do{for(n=t,t=null,a=null,h=0;n;){for(h++,r=n,d=0,i=0;i<p&&(d++,r=r.nextZ);i++);for(f=p;d>0||f>0&&r;)0!==d&&(0===f||!r||n.z<=r.z)?(o=n,n=n.nextZ,d--):(o=r,r=r.nextZ,f--),a?a.nextZ=o:t=o,o.prevZ=a,a=o;n=r}a.nextZ=null,p*=2}while(h>1);return t}(o)}(t,r,o,a);for(var d,f,p=t;t.prev!==t.next;)if(d=t.prev,f=t.next,a?isEarHashed(t,r,o,a):isEar(t))i.push(d.i/n),i.push(t.i/n),i.push(f.i/n),removeNode(t),t=f.next,p=f.next;else if((t=f)===p){h?1===h?earcutLinked(t=cureLocalIntersections(filterPoints(t),i,n),i,n,r,o,a,2):2===h&&splitEarcut(t,i,n,r,o,a):earcutLinked(filterPoints(t),i,n,r,o,a,1);break}}}function isEar(t){var i=t.prev,n=t,r=t.next;if(area(i,n,r)>=0)return!1;for(var o=t.next.next;o!==t.prev;){if(pointInTriangle(i.x,i.y,n.x,n.y,r.x,r.y,o.x,o.y)&&area(o.prev,o,o.next)>=0)return!1;o=o.next}return!0}function isEarHashed(t,i,n,r){var o=t.prev,a=t,h=t.next;if(area(o,a,h)>=0)return!1;for(var d=o.x<a.x?o.x<h.x?o.x:h.x:a.x<h.x?a.x:h.x,f=o.y<a.y?o.y<h.y?o.y:h.y:a.y<h.y?a.y:h.y,p=o.x>a.x?o.x>h.x?o.x:h.x:a.x>h.x?a.x:h.x,T=o.y>a.y?o.y>h.y?o.y:h.y:a.y>h.y?a.y:h.y,b=zOrder(d,f,i,n,r),S=zOrder(p,T,i,n,r),A=t.prevZ,P=t.nextZ;A&&A.z>=b&&P&&P.z<=S;){if(A!==t.prev&&A!==t.next&&pointInTriangle(o.x,o.y,a.x,a.y,h.x,h.y,A.x,A.y)&&area(A.prev,A,A.next)>=0)return!1;if(A=A.prevZ,P!==t.prev&&P!==t.next&&pointInTriangle(o.x,o.y,a.x,a.y,h.x,h.y,P.x,P.y)&&area(P.prev,P,P.next)>=0)return!1;P=P.nextZ}for(;A&&A.z>=b;){if(A!==t.prev&&A!==t.next&&pointInTriangle(o.x,o.y,a.x,a.y,h.x,h.y,A.x,A.y)&&area(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;P&&P.z<=S;){if(P!==t.prev&&P!==t.next&&pointInTriangle(o.x,o.y,a.x,a.y,h.x,h.y,P.x,P.y)&&area(P.prev,P,P.next)>=0)return!1;P=P.nextZ}return!0}function cureLocalIntersections(t,i,n){var r=t;do{var o=r.prev,a=r.next.next;!equals(o,a)&&intersects(o,r,r.next,a)&&locallyInside(o,a)&&locallyInside(a,o)&&(i.push(o.i/n),i.push(r.i/n),i.push(a.i/n),removeNode(r),removeNode(r.next),r=t=a),r=r.next}while(r!==t);return filterPoints(r)}function splitEarcut(t,i,n,r,o,a){var h=t;do{for(var d=h.next.next;d!==h.prev;){if(h.i!==d.i&&isValidDiagonal(h,d)){var f=splitPolygon(h,d);return h=filterPoints(h,h.next),f=filterPoints(f,f.next),earcutLinked(h,i,n,r,o,a),void earcutLinked(f,i,n,r,o,a)}d=d.next}h=h.next}while(h!==t)}function compareX(t,i){return t.x-i.x}function eliminateHole(t,i){if(i=function findHoleBridge(t,i){var n,r=i,o=t.x,a=t.y,h=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var d=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(d<=o&&d>h){if(h=d,d===o){if(a===r.y)return r;if(a===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==i);if(!n)return null;if(o===h)return n;var f,p=n,T=n.x,b=n.y,S=1/0;r=n;do{o>=r.x&&r.x>=T&&o!==r.x&&pointInTriangle(a<b?o:h,a,T,b,a<b?h:o,a,r.x,r.y)&&(f=Math.abs(a-r.y)/(o-r.x),locallyInside(r,t)&&(f<S||f===S&&(r.x>n.x||r.x===n.x&&sectorContainsSector(n,r)))&&(n=r,S=f)),r=r.next}while(r!==p);return n}(t,i),i){var n=splitPolygon(i,t);filterPoints(i,i.next),filterPoints(n,n.next)}}function sectorContainsSector(t,i){return area(t.prev,t,i.prev)<0&&area(i.next,t,t.next)<0}function zOrder(t,i,n,r,o){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*o)|t<<8))|t<<4))|t<<2))|t<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-r)*o)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function getLeftmost(t){var i=t,n=t;do{(i.x<n.x||i.x===n.x&&i.y<n.y)&&(n=i),i=i.next}while(i!==t);return n}function pointInTriangle(t,i,n,r,o,a,h,d){return(o-h)*(i-d)-(t-h)*(a-d)>=0&&(t-h)*(r-d)-(n-h)*(i-d)>=0&&(n-h)*(a-d)-(o-h)*(r-d)>=0}function isValidDiagonal(t,i){return t.next.i!==i.i&&t.prev.i!==i.i&&!function intersectsPolygon(t,i){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==i.i&&n.next.i!==i.i&&intersects(n,n.next,t,i))return!0;n=n.next}while(n!==t);return!1}(t,i)&&(locallyInside(t,i)&&locallyInside(i,t)&&function middleInside(t,i){var n=t,r=!1,o=(t.x+i.x)/2,a=(t.y+i.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&o<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,i)&&(area(t.prev,t,i.prev)||area(t,i.prev,i))||equals(t,i)&&area(t.prev,t,t.next)>0&&area(i.prev,i,i.next)>0)}function area(t,i,n){return(i.y-t.y)*(n.x-i.x)-(i.x-t.x)*(n.y-i.y)}function equals(t,i){return t.x===i.x&&t.y===i.y}function intersects(t,i,n,r){var o=sign(area(t,i,n)),a=sign(area(t,i,r)),h=sign(area(n,r,t)),d=sign(area(n,r,i));return o!==a&&h!==d||!(0!==o||!onSegment(t,n,i))||!(0!==a||!onSegment(t,r,i))||!(0!==h||!onSegment(n,t,r))||!(0!==d||!onSegment(n,i,r))}function onSegment(t,i,n){return i.x<=Math.max(t.x,n.x)&&i.x>=Math.min(t.x,n.x)&&i.y<=Math.max(t.y,n.y)&&i.y>=Math.min(t.y,n.y)}function sign(t){return t>0?1:t<0?-1:0}function locallyInside(t,i){return area(t.prev,t,t.next)<0?area(t,i,t.next)>=0&&area(t,t.prev,i)>=0:area(t,i,t.prev)<0||area(t,t.next,i)<0}function splitPolygon(t,i){var n=new Node2(t.i,t.x,t.y),r=new Node2(i.i,i.x,i.y),o=t.next,a=i.prev;return t.next=i,i.prev=t,n.next=o,o.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function insertNode(t,i,n,r){var o=new Node2(t,i,n);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o}function removeNode(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Node2(t,i,n){this.i=t,this.x=i,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(t,i,n,r){for(var o=0,a=i,h=n-r;a<n;a+=r)o+=(t[h]-t[a])*(t[a+1]+t[h+1]),h=a;return o}earcut.deviation=function(t,i,n,r){var o=i&&i.length,a=o?i[0]*n:t.length,h=Math.abs(signedArea(t,0,a,n));if(o)for(var d=0,f=i.length;d<f;d++){var p=i[d]*n,T=d<f-1?i[d+1]*n:t.length;h-=Math.abs(signedArea(t,p,T,n))}var b=0;for(d=0;d<r.length;d+=3){var S=r[d]*n,A=r[d+1]*n,P=r[d+2]*n;b+=Math.abs((t[S]-t[P])*(t[A+1]-t[S+1])-(t[S]-t[A])*(t[P+1]-t[S+1]))}return 0===h&&0===b?0:Math.abs((b-h)/h)},earcut.flatten=function(t){for(var i=t[0][0].length,n={vertices:[],holes:[],dimensions:i},r=0,o=0;o<t.length;o++){for(var a=0;a<t[o].length;a++)for(var h=0;h<i;h++)n.vertices.push(t[o][a][h]);o>0&&(r+=t[o-1].length,n.holes.push(r))}return n},t.exports=earcut},function(t,i){t.exports=function(t,i,n,r){var o=n||i.strokeColor,a=r||i.strokeAlpha,h=(16711680&o)>>>16,d=(65280&o)>>>8,f=255&o;t.strokeStyle="rgba("+h+","+d+","+f+","+a+")",t.lineWidth=i.lineWidth}},function(t,i,n){var r=n(0),o=n(21),a=n(23),h=n(8),d=n(2),f=n(6),p=n(7),T=new r({Extends:a,initialize:function JSONFile2(t,i,n,r,h){var T="json";if(p(i)){var b=i;i=d(b,"key"),n=d(b,"url"),r=d(b,"xhrSettings"),T=d(b,"extension",T),h=d(b,"dataKey",h)}var S={type:"json",cache:t.cacheManager.json,extension:T,responseType:"text",key:i,url:n,xhrSettings:r,config:h};a.call(this,t,S),p(n)&&(this.data=h?f(n,h):n,this.state=o.FILE_POPULATED)},onProcess:function(){if(this.state!==o.FILE_POPULATED){this.state=o.FILE_PROCESSING;try{var t=JSON.parse(this.xhrLoader.responseText)}catch(n){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),n}var i=this.config;this.data="string"==typeof i?f(t,i,t):t}this.onProcessComplete()}});h.register("json",(function(t,i,n,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new T(this,t[o]));else this.addFile(new T(this,t,i,r,n));return this})),t.exports=T},function(t,i){t.exports={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14}},function(t,i,n){var r=n(158),o=n(26);t.exports=function(t,i,n,a,h){for(var d=null,f=null,p=null,T=null,b=o(t,i,n,a,null,h),S=0;S<b.length;S++){var A=b[S];A&&(A.collides?(d=r(A.x,A.y-1,!0,h),f=r(A.x,A.y+1,!0,h),p=r(A.x-1,A.y,!0,h),T=r(A.x+1,A.y,!0,h),A.faceTop=!d||!d.collides,A.faceBottom=!f||!f.collides,A.faceLeft=!p||!p.collides,A.faceRight=!T||!T.collides):A.resetFaces())}}},function(t,i,n){var r={};t.exports=r;var o=n(83),a=n(32);r.create=function(t,i){for(var n=[],r=0;r<t.length;r++){var o=t[r],a={x:o.x,y:o.y,index:r,body:i,isInternal:!1,contact:null,offset:null};a.contact={vertex:a,normalImpulse:0,tangentImpulse:0},n.push(a)}return n},r.fromPath=function(t,i){var n=[];return t.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/gi,(function(t,i,r){n.push({x:parseFloat(i),y:parseFloat(r)})})),r.create(n,i)},r.centre=function(t){for(var i,n,a,h=r.area(t,!0),d={x:0,y:0},f=0;f<t.length;f++)a=(f+1)%t.length,i=o.cross(t[f],t[a]),n=o.mult(o.add(t[f],t[a]),i),d=o.add(d,n);return o.div(d,6*h)},r.mean=function(t){for(var i={x:0,y:0},n=0;n<t.length;n++)i.x+=t[n].x,i.y+=t[n].y;return o.div(i,t.length)},r.area=function(t,i){for(var n=0,r=t.length-1,o=0;o<t.length;o++)n+=(t[r].x-t[o].x)*(t[r].y+t[o].y),r=o;return i?n/2:Math.abs(n)/2},r.inertia=function(t,i){for(var n,r,a=0,h=0,d=t,f=0;f<d.length;f++)r=(f+1)%d.length,a+=(n=Math.abs(o.cross(d[r],d[f])))*(o.dot(d[r],d[r])+o.dot(d[r],d[f])+o.dot(d[f],d[f])),h+=n;return i/6*(a/h)},r.translate=function(t,i,n){var r;if(n)for(r=0;r<t.length;r++)t[r].x+=i.x*n,t[r].y+=i.y*n;else for(r=0;r<t.length;r++)t[r].x+=i.x,t[r].y+=i.y;return t},r.rotate=function(t,i,n){if(0!==i){for(var r=Math.cos(i),o=Math.sin(i),a=0;a<t.length;a++){var h=t[a],d=h.x-n.x,f=h.y-n.y;h.x=n.x+(d*r-f*o),h.y=n.y+(d*o+f*r)}return t}},r.contains=function(t,i){for(var n=0;n<t.length;n++){var r=t[n],o=t[(n+1)%t.length];if((i.x-r.x)*(o.y-r.y)+(i.y-r.y)*(r.x-o.x)>0)return!1}return!0},r.scale=function(t,i,n,a){if(1===i&&1===n)return t;var h,d;a=a||r.centre(t);for(var f=0;f<t.length;f++)h=t[f],d=o.sub(h,a),t[f].x=a.x+d.x*i,t[f].y=a.y+d.y*n;return t},r.chamfer=function(t,i,n,r,h){i="number"==typeof i?[i]:i||[8],n=void 0!==n?n:-1,r=r||2,h=h||14;for(var d=[],f=0;f<t.length;f++){var p=t[f-1>=0?f-1:t.length-1],T=t[f],b=t[(f+1)%t.length],S=i[f<i.length?f:i.length-1];if(0!==S){var A=o.normalise({x:T.y-p.y,y:p.x-T.x}),P=o.normalise({x:b.y-T.y,y:T.x-b.x}),O=Math.sqrt(2*Math.pow(S,2)),L=o.mult(a.clone(A),S),D=o.normalise(o.mult(o.add(A,P),.5)),I=o.sub(T,o.mult(D,O)),F=n;-1===n&&(F=1.75*Math.pow(S,.32)),(F=a.clamp(F,r,h))%2==1&&(F+=1);for(var B=Math.acos(o.dot(A,P))/F,N=0;N<F;N++)d.push(o.add(o.rotate(L,B*N),I))}else d.push(T)}return d},r.clockwiseSort=function(t){var i=r.mean(t);return t.sort((function(t,n){return o.angle(i,t)-o.angle(i,n)})),t},r.isConvex=function(t){var i,n,r,o,a=0,h=t.length;if(h<3)return null;for(i=0;i<h;i++)if(r=(i+2)%h,o=(t[n=(i+1)%h].x-t[i].x)*(t[r].y-t[n].y),(o-=(t[n].y-t[i].y)*(t[r].x-t[n].x))<0?a|=1:o>0&&(a|=2),3===a)return!1;return 0!==a||null},r.hull=function(t){var i,n,r=[],a=[];for((t=t.slice(0)).sort((function(t,i){var n=t.x-i.x;return 0!==n?n:t.y-i.y})),n=0;n<t.length;n+=1){for(i=t[n];a.length>=2&&o.cross3(a[a.length-2],a[a.length-1],i)<=0;)a.pop();a.push(i)}for(n=t.length-1;n>=0;n-=1){for(i=t[n];r.length>=2&&o.cross3(r[r.length-2],r[r.length-1],i)<=0;)r.pop();r.push(i)}return r.pop(),a.pop(),r.concat(a)}},function(t,i,n){var r=n(0),o=n(66),a=n(300),h=n(301),d=n(56),f=n(170),p=new r({initialize:function Circle2(t,i,n){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),this.type=d.CIRCLE,this.x=t,this.y=i,this._radius=n,this._diameter=2*n},contains:function(t,i){return o(this,t,i)},getPoint:function(t,i){return a(this,t,i)},getPoints:function(t,i,n){return h(this,t,i,n)},getRandomPoint:function(t){return f(this,t)},setTo:function(t,i,n){return this.x=t,this.y=i,this._radius=n,this._diameter=2*n,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(t){this._radius=t,this._diameter=2*t}},diameter:{get:function(){return this._diameter},set:function(t){this._diameter=t,this._radius=.5*t}},left:{get:function(){return this.x-this._radius},set:function(t){this.x=t+this._radius}},right:{get:function(){return this.x+this._radius},set:function(t){this.x=t-this._radius}},top:{get:function(){return this.y-this._radius},set:function(t){this.y=t+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(t){this.y=t-this._radius}}});t.exports=p},function(t,i){t.exports=function(t,i,n){return t.radius>0&&i>=t.left&&i<=t.right&&n>=t.top&&n<=t.bottom&&(t.x-i)*(t.x-i)+(t.y-n)*(t.y-n)<=t.radius*t.radius}},function(t,i){t.exports=function(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))}},function(t,i){t.exports=function(t,i,n){var r=n-i;return i+((t-i)%r+r)%r}},function(t,i,n){var r=n(0),o=n(39),a=1e-6,h=new r({initialize:function Matrix42(t){this.val=new Float32Array(16),t?this.copy(t):this.identity()},clone:function(){return new h(this)},set:function(t){return this.copy(t)},setValues:function(t,i,n,r,o,a,h,d,f,p,T,b,S,A,P,O){var L=this.val;return L[0]=t,L[1]=i,L[2]=n,L[3]=r,L[4]=o,L[5]=a,L[6]=h,L[7]=d,L[8]=f,L[9]=p,L[10]=T,L[11]=b,L[12]=S,L[13]=A,L[14]=P,L[15]=O,this},copy:function(t){var i=t.val;return this.setValues(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9],i[10],i[11],i[12],i[13],i[14],i[15])},fromArray:function(t){return this.setValues(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(t,i,n){var r=d.fromQuat(n).val,o=i.x,a=i.y,h=i.z;return this.setValues(r[0]*o,r[1]*o,r[2]*o,0,r[4]*a,r[5]*a,r[6]*a,0,r[8]*h,r[9]*h,r[10]*h,0,t.x,t.y,t.z,1)},xyz:function(t,i,n){this.identity();var r=this.val;return r[12]=t,r[13]=i,r[14]=n,this},scaling:function(t,i,n){this.zero();var r=this.val;return r[0]=t,r[5]=i,r[10]=n,r[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var t=this.val,i=t[1],n=t[2],r=t[3],o=t[6],a=t[7],h=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=i,t[6]=t[9],t[7]=t[13],t[8]=n,t[9]=o,t[11]=t[14],t[12]=r,t[13]=a,t[14]=h,this},getInverse:function(t){return this.copy(t),this.invert()},invert:function(){var t=this.val,i=t[0],n=t[1],r=t[2],o=t[3],a=t[4],h=t[5],d=t[6],f=t[7],p=t[8],T=t[9],b=t[10],S=t[11],A=t[12],P=t[13],O=t[14],L=t[15],D=i*h-n*a,I=i*d-r*a,F=i*f-o*a,B=n*d-r*h,N=n*f-o*h,Y=r*f-o*d,X=p*P-T*A,G=p*O-b*A,U=p*L-S*A,V=T*O-b*P,z=T*L-S*P,W=b*L-S*O,H=D*W-I*z+F*V+B*U-N*G+Y*X;return H?(H=1/H,this.setValues((h*W-d*z+f*V)*H,(r*z-n*W-o*V)*H,(P*Y-O*N+L*B)*H,(b*N-T*Y-S*B)*H,(d*U-a*W-f*G)*H,(i*W-r*U+o*G)*H,(O*F-A*Y-L*I)*H,(p*Y-b*F+S*I)*H,(a*z-h*U+f*X)*H,(n*U-i*z-o*X)*H,(A*N-P*F+L*D)*H,(T*F-p*N-S*D)*H,(h*G-a*V-d*X)*H,(i*V-n*G+r*X)*H,(P*I-A*B-O*D)*H,(p*B-T*I+b*D)*H)):this},adjoint:function(){var t=this.val,i=t[0],n=t[1],r=t[2],o=t[3],a=t[4],h=t[5],d=t[6],f=t[7],p=t[8],T=t[9],b=t[10],S=t[11],A=t[12],P=t[13],O=t[14],L=t[15];return this.setValues(h*(b*L-S*O)-T*(d*L-f*O)+P*(d*S-f*b),-(n*(b*L-S*O)-T*(r*L-o*O)+P*(r*S-o*b)),n*(d*L-f*O)-h*(r*L-o*O)+P*(r*f-o*d),-(n*(d*S-f*b)-h*(r*S-o*b)+T*(r*f-o*d)),-(a*(b*L-S*O)-p*(d*L-f*O)+A*(d*S-f*b)),i*(b*L-S*O)-p*(r*L-o*O)+A*(r*S-o*b),-(i*(d*L-f*O)-a*(r*L-o*O)+A*(r*f-o*d)),i*(d*S-f*b)-a*(r*S-o*b)+p*(r*f-o*d),a*(T*L-S*P)-p*(h*L-f*P)+A*(h*S-f*T),-(i*(T*L-S*P)-p*(n*L-o*P)+A*(n*S-o*T)),i*(h*L-f*P)-a*(n*L-o*P)+A*(n*f-o*h),-(i*(h*S-f*T)-a*(n*S-o*T)+p*(n*f-o*h)),-(a*(T*O-b*P)-p*(h*O-d*P)+A*(h*b-d*T)),i*(T*O-b*P)-p*(n*O-r*P)+A*(n*b-r*T),-(i*(h*O-d*P)-a*(n*O-r*P)+A*(n*d-r*h)),i*(h*b-d*T)-a*(n*b-r*T)+p*(n*d-r*h))},determinant:function(){var t=this.val,i=t[0],n=t[1],r=t[2],o=t[3],a=t[4],h=t[5],d=t[6],f=t[7],p=t[8],T=t[9],b=t[10],S=t[11],A=t[12],P=t[13],O=t[14],L=t[15];return(i*h-n*a)*(b*L-S*O)-(i*d-r*a)*(T*L-S*P)+(i*f-o*a)*(T*O-b*P)+(n*d-r*h)*(p*L-S*A)-(n*f-o*h)*(p*O-b*A)+(r*f-o*d)*(p*P-T*A)},multiply:function(t){var i=this.val,n=i[0],r=i[1],o=i[2],a=i[3],h=i[4],d=i[5],f=i[6],p=i[7],T=i[8],b=i[9],S=i[10],A=i[11],P=i[12],O=i[13],L=i[14],D=i[15],I=t.val,F=I[0],B=I[1],N=I[2],Y=I[3];return i[0]=F*n+B*h+N*T+Y*P,i[1]=F*r+B*d+N*b+Y*O,i[2]=F*o+B*f+N*S+Y*L,i[3]=F*a+B*p+N*A+Y*D,F=I[4],B=I[5],N=I[6],Y=I[7],i[4]=F*n+B*h+N*T+Y*P,i[5]=F*r+B*d+N*b+Y*O,i[6]=F*o+B*f+N*S+Y*L,i[7]=F*a+B*p+N*A+Y*D,F=I[8],B=I[9],N=I[10],Y=I[11],i[8]=F*n+B*h+N*T+Y*P,i[9]=F*r+B*d+N*b+Y*O,i[10]=F*o+B*f+N*S+Y*L,i[11]=F*a+B*p+N*A+Y*D,F=I[12],B=I[13],N=I[14],Y=I[15],i[12]=F*n+B*h+N*T+Y*P,i[13]=F*r+B*d+N*b+Y*O,i[14]=F*o+B*f+N*S+Y*L,i[15]=F*a+B*p+N*A+Y*D,this},multiplyLocal:function(t){var i=this.val,n=t.val;return this.setValues(i[0]*n[0]+i[1]*n[4]+i[2]*n[8]+i[3]*n[12],i[0]*n[1]+i[1]*n[5]+i[2]*n[9]+i[3]*n[13],i[0]*n[2]+i[1]*n[6]+i[2]*n[10]+i[3]*n[14],i[0]*n[3]+i[1]*n[7]+i[2]*n[11]+i[3]*n[15],i[4]*n[0]+i[5]*n[4]+i[6]*n[8]+i[7]*n[12],i[4]*n[1]+i[5]*n[5]+i[6]*n[9]+i[7]*n[13],i[4]*n[2]+i[5]*n[6]+i[6]*n[10]+i[7]*n[14],i[4]*n[3]+i[5]*n[7]+i[6]*n[11]+i[7]*n[15],i[8]*n[0]+i[9]*n[4]+i[10]*n[8]+i[11]*n[12],i[8]*n[1]+i[9]*n[5]+i[10]*n[9]+i[11]*n[13],i[8]*n[2]+i[9]*n[6]+i[10]*n[10]+i[11]*n[14],i[8]*n[3]+i[9]*n[7]+i[10]*n[11]+i[11]*n[15],i[12]*n[0]+i[13]*n[4]+i[14]*n[8]+i[15]*n[12],i[12]*n[1]+i[13]*n[5]+i[14]*n[9]+i[15]*n[13],i[12]*n[2]+i[13]*n[6]+i[14]*n[10]+i[15]*n[14],i[12]*n[3]+i[13]*n[7]+i[14]*n[11]+i[15]*n[15])},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,i){var n=t.val,r=i.val,o=n[0],a=n[4],h=n[8],d=n[12],f=n[1],p=n[5],T=n[9],b=n[13],S=n[2],A=n[6],P=n[10],O=n[14],L=n[3],D=n[7],I=n[11],F=n[15],B=r[0],N=r[4],Y=r[8],X=r[12],G=r[1],U=r[5],V=r[9],z=r[13],W=r[2],H=r[6],q=r[10],Z=r[14],K=r[3],J=r[7],Q=r[11],$=r[15];return this.setValues(o*B+a*G+h*W+d*K,f*B+p*G+T*W+b*K,S*B+A*G+P*W+O*K,L*B+D*G+I*W+F*K,o*N+a*U+h*H+d*J,f*N+p*U+T*H+b*J,S*N+A*U+P*H+O*J,L*N+D*U+I*H+F*J,o*Y+a*V+h*q+d*Q,f*Y+p*V+T*q+b*Q,S*Y+A*V+P*q+O*Q,L*Y+D*V+I*q+F*Q,o*X+a*z+h*Z+d*$,f*X+p*z+T*Z+b*$,S*X+A*z+P*Z+O*$,L*X+D*z+I*Z+F*$)},translate:function(t){return this.translateXYZ(t.x,t.y,t.z)},translateXYZ:function(t,i,n){var r=this.val;return r[12]=r[0]*t+r[4]*i+r[8]*n+r[12],r[13]=r[1]*t+r[5]*i+r[9]*n+r[13],r[14]=r[2]*t+r[6]*i+r[10]*n+r[14],r[15]=r[3]*t+r[7]*i+r[11]*n+r[15],this},scale:function(t){return this.scaleXYZ(t.x,t.y,t.z)},scaleXYZ:function(t,i,n){var r=this.val;return r[0]=r[0]*t,r[1]=r[1]*t,r[2]=r[2]*t,r[3]=r[3]*t,r[4]=r[4]*i,r[5]=r[5]*i,r[6]=r[6]*i,r[7]=r[7]*i,r[8]=r[8]*n,r[9]=r[9]*n,r[10]=r[10]*n,r[11]=r[11]*n,this},makeRotationAxis:function(t,i){var n=Math.cos(i),r=Math.sin(i),o=1-n,a=t.x,h=t.y,d=t.z,f=o*a,p=o*h;return this.setValues(f*a+n,f*h-r*d,f*d+r*h,0,f*h+r*d,p*h+n,p*d-r*a,0,f*d-r*h,p*d+r*a,o*d*d+n,0,0,0,0,1)},rotate:function(t,i){var n=this.val,r=i.x,o=i.y,h=i.z,d=Math.sqrt(r*r+o*o+h*h);if(Math.abs(d)<a)return this;r*=d=1/d,o*=d,h*=d;var f=Math.sin(t),p=Math.cos(t),T=1-p,b=n[0],S=n[1],A=n[2],P=n[3],O=n[4],L=n[5],D=n[6],I=n[7],F=n[8],B=n[9],N=n[10],Y=n[11],X=n[12],G=n[13],U=n[14],V=n[15],z=r*r*T+p,W=o*r*T+h*f,H=h*r*T-o*f,q=r*o*T-h*f,Z=o*o*T+p,K=h*o*T+r*f,J=r*h*T+o*f,Q=o*h*T-r*f,$=h*h*T+p;return this.setValues(b*z+O*W+F*H,S*z+L*W+B*H,A*z+D*W+N*H,P*z+I*W+Y*H,b*q+O*Z+F*K,S*q+L*Z+B*K,A*q+D*Z+N*K,P*q+I*Z+Y*K,b*J+O*Q+F*$,S*J+L*Q+B*$,A*J+D*Q+N*$,P*J+I*Q+Y*$,X,G,U,V)},rotateX:function(t){var i=this.val,n=Math.sin(t),r=Math.cos(t),o=i[4],a=i[5],h=i[6],d=i[7],f=i[8],p=i[9],T=i[10],b=i[11];return i[4]=o*r+f*n,i[5]=a*r+p*n,i[6]=h*r+T*n,i[7]=d*r+b*n,i[8]=f*r-o*n,i[9]=p*r-a*n,i[10]=T*r-h*n,i[11]=b*r-d*n,this},rotateY:function(t){var i=this.val,n=Math.sin(t),r=Math.cos(t),o=i[0],a=i[1],h=i[2],d=i[3],f=i[8],p=i[9],T=i[10],b=i[11];return i[0]=o*r-f*n,i[1]=a*r-p*n,i[2]=h*r-T*n,i[3]=d*r-b*n,i[8]=o*n+f*r,i[9]=a*n+p*r,i[10]=h*n+T*r,i[11]=d*n+b*r,this},rotateZ:function(t){var i=this.val,n=Math.sin(t),r=Math.cos(t),o=i[0],a=i[1],h=i[2],d=i[3],f=i[4],p=i[5],T=i[6],b=i[7];return i[0]=o*r+f*n,i[1]=a*r+p*n,i[2]=h*r+T*n,i[3]=d*r+b*n,i[4]=f*r-o*n,i[5]=p*r-a*n,i[6]=T*r-h*n,i[7]=b*r-d*n,this},fromRotationTranslation:function(t,i){var n=t.x,r=t.y,o=t.z,a=t.w,h=n+n,d=r+r,f=o+o,p=n*h,T=n*d,b=n*f,S=r*d,A=r*f,P=o*f,O=a*h,L=a*d,D=a*f;return this.setValues(1-(S+P),T+D,b-L,0,T-D,1-(p+P),A+O,0,b+L,A-O,1-(p+S),0,i.x,i.y,i.z,1)},fromQuat:function(t){var i=t.x,n=t.y,r=t.z,o=t.w,a=i+i,h=n+n,d=r+r,f=i*a,p=i*h,T=i*d,b=n*h,S=n*d,A=r*d,P=o*a,O=o*h,L=o*d;return this.setValues(1-(b+A),p+L,T-O,0,p-L,1-(f+A),S+P,0,T+O,S-P,1-(f+b),0,0,0,0,1)},frustum:function(t,i,n,r,o,a){var h=1/(i-t),d=1/(r-n),f=1/(o-a);return this.setValues(2*o*h,0,0,0,0,2*o*d,0,0,(i+t)*h,(r+n)*d,(a+o)*f,-1,0,0,a*o*2*f,0)},perspective:function(t,i,n,r){var o=1/Math.tan(t/2),a=1/(n-r);return this.setValues(o/i,0,0,0,0,o,0,0,0,0,(r+n)*a,-1,0,0,2*r*n*a,0)},perspectiveLH:function(t,i,n,r){return this.setValues(2*n/t,0,0,0,0,2*n/i,0,0,0,0,-r/(n-r),1,0,0,n*r/(n-r),0)},ortho:function(t,i,n,r,o,a){var h=t-i,d=n-r,f=o-a;return h=0===h?h:1/h,d=0===d?d:1/d,f=0===f?f:1/f,this.setValues(-2*h,0,0,0,0,-2*d,0,0,0,0,2*f,0,(t+i)*h,(r+n)*d,(a+o)*f,1)},lookAtRH:function(t,i,n){var r=this.val;return b.subVectors(t,i),0===b.getLengthSquared()&&(b.z=1),b.normalize(),p.crossVectors(n,b),0===p.getLengthSquared()&&(1===Math.abs(n.z)?b.x+=1e-4:b.z+=1e-4,b.normalize(),p.crossVectors(n,b)),p.normalize(),T.crossVectors(b,p),r[0]=p.x,r[1]=p.y,r[2]=p.z,r[4]=T.x,r[5]=T.y,r[6]=T.z,r[8]=b.x,r[9]=b.y,r[10]=b.z,this},lookAt:function(t,i,n){var r=t.x,o=t.y,h=t.z,d=n.x,f=n.y,p=n.z,T=i.x,b=i.y,S=i.z;if(Math.abs(r-T)<a&&Math.abs(o-b)<a&&Math.abs(h-S)<a)return this.identity();var A=r-T,P=o-b,O=h-S,L=1/Math.sqrt(A*A+P*P+O*O),D=f*(O*=L)-p*(P*=L),I=p*(A*=L)-d*O,F=d*P-f*A;(L=Math.sqrt(D*D+I*I+F*F))?(D*=L=1/L,I*=L,F*=L):(D=0,I=0,F=0);var B=P*F-O*I,N=O*D-A*F,Y=A*I-P*D;return(L=Math.sqrt(B*B+N*N+Y*Y))?(B*=L=1/L,N*=L,Y*=L):(B=0,N=0,Y=0),this.setValues(D,B,A,0,I,N,P,0,F,Y,O,0,-(D*r+I*o+F*h),-(B*r+N*o+Y*h),-(A*r+P*o+O*h),1)},yawPitchRoll:function(t,i,n){this.zero(),d.zero(),f.zero();var r=this.val,o=d.val,a=f.val,h=Math.sin(n),p=Math.cos(n);return r[10]=1,r[15]=1,r[0]=p,r[1]=h,r[4]=-h,r[5]=p,h=Math.sin(i),p=Math.cos(i),o[0]=1,o[15]=1,o[5]=p,o[10]=p,o[9]=-h,o[6]=h,h=Math.sin(t),p=Math.cos(t),a[5]=1,a[15]=1,a[0]=p,a[2]=-h,a[8]=h,a[10]=p,this.multiplyLocal(d),this.multiplyLocal(f),this},setWorldMatrix:function(t,i,n,r,o){return this.yawPitchRoll(t.y,t.x,t.z),d.scaling(n.x,n.y,n.z),f.xyz(i.x,i.y,i.z),this.multiplyLocal(d),this.multiplyLocal(f),r&&this.multiplyLocal(r),o&&this.multiplyLocal(o),this},multiplyToMat4:function(t,i){var n=this.val,r=t.val,o=n[0],a=n[1],h=n[2],d=n[3],f=n[4],p=n[5],T=n[6],b=n[7],S=n[8],A=n[9],P=n[10],O=n[11],L=n[12],D=n[13],I=n[14],F=n[15],B=r[0],N=r[1],Y=r[2],X=r[3],G=r[4],U=r[5],V=r[6],z=r[7],W=r[8],H=r[9],q=r[10],Z=r[11],K=r[12],J=r[13],Q=r[14],$=r[15];return i.setValues(B*o+N*f+Y*S+X*L,N*a+N*p+Y*A+X*D,Y*h+N*T+Y*P+X*I,X*d+N*b+Y*O+X*F,G*o+U*f+V*S+z*L,G*a+U*p+V*A+z*D,G*h+U*T+V*P+z*I,G*d+U*b+V*O+z*F,W*o+H*f+q*S+Z*L,W*a+H*p+q*A+Z*D,W*h+H*T+q*P+Z*I,W*d+H*b+q*O+Z*F,K*o+J*f+Q*S+$*L,K*a+J*p+Q*A+$*D,K*h+J*T+Q*P+$*I,K*d+J*b+Q*O+$*F)},fromRotationXYTranslation:function(t,i,n){var r=i.x,o=i.y,a=i.z,h=Math.sin(t.x),d=Math.cos(t.x),f=Math.sin(t.y),p=Math.cos(t.y),T=r,b=o,S=a,A=-h,P=0-A*f,O=0-d*f,L=A*p,D=d*p;return n||(T=p*r+f*a,b=P*r+d*o+L*a,S=O*r+h*o+D*a),this.setValues(p,P,O,0,0,d,h,0,f,L,D,0,T,b,S,1)},getMaxScaleOnAxis:function(){var t=this.val,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(i,n,r))}}),d=new h,f=new h,p=new o,T=new o,b=new o;t.exports=h},function(t,i,n){t.exports={COMPLETE:n(987),DECODED:n(988),DECODED_ALL:n(989),DESTROY:n(990),DETUNE:n(991),GLOBAL_DETUNE:n(992),GLOBAL_MUTE:n(993),GLOBAL_RATE:n(994),GLOBAL_VOLUME:n(995),LOOP:n(996),LOOPED:n(997),MUTE:n(998),PAN:n(999),PAUSE_ALL:n(1e3),PAUSE:n(1001),PLAY:n(1002),RATE:n(1003),RESUME_ALL:n(1004),RESUME:n(1005),SEEK:n(1006),STOP_ALL:n(1007),STOP:n(1008),UNLOCKED:n(1009),VOLUME:n(1010)}},function(t,i,n){var r=n(0),o=n(21),a=n(23),h=n(8),d=n(2),f=n(7),p=new r({Extends:a,initialize:function ImageFile2(t,i,n,r,o){var h,p="png";if(f(i)){var T=i;i=d(T,"key"),n=d(T,"url"),h=d(T,"normalMap"),r=d(T,"xhrSettings"),p=d(T,"extension",p),o=d(T,"frameConfig")}Array.isArray(n)&&(h=n[1],n=n[0]);var b={type:"image",cache:t.textureManager,extension:p,responseType:"blob",key:i,url:n,xhrSettings:r,config:o};if(a.call(this,t,b),h){var S=new ImageFile2(t,this.key,h,r,o);S.type="normalMap",this.setLink(S),t.addFile(S)}},onProcess:function(){this.state=o.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var t=this;this.data.onload=function(){a.revokeObjectURL(t.data),t.onProcessComplete()},this.data.onerror=function(){a.revokeObjectURL(t.data),t.onProcessError()},a.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var t,i=this.linkFile;i&&i.state===o.FILE_COMPLETE?(t="image"===this.type?this.cache.addImage(this.key,this.data,i.data):this.cache.addImage(i.key,i.data,this.data),this.pendingDestroy(t),i.pendingDestroy(t)):i||(t=this.cache.addImage(this.key,this.data),this.pendingDestroy(t))}});h.register("image",(function(t,i,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new p(this,t[r]));else this.addFile(new p(this,t,i,n));return this})),t.exports=p},function(t,i){t.exports=function(t,i){i?t.setCollision(!0,!0,!0,!0,!1):t.resetCollision(!1)}},function(t,i,n){var r=n(164),o=n(0),a=n(11),h=n(15),d=n(1065),f=new o({Extends:h,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Size,a.TextureCrop,a.Tint,a.Transform,a.Visible,d],initialize:function Sprite2(t,i,n,o,a){h.call(this,t,"Sprite"),this._crop=this.resetCropObject(),this.anims=new r(this),this.setTexture(o,a),this.setPosition(i,n),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(t,i){this.anims.update(t,i)},play:function(t,i){return this.anims.play(t,i)},playReverse:function(t,i){return this.anims.playReverse(t,i)},playAfterDelay:function(t,i){return this.anims.playAfterDelay(t,i)},playAfterRepeat:function(t,i){return this.anims.playAfterRepeat(t,i)},chain:function(t){return this.anims.chain(t)},stop:function(){return this.anims.stop()},stopAfterDelay:function(t){return this.anims.stopAfterDelay(t)},stopAfterRepeat:function(t){return this.anims.stopAfterRepeat(t)},stopOnFrame:function(t){return this.anims.stopOnFrame(t)},toJSON:function(){return a.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});t.exports=f},function(t,i){t.exports=function(t,i){if(!(i>=t.length)){for(var n=t.length-1,r=t[i],o=i;o<n;o++)t[o]=t[o+1];return t.length=n,r}}},function(t,i,n){t.exports={ADDED_TO_SCENE:n(643),DESTROY:n(644),REMOVED_FROM_SCENE:n(645),VIDEO_COMPLETE:n(646),VIDEO_CREATED:n(647),VIDEO_ERROR:n(648),VIDEO_LOOP:n(649),VIDEO_PLAY:n(650),VIDEO_SEEKED:n(651),VIDEO_SEEKING:n(652),VIDEO_STOP:n(653),VIDEO_TIMEOUT:n(654),VIDEO_UNLOCKED:n(655)}},function(t,i){t.exports=function(t,i,n,r){return void 0===n&&(n=0),0===i?t:(t-=n,t=i*Math.floor(t/i),r?(n+t)/i:n+t)}},function(t,i){t.exports=function(t){var i={};for(var n in t)Array.isArray(t[n])?i[n]=t[n].slice(0):i[n]=t[n];return i}},function(t,i){t.exports=function(t,i,n,r){var o=t.length;if(i<0||i>o||i>=n||n>o||i+n>o){if(r)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},function(t,i){function Compare(t,i){return String(t).localeCompare(i)}function RunPass(t,i,n,r){var o,a,h,d,f,p=t.length,T=0,b=2*n;for(o=0;o<p;o+=b)for(h=(a=o+n)+n,a>p&&(a=p),h>p&&(h=p),d=o,f=a;;)if(d<a&&f<h)i(t[d],t[f])<=0?r[T++]=t[d++]:r[T++]=t[f++];else if(d<a)r[T++]=t[d++];else{if(!(f<h))break;r[T++]=t[f++]}}t.exports=function(t,i){void 0===i&&(i=Compare);var n=function Process(t,i){var n=t.length;if(n<=1)return t;for(var r=new Array(n),o=1;o<n;o*=2){RunPass(t,i,o,r);var a=t;t=r,r=a}return t}(t,i);return n!==t&&RunPass(n,null,t.length,t),t}},function(t,i,n){var r=n(134),o=n(205);t.exports=function(t,i){var n=r.Power0;if("string"==typeof t)if(r.hasOwnProperty(t))n=r[t];else{var a="";t.indexOf(".")&&("in"===(a=t.substr(t.indexOf(".")+1)).toLowerCase()?a="easeIn":"out"===a.toLowerCase()?a="easeOut":"inout"===a.toLowerCase()&&(a="easeInOut")),t=o(t.substr(0,t.indexOf(".")+1)+a),r.hasOwnProperty(t)&&(n=r[t])}else"function"==typeof t?n=t:Array.isArray(t)&&t.length;if(!i)return n;var h=i.slice(0);return h.unshift(0),function(t){return h[0]=t,n.apply(this,h)}}},function(t,i,n){var r=n(12);t.exports=function(t,i,n,o,a){var h=t.strokeTint,d=r.getTintAppendFloatAlpha(i.strokeColor,i.strokeAlpha*n);h.TL=d,h.TR=d,h.BL=d,h.BR=d;var f=i.pathData,p=f.length-1,T=i.lineWidth,b=T/2,S=f[0]-o,A=f[1]-a;i.closePath||(p-=2);for(var P=2;P<p;P+=2){var O=f[P]-o,L=f[P+1]-a;t.batchLine(S,A,O,L,b,b,T,P-2,!!i.closePath&&P===p-1),S=O,A=L}}},function(t,i,n){var r=n(0),o=n(115),a=n(476),h=n(477),d=n(56),f=n(47),p=n(181),T=new r({initialize:function Triangle2(t,i,n,r,o,a){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),this.type=d.TRIANGLE,this.x1=t,this.y1=i,this.x2=n,this.y2=r,this.x3=o,this.y3=a},contains:function(t,i){return o(this,t,i)},getPoint:function(t,i){return a(this,t,i)},getPoints:function(t,i,n){return h(this,t,i,n)},getRandomPoint:function(t){return p(this,t)},setTo:function(t,i,n,r,o,a){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),this.x1=t,this.y1=i,this.x2=n,this.y2=r,this.x3=o,this.y3=a,this},getLineA:function(t){return void 0===t&&(t=new f),t.setTo(this.x1,this.y1,this.x2,this.y2),t},getLineB:function(t){return void 0===t&&(t=new f),t.setTo(this.x2,this.y2,this.x3,this.y3),t},getLineC:function(t){return void 0===t&&(t=new f),t.setTo(this.x3,this.y3,this.x1,this.y1),t},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(t){var i=0;i=this.x1<=this.x2&&this.x1<=this.x3?this.x1-t:this.x2<=this.x1&&this.x2<=this.x3?this.x2-t:this.x3-t,this.x1-=i,this.x2-=i,this.x3-=i}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(t){var i=0;i=this.x1>=this.x2&&this.x1>=this.x3?this.x1-t:this.x2>=this.x1&&this.x2>=this.x3?this.x2-t:this.x3-t,this.x1-=i,this.x2-=i,this.x3-=i}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(t){var i=0;i=this.y1<=this.y2&&this.y1<=this.y3?this.y1-t:this.y2<=this.y1&&this.y2<=this.y3?this.y2-t:this.y3-t,this.y1-=i,this.y2-=i,this.y3-=i}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(t){var i=0;i=this.y1>=this.y2&&this.y1>=this.y3?this.y1-t:this.y2>=this.y1&&this.y2>=this.y3?this.y2-t:this.y3-t,this.y1-=i,this.y2-=i,this.y3-=i}}});t.exports=T},function(t,i){var n={};t.exports=n,n.create=function(t,i){return{x:t||0,y:i||0}},n.clone=function(t){return{x:t.x,y:t.y}},n.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},n.magnitudeSquared=function(t){return t.x*t.x+t.y*t.y},n.rotate=function(t,i,n){var r=Math.cos(i),o=Math.sin(i);n||(n={});var a=t.x*r-t.y*o;return n.y=t.x*o+t.y*r,n.x=a,n},n.rotateAbout=function(t,i,n,r){var o=Math.cos(i),a=Math.sin(i);r||(r={});var h=n.x+((t.x-n.x)*o-(t.y-n.y)*a);return r.y=n.y+((t.x-n.x)*a+(t.y-n.y)*o),r.x=h,r},n.normalise=function(t){var i=n.magnitude(t);return 0===i?{x:0,y:0}:{x:t.x/i,y:t.y/i}},n.dot=function(t,i){return t.x*i.x+t.y*i.y},n.cross=function(t,i){return t.x*i.y-t.y*i.x},n.cross3=function(t,i,n){return(i.x-t.x)*(n.y-t.y)-(i.y-t.y)*(n.x-t.x)},n.add=function(t,i,n){return n||(n={}),n.x=t.x+i.x,n.y=t.y+i.y,n},n.sub=function(t,i,n){return n||(n={}),n.x=t.x-i.x,n.y=t.y-i.y,n},n.mult=function(t,i){return{x:t.x*i,y:t.y*i}},n.div=function(t,i){return{x:t.x/i,y:t.y/i}},n.perp=function(t,i){return{x:(i=!0===i?-1:1)*-t.y,y:i*t.x}},n.neg=function(t){return{x:-t.x,y:-t.y}},n.angle=function(t,i){return Math.atan2(i.y-t.y,i.x-t.x)},n._temp=[n.create(),n.create(),n.create(),n.create(),n.create(),n.create()]},function(t,i){var n={};t.exports=n,n.create=function(t){var i={min:{x:0,y:0},max:{x:0,y:0}};return t&&n.update(i,t),i},n.update=function(t,i,n){t.min.x=1/0,t.max.x=-1/0,t.min.y=1/0,t.max.y=-1/0;for(var r=0;r<i.length;r++){var o=i[r];o.x>t.max.x&&(t.max.x=o.x),o.x<t.min.x&&(t.min.x=o.x),o.y>t.max.y&&(t.max.y=o.y),o.y<t.min.y&&(t.min.y=o.y)}n&&(n.x>0?t.max.x+=n.x:t.min.x+=n.x,n.y>0?t.max.y+=n.y:t.min.y+=n.y)},n.contains=function(t,i){return i.x>=t.min.x&&i.x<=t.max.x&&i.y>=t.min.y&&i.y<=t.max.y},n.overlaps=function(t,i){return t.min.x<=i.max.x&&t.max.x>=i.min.x&&t.max.y>=i.min.y&&t.min.y<=i.max.y},n.translate=function(t,i){t.min.x+=i.x,t.max.x+=i.x,t.min.y+=i.y,t.max.y+=i.y},n.shift=function(t,i){var n=t.max.x-t.min.x,r=t.max.y-t.min.y;t.min.x=i.x,t.max.x=i.x+n,t.min.y=i.y,t.max.y=i.y+r}},function(t,i,n){var r=n(29),o=n(0),a=n(11),h=n(502),d=new o({Mixins:[a.Alpha,a.Flip,a.Visible],initialize:function Tile2(t,i,n,r,o,a,h,d){this.layer=t,this.index=i,this.x=n,this.y=r,this.width=o,this.height=a,this.right,this.bottom,this.baseWidth=void 0!==h?h:o,this.baseHeight=void 0!==d?d:a,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(t,i){return!(t<this.pixelX||i<this.pixelY||t>this.right||i>this.bottom)},copy:function(t){return this.index=t.index,this.alpha=t.alpha,this.properties=t.properties,this.visible=t.visible,this.setFlip(t.flipX,t.flipY),this.tint=t.tint,this.rotation=t.rotation,this.collideUp=t.collideUp,this.collideDown=t.collideDown,this.collideLeft=t.collideLeft,this.collideRight=t.collideRight,this.collisionCallback=t.collisionCallback,this.collisionCallbackContext=t.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(t){var i=this.tilemapLayer;return i?i.tileToWorldX(this.x,t):this.x*this.baseWidth},getRight:function(t){var i=this.tilemapLayer;return i?this.getLeft(t)+this.width*i.scaleX:this.getLeft(t)+this.width},getTop:function(t){var i=this.tilemapLayer;return i?i.tileToWorldY(this.y,t)-(this.height-this.baseHeight)*i.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(t){var i=this.tilemapLayer;return i?this.getTop(t)+this.height*i.scaleY:this.getTop(t)+this.height},getBounds:function(t,i){return void 0===i&&(i=new h),i.x=this.getLeft(),i.y=this.getTop(),i.width=this.getRight()-i.x,i.height=this.getBottom()-i.y,i},getCenterX:function(t){return(this.getLeft(t)+this.getRight(t))/2},getCenterY:function(t){return(this.getTop(t)+this.getBottom(t))/2},intersects:function(t,i,n,r){return!(n<=this.pixelX||r<=this.pixelY||t>=this.right||i>=this.bottom)},isInteresting:function(t,i){return t&&i?this.canCollide||this.hasInterestingFace:t?this.collides:!!i&&this.hasInterestingFace},resetCollision:function(t){return void 0===t&&(t=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,t&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(t,i,n,r,o){return void 0===i&&(i=t),void 0===n&&(n=t),void 0===r&&(r=t),void 0===o&&(o=!0),this.collideLeft=t,this.collideRight=i,this.collideUp=n,this.collideDown=r,this.faceLeft=t,this.faceRight=i,this.faceTop=n,this.faceBottom=r,o&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},setCollisionCallback:function(t,i){return null===t?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=t,this.collisionCallbackContext=i),this},setSize:function(t,i,n,r){return void 0!==t&&(this.width=t),void 0!==i&&(this.height=i),void 0!==n&&(this.baseWidth=n),void 0!==r&&(this.baseHeight=r),this.updatePixelXY(),this},updatePixelXY:function(){var t=this.layer.orientation;if(t===r.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(t===r.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(t===r.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(t===r.HEXAGONAL){var i=this.layer.hexSideLength,n=(this.baseHeight-i)/2+i;this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*n}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||void 0!==this.collisionCallback}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var t=this.layer.tilemapLayer;if(t){var i=t.gidMap[this.index];if(i)return i}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var t=this.tilemapLayer;return t?t.tilemap:null}}});t.exports=d},function(t,i,n){var r={};t.exports=r;var o=n(64),a=n(32),h=n(41),d=n(84),f=n(83),p=n(1393);r.rectangle=function(t,i,n,r,d){d=d||{};var f={label:"Rectangle Body",position:{x:t,y:i},vertices:o.fromPath("L 0 0 L "+n+" 0 L "+n+" "+r+" L 0 "+r)};if(d.chamfer){var p=d.chamfer;f.vertices=o.chamfer(f.vertices,p.radius,p.quality,p.qualityMin,p.qualityMax),delete d.chamfer}return h.create(a.extend({},f,d))},r.trapezoid=function(t,i,n,r,d,f){f=f||{};var p,T=n*(d*=.5),b=T+(1-2*d)*n,S=b+T;p=d<.5?"L 0 0 L "+T+" "+-r+" L "+b+" "+-r+" L "+S+" 0":"L 0 0 L "+b+" "+-r+" L "+S+" 0";var A={label:"Trapezoid Body",position:{x:t,y:i},vertices:o.fromPath(p)};if(f.chamfer){var P=f.chamfer;A.vertices=o.chamfer(A.vertices,P.radius,P.quality,P.qualityMin,P.qualityMax),delete f.chamfer}return h.create(a.extend({},A,f))},r.circle=function(t,i,n,o,h){o=o||{};var d={label:"Circle Body",circleRadius:n};h=h||25;var f=Math.ceil(Math.max(10,Math.min(h,n)));return f%2==1&&(f+=1),r.polygon(t,i,f,n,a.extend({},d,o))},r.polygon=function(t,i,n,d,f){if(f=f||{},n<3)return r.circle(t,i,d,f);for(var p=2*Math.PI/n,T="",b=.5*p,S=0;S<n;S+=1){var A=b+S*p,P=Math.cos(A)*d,O=Math.sin(A)*d;T+="L "+P.toFixed(3)+" "+O.toFixed(3)+" "}var L={label:"Polygon Body",position:{x:t,y:i},vertices:o.fromPath(T)};if(f.chamfer){var D=f.chamfer;L.vertices=o.chamfer(L.vertices,D.radius,D.quality,D.qualityMin,D.qualityMax),delete f.chamfer}return h.create(a.extend({},L,f))},r.fromVertices=function(t,i,n,d,f,T,b){var S,A,P,O,L,D;for(d=d||{},A=[],f=void 0!==f&&f,T=void 0!==T?T:.01,b=void 0!==b?b:10,p||a.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),a.isArray(n[0])||(n=[n]),D=0;D<n.length;D+=1)if(O=n[D],(P=o.isConvex(O))||!p)O=P?o.clockwiseSort(O):o.hull(O),A.push({position:{x:t,y:i},vertices:O});else{var I=O.map((function(t){return[t.x,t.y]}));p.makeCCW(I),!1!==T&&p.removeCollinearPoints(I,T);var F=p.quickDecomp(I);for(L=0;L<F.length;L++){var B=F[L].map((function(t){return{x:t[0],y:t[1]}}));b>0&&o.area(B)<b||A.push({position:o.centre(B),vertices:B})}}for(L=0;L<A.length;L++)A[L]=h.create(a.extend(A[L],d));return f&&r.flagCoincidentParts(A,5),A.length>1?(S=h.create(a.extend({parts:A.slice(0)},d)),h.setPosition(S,{x:t,y:i}),S):A[0]},r.flagCoincidentParts=function(t,i){void 0===i&&(i=5);for(var n=0;n<t.length;n++)for(var r=t[n],o=n+1;o<t.length;o++){var a=t[o];if(d.overlaps(r.bounds,a.bounds))for(var h=r.vertices,p=a.vertices,T=0;T<r.vertices.length;T++)for(var b=0;b<a.vertices.length;b++){var S=f.magnitudeSquared(f.sub(h[(T+1)%h.length],p[b])),A=f.magnitudeSquared(f.sub(h[T],p[(b+1)%p.length]));S<i&&A<i&&(h[T].isInternal=!0,p[b].isInternal=!0)}}return t}},function(t,i){t.exports=function(t){return t.x-t.width*t.originX+.5*t.width}},function(t,i){t.exports=function(t,i){var n=t.width*t.originX;return t.x=i+n-.5*t.width,t}},function(t,i){t.exports=function(t){return t.y-t.height*t.originY+.5*t.height}},function(t,i){t.exports=function(t,i){var n=t.height*t.originY;return t.y=i+n-.5*t.height,t}},function(t,i,n){t.exports={POST_RENDER:n(628),PRE_RENDER:n(629),RENDER:n(630),RESIZE:n(631)}},function(t,i){t.exports={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"}},function(t,i,n){var r=n(74);t.exports=function(t,i,n,o){var a;if(void 0===o&&(o=t),!Array.isArray(i))return-1!==(a=t.indexOf(i))?(r(t,a),n&&n.call(o,i),i):null;for(var h=i.length-1,d=[];h>=0;){var f=i[h];-1!==(a=t.indexOf(f))&&(r(t,a),d.push(f),n&&n.call(o,f)),h--}return d}},function(t,i,n){var r=n(0),o=n(199),a=n(10),h=n(3),d=new r({initialize:function Curve2(t){this.type=t,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new h,this._tmpVec2B=new h},draw:function(t,i){return void 0===i&&(i=32),t.strokePoints(this.getPoints(i))},getBounds:function(t,i){t||(t=new a),void 0===i&&(i=16);var n=this.getLength();i>n&&(i=n/2);var r=Math.max(1,Math.round(n/i));return o(this.getSpacedPoints(r),t)},getDistancePoints:function(t){var i=this.getLength(),n=Math.max(1,i/t);return this.getSpacedPoints(n)},getEndPoint:function(t){return void 0===t&&(t=new h),this.getPointAt(1,t)},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var i,n=[],r=this.getPoint(0,this._tmpVec2A),o=0;n.push(0);for(var a=1;a<=t;a++)o+=(i=this.getPoint(a/t,this._tmpVec2B)).distance(r),n.push(o),r.copy(i);return this.cacheArcLengths=n,n},getPointAt:function(t,i){var n=this.getUtoTmapping(t);return this.getPoint(n,i)},getPoints:function(t,i,n){void 0===n&&(n=[]),t||(t=i?this.getLength()/i:this.defaultDivisions);for(var r=0;r<=t;r++)n.push(this.getPoint(r/t));return n},getRandomPoint:function(t){return void 0===t&&(t=new h),this.getPoint(Math.random(),t)},getSpacedPoints:function(t,i,n){void 0===n&&(n=[]),t||(t=i?this.getLength()/i:this.defaultDivisions);for(var r=0;r<=t;r++){var o=this.getUtoTmapping(r/t,null,t);n.push(this.getPoint(o))}return n},getStartPoint:function(t){return void 0===t&&(t=new h),this.getPointAt(0,t)},getTangent:function(t,i){void 0===i&&(i=new h);var n=1e-4,r=t-n,o=t+n;return r<0&&(r=0),o>1&&(o=1),this.getPoint(r,this._tmpVec2A),this.getPoint(o,i),i.subtract(this._tmpVec2A).normalize()},getTangentAt:function(t,i){var n=this.getUtoTmapping(t);return this.getTangent(n,i)},getTFromDistance:function(t,i){return t<=0?0:this.getUtoTmapping(0,t,i)},getUtoTmapping:function(t,i,n){var r,o=this.getLengths(n),a=0,h=o.length;r=i?Math.min(i,o[h-1]):t*o[h-1];for(var d,f=0,p=h-1;f<=p;)if((d=o[a=Math.floor(f+(p-f)/2)]-r)<0)f=a+1;else{if(!(d>0)){p=a;break}p=a-1}if(o[a=p]===r)return a/(h-1);var T=o[a];return(a+(r-T)/(o[a+1]-T))/(h-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});t.exports=d},function(t,i,n){t.exports={ADD:n(968),COMPLETE:n(969),FILE_COMPLETE:n(970),FILE_KEY_COMPLETE:n(971),FILE_LOAD_ERROR:n(972),FILE_LOAD:n(973),FILE_PROGRESS:n(974),POST_PROCESS:n(975),PROGRESS:n(976),START:n(977)}},function(t,i,n){var r=n(4);t.exports=function(t,i,n){void 0===n&&(n=new r);var o=t.x1,a=t.y1,h=t.x2,d=t.y2,f=i.x1,p=i.y1,T=i.x2,b=i.y2,S=(b-p)*(h-o)-(T-f)*(d-a);if(0===S)return!1;var A=((T-f)*(a-p)-(b-p)*(o-f))/S,P=((h-o)*(a-p)-(d-a)*(o-f))/S;return A>=0&&A<=1&&P>=0&&P<=1&&(n.x=o+A*(h-o),n.y=a+A*(d-a),!0)}},function(t,i){t.exports=function(t){return Math.atan2(t.y2-t.y1,t.x2-t.x1)}},function(t,i,n){var r=n(18);t.exports=function(t,i,n){return(n-i)*(t=r(t,0,1))+i}},function(t,i){t.exports=function(t,i,n){return t&&t.hasOwnProperty(i)?t[i]:n}},function(t,i){t.exports={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26}},function(t,i,n){var r=n(0),o=n(315),a=new r({initialize:function DataManager2(t,i){this.parent=t,this.events=i,i||(this.events=t.events?t.events:t),this.list={},this.values={},this._frozen=!1,!t.hasOwnProperty("sys")&&this.events&&this.events.once(o.DESTROY,this.destroy,this)},get:function(t){var i=this.list;if(Array.isArray(t)){for(var n=[],r=0;r<t.length;r++)n.push(i[t[r]]);return n}return i[t]},getAll:function(){var t={};for(var i in this.list)this.list.hasOwnProperty(i)&&(t[i]=this.list[i]);return t},query:function(t){var i={};for(var n in this.list)this.list.hasOwnProperty(n)&&n.match(t)&&(i[n]=this.list[n]);return i},set:function(t,i){if(this._frozen)return this;if("string"==typeof t)return this.setValue(t,i);for(var n in t)this.setValue(n,t[n]);return this},inc:function(t,i){if(this._frozen)return this;void 0===i&&(i=1);var n=this.get(t);return void 0===n&&(n=0),this.set(t,n+i),this},toggle:function(t){return this._frozen||this.set(t,!this.get(t)),this},setValue:function(t,i){if(this._frozen)return this;if(this.has(t))this.values[t]=i;else{var n=this,r=this.list,a=this.events,h=this.parent;Object.defineProperty(this.values,t,{enumerable:!0,configurable:!0,get:function(){return r[t]},set:function(i){if(!n._frozen){var d=r[t];r[t]=i,a.emit(o.CHANGE_DATA,h,t,i,d),a.emit(o.CHANGE_DATA_KEY+t,h,i,d)}}}),r[t]=i,a.emit(o.SET_DATA,h,t,i)}return this},each:function(t,i){for(var n=[this.parent,null,void 0],r=1;r<arguments.length;r++)n.push(arguments[r]);for(var o in this.list)n[1]=o,n[2]=this.list[o],t.apply(i,n);return this},merge:function(t,i){for(var n in void 0===i&&(i=!0),t)t.hasOwnProperty(n)&&(i||!i&&!this.has(n))&&this.setValue(n,t[n]);return this},remove:function(t){if(this._frozen)return this;if(!Array.isArray(t))return this.removeValue(t);for(var i=0;i<t.length;i++)this.removeValue(t[i]);return this},removeValue:function(t){if(this.has(t)){var i=this.list[t];delete this.list[t],delete this.values[t],this.events.emit(o.REMOVE_DATA,this.parent,t,i)}return this},pop:function(t){var i=void 0;return!this._frozen&&this.has(t)&&(i=this.list[t],delete this.list[t],delete this.values[t],this.events.emit(o.REMOVE_DATA,this.parent,t,i)),i},has:function(t){return this.list.hasOwnProperty(t)},setFreeze:function(t){return this._frozen=t,this},reset:function(){for(var t in this.list)delete this.list[t],delete this.values[t];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(o.CHANGE_DATA),this.events.off(o.SET_DATA),this.events.off(o.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(t){this._frozen=!!t}},count:{get:function(){var t=0;for(var i in this.list)void 0!==this.list[i]&&t++;return t}}});t.exports=a},function(t,i,n){var r=new(n(0))({initialize:function Map3(t){if(this.entries={},this.size=0,Array.isArray(t))for(var i=0;i<t.length;i++)this.set(t[i][0],t[i][1])},set:function(t,i){return this.has(t)||this.size++,this.entries[t]=i,this},get:function(t){if(this.has(t))return this.entries[t]},getArray:function(){var t=[],i=this.entries;for(var n in i)t.push(i[n]);return t},has:function(t){return this.entries.hasOwnProperty(t)},delete:function(t){return this.has(t)&&(delete this.entries[t],this.size--),this},clear:function(){return Object.keys(this.entries).forEach((function(t){delete this.entries[t]}),this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var t=[],i=this.entries;for(var n in i)t.push(i[n]);return t},dump:function(){var t=this.entries;for(var i in console.group("Map"),t)console.log(i,t[i]);console.groupEnd()},each:function(t){var i=this.entries;for(var n in i)if(!1===t(n,i[n]))break;return this},contains:function(t){var i=this.entries;for(var n in i)if(i[n]===t)return!0;return!1},merge:function(t,i){void 0===i&&(i=!1);var n=this.entries,r=t.entries;for(var o in r)n.hasOwnProperty(o)&&i?n[o]=r[o]:this.set(o,r[o]);return this}});t.exports=r},function(t,i){t.exports=function(t,i,n){return t<<16|i<<8|n}},function(t,i,n){t.exports={ENTER_FULLSCREEN:n(800),FULLSCREEN_FAILED:n(801),FULLSCREEN_UNSUPPORTED:n(802),LEAVE_FULLSCREEN:n(803),ORIENTATION_CHANGE:n(804),RESIZE:n(805)}},function(t,i,n){(function(i){var n={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};t.exports=function init(){if("function"==typeof importScripts)return n;var t=navigator.userAgent;/Windows/.test(t)?n.windows=!0:/Mac OS/.test(t)&&!/like Mac OS/.test(t)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(n.iOS=!0,n.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),n.iOSVersion=parseInt(RegExp.$1,10)):n.macOS=!0:/Android/.test(t)?n.android=!0:/Linux/.test(t)?n.linux=!0:/iP[ao]d|iPhone/i.test(t)?(n.iOS=!0,navigator.appVersion.match(/OS (\d+)/),n.iOSVersion=parseInt(RegExp.$1,10),n.iPhone=-1!==t.toLowerCase().indexOf("iphone"),n.iPad=-1!==t.toLowerCase().indexOf("ipad")):/Kindle/.test(t)||/\bKF[A-Z][A-Z]+/.test(t)||/Silk.*Mobile Safari/.test(t)?n.kindle=!0:/CrOS/.test(t)&&(n.chromeOS=!0),(/Windows Phone/i.test(t)||/IEMobile/i.test(t))&&(n.android=!1,n.iOS=!1,n.macOS=!1,n.windows=!0,n.windowsPhone=!0);var r=/Silk/.test(t);return(n.windows||n.macOS||n.linux&&!r||n.chromeOS)&&(n.desktop=!0),(n.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(n.desktop=!1),navigator.standalone&&(n.webApp=!0),"function"!=typeof importScripts&&(void 0!==window.cordova&&(n.cordova=!0),void 0!==window.ejecta&&(n.ejecta=!0)),void 0!==i&&i.versions&&i.versions.node&&(n.node=!0),n.node&&"object"==typeof i.versions&&(n.nodeWebkit=!!i.versions["node-webkit"],n.electron=!!i.versions.electron),/Crosswalk/.test(t)&&(n.crosswalk=!0),n.pixelRatio=window.devicePixelRatio||1,n}()}).call(this,n(807))},function(t,i,n){t.exports={ADD:n(861),ERROR:n(862),LOAD:n(863),READY:n(864),REMOVE:n(865)}},function(t,i){t.exports={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}}},function(t,i,n){var r=n(0),o=n(59),a=n(2),h=n(878),d=n(879),f=n(25),p=n(12),T=n(107),b=n(58),S=new r({Extends:b,initialize:function MultiPipeline2(t){var i=t.game.renderer,n=a(t,"fragShader",h);t.fragShader=p.parseFragmentShaderMaxTextures(n,i.maxTextures),t.vertShader=a(t,"vertShader",d),t.attributes=a(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:T.UNSIGNED_BYTE,normalized:!0}]),b.call(this,t),this._tempMatrix1=new f,this._tempMatrix2=new f,this._tempMatrix3=new f,this.calcMatrix=new f,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){b.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(t,i,n){this.manager.set(this,t);var r=this._tempMatrix1,o=this._tempMatrix2,a=this._tempMatrix3,h=t.frame,d=h.glTexture,f=h.u0,T=h.v0,b=h.u1,S=h.v1,A=h.x,P=h.y,O=h.cutWidth,L=h.cutHeight,D=h.customPivot,I=t.displayOriginX,F=t.displayOriginY,B=-I+A,N=-F+P;if(t.isCropped){var Y=t._crop;Y.flipX===t.flipX&&Y.flipY===t.flipY||h.updateCropUVs(Y,t.flipX,t.flipY),f=Y.u0,T=Y.v0,b=Y.u1,S=Y.v1,O=Y.width,L=Y.height,B=-I+(A=Y.x),N=-F+(P=Y.y)}var X=1,G=1;t.flipX&&(D||(B+=-h.realWidth+2*I),X=-1),(t.flipY||h.source.isGLTexture&&!d.flipY)&&(D||(N+=-h.realHeight+2*F),G=-1),o.applyITRS(t.x,t.y,t.rotation,t.scaleX*X,t.scaleY*G),r.copyFrom(i.matrix),n?(r.multiplyWithOffset(n,-i.scrollX*t.scrollFactorX,-i.scrollY*t.scrollFactorY),o.e=t.x,o.f=t.y):(o.e-=i.scrollX*t.scrollFactorX,o.f-=i.scrollY*t.scrollFactorY),r.multiply(o,a);var U=B+O,V=N+L,z=i.roundPixels,W=a.getXRound(B,N,z),H=a.getYRound(B,N,z),q=a.getXRound(B,V,z),Z=a.getYRound(B,V,z),K=a.getXRound(U,V,z),J=a.getYRound(U,V,z),Q=a.getXRound(U,N,z),$=a.getYRound(U,N,z),tt=p.getTintAppendFloatAlpha,et=i.alpha,it=tt(t.tintTopLeft,et*t._alphaTL),nt=tt(t.tintTopRight,et*t._alphaTR),st=tt(t.tintBottomLeft,et*t._alphaBL),rt=tt(t.tintBottomRight,et*t._alphaBR);this.shouldFlush(6)&&this.flush();var ot=this.setGameObject(t,h);this.manager.preBatch(t),this.batchQuad(t,W,H,q,Z,K,J,Q,$,f,T,b,S,it,nt,st,rt,t.tintFill,d,ot),this.manager.postBatch(t)},batchTexture:function(t,i,n,r,o,a,h,d,f,p,T,b,S,A,P,O,L,D,I,F,B,N,Y,X,G,U,V,z,W,H,q,Z){this.manager.set(this,t);var K=this._tempMatrix1,J=this._tempMatrix2,Q=this._tempMatrix3,$=D/n+V,tt=I/r+z,et=(D+F)/n+V,it=(I+B)/r+z,nt=h,st=d,rt=-O,ot=-L;if(t.isCropped){var at=t._crop,ht=at.width,lt=at.height;nt=ht,st=lt,h=ht,d=lt;var ut=D=at.x,ct=I=at.y;b&&(ut=F-at.x-ht),S&&(ct=B-at.y-lt),$=ut/n+V,tt=ct/r+z,et=(ut+ht)/n+V,it=(ct+lt)/r+z,rt=-O+D,ot=-L+I}b&&(nt*=-1,rt+=h),(S^=!q&&i.isRenderTexture?1:0)&&(st*=-1,ot+=d);var dt=rt+nt,ft=ot+st;J.applyITRS(o,a,T,f,p),K.copyFrom(W.matrix),H?(K.multiplyWithOffset(H,-W.scrollX*A,-W.scrollY*P),J.e=o,J.f=a):(J.e-=W.scrollX*A,J.f-=W.scrollY*P),K.multiply(J,Q);var pt=W.roundPixels,gt=Q.getXRound(rt,ot,pt),vt=Q.getYRound(rt,ot,pt),mt=Q.getXRound(rt,ft,pt),yt=Q.getYRound(rt,ft,pt),xt=Q.getXRound(dt,ft,pt),Tt=Q.getYRound(dt,ft,pt),wt=Q.getXRound(dt,ot,pt),bt=Q.getYRound(dt,ot,pt);void 0===Z&&(Z=this.renderer.setTexture2D(i)),t&&this.manager.preBatch(t),this.batchQuad(t,gt,vt,mt,yt,xt,Tt,wt,bt,$,tt,et,it,N,Y,X,G,U,i,Z),t&&this.manager.postBatch(t)},batchTextureFrame:function(t,i,n,r,o,a,h){this.manager.set(this);var d=this._tempMatrix1.copyFrom(a),f=this._tempMatrix2,T=i+t.width,b=n+t.height;h?d.multiply(h,f):f=d;var S=f.getX(i,n),A=f.getY(i,n),P=f.getX(i,b),O=f.getY(i,b),L=f.getX(T,b),D=f.getY(T,b),I=f.getX(T,n),F=f.getY(T,n),B=this.renderer.setTextureSource(t.source);r=p.getTintAppendFloatAlpha(r,o),this.batchQuad(null,S,A,P,O,L,D,I,F,t.u0,t.v0,t.u1,t.v1,r,r,r,r,0,t.glTexture,B)},batchFillRect:function(t,i,n,r,o,a){this.renderer.pipelines.set(this);var h=this.calcMatrix;a&&a.multiply(o,h);var d=t+n,f=i+r,p=h.getX(t,i),T=h.getY(t,i),b=h.getX(t,f),S=h.getY(t,f),A=h.getX(d,f),P=h.getY(d,f),O=h.getX(d,i),L=h.getY(d,i),D=this.fillTint;this.batchQuad(null,p,T,b,S,A,P,O,L,0,0,1,1,D.TL,D.TR,D.BL,D.BR,2)},batchFillTriangle:function(t,i,n,r,o,a,h,d){this.renderer.pipelines.set(this);var f=this.calcMatrix;d&&d.multiply(h,f);var p=f.getX(t,i),T=f.getY(t,i),b=f.getX(n,r),S=f.getY(n,r),A=f.getX(o,a),P=f.getY(o,a),O=this.fillTint;this.batchTri(null,p,T,b,S,A,P,0,0,1,1,O.TL,O.TR,O.BL,2)},batchStrokeTriangle:function(t,i,n,r,o,a,h,d,f){var p=this.tempTriangle;p[0].x=t,p[0].y=i,p[0].width=h,p[1].x=n,p[1].y=r,p[1].width=h,p[2].x=o,p[2].y=a,p[2].width=h,p[3].x=t,p[3].y=i,p[3].width=h,this.batchStrokePath(p,h,!1,d,f)},batchFillPath:function(t,i,n){this.renderer.pipelines.set(this);var r=this.calcMatrix;n&&n.multiply(i,r);for(var a,h,d=t.length,f=this.polygonCache,p=this.fillTint.TL,T=this.fillTint.TR,b=this.fillTint.BL,S=0;S<d;++S)h=t[S],f.push(h.x,h.y);d=(a=o(f)).length;for(var A=0;A<d;A+=3){var P=2*a[A+0],O=2*a[A+1],L=2*a[A+2],D=f[P+0],I=f[P+1],F=f[O+0],B=f[O+1],N=f[L+0],Y=f[L+1],X=r.getX(D,I),G=r.getY(D,I),U=r.getX(F,B),V=r.getY(F,B),z=r.getX(N,Y),W=r.getY(N,Y);this.batchTri(null,X,G,U,V,z,W,0,0,1,1,p,T,b,2)}f.length=0},batchStrokePath:function(t,i,n,r,o){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var a=t.length-1,h=0;h<a;h++){var d=t[h],f=t[h+1];this.batchLine(d.x,d.y,f.x,f.y,d.width/2,f.width/2,i,h,!n&&h===a-1,r,o)}},batchLine:function(t,i,n,r,o,a,h,d,f,p,T){this.renderer.pipelines.set(this);var b=this.calcMatrix;T&&T.multiply(p,b);var S=n-t,A=r-i,P=Math.sqrt(S*S+A*A),O=o*(r-i)/P,L=o*(t-n)/P,D=a*(r-i)/P,I=a*(t-n)/P,F=n-D,B=r-I,N=t-O,Y=i-L,X=n+D,G=r+I,U=t+O,V=i+L,z=b.getX(F,B),W=b.getY(F,B),H=b.getX(N,Y),q=b.getY(N,Y),Z=b.getX(X,G),K=b.getY(X,G),J=b.getX(U,V),Q=b.getY(U,V),$=this.strokeTint,tt=$.TL,et=$.TR,it=$.BL,nt=$.BR;if(this.batchQuad(null,J,Q,H,q,z,W,Z,K,0,0,1,1,tt,et,it,nt,2),!(h<=2)){var st=this.prevQuad,rt=this.firstQuad;d>0&&st[4]?this.batchQuad(null,J,Q,H,q,st[0],st[1],st[2],st[3],0,0,1,1,tt,et,it,nt,2):(rt[0]=J,rt[1]=Q,rt[2]=H,rt[3]=q,rt[4]=1),f&&rt[4]?this.batchQuad(null,z,W,Z,K,rt[0],rt[1],rt[2],rt[3],0,0,1,1,tt,et,it,nt,2):(st[0]=z,st[1]=W,st[2]=Z,st[3]=K,st[4]=1)}}});t.exports=S},function(t,i,n){var r=n(0),o=n(18),a=n(17),h=new r({initialize:function Frame2(t,i,n,r,o,a,h){this.texture=t,this.name=i,this.source=t.source[n],this.sourceIndex=n,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(a,h,r,o)},setSize:function(t,i,n,r){void 0===n&&(n=0),void 0===r&&(r=0),this.cutX=n,this.cutY=r,this.cutWidth=t,this.cutHeight=i,this.width=t,this.height=i,this.halfWidth=Math.floor(.5*t),this.halfHeight=Math.floor(.5*i),this.centerX=Math.floor(t/2),this.centerY=Math.floor(i/2);var o=this.data,a=o.cut;a.x=n,a.y=r,a.w=t,a.h=i,a.r=n+t,a.b=r+i,o.sourceSize.w=t,o.sourceSize.h=i,o.spriteSourceSize.w=t,o.spriteSourceSize.h=i,o.radius=.5*Math.sqrt(t*t+i*i);var h=o.drawImage;return h.x=n,h.y=r,h.width=t,h.height=i,this.updateUVs()},setTrim:function(t,i,n,r,o,a){var h=this.data,d=h.spriteSourceSize;return h.trim=!0,h.sourceSize.w=t,h.sourceSize.h=i,d.x=n,d.y=r,d.w=o,d.h=a,d.r=n+o,d.b=r+a,this.x=n,this.y=r,this.width=o,this.height=a,this.halfWidth=.5*o,this.halfHeight=.5*a,this.centerX=Math.floor(o/2),this.centerY=Math.floor(a/2),this.updateUVs()},setCropUVs:function(t,i,n,r,a,h,d){var f=this.cutX,p=this.cutY,T=this.cutWidth,b=this.cutHeight,S=this.realWidth,A=this.realHeight,P=f+(i=o(i,0,S)),O=p+(n=o(n,0,A)),L=r=o(r,0,S-i),D=a=o(a,0,A-n),I=this.data;if(I.trim){var F=I.spriteSourceSize,B=i+(r=o(r,0,T-i)),N=n+(a=o(a,0,b-n));if(F.r<i||F.b<n||F.x>B||F.y>N)P=0,O=0,L=0,D=0;else{var Y=Math.max(F.x,i),X=Math.max(F.y,n),G=Math.min(F.r,B)-Y,U=Math.min(F.b,N)-X;L=G,D=U,P=h?f+(T-(Y-F.x)-G):f+(Y-F.x),O=d?p+(b-(X-F.y)-U):p+(X-F.y),i=Y,n=X,r=G,a=U}}else h&&(P=f+(T-i-r)),d&&(O=p+(b-n-a));var V=this.source.width,z=this.source.height;return t.u0=Math.max(0,P/V),t.v0=Math.max(0,O/z),t.u1=Math.min(1,(P+L)/V),t.v1=Math.min(1,(O+D)/z),t.x=i,t.y=n,t.cx=P,t.cy=O,t.cw=L,t.ch=D,t.width=r,t.height=a,t.flipX=h,t.flipY=d,t},updateCropUVs:function(t,i,n){return this.setCropUVs(t,t.x,t.y,t.width,t.height,i,n)},setUVs:function(t,i,n,r,o,a){var h=this.data.drawImage;return h.width=t,h.height=i,this.u0=n,this.v0=r,this.u1=o,this.v1=a,this},updateUVs:function(){var t=this.cutX,i=this.cutY,n=this.cutWidth,r=this.cutHeight,o=this.data.drawImage;o.width=n,o.height=r;var a=this.source.width,h=this.source.height;return this.u0=t/a,this.v0=i/h,this.u1=(t+n)/a,this.v1=(i+r)/h,this},updateUVsInverted:function(){var t=this.source.width,i=this.source.height;return this.u0=(this.cutX+this.cutHeight)/t,this.v0=this.cutY/i,this.u1=this.cutX/t,this.v1=(this.cutY+this.cutWidth)/i,this},clone:function(){var t=new h(this.texture,this.name,this.sourceIndex);return t.cutX=this.cutX,t.cutY=this.cutY,t.cutWidth=this.cutWidth,t.cutHeight=this.cutHeight,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t.halfWidth=this.halfWidth,t.halfHeight=this.halfHeight,t.centerX=this.centerX,t.centerY=this.centerY,t.rotated=this.rotated,t.data=a(!0,t.data,this.data),t.updateUVs(),t},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});t.exports=h},function(t,i,n){var r=n(208),o=n(0),a=n(1),h=n(79),d=new o({initialize:function List2(t){this.parent=t,this.list=[],this.position=0,this.addCallback=a,this.removeCallback=a,this._sortKey=""},add:function(t,i){return i?r.Add(this.list,t):r.Add(this.list,t,0,this.addCallback,this)},addAt:function(t,i,n){return n?r.AddAt(this.list,t,i):r.AddAt(this.list,t,i,0,this.addCallback,this)},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,i){return t?(void 0===i&&(i=function(i,n){return i[t]-n[t]}),h(this.list,i),this):this},getByName:function(t){return r.GetFirst(this.list,"name",t)},getRandom:function(t,i){return r.GetRandom(this.list,t,i)},getFirst:function(t,i,n,o){return r.GetFirst(this.list,t,i,n,o)},getAll:function(t,i,n,o){return r.GetAll(this.list,t,i,n,o)},count:function(t,i){return r.CountAllMatching(this.list,t,i)},swap:function(t,i){r.Swap(this.list,t,i)},moveTo:function(t,i){return r.MoveTo(this.list,t,i)},moveAbove:function(t,i){return r.MoveAbove(this.list,t,i)},moveBelow:function(t,i){return r.MoveBelow(this.list,t,i)},remove:function(t,i){return i?r.Remove(this.list,t):r.Remove(this.list,t,this.removeCallback,this)},removeAt:function(t,i){return i?r.RemoveAt(this.list,t):r.RemoveAt(this.list,t,this.removeCallback,this)},removeBetween:function(t,i,n){return n?r.RemoveBetween(this.list,t,i):r.RemoveBetween(this.list,t,i,this.removeCallback,this)},removeAll:function(t){for(var i=this.list.length;i--;)this.remove(this.list[i],t);return this},bringToTop:function(t){return r.BringToTop(this.list,t)},sendToBack:function(t){return r.SendToBack(this.list,t)},moveUp:function(t){return r.MoveUp(this.list,t),t},moveDown:function(t){return r.MoveDown(this.list,t),t},reverse:function(){return this.list.reverse(),this},shuffle:function(){return r.Shuffle(this.list),this},replace:function(t,i){return r.Replace(this.list,t,i)},exists:function(t){return this.list.indexOf(t)>-1},setAll:function(t,i,n,o){return r.SetAll(this.list,t,i,n,o),this},each:function(t,i){for(var n=[null],r=2;r<arguments.length;r++)n.push(arguments[r]);for(r=0;r<this.list.length;r++)n[0]=this.list[r],t.apply(i,n)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});t.exports=d},function(t,i,n){var r=n(0),o=n(112),a=n(445),h=n(446),d=n(56),f=n(180),p=new r({initialize:function Ellipse2(t,i,n,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),this.type=d.ELLIPSE,this.x=t,this.y=i,this.width=n,this.height=r},contains:function(t,i){return o(this,t,i)},getPoint:function(t,i){return a(this,t,i)},getPoints:function(t,i,n){return h(this,t,i,n)},getRandomPoint:function(t){return f(this,t)},setTo:function(t,i,n,r){return this.x=t,this.y=i,this.width=n,this.height=r,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setSize:function(t,i){return void 0===i&&(i=t),this.width=t,this.height=i,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(t){this.x=t+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(t){this.y=t+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});t.exports=p},function(t,i){t.exports=function(t,i,n){if(t.width<=0||t.height<=0)return!1;var r=(i-t.x)/t.width,o=(n-t.y)/t.height;return(r*=r)+(o*=o)<.25}},function(t,i,n){var r=n(275),o=n(0),a=n(75),h=n(9),d=n(207),f=n(2),p=n(6),T=n(7),b=n(437),S=n(149),A=n(73),P=new o({Extends:h,initialize:function Group3(t,i,n){h.call(this),n?i&&!Array.isArray(i)&&(i=[i]):Array.isArray(i)?T(i[0])&&(n=i,i=null):T(i)&&(n=i,i=null),this.scene=t,this.children=new S,this.isParent=!0,this.type="Group",this.classType=f(n,"classType",A),this.name=f(n,"name",""),this.active=f(n,"active",!0),this.maxSize=f(n,"maxSize",-1),this.defaultKey=f(n,"defaultKey",null),this.defaultFrame=f(n,"defaultFrame",null),this.runChildUpdate=f(n,"runChildUpdate",!1),this.createCallback=f(n,"createCallback",null),this.removeCallback=f(n,"removeCallback",null),this.createMultipleCallback=f(n,"createMultipleCallback",null),this.internalCreateCallback=f(n,"internalCreateCallback",null),this.internalRemoveCallback=f(n,"internalRemoveCallback",null),i&&this.addMultiple(i),n&&this.createMultiple(n),this.on(a.ADDED_TO_SCENE,this.addedToScene,this),this.on(a.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(t,i,n,r,o,a){if(void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=this.defaultKey),void 0===r&&(r=this.defaultFrame),void 0===o&&(o=!0),void 0===a&&(a=!0),this.isFull())return null;var h=new this.classType(this.scene,t,i,n,r);return h.addToDisplayList(this.scene.sys.displayList),h.addToUpdateList(),h.visible=o,h.setActive(a),this.add(h),h},createMultiple:function(t){if(this.isFull())return[];Array.isArray(t)||(t=[t]);var i=[];if(t[0].key)for(var n=0;n<t.length;n++){var r=this.createFromConfig(t[n]);i=i.concat(r)}return i},createFromConfig:function(t){if(this.isFull())return[];this.classType=f(t,"classType",this.classType);var i=f(t,"key",void 0),n=f(t,"frame",null),o=f(t,"visible",!0),a=f(t,"active",!0),h=[];if(void 0===i)return h;Array.isArray(i)||(i=[i]),Array.isArray(n)||(n=[n]);var d=f(t,"repeat",0),T=f(t,"randomKey",!1),S=f(t,"randomFrame",!1),A=f(t,"yoyo",!1),P=f(t,"quantity",!1),O=f(t,"frameQuantity",1),L=f(t,"max",0),D=b(i,n,{max:L,qty:P||O,random:T,randomB:S,repeat:d,yoyo:A});t.createCallback&&(this.createCallback=t.createCallback),t.removeCallback&&(this.removeCallback=t.removeCallback);for(var I=0;I<D.length;I++){var F=this.create(0,0,D[I].a,D[I].b,o,a);if(!F)break;h.push(F)}var B=p(t,"setXY.x",0),N=p(t,"setXY.y",0),Y=p(t,"setXY.stepX",0),X=p(t,"setXY.stepY",0);r.SetXY(h,B,N,Y,X);var G=p(t,"setRotation.value",0),U=p(t,"setRotation.step",0);r.SetRotation(h,G,U);var V=p(t,"setScale.x",1),z=p(t,"setScale.y",V),W=p(t,"setScale.stepX",0),H=p(t,"setScale.stepY",0);r.SetScale(h,V,z,W,H);var q=p(t,"setOrigin.x",.5),Z=p(t,"setOrigin.y",q),K=p(t,"setOrigin.stepX",0),J=p(t,"setOrigin.stepY",0);r.SetOrigin(h,q,Z,K,J);var Q=p(t,"setAlpha.value",1),$=p(t,"setAlpha.step",0);r.SetAlpha(h,Q,$);var tt=p(t,"setDepth.value",0),et=p(t,"setDepth.step",0);r.SetDepth(h,tt,et);var it=p(t,"setScrollFactor.x",1),nt=p(t,"setScrollFactor.y",it),st=p(t,"setScrollFactor.stepX",0),rt=p(t,"setScrollFactor.stepY",0);r.SetScrollFactor(h,it,nt,st,rt);var ot=f(t,"hitArea",null),at=f(t,"hitAreaCallback",null);ot&&r.SetHitArea(h,ot,at);var ht=f(t,"gridAlign",!1);return ht&&r.GridAlign(h,ht),this.createMultipleCallback&&this.createMultipleCallback.call(this,h),h},preUpdate:function(t,i){if(this.runChildUpdate&&0!==this.children.size)for(var n=this.children.entries.slice(),r=0;r<n.length;r++){var o=n[r];o.active&&o.update(t,i)}},add:function(t,i){return void 0===i&&(i=!1),this.isFull()||(this.children.set(t),this.internalCreateCallback&&this.internalCreateCallback.call(this,t),this.createCallback&&this.createCallback.call(this,t),i&&(t.addToDisplayList(this.scene.sys.displayList),t.addToUpdateList()),t.on(a.DESTROY,this.remove,this)),this},addMultiple:function(t,i){if(void 0===i&&(i=!1),Array.isArray(t))for(var n=0;n<t.length;n++)this.add(t[n],i);return this},remove:function(t,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!1),this.children.contains(t)?(this.children.delete(t),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,t),this.removeCallback&&this.removeCallback.call(this,t),t.off(a.DESTROY,this.remove,this),n?t.destroy():i&&(t.removeFromDisplayList(),t.removeFromUpdateList()),this):this},clear:function(t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);for(var n=this.children,r=0;r<n.size;r++){var o=n.entries[r];o.off(a.DESTROY,this.remove,this),i?o.destroy():t&&(o.removeFromDisplayList(),o.removeFromUpdateList())}return this.children.clear(),this},contains:function(t){return this.children.contains(t)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(t,i,n,r){return d(this.children.entries,t,i,n,r)},getFirst:function(t,i,n,r,o,a,h){return this.getHandler(!0,1,t,i,n,r,o,a,h)},getFirstNth:function(t,i,n,r,o,a,h,d){return this.getHandler(!0,t,i,n,r,o,a,h,d)},getLast:function(t,i,n,r,o,a,h){return this.getHandler(!1,1,t,i,n,r,o,a,h)},getLastNth:function(t,i,n,r,o,a,h,d){return this.getHandler(!1,t,i,n,r,o,a,h,d)},getHandler:function(t,i,n,r,o,a,h,d,f){var p,T;void 0===n&&(n=!1),void 0===r&&(r=!1);var b=0,S=this.children.entries;if(t)for(T=0;T<S.length;T++)if((p=S[T]).active===n){if(++b===i)break}else p=null;else for(T=S.length-1;T>=0;T--)if((p=S[T]).active===n){if(++b===i)break}else p=null;return p?("number"==typeof o&&(p.x=o),"number"==typeof a&&(p.y=a),p):r?this.create(o,a,h,d,f):null},get:function(t,i,n,r,o){return this.getFirst(!1,!0,t,i,n,r,o)},getFirstAlive:function(t,i,n,r,o,a){return this.getFirst(!0,t,i,n,r,o,a)},getFirstDead:function(t,i,n,r,o,a){return this.getFirst(!1,t,i,n,r,o,a)},playAnimation:function(t,i){return r.PlayAnimation(this.children.entries,t,i),this},isFull:function(){return-1!==this.maxSize&&this.children.size>=this.maxSize},countActive:function(t){void 0===t&&(t=!0);for(var i=0,n=0;n<this.children.size;n++)this.children.entries[n].active===t&&i++;return i},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var t=this.getTotalUsed();return(-1===this.maxSize?999999999999:this.maxSize)-t},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},propertyValueSet:function(t,i,n,o,a){return r.PropertyValueSet(this.children.entries,t,i,n,o,a),this},propertyValueInc:function(t,i,n,o,a){return r.PropertyValueInc(this.children.entries,t,i,n,o,a),this},setX:function(t,i){return r.SetX(this.children.entries,t,i),this},setY:function(t,i){return r.SetY(this.children.entries,t,i),this},setXY:function(t,i,n,o){return r.SetXY(this.children.entries,t,i,n,o),this},incX:function(t,i){return r.IncX(this.children.entries,t,i),this},incY:function(t,i){return r.IncY(this.children.entries,t,i),this},incXY:function(t,i,n,o){return r.IncXY(this.children.entries,t,i,n,o),this},shiftPosition:function(t,i,n){return r.ShiftPosition(this.children.entries,t,i,n),this},angle:function(t,i){return r.Angle(this.children.entries,t,i),this},rotate:function(t,i){return r.Rotate(this.children.entries,t,i),this},rotateAround:function(t,i){return r.RotateAround(this.children.entries,t,i),this},rotateAroundDistance:function(t,i,n){return r.RotateAroundDistance(this.children.entries,t,i,n),this},setAlpha:function(t,i){return r.SetAlpha(this.children.entries,t,i),this},setTint:function(t,i,n,o){return r.SetTint(this.children.entries,t,i,n,o),this},setOrigin:function(t,i,n,o){return r.SetOrigin(this.children.entries,t,i,n,o),this},scaleX:function(t,i){return r.ScaleX(this.children.entries,t,i),this},scaleY:function(t,i){return r.ScaleY(this.children.entries,t,i),this},scaleXY:function(t,i,n,o){return r.ScaleXY(this.children.entries,t,i,n,o),this},setDepth:function(t,i){return r.SetDepth(this.children.entries,t,i),this},setBlendMode:function(t){return r.SetBlendMode(this.children.entries,t),this},setHitArea:function(t,i){return r.SetHitArea(this.children.entries,t,i),this},shuffle:function(){return r.Shuffle(this.children.entries),this},kill:function(t){this.children.contains(t)&&t.setActive(!1)},killAndHide:function(t){this.children.contains(t)&&(t.setActive(!1),t.setVisible(!1))},setVisible:function(t,i,n){return r.SetVisible(this.children.entries,t,i,n),this},toggleVisible:function(){return r.ToggleVisible(this.children.entries),this},destroy:function(t,i){void 0===t&&(t=!1),void 0===i&&(i=!1),this.scene&&!this.ignoreDestroy&&(this.emit(a.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(i,t),this.scene=void 0,this.children=void 0)}});t.exports=P},function(t,i,n){var r=n(12);t.exports=function(t,i,n,o,a,h){for(var d=r.getTintAppendFloatAlpha(n.fillColor,n.fillAlpha*o),f=n.pathData,p=n.pathIndexes,T=0;T<p.length;T+=3){var b=2*p[T],S=2*p[T+1],A=2*p[T+2],P=f[b+0]-a,O=f[b+1]-h,L=f[S+0]-a,D=f[S+1]-h,I=f[A+0]-a,F=f[A+1]-h,B=i.getX(P,O),N=i.getY(P,O),Y=i.getX(L,D),X=i.getY(L,D),G=i.getX(I,F),U=i.getY(I,F);t.batchTri(n,B,N,Y,X,G,U,0,0,1,1,d,d,d,2)}}},function(t,i){t.exports=function(t,i,n){var r=t.x3-t.x1,o=t.y3-t.y1,a=t.x2-t.x1,h=t.y2-t.y1,d=i-t.x1,f=n-t.y1,p=r*r+o*o,T=r*a+o*h,b=r*d+o*f,S=a*a+h*h,A=a*d+h*f,P=p*S-T*T,O=0===P?0:1/P,L=(S*b-T*A)*O,D=(p*A-T*b)*O;return L>=0&&D>=0&&L+D<1}},function(t,i,n){var r=n(0),o=n(10),a=n(3);function GetLength(t,i,n,r){var o=t-n,a=i-r,h=o*o+a*a;return Math.sqrt(h)}var h=new r({initialize:function Face2(t,i,n){this.vertex1=t,this.vertex2=i,this.vertex3=n,this.bounds=new o,this._inCenter=new a},getInCenter:function(t){void 0===t&&(t=!0);var i,n,r,o,a,h,d=this.vertex1,f=this.vertex2,p=this.vertex3;t?(i=d.x,n=d.y,r=f.x,o=f.y,a=p.x,h=p.y):(i=d.vx,n=d.vy,r=f.vx,o=f.vy,a=p.vx,h=p.vy);var T=GetLength(a,h,r,o),b=GetLength(i,n,a,h),S=GetLength(r,o,i,n),A=T+b+S;return this._inCenter.set((i*T+r*b+a*S)/A,(n*T+o*b+h*S)/A)},contains:function(t,i,n){var r=this.vertex1,o=this.vertex2,a=this.vertex3,h=r.vx,d=r.vy,f=o.vx,p=o.vy,T=a.vx,b=a.vy;if(n){var S=n.a,A=n.b,P=n.c,O=n.d,L=n.e,D=n.f;h=r.vx*S+r.vy*P+L,d=r.vx*A+r.vy*O+D,f=o.vx*S+o.vy*P+L,p=o.vx*A+o.vy*O+D,T=a.vx*S+a.vy*P+L,b=a.vx*A+a.vy*O+D}var I=T-h,F=b-d,B=f-h,N=p-d,Y=t-h,X=i-d,G=I*I+F*F,U=I*B+F*N,V=I*Y+F*X,z=B*B+N*N,W=B*Y+N*X,H=G*z-U*U,q=0===H?0:1/H,Z=(z*V-U*W)*q,K=(G*W-U*V)*q;return Z>=0&&K>=0&&Z+K<1},isCounterClockwise:function(t){var i=this.vertex1,n=this.vertex2,r=this.vertex3,o=(n.vx-i.vx)*(r.vy-i.vy)-(n.vy-i.vy)*(r.vx-i.vx);return t<=0?o>=0:o<0},load:function(t,i,n,r,o){return n=this.vertex1.load(t,i,n,r,o),n=this.vertex2.load(t,i,n,r,o),n=this.vertex3.load(t,i,n,r,o)},transformCoordinatesLocal:function(t,i,n,r){return this.vertex1.transformCoordinatesLocal(t,i,n,r),this.vertex2.transformCoordinatesLocal(t,i,n,r),this.vertex3.transformCoordinatesLocal(t,i,n,r),this},updateBounds:function(){var t=this.vertex1,i=this.vertex2,n=this.vertex3,r=this.bounds;return r.x=Math.min(t.vx,i.vx,n.vx),r.y=Math.min(t.vy,i.vy,n.vy),r.width=Math.max(t.vx,i.vx,n.vx)-r.x,r.height=Math.max(t.vy,i.vy,n.vy)-r.y,this},isInView:function(t,i,n,r,o,a,h,d,f,p,T){var b=this.vertex1.update(o,a,h,d,f,p,T,r),S=this.vertex2.update(o,a,h,d,f,p,T,r),A=this.vertex3.update(o,a,h,d,f,p,T,r);if(b.ta<=0&&S.ta<=0&&A.ta<=0)return!1;if(i&&!this.isCounterClockwise(n))return!1;var P=this.bounds;P.x=Math.min(b.tx,S.tx,A.tx),P.y=Math.min(b.ty,S.ty,A.ty),P.width=Math.max(b.tx,S.tx,A.tx)-P.x,P.height=Math.max(b.ty,S.ty,A.ty)-P.y;var O=t.x+t.width,L=t.y+t.height;return!(P.width<=0||P.height<=0||t.width<=0||t.height<=0||P.right<t.x||P.bottom<t.y||P.x>O||P.y>L)},translate:function(t,i){void 0===i&&(i=0);var n=this.vertex1,r=this.vertex2,o=this.vertex3;return n.x+=t,n.y+=i,r.x+=t,r.y+=i,o.x+=t,o.y+=i,this},x:{get:function(){return this.getInCenter().x},set:function(t){var i=this.getInCenter();this.translate(t-i.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(t){var i=this.getInCenter();this.translate(0,t-i.y)}},alpha:{get:function(){var t=this.vertex1,i=this.vertex2,n=this.vertex3;return(t.alpha+i.alpha+n.alpha)/3},set:function(t){this.vertex1.alpha=t,this.vertex2.alpha=t,this.vertex3.alpha=t}},depth:{get:function(){var t=this.vertex1,i=this.vertex2,n=this.vertex3;return(t.vz+i.vz+n.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});t.exports=h},function(t,i,n){var r=n(0),o=n(12),a=n(39),h=new r({Extends:a,initialize:function Vertex2(t,i,n,r,o,h,d,f,p,T){void 0===h&&(h=16777215),void 0===d&&(d=1),void 0===f&&(f=0),void 0===p&&(p=0),void 0===T&&(T=0),a.call(this,t,i,n),this.vx=0,this.vy=0,this.vz=0,this.nx=f,this.ny=p,this.nz=T,this.u=r,this.v=o,this.color=h,this.alpha=d,this.tx=0,this.ty=0,this.ta=0},setUVs:function(t,i){return this.u=t,this.v=i,this},transformCoordinatesLocal:function(t,i,n,r){var o=this.x,a=this.y,h=this.z,d=t.val,f=o*d[0]+a*d[4]+h*d[8]+d[12],p=o*d[1]+a*d[5]+h*d[9]+d[13],T=o*d[2]+a*d[6]+h*d[10]+d[14],b=o*d[3]+a*d[7]+h*d[11]+d[15];this.vx=f/b*i,this.vy=-p/b*n,this.vz=r<=0?T/b:-T/b},update:function(t,i,n,r,o,a,h,d){var f=this.vx*t+this.vy*n+o,p=this.vx*i+this.vy*r+a;return h&&(f=Math.round(f),p=Math.round(p)),this.tx=f,this.ty=p,this.ta=this.alpha*d,this},load:function(t,i,n,r,a){return t[++n]=this.tx,t[++n]=this.ty,t[++n]=this.u,t[++n]=this.v,t[++n]=r,t[++n]=a,i[++n]=o.getTintAppendFloatAlpha(this.color,this.ta),n}});t.exports=h},function(t,i,n){var r={};t.exports=r;var o=n(166),a=n(32),h=n(84),d=n(41);r.create=function(t){return a.extend({id:a.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},t)},r.setModified=function(t,i,n,a){if(o.trigger(t,"compositeModified",t),t.isModified=i,n&&t.parent&&r.setModified(t.parent,i,n,a),a)for(var h=0;h<t.composites.length;h++){var d=t.composites[h];r.setModified(d,i,n,a)}},r.add=function(t,i){var n=[].concat(i);o.trigger(t,"beforeAdd",{object:i});for(var h=0;h<n.length;h++){var d=n[h];switch(d.type){case"body":if(d.parent!==d){a.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}r.addBody(t,d);break;case"constraint":r.addConstraint(t,d);break;case"composite":r.addComposite(t,d);break;case"mouseConstraint":r.addConstraint(t,d.constraint)}}return o.trigger(t,"afterAdd",{object:i}),t},r.remove=function(t,i,n){var a=[].concat(i);o.trigger(t,"beforeRemove",{object:i});for(var h=0;h<a.length;h++){var d=a[h];switch(d.type){case"body":r.removeBody(t,d,n);break;case"constraint":r.removeConstraint(t,d,n);break;case"composite":r.removeComposite(t,d,n);break;case"mouseConstraint":r.removeConstraint(t,d.constraint)}}return o.trigger(t,"afterRemove",{object:i}),t},r.addComposite=function(t,i){return t.composites.push(i),i.parent=t,r.setModified(t,!0,!0,!1),t},r.removeComposite=function(t,i,n){var o=t.composites.indexOf(i);if(-1!==o&&(r.removeCompositeAt(t,o),r.setModified(t,!0,!0,!1)),n)for(var a=0;a<t.composites.length;a++)r.removeComposite(t.composites[a],i,!0);return t},r.removeCompositeAt=function(t,i){return t.composites.splice(i,1),r.setModified(t,!0,!0,!1),t},r.addBody=function(t,i){return t.bodies.push(i),r.setModified(t,!0,!0,!1),t},r.removeBody=function(t,i,n){var o=t.bodies.indexOf(i);if(-1!==o&&(r.removeBodyAt(t,o),r.setModified(t,!0,!0,!1)),n)for(var a=0;a<t.composites.length;a++)r.removeBody(t.composites[a],i,!0);return t},r.removeBodyAt=function(t,i){return t.bodies.splice(i,1),r.setModified(t,!0,!0,!1),t},r.addConstraint=function(t,i){return t.constraints.push(i),r.setModified(t,!0,!0,!1),t},r.removeConstraint=function(t,i,n){var o=t.constraints.indexOf(i);if(-1!==o&&r.removeConstraintAt(t,o),n)for(var a=0;a<t.composites.length;a++)r.removeConstraint(t.composites[a],i,!0);return t},r.removeConstraintAt=function(t,i){return t.constraints.splice(i,1),r.setModified(t,!0,!0,!1),t},r.clear=function(t,i,n){if(n)for(var o=0;o<t.composites.length;o++)r.clear(t.composites[o],i,!0);return i?t.bodies=t.bodies.filter((function(t){return t.isStatic})):t.bodies.length=0,t.constraints.length=0,t.composites.length=0,r.setModified(t,!0,!0,!1),t},r.allBodies=function(t){for(var i=[].concat(t.bodies),n=0;n<t.composites.length;n++)i=i.concat(r.allBodies(t.composites[n]));return i},r.allConstraints=function(t){for(var i=[].concat(t.constraints),n=0;n<t.composites.length;n++)i=i.concat(r.allConstraints(t.composites[n]));return i},r.allComposites=function(t){for(var i=[].concat(t.composites),n=0;n<t.composites.length;n++)i=i.concat(r.allComposites(t.composites[n]));return i},r.get=function(t,i,n){var o,a;switch(n){case"body":o=r.allBodies(t);break;case"constraint":o=r.allConstraints(t);break;case"composite":o=r.allComposites(t).concat(t)}return o?0===(a=o.filter((function(t){return t.id.toString()===i.toString()}))).length?null:a[0]:null},r.move=function(t,i,n){return r.remove(t,i),r.add(n,i),t},r.rebase=function(t){for(var i=r.allBodies(t).concat(r.allConstraints(t)).concat(r.allComposites(t)),n=0;n<i.length;n++)i[n].id=a.nextId();return r.setModified(t,!0,!0,!1),t},r.translate=function(t,i,n){for(var o=n?r.allBodies(t):t.bodies,a=0;a<o.length;a++)d.translate(o[a],i);return r.setModified(t,!0,!0,!1),t},r.rotate=function(t,i,n,o){for(var a=Math.cos(i),h=Math.sin(i),f=o?r.allBodies(t):t.bodies,p=0;p<f.length;p++){var T=f[p],b=T.position.x-n.x,S=T.position.y-n.y;d.setPosition(T,{x:n.x+(b*a-S*h),y:n.y+(b*h+S*a)}),d.rotate(T,i)}return r.setModified(t,!0,!0,!1),t},r.scale=function(t,i,n,o,a){for(var h=a?r.allBodies(t):t.bodies,f=0;f<h.length;f++){var p=h[f],T=p.position.x-o.x,b=p.position.y-o.y;d.setPosition(p,{x:o.x+T*i,y:o.y+b*n}),d.scale(p,i,n)}return r.setModified(t,!0,!0,!1),t},r.bounds=function(t){for(var i=r.allBodies(t),n=[],o=0;o<i.length;o+=1){var a=i[o];n.push(a.bounds.min,a.bounds.max)}return h.create(n)}},function(t,i){t.exports=function(t,i,n){return t>=0&&t<n.width&&i>=0&&i<n.height}},function(t,i,n){var r=n(0),o=n(29),a=n(2),h=new r({initialize:function LayerData2(t){void 0===t&&(t={}),this.name=a(t,"name","layer"),this.x=a(t,"x",0),this.y=a(t,"y",0),this.width=a(t,"width",0),this.height=a(t,"height",0),this.tileWidth=a(t,"tileWidth",0),this.tileHeight=a(t,"tileHeight",0),this.baseTileWidth=a(t,"baseTileWidth",this.tileWidth),this.baseTileHeight=a(t,"baseTileHeight",this.tileHeight),this.orientation=a(t,"orientation",o.ORTHOGONAL),this.widthInPixels=a(t,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=a(t,"heightInPixels",this.height*this.baseTileHeight),this.alpha=a(t,"alpha",1),this.visible=a(t,"visible",!0),this.properties=a(t,"properties",[]),this.indexes=a(t,"indexes",[]),this.collideIndexes=a(t,"collideIndexes",[]),this.callbacks=a(t,"callbacks",[]),this.bodies=a(t,"bodies",[]),this.data=a(t,"data",[]),this.tilemapLayer=a(t,"tilemapLayer",null),this.hexSideLength=a(t,"hexSideLength",0)}});t.exports=h},function(t,i,n){var r=n(0),o=n(29),a=n(2),h=new r({initialize:function MapData2(t){void 0===t&&(t={}),this.name=a(t,"name","map"),this.width=a(t,"width",0),this.height=a(t,"height",0),this.infinite=a(t,"infinite",!1),this.tileWidth=a(t,"tileWidth",0),this.tileHeight=a(t,"tileHeight",0),this.widthInPixels=a(t,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=a(t,"heightInPixels",this.height*this.tileHeight),this.format=a(t,"format",null),this.orientation=a(t,"orientation",o.ORTHOGONAL),this.renderOrder=a(t,"renderOrder","right-down"),this.version=a(t,"version","1"),this.properties=a(t,"properties",{}),this.layers=a(t,"layers",[]),this.images=a(t,"images",[]),this.objects=a(t,"objects",{}),this.collision=a(t,"collision",{}),this.tilesets=a(t,"tilesets",[]),this.imageCollections=a(t,"imageCollections",[]),this.tiles=a(t,"tiles",[]),this.hexSideLength=a(t,"hexSideLength",0)}});t.exports=h},function(t,i,n){var r=new(n(0))({initialize:function Tileset2(t,i,n,r,o,a,h,d){(void 0===n||n<=0)&&(n=32),(void 0===r||r<=0)&&(r=32),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h={}),void 0===d&&(d={}),this.name=t,this.firstgid=i,this.tileWidth=n,this.tileHeight=r,this.tileMargin=o,this.tileSpacing=a,this.tileProperties=h,this.tileData=d,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(t){return this.containsTileIndex(t)?this.tileProperties[t-this.firstgid]:null},getTileData:function(t){return this.containsTileIndex(t)?this.tileData[t-this.firstgid]:null},getTileCollisionGroup:function(t){var i=this.getTileData(t);return i&&i.objectgroup?i.objectgroup:null},containsTileIndex:function(t){return t>=this.firstgid&&t<this.firstgid+this.total},getTileTextureCoordinates:function(t){return this.containsTileIndex(t)?this.texCoordinates[t-this.firstgid]:null},setImage:function(t){return this.image=t,this.glTexture=t.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(t,i){return void 0!==t&&(this.tileWidth=t),void 0!==i&&(this.tileHeight=i),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(t,i){return void 0!==t&&(this.tileMargin=t),void 0!==i&&(this.tileSpacing=i),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(t,i){var n=(i-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),r=(t-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);n%1==0&&r%1==0||console.warn("Image tile area not tile size multiple in: "+this.name),n=Math.floor(n),r=Math.floor(r),this.rows=n,this.columns=r,this.total=n*r,this.texCoordinates.length=0;for(var o=this.tileMargin,a=this.tileMargin,h=0;h<this.rows;h++){for(var d=0;d<this.columns;d++)this.texCoordinates.push({x:o,y:a}),o+=this.tileWidth+this.tileSpacing;o=this.tileMargin,a+=this.tileHeight+this.tileSpacing}return this}});t.exports=r},function(t,i){t.exports={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12}},function(t,i){t.exports=function(t,i,n){return void 0===n&&(n=1e-4),Math.abs(t-i)<n}},function(t,i,n){var r=n(0),o=n(11),a=n(15),h=n(1068),d=new r({Extends:a,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.ScrollFactor,o.Size,o.TextureCrop,o.Tint,o.Transform,o.Visible,h],initialize:function Image3(t,i,n,r,o){a.call(this,t,"Image"),this._crop=this.resetCropObject(),this.setTexture(r,o),this.setPosition(i,n),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});t.exports=d},function(t,i){t.exports=function(t,i){return t.hasOwnProperty(i)}},function(t,i,n){var r=n(77);t.exports=function(t,i){var n=r(t);for(var o in i)n.hasOwnProperty(o)||(n[o]=i[o]);return n}},function(t,i,n){var r={};t.exports=r;var o=n(64),a=n(83),h=n(165),d=n(84),f=n(271),p=n(32);r._warming=.4,r._torqueDampen=1,r._minLength=1e-6,r.create=function(t){var i=t;i.bodyA&&!i.pointA&&(i.pointA={x:0,y:0}),i.bodyB&&!i.pointB&&(i.pointB={x:0,y:0});var n=i.bodyA?a.add(i.bodyA.position,i.pointA):i.pointA,r=i.bodyB?a.add(i.bodyB.position,i.pointB):i.pointB,o=a.magnitude(a.sub(n,r));i.length=void 0!==i.length?i.length:o,i.id=i.id||p.nextId(),i.label=i.label||"Constraint",i.type="constraint",i.stiffness=i.stiffness||(i.length>0?1:.7),i.damping=i.damping||0,i.angularStiffness=i.angularStiffness||0,i.angleA=i.bodyA?i.bodyA.angle:i.angleA,i.angleB=i.bodyB?i.bodyB.angle:i.angleB,i.plugin={};var h={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return 0===i.length&&i.stiffness>.1?(h.type="pin",h.anchors=!1):i.stiffness<.9&&(h.type="spring"),i.render=p.extend(h,i.render),i},r.preSolveAll=function(t){for(var i=0;i<t.length;i+=1){var n=t[i],r=n.constraintImpulse;n.isStatic||0===r.x&&0===r.y&&0===r.angle||(n.position.x+=r.x,n.position.y+=r.y,n.angle+=r.angle)}},r.solveAll=function(t,i){for(var n=0;n<t.length;n+=1){var o=t[n],a=!o.bodyA||o.bodyA&&o.bodyA.isStatic,h=!o.bodyB||o.bodyB&&o.bodyB.isStatic;(a||h)&&r.solve(t[n],i)}for(n=0;n<t.length;n+=1)a=!(o=t[n]).bodyA||o.bodyA&&o.bodyA.isStatic,h=!o.bodyB||o.bodyB&&o.bodyB.isStatic,a||h||r.solve(t[n],i)},r.solve=function(t,i){var n=t.bodyA,o=t.bodyB,h=t.pointA,d=t.pointB;if(n||o){n&&!n.isStatic&&(a.rotate(h,n.angle-t.angleA,h),t.angleA=n.angle),o&&!o.isStatic&&(a.rotate(d,o.angle-t.angleB,d),t.angleB=o.angle);var f=h,p=d;if(n&&(f=a.add(n.position,h)),o&&(p=a.add(o.position,d)),f&&p){var T=a.sub(f,p),b=a.magnitude(T);b<r._minLength&&(b=r._minLength);var S,A,P,O,L,D=(b-t.length)/b,I=t.stiffness<1?t.stiffness*i:t.stiffness,F=a.mult(T,D*I),B=(n?n.inverseMass:0)+(o?o.inverseMass:0),N=B+((n?n.inverseInertia:0)+(o?o.inverseInertia:0));if(t.damping){var Y=a.create();P=a.div(T,b),L=a.sub(o&&a.sub(o.position,o.positionPrev)||Y,n&&a.sub(n.position,n.positionPrev)||Y),O=a.dot(P,L)}n&&!n.isStatic&&(A=n.inverseMass/B,n.constraintImpulse.x-=F.x*A,n.constraintImpulse.y-=F.y*A,n.position.x-=F.x*A,n.position.y-=F.y*A,t.damping&&(n.positionPrev.x-=t.damping*P.x*O*A,n.positionPrev.y-=t.damping*P.y*O*A),S=a.cross(h,F)/N*r._torqueDampen*n.inverseInertia*(1-t.angularStiffness),n.constraintImpulse.angle-=S,n.angle-=S),o&&!o.isStatic&&(A=o.inverseMass/B,o.constraintImpulse.x+=F.x*A,o.constraintImpulse.y+=F.y*A,o.position.x+=F.x*A,o.position.y+=F.y*A,t.damping&&(o.positionPrev.x+=t.damping*P.x*O*A,o.positionPrev.y+=t.damping*P.y*O*A),S=a.cross(d,F)/N*r._torqueDampen*o.inverseInertia*(1-t.angularStiffness),o.constraintImpulse.angle+=S,o.angle+=S)}}},r.postSolveAll=function(t){for(var i=0;i<t.length;i++){var n=t[i],p=n.constraintImpulse;if(!(n.isStatic||0===p.x&&0===p.y&&0===p.angle)){h.set(n,!1);for(var T=0;T<n.parts.length;T++){var b=n.parts[T];o.translate(b.vertices,p),T>0&&(b.position.x+=p.x,b.position.y+=p.y),0!==p.angle&&(o.rotate(b.vertices,p.angle,n.position),f.rotate(b.axes,p.angle),T>0&&a.rotateAbout(b.position,p.angle,n.position,b.position)),d.update(b.bounds,b.vertices,n.velocity)}p.angle*=r._warming,p.x*=r._warming,p.y*=r._warming}}},r.pointAWorld=function(t){return{x:(t.bodyA?t.bodyA.position.x:0)+t.pointA.x,y:(t.bodyA?t.bodyA.position.y:0)+t.pointA.y}},r.pointBWorld=function(t){return{x:(t.bodyB?t.bodyB.position.x:0)+t.pointB.x,y:(t.bodyB?t.bodyB.position.y:0)+t.pointB.y}}},function(t,i,n){var r=n(35),o=n(65),a=n(66),h=n(0),d=n(11),f=n(15),p=n(10),T=n(57),b=new h({Extends:f,Mixins:[d.Depth,d.GetBounds,d.Origin,d.Transform,d.ScrollFactor,d.Visible],initialize:function Zone3(t,i,n,o,a){void 0===o&&(o=1),void 0===a&&(a=o),f.call(this,t,"Zone"),this.setPosition(i,n),this.width=o,this.height=a,this.blendMode=r.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,i,n){void 0===n&&(n=!0),this.width=t,this.height=i,this.updateDisplayOrigin();var r=this.input;return n&&r&&!r.customHitArea&&(r.hitArea.width=t,r.hitArea.height=i),this},setDisplaySize:function(t,i){return this.displayWidth=t,this.displayHeight=i,this},setCircleDropZone:function(t){return this.setDropZone(new o(0,0,t),a)},setRectangleDropZone:function(t,i){return this.setDropZone(new p(0,0,t,i),T)},setDropZone:function(t,i){return void 0===t?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(t,i,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(t,i,n){n.addToRenderList(i)},renderWebGL:function(t,i,n){n.addToRenderList(i)}});t.exports=b},function(t,i){t.exports=function(t){return 2*(t.width+t.height)}},function(t,i){t.exports=function(t){for(var i=t.length-1;i>0;i--){var n=Math.floor(Math.random()*(i+1)),r=t[i];t[i]=t[n],t[n]=r}return t}},function(t,i,n){t.exports={ADD_ANIMATION:n(724),ANIMATION_COMPLETE:n(725),ANIMATION_COMPLETE_KEY:n(726),ANIMATION_REPEAT:n(727),ANIMATION_RESTART:n(728),ANIMATION_START:n(729),ANIMATION_STOP:n(730),ANIMATION_UPDATE:n(731),PAUSE_ALL:n(732),REMOVE_ANIMATION:n(733),RESUME_ALL:n(734)}},function(t,i,n){var r=n(0),o=n(11),a=n(36),h=n(9),d=n(37),f=n(10),p=n(25),T=n(187),b=n(3),S=new r({Extends:h,Mixins:[o.Alpha,o.Visible],initialize:function BaseCamera2(t,i,n,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),h.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new f,this.dirty=!0,this._x=t,this._y=i,this._width=n,this._height=r,this._bounds=new f,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new p,this.transparent=!0,this.backgroundColor=T("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new b(n/2,r/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function(t){this.renderList.push(t)},setOrigin:function(t,i){return void 0===t&&(t=.5),void 0===i&&(i=t),this.originX=t,this.originY=i,this},getScroll:function(t,i,n){void 0===n&&(n=new b);var r=.5*this.width,o=.5*this.height;return n.x=t-r,n.y=i-o,this.useBounds&&(n.x=this.clampX(n.x),n.y=this.clampY(n.y)),n},centerOnX:function(t){var i=.5*this.width;return this.midPoint.x=t,this.scrollX=t-i,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(t){var i=.5*this.height;return this.midPoint.y=t,this.scrollY=t-i,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(t,i){return this.centerOnX(t),this.centerOnY(i),this},centerToBounds:function(){if(this.useBounds){var t=this._bounds,i=.5*this.width,n=.5*this.height;this.midPoint.set(t.centerX,t.centerY),this.scrollX=t.centerX-i,this.scrollY=t.centerY-n}return this},centerToSize:function(){return this.scrollX=.5*this.width,this.scrollY=.5*this.height,this},cull:function(t){if(this.disableCull)return t;var i=this.matrix.matrix,n=i[0],r=i[1],o=i[2],a=i[3],h=n*a-r*o;if(!h)return t;var d=i[4],f=i[5],p=this.scrollX,T=this.scrollY,b=this.width,S=this.height,A=this.y,P=A+S,O=this.x,L=O+b,D=this.culledObjects,I=t.length;h=1/h,D.length=0;for(var F=0;F<I;++F){var B=t[F];if(B.hasOwnProperty("width")&&!B.parentContainer){var N=B.width,Y=B.height,X=B.x-p*B.scrollFactorX-N*B.originX,G=B.y-T*B.scrollFactorY-Y*B.originY;(X+N)*n+(G+Y)*o+d>O&&X*n+G*o+d<L&&(X+N)*r+(G+Y)*a+f>A&&X*r+G*a+f<P&&D.push(B)}else D.push(B)}return D},getWorldPoint:function(t,i,n){void 0===n&&(n=new b);var r=this.matrix.matrix,o=r[0],a=r[1],h=r[2],d=r[3],f=r[4],p=r[5],T=o*d-a*h;if(!T)return n.x=t,n.y=i,n;var S=d*(T=1/T),A=-a*T,P=-h*T,O=o*T,L=(h*p-d*f)*T,D=(a*f-o*p)*T,I=Math.cos(this.rotation),F=Math.sin(this.rotation),B=this.zoomX,N=this.zoomY,Y=this.scrollX,X=this.scrollY,G=t+(Y*I-X*F)*B,U=i+(Y*F+X*I)*N;return n.x=G*S+U*P+L,n.y=G*A+U*O+D,n},ignore:function(t){var i=this.id;Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var r=t[n];Array.isArray(r)?this.ignore(r):r.isParent?this.ignore(r.getChildren()):r.cameraFilter|=i}return this},preRender:function(){this.renderList.length=0;var t=this.width,i=this.height,n=.5*t,r=.5*i,o=this.zoomX,a=this.zoomY,h=this.matrix,d=t*this.originX,f=i*this.originY,p=this.scrollX,T=this.scrollY;this.useBounds&&(p=this.clampX(p),T=this.clampY(T)),this.roundPixels&&(d=Math.round(d),f=Math.round(f)),this.scrollX=p,this.scrollY=T;var b=p+n,S=T+r;this.midPoint.set(b,S);var A=t/o,P=i/a;this.worldView.setTo(b-A/2,S-P/2,A,P),h.applyITRS(this.x+d,this.y+f,this.rotation,o,a),h.translate(-d,-f)},clampX:function(t){var i=this._bounds,n=this.displayWidth,r=i.x+(n-this.width)/2,o=Math.max(r,r+i.width-n);return t<r?t=r:t>o&&(t=o),t},clampY:function(t){var i=this._bounds,n=this.displayHeight,r=i.y+(n-this.height)/2,o=Math.max(r,r+i.height-n);return t<r?t=r:t>o&&(t=o),t},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(t){return void 0===t&&(t=0),this.rotation=a(t),this},setBackgroundColor:function(t){return void 0===t&&(t="rgba(0,0,0,0)"),this.backgroundColor=T(t),this.transparent=0===this.backgroundColor.alpha,this},setBounds:function(t,i,n,r,o){return void 0===o&&(o=!1),this._bounds.setTo(t,i,n,r),this.dirty=!0,this.useBounds=!0,o?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(t){void 0===t&&(t=new f);var i=this._bounds;return t.setTo(i.x,i.y,i.width,i.height),t},setName:function(t){return void 0===t&&(t=""),this.name=t,this},setPosition:function(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setRotation:function(t){return void 0===t&&(t=0),this.rotation=t,this},setRoundPixels:function(t){return this.roundPixels=t,this},setScene:function(t){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=t;var i=t.sys;return this.sceneManager=i.game.scene,this.scaleManager=i.scale,this.cameraManager=i.cameras,this.updateSystem(),this},setScroll:function(t,i){return void 0===i&&(i=t),this.scrollX=t,this.scrollY=i,this},setSize:function(t,i){return void 0===i&&(i=t),this.width=t,this.height=i,this},setViewport:function(t,i,n,r){return this.x=t,this.y=i,this.width=n,this.height=r,this},setZoom:function(t,i){return void 0===t&&(t=1),void 0===i&&(i=t),0===t&&(t=.001),0===i&&(i=.001),this.zoomX=t,this.zoomY=i,this},setMask:function(t,i){return void 0===i&&(i=!0),this.mask=t,this._maskCamera=i?this.cameraManager.default:this,this},clearMask:function(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var t={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(t.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),t},update:function(){},updateSystem:function(){if(this.scaleManager){var t=0!==this._x||0!==this._y||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,i=this.sceneManager;t&&!this._customViewport?i.customViewports++:!t&&this._customViewport&&i.customViewports--,this.dirty=!0,this._customViewport=t}},destroy:function(){this.emit(d.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(t){this._x=t,this.updateSystem()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.updateSystem()}},width:{get:function(){return this._width},set:function(t){this._width=t,this.updateSystem()}},height:{get:function(){return this._height},set:function(t){this._height=t,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(t){this._scrollX=t,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(t){this._scrollY=t,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(t){this._zoomX=t,this._zoomY=t,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(t){this._zoomX=t,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(t){this._zoomY=t,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=t,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});t.exports=S},function(t,i,n){var r=n(334),o=n(335),a=n(336),h=n(337),d=n(338),f=n(339),p=n(340),T=n(341),b=n(342),S=n(343),A=n(344),P=n(345);t.exports={Power0:p,Power1:T.Out,Power2:h.Out,Power3:b.Out,Power4:S.Out,Linear:p,Quad:T.Out,Cubic:h.Out,Quart:b.Out,Quint:S.Out,Sine:A.Out,Expo:f.Out,Circ:a.Out,Elastic:d.Out,Back:r.Out,Bounce:o.Out,Stepped:P,"Quad.easeIn":T.In,"Cubic.easeIn":h.In,"Quart.easeIn":b.In,"Quint.easeIn":S.In,"Sine.easeIn":A.In,"Expo.easeIn":f.In,"Circ.easeIn":a.In,"Elastic.easeIn":d.In,"Back.easeIn":r.In,"Bounce.easeIn":o.In,"Quad.easeOut":T.Out,"Cubic.easeOut":h.Out,"Quart.easeOut":b.Out,"Quint.easeOut":S.Out,"Sine.easeOut":A.Out,"Expo.easeOut":f.Out,"Circ.easeOut":a.Out,"Elastic.easeOut":d.Out,"Back.easeOut":r.Out,"Bounce.easeOut":o.Out,"Quad.easeInOut":T.InOut,"Cubic.easeInOut":h.InOut,"Quart.easeInOut":b.InOut,"Quint.easeInOut":S.InOut,"Sine.easeInOut":A.InOut,"Expo.easeInOut":f.InOut,"Circ.easeInOut":a.InOut,"Elastic.easeInOut":d.InOut,"Back.easeInOut":r.InOut,"Bounce.easeInOut":o.InOut}},function(t,i){t.exports=function(t,i,n){return(i-t)*n+t}},function(t,i,n){var r=n(105),o={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};t.exports=function init(){var t=navigator.userAgent;return/Edge\/\d+/.test(t)?o.edge=!0:/Chrome\/(\d+)/.test(t)&&!r.windowsPhone?(o.chrome=!0,o.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(t)?(o.firefox=!0,o.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(t)&&r.iOS?o.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(t)?(o.ie=!0,o.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(t)?o.opera=!0:/Safari/.test(t)&&!r.windowsPhone?o.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(t)&&(o.ie=!0,o.trident=!0,o.tridentVersion=parseInt(RegExp.$1,10),o.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(t)&&(o.silk=!0),o}()},function(t,i){t.exports=function(t,i){return Math.random()*(i-t)+t}},function(t,i){t.exports=function(t,i){return t>0&&0==(t&t-1)&&i>0&&0==(i&i-1)}},function(t,i){t.exports=function(t,i,n,r){return void 0===n&&(n=0),0===i?t:(t-=n,t=i*Math.ceil(t/i),r?(n+t)/i:n+t)}},function(t,i,n){var r=new(n(0))({initialize:function Vector42(t,i,n,r){this.x=0,this.y=0,this.z=0,this.w=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=n||0,this.w=r||0)},clone:function(){return new r(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this.w=t.w||0,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},set:function(t,i,n,r){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=n||0,this.w=r||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this.w+=t.w||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this.w-=t.w||0,this},scale:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function(){var t=this.x,i=this.y,n=this.z,r=this.w;return Math.sqrt(t*t+i*i+n*n+r*r)},lengthSq:function(){var t=this.x,i=this.y,n=this.z,r=this.w;return t*t+i*i+n*n+r*r},normalize:function(){var t=this.x,i=this.y,n=this.z,r=this.w,o=t*t+i*i+n*n+r*r;return o>0&&(o=1/Math.sqrt(o),this.x=t*o,this.y=i*o,this.z=n*o,this.w=r*o),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,i){void 0===i&&(i=0);var n=this.x,r=this.y,o=this.z,a=this.w;return this.x=n+i*(t.x-n),this.y=r+i*(t.y-r),this.z=o+i*(t.z-o),this.w=a+i*(t.w-a),this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this.w*=t.w||1,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this.w/=t.w||1,this},distance:function(t){var i=t.x-this.x,n=t.y-this.y,r=t.z-this.z||0,o=t.w-this.w||0;return Math.sqrt(i*i+n*n+r*r+o*o)},distanceSq:function(t){var i=t.x-this.x,n=t.y-this.y,r=t.z-this.z||0,o=t.w-this.w||0;return i*i+n*n+r*r+o*o},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(t){var i=this.x,n=this.y,r=this.z,o=this.w,a=t.val;return this.x=a[0]*i+a[4]*n+a[8]*r+a[12]*o,this.y=a[1]*i+a[5]*n+a[9]*r+a[13]*o,this.z=a[2]*i+a[6]*n+a[10]*r+a[14]*o,this.w=a[3]*i+a[7]*n+a[11]*r+a[15]*o,this},transformQuat:function(t){var i=this.x,n=this.y,r=this.z,o=t.x,a=t.y,h=t.z,d=t.w,f=d*i+a*r-h*n,p=d*n+h*i-o*r,T=d*r+o*n-a*i,b=-o*i-a*n-h*r;return this.x=f*d+b*-o+p*-h-T*-a,this.y=p*d+b*-a+T*-o-f*-h,this.z=T*d+b*-h+f*-a-p*-o,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});r.prototype.sub=r.prototype.subtract,r.prototype.mul=r.prototype.multiply,r.prototype.div=r.prototype.divide,r.prototype.dist=r.prototype.distance,r.prototype.distSq=r.prototype.distanceSq,r.prototype.len=r.prototype.length,r.prototype.lenSq=r.prototype.lengthSq,t.exports=r},function(t,i,n){var r=n(0),o=n(91),a=new r({initialize:function RenderTarget2(t,i,n,r,o,a,h){void 0===r&&(r=1),void 0===o&&(o=0),void 0===a&&(a=!0),void 0===h&&(h=!1),this.renderer=t,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=r,this.minFilter=o,this.autoClear=a,this.autoResize=!1,this.resize(i,n),h&&this.setAutoResize(!0)},setAutoResize:function(t){return t&&!this.autoResize?(this.renderer.on(o.RESIZE,this.resize,this),this.autoResize=!0):!t&&this.autoResize&&(this.renderer.off(o.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(t,i){var n=t*this.scale,r=i*this.scale;if(n!==this.width||r!==this.height){var o=this.renderer;o.deleteFramebuffer(this.framebuffer),o.deleteTexture(this.texture),t*=this.scale,i*=this.scale,(t=Math.round(t))<=0&&(t=1),(i=Math.round(i))<=0&&(i=1),this.texture=o.createTextureFromSource(null,t,i,this.minFilter),this.framebuffer=o.createFramebuffer(t,i,this.texture,!1),this.width=t,this.height=i}return this},bind:function(t,i,n){if(void 0===t&&(t=!1),t&&this.renderer.flush(),i&&n&&this.resize(i,n),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),t&&this.adjustViewport(),this.autoClear){var r=this.renderer.gl;r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT)}},adjustViewport:function(){var t=this.renderer.gl;t.viewport(0,0,this.width,this.height),t.disable(t.SCISSOR_TEST)},clear:function(){var t=this.renderer,i=t.gl;t.pushFramebuffer(this.framebuffer),i.disable(i.SCISSOR_TEST),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),t.popFramebuffer(),t.resetScissor()},unbind:function(t){void 0===t&&(t=!1);var i=this.renderer;return t&&i.flush(),i.popFramebuffer()},destroy:function(){var t=this.renderer;t.deleteFramebuffer(this.framebuffer),t.deleteTexture(this.texture),t.off(o.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});t.exports=a},function(t,i){t.exports=function(t,i){var n;if(i)"string"==typeof i?n=document.getElementById(i):"object"==typeof i&&1===i.nodeType&&(n=i);else if(t.parentElement||null===i)return t;return n||(n=document.body),n.appendChild(t),t}},function(t,i){t.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175}},function(t,i){t.exports={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9}},function(t,i,n){var r=n(0),o=n(77),a=n(9),h=n(70),d=n(22),f=n(1),p=n(207),T=n(428),b=new r({Extends:a,initialize:function BaseSoundManager2(t){a.call(this),this.game=t,this.jsonCache=t.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,t.events.on(d.BLUR,this.onGameBlur,this),t.events.on(d.FOCUS,this.onGameFocus,this),t.events.on(d.PRE_STEP,this.update,this),t.events.once(d.DESTROY,this.destroy,this)},add:f,addAudioSprite:function(t,i){void 0===i&&(i={});var n=this.add(t,i);for(var r in n.spritemap=this.jsonCache.get(t).spritemap,n.spritemap)if(n.spritemap.hasOwnProperty(r)){var a=o(i),h=n.spritemap[r];a.loop=!!h.hasOwnProperty("loop")&&h.loop,n.addMarker({name:r,start:h.start,duration:h.end-h.start,config:a})}return n},get:function(t){return T(this.sounds,"key",t)},getAll:function(t){return p(this.sounds,"key",t)},play:function(t,i){var n=this.add(t);return n.once(h.COMPLETE,n.destroy,n),i?i.name?(n.addMarker(i),n.play(i.name)):n.play(i):n.play()},playAudioSprite:function(t,i,n){var r=this.addAudioSprite(t);return r.once(h.COMPLETE,r.destroy,r),r.play(i,n)},remove:function(t){var i=this.sounds.indexOf(t);return-1!==i&&(t.destroy(),this.sounds.splice(i,1),!0)},removeAll:function(){this.sounds.forEach((function(t){t.destroy()})),this.sounds.length=0},removeByKey:function(t){for(var i=0,n=this.sounds.length-1;n>=0;n--){var r=this.sounds[n];r.key===t&&(r.destroy(),this.sounds.splice(n,1),i++)}return i},pauseAll:function(){this.forEachActiveSound((function(t){t.pause()})),this.emit(h.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound((function(t){t.resume()})),this.emit(h.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound((function(t){t.stop()})),this.emit(h.STOP_ALL,this)},stopByKey:function(t){var i=0;return this.getAll(t).forEach((function(t){t.stop()&&i++})),i},unlock:f,onBlur:f,onFocus:f,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(t,i){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(h.UNLOCKED,this));for(var n=this.sounds.length-1;n>=0;n--)this.sounds[n].pendingRemove&&this.sounds.splice(n,1);this.sounds.forEach((function(n){n.update(t,i)}))},destroy:function(){this.game.events.off(d.BLUR,this.onGameBlur,this),this.game.events.off(d.FOCUS,this.onGameFocus,this),this.game.events.off(d.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(t,i){var n=this;this.sounds.forEach((function(r,o){r&&!r.pendingRemove&&t.call(i||n,r,o,n.sounds)}))},setRate:function(t){return this.rate=t,this},rate:{get:function(){return this._rate},set:function(t){this._rate=t,this.forEachActiveSound((function(t){t.calculateRate()})),this.emit(h.GLOBAL_RATE,this,t)}},setDetune:function(t){return this.detune=t,this},detune:{get:function(){return this._detune},set:function(t){this._detune=t,this.forEachActiveSound((function(t){t.calculateRate()})),this.emit(h.GLOBAL_DETUNE,this,t)}}});t.exports=b},function(t,i,n){var r=n(0),o=n(9),a=n(70),h=n(17),d=n(1),f=new r({Extends:o,initialize:function BaseSound2(t,i,n){o.call(this),this.manager=t,this.key=i,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=h(this.config,n),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(t){return!(!t||!t.name||"string"!=typeof t.name||(this.markers[t.name]?(console.error("addMarker "+t.name+" already exists in Sound"),1):(t=h(!0,{name:"",start:0,duration:this.totalDuration-(t.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},t),this.markers[t.name]=t,0)))},updateMarker:function(t){return!(!t||!t.name||"string"!=typeof t.name||(this.markers[t.name]?(this.markers[t.name]=h(!0,this.markers[t.name],t),0):(console.warn("Audio Marker: "+t.name+" missing in Sound: "+this.key),1)))},removeMarker:function(t){var i=this.markers[t];return i?(this.markers[t]=null,i):null},play:function(t,i){if(void 0===t&&(t=""),"object"==typeof t&&(i=t,t=""),"string"!=typeof t)return!1;if(t){if(!this.markers[t])return console.warn("Marker: "+t+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[t],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}else this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;return this.resetConfig(),this.currentConfig=h(this.currentConfig,i),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return!(this.isPaused||!this.isPlaying||(this.isPlaying=!1,this.isPaused=!0,0))},resume:function(){return!(!this.isPaused||this.isPlaying||(this.isPlaying=!0,this.isPaused=!1,0))},stop:function(){return!(!this.isPaused&&!this.isPlaying||(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),0))},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:d,calculateRate:function(){var t=this.currentConfig.detune+this.manager.detune,i=Math.pow(1.0005777895065548,t);this.totalRate=this.currentConfig.rate*this.manager.rate*i},destroy:function(){this.pendingRemove||(this.emit(a.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});t.exports=f},function(t,i,n){var r=n(209),o=n(435);t.exports=function(t,i){if(void 0===i&&(i=90),!r(t))return null;if("string"!=typeof i&&(i=(i%360+360)%360),90===i||-270===i||"rotateLeft"===i)(t=o(t)).reverse();else if(-90===i||270===i||"rotateRight"===i)t.reverse(),t=o(t);else if(180===Math.abs(i)||"rotate180"===i){for(var n=0;n<t.length;n++)t[n].reverse();t.reverse()}return t}},function(t,i,n){var r=n(0),o=n(18),a=n(11),h=n(15),d=n(1043),f=n(1044),p=n(212),T=n(10),b=n(1045),S=new r({Extends:h,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Texture,a.Tint,a.Transform,a.Visible,b],initialize:function BitmapText2(t,i,n,r,o,a,f){void 0===o&&(o=""),void 0===f&&(f=0),h.call(this,t,"BitmapText"),this.font=r;var p=this.scene.sys.cache.bitmapFont.get(r);p||console.warn("Invalid BitmapText key: "+r),this.fontData=p.data,this._text="",this._fontSize=a||this.fontData.size,this._letterSpacing=0,this._align=f,this._bounds=d(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=p.fromAtlas,this.setTexture(p.texture,p.frame),this.setPosition(i,n),this.setOrigin(0,0),this.initPipeline(),this.setText(o)},setLeftAlign:function(){return this._align=S.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=S.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=S.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(t){return this._fontSize=t,this._dirty=!0,this},setLetterSpacing:function(t){return void 0===t&&(t=0),this._letterSpacing=t,this._dirty=!0,this},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this.text&&(this._text=t.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(t,i,n,r){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=.5),this.dropShadowX=t,this.dropShadowY=i,this.dropShadowColor=n,this.dropShadowAlpha=r,this},setCharacterTint:function(t,i,n,r,a,h,d){void 0===t&&(t=0),void 0===i&&(i=1),void 0===n&&(n=!1),void 0===r&&(r=-1),void 0===a&&(a=r,h=r,d=r);var f=this.text.length;-1===i&&(i=f),t<0&&(t=f+t),t=o(t,0,f-1);for(var p=o(t+i,t,f),T=this.charColors,b=t;b<p;b++){var S=T[b];if(-1===r)T[b]=null;else{var A=n?1:0;S?(S.tintEffect=A,S.tintTL=r,S.tintTR=a,S.tintBL=h,S.tintBR=d):T[b]={tintEffect:A,tintTL:r,tintTR:a,tintBL:h,tintBR:d}}}return this},setWordTint:function(t,i,n,r,o,a,h){void 0===i&&(i=1);for(var d=this.getTextBounds().words,f="number"==typeof t,p=0,T=0;T<d.length;T++){var b=d[T];if((f&&T===t||!f&&b.word===t)&&(this.setCharacterTint(b.i,b.word.length,n,r,o,a,h),++p===i))return this}return this},getTextBounds:function(t){var i=this._bounds;return(this._dirty||t||this.scaleX!==i.scaleX||this.scaleY!==i.scaleY)&&(d(this,t,!0,i),this._dirty=!1),i},getCharacterAt:function(t,i,n){for(var r=this.getLocalPoint(t,i,null,n),o=this.getTextBounds().characters,a=new T,h=0;h<o.length;h++){var d=o[h];if(a.setTo(d.x,d.t,d.r-d.x,d.b),a.contains(r.x,r.y))return d}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(t,i,n){if(void 0===i&&(i=this._fontSize),void 0===n&&(n=this._align),t!==this.font){var r=this.scene.sys.cache.bitmapFont.get(t);r&&(this.font=t,this.fontData=r.data,this._fontSize=i,this._align=n,this.fromAtlas=!0===r.fromAtlas,this.setTexture(r.texture,r.frame),d(this,!1,!0,this._bounds))}return this},setMaxWidth:function(t,i){return this._maxWidth=t,this._dirty=!0,void 0!==i&&(this.wordWrapCharCode=i),this},align:{set:function(t){this._align=t,this._dirty=!0},get:function(){return this._align}},text:{set:function(t){this.setText(t)},get:function(){return this._text}},fontSize:{set:function(t){this._fontSize=t,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(t){this._letterSpacing=t,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(t){this._maxWidth=t,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var t=a.ToJSON(this),i={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return t.data=i,t},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});S.ALIGN_LEFT=0,S.ALIGN_CENTER=1,S.ALIGN_RIGHT=2,S.ParseFromAtlas=f,S.ParseXMLBitmapFont=p,t.exports=S},function(t,i,n){var r=new(n(0))({initialize:function Set2(t){if(this.entries=[],Array.isArray(t))for(var i=0;i<t.length;i++)this.set(t[i])},set:function(t){return-1===this.entries.indexOf(t)&&this.entries.push(t),this},get:function(t,i){for(var n=0;n<this.entries.length;n++){var r=this.entries[n];if(r[t]===i)return r}},getArray:function(){return this.entries.slice(0)},delete:function(t){var i=this.entries.indexOf(t);return i>-1&&this.entries.splice(i,1),this},dump:function(){console.group("Set");for(var t=0;t<this.entries.length;t++){var i=this.entries[t];console.log(i)}console.groupEnd()},each:function(t,i){var n,r=this.entries.slice(),o=r.length;if(i)for(n=0;n<o&&!1!==t.call(i,r[n],n);n++);else for(n=0;n<o&&!1!==t(r[n],n);n++);return this},iterate:function(t,i){var n,r=this.entries.length;if(i)for(n=0;n<r&&!1!==t.call(i,this.entries[n],n);n++);else for(n=0;n<r&&!1!==t(this.entries[n],n);n++);return this},iterateLocal:function(t){var i,n=[];for(i=1;i<arguments.length;i++)n.push(arguments[i]);var r=this.entries.length;for(i=0;i<r;i++){var o=this.entries[i];o[t].apply(o,n)}return this},clear:function(){return this.entries.length=0,this},contains:function(t){return this.entries.indexOf(t)>-1},union:function(t){var i=new r;return t.entries.forEach((function(t){i.set(t)})),this.entries.forEach((function(t){i.set(t)})),i},intersect:function(t){var i=new r;return this.entries.forEach((function(n){t.contains(n)&&i.set(n)})),i},difference:function(t){var i=new r;return this.entries.forEach((function(n){t.contains(n)||i.set(n)})),i},size:{get:function(){return this.entries.length},set:function(t){return t<this.entries.length?this.entries.length=t:this.entries.length}}});t.exports=r},function(t,i,n){var r=n(0),o=n(11),a=n(15),h=n(189),d=n(92),f=n(1182),p=new r({Extends:a,Mixins:[o.AlphaSingle,o.BlendMode,o.Depth,o.GetBounds,o.Mask,o.Pipeline,o.ScrollFactor,o.Transform,o.Visible,f],initialize:function PointLight2(t,i,n,r,o,f,p){void 0===r&&(r=16777215),void 0===o&&(o=128),void 0===f&&(f=1),void 0===p&&(p=.1),a.call(this,t,"PointLight"),this.initPipeline(d.POINTLIGHT_PIPELINE),this.setPosition(i,n),this.color=h(r),this.intensity=f,this.attenuation=p,this.width=2*o,this.height=2*o,this._radius=o},radius:{get:function(){return this._radius},set:function(t){this._radius=t,this.width=2*t,this.height=2*t}},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});t.exports=p},function(t,i){t.exports=function(t,i){var n=i.width/2,r=i.height/2,o=Math.abs(t.x-i.x-n),a=Math.abs(t.y-i.y-r),h=n+t.radius,d=r+t.radius;if(o>h||a>d)return!1;if(o<=n||a<=r)return!0;var f=o-n,p=a-r;return f*f+p*p<=t.radius*t.radius}},function(t,i){t.exports=function(t,i){return!(t.width<=0||t.height<=0||i.width<=0||i.height<=0||t.right<i.x||t.bottom<i.y||t.x>i.right||t.y>i.bottom)}},function(t,i,n){var r=n(6),o={},a={register:function(t,i,n,r,a){o[t]={plugin:i,mapping:n,settingsKey:r,configKey:a}},getPlugin:function(t){return o[t]},install:function(t){var i=t.scene.sys,n=i.settings.input,a=i.game.config;for(var h in o){var d=o[h].plugin,f=o[h].mapping,p=o[h].settingsKey,T=o[h].configKey;r(n,p,a[T])&&(t[f]=new d(t))}},remove:function(t){o.hasOwnProperty(t)&&delete o[t]}};t.exports=a},function(t,i,n){t.exports={ANY_KEY_DOWN:n(1323),ANY_KEY_UP:n(1324),COMBO_MATCH:n(1325),DOWN:n(1326),KEY_DOWN:n(1327),KEY_UP:n(1328),UP:n(1329)}},function(t,i){t.exports=function(t,i){return!!t.url&&(t.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?t.url:i+t.url)}},function(t,i){t.exports=function(t,i,n,r,o,a){return void 0===t&&(t=""),void 0===i&&(i=!0),void 0===n&&(n=""),void 0===r&&(r=""),void 0===o&&(o=0),void 0===a&&(a=!1),{responseType:t,async:i,user:n,password:r,timeout:o,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:a}}},function(t,i,n){var r=n(0),o=n(243),a=n(73),h=new r({Extends:a,Mixins:[o.Acceleration,o.Angular,o.Bounce,o.Debug,o.Drag,o.Enable,o.Friction,o.Gravity,o.Immovable,o.Mass,o.Pushable,o.Size,o.Velocity],initialize:function ArcadeSprite2(t,i,n,r,o){a.call(this,t,i,n,r,o),this.body=null}});t.exports=h},function(t,i,n){var r=n(119);t.exports=function(t,i,n,o){if(void 0===n&&(n=!1),r(t,i,o)){var a=o.data[i][t]||null;return a?-1===a.index?n?a:null:a:null}return null}},function(t,i){t.exports=function(t,i,n,r){var o,a,h,d=t.data,f=t.width,p=t.height,T=t.tilemapLayer,b=Math.max(0,i.left),S=Math.min(f,i.right),A=Math.max(0,i.top),P=Math.min(p,i.bottom);if(0===n)for(a=A;a<P;a++)for(o=b;d[a]&&o<S;o++)(h=d[a][o])&&-1!==h.index&&h.visible&&0!==h.alpha&&r.push(h);else if(1===n)for(a=A;a<P;a++)for(o=S;d[a]&&o>=b;o--)(h=d[a][o])&&-1!==h.index&&h.visible&&0!==h.alpha&&r.push(h);else if(2===n)for(a=P;a>=A;a--)for(o=b;d[a]&&o<S;o++)(h=d[a][o])&&-1!==h.index&&h.visible&&0!==h.alpha&&r.push(h);else if(3===n)for(a=P;a>=A;a--)for(o=S;d[a]&&o>=b;o--)(h=d[a][o])&&-1!==h.index&&h.visible&&0!==h.alpha&&r.push(h);return T.tilesDrawn=r.length,T.tilesTotal=f*p,r}},function(t,i){t.exports=function(t,i,n){var r=n.collideIndexes.indexOf(t);i&&-1===r?n.collideIndexes.push(t):i||-1===r||n.collideIndexes.splice(r,1)}},function(t,i,n){var r=n(2);t.exports=function(t,i,n){if(!i)return{i:0,layers:t.layers,name:"",opacity:1,visible:!0,x:0,y:0};var o=i.x+r(i,"startx",0)*t.tilewidth+r(i,"offsetx",0),a=i.y+r(i,"starty",0)*t.tileheight+r(i,"offsety",0);return{i:0,layers:i.layers,name:n.name+i.name+"/",opacity:n.opacity*i.opacity,visible:n.visible&&i.visible,x:n.x+o,y:n.y+a}}},function(t,i){t.exports=function(t,i,n){return t.hasOwnProperty(i)?"function"==typeof t[i]?function(n,r,o,a,h,d){return t[i](n,r,o,a,h,d)}:function(){return t[i]}:"function"==typeof n?n:function(){return n}}},function(t,i,n){var r=n(265),o=n(13),a=n(99),h=n(80),d=n(162),f=n(583),p=n(263),T=n(6),b=n(264),S=n(266),A=n(268);t.exports=function(t,i,n){void 0===n&&(n=r);for(var P=n.targets?n.targets:p(i),O=f(i),L=d(i,"delay",n.delay),D=d(i,"duration",n.duration),I=T(i,"easeParams",n.easeParams),F=h(T(i,"ease",n.ease),I),B=d(i,"hold",n.hold),N=d(i,"repeat",n.repeat),Y=d(i,"repeatDelay",n.repeatDelay),X=a(i,"yoyo",n.yoyo),G=a(i,"flipX",n.flipX),U=a(i,"flipY",n.flipY),V=[],z=0;z<O.length;z++)for(var W=O[z].key,H=O[z].value,q=0;q<P.length;q++){var Z=b(W,H),K=A(P[q],q,W,Z.getEnd,Z.getStart,Z.getActive,h(T(H,"ease",F),T(H,"easeParams",I)),d(H,"delay",L),d(H,"duration",D),a(H,"yoyo",X),d(H,"hold",B),d(H,"repeat",N),d(H,"repeatDelay",Y),a(H,"flipX",G),a(H,"flipY",U));V.push(K)}var J=new S(t,V,P);J.offset=o(i,"offset",null),J.completeDelay=o(i,"completeDelay",0),J.loop=Math.round(o(i,"loop",0)),J.loopDelay=Math.round(o(i,"loopDelay",0)),J.paused=a(i,"paused",!1),J.useFrames=a(i,"useFrames",!1);for(var Q=T(i,"callbackScope",J),$=[J,null],tt=S.TYPES,et=0;et<tt.length;et++){var it=tt[et],nt=T(i,it,!1);if(nt){var st=T(i,it+"Scope",Q),rt=T(i,it+"Params",[]);J.setCallback(it,nt,$.concat(rt),st)}}return J}},function(t,i,n){var r=n(0),o=n(102),a=n(2),h=n(132),d=n(185),f=new r({initialize:function AnimationState2(t){this.parent=t,this.animationManager=t.scene.sys.anims,this.animationManager.on(h.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(t){var i=this.parent;if(void 0===t)return this.nextAnimsQueue.length=0,this.nextAnim=null,i;Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var r=t[n];null===this.nextAnim?this.nextAnim=r:this.nextAnimsQueue.push(r)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(t){this.isPlaying&&this.stop();var i=this.animationManager,n="string"==typeof t?t:a(t,"key",null),r=this.exists(n)?this.get(n):i.get(n);if(r){this.currentAnim=r;var o=r.getTotalFrames(),h=a(t,"frameRate",r.frameRate),d=a(t,"duration",r.duration);r.calculateDuration(this,o,d,h),this.delay=a(t,"delay",r.delay),this.repeat=a(t,"repeat",r.repeat),this.repeatDelay=a(t,"repeatDelay",r.repeatDelay),this.yoyo=a(t,"yoyo",r.yoyo),this.showOnStart=a(t,"showOnStart",r.showOnStart),this.hideOnComplete=a(t,"hideOnComplete",r.hideOnComplete),this.skipMissedFrames=a(t,"skipMissedFrames",r.skipMissedFrames),this.timeScale=a(t,"timeScale",this.timeScale);var f=a(t,"startFrame",0);f>r.getTotalFrames()&&(f=0);var p=r.frames[f];0!==f||this.forward||(p=r.getLastFrame()),this.currentFrame=p}else console.warn("Missing animation: "+n);return this.parent},pause:function(t){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),void 0!==t&&this.setCurrentFrame(t),this.parent},resume:function(t){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),void 0!==t&&this.setCurrentFrame(t),this.parent},playAfterDelay:function(t,i){if(this.isPlaying){var n=this.nextAnim,r=this.nextAnimsQueue;n&&r.unshift(n),this.nextAnim=t,this._pendingStop=1,this._pendingStopValue=i}else this.delayCounter=i,this.play(t,!0);return this.parent},playAfterRepeat:function(t,i){if(void 0===i&&(i=1),this.isPlaying){var n=this.nextAnim,r=this.nextAnimsQueue;n&&r.unshift(n),-1!==this.repeatCounter&&i>this.repeatCounter&&(i=this.repeatCounter),this.nextAnim=t,this._pendingStop=2,this._pendingStopValue=i}else this.play(t);return this.parent},play:function(t,i){void 0===i&&(i=!1);var n=this.currentAnim,r=this.parent,o="string"==typeof t?t:t.key;if(i&&this.isPlaying&&n.key===o)return r;if(n&&this.isPlaying){var a=this.animationManager.getMix(n.key,t);if(a>0)return this.playAfterDelay(t,a)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(t)},playReverse:function(t,i){void 0===i&&(i=!1);var n="string"==typeof t?t:t.key;return i&&this.isPlaying&&this.currentAnim.key===n?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(t))},startAnimation:function(t){this.load(t);var i=this.currentAnim,n=this.parent;return i?(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat,i.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,0===this.delayCounter&&this.handleStart(),n):n},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(h.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(h.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(h.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(h.ANIMATION_COMPLETE,h.ANIMATION_COMPLETE_KEY)},emitEvents:function(t,i){var n=this.currentAnim,r=this.currentFrame,o=this.parent,a=r.textureFrame;o.emit(t,n,r,o,a),i&&o.emit(i+n.key,n,r,o,a)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var t=this.currentFrame;if(!t)return 0;var i=t.progress;return this.inReverse&&(i*=-1),i},setProgress:function(t){return this.forward||(t=1-t),this.setCurrentFrame(this.currentAnim.getFrameByProgress(t)),this.parent},setRepeat:function(t){return this.repeatCounter=-1===t?Number.MAX_VALUE:t,this.parent},globalRemove:function(t,i){void 0===i&&(i=this.currentAnim),this.isPlaying&&i.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var n=this.currentAnim,r=this.parent;return n?(i&&(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat),n.getFirstTick(this),this.emitEvents(h.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!t,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(n.frames[0]),this.parent):r},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var t=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(t)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var t=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(t)}return this.parent},stopAfterDelay:function(t){return this._pendingStop=1,this._pendingStopValue=t,this.parent},stopAfterRepeat:function(t){return void 0===t&&(t=1),-1!==this.repeatCounter&&t>this.repeatCounter&&(t=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=t,this.parent},stopOnFrame:function(t){return this._pendingStop=3,this._pendingStopValue=t,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(t,i){var n=this.currentAnim;if(this.isPlaying&&n&&!n.paused){if(this.accumulator+=i*this.timeScale,1===this._pendingStop&&(this._pendingStopValue-=i,this._pendingStopValue<=0))return this.stop();if(this.hasStarted){if(this.accumulator>=this.nextTick&&(this.forward?n.nextFrame(this):n.previousFrame(this),this.isPlaying&&0===this._pendingStop&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var r=0;do{this.forward?n.nextFrame(this):n.previousFrame(this),r++}while(this.isPlaying&&this.accumulator>this.nextTick&&r<60)}}else this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart())}},setCurrentFrame:function(t){var i=this.parent;return this.currentFrame=t,i.texture=t.frame.texture,i.frame=t.frame,i.isCropped&&i.frame.updateCropUVs(i._crop,i.flipX,i.flipY),t.setAlpha&&(i.alpha=t.alpha),i.setSizeToFrame(),i._originComponent&&(t.frame.customPivot?i.setOrigin(t.frame.pivotX,t.frame.pivotY):i.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(h.ANIMATION_UPDATE),3===this._pendingStop&&this._pendingStopValue===t&&this.stop()),i},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(t){return this.anims?this.anims.get(t):null},exists:function(t){return!!this.anims&&this.anims.has(t)},create:function(t){var i=t.key,n=!1;return i&&((n=this.get(i))||(n=new d(this,i,t),this.anims||(this.anims=new o),this.anims.set(i,n))),n},generateFrameNames:function(t,i){return this.animationManager.generateFrameNames(t,i)},generateFrameNumbers:function(t,i){return this.animationManager.generateFrameNumbers(t,i)},remove:function(t){var i=this.get(t);return i&&(this.currentAnim===i&&this.stop(),this.anims.delete(t)),i},destroy:function(){this.animationManager.off(h.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});t.exports=f},function(t,i,n){var r={};t.exports=r;var o=n(166);r._motionWakeThreshold=.18,r._motionSleepThreshold=.08,r._minBias=.9,r.update=function(t,i){for(var n=i*i*i,o=0;o<t.length;o++){var a=t[o],h=a.speed*a.speed+a.angularSpeed*a.angularSpeed;if(0===a.force.x&&0===a.force.y){var d=Math.min(a.motion,h),f=Math.max(a.motion,h);a.motion=r._minBias*d+(1-r._minBias)*f,a.sleepThreshold>0&&a.motion<r._motionSleepThreshold*n?(a.sleepCounter+=1,a.sleepCounter>=a.sleepThreshold&&r.set(a,!0)):a.sleepCounter>0&&(a.sleepCounter-=1)}else r.set(a,!1)}},r.afterCollisions=function(t,i){for(var n=i*i*i,o=0;o<t.length;o++){var a=t[o];if(a.isActive){var h=a.collision,d=h.bodyA.parent,f=h.bodyB.parent;if(!(d.isSleeping&&f.isSleeping||d.isStatic||f.isStatic)&&(d.isSleeping||f.isSleeping)){var p=d.isSleeping&&!d.isStatic?d:f,T=p===d?f:d;!p.isStatic&&T.motion>r._motionWakeThreshold*n&&r.set(p,!1)}}}},r.set=function(t,i){var n=t.isSleeping;i?(t.isSleeping=!0,t.sleepCounter=t.sleepThreshold,t.positionImpulse.x=0,t.positionImpulse.y=0,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.anglePrev=t.angle,t.speed=0,t.angularSpeed=0,t.motion=0,n||o.trigger(t,"sleepStart")):(t.isSleeping=!1,t.sleepCounter=0,n&&o.trigger(t,"sleepEnd"))}},function(t,i,n){var r={};t.exports=r;var o=n(32);r.on=function(t,i,n){for(var r,o=i.split(" "),a=0;a<o.length;a++)r=o[a],t.events=t.events||{},t.events[r]=t.events[r]||[],t.events[r].push(n);return n},r.off=function(t,i,n){if(i){"function"==typeof i&&(n=i,i=o.keys(t.events).join(" "));for(var r=i.split(" "),a=0;a<r.length;a++){var h=t.events[r[a]],d=[];if(n&&h)for(var f=0;f<h.length;f++)h[f]!==n&&d.push(h[f]);t.events[r[a]]=d}}else t.events={}},r.trigger=function(t,i,n){var r,a,h,d,f=t.events;if(f&&o.keys(f).length>0){n||(n={}),r=i.split(" ");for(var p=0;p<r.length;p++)if(h=f[a=r[p]]){(d=o.clone(n,!1)).name=a,d.source=t;for(var T=0;T<h.length;T++)h[T].apply(t,[d])}}}},function(t,i,n){var r=n(175),o=n(92),a=n(74),h={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(t){void 0===t&&(t=o.MULTI_PIPELINE);var i=this.scene.sys.renderer;if(!i)return!1;var n=i.pipelines;if(this.postPipelines=[],this.pipelineData={},n){var r=n.get(t);if(r)return this.defaultPipeline=r,this.pipeline=r,!0}return!1},setPipeline:function(t,i,n){var o=this.scene.sys.renderer;if(!o)return this;var a=o.pipelines;if(a){var h=a.get(t);h&&(this.pipeline=h),i&&(this.pipelineData=n?r(i):i)}return this},setPostPipeline:function(t,i,n){var o=this.scene.sys.renderer;if(!o)return this;var a=o.pipelines;if(a){Array.isArray(t)||(t=[t]);for(var h=0;h<t.length;h++){var d=a.getPostPipeline(t[h],this);d&&this.postPipelines.push(d)}i&&(this.pipelineData=n?r(i):i)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(t,i){var n=this.pipelineData;return void 0===i?delete n[t]:n[t]=i,this},getPostPipeline:function(t){for(var i=this.postPipelines,n=[],r=0;r<i.length;r++){var o=i[r];("string"==typeof t&&o.name===t||o instanceof t)&&n.push(o)}return 1===n.length?n[0]:n},resetPipeline:function(t,i){return void 0===t&&(t=!1),void 0===i&&(i=!1),this.pipeline=this.defaultPipeline,t&&(this.postPipelines=[],this.hasPostPipeline=!1),i&&(this.pipelineData={}),null!==this.pipeline},resetPostPipeline:function(t){void 0===t&&(t=!1);for(var i=this.postPipelines,n=0;n<i.length;n++)i[n].destroy();this.postPipelines=[],this.hasPostPipeline=!1,t&&(this.pipelineData={})},removePostPipeline:function(t){for(var i=this.postPipelines,n=i.length-1;n>=0;n--){var r=i[n];("string"==typeof t&&r.name===t||"string"!=typeof t&&r instanceof t)&&(r.destroy(),a(i,n))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};t.exports=h},function(t,i){t.exports={DEFAULT:0,LINEAR:0,NEAREST:1}},function(t,i,n){var r=n(4);t.exports=function(t,i,n){return void 0===n&&(n=new r),n.x=t.x+t.radius*Math.cos(i),n.y=t.y+t.radius*Math.sin(i),n}},function(t,i,n){var r=n(4);t.exports=function(t,i){void 0===i&&(i=new r);var n=2*Math.PI*Math.random(),o=Math.random()+Math.random(),a=o>1?2-o:o,h=a*Math.cos(n),d=a*Math.sin(n);return i.x=t.x+h*t.radius,i.y=t.y+d*t.radius,i}},function(t,i,n){var r=n(130),o=n(4);t.exports=function(t,i,n){if(void 0===n&&(n=new o),i<=0||i>=1)return n.x=t.x,n.y=t.y,n;var a=r(t)*i;return i>.5?(a-=t.width+t.height)<=t.width?(n.x=t.right-a,n.y=t.bottom):(n.x=t.x,n.y=t.bottom-(a-t.width)):a<=t.width?(n.x=t.x+a,n.y=t.y):(n.x=t.right,n.y=t.y+(a-t.width)),n}},function(t,i,n){var r=n(67),o=n(4);t.exports=function(t,i,n,a){void 0===a&&(a=[]),!i&&n>0&&(i=r(t)/n);for(var h=t.x1,d=t.y1,f=t.x2,p=t.y2,T=0;T<i;T++){var b=T/i,S=h+(f-h)*b,A=d+(p-d)*b;a.push(new o(S,A))}return a}},function(t,i,n){var r=n(4);t.exports=function(t,i){void 0===i&&(i=new r);var n=Math.random();return i.x=t.x1+n*(t.x2-t.x1),i.y=t.y1+n*(t.y2-t.y1),i}},function(t,i,n){var r=n(4);t.exports=function(t,i){return void 0===i&&(i=new r),i.x=t.x+Math.random()*t.width,i.y=t.y+Math.random()*t.height,i}},function(t,i){var DeepCopy=function(t){var i,n,r;if("object"!=typeof t||null===t)return t;for(r in i=Array.isArray(t)?[]:{},t)n=t[r],i[r]=DeepCopy(n);return i};t.exports=DeepCopy},function(t,i){t.exports=function(t){var i={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(i.textureKey=t.texture.key,i.frameKey=t.frame.name),i}},function(t,i,n){var r=n(3);t.exports=function(t,i,n,o,a,h,d,f){void 0===f&&(f=new r);var p=Math.sin(a),T=Math.cos(a),b=T*h,S=p*h,A=-p*d,P=T*d,O=1/(b*P+A*-S);return f.x=P*O*t+-A*O*i+(o*A-n*P)*O,f.y=b*O*i+-S*O*t+(-o*b+n*S)*O,f}},function(t,i){t.exports=function(t,i){void 0===i&&(i=1);for(var n=null,r=0;r<i;r++)n=t.shift(),t.push(n);return n}},function(t,i){t.exports=function(t,i){void 0===i&&(i=1);for(var n=null,r=0;r<i;r++)n=t.pop(),t.unshift(n);return n}},function(t,i,n){var r=n(4);t.exports=function(t,i){void 0===i&&(i=new r);var n=Math.random()*Math.PI*2,o=Math.sqrt(Math.random());return i.x=t.x+o*Math.cos(n)*t.width/2,i.y=t.y+o*Math.sin(n)*t.height/2,i}},function(t,i,n){var r=n(4);t.exports=function(t,i){void 0===i&&(i=new r);var n=t.x2-t.x1,o=t.y2-t.y1,a=t.x3-t.x1,h=t.y3-t.y1,d=Math.random(),f=Math.random();return d+f>=1&&(d=1-d,f=1-f),i.x=t.x1+(n*d+a*f),i.y=t.y1+(o*d+h*f),i}},function(t,i){t.exports=function(t,i,n,r,o){var a=r+Math.atan2(t.y-n,t.x-i);return t.x=i+o*Math.cos(a),t.y=n+o*Math.sin(a),t}},function(t,i){t.exports=function(t,i,n){return(t=Math.max(0,Math.min(1,(t-i)/(n-i))))*t*t*(t*(6*t-15)+10)}},function(t,i){t.exports=function(t,i,n){return t<=i?0:t>=n?1:(t=(t-i)/(n-i))*t*(3-2*t)}},function(t,i,n){var r=n(18),o=n(0),a=n(132),h=n(318),d=n(319),f=n(6),p=n(320),T=new o({initialize:function Animation2(t,i,n){this.manager=t,this.key=i,this.type="frame",this.frames=this.getFrames(t.textureManager,f(n,"frames",[]),f(n,"defaultTextureKey",null),f(n,"sortFrames",!0)),this.frameRate=f(n,"frameRate",null),this.duration=f(n,"duration",null),this.msPerFrame,this.skipMissedFrames=f(n,"skipMissedFrames",!0),this.delay=f(n,"delay",0),this.repeat=f(n,"repeat",0),this.repeatDelay=f(n,"repeatDelay",0),this.yoyo=f(n,"yoyo",!1),this.showOnStart=f(n,"showOnStart",!1),this.hideOnComplete=f(n,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(a.PAUSE_ALL,this.pause,this),this.manager.on(a.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(t,i,n,r){null===n&&null===r?(t.frameRate=24,t.duration=24/i*1e3):n&&null===r?(t.duration=n,t.frameRate=i/(n/1e3)):(t.frameRate=r,t.duration=i/r*1e3),t.msPerFrame=1e3/t.frameRate},addFrame:function(t){return this.addFrameAt(this.frames.length,t)},addFrameAt:function(t,i){var n=this.getFrames(this.manager.textureManager,i);if(n.length>0){if(0===t)this.frames=n.concat(this.frames);else if(t===this.frames.length)this.frames=this.frames.concat(n);else{var r=this.frames.slice(0,t),o=this.frames.slice(t);this.frames=r.concat(n,o)}this.updateFrameSequence()}return this},checkFrame:function(t){return t>=0&&t<this.frames.length},getFirstTick:function(t){t.accumulator=0,t.nextTick=t.msPerFrame+t.currentFrame.duration},getFrameAt:function(t){return this.frames[t]},getFrames:function(t,i,n,r){void 0===r&&(r=!0);var o,a,h,T,b=[],S=1;if("string"==typeof i){T=i;var A=t.get(T).getFrameNames();r&&p(A),i=[],A.forEach((function(t){i.push({key:T,frame:t})}))}if(!Array.isArray(i)||0===i.length)return b;for(h=0;h<i.length;h++){var P=i[h],O=f(P,"key",n);if(O){var L=f(P,"frame",0),D=t.getFrame(O,L);(a=new d(O,L,S,D)).duration=f(P,"duration",0),a.isFirst=!o,o&&(o.nextFrame=a,a.prevFrame=o),b.push(a),o=a,S++}}if(b.length>0){a.isLast=!0,a.nextFrame=b[0],b[0].prevFrame=a;var I=1/(b.length-1);for(h=0;h<b.length;h++)b[h].progress=h*I}return b},getNextTick:function(t){t.accumulator-=t.nextTick,t.nextTick=t.msPerFrame+t.currentFrame.duration},getFrameByProgress:function(t){return t=r(t,0,1),h(t,this.frames,"progress")},nextFrame:function(t){var i=t.currentFrame;i.isLast?t.yoyo?this.handleYoyoFrame(t,!1):t.repeatCounter>0?t.inReverse&&t.forward?t.forward=!1:this.repeatAnimation(t):t.complete():this.updateAndGetNextTick(t,i.nextFrame)},handleYoyoFrame:function(t,i){if(i||(i=!1),t.inReverse===!i&&t.repeatCounter>0)return(0===t.repeatDelay||t.pendingRepeat)&&(t.forward=i),void this.repeatAnimation(t);if(t.inReverse===i||0!==t.repeatCounter){t.forward=i;var n=i?t.currentFrame.nextFrame:t.currentFrame.prevFrame;this.updateAndGetNextTick(t,n)}else t.complete()},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(t){var i=t.currentFrame;i.isFirst?t.yoyo?this.handleYoyoFrame(t,!0):t.repeatCounter>0?(t.inReverse&&!t.forward||(t.forward=!0),this.repeatAnimation(t)):t.complete():this.updateAndGetNextTick(t,i.prevFrame)},updateAndGetNextTick:function(t,i){t.setCurrentFrame(i),this.getNextTick(t)},removeFrame:function(t){var i=this.frames.indexOf(t);return-1!==i&&this.removeFrameAt(i),this},removeFrameAt:function(t){return this.frames.splice(t,1),this.updateFrameSequence(),this},repeatAnimation:function(t){if(2===t._pendingStop){if(0===t._pendingStopValue)return t.stop();t._pendingStopValue--}t.repeatDelay>0&&!t.pendingRepeat?(t.pendingRepeat=!0,t.accumulator-=t.nextTick,t.nextTick+=t.repeatDelay):(t.repeatCounter--,t.forward?t.setCurrentFrame(t.currentFrame.nextFrame):t.setCurrentFrame(t.currentFrame.prevFrame),t.isPlaying&&(this.getNextTick(t),t.handleRepeat()))},toJSON:function(){var t={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach((function(i){t.frames.push(i.toJSON())})),t},updateFrameSequence:function(){for(var t,i=this.frames.length,n=1/(i-1),r=0;r<i;r++)(t=this.frames[r]).index=r+1,t.isFirst=!1,t.isLast=!1,t.progress=r*n,0===r?(t.isFirst=!0,1===i?(t.isLast=!0,t.nextFrame=t,t.prevFrame=t):(t.isLast=!1,t.prevFrame=this.frames[i-1],t.nextFrame=this.frames[r+1])):r===i-1&&i>1?(t.isLast=!0,t.prevFrame=this.frames[i-2],t.nextFrame=this.frames[0]):i>1&&(t.prevFrame=this.frames[r-1],t.nextFrame=this.frames[r+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(a.PAUSE_ALL,this.pause,this),this.manager.off(a.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var t=0;t<this.frames.length;t++)this.frames[t].destroy();this.frames=[],this.manager=null}});t.exports=T},function(t,i){t.exports=function(t,i,n,r){void 0===i&&(i=0),void 0===n&&(n=" "),void 0===r&&(r=3);var o=0;if(i+1>=(t=t.toString()).length)switch(r){case 1:t=new Array(i+1-t.length).join(n)+t;break;case 3:var a=Math.ceil((o=i-t.length)/2);t=new Array(o-a+1).join(n)+t+new Array(a+1).join(n);break;default:t+=new Array(i+1-t.length).join(n)}return t}},function(t,i,n){var r=n(327),o=n(189),a=n(331),h=n(332);t.exports=function(t){switch(typeof t){case"string":return"rgb"===t.substr(0,3).toLowerCase()?h(t):r(t);case"number":return o(t);case"object":return a(t)}}},function(t,i,n){var r=n(103);function ConvertValue(t,i,n,r){var o=(t+6*i)%6,a=Math.min(o,4-o,1);return Math.round(255*(r-r*n*Math.max(0,a)))}t.exports=function(t,i,n,o){void 0===i&&(i=1),void 0===n&&(n=1);var a=ConvertValue(5,t,i,n),h=ConvertValue(3,t,i,n),d=ConvertValue(1,t,i,n);return o?o.setTo?o.setTo(a,h,d,o.alpha,!1):(o.r=a,o.g=h,o.b=d,o.color=r(a,h,d),o):{r:a,g:h,b:d,color:r(a,h,d)}}},function(t,i,n){var r=n(38),o=n(330);t.exports=function(t){var i=o(t);return new r(i.r,i.g,i.b,i.a)}},function(t,i){t.exports=function(t,i,n){return t.x=i-t.width/2,t.y=n-t.height/2,t}},function(t,i,n){var r=n(105),o=n(136),a=n(31),h={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};t.exports=function init(){if("function"==typeof importScripts)return h;h.canvas=!!window.CanvasRenderingContext2D;try{h.localStorage=!!localStorage.getItem}catch(i){h.localStorage=!1}h.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),h.fileSystem=!!window.requestFileSystem;var t=!1;return h.webGL=function(){if(window.WebGLRenderingContext)try{var i=a.createWebGL(this),n=i.getContext("webgl")||i.getContext("experimental-webgl"),r=a.create2D(this),o=r.getContext("2d").createImageData(1,1);return t=o.data instanceof Uint8ClampedArray,a.remove(i),a.remove(r),!!n}catch(h){return!1}return!1}(),h.worker=!!window.Worker,h.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,h.getUserMedia=h.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,o.firefox&&o.firefoxVersion<21&&(h.getUserMedia=!1),!r.iOS&&(o.ie||o.firefox||o.chrome)&&(h.canvasBitBltShift=!0),(o.safari||o.mobileSafari)&&(h.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(h.vibration=!0),"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint32Array&&(h.littleEndian=function checkIsLittleEndian(){var t=new ArrayBuffer(4),i=new Uint8Array(t),n=new Uint32Array(t);return i[0]=161,i[1]=178,i[2]=195,i[3]=212,3569595041===n[0]||2712847316!==n[0]&&null}()),h.support32bit="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof Int32Array&&null!==h.littleEndian&&t,h}()},function(t,i){var n,r="";t.exports={disable:function(t){return""===r&&(r=n(t)),r&&(t[r]=!1),t},enable:function(t){return""===r&&(r=n(t)),r&&(t[r]=!0),t},getPrefix:n=function(t){for(var i=["i","webkitI","msI","mozI","oI"],n=0;n<i.length;n++){var r=i[n]+"mageSmoothingEnabled";if(r in t)return r}return null},isEnabled:function(t){return null!==r?t[r]:null}}},function(t,i,n){var r=n(14),o=n(17),a={Angle:n(812),Distance:n(821),Easing:n(826),Fuzzy:n(827),Interpolation:n(830),Pow2:n(835),Snap:n(837),RandomDataGenerator:n(839),Average:n(840),Bernstein:n(356),Between:n(195),CatmullRom:n(194),CeilTo:n(841),Clamp:n(18),DegToRad:n(36),Difference:n(842),Euler:n(843),Factorial:n(357),FloatBetween:n(137),FloorTo:n(844),FromPercent:n(98),GetSpeed:n(845),IsEven:n(846),IsEvenStrict:n(847),Linear:n(135),MaxAdd:n(848),Median:n(849),MinSub:n(850),Percent:n(851),RadToDeg:n(196),RandomXY:n(852),RandomXYZ:n(853),RandomXYZW:n(854),Rotate:n(362),RotateAround:n(308),RotateAroundDistance:n(182),RotateTo:n(855),RoundAwayFromZero:n(363),RoundTo:n(856),SinCosTableGenerator:n(857),SmootherStep:n(183),SmoothStep:n(184),ToXY:n(858),TransformXY:n(177),Within:n(859),Wrap:n(68),Vector2:n(3),Vector3:n(39),Vector4:n(140),Matrix3:n(364),Matrix4:n(69),Quaternion:n(365),RotateVec3:n(860)};a=o(!1,a,r),t.exports=a},function(t,i){t.exports=function(t,i,n,r,o){var a=.5*(r-i),h=.5*(o-n),d=t*t;return(2*n-2*r+a+h)*(t*d)+(-3*n+3*r-2*a-h)*d+a*t+n}},function(t,i){t.exports=function(t,i){return Math.floor(Math.random()*(i-t+1)+t)}},function(t,i,n){var r=n(14);t.exports=function(t){return t*r.RAD_TO_DEG}},function(t,i,n){t.exports={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]}},function(t,i,n){var r=new(n(0))({initialize:function ColorMatrix2(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function(t){return this._matrix=t,this._dirty=!0,this},reset:function(){var t=this._matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=1,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=1,t[13]=0,t[14]=0,t[15]=0,t[16]=0,t[17]=0,t[18]=1,t[19]=0,this._dirty=!0,this},getData:function(){if(this._dirty){var t=new Float32Array(this._matrix);t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,this._data=t,this._dirty=!1}return this._data},brightness:function(t,i){void 0===t&&(t=0),void 0===i&&(i=!1);var n=t;return this.multiply([n,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0],i)},saturate:function(t,i){void 0===t&&(t=0),void 0===i&&(i=!1);var n=2*t/3+1,r=-.5*(n-1);return this.multiply([n,r,r,0,0,r,n,r,0,0,r,r,n,0,0,0,0,0,1,0],i)},desaturate:function(t){return void 0===t&&(t=!1),this.saturate(-1,t)},hue:function(t,i){void 0===t&&(t=0),void 0===i&&(i=!1),t=t/180*Math.PI;var n=Math.cos(t),r=Math.sin(t),o=.213,a=.715,h=.072;return this.multiply([o+.787*n+r*-o,a+n*-a+r*-a,h+n*-h+.928*r,0,0,o+n*-o+.143*r,a+n*(1-a)+.14*r,h+n*-h+-.283*r,0,0,o+n*-o+-.787*r,a+n*-a+r*a,h+.928*n+r*h,0,0,0,0,0,1,0],i)},grayscale:function(t,i){return void 0===t&&(t=1),void 0===i&&(i=!1),this.saturate(-t,i)},blackWhite:function(t){return void 0===t&&(t=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},contrast:function(t,i){void 0===t&&(t=0),void 0===i&&(i=!1);var n=t+1,r=-.5*(n-1);return this.multiply([n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0],i)},negative:function(t){return void 0===t&&(t=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},desaturateLuminance:function(t){return void 0===t&&(t=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],t)},sepia:function(t){return void 0===t&&(t=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},night:function(t,i){return void 0===t&&(t=.1),void 0===i&&(i=!1),this.multiply([-2*t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0],i)},lsd:function(t){return void 0===t&&(t=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},brown:function(t){return void 0===t&&(t=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},vintagePinhole:function(t){return void 0===t&&(t=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},kodachrome:function(t){return void 0===t&&(t=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},technicolor:function(t){return void 0===t&&(t=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},polaroid:function(t){return void 0===t&&(t=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},shiftToBGR:function(t){return void 0===t&&(t=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},multiply:function(t,i){i||this.reset();for(var n=this._matrix,r=[],o=0;o<20;o++)r[o]=n[o];return n[0]=r[0]*t[0]+r[1]*t[5]+r[2]*t[10]+r[3]*t[15],n[1]=r[0]*t[1]+r[1]*t[6]+r[2]*t[11]+r[3]*t[16],n[2]=r[0]*t[2]+r[1]*t[7]+r[2]*t[12]+r[3]*t[17],n[3]=r[0]*t[3]+r[1]*t[8]+r[2]*t[13]+r[3]*t[18],n[4]=r[0]*t[4]+r[1]*t[9]+r[2]*t[14]+r[3]*t[19]+r[4],n[5]=r[5]*t[0]+r[6]*t[5]+r[7]*t[10]+r[8]*t[15],n[6]=r[5]*t[1]+r[6]*t[6]+r[7]*t[11]+r[8]*t[16],n[7]=r[5]*t[2]+r[6]*t[7]+r[7]*t[12]+r[8]*t[17],n[8]=r[5]*t[3]+r[6]*t[8]+r[7]*t[13]+r[8]*t[18],n[9]=r[5]*t[4]+r[6]*t[9]+r[7]*t[14]+r[8]*t[19]+r[9],n[10]=r[10]*t[0]+r[11]*t[5]+r[12]*t[10]+r[13]*t[15],n[11]=r[10]*t[1]+r[11]*t[6]+r[12]*t[11]+r[13]*t[16],n[12]=r[10]*t[2]+r[11]*t[7]+r[12]*t[12]+r[13]*t[17],n[13]=r[10]*t[3]+r[11]*t[8]+r[12]*t[13]+r[13]*t[18],n[14]=r[10]*t[4]+r[11]*t[9]+r[12]*t[14]+r[13]*t[19]+r[14],n[15]=r[15]*t[0]+r[16]*t[5]+r[17]*t[10]+r[18]*t[15],n[16]=r[15]*t[1]+r[16]*t[6]+r[17]*t[11]+r[18]*t[16],n[17]=r[15]*t[2]+r[16]*t[7]+r[17]*t[12]+r[18]*t[17],n[18]=r[15]*t[3]+r[16]*t[8]+r[17]*t[13]+r[18]*t[18],n[19]=r[15]*t[4]+r[16]*t[9]+r[17]*t[14]+r[18]*t[19]+r[19],this._dirty=!0,this}});t.exports=r},function(t,i,n){var r=n(10),o=n(14);t.exports=function(t,i){if(void 0===i&&(i=new r),0===t.length)return i;for(var n,a,h,d=Number.MAX_VALUE,f=Number.MAX_VALUE,p=o.MIN_SAFE_INTEGER,T=o.MIN_SAFE_INTEGER,b=0;b<t.length;b++)n=t[b],Array.isArray(n)?(a=n[0],h=n[1]):(a=n.x,h=n.y),d=Math.min(d,a),f=Math.min(f,h),p=Math.max(p,a),T=Math.max(T,h);return i.x=d,i.y=f,i.width=p-d,i.height=T-f,i}},function(t,i,n){var r=n(0),o=n(1),a=new r({initialize:function RGB2(t,i,n){this._rgb=[0,0,0],this.onChangeCallback=o,this.dirty=!1,this.set(t,i,n)},set:function(t,i,n){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),this._rgb=[t,i,n],this.onChange(),this},equals:function(t,i,n){var r=this._rgb;return r.r===t&&r.g===i&&r.b===n},onChange:function(){this.dirty=!0;var t=this._rgb;this.onChangeCallback.call(this,t[0],t[1],t[2])},r:{get:function(){return this._rgb[0]},set:function(t){this._rgb[0]=t,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(t){this._rgb[1]=t,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(t){this._rgb[2]=t,this.onChange()}},destroy:function(){this.onChangeCallback=null}});t.exports=a},function(t,i,n){var r={CENTER:n(403),ORIENTATION:n(404),SCALE_MODE:n(405),ZOOM:n(406)};t.exports=r},function(t,i){t.exports=function(t){t.parentNode&&t.parentNode.removeChild(t)}},function(t,i){t.exports={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8}},function(t,i,n){var r=n(0),o=n(144),a=n(197),h=n(20),d=n(419),f=n(420),p=n(33),T=n(1),b=n(421),S=new r({initialize:function Systems2(t,i){this.scene=t,this.game,this.renderer,this.config=i,this.settings=b.create(i),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=T},init:function(t){this.settings.status=o.INIT,this.sceneUpdate=T,this.game=t,this.renderer=t.renderer,this.canvas=t.canvas,this.context=t.context;var i=t.plugins;this.plugins=i,i.addToScene(this,a.Global,[a.CoreScene,f(this),d(this)]),this.events.emit(h.BOOT,this),this.settings.isBooted=!0},step:function(t,i){var n=this.events;n.emit(h.PRE_UPDATE,t,i),n.emit(h.UPDATE,t,i),this.sceneUpdate.call(this.scene,t,i),n.emit(h.POST_UPDATE,t,i)},render:function(t){var i=this.displayList;i.depthSort(),this.events.emit(h.PRE_RENDER,t),this.cameras.render(t,i),this.events.emit(h.RENDER,t)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(t){var i=this.events,n=this.settings;return this.settings.active&&(n.status=o.PAUSED,n.active=!1,i.emit(h.PAUSE,this,t)),this},resume:function(t){var i=this.events,n=this.settings;return this.settings.active||(n.status=o.RUNNING,n.active=!0,i.emit(h.RESUME,this,t)),this},sleep:function(t){var i=this.events,n=this.settings;return n.status=o.SLEEPING,n.active=!1,n.visible=!1,i.emit(h.SLEEP,this,t),this},wake:function(t){var i=this.events,n=this.settings;return n.status=o.RUNNING,n.active=!0,n.visible=!0,i.emit(h.WAKE,this,t),n.isTransition&&i.emit(h.TRANSITION_WAKE,n.transitionFrom,n.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===o.SLEEPING},isActive:function(){return this.settings.status===o.RUNNING},isPaused:function(){return this.settings.status===o.PAUSED},isTransitioning:function(){return this.settings.isTransition||null!==this.scenePlugin._target},isTransitionOut:function(){return null!==this.scenePlugin._target&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(t){return this.settings.visible=t,this},setActive:function(t,i){return t?this.resume(i):this.pause(i)},start:function(t){var i=this.events,n=this.settings;t&&(n.data=t),n.status=o.START,n.active=!0,n.visible=!0,i.emit(h.START,this),i.emit(h.READY,this,t)},shutdown:function(t){var i=this.events,n=this.settings;i.off(h.TRANSITION_INIT),i.off(h.TRANSITION_START),i.off(h.TRANSITION_COMPLETE),i.off(h.TRANSITION_OUT),n.status=o.SHUTDOWN,n.active=!1,n.visible=!1,this.renderer===p.WEBGL&&this.renderer.resetTextures(!0),i.emit(h.SHUTDOWN,this,t)},destroy:function(){var t=this.events,i=this.settings;i.status=o.DESTROYED,i.active=!1,i.visible=!1,t.emit(h.DESTROY,this),t.removeAllListeners();for(var n=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],r=0;r<n.length;r++)this[n[r]]=null}});t.exports=S},function(t,i){t.exports=function(t){return t&&t[0].toUpperCase()+t.slice(1)}},function(t,i,n){var r=n(33),o=n(0),a=n(109),h=n(424),d="Texture.frame missing: ",f=new o({initialize:function Texture2(t,i,n,r,o){Array.isArray(n)||(n=[n]),this.manager=t,this.key=i,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var a=0;a<n.length;a++)this.source.push(new h(this,n[a],r,o))},add:function(t,i,n,r,o,h){if(this.has(t))return null;var d=new a(this,t,i,n,r,o,h);return this.frames[t]=d,"__BASE"===this.firstFrame&&(this.firstFrame=t),this.frameTotal++,d},remove:function(t){return!!this.has(t)&&(this.get(t).destroy(),delete this.frames[t],!0)},has:function(t){return this.frames[t]},get:function(t){t||(t=this.firstFrame);var i=this.frames[t];return i||(console.warn(d+t),i=this.frames[this.firstFrame]),i},getTextureSourceIndex:function(t){for(var i=0;i<this.source.length;i++)if(this.source[i]===t)return i;return-1},getFramesFromTextureSource:function(t,i){void 0===i&&(i=!1);var n=[];for(var r in this.frames)if("__BASE"!==r||i){var o=this.frames[r];o.sourceIndex===t&&n.push(o)}return n},getFrameNames:function(t){void 0===t&&(t=!1);var i=Object.keys(this.frames);if(!t){var n=i.indexOf("__BASE");-1!==n&&i.splice(n,1)}return i},getSourceImage:function(t){null!=t&&1!==this.frameTotal||(t="__BASE");var i=this.frames[t];return i?i.source.image:(console.warn(d+t),this.frames.__BASE.source.image)},getDataSourceImage:function(t){null!=t&&1!==this.frameTotal||(t="__BASE");var i,n=this.frames[t];return n?i=n.sourceIndex:(console.warn(d+t),i=this.frames.__BASE.sourceIndex),this.dataSource[i].image},setDataSource:function(t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var n=this.source[i];this.dataSource.push(new h(this,t[i],n.width,n.height))}},setFilter:function(t){var i;for(i=0;i<this.source.length;i++)this.source[i].setFilter(t);for(i=0;i<this.dataSource.length;i++)this.dataSource[i].setFilter(t)},destroy:function(){var t;for(t=0;t<this.source.length;t++)this.source[t].destroy();for(t=0;t<this.dataSource.length;t++)this.dataSource[t].destroy();for(var i in this.frames)this.frames[i].destroy();this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var n=this.manager.game.renderer;n&&n.type===r.WEBGL&&n.resetTextures(!0),this.manager=null}});t.exports=f},function(t,i,n){var r=n(78);t.exports=function(t,i,n,o,a){void 0===o&&(o=0),void 0===a&&(a=t.length);var h=[];if(r(t,o,a))for(var d=o;d<a;d++){var f=t[d];(!i||i&&void 0===n&&f.hasOwnProperty(i)||i&&void 0!==n&&f[i]===n)&&h.push(f)}return h}},function(t,i,n){t.exports={Matrix:n(1013),Add:n(1021),AddAt:n(1022),BringToTop:n(1023),CountAllMatching:n(1024),Each:n(1025),EachInRange:n(1026),FindClosestInSorted:n(318),GetAll:n(207),GetFirst:n(428),GetRandom:n(210),MoveDown:n(1027),MoveTo:n(1028),MoveUp:n(1029),MoveAbove:n(1030),MoveBelow:n(1031),NumberArray:n(322),NumberArrayStep:n(1032),QuickSelect:n(436),Range:n(437),Remove:n(93),RemoveAt:n(1033),RemoveBetween:n(1034),RemoveRandomElement:n(1035),Replace:n(1036),RotateLeft:n(178),RotateRight:n(179),SafeRange:n(78),SendToBack:n(1037),SetAll:n(1038),Shuffle:n(131),SortByDigits:n(320),SpliceOne:n(74),StableSort:n(79),Swap:n(1039)}},function(t,i){t.exports=function(t){if(!Array.isArray(t)||t.length<2||!Array.isArray(t[0]))return!1;for(var i=t[0].length,n=1;n<t.length;n++)if(t[n].length!==i)return!1;return!0}},function(t,i){t.exports=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=t.length);var r=i+Math.floor(Math.random()*n);return void 0===t[r]?null:t[r]}},function(t,i,n){var r=n(0),o=n(9),a=n(438),h=new r({Extends:o,initialize:function ProcessQueue2(){o.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(t){return this._pending.push(t),this._toProcess++,t},remove:function(t){return this._destroy.push(t),this._toProcess++,t},removeAll:function(){for(var t=this._active,i=this._destroy,n=t.length;n--;)i.push(t[n]),this._toProcess++;return this},update:function(){if(0===this._toProcess)return this._active;var t,i,n=this._destroy,r=this._active;for(t=0;t<n.length;t++){i=n[t];var o=r.indexOf(i);-1!==o&&(r.splice(o,1),this.emit(a.PROCESS_QUEUE_REMOVE,i))}for(n.length=0,n=this._pending,t=0;t<n.length;t++)i=n[t],(!this.checkQueue||this.checkQueue&&-1===r.indexOf(i))&&(r.push(i),this.emit(a.PROCESS_QUEUE_ADD,i));return n.length=0,this._toProcess=0,r},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});t.exports=h},function(t,i){function getValue(t,i){return parseInt(t.getAttribute(i),10)}t.exports=function(t,i,n,r,o){void 0===n&&(n=0),void 0===r&&(r=0);var a=i.cutX,h=i.cutY,d=i.source.width,f=i.source.height,p=i.sourceIndex,T={},b=t.getElementsByTagName("info")[0],S=t.getElementsByTagName("common")[0];T.font=b.getAttribute("face"),T.size=getValue(b,"size"),T.lineHeight=getValue(S,"lineHeight")+r,T.chars={};var A=t.getElementsByTagName("char"),P=void 0!==i&&i.trimmed;if(P)var O=i.height,L=i.width;for(var D=0;D<A.length;D++){var I=A[D],F=getValue(I,"id"),B=String.fromCharCode(F),N=getValue(I,"x"),Y=getValue(I,"y"),X=getValue(I,"width"),G=getValue(I,"height");P&&(N<L&&(L=N),Y<O&&(O=Y)),P&&0!==O&&0!==L&&(N-=i.x,Y-=i.y);var U=(a+N)/d,V=(h+Y)/f,z=(a+N+X)/d,W=(h+Y+G)/f;if(T.chars[F]={x:N,y:Y,width:X,height:G,centerX:Math.floor(X/2),centerY:Math.floor(G/2),xOffset:getValue(I,"xoffset"),yOffset:getValue(I,"yoffset"),xAdvance:getValue(I,"xadvance")+n,data:{},kerning:{},u0:U,v0:V,u1:z,v1:W},o&&0!==X&&0!==G){var H=o.add(B,p,N,Y,X,G);H&&H.setUVs(X,G,U,V,z,W)}}var q=t.getElementsByTagName("kerning");for(D=0;D<q.length;D++){var Z=q[D],K=getValue(Z,"first"),J=getValue(Z,"second"),Q=getValue(Z,"amount");T.chars[J].kerning[K]=Q}return T}},function(t,i,n){var r=n(1049),o=n(440),a=n(0),h=n(11),d=n(109),f=n(15),p=n(110),T=new a({Extends:f,Mixins:[h.Alpha,h.BlendMode,h.Depth,h.Mask,h.Pipeline,h.ScrollFactor,h.Size,h.Texture,h.Transform,h.Visible,r],initialize:function Blitter2(t,i,n,r,o){f.call(this,t,"Blitter"),this.setTexture(r,o),this.setPosition(i,n),this.initPipeline(),this.children=new p,this.renderList=[],this.dirty=!1},create:function(t,i,n,r,a){void 0===r&&(r=!0),void 0===a&&(a=this.children.length),void 0===n?n=this.frame:n instanceof d||(n=this.texture.get(n));var h=new o(this,t,i,n,r);return this.children.addAt(h,a,!1),this.dirty=!0,h},createFromCallback:function(t,i,n,r){for(var o=this.createMultiple(i,n,r),a=0;a<o.length;a++){var h=o[a];t.call(this,h,a)}return o},createMultiple:function(t,i,n){void 0===i&&(i=this.frame.name),void 0===n&&(n=!0),Array.isArray(i)||(i=[i]);var r=[],o=this;return i.forEach((function(i){for(var a=0;a<t;a++)r.push(o.create(0,0,i,n))})),r},childCanRender:function(t){return t.visible&&t.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});t.exports=T},function(t,i,n){var r=n(208),o=n(35),a=n(0),h=n(11),d=n(75),f=n(15),p=n(10),T=n(1052),b=n(441),S=n(3),A=new a({Extends:f,Mixins:[h.AlphaSingle,h.BlendMode,h.ComputedSize,h.Depth,h.Mask,h.Pipeline,h.Transform,h.Visible,T],initialize:function Container2(t,i,n,r){f.call(this,t,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new h.TransformMatrix,this.tempTransformMatrix=new h.TransformMatrix,this._sortKey="",this._sysEvents=t.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(i,n),this.clearAlpha(),this.setBlendMode(o.SKIP_CHECK),r&&this.add(r)},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return.5*this.width}},displayOriginY:{get:function(){return.5*this.height}},setExclusive:function(t){return void 0===t&&(t=!0),this.exclusive=t,this},getBounds:function(t){if(void 0===t&&(t=new p),t.setTo(this.x,this.y,0,0),this.parentContainer){var i=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y);t.setTo(i.x,i.y,0,0)}if(this.list.length>0){var n=this.list,r=new p,o=!1;t.setEmpty();for(var a=0;a<n.length;a++){var h=n[a];h.getBounds&&(h.getBounds(r),o?b(r,t,t):(t.setTo(r.x,r.y,r.width,r.height),o=!0))}}return t},addHandler:function(t){t.once(d.DESTROY,this.remove,this),this.exclusive&&(t.parentContainer&&t.parentContainer.remove(t),t.removeFromDisplayList(),t.parentContainer=this)},removeHandler:function(t){t.off(d.DESTROY,this.remove),this.exclusive&&(t.parentContainer=null,t.addToDisplayList())},pointToContainer:function(t,i){void 0===i&&(i=new S),this.parentContainer?this.parentContainer.pointToContainer(t,i):i=new S(t.x,t.y);var n=this.tempTransformMatrix;return n.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),n.invert(),n.transformPoint(t.x,t.y,i),i},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(t){return r.Add(this.list,t,this.maxSize,this.addHandler,this),this},addAt:function(t,i){return r.AddAt(this.list,t,i,this.maxSize,this.addHandler,this),this},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,i){return t?(void 0===i&&(i=function(i,n){return i[t]-n[t]}),r.StableSort(this.list,i),this):this},getByName:function(t){return r.GetFirst(this.list,"name",t)},getRandom:function(t,i){return r.GetRandom(this.list,t,i)},getFirst:function(t,i,n,o){return r.GetFirst(this.list,t,i,n,o)},getAll:function(t,i,n,o){return r.GetAll(this.list,t,i,n,o)},count:function(t,i,n,o){return r.CountAllMatching(this.list,t,i,n,o)},swap:function(t,i){return r.Swap(this.list,t,i),this},moveTo:function(t,i){return r.MoveTo(this.list,t,i),this},moveAbove:function(t,i){return r.MoveAbove(this.list,t,i),this},moveBelow:function(t,i){return r.MoveBelow(this.list,t,i),this},remove:function(t,i){var n=r.Remove(this.list,t,this.removeHandler,this);if(i&&n){Array.isArray(n)||(n=[n]);for(var o=0;o<n.length;o++)n[o].destroy()}return this},removeAt:function(t,i){var n=r.RemoveAt(this.list,t,this.removeHandler,this);return i&&n&&n.destroy(),this},removeBetween:function(t,i,n){var o=r.RemoveBetween(this.list,t,i,this.removeHandler,this);if(n)for(var a=0;a<o.length;a++)o[a].destroy();return this},removeAll:function(t){var i=r.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(t)for(var n=0;n<i.length;n++)i[n].destroy();return this},bringToTop:function(t){return r.BringToTop(this.list,t),this},sendToBack:function(t){return r.SendToBack(this.list,t),this},moveUp:function(t){return r.MoveUp(this.list,t),this},moveDown:function(t){return r.MoveDown(this.list,t),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return r.Shuffle(this.list),this},replace:function(t,i,n){return r.Replace(this.list,t,i)&&(this.addHandler(i),this.removeHandler(t),n&&t.destroy()),this},exists:function(t){return this.list.indexOf(t)>-1},setAll:function(t,i,n,o){return r.SetAll(this.list,t,i,n,o),this},each:function(t,i){var n,r=[null],o=this.list.slice(),a=o.length;for(n=2;n<arguments.length;n++)r.push(arguments[n]);for(n=0;n<a;n++)r[0]=o[n],t.apply(i,r);return this},iterate:function(t,i){var n,r=[null];for(n=2;n<arguments.length;n++)r.push(arguments[n]);for(n=0;n<this.list.length;n++)r[0]=this.list[n],t.apply(i,r);return this},setScrollFactor:function(t,i,n){return void 0===i&&(i=t),void 0===n&&(n=!1),this.scrollFactorX=t,this.scrollFactorY=i,n&&(r.SetAll(this.list,"scrollFactorX",t),r.SetAll(this.list,"scrollFactorY",i)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});t.exports=A},function(t,i,n){var r=n(148),o=n(0),a=n(1057),h=new o({Extends:r,Mixins:[a],initialize:function DynamicBitmapText2(t,i,n,o,a,h,d){r.call(this,t,i,n,o,a,h,d),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(t,i){return this.cropWidth=t,this.cropHeight=i,this},setDisplayCallback:function(t){return this.displayCallback=t,this},setScrollX:function(t){return this.scrollX=t,this},setScrollY:function(t){return this.scrollY=t,this}});t.exports=h},function(t,i,n){var r=n(133),o=n(0),a=n(217),h=n(303),d=n(304),f=n(305),p=n(309),T=n(167),b=n(312),S=n(313),A=n(314),P=n(111),O=n(15),L=n(2),D=n(6),I=n(14),F=n(1063),B=new o({Extends:O,Mixins:[h,d,f,p,T,S,A,b,F],initialize:function Graphics2(t,i){var n=D(i,"x",0),r=D(i,"y",0);O.call(this,t,"Graphics"),this.setPosition(n,r),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(i)},setDefaultStyles:function(t){return D(t,"lineStyle",null)&&(this.defaultStrokeWidth=D(t,"lineStyle.width",1),this.defaultStrokeColor=D(t,"lineStyle.color",16777215),this.defaultStrokeAlpha=D(t,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),D(t,"fillStyle",null)&&(this.defaultFillColor=D(t,"fillStyle.color",16777215),this.defaultFillAlpha=D(t,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(t,i,n){return void 0===n&&(n=1),this.commandBuffer.push(a.LINE_STYLE,t,i,n),this._lineWidth=t,this},fillStyle:function(t,i){return void 0===i&&(i=1),this.commandBuffer.push(a.FILL_STYLE,t,i),this},fillGradientStyle:function(t,i,n,r,o,h,d,f){return void 0===o&&(o=1),void 0===h&&(h=o),void 0===d&&(d=o),void 0===f&&(f=o),this.commandBuffer.push(a.GRADIENT_FILL_STYLE,o,h,d,f,t,i,n,r),this},lineGradientStyle:function(t,i,n,r,o,h){return void 0===h&&(h=1),this.commandBuffer.push(a.GRADIENT_LINE_STYLE,t,h,i,n,r,o),this},beginPath:function(){return this.commandBuffer.push(a.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(a.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(a.FILL_PATH),this},fill:function(){return this.commandBuffer.push(a.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(a.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(a.STROKE_PATH),this},fillCircleShape:function(t){return this.fillCircle(t.x,t.y,t.radius)},strokeCircleShape:function(t){return this.strokeCircle(t.x,t.y,t.radius)},fillCircle:function(t,i,n){return this.beginPath(),this.arc(t,i,n,0,I.PI2),this.fillPath(),this},strokeCircle:function(t,i,n){return this.beginPath(),this.arc(t,i,n,0,I.PI2),this.strokePath(),this},fillRectShape:function(t){return this.fillRect(t.x,t.y,t.width,t.height)},strokeRectShape:function(t){return this.strokeRect(t.x,t.y,t.width,t.height)},fillRect:function(t,i,n,r){return this.commandBuffer.push(a.FILL_RECT,t,i,n,r),this},strokeRect:function(t,i,n,r){var o=this._lineWidth/2,a=t-o,h=t+o;return this.beginPath(),this.moveTo(t,i),this.lineTo(t,i+r),this.strokePath(),this.beginPath(),this.moveTo(t+n,i),this.lineTo(t+n,i+r),this.strokePath(),this.beginPath(),this.moveTo(a,i),this.lineTo(h+n,i),this.strokePath(),this.beginPath(),this.moveTo(a,i+r),this.lineTo(h+n,i+r),this.strokePath(),this},fillRoundedRect:function(t,i,n,r,o){void 0===o&&(o=20);var a=o,h=o,d=o,f=o;return"number"!=typeof o&&(a=L(o,"tl",20),h=L(o,"tr",20),d=L(o,"bl",20),f=L(o,"br",20)),this.beginPath(),this.moveTo(t+a,i),this.lineTo(t+n-h,i),this.arc(t+n-h,i+h,h,-I.TAU,0),this.lineTo(t+n,i+r-f),this.arc(t+n-f,i+r-f,f,0,I.TAU),this.lineTo(t+d,i+r),this.arc(t+d,i+r-d,d,I.TAU,Math.PI),this.lineTo(t,i+a),this.arc(t+a,i+a,a,-Math.PI,-I.TAU),this.fillPath(),this},strokeRoundedRect:function(t,i,n,r,o){void 0===o&&(o=20);var a=o,h=o,d=o,f=o;return"number"!=typeof o&&(a=L(o,"tl",20),h=L(o,"tr",20),d=L(o,"bl",20),f=L(o,"br",20)),this.beginPath(),this.moveTo(t+a,i),this.lineTo(t+n-h,i),this.moveTo(t+n-h,i),this.arc(t+n-h,i+h,h,-I.TAU,0),this.lineTo(t+n,i+r-f),this.moveTo(t+n,i+r-f),this.arc(t+n-f,i+r-f,f,0,I.TAU),this.lineTo(t+d,i+r),this.moveTo(t+d,i+r),this.arc(t+d,i+r-d,d,I.TAU,Math.PI),this.lineTo(t,i+a),this.moveTo(t,i+a),this.arc(t+a,i+a,a,-Math.PI,-I.TAU),this.strokePath(),this},fillPointShape:function(t,i){return this.fillPoint(t.x,t.y,i)},fillPoint:function(t,i,n){return!n||n<1?n=1:(t-=n/2,i-=n/2),this.commandBuffer.push(a.FILL_RECT,t,i,n,n),this},fillTriangleShape:function(t){return this.fillTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},strokeTriangleShape:function(t){return this.strokeTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},fillTriangle:function(t,i,n,r,o,h){return this.commandBuffer.push(a.FILL_TRIANGLE,t,i,n,r,o,h),this},strokeTriangle:function(t,i,n,r,o,h){return this.commandBuffer.push(a.STROKE_TRIANGLE,t,i,n,r,o,h),this},strokeLineShape:function(t){return this.lineBetween(t.x1,t.y1,t.x2,t.y2)},lineBetween:function(t,i,n,r){return this.beginPath(),this.moveTo(t,i),this.lineTo(n,r),this.strokePath(),this},lineTo:function(t,i){return this.commandBuffer.push(a.LINE_TO,t,i),this},moveTo:function(t,i){return this.commandBuffer.push(a.MOVE_TO,t,i),this},strokePoints:function(t,i,n,r){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var o=1;o<r;o++)this.lineTo(t[o].x,t[o].y);return i&&this.lineTo(t[0].x,t[0].y),n&&this.closePath(),this.strokePath(),this},fillPoints:function(t,i,n,r){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var o=1;o<r;o++)this.lineTo(t[o].x,t[o].y);return i&&this.lineTo(t[0].x,t[0].y),n&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(t,i){void 0===i&&(i=32);var n=t.getPoints(i);return this.strokePoints(n,!0)},strokeEllipse:function(t,i,n,r,o){void 0===o&&(o=32);var a=new P(t,i,n,r).getPoints(o);return this.strokePoints(a,!0)},fillEllipseShape:function(t,i){void 0===i&&(i=32);var n=t.getPoints(i);return this.fillPoints(n,!0)},fillEllipse:function(t,i,n,r,o){void 0===o&&(o=32);var a=new P(t,i,n,r).getPoints(o);return this.fillPoints(a,!0)},arc:function(t,i,n,r,o,h,d){return void 0===h&&(h=!1),void 0===d&&(d=0),this.commandBuffer.push(a.ARC,t,i,n,r,o,h,d),this},slice:function(t,i,n,r,o,h,d){return void 0===h&&(h=!1),void 0===d&&(d=0),this.commandBuffer.push(a.BEGIN_PATH),this.commandBuffer.push(a.MOVE_TO,t,i),this.commandBuffer.push(a.ARC,t,i,n,r,o,h,d),this.commandBuffer.push(a.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(a.SAVE),this},restore:function(){return this.commandBuffer.push(a.RESTORE),this},translateCanvas:function(t,i){return this.commandBuffer.push(a.TRANSLATE,t,i),this},scaleCanvas:function(t,i){return this.commandBuffer.push(a.SCALE,t,i),this},rotateCanvas:function(t){return this.commandBuffer.push(a.ROTATE,t),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(t,i,n){var r,o,a=this.scene.sys,h=a.game.renderer;if(void 0===i&&(i=a.scale.width),void 0===n&&(n=a.scale.height),B.TargetCamera.setScene(this.scene),B.TargetCamera.setViewport(0,0,i,n),B.TargetCamera.scrollX=this.x,B.TargetCamera.scrollY=this.y,"string"==typeof t)if(a.textures.exists(t)){var d=(r=a.textures.get(t)).getSourceImage();d instanceof HTMLCanvasElement&&(o=d.getContext("2d"))}else o=(r=a.textures.createCanvas(t,i,n)).getSourceImage().getContext("2d");else t instanceof HTMLCanvasElement&&(o=t.getContext("2d"));return o&&(this.renderCanvas(h,this,B.TargetCamera,null,o,!1),r&&r.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});B.TargetCamera=new r,t.exports=B},function(t,i){t.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(t,i,n){var r=n(4);t.exports=function(t,i,n){void 0===n&&(n=new r);var o=t.width/2,a=t.height/2;return n.x=t.x+o*Math.cos(i),n.y=t.y+a*Math.sin(i),n}},function(t,i,n){var r=n(35),o=n(0),a=n(11),h=n(176),d=n(101),f=n(9),p=n(75),T=n(110),b=n(1071),S=n(20),A=n(79),P=new o({Extends:T,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.Mask,a.Pipeline,a.Visible,f,b],initialize:function Layer2(t,i){T.call(this,t),f.call(this),this.scene=t,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=t.sys,this.events=t.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(r.SKIP_CHECK),i&&this.add(i),t.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setState:function(t){return this.state=t,this},setDataEnabled:function(){return this.data||(this.data=new d(this)),this},setData:function(t,i){return this.data||(this.data=new d(this)),this.data.set(t,i),this},incData:function(t,i){return this.data||(this.data=new d(this)),this.data.inc(t,i),this},toggleData:function(t){return this.data||(this.data=new d(this)),this.data.toggle(t),this},getData:function(t){return this.data||(this.data=new d(this)),this.data.get(t)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return h(this)},willRender:function(t){return!(15!==this.renderFlags||0===this.list.length||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function(){for(var t=this,i=this.parentContainer,n=[];i&&(n.unshift(i.getIndex(t)),t=i,i.parentContainer);)i=i.parentContainer;return n.unshift(this.displayList.getIndex(t)),n},addChildCallback:function(t){t.displayList&&t.displayList!==this&&t.removeFromDisplayList(),t.displayList||(this.queueDepthSort(),t.displayList=this,t.emit(p.ADDED_TO_SCENE,t,this.scene),this.events.emit(S.ADDED_TO_SCENE,t,this.scene))},removeChildCallback:function(t){this.queueDepthSort(),t.displayList=null,t.emit(p.REMOVED_FROM_SCENE,t,this.scene),this.events.emit(S.REMOVED_FROM_SCENE,t,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(A(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(t,i){return t._depth-i._depth},getChildren:function(){return this.list},destroy:function(){if(this.scene&&!this.ignoreDestroy){this.emit(p.DESTROY,this);for(var t=this.list.length;t--;)this.list[t].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});t.exports=P},function(t,i,n){var r=n(0),o=n(11),a=n(15),h=n(450),d=n(110),f=n(452),p=n(1075),T=new r({Extends:a,Mixins:[o.Depth,o.Mask,o.Pipeline,o.Transform,o.Visible,p],initialize:function ParticleEmitterManager2(t,i,n,r){if(a.call(this,t,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],null===n||"object"!=typeof n&&!Array.isArray(n)||(r=n,n=null),this.setTexture(i,n),this.initPipeline(),this.emitters=new d(this),this.wells=new d(this),r){Array.isArray(r)||(r=[r]);for(var o=0;o<r.length;o++)this.createEmitter(r[o])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(t,i){return this.texture=this.scene.sys.textures.get(t),this.setFrame(i)},setFrame:function(t){this.frame=this.texture.get(t);var i=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),n=[];return i.forEach((function(t){n.push(t.name)})),this.frameNames=n,this.defaultFrame=this.frame,this},setEmitterFrames:function(t,i){Array.isArray(t)||(t=[t]);var n=i.frames;n.length=0;for(var r=0;r<t.length;r++){var o=t[r];-1!==this.frameNames.indexOf(o)&&n.push(this.texture.get(o))}return n.length>0?i.defaultFrame=n[0]:i.defaultFrame=this.defaultFrame,this},addEmitter:function(t){return this.emitters.add(t)},createEmitter:function(t){return this.addEmitter(new f(this,t))},removeEmitter:function(t){return this.emitters.remove(t,!0)},addGravityWell:function(t){return this.wells.add(t)},createGravityWell:function(t){return this.addGravityWell(new h(t))},emitParticle:function(t,i,n){for(var r=this.emitters.list,o=0;o<r.length;o++){var a=r[o];a.active&&a.emitParticle(t,i,n)}return this},emitParticleAt:function(t,i,n){return this.emitParticle(n,t,i)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(t,i){i*=this.timeScale;for(var n=this.emitters.list,r=0;r<n.length;r++){var o=n[r];o.active&&o.preUpdate(t,i)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});t.exports=T},function(t,i,n){var r=n(35),o=n(133),a=n(31),h=n(0),d=n(11),f=n(33),p=n(109),T=n(15),b=n(1),S=n(92),A=n(1079),P=n(141),O=n(12),L=n(222),D=new h({Extends:T,Mixins:[d.Alpha,d.BlendMode,d.ComputedSize,d.Crop,d.Depth,d.Flip,d.GetBounds,d.Mask,d.Origin,d.Pipeline,d.ScrollFactor,d.Tint,d.Transform,d.Visible,A],initialize:function RenderTexture2(t,i,n,r,h,d,p){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=32),void 0===h&&(h=32),T.call(this,t,"RenderTexture"),this.renderer=t.sys.renderer,this.textureManager=t.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,void 0===d?(this.canvas=a.create2D(this,r,h),this.texture=t.sys.textures.addCanvas(L(),this.canvas),this.frame=this.texture.get()):(this.texture=t.sys.textures.get(d),this.frame=this.texture.get(p),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new o(0,0,r,h),this.renderTarget=null;var A=this.renderer;A?A.type===f.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new P(A,r,h,1,0,!1)):A.type===f.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=b,this.camera.setScene(t),this.setPosition(i,n),void 0===d&&this.setSize(r,h),this.setOrigin(0,0),this.initPipeline(S.SINGLE_PIPELINE)},setSize:function(t,i){return this.resize(t,i)},resize:function(t,i){void 0===i&&(i=t);var n=this.frame;if(t!==this.width||i!==this.height){if("__BASE"===n.name){this.canvas.width=t,this.canvas.height=i,this.texture.width=t,this.texture.height=i;var r=this.renderTarget;r&&(r.resize(t,i),n.glTexture=r.texture,n.source.isRenderTexture=!0,n.source.isGLTexture=!0,n.source.glTexture=r.texture),this.camera.setSize(t,i),n.source.width=t,n.source.height=i,n.setSize(t,i),this.width=t,this.height=i}}else{var o=this.texture.getSourceImage();n.cutX+t>o.width&&(t=o.width-n.cutX),n.cutY+i>o.height&&(i=o.height-n.cutY),n.setSize(t,i,n.cutX,n.cutY)}this.updateDisplayOrigin();var a=this.input;return a&&!a.customHitArea&&(a.hitArea.width=t,a.hitArea.height=i),this},setGlobalTint:function(t){return this.globalTint=t,this},setGlobalAlpha:function(t){return this.globalAlpha=t,this},saveTexture:function(t){return this.textureManager.renameTexture(this.texture.key,t),this._saved=!0,this.texture},fill:function(t,i,n,r,o,a){var h=this.frame,d=this.camera,f=this.renderer;void 0===i&&(i=1),void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=h.cutWidth),void 0===a&&(a=h.cutHeight);var p=(t>>16&255)/255,T=(t>>8&255)/255,b=(255&t)/255,S=this.renderTarget;if(d.preRender(),S){S.bind(!0);var A=this.pipeline;A.manager.set(A);var P=S.width,L=S.height,D=f.width/P,I=f.height/L;A.drawFillRect(n*D,r*I,o*D,a*I,O.getTintFromFloats(b,T,p,1),i),S.unbind(!0)}else{var F=this.context;f.setContext(F),F.fillStyle="rgba("+p+","+T+","+b+","+i+")",F.fillRect(n+h.cutX,r+h.cutY,o,a),f.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var t=this.renderTarget;if(t)t.clear();else{var i=this.context;i.save(),i.setTransform(1,0,0,1,0,0),i.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),i.restore()}this.dirty=!1}return this},erase:function(t,i,n){return this._eraseMode=!0,this.draw(t,i,n,1,16777215),this._eraseMode=!1,this},draw:function(t,i,n,r,o){return this.beginDraw(),this.batchDraw(t,i,n,r,o),this.endDraw(),this},drawFrame:function(t,i,n,r,o,a){return this.beginDraw(),this.batchDrawFrame(t,i,n,r,o,a),this.endDraw(),this},beginDraw:function(){var t=this.camera,i=this.renderer,n=this.renderTarget;return t.preRender(),n?i.beginCapture(n.width,n.height):i.setContext(this.context),this},batchDraw:function(t,i,n,r,o){return void 0===r&&(r=this.globalAlpha),o=void 0===o?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(o>>16)+(65280&o)+((255&o)<<16),Array.isArray(t)||(t=[t]),this.batchList(t,i,n,r,o),this},batchDrawFrame:function(t,i,n,r,o,a){void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=this.globalAlpha),a=void 0===a?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(a>>16)+(65280&a)+((255&a)<<16);var h=this.textureManager.getFrame(t,i);return h&&(this.renderTarget?this.pipeline.batchTextureFrame(h,n,r,a,o,this.camera.matrix,null):this.batchTextureFrame(h,n+this.frame.cutX,r+this.frame.cutY,o,a)),this},endDraw:function(t){void 0===t&&(t=this._eraseMode);var i=this.renderer,n=this.renderTarget;if(n){var r=i.endCapture();i.pipelines.setUtility().blitFrame(r,n,1,!1,!1,t),i.resetScissor(),i.resetViewport()}else i.setContext();return this.dirty=!0,this},batchList:function(t,i,n,r,o){for(var a=0;a<t.length;a++){var h=t[a];h&&h!==this&&(h.renderWebGL||h.renderCanvas?this.drawGameObject(h,i,n):h.isParent||h.list?this.batchGroup(h.getChildren(),i,n):"string"==typeof h?this.batchTextureFrameKey(h,null,i,n,r,o):h instanceof p?this.batchTextureFrame(h,i,n,r,o):Array.isArray(h)&&this.batchList(h,i,n,r,o))}},batchGroup:function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=0),i+=this.frame.cutX,n+=this.frame.cutY;for(var r=0;r<t.length;r++){var o=t[r];if(o.willRender(this.camera)){var a=o.x+i,h=o.y+n;this.drawGameObject(o,a,h)}}},batchGameObjectWebGL:function(t,i,n){void 0===i&&(i=t.x),void 0===n&&(n=t.y);var r=t.x,o=t.y;t.setPosition(i+this.frame.cutX,n+this.frame.cutY),t.renderDirect?t.renderDirect(this.renderer,t,this.camera):t.renderWebGL(this.renderer,t,this.camera),t.setPosition(r,o)},batchGameObjectCanvas:function(t,i,n){void 0===i&&(i=t.x),void 0===n&&(n=t.y);var o=t.x,a=t.y;if(this._eraseMode){var h=t.blendMode;t.blendMode=r.ERASE}t.setPosition(i+this.frame.cutX,n+this.frame.cutY),t.renderCanvas(this.renderer,t,this.camera,null),t.setPosition(o,a),this._eraseMode&&(t.blendMode=h)},batchTextureFrameKey:function(t,i,n,r,o,a){var h=this.textureManager.getFrame(t,i);h&&this.batchTextureFrame(h,n,r,o,a)},batchTextureFrame:function(t,i,n,r,o){if(void 0===i&&(i=0),void 0===n&&(n=0),i+=this.frame.cutX,n+=this.frame.cutY,this.renderTarget)this.pipeline.batchTextureFrame(t,i,n,o,r,this.camera.matrix,null);else{var a=this.context,h=t.canvasData,d=t.source.image,f=this.camera.matrix;a.save(),a.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",a.globalAlpha=r,f.setToContext(a),a.drawImage(d,h.x,h.y,h.width,h.height,i,n,h.width,h.height),a.restore()}},snapshotArea:function(t,i,n,r,o,a,h){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,o,!1,t,i,n,r,a,h):this.renderer.snapshotCanvas(this.canvas,o,!1,t,i,n,r,a,h),this},snapshot:function(t,i,n){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,t,!1,0,0,this.width,this.height,i,n):this.renderer.snapshotCanvas(this.canvas,t,!1,0,0,this.width,this.height,i,n),this},snapshotPixel:function(t,i,n){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,n,!0,t,i):this.renderer.snapshotCanvas(this.canvas,n,!0,t,i),this},preDestroy:function(){this._saved||(a.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});t.exports=D},function(t,i){t.exports=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var i=16*Math.random()|0;return("x"===t?i:3&i|8).toString(16)}))}},function(t,i,n){var r=n(164),o=n(0),a=n(11),h=n(15),d=n(92),f=n(1085),p=n(3),T=new o({Extends:h,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.Flip,a.Mask,a.Pipeline,a.Size,a.Texture,a.Transform,a.Visible,a.ScrollFactor,f],initialize:function Rope2(t,i,n,o,a,f,T,b,S){void 0===o&&(o="__DEFAULT"),void 0===f&&(f=2),void 0===T&&(T=!0),h.call(this,t,"Rope"),this.anims=new r(this),this.points=f,this.vertices,this.uv,this.colors,this.alphas,this.tintFill="__DEFAULT"===o,this.dirty=!1,this.horizontal=T,this._flipX=!1,this._flipY=!1,this._perp=new p,this.debugCallback=null,this.debugGraphic=null,this.setTexture(o,a),this.setPosition(i,n),this.setSizeToFrame(),this.initPipeline(d.ROPE_PIPELINE),Array.isArray(f)&&this.resizeArrays(f.length),this.setPoints(f,b,S),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(t,i){var n=this.anims.currentFrame;this.anims.update(t,i),this.anims.currentFrame!==n&&(this.updateUVs(),this.updateVertices())},play:function(t,i,n){return this.anims.play(t,i,n),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(t,i,n){return void 0===t&&(t=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(t,i,n))},setVertical:function(t,i,n){return void 0===t&&(t=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(t,i,n)):this},setTintFill:function(t){return void 0===t&&(t=!1),this.tintFill=t,this},setAlphas:function(t,i){var n=this.points.length;if(n<1)return this;var r,o=this.alphas;void 0===t?t=[1]:Array.isArray(t)||void 0!==i||(t=[t]);var a=0;if(void 0!==i)for(r=0;r<n;r++)o[a=2*r]=t,o[a+1]=i;else if(t.length===n)for(r=0;r<n;r++)o[a=2*r]=t[r],o[a+1]=t[r];else{var h=t[0];for(r=0;r<n;r++)a=2*r,t.length>a&&(h=t[a]),o[a]=h,t.length>a+1&&(h=t[a+1]),o[a+1]=h}return this},setColors:function(t){var i=this.points.length;if(i<1)return this;var n,r=this.colors;void 0===t?t=[16777215]:Array.isArray(t)||(t=[t]);var o=0;if(t.length===i)for(n=0;n<i;n++)r[o=2*n]=t[n],r[o+1]=t[n];else{var a=t[0];for(n=0;n<i;n++)o=2*n,t.length>o&&(a=t[o]),r[o]=a,t.length>o+1&&(a=t[o+1]),r[o+1]=a}return this},setPoints:function(t,i,n){if(void 0===t&&(t=2),"number"==typeof t){var r,o,a,h=t;if(h<2&&(h=2),t=[],this.horizontal)for(a=-this.frame.halfWidth,o=this.frame.width/(h-1),r=0;r<h;r++)t.push({x:a+r*o,y:0});else for(a=-this.frame.halfHeight,o=this.frame.height/(h-1),r=0;r<h;r++)t.push({x:0,y:a+r*o})}var d=t.length,f=this.points.length;return d<1?(console.warn("Rope: Not enough points given"),this):(1===d&&(t.unshift({x:0,y:0}),d++),f!==d&&this.resizeArrays(d),this.points=t,this.updateUVs(),null!=i&&this.setColors(i),null!=n&&this.setAlphas(n),this)},updateUVs:function(){for(var t=this.uv,i=this.points.length,n=this.frame.u0,r=this.frame.v0,o=this.frame.u1,a=this.frame.v1,h=(o-n)/(i-1),d=(a-r)/(i-1),f=0;f<i;f++){var p,T,b,S,A=4*f;this.horizontal?(this._flipX?(p=o-f*h,b=o-f*h):(p=n+f*h,b=n+f*h),this._flipY?(T=a,S=r):(T=r,S=a)):(this._flipX?(p=n,b=o):(p=o,b=n),this._flipY?(T=a-f*d,S=a-f*d):(T=r+f*d,S=r+f*d)),t[A+0]=p,t[A+1]=T,t[A+2]=b,t[A+3]=S}return this},resizeArrays:function(t){var i=this.colors,n=this.alphas;this.vertices=new Float32Array(4*t),this.uv=new Float32Array(4*t),i=new Uint32Array(2*t),n=new Float32Array(2*t);for(var r=0;r<2*t;r++)i[r]=16777215,n[r]=1;return this.colors=i,this.alphas=n,this.dirty=!0,this},updateVertices:function(){var t=this._perp,i=this.points,n=this.vertices,r=i.length;if(this.dirty=!1,!(r<1)){for(var o,a=i[0],h=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,d=0;d<r;d++){var f=i[d],p=4*d;o=d<r-1?i[d+1]:f,t.x=o.y-a.y,t.y=-(o.x-a.x);var T=t.length();t.x/=T,t.y/=T,t.x*=h,t.y*=h,n[p]=f.x+t.x,n[p+1]=f.y+t.y,n[p+2]=f.x-t.x,n[p+3]=f.y-t.y,a=f}return this}},setDebug:function(t,i){return this.debugGraphic=t,this.debugCallback=t||i?i||this.renderDebugVerts:null,this},renderDebugVerts:function(t,i,n){var r=t.debugGraphic,o=n[0],a=n[1],h=n[2],d=n[3];r.lineBetween(o,a,h,d);for(var f=4;f<i;f+=4){var p=n[f+0],T=n[f+1],b=n[f+2],S=n[f+3];r.lineBetween(o,a,p,T),r.lineBetween(h,d,b,S),r.lineBetween(h,d,p,T),r.lineBetween(p,T,b,S),o=p,a=T,h=b,d=S}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(t){return this._flipX=t,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(t){return this._flipY=t,this.updateUVs()}}});t.exports=T},function(t,i,n){var r=n(142),o=n(31),a=n(0),h=n(11),d=n(22),f=n(15),p=n(458),T=n(6),b=n(202),S=n(1088),A=n(459),P=new a({Extends:f,Mixins:[h.Alpha,h.BlendMode,h.ComputedSize,h.Crop,h.Depth,h.Flip,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.ScrollFactor,h.Tint,h.Transform,h.Visible,S],initialize:function Text2(t,i,n,r,a){void 0===i&&(i=0),void 0===n&&(n=0),f.call(this,t,"Text"),this.renderer=t.sys.renderer,this.setPosition(i,n),this.setOrigin(0,0),this.initPipeline(),this.canvas=o.create(this),this.context=this.canvas.getContext("2d"),this.style=new A(this,a),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,0===this.style.resolution&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(r),a&&a.padding&&this.setPadding(a.padding),a&&a.lineSpacing&&this.setLineSpacing(a.lineSpacing),t.sys.game.events.on(d.CONTEXT_RESTORED,(function(){this.dirty=!0}),this)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",r(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(t){var i=this.style;if(i.wordWrapCallback){var n=i.wordWrapCallback.call(i.wordWrapCallbackScope,t,this);return Array.isArray(n)&&(n=n.join("\n")),n}return i.wordWrapWidth?i.wordWrapUseAdvanced?this.advancedWordWrap(t,this.context,this.style.wordWrapWidth):this.basicWordWrap(t,this.context,this.style.wordWrapWidth):t},advancedWordWrap:function(t,i,n){for(var r="",o=t.replace(/ +/gi," ").split(this.splitRegExp),a=o.length,h=0;h<a;h++){var d=o[h],f="";if(d=d.replace(/^ *|\s*$/gi,""),i.measureText(d).width<n)r+=d+"\n";else{for(var p=n,T=d.split(" "),b=0;b<T.length;b++){var S=T[b],A=S+" ",P=i.measureText(A).width;if(P>p){if(0===b){for(var O=A;O.length&&(O=O.slice(0,-1),!((P=i.measureText(O).width)<=p)););if(!O.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var L=S.substr(O.length);T[b]=L,f+=O}var D=T[b].length?b:b+1,I=T.slice(D).join(" ").replace(/[ \n]*$/gi,"");o[h+1]=I+" "+(o[h+1]||""),a=o.length;break}f+=A,p-=P}r+=f.replace(/[ \n]*$/gi,"")+"\n"}}return r=r.replace(/[\s|\n]*$/gi,"")},basicWordWrap:function(t,i,n){for(var r="",o=t.split(this.splitRegExp),a=o.length-1,h=i.measureText(" ").width,d=0;d<=a;d++){for(var f=n,p=o[d].split(" "),T=p.length-1,b=0;b<=T;b++){var S=p[b],A=i.measureText(S).width,P=A;b<T&&(P+=h),P>f&&b>0&&(r+="\n",f=n),r+=S,b<T?(r+=" ",f-=P):f-=A}d<a&&(r+="\n")}return r},getWrappedText:function(t){return void 0===t&&(t=this._text),this.style.syncFont(this.canvas,this.context),this.runWordWrap(t).split(this.splitRegExp)},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this._text&&(this._text=t.toString(),this.updateText()),this},setStyle:function(t){return this.style.setStyle(t)},setFont:function(t){return this.style.setFont(t)},setFontFamily:function(t){return this.style.setFontFamily(t)},setFontSize:function(t){return this.style.setFontSize(t)},setFontStyle:function(t){return this.style.setFontStyle(t)},setFixedSize:function(t,i){return this.style.setFixedSize(t,i)},setBackgroundColor:function(t){return this.style.setBackgroundColor(t)},setFill:function(t){return this.style.setFill(t)},setColor:function(t){return this.style.setColor(t)},setStroke:function(t,i){return this.style.setStroke(t,i)},setShadow:function(t,i,n,r,o,a){return this.style.setShadow(t,i,n,r,o,a)},setShadowOffset:function(t,i){return this.style.setShadowOffset(t,i)},setShadowColor:function(t){return this.style.setShadowColor(t)},setShadowBlur:function(t){return this.style.setShadowBlur(t)},setShadowStroke:function(t){return this.style.setShadowStroke(t)},setShadowFill:function(t){return this.style.setShadowFill(t)},setWordWrapWidth:function(t,i){return this.style.setWordWrapWidth(t,i)},setWordWrapCallback:function(t,i){return this.style.setWordWrapCallback(t,i)},setAlign:function(t){return this.style.setAlign(t)},setResolution:function(t){return this.style.setResolution(t)},setLineSpacing:function(t){return this.lineSpacing=t,this.updateText()},setPadding:function(t,i,n,r){if("object"==typeof t){var o=t,a=T(o,"x",null);null!==a?(t=a,n=a):(t=T(o,"left",0),n=T(o,"right",t));var h=T(o,"y",null);null!==h?(i=h,r=h):(i=T(o,"top",0),r=T(o,"bottom",i))}else void 0===t&&(t=0),void 0===i&&(i=t),void 0===n&&(n=t),void 0===r&&(r=i);return this.padding.left=t,this.padding.top=i,this.padding.right=n,this.padding.bottom=r,this.updateText()},setMaxLines:function(t){return this.style.setMaxLines(t)},updateText:function(){var t=this.canvas,i=this.context,n=this.style,r=n.resolution,o=n.metrics;n.syncFont(t,i);var a=this._text;(n.wordWrapWidth||n.wordWrapCallback)&&(a=this.runWordWrap(this._text));var h,d=a.split(this.splitRegExp),f=p(this,o,d),T=this.padding;0===n.fixedWidth?(this.width=f.width+T.left+T.right,h=f.width):(this.width=n.fixedWidth,(h=this.width-T.left-T.right)<f.width&&(h=f.width)),0===n.fixedHeight?this.height=f.height+T.top+T.bottom:this.height=n.fixedHeight;var b,S,A=this.width,P=this.height;this.updateDisplayOrigin(),A*=r,P*=r,A=Math.max(A,1),P=Math.max(P,1),t.width!==A||t.height!==P?(t.width=A,t.height=P,this.frame.setSize(A,P),n.syncFont(t,i)):i.clearRect(0,0,A,P),i.save(),i.scale(r,r),n.backgroundColor&&(i.fillStyle=n.backgroundColor,i.fillRect(0,0,A,P)),n.syncStyle(t,i),i.textBaseline="alphabetic",i.translate(T.left,T.top);for(var O=0;O<f.lines;O++){if(b=n.strokeThickness/2,S=n.strokeThickness/2+O*f.lineHeight+o.ascent,O>0&&(S+=f.lineSpacing*O),n.rtl)b=A-b;else if("right"===n.align)b+=h-f.lineWidths[O];else if("center"===n.align)b+=(h-f.lineWidths[O])/2;else if("justify"===n.align&&f.lineWidths[O]/f.width>=.85){var L=f.width-f.lineWidths[O],D=i.measureText(" ").width,I=d[O].trim(),F=I.split(" ");L+=(d[O].length-I.length)*D;for(var B=Math.floor(L/D),N=0;B>0;)F[N]+=" ",N=(N+1)%(F.length-1||1),--B;d[O]=F.join(" ")}this.autoRound&&(b=Math.round(b),S=Math.round(S)),n.strokeThickness&&(this.style.syncShadow(i,n.shadowStroke),i.strokeText(d[O],b,S)),n.color&&(this.style.syncShadow(i,n.shadowFill),i.fillText(d[O],b,S))}i.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(t,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var Y=this.input;return Y&&!Y.customHitArea&&(Y.hitArea.width=this.width,Y.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(t){this.setText(t)}},toJSON:function(){var t=h.ToJSON(this),i={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=i,t},preDestroy:function(){this.style.rtl&&b(this.canvas),o.remove(this.canvas),this.texture.destroy()}});t.exports=P},function(t,i,n){var r=n(31),o=n(0),a=n(11),h=n(22),d=n(15),f=n(361),p=n(192),T=n(1091),b=n(3),S=new o({Extends:d,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Crop,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Tint,a.Transform,a.Visible,T],initialize:function TileSprite2(t,i,n,o,a,p,T){var S=t.sys.renderer;d.call(this,t,"TileSprite");var A=t.sys.textures.get(p),P=A.get(T);o&&a?(o=Math.floor(o),a=Math.floor(a)):(o=P.width,a=P.height),this._tilePosition=new b,this._tileScale=new b(1,1),this.dirty=!1,this.renderer=S,this.canvas=r.create(this,o,a),this.context=this.canvas.getContext("2d"),this.displayTexture=A,this.displayFrame=P,this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=f(P.width),this.potHeight=f(P.height),this.fillCanvas=r.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(i,n),this.setSize(o,a),this.setFrame(T),this.setOriginFromFrame(),this.initPipeline(),t.sys.game.events.on(h.CONTEXT_RESTORED,(function(t){if(t){var i=t.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=t.createTexture2D(0,i.LINEAR,i.LINEAR,i.REPEAT,i.REPEAT,i.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}}),this)},setTexture:function(t,i){return this.displayTexture=this.scene.sys.textures.get(t),this.setFrame(i)},setFrame:function(t){var i=this.displayTexture.get(t);return this.potWidth=f(i.width),this.potHeight=f(i.height),this.canvas.width=0,i.cutWidth&&i.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this.displayFrame=i,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(t,i){return void 0!==t&&(this.tilePositionX=t),void 0!==i&&(this.tilePositionY=i),this},setTileScale:function(t,i){return void 0===t&&(t=this.tileScaleX),void 0===i&&(i=t),this.tileScaleX=t,this.tileScaleY=i,this},updateTileTexture:function(){if(this.dirty&&this.renderer){var t=this.displayFrame;if(t.source.isRenderTexture||t.source.isGLTexture)return console.warn("TileSprites can only use Image or Canvas based textures"),void(this.dirty=!1);var i=this.fillContext,n=this.fillCanvas,r=this.potWidth,o=this.potHeight;this.renderer&&this.renderer.gl||(r=t.cutWidth,o=t.cutHeight),i.clearRect(0,0,r,o),n.width=r,n.height=o,i.drawImage(t.source.image,t.cutX,t.cutY,t.cutWidth,t.cutHeight,0,0,r,o),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(n,this.fillPattern):this.fillPattern=i.createPattern(n,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var t=this.canvas;if(t.width===this.width&&t.height===this.height||(t.width=this.width,t.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl)this.dirty=!1;else{var i=this.context;this.scene.sys.game.config.antialias||p.disable(i);var n=this._tileScale.x,r=this._tileScale.y,o=this._tilePosition.x,a=this._tilePosition.y;i.clearRect(0,0,this.width,this.height),i.save(),i.scale(n,r),i.translate(-o,-a),i.fillStyle=this.fillPattern,i.fillRect(o,a,this.width/n,this.height/r),i.restore(),this.dirty=!1}},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),r.remove(this.canvas),r.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(t){this._tilePosition.x=t,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(t){this._tilePosition.y=t,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(t){this._tileScale.x=t,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(t){this._tileScale.y=t,this.dirty=!0}}});t.exports=S},function(t,i,n){var r=n(0),o=n(18),a=n(11),h=n(75),d=n(22),f=n(51),p=n(15),T=n(70),b=n(222),S=n(1094),A=n(14),P=new r({Extends:p,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Size,a.TextureCrop,a.Tint,a.Transform,a.Visible,S],initialize:function Video2(t,i,n,r){p.call(this,t,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=b(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=A.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(i,n),this.initPipeline(),r&&this.changeSource(r,!1);var o=t.sys.game.events;o.on(d.PAUSE,this.globalPause,this),o.on(d.RESUME,this.globalResume,this);var a=t.sys.sound;a&&a.on(T.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(t,i,n){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var r=this.video;if(!r)return console.warn("Video not loaded"),this;void 0===t&&(t=r.loop);var o=this.scene.sys.sound;o&&o.mute&&this.setMute(!0),isNaN(i)||(this._markerIn=i),!isNaN(n)&&n>i&&(this._markerOut=n),r.loop=t;var a=this._callbacks,h=r.play();return void 0!==h?h.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(r.addEventListener("playing",a.play,!0),r.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),r.addEventListener("ended",a.end,!0),r.addEventListener("timeupdate",a.time,!0),r.addEventListener("seeking",a.seeking,!0),r.addEventListener("seeked",a.seeked,!0),this},changeSource:function(t,i,n,r,o){void 0===i&&(i=!0),this.video&&this.stop();var a=this.scene.sys.cache.video.get(t);return a?(this.video=a,this._cacheKey=t,this._codePaused=a.paused,this._codeMuted=a.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,a,a.videoWidth,a.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,a.videoWidth,a.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(h.VIDEO_CREATED,this,a.videoWidth,a.videoHeight)):this.updateTexture(),a.currentTime=0,this._lastUpdate=0,i&&this.play(n,r,o)):this.video=null,this},addMarker:function(t,i,n){return!isNaN(i)&&i>=0&&!isNaN(n)&&(this.markers[t]=[i,n]),this},playMarker:function(t,i){var n=this.markers[t];return n&&this.play(i,n[0],n[1]),this},removeMarker:function(t){return delete this.markers[t],this},snapshot:function(t,i){return void 0===t&&(t=this.width),void 0===i&&(i=this.height),this.snapshotArea(0,0,this.width,this.height,t,i)},snapshotArea:function(t,i,n,r,o,a){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=this.width),void 0===r&&(r=this.height),void 0===o&&(o=n),void 0===a&&(a=r);var h=this.video,d=this.snapshotTexture;return d?(d.setSize(o,a),h&&d.context.drawImage(h,t,i,n,r,0,0,o,a)):(d=this.scene.sys.textures.createCanvas(b(),o,a),this.snapshotTexture=d,h&&d.context.drawImage(h,t,i,n,r,0,0,o,a)),d.update()},saveSnapshotTexture:function(t){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,t):this.snapshotTexture=this.scene.sys.textures.createCanvas(t,this.width,this.height),this.snapshotTexture},loadURL:function(t,i,n){void 0===n&&(n=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var r=document.createElement("video");return r.controls=!1,n&&(r.muted=!0,r.defaultMuted=!0,r.setAttribute("autoplay","autoplay")),r.setAttribute("playsinline","playsinline"),r.setAttribute("preload","auto"),r.addEventListener("error",this._callbacks.error,!0),r.src=t,r.load(),this.video=r,this},loadMediaStream:function(t,i,n){void 0===n&&(n=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var r=document.createElement("video");r.controls=!1,n&&(r.muted=!0,r.defaultMuted=!0,r.setAttribute("autoplay","autoplay")),r.setAttribute("playsinline","playsinline"),r.setAttribute("preload","auto"),r.addEventListener("error",this._callbacks.error,!0);try{r.srcObject=t}catch(o){r.src=window.URL.createObjectURL(t)}return r.load(),this.video=r,this},playPromiseSuccessHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(h.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(t){this.scene.sys.input.once(f.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(h.VIDEO_ERROR,this,t)},playHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(h.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(t){this.stop(),this.emit(h.VIDEO_ERROR,this,t)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(h.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(h.VIDEO_PLAY,this)},completeHandler:function(){this.emit(h.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(h.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var t=this.video;if(t){var i=t.currentTime;i!==this._lastUpdate&&(this._lastUpdate=i,this.updateTexture(),i>=this._markerOut&&(t.loop?(t.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=i,this.emit(h.VIDEO_LOOP,this)):(this.emit(h.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(h.VIDEO_TIMEOUT,this))},updateTexture:function(){var t=this.video,i=t.videoWidth,n=t.videoHeight;if(this.videoTexture){var r=this.videoTextureSource;r.source!==t&&(r.source=t,r.width=i,r.height=n),r.update()}else this.videoTexture=this.scene.sys.textures.create(this._key,t,i,n),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,i,n),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(h.VIDEO_CREATED,this,i,n)},getVideoKey:function(){return this._cacheKey},seekTo:function(t){var i=this.video;if(i){var n=i.duration;if(n!==1/0&&!isNaN(n)){var r=n*t;this.setCurrentTime(r)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(t){var i=this.video;if(i){if("string"==typeof t){var n=t[0],r=parseFloat(t.substr(1));"+"===n?t=i.currentTime+r:"-"===n&&(t=i.currentTime-r)}i.currentTime=t,this._lastUpdate=t}return this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(h.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(h.VIDEO_SEEKED,this),this.video&&this.updateTexture()},getProgress:function(){var t=this.video;if(t){var i=t.currentTime,n=t.duration;if(n!==1/0&&!isNaN(n))return i/n}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(t){void 0===t&&(t=!0),this._codeMuted=t;var i=this.video;return i&&(i.muted=!!this._systemMuted||t),this},isMuted:function(){return this._codeMuted},globalMute:function(t,i){this._systemMuted=i;var n=this.video;n&&(n.muted=!!this._codeMuted||i)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(t){void 0===t&&(t=!0);var i=this.video;return this._codePaused=t,i&&(t?i.paused||i.pause():t||i.paused&&!this._systemPaused&&i.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(t){return void 0===t&&(t=1),this.video&&(this.video.volume=o(t,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(t){return this.video&&(this.video.playbackRate=t),this},getLoop:function(){return!!this.video&&this.video.loop},setLoop:function(t){return void 0===t&&(t=!0),this.video&&(this.video.loop=t),this},isPlaying:function(){return!!this.video&&!(this.video.paused||this.video.ended)},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(t,i){return void 0===i&&(i=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,t),this._key=t,this.flipY=i,this.videoTextureSource&&this.videoTextureSource.setFlipY(i),this.videoTexture},stop:function(){var t=this.video;if(t){var i=this._callbacks;for(var n in i)t.removeEventListener(n,i[n],!0);t.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(h.VIDEO_STOP,this),this},removeVideoElement:function(){var t=this.video;if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("autoplay"),t.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var t=this.scene.sys.game.events;t.off(d.PAUSE,this.globalPause,this),t.off(d.RESUME,this.globalResume,this);var i=this.scene.sys.sound;i&&i.off(T.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});t.exports=P},function(t,i,n){var r=n(0),o=n(228),a=n(470),h=n(56),d=new r({initialize:function Polygon2(t){this.type=h.POLYGON,this.area=0,this.points=[],t&&this.setTo(t)},contains:function(t,i){return o(this,t,i)},setTo:function(t){if(this.area=0,this.points=[],"string"==typeof t&&(t=t.split(" ")),!Array.isArray(t))return this;for(var i,n=Number.MAX_VALUE,r=0;r<t.length;r++)i={x:0,y:0},"number"==typeof t[r]||"string"==typeof t[r]?(i.x=parseFloat(t[r]),i.y=parseFloat(t[r+1]),r++):Array.isArray(t[r])?(i.x=t[r][0],i.y=t[r][1]):(i.x=t[r].x,i.y=t[r].y),this.points.push(i),i.y<n&&(n=i.y);return this.calculateArea(n),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var t,i,n=0,r=0;r<this.points.length-1;r++)t=this.points[r],n+=((i=this.points[r+1]).x-t.x)*(t.y+i.y);return t=this.points[0],i=this.points[this.points.length-1],n+=(t.x-i.x)*(i.y+t.y),this.area=.5*-n,this.area},getPoints:function(t,i,n){return a(this,t,i,n)}});t.exports=d},function(t,i){t.exports=function(t,i,n){for(var r=!1,o=-1,a=t.points.length-1;++o<t.points.length;a=o){var h=t.points[o].x,d=t.points[o].y,f=t.points[a].x,p=t.points[a].y;(d<=n&&n<p||p<=n&&n<d)&&i<(f-h)*(n-d)/(p-d)+h&&(r=!r)}return r}},function(t,i,n){var r=n(0),o=n(11),a=n(15),h=n(2),d=n(17),f=n(478),p=n(1176),T=n(25),b=new r({Extends:a,Mixins:[o.ComputedSize,o.Depth,o.GetBounds,o.Mask,o.Origin,o.ScrollFactor,o.Transform,o.Visible,p],initialize:function Shader2(t,i,n,r,o,h,d,f){void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=128),void 0===h&&(h=128),a.call(this,t,"Shader"),this.blendMode=-1,this.shader;var p=t.sys.renderer;this.renderer=p,this.gl=p.gl,this.vertexData=new ArrayBuffer(2*Float32Array.BYTES_PER_ELEMENT*6),this.vertexBuffer=p.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new T,this._tempMatrix2=new T,this._tempMatrix3=new T,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=p.width,this._rendererHeight=p.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(n,r),this.setSize(o,h),this.setOrigin(.5,.5),this.setShader(i,d,f)},willRender:function(t){return!!this.renderToTexture||!(a.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},setRenderToTexture:function(t,i){if(void 0===i&&(i=!1),!this.renderToTexture){var n=this.width,r=this.height,o=this.renderer;this.glTexture=o.createTextureFromSource(null,n,r,0),this.glTexture.flipY=i,this.framebuffer=o.createFramebuffer(n,r,this.glTexture,!1),this._rendererWidth=n,this._rendererHeight=r,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),t&&(this.texture=this.scene.sys.textures.addGLTexture(t,this.glTexture,n,r))}return this.shader&&(o.pipelines.clear(),this.load(),this.flush(),o.pipelines.rebind()),this},setShader:function(t,i,n){if(void 0===i&&(i=[]),"string"==typeof t){var r=this.scene.sys.cache.shader;if(!r.has(t))return console.warn("Shader missing: "+t),this;this.shader=r.get(t)}else this.shader=t;var o=this.gl,a=this.renderer;this.program&&o.deleteProgram(this.program);var h=a.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);o.uniformMatrix4fv(o.getUniformLocation(h,"uViewMatrix"),!1,this.viewMatrix),o.uniformMatrix4fv(o.getUniformLocation(h,"uProjectionMatrix"),!1,this.projectionMatrix),o.uniform2f(o.getUniformLocation(h,"uResolution"),this.width,this.height),this.program=h;var f=new Date,p={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[f.getFullYear(),f.getMonth(),f.getDate(),60*f.getHours()*60+60*f.getMinutes()+f.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=d(!0,{},this.shader.uniforms,p):this.uniforms=p;for(var T=0;T<4;T++)i[T]&&this.setSampler2D("iChannel"+T,i[T],T,n);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(t){return this.pointer=t,this},projOrtho:function(t,i,n,r){var o=1/(t-i),a=1/(n-r),h=this.projectionMatrix;h[0]=-2*o,h[5]=-2*a,h[10]=-.001,h[12]=(t+i)*o,h[13]=(r+n)*a,h[14]=-0;var d=this.program,f=this.gl;this.renderer.setProgram(d),f.uniformMatrix4fv(f.getUniformLocation(d,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=i,this._rendererHeight=n},initUniforms:function(){var t=this.gl,i=this.renderer.glFuncMap,n=this.program;for(var r in this._textureCount=0,this.uniforms){var o=this.uniforms[r],a=o.type,h=i[a];o.uniformLocation=t.getUniformLocation(n,r),"sampler2D"!==a&&(o.glMatrix=h.matrix,o.glValueLength=h.length,o.glFunc=h.func)}},setSampler2DBuffer:function(t,i,n,r,o,a){void 0===o&&(o=0),void 0===a&&(a={});var h=this.uniforms[t];return h.value=i,a.width=n,a.height=r,h.textureData=a,this._textureCount=o,this.initSampler2D(h),this},setSampler2D:function(t,i,n,r){void 0===n&&(n=0);var o=this.scene.sys.textures;if(o.exists(i)){var a=o.getFrame(i);if(a.glTexture&&a.glTexture.isRenderTexture)return this.setSampler2DBuffer(t,a.glTexture,a.width,a.height,n,r);var h=this.uniforms[t],d=a.source;h.textureKey=i,h.source=d.image,h.value=a.glTexture,d.isGLTexture&&(r||(r={}),r.width=d.width,r.height=d.height),r&&(h.textureData=r),this._textureCount=n,this.initSampler2D(h)}return this},setUniform:function(t,i){return f(this.uniforms,t,i),this},getUniform:function(t){return h(this.uniforms,t,null)},setChannel0:function(t,i){return this.setSampler2D("iChannel0",t,0,i)},setChannel1:function(t,i){return this.setSampler2D("iChannel1",t,1,i)},setChannel2:function(t,i){return this.setSampler2D("iChannel2",t,2,i)},setChannel3:function(t,i){return this.setSampler2D("iChannel3",t,3,i)},initSampler2D:function(t){if(t.value){var i=this.gl;i.activeTexture(i.TEXTURE0+this._textureCount),i.bindTexture(i.TEXTURE_2D,t.value);var n=t.textureData;if(n&&!t.value.isRenderTexture){var r=i[h(n,"magFilter","linear").toUpperCase()],o=i[h(n,"minFilter","linear").toUpperCase()],a=i[h(n,"wrapS","repeat").toUpperCase()],d=i[h(n,"wrapT","repeat").toUpperCase()],f=i[h(n,"format","rgba").toUpperCase()];if(n.repeat&&(a=i.REPEAT,d=i.REPEAT),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!!n.flipY),n.width){var p=h(n,"width",512),T=h(n,"height",2),b=h(n,"border",0);i.texImage2D(i.TEXTURE_2D,0,f,p,T,b,f,i.UNSIGNED_BYTE,null)}else i.texImage2D(i.TEXTURE_2D,0,f,i.RGBA,i.UNSIGNED_BYTE,t.source);i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,r),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,o),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,a),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,d)}this.renderer.setProgram(this.program),i.uniform1i(t.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var t,i,n,r,o,a=this.gl,h=this.uniforms,d=0;for(var f in h)n=(t=h[f]).glFunc,i=t.glValueLength,r=t.uniformLocation,null!==(o=t.value)&&(1===i?t.glMatrix?n.call(a,r,t.transpose,o):n.call(a,r,o):2===i?n.call(a,r,o.x,o.y):3===i?n.call(a,r,o.x,o.y,o.z):4===i?n.call(a,r,o.x,o.y,o.z,o.w):"sampler2D"===t.type&&(a.activeTexture(a.TEXTURE0+d),a.bindTexture(a.TEXTURE_2D,o),a.uniform1i(r,d),d++))},load:function(t){var i=this.gl,n=this.width,r=this.height,o=this.renderer,a=this.program,h=this.viewMatrix;if(!this.renderToTexture){var d=-this._displayOriginX,f=-this._displayOriginY;h[0]=t[0],h[1]=t[1],h[4]=t[2],h[5]=t[3],h[8]=t[4],h[9]=t[5],h[12]=h[0]*d+h[4]*f,h[13]=h[1]*d+h[5]*f}i.useProgram(a),i.uniformMatrix4fv(i.getUniformLocation(a,"uViewMatrix"),!1,h),i.uniform2f(i.getUniformLocation(a,"uResolution"),this.width,this.height);var p=this.uniforms,T=p.resolution;T.value.x=n,T.value.y=r,p.time.value=o.game.loop.getDuration();var b=this.pointer;if(b){var S=p.mouse,A=b.x/n,P=1-b.y/r;S.value.x=A.toFixed(2),S.value.y=P.toFixed(2)}this.syncUniforms()},flush:function(){var t=this.width,i=this.height,n=this.program,r=this.gl,o=this.vertexBuffer,a=this.renderer,h=2*Float32Array.BYTES_PER_ELEMENT;this.renderToTexture&&(a.setFramebuffer(this.framebuffer),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT)),r.bindBuffer(r.ARRAY_BUFFER,o);var d=r.getAttribLocation(n,"inPosition");-1!==d&&(r.enableVertexAttribArray(d),r.vertexAttribPointer(d,2,r.FLOAT,!1,h,0));var f=this.vertexViewF32;f[3]=i,f[4]=t,f[5]=i,f[8]=t,f[9]=i,f[10]=t,r.bufferSubData(r.ARRAY_BUFFER,0,this.bytes.subarray(0,6*h)),r.drawArrays(r.TRIANGLES,0,6),this.renderToTexture&&a.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var t=this.gl;t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});t.exports=b},function(t,i,n){var r=n(0),o=n(11),a=n(36),h=n(116),d=n(15),f=n(479),p=n(480),T=n(19),b=n(69),S=n(1179),A=n(79),P=n(39),O=n(117),L=new r({Extends:d,Mixins:[o.AlphaSingle,o.BlendMode,o.Depth,o.Mask,o.Pipeline,o.Size,o.Texture,o.Transform,o.Visible,o.ScrollFactor,S],initialize:function Mesh2(t,i,n,r,o,a,h,f,p,T,S,A){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r="__WHITE"),d.call(this,t,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new P,this.modelScale=new P(1,1,1),this.modelRotation=new P,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new b,this.viewPosition=new P,this.viewMatrix=new b,this.projectionMatrix=new b,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var O=t.sys.renderer;this.setPosition(i,n),this.setTexture(r,o),this.setSize(O.width,O.height),this.initPipeline(),this.setPerspective(O.width,O.height),a&&this.addVertices(a,h,f,p,T,S,A)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(t){return this.viewPosition.addScale(P.LEFT,t),this.dirtyCache[10]=1,this},panY:function(t){return this.viewPosition.y+=P.DOWN.y*t,this.dirtyCache[10]=1,this},panZ:function(t){return this.viewPosition.z+=t,this.dirtyCache[10]=1,this},setPerspective:function(t,i,n,r,o){return void 0===n&&(n=45),void 0===r&&(r=.01),void 0===o&&(o=1e3),this.projectionMatrix.perspective(a(n),t/i,r,o),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(t,i,n,r){return void 0===t&&(t=this.scene.sys.renderer.getAspectRatio()),void 0===i&&(i=1),void 0===n&&(n=-1e3),void 0===r&&(r=1e3),this.projectionMatrix.ortho(-t,t,-i,i,n,r),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach((function(t){t.destroy()})),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(t,i,n,r,o,a,h,d,f){var T=this.scene.sys.cache.obj.get(t);return T&&p(T,this,i,n,r,o,a,h,d,f),this},sortByDepth:function(t,i){return t.depth-i.depth},depthSort:function(){return A(this.faces,this.sortByDepth),this},addVertex:function(t,i,n,r,o,a,h){var d=new O(t,i,n,r,o,a,h);return this.vertices.push(d),d},addFace:function(t,i,n){var r=new h(t,i,n);return this.faces.push(r),this.dirtyCache[9]=-1,r},addVertices:function(t,i,n,r,o,a,h){var d=f(t,i,n,r,o,a,h);return d&&(this.faces=this.faces.concat(d.faces),this.vertices=this.vertices.concat(d.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(t){return this.faces[t]},getFaceAt:function(t,i,n){void 0===n&&(n=this.scene.sys.cameras.main);for(var r=T(this,n).calc,o=this.faces,a=[],h=0;h<o.length;h++){var d=o[h];d.contains(t,i,r)&&a.push(d)}return A(a,this.sortByDepth)},setDebug:function(t,i){return this.debugGraphic=t,this.debugCallback=t||i?i||this.renderDebug:null,this},isDirty:function(){var t=this.modelPosition,i=this.modelRotation,n=this.modelScale,r=this.dirtyCache,o=t.x,a=t.y,h=t.z,d=i.x,f=i.y,p=i.z,T=n.x,b=n.y,S=n.z,A=this.getFaceCount(),P=r[0],O=r[1],L=r[2],D=r[3],I=r[4],F=r[5],B=r[6],N=r[7],Y=r[8],X=r[9];return r[0]=o,r[1]=a,r[2]=h,r[3]=d,r[4]=f,r[5]=p,r[6]=T,r[7]=b,r[8]=S,r[9]=A,P!==o||O!==a||L!==h||D!==d||I!==f||F!==p||B!==T||N!==b||Y!==S||X!==A},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var t=this.dirtyCache;if(this.ignoreDirtyCache||t[10]||this.isDirty()){var i=this.width,n=this.height,r=this.viewMatrix,o=this.viewPosition;t[10]&&(r.identity(),r.translate(o),r.invert(),t[10]=0);var a=this.transformMatrix;a.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var h=o.z,d=this.faces,f=0;f<d.length;f++)d[f].transformCoordinatesLocal(a,i,n,h);this.depthSort()}},renderDebug:function(t,i){for(var n=t.debugGraphic,r=0;r<i.length;r++){var o=i[r],a=o.vertex1.tx,h=o.vertex1.ty,d=o.vertex2.tx,f=o.vertex2.ty,p=o.vertex3.tx,T=o.vertex3.ty;n.strokeTriangle(a,h,d,f,p,T)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});t.exports=L},function(t,i,n){var r=n(50);t.exports=function(t,i){return r(t.x,t.y,i.x,i.y)<=t.radius+i.radius}},function(t,i,n){var r=n(4),o=n(233);t.exports=function(t,i,n){if(void 0===n&&(n=[]),o(t,i)){var a,h,d=t.x1,f=t.y1,p=t.x2,T=t.y2,b=i.x,S=i.y,A=i.radius,P=p-d,O=T-f,L=d-b,D=f-S,I=P*P+O*O,F=2*(P*L+O*D),B=F*F-4*I*(L*L+D*D-A*A);if(0===B){var N=-F/(2*I);a=d+N*P,h=f+N*O,N>=0&&N<=1&&n.push(new r(a,h))}else if(B>0){var Y=(-F-Math.sqrt(B))/(2*I);a=d+Y*P,h=f+Y*O,Y>=0&&Y<=1&&n.push(new r(a,h));var X=(-F+Math.sqrt(B))/(2*I);a=d+X*P,h=f+X*O,X>=0&&X<=1&&n.push(new r(a,h))}}return n}},function(t,i,n){var r=n(66),o=new(n(4));t.exports=function(t,i,n){if(void 0===n&&(n=o),r(i,t.x1,t.y1))return n.x=t.x1,n.y=t.y1,!0;if(r(i,t.x2,t.y2))return n.x=t.x2,n.y=t.y2,!0;var a=t.x2-t.x1,h=t.y2-t.y1,d=i.x-t.x1,f=i.y-t.y1,p=a*a+h*h,T=a,b=h;if(p>0){var S=(d*a+f*h)/p;T*=S,b*=S}return n.x=t.x1+T,n.y=t.y1+b,T*T+b*b<=p&&T*a+b*h>=0&&r(i,n.x,n.y)}},function(t,i,n){var r=n(4),o=n(96),a=n(488);t.exports=function(t,i,n){if(void 0===n&&(n=[]),a(t,i))for(var h=i.getLineA(),d=i.getLineB(),f=i.getLineC(),p=i.getLineD(),T=[new r,new r,new r,new r],b=[o(h,t,T[0]),o(d,t,T[1]),o(f,t,T[2]),o(p,t,T[3])],S=0;S<4;S++)b[S]&&n.push(T[S]);return n}},function(t,i){t.exports=function(t,i,n,r){void 0===n&&(n=!1),void 0===r&&(r=[]);for(var o,a,h,d,f,p,T=t.x3-t.x1,b=t.y3-t.y1,S=t.x2-t.x1,A=t.y2-t.y1,P=T*T+b*b,O=T*S+b*A,L=S*S+A*A,D=P*L-O*O,I=0===D?0:1/D,F=t.x1,B=t.y1,N=0;N<i.length&&(a=(P*(p=S*(h=i[N].x-F)+A*(d=i[N].y-B))-O*(f=T*h+b*d))*I,!((o=(L*f-O*p)*I)>=0&&a>=0&&o+a<1&&(r.push({x:i[N].x,y:i[N].y}),n)));N++);return r}},function(t,i){t.exports=function(t,i,n,r){var o=Math.cos(r),a=Math.sin(r),h=t.x1-i,d=t.y1-n;return t.x1=h*o-d*a+i,t.y1=h*a+d*o+n,h=t.x2-i,d=t.y2-n,t.x2=h*o-d*a+i,t.y2=h*a+d*o+n,t}},function(t,i){t.exports=function(t){return 0===t.height?NaN:t.width/t.height}},function(t,i){t.exports=function(t,i,n,r){var o=Math.cos(r),a=Math.sin(r),h=t.x1-i,d=t.y1-n;return t.x1=h*o-d*a+i,t.y1=h*a+d*o+n,h=t.x2-i,d=t.y2-n,t.x2=h*o-d*a+i,t.y2=h*a+d*o+n,h=t.x3-i,d=t.y3-n,t.x3=h*o-d*a+i,t.y3=h*a+d*o+n,t}},function(t,i,n){t.exports={BUTTON_DOWN:n(1310),BUTTON_UP:n(1311),CONNECTED:n(1312),DISCONNECTED:n(1313),GAMEPAD_BUTTON_DOWN:n(1314),GAMEPAD_BUTTON_UP:n(1315)}},function(t,i,n){var r=n(17),o=n(156);t.exports=function(t,i){var n=void 0===t?o():r({},t);if(i)for(var a in i)void 0!==i[a]&&(n[a]=i[a]);return n}},function(t,i,n){var r=n(0),o=n(21),a=n(23),h=n(8),d=n(2),f=n(7),p=n(408),T=new r({Extends:a,initialize:function XMLFile2(t,i,n,r){var o="xml";if(f(i)){var h=i;i=d(h,"key"),n=d(h,"url"),r=d(h,"xhrSettings"),o=d(h,"extension",o)}var p={type:"xml",cache:t.cacheManager.xml,extension:o,responseType:"text",key:i,url:n,xhrSettings:r};a.call(this,t,p)},onProcess:function(){this.state=o.FILE_PROCESSING,this.data=p(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});h.register("xml",(function(t,i,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new T(this,t[r]));else this.addFile(new T(this,t,i,n));return this})),t.exports=T},function(t,i,n){var r=n(0),o=n(21),a=n(23),h=n(8),d=n(2),f=n(7),p=new r({Extends:a,initialize:function TextFile2(t,i,n,r){var o="text",h="txt",p=t.cacheManager.text;if(f(i)){var T=i;i=d(T,"key"),n=d(T,"url"),r=d(T,"xhrSettings"),h=d(T,"extension",h),o=d(T,"type",o),p=d(T,"cache",p)}var b={type:o,cache:p,extension:h,responseType:"text",key:i,url:n,xhrSettings:r};a.call(this,t,b)},onProcess:function(){this.state=o.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});h.register("text",(function(t,i,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new p(this,t[r]));else this.addFile(new p(this,t,i,n));return this})),t.exports=p},function(t,i,n){t.exports={Acceleration:n(1368),Angular:n(1369),Bounce:n(1370),Debug:n(1371),Drag:n(1372),Enable:n(1373),Friction:n(1374),Gravity:n(1375),Immovable:n(1376),Mass:n(1377),OverlapCirc:n(523),OverlapRect:n(244),Pushable:n(1378),Size:n(1379),Velocity:n(1380)}},function(t,i){t.exports=function(t,i,n,r,o,a,h){void 0===a&&(a=!0),void 0===h&&(h=!1);var d=[],f=[],p=t.treeMinMax;if(p.minX=i,p.minY=n,p.maxX=i+r,p.maxY=n+o,h&&(f=t.staticTree.search(p)),a&&t.useTree)d=t.tree.search(p);else if(a){var T=t.bodies,b={position:{x:i,y:n},left:i,top:n,right:i+r,bottom:n+o,isCircle:!1},S=t.intersects;T.iterate((function(t){S(t,b)&&d.push(t)}))}return f.concat(d)}},function(t,i,n){t.exports={COLLIDE:n(1381),OVERLAP:n(1382),PAUSE:n(1383),RESUME:n(1384),TILE_COLLIDE:n(1385),TILE_OVERLAP:n(1386),WORLD_BOUNDS:n(1387),WORLD_STEP:n(1388)}},function(t,i,n){var r=n(62);t.exports=function(t,i,n,o){var a=0,h=t.deltaAbsX()+i.deltaAbsX()+o;return 0===t._dx&&0===i._dx?(t.embedded=!0,i.embedded=!0):t._dx>i._dx?(a=t.right-i.x)>h&&!n||!1===t.checkCollision.right||!1===i.checkCollision.left?a=0:(t.touching.none=!1,t.touching.right=!0,i.touching.none=!1,i.touching.left=!0,i.physicsType!==r.STATIC_BODY||n||(t.blocked.none=!1,t.blocked.right=!0),t.physicsType!==r.STATIC_BODY||n||(i.blocked.none=!1,i.blocked.left=!0)):t._dx<i._dx&&(-(a=t.x-i.width-i.x)>h&&!n||!1===t.checkCollision.left||!1===i.checkCollision.right?a=0:(t.touching.none=!1,t.touching.left=!0,i.touching.none=!1,i.touching.right=!0,i.physicsType!==r.STATIC_BODY||n||(t.blocked.none=!1,t.blocked.left=!0),t.physicsType!==r.STATIC_BODY||n||(i.blocked.none=!1,i.blocked.right=!0))),t.overlapX=a,i.overlapX=a,a}},function(t,i,n){var r=n(62);t.exports=function(t,i,n,o){var a=0,h=t.deltaAbsY()+i.deltaAbsY()+o;return 0===t._dy&&0===i._dy?(t.embedded=!0,i.embedded=!0):t._dy>i._dy?(a=t.bottom-i.y)>h&&!n||!1===t.checkCollision.down||!1===i.checkCollision.up?a=0:(t.touching.none=!1,t.touching.down=!0,i.touching.none=!1,i.touching.up=!0,i.physicsType!==r.STATIC_BODY||n||(t.blocked.none=!1,t.blocked.down=!0),t.physicsType!==r.STATIC_BODY||n||(i.blocked.none=!1,i.blocked.up=!0)):t._dy<i._dy&&(-(a=t.y-i.bottom)>h&&!n||!1===t.checkCollision.up||!1===i.checkCollision.down?a=0:(t.touching.none=!1,t.touching.up=!0,i.touching.none=!1,i.touching.down=!0,i.physicsType!==r.STATIC_BODY||n||(t.blocked.none=!1,t.blocked.up=!0),t.physicsType!==r.STATIC_BODY||n||(i.blocked.none=!1,i.blocked.down=!0))),t.overlapY=a,i.overlapY=a,a}},function(t,i){t.exports=function(t,i){return!(i.right<=t.left||i.bottom<=t.top||i.position.x>=t.right||i.position.y>=t.bottom)}},function(t,i,n){t.exports={Bounce:n(1495),Collision:n(1496),Force:n(1497),Friction:n(1498),Gravity:n(1499),Mass:n(1500),Sensor:n(1501),SetBody:n(1502),Sleep:n(1503),Static:n(1520),Transform:n(1521),Velocity:n(1522)}},function(t,i){var n={};t.exports=n,n.create=function(t,i){var r=t.bodyA,o=t.bodyB,a={id:n.id(r,o),bodyA:r,bodyB:o,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:r.isSensor||o.isSensor,timeCreated:i,timeUpdated:i,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return n.update(a,t,i),a},n.update=function(t,i,r){if(t.collision=i,i.collided){var o=i.supports,a=t.activeContacts,h=i.parentA,d=i.parentB;t.inverseMass=h.inverseMass+d.inverseMass,t.friction=Math.min(h.friction,d.friction),t.frictionStatic=Math.max(h.frictionStatic,d.frictionStatic),t.restitution=Math.max(h.restitution,d.restitution),t.slop=Math.max(h.slop,d.slop);for(var f=0;f<o.length;f++)a[f]=o[f].contact;var p=o.length;p<a.length&&(a.length=p),t.separation=i.depth,n.setActive(t,!0,r)}else!0===t.isActive&&n.setActive(t,!1,r)},n.setActive=function(t,i,n){i?(t.isActive=!0,t.timeUpdated=n):(t.isActive=!1,t.activeContacts.length=0)},n.id=function(t,i){return t.id<i.id?"A"+t.id+"B"+i.id:"A"+i.id+"B"+t.id}},function(t,i,n){t.exports={CalculateFacesAt:n(252),CalculateFacesWithin:n(63),CheckIsoBounds:n(541),Copy:n(1420),CreateFromTiles:n(1421),CullBounds:n(543),CullTiles:n(544),Fill:n(1422),FilterTiles:n(1423),FindByIndex:n(1424),FindTile:n(1425),ForEachTile:n(1426),GetCullTilesFunction:n(1427),GetTileAt:n(158),GetTileAtWorldXY:n(1428),GetTilesWithin:n(26),GetTilesWithinShape:n(1429),GetTilesWithinWorldXY:n(529),GetTileToWorldXFunction:n(1430),GetTileToWorldXYFunction:n(1431),GetTileToWorldYFunction:n(1432),GetWorldToTileXFunction:n(1433),GetWorldToTileXYFunction:n(1434),GetWorldToTileYFunction:n(1435),HasTileAt:n(562),HasTileAtWorldXY:n(1436),HexagonalCullBounds:n(546),HexagonalCullTiles:n(545),HexagonalTileToWorldXY:n(550),HexagonalTileToWorldY:n(554),HexagonalWorldToTileXY:n(556),HexagonalWorldToTileY:n(560),IsInLayerBounds:n(119),IsometricCullTiles:n(547),IsometricTileToWorldXY:n(551),IsometricWorldToTileXY:n(557),PutTileAt:n(257),PutTileAtWorldXY:n(1437),PutTilesAt:n(1438),Randomize:n(1439),RemoveTileAt:n(563),RemoveTileAtWorldXY:n(1440),RenderDebug:n(1441),ReplaceByIndex:n(542),RunCull:n(159),SetCollision:n(1442),SetCollisionBetween:n(1443),SetCollisionByExclusion:n(1444),SetCollisionByProperty:n(1445),SetCollisionFromCollisionGroup:n(1446),SetLayerCollisionIndex:n(160),SetTileCollision:n(72),SetTileIndexCallback:n(1447),SetTileLocationCallback:n(1448),Shuffle:n(1449),StaggeredCullBounds:n(549),StaggeredCullTiles:n(548),StaggeredTileToWorldXY:n(552),StaggeredTileToWorldY:n(555),StaggeredWorldToTileXY:n(558),StaggeredWorldToTileY:n(561),SwapByIndex:n(1450),TileToWorldX:n(253),TileToWorldXY:n(553),TileToWorldY:n(254),WeightedRandomize:n(1451),WorldToTileX:n(255),WorldToTileXY:n(559),WorldToTileY:n(256)}},function(t,i,n){var r=n(158);t.exports=function(t,i,n){var o=r(t,i,!0,n),a=r(t,i-1,!0,n),h=r(t,i+1,!0,n),d=r(t-1,i,!0,n),f=r(t+1,i,!0,n),p=o&&o.collides;return p&&(o.faceTop=!0,o.faceBottom=!0,o.faceLeft=!0,o.faceRight=!0),a&&a.collides&&(p&&(o.faceTop=!1),a.faceBottom=!p),h&&h.collides&&(p&&(o.faceBottom=!1),h.faceTop=!p),d&&d.collides&&(p&&(o.faceLeft=!1),d.faceRight=!p),f&&f.collides&&(p&&(o.faceRight=!1),f.faceLeft=!p),o&&!o.collides&&o.resetFaces(),o}},function(t,i){t.exports=function(t,i,n){var r=n.baseTileWidth,o=n.tilemapLayer,a=0;return o&&(i||(i=o.scene.cameras.main),a=o.x+i.scrollX*(1-o.scrollFactorX),r*=o.scaleX),a+t*r}},function(t,i){t.exports=function(t,i,n){var r=n.baseTileHeight,o=n.tilemapLayer,a=0;return o&&(i||(i=o.scene.cameras.main),a=o.y+i.scrollY*(1-o.scrollFactorY),r*=o.scaleY),a+t*r}},function(t,i){t.exports=function(t,i,n,r){void 0===i&&(i=!0);var o=r.baseTileWidth,a=r.tilemapLayer;return a&&(n||(n=a.scene.cameras.main),t-=a.x+n.scrollX*(1-a.scrollFactorX),o*=a.scaleX),i?Math.floor(t/o):t/o}},function(t,i){t.exports=function(t,i,n,r){void 0===i&&(i=!0);var o=r.baseTileHeight,a=r.tilemapLayer;return a&&(n||(n=a.scene.cameras.main),t-=a.y+n.scrollY*(1-a.scrollFactorY),o*=a.scaleY),i?Math.floor(t/o):t/o}},function(t,i,n){var r=n(85),o=n(119),a=n(252),h=n(72);t.exports=function(t,i,n,d,f){if(void 0===d&&(d=!0),!o(i,n,f))return null;var p=f.data[n][i],T=p&&p.collides;if(t instanceof r)null===f.data[n][i]&&(f.data[n][i]=new r(f,t.index,i,n,f.tileWidth,f.tileHeight)),f.data[n][i].copy(t);else{var b=t;null===f.data[n][i]?f.data[n][i]=new r(f,b,i,n,f.tileWidth,f.tileHeight):f.data[n][i].index=b}var S=f.data[n][i],A=-1!==f.collideIndexes.indexOf(S.index);return h(S,A),d&&T!==S.collides&&a(i,n,f),S}},function(t,i,n){var r=n(29);t.exports=function(t){return"isometric"===(t=t.toLowerCase())?r.ISOMETRIC:"staggered"===t?r.STAGGERED:"hexagonal"===t?r.HEXAGONAL:r.ORTHOGONAL}},function(t,i,n){var r=n(40),o=n(120),a=n(121),h=n(85);t.exports=function(t,i,n,d,f){for(var p=new o({tileWidth:n,tileHeight:d}),T=new a({name:t,tileWidth:n,tileHeight:d,format:r.ARRAY_2D,layers:[p]}),b=[],S=i.length,A=0,P=0;P<i.length;P++){b[P]=[];for(var O=i[P],L=0;L<O.length;L++){var D=parseInt(O[L],10);isNaN(D)||-1===D?b[P][L]=f?null:new h(p,-1,L,P,n,d):b[P][L]=new h(p,D,L,P,n,d)}0===A&&(A=O.length)}return T.width=p.width=A,T.height=p.height=S,T.widthInPixels=p.widthInPixels=A*n,T.heightInPixels=p.heightInPixels=S*d,p.data=b,T}},function(t,i,n){var r=n(571),o=n(261),copyPoints=function(t){return{x:t.x,y:t.y}},a=["id","name","type","rotation","properties","visible","x","y","width","height"];t.exports=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var h=r(t,a);if(h.x+=i,h.y+=n,t.gid){var d=o(t.gid);h.gid=d.gid,h.flippedHorizontal=d.flippedHorizontal,h.flippedVertical=d.flippedVertical,h.flippedAntiDiagonal=d.flippedAntiDiagonal}else t.polyline?h.polyline=t.polyline.map(copyPoints):t.polygon?h.polygon=t.polygon.map(copyPoints):t.ellipse?h.ellipse=t.ellipse:t.text?h.text=t.text:t.point?h.point=!0:h.rectangle=!0;return h}},function(t,i){var n=2147483648,r=1073741824,o=536870912;t.exports=function(t){var i=Boolean(t&n),a=Boolean(t&r),h=Boolean(t&o);t&=536870911;var d=0,f=!1;return i&&a&&h?(d=Math.PI/2,f=!0):i&&a&&!h?(d=Math.PI,f=!1):i&&!a&&h?(d=Math.PI/2,f=!1):!i||a||h?!i&&a&&h?(d=3*Math.PI/2,f=!1):i||!a||h?i||a||!h?i||a||h||(d=0,f=!1):(d=3*Math.PI/2,f=!0):(d=Math.PI,f=!0):(d=0,f=!0),{gid:t,flippedHorizontal:i,flippedVertical:a,flippedAntiDiagonal:h,rotation:d,flipped:f}}},function(t,i,n){var r=n(40),o=n(121),a=n(564),h=n(580);t.exports=function(t,i,n,d,f,p,T,b){void 0===n&&(n=32),void 0===d&&(d=32),void 0===f&&(f=10),void 0===p&&(p=10),void 0===b&&(b=!1);var S=null;if(Array.isArray(T))S=a(void 0!==i?i:"map",r.ARRAY_2D,T,n,d,b);else if(void 0!==i){var A=t.cache.tilemap.get(i);A?S=a(i,A.format,A.data,n,d,b):console.warn("No map data found for key "+i)}return null===S&&(S=new o({tileWidth:n,tileHeight:d,width:f,height:p})),new h(t,S)}},function(t,i,n){var r=n(6);t.exports=function(t){var i=r(t,"targets",null);return null===i||("function"==typeof i&&(i=i.call()),Array.isArray(i)||(i=[i])),i}},function(t,i){function hasGetActive(t){return!!t.getActive&&"function"==typeof t.getActive}function hasGetStart(t){return!!t.getStart&&"function"==typeof t.getStart}function hasGetEnd(t){return!!t.getEnd&&"function"==typeof t.getEnd}var GetValueOp=function(t,i){var n,getEnd=function(t,i,n){return n},getStart=function(t,i,n){return n},r=null,o=typeof i;if("number"===o)getEnd=function(){return i};else if("string"===o){var a=i[0],h=parseFloat(i.substr(2));switch(a){case"+":getEnd=function(t,i,n){return n+h};break;case"-":getEnd=function(t,i,n){return n-h};break;case"*":getEnd=function(t,i,n){return n*h};break;case"/":getEnd=function(t,i,n){return n/h};break;default:getEnd=function(){return parseFloat(i)}}}else if("function"===o)getEnd=i;else if("object"===o)if(function hasGetters(t){return hasGetStart(t)||hasGetEnd(t)||hasGetActive(t)}(i))hasGetActive(i)&&(r=i.getActive),hasGetEnd(i)&&(getEnd=i.getEnd),hasGetStart(i)&&(getStart=i.getStart);else if(i.hasOwnProperty("value"))n=GetValueOp(t,i.value);else{var d=i.hasOwnProperty("to"),f=i.hasOwnProperty("from"),p=i.hasOwnProperty("start");if(d&&(f||p)){if(n=GetValueOp(t,i.to),p){var T=GetValueOp(t,i.start);n.getActive=T.getEnd}if(f){var b=GetValueOp(t,i.from);n.getStart=b.getEnd}}}return n||(n={getActive:r,getEnd:getEnd,getStart:getStart}),n};t.exports=GetValueOp},function(t,i){t.exports={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1}},function(t,i,n){var r=n(0),o=n(9),a=n(267),h=n(16),d=n(5),f=n(100),p=n(14),T=new r({Extends:o,initialize:function Tween3(t,i,n){o.call(this),this.parent=t,this.parentIsTimeline=t.hasOwnProperty("isTimeline"),this.data=i,this.totalData=i.length,this.targets=n,this.totalTargets=n.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=f.PENDING_ADD,this._pausedState=f.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(t){return void 0===t&&(t=0),this.data[t].current},setTimeScale:function(t){return this.timeScale=t,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===f.ACTIVE},isPaused:function(){return this.state===f.PAUSED},hasTarget:function(t){return-1!==this.targets.indexOf(t)},updateTo:function(t,i,n){void 0===n&&(n=!1);for(var r=0;r<this.totalData;r++){var o=this.data[r];o.key===t&&(o.end=i,n&&(o.start=o.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===f.ACTIVE?this.seek(0):this.state===f.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===f.PENDING_ADD?this:this.play()},calcDuration:function(){for(var t=0,i=p.MAX_SAFE_INTEGER,n=this.data,r=0;r<this.totalData;r++){var o=n[r];o.t1=o.duration+o.hold,o.yoyo&&(o.t1+=o.duration),o.t2=o.t1+o.repeatDelay,o.totalDuration=o.delay+o.t1,-1===o.repeat?o.totalDuration+=999999999999*o.t2:o.repeat>0&&(o.totalDuration+=o.t2*o.repeat),o.totalDuration>t&&(t=o.totalDuration),o.delay<i&&(i=o.delay)}this.duration=Math.max(t,.001),this.loopCounter=-1===this.loop?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=i},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=f.PENDING_ADD,this._pausedState=f.INIT,!1;for(var t=this.data,i=this.totalTargets,n=0;n<this.totalData;n++){var r=t[n],o=r.target,a=r.gen,h=r.key,d=r.index;r.delay=a.delay(o,h,0,d,i,this),r.duration=Math.max(a.duration(o,h,0,d,i,this),.001),r.hold=a.hold(o,h,0,d,i,this),r.repeat=a.repeat(o,h,0,d,i,this),r.repeatDelay=a.repeatDelay(o,h,0,d,i,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=f.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(a.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=f.LOOP_DELAY):(this.state=f.ACTIVE,this.dispatchTweenEvent(a.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=f.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=f.PENDING_REMOVE,this.dispatchTweenEvent(a.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===f.PAUSED||(this.paused=!0,this._pausedState=this.state,this.state=f.PAUSED),this},play:function(t){void 0===t&&(t=!1);var i=this.state;return i!==f.INIT||this.parentIsTimeline?i===f.ACTIVE||i===f.PENDING_ADD&&this._pausedState===f.PENDING_ADD?this:this.parentIsTimeline||i!==f.PENDING_REMOVE&&i!==f.REMOVED?(this.parentIsTimeline?(this.resetTweenData(t),0===this.calculatedOffset?this.state=f.ACTIVE:(this.countdown=this.calculatedOffset,this.state=f.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(t),this.state=f.ACTIVE,this.makeActive()),this):(this.seek(0),this.parent.makeActive(this),this):(this.resetTweenData(!1),this.state=f.ACTIVE,this)},resetTweenData:function(t){for(var i=this.data,n=this.totalData,r=this.totalTargets,o=0;o<n;o++){var a=i[o],h=a.target,d=a.key,p=a.index;a.progress=0,a.elapsed=0,a.repeatCounter=-1===a.repeat?999999999999:a.repeat,t?(a.start=a.getStartValue(h,d,a.start,p,r,this),a.end=a.getEndValue(h,d,a.end,p,r,this),a.current=a.start,a.state=f.PLAYING_FORWARD):a.state=f.PENDING_RENDER,a.delay>0&&(a.elapsed=a.delay,a.state=f.DELAY),a.getActiveValue&&(h[d]=a.getActiveValue(a.target,a.key,a.start))}},resume:function(){return this.state===f.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(t,i){void 0===i&&(i=16.6),this.state===f.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var n=this.data,r=this.totalTargets,o=0;o<this.totalData;o++){var a=n[o],h=a.target,d=a.gen,p=a.key,T=a.index;a.progress=0,a.elapsed=0,a.repeatCounter=-1===a.repeat?999999999999:a.repeat,a.delay=d.delay(h,p,0,T,r,this),a.duration=Math.max(d.duration(h,p,0,T,r,this),.001),a.hold=d.hold(h,p,0,T,r,this),a.repeat=d.repeat(h,p,0,T,r,this),a.repeatDelay=d.repeatDelay(h,p,0,T,r,this),a.current=a.start,a.state=f.PLAYING_FORWARD,this.updateTweenData(this,a,0,T,r),a.delay>0&&(a.elapsed=a.delay,a.state=f.DELAY)}this.calcDuration();var b=!1;this.state===f.PAUSED&&(b=!0,this.state=f.ACTIVE),this.isSeeking=!0;do{this.update(0,i)}while(this.totalProgress<t);return this.isSeeking=!1,b&&(this.state=f.PAUSED),this},setCallback:function(t,i,n,r){return this.callbacks[t]={func:i,scope:r,params:n},this},complete:function(t){return void 0===t&&(t=0),t?(this.state=f.COMPLETE_DELAY,this.countdown=t):(this.state=f.PENDING_REMOVE,this.dispatchTweenEvent(a.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(t){return this.state===f.ACTIVE&&void 0!==t&&this.seek(t),this.state!==f.REMOVED&&(this.state!==f.PAUSED&&this.state!==f.PENDING_ADD||(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(a.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=f.PENDING_REMOVE),this},update:function(t,i){if(this.state===f.PAUSED)return!1;switch(this.useFrames&&(i=1*this.parent.timeScale),i*=this.timeScale,this.elapsed+=i,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=i,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case f.ACTIVE:this.hasStarted||this.isSeeking||(this.startDelay-=i,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(a.TWEEN_START,this.callbacks.onStart)));for(var n=!1,r=0;r<this.totalData;r++){var o=this.data[r];this.updateTweenData(this,o,i)&&(n=!0)}n||this.nextState();break;case f.LOOP_DELAY:this.countdown-=i,this.countdown<=0&&(this.state=f.ACTIVE,this.dispatchTweenEvent(a.TWEEN_LOOP,this.callbacks.onLoop));break;case f.OFFSET_DELAY:this.countdown-=i,this.countdown<=0&&(this.state=f.ACTIVE);break;case f.COMPLETE_DELAY:this.countdown-=i,this.countdown<=0&&(this.state=f.PENDING_REMOVE,this.dispatchTweenEvent(a.TWEEN_COMPLETE,this.callbacks.onComplete))}return this.state===f.PENDING_REMOVE},dispatchTweenDataEvent:function(t,i,n){this.isSeeking||(this.emit(t,this,n.key,n.target,n.current,n.previous),i&&(i.params[1]=n.target,i.func.apply(i.scope,i.params)))},dispatchTweenEvent:function(t,i){this.isSeeking||(this.emit(t,this,this.targets),i&&(i.params[1]=this.targets,i.func.apply(i.scope,i.params)))},setStateFromEnd:function(t,i,n){return i.yoyo?(i.elapsed=n,i.progress=n/i.duration,i.flipX&&i.target.toggleFlipX(),i.flipY&&i.target.toggleFlipY(),this.dispatchTweenDataEvent(a.TWEEN_YOYO,t.callbacks.onYoyo,i),i.start=i.getStartValue(i.target,i.key,i.start,i.index,t.totalTargets,t),f.PLAYING_BACKWARD):i.repeatCounter>0?(i.repeatCounter--,i.elapsed=n,i.progress=n/i.duration,i.flipX&&i.target.toggleFlipX(),i.flipY&&i.target.toggleFlipY(),i.start=i.getStartValue(i.target,i.key,i.start,i.index,t.totalTargets,t),i.end=i.getEndValue(i.target,i.key,i.start,i.index,t.totalTargets,t),i.repeatDelay>0?(i.elapsed=i.repeatDelay-n,i.current=i.start,i.target[i.key]=i.current,f.REPEAT_DELAY):(this.dispatchTweenDataEvent(a.TWEEN_REPEAT,t.callbacks.onRepeat,i),f.PLAYING_FORWARD)):f.COMPLETE},setStateFromStart:function(t,i,n){return i.repeatCounter>0?(i.repeatCounter--,i.elapsed=n,i.progress=n/i.duration,i.flipX&&i.target.toggleFlipX(),i.flipY&&i.target.toggleFlipY(),i.end=i.getEndValue(i.target,i.key,i.start,i.index,t.totalTargets,t),i.repeatDelay>0?(i.elapsed=i.repeatDelay-n,i.current=i.start,i.target[i.key]=i.current,f.REPEAT_DELAY):(this.dispatchTweenDataEvent(a.TWEEN_REPEAT,t.callbacks.onRepeat,i),f.PLAYING_FORWARD)):f.COMPLETE},updateTweenData:function(t,i,n){var r=i.target;switch(i.state){case f.PLAYING_FORWARD:case f.PLAYING_BACKWARD:if(!r){i.state=f.COMPLETE;break}var o=i.elapsed,h=i.duration,d=0;(o+=n)>h&&(d=o-h,o=h);var p=i.state===f.PLAYING_FORWARD,T=o/h;if(i.elapsed=o,i.progress=T,i.previous=i.current,1===T)p?(i.current=i.end,r[i.key]=i.end,i.hold>0?(i.elapsed=i.hold-d,i.state=f.HOLD_DELAY):i.state=this.setStateFromEnd(t,i,d)):(i.current=i.start,r[i.key]=i.start,i.state=this.setStateFromStart(t,i,d));else{var b=p?i.ease(T):i.ease(1-T);i.current=i.start+(i.end-i.start)*b,r[i.key]=i.current}this.dispatchTweenDataEvent(a.TWEEN_UPDATE,t.callbacks.onUpdate,i);break;case f.DELAY:i.elapsed-=n,i.elapsed<=0&&(i.elapsed=Math.abs(i.elapsed),i.state=f.PENDING_RENDER);break;case f.REPEAT_DELAY:i.elapsed-=n,i.elapsed<=0&&(i.elapsed=Math.abs(i.elapsed),i.state=f.PLAYING_FORWARD,this.dispatchTweenDataEvent(a.TWEEN_REPEAT,t.callbacks.onRepeat,i));break;case f.HOLD_DELAY:i.elapsed-=n,i.elapsed<=0&&(i.state=this.setStateFromEnd(t,i,Math.abs(i.elapsed)));break;case f.PENDING_RENDER:r?(i.start=i.getStartValue(r,i.key,r[i.key],i.index,t.totalTargets,t),i.end=i.getEndValue(r,i.key,i.start,i.index,t.totalTargets,t),i.current=i.start,r[i.key]=i.start,i.state=f.PLAYING_FORWARD):i.state=f.COMPLETE}return i.state!==f.COMPLETE}});T.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],d.register("tween",(function(t){return this.scene.sys.tweens.add(t)})),h.register("tween",(function(t){return this.scene.sys.tweens.create(t)})),t.exports=T},function(t,i,n){t.exports={TIMELINE_COMPLETE:n(1466),TIMELINE_LOOP:n(1467),TIMELINE_PAUSE:n(1468),TIMELINE_RESUME:n(1469),TIMELINE_START:n(1470),TIMELINE_UPDATE:n(1471),TWEEN_ACTIVE:n(1472),TWEEN_COMPLETE:n(1473),TWEEN_LOOP:n(1474),TWEEN_REPEAT:n(1475),TWEEN_START:n(1476),TWEEN_STOP:n(1477),TWEEN_UPDATE:n(1478),TWEEN_YOYO:n(1479)}},function(t,i){t.exports=function(t,i,n,r,o,a,h,d,f,p,T,b,S,A,P){return{target:t,index:i,key:n,getActiveValue:a,getEndValue:r,getStartValue:o,ease:h,duration:0,totalDuration:0,delay:0,yoyo:p,hold:0,repeat:0,repeatDelay:0,flipX:A,flipY:P,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:d,duration:f,hold:T,repeat:b,repeatDelay:S},state:0}}},function(t,i,n){var r=n(68);t.exports=function(t){return r(t,-Math.PI,Math.PI)}},function(t,i,n){var r=n(68);t.exports=function(t){return r(t,-180,180)}},function(t,i,n){var r={};t.exports=r;var o=n(83),a=n(32);r.fromVertices=function(t){for(var i={},n=0;n<t.length;n++){var r=(n+1)%t.length,h=o.normalise({x:t[r].y-t[n].y,y:t[n].x-t[r].x}),d=0===h.y?1/0:h.x/h.y;i[d=d.toFixed(3).toString()]=h}return a.values(i)},r.rotate=function(t,i){if(0!==i)for(var n=Math.cos(i),r=Math.sin(i),o=0;o<t.length;o++){var a,h=t[o];a=h.x*n-h.y*r,h.y=h.x*r+h.y*n,h.x=a}}},function(t,i,n){t.exports={AFTER_ADD:n(1504),AFTER_REMOVE:n(1505),AFTER_UPDATE:n(1506),BEFORE_ADD:n(1507),BEFORE_REMOVE:n(1508),BEFORE_UPDATE:n(1509),COLLISION_ACTIVE:n(1510),COLLISION_END:n(1511),COLLISION_START:n(1512),DRAG_END:n(1513),DRAG:n(1514),DRAG_START:n(1515),PAUSE:n(1516),RESUME:n(1517),SLEEP_END:n(1518),SLEEP_START:n(1519)}},function(t,i,n){var r={};t.exports=r;var o=n(274),a=n(250),h=n(84);r.collisions=function(t,i){for(var n=[],d=i.pairs.table,f=i.metrics,p=0;p<t.length;p++){var T=t[p][0],b=t[p][1];if((!T.isStatic&&!T.isSleeping||!b.isStatic&&!b.isSleeping)&&r.canCollide(T.collisionFilter,b.collisionFilter)&&(f.midphaseTests+=1,h.overlaps(T.bounds,b.bounds)))for(var S=T.parts.length>1?1:0;S<T.parts.length;S++)for(var A=T.parts[S],P=b.parts.length>1?1:0;P<b.parts.length;P++){var O=b.parts[P];if(A===T&&O===b||h.overlaps(A.bounds,O.bounds)){var L,D=d[a.id(A,O)];L=D&&D.isActive?D.collision:null;var I=o.collides(A,O,L);f.narrowphaseTests+=1,I.reused&&(f.narrowReuseCount+=1),I.collided&&(n.push(I),f.narrowDetections+=1)}}}return n},r.canCollide=function(t,i){return t.group===i.group&&0!==t.group?t.group>0:0!=(t.mask&i.category)&&0!=(i.mask&t.category)}},function(t,i,n){var r={};t.exports=r;var o=n(64),a=n(83);r.collides=function(t,i,n){var h,d,f,p,T=!1;if(n){var b=t.parent,S=i.parent,A=b.speed*b.speed+b.angularSpeed*b.angularSpeed+S.speed*S.speed+S.angularSpeed*S.angularSpeed;T=n&&n.collided&&A<.2,p=n}else p={collided:!1,bodyA:t,bodyB:i};if(n&&T){var P=p.axisBody,O=P===t?i:t,L=[P.axes[n.axisNumber]];if(f=r._overlapAxes(P.vertices,O.vertices,L),p.reused=!0,f.overlap<=0)return p.collided=!1,p}else{if((h=r._overlapAxes(t.vertices,i.vertices,t.axes)).overlap<=0)return p.collided=!1,p;if((d=r._overlapAxes(i.vertices,t.vertices,i.axes)).overlap<=0)return p.collided=!1,p;h.overlap<d.overlap?(f=h,p.axisBody=t):(f=d,p.axisBody=i),p.axisNumber=f.axisNumber}p.bodyA=t.id<i.id?t:i,p.bodyB=t.id<i.id?i:t,p.collided=!0,p.depth=f.overlap,p.parentA=p.bodyA.parent,p.parentB=p.bodyB.parent,t=p.bodyA,i=p.bodyB,a.dot(f.axis,a.sub(i.position,t.position))<0?p.normal={x:f.axis.x,y:f.axis.y}:p.normal={x:-f.axis.x,y:-f.axis.y},p.tangent=a.perp(p.normal),p.penetration=p.penetration||{},p.penetration.x=p.normal.x*p.depth,p.penetration.y=p.normal.y*p.depth;var D=r._findSupports(t,i,p.normal),I=[];if(o.contains(t.vertices,D[0])&&I.push(D[0]),o.contains(t.vertices,D[1])&&I.push(D[1]),I.length<2){var F=r._findSupports(i,t,a.neg(p.normal));o.contains(i.vertices,F[0])&&I.push(F[0]),I.length<2&&o.contains(i.vertices,F[1])&&I.push(F[1])}return I.length<1&&(I=[D[0]]),p.supports=I,p},r._overlapAxes=function(t,i,n){for(var o,h,d=a._temp[0],f=a._temp[1],p={overlap:Number.MAX_VALUE},T=0;T<n.length;T++){if(h=n[T],r._projectToAxis(d,t,h),r._projectToAxis(f,i,h),(o=Math.min(d.max-f.min,f.max-d.min))<=0)return p.overlap=o,p;o<p.overlap&&(p.overlap=o,p.axis=h,p.axisNumber=T)}return p},r._projectToAxis=function(t,i,n){for(var r=a.dot(i[0],n),o=r,h=1;h<i.length;h+=1){var d=a.dot(i[h],n);d>o?o=d:d<r&&(r=d)}t.min=r,t.max=o},r._findSupports=function(t,i,n){for(var r,o,h,d,f=Number.MAX_VALUE,p=a._temp[0],T=i.vertices,b=t.position,S=0;S<T.length;S++)o=T[S],p.x=o.x-b.x,p.y=o.y-b.y,(r=-a.dot(n,p))<f&&(f=r,h=o);return o=T[h.index-1>=0?h.index-1:T.length-1],p.x=o.x-b.x,p.y=o.y-b.y,f=-a.dot(n,p),d=o,o=T[(h.index+1)%T.length],p.x=o.x-b.x,p.y=o.y-b.y,(r=-a.dot(n,p))<f&&(d=o),[h,d]}},function(t,i,n){t.exports={AlignTo:n(601),Angle:n(602),Call:n(603),GetFirst:n(604),GetLast:n(605),GridAlign:n(606),IncAlpha:n(678),IncX:n(679),IncXY:n(680),IncY:n(681),PlaceOnCircle:n(682),PlaceOnEllipse:n(683),PlaceOnLine:n(684),PlaceOnRectangle:n(685),PlaceOnTriangle:n(686),PlayAnimation:n(687),PropertyValueInc:n(46),PropertyValueSet:n(27),RandomCircle:n(688),RandomEllipse:n(689),RandomLine:n(690),RandomRectangle:n(691),RandomTriangle:n(692),Rotate:n(693),RotateAround:n(694),RotateAroundDistance:n(695),ScaleX:n(696),ScaleXY:n(697),ScaleY:n(698),SetAlpha:n(699),SetBlendMode:n(700),SetDepth:n(701),SetHitArea:n(702),SetOrigin:n(703),SetRotation:n(704),SetScale:n(705),SetScaleX:n(706),SetScaleY:n(707),SetScrollFactor:n(708),SetScrollFactorX:n(709),SetScrollFactorY:n(710),SetTint:n(711),SetVisible:n(712),SetX:n(713),SetXY:n(714),SetY:n(715),ShiftPosition:n(716),Shuffle:n(717),SmootherStep:n(718),SmoothStep:n(719),Spread:n(720),ToggleVisible:n(721),WrapInRectangle:n(722)}},function(t,i,n){var r=n(123),o=[];o[r.BOTTOM_CENTER]=n(277),o[r.BOTTOM_LEFT]=n(278),o[r.BOTTOM_RIGHT]=n(279),o[r.LEFT_BOTTOM]=n(280),o[r.LEFT_CENTER]=n(281),o[r.LEFT_TOP]=n(282),o[r.RIGHT_BOTTOM]=n(283),o[r.RIGHT_CENTER]=n(284),o[r.RIGHT_TOP]=n(285),o[r.TOP_CENTER]=n(286),o[r.TOP_LEFT]=n(287),o[r.TOP_RIGHT]=n(288),t.exports=function(t,i,n,r,a){return o[n](t,i,r,a)}},function(t,i,n){var r=n(42),o=n(87),a=n(88),h=n(52);t.exports=function(t,i,n,d){return void 0===n&&(n=0),void 0===d&&(d=0),a(t,o(i)+n),h(t,r(i)+d),t}},function(t,i,n){var r=n(42),o=n(43),a=n(53),h=n(52);t.exports=function(t,i,n,d){return void 0===n&&(n=0),void 0===d&&(d=0),a(t,o(i)-n),h(t,r(i)+d),t}},function(t,i,n){var r=n(42),o=n(44),a=n(54),h=n(52);t.exports=function(t,i,n,d){return void 0===n&&(n=0),void 0===d&&(d=0),a(t,o(i)+n),h(t,r(i)+d),t}},function(t,i,n){var r=n(42),o=n(43),a=n(55),h=n(54);t.exports=function(t,i,n,d){return void 0===n&&(n=0),void 0===d&&(d=0),h(t,o(i)-n),a(t,r(i)+d),t}},function(t,i,n){var r=n(89),o=n(43),a=n(90),h=n(54);t.exports=function(t,i,n,d){return void 0===n&&(n=0),void 0===d&&(d=0),h(t,o(i)-n),a(t,r(i)+d),t}},function(t,i,n){var r=n(43),o=n(45),a=n(54),h=n(52);t.exports=function(t,i,n,d){return void 0===n&&(n=0),void 0===d&&(d=0),a(t,r(i)-n),h(t,o(i)-d),t}},function(t,i,n){var r=n(42),o=n(44),a=n(55),h=n(53);t.exports=function(t,i,n,d){return void 0===n&&(n=0),void 0===d&&(d=0),h(t,o(i)+n),a(t,r(i)+d),t}},function(t,i,n){var r=n(89),o=n(44),a=n(90),h=n(53);t.exports=function(t,i,n,d){return void 0===n&&(n=0),void 0===d&&(d=0),h(t,o(i)+n),a(t,r(i)+d),t}},function(t,i,n){var r=n(44),o=n(45),a=n(53),h=n(52);t.exports=function(t,i,n,d){return void 0===n&&(n=0),void 0===d&&(d=0),a(t,r(i)+n),h(t,o(i)-d),t}},function(t,i,n){var r=n(87),o=n(45),a=n(55),h=n(88);t.exports=function(t,i,n,d){return void 0===n&&(n=0),void 0===d&&(d=0),h(t,r(i)+n),a(t,o(i)-d),t}},function(t,i,n){var r=n(43),o=n(45),a=n(55),h=n(53);t.exports=function(t,i,n,d){return void 0===n&&(n=0),void 0===d&&(d=0),h(t,r(i)-n),a(t,o(i)-d),t}},function(t,i,n){var r=n(44),o=n(45),a=n(55),h=n(54);t.exports=function(t,i,n,d){return void 0===n&&(n=0),void 0===d&&(d=0),h(t,r(i)+n),a(t,o(i)-d),t}},function(t,i,n){var r=n(123),o=[];o[r.BOTTOM_CENTER]=n(290),o[r.BOTTOM_LEFT]=n(291),o[r.BOTTOM_RIGHT]=n(292),o[r.CENTER]=n(293),o[r.LEFT_CENTER]=n(295),o[r.RIGHT_CENTER]=n(296),o[r.TOP_CENTER]=n(297),o[r.TOP_LEFT]=n(298),o[r.TOP_RIGHT]=n(299),o[r.LEFT_BOTTOM]=o[r.BOTTOM_LEFT],o[r.LEFT_TOP]=o[r.TOP_LEFT],o[r.RIGHT_BOTTOM]=o[r.BOTTOM_RIGHT],o[r.RIGHT_TOP]=o[r.TOP_RIGHT],t.exports=function(t,i,n,r,a){return o[n](t,i,r,a)}},function(t,i,n){var r=n(42),o=n(87),a=n(55),h=n(88);t.exports=function(t,i,n,d){return void 0===n&&(n=0),void 0===d&&(d=0),h(t,o(i)+n),a(t,r(i)+d),t}},function(t,i,n){var r=n(42),o=n(43),a=n(55),h=n(53);t.exports=function(t,i,n,d){return void 0===n&&(n=0),void 0===d&&(d=0),h(t,o(i)-n),a(t,r(i)+d),t}},function(t,i,n){var r=n(42),o=n(44),a=n(55),h=n(54);t.exports=function(t,i,n,d){return void 0===n&&(n=0),void 0===d&&(d=0),h(t,o(i)+n),a(t,r(i)+d),t}},function(t,i,n){var r=n(294),o=n(87),a=n(89);t.exports=function(t,i,n,h){return void 0===n&&(n=0),void 0===h&&(h=0),r(t,o(i)+n,a(i)+h),t}},function(t,i,n){var r=n(88),o=n(90);t.exports=function(t,i,n){return r(t,i),o(t,n)}},function(t,i,n){var r=n(89),o=n(43),a=n(90),h=n(53);t.exports=function(t,i,n,d){return void 0===n&&(n=0),void 0===d&&(d=0),h(t,o(i)-n),a(t,r(i)+d),t}},function(t,i,n){var r=n(89),o=n(44),a=n(90),h=n(54);t.exports=function(t,i,n,d){return void 0===n&&(n=0),void 0===d&&(d=0),h(t,o(i)+n),a(t,r(i)+d),t}},function(t,i,n){var r=n(87),o=n(45),a=n(88),h=n(52);t.exports=function(t,i,n,d){return void 0===n&&(n=0),void 0===d&&(d=0),a(t,r(i)+n),h(t,o(i)-d),t}},function(t,i,n){var r=n(43),o=n(45),a=n(53),h=n(52);t.exports=function(t,i,n,d){return void 0===n&&(n=0),void 0===d&&(d=0),a(t,r(i)-n),h(t,o(i)-d),t}},function(t,i,n){var r=n(44),o=n(45),a=n(54),h=n(52);t.exports=function(t,i,n,d){return void 0===n&&(n=0),void 0===d&&(d=0),a(t,r(i)+n),h(t,o(i)-d),t}},function(t,i,n){var r=n(169),o=n(98),a=n(14),h=n(4);t.exports=function(t,i,n){void 0===n&&(n=new h);var d=o(i,0,a.PI2);return r(t,d,n)}},function(t,i,n){var r=n(302),o=n(169),a=n(98),h=n(14);t.exports=function(t,i,n,d){void 0===d&&(d=[]),!i&&n>0&&(i=r(t)/n);for(var f=0;f<i;f++){var p=a(f/i,0,h.PI2);d.push(o(t,p))}return d}},function(t,i){t.exports=function(t){return Math.PI*t.radius*2}},function(t,i,n){var r=n(18),o={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t){return void 0===t&&(t=1),this.alpha=t,this},alpha:{get:function(){return this._alpha},set:function(t){var i=r(t,0,1);this._alpha=i,0===i?this.renderFlags&=-3:this.renderFlags|=2}}};t.exports=o},function(t,i,n){var r=n(35),o={_blendMode:r.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(t){"string"==typeof t&&(t=r[t]),(t|=0)>=-1&&(this._blendMode=t)}},setBlendMode:function(t){return this.blendMode=t,this}};t.exports=o},function(t,i){t.exports={_depth:0,depth:{get:function(){return this._depth},set:function(t){this.displayList&&this.displayList.queueDepthSort(),this._depth=t}},setDepth:function(t){return void 0===t&&(t=0),this.depth=t,this}}},function(t,i,n){var r=n(171),o=n(130);t.exports=function(t,i,n,a){void 0===a&&(a=[]),!i&&n>0&&(i=o(t)/n);for(var h=0;h<i;h++){var d=h/i;a.push(r(t,d))}return a}},function(t,i,n){var r=n(4);t.exports=function(t,i,n){return void 0===n&&(n=new r),n.x=t.x1+(t.x2-t.x1)*i,n.y=t.y1+(t.y2-t.y1)*i,n}},function(t,i){t.exports=function(t,i,n,r){var o=Math.cos(r),a=Math.sin(r),h=t.x-i,d=t.y-n;return t.x=h*o-d*a+i,t.y=h*a+d*o+n,t}},function(t,i,n){var r=n(310),o=n(311),a={mask:null,setMask:function(t){return this.mask=t,this},clearMask:function(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(t){return void 0===t&&(this.texture||this.shader)&&(t=this),new r(this.scene,t)},createGeometryMask:function(t){return void 0===t&&"Graphics"===this.type&&(t=this),new o(this.scene,t)}};t.exports=a},function(t,i,n){var r=n(0),o=n(22),a=n(91),h=new r({initialize:function BitmapMask2(t,i){var n=t.sys.renderer;this.renderer=n,this.bitmapMask=i,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),t.sys.game.events.on(o.CONTEXT_RESTORED,this.createMask,this),n&&n.on(a.RESIZE,this.createMask,this)},createMask:function(){var t=this.renderer;if(t&&t.gl){this.mainTexture&&this.clearMask();var i=t.width,n=t.height,r=0==(i&i-1)&&0==(n&n-1),o=t.gl,a=r?o.REPEAT:o.CLAMP_TO_EDGE,h=o.LINEAR;this.mainTexture=t.createTexture2D(0,h,h,a,a,o.RGBA,null,i,n),this.maskTexture=t.createTexture2D(0,h,h,a,a,o.RGBA,null,i,n),this.mainFramebuffer=t.createFramebuffer(i,n,this.mainTexture,!0),this.maskFramebuffer=t.createFramebuffer(i,n,this.maskTexture,!0)}},clearMask:function(){var t=this.renderer;t&&t.gl&&this.mainTexture&&(t.deleteTexture(this.mainTexture),t.deleteTexture(this.maskTexture),t.deleteFramebuffer(this.mainFramebuffer),t.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(t){this.bitmapMask=t},preRenderWebGL:function(t,i,n){t.pipelines.BITMAPMASK_PIPELINE.beginMask(this,i,n)},postRenderWebGL:function(t,i){t.pipelines.BITMAPMASK_PIPELINE.endMask(this,i)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(a.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});t.exports=h},function(t,i,n){var r=new(n(0))({initialize:function GeometryMask2(t,i){this.geometryMask=i,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(t){return this.geometryMask=t,this},setInvertAlpha:function(t){return void 0===t&&(t=!0),this.invertAlpha=t,this},preRenderWebGL:function(t,i,n){var r=t.gl;t.flush(),0===t.maskStack.length&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),t.maskCount=0),t.currentCameraMask.mask!==this&&(t.currentMask.mask=this),t.maskStack.push({mask:this,camera:n}),this.applyStencil(t,n,!0),t.maskCount++},applyStencil:function(t,i,n){var r=t.gl,o=this.geometryMask,a=t.maskCount;r.colorMask(!1,!1,!1,!1),n?(r.stencilFunc(r.EQUAL,a,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,a+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),o.renderWebGL(t,o,i),t.flush(),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),n?this.invertAlpha?r.stencilFunc(r.NOTEQUAL,a+1,255):r.stencilFunc(r.EQUAL,a+1,255):this.invertAlpha?r.stencilFunc(r.NOTEQUAL,a,255):r.stencilFunc(r.EQUAL,a,255)},postRenderWebGL:function(t){var i=t.gl;t.maskStack.pop(),t.maskCount--,t.flush();var n=t.currentMask;if(0===t.maskStack.length)n.mask=null,i.disable(i.STENCIL_TEST);else{var r=t.maskStack[t.maskStack.length-1];r.mask.applyStencil(t,r.camera,!1),t.currentCameraMask.mask!==r.mask?(n.mask=r.mask,n.camera=r.camera):n.mask=null}},preRenderCanvas:function(t,i,n){var r=this.geometryMask;t.currentContext.save(),r.renderCanvas(t,r,n,null,null,!0),t.currentContext.clip()},postRenderCanvas:function(t){t.currentContext.restore()},destroy:function(){this.geometryMask=null}});t.exports=r},function(t,i){t.exports={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(t,i){return void 0===i&&(i=t),this.scrollFactorX=t,this.scrollFactorY=i,this}}},function(t,i,n){var r=n(14),o=n(25),a=n(177),h=n(269),d=n(270),f=n(3),p={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(t){this._scaleX=t,this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function(){return this._scaleX},set:function(t){this._scaleX=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleY:{get:function(){return this._scaleY},set:function(t){this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},angle:{get:function(){return d(this._rotation*r.RAD_TO_DEG)},set:function(t){this.rotation=d(t)*r.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=h(t)}},setPosition:function(t,i,n,r){return void 0===t&&(t=0),void 0===i&&(i=t),void 0===n&&(n=0),void 0===r&&(r=0),this.x=t,this.y=i,this.z=n,this.w=r,this},copyPosition:function(t){return void 0!==t.x&&(this.x=t.x),void 0!==t.y&&(this.y=t.y),void 0!==t.z&&(this.z=t.z),void 0!==t.w&&(this.w=t.w),this},setRandomPosition:function(t,i,n,r){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=this.scene.sys.scale.width),void 0===r&&(r=this.scene.sys.scale.height),this.x=t+Math.random()*n,this.y=i+Math.random()*r,this},setRotation:function(t){return void 0===t&&(t=0),this.rotation=t,this},setAngle:function(t){return void 0===t&&(t=0),this.angle=t,this},setScale:function(t,i){return void 0===t&&(t=1),void 0===i&&(i=t),this.scaleX=t,this.scaleY=i,this},setX:function(t){return void 0===t&&(t=0),this.x=t,this},setY:function(t){return void 0===t&&(t=0),this.y=t,this},setZ:function(t){return void 0===t&&(t=0),this.z=t,this},setW:function(t){return void 0===t&&(t=0),this.w=t,this},getLocalTransformMatrix:function(t){return void 0===t&&(t=new o),t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(t,i){void 0===t&&(t=new o),void 0===i&&(i=new o);var n=this.parentContainer;if(!n)return this.getLocalTransformMatrix(t);for(t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);n;)i.applyITRS(n.x,n.y,n._rotation,n._scaleX,n._scaleY),i.multiply(t,t),n=n.parentContainer;return t},getLocalPoint:function(t,i,n,r){n||(n=new f),r||(r=this.scene.sys.cameras.main);var o=r.scrollX,h=r.scrollY,d=t+o*this.scrollFactorX-o,p=i+h*this.scrollFactorY-h;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(d,p,n):a(d,p,this.x,this.y,this.rotation,this.scaleX,this.scaleY,n),this._originComponent&&(n.x+=this._displayOriginX,n.y+=this._displayOriginY),n},getParentRotation:function(){for(var t=0,i=this.parentContainer;i;)t+=i.rotation,i=i.parentContainer;return t}};t.exports=p},function(t,i){var n={_visible:!0,visible:{get:function(){return this._visible},set:function(t){t?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function(t){return this.visible=t,this}};t.exports=n},function(t,i,n){t.exports={CHANGE_DATA:n(638),CHANGE_DATA_KEY:n(639),DESTROY:n(640),REMOVE_DATA:n(641),SET_DATA:n(642)}},function(t,i,n){var r=n(130),o=n(4);t.exports=function(t,i,n,a){if(void 0===a&&(a=[]),!i&&!n)return a;i?n=Math.round(r(t)/i):i=r(t)/n;for(var h=t.x,d=t.y,f=0,p=0;p<n;p++)switch(a.push(new o(h,d)),f){case 0:(h+=i)>=t.right&&(f=1,d+=h-t.right,h=t.right);break;case 1:(d+=i)>=t.bottom&&(f=2,h-=d-t.bottom,d=t.bottom);break;case 2:(h-=i)<=t.left&&(f=3,d-=t.left-h,h=t.left);break;case 3:(d-=i)<=t.top&&(f=0,d=t.top)}return a}},function(t,i){t.exports=function(t,i,n){void 0===i&&(i=1),void 0===n&&(n=[]);var r=Math.round(t.x1),o=Math.round(t.y1),a=Math.round(t.x2),h=Math.round(t.y2),d=Math.abs(a-r),f=Math.abs(h-o),p=r<a?1:-1,T=o<h?1:-1,b=d-f;n.push({x:r,y:o});for(var S=1;r!==a||o!==h;){var A=b<<1;A>-f&&(b-=f,r+=p),A<d&&(b+=d,o+=T),S%i==0&&n.push({x:r,y:o}),S++}return n}},function(t,i){t.exports=function(t,i,n){if(!i.length)return NaN;if(1===i.length)return i[0];var r,o,a=1;if(n){if(t<i[0][n])return i[0];for(;i[a][n]<t;)a++}else for(;i[a]<t;)a++;return a>i.length&&(a=i.length),n?(r=i[a-1][n],(o=i[a][n])-t<=t-r?i[a]:i[a-1]):(r=i[a-1],(o=i[a])-t<=t-r?o:r)}},function(t,i,n){var r=new(n(0))({initialize:function AnimationFrame2(t,i,n,r,o){void 0===o&&(o=!1),this.textureKey=t,this.textureFrame=i,this.index=n,this.frame=r,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=o},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});t.exports=r},function(t,i){t.exports=function(t){var i=/\D/g;return t.sort((function(t,n){return parseInt(t.replace(i,""),10)-parseInt(n.replace(i,""),10)})),t}},function(t,i,n){var r=n(185),o=n(0),a=n(102),h=n(9),d=n(132),f=n(22),p=n(2),T=n(6),b=n(186),S=n(322),A=new o({Extends:h,initialize:function AnimationManager2(t){h.call(this),this.game=t,this.textureManager=null,this.globalTimeScale=1,this.anims=new a,this.mixes=new a,this.paused=!1,this.name="AnimationManager",t.events.once(f.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(f.DESTROY,this.destroy,this)},addMix:function(t,i,n){var r=this.anims,o=this.mixes,a="string"==typeof t?t:t.key,h="string"==typeof i?i:i.key;if(r.has(a)&&r.has(h)){var d=o.get(a);d||(d={}),d[h]=n,o.set(a,d)}return this},removeMix:function(t,i){var n=this.mixes,r="string"==typeof t?t:t.key,o=n.get(r);if(o)if(i){var a="string"==typeof i?i:i.key;o.hasOwnProperty(a)&&delete o[a]}else i||n.delete(r);return this},getMix:function(t,i){var n=this.mixes,r="string"==typeof t?t:t.key,o="string"==typeof i?i:i.key,a=n.get(r);return a&&a.hasOwnProperty(o)?a[o]:0},add:function(t,i){return this.anims.has(t)?(console.warn("Animation key exists: "+t),this):(i.key=t,this.anims.set(t,i),this.emit(d.ADD_ANIMATION,t,i),this)},exists:function(t){return this.anims.has(t)},createFromAseprite:function(t,i){var n=[],r=this.game.cache.json.get(t);if(!r)return n;var o=this,a=T(r,"meta",null),h=T(r,"frames",null);return a&&h&&T(a,"frameTags",[]).forEach((function(r){var a=[],d=p(r,"name",null),f=p(r,"from",0),T=p(r,"to",0),b=p(r,"direction","forward");if(d&&(!i||i&&i.indexOf(d)>-1)){for(var S=[],A=Number.MAX_SAFE_INTEGER,P=f;P<=T;P++){var O=P.toString(),L=h[O];if(L){var D=p(L,"duration",Number.MAX_SAFE_INTEGER);D<A&&(A=D),S.push({frame:O,duration:D})}}S.forEach((function(i){a.push({key:t,frame:i.frame,duration:A-i.duration})}));var I=A*a.length;"reverse"===b&&(a=a.reverse());var F={key:d,frames:a,duration:I,yoyo:"pingpong"===b},B=o.create(F);B&&n.push(B)}})),n},create:function(t){var i=t.key,n=!1;return i&&((n=this.get(i))||(n=new r(this,i,t),this.anims.set(i,n),this.emit(d.ADD_ANIMATION,i,n))),n},fromJSON:function(t,i){void 0===i&&(i=!1),i&&this.anims.clear(),"string"==typeof t&&(t=JSON.parse(t));var n=[];if(t.hasOwnProperty("anims")&&Array.isArray(t.anims)){for(var r=0;r<t.anims.length;r++)n.push(this.create(t.anims[r]));t.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=t.globalTimeScale)}else t.hasOwnProperty("key")&&"frame"===t.type&&n.push(this.create(t));return n},generateFrameNames:function(t,i){var n,r=T(i,"prefix",""),o=T(i,"start",0),a=T(i,"end",0),h=T(i,"suffix",""),d=T(i,"zeroPad",0),f=T(i,"outputArray",[]),p=T(i,"frames",!1),A=this.textureManager.get(t);if(!A)return f;if(i)for(p||(p=S(o,a)),n=0;n<p.length;n++){var P=r+b(p[n],d,"0",1)+h;A.has(P)?f.push({key:t,frame:P}):console.warn("generateFrameNames: Frame missing: "+P+" from texture: "+t)}else for(p=A.getFrameNames(),n=0;n<p.length;n++)f.push({key:t,frame:p[n]});return f},generateFrameNumbers:function(t,i){var n=T(i,"start",0),r=T(i,"end",-1),o=T(i,"first",!1),a=T(i,"outputArray",[]),h=T(i,"frames",!1),d=this.textureManager.get(t);if(!d)return a;o&&d.has(o)&&a.push({key:t,frame:o}),h||(-1===r&&(r=d.frameTotal-2),h=S(n,r));for(var f=0;f<h.length;f++)d.has(h[f])?a.push({key:t,frame:h[f]}):console.warn("generateFrameNumbers: Frame "+f+" missing from texture: "+t);return a},get:function(t){return this.anims.get(t)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(d.PAUSE_ALL)),this},play:function(t,i){Array.isArray(i)||(i=[i]);for(var n=0;n<i.length;n++)i[n].anims.play(t);return this},staggerPlay:function(t,i,n,r){void 0===n&&(n=0),void 0===r&&(r=!0),Array.isArray(i)||(i=[i]);var o=i.length;r||o--;for(var a=0;a<i.length;a++){var h=n<0?Math.abs(n)*(o-a):n*a;i[a].anims.playAfterDelay(t,h)}return this},remove:function(t){var i=this.get(t);return i&&(this.emit(d.REMOVE_ANIMATION,t,i),this.anims.delete(t),this.removeMix(t)),i},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(d.RESUME_ALL)),this},toJSON:function(t){var i={anims:[],globalTimeScale:this.globalTimeScale};return void 0!==t&&""!==t?i.anims.push(this.anims.get(t).toJSON()):this.anims.each((function(t,n){i.anims.push(n.toJSON())})),i},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});t.exports=A},function(t,i){t.exports=function(t,i,n,r){var o,a=[],h=!1;if((n||r)&&(h=!0,n||(n=""),r||(r="")),i<t)for(o=t;o>=i;o--)h?a.push(n+o.toString()+r):a.push(o);else for(o=t;o<=i;o++)h?a.push(n+o.toString()+r):a.push(o);return a}},function(t,i,n){var r=n(0),o=n(102),a=n(9),h=n(324),d=new r({initialize:function BaseCache2(){this.entries=new o,this.events=new a},add:function(t,i){return this.entries.set(t,i),this.events.emit(h.ADD,this,t,i),this},has:function(t){return this.entries.has(t)},exists:function(t){return this.entries.has(t)},get:function(t){return this.entries.get(t)},remove:function(t){var i=this.get(t);return i&&(this.entries.delete(t),this.events.emit(h.REMOVE,this,t,i.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});t.exports=d},function(t,i,n){t.exports={ADD:n(736),REMOVE:n(737)}},function(t,i,n){var r=n(323),o=n(0),a=n(22),h=new o({initialize:function CacheManager2(t){this.game=t,this.binary=new r,this.bitmapFont=new r,this.json=new r,this.physics=new r,this.shader=new r,this.audio=new r,this.video=new r,this.text=new r,this.html=new r,this.obj=new r,this.tilemap=new r,this.xml=new r,this.custom={},this.game.events.once(a.DESTROY,this.destroy,this)},addCustom:function(t){return this.custom.hasOwnProperty(t)||(this.custom[t]=new r),this.custom[t]},destroy:function(){for(var t=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],i=0;i<t.length;i++)this[t[i]].destroy(),this[t[i]]=null;for(var n in this.custom)this.custom[n].destroy();this.custom=null,this.game=null}});t.exports=h},function(t,i,n){var r=n(133),o=n(190),a=n(18),h=n(0),d=n(11),f=n(333),p=n(37),T=n(135),b=n(10),S=n(3),A=new h({Extends:r,Mixins:[d.Flip,d.Tint,d.Pipeline],initialize:function Camera2(t,i,n,o){r.call(this,t,i,n,o),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new f.Fade(this),this.flashEffect=new f.Flash(this),this.shakeEffect=new f.Shake(this),this.panEffect=new f.Pan(this),this.rotateToEffect=new f.RotateTo(this),this.zoomEffect=new f.Zoom(this),this.lerp=new S(1,1),this.followOffset=new S,this.deadzone=null,this._follow=null},setDeadzone:function(t,i){if(void 0===t)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=t,this.deadzone.height=i):this.deadzone=new b(0,0,t,i),this._follow){var n=this.width/2,r=this.height/2,a=this._follow.x-this.followOffset.x,h=this._follow.y-this.followOffset.y;this.midPoint.set(a,h),this.scrollX=a-n,this.scrollY=h-r}o(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(t,i,n,r,o,a){return this.fadeEffect.start(!1,t,i,n,r,!0,o,a)},fadeOut:function(t,i,n,r,o,a){return this.fadeEffect.start(!0,t,i,n,r,!0,o,a)},fadeFrom:function(t,i,n,r,o,a,h){return this.fadeEffect.start(!1,t,i,n,r,o,a,h)},fade:function(t,i,n,r,o,a,h){return this.fadeEffect.start(!0,t,i,n,r,o,a,h)},flash:function(t,i,n,r,o,a,h){return this.flashEffect.start(t,i,n,r,o,a,h)},shake:function(t,i,n,r,o){return this.shakeEffect.start(t,i,n,r,o)},pan:function(t,i,n,r,o,a,h){return this.panEffect.start(t,i,n,r,o,a,h)},rotateTo:function(t,i,n,r,o,a,h){return this.rotateToEffect.start(t,i,n,r,o,a,h)},zoomTo:function(t,i,n,r,o,a){return this.zoomEffect.start(t,i,n,r,o,a)},preRender:function(){this.renderList.length=0;var t=this.width,i=this.height,n=.5*t,r=.5*i,a=this.zoom,h=this.matrix,d=t*this.originX,f=i*this.originY,b=this._follow,S=this.deadzone,A=this.scrollX,P=this.scrollY;S&&o(S,this.midPoint.x,this.midPoint.y);var O=!1;if(b&&!this.panEffect.isRunning){var L=b.x-this.followOffset.x,D=b.y-this.followOffset.y;S?(L<S.x?A=T(A,A-(S.x-L),this.lerp.x):L>S.right&&(A=T(A,A+(L-S.right),this.lerp.x)),D<S.y?P=T(P,P-(S.y-D),this.lerp.y):D>S.bottom&&(P=T(P,P+(D-S.bottom),this.lerp.y))):(A=T(A,L-d,this.lerp.x),P=T(P,D-f,this.lerp.y)),O=!0}this.useBounds&&(A=this.clampX(A),P=this.clampY(P)),this.roundPixels&&(d=Math.round(d),f=Math.round(f),A=Math.round(A),P=Math.round(P)),this.scrollX=A,this.scrollY=P;var I=A+n,F=P+r;this.midPoint.set(I,F);var B=t/a,N=i/a,Y=I-B/2,X=F-N/2;this.roundPixels&&(Y=Math.round(Y),X=Math.round(X)),this.worldView.setTo(Y,X,B,N),h.applyITRS(this.x+d,this.y+f,this.rotation,a,a),h.translate(-d,-f),this.shakeEffect.preRender(),O&&this.emit(p.FOLLOW_UPDATE,this,b)},setLerp:function(t,i){return void 0===t&&(t=1),void 0===i&&(i=t),this.lerp.set(t,i),this},setFollowOffset:function(t,i){return void 0===t&&(t=0),void 0===i&&(i=0),this.followOffset.set(t,i),this},startFollow:function(t,i,n,r,o,h){void 0===i&&(i=!1),void 0===n&&(n=1),void 0===r&&(r=n),void 0===o&&(o=0),void 0===h&&(h=o),this._follow=t,this.roundPixels=i,n=a(n,0,1),r=a(r,0,1),this.lerp.set(n,r),this.followOffset.set(o,h);var d=this.width/2,f=this.height/2,p=t.x-o,T=t.y-h;return this.midPoint.set(p,T),this.scrollX=p-d,this.scrollY=T-f,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(t,i){this.visible&&(this.rotateToEffect.update(t,i),this.panEffect.update(t,i),this.zoomEffect.update(t,i),this.shakeEffect.update(t,i),this.flashEffect.update(t,i),this.fadeEffect.update(t,i))},destroy:function(){this.resetFX(),r.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});t.exports=A},function(t,i,n){var r=n(38);t.exports=function(t){var i=new r;t=t.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,i,n,r){return i+i+n+n+r+r}));var n=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(n){var o=parseInt(n[1],16),a=parseInt(n[2],16),h=parseInt(n[3],16);i.setTo(o,a,h)}return i}},function(t,i){t.exports=function(t,i,n,r){return r<<24|t<<16|i<<8|n}},function(t,i){t.exports=function(t,i,n,r){void 0===r&&(r={h:0,s:0,v:0}),t/=255,i/=255,n/=255;var o=Math.min(t,i,n),a=Math.max(t,i,n),h=a-o,d=0,f=0===a?0:h/a,p=a;return a!==o&&(a===t?d=(i-n)/h+(i<n?6:0):a===i?d=(n-t)/h+2:a===n&&(d=(t-i)/h+4),d/=6),r.hasOwnProperty("_h")?(r._h=d,r._s=f,r._v=p):(r.h=d,r.s=f,r.v=p),r}},function(t,i){t.exports=function(t){return t>16777215?{a:t>>>24,r:t>>16&255,g:t>>8&255,b:255&t}:{a:255,r:t>>16&255,g:t>>8&255,b:255&t}}},function(t,i,n){var r=n(38);t.exports=function(t){return new r(t.r,t.g,t.b,t.a)}},function(t,i,n){var r=n(38);t.exports=function(t){var i=new r,n=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(t.toLowerCase());if(n){var o=parseInt(n[1],10),a=parseInt(n[2],10),h=parseInt(n[3],10),d=void 0!==n[4]?parseFloat(n[4]):1;i.setTo(o,a,h,255*d)}return i}},function(t,i,n){t.exports={Fade:n(761),Flash:n(762),Pan:n(763),Shake:n(796),RotateTo:n(797),Zoom:n(798)}},function(t,i,n){t.exports={In:n(764),Out:n(765),InOut:n(766)}},function(t,i,n){t.exports={In:n(767),Out:n(768),InOut:n(769)}},function(t,i,n){t.exports={In:n(770),Out:n(771),InOut:n(772)}},function(t,i,n){t.exports={In:n(773),Out:n(774),InOut:n(775)}},function(t,i,n){t.exports={In:n(776),Out:n(777),InOut:n(778)}},function(t,i,n){t.exports={In:n(779),Out:n(780),InOut:n(781)}},function(t,i,n){t.exports=n(782)},function(t,i,n){t.exports={In:n(783),Out:n(784),InOut:n(785)}},function(t,i,n){t.exports={In:n(786),Out:n(787),InOut:n(788)}},function(t,i,n){t.exports={In:n(789),Out:n(790),InOut:n(791)}},function(t,i,n){t.exports={In:n(792),Out:n(793),InOut:n(794)}},function(t,i,n){t.exports=n(795)},function(t,i,n){var r=n(0),o=n(33),a=n(347),h=n(2),d=n(6),f=n(7),p=n(193),T=n(1),b=n(197),S=n(187),A=new r({initialize:function Config2(t){void 0===t&&(t={}),this.width=d(t,"width",1024),this.height=d(t,"height",768),this.zoom=d(t,"zoom",1),this.parent=d(t,"parent",void 0),this.scaleMode=d(t,"scaleMode",0),this.expandParent=d(t,"expandParent",!0),this.autoRound=d(t,"autoRound",!1),this.autoCenter=d(t,"autoCenter",0),this.resizeInterval=d(t,"resizeInterval",500),this.fullscreenTarget=d(t,"fullscreenTarget",null),this.minWidth=d(t,"minWidth",0),this.maxWidth=d(t,"maxWidth",0),this.minHeight=d(t,"minHeight",0),this.maxHeight=d(t,"maxHeight",0);var i=d(t,"scale",null);i&&(this.width=d(i,"width",this.width),this.height=d(i,"height",this.height),this.zoom=d(i,"zoom",this.zoom),this.parent=d(i,"parent",this.parent),this.scaleMode=d(i,"mode",this.scaleMode),this.expandParent=d(i,"expandParent",this.expandParent),this.autoRound=d(i,"autoRound",this.autoRound),this.autoCenter=d(i,"autoCenter",this.autoCenter),this.resizeInterval=d(i,"resizeInterval",this.resizeInterval),this.fullscreenTarget=d(i,"fullscreenTarget",this.fullscreenTarget),this.minWidth=d(i,"min.width",this.minWidth),this.maxWidth=d(i,"max.width",this.maxWidth),this.minHeight=d(i,"min.height",this.minHeight),this.maxHeight=d(i,"max.height",this.maxHeight)),this.renderType=d(t,"type",o.AUTO),this.canvas=d(t,"canvas",null),this.context=d(t,"context",null),this.canvasStyle=d(t,"canvasStyle",null),this.customEnvironment=d(t,"customEnvironment",!1),this.sceneConfig=d(t,"scene",null),this.seed=d(t,"seed",[(Date.now()*Math.random()).toString()]),p.RND=new p.RandomDataGenerator(this.seed),this.gameTitle=d(t,"title",""),this.gameURL=d(t,"url","https://phaser.io"),this.gameVersion=d(t,"version",""),this.autoFocus=d(t,"autoFocus",!0),this.domCreateContainer=d(t,"dom.createContainer",!1),this.domBehindCanvas=d(t,"dom.behindCanvas",!1),this.domPointerEvents=d(t,"dom.pointerEvents","none"),this.inputKeyboard=d(t,"input.keyboard",!0),this.inputKeyboardEventTarget=d(t,"input.keyboard.target",window),this.inputKeyboardCapture=d(t,"input.keyboard.capture",[]),this.inputMouse=d(t,"input.mouse",!0),this.inputMouseEventTarget=d(t,"input.mouse.target",null),this.inputMousePreventDefaultDown=d(t,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=d(t,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=d(t,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=d(t,"input.mouse.preventDefaultWheel",!0),this.inputTouch=d(t,"input.touch",a.input.touch),this.inputTouchEventTarget=d(t,"input.touch.target",null),this.inputTouchCapture=d(t,"input.touch.capture",!0),this.inputActivePointers=d(t,"input.activePointers",1),this.inputSmoothFactor=d(t,"input.smoothFactor",0),this.inputWindowEvents=d(t,"input.windowEvents",!0),this.inputGamepad=d(t,"input.gamepad",!1),this.inputGamepadEventTarget=d(t,"input.gamepad.target",window),this.disableContextMenu=d(t,"disableContextMenu",!1),this.audio=d(t,"audio",{}),this.hideBanner=!1===d(t,"banner",null),this.hidePhaser=d(t,"banner.hidePhaser",!1),this.bannerTextColor=d(t,"banner.text","#ffffff"),this.bannerBackgroundColor=d(t,"banner.background",["#ff0000","#ffff00","#00ff00","#00ffff","#000000"]),""===this.gameTitle&&this.hidePhaser&&(this.hideBanner=!0),this.fps=d(t,"fps",null);var n=d(t,"render",t);this.pipeline=d(n,"pipeline",null),this.antialias=d(n,"antialias",!0),this.antialiasGL=d(n,"antialiasGL",!0),this.mipmapFilter=d(n,"mipmapFilter","LINEAR"),this.desynchronized=d(n,"desynchronized",!1),this.roundPixels=d(n,"roundPixels",!1),this.pixelArt=d(n,"pixelArt",1!==this.zoom),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=d(n,"transparent",!1),this.clearBeforeRender=d(n,"clearBeforeRender",!0),this.preserveDrawingBuffer=d(n,"preserveDrawingBuffer",!1),this.premultipliedAlpha=d(n,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=d(n,"failIfMajorPerformanceCaveat",!1),this.powerPreference=d(n,"powerPreference","default"),this.batchSize=d(n,"batchSize",4096),this.maxTextures=d(n,"maxTextures",-1),this.maxLights=d(n,"maxLights",10);var r=d(t,"backgroundColor",0);this.backgroundColor=S(r),this.transparent&&(this.backgroundColor=S(0),this.backgroundColor.alpha=0),this.preBoot=d(t,"callbacks.preBoot",T),this.postBoot=d(t,"callbacks.postBoot",T),this.physics=d(t,"physics",{}),this.defaultPhysicsSystem=d(this.physics,"default",!1),this.loaderBaseURL=d(t,"loader.baseURL",""),this.loaderPath=d(t,"loader.path","");var A=a.os.android?6:32;this.loaderMaxParallelDownloads=d(t,"loader.maxParallelDownloads",A),this.loaderCrossOrigin=d(t,"loader.crossOrigin",void 0),this.loaderResponseType=d(t,"loader.responseType",""),this.loaderAsync=d(t,"loader.async",!0),this.loaderUser=d(t,"loader.user",""),this.loaderPassword=d(t,"loader.password",""),this.loaderTimeout=d(t,"loader.timeout",0),this.loaderWithCredentials=d(t,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var P=d(t,"plugins",null),O=b.DefaultScene;P&&(Array.isArray(P)?this.defaultPlugins=P:f(P)&&(this.installGlobalPlugins=h(P,"global",[]),this.installScenePlugins=h(P,"scene",[]),Array.isArray(P.default)?O=P.default:Array.isArray(P.defaultMerge)&&(O=O.concat(P.defaultMerge)))),this.defaultPlugins=O;var L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=d(t,"images.default",L+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=d(t,"images.missing",L+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=d(t,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=o.WEBGL:window.FORCE_CANVAS&&(this.renderType=o.CANVAS))}});t.exports=A},function(t,i,n){t.exports={os:n(105),browser:n(136),features:n(191),input:n(808),audio:n(809),video:n(810),fullscreen:n(811),canvasFeatures:n(348)}},function(t,i,n){var r=n(31),o={supportInverseAlpha:!1,supportNewBlendModes:!1};t.exports=function init(){return"function"!=typeof importScripts&&void 0!==document&&(o.supportNewBlendModes=function checkBlendMode(){var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",i="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",n=new Image;return n.onload=function(){var a=new Image;a.onload=function(){var t=r.create(a,6,1).getContext("2d");if(t.globalCompositeOperation="multiply",t.drawImage(n,0,0),t.drawImage(a,2,0),!t.getImageData(2,0,1,1))return!1;var i=t.getImageData(2,0,1,1).data;r.remove(a),o.supportNewBlendModes=255===i[0]&&0===i[1]&&0===i[2]},a.src=t+"/wCKxvRF"+i},n.src=t+"AP804Oa6"+i,!1}(),o.supportInverseAlpha=function checkInverseAlpha(){var t=r.create(this,2,1).getContext("2d");t.fillStyle="rgba(10, 20, 30, 0.5)",t.fillRect(0,0,1,1);var i=t.getImageData(0,0,1,1);if(null===i)return!1;t.putImageData(i,1,0);var n=t.getImageData(1,0,1,1);return n.data[0]===i.data[0]&&n.data[1]===i.data[1]&&n.data[2]===i.data[2]&&n.data[3]===i.data[3]}()),o}()},function(t,i){t.exports=function(t,i,n,r){return Math.atan2(r-i,n-t)}},function(t,i){t.exports=function(t,i){return Math.atan2(i.y-t.y,i.x-t.x)}},function(t,i){t.exports=function(t){return(t%=2*Math.PI)>=0?t:t+2*Math.PI}},function(t,i){t.exports=function(t,i){var n=t.x-i.x,r=t.y-i.y;return Math.sqrt(n*n+r*r)}},function(t,i){t.exports=function(t,i,n,r){var o=t-n,a=i-r;return o*o+a*a}},function(t,i){t.exports=function(t,i,n){return void 0===n&&(n=1e-4),t>i-n}},function(t,i){t.exports=function(t,i,n){return void 0===n&&(n=1e-4),t<i+n}},function(t,i,n){var r=n(357);t.exports=function(t,i){return r(t)/r(i)/r(t-i)}},function(t,i){t.exports=function(t){if(0===t)return 1;for(var i=t;--t;)i*=t;return i}},function(t,i){t.exports=function(t,i,n,r,o){return function P0(t,i){var n=1-t;return n*n*n*i}(t,i)+function P1(t,i){var n=1-t;return 3*n*n*t*i}(t,n)+function P2(t,i){return 3*(1-t)*t*t*i}(t,r)+function P3(t,i){return t*t*t*i}(t,o)}},function(t,i){t.exports=function(t,i,n,r){return function P0(t,i){var n=1-t;return n*n*i}(t,i)+function P1(t,i){return 2*(1-t)*t*i}(t,n)+function P2(t,i){return t*t*i}(t,r)}},function(t,i,n){var r=n(184);t.exports=function(t,i,n){return i+(n-i)*r(t,0,1)}},function(t,i){t.exports=function(t){var i=Math.log(t)/.6931471805599453;return 1<<Math.ceil(i)}},function(t,i){t.exports=function(t,i){var n=t.x,r=t.y;return t.x=n*Math.cos(i)-r*Math.sin(i),t.y=n*Math.sin(i)+r*Math.cos(i),t}},function(t,i){t.exports=function(t){return t>0?Math.ceil(t):Math.floor(t)}},function(t,i,n){var r=new(n(0))({initialize:function Matrix32(t){this.val=new Float32Array(9),t?this.copy(t):this.identity()},clone:function(){return new r(this)},set:function(t){return this.copy(t)},copy:function(t){var i=this.val,n=t.val;return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],this},fromMat4:function(t){var i=t.val,n=this.val;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[4],n[4]=i[5],n[5]=i[6],n[6]=i[8],n[7]=i[9],n[8]=i[10],this},fromArray:function(t){var i=this.val;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],this},identity:function(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},transpose:function(){var t=this.val,i=t[1],n=t[2],r=t[5];return t[1]=t[3],t[2]=t[6],t[3]=i,t[5]=t[7],t[6]=n,t[7]=r,this},invert:function(){var t=this.val,i=t[0],n=t[1],r=t[2],o=t[3],a=t[4],h=t[5],d=t[6],f=t[7],p=t[8],T=p*a-h*f,b=-p*o+h*d,S=f*o-a*d,A=i*T+n*b+r*S;return A?(A=1/A,t[0]=T*A,t[1]=(-p*n+r*f)*A,t[2]=(h*n-r*a)*A,t[3]=b*A,t[4]=(p*i-r*d)*A,t[5]=(-h*i+r*o)*A,t[6]=S*A,t[7]=(-f*i+n*d)*A,t[8]=(a*i-n*o)*A,this):null},adjoint:function(){var t=this.val,i=t[0],n=t[1],r=t[2],o=t[3],a=t[4],h=t[5],d=t[6],f=t[7],p=t[8];return t[0]=a*p-h*f,t[1]=r*f-n*p,t[2]=n*h-r*a,t[3]=h*d-o*p,t[4]=i*p-r*d,t[5]=r*o-i*h,t[6]=o*f-a*d,t[7]=n*d-i*f,t[8]=i*a-n*o,this},determinant:function(){var t=this.val,i=t[0],n=t[1],r=t[2],o=t[3],a=t[4],h=t[5],d=t[6],f=t[7],p=t[8];return i*(p*a-h*f)+n*(-p*o+h*d)+r*(f*o-a*d)},multiply:function(t){var i=this.val,n=i[0],r=i[1],o=i[2],a=i[3],h=i[4],d=i[5],f=i[6],p=i[7],T=i[8],b=t.val,S=b[0],A=b[1],P=b[2],O=b[3],L=b[4],D=b[5],I=b[6],F=b[7],B=b[8];return i[0]=S*n+A*a+P*f,i[1]=S*r+A*h+P*p,i[2]=S*o+A*d+P*T,i[3]=O*n+L*a+D*f,i[4]=O*r+L*h+D*p,i[5]=O*o+L*d+D*T,i[6]=I*n+F*a+B*f,i[7]=I*r+F*h+B*p,i[8]=I*o+F*d+B*T,this},translate:function(t){var i=this.val,n=t.x,r=t.y;return i[6]=n*i[0]+r*i[3]+i[6],i[7]=n*i[1]+r*i[4]+i[7],i[8]=n*i[2]+r*i[5]+i[8],this},rotate:function(t){var i=this.val,n=i[0],r=i[1],o=i[2],a=i[3],h=i[4],d=i[5],f=Math.sin(t),p=Math.cos(t);return i[0]=p*n+f*a,i[1]=p*r+f*h,i[2]=p*o+f*d,i[3]=p*a-f*n,i[4]=p*h-f*r,i[5]=p*d-f*o,this},scale:function(t){var i=this.val,n=t.x,r=t.y;return i[0]=n*i[0],i[1]=n*i[1],i[2]=n*i[2],i[3]=r*i[3],i[4]=r*i[4],i[5]=r*i[5],this},fromQuat:function(t){var i=t.x,n=t.y,r=t.z,o=t.w,a=i+i,h=n+n,d=r+r,f=i*a,p=i*h,T=i*d,b=n*h,S=n*d,A=r*d,P=o*a,O=o*h,L=o*d,D=this.val;return D[0]=1-(b+A),D[3]=p+L,D[6]=T-O,D[1]=p-L,D[4]=1-(f+A),D[7]=S+P,D[2]=T+O,D[5]=S-P,D[8]=1-(f+b),this},normalFromMat4:function(t){var i=t.val,n=this.val,r=i[0],o=i[1],a=i[2],h=i[3],d=i[4],f=i[5],p=i[6],T=i[7],b=i[8],S=i[9],A=i[10],P=i[11],O=i[12],L=i[13],D=i[14],I=i[15],F=r*f-o*d,B=r*p-a*d,N=r*T-h*d,Y=o*p-a*f,X=o*T-h*f,G=a*T-h*p,U=b*L-S*O,V=b*D-A*O,z=b*I-P*O,W=S*D-A*L,H=S*I-P*L,q=A*I-P*D,Z=F*q-B*H+N*W+Y*z-X*V+G*U;return Z?(Z=1/Z,n[0]=(f*q-p*H+T*W)*Z,n[1]=(p*z-d*q-T*V)*Z,n[2]=(d*H-f*z+T*U)*Z,n[3]=(a*H-o*q-h*W)*Z,n[4]=(r*q-a*z+h*V)*Z,n[5]=(o*z-r*H-h*U)*Z,n[6]=(L*G-D*X+I*Y)*Z,n[7]=(D*N-O*G-I*B)*Z,n[8]=(O*X-L*N+I*F)*Z,this):null}});t.exports=r},function(t,i,n){var r=n(0),o=n(364),a=n(1),h=n(39),d=1e-6,f=new Int8Array([1,2,0]),p=new Float32Array([0,0,0]),T=new h(1,0,0),b=new h(0,1,0),S=new h,A=new o,P=new r({initialize:function Quaternion2(t,i,n,r){this.onChangeCallback=a,this.set(t,i,n,r)},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback(this)}},copy:function(t){return this.set(t)},set:function(t,i,n,r,o){return void 0===o&&(o=!0),"object"==typeof t?(this._x=t.x||0,this._y=t.y||0,this._z=t.z||0,this._w=t.w||0):(this._x=t||0,this._y=i||0,this._z=n||0,this._w=r||0),o&&this.onChangeCallback(this),this},add:function(t){return this._x+=t.x,this._y+=t.y,this._z+=t.z,this._w+=t.w,this.onChangeCallback(this),this},subtract:function(t){return this._x-=t.x,this._y-=t.y,this._z-=t.z,this._w-=t.w,this.onChangeCallback(this),this},scale:function(t){return this._x*=t,this._y*=t,this._z*=t,this._w*=t,this.onChangeCallback(this),this},length:function(){var t=this.x,i=this.y,n=this.z,r=this.w;return Math.sqrt(t*t+i*i+n*n+r*r)},lengthSq:function(){var t=this.x,i=this.y,n=this.z,r=this.w;return t*t+i*i+n*n+r*r},normalize:function(){var t=this.x,i=this.y,n=this.z,r=this.w,o=t*t+i*i+n*n+r*r;return o>0&&(o=1/Math.sqrt(o),this._x=t*o,this._y=i*o,this._z=n*o,this._w=r*o),this.onChangeCallback(this),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,i){void 0===i&&(i=0);var n=this.x,r=this.y,o=this.z,a=this.w;return this.set(n+i*(t.x-n),r+i*(t.y-r),o+i*(t.z-o),a+i*(t.w-a))},rotationTo:function(t,i){var n=t.x*i.x+t.y*i.y+t.z*i.z;return n<-.999999?(S.copy(T).cross(t).length()<d&&S.copy(b).cross(t),S.normalize(),this.setAxisAngle(S,Math.PI)):n>.999999?this.set(0,0,0,1):(S.copy(t).cross(i),this._x=S.x,this._y=S.y,this._z=S.z,this._w=1+n,this.normalize())},setAxes:function(t,i,n){var r=A.val;return r[0]=i.x,r[3]=i.y,r[6]=i.z,r[1]=n.x,r[4]=n.y,r[7]=n.z,r[2]=-t.x,r[5]=-t.y,r[8]=-t.z,this.fromMat3(A).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(t,i){i*=.5;var n=Math.sin(i);return this.set(n*t.x,n*t.y,n*t.z,Math.cos(i))},multiply:function(t){var i=this.x,n=this.y,r=this.z,o=this.w,a=t.x,h=t.y,d=t.z,f=t.w;return this.set(i*f+o*a+n*d-r*h,n*f+o*h+r*a-i*d,r*f+o*d+i*h-n*a,o*f-i*a-n*h-r*d)},slerp:function(t,i){var n=this.x,r=this.y,o=this.z,a=this.w,h=t.x,f=t.y,p=t.z,T=t.w,b=n*h+r*f+o*p+a*T;b<0&&(b=-b,h=-h,f=-f,p=-p,T=-T);var S=1-i,A=i;if(1-b>d){var P=Math.acos(b),O=Math.sin(P);S=Math.sin((1-i)*P)/O,A=Math.sin(i*P)/O}return this.set(S*n+A*h,S*r+A*f,S*o+A*p,S*a+A*T)},invert:function(){var t=this.x,i=this.y,n=this.z,r=this.w,o=t*t+i*i+n*n+r*r,a=o?1/o:0;return this.set(-t*a,-i*a,-n*a,r*a)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(t){t*=.5;var i=this.x,n=this.y,r=this.z,o=this.w,a=Math.sin(t),h=Math.cos(t);return this.set(i*h+o*a,n*h+r*a,r*h-n*a,o*h-i*a)},rotateY:function(t){t*=.5;var i=this.x,n=this.y,r=this.z,o=this.w,a=Math.sin(t),h=Math.cos(t);return this.set(i*h-r*a,n*h+o*a,r*h+i*a,o*h-n*a)},rotateZ:function(t){t*=.5;var i=this.x,n=this.y,r=this.z,o=this.w,a=Math.sin(t),h=Math.cos(t);return this.set(i*h+n*a,n*h-i*a,r*h+o*a,o*h-r*a)},calculateW:function(){var t=this.x,i=this.y,n=this.z;return this.w=-Math.sqrt(1-t*t-i*i-n*n),this},setFromEuler:function(t,i){var n=t.x/2,r=t.y/2,o=t.z/2,a=Math.cos(n),h=Math.cos(r),d=Math.cos(o),f=Math.sin(n),p=Math.sin(r),T=Math.sin(o);switch(t.order){case"XYZ":this.set(f*h*d+a*p*T,a*p*d-f*h*T,a*h*T+f*p*d,a*h*d-f*p*T,i);break;case"YXZ":this.set(f*h*d+a*p*T,a*p*d-f*h*T,a*h*T-f*p*d,a*h*d+f*p*T,i);break;case"ZXY":this.set(f*h*d-a*p*T,a*p*d+f*h*T,a*h*T+f*p*d,a*h*d-f*p*T,i);break;case"ZYX":this.set(f*h*d-a*p*T,a*p*d+f*h*T,a*h*T-f*p*d,a*h*d+f*p*T,i);break;case"YZX":this.set(f*h*d+a*p*T,a*p*d+f*h*T,a*h*T-f*p*d,a*h*d-f*p*T,i);break;case"XZY":this.set(f*h*d-a*p*T,a*p*d-f*h*T,a*h*T+f*p*d,a*h*d+f*p*T,i)}return this},setFromRotationMatrix:function(t){var i,n=t.val,r=n[0],o=n[4],a=n[8],h=n[1],d=n[5],f=n[9],p=n[2],T=n[6],b=n[10],S=r+d+b;return S>0?(i=.5/Math.sqrt(S+1),this.set((T-f)*i,(a-p)*i,(h-o)*i,.25/i)):r>d&&r>b?(i=2*Math.sqrt(1+r-d-b),this.set(.25*i,(o+h)/i,(a+p)/i,(T-f)/i)):d>b?(i=2*Math.sqrt(1+d-r-b),this.set((o+h)/i,.25*i,(f+T)/i,(a-p)/i)):(i=2*Math.sqrt(1+b-r-d),this.set((a+p)/i,(f+T)/i,.25*i,(h-o)/i)),this},fromMat3:function(t){var i,n=t.val,r=n[0]+n[4]+n[8];if(r>0)i=Math.sqrt(r+1),this.w=.5*i,i=.5/i,this._x=(n[7]-n[5])*i,this._y=(n[2]-n[6])*i,this._z=(n[3]-n[1])*i;else{var o=0;n[4]>n[0]&&(o=1),n[8]>n[3*o+o]&&(o=2);var a=f[o],h=f[a];i=Math.sqrt(n[3*o+o]-n[3*a+a]-n[3*h+h]+1),p[o]=.5*i,i=.5/i,p[a]=(n[3*a+o]+n[3*o+a])*i,p[h]=(n[3*h+o]+n[3*o+h])*i,this._x=p[0],this._y=p[1],this._z=p[2],this._w=(n[3*h+a]-n[3*a+h])*i}return this.onChangeCallback(this),this}});t.exports=P},function(t,i,n){var r=n(367),o=n(31),a=n(33),h=n(191);t.exports=function(t){var i=t.config;if((i.customEnvironment||i.canvas)&&i.renderType===a.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!i.customEnvironment&&!i.canvas&&i.renderType!==a.HEADLESS)if(i.renderType===a.CANVAS||i.renderType!==a.CANVAS&&!h.webGL){if(!h.canvas)throw new Error("Cannot create Canvas or WebGL context, aborting.");i.renderType=a.CANVAS}else i.renderType=a.WEBGL;i.antialias||o.disableSmoothing();var d,f,p=t.scale.baseSize,T=p.width,b=p.height;i.canvas?(t.canvas=i.canvas,t.canvas.width=T,t.canvas.height=b):t.canvas=o.create(t,T,b,i.renderType),i.canvasStyle&&(t.canvas.style=i.canvasStyle),i.antialias||r.setCrisp(t.canvas),i.renderType!==a.HEADLESS&&(d=n(368),f=n(371),i.renderType===a.WEBGL?t.renderer=new f(t):(t.renderer=new d(t),t.context=t.renderer.gameContext))}},function(t,i){t.exports={setCrisp:function(t){return["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"].forEach((function(i){t.style["image-rendering"]=i})),t.style.msInterpolationMode="nearest-neighbor",t},setBicubic:function(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}}},function(t,i,n){var r=n(37),o=n(369),a=n(0),h=n(33),d=n(9),f=n(91),p=n(370),T=n(104),b=n(106),S=n(25),A=new a({Extends:d,initialize:function CanvasRenderer2(t){d.call(this);var i=t.config;this.config={clearBeforeRender:i.clearBeforeRender,backgroundColor:i.backgroundColor,antialias:i.antialias,roundPixels:i.roundPixels},this.game=t,this.type=h.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=t.canvas;var n={alpha:t.config.transparent,desynchronized:t.config.desynchronized};this.gameContext=i.context?i.context:this.gameCanvas.getContext("2d",n),this.currentContext=this.gameContext,this.antialias=t.config.antialias,this.blendModes=p(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new S,this._tempMatrix2=new S,this._tempMatrix3=new S,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(b.READY,this.boot,this)},boot:function(){var t=this.game,i=t.scale.baseSize;this.width=i.width,this.height=i.height,this.isBooted=!0,t.scale.on(T.RESIZE,this.onResize,this),this.resize(i.width,i.height)},onResize:function(t,i){i.width===this.width&&i.height===this.height||this.resize(i.width,i.height)},resize:function(t,i){this.width=t,this.height=i,this.emit(f.RESIZE,t,i)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(t){return this.currentContext.globalCompositeOperation=t,this},setContext:function(t){return this.currentContext=t||this.gameContext,this},setAlpha:function(t){return this.currentContext.globalAlpha=t,this},preRender:function(){var t=this.gameContext,i=this.config,n=this.width,r=this.height;t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),i.clearBeforeRender&&(t.clearRect(0,0,n,r),i.transparent||(t.fillStyle=i.backgroundColor.rgba,t.fillRect(0,0,n,r))),t.save(),this.drawCount=0,this.emit(f.PRE_RENDER)},render:function(t,i,n){var o=i.length;this.emit(f.RENDER,t,n);var a=n.x,h=n.y,d=n.width,p=n.height,T=n.renderToTexture?n.context:t.sys.context;T.save(),this.game.scene.customViewports&&(T.beginPath(),T.rect(a,h,d,p),T.clip()),this.currentContext=T;var b=n.mask;b&&b.preRenderCanvas(this,null,n._maskCamera),n.transparent||(T.fillStyle=n.backgroundColor.rgba,T.fillRect(a,h,d,p)),T.globalAlpha=n.alpha,T.globalCompositeOperation="source-over",this.drawCount+=o,n.renderToTexture&&n.emit(r.PRE_RENDER,n),n.matrix.copyToContext(T);for(var S=0;S<o;S++){var A=i[S];A.mask&&A.mask.preRenderCanvas(this,A,n),A.renderCanvas(this,A,n),A.mask&&A.mask.postRenderCanvas(this,A,n)}T.setTransform(1,0,0,1,0,0),T.globalCompositeOperation="source-over",T.globalAlpha=1,n.flashEffect.postRenderCanvas(T),n.fadeEffect.postRenderCanvas(T),n.dirty=!1,b&&b.postRenderCanvas(this),T.restore(),n.renderToTexture&&(n.emit(r.POST_RENDER,n),n.renderToGame&&t.sys.context.drawImage(n.canvas,a,h))},postRender:function(){this.gameContext.restore(),this.emit(f.POST_RENDER);var t=this.snapshotState;t.callback&&(o(this.gameCanvas,t),t.callback=null)},snapshotCanvas:function(t,i,n,r,a,h,d,f,p){void 0===n&&(n=!1),this.snapshotArea(r,a,h,d,i,f,p);var T=this.snapshotState;return T.getPixel=n,o(this.canvas,T),T.callback=null,this},snapshot:function(t,i,n){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,t,i,n)},snapshotArea:function(t,i,n,r,o,a,h){var d=this.snapshotState;return d.callback=o,d.type=a,d.encoder=h,d.getPixel=!1,d.x=t,d.y=i,d.width=Math.min(n,this.gameCanvas.width),d.height=Math.min(r,this.gameCanvas.height),this},snapshotPixel:function(t,i,n){return this.snapshotArea(t,i,1,1,n),this.snapshotState.getPixel=!0,this},batchSprite:function(t,i,n,r){var o=n.alpha*t.alpha;if(0!==o){var a=this.currentContext,h=this._tempMatrix1,d=this._tempMatrix2,f=i.canvasData,p=f.x,T=f.y,b=i.cutWidth,S=i.cutHeight,A=i.customPivot,P=i.source.resolution,O=t.displayOriginX,L=t.displayOriginY,D=-O+i.x,I=-L+i.y;if(t.isCropped){var F=t._crop;F.flipX===t.flipX&&F.flipY===t.flipY||i.updateCropUVs(F,t.flipX,t.flipY),b=F.cw,S=F.ch,p=F.cx,T=F.cy,D=-O+F.x,I=-L+F.y,t.flipX&&(D>=0?D=-(D+b):D<0&&(D=Math.abs(D)-b)),t.flipY&&(I>=0?I=-(I+S):I<0&&(I=Math.abs(I)-S))}var B=1,N=1;t.flipX&&(A||(D+=-i.realWidth+2*O),B=-1),t.flipY&&(A||(I+=-i.realHeight+2*L),N=-1),d.applyITRS(t.x,t.y,t.rotation,t.scaleX*B,t.scaleY*N),h.copyFrom(n.matrix),r?(h.multiplyWithOffset(r,-n.scrollX*t.scrollFactorX,-n.scrollY*t.scrollFactorY),d.e=t.x,d.f=t.y):(d.e-=n.scrollX*t.scrollFactorX,d.f-=n.scrollY*t.scrollFactorY),h.multiply(d),a.save(),h.setToContext(a),a.globalCompositeOperation=this.blendModes[t.blendMode],a.globalAlpha=o,a.imageSmoothingEnabled=!(!this.antialias||i.source.scaleMode),t.mask&&t.mask.preRenderCanvas(this,t,n),a.drawImage(i.source.image,p,T,b,S,D,I,b/P,S/P),t.mask&&t.mask.postRenderCanvas(this,t,n),a.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});t.exports=A},function(t,i,n){var r=n(31),o=n(38),a=n(2);t.exports=function(t,i){var n=a(i,"callback"),h=a(i,"type","image/png"),d=a(i,"encoder",.92),f=Math.abs(Math.round(a(i,"x",0))),p=Math.abs(Math.round(a(i,"y",0))),T=a(i,"width",t.width),b=a(i,"height",t.height);if(a(i,"getPixel",!1)){var S=t.getContext("2d").getImageData(f,p,1,1).data;n.call(null,new o(S[0],S[1],S[2],S[3]/255))}else if(0!==f||0!==p||T!==t.width||b!==t.height){var A=r.createWebGL(this,T,b);A.getContext("2d").drawImage(t,f,p,T,b,0,0,T,b);var P=new Image;P.onerror=function(){n.call(null),r.remove(A)},P.onload=function(){n.call(null,P),r.remove(A)},P.src=A.toDataURL(h,d)}else{var O=new Image;O.onerror=function(){n.call(null)},O.onload=function(){n.call(null,O)},O.src=t.toDataURL(h,d)}}},function(t,i,n){var r=n(35),o=n(348);t.exports=function(){var t=[],i=o.supportNewBlendModes,n="source-over";return t[r.NORMAL]=n,t[r.ADD]="lighter",t[r.MULTIPLY]=i?"multiply":n,t[r.SCREEN]=i?"screen":n,t[r.OVERLAY]=i?"overlay":n,t[r.DARKEN]=i?"darken":n,t[r.LIGHTEN]=i?"lighten":n,t[r.COLOR_DODGE]=i?"color-dodge":n,t[r.COLOR_BURN]=i?"color-burn":n,t[r.HARD_LIGHT]=i?"hard-light":n,t[r.SOFT_LIGHT]=i?"soft-light":n,t[r.DIFFERENCE]=i?"difference":n,t[r.EXCLUSION]=i?"exclusion":n,t[r.HUE]=i?"hue":n,t[r.SATURATION]=i?"saturation":n,t[r.COLOR]=i?"color":n,t[r.LUMINOSITY]=i?"luminosity":n,t[r.ERASE]="destination-out",t[r.SOURCE_IN]="source-in",t[r.SOURCE_OUT]="source-out",t[r.SOURCE_ATOP]="source-atop",t[r.DESTINATION_OVER]="destination-over",t[r.DESTINATION_IN]="destination-in",t[r.DESTINATION_OUT]="destination-out",t[r.DESTINATION_ATOP]="destination-atop",t[r.LIGHTER]="lighter",t[r.COPY]="copy",t[r.XOR]="xor",t}},function(t,i,n){var r=n(93),o=n(37),a=n(0),h=n(33),d=n(9),f=n(91),p=n(22),T=n(138),b=n(69),S=n(1),A=n(372),P=n(141),O=n(104),L=n(106),D=n(12),I=n(383),F=new a({Extends:d,initialize:function WebGLRenderer2(t){d.call(this);var i=t.config,n={alpha:i.transparent,desynchronized:i.desynchronized,depth:!1,antialias:i.antialiasGL,premultipliedAlpha:i.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:i.failIfMajorPerformanceCaveat,powerPreference:i.powerPreference,preserveDrawingBuffer:i.preserveDrawingBuffer};this.config={clearBeforeRender:i.clearBeforeRender,antialias:i.antialias,backgroundColor:i.backgroundColor,contextCreation:n,roundPixels:i.roundPixels,maxTextures:i.maxTextures,maxTextureSize:i.maxTextureSize,batchSize:i.batchSize,maxLights:i.maxLights,mipmapFilter:i.mipmapFilter},this.game=t,this.type=h.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=t.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=S,this.contextRestoredHandler=S,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(t){var i,n=this.game,r=this.canvas,o=t.backgroundColor;if(!(i=n.config.context?n.config.context:r.getContext("webgl",t.contextCreation)||r.getContext("experimental-webgl",t.contextCreation))||i.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=i;var a=this;this.contextLostHandler=function(t){a.contextLost=!0,a.game.events.emit(p.CONTEXT_LOST,a),t.preventDefault()},this.contextRestoredHandler=function(){a.contextLost=!1,a.init(a.config),a.game.events.emit(p.CONTEXT_RESTORED,a)},r.addEventListener("webglcontextlost",this.contextLostHandler,!1),r.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),n.context=i;for(var d=0;d<=27;d++)this.blendModes.push({func:[i.ONE,i.ONE_MINUS_SRC_ALPHA],equation:i.FUNC_ADD});this.blendModes[1].func=[i.ONE,i.DST_ALPHA],this.blendModes[2].func=[i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[i.ONE,i.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[i.ZERO,i.ONE_MINUS_SRC_ALPHA],equation:i.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=i.BYTE,this.glFormats[1]=i.SHORT,this.glFormats[2]=i.UNSIGNED_BYTE,this.glFormats[3]=i.UNSIGNED_SHORT,this.glFormats[4]=i.FLOAT,this.glFuncMap={mat2:{func:i.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:i.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:i.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:i.uniform1f,length:1},"1fv":{func:i.uniform1fv,length:1},"1i":{func:i.uniform1i,length:1},"1iv":{func:i.uniform1iv,length:1},"2f":{func:i.uniform2f,length:2},"2fv":{func:i.uniform2fv,length:1},"2i":{func:i.uniform2i,length:2},"2iv":{func:i.uniform2iv,length:1},"3f":{func:i.uniform3f,length:3},"3fv":{func:i.uniform3fv,length:1},"3i":{func:i.uniform3i,length:3},"3iv":{func:i.uniform3iv,length:1},"4f":{func:i.uniform4f,length:4},"4fv":{func:i.uniform4fv,length:1},"4i":{func:i.uniform4i,length:4},"4iv":{func:i.uniform4iv,length:1}};var f=i.getSupportedExtensions();t.maxTextures&&-1!==t.maxTextures||(t.maxTextures=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS)),t.maxTextureSize||(t.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE));var T="WEBGL_compressed_texture_",S="WEBKIT_"+T;this.compression.ETC1=i.getExtension(T+"etc1")||i.getExtension(S+"etc1"),this.compression.PVRTC=i.getExtension(T+"pvrtc")||i.getExtension(S+"pvrtc"),this.compression.S3TC=i.getExtension(T+"s3tc")||i.getExtension(S+"s3tc"),this.supportedExtensions=f;var P="ANGLE_instanced_arrays";this.instancedArraysExtension=f.indexOf(P)>-1?i.getExtension(P):null;var O="OES_vertex_array_object";this.vaoExtension=f.indexOf(O)>-1?i.getExtension(O):null,i.disable(i.DEPTH_TEST),i.disable(i.CULL_FACE),i.enable(i.BLEND),i.clearColor(o.redGL,o.greenGL,o.blueGL,o.alphaGL),this.mipmapFilter=i[t.mipmapFilter],this.maxTextures=D.checkShaderMax(i,t.maxTextures),this.textureIndexes=[];var I=this.tempTextures;if(Array.isArray(I))for(var F=0;d<this.maxTextures;F++)i.deleteTexture(I[F]);else I=new Array(this.maxTextures);for(var B=0;B<this.maxTextures;B++){var N=i.createTexture();i.activeTexture(i.TEXTURE0+B),i.bindTexture(i.TEXTURE_2D,N),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),I[B]=N,this.textureIndexes.push(B)}return this.tempTextures=I,this.currentActiveTexture=1,this.startActiveTexture++,i.activeTexture(i.TEXTURE1),this.pipelines=new A(this),this.setBlendMode(h.BlendModes.NORMAL),this.projectionMatrix=(new b).identity(),n.textures.once(L.READY,this.boot,this),this},boot:function(){var t=this.game,i=this.pipelines,n=t.scale.baseSize;this.width=n.width,this.height=n.height,this.isBooted=!0,this.renderTarget=new P(this,this.width,this.height,1,0,!0,!0),i.boot(t.config.pipeline),this.blankTexture=t.textures.getFrame("__DEFAULT"),this.whiteTexture=t.textures.getFrame("__WHITE");var r=this.gl;r.bindFramebuffer(r.FRAMEBUFFER,null),r.enable(r.SCISSOR_TEST),t.scale.on(O.RESIZE,this.onResize,this),this.resize(n.width,n.height)},onResize:function(t,i){i.width===this.width&&i.height===this.height||this.resize(i.width,i.height)},beginCapture:function(t,i){void 0===t&&(t=this.width),void 0===i&&(i=this.height),this.renderTarget.bind(!0,t,i),this.setProjectionMatrix(t,i),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(t,i){var n=this.gl;return this.width=t,this.height=i,this.setProjectionMatrix(t,i),n.viewport(0,0,t,i),this.drawingBufferHeight=n.drawingBufferHeight,n.scissor(0,n.drawingBufferHeight-i,t,i),this.defaultScissor[2]=t,this.defaultScissor[3]=i,this.emit(f.RESIZE,t,i),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(t,i){return t===this.projectionWidth&&i===this.projectionHeight||(this.projectionWidth=t,this.projectionHeight=i,this.projectionMatrix.ortho(0,t,i,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(t){return!!this.supportedExtensions&&this.supportedExtensions.indexOf(t)},getExtension:function(t){return this.hasExtension(t)?(t in this.extensions||(this.extensions[t]=this.gl.getExtension(t)),this.extensions[t]):null},flush:function(){this.pipelines.flush()},pushScissor:function(t,i,n,r,o){void 0===o&&(o=this.drawingBufferHeight);var a=[t,i,n,r];return this.scissorStack.push(a),this.setScissor(t,i,n,r,o),this.currentScissor=a,a},setScissor:function(t,i,n,r,o){void 0===o&&(o=this.drawingBufferHeight);var a=this.gl,h=this.currentScissor,d=n>0&&r>0;if(h&&d){var f=h[0],p=h[1],T=h[2],b=h[3];d=f!==t||p!==i||T!==n||b!==r}d&&(this.flush(),a.scissor(t,o-i-r,n,r))},resetScissor:function(){var t=this.gl;t.enable(t.SCISSOR_TEST);var i=this.currentScissor;if(i){var n=i[0],r=i[1],o=i[2],a=i[3];o>0&&a>0&&t.scissor(n,this.drawingBufferHeight-r-a,o,a)}},popScissor:function(){var t=this.scissorStack;t.pop();var i=t[t.length-1];i&&this.setScissor(i[0],i[1],i[2],i[3]),this.currentScissor=i},hasActiveStencilMask:function(){var t=this.currentMask.mask,i=this.currentCameraMask.mask;return t&&t.isStencil||i&&i.isStencil},resetViewport:function(){var t=this.gl;t.viewport(0,0,this.width,this.height),this.drawingBufferHeight=t.drawingBufferHeight},setBlendMode:function(t,i){void 0===i&&(i=!1);var n=this.gl,r=this.blendModes[t];return!!(i||t!==h.BlendModes.SKIP_CHECK&&this.currentBlendMode!==t)&&(this.flush(),n.enable(n.BLEND),n.blendEquation(r.equation),r.func.length>2?n.blendFuncSeparate(r.func[0],r.func[1],r.func[2],r.func[3]):n.blendFunc(r.func[0],r.func[1]),this.currentBlendMode=t,!0)},addBlendMode:function(t,i){return this.blendModes.push({func:t,equation:i})-1},updateBlendMode:function(t,i,n){return this.blendModes[t]&&(this.blendModes[t].func=i,n&&(this.blendModes[t].equation=n)),this},removeBlendMode:function(t){return t>17&&this.blendModes[t]&&this.blendModes.splice(t,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(t){if(this.pipelines.forceZero())return this.setTextureZero(t.glTexture,!0),0;var i=this.gl,n=this.currentActiveTexture;return t.glIndexCounter<this.startActiveTexture&&(t.glIndexCounter=this.startActiveTexture,n<this.maxTextures?(t.glIndex=n,i.activeTexture(i.TEXTURE0+n),i.bindTexture(i.TEXTURE_2D,t.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,t.glIndexCounter=this.startActiveTexture,t.glIndex=1,i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,t.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,t.glIndex},isNewNormalMap:function(t,i){return this.textureZero!==t||this.normalTexture!==i},setTextureZero:function(t,i){if(this.textureZero!==t){i&&this.flush();var n=this.gl;n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,t),this.textureZero=t}},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(t){if(this.normalTexture!==t){var i=this.gl;i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,t),this.normalTexture=t,1===this.currentActiveTexture&&(this.currentActiveTexture=2)}},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var t=this.gl,i=this.tempTextures,n=0;n<i.length;n++)t.activeTexture(t.TEXTURE0+n),t.bindTexture(t.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(t){if(void 0===t&&(t=!1),!this.isTextureClean){this.flush();var i=this.gl,n=this.tempTextures;if(t){for(var r=0;r<n.length;r++)i.activeTexture(i.TEXTURE0+r),i.bindTexture(i.TEXTURE_2D,n[r]);i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,n[1]),this.isTextureClean=!0}else i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,n[0]),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,n[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function(t){if(this.pipelines.forceZero())return this.setTextureZero(t,!0),0;var i=this.gl,n=this.currentActiveTexture;return t.glIndexCounter<this.startActiveTexture&&(t.glIndexCounter=this.startActiveTexture,n<this.maxTextures?(t.glIndex=n,i.activeTexture(i.TEXTURE0+n),i.bindTexture(i.TEXTURE_2D,t),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,t.glIndexCounter=this.startActiveTexture,t.glIndex=1,i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,t),this.currentActiveTexture=2)),this.isTextureClean=!1,t.glIndex},pushFramebuffer:function(t,i,n,r){return t===this.currentFramebuffer?this:(this.fboStack.push(t),this.setFramebuffer(t,i,n,r))},setFramebuffer:function(t,i,n,r){if(void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=!0),t===this.currentFramebuffer)return this;var o=this.gl,a=this.width,h=this.height;return t&&t.renderTexture&&r?(a=t.renderTexture.width,h=t.renderTexture.height):this.flush(),o.bindFramebuffer(o.FRAMEBUFFER,t),r&&o.viewport(0,0,a,h),i&&(t?(this.drawingBufferHeight=h,this.pushScissor(0,0,a,h)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=t,n&&this.resetTextures(),this},popFramebuffer:function(t,i,n){void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===n&&(n=!0);var r=this.fboStack;r.pop();var o=r[r.length-1];return o||(o=null),this.setFramebuffer(o,t,i,n),o},setProgram:function(t){return t!==this.currentProgram&&(this.flush(),this.gl.useProgram(t),this.currentProgram=t,!0)},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(t,i,n,r){var o=this.gl,a=o.NEAREST,d=o.NEAREST,f=o.CLAMP_TO_EDGE;i=t?t.width:i,n=t?t.height:n;var p=T(i,n);return p&&(f=o.REPEAT),r===h.ScaleModes.LINEAR&&this.config.antialias&&(a=p?this.mipmapFilter:o.LINEAR,d=o.LINEAR),t||"number"!=typeof i||"number"!=typeof n?this.createTexture2D(0,a,d,f,f,o.RGBA,t):this.createTexture2D(0,a,d,f,f,o.RGBA,null,i,n)},createTexture2D:function(t,i,n,r,o,a,h,d,f,p,b,S){p=null==p||p,void 0===b&&(b=!1),void 0===S&&(S=!1);var A=this.gl,P=A.createTexture();A.activeTexture(A.TEXTURE0);var O=A.getParameter(A.TEXTURE_BINDING_2D);return A.bindTexture(A.TEXTURE_2D,P),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,i),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,n),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,o),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,r),A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,p),A.pixelStorei(A.UNPACK_FLIP_Y_WEBGL,S),null==h?A.texImage2D(A.TEXTURE_2D,t,a,d,f,0,a,A.UNSIGNED_BYTE,null):(b||(d=h.width,f=h.height),A.texImage2D(A.TEXTURE_2D,t,a,a,A.UNSIGNED_BYTE,h)),T(d,f)&&A.generateMipmap(A.TEXTURE_2D),O&&A.bindTexture(A.TEXTURE_2D,O),P.isAlphaPremultiplied=p,P.isRenderTexture=!1,P.width=d,P.height=f,P.glIndex=0,P.glIndexCounter=-1,P},createFramebuffer:function(t,i,n,r){var o,a=this.gl,h=a.createFramebuffer();if(this.setFramebuffer(h),r){var d=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,d),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,t,i),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,d)}if(n.isRenderTexture=!0,n.isAlphaPremultiplied=!1,a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,n,0),(o=a.checkFramebufferStatus(a.FRAMEBUFFER))!==a.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+{36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"}[o]);return h.renderTexture=n,this.setFramebuffer(null),this.resetTextures(),h},createProgram:function(t,i){var n=this.gl,r=n.createProgram(),o=n.createShader(n.VERTEX_SHADER),a=n.createShader(n.FRAGMENT_SHADER);if(n.shaderSource(o,t),n.shaderSource(a,i),n.compileShader(o),n.compileShader(a),!n.getShaderParameter(o,n.COMPILE_STATUS))throw new Error("Vertex Shader failed:\n"+n.getShaderInfoLog(o));if(!n.getShaderParameter(a,n.COMPILE_STATUS))throw new Error("Fragment Shader failed:\n"+n.getShaderInfoLog(a));if(n.attachShader(r,o),n.attachShader(r,a),n.linkProgram(r),!n.getProgramParameter(r,n.LINK_STATUS))throw new Error("Link Program failed:\n"+n.getProgramInfoLog(r));return n.useProgram(r),r},createVertexBuffer:function(t,i){var n=this.gl,r=n.createBuffer();return n.bindBuffer(n.ARRAY_BUFFER,r),n.bufferData(n.ARRAY_BUFFER,t,i),n.bindBuffer(n.ARRAY_BUFFER,null),r},createIndexBuffer:function(t,i){var n=this.gl,r=n.createBuffer();return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r),n.bufferData(n.ELEMENT_ARRAY_BUFFER,t,i),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null),r},deleteTexture:function(t,i){return i&&this.resetTextures(!0),t&&this.gl.deleteTexture(t),this},deleteFramebuffer:function(t){return t&&(this.gl.deleteFramebuffer(t),r(this.fboStack,t),this.currentFramebuffer===t&&(this.currentFramebuffer=null)),this},deleteProgram:function(t){return t&&this.gl.deleteProgram(t),this},deleteBuffer:function(t){return this.gl.deleteBuffer(t),this},preRenderCamera:function(t){var i=t.x,n=t.y,r=t.width,a=t.height,h=t.backgroundColor;t.emit(o.PRE_RENDER,t),this.pipelines.preBatchCamera(t),this.pushScissor(i,n,r,a),t.mask&&(this.currentCameraMask.mask=t.mask,this.currentCameraMask.camera=t._maskCamera,t.mask.preRenderWebGL(this,t,t._maskCamera)),h.alphaGL>0&&this.pipelines.setMulti().drawFillRect(i,n,r,a,D.getTintFromFloats(h.blueGL,h.greenGL,h.redGL,1),h.alphaGL)},getCurrentStencilMask:function(){var t=null,i=this.maskStack,n=this.currentCameraMask;return i.length>0?t=i[i.length-1]:n.mask&&n.mask.isStencil&&(t=n),t},postRenderCamera:function(t){var i=t.flashEffect,n=t.fadeEffect;if(i.isRunning||n.isRunning||n.isComplete){var r=this.pipelines.setMulti();i.postRenderWebGL(r,D.getTintFromFloats),n.postRenderWebGL(r,D.getTintFromFloats)}t.dirty=!1,this.popScissor(),t.mask&&(this.currentCameraMask.mask=null,t.mask.postRenderWebGL(this,t._maskCamera)),this.pipelines.postBatchCamera(t),t.emit(o.POST_RENDER,t)},preRender:function(){if(!this.contextLost){var t=this.gl;if(t.bindFramebuffer(t.FRAMEBUFFER,null),this.config.clearBeforeRender){var i=this.config.backgroundColor;t.clearColor(i.redGL,i.greenGL,i.blueGL,i.alphaGL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT)}t.enable(t.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&t.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(f.PRE_RENDER)}},render:function(t,i,n){if(!this.contextLost){var r=i.length;if(this.emit(f.RENDER,t,n),this.preRenderCamera(n),0===r)return this.setBlendMode(h.BlendModes.NORMAL),void this.postRenderCamera(n);this.currentType="";for(var o=this.currentMask,a=0;a<r;a++){this.finalType=a===r-1;var d=i[a],p=d.mask;(o=this.currentMask).mask&&o.mask!==p&&o.mask.postRenderWebGL(this,o.camera),p&&o.mask!==p&&p.preRenderWebGL(this,d,n),d.blendMode!==this.currentBlendMode&&this.setBlendMode(d.blendMode);var T=d.type;T!==this.currentType&&(this.newType=!0,this.currentType=T),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=i[a+1].type===this.currentType,d.renderWebGL(this,d,n),this.newType=!1}(o=this.currentMask).mask&&o.mask.postRenderWebGL(this,o.camera),this.setBlendMode(h.BlendModes.NORMAL),this.postRenderCamera(n)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(f.POST_RENDER);var t=this.snapshotState;t.callback&&(I(this.canvas,t),t.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function(t,i,n){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,t,i,n)},snapshotArea:function(t,i,n,r,o,a,h){var d=this.snapshotState;return d.callback=o,d.type=a,d.encoder=h,d.getPixel=!1,d.x=t,d.y=i,d.width=Math.min(n,this.gl.drawingBufferWidth),d.height=Math.min(r,this.gl.drawingBufferHeight),this},snapshotPixel:function(t,i,n){return this.snapshotArea(t,i,1,1,n),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(t,i,n,r,o,a,h,d,f,p,T){void 0===o&&(o=!1),void 0===a&&(a=0),void 0===h&&(h=0),void 0===d&&(d=i),void 0===f&&(f=n);var b=this.currentFramebuffer;this.snapshotArea(a,h,d,f,r,p,T);var S=this.snapshotState;return S.getPixel=o,S.isFramebuffer=!0,S.bufferWidth=i,S.bufferHeight=n,this.setFramebuffer(t),I(this.canvas,S),this.setFramebuffer(b),S.callback=null,S.isFramebuffer=!1,this},canvasToTexture:function(t,i,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!1),i?this.updateCanvasTexture(t,i,r):this.createCanvasTexture(t,n,r)},createCanvasTexture:function(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1);var r=this.gl,o=r.NEAREST,a=r.NEAREST,h=t.width,d=t.height,f=r.CLAMP_TO_EDGE,p=T(h,d);return!i&&p&&(f=r.REPEAT),this.config.antialias&&(o=p?this.mipmapFilter:r.LINEAR,a=r.LINEAR),this.createTexture2D(0,o,a,f,f,r.RGBA,t,h,d,!0,!1,n)},updateCanvasTexture:function(t,i,n){void 0===n&&(n=!1);var r=this.gl,o=t.width,a=t.height;if(o>0&&a>0){r.activeTexture(r.TEXTURE0);var h=r.getParameter(r.TEXTURE_BINDING_2D);r.bindTexture(r.TEXTURE_2D,i),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,n),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t),i.width=o,i.height=a,h&&r.bindTexture(r.TEXTURE_2D,h)}return i},createVideoTexture:function(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1);var r=this.gl,o=r.NEAREST,a=r.NEAREST,h=t.videoWidth,d=t.videoHeight,f=r.CLAMP_TO_EDGE,p=T(h,d);return!i&&p&&(f=r.REPEAT),this.config.antialias&&(o=p?this.mipmapFilter:r.LINEAR,a=r.LINEAR),this.createTexture2D(0,o,a,f,f,r.RGBA,t,h,d,!0,!0,n)},updateVideoTexture:function(t,i,n){void 0===n&&(n=!1);var r=this.gl,o=t.videoWidth,a=t.videoHeight;if(o>0&&a>0){r.activeTexture(r.TEXTURE0);var h=r.getParameter(r.TEXTURE_BINDING_2D);r.bindTexture(r.TEXTURE_2D,i),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,n),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t),i.width=o,i.height=a,h&&r.bindTexture(r.TEXTURE_2D,h)}return i},setTextureFilter:function(t,i){var n=this.gl,r=[n.LINEAR,n.NEAREST][i];n.activeTexture(n.TEXTURE0);var o=n.getParameter(n.TEXTURE_BINDING_2D);return n.bindTexture(n.TEXTURE_2D,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,r),o&&n.bindTexture(n.TEXTURE_2D,o),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var t=this.gl,i=this.tempTextures,n=0;n<i.length;n++)t.deleteTexture(i[n]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});t.exports=F},function(t,i,n){var r=n(0),o=n(92),a=n(102),h=n(373),d=n(376),f=n(377),p=n(108),T=n(378),b=n(379),S=n(380),A=n(381),P=new r({initialize:function PipelineManager2(t){this.game=t.game,this.renderer=t,this.classes=new a([[o.UTILITY_PIPELINE,A],[o.MULTI_PIPELINE,p],[o.BITMAPMASK_PIPELINE,h],[o.SINGLE_PIPELINE,S],[o.ROPE_PIPELINE,b],[o.LIGHT_PIPELINE,f],[o.POINTLIGHT_PIPELINE,T],[o.GRAPHICS_PIPELINE,d]]),this.postPipelineClasses=new a,this.pipelines=new a,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(t){var i,n,r=this,a=this.game;if(this.classes.each((function(t,n){i=r.add(t,new n({game:a})),t===o.UTILITY_PIPELINE&&(r.UTILITY_PIPELINE=i,r.fullFrame1=i.fullFrame1,r.fullFrame2=i.fullFrame2,r.halfFrame1=i.halfFrame1,r.halfFrame2=i.halfFrame2)})),this.MULTI_PIPELINE=this.get(o.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(o.BITMAPMASK_PIPELINE),t)for(n in t){var h=t[n];(i=new h(a)).isPostFX?this.postPipelineClasses.set(n,h):this.has(n)||(this.classes.set(n,h),this.add(n,i))}},add:function(t,i){if(!i.isPostFX){var n=this.pipelines,r=this.renderer;return n.has(t)?console.warn("Pipeline exists: "+t):(i.name=t,i.manager=this,n.set(t,i)),i.hasBooted||i.boot(),0!==r.width&&0!==r.height&&i.resize(r.width,r.height),i}console.warn(t+" is a Post Pipeline. Use `addPostPipeline` instead")},addPostPipeline:function(t,i){this.postPipelineClasses.has(t)||this.postPipelineClasses.set(t,i)},flush:function(){this.current&&this.current.flush()},has:function(t){var i=this.pipelines;return"string"==typeof t?i.has(t):!!i.contains(t)},get:function(t){var i=this.pipelines;return"string"==typeof t?i.get(t):i.contains(t)?t:void 0},getPostPipeline:function(t,i){var n,r=this.postPipelineClasses;if("string"==typeof t?n=r.get(t):"function"==typeof t?r.contains(t)&&(n=t):"object"==typeof t&&(n=r.get(t.name)),n){var o=new n(this.game);return i&&(o.gameObject=i),o}},remove:function(t,i,n){void 0===i&&(i=!0),void 0===n&&(n=!0),this.pipelines.delete(t),i&&this.classes.delete(t),n&&this.postPipelineClasses.delete(t)},set:function(t,i,n){if(!t.isPostFX)return this.isCurrent(t,n)||(this.flush(),this.current&&this.current.unbind(),this.current=t,t.bind(n)),t.updateProjectionMatrix(),t.onBind(i),t},preBatch:function(t){if(t.hasPostPipeline){this.flush();for(var i=t.postPipelines,n=i.length-1;n>=0;n--){var r=i[n];r.active&&r.preBatch(t)}}},postBatch:function(t){if(t.hasPostPipeline){this.flush();for(var i=t.postPipelines,n=0;n<i.length;n++){var r=i[n];r.active&&r.postBatch(t)}}},preBatchCamera:function(t){if(t.hasPostPipeline){this.flush();for(var i=t.postPipelines,n=i.length-1;n>=0;n--){var r=i[n];r.active&&r.preBatch(t)}}},postBatchCamera:function(t){if(t.hasPostPipeline){this.flush();for(var i=t.postPipelines,n=0;n<i.length;n++){var r=i[n];r.active&&r.postBatch(t)}}},isCurrent:function(t,i){var n=this.renderer,r=this.current;return r&&!i&&(i=r.currentShader),!(r!==t||i.program!==n.currentProgram)},copyFrame:function(t,i,n,r,o){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(t,i,n,r,o),this},copyToGame:function(t){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(t),this},drawFrame:function(t,i,n,r){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(t,i,n,r),this},blendFrames:function(t,i,n,r,o){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(t,i,n,r,o),this},blendFramesAdditive:function(t,i,n,r,o){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(t,i,n,r,o),this},clearFrame:function(t,i){return this.UTILITY_PIPELINE.clearFrame(t,i),this},blitFrame:function(t,i,n,r,o,a){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(t,i,n,r,o,a),this},copyFrameRect:function(t,i,n,r,o,a,h,d){return this.UTILITY_PIPELINE.copyFrameRect(t,i,n,r,o,a,h,d),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(t){return this.UTILITY_PIPELINE.bind(t)},rebind:function(t){void 0===t&&this.previous&&(t=this.previous);var i=this.renderer,n=i.gl;n.disable(n.DEPTH_TEST),n.disable(n.CULL_FACE),i.hasActiveStencilMask()?n.clear(n.DEPTH_BUFFER_BIT):(n.disable(n.STENCIL_TEST),n.clear(n.DEPTH_BUFFER_BIT|n.STENCIL_BUFFER_BIT)),n.viewport(0,0,i.width,i.height),i.currentProgram=null,i.setBlendMode(0,!0);var r=this.pipelines.entries;for(var o in r)r[o].glReset=!0;t&&(this.current=t,t.rebind()),i.resetTextures()},clear:function(){var t=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,t.currentProgram=null,t.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});t.exports=P},function(t,i,n){var r=n(0),o=n(2),a=n(866),h=n(867),d=n(107),f=n(58),p=new r({Extends:f,initialize:function BitmapMaskPipeline2(t){t.fragShader=o(t,"fragShader",a),t.vertShader=o(t,"vertShader",h),t.batchSize=o(t,"batchSize",1),t.vertices=o(t,"vertices",[-1,1,-1,-7,7,1]),t.attributes=o(t,"attributes",[{name:"inPosition",size:2,type:d.FLOAT}]),f.call(this,t)},boot:function(){f.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(t,i){f.prototype.resize.call(this,t,i),this.set2f("uResolution",t,i)},beginMask:function(t,i,n){var r=this.gl;if(t.bitmapMask&&r){var o=this.renderer;o.flush(),o.pushFramebuffer(t.mainFramebuffer),r.disable(r.STENCIL_TEST),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),o.currentCameraMask.mask!==t&&(o.currentMask.mask=t,o.currentMask.camera=n)}},endMask:function(t,i){var n=this.gl,r=this.renderer,o=t.bitmapMask;if(o&&n){r.flush(),r.pushFramebuffer(t.maskFramebuffer),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),r.setBlendMode(0,!0),o.renderWebGL(r,o,i),r.flush(),r.popFramebuffer(),r.popFramebuffer();var a=r.getCurrentStencilMask();a?(n.enable(n.STENCIL_TEST),a.mask.applyStencil(r,a.camera,!0)):r.currentMask.mask=null,r.pipelines.set(this),n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,t.maskTexture),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,t.mainTexture),this.set1i("uInvertMaskAlpha",t.invertAlpha),n.drawArrays(this.topology,0,3),r.resetTextures()}}});t.exports=p},function(t,i,n){t.exports={AFTER_FLUSH:n(868),BEFORE_FLUSH:n(869),BIND:n(870),BOOT:n(871),DESTROY:n(872),REBIND:n(873),RESIZE:n(874)}},function(t,i,n){var r=n(0),o=n(2),a=n(107),h=new r({initialize:function WebGLShader2(t,i,n,r,o){this.pipeline=t,this.name=i,this.renderer=t.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(n,r),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(o),this.createUniforms()},createAttributes:function(t){var i=0,n=0,r=[];this.vertexComponentCount=0;for(var h=0;h<t.length;h++){var d=t[h],f=d.name,p=o(d,"size",1),T=o(d,"type",a.FLOAT),b=T.enum,S=T.size,A=!!d.normalized;r.push({name:f,size:p,type:b,normalized:A,offset:n,enabled:!1,location:-1}),4===S?i+=p:i++,n+=p*S}this.vertexSize=n,this.vertexComponentCount=i,this.attributes=r},bind:function(t,i){return void 0===t&&(t=!1),void 0===i&&(i=!1),i&&this.pipeline.flush(),this.renderer.setProgram(this.program),t&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(t){void 0===t&&(t=!1);for(var i=this.gl,n=this.vertexSize,r=this.attributes,o=this.program,a=0;a<r.length;a++){var h=r[a],d=h.size,f=h.type,p=h.offset,T=h.enabled,b=h.location,S=!!h.normalized;if(t){var A=i.getAttribLocation(o,h.name);A>=0?(i.enableVertexAttribArray(A),i.vertexAttribPointer(A,d,f,S,n,p),h.enabled=!0,h.location=A):-1!==A&&i.disableVertexAttribArray(A)}else T?i.vertexAttribPointer(b,d,f,S,n,p):!T&&b>-1&&(i.disableVertexAttribArray(b),h.location=-1)}return this},createUniforms:function(){var t,i,n,r=this.gl,o=this.program,a=this.uniforms,h=r.getProgramParameter(o,r.ACTIVE_UNIFORMS);for(t=0;t<h;t++){var d=r.getActiveUniform(o,t);if(d){i=d.name,null!==(n=r.getUniformLocation(o,i))&&(a[i]={name:i,location:n,value1:null,value2:null,value3:null,value4:null});var f=i.indexOf("[");f>0&&(i=i.substr(0,f),a.hasOwnProperty(i)||null!==(n=r.getUniformLocation(o,i))&&(a[i]={name:i,location:n,value1:null,value2:null,value3:null,value4:null}))}}return this},hasUniform:function(t){return this.uniforms.hasOwnProperty(t)},resetUniform:function(t){var i=this.uniforms[t];return i&&(i.value1=null,i.value2=null,i.value3=null,i.value4=null),this},setUniform1:function(t,i,n,r){var o=this.uniforms[i];return o?((r||o.value1!==n)&&(o.value1=n,this.renderer.setProgram(this.program),t.call(this.gl,o.location,n),this.pipeline.currentShader=this),this):this},setUniform2:function(t,i,n,r,o){var a=this.uniforms[i];return a?((o||a.value1!==n||a.value2!==r)&&(a.value1=n,a.value2=r,this.renderer.setProgram(this.program),t.call(this.gl,a.location,n,r),this.pipeline.currentShader=this),this):this},setUniform3:function(t,i,n,r,o,a){var h=this.uniforms[i];return h?((a||h.value1!==n||h.value2!==r||h.value3!==o)&&(h.value1=n,h.value2=r,h.value3=o,this.renderer.setProgram(this.program),t.call(this.gl,h.location,n,r,o),this.pipeline.currentShader=this),this):this},setUniform4:function(t,i,n,r,o,a,h){var d=this.uniforms[i];return d?((h||d.value1!==n||d.value2!==r||d.value3!==o||d.value4!==a)&&(d.value1=n,d.value2=r,d.value3=o,d.value4=a,this.renderer.setProgram(this.program),t.call(this.gl,d.location,n,r,o,a),this.pipeline.currentShader=this),this):this},set1f:function(t,i){return this.setUniform1(this.gl.uniform1f,t,i)},set2f:function(t,i,n){return this.setUniform2(this.gl.uniform2f,t,i,n)},set3f:function(t,i,n,r){return this.setUniform3(this.gl.uniform3f,t,i,n,r)},set4f:function(t,i,n,r,o){return this.setUniform4(this.gl.uniform4f,t,i,n,r,o)},set1fv:function(t,i){return this.setUniform1(this.gl.uniform1fv,t,i,!0)},set2fv:function(t,i){return this.setUniform1(this.gl.uniform2fv,t,i,!0)},set3fv:function(t,i){return this.setUniform1(this.gl.uniform3fv,t,i,!0)},set4fv:function(t,i){return this.setUniform1(this.gl.uniform4fv,t,i,!0)},set1iv:function(t,i){return this.setUniform1(this.gl.uniform1iv,t,i,!0)},set2iv:function(t,i){return this.setUniform1(this.gl.uniform2iv,t,i,!0)},set3iv:function(t,i){return this.setUniform1(this.gl.uniform3iv,t,i,!0)},set4iv:function(t,i){return this.setUniform1(this.gl.uniform4iv,t,i,!0)},set1i:function(t,i){return this.setUniform1(this.gl.uniform1i,t,i)},set2i:function(t,i,n){return this.setUniform2(this.gl.uniform2i,t,i,n)},set3i:function(t,i,n,r){return this.setUniform3(this.gl.uniform3i,t,i,n,r)},set4i:function(t,i,n,r,o){return this.setUniform4(this.gl.uniform4i,t,i,n,r,o)},setMatrix2fv:function(t,i,n){return this.setUniform2(this.gl.uniformMatrix2fv,t,i,n,!0)},setMatrix3fv:function(t,i,n){return this.setUniform2(this.gl.uniformMatrix3fv,t,i,n,!0)},setMatrix4fv:function(t,i,n){return this.setUniform2(this.gl.uniformMatrix4fv,t,i,n,!0)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});t.exports=h},function(t,i,n){var r=n(0),o=n(59),a=n(2),h=n(875),d=n(876),f=n(25),p=n(107),T=n(58),b=new r({Extends:T,initialize:function GraphicsPipeline2(t){t.fragShader=a(t,"fragShader",h),t.vertShader=a(t,"vertShader",d),t.attributes=a(t,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:p.UNSIGNED_BYTE,normalized:!0}]),T.call(this,t),this.calcMatrix=new f,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(t,i,n,r,o,a){this.renderer.pipelines.set(this);var h=this.calcMatrix;a&&a.multiply(o,h);var d=t+n,f=i+r,p=h.getX(t,i),T=h.getY(t,i),b=h.getX(t,f),S=h.getY(t,f),A=h.getX(d,f),P=h.getY(d,f),O=h.getX(d,i),L=h.getY(d,i),D=this.fillTint;this.batchQuad(p,T,b,S,A,P,O,L,D.TL,D.TR,D.BL,D.BR)},batchFillTriangle:function(t,i,n,r,o,a,h,d){this.renderer.pipelines.set(this);var f=this.calcMatrix;d&&d.multiply(h,f);var p=f.getX(t,i),T=f.getY(t,i),b=f.getX(n,r),S=f.getY(n,r),A=f.getX(o,a),P=f.getY(o,a),O=this.fillTint;this.batchTri(p,T,b,S,A,P,O.TL,O.TR,O.BL)},batchStrokeTriangle:function(t,i,n,r,o,a,h,d,f){var p=this.tempTriangle;p[0].x=t,p[0].y=i,p[0].width=h,p[1].x=n,p[1].y=r,p[1].width=h,p[2].x=o,p[2].y=a,p[2].width=h,p[3].x=t,p[3].y=i,p[3].width=h,this.batchStrokePath(p,h,!1,d,f)},batchFillPath:function(t,i,n){this.renderer.pipelines.set(this);var r=this.calcMatrix;n&&n.multiply(i,r);for(var a,h,d=t.length,f=this.polygonCache,p=this.fillTint.TL,T=this.fillTint.TR,b=this.fillTint.BL,S=0;S<d;++S)h=t[S],f.push(h.x,h.y);d=(a=o(f)).length;for(var A=0;A<d;A+=3){var P=2*a[A+0],O=2*a[A+1],L=2*a[A+2],D=f[P+0],I=f[P+1],F=f[O+0],B=f[O+1],N=f[L+0],Y=f[L+1],X=r.getX(D,I),G=r.getY(D,I),U=r.getX(F,B),V=r.getY(F,B),z=r.getX(N,Y),W=r.getY(N,Y);this.batchTri(X,G,U,V,z,W,p,T,b)}f.length=0},batchStrokePath:function(t,i,n,r,o){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var a=t.length-1,h=0;h<a;h++){var d=t[h],f=t[h+1];this.batchLine(d.x,d.y,f.x,f.y,d.width/2,f.width/2,i,h,!n&&h===a-1,r,o)}},batchLine:function(t,i,n,r,o,a,h,d,f,p,T){this.renderer.pipelines.set(this);var b=this.calcMatrix;T&&T.multiply(p,b);var S=n-t,A=r-i,P=Math.sqrt(S*S+A*A),O=o*(r-i)/P,L=o*(t-n)/P,D=a*(r-i)/P,I=a*(t-n)/P,F=n-D,B=r-I,N=t-O,Y=i-L,X=n+D,G=r+I,U=t+O,V=i+L,z=b.getX(F,B),W=b.getY(F,B),H=b.getX(N,Y),q=b.getY(N,Y),Z=b.getX(X,G),K=b.getY(X,G),J=b.getX(U,V),Q=b.getY(U,V),$=this.strokeTint,tt=$.TL,et=$.TR,it=$.BL,nt=$.BR;if(this.batchQuad(J,Q,H,q,z,W,Z,K,tt,et,it,nt),!(h<=2)){var st=this.prevQuad,rt=this.firstQuad;d>0&&st[4]?this.batchQuad(J,Q,H,q,st[0],st[1],st[2],st[3],tt,et,it,nt):(rt[0]=J,rt[1]=Q,rt[2]=H,rt[3]=q,rt[4]=1),f&&rt[4]?this.batchQuad(z,W,Z,K,rt[0],rt[1],rt[2],rt[3],tt,et,it,nt):(st[0]=z,st[1]=W,st[2]=Z,st[3]=K,st[4]=1)}},batchVert:function(t,i,n){var r=this.vertexViewF32,o=this.vertexViewU32,a=this.vertexCount*this.currentShader.vertexComponentCount-1;r[++a]=t,r[++a]=i,o[++a]=n,this.vertexCount++},batchQuad:function(t,i,n,r,o,a,h,d,f,p,T,b){var S=!1;return this.shouldFlush(6)&&(this.flush(),S=!0),this.batchVert(t,i,f),this.batchVert(n,r,T),this.batchVert(o,a,b),this.batchVert(t,i,f),this.batchVert(o,a,b),this.batchVert(h,d,p),S},batchTri:function(t,i,n,r,o,a,h,d,f){var p=!1;return this.shouldFlush(3)&&(this.flush(),p=!0),this.batchVert(t,i,h),this.batchVert(n,r,d),this.batchVert(o,a,f),p},destroy:function(){return T.prototype.destroy.call(this),this.polygonCache=null,this}});t.exports=b},function(t,i,n){var r=n(0),o=n(2),a=n(877),h=n(108),d=n(3),f=n(58),p=10,T=new d,b=new r({Extends:h,initialize:function LightPipeline2(t){p=t.game.renderer.config.maxLights;for(var i=o(t,"fragShader",a),n=[],r=1;r<=p;r++)n.push({name:"lights"+r,fragShader:i.replace("%LIGHT_COUNT%",r.toString())});t.shaders=n,h.call(this,t),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function(){f.prototype.boot.call(this);var t=this.gl,i=t.createTexture();t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:i};for(var n=0;n<this.shaders.length;n++)this["lightShader"+(n+1)]=this.shaders[n]},onRender:function(t,i){var n=t.sys.lights;if(this.lightsActive=!1,n&&n.active){var r=n.getLights(i),o=r.length;if(0!==o){var a;this.lightsActive=!0,this.setShader(this["lightShader"+o],!0);var h=this.renderer.height,d=i.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",i.x,i.y,i.rotation,i.zoom),this.set3f("uAmbientLightColor",n.ambientColor.r,n.ambientColor.g,n.ambientColor.b),a=0;a<o;a++){var f=r[a].light,p=f.color,b="uLights["+a+"].";d.transformPoint(f.x,f.y,T),this.set2f(b+"position",T.x-i.scrollX*f.scrollFactorX*i.zoom,h-(T.y-i.scrollY*f.scrollFactorY*i.zoom)),this.set3f(b+"color",p.r,p.g,p.b),this.set1f(b+"intensity",f.intensity),this.set1f(b+"radius",f.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(t){if(t!==this.currentNormalMapRotation||0===this.vertexCount){this.vertexCount>0&&this.flush();var i=this.inverseRotationMatrix;if(t){var n=-t,r=Math.cos(n),o=Math.sin(n);i[1]=o,i[3]=-o,i[0]=i[4]=r}else i[0]=i[4]=1,i[1]=i[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,i),this.currentNormalMapRotation=t}},setTexture2D:function(t,i){var n=this.renderer;void 0===t&&(t=n.tempTextures[0]);var r=this.getNormalMap(i);n.isNewNormalMap(t,r)&&(this.flush(),n.setTextureZero(t),n.setNormalMap(r));var o=i?i.rotation:0;return this.setNormalMapRotation(o),this.currentUnit=0,0},setGameObject:function(t,i){void 0===i&&(i=t.frame);var n=this.renderer,r=i.glTexture,o=this.getNormalMap(t);return n.isNewNormalMap()&&(this.flush(),n.setTextureZero(r),n.setNormalMap(o)),this.setNormalMapRotation(t.rotation),this.currentUnit=0,0},getNormalMap:function(t){var i;return t?t.displayTexture?i=t.displayTexture.dataSource[t.displayFrame.sourceIndex]:t.texture?i=t.texture.dataSource[t.frame.sourceIndex]:t.tileset&&(i=Array.isArray(t.tileset)?t.tileset[0].image.dataSource[0]:t.tileset.image.dataSource[0]):i=this.defaultNormalMap,i||(i=this.defaultNormalMap),i.glTexture},batchSprite:function(t,i,n){this.lightsActive&&h.prototype.batchSprite.call(this,t,i,n)},batchTexture:function(t,i,n,r,o,a,d,f,p,T,b,S,A,P,O,L,D,I,F,B,N,Y,X,G,U,V,z,W,H,q,Z,K){this.lightsActive&&h.prototype.batchTexture.call(this,t,i,n,r,o,a,d,f,p,T,b,S,A,P,O,L,D,I,F,B,N,Y,X,G,U,V,z,W,H,q,Z,K)},batchTextureFrame:function(t,i,n,r,o,a,d){this.lightsActive&&h.prototype.batchTextureFrame.call(this,t,i,n,r,o,a,d)}});b.LIGHT_COUNT=p,t.exports=b},function(t,i,n){var r=n(0),o=n(2),a=n(880),h=n(881),d=n(58),f=new r({Extends:d,initialize:function PointLightPipeline2(t){t.vertShader=o(t,"vertShader",h),t.fragShader=o(t,"fragShader",a),t.attributes=o(t,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),d.call(this,t)},onRender:function(t,i){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",i.zoom)},batchPointLight:function(t,i,n,r,o,a,h,d,f,p,T,b){var S=t.color,A=t.intensity,P=t.radius,O=t.attenuation,L=S.r*A,D=S.g*A,I=S.b*A,F=i.alpha*t.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(n,r,T,b,P,O,L,D,I,F),this.batchLightVert(o,a,T,b,P,O,L,D,I,F),this.batchLightVert(h,d,T,b,P,O,L,D,I,F),this.batchLightVert(n,r,T,b,P,O,L,D,I,F),this.batchLightVert(h,d,T,b,P,O,L,D,I,F),this.batchLightVert(f,p,T,b,P,O,L,D,I,F)},batchLightVert:function(t,i,n,r,o,a,h,d,f,p){var T=this.vertexViewF32,b=this.vertexCount*this.currentShader.vertexComponentCount-1;T[++b]=t,T[++b]=i,T[++b]=n,T[++b]=r,T[++b]=o,T[++b]=a,T[++b]=h,T[++b]=d,T[++b]=f,T[++b]=p,this.vertexCount++}});t.exports=f},function(t,i,n){var r=n(0),o=n(2),a=n(108),h=new r({Extends:a,initialize:function RopePipeline2(t){t.topology=5,t.batchSize=o(t,"batchSize",256),a.call(this,t)}});t.exports=h},function(t,i,n){var r=n(0),o=n(2),a=n(108),h=n(882),d=n(883),f=n(58),p=new r({Extends:a,initialize:function SinglePipeline2(t){t.fragShader=o(t,"fragShader",h),t.vertShader=o(t,"vertShader",d),t.forceZero=!0,a.call(this,t)},boot:function(){f.prototype.boot.call(this),this.set1i("uMainSampler",0)}});t.exports=p},function(t,i,n){var r=n(884),o=n(35),a=n(0),h=n(198),d=n(885),f=n(886),p=n(2),T=n(887),b=n(382),S=n(58),A=new a({Extends:S,initialize:function UtilityPipeline2(t){t.renderTarget=p(t,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),t.vertShader=p(t,"vertShader",b),t.shaders=p(t,"shaders",[{name:"Copy",fragShader:f},{name:"AddBlend",fragShader:r},{name:"LinearBlend",fragShader:T},{name:"ColorMatrix",fragShader:d}]),t.attributes=p(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],t.batchSize=1,S.call(this,t),this.colorMatrix=new h,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){S.prototype.boot.call(this);var t=this.shaders,i=this.renderTargets;this.copyShader=t[0],this.addShader=t[1],this.linearShader=t[2],this.colorMatrixShader=t[3],this.fullFrame1=i[0],this.fullFrame2=i[1],this.halfFrame1=i[2],this.halfFrame2=i[3]},copyFrame:function(t,i,n,r,o){void 0===n&&(n=1),void 0===r&&(r=!0),void 0===o&&(o=!0);var a=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",n),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,t.texture),i?(a.viewport(0,0,i.width,i.height),a.bindFramebuffer(a.FRAMEBUFFER,i.framebuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,i.texture,0)):a.viewport(0,0,t.width,t.height),r&&(o?a.clearColor(0,0,0,0):a.clearColor(0,0,0,1),a.clear(a.COLOR_BUFFER_BIT)),a.bufferData(a.ARRAY_BUFFER,this.vertexData,a.STATIC_DRAW),a.drawArrays(a.TRIANGLES,0,6),a.bindFramebuffer(a.FRAMEBUFFER,null),a.bindTexture(a.TEXTURE_2D,null)},blitFrame:function(t,i,n,r,a,h){void 0===n&&(n=1),void 0===r&&(r=!0),void 0===a&&(a=!0),void 0===h&&(h=!1);var d=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",n),d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,t.texture),t.height>i.height)d.viewport(0,0,t.width,t.height),this.setTargetUVs(t,i);else{var f=i.height-t.height;d.viewport(0,f,t.width,t.height)}if(d.bindFramebuffer(d.FRAMEBUFFER,i.framebuffer),d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,i.texture,0),r&&(a?d.clearColor(0,0,0,0):d.clearColor(0,0,0,1),d.clear(d.COLOR_BUFFER_BIT)),h){var p=this.renderer.currentBlendMode;this.renderer.setBlendMode(o.ERASE)}d.bufferData(d.ARRAY_BUFFER,this.vertexData,d.STATIC_DRAW),d.drawArrays(d.TRIANGLES,0,6),h&&this.renderer.setBlendMode(p),d.bindFramebuffer(d.FRAMEBUFFER,null),d.bindTexture(d.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(t,i,n,r,o,a,h,d){void 0===h&&(h=!0),void 0===d&&(d=!0);var f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,t.framebuffer),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,t.texture,0),h&&(d?f.clearColor(0,0,0,0):f.clearColor(0,0,0,1),f.clear(f.COLOR_BUFFER_BIT)),f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,i.texture),f.copyTexSubImage2D(f.TEXTURE_2D,0,0,0,n,r,o,a),f.bindFramebuffer(f.FRAMEBUFFER,null),f.bindTexture(f.TEXTURE_2D,null)},copyToGame:function(t){var i=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,t.texture),i.bufferData(i.ARRAY_BUFFER,this.vertexData,i.STATIC_DRAW),i.drawArrays(i.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(t,i,n,r){void 0===n&&(n=!0),void 0===r&&(r=this.colorMatrix);var o=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",r.getData()),this.set1f("uAlpha",r.alpha),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,t.texture),i?(o.viewport(0,0,i.width,i.height),o.bindFramebuffer(o.FRAMEBUFFER,i.framebuffer),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,i.texture,0)):o.viewport(0,0,t.width,t.height),n?o.clearColor(0,0,0,0):o.clearColor(0,0,0,1),o.clear(o.COLOR_BUFFER_BIT),o.bufferData(o.ARRAY_BUFFER,this.vertexData,o.STATIC_DRAW),o.drawArrays(o.TRIANGLES,0,6),o.bindFramebuffer(o.FRAMEBUFFER,null),o.bindTexture(o.TEXTURE_2D,null)},blendFrames:function(t,i,n,r,o,a){void 0===r&&(r=1),void 0===o&&(o=!0),void 0===a&&(a=this.linearShader);var h=this.gl;this.setShader(a),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",r),h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,t.texture),h.activeTexture(h.TEXTURE1),h.bindTexture(h.TEXTURE_2D,i.texture),n?(h.bindFramebuffer(h.FRAMEBUFFER,n.framebuffer),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n.texture,0),h.viewport(0,0,n.width,n.height)):h.viewport(0,0,t.width,t.height),o?h.clearColor(0,0,0,0):h.clearColor(0,0,0,1),h.clear(h.COLOR_BUFFER_BIT),h.bufferData(h.ARRAY_BUFFER,this.vertexData,h.STATIC_DRAW),h.drawArrays(h.TRIANGLES,0,6),h.bindFramebuffer(h.FRAMEBUFFER,null),h.bindTexture(h.TEXTURE_2D,null)},blendFramesAdditive:function(t,i,n,r,o){this.blendFrames(t,i,n,r,o,this.addShader)},clearFrame:function(t,i){void 0===i&&(i=!0);var n=this.gl;n.viewport(0,0,t.width,t.height),n.bindFramebuffer(n.FRAMEBUFFER,t.framebuffer),i?n.clearColor(0,0,0,0):n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT);var r=this.renderer.currentFramebuffer;n.bindFramebuffer(n.FRAMEBUFFER,r)},setUVs:function(t,i,n,r,o,a,h,d){var f=this.vertexViewF32;f[2]=t,f[3]=i,f[6]=n,f[7]=r,f[10]=o,f[11]=a,f[14]=t,f[15]=i,f[18]=o,f[19]=a,f[22]=h,f[23]=d},setTargetUVs:function(t,i){var n=i.height/t.height;n=n>.5?.5-(n-.5):.5-n+.5,this.setUVs(0,n,0,1+n,1,1+n,1,n)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});t.exports=A},function(t,i){t.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join("\n")},function(t,i,n){var r=n(31),o=n(38),a=n(2);t.exports=function(t,i){var n=t.getContext("experimental-webgl"),h=a(i,"callback"),d=a(i,"type","image/png"),f=a(i,"encoder",.92),p=a(i,"x",0),T=a(i,"y",0),b=a(i,"getPixel",!1),S=a(i,"isFramebuffer",!1),A=S?a(i,"bufferWidth",1):n.drawingBufferWidth,P=S?a(i,"bufferHeight",1):n.drawingBufferHeight;if(b){var O=new Uint8Array(4),L=S?T:P-T;n.readPixels(p,L,1,1,n.RGBA,n.UNSIGNED_BYTE,O),h.call(null,new o(O[0],O[1],O[2],O[3]/255))}else{var D=a(i,"width",A),I=a(i,"height",P),F=new Uint8Array(D*I*4);n.readPixels(p,P-T-I,D,I,n.RGBA,n.UNSIGNED_BYTE,F);for(var B=r.createWebGL(this,D,I),N=B.getContext("2d"),Y=N.getImageData(0,0,D,I),X=Y.data,G=0;G<I;G++)for(var U=0;U<D;U++){var V=4*((I-G-1)*D+U),z=4*(G*D+U);X[z+0]=F[V+0],X[z+1]=F[V+1],X[z+2]=F[V+2],X[z+3]=F[V+3]}N.putImageData(Y,0,0);var W=new Image;W.onerror=function(){h.call(null),r.remove(B)},W.onload=function(){h.call(null,W),r.remove(B)},W.src=B.toDataURL(d,f)}}},function(t,i,n){var r=n(33);t.exports=function(t){var i=t.config;if(!i.hideBanner){var n="WebGL";i.renderType===r.CANVAS?n="Canvas":i.renderType===r.HEADLESS&&(n="Headless");var o,a=i.audio,h=t.device.audio;if(o=h.webAudio&&!a.disableWebAudio?"Web Audio":a.noAudio||!h.webAudio&&!h.audioData?"No Audio":"HTML5 Audio",t.device.browser.ie)window.console&&console.log("Phaser v"+r.VERSION+" / https://phaser.io");else{var d,f="",p=[f];Array.isArray(i.bannerBackgroundColor)?(i.bannerBackgroundColor.forEach((function(t){f=f.concat("%c "),p.push("background: "+t),d=t})),p[p.length-1]="color: "+i.bannerTextColor+"; background: "+d):(f=f.concat("%c "),p.push("color: "+i.bannerTextColor+"; background: "+i.bannerBackgroundColor)),p.push("background: transparent"),i.gameTitle&&(f=f.concat(i.gameTitle),i.gameVersion&&(f=f.concat(" v"+i.gameVersion)),i.hidePhaser||(f=f.concat(" / "))),i.hidePhaser||(f=f.concat("Phaser v"+r.VERSION+" ("+n+" | "+o+")")),f=f.concat(" %c "+i.gameURL),p[0]=f,console.log.apply(console,p)}}}},function(t,i,n){var r=n(0),o=n(6),a=n(1),h=n(386),d=new r({initialize:function TimeStep2(t,i){this.game=t,this.raf=new h,this.started=!1,this.running=!1,this.minFps=o(i,"min",5),this.targetFps=o(i,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=a,this.forceSetTimeOut=o(i,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=o(i,"deltaHistory",10),this.panicMax=o(i,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=o(i,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var t=window.performance.now();this.time=t,this.lastTime=t,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0;for(var i=0;i<this.deltaSmoothingMax;i++)this.deltaHistory[i]=Math.min(this._target,this.deltaHistory[i]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(t){if(this.started)return this;this.started=!0,this.running=!0;for(var i=0;i<this.deltaSmoothingMax;i++)this.deltaHistory[i]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=t,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var t=window.performance.now();this.now=t;var i=t-this.lastTime;i<0&&(i=0),this.rawDelta=i;var n=this.deltaIndex,r=this.deltaHistory,o=this.deltaSmoothingMax,a=i,h=i;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,a=Math.min(a,this._target)),a>this._min&&(a=r[n],a=Math.min(a,this._min)),r[n]=a,this.deltaIndex++,this.deltaIndex>o&&(this.deltaIndex=0),h=0;for(var d=0;d<o;d++)h+=r[d];h/=o}this.delta=h,this.time+=this.rawDelta,t>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0),this.framesThisSecond++;var f=h/this._target;this.callback(t,h,f),this.lastTime=t,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(t){this.running||(t&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=a,this.raf=null,this.game=null}});t.exports=d},function(t,i,n){var r=n(0),o=n(1),a=new r({initialize:function RequestAnimationFrame2(){this.isRunning=!1,this.callback=o,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var t=this;this.step=function step(){var i=window.performance.now();t.lastTime=t.tick,t.tick=i,t.callback(i),t.timeOutID=window.requestAnimationFrame(step)},this.stepTimeout=function stepTimeout(){var i=Date.now(),n=Math.min(Math.max(2*t.target+t.tick-i,0),t.target);t.lastTime=t.tick,t.tick=i,t.callback(i),t.timeOutID=window.setTimeout(stepTimeout,n)}},start:function(t,i,n){this.isRunning||(this.callback=t,this.isSetTimeOut=i,this.target=n,this.isRunning=!0,this.timeOutID=i?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=o}});t.exports=a},function(t,i,n){var r=n(22);t.exports=function(t){var i,n=t.events;void 0!==document.hidden?i="visibilitychange":["webkit","moz","ms"].forEach((function(t){void 0!==document[t+"Hidden"]&&(document.hidden=function(){return document[t+"Hidden"]},i=t+"visibilitychange")})),i&&document.addEventListener(i,(function(t){document.hidden||"pause"===t.type?n.emit(r.HIDDEN):n.emit(r.VISIBLE)}),!1),window.onblur=function(){n.emit(r.BLUR)},window.onfocus=function(){n.emit(r.FOCUS)},window.focus&&t.config.autoFocus&&window.focus()}},function(t,i,n){var r=n(389),o=n(31),a=n(6);t.exports=function(t){var i=a(t,"data",[]),n=a(t,"canvas",null),h=a(t,"palette",r),d=a(t,"pixelWidth",1),f=a(t,"pixelHeight",d),p=a(t,"resizeCanvas",!0),T=a(t,"clearCanvas",!0),b=a(t,"preRender",null),S=a(t,"postRender",null),A=Math.floor(Math.abs(i[0].length*d)),P=Math.floor(Math.abs(i.length*f));n||(n=o.create2D(this,A,P),p=!1,T=!1),p&&(n.width=A,n.height=P);var O=n.getContext("2d");T&&O.clearRect(0,0,A,P),b&&b(n,O);for(var L=0;L<i.length;L++)for(var D=i[L],I=0;I<D.length;I++){var F=D[I];"."!==F&&" "!==F&&(O.fillStyle=h[F],O.fillRect(I*d,L*f,d,f))}return S&&S(n,O),n}},function(t,i){t.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(t,i,n){var r=n(0),o=n(358),a=n(94),h=n(3),d=new r({Extends:a,initialize:function CubicBezierCurve2(t,i,n,r){a.call(this,"CubicBezierCurve"),Array.isArray(t)&&(r=new h(t[6],t[7]),n=new h(t[4],t[5]),i=new h(t[2],t[3]),t=new h(t[0],t[1])),this.p0=t,this.p1=i,this.p2=n,this.p3=r},getStartPoint:function(t){return void 0===t&&(t=new h),t.copy(this.p0)},getResolution:function(t){return t},getPoint:function(t,i){void 0===i&&(i=new h);var n=this.p0,r=this.p1,a=this.p2,d=this.p3;return i.set(o(t,n.x,r.x,a.x,d.x),o(t,n.y,r.y,a.y,d.y))},draw:function(t,i){void 0===i&&(i=32);var n=this.getPoints(i);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var r=1;r<n.length;r++)t.lineTo(n[r].x,n[r].y);return t.strokePath(),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});d.fromJSON=function(t){var i=t.points,n=new h(i[0],i[1]),r=new h(i[2],i[3]),o=new h(i[4],i[5]),a=new h(i[6],i[7]);return new d(n,r,o,a)},t.exports=d},function(t,i,n){var r=n(0),o=n(94),a=n(36),h=n(6),d=n(196),f=n(3),p=new r({Extends:o,initialize:function EllipseCurve2(t,i,n,r,d,p,T,b){if("object"==typeof t){var S=t;t=h(S,"x",0),i=h(S,"y",0),n=h(S,"xRadius",0),r=h(S,"yRadius",n),d=h(S,"startAngle",0),p=h(S,"endAngle",360),T=h(S,"clockwise",!1),b=h(S,"rotation",0)}else void 0===r&&(r=n),void 0===d&&(d=0),void 0===p&&(p=360),void 0===T&&(T=!1),void 0===b&&(b=0);o.call(this,"EllipseCurve"),this.p0=new f(t,i),this._xRadius=n,this._yRadius=r,this._startAngle=a(d),this._endAngle=a(p),this._clockwise=T,this._rotation=a(b)},getStartPoint:function(t){return void 0===t&&(t=new f),this.getPoint(0,t)},getResolution:function(t){return 2*t},getPoint:function(t,i){void 0===i&&(i=new f);for(var n=2*Math.PI,r=this._endAngle-this._startAngle,o=Math.abs(r)<Number.EPSILON;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=o?0:n),this._clockwise&&!o&&(r===n?r=-n:r-=n);var a=this._startAngle+t*r,h=this.p0.x+this._xRadius*Math.cos(a),d=this.p0.y+this._yRadius*Math.sin(a);if(0!==this._rotation){var p=Math.cos(this._rotation),T=Math.sin(this._rotation),b=h-this.p0.x,S=d-this.p0.y;h=b*p-S*T+this.p0.x,d=b*T+S*p+this.p0.y}return i.set(h,d)},setXRadius:function(t){return this.xRadius=t,this},setYRadius:function(t){return this.yRadius=t,this},setWidth:function(t){return this.xRadius=t/2,this},setHeight:function(t){return this.yRadius=t/2,this},setStartAngle:function(t){return this.startAngle=t,this},setEndAngle:function(t){return this.endAngle=t,this},setClockwise:function(t){return this.clockwise=t,this},setRotation:function(t){return this.rotation=t,this},x:{get:function(){return this.p0.x},set:function(t){this.p0.x=t}},y:{get:function(){return this.p0.y},set:function(t){this.p0.y=t}},xRadius:{get:function(){return this._xRadius},set:function(t){this._xRadius=t}},yRadius:{get:function(){return this._yRadius},set:function(t){this._yRadius=t}},startAngle:{get:function(){return d(this._startAngle)},set:function(t){this._startAngle=a(t)}},endAngle:{get:function(){return d(this._endAngle)},set:function(t){this._endAngle=a(t)}},clockwise:{get:function(){return this._clockwise},set:function(t){this._clockwise=t}},angle:{get:function(){return d(this._rotation)},set:function(t){this._rotation=a(t)}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=t}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:d(this._startAngle),endAngle:d(this._endAngle),clockwise:this._clockwise,rotation:d(this._rotation)}}});p.fromJSON=function(t){return new p(t)},t.exports=p},function(t,i,n){var r=n(0),o=n(94),a=n(199),h=n(10),d=n(3),f=new r({Extends:o,initialize:function LineCurve2(t,i){o.call(this,"LineCurve"),Array.isArray(t)&&(i=new d(t[2],t[3]),t=new d(t[0],t[1])),this.p0=t,this.p1=i,this.arcLengthDivisions=1},getBounds:function(t){return void 0===t&&(t=new h),a([this.p0,this.p1],t)},getStartPoint:function(t){return void 0===t&&(t=new d),t.copy(this.p0)},getResolution:function(t){return void 0===t&&(t=1),t},getPoint:function(t,i){return void 0===i&&(i=new d),1===t?i.copy(this.p1):(i.copy(this.p1).subtract(this.p0).scale(t).add(this.p0),i)},getPointAt:function(t,i){return this.getPoint(t,i)},getTangent:function(t,i){return void 0===i&&(i=new d),i.copy(this.p1).subtract(this.p0).normalize(),i},getUtoTmapping:function(t,i,n){var r;if(i){var o=this.getLengths(n),a=o[o.length-1];r=Math.min(i,a)/a}else r=t;return r},draw:function(t){return t.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});f.fromJSON=function(t){var i=t.points,n=new d(i[0],i[1]),r=new d(i[2],i[3]);return new f(n,r)},t.exports=f},function(t,i,n){var r=n(0),o=n(3),a=new r({initialize:function MoveTo3(t,i){this.active=!1,this.p0=new o(t,i)},getPoint:function(t,i){return void 0===i&&(i=new o),i.copy(this.p0)},getPointAt:function(t,i){return this.getPoint(t,i)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});t.exports=a},function(t,i,n){var r=n(0),o=n(94),a=n(359),h=n(3),d=new r({Extends:o,initialize:function QuadraticBezier2(t,i,n){o.call(this,"QuadraticBezier"),Array.isArray(t)&&(n=new h(t[4],t[5]),i=new h(t[2],t[3]),t=new h(t[0],t[1])),this.p0=t,this.p1=i,this.p2=n},getStartPoint:function(t){return void 0===t&&(t=new h),t.copy(this.p0)},getResolution:function(t){return t},getPoint:function(t,i){void 0===i&&(i=new h);var n=this.p0,r=this.p1,o=this.p2;return i.set(a(t,n.x,r.x,o.x),a(t,n.y,r.y,o.y))},draw:function(t,i){void 0===i&&(i=32);var n=this.getPoints(i);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var r=1;r<n.length;r++)t.lineTo(n[r].x,n[r].y);return t.strokePath(),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});d.fromJSON=function(t){var i=t.points,n=new h(i[0],i[1]),r=new h(i[2],i[3]),o=new h(i[4],i[5]);return new d(n,r,o)},t.exports=d},function(t,i,n){var r=n(194),o=n(0),a=n(94),h=n(3),d=new o({Extends:a,initialize:function SplineCurve2(t){void 0===t&&(t=[]),a.call(this,"SplineCurve"),this.points=[],this.addPoints(t)},addPoints:function(t){for(var i=0;i<t.length;i++){var n=new h;"number"==typeof t[i]?(n.x=t[i],n.y=t[i+1],i++):Array.isArray(t[i])?(n.x=t[i][0],n.y=t[i][1]):(n.x=t[i].x,n.y=t[i].y),this.points.push(n)}return this},addPoint:function(t,i){var n=new h(t,i);return this.points.push(n),n},getStartPoint:function(t){return void 0===t&&(t=new h),t.copy(this.points[0])},getResolution:function(t){return t*this.points.length},getPoint:function(t,i){void 0===i&&(i=new h);var n=this.points,o=(n.length-1)*t,a=Math.floor(o),d=o-a,f=n[0===a?a:a-1],p=n[a],T=n[a>n.length-2?n.length-1:a+1],b=n[a>n.length-3?n.length-1:a+2];return i.set(r(d,f.x,p.x,T.x,b.x),r(d,f.y,p.y,T.y,b.y))},toJSON:function(){for(var t=[],i=0;i<this.points.length;i++)t.push(this.points[i].x),t.push(this.points[i].y);return{type:this.type,points:t}}});d.fromJSON=function(t){return new d(t.points)},t.exports=d},function(t,i,n){var r=new(n(0))({initialize:function BaseShader2(t,i,n,r){i&&""!==i||(i=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join("\n")),n&&""!==n||(n=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join("\n")),void 0===r&&(r=null),this.key=t,this.fragmentSrc=i,this.vertexSrc=n,this.uniforms=r}});t.exports=r},function(t,i,n){var r=n(38);r.ColorSpectrum=n(909),r.ColorToRGBA=n(910),r.ComponentToHex=n(398),r.GetColor=n(103),r.GetColor32=n(328),r.HexStringToColor=n(327),r.HSLToColor=n(911),r.HSVColorWheel=n(912),r.HSVToRGB=n(188),r.HueToComponent=n(399),r.IntegerToColor=n(189),r.IntegerToRGB=n(330),r.Interpolate=n(913),r.ObjectToColor=n(331),r.RandomRGB=n(914),r.RGBStringToColor=n(332),r.RGBToHSV=n(329),r.RGBToString=n(915),r.ValueToColor=n(187),t.exports=r},function(t,i){t.exports=function(t){var i=t.toString(16);return 1===i.length?"0"+i:i}},function(t,i){t.exports=function(t,i,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(i-t)*n:n<.5?i:n<2/3?t+(i-t)*(2/3-n)*6:t}},function(t,i,n){var r=n(105);t.exports=function(t){if("complete"!==document.readyState&&"interactive"!==document.readyState){var check=function(){document.removeEventListener("deviceready",check,!0),document.removeEventListener("DOMContentLoaded",check,!0),window.removeEventListener("load",check,!0),t()};document.body?r.cordova?document.addEventListener("deviceready",check,!1):(document.addEventListener("DOMContentLoaded",check,!0),window.addEventListener("load",check,!0)):window.setTimeout(check,20)}else t()}},function(t,i){t.exports=function(t){if(!t)return window.innerHeight;var i=Math.abs(window.orientation),n={w:0,h:0},r=document.createElement("div");return r.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(r),n.w=90===i?r.offsetHeight:window.innerWidth,n.h=90===i?window.innerWidth:r.offsetHeight,document.documentElement.removeChild(r),r=null,90!==Math.abs(window.orientation)?n.h:n.w}},function(t,i,n){var r=n(201);t.exports=function(t,i){var n=window.screen,o=!!n&&(n.orientation||n.mozOrientation||n.msOrientation);return o&&"string"==typeof o.type?o.type:"string"==typeof o?o:"number"==typeof window.orientation?0===window.orientation||180===window.orientation?r.ORIENTATION.PORTRAIT:r.ORIENTATION.LANDSCAPE:window.matchMedia?window.matchMedia("(orientation: portrait)").matches?r.ORIENTATION.PORTRAIT:window.matchMedia("(orientation: landscape)").matches?r.ORIENTATION.LANDSCAPE:void 0:i>t?r.ORIENTATION.PORTRAIT:r.ORIENTATION.LANDSCAPE}},function(t,i){t.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(t,i){t.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(t,i){t.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(t,i){t.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(t,i){t.exports=function(t){var i;return""!==t&&("string"==typeof t?i=document.getElementById(t):t&&1===t.nodeType&&(i=t)),i||(i=document.body),i}},function(t,i){t.exports=function(t){var i="";try{window.DOMParser?i=(new DOMParser).parseFromString(t,"text/xml"):(i=new ActiveXObject("Microsoft.XMLDOM")).loadXML(t)}catch(n){i=null}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length?i:null}},function(t,i,n){var r=n(0),o=n(203),a=n(9),h=n(51),d=n(22),f=n(410),p=n(411),T=n(412),b=n(413),S=n(25),A=n(177),P=new r({initialize:function InputManager2(t,i){this.game=t,this.scaleManager,this.canvas,this.config=i,this.enabled=!0,this.events=new a,this.isOver=!0,this.defaultCursor="",this.keyboard=i.inputKeyboard?new f(this):null,this.mouse=i.inputMouse?new p(this):null,this.touch=i.inputTouch?new b(this):null,this.pointers=[],this.pointersTotal=i.inputActivePointers,i.inputTouch&&1===this.pointersTotal&&(this.pointersTotal=2);for(var n=0;n<=this.pointersTotal;n++){var r=new T(this,n);r.smoothFactor=i.inputSmoothFactor,this.pointers.push(r)}this.mousePointer=i.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new S,this._tempMatrix2=new S,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],t.events.once(d.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(h.MANAGER_BOOT),this.game.events.on(d.PRE_RENDER,this.preRender,this),this.game.events.once(d.DESTROY,this.destroy,this)},setCanvasOver:function(t){this.isOver=!0,this.events.emit(h.GAME_OVER,t)},setCanvasOut:function(t){this.isOver=!1,this.events.emit(h.GAME_OUT,t)},preRender:function(){var t=this.game.loop.now,i=this.game.loop.delta,n=this.game.scene.getScenes(!0,!0);this.time=t,this.events.emit(h.MANAGER_UPDATE);for(var r=0;r<n.length;r++){var o=n[r];if(o.sys.input&&o.sys.input.updatePoll(t,i)&&this.globalTopOnly)return}},setDefaultCursor:function(t){this.defaultCursor=t,this.canvas.style.cursor!==t&&(this.canvas.style.cursor=t)},setCursor:function(t){t.cursor&&(this.canvas.style.cursor=t.cursor)},resetCursor:function(t){t.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(t){void 0===t&&(t=1);var i=[];this.pointersTotal+t>10&&(t=10-this.pointersTotal);for(var n=0;n<t;n++){var r=this.pointers.length,o=new T(this,r);o.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(o),this.pointersTotal++,i.push(o)}return i},updateInputPlugins:function(t,i){var n=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var r=0;r<n.length;r++){var o=n[r];if(o.sys.input&&(o.sys.input.update(t,i)&&this.globalTopOnly||this._tempSkip))return}},onTouchStart:function(t){for(var i=this.pointers,n=[],r=0;r<t.changedTouches.length;r++)for(var a=t.changedTouches[r],h=1;h<this.pointersTotal;h++){var d=i[h];if(!d.active){d.touchstart(a,t),this.activePointer=d,n.push(d);break}}this.updateInputPlugins(o.TOUCH_START,n)},onTouchMove:function(t){for(var i=this.pointers,n=[],r=0;r<t.changedTouches.length;r++)for(var a=t.changedTouches[r],h=1;h<this.pointersTotal;h++){var d=i[h];if(d.active&&d.identifier===a.identifier){d.touchmove(a,t),this.activePointer=d,n.push(d);break}}this.updateInputPlugins(o.TOUCH_MOVE,n)},onTouchEnd:function(t){for(var i=this.pointers,n=[],r=0;r<t.changedTouches.length;r++)for(var a=t.changedTouches[r],h=1;h<this.pointersTotal;h++){var d=i[h];if(d.active&&d.identifier===a.identifier){d.touchend(a,t),n.push(d);break}}this.updateInputPlugins(o.TOUCH_END,n)},onTouchCancel:function(t){for(var i=this.pointers,n=[],r=0;r<t.changedTouches.length;r++)for(var a=t.changedTouches[r],h=1;h<this.pointersTotal;h++){var d=i[h];if(d.active&&d.identifier===a.identifier){d.touchcancel(a,t),n.push(d);break}}this.updateInputPlugins(o.TOUCH_CANCEL,n)},onMouseDown:function(t){var i=this.mousePointer;i.down(t),i.updateMotion(),this.activePointer=i,this.updateInputPlugins(o.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(t){var i=this.mousePointer;i.move(t),i.updateMotion(),this.activePointer=i,this.updateInputPlugins(o.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(t){var i=this.mousePointer;i.up(t),i.updateMotion(),this.activePointer=i,this.updateInputPlugins(o.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(t){var i=this.mousePointer;i.wheel(t),this.activePointer=i,this.updateInputPlugins(o.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(t){var i=this.mouse.locked;this.mousePointer.locked=i,this.events.emit(h.POINTERLOCK_CHANGE,t,i)},inputCandidate:function(t,i){var n=t.input;if(!n||!n.enabled||!n.alwaysEnabled&&!t.willRender(i))return!1;var r=!0,o=t.parentContainer;if(o)do{if(!o.willRender(i)){r=!1;break}o=o.parentContainer}while(o);return r},hitTest:function(t,i,n,r){void 0===r&&(r=this._tempHitTest);var o=this._tempPoint,a=n.scrollX,h=n.scrollY;r.length=0;var d=t.x,f=t.y;n.getWorldPoint(d,f,o),t.worldX=o.x,t.worldY=o.y;for(var p={x:0,y:0},T=this._tempMatrix,b=this._tempMatrix2,S=0;S<i.length;S++){var P=i[S];if(this.inputCandidate(P,n)){var O=o.x+a*P.scrollFactorX-a,L=o.y+h*P.scrollFactorY-h;P.parentContainer?(P.getWorldTransformMatrix(T,b),T.applyInverse(O,L,p)):A(O,L,P.x,P.y,P.rotation,P.scaleX,P.scaleY,p),this.pointWithinHitArea(P,p.x,p.y)&&r.push(P)}}return r},pointWithinHitArea:function(t,i,n){i+=t.displayOriginX,n+=t.displayOriginY;var r=t.input;return!(!r||!r.hitAreaCallback(r.hitArea,i,n,t)||(r.localX=i,r.localY=n,0))},pointWithinInteractiveObject:function(t,i,n){return!!t.hitArea&&(i+=t.gameObject.displayOriginX,n+=t.gameObject.displayOriginY,t.localX=i,t.localY=n,t.hitAreaCallback(t.hitArea,i,n,t))},transformPointer:function(t,i,n,r){var o=t.position,a=t.prevPosition;a.x=o.x,a.y=o.y;var h=this.scaleManager.transformX(i),d=this.scaleManager.transformY(n),f=t.smoothFactor;r&&0!==f?(o.x=h*f+a.x*(1-f),o.y=d*f+a.y*(1-f)):(o.x=h,o.y=d)},destroy:function(){this.events.removeAllListeners(),this.game.events.off(d.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var t=0;t<this.pointers.length;t++)this.pointers[t].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});t.exports=P},function(t,i,n){var r=n(93),o=n(0),a=n(22),h=n(51),d=n(143),f=n(1),p=new o({initialize:function KeyboardManager2(t){this.manager=t,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=f,this.onKeyUp=f,t.events.once(h.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputKeyboard,this.target=t.inputKeyboardEventTarget,this.addCapture(t.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(a.POST_STEP,this.postUpdate,this)},startListeners:function(){var t=this;this.onKeyDown=function(i){if(!i.defaultPrevented&&t.enabled&&t.manager){t.queue.push(i),t.manager.events.emit(h.MANAGER_PROCESS);var n=i.altKey||i.ctrlKey||i.shiftKey||i.metaKey;t.preventDefault&&!n&&t.captures.indexOf(i.keyCode)>-1&&i.preventDefault()}},this.onKeyUp=function(i){if(!i.defaultPrevented&&t.enabled&&t.manager){t.queue.push(i),t.manager.events.emit(h.MANAGER_PROCESS);var n=i.altKey||i.ctrlKey||i.shiftKey||i.metaKey;t.preventDefault&&!n&&t.captures.indexOf(i.keyCode)>-1&&i.preventDefault()}};var i=this.target;i&&(i.addEventListener("keydown",this.onKeyDown,!1),i.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var t=this.target;t.removeEventListener("keydown",this.onKeyDown,!1),t.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(t){"string"==typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]);for(var i=this.captures,n=0;n<t.length;n++){var r=t[n];"string"==typeof r&&(r=d[r.trim().toUpperCase()]),-1===i.indexOf(r)&&i.push(r)}this.preventDefault=i.length>0},removeCapture:function(t){"string"==typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]);for(var i=this.captures,n=0;n<t.length;n++){var o=t[n];"string"==typeof o&&(o=d[o.toUpperCase()]),r(i,o)}this.preventDefault=i.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(a.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});t.exports=p},function(t,i,n){var r=n(0),o=n(191),a=n(51),h=n(1),d=new r({initialize:function MouseManager2(t){this.manager=t,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=h,this.onMouseDown=h,this.onMouseUp=h,this.onMouseDownWindow=h,this.onMouseUpWindow=h,this.onMouseOver=h,this.onMouseOut=h,this.onMouseWheel=h,this.pointerLockChange=h,this.isTop=!0,t.events.once(a.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputMouse,this.target=t.inputMouseEventTarget,this.passive=t.inputMousePassive,this.preventDefaultDown=t.inputMousePreventDefaultDown,this.preventDefaultUp=t.inputMousePreventDefaultUp,this.preventDefaultMove=t.inputMousePreventDefaultMove,this.preventDefaultWheel=t.inputMousePreventDefaultWheel,this.target?"string"==typeof this.target&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,t.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),this},requestPointerLock:function(){if(o.pointerLock){var t=this.target;t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock()}},releasePointerLock:function(){o.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var t=this.target;if(t){var i=this,n=this.manager,r=n.canvas,a=window&&window.focus&&n.game.config.autoFocus;this.onMouseMove=function(t){!t.defaultPrevented&&i.enabled&&n&&n.enabled&&(n.onMouseMove(t),i.preventDefaultMove&&t.preventDefault())},this.onMouseDown=function(t){a&&window.focus(),!t.defaultPrevented&&i.enabled&&n&&n.enabled&&(n.onMouseDown(t),i.preventDefaultDown&&t.target===r&&t.preventDefault())},this.onMouseDownWindow=function(t){!t.defaultPrevented&&i.enabled&&n&&n.enabled&&t.target!==r&&n.onMouseDown(t)},this.onMouseUp=function(t){!t.defaultPrevented&&i.enabled&&n&&n.enabled&&(n.onMouseUp(t),i.preventDefaultUp&&t.target===r&&t.preventDefault())},this.onMouseUpWindow=function(t){!t.defaultPrevented&&i.enabled&&n&&n.enabled&&t.target!==r&&n.onMouseUp(t)},this.onMouseOver=function(t){!t.defaultPrevented&&i.enabled&&n&&n.enabled&&n.setCanvasOver(t)},this.onMouseOut=function(t){!t.defaultPrevented&&i.enabled&&n&&n.enabled&&n.setCanvasOut(t)},this.onMouseWheel=function(t){!t.defaultPrevented&&i.enabled&&n&&n.enabled&&n.onMouseWheel(t),i.preventDefaultWheel&&t.target===r&&t.preventDefault()};var h={passive:!0};if(t.addEventListener("mousemove",this.onMouseMove),t.addEventListener("mousedown",this.onMouseDown),t.addEventListener("mouseup",this.onMouseUp),t.addEventListener("mouseover",this.onMouseOver,h),t.addEventListener("mouseout",this.onMouseOut,h),this.preventDefaultWheel?t.addEventListener("wheel",this.onMouseWheel,{passive:!1}):t.addEventListener("wheel",this.onMouseWheel,h),window&&n.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,h),window.top.addEventListener("mouseup",this.onMouseUpWindow,h)}catch(d){window.addEventListener("mousedown",this.onMouseDownWindow,h),window.addEventListener("mouseup",this.onMouseUpWindow,h),this.isTop=!1}o.pointerLock&&(this.pointerLockChange=function(t){var r=i.target;i.locked=document.pointerLockElement===r||document.mozPointerLockElement===r||document.webkitPointerLockElement===r,n.onPointerLockChange(t)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var t=this.target;t.removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("mouseover",this.onMouseOver),t.removeEventListener("mouseout",this.onMouseOut),window&&((t=this.isTop?window.top:window).removeEventListener("mousedown",this.onMouseDownWindow),t.removeEventListener("mouseup",this.onMouseUpWindow)),o.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=d},function(t,i,n){var r=n(349),o=n(0),a=n(50),h=n(124),d=n(360),f=n(3),p=n(105),T=new o({initialize:function Pointer2(t,i){this.manager=t,this.id=i,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new f,this.prevPosition=new f,this.midPoint=new f(-1,-1),this.velocity=new f,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=0===i,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(t){var i=t.getWorldPoint(this.x,this.y);return this.worldX=i.x,this.worldY=i.y,this},positionToCamera:function(t,i){return t.getWorldPoint(this.x,this.y,i)},updateMotion:function(){var t=this.position.x,i=this.position.y,n=this.midPoint.x,o=this.midPoint.y;if(t!==n||i!==o){var a=d(this.motionFactor,n,t),f=d(this.motionFactor,o,i);h(a,t,.1)&&(a=t),h(f,i,.1)&&(f=i),this.midPoint.set(a,f);var p=t-a,T=i-f;this.velocity.set(p,T),this.angle=r(a,f,t,i),this.distance=Math.sqrt(p*p+T*T)}},up:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),0===this.buttons&&(this.isDown=!1,this.upTime=t.timeStamp,this.wasTouch=!1)},down:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),p.macOS&&t.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=t.timeStamp),this.wasTouch=!1},move:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.locked&&(this.movementX=t.movementX||t.mozMovementX||t.webkitMovementX||0,this.movementY=t.movementY||t.mozMovementY||t.webkitMovementY||0),this.moveTime=t.timeStamp,this.wasTouch=!1},wheel:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.deltaX=t.deltaX,this.deltaY=t.deltaY,this.deltaZ=t.deltaZ,this.wasTouch=!1},touchstart:function(t,i){t.pointerId&&(this.pointerId=t.pointerId),this.identifier=t.identifier,this.target=t.target,this.active=!0,this.buttons=1,this.event=i,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=i.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(t,i){this.event=i,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.moveTime=i.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(t,i){this.buttons=0,this.event=i,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=i.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(t,i){this.buttons=0,this.event=i,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=i.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return 0===this.buttons},leftButtonDown:function(){return!!(1&this.buttons)},rightButtonDown:function(){return!!(2&this.buttons)},middleButtonDown:function(){return!!(4&this.buttons)},backButtonDown:function(){return!!(8&this.buttons)},forwardButtonDown:function(){return!!(16&this.buttons)},leftButtonReleased:function(){return 0===this.button&&!this.isDown},rightButtonReleased:function(){return 2===this.button&&!this.isDown},middleButtonReleased:function(){return 1===this.button&&!this.isDown},backButtonReleased:function(){return 3===this.button&&!this.isDown},forwardButtonReleased:function(){return 4===this.button&&!this.isDown},getDistance:function(){return this.isDown?a(this.downX,this.downY,this.x,this.y):a(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?r(this.downX,this.downY,this.x,this.y):r(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(t,i){void 0===t&&(t=10),void 0===i&&(i=[]);for(var n=this.prevPosition.x,r=this.prevPosition.y,o=this.position.x,a=this.position.y,h=0;h<t;h++){var f=1/t*h;i[h]={x:d(f,n,o),y:d(f,r,a)}}return i},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},time:{get:function(){return this.event?this.event.timeStamp:0}}});t.exports=T},function(t,i,n){var r=n(0),o=n(51),a=n(1),h=new r({initialize:function TouchManager2(t){this.manager=t,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=a,this.onTouchStartWindow=a,this.onTouchMove=a,this.onTouchEnd=a,this.onTouchEndWindow=a,this.onTouchCancel=a,this.onTouchCancelWindow=a,this.onTouchOver=a,this.onTouchOut=a,t.events.once(o.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputTouch,this.target=t.inputTouchEventTarget,this.capture=t.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),t.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),this},startListeners:function(){var t=this,i=this.manager.canvas,n=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(r){n&&window.focus(),!r.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchStart(r),t.capture&&r.cancelable&&r.target===i&&r.preventDefault())},this.onTouchStartWindow=function(n){!n.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&n.target!==i&&t.manager.onTouchStart(n)},this.onTouchMove=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchMove(i),t.capture&&i.cancelable&&i.preventDefault())},this.onTouchEnd=function(n){!n.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchEnd(n),t.capture&&n.cancelable&&n.target===i&&n.preventDefault())},this.onTouchEndWindow=function(n){!n.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&n.target!==i&&t.manager.onTouchEnd(n)},this.onTouchCancel=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchCancel(i),t.capture&&i.preventDefault())},this.onTouchCancelWindow=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.onTouchCancel(i)},this.onTouchOver=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOver(i)},this.onTouchOut=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOut(i)};var r=this.target;if(r){var o={passive:!0},a={passive:!1};r.addEventListener("touchstart",this.onTouchStart,this.capture?a:o),r.addEventListener("touchmove",this.onTouchMove,this.capture?a:o),r.addEventListener("touchend",this.onTouchEnd,this.capture?a:o),r.addEventListener("touchcancel",this.onTouchCancel,this.capture?a:o),r.addEventListener("touchover",this.onTouchOver,this.capture?a:o),r.addEventListener("touchout",this.onTouchOut,this.capture?a:o),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,a),window.addEventListener("touchend",this.onTouchEndWindow,a),window.addEventListener("touchcancel",this.onTouchCancelWindow,a)),this.enabled=!0}},stopListeners:function(){var t=this.target;t.removeEventListener("touchstart",this.onTouchStart),t.removeEventListener("touchmove",this.onTouchMove),t.removeEventListener("touchend",this.onTouchEnd),t.removeEventListener("touchcancel",this.onTouchCancel),t.removeEventListener("touchover",this.onTouchOver),t.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=h},function(t,i,n){var r=n(0),o=n(22),a=n(9),h=n(8),d=n(16),f=n(5),p=n(2),T=n(24),b=n(93),S=new r({Extends:a,initialize:function PluginManager2(t){a.call(this),this.game=t,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],t.isBooted?this.boot():t.events.once(o.BOOT,this.boot,this)},boot:function(){var t,i,n,r,a,h,d,f=this.game.config,T=f.installGlobalPlugins;for(T=T.concat(this._pendingGlobal),t=0;t<T.length;t++)i=T[t],n=p(i,"key",null),r=p(i,"plugin",null),a=p(i,"start",!1),h=p(i,"mapping",null),d=p(i,"data",null),n&&(r?this.install(n,r,a,h,d):console.warn("Missing `plugin` for key: "+n));for(T=(T=f.installScenePlugins).concat(this._pendingScene),t=0;t<T.length;t++)i=T[t],n=p(i,"key",null),r=p(i,"plugin",null),h=p(i,"mapping",null),n&&(r?this.installScenePlugin(n,r,h):console.warn("Missing `plugin` for key: "+n));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(o.DESTROY,this.destroy,this)},addToScene:function(t,i,n){var r,o,a,h=this.game,d=t.scene,f=t.settings.map,p=t.settings.isBooted;for(r=0;r<i.length;r++)h[o=i[r]]?(t[o]=h[o],f.hasOwnProperty(o)&&(d[f[o]]=t[o])):"game"===o&&f.hasOwnProperty(o)&&(d[f[o]]=h);for(var b=0;b<n.length;b++)for(a=n[b],r=0;r<a.length;r++)if(o=a[r],T.hasCore(o)){var S=T.getCore(o),A=S.mapping,P=new S.plugin(d,this,A);t[A]=P,S.custom?d[A]=P:f.hasOwnProperty(A)&&(d[f[A]]=P),p&&P.boot()}for(a=this.plugins,r=0;r<a.length;r++){var O=a[r];O.mapping&&(d[O.mapping]=O.plugin)}},getDefaultScenePlugins:function(){var t=this.game.config.defaultPlugins;return t=t.concat(this.scenePlugins)},installScenePlugin:function(t,i,n,r,o){if(void 0===o&&(o=!1),"function"==typeof i){if(T.hasCore(t)){if(!o&&T.hasCore(t))return void console.warn("Scene Plugin key in use: "+t)}else T.register(t,i,n,!0),this.scenePlugins.push(t);if(r){var a=new i(r,this,t);r.sys[t]=a,n&&""!==n&&(r[n]=a),a.boot()}}else console.warn("Invalid Scene Plugin: "+t)},install:function(t,i,n,r,o){if(void 0===n&&(n=!1),void 0===r&&(r=null),void 0===o&&(o=null),"function"!=typeof i)return console.warn("Invalid Plugin: "+t),null;if(T.hasCustom(t))return console.warn("Plugin key in use: "+t),null;if(null!==r&&(n=!0),this.game.isBooted){if(T.registerCustom(t,i,r,o),n)return this.start(t)}else this._pendingGlobal.push({key:t,plugin:i,start:n,mapping:r,data:o});return null},getIndex:function(t){for(var i=this.plugins,n=0;n<i.length;n++)if(i[n].key===t)return n;return-1},getEntry:function(t){var i=this.getIndex(t);if(-1!==i)return this.plugins[i]},isActive:function(t){var i=this.getEntry(t);return i&&i.active},start:function(t,i){void 0===i&&(i=t);var n=this.getEntry(i);return n&&!n.active?(n.active=!0,n.plugin.start()):n||(n=this.createEntry(t,i)),n?n.plugin:null},createEntry:function(t,i){var n=T.getCustom(t);if(n){var r=new n.plugin(this);n={key:i,plugin:r,active:!0,mapping:n.mapping,data:n.data},this.plugins.push(n),r.init(n.data),r.start()}return n},stop:function(t){var i=this.getEntry(t);return i&&i.active&&(i.active=!1,i.plugin.stop()),this},get:function(t,i){void 0===i&&(i=!0);var n=this.getEntry(t);if(n)return n.plugin;var r=this.getClass(t);return r&&i?(n=this.createEntry(t,t))?n.plugin:null:r||null},getClass:function(t){return T.getCustomClass(t)},removeGlobalPlugin:function(t){var i=this.getEntry(t);i&&b(this.plugins,i),T.removeCustom(t)},removeScenePlugin:function(t){b(this.scenePlugins,t),T.remove(t)},registerGameObject:function(t,i,n){return i&&f.register(t,i),n&&d.register(t,n),this},removeGameObject:function(t,i,n){return void 0===i&&(i=!0),void 0===n&&(n=!0),i&&f.remove(t),n&&d.remove(t),this},registerFileType:function(t,i,n){h.register(t,i),n&&n.sys.load&&(n.sys.load[t]=i)},destroy:function(){for(var t=0;t<this.plugins.length;t++)this.plugins[t].plugin.destroy();T.destroyCustomPlugins(),this.game.noReturn&&T.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});t.exports=S},function(t,i,n){var r=n(201),o=n(0),a=n(9),h=n(104),d=n(22),f=n(401),p=n(407),T=n(402),b=n(1),S=n(10),A=n(416),P=n(76),O=n(3),L=new o({Extends:a,initialize:function ScaleManager2(t){a.call(this),this.game=t,this.canvas,this.canvasBounds=new S,this.parent=null,this.parentIsWindow=!1,this.parentSize=new A,this.gameSize=new A,this.baseSize=new A,this.displaySize=new A,this.scaleMode=r.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new O(1,1),this.autoRound=!1,this.autoCenter=r.CENTER.NO_CENTER,this.orientation=r.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:b,windowResize:b,fullScreenChange:b,fullScreenError:b}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(d.BOOT,this.boot,this)},boot:function(){var t=this.game;this.canvas=t.canvas,this.fullscreen=t.device.fullscreen,this.scaleMode!==r.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===r.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),t.events.on(d.PRE_STEP,this.step,this),t.events.once(d.READY,this.refresh,this),t.events.once(d.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(t){this.getParent(t),this.getParentBounds();var i=t.width,n=t.height,o=t.scaleMode,a=t.zoom,h=t.autoRound;if("string"==typeof i){var d=this.parentSize.width;0===d&&(d=window.innerWidth);var f=parseInt(i,10)/100;i=Math.floor(d*f)}if("string"==typeof n){var p=this.parentSize.height;0===p&&(p=window.innerHeight);var b=parseInt(n,10)/100;n=Math.floor(p*b)}this.scaleMode=o,this.autoRound=h,this.autoCenter=t.autoCenter,this.resizeInterval=t.resizeInterval,h&&(i=Math.floor(i),n=Math.floor(n)),this.gameSize.setSize(i,n),a===r.ZOOM.MAX_ZOOM&&(a=this.getMaxZoom()),this.zoom=a,1!==a&&(this._resetZoom=!0),this.baseSize.setSize(i,n),h&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),t.minWidth>0&&this.displaySize.setMin(t.minWidth*a,t.minHeight*a),t.maxWidth>0&&this.displaySize.setMax(t.maxWidth*a,t.maxHeight*a),this.displaySize.setSize(i,n),this.orientation=T(i,n)},getParent:function(t){var i=t.parent;if(null!==i){if(this.parent=p(i),this.parentIsWindow=this.parent===document.body,t.expandParent&&t.scaleMode!==r.SCALE_MODE.NONE){var n=this.parent.getBoundingClientRect();(this.parentIsWindow||0===n.height)&&(document.documentElement.style.height="100%",document.body.style.height="100%",n=this.parent.getBoundingClientRect(),this.parentIsWindow||0!==n.height||(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}t.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=p(t.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var t=this.parentSize,i=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(i.height=f(!0));var n=i.width,r=i.height;return(t.width!==n||t.height!==r)&&(t.setSize(n,r),!0)},lockOrientation:function(t){var i=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return!!i&&i.call(screen,t)},setParentSize:function(t,i){return this.parentSize.setSize(t,i),this.refresh()},setGameSize:function(t,i){var n=this.autoRound;n&&(t=Math.floor(t),i=Math.floor(i));var r=this.width,o=this.height;return this.gameSize.resize(t,i),this.baseSize.resize(t,i),n&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(t/i),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(r,o)},resize:function(t,i){var n=this.zoom,r=this.autoRound;r&&(t=Math.floor(t),i=Math.floor(i));var o=this.width,a=this.height;this.gameSize.resize(t,i),this.baseSize.resize(t,i),r&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(t*n,i*n),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var h=this.canvas.style,d=t*n,f=i*n;return r&&(d=Math.floor(d),f=Math.floor(f)),d===t&&f===i||(h.width=d+"px",h.height=f+"px"),this.refresh(o,a)},setZoom:function(t){return this.zoom=t,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(t,i){void 0===t&&(t=this.width),void 0===i&&(i=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var n=this.game.domContainer;if(n){this.baseSize.setCSS(n);var r=this.canvas.style,o=n.style;o.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",o.marginLeft=r.marginLeft,o.marginTop=r.marginTop}return this.emit(h.RESIZE,this.gameSize,this.baseSize,this.displaySize,t,i),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var t=T(this.width,this.height);t!==this.orientation&&(this.orientation=t,this.emit(h.ORIENTATION_CHANGE,t))}},updateScale:function(){var t,i,n=this.canvas.style,o=this.gameSize.width,a=this.gameSize.height,h=this.zoom,d=this.autoRound;this.scaleMode===r.SCALE_MODE.NONE?(this.displaySize.setSize(o*h,a*h),t=this.displaySize.width,i=this.displaySize.height,d&&(t=Math.floor(t),i=Math.floor(i)),this._resetZoom&&(n.width=t+"px",n.height=i+"px",this._resetZoom=!1)):this.scaleMode===r.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),t=this.displaySize.width,i=this.displaySize.height,d&&(t=Math.floor(t),i=Math.floor(i)),this.canvas.width=t,this.canvas.height=i):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),t=this.displaySize.width,i=this.displaySize.height,d&&(t=Math.floor(t),i=Math.floor(i)),n.width=t+"px",n.height=i+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var t=P(this.parentSize.width,this.gameSize.width,0,!0),i=P(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(t,i),1)},updateCenter:function(){var t=this.autoCenter;if(t!==r.CENTER.NO_CENTER){var i=this.canvas,n=i.style,o=i.getBoundingClientRect(),a=o.width,h=o.height,d=Math.floor((this.parentSize.width-a)/2),f=Math.floor((this.parentSize.height-h)/2);t===r.CENTER.CENTER_HORIZONTALLY?f=0:t===r.CENTER.CENTER_VERTICALLY&&(d=0),n.marginLeft=d+"px",n.marginTop=f+"px"}},updateBounds:function(){var t=this.canvasBounds,i=this.canvas.getBoundingClientRect();t.x=i.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),t.y=i.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),t.width=i.width,t.height=i.height},transformX:function(t){return(t-this.canvasBounds.left)*this.displayScale.x},transformY:function(t){return(t-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(t){void 0===t&&(t={navigationUI:"hide"});var i=this.fullscreen;if(i.available){if(!i.active){var n=this.getFullscreenTarget();i.keyboard?n[i.request](Element.ALLOW_KEYBOARD_INPUT):n[i.request](t)}}else this.emit(h.FULLSCREEN_UNSUPPORTED)},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(h.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(t){this.removeFullscreenTarget(),this.emit(h.FULLSCREEN_FAILED,t)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var t=document.createElement("div");t.style.margin="0",t.style.padding="0",t.style.width="100%",t.style.height="100%",this.fullscreenTarget=t,this._createdFullscreenTarget=!0}return this._createdFullscreenTarget&&(this.canvas.parentNode.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)),this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var t=this.fullscreenTarget;if(t&&t.parentNode){var i=t.parentNode;i.insertBefore(this.canvas,t),i.removeChild(t)}}},stopFullscreen:function(){var t=this.fullscreen;if(!t.available)return this.emit(h.FULLSCREEN_UNSUPPORTED),!1;t.active&&document[t.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(h.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(t){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(t)},startListeners:function(){var t=this,i=this.listeners;i.orientationChange=function(){t.updateBounds(),t._checkOrientation=!0,t.dirty=!0},i.windowResize=function(){t.updateBounds(),t.dirty=!0},window.addEventListener("orientationchange",i.orientationChange,!1),window.addEventListener("resize",i.windowResize,!1),this.fullscreen.available&&(i.fullScreenChange=function(i){return t.onFullScreenChange(i)},i.fullScreenError=function(i){return t.onFullScreenError(i)},["webkit","moz",""].forEach((function(t){document.addEventListener(t+"fullscreenchange",i.fullScreenChange,!1),document.addEventListener(t+"fullscreenerror",i.fullScreenError,!1)})),document.addEventListener("MSFullscreenChange",i.fullScreenChange,!1),document.addEventListener("MSFullscreenError",i.fullScreenError,!1))},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(t,i){this.parent&&(this._lastCheck+=i,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var t=this.listeners;window.removeEventListener("orientationchange",t.orientationChange,!1),window.removeEventListener("resize",t.windowResize,!1),["webkit","moz",""].forEach((function(i){document.removeEventListener(i+"fullscreenchange",t.fullScreenChange,!1),document.removeEventListener(i+"fullscreenerror",t.fullScreenError,!1)})),document.removeEventListener("MSFullscreenChange",t.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",t.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===r.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===r.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});t.exports=L},function(t,i,n){var r=n(18),o=n(0),a=n(76),h=n(3),d=new o({initialize:function Size2(t,i,n,r){void 0===t&&(t=0),void 0===i&&(i=t),void 0===n&&(n=0),void 0===r&&(r=null),this._width=t,this._height=i,this._parent=r,this.aspectMode=n,this.aspectRatio=0===i?1:t/i,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new h},setAspectMode:function(t){return void 0===t&&(t=0),this.aspectMode=t,this.setSize(this._width,this._height)},setSnap:function(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.snapTo.set(t,i),this.setSize(this._width,this._height)},setParent:function(t){return this._parent=t,this.setSize(this._width,this._height)},setMin:function(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.minWidth=r(t,0,this.maxWidth),this.minHeight=r(i,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(t,i){return void 0===t&&(t=Number.MAX_VALUE),void 0===i&&(i=t),this.maxWidth=r(t,this.minWidth,Number.MAX_VALUE),this.maxHeight=r(i,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(t,i){switch(void 0===t&&(t=0),void 0===i&&(i=t),this.aspectMode){case d.NONE:this._width=this.getNewWidth(a(t,this.snapTo.x)),this._height=this.getNewHeight(a(i,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height;break;case d.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(a(t,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case d.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(a(i,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case d.FIT:this.constrain(t,i,!0);break;case d.ENVELOP:this.constrain(t,i,!1)}return this},setAspectRatio:function(t){return this.aspectRatio=t,this.setSize(this._width,this._height)},resize:function(t,i){return this._width=this.getNewWidth(a(t,this.snapTo.x)),this._height=this.getNewHeight(a(i,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height,this},getNewWidth:function(t,i){return void 0===i&&(i=!0),t=r(t,this.minWidth,this.maxWidth),i&&this._parent&&t>this._parent.width&&(t=Math.max(this.minWidth,this._parent.width)),t},getNewHeight:function(t,i){return void 0===i&&(i=!0),t=r(t,this.minHeight,this.maxHeight),i&&this._parent&&t>this._parent.height&&(t=Math.max(this.minHeight,this._parent.height)),t},constrain:function(t,i,n){void 0===t&&(t=0),void 0===i&&(i=t),void 0===n&&(n=!0),t=this.getNewWidth(t),i=this.getNewHeight(i);var r=this.snapTo,o=0===i?1:t/i;return n&&this.aspectRatio>o||!n&&this.aspectRatio<o?(i=(t=a(t,r.x))/this.aspectRatio,r.y>0&&(t=(i=a(i,r.y))*this.aspectRatio)):(n&&this.aspectRatio<o||!n&&this.aspectRatio>o)&&(t=(i=a(i,r.y))*this.aspectRatio,r.x>0&&(i=(t=a(t,r.x))*(1/this.aspectRatio))),this._width=t,this._height=i,this},fitTo:function(t,i){return this.constrain(t,i,!0)},envelop:function(t,i){return this.constrain(t,i,!1)},setWidth:function(t){return this.setSize(t,this._height)},setHeight:function(t){return this.setSize(this._width,t)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(t){t&&t.style&&(t.style.width=this._width+"px",t.style.height=this._height+"px")},copy:function(t){return t.setAspectMode(this.aspectMode),t.aspectRatio=this.aspectRatio,t.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(t){this.setSize(t,this._height)}},height:{get:function(){return this._height},set:function(t){this.setSize(this._width,t)}}});d.NONE=0,d.WIDTH_CONTROLS_HEIGHT=1,d.HEIGHT_CONTROLS_WIDTH=2,d.FIT=3,d.ENVELOP=4,t.exports=d},function(t,i,n){var r=n(0),o=n(144),a=n(20),h=n(22),d=n(6),f=n(95),p=n(1),T=n(418),b=n(204),S=new r({initialize:function SceneManager2(t,i){if(this.game=t,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,i){Array.isArray(i)||(i=[i]);for(var n=0;n<i.length;n++)this._pending.push({key:"default",scene:i[n],autoStart:0===n,data:{}})}t.events.once(h.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var t,i,n,r;for(t=0;t<this._pending.length;t++){var o;n=(i=this._pending[t]).key,(r=i.scene)instanceof T?o=this.createSceneFromInstance(n,r):"object"==typeof r?o=this.createSceneFromObject(n,r):"function"==typeof r&&(o=this.createSceneFromFunction(n,r)),n=o.sys.settings.key,this.keys[n]=o,this.scenes.push(o),this._data[n]&&(o.sys.settings.data=this._data[n].data,this._data[n].autoStart&&(i.autoStart=!0)),(i.autoStart||o.sys.settings.active)&&this._start.push(n)}for(this._pending.length=0,this._data={},this.isBooted=!0,t=0;t<this._start.length;t++)i=this._start[t],this.start(i);this._start.length=0}},processQueue:function(){var t=this._pending.length,i=this._queue.length;if(0!==t||0!==i){var n,r;if(t){for(n=0;n<t;n++)r=this._pending[n],this.add(r.key,r.scene,r.autoStart,r.data);for(n=0;n<this._start.length;n++)r=this._start[n],this.start(r);return this._start.length=0,void(this._pending.length=0)}for(n=0;n<this._queue.length;n++)this[(r=this._queue[n]).op](r.keyA,r.keyB);this._queue.length=0}},add:function(t,i,n,r){return void 0===n&&(n=!1),void 0===r&&(r={}),this.isProcessing||!this.isBooted?(this._pending.push({key:t,scene:i,autoStart:n,data:r}),this.isBooted||(this._data[t]={data:r}),null):(t=this.getKey(t,i),i instanceof T?o=this.createSceneFromInstance(t,i):"object"==typeof i?(i.key=t,o=this.createSceneFromObject(t,i)):"function"==typeof i&&(o=this.createSceneFromFunction(t,i)),o.sys.settings.data=r,t=o.sys.settings.key,this.keys[t]=o,this.scenes.push(o),(n||o.sys.settings.active)&&(this._pending.length?this._start.push(t):this.start(t)),o);var o},remove:function(t){if(this.isProcessing)this._queue.push({op:"remove",keyA:t,keyB:null});else{var i=this.getScene(t);if(!i||i.sys.isTransitioning())return this;var n=this.scenes.indexOf(i),r=i.sys.settings.key;n>-1&&(delete this.keys[r],this.scenes.splice(n,1),this._start.indexOf(r)>-1&&(n=this._start.indexOf(r),this._start.splice(n,1)),i.sys.destroy())}return this},bootScene:function(t){var i,n=t.sys,r=n.settings;n.sceneUpdate=p,t.init&&(t.init.call(t,r.data),r.status=o.INIT,r.isTransition&&n.events.emit(a.TRANSITION_INIT,r.transitionFrom,r.transitionDuration)),n.load&&(i=n.load).reset(),i&&t.preload?(t.preload.call(t),0===i.list.size?this.create(t):(r.status=o.LOADING,i.once(f.COMPLETE,this.loadComplete,this),i.start())):this.create(t)},loadComplete:function(t){this.create(t.scene)},payloadComplete:function(t){this.bootScene(t.scene)},update:function(t,i){this.processQueue(),this.isProcessing=!0;for(var n=this.scenes.length-1;n>=0;n--){var r=this.scenes[n].sys;r.settings.status>o.START&&r.settings.status<=o.RUNNING&&r.step(t,i)}},render:function(t){for(var i=0;i<this.scenes.length;i++){var n=this.scenes[i].sys;n.settings.visible&&n.settings.status>=o.LOADING&&n.settings.status<o.SLEEPING&&n.render(t)}this.isProcessing=!1},create:function(t){var i=t.sys,n=i.settings;t.create&&(n.status=o.CREATING,t.create.call(t,n.data),n.status===o.DESTROYED)||(n.isTransition&&i.events.emit(a.TRANSITION_START,n.transitionFrom,n.transitionDuration),t.update&&(i.sceneUpdate=t.update),n.status=o.RUNNING,i.events.emit(a.CREATE,t))},createSceneFromFunction:function(t,i){var n=new i;if(n instanceof T){var r=n.sys.settings.key;if(""!==r&&(t=r),this.keys.hasOwnProperty(t))throw new Error("Cannot add a Scene with duplicate key: "+t);return this.createSceneFromInstance(t,n)}return n.sys=new b(n),n.sys.settings.key=t,n.sys.init(this.game),n},createSceneFromInstance:function(t,i){return""===i.sys.settings.key&&(i.sys.settings.key=t),i.sys.init(this.game),i},createSceneFromObject:function(t,i){var n=new T(i),r=n.sys.settings.key;""!==r?t=r:n.sys.settings.key=t,n.sys.init(this.game);for(var o=["init","preload","create","update","render"],a=0;a<o.length;a++){var h=d(i,o[a],null);h&&(n[o[a]]=h)}if(i.hasOwnProperty("extend"))for(var f in i.extend)if(i.extend.hasOwnProperty(f)){var p=i.extend[f];"data"===f&&n.hasOwnProperty("data")&&"object"==typeof p?n.data.merge(p):"sys"!==f&&(n[f]=p)}return n},getKey:function(t,i){if(t||(t="default"),"function"==typeof i)return t;if(i instanceof T?t=i.sys.settings.key:"object"==typeof i&&i.hasOwnProperty("key")&&(t=i.key),this.keys.hasOwnProperty(t))throw new Error("Cannot add a Scene with duplicate key: "+t);return t},getScenes:function(t,i){void 0===t&&(t=!0),void 0===i&&(i=!1);for(var n=[],r=this.scenes,o=0;o<r.length;o++){var a=r[o];a&&(!t||t&&a.sys.isActive())&&n.push(a)}return i?n.reverse():n},getScene:function(t){if("string"==typeof t){if(this.keys[t])return this.keys[t]}else for(var i=0;i<this.scenes.length;i++)if(t===this.scenes[i])return t;return null},isActive:function(t){var i=this.getScene(t);return i?i.sys.isActive():null},isPaused:function(t){var i=this.getScene(t);return i?i.sys.isPaused():null},isVisible:function(t){var i=this.getScene(t);return i?i.sys.isVisible():null},isSleeping:function(t){var i=this.getScene(t);return i?i.sys.isSleeping():null},pause:function(t,i){var n=this.getScene(t);return n&&n.sys.pause(i),this},resume:function(t,i){var n=this.getScene(t);return n&&n.sys.resume(i),this},sleep:function(t,i){var n=this.getScene(t);return n&&!n.sys.isTransitioning()&&n.sys.sleep(i),this},wake:function(t,i){var n=this.getScene(t);return n&&n.sys.wake(i),this},run:function(t,i){var n=this.getScene(t);if(!n){for(var r=0;r<this._pending.length;r++)if(this._pending[r].key===t){this.queueOp("start",t,i);break}return this}n.sys.isSleeping()?n.sys.wake(i):n.sys.isPaused()?n.sys.resume(i):this.start(t,i)},start:function(t,i){if(!this.isBooted)return this._data[t]={autoStart:!0,data:i},this;var n=this.getScene(t);if(n){var r,a=n.sys;if(a.isActive()||a.isPaused())a.shutdown(),a.sceneUpdate=p,a.start(i);else if(a.sceneUpdate=p,a.start(i),a.load&&(r=a.load),r&&a.settings.hasOwnProperty("pack")&&(r.reset(),r.addPack({payload:a.settings.pack})))return a.settings.status=o.LOADING,r.once(f.COMPLETE,this.payloadComplete,this),r.start(),this;this.bootScene(n)}return this},stop:function(t,i){var n=this.getScene(t);return n&&!n.sys.isTransitioning()&&n.sys.shutdown(i),this},switch:function(t,i){var n=this.getScene(t),r=this.getScene(i);return n&&r&&n!==r&&(this.sleep(t),this.isSleeping(i)?this.wake(i):this.start(i)),this},getAt:function(t){return this.scenes[t]},getIndex:function(t){var i=this.getScene(t);return this.scenes.indexOf(i)},bringToTop:function(t){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:t,keyB:null});else{var i=this.getIndex(t);if(-1!==i&&i<this.scenes.length){var n=this.getScene(t);this.scenes.splice(i,1),this.scenes.push(n)}}return this},sendToBack:function(t){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:t,keyB:null});else{var i=this.getIndex(t);if(-1!==i&&i>0){var n=this.getScene(t);this.scenes.splice(i,1),this.scenes.unshift(n)}}return this},moveDown:function(t){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:t,keyB:null});else{var i=this.getIndex(t);if(i>0){var n=i-1,r=this.getScene(t),o=this.getAt(n);this.scenes[i]=o,this.scenes[n]=r}}return this},moveUp:function(t){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:t,keyB:null});else{var i=this.getIndex(t);if(i<this.scenes.length-1){var n=i+1,r=this.getScene(t),o=this.getAt(n);this.scenes[i]=o,this.scenes[n]=r}}return this},moveAbove:function(t,i){if(t===i)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:t,keyB:i});else{var n=this.getIndex(t),r=this.getIndex(i);if(-1!==n&&-1!==r){var o=this.getAt(r);this.scenes.splice(r,1),this.scenes.splice(n+1,0,o)}}return this},moveBelow:function(t,i){if(t===i)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:t,keyB:i});else{var n=this.getIndex(t),r=this.getIndex(i);if(-1!==n&&-1!==r){var o=this.getAt(r);this.scenes.splice(r,1),0===n?this.scenes.unshift(o):this.scenes.splice(n,0,o)}}return this},queueOp:function(t,i,n){return this._queue.push({op:t,keyA:i,keyB:n}),this},swapPosition:function(t,i){if(t===i)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:t,keyB:i});else{var n=this.getIndex(t),r=this.getIndex(i);if(n!==r&&-1!==n&&-1!==r){var o=this.getAt(n);this.scenes[n]=this.scenes[r],this.scenes[r]=o}}return this},dump:function(){for(var t=[],i=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],n=0;n<this.scenes.length;n++){var r=this.scenes[n].sys,a=!r.settings.visible||r.settings.status!==o.RUNNING&&r.settings.status!==o.PAUSED?"[-] ":"[*] ";a+=r.settings.key+" ("+i[r.settings.status]+")",t.push(a)}console.log(t.join("\n"))},destroy:function(){for(var t=0;t<this.scenes.length;t++)this.scenes[t].sys.destroy();this.update=p,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});t.exports=S},function(t,i,n){var r=n(0),o=n(204),a=new r({initialize:function Scene2(t){this.sys=new o(this,t),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});t.exports=a},function(t,i,n){var r=n(2),o=n(205);t.exports=function(t){var i=t.game.config.defaultPhysicsSystem,n=r(t.settings,"physics",!1);if(i||n){var a=[];if(i&&a.push(o(i+"Physics")),n)for(var h in n)h=o(h.concat("Physics")),-1===a.indexOf(h)&&a.push(h);return a}}},function(t,i,n){var r=n(2);t.exports=function(t){var i=t.plugins.getDefaultScenePlugins(),n=r(t.settings,"plugins",!1);return Array.isArray(n)?n:i||[]}},function(t,i,n){var r=n(144),o=n(6),a=n(127),h=n(978),d={create:function(t){return"string"==typeof t?t={key:t}:void 0===t&&(t={}),{status:r.PENDING,key:o(t,"key",""),active:o(t,"active",!1),visible:o(t,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:o(t,"pack",!1),cameras:o(t,"cameras",null),map:o(t,"map",a(h,o(t,"mapAdd",{}))),physics:o(t,"physics",{}),loader:o(t,"loader",{}),plugins:o(t,"plugins",!1),input:o(t,"input",{})}}};t.exports=d},function(t,i,n){var r=n(31),o=n(423),a=n(0),h=n(38),d=n(33),f=n(9),p=n(106),T=n(22),b=n(388),S=n(6),A=n(425),P=n(206),O=new a({Extends:f,initialize:function TextureManager2(t){f.call(this),this.game=t,this.name="TextureManager",this.list={},this._tempCanvas=r.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,t.events.once(T.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(p.LOAD,this.updatePending,this),this.on(p.ERROR,this.updatePending,this);var t=this.game.config;this.addBase64("__DEFAULT",t.defaultImage),this.addBase64("__MISSING",t.missingImage),this.addBase64("__WHITE",t.whiteImage),this.game.events.once(T.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,0===this._pending&&(this.off(p.LOAD),this.off(p.ERROR),this.emit(p.READY))},checkKey:function(t){return!this.exists(t)||(console.error("Texture key already in use: "+t),!1)},remove:function(t){if("string"==typeof t){if(!this.exists(t))return console.warn("No texture found matching key: "+t),this;t=this.get(t)}return this.list.hasOwnProperty(t.key)&&(t.destroy(),this.emit(p.REMOVE,t.key)),this},removeKey:function(t){return this.list.hasOwnProperty(t)&&delete this.list[t],this},addBase64:function(t,i){if(this.checkKey(t)){var n=this,r=new Image;r.onerror=function(){n.emit(p.ERROR,t)},r.onload=function(){var i=n.create(t,r);A.Image(i,0),n.emit(p.ADD,t,i),n.emit(p.LOAD,t,i)},r.src=i}return this},getBase64:function(t,i,n,o){void 0===n&&(n="image/png"),void 0===o&&(o=.92);var a="",h=this.getFrame(t,i);if(h&&(h.source.isRenderTexture||h.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(h){var d=h.canvasData,f=r.create2D(this,d.width,d.height);f.getContext("2d").drawImage(h.source.image,d.x,d.y,d.width,d.height,0,0,d.width,d.height),a=f.toDataURL(n,o),r.remove(f)}return a},addImage:function(t,i,n){var r=null;return this.checkKey(t)&&(r=this.create(t,i),A.Image(r,0),n&&r.setDataSource(n),this.emit(p.ADD,t,r)),r},addGLTexture:function(t,i,n,r){var o=null;return this.checkKey(t)&&(void 0===n&&(n=i.width),void 0===r&&(r=i.height),(o=this.create(t,i,n,r)).add("__BASE",0,0,0,n,r),this.emit(p.ADD,t,o)),o},addRenderTexture:function(t,i){var n=null;return this.checkKey(t)&&((n=this.create(t,i)).add("__BASE",0,0,0,i.width,i.height),this.emit(p.ADD,t,n)),n},generate:function(t,i){if(this.checkKey(t)){var n=r.create(this,1,1);return i.canvas=n,b(i),this.addCanvas(t,n)}return null},createCanvas:function(t,i,n){if(void 0===i&&(i=256),void 0===n&&(n=256),this.checkKey(t)){var o=r.create(this,i,n,d.CANVAS,!0);return this.addCanvas(t,o)}return null},addCanvas:function(t,i,n){void 0===n&&(n=!1);var r=null;return n?r=new o(this,t,i,i.width,i.height):this.checkKey(t)&&(r=new o(this,t,i,i.width,i.height),this.list[t]=r,this.emit(p.ADD,t,r)),r},addAtlas:function(t,i,n,r){return Array.isArray(n.textures)||Array.isArray(n.frames)?this.addAtlasJSONArray(t,i,n,r):this.addAtlasJSONHash(t,i,n,r)},addAtlasJSONArray:function(t,i,n,r){var o=null;if(this.checkKey(t)){if(o=this.create(t,i),Array.isArray(n))for(var a=1===n.length,h=0;h<o.source.length;h++){var d=a?n[0]:n[h];A.JSONArray(o,h,d)}else A.JSONArray(o,0,n);r&&o.setDataSource(r),this.emit(p.ADD,t,o)}return o},addAtlasJSONHash:function(t,i,n,r){var o=null;if(this.checkKey(t)){if(o=this.create(t,i),Array.isArray(n))for(var a=0;a<n.length;a++)A.JSONHash(o,a,n[a]);else A.JSONHash(o,0,n);r&&o.setDataSource(r),this.emit(p.ADD,t,o)}return o},addAtlasXML:function(t,i,n,r){var o=null;return this.checkKey(t)&&(o=this.create(t,i),A.AtlasXML(o,0,n),r&&o.setDataSource(r),this.emit(p.ADD,t,o)),o},addUnityAtlas:function(t,i,n,r){var o=null;return this.checkKey(t)&&(o=this.create(t,i),A.UnityYAML(o,0,n),r&&o.setDataSource(r),this.emit(p.ADD,t,o)),o},addSpriteSheet:function(t,i,n){var r=null;if(this.checkKey(t)){var o=(r=this.create(t,i)).source[0].width,a=r.source[0].height;A.SpriteSheet(r,0,0,0,o,a,n),this.emit(p.ADD,t,r)}return r},addSpriteSheetFromAtlas:function(t,i){if(!this.checkKey(t))return null;var n=S(i,"atlas",null),r=S(i,"frame",null);if(n&&r){var o=this.get(n).get(r);if(o){var a=this.create(t,o.source.image);return o.trimmed?A.SpriteSheetFromAtlas(a,o,i):A.SpriteSheet(a,0,o.cutX,o.cutY,o.cutWidth,o.cutHeight,i),this.emit(p.ADD,t,a),a}}},create:function(t,i,n,r){var o=null;return this.checkKey(t)&&(o=new P(this,t,i,n,r),this.list[t]=o),o},exists:function(t){return this.list.hasOwnProperty(t)},get:function(t){return void 0===t&&(t="__DEFAULT"),this.list[t]?this.list[t]:t instanceof P?t:this.list.__MISSING},cloneFrame:function(t,i){if(this.list[t])return this.list[t].get(i).clone()},getFrame:function(t,i){if(this.list[t])return this.list[t].get(i)},getTextureKeys:function(){var t=[];for(var i in this.list)"__DEFAULT"!==i&&"__MISSING"!==i&&t.push(i);return t},getPixel:function(t,i,n,r){var o=this.getFrame(n,r);if(o){t-=o.x,i-=o.y;var a=o.data.cut;if(t+=a.x,i+=a.y,t>=a.x&&t<a.r&&i>=a.y&&i<a.b){var d=this._tempContext;d.clearRect(0,0,1,1),d.drawImage(o.source.image,t,i,1,1,0,0,1,1);var f=d.getImageData(0,0,1,1);return new h(f.data[0],f.data[1],f.data[2],f.data[3])}}return null},getPixelAlpha:function(t,i,n,r){var o=this.getFrame(n,r);if(o){t-=o.x,i-=o.y;var a=o.data.cut;if(t+=a.x,i+=a.y,t>=a.x&&t<a.r&&i>=a.y&&i<a.b){var h=this._tempContext;return h.clearRect(0,0,1,1),h.drawImage(o.source.image,t,i,1,1,0,0,1,1),h.getImageData(0,0,1,1).data[3]}}return null},setTexture:function(t,i,n){return this.list[i]&&(t.texture=this.list[i],t.frame=t.texture.get(n)),t},renameTexture:function(t,i){var n=this.get(t);return!(!n||t===i||(n.key=i,this.list[i]=n,delete this.list[t],0))},each:function(t,i){for(var n=[null],r=1;r<arguments.length;r++)n.push(arguments[r]);for(var o in this.list)n[0]=this.list[o],t.apply(i,n)},destroy:function(){for(var t in this.list)this.list[t].destroy();this.list={},this.game=null,r.remove(this._tempCanvas)}});t.exports=O},function(t,i,n){var r=n(0),o=n(18),a=n(38),h=n(33),d=n(138),f=n(206),p=new r({Extends:f,initialize:function CanvasTexture2(t,i,n,r,o){f.call(this,t,i,n,r,o),this.add("__BASE",0,0,0,r,o),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=r,this.height=o,this.imageData=this.context.getImageData(0,0,r,o),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===h.WEBGL&&this.refresh(),this},draw:function(t,i,n){return this.context.drawImage(n,t,i),this.update()},drawFrame:function(t,i,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var o=this.manager.getFrame(t,i);if(o){var a=o.canvasData,h=o.cutWidth,d=o.cutHeight,f=o.source.resolution;return this.context.drawImage(o.source.image,a.x,a.y,h,d,n,r,h/f,d/f),this.update()}return this},setPixel:function(t,i,n,r,o,a){if(void 0===a&&(a=255),t=Math.abs(Math.floor(t)),i=Math.abs(Math.floor(i)),this.getIndex(t,i)>-1){var h=this.context.getImageData(t,i,1,1);h.data[0]=n,h.data[1]=r,h.data[2]=o,h.data[3]=a,this.context.putImageData(h,t,i)}return this},putData:function(t,i,n,r,o,a,h){return void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=t.width),void 0===h&&(h=t.height),this.context.putImageData(t,i,n,r,o,a,h),this},getData:function(t,i,n,r){return t=o(Math.floor(t),0,this.width-1),i=o(Math.floor(i),0,this.height-1),n=o(n,1,this.width-t),r=o(r,1,this.height-i),this.context.getImageData(t,i,n,r)},getPixel:function(t,i,n){n||(n=new a);var r=this.getIndex(t,i);if(r>-1){var o=this.data,h=o[r+0],d=o[r+1],f=o[r+2],p=o[r+3];n.setTo(h,d,f,p)}return n},getPixels:function(t,i,n,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=this.width),void 0===r&&(r=n),t=Math.abs(Math.round(t)),i=Math.abs(Math.round(i));for(var h=o(t,0,this.width),d=o(t+n,0,this.width),f=o(i,0,this.height),p=o(i+r,0,this.height),T=new a,b=[],S=f;S<p;S++){for(var A=[],P=h;P<d;P++)T=this.getPixel(P,S,T),A.push({x:P,y:S,color:T.color,alpha:T.alphaGL});b.push(A)}return b},getIndex:function(t,i){return t=Math.abs(Math.round(t)),i=Math.abs(Math.round(i)),t<this.width&&i<this.height?4*(t+i*this.width):-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(t,i,n,r){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=this.width),void 0===r&&(r=this.height),this.context.clearRect(t,i,n,r),this.update()},setSize:function(t,i){return void 0===i&&(i=t),t===this.width&&i===this.height||(this.canvas.width=t,this.canvas.height=i,this._source.width=t,this._source.height=i,this._source.isPowerOf2=d(t,i),this.frames.__BASE.setSize(t,i,0,0),this.width=t,this.height=i,this.refresh()),this},destroy:function(){f.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});t.exports=p},function(t,i,n){var r=n(31),o=n(0),a=n(138),h=n(168),d=new o({initialize:function TextureSource2(t,i,n,r,o){void 0===o&&(o=!1);var d=t.manager.game;this.renderer=d.renderer,this.texture=t,this.source=i,this.image=i,this.compressionAlgorithm=null,this.resolution=1,this.width=n||i.naturalWidth||i.videoWidth||i.width||0,this.height=r||i.naturalHeight||i.videoHeight||i.height||0,this.scaleMode=h.DEFAULT,this.isCanvas=i instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&i instanceof HTMLVideoElement,this.isRenderTexture="RenderTexture"===i.type,this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&i instanceof WebGLTexture,this.isPowerOf2=a(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=o,this.init(d)},init:function(t){var i=this.renderer;i&&(i.gl?this.isCanvas?this.glTexture=i.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=i.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=i.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=i.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),t.config.antialias||this.setFilter(1)},setFilter:function(t){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,t),this.scaleMode=t},setFlipY:function(t){return void 0===t&&(t=!0),this.flipY=t,this},update:function(){var t=this.renderer.gl;t&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):t&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&r.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});t.exports=d},function(t,i,n){t.exports={AtlasXML:n(979),Canvas:n(980),Image:n(981),JSONArray:n(982),JSONHash:n(983),SpriteSheet:n(984),SpriteSheetFromAtlas:n(985),UnityYAML:n(986)}},function(t,i,n){var r=n(427),o=n(430),a=n(432),h={create:function(t){var i=t.config.audio,n=t.device.audio;return i.noAudio||!n.webAudio&&!n.audioData?new o(t):n.webAudio&&!i.disableWebAudio?new a(t):new r(t)}};t.exports=h},function(t,i,n){var r=n(145),o=n(0),a=n(70),h=n(429),d=new o({Extends:r,initialize:function HTML5AudioSoundManager2(t){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,r.call(this,t)},add:function(t,i){var n=new h(this,t,i);return this.sounds.push(n),n},unlock:function(){this.locked=!1;var t=this;if(this.game.cache.audio.entries.each((function(i,n){for(var r=0;r<n.length;r++)if("true"===n[r].dataset.locked)return t.locked=!0,!1;return!0})),this.locked){var i=!1,detectMove=function(){i=!0},unlock=function(){if(i)i=!1;else{document.body.removeEventListener("touchmove",detectMove),document.body.removeEventListener("touchend",unlock);var n=[];if(t.game.cache.audio.entries.each((function(t,i){for(var r=0;r<i.length;r++){var o=i[r];"true"===o.dataset.locked&&n.push(o)}return!0})),0!==n.length){var r=n[n.length-1];r.oncanplaythrough=function(){r.oncanplaythrough=null,n.forEach((function(t){t.dataset.locked="false"})),t.unlocked=!0},n.forEach((function(t){t.load()}))}}};this.once(a.UNLOCKED,(function(){for(this.forEachActiveSound((function(t){null===t.currentMarker&&0===t.duration&&(t.duration=t.tags[0].duration),t.totalDuration=t.tags[0].duration}));this.lockedActionsQueue.length;){var t=this.lockedActionsQueue.shift();t.sound[t.prop].apply?t.sound[t.prop].apply(t.sound,t.value||[]):t.sound[t.prop]=t.value}}),this),document.body.addEventListener("touchmove",detectMove,!1),document.body.addEventListener("touchend",unlock,!1)}},onBlur:function(){this.forEachActiveSound((function(t){t.isPlaying&&(this.onBlurPausedSounds.push(t),t.onBlur())}))},onFocus:function(){this.onBlurPausedSounds.forEach((function(t){t.onFocus()})),this.onBlurPausedSounds.length=0},destroy:function(){r.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(t,i,n){return"true"===t.tags[0].dataset.locked&&(this.lockedActionsQueue.push({sound:t,prop:i,value:n}),!0)},setMute:function(t){return this.mute=t,this},mute:{get:function(){return this._mute},set:function(t){this._mute=t,this.forEachActiveSound((function(t){t.updateMute()})),this.emit(a.GLOBAL_MUTE,this,t)}},setVolume:function(t){return this.volume=t,this},volume:{get:function(){return this._volume},set:function(t){this._volume=t,this.forEachActiveSound((function(t){t.updateVolume()})),this.emit(a.GLOBAL_VOLUME,this,t)}}});t.exports=d},function(t,i,n){var r=n(78);t.exports=function(t,i,n,o,a){if(void 0===o&&(o=0),void 0===a&&(a=t.length),r(t,o,a))for(var h=o;h<a;h++){var d=t[h];if(!i||i&&void 0===n&&d.hasOwnProperty(i)||i&&void 0!==n&&d[i]===n)return d}return null}},function(t,i,n){var r=n(146),o=n(0),a=n(70),h=n(18),d=new o({Extends:r,initialize:function HTML5AudioSound2(t,i,n){if(void 0===n&&(n={}),this.tags=t.game.cache.audio.get(i),!this.tags)throw new Error('There is no audio asset with key "'+i+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,r.call(this,t,i,n)},play:function(t,i){return!(this.manager.isLocked(this,"play",[t,i])||!r.prototype.play.call(this,t,i)||!this.pickAndPlayAudioTag()||(this.emit(a.PLAY,this),0))},pause:function(){return!(this.manager.isLocked(this,"pause")||this.startTime>0||!r.prototype.pause.call(this)||(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(a.PAUSE,this),0))},resume:function(){return!(this.manager.isLocked(this,"resume")||this.startTime>0||!r.prototype.resume.call(this)||!this.pickAndPlayAudioTag()||(this.emit(a.RESUME,this),0))},stop:function(){return!this.manager.isLocked(this,"stop")&&!!r.prototype.stop.call(this)&&(this.stopAndReleaseAudioTag(),this.emit(a.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var t=this.currentConfig.seek,i=this.currentConfig.delay,n=(this.currentMarker?this.currentMarker.start:0)+t;return this.previousTime=n,this.audio.currentTime=n,this.applyConfig(),0===i?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+1e3*i,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var t=0;t<this.tags.length;t++){var i=this.tags[t];if("false"===i.dataset.used)return i.dataset.used="true",this.audio=i,!0}if(!this.manager.override)return!1;var n=[];this.manager.forEachActiveSound((function(t){t.key===this.key&&t.audio&&n.push(t)}),this),n.sort((function(t,i){return t.loop===i.loop?i.seek/i.duration-t.seek/t.duration:t.loop?1:-1}));var r=n[0];return this.audio=r.audio,r.reset(),r.audio=null,r.startTime=0,r.previousTime=0,!0},playCatchPromise:function(){var t=this.audio.play();t&&t.catch((function(t){console.warn(t)}))},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){r.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(t){if(this.isPlaying)if(this.startTime>0)this.startTime<t-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,t-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());else{var i=this.currentMarker?this.currentMarker.start:0,n=i+this.duration,r=this.audio.currentTime;if(this.currentConfig.loop)r>=n-this.manager.loopEndOffset?(this.audio.currentTime=i+Math.max(0,r-n),r=this.audio.currentTime):r<i&&(this.audio.currentTime+=i,r=this.audio.currentTime),r<this.previousTime&&this.emit(a.LOOPED,this);else if(r>=n)return this.reset(),this.stopAndReleaseAudioTag(),void this.emit(a.COMPLETE,this);this.previousTime=r}},destroy:function(){r.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=h(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){r.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(t){this.currentConfig.mute=t,this.manager.isLocked(this,"mute",t)||(this.updateMute(),this.emit(a.MUTE,this,t))}},setMute:function(t){return this.mute=t,this},volume:{get:function(){return this.currentConfig.volume},set:function(t){this.currentConfig.volume=t,this.manager.isLocked(this,"volume",t)||(this.updateVolume(),this.emit(a.VOLUME,this,t))}},setVolume:function(t){return this.volume=t,this},rate:{get:function(){return this.currentConfig.rate},set:function(t){this.currentConfig.rate=t,this.manager.isLocked(this,a.RATE,t)||(this.calculateRate(),this.emit(a.RATE,this,t))}},setRate:function(t){return this.rate=t,this},detune:{get:function(){return this.currentConfig.detune},set:function(t){this.currentConfig.detune=t,this.manager.isLocked(this,a.DETUNE,t)||(this.calculateRate(),this.emit(a.DETUNE,this,t))}},setDetune:function(t){return this.detune=t,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(t){this.manager.isLocked(this,"seek",t)||this.startTime>0||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.isPlaying?(this.previousTime=t,this.audio.currentTime=t):this.isPaused&&(this.currentConfig.seek=t),this.emit(a.SEEK,this,t))}},setSeek:function(t){return this.seek=t,this},loop:{get:function(){return this.currentConfig.loop},set:function(t){this.currentConfig.loop=t,this.manager.isLocked(this,"loop",t)||(this.audio&&(this.audio.loop=t),this.emit(a.LOOP,this,t))}},setLoop:function(t){return this.loop=t,this},pan:{get:function(){return this.currentConfig.pan},set:function(t){this.currentConfig.pan=t,this.emit(a.PAN,this,t)}},setPan:function(t){return this.pan=t,this}});t.exports=d},function(t,i,n){var r=n(145),o=n(0),a=n(9),h=n(431),d=n(1),f=new o({Extends:a,initialize:function NoAudioSoundManager2(t){a.call(this),this.game=t,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(t,i){var n=new h(this,t,i);return this.sounds.push(n),n},addAudioSprite:function(t,i){var n=this.add(t,i);return n.spritemap={},n},play:function(t,i){return!1},playAudioSprite:function(t,i,n){return!1},remove:function(t){return r.prototype.remove.call(this,t)},removeByKey:function(t){return r.prototype.removeByKey.call(this,t)},pauseAll:d,resumeAll:d,stopAll:d,update:d,setRate:d,setDetune:d,setMute:d,setVolume:d,forEachActiveSound:function(t,i){r.prototype.forEachActiveSound.call(this,t,i)},destroy:function(){r.prototype.destroy.call(this)}});t.exports=f},function(t,i,n){var r=n(146),o=n(0),a=n(9),h=n(17),returnFalse=function(){return!1},returnThis=function(){return this},d=new o({Extends:a,initialize:function NoAudioSound2(t,i,n){void 0===n&&(n={}),a.call(this),this.manager=t,this.key=i,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=h({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},n),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:returnFalse,updateMarker:returnFalse,removeMarker:function(){return null},play:returnFalse,pause:returnFalse,resume:returnFalse,stop:returnFalse,destroy:function(){r.prototype.destroy.call(this)},setMute:returnThis,setVolume:returnThis,setRate:returnThis,setDetune:returnThis,setSeek:returnThis,setLoop:returnThis,setPan:returnThis});t.exports=d},function(t,i,n){var r=n(433),o=n(145),a=n(0),h=n(70),d=n(22),f=n(434),p=new a({Extends:o,initialize:function WebAudioSoundManager2(t){this.context=this.createAudioContext(t),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked="suspended"===this.context.state&&("ontouchstart"in window||"onclick"in window),o.call(this,t),this.locked&&t.isBooted?this.unlock():t.events.once(d.BOOT,this.unlock,this)},createAudioContext:function(t){var i=t.config.audio;return i.context?(i.context.resume(),i.context):window.hasOwnProperty("AudioContext")?new AudioContext:window.hasOwnProperty("webkitAudioContext")?new window.webkitAudioContext:void 0},setAudioContext:function(t){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=t,this.masterMuteNode=t.createGain(),this.masterVolumeNode=t.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(t.destination),this.destination=this.masterMuteNode,this},add:function(t,i){var n=new f(this,t,i);return this.sounds.push(n),n},decodeAudio:function(t,i){var n;n=Array.isArray(t)?t:[{key:t,data:i}];for(var o=this.game.cache.audio,a=n.length,d=0;d<n.length;d++){var f=n[d],p=f.key,T=f.data;"string"==typeof T&&(T=r(T));var b=function(t,i){o.add(t,i),this.emit(h.DECODED,t),0==--a&&this.emit(h.DECODED_ALL)}.bind(this,p),S=function(t,i){console.error("Error decoding audio: "+t+" - ",i?i.message:""),0==--a&&this.emit(h.DECODED_ALL)}.bind(this,p);this.context.decodeAudioData(T,b,S)}},unlock:function(){var t=this,i=document.body,n=function unlockHandler2(){if(t.context&&i){var n=i.removeEventListener;t.context.resume().then((function(){n("touchstart",unlockHandler2),n("touchend",unlockHandler2),n("click",unlockHandler2),n("keydown",unlockHandler2),t.unlocked=!0}),(function(){n("touchstart",unlockHandler2),n("touchend",unlockHandler2),n("click",unlockHandler2),n("keydown",unlockHandler2)}))}};i&&(i.addEventListener("touchstart",n,!1),i.addEventListener("touchend",n,!1),i.addEventListener("click",n,!1),i.addEventListener("keydown",n,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var t=this.context;"suspended"!==t.state&&"interrupted"!==t.state||this.locked||t.resume()},update:function(t,i){o.prototype.update.call(this,t,i);var n=this.context;n&&"interrupted"===n.state&&n.resume()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var t=this;this.context.close().then((function(){t.context=null}))}o.prototype.destroy.call(this)},setMute:function(t){return this.mute=t,this},mute:{get:function(){return 0===this.masterMuteNode.gain.value},set:function(t){this.masterMuteNode.gain.setValueAtTime(t?0:1,0),this.emit(h.GLOBAL_MUTE,this,t)}},setVolume:function(t){return this.volume=t,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(t){this.masterVolumeNode.gain.setValueAtTime(t,0),this.emit(h.GLOBAL_VOLUME,this,t)}}});t.exports=p},function(t,i){for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(256),o=0;o<n.length;o++)r[n.charCodeAt(o)]=o;t.exports=function(t){var i,n,o,a,h=(t=t.substr(t.indexOf(",")+1)).length,d=.75*h,f=0;"="===t[h-1]&&(d--,"="===t[h-2]&&d--);for(var p=new ArrayBuffer(d),T=new Uint8Array(p),b=0;b<h;b+=4)i=r[t.charCodeAt(b)],n=r[t.charCodeAt(b+1)],o=r[t.charCodeAt(b+2)],a=r[t.charCodeAt(b+3)],T[f++]=i<<2|n>>4,T[f++]=(15&n)<<4|o>>2,T[f++]=(3&o)<<6|63&a;return p}},function(t,i,n){var r=n(146),o=n(0),a=n(70),h=new o({Extends:r,initialize:function WebAudioSound2(t,i,n){if(void 0===n&&(n={}),this.audioBuffer=t.game.cache.audio.get(i),!this.audioBuffer)throw new Error('Audio key "'+i+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=t.context.createGain(),this.volumeNode=t.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),t.context.createStereoPanner?(this.pannerNode=t.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(t.destination)):this.volumeNode.connect(t.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,r.call(this,t,i,n)},play:function(t,i){return!!r.prototype.play.call(this,t,i)&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(a.PLAY,this),!0)},pause:function(){return!(this.manager.context.currentTime<this.startTime||!r.prototype.pause.call(this)||(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(a.PAUSE,this),0))},resume:function(){return!(this.manager.context.currentTime<this.startTime||!r.prototype.resume.call(this)||(this.createAndStartBufferSource(),this.emit(a.RESUME,this),0))},stop:function(){return!!r.prototype.stop.call(this)&&(this.stopAndRemoveBufferSource(),this.emit(a.STOP,this),!0)},createAndStartBufferSource:function(){var t=this.currentConfig.seek,i=this.currentConfig.delay,n=this.manager.context.currentTime+i,r=(this.currentMarker?this.currentMarker.start:0)+t,o=this.duration-t;this.playTime=n-t,this.startTime=n,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,n),Math.max(0,r),Math.max(0,o)),this.resetConfig()},createAndStartLoopBufferSource:function(){var t=this.getLoopTime(),i=this.currentMarker?this.currentMarker.start:0,n=this.duration;this.loopTime=t,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,t),Math.max(0,i),Math.max(0,n))},createBufferSource:function(){var t=this,i=this.manager.context.createBufferSource();return i.buffer=this.audioBuffer,i.connect(this.muteNode),i.onended=function(i){i.target===t.source&&(t.currentConfig.loop?t.hasLooped=!0:t.hasEnded=!0)},i},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),r.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,r.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(a.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(a.LOOPED,this))},destroy:function(){r.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){r.prototype.calculateRate.call(this);var t=this.manager.context.currentTime;this.source&&"number"==typeof this.totalRate&&this.source.playbackRate.setValueAtTime(this.totalRate,t),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,t)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var t=0,i=0;i<this.rateUpdates.length;i++)t+=((i<this.rateUpdates.length-1?this.rateUpdates[i+1].time:this.manager.context.currentTime-this.playTime)-this.rateUpdates[i].time)*this.rateUpdates[i].rate;return t},getLoopTime:function(){for(var t=0,i=0;i<this.rateUpdates.length-1;i++)t+=(this.rateUpdates[i+1].time-this.rateUpdates[i].time)*this.rateUpdates[i].rate;var n=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+n.time+(this.duration-t)/n.rate},rate:{get:function(){return this.currentConfig.rate},set:function(t){this.currentConfig.rate=t,this.calculateRate(),this.emit(a.RATE,this,t)}},setRate:function(t){return this.rate=t,this},detune:{get:function(){return this.currentConfig.detune},set:function(t){this.currentConfig.detune=t,this.calculateRate(),this.emit(a.DETUNE,this,t)}},setDetune:function(t){return this.detune=t,this},mute:{get:function(){return 0===this.muteNode.gain.value},set:function(t){this.currentConfig.mute=t,this.muteNode.gain.setValueAtTime(t?0:1,0),this.emit(a.MUTE,this,t)}},setMute:function(t){return this.mute=t,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(t){this.currentConfig.volume=t,this.volumeNode.gain.setValueAtTime(t,0),this.emit(a.VOLUME,this,t)}},setVolume:function(t){return this.volume=t,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(t){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.currentConfig.seek=t,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(a.SEEK,this,t))}},setSeek:function(t){return this.seek=t,this},loop:{get:function(){return this.currentConfig.loop},set:function(t){this.currentConfig.loop=t,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),t&&this.createAndStartLoopBufferSource()),this.emit(a.LOOP,this,t)}},setLoop:function(t){return this.loop=t,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(t){this.currentConfig.pan=t,this.pannerNode&&this.pannerNode.pan.setValueAtTime(t,this.manager.context.currentTime),this.emit(a.PAN,this,t)}},setPan:function(t){return this.pan=t,this}});t.exports=h},function(t,i){t.exports=function(t){for(var i=t.length,n=t[0].length,r=new Array(n),o=0;o<n;o++){r[o]=new Array(i);for(var a=i-1;a>-1;a--)r[o][a]=t[a][o]}return r}},function(t,i){function swap(t,i,n){var r=t[i];t[i]=t[n],t[n]=r}function defaultCompare(t,i){return t<i?-1:t>i?1:0}var QuickSelect=function(t,i,n,r,o){for(void 0===n&&(n=0),void 0===r&&(r=t.length-1),void 0===o&&(o=defaultCompare);r>n;){if(r-n>600){var a=r-n+1,h=i-n+1,d=Math.log(a),f=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*f*(a-f)/a)*(h-a/2<0?-1:1),T=Math.max(n,Math.floor(i-h*f/a+p)),b=Math.min(r,Math.floor(i+(a-h)*f/a+p));QuickSelect(t,i,T,b,o)}var S=t[i],A=n,P=r;for(swap(t,n,i),o(t[r],S)>0&&swap(t,n,r);A<P;){for(swap(t,A,P),A++,P--;o(t[A],S)<0;)A++;for(;o(t[P],S)>0;)P--}0===o(t[n],S)?swap(t,n,P):swap(t,++P,r),P<=i&&(n=P+1),i<=P&&(r=P-1)}};t.exports=QuickSelect},function(t,i,n){var r=n(6),o=n(131),BuildChunk=function(t,i,n){for(var r=[],o=0;o<t.length;o++)for(var a=0;a<i.length;a++)for(var h=0;h<n;h++)r.push({a:t[o],b:i[a]});return r};t.exports=function(t,i,n){var a=r(n,"max",0),h=r(n,"qty",1),d=r(n,"random",!1),f=r(n,"randomB",!1),p=r(n,"repeat",0),T=r(n,"yoyo",!1),b=[];if(f&&o(i),-1===p)if(0===a)p=0;else{var S=t.length*i.length*h;T&&(S*=2),p=Math.ceil(a/S)}for(var A=0;A<=p;A++){var P=BuildChunk(t,i,h);d&&o(P),b=b.concat(P),T&&(P.reverse(),b=b.concat(P))}return a&&b.splice(a),b}},function(t,i,n){t.exports={PROCESS_QUEUE_ADD:n(1041),PROCESS_QUEUE_REMOVE:n(1042)}},function(t,i,n){var r=n(13);t.exports=function(t,i){var n=r(i,"anims",null);if(null===n)return t;if("string"==typeof n)t.anims.play(n);else if("object"==typeof n){var o=t.anims,a=r(n,"key",void 0);if(a){var h=r(n,"startFrame",void 0),d=r(n,"delay",0),f=r(n,"repeat",0),p=r(n,"repeatDelay",0),T=r(n,"yoyo",!1),b=r(n,"play",!1),S=r(n,"delayedPlay",0),A={key:a,delay:d,repeat:f,repeatDelay:p,yoyo:T,startFrame:h};b?o.play(A):S>0?o.playAfterDelay(A,S):o.load(A)}}return t}},function(t,i,n){var r=n(0),o=n(109),a=new r({initialize:function Bob2(t,i,n,r,o){this.parent=t,this.x=i,this.y=n,this.frame=r,this.data={},this.tint=16777215,this._visible=o,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(t){return void 0===t?this.frame=this.parent.frame:t instanceof o&&t.texture===this.parent.texture?this.frame=t:this.frame=this.parent.texture.get(t),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(t,i,n){return this.x=t,this.y=i,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,n&&this.setFrame(n),this},setPosition:function(t,i){return this.x=t,this.y=i,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,i){return this.flipX=t,this.flipY=i,this},setVisible:function(t){return this.visible=t,this},setAlpha:function(t){return this.alpha=t,this},setTint:function(t){return this.tint=t,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(t){this.parent.dirty|=this._visible!==t,this._visible=t}},alpha:{get:function(){return this._alpha},set:function(t){this.parent.dirty|=this._alpha>0!=t>0,this._alpha=t}}});t.exports=a},function(t,i,n){var r=n(10);t.exports=function(t,i,n){void 0===n&&(n=new r);var o=Math.min(t.x,i.x),a=Math.min(t.y,i.y),h=Math.max(t.right,i.right)-o,d=Math.max(t.bottom,i.bottom)-a;return n.setTo(o,a,h,d)}},function(t,i,n){var r=n(0),o=n(11),a=n(1055),h=n(15),d=n(7),f=n(202),p=n(20),T=n(140),b=new r({Extends:h,Mixins:[o.AlphaSingle,o.BlendMode,o.Depth,o.Origin,o.ScrollFactor,o.Transform,o.Visible,a],initialize:function DOMElement2(t,i,n,r,o,a){h.call(this,t,"DOMElement"),this.parent=t.sys.game.domContainer,this.cache=t.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new T,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(i,n),"string"==typeof r?"#"===r[0]?this.setElement(r.substr(1),o,a):this.createElement(r,o,a):r&&this.setElement(r,o,a),t.sys.events.on(p.SLEEP,this.handleSceneEvent,this),t.sys.events.on(p.WAKE,this.handleSceneEvent,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function(t){var i=this.node,n=i.style;i&&(n.display=t.settings.visible?"block":"none")},setSkew:function(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.skewX=t,this.skewY=i,this},setPerspective:function(t){return this.parent.style.perspective=t+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(t){this.parent.style.perspective=t+"px"}},addListener:function(t){if(this.node){t=t.split(" ");for(var i=0;i<t.length;i++)this.node.addEventListener(t[i],this.handler,!1)}return this},removeListener:function(t){if(this.node){t=t.split(" ");for(var i=0;i<t.length;i++)this.node.removeEventListener(t[i],this.handler)}return this},dispatchNativeEvent:function(t){this.emit(t.type,t)},createElement:function(t,i,n){return this.setElement(document.createElement(t),i,n)},setElement:function(t,i,n){var r;if(this.removeElement(),"string"==typeof t?("#"===t[0]&&(t=t.substr(1)),r=document.getElementById(t)):"object"==typeof t&&1===t.nodeType&&(r=t),!r)return this;if(this.node=r,i&&d(i))for(var o in i)r.style[o]=i[o];else"string"==typeof i&&(r.style=i);return r.style.zIndex="0",r.style.display="inline",r.style.position="absolute",r.phaser=this,this.parent&&this.parent.appendChild(r),n&&(r.innerText=n),this.updateSize()},createFromCache:function(t,i){var n=this.cache.get(t);return n&&this.createFromHTML(n,i),this},createFromHTML:function(t,i){void 0===i&&(i="div"),this.removeElement();var n=document.createElement(i);return this.node=n,n.style.zIndex="0",n.style.display="inline",n.style.position="absolute",n.phaser=this,this.parent&&this.parent.appendChild(n),n.innerHTML=t,this.updateSize()},removeElement:function(){return this.node&&(f(this.node),this.node=null),this},updateSize:function(){var t=this.node,i=t.getBoundingClientRect();return this.width=t.clientWidth,this.height=t.clientHeight,this.displayWidth=i.width||0,this.displayHeight=i.height||0,this},getChildByProperty:function(t,i){if(this.node)for(var n=this.node.querySelectorAll("*"),r=0;r<n.length;r++)if(n[r][t]===i)return n[r];return null},getChildByID:function(t){return this.getChildByProperty("id",t)},getChildByName:function(t){return this.getChildByProperty("name",t)},setClassName:function(t){return this.node&&(this.node.className=t,this.updateSize()),this},setText:function(t){return this.node&&(this.node.innerText=t,this.updateSize()),this},setHTML:function(t){return this.node&&(this.node.innerHTML=t,this.updateSize()),this},preUpdate:function(){var t=this.parentContainer,i=this.node;i&&t&&!t.willRender()&&(i.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(p.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(p.WAKE,this.handleSceneEvent,this)}});t.exports=b},function(t,i,n){var r=n(1056),o=n(15),a=n(25),h=new a,d=new a,f=new a;t.exports=function(t,i,n,a){if(i.node){var p=i.node.style,T=i.scene.sys.settings;if(!p||!T.visible||o.RENDER_MASK!==i.renderFlags||0!==i.cameraFilter&&i.cameraFilter&n.id||i.parentContainer&&!i.parentContainer.willRender())p.display="none";else{var b=i.parentContainer,S=n.alpha*i.alpha;b&&(S*=b.alpha);var A=h,P=d,O=f,L=0,D=0,I="0%",F="0%";a?(L=i.width*i.scaleX*i.originX,D=i.height*i.scaleY*i.originY,P.applyITRS(i.x-L,i.y-D,i.rotation,i.scaleX,i.scaleY),A.copyFrom(n.matrix),A.multiplyWithOffset(a,-n.scrollX*i.scrollFactorX,-n.scrollY*i.scrollFactorY),P.e=i.x-L,P.f=i.y-D,A.multiply(P,O)):(L=i.width*i.originX,D=i.height*i.originY,P.applyITRS(i.x-L,i.y-D,i.rotation,i.scaleX,i.scaleY),A.copyFrom(n.matrix),I=100*i.originX+"%",F=100*i.originY+"%",P.e-=n.scrollX*i.scrollFactorX,P.f-=n.scrollY*i.scrollFactorY,A.multiply(P,O)),i.transformOnly||(p.display="block",p.opacity=S,p.zIndex=i._depth,p.pointerEvents=i.pointerEvents,p.mixBlendMode=r[i._blendMode]),p.transform=O.getCSSMatrix()+" skew("+i.skewX+"rad, "+i.skewY+"rad) rotate3d("+i.rotate3d.x+","+i.rotate3d.y+","+i.rotate3d.z+","+i.rotate3d.w+i.rotate3dAngle+")",p.transformOrigin=I+" "+F}}}},function(t,i,n){var r=n(0),o=n(11),a=n(15),h=n(1060),d=new r({Extends:a,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.Flip,o.Origin,o.ScrollFactor,o.Size,o.Texture,o.Tint,o.Transform,o.Visible,h],initialize:function Extern2(t){a.call(this,t,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});t.exports=d},function(t,i,n){var r=n(218),o=n(98),a=n(14),h=n(4);t.exports=function(t,i,n){void 0===n&&(n=new h);var d=o(i,0,a.PI2);return r(t,d,n)}},function(t,i,n){var r=n(447),o=n(218),a=n(98),h=n(14);t.exports=function(t,i,n,d){void 0===d&&(d=[]),!i&&n>0&&(i=r(t)/n);for(var f=0;f<i;f++){var p=a(f/i,0,h.PI2);d.push(o(t,p))}return d}},function(t,i){t.exports=function(t){var i=t.width/2,n=t.height/2,r=Math.pow(i-n,2)/Math.pow(i+n,2);return Math.PI*(i+n)*(1+3*r/(10+Math.sqrt(4-3*r)))}},function(t,i,n){var r=n(217),o=n(30);t.exports=function(t,i,n,a,h,d){var f=i.commandBuffer,p=f.length,T=h||t.currentContext;if(0!==p&&o(t,T,i,n,a)){n.addToRenderList(i);var b=1,S=1,A=0,P=0,O=1,L=0,D=0,I=0;T.beginPath();for(var F=0;F<p;++F)switch(f[F]){case r.ARC:T.arc(f[F+1],f[F+2],f[F+3],f[F+4],f[F+5],f[F+6]),F+=7;break;case r.LINE_STYLE:O=f[F+1],A=f[F+2],b=f[F+3],L=(16711680&A)>>>16,D=(65280&A)>>>8,I=255&A,T.strokeStyle="rgba("+L+","+D+","+I+","+b+")",T.lineWidth=O,F+=3;break;case r.FILL_STYLE:P=f[F+1],S=f[F+2],L=(16711680&P)>>>16,D=(65280&P)>>>8,I=255&P,T.fillStyle="rgba("+L+","+D+","+I+","+S+")",F+=2;break;case r.BEGIN_PATH:T.beginPath();break;case r.CLOSE_PATH:T.closePath();break;case r.FILL_PATH:d||T.fill();break;case r.STROKE_PATH:d||T.stroke();break;case r.FILL_RECT:d?T.rect(f[F+1],f[F+2],f[F+3],f[F+4]):T.fillRect(f[F+1],f[F+2],f[F+3],f[F+4]),F+=4;break;case r.FILL_TRIANGLE:T.beginPath(),T.moveTo(f[F+1],f[F+2]),T.lineTo(f[F+3],f[F+4]),T.lineTo(f[F+5],f[F+6]),T.closePath(),d||T.fill(),F+=6;break;case r.STROKE_TRIANGLE:T.beginPath(),T.moveTo(f[F+1],f[F+2]),T.lineTo(f[F+3],f[F+4]),T.lineTo(f[F+5],f[F+6]),T.closePath(),d||T.stroke(),F+=6;break;case r.LINE_TO:T.lineTo(f[F+1],f[F+2]),F+=2;break;case r.MOVE_TO:T.moveTo(f[F+1],f[F+2]),F+=2;break;case r.LINE_FX_TO:T.lineTo(f[F+1],f[F+2]),F+=5;break;case r.MOVE_FX_TO:T.moveTo(f[F+1],f[F+2]),F+=5;break;case r.SAVE:T.save();break;case r.RESTORE:T.restore();break;case r.TRANSLATE:T.translate(f[F+1],f[F+2]),F+=2;break;case r.SCALE:T.scale(f[F+1],f[F+2]),F+=2;break;case r.ROTATE:T.rotate(f[F+1]),F+=1;break;case r.GRADIENT_FILL_STYLE:F+=5;break;case r.GRADIENT_LINE_STYLE:F+=6}T.restore()}}},function(t,i,n){var r=n(0),o=n(137),a=n(80),h=n(2),d=n(68),f=new r({initialize:function EmitterOp2(t,i,n,r){void 0===r&&(r=!1),this.propertyKey=i,this.propertyValue=n,this.defaultValue=n,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=r,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(t)},loadConfig:function(t,i){void 0===t&&(t={}),i&&(this.propertyKey=i),this.propertyValue=h(t,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(t){return this.propertyValue=t,this.setMethods()},setMethods:function(){var t=this.propertyValue,i=typeof t;if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,"number"===i)this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(t))this.onEmit=this.randomStaticValueEmit;else if("function"===i)this.emitOnly?this.onEmit=t:this.onUpdate=t;else if("object"===i&&this.hasBoth(t,"start","end")){this.start=t.start,this.end=t.end;var n=this.has(t,"random");if(n&&(this.onEmit=this.randomRangedValueEmit),this.has(t,"steps"))this.steps=t.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var r=this.has(t,"ease")?t.ease:"Linear";this.ease=a(r,t.easeParams),n||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if("object"===i&&this.hasBoth(t,"min","max"))this.start=t.min,this.end=t.max,this.onEmit=this.randomRangedValueEmit;else if("object"===i&&this.has(t,"random")){var o=t.random;Array.isArray(o)&&(this.start=o[0],this.end=o[1]),this.onEmit=this.randomRangedValueEmit}else"object"===i&&this.hasEither(t,"onEmit","onUpdate")&&(this.has(t,"onEmit")&&(this.onEmit=t.onEmit),this.has(t,"onUpdate")&&(this.onUpdate=t.onUpdate));return this},has:function(t,i){return t.hasOwnProperty(i)},hasBoth:function(t,i,n){return t.hasOwnProperty(i)&&t.hasOwnProperty(n)},hasEither:function(t,i,n){return t.hasOwnProperty(i)||t.hasOwnProperty(n)},defaultEmit:function(t,i,n){return n},defaultUpdate:function(t,i,n,r){return r},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var t=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[t]},randomRangedValueEmit:function(t,i){var n=o(this.start,this.end);return t&&t.data[i]&&(t.data[i].min=n),n},steppedEmit:function(){var t=this.counter,i=this.counter+(this.end-this.start)/this.steps;return this.counter=d(i,this.start,this.end),t},easedValueEmit:function(t,i){if(t&&t.data[i]){var n=t.data[i];n.min=this.start,n.max=this.end}return this.start},easeValueUpdate:function(t,i,n){var r=t.data[i];return(r.max-r.min)*this.ease(n)+r.min}});t.exports=f},function(t,i,n){var r=n(0),o=n(2),a=new r({initialize:function GravityWell2(t,i,n,r,a){if("object"==typeof t){var h=t;t=o(h,"x",0),i=o(h,"y",0),n=o(h,"power",0),r=o(h,"epsilon",100),a=o(h,"gravity",50)}else void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=100),void 0===a&&(a=50);this.x=t,this.y=i,this.active=!0,this._gravity=a,this._power=0,this._epsilon=0,this.power=n,this.epsilon=r},update:function(t,i){var n=this.x-t.x,r=this.y-t.y,o=n*n+r*r;if(0!==o){var a=Math.sqrt(o);o<this._epsilon&&(o=this._epsilon);var h=this._power*i/(o*a)*100;t.velocityX+=n*h,t.velocityY+=r*h}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(t){this._epsilon=t*t}},power:{get:function(){return this._power/this._gravity},set:function(t){this._power=t*this._gravity}},gravity:{get:function(){return this._gravity},set:function(t){var i=this.power;this._gravity=t,this.power=i}}});t.exports=a},function(t,i,n){var r=n(0),o=n(36),a=n(50),h=new r({initialize:function Particle2(t){this.emitter=t,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(t,i){var n=this.emitter;this.frame=n.getFrame(),n.emitZone&&n.emitZone.getPoint(this),this.x+=void 0===t?n.x.onEmit(this,"x"):t,this.y+=void 0===i?n.y.onEmit(this,"y"):i,this.life=n.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var r=n.speedX.onEmit(this,"speedX"),h=n.speedY?n.speedY.onEmit(this,"speedY"):r;if(n.radial){var d=o(n.angle.onEmit(this,"angle"));this.velocityX=Math.cos(d)*Math.abs(r),this.velocityY=Math.sin(d)*Math.abs(h)}else if(n.moveTo){var f=n.moveToX.onEmit(this,"moveToX"),p=n.moveToY?n.moveToY.onEmit(this,"moveToY"):f,T=Math.atan2(p-this.y,f-this.x),b=a(this.x,this.y,f,p)/(this.life/1e3);this.velocityX=Math.cos(T)*b,this.velocityY=Math.sin(T)*b}else this.velocityX=r,this.velocityY=h;n.acceleration&&(this.accelerationX=n.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=n.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=n.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=n.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=n.delay.onEmit(this,"delay"),this.scaleX=n.scaleX.onEmit(this,"scaleX"),this.scaleY=n.scaleY?n.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=n.rotate.onEmit(this,"rotate"),this.rotation=o(this.angle),this.bounce=n.bounce.onEmit(this,"bounce"),this.alpha=n.alpha.onEmit(this,"alpha"),this.tint=n.tint.onEmit(this,"tint")},computeVelocity:function(t,i,n,r){var o=this.velocityX,a=this.velocityY,h=this.accelerationX,d=this.accelerationY,f=this.maxVelocityX,p=this.maxVelocityY;o+=t.gravityX*n,a+=t.gravityY*n,h&&(o+=h*n),d&&(a+=d*n),o>f?o=f:o<-f&&(o=-f),a>p?a=p:a<-p&&(a=-p),this.velocityX=o,this.velocityY=a;for(var T=0;T<r.length;T++)r[T].update(this,i,n)},checkBounds:function(t){var i=t.bounds,n=-this.bounce;this.x<i.x&&t.collideLeft?(this.x=i.x,this.velocityX*=n):this.x>i.right&&t.collideRight&&(this.x=i.right,this.velocityX*=n),this.y<i.y&&t.collideTop?(this.y=i.y,this.velocityY*=n):this.y>i.bottom&&t.collideBottom&&(this.y=i.bottom,this.velocityY*=n)},update:function(t,i,n){if(this.delayCurrent>0)return this.delayCurrent-=t,!1;var r=this.emitter,a=1-this.lifeCurrent/this.life;return this.lifeT=a,this.computeVelocity(r,t,i,n),this.x+=this.velocityX*i,this.y+=this.velocityY*i,r.bounds&&this.checkBounds(r),r.deathZone&&r.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=r.scaleX.onUpdate(this,"scaleX",a,this.scaleX),r.scaleY?this.scaleY=r.scaleY.onUpdate(this,"scaleY",a,this.scaleY):this.scaleY=this.scaleX,this.angle=r.rotate.onUpdate(this,"rotate",a,this.angle),this.rotation=o(this.angle),this.alpha=r.alpha.onUpdate(this,"alpha",a,this.alpha),this.tint=r.tint.onUpdate(this,"tint",a,this.tint),this.lifeCurrent-=t,this.lifeCurrent<=0)}});t.exports=h},function(t,i,n){var r=n(35),o=n(0),a=n(11),h=n(453),d=n(454),f=n(449),p=n(2),T=n(210),b=n(455),S=n(126),A=n(451),P=n(456),O=n(10),L=n(79),D=n(3),I=n(68),F=new o({Mixins:[a.BlendMode,a.Mask,a.ScrollFactor,a.Visible],initialize:function ParticleEmitter2(t,i){this.manager=t,this.texture=t.texture,this.frames=[t.defaultFrame],this.defaultFrame=t.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=A,this.x=new f(i,"x",0,!0),this.y=new f(i,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new f(i,"accelerationX",0,!0),this.accelerationY=new f(i,"accelerationY",0,!0),this.maxVelocityX=new f(i,"maxVelocityX",1e4,!0),this.maxVelocityY=new f(i,"maxVelocityY",1e4,!0),this.speedX=new f(i,"speedX",0,!0),this.speedY=new f(i,"speedY",0,!0),this.moveTo=!1,this.moveToX=new f(i,"moveToX",0,!0),this.moveToY=new f(i,"moveToY",0,!0),this.bounce=new f(i,"bounce",0,!0),this.scaleX=new f(i,"scaleX",1),this.scaleY=new f(i,"scaleY",1),this.tint=new f(i,"tint",16777215),this.alpha=new f(i,"alpha",1),this.lifespan=new f(i,"lifespan",1e3,!0),this.angle=new f(i,"angle",{min:0,max:360},!0),this.rotate=new f(i,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new f(i,"quantity",1,!0),this.delay=new f(i,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=r.NORMAL,this.follow=null,this.followOffset=new D,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,i&&this.fromJSON(i)},fromJSON:function(t){if(!t)return this;var i=0,n="";for(i=0;i<this.configFastMap.length;i++)n=this.configFastMap[i],S(t,n)&&(this[n]=p(t,n));for(i=0;i<this.configOpMap.length;i++)n=this.configOpMap[i],S(t,n)&&this[n].loadConfig(t);if(this.acceleration=0!==this.accelerationX.propertyValue||0!==this.accelerationY.propertyValue,this.moveTo=0!==this.moveToX.propertyValue||0!==this.moveToY.propertyValue,S(t,"speed")&&(this.speedX.loadConfig(t,"speed"),this.speedY=null),(b(t,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),S(t,"scale")&&(this.scaleX.loadConfig(t,"scale"),this.scaleY=null),S(t,"callbackScope")){var r=p(t,"callbackScope",null);this.emitCallbackScope=r,this.deathCallbackScope=r}return S(t,"emitZone")&&this.setEmitZone(t.emitZone),S(t,"deathZone")&&this.setDeathZone(t.deathZone),S(t,"bounds")&&this.setBounds(t.bounds),S(t,"followOffset")&&this.followOffset.setFromObject(p(t,"followOffset",0)),S(t,"frame")&&this.setFrame(t.frame),S(t,"reserve")&&this.reserve(t.reserve),this},toJSON:function(t){void 0===t&&(t={});var i=0,n="";for(i=0;i<this.configFastMap.length;i++)t[n=this.configFastMap[i]]=this[n];for(i=0;i<this.configOpMap.length;i++)this[n=this.configOpMap[i]]&&(t[n]=this[n].toJSON());return this.speedY||(delete t.speedX,t.speed=this.speedX.toJSON()),this.scaleY||(delete t.scaleX,t.scale=this.scaleX.toJSON()),t},startFollow:function(t,i,n,r){return void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=!1),this.follow=t,this.followOffset.set(i,n),this.trackVisible=r,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(1===this.frames.length)return this.defaultFrame;if(this.randomFrame)return T(this.frames);var t=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=I(this.currentFrame+1,0,this._frameLength)),t},setFrame:function(t,i,n){void 0===i&&(i=!0),void 0===n&&(n=1),this.randomFrame=i,this.frameQuantity=n,this.currentFrame=0,this._frameCounter=0;var r=typeof t;if(Array.isArray(t)||"string"===r||"number"===r)this.manager.setEmitterFrames(t,this);else if("object"===r){var o=t;(t=p(o,"frames",null))&&this.manager.setEmitterFrames(t,this);var a=p(o,"cycle",!1);this.randomFrame=!a,this.frameQuantity=p(o,"quantity",n)}return this._frameLength=this.frames.length,1===this._frameLength&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(t){return void 0===t&&(t=!0),this.radial=t,this},setPosition:function(t,i){return this.x.onChange(t),this.y.onChange(i),this},setBounds:function(t,i,n,r){if("object"==typeof t){var o=t;t=o.x,i=o.y,n=S(o,"w")?o.w:o.width,r=S(o,"h")?o.h:o.height}return this.bounds?this.bounds.setTo(t,i,n,r):this.bounds=new O(t,i,n,r),this},setSpeedX:function(t){return this.speedX.onChange(t),this.radial=!1,this},setSpeedY:function(t){return this.speedY&&(this.speedY.onChange(t),this.radial=!1),this},setSpeed:function(t){return this.speedX.onChange(t),this.speedY=null,this.radial=!0,this},setScaleX:function(t){return this.scaleX.onChange(t),this},setScaleY:function(t){return this.scaleY.onChange(t),this},setScale:function(t){return this.scaleX.onChange(t),this.scaleY=null,this},setGravityX:function(t){return this.gravityX=t,this},setGravityY:function(t){return this.gravityY=t,this},setGravity:function(t,i){return this.gravityX=t,this.gravityY=i,this},setAlpha:function(t){return this.alpha.onChange(t),this},setTint:function(t){return this.tint.onChange(t),this},setEmitterAngle:function(t){return this.angle.onChange(t),this},setAngle:function(t){return this.angle.onChange(t),this},setLifespan:function(t){return this.lifespan.onChange(t),this},setQuantity:function(t){return this.quantity.onChange(t),this},setFrequency:function(t,i){return this.frequency=t,this._counter=0,i&&this.quantity.onChange(i),this},setEmitZone:function(t){if(void 0===t)this.emitZone=null;else{var i=p(t,"type","random"),n=p(t,"source",null);switch(i){case"random":this.emitZone=new P(n);break;case"edge":var r=p(t,"quantity",1),o=p(t,"stepRate",0),a=p(t,"yoyo",!1),h=p(t,"seamless",!0);this.emitZone=new d(n,r,o,a,h)}}return this},setDeathZone:function(t){if(void 0===t)this.deathZone=null;else{var i=p(t,"type","onEnter"),n=p(t,"source",null);if(n&&"function"==typeof n.contains){var r="onEnter"===i;this.deathZone=new h(n,r)}}return this},reserve:function(t){for(var i=this.dead,n=0;n<t;n++)i.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(t,i){return void 0===t?(this.emitCallback=null,this.emitCallbackScope=null):"function"==typeof t&&(this.emitCallback=t,i&&(this.emitCallbackScope=i)),this},onParticleDeath:function(t,i){return void 0===t?(this.deathCallback=null,this.deathCallbackScope=null):"function"==typeof t&&(this.deathCallback=t,i&&(this.deathCallbackScope=i)),this},killAll:function(){for(var t=this.dead,i=this.alive;i.length>0;)t.push(i.pop());return this},forEachAlive:function(t,i){for(var n=this.alive,r=n.length,o=0;o<r;++o)t.call(i,n[o],this);return this},forEachDead:function(t,i){for(var n=this.dead,r=n.length,o=0;o<r;++o)t.call(i,n[o],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return L(this.alive,this.depthSortCallback),this},flow:function(t,i){return void 0===i&&(i=1),this.frequency=t,this.quantity.onChange(i),this.start()},explode:function(t,i,n){return this.frequency=-1,this.emitParticle(t,i,n)},emitParticleAt:function(t,i,n){return this.emitParticle(n,t,i)},emitParticle:function(t,i,n){if(!this.atLimit()){void 0===t&&(t=this.quantity.onEmit());for(var r=this.dead,o=this.follow?this.follow.x+this.followOffset.x:i,a=this.follow?this.follow.y+this.followOffset.y:n,h=0;h<t;h++){var d=r.pop();if(d||(d=new this.particleClass(this)),d.fire(o,a),this.particleBringToTop?this.alive.push(d):this.alive.unshift(d),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,d,this),this.atLimit())break}return d}},preUpdate:function(t,i){var n=(i*=this.timeScale)/1e3;this.trackVisible&&(this.visible=this.follow.visible);var r=this.manager.getProcessors(),o=this.alive,a=this.dead,h=0,d=[],f=o.length;for(h=0;h<f;h++){var p=o[h];p.update(i,n,r)&&d.push({index:h,particle:p})}if((f=d.length)>0){var T=this.deathCallback,b=this.deathCallbackScope;for(h=f-1;h>=0;h--){var S=d[h];o.splice(S.index,1),a.push(S.particle),T&&T.call(b,S.particle),S.particle.resetPosition()}}this.on&&(0===this.frequency?this.emitParticle():this.frequency>0&&(this._counter-=i,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(t,i){return t.y-i.y}});t.exports=F},function(t,i,n){var r=new(n(0))({initialize:function DeathZone2(t,i){this.source=t,this.killOnEnter=i},willKill:function(t){var i=this.source.contains(t.x,t.y);return i&&this.killOnEnter||!i&&!this.killOnEnter}});t.exports=r},function(t,i,n){var r=new(n(0))({initialize:function EdgeZone2(t,i,n,r,o){void 0===r&&(r=!1),void 0===o&&(o=!0),this.source=t,this.points=[],this.quantity=i,this.stepRate=n,this.yoyo=r,this.counter=-1,this.seamless=o,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var t=this.points[0],i=this.points[this.points.length-1];t.x===i.x&&t.y===i.y&&this.points.pop()}var n=this._length;return this._length=this.points.length,this._length<n&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(t){return this.source=t,this.updateSource()},getPoint:function(t){0===this._direction?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,-1===this.counter&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var i=this.points[this.counter];i&&(t.x=i.x,t.y=i.y)}});t.exports=r},function(t,i){t.exports=function(t,i){for(var n=0;n<i.length;n++)if(t.hasOwnProperty(i[n]))return!0;return!1}},function(t,i,n){var r=n(0),o=n(3),a=new r({initialize:function RandomZone2(t){this.source=t,this._tempVec=new o},getPoint:function(t){var i=this._tempVec;this.source.getRandomPoint(i),t.x=i.x,t.y=i.y}});t.exports=a},function(t,i,n){var r=n(0),o=n(11),a=n(73),h=new r({Extends:a,Mixins:[o.PathFollower],initialize:function PathFollower2(t,i,n,r,o,h){a.call(this,t,n,r,o,h),this.path=i},preUpdate:function(t,i){this.anims.update(t,i),this.pathUpdate(t)}});t.exports=h},function(t,i){t.exports=function(t,i,n){var r=t.canvas,o=t.context,a=t.style,h=[],d=0,f=n.length;a.maxLines>0&&a.maxLines<n.length&&(f=a.maxLines),a.syncFont(r,o);for(var p=0;p<f;p++){var T=a.strokeThickness;T+=o.measureText(n[p]).width,a.wordWrap&&(T-=o.measureText(" ").width),h[p]=Math.ceil(T),d=Math.max(d,h[p])}var b=i.fontSize+a.strokeThickness,S=b*f,A=t.lineSpacing;return f>1&&(S+=A*(f-1)),{width:d,height:S,lines:f,lineWidths:h,lineSpacing:A,lineHeight:b}}},function(t,i,n){var r=n(0),o=n(13),a=n(6),h=n(460),d={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|MÃ‰qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},f=new r({initialize:function TextStyle2(t,i){this.parent=t,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(i,!1,!0);var n=a(i,"metrics",!1);this.metrics=n?{ascent:a(n,"ascent",0),descent:a(n,"descent",0),fontSize:a(n,"fontSize",0)}:h(this)},setStyle:function(t,i,n){for(var r in void 0===i&&(i=!0),void 0===n&&(n=!1),t&&t.hasOwnProperty("fontSize")&&"number"==typeof t.fontSize&&(t.fontSize=t.fontSize.toString()+"px"),d){var h=n?d[r][1]:this[r];this[r]="wordWrapCallback"===r||"wordWrapCallbackScope"===r?a(t,d[r][0],h):o(t,d[r][0],h)}var f=a(t,"font",null);null!==f&&this.setFont(f,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var p=a(t,"fill",null);return null!==p&&(this.color=p),i?this.update(!0):this.parent},syncFont:function(t,i){i.font=this._font},syncStyle:function(t,i){i.textBaseline="alphabetic",i.fillStyle=this.color,i.strokeStyle=this.stroke,i.lineWidth=this.strokeThickness,i.lineCap="round",i.lineJoin="round"},syncShadow:function(t,i){i?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)},update:function(t){return t&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=h(this)),this.parent.updateText()},setFont:function(t,i){void 0===i&&(i=!0);var n=t,r="",o="";if("string"!=typeof t)n=a(t,"fontFamily","Courier"),r=a(t,"fontSize","16px"),o=a(t,"fontStyle","");else{var h=t.split(" "),d=0;o=h.length>2?h[d++]:"",r=h[d++]||"16px",n=h[d++]||"Courier"}return n===this.fontFamily&&r===this.fontSize&&o===this.fontStyle||(this.fontFamily=n,this.fontSize=r,this.fontStyle=o,i&&this.update(!0)),this.parent},setFontFamily:function(t){return this.fontFamily!==t&&(this.fontFamily=t,this.update(!0)),this.parent},setFontStyle:function(t){return this.fontStyle!==t&&(this.fontStyle=t,this.update(!0)),this.parent},setFontSize:function(t){return"number"==typeof t&&(t=t.toString()+"px"),this.fontSize!==t&&(this.fontSize=t,this.update(!0)),this.parent},setTestString:function(t){return this.testString=t,this.update(!0)},setFixedSize:function(t,i){return this.fixedWidth=t,this.fixedHeight=i,t&&(this.parent.width=t),i&&(this.parent.height=i),this.update(!1)},setBackgroundColor:function(t){return this.backgroundColor=t,this.update(!1)},setFill:function(t){return this.color=t,this.update(!1)},setColor:function(t){return this.color=t,this.update(!1)},setResolution:function(t){return this.resolution=t,this.update(!1)},setStroke:function(t,i){return void 0===i&&(i=this.strokeThickness),void 0===t&&0!==this.strokeThickness?(this.strokeThickness=0,this.update(!0)):this.stroke===t&&this.strokeThickness===i||(this.stroke=t,this.strokeThickness=i,this.update(!0)),this.parent},setShadow:function(t,i,n,r,o,a){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n="#000"),void 0===r&&(r=0),void 0===o&&(o=!1),void 0===a&&(a=!0),this.shadowOffsetX=t,this.shadowOffsetY=i,this.shadowColor=n,this.shadowBlur=r,this.shadowStroke=o,this.shadowFill=a,this.update(!1)},setShadowOffset:function(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.shadowOffsetX=t,this.shadowOffsetY=i,this.update(!1)},setShadowColor:function(t){return void 0===t&&(t="#000"),this.shadowColor=t,this.update(!1)},setShadowBlur:function(t){return void 0===t&&(t=0),this.shadowBlur=t,this.update(!1)},setShadowStroke:function(t){return this.shadowStroke=t,this.update(!1)},setShadowFill:function(t){return this.shadowFill=t,this.update(!1)},setWordWrapWidth:function(t,i){return void 0===i&&(i=!1),this.wordWrapWidth=t,this.wordWrapUseAdvanced=i,this.update(!1)},setWordWrapCallback:function(t,i){return void 0===i&&(i=null),this.wordWrapCallback=t,this.wordWrapCallbackScope=i,this.update(!1)},setAlign:function(t){return void 0===t&&(t="left"),this.align=t,this.update(!1)},setMaxLines:function(t){return void 0===t&&(t=0),this.maxLines=t,this.update(!1)},getTextMetrics:function(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}},toJSON:function(){var t={};for(var i in d)t[i]=this[i];return t.metrics=this.getTextMetrics(),t},destroy:function(){this.parent=void 0}});t.exports=f},function(t,i,n){var r=n(31);t.exports=function(t){var i=r.create(this),n=i.getContext("2d");t.syncFont(i,n);var o=n.measureText(t.testString);if("actualBoundingBoxAscent"in o){var a=o.actualBoundingBoxAscent,h=o.actualBoundingBoxDescent;return r.remove(i),{ascent:a,descent:h,fontSize:a+h}}var d=Math.ceil(o.width*t.baselineX),f=d,p=2*f;f=f*t.baselineY|0,i.width=d,i.height=p,n.fillStyle="#f00",n.fillRect(0,0,d,p),n.font=t._font,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(t.testString,0,f);var T={ascent:0,descent:0,fontSize:0},b=n.getImageData(0,0,d,p);if(!b)return T.ascent=f,T.descent=f+6,T.fontSize=T.ascent+T.descent,r.remove(i),T;var S,A,P=b.data,O=P.length,L=4*d,D=0,I=!1;for(S=0;S<f;S++){for(A=0;A<L;A+=4)if(255!==P[D+A]){I=!0;break}if(I)break;D+=L}for(T.ascent=f-S,D=O-L,I=!1,S=p;S>f;S--){for(A=0;A<L;A+=4)if(255!==P[D+A]){I=!0;break}if(I)break;D-=L}return T.descent=S-f,T.fontSize=T.ascent+T.descent,r.remove(i),T}},function(t,i,n){var r=n(1097),o=n(0),a=n(36),h=n(59),d=n(65),f=n(14),p=n(34),T=new o({Extends:p,Mixins:[r],initialize:function Arc2(t,i,n,r,o,a,h,f,T){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=128),void 0===o&&(o=0),void 0===a&&(a=360),void 0===h&&(h=!1),p.call(this,t,"Arc",new d(0,0,r)),this._startAngle=o,this._endAngle=a,this._anticlockwise=h,this._iterations=.01,this.setPosition(i,n);var b=2*this.geom.radius;this.setSize(b,b),void 0!==f&&this.setFillStyle(f,T),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(t){this._iterations=t,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(t){this.geom.radius=t;var i=2*t;this.setSize(i,i),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(t){this._startAngle=t,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(t){this._endAngle=t,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(t){this._anticlockwise=t,this.updateData()}},setRadius:function(t){return this.radius=t,this},setIterations:function(t){return void 0===t&&(t=.01),this.iterations=t,this},setStartAngle:function(t,i){return this._startAngle=t,void 0!==i&&(this._anticlockwise=i),this.updateData()},setEndAngle:function(t,i){return this._endAngle=t,void 0!==i&&(this._anticlockwise=i),this.updateData()},updateData:function(){var t=this._iterations,i=t,n=this.geom.radius,r=a(this._startAngle),o=a(this._endAngle),d=n,p=n;o-=r,this._anticlockwise?o<-f.PI2?o=-f.PI2:o>0&&(o=-f.PI2+o%f.PI2):o>f.PI2?o=f.PI2:o<0&&(o=f.PI2+o%f.PI2);for(var T,b=[d+Math.cos(r)*n,p+Math.sin(r)*n];i<1;)T=o*i+r,b.push(d+Math.cos(T)*n,p+Math.sin(T)*n),i+=t;return T=o+r,b.push(d+Math.cos(T)*n,p+Math.sin(T)*n),b.push(d+Math.cos(r)*n,p+Math.sin(r)*n),this.pathIndexes=h(b),this.pathData=b,this}});t.exports=T},function(t,i,n){var r=n(0),o=n(1100),a=n(59),h=n(10),d=n(34),f=new r({Extends:d,Mixins:[o],initialize:function Curve2(t,i,n,r,o,a){void 0===i&&(i=0),void 0===n&&(n=0),d.call(this,t,"Curve",r),this._smoothness=32,this._curveBounds=new h,this.closePath=!1,this.setPosition(i,n),void 0!==o&&this.setFillStyle(o,a),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(t){this._smoothness=t,this.updateData()}},setSmoothness:function(t){return this._smoothness=t,this.updateData()},updateData:function(){var t=this._curveBounds,i=this._smoothness;this.geom.getBounds(t,i),this.setSize(t.width,t.height),this.updateDisplayOrigin();for(var n=[],r=this.geom.getPoints(i),o=0;o<r.length;o++)n.push(r[o].x,r[o].y);return n.push(r[0].x,r[0].y),this.pathIndexes=a(n),this.pathData=n,this}});t.exports=f},function(t,i,n){var r=n(0),o=n(59),a=n(1103),h=n(111),d=n(34),f=new r({Extends:d,Mixins:[a],initialize:function Ellipse2(t,i,n,r,o,a,f){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=128),void 0===o&&(o=128),d.call(this,t,"Ellipse",new h(r/2,o/2,r,o)),this._smoothness=64,this.setPosition(i,n),this.width=r,this.height=o,void 0!==a&&this.setFillStyle(a,f),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(t){this._smoothness=t,this.updateData()}},setSize:function(t,i){return this.width=t,this.height=i,this.geom.setPosition(t/2,i/2),this.geom.setSize(t,i),this.updateData()},setSmoothness:function(t){return this._smoothness=t,this.updateData()},updateData:function(){for(var t=[],i=this.geom.getPoints(this._smoothness),n=0;n<i.length;n++)t.push(i[n].x,i[n].y);return t.push(i[0].x,i[0].y),this.pathIndexes=o(t),this.pathData=t,this}});t.exports=f},function(t,i,n){var r=n(0),o=n(34),a=n(1106),h=new r({Extends:o,Mixins:[a],initialize:function Grid2(t,i,n,r,a,h,d,f,p,T,b){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=128),void 0===a&&(a=128),void 0===h&&(h=32),void 0===d&&(d=32),o.call(this,t,"Grid",null),this.cellWidth=h,this.cellHeight=d,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(i,n),this.setSize(r,a),this.setFillStyle(f,p),void 0!==T&&this.setOutlineStyle(T,b),this.updateDisplayOrigin()},setFillStyle:function(t,i){return void 0===i&&(i=1),void 0===t?this.showCells=!1:(this.fillColor=t,this.fillAlpha=i,this.showCells=!0),this},setAltFillStyle:function(t,i){return void 0===i&&(i=1),void 0===t?this.showAltCells=!1:(this.altFillColor=t,this.altFillAlpha=i,this.showAltCells=!0),this},setOutlineStyle:function(t,i){return void 0===i&&(i=1),void 0===t?this.showOutline=!1:(this.outlineFillColor=t,this.outlineFillAlpha=i,this.showOutline=!0),this}});t.exports=h},function(t,i,n){var r=n(1109),o=n(0),a=n(34),h=new o({Extends:a,Mixins:[r],initialize:function IsoBox2(t,i,n,r,o,h,d,f){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=48),void 0===o&&(o=32),void 0===h&&(h=15658734),void 0===d&&(d=10066329),void 0===f&&(f=13421772),a.call(this,t,"IsoBox",null),this.projection=4,this.fillTop=h,this.fillLeft=d,this.fillRight=f,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(i,n),this.setSize(r,o),this.updateDisplayOrigin()},setProjection:function(t){return this.projection=t,this},setFaces:function(t,i,n){return void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===n&&(n=!0),this.showTop=t,this.showLeft=i,this.showRight=n,this},setFillStyle:function(t,i,n){return this.fillTop=t,this.fillLeft=i,this.fillRight=n,this.isFilled=!0,this}});t.exports=h},function(t,i,n){var r=n(0),o=n(1112),a=n(34),h=new r({Extends:a,Mixins:[o],initialize:function IsoTriangle2(t,i,n,r,o,h,d,f,p){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=48),void 0===o&&(o=32),void 0===h&&(h=!1),void 0===d&&(d=15658734),void 0===f&&(f=10066329),void 0===p&&(p=13421772),a.call(this,t,"IsoTriangle",null),this.projection=4,this.fillTop=d,this.fillLeft=f,this.fillRight=p,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=h,this.isFilled=!0,this.setPosition(i,n),this.setSize(r,o),this.updateDisplayOrigin()},setProjection:function(t){return this.projection=t,this},setReversed:function(t){return this.isReversed=t,this},setFaces:function(t,i,n){return void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===n&&(n=!0),this.showTop=t,this.showLeft=i,this.showRight=n,this},setFillStyle:function(t,i,n){return this.fillTop=t,this.fillLeft=i,this.fillRight=n,this.isFilled=!0,this}});t.exports=h},function(t,i,n){var r=n(0),o=n(34),a=n(47),h=n(1115),d=new r({Extends:o,Mixins:[h],initialize:function Line4(t,i,n,r,h,d,f,p,T){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===h&&(h=0),void 0===d&&(d=128),void 0===f&&(f=0),o.call(this,t,"Line",new a(r,h,d,f));var b=Math.max(1,this.geom.right-this.geom.left),S=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(i,n),this.setSize(b,S),void 0!==p&&this.setStrokeStyle(1,p,T),this.updateDisplayOrigin()},setLineWidth:function(t,i){return void 0===i&&(i=t),this._startWidth=t,this._endWidth=i,this.lineWidth=t,this},setTo:function(t,i,n,r){return this.geom.setTo(t,i,n,r),this}});t.exports=d},function(t,i,n){var r=n(1118),o=n(0),a=n(59),h=n(469),d=n(227),f=n(34),p=n(472),T=new o({Extends:f,Mixins:[r],initialize:function Polygon2(t,i,n,r,o,a){void 0===i&&(i=0),void 0===n&&(n=0),f.call(this,t,"Polygon",new d(r));var p=h(this.geom);this.setPosition(i,n),this.setSize(p.width,p.height),void 0!==o&&this.setFillStyle(o,a),this.updateDisplayOrigin(),this.updateData()},smooth:function(t){void 0===t&&(t=1);for(var i=0;i<t;i++)p(this.geom);return this.updateData()},updateData:function(){for(var t=[],i=this.geom.points,n=0;n<i.length;n++)t.push(i[n].x,i[n].y);return t.push(i[0].x,i[0].y),this.pathIndexes=a(t),this.pathData=t,this}});t.exports=T},function(t,i,n){var r=n(10);t.exports=function(t,i){void 0===i&&(i=new r);for(var n,o=1/0,a=1/0,h=-o,d=-a,f=0;f<t.points.length;f++)n=t.points[f],o=Math.min(o,n.x),a=Math.min(a,n.y),h=Math.max(h,n.x),d=Math.max(d,n.y);return i.x=o,i.y=a,i.width=h-o,i.height=d-a,i}},function(t,i,n){var r=n(67),o=n(47),a=n(471);t.exports=function(t,i,n,h){void 0===h&&(h=[]);var d=t.points,f=a(t);!i&&n>0&&(i=f/n);for(var p=0;p<i;p++)for(var T=f*(p/i),b=0,S=0;S<d.length;S++){var A=d[S],P=d[(S+1)%d.length],O=new o(A.x,A.y,P.x,P.y),L=r(O);if(!(T<b||T>b+L)){var D=O.getPoint((T-b)/L);h.push(D);break}b+=L}return h}},function(t,i,n){var r=n(67),o=n(47);t.exports=function(t){for(var i=t.points,n=0,a=0;a<i.length;a++){var h=i[a],d=i[(a+1)%i.length],f=new o(h.x,h.y,d.x,d.y);n+=r(f)}return n}},function(t,i){var copy=function(t,i){return t[0]=i[0],t[1]=i[1],t};t.exports=function(t){var i,n=[],r=t.points;for(i=0;i<r.length;i++)n.push([r[i].x,r[i].y]);var o=[];for(n.length>0&&o.push(copy([0,0],n[0])),i=0;i<n.length-1;i++){var a=n[i],h=n[i+1],d=a[0],f=a[1],p=h[0],T=h[1];o.push([.85*d+.15*p,.85*f+.15*T]),o.push([.15*d+.85*p,.15*f+.85*T])}return n.length>1&&o.push(copy([0,0],n[n.length-1])),t.setTo(o)}},function(t,i,n){var r=n(0),o=n(10),a=n(34),h=n(1121),d=new r({Extends:a,Mixins:[h],initialize:function Rectangle4(t,i,n,r,h,d,f){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=128),void 0===h&&(h=128),a.call(this,t,"Rectangle",new o(0,0,r,h)),this.setPosition(i,n),this.setSize(r,h),void 0!==d&&this.setFillStyle(d,f),this.updateDisplayOrigin(),this.updateData()},setSize:function(t,i){return this.width=t,this.height=i,this.geom.setSize(t,i),this.updateData(),this},updateData:function(){var t=[],i=this.geom,n=this._tempLine;return i.getLineA(n),t.push(n.x1,n.y1,n.x2,n.y2),i.getLineB(n),t.push(n.x2,n.y2),i.getLineC(n),t.push(n.x2,n.y2),i.getLineD(n),t.push(n.x2,n.y2),this.pathData=t,this}});t.exports=d},function(t,i,n){var r=n(1124),o=n(0),a=n(59),h=n(34),d=new o({Extends:h,Mixins:[r],initialize:function Star2(t,i,n,r,o,a,d,f){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=5),void 0===o&&(o=32),void 0===a&&(a=64),h.call(this,t,"Star",null),this._points=r,this._innerRadius=o,this._outerRadius=a,this.setPosition(i,n),this.setSize(2*a,2*a),void 0!==d&&this.setFillStyle(d,f),this.updateDisplayOrigin(),this.updateData()},setPoints:function(t){return this._points=t,this.updateData()},setInnerRadius:function(t){return this._innerRadius=t,this.updateData()},setOuterRadius:function(t){return this._outerRadius=t,this.updateData()},points:{get:function(){return this._points},set:function(t){this._points=t,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(t){this._innerRadius=t,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(t){this._outerRadius=t,this.updateData()}},updateData:function(){var t=[],i=this._points,n=this._innerRadius,r=this._outerRadius,o=Math.PI/2*3,h=Math.PI/i,d=r,f=r;t.push(d,f+-r);for(var p=0;p<i;p++)t.push(d+Math.cos(o)*r,f+Math.sin(o)*r),o+=h,t.push(d+Math.cos(o)*n,f+Math.sin(o)*n),o+=h;return t.push(d,f+-r),this.pathIndexes=a(t),this.pathData=t,this}});t.exports=d},function(t,i,n){var r=n(0),o=n(34),a=n(82),h=n(1127),d=new r({Extends:o,Mixins:[h],initialize:function Triangle2(t,i,n,r,h,d,f,p,T,b,S){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===h&&(h=128),void 0===d&&(d=64),void 0===f&&(f=0),void 0===p&&(p=128),void 0===T&&(T=128),o.call(this,t,"Triangle",new a(r,h,d,f,p,T));var A=this.geom.right-this.geom.left,P=this.geom.bottom-this.geom.top;this.setPosition(i,n),this.setSize(A,P),void 0!==b&&this.setFillStyle(b,S),this.updateDisplayOrigin(),this.updateData()},setTo:function(t,i,n,r,o,a){return this.geom.setTo(t,i,n,r,o,a),this.updateData()},updateData:function(){var t=[],i=this.geom,n=this._tempLine;return i.getLineA(n),t.push(n.x1,n.y1,n.x2,n.y2),i.getLineB(n),t.push(n.x2,n.y2),i.getLineC(n),t.push(n.x2,n.y2),this.pathData=t,this}});t.exports=d},function(t,i,n){var r=n(4),o=n(67);t.exports=function(t,i,n){void 0===n&&(n=new r);var a=t.getLineA(),h=t.getLineB(),d=t.getLineC();if(i<=0||i>=1)return n.x=a.x1,n.y=a.y1,n;var f=o(a),p=o(h),T=o(d),b=(f+p+T)*i,S=0;return b<f?(S=b/f,n.x=a.x1+(a.x2-a.x1)*S,n.y=a.y1+(a.y2-a.y1)*S):b>f+p?(S=(b-=f+p)/T,n.x=d.x1+(d.x2-d.x1)*S,n.y=d.y1+(d.y2-d.y1)*S):(S=(b-=f)/p,n.x=h.x1+(h.x2-h.x1)*S,n.y=h.y1+(h.y2-h.y1)*S),n}},function(t,i,n){var r=n(67),o=n(4);t.exports=function(t,i,n,a){void 0===a&&(a=[]);var h=t.getLineA(),d=t.getLineB(),f=t.getLineC(),p=r(h),T=r(d),b=r(f),S=p+T+b;!i&&n>0&&(i=S/n);for(var A=0;A<i;A++){var P=S*(A/i),O=0,L=new o;P<p?(O=P/p,L.x=h.x1+(h.x2-h.x1)*O,L.y=h.y1+(h.y2-h.y1)*O):P>p+T?(O=(P-=p+T)/b,L.x=f.x1+(f.x2-f.x1)*O,L.y=f.y1+(f.y2-f.y1)*O):(O=(P-=p)/T,L.x=d.x1+(d.x2-d.x1)*O,L.y=d.y1+(d.y2-d.y1)*O),a.push(L)}return a}},function(t,i){t.exports=function(t,i,n){if(!t||"number"==typeof t)return!1;if(t.hasOwnProperty(i))return t[i]=n,!0;if(-1!==i.indexOf(".")){for(var r=i.split("."),o=t,a=t,h=0;h<r.length;h++){if(!o.hasOwnProperty(r[h]))return!1;a=o,o=o[r[h]]}return a[r[r.length-1]]=n,!0}return!1}},function(t,i,n){var r=n(116),o=n(117);t.exports=function(t,i,n,a,h,d,f){if(void 0===a&&(a=!1),void 0===d&&(d=16777215),void 0===f&&(f=1),t.length===i.length){var p,T,b,S,A,P,O,L,D,I,F,B={faces:[],vertices:[]},N=a?3:2,Y=Array.isArray(d),X=Array.isArray(f);if(Array.isArray(n)&&n.length>0)for(p=0;p<n.length;p++){var G=n[p],U=2*n[p],V=n[p]*N;T=t[V],b=t[V+1],S=a?t[V+2]:0,A=i[U],P=i[U+1],O=Y?d[G]:d,L=X?f[G]:f,D=0,I=0,F=0,h&&(D=h[V],I=h[V+1],F=a?h[V+2]:0),B.vertices.push(new o(T,b,S,A,P,O,L,D,I,F))}else{var z=0,W=0;for(p=0;p<t.length;p+=N)T=t[p],b=t[p+1],S=a?t[p+2]:0,A=i[z],P=i[z+1],O=Y?d[W]:d,L=X?f[W]:f,D=0,I=0,F=0,h&&(D=h[p],I=h[p+1],F=a?h[p+2]:0),B.vertices.push(new o(T,b,S,A,P,O,L,D,I,F)),z+=2,W++}for(p=0;p<B.vertices.length;p+=3){var H=B.vertices[p],q=B.vertices[p+1],Z=B.vertices[p+2];B.faces.push(new r(H,q,Z))}return B}console.warn("GenerateVerts: vertices and uvs count not equal")}},function(t,i,n){var r=n(116),o=n(69),a=n(39),h=n(117),d=new a,f=new a,p=new o;t.exports=function(t,i,n,o,a,T,b,S,A,P){void 0===n&&(n=1),void 0===o&&(o=0),void 0===a&&(a=0),void 0===T&&(T=0),void 0===b&&(b=0),void 0===S&&(S=0),void 0===A&&(A=0),void 0===P&&(P=!0);var O={faces:[],verts:[]},L=t.materials;d.set(o,a,T),f.set(b,S,A),p.fromRotationXYTranslation(f,d,P);for(var D=0;D<t.models.length;D++)for(var I=t.models[D],F=I.vertices,B=I.textureCoords,N=I.faces,Y=0;Y<N.length;Y++){var X=N[Y],G=X.vertices[0],U=X.vertices[1],V=X.vertices[2],z=F[G.vertexIndex],W=F[U.vertexIndex],H=F[V.vertexIndex],q=G.textureCoordsIndex,Z=U.textureCoordsIndex,K=V.textureCoordsIndex,J=-1===q?{u:0,v:1}:B[q],Q=-1===Z?{u:0,v:0}:B[Z],$=-1===K?{u:1,v:1}:B[K],tt=16777215;""!==X.material&&L[X.material]&&(tt=L[X.material]);var et=new h(z.x*n,z.y*n,z.z*n,J.u,J.v,tt).transformMat4(p),it=new h(W.x*n,W.y*n,W.z*n,Q.u,Q.v,tt).transformMat4(p),nt=new h(H.x*n,H.y*n,H.z*n,$.u,$.v,tt).transformMat4(p);O.verts.push(et,it,nt),O.faces.push(new r(et,it,nt))}return i&&(i.faces=i.faces.concat(O.faces),i.vertices=i.vertices.concat(O.verts)),O}},function(t,i,n){var r=n(65),o=n(0),a=n(11),h=n(200),d=n(12),f=new o({Extends:r,Mixins:[a.ScrollFactor,a.Visible],initialize:function Light2(t,i,n,o,a,d,f){r.call(this,t,i,n),this.color=new h(o,a,d),this.intensity=f,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function(t){return!(f.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},setColor:function(t){var i=d.getFloatsFromUintRGB(t);return this.color.set(i[0],i[1],i[2]),this},setIntensity:function(t){return this.intensity=t,this},setRadius:function(t){return this.radius=t,this}});f.RENDER_MASK=15,t.exports=f},function(t,i,n){var r=n(151),o=n(0),a=n(50),h=n(481),d=n(150),f=n(200),p=n(74),T=n(79),b=n(12),S=new o({initialize:function LightsManager2(){this.lights=[],this.ambientColor=new f(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(t,i,n,r,o,a){return this.systems.displayList.add(new d(this.scene,t,i,n,r,o,a))},enable:function(){return-1===this.maxLights&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(t){for(var i=this.lights,n=t.worldView,o=[],h=0;h<i.length;h++){var d=i[h];d.willRender(t)&&r(d,n)&&o.push({light:d,distance:a(d.x,d.y,n.centerX,n.centerY)})}return o.length>this.maxLights&&(T(o,this.sortByDistance),o=o.slice(0,this.maxLights)),this.visibleLights=o.length,o},sortByDistance:function(t,i){return t.distance>=i.distance},setAmbientColor:function(t){var i=b.getFloatsFromUintRGB(t);return this.ambientColor.set(i[0],i[1],i[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(t,i,n,r,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=128),void 0===r&&(r=16777215),void 0===o&&(o=1);var a=b.getFloatsFromUintRGB(r),d=new h(t,i,n,a[0],a[1],a[2],o);return this.lights.push(d),d},removeLight:function(t){var i=this.lights.indexOf(t);return i>=0&&p(this.lights,i),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});t.exports=S},function(t,i,n){var r=n(56),o=n(17),a={Circle:n(1191),Ellipse:n(1201),Intersects:n(484),Line:n(1221),Mesh:n(1243),Point:n(1246),Polygon:n(1260),Rectangle:n(502),Triangle:n(1293)};a=o(!1,a,r),t.exports=a},function(t,i,n){t.exports={CircleToCircle:n(231),CircleToRectangle:n(151),GetCircleToCircle:n(1211),GetCircleToRectangle:n(1212),GetLineToCircle:n(232),GetLineToLine:n(485),GetLineToPoints:n(486),GetLineToPolygon:n(487),GetLineToRectangle:n(234),GetRaysFromPointToPolygon:n(1213),GetRectangleIntersection:n(1214),GetRectangleToRectangle:n(1215),GetRectangleToTriangle:n(1216),GetTriangleToCircle:n(1217),GetTriangleToLine:n(492),GetTriangleToTriangle:n(1218),LineToCircle:n(233),LineToLine:n(96),LineToRectangle:n(488),PointToLine:n(496),PointToLineSegment:n(1219),RectangleToRectangle:n(152),RectangleToTriangle:n(489),RectangleToValues:n(1220),TriangleToCircle:n(491),TriangleToLine:n(493),TriangleToTriangle:n(494)}},function(t,i,n){var r=n(39);t.exports=function(t,i,n){var o=t.x1,a=t.y1,h=t.x2,d=t.y2,f=i.x1,p=i.y1,T=h-o,b=d-a,S=i.x2-f,A=i.y2-p;if(0===T||0==A*T-S*b)return!1;var P=(T*(p-a)+b*(o-f))/(S*b-A*T),O=(f+S*P-o)/T;return O<0||P<0||P>1?null:(void 0===n&&(n=new r),n.set(o+T*O,a+b*O,O))}},function(t,i,n){var r=n(39),o=n(485),a=new(n(47)),h=new r;t.exports=function(t,i,n){void 0===n&&(n=new r);var d=!1;n.set(),h.set();for(var f=i[0],p=1;p<i.length;p++){var T=i[p];a.setTo(f.x,f.y,T.x,T.y),f=T,o(t,a,h)&&(!d||h.z<n.z)&&(n.copy(h),d=!0)}return d?n:null}},function(t,i,n){var r=n(39),o=n(140),a=n(486),h=new r;t.exports=function(t,i,n){void 0===n&&(n=new o),Array.isArray(i)||(i=[i]);var r=!1;n.set(),h.set();for(var d=0;d<i.length;d++)a(t,i[d].points,h)&&(!r||h.z<n.z)&&(n.set(h.x,h.y,h.z,d),r=!0);return r?n:null}},function(t,i){t.exports=function(t,i){var n=t.x1,r=t.y1,o=t.x2,a=t.y2,h=i.x,d=i.y,f=i.right,p=i.bottom,T=0;if(n>=h&&n<=f&&r>=d&&r<=p||o>=h&&o<=f&&a>=d&&a<=p)return!0;if(n<h&&o>=h){if((T=r+(a-r)*(h-n)/(o-n))>d&&T<=p)return!0}else if(n>f&&o<=f&&(T=r+(a-r)*(f-n)/(o-n))>=d&&T<=p)return!0;if(r<d&&a>=d){if((T=n+(o-n)*(d-r)/(a-r))>=h&&T<=f)return!0}else if(r>p&&a<=p&&(T=n+(o-n)*(p-r)/(a-r))>=h&&T<=f)return!0;return!1}},function(t,i,n){var r=n(96),o=n(57),a=n(235),h=n(490);t.exports=function(t,i){if(i.left>t.right||i.right<t.left||i.top>t.bottom||i.bottom<t.top)return!1;var n=i.getLineA(),d=i.getLineB(),f=i.getLineC();if(o(t,n.x1,n.y1)||o(t,n.x2,n.y2))return!0;if(o(t,d.x1,d.y1)||o(t,d.x2,d.y2))return!0;if(o(t,f.x1,f.y1)||o(t,f.x2,f.y2))return!0;var p=t.getLineA(),T=t.getLineB(),b=t.getLineC(),S=t.getLineD();if(r(n,p)||r(n,T)||r(n,b)||r(n,S))return!0;if(r(d,p)||r(d,T)||r(d,b)||r(d,S))return!0;if(r(f,p)||r(f,T)||r(f,b)||r(f,S))return!0;var A=h(t);return a(i,A,!0).length>0}},function(t,i){t.exports=function(t,i){return void 0===i&&(i=[]),i.push({x:t.x,y:t.y}),i.push({x:t.right,y:t.y}),i.push({x:t.right,y:t.bottom}),i.push({x:t.x,y:t.bottom}),i}},function(t,i,n){var r=n(233),o=n(115);t.exports=function(t,i){return!(t.left>i.right||t.right<i.left||t.top>i.bottom||t.bottom<i.top||!o(t,i.x,i.y)&&!r(t.getLineA(),i)&&!r(t.getLineB(),i)&&!r(t.getLineC(),i))}},function(t,i,n){var r=n(4),o=n(493),a=n(96);t.exports=function(t,i,n){if(void 0===n&&(n=[]),o(t,i))for(var h=t.getLineA(),d=t.getLineB(),f=t.getLineC(),p=[new r,new r,new r],T=[a(h,i,p[0]),a(d,i,p[1]),a(f,i,p[2])],b=0;b<3;b++)T[b]&&n.push(p[b]);return n}},function(t,i,n){var r=n(96);t.exports=function(t,i){return!!(t.contains(i.x1,i.y1)||t.contains(i.x2,i.y2)||r(t.getLineA(),i)||r(t.getLineB(),i)||r(t.getLineC(),i))}},function(t,i,n){var r=n(235),o=n(495),a=n(96);t.exports=function(t,i){if(t.left>i.right||t.right<i.left||t.top>i.bottom||t.bottom<i.top)return!1;var n=t.getLineA(),h=t.getLineB(),d=t.getLineC(),f=i.getLineA(),p=i.getLineB(),T=i.getLineC();if(a(n,f)||a(n,p)||a(n,T))return!0;if(a(h,f)||a(h,p)||a(h,T))return!0;if(a(d,f)||a(d,p)||a(d,T))return!0;var b=o(t),S=r(i,b,!0);return S.length>0||(b=o(i),(S=r(t,b,!0)).length>0)}},function(t,i){t.exports=function(t,i){return void 0===i&&(i=[]),i.push({x:t.x1,y:t.y1}),i.push({x:t.x2,y:t.y2}),i.push({x:t.x3,y:t.y3}),i}},function(t,i){t.exports=function(t,i,n){void 0===n&&(n=1);var r=i.x1,o=i.y1,a=i.x2,h=i.y2,d=t.x,f=t.y,p=(a-r)*(a-r)+(h-o)*(h-o);if(0===p)return!1;var T=((d-r)*(a-r)+(f-o)*(h-o))/p;if(T<0)return Math.sqrt((r-d)*(r-d)+(o-f)*(o-f))<=n;if(T>=0&&T<=1){var b=((o-f)*(a-r)-(r-d)*(h-o))/p;return Math.abs(b)*Math.sqrt(p)<=n}return Math.sqrt((a-d)*(a-d)+(h-f)*(h-f))<=n}},function(t,i,n){var r=n(14),o=n(68),a=n(97);t.exports=function(t){var i=a(t)-r.TAU;return o(i,-Math.PI,Math.PI)}},function(t,i){var n=!0,r="untitled",o="",a="";function stripComments(t){var i=t.indexOf("#");return i>-1?t.substring(0,i):t}function currentModel(t){return 0===t.models.length&&t.models.push({faces:[],name:r,textureCoords:[],vertexNormals:[],vertices:[]}),o="",t.models[t.models.length-1]}function parseObject(t,i){var n=t.length>=2?t[1]:r;i.models.push({faces:[],name:n,textureCoords:[],vertexNormals:[],vertices:[]}),o=""}function parseGroup(t){2===t.length&&(o=t[1])}function parseVertexCoords(t,i){var n=t.length,r=n>=2?parseFloat(t[1]):0,o=n>=3?parseFloat(t[2]):0,a=n>=4?parseFloat(t[3]):0;currentModel(i).vertices.push({x:r,y:o,z:a})}function parseTextureCoords(t,i){var r=t.length,o=r>=2?parseFloat(t[1]):0,a=r>=3?parseFloat(t[2]):0,h=r>=4?parseFloat(t[3]):0;isNaN(o)&&(o=0),isNaN(a)&&(a=0),isNaN(h)&&(h=0),n&&(a=1-a),currentModel(i).textureCoords.push({u:o,v:a,w:h})}function parseVertexNormal(t,i){var n=t.length,r=n>=2?parseFloat(t[1]):0,o=n>=3?parseFloat(t[2]):0,a=n>=4?parseFloat(t[3]):0;currentModel(i).vertexNormals.push({x:r,y:o,z:a})}function parsePolygon(t,i){var n=t.length-1;if(!(n<3)){for(var r={group:o,material:a,vertices:[]},h=0;h<n;h++){var d=t[h+1].split("/"),f=d.length;if(!(f<1||f>3)){var p=0,T=0,b=0;p=parseInt(d[0],10),f>1&&""!==d[1]&&(T=parseInt(d[1],10)),f>2&&(b=parseInt(d[2],10)),0!==p&&(p<0&&(p=currentModel(i).vertices.length+1+p),T-=1,p-=1,b-=1,r.vertices.push({textureCoordsIndex:T,vertexIndex:p,vertexNormalIndex:b}))}}currentModel(i).faces.push(r)}}function parseMtlLib(t,i){t.length>=2&&i.materialLibraries.push(t[1])}function parseUseMtl(t){t.length>=2&&(a=t[1])}t.exports=function(t,i){void 0===i&&(i=!0),n=i;var r={materials:{},materialLibraries:[],models:[]};o="",a="";for(var h=t.split("\n"),d=0;d<h.length;d++){var f=stripComments(h[d]).replace(/\s\s+/g," ").trim().split(" ");switch(f[0].toLowerCase()){case"o":parseObject(f,r);break;case"g":parseGroup(f);break;case"v":parseVertexCoords(f,r);break;case"vt":parseTextureCoords(f,r);break;case"vn":parseVertexNormal(f,r);break;case"f":parsePolygon(f,r);break;case"mtllib":parseMtlLib(f,r);break;case"usemtl":parseUseMtl(f)}}return r}},function(t,i,n){var r=n(103);t.exports=function(t){for(var i={},n=t.split("\n"),o="",a=0;a<n.length;a++){var h=n[a].trim();if(0!==h.indexOf("#")&&""!==h){var d=h.replace(/\s\s+/g," ").trim().split(" ");switch(d[0].toLowerCase()){case"newmtl":o=d[1];break;case"kd":var f=Math.floor(255*d[1]),p=d.length>=2?Math.floor(255*d[2]):f,T=d.length>=3?Math.floor(255*d[3]):f;i[o]=r(f,p,T)}}}return i}},function(t,i){t.exports=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)}},function(t,i){t.exports=function(t){return t.x*t.x+t.y*t.y}},function(t,i,n){var r=n(10);r.Area=n(1267),r.Ceil=n(1268),r.CeilAll=n(1269),r.CenterOn=n(190),r.Clone=n(1270),r.Contains=n(57),r.ContainsPoint=n(1271),r.ContainsRect=n(503),r.CopyFrom=n(1272),r.Decompose=n(490),r.Equals=n(1273),r.FitInside=n(1274),r.FitOutside=n(1275),r.Floor=n(1276),r.FloorAll=n(1277),r.FromPoints=n(199),r.FromXY=n(1278),r.GetAspectRatio=n(237),r.GetCenter=n(1279),r.GetPoint=n(171),r.GetPoints=n(306),r.GetSize=n(1280),r.Inflate=n(1281),r.Intersection=n(1282),r.MarchingAnts=n(316),r.MergePoints=n(1283),r.MergeRect=n(1284),r.MergeXY=n(1285),r.Offset=n(1286),r.OffsetPoint=n(1287),r.Overlaps=n(1288),r.Perimeter=n(130),r.PerimeterPoint=n(1289),r.Random=n(174),r.RandomOutside=n(1290),r.SameDimensions=n(1291),r.Scale=n(1292),r.Union=n(441),t.exports=r},function(t,i){t.exports=function(t,i){return!(i.width*i.height>t.width*t.height)&&i.x>t.x&&i.x<t.right&&i.right>t.x&&i.right<t.right&&i.y>t.y&&i.y<t.bottom&&i.bottom>t.y&&i.bottom<t.bottom}},function(t,i,n){var r=n(4);t.exports=function(t,i){return void 0===i&&(i=new r),i.x=(t.x1+t.x2+t.x3)/3,i.y=(t.y1+t.y2+t.y3)/3,i}},function(t,i){t.exports=function(t,i,n){return t.x1+=i,t.y1+=n,t.x2+=i,t.y2+=n,t.x3+=i,t.y3+=n,t}},function(t,i,n){var r=n(4);function getLength(t,i,n,r){var o=t-n,a=i-r,h=o*o+a*a;return Math.sqrt(h)}t.exports=function(t,i){void 0===i&&(i=new r);var n=t.x1,o=t.y1,a=t.x2,h=t.y2,d=t.x3,f=t.y3,p=getLength(d,f,a,h),T=getLength(n,o,d,f),b=getLength(a,h,n,o),S=p+T+b;return i.x=(n*p+a*T+d*b)/S,i.y=(o*p+h*T+f*b)/S,i}},function(t,i){t.exports=function(t,i){return function(n,r,o,a){var h=t.getPixelAlpha(r,o,a.texture.key,a.frame.name);return h&&h>=i}}},function(t,i){t.exports=function(t,i,n){return{gameObject:t,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:i,hitAreaCallback:n,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}}},function(t,i,n){var r=new(n(0))({initialize:function Axis2(t,i){this.pad=t,this.events=t.events,this.index=i,this.value=0,this.threshold=.1},update:function(t){this.value=t},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});t.exports=r},function(t,i,n){var r=n(0),o=n(239),a=new r({initialize:function Button2(t,i){this.pad=t,this.events=t.manager,this.index=i,this.value=0,this.threshold=1,this.pressed=!1},update:function(t){this.value=t;var i=this.pad,n=this.index;t>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(o.BUTTON_DOWN,i,this,t),this.pad.emit(o.GAMEPAD_BUTTON_DOWN,n,t,this)):this.pressed&&(this.pressed=!1,this.events.emit(o.BUTTON_UP,i,this,t),this.pad.emit(o.GAMEPAD_BUTTON_UP,n,t,this))},destroy:function(){this.pad=null,this.events=null}});t.exports=a},function(t,i,n){var r=n(509),o=n(510),a=n(0),h=n(9),d=n(3),f=new a({Extends:h,initialize:function Gamepad2(t,i){h.call(this),this.manager=t,this.pad=i,this.id=i.id,this.index=i.index;for(var n=[],a=0;a<i.buttons.length;a++)n.push(new o(this,a));this.buttons=n;var f=[];for(a=0;a<i.axes.length;a++)f.push(new r(this,a));this.axes=f,this.vibration=i.vibrationActuator;var p={value:0,pressed:!1};this._LCLeft=n[14]?n[14]:p,this._LCRight=n[15]?n[15]:p,this._LCTop=n[12]?n[12]:p,this._LCBottom=n[13]?n[13]:p,this._RCLeft=n[2]?n[2]:p,this._RCRight=n[1]?n[1]:p,this._RCTop=n[3]?n[3]:p,this._RCBottom=n[0]?n[0]:p,this._FBLeftTop=n[4]?n[4]:p,this._FBLeftBottom=n[6]?n[6]:p,this._FBRightTop=n[5]?n[5]:p,this._FBRightBottom=n[7]?n[7]:p;var T={value:0};this._HAxisLeft=f[0]?f[0]:T,this._VAxisLeft=f[1]?f[1]:T,this._HAxisRight=f[2]?f[2]:T,this._VAxisRight=f[3]?f[3]:T,this.leftStick=new d,this.rightStick=new d,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(t){return this.axes[t].getValue()},setAxisThreshold:function(t){for(var i=0;i<this.axes.length;i++)this.axes[i].threshold=t},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(t){return this.buttons[t].value},isButtonDown:function(t){return this.buttons[t].pressed},update:function(t){if(!(t.timestamp<this._created)){var i,n=this.buttons,r=t.buttons,o=n.length;for(i=0;i<o;i++)n[i].update(r[i].value);var a=this.axes,h=t.axes;for(o=a.length,i=0;i<o;i++)a[i].update(h[i]);o>=2&&(this.leftStick.set(a[0].getValue(),a[1].getValue()),o>=4&&this.rightStick.set(a[2].getValue(),a[3].getValue()))}},destroy:function(){var t;for(this.removeAllListeners(),this.manager=null,this.pad=null,t=0;t<this.buttons.length;t++)this.buttons[t].destroy();for(t=0;t<this.axes.length;t++)this.axes[t].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});t.exports=f},function(t,i,n){var r=n(0),o=n(9),a=n(154),h=new r({Extends:o,initialize:function Key2(t,i){o.call(this),this.plugin=t,this.keyCode=i,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(t){return this.emitOnRepeat=t,this},onDown:function(t){this.originalEvent=t,this.enabled&&(this.altKey=t.altKey,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.location=t.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(a.DOWN,this,t):(this.isDown=!0,this.isUp=!1,this.timeDown=t.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(a.DOWN,this,t)))},onUp:function(t){this.originalEvent=t,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=t.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(a.UP,this,t))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});t.exports=h},function(t,i,n){var r=n(0),o=n(154),a=n(2),h=n(514),d=n(516),f=new r({initialize:function KeyCombo2(t,i,n){if(void 0===n&&(n={}),i.length<2)return!1;this.manager=t,this.enabled=!0,this.keyCodes=[];for(var r=0;r<i.length;r++){var f=i[r];"string"==typeof f?this.keyCodes.push(f.toUpperCase().charCodeAt(0)):"number"==typeof f?this.keyCodes.push(f):f.hasOwnProperty("keyCode")&&this.keyCodes.push(f.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=a(n,"resetOnWrongKey",!0),this.maxKeyDelay=a(n,"maxKeyDelay",0),this.resetOnMatch=a(n,"resetOnMatch",!1),this.deleteOnMatch=a(n,"deleteOnMatch",!1);var p=this;this.onKeyDown=function(t){!p.matched&&p.enabled&&h(t,p)&&(p.manager.emit(o.COMBO_MATCH,p,t),p.resetOnMatch?d(p):p.deleteOnMatch&&p.destroy())},this.manager.on(o.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(o.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});t.exports=f},function(t,i,n){var r=n(515);t.exports=function(t,i){if(i.matched)return!0;var n=!1,o=!1;if(t.keyCode===i.current)if(i.index>0&&i.maxKeyDelay>0){var a=i.timeLastMatched+i.maxKeyDelay;t.timeStamp<=a&&(o=!0,n=r(t,i))}else o=!0,n=r(t,i);return!o&&i.resetOnWrongKey&&(i.index=0,i.current=i.keyCodes[0]),n&&(i.timeLastMatched=t.timeStamp,i.matched=!0,i.timeMatched=t.timeStamp),n}},function(t,i){t.exports=function(t,i){return i.timeLastMatched=t.timeStamp,i.index++,i.index===i.size||(i.current=i.keyCodes[i.index],!1)}},function(t,i){t.exports=function(t){return t.current=t.keyCodes[0],t.index=0,t.timeLastMatched=0,t.matched=!1,t.timeMatched=0,t}},function(t,i,n){var r=n(240);t.exports=function(t,i){var n=r(i,t.xhrSettings),o=new XMLHttpRequest;if(o.open("GET",t.src,n.async,n.user,n.password),o.responseType=t.xhrSettings.responseType,o.timeout=n.timeout,n.headers)for(var a in n.headers)o.setRequestHeader(a,n.headers[a]);return n.header&&n.headerValue&&o.setRequestHeader(n.header,n.headerValue),n.requestedWith&&o.setRequestHeader("X-Requested-With",n.requestedWith),n.overrideMimeType&&o.overrideMimeType(n.overrideMimeType),n.withCredentials&&(o.withCredentials=!0),o.onload=t.onLoad.bind(t,o),o.onerror=t.onError.bind(t,o),o.onprogress=t.onProgress.bind(t),o.send(),o}},function(t,i,n){var r=n(0),o=n(21),a=n(23),h=n(8),d=n(2),f=n(519),p=n(7),T=new r({Extends:a,initialize:function AudioFile2(t,i,n,r,o){if(p(i)){var h=i;i=d(h,"key"),r=d(h,"xhrSettings"),o=d(h,"context",o)}var f={type:"audio",cache:t.cacheManager.audio,extension:n.type,responseType:"arraybuffer",key:i,url:n.url,xhrSettings:r,config:{context:o}};a.call(this,t,f)},onProcess:function(){this.state=o.FILE_PROCESSING;var t=this;this.config.context.decodeAudioData(this.xhrLoader.response,(function(i){t.data=i,t.onProcessComplete()}),(function(i){console.error("Error decoding audio: "+t.key+" - ",i?i.message:null),t.onProcessError()})),this.config.context=null}});T.create=function(t,i,n,r,o){var a=t.systems.game,h=a.config.audio,b=a.device.audio;p(i)&&(n=d(i,"url",[]),r=d(i,"config",{}));var S=T.getAudioURL(a,n);return S?b.webAudio&&!h.disableWebAudio?new T(t,i,S,o,a.sound.context):new f(t,i,S,r):null},T.getAudioURL=function(t,i){Array.isArray(i)||(i=[i]);for(var n=0;n<i.length;n++){var r=d(i[n],"url",i[n]);if(0===r.indexOf("blob:")||0===r.indexOf("data:"))return{url:r,type:""};var o=r.match(/\.([a-zA-Z0-9]+)($|\?)/);if(o=d(i[n],"type",o?o[1]:"").toLowerCase(),t.device.audio[o])return{url:r,type:o}}return null},h.register("audio",(function(t,i,n,r){var o,a=this.systems.game,h=a.config.audio,d=a.device.audio;if(h.noAudio||!d.webAudio&&!d.audioData)return this;if(Array.isArray(t))for(var f=0;f<t.length;f++)(o=T.create(this,t[f]))&&this.addFile(o);else(o=T.create(this,t,i,n,r))&&this.addFile(o);return this})),t.exports=T},function(t,i,n){var r=n(0),o=n(95),a=n(23),h=n(2),d=n(155),f=n(7),p=new r({Extends:a,initialize:function HTML5AudioFile2(t,i,n,r){if(f(i)){var o=i;i=h(o,"key"),r=h(o,"config",r)}var d={type:"audio",cache:t.cacheManager.audio,extension:n.type,key:i,url:n.url,config:r};a.call(this,t,d),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var t=0;t<this.data.length;t++){var i=this.data[t];i.oncanplaythrough=null,i.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(t){var i=t.target;i.oncanplaythrough=null,i.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(o.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var t=this.config&&this.config.instances||1;this.filesTotal=t,this.filesLoaded=0,this.percentComplete=0;for(var i=0;i<t;i++){var n=new Audio;n.dataset||(n.dataset={}),n.dataset.name=this.key+("0"+i).slice(-2),n.dataset.used="false",this.locked?n.dataset.locked="true":(n.dataset.locked="false",n.preload="auto",n.oncanplaythrough=this.onProgress.bind(this),n.onerror=this.onError.bind(this)),this.data.push(n)}for(i=0;i<this.data.length;i++)(n=this.data[i]).src=d(this,this.loader.baseURL),this.locked||n.load();this.locked&&setTimeout(this.onLoad.bind(this))}});t.exports=p},function(t,i,n){var r=n(0),o=n(21),a=n(23),h=n(8),d=n(2),f=n(7),p=new r({Extends:a,initialize:function ScriptFile2(t,i,n,r){var o="js";if(f(i)){var h=i;i=d(h,"key"),n=d(h,"url"),r=d(h,"xhrSettings"),o=d(h,"extension",o)}var p={type:"script",cache:!1,extension:o,responseType:"text",key:i,url:n,xhrSettings:r};a.call(this,t,p)},onProcess:function(){this.state=o.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});h.register("script",(function(t,i,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new p(this,t[r]));else this.addFile(new p(this,t,i,n));return this})),t.exports=p},function(t,i,n){var r=n(522),o=n(157),a=n(0),h=n(62),d=n(524),f=n(525),p=new a({initialize:function Factory2(t){this.world=t,this.scene=t.scene,this.sys=t.scene.sys},collider:function(t,i,n,r,o){return this.world.addCollider(t,i,n,r,o)},overlap:function(t,i,n,r,o){return this.world.addOverlap(t,i,n,r,o)},existing:function(t,i){var n=i?h.STATIC_BODY:h.DYNAMIC_BODY;return this.world.enableBody(t,n),t},staticImage:function(t,i,n,o){var a=new r(this.scene,t,i,n,o);return this.sys.displayList.add(a),this.world.enableBody(a,h.STATIC_BODY),a},image:function(t,i,n,o){var a=new r(this.scene,t,i,n,o);return this.sys.displayList.add(a),this.world.enableBody(a,h.DYNAMIC_BODY),a},staticSprite:function(t,i,n,r){var a=new o(this.scene,t,i,n,r);return this.sys.displayList.add(a),this.sys.updateList.add(a),this.world.enableBody(a,h.STATIC_BODY),a},sprite:function(t,i,n,r){var a=new o(this.scene,t,i,n,r);return this.sys.displayList.add(a),this.sys.updateList.add(a),this.world.enableBody(a,h.DYNAMIC_BODY),a},staticGroup:function(t,i){return this.sys.updateList.add(new f(this.world,this.world.scene,t,i))},group:function(t,i){return this.sys.updateList.add(new d(this.world,this.world.scene,t,i))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});t.exports=p},function(t,i,n){var r=n(0),o=n(243),a=n(125),h=new r({Extends:a,Mixins:[o.Acceleration,o.Angular,o.Bounce,o.Debug,o.Drag,o.Enable,o.Friction,o.Gravity,o.Immovable,o.Mass,o.Pushable,o.Size,o.Velocity],initialize:function ArcadeImage2(t,i,n,r,o){a.call(this,t,i,n,r,o),this.body=null}});t.exports=h},function(t,i,n){var r=n(244),o=n(65),a=n(231),h=n(151);t.exports=function(t,i,n,d,f,p){var T=r(t,i-d,n-d,2*d,2*d,f,p);if(0===T.length)return T;for(var b=new o(i,n,d),S=new o,A=[],P=0;P<T.length;P++){var O=T[P];O.isCircle?(S.setTo(O.center.x,O.center.y,O.halfWidth),a(b,S)&&A.push(O)):h(b,O)&&A.push(O)}return A}},function(t,i,n){var r=n(157),o=n(0),a=n(62),h=n(2),d=n(113),f=n(7),p=new o({Extends:d,initialize:function PhysicsGroup2(t,i,n,o){if(n||o)if(f(n))o=n,n=null,o.internalCreateCallback=this.createCallbackHandler,o.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(n)&&f(n[0])){o=n[0];var p=this;n.forEach((function(t){t.internalCreateCallback=p.createCallbackHandler,t.internalRemoveCallback=p.removeCallbackHandler})),n=null}else o={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else o={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=t,o.classType=h(o,"classType",r),this.physicsType=a.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:h(o,"collideWorldBounds",!1),setBoundsRectangle:h(o,"customBoundsRectangle",null),setAccelerationX:h(o,"accelerationX",0),setAccelerationY:h(o,"accelerationY",0),setAllowDrag:h(o,"allowDrag",!0),setAllowGravity:h(o,"allowGravity",!0),setAllowRotation:h(o,"allowRotation",!0),setBounceX:h(o,"bounceX",0),setBounceY:h(o,"bounceY",0),setDragX:h(o,"dragX",0),setDragY:h(o,"dragY",0),setEnable:h(o,"enable",!0),setGravityX:h(o,"gravityX",0),setGravityY:h(o,"gravityY",0),setFrictionX:h(o,"frictionX",0),setFrictionY:h(o,"frictionY",0),setMaxVelocityX:h(o,"maxVelocityX",1e4),setMaxVelocityY:h(o,"maxVelocityY",1e4),setVelocityX:h(o,"velocityX",0),setVelocityY:h(o,"velocityY",0),setAngularVelocity:h(o,"angularVelocity",0),setAngularAcceleration:h(o,"angularAcceleration",0),setAngularDrag:h(o,"angularDrag",0),setMass:h(o,"mass",1),setImmovable:h(o,"immovable",!1)},d.call(this,i,n,o),this.type="PhysicsGroup"},createCallbackHandler:function(t){t.body||this.world.enableBody(t,a.DYNAMIC_BODY);var i=t.body;for(var n in this.defaults)i[n](this.defaults[n])},removeCallbackHandler:function(t){t.body&&this.world.disableBody(t)},setVelocity:function(t,i,n){void 0===n&&(n=0);for(var r=this.getChildren(),o=0;o<r.length;o++)r[o].body.velocity.set(t+o*n,i+o*n);return this},setVelocityX:function(t,i){void 0===i&&(i=0);for(var n=this.getChildren(),r=0;r<n.length;r++)n[r].body.velocity.x=t+r*i;return this},setVelocityY:function(t,i){void 0===i&&(i=0);for(var n=this.getChildren(),r=0;r<n.length;r++)n[r].body.velocity.y=t+r*i;return this}});t.exports=p},function(t,i,n){var r=n(157),o=n(0),a=n(62),h=n(2),d=n(113),f=n(7),p=new o({Extends:d,initialize:function StaticPhysicsGroup2(t,i,n,o){n||o?f(n)?(o=n,n=null,o.internalCreateCallback=this.createCallbackHandler,o.internalRemoveCallback=this.removeCallbackHandler,o.createMultipleCallback=this.createMultipleCallbackHandler,o.classType=h(o,"classType",r)):Array.isArray(n)&&f(n[0])?(o=n,n=null,o.forEach((function(t){t.internalCreateCallback=this.createCallbackHandler,t.internalRemoveCallback=this.removeCallbackHandler,t.createMultipleCallback=this.createMultipleCallbackHandler,t.classType=h(t,"classType",r)}))):o={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler}:o={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:r},this.world=t,this.physicsType=a.STATIC_BODY,d.call(this,i,n,o),this.type="StaticPhysicsGroup"},createCallbackHandler:function(t){t.body||this.world.enableBody(t,a.STATIC_BODY)},removeCallbackHandler:function(t){t.body&&this.world.disableBody(t)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var t=this.children.entries,i=0;i<t.length;i++)t[i].body.reset();return this}});t.exports=p},function(t,i,n){var r=n(350),o=n(527),a=n(18),h=n(0),d=n(528),f=n(62),p=n(50),T=n(9),b=n(245),S=n(124),A=n(354),P=n(355),O=n(246),L=n(247),D=n(529),I=n(6),F=n(14),B=n(211),N=n(530),Y=n(10),X=n(531),G=n(532),U=n(537),V=n(538),z=n(149),W=n(539),H=n(248),q=n(25),Z=n(3),K=n(68),J=new h({Extends:T,initialize:function World3(t,i){T.call(this),this.scene=t,this.bodies=new z,this.staticBodies=new z,this.pendingDestroy=new z,this.colliders=new B,this.gravity=new Z(I(i,"gravity.x",0),I(i,"gravity.y",0)),this.bounds=new Y(I(i,"x",0),I(i,"y",0),I(i,"width",t.sys.scale.width),I(i,"height",t.sys.scale.height)),this.checkCollision={up:I(i,"checkCollision.up",!0),down:I(i,"checkCollision.down",!0),left:I(i,"checkCollision.left",!0),right:I(i,"checkCollision.right",!0)},this.fps=I(i,"fps",60),this.fixedStep=I(i,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=I(i,"timeScale",1),this.OVERLAP_BIAS=I(i,"overlapBias",4),this.TILE_BIAS=I(i,"tileBias",16),this.forceX=I(i,"forceX",!1),this.isPaused=I(i,"isPaused",!1),this._total=0,this.drawDebug=I(i,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:I(i,"debugShowBody",!0),debugShowStaticBody:I(i,"debugShowStaticBody",!0),debugShowVelocity:I(i,"debugShowVelocity",!0),bodyDebugColor:I(i,"debugBodyColor",16711935),staticBodyDebugColor:I(i,"debugStaticBodyColor",255),velocityDebugColor:I(i,"debugVelocityColor",65280)},this.maxEntries=I(i,"maxEntries",16),this.useTree=I(i,"useTree",!0),this.tree=new X(this.maxEntries),this.staticTree=new X(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new q,this._tempMatrix2=new q,this.drawDebug&&this.createDebugGraphic()},enable:function(t,i){void 0===i&&(i=f.DYNAMIC_BODY),Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var r=t[n];if(r.isParent)for(var o=r.getChildren(),a=0;a<o.length;a++){var h=o[a];h.isParent?this.enable(h,i):this.enableBody(h,i)}else this.enableBody(r,i)}},enableBody:function(t,i){return void 0===i&&(i=f.DYNAMIC_BODY),t.body||(i===f.DYNAMIC_BODY?t.body=new o(this,t):i===f.STATIC_BODY&&(t.body=new W(this,t))),this.add(t.body),t},add:function(t){return t.physicsType===f.DYNAMIC_BODY?this.bodies.set(t):t.physicsType===f.STATIC_BODY&&(this.staticBodies.set(t),this.staticTree.insert(t)),t.enable=!0,t},disable:function(t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var n=t[i];if(n.isParent)for(var r=n.getChildren(),o=0;o<r.length;o++){var a=r[o];a.isParent?this.disable(a):this.disableBody(a.body)}else this.disableBody(n.body)}},disableBody:function(t){this.remove(t),t.enable=!1},remove:function(t){t.physicsType===f.DYNAMIC_BODY?(this.tree.remove(t),this.bodies.delete(t)):t.physicsType===f.STATIC_BODY&&(this.staticBodies.delete(t),this.staticTree.remove(t))},createDebugGraphic:function(){var t=this.scene.sys.add.graphics({x:0,y:0});return t.setDepth(Number.MAX_VALUE),this.debugGraphic=t,this.drawDebug=!0,t},setBounds:function(t,i,n,r,o,a,h,d){return this.bounds.setTo(t,i,n,r),void 0!==o&&this.setBoundsCollision(o,a,h,d),this},setBoundsCollision:function(t,i,n,r){return void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===n&&(n=!0),void 0===r&&(r=!0),this.checkCollision.left=t,this.checkCollision.right=i,this.checkCollision.up=n,this.checkCollision.down=r,this},pause:function(){return this.isPaused=!0,this.emit(b.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(b.RESUME),this},addCollider:function(t,i,n,r,o){void 0===n&&(n=null),void 0===r&&(r=null),void 0===o&&(o=n);var a=new d(this,!1,t,i,n,r,o);return this.colliders.add(a),a},addOverlap:function(t,i,n,r,o){void 0===n&&(n=null),void 0===r&&(r=null),void 0===o&&(o=n);var a=new d(this,!0,t,i,n,r,o);return this.colliders.add(a),a},removeCollider:function(t){return this.colliders.remove(t),this},setFPS:function(t){return this.fps=t,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(t,i){if(!this.isPaused&&0!==this.bodies.size){var n,r,o=this._frameTime,a=this._frameTimeMS*this.timeScale;this._elapsed+=i;var h=this.bodies.entries,d=this._elapsed>=a;for(this.fixedStep||(o=.001*i,d=!0,this._elapsed=0),n=0;n<h.length;n++)(r=h[n]).enable&&r.preUpdate(d,o);if(d){this._elapsed-=a,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(h));var f=this.colliders.update();for(n=0;n<f.length;n++){var p=f[n];p.active&&p.update()}this.emit(b.WORLD_STEP,o)}for(;this._elapsed>=a;)this._elapsed-=a,this.step(o)}},step:function(t){var i,n,r=this.bodies.entries,o=r.length;for(i=0;i<o;i++)(n=r[i]).enable&&n.update(t);this.useTree&&(this.tree.clear(),this.tree.load(r));var a=this.colliders.update();for(i=0;i<a.length;i++){var h=a[i];h.active&&h.update()}this.emit(b.WORLD_STEP,t),this.stepsLastFrame++},postUpdate:function(){var t,i,n=this.bodies.entries,r=n.length,o=this.bodies,a=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,t=0;t<r;t++)(i=n[t]).enable&&i.postUpdate();if(this.drawDebug){var h=this.debugGraphic;for(h.clear(),t=0;t<r;t++)(i=n[t]).willDrawDebug()&&i.drawDebug(h);for(r=(n=a.entries).length,t=0;t<r;t++)(i=n[t]).willDrawDebug()&&i.drawDebug(h)}var d=this.pendingDestroy;if(d.size>0){var p=this.tree,T=this.staticTree;for(r=(n=d.entries).length,t=0;t<r;t++)(i=n[t]).physicsType===f.DYNAMIC_BODY?(p.remove(i),o.delete(i)):i.physicsType===f.STATIC_BODY&&(T.remove(i),a.delete(i)),i.world=void 0,i.gameObject=void 0;d.clear()}},updateMotion:function(t,i){t.allowRotation&&this.computeAngularVelocity(t,i),this.computeVelocity(t,i)},computeAngularVelocity:function(t,i){var n=t.angularVelocity,r=t.angularAcceleration,o=t.angularDrag,h=t.maxAngular;r?n+=r*i:t.allowDrag&&o&&(A(n-(o*=i),0,.1)?n-=o:P(n+o,0,.1)?n+=o:n=0);var d=(n=a(n,-h,h))-t.angularVelocity;t.angularVelocity+=d,t.rotation+=t.angularVelocity*i},computeVelocity:function(t,i){var n=t.velocity.x,r=t.acceleration.x,o=t.drag.x,h=t.maxVelocity.x,d=t.velocity.y,f=t.acceleration.y,p=t.drag.y,T=t.maxVelocity.y,b=t.speed,O=t.maxSpeed,L=t.allowDrag,D=t.useDamping;t.allowGravity&&(n+=(this.gravity.x+t.gravity.x)*i,d+=(this.gravity.y+t.gravity.y)*i),r?n+=r*i:L&&o&&(D?(n*=o=Math.pow(o,i),b=Math.sqrt(n*n+d*d),S(b,0,.001)&&(n=0)):A(n-(o*=i),0,.01)?n-=o:P(n+o,0,.01)?n+=o:n=0),f?d+=f*i:L&&p&&(D?(d*=p=Math.pow(p,i),b=Math.sqrt(n*n+d*d),S(b,0,.001)&&(d=0)):A(d-(p*=i),0,.01)?d-=p:P(d+p,0,.01)?d+=p:d=0),n=a(n,-h,h),d=a(d,-T,T),t.velocity.set(n,d),O>-1&&b>O&&(t.velocity.normalize().scale(O),b=O),t.speed=b},separate:function(t,i,n,r,o,a){if(!a&&!t.enable||!i.enable||t.checkCollision.none||i.checkCollision.none||!this.intersects(t,i))return!1;if(n&&!1===n.call(r,t.gameObject,i.gameObject))return!1;if(t.isCircle&&i.isCircle)return this.separateCircle(t,i,o);if(t.isCircle!==i.isCircle){var h=t.isCircle?i:t,d=t.isCircle?t:i,f={x:h.x,y:h.y,right:h.right,bottom:h.bottom},p=d.center;if((p.y<f.y||p.y>f.bottom)&&(p.x<f.x||p.x>f.right))return this.separateCircle(t,i,o)}var T=!1,S=!1;o?(T=U(t,i,o,this.OVERLAP_BIAS),S=V(t,i,o,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+t.gravity.y)<Math.abs(this.gravity.x+t.gravity.x)?(T=U(t,i,o,this.OVERLAP_BIAS),this.intersects(t,i)&&(S=V(t,i,o,this.OVERLAP_BIAS))):(S=V(t,i,o,this.OVERLAP_BIAS),this.intersects(t,i)&&(T=U(t,i,o,this.OVERLAP_BIAS)));var A=T||S;return A&&(o?(t.onOverlap||i.onOverlap)&&this.emit(b.OVERLAP,t.gameObject,i.gameObject,t,i):(t.onCollide||i.onCollide)&&this.emit(b.COLLIDE,t.gameObject,i.gameObject,t,i)),A},separateCircle:function(t,i,n,o){O(t,i,!1,o),L(t,i,!1,o);var a=0;if(t.isCircle!==i.isCircle){var h={x:i.isCircle?t.position.x:i.position.x,y:i.isCircle?t.position.y:i.position.y,right:i.isCircle?t.right:i.right,bottom:i.isCircle?t.bottom:i.bottom},d={x:t.isCircle?t.center.x:i.center.x,y:t.isCircle?t.center.y:i.center.y,radius:t.isCircle?t.halfWidth:i.halfWidth};d.y<h.y?d.x<h.x?a=p(d.x,d.y,h.x,h.y)-d.radius:d.x>h.right&&(a=p(d.x,d.y,h.right,h.y)-d.radius):d.y>h.bottom&&(d.x<h.x?a=p(d.x,d.y,h.x,h.bottom)-d.radius:d.x>h.right&&(a=p(d.x,d.y,h.right,h.bottom)-d.radius)),a*=-1}else a=t.halfWidth+i.halfWidth-p(t.center.x,t.center.y,i.center.x,i.center.y);if(t.overlapR=a,i.overlapR=a,n||0===a||t.immovable&&i.immovable||t.customSeparateX||i.customSeparateX)return 0!==a&&(t.onOverlap||i.onOverlap)&&this.emit(b.OVERLAP,t.gameObject,i.gameObject,t,i),0!==a;var f=t.center.x-i.center.x,T=t.center.y-i.center.y,S=Math.sqrt(Math.pow(f,2)+Math.pow(T,2)),A=(i.center.x-t.center.x)/S||0,P=(i.center.y-t.center.y)/S||0,D=2*(t.velocity.x*A+t.velocity.y*P-i.velocity.x*A-i.velocity.y*P)/(t.mass+i.mass);(t.immovable||i.immovable)&&(D*=2),t.immovable||(t.velocity.x=t.velocity.x-D/t.mass*A,t.velocity.y=t.velocity.y-D/t.mass*P),i.immovable||(i.velocity.x=i.velocity.x+D/i.mass*A,i.velocity.y=i.velocity.y+D/i.mass*P),t.immovable||i.immovable||(a/=2);var I=r(t.center,i.center),B=(a+F.EPSILON)*Math.cos(I),N=(a+F.EPSILON)*Math.sin(I);return t.immovable||(t.x-=B,t.y-=N,t.updateCenter()),i.immovable||(i.x+=B,i.y+=N,i.updateCenter()),t.velocity.x*=t.bounce.x,t.velocity.y*=t.bounce.y,i.velocity.x*=i.bounce.x,i.velocity.y*=i.bounce.y,(t.onCollide||i.onCollide)&&this.emit(b.COLLIDE,t.gameObject,i.gameObject,t,i),!0},intersects:function(t,i){return t!==i&&(t.isCircle||i.isCircle?t.isCircle?i.isCircle?p(t.center.x,t.center.y,i.center.x,i.center.y)<=t.halfWidth+i.halfWidth:this.circleBodyIntersects(t,i):this.circleBodyIntersects(i,t):!(t.right<=i.position.x||t.bottom<=i.position.y||t.position.x>=i.right||t.position.y>=i.bottom))},circleBodyIntersects:function(t,i){var n=a(t.center.x,i.left,i.right),r=a(t.center.y,i.top,i.bottom);return(t.center.x-n)*(t.center.x-n)+(t.center.y-r)*(t.center.y-r)<=t.halfWidth*t.halfWidth},overlap:function(t,i,n,r,o){return void 0===n&&(n=null),void 0===r&&(r=null),void 0===o&&(o=n),this.collideObjects(t,i,n,r,o,!0)},collide:function(t,i,n,r,o){return void 0===n&&(n=null),void 0===r&&(r=null),void 0===o&&(o=n),this.collideObjects(t,i,n,r,o,!1)},collideObjects:function(t,i,n,r,o,a){var h,d;t.isParent&&void 0===t.physicsType&&(t=t.children.entries),i&&i.isParent&&void 0===i.physicsType&&(i=i.children.entries);var f=Array.isArray(t),p=Array.isArray(i);if(this._total=0,f||p)if(!f&&p)for(h=0;h<i.length;h++)this.collideHandler(t,i[h],n,r,o,a);else if(f&&!p)if(i)for(h=0;h<t.length;h++)this.collideHandler(t[h],i,n,r,o,a);else for(h=0;h<t.length;h++){var T=t[h];for(d=h+1;d<t.length;d++)h!==d&&this.collideHandler(T,t[d],n,r,o,a)}else for(h=0;h<t.length;h++)for(d=0;d<i.length;d++)this.collideHandler(t[h],i[d],n,r,o,a);else this.collideHandler(t,i,n,r,o,a);return this._total>0},collideHandler:function(t,i,n,r,o,a){if(void 0===i&&t.isParent)return this.collideGroupVsGroup(t,t,n,r,o,a);if(!t||!i)return!1;if(t.body){if(i.body)return this.collideSpriteVsSprite(t,i,n,r,o,a);if(i.isParent)return this.collideSpriteVsGroup(t,i,n,r,o,a);if(i.isTilemap)return this.collideSpriteVsTilemapLayer(t,i,n,r,o,a)}else if(t.isParent){if(i.body)return this.collideSpriteVsGroup(i,t,n,r,o,a);if(i.isParent)return this.collideGroupVsGroup(t,i,n,r,o,a);if(i.isTilemap)return this.collideGroupVsTilemapLayer(t,i,n,r,o,a)}else if(t.isTilemap){if(i.body)return this.collideSpriteVsTilemapLayer(i,t,n,r,o,a);if(i.isParent)return this.collideGroupVsTilemapLayer(i,t,n,r,o,a)}},collideSpriteVsSprite:function(t,i,n,r,o,a){return!(!t.body||!i.body||(this.separate(t.body,i.body,r,o,a)&&(n&&n.call(o,t,i),this._total++),0))},collideSpriteVsGroup:function(t,i,n,r,o,a){var h,d,p,T=t.body;if(0!==i.length&&T&&T.enable&&!T.checkCollision.none)if(this.useTree||i.physicsType===f.STATIC_BODY){var b=this.treeMinMax;b.minX=T.left,b.minY=T.top,b.maxX=T.right,b.maxY=T.bottom;var S=i.physicsType===f.DYNAMIC_BODY?this.tree.search(b):this.staticTree.search(b);for(d=S.length,h=0;h<d;h++)T!==(p=S[h])&&p.enable&&!p.checkCollision.none&&i.contains(p.gameObject)&&this.separate(T,p,r,o,a,!0)&&(n&&n.call(o,T.gameObject,p.gameObject),this._total++)}else{var A=i.getChildren(),P=i.children.entries.indexOf(t);for(d=A.length,h=0;h<d;h++)(p=A[h].body)&&h!==P&&p.enable&&this.separate(T,p,r,o,a)&&(n&&n.call(o,T.gameObject,p.gameObject),this._total++)}},collideGroupVsTilemapLayer:function(t,i,n,r,o,a){var h=t.getChildren();if(0===h.length)return!1;for(var d=!1,f=0;f<h.length;f++)h[f].body&&this.collideSpriteVsTilemapLayer(h[f],i,n,r,o,a)&&(d=!0);return d},collideTiles:function(t,i,n,r,o){return!(!t.body.enable||0===i.length)&&this.collideSpriteVsTilesHandler(t,i,n,r,o,!1,!1)},overlapTiles:function(t,i,n,r,o){return!(!t.body.enable||0===i.length)&&this.collideSpriteVsTilesHandler(t,i,n,r,o,!0,!1)},collideSpriteVsTilemapLayer:function(t,i,n,r,o,a){var h=t.body;if(!h.enable||h.checkCollision.none)return!1;var d=h.position.x,f=h.position.y,p=h.width,T=h.height,b=i.layer;if(b.tileWidth>b.baseTileWidth){var S=(b.tileWidth-b.baseTileWidth)*i.scaleX;d-=S,p+=S}b.tileHeight>b.baseTileHeight&&(T+=(b.tileHeight-b.baseTileHeight)*i.scaleY);var A=D(d,f,p,T,null,i.scene.cameras.main,i.layer);return 0!==A.length&&this.collideSpriteVsTilesHandler(t,A,n,r,o,a,!0)},collideSpriteVsTilesHandler:function(t,i,n,r,o,a,h){for(var d,f,p=t.body,T={left:0,right:0,top:0,bottom:0},S=!1,A=0;A<i.length;A++){var P=(f=(d=i[A]).tilemapLayer).tileToWorldXY(d.x,d.y);T.left=P.x,T.top=P.y,d.baseHeight!==d.height&&(T.top-=(d.height-d.baseHeight)*f.scaleY),T.right=T.left+d.width*f.scaleX,T.bottom=T.top+d.height*f.scaleY,H(T,p)&&(!r||r.call(o,t,d))&&N(d,t)&&(a||G(A,p,d,T,f,this.TILE_BIAS,h))&&(this._total++,S=!0,n&&n.call(o,t,d),a&&p.onOverlap?this.emit(b.TILE_OVERLAP,t,d,p):p.onCollide&&this.emit(b.TILE_COLLIDE,t,d,p))}return S},collideGroupVsGroup:function(t,i,n,r,o,a){if(0!==t.length&&0!==i.length)for(var h=t.getChildren(),d=0;d<h.length;d++)this.collideSpriteVsGroup(h[d],i,n,r,o,a)},wrap:function(t,i){t.body?this.wrapObject(t,i):t.getChildren?this.wrapArray(t.getChildren(),i):Array.isArray(t)?this.wrapArray(t,i):this.wrapObject(t,i)},wrapArray:function(t,i){for(var n=0;n<t.length;n++)this.wrapObject(t[n],i)},wrapObject:function(t,i){void 0===i&&(i=0),t.x=K(t.x,this.bounds.left-i,this.bounds.right+i),t.y=K(t.y,this.bounds.top-i,this.bounds.bottom+i)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});t.exports=J},function(t,i,n){var r=n(0),o=n(62),a=n(245),h=n(196),d=n(10),f=n(57),p=n(3),T=new r({initialize:function Body2(t,i){var n=i.displayWidth?i.displayWidth:64,r=i.displayHeight?i.displayHeight:64;this.world=t,this.gameObject=i,this.transform={x:i.x,y:i.y,rotation:i.angle,scaleX:i.scaleX,scaleY:i.scaleY,displayOriginX:i.displayOriginX,displayOriginY:i.displayOriginY},this.debugShowBody=t.defaults.debugShowBody,this.debugShowVelocity=t.defaults.debugShowVelocity,this.debugBodyColor=t.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new p,this.position=new p(i.x-i.scaleX*i.displayOriginX,i.y-i.scaleY*i.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=i.angle,this.preRotation=i.angle,this.width=n,this.height=r,this.sourceWidth=n,this.sourceHeight=r,i.frame&&(this.sourceWidth=i.frame.realWidth,this.sourceHeight=i.frame.realHeight),this.halfWidth=Math.abs(n/2),this.halfHeight=Math.abs(r/2),this.center=new p(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new p,this.newVelocity=new p,this.deltaMax=new p,this.acceleration=new p,this.allowDrag=!0,this.drag=new p,this.allowGravity=!0,this.gravity=new p,this.bounce=new p,this.worldBounce=null,this.customBoundsRectangle=t.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new p(1e4,1e4),this.maxSpeed=-1,this.friction=new p(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=o.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=o.DYNAMIC_BODY,this._sx=i.scaleX,this._sy=i.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new d},updateBounds:function(){var t=this.gameObject,i=this.transform;if(t.parentContainer){var n=t.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);i.x=n.tx,i.y=n.ty,i.rotation=h(n.rotation),i.scaleX=n.scaleX,i.scaleY=n.scaleY,i.displayOriginX=t.displayOriginX,i.displayOriginY=t.displayOriginY}else i.x=t.x,i.y=t.y,i.rotation=t.angle,i.scaleX=t.scaleX,i.scaleY=t.scaleY,i.displayOriginX=t.displayOriginX,i.displayOriginY=t.displayOriginY;var r=!1;if(this.syncBounds){var o=t.getBounds(this._bounds);this.width=o.width,this.height=o.height,r=!0}else{var a=Math.abs(i.scaleX),d=Math.abs(i.scaleY);this._sx===a&&this._sy===d||(this.width=this.sourceWidth*a,this.height=this.sourceHeight*d,this._sx=a,this._sy=d,r=!0)}r&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var t=this.transform;this.position.x=t.x+t.scaleX*(this.offset.x-t.displayOriginX),this.position.y=t.y+t.scaleY*(this.offset.y-t.displayOriginY),this.updateCenter()},resetFlags:function(t){void 0===t&&(t=!1);var i=this.wasTouching,n=this.touching,r=this.blocked;t?(i.none=!0,i.up=!1,i.down=!1,i.left=!1,i.right=!1):(i.none=n.none,i.up=n.up,i.down=n.down,i.left=n.left,i.right=n.right),n.none=!0,n.up=!1,n.down=!1,n.left=!1,n.right=!1,r.none=!0,r.up=!1,r.down=!1,r.left=!1,r.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(t,i){t&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),t&&this.update(i)},update:function(t){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,t);var i=this.velocity.x,n=this.velocity.y;this.newVelocity.set(i*t,n*t),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(n,i),this.speed=Math.sqrt(i*i+n*n),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(a.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var t=this.position.x-this.prevFrame.x,i=this.position.y-this.prevFrame.y;if(this.moves){var n=this.deltaMax.x,r=this.deltaMax.y;0!==n&&0!==t&&(t<0&&t<-n?t=-n:t>0&&t>n&&(t=n)),0!==r&&0!==i&&(i<0&&i<-r?i=-r:i>0&&i>r&&(i=r)),this.gameObject.x+=t,this.gameObject.y+=i}t<0?this.facing=o.FACING_LEFT:t>0&&(this.facing=o.FACING_RIGHT),i<0?this.facing=o.FACING_UP:i>0&&(this.facing=o.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=t,this._ty=i},setBoundsRectangle:function(t){return this.customBoundsRectangle=t||this.world.bounds,this},checkWorldBounds:function(){var t=this.position,i=this.customBoundsRectangle,n=this.world.checkCollision,r=this.worldBounce?-this.worldBounce.x:-this.bounce.x,o=this.worldBounce?-this.worldBounce.y:-this.bounce.y,a=!1;return t.x<i.x&&n.left?(t.x=i.x,this.velocity.x*=r,this.blocked.left=!0,a=!0):this.right>i.right&&n.right&&(t.x=i.right-this.width,this.velocity.x*=r,this.blocked.right=!0,a=!0),t.y<i.y&&n.up?(t.y=i.y,this.velocity.y*=o,this.blocked.up=!0,a=!0):this.bottom>i.bottom&&n.down&&(t.y=i.bottom-this.height,this.velocity.y*=o,this.blocked.down=!0,a=!0),a&&(this.blocked.none=!1,this.updateCenter()),a},setOffset:function(t,i){return void 0===i&&(i=t),this.offset.set(t,i),this},setSize:function(t,i,n){void 0===n&&(n=!0);var r=this.gameObject;if(!t&&r.frame&&(t=r.frame.realWidth),!i&&r.frame&&(i=r.frame.realHeight),this.sourceWidth=t,this.sourceHeight=i,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),n&&r.getCenter){var o=(r.width-t)/2,a=(r.height-i)/2;this.offset.set(o,a)}return this.isCircle=!1,this.radius=0,this},setCircle:function(t,i,n){return void 0===i&&(i=this.offset.x),void 0===n&&(n=this.offset.y),t>0?(this.isCircle=!0,this.radius=t,this.sourceWidth=2*t,this.sourceHeight=2*t,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(i,n),this.updateCenter()):this.isCircle=!1,this},reset:function(t,i){this.stop();var n=this.gameObject;n.setPosition(t,i),n.getTopLeft?n.getTopLeft(this.position):this.position.set(t,i),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=n.angle,this.preRotation=n.angle,this.updateBounds(),this.updateCenter(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function(t,i){return this.isCircle?this.radius>0&&t>=this.left&&t<=this.right&&i>=this.top&&i<=this.bottom&&(this.center.x-t)*(this.center.x-t)+(this.center.y-i)*(this.center.y-i)<=this.radius*this.radius:f(this,t,i)},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(t){var i=this.position,n=i.x+this.halfWidth,r=i.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor),this.isCircle?t.strokeCircle(n,r,this.width/2):(this.checkCollision.up&&t.lineBetween(i.x,i.y,i.x+this.width,i.y),this.checkCollision.right&&t.lineBetween(i.x+this.width,i.y,i.x+this.width,i.y+this.height),this.checkCollision.down&&t.lineBetween(i.x,i.y+this.height,i.x+this.width,i.y+this.height),this.checkCollision.left&&t.lineBetween(i.x,i.y,i.x,i.y+this.height))),this.debugShowVelocity&&(t.lineStyle(t.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),t.lineBetween(n,r,n+this.velocity.x/2,r+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(t,i,n,r){void 0===t&&(t=!0),this.collideWorldBounds=t;var o=void 0!==i,a=void 0!==n;return(o||a)&&(this.worldBounce||(this.worldBounce=new p),o&&(this.worldBounce.x=i),a&&(this.worldBounce.y=n)),void 0!==r&&(this.onWorldBounds=r),this},setVelocity:function(t,i){return this.velocity.set(t,i),t=this.velocity.x,i=this.velocity.y,this.speed=Math.sqrt(t*t+i*i),this},setVelocityX:function(t){this.velocity.x=t;var i=t,n=this.velocity.y;return this.speed=Math.sqrt(i*i+n*n),this},setVelocityY:function(t){this.velocity.y=t;var i=this.velocity.x,n=t;return this.speed=Math.sqrt(i*i+n*n),this},setMaxVelocity:function(t,i){return this.maxVelocity.set(t,i),this},setMaxVelocityX:function(t){return this.maxVelocity.x=t,this},setMaxVelocityY:function(t){return this.maxVelocity.y=t,this},setMaxSpeed:function(t){return this.maxSpeed=t,this},setBounce:function(t,i){return this.bounce.set(t,i),this},setBounceX:function(t){return this.bounce.x=t,this},setBounceY:function(t){return this.bounce.y=t,this},setAcceleration:function(t,i){return this.acceleration.set(t,i),this},setAccelerationX:function(t){return this.acceleration.x=t,this},setAccelerationY:function(t){return this.acceleration.y=t,this},setAllowDrag:function(t){return void 0===t&&(t=!0),this.allowDrag=t,this},setAllowGravity:function(t){return void 0===t&&(t=!0),this.allowGravity=t,this},setAllowRotation:function(t){return void 0===t&&(t=!0),this.allowRotation=t,this},setDrag:function(t,i){return this.drag.set(t,i),this},setDamping:function(t){return this.useDamping=t,this},setDragX:function(t){return this.drag.x=t,this},setDragY:function(t){return this.drag.y=t,this},setGravity:function(t,i){return this.gravity.set(t,i),this},setGravityX:function(t){return this.gravity.x=t,this},setGravityY:function(t){return this.gravity.y=t,this},setFriction:function(t,i){return this.friction.set(t,i),this},setFrictionX:function(t){return this.friction.x=t,this},setFrictionY:function(t){return this.friction.y=t,this},setAngularVelocity:function(t){return this.angularVelocity=t,this},setAngularAcceleration:function(t){return this.angularAcceleration=t,this},setAngularDrag:function(t){return this.angularDrag=t,this},setMass:function(t){return this.mass=t,this},setImmovable:function(t){return void 0===t&&(t=!0),this.immovable=t,this},setEnable:function(t){return void 0===t&&(t=!0),this.enable=t,this},processX:function(t,i,n,r){this.x+=t,this.updateCenter(),null!==i&&(this.velocity.x=i);var o=this.blocked;n&&(o.left=!0),r&&(o.right=!0)},processY:function(t,i,n,r){this.y+=t,this.updateCenter(),null!==i&&(this.velocity.y=i);var o=this.blocked;n&&(o.up=!0),r&&(o.down=!0)},x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});t.exports=T},function(t,i,n){var r=new(n(0))({initialize:function Collider2(t,i,n,r,o,a,h){this.world=t,this.name="",this.active=!0,this.overlapOnly=i,this.object1=n,this.object2=r,this.collideCallback=o,this.processCallback=a,this.callbackContext=h},setName:function(t){return this.name=t,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});t.exports=r},function(t,i,n){var r=n(26),o=n(3),a=new o,h=new o;t.exports=function(t,i,n,o,d,f,p){var T=p.tilemapLayer.tilemap._convert.WorldToTileXY;T(t,i,!0,a,f,p);var b=a.x,S=a.y;T(t+n,i+o,!1,h,f,p);var A=Math.ceil(h.x),P=Math.ceil(h.y);return r(b,S,A-b,P-S,d,p)}},function(t,i){t.exports=function(t,i){return t.collisionCallback?!t.collisionCallback.call(t.collisionCallbackContext,i,t):!t.layer.callbacks[t.index]||!t.layer.callbacks[t.index].callback.call(t.layer.callbacks[t.index].callbackContext,i,t)}},function(t,i,n){var r=n(436);function rbush(t){if(!(this instanceof rbush))return new rbush(t);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}function findItem(t,i,n){if(!n)return i.indexOf(t);for(var r=0;r<i.length;r++)if(n(t,i[r]))return r;return-1}function calcBBox(t,i){distBBox(t,0,t.children.length,i,t)}function distBBox(t,i,n,r,o){o||(o=createNode(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var a,h=i;h<n;h++)a=t.children[h],extend2(o,t.leaf?r(a):a);return o}function extend2(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function compareNodeMinX(t,i){return t.minX-i.minX}function compareNodeMinY(t,i){return t.minY-i.minY}function bboxArea(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function bboxMargin(t){return t.maxX-t.minX+(t.maxY-t.minY)}function contains(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function intersects(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function createNode(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function multiSelect(t,i,n,o,a){for(var h,d=[i,n];d.length;)(n=d.pop())-(i=d.pop())<=o||(h=i+Math.ceil((n-i)/o/2)*o,r(t,h,i,n,a),d.push(i,h,h,n))}rbush.prototype={all:function(){return this._all(this.data,[])},search:function(t){var i=this.data,n=[],r=this.toBBox;if(!intersects(t,i))return n;for(var o,a,h,d,f=[];i;){for(o=0,a=i.children.length;o<a;o++)h=i.children[o],intersects(t,d=i.leaf?r(h):h)&&(i.leaf?n.push(h):contains(t,d)?this._all(h,n):f.push(h));i=f.pop()}return n},collides:function(t){var i=this.data,n=this.toBBox;if(!intersects(t,i))return!1;for(var r,o,a,h,d=[];i;){for(r=0,o=i.children.length;r<o;r++)if(a=i.children[r],intersects(t,h=i.leaf?n(a):a)){if(i.leaf||contains(t,h))return!0;d.push(a)}i=d.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var o=this.data;this.data=r,r=o}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=createNode([]),this},remove:function(t,i){if(!t)return this;for(var n,r,o,a,h=this.data,d=this.toBBox(t),f=[],p=[];h||f.length;){if(h||(h=f.pop(),r=f[f.length-1],n=p.pop(),a=!0),h.leaf&&-1!==(o=findItem(t,h.children,i)))return h.children.splice(o,1),f.push(h),this._condense(f),this;a||h.leaf||!contains(h,d)?r?(n++,h=r.children[n],a=!1):h=null:(f.push(h),p.push(n),n=0,r=h,h=h.children[0])}return this},toBBox:function(t){return t},compareMinX:compareNodeMinX,compareMinY:compareNodeMinY,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},_build:function(t,i,n,r){var o,a=n-i+1,h=this._maxEntries;if(a<=h)return calcBBox(o=createNode(t.slice(i,n+1)),this.toBBox),o;r||(r=Math.ceil(Math.log(a)/Math.log(h)),h=Math.ceil(a/Math.pow(h,r-1))),(o=createNode([])).leaf=!1,o.height=r;var d,f,p,T,b=Math.ceil(a/h),S=b*Math.ceil(Math.sqrt(h));for(multiSelect(t,i,n,S,this.compareMinX),d=i;d<=n;d+=S)for(multiSelect(t,d,p=Math.min(d+S-1,n),b,this.compareMinY),f=d;f<=p;f+=b)T=Math.min(f+b-1,p),o.children.push(this._build(t,f,T,r-1));return calcBBox(o,this.toBBox),o},_chooseSubtree:function(t,i,n,r){for(var o,a,h,d,f,p,T,b,S,A;r.push(i),!i.leaf&&r.length-1!==n;){for(T=b=1/0,o=0,a=i.children.length;o<a;o++)f=bboxArea(h=i.children[o]),S=t,A=h,(p=(Math.max(A.maxX,S.maxX)-Math.min(A.minX,S.minX))*(Math.max(A.maxY,S.maxY)-Math.min(A.minY,S.minY))-f)<b?(b=p,T=f<T?f:T,d=h):p===b&&f<T&&(T=f,d=h);i=d||i.children[0]}return i},_insert:function(t,i,n){var r=this.toBBox,o=n?t:r(t),a=[],h=this._chooseSubtree(o,this.data,i,a);for(h.children.push(t),extend2(h,o);i>=0&&a[i].children.length>this._maxEntries;)this._split(a,i),i--;this._adjustParentBBoxes(o,a,i)},_split:function(t,i){var n=t[i],r=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,r);var a=this._chooseSplitIndex(n,o,r),h=createNode(n.children.splice(a,n.children.length-a));h.height=n.height,h.leaf=n.leaf,calcBBox(n,this.toBBox),calcBBox(h,this.toBBox),i?t[i-1].children.push(h):this._splitRoot(n,h)},_splitRoot:function(t,i){this.data=createNode([t,i]),this.data.height=t.height+1,this.data.leaf=!1,calcBBox(this.data,this.toBBox)},_chooseSplitIndex:function(t,i,n){var r,o,a,h,d,f,p,T,b,S,A,P,O,L;for(f=p=1/0,r=i;r<=n-i;r++)o=distBBox(t,0,r,this.toBBox),a=distBBox(t,r,n,this.toBBox),b=o,S=a,A=void 0,P=void 0,O=void 0,L=void 0,A=Math.max(b.minX,S.minX),P=Math.max(b.minY,S.minY),O=Math.min(b.maxX,S.maxX),L=Math.min(b.maxY,S.maxY),h=Math.max(0,O-A)*Math.max(0,L-P),d=bboxArea(o)+bboxArea(a),h<f?(f=h,T=r,p=d<p?d:p):h===f&&d<p&&(p=d,T=r);return T},_chooseSplitAxis:function(t,i,n){var r=t.leaf?this.compareMinX:compareNodeMinX,o=t.leaf?this.compareMinY:compareNodeMinY;this._allDistMargin(t,i,n,r)<this._allDistMargin(t,i,n,o)&&t.children.sort(r)},_allDistMargin:function(t,i,n,r){t.children.sort(r);var o,a,h=this.toBBox,d=distBBox(t,0,i,h),f=distBBox(t,n-i,n,h),p=bboxMargin(d)+bboxMargin(f);for(o=i;o<n-i;o++)a=t.children[o],extend2(d,t.leaf?h(a):a),p+=bboxMargin(d);for(o=n-i-1;o>=i;o--)a=t.children[o],extend2(f,t.leaf?h(a):a),p+=bboxMargin(f);return p},_adjustParentBBoxes:function(t,i,n){for(var r=n;r>=0;r--)extend2(i[r],t)},_condense:function(t){for(var i,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(i=t[n-1].children).splice(i.indexOf(t[n]),1):this.clear():calcBBox(t[n],this.toBBox)},compareMinX:function(t,i){return t.left-i.left},compareMinY:function(t,i){return t.top-i.top},toBBox:function(t){return{minX:t.left,minY:t.top,maxX:t.right,maxY:t.bottom}}},t.exports=rbush},function(t,i,n){var r=n(533),o=n(535),a=n(248);t.exports=function(t,i,n,h,d,f,p){var T=h.left,b=h.top,S=h.right,A=h.bottom,P=n.faceLeft||n.faceRight,O=n.faceTop||n.faceBottom;if(p||(P=!0,O=!0),!P&&!O)return!1;var L=0,D=0,I=0,F=1;if(i.deltaAbsX()>i.deltaAbsY()?I=-1:i.deltaAbsX()<i.deltaAbsY()&&(F=-1),0!==i.deltaX()&&0!==i.deltaY()&&P&&O&&(I=Math.min(Math.abs(i.position.x-S),Math.abs(i.right-T)),F=Math.min(Math.abs(i.position.y-A),Math.abs(i.bottom-b))),I<F){if(P&&0!==(L=r(i,n,T,S,f,p))&&!a(h,i))return!0;O&&(D=o(i,n,b,A,f,p))}else{if(O&&0!==(D=o(i,n,b,A,f,p))&&!a(h,i))return!0;P&&(L=r(i,n,T,S,f,p))}return 0!==L||0!==D}},function(t,i,n){var r=n(534);t.exports=function(t,i,n,o,a,h){var d=0,f=i.faceLeft,p=i.faceRight,T=i.collideLeft,b=i.collideRight;return h||(f=!0,p=!0,T=!0,b=!0),t.deltaX()<0&&b&&t.checkCollision.left?p&&t.x<o&&(d=t.x-o)<-a&&(d=0):t.deltaX()>0&&T&&t.checkCollision.right&&f&&t.right>n&&(d=t.right-n)>a&&(d=0),0!==d&&(t.customSeparateX?t.overlapX=d:r(t,d)),d}},function(t,i){t.exports=function(t,i){i<0?(t.blocked.none=!1,t.blocked.left=!0):i>0&&(t.blocked.none=!1,t.blocked.right=!0),t.position.x-=i,0===t.bounce.x?t.velocity.x=0:t.velocity.x=-t.velocity.x*t.bounce.x}},function(t,i,n){var r=n(536);t.exports=function(t,i,n,o,a,h){var d=0,f=i.faceTop,p=i.faceBottom,T=i.collideUp,b=i.collideDown;return h||(f=!0,p=!0,T=!0,b=!0),t.deltaY()<0&&b&&t.checkCollision.up?p&&t.y<o&&(d=t.y-o)<-a&&(d=0):t.deltaY()>0&&T&&t.checkCollision.down&&f&&t.bottom>n&&(d=t.bottom-n)>a&&(d=0),0!==d&&(t.customSeparateY?t.overlapY=d:r(t,d)),d}},function(t,i){t.exports=function(t,i){i<0?(t.blocked.none=!1,t.blocked.up=!0):i>0&&(t.blocked.none=!1,t.blocked.down=!0),t.position.y-=i,0===t.bounce.y?t.velocity.y=0:t.velocity.y=-t.velocity.y*t.bounce.y}},function(t,i,n){var r=n(246),o=n(1389);t.exports=function(t,i,n,a){var h=r(t,i,n,a),d=t.immovable,f=i.immovable;if(n||0===h||d&&f||t.customSeparateX||i.customSeparateX)return 0!==h||t.embedded&&i.embedded;var p=o.Set(t,i,h);return d||f?(d?o.RunImmovableBody1(p):f&&o.RunImmovableBody2(p),!0):p>0||o.Check()}},function(t,i,n){var r=n(247),o=n(1390);t.exports=function(t,i,n,a){var h=r(t,i,n,a),d=t.immovable,f=i.immovable;if(n||0===h||d&&f||t.customSeparateY||i.customSeparateY)return 0!==h||t.embedded&&i.embedded;var p=o.Set(t,i,h);return d||f?(d?o.RunImmovableBody1(p):f&&o.RunImmovableBody2(p),!0):p>0||o.Check()}},function(t,i,n){var r=n(66),o=n(0),a=n(62),h=n(57),d=n(3),f=new o({initialize:function StaticBody2(t,i){var n=i.displayWidth?i.displayWidth:64,r=i.displayHeight?i.displayHeight:64;this.world=t,this.gameObject=i,this.debugShowBody=t.defaults.debugShowStaticBody,this.debugBodyColor=t.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new d,this.position=new d(i.x-n*i.originX,i.y-r*i.originY),this.width=n,this.height=r,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new d(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=d.ZERO,this.allowGravity=!1,this.gravity=d.ZERO,this.bounce=d.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=a.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(t,i){return t&&t!==this.gameObject&&(this.gameObject.body=null,t.body=this,this.gameObject=t),i&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var t=this.gameObject;return t.getTopLeft(this.position),this.width=t.displayWidth,this.height=t.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(t,i){return void 0===i&&(i=t),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(t,i),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(t,i,n){void 0===n&&(n=!0);var r=this.gameObject;if(!t&&r.frame&&(t=r.frame.realWidth),!i&&r.frame&&(i=r.frame.realHeight),this.world.staticTree.remove(this),this.width=t,this.height=i,this.halfWidth=Math.floor(t/2),this.halfHeight=Math.floor(i/2),n&&r.getCenter){var o=r.displayWidth/2,a=r.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(o-this.halfWidth,a-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(t,i,n){return void 0===i&&(i=this.offset.x),void 0===n&&(n=this.offset.y),t>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=t,this.width=2*t,this.height=2*t,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(i,n),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(t,i){var n=this.gameObject;void 0===t&&(t=n.x),void 0===i&&(i=n.y),this.world.staticTree.remove(this),n.setPosition(t,i),n.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function(t,i){return this.isCircle?r(this,t,i):h(this,t,i)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(t){var i=this.position,n=i.x+this.halfWidth,r=i.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?t.strokeCircle(n,r,this.width/2):t.strokeRect(i.x,i.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(t){return t<=0&&(t=.1),this.mass=t,this},x:{get:function(){return this.position.x},set:function(t){this.world.staticTree.remove(this),this.position.x=t,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(t){this.world.staticTree.remove(this),this.position.y=t,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});t.exports=f},function(t,i,n){var r=new(n(0))({initialize:function BasePlugin2(t){this.pluginManager=t,this.game=t.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=r},function(t,i,n){var r=new(n(3));t.exports=function(t,i,n,o){var a=n.tilemapLayer,h=a.cullPaddingX,d=a.cullPaddingY,f=a.tilemap.tileToWorldXY(t,i,r,o,a);return f.x>o.worldView.x+a.scaleX*n.tileWidth*(-h-.5)&&f.x<o.worldView.right+a.scaleX*n.tileWidth*(h-.5)&&f.y>o.worldView.y+a.scaleY*n.tileHeight*(-d-1)&&f.y<o.worldView.bottom+a.scaleY*n.tileHeight*(d-.5)}},function(t,i,n){var r=n(26);t.exports=function(t,i,n,o,a,h,d){for(var f=r(n,o,a,h,null,d),p=0;p<f.length;p++)f[p]&&f[p].index===t&&(f[p].index=i)}},function(t,i,n){var r=n(10),o=n(139),a=n(76),h=new r;t.exports=function(t,i){var n=t.tilemapLayer.tilemap,r=t.tilemapLayer,d=Math.floor(n.tileWidth*r.scaleX),f=Math.floor(n.tileHeight*r.scaleY),p=a(i.worldView.x-r.x,d,0,!0)-r.cullPaddingX,T=o(i.worldView.right-r.x,d,0,!0)+r.cullPaddingX,b=a(i.worldView.y-r.y,f,0,!0)-r.cullPaddingY,S=o(i.worldView.bottom-r.y,f,0,!0)+r.cullPaddingY;return h.setTo(p,b,T-p,S-b)}},function(t,i,n){var r=n(543),o=n(159);t.exports=function(t,i,n,a){void 0===n&&(n=[]),void 0===a&&(a=0),n.length=0;var h=t.tilemapLayer,d=r(t,i);return(h.skipCull||1!==h.scrollFactorX||1!==h.scrollFactorY)&&(d.left=0,d.right=t.width,d.top=0,d.bottom=t.height),o(t,d,a,n),n}},function(t,i,n){var r=n(546),o=n(159);t.exports=function(t,i,n,a){void 0===n&&(n=[]),void 0===a&&(a=0),n.length=0;var h=t.tilemapLayer;if(!h.skipCull&&1===h.scrollFactorX&&1===h.scrollFactorY){var d=r(t,i);o(t,d,a,n)}return n}},function(t,i,n){var r=n(139),o=n(76);t.exports=function(t,i){var n=t.tilemapLayer.tilemap,a=t.tilemapLayer,h=Math.floor(n.tileWidth*a.scaleX),d=Math.floor(n.tileHeight*a.scaleY),f=t.hexSideLength,p=(d-f)/2+f;return{left:o(i.worldView.x-a.x,h,0,!0)-a.cullPaddingX,right:r(i.worldView.right-a.x,h,0,!0)+a.cullPaddingX,top:o(i.worldView.y-a.y,p,0,!0)-a.cullPaddingY,bottom:r(i.worldView.bottom-a.y,p,0,!0)+a.cullPaddingY}}},function(t,i,n){var r=n(541);t.exports=function(t,i,n,o){void 0===n&&(n=[]),void 0===o&&(o=0),n.length=0;var a,h,d,f=t.tilemapLayer,p=t.data,T=t.width,b=t.height,S=T,A=b;if(!f.skipCull)if(0===o){for(h=0;h<A;h++)for(a=0;p[h]&&a<S;a++)if(r(a,h,t,i)){if(!(d=p[h][a])||-1===d.index||!d.visible||0===d.alpha)continue;n.push(d)}}else if(1===o){for(h=0;h<A;h++)for(a=S;p[h]&&a>=0;a--)if(r(a,h,t,i)){if(!(d=p[h][a])||-1===d.index||!d.visible||0===d.alpha)continue;n.push(d)}}else if(2===o){for(h=A;h>=0;h--)for(a=0;p[h]&&a<S;a++)if(r(a,h,t,i)){if(!(d=p[h][a])||-1===d.index||!d.visible||0===d.alpha)continue;n.push(d)}}else if(3===o)for(h=A;h>=0;h--)for(a=S;p[h]&&a>=0;a--)if(r(a,h,t,i)){if(!(d=p[h][a])||-1===d.index||!d.visible||0===d.alpha)continue;n.push(d)}return f.tilesDrawn=n.length,f.tilesTotal=T*b,n}},function(t,i,n){var r=n(549),o=n(159);t.exports=function(t,i,n,a){void 0===n&&(n=[]),void 0===a&&(a=0),n.length=0;var h=t.tilemapLayer;if(!h.skipCull&&1===h.scrollFactorX&&1===h.scrollFactorY){var d=r(t,i);o(t,d,a,n)}return n}},function(t,i,n){var r=n(139),o=n(76);t.exports=function(t,i){var n=t.tilemapLayer.tilemap,a=t.tilemapLayer,h=Math.floor(n.tileWidth*a.scaleX),d=Math.floor(n.tileHeight*a.scaleY);return{left:o(i.worldView.x-a.x,h,0,!0)-a.cullPaddingX,right:r(i.worldView.right-a.x,h,0,!0)+a.cullPaddingX,top:o(i.worldView.y-a.y,d/2,0,!0)-a.cullPaddingY,bottom:r(i.worldView.bottom-a.y,d/2,0,!0)+a.cullPaddingY}}},function(t,i,n){var r=n(3);t.exports=function(t,i,n,o,a){n||(n=new r);var h=a.baseTileWidth,d=a.baseTileHeight,f=a.tilemapLayer,p=0,T=0;f&&(o||(o=f.scene.cameras.main),p=f.x+o.scrollX*(1-f.scrollFactorX),h*=f.scaleX,T=f.y+o.scrollY*(1-f.scrollFactorY),d*=f.scaleY);var b=a.hexSideLength,S=p+t*h+i%2*(h/2),A=T+i*((d-b)/2+b);return n.set(S,A)}},function(t,i,n){var r=n(3);t.exports=function(t,i,n,o,a){n||(n=new r);var h=a.baseTileWidth,d=a.baseTileHeight,f=a.tilemapLayer,p=0,T=0;f&&(o||(o=f.scene.cameras.main),p=f.x+o.scrollX*(1-f.scrollFactorX),h*=f.scaleX,T=f.y+o.scrollY*(1-f.scrollFactorY),d*=f.scaleY);var b=p+h/2*(t-i),S=T+(t+i)*(d/2);return n.set(b,S)}},function(t,i,n){var r=n(3);t.exports=function(t,i,n,o,a){n||(n=new r);var h=a.baseTileWidth,d=a.baseTileHeight,f=a.tilemapLayer,p=0,T=0;f&&(o||(o=f.scene.cameras.main),p=f.x+o.scrollX*(1-f.scrollFactorX),h*=f.scaleX,T=f.y+o.scrollY*(1-f.scrollFactorY),d*=f.scaleY);var b=p+t*h+i%2*(h/2),S=T+i*(d/2);return n.set(b,S)}},function(t,i,n){var r=n(253),o=n(254),a=n(3);t.exports=function(t,i,n,h,d){return n||(n=new a(0,0)),n.x=r(t,h,d),n.y=o(i,h,d),n}},function(t,i){t.exports=function(t,i,n){var r=n.baseTileHeight,o=n.tilemapLayer,a=0;o&&(void 0===i&&(i=o.scene.cameras.main),a=o.y+i.scrollY*(1-o.scrollFactorY),r*=o.scaleY);var h=o.tilemap.hexSideLength;return a+t*((r-h)/2+h)}},function(t,i){t.exports=function(t,i,n){var r=n.baseTileHeight,o=n.tilemapLayer,a=0;return o&&(void 0===i&&(i=o.scene.cameras.main),a=o.y+i.scrollY*(1-o.scrollFactorY),r*=o.scaleY),a+t*(r/2)}},function(t,i,n){var r=n(3);t.exports=function(t,i,n,o,a,h){o||(o=new r);var d=h.baseTileWidth,f=h.baseTileHeight,p=h.tilemapLayer;p&&(a||(a=p.scene.cameras.main),i-=p.y+a.scrollY*(1-p.scrollFactorY),f*=p.scaleY,t-=p.x+a.scrollX*(1-p.scrollFactorX),d*=p.scaleX);var T=h.hexSideLength,b=(f-T)/2+T,S=n?Math.floor(i/b):i/b,A=n?Math.floor((t-S%2*.5*d)/d):(t-S%2*.5*d)/d;return o.set(A,S)}},function(t,i,n){var r=n(3);t.exports=function(t,i,n,o,a,h){o||(o=new r);var d=h.baseTileWidth,f=h.baseTileHeight,p=h.tilemapLayer;p&&(a||(a=p.scene.cameras.main),i-=p.y+a.scrollY*(1-p.scrollFactorY),f*=p.scaleY,t-=p.x+a.scrollX*(1-p.scrollFactorX),d*=p.scaleX);var T=n?Math.floor((t/(d/2)+i/(f/2))/2):(t/(d/2)+i/(f/2))/2,b=n?Math.floor((i/(f/2)-t/(d/2))/2):(i/(f/2)-t/(d/2))/2;return o.set(T,b)}},function(t,i,n){var r=n(3);t.exports=function(t,i,n,o,a,h){o||(o=new r);var d=h.baseTileWidth,f=h.baseTileHeight,p=h.tilemapLayer;p&&(a||(a=p.scene.cameras.main),i-=p.y+a.scrollY*(1-p.scrollFactorY),f*=p.scaleY,t-=p.x+a.scrollX*(1-p.scrollFactorX),d*=p.scaleX);var T=n?Math.floor(i/(f/2)):i/(f/2),b=n?Math.floor((t+T%2*.5*d)/d):(t+T%2*.5*d)/d;return o.set(b,T)}},function(t,i,n){var r=n(255),o=n(256),a=n(3);t.exports=function(t,i,n,h,d,f){return void 0===n&&(n=!0),h||(h=new a(0,0)),h.x=r(t,n,d,f),h.y=o(i,n,d,f),h}},function(t,i){t.exports=function(t,i,n,r){var o=r.baseTileHeight,a=r.tilemapLayer;a&&(n||(n=a.scene.cameras.main),t-=a.y+n.scrollY*(1-a.scrollFactorY),o*=a.scaleY);var h=r.hexSideLength,d=(o-h)/2+h;return i?Math.floor(t/d):t/d}},function(t,i){t.exports=function(t,i,n,r){var o=r.baseTileHeight,a=r.tilemapLayer;return a&&(n||(n=a.scene.cameras.main),t-=a.y+n.scrollY*(1-a.scrollFactorY),o*=a.scaleY),i?Math.floor(t/(o/2)):t/(o/2)}},function(t,i,n){var r=n(119);t.exports=function(t,i,n){if(r(t,i,n)){var o=n.data[i][t];return null!==o&&o.index>-1}return!1}},function(t,i,n){var r=n(85),o=n(119),a=n(252);t.exports=function(t,i,n,h,d){if(void 0===n&&(n=!0),void 0===h&&(h=!0),!o(t,i,d))return null;var f=d.data[i][t];return f?(d.data[i][t]=n?null:new r(d,-1,t,i,d.tileWidth,d.tileHeight),h&&f&&f.collides&&a(t,i,d),f):null}},function(t,i,n){var r=n(40),o=n(259),a=n(565),h=n(566),d=n(577);t.exports=function(t,i,n,f,p,T){var b;switch(i){case r.ARRAY_2D:b=o(t,n,f,p,T);break;case r.CSV:b=a(t,n,f,p,T);break;case r.TILED_JSON:b=h(t,n,T);break;case r.WELTMEISTER:b=d(t,n,T);break;default:console.warn("Unrecognized tilemap data format: "+i),b=null}return b}},function(t,i,n){var r=n(40),o=n(259);t.exports=function(t,i,n,a,h){var d=i.trim().split("\n").map((function(t){return t.split(",")})),f=o(t,d,n,a,h);return f.format=r.CSV,f}},function(t,i,n){var r=n(567),o=n(568),a=n(29),h=n(40),d=n(258),f=n(121),p=n(569),T=n(570),b=n(573),S=n(575);t.exports=function(t,i,n){var A=new f({width:i.width,height:i.height,name:t,tileWidth:i.tilewidth,tileHeight:i.tileheight,orientation:d(i.orientation),format:h.TILED_JSON,version:i.version,properties:i.properties,renderOrder:i.renderorder,infinite:i.infinite});A.orientation===a.HEXAGONAL&&(A.hexSideLength=i.hexsidelength),A.layers=b(i,n),A.images=p(i);var P=S(i);return A.tilesets=P.tilesets,A.imageCollections=P.imageCollections,A.objects=T(i),A.tiles=o(A),r(A),A}},function(t,i,n){var r=n(17);t.exports=function(t){for(var i,n,o,a,h,d=0;d<t.layers.length;d++){i=t.layers[d],a=null;for(var f=0;f<i.data.length;f++){h=i.data[f];for(var p=0;p<h.length;p++)null===(n=h[p])||n.index<0||(o=t.tiles[n.index][2],a=t.tilesets[o],n.width=a.tileWidth,n.height=a.tileHeight,a.tileProperties&&a.tileProperties[n.index-a.firstgid]&&(n.properties=r(n.properties,a.tileProperties[n.index-a.firstgid])))}}}},function(t,i,n){var r=n(122);t.exports=function(t){var i,n,o=[];for(i=0;i<t.imageCollections.length;i++)for(var a=t.imageCollections[i],h=a.images,d=0;d<h.length;d++){var f=h[d];(n=new r(f.image,f.gid,a.imageWidth,a.imageHeight,0,0)).updateTileData(a.imageWidth,a.imageHeight),t.tilesets.push(n)}for(i=0;i<t.tilesets.length;i++)for(var p=(n=t.tilesets[i]).tileMargin,T=n.tileMargin,b=0,S=0,A=0,P=n.firstgid;P<n.firstgid+n.total&&(o[P]=[p,T,i],p+=n.tileWidth+n.tileSpacing,++b!==n.total)&&(++S!==n.columns||(p=n.tileMargin,T+=n.tileHeight+n.tileSpacing,S=0,++A!==n.rows));P++);return o}},function(t,i,n){var r=n(2),o=n(161);t.exports=function(t){for(var i=[],n=[],a=o(t);a.i<a.layers.length||n.length>0;)if(a.i>=a.layers.length){if(n.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}a=n.pop()}else{var h=a.layers[a.i];if(a.i++,"imagelayer"===h.type){var d=r(h,"offsetx",0)+r(h,"startx",0),f=r(h,"offsety",0)+r(h,"starty",0);i.push({name:a.name+h.name,image:h.image,x:a.x+d+h.x,y:a.y+f+h.y,alpha:a.opacity*h.opacity,visible:a.visible&&h.visible,properties:r(h,"properties",{})})}else if("group"===h.type){var p=o(t,h,a);n.push(a),a=p}}return i}},function(t,i,n){var r=n(2),o=n(260),a=n(572),h=n(161);t.exports=function(t){for(var i=[],n=[],d=h(t);d.i<d.layers.length||n.length>0;)if(d.i>=d.layers.length){if(n.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}d=n.pop()}else{var f=d.layers[d.i];if(d.i++,f.opacity*=d.opacity,f.visible=d.visible&&f.visible,"objectgroup"===f.type){f.name=d.name+f.name;for(var p=d.x+r(f,"startx",0)+r(f,"offsetx",0),T=d.y+r(f,"starty",0)+r(f,"offsety",0),b=[],S=0;S<f.objects.length;S++){var A=o(f.objects[S],p,T);b.push(A)}var P=new a(f);P.objects=b,i.push(P)}else if("group"===f.type){var O=h(t,f,d);n.push(d),d=O}}return i}},function(t,i,n){var r=n(126);t.exports=function(t,i){for(var n={},o=0;o<i.length;o++){var a=i[o];r(t,a)&&(n[a]=t[a])}return n}},function(t,i,n){var r=n(0),o=n(2),a=new r({initialize:function ObjectLayer2(t){void 0===t&&(t={}),this.name=o(t,"name","object layer"),this.opacity=o(t,"opacity",1),this.properties=o(t,"properties",{}),this.propertyTypes=o(t,"propertytypes",{}),this.type=o(t,"type","objectgroup"),this.visible=o(t,"visible",!0),this.objects=o(t,"objects",[])}});t.exports=a},function(t,i,n){var r=n(574),o=n(29),a=n(161),h=n(258),d=n(2),f=n(120),p=n(261),T=n(85);t.exports=function(t,i){for(var n=d(t,"infinite",!1),b=[],S=[],A=a(t);A.i<A.layers.length||S.length>0;)if(A.i>=A.layers.length){if(S.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}A=S.pop()}else{var P=A.layers[A.i];if(A.i++,"tilelayer"===P.type)if(P.compression)console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+P.name+"'");else{if(P.encoding&&"base64"===P.encoding){if(P.chunks)for(var O=0;O<P.chunks.length;O++)P.chunks[O].data=r(P.chunks[O].data);P.data&&(P.data=r(P.data)),delete P.encoding}var L,D,I,F,B=[],N=0;if(n){var Y=d(P,"startx",0)+P.x,X=d(P,"starty",0)+P.y;(L=new f({name:A.name+P.name,x:A.x+d(P,"offsetx",0)+Y*t.tilewidth,y:A.y+d(P,"offsety",0)+X*t.tileheight,width:P.width,height:P.height,tileWidth:t.tilewidth,tileHeight:t.tileheight,alpha:A.opacity*P.opacity,visible:A.visible&&P.visible,properties:d(P,"properties",[]),orientation:h(t.orientation)})).orientation===o.HEXAGONAL&&(L.hexSideLength=t.hexsidelength);for(var G=0;G<P.height;G++){B.push([null]);for(var U=0;U<P.width;U++)B[G][U]=null}for(G=0,tt=P.chunks.length;G<tt;G++)for(var V=P.chunks[G],z=V.x-Y,W=V.y-X,H=0,q=0,Z=V.data.length;q<Z;q++){var K=N+z,J=H+W;(D=p(V.data[q])).gid>0?((I=new T(L,D.gid,K,J,t.tilewidth,t.tileheight)).rotation=D.rotation,I.flipX=D.flipped,B[J][K]=I):(F=i?null:new T(L,-1,K,J,t.tilewidth,t.tileheight),B[J][K]=F),++N===V.width&&(H++,N=0)}}else{(L=new f({name:A.name+P.name,x:A.x+d(P,"offsetx",0)+P.x,y:A.y+d(P,"offsety",0)+P.y,width:P.width,height:P.height,tileWidth:t.tilewidth,tileHeight:t.tileheight,alpha:A.opacity*P.opacity,visible:A.visible&&P.visible,properties:d(P,"properties",[]),orientation:h(t.orientation)})).orientation===o.HEXAGONAL&&(L.hexSideLength=t.hexsidelength);for(var Q=[],$=0,tt=P.data.length;$<tt;$++)(D=p(P.data[$])).gid>0?((I=new T(L,D.gid,N,B.length,t.tilewidth,t.tileheight)).rotation=D.rotation,I.flipX=D.flipped,Q.push(I)):(F=i?null:new T(L,-1,N,B.length,t.tilewidth,t.tileheight),Q.push(F)),++N===P.width&&(B.push(Q),N=0,Q=[])}L.data=B,b.push(L)}else if("group"===P.type){var et=a(t,P,A);S.push(A),A=et}}return b}},function(t,i){t.exports=function(t){for(var i=window.atob(t),n=i.length,r=new Array(n/4),o=0;o<n;o+=4)r[o/4]=(i.charCodeAt(o)|i.charCodeAt(o+1)<<8|i.charCodeAt(o+2)<<16|i.charCodeAt(o+3)<<24)>>>0;return r}},function(t,i,n){var r=n(122),o=n(576),a=n(260),h=n(1453);t.exports=function(t){for(var i,n=[],d=[],f=null,p=0;p<t.tilesets.length;p++){var T=t.tilesets[p];if(T.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(T.image){var b=new r(T.name,T.firstgid,T.tilewidth,T.tileheight,T.margin,T.spacing);if(t.version>1){var S=void 0,A=void 0;if(Array.isArray(T.tiles)){S=S||{},A=A||{};for(var P=0;P<T.tiles.length;P++){var O=T.tiles[P];if(O.properties){var L={};O.properties.forEach((function(t){L[t.name]=t.value})),A[O.id]=L}if(O.objectgroup&&((S[O.id]||(S[O.id]={})).objectgroup=O.objectgroup,O.objectgroup.objects)){var D=O.objectgroup.objects.map((function(t){return a(t)}));S[O.id].objectgroup.objects=D}O.animation&&((S[O.id]||(S[O.id]={})).animation=O.animation),O.type&&((S[O.id]||(S[O.id]={})).type=O.type)}}Array.isArray(T.wangsets)&&(S=S||{},A=A||{},h(T.wangsets,S)),S&&(b.tileData=S,b.tileProperties=A)}else if(T.tileproperties&&(b.tileProperties=T.tileproperties),T.tiles)for(i in b.tileData=T.tiles,b.tileData){var I=b.tileData[i].objectgroup;if(I&&I.objects){var F=I.objects.map((function(t){return a(t)}));b.tileData[i].objectgroup.objects=F}}b.updateTileData(T.imagewidth,T.imageheight),n.push(b)}else{var B=new o(T.name,T.firstgid,T.tilewidth,T.tileheight,T.margin,T.spacing,T.properties),N=0;for(P=0;P<T.tiles.length;P++){var Y=(O=T.tiles[P]).image,X=parseInt(O.id,10),G=T.firstgid+X;B.addImage(G,Y),N=Math.max(X,N)}B.maxId=N,d.push(B)}f&&(f.lastgid=T.firstgid-1),f=T}return{tilesets:n,imageCollections:d}}},function(t,i,n){var r=new(n(0))({initialize:function ImageCollection2(t,i,n,r,o,a,h){(void 0===n||n<=0)&&(n=32),(void 0===r||r<=0)&&(r=32),void 0===o&&(o=0),void 0===a&&(a=0),this.name=t,this.firstgid=0|i,this.imageWidth=0|n,this.imageHeight=0|r,this.imageMargin=0|o,this.imageSpacing=0|a,this.properties=h||{},this.images=[],this.total=0},containsImageIndex:function(t){return t>=this.firstgid&&t<this.firstgid+this.total},addImage:function(t,i){return this.images.push({gid:t,image:i}),this.total++,this}});t.exports=r},function(t,i,n){var r=n(40),o=n(121),a=n(578),h=n(579);t.exports=function(t,i,n){if(0===i.layer.length)return console.warn("No layers found in the Weltmeister map: "+t),null;for(var d=0,f=0,p=0;p<i.layer.length;p++)i.layer[p].width>d&&(d=i.layer[p].width),i.layer[p].height>f&&(f=i.layer[p].height);var T=new o({width:d,height:f,name:t,tileWidth:i.layer[0].tilesize,tileHeight:i.layer[0].tilesize,format:r.WELTMEISTER});return T.layers=a(i,n),T.tilesets=h(i),T}},function(t,i,n){var r=n(120),o=n(85);t.exports=function(t,i){for(var n=[],a=0;a<t.layer.length;a++){for(var h=t.layer[a],d=new r({name:h.name,width:h.width,height:h.height,tileWidth:h.tilesize,tileHeight:h.tilesize,visible:1===h.visible}),f=[],p=[],T=0;T<h.data.length;T++){for(var b=0;b<h.data[T].length;b++){var S,A=h.data[T][b]-1;S=A>-1?new o(d,A,b,T,h.tilesize,h.tilesize):i?null:new o(d,-1,b,T,h.tilesize,h.tilesize),f.push(S)}p.push(f),f=[]}d.data=p,n.push(d)}return n}},function(t,i,n){var r=n(122);t.exports=function(t){for(var i=[],n=[],o=0;o<t.layer.length;o++){var a=t.layer[o],h=a.tilesetName;""!==h&&-1===n.indexOf(h)&&(n.push(h),i.push(new r(h,0,a.tilesize,a.tilesize,0,0)))}return i}},function(t,i,n){var r=n(0),o=n(36),a=n(40),h=n(2),d=n(120),f=n(29),p=n(362),T=n(74),b=n(73),S=n(85),A=n(251),P=n(581),O=n(122),L=new r({initialize:function Tilemap2(t,i){this.scene=t,this.tileWidth=i.tileWidth,this.tileHeight=i.tileHeight,this.width=i.width,this.height=i.height,this.orientation=i.orientation,this.renderOrder=i.renderOrder,this.format=i.format,this.version=i.version,this.properties=i.properties,this.widthInPixels=i.widthInPixels,this.heightInPixels=i.heightInPixels,this.imageCollections=i.imageCollections,this.images=i.images,this.layers=i.layers,this.tilesets=i.tilesets,this.objects=i.objects,this.currentLayerIndex=0,this.hexSideLength=i.hexSideLength;var n=this.orientation;this._convert={WorldToTileXY:A.GetWorldToTileXYFunction(n),WorldToTileX:A.GetWorldToTileXFunction(n),WorldToTileY:A.GetWorldToTileYFunction(n),TileToWorldXY:A.GetTileToWorldXYFunction(n),TileToWorldX:A.GetTileToWorldXFunction(n),TileToWorldY:A.GetTileToWorldYFunction(n)}},createBlankDynamicLayer:function(t,i,n,r,o,a,h,d){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(t,i,n,r,o,a,h,d)},createDynamicLayer:function(t,i,n,r){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(t,i,n,r)},createStaticLayer:function(t,i,n,r){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(t,i,n,r)},setRenderOrder:function(t){var i=["right-down","left-down","right-up","left-up"];return"number"==typeof t&&(t=i[t]),i.indexOf(t)>-1&&(this.renderOrder=t),this},addTilesetImage:function(t,i,n,r,o,h,d){if(void 0===t)return null;if(null==i&&(i=t),!this.scene.sys.textures.exists(i))return console.warn("Invalid Tileset Image: "+i),null;var f=this.scene.sys.textures.get(i),p=this.getTilesetIndex(t);if(null===p&&this.format===a.TILED_JSON)return console.warn("No data found for Tileset: "+t),null;var T=this.tilesets[p];return T?(T.setTileSize(n,r),T.setSpacing(o,h),T.setImage(f),T):(void 0===n&&(n=this.tileWidth),void 0===r&&(r=this.tileHeight),void 0===o&&(o=0),void 0===h&&(h=0),void 0===d&&(d=0),(T=new O(t,d,n,r,o,h)).setImage(f),this.tilesets.push(T),T)},copy:function(t,i,n,r,o,a,h,d){return null!==(d=this.getLayer(d))?(A.Copy(t,i,n,r,o,a,h,d),this):null},createBlankLayer:function(t,i,n,r,o,a,h,f){if(void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=this.width),void 0===a&&(a=this.height),void 0===h&&(h=this.tileWidth),void 0===f&&(f=this.tileHeight),null!==this.getLayerIndex(t))return console.warn("Invalid Tilemap Layer ID: "+t),null;for(var p,T=new d({name:t,tileWidth:h,tileHeight:f,width:o,height:a,orientation:this.orientation}),b=0;b<a;b++){p=[];for(var A=0;A<o;A++)p.push(new S(T,-1,A,b,h,f,this.tileWidth,this.tileHeight));T.data.push(p)}this.layers.push(T),this.currentLayerIndex=this.layers.length-1;var O=new P(this.scene,this,this.currentLayerIndex,i,n,r);return O.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(O),O},createLayer:function(t,i,n,r){var o=this.getLayerIndex(t);if(null===o)return console.warn("Invalid Tilemap Layer ID: "+t),"string"==typeof t&&console.warn("Valid tilelayer names:\n\t"+this.getTileLayerNames().join(",\n\t")),null;var a=this.layers[o];if(a.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+t),null;this.currentLayerIndex=o,void 0===n&&(n=a.x),void 0===r&&(r=a.y);var h=new P(this.scene,this,o,i,n,r);return h.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(h),h},createFromObjects:function(t,i){var n=[],r=this.getObjectLayer(t);if(!r)return console.warn("createFromObjects: Invalid objectLayerName given: "+t),n;Array.isArray(i)||(i=[i]);for(var a=r.objects,d=0;d<i.length;d++){for(var f,T=i[d],S=h(T,"id",null),A=h(T,"gid",null),P=h(T,"name",null),O=[],L=0;L<a.length;L++)f=a[L],(null===S&&null===A&&null===P||null!==S&&f.id===S||null!==A&&f.gid===A||null!==P&&f.name===P)&&O.push(f);for(var D=h(T,"classType",b),I=h(T,"scene",this.scene),F=h(T,"container",null),B=h(T,"key",null),N=h(T,"frame",null),Y=0;Y<O.length;Y++){f=O[Y];var X=new D(I);X.setName(f.name),X.setPosition(f.x,f.y),X.setTexture(B,N),f.width&&(X.displayWidth=f.width),f.height&&(X.displayHeight=f.height);var G={x:X.originX*f.width,y:(X.originY-1)*f.height};if(f.rotation){var U=o(f.rotation);p(G,U),X.rotation=U}if(X.x+=G.x,X.y+=G.y,void 0===f.flippedHorizontal&&void 0===f.flippedVertical||X.setFlip(f.flippedHorizontal,f.flippedVertical),f.visible||(X.visible=!1),Array.isArray(f.properties))f.properties.forEach((function(t){var i=t.name;void 0!==X[i]?X[i]=t.value:X.setData(i,t.value)}));else for(var V in f.properties)void 0!==X[V]?X[V]=f.properties[V]:X.setData(V,f.properties[V]);F?F.add(X):I.add.existing(X),n.push(X)}}return n},createFromTiles:function(t,i,n,r,o,a){return null===(a=this.getLayer(a))?null:A.CreateFromTiles(t,i,n,r,o,a)},fill:function(t,i,n,r,o,a,h){return void 0===a&&(a=!0),null===(h=this.getLayer(h))?null:(A.Fill(t,i,n,r,o,a,h),this)},filterObjects:function(t,i,n){if("string"==typeof t){var r=t;if(!(t=this.getObjectLayer(t)))return console.warn("No object layer found with the name: "+r),null}return t.objects.filter(i,n)},filterTiles:function(t,i,n,r,o,a,h,d){return null===(d=this.getLayer(d))?null:A.FilterTiles(t,i,n,r,o,a,h,d)},findByIndex:function(t,i,n,r){return null===(r=this.getLayer(r))?null:A.FindByIndex(t,i,n,r)},findObject:function(t,i,n){if("string"==typeof t){var r=t;if(!(t=this.getObjectLayer(t)))return console.warn("No object layer found with the name: "+r),null}return t.objects.find(i,n)||null},findTile:function(t,i,n,r,o,a,h,d){return null===(d=this.getLayer(d))?null:A.FindTile(t,i,n,r,o,a,h,d)},forEachTile:function(t,i,n,r,o,a,h,d){return null===(d=this.getLayer(d))?null:(A.ForEachTile(t,i,n,r,o,a,h,d),this)},getImageIndex:function(t){return this.getIndex(this.images,t)},getImageLayerNames:function(){return this.images&&Array.isArray(this.images)?this.images.map((function(t){return t.name})):[]},getIndex:function(t,i){for(var n=0;n<t.length;n++)if(t[n].name===i)return n;return null},getLayer:function(t){var i=this.getLayerIndex(t);return null!==i?this.layers[i]:null},getObjectLayer:function(t){var i=this.getIndex(this.objects,t);return null!==i?this.objects[i]:null},getObjectLayerNames:function(){return this.objects&&Array.isArray(this.objects)?this.objects.map((function(t){return t.name})):[]},getLayerIndex:function(t){return void 0===t?this.currentLayerIndex:"string"==typeof t?this.getLayerIndexByName(t):"number"==typeof t&&t<this.layers.length?t:t instanceof P?t.layerIndex:null},getLayerIndexByName:function(t){return this.getIndex(this.layers,t)},getTileAt:function(t,i,n,r){return null===(r=this.getLayer(r))?null:A.GetTileAt(t,i,n,r)},getTileAtWorldXY:function(t,i,n,r,o){return null===(o=this.getLayer(o))?null:A.GetTileAtWorldXY(t,i,n,r,o)},getTileLayerNames:function(){return this.layers&&Array.isArray(this.layers)?this.layers.map((function(t){return t.name})):[]},getTilesWithin:function(t,i,n,r,o,a){return null===(a=this.getLayer(a))?null:A.GetTilesWithin(t,i,n,r,o,a)},getTilesWithinShape:function(t,i,n,r){return null===(r=this.getLayer(r))?null:A.GetTilesWithinShape(t,i,n,r)},getTilesWithinWorldXY:function(t,i,n,r,o,a,h){return null===(h=this.getLayer(h))?null:A.GetTilesWithinWorldXY(t,i,n,r,o,a,h)},getTileset:function(t){var i=this.getIndex(this.tilesets,t);return null!==i?this.tilesets[i]:null},getTilesetIndex:function(t){return this.getIndex(this.tilesets,t)},hasTileAt:function(t,i,n){return null===(n=this.getLayer(n))?null:A.HasTileAt(t,i,n)},hasTileAtWorldXY:function(t,i,n,r){return null===(r=this.getLayer(r))?null:A.HasTileAtWorldXY(t,i,n,r)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(t){this.setLayer(t)}},putTileAt:function(t,i,n,r,o){return void 0===r&&(r=!0),null===(o=this.getLayer(o))?null:A.PutTileAt(t,i,n,r,o)},putTileAtWorldXY:function(t,i,n,r,o,a){return void 0===r&&(r=!0),null===(a=this.getLayer(a))?null:A.PutTileAtWorldXY(t,i,n,r,o,a)},putTilesAt:function(t,i,n,r,o){return void 0===r&&(r=!0),null===(o=this.getLayer(o))?null:(A.PutTilesAt(t,i,n,r,o),this)},randomize:function(t,i,n,r,o,a){return null===(a=this.getLayer(a))?null:(A.Randomize(t,i,n,r,o,a),this)},calculateFacesAt:function(t,i,n){return null===(n=this.getLayer(n))?null:(A.CalculateFacesAt(t,i,n),this)},calculateFacesWithin:function(t,i,n,r,o){return null===(o=this.getLayer(o))?null:(A.CalculateFacesWithin(t,i,n,r,o),this)},removeLayer:function(t){var i=this.getLayerIndex(t);if(null!==i){T(this.layers,i);for(var n=i;n<this.layers.length;n++)this.layers[n].tilemapLayer&&this.layers[n].tilemapLayer.layerIndex--;return this.currentLayerIndex===i&&(this.currentLayerIndex=0),this}return null},destroyLayer:function(t){var i=this.getLayerIndex(t);return null!==i?((t=this.layers[i]).destroy(),T(this.layers,i),this.currentLayerIndex===i&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var t=this.layers,i=0;i<t.length;i++)t[i].tilemapLayer&&t[i].tilemapLayer.destroy(!1);return t.length=0,this.currentLayerIndex=0,this},removeTile:function(t,i,n){void 0===i&&(i=-1),void 0===n&&(n=!0);var r=[];Array.isArray(t)||(t=[t]);for(var o=0;o<t.length;o++){var a=t[o];r.push(this.removeTileAt(a.x,a.y,!0,n,a.tilemapLayer)),i>-1&&this.putTileAt(i,a.x,a.y,n,a.tilemapLayer)}return r},removeTileAt:function(t,i,n,r,o){return void 0===n&&(n=!0),void 0===r&&(r=!0),null===(o=this.getLayer(o))?null:A.RemoveTileAt(t,i,n,r,o)},removeTileAtWorldXY:function(t,i,n,r,o,a){return void 0===n&&(n=!0),void 0===r&&(r=!0),null===(a=this.getLayer(a))?null:A.RemoveTileAtWorldXY(t,i,n,r,o,a)},renderDebug:function(t,i,n){return null===(n=this.getLayer(n))?null:(this.orientation===f.ORTHOGONAL&&A.RenderDebug(t,i,n),this)},renderDebugFull:function(t,i){for(var n=this.layers,r=0;r<n.length;r++)A.RenderDebug(t,i,n[r]);return this},replaceByIndex:function(t,i,n,r,o,a,h){return null===(h=this.getLayer(h))?null:(A.ReplaceByIndex(t,i,n,r,o,a,h),this)},setCollision:function(t,i,n,r,o){return void 0===i&&(i=!0),void 0===n&&(n=!0),void 0===o&&(o=!0),null===(r=this.getLayer(r))?null:(A.SetCollision(t,i,n,r,o),this)},setCollisionBetween:function(t,i,n,r,o){return void 0===n&&(n=!0),void 0===r&&(r=!0),null===(o=this.getLayer(o))?null:(A.SetCollisionBetween(t,i,n,r,o),this)},setCollisionByProperty:function(t,i,n,r){return void 0===i&&(i=!0),void 0===n&&(n=!0),null===(r=this.getLayer(r))?null:(A.SetCollisionByProperty(t,i,n,r),this)},setCollisionByExclusion:function(t,i,n,r){return void 0===i&&(i=!0),void 0===n&&(n=!0),null===(r=this.getLayer(r))?null:(A.SetCollisionByExclusion(t,i,n,r),this)},setCollisionFromCollisionGroup:function(t,i,n){return void 0===t&&(t=!0),void 0===i&&(i=!0),null===(n=this.getLayer(n))?null:(A.SetCollisionFromCollisionGroup(t,i,n),this)},setTileIndexCallback:function(t,i,n,r){return null===(r=this.getLayer(r))?null:(A.SetTileIndexCallback(t,i,n,r),this)},setTileLocationCallback:function(t,i,n,r,o,a,h){return null===(h=this.getLayer(h))?null:(A.SetTileLocationCallback(t,i,n,r,o,a,h),this)},setLayer:function(t){var i=this.getLayerIndex(t);return null!==i&&(this.currentLayerIndex=i),this},setBaseTileSize:function(t,i){this.tileWidth=t,this.tileHeight=i,this.widthInPixels=this.width*t,this.heightInPixels=this.height*i;for(var n=0;n<this.layers.length;n++){this.layers[n].baseTileWidth=t,this.layers[n].baseTileHeight=i;for(var r=this.layers[n].data,o=this.layers[n].width,a=this.layers[n].height,h=0;h<a;h++)for(var d=0;d<o;d++){var f=r[h][d];null!==f&&f.setSize(void 0,void 0,t,i)}}return this},setLayerTileSize:function(t,i,n){if(null===(n=this.getLayer(n)))return this;n.tileWidth=t,n.tileHeight=i;for(var r=n.data,o=n.width,a=n.height,h=0;h<a;h++)for(var d=0;d<o;d++){var f=r[h][d];null!==f&&f.setSize(t,i)}return this},shuffle:function(t,i,n,r,o){return null===(o=this.getLayer(o))?null:(A.Shuffle(t,i,n,r,o),this)},swapByIndex:function(t,i,n,r,o,a,h){return null===(h=this.getLayer(h))?null:(A.SwapByIndex(t,i,n,r,o,a,h),this)},tileToWorldX:function(t,i,n){return null===(n=this.getLayer(n))?null:this._convert.TileToWorldX(t,i,n)},tileToWorldY:function(t,i,n){return null===(n=this.getLayer(n))?null:this._convert.TileToWorldY(t,i,n)},tileToWorldXY:function(t,i,n,r,o){return null===(o=this.getLayer(o))?null:this._convert.TileToWorldXY(t,i,n,r,o)},weightedRandomize:function(t,i,n,r,o,a){return null===(a=this.getLayer(a))?null:(A.WeightedRandomize(i,n,r,o,t,a),this)},worldToTileX:function(t,i,n,r){return null===(r=this.getLayer(r))?null:this._convert.WorldToTileX(t,i,n,r)},worldToTileY:function(t,i,n,r){return null===(r=this.getLayer(r))?null:this._convert.WorldToTileY(t,i,n,r)},worldToTileXY:function(t,i,n,r,o,a){return null===(a=this.getLayer(a))?null:this._convert.WorldToTileXY(t,i,n,r,o,a)},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});t.exports=L},function(t,i,n){var r=n(0),o=n(11),a=n(15),h=n(251),d=n(1456),f=new r({Extends:a,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Depth,o.Flip,o.GetBounds,o.Origin,o.Pipeline,o.Transform,o.Visible,o.ScrollFactor,d],initialize:function TilemapLayer2(t,i,n,r,o,d){a.call(this,t,"TilemapLayer"),this.isTilemap=!0,this.tilemap=i,this.layerIndex=n,this.layer=i.layers[n],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=h.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(r),this.setAlpha(this.layer.alpha),this.setPosition(o,d),this.setOrigin(),this.setSize(i.tileWidth*this.layer.width,i.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function(t){var i=[],n=[],r=this.tilemap;Array.isArray(t)||(t=[t]);for(var o=0;o<t.length;o++){var a=t[o];if("string"==typeof a&&(a=r.getTileset(a)),a){n.push(a);for(var h=a.firstgid,d=0;d<a.total;d++)i[h+d]=a}}this.gidMap=i,this.tileset=n},setRenderOrder:function(t){return"string"==typeof t&&(t=["right-down","left-down","right-up","left-up"].indexOf(t)),t>=0&&t<4&&(this._renderOrder=t),this},calculateFacesAt:function(t,i){return h.CalculateFacesAt(t,i,this.layer),this},calculateFacesWithin:function(t,i,n,r){return h.CalculateFacesWithin(t,i,n,r,this.layer),this},createFromTiles:function(t,i,n,r,o){return h.CreateFromTiles(t,i,n,r,o,this.layer)},cull:function(t){return this.cullCallback(this.layer,t,this.culledTiles,this._renderOrder)},copy:function(t,i,n,r,o,a,d){return h.Copy(t,i,n,r,o,a,d,this.layer),this},fill:function(t,i,n,r,o,a){return h.Fill(t,i,n,r,o,a,this.layer),this},filterTiles:function(t,i,n,r,o,a,d){return h.FilterTiles(t,i,n,r,o,a,d,this.layer)},findByIndex:function(t,i,n){return h.FindByIndex(t,i,n,this.layer)},findTile:function(t,i,n,r,o,a,d){return h.FindTile(t,i,n,r,o,a,d,this.layer)},forEachTile:function(t,i,n,r,o,a,d){return h.ForEachTile(t,i,n,r,o,a,d,this.layer),this},getTileAt:function(t,i,n){return h.GetTileAt(t,i,n,this.layer)},getTileAtWorldXY:function(t,i,n,r){return h.GetTileAtWorldXY(t,i,n,r,this.layer)},getTilesWithin:function(t,i,n,r,o){return h.GetTilesWithin(t,i,n,r,o,this.layer)},getTilesWithinShape:function(t,i,n){return h.GetTilesWithinShape(t,i,n,this.layer)},getTilesWithinWorldXY:function(t,i,n,r,o,a){return h.GetTilesWithinWorldXY(t,i,n,r,o,a,this.layer)},hasTileAt:function(t,i){return h.HasTileAt(t,i,this.layer)},hasTileAtWorldXY:function(t,i,n){return h.HasTileAtWorldXY(t,i,n,this.layer)},putTileAt:function(t,i,n,r){return h.PutTileAt(t,i,n,r,this.layer)},putTileAtWorldXY:function(t,i,n,r,o){return h.PutTileAtWorldXY(t,i,n,r,o,this.layer)},putTilesAt:function(t,i,n,r){return h.PutTilesAt(t,i,n,r,this.layer),this},randomize:function(t,i,n,r,o){return h.Randomize(t,i,n,r,o,this.layer),this},removeTileAt:function(t,i,n,r){return h.RemoveTileAt(t,i,n,r,this.layer)},removeTileAtWorldXY:function(t,i,n,r,o){return h.RemoveTileAtWorldXY(t,i,n,r,o,this.layer)},renderDebug:function(t,i){return h.RenderDebug(t,i,this.layer),this},replaceByIndex:function(t,i,n,r,o,a){return h.ReplaceByIndex(t,i,n,r,o,a,this.layer),this},setSkipCull:function(t){return void 0===t&&(t=!0),this.skipCull=t,this},setCullPadding:function(t,i){return void 0===t&&(t=1),void 0===i&&(i=1),this.cullPaddingX=t,this.cullPaddingY=i,this},setCollision:function(t,i,n,r){return h.SetCollision(t,i,n,this.layer,r),this},setCollisionBetween:function(t,i,n,r){return h.SetCollisionBetween(t,i,n,r,this.layer),this},setCollisionByProperty:function(t,i,n){return h.SetCollisionByProperty(t,i,n,this.layer),this},setCollisionByExclusion:function(t,i,n){return h.SetCollisionByExclusion(t,i,n,this.layer),this},setCollisionFromCollisionGroup:function(t,i){return h.SetCollisionFromCollisionGroup(t,i,this.layer),this},setTileIndexCallback:function(t,i,n){return h.SetTileIndexCallback(t,i,n,this.layer),this},setTileLocationCallback:function(t,i,n,r,o,a){return h.SetTileLocationCallback(t,i,n,r,o,a,this.layer),this},shuffle:function(t,i,n,r){return h.Shuffle(t,i,n,r,this.layer),this},swapByIndex:function(t,i,n,r,o,a){return h.SwapByIndex(t,i,n,r,o,a,this.layer),this},tileToWorldX:function(t,i){return this.tilemap.tileToWorldX(t,i,this)},tileToWorldY:function(t,i){return this.tilemap.tileToWorldY(t,i,this)},tileToWorldXY:function(t,i,n,r){return this.tilemap.tileToWorldXY(t,i,n,r,this)},weightedRandomize:function(t,i,n,r,o){return h.WeightedRandomize(i,n,r,o,t,this.layer),this},worldToTileX:function(t,i,n){return this.tilemap.worldToTileX(t,i,n,this)},worldToTileY:function(t,i,n){return this.tilemap.worldToTileY(t,i,n,this)},worldToTileXY:function(t,i,n,r,o){return this.tilemap.worldToTileXY(t,i,n,r,o,this)},destroy:function(t){void 0===t&&(t=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),t&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],a.prototype.destroy.call(this))}});t.exports=f},function(t,i,n){var r=n(0),o=n(2),a=new r({initialize:function TimerEvent2(t){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(t)},reset:function(t){return this.delay=o(t,"delay",0),this.repeat=o(t,"repeat",0),this.loop=o(t,"loop",!1),this.callback=o(t,"callback",void 0),this.callbackScope=o(t,"callbackScope",this.callback),this.args=o(t,"args",[]),this.timeScale=o(t,"timeScale",1),this.startAt=o(t,"startAt",0),this.paused=o(t,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=-1===this.repeat||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var t=this.delay+this.delay*this.repeat;return(this.elapsed+this.delay*(this.repeat-this.repeatCount))/t}return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return.001*this.elapsed},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return.001*this.getRemaining()},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return.001*this.getOverallRemaining()},remove:function(t){void 0===t&&(t=!1),this.elapsed=this.delay,this.hasDispatched=!t,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});t.exports=a},function(t,i,n){var r=n(1465);t.exports=function(t){var i,n=[];if(t.hasOwnProperty("props"))for(i in t.props)"_"!==i.substr(0,1)&&n.push({key:i,value:t.props[i]});else for(i in t)-1===r.indexOf(i)&&"_"!==i.substr(0,1)&&n.push({key:i,value:t[i]});return n}},function(t,i,n){var r=n(6);t.exports=function(t){var i=r(t,"tweens",null);return null===i?[]:("function"==typeof i&&(i=i.call()),Array.isArray(i)||(i=[i]),i)}},function(t,i,n){var r=n(265),o=n(13),a=n(99),h=n(80),d=n(162),f=n(6),p=n(264),T=n(266),b=n(268);t.exports=function(t,i,n){void 0===n&&(n=r);var S=f(i,"from",0),A=f(i,"to",1),P=[{value:S}],O=d(i,"delay",n.delay),L=d(i,"duration",n.duration),D=f(i,"easeParams",n.easeParams),I=h(f(i,"ease",n.ease),D),F=d(i,"hold",n.hold),B=d(i,"repeat",n.repeat),N=d(i,"repeatDelay",n.repeatDelay),Y=a(i,"yoyo",n.yoyo),X=[],G=p("value",A),U=b(P[0],0,"value",G.getEnd,G.getStart,G.getActive,I,O,L,Y,F,B,N,!1,!1);U.start=S,U.current=S,U.to=A,X.push(U);var V=new T(t,X,P);V.offset=o(i,"offset",null),V.completeDelay=o(i,"completeDelay",0),V.loop=Math.round(o(i,"loop",0)),V.loopDelay=Math.round(o(i,"loopDelay",0)),V.paused=a(i,"paused",!1),V.useFrames=a(i,"useFrames",!1);for(var z=f(i,"callbackScope",V),W=[V,null],H=T.TYPES,q=0;q<H.length;q++){var Z=H[q],K=f(i,Z,!1);if(K){var J=f(i,Z+"Scope",z),Q=f(i,Z+"Params",[]);V.setCallback(Z,K,W.concat(Q),J)}}return V}},function(t,i,n){var r=n(80),o=n(6),a=n(14);t.exports=function(t,i){void 0===i&&(i={});var n=o(i,"start",0),h=o(i,"ease",null),d=o(i,"grid",null),f=o(i,"from",0),p="first"===f,T="center"===f,b="last"===f,S="number"==typeof f,A=Array.isArray(t),P=A?parseFloat(t[0]):parseFloat(t),O=A?parseFloat(t[1]):0,L=Math.max(P,O);if(A&&(n+=P),d){var D=d[0],I=d[1],F=0,B=0,N=0,Y=0,X=[];b?(F=D-1,B=I-1):S?(F=f%D,B=Math.floor(f/D)):T&&(F=(D-1)/2,B=(I-1)/2);for(var G=a.MIN_SAFE_INTEGER,U=0;U<I;U++){X[U]=[];for(var V=0;V<D;V++){N=F-V,Y=B-U;var z=Math.sqrt(N*N+Y*Y);z>G&&(G=z),X[U][V]=z}}}var W=h?r(h):null;return d?function(t,i,r,o){var a,h=0,d=o%D,f=Math.floor(o/D);if(d>=0&&d<D&&f>=0&&f<I&&(h=X[f][d]),A){var p=O-P;a=W?h/G*p*W(h/G):h/G*p}else a=W?h*P*W(h/G):h*P;return a+n}:function(t,i,r,o,a){var h,d,D;return a--,p?h=o:T?h=Math.abs(a/2-o):b?h=a-o:S&&(h=Math.abs(f-o)),A?(D=T?(O-P)/a*(2*h):(O-P)/a*h,d=W?D*W(h/a):D):d=W?a*L*W(h/a):h*P,d+n}}},function(t,i,n){var r=n(77),o=n(265),a=n(13),h=n(99),d=n(80),f=n(162),p=n(263),T=n(584),b=n(6),S=n(588),A=n(163);t.exports=function(t,i){var n=new S(t);n.completeDelay=a(i,"completeDelay",0),n.loop=Math.round(a(i,"loop",0)),n.loopDelay=Math.round(a(i,"loopDelay",0)),n.paused=h(i,"paused",!1),n.useFrames=h(i,"useFrames",!1);var P=b(i,"callbackScope",n),O=[n],L=b(i,"onStart",!1);if(L){var D=b(i,"onStartScope",P),I=b(i,"onStartParams",[]);n.setCallback("onStart",L,O.concat(I),D)}var F=b(i,"onUpdate",!1);if(F){var B=b(i,"onUpdateScope",P),N=b(i,"onUpdateParams",[]);n.setCallback("onUpdate",F,O.concat(N),B)}var Y=b(i,"onLoop",!1);if(Y){var X=b(i,"onLoopScope",P),G=b(i,"onLoopParams",[]);n.setCallback("onLoop",Y,O.concat(G),X)}var U=b(i,"onYoyo",!1);if(U){var V=b(i,"onYoyoScope",P),z=b(i,"onYoyoParams",[]);n.setCallback("onYoyo",U,O.concat(null,z),V)}var W=b(i,"onComplete",!1);if(W){var H=b(i,"onCompleteScope",P),q=b(i,"onCompleteParams",[]);n.setCallback("onComplete",W,O.concat(q),H)}var Z=T(i);if(0===Z.length)return n.paused=!0,n;var K=r(o);K.targets=p(i);var J=a(i,"totalDuration",0);K.duration=J>0?Math.floor(J/Z.length):f(i,"duration",K.duration),K.delay=f(i,"delay",K.delay),K.easeParams=b(i,"easeParams",K.easeParams),K.ease=d(b(i,"ease",K.ease),K.easeParams),K.hold=f(i,"hold",K.hold),K.repeat=f(i,"repeat",K.repeat),K.repeatDelay=f(i,"repeatDelay",K.repeatDelay),K.yoyo=h(i,"yoyo",K.yoyo),K.flipX=h(i,"flipX",K.flipX),K.flipY=h(i,"flipY",K.flipY);for(var Q=0;Q<Z.length;Q++)n.queue(A(n,Z[Q],K));return n}},function(t,i,n){var r=n(0),o=n(9),a=n(267),h=n(163),d=n(100),f=new r({Extends:o,initialize:function Timeline2(t){o.call(this),this.manager=t,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=d.PENDING_ADD,this._pausedState=d.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(t,i){this.emit(t,this),i&&i.func.apply(i.scope,i.params)},setTimeScale:function(t){return this.timeScale=t,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===d.ACTIVE},add:function(t){return this.queue(h(this,t))},queue:function(t){return this.isPlaying()||(t.parent=this,t.parentIsTimeline=!0,this.data.push(t),this.totalData=this.data.length),this},hasOffset:function(t){return null!==t.offset},isOffsetAbsolute:function(t){return"number"==typeof t},isOffsetRelative:function(t){if("string"==typeof t){var i=t[0];if("-"===i||"+"===i)return!0}return!1},getRelativeOffset:function(t,i){var n=t[0],r=parseFloat(t.substr(2)),o=i;switch(n){case"+":o+=r;break;case"-":o-=r}return Math.max(0,o)},calcDuration:function(){for(var t=0,i=0,n=0,r=0;r<this.totalData;r++){var o=this.data[r];o.init(),this.hasOffset(o)?this.isOffsetAbsolute(o.offset)?(o.calculatedOffset=o.offset,0===o.offset&&(n=0)):this.isOffsetRelative(o.offset)&&(o.calculatedOffset=this.getRelativeOffset(o.offset,t)):o.calculatedOffset=n,t=o.totalDuration+o.calculatedOffset,i+=o.totalDuration,n+=o.totalDuration}this.duration=i,this.loopCounter=-1===this.loop?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,!this.paused||(this.state=d.PAUSED,!1)},resetTweens:function(t){for(var i=0;i<this.totalData;i++)this.data[i].play(t)},setCallback:function(t,i,n,r){return-1!==f.TYPES.indexOf(t)&&(this.callbacks[t]={func:i,scope:r,params:n}),this},makeActive:function(t){return this.manager.makeActive(t)},play:function(){if(this.state!==d.ACTIVE){if(this.paused)return this.paused=!1,void this.manager.makeActive(this);this.resetTweens(!1),this.state=d.ACTIVE,this.dispatchTimelineEvent(a.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=d.LOOP_DELAY):(this.state=d.ACTIVE,this.dispatchTimelineEvent(a.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=d.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=d.PENDING_REMOVE,this.dispatchTimelineEvent(a.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(t,i){if(this.state!==d.PAUSED){switch(this.useFrames&&(i=1*this.manager.timeScale),i*=this.timeScale,this.elapsed+=i,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=i,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case d.ACTIVE:for(var n=this.totalData,r=0;r<this.totalData;r++)this.data[r].update(t,i)&&n--;this.dispatchTimelineEvent(a.TIMELINE_UPDATE,this.callbacks.onUpdate),0===n&&this.nextState();break;case d.LOOP_DELAY:this.countdown-=i,this.countdown<=0&&(this.state=d.ACTIVE,this.dispatchTimelineEvent(a.TIMELINE_LOOP,this.callbacks.onLoop));break;case d.COMPLETE_DELAY:this.countdown-=i,this.countdown<=0&&(this.state=d.PENDING_REMOVE,this.dispatchTimelineEvent(a.TIMELINE_COMPLETE,this.callbacks.onComplete))}return this.state===d.PENDING_REMOVE}},stop:function(){this.state=d.PENDING_REMOVE},pause:function(){if(this.state!==d.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=d.PAUSED,this.emit(a.TIMELINE_PAUSE,this),this},resume:function(){return this.state===d.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(a.TIMELINE_RESUME,this)),this},hasTarget:function(t){for(var i=0;i<this.data.length;i++)if(this.data[i].hasTarget(t))return!0;return!1},destroy:function(){for(var t=0;t<this.data.length;t++)this.data[t].stop()}});f.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],t.exports=f},function(t,i,n){var r=n(86),o=n(41),a=n(32),h=n(2),d=n(64),f={parseBody:function(t,i,n,r){void 0===r&&(r={});for(var d=h(n,"fixtures",[]),f=[],p=0;p<d.length;p++)for(var T=this.parseFixture(d[p]),b=0;b<T.length;b++)f.push(T[b]);var S=a.clone(n,!0);a.extend(S,r,!0),delete S.fixtures,delete S.type;var A=o.create(S);return o.setParts(A,f),o.setPosition(A,{x:t,y:i}),A},parseFixture:function(t){var i,n=a.extend({},!1,t);if(delete n.circle,delete n.vertices,t.circle){var o=h(t.circle,"x"),d=h(t.circle,"y"),f=h(t.circle,"radius");i=[r.circle(o,d,f,n)]}else t.vertices&&(i=this.parseVertices(t.vertices,n));return i},parseVertices:function(t,i){void 0===i&&(i={});for(var n=[],h=0;h<t.length;h++)d.clockwiseSort(t[h]),n.push(o.create(a.extend({position:d.centre(t[h]),vertices:t[h]},i)));return r.flagCoincidentParts(n)}};t.exports=f},function(t,i,n){var r=n(86),o=n(41),a={parseBody:function(t,i,n,a){var h;void 0===a&&(a={});var d=n.vertices;if(1===d.length)a.vertices=d[0],h=o.create(a),r.flagCoincidentParts(h.parts);else{for(var f=[],p=0;p<d.length;p++){var T=o.create({vertices:d[p]});f.push(T)}r.flagCoincidentParts(f),a.parts=f,h=o.create(a)}return h.label=n.label,o.setPosition(h,{x:t,y:i}),h}};t.exports=a},function(t,i,n){var r={};t.exports=r;var o=n(118),a=n(128),h=n(32),d=n(41),f=n(86);r.stack=function(t,i,n,r,a,h,f){for(var p,T=o.create({label:"Stack"}),b=t,S=i,A=0,P=0;P<r;P++){for(var O=0,L=0;L<n;L++){var D=f(b,S,L,P,p,A);if(D){var I=D.bounds.max.y-D.bounds.min.y,F=D.bounds.max.x-D.bounds.min.x;I>O&&(O=I),d.translate(D,{x:.5*F,y:.5*I}),b=D.bounds.max.x+a,o.addBody(T,D),p=D,A+=1}else b+=a}S+=O+h,b=t}return T},r.chain=function(t,i,n,r,d,f){for(var p=t.bodies,T=1;T<p.length;T++){var b=p[T-1],S=p[T],A=b.bounds.max.y-b.bounds.min.y,P=b.bounds.max.x-b.bounds.min.x,O=S.bounds.max.y-S.bounds.min.y,L={bodyA:b,pointA:{x:P*i,y:A*n},bodyB:S,pointB:{x:(S.bounds.max.x-S.bounds.min.x)*r,y:O*d}},D=h.extend(L,f);o.addConstraint(t,a.create(D))}return t.label+=" Chain",t},r.mesh=function(t,i,n,r,d){var f,p,T,b,S,A=t.bodies;for(f=0;f<n;f++){for(p=1;p<i;p++)T=A[p-1+f*i],b=A[p+f*i],o.addConstraint(t,a.create(h.extend({bodyA:T,bodyB:b},d)));if(f>0)for(p=0;p<i;p++)T=A[p+(f-1)*i],b=A[p+f*i],o.addConstraint(t,a.create(h.extend({bodyA:T,bodyB:b},d))),r&&p>0&&(S=A[p-1+(f-1)*i],o.addConstraint(t,a.create(h.extend({bodyA:S,bodyB:b},d)))),r&&p<i-1&&(S=A[p+1+(f-1)*i],o.addConstraint(t,a.create(h.extend({bodyA:S,bodyB:b},d))))}return t.label+=" Mesh",t},r.pyramid=function(t,i,n,o,a,h,f){return r.stack(t,i,n,o,a,h,(function(i,r,h,p,T,b){var S=Math.min(o,Math.ceil(n/2)),A=T?T.bounds.max.x-T.bounds.min.x:0;if(!(p>S||h<(p=S-p)||h>n-1-p))return 1===b&&d.translate(T,{x:(h+(n%2==1?1:-1))*A,y:0}),f(t+(T?h*A:0)+h*a,r,h,p,T,b)}))},r.newtonsCradle=function(t,i,n,r,h){for(var d=o.create({label:"Newtons Cradle"}),p=0;p<n;p++){var T=f.circle(t+p*(1.9*r),i+h,r,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),b=a.create({pointA:{x:t+p*(1.9*r),y:i},bodyB:T});o.addBody(d,T),o.addConstraint(d,b)}return d},r.car=function(t,i,n,r,h){var p=d.nextGroup(!0),T=.5*-n+20,b=.5*n-20,S=o.create({label:"Car"}),A=f.rectangle(t,i,n,r,{collisionFilter:{group:p},chamfer:{radius:.5*r},density:2e-4}),P=f.circle(t+T,i+0,h,{collisionFilter:{group:p},friction:.8}),O=f.circle(t+b,i+0,h,{collisionFilter:{group:p},friction:.8}),L=a.create({bodyB:A,pointB:{x:T,y:0},bodyA:P,stiffness:1,length:0}),D=a.create({bodyB:A,pointB:{x:b,y:0},bodyA:O,stiffness:1,length:0});return o.addBody(S,A),o.addBody(S,P),o.addBody(S,O),o.addConstraint(S,L),o.addConstraint(S,D),S},r.softBody=function(t,i,n,o,a,d,p,T,b,S){b=h.extend({inertia:1/0},b),S=h.extend({stiffness:.2,render:{type:"line",anchors:!1}},S);var A=r.stack(t,i,n,o,a,d,(function(t,i){return f.circle(t,i,T,b)}));return r.mesh(A,n,o,p,S),A.label="Soft Body",A}},function(t,i,n){var r={};t.exports=r,n(84);var o=n(32);r.pathToVertices=function(t,i){"undefined"==typeof window||"SVGPathSeg"in window||o.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var n,a,h,d,f,p,T,b,S,A,P,O=[],L=0,D=0,I=0;i=i||15;var addPoint=function(t,i,n){var r=n%2==1&&n>1;if(!S||t!=S.x||i!=S.y){S&&r?(A=S.x,P=S.y):(A=0,P=0);var o={x:A+t,y:P+i};!r&&S||(S=o),O.push(o),D=A+t,I=P+i}},addSegmentPoint=function(t){var i=t.pathSegTypeAsLetter.toUpperCase();if("Z"!==i){switch(i){case"M":case"L":case"T":case"C":case"S":case"Q":D=t.x,I=t.y;break;case"H":D=t.x;break;case"V":I=t.y}addPoint(D,I,t.pathSegType)}};for(r._svgPathToAbsolute(t),h=t.getTotalLength(),p=[],n=0;n<t.pathSegList.numberOfItems;n+=1)p.push(t.pathSegList.getItem(n));for(T=p.concat();L<h;){if((f=p[t.getPathSegAtLength(L)])!=b){for(;T.length&&T[0]!=f;)addSegmentPoint(T.shift());b=f}switch(f.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":d=t.getPointAtLength(L),addPoint(d.x,d.y,0)}L+=i}for(n=0,a=T.length;n<a;++n)addSegmentPoint(T[n]);return O},r._svgPathToAbsolute=function(t){for(var i,n,r,o,a,h,d=t.pathSegList,f=0,p=0,T=d.numberOfItems,b=0;b<T;++b){var S=d.getItem(b),A=S.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(A))"x"in S&&(f=S.x),"y"in S&&(p=S.y);else switch("x1"in S&&(r=f+S.x1),"x2"in S&&(a=f+S.x2),"y1"in S&&(o=p+S.y1),"y2"in S&&(h=p+S.y2),"x"in S&&(f+=S.x),"y"in S&&(p+=S.y),A){case"m":d.replaceItem(t.createSVGPathSegMovetoAbs(f,p),b);break;case"l":d.replaceItem(t.createSVGPathSegLinetoAbs(f,p),b);break;case"h":d.replaceItem(t.createSVGPathSegLinetoHorizontalAbs(f),b);break;case"v":d.replaceItem(t.createSVGPathSegLinetoVerticalAbs(p),b);break;case"c":d.replaceItem(t.createSVGPathSegCurvetoCubicAbs(f,p,r,o,a,h),b);break;case"s":d.replaceItem(t.createSVGPathSegCurvetoCubicSmoothAbs(f,p,a,h),b);break;case"q":d.replaceItem(t.createSVGPathSegCurvetoQuadraticAbs(f,p,r,o),b);break;case"t":d.replaceItem(t.createSVGPathSegCurvetoQuadraticSmoothAbs(f,p),b);break;case"a":d.replaceItem(t.createSVGPathSegArcAbs(f,p,S.r1,S.r2,S.angle,S.largeArcFlag,S.sweepFlag),b);break;case"z":case"Z":f=i,p=n}"M"!=A&&"m"!=A||(i=f,n=p)}}},function(t,i,n){var r=n(86),o=n(41),a=n(0),h=n(249),d=n(9),f=n(2),p=n(126),T=n(64),b=new a({Extends:d,Mixins:[h.Bounce,h.Collision,h.Friction,h.Gravity,h.Mass,h.Sensor,h.Sleep,h.Static],initialize:function MatterTileBody2(t,i,n){d.call(this),this.tile=i,this.world=t,i.physics.matterBody&&i.physics.matterBody.destroy(),i.physics.matterBody=this;var r=f(n,"body",null),o=f(n,"addToWorld",!0);if(r)this.setBody(r,o);else{var a=i.getCollisionGroup();f(a,"objects",[]).length>0?this.setFromTileCollision(n):this.setFromTileRectangle(n)}},setFromTileRectangle:function(t){void 0===t&&(t={}),p(t,"isStatic")||(t.isStatic=!0),p(t,"addToWorld")||(t.addToWorld=!0);var i=this.tile.getBounds(),n=i.x+i.width/2,o=i.y+i.height/2,a=r.rectangle(n,o,i.width,i.height,t);return this.setBody(a,t.addToWorld),this},setFromTileCollision:function(t){void 0===t&&(t={}),p(t,"isStatic")||(t.isStatic=!0),p(t,"addToWorld")||(t.addToWorld=!0);for(var i=this.tile.tilemapLayer.scaleX,n=this.tile.tilemapLayer.scaleY,a=this.tile.getLeft(),h=this.tile.getTop(),d=this.tile.getCollisionGroup(),b=f(d,"objects",[]),S=[],A=0;A<b.length;A++){var P=b[A],O=a+P.x*i,L=h+P.y*n,D=P.width*i,I=P.height*n,F=null;if(P.rectangle)F=r.rectangle(O+D/2,L+I/2,D,I,t);else if(P.ellipse)F=r.circle(O+D/2,L+I/2,D/2,t);else if(P.polygon||P.polyline){var B=(P.polygon?P.polygon:P.polyline).map((function(t){return{x:t.x*i,y:t.y*n}})),N=T.create(B),Y=T.centre(N);O+=Y.x,L+=Y.y,F=r.fromVertices(O,L,N,t)}F&&S.push(F)}return 1===S.length?this.setBody(S[0],t.addToWorld):S.length>1&&(t.parts=S,this.setBody(o.create(t),t.addToWorld)),this},setBody:function(t,i){return void 0===i&&(i=!0),this.body&&this.removeBody(),this.body=t,this.body.gameObject=this,i&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});t.exports=b},function(t,i,n){var r=n(1399);r.Body=n(41),r.Composite=n(118),r.World=n(596),r.Detector=n(273),r.Grid=n(597),r.Pairs=n(598),r.Pair=n(250),r.Query=n(1400),r.Resolver=n(599),r.SAT=n(274),r.Constraint=n(128),r.Common=n(32),r.Engine=n(1401),r.Events=n(166),r.Sleeping=n(165),r.Plugin=n(595),r.Bodies=n(86),r.Composites=n(591),r.Axes=n(271),r.Bounds=n(84),r.Svg=n(592),r.Vector=n(83),r.Vertices=n(64),r.World.add=r.Composite.add,r.World.remove=r.Composite.remove,r.World.addComposite=r.Composite.addComposite,r.World.addBody=r.Composite.addBody,r.World.addConstraint=r.Composite.addConstraint,r.World.clear=r.Composite.clear,t.exports=r},function(t,i,n){var r={};t.exports=r;var o=n(32);r._registry={},r.register=function(t){if(r.isPlugin(t)||o.warn("Plugin.register:",r.toString(t),"does not implement all required fields."),t.name in r._registry){var i=r._registry[t.name],n=r.versionParse(t.version).number,a=r.versionParse(i.version).number;n>a?(o.warn("Plugin.register:",r.toString(i),"was upgraded to",r.toString(t)),r._registry[t.name]=t):n<a?o.warn("Plugin.register:",r.toString(i),"can not be downgraded to",r.toString(t)):t!==i&&o.warn("Plugin.register:",r.toString(t),"is already registered to different plugin object")}else r._registry[t.name]=t;return t},r.resolve=function(t){return r._registry[r.dependencyParse(t).name]},r.toString=function(t){return"string"==typeof t?t:(t.name||"anonymous")+"@"+(t.version||t.range||"0.0.0")},r.isPlugin=function(t){return t&&t.name&&t.version&&t.install},r.isUsed=function(t,i){return t.used.indexOf(i)>-1},r.isFor=function(t,i){var n=t.for&&r.dependencyParse(t.for);return!t.for||i.name===n.name&&r.versionSatisfies(i.version,n.range)},r.use=function(t,i){if(t.uses=(t.uses||[]).concat(i||[]),0!==t.uses.length){for(var n=r.dependencies(t),a=o.topologicalSort(n),h=[],d=0;d<a.length;d+=1)if(a[d]!==t.name){var f=r.resolve(a[d]);f?r.isUsed(t,f.name)||(r.isFor(f,t)||(o.warn("Plugin.use:",r.toString(f),"is for",f.for,"but installed on",r.toString(t)+"."),f._warned=!0),f.install?f.install(t):(o.warn("Plugin.use:",r.toString(f),"does not specify an install function."),f._warned=!0),f._warned?(h.push("🔶 "+r.toString(f)),delete f._warned):h.push("✅ "+r.toString(f)),t.used.push(f.name)):h.push("❌ "+a[d])}h.length>0&&!f.silent&&o.info(h.join("  "))}else o.warn("Plugin.use:",r.toString(t),"does not specify any dependencies to install.")},r.dependencies=function(t,i){var n=r.dependencyParse(t),a=n.name;if(!(a in(i=i||{}))){t=r.resolve(t)||t,i[a]=o.map(t.uses||[],(function(i){r.isPlugin(i)&&r.register(i);var a=r.dependencyParse(i),h=r.resolve(i);return h&&!r.versionSatisfies(h.version,a.range)?(o.warn("Plugin.dependencies:",r.toString(h),"does not satisfy",r.toString(a),"used by",r.toString(n)+"."),h._warned=!0,t._warned=!0):h||(o.warn("Plugin.dependencies:",r.toString(i),"used by",r.toString(n),"could not be resolved."),t._warned=!0),a.name}));for(var h=0;h<i[a].length;h+=1)r.dependencies(i[a][h],i);return i}},r.dependencyParse=function(t){return o.isString(t)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/.test(t)||o.warn("Plugin.dependencyParse:",t,"is not a valid dependency string."),{name:t.split("@")[0],range:t.split("@")[1]||"*"}):{name:t.name,range:t.range||t.version}},r.versionParse=function(t){/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/.test(t)||o.warn("Plugin.versionParse:",t,"is not a valid version or range.");var i=t.split("-");t=i[0];var n=isNaN(Number(t[0])),r=n?t.substr(1):t,a=o.map(r.split("."),(function(t){return Number(t)}));return{isRange:n,version:r,range:t,operator:n?t[0]:"",parts:a,prerelease:i[1],number:1e8*a[0]+1e4*a[1]+a[2]}},r.versionSatisfies=function(t,i){i=i||"*";var n=r.versionParse(i),o=n.parts,a=r.versionParse(t),h=a.parts;if(n.isRange){if("*"===n.operator||"*"===t)return!0;if("~"===n.operator)return h[0]===o[0]&&h[1]===o[1]&&h[2]>=o[2];if("^"===n.operator)return o[0]>0?h[0]===o[0]&&a.number>=n.number:o[1]>0?h[1]===o[1]&&h[2]>=o[2]:h[2]===o[2]}return t===i||"*"===t}},function(t,i,n){var r={};t.exports=r;var o=n(118);n(128);var a=n(32);r.create=function(t){var i=o.create(),n={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return a.extend(i,n,t)}},function(t,i,n){var r={};t.exports=r;var o=n(250),a=n(273),h=n(32);r.create=function(t){var i={controller:r,detector:a.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return h.extend(i,t)},r.update=function(t,i,n,o){var a,h,d,f,p,T=n.world,b=t.buckets,S=!1,A=n.metrics;for(A.broadphaseTests=0,a=0;a<i.length;a++){var P=i[a];if((!P.isSleeping||o)&&!(P.bounds.max.x<T.bounds.min.x||P.bounds.min.x>T.bounds.max.x||P.bounds.max.y<T.bounds.min.y||P.bounds.min.y>T.bounds.max.y)){var O=r._getRegion(t,P);if(!P.region||O.id!==P.region.id||o){A.broadphaseTests+=1,P.region&&!o||(P.region=O);var L=r._regionUnion(O,P.region);for(h=L.startCol;h<=L.endCol;h++)for(d=L.startRow;d<=L.endRow;d++){f=b[p=r._getBucketId(h,d)];var D=h>=O.startCol&&h<=O.endCol&&d>=O.startRow&&d<=O.endRow,I=h>=P.region.startCol&&h<=P.region.endCol&&d>=P.region.startRow&&d<=P.region.endRow;!D&&I&&I&&f&&r._bucketRemoveBody(t,f,P),(P.region===O||D&&!I||o)&&(f||(f=r._createBucket(b,p)),r._bucketAddBody(t,f,P))}P.region=O,S=!0}}}S&&(t.pairsList=r._createActivePairsList(t))},r.clear=function(t){t.buckets={},t.pairs={},t.pairsList=[]},r._regionUnion=function(t,i){var n=Math.min(t.startCol,i.startCol),o=Math.max(t.endCol,i.endCol),a=Math.min(t.startRow,i.startRow),h=Math.max(t.endRow,i.endRow);return r._createRegion(n,o,a,h)},r._getRegion=function(t,i){var n=i.bounds,o=Math.floor(n.min.x/t.bucketWidth),a=Math.floor(n.max.x/t.bucketWidth),h=Math.floor(n.min.y/t.bucketHeight),d=Math.floor(n.max.y/t.bucketHeight);return r._createRegion(o,a,h,d)},r._createRegion=function(t,i,n,r){return{id:t+","+i+","+n+","+r,startCol:t,endCol:i,startRow:n,endRow:r}},r._getBucketId=function(t,i){return"C"+t+"R"+i},r._createBucket=function(t,i){return t[i]=[]},r._bucketAddBody=function(t,i,n){for(var r=0;r<i.length;r++){var a=i[r];if(!(n.id===a.id||n.isStatic&&a.isStatic)){var h=o.id(n,a),d=t.pairs[h];d?d[2]+=1:t.pairs[h]=[n,a,1]}}i.push(n)},r._bucketRemoveBody=function(t,i,n){i.splice(i.indexOf(n),1);for(var r=0;r<i.length;r++){var a=i[r],h=o.id(n,a),d=t.pairs[h];d&&(d[2]-=1)}},r._createActivePairsList=function(t){var i,n,r=[];i=h.keys(t.pairs);for(var o=0;o<i.length;o++)(n=t.pairs[i[o]])[2]>0?r.push(n):delete t.pairs[i[o]];return r}},function(t,i,n){var r={};t.exports=r;var o=n(250),a=n(32);r._pairMaxIdleLife=1e3,r.create=function(t){return a.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},t)},r.update=function(t,i,n){var r,a,h,d,f=t.list,p=t.table,T=t.collisionStart,b=t.collisionEnd,S=t.collisionActive;for(T.length=0,b.length=0,S.length=0,d=0;d<f.length;d++)f[d].confirmedActive=!1;for(d=0;d<i.length;d++)(r=i[d]).collided&&((h=p[a=o.id(r.bodyA,r.bodyB)])?(h.isActive?S.push(h):T.push(h),o.update(h,r,n),h.confirmedActive=!0):(h=o.create(r,n),p[a]=h,T.push(h),f.push(h)));for(d=0;d<f.length;d++)(h=f[d]).isActive&&!h.confirmedActive&&(o.setActive(h,!1,n),b.push(h))},r.removeOld=function(t,i){var n,o,a,h,d=t.list,f=t.table,p=[];for(h=0;h<d.length;h++)(o=(n=d[h]).collision).bodyA.isSleeping||o.bodyB.isSleeping?n.timeUpdated=i:i-n.timeUpdated>r._pairMaxIdleLife&&p.push(h);for(h=0;h<p.length;h++)delete f[(n=d[a=p[h]-h]).id],d.splice(a,1)},r.clear=function(t){return t.table={},t.list.length=0,t.collisionStart.length=0,t.collisionActive.length=0,t.collisionEnd.length=0,t}},function(t,i,n){var r={};t.exports=r;var o=n(64),a=n(83),h=n(32),d=n(84);r._restingThresh=4,r._restingThreshTangent=6,r._positionDampen=.9,r._positionWarming=.8,r._frictionNormalMultiplier=5,r.preSolvePosition=function(t){var i,n,r;for(i=0;i<t.length;i++)(n=t[i]).isActive&&(r=n.activeContacts.length,n.collision.parentA.totalContacts+=r,n.collision.parentB.totalContacts+=r)},r.solvePosition=function(t,i,n){var o,a,h,d,f,p,T,b,S,A,P,O,L,D,I,F,B=n*r._positionDampen;for(o=0;o<i.length;o++){var N=i[o];N.previousPositionImpulse.x=N.positionImpulse.x,N.previousPositionImpulse.y=N.positionImpulse.y}for(o=0;o<t.length;o++)(d=t[o]).isActive&&!d.isSensor&&(p=(f=d.collision).parentA,T=f.parentB,b=f.normal,P=p.previousPositionImpulse,O=T.previousPositionImpulse,A=f.penetration,D=O.x-P.x+A.x,I=O.y-P.y+A.y,S=(a=b.x)*D+(h=b.y)*I,d.separation=S,F=(S-d.slop)*B,(p.isStatic||T.isStatic)&&(F*=2),p.isStatic||p.isSleeping||(L=F/p.totalContacts,p.positionImpulse.x+=a*L,p.positionImpulse.y+=h*L),T.isStatic||T.isSleeping||(L=F/T.totalContacts,T.positionImpulse.x-=a*L,T.positionImpulse.y-=h*L))},r.postSolvePosition=function(t){for(var i=0;i<t.length;i++){var n=t[i];if(n.totalContacts=0,0!==n.positionImpulse.x||0!==n.positionImpulse.y){for(var h=0;h<n.parts.length;h++){var f=n.parts[h];o.translate(f.vertices,n.positionImpulse),d.update(f.bounds,f.vertices,n.velocity),f.position.x+=n.positionImpulse.x,f.position.y+=n.positionImpulse.y}n.positionPrev.x+=n.positionImpulse.x,n.positionPrev.y+=n.positionImpulse.y,a.dot(n.positionImpulse,n.velocity)<0?(n.positionImpulse.x=0,n.positionImpulse.y=0):(n.positionImpulse.x*=r._positionWarming,n.positionImpulse.y*=r._positionWarming)}}},r.preSolveVelocity=function(t){var i,n,r,o,h,d,f,p,T,b,S,A,P,O,L=a._temp[0],D=a._temp[1];for(i=0;i<t.length;i++)if((r=t[i]).isActive&&!r.isSensor)for(o=r.activeContacts,d=(h=r.collision).parentA,f=h.parentB,p=h.normal,T=h.tangent,n=0;n<o.length;n++)S=(b=o[n]).vertex,A=b.normalImpulse,P=b.tangentImpulse,0===A&&0===P||(L.x=p.x*A+T.x*P,L.y=p.y*A+T.y*P,d.isStatic||d.isSleeping||(O=a.sub(S,d.position,D),d.positionPrev.x+=L.x*d.inverseMass,d.positionPrev.y+=L.y*d.inverseMass,d.anglePrev+=a.cross(O,L)*d.inverseInertia),f.isStatic||f.isSleeping||(O=a.sub(S,f.position,D),f.positionPrev.x-=L.x*f.inverseMass,f.positionPrev.y-=L.y*f.inverseMass,f.anglePrev-=a.cross(O,L)*f.inverseInertia))},r.solveVelocity=function(t,i){for(var n=i*i,o=a._temp[0],d=a._temp[1],f=a._temp[2],p=a._temp[3],T=a._temp[4],b=a._temp[5],S=0;S<t.length;S++){var A=t[S];if(A.isActive&&!A.isSensor){var P=A.collision,O=P.parentA,L=P.parentB,D=P.normal,I=P.tangent,F=A.activeContacts,B=1/F.length;O.velocity.x=O.position.x-O.positionPrev.x,O.velocity.y=O.position.y-O.positionPrev.y,L.velocity.x=L.position.x-L.positionPrev.x,L.velocity.y=L.position.y-L.positionPrev.y,O.angularVelocity=O.angle-O.anglePrev,L.angularVelocity=L.angle-L.anglePrev;for(var N=0;N<F.length;N++){var Y=F[N],X=Y.vertex,G=a.sub(X,O.position,d),U=a.sub(X,L.position,f),V=a.add(O.velocity,a.mult(a.perp(G),O.angularVelocity),p),z=a.add(L.velocity,a.mult(a.perp(U),L.angularVelocity),T),W=a.sub(V,z,b),H=a.dot(D,W),q=a.dot(I,W),Z=Math.abs(q),K=h.sign(q),J=(1+A.restitution)*H,Q=h.clamp(A.separation+H,0,1)*r._frictionNormalMultiplier,$=q,tt=1/0;Z>A.friction*A.frictionStatic*Q*n&&(tt=Z,$=h.clamp(A.friction*K*n,-tt,tt));var et=a.cross(G,D),it=a.cross(U,D),nt=B/(O.inverseMass+L.inverseMass+O.inverseInertia*et*et+L.inverseInertia*it*it);if(J*=nt,$*=nt,H<0&&H*H>r._restingThresh*n)Y.normalImpulse=0;else{var st=Y.normalImpulse;Y.normalImpulse=Math.min(Y.normalImpulse+J,0),J=Y.normalImpulse-st}if(q*q>r._restingThreshTangent*n)Y.tangentImpulse=0;else{var rt=Y.tangentImpulse;Y.tangentImpulse=h.clamp(Y.tangentImpulse+$,-tt,tt),$=Y.tangentImpulse-rt}o.x=D.x*J+I.x*$,o.y=D.y*J+I.y*$,O.isStatic||O.isSleeping||(O.positionPrev.x+=o.x*O.inverseMass,O.positionPrev.y+=o.y*O.inverseMass,O.anglePrev+=a.cross(G,o)*O.inverseInertia),L.isStatic||L.isSleeping||(L.positionPrev.x-=o.x*L.inverseMass,L.positionPrev.y-=o.y*L.inverseMass,L.anglePrev-=a.cross(U,o)*L.inverseInertia)}}}}},function(t,i){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"==typeof window&&(n=window)}t.exports=n},function(t,i,n){var r=n(276);t.exports=function(t,i,n,o){for(var a=t[0],h=1;h<t.length;h++){var d=t[h];r(d,a,i,n,o),a=d}return t}},function(t,i,n){var r=n(46);t.exports=function(t,i,n,o,a){return r(t,"angle",i,n,o,a)}},function(t,i){t.exports=function(t,i,n){for(var r=0;r<t.length;r++){var o=t[r];i.call(n,o)}return t}},function(t,i){t.exports=function(t,i,n){void 0===n&&(n=0);for(var r=n;r<t.length;r++){var o=t[r],a=!0;for(var h in i)o[h]!==i[h]&&(a=!1);if(a)return o}return null}},function(t,i){t.exports=function(t,i,n){void 0===n&&(n=0);for(var r=n;r<t.length;r++){var o=t[r],a=!0;for(var h in i)o[h]!==i[h]&&(a=!1);if(a)return o}return null}},function(t,i,n){var r=n(289),o=n(123),a=n(2),h=n(1),d=new(n(129))({sys:{queueDepthSort:h,events:{once:h}}},0,0,1,1);t.exports=function(t,i){void 0===i&&(i={});var n=i.hasOwnProperty("width"),h=i.hasOwnProperty("height"),f=a(i,"width",-1),p=a(i,"height",-1),T=a(i,"cellWidth",1),b=a(i,"cellHeight",T),S=a(i,"position",o.TOP_LEFT),A=a(i,"x",0),P=a(i,"y",0),O=0,L=0,D=f*T,I=p*b;d.setPosition(A,P),d.setSize(T,b);for(var F=0;F<t.length;F++)if(r(t[F],d,S),n&&-1===f)d.x+=T;else if(h&&-1===p)d.y+=b;else if(h&&!n){if(L+=b,d.y+=b,L===I&&(L=0,O+=T,d.y=P,d.x+=T,O===D))break}else if(O+=T,d.x+=T,O===D&&(O=0,L+=b,d.x=A,d.y+=b,L===I))break;return t}},function(t,i,n){var r=n(18),o={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t,i,n,o){return void 0===t&&(t=1),void 0===i?this.alpha=t:(this._alphaTL=r(t,0,1),this._alphaTR=r(i,0,1),this._alphaBL=r(n,0,1),this._alphaBR=r(o,0,1)),this},alpha:{get:function(){return this._alpha},set:function(t){var i=r(t,0,1);this._alpha=i,this._alphaTL=i,this._alphaTR=i,this._alphaBL=i,this._alphaBR=i,0===i?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(t){var i=r(t,0,1);this._alphaTL=i,0!==i&&(this.renderFlags|=2)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(t){var i=r(t,0,1);this._alphaTR=i,0!==i&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(t){var i=r(t,0,1);this._alphaBL=i,0!==i&&(this.renderFlags|=2)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(t){var i=r(t,0,1);this._alphaBR=i,0!==i&&(this.renderFlags|=2)}}};t.exports=o},function(t,i){t.exports={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,i){return this.width=t,this.height=i,this},setDisplaySize:function(t,i){return this.displayWidth=t,this.displayHeight=i,this}}},function(t,i){t.exports={texture:null,frame:null,isCropped:!1,setCrop:function(t,i,n,r){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,i,n,r,this.flipX,this.flipY);else{var o=t;this.frame.setCropUVs(this._crop,o.x,o.y,o.width,o.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},function(t,i){t.exports={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,i){return this.flipX=t,this.flipY=i,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}}},function(t,i,n){var r=n(10),o=n(308),a=n(3),h={prepareBoundsOutput:function(t,i){return void 0===i&&(i=!1),0!==this.rotation&&o(t,this.x,this.y,this.rotation),i&&this.parentContainer&&this.parentContainer.getBoundsTransformMatrix().transformPoint(t.x,t.y,t),t},getCenter:function(t){return void 0===t&&(t=new a),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,t},getTopLeft:function(t,i){return t||(t=new a),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,i)},getTopCenter:function(t,i){return t||(t=new a),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,i)},getTopRight:function(t,i){return t||(t=new a),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,i)},getLeftCenter:function(t,i){return t||(t=new a),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,i)},getRightCenter:function(t,i){return t||(t=new a),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,i)},getBottomLeft:function(t,i){return t||(t=new a),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,i)},getBottomCenter:function(t,i){return t||(t=new a),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,i)},getBottomRight:function(t,i){return t||(t=new a),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,i)},getBounds:function(t){var i,n,o,a,h,d,f,p;if(void 0===t&&(t=new r),this.parentContainer){var T=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(t),T.transformPoint(t.x,t.y,t),i=t.x,n=t.y,this.getTopRight(t),T.transformPoint(t.x,t.y,t),o=t.x,a=t.y,this.getBottomLeft(t),T.transformPoint(t.x,t.y,t),h=t.x,d=t.y,this.getBottomRight(t),T.transformPoint(t.x,t.y,t),f=t.x,p=t.y}else this.getTopLeft(t),i=t.x,n=t.y,this.getTopRight(t),o=t.x,a=t.y,this.getBottomLeft(t),h=t.x,d=t.y,this.getBottomRight(t),f=t.x,p=t.y;return t.x=Math.min(i,o,h,f),t.y=Math.min(n,a,d,p),t.width=Math.max(i,o,h,f)-t.x,t.height=Math.max(n,a,d,p)-t.y,t}};t.exports=h},function(t,i){t.exports="blur"},function(t,i){t.exports="boot"},function(t,i){t.exports="contextlost"},function(t,i){t.exports="contextrestored"},function(t,i){t.exports="destroy"},function(t,i){t.exports="focus"},function(t,i){t.exports="hidden"},function(t,i){t.exports="pause"},function(t,i){t.exports="postrender"},function(t,i){t.exports="poststep"},function(t,i){t.exports="prerender"},function(t,i){t.exports="prestep"},function(t,i){t.exports="ready"},function(t,i){t.exports="resume"},function(t,i){t.exports="step"},function(t,i){t.exports="visible"},function(t,i){t.exports="postrender"},function(t,i){t.exports="prerender"},function(t,i){t.exports="render"},function(t,i){t.exports="resize"},function(t,i){t.exports={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function(t,i){return void 0===t&&(t=.5),void 0===i&&(i=t),this.originX=t,this.originY=i,this.updateDisplayOrigin()},setOriginFromFrame:function(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.displayOriginX=t,this.displayOriginY=i,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}}},function(t,i,n){var r=n(36),o=n(99),a=n(6),h=n(100),d=n(3),f={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:h.PLAYING_FORWARD,setPath:function(t,i){void 0===i&&(i=this.pathConfig);var n=this.pathTween;return n&&n.isPlaying()&&n.stop(),this.path=t,i&&this.startFollow(i),this},setRotateToPath:function(t,i){return void 0===i&&(i=0),this.rotateToPath=t,this.pathRotationOffset=i,this},isFollowing:function(){var t=this.pathTween;return t&&t.isPlaying()},startFollow:function(t,i){void 0===t&&(t={}),void 0===i&&(i=0);var n=this.pathTween;n&&n.isPlaying()&&n.stop(),"number"==typeof t&&(t={duration:t}),t.from=a(t,"from",0),t.to=a(t,"to",1);var f=o(t,"positionOnPath",!1);this.rotateToPath=o(t,"rotateToPath",!1),this.pathRotationOffset=a(t,"rotationOffset",0);var p=a(t,"startAt",i);if(p&&(t.onStart=function(t){var i=t.data[0];i.progress=p,i.elapsed=i.duration*p;var n=i.ease(i.progress);i.current=i.start+(i.end-i.start)*n,i.target[i.key]=i.current}),this.pathOffset||(this.pathOffset=new d(this.x,this.y)),this.pathVector||(this.pathVector=new d),this.pathDelta||(this.pathDelta=new d),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(t),this.path.getStartPoint(this.pathOffset),f&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=h.PLAYING_FORWARD,this.rotateToPath){var T=this.path.getPoint(.1);this.rotation=Math.atan2(T.y-this.y,T.x-this.x)+r(this.pathRotationOffset)}return this.pathConfig=t,this},pauseFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.pause(),this},resumeFollow:function(){var t=this.pathTween;return t&&t.isPaused()&&t.resume(),this},stopFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.stop(),this},pathUpdate:function(){var t=this.pathTween;if(t){var i=t.data[0],n=this.pathDelta,o=this.pathVector;if(n.copy(o).negate(),i.state===h.COMPLETE)return this.path.getPoint(1,o),n.add(o),o.add(this.pathOffset),void this.setPosition(o.x,o.y);if(i.state!==h.PLAYING_FORWARD&&i.state!==h.PLAYING_BACKWARD)return;this.path.getPoint(t.getValue(),o),n.add(o),o.add(this.pathOffset);var a=this.x,d=this.y;this.setPosition(o.x,o.y);var f=this.x-a,p=this.y-d;if(0===f&&0===p)return;if(i.state!==this._prevDirection)return void(this._prevDirection=i.state);this.rotateToPath&&(this.rotation=Math.atan2(p,f)+r(this.pathRotationOffset))}}};t.exports=f},function(t,i){var n={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function(t){return void 0===t&&(t=this.frame),this.width=t.realWidth,this.height=t.realHeight,this},setSize:function(t,i){return this.width=t,this.height=i,this},setDisplaySize:function(t,i){return this.displayWidth=t,this.displayHeight=i,this}};t.exports=n},function(t,i){var n={texture:null,frame:null,isCropped:!1,setTexture:function(t,i){return this.texture=this.scene.sys.textures.get(t),this.setFrame(i)},setFrame:function(t,i,n){return void 0===i&&(i=!0),void 0===n&&(n=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&i&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};t.exports=n},function(t,i){var n={texture:null,frame:null,isCropped:!1,setCrop:function(t,i,n,r){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,i,n,r,this.flipX,this.flipY);else{var o=t;this.frame.setCropUVs(this._crop,o.x,o.y,o.width,o.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(t,i){return this.texture=this.scene.sys.textures.get(t),this.setFrame(i)},setFrame:function(t,i,n){return void 0===i&&(i=!0),void 0===n&&(n=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&i&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};t.exports=n},function(t,i){t.exports={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(t,i,n,r){return void 0===t&&(t=16777215),void 0===i&&(i=t,n=t,r=t),this.tintTopLeft=t,this.tintTopRight=i,this.tintBottomLeft=n,this.tintBottomRight=r,this.tintFill=!1,this},setTintFill:function(t,i,n,r){return this.setTint(t,i,n,r),this.tintFill=!0,this},tint:{set:function(t){this.setTint(t,t,t,t)}},isTinted:{get:function(){var t=16777215;return this.tintFill||this.tintTopLeft!==t||this.tintTopRight!==t||this.tintBottomLeft!==t||this.tintBottomRight!==t}}}},function(t,i){t.exports="changedata"},function(t,i){t.exports="changedata-"},function(t,i){t.exports="destroy"},function(t,i){t.exports="removedata"},function(t,i){t.exports="setdata"},function(t,i){t.exports="addedtoscene"},function(t,i){t.exports="destroy"},function(t,i){t.exports="removedfromscene"},function(t,i){t.exports="complete"},function(t,i){t.exports="created"},function(t,i){t.exports="error"},function(t,i){t.exports="loop"},function(t,i){t.exports="play"},function(t,i){t.exports="seeked"},function(t,i){t.exports="seeking"},function(t,i){t.exports="stop"},function(t,i){t.exports="timeout"},function(t,i){t.exports="unlocked"},function(t,i){t.exports="addedtoscene"},function(t,i){t.exports="boot"},function(t,i){t.exports="create"},function(t,i){t.exports="destroy"},function(t,i){t.exports="pause"},function(t,i){t.exports="postupdate"},function(t,i){t.exports="prerender"},function(t,i){t.exports="preupdate"},function(t,i){t.exports="ready"},function(t,i){t.exports="removedfromscene"},function(t,i){t.exports="render"},function(t,i){t.exports="resume"},function(t,i){t.exports="shutdown"},function(t,i){t.exports="sleep"},function(t,i){t.exports="start"},function(t,i){t.exports="transitioncomplete"},function(t,i){t.exports="transitioninit"},function(t,i){t.exports="transitionout"},function(t,i){t.exports="transitionstart"},function(t,i){t.exports="transitionwake"},function(t,i){t.exports="update"},function(t,i){t.exports="wake"},function(t,i,n){var r=n(46);t.exports=function(t,i,n,o,a){return r(t,"alpha",i,n,o,a)}},function(t,i,n){var r=n(46);t.exports=function(t,i,n,o,a){return r(t,"x",i,n,o,a)}},function(t,i,n){var r=n(46);t.exports=function(t,i,n,o,a,h,d){return null==n&&(n=i),r(t,"x",i,o,h,d),r(t,"y",n,a,h,d)}},function(t,i,n){var r=n(46);t.exports=function(t,i,n,o,a){return r(t,"y",i,n,o,a)}},function(t,i){t.exports=function(t,i,n,r){void 0===n&&(n=0),void 0===r&&(r=6.28);for(var o=n,a=(r-n)/t.length,h=0;h<t.length;h++)t[h].x=i.x+i.radius*Math.cos(o),t[h].y=i.y+i.radius*Math.sin(o),o+=a;return t}},function(t,i){t.exports=function(t,i,n,r){void 0===n&&(n=0),void 0===r&&(r=6.28);for(var o=n,a=(r-n)/t.length,h=i.width/2,d=i.height/2,f=0;f<t.length;f++)t[f].x=i.x+h*Math.cos(o),t[f].y=i.y+d*Math.sin(o),o+=a;return t}},function(t,i,n){var r=n(172);t.exports=function(t,i){for(var n=r(i,t.length),o=0;o<t.length;o++){var a=t[o],h=n[o];a.x=h.x,a.y=h.y}return t}},function(t,i,n){var r=n(316),o=n(178),a=n(179);t.exports=function(t,i,n){void 0===n&&(n=0);var h=r(i,!1,t.length);n>0?o(h,n):n<0&&a(h,Math.abs(n));for(var d=0;d<t.length;d++)t[d].x=h[d].x,t[d].y=h[d].y;return t}},function(t,i,n){var r=n(317);t.exports=function(t,i,n){var o=r({x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},n),a=r({x1:i.x2,y1:i.y2,x2:i.x3,y2:i.y3},n),h=r({x1:i.x3,y1:i.y3,x2:i.x1,y2:i.y1},n);o.pop(),a.pop(),h.pop();for(var d=(o=o.concat(a,h)).length/t.length,f=0,p=0;p<t.length;p++){var T=t[p],b=o[Math.floor(f)];T.x=b.x,T.y=b.y,f+=d}return t}},function(t,i){t.exports=function(t,i,n){for(var r=0;r<t.length;r++){var o=t[r];o.anims&&o.anims.play(i,n)}return t}},function(t,i,n){var r=n(170);t.exports=function(t,i){for(var n=0;n<t.length;n++)r(i,t[n]);return t}},function(t,i,n){var r=n(180);t.exports=function(t,i){for(var n=0;n<t.length;n++)r(i,t[n]);return t}},function(t,i,n){var r=n(173);t.exports=function(t,i){for(var n=0;n<t.length;n++)r(i,t[n]);return t}},function(t,i,n){var r=n(174);t.exports=function(t,i){for(var n=0;n<t.length;n++)r(i,t[n]);return t}},function(t,i,n){var r=n(181);t.exports=function(t,i){for(var n=0;n<t.length;n++)r(i,t[n]);return t}},function(t,i,n){var r=n(46);t.exports=function(t,i,n,o,a){return r(t,"rotation",i,n,o,a)}},function(t,i,n){var r=n(182),o=n(50);t.exports=function(t,i,n){for(var a=i.x,h=i.y,d=0;d<t.length;d++){var f=t[d];r(f,a,h,n,Math.max(1,o(f.x,f.y,a,h)))}return t}},function(t,i,n){var r=n(182);t.exports=function(t,i,n,o){var a=i.x,h=i.y;if(0===o)return t;for(var d=0;d<t.length;d++)r(t[d],a,h,n,o);return t}},function(t,i,n){var r=n(46);t.exports=function(t,i,n,o,a){return r(t,"scaleX",i,n,o,a)}},function(t,i,n){var r=n(46);t.exports=function(t,i,n,o,a,h,d){return null==n&&(n=i),r(t,"scaleX",i,o,h,d),r(t,"scaleY",n,a,h,d)}},function(t,i,n){var r=n(46);t.exports=function(t,i,n,o,a){return r(t,"scaleY",i,n,o,a)}},function(t,i,n){var r=n(27);t.exports=function(t,i,n,o,a){return r(t,"alpha",i,n,o,a)}},function(t,i,n){var r=n(27);t.exports=function(t,i,n,o){return r(t,"blendMode",i,0,n,o)}},function(t,i,n){var r=n(27);t.exports=function(t,i,n,o,a){return r(t,"depth",i,n,o,a)}},function(t,i){t.exports=function(t,i,n){for(var r=0;r<t.length;r++)t[r].setInteractive(i,n);return t}},function(t,i,n){var r=n(27);t.exports=function(t,i,n,o,a,h,d){return null==n&&(n=i),r(t,"originX",i,o,h,d),r(t,"originY",n,a,h,d),t.forEach((function(t){t.updateDisplayOrigin()})),t}},function(t,i,n){var r=n(27);t.exports=function(t,i,n,o,a){return r(t,"rotation",i,n,o,a)}},function(t,i,n){var r=n(27);t.exports=function(t,i,n,o,a,h,d){return null==n&&(n=i),r(t,"scaleX",i,o,h,d),r(t,"scaleY",n,a,h,d)}},function(t,i,n){var r=n(27);t.exports=function(t,i,n,o,a){return r(t,"scaleX",i,n,o,a)}},function(t,i,n){var r=n(27);t.exports=function(t,i,n,o,a){return r(t,"scaleY",i,n,o,a)}},function(t,i,n){var r=n(27);t.exports=function(t,i,n,o,a,h,d){return null==n&&(n=i),r(t,"scrollFactorX",i,o,h,d),r(t,"scrollFactorY",n,a,h,d)}},function(t,i,n){var r=n(27);t.exports=function(t,i,n,o,a){return r(t,"scrollFactorX",i,n,o,a)}},function(t,i,n){var r=n(27);t.exports=function(t,i,n,o,a){return r(t,"scrollFactorY",i,n,o,a)}},function(t,i){t.exports=function(t,i,n,r,o){for(var a=0;a<t.length;a++)t[a].setTint(i,n,r,o);return t}},function(t,i,n){var r=n(27);t.exports=function(t,i,n,o){return r(t,"visible",i,0,n,o)}},function(t,i,n){var r=n(27);t.exports=function(t,i,n,o,a){return r(t,"x",i,n,o,a)}},function(t,i,n){var r=n(27);t.exports=function(t,i,n,o,a,h,d){return null==n&&(n=i),r(t,"x",i,o,h,d),r(t,"y",n,a,h,d)}},function(t,i,n){var r=n(27);t.exports=function(t,i,n,o,a){return r(t,"y",i,n,o,a)}},function(t,i,n){var r=n(3);t.exports=function(t,i,n,o,a){var h,d,f,p,T,b;if(void 0===o&&(o=0),void 0===a&&(a=new r),t.length>1)if(0===o){var S=t.length-1;for(h=t[S].x,d=t[S].y,f=S-1;f>=0;f--)p=(b=t[f]).x,T=b.y,b.x=h,b.y=d,h=p,d=T;t[S].x=i,t[S].y=n}else{for(h=t[0].x,d=t[0].y,f=1;f<t.length;f++)p=(b=t[f]).x,T=b.y,b.x=h,b.y=d,h=p,d=T;t[0].x=i,t[0].y=n}else h=t[0].x,d=t[0].y,t[0].x=i,t[0].y=n;return a.x=h,a.y=d,a}},function(t,i,n){var r=n(131);t.exports=function(t){return r(t)}},function(t,i,n){var r=n(183);t.exports=function(t,i,n,o,a){void 0===a&&(a=!1);var h,d=Math.abs(o-n)/t.length;if(a)for(h=0;h<t.length;h++)t[h][i]+=r(h*d,n,o);else for(h=0;h<t.length;h++)t[h][i]=r(h*d,n,o);return t}},function(t,i,n){var r=n(184);t.exports=function(t,i,n,o,a){void 0===a&&(a=!1);var h,d=Math.abs(o-n)/t.length;if(a)for(h=0;h<t.length;h++)t[h][i]+=r(h*d,n,o);else for(h=0;h<t.length;h++)t[h][i]=r(h*d,n,o);return t}},function(t,i){t.exports=function(t,i,n,r,o){void 0===o&&(o=!1);var a,h=Math.abs(r-n)/t.length;if(o)for(a=0;a<t.length;a++)t[a][i]+=a*h+n;else for(a=0;a<t.length;a++)t[a][i]=a*h+n;return t}},function(t,i){t.exports=function(t){for(var i=0;i<t.length;i++)t[i].visible=!t[i].visible;return t}},function(t,i,n){var r=n(68);t.exports=function(t,i,n){void 0===n&&(n=0);for(var o=0;o<t.length;o++){var a=t[o];a.x=r(a.x,i.left-n,i.right+n),a.y=r(a.y,i.top-n,i.bottom+n)}return t}},function(t,i,n){t.exports={Animation:n(185),AnimationFrame:n(319),AnimationManager:n(321),AnimationState:n(164),Events:n(132)}},function(t,i){t.exports="add"},function(t,i){t.exports="animationcomplete"},function(t,i){t.exports="animationcomplete-"},function(t,i){t.exports="animationrepeat"},function(t,i){t.exports="animationrestart"},function(t,i){t.exports="animationstart"},function(t,i){t.exports="animationstop"},function(t,i){t.exports="animationupdate"},function(t,i){t.exports="pauseall"},function(t,i){t.exports="remove"},function(t,i){t.exports="resumeall"},function(t,i,n){t.exports={BaseCache:n(323),CacheManager:n(325),Events:n(324)}},function(t,i){t.exports="add"},function(t,i){t.exports="remove"},function(t,i,n){t.exports={Controls:n(739),Scene2D:n(742)}},function(t,i,n){t.exports={FixedKeyControl:n(740),SmoothedKeyControl:n(741)}},function(t,i,n){var r=n(0),o=n(6),a=new r({initialize:function FixedKeyControl2(t){this.camera=o(t,"camera",null),this.left=o(t,"left",null),this.right=o(t,"right",null),this.up=o(t,"up",null),this.down=o(t,"down",null),this.zoomIn=o(t,"zoomIn",null),this.zoomOut=o(t,"zoomOut",null),this.zoomSpeed=o(t,"zoomSpeed",.01),this.minZoom=o(t,"minZoom",.001),this.maxZoom=o(t,"maxZoom",1e3),this.speedX=0,this.speedY=0;var i=o(t,"speed",null);"number"==typeof i?(this.speedX=i,this.speedY=i):(this.speedX=o(t,"speed.x",0),this.speedY=o(t,"speed.y",0)),this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(t){return this.camera=t,this},update:function(t){if(this.active){void 0===t&&(t=1);var i=this.camera;this.up&&this.up.isDown?i.scrollY-=this.speedY*t|0:this.down&&this.down.isDown&&(i.scrollY+=this.speedY*t|0),this.left&&this.left.isDown?i.scrollX-=this.speedX*t|0:this.right&&this.right.isDown&&(i.scrollX+=this.speedX*t|0),this.zoomIn&&this.zoomIn.isDown?(i.zoom-=this.zoomSpeed,i.zoom<this.minZoom&&(i.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(i.zoom+=this.zoomSpeed,i.zoom>this.maxZoom&&(i.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});t.exports=a},function(t,i,n){var r=n(0),o=n(6),a=new r({initialize:function SmoothedKeyControl2(t){this.camera=o(t,"camera",null),this.left=o(t,"left",null),this.right=o(t,"right",null),this.up=o(t,"up",null),this.down=o(t,"down",null),this.zoomIn=o(t,"zoomIn",null),this.zoomOut=o(t,"zoomOut",null),this.zoomSpeed=o(t,"zoomSpeed",.01),this.minZoom=o(t,"minZoom",.001),this.maxZoom=o(t,"maxZoom",1e3),this.accelX=0,this.accelY=0;var i=o(t,"acceleration",null);"number"==typeof i?(this.accelX=i,this.accelY=i):(this.accelX=o(t,"acceleration.x",0),this.accelY=o(t,"acceleration.y",0)),this.dragX=0,this.dragY=0;var n=o(t,"drag",null);"number"==typeof n?(this.dragX=n,this.dragY=n):(this.dragX=o(t,"drag.x",0),this.dragY=o(t,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var r=o(t,"maxSpeed",null);"number"==typeof r?(this.maxSpeedX=r,this.maxSpeedY=r):(this.maxSpeedX=o(t,"maxSpeed.x",0),this.maxSpeedY=o(t,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(t){return this.camera=t,this},update:function(t){if(this.active){void 0===t&&(t=1);var i=this.camera;this._speedX>0?(this._speedX-=this.dragX*t,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*t,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*t,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*t,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,0!==this._speedX&&(i.scrollX-=this._speedX*t|0),0!==this._speedY&&(i.scrollY-=this._speedY*t|0),0!==this._zoom&&(i.zoom+=this._zoom,i.zoom<this.minZoom?i.zoom=this.minZoom:i.zoom>this.maxZoom&&(i.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});t.exports=a},function(t,i,n){t.exports={Camera:n(326),BaseCamera:n(133),CameraManager:n(799),Effects:n(333),Events:n(37)}},function(t,i){t.exports="cameradestroy"},function(t,i){t.exports="camerafadeincomplete"},function(t,i){t.exports="camerafadeinstart"},function(t,i){t.exports="camerafadeoutcomplete"},function(t,i){t.exports="camerafadeoutstart"},function(t,i){t.exports="cameraflashcomplete"},function(t,i){t.exports="cameraflashstart"},function(t,i){t.exports="followupdate"},function(t,i){t.exports="camerapancomplete"},function(t,i){t.exports="camerapanstart"},function(t,i){t.exports="postrender"},function(t,i){t.exports="prerender"},function(t,i){t.exports="camerarotatecomplete"},function(t,i){t.exports="camerarotatestart"},function(t,i){t.exports="camerashakecomplete"},function(t,i){t.exports="camerashakestart"},function(t,i){t.exports="camerazoomcomplete"},function(t,i){t.exports="camerazoomstart"},function(t,i,n){var r=n(18),o=n(0),a=n(37),h=new o({initialize:function Fade2(t){this.camera=t,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,i,n,r,o,h,d,f){if(void 0===t&&(t=!0),void 0===i&&(i=1e3),void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===h&&(h=!1),void 0===d&&(d=null),void 0===f&&(f=this.camera.scene),!h&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=i,this.direction=t,this.progress=0,this.red=n,this.green=r,this.blue=o,this.alpha=t?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=d,this._onUpdateScope=f;var p=t?a.FADE_OUT_START:a.FADE_IN_START;return this.camera.emit(p,this.camera,this,i,n,r,o),this.camera},update:function(t,i){this.isRunning&&(this._elapsed+=i,this.progress=r(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(t){if(!this.isRunning&&!this.isComplete)return!1;var i=this.camera;return t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(i.x,i.y,i.width,i.height),!0},postRenderWebGL:function(t,i){if(!this.isRunning&&!this.isComplete)return!1;var n=this.camera,r=this.red/255,o=this.green/255,a=this.blue/255;return t.drawFillRect(n.x,n.y,n.width,n.height,i(a,o,r,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var t=this.direction?a.FADE_OUT_COMPLETE:a.FADE_IN_COMPLETE;this.camera.emit(t,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=h},function(t,i,n){var r=n(18),o=n(0),a=n(37),h=new o({initialize:function Flash2(t){this.camera=t,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,i,n,r,o,h,d){return void 0===t&&(t=250),void 0===i&&(i=255),void 0===n&&(n=255),void 0===r&&(r=255),void 0===o&&(o=!1),void 0===h&&(h=null),void 0===d&&(d=this.camera.scene),!o&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,this.red=i,this.green=n,this.blue=r,this.alpha=1,this._elapsed=0,this._onUpdate=h,this._onUpdateScope=d,this.camera.emit(a.FLASH_START,this.camera,this,t,i,n,r)),this.camera},update:function(t,i){this.isRunning&&(this._elapsed+=i,this.progress=r(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(t){if(!this.isRunning)return!1;var i=this.camera;return t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(i.x,i.y,i.width,i.height),!0},postRenderWebGL:function(t,i){if(!this.isRunning)return!1;var n=this.camera,r=this.red/255,o=this.green/255,a=this.blue/255;return t.drawFillRect(n.x,n.y,n.width,n.height,i(a,o,r,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=h},function(t,i,n){var r=n(18),o=n(0),a=n(134),h=n(37),d=n(3),f=new o({initialize:function Pan3(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=new d,this.current=new d,this.destination=new d,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,i,n,r,o,d,f){void 0===n&&(n=1e3),void 0===r&&(r=a.Linear),void 0===o&&(o=!1),void 0===d&&(d=null),void 0===f&&(f=this.camera.scene);var p=this.camera;return!o&&this.isRunning||(this.isRunning=!0,this.duration=n,this.progress=0,this.source.set(p.scrollX,p.scrollY),this.destination.set(t,i),p.getScroll(t,i,this.current),"string"==typeof r&&a.hasOwnProperty(r)?this.ease=a[r]:"function"==typeof r&&(this.ease=r),this._elapsed=0,this._onUpdate=d,this._onUpdateScope=f,this.camera.emit(h.PAN_START,this.camera,this,n,t,i)),p},update:function(t,i){if(this.isRunning){this._elapsed+=i;var n=r(this._elapsed/this.duration,0,1);this.progress=n;var o=this.camera;if(this._elapsed<this.duration){var a=this.ease(n);o.getScroll(this.destination.x,this.destination.y,this.current);var h=this.source.x+(this.current.x-this.source.x)*a,d=this.source.y+(this.current.y-this.source.y)*a;o.setScroll(h,d),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,o,n,h,d)}else o.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,o,n,o.scrollX,o.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(h.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});t.exports=f},function(t,i){t.exports=function(t,i){return void 0===i&&(i=1.70158),t*t*((i+1)*t-i)}},function(t,i){t.exports=function(t,i){return void 0===i&&(i=1.70158),--t*t*((i+1)*t+i)+1}},function(t,i){t.exports=function(t,i){void 0===i&&(i=1.70158);var n=1.525*i;return(t*=2)<1?t*t*((n+1)*t-n)*.5:.5*((t-=2)*t*((n+1)*t+n)+2)}},function(t,i){t.exports=function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}},function(t,i){t.exports=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},function(t,i){t.exports=function(t){var i=!1;return t<.5?(t=1-2*t,i=!0):t=2*t-1,t<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,i?.5*(1-t):.5*t+.5}},function(t,i){t.exports=function(t){return 1-Math.sqrt(1-t*t)}},function(t,i){t.exports=function(t){return Math.sqrt(1- --t*t)}},function(t,i){t.exports=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},function(t,i){t.exports=function(t){return t*t*t}},function(t,i){t.exports=function(t){return--t*t*t+1}},function(t,i){t.exports=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},function(t,i){t.exports=function(t,i,n){if(void 0===i&&(i=.1),void 0===n&&(n=.1),0===t)return 0;if(1===t)return 1;var r=n/4;return i<1?i=1:r=n*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(t-=1))*Math.sin((t-r)*(2*Math.PI)/n)}},function(t,i){t.exports=function(t,i,n){if(void 0===i&&(i=.1),void 0===n&&(n=.1),0===t)return 0;if(1===t)return 1;var r=n/4;return i<1?i=1:r=n*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin((t-r)*(2*Math.PI)/n)+1}},function(t,i){t.exports=function(t,i,n){if(void 0===i&&(i=.1),void 0===n&&(n=.1),0===t)return 0;if(1===t)return 1;var r=n/4;return i<1?i=1:r=n*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?i*Math.pow(2,10*(t-=1))*Math.sin((t-r)*(2*Math.PI)/n)*-.5:i*Math.pow(2,-10*(t-=1))*Math.sin((t-r)*(2*Math.PI)/n)*.5+1}},function(t,i){t.exports=function(t){return Math.pow(2,10*(t-1))-.001}},function(t,i){t.exports=function(t){return 1-Math.pow(2,-10*t)}},function(t,i){t.exports=function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}},function(t,i){t.exports=function(t){return t}},function(t,i){t.exports=function(t){return t*t}},function(t,i){t.exports=function(t){return t*(2-t)}},function(t,i){t.exports=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},function(t,i){t.exports=function(t){return t*t*t*t}},function(t,i){t.exports=function(t){return 1- --t*t*t*t}},function(t,i){t.exports=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},function(t,i){t.exports=function(t){return t*t*t*t*t}},function(t,i){t.exports=function(t){return--t*t*t*t*t+1}},function(t,i){t.exports=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},function(t,i){t.exports=function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)}},function(t,i){t.exports=function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)}},function(t,i){t.exports=function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))}},function(t,i){t.exports=function(t,i){return void 0===i&&(i=1),t<=0?0:t>=1?1:1/i*(1+(i*t|0))}},function(t,i,n){var r=n(18),o=n(0),a=n(37),h=n(3),d=new o({initialize:function Shake2(t){this.camera=t,this.isRunning=!1,this.duration=0,this.intensity=new h,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(t,i,n,r,o){return void 0===t&&(t=100),void 0===i&&(i=.05),void 0===n&&(n=!1),void 0===r&&(r=null),void 0===o&&(o=this.camera.scene),!n&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,"number"==typeof i?this.intensity.set(i):this.intensity.set(i.x,i.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=r,this._onUpdateScope=o,this.camera.emit(a.SHAKE_START,this.camera,this,t,i)),this.camera},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(t,i){if(this.isRunning)if(this._elapsed+=i,this.progress=r(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var n=this.intensity,o=this.camera.width,a=this.camera.height,h=this.camera.zoom;this._offsetX=(Math.random()*n.x*o*2-n.x*o)*h,this._offsetY=(Math.random()*n.y*a*2-n.y*a)*h,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});t.exports=d},function(t,i,n){var r=n(18),o=n(0),a=n(37),h=n(134),d=new o({initialize:function RotateTo3(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(t,i,n,r,o,d,f){void 0===n&&(n=1e3),void 0===r&&(r=h.Linear),void 0===o&&(o=!1),void 0===d&&(d=null),void 0===f&&(f=this.camera.scene),void 0===i&&(i=!1),this.shortestPath=i;var p=t;t<0?(p=-1*t,this.clockwise=!1):this.clockwise=!0;var T=360*Math.PI/180;p-=Math.floor(p/T)*T;var b=this.camera;if(!o&&this.isRunning)return b;if(this.isRunning=!0,this.duration=n,this.progress=0,this.source=b.rotation,this.destination=p,"string"==typeof r&&h.hasOwnProperty(r)?this.ease=h[r]:"function"==typeof r&&(this.ease=r),this._elapsed=0,this._onUpdate=d,this._onUpdateScope=f,this.shortestPath){var S=0,A=0;(S=this.destination>this.source?Math.abs(this.destination-this.source):Math.abs(this.destination+T)-this.source)<(A=this.source>this.destination?Math.abs(this.source-this.destination):Math.abs(this.source+T)-this.destination)?this.clockwise=!0:S>A&&(this.clockwise=!1)}return this.camera.emit(a.ROTATE_START,this.camera,this,n,p),b},update:function(t,i){if(this.isRunning){this._elapsed+=i;var n=r(this._elapsed/this.duration,0,1);this.progress=n;var o=this.camera;if(this._elapsed<this.duration){var a=this.ease(n);this.current=o.rotation;var h=0,d=360*Math.PI/180,f=this.destination,p=this.current;!1===this.clockwise&&(f=this.current,p=this.destination),h=f>=p?Math.abs(f-p):Math.abs(f+d)-p;var T=0;T=this.clockwise?o.rotation+h*a:o.rotation-h*a,o.rotation=T,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,o,n,T)}else o.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,o,n,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});t.exports=d},function(t,i,n){var r=n(18),o=n(0),a=n(134),h=n(37),d=new o({initialize:function Zoom2(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,i,n,r,o,d){void 0===i&&(i=1e3),void 0===n&&(n=a.Linear),void 0===r&&(r=!1),void 0===o&&(o=null),void 0===d&&(d=this.camera.scene);var f=this.camera;return!r&&this.isRunning||(this.isRunning=!0,this.duration=i,this.progress=0,this.source=f.zoom,this.destination=t,"string"==typeof n&&a.hasOwnProperty(n)?this.ease=a[n]:"function"==typeof n&&(this.ease=n),this._elapsed=0,this._onUpdate=o,this._onUpdateScope=d,this.camera.emit(h.ZOOM_START,this.camera,this,i,t)),f},update:function(t,i){this.isRunning&&(this._elapsed+=i,this.progress=r(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(h.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=d},function(t,i,n){var r=n(326),o=n(0),a=n(2),h=n(24),d=n(57),f=n(104),p=n(20),T=new o({initialize:function CameraManager2(t){this.scene=t,this.systems=t.sys,this.roundPixels=t.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,t.sys.events.once(p.BOOT,this.boot,this),t.sys.events.on(p.START,this.start,this)},boot:function(){var t=this.systems;t.settings.cameras?this.fromJSON(t.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new r(0,0,t.scale.width,t.scale.height).setScene(this.scene),t.game.scale.on(f.RESIZE,this.onResize,this),this.systems.events.once(p.DESTROY,this.destroy,this)},start:function(){if(!this.main){var t=this.systems;t.settings.cameras?this.fromJSON(t.settings.cameras):this.add(),this.main=this.cameras[0]}var i=this.systems.events;i.on(p.UPDATE,this.update,this),i.once(p.SHUTDOWN,this.shutdown,this)},add:function(t,i,n,o,a,h){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=this.scene.sys.scale.width),void 0===o&&(o=this.scene.sys.scale.height),void 0===a&&(a=!1),void 0===h&&(h="");var d=new r(t,i,n,o);return d.setName(h),d.setScene(this.scene),d.setRoundPixels(this.roundPixels),d.id=this.getNextID(),this.cameras.push(d),a&&(this.main=d),d},addExisting:function(t,i){return void 0===i&&(i=!1),-1===this.cameras.indexOf(t)?(t.id=this.getNextID(),t.setRoundPixels(this.roundPixels),this.cameras.push(t),i&&(this.main=t),t):null},getNextID:function(){for(var t=this.cameras,i=1,n=0;n<32;n++){for(var r=!1,o=0;o<t.length;o++){var a=t[o];a&&a.id===i&&(r=!0)}if(!r)return i;i<<=1}return 0},getTotal:function(t){void 0===t&&(t=!1);for(var i=0,n=this.cameras,r=0;r<n.length;r++){var o=n[r];(!t||t&&o.visible)&&i++}return i},fromJSON:function(t){Array.isArray(t)||(t=[t]);for(var i=this.scene.sys.scale.width,n=this.scene.sys.scale.height,r=0;r<t.length;r++){var o=t[r],h=a(o,"x",0),d=a(o,"y",0),f=a(o,"width",i),p=a(o,"height",n),T=this.add(h,d,f,p);T.name=a(o,"name",""),T.zoom=a(o,"zoom",1),T.rotation=a(o,"rotation",0),T.scrollX=a(o,"scrollX",0),T.scrollY=a(o,"scrollY",0),T.roundPixels=a(o,"roundPixels",!1),T.visible=a(o,"visible",!0);var b=a(o,"backgroundColor",!1);b&&T.setBackgroundColor(b);var S=a(o,"bounds",null);if(S){var A=a(S,"x",0),P=a(S,"y",0),O=a(S,"width",i),L=a(S,"height",n);T.setBounds(A,P,O,L)}}return this},getCamera:function(t){for(var i=this.cameras,n=0;n<i.length;n++)if(i[n].name===t)return i[n];return null},getCamerasBelowPointer:function(t){for(var i=this.cameras,n=t.x,r=t.y,o=[],a=0;a<i.length;a++){var h=i[a];h.visible&&h.inputEnabled&&d(h,n,r)&&o.unshift(h)}return o},remove:function(t,i){void 0===i&&(i=!0),Array.isArray(t)||(t=[t]);for(var n=0,r=this.cameras,o=0;o<t.length;o++){var a=r.indexOf(t[o]);-1!==a&&(i?r[a].destroy():r[a].renderList=[],r.splice(a,1),n++)}return!this.main&&r[0]&&(this.main=r[0]),n},render:function(t,i){for(var n=this.scene,r=this.cameras,o=0;o<this.cameras.length;o++){var a=r[o];if(a.visible&&a.alpha>0){a.preRender();var h=this.getVisibleChildren(i.getChildren(),a);t.render(n,h,a)}}},getVisibleChildren:function(t,i){for(var n=[],r=0;r<t.length;r++){var o=t[r];o.willRender(i)&&n.push(o)}return n},resetAll:function(){for(var t=0;t<this.cameras.length;t++)this.cameras[t].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(t,i){for(var n=0;n<this.cameras.length;n++)this.cameras[n].update(t,i)},onResize:function(t,i,n,r,o){for(var a=0;a<this.cameras.length;a++){var h=this.cameras[a];0===h._x&&0===h._y&&h._width===r&&h._height===o&&h.setSize(i.width,i.height)}},resize:function(t,i){for(var n=0;n<this.cameras.length;n++)this.cameras[n].setSize(t,i)},shutdown:function(){this.main=void 0;for(var t=0;t<this.cameras.length;t++)this.cameras[t].destroy();this.cameras=[];var i=this.systems.events;i.off(p.UPDATE,this.update,this),i.off(p.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(p.START,this.start,this),this.scene=null,this.systems=null}});h.register("CameraManager",T,"cameras"),t.exports=T},function(t,i){t.exports="enterfullscreen"},function(t,i){t.exports="fullscreenfailed"},function(t,i){t.exports="fullscreenunsupported"},function(t,i){t.exports="leavefullscreen"},function(t,i){t.exports="orientationchange"},function(t,i){t.exports="resize"},function(t,i,n){t.exports={Config:n(346),CreateRenderer:n(366),DebugHeader:n(384),Events:n(22),TimeStep:n(385),VisibilityHandler:n(387)}},function(t,i){var n,r,o=t.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(t){if(n===setTimeout)return setTimeout(t,0);if((n===defaultSetTimout||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(i){try{return n.call(null,t,0)}catch(r){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(t){n=defaultSetTimout}try{r="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(t){r=defaultClearTimeout}}();var a,h=[],d=!1,f=-1;function cleanUpNextTick(){d&&a&&(d=!1,a.length?h=a.concat(h):f=-1,h.length&&drainQueue())}function drainQueue(){if(!d){var t=runTimeout(cleanUpNextTick);d=!0;for(var i=h.length;i;){for(a=h,h=[];++f<i;)a&&a[f].run();f=-1,i=h.length}a=null,d=!1,function runClearTimeout(t){if(r===clearTimeout)return clearTimeout(t);if((r===defaultClearTimeout||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{return r(t)}catch(i){try{return r.call(null,t)}catch(n){return r.call(this,t)}}}(t)}}function Item(t,i){this.fun=t,this.array=i}function noop(){}o.nextTick=function(t){var i=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)i[n-1]=arguments[n];h.push(new Item(t,i)),1!==h.length||d||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=noop,o.addListener=noop,o.once=noop,o.off=noop,o.removeListener=noop,o.removeAllListeners=noop,o.emit=noop,o.prependListener=noop,o.prependOnceListener=noop,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,i,n){var r=n(136),o={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};t.exports=function init(){return"function"==typeof importScripts||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(o.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(o.mspointer=!0),navigator.getGamepads&&(o.gamepads=!0),"onwheel"in window||r.ie&&"WheelEvent"in window?o.wheelEvent="wheel":"onmousewheel"in window?o.wheelEvent="mousewheel":r.firefox&&"MouseScrollEvent"in window&&(o.wheelEvent="DOMMouseScroll")),o}()},function(t,i,n){var r=n(136),o={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};t.exports=function init(){if("function"==typeof importScripts)return o;o.audioData=!!window.Audio,o.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var t=document.createElement("audio"),i=!!t.canPlayType;try{if(i&&(t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(o.ogg=!0),(t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||t.canPlayType("audio/opus;").replace(/^no$/,""))&&(o.opus=!0),t.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(o.mp3=!0),t.canPlayType("audio/wav").replace(/^no$/,"")&&(o.wav=!0),(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;").replace(/^no$/,""))&&(o.m4a=!0),t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(o.webm=!0),""!==t.canPlayType('audio/mp4;codecs="ec-3"')))if(r.edge)o.dolby=!0;else if(r.safari&&r.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var n=parseInt(RegExp.$1,10),a=parseInt(RegExp.$2,10);(10===n&&a>=11||n>10)&&(o.dolby=!0)}}catch(h){}return o}()},function(t,i){var n={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};t.exports=function init(){if("function"==typeof importScripts)return n;var t=document.createElement("video"),i=!!t.canPlayType;try{i&&(t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(n.ogg=!0),t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(n.h264=!0,n.mp4=!0),t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(n.webm=!0),t.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(n.vp9=!0),t.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(n.hls=!0))}catch(r){}return n}()},function(t,i){var n={available:!1,cancel:"",keyboard:!1,request:""};t.exports=function init(){if("function"==typeof importScripts)return n;var t,i="Fullscreen",r="FullScreen",o=["request"+i,"request"+r,"webkitRequest"+i,"webkitRequest"+r,"msRequest"+i,"msRequest"+r,"mozRequest"+r,"mozRequest"+i];for(t=0;t<o.length;t++)if(document.documentElement[o[t]]){n.available=!0,n.request=o[t];break}var a=["cancel"+r,"exit"+i,"webkitCancel"+r,"webkitExit"+i,"msCancel"+r,"msExit"+i,"mozCancel"+r,"mozExit"+i];if(n.available)for(t=0;t<a.length;t++)if(document[a[t]]){n.cancel=a[t];break}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(n.keyboard=!0),Object.defineProperty(n,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),n}()},function(t,i,n){t.exports={Between:n(349),BetweenPoints:n(350),BetweenPointsY:n(813),BetweenY:n(814),CounterClockwise:n(815),Normalize:n(351),Random:n(816),RandomDegrees:n(817),Reverse:n(818),RotateTo:n(819),ShortestBetween:n(820),Wrap:n(269),WrapDegrees:n(270)}},function(t,i){t.exports=function(t,i){return Math.atan2(i.x-t.x,i.y-t.y)}},function(t,i){t.exports=function(t,i,n,r){return Math.atan2(n-t,r-i)}},function(t,i,n){var r=n(14);t.exports=function(t){return t>Math.PI&&(t-=r.PI2),Math.abs(((t+r.TAU)%r.PI2-r.PI2)%r.PI2)}},function(t,i,n){var r=n(137);t.exports=function(){return r(-Math.PI,Math.PI)}},function(t,i,n){var r=n(137);t.exports=function(){return r(-180,180)}},function(t,i,n){var r=n(351);t.exports=function(t){return r(t+Math.PI)}},function(t,i,n){var r=n(14);t.exports=function(t,i,n){return void 0===n&&(n=.05),t===i||(Math.abs(i-t)<=n||Math.abs(i-t)>=r.PI2-n?t=i:(Math.abs(i-t)>Math.PI&&(i<t?i+=r.PI2:i-=r.PI2),i>t?t+=n:i<t&&(t-=n))),t}},function(t,i){t.exports=function(t,i){var n=i-t;return 0===n?0:n-360*Math.floor((n- -180)/360)}},function(t,i,n){t.exports={Between:n(50),BetweenPoints:n(352),BetweenPointsSquared:n(822),Chebyshev:n(823),Power:n(824),Snake:n(825),Squared:n(353)}},function(t,i){t.exports=function(t,i){var n=t.x-i.x,r=t.y-i.y;return n*n+r*r}},function(t,i){t.exports=function(t,i,n,r){return Math.max(Math.abs(t-n),Math.abs(i-r))}},function(t,i){t.exports=function(t,i,n,r,o){return void 0===o&&(o=2),Math.sqrt(Math.pow(n-t,o)+Math.pow(r-i,o))}},function(t,i){t.exports=function(t,i,n,r){return Math.abs(t-n)+Math.abs(i-r)}},function(t,i,n){t.exports={Back:n(334),Bounce:n(335),Circular:n(336),Cubic:n(337),Elastic:n(338),Expo:n(339),Linear:n(340),Quadratic:n(341),Quartic:n(342),Quintic:n(343),Sine:n(344),Stepped:n(345)}},function(t,i,n){t.exports={Ceil:n(828),Equal:n(124),Floor:n(829),GreaterThan:n(354),LessThan:n(355)}},function(t,i){t.exports=function(t,i){return void 0===i&&(i=1e-4),Math.ceil(t-i)}},function(t,i){t.exports=function(t,i){return void 0===i&&(i=1e-4),Math.floor(t+i)}},function(t,i,n){t.exports={Bezier:n(831),CatmullRom:n(832),CubicBezier:n(358),Linear:n(833),QuadraticBezier:n(359),SmoothStep:n(360),SmootherStep:n(834)}},function(t,i,n){var r=n(356);t.exports=function(t,i){for(var n=0,o=t.length-1,a=0;a<=o;a++)n+=Math.pow(1-i,o-a)*Math.pow(i,a)*t[a]*r(o,a);return n}},function(t,i,n){var r=n(194);t.exports=function(t,i){var n=t.length-1,o=n*i,a=Math.floor(o);return t[0]===t[n]?(i<0&&(a=Math.floor(o=n*(1+i))),r(o-a,t[(a-1+n)%n],t[a],t[(a+1)%n],t[(a+2)%n])):i<0?t[0]-(r(-o,t[0],t[0],t[1],t[1])-t[0]):i>1?t[n]-(r(o-n,t[n],t[n],t[n-1],t[n-1])-t[n]):r(o-a,t[a?a-1:0],t[a],t[n<a+1?n:a+1],t[n<a+2?n:a+2])}},function(t,i,n){var r=n(135);t.exports=function(t,i){var n=t.length-1,o=n*i,a=Math.floor(o);return i<0?r(t[0],t[1],o):i>1?r(t[n],t[n-1],n-o):r(t[a],t[a+1>n?n:a+1],o-a)}},function(t,i,n){var r=n(183);t.exports=function(t,i,n){return i+(n-i)*r(t,0,1)}},function(t,i,n){t.exports={GetNext:n(361),IsSize:n(138),IsValue:n(836)}},function(t,i){t.exports=function(t){return t>0&&0==(t&t-1)}},function(t,i,n){t.exports={Ceil:n(139),Floor:n(76),To:n(838)}},function(t,i){t.exports=function(t,i,n,r){return void 0===n&&(n=0),0===i?t:(t-=n,t=i*Math.round(t/i),r?(n+t)/i:n+t)}},function(t,i,n){var r=new(n(0))({initialize:function RandomDataGenerator2(t){void 0===t&&(t=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],t&&this.init(t)},rnd:function(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},hash:function(t){var i,n=this.n;t=t.toString();for(var r=0;r<t.length;r++)i=.02519603282416938*(n+=t.charCodeAt(r)),i-=n=i>>>0,n=(i*=n)>>>0,n+=4294967296*(i-=n);return this.n=n,2.3283064365386963e-10*(n>>>0)},init:function(t){"string"==typeof t?this.state(t):this.sow(t)},sow:function(t){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,t)for(var i=0;i<t.length&&null!=t[i];i++){var n=t[i];this.s0-=this.hash(n),this.s0+=~~(this.s0<0),this.s1-=this.hash(n),this.s1+=~~(this.s1<0),this.s2-=this.hash(n),this.s2+=~~(this.s2<0)}},integer:function(){return 4294967296*this.rnd()},frac:function(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(t,i){return Math.floor(this.realInRange(0,i-t+1)+t)},between:function(t,i){return Math.floor(this.realInRange(0,i-t+1)+t)},realInRange:function(t,i){return this.frac()*(i-t)+t},normal:function(){return 1-2*this.frac()},uuid:function(){var t="",i="";for(i=t="";t++<36;i+=~t%5|3*t&4?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return i},pick:function(t){return t[this.integerInRange(0,t.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(t){return t[~~(Math.pow(this.frac(),2)*(t.length-1)+.5)]},timestamp:function(t,i){return this.realInRange(t||9466848e5,i||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(t){return"string"==typeof t&&t.match(/^!rnd/)&&(t=t.split(","),this.c=parseFloat(t[1]),this.s0=parseFloat(t[2]),this.s1=parseFloat(t[3]),this.s2=parseFloat(t[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(t){for(var i=t.length-1;i>0;i--){var n=Math.floor(this.frac()*(i+1)),r=t[n];t[n]=t[i],t[i]=r}return t}});t.exports=r},function(t,i){t.exports=function(t){for(var i=0,n=0;n<t.length;n++)i+=+t[n];return i/t.length}},function(t,i){t.exports=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=10);var r=Math.pow(n,-i);return Math.ceil(t*r)/r}},function(t,i){t.exports=function(t,i){return Math.abs(t-i)}},function(t,i,n){var r=n(18),o=n(0),a=n(69),h=n(1),d=new a,f=new o({initialize:function Euler2(t,i,n,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=Euler2.DefaultOrder),this._x=t,this._y=i,this._z=n,this._order=r,this.onChangeCallback=h},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback(this)}},set:function(t,i,n,r){return void 0===r&&(r=this._order),this._x=t,this._y=i,this._z=n,this._order=r,this.onChangeCallback(this),this},copy:function(t){return this.set(t.x,t.y,t.z,t.order)},setFromQuaternion:function(t,i,n){return void 0===i&&(i=this._order),void 0===n&&(n=!1),d.fromQuat(t),this.setFromRotationMatrix(d,i,n)},setFromRotationMatrix:function(t,i,n){void 0===i&&(i=this._order),void 0===n&&(n=!1);var o=t.val,a=o[0],h=o[4],d=o[8],f=o[1],p=o[5],T=o[9],b=o[2],S=o[6],A=o[10],P=0,O=0,L=0,D=.99999;switch(i){case"XYZ":O=Math.asin(r(d,-1,1)),Math.abs(d)<D?(P=Math.atan2(-T,A),L=Math.atan2(-h,a)):P=Math.atan2(S,p);break;case"YXZ":P=Math.asin(-r(T,-1,1)),Math.abs(T)<D?(O=Math.atan2(d,A),L=Math.atan2(f,p)):O=Math.atan2(-b,a);break;case"ZXY":P=Math.asin(r(S,-1,1)),Math.abs(S)<D?(O=Math.atan2(-b,A),L=Math.atan2(-h,p)):L=Math.atan2(f,a);break;case"ZYX":O=Math.asin(-r(b,-1,1)),Math.abs(b)<D?(P=Math.atan2(S,A),L=Math.atan2(f,a)):L=Math.atan2(-h,p);break;case"YZX":L=Math.asin(r(f,-1,1)),Math.abs(f)<D?(P=Math.atan2(-T,p),O=Math.atan2(-b,a)):O=Math.atan2(d,A);break;case"XZY":L=Math.asin(-r(h,-1,1)),Math.abs(h)<D?(P=Math.atan2(S,p),O=Math.atan2(d,a)):P=Math.atan2(-T,A)}return this._x=P,this._y=O,this._z=L,this._order=i,n&&this.onChangeCallback(this),this}});f.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],f.DefaultOrder="XYZ",t.exports=f},function(t,i){t.exports=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=10);var r=Math.pow(n,-i);return Math.floor(t*r)/r}},function(t,i){t.exports=function(t,i){return t/i/1e3}},function(t,i){t.exports=function(t){return t==parseFloat(t)?!(t%2):void 0}},function(t,i){t.exports=function(t){return t===parseFloat(t)?!(t%2):void 0}},function(t,i){t.exports=function(t,i,n){return Math.min(t+i,n)}},function(t,i){t.exports=function(t){var i=t.length;if(0===i)return 0;t.sort((function(t,i){return t-i}));var n=Math.floor(i/2);return i%2==0?(t[n]+t[n-1])/2:t[n]}},function(t,i){t.exports=function(t,i,n){return Math.max(t-i,n)}},function(t,i){t.exports=function(t,i,n,r){void 0===n&&(n=i+1);var o=(t-i)/(n-i);return o>1?void 0!==r?(o=(r-t)/(r-n))<0&&(o=0):o=1:o<0&&(o=0),o}},function(t,i){t.exports=function(t,i){void 0===i&&(i=1);var n=2*Math.random()*Math.PI;return t.x=Math.cos(n)*i,t.y=Math.sin(n)*i,t}},function(t,i){t.exports=function(t,i){void 0===i&&(i=1);var n=2*Math.random()*Math.PI,r=2*Math.random()-1,o=Math.sqrt(1-r*r)*i;return t.x=Math.cos(n)*o,t.y=Math.sin(n)*o,t.z=r*i,t}},function(t,i){t.exports=function(t,i){return void 0===i&&(i=1),t.x=(2*Math.random()-1)*i,t.y=(2*Math.random()-1)*i,t.z=(2*Math.random()-1)*i,t.w=(2*Math.random()-1)*i,t}},function(t,i){t.exports=function(t,i,n,r,o){return t.x=i+o*Math.cos(r),t.y=n+o*Math.sin(r),t}},function(t,i){t.exports=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=10);var r=Math.pow(n,-i);return Math.round(t*r)/r}},function(t,i){t.exports=function(t,i,n,r){void 0===i&&(i=1),void 0===n&&(n=1),void 0===r&&(r=1),r*=Math.PI/t;for(var o=[],a=[],h=0;h<t;h++)i+=(n-=i*r)*r,o[h]=n,a[h]=i;return{sin:a,cos:o,length:t}}},function(t,i,n){var r=n(3);t.exports=function(t,i,n,o){void 0===o&&(o=new r);var a=0,h=0;return t>0&&t<=i*n&&(a=t>i-1?t-(h=Math.floor(t/i))*i:t),o.set(a,h)}},function(t,i){t.exports=function(t,i,n){return Math.abs(t-i)<=n}},function(t,i,n){var r=n(39),o=n(69),a=n(365),h=new o,d=new a,f=new r;t.exports=function(t,i,n){return d.setAxisAngle(i,n),h.fromRotationTranslation(d,f.set(0,0,0)),t.transformMat4(h)}},function(t,i){t.exports="addtexture"},function(t,i){t.exports="onerror"},function(t,i){t.exports="onload"},function(t,i){t.exports="ready"},function(t,i){t.exports="removetexture"},function(t,i){t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join("\n")},function(t,i){t.exports="pipelineafterflush"},function(t,i){t.exports="pipelinebeforeflush"},function(t,i){t.exports="pipelinebind"},function(t,i){t.exports="pipelineboot"},function(t,i){t.exports="pipelinedestroy"},function(t,i){t.exports="pipelinerebind"},function(t,i){t.exports="pipelineresize"},function(t,i){t.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join("\n")},function(t,i,n){t.exports={GenerateTexture:n(388),Palettes:n(889)}},function(t,i,n){t.exports={ARNE16:n(389),C64:n(890),CGA:n(891),JMP:n(892),MSX:n(893)}},function(t,i){t.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(t,i){t.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(t,i){t.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(t,i){t.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(t,i,n){t.exports={Path:n(895),MoveTo:n(393),CubicBezier:n(390),Curve:n(94),Ellipse:n(391),Line:n(392),QuadraticBezier:n(394),Spline:n(395)}},function(t,i,n){var r=n(0),o=n(390),a=n(391),h=n(5),d=n(392),f=n(393),p=n(394),T=n(10),b=n(395),S=n(3),A=n(14),P=new r({initialize:function Path2(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new S,this._tmpVec2A=new S,this._tmpVec2B=new S,"object"==typeof t?this.fromJSON(t):this.startPoint.set(t,i)},add:function(t){return this.curves.push(t),this},circleTo:function(t,i,n){return void 0===i&&(i=!1),this.ellipseTo(t,t,0,360,i,n)},closePath:function(){var t=this.curves[0].getPoint(0),i=this.curves[this.curves.length-1].getPoint(1);return t.equals(i)||this.curves.push(new d(i,t)),this},cubicBezierTo:function(t,i,n,r,a,h){var d,f,p,T=this.getEndPoint();return t instanceof S?(d=t,f=i,p=n):(d=new S(n,r),f=new S(a,h),p=new S(t,i)),this.add(new o(T,d,f,p))},quadraticBezierTo:function(t,i,n,r){var o,a,h=this.getEndPoint();return t instanceof S?(o=t,a=i):(o=new S(n,r),a=new S(t,i)),this.add(new p(h,o,a))},draw:function(t,i){for(var n=0;n<this.curves.length;n++){var r=this.curves[n];r.active&&r.draw(t,i)}return t},ellipseTo:function(t,i,n,r,o,h){var d=new a(0,0,t,i,n,r,o,h),f=this.getEndPoint(this._tmpVec2A),p=d.getStartPoint(this._tmpVec2B);return f.subtract(p),d.x=f.x,d.y=f.y,this.add(d)},fromJSON:function(t){this.curves=[],this.cacheLengths=[],this.startPoint.set(t.x,t.y),this.autoClose=t.autoClose;for(var i=0;i<t.curves.length;i++){var n=t.curves[i];switch(n.type){case"LineCurve":this.add(d.fromJSON(n));break;case"EllipseCurve":this.add(a.fromJSON(n));break;case"SplineCurve":this.add(b.fromJSON(n));break;case"CubicBezierCurve":this.add(o.fromJSON(n));break;case"QuadraticBezierCurve":this.add(p.fromJSON(n))}}return this},getBounds:function(t,i){void 0===t&&(t=new T),void 0===i&&(i=16),t.x=Number.MAX_VALUE,t.y=Number.MAX_VALUE;for(var n=new T,r=A.MIN_SAFE_INTEGER,o=A.MIN_SAFE_INTEGER,a=0;a<this.curves.length;a++){var h=this.curves[a];h.active&&(h.getBounds(n,i),t.x=Math.min(t.x,n.x),t.y=Math.min(t.y,n.y),r=Math.max(r,n.right),o=Math.max(o,n.bottom))}return t.right=r,t.bottom=o,t},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],i=0,n=0;n<this.curves.length;n++)i+=this.curves[n].getLength(),t.push(i);return this.cacheLengths=t,t},getEndPoint:function(t){return void 0===t&&(t=new S),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,t):t.copy(this.startPoint),t},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},getPoint:function(t,i){void 0===i&&(i=new S);for(var n=t*this.getLength(),r=this.getCurveLengths(),o=0;o<r.length;){if(r[o]>=n){var a=r[o]-n,h=this.curves[o],d=h.getLength(),f=0===d?0:1-a/d;return h.getPointAt(f,i)}o++}return null},getPoints:function(t){void 0===t&&(t=12);for(var i,n=[],r=0;r<this.curves.length;r++){var o=this.curves[r];if(o.active)for(var a=o.getResolution(t),h=o.getPoints(a),d=0;d<h.length;d++){var f=h[d];i&&i.equals(f)||(n.push(f),i=f)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},getRandomPoint:function(t){return void 0===t&&(t=new S),this.getPoint(Math.random(),t)},getSpacedPoints:function(t){void 0===t&&(t=40);for(var i=[],n=0;n<=t;n++)i.push(this.getPoint(n/t));return this.autoClose&&i.push(i[0]),i},getStartPoint:function(t){return void 0===t&&(t=new S),t.copy(this.startPoint)},getTangent:function(t,i){void 0===i&&(i=new S);for(var n=t*this.getLength(),r=this.getCurveLengths(),o=0;o<r.length;){if(r[o]>=n){var a=r[o]-n,h=this.curves[o],d=h.getLength(),f=0===d?0:1-a/d;return h.getTangentAt(f,i)}o++}return null},lineTo:function(t,i){t instanceof S?this._tmpVec2B.copy(t):this._tmpVec2B.set(t,i);var n=this.getEndPoint(this._tmpVec2A);return this.add(new d([n.x,n.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(t){return t.unshift(this.getEndPoint()),this.add(new b(t))},moveTo:function(t,i){return t instanceof S?this.add(new f(t.x,t.y)):this.add(new f(t,i))},toJSON:function(){for(var t=[],i=0;i<this.curves.length;i++)t.push(this.curves[i].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:t}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});h.register("path",(function(t,i){return new P(t,i)})),t.exports=P},function(t,i,n){t.exports={DataManager:n(101),DataManagerPlugin:n(897),Events:n(315)}},function(t,i,n){var r=n(0),o=n(101),a=n(24),h=n(20),d=new r({Extends:o,initialize:function DataManagerPlugin2(t){o.call(this,t,t.sys.events),this.scene=t,this.systems=t.sys,t.sys.events.once(h.BOOT,this.boot,this),t.sys.events.on(h.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(h.DESTROY,this.destroy,this)},start:function(){this.events.once(h.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){o.prototype.destroy.call(this),this.events.off(h.START,this.start,this),this.scene=null,this.systems=null}});a.register("DataManagerPlugin",d,"data"),t.exports=d},function(t,i,n){t.exports={Align:n(899),BaseShader:n(396),Bounds:n(902),Canvas:n(906),Color:n(397),ColorMatrix:n(198),Masks:n(916),RGB:n(200)}},function(t,i,n){var r=n(123),o=n(17),a={In:n(900),To:n(901)};a=o(!1,a,r),t.exports=a},function(t,i,n){t.exports={BottomCenter:n(290),BottomLeft:n(291),BottomRight:n(292),Center:n(293),LeftCenter:n(295),QuickSet:n(289),RightCenter:n(296),TopCenter:n(297),TopLeft:n(298),TopRight:n(299)}},function(t,i,n){t.exports={BottomCenter:n(277),BottomLeft:n(278),BottomRight:n(279),LeftBottom:n(280),LeftCenter:n(281),LeftTop:n(282),QuickSet:n(276),RightBottom:n(283),RightCenter:n(284),RightTop:n(285),TopCenter:n(286),TopLeft:n(287),TopRight:n(288)}},function(t,i,n){t.exports={CenterOn:n(294),GetBottom:n(42),GetBounds:n(903),GetCenterX:n(87),GetCenterY:n(89),GetLeft:n(43),GetOffsetX:n(904),GetOffsetY:n(905),GetRight:n(44),GetTop:n(45),SetBottom:n(55),SetCenterX:n(88),SetCenterY:n(90),SetLeft:n(53),SetRight:n(54),SetTop:n(52)}},function(t,i,n){var r=n(42),o=n(43),a=n(44),h=n(45);t.exports=function(t,i){void 0===i&&(i={});var n=o(t),d=h(t);return i.x=n,i.y=d,i.width=a(t)-n,i.height=r(t)-d,i}},function(t,i){t.exports=function(t){return t.width*t.originX}},function(t,i){t.exports=function(t){return t.height*t.originY}},function(t,i,n){t.exports={CanvasInterpolation:n(367),CanvasPool:n(31),Smoothing:n(192),TouchAction:n(907),UserSelect:n(908)}},function(t,i){t.exports=function(t,i){return void 0===i&&(i="none"),t.style.msTouchAction=i,t.style["ms-touch-action"]=i,t.style["touch-action"]=i,t}},function(t,i){t.exports=function(t,i){return void 0===i&&(i="none"),["-webkit-","-khtml-","-moz-","-ms-",""].forEach((function(n){t.style[n+"user-select"]=i})),t.style["-webkit-touch-callout"]=i,t.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",t}},function(t,i,n){var r=n(103);t.exports=function(t){void 0===t&&(t=1024);var i,n=[],o=255,a=255,h=0,d=0;for(i=0;i<=o;i++)n.push({r:a,g:i,b:d,color:r(a,i,d)});for(h=255,i=o;i>=0;i--)n.push({r:i,g:h,b:d,color:r(i,h,d)});for(a=0,i=0;i<=o;i++,h--)n.push({r:a,g:h,b:i,color:r(a,h,i)});for(h=0,d=255,i=0;i<=o;i++,d--,a++)n.push({r:a,g:h,b:d,color:r(a,h,d)});if(1024===t)return n;var f=[],p=0,T=1024/t;for(i=0;i<t;i++)f.push(n[Math.floor(p)]),p+=T;return f}},function(t,i){t.exports=function(t){var i={r:t>>16&255,g:t>>8&255,b:255&t,a:255};return t>16777215&&(i.a=t>>>24),i}},function(t,i,n){var r=n(38),o=n(399);t.exports=function(t,i,n){var a=n,h=n,d=n;if(0!==i){var f=n<.5?n*(1+i):n+i-n*i,p=2*n-f;a=o(p,f,t+1/3),h=o(p,f,t),d=o(p,f,t-1/3)}return(new r).setGLTo(a,h,d,1)}},function(t,i,n){var r=n(188);t.exports=function(t,i){void 0===t&&(t=1),void 0===i&&(i=1);for(var n=[],o=0;o<=359;o++)n.push(r(o/359,t,i));return n}},function(t,i,n){var r=n(135),RGBWithRGB=function(t,i,n,o,a,h,d,f){void 0===d&&(d=100),void 0===f&&(f=0);var p=f/d;return{r:r(t,o,p),g:r(i,a,p),b:r(n,h,p)}};t.exports={RGBWithRGB:RGBWithRGB,ColorWithRGB:function(t,i,n,r,o,a){return void 0===o&&(o=100),void 0===a&&(a=0),RGBWithRGB(t.r,t.g,t.b,i,n,r,o,a)},ColorWithColor:function(t,i,n,r){return void 0===n&&(n=100),void 0===r&&(r=0),RGBWithRGB(t.r,t.g,t.b,i.r,i.g,i.b,n,r)}}},function(t,i,n){var r=n(195),o=n(38);t.exports=function(t,i){return void 0===t&&(t=0),void 0===i&&(i=255),new o(r(t,i),r(t,i),r(t,i))}},function(t,i,n){var r=n(398);t.exports=function(t,i,n,o,a){return void 0===o&&(o=255),void 0===a&&(a="#"),"#"===a?"#"+((1<<24)+(t<<16)+(i<<8)+n).toString(16).slice(1,7):"0x"+r(o)+r(t)+r(i)+r(n)}},function(t,i,n){t.exports={BitmapMask:n(310),GeometryMask:n(311)}},function(t,i,n){var r={AddToDOM:n(142),DOMContentLoaded:n(400),GetInnerHeight:n(401),GetScreenOrientation:n(402),GetTarget:n(407),ParseXML:n(408),RemoveFromDOM:n(202),RequestAnimationFrame:n(386)};t.exports=r},function(t,i,n){t.exports={EventEmitter:n(919)}},function(t,i,n){var r=n(0),o=n(9),a=n(24),h=new r({Extends:o,initialize:function EventEmitter3(){o.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});a.register("EventEmitter",h,"events"),t.exports=h},function(t,i,n){var r=n(142),o=n(321),a=n(325),h=n(31),d=n(0),f=n(346),p=n(921),T=n(366),b=n(101),S=n(384),A=n(347),P=n(400),O=n(9),L=n(22),D=n(409),I=n(24),F=n(414),B=n(415),N=n(417),Y=n(106),X=n(422),G=n(385),U=n(387),V=n(426),z=new d({initialize:function Game2(t){this.config=new f(t),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new O,this.anims=new o(this),this.textures=new X(this),this.cache=new a(this),this.registry=new b(this),this.input=new D(this,this.config),this.scene=new N(this,this.config.sceneConfig),this.device=A,this.scale=new B(this,this.config),this.sound=null,this.sound=V.create(this),this.loop=new G(this,this.config.fps),this.plugins=new F(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,P(this.boot.bind(this))},boot:function(){I.hasCore("EventEmitter")?(this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),T(this),p(this),S(this),r(this.canvas,this.config.parent),this.textures.once(Y.READY,this.texturesReady,this),this.events.emit(L.BOOT)):console.warn("Aborting. Core Plugins missing.")},texturesReady:function(){this.events.emit(L.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),U(this);var t=this.events;t.on(L.HIDDEN,this.onHidden,this),t.on(L.VISIBLE,this.onVisible,this),t.on(L.BLUR,this.onBlur,this),t.on(L.FOCUS,this.onFocus,this)},step:function(t,i){if(this.pendingDestroy)return this.runDestroy();var n=this.events;n.emit(L.PRE_STEP,t,i),n.emit(L.STEP,t,i),this.scene.update(t,i),n.emit(L.POST_STEP,t,i);var r=this.renderer;r.preRender(),n.emit(L.PRE_RENDER,r,t,i),this.scene.render(r),r.postRender(),n.emit(L.POST_RENDER,r,t,i)},headlessStep:function(t,i){if(this.pendingDestroy)return this.runDestroy();var n=this.events;n.emit(L.PRE_STEP,t,i),n.emit(L.STEP,t,i),this.scene.update(t,i),n.emit(L.POST_STEP,t,i),n.emit(L.PRE_RENDER),n.emit(L.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(L.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(L.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(t,i){void 0===i&&(i=!1),this.pendingDestroy=!0,this.removeCanvas=t,this.noReturn=i},runDestroy:function(){this.scene.destroy(),this.events.emit(L.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(h.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});t.exports=z},function(t,i,n){var r=n(142);t.exports=function(t){var i=t.config;if(i.parent&&i.domCreateContainer){var n=document.createElement("div");n.style.cssText=["display: block;","width: "+t.scale.width+"px;","height: "+t.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+i.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),t.domContainer=n,r(n,i.parent)}}},function(t,i){t.exports="boot"},function(t,i){t.exports="destroy"},function(t,i){t.exports="dragend"},function(t,i){t.exports="dragenter"},function(t,i){t.exports="drag"},function(t,i){t.exports="dragleave"},function(t,i){t.exports="dragover"},function(t,i){t.exports="dragstart"},function(t,i){t.exports="drop"},function(t,i){t.exports="gameout"},function(t,i){t.exports="gameover"},function(t,i){t.exports="gameobjectdown"},function(t,i){t.exports="dragend"},function(t,i){t.exports="dragenter"},function(t,i){t.exports="drag"},function(t,i){t.exports="dragleave"},function(t,i){t.exports="dragover"},function(t,i){t.exports="dragstart"},function(t,i){t.exports="drop"},function(t,i){t.exports="gameobjectmove"},function(t,i){t.exports="gameobjectout"},function(t,i){t.exports="gameobjectover"},function(t,i){t.exports="pointerdown"},function(t,i){t.exports="pointermove"},function(t,i){t.exports="pointerout"},function(t,i){t.exports="pointerover"},function(t,i){t.exports="pointerup"},function(t,i){t.exports="wheel"},function(t,i){t.exports="gameobjectup"},function(t,i){t.exports="gameobjectwheel"},function(t,i){t.exports="boot"},function(t,i){t.exports="process"},function(t,i){t.exports="update"},function(t,i){t.exports="pointerdown"},function(t,i){t.exports="pointerdownoutside"},function(t,i){t.exports="pointermove"},function(t,i){t.exports="pointerout"},function(t,i){t.exports="pointerover"},function(t,i){t.exports="pointerup"},function(t,i){t.exports="pointerupoutside"},function(t,i){t.exports="wheel"},function(t,i){t.exports="pointerlockchange"},function(t,i){t.exports="preupdate"},function(t,i){t.exports="shutdown"},function(t,i){t.exports="start"},function(t,i){t.exports="update"},function(t,i){t.exports="addfile"},function(t,i){t.exports="complete"},function(t,i){t.exports="filecomplete"},function(t,i){t.exports="filecomplete-"},function(t,i){t.exports="loaderror"},function(t,i){t.exports="load"},function(t,i){t.exports="fileprogress"},function(t,i){t.exports="postprocess"},function(t,i){t.exports="progress"},function(t,i){t.exports="start"},function(t,i,n){t.exports={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"}},function(t,i){t.exports=function(t,i,n){if(n.getElementsByTagName("TextureAtlas")){var r=t.source[i];t.add("__BASE",i,0,0,r.width,r.height);for(var o,a=n.getElementsByTagName("SubTexture"),h=0;h<a.length;h++){var d=a[h].attributes,f=d.name.value,p=parseInt(d.x.value,10),T=parseInt(d.y.value,10),b=parseInt(d.width.value,10),S=parseInt(d.height.value,10);if(o=t.add(f,i,p,T,b,S),d.frameX){var A=Math.abs(parseInt(d.frameX.value,10)),P=Math.abs(parseInt(d.frameY.value,10)),O=parseInt(d.frameWidth.value,10),L=parseInt(d.frameHeight.value,10);o.setTrim(b,S,A,P,O,L)}}return t}console.warn("Invalid Texture Atlas XML given")}},function(t,i){t.exports=function(t,i){var n=t.source[i];return t.add("__BASE",i,0,0,n.width,n.height),t}},function(t,i){t.exports=function(t,i){var n=t.source[i];return t.add("__BASE",i,0,0,n.width,n.height),t}},function(t,i,n){var r=n(77);t.exports=function(t,i,n){if(n.frames||n.textures){var o=t.source[i];t.add("__BASE",i,0,0,o.width,o.height);for(var a,h=Array.isArray(n.textures)?n.textures[i].frames:n.frames,d=0;d<h.length;d++){var f=h[d];a=t.add(f.filename,i,f.frame.x,f.frame.y,f.frame.w,f.frame.h),f.trimmed&&a.setTrim(f.sourceSize.w,f.sourceSize.h,f.spriteSourceSize.x,f.spriteSourceSize.y,f.spriteSourceSize.w,f.spriteSourceSize.h),f.rotated&&(a.rotated=!0,a.updateUVsInverted());var p=f.anchor||f.pivot;p&&(a.customPivot=!0,a.pivotX=p.x,a.pivotY=p.y),a.customData=r(f)}for(var T in n)"frames"!==T&&(Array.isArray(n[T])?t.customData[T]=n[T].slice(0):t.customData[T]=n[T]);return t}console.warn("Invalid Texture Atlas JSON Array")}},function(t,i,n){var r=n(77);t.exports=function(t,i,n){if(n.frames){var o=t.source[i];t.add("__BASE",i,0,0,o.width,o.height);var a,h=n.frames;for(var d in h)if(h.hasOwnProperty(d)){var f=h[d];a=t.add(d,i,f.frame.x,f.frame.y,f.frame.w,f.frame.h),f.trimmed&&a.setTrim(f.sourceSize.w,f.sourceSize.h,f.spriteSourceSize.x,f.spriteSourceSize.y,f.spriteSourceSize.w,f.spriteSourceSize.h),f.rotated&&(a.rotated=!0,a.updateUVsInverted());var p=f.anchor||f.pivot;p&&(a.customPivot=!0,a.pivotX=p.x,a.pivotY=p.y),a.customData=r(f)}for(var T in n)"frames"!==T&&(Array.isArray(n[T])?t.customData[T]=n[T].slice(0):t.customData[T]=n[T]);return t}console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object")}},function(t,i,n){var r=n(2);t.exports=function(t,i,n,o,a,h,d){var f=r(d,"frameWidth",null),p=r(d,"frameHeight",f);if(null===f)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var T=t.source[i];t.add("__BASE",i,0,0,T.width,T.height);var b=r(d,"startFrame",0),S=r(d,"endFrame",-1),A=r(d,"margin",0),P=r(d,"spacing",0),O=Math.floor((a-A+P)/(f+P))*Math.floor((h-A+P)/(p+P));0===O&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",t.key),(b>O||b<-O)&&(b=0),b<0&&(b=O+b),-1!==S&&(O=b+(S+1));for(var L=A,D=A,I=0,F=0,B=0;B<O;B++){I=0,F=0;var N=L+f,Y=D+p;N>a&&(I=N-a),Y>h&&(F=Y-h),t.add(B,i,n+L,o+D,f-I,p-F),(L+=f+P)+f>a&&(L=A,D+=p+P)}return t}},function(t,i,n){var r=n(2);t.exports=function(t,i,n){var o=r(n,"frameWidth",null),a=r(n,"frameHeight",o);if(!o)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var h=t.source[0];t.add("__BASE",0,0,0,h.width,h.height),r(n,"startFrame",0),r(n,"endFrame",-1);for(var d,f=r(n,"margin",0),p=r(n,"spacing",0),T=i.cutX,b=i.cutY,S=i.cutWidth,A=i.cutHeight,P=i.realWidth,O=i.realHeight,L=Math.floor((P-f+p)/(o+p)),D=Math.floor((O-f+p)/(a+p)),I=i.x,F=o-I,B=o-(P-S-I),N=i.y,Y=a-N,X=a-(O-A-N),G=f,U=f,V=0,z=i.sourceIndex,W=0;W<D;W++){for(var H=0===W,q=W===D-1,Z=0;Z<L;Z++){var K=0===Z,J=Z===L-1;if(d=t.add(V,z,T+G,b+U,o,a),K||H||J||q){var Q=K?I:0,$=H?N:0,tt=0,et=0;K&&(tt+=o-F),J&&(tt+=o-B),H&&(et+=a-Y),q&&(et+=a-X);var it=o-tt,nt=a-et;d.cutWidth=it,d.cutHeight=nt,d.setTrim(o,a,Q,$,it,nt)}G+=p,G+=K?F:J?B:o,V++}G=f,U+=p,U+=H?Y:q?X:a}return t}},function(t,i){var n=0,addFrame=function(t,i,r,o){var a=n-o.y-o.height;t.add(r,i,o.x,a,o.width,o.height)};t.exports=function(t,i,r){var o=t.source[i];t.add("__BASE",i,0,0,o.width,o.height),n=o.height;for(var a=r.split("\n"),h=/^[ ]*(- )*(\w+)+[: ]+(.*)/,d="",f="",p={x:0,y:0,width:0,height:0},T=0;T<a.length;T++){var b=a[T].match(h);if(b){var S="- "===b[1],A=b[2],P=b[3];if(S&&(f!==d&&(addFrame(t,i,f,p),d=f),p={x:0,y:0,width:0,height:0}),"name"!==A)switch(A){case"x":case"y":case"width":case"height":p[A]=parseInt(P,10)}else f=P}}return f!==d&&addFrame(t,i,f,p),t}},function(t,i){t.exports="complete"},function(t,i){t.exports="decoded"},function(t,i){t.exports="decodedall"},function(t,i){t.exports="destroy"},function(t,i){t.exports="detune"},function(t,i){t.exports="detune"},function(t,i){t.exports="mute"},function(t,i){t.exports="rate"},function(t,i){t.exports="volume"},function(t,i){t.exports="loop"},function(t,i){t.exports="looped"},function(t,i){t.exports="mute"},function(t,i){t.exports="pan"},function(t,i){t.exports="pauseall"},function(t,i){t.exports="pause"},function(t,i){t.exports="play"},function(t,i){t.exports="rate"},function(t,i){t.exports="resumeall"},function(t,i){t.exports="resume"},function(t,i){t.exports="seek"},function(t,i){t.exports="stopall"},function(t,i){t.exports="stop"},function(t,i){t.exports="unlocked"},function(t,i){t.exports="volume"},function(t,i,n){var r={Events:n(75),DisplayList:n(1012),GameObjectCreator:n(16),GameObjectFactory:n(5),UpdateList:n(1040),Components:n(11),GetCalcMatrix:n(19),BuildGameObject:n(28),BuildGameObjectAnimation:n(439),GameObject:n(15),BitmapText:n(148),Blitter:n(213),Bob:n(440),Container:n(214),DOMElement:n(442),DynamicBitmapText:n(215),Extern:n(444),Graphics:n(216),Group:n(113),Image:n(125),Layer:n(219),Particles:n(1074),PathFollower:n(457),RenderTexture:n(221),RetroFont:n(1082),Rope:n(223),Sprite:n(73),Text:n(224),GetTextSize:n(458),MeasureText:n(460),TextStyle:n(459),TileSprite:n(225),Zone:n(129),Video:n(226),Shape:n(34),Arc:n(461),Curve:n(462),Ellipse:n(463),Grid:n(464),IsoBox:n(465),IsoTriangle:n(466),Line:n(467),Polygon:n(468),Rectangle:n(473),Star:n(474),Triangle:n(475),Factories:{Blitter:n(1130),Container:n(1131),DOMElement:n(1132),DynamicBitmapText:n(1133),Extern:n(1134),Graphics:n(1135),Group:n(1136),Image:n(1137),Layer:n(1138),Particles:n(1139),PathFollower:n(1140),RenderTexture:n(1141),Rope:n(1142),Sprite:n(1143),StaticBitmapText:n(1144),Text:n(1145),TileSprite:n(1146),Zone:n(1147),Video:n(1148),Arc:n(1149),Curve:n(1150),Ellipse:n(1151),Grid:n(1152),IsoBox:n(1153),IsoTriangle:n(1154),Line:n(1155),Polygon:n(1156),Rectangle:n(1157),Star:n(1158),Triangle:n(1159)},Creators:{Blitter:n(1160),Container:n(1161),DynamicBitmapText:n(1162),Graphics:n(1163),Group:n(1164),Image:n(1165),Layer:n(1166),Particles:n(1167),RenderTexture:n(1168),Rope:n(1169),Sprite:n(1170),StaticBitmapText:n(1171),Text:n(1172),TileSprite:n(1173),Zone:n(1174),Video:n(1175)}};r.Shader=n(229),r.Mesh=n(230),r.PointLight=n(150),r.Factories.Shader=n(1184),r.Factories.Mesh=n(1185),r.Factories.PointLight=n(1186),r.Creators.Shader=n(1187),r.Creators.Mesh=n(1188),r.Creators.PointLight=n(1189),r.Light=n(481),r.LightsManager=n(482),r.LightsPlugin=n(1190),t.exports=r},function(t,i,n){var r=n(0),o=n(110),a=n(24),h=n(75),d=n(20),f=n(79),p=new r({Extends:o,initialize:function DisplayList2(t){o.call(this,t),this.sortChildrenFlag=!1,this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(d.BOOT,this.boot,this),this.events.on(d.START,this.start,this)},boot:function(){this.events.once(d.DESTROY,this.destroy,this)},addChildCallback:function(t){t.displayList&&t.displayList!==this&&t.removeFromDisplayList(),t.displayList||(this.queueDepthSort(),t.displayList=this,t.emit(h.ADDED_TO_SCENE,t,this.scene),this.events.emit(d.ADDED_TO_SCENE,t,this.scene))},removeChildCallback:function(t){this.queueDepthSort(),t.displayList=null,t.emit(h.REMOVED_FROM_SCENE,t,this.scene),this.events.emit(d.REMOVED_FROM_SCENE,t,this.scene)},start:function(){this.events.once(d.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(f(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(t,i){return t._depth-i._depth},getChildren:function(){return this.list},shutdown:function(){for(var t=this.list,i=t.length;i--;)t[i].destroy(!0);t.length=0,this.events.off(d.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(d.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});a.register("DisplayList",p,"displayList"),t.exports=p},function(t,i,n){t.exports={CheckMatrix:n(209),MatrixToString:n(1014),ReverseColumns:n(1015),ReverseRows:n(1016),Rotate180:n(1017),RotateLeft:n(1018),RotateMatrix:n(147),RotateRight:n(1019),Translate:n(1020),TransposeMatrix:n(435)}},function(t,i,n){var r=n(186),o=n(209);t.exports=function(t){var i="";if(!o(t))return i;for(var n=0;n<t.length;n++){for(var a=0;a<t[n].length;a++){var h=t[n][a].toString();i+="undefined"!==h?r(h,2):"?",a<t[n].length-1&&(i+=" |")}if(n<t.length-1){i+="\n";for(var d=0;d<t[n].length;d++)i+="---",d<t[n].length-1&&(i+="+");i+="\n"}}return i}},function(t,i){t.exports=function(t){return t.reverse()}},function(t,i){t.exports=function(t){for(var i=0;i<t.length;i++)t[i].reverse();return t}},function(t,i,n){var r=n(147);t.exports=function(t){return r(t,180)}},function(t,i,n){var r=n(147);t.exports=function(t){return r(t,90)}},function(t,i,n){var r=n(147);t.exports=function(t){return r(t,-90)}},function(t,i,n){var r=n(178),o=n(179);t.exports=function(t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),0!==n&&(n<0?r(t,Math.abs(n)):o(t,n)),0!==i)for(var a=0;a<t.length;a++){var h=t[a];i<0?r(h,Math.abs(i)):o(h,i)}return t}},function(t,i){t.exports=function(t,i,n,r,o){if(void 0===o&&(o=t),n>0){var a=n-t.length;if(a<=0)return null}if(!Array.isArray(i))return-1===t.indexOf(i)?(t.push(i),r&&r.call(o,i),i):null;for(var h=i.length-1;h>=0;)-1!==t.indexOf(i[h])&&i.splice(h,1),h--;if(0===(h=i.length))return null;n>0&&h>a&&(i.splice(a),h=a);for(var d=0;d<h;d++){var f=i[d];t.push(f),r&&r.call(o,f)}return i}},function(t,i){t.exports=function(t,i,n,r,o,a){if(void 0===n&&(n=0),void 0===a&&(a=t),r>0){var h=r-t.length;if(h<=0)return null}if(!Array.isArray(i))return-1===t.indexOf(i)?(t.splice(n,0,i),o&&o.call(a,i),i):null;for(var d=i.length-1;d>=0;)-1!==t.indexOf(i[d])&&i.pop(),d--;if(0===(d=i.length))return null;r>0&&d>h&&(i.splice(h),d=h);for(var f=d-1;f>=0;f--){var p=i[f];t.splice(n,0,p),o&&o.call(a,p)}return i}},function(t,i){t.exports=function(t,i){var n=t.indexOf(i);return-1!==n&&n<t.length&&(t.splice(n,1),t.push(i)),i}},function(t,i,n){var r=n(78);t.exports=function(t,i,n,o,a){void 0===o&&(o=0),void 0===a&&(a=t.length);var h=0;if(r(t,o,a))for(var d=o;d<a;d++)t[d][i]===n&&h++;return h}},function(t,i){t.exports=function(t,i,n){var r,o=[null];for(r=3;r<arguments.length;r++)o.push(arguments[r]);for(r=0;r<t.length;r++)o[0]=t[r],i.apply(n,o);return t}},function(t,i,n){var r=n(78);t.exports=function(t,i,n,o,a){if(void 0===o&&(o=0),void 0===a&&(a=t.length),r(t,o,a)){var h,d=[null];for(h=5;h<arguments.length;h++)d.push(arguments[h]);for(h=o;h<a;h++)d[0]=t[h],i.apply(n,d)}return t}},function(t,i){t.exports=function(t,i){var n=t.indexOf(i);if(n>0){var r=t[n-1],o=t.indexOf(r);t[n]=r,t[o]=i}return t}},function(t,i){t.exports=function(t,i,n){var r=t.indexOf(i);if(-1===r||n<0||n>=t.length)throw new Error("Supplied index out of bounds");return r!==n&&(t.splice(r,1),t.splice(n,0,i)),i}},function(t,i){t.exports=function(t,i){var n=t.indexOf(i);if(-1!==n&&n<t.length-1){var r=t[n+1],o=t.indexOf(r);t[n]=r,t[o]=i}return t}},function(t,i){t.exports=function(t,i,n){if(i===n)return t;var r=t.indexOf(i),o=t.indexOf(n);if(r<0||o<0)throw new Error("Supplied items must be elements of the same array");return r>o||(t.splice(r,1),o===t.length-1?t.push(i):t.splice(o,0,i)),t}},function(t,i){t.exports=function(t,i,n){if(i===n)return t;var r=t.indexOf(i),o=t.indexOf(n);if(r<0||o<0)throw new Error("Supplied items must be elements of the same array");return r<o||(t.splice(r,1),0===o?t.unshift(i):t.splice(o,0,i)),t}},function(t,i,n){var r=n(363);t.exports=function(t,i,n){void 0===t&&(t=0),void 0===i&&(i=null),void 0===n&&(n=1),null===i&&(i=t,t=0);for(var o=[],a=Math.max(r((i-t)/(n||1)),0),h=0;h<a;h++)o.push(t),t+=n;return o}},function(t,i,n){var r=n(74);t.exports=function(t,i,n,o){if(void 0===o&&(o=t),i<0||i>t.length-1)throw new Error("Index out of bounds");var a=r(t,i);return n&&n.call(o,a),a}},function(t,i,n){var r=n(78);t.exports=function(t,i,n,o,a){if(void 0===i&&(i=0),void 0===n&&(n=t.length),void 0===a&&(a=t),r(t,i,n)){var h=n-i,d=t.splice(i,h);if(o)for(var f=0;f<d.length;f++){var p=d[f];o.call(a,p)}return d}return[]}},function(t,i,n){var r=n(74);t.exports=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=t.length);var o=i+Math.floor(Math.random()*n);return r(t,o)}},function(t,i){t.exports=function(t,i,n){var r=t.indexOf(i),o=t.indexOf(n);return-1!==r&&-1===o&&(t[r]=n,!0)}},function(t,i){t.exports=function(t,i){var n=t.indexOf(i);return-1!==n&&n>0&&(t.splice(n,1),t.unshift(i)),i}},function(t,i,n){var r=n(78);t.exports=function(t,i,n,o,a){if(void 0===o&&(o=0),void 0===a&&(a=t.length),r(t,o,a))for(var h=o;h<a;h++){var d=t[h];d.hasOwnProperty(i)&&(d[i]=n)}return t}},function(t,i){t.exports=function(t,i,n){if(i===n)return t;var r=t.indexOf(i),o=t.indexOf(n);if(r<0||o<0)throw new Error("Supplied items must be elements of the same array");return t[r]=n,t[o]=i,t}},function(t,i,n){var r=n(0),o=n(211),a=n(24),h=n(20),d=new r({Extends:o,initialize:function UpdateList2(t){o.call(this),this.checkQueue=!0,this.scene=t,this.systems=t.sys,t.sys.events.once(h.BOOT,this.boot,this),t.sys.events.on(h.START,this.start,this)},boot:function(){this.systems.events.once(h.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(h.PRE_UPDATE,this.update,this),t.on(h.UPDATE,this.sceneUpdate,this),t.once(h.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(t,i){for(var n=this._active,r=n.length,o=0;o<r;o++){var a=n[o];a.active&&a.preUpdate.call(a,t,i)}},shutdown:function(){for(var t=this._active.length;t--;)this._active[t].destroy(!0);for(t=this._pending.length;t--;)this._pending[t].destroy(!0);for(t=this._destroy.length;t--;)this._destroy[t].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var i=this.systems.events;i.off(h.PRE_UPDATE,this.update,this),i.off(h.UPDATE,this.sceneUpdate,this),i.off(h.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(h.START,this.start,this),this.scene=null,this.systems=null}});a.register("UpdateList",d,"updateList"),t.exports=d},function(t,i){t.exports="add"},function(t,i){t.exports="remove"},function(t,i){t.exports=function(t,i,n,r){if(void 0===n&&(n=!1),void 0===r)return r={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0};var o,a,h,d,f=t.text,p=f.length,T=t.maxWidth,b=t.wordWrapCharCode,S=Number.MAX_VALUE,A=Number.MAX_VALUE,P=0,O=0,L=t.fontData.chars,D=t.fontData.lineHeight,I=t.letterSpacing,F=0,B=0,N=0,Y=null,X=t._align,G=0,U=0,V=t.fontSize/t.fontData.size,z=V*t.scaleX,W=V*t.scaleY,H=null,q=0,Z=[],K=Number.MAX_VALUE,J=0,Q=0,$=0,tt=[],et=[],it=null;if(T>0){for(o=0;o<p;o++)if(10!==(N=f.charCodeAt(o))){if(Y=L[N]){if(null!==H)var nt=Y.kerning[q];N===b?null!==it&&(tt.push({word:it.word,i:it.i,x:it.x*z,y:it.y*W,w:it.w*z,h:it.h*W,cr:!1}),it=null):(null===it&&(it={word:"",i:o,x:F,y:B,w:0,h:D,cr:!1}),it.word=it.word.concat(f[o]),it.w+=Y.xOffset+Y.xAdvance+(void 0!==nt?nt:0)),F+=Y.xAdvance+I,H=Y,q=N}}else null!==it&&(tt.push({word:it.word,i:it.i,x:it.x*z,y:it.y*W,w:it.w*z,h:it.h*W,cr:!0}),it=null),F=0,B+=D,H=null;var st;null!==it&&tt.push({word:it.word,i:it.i,x:it.x*z,y:it.y*W,w:it.w*z,h:it.h*W,cr:!1}),F=0,B=0,H=null,q=0;var rt=0,ot=[];for(o=0;o<tt.length;o++){var at=tt[o],ht=at.x,lt=at.x+at.w;st&&(rt=ht-(ht-(st.x+st.w)+st.w),st=null),ht-rt>T||lt-rt>T?(ot.push(at.i-1),at.cr?(ot.push(at.i+at.word.length),rt=0,st=null):st=at):at.cr&&(ot.push(at.i+at.word.length),rt=0,st=null)}for(o=ot.length-1;o>=0;o--)a=f,h=ot[o],d="\n",f=a.substr(0,h)+d+a.substr(h+1);r.wrappedText=f,p=f.length,tt=[],it=null}var ut=0;for(o=0;o<p;o++)if(10!==(N=f.charCodeAt(o))){if(Y=L[N]){if(G=F,U=B,null!==H){var ct=Y.kerning[q];G+=void 0!==ct?ct:0}S>G&&(S=G),A>U&&(A=U);var dt=G+Y.xAdvance,ft=U+D;P<dt&&(P=dt),O<ft&&(O=ft);var pt=Y.xOffset+Y.xAdvance+(void 0!==ct?ct:0);N===b?null!==it&&(tt.push({word:it.word,i:it.i,x:it.x*z,y:it.y*W,w:it.w*z,h:it.h*W}),it=null):(null===it&&(it={word:"",i:ut,x:F,y:B,w:0,h:D}),it.word=it.word.concat(f[o]),it.w+=pt),et.push({i:ut,char:f[o],code:N,x:(Y.xOffset+F)*V,y:(Y.yOffset+B)*V,w:Y.width*V,h:Y.height*V,t:B*V,r:dt*V,b:D*V,line:Q,glyph:Y}),F+=Y.xAdvance+I,H=Y,q=N,$=dt*V,ut++}}else null!==it&&(tt.push({word:it.word,i:it.i,x:it.x*z,y:it.y*W,w:it.w*z,h:it.h*W}),it=null),F=0,B+=D,H=null,Z[Q]=$,$>J&&(J=$),$<K&&(K=$),Q++,$=0;if(null!==it&&tt.push({word:it.word,i:it.i,x:it.x*z,y:it.y*W,w:it.w*z,h:it.h*W}),Z[Q]=$,$>J&&(J=$),$<K&&(K=$),X>0)for(var gt=0;gt<et.length;gt++){var vt=et[gt];if(1===X){var mt=(J-Z[vt.line])/2;vt.x+=mt,vt.r+=mt}else if(2===X){var yt=J-Z[vt.line];vt.x+=yt,vt.r+=yt}}var xt=r.local,Tt=r.global,wt=r.lines;return xt.x=S*V,xt.y=A*V,xt.width=P*V,xt.height=O*V,Tt.x=t.x-t._displayOriginX+S*z,Tt.y=t.y-t._displayOriginY+A*W,Tt.width=P*z,Tt.height=O*W,wt.shortest=K,wt.longest=J,wt.lengths=Z,i&&(xt.x=Math.ceil(xt.x),xt.y=Math.ceil(xt.y),xt.width=Math.ceil(xt.width),xt.height=Math.ceil(xt.height),Tt.x=Math.ceil(Tt.x),Tt.y=Math.ceil(Tt.y),Tt.width=Math.ceil(Tt.width),Tt.height=Math.ceil(Tt.height),wt.shortest=Math.ceil(K),wt.longest=Math.ceil(J)),n&&(t._displayOriginX=t.originX*xt.width,t._displayOriginY=t.originY*xt.height,Tt.x=t.x-t._displayOriginX*t.scaleX,Tt.y=t.y-t._displayOriginY*t.scaleY,i&&(Tt.x=Math.ceil(Tt.x),Tt.y=Math.ceil(Tt.y))),r.words=tt,r.characters=et,r.lines.height=D,r.scale=V,r.scaleX=t.scaleX,r.scaleY=t.scaleY,r}},function(t,i,n){var r=n(212);t.exports=function(t,i,n,o,a,h,d){var f=t.sys.textures.get(n),p=f.get(o),T=t.sys.cache.xml.get(a);if(p&&T){var b=r(T,p,h,d,f);return t.sys.cache.bitmapFont.add(i,{data:b,texture:n,frame:o,fromAtlas:!0}),!0}return!1}},function(t,i,n){var r=n(1),o=n(1);r=n(1046),o=n(1048),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i,n){var r=n(1047),o=n(19),a=n(12);t.exports=function(t,i,n,h){if(0!==i._text.length){n.addToRenderList(i);var d,f,p,T=t.pipelines.set(i.pipeline,i),b=o(i,n,h).calc,S=n.roundPixels,A=n.alpha,P=i.charColors,O=i.tintFill,L=a.getTintAppendFloatAlpha,D=L(i.tintTopLeft,A*i._alphaTL),I=L(i.tintTopRight,A*i._alphaTR),F=L(i.tintBottomLeft,A*i._alphaBL),B=L(i.tintBottomRight,A*i._alphaBR),N=i.frame.glTexture,Y=T.setGameObject(i),X=i.getTextBounds(!1).characters,G=i.dropShadowX,U=i.dropShadowY,V=0!==G||0!==U;if(t.pipelines.preBatch(i),V){var z=i.dropShadowColor,W=i.dropShadowAlpha,H=L(z,A*W*i._alphaTL),q=L(z,A*W*i._alphaTR),Z=L(z,A*W*i._alphaBL),K=L(z,A*W*i._alphaBR);for(d=0;d<X.length;d++)p=(f=X[d]).glyph,32!==f.code&&0!==p.width&&0!==p.height&&r(T,i,f,p,G,U,b,S,H,q,Z,K,1,N,Y)}for(d=0;d<X.length;d++)if(p=(f=X[d]).glyph,32!==f.code&&0!==p.width&&0!==p.height)if(P[f.i]){var J=P[f.i],Q=J.tintEffect,$=L(J.tintTL,A*i._alphaTL),tt=L(J.tintTR,A*i._alphaTR),et=L(J.tintBL,A*i._alphaBL),it=L(J.tintBR,A*i._alphaBR);r(T,i,f,p,0,0,b,S,$,tt,et,it,Q,N,Y)}else r(T,i,f,p,0,0,b,S,D,I,F,B,O,N,Y);t.pipelines.postBatch(i)}}},function(t,i){t.exports=function(t,i,n,r,o,a,h,d,f,p,T,b,S,A,P){var O=n.x-i.displayOriginX+o,L=n.y-i.displayOriginY+a,D=O+n.w,I=L+n.h,F=h.getXRound(O,L,d),B=h.getYRound(O,L,d),N=h.getXRound(O,I,d),Y=h.getYRound(O,I,d),X=h.getXRound(D,I,d),G=h.getYRound(D,I,d),U=h.getXRound(D,L,d),V=h.getYRound(D,L,d);t.batchQuad(i,F,B,N,Y,X,G,U,V,r.u0,r.v0,r.u1,r.v1,f,p,T,b,S,A,P)}},function(t,i,n){var r=n(30);t.exports=function(t,i,n,o){var a=i._text,h=a.length,d=t.currentContext;if(0!==h&&r(t,d,i,n,o)){n.addToRenderList(i);var f=i.fromAtlas?i.frame:i.texture.frames.__BASE,p=i.fontData.chars,T=i.fontData.lineHeight,b=i._letterSpacing,S=0,A=0,P=0,O=null,L=0,D=0,I=0,F=0,B=0,N=0,Y=null,X=0,G=f.source.image,U=f.cutX,V=f.cutY,z=i._fontSize/i.fontData.size,W=i._align,H=0,q=0,Z=i.getTextBounds(!1);i.maxWidth>0&&(h=(a=Z.wrappedText).length);var K=i._bounds.lines;1===W?q=(K.longest-K.lengths[0])/2:2===W&&(q=K.longest-K.lengths[0]),d.translate(-i.displayOriginX,-i.displayOriginY);for(var J=n.roundPixels,Q=0;Q<h;Q++)if(10!==(P=a.charCodeAt(Q))){if(O=p[P]){if(L=U+O.x,D=V+O.y,I=O.width,F=O.height,B=O.xOffset+S,N=O.yOffset+A,null!==Y){var $=O.kerning[X];B+=void 0!==$?$:0}B*=z,N*=z,B+=q,S+=O.xAdvance+b,Y=O,X=P,0!==I&&0!==F&&32!==P&&(J&&(B=Math.round(B),N=Math.round(N)),d.save(),d.translate(B,N),d.scale(z,z),d.drawImage(G,L,D,I,F,0,0,I,F),d.restore())}}else H++,1===W?q=(K.longest-K.lengths[H])/2:2===W&&(q=K.longest-K.lengths[H]),S=0,A+=T,Y=null;d.restore()}}},function(t,i,n){var r=n(1),o=n(1);r=n(1050),o=n(1051),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i,n){var r=n(25),o=n(12),a=new r;t.exports=function(t,i,n,r){var h=i.getRenderList();if(0!==h.length){var d=n.alpha*i.alpha;if(0!==d){n.addToRenderList(i);var f=t.pipelines.set(this.pipeline,i),p=n.scrollX*i.scrollFactorX,T=n.scrollY*i.scrollFactorY,b=a.copyFrom(n.matrix);r&&(b.multiplyWithOffset(r,-p,-T),p=0,T=0);var S=i.x-p,A=i.y-T,P=-1,O=n.roundPixels;t.pipelines.preBatch(i);for(var L=0;L<h.length;L++){var D=h[L],I=D.frame,F=D.alpha*d;if(0!==F){var B=I.width,N=I.height,Y=S+D.x+I.x,X=A+D.y+I.y;D.flipX&&(B*=-1,Y+=I.width),D.flipY&&(N*=-1,X+=I.height);var G=Y+B,U=X+N,V=b.getX(Y,X),z=b.getY(Y,X),W=b.getX(G,U),H=b.getY(G,U),q=o.getTintAppendFloatAlpha(D.tint,F);if(I.sourceIndex!==P){var Z=f.setGameObject(i,I);P=I.sourceIndex}O&&(V=Math.round(V),z=Math.round(z),W=Math.round(W),H=Math.round(H)),f.batchQuad(i,V,z,V,H,W,H,W,z,I.u0,I.v0,I.u1,I.v1,q,q,q,q,!1,I.glTexture,Z)&&(P=-1)}}t.pipelines.postBatch(i)}}}},function(t,i){t.exports=function(t,i,n,r){var o=i.getRenderList();if(0!==o.length){var a=t.currentContext,h=n.alpha*i.alpha;if(0!==h){n.addToRenderList(i),a.globalCompositeOperation=t.blendModes[i.blendMode],a.imageSmoothingEnabled=!(!t.antialias||i.frame.source.scaleMode);var d=i.x-n.scrollX*i.scrollFactorX,f=i.y-n.scrollY*i.scrollFactorY;a.save(),r&&r.copyToContext(a);for(var p=n.roundPixels,T=0;T<o.length;T++){var b=o[T],S=b.flipX||b.flipY,A=b.frame,P=A.canvasData,O=A.x,L=A.y,D=1,I=1,F=b.alpha*h;0!==F&&(a.globalAlpha=F,S?(b.flipX&&(D=-1,O-=P.width),b.flipY&&(I=-1,L-=P.height),a.save(),a.translate(b.x+d,b.y+f),a.scale(D,I),a.drawImage(A.source.image,P.x,P.y,P.width,P.height,O,L,P.width,P.height),a.restore()):(p&&(O=Math.round(O),L=Math.round(L)),a.drawImage(A.source.image,P.x,P.y,P.width,P.height,O+b.x+d,L+b.y+f,P.width,P.height)))}a.restore()}}}},function(t,i,n){var r=n(1),o=n(1);r=n(1053),o=n(1054),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i){t.exports=function(t,i,n,r){n.addToRenderList(i);var o=i.list,a=o.length;if(0!==a){var h=i.localTransform;r?(h.loadIdentity(),h.multiply(r),h.translate(i.x,i.y),h.rotate(i.rotation),h.scale(i.scaleX,i.scaleY)):h.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY),t.pipelines.preBatch(i);var d=-1!==i.blendMode;d||t.setBlendMode(0);for(var f=i.alpha,p=i.scrollFactorX,T=i.scrollFactorY,b=0;b<a;b++){var S=o[b];if(S.willRender(n)){var A,P,O,L;if(void 0!==S.alphaTopLeft)A=S.alphaTopLeft,P=S.alphaTopRight,O=S.alphaBottomLeft,L=S.alphaBottomRight;else{var D=S.alpha;A=D,P=D,O=D,L=D}var I=S.scrollFactorX,F=S.scrollFactorY;d||S.blendMode===t.currentBlendMode||t.setBlendMode(S.blendMode);var B=S.mask;B&&B.preRenderWebGL(t,S,n);var N=S.type;N!==t.currentType&&(t.newType=!0,t.currentType=N),t.nextTypeMatch=b<a-1&&o[b+1].type===t.currentType,S.setScrollFactor(I*p,F*T),S.setAlpha(A*f,P*f,O*f,L*f),S.renderWebGL(t,S,n,h),S.setAlpha(A,P,O,L),S.setScrollFactor(I,F),B&&B.postRenderWebGL(t,n),t.newType=!1}}t.pipelines.postBatch(i)}}},function(t,i){t.exports=function(t,i,n,r){n.addToRenderList(i);var o=i.list;if(0!==o.length){var a=i.localTransform;r?(a.loadIdentity(),a.multiply(r),a.translate(i.x,i.y),a.rotate(i.rotation),a.scale(i.scaleX,i.scaleY)):a.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY);var h=-1!==i.blendMode;h||t.setBlendMode(0);var d=i._alpha,f=i.scrollFactorX,p=i.scrollFactorY;i.mask&&i.mask.preRenderCanvas(t,null,n);for(var T=0;T<o.length;T++){var b=o[T];if(b.willRender(n)){var S=b.alpha,A=b.scrollFactorX,P=b.scrollFactorY;h||b.blendMode===t.currentBlendMode||t.setBlendMode(b.blendMode),b.setScrollFactor(A*f,P*p),b.setAlpha(S*d),b.renderCanvas(t,b,n,a),b.setAlpha(S),b.setScrollFactor(A,P)}}i.mask&&i.mask.postRenderCanvas(t)}}},function(t,i,n){var r=n(1),o=n(1);r=n(443),o=n(443),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i){t.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(t,i,n){var r=n(1),o=n(1);r=n(1058),o=n(1059),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i,n){var r=n(19),o=n(25),a=n(12),h=new o;t.exports=function(t,i,n,o){var d=i.text,f=d.length;if(0!==f){n.addToRenderList(i);var p=t.pipelines.set(i.pipeline,i),T=r(i,n,o),b=T.sprite,S=T.calc,A=h,P=i.cropWidth>0||i.cropHeight>0;P&&(p.flush(),t.pushScissor(S.tx,S.ty,i.cropWidth*S.scaleX,i.cropHeight*S.scaleY));var O,L,D=i.frame.glTexture,I=i.tintFill,F=a.getTintAppendFloatAlpha(i.tintTopLeft,n.alpha*i._alphaTL),B=a.getTintAppendFloatAlpha(i.tintTopRight,n.alpha*i._alphaTR),N=a.getTintAppendFloatAlpha(i.tintBottomLeft,n.alpha*i._alphaBL),Y=a.getTintAppendFloatAlpha(i.tintBottomRight,n.alpha*i._alphaBR),X=p.setGameObject(i),G=0,U=0,V=0,z=0,W=i.letterSpacing,H=0,q=0,Z=i.scrollX,K=i.scrollY,J=i.fontData,Q=J.chars,$=J.lineHeight,tt=i.fontSize/J.size,et=0,it=i._align,nt=0,st=0,rt=i.getTextBounds(!1);i.maxWidth>0&&(f=(d=rt.wrappedText).length);var ot=i._bounds.lines;1===it?st=(ot.longest-ot.lengths[0])/2:2===it&&(st=ot.longest-ot.lengths[0]);var at=n.roundPixels,ht=i.displayCallback,lt=i.callbackData;t.pipelines.preBatch(i);for(var ut=0;ut<f;ut++)if(10!==(V=d.charCodeAt(ut))){if(O=Q[V]){H=O.width,q=O.height;var ct=O.xOffset+G-Z,dt=O.yOffset+U-K;if(null!==L){var ft=O.kerning[z];ct+=void 0!==ft?ft:0}if(G+=O.xAdvance+W,L=O,z=V,0!==H&&0!==q&&32!==V){if(tt=i.fontSize/i.fontData.size,et=0,ht){lt.color=0,lt.tint.topLeft=F,lt.tint.topRight=B,lt.tint.bottomLeft=N,lt.tint.bottomRight=Y,lt.index=ut,lt.charCode=V,lt.x=ct,lt.y=dt,lt.scale=tt,lt.rotation=et,lt.data=O.data;var pt=ht(lt);ct=pt.x,dt=pt.y,tt=pt.scale,et=pt.rotation,pt.color?(F=pt.color,B=pt.color,N=pt.color,Y=pt.color):(F=pt.tint.topLeft,B=pt.tint.topRight,N=pt.tint.bottomLeft,Y=pt.tint.bottomRight),F=a.getTintAppendFloatAlpha(F,n.alpha*i._alphaTL),B=a.getTintAppendFloatAlpha(B,n.alpha*i._alphaTR),N=a.getTintAppendFloatAlpha(N,n.alpha*i._alphaBL),Y=a.getTintAppendFloatAlpha(Y,n.alpha*i._alphaBR)}ct*=tt,dt*=tt,ct-=i.displayOriginX,dt-=i.displayOriginY,ct+=st,A.applyITRS(ct,dt,et,tt,tt),S.multiply(A,b);var gt=O.u0,vt=O.v0,mt=O.u1,yt=O.v1,xt=H,Tt=q,wt=b.e,bt=b.f,St=Tt*b.c+b.e,Mt=Tt*b.d+b.f,Et=xt*b.a+Tt*b.c+b.e,Ct=xt*b.b+Tt*b.d+b.f,At=xt*b.a+b.e,_t=xt*b.b+b.f;at&&(wt=Math.round(wt),bt=Math.round(bt),St=Math.round(St),Mt=Math.round(Mt),Et=Math.round(Et),Ct=Math.round(Ct),At=Math.round(At),_t=Math.round(_t)),p.batchQuad(i,wt,bt,St,Mt,Et,Ct,At,_t,gt,vt,mt,yt,F,B,N,Y,I,D,X)}}}else nt++,1===it?st=(ot.longest-ot.lengths[nt])/2:2===it&&(st=ot.longest-ot.lengths[nt]),G=0,U+=$,L=null;P&&(p.flush(),t.popScissor()),t.pipelines.postBatch(i)}}},function(t,i,n){var r=n(30);t.exports=function(t,i,n,o){var a=i._text,h=a.length,d=t.currentContext;if(0!==h&&r(t,d,i,n,o)){n.addToRenderList(i);var f=i.fromAtlas?i.frame:i.texture.frames.__BASE,p=i.displayCallback,T=i.callbackData,b=i.fontData.chars,S=i.fontData.lineHeight,A=i._letterSpacing,P=0,O=0,L=0,D=null,I=0,F=0,B=0,N=0,Y=0,X=0,G=null,U=0,V=i.frame.source.image,z=f.cutX,W=f.cutY,H=0,q=0,Z=i._fontSize/i.fontData.size,K=i._align,J=0,Q=0;i.getTextBounds(!1);var $=i._bounds.lines;1===K?Q=($.longest-$.lengths[0])/2:2===K&&(Q=$.longest-$.lengths[0]),d.translate(-i.displayOriginX,-i.displayOriginY);var tt=n.roundPixels;i.cropWidth>0&&i.cropHeight>0&&(d.beginPath(),d.rect(0,0,i.cropWidth,i.cropHeight),d.clip());for(var et=0;et<h;et++)if(q=Z,H=0,10!==(L=a.charCodeAt(et))){if(D=b[L]){if(I=z+D.x,F=W+D.y,B=D.width,N=D.height,Y=D.xOffset+P-i.scrollX,X=D.yOffset+O-i.scrollY,null!==G){var it=D.kerning[U];Y+=void 0!==it?it:0}if(p){T.index=et,T.charCode=L,T.x=Y,T.y=X,T.scale=q,T.rotation=H,T.data=D.data;var nt=p(T);Y=nt.x,X=nt.y,q=nt.scale,H=nt.rotation}Y*=q,X*=q,Y+=Q,P+=D.xAdvance+A,G=D,U=L,0!==B&&0!==N&&32!==L&&(tt&&(Y=Math.round(Y),X=Math.round(X)),d.save(),d.translate(Y,X),d.rotate(H),d.scale(q,q),d.drawImage(V,I,F,B,N,0,0,B,N),d.restore())}}else J++,1===K?Q=($.longest-$.lengths[J])/2:2===K&&(Q=$.longest-$.lengths[J]),P=0,O+=S,G=null;d.restore()}}},function(t,i,n){var r=n(1),o=n(1);r=n(1061),o=n(1062),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i,n){var r=n(19);t.exports=function(t,i,n,o){t.pipelines.clear();var a=r(i,n,o).calc;i.render.call(i,t,n,a),t.pipelines.rebind()}},function(t,i){},function(t,i,n){var r=n(1),o=n(1);r=n(1064),n(448),o=n(448),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i,n){var r=n(217),o=n(19),a=n(25),h=n(12),Point3=function(t,i,n){this.x=t,this.y=i,this.width=n},Path=function(t,i,n){this.points=[],this.pointsLength=1,this.points[0]=new Point3(t,i,n)},d=[],f=new a;t.exports=function(t,i,n,a){if(0!==i.commandBuffer.length){n.addToRenderList(i);var p=t.pipelines.set(i.pipeline,i);t.pipelines.preBatch(i);for(var T=o(i,n,a).calc,b=f.loadIdentity(),S=i.commandBuffer,A=n.alpha*i.alpha,P=1,O=p.fillTint,L=p.strokeTint,D=0,I=0,F=0,B=2*Math.PI,N=[],Y=0,X=!0,G=null,U=h.getTintAppendFloatAlpha,V=0;V<S.length;V++)switch(S[V]){case r.BEGIN_PATH:N.length=0,G=null,X=!0;break;case r.CLOSE_PATH:X=!1,G&&G.points.length&&G.points.push(G.points[0]);break;case r.FILL_PATH:for(Y=0;Y<N.length;Y++)p.batchFillPath(N[Y].points,b,T);break;case r.STROKE_PATH:for(Y=0;Y<N.length;Y++)p.batchStrokePath(N[Y].points,P,X,b,T);break;case r.LINE_STYLE:P=S[++V];var z=U(S[++V],S[++V]*A);L.TL=z,L.TR=z,L.BL=z,L.BR=z;break;case r.FILL_STYLE:var W=U(S[++V],S[++V]*A);O.TL=W,O.TR=W,O.BL=W,O.BR=W;break;case r.GRADIENT_FILL_STYLE:var H=S[++V]*A,q=S[++V]*A,Z=S[++V]*A,K=S[++V]*A;O.TL=U(S[++V],H),O.TR=U(S[++V],q),O.BL=U(S[++V],Z),O.BR=U(S[++V],K);break;case r.GRADIENT_LINE_STYLE:P=S[++V];var J=S[++V]*A;L.TL=U(S[++V],J),L.TR=U(S[++V],J),L.BL=U(S[++V],J),L.BR=U(S[++V],J);break;case r.ARC:var Q=0,$=S[++V],tt=S[++V],et=S[++V],it=S[++V],nt=S[++V],st=S[++V],rt=S[++V];for(nt-=it,st?nt<-B?nt=-B:nt>0&&(nt=nt%B-B):nt>B?nt=B:nt<0&&(nt=B+nt%B),null===G&&(G=new Path($+Math.cos(it)*et,tt+Math.sin(it)*et,P),N.push(G),Q+=.01);Q<1+rt;)F=nt*Q+it,D=$+Math.cos(F)*et,I=tt+Math.sin(F)*et,G.points.push(new Point3(D,I,P)),Q+=.01;F=nt+it,D=$+Math.cos(F)*et,I=tt+Math.sin(F)*et,G.points.push(new Point3(D,I,P));break;case r.FILL_RECT:p.batchFillRect(S[++V],S[++V],S[++V],S[++V],b,T);break;case r.FILL_TRIANGLE:p.batchFillTriangle(S[++V],S[++V],S[++V],S[++V],S[++V],S[++V],b,T);break;case r.STROKE_TRIANGLE:p.batchStrokeTriangle(S[++V],S[++V],S[++V],S[++V],S[++V],S[++V],P,b,T);break;case r.LINE_TO:null!==G?G.points.push(new Point3(S[++V],S[++V],P)):(G=new Path(S[++V],S[++V],P),N.push(G));break;case r.MOVE_TO:G=new Path(S[++V],S[++V],P),N.push(G);break;case r.SAVE:d.push(b.copyToArray());break;case r.RESTORE:b.copyFromArray(d.pop());break;case r.TRANSLATE:$=S[++V],tt=S[++V],b.translate($,tt);break;case r.SCALE:$=S[++V],tt=S[++V],b.scale($,tt);break;case r.ROTATE:b.rotate(S[++V])}t.pipelines.postBatch(i)}}},function(t,i,n){var r=n(1),o=n(1);r=n(1066),o=n(1067),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i){t.exports=function(t,i,n,r){n.addToRenderList(i),i.pipeline.batchSprite(i,n,r)}},function(t,i){t.exports=function(t,i,n,r){n.addToRenderList(i),t.batchSprite(i,i.frame,n,r)}},function(t,i,n){var r=n(1),o=n(1);r=n(1069),o=n(1070),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i){t.exports=function(t,i,n,r){n.addToRenderList(i),this.pipeline.batchSprite(i,n,r)}},function(t,i){t.exports=function(t,i,n,r){n.addToRenderList(i),t.batchSprite(i,i.frame,n,r)}},function(t,i,n){var r=n(1),o=n(1);r=n(1072),o=n(1073),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i){t.exports=function(t,i,n){var r=i.list,o=r.length;if(0!==o){i.depthSort(),t.pipelines.preBatch(i);var a=-1!==i.blendMode;a||t.setBlendMode(0);for(var h=i.alpha,d=0;d<o;d++){var f=r[d];if(f.willRender(n)){var p,T,b,S;if(void 0!==f.alphaTopLeft)p=f.alphaTopLeft,T=f.alphaTopRight,b=f.alphaBottomLeft,S=f.alphaBottomRight;else{var A=f.alpha;p=A,T=A,b=A,S=A}a||f.blendMode===t.currentBlendMode||t.setBlendMode(f.blendMode);var P=f.mask;P&&P.preRenderWebGL(t,f,n);var O=f.type;O!==t.currentType&&(t.newType=!0,t.currentType=O),t.nextTypeMatch=d<o-1&&r[d+1].type===t.currentType,f.setAlpha(p*h,T*h,b*h,S*h),f.renderWebGL(t,f,n),f.setAlpha(p,T,b,S),P&&P.postRenderWebGL(t,n),t.newType=!1}}t.pipelines.postBatch(i)}}},function(t,i){t.exports=function(t,i,n){var r=i.list;if(0!==r.length){i.depthSort();var o=-1!==i.blendMode;o||t.setBlendMode(0);var a=i._alpha;i.mask&&i.mask.preRenderCanvas(t,null,n);for(var h=0;h<r.length;h++){var d=r[h];if(d.willRender(n)){var f=d.alpha;o||d.blendMode===t.currentBlendMode||t.setBlendMode(d.blendMode),d.setAlpha(f*a),d.renderCanvas(t,d,n),d.setAlpha(f)}}i.mask&&i.mask.postRenderCanvas(t)}}},function(t,i,n){t.exports={EmitterOp:n(449),GravityWell:n(450),Particle:n(451),ParticleEmitter:n(452),ParticleEmitterManager:n(220),Zones:n(1078)}},function(t,i,n){var r=n(1),o=n(1);r=n(1076),o=n(1077),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i,n){var r=n(25),o=n(12),a=new r,h=new r,d=new r,f=new r;t.exports=function(t,i,n,r){var p=i.emitters.list,T=p.length;if(0!==T){var b=t.pipelines.set(i.pipeline),S=a,A=h,P=d,O=f;r?(O.loadIdentity(),O.multiply(r),O.translate(i.x,i.y),O.rotate(i.rotation),O.scale(i.scaleX,i.scaleY)):O.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY);var L=n.roundPixels,D=i.defaultFrame.glTexture,I=o.getTintAppendFloatAlpha,F=b.setGameObject(i,i.defaultFrame);t.pipelines.preBatch(i);for(var B=0;B<T;B++){var N=p[B],Y=N.alive,X=Y.length;if(N.visible&&0!==X){n.addToRenderList(N);var G=N.scrollFactorX,U=N.scrollFactorY;t.setBlendMode(N.blendMode),N.mask&&(N.mask.preRenderWebGL(t,N,n),t.pipelines.set(i.pipeline));for(var V=0;V<X;V++){var z=Y[V],W=z.alpha*n.alpha;if(!(W<=0)){P.applyITRS(z.x,z.y,z.rotation,z.scaleX,z.scaleY),S.copyFrom(n.matrix),S.multiplyWithOffset(O,-n.scrollX*G,-n.scrollY*U),P.e=z.x,P.f=z.y,S.multiply(P,A);var H=z.frame,q=-H.halfWidth,Z=-H.halfHeight,K=q+H.width,J=Z+H.height,Q=A.getXRound(q,Z,L),$=A.getYRound(q,Z,L),tt=A.getXRound(q,J,L),et=A.getYRound(q,J,L),it=A.getXRound(K,J,L),nt=A.getYRound(K,J,L),st=A.getXRound(K,Z,L),rt=A.getYRound(K,Z,L),ot=I(z.tint,W);b.batchQuad(N,Q,$,tt,et,it,nt,st,rt,H.u0,H.v0,H.u1,H.v1,ot,ot,ot,ot,0,D,F)}}N.mask&&N.mask.postRenderWebGL(t,n)}}t.pipelines.postBatch(i)}}},function(t,i,n){var r=n(25),o=new r,a=new r,h=new r,d=new r;t.exports=function(t,i,n,r){var f=i.emitters.list,p=f.length;if(0!==p){var T=o.copyFrom(n.matrix),b=a,S=h,A=d;r?(A.loadIdentity(),A.multiply(r),A.translate(i.x,i.y),A.rotate(i.rotation),A.scale(i.scaleX,i.scaleY)):A.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY);for(var P=t.currentContext,O=n.roundPixels,L=0;L<p;L++){var D=f[L],I=D.alive,F=I.length;if(D.visible&&0!==F){n.addToRenderList(D);var B=D.scrollFactorX,N=D.scrollFactorY;P.save(),P.globalCompositeOperation=t.blendModes[D.blendMode];for(var Y=0;Y<F;Y++){var X=I[Y],G=X.alpha*n.alpha;if(!(G<=0)){S.applyITRS(X.x,X.y,X.rotation,X.scaleX,X.scaleY),T.copyFrom(n.matrix),T.multiplyWithOffset(A,-n.scrollX*B,-n.scrollY*N),S.e=X.x,S.f=X.y,T.multiply(S,b);var U=X.frame,V=U.canvasData,z=-U.halfWidth,W=-U.halfHeight;P.globalAlpha=G,P.save(),b.setToContext(P),O&&(z=Math.round(z),W=Math.round(W)),P.imageSmoothingEnabled=!(!t.antialias||U.source.scaleMode),P.drawImage(U.source.image,V.x,V.y,V.width,V.height,z,W,V.width,V.height),P.restore()}}P.restore()}}}}},function(t,i,n){t.exports={DeathZone:n(453),EdgeZone:n(454),RandomZone:n(456)}},function(t,i,n){var r=n(1),o=n(1);r=n(1080),o=n(1081),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i,n){var r=n(12);t.exports=function(t,i,n,o){n.addToRenderList(i);var a=n.alpha,h=i.renderTarget,d=h.width,f=h.height,p=r.getTintAppendFloatAlpha,T=t.pipelines.set(i.pipeline),b=T.setTexture2D(h.texture);t.pipelines.preBatch(i),T.batchTexture(i,h.texture,d,f,i.x,i.y,d,f,i.scaleX,i.scaleY,i.rotation,i.flipX,!i.flipY,i.scrollFactorX,i.scrollFactorY,i.displayOriginX,i.displayOriginY,0,0,d,f,p(i.tintTopLeft,a*i._alphaTL),p(i.tintTopRight,a*i._alphaTR),p(i.tintBottomLeft,a*i._alphaBL),p(i.tintBottomRight,a*i._alphaBR),i.tintFill,0,0,n,o,!0,b),t.resetTextures(),t.pipelines.postBatch(i)}},function(t,i){t.exports=function(t,i,n,r){n.addToRenderList(i),t.batchSprite(i,i.frame,n,r)}},function(t,i,n){var r=n(1083),o=n(17),a={Parse:n(1084)};a=o(!1,a,r),t.exports=a},function(t,i){var n={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:"ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",TEXT_SET7:"AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:"ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789"};t.exports=n},function(t,i,n){var r=n(6);t.exports=function(t,i){var n=i.width,o=i.height,a=Math.floor(n/2),h=Math.floor(o/2),d=r(i,"chars","");if(""!==d){var f=r(i,"image",""),p=t.sys.textures.getFrame(f),T=p.cutX,b=p.cutY,S=p.source.width,A=p.source.height,P=r(i,"offset.x",0),O=r(i,"offset.y",0),L=r(i,"spacing.x",0),D=r(i,"spacing.y",0),I=r(i,"lineSpacing",0),F=r(i,"charsPerRow",null);null===F&&(F=S/n)>d.length&&(F=d.length);for(var B=P,N=O,Y={retroFont:!0,font:f,size:n,lineHeight:o+I,chars:{}},X=0,G=0;G<d.length;G++){var U=d.charCodeAt(G),V=(T+B)/S,z=(b+N)/A,W=(T+B+n)/S,H=(b+N+o)/A;Y.chars[U]={x:B,y:N,width:n,height:o,centerX:a,centerY:h,xOffset:0,yOffset:0,xAdvance:n,data:{},kerning:{},u0:V,v0:z,u1:W,v1:H},++X===F?(X=0,B=P,N+=o+D):B+=n+L}return{data:Y,frame:null,texture:f}}}},function(t,i,n){var r=n(1),o=n(1);r=n(1086),o=n(1087),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i,n){var r=n(19),o=n(12);t.exports=function(t,i,n,a){n.addToRenderList(i);var h=t.pipelines.set(i.pipeline,i),d=r(i,n,a).calc,f=i.vertices,p=i.uv,T=i.colors,b=i.alphas,S=i.alpha,A=o.getTintAppendFloatAlpha,P=n.roundPixels,O=f.length,L=Math.floor(.5*O);h.flush(),t.pipelines.preBatch(i);var D=h.setGameObject(i),I=h.vertexViewF32,F=h.vertexViewU32,B=h.vertexCount*h.currentShader.vertexComponentCount-1,N=0,Y=i.tintFill;i.dirty&&i.updateVertices();for(var X=i.debugCallback,G=[],U=0;U<O;U+=2){var V=f[U+0],z=f[U+1],W=V*d.a+z*d.c+d.e,H=V*d.b+z*d.d+d.f;P&&(W=Math.round(W),H=Math.round(H)),I[++B]=W,I[++B]=H,I[++B]=p[U+0],I[++B]=p[U+1],I[++B]=D,I[++B]=Y,F[++B]=A(T[N],n.alpha*(b[N]*S)),N++,X&&(G[U+0]=W,G[U+1]=H)}X&&X.call(i,i,O,G),h.vertexCount+=L,t.pipelines.postBatch(i)}},function(t,i){t.exports=function(){}},function(t,i,n){var r=n(1),o=n(1);r=n(1089),o=n(1090),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i,n){var r=n(12);t.exports=function(t,i,n,o){if(0!==i.width&&0!==i.height){n.addToRenderList(i);var a=i.frame,h=a.width,d=a.height,f=r.getTintAppendFloatAlpha,p=t.pipelines.set(i.pipeline,i),T=p.setTexture2D(a.glTexture,i);t.pipelines.preBatch(i),p.batchTexture(i,a.glTexture,h,d,i.x,i.y,h/i.style.resolution,d/i.style.resolution,i.scaleX,i.scaleY,i.rotation,i.flipX,i.flipY,i.scrollFactorX,i.scrollFactorY,i.displayOriginX,i.displayOriginY,0,0,h,d,f(i.tintTopLeft,n.alpha*i._alphaTL),f(i.tintTopRight,n.alpha*i._alphaTR),f(i.tintBottomLeft,n.alpha*i._alphaBL),f(i.tintBottomRight,n.alpha*i._alphaBR),i.tintFill,0,0,n,o,!1,T),t.pipelines.postBatch(i)}}},function(t,i){t.exports=function(t,i,n,r){0!==i.width&&0!==i.height&&(n.addToRenderList(i),t.batchSprite(i,i.frame,n,r))}},function(t,i,n){var r=n(1),o=n(1);r=n(1092),o=n(1093),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i,n){var r=n(12);t.exports=function(t,i,n,o){i.updateCanvas();var a=i.width,h=i.height;if(0!==a&&0!==h){n.addToRenderList(i),t.pipelines.preBatch(i);var d=r.getTintAppendFloatAlpha,f=t.pipelines.set(i.pipeline,i),p=f.setTexture2D(i.fillPattern,i);f.batchTexture(i,i.fillPattern,i.displayFrame.width*i.tileScaleX,i.displayFrame.height*i.tileScaleY,i.x,i.y,a,h,i.scaleX,i.scaleY,i.rotation,i.flipX,i.flipY,i.scrollFactorX,i.scrollFactorY,i.originX*a,i.originY*h,0,0,a,h,d(i.tintTopLeft,n.alpha*i._alphaTL),d(i.tintTopRight,n.alpha*i._alphaTR),d(i.tintBottomLeft,n.alpha*i._alphaBL),d(i.tintBottomRight,n.alpha*i._alphaBR),i.tintFill,i.tilePositionX%i.displayFrame.width/i.displayFrame.width,i.tilePositionY%i.displayFrame.height/i.displayFrame.height,n,o,!1,p),t.pipelines.postBatch(i)}}},function(t,i){t.exports=function(t,i,n,r){i.updateCanvas(),n.addToRenderList(i),t.batchSprite(i,i.frame,n,r)}},function(t,i,n){var r=n(1),o=n(1);r=n(1095),o=n(1096),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i){t.exports=function(t,i,n,r){i.videoTexture&&(n.addToRenderList(i),i.pipeline.batchSprite(i,n,r))}},function(t,i){t.exports=function(t,i,n,r){i.videoTexture&&(n.addToRenderList(i),t.batchSprite(i,i.frame,n,r))}},function(t,i,n){var r=n(1),o=n(1);r=n(1098),o=n(1099),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i,n){var r=n(19),o=n(114),a=n(81);t.exports=function(t,i,n,h){n.addToRenderList(i);var d=t.pipelines.set(i.pipeline),f=r(i,n,h),p=d.calcMatrix.copyFrom(f.calc),T=i._displayOriginX,b=i._displayOriginY,S=n.alpha*i.alpha;t.pipelines.preBatch(i),i.isFilled&&o(d,p,i,S,T,b),i.isStroked&&a(d,i,S,T,b),t.pipelines.postBatch(i)}},function(t,i,n){var r=n(36),o=n(48),a=n(60),h=n(30);t.exports=function(t,i,n,d){n.addToRenderList(i);var f=t.currentContext;if(h(t,f,i,n,d)){var p=i.radius;f.beginPath(),f.arc(p-i.originX*(2*p),p-i.originY*(2*p),p,r(i._startAngle),r(i._endAngle),i.anticlockwise),i.closePath&&f.closePath(),i.isFilled&&(o(f,i),f.fill()),i.isStroked&&(a(f,i),f.stroke()),f.restore()}}},function(t,i,n){var r=n(1),o=n(1);r=n(1101),o=n(1102),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i,n){var r=n(114),o=n(19),a=n(81);t.exports=function(t,i,n,h){n.addToRenderList(i);var d=t.pipelines.set(i.pipeline),f=o(i,n,h),p=d.calcMatrix.copyFrom(f.calc),T=i._displayOriginX+i._curveBounds.x,b=i._displayOriginY+i._curveBounds.y,S=n.alpha*i.alpha;t.pipelines.preBatch(i),i.isFilled&&r(d,p,i,S,T,b),i.isStroked&&a(d,i,S,T,b),t.pipelines.postBatch(i)}},function(t,i,n){var r=n(48),o=n(60),a=n(30);t.exports=function(t,i,n,h){n.addToRenderList(i);var d=t.currentContext;if(a(t,d,i,n,h)){var f=i._displayOriginX+i._curveBounds.x,p=i._displayOriginY+i._curveBounds.y,T=i.pathData,b=T.length-1,S=T[0]-f,A=T[1]-p;d.beginPath(),d.moveTo(S,A),i.closePath||(b-=2);for(var P=2;P<b;P+=2){var O=T[P]-f,L=T[P+1]-p;d.lineTo(O,L)}i.closePath&&d.closePath(),i.isFilled&&(r(d,i),d.fill()),i.isStroked&&(o(d,i),d.stroke()),d.restore()}}},function(t,i,n){var r=n(1),o=n(1);r=n(1104),o=n(1105),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i,n){var r=n(114),o=n(19),a=n(81);t.exports=function(t,i,n,h){n.addToRenderList(i);var d=t.pipelines.set(i.pipeline),f=o(i,n,h),p=d.calcMatrix.copyFrom(f.calc),T=i._displayOriginX,b=i._displayOriginY,S=n.alpha*i.alpha;t.pipelines.preBatch(i),i.isFilled&&r(d,p,i,S,T,b),i.isStroked&&a(d,i,S,T,b),t.pipelines.postBatch(i)}},function(t,i,n){var r=n(48),o=n(60),a=n(30);t.exports=function(t,i,n,h){n.addToRenderList(i);var d=t.currentContext;if(a(t,d,i,n,h)){var f=i._displayOriginX,p=i._displayOriginY,T=i.pathData,b=T.length-1,S=T[0]-f,A=T[1]-p;d.beginPath(),d.moveTo(S,A),i.closePath||(b-=2);for(var P=2;P<b;P+=2){var O=T[P]-f,L=T[P+1]-p;d.lineTo(O,L)}d.closePath(),i.isFilled&&(r(d,i),d.fill()),i.isStroked&&(o(d,i),d.stroke()),d.restore()}}},function(t,i,n){var r=n(1),o=n(1);r=n(1107),o=n(1108),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i,n){var r=n(19),o=n(12);t.exports=function(t,i,n,a){n.addToRenderList(i);var h=t.pipelines.set(i.pipeline),d=r(i,n,a);h.calcMatrix.copyFrom(d.calc).translate(-i._displayOriginX,-i._displayOriginY);var f,p,T=n.alpha*i.alpha,b=i.width,S=i.height,A=i.cellWidth,P=i.cellHeight,O=Math.ceil(b/A),L=Math.ceil(S/P),D=A,I=P,F=A-(O*A-b),B=P-(L*P-S),N=i.showCells,Y=i.showAltCells,X=i.showOutline,G=0,U=0,V=0,z=0,W=0;if(X&&(D--,I--,F===A&&F--,B===P&&B--),t.pipelines.preBatch(i),N&&i.fillAlpha>0)for(f=h.fillTint,p=o.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*T),f.TL=p,f.TR=p,f.BL=p,f.BR=p,U=0;U<L;U++)for(Y&&(V=U%2),G=0;G<O;G++)Y&&V?V=0:(V++,z=G<O-1?D:F,W=U<L-1?I:B,h.batchFillRect(G*A,U*P,z,W));if(Y&&i.altFillAlpha>0)for(f=h.fillTint,p=o.getTintAppendFloatAlpha(i.altFillColor,i.altFillAlpha*T),f.TL=p,f.TR=p,f.BL=p,f.BR=p,U=0;U<L;U++)for(Y&&(V=U%2),G=0;G<O;G++)!Y||V?(V=0,z=G<O-1?D:F,W=U<L-1?I:B,h.batchFillRect(G*A,U*P,z,W)):V=1;if(X&&i.outlineFillAlpha>0){var H=h.strokeTint,q=o.getTintAppendFloatAlpha(i.outlineFillColor,i.outlineFillAlpha*T);for(H.TL=q,H.TR=q,H.BL=q,H.BR=q,G=1;G<O;G++){var Z=G*A;h.batchLine(Z,0,Z,S,1,1,1,0,!1)}for(U=1;U<L;U++){var K=U*P;h.batchLine(0,K,b,K,1,1,1,0,!1)}}t.pipelines.postBatch(i)}},function(t,i,n){var r=n(48),o=n(60),a=n(30);t.exports=function(t,i,n,h){n.addToRenderList(i);var d=t.currentContext;if(a(t,d,i,n,h)){var f=-i._displayOriginX,p=-i._displayOriginY,T=n.alpha*i.alpha,b=i.width,S=i.height,A=i.cellWidth,P=i.cellHeight,O=Math.ceil(b/A),L=Math.ceil(S/P),D=A,I=P,F=A-(O*A-b),B=P-(L*P-S),N=i.showCells,Y=i.showAltCells,X=i.showOutline,G=0,U=0,V=0,z=0,W=0;if(X&&(D--,I--,F===A&&F--,B===P&&B--),N&&i.fillAlpha>0)for(r(d,i),U=0;U<L;U++)for(Y&&(V=U%2),G=0;G<O;G++)Y&&V?V=0:(V++,z=G<O-1?D:F,W=U<L-1?I:B,d.fillRect(f+G*A,p+U*P,z,W));if(Y&&i.altFillAlpha>0)for(r(d,i,i.altFillColor,i.altFillAlpha*T),U=0;U<L;U++)for(Y&&(V=U%2),G=0;G<O;G++)!Y||V?(V=0,z=G<O-1?D:F,W=U<L-1?I:B,d.fillRect(f+G*A,p+U*P,z,W)):V=1;if(X&&i.outlineFillAlpha>0){for(o(d,i,i.outlineFillColor,i.outlineFillAlpha*T),G=1;G<O;G++){var H=G*A;d.beginPath(),d.moveTo(H+f,p),d.lineTo(H+f,S+p),d.stroke()}for(U=1;U<L;U++){var q=U*P;d.beginPath(),d.moveTo(f,q+p),d.lineTo(f+b,q+p),d.stroke()}}d.restore()}}},function(t,i,n){var r=n(1),o=n(1);r=n(1110),o=n(1111),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i,n){var r=n(19),o=n(12);t.exports=function(t,i,n,a){n.addToRenderList(i);var h,d,f,p,T,b,S,A,P,O=t.pipelines.set(i.pipeline),L=r(i,n,a),D=O.calcMatrix.copyFrom(L.calc),I=i.width,F=i.height,B=I/2,N=I/i.projection,Y=n.alpha*i.alpha;i.isFilled&&(t.pipelines.preBatch(i),i.showTop&&(h=o.getTintAppendFloatAlpha(i.fillTop,Y),d=D.getX(-B,-F),f=D.getY(-B,-F),p=D.getX(0,-N-F),T=D.getY(0,-N-F),b=D.getX(B,-F),S=D.getY(B,-F),A=D.getX(0,N-F),P=D.getY(0,N-F),O.batchQuad(i,d,f,p,T,b,S,A,P,0,0,1,1,h,h,h,h,2)),i.showLeft&&(h=o.getTintAppendFloatAlpha(i.fillLeft,Y),d=D.getX(-B,0),f=D.getY(-B,0),p=D.getX(0,N),T=D.getY(0,N),b=D.getX(0,N-F),S=D.getY(0,N-F),A=D.getX(-B,-F),P=D.getY(-B,-F),O.batchQuad(i,d,f,p,T,b,S,A,P,0,0,1,1,h,h,h,h,2)),i.showRight&&(h=o.getTintAppendFloatAlpha(i.fillRight,Y),d=D.getX(B,0),f=D.getY(B,0),p=D.getX(0,N),T=D.getY(0,N),b=D.getX(0,N-F),S=D.getY(0,N-F),A=D.getX(B,-F),P=D.getY(B,-F),O.batchQuad(i,d,f,p,T,b,S,A,P,0,0,1,1,h,h,h,h,2)),t.pipelines.postBatch(i))}},function(t,i,n){var r=n(48),o=n(30);t.exports=function(t,i,n,a){n.addToRenderList(i);var h=t.currentContext;if(o(t,h,i,n,a)&&i.isFilled){var d=i.width,f=i.height,p=d/2,T=d/i.projection;i.showTop&&(r(h,i,i.fillTop),h.beginPath(),h.moveTo(-p,-f),h.lineTo(0,-T-f),h.lineTo(p,-f),h.lineTo(p,-1),h.lineTo(0,T-1),h.lineTo(-p,-1),h.lineTo(-p,-f),h.fill()),i.showLeft&&(r(h,i,i.fillLeft),h.beginPath(),h.moveTo(-p,0),h.lineTo(0,T),h.lineTo(0,T-f),h.lineTo(-p,-f),h.lineTo(-p,0),h.fill()),i.showRight&&(r(h,i,i.fillRight),h.beginPath(),h.moveTo(p,0),h.lineTo(0,T),h.lineTo(0,T-f),h.lineTo(p,-f),h.lineTo(p,0),h.fill()),h.restore()}}},function(t,i,n){var r=n(1),o=n(1);r=n(1113),o=n(1114),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i,n){var r=n(19),o=n(12);t.exports=function(t,i,n,a){n.addToRenderList(i);var h=t.pipelines.set(i.pipeline),d=r(i,n,a),f=h.calcMatrix.copyFrom(d.calc),p=i.width,T=i.height,b=p/2,S=p/i.projection,A=i.isReversed,P=n.alpha*i.alpha;if(i.isFilled){var O,L,D,I,F,B,N;if(t.pipelines.preBatch(i),i.showTop&&A){O=o.getTintAppendFloatAlpha(i.fillTop,P),L=f.getX(-b,-T),D=f.getY(-b,-T),I=f.getX(0,-S-T),F=f.getY(0,-S-T),B=f.getX(b,-T),N=f.getY(b,-T);var Y=f.getX(0,S-T),X=f.getY(0,S-T);h.batchQuad(i,L,D,I,F,B,N,Y,X,0,0,1,1,O,O,O,O,2)}i.showLeft&&(O=o.getTintAppendFloatAlpha(i.fillLeft,P),A?(L=f.getX(-b,-T),D=f.getY(-b,-T),I=f.getX(0,S),F=f.getY(0,S),B=f.getX(0,S-T),N=f.getY(0,S-T)):(L=f.getX(-b,0),D=f.getY(-b,0),I=f.getX(0,S),F=f.getY(0,S),B=f.getX(0,S-T),N=f.getY(0,S-T)),h.batchTri(i,L,D,I,F,B,N,0,0,1,1,O,O,O,2)),i.showRight&&(O=o.getTintAppendFloatAlpha(i.fillRight,P),A?(L=f.getX(b,-T),D=f.getY(b,-T),I=f.getX(0,S),F=f.getY(0,S),B=f.getX(0,S-T),N=f.getY(0,S-T)):(L=f.getX(b,0),D=f.getY(b,0),I=f.getX(0,S),F=f.getY(0,S),B=f.getX(0,S-T),N=f.getY(0,S-T)),h.batchTri(i,L,D,I,F,B,N,0,0,1,1,O,O,O,2)),t.pipelines.postBatch(i)}}},function(t,i,n){var r=n(48),o=n(30);t.exports=function(t,i,n,a){n.addToRenderList(i);var h=t.currentContext;if(o(t,h,i,n,a)&&i.isFilled){var d=i.width,f=i.height,p=d/2,T=d/i.projection,b=i.isReversed;i.showTop&&b&&(r(h,i,i.fillTop),h.beginPath(),h.moveTo(-p,-f),h.lineTo(0,-T-f),h.lineTo(p,-f),h.lineTo(0,T-f),h.fill()),i.showLeft&&(r(h,i,i.fillLeft),h.beginPath(),b?(h.moveTo(-p,-f),h.lineTo(0,T),h.lineTo(0,T-f)):(h.moveTo(-p,0),h.lineTo(0,T),h.lineTo(0,T-f)),h.fill()),i.showRight&&(r(h,i,i.fillRight),h.beginPath(),b?(h.moveTo(p,-f),h.lineTo(0,T),h.lineTo(0,T-f)):(h.moveTo(p,0),h.lineTo(0,T),h.lineTo(0,T-f)),h.fill()),h.restore()}}},function(t,i,n){var r=n(1),o=n(1);r=n(1116),o=n(1117),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i,n){var r=n(19),o=n(12);t.exports=function(t,i,n,a){n.addToRenderList(i);var h=t.pipelines.set(i.pipeline),d=r(i,n,a);h.calcMatrix.copyFrom(d.calc);var f=i._displayOriginX,p=i._displayOriginY,T=n.alpha*i.alpha;if(t.pipelines.preBatch(i),i.isStroked){var b=h.strokeTint,S=o.getTintAppendFloatAlpha(i.strokeColor,i.strokeAlpha*T);b.TL=S,b.TR=S,b.BL=S,b.BR=S;var A=i._startWidth,P=i._endWidth;h.batchLine(i.geom.x1-f,i.geom.y1-p,i.geom.x2-f,i.geom.y2-p,A,P,1,0,!1,d.sprite,d.camera)}t.pipelines.postBatch(i)}},function(t,i,n){var r=n(60),o=n(30);t.exports=function(t,i,n,a){n.addToRenderList(i);var h=t.currentContext;if(o(t,h,i,n,a)){var d=i._displayOriginX,f=i._displayOriginY;i.isStroked&&(r(h,i),h.beginPath(),h.moveTo(i.geom.x1-d,i.geom.y1-f),h.lineTo(i.geom.x2-d,i.geom.y2-f),h.stroke()),h.restore()}}},function(t,i,n){var r=n(1),o=n(1);r=n(1119),o=n(1120),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i,n){var r=n(114),o=n(19),a=n(81);t.exports=function(t,i,n,h){n.addToRenderList(i);var d=t.pipelines.set(i.pipeline),f=o(i,n,h),p=d.calcMatrix.copyFrom(f.calc),T=i._displayOriginX,b=i._displayOriginY,S=n.alpha*i.alpha;t.pipelines.preBatch(i),i.isFilled&&r(d,p,i,S,T,b),i.isStroked&&a(d,i,S,T,b),t.pipelines.postBatch(i)}},function(t,i,n){var r=n(48),o=n(60),a=n(30);t.exports=function(t,i,n,h){n.addToRenderList(i);var d=t.currentContext;if(a(t,d,i,n,h)){var f=i._displayOriginX,p=i._displayOriginY,T=i.pathData,b=T.length-1,S=T[0]-f,A=T[1]-p;d.beginPath(),d.moveTo(S,A),i.closePath||(b-=2);for(var P=2;P<b;P+=2){var O=T[P]-f,L=T[P+1]-p;d.lineTo(O,L)}d.closePath(),i.isFilled&&(r(d,i),d.fill()),i.isStroked&&(o(d,i),d.stroke()),d.restore()}}},function(t,i,n){var r=n(1),o=n(1);r=n(1122),o=n(1123),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i,n){var r=n(19),o=n(81),a=n(12);t.exports=function(t,i,n,h){n.addToRenderList(i);var d=t.pipelines.set(i.pipeline),f=r(i,n,h);d.calcMatrix.copyFrom(f.calc);var p=i._displayOriginX,T=i._displayOriginY,b=n.alpha*i.alpha;if(t.pipelines.preBatch(i),i.isFilled){var S=d.fillTint,A=a.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*b);S.TL=A,S.TR=A,S.BL=A,S.BR=A,d.batchFillRect(-p,-T,i.width,i.height)}i.isStroked&&o(d,i,b,p,T),t.pipelines.postBatch(i)}},function(t,i,n){var r=n(48),o=n(60),a=n(30);t.exports=function(t,i,n,h){n.addToRenderList(i);var d=t.currentContext;if(a(t,d,i,n,h)){var f=i._displayOriginX,p=i._displayOriginY;i.isFilled&&(r(d,i),d.fillRect(-f,-p,i.width,i.height)),i.isStroked&&(o(d,i),d.beginPath(),d.rect(-f,-p,i.width,i.height),d.stroke()),d.restore()}}},function(t,i,n){var r=n(1),o=n(1);r=n(1125),o=n(1126),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i,n){var r=n(114),o=n(19),a=n(81);t.exports=function(t,i,n,h){n.addToRenderList(i);var d=t.pipelines.set(i.pipeline),f=o(i,n,h),p=d.calcMatrix.copyFrom(f.calc),T=i._displayOriginX,b=i._displayOriginY,S=n.alpha*i.alpha;t.pipelines.preBatch(i),i.isFilled&&r(d,p,i,S,T,b),i.isStroked&&a(d,i,S,T,b),t.pipelines.postBatch(i)}},function(t,i,n){var r=n(48),o=n(60),a=n(30);t.exports=function(t,i,n,h){n.addToRenderList(i);var d=t.currentContext;if(a(t,d,i,n,h)){var f=i._displayOriginX,p=i._displayOriginY,T=i.pathData,b=T.length-1,S=T[0]-f,A=T[1]-p;d.beginPath(),d.moveTo(S,A),i.closePath||(b-=2);for(var P=2;P<b;P+=2){var O=T[P]-f,L=T[P+1]-p;d.lineTo(O,L)}d.closePath(),i.isFilled&&(r(d,i),d.fill()),i.isStroked&&(o(d,i),d.stroke()),d.restore()}}},function(t,i,n){var r=n(1),o=n(1);r=n(1128),o=n(1129),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i,n){var r=n(19),o=n(81),a=n(12);t.exports=function(t,i,n,h){n.addToRenderList(i);var d=t.pipelines.set(i.pipeline),f=r(i,n,h);d.calcMatrix.copyFrom(f.calc);var p=i._displayOriginX,T=i._displayOriginY,b=n.alpha*i.alpha;if(t.pipelines.preBatch(i),i.isFilled){var S=d.fillTint,A=a.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*b);S.TL=A,S.TR=A,S.BL=A,S.BR=A;var P=i.geom.x1-p,O=i.geom.y1-T,L=i.geom.x2-p,D=i.geom.y2-T,I=i.geom.x3-p,F=i.geom.y3-T;d.batchFillTriangle(P,O,L,D,I,F,f.sprite,f.camera)}i.isStroked&&o(d,i,b,p,T),t.pipelines.postBatch(i)}},function(t,i,n){var r=n(48),o=n(60),a=n(30);t.exports=function(t,i,n,h){n.addToRenderList(i);var d=t.currentContext;if(a(t,d,i,n,h)){var f=i._displayOriginX,p=i._displayOriginY,T=i.geom.x1-f,b=i.geom.y1-p,S=i.geom.x2-f,A=i.geom.y2-p,P=i.geom.x3-f,O=i.geom.y3-p;d.beginPath(),d.moveTo(T,b),d.lineTo(S,A),d.lineTo(P,O),d.closePath(),i.isFilled&&(r(d,i),d.fill()),i.isStroked&&(o(d,i),d.stroke()),d.restore()}}},function(t,i,n){var r=n(213);n(5).register("blitter",(function(t,i,n,o){return this.displayList.add(new r(this.scene,t,i,n,o))}))},function(t,i,n){var r=n(214);n(5).register("container",(function(t,i,n){return this.displayList.add(new r(this.scene,t,i,n))}))},function(t,i,n){var r=n(442);n(5).register("dom",(function(t,i,n,o,a){var h=new r(this.scene,t,i,n,o,a);return this.displayList.add(h),h}))},function(t,i,n){var r=n(215);n(5).register("dynamicBitmapText",(function(t,i,n,o,a){return this.displayList.add(new r(this.scene,t,i,n,o,a))}))},function(t,i,n){var r=n(444);n(5).register("extern",(function(){var t=new r(this.scene);return this.displayList.add(t),t}))},function(t,i,n){var r=n(216);n(5).register("graphics",(function(t){return this.displayList.add(new r(this.scene,t))}))},function(t,i,n){var r=n(113);n(5).register("group",(function(t,i){return this.updateList.add(new r(this.scene,t,i))}))},function(t,i,n){var r=n(125);n(5).register("image",(function(t,i,n,o){return this.displayList.add(new r(this.scene,t,i,n,o))}))},function(t,i,n){var r=n(219);n(5).register("layer",(function(t){return this.displayList.add(new r(this.scene,t))}))},function(t,i,n){var r=n(5),o=n(220);r.register("particles",(function(t,i,n){return this.displayList.add(new o(this.scene,t,i,n))}))},function(t,i,n){var r=n(5),o=n(457);r.register("follower",(function(t,i,n,r,a){var h=new o(this.scene,t,i,n,r,a);return this.displayList.add(h),this.updateList.add(h),h}))},function(t,i,n){var r=n(5),o=n(221);r.register("renderTexture",(function(t,i,n,r,a,h){return this.displayList.add(new o(this.scene,t,i,n,r,a,h))}))},function(t,i,n){var r=n(223);n(5).register("rope",(function(t,i,n,o,a,h,d,f){return this.displayList.add(new r(this.scene,t,i,n,o,a,h,d,f))}))},function(t,i,n){var r=n(5),o=n(73);r.register("sprite",(function(t,i,n,r){var a=new o(this.scene,t,i,n,r);return this.displayList.add(a),a}))},function(t,i,n){var r=n(148);n(5).register("bitmapText",(function(t,i,n,o,a,h){return this.displayList.add(new r(this.scene,t,i,n,o,a,h))}))},function(t,i,n){var r=n(224);n(5).register("text",(function(t,i,n,o){return this.displayList.add(new r(this.scene,t,i,n,o))}))},function(t,i,n){var r=n(225);n(5).register("tileSprite",(function(t,i,n,o,a,h){return this.displayList.add(new r(this.scene,t,i,n,o,a,h))}))},function(t,i,n){var r=n(129);n(5).register("zone",(function(t,i,n,o){return this.displayList.add(new r(this.scene,t,i,n,o))}))},function(t,i,n){var r=n(226);n(5).register("video",(function(t,i,n){return this.displayList.add(new r(this.scene,t,i,n))}))},function(t,i,n){var r=n(461),o=n(5);o.register("arc",(function(t,i,n,o,a,h,d,f){return this.displayList.add(new r(this.scene,t,i,n,o,a,h,d,f))})),o.register("circle",(function(t,i,n,o,a){return this.displayList.add(new r(this.scene,t,i,n,0,360,!1,o,a))}))},function(t,i,n){var r=n(5),o=n(462);r.register("curve",(function(t,i,n,r,a){return this.displayList.add(new o(this.scene,t,i,n,r,a))}))},function(t,i,n){var r=n(463);n(5).register("ellipse",(function(t,i,n,o,a,h){return this.displayList.add(new r(this.scene,t,i,n,o,a,h))}))},function(t,i,n){var r=n(5),o=n(464);r.register("grid",(function(t,i,n,r,a,h,d,f,p,T){return this.displayList.add(new o(this.scene,t,i,n,r,a,h,d,f,p,T))}))},function(t,i,n){var r=n(5),o=n(465);r.register("isobox",(function(t,i,n,r,a,h,d){return this.displayList.add(new o(this.scene,t,i,n,r,a,h,d))}))},function(t,i,n){var r=n(5),o=n(466);r.register("isotriangle",(function(t,i,n,r,a,h,d,f){return this.displayList.add(new o(this.scene,t,i,n,r,a,h,d,f))}))},function(t,i,n){var r=n(5),o=n(467);r.register("line",(function(t,i,n,r,a,h,d,f){return this.displayList.add(new o(this.scene,t,i,n,r,a,h,d,f))}))},function(t,i,n){var r=n(5),o=n(468);r.register("polygon",(function(t,i,n,r,a){return this.displayList.add(new o(this.scene,t,i,n,r,a))}))},function(t,i,n){var r=n(5),o=n(473);r.register("rectangle",(function(t,i,n,r,a,h){return this.displayList.add(new o(this.scene,t,i,n,r,a,h))}))},function(t,i,n){var r=n(474);n(5).register("star",(function(t,i,n,o,a,h,d){return this.displayList.add(new r(this.scene,t,i,n,o,a,h,d))}))},function(t,i,n){var r=n(5),o=n(475);r.register("triangle",(function(t,i,n,r,a,h,d,f,p,T){return this.displayList.add(new o(this.scene,t,i,n,r,a,h,d,f,p,T))}))},function(t,i,n){var r=n(213),o=n(28),a=n(16),h=n(13);a.register("blitter",(function(t,i){void 0===t&&(t={});var n=h(t,"key",null),a=h(t,"frame",null),d=new r(this.scene,0,0,n,a);return void 0!==i&&(t.add=i),o(this.scene,d,t),d}))},function(t,i,n){var r=n(28),o=n(214),a=n(16),h=n(13);a.register("container",(function(t,i){void 0===t&&(t={});var n=h(t,"x",0),a=h(t,"y",0),d=h(t,"children",null),f=new o(this.scene,n,a,d);return void 0!==i&&(t.add=i),r(this.scene,f,t),f}))},function(t,i,n){var r=n(215),o=n(28),a=n(16),h=n(13);a.register("dynamicBitmapText",(function(t,i){void 0===t&&(t={});var n=h(t,"font",""),a=h(t,"text",""),d=h(t,"size",!1),f=new r(this.scene,0,0,n,a,d);return void 0!==i&&(t.add=i),o(this.scene,f,t),f}))},function(t,i,n){var r=n(16),o=n(216);r.register("graphics",(function(t,i){void 0===t&&(t={}),void 0!==i&&(t.add=i);var n=new o(this.scene,t);return t.add&&this.scene.sys.displayList.add(n),n}))},function(t,i,n){var r=n(16),o=n(113);r.register("group",(function(t){return new o(this.scene,null,t)}))},function(t,i,n){var r=n(28),o=n(16),a=n(13),h=n(125);o.register("image",(function(t,i){void 0===t&&(t={});var n=a(t,"key",null),o=a(t,"frame",null),d=new h(this.scene,0,0,n,o);return void 0!==i&&(t.add=i),r(this.scene,d,t),d}))},function(t,i,n){var r=n(28),o=n(219),a=n(16),h=n(13);a.register("layer",(function(t,i){void 0===t&&(t={});var n=h(t,"children",null),a=new o(this.scene,n);return void 0!==i&&(t.add=i),r(this.scene,a,t),a}))},function(t,i,n){var r=n(16),o=n(13),a=n(2),h=n(220);r.register("particles",(function(t,i){void 0===t&&(t={});var n=o(t,"key",null),r=o(t,"frame",null),d=a(t,"emitters",null),f=new h(this.scene,n,r,d);return void 0!==i&&(t.add=i),a(t,"add",!1)?this.displayList.add(f):this.updateList.add(f),f}))},function(t,i,n){var r=n(28),o=n(16),a=n(13),h=n(221);o.register("renderTexture",(function(t,i){void 0===t&&(t={});var n=a(t,"x",0),o=a(t,"y",0),d=a(t,"width",32),f=a(t,"height",32),p=a(t,"key",void 0),T=a(t,"frame",void 0),b=new h(this.scene,n,o,d,f,p,T);return void 0!==i&&(t.add=i),r(this.scene,b,t),b}))},function(t,i,n){var r=n(28),o=n(16),a=n(13),h=n(6),d=n(223);o.register("rope",(function(t,i){void 0===t&&(t={});var n=a(t,"key",null),o=a(t,"frame",null),f=a(t,"horizontal",!0),p=h(t,"points",void 0),T=h(t,"colors",void 0),b=h(t,"alphas",void 0),S=new d(this.scene,0,0,n,o,p,f,T,b);return void 0!==i&&(t.add=i),r(this.scene,S,t),t.add||this.updateList.add(S),S}))},function(t,i,n){var r=n(28),o=n(439),a=n(16),h=n(13),d=n(73);a.register("sprite",(function(t,i){void 0===t&&(t={});var n=h(t,"key",null),a=h(t,"frame",null),f=new d(this.scene,0,0,n,a);return void 0!==i&&(t.add=i),r(this.scene,f,t),o(f,t),f}))},function(t,i,n){var r=n(148),o=n(28),a=n(16),h=n(13),d=n(6);a.register("bitmapText",(function(t,i){void 0===t&&(t={});var n=d(t,"font",""),a=h(t,"text",""),f=h(t,"size",!1),p=d(t,"align",0),T=new r(this.scene,0,0,n,a,f,p);return void 0!==i&&(t.add=i),o(this.scene,T,t),T}))},function(t,i,n){var r=n(28),o=n(16),a=n(13),h=n(224);o.register("text",(function(t,i){void 0===t&&(t={});var n=a(t,"text",""),o=a(t,"style",null),d=a(t,"padding",null);null!==d&&(o.padding=d);var f=new h(this.scene,0,0,n,o);return void 0!==i&&(t.add=i),r(this.scene,f,t),f.autoRound=a(t,"autoRound",!0),f.resolution=a(t,"resolution",1),f}))},function(t,i,n){var r=n(28),o=n(16),a=n(13),h=n(225);o.register("tileSprite",(function(t,i){void 0===t&&(t={});var n=a(t,"x",0),o=a(t,"y",0),d=a(t,"width",512),f=a(t,"height",512),p=a(t,"key",""),T=a(t,"frame",""),b=new h(this.scene,n,o,d,f,p,T);return void 0!==i&&(t.add=i),r(this.scene,b,t),b}))},function(t,i,n){var r=n(16),o=n(13),a=n(129);r.register("zone",(function(t){var i=o(t,"x",0),n=o(t,"y",0),r=o(t,"width",1),h=o(t,"height",r);return new a(this.scene,i,n,r,h)}))},function(t,i,n){var r=n(28),o=n(16),a=n(13),h=n(226);o.register("video",(function(t,i){void 0===t&&(t={});var n=a(t,"key",null),o=new h(this.scene,0,0,n);return void 0!==i&&(t.add=i),r(this.scene,o,t),t.add||this.updateList.add(o),o}))},function(t,i,n){var r=n(1),o=n(1);r=n(1177),o=n(1178),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i,n){var r=n(19);t.exports=function(t,i,n,o){if(i.shader){if(n.addToRenderList(i),t.pipelines.clear(),i.renderToTexture)i.load(),i.flush();else{var a=r(i,n,o).calc;t.width===i._rendererWidth&&t.height===i._rendererHeight||i.projOrtho(0,t.width,t.height,0),i.load(a.matrix),i.flush()}t.pipelines.rebind()}}},function(t,i){t.exports=function(){}},function(t,i,n){var r=n(1),o=n(1);r=n(1180),o=n(1181),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i,n){var r=n(19);t.exports=function(t,i,n,o){var a=i.faces,h=a.length;if(0!==h){n.addToRenderList(i);var d=t.pipelines.set(i.pipeline,i),f=r(i,n,o).calc,p=d.setGameObject(i),T=d.vertexViewF32,b=d.vertexViewU32,S=d.vertexCount*d.currentShader.vertexComponentCount-1,A=i.tintFill,P=[],O=i.debugCallback,L=f.a,D=f.b,I=f.c,F=f.d,B=f.e,N=f.f,Y=i.viewPosition.z,X=i.hideCCW,G=n.roundPixels,U=n.alpha*i.alpha,V=0;t.pipelines.preBatch(i);for(var z=0;z<h;z++){var W=a[z];W.isInView(n,X,Y,U,L,D,I,F,B,N,G)&&(d.shouldFlush(3)&&(d.flush(),S=0),S=W.load(T,b,S,p,A),V++,d.vertexCount+=3,O&&P.push(W))}i.totalFrame+=V,O&&O.call(i,i,P),t.pipelines.postBatch(i)}}},function(t,i){t.exports=function(){}},function(t,i,n){var r=n(1),o=n(1);r=n(1183),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i,n){var r=n(19);t.exports=function(t,i,n,o){n.addToRenderList(i);var a=t.pipelines.set(i.pipeline),h=r(i,n,o).calc,d=i.width,f=i.height,p=-i._radius,T=-i._radius,b=p+d,S=T+f,A=h.getX(0,0),P=h.getY(0,0),O=h.getX(p,T),L=h.getY(p,T),D=h.getX(p,S),I=h.getY(p,S),F=h.getX(b,S),B=h.getY(b,S),N=h.getX(b,T),Y=h.getY(b,T);t.pipelines.preBatch(i),a.batchPointLight(i,n,O,L,D,I,F,B,N,Y,A,P),t.pipelines.postBatch(i)}},function(t,i,n){var r=n(229);n(5).register("shader",(function(t,i,n,o,a,h,d){return this.displayList.add(new r(this.scene,t,i,n,o,a,h,d))}))},function(t,i,n){var r=n(230);n(5).register("mesh",(function(t,i,n,o,a,h,d,f,p,T,b){return this.displayList.add(new r(this.scene,t,i,n,o,a,h,d,f,p,T,b))}))},function(t,i,n){var r=n(5),o=n(150);r.register("pointlight",(function(t,i,n,r,a,h){return this.displayList.add(new o(this.scene,t,i,n,r,a,h))}))},function(t,i,n){var r=n(28),o=n(16),a=n(13),h=n(229);o.register("shader",(function(t,i){void 0===t&&(t={});var n=a(t,"key",null),o=a(t,"x",0),d=a(t,"y",0),f=a(t,"width",128),p=a(t,"height",128),T=new h(this.scene,n,o,d,f,p);return void 0!==i&&(t.add=i),r(this.scene,T,t),T}))},function(t,i,n){var r=n(28),o=n(16),a=n(13),h=n(6),d=n(230);o.register("mesh",(function(t,i){void 0===t&&(t={});var n=a(t,"key",null),o=a(t,"frame",null),f=h(t,"vertices",[]),p=h(t,"uvs",[]),T=h(t,"indicies",[]),b=h(t,"containsZ",!1),S=h(t,"normals",[]),A=h(t,"colors",16777215),P=h(t,"alphas",1),O=new d(this.scene,0,0,n,o,f,p,T,b,S,A,P);return void 0!==i&&(t.add=i),r(this.scene,O,t),O}))},function(t,i,n){var r=n(28),o=n(16),a=n(13),h=n(150);o.register("pointlight",(function(t,i){void 0===t&&(t={});var n=a(t,"color",16777215),o=a(t,"radius",128),d=a(t,"intensity",1),f=a(t,"attenuation",.1),p=new h(this.scene,0,0,n,o,d,f);return void 0!==i&&(t.add=i),r(this.scene,p,t),p}))},function(t,i,n){var r=n(0),o=n(482),a=n(24),h=n(20),d=new r({Extends:o,initialize:function LightsPlugin2(t){this.scene=t,this.systems=t.sys,t.sys.settings.isBooted||t.sys.events.once(h.BOOT,this.boot,this),o.call(this)},boot:function(){var t=this.systems.events;t.on(h.SHUTDOWN,this.shutdown,this),t.on(h.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});a.register("LightsPlugin",d,"lights"),t.exports=d},function(t,i,n){var r=n(65);r.Area=n(1192),r.Circumference=n(302),r.CircumferencePoint=n(169),r.Clone=n(1193),r.Contains=n(66),r.ContainsPoint=n(1194),r.ContainsRect=n(1195),r.CopyFrom=n(1196),r.Equals=n(1197),r.GetBounds=n(1198),r.GetPoint=n(300),r.GetPoints=n(301),r.Offset=n(1199),r.OffsetPoint=n(1200),r.Random=n(170),t.exports=r},function(t,i){t.exports=function(t){return t.radius>0?Math.PI*t.radius*t.radius:0}},function(t,i,n){var r=n(65);t.exports=function(t){return new r(t.x,t.y,t.radius)}},function(t,i,n){var r=n(66);t.exports=function(t,i){return r(t,i.x,i.y)}},function(t,i,n){var r=n(66);t.exports=function(t,i){return r(t,i.x,i.y)&&r(t,i.right,i.y)&&r(t,i.x,i.bottom)&&r(t,i.right,i.bottom)}},function(t,i){t.exports=function(t,i){return i.setTo(t.x,t.y,t.radius)}},function(t,i){t.exports=function(t,i){return t.x===i.x&&t.y===i.y&&t.radius===i.radius}},function(t,i,n){var r=n(10);t.exports=function(t,i){return void 0===i&&(i=new r),i.x=t.left,i.y=t.top,i.width=t.diameter,i.height=t.diameter,i}},function(t,i){t.exports=function(t,i,n){return t.x+=i,t.y+=n,t}},function(t,i){t.exports=function(t,i){return t.x+=i.x,t.y+=i.y,t}},function(t,i,n){var r=n(111);r.Area=n(1202),r.Circumference=n(447),r.CircumferencePoint=n(218),r.Clone=n(1203),r.Contains=n(112),r.ContainsPoint=n(1204),r.ContainsRect=n(1205),r.CopyFrom=n(1206),r.Equals=n(1207),r.GetBounds=n(1208),r.GetPoint=n(445),r.GetPoints=n(446),r.Offset=n(1209),r.OffsetPoint=n(1210),r.Random=n(180),t.exports=r},function(t,i){t.exports=function(t){return t.isEmpty()?0:t.getMajorRadius()*t.getMinorRadius()*Math.PI}},function(t,i,n){var r=n(111);t.exports=function(t){return new r(t.x,t.y,t.width,t.height)}},function(t,i,n){var r=n(112);t.exports=function(t,i){return r(t,i.x,i.y)}},function(t,i,n){var r=n(112);t.exports=function(t,i){return r(t,i.x,i.y)&&r(t,i.right,i.y)&&r(t,i.x,i.bottom)&&r(t,i.right,i.bottom)}},function(t,i){t.exports=function(t,i){return i.setTo(t.x,t.y,t.width,t.height)}},function(t,i){t.exports=function(t,i){return t.x===i.x&&t.y===i.y&&t.width===i.width&&t.height===i.height}},function(t,i,n){var r=n(10);t.exports=function(t,i){return void 0===i&&(i=new r),i.x=t.left,i.y=t.top,i.width=t.width,i.height=t.height,i}},function(t,i){t.exports=function(t,i,n){return t.x+=i,t.y+=n,t}},function(t,i){t.exports=function(t,i){return t.x+=i.x,t.y+=i.y,t}},function(t,i,n){var r=n(4),o=n(231);t.exports=function(t,i,n){if(void 0===n&&(n=[]),o(t,i)){var a,h,d,f,p=t.x,T=t.y,b=t.radius,S=i.x,A=i.y,P=i.radius;if(T===A)0==(d=(h=-2*A)*h-4*(a=1)*(S*S+(f=(P*P-b*b-S*S+p*p)/(2*(p-S)))*f-2*S*f+A*A-P*P))?n.push(new r(f,-h/(2*a))):d>0&&(n.push(new r(f,(-h+Math.sqrt(d))/(2*a))),n.push(new r(f,(-h-Math.sqrt(d))/(2*a))));else{var O=(p-S)/(T-A),L=(P*P-b*b-S*S+p*p-A*A+T*T)/(2*(T-A));0==(d=(h=2*T*O-2*L*O-2*p)*h-4*(a=O*O+1)*(p*p+T*T+L*L-b*b-2*T*L))?(f=-h/(2*a),n.push(new r(f,L-f*O))):d>0&&(f=(-h+Math.sqrt(d))/(2*a),n.push(new r(f,L-f*O)),f=(-h-Math.sqrt(d))/(2*a),n.push(new r(f,L-f*O)))}}return n}},function(t,i,n){var r=n(232),o=n(151);t.exports=function(t,i,n){if(void 0===n&&(n=[]),o(t,i)){var a=i.getLineA(),h=i.getLineB(),d=i.getLineC(),f=i.getLineD();r(a,t,n),r(h,t,n),r(d,t,n),r(f,t,n)}return n}},function(t,i,n){var r=n(140),o=n(487),a=new(n(47));function CheckIntersects(t,i,n,h,d){var f=Math.cos(t),p=Math.sin(t);a.setTo(i,n,i+f,n+p);var T=o(a,h);T&&d.push(new r(T.x,T.y,t,T.w))}function SortIntersects(t,i){return t.z-i.z}t.exports=function(t,i,n){Array.isArray(n)||(n=[n]);for(var r=[],o=[],a=0;a<n.length;a++)for(var h=n[a].points,d=0;d<h.length;d++){var f=Math.atan2(h[d].y-i,h[d].x-t);-1===o.indexOf(f)&&(CheckIntersects(f,t,i,n,r),CheckIntersects(f-1e-5,t,i,n,r),CheckIntersects(f+1e-5,t,i,n,r),o.push(f))}return r.sort(SortIntersects)}},function(t,i,n){var r=n(10),o=n(152);t.exports=function(t,i,n){return void 0===n&&(n=new r),o(t,i)&&(n.x=Math.max(t.x,i.x),n.y=Math.max(t.y,i.y),n.width=Math.min(t.right,i.right)-n.x,n.height=Math.min(t.bottom,i.bottom)-n.y),n}},function(t,i,n){var r=n(234),o=n(152);t.exports=function(t,i,n){if(void 0===n&&(n=[]),o(t,i)){var a=t.getLineA(),h=t.getLineB(),d=t.getLineC(),f=t.getLineD();r(a,i,n),r(h,i,n),r(d,i,n),r(f,i,n)}return n}},function(t,i,n){var r=n(489),o=n(234);t.exports=function(t,i,n){if(void 0===n&&(n=[]),r(t,i)){var a=i.getLineA(),h=i.getLineB(),d=i.getLineC();o(a,t,n),o(h,t,n),o(d,t,n)}return n}},function(t,i,n){var r=n(232),o=n(491);t.exports=function(t,i,n){if(void 0===n&&(n=[]),o(t,i)){var a=t.getLineA(),h=t.getLineB(),d=t.getLineC();r(a,i,n),r(h,i,n),r(d,i,n)}return n}},function(t,i,n){var r=n(494),o=n(492);t.exports=function(t,i,n){if(void 0===n&&(n=[]),r(t,i)){var a=i.getLineA(),h=i.getLineB(),d=i.getLineC();o(t,a,n),o(t,h,n),o(t,d,n)}return n}},function(t,i,n){var r=n(496);t.exports=function(t,i){if(!r(t,i))return!1;var n=Math.min(i.x1,i.x2),o=Math.max(i.x1,i.x2),a=Math.min(i.y1,i.y2),h=Math.max(i.y1,i.y2);return t.x>=n&&t.x<=o&&t.y>=a&&t.y<=h}},function(t,i){t.exports=function(t,i,n,r,o,a){return void 0===a&&(a=0),!(i>t.right+a||n<t.left-a||r>t.bottom+a||o<t.top-a)}},function(t,i,n){var r=n(47);r.Angle=n(97),r.BresenhamPoints=n(317),r.CenterOn=n(1222),r.Clone=n(1223),r.CopyFrom=n(1224),r.Equals=n(1225),r.Extend=n(1226),r.GetEasedPoints=n(1227),r.GetMidPoint=n(1228),r.GetNearestPoint=n(1229),r.GetNormal=n(1230),r.GetPoint=n(307),r.GetPoints=n(172),r.GetShortestDistance=n(1231),r.Height=n(1232),r.Length=n(67),r.NormalAngle=n(497),r.NormalX=n(1233),r.NormalY=n(1234),r.Offset=n(1235),r.PerpSlope=n(1236),r.Random=n(173),r.ReflectAngle=n(1237),r.Rotate=n(1238),r.RotateAroundPoint=n(1239),r.RotateAroundXY=n(236),r.SetToAngle=n(1240),r.Slope=n(1241),r.Width=n(1242),t.exports=r},function(t,i){t.exports=function(t,i,n){var r=i-(t.x1+t.x2)/2,o=n-(t.y1+t.y2)/2;return t.x1+=r,t.y1+=o,t.x2+=r,t.y2+=o,t}},function(t,i,n){var r=n(47);t.exports=function(t){return new r(t.x1,t.y1,t.x2,t.y2)}},function(t,i){t.exports=function(t,i){return i.setTo(t.x1,t.y1,t.x2,t.y2)}},function(t,i){t.exports=function(t,i){return t.x1===i.x1&&t.y1===i.y1&&t.x2===i.x2&&t.y2===i.y2}},function(t,i,n){var r=n(67);t.exports=function(t,i,n){void 0===n&&(n=i);var o=r(t),a=t.x2-t.x1,h=t.y2-t.y1;return i&&(t.x1=t.x1-a/o*i,t.y1=t.y1-h/o*i),n&&(t.x2=t.x2+a/o*n,t.y2=t.y2+h/o*n),t}},function(t,i,n){var r=n(352),o=n(80),a=n(4);t.exports=function(t,i,n,h,d){void 0===h&&(h=0),void 0===d&&(d=[]);var f,p,T=[],b=t.x1,S=t.y1,A=t.x2-b,P=t.y2-S,O=o(i,d),L=n-1;for(f=0;f<L;f++)p=O(f/L),T.push(new a(b+A*p,S+P*p));if(p=O(1),T.push(new a(b+A*p,S+P*p)),h>0){var D=T[0],I=[D];for(f=1;f<T.length-1;f++){var F=T[f];r(D,F)>=h&&(I.push(F),D=F)}var B=T[T.length-1];return r(D,B)<h&&I.pop(),I.push(B),I}return T}},function(t,i,n){var r=n(4);t.exports=function(t,i){return void 0===i&&(i=new r),i.x=(t.x1+t.x2)/2,i.y=(t.y1+t.y2)/2,i}},function(t,i,n){var r=n(4);t.exports=function(t,i,n){void 0===n&&(n=new r);var o=t.x1,a=t.y1,h=t.x2,d=t.y2,f=(h-o)*(h-o)+(d-a)*(d-a);if(0===f)return n;var p=((i.x-o)*(h-o)+(i.y-a)*(d-a))/f;return n.x=o+p*(h-o),n.y=a+p*(d-a),n}},function(t,i,n){var r=n(14),o=n(97),a=n(4);t.exports=function(t,i){void 0===i&&(i=new a);var n=o(t)-r.TAU;return i.x=Math.cos(n),i.y=Math.sin(n),i}},function(t,i){t.exports=function(t,i){var n=t.x1,r=t.y1,o=t.x2,a=t.y2,h=(o-n)*(o-n)+(a-r)*(a-r);if(0===h)return!1;var d=((r-i.y)*(o-n)-(n-i.x)*(a-r))/h;return Math.abs(d)*Math.sqrt(h)}},function(t,i){t.exports=function(t){return Math.abs(t.y1-t.y2)}},function(t,i,n){var r=n(14),o=n(97);t.exports=function(t){return Math.cos(o(t)-r.TAU)}},function(t,i,n){var r=n(14),o=n(97);t.exports=function(t){return Math.sin(o(t)-r.TAU)}},function(t,i){t.exports=function(t,i,n){return t.x1+=i,t.y1+=n,t.x2+=i,t.y2+=n,t}},function(t,i){t.exports=function(t){return-(t.x2-t.x1)/(t.y2-t.y1)}},function(t,i,n){var r=n(97),o=n(497);t.exports=function(t,i){return 2*o(i)-Math.PI-r(t)}},function(t,i,n){var r=n(236);t.exports=function(t,i){var n=(t.x1+t.x2)/2,o=(t.y1+t.y2)/2;return r(t,n,o,i)}},function(t,i,n){var r=n(236);t.exports=function(t,i,n){return r(t,i.x,i.y,n)}},function(t,i){t.exports=function(t,i,n,r,o){return t.x1=i,t.y1=n,t.x2=i+Math.cos(r)*o,t.y2=n+Math.sin(r)*o,t}},function(t,i){t.exports=function(t){return(t.y2-t.y1)/(t.x2-t.x1)}},function(t,i){t.exports=function(t){return Math.abs(t.x1-t.x2)}},function(t,i,n){var r={Face:n(116),GenerateGridVerts:n(1244),GenerateObjVerts:n(480),GenerateVerts:n(479),ParseObj:n(498),ParseObjMaterial:n(499),RotateFace:n(1245),Vertex:n(117)};t.exports=r},function(t,i,n){var r=n(116),o=n(2),a=n(69),h=n(39),d=n(117),f=new h,p=new h,T=new a;t.exports=function(t){var i=o(t,"mesh"),n=o(t,"texture",null),a=o(t,"frame"),h=o(t,"width",1),b=o(t,"height",h),S=o(t,"widthSegments",1),A=o(t,"heightSegments",S),P=o(t,"x",0),O=o(t,"y",0),L=o(t,"z",0),D=o(t,"rotateX",0),I=o(t,"rotateY",0),F=o(t,"rotateZ",0),B=o(t,"zIsUp",!0),N=o(t,"isOrtho",!!i&&i.dirtyCache[11]),Y=o(t,"colors",[16777215]),X=o(t,"alphas",[1]),G=o(t,"tile",!1),U=o(t,"flipY",!1),V=o(t,"width",null),z={faces:[],verts:[]};if(f.set(P,O,L),p.set(D,I,F),T.fromRotationXYTranslation(p,f,B),!n&&i)n=i.texture;else{if(!i||"string"!=typeof n)return z;n=i.scene.sys.textures.get(n)}var W=n.get(a);!V&&N&&n&&i&&(h=W.width/i.height,b=W.height/i.height);var H,q,Z=h/2,K=b/2,J=Math.floor(S),Q=Math.floor(A),$=J+1,tt=Q+1,et=h/J,it=b/Q,nt=[],st=[],rt=0,ot=1,at=0,ht=1;W&&(rt=W.u0,ot=W.u1,U?(at=W.v1,ht=W.v0):(at=W.v0,ht=W.v1));var lt=ot-rt,ut=ht-at;for(q=0;q<tt;q++){var ct=q*it-K;for(H=0;H<$;H++){var dt=H*et-Z;st.push(dt,-ct);var ft=rt+lt*(H/J),pt=at+ut*(q/Q);nt.push(ft,pt)}}Array.isArray(Y)||(Y=[Y]),Array.isArray(X)||(X=[X]);var gt=0,vt=0;for(q=0;q<Q;q++)for(H=0;H<J;H++){var mt=2*(H+$*q),yt=2*(H+$*(q+1)),xt=2*(H+1+$*(q+1)),Tt=2*(H+1+$*q),wt=Y[vt],bt=X[gt],St=new d(st[mt],st[mt+1],0,nt[mt],nt[mt+1],wt,bt).transformMat4(T),Mt=new d(st[yt],st[yt+1],0,nt[yt],nt[yt+1],wt,bt).transformMat4(T),Et=new d(st[Tt],st[Tt+1],0,nt[Tt],nt[Tt+1],wt,bt).transformMat4(T),Ct=new d(st[yt],st[yt+1],0,nt[yt],nt[yt+1],wt,bt).transformMat4(T),At=new d(st[xt],st[xt+1],0,nt[xt],nt[xt+1],wt,bt).transformMat4(T),_t=new d(st[Tt],st[Tt+1],0,nt[Tt],nt[Tt+1],wt,bt).transformMat4(T);G&&(St.setUVs(rt,ht),Mt.setUVs(rt,at),Et.setUVs(ot,ht),Ct.setUVs(rt,at),At.setUVs(ot,at),_t.setUVs(ot,ht)),++vt===Y.length&&(vt=0),++gt===X.length&&(gt=0),z.verts.push(St,Mt,Et,Ct,At,_t),z.faces.push(new r(St,Mt,Et),new r(Ct,At,_t))}return i&&(i.faces=i.faces.concat(z.faces),i.vertices=i.vertices.concat(z.verts)),z}},function(t,i){t.exports=function(t,i,n,r){var o,a;if(void 0===n&&void 0===r){var h=t.getInCenter();o=h.x,a=h.y}var d=Math.cos(i),f=Math.sin(i),p=t.vertex1,T=t.vertex2,b=t.vertex3,S=p.x-o,A=p.y-a;p.set(S*d-A*f+o,S*f+A*d+a),S=T.x-o,A=T.y-a,T.set(S*d-A*f+o,S*f+A*d+a),S=b.x-o,A=b.y-a,b.set(S*d-A*f+o,S*f+A*d+a)}},function(t,i,n){var r=n(4);r.Ceil=n(1247),r.Clone=n(1248),r.CopyFrom=n(1249),r.Equals=n(1250),r.Floor=n(1251),r.GetCentroid=n(1252),r.GetMagnitude=n(500),r.GetMagnitudeSq=n(501),r.GetRectangleFromPoints=n(1253),r.Interpolate=n(1254),r.Invert=n(1255),r.Negative=n(1256),r.Project=n(1257),r.ProjectUnit=n(1258),r.SetMagnitude=n(1259),t.exports=r},function(t,i){t.exports=function(t){return t.setTo(Math.ceil(t.x),Math.ceil(t.y))}},function(t,i,n){var r=n(4);t.exports=function(t){return new r(t.x,t.y)}},function(t,i){t.exports=function(t,i){return i.setTo(t.x,t.y)}},function(t,i){t.exports=function(t,i){return t.x===i.x&&t.y===i.y}},function(t,i){t.exports=function(t){return t.setTo(Math.floor(t.x),Math.floor(t.y))}},function(t,i,n){var r=n(4);t.exports=function(t,i){if(void 0===i&&(i=new r),!Array.isArray(t))throw new Error("GetCentroid points argument must be an array");var n=t.length;if(n<1)throw new Error("GetCentroid points array must not be empty");if(1===n)i.x=t[0].x,i.y=t[0].y;else{for(var o=0;o<n;o++)i.x+=t[o].x,i.y+=t[o].y;i.x/=n,i.y/=n}return i}},function(t,i,n){var r=n(10);t.exports=function(t,i){void 0===i&&(i=new r);for(var n=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,h=Number.POSITIVE_INFINITY,d=0;d<t.length;d++){var f=t[d];f.x>n&&(n=f.x),f.x<o&&(o=f.x),f.y>a&&(a=f.y),f.y<h&&(h=f.y)}return i.x=o,i.y=h,i.width=n-o,i.height=a-h,i}},function(t,i,n){var r=n(4);t.exports=function(t,i,n,o){return void 0===n&&(n=0),void 0===o&&(o=new r),o.x=t.x+(i.x-t.x)*n,o.y=t.y+(i.y-t.y)*n,o}},function(t,i){t.exports=function(t){return t.setTo(t.y,t.x)}},function(t,i,n){var r=n(4);t.exports=function(t,i){return void 0===i&&(i=new r),i.setTo(-t.x,-t.y)}},function(t,i,n){var r=n(4),o=n(501);t.exports=function(t,i,n){void 0===n&&(n=new r);var a=(t.x*i.x+t.y*i.y)/o(i);return 0!==a&&(n.x=a*i.x,n.y=a*i.y),n}},function(t,i,n){var r=n(4);t.exports=function(t,i,n){void 0===n&&(n=new r);var o=t.x*i.x+t.y*i.y;return 0!==o&&(n.x=o*i.x,n.y=o*i.y),n}},function(t,i,n){var r=n(500);t.exports=function(t,i){if(0!==t.x||0!==t.y){var n=r(t);t.x/=n,t.y/=n}return t.x*=i,t.y*=i,t}},function(t,i,n){var r=n(227);r.Clone=n(1261),r.Contains=n(228),r.ContainsPoint=n(1262),r.Earcut=n(59),r.GetAABB=n(469),r.GetNumberArray=n(1263),r.GetPoints=n(470),r.Perimeter=n(471),r.Reverse=n(1264),r.Simplify=n(1265),r.Smooth=n(472),r.Translate=n(1266),t.exports=r},function(t,i,n){var r=n(227);t.exports=function(t){return new r(t.points)}},function(t,i,n){var r=n(228);t.exports=function(t,i){return r(t,i.x,i.y)}},function(t,i){t.exports=function(t,i){void 0===i&&(i=[]);for(var n=0;n<t.points.length;n++)i.push(t.points[n].x),i.push(t.points[n].y);return i}},function(t,i){t.exports=function(t){return t.points.reverse(),t}},function(t,i){function getSqSegDist(t,i,n){var r=i.x,o=i.y,a=n.x-r,h=n.y-o;if(0!==a||0!==h){var d=((t.x-r)*a+(t.y-o)*h)/(a*a+h*h);d>1?(r=n.x,o=n.y):d>0&&(r+=a*d,o+=h*d)}return(a=t.x-r)*a+(h=t.y-o)*h}function simplifyDPStep(t,i,n,r,o){for(var a,h=r,d=i+1;d<n;d++){var f=getSqSegDist(t[d],t[i],t[n]);f>h&&(a=d,h=f)}h>r&&(a-i>1&&simplifyDPStep(t,i,a,r,o),o.push(t[a]),n-a>1&&simplifyDPStep(t,a,n,r,o))}function simplifyDouglasPeucker(t,i){var n=t.length-1,r=[t[0]];return simplifyDPStep(t,0,n,i,r),r.push(t[n]),r}t.exports=function(t,i,n){void 0===i&&(i=1),void 0===n&&(n=!1);var r=t.points;if(r.length>2){var o=i*i;n||(r=function simplifyRadialDist(t,i){for(var n,r,o,a,h,d=t[0],f=[d],p=1,T=t.length;p<T;p++)n=t[p],o=d,a=void 0,h=void 0,a=(r=n).x-o.x,h=r.y-o.y,a*a+h*h>i&&(f.push(n),d=n);return d!==n&&f.push(n),f}(r,o)),t.setTo(simplifyDouglasPeucker(r,o))}return t}},function(t,i){t.exports=function(t,i,n){for(var r=t.points,o=0;o<r.length;o++)r[o].x+=i,r[o].y+=n;return t}},function(t,i){t.exports=function(t){return t.width*t.height}},function(t,i){t.exports=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t}},function(t,i){t.exports=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t}},function(t,i,n){var r=n(10);t.exports=function(t){return new r(t.x,t.y,t.width,t.height)}},function(t,i,n){var r=n(57);t.exports=function(t,i){return r(t,i.x,i.y)}},function(t,i){t.exports=function(t,i){return i.setTo(t.x,t.y,t.width,t.height)}},function(t,i){t.exports=function(t,i){return t.x===i.x&&t.y===i.y&&t.width===i.width&&t.height===i.height}},function(t,i,n){var r=n(237);t.exports=function(t,i){var n=r(t);return n<r(i)?t.setSize(i.height*n,i.height):t.setSize(i.width,i.width/n),t.setPosition(i.centerX-t.width/2,i.centerY-t.height/2)}},function(t,i,n){var r=n(237);t.exports=function(t,i){var n=r(t);return n>r(i)?t.setSize(i.height*n,i.height):t.setSize(i.width,i.width/n),t.setPosition(i.centerX-t.width/2,i.centerY-t.height/2)}},function(t,i){t.exports=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t}},function(t,i){t.exports=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t.width=Math.floor(t.width),t.height=Math.floor(t.height),t}},function(t,i,n){var r=n(10);t.exports=function(t,i,n,o,a){return void 0===a&&(a=new r),a.setTo(Math.min(t,n),Math.min(i,o),Math.abs(t-n),Math.abs(i-o))}},function(t,i,n){var r=n(4);t.exports=function(t,i){return void 0===i&&(i=new r),i.x=t.centerX,i.y=t.centerY,i}},function(t,i,n){var r=n(4);t.exports=function(t,i){return void 0===i&&(i=new r),i.x=t.width,i.y=t.height,i}},function(t,i,n){var r=n(190);t.exports=function(t,i,n){var o=t.centerX,a=t.centerY;return t.setSize(t.width+2*i,t.height+2*n),r(t,o,a)}},function(t,i,n){var r=n(10),o=n(152);t.exports=function(t,i,n){return void 0===n&&(n=new r),o(t,i)?(n.x=Math.max(t.x,i.x),n.y=Math.max(t.y,i.y),n.width=Math.min(t.right,i.right)-n.x,n.height=Math.min(t.bottom,i.bottom)-n.y):n.setEmpty(),n}},function(t,i){t.exports=function(t,i){for(var n=t.x,r=t.right,o=t.y,a=t.bottom,h=0;h<i.length;h++)n=Math.min(n,i[h].x),r=Math.max(r,i[h].x),o=Math.min(o,i[h].y),a=Math.max(a,i[h].y);return t.x=n,t.y=o,t.width=r-n,t.height=a-o,t}},function(t,i){t.exports=function(t,i){var n=Math.min(t.x,i.x),r=Math.max(t.right,i.right);t.x=n,t.width=r-n;var o=Math.min(t.y,i.y),a=Math.max(t.bottom,i.bottom);return t.y=o,t.height=a-o,t}},function(t,i){t.exports=function(t,i,n){var r=Math.min(t.x,i),o=Math.max(t.right,i);t.x=r,t.width=o-r;var a=Math.min(t.y,n),h=Math.max(t.bottom,n);return t.y=a,t.height=h-a,t}},function(t,i){t.exports=function(t,i,n){return t.x+=i,t.y+=n,t}},function(t,i){t.exports=function(t,i){return t.x+=i.x,t.y+=i.y,t}},function(t,i){t.exports=function(t,i){return t.x<i.right&&t.right>i.x&&t.y<i.bottom&&t.bottom>i.y}},function(t,i,n){var r=n(4),o=n(36);t.exports=function(t,i,n){void 0===n&&(n=new r),i=o(i);var a=Math.sin(i),h=Math.cos(i),d=h>0?t.width/2:t.width/-2,f=a>0?t.height/2:t.height/-2;return Math.abs(d*a)<Math.abs(f*h)?f=d*a/h:d=f*h/a,n.x=d+t.centerX,n.y=f+t.centerY,n}},function(t,i,n){var r=n(195),o=n(503),a=n(4);t.exports=function(t,i,n){if(void 0===n&&(n=new a),o(t,i))switch(r(0,3)){case 0:n.x=t.x+Math.random()*(i.right-t.x),n.y=t.y+Math.random()*(i.top-t.y);break;case 1:n.x=i.x+Math.random()*(t.right-i.x),n.y=i.bottom+Math.random()*(t.bottom-i.bottom);break;case 2:n.x=t.x+Math.random()*(i.x-t.x),n.y=i.y+Math.random()*(t.bottom-i.y);break;case 3:n.x=i.right+Math.random()*(t.right-i.right),n.y=t.y+Math.random()*(i.bottom-t.y)}return n}},function(t,i){t.exports=function(t,i){return t.width===i.width&&t.height===i.height}},function(t,i){t.exports=function(t,i,n){return void 0===n&&(n=i),t.width*=i,t.height*=n,t}},function(t,i,n){var r=n(82);r.Area=n(1294),r.BuildEquilateral=n(1295),r.BuildFromPolygon=n(1296),r.BuildRight=n(1297),r.CenterOn=n(1298),r.Centroid=n(504),r.CircumCenter=n(1299),r.CircumCircle=n(1300),r.Clone=n(1301),r.Contains=n(115),r.ContainsArray=n(235),r.ContainsPoint=n(1302),r.CopyFrom=n(1303),r.Decompose=n(495),r.Equals=n(1304),r.GetPoint=n(476),r.GetPoints=n(477),r.InCenter=n(506),r.Perimeter=n(1305),r.Offset=n(505),r.Random=n(181),r.Rotate=n(1306),r.RotateAroundPoint=n(1307),r.RotateAroundXY=n(238),t.exports=r},function(t,i){t.exports=function(t){var i=t.x1,n=t.y1,r=t.x2,o=t.y2,a=t.x3,h=t.y3;return Math.abs(((a-i)*(o-n)-(r-i)*(h-n))/2)}},function(t,i,n){var r=n(82);t.exports=function(t,i,n){var o=n*(Math.sqrt(3)/2);return new r(t,i,t+n/2,i+o,t-n/2,i+o)}},function(t,i,n){var r=n(59),o=n(82);t.exports=function(t,i,n,a,h){void 0===i&&(i=null),void 0===n&&(n=1),void 0===a&&(a=1),void 0===h&&(h=[]);for(var d,f,p,T,b,S,A,P,O,L=r(t,i),D=0;D<L.length;D+=3)d=L[D],f=L[D+1],p=L[D+2],T=t[2*d]*n,b=t[2*d+1]*a,S=t[2*f]*n,A=t[2*f+1]*a,P=t[2*p]*n,O=t[2*p+1]*a,h.push(new o(T,b,S,A,P,O));return h}},function(t,i,n){var r=n(82);t.exports=function(t,i,n,o){return void 0===o&&(o=n),new r(t,i,t,i-o,t+n,i)}},function(t,i,n){var r=n(504),o=n(505);t.exports=function(t,i,n,a){void 0===a&&(a=r);var h=a(t),d=i-h.x,f=n-h.y;return o(t,d,f)}},function(t,i,n){var r=n(3);function det(t,i,n,r){return t*r-i*n}t.exports=function(t,i){void 0===i&&(i=new r);var n=t.x3,o=t.y3,a=t.x1-n,h=t.y1-o,d=t.x2-n,f=t.y2-o,p=2*det(a,h,d,f),T=det(h,a*a+h*h,f,d*d+f*f),b=det(a,a*a+h*h,d,d*d+f*f);return i.x=n-T/p,i.y=o+b/p,i}},function(t,i,n){var r=n(65);t.exports=function(t,i){void 0===i&&(i=new r);var n,o,a=t.x1,h=t.y1,d=t.x2,f=t.y2,p=t.x3,T=t.y3,b=d-a,S=f-h,A=p-a,P=T-h,O=b*(a+d)+S*(h+f),L=A*(a+p)+P*(h+T),D=2*(b*(T-f)-S*(p-d));if(Math.abs(D)<1e-6){var I=Math.min(a,d,p),F=Math.min(h,f,T);n=.5*(Math.max(a,d,p)-I),o=.5*(Math.max(h,f,T)-F),i.x=I+n,i.y=F+o,i.radius=Math.sqrt(n*n+o*o)}else i.x=(P*O-S*L)/D,i.y=(b*L-A*O)/D,n=i.x-a,o=i.y-h,i.radius=Math.sqrt(n*n+o*o);return i}},function(t,i,n){var r=n(82);t.exports=function(t){return new r(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},function(t,i,n){var r=n(115);t.exports=function(t,i){return r(t,i.x,i.y)}},function(t,i){t.exports=function(t,i){return i.setTo(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},function(t,i){t.exports=function(t,i){return t.x1===i.x1&&t.y1===i.y1&&t.x2===i.x2&&t.y2===i.y2&&t.x3===i.x3&&t.y3===i.y3}},function(t,i,n){var r=n(67);t.exports=function(t){var i=t.getLineA(),n=t.getLineB(),o=t.getLineC();return r(i)+r(n)+r(o)}},function(t,i,n){var r=n(238),o=n(506);t.exports=function(t,i){var n=o(t);return r(t,n.x,n.y,i)}},function(t,i,n){var r=n(238);t.exports=function(t,i,n){return r(t,i.x,i.y,n)}},function(t,i,n){var r=n(203),o=n(17),a={CreatePixelPerfectHandler:n(507),CreateInteractiveObject:n(508),Events:n(51),Gamepad:n(1309),InputManager:n(409),InputPlugin:n(1321),InputPluginCache:n(153),Keyboard:n(1322),Mouse:n(1336),Pointer:n(412),Touch:n(1337)};a=o(!1,a,r),t.exports=a},function(t,i,n){t.exports={Axis:n(509),Button:n(510),Events:n(239),Gamepad:n(511),GamepadPlugin:n(1316),Configs:n(1317)}},function(t,i){t.exports="down"},function(t,i){t.exports="up"},function(t,i){t.exports="connected"},function(t,i){t.exports="disconnected"},function(t,i){t.exports="down"},function(t,i){t.exports="up"},function(t,i,n){var r=n(0),o=n(9),a=n(239),h=n(511),d=n(6),f=n(153),p=n(51),T=new r({Extends:o,initialize:function GamepadPlugin2(t){o.call(this),this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,t.pluginEvents.once(p.BOOT,this.boot,this),t.pluginEvents.on(p.START,this.start,this)},boot:function(){var t=this.scene.sys.game,i=this.settings.input,n=t.config;this.enabled=d(i,"gamepad",n.inputGamepad)&&t.device.input.gamepads,this.target=d(i,"gamepad.target",n.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(p.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(p.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var t=this,i=this.target,handler=function(i){!i.defaultPrevented&&t.isActive()&&(t.refreshPads(),t.queue.push(i))};this.onGamepadHandler=handler,i.addEventListener("gamepadconnected",handler,!1),i.addEventListener("gamepaddisconnected",handler,!1),this.sceneInputPlugin.pluginEvents.on(p.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(p.UPDATE,this.update);for(var t=0;t<this.gamepads.length;t++)this.gamepads[t].removeAllListeners()},disconnectAll:function(){for(var t=0;t<this.gamepads.length;t++)this.gamepads[t].pad.connected=!1},refreshPads:function(){var t=navigator.getGamepads();if(t)for(var i=this.gamepads,n=0;n<t.length;n++){var r=t[n];if(r){var o=r.id,a=r.index,d=i[a];if(d)d.id!==o?(d.destroy(),i[a]=new h(this,r)):d.update(r);else{var f=new h(this,r);i[a]=f,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=f):this._pad3=f:this._pad2=f:this._pad1=f}}}else this.disconnectAll()},getAll:function(){for(var t=[],i=this.gamepads,n=0;n<i.length;n++)i[n]&&t.push(i[n]);return t},getPad:function(t){for(var i=this.gamepads,n=0;n<i.length;n++)if(i[n]&&i[n].index===t)return i[n]},update:function(){if(this.enabled){this.refreshPads();var t=this.queue.length;if(0!==t)for(var i=this.queue.splice(0,t),n=0;n<t;n++){var r=i[n],o=this.getPad(r.gamepad.index);"gamepadconnected"===r.type?this.emit(a.CONNECTED,o,r):"gamepaddisconnected"===r.type&&this.emit(a.DISCONNECTED,o,r)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var t=0;t<this.gamepads.length;t++)this.gamepads[t]&&this.gamepads[t].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});f.register("GamepadPlugin",T,"gamepad","gamepad","inputGamepad"),t.exports=T},function(t,i,n){t.exports={DUALSHOCK_4:n(1318),SNES_USB:n(1319),XBOX_360:n(1320)}},function(t,i){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(t,i){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(t,i){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(t,i,n){var r=n(65),o=n(66),a=n(0),h=n(203),d=n(508),f=n(507),p=n(50),T=n(111),b=n(112),S=n(51),A=n(9),P=n(2),O=n(56),L=n(153),D=n(7),I=n(24),F=n(10),B=n(57),N=n(20),Y=n(82),X=n(115),G=new a({Extends:A,initialize:function InputPlugin2(t){A.call(this),this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.manager=t.sys.game.input,this.pluginEvents=new A,this.enabled=!0,this.displayList,this.cameras,L.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var i={cancelled:!1};this._eventContainer={stopPropagation:function(){i.cancelled=!0}},this._eventData=i,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,t.sys.events.once(N.BOOT,this.boot,this),t.sys.events.on(N.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(N.DESTROY,this.destroy,this),this.pluginEvents.emit(S.BOOT)},start:function(){var t=this.systems.events;t.on(N.TRANSITION_START,this.transitionIn,this),t.on(N.TRANSITION_OUT,this.transitionOut,this),t.on(N.TRANSITION_COMPLETE,this.transitionComplete,this),t.on(N.PRE_UPDATE,this.preUpdate,this),t.once(N.SHUTDOWN,this.shutdown,this),this.manager.events.on(S.GAME_OUT,this.onGameOut,this),this.manager.events.on(S.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(S.START)},onGameOver:function(t){this.isActive()&&this.emit(S.GAME_OVER,t.timeStamp,t)},onGameOut:function(t){this.isActive()&&this.emit(S.GAME_OUT,t.timeStamp,t)},preUpdate:function(){this.pluginEvents.emit(S.PRE_UPDATE);var t=this._pendingRemoval,i=this._pendingInsertion,n=t.length,r=i.length;if(0!==n||0!==r){for(var o=this._list,a=0;a<n;a++){var h=t[a],d=o.indexOf(h);d>-1&&(o.splice(d,1),this.clear(h,!0))}t.length=0,this._pendingRemoval.length=0,this._list=o.concat(i.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(t,i){if(!this.isActive())return!1;if(this.pluginEvents.emit(S.UPDATE,t,i),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var n,r=this.manager,o=r.pointers,a=r.pointersTotal;for(n=0;n<a;n++)o[n].updateMotion();if(0===this._list.length)return!1;var h=this.pollRate;if(-1===h)return!1;if(h>0){if(this._pollTimer-=i,!(this._pollTimer<0))return!1;this._pollTimer=this.pollRate}var d=!1;for(n=0;n<a;n++){var f=0,p=o[n];this._tempZones=[],this._temp=this.hitTestPointer(p),this.sortGameObjects(this._temp,p),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),f+=this.processOverOutEvents(p),2===this.getDragState(p)&&this.processDragThresholdEvent(p,t),f>0&&(d=!0)}return d},update:function(t,i){if(!this.isActive())return!1;for(var n=i.length,r=!1,o=0;o<n;o++){var a=0,d=i[o];switch(this._tempZones=[],this._temp=this.hitTestPointer(d),this.sortGameObjects(this._temp,d),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),t){case h.MOUSE_DOWN:a+=this.processDragDownEvent(d),a+=this.processDownEvents(d),a+=this.processOverOutEvents(d);break;case h.MOUSE_UP:a+=this.processDragUpEvent(d),a+=this.processUpEvents(d),a+=this.processOverOutEvents(d);break;case h.TOUCH_START:a+=this.processDragDownEvent(d),a+=this.processDownEvents(d),a+=this.processOverEvents(d);break;case h.TOUCH_END:case h.TOUCH_CANCEL:a+=this.processDragUpEvent(d),a+=this.processUpEvents(d),a+=this.processOutEvents(d);break;case h.MOUSE_MOVE:case h.TOUCH_MOVE:a+=this.processDragMoveEvent(d),a+=this.processMoveEvents(d),a+=this.processOverOutEvents(d);break;case h.MOUSE_WHEEL:a+=this.processWheelEvent(d)}a>0&&(r=!0)}return this._updatedThisFrame=!0,r},clear:function(t,i){void 0===i&&(i=!1);var n=t.input;if(n){i||this.queueForRemoval(t),n.gameObject=void 0,n.target=void 0,n.hitArea=void 0,n.hitAreaCallback=void 0,n.callbackContext=void 0,t.input=null;var r=this._draggable.indexOf(t);return r>-1&&this._draggable.splice(r,1),(r=this._drag[0].indexOf(t))>-1&&this._drag[0].splice(r,1),(r=this._over[0].indexOf(t))>-1&&(this._over[0].splice(r,1),this.manager.resetCursor(n)),t}},disable:function(t){t.input.enabled=!1},enable:function(t,i,n,r){return void 0===r&&(r=!1),t.input?t.input.enabled=!0:this.setHitArea(t,i,n),t.input&&r&&!t.input.dropZone&&(t.input.dropZone=r),this},hitTestPointer:function(t){for(var i=this.cameras.getCamerasBelowPointer(t),n=0;n<i.length;n++){for(var r=i[n],o=this.manager.hitTest(t,this._list,r),a=0;a<o.length;a++){var h=o[a];h.input.dropZone&&this._tempZones.push(h)}if(o.length>0)return t.camera=r,o}return t.camera=i[0],[]},processDownEvents:function(t){var i=0,n=this._temp,r=this._eventData,o=this._eventContainer;r.cancelled=!1;for(var a=!1,h=0;h<n.length;h++){var d=n[h];if(d.input){if(i++,d.emit(S.GAMEOBJECT_POINTER_DOWN,t,d.input.localX,d.input.localY,o),r.cancelled||!d.input){a=!0;break}if(this.emit(S.GAMEOBJECT_DOWN,t,d,o),r.cancelled||!d.input){a=!0;break}}}return!a&&this.manager&&(t.downElement===this.manager.game.canvas?this.emit(S.POINTER_DOWN,t,n):this.emit(S.POINTER_DOWN_OUTSIDE,t)),i},getDragState:function(t){return this._dragState[t.id]},setDragState:function(t,i){this._dragState[t.id]=i},processDragThresholdEvent:function(t,i){var n=!1,r=this.dragTimeThreshold,o=this.dragDistanceThreshold;if((o>0&&p(t.x,t.y,t.downX,t.downY)>=o||r>0&&i>=t.downTime+r)&&(n=!0),n)return this.setDragState(t,3),this.processDragStartList(t)},processDragStartList:function(t){if(3!==this.getDragState(t))return 0;for(var i=this._drag[t.id],n=0;n<i.length;n++){var r=i[n],o=r.input;o.dragState=2,o.dragStartX=r.x,o.dragStartY=r.y,o.dragStartXGlobal=t.worldX,o.dragStartYGlobal=t.worldY,o.dragX=o.dragStartXGlobal-o.dragStartX,o.dragY=o.dragStartYGlobal-o.dragStartY,r.emit(S.GAMEOBJECT_DRAG_START,t,o.dragX,o.dragY),this.emit(S.DRAG_START,t,r)}return this.setDragState(t,4),i.length},processDragDownEvent:function(t){var i=this._temp;if(0===this._draggable.length||0===i.length||!t.primaryDown||0!==this.getDragState(t))return 0;this.setDragState(t,1);for(var n=[],r=0;r<i.length;r++){var o=i[r];o.input.draggable&&0===o.input.dragState&&n.push(o)}return 0===n.length?(this.setDragState(t,0),0):(n.length>1&&(this.sortGameObjects(n,t),this.topOnly&&n.splice(1)),this._drag[t.id]=n,0===this.dragDistanceThreshold&&0===this.dragTimeThreshold?(this.setDragState(t,3),this.processDragStartList(t)):(this.setDragState(t,2),0))},processDragMoveEvent:function(t){if(2===this.getDragState(t)&&this.processDragThresholdEvent(t,this.manager.game.loop.now),4!==this.getDragState(t))return 0;for(var i=this._tempZones,n=this._drag[t.id],r=0;r<n.length;r++){var o,a,h=n[r],d=h.input,f=d.target;if(f){var p=i.indexOf(f);0===p?(h.emit(S.GAMEOBJECT_DRAG_OVER,t,f),this.emit(S.DRAG_OVER,t,h,f)):p>0?(h.emit(S.GAMEOBJECT_DRAG_LEAVE,t,f),this.emit(S.DRAG_LEAVE,t,h,f),d.target=i[0],f=d.target,h.emit(S.GAMEOBJECT_DRAG_ENTER,t,f),this.emit(S.DRAG_ENTER,t,h,f)):(h.emit(S.GAMEOBJECT_DRAG_LEAVE,t,f),this.emit(S.DRAG_LEAVE,t,h,f),i[0]?(d.target=i[0],f=d.target,h.emit(S.GAMEOBJECT_DRAG_ENTER,t,f),this.emit(S.DRAG_ENTER,t,h,f)):d.target=null)}else!f&&i[0]&&(d.target=i[0],f=d.target,h.emit(S.GAMEOBJECT_DRAG_ENTER,t,f),this.emit(S.DRAG_ENTER,t,h,f));if(h.parentContainer){var T=t.worldX-d.dragStartXGlobal,b=t.worldY-d.dragStartYGlobal,A=h.getParentRotation(),P=T*Math.cos(A)+b*Math.sin(A),O=b*Math.cos(A)-T*Math.sin(A);P*=1/h.parentContainer.scaleX,O*=1/h.parentContainer.scaleY,o=P+d.dragStartX,a=O+d.dragStartY}else o=t.worldX-d.dragX,a=t.worldY-d.dragY;h.emit(S.GAMEOBJECT_DRAG,t,o,a),this.emit(S.DRAG,t,h,o,a)}return n.length},processDragUpEvent:function(t){for(var i=this._drag[t.id],n=0;n<i.length;n++){var r=i[n],o=r.input;if(o&&2===o.dragState){o.dragState=0,o.dragX=o.localX-r.displayOriginX,o.dragY=o.localY-r.displayOriginY;var a=!1,h=o.target;h&&(r.emit(S.GAMEOBJECT_DROP,t,h),this.emit(S.DROP,t,r,h),o.target=null,a=!0),r.input&&(r.emit(S.GAMEOBJECT_DRAG_END,t,o.dragX,o.dragY,a),this.emit(S.DRAG_END,t,r,a))}}return this.setDragState(t,0),i.splice(0),0},processMoveEvents:function(t){var i=0,n=this._temp,r=this._eventData,o=this._eventContainer;r.cancelled=!1;for(var a=!1,h=0;h<n.length;h++){var d=n[h];if(d.input){if(i++,d.emit(S.GAMEOBJECT_POINTER_MOVE,t,d.input.localX,d.input.localY,o),r.cancelled||!d.input){a=!0;break}if(this.emit(S.GAMEOBJECT_MOVE,t,d,o),r.cancelled||!d.input){a=!0;break}if(this.topOnly)break}}return a||this.emit(S.POINTER_MOVE,t,n),i},processWheelEvent:function(t){var i=0,n=this._temp,r=this._eventData,o=this._eventContainer;r.cancelled=!1;for(var a=!1,h=t.deltaX,d=t.deltaY,f=t.deltaZ,p=0;p<n.length;p++){var T=n[p];if(T.input){if(i++,T.emit(S.GAMEOBJECT_POINTER_WHEEL,t,h,d,f,o),r.cancelled||!T.input){a=!0;break}if(this.emit(S.GAMEOBJECT_WHEEL,t,T,h,d,f,o),r.cancelled||!T.input){a=!0;break}}}return a||this.emit(S.POINTER_WHEEL,t,n,h,d,f),i},processOverEvents:function(t){var i=this._temp,n=0,r=i.length,o=[];if(r>0){var a=this.manager,h=this._eventData,d=this._eventContainer;h.cancelled=!1;for(var f=!1,p=0;p<r;p++){var T=i[p];if(T.input){if(o.push(T),a.setCursor(T.input),T.emit(S.GAMEOBJECT_POINTER_OVER,t,T.input.localX,T.input.localY,d),n++,h.cancelled||!T.input){f=!0;break}if(this.emit(S.GAMEOBJECT_OVER,t,T,d),h.cancelled||!T.input){f=!0;break}}}f||this.emit(S.POINTER_OVER,t,o)}return this._over[t.id]=o,n},processOutEvents:function(t){var i=this._over[t.id],n=0,r=i.length;if(r>0){var o=this.manager,a=this._eventData,h=this._eventContainer;a.cancelled=!1;var d=!1;this.sortGameObjects(i,t);for(var f=0;f<r;f++){var p=i[f];if((p=i[f]).input){if(o.resetCursor(p.input),p.emit(S.GAMEOBJECT_POINTER_OUT,t,h),n++,a.cancelled||!p.input){d=!0;break}if(this.emit(S.GAMEOBJECT_OUT,t,p,h),a.cancelled||!p.input){d=!0;break}d||this.emit(S.POINTER_OUT,t,i)}}this._over[t.id]=[]}return n},processOverOutEvents:function(t){var i,n,r=this._temp,o=[],a=[],h=[],d=this._over[t.id],f=this._drag[t.id],p=this.manager;for(i=0;i<d.length;i++)n=d[i],-1===r.indexOf(n)&&-1===f.indexOf(n)?o.push(n):h.push(n);for(i=0;i<r.length;i++)n=r[i],-1===d.indexOf(n)&&a.push(n);var T=o.length,b=0,A=this._eventData,P=this._eventContainer;A.cancelled=!1;var O=!1;if(T>0){for(this.sortGameObjects(o,t),i=0;i<T;i++)if((n=o[i]).input){if(p.resetCursor(n.input),n.emit(S.GAMEOBJECT_POINTER_OUT,t,P),b++,A.cancelled||!n.input){O=!0;break}if(this.emit(S.GAMEOBJECT_OUT,t,n,P),A.cancelled||!n.input){O=!0;break}}O||this.emit(S.POINTER_OUT,t,o)}if(T=a.length,A.cancelled=!1,O=!1,T>0){for(this.sortGameObjects(a,t),i=0;i<T;i++)if((n=a[i]).input){if(p.setCursor(n.input),n.emit(S.GAMEOBJECT_POINTER_OVER,t,n.input.localX,n.input.localY,P),b++,A.cancelled||!n.input){O=!0;break}if(this.emit(S.GAMEOBJECT_OVER,t,n,P),A.cancelled||!n.input){O=!0;break}}O||this.emit(S.POINTER_OVER,t,a)}return d=h.concat(a),this._over[t.id]=this.sortGameObjects(d,t),b},processUpEvents:function(t){var i=this._temp,n=this._eventData,r=this._eventContainer;n.cancelled=!1;for(var o=!1,a=0;a<i.length;a++){var h=i[a];if(h.input){if(h.emit(S.GAMEOBJECT_POINTER_UP,t,h.input.localX,h.input.localY,r),n.cancelled||!h.input){o=!0;break}if(this.emit(S.GAMEOBJECT_UP,t,h,r),n.cancelled||!h.input){o=!0;break}}}return!o&&this.manager&&(t.upElement===this.manager.game.canvas?this.emit(S.POINTER_UP,t,i):this.emit(S.POINTER_UP_OUTSIDE,t)),i.length},queueForInsertion:function(t){return-1===this._pendingInsertion.indexOf(t)&&-1===this._list.indexOf(t)&&this._pendingInsertion.push(t),this},queueForRemoval:function(t){return this._pendingRemoval.push(t),this},setDraggable:function(t,i){void 0===i&&(i=!0),Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var r=t[n];r.input.draggable=i;var o=this._draggable.indexOf(r);i&&-1===o?this._draggable.push(r):!i&&o>-1&&this._draggable.splice(o,1)}return this},makePixelPerfect:function(t){void 0===t&&(t=1);var i=this.systems.textures;return f(i,t)},setHitArea:function(t,i,n){if(void 0===i)return this.setHitAreaFromTexture(t);Array.isArray(t)||(t=[t]);var r=!1,o=!1,a=!1,h=!1,f=!1,p=!0;if(D(i)){var T=i;i=P(T,"hitArea",null),n=P(T,"hitAreaCallback",null),r=P(T,"draggable",!1),o=P(T,"dropZone",!1),a=P(T,"cursor",!1),h=P(T,"useHandCursor",!1),f=P(T,"pixelPerfect",!1);var b=P(T,"alphaTolerance",1);f&&(i={},n=this.makePixelPerfect(b)),i&&n||(this.setHitAreaFromTexture(t),p=!1)}else"function"!=typeof i||n||(n=i,i={});for(var S=0;S<t.length;S++){var A=t[S];if(f&&"Container"===A.type)console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");else{var O=A.input?A.input:d(A,i,n);O.customHitArea=p,O.dropZone=o,O.cursor=h?"pointer":a,A.input=O,r&&this.setDraggable(A),this.queueForInsertion(A)}}return this},setHitAreaCircle:function(t,i,n,a,h){void 0===h&&(h=o);var d=new r(i,n,a);return this.setHitArea(t,d,h)},setHitAreaEllipse:function(t,i,n,r,o,a){void 0===a&&(a=b);var h=new T(i,n,r,o);return this.setHitArea(t,h,a)},setHitAreaFromTexture:function(t,i){void 0===i&&(i=B),Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var r=t[n],o=r.frame,a=0,h=0;r.width?(a=r.width,h=r.height):o&&(a=o.realWidth,h=o.realHeight),"Container"!==r.type||0!==a&&0!==h?0!==a&&0!==h&&(r.input=d(r,new F(0,0,a,h),i),this.queueForInsertion(r)):console.warn("Container.setInteractive must specify a Shape or call setSize() first")}return this},setHitAreaRectangle:function(t,i,n,r,o,a){void 0===a&&(a=B);var h=new F(i,n,r,o);return this.setHitArea(t,h,a)},setHitAreaTriangle:function(t,i,n,r,o,a,h,d){void 0===d&&(d=X);var f=new Y(i,n,r,o,a,h);return this.setHitArea(t,f,d)},enableDebug:function(t,i){void 0===i&&(i=65280);var n=t.input;if(!n||!n.hitArea)return this;var r=n.hitArea,o=r.type,a=n.hitAreaDebug,h=this.systems.add,d=this.systems.updateList;a&&(d.remove(a),a.destroy(),a=null);var f=0,p=0;switch(o){case O.CIRCLE:a=h.arc(0,0,r.radius),f=r.x-r.radius,p=r.y-r.radius;break;case O.ELLIPSE:a=h.ellipse(0,0,r.width,r.height),f=r.x-r.width/2,p=r.y-r.height/2;break;case O.LINE:a=h.line(0,0,r.x1,r.y1,r.x2,r.y2);break;case O.POLYGON:a=h.polygon(0,0,r.points);break;case O.RECTANGLE:a=h.rectangle(0,0,r.width,r.height),f=r.x,p=r.y;break;case O.TRIANGLE:a=h.triangle(0,0,r.x1,r.y1,r.x2,r.y2,r.x3,r.y3)}return a&&(a.isFilled=!1,a.preUpdate=function(){a.setStrokeStyle(1/t.scale,i),a.setDisplayOrigin(t.displayOriginX,t.displayOriginY);var n=t.x,r=t.y,o=t.rotation,h=t.scaleX,d=t.scaleY;if(t.parentContainer){var T=t.getWorldTransformMatrix();n=T.tx,r=T.ty,o=T.rotation,h=T.scaleX,d=T.scaleY}a.setRotation(o),a.setScale(h,d),a.setPosition(n+f,r+p),a.setScrollFactor(t.scrollFactorX,t.scrollFactorY),a.setDepth(t.depth)},d.add(a),n.hitAreaDebug=a),this},removeDebug:function(t){var i=t.input;if(i&&i.hitAreaDebug){var n=i.hitAreaDebug;this.systems.updateList.remove(n),n.destroy(),i.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(t){return this.pollRate=t,this._pollTimer=0,this},setGlobalTopOnly:function(t){return this.manager.globalTopOnly=t,this},setTopOnly:function(t){return this.topOnly=t,this},sortGameObjects:function(t,i){if(t.length<2)return t;var n=i.camera.renderList;return t.sort((function(t,i){return n.indexOf(i)-n.indexOf(t)}))},sortDropZones:function(t){return t.length<2?t:(this.scene.sys.depthSort(),t.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(t,i){if(t.parentContainer||i.parentContainer){if(t.parentContainer===i.parentContainer)return i.parentContainer.getIndex(i)-t.parentContainer.getIndex(t);if(t.parentContainer===i)return-1;if(i.parentContainer===t)return 1;for(var n=t.getIndexList(),r=i.getIndexList(),o=Math.min(n.length,r.length),a=0;a<o;a++){var h=n[a],d=r[a];if(h!==d)return d-h}return r.length-n.length}return this.displayList.getIndex(i)-this.displayList.getIndex(t)},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(t){return this.manager.addPointer(t)},setDefaultCursor:function(t){return this.manager.setDefaultCursor(t),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(S.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var t=0;t<10;t++)this._drag[t]=[],this._over[t]=[];this.removeAllListeners();var i=this.manager;i.canvas.style.cursor=i.defaultCursor;var n=this.systems.events;n.off(N.TRANSITION_START,this.transitionIn,this),n.off(N.TRANSITION_OUT,this.transitionOut,this),n.off(N.TRANSITION_COMPLETE,this.transitionComplete,this),n.off(N.PRE_UPDATE,this.preUpdate,this),i.events.off(S.GAME_OUT,this.onGameOut,this),i.events.off(S.GAME_OVER,this.onGameOver,this),n.off(N.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(S.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(N.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});I.register("InputPlugin",G,"input"),t.exports=G},function(t,i,n){t.exports={Events:n(154),KeyboardManager:n(410),KeyboardPlugin:n(1330),Key:n(512),KeyCodes:n(143),KeyCombo:n(513),AdvanceKeyCombo:n(515),ProcessKeyCombo:n(514),ResetKeyCombo:n(516),JustDown:n(1332),JustUp:n(1333),DownDuration:n(1334),UpDuration:n(1335)}},function(t,i){t.exports="keydown"},function(t,i){t.exports="keyup"},function(t,i){t.exports="keycombomatch"},function(t,i){t.exports="down"},function(t,i){t.exports="keydown-"},function(t,i){t.exports="keyup-"},function(t,i){t.exports="up"},function(t,i,n){var r=n(0),o=n(9),a=n(154),h=n(22),d=n(6),f=n(51),p=n(153),T=n(512),b=n(143),S=n(513),A=n(1331),P=n(20),O=n(76),L=new r({Extends:o,initialize:function KeyboardPlugin2(t){o.call(this),this.game=t.systems.game,this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.manager=t.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,t.pluginEvents.once(f.BOOT,this.boot,this),t.pluginEvents.on(f.START,this.start,this)},boot:function(){var t=this.settings.input;this.enabled=d(t,"keyboard",!0);var i=d(t,"keyboard.capture",null);i&&this.addCaptures(i),this.sceneInputPlugin.pluginEvents.once(f.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(f.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(f.SHUTDOWN,this.shutdown,this),this.game.events.on(h.BLUR,this.resetKeys,this),this.scene.sys.events.on(P.PAUSE,this.resetKeys,this),this.scene.sys.events.on(P.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(t){return this.manager.addCapture(t),this},removeCapture:function(t){return this.manager.removeCapture(t),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:b.UP,down:b.DOWN,left:b.LEFT,right:b.RIGHT,space:b.SPACE,shift:b.SHIFT})},addKeys:function(t,i,n){void 0===i&&(i=!0),void 0===n&&(n=!1);var r={};if("string"==typeof t){t=t.split(",");for(var o=0;o<t.length;o++){var a=t[o].trim();a&&(r[a]=this.addKey(a,i,n))}}else for(var h in t)r[h]=this.addKey(t[h],i,n);return r},addKey:function(t,i,n){void 0===i&&(i=!0),void 0===n&&(n=!1);var r=this.keys;if(t instanceof T){var o=r.indexOf(t);return o>-1?r[o]=t:r[t.keyCode]=t,i&&this.addCapture(t.keyCode),t.setEmitOnRepeat(n),t}return"string"==typeof t&&(t=b[t.toUpperCase()]),r[t]||(r[t]=new T(this,t),i&&this.addCapture(t),r[t].setEmitOnRepeat(n)),r[t]},removeKey:function(t,i){void 0===i&&(i=!1);var n,r=this.keys;if(t instanceof T){var o=r.indexOf(t);o>-1&&(n=this.keys[o],this.keys[o]=void 0)}else"string"==typeof t&&(t=b[t.toUpperCase()]);return r[t]&&(n=r[t],r[t]=void 0),n&&(n.plugin=null,i&&n.destroy()),this},removeAllKeys:function(t){for(var i=this.keys,n=0;n<i.length;n++){var r=i[n];r&&(i[n]=void 0,t&&r.destroy())}return this},createCombo:function(t,i){return new S(this,t,i)},checkDown:function(t,i){if(void 0===i&&(i=0),this.enabled&&t.isDown){var n=O(this.time-t.timeDown,i);if(n>t._tick)return t._tick=n,!0}return!1},update:function(){var t=this.manager.queue,i=t.length;if(this.isActive()&&0!==i)for(var n=this.keys,r=0;r<i;r++){var o=t[r],h=o.keyCode,d=n[h],f=!1;void 0===o.cancelled&&(o.cancelled=0,o.stopImmediatePropagation=function(){o.cancelled=1},o.stopPropagation=function(){o.cancelled=-1}),-1!==o.cancelled&&(h===this.prevCode&&o.timeStamp===this.prevTime&&o.type===this.prevType||(this.prevCode=h,this.prevTime=o.timeStamp,this.prevType=o.type,"keydown"===o.type?(d&&(f=d.isDown,d.onDown(o)),o.cancelled||d&&f||(A[h]&&this.emit(a.KEY_DOWN+A[h],o),o.cancelled||this.emit(a.ANY_KEY_DOWN,o))):(d&&d.onUp(o),o.cancelled||(A[h]&&this.emit(a.KEY_UP+A[h],o),o.cancelled||this.emit(a.ANY_KEY_UP,o))),1===o.cancelled&&(o.cancelled=0)))}},resetKeys:function(){for(var t=this.keys,i=0;i<t.length;i++)t[i]&&t[i].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(f.MANAGER_PROCESS,this.update,this),this.game.events.off(h.BLUR,this.resetKeys),this.scene.sys.events.off(P.PAUSE,this.resetKeys,this),this.scene.sys.events.off(P.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var t=this.keys,i=0;i<t.length;i++)t[i]&&t[i].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});p.register("KeyboardPlugin",L,"keyboard","keyboard","inputKeyboard"),t.exports=L},function(t,i,n){var r=n(143),o={};for(var a in r)o[r[a]]=a;t.exports=o},function(t,i){t.exports=function(t){return!!t._justDown&&(t._justDown=!1,!0)}},function(t,i){t.exports=function(t){return!!t._justUp&&(t._justUp=!1,!0)}},function(t,i){t.exports=function(t,i){void 0===i&&(i=50);var n=t.plugin.game.loop.time-t.timeDown;return t.isDown&&n<i}},function(t,i){t.exports=function(t,i){void 0===i&&(i=50);var n=t.plugin.game.loop.time-t.timeUp;return t.isUp&&n<i}},function(t,i,n){t.exports={MouseManager:n(411)}},function(t,i,n){t.exports={TouchManager:n(413)}},function(t,i,n){var r=n(21),o=n(17),a={Events:n(95),FileTypes:n(1339),File:n(23),FileTypesManager:n(8),GetURL:n(155),LoaderPlugin:n(1365),MergeXHRSettings:n(240),MultiFile:n(49),XHRLoader:n(517),XHRSettings:n(156)};a=o(!1,a,r),t.exports=a},function(t,i,n){t.exports={AnimationJSONFile:n(1340),AsepriteFile:n(1341),AtlasJSONFile:n(1342),AtlasXMLFile:n(1343),AudioFile:n(518),AudioSpriteFile:n(1344),BinaryFile:n(1345),BitmapFontFile:n(1346),CSSFile:n(1347),GLSLFile:n(1348),HTML5AudioFile:n(519),HTMLFile:n(1349),HTMLTextureFile:n(1350),ImageFile:n(71),JSONFile:n(61),MultiAtlasFile:n(1351),MultiScriptFile:n(1352),OBJFile:n(1353),PackFile:n(1354),PluginFile:n(1355),SceneFile:n(1356),ScenePluginFile:n(1357),ScriptFile:n(520),SpriteSheetFile:n(1358),SVGFile:n(1359),TextFile:n(242),TilemapCSVFile:n(1360),TilemapImpactFile:n(1361),TilemapJSONFile:n(1362),UnityAtlasFile:n(1363),VideoFile:n(1364),XMLFile:n(241)}},function(t,i,n){var r=n(0),o=n(8),a=n(61),h=n(95),d=new r({Extends:a,initialize:function AnimationJSONFile2(t,i,n,r,o){a.call(this,t,i,n,r,o),this.type="animationJSON"},onProcess:function(){this.loader.once(h.POST_PROCESS,this.onLoadComplete,this),a.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});o.register("animation",(function(t,i,n,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new d(this,t[o]));else this.addFile(new d(this,t,i,r,n));return this})),t.exports=d},function(t,i,n){var r=n(0),o=n(8),a=n(2),h=n(71),d=n(7),f=n(61),p=n(49),T=new r({Extends:p,initialize:function AsepriteFile2(t,i,n,r,o,T){var b,S;if(d(i)){var A=i;i=a(A,"key"),b=new h(t,{key:i,url:a(A,"textureURL"),extension:a(A,"textureExtension","png"),normalMap:a(A,"normalMap"),xhrSettings:a(A,"textureXhrSettings")}),S=new f(t,{key:i,url:a(A,"atlasURL"),extension:a(A,"atlasExtension","json"),xhrSettings:a(A,"atlasXhrSettings")})}else b=new h(t,i,n,o),S=new f(t,i,r,T);b.linkFile?p.call(this,t,"atlasjson",i,[b,S,b.linkFile]):p.call(this,t,"atlasjson",i,[b,S])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],i=this.files[1],n=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(t.key,t.data,i.data,n),i.addToCache(),this.complete=!0}}});o.register("aseprite",(function(t,i,n,r,o){var a;if(Array.isArray(t))for(var h=0;h<t.length;h++)a=new T(this,t[h]),this.addFile(a.files);else a=new T(this,t,i,n,r,o),this.addFile(a.files);return this})),t.exports=T},function(t,i,n){var r=n(0),o=n(8),a=n(2),h=n(71),d=n(7),f=n(61),p=n(49),T=new r({Extends:p,initialize:function AtlasJSONFile2(t,i,n,r,o,T){var b,S;if(d(i)){var A=i;i=a(A,"key"),b=new h(t,{key:i,url:a(A,"textureURL"),extension:a(A,"textureExtension","png"),normalMap:a(A,"normalMap"),xhrSettings:a(A,"textureXhrSettings")}),S=new f(t,{key:i,url:a(A,"atlasURL"),extension:a(A,"atlasExtension","json"),xhrSettings:a(A,"atlasXhrSettings")})}else b=new h(t,i,n,o),S=new f(t,i,r,T);b.linkFile?p.call(this,t,"atlasjson",i,[b,S,b.linkFile]):p.call(this,t,"atlasjson",i,[b,S])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],i=this.files[1],n=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(t.key,t.data,i.data,n),i.pendingDestroy(),this.complete=!0}}});o.register("atlas",(function(t,i,n,r,o){var a;if(Array.isArray(t))for(var h=0;h<t.length;h++)a=new T(this,t[h]),this.addFile(a.files);else a=new T(this,t,i,n,r,o),this.addFile(a.files);return this})),t.exports=T},function(t,i,n){var r=n(0),o=n(8),a=n(2),h=n(71),d=n(7),f=n(49),p=n(241),T=new r({Extends:f,initialize:function AtlasXMLFile2(t,i,n,r,o,T){var b,S;if(d(i)){var A=i;i=a(A,"key"),b=new h(t,{key:i,url:a(A,"textureURL"),extension:a(A,"textureExtension","png"),normalMap:a(A,"normalMap"),xhrSettings:a(A,"textureXhrSettings")}),S=new p(t,{key:i,url:a(A,"atlasURL"),extension:a(A,"atlasExtension","xml"),xhrSettings:a(A,"atlasXhrSettings")})}else b=new h(t,i,n,o),S=new p(t,i,r,T);b.linkFile?f.call(this,t,"atlasxml",i,[b,S,b.linkFile]):f.call(this,t,"atlasxml",i,[b,S])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],i=this.files[1],n=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(t.key,t.data,i.data,n),i.pendingDestroy(),this.complete=!0}}});o.register("atlasXML",(function(t,i,n,r,o){var a;if(Array.isArray(t))for(var h=0;h<t.length;h++)a=new T(this,t[h]),this.addFile(a.files);else a=new T(this,t,i,n,r,o),this.addFile(a.files);return this})),t.exports=T},function(t,i,n){var r=n(518),o=n(0),a=n(8),h=n(2),d=n(7),f=n(61),p=n(49),T=new o({Extends:p,initialize:function AudioSpriteFile2(t,i,n,o,a,T,b){if(d(i)){var S=i;i=h(S,"key"),n=h(S,"jsonURL"),o=h(S,"audioURL"),a=h(S,"audioConfig"),T=h(S,"audioXhrSettings"),b=h(S,"jsonXhrSettings")}var A;if(o){var P=r.create(t,i,o,a,T);P&&(A=new f(t,i,n,b),p.call(this,t,"audiosprite",i,[P,A]),this.config.resourceLoad=!1)}else A=new f(t,i,n,b),p.call(this,t,"audiosprite",i,[A]),this.config.resourceLoad=!0,this.config.audioConfig=a,this.config.audioXhrSettings=T},onFileComplete:function(t){if(-1!==this.files.indexOf(t)&&(this.pending--,this.config.resourceLoad&&"json"===t.type&&t.data.hasOwnProperty("resources"))){var i=t.data.resources,n=h(this.config,"audioConfig"),o=h(this.config,"audioXhrSettings"),a=r.create(this.loader,t.key,i,n,o);a&&(this.addToMultiFile(a),this.loader.addFile(a))}},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],i=this.files[1];t.addToCache(),i.addToCache(),this.complete=!0}}});a.register("audioSprite",(function(t,i,n,r,o,a){var h,d=this.systems.game,f=d.config.audio,p=d.device.audio;if(f&&f.noAudio||!p.webAudio&&!p.audioData)return this;if(Array.isArray(t))for(var b=0;b<t.length;b++)(h=new T(this,t[b])).files&&this.addFile(h.files);else(h=new T(this,t,i,n,r,o,a)).files&&this.addFile(h.files);return this}))},function(t,i,n){var r=n(0),o=n(21),a=n(23),h=n(8),d=n(2),f=n(7),p=new r({Extends:a,initialize:function BinaryFile2(t,i,n,r,o){var h="bin";if(f(i)){var p=i;i=d(p,"key"),n=d(p,"url"),r=d(p,"xhrSettings"),h=d(p,"extension",h),o=d(p,"dataType",o)}var T={type:"binary",cache:t.cacheManager.binary,extension:h,responseType:"arraybuffer",key:i,url:n,xhrSettings:r,config:{dataType:o}};a.call(this,t,T)},onProcess:function(){this.state=o.FILE_PROCESSING;var t=this.config.dataType;this.data=t?new t(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});h.register("binary",(function(t,i,n,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new p(this,t[o]));else this.addFile(new p(this,t,i,r,n));return this})),t.exports=p},function(t,i,n){var r=n(0),o=n(8),a=n(2),h=n(71),d=n(7),f=n(49),p=n(212),T=n(241),b=new r({Extends:f,initialize:function BitmapFontFile2(t,i,n,r,o,p){var b,S;if(d(i)){var A=i;i=a(A,"key"),b=new h(t,{key:i,url:a(A,"textureURL"),extension:a(A,"textureExtension","png"),normalMap:a(A,"normalMap"),xhrSettings:a(A,"textureXhrSettings")}),S=new T(t,{key:i,url:a(A,"fontDataURL"),extension:a(A,"fontDataExtension","xml"),xhrSettings:a(A,"fontDataXhrSettings")})}else b=new h(t,i,n,o),S=new T(t,i,r,p);b.linkFile?f.call(this,t,"bitmapfont",i,[b,S,b.linkFile]):f.call(this,t,"bitmapfont",i,[b,S])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],i=this.files[1];t.addToCache(),i.pendingDestroy();var n=t.cache.get(t.key),r=p(i.data,t.cache.getFrame(t.key),0,0,n);this.loader.cacheManager.bitmapFont.add(t.key,{data:r,texture:t.key,frame:null}),this.complete=!0}}});o.register("bitmapFont",(function(t,i,n,r,o){var a;if(Array.isArray(t))for(var h=0;h<t.length;h++)a=new b(this,t[h]),this.addFile(a.files);else a=new b(this,t,i,n,r,o),this.addFile(a.files);return this})),t.exports=b},function(t,i,n){var r=n(0),o=n(21),a=n(23),h=n(8),d=n(2),f=n(7),p=new r({Extends:a,initialize:function CSSFile2(t,i,n,r){var o="css";if(f(i)){var h=i;i=d(h,"key"),n=d(h,"url"),r=d(h,"xhrSettings"),o=d(h,"extension",o)}var p={type:"script",cache:!1,extension:o,responseType:"text",key:i,url:n,xhrSettings:r};a.call(this,t,p)},onProcess:function(){this.state=o.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});h.register("css",(function(t,i,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new p(this,t[r]));else this.addFile(new p(this,t,i,n));return this})),t.exports=p},function(t,i,n){var r=n(0),o=n(21),a=n(23),h=n(8),d=n(2),f=n(7),p=n(396),T=new r({Extends:a,initialize:function GLSLFile2(t,i,n,r,o){var h="glsl";if(f(i)){var p=i;i=d(p,"key"),n=d(p,"url"),r=d(p,"shaderType","fragment"),o=d(p,"xhrSettings"),h=d(p,"extension",h)}else void 0===r&&(r="fragment");var T={type:"glsl",cache:t.cacheManager.shader,extension:h,responseType:"text",key:i,url:n,config:{shaderType:r},xhrSettings:o};a.call(this,t,T)},onProcess:function(){this.state=o.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t=this.data.split("\n"),i=this.extractBlock(t,0);if(i)for(;i;){var n=this.getShaderName(i.header),r=this.getShaderType(i.header),o=this.getShaderUniforms(i.header),a=i.shader;if(this.cache.has(n)){var h=this.cache.get(n);"fragment"===r?h.fragmentSrc=a:h.vertexSrc=a,h.uniforms||(h.uniforms=o)}else"fragment"===r?this.cache.add(n,new p(n,a,"",o)):this.cache.add(n,new p(n,"",a,o));i=this.extractBlock(t,i.offset)}else"fragment"===this.config.shaderType?this.cache.add(this.key,new p(this.key,this.data)):this.cache.add(this.key,new p(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(t){for(var i=0;i<t.length;i++){var n=t[i].trim();if("name:"===n.substring(0,5))return n.substring(5).trim()}return this.key},getShaderType:function(t){for(var i=0;i<t.length;i++){var n=t[i].trim();if("type:"===n.substring(0,5))return n.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(t){for(var i={},n=0;n<t.length;n++){var r=t[n].trim();if("uniform."===r.substring(0,8)){var o=r.indexOf(":");if(o){var a=r.substring(8,o);try{i[a]=JSON.parse(r.substring(o+1))}catch(h){console.warn("Invalid uniform JSON: "+a)}}}}return i},extractBlock:function(t,i){for(var n=-1,r=-1,o=-1,a=!1,h=!1,d=[],f=[],p=i;p<t.length;p++){var T=t[p].trim();if("---"===T)if(-1===n)n=p,a=!0;else{if(!a){h=!1;break}r=p,a=!1,h=!0}else a?d.push(T):h&&(f.push(T),o=p)}return a||-1===r?null:{header:d,shader:f.join("\n"),offset:o}}});h.register("glsl",(function(t,i,n,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new T(this,t[o]));else this.addFile(new T(this,t,i,n,r));return this})),t.exports=T},function(t,i,n){var r=n(0),o=n(21),a=n(23),h=n(8),d=n(2),f=n(7),p=new r({Extends:a,initialize:function HTMLFile2(t,i,n,r){var o="html";if(f(i)){var h=i;i=d(h,"key"),n=d(h,"url"),r=d(h,"xhrSettings"),o=d(h,"extension",o)}var p={type:"text",cache:t.cacheManager.html,extension:o,responseType:"text",key:i,url:n,xhrSettings:r};a.call(this,t,p)},onProcess:function(){this.state=o.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});h.register("html",(function(t,i,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new p(this,t[r]));else this.addFile(new p(this,t,i,n));return this})),t.exports=p},function(t,i,n){var r=n(0),o=n(21),a=n(23),h=n(8),d=n(2),f=n(7),p=new r({Extends:a,initialize:function HTMLTextureFile2(t,i,n,r,o,h){void 0===r&&(r=512),void 0===o&&(o=512);var p="html";if(f(i)){var T=i;i=d(T,"key"),n=d(T,"url"),h=d(T,"xhrSettings"),p=d(T,"extension",p),r=d(T,"width",r),o=d(T,"height",o)}var b={type:"html",cache:t.textureManager,extension:p,responseType:"text",key:i,url:n,xhrSettings:h,config:{width:r,height:o}};a.call(this,t,b)},onProcess:function(){this.state=o.FILE_PROCESSING;var t=this.config.width,i=this.config.height,n=[];n.push('<svg width="'+t+'px" height="'+i+'px" viewBox="0 0 '+t+" "+i+'" xmlns="http://www.w3.org/2000/svg">'),n.push('<foreignObject width="100%" height="100%">'),n.push('<body xmlns="http://www.w3.org/1999/xhtml">'),n.push(this.xhrLoader.responseText),n.push("</body>"),n.push("</foreignObject>"),n.push("</svg>");var r=[n.join("\n")],h=this;try{var d=new window.Blob(r,{type:"image/svg+xml;charset=utf-8"})}catch(f){return h.state=o.FILE_ERRORED,void h.onProcessComplete()}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){a.revokeObjectURL(h.data),h.onProcessComplete()},this.data.onerror=function(){a.revokeObjectURL(h.data),h.onProcessError()},a.createObjectURL(this.data,d,"image/svg+xml")},addToCache:function(){var t=this.cache.addImage(this.key,this.data);this.pendingDestroy(t)}});h.register("htmlTexture",(function(t,i,n,r,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new p(this,t[a]));else this.addFile(new p(this,t,i,n,r,o));return this})),t.exports=p},function(t,i,n){var r=n(0),o=n(8),a=n(2),h=n(71),d=n(7),f=n(61),p=n(49),T=new r({Extends:p,initialize:function MultiAtlasFile2(t,i,n,r,o,h,T){if(d(i)){var b=i;i=a(b,"key"),n=a(b,"url",!1)?a(b,"url"):a(b,"atlasURL"),h=a(b,"xhrSettings"),r=a(b,"path"),o=a(b,"baseURL"),T=a(b,"textureXhrSettings")}var S=new f(t,i,n,h);p.call(this,t,"multiatlas",i,[S]),this.config.path=r,this.config.baseURL=o,this.config.textureXhrSettings=T},onFileComplete:function(t){if(-1!==this.files.indexOf(t)&&(this.pending--,"json"===t.type&&t.data.hasOwnProperty("textures"))){var i=t.data.textures,n=this.config,r=this.loader,o=r.baseURL,d=r.path,f=r.prefix,p=a(n,"baseURL",this.baseURL),T=a(n,"path",this.path),b=a(n,"prefix",this.prefix),S=a(n,"textureXhrSettings");r.setBaseURL(p),r.setPath(T),r.setPrefix(b);for(var A=0;A<i.length;A++){var P=i[A].image,O="MA"+this.multiKeyIndex+"_"+P,L=new h(r,O,P,S);if(this.addToMultiFile(L),r.addFile(L),i[A].normalMap){var D=new h(r,O,i[A].normalMap,S);D.type="normalMap",L.setLink(D),this.addToMultiFile(D),r.addFile(D)}}r.setBaseURL(o),r.setPath(d),r.setPrefix(f)}},addToCache:function(){if(this.isReadyToProcess()){for(var t=this.files[0],i=[],n=[],r=[],o=1;o<this.files.length;o++){var a=this.files[o];if("normalMap"!==a.type)for(var h=a.key.indexOf("_"),d=a.key.substr(h+1),f=a.data,p=0;p<t.data.textures.length;p++){var T=t.data.textures[p];if(T.image===d){n.push(f),i.push(T),a.linkFile&&r.push(a.linkFile.data);break}}}for(0===r.length&&(r=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,n,i,r),this.complete=!0,o=0;o<this.files.length;o++)this.files[o].pendingDestroy()}}});o.register("multiatlas",(function(t,i,n,r,o){var a;if(Array.isArray(t))for(var h=0;h<t.length;h++)a=new T(this,t[h]),this.addFile(a.files);else a=new T(this,t,i,n,r,o),this.addFile(a.files);return this})),t.exports=T},function(t,i,n){var r=n(0),o=n(8),a=n(2),h=n(7),d=n(49),f=n(520),p=new r({Extends:d,initialize:function MultiScriptFile2(t,i,n,r){var o="js",p=[];if(h(i)){var T=i;i=a(T,"key"),n=a(T,"url"),r=a(T,"xhrSettings"),o=a(T,"extension",o)}Array.isArray(n)||(n=[n]);for(var b=0;b<n.length;b++){var S=new f(t,{key:i+"_"+b.toString(),url:n[b],extension:o,xhrSettings:r});S.onProcess=function(){this.onProcessComplete()},p.push(S)}d.call(this,t,"scripts",i,p)},addToCache:function(){if(this.isReadyToProcess()){for(var t=0;t<this.files.length;t++){var i=this.files[t];i.data=document.createElement("script"),i.data.language="javascript",i.data.type="text/javascript",i.data.defer=!1,i.data.text=i.xhrLoader.responseText,document.head.appendChild(i.data)}this.complete=!0}}});o.register("scripts",(function(t,i,n){var r;if(Array.isArray(t))for(var o=0;o<t.length;o++)r=new p(this,t[o]),this.addFile(r.files);else r=new p(this,t,i,n),this.addFile(r.files);return this})),t.exports=p},function(t,i,n){var r=n(0),o=n(8),a=n(2),h=n(7),d=n(49),f=n(498),p=n(499),T=n(242),b=new r({Extends:d,initialize:function OBJFile2(t,i,n,r,o,f){var p,b,S=t.cacheManager.obj;if(h(i)){var A=i;i=a(A,"key"),p=new T(t,{key:i,type:"obj",cache:S,url:a(A,"url"),extension:a(A,"extension","obj"),xhrSettings:a(A,"xhrSettings"),config:{flipUV:a(A,"flipUV",o)}}),(r=a(A,"matURL"))&&(b=new T(t,{key:i,type:"mat",cache:S,url:r,extension:a(A,"matExtension","mat"),xhrSettings:a(A,"xhrSettings")}))}else p=new T(t,{key:i,url:n,type:"obj",cache:S,extension:"obj",xhrSettings:f,config:{flipUV:o}}),r&&(b=new T(t,{key:i,url:r,type:"mat",cache:S,extension:"mat",xhrSettings:f}));d.call(this,t,"obj",i,[p,b])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],i=this.files[1],n=f(t.data,t.config.flipUV);i&&(n.materials=p(i.data)),t.cache.add(t.key,n),this.complete=!0}}});o.register("obj",(function(t,i,n,r,o){var a;if(Array.isArray(t))for(var h=0;h<t.length;h++)a=new b(this,t[h]),this.addFile(a.files);else a=new b(this,t,i,n,r,o),this.addFile(a.files);return this})),t.exports=b},function(t,i,n){var r=n(0),o=n(21),a=n(8),h=n(61),d=new r({Extends:h,initialize:function PackFile2(t,i,n,r,o){h.call(this,t,i,n,r,o),this.type="packfile"},onProcess:function(){this.state!==o.FILE_POPULATED&&(this.state=o.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});a.register("pack",(function(t,i,n,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new d(this,t[o]));else this.addFile(new d(this,t,i,r,n));return this})),t.exports=d},function(t,i,n){var r=n(0),o=n(21),a=n(23),h=n(8),d=n(2),f=n(7),p=new r({Extends:a,initialize:function PluginFile2(t,i,n,r,h,p){var T="js";if(f(i)){var b=i;i=d(b,"key"),n=d(b,"url"),p=d(b,"xhrSettings"),T=d(b,"extension",T),r=d(b,"start"),h=d(b,"mapping")}var S={type:"plugin",cache:!1,extension:T,responseType:"text",key:i,url:n,xhrSettings:p,config:{start:r,mapping:h}};a.call(this,t,S),"function"==typeof n&&(this.data=n,this.state=o.FILE_POPULATED)},onProcess:function(){var t=this.loader.systems.plugins,i=this.config,n=d(i,"start",!1),r=d(i,"mapping",null);if(this.state===o.FILE_POPULATED)t.install(this.key,this.data,n,r);else{this.state=o.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var a=t.install(this.key,window[this.key],n,r);(n||r)&&(this.loader.systems[r]=a,this.loader.scene[r]=a)}this.onProcessComplete()}});h.register("plugin",(function(t,i,n,r,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new p(this,t[a]));else this.addFile(new p(this,t,i,n,r,o));return this})),t.exports=p},function(t,i,n){var r=n(0),o=n(21),a=n(23),h=n(8),d=n(2),f=n(7),p=new r({Extends:a,initialize:function SceneFile2(t,i,n,r){var o="js";if(f(i)){var h=i;i=d(h,"key"),n=d(h,"url"),r=d(h,"xhrSettings"),o=d(h,"extension",o)}var p={type:"text",extension:o,responseType:"text",key:i,url:n,xhrSettings:r};a.call(this,t,p)},onProcess:function(){this.state=o.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t=this.data.concat("(function(){\nreturn new "+this.key+"();\n}).call(this);"),i=eval;this.loader.sceneManager.add(this.key,i(t)),this.complete=!0}});h.register("sceneFile",(function(t,i,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new p(this,t[r]));else this.addFile(new p(this,t,i,n));return this})),t.exports=p},function(t,i,n){var r=n(0),o=n(21),a=n(23),h=n(8),d=n(2),f=n(7),p=new r({Extends:a,initialize:function ScenePluginFile2(t,i,n,r,h,p){var T="js";if(f(i)){var b=i;i=d(b,"key"),n=d(b,"url"),p=d(b,"xhrSettings"),T=d(b,"extension",T),r=d(b,"systemKey"),h=d(b,"sceneKey")}var S={type:"scenePlugin",cache:!1,extension:T,responseType:"text",key:i,url:n,xhrSettings:p,config:{systemKey:r,sceneKey:h}};a.call(this,t,S),"function"==typeof n&&(this.data=n,this.state=o.FILE_POPULATED)},onProcess:function(){var t=this.loader.systems.plugins,i=this.config,n=this.key,r=d(i,"systemKey",n),a=d(i,"sceneKey",n);this.state===o.FILE_POPULATED?t.installScenePlugin(r,this.data,a,this.loader.scene,!0):(this.state=o.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),t.installScenePlugin(r,window[this.key],a,this.loader.scene,!0)),this.onProcessComplete()}});h.register("scenePlugin",(function(t,i,n,r,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new p(this,t[a]));else this.addFile(new p(this,t,i,n,r,o));return this})),t.exports=p},function(t,i,n){var r=n(0),o=n(8),a=n(71),h=new r({Extends:a,initialize:function SpriteSheetFile2(t,i,n,r,o){a.call(this,t,i,n,o,r),this.type="spritesheet"},addToCache:function(){var t=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(t)}});o.register("spritesheet",(function(t,i,n,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new h(this,t[o]));else this.addFile(new h(this,t,i,n,r));return this})),t.exports=h},function(t,i,n){var r=n(0),o=n(21),a=n(23),h=n(8),d=n(2),f=n(7),p=new r({Extends:a,initialize:function SVGFile2(t,i,n,r,o){var h="svg";if(f(i)){var p=i;i=d(p,"key"),n=d(p,"url"),r=d(p,"svgConfig",{}),o=d(p,"xhrSettings"),h=d(p,"extension",h)}var T={type:"svg",cache:t.textureManager,extension:h,responseType:"text",key:i,url:n,xhrSettings:o,config:{width:d(r,"width"),height:d(r,"height"),scale:d(r,"scale")}};a.call(this,t,T)},onProcess:function(){this.state=o.FILE_PROCESSING;var t=this.xhrLoader.responseText,i=[t],n=this.config.width,r=this.config.height,h=this.config.scale;t:if(n&&r||h){var d=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("svg")[0],f=d.hasAttribute("viewBox"),p=parseFloat(d.getAttribute("width")),T=parseFloat(d.getAttribute("height"));if(!f&&p&&T)d.setAttribute("viewBox","0  0 "+p+" "+T);else if(f&&!p&&!T){var b=d.getAttribute("viewBox").split(/\s+|,/);p=b[2],T=b[3]}if(h){if(!p||!T)break t;n=p*h,r=T*h}d.setAttribute("width",n.toString()+"px"),d.setAttribute("height",r.toString()+"px"),i=[(new XMLSerializer).serializeToString(d)]}try{var S=new window.Blob(i,{type:"image/svg+xml;charset=utf-8"})}catch(O){return void this.onProcessError()}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var A=this,P=!1;this.data.onload=function(){P||a.revokeObjectURL(A.data),A.onProcessComplete()},this.data.onerror=function(){P?A.onProcessError():(P=!0,a.revokeObjectURL(A.data),A.data.src="data:image/svg+xml,"+encodeURIComponent(i.join("")))},a.createObjectURL(this.data,S,"image/svg+xml")},addToCache:function(){var t=this.cache.addImage(this.key,this.data);this.pendingDestroy(t)}});h.register("svg",(function(t,i,n,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new p(this,t[o]));else this.addFile(new p(this,t,i,n,r));return this})),t.exports=p},function(t,i,n){var r=n(0),o=n(21),a=n(23),h=n(8),d=n(2),f=n(7),p=n(40),T=new r({Extends:a,initialize:function TilemapCSVFile2(t,i,n,r){var o="csv";if(f(i)){var h=i;i=d(h,"key"),n=d(h,"url"),r=d(h,"xhrSettings"),o=d(h,"extension",o)}var T={type:"tilemapCSV",cache:t.cacheManager.tilemap,extension:o,responseType:"text",key:i,url:n,xhrSettings:r};a.call(this,t,T),this.tilemapFormat=p.CSV},onProcess:function(){this.state=o.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});h.register("tilemapCSV",(function(t,i,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new T(this,t[r]));else this.addFile(new T(this,t,i,n));return this})),t.exports=T},function(t,i,n){var r=n(0),o=n(8),a=n(61),h=n(40),d=new r({Extends:a,initialize:function TilemapImpactFile2(t,i,n,r){a.call(this,t,i,n,r),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var t={format:h.WELTMEISTER,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});o.register("tilemapImpact",(function(t,i,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new d(this,t[r]));else this.addFile(new d(this,t,i,n));return this})),t.exports=d},function(t,i,n){var r=n(0),o=n(8),a=n(61),h=n(40),d=new r({Extends:a,initialize:function TilemapJSONFile2(t,i,n,r){a.call(this,t,i,n,r),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var t={format:h.TILED_JSON,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});o.register("tilemapTiledJSON",(function(t,i,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new d(this,t[r]));else this.addFile(new d(this,t,i,n));return this})),t.exports=d},function(t,i,n){var r=n(0),o=n(8),a=n(2),h=n(71),d=n(7),f=n(49),p=n(242),T=new r({Extends:f,initialize:function UnityAtlasFile2(t,i,n,r,o,T){var b,S;if(d(i)){var A=i;i=a(A,"key"),b=new h(t,{key:i,url:a(A,"textureURL"),extension:a(A,"textureExtension","png"),normalMap:a(A,"normalMap"),xhrSettings:a(A,"textureXhrSettings")}),S=new p(t,{key:i,url:a(A,"atlasURL"),extension:a(A,"atlasExtension","txt"),xhrSettings:a(A,"atlasXhrSettings")})}else b=new h(t,i,n,o),S=new p(t,i,r,T);b.linkFile?f.call(this,t,"unityatlas",i,[b,S,b.linkFile]):f.call(this,t,"unityatlas",i,[b,S])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],i=this.files[1],n=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(t.key,t.data,i.data,n),i.pendingDestroy(),this.complete=!0}}});o.register("unityAtlas",(function(t,i,n,r,o){var a;if(Array.isArray(t))for(var h=0;h<t.length;h++)a=new T(this,t[h]),this.addFile(a.files);else a=new T(this,t,i,n,r,o),this.addFile(a.files);return this})),t.exports=T},function(t,i,n){var r=n(0),o=n(21),a=n(23),h=n(8),d=n(155),f=n(2),p=n(7),T=new r({Extends:a,initialize:function VideoFile2(t,i,n,r,o,h,d){void 0===r&&(r="loadeddata"),void 0===o&&(o=!1),void 0===h&&(h=!1),"loadeddata"!==r&&"canplay"!==r&&"canplaythrough"!==r&&(r="loadeddata");var f={type:"video",cache:t.cacheManager.video,extension:n.type,responseType:"blob",key:i,url:n.url,xhrSettings:d,config:{loadEvent:r,asBlob:o,noAudio:h}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),a.call(this,t,f)},onProcess:function(){if(this.state=o.FILE_PROCESSING,this.config.asBlob){var t=this.createVideoElement();this.data=t;var i=this;this.data.onloadeddata=function(){i.onProcessComplete()},this.data.onerror=function(){a.revokeObjectURL(i.data),i.onProcessError()},a.createObjectURL(t,this.xhrLoader.response,""),t.load()}else this.onProcessComplete()},createVideoElement:function(){var t=document.createElement("video");return t.controls=!1,t.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(t.muted=!0,t.defaultMuted=!0,t.setAttribute("autoplay","autoplay")),t.setAttribute("playsinline","playsinline"),t.setAttribute("preload","auto"),t},onVideoLoadHandler:function(t){var i=t.target;i.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),i.removeEventListener("error",this.onErrorCallback,!0),this.data=i,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(t){var i=t.target;i&&(i.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),i.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var t=this.config.loadEvent;if(this.config.asBlob)a.prototype.load.call(this);else{this.percentComplete=0;var i=this.createVideoElement();i.addEventListener(t,this.onLoadCallback,!0),i.addEventListener("error",this.onErrorCallback,!0),i.src=d(this,this.loader.baseURL),i.load()}}});T.create=function(t,i,n,r,o,a,h){var d=t.systems.game;p(i)&&(n=f(i,"url",[]),r=f(i,"loadEvent","loadeddata"),o=f(i,"asBlob",!1),a=f(i,"noAudio",!1),h=f(i,"xhrSettings"),i=f(i,"key"));var b=T.getVideoURL(d,n);if(b)return new T(t,i,b,r,o,a,h)},T.getVideoURL=function(t,i){Array.isArray(i)||(i=[i]);for(var n=0;n<i.length;n++){var r,o=f(i[n],"url",i[n]);if(0===o.indexOf("blob:"))return{url:o,type:""};if(r=0===o.indexOf("data:")?o.split(",")[0].match(/\/(.*?);/):o.match(/\.([a-zA-Z0-9]+)($|\?)/),r=f(i[n],"type",r?r[1]:"").toLowerCase(),t.device.video[r])return{url:o,type:r}}return null},h.register("video",(function(t,i,n,r,o,a){var h;if(Array.isArray(t))for(var d=0;d<t.length;d++)(h=T.create(this,t[d]))&&this.addFile(h);else(h=T.create(this,t,i,n,r,o,a))&&this.addFile(h);return this})),t.exports=T},function(t,i,n){var r=n(0),o=n(21),a=n(149),h=n(9),d=n(95),f=n(8),p=n(2),T=n(24),b=n(20),S=n(156),A=new r({Extends:h,initialize:function LoaderPlugin2(t){h.call(this);var i=t.sys.game.config,n=t.sys.settings.loader;this.scene=t,this.systems=t.sys,this.cacheManager=t.sys.cache,this.textureManager=t.sys.textures,this.sceneManager=t.sys.game.scene,f.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(p(n,"baseURL",i.loaderBaseURL)),this.setPath(p(n,"path",i.loaderPath)),this.setPrefix(p(n,"prefix",i.loaderPrefix)),this.maxParallelDownloads=p(n,"maxParallelDownloads",i.loaderMaxParallelDownloads),this.xhr=S(p(n,"responseType",i.loaderResponseType),p(n,"async",i.loaderAsync),p(n,"user",i.loaderUser),p(n,"password",i.loaderPassword),p(n,"timeout",i.loaderTimeout),p(n,"withCredentials",i.loaderWithCredentials)),this.crossOrigin=p(n,"crossOrigin",i.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new a,this.inflight=new a,this.queue=new a,this._deleteQueue=new a,this.totalFailed=0,this.totalComplete=0,this.state=o.LOADER_IDLE,this.multiKeyIndex=0,t.sys.events.once(b.BOOT,this.boot,this),t.sys.events.on(b.START,this.pluginStart,this)},boot:function(){this.systems.events.once(b.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(b.SHUTDOWN,this.shutdown,this)},setBaseURL:function(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.baseURL=t,this},setPath:function(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.path=t,this},setPrefix:function(t){return void 0===t&&(t=""),this.prefix=t,this},setCORS:function(t){return this.crossOrigin=t,this},addFile:function(t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var n=t[i];this.keyExists(n)||(this.list.set(n),this.emit(d.ADD,n.key,n.type,this,n),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(t){var i=t.hasCacheConflict();return i||this.list.iterate((function(n){if(n.type===t.type&&n.key===t.key)return i=!0,!1})),!i&&this.isLoading()&&(this.inflight.iterate((function(n){if(n.type===t.type&&n.key===t.key)return i=!0,!1})),this.queue.iterate((function(n){if(n.type===t.type&&n.key===t.key)return i=!0,!1}))),i},addPack:function(t,i){i&&t.hasOwnProperty(i)&&(t={packKey:t[i]});var n=0,r=this.baseURL,o=this.path,a=this.prefix;for(var h in t)if(Object.prototype.hasOwnProperty.call(t,h)){var d=t[h],f=p(d,"baseURL",r),T=p(d,"path",o),b=p(d,"prefix",a),S=p(d,"files",null),A=p(d,"defaultType","void");if(Array.isArray(S)){this.setBaseURL(f),this.setPath(T),this.setPrefix(b);for(var P=0;P<S.length;P++){var O=S[P],L=O.hasOwnProperty("type")?O.type:A;this[L]&&(this[L](O),n++)}}}return this.setBaseURL(r),this.setPath(o),this.setPrefix(a),n>0},isLoading:function(){return this.state===o.LOADER_LOADING||this.state===o.LOADER_PROCESSING},isReady:function(){return this.state===o.LOADER_IDLE||this.state===o.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(d.START,this),0===this.list.size?this.loadComplete():(this.state=o.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(b.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(d.PROGRESS,this.progress)},update:function(){this.state===o.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each((function(t){if((t.state===o.FILE_POPULATED||t.state===o.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(t),this.list.delete(t),t.crossOrigin||(t.crossOrigin=this.crossOrigin),t.load()),this.inflight.size===this.maxParallelDownloads)return!1}),this)},nextFile:function(t,i){this.inflight&&(this.inflight.delete(t),this.updateProgress(),i?(this.totalComplete++,this.queue.set(t),this.emit(d.FILE_LOAD,t),t.onProcess()):(this.totalFailed++,this._deleteQueue.set(t),this.emit(d.FILE_LOAD_ERROR,t),this.fileProcessComplete(t)))},fileProcessComplete:function(t){this.scene&&this.systems&&this.systems.game&&!this.systems.game.pendingDestroy&&(t.state===o.FILE_ERRORED?t.multiFile&&t.multiFile.onFileFailed(t):t.state===o.FILE_COMPLETE&&(t.multiFile?t.multiFile.isReadyToProcess()&&t.multiFile.addToCache():t.addToCache()),this.queue.delete(t),0===this.list.size&&0===this.inflight.size&&0===this.queue.size&&this.loadComplete())},loadComplete:function(){this.emit(d.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=o.LOADER_COMPLETE,this.systems.events.off(b.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(d.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(t){this._deleteQueue.set(t)},saveJSON:function(t,i){return this.save(JSON.stringify(t),i)},save:function(t,i,n){void 0===i&&(i="file.json"),void 0===n&&(n="application/json");var r=new Blob([t],{type:n}),o=URL.createObjectURL(r),a=document.createElement("a");return a.download=i,a.textContent="Download "+i,a.href=o,a.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var t=this.systems.game.config,i=this.systems.settings.loader;this.setBaseURL(p(i,"baseURL",t.loaderBaseURL)),this.setPath(p(i,"path",t.loaderPath)),this.setPrefix(p(i,"prefix",t.loaderPrefix)),this.state=o.LOADER_IDLE},shutdown:function(){this.reset(),this.state=o.LOADER_SHUTDOWN,this.systems.events.off(b.UPDATE,this.update,this),this.systems.events.off(b.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=o.LOADER_DESTROYED,this.systems.events.off(b.UPDATE,this.update,this),this.systems.events.off(b.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});T.register("Loader",A,"load"),t.exports=A},function(t,i,n){var r=n(62),o=n(17),a={ArcadePhysics:n(1367),Body:n(527),Collider:n(528),Components:n(243),Events:n(245),Factory:n(521),GetOverlapX:n(246),GetOverlapY:n(247),SeparateX:n(537),SeparateY:n(538),Group:n(524),Image:n(522),Sprite:n(157),StaticBody:n(539),StaticGroup:n(525),Tilemap:n(1391),World:n(526)};a=o(!1,a,r),t.exports=a},function(t,i,n){var r=n(0),o=n(36),a=n(50),h=n(353),d=n(521),f=n(2),p=n(127),T=n(523),b=n(244),S=n(24),A=n(20),P=n(3),O=n(526),L=new r({initialize:function ArcadePhysics2(t){this.scene=t,this.systems=t.sys,this.config=this.getConfig(),this.world,this.add,t.sys.events.once(A.BOOT,this.boot,this),t.sys.events.on(A.START,this.start,this)},boot:function(){this.world=new O(this.scene,this.config),this.add=new d(this.world),this.systems.events.once(A.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new O(this.scene,this.config),this.add=new d(this.world));var t=this.systems.events;f(this.config,"customUpdate",!1)||t.on(A.UPDATE,this.world.update,this.world),t.on(A.POST_UPDATE,this.world.postUpdate,this.world),t.once(A.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(A.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(A.UPDATE,this.world.update,this.world)},getConfig:function(){var t=this.systems.game.config.physics,i=this.systems.settings.physics;return p(f(i,"arcade",{}),f(t,"arcade",{}))},overlap:function(t,i,n,r,o){return void 0===n&&(n=null),void 0===r&&(r=null),void 0===o&&(o=n),this.world.collideObjects(t,i,n,r,o,!0)},collide:function(t,i,n,r,o){return void 0===n&&(n=null),void 0===r&&(r=null),void 0===o&&(o=n),this.world.collideObjects(t,i,n,r,o,!1)},collideTiles:function(t,i,n,r,o){return this.world.collideTiles(t,i,n,r,o)},overlapTiles:function(t,i,n,r,o){return this.world.overlapTiles(t,i,n,r,o)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(t,i,n,r,o,a){void 0===r&&(r=60);var h=Math.atan2(n-t.y,i-t.x);return t.body.acceleration.setToPolar(h,r),void 0!==o&&void 0!==a&&t.body.maxVelocity.set(o,a),h},accelerateToObject:function(t,i,n,r,o){return this.accelerateTo(t,i.x,i.y,n,r,o)},closest:function(t,i){i||(i=this.world.bodies.entries);for(var n=Number.MAX_VALUE,r=null,o=t.x,a=t.y,d=i.length,f=0;f<d;f++){var p=i[f],T=p.body||p;if(t!==p&&t!==T&&t!==T.gameObject&&t!==T.center){var b=h(o,a,T.center.x,T.center.y);b<n&&(r=p,n=b)}}return r},furthest:function(t,i){i||(i=this.world.bodies.entries);for(var n=-1,r=null,o=t.x,a=t.y,d=i.length,f=0;f<d;f++){var p=i[f],T=p.body||p;if(t!==p&&t!==T&&t!==T.gameObject&&t!==T.center){var b=h(o,a,T.center.x,T.center.y);b>n&&(r=p,n=b)}}return r},moveTo:function(t,i,n,r,o){void 0===r&&(r=60),void 0===o&&(o=0);var h=Math.atan2(n-t.y,i-t.x);return o>0&&(r=a(t.x,t.y,i,n)/(o/1e3)),t.body.velocity.setToPolar(h,r),h},moveToObject:function(t,i,n,r){return this.moveTo(t,i.x,i.y,n,r)},velocityFromAngle:function(t,i,n){return void 0===i&&(i=60),void 0===n&&(n=new P),n.setToPolar(o(t),i)},velocityFromRotation:function(t,i,n){return void 0===i&&(i=60),void 0===n&&(n=new P),n.setToPolar(t,i)},overlapRect:function(t,i,n,r,o,a){return b(this.world,t,i,n,r,o,a)},overlapCirc:function(t,i,n,r,o){return T(this.world,t,i,n,r,o)},shutdown:function(){if(this.world){var t=this.systems.events;t.off(A.UPDATE,this.world.update,this.world),t.off(A.POST_UPDATE,this.world.postUpdate,this.world),t.off(A.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(A.START,this.start,this),this.scene=null,this.systems=null}});S.register("ArcadePhysics",L,"arcadePhysics"),t.exports=L},function(t,i){t.exports={setAcceleration:function(t,i){return this.body.acceleration.set(t,i),this},setAccelerationX:function(t){return this.body.acceleration.x=t,this},setAccelerationY:function(t){return this.body.acceleration.y=t,this}}},function(t,i){t.exports={setAngularVelocity:function(t){return this.body.angularVelocity=t,this},setAngularAcceleration:function(t){return this.body.angularAcceleration=t,this},setAngularDrag:function(t){return this.body.angularDrag=t,this}}},function(t,i){t.exports={setBounce:function(t,i){return this.body.bounce.set(t,i),this},setBounceX:function(t){return this.body.bounce.x=t,this},setBounceY:function(t){return this.body.bounce.y=t,this},setCollideWorldBounds:function(t,i,n){return this.body.setCollideWorldBounds(t,i,n),this}}},function(t,i){t.exports={setDebug:function(t,i,n){return this.debugShowBody=t,this.debugShowVelocity=i,this.debugBodyColor=n,this},setDebugBodyColor:function(t){return this.body.debugBodyColor=t,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(t){this.body.debugShowBody=t}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(t){this.body.debugShowVelocity=t}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(t){this.body.debugBodyColor=t}}}},function(t,i){t.exports={setDrag:function(t,i){return this.body.drag.set(t,i),this},setDragX:function(t){return this.body.drag.x=t,this},setDragY:function(t){return this.body.drag.y=t,this},setDamping:function(t){return this.body.useDamping=t,this}}},function(t,i){t.exports={enableBody:function(t,i,n,r,o){return t&&this.body.reset(i,n),r&&(this.body.gameObject.active=!0),o&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(t,i){return void 0===t&&(t=!1),void 0===i&&(i=!1),this.body.stop(),this.body.enable=!1,t&&(this.body.gameObject.active=!1),i&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}}},function(t,i){t.exports={setFriction:function(t,i){return this.body.friction.set(t,i),this},setFrictionX:function(t){return this.body.friction.x=t,this},setFrictionY:function(t){return this.body.friction.y=t,this}}},function(t,i){t.exports={setGravity:function(t,i){return this.body.gravity.set(t,i),this},setGravityX:function(t){return this.body.gravity.x=t,this},setGravityY:function(t){return this.body.gravity.y=t,this}}},function(t,i){t.exports={setImmovable:function(t){return void 0===t&&(t=!0),this.body.immovable=t,this}}},function(t,i){t.exports={setMass:function(t){return this.body.mass=t,this}}},function(t,i){t.exports={setPushable:function(t){return void 0===t&&(t=!0),this.body.pushable=t,this}}},function(t,i){t.exports={setOffset:function(t,i){return this.body.setOffset(t,i),this},setSize:function(t,i,n){return this.body.setSize(t,i,n),this},setBodySize:function(t,i,n){return this.body.setSize(t,i,n),this},setCircle:function(t,i,n){return this.body.setCircle(t,i,n),this}}},function(t,i){t.exports={setVelocity:function(t,i){return this.body.setVelocity(t,i),this},setVelocityX:function(t){return this.body.setVelocityX(t),this},setVelocityY:function(t){return this.body.setVelocityY(t),this},setMaxVelocity:function(t,i){return this.body.maxVelocity.set(t,i),this}}},function(t,i){t.exports="collide"},function(t,i){t.exports="overlap"},function(t,i){t.exports="pause"},function(t,i){t.exports="resume"},function(t,i){t.exports="tilecollide"},function(t,i){t.exports="tileoverlap"},function(t,i){t.exports="worldbounds"},function(t,i){t.exports="worldstep"},function(t,i){var n,r,o,a,h,d,f,p,T,b,S,A,P,O,L,D,I,BlockCheck=function(){return b&&L&&r.blocked.right?(n.processX(-I,f,!1,!0),1):T&&D&&r.blocked.left?(n.processX(I,f,!0),1):P&&D&&n.blocked.right?(r.processX(-I,p,!1,!0),2):A&&L&&n.blocked.left?(r.processX(I,p,!0),2):0},Run=function(t){if(o&&a)I*=.5,0===t||3===t?(n.processX(I,h),r.processX(-I,d)):(n.processX(-I,h),r.processX(I,d));else if(o&&!a)0===t||3===t?n.processX(I,f,!0):n.processX(-I,f,!1,!0);else if(!o&&a)0===t||3===t?r.processX(-I,p,!1,!0):r.processX(I,p,!0);else{var i=.5*I;0===t?O?(n.processX(I,0,!0),r.processX(0,null,!1,!0)):P?(n.processX(i,0,!0),r.processX(-i,0,!1,!0)):(n.processX(i,r.velocity.x,!0),r.processX(-i,null,!1,!0)):1===t?S?(n.processX(0,null,!1,!0),r.processX(I,0,!0)):b?(n.processX(-i,0,!1,!0),r.processX(i,0,!0)):(n.processX(-i,null,!1,!0),r.processX(i,n.velocity.x,!0)):2===t?O?(n.processX(-I,0,!1,!0),r.processX(0,null,!0)):A?(n.processX(-i,0,!1,!0),r.processX(i,0,!0)):(n.processX(-i,r.velocity.x,!1,!0),r.processX(i,null,!0)):3===t&&(S?(n.processX(0,null,!0),r.processX(-I,0,!1,!0)):T?(n.processX(i,0,!0),r.processX(-i,0,!1,!0)):(n.processX(i,r.velocity.y,!0),r.processX(-i,null,!1,!0)))}return!0};t.exports={BlockCheck:BlockCheck,Check:function(){var t=n.velocity.x,i=r.velocity.x,o=Math.sqrt(i*i*r.mass/n.mass)*(i>0?1:-1),a=Math.sqrt(t*t*n.mass/r.mass)*(t>0?1:-1),f=.5*(o+a);return a-=f,h=f+(o-=f)*n.bounce.x,d=f+a*r.bounce.x,T&&D?Run(0):A&&L?Run(1):b&&L?Run(2):!(!P||!D)&&Run(3)},Set:function(t,i,h){r=i;var d=(n=t).velocity.x,F=r.velocity.x;return o=n.pushable,T=n._dx<0,b=n._dx>0,S=0===n._dx,L=Math.abs(n.right-r.x)<=Math.abs(r.right-n.x),f=F-d*n.bounce.x,a=r.pushable,A=r._dx<0,P=r._dx>0,O=0===r._dx,D=!L,p=d-F*r.bounce.x,I=Math.abs(h),BlockCheck()},Run:Run,RunImmovableBody1:function(t){1===t?r.velocity.x=0:L?r.processX(I,p,!0):r.processX(-I,p,!1,!0),n.moves&&(r.y+=(n.y-n.prev.y)*n.friction.y,r._dy=r.y-r.prev.y)},RunImmovableBody2:function(t){2===t?n.velocity.x=0:D?n.processX(I,f,!0):n.processX(-I,f,!1,!0),r.moves&&(n.y+=(r.y-r.prev.y)*r.friction.y,n._dy=n.y-n.prev.y)}}},function(t,i){var n,r,o,a,h,d,f,p,T,b,S,A,P,O,L,D,I,BlockCheck=function(){return b&&L&&r.blocked.down?(n.processY(-I,f,!1,!0),1):T&&D&&r.blocked.up?(n.processY(I,f,!0),1):P&&D&&n.blocked.down?(r.processY(-I,p,!1,!0),2):A&&L&&n.blocked.up?(r.processY(I,p,!0),2):0},Run=function(t){if(o&&a)I*=.5,0===t||3===t?(n.processY(I,h),r.processY(-I,d)):(n.processY(-I,h),r.processY(I,d));else if(o&&!a)0===t||3===t?n.processY(I,f,!0):n.processY(-I,f,!1,!0);else if(!o&&a)0===t||3===t?r.processY(-I,p,!1,!0):r.processY(I,p,!0);else{var i=.5*I;0===t?O?(n.processY(I,0,!0),r.processY(0,null,!1,!0)):P?(n.processY(i,0,!0),r.processY(-i,0,!1,!0)):(n.processY(i,r.velocity.y,!0),r.processY(-i,null,!1,!0)):1===t?S?(n.processY(0,null,!1,!0),r.processY(I,0,!0)):b?(n.processY(-i,0,!1,!0),r.processY(i,0,!0)):(n.processY(-i,null,!1,!0),r.processY(i,n.velocity.y,!0)):2===t?O?(n.processY(-I,0,!1,!0),r.processY(0,null,!0)):A?(n.processY(-i,0,!1,!0),r.processY(i,0,!0)):(n.processY(-i,r.velocity.y,!1,!0),r.processY(i,null,!0)):3===t&&(S?(n.processY(0,null,!0),r.processY(-I,0,!1,!0)):T?(n.processY(i,0,!0),r.processY(-i,0,!1,!0)):(n.processY(i,r.velocity.y,!0),r.processY(-i,null,!1,!0)))}return!0};t.exports={BlockCheck:BlockCheck,Check:function(){var t=n.velocity.y,i=r.velocity.y,o=Math.sqrt(i*i*r.mass/n.mass)*(i>0?1:-1),a=Math.sqrt(t*t*n.mass/r.mass)*(t>0?1:-1),f=.5*(o+a);return a-=f,h=f+(o-=f)*n.bounce.y,d=f+a*r.bounce.y,T&&D?Run(0):A&&L?Run(1):b&&L?Run(2):!(!P||!D)&&Run(3)},Set:function(t,i,h){r=i;var d=(n=t).velocity.y,F=r.velocity.y;return o=n.pushable,T=n._dy<0,b=n._dy>0,S=0===n._dy,L=Math.abs(n.bottom-r.y)<=Math.abs(r.bottom-n.y),f=F-d*n.bounce.y,a=r.pushable,A=r._dy<0,P=r._dy>0,O=0===r._dy,D=!L,p=d-F*r.bounce.y,I=Math.abs(h),BlockCheck()},Run:Run,RunImmovableBody1:function(t){1===t?r.velocity.y=0:L?r.processY(I,p,!0):r.processY(-I,p,!1,!0),n.moves&&(r.x+=(n.x-n.prev.x)*n.friction.x,r._dx=r.x-r.prev.x)},RunImmovableBody2:function(t){2===t?n.velocity.y=0:D?n.processY(I,f,!0):n.processY(-I,f,!1,!0),r.moves&&(n.x+=(r.x-r.prev.x)*r.friction.x,n._dx=n.x-n.prev.x)}}},function(t,i,n){var r={ProcessTileCallbacks:n(530),ProcessTileSeparationX:n(534),ProcessTileSeparationY:n(536),SeparateTile:n(532),TileCheckX:n(533),TileCheckY:n(535),TileIntersectsBody:n(248)};t.exports=r},function(t,i,n){var r=n(0),o=n(3),a=new r({initialize:function BodyBounds2(){this.boundsCenter=new o,this.centerDiff=new o},parseBody:function(t){if(!(t=t.hasOwnProperty("body")?t.body:t).hasOwnProperty("bounds")||!t.hasOwnProperty("centerOfMass"))return!1;var i=this.boundsCenter,n=this.centerDiff,r=t.bounds.max.x-t.bounds.min.x,o=t.bounds.max.y-t.bounds.min.y,a=r*t.centerOfMass.x,h=o*t.centerOfMass.y;return i.set(r/2,o/2),n.set(a-i.x,h-i.y),!0},getTopLeft:function(t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),this.parseBody(t)){var r=this.boundsCenter,a=this.centerDiff;return new o(i+r.x+a.x,n+r.y+a.y)}return!1},getTopCenter:function(t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),this.parseBody(t)){var r=this.boundsCenter,a=this.centerDiff;return new o(i+a.x,n+r.y+a.y)}return!1},getTopRight:function(t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),this.parseBody(t)){var r=this.boundsCenter,a=this.centerDiff;return new o(i-(r.x-a.x),n+r.y+a.y)}return!1},getLeftCenter:function(t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),this.parseBody(t)){var r=this.boundsCenter,a=this.centerDiff;return new o(i+r.x+a.x,n+a.y)}return!1},getCenter:function(t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),this.parseBody(t)){var r=this.centerDiff;return new o(i+r.x,n+r.y)}return!1},getRightCenter:function(t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),this.parseBody(t)){var r=this.boundsCenter,a=this.centerDiff;return new o(i-(r.x-a.x),n+a.y)}return!1},getBottomLeft:function(t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),this.parseBody(t)){var r=this.boundsCenter,a=this.centerDiff;return new o(i+r.x+a.x,n-(r.y-a.y))}return!1},getBottomCenter:function(t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),this.parseBody(t)){var r=this.boundsCenter,a=this.centerDiff;return new o(i+a.x,n-(r.y-a.y))}return!1},getBottomRight:function(t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),this.parseBody(t)){var r=this.boundsCenter,a=this.centerDiff;return new o(i-(r.x-a.x),n-(r.y-a.y))}return!1}});t.exports=a},function(t,i){function lineInt(t,i,n){n=n||0;var r,o,a,h,d,f,p,T=[0,0];return r=t[1][1]-t[0][1],o=t[0][0]-t[1][0],a=r*t[0][0]+o*t[0][1],h=i[1][1]-i[0][1],d=i[0][0]-i[1][0],f=h*i[0][0]+d*i[0][1],scalar_eq(p=r*d-h*o,0,n)||(T[0]=(d*a-o*f)/p,T[1]=(r*f-h*a)/p),T}function lineSegmentsIntersect(t,i,n,r){var o=i[0]-t[0],a=i[1]-t[1],h=r[0]-n[0],d=r[1]-n[1];if(h*a-d*o==0)return!1;var f=(o*(n[1]-t[1])+a*(t[0]-n[0]))/(h*a-d*o),p=(h*(t[1]-n[1])+d*(n[0]-t[0]))/(d*o-h*a);return f>=0&&f<=1&&p>=0&&p<=1}function triangleArea(t,i,n){return(i[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(i[1]-t[1])}function isLeft(t,i,n){return triangleArea(t,i,n)>0}function isLeftOn(t,i,n){return triangleArea(t,i,n)>=0}function isRight(t,i,n){return triangleArea(t,i,n)<0}function isRightOn(t,i,n){return triangleArea(t,i,n)<=0}t.exports={decomp:function polygonDecomp(t){var i=polygonGetCutEdges(t);return i.length>0?polygonSlice(t,i):[t]},quickDecomp:function polygonQuickDecomp(t,i,n,r,o,a,h){a=a||100,h=h||0,o=o||25,i=void 0!==i?i:[],n=n||[],r=r||[];var d=[0,0],f=[0,0],p=[0,0],T=0,b=0,S=0,A=0,P=0,O=0,L=0,D=[],I=[],F=t,B=t;if(B.length<3)return i;if(++h>a)return console.warn("quickDecomp: max level ("+a+") reached."),i;for(var N=0;N<t.length;++N)if(polygonIsReflex(F,N)){n.push(F[N]),T=b=Number.MAX_VALUE;for(var Y=0;Y<t.length;++Y)isLeft(polygonAt(F,N-1),polygonAt(F,N),polygonAt(F,Y))&&isRightOn(polygonAt(F,N-1),polygonAt(F,N),polygonAt(F,Y-1))&&(p=getIntersectionPoint(polygonAt(F,N-1),polygonAt(F,N),polygonAt(F,Y),polygonAt(F,Y-1)),isRight(polygonAt(F,N+1),polygonAt(F,N),p)&&(S=sqdist(F[N],p))<b&&(b=S,f=p,O=Y)),isLeft(polygonAt(F,N+1),polygonAt(F,N),polygonAt(F,Y+1))&&isRightOn(polygonAt(F,N+1),polygonAt(F,N),polygonAt(F,Y))&&(p=getIntersectionPoint(polygonAt(F,N+1),polygonAt(F,N),polygonAt(F,Y),polygonAt(F,Y+1)),isLeft(polygonAt(F,N-1),polygonAt(F,N),p)&&(S=sqdist(F[N],p))<T&&(T=S,d=p,P=Y));if(O===(P+1)%t.length)p[0]=(f[0]+d[0])/2,p[1]=(f[1]+d[1])/2,r.push(p),N<P?(polygonAppend(D,F,N,P+1),D.push(p),I.push(p),0!==O&&polygonAppend(I,F,O,F.length),polygonAppend(I,F,0,N+1)):(0!==N&&polygonAppend(D,F,N,F.length),polygonAppend(D,F,0,P+1),D.push(p),I.push(p),polygonAppend(I,F,O,N+1));else{if(O>P&&(P+=t.length),A=Number.MAX_VALUE,P<O)return i;for(Y=O;Y<=P;++Y)isLeftOn(polygonAt(F,N-1),polygonAt(F,N),polygonAt(F,Y))&&isRightOn(polygonAt(F,N+1),polygonAt(F,N),polygonAt(F,Y))&&(S=sqdist(polygonAt(F,N),polygonAt(F,Y)))<A&&polygonCanSee2(F,N,Y)&&(A=S,L=Y%t.length);N<L?(polygonAppend(D,F,N,L+1),0!==L&&polygonAppend(I,F,L,B.length),polygonAppend(I,F,0,N+1)):(0!==N&&polygonAppend(D,F,N,B.length),polygonAppend(D,F,0,L+1),polygonAppend(I,F,L,N+1))}return D.length<I.length?(polygonQuickDecomp(D,i,n,r,o,a,h),polygonQuickDecomp(I,i,n,r,o,a,h)):(polygonQuickDecomp(I,i,n,r,o,a,h),polygonQuickDecomp(D,i,n,r,o,a,h)),i}return i.push(t),i},isSimple:function polygonIsSimple(t){var i,n=t;for(i=0;i<n.length-1;i++)for(var r=0;r<i-1;r++)if(lineSegmentsIntersect(n[i],n[i+1],n[r],n[r+1]))return!1;for(i=1;i<n.length-2;i++)if(lineSegmentsIntersect(n[0],n[n.length-1],n[i],n[i+1]))return!1;return!0},removeCollinearPoints:function polygonRemoveCollinearPoints(t,i){for(var n=0,r=t.length-1;t.length>3&&r>=0;--r)collinear(polygonAt(t,r-1),polygonAt(t,r),polygonAt(t,r+1),i)&&(t.splice(r%t.length,1),n++);return n},removeDuplicatePoints:function polygonRemoveDuplicatePoints(t,i){for(var n=t.length-1;n>=1;--n)for(var r=t[n],o=n-1;o>=0;--o)points_eq(r,t[o],i)&&t.splice(n,1)},makeCCW:function polygonMakeCCW(t){for(var i=0,n=t,r=1;r<t.length;++r)(n[r][1]<n[i][1]||n[r][1]===n[i][1]&&n[r][0]>n[i][0])&&(i=r);return!isLeft(polygonAt(t,i-1),polygonAt(t,i),polygonAt(t,i+1))&&(function polygonReverse(t){for(var i=[],n=t.length,r=0;r!==n;r++)i.push(t.pop());for(r=0;r!==n;r++)t[r]=i[r]}(t),!0)}};var n=[],r=[];function collinear(t,i,o,a){if(a){var h=n,d=r;h[0]=i[0]-t[0],h[1]=i[1]-t[1],d[0]=o[0]-i[0],d[1]=o[1]-i[1];var f=h[0]*d[0]+h[1]*d[1],p=Math.sqrt(h[0]*h[0]+h[1]*h[1]),T=Math.sqrt(d[0]*d[0]+d[1]*d[1]);return Math.acos(f/(p*T))<a}return 0===triangleArea(t,i,o)}function sqdist(t,i){var n=i[0]-t[0],r=i[1]-t[1];return n*n+r*r}function polygonAt(t,i){var n=t.length;return t[i<0?i%n+n:i%n]}function polygonAppend(t,i,n,r){for(var o=n;o<r;o++)t.push(i[o])}function polygonIsReflex(t,i){return isRight(polygonAt(t,i-1),polygonAt(t,i),polygonAt(t,i+1))}var o=[],a=[];function polygonCanSee(t,i,n){var r,h,d=o,f=a;if(isLeftOn(polygonAt(t,i+1),polygonAt(t,i),polygonAt(t,n))&&isRightOn(polygonAt(t,i-1),polygonAt(t,i),polygonAt(t,n)))return!1;h=sqdist(polygonAt(t,i),polygonAt(t,n));for(var p=0;p!==t.length;++p)if((p+1)%t.length!==i&&p!==i&&isLeftOn(polygonAt(t,i),polygonAt(t,n),polygonAt(t,p+1))&&isRightOn(polygonAt(t,i),polygonAt(t,n),polygonAt(t,p))&&(d[0]=polygonAt(t,i),d[1]=polygonAt(t,n),f[0]=polygonAt(t,p),f[1]=polygonAt(t,p+1),r=lineInt(d,f),sqdist(polygonAt(t,i),r)<h))return!1;return!0}function polygonCanSee2(t,i,n){for(var r=0;r!==t.length;++r)if(r!==i&&r!==n&&(r+1)%t.length!==i&&(r+1)%t.length!==n&&lineSegmentsIntersect(polygonAt(t,i),polygonAt(t,n),polygonAt(t,r),polygonAt(t,r+1)))return!1;return!0}function polygonCopy(t,i,n,r){var o=r||[];if(function polygonClear(t){t.length=0}(o),i<n)for(var a=i;a<=n;a++)o.push(t[a]);else{for(a=0;a<=n;a++)o.push(t[a]);for(a=i;a<t.length;a++)o.push(t[a])}return o}function polygonGetCutEdges(t){for(var i=[],n=[],r=[],o=[],a=Number.MAX_VALUE,h=0;h<t.length;++h)if(polygonIsReflex(t,h))for(var d=0;d<t.length;++d)if(polygonCanSee(t,h,d)){n=polygonGetCutEdges(polygonCopy(t,h,d,o)),r=polygonGetCutEdges(polygonCopy(t,d,h,o));for(var f=0;f<r.length;f++)n.push(r[f]);n.length<a&&(i=n,a=n.length,i.push([polygonAt(t,h),polygonAt(t,d)]))}return i}function polygonSlice(t,i){if(0===i.length)return[t];if(i instanceof Array&&i.length&&i[0]instanceof Array&&2===i[0].length&&i[0][0]instanceof Array){for(var n=[t],r=0;r<i.length;r++)for(var o=i[r],a=0;a<n.length;a++){var h=polygonSlice(n[a],o);if(h){n.splice(a,1),n.push(h[0],h[1]);break}}return n}return o=i,r=t.indexOf(o[0]),a=t.indexOf(o[1]),-1!==r&&-1!==a&&[polygonCopy(t,r,a),polygonCopy(t,a,r)]}function getIntersectionPoint(t,i,n,r,o){o=o||0;var a=i[1]-t[1],h=t[0]-i[0],d=a*t[0]+h*t[1],f=r[1]-n[1],p=n[0]-r[0],T=f*n[0]+p*n[1],b=a*p-f*h;return scalar_eq(b,0,o)?[0,0]:[(p*d-h*T)/b,(a*T-f*d)/b]}function scalar_eq(t,i,n){return n=n||0,Math.abs(t-i)<=n}function points_eq(t,i,n){return scalar_eq(t[0],i[0],n)&&scalar_eq(t[1],i[1],n)}},function(t,i,n){var r=n(86),o=n(0),a=n(591),h=n(128),d=n(592),f=n(1395),p=n(1396),T=n(1397),b=n(593),S=n(589),A=n(590),P=n(1398),O=n(64),L=new o({initialize:function Factory2(t){this.world=t,this.scene=t.scene,this.sys=t.scene.sys},rectangle:function(t,i,n,o,a){var h=r.rectangle(t,i,n,o,a);return this.world.add(h),h},trapezoid:function(t,i,n,o,a,h){var d=r.trapezoid(t,i,n,o,a,h);return this.world.add(d),d},circle:function(t,i,n,o,a){var h=r.circle(t,i,n,o,a);return this.world.add(h),h},polygon:function(t,i,n,o,a){var h=r.polygon(t,i,n,o,a);return this.world.add(h),h},fromVertices:function(t,i,n,o,a,h,d){"string"==typeof n&&(n=O.fromPath(n));var f=r.fromVertices(t,i,n,o,a,h,d);return this.world.add(f),f},fromPhysicsEditor:function(t,i,n,r,o){void 0===o&&(o=!0);var a=S.parseBody(t,i,n,r);return o&&!this.world.has(a)&&this.world.add(a),a},fromSVG:function(t,i,n,o,a,h){void 0===o&&(o=1),void 0===a&&(a={}),void 0===h&&(h=!0);for(var f=n.getElementsByTagName("path"),p=[],T=0;T<f.length;T++){var b=d.pathToVertices(f[T],30);1!==o&&O.scale(b,o,o),p.push(b)}var S=r.fromVertices(t,i,p,a);return h&&this.world.add(S),S},fromJSON:function(t,i,n,r,o){void 0===r&&(r={}),void 0===o&&(o=!0);var a=A.parseBody(t,i,n,r);return a&&o&&this.world.add(a),a},imageStack:function(t,i,n,r,o,h,d,f,T){void 0===d&&(d=0),void 0===f&&(f=0),void 0===T&&(T={});var b=this.world,S=this.sys.displayList;T.addToWorld=!1;var A=a.stack(n,r,o,h,d,f,(function(n,r){var o=new p(b,n,r,t,i,T);return S.add(o),o.body}));return b.add(A),A},stack:function(t,i,n,r,o,h,d){var f=a.stack(t,i,n,r,o,h,d);return this.world.add(f),f},pyramid:function(t,i,n,r,o,h,d){var f=a.pyramid(t,i,n,r,o,h,d);return this.world.add(f),f},chain:function(t,i,n,r,o,h){return a.chain(t,i,n,r,o,h)},mesh:function(t,i,n,r,o){return a.mesh(t,i,n,r,o)},newtonsCradle:function(t,i,n,r,o){var h=a.newtonsCradle(t,i,n,r,o);return this.world.add(h),h},car:function(t,i,n,r,o){var h=a.car(t,i,n,r,o);return this.world.add(h),h},softBody:function(t,i,n,r,o,h,d,f,p,T){var b=a.softBody(t,i,n,r,o,h,d,f,p,T);return this.world.add(b),b},joint:function(t,i,n,r,o){return this.constraint(t,i,n,r,o)},spring:function(t,i,n,r,o){return this.constraint(t,i,n,r,o)},constraint:function(t,i,n,r,o){void 0===r&&(r=1),void 0===o&&(o={}),o.bodyA="body"===t.type?t:t.body,o.bodyB="body"===i.type?i:i.body,isNaN(n)||(o.length=n),o.stiffness=r;var a=h.create(o);return this.world.add(a),a},worldConstraint:function(t,i,n,r){void 0===n&&(n=1),void 0===r&&(r={}),r.bodyB="body"===t.type?t:t.body,isNaN(i)||(r.length=i),r.stiffness=n;var o=h.create(r);return this.world.add(o),o},mouseSpring:function(t){return this.pointerConstraint(t)},pointerConstraint:function(t){void 0===t&&(t={}),t.hasOwnProperty("render")||(t.render={visible:!1});var i=new P(this.scene,this.world,t);return this.world.add(i.constraint),i},image:function(t,i,n,r,o){var a=new p(this.world,t,i,n,r,o);return this.sys.displayList.add(a),a},tileBody:function(t,i){return new b(this.world,t,i)},sprite:function(t,i,n,r,o){var a=new T(this.world,t,i,n,r,o);return this.sys.displayList.add(a),this.sys.updateList.add(a),a},gameObject:function(t,i,n){return f(this.world,t,i,n)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});t.exports=L},function(t,i,n){var r=n(249),o=n(2),a=n(3);t.exports=function(t,i,n,h){void 0===n&&(n={}),void 0===h&&(h=!0);var d=i.x,f=i.y;if(i.body={temp:!0,position:{x:d,y:f}},[r.Bounce,r.Collision,r.Force,r.Friction,r.Gravity,r.Mass,r.Sensor,r.SetBody,r.Sleep,r.Static,r.Transform,r.Velocity].forEach((function(t){for(var n in t)(r=t[n]).get&&"function"==typeof r.get||r.set&&"function"==typeof r.set?Object.defineProperty(i,n,{get:t[n].get,set:t[n].set}):Object.defineProperty(i,n,{value:t[n]});var r})),i.world=t,i._tempVec2=new a(d,f),n.hasOwnProperty("type")&&"body"===n.type)i.setExistingBody(n,h);else{var p=o(n,"shape",null);p||(p="rectangle"),n.addToWorld=h,i.setBody(p,n)}return i}},function(t,i,n){var r=n(0),o=n(249),a=n(15),h=n(2),d=n(125),f=n(167),p=n(3),T=new r({Extends:d,Mixins:[o.Bounce,o.Collision,o.Force,o.Friction,o.Gravity,o.Mass,o.Sensor,o.SetBody,o.Sleep,o.Static,o.Transform,o.Velocity,f],initialize:function MatterImage2(t,i,n,r,o,d){a.call(this,t.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(r,o),this.setSizeToFrame(),this.setOrigin(),this.world=t,this._tempVec2=new p(i,n);var f=h(d,"shape",null);f?this.setBody(f,d):this.setRectangle(this.width,this.height,d),this.setPosition(i,n),this.initPipeline()}});t.exports=T},function(t,i,n){var r=n(164),o=n(0),a=n(249),h=n(15),d=n(2),f=n(167),p=n(73),T=n(3),b=new o({Extends:p,Mixins:[a.Bounce,a.Collision,a.Force,a.Friction,a.Gravity,a.Mass,a.Sensor,a.SetBody,a.Sleep,a.Static,a.Transform,a.Velocity,f],initialize:function MatterSprite2(t,i,n,o,a,f){h.call(this,t.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new r(this),this.setTexture(o,a),this.setSizeToFrame(),this.setOrigin(),this.world=t,this._tempVec2=new T(i,n);var p=d(f,"shape",null);p?this.setBody(p,f):this.setRectangle(this.width,this.height,f),this.setPosition(i,n),this.initPipeline()}});t.exports=b},function(t,i,n){var r=n(84),o=n(0),a=n(118),h=n(128),d=n(273),f=n(272),p=n(51),T=n(127),b=n(165),S=n(3),A=n(64),P=new o({initialize:function PointerConstraint2(t,i,n){void 0===n&&(n={}),this.scene=t,this.world=i,this.camera=null,this.pointer=null,this.active=!0,this.position=new S,this.body=null,this.part=null,this.constraint=h.create(T(n,{label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}})),this.world.on(f.BEFORE_UPDATE,this.update,this),t.sys.input.on(p.POINTER_DOWN,this.onDown,this),t.sys.input.on(p.POINTER_UP,this.onUp,this)},onDown:function(t){this.pointer||(this.pointer=t,this.camera=t.camera)},onUp:function(t){t===this.pointer&&(this.pointer=null)},getBody:function(t){var i=this.position,n=this.constraint;this.camera.getWorldPoint(t.x,t.y,i);for(var o=a.allBodies(this.world.localWorld),h=0;h<o.length;h++){var p=o[h];if(!p.ignorePointer&&r.contains(p.bounds,i)&&d.canCollide(p.collisionFilter,n.collisionFilter)&&this.hitTestBody(p,i))return this.world.emit(f.DRAG_START,p,this.part,this),!0}return!1},hitTestBody:function(t,i){for(var n=this.constraint,r=t.parts.length,o=r>1?1:0;o<r;o++){var a=t.parts[o];if(A.contains(a.vertices,i))return n.pointA=i,n.pointB={x:i.x-t.position.x,y:i.y-t.position.y},n.bodyB=t,n.angleB=t.angle,b.set(t,!1),this.part=a,this.body=t,!0}return!1},update:function(){var t=this.pointer,i=this.body;if(this.active&&t)if(t.isDown||!i){if(t.isDown){if(!i&&!this.getBody(t))return;i=this.body;var n=this.position,r=this.constraint;this.camera.getWorldPoint(t.x,t.y,n),r.pointA.x=n.x,r.pointA.y=n.y,b.set(i,!1),this.world.emit(f.DRAG,i,this)}}else this.stopDrag();else i&&this.stopDrag()},stopDrag:function(){var t=this.body,i=this.constraint;i.bodyB=null,i.pointB=null,this.pointer=null,this.body=null,this.part=null,t&&this.world.emit(f.DRAG_END,t,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(f.BEFORE_UPDATE,this.update),this.scene.sys.input.off(p.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(p.POINTER_UP,this.onUp,this)}});t.exports=P},function(t,i,n){var r={};t.exports=r;var o=n(595),a=n(32);r.name="matter-js",r.version="0.14.2",r.uses=[],r.used=[],r.use=function(){o.use(r,Array.prototype.slice.call(arguments))},r.before=function(t,i){return t=t.replace(/^Matter./,""),a.chainPathBefore(r,t,i)},r.after=function(t,i){return t=t.replace(/^Matter./,""),a.chainPathAfter(r,t,i)}},function(t,i,n){var r={};t.exports=r;var o=n(83),a=n(274),h=n(84),d=n(86),f=n(64);r.collides=function(t,i){for(var n=[],r=0;r<i.length;r++){var o=i[r];if(t!==o&&h.overlaps(o.bounds,t.bounds))for(var d=1===o.parts.length?0:1;d<o.parts.length;d++){var f=o.parts[d];if(h.overlaps(f.bounds,t.bounds)){var p=a.collides(f,t);if(p.collided){n.push(p);break}}}}return n},r.ray=function(t,i,n,a){a=a||1e-100;for(var h=o.angle(i,n),f=o.magnitude(o.sub(i,n)),p=.5*(n.x+i.x),T=.5*(n.y+i.y),b=d.rectangle(p,T,f,a,{angle:h}),S=r.collides(b,t),A=0;A<S.length;A+=1){var P=S[A];P.body=P.bodyB=P.bodyA}return S},r.region=function(t,i,n){for(var r=[],o=0;o<t.length;o++){var a=t[o],d=h.overlaps(a.bounds,i);(d&&!n||!d&&n)&&r.push(a)}return r},r.point=function(t,i){for(var n=[],r=0;r<t.length;r++){var o=t[r];if(h.contains(o.bounds,i))for(var a=1===o.parts.length?0:1;a<o.parts.length;a++){var d=o.parts[a];if(h.contains(d.bounds,i)&&f.contains(d.vertices,i)){n.push(o);break}}}return n}},function(t,i,n){var r={};t.exports=r;var o=n(596),a=n(165),h=n(599),d=n(598),f=n(1523),p=n(597),T=n(166),b=n(118),S=n(128),A=n(32),P=n(41);r.create=function(t,i){i=(i=A.isElement(t)?i:t)||{},((t=A.isElement(t)?t:null)||i.render)&&A.warn("Engine.create: engine.render is deprecated (see docs)");var n={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:p}},r=A.extend(n,i);return r.world=i.world||o.create(r.world),r.pairs=d.create(),r.broadphase=r.broadphase.controller.create(r.broadphase),r.metrics=r.metrics||{extended:!1},r.metrics=f.create(r.metrics),r},r.update=function(t,i,n){i=i||1e3/60,n=n||1;var o,p=t.world,A=t.timing,P=t.broadphase,O=[];A.timestamp+=i*A.timeScale;var L={timestamp:A.timestamp};T.trigger(t,"beforeUpdate",L);var D=b.allBodies(p),I=b.allConstraints(p);for(f.reset(t.metrics),t.enableSleeping&&a.update(D,A.timeScale),r._bodiesApplyGravity(D,p.gravity),r._bodiesUpdate(D,i,A.timeScale,n,p.bounds),S.preSolveAll(D),o=0;o<t.constraintIterations;o++)S.solveAll(I,A.timeScale);S.postSolveAll(D),P.controller?(p.isModified&&P.controller.clear(P),P.controller.update(P,D,t,p.isModified),O=P.pairsList):O=D,p.isModified&&b.setModified(p,!1,!1,!0);var F=P.detector(O,t),B=t.pairs,N=A.timestamp;for(d.update(B,F,N),d.removeOld(B,N),t.enableSleeping&&a.afterCollisions(B.list,A.timeScale),B.collisionStart.length>0&&T.trigger(t,"collisionStart",{pairs:B.collisionStart}),h.preSolvePosition(B.list),o=0;o<t.positionIterations;o++)h.solvePosition(B.list,D,A.timeScale);for(h.postSolvePosition(D),S.preSolveAll(D),o=0;o<t.constraintIterations;o++)S.solveAll(I,A.timeScale);for(S.postSolveAll(D),h.preSolveVelocity(B.list),o=0;o<t.velocityIterations;o++)h.solveVelocity(B.list,A.timeScale);return B.collisionActive.length>0&&T.trigger(t,"collisionActive",{pairs:B.collisionActive}),B.collisionEnd.length>0&&T.trigger(t,"collisionEnd",{pairs:B.collisionEnd}),f.update(t.metrics,t),r._bodiesClearForces(D),T.trigger(t,"afterUpdate",L),t},r.merge=function(t,i){if(A.extend(t,i),i.world){t.world=i.world,r.clear(t);for(var n=b.allBodies(t.world),o=0;o<n.length;o++){var h=n[o];a.set(h,!1),h.id=A.nextId()}}},r.clear=function(t){var i=t.world;d.clear(t.pairs);var n=t.broadphase;if(n.controller){var r=b.allBodies(i);n.controller.clear(n),n.controller.update(n,r,t,!0)}},r._bodiesClearForces=function(t){for(var i=0;i<t.length;i++){var n=t[i];n.force.x=0,n.force.y=0,n.torque=0}},r._bodiesApplyGravity=function(t,i){var n=void 0!==i.scale?i.scale:.001;if((0!==i.x||0!==i.y)&&0!==n)for(var r=0;r<t.length;r++){var o=t[r];o.ignoreGravity||o.isStatic||o.isSleeping||(o.force.x+=o.mass*i.x*n*o.gravityScale.x,o.force.y+=o.mass*i.y*n*o.gravityScale.y)}},r._bodiesUpdate=function(t,i,n,r,o){for(var a=0;a<t.length;a++){var h=t[a];h.isStatic||h.isSleeping||P.update(h,i,n,r)}}},function(t,i,n){var r=n(86),o=n(41),a=n(0),h=n(32),d=n(118),f=n(1401),p=n(9),T=n(272),b=n(2),S=n(6),A=n(41),P=n(166),O=n(593),L=n(596),D=n(83),I=new a({Extends:p,initialize:function World3(t,i){p.call(this),this.scene=t,this.engine=f.create(i),this.localWorld=this.engine.world;var n=S(i,"gravity",null);n?this.setGravity(n.x,n.y,n.scale):!1===n&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=S(i,"enabled",!0),this.correction=S(i,"correction",1),this.getDelta=S(i,"getDelta",this.update60Hz);var r=b(i,"runner",{}),o=b(r,"fps",!1),a=b(r,"fps",60),h=b(r,"delta",1e3/a),d=b(r,"deltaMin",1e3/a),T=b(r,"deltaMax",1e3/(.5*a));o||(a=1e3/h),this.runner={fps:a,correction:b(r,"correction",1),deltaSampleSize:b(r,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:b(r,"isFixed",!1),delta:h,deltaMin:d,deltaMax:T},this.autoUpdate=S(i,"autoUpdate",!0);var A=S(i,"debug",!1);if(this.drawDebug="object"==typeof A||A,this.debugGraphic,this.debugConfig={showAxes:b(A,"showAxes",!1),showAngleIndicator:b(A,"showAngleIndicator",!1),angleColor:b(A,"angleColor",15208787),showBroadphase:b(A,"showBroadphase",!1),broadphaseColor:b(A,"broadphaseColor",16757760),showBounds:b(A,"showBounds",!1),boundsColor:b(A,"boundsColor",16777215),showVelocity:b(A,"showVelocity",!1),velocityColor:b(A,"velocityColor",44783),showCollisions:b(A,"showCollisions",!1),collisionColor:b(A,"collisionColor",16094476),showSeparations:b(A,"showSeparations",!1),separationColor:b(A,"separationColor",16753920),showBody:b(A,"showBody",!0),showStaticBody:b(A,"showStaticBody",!0),showInternalEdges:b(A,"showInternalEdges",!1),renderFill:b(A,"renderFill",!1),renderLine:b(A,"renderLine",!0),fillColor:b(A,"fillColor",1075465),fillOpacity:b(A,"fillOpacity",1),lineColor:b(A,"lineColor",2678297),lineOpacity:b(A,"lineOpacity",1),lineThickness:b(A,"lineThickness",1),staticFillColor:b(A,"staticFillColor",857979),staticLineColor:b(A,"staticLineColor",1255396),showSleeping:b(A,"showSleeping",!1),staticBodySleepOpacity:b(A,"staticBodySleepOpacity",.7),sleepFillColor:b(A,"sleepFillColor",4605510),sleepLineColor:b(A,"sleepLineColor",10066585),showSensors:b(A,"showSensors",!0),sensorFillColor:b(A,"sensorFillColor",857979),sensorLineColor:b(A,"sensorLineColor",1255396),showPositions:b(A,"showPositions",!0),positionSize:b(A,"positionSize",4),positionColor:b(A,"positionColor",14697178),showJoint:b(A,"showJoint",!0),jointColor:b(A,"jointColor",14737474),jointLineOpacity:b(A,"jointLineOpacity",1),jointLineThickness:b(A,"jointLineThickness",2),pinSize:b(A,"pinSize",4),pinColor:b(A,"pinColor",4382944),springColor:b(A,"springColor",14697184),anchorColor:b(A,"anchorColor",15724527),anchorSize:b(A,"anchorSize",4),showConvexHulls:b(A,"showConvexHulls",!1),hullColor:b(A,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),b(i,"setBounds",!1)){var P=i.setBounds;if("boolean"==typeof P)this.setBounds();else{var O=b(P,"x",0),L=b(P,"y",0),D=b(P,"width",t.sys.scale.width),I=b(P,"height",t.sys.scale.height),F=b(P,"thickness",64),B=b(P,"left",!0),N=b(P,"right",!0),Y=b(P,"top",!0),X=b(P,"bottom",!0);this.setBounds(O,L,D,I,F,B,N,Y,X)}}},setCompositeRenderStyle:function(t){var i,n,r,o=t.bodies,a=t.constraints,h=t.composites;for(i=0;i<o.length;i++)r=(n=o[i]).render,this.setBodyRenderStyle(n,r.lineColor,r.lineOpacity,r.lineThickness,r.fillColor,r.fillOpacity);for(i=0;i<a.length;i++)r=(n=a[i]).render,this.setConstraintRenderStyle(n,r.lineColor,r.lineOpacity,r.lineThickness,r.pinSize,r.anchorColor,r.anchorSize);for(i=0;i<h.length;i++)n=h[i],this.setCompositeRenderStyle(n);return this},setBodyRenderStyle:function(t,i,n,r,o,a){var h=t.render,d=this.debugConfig;return h?(null==i&&(i=t.isStatic?d.staticLineColor:d.lineColor),null==n&&(n=d.lineOpacity),null==r&&(r=d.lineThickness),null==o&&(o=t.isStatic?d.staticFillColor:d.fillColor),null==a&&(a=d.fillOpacity),!1!==i&&(h.lineColor=i),!1!==n&&(h.lineOpacity=n),!1!==r&&(h.lineThickness=r),!1!==o&&(h.fillColor=o),!1!==a&&(h.fillOpacity=a),this):this},setConstraintRenderStyle:function(t,i,n,r,o,a,h){var d=t.render,f=this.debugConfig;if(!d)return this;if(null==i){var p=d.type;"line"===p?i=f.jointColor:"pin"===p?i=f.pinColor:"spring"===p&&(i=f.springColor)}return null==n&&(n=f.jointLineOpacity),null==r&&(r=f.jointLineThickness),null==o&&(o=f.pinSize),null==a&&(a=f.anchorColor),null==h&&(h=f.anchorSize),!1!==i&&(d.lineColor=i),!1!==n&&(d.lineOpacity=n),!1!==r&&(d.lineThickness=r),!1!==o&&(d.pinSize=o),!1!==a&&(d.anchorColor=a),!1!==h&&(d.anchorSize=h),this},setEventsProxy:function(){var t=this,i=this.engine,n=this.localWorld;this.drawDebug&&(P.on(n,"compositeModified",(function(i){t.setCompositeRenderStyle(i)})),P.on(n,"beforeAdd",(function(i){for(var n=[].concat(i.object),r=0;r<n.length;r++){var o=n[r],a=o.render;"body"===o.type?t.setBodyRenderStyle(o,a.lineColor,a.lineOpacity,a.lineThickness,a.fillColor,a.fillOpacity):"composite"===o.type?t.setCompositeRenderStyle(o):"constraint"===o.type&&t.setConstraintRenderStyle(o,a.lineColor,a.lineOpacity,a.lineThickness,a.pinSize,a.anchorColor,a.anchorSize)}}))),P.on(n,"beforeAdd",(function(i){t.emit(T.BEFORE_ADD,i)})),P.on(n,"afterAdd",(function(i){t.emit(T.AFTER_ADD,i)})),P.on(n,"beforeRemove",(function(i){t.emit(T.BEFORE_REMOVE,i)})),P.on(n,"afterRemove",(function(i){t.emit(T.AFTER_REMOVE,i)})),P.on(i,"beforeUpdate",(function(i){t.emit(T.BEFORE_UPDATE,i)})),P.on(i,"afterUpdate",(function(i){t.emit(T.AFTER_UPDATE,i)})),P.on(i,"collisionStart",(function(i){var n,r,o=i.pairs;o.length>0&&(n=o[0].bodyA,r=o[0].bodyB),t.emit(T.COLLISION_START,i,n,r)})),P.on(i,"collisionActive",(function(i){var n,r,o=i.pairs;o.length>0&&(n=o[0].bodyA,r=o[0].bodyB),t.emit(T.COLLISION_ACTIVE,i,n,r)})),P.on(i,"collisionEnd",(function(i){var n,r,o=i.pairs;o.length>0&&(n=o[0].bodyA,r=o[0].bodyB),t.emit(T.COLLISION_END,i,n,r)}))},setBounds:function(t,i,n,r,o,a,h,d,f){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=this.scene.sys.scale.width),void 0===r&&(r=this.scene.sys.scale.height),void 0===o&&(o=64),void 0===a&&(a=!0),void 0===h&&(h=!0),void 0===d&&(d=!0),void 0===f&&(f=!0),this.updateWall(a,"left",t-o,i-o,o,r+2*o),this.updateWall(h,"right",t+n,i-o,o,r+2*o),this.updateWall(d,"top",t,i-o,n,o),this.updateWall(f,"bottom",t,i+r,n,o),this},updateWall:function(t,i,n,r,o,a){var h=this.walls[i];t?(h&&L.remove(this.localWorld,h),n+=o/2,r+=a/2,this.walls[i]=this.create(n,r,o,a,{isStatic:!0,friction:0,frictionStatic:0})):(h&&L.remove(this.localWorld,h),this.walls[i]=null)},createDebugGraphic:function(){var t=this.scene.sys.add.graphics({x:0,y:0});return t.setDepth(Number.MAX_VALUE),this.debugGraphic=t,this.drawDebug=!0,t},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(t,i,n){return void 0===t&&(t=0),void 0===i&&(i=1),this.localWorld.gravity.x=t,this.localWorld.gravity.y=i,void 0!==n&&(this.localWorld.gravity.scale=n),this},create:function(t,i,n,o,a){var h=r.rectangle(t,i,n,o,a);return L.add(this.localWorld,h),h},add:function(t){return L.add(this.localWorld,t),this},remove:function(t,i){Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var r=t[n],o=r.body?r.body:r;d.remove(this.localWorld,o,i)}return this},removeConstraint:function(t,i){return d.remove(this.localWorld,t,i),this},convertTilemapLayer:function(t,i){var n=t.layer,r=t.getTilesWithin(0,0,n.width,n.height,{isColliding:!0});return this.convertTiles(r,i),this},convertTiles:function(t,i){if(0===t.length)return this;for(var n=0;n<t.length;n++)new O(this,t[n],i);return this},nextGroup:function(t){return A.nextGroup(t)},nextCategory:function(){return A.nextCategory()},pause:function(){return this.enabled=!1,this.emit(T.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(T.RESUME),this},update:function(t,i){if(this.enabled&&this.autoUpdate){var n=this.engine,r=this.runner,o=n.timing,a=this.correction;r.isFixed?i=this.getDelta(t,i):(i=t-r.timePrev||r.delta,r.timePrev=t,r.deltaHistory.push(i),r.deltaHistory=r.deltaHistory.slice(-r.deltaSampleSize),a=(i=(i=(i=Math.min.apply(null,r.deltaHistory))<r.deltaMin?r.deltaMin:i)>r.deltaMax?r.deltaMax:i)/r.delta,r.delta=i),0!==r.timeScalePrev&&(a*=o.timeScale/r.timeScalePrev),0===o.timeScale&&(a=0),r.timeScalePrev=o.timeScale,r.correction=a,r.frameCounter+=1,t-r.counterTimestamp>=1e3&&(r.fps=r.frameCounter*((t-r.counterTimestamp)/1e3),r.counterTimestamp=t,r.frameCounter=0),f.update(n,i,a)}},step:function(t,i){f.update(this.engine,t,i)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(t){var i=t.hasOwnProperty("body")?t.body:t;return null!==d.get(this.localWorld,i.id,i.type)},getAllBodies:function(){return d.allBodies(this.localWorld)},getAllConstraints:function(){return d.allConstraints(this.localWorld)},getAllComposites:function(){return d.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var t=this.debugConfig,i=this.engine,n=this.debugGraphic,r=d.allBodies(this.localWorld);this.debugGraphic.clear(),t.showBroadphase&&i.broadphase.controller&&this.renderGrid(i.broadphase,n,t.broadphaseColor,.5),t.showBounds&&this.renderBodyBounds(r,n,t.boundsColor,.5),(t.showBody||t.showStaticBody)&&this.renderBodies(r),t.showJoint&&this.renderJoints(),(t.showAxes||t.showAngleIndicator)&&this.renderBodyAxes(r,n,t.showAxes,t.angleColor,.5),t.showVelocity&&this.renderBodyVelocity(r,n,t.velocityColor,1,2),t.showSeparations&&this.renderSeparations(i.pairs.list,n,t.separationColor),t.showCollisions&&this.renderCollisions(i.pairs.list,n,t.collisionColor)}},renderGrid:function(t,i,n,r){i.lineStyle(1,n,r);for(var o=h.keys(t.buckets),a=0;a<o.length;a++){var d=o[a];if(!(t.buckets[d].length<2)){var f=d.split(/C|R/);i.strokeRect(parseInt(f[1],10)*t.bucketWidth,parseInt(f[2],10)*t.bucketHeight,t.bucketWidth,t.bucketHeight)}}return this},renderSeparations:function(t,i,n){i.lineStyle(1,n,1);for(var r=0;r<t.length;r++){var o=t[r];if(o.isActive){var a=o.collision,h=a.bodyA,d=a.bodyB,f=h.position,p=d.position,T=a.penetration,b=h.isStatic||d.isStatic?1:4;d.isStatic&&(b=0),i.lineBetween(p.x,p.y,p.x-T.x*b,p.y-T.y*b),b=h.isStatic||d.isStatic?1:4,h.isStatic&&(b=0),i.lineBetween(f.x,f.y,f.x-T.x*b,f.y-T.y*b)}}return this},renderCollisions:function(t,i,n){var r,o;for(i.lineStyle(1,n,.5),i.fillStyle(n,1),r=0;r<t.length;r++)if((o=t[r]).isActive)for(var a=0;a<o.activeContacts.length;a++){var h=o.activeContacts[a].vertex;i.fillRect(h.x-2,h.y-2,5,5)}for(r=0;r<t.length;r++)if((o=t[r]).isActive){var d=o.collision,f=o.activeContacts;if(f.length>0){var p=f[0].vertex.x,T=f[0].vertex.y;2===f.length&&(p=(f[0].vertex.x+f[1].vertex.x)/2,T=(f[0].vertex.y+f[1].vertex.y)/2),d.bodyB===d.supports[0].body||d.bodyA.isStatic?i.lineBetween(p-8*d.normal.x,T-8*d.normal.y,p,T):i.lineBetween(p+8*d.normal.x,T+8*d.normal.y,p,T)}}return this},renderBodyBounds:function(t,i,n,r){i.lineStyle(1,n,r);for(var o=0;o<t.length;o++){var a=t[o];if(a.render.visible){var h=a.bounds;if(h)i.strokeRect(h.min.x,h.min.y,h.max.x-h.min.x,h.max.y-h.min.y);else for(var d=a.parts,f=d.length>1?1:0;f<d.length;f++){var p=d[f];i.strokeRect(p.bounds.min.x,p.bounds.min.y,p.bounds.max.x-p.bounds.min.x,p.bounds.max.y-p.bounds.min.y)}}}return this},renderBodyAxes:function(t,i,n,r,o){i.lineStyle(1,r,o);for(var a=0;a<t.length;a++){var h,d,f,p=t[a],T=p.parts;if(p.render.visible)if(n)for(d=T.length>1?1:0;d<T.length;d++)for(h=T[d],f=0;f<h.axes.length;f++){var b=h.axes[f];i.lineBetween(h.position.x,h.position.y,h.position.x+20*b.x,h.position.y+20*b.y)}else for(d=T.length>1?1:0;d<T.length;d++)for(h=T[d],f=0;f<h.axes.length;f++)i.lineBetween(h.position.x,h.position.y,(h.vertices[0].x+h.vertices[h.vertices.length-1].x)/2,(h.vertices[0].y+h.vertices[h.vertices.length-1].y)/2)}return this},renderBodyVelocity:function(t,i,n,r,o){i.lineStyle(o,n,r);for(var a=0;a<t.length;a++){var h=t[a];h.render.visible&&i.lineBetween(h.position.x,h.position.y,h.position.x+2*(h.position.x-h.positionPrev.x),h.position.y+2*(h.position.y-h.positionPrev.y))}return this},renderBodies:function(t){for(var i=this.debugGraphic,n=this.debugConfig,r=n.showBody,o=n.showStaticBody,a=n.showSleeping,h=n.showInternalEdges,d=n.showConvexHulls,f=n.renderFill,p=n.renderLine,T=n.staticBodySleepOpacity,b=n.sleepFillColor,S=n.sleepLineColor,A=n.hullColor,P=0;P<t.length;P++){var O=t[P];if(O.render.visible&&(o||!O.isStatic)&&(r||O.isStatic)){var L=O.render.lineColor,D=O.render.lineOpacity,I=O.render.lineThickness,F=O.render.fillColor,B=O.render.fillOpacity;a&&O.isSleeping&&(O.isStatic?(D*=T,B*=T):(L=S,F=b)),f||(F=null),p||(L=null),this.renderBody(O,i,h,L,D,I,F,B);var N=O.parts.length;d&&N>1&&this.renderConvexHull(O,i,A,I)}}},renderBody:function(t,i,n,r,o,a,h,d){void 0===r&&(r=null),void 0===o&&(o=null),void 0===a&&(a=1),void 0===h&&(h=null),void 0===d&&(d=null);for(var f=this.debugConfig,p=f.sensorFillColor,T=f.sensorLineColor,b=t.parts,S=b.length,A=S>1?1:0;A<S;A++){var P=b[A],O=P.render,L=O.opacity;if(O.visible&&0!==L&&(!P.isSensor||f.showSensors)){var D=P.circleRadius;if(i.beginPath(),P.isSensor?(null!==h&&i.fillStyle(p,d*L),null!==r&&i.lineStyle(a,T,o*L)):(null!==h&&i.fillStyle(h,d*L),null!==r&&i.lineStyle(a,r,o*L)),D)i.arc(P.position.x,P.position.y,D,0,2*Math.PI);else{var I=P.vertices,F=I.length;i.moveTo(I[0].x,I[0].y);for(var B=1;B<F;B++){var N=I[B];if(!I[B-1].isInternal||n?i.lineTo(N.x,N.y):i.moveTo(N.x,N.y),B<F&&N.isInternal&&!n){var Y=(B+1)%F;i.moveTo(I[Y].x,I[Y].y)}}i.closePath()}null!==h&&i.fillPath(),null!==r&&i.strokePath()}}if(f.showPositions&&!t.isStatic){var X=t.position.x,G=t.position.y,U=Math.ceil(f.positionSize/2);i.fillStyle(f.positionColor,1),i.fillRect(X-U,G-U,f.positionSize,f.positionSize)}return this},renderConvexHull:function(t,i,n,r){if(void 0===r&&(r=1),t.parts.length>1){var o=t.vertices;i.lineStyle(r,n),i.beginPath(),i.moveTo(o[0].x,o[0].y);for(var a=1;a<o.length;a++)i.lineTo(o[a].x,o[a].y);i.lineTo(o[0].x,o[0].y),i.strokePath()}return this},renderJoints:function(){for(var t=this.debugGraphic,i=d.allConstraints(this.localWorld),n=0;n<i.length;n++){var r=i[n].render,o=r.lineColor,a=r.lineOpacity,h=r.lineThickness,f=r.pinSize,p=r.anchorColor,T=r.anchorSize;this.renderConstraint(i[n],t,o,a,h,f,p,T)}},renderConstraint:function(t,i,n,r,o,a,d,f){var p=t.render;if(!p.visible||!t.pointA||!t.pointB)return this;i.lineStyle(o,n,r);var T,b,S=t.bodyA,A=t.bodyB;if(T=S?D.add(S.position,t.pointA):t.pointA,"pin"===p.type)i.strokeCircle(T.x,T.y,a);else{if(b=A?D.add(A.position,t.pointB):t.pointB,i.beginPath(),i.moveTo(T.x,T.y),"spring"===p.type)for(var P,O=D.sub(b,T),L=D.perp(D.normalise(O)),I=Math.ceil(h.clamp(t.length/5,12,20)),F=1;F<I;F+=1)P=F%2==0?1:-1,i.lineTo(T.x+O.x*(F/I)+L.x*P*4,T.y+O.y*(F/I)+L.y*P*4);i.lineTo(b.x,b.y)}return i.strokePath(),p.anchors&&f>0&&(i.fillStyle(d),i.fillCircle(T.x,T.y,f),i.fillCircle(b.x,b.y,f)),this},resetCollisionIDs:function(){return o._nextCollidingGroupId=1,o._nextNonCollidingGroupId=-1,o._nextCategory=1,this},shutdown:function(){P.off(this.engine),this.removeAllListeners(),L.clear(this.localWorld,!1),f.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});t.exports=I},function(t,i,n){t.exports={BasePlugin:n(540),DefaultPlugins:n(197),PluginCache:n(24),PluginManager:n(414),ScenePlugin:n(1404)}},function(t,i,n){var r=n(540),o=n(0),a=n(20),h=new o({Extends:r,initialize:function ScenePlugin2(t,i,n){r.call(this,i),this.scene=t,this.systems=t.sys,this.pluginKey=n,t.sys.events.once(a.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=h},function(t,i,n){t.exports={Canvas:n(1406),Events:n(91),Snapshot:n(1407),WebGL:n(1408)}},function(t,i,n){t.exports={CanvasRenderer:n(368),GetBlendModes:n(370),SetTransform:n(30)}},function(t,i,n){t.exports={Canvas:n(369),WebGL:n(383)}},function(t,i,n){var r=n(107),o=n(17),a={PipelineManager:n(372),Pipelines:n(1409),RenderTarget:n(141),Utils:n(12),WebGLPipeline:n(58),WebGLRenderer:n(371),WebGLShader:n(375)};a=o(!1,a,r),t.exports=a},function(t,i,n){var r=n(92),o=n(17),a={BitmapMaskPipeline:n(373),Events:n(374),GraphicsPipeline:n(376),LightPipeline:n(377),MultiPipeline:n(108),PointLightPipeline:n(378),PostFXPipeline:n(1410),RopePipeline:n(379),SinglePipeline:n(380),UtilityPipeline:n(381)};a=o(!1,a,r),t.exports=a},function(t,i,n){var r=n(0),o=n(198),a=n(2),h=n(1411),d=n(382),f=n(58),p=new r({Extends:f,initialize:function PostFXPipeline2(t){t.renderTarget=a(t,"renderTarget",1),t.fragShader=a(t,"fragShader",h),t.vertShader=a(t,"vertShader",d),t.attributes=a(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.batchSize=1,t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],f.call(this,t),this.isPostFX=!0,this.gameObject,this.colorMatrix=new o,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){f.prototype.boot.call(this);var t=this.manager.UTILITY_PIPELINE;this.fullFrame1=t.fullFrame1,this.fullFrame2=t.fullFrame2,this.halfFrame1=t.halfFrame1,this.halfFrame2=t.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(t){this.bindAndDraw(t)},copyFrame:function(t,i,n,r,o){this.manager.copyFrame(t,i,n,r,o)},copyToGame:function(t){this.manager.copyToGame(t)},drawFrame:function(t,i,n){this.manager.drawFrame(t,i,n,this.colorMatrix)},blendFrames:function(t,i,n,r,o){this.manager.blendFrames(t,i,n,r,o)},blendFramesAdditive:function(t,i,n,r,o){this.manager.blendFramesAdditive(t,i,n,r,o)},clearFrame:function(t,i){this.manager.clearFrame(t,i)},blitFrame:function(t,i,n,r,o,a){this.manager.blitFrame(t,i,n,r,o,a)},copyFrameRect:function(t,i,n,r,o,a,h,d){this.manager.copyFrameRect(t,i,n,r,o,a,h,d)},bindAndDraw:function(t,i,n,r,o){void 0===n&&(n=!0),void 0===r&&(r=!0);var a=this.gl,h=this.renderer;this.bind(o),this.set1i("uMainSampler",0),i?(a.viewport(0,0,i.width,i.height),a.bindFramebuffer(a.FRAMEBUFFER,i.framebuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,i.texture,0),n&&(r?a.clearColor(0,0,0,0):a.clearColor(0,0,0,1),a.clear(a.COLOR_BUFFER_BIT))):(h.popFramebuffer(!1,!1,!1),h.currentFramebuffer||a.viewport(0,0,h.width,h.height)),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,t.texture),a.bufferData(a.ARRAY_BUFFER,this.vertexData,a.STATIC_DRAW),a.drawArrays(a.TRIANGLES,0,6),i?(a.bindTexture(a.TEXTURE_2D,null),a.bindFramebuffer(a.FRAMEBUFFER,null)):h.resetTextures()}});t.exports=p},function(t,i){t.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join("\n")},function(t,i,n){var r=n(17),o=n(201),a={Center:n(403),Events:n(104),Orientation:n(404),ScaleManager:n(415),ScaleModes:n(405),Zoom:n(406)};a=r(!1,a,o.CENTER),a=r(!1,a,o.ORIENTATION),a=r(!1,a,o.SCALE_MODE),a=r(!1,a,o.ZOOM),t.exports=a},function(t,i,n){var r=n(144),o=n(17),a={Events:n(20),GetPhysicsPlugins:n(419),GetScenePlugins:n(420),SceneManager:n(417),ScenePlugin:n(1414),Settings:n(421),Systems:n(204)};a=o(!1,a,r),t.exports=a},function(t,i,n){var r=n(18),o=n(0),a=n(20),h=n(2),d=n(24),f=new o({initialize:function ScenePlugin2(t){this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.key=t.sys.settings.key,this.manager=t.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,t.sys.events.once(a.BOOT,this.boot,this),t.sys.events.on(a.START,this.pluginStart,this)},boot:function(){this.systems.events.once(a.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(a.SHUTDOWN,this.shutdown,this)},start:function(t,i){return void 0===t&&(t=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",t,i),this},restart:function(t){var i=this.key;return this.manager.queueOp("stop",i),this.manager.queueOp("start",i,t),this},transition:function(t){void 0===t&&(t={});var i=h(t,"target",!1),n=this.manager.getScene(i);if(!i||!this.checkValidTransition(n))return!1;var r=h(t,"duration",1e3);this._elapsed=0,this._target=n,this._duration=r,this._willSleep=h(t,"sleep",!1),this._willRemove=h(t,"remove",!1);var o=h(t,"onUpdate",null);o&&(this._onUpdate=o,this._onUpdateScope=h(t,"onUpdateScope",this.scene));var d=h(t,"allowInput",!1);this.settings.transitionAllowInput=d;var f=n.sys.settings;return f.isTransition=!0,f.transitionFrom=this.scene,f.transitionDuration=r,f.transitionAllowInput=d,h(t,"moveAbove",!1)?this.manager.moveAbove(this.key,i):h(t,"moveBelow",!1)&&this.manager.moveBelow(this.key,i),n.sys.isSleeping()?n.sys.wake(h(t,"data")):this.manager.start(i,h(t,"data")),this.systems.events.emit(a.TRANSITION_OUT,n,r),this.systems.events.on(a.UPDATE,this.step,this),!0},checkValidTransition:function(t){return!(!t||t.sys.isActive()||t.sys.isTransitioning()||t===this.scene||this.systems.isTransitioning())},step:function(t,i){this._elapsed+=i,this.transitionProgress=r(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var t=this._target.sys,i=this._target.sys.settings;this.systems.events.off(a.UPDATE,this.step,this),t.events.emit(a.TRANSITION_COMPLETE,this.scene),i.isTransition=!1,i.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(t,i,n,r){return this.manager.add(t,i,n,r)},launch:function(t,i){return t&&t!==this.key&&this.manager.queueOp("start",t,i),this},run:function(t,i){return t&&t!==this.key&&this.manager.queueOp("run",t,i),this},pause:function(t,i){return void 0===t&&(t=this.key),this.manager.queueOp("pause",t,i),this},resume:function(t,i){return void 0===t&&(t=this.key),this.manager.queueOp("resume",t,i),this},sleep:function(t,i){return void 0===t&&(t=this.key),this.manager.queueOp("sleep",t,i),this},wake:function(t,i){return void 0===t&&(t=this.key),this.manager.queueOp("wake",t,i),this},switch:function(t){return t!==this.key&&this.manager.queueOp("switch",this.key,t),this},stop:function(t,i){return void 0===t&&(t=this.key),this.manager.queueOp("stop",t,i),this},setActive:function(t,i,n){void 0===i&&(i=this.key);var r=this.manager.getScene(i);return r&&r.sys.setActive(t,n),this},setVisible:function(t,i){void 0===i&&(i=this.key);var n=this.manager.getScene(i);return n&&n.sys.setVisible(t),this},isSleeping:function(t){return void 0===t&&(t=this.key),this.manager.isSleeping(t)},isActive:function(t){return void 0===t&&(t=this.key),this.manager.isActive(t)},isPaused:function(t){return void 0===t&&(t=this.key),this.manager.isPaused(t)},isVisible:function(t){return void 0===t&&(t=this.key),this.manager.isVisible(t)},swapPosition:function(t,i){return void 0===i&&(i=this.key),t!==i&&this.manager.swapPosition(t,i),this},moveAbove:function(t,i){return void 0===i&&(i=this.key),t!==i&&this.manager.moveAbove(t,i),this},moveBelow:function(t,i){return void 0===i&&(i=this.key),t!==i&&this.manager.moveBelow(t,i),this},remove:function(t){return void 0===t&&(t=this.key),this.manager.remove(t),this},moveUp:function(t){return void 0===t&&(t=this.key),this.manager.moveUp(t),this},moveDown:function(t){return void 0===t&&(t=this.key),this.manager.moveDown(t),this},bringToTop:function(t){return void 0===t&&(t=this.key),this.manager.bringToTop(t),this},sendToBack:function(t){return void 0===t&&(t=this.key),this.manager.sendToBack(t),this},get:function(t){return this.manager.getScene(t)},getIndex:function(t){return void 0===t&&(t=this.key),this.manager.getIndex(t)},shutdown:function(){var t=this.systems.events;t.off(a.SHUTDOWN,this.shutdown,this),t.off(a.POST_UPDATE,this.step,this),t.off(a.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});d.register("ScenePlugin",f,"scenePlugin"),t.exports=f},function(t,i,n){t.exports={Events:n(438),List:n(110),Map:n(102),ProcessQueue:n(211),RTree:n(531),Set:n(149),Size:n(416)}},function(t,i,n){var r=n(17),o=n(1417),a={CanvasTexture:n(423),Events:n(106),FilterMode:o,Frame:n(109),Parsers:n(425),Texture:n(206),TextureManager:n(422),TextureSource:n(424)};a=r(!1,a,o),t.exports=a},function(t,i){t.exports={LINEAR:0,NEAREST:1}},function(t,i,n){var r=n(17),o=n(1419),a={Components:n(251),Parsers:n(1452),Formats:n(40),ImageCollection:n(576),ParseToTilemap:n(262),Tile:n(85),Tilemap:n(580),TilemapCreator:n(1459),TilemapFactory:n(1460),Tileset:n(122),TilemapLayer:n(581),Orientation:n(29),LayerData:n(120),MapData:n(121),ObjectLayer:n(572)};a=r(!1,a,o.ORIENTATION),t.exports=a},function(t,i,n){var r={ORIENTATION:n(29)};t.exports=r},function(t,i,n){var r=n(26),o=n(63);t.exports=function(t,i,n,a,h,d,f,p){void 0===f&&(f=!0),t<0&&(t=0),i<0&&(i=0);for(var T=r(t,i,n,a,null,p),b=h-t,S=d-i,A=0;A<T.length;A++){var P=T[A].x+b,O=T[A].y+S;P>=0&&P<p.width&&O>=0&&O<p.height&&p.data[O][P]&&p.data[O][P].copy(T[A])}f&&o(h-1,d-1,n+2,a+2,p)}},function(t,i,n){var r=n(26),o=n(542);t.exports=function(t,i,n,a,h,d){n||(n={}),Array.isArray(t)||(t=[t]);var f=d.tilemapLayer;a||(a=f.scene),h||(h=a.cameras.main);var p,T=r(0,0,d.width,d.height,null,d),b=[];for(p=0;p<T.length;p++){var S=T[p];if(-1!==t.indexOf(S.index)){var A=f.tileToWorldXY(S.x,S.y,void 0,h,d);n.x=A.x,n.y=A.y,b.push(a.make.sprite(n))}}if("number"==typeof i)for(p=0;p<t.length;p++)o(t[p],i,0,0,d.width,d.height,d);else if(Array.isArray(i))for(p=0;p<t.length;p++)o(t[p],i[p],0,0,d.width,d.height,d);return b}},function(t,i,n){var r=n(26),o=n(63),a=n(72);t.exports=function(t,i,n,h,d,f,p){for(var T=-1!==p.collideIndexes.indexOf(t),b=r(i,n,h,d,null,p),S=0;S<b.length;S++)b[S].index=t,a(b[S],T);f&&o(i-1,n-1,h+2,d+2,p)}},function(t,i,n){var r=n(26);t.exports=function(t,i,n,o,a,h,d,f){return r(n,o,a,h,d,f).filter(t,i)}},function(t,i){t.exports=function(t,i,n,r){void 0===i&&(i=0),void 0===n&&(n=!1);var o,a,h,d=0;if(n){for(a=r.height-1;a>=0;a--)for(o=r.width-1;o>=0;o--)if((h=r.data[a][o])&&h.index===t){if(d===i)return h;d+=1}}else for(a=0;a<r.height;a++)for(o=0;o<r.width;o++)if((h=r.data[a][o])&&h.index===t){if(d===i)return h;d+=1}return null}},function(t,i,n){var r=n(26);t.exports=function(t,i,n,o,a,h,d,f){return r(n,o,a,h,d,f).find(t,i)||null}},function(t,i,n){var r=n(26);t.exports=function(t,i,n,o,a,h,d,f){r(n,o,a,h,d,f).forEach(t,i)}},function(t,i,n){var r=n(29),o=n(544),a=n(545),h=n(547),d=n(1),f=n(548);t.exports=function(t){return t===r.ORTHOGONAL?o:t===r.HEXAGONAL?a:t===r.STAGGERED?f:t===r.ISOMETRIC?h:d}},function(t,i,n){var r=n(158),o=new(n(3));t.exports=function(t,i,n,a,h){return h.tilemapLayer.worldToTileXY(t,i,!0,o,a),r(o.x,o.y,n,h)}},function(t,i,n){var r=n(483),o=n(26),a=n(484),h=n(1),d=n(3),TriangleToRectangle=function(t,i){return a.RectangleToTriangle(i,t)},f=new d,p=new d,T=new d;t.exports=function(t,i,n,d){if(void 0===t)return[];var b=h;t instanceof r.Circle?b=a.CircleToRectangle:t instanceof r.Rectangle?b=a.RectangleToRectangle:t instanceof r.Triangle?b=TriangleToRectangle:t instanceof r.Line&&(b=a.LineToRectangle),d.tilemapLayer.worldToTileXY(t.left,t.top,!0,p,n);var S=p.x,A=p.y;d.tilemapLayer.worldToTileXY(t.right,t.bottom,!0,T,n);var P=Math.ceil(T.x),O=Math.ceil(T.y),L=Math.max(P-S,1),D=Math.max(O-A,1),I=o(S,A,L,D,i,d),F=d.tileWidth,B=d.tileHeight;d.tilemapLayer&&(F*=d.tilemapLayer.scaleX,B*=d.tilemapLayer.scaleY);for(var N=[],Y=new r.Rectangle(0,0,F,B),X=0;X<I.length;X++){var G=I[X];d.tilemapLayer.tileToWorldXY(G.x,G.y,f,n),Y.x=f.x,Y.y=f.y,b(t,Y)&&N.push(G)}return N}},function(t,i,n){var r=n(29),o=n(1),a=n(253);t.exports=function(t){return t===r.ORTHOGONAL?a:o}},function(t,i,n){var r=n(29),o=n(550),a=n(551),h=n(1),d=n(552),f=n(553);t.exports=function(t){return t===r.ORTHOGONAL?f:t===r.ISOMETRIC?a:t===r.HEXAGONAL?o:t===r.STAGGERED?d:h}},function(t,i,n){var r=n(29),o=n(554),a=n(1),h=n(555),d=n(254);t.exports=function(t){return t===r.ORTHOGONAL?d:t===r.HEXAGONAL?o:t===r.STAGGERED?h:a}},function(t,i,n){var r=n(29),o=n(1),a=n(255);t.exports=function(t){return t===r.ORTHOGONAL?a:o}},function(t,i,n){var r=n(29),o=n(556),a=n(557),h=n(1),d=n(558),f=n(559);t.exports=function(t){return t===r.ORTHOGONAL?f:t===r.ISOMETRIC?a:t===r.HEXAGONAL?o:t===r.STAGGERED?d:h}},function(t,i,n){var r=n(29),o=n(560),a=n(1),h=n(561),d=n(256);t.exports=function(t){return t===r.ORTHOGONAL?d:t===r.HEXAGONAL?o:t===r.STAGGERED?h:a}},function(t,i,n){var r=n(562),o=new(n(3));t.exports=function(t,i,n,a){a.tilemapLayer.worldToTileXY(t,i,!0,o,n);var h=o.x,d=o.y;return r(h,d,a)}},function(t,i,n){var r=n(257),o=new(n(3));t.exports=function(t,i,n,a,h,d){return d.tilemapLayer.worldToTileXY(i,n,!0,o,h,d),r(t,o.x,o.y,a,d)}},function(t,i,n){var r=n(63),o=n(257);t.exports=function(t,i,n,a,h){if(void 0===a&&(a=!0),!Array.isArray(t))return null;Array.isArray(t[0])||(t=[t]);for(var d=t.length,f=t[0].length,p=0;p<d;p++)for(var T=0;T<f;T++){var b=t[p][T];o(b,i+T,n+p,!1,h)}a&&r(i-1,n-1,f+2,d+2,h)}},function(t,i,n){var r=n(26),o=n(210);t.exports=function(t,i,n,a,h,d){var f,p=r(t,i,n,a,{},d);if(!h)for(h=[],f=0;f<p.length;f++)-1===h.indexOf(p[f].index)&&h.push(p[f].index);for(f=0;f<p.length;f++)p[f].index=o(h)}},function(t,i,n){var r=n(563),o=new(n(3));t.exports=function(t,i,n,a,h,d){return d.tilemapLayer.worldToTileXY(t,i,!0,o,h,d),r(o.x,o.y,n,a,d)}},function(t,i,n){var r=n(26),o=n(397),a=new o(105,210,231,150),h=new o(243,134,48,200),d=new o(40,39,37,150);t.exports=function(t,i,n){void 0===i&&(i={});var o=void 0!==i.tileColor?i.tileColor:a,f=void 0!==i.collidingTileColor?i.collidingTileColor:h,p=void 0!==i.faceColor?i.faceColor:d,T=r(0,0,n.width,n.height,null,n);t.translateCanvas(n.tilemapLayer.x,n.tilemapLayer.y),t.scaleCanvas(n.tilemapLayer.scaleX,n.tilemapLayer.scaleY);for(var b=0;b<T.length;b++){var S=T[b],A=S.width,P=S.height,O=S.pixelX,L=S.pixelY,D=S.collides?f:o;null!==D&&(t.fillStyle(D.color,D.alpha/255),t.fillRect(O,L,A,P)),O+=1,L+=1,A-=2,P-=2,null!==p&&(t.lineStyle(1,p.color,p.alpha/255),S.faceTop&&t.lineBetween(O,L,O+A,L),S.faceRight&&t.lineBetween(O+A,L,O+A,L+P),S.faceBottom&&t.lineBetween(O,L+P,O+A,L+P),S.faceLeft&&t.lineBetween(O,L,O,L+P))}}},function(t,i,n){var r=n(72),o=n(63),a=n(160);t.exports=function(t,i,n,h,d){void 0===i&&(i=!0),void 0===n&&(n=!0),void 0===d&&(d=!0),Array.isArray(t)||(t=[t]);for(var f=0;f<t.length;f++)a(t[f],i,h);if(d)for(var p=0;p<h.height;p++)for(var T=0;T<h.width;T++){var b=h.data[p][T];b&&-1!==t.indexOf(b.index)&&r(b,i)}n&&o(0,0,h.width,h.height,h)}},function(t,i,n){var r=n(72),o=n(63),a=n(160);t.exports=function(t,i,n,h,d,f){if(void 0===n&&(n=!0),void 0===h&&(h=!0),void 0===f&&(f=!0),!(t>i)){for(var p=t;p<=i;p++)a(p,n,d);if(f)for(var T=0;T<d.height;T++)for(var b=0;b<d.width;b++){var S=d.data[T][b];S&&S.index>=t&&S.index<=i&&r(S,n)}h&&o(0,0,d.width,d.height,d)}}},function(t,i,n){var r=n(72),o=n(63),a=n(160);t.exports=function(t,i,n,h){void 0===i&&(i=!0),void 0===n&&(n=!0),Array.isArray(t)||(t=[t]);for(var d=0;d<h.height;d++)for(var f=0;f<h.width;f++){var p=h.data[d][f];p&&-1===t.indexOf(p.index)&&(r(p,i),a(p.index,i,h))}n&&o(0,0,h.width,h.height,h)}},function(t,i,n){var r=n(72),o=n(63),a=n(126);t.exports=function(t,i,n,h){void 0===i&&(i=!0),void 0===n&&(n=!0);for(var d=0;d<h.height;d++)for(var f=0;f<h.width;f++){var p=h.data[d][f];if(p)for(var T in t)if(a(p.properties,T)){var b=t[T];Array.isArray(b)||(b=[b]);for(var S=0;S<b.length;S++)p.properties[T]===b[S]&&r(p,i)}}n&&o(0,0,h.width,h.height,h)}},function(t,i,n){var r=n(72),o=n(63);t.exports=function(t,i,n){void 0===t&&(t=!0),void 0===i&&(i=!0);for(var a=0;a<n.height;a++)for(var h=0;h<n.width;h++){var d=n.data[a][h];if(d){var f=d.getCollisionGroup();f&&f.objects&&f.objects.length>0&&r(d,t)}}i&&o(0,0,n.width,n.height,n)}},function(t,i){t.exports=function(t,i,n,r){if("number"==typeof t)r.callbacks[t]=null!==i?{callback:i,callbackContext:n}:void 0;else for(var o=0,a=t.length;o<a;o++)r.callbacks[t[o]]=null!==i?{callback:i,callbackContext:n}:void 0}},function(t,i,n){var r=n(26);t.exports=function(t,i,n,o,a,h,d){for(var f=r(t,i,n,o,null,d),p=0;p<f.length;p++)f[p].setCollisionCallback(a,h)}},function(t,i,n){var r=n(26),o=n(131);t.exports=function(t,i,n,a,h){var d=r(t,i,n,a,null,h),f=d.map((function(t){return t.index}));o(f);for(var p=0;p<d.length;p++)d[p].index=f[p]}},function(t,i,n){var r=n(26);t.exports=function(t,i,n,o,a,h,d){for(var f=r(n,o,a,h,null,d),p=0;p<f.length;p++)f[p]&&(f[p].index===t?f[p].index=i:f[p].index===i&&(f[p].index=t))}},function(t,i,n){var r=n(26);t.exports=function(t,i,n,o,a,h){if(a){var d,f=r(t,i,n,o,null,h),p=0;for(d=0;d<a.length;d++)p+=a[d].weight;if(!(p<=0))for(d=0;d<f.length;d++){for(var T=Math.random()*p,b=0,S=-1,A=0;A<a.length;A++)if(T<=(b+=a[A].weight)){var P=a[A].index;S=Array.isArray(P)?P[Math.floor(Math.random()*P.length)]:P;break}f[d].index=S}}}},function(t,i,n){t.exports={FromOrientationString:n(258),Parse:n(564),Parse2DArray:n(259),ParseCSV:n(565),Impact:n(1454),Tiled:n(1455)}},function(t,i){t.exports=function(t,i){for(var n=0;n<t.length;n++){var r=t[n],o=n;if(r.name&&""!==r.name&&(o=r.name),Array.isArray(r.wangtiles)&&r.wangtiles.length>0){var a,h,d,f={},p={};if(Array.isArray(r.edgecolors))for(a=0;a<r.edgecolors.length;a++)d=1+a,""!==(h=r.edgecolors[a]).name&&(f[d]=h.name);if(Array.isArray(r.cornercolors))for(a=0;a<r.cornercolors.length;a++)d=1+a,""!==(h=r.cornercolors[a]).name&&(p[d]=h.name);if(Array.isArray(r.colors))for(a=0;a<r.colors.length;a++)d=1+a,""!==(h=r.colors[a]).name&&(f[d]=p[d]=h.name);for(var T=[f,p,f,p,f,p,f,p],b=0;b<r.wangtiles.length;b++){var S=r.wangtiles[b],A=i[S.tileid]||(i[S.tileid]={});A=A.wangid||(A.wangid={});for(var P=[],O=0;O<Math.min(T.length,S.wangid.length);O++)if(0!==(h=S.wangid[O])){var L=T[O][h];void 0===L?P.push(h):P.push(L)}else P.push(void 0);A[o]=P}}}}},function(t,i,n){t.exports={ParseTileLayers:n(578),ParseTilesets:n(579),ParseWeltmeister:n(577)}},function(t,i,n){t.exports={AssignTileProperties:n(567),Base64Decode:n(574),BuildTilesetIndex:n(568),CreateGroupLayer:n(161),ParseGID:n(261),ParseImageLayers:n(569),ParseJSONTiled:n(566),ParseObject:n(260),ParseObjectLayers:n(570),ParseTileLayers:n(573),ParseTilesets:n(575)}},function(t,i,n){var r=n(1),o=n(1);r=n(1457),o=n(1458),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i,n){var r=n(12);t.exports=function(t,i,n){var o=i.cull(n),a=o.length,h=n.alpha*i.alpha;if(!(0===a||h<=0)){var d=i.gidMap,f=t.pipelines.set(i.pipeline,i),p=r.getTintAppendFloatAlpha,T=i.scrollFactorX,b=i.scrollFactorY,S=i.x,A=i.y,P=i.scaleX,O=i.scaleY;t.pipelines.preBatch(i);for(var L=0;L<a;L++){var D=o[L],I=d[D.index];if(I){var F=I.getTileTextureCoordinates(D.index);if(null!==F){var B=I.glTexture,N=f.setTexture2D(B,i),Y=I.tileWidth,X=I.tileHeight,G=F.x,U=F.y,V=.5*I.tileWidth,z=.5*I.tileHeight,W=p(D.tint,h*D.alpha);f.batchTexture(i,B,B.width,B.height,S+(V+D.pixelX)*P,A+(z+D.pixelY)*O,D.width,D.height,P,O,D.rotation,D.flipX,D.flipY,T,b,V,z,G,U,Y,X,W,W,W,W,!1,0,0,n,null,!0,N)}}}t.pipelines.postBatch(i)}}},function(t,i,n){var r=n(25),o=new r,a=new r,h=new r;t.exports=function(t,i,n,r){var d=i.cull(n),f=d.length,p=n.alpha*i.alpha;if(!(0===f||p<=0)){var T=o,b=a,S=h;b.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY),T.copyFrom(n.matrix);var A=t.currentContext,P=i.gidMap;A.save(),r?(T.multiplyWithOffset(r,-n.scrollX*i.scrollFactorX,-n.scrollY*i.scrollFactorY),b.e=i.x,b.f=i.y,T.multiply(b,S),S.copyToContext(A)):(b.e-=n.scrollX*i.scrollFactorX,b.f-=n.scrollY*i.scrollFactorY,b.copyToContext(A)),(!t.antialias||i.scaleX>1||i.scaleY>1)&&(A.imageSmoothingEnabled=!1);for(var O=0;O<f;O++){var L=d[O],D=P[L.index];if(D){var I=D.image.getSourceImage(),F=D.getTileTextureCoordinates(L.index);if(null!==F){var B=D.tileWidth,N=D.tileHeight,Y=.5*B,X=.5*N;A.save(),A.translate(L.pixelX+Y,L.pixelY+X),0!==L.rotation&&A.rotate(L.rotation),(L.flipX||L.flipY)&&A.scale(L.flipX?-1:1,L.flipY?-1:1),A.globalAlpha=p*L.alpha,A.drawImage(I,F.x,F.y,B,N,-Y,-X,B,N),A.restore()}}}A.restore()}}},function(t,i,n){var r=n(16),o=n(262);r.register("tilemap",(function(t){var i=void 0!==t?t:{};return o(this.scene,i.key,i.tileWidth,i.tileHeight,i.width,i.height,i.data,i.insertNull)}))},function(t,i,n){var r=n(5),o=n(262);r.register("tilemap",(function(t,i,n,r,a,h,d){return null===t&&(t=void 0),null===i&&(i=void 0),null===n&&(n=void 0),null===r&&(r=void 0),null===a&&(a=void 0),o(this.scene,t,i,n,r,a,h,d)}))},function(t,i,n){t.exports={Clock:n(1462),TimerEvent:n(582)}},function(t,i,n){var r=n(0),o=n(24),a=n(20),h=n(582),d=n(93),f=new r({initialize:function Clock2(t){this.scene=t,this.systems=t.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],t.sys.events.once(a.BOOT,this.boot,this),t.sys.events.on(a.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(a.PRE_UPDATE,this.preUpdate,this),t.on(a.UPDATE,this.update,this),t.once(a.SHUTDOWN,this.shutdown,this)},addEvent:function(t){var i;return t instanceof h?(i=t,this.removeEvent(i),i.elapsed=i.startAt,i.hasDispatched=!1,i.repeatCount=-1===i.repeat||i.loop?999999999999:i.repeat):i=new h(t),this._pendingInsertion.push(i),i},delayedCall:function(t,i,n,r){return this.addEvent({delay:t,callback:i,args:n,callbackScope:r})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var n=t[i];d(this._pendingRemoval,n),d(this._pendingInsertion,n),d(this._active,n)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var t=this._pendingRemoval.length,i=this._pendingInsertion.length;if(0!==t||0!==i){var n,r;for(n=0;n<t;n++){r=this._pendingRemoval[n];var o=this._active.indexOf(r);o>-1&&this._active.splice(o,1),r.destroy()}for(n=0;n<i;n++)r=this._pendingInsertion[n],this._active.push(r);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(t,i){if(this.now=t,!this.paused){i*=this.timeScale;for(var n=0;n<this._active.length;n++){var r=this._active[n];if(!r.paused&&(r.elapsed+=i*r.timeScale,r.elapsed>=r.delay)){var o=r.elapsed-r.delay;r.elapsed=r.delay,!r.hasDispatched&&r.callback&&(r.hasDispatched=!0,r.callback.apply(r.callbackScope,r.args)),r.repeatCount>0?(r.repeatCount--,r.elapsed=o,r.hasDispatched=!1):this._pendingRemoval.push(r)}}}},shutdown:function(){var t;for(t=0;t<this._pendingInsertion.length;t++)this._pendingInsertion[t].destroy();for(t=0;t<this._active.length;t++)this._active[t].destroy();for(t=0;t<this._pendingRemoval.length;t++)this._pendingRemoval[t].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var i=this.systems.events;i.off(a.PRE_UPDATE,this.preUpdate,this),i.off(a.UPDATE,this.update,this),i.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});o.register("Clock",f,"time"),t.exports=f},function(t,i,n){var r=n(100),o=n(17),a={Builders:n(1464),Events:n(267),TweenManager:n(1480),Tween:n(266),TweenData:n(268),Timeline:n(588)};a=o(!1,a,r),t.exports=a},function(t,i,n){t.exports={GetBoolean:n(99),GetEaseFunction:n(80),GetNewValue:n(162),GetProps:n(583),GetTargets:n(263),GetTweens:n(584),GetValueOp:n(264),NumberTweenBuilder:n(585),StaggerBuilder:n(586),TimelineBuilder:n(587),TweenBuilder:n(163)}},function(t,i){t.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(t,i){t.exports="complete"},function(t,i){t.exports="loop"},function(t,i){t.exports="pause"},function(t,i){t.exports="resume"},function(t,i){t.exports="start"},function(t,i){t.exports="update"},function(t,i){t.exports="active"},function(t,i){t.exports="complete"},function(t,i){t.exports="loop"},function(t,i){t.exports="repeat"},function(t,i){t.exports="start"},function(t,i){t.exports="stop"},function(t,i){t.exports="update"},function(t,i){t.exports="yoyo"},function(t,i,n){var r=n(93),o=n(0),a=n(585),h=n(24),d=n(20),f=n(586),p=n(587),T=n(100),b=n(163),S=new o({initialize:function TweenManager2(t){this.scene=t,this.systems=t.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,t.sys.events.once(d.BOOT,this.boot,this),t.sys.events.on(d.START,this.start,this)},boot:function(){this.systems.events.once(d.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(d.PRE_UPDATE,this.preUpdate,this),t.on(d.UPDATE,this.update,this),t.once(d.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(t){return p(this,t)},timeline:function(t){var i=p(this,t);return i.paused||(this._add.push(i),this._toProcess++),i},create:function(t){return b(this,t)},add:function(t){var i=b(this,t);return this._add.push(i),this._toProcess++,i},existing:function(t){return this._add.push(t),this._toProcess++,this},addCounter:function(t){var i=a(this,t);return this._add.push(i),this._toProcess++,i},stagger:function(t,i){return f(t,i)},preUpdate:function(){if(0!==this._toProcess){var t,i,n=this._destroy,r=this._active,o=this._pending;for(t=0;t<n.length;t++){i=n[t];var a=r.indexOf(i);-1===a?(a=o.indexOf(i))>-1&&(i.state=T.REMOVED,o.splice(a,1)):(i.state=T.REMOVED,r.splice(a,1))}for(n.length=0,n=this._add,t=0;t<n.length;t++)(i=n[t]).state===T.PENDING_ADD&&(i.init()?(i.play(),this._active.push(i)):this._pending.push(i));n.length=0,this._toProcess=0}},update:function(t,i){var n,r=this._active;i*=this.timeScale;for(var o=0;o<r.length;o++)(n=r[o]).update(t,i)&&(this._destroy.push(n),this._toProcess++)},remove:function(t){return r(this._add,t),r(this._pending,t),r(this._active,t),r(this._destroy,t),t.state=T.REMOVED,this},makeActive:function(t){if(-1!==this._add.indexOf(t)||-1!==this._active.indexOf(t))return this;var i=this._pending.indexOf(t);return-1!==i&&this._pending.splice(i,1),this._add.push(t),t.state=T.PENDING_ADD,this._toProcess++,this},each:function(t,i){for(var n=[null],r=1;r<arguments.length;r++)n.push(arguments[r]);for(var o in this.list)n[0]=this.list[o],t.apply(i,n)},getAllTweens:function(){for(var t=this._active,i=[],n=0;n<t.length;n++)i.push(t[n]);return i},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(t,i){void 0===i&&(i=!1);var n,r,o,a=this._active,h=[];for(Array.isArray(t)||(t=[t]),r=0;r<a.length;r++)for(n=a[r],o=0;o<t.length;o++)n.hasTarget(t[o])&&h.push(n);if(i)for(a=this._pending,r=0;r<a.length;r++)for(n=a[r],o=0;o<t.length;o++)n.hasTarget(t[o])&&h.push(n);return h},isTweening:function(t){for(var i,n=this._active,r=0;r<n.length;r++)if((i=n[r]).hasTarget(t)&&i.isPlaying())return!0;return!1},killAll:function(){for(var t=this.getAllTweens(),i=0;i<t.length;i++)t[i].stop();return this},killTweensOf:function(t){for(var i=this.getTweensOf(t),n=0;n<i.length;n++)i[n].stop();return this},pauseAll:function(){for(var t=this._active,i=0;i<t.length;i++)t[i].pause();return this},resumeAll:function(){for(var t=this._active,i=0;i<t.length;i++)t[i].resume();return this},setGlobalTimeScale:function(t){return this.timeScale=t,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var t=this.systems.events;t.off(d.PRE_UPDATE,this.preUpdate,this),t.off(d.UPDATE,this.update,this),t.off(d.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(d.START,this.start,this),this.scene=null,this.systems=null}});h.register("TweenManager",S,"tweens"),t.exports=S},function(t,i,n){t.exports={Array:n(208),Base64:n(1482),Objects:n(1484),String:n(1488),NOOP:n(1)}},function(t,i,n){t.exports={ArrayBufferToBase64:n(1483),Base64ToArrayBuffer:n(433)}},function(t,i){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";t.exports=function(t,i){for(var r=new Uint8Array(t),o=r.length,a=i?"data:"+i+";base64,":"",h=0;h<o;h+=3)a+=n[r[h]>>2],a+=n[(3&r[h])<<4|r[h+1]>>4],a+=n[(15&r[h+1])<<2|r[h+2]>>6],a+=n[63&r[h+2]];return o%3==2?a=a.substring(0,a.length-1)+"=":o%3==1&&(a=a.substring(0,a.length-2)+"=="),a}},function(t,i,n){t.exports={Clone:n(77),DeepCopy:n(175),Extend:n(17),GetAdvancedValue:n(13),GetFastValue:n(2),GetMinMaxValue:n(1485),GetValue:n(6),HasAll:n(1486),HasAny:n(455),HasValue:n(126),IsPlainObject:n(7),Merge:n(127),MergeRight:n(1487),Pick:n(571),SetValue:n(478)}},function(t,i,n){var r=n(6),o=n(18);t.exports=function(t,i,n,a,h){void 0===h&&(h=n);var d=r(t,i,h);return o(d,n,a)}},function(t,i){t.exports=function(t,i){for(var n=0;n<i.length;n++)if(!t.hasOwnProperty(i[n]))return!1;return!0}},function(t,i,n){var r=n(77);t.exports=function(t,i){var n=r(t);for(var o in i)n.hasOwnProperty(o)&&(n[o]=i[o]);return n}},function(t,i,n){t.exports={Format:n(1489),Pad:n(186),RemoveAt:n(1490),Reverse:n(1491),UppercaseFirst:n(205),UUID:n(222)}},function(t,i){t.exports=function(t,i){return t.replace(/%([0-9]+)/g,(function(t,n){return i[Number(n)-1]}))}},function(t,i){t.exports=function(t,i){return 0===i?t.slice(1):t.slice(0,i-1)+t.slice(i)}},function(t,i){t.exports=function(t){return t.split("").reverse().join("")}},function(t,i,n){t.exports={SoundManagerCreator:n(426),Events:n(70),BaseSound:n(146),BaseSoundManager:n(145),WebAudioSound:n(434),WebAudioSoundManager:n(432),HTML5AudioSound:n(429),HTML5AudioSoundManager:n(427),NoAudioSound:n(431),NoAudioSoundManager:n(430)}},function(t,i,n){t.exports={Arcade:n(1366),Matter:n(1494)}},function(t,i,n){t.exports={BodyBounds:n(1392),Components:n(249),Events:n(272),Factory:n(1394),MatterGameObject:n(1395),Image:n(1396),Matter:n(594),MatterPhysics:n(1524),PolyDecomp:n(1393),Sprite:n(1397),TileBody:n(593),PhysicsEditorParser:n(589),PhysicsJSONParser:n(590),PointerConstraint:n(1398),World:n(1402)}},function(t,i){t.exports={setBounce:function(t){return this.body.restitution=t,this}}},function(t,i){var n={setCollisionCategory:function(t){return this.body.collisionFilter.category=t,this},setCollisionGroup:function(t){return this.body.collisionFilter.group=t,this},setCollidesWith:function(t){var i=0;if(Array.isArray(t))for(var n=0;n<t.length;n++)i|=t[n];else i=t;return this.body.collisionFilter.mask=i,this},setOnCollide:function(t){return this.body.onCollideCallback=t,this},setOnCollideEnd:function(t){return this.body.onCollideEndCallback=t,this},setOnCollideActive:function(t){return this.body.onCollideActiveCallback=t,this},setOnCollideWith:function(t,i){Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var r=t[n].hasOwnProperty("body")?t[n].body:t[n];this.body.setOnCollideWith(r,i)}return this}};t.exports=n},function(t,i,n){var r=n(41),o={applyForce:function(t){return this._tempVec2.set(this.body.position.x,this.body.position.y),r.applyForce(this.body,this._tempVec2,t),this},applyForceFrom:function(t,i){return r.applyForce(this.body,t,i),this},thrust:function(t){var i=this.body.angle;return this._tempVec2.set(t*Math.cos(i),t*Math.sin(i)),r.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(t){var i=this.body.angle-Math.PI/2;return this._tempVec2.set(t*Math.cos(i),t*Math.sin(i)),r.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(t){var i=this.body.angle+Math.PI/2;return this._tempVec2.set(t*Math.cos(i),t*Math.sin(i)),r.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(t){var i=this.body.angle-Math.PI;return this._tempVec2.set(t*Math.cos(i),t*Math.sin(i)),r.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};t.exports=o},function(t,i){t.exports={setFriction:function(t,i,n){return this.body.friction=t,void 0!==i&&(this.body.frictionAir=i),void 0!==n&&(this.body.frictionStatic=n),this},setFrictionAir:function(t){return this.body.frictionAir=t,this},setFrictionStatic:function(t){return this.body.frictionStatic=t,this}}},function(t,i){t.exports={setIgnoreGravity:function(t){return this.body.ignoreGravity=t,this}}},function(t,i,n){var r=n(41),o=n(3),a={setMass:function(t){return r.setMass(this.body,t),this},setDensity:function(t){return r.setDensity(this.body,t),this},centerOfMass:{get:function(){return new o(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};t.exports=a},function(t,i){t.exports={setSensor:function(t){return this.body.isSensor=t,this},isSensor:function(){return this.body.isSensor}}},function(t,i,n){var r=n(86),o=n(41),a=n(124),h=n(2),d=n(589),f=n(590),p=n(64),T={setRectangle:function(t,i,n){return this.setBody({type:"rectangle",width:t,height:i},n)},setCircle:function(t,i){return this.setBody({type:"circle",radius:t},i)},setPolygon:function(t,i,n){return this.setBody({type:"polygon",sides:i,radius:t},n)},setTrapezoid:function(t,i,n,r){return this.setBody({type:"trapezoid",width:t,height:i,slope:n},r)},setExistingBody:function(t,i){void 0===i&&(i=!0),this.body&&this.world.remove(this.body,!0),this.body=t;for(var n=0;n<t.parts.length;n++)t.parts[n].gameObject=this;var r=this;if(t.destroy=function destroy(){r.world.remove(r.body,!0),r.body.gameObject=null},i&&(this.world.has(t)&&this.world.remove(t,!0),this.world.add(t)),this._originComponent){var o=t.render.sprite.xOffset,h=t.render.sprite.yOffset,d=t.centerOfMass.x,f=t.centerOfMass.y;if(a(d,.5)&&a(f,.5))this.setOrigin(o+.5,h+.5);else{var p=t.centerOffset.x,T=t.centerOffset.y;this.setOrigin(o+p/this.displayWidth,h+T/this.displayHeight)}}return this},setBody:function(t,i){if(!t)return this;var n;"string"==typeof t&&(t={type:t});var a=h(t,"type","rectangle"),T=h(t,"x",this._tempVec2.x),b=h(t,"y",this._tempVec2.y),S=h(t,"width",this.width),A=h(t,"height",this.height);switch(a){case"rectangle":n=r.rectangle(T,b,S,A,i);break;case"circle":var P=h(t,"radius",Math.max(S,A)/2),O=h(t,"maxSides",25);n=r.circle(T,b,P,i,O);break;case"trapezoid":var L=h(t,"slope",.5);n=r.trapezoid(T,b,S,A,L,i);break;case"polygon":var D=h(t,"sides",5),I=h(t,"radius",Math.max(S,A)/2);n=r.polygon(T,b,D,I,i);break;case"fromVertices":case"fromVerts":var F=h(t,"verts",null);if(F)if("string"==typeof F&&(F=p.fromPath(F)),this.body&&!this.body.hasOwnProperty("temp"))o.setVertices(this.body,F),n=this.body;else{var B=h(t,"flagInternal",!1),N=h(t,"removeCollinear",.01),Y=h(t,"minimumArea",10);n=r.fromVertices(T,b,F,i,B,N,Y)}break;case"fromPhysicsEditor":n=d.parseBody(T,b,t,i);break;case"fromPhysicsTracer":n=f.parseBody(T,b,t,i)}return n&&this.setExistingBody(n,t.addToWorld),this}};t.exports=T},function(t,i,n){var r=n(272),o=n(165),a=n(166),h={setToSleep:function(){return o.set(this.body,!0),this},setAwake:function(){return o.set(this.body,!1),this},setSleepThreshold:function(t){return void 0===t&&(t=60),this.body.sleepThreshold=t,this},setSleepEvents:function(t,i){return this.setSleepStartEvent(t),this.setSleepEndEvent(i),this},setSleepStartEvent:function(t){if(t){var i=this.world;a.on(this.body,"sleepStart",(function(t){i.emit(r.SLEEP_START,t,this)}))}else a.off(this.body,"sleepStart");return this},setSleepEndEvent:function(t){if(t){var i=this.world;a.on(this.body,"sleepEnd",(function(t){i.emit(r.SLEEP_END,t,this)}))}else a.off(this.body,"sleepEnd");return this}};t.exports=h},function(t,i){t.exports="afteradd"},function(t,i){t.exports="afterremove"},function(t,i){t.exports="afterupdate"},function(t,i){t.exports="beforeadd"},function(t,i){t.exports="beforeremove"},function(t,i){t.exports="beforeupdate"},function(t,i){t.exports="collisionactive"},function(t,i){t.exports="collisionend"},function(t,i){t.exports="collisionstart"},function(t,i){t.exports="dragend"},function(t,i){t.exports="drag"},function(t,i){t.exports="dragstart"},function(t,i){t.exports="pause"},function(t,i){t.exports="resume"},function(t,i){t.exports="sleepend"},function(t,i){t.exports="sleepstart"},function(t,i,n){var r=n(41),o={setStatic:function(t){return r.setStatic(this.body,t),this},isStatic:function(){return this.body.isStatic}};t.exports=o},function(t,i,n){var r=n(41),o=n(14),a=n(269),h=n(270),d={x:{get:function(){return this.body.position.x},set:function(t){this._tempVec2.set(t,this.y),r.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(t){this._tempVec2.set(this.x,t),r.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(t){var i=1/this._scaleX,n=1/this._scaleY;this._scaleX=t,0===this._scaleX?this.renderFlags&=-5:this.renderFlags|=4,r.scale(this.body,i,n),r.scale(this.body,t,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(t){var i=1/this._scaleX,n=1/this._scaleY;this._scaleY=t,0===this._scaleY?this.renderFlags&=-5:this.renderFlags|=4,r.scale(this.body,i,n),r.scale(this.body,this._scaleX,t)}},angle:{get:function(){return h(this.body.angle*o.RAD_TO_DEG)},set:function(t){this.rotation=h(t)*o.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(t){this._rotation=a(t),r.setAngle(this.body,this._rotation)}},setPosition:function(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this._tempVec2.set(t,i),r.setPosition(this.body,this._tempVec2),this},setRotation:function(t){return void 0===t&&(t=0),this._rotation=a(t),r.setAngle(this.body,t),this},setFixedRotation:function(){return r.setInertia(this.body,1/0),this},setAngle:function(t){return void 0===t&&(t=0),this.angle=t,r.setAngle(this.body,this.rotation),this},setScale:function(t,i,n){void 0===t&&(t=1),void 0===i&&(i=t);var o=1/this._scaleX,a=1/this._scaleY;return this._scaleX=t,this._scaleY=i,r.scale(this.body,o,a,n),r.scale(this.body,t,i,n),this}};t.exports=d},function(t,i,n){var r=n(41),o={setAngularVelocity:function(t){return r.setAngularVelocity(this.body,t),this},setVelocityX:function(t){return this._tempVec2.set(t,this.body.velocity.y),r.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(t){return this._tempVec2.set(this.body.velocity.x,t),r.setVelocity(this.body,this._tempVec2),this},setVelocity:function(t,i){return this._tempVec2.set(t,i),r.setVelocity(this.body,this._tempVec2),this}};t.exports=o},function(t,i,n){var r={};t.exports=r;var o=n(118),a=n(32);r.create=function(t){return a.extend({extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0},!1,t)},r.reset=function(t){t.extended&&(t.narrowDetections=0,t.narrowphaseTests=0,t.narrowReuse=0,t.narrowReuseCount=0,t.midphaseTests=0,t.broadphaseTests=0,t.narrowEff=0,t.midEff=0,t.broadEff=0,t.collisions=0,t.buckets=0,t.pairs=0,t.bodies=0)},r.update=function(t,i){if(t.extended){var n=i.world,r=o.allBodies(n);t.collisions=t.narrowDetections,t.pairs=i.pairs.list.length,t.bodies=r.length,t.midEff=(t.narrowDetections/(t.midphaseTests||1)).toFixed(2),t.narrowEff=(t.narrowDetections/(t.narrowphaseTests||1)).toFixed(2),t.broadEff=(1-t.broadphaseTests/(r.length||1)).toFixed(2),t.narrowReuse=(t.narrowReuseCount/(t.narrowphaseTests||1)).toFixed(2)}}},function(t,i,n){var r=n(123),o=n(271),a=n(86),h=n(41),d=n(1392),f=n(84),p=n(0),T=n(118),b=n(591),S=n(128),A=n(273),P=n(50),O=n(1394),L=n(2),D=n(6),I=n(597),F=n(1525),B=n(1526),N=n(1399),Y=n(1527),X=n(127),G=n(250),U=n(598),V=n(595),z=n(24),W=n(1400),H=n(599),q=n(274),Z=n(20),K=n(592),J=n(83),Q=n(64),$=n(1402),tt=new p({initialize:function MatterPhysics2(t){this.scene=t,this.systems=t.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=h,this.composite=T,this.detector=A,this.grid=I,this.pair=G,this.pairs=U,this.query=W,this.resolver=H,this.sat=q,this.constraint=S,this.bodies=a,this.composites=b,this.axes=o,this.bounds=f,this.svg=K,this.vector=J,this.vertices=Q,this.verts=Q,this._tempVec2=J.create(),D(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),D(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),D(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),H._restingThresh=D(this.config,"restingThresh",4),H._restingThreshTangent=D(this.config,"restingThreshTangent",6),H._positionDampen=D(this.config,"positionDampen",.9),H._positionWarming=D(this.config,"positionWarming",.8),H._frictionNormalMultiplier=D(this.config,"frictionNormalMultiplier",5),t.sys.events.once(Z.BOOT,this.boot,this),t.sys.events.on(Z.START,this.start,this)},boot:function(){this.world=new $(this.scene,this.config),this.add=new O(this.world),this.bodyBounds=new d,this.systems.events.once(Z.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new $(this.scene,this.config),this.add=new O(this.world));var t=this.systems.events;t.on(Z.UPDATE,this.world.update,this.world),t.on(Z.POST_UPDATE,this.world.postUpdate,this.world),t.once(Z.SHUTDOWN,this.shutdown,this)},getConfig:function(){var t=this.systems.game.config.physics,i=this.systems.settings.physics;return X(L(i,"matter",{}),L(t,"matter",{}))},enableAttractorPlugin:function(){return V.register(F),V.use(N,F),this},enableWrapPlugin:function(){return V.register(Y),V.use(N,Y),this},enableCollisionEventsPlugin:function(){return V.register(B),V.use(N,B),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(t,i){this.world.step(t,i)},containsPoint:function(t,i,n){t=this.getMatterBodies(t);var r=J.create(i,n);return W.point(t,r).length>0},intersectPoint:function(t,i,n){n=this.getMatterBodies(n);var r=J.create(t,i),o=[];return W.point(n,r).forEach((function(t){-1===o.indexOf(t)&&o.push(t)})),o},intersectRect:function(t,i,n,r,o,a){void 0===o&&(o=!1),a=this.getMatterBodies(a);var h={min:{x:t,y:i},max:{x:t+n,y:i+r}},d=[];return W.region(a,h,o).forEach((function(t){-1===d.indexOf(t)&&d.push(t)})),d},intersectRay:function(t,i,n,r,o,a){void 0===o&&(o=1),a=this.getMatterBodies(a);for(var h=[],d=W.ray(a,J.create(t,i),J.create(n,r),o),f=0;f<d.length;f++)h.push(d[f].body);return h},intersectBody:function(t,i){i=this.getMatterBodies(i);for(var n=[],r=W.collides(t,i),o=0;o<r.length;o++){var a=r[o];a.bodyA===t?n.push(a.bodyB):n.push(a.bodyA)}return n},overlap:function(t,i,n,r,o){void 0===n&&(n=null),void 0===r&&(r=null),void 0===o&&(o=n),Array.isArray(t)||(t=[t]),t=this.getMatterBodies(t),i=this.getMatterBodies(i);for(var a=!1,h=0;h<t.length;h++)for(var d=t[h],f=W.collides(d,i),p=0;p<f.length;p++){var T=f[p],b=T.bodyA.id===d.id?T.bodyB:T.bodyA;if(!r||r.call(o,d,b,T))if(a=!0,n)n.call(o,d,b,T);else if(!r)return!0}return a},setCollisionCategory:function(t,i){return(t=this.getMatterBodies(t)).forEach((function(t){t.collisionFilter.category=i})),this},setCollisionGroup:function(t,i){return(t=this.getMatterBodies(t)).forEach((function(t){t.collisionFilter.group=i})),this},setCollidesWith:function(t,i){t=this.getMatterBodies(t);var n=0;if(Array.isArray(i))for(var r=0;r<i.length;r++)n|=i[r];else n=i;return t.forEach((function(t){t.collisionFilter.mask=n})),this},getMatterBodies:function(t){if(!t)return this.world.getAllBodies();Array.isArray(t)||(t=[t]);for(var i=[],n=0;n<t.length;n++){var r=t[n].hasOwnProperty("body")?t[n].body:t[n];i.push(r)}return i},setVelocity:function(t,i,n){t=this.getMatterBodies(t);var r=this._tempVec2;return r.x=i,r.y=n,t.forEach((function(t){h.setVelocity(t,r)})),this},setVelocityX:function(t,i){t=this.getMatterBodies(t);var n=this._tempVec2;return n.x=i,t.forEach((function(t){n.y=t.velocity.y,h.setVelocity(t,n)})),this},setVelocityY:function(t,i){t=this.getMatterBodies(t);var n=this._tempVec2;return n.y=i,t.forEach((function(t){n.x=t.velocity.x,h.setVelocity(t,n)})),this},setAngularVelocity:function(t,i){return(t=this.getMatterBodies(t)).forEach((function(t){h.setAngularVelocity(t,i)})),this},applyForce:function(t,i){t=this.getMatterBodies(t);var n=this._tempVec2;return t.forEach((function(t){n.x=t.position.x,n.y=t.position.y,h.applyForce(t,n,i)})),this},applyForceFromPosition:function(t,i,n,r){t=this.getMatterBodies(t);var o=this._tempVec2;return t.forEach((function(t){void 0===r&&(r=t.angle),o.x=n*Math.cos(r),o.y=n*Math.sin(r),h.applyForce(t,i,o)})),this},applyForceFromAngle:function(t,i,n){t=this.getMatterBodies(t);var r=this._tempVec2;return t.forEach((function(t){void 0===n&&(n=t.angle),r.x=i*Math.cos(n),r.y=i*Math.sin(n),h.applyForce(t,{x:t.position.x,y:t.position.y},r)})),this},getConstraintLength:function(t){var i=t.pointA.x,n=t.pointA.y,r=t.pointB.x,o=t.pointB.y;return t.bodyA&&(i+=t.bodyA.position.x,n+=t.bodyA.position.y),t.bodyB&&(r+=t.bodyB.position.x,o+=t.bodyB.position.y),P(i,n,r,o)},alignBody:function(t,i,n,o){var a;switch(t=t.hasOwnProperty("body")?t.body:t,o){case r.TOP_LEFT:case r.LEFT_TOP:a=this.bodyBounds.getTopLeft(t,i,n);break;case r.TOP_CENTER:a=this.bodyBounds.getTopCenter(t,i,n);break;case r.TOP_RIGHT:case r.RIGHT_TOP:a=this.bodyBounds.getTopRight(t,i,n);break;case r.LEFT_CENTER:a=this.bodyBounds.getLeftCenter(t,i,n);break;case r.CENTER:a=this.bodyBounds.getCenter(t,i,n);break;case r.RIGHT_CENTER:a=this.bodyBounds.getRightCenter(t,i,n);break;case r.LEFT_BOTTOM:case r.BOTTOM_LEFT:a=this.bodyBounds.getBottomLeft(t,i,n);break;case r.BOTTOM_CENTER:a=this.bodyBounds.getBottomCenter(t,i,n);break;case r.BOTTOM_RIGHT:case r.RIGHT_BOTTOM:a=this.bodyBounds.getBottomRight(t,i,n)}return a&&h.setPosition(t,a),this},shutdown:function(){var t=this.systems.events;this.world&&(t.off(Z.UPDATE,this.world.update,this.world),t.off(Z.POST_UPDATE,this.world.postUpdate,this.world)),t.off(Z.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(Z.START,this.start,this),this.scene=null,this.systems=null}});z.register("MatterPhysics",tt,"matterPhysics"),t.exports=tt},function(t,i,n){var r=n(594),o={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.14.2",silent:!0,install:function(t){t.after("Body.create",(function(){o.Body.init(this)})),t.before("Engine.update",(function(t){o.Engine.update(t)}))},Body:{init:function(t){t.plugin.attractors=t.plugin.attractors||[]}},Engine:{update:function(t){for(var i=r.Composite.allBodies(t.world),n=0;n<i.length;n++){var o=i[n],a=o.plugin.attractors;if(a&&a.length>0)for(var h=0;h<i.length;h++){var d=i[h];if(n!==h)for(var f=0;f<a.length;f++){var p=a[f],T=p;r.Common.isFunction(p)&&(T=p(o,d)),T&&r.Body.applyForce(d,d.position,T)}}}}},Attractors:{gravityConstant:.001,gravity:function(t,i){var n=r.Vector.sub(i.position,t.position),a=r.Vector.magnitudeSquared(n)||1e-4,h=r.Vector.normalise(n),d=-o.Attractors.gravityConstant*(t.mass*i.mass/a),f=r.Vector.mult(h,d);r.Body.applyForce(t,t.position,r.Vector.neg(f)),r.Body.applyForce(i,i.position,f)}}};t.exports=o},function(t,i){t.exports={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function(t){t.after("Engine.create",(function(){t.Events.on(this,"collisionStart",(function(i){i.pairs.map((function(i){var n=i.bodyA,r=i.bodyB;n.gameObject&&n.gameObject.emit("collide",n,r,i),r.gameObject&&r.gameObject.emit("collide",r,n,i),t.Events.trigger(n,"onCollide",{pair:i}),t.Events.trigger(r,"onCollide",{pair:i}),n.onCollideCallback&&n.onCollideCallback(i),r.onCollideCallback&&r.onCollideCallback(i),n.onCollideWith[r.id]&&n.onCollideWith[r.id](r,i),r.onCollideWith[n.id]&&r.onCollideWith[n.id](n,i)}))})),t.Events.on(this,"collisionActive",(function(i){i.pairs.map((function(i){var n=i.bodyA,r=i.bodyB;n.gameObject&&n.gameObject.emit("collideActive",n,r,i),r.gameObject&&r.gameObject.emit("collideActive",r,n,i),t.Events.trigger(n,"onCollideActive",{pair:i}),t.Events.trigger(r,"onCollideActive",{pair:i}),n.onCollideActiveCallback&&n.onCollideActiveCallback(i),r.onCollideActiveCallback&&r.onCollideActiveCallback(i)}))})),t.Events.on(this,"collisionEnd",(function(i){i.pairs.map((function(i){var n=i.bodyA,r=i.bodyB;n.gameObject&&n.gameObject.emit("collideEnd",n,r,i),r.gameObject&&r.gameObject.emit("collideEnd",r,n,i),t.Events.trigger(n,"onCollideEnd",{pair:i}),t.Events.trigger(r,"onCollideEnd",{pair:i}),n.onCollideEndCallback&&n.onCollideEndCallback(i),r.onCollideEndCallback&&r.onCollideEndCallback(i)}))}))}))}}},function(t,i,n){var r=n(594),o={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function(t){t.after("Engine.update",(function(){o.Engine.update(this)}))},Engine:{update:function(t){for(var i=t.world,n=r.Composite.allBodies(i),a=r.Composite.allComposites(i),h=0;h<n.length;h+=1){var d=n[h];d.plugin.wrap&&o.Body.wrap(d,d.plugin.wrap)}for(h=0;h<a.length;h+=1){var f=a[h];f.plugin.wrap&&o.Composite.wrap(f,f.plugin.wrap)}}},Bounds:{wrap:function(t,i){var n=null,r=null;if(void 0!==i.min.x&&void 0!==i.max.x&&(t.min.x>i.max.x?n=i.min.x-t.max.x:t.max.x<i.min.x&&(n=i.max.x-t.min.x)),void 0!==i.min.y&&void 0!==i.max.y&&(t.min.y>i.max.y?r=i.min.y-t.max.y:t.max.y<i.min.y&&(r=i.max.y-t.min.y)),null!==n||null!==r)return{x:n||0,y:r||0}}},Body:{wrap:function(t,i){var n=o.Bounds.wrap(t.bounds,i);return n&&r.Body.translate(t,n),n}},Composite:{bounds:function(t){for(var i=r.Composite.allBodies(t),n=[],o=0;o<i.length;o+=1){var a=i[o];n.push(a.bounds.min,a.bounds.max)}return r.Bounds.create(n)},wrap:function(t,i){var n=o.Bounds.wrap(o.Composite.bounds(t),i);return n&&r.Composite.translate(t,n),n}}};t.exports=o},function(t,i,n){(function(i){var r=n(33),o=n(17),a={Actions:n(275),Animations:n(723),BlendModes:n(35),Cache:n(735),Cameras:n(738),Core:n(806),Class:n(0),Create:n(888),Curves:n(894),Data:n(896),Display:n(898),DOM:n(917),Events:n(918),Game:n(920),GameObjects:n(1011),Geom:n(483),Input:n(1308),Loader:n(1338),Math:n(193),Physics:n(1493),Plugins:n(1403),Renderer:n(1405),Scale:n(1412),ScaleModes:n(168),Scene:n(418),Scenes:n(1413),Structs:n(1415),Textures:n(1416),Tilemaps:n(1418),Time:n(1461),Tweens:n(1463),Utils:n(1481)};a.Sound=n(1492),a=o(!1,a,r),t.exports=a,i.Phaser=a}).call(this,n(600))}])}));var r=getDefaultExportFromCjs(n.exports);const o=new class RoutinesData{constructor(){this.routines=[],this.routinesByNames={}}};class RoutinesManager{static RegisterRoutine(t,i=null){o.routines.push(t),t.GetName(),o.routinesByNames[i]=t,console.assert(t.OnRegister,t),t.OnRegister()}static InitRoutines(){for(const t in o.routines){const i=o.routines[t];console.assert(i.Init,i),i.Init()}}static UpdateRoutines(t,i){for(const n in o.routines){o.routines[n].Update(i)}}}let a;var h="undefined"!=typeof global&&(global.crypto||global.msCrypto);if(h&&h.getRandomValues){var d=new Uint8Array(16);a=function whatwgRNG(){return h.getRandomValues(d),d}}if(!a){var f=new Array(16);a=function(){for(var t,i=0;i<16;i++)0==(3&i)&&(t=4294967296*Math.random()),f[i]=t>>>((3&i)<<3)&255;return f}}for(var p=[],T=0;T<256;++T)p[T]=(T+256).toString(16).substr(1);function v4(t,i,n){var r=i&&n||0;"string"==typeof t&&(i="binary"==t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,i)for(var h=0;h<16;++h)i[r+h]=o[h];return i||function bytesToUuid(t,i){var n=i||0,r=p;return r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]}(o)}function GetGUID(){return v4()}function clone(t){return Array.isArray(t)?t.slice():t instanceof Object?Object.assign({},t):t}function forEach(t,i){return Array.isArray(t)?forEachOfArray(t,i):function forOwnOfNonArray(t,i){return forEachOfArray(function keysOfNonArray(t){return t?Object.getOwnPropertyNames(t):[]}(t),(n=>i(t[n],n))),t}(t,i),t}function forEachOfArray(t,i){for(let n=0,r=t.length;n<r&&!1!==i(t[n],n);++n);}const b=function merge(t,...i){for(const n of i)forEach(n,((i,n)=>{const r=t[n];r instanceof Object&&(i=merge(clone(r),i)),t[n]=i}));return t};class Component{get world(){return this.entity.world}get allowMultiple(){return this.constructor.allowMultiple}get keyProperty(){return this.constructor.keyProperty}constructor(t={}){null==this._cbit&&console.warn("COMPONENT NOT REGISTERED")}destroy(){this.entity.remove(this)}_onDestroyed(){this.onDestroyed(),delete this.entity}_onEvent(t){this.onEvent(t),"function"==typeof this[t.handlerName]&&this[t.handlerName](t)}_onAttached(t){this.entity=t,this.onAttached(t)}serialize(){const t={};for(const i in this.constructor.properties)t[i]=this[i];return JSON.parse(JSON.stringify(t))}onAttached(t){}onDestroyed(){}onEvent(t){}}__publicField(Component,"allowMultiple",!1),__publicField(Component,"keyProperty",null),__publicField(Component,"properties",{});const S={},camelString=t=>{const i=S[t];return i||(S[t]=function camelCase$1(t){return function words$1(t){var i;return null!==(i=t.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/(\d)([A-Za-z])/g,"$1 $2").replace(/([A-Za-z])(\d)/g,"$1 $2").replace(/\b([A-Z]+)([A-Z])([a-z])/,"$1 $2$3").match(/[A-Za-z0-9]+/g))&&void 0!==i?i:[]}(t).map(((t,i)=>i?function capitalize$1(t){return function upperFirst(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""}(t.toLowerCase())}(t):t.toLowerCase())).join("")}(t),S[t])};class EntityEvent{constructor(t,i={}){__publicField(this,"data",{}),__publicField(this,"prevented",!1),__publicField(this,"handled",!1),this.name=t,this.data=i,this.handlerName=camelString(`on ${this.name}`)}is(t){return this.name===t}handle(){this.handled=!0,this.prevented=!0}prevent(){this.prevented=!0}}const A=0,subtractBit=(t,i)=>t&~(1<<i),addBit=(t,i)=>t|1<<i,bitIntersection=(t,i)=>t&i,serializeComponent=t=>t.serialize(),serializeComponentKeyed=t=>{const i={};for(const n in t)i[n]=serializeComponent(t[n]);return i};class Entity{constructor(t,i){__publicField(this,"_cbits",A),__publicField(this,"_qeligible",!0),this.world=t,this.id=i,this.components={},this.isDestroyed=!1}_candidacy(){this._qeligible&&this.world._candidate(this)}add(t,i){const n=new t(i);n.keyProperty?((t,i)=>{const n=i._ckey;t.components[n]||(t[n]={},t.components[n]={}),t[n][i[i.keyProperty]]=i,t.components[n][i[i.keyProperty]]=i})(this,n):n.allowMultiple?((t,i)=>{const n=i._ckey;t.components[n]||(t[n]=[],t.components[n]=[]),t[n].push(i),t.components[n].push(i)})(this,n):((t,i)=>{const n=i._ckey;t[n]=i,t.components[n]=i})(this,n),this._cbits=addBit(this._cbits,n._cbit),n._onAttached(this),this._candidacy()}has(t){return i=this._cbits,n=t.prototype._cbit,(i>>n)%2!==A;var i,n}remove(t){t.keyProperty?((t,i)=>{const n=i._ckey,r=i[i.keyProperty];delete t[n][r],delete t.components[n][r],Object.keys(t[n]).length<=0&&(t._cbits=subtractBit(t._cbits,i._cbit),t._candidacy(),delete t.components[n],delete t[n])})(this,t):t.allowMultiple?((t,i)=>{const n=i._ckey,r=t[n].indexOf(i);t[n].splice(r,1),t.components[n].splice(r,1),t[n].length<=0&&(t._cbits=subtractBit(t._cbits,i._cbit),t._candidacy(),delete t.components[n],delete t[n])})(this,t):((t,i)=>{const n=i._ckey;t._cbits=subtractBit(t._cbits,i._cbit),t._candidacy(),delete t.components[n],delete t[n]})(this,t),t._onDestroyed()}destroy(){for(const t in this.components){const i=this.components[t];if(i instanceof Component)this._cbits=subtractBit(this._cbits,i._cbit);else if(i instanceof Array)for(const t of i)this._cbits=subtractBit(this._cbits,t._cbit);else for(const t of Object.values(i))this._cbits=subtractBit(this._cbits,t._cbit)}this._candidacy();for(const t in this.components){const i=this.components[t];if(i instanceof Component)i._onDestroyed();else if(i instanceof Array)for(const t of i)t._onDestroyed();else for(const t of Object.values(i))t._onDestroyed();delete this[t],delete this.components[t]}this.world._destroyed(this.id),this.components={},this.isDestroyed=!0}serialize(){const t={};for(const i in this.components){const n=this.components[i];t[i]=n instanceof Component?serializeComponent(n):n instanceof Array?n.map(serializeComponent):serializeComponentKeyed(n)}return{id:this.id,...t}}clone(){return this.world.cloneEntity(this)}fireEvent(t,i){const n=new EntityEvent(t,i);for(const r in this.components){const t=this.components[r];if(t instanceof Component){if(t._onEvent(n),n.prevented)return n}else if(t instanceof Array){for(let i=0;i<t.length;i++)if(t[i]._onEvent(n),n.prevented)return n}else for(const i of Object.values(t))if(i._onEvent(n),n.prevented)return n}return n}}class DataComponent extends Component{constructor(t){super(null),this.gameStateName=null;const i=JSON.parse(JSON.stringify(this.constructor.properties));Object.assign(this,i,t)}static At(t){return t.data}static get properties(){return{}}static AddToEntityWithProperties(t,i,n=!0){return t.has(DataComponent)||t.add(DataComponent,{}),b(DataComponent.At(t),i),DataComponent.At(t)}}const P=new class InternalData$b{constructor(){this.bags={},this.entitiesByAlias={}}};class EntityKeeper{static Init(){}static PutActorIntoHisBags(t){const i=BagsComponent.At(t);for(const n in i.keys)P.bags[n]||(P.bags[n]=[]),P.bags[n].indexOf(t)<=-1&&P.bags[n].push(t);i.alias&&(P.entitiesByAlias[i.alias]&&P.entitiesByAlias[i.alias],P.entitiesByAlias[i.alias]=t)}static RemoveActorFromAllHisBags(t){const i=BagsComponent.At(t);for(const n in i.keys){P.bags[n]||(P.bags[n]=[]);let i=P.bags[n].indexOf(t);i>=0&&P.bags[n].splice(i,1)}i.alias&&P.entitiesByAlias[i.alias]&&P.entitiesByAlias[i.alias]==t&&delete P.entitiesByAlias[i.alias]}static QueueDisposeActorsInBag(t){let i=P.bags[t];for(let n=i.length-1;n>=0;n--)EndOfLoopRoutine.QueueActorToDisposeBuffer(i[n])}static GetBagActorsReferenceList(t){return P.bags[t]||(P.bags[t]=[]),P.bags[t]}static GetEntityByAlias(t){return P.entitiesByAlias[t]}static GetEntityByID(t){return GeoticManager.GetWorld().getEntity(t)}static DumpLogBags(){console.log(P.bags)}static DumpLogLengthALL(){console.log(P.bags.ALL.length)}}class BagsComponent extends Component{constructor(t){super(null),this.keys={},this.alias=null;const i=JSON.parse(JSON.stringify(this.constructor.properties));Object.assign(this,i,t)}static At(t){return t.bags}static AddBagList(t,i){console.assert(IsArray(i),"not an array! ",i);const n={};for(const o in i){n[i[o]]=!0}t.has(BagsComponent)||t.add(BagsComponent,{});const r=BagsComponent.At(t);return b(r.keys,n),EntityKeeper.PutActorIntoHisBags(t),this}setAlias(t){this.alias&&console.warn("FIX ME! ",this.alias,t),this.alias=t,EntityKeeper.PutActorIntoHisBags(this.entity)}onAttached(t){EntityKeeper.PutActorIntoHisBags(t)}onDestroyed(){EntityKeeper.RemoveActorFromAllHisBags(this.entity)}static get properties(){return{}}}class ComponentRegistry{constructor(){__publicField(this,"_cbit",0),__publicField(this,"_map",{})}register(t,i=null){let n;n=camelString(t.name),null!=i&&(n=i),t.prototype._ckey=n,t.prototype._cbit=++this._cbit,this._map[n]=t}get(t){return this._map[t]}}class PrefabComponent{constructor(t,i={},n=!0){this.clazz=t,this.properties=i,this.overwrite=n}applyToEntity(t,i={}){if(!this.clazz.allowMultiple&&t.has(this.clazz)){if(!this.overwrite)return;const i=t[this.clazz.prototype._ckey];t.remove(i)}const n=b(this.properties,i);t.add(this.clazz,n)}}class Prefab{constructor(t){__publicField(this,"name",""),__publicField(this,"inherit",[]),__publicField(this,"components",[]),this.name=t}addComponent(t){this.components.push(t)}applyToEntity(t,i={}){this.inherit.forEach((n=>{n.applyToEntity(t,i)}));const n={};return this.components.forEach((r=>{const o=r.clazz,a=o.prototype._ckey;let h={};if(o.allowMultiple)if(o.keyProperty){const t=r.properties[o.keyProperty];i[a]&&i[a][t]&&(h=i[a][t])}else n[a]||(n[a]=0),i[a]&&i[a][n[a]]&&(h=i[a][n[a]]),n[a]++;else h=i[a];r.applyToEntity(t,h)})),t}}class PrefabRegistry{constructor(t){__publicField(this,"_prefabs",{}),__publicField(this,"_engine",null),this._engine=t}deserialize(t){const i=this.get(t.name);if(i)return i;const n=new Prefab(t.name);let r;r=Array.isArray(t.inherit)?t.inherit:"string"==typeof t.inherit?[t.inherit]:[],n.inherit=r.map((i=>{const n=this.get(i);return n||(console.warn(`Prefab "${t.name}" cannot inherit from Prefab "${i}" because is not registered yet! Prefabs must be registered in the right order.`),i)}));return(t.components||[]).forEach((i=>{let r="unknown";if("string"==typeof i){r=i;const t=camelString(i),o=this._engine._components.get(t);if(o)return void n.addComponent(new PrefabComponent(o))}if("object"==typeof i){r=i.type||"unknown";const t=camelString(i.type),o=this._engine._components.get(t);if(o)return void n.addComponent(new PrefabComponent(o,i.properties,i.overwrite))}console.warn(`Unrecognized component reference "${r}" in prefab "${t.name}". Ensure the component is registered before the prefab.`,i)})),n}register(t){const i=this.deserialize(t);this._prefabs[i.name]=i}get(t){return this._prefabs[t]}create(t,i,n={}){const r=this.get(i);if(!r)return void console.warn(`Could not instantiate prefab "${i}" since it is not registered`);const o=t.createEntity();return o._qeligible=!1,r.applyToEntity(o,n),o._qeligible=!0,o._candidacy(),o}}class Query{constructor(t,i){__publicField(this,"_cache",[]),__publicField(this,"_onAddListeners",[]),__publicField(this,"_onRemoveListeners",[]),__publicField(this,"_immutableResult",!0),this._world=t;const n=i.any||[],r=i.all||[],o=i.none||[];this._any=n.reduce(((t,i)=>addBit(t,i.prototype._cbit)),A),this._all=r.reduce(((t,i)=>addBit(t,i.prototype._cbit)),A),this._none=o.reduce(((t,i)=>addBit(t,i.prototype._cbit)),A),this._immutableResult=null==i.immutableResult||i.immutableResult,this.refresh()}onEntityAdded(t){this._onAddListeners.push(t)}onEntityRemoved(t){this._onRemoveListeners.push(t)}has(t){return this.idx(t)>=0}idx(t){return this._cache.indexOf(t)}matches(t){const i=t._cbits,n=this._any===A||bitIntersection(i,this._any)>0,r=bitIntersection(i,this._all)===this._all,o=bitIntersection(i,this._none)===A;return n&&r&&o}candidate(t){const i=this.idx(t),n=i>=0;return!t.isDestroyed&&this.matches(t)?(n||(this._cache.push(t),this._onAddListeners.forEach((i=>i(t)))),!0):(n&&(this._cache.splice(i,1),this._onRemoveListeners.forEach((i=>i(t)))),!1)}refresh(){this._cache=[],this._world._entities.forEach((t=>{this.candidate(t)}))}get(){return this._immutableResult?[...this._cache]:this._cache}}class World{constructor(t){__publicField(this,"_id",0),__publicField(this,"_queries",[]),__publicField(this,"_entities",new Map),this.engine=t}createId(){return++this._id+Math.random().toString(36).substr(2,9)}getEntity(t){return this._entities.get(t)}getEntities(){return this._entities.values()}createEntity(t=this.createId()){const i=new Entity(this,t);return this._entities.set(t,i),i}destroyEntity(t){const i=this.getEntity(t);i&&i.destroy()}destroyEntities(){this._entities.forEach((t=>{t.destroy()}))}destroy(){this.destroyEntities(),this._id=0,this._queries=[],this._entities=new Map}createQuery(t){const i=new Query(this,t);return this._queries.push(i),i}createPrefab(t,i={}){return this.engine._prefabs.create(this,t,i)}serialize(t){const i=[];return(t||this._entities).forEach((t=>{i.push(t.serialize())})),{entities:i}}cloneEntity(t){const i=t.serialize();return i.id=this.createId(),this._deserializeEntity(i)}deserialize(t){for(const i of t.entities)this._createOrGetEntityById(i.id);for(const i of t.entities)this._deserializeEntity(i)}_createOrGetEntityById(t){return this.getEntity(t)||this.createEntity(t)}_deserializeEntity(t){const{id:i,...n}=t,r=this._createOrGetEntityById(i);return r._qeligible=!1,Object.entries(n).forEach((([t,i])=>{const n=camelString(t),o=this.engine._components.get(n);o.allowMultiple?Object.values(i).forEach((t=>{r.add(o,t)})):r.add(o,i)})),r._qeligible=!0,r._candidacy(),r}_candidate(t){this._queries.forEach((i=>i.candidate(t)))}_destroyed(t){return this._entities.delete(t)}}class Engine{constructor(){__publicField(this,"_components",new ComponentRegistry),__publicField(this,"_prefabs",new PrefabRegistry(this))}registerComponent(t,i=null){this._components.register(t,i)}registerPrefab(t){this._prefabs.register(t)}createWorld(){return new World(this)}destroyWorld(t){t.destroy()}}const O=new class InternalDataClass$8{constructor(){this.engine=null,this.world=null}};class GeoticManager{static SetEngine(t){O.engine=t}static GetEngine(){return O.engine}static SetWorld(t){O.world=t}static GetWorld(){return O.world}static CreateEntity(t){console.assert(t,"GameState: ",t),t.name&&(t=t.name);const i=O.world.createEntity();return DataComponent.AddToEntityWithProperties(i,{gameStateName:t}),BagsComponent.AddBagList(i,["ALL"]),BagsComponent.AddBagList(i,[t]),i}static InstantActorDestroy(t){t.isDestroyed||t.destroy()}}class DataHolder{constructor(){this.data={},this.keyList=[]}register(t,i,n=!1){return this.data[t]&&0==n&&console.warn(t," ALREADY EXIST IN DATA HOLDER"),this.data[t]=i,this.keyList.indexOf(t)<=-1&&this.keyList.push(t),i}hasKey(t){return!!this.data[t]}getData(t){return console.assert(this.data[t],t," not in: ",this.data),this.data[t]}getKeyList(){return this.keyList}}const L=class{static SetSingleton(t){L.Singleton=t,L.Singleton.init(),console.log(t)}constructor(){this.topScore=0}init(){}getPremadeOverrides(){return{}}gameEvent(t,i=null){}static GetSingleton(){return this.Singleton}getAudioOverrides(){return{}}getFlags(){return{disableSaveUserPrefs:0,disableSaveGameData:0,disableFakeMusicPreload:0,cordovaListenersEnabled:0,disableAutoPause:0,allowPauseAlways:0}}getUntypedFlags(){return{}}onGetRendererTypeOverride(t){return t}hasToResetScoreEachLevel(){return!1}adaptLocalStorageSetItem(t,i){localStorage.setItem(t,i)}adaptLocalStorageGetItem(t){return localStorage.getItem(t)}showAd(t){t()}onUpdateScore(t){this.topScore=t}onUpdateLevelNumber(t){}pushAPIGameLoadObj(t){}};let D=L;__publicField(D,"Singleton");class GameCommand{constructor(t){this._func=t}run(t=null){this._func(t)}}const I=new class ExtendedDataHolder$1 extends DataHolder{register(t,i,n=!1){return super.register(t,i,n),i}getData(t){return super.getData(t)}runCommand(t,i={}){this.getData(t).run(i)}runCommandObj(t){this.runCommand(t.key,t)}};class CommandsComponent extends Component{constructor(t){super(null),this.byTriggers={};const i=JSON.parse(JSON.stringify(this.constructor.properties));Object.assign(this,i,t)}runCommandAtTriggerKey(t,i=null){if(null==this.byTriggers[t])return;const n=this.byTriggers[t];if(!I.hasKey(n.key))return void console.warn("GameCommandsRegistry no defined command: ",n.key);let r={entity:this.entity};n&&b(r,n),n.pOptPayload&&b(r,i),I.runCommand(n.key,r)}static At(t){return t.commands||CommandsComponent.AddWithData(t,{}),t.commands}static AddWithData(t,i){t.has(CommandsComponent)||t.add(CommandsComponent,{});const n=CommandsComponent.At(t);return b(n,{byTriggers:i}),n}static get properties(){return{}}}class GameState{constructor(t){this.name=t,this.state="null",this.curQuitDelay=0,this.onEnter=()=>{},this.onExit=()=>{},this.onQuit=()=>{},F.register(this.name,this)}enterFresh(){"quit"!=this.state&&"null"!=this.state&&("exit"!=this.state&&this.exit(),this.quit()),this.state="enterFresh",this.onEnter(),D.GetSingleton().gameEvent("stateChange",{stateName:this.name,stateChangeType:"enter"})}exit(t=500){if(this.delayedFunctionDict={},"exit"==this.state||"quit"==this.state||"null"==this.state)return;this.curQuitDelay=t,this.state="exit",this.onExit(),D.GetSingleton().gameEvent("stateChange",{stateName:this.name,stateChangeType:"exit"});const i=EntityKeeper.GetBagActorsReferenceList(this.name);for(const n in i){const t=i[n];CommandsComponent.At(t).runCommandAtTriggerKey("exit")}}quit(){this.delayedFunctionDict={},"quit"!=this.state&&"null"!=this.state&&(this.state="quit",EntityKeeper.QueueDisposeActorsInBag(this.name),this.onQuit())}continue(){"exit"==this.state&&this.quit(),"enterFresh"!=this.state&&this.enterFresh()}isRunning(){return"enterFresh"==this.state}updateDelayedQuit(t){"exit"==this.state&&(this.curQuitDelay-=t,this.curQuitDelay<0&&this.quit())}}const F=new class ExtendedDataHolder extends DataHolder{register(t,i){return super.register(t,i),i}getData(t){return super.getData(t)}},B={entityDisposeBuffer:[],delayedFunctionDict:{},delayedFunctionDeleteKeysList:[],active:!0};class EndOfLoopRoutine{static OnRegister(){}static Init(){}static Register(){RoutinesManager.RegisterRoutine(EndOfLoopRoutine)}static GetName(){return"EndOfLoopRoutine"}static QueueActorToDisposeBuffer(t){t&&(t.isDestroyed||B.entityDisposeBuffer.indexOf(t)>-1||B.entityDisposeBuffer.push(t))}static QueueDelayedFunction(t,i,n){return null==t&&(t=GetGUID()),B.delayedFunctionDict[t]={tag:t,delay:i,func:n},t}static Update(t){const i=F.getKeyList();for(const n in i){const r=i[n];F.getData(r).updateDelayedQuit(t)}for(const n in B.delayedFunctionDict){const i=B.delayedFunctionDict[n];i.delay-=t,i.delay<=0&&(B.delayedFunctionDeleteKeysList.push(n),i.func())}for(let n=B.delayedFunctionDeleteKeysList.length-1;n>=0;n--){const t=B.delayedFunctionDeleteKeysList[n];delete B.delayedFunctionDict[t],B.delayedFunctionDeleteKeysList.splice(n,1)}B.entityDisposeBuffer.length>0&&function _FlushDisposeBuffer(){const t=B.entityDisposeBuffer;B.entityDisposeBuffer=[];for(let i=t.length-1;i>=0;i--){const n=t[i];GeoticManager.InstantActorDestroy(n)}}()}}var N={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1},Y=!1;function GetOs(){if(Y)return N;Y=!0;var t=navigator.userAgent;/Windows/.test(t)?N.windows=!0:/Mac OS/.test(t)&&!/like Mac OS/.test(t)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(N.iOS=!0,N.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),N.iOSVersion=parseInt(RegExp.$1,10)):N.macOS=!0:/Android/.test(t)?N.android=!0:/Linux/.test(t)?N.linux=!0:/iP[ao]d|iPhone/i.test(t)?(N.iOS=!0,navigator.appVersion.match(/OS (\d+)/),N.iOSVersion=parseInt(RegExp.$1,10),N.iPhone=-1!==t.toLowerCase().indexOf("iphone"),N.iPad=-1!==t.toLowerCase().indexOf("ipad")):/Kindle/.test(t)||/\bKF[A-Z][A-Z]+/.test(t)||/Silk.*Mobile Safari/.test(t)?N.kindle=!0:/CrOS/.test(t)&&(N.chromeOS=!0),(/Windows Phone/i.test(t)||/IEMobile/i.test(t))&&(N.android=!1,N.iOS=!1,N.macOS=!1,N.windows=!0,N.windowsPhone=!0);var i=/Silk/.test(t);return(N.windows||N.macOS||N.linux&&!i||N.chromeOS)&&(N.desktop=!0),(N.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(N.desktop=!1),navigator.standalone&&(N.webApp=!0),void 0!==window.cordova&&(N.cordova=!0),"undefined"!=typeof process&&process.versions&&process.versions.node&&(N.node=!0),N.node&&"object"==typeof process.versions&&(N.nodeWebkit=!!process.versions["node-webkit"],N.electron=!!process.versions.electron),void 0!==window.ejecta&&(N.ejecta=!0),/Crosswalk/.test(t)&&(N.crosswalk=!0),N.pixelRatio=window.devicePixelRatio||1,N}var X={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0},G=!1;class ObjectFactory$1{constructor(t){this.scene=t,this.displayList=t.sys.displayList,this.updateList=t.sys.updateList,t.sys.events.once("destroy",this.destroy,this)}destroy(){this.scene=null,this.displayList=null,this.updateList=null}static register(t,i){ObjectFactory$1.prototype[t]=i}}var U={exports:{}};!function(t){var i=Object.prototype.hasOwnProperty,n="~";function Events(){}function EE2(t,i,n){this.fn=t,this.context=i,this.once=n||!1}function addListener(t,i,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var h=new EE2(r,o||t,a),d=n?n+i:i;return t._events[d]?t._events[d].fn?t._events[d]=[t._events[d],h]:t._events[d].push(h):(t._events[d]=h,t._eventsCount++),t}function clearEvent(t,i){0==--t._eventsCount?t._events=new Events:delete t._events[i]}function EventEmitter2(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(n=!1)),EventEmitter2.prototype.eventNames=function eventNames(){var t,r,o=[];if(0===this._eventsCount)return o;for(r in t=this._events)i.call(t,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},EventEmitter2.prototype.listeners=function listeners(t){var i=n?n+t:t,r=this._events[i];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,a=r.length,h=new Array(a);o<a;o++)h[o]=r[o].fn;return h},EventEmitter2.prototype.listenerCount=function listenerCount(t){var i=n?n+t:t,r=this._events[i];return r?r.fn?1:r.length:0},EventEmitter2.prototype.emit=function emit(t,i,r,o,a,h){var d=n?n+t:t;if(!this._events[d])return!1;var f,p,T=this._events[d],b=arguments.length;if(T.fn){switch(T.once&&this.removeListener(t,T.fn,void 0,!0),b){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,i),!0;case 3:return T.fn.call(T.context,i,r),!0;case 4:return T.fn.call(T.context,i,r,o),!0;case 5:return T.fn.call(T.context,i,r,o,a),!0;case 6:return T.fn.call(T.context,i,r,o,a,h),!0}for(p=1,f=new Array(b-1);p<b;p++)f[p-1]=arguments[p];T.fn.apply(T.context,f)}else{var S,A=T.length;for(p=0;p<A;p++)switch(T[p].once&&this.removeListener(t,T[p].fn,void 0,!0),b){case 1:T[p].fn.call(T[p].context);break;case 2:T[p].fn.call(T[p].context,i);break;case 3:T[p].fn.call(T[p].context,i,r);break;case 4:T[p].fn.call(T[p].context,i,r,o);break;default:if(!f)for(S=1,f=new Array(b-1);S<b;S++)f[S-1]=arguments[S];T[p].fn.apply(T[p].context,f)}}return!0},EventEmitter2.prototype.on=function on(t,i,n){return addListener(this,t,i,n,!1)},EventEmitter2.prototype.once=function once(t,i,n){return addListener(this,t,i,n,!0)},EventEmitter2.prototype.removeListener=function removeListener(t,i,r,o){var a=n?n+t:t;if(!this._events[a])return this;if(!i)return clearEvent(this,a),this;var h=this._events[a];if(h.fn)h.fn!==i||o&&!h.once||r&&h.context!==r||clearEvent(this,a);else{for(var d=0,f=[],p=h.length;d<p;d++)(h[d].fn!==i||o&&!h[d].once||r&&h[d].context!==r)&&f.push(h[d]);f.length?this._events[a]=1===f.length?f[0]:f:clearEvent(this,a)}return this},EventEmitter2.prototype.removeAllListeners=function removeAllListeners(t){var i;return t?(i=n?n+t:t,this._events[i]&&clearEvent(this,i)):(this._events=new Events,this._eventsCount=0),this},EventEmitter2.prototype.off=EventEmitter2.prototype.removeListener,EventEmitter2.prototype.addListener=EventEmitter2.prototype.on,EventEmitter2.prefixed=n,EventEmitter2.EventEmitter=EventEmitter2,t.exports=EventEmitter2}(U);var V=U.exports;class EventEmitter extends V{shutdown(){this.removeAllListeners()}destroy(){this.removeAllListeners()}}var GetValue$l=function(t,i,n){if(t&&"number"!=typeof t){if(t.hasOwnProperty(i))return t[i];if(-1!==i.indexOf(".")){for(var r=i.split("."),o=t,a=n,h=0;h<r.length;h++){if(!o.hasOwnProperty(r[h])){a=n;break}a=o[r[h]],o=o[r[h]]}return a}return n}return n};var z=new class Bank{constructor(t){this.nextId=GetValue$l(t,"start",1),this.uidKey=GetValue$l(t,"uidKey","$uid"),this.autoRemove=GetValue$l(t,"remove",!0),this.refs={},this.count=0}add(t,i){var n=this.refs,r=this.uidKey;if(r&&null!=(i=t[r]))return this;if(null==i)do{i=this.nextId,this.nextId++}while(n.hasOwnProperty(i));return n.hasOwnProperty(i)?i=null:(n[i]=t,this.count++,r&&(t[r]=i),this.autoRemove&&t.on&&t.once("destroy",(function(){this.remove(i)}),this)),r?this:i}addMultiple(t){for(var i=0,n=t.length;i<n;i++)this.add(t[i]);return this}get(t){return this.refs[t]}has(t){return this.refs.hasOwnProperty(t)}remove(t){var i=this.refs;if(i.hasOwnProperty(t)){if(this.uidKey)i[t][this.uidKey]=void 0;delete i[t],this.count--}return this}forEach(t,i){var n,r=this.refs;for(var o in r)n=r[o],i?t.call(i,n,o):t(n,o)}clear(){this.forEach((function(t){this.remove(t)}),this)}}({uidKey:"$uid",remove:!1}),W={setEventEmitter(t,i){return void 0===i&&(i=Phaser.Events.EventEmitter),this._privateEE=!0===t||void 0===t,this._eventEmitter=this._privateEE?new i:t,this},destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(t){return this._eventEmitter&&t&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}};const H=Phaser.Scene;var IsSceneObject=function(t){return t instanceof H},GetSceneObject=function(t){return null==t||"object"!=typeof t?null:IsSceneObject(t)?t:t.scene&&IsSceneObject(t.scene)?t.scene:t.parent&&t.parent.scene&&IsSceneObject(t.parent.scene)?t.parent.scene:void 0};const q=Phaser.Utils.Objects.GetValue;class ComponentBase{constructor(t,i){this.parent=t,this.scene=GetSceneObject(t),this.isShutdown=!1,this.setEventEmitter(q(i,"eventEmitter",!0)),this.parent&&this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this)}shutdown(t){this.isShutdown||(this.parent&&this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.isShutdown=!0)}destroy(t){this.shutdown(t)}onSceneDestroy(){this.destroy(!0)}onParentDestroy(t,i){this.destroy(i)}}Object.assign(ComponentBase.prototype,W);var Z={x:0,y:0},IsPlainObject=function(t){if("object"!=typeof t||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}return!0};const K=z.uidKey;class Chess extends ComponentBase{constructor(t,i){super(t,{eventEmitter:!1}),z.add(this,i),this.board=null,this.blocker=!1}shutdown(t){this.isShutdown||(this.board&&this.board.removeChess(this[K]),z.remove(this[K]),this.board=null,super.shutdown(t))}setBoard(t){return this.board=t,this}get tileXYZ(){return null==this.board?null:this.board.chessToTileXYZ(this[K])}setTileZ(t){return null==this.board||this.board.setChessTileZ(this.parent,t),this}setBlocker(t){return void 0===t&&(t=!0),this.blocker=t,this}setBlockEdge(t,i){!1===this.blocker&&(this.blocker={});var n=this.blocker;if(IsPlainObject(t)){var r=t;for(t in r)n[t]=r[t]}else void 0===i&&(i=!0),n[t]=i;return this}getBlockEdge(t){var i=this.blocker;return!1!==i&&(!!i.hasOwnProperty(t)&&i[t])}}var J={getTileDirection:function(t,i){var n=this.board;return null===n?null:(Z.x=t,Z.y=i,n.getNeighborTileDirection(this.tileXYZ,Z))}};Object.assign(Chess.prototype,J);var IsUID=function(t){var i=typeof t;return"number"===i||"string"===i},GetChessData=function(t){return IsUID(t)?z.get(t):(t.hasOwnProperty("rexChess")||(t.rexChess=new Chess(t)),t.rexChess)};const Q=z.uidKey;var GetChessUID=function(t){return IsUID(t)?t:GetChessData(t)[Q]},TileXYToKey=function(t,i,n){return void 0===n&&(n=","),`${t}${n}${i}`},$={},tt={},Between$1=function(t,i,n,r){return Math.atan2(r-i,n-t)},Normalize=function(t){return(t%=2*Math.PI)>=0?t:t+2*Math.PI};const et=2*Math.PI;var it={x:0,y:0},nt=180/Math.PI,RadToDeg$3=function(t){return t*nt},GetGridPoints$2=function(t,i,n){if(t&&"number"!=typeof t){n=i;var r=this.chessToTileXYZ(t);t=r.x,i=r.y}return this.grid.getGridPoints(t,i,n)},Linear$1=function(t,i,n){return(i-t)*n+t},AreTileXYEqual=function(t,i){return t&&i&&t.x===i.x&&t.y===i.y},Contains$5=function(t,i,n){return t.radius>0&&i>=t.left&&i<=t.right&&n>=t.top&&n<=t.bottom&&(t.x-i)*(t.x-i)+(t.y-n)*(t.y-n)<=t.radius*t.radius},Contains$4=function(t,i,n){if(t.width<=0||t.height<=0)return!1;var r=(i-t.x)/t.width,o=(n-t.y)/t.height;return(r*=r)+(o*=o)<.25},Contains$3=function(t,i,n){for(var r=!1,o=-1,a=t.points.length-1;++o<t.points.length;a=o){var h=t.points[o].x,d=t.points[o].y,f=t.points[a].x,p=t.points[a].y;(d<=n&&n<p||p<=n&&n<d)&&i<(f-h)*(n-d)/(p-d)+h&&(r=!r)}return r};function getProperty(t,i,n){var r=n?t[i]:Object.getOwnPropertyDescriptor(t,i);return!n&&r.value&&"object"==typeof r.value&&(r=r.value),!(!r||!function hasGetterOrSetter(t){return!!t.get&&"function"==typeof t.get||!!t.set&&"function"==typeof t.set}(r))&&(void 0===r.enumerable&&(r.enumerable=!0),void 0===r.configurable&&(r.configurable=!0),r)}function hasNonConfigurable(t,i){var n=Object.getOwnPropertyDescriptor(t,i);return!!n&&(n.value&&"object"==typeof n.value&&(n=n.value),!1===n.configurable)}function extend(t,i,n,r){for(var o in i)if(i.hasOwnProperty(o)){var a=getProperty(i,o,n);if(!1!==a){if(hasNonConfigurable((r||t).prototype,o)){if(Class.ignoreFinals)continue;throw new Error("cannot override final property '"+o+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,o,a)}else t.prototype[o]=i[o]}}function mixin(t,i){if(i){Array.isArray(i)||(i=[i]);for(var n=0;n<i.length;n++)extend(t,i[n].prototype||i[n])}}function Class(t){var i,n;if(t||(t={}),t.initialize){if("function"!=typeof t.initialize)throw new Error("initialize must be a function");i=t.initialize,delete t.initialize}else if(t.Extends){var r=t.Extends;i=function(){r.apply(this,arguments)}}else i=function(){};t.Extends?(i.prototype=Object.create(t.Extends.prototype),i.prototype.constructor=i,n=t.Extends,delete t.Extends):i.prototype.constructor=i;var o=null;return t.Mixins&&(o=t.Mixins,delete t.Mixins),mixin(i,o),extend(i,t,!0,n),i}Class.extend=extend,Class.mixin=mixin,Class.ignoreFinals=!1;var Contains$2=function(t,i,n){return!(t.width<=0||t.height<=0)&&(t.x<=i&&t.x+t.width>=i&&t.y<=n&&t.y+t.height>=n)},Perimeter=function(t){return 2*(t.width+t.height)},st=new Class({initialize:function Point2(t,i){void 0===t&&(t=0),void 0===i&&(i=t),this.x=t,this.y=i},setTo:function(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.x=t,this.y=i,this}}),GetPoint$1=function(t,i,n){if(void 0===n&&(n=new st),i<=0||i>=1)return n.x=t.x,n.y=t.y,n;var r=Perimeter(t)*i;return i>.5?(r-=t.width+t.height)<=t.width?(n.x=t.right-r,n.y=t.bottom):(n.x=t.x,n.y=t.bottom-(r-t.width)):r<=t.width?(n.x=t.x+r,n.y=t.y):(n.x=t.right,n.y=t.y+(r-t.width)),n},GetPoints=function(t,i,n,r){void 0===r&&(r=[]),i||(i=function(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))}(t)/n);for(var o=t.x1,a=t.y1,h=t.x2,d=t.y2,f=0;f<i;f++){var p=f/i,T=o+(h-o)*p,b=a+(d-a)*p;r.push(new st(T,b))}return r},rt=new Class({initialize:function Vector22(t,i){this.x=0,this.y=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0):(void 0===i&&(i=t),this.x=t||0,this.y=i||0)},clone:function(){return new rt(this.x,this.y)},copy:function(t){return this.x=t.x||0,this.y=t.y||0,this},setFromObject:function(t){return this.x=t.x||0,this.y=t.y||0,this},set:function(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setTo:function(t,i){return this.set(t,i)},setToPolar:function(t,i){return null==i&&(i=1),this.x=Math.cos(t)*i,this.y=Math.sin(t)*i,this},equals:function(t){return this.x===t.x&&this.y===t.y},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(t){var i=t.x-this.x,n=t.y-this.y;return Math.sqrt(i*i+n*n)},distanceSq:function(t){var i=t.x-this.x,n=t.y-this.y;return i*i+n*n},length:function(){var t=this.x,i=this.y;return Math.sqrt(t*t+i*i)},lengthSq:function(){var t=this.x,i=this.y;return t*t+i*i},normalize:function(){var t=this.x,i=this.y,n=t*t+i*i;return n>0&&(n=1/Math.sqrt(n),this.x=t*n,this.y=i*n),this},normalizeRightHand:function(){var t=this.x;return this.x=-1*this.y,this.y=t,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lerp:function(t,i){void 0===i&&(i=0);var n=this.x,r=this.y;return this.x=n+i*(t.x-n),this.y=r+i*(t.y-r),this},transformMat3:function(t){var i=this.x,n=this.y,r=t.val;return this.x=r[0]*i+r[3]*n+r[6],this.y=r[1]*i+r[4]*n+r[7],this},transformMat4:function(t){var i=this.x,n=this.y,r=t.val;return this.x=r[0]*i+r[4]*n+r[12],this.y=r[1]*i+r[5]*n+r[13],this},reset:function(){return this.x=0,this.y=0,this}});rt.ZERO=new rt,rt.RIGHT=new rt(1,0),rt.LEFT=new rt(-1,0),rt.UP=new rt(0,-1),rt.DOWN=new rt(0,1),rt.ONE=new rt(1,1);var ot,at,ht,lt=new Class({initialize:function Line2(t,i,n,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x1=t,this.y1=i,this.x2=n,this.y2=r},getPoint:function(t,i){return function(t,i,n){return void 0===n&&(n=new st),n.x=t.x1+(t.x2-t.x1)*i,n.y=t.y1+(t.y2-t.y1)*i,n}(this,t,i)},getPoints:function(t,i,n){return GetPoints(this,t,i,n)},getRandomPoint:function(t){return function(t,i){void 0===i&&(i=new st);var n=Math.random();return i.x=t.x1+n*(t.x2-t.x1),i.y=t.y1+n*(t.y2-t.y1),i}(this,t)},setTo:function(t,i,n,r){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x1=t,this.y1=i,this.x2=n,this.y2=r,this},getPointA:function(t){return void 0===t&&(t=new rt),t.set(this.x1,this.y1),t},getPointB:function(t){return void 0===t&&(t=new rt),t.set(this.x2,this.y2),t},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(t){this.y1>this.y2?this.y1=t:this.y2=t}}}),ut=new Class({initialize:function Rectangle2(t,i,n,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=t,this.y=i,this.width=n,this.height=r},contains:function(t,i){return Contains$2(this,t,i)},getPoint:function(t,i){return GetPoint$1(this,t,i)},getPoints:function(t,i,n){return function(t,i,n,r){void 0===r&&(r=[]),i||(i=Perimeter(t)/n);for(var o=0;o<i;o++){var a=o/i;r.push(GetPoint$1(t,a))}return r}(this,t,i,n)},getRandomPoint:function(t){return i=this,void 0===(n=t)&&(n=new st),n.x=i.x+Math.random()*i.width,n.y=i.y+Math.random()*i.height,n;var i,n},setTo:function(t,i,n,r){return this.x=t,this.y=i,this.width=n,this.height=r,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setSize:function(t,i){return void 0===i&&(i=t),this.width=t,this.height=i,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(t){return void 0===t&&(t=new lt),t.setTo(this.x,this.y,this.right,this.y),t},getLineB:function(t){return void 0===t&&(t=new lt),t.setTo(this.right,this.y,this.right,this.bottom),t},getLineC:function(t){return void 0===t&&(t=new lt),t.setTo(this.right,this.bottom,this.x,this.bottom),t},getLineD:function(t){return void 0===t&&(t=new lt),t.setTo(this.x,this.bottom,this.x,this.y),t},left:{get:function(){return this.x},set:function(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}},right:{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x}},top:{get:function(){return this.y},set:function(t){t>=this.bottom?this.height=0:this.height=this.bottom-t,this.y=t}},bottom:{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}}),Contains$1=function(t,i,n){var r=t.x3-t.x1,o=t.y3-t.y1,a=t.x2-t.x1,h=t.y2-t.y1,d=i-t.x1,f=n-t.y1,p=r*r+o*o,T=r*a+o*h,b=r*d+o*f,S=a*a+h*h,A=a*d+h*f,P=p*S-T*T,O=0===P?0:1/P,L=(S*b-T*A)*O,D=(p*A-T*b)*O;return L>=0&&D>=0&&L+D<1},Clamp$1=function(t,i,n){return Math.max(i,Math.min(n,t))},AddChess$1=function(t,i,n,r,o){if(!this.contains(i,n))return this;void 0===o&&(o=!0);var a=this.chessToTileXYZ(t);if(void 0===r&&(r=a?a.z:0),a&&a.x===i&&a.y===n&&a.z===r)return this;var h=this.tileXYZToChess(i,n,r);return h&&this.emit("kickout",t,h,a),this.removeChess(t),h&&this.removeChess(h,i,n,r),this.boardData.addUID(this.getChessUID(t),i,n,r),this.isBoard&&this.getChessData(t).setBoard(this),o&&this.gridAlign(t,i,n),this},ct={x:0,y:0},Wrap=function(t,i,n){var r=n-i;return i+((t-i)%r+r)%r},dt={},ft={},pt={},gt={},Between=function(t,i){return Math.floor(Math.random()*(i-t+1)+t)},GetRandom=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=t.length);var r=i+Math.floor(Math.random()*n);return void 0===t[r]?null:t[r]},vt=[],mt={},yt=[],xt=[],Tt=[],wt=[],isEdgeBlocker=function(t,i){return!1===t||!0===t?t:!0===t[i]},bt=[],GetBoard=function(t){return t?t.rexChess?t.rexChess.board:t.mainBoard?t.mainBoard:void 0:void 0},St={getChessData:GetChessData,getChessUID:GetChessUID,setBoardWidth:function(t){if(this.infinityMode)return this;if(void 0===this.width||this.width<=t)return this.width=t,this;var i,n,r;for(i=t;i<this.width;i++)for(n=0;n<this.height;n++)for(r in this.boardData.getUID(i,n))this.RemoveChess(!1,i,n,r);return this.width=t,this},setBoardHeight:function(t){if(this.infinityMode)return this;if(void 0===this.height||this.height<=t)return this.height=t,this;var i,n,r;for(n=t;n<this.height;n++)for(i=0;i<this.width;i++)for(r in this.boardData.getUID(i,n))this.RemoveChess(!1,i,n,r);return this.height=t,this},tileXYZToKey:function(t,i,n,r){return void 0===r&&(r=","),`${t}${r}${i}${r}${n}`},tileXYToKey:TileXYToKey,keyToTileXYZ:function(t,i,n){void 0===i?i={}:!0===i&&(i=$),void 0===n&&(n=",");var r=t.split(n);return i.x=r[0],i.y=r[1],i.z=r[2],i},tileXYToWorldX:function(t,i){return this.tileXYToWorldXY(t,i,!0).x},tileXYToWorldY:function(t,i){return this.tileXYToWorldXY(t,i,!0).y},tileXYToWorldXY:function(t,i,n){return this.grid.getWorldXY(t,i,n)},tileXYArrayToWorldXYArray:function(t,i){var n;void 0===i&&(i=[]);for(var r=0,o=t.length;r<o;r++)n=t[r],i.push(this.tileXYToWorldXY(n.x,n.y));return i},worldXYToTileX:function(t,i){return this.worldXYToTileXY(t,i,!0).x},worldXYToTileY:function(t,i){return this.worldXYToTileXY(t,i,!0).y},worldXYToTileXY:function(t,i,n){return this.grid.getTileXY(t,i,n)},worldXYToChessArray:function(t,i,n){var r=this.worldXYToTileXY(t,i,!0);return this.tileXYToChessArray(r.x,r.y,n)},worldXYToChess:function(t,i,n){var r=this.worldXYToTileXY(t,i,!0);if(void 0!==n)return this.tileXYZToChess(r.x,r.y,n);var o=this.boardData.getUID(r.x,r.y);if(null==o)return null;for(var n in o)return this.uidToChess(o[n])},worldXYSnapToGrid:function(t,i,n){return void 0===n?n={}:!0===n&&(n=tt),this.worldXYToTileXY(t,i,n),this.tileXYToWorldXY(n.x,n.y,n),n},angleBetween:function(t,i){t=this.chessToTileXYZ(t),i=this.chessToTileXYZ(i);var n=this.tileXYToWorldXY(t.x,t.y,!0),r=n.x,o=n.y,a=(n=this.tileXYToWorldXY(i.x,i.y,!0)).x,h=n.y;return Between$1(r,o,a,h)},isAngleInCone:function(t,i,n,r){var o=this.chessToTileXYZ(t),a=this.chessToTileXYZ(i),h=this.angleBetween(o,a);h=Normalize(h);var d=Math.abs(h-n);d=Math.min(d,et-d);var f,p,T,b=r/2;return f=d,p=b,void 0===T&&(T=1e-4),Math.abs(f-p)<T||d<b},angleToward:function(t,i){void 0===t&&(t=it);var n=this.wrapMode,r=this.infinityMode;this.wrapMode=!1,this.infinityMode=!0;var o=this.getNeighborTileXY(t,i,!0);return this.wrapMode=n,this.infinityMode=r,this.angleBetween(t,o)},angleSnapToDirection:function(t,i){i=RadToDeg$3(i);for(var n,r,o,a=this.grid.allDirections,h=1/0,d=void 0,f=0,p=a.length;f<p;f++)n=RadToDeg$3(this.angleToward(t,a[f])),(r=Math.abs((o=void 0,0===(o=n-i)?0:o-360*Math.floor((o- -180)/360))))<h&&(h=r,d=f);return d},isOverlappingPoint:function(t,i,n){if(this.infinityMode&&void 0===n)return!0;var r=this.worldXYToTileXY(t,i,!0);return this.contains(r.x,r.y,n)},gridAlign:function(t,i,n){if(void 0===t)for(var r=this.getAllChess(),o=0,a=r.length;o<a;o++)this.gridAlign(r[o]);else{if(IsUID(t)&&(t=this.uidToChess(t)),void 0===i){var h=this.chessToTileXYZ(t);i=h.x,n=h.y}this.tileXYToWorldXY(i,n,t)}return this},getGridPoints:GetGridPoints$2,lineToTileXYArray:function(t,i,n,r,o){if("number"!=typeof t){var a=t;o=i,t=a.x1,i=a.y1,n=a.x2,r=a.y2}void 0===o&&(o=[]);for(var h,d,f,p,T,b,S,A=(h=t-n,d=i-r,Math.sqrt(h*h+d*d)),P=Math.min(this.grid.cellWidth,this.grid.cellHeight),O=Math.ceil(A/(P/4)),L=0;L<=O;L++)p=Linear$1(t,n,f=L/O),T=Linear$1(i,r,f),S=this.worldXYToTileXY(p,T),this.contains(S.x,S.y)&&(b&&AreTileXYEqual(b,S)||(o.push(S),b=S));return o},circleToTileXYArray:function(t,i){return this.shapeToTileXYArray(t,Contains$5,i)},ellipseToTileXYArray:function(t,i){return this.shapeToTileXYArray(t,Contains$4,i)},polygonToTileXYArray:function(t,i){return ot=function(t,i){void 0===i&&(i=new ut);for(var n,r=1/0,o=1/0,a=-r,h=-o,d=0;d<t.points.length;d++)n=t.points[d],r=Math.min(r,n.x),o=Math.min(o,n.y),a=Math.max(a,n.x),h=Math.max(h,n.y);return i.x=r,i.y=o,i.width=a-r,i.height=h-o,i}(t,ot),this.shapeToTileXYArray(t,Contains$3,ot,i)},rectangleToTileXYArray:function(t,i){return this.shapeToTileXYArray(t,Contains$2,i)},triangleToTileXYArray:function(t,i){return this.shapeToTileXYArray(t,Contains$1,i)},shapeToTileXYArray:function(t,i,n){void 0===n&&(n=[]),at=this.worldXYToTileXY(t.left,t.top,at),ht=this.worldXYToTileXY(t.right,t.bottom,ht);var r,o=at.x-1,a=at.y-1,h=ht.x+1,d=ht.y+1;this.infinityMode||(o=Clamp$1(o,0,this.width-1),a=Clamp$1(a,0,this.height-1),h=Clamp$1(h,0,this.width-1),d=Clamp$1(d,0,this.height-1));for(var f=o;f<=h;f++)for(var p=a;p<=d;p++)i(t,(r=this.tileXYToWorldXY(f,p,!0)).x,r.y)&&n.push({x:f,y:p});return n},uidToChess:function(t){return null==t?null:this.boardData.exists(t)?z.get(t).parent:null},addChess:AddChess$1,removeChess:function(t,i,n,r,o,a){if(void 0===o&&(o=!1),void 0===a&&(a=!1),t){var h=this.chessToTileXYZ(t);if(!h)return this;i=h.x,n=h.y,r=h.z}else if(!(t=this.tileXYZToChess(i,n,r)))return this;return a||this.boardData.removeUID(i,n,r),this.isBoard&&this.getChessData(t).setBoard(null),o&&t.destroy&&t.destroy(),this},removeAllChess:function(t,i){for(var n=this.getAllChess(),r=0,o=n.length;r<o;r++)this.removeChess(n[r],void 0,void 0,void 0,t,i);return this},swapChess:function(t,i,n){void 0===n&&(n=!0);var r=this.chessToTileXYZ(t),o=this.chessToTileXYZ(i);return null==r||null==o||(this.removeChess(t),this.removeChess(i),this.addChess(t,o.x,o.y,o.z,n),this.addChess(i,r.x,r.y,r.z,n)),this},moveChess:AddChess$1,setChessTileZ:function(t,i,n){void 0===n&&(n=!1);var r=this.chessToTileXYZ(t);return r&&this.moveChess(t,r.x,r.y,i,n),this},getAllChess:function(t){void 0===t&&(t=[]);var i=this.boardData.UIDToXYZ;for(var n in i)t.push(this.uidToChess(n));return t},contains:function(t,i,n){var r;return(r=!!this.infinityMode||t>=0&&t<this.width&&i>=0&&i<this.height)&&void 0!==n&&(r=this.boardData.contains(t,i,n)),r},forEachTileXY:function(t,i,n){switch(void 0===n&&(n=0),n){case 0:for(var r=0;r<this.height;r++)for(var o=0;o<this.width&&(ct.x=o,ct.y=r,!(i?t.call(i,ct,this):t(ct,this)));o++);break;case 1:for(r=0;r<this.height;r++)for(o=this.width-1;o>=0&&(ct.x=o,ct.y=r,!(i?t.call(i,ct,this):t(ct,this)));o--);break;case 2:for(o=0;o<this.width;o++)for(r=0;r<this.height&&(ct.x=o,ct.y=r,!(i?t.call(i,ct,this):t(ct,this)));r++);break;case 3:for(o=0;o<this.width;o++)for(r=this.height-1;r>=0&&(ct.x=o,ct.y=r,!(i?t.call(i,ct,this):t(ct,this)));r--);}return this},getWrapTileXY:function(t,i,n){return void 0===n?n={}:!0===n&&(n=dt),this.wrapMode?t=Wrap(t,0,this.width):!this.infinityMode&&(t<0||t>=this.width)&&(t=null),this.wrapMode?i=Wrap(i,0,this.height):!this.infinityMode&&(i<0||i>=this.height)&&(i=null),n.x=t,n.y=i,n},tileXYZToChess:function(t,i,n){var r=this.boardData.getUID(t,i,n);return this.uidToChess(r)},tileXYToChessArray:function(t,i,n){void 0===n&&(n=[]);var r=this.boardData.getUID(t,i);if(null==r)return n;for(var o in r)n.push(this.uidToChess(r[o]));return n},tileZToChessArray:function(t,i){void 0===i&&(i=[]);var n=this.boardData.UIDToXYZ;for(var r in n)n[r].z===t&&i.push(this.uidToChess(r));return i},tileXYArrayToChessArray:function(t,i,n){Array.isArray(i)&&(n=i,i=void 0),void 0===n&&(n=[]);for(var r,o=null!=i,a=0,h=t.length;a<h;a++)r=t[a],o?n.push(this.tileXYZToChess(r.x,r.y,i)):this.tileXYToChessArray(r.x,r.y,n);return n},chessToTileXYZ:function(t){if(!t)return null;if(IsUID(t)||function(t){return!IsUID(t)&&t&&!!t.rexChess}(t)){var i=GetChessUID(t);return this.boardData.getXYZ(i)}return(n=t)&&(IsPlainObject(n)||n.isTileXYZ)?t:null;var n},offset:function(t,i,n,r){return void 0===r?r={}:!0===r&&(r=ft),0===i&&0===n?(r.x=t.x,r.y=t.y):this.grid.offset(t,i,n,r),r},mirror:function(t,i,n,r){return void 0===r?r={}:!0===r&&(r=pt),void 0!==n?this.offset(t,-n.x,-n.y,r):(r.x=t.x,r.y=t.y),this.grid.mirror(r,i,r),void 0!==n&&this.offset(r,n.x,n.y,r),r},rotate:function(t,i,n,r){return void 0===r?r={}:!0===r&&(r=gt),void 0!==n?this.offset(t,-n.x,-n.y,r):(r.x=t.x,r.y=t.y),this.grid.rotate(r,i,r),void 0!==n&&this.offset(r,n.x,n.y,r),r},getOppositeDirection:function(t,i,n){if(t&&"number"!=typeof t){n=i;var r=t,o=this.chessToTileXYZ(r);t=o.x,i=o.y}return this.grid.getOppositeDirection(t,i,n)},getDistance:function(t,i,n){return t=this.chessToTileXYZ(t),i=this.chessToTileXYZ(i),this.grid.getDistance(t,i,n)},directionBetween:function(t,i,n){void 0===n&&(n=!0);var r=this.chessToTileXYZ(t),o=this.chessToTileXYZ(i);return this.grid.directionBetween(r,o,n)},isDirectionInCone:function(t,i,n,r){var o=this.chessToTileXYZ(t),a=this.chessToTileXYZ(i),h=this.grid.directions;this.grid.setDirectionMode(this.sides);var d=this.grid.directionBetween(o,a,!1);this.grid.setDirectionMode(h);var f=Math.abs(d-n);return(f=Math.min(f,this.grid.directions-f))<=r/2},fit:function(t){var i,n=1/0,r=1/0;for(var o in t)i=t[o],n=Math.min(n,i.x),r=Math.min(r,i.y);if(0!==n||0!==r)for(var o in t)i=t[o],this.offset(i,-n,-r,i);var a=-1/0,h=-1/0;for(var o in t)i=t[o],a=Math.max(a,i.x),h=Math.max(h,i.y);return this.setBoardWidth(a+1),this.setBoardHeight(h+1),t},getEmptyTileXYArray:function(t,i){void 0===i&&(i=[]),void 0===t&&(t=0);for(var n=0;n<this.height;n++)for(var r=0;r<this.width;r++)null===this.tileXYZToChess(r,n,t)&&i.push({x:r,y:n});return i},getRandomEmptyTileXY:function(t,i){var n,r;void 0===t&&(t=0),void 0===i?i={}:!0===i&&(i=mt);for(var o=!0,a=20;o&&a>0;)n=Between(0,this.width-1),r=Between(0,this.height-1),o=null!==this.tileXYZToChess(n,r,t),a--;if(o){if(0===(vt=this.getEmptyTileXYArray(t,vt)).length)return null;var h=GetRandom(vt);return i.x=h.x,i.y=h.y,vt.length=0,i}return i.x=n,i.y=r,i},getTileXYAtDirection:function(t,i,n,r){var o=this.chessToTileXYZ(t);if(!o)return null;"string"==typeof i&&(i=-1===i.indexOf(",")?parseInt(i):i.split(","));var a,h="number"==typeof i,d="number"==typeof n;if(h&&d)r=this.grid.getTileXYAtDirection(o.x,o.y,i,n,r),this.getWrapTileXY(r.x,r.y,r),null!=r.x&&null!=r.y||(r=null);else if(void 0===r&&(r=[]),null==i&&(i=this.grid.allDirections),h)if(IsPlainObject(n)){var f=GetValue$l(n,"end",1),p=GetValue$l(n,"start",f>0?1:-1),T=GetValue$l(n,"step",f>=p?1:-1);if(p===f)null!==(a=this.getTileXYAtDirection(o,i,f))&&r.push(a);else if(p<f)for(var b=p;b<=f;b+=T)null!==(a=this.getTileXYAtDirection(o,i,b))&&r.push(a);else for(b=p;b>=f;b+=T)null!==(a=this.getTileXYAtDirection(o,i,b))&&r.push(a)}else{b=0;for(var S=n.length;b<S;b++)null!==(a=this.getTileXYAtDirection(o,i,n[b]))&&r.push(a)}else for(b=0,S=i.length;b<S;b++)d?null!==(a=this.getTileXYAtDirection(o,i[b],n))&&r.push(a):this.getTileXYAtDirection(o,i[b],n,r);return r},getNeighborTileXY:function(t,i,n){return this.getTileXYAtDirection(t,i,1,n)},getNeighborTileXYAtAngle:function(t,i,n){var r=this.angleSnapToDirection(t,i);return this.getTileXYAtDirection(t,r,1,n)},getNeighborChess:function(t,i,n,r){if(null===(t=this.chessToTileXYZ(t)))return null;null==n&&(n=t.z);var o,a=typeof i;if("number"===a||"string"===a&&-1===i.indexOf(",")){var h=i,d=this.getNeighborTileXY(t,h,!0);return null===d?null:this.tileXYZToChess(d.x,d.y,n)}void 0===r&&(r=[]),this.getNeighborTileXY(t,i,yt);for(var f=0,p=yt.length;f<p;f++)null!=(o=this.tileXYZToChess(yt[f].x,yt[f].y,n))&&r.push(o);return yt.length=0,r},getNeighborTileDirection:function(t,i){if(null===t||null===i)return null;if(t=this.chessToTileXYZ(t),i=this.chessToTileXYZ(i),AreTileXYEqual(t,i))return null;var n=this.grid.getNeighborTileDirection(t,i);if(this.wrapMode&&null===n){for(var r=0,o=(xt=this.getNeighborTileXY(t,null,xt)).length;r<o;r++)if(AreTileXYEqual(i,xt[r])){n=r;break}xt.length=0}return n},getNeighborChessDirection:function(t,i){var n=this.chessToTileXYZ(t),r=this.chessToTileXYZ(i);return this.getNeighborTileDirection(n,r)},areNeighbors:function(t,i){return null!==this.getNeighborChessDirection(t,i)},ringToTileXYArray:function(t,i,n){var r;void 0===n&&(n=[]),t=this.chessToTileXYZ(t),this.grid.ringToTileXYArray(t,i,Tt);for(var o=0,a=Tt.length;o<a;o++)r=Tt[o],this.contains(r.x,r.y)&&n.push(r);return Tt.length=0,n},filledRingToTileXYArray:function(t,i,n,r){var o;IsArray(n)&&(r=n,n=void 0),void 0===n&&(n=!0),void 0===r&&(r=[]),t=this.chessToTileXYZ(t);for(var a=0;a<=i;a++)o=n?a:i-a,this.ringToTileXYArray(t,o,r);return r},hasBlocker:function(t,i,n){if(t&&"number"!=typeof t){var r=this.chessToTileXYZ(t);t=r.x,i=r.y,n=r.z}var o;if(void 0===n){for(var a=0,h=(o=this.tileXYToChessArray(t,i,wt)).length;a<h;a++)if(!0===this.getChessData(o[a]).blocker)return wt.length=0,!0;return wt.length=0,!1}return null!==(o=this.tileXYZToChess(t,i,n))&&!0===this.getChessData(o).blocker},hasEdgeBlocker:function(t,i,n,r){var o;if(void 0===n){for(var a=0,h=(o=this.tileXYToChessArray(t,i,bt)).length;a<h;a++)if(isEdgeBlocker(this.getChessData(o[a]).blocker))return bt.length=0,!0;return bt.length=0,!1}return null!==(o=this.tileXYZToChess(t,i,n))&&isEdgeBlocker(this.getChessData(o).blocker)},getGridPoints:GetGridPoints$2,chessToBoard:GetBoard},Clear=function(t){if("object"!=typeof t||null===t)return t;if(Array.isArray(t))t.length=0;else for(var i in t)delete t[i];return t},IsEmpty=function(t){for(var i in t)return!1;return!0};class BoardData{constructor(){this.XYZToUID={},this.UIDToXYZ={},this.clear()}shutdown(t){return this.XYZToUID=void 0,this.UIDToXYZ=void 0,this}destroy(t){return this.shutdown(t),this}clear(){return Clear(this.UIDToXYZ),Clear(this.XYZToUID),this.chessCount=0,this.clearBounds(),this}clearBounds(){return this._xMax=void 0,this._xMin=void 0,this._yMax=void 0,this._yMin=void 0,this}addUID(t,i,n,r){this.XYZToUID.hasOwnProperty(i)||(this.XYZToUID[i]={});var o=this.XYZToUID[i];return o.hasOwnProperty(n)||(o[n]={}),o[n][r]=t,this.UIDToXYZ[t]={x:i,y:n,z:r},this.chessCount++,this.clearBounds(),this}getUID(t,i,n){var r=this.XYZToUID[t];return r&&(r=r[i])&&void 0!==n&&(r=r[n]),r}removeUID(t,i,n){if(!this.XYZToUID.hasOwnProperty(t))return this;var r=this.XYZToUID[t];if(!r.hasOwnProperty(i))return this;var o=r[i];if(!o.hasOwnProperty(n))return this;var a=o[n];return delete o[n],delete this.UIDToXYZ[a],IsEmpty(o)&&delete r[i],IsEmpty(r)&&delete this.XYZToUID[t],this.chessCount--,this.clearBounds(),this}exists(t){return this.UIDToXYZ.hasOwnProperty(t)}contains(t,i,n){return null!=this.getUID(t,i,n)}getXYZ(t){return this.exists(t)?this.UIDToXYZ[t]:null}get xMax(){if(void 0===this._xMax){this._xMax=-1/0;var t,i=this.UIDToXYZ;for(var n in i)t=i[n].x,this._xMax<t&&(this._xMax=t)}return this._xMax}get xMin(){if(void 0===this._xMin){this._xMin=1/0;var t,i=this.UIDToXYZ;for(var n in i)t=i[n].x,this._xMin>t&&(this._xMin=t)}return this._xMin}get yMax(){if(void 0===this._yMax){this._yMax=-1/0;var t,i=this.UIDToXYZ;for(var n in i)t=i[n].y,this._yMax<t&&(this._yMax=t)}return this._yMax}get yMin(){if(void 0===this._yMin){this._yMin=1/0;var t,i=this.UIDToXYZ;for(var n in i)t=i[n].y,this._yMin>t&&(this._yMin=t)}return this._yMin}}var Mt={},Et={};class Quad{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.setType(GetValue$l(t,"type",0)),this.setDirectionMode(GetValue$l(t,"dir",4)),this.setOriginPosition(GetValue$l(t,"x",0),GetValue$l(t,"y",0)),this.setCellSize(GetValue$l(t,"cellWidth",0),GetValue$l(t,"cellHeight",0))}setType(t){return"string"==typeof t&&(t=At[t]),this.mode=t,this}setDirectionMode(t){return"string"==typeof t&&(t=_t[t]),this.directions=t,this}setOriginPosition(t,i){return this.x=t,this.y=i,this}get width(){return this._width}set width(t){this._width=t,this._halfWidth=t/2}get height(){return this._height}set height(t){this._height=t,this._halfHeight=t/2}setCellSize(t,i){return this.width=t,this.height=i,this}get cellWidth(){return this.width}set cellWidth(t){this.width=t}get cellHeight(){return this.height}set cellHeight(t){this.height=t}}var Ct={getWorldXY:function(t,i,n){var r,o;switch(void 0===n?n={}:!0===n&&(n=Mt),this.mode){case 0:r=t*this.width,o=i*this.height;break;case 1:r=(t-i)*this._halfWidth,o=(t+i)*this._halfHeight}return r+=this.x,o+=this.y,n.x=r,n.y=o,n},getWorldX:function(t,i){return this.getWorldXY(t,i,!0).x},getWorldY:function(t,i){return this.getWorldXY(t,i,!0).y},getTileXY:function(t,i,n){void 0===n?n={}:!0===n&&(n=Et),t-=this.x,i-=this.y;var r=t/this.width,o=i/this.height;switch(this.mode){case 0:n.x=Math.round(r),n.y=Math.round(o);break;case 1:n.x=Math.round(+r+o),n.y=Math.round(-r+o)}return n},getTileX:function(t,i){return this.getTileXY(t,i,!0).x},getTileY:function(t,i){return this.getTileXY(t,i,!0).y}};Object.assign(Quad.prototype,Ct);const At={orthogonal:0,isometric:1,staggered:2},_t={"4dir":4,"8dir":8};var SaveOrigin=function(){return this._savedOriginX=this.x,this._savedOriginY=this.y,this},RestoreOrigin=function(){return this.x=this._savedOriginX,this.y=this._savedOriginY,this};const Rt=[[1,0],[0,1],[-1,0],[0,-1],[1,1],[-1,1],[-1,-1],[1,-1]],Pt=Rt;var GetTileXAtDirection$1=function(t,i,n,r,o){var a,h;switch(void 0===o?o={}:!0===o&&(o=Ot),this.mode){case 0:a=Rt[n][0],h=Rt[n][1];break;case 1:a=Pt[n][0],h=Pt[n][1]}return 1===r?(o.x=t+a,o.y=i+h):(o.x=t+r*a,o.y=i+r*h),o},Ot={};const kt=function(t){var i,n,r,o={};for(var a in t)n=(i=t[a])[0],r=i[1],o.hasOwnProperty(n)||(o[n]={}),o[n][r]=parseInt(a);return o}(Rt),Lt=kt;const Dt={0:2,1:3,2:0,3:1,4:6,5:7,6:4,7:5};var Offset$2=function(t,i,n,r){void 0===r?r={}:!0===r&&(r=It);var o=t.x+i,a=t.y+n;return r.x=o,r.y=a,r},It={},Ft={},Bt={},DirectionNormalize=function(t){return Wrap(t,0,this.directions)},InitPoints=function(t){for(var i=[],n=0;n<t;n++)i.push({x:0,y:0});return i},Nt={},Yt=InitPoints(4);class QuadGrid extends Quad{constructor(t){super(t),this.sides=4}get allDirections(){return 4===this.directions?Xt:Gt}get halfDirections(){return 4===this.directions?Ut:Vt}}const Xt=[0,1,2,3],Gt=[0,1,2,3,4,5,6,7],Ut=[0,1],Vt=[0,1,4,5];var zt={saveOrigin:SaveOrigin,restoreOrigin:RestoreOrigin,getTileXYAtDirection:GetTileXAtDirection$1,getNeighborTileXY:function(t,i,n,r){return GetTileXAtDirection$1.call(this,t,i,n,1,r)},getNeighborTileDirection:function(t,i){var n;switch(this.mode){case 0:n=kt;break;case 1:n=Lt}var r=i.x-t.x,o=i.y-t.y;if(n.hasOwnProperty(r)){var a=n[r];if(a.hasOwnProperty(o))return a[o]}return null},getOppositeDirection:function(t,i,n){return Dt[n]},offset:Offset$2,mirror:function(t,i,n){return void 0===n?n={}:!0===n&&(n=Ft),n.x=1&i?-t.x:t.x,n.y=2&i?-t.y:t.y,n},rotate:function(t,i,n){var r,o;switch(void 0===n?n={}:!0===n&&(n=Bt),i=Wrap(i,0,3)){case 1:r=-t.y,o=t.x;break;case 2:r=-t.x,o=-t.y;break;case 3:r=t.y,o=-t.x;break;default:r=t.x,o=t.y}return n.x=r,n.y=o,n},getDistance:function(t,i,n){var r=i.x-t.x,o=i.y-t.y;return n?Math.abs(r)+Math.abs(o):Math.sqrt(r*r+o*o)},directionBetween:function(t,i,n){var r;switch(void 0===n&&(n=!0),this.mode){case 0:case 1:if(t.y===i.y)r=i.x>=t.x?0:2;else if(t.x===i.x)r=i.y>=t.y?1:3;else if(4===this.directions){(h=RadToDeg$3(Between$1(t.x,t.y,i.x,i.y)))<0&&(h+=360),r=h/90,n&&(r=Math.round(r))}else{var o=i.x-t.x,a=i.y-t.y;if(o===a)r=o>0?4:6;else if(o===-a)r=o>0?7:5;else{var h;(h=RadToDeg$3(Math.atan2(a,o)))<0&&(h+=360);var d=h/45;n&&(d=Math.round(d)),r=d>=0&&d<1?d:d>=1&&d<2?d+3:d>=2&&d<3?d-1:d>=3&&d<4?d+2:d>=4&&d<5?d-2:d>=5&&d<6?d+1:d>=6&&d<7?d-3:d}}}return r===this.directions&&(r=0),r},directionNormalize:DirectionNormalize,getGridPoints:function(t,i,n){void 0===n?n=InitPoints(4):!0===n&&(n=Yt),void 0===t?(Nt.x=0,Nt.y=0):this.getWorldXY(t,i,Nt);var r=0===this.mode?0:1;return function(t,i,n,r,o,a){void 0===a&&(a=InitPoints(4));var h=n/2,d=r/2;0===o?(a[0].x=t+h,a[0].y=i-d,a[1].x=t+h,a[1].y=i+d,a[2].x=t-h,a[2].y=i+d,a[3].x=t-h,a[3].y=i-d):(a[0].x=t+h,a[0].y=i,a[1].x=t,a[1].y=i+d,a[2].x=t-h,a[2].y=i,a[3].x=t,a[3].y=i-d)}(Nt.x,Nt.y,this.width,this.height,r,n),n},ringToTileXYArray:function(t,i,n){var r,o;for(void 0===n&&(n=[]),r=i,o=-i;o<=i;o++)n.push(Offset$2(t,r,o));for(o=i,r=i-1;r>=-i;r--)n.push(Offset$2(t,r,o));for(r=-i,o=i-1;o>=-i;o--)n.push(Offset$2(t,r,o));for(o=-i,r=1-i;r<=i-1;r++)n.push(Offset$2(t,r,o));return n}};Object.assign(QuadGrid.prototype,zt);const Wt=Math.sqrt(3);const Ht=Math.sqrt(3);var jt=0,qt=1,Zt=2,Kt=3;const Jt=jt,Qt=qt,$t=Zt,te=Kt;var ee={};const ie=jt,ne=qt,se=Zt,re=Kt;var cr2cube=function(t,i,n,r){switch(void 0===r?r={}:!0===r&&(r=oe),t){case ie:r.x=i-(n-(1&n))/2,r.z=n;break;case ne:r.x=i-(n+(1&n))/2,r.z=n;break;case se:r.x=i,r.z=n-(i-(1&i))/2;break;case re:r.x=i,r.z=n-(i+(1&i))/2}return r.y=-r.x-r.z,r},cube2cr=function(t,i,n,r,o){switch(void 0===o?o={}:!0===o&&(o=ae),t){case ie:o.x=i+(r-(1&r))/2,o.y=r;break;case ne:o.x=i+(r+(1&r))/2,o.y=r;break;case se:o.x=i,o.y=r+(i-(1&i))/2;break;case re:o.x=i,o.y=r+(i+(1&i))/2}return o},oe={},ae={};const he=jt,le=qt,ue=Zt,ce=Kt;var de={},fe={};const pe=jt,ge=qt,ve=Zt,me=Kt;class Hexagon{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.setType(GetValue$l(t,"staggeraxis",1),GetValue$l(t,"staggerindex",1)),this.setDirectionMode(),this.setOriginPosition(GetValue$l(t,"x",0),GetValue$l(t,"y",0));var i=GetValue$l(t,"size",void 0);void 0!==i?this.setCellRadius(i):this.setCellSize(GetValue$l(t,"cellWidth",0),GetValue$l(t,"cellHeight",0))}setType(t,i){return"string"==typeof t&&(t=xe[t]),"string"==typeof i&&(i=Te[i]),this.staggeraxis=t,this.staggerindex=i,this.mode=0===t?0===i?me:ve:0===i?ge:pe,this}setDirectionMode(){return this.directions=6,this}setOriginPosition(t,i){return this.x=t,this.y=i,this}get width(){return this._width}set width(t){this._width=t,this._halfWidth=t/2}get height(){return this._height}set height(t){this._height=t,this._halfHeight=t/2}setCellSize(t,i){return this.width=t,this.height=i,this}setCellRadius(t){this.size=t;var i={size:this.size,type:this.staggeraxis},n=function(t){return 0===t.type?2*t.size:Wt*t.size}(i),r=function(t){return 0===t.type?Ht*t.size:2*t.size}(i);return this.setCellSize(n,r),this}get cellWidth(){return this.width}set cellWidth(t){this.width=t}get cellHeight(){return this.height}set cellHeight(t){this.height=t}}var ye={getWorldXY:function(t,i,n){void 0===n?n={}:!0===n&&(n=ee);var r=t*this.width,o=i*this.height;switch(this.mode){case Jt:1&i&&(r+=this._halfWidth),o*=.75;break;case Qt:1&i&&(r-=this._halfWidth),o*=.75;break;case $t:r*=.75,1&t&&(o+=this._halfHeight);break;case te:r*=.75,1&t&&(o-=this._halfHeight)}return r+=this.x,o+=this.y,n.x=r,n.y=o,n},getWorldX:function(t,i){return this.getWorldXY(t,i,!0).x},getWorldY:function(t,i){return this.getWorldXY(t,i,!0).y},getTileXY:function(t,i,n){var r,o;switch(void 0===n?n={}:!0===n&&(n=fe),t-=this.x,i-=this.y,this.mode){case he:case le:o=1.3333333333333333*i/this.height,r=t/this.width-i/this.height*.6666666666666666;break;case ue:case ce:o=i/this.height-t/this.width*.6666666666666666,r=1.3333333333333333*t/this.width}var a=function(t,i,n){return void 0===n?n={}:!0===n&&(n=oe),n.x=t,n.y=-t-i,n.z=i,n}(r,o,de);return function(t,i,n,r){"number"!=typeof t&&(t=(r=t).x,i=r.y,n=r.z),void 0===r?r={}:!0===r&&(r=oe);var o=Math.round(t),a=Math.round(i),h=Math.round(n),d=Math.abs(o-t),f=Math.abs(a-i),p=Math.abs(h-n);d>f&&d>p?o=-a-h:f>p?a=-o-h:h=-o-a,r.x=o,r.y=a,r.z=h}(a),cube2cr(this.mode,a.x,a.y,a.z,n),n},getTileX:function(t,i){return this.getTileXY(t,i,!0).x},getTileY:function(t,i){return this.getTileXY(t,i,!0).y}};Object.assign(Hexagon.prototype,ye);const xe={y:0,x:1},Te={even:0,odd:1},we=[[[[1,0],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1]],[[1,0],[1,1],[0,1],[-1,0],[0,-1],[1,-1]]],[[[1,0],[1,1],[0,1],[-1,0],[0,-1],[1,-1]],[[1,0],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1]]],[[[1,0],[0,1],[-1,0],[-1,-1],[0,-1],[1,-1]],[[1,1],[0,1],[-1,1],[-1,0],[0,-1],[1,0]]],[[[1,1],[0,1],[-1,1],[-1,0],[0,-1],[1,0]],[[1,0],[0,1],[-1,0],[-1,-1],[0,-1],[1,-1]]]],be=jt,Se=qt,Me=Zt,Ee=Kt;var GetParity=function(t,i,n){var r;switch(t){case be:case Se:r=1&n;break;case Me:case Ee:r=1&i}return r},GetTileXAtDirection=function(t,i,n,r,o){if(void 0===o?o={}:!0===o&&(o=Ce),1===r){var a=GetParity(this.mode,t,i);o.x=t+we[this.mode][a][n][0],o.y=i+we[this.mode][a][n][1]}else if(0===r)o.x=t,o.y=i;else{var h,d,f=cr2cube(this.mode,t,i,!0);switch(n){case 1:h=f.x,f.y-r,d=f.z+r;break;case 2:h=f.x-r,f.y,d=f.z+r;break;case 3:h=f.x-r,f.y+r,d=f.z;break;case 4:h=f.x,f.y+r,d=f.z-r;break;case 5:h=f.x+r,f.y,d=f.z-r;break;default:h=f.x+r,f.y-r,d=f.z}cube2cr(this.mode,h,0,d,o)}return o},Ce={},ReverseDirMap=function(t){var i,n,r,o={};for(var a in t)n=(i=t[a])[0],r=i[1],o.hasOwnProperty(n)||(o[n]={}),o[n][r]=parseInt(a);return o};const Ae=[[ReverseDirMap(we[0][0]),ReverseDirMap(we[0][1])],[ReverseDirMap(we[1][0]),ReverseDirMap(we[1][1])],[ReverseDirMap(we[2][0]),ReverseDirMap(we[2][1])],[ReverseDirMap(we[3][0]),ReverseDirMap(we[3][1])]];const _e=jt,Re=qt,Pe=Zt,Oe=Kt;var ke={};const Le=jt,De=qt;var Ie={},Fe={},Be={},Ne={},Ye={},Xe={};const Ge=Math.PI/180;var DegToRad$3=function(t){return t*Ge},Ue=InitPoints(6),Ve={},ze={};class HexagonGrid extends Hexagon{constructor(t){super(t),this.sides=6}get allDirections(){return We}get halfDirections(){return He}}const We=[0,1,2,3,4,5],He=[0,1,2];var je={saveOrigin:SaveOrigin,restoreOrigin:RestoreOrigin,getTileXYAtDirection:GetTileXAtDirection,getNeighborTileXY:function(t,i,n,r){return GetTileXAtDirection.call(this,t,i,n,1,r)},getNeighborTileDirection:function(t,i){var n=GetParity(this.mode,t.x,t.y),r=Ae[this.mode][n],o=i.x-t.x,a=i.y-t.y;if(r.hasOwnProperty(o)){var h=r[o];if(h.hasOwnProperty(a))return h[a]}return null},getOppositeDirection:function(t,i,n){return(n+3)%6},offset:function(t,i,n,r){void 0===r?r={}:!0===r&&(r=ke);var o=t.x+i,a=t.y+n;switch(this.mode){case _e:0!=(1&n)&&0==(1&a)&&(o+=1);break;case Re:0!=(1&n)&&0==(1&a)&&(o-=1);break;case Pe:0!=(1&i)&&0==(1&o)&&(a+=1);break;case Oe:0!=(1&i)&&0==(1&o)&&(a-=1)}return r.x=o,r.y=a,r},mirror:function(t,i,n){void 0===n?n={}:!0===n&&(n=Ie);var r,o,a,h=cr2cube(this.mode,t.x,t.y,!0),d=this.mode===Le||this.mode===De;return 1&i&&(d?(r=h.y,o=h.x,a=h.z):(r=-h.x,o=-h.z,a=-h.y),h.x=r,h.y=o,h.z=a),2&i&&(d?(r=-h.y,o=-h.x,a=-h.z):(r=h.x,o=h.z,a=h.y)),cube2cr(this.mode,r,0,a,n),n},rotate:function(t,i,n){void 0===n?n={}:!0===n&&(n=Fe),i=Wrap(i,0,5);var r,o,a=cr2cube(this.mode,t.x,t.y,!0);switch(i){case 1:r=-a.z,-a.x,o=-a.y;break;case 2:r=a.y,a.z,o=a.x;break;case 3:r=-a.x,-a.y,o=-a.z;break;case 4:r=a.z,a.x,o=a.y;break;case 5:r=-a.y,-a.z,o=-a.x;break;default:r=a.x,a.y,o=a.z}return cube2cr(this.mode,r,0,o,n),n},getDistance:function(t,i,n){cr2cube(this.mode,t.x,t.y,Be),cr2cube(this.mode,i.x,i.y,Ne);var r=Ne.x-Be.x,o=Ne.y-Be.y,a=Ne.z-Be.z;return(Math.abs(r)+Math.abs(o)+Math.abs(a))/2},directionBetween:function(t,i,n){var r;void 0===n&&(n=!0),cr2cube(this.mode,t.x,t.y,Ye),cr2cube(this.mode,i.x,i.y,Xe);var o=Xe.x-Ye.x,a=Xe.y-Ye.y,h=Xe.z-Ye.z;return r=0===h?o>0?0:3:0===o?h>0?1:4:0===a?h>0?2:5:o>0&&a<0&&h>0?0+h/-a:o<0&&a<0&&h>0?1+-a/h:o<0&&a>0&&h>0?2+a/-o:o<0&&a>0&&h<0?3+-h/a:o>0&&a>0&&h<0?4+o/-h:5+-a/o,n&&(r=Math.round(r)),r},directionNormalize:DirectionNormalize,getGridPoints:function(t,i,n){var r;return void 0===n?n=InitPoints(6):!0===n&&(n=Ue),void 0===t?(Ve.x=0,Ve.y=0):this.getWorldXY(t,i,Ve),void 0!==this.size?r=this.size:((r=ze).width=this.width,r.height=this.height),function(t,i,n,r,o){if(void 0===o&&(o=InitPoints(6)),void 0===n);else if("number"==typeof n)for(var a,h=0===r?0:-30,d=0;d<6;d++)a=DegToRad$3(60*d+h),o[d].x=t+n*Math.cos(a),o[d].y=i+n*Math.sin(a);else{var f=n,p=f.width,T=f.height,b=p/2,S=p/4,A=T/2,P=T/4;0===r?(o[0].x=t+b,o[0].y=i,o[1].x=t+S,o[1].y=i+A,o[2].x=t-S,o[2].y=i+A,o[3].x=t-b,o[3].y=i,o[4].x=t-S,o[4].y=i-A,o[5].x=t+S,o[5].y=i-A):(o[0].x=t+b,o[0].y=i-P,o[1].x=t+b,o[1].y=i+P,o[2].x=t,o[2].y=i+A,o[3].x=t-b,o[3].y=i+P,o[4].x=t-b,o[4].y=i-P,o[5].x=t,o[5].y=i-A)}}(Ve.x,Ve.y,r,this.staggeraxis,n),n},ringToTileXYArray:function(t,i,n){void 0===n&&(n=[]);var r,o,a,h=cr2cube(this.mode,t.x,t.y,!0),d=h.x,f=(h.y,h.z);for(a=i,r=0;r>=-i;r--)o=-r-a,n.push(cube2cr(this.mode,d+r,0,f+a));for(r=-i,o=1;o<=i;o++)a=-r-o,n.push(cube2cr(this.mode,d+r,0,f+a));for(o=i,a=-1;a>=-i;a--)r=-o-a,n.push(cube2cr(this.mode,d+r,0,f+a));for(a=-i,r=1;r<=i;r++)o=-r-a,n.push(cube2cr(this.mode,d+r,0,f+a));for(r=i,o=-1;o>=-i;o--)a=-r-o,n.push(cube2cr(this.mode,d+r,0,f+a));for(o=-i,a=1;a<=i-1;a++)r=-o-a,n.push(cube2cr(this.mode,d+r,0,f+a));return n}};Object.assign(HexagonGrid.prototype,je);var qe={quadGrid:QuadGrid,hexagonGrid:HexagonGrid};class Board$1 extends EventEmitter{constructor(t,i){super(),this.isShutdown=!1,this.scene=t,this.boardData=new BoardData,this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.isBoard=GetValue$l(t,"isBoard",!0),this.setGrid(GetValue$l(t,"grid",void 0)),this.setWrapMode(GetValue$l(t,"wrap",!1)),this.setInfinityMode(GetValue$l(t,"infinity",!1)),this.setBoardWidth(GetValue$l(t,"width",0)),this.setBoardHeight(GetValue$l(t,"height",0)),this}boot(){this.scene&&this.isBoard&&this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(t){if(!this.isShutdown)return this.scene&&this.isBoard&&this.scene.sys.events.off("shutdown",this.destroy,this),this.isBoard&&this.removeAllChess(!t,!0),super.shutdown(),this.boardData.shutdown(t),this.scene=void 0,this.boardData=void 0,this.isShutdown=!0,this}destroy(t){this.isShutdown||(this.emit("destroy",this,t),this.shutdown(t))}setGrid(t){if(IsPlainObject(t)){var i=t,n=GetValue$l(i,"gridType","quadGrid");t=new qe[n](i)}return this.grid=t,this}setWrapMode(t){return void 0===t&&(t=!0),this.wrapMode=t,this}setInfinityMode(t){return void 0===t&&(t=!0),this.infinityMode=t,this}setBoardSize(t,i){return this.setBoardWidth(t),this.setBoardHeight(i),this}exists(t){return this.boardData.exists(this.getChessUID(t))}get chessCount(){return this.boardData.chessCount}clear(t){return void 0===t&&(t=!0),this.removeAllChess(t,!0),this.boardData.clear(),this}static GetBoard(t){return GetBoard(t)}}Object.assign(Board$1.prototype,St);const Ze=Phaser.GameObjects.Zone;class TouchZone extends Ze{constructor(t){super(t,0,0,1,1),t.add.existing(this),this.setScrollFactor(0),this.setInteractive({hitArea:{},hitAreaCallback:function(){return!0}})}}const Ke=Phaser.GameObjects.GameObject.RENDER_MASK;var InputCandidate=function(t){if(t.renderFlags!==Ke)return!1;var i=!0,n=t.parentContainer;if(n)do{if(n.renderFlags!==Ke){i=!1;break}n=n.parentContainer}while(n);return i},EmitChessEvent=function(t,i,n,r,o,a){if(null!=r&&null!=o){for(var h,d="string"!=typeof t?t:void 0,f="string"!=typeof i?i:void 0,p=n.tileXYToChessArray(r,o,Je),T=0,b=p.length;T<b;T++)h=p[T],InputCandidate(h)&&(h.emit&&(f?f(h):h.emit(i,a)),d?d(h):n.emit(t,a,h));Je.length=0}},Je=[],OnPointerDown$1=function(t){if(this.enable&&t.isDown){var i=this.board;null===this.pointer&&(this.pointer=t);var n=i.worldXYToTileXY(t.worldX,t.worldY,!0),r=n.x,o=n.y;if(this.prevTilePosition.x=this.tilePosition.x,this.prevTilePosition.y=this.tilePosition.y,this.tilePosition.x=r,this.tilePosition.y=o,i.contains(r,o)){i.emit("tiledown",t,this.tilePosition),i.emit("tileover",t,this.tilePosition);EmitChessEvent((function(n){i.emit("gameobjectdown",t,n),i.emit("gameobjectover",t,n)}),(function(i){i.emit("board.pointerdown",t),i.emit("board.pointerover",t)}),i,r,o,t)}}},OnPointerUp$1=function(t){if(this.enable){var i=this.board,n=i.worldXYToTileXY(t.worldX,t.worldY,!0),r=n.x,o=n.y;if(this.prevTilePosition.x=this.tilePosition.x,this.prevTilePosition.y=this.tilePosition.y,this.tilePosition.x=r,this.tilePosition.y=o,i.contains(r,o)){i.emit("tileup",t,this.tilePosition),i.emit("tileout",t,this.prevTilePosition);EmitChessEvent((function(n){i.emit("gameobjectup",t,n),i.emit("gameobjectout",t,n)}),(function(i){i.emit("board.pointerup",t),i.emit("board.pointerout",t)}),i,r,o,t),this.pointer===t&&(this.pointer=null)}}},OnPointerMove$1=function(t){if(this.enable){var i=this.board,n=i.worldXYToTileXY(t.worldX,t.worldY,!0);if(!AreTileXYEqual(this.tilePosition,n)){this.prevTilePosition.x=this.tilePosition.x,this.prevTilePosition.y=this.tilePosition.y,null!=this.prevTilePosition.x&&null!=this.prevTilePosition.y&&i.emit("tileout",t,this.prevTilePosition);var r=n.x,o=n.y;if(this.tilePosition.x=r,this.tilePosition.y=o,i.contains(r,o)){null===this.pointer&&(this.pointer=t),i.emit("tilemove",t,this.tilePosition),i.emit("tileover",t,this.tilePosition),EmitChessEvent("gameobjectout","board.pointerout",i,this.prevTilePosition.x,this.prevTilePosition.y,t);EmitChessEvent((function(n){i.emit("gameobjectmove",t,n),i.emit("gameobjectover",t,n)}),(function(i){i.emit("board.pointermove",t),i.emit("board.pointerover",t)}),i,r,o,t)}else this.pointer===t&&(this.pointer=null)}}};const Qe=Phaser.Utils.Objects.GetValue;class TickTask extends ComponentBase{constructor(t,i){super(t,i),this._isRunning=!1,this.isPaused=!1,this.tickingState=!1,this.setTickingMode(Qe(i,"tickingMode",1))}boot(){2!==this.tickingMode||this.tickingState||this.startTicking()}shutdown(t){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),super.shutdown(t))}setTickingMode(t){"string"==typeof t&&(t=$e[t]),this.tickingMode=t}startTicking(){this.tickingState=!0}stopTicking(){this.tickingState=!1}get isRunning(){return this._isRunning}set isRunning(t){this._isRunning!==t&&(this._isRunning=t,1===this.tickingMode&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}start(){return this.isPaused=!1,this.isRunning=!0,this}pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}resume(){return this.isPaused&&(this.isRunning=!0),this}stop(){return this.isPaused=!1,this.isRunning=!1,this}complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}}const $e={no:0,lazy:1,always:2},ti=Phaser.Utils.Objects.GetValue;class OnePointerTracer extends TickTask{constructor(t,i){var n=GetSceneObject(t);n===t&&(t=void 0),super(n,i),this.gameObject=t,t&&t.setInteractive(ti(i,"inputConfig",void 0)),this._enable=void 0,this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.setEnable(ti(t,"enable",!0)),this.setDetectBounds(),void 0===this.gameObject?this.setDetectBounds(ti(t,"bounds",void 0)):this.setDetectBounds(),this.tracerState=ei,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}boot(){super.boot(),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(t){this.scene&&(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,super.shutdown(t))}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}setDetectBounds(t){return this.bounds=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t,i){this.enable&&(void 0===this.pointer&&(!this.bounds||this.bounds.contains(t.x,t.y))&&this.pointer!==t&&(this.pointer=t,this.lastPointer=t,this.movedState=!1,this.tracerState=ii,void 0===this.gameObject&&(this.isTouchingAnyObject=i.length>0),this.onDragStart()))}onPointerUp(t){this.enable&&((!this.bounds||this.bounds.contains(t.x,t.y))&&this.pointer===t&&(this.pointer=void 0,this.movedState=!1,this.tracerState=ei,this.onDragEnd()))}onPointerMove(t){if(this.enable&&t.isDown){var i=!this.bounds||this.bounds.contains(t.x,t.y),n=this.pointer===t;!n&&i||(n&&!i?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}}dragCancel(){return this.tracerState===ii&&this.onDragEnd(),this.pointer=void 0,this.tracerState=ei,this}onDragStart(){this.emit("dragstart",this)}onDragEnd(){this.emit("dragend",this)}onDrag(){this.emit("drag",this)}preUpdate(t,i){}postUpdate(t,i){}startTicking(){super.startTicking(),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}stopTicking(){super.stopTicking(),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=ni,this}}const ei=0,ii=1,ni="IDLE";class FSM{constructor(t){var i=GetValue$l(t,"states",void 0);i&&this.addStates(i);var n=GetValue$l(t,"extend",void 0);if(n)for(var r in n)this.hasOwnProperty(r)&&void 0!==this[r]||(this[r]=n[r]);var o=GetValue$l(t,"eventEmitter",void 0),a=GetValue$l(t,"EventEmitterClass",void 0);this.setEventEmitter(o,a),this._stateLock=!1,this.resetFromJSON(t)}shutdown(){this.destroyEventEmitter()}destroy(){this.shutdown()}resetFromJSON(t){this.setEnable(GetValue$l(t,"enable",!0)),this.start(GetValue$l(t,"start",void 0));var i=GetValue$l(t,"init",void 0);return i&&i.call(this),this}toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}set state(t){if(this.enable&&!this._stateLock&&this._state!==t){if(this._prevState=this._state,this._state=t,this._stateLock=!0,this.emit("statechange",this),null!=this._prevState){var i="exit_"+this._prevState,n=this[i];n&&n.call(this),this.emit(i,this)}if(this._stateLock=!1,null!=this._state){var r="enter_"+this._state,o=this[r];o&&o.call(this),this.emit(r,this)}}}get state(){return this._state}get prevState(){return this._prevState}start(t){return this._start=t,this._prevState=void 0,this._state=t,this}goto(t){return null!=t&&(this.state=t),this}next(){var t,i=this["next_"+this.state];return i&&(t="string"==typeof i?i:i.call(this)),this.goto(t),this}addState(t,i){"string"!=typeof t&&(t=(i=t).name);var n=i.next;n&&(this["next_"+t]=n);var r=i.exit;r&&(this["exit_"+t]=r);var o=i.enter;return o&&(this["enter_"+t]=o),this}addStates(t){if(Array.isArray(t))for(var i=0,n=t.length;i<n;i++)this.addState(t[i]);else for(var r in t)this.addState(r,t[r]);return this}runMethod(t,i,n,r,o,a){var h=this[t+"_"+this.state];if(h){var d=arguments.length;switch(d){case 1:return h.call(this);case 2:return h.call(this,i);case 3:return h.call(this,i,n);case 4:return h.call(this,i,n,r);case 5:return h.call(this,i,n,r,o);case 6:return h.call(this,i,n,r,o,a)}for(var f=new Array(d-1),p=1;p<d;p++)f[p-1]=arguments[p];return h.apply(this,f)}}update(t,i){this.runMethod("update",t,i)}preupdate(t,i){this.runMethod("preupdate",t,i)}postupdate(t,i){this.runMethod("postupdate",t,i)}}Object.assign(FSM.prototype,W);const si=Phaser.Utils.Objects.GetValue,ri=Phaser.Math.Distance.Between;class Tap extends OnePointerTracer{constructor(t,i){super(t,i);var n=this,r={states:{IDLE:{enter:function(){n.stop(),n.tapsCount=0,n.x=0,n.y=0,n.worldX=0,n.worldY=0},exit:function(){var t=n.lastPointer;n.x=t.x,n.y=t.y,n.worldX=t.worldX,n.worldY=t.worldY}},BEGIN:{enter:function(){n.start(),n.tapsCount=0,n.emit("tappingstart",n,n.gameObject,n.lastPointer)}},RECOGNIZED:{enter:function(){n.start(),n.emit("tap",n,n.gameObject,n.lastPointer),n.emit(`${n.tapsCount}tap`,n,n.gameObject,n.lastPointer)}}},init:function(){this.state=oi},eventEmitter:!1};this.setRecongizedStateObject(new FSM(r))}resetFromJSON(t){super.resetFromJSON(t),this.setHoldTime(si(t,"time",250)),this.setTapInterval(si(t,"tapInterval",200)),this.setDragThreshold(si(t,"threshold",9)),this.setTapOffset(si(t,"tapOffset",10));var i=si(t,"taps",void 0);return void 0!==i?this.setTaps(i):(this.setMaxTaps(si(t,"maxTaps",void 0)),this.setMinTaps(si(t,"minTaps",void 0))),this}onDragStart(){switch(this.state){case oi:this.state=ai;break;case ai:var t=this.lastPointer;ri(t.upX,t.upY,t.x,t.y)>this.tapOffset&&(this.state=hi,this.state=ai);break;case hi:this.state=ai}}onDragEnd(){this.state===ai&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),void 0!==this.maxTaps&&this.tapsCount===this.maxTaps&&(this.state=hi))}onDrag(){this.state!==oi&&this.pointer.getDistance()>this.dragThreshold&&(this.state=oi)}preUpdate(t,i){if(this.isRunning&&this.enable&&this.state===ai){var n=this.lastPointer;if(n.isDown)t-n.downTime>this.holdTime&&(this.state=oi);else t-n.upTime>this.tapInterval&&(void 0===this.minTaps||this.tapsCount>=this.minTaps?this.state=hi:this.state=oi)}}postUpdate(t,i){this.isRunning&&this.enable&&this.state===hi&&(this.state=oi)}get isTapped(){return this.state===hi}setHoldTime(t){return this.holdTime=t,this}setTapInterval(t){return this.tapInterval=t,this}setDragThreshold(t){return this.dragThreshold=t,this}setTapOffset(t){return this.tapOffset=t,this}setMaxTaps(t){return this.maxTaps=t,this}setMinTaps(t){return this.minTaps=t,this}setTaps(t,i){return void 0===i&&(i=t),this.setMinTaps(t).setMaxTaps(i),this}}const oi="IDLE",ai="BEGIN",hi="RECOGNIZED";var InstallTap=function(){var t=this.touchZone?this.touchZone:this.board.scene,i=new Tap(t);return i.on("tap",OnTap,this),i},OnTap=function(t){var i=this.board,n=i.worldXYToTileXY(t.worldX,t.worldY),r=n.x,o=n.y;if(i.contains(r,o)){i.emit("tiletap",t,n),i.emit(`tile${t.tapsCount}tap`,t,n);EmitChessEvent((function(n){i.emit("gameobjecttap",t,n),i.emit(`gameobject${t.tapsCount}tap`,t,n)}),(function(i){i.emit("board.tap",t),i.emit(`board.${t.tapsCount}tap`,t)}),i,r,o,t)}};const li=Phaser.Utils.Objects.GetValue;class Press extends OnePointerTracer{constructor(t,i){super(t,i);var n=this,r={states:{IDLE:{enter:function(){n.x=0,n.y=0,n.worldX=0,n.worldY=0},exit:function(){var t=n.lastPointer;n.x=t.x,n.y=t.y,n.worldX=t.worldX,n.worldY=t.worldY}},BEGIN:{enter:function(){n.start()},exit:function(){n.stop()}},RECOGNIZED:{enter:function(){n.emit("pressstart",n,n.gameObject,n.lastPointer)},exit:function(){n.emit("pressend",n,n.gameObject,n.lastPointer)}}},init:function(){this.state=ui},eventEmitter:!1};this.setRecongizedStateObject(new FSM(r))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(li(t,"threshold",9)),this.setHoldTime(li(t,"time",251)),this}onDragStart(){this.state=ci,0===this.holdTime&&(this.state=di)}onDragEnd(){this.state=ui}onDrag(){this.state!==ui&&this.pointer.getDistance()>this.dragThreshold&&(this.state=ui)}preUpdate(t,i){this.isRunning&&this.enable&&(this.state===ci&&t-this.pointer.downTime>=this.holdTime&&(this.state=di))}get isPressed(){return this.state===di}setHoldTime(t){return this.holdTime=t,this}setDragThreshold(t){return this.dragThreshold=t,this}}const ui="IDLE",ci="BEGIN",di="RECOGNIZED";var InstallPress=function(){var t=this.touchZone?this.touchZone:this.board.scene,i=new Press(t);return i.on("pressstart",OnPressStart,this).on("pressend",OnPressEnd,this),i},OnPressStart=function(t){var i=this.board,n=i.worldXYToTileXY(t.worldX,t.worldY),r=n.x,o=n.y;i.contains(r,o)&&(i.emit("tilepressstart",t,n),EmitChessEvent("gameobjectpressstart","board.pressstart",i,r,o,t))},OnPressEnd=function(t){var i=this.board,n=i.worldXYToTileXY(t.worldX,t.worldY),r=n.x,o=n.y;i.contains(r,o)&&(i.emit("tilepressend",t,n),EmitChessEvent("gameobjectpressend","board.pressend",i,r,o,t))};const fi=Phaser.Math.Distance.Between,pi=Phaser.Math.Angle.Between;var gi={getDt:function(){return this.scene.sys.game.loop.delta},getVelocity:function(){var t=this.pointer.position,i=this.pointer.prevPosition;return fi(i.x,i.y,t.x,t.y)/(.001*this.getDt())},getVelocityX:function(){var t=this.pointer.position,i=this.pointer.prevPosition;return Math.abs(t.x-i.x)/(.001*this.getDt())},getVelocityY:function(){var t=this.pointer.position,i=this.pointer.prevPosition;return Math.abs(t.y-i.y)/(.001*this.getDt())},getVelocityAngle:function(){var t=this.pointer.position,i=this.pointer.prevPosition;return pi(i.x,i.y,t.x,t.y)}},vi={"up&down":0,"left&right":1,"4dir":2,"8dir":3},mi={};const yi=Phaser.Utils.Objects.GetValue,xi=Phaser.Math.RadToDeg;class Swipe extends OnePointerTracer{constructor(t,i){super(t,i);var n=this,r={states:{IDLE:{enter:function(){n.x=0,n.y=0,n.worldX=0,n.worldY=0},exit:function(){var t=n.lastPointer;n.x=t.x,n.y=t.y,n.worldX=t.worldX,n.worldY=t.worldY}},BEGIN:{enter:function(){n.validDrag=!1}},RECOGNIZED:{enter:function(){n.start(),n.updateDirectionStates(),n.emit("swipe",n,n.gameObject,n.lastPointer)},exit:function(){n.stop(),n.clearDirectionStates()}}},init:function(){this.state=Ti},eventEmitter:!1};this.setRecongizedStateObject(new FSM(r)),this.clearDirectionStates()}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(yi(t,"threshold",10)),this.setVelocityThreshold(yi(t,"velocityThreshold",1e3)),this.setDirectionMode(yi(t,"dir","8dir")),this}onDragStart(){this.state=wi}onDragEnd(){this.state=Ti}onDrag(){this.state===wi&&(this.validDrag||(this.validDrag=0===this.dragThreshold||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=bi))}postUpdate(t,i){this.isRunning&&this.enable&&this.state===bi&&(this.state=Ti)}get isSwiped(){return this.state===bi}get dragVelocity(){var t;switch(this.dirMode){case 0:t=this.getVelocityY();break;case 1:t=this.getVelocityX();break;default:t=this.getVelocity()}return t}setDragThreshold(t){return this.dragThreshold=t,this}setVelocityThreshold(t){return this.velocityThreshold=t,this}setDirectionMode(t){return"string"==typeof t&&(t=vi[t]),this.dirMode=t,this}updateDirectionStates(){return function(t,i,n){switch(void 0===n?n={}:!0===n&&(n=mi),n.left=!1,n.right=!1,n.up=!1,n.down=!1,t=(t+360)%360,i){case 0:t<180?n.down=!0:n.up=!0;break;case 1:t>90&&t<=270?n.left=!0:n.right=!0;break;case 2:t>45&&t<=135?n.down=!0:t>135&&t<=225?n.left=!0:t>225&&t<=315?n.up=!0:n.right=!0;break;case 3:t>22.5&&t<=67.5?(n.down=!0,n.right=!0):t>67.5&&t<=112.5?n.down=!0:t>112.5&&t<=157.5?(n.down=!0,n.left=!0):t>157.5&&t<=202.5?n.left=!0:t>202.5&&t<=247.5?(n.left=!0,n.up=!0):t>247.5&&t<=292.5?n.up=!0:t>292.5&&t<=337.5?(n.up=!0,n.right=!0):n.right=!0}}(xi(this.getVelocityAngle()),this.dirMode,this),this}clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}Object.assign(Swipe.prototype,gi);const Ti="IDLE",wi="BEGIN",bi="RECOGNIZED";var InstallSwipe=function(){var t=this.touchZone?this.touchZone:this.board.scene,i=new Swipe(t);return i.on("swipe",OnSwipe,this),i},OnSwipe=function(t){var i=this.board,n=i.worldXYToTileXY(t.worldX,t.worldY),r=n.x,o=n.y;i.contains(r,o)&&(t.direction=i.angleSnapToDirection(n,t.getVelocityAngle()),i.emit("tileswipe",t,n),EmitChessEvent("gameobjectswipe","board.swipe",i,r,o,t))};class Input{constructor(t,i){var n=GetValue$l(i,"enable",!0),r=GetValue$l(i,"useTouchZone",!0),o=t.scene;if(this.board=t,this.touchZone=void 0,this._enable=!0,this.pointer=null,this.tilePosition={x:void 0,y:void 0},this.prevTilePosition={x:void 0,y:void 0},r){var a=new TouchZone(o);a.on("pointerdown",OnPointerDown$1,this),a.on("pointerup",OnPointerUp$1,this),a.on("pointermove",OnPointerMove$1,this),this.touchZone=a}else o.input.on("pointerdown",OnPointerDown$1,this),o.input.on("pointerup",OnPointerUp$1,this),o.input.on("pointermove",OnPointerMove$1,this);this.tap=InstallTap.call(this),this.press=InstallPress.call(this),this.swipe=InstallSwipe.call(this),t.once("destroy",this.onBoardDestroy,this),this.setEnable(n)}destroy(t){if(this.tap.destroy(t),this.press.destroy(t),this.swipe.destroy(t),this.touchZone)this.touchZone.destroy(t),this.touchZone=void 0;else{var i=this.board.scene;i&&(i.input.off("pointerdown",OnPointerDown$1,this),i.input.off("pointerup",OnPointerUp$1,this),i.input.off("pointermove",OnPointerMove$1,this))}this.board=void 0}onBoardDestroy(t,i){this.destroy(i)}get enable(){return this._enable}set enable(t){this._enable!==t&&(t||(this.pointer=null),this._enable=t,this.touchZone&&(t?this.touchZone.setInteractive():this.touchZone.disableInteractive()),this.tap.setEnable(t),this.press.setEnable(t),this.swipe.setEnable(t))}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}}class Board extends Board$1{get touchZone(){return this.input?this.input.touchZone:null}getTouchZone(){return this.touchZone}}var Si={setInteractive:function(t){if(this.input){var i=!1!==t;this.input.setEnable(i)}else this.input=new Input(this,t);return this}};Object.assign(Board.prototype,Si);var IsInValidKey=function(t){return null==t||""===t||0===t.length},SetValue=function(t,i,n,r){if(void 0===r&&(r="."),"object"==typeof t){if(IsInValidKey(i)){if(null==n)return;"object"==typeof n&&(t=n)}else{"string"==typeof i&&(i=i.split(r));var o=i.pop(),a=function(t,i,n){var r=t;if(IsInValidKey(i));else{var o;"string"==typeof i&&(i=i.split("."));for(var a=0,h=i.length;a<h;a++){var d;null!=r[o=i[a]]&&"object"==typeof r[o]||(d=a===h-1?void 0===n?{}:n:{},r[o]=d),r=r[o]}}return r}(t,i);a[o]=n}return t}};ObjectFactory$1.register("board",(function(t){return new Board(this.scene,t)})),SetValue(window,"RexPlugins.Board.Board",Board),ObjectFactory$1.register("hexagonGrid",(function(t){return new HexagonGrid(t)})),ObjectFactory$1.register("quadGrid",(function(t){return new QuadGrid(t)}));var IsMiniBoardObject=function(t){return"rexMiniBoard"===t.type};const Mi=Phaser.GameObjects.Polygon;class Shape extends Mi{constructor(t,i,n,r,o,a,h){void 0===h&&(h=!0);var d,f=IsMiniBoardObject(t);f&&(t=(d=t).board);var p,T,b=t.scene;h?(p=0,T=0):(p=i,T=n);var S=t.getGridPoints(void 0,void 0,!0);ShiftToO(S),super(b,p,T,S,o,a),h?f?d.addChess(this,i,n,r):t.addChess(this,i,n,r,!0):GetChessData(this)}}var ShiftToO=function(t){for(var i,n=1/0,r=1/0,o=0,a=t.length;o<a;o++)i=t[o],n=Math.min(n,i.x),r=Math.min(r,i.y);if(0===n&&0===r)return t;for(o=0,a=t.length;o<a;o++)(i=t[o]).x-=n,i.y-=r;return t};ObjectFactory$1.register("shape",(function(t,i,n,r,o,a,h){var d=new Shape(t,i,n,r,o,a,h);return t.scene.add.existing(d),d})),SetValue(window,"RexPlugins.Board.Shape",Shape);class SceneUpdateTickTask extends TickTask{startTicking(){super.startTicking(),this.scene.sys.events.on("update",this.update,this)}stopTicking(){super.stopTicking(),this.scene&&this.scene.sys.events.off("update",this.update,this)}}var Ei={x:0,y:0,z:0},GetSneakTileZ=function(t,i,n,r){var o=t.chessData.board,a=r.toString();do{a+="."}while(o.contains(i,n,a));return a},Ci={},Ai={},Clone=function(t,i){var n=Array.isArray(t);if(void 0===i?i=n?[]:{}:Clear(i),n){i.length=t.length;for(var r=0,o=t.length;r<o;r++)i[r]=t[r]}else for(var a in t)i[a]=t[a];return i},Shuffle=function(t){for(var i=t.length-1;i>0;i--){var n=Math.floor(Math.random()*(i+1)),r=t[i];t[i]=t[n],t[n]=r}return t},_i=[],Ri={x:0,y:0},Pi=[],Oi={canMoveTo:function(t,i,n){var r=this.chessData.board;if(null==r)return!1;var o=this.chessData.tileXYZ,a=o.x,h=o.y,d=o.z;if(t===a&&i===h)return!0;if(!r.contains(t,i))return!1;if(this.blockerTest&&r.hasBlocker(t,i))return!1;if(this.edgeBlockerTest,this.moveableTestCallback){if(void 0===n&&(n=this.chessData.getTileDirection(t,i)),Ei.x=t,Ei.y=i,Ei.z=d,this.moveableTestScope)var f=this.moveableTestCallback.call(this.moveableTestScope,o,Ei,n,r);else f=this.moveableTestCallback(o,Ei,n,r);if(!f)return!1}if(this.occupiedTest&&!this.sneakMode){var p=r.tileXYZToChess(t,i,d);if(p&&(this.emit("occupy",p,this.parent,this),r.contains(t,i,d)))return!1}return!0},moveTo:function(t,i,n){var r=this.chessData.board;if(null===r)return this.lastMoveResult=!1,this;if(null!=t&&"number"!=typeof t){var o=t;t=GetValue$l(o,"x",void 0),i=GetValue$l(o,"y",void 0),n=GetValue$l(o,"direction",void 0)}var a=this.chessData.tileXYZ;if(void 0!==n&&null==t||null==i){var h=r.getNeighborTileXY(a,n,!0);null!==h?(t=h.x,i=h.y):(t=null,i=null)}if(null==t||null==i)return this.lastMoveResult=!1,this;if(void 0===n&&(Ci.x=t,Ci.y=i,n=r.getNeighborTileDirection(a,Ci)),!this.canMoveTo(t,i,n))return this.lastMoveResult=!1,this;if(this.destinationTileX=t,this.destinationTileY=i,this.destinationDirection=n,r.wrapMode&&null!==n)if(r.grid.getNeighborTileXY(a.x,a.y,n,Ai),Ai.x===t&&Ai.y===i){var d=r.tileXYToWorldXY(t,i,!0);this.moveAlongLine(void 0,void 0,d.x,d.y)}else{var f=(d=r.tileXYToWorldXY(Ai.x,Ai.y,!0)).x,p=d.y,T=(d=r.tileXYToWorldXY(a.x,a.y,!0)).x,b=d.y,S=(T+f)/2,A=(b+p)/2;this.moveAlongLine(void 0,void 0,S,A);var P=r.getOppositeDirection(t,i,n);r.grid.getNeighborTileXY(t,i,P,Ai),f=(d=r.tileXYToWorldXY(Ai.x,Ai.y,!0)).x,p=d.y,T=(f+(S=(d=r.tileXYToWorldXY(t,i,!0)).x))/2,b=(p+(A=d.y))/2,this.addMoveLine(T,b,S,A)}else{d=r.tileXYToWorldXY(t,i,!0);this.moveAlongLine(void 0,void 0,d.x,d.y)}var O=a.z;return this.sneakMode&&(void 0===this.tileZSave?r.contains(t,i,O)&&(this.tileZSave=O,O=GetSneakTileZ(this,t,i,this.tileZSave)):r.contains(t,i,this.tileZSave)?O=GetSneakTileZ(this,t,i,this.tileZSave):(O=this.tileZSave,this.tileZSave=void 0)),r.moveChess(this.parent,t,i,O,!1),this.isRunning=!0,this.lastMoveResult=!0,this},moveToward:function(t){return this.moveTo(void 0,void 0,t),this},moveToRandomNeighbor:function(){var t=this.chessData.board;if(null===t)return this.lastMoveResult=!1,this;var i=t.grid.allDirections;_i.length!==i.length&&Clone(i,_i),Shuffle(_i);for(var n=0,r=_i.length;n<r;n++)if(this.moveToward(_i[n]),this.lastMoveResult)return this;return this},moveAway:function(t,i,n){var r=this.chessData.board;if(null===r)return this.lastMoveResult=!1,this;if("number"!=typeof t){var o=t;t=o.x,i=o.y}Ri.x=t,Ri.y=i,void 0===n&&(n=!0);var a,h,d=this.chessData.tileXYZ,f=r.grid.allDirections;if(Pi.length!==f.length+1){Pi.length=0;for(var p=0,T=f.length;p<T;p++)Pi.push({direction:p});Pi.push({direction:null})}for(p=0,T=Pi.length;p<T;p++){if(null===(h=(a=Pi[p]).direction))a.x=d.x,a.y=d.y;else if(null===r.getNeighborTileXY(d,h,a)){a.x=null,a.y=null,a.distance=null;continue}a.distance=r.getDistance(a,Ri,!0)}var b=this.destinationDirection;Pi.sort((function(t,i){return null===t.distance?1:null===i.distance?-1:t.distance>i.distance?n?-1:1:t.distance<i.distance?n?1:-1:t.direction===b?1:i.direction===b?-1:null===t.direction?1:null===i.direction?-1:0}));for(p=0,T=Pi.length;p<T;p++){if(null===(a=Pi[p]).distance)return this;if(this.moveTo(a),this.lastMoveResult)return this}return this},moveCloser:function(t,i){return this.moveAway(t,i,!1),this}};const ki=Phaser.Utils.Objects.GetValue,Li=Phaser.Math.Distance.Between,Di=Phaser.Math.Linear,Ii=Phaser.Math.Angle.Between;class MoveTo$2 extends SceneUpdateTickTask{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.isRunning=ki(t,"isRunning",!1),this.setEnable(ki(t,"enable",!0)),this.timeScale=ki(t,"timeScale",1),this.setSpeed(ki(t,"speed",400)),this.setRotateToTarget(ki(t,"rotateToTarget",!1)),this.targetX=ki(t,"targetX",0),this.targetY=ki(t,"targetY",0),this}toJSON(){return{isRunning:this.isRunning,enable:this.enable,timeScale:this.timeScale,speed:this.speed,rotateToTarget:this.rotateToTarget,targetX:this.targetX,targetY:this.targetY,tickingMode:this.tickingMode}}setEnable(t){return null==t&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}setRotateToTarget(t){return this.rotateToTarget=t,this}moveTo(t,i){if("number"!=typeof t){var n=t;t=n.x,i=n.y}return this.targetX=t,this.targetY=i,super.start(),this}moveFrom(t,i){if("number"!=typeof t){var n=t;t=n.x,i=n.y}var r=this.parent,o=r.x,a=r.y;return r.setPosition(t,i),this.moveTo(o,a),this}moveToward(t,i){var n=this.parent,r=n.x+Math.cos(t)*i,o=n.y+Math.sin(t)*i;return this.moveTo(r,o),this}update(t,i){if(!this.isRunning||!this.enable)return this;var n=this.parent;if(!n.active)return this;var r=n.x,o=n.y,a=this.targetX,h=this.targetY;if(r===a&&o===h)return this.complete(),this;if(0===this.speed||0===i||0===this.timeScale)return this;var d,f,p=i*this.timeScale/1e3,T=this.speed*p,b=Li(r,o,a,h);if(T<b){var S=T/b;d=Di(r,a,S),f=Di(o,h,S)}else d=a,f=h;return n.setPosition(d,f),this.rotateToTarget&&(n.rotation=Ii(r,o,d,f)),this}}class MoveTo$1 extends SceneUpdateTickTask{constructor(t,i){super(t,i),this.chessData=GetChessData(t),this.scene=t.scene,this.moveToTask=new MoveTo$2(t,{tickingMode:0}),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.isRunning=GetValue$l(t,"isRunning",!1),this.setEnable(GetValue$l(t,"enable",!0)),this.timeScale=GetValue$l(t,"timeScale",1),this.setSpeed(GetValue$l(t,"speed",400)),this.setRotateToTarget(GetValue$l(t,"rotateToTarget",!1)),this.setOccupiedTest(GetValue$l(t,"occupiedTest",!1)),this.setBlockerTest(GetValue$l(t,"blockerTest",!1)),this.setEdgeBlockerTest(GetValue$l(t,"edgeBlockerTest",!1)),this.setMoveableTestCallback(GetValue$l(t,"moveableTest",void 0),GetValue$l(t,"moveableTestScope",void 0)),this.setSneakEnable(GetValue$l(t,"sneak",!1)),this.destinationTileX=GetValue$l(t,"destinationTileX",null),this.destinationTileY=GetValue$l(t,"destinationTileY",null),this.destinationDirection=GetValue$l(t,"destinationDirection",null),this.lastMoveResult=GetValue$l(t,"lastMoveResult",void 0),this}toJSON(){return{isRunning:this.isRunning,enable:this.enable,timeScale:this.timeScale,speed:this.speed,occupiedTest:this.occupiedTest,blockerTest:this.blockerTest,edgeBlockerTest:this.edgeBlockerTest,moveableTest:this.moveableTestCallback,moveableTestScope:this.moveableTestScope,rotateToTarget:this.rotateToTarget,destinationTileX:this.destinationTileX,destinationTileY:this.destinationTileY,destinationDirection:this.destinationDirection,lastMoveResult:this.lastMoveResult,tickingMode:this.tickingMode}}shutdown(t){this.moveToTask.shutdown(t),super.shutdown(t)}set enable(t){this.moveToTask.setEnable(t)}get enable(){return this.moveToTask.enable}setEnable(t){return null==t&&(t=!0),this.enable=t,this}get timeScale(){return this.moveToTask.timeScale}set timeScale(t){this.moveToTask.timeScale=t}set speed(t){this.moveToTask.setSpeed(t)}get speed(){return this.moveToTask.speed}setSpeed(t){return this.speed=t,this}set rotateToTarget(t){this.moveToTask.setRotateToTarget(t)}get rotateToTarget(){return this.moveToTask.rotateToTarget}setRotateToTarget(t){return void 0===t&&(t=!0),this.rotateToTarget=t,this}setOccupiedTest(t){return void 0===t&&(t=!0),this.occupiedTest=t,this}setBlockerTest(t){return void 0===t&&(t=!0),this.blockerTest=t,this}setEdgeBlockerTest(t){return void 0===t&&(t=!0),this.edgeBlockerTest=t,this}setMoveableTestCallback(t,i){return this.moveableTestCallback=t,this.moveableTestScope=i,this}setSneakEnable(t){return void 0===t&&(t=!0),this.sneakMode=t,this.tileZSave=void 0,this}moveAlongLine(t,i,n,r){return void 0!==t&&(this.parent.x=t),void 0!==i&&(this.parent.y=i),this.moveToTask.moveTo(n,r),this}addMoveLine(t,i,n,r){return this.moveToTask.hasOwnProperty("nextlines")||(this.moveToTask.nextlines=[]),this.moveToTask.nextlines.push([t,i,n,r]),this}moveNextLine(){var t=this.moveToTask.nextlines;return!!t&&(0!==t.length&&(this.moveAlongLine.apply(this,t[0]),t.length=0,!0))}update(t,i){if(!this.isRunning||!this.enable)return this;var n=this.moveToTask;return n.update(t,i),n.isRunning||this.moveNextLine()||this.complete(),this}}Object.assign(MoveTo$1.prototype,Oi);var Fi={x:0,y:0,z:0},Bi={x:0,y:0,z:0},Ni={},Yi={},Xi=[];class MoveTo extends SceneUpdateTickTask{constructor(t,i){super(t,i),this.moveToTask=new MoveTo$2(t,{tickingMode:0}),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.isRunning=GetValue$l(t,"isRunning",!1),this.setEnable(GetValue$l(t,"enable",!0)),this.timeScale=GetValue$l(t,"timeScale",1),this.setSpeed(GetValue$l(t,"speed",400)),this.destinationTileX=GetValue$l(t,"destinationTileX",null),this.destinationTileY=GetValue$l(t,"destinationTileY",null),this.destinationDirection=GetValue$l(t,"destinationDirection",null),this.lastMoveResult=GetValue$l(t,"lastMoveResult",void 0),this}toJSON(){return{isRunning:this.isRunning,enable:this.enable,timeScale:this.timeScale,speed:this.speed,moveableTest:this.moveableTestCallback,moveableTestScope:this.moveableTestScope,destinationTileX:this.destinationTileX,destinationTileY:this.destinationTileY,destinationDirection:this.destinationDirection,lastMoveResult:this.lastMoveResult,tickingMode:this.tickingMode}}shutdown(t){this.isShutdown||(this.moveToTask.shutdown(t),super.shutdown(t))}set enable(t){this.moveToTask.setEnable(t)}get enable(){return this.moveToTask.enable}setEnable(t){return null==t&&(t=!0),this.enable=t,this}get timeScale(){return this.moveToTask.timeScale}set timeScale(t){this.moveToTask.timeScale=t}set speed(t){this.moveToTask.setSpeed(t)}get speed(){return this.moveToTask.speed}setSpeed(t){return this.speed=t,this}moveAlongLine(t,i,n,r){return void 0!==t&&(this.parent.x=t),void 0!==i&&(this.parent.y=i),this.moveToTask.moveTo(n,r),this}update(t,i){if(!this.isRunning||!this.enable)return this;var n=this.moveToTask;return n.update(t,i),n.isRunning||this.complete(),this}}var Gi={canMoveTo:function(t,i,n){var r=this.parent,o=r.mainBoard;if(null==o)return!1;if(Fi.x=r.tileX,Fi.y=r.tileY,Bi.x=t,Bi.y=i,Bi.x===Fi.x&&Bi.y===Fi.y)return!0;if(r.pullOutFromMainBoard(),!r.canPutOnMainBoard(o,Bi.x,Bi.y))return r.putBack(),!1;if(this.moveableTestCallback){if(void 0===n&&(n=o.getNeighborTileDirection(Fi,Bi)),this.moveableTestScope)var a=this.moveableTestCallback.call(this.moveableTestScope,Fi,Bi,n,o);else a=this.moveableTestCallback(Fi,Bi,n,o);if(!a)return r.putBack(),!1}return r.putBack(),!0},moveTo:function(t,i,n){var r=this.parent,o=r.mainBoard;if(null==o)return this.lastMoveResult=!1,this;if(null!=t&&"number"!=typeof t){var a=t;t=GetValue$l(a,"x",void 0),i=GetValue$l(a,"y",void 0),n=GetValue$l(a,"direction",void 0)}(Ni.x=r.tileX,Ni.y=r.tileY,void 0!==n&&null==t||null==i)&&(null!==(h=o.getNeighborTileXY(Ni,n,!0))?(t=h.x,i=h.y):(t=null,i=null));if(null==t||null==i)return this.lastMoveResult=!1,this;if(void 0===n&&(Yi.x=t,Yi.y=i,n=board.getNeighborTileDirection(Ni,Yi)),!this.canMoveTo(t,i,n))return this.lastMoveResult=!1,this;this.destinationTileX=t,this.destinationTileY=i,this.destinationDirection=n;var h=o.tileXYToWorldXY(t,i,!0);return this.moveToTask.moveTo(h.x,h.y),r.putOnMainBoard(o,t,i,!1),this.isRunning=!0,this.lastMoveResult=!0,this},moveToward:function(t){return this.moveTo(void 0,void 0,t),this},moveToRandomNeighbor:function(){var t=this.parent.mainBoard;if(null==t)return this.lastMoveResult=!1,this;var i=t.grid.allDirections;Xi.length!==i.length&&Clone(i,Xi),Shuffle(Xi);for(var n=0,r=Xi.length;n<r;n++)if(this.moveToward(Xi[n]),this.lastMoveResult)return this;return this}};Object.assign(MoveTo.prototype,Gi),ObjectFactory$1.register("moveTo",(function(t,i){return new(IsMiniBoardObject(t)?MoveTo:MoveTo$1)(t,i)})),SetValue(window,"RexPlugins.Board.MoveTo",MoveTo$1),SetValue(window,"RexPlugins.Board.MiniBoardMoveTo",MoveTo);var Ui,Vi={tileXY:[],direction:void 0,pattern:void 0};class Queue{constructor(){this.data=[],this.visited={}}push(t,i){if(IsArray(t)){for(var n=t,r=0,o=n.length;r<o;r++)this.push(n[r]);return this}if(IsPlainObject(t)){var a=t;t=a.x,i=a.y}var h=`${t},${i}`;return this.visited.hasOwnProperty(h)||(this.data.push({x:t,y:i}),this.visited[h]=!0),this}pop(){return this.data.pop()}get length(){return this.data.length}clear(){return Clear(this.data),Clear(this.visited),this}}var zi={match:function(t,i,n,r){for(var o,a,h,d=this.board,f=d.grid.halfDirections,p=this.dirMask,T=d.width,b=d.height,S=0,A=f.length;S<A;S++)if(!1!==p[o=f[S]])for(var P=0;P<b;P++){for(var O=0;O<T;O++)if(!1!==(a=this.matchAtDir(t,O,P,o))){if(i&&(h=n?i.call(n,a,d):i(a,d)),r)return a;if(h)break}if(h)break}return this},matchAtDir:function(t,i,n,r){var o,a="number"==typeof t;a?(o=t,t=null):o=t.length;var h,d,f=this.wildcard,p=this.board,T=Vi.tileXY;T.length=0;for(var b=0;b<o;b++){if(void 0===d)d={x:i,y:n};else if(null===(d=p.getNeighborTileXY(d,r,d)))return!1;if(null==(h=this.getSymbol(d.x,d.y)))return!1;if(h!==f)if(a){if(null===t)t=h;else if(t!==h)return!1}else if(t[b]!==h)return!1;T.push({x:d.x,y:d.y})}return Vi.direction=r,Vi.pattern=t,Vi},group:function(t,i,n){void 0===n&&(n=[]);var r,o,a=this.board,h=this.wildcard,d=this.getSymbol(t,i);if(null==d||d===h)return n;for(void 0===Ui&&(Ui=new Queue),Ui.push(t,i);Ui.length;)r=Ui.pop(),(o=this.getSymbol(r.x,r.y))!==d&&o!==h||(n.push(r),Ui.push(a.getNeighborTileXY(r)));return Ui.clear(),n}};class Match{constructor(t){this.symbols=[],this.dirMask={},this.resetFromJSON(t),this.boot()}resetFromJSON(t){this.setBoard(GetValue$l(t,"board",void 0)),this.setWildcard(GetValue$l(t,"wildcard",void 0));var i=GetValue$l(t,"dirMask",void 0);return void 0!==i&&this.setDirMask(i),this}boot(){}shutdown(){return this.board=void 0,this.symbols=void 0,this.dirMask=void 0,this}destroy(){return this.shutdown(),this}setBoard(t){return this.board=t,t&&this.clearSymbols(),this}setDirMask(t,i){if(IsPlainObject(t)){var n=t;for(t in n)this.dirMask[t]=n[t]}else this.dirMask[t]=i;return this}setDirectionMode(t){return this.board.grid.setDirectionMode(t),this}clearSymbols(){return this.refreshSymbols(null),this}setSymbol(t,i,n){return this.board.contains(t,i)?(this.symbols[this.tileXYToKey(t,i)]=n,this):this}getSymbol(t,i){return this.symbols[this.tileXYToKey(t,i)]}forEach(t,i){for(var n,r,o=this.board,a=0,h=this.symbols.length;a<h&&(r=this.symbols[a],n=this.keyToTileXY(a),!(i?t.call(i,n,r,o):t(n,r,o)));a++);return this}refreshSymbols(t,i){var n,r,o,a=this.board,h=a.width,d=a.height;if(this.symbols.length=h*d,(o=t)&&"function"==typeof o)for(var f=0,p=this.symbols.length;f<p;f++)r=this.keyToTileXY(f,!0),n=i?t.call(i,r,a):t(r,a),this.symbols[f]=n;else{n=t;for(f=0,p=this.symbols.length;f<p;f++)this.symbols[f]=n}return this}setWildcard(t){return this.wildcard=t,this}tileXYToKey(t,i){return t+i*this.board.width}keyToTileXY(t,i){void 0===i?i={}:!0===i&&(i=Wi);var n=this.board.width;return i.x=t%n,i.y=Math.floor(t/n),i}anyMatch(t){return this.match(t,null,null,!0)}}var Wi={x:0,y:0};Object.assign(Match.prototype,zi),ObjectFactory$1.register("match",(function(t){return new Match(t)})),SetValue(window,"RexPlugins.Board.Match",Match);class Node{constructor(){this.preNodes=[],this.manager=void 0}reset(t){this.manager=t,this.sn=void 0,this.key=void 0,this.x=void 0,this.y=void 0,this.isTileXYZ=!0,this._px=void 0,this._py=void 0,this.cost=void 0,this.f=0,this.g=0,this.h=0,this.closerH=0,this.visited=!1,this.closed=!1,this.preNodes.length=0}destroy(){this.preNodes.length=0,this.manager=void 0}heuristic(t,i,n){if(null===i)return 0;var r,o=this.board.getDistance(t,this,!0)*this.pathFinder.weight;if(1===i&&void 0!==n){var a=t.angleTo(n)-this.angleTo(n);r=o+Math.abs(a)}else r=2===i?o+Math.random():o;return r}getNeighborNodes(){var t=this.board.getNeighborTileXY(this);this.pathFinder.shuffleNeighbors&&Shuffle(t);for(var i,n=[],r=0,o=t.length;r<o;r++)i=this.manager.getNode(t[r],!0),n.push(i);return n}getCost(t){return this.pathFinder.cacheCost?void 0===this.cost&&(this.cost=this.pathFinder.getCost(this,t)):this.cost=this.pathFinder.getCost(this,t),this.cost}angleTo(t){return Between$1(this.worldX,this.wroldY,t.worldX,t.wroldY)}get pathFinder(){return this.manager.pathFinder}get board(){return this.manager.pathFinder.board}get worldX(){return void 0===this._px&&(this._px=this.board.tileXYToWroldX(this.x,this.y)),this._px}get wroldY(){return void 0===this._py&&(this._py=this.board.tileXYToWroldY(this.x,this.y)),this._py}get pathCost(){return this.g}}var Hi=new class Stack{constructor(){this.items=[]}destroy(){this.clear(),this.items=void 0}pop(){return this.items.length>0?this.items.pop():null}push(t){return this.items.push(t),this}pushMultiple(t){return this.items.push.apply(this.items,t),t.length=0,this}clear(){return this.items.length=0,this}};class NodeCache{constructor(t){this.sn=0,this.pool=Hi,this.nodes={},this.pathFinder=t,this.closestNode=null}destroy(){return this.freeAllNodes(),this.pathFinder=null,this.pool=void 0,this}getNode(t,i,n){var r;switch(typeof t){case"number":r=TileXYToKey(t,i);break;case"string":r=t,n=i;break;default:var o=t;n=i,t=o.x,i=o.y,r=TileXYToKey(t,i)}if(void 0===n&&(n=!1),this.sn++,!this.nodes.hasOwnProperty(r)){if(!n)return null;var a=this.pool.pop();null===a&&(a=new Node),a.reset(this),a.sn=this.sn,a.key=r,a.x=t,a.y=i,this.nodes[r]=a}return this.nodes[r]}freeAllNodes(){this.closestNode=null;var t,i=this.nodes,n=this.pool;for(var r in i)(t=i[r]).destroy(),n.push(t),delete i[r];return this.sn=0,this}getAllNodes(){return this.nodes}}var ji={AREA_MODE:16,PATH_MODE:0,random:0,diagonal:1,straight:2,line:3,"A*":10,"A*-random":11,"A*-line":12,BLOCKER:null,INFINITY:void 0};const qi=ji.PATH_MODE,Zi=ji["A*"],Ki=ji["A*-line"],Ji=ji["A*-random"],Qi=ji.BLOCKER,$i=ji.INFINITY;var tn=new class BinaryHeap{constructor(t){this.content=[],this.scoreFunction=t}clear(){this.content.length=0}push(t){this.content.push(t),this.sinkDown(this.content.length-1)}pop(){var t=this.content[0],i=this.content.pop();return this.content.length>0&&(this.content[0]=i,this.bubbleUp(0)),t}remove(t){var i=this.content.indexOf(t),n=this.content.pop();i!==this.content.length-1&&(this.content[i]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(i):this.bubbleUp(i))}size(){return this.content.length}rescoreElement(t){this.sinkDown(this.content.indexOf(t))}sinkDown(t){for(var i=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(i)<this.scoreFunction(r)))break;this.content[n]=i,this.content[t]=r,t=n}}bubbleUp(t){for(var i=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var o,a=t+1<<1,h=a-1,d=null;if(h<i){var f=this.content[h];(o=this.scoreFunction(f))<r&&(d=h)}if(a<i){var p=this.content[a];this.scoreFunction(p)<(null===d?r:o)&&(d=a)}if(null===d)break;this.content[t]=this.content[d],this.content[d]=n,t=d}}}((function(t){return t.f}));const en=ji.BLOCKER;const nn=ji.AREA_MODE,sn=ji.INFINITY;const rn=ji.random,an=ji.diagonal,hn=ji.straight,ln=ji.line,un=ji["A*"],cn=ji["A*-line"],dn=ji["A*-random"];const fn=ji.PATH_MODE,pn=ji.INFINITY;var gn={aStarSearch:function(t,i,n,r){void 0===this.nodeManager&&(this.nodeManager=new NodeCache(this));var o=this.nodeManager;o.freeAllNodes();const a=r===qi,h=this.pathMode===Zi||this.pathMode===Ki||this.pathMode===Ji,d=a&&!h,f=a&&h?this.pathMode==Zi?0:this.pathMode==Ki?1:this.pathMode==Ji?2:null:null;var p,T=null!==i?o.getNode(i.x,i.y,!0):null,b=o.getNode(t.x,t.y,!0);for(b.h=b.heuristic(T,f),a&&((p=b).closerH=p.h||p.heuristic(T,0)),tn.push(b);tn.size()>0;){var S=tn.pop();if(a&&S===T){p=T;break}S.closed=!0;for(var A,P,O=S.getNeighborNodes(),L=0,D=O.length;L<D;++L)if(P=(A=O[L]).getCost(S),!A.closed&&P!==Qi){var I=S.g+P,F=A.visited;n!=$i&&I>n||(!F||I<A.g?(A.visited=!0,A.preNodes.length=0,A.preNodes.push(S),A.h=A.h||A.heuristic(T,f,b),A.g=I,A.f=A.g+A.h,a&&(A.closerH=A.h||A.heuristic(T,0),(A.closerH<p.closerH||A.closerH===p.closerH&&A.g<p.g)&&(p=A)),F?tn.rescoreElement(A):tn.push(A)):d&&I==A.g&&A.preNodes.push(S))}}return o.closestNode=a?p:null,tn.clear(),this},getCost:function(t,i){return this.occupiedTest&&this.board.contains(t.x,t.y,this.chessData.tileXYZ.z)||this.blockerTest&&this.board.hasBlocker(t.x,t.y)?en:(this.edgeBlockerTest,"number"==typeof this.costCallback?this.costCallback:(void 0===(n=this.costCallbackScope?this.costCallback.call(this.costCallbackScope,t,i,this):this.costCallback(t,i,this))&&(n=en),n));var n},findArea:function(t,i){if(void 0===i&&(i=[]),null===this.board)return i;if(t!==sn&&t<=0)return i;var n=this.chessData.tileXYZ,r=n.x,o=n.y;this.aStarSearch(n,null,t,nn);var a,h=this.nodeManager.getAllNodes(),d=[];for(var f in h)(a=h[f]).x===r&&a.y===o||a.closed&&d.push(a);d.sort((function(t,i){var n=t.sn,r=i.sn;return n>r?1:n<r?-1:0}));for(var p=0,T=d.length;p<T;p++)a=d[p],i.push({x:a.x,y:a.y,cost:a.g});return i},getPath:function(t,i){if(void 0===i&&(i=[]),void 0===this.board)return i;var n=this.nodeManager;if(void 0===n)return i;var r=n.getNode(this.chessData.tileXYZ,!1),o=n.getNode(t,!1);if(null===r||null===o)return i;for(var a,h=function(t,i,n){for(var r,o,a,h,d,f=t.board,p=i,T=[];p.preNodes.length>0;)switch(T.push(p),d=p.preNodes.length,n){case un:case cn:case dn:p=h=p.preNodes[0];break;case rn:p=h=1===d?p.preNodes[0]:p.preNodes[Between(0,d-1)];break;case an:for(var b=0;b<d;b++)if(h=p.preNodes[b],(o=f.getNeighborTileDirection(p,h))!==r){r=o;break}p=h;break;case hn:for(b=0;b<d&&(h=p.preNodes[b],(o=f.getNeighborTileDirection(p,h))!==r);b++);r=o,p=h;break;case ln:if(void 0===a&&(a=i.angleTo(t)),1===d)p=h=p.preNodes[0],a=i.angleTo(p);else{h=p.preNodes[0];var S,A=Math.abs(i.angleTo(h)-a);for(b=1;b<d;b++)S=p.preNodes[b],Math.abs(i.angleTo(S)-a)<A&&(h=S);p=h}}return T.reverse()}(r,o,this.pathMode),d=0,f=h.length;d<f;d++)a=h[d],i.push({x:a.x,y:a.y,cost:a.g});return i},findPath:function(t,i,n,r){if(void 0===n&&(n=!0),void 0===r&&(r=[]),null===this.board)return r;if(i!==pn&&i<=0)return r;var o=this.chessData.tileXYZ;this.aStarSearch(o,t,i,fn);var a=this.nodeManager,h=n?a.closestNode:a.getNode(t);return null===h?r:this.getPath(h,r)},tileXYToCost:function(t,i,n){if(void 0===this.nodeManager)return null;var r=this.nodeManager.getNode(t,i);return null===r?null:(void 0===n&&(n=!0),n?r.g:r.cost)}};const vn=ji.BLOCKER,mn=ji.INFINITY;class PathFinder extends ComponentBase{constructor(t,i){IsPlainObject(t)&&(i=t,t=void 0),super(t,{eventEmitter:!1}),this.setChess(t),this.nodeManager=void 0,this.resetFromJSON(i)}resetFromJSON(t){var i=GetValue$l(t,"costCallback",void 0),n=GetValue$l(t,"costCallbackScope",void 0);return void 0===i&&(i=GetValue$l(t,"cost",1)),this.setOccupiedTest(GetValue$l(t,"occupiedTest",!1)),this.setBlockerTest(GetValue$l(t,"blockerTest",!1)),this.setEdgeBlockerTest(GetValue$l(t,"edgeBlockerTest",!1)),this.setCostFunction(i,n),this.setPathMode(GetValue$l(t,"pathMode",0)),this.setCacheCostMode(GetValue$l(t,"cacheCost",!0)),this.setWeight(GetValue$l(t,"weight",10)),this.setShuffleNeighborsMode(GetValue$l(t,"shuffleNeighbors",!1)),this}shutdown(t){this.isShutdown||(void 0!==this.nodeManager&&this.nodeManager.destroy(),this.chessData=void 0,super.shutdown(t))}get gameObject(){return this.parent}setChess(t){return t?(this.chessData=GetChessData(t),this.parent!==t&&(this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.parent=t,this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this))):(this.parent=void 0,this.chessData=void 0),this}setCostFunction(t,i){return this.costCallback=t,this.costCallbackScope=i,this}setPathMode(t){return"string"==typeof t&&(t=ji[t]),this.pathMode=t,this}setCacheCostMode(t){return void 0===t&&(t=!0),this.cacheCost=t,this}setOccupiedTest(t){return void 0===t&&(t=!0),this.occupiedTest=t,this}setBlockerTest(t){return void 0===t&&(t=!0),this.blockerTest=t,this}setEdgeBlockerTest(t){return void 0===t&&(t=!0),this.edgeBlockerTest=t,this}setWeight(t){return this.weight=t,this}setShuffleNeighborsMode(t){return void 0===t&&(t=!0),this.shuffleNeighbors=t,this}get BLOCKER(){return vn}get INFINITY(){return mn}get board(){return this.chessData.board}}Object.assign(PathFinder.prototype,gn),ObjectFactory$1.register("pathFinder",(function(t,i){return new PathFinder(t,i)})),SetValue(window,"RexPlugins.Board.PathFinder",PathFinder);var yn=null,xn=void 0;const Tn=yn,wn=xn;const bn=xn;var drawLine=function(t,i,n,r,o,a){t&&void 0!==i&&t.lineStyle(1,i,1).lineBetween(n,r,o,a)},Sn=[],Mn=[],En=[],Cn={preTest:function(t,i){if(this.occupiedTest||this.blockerTest||this.edgeBlockerTest)for(var n,r=this.chessData.tileXYZ.z,o=1,a=t.length;o<a;o++){if(n=t[o],this.occupiedTest&&this.board.contains(n.x,n.y,r))return!1;if(this.blockerTest&&this.board.hasBlocker(n.x,n.y))return!1;this.edgeBlockerTest}return!this.preTestCallback||(this.preTestCallbackScope?this.preTestCallback.call(this.preTestCallbackScope,t,i,this):this.preTestCallback(t,i,this))},getCost:function(t,i){return"number"==typeof this.costCallback?this.costCallback:this.costCallbackScope?this.costCallback.call(this.costCallbackScope,t,this,i):this.costCallback(t,this,i)},isInCone:function(t){if(void 0===this.cone)return!0;var i=this.board,n=this.chessData.tileXYZ;return 0===this.coneMode?i.isDirectionInCone(n,t,this.face,this.cone):i.isAngleInCone(n,t,this.faceAngle,this.coneRad)},isPathVisible:function(t,i){if(!1===this.preTest(t,i))return!1;if(void 0===this.costCallback)return!0;for(var n,r,o=this.chessData.tileXYZ,a=!1,h=1,d=t.length;h<d;h++)if(n=t[h],!AreTileXYEqual(o,n)){if(a)return!1;if((r=this.getCost(n,t))!==Tn){if(i!==wn&&(i-=r)<0)return!1}else a=!0}return!0},isInLOS:function(t,i,n){if(i!==bn&&i<=0)return!1;var r=this.board,o=r.chessToTileXYZ(t);if(!this.isInCone(o))return!1;void 0===n&&(n=this.chessData.tileXYZ),this.debugLog&&console.log("Visible test from ("+n.x+","+n.y+") to ("+o.x+","+o.y+")");var a,h,d,f=r.tileXYToWorldXY(n.x,n.y,!0),p=f.x,T=f.y,b=(f=r.tileXYToWorldXY(o.x,o.y,!0)).x,S=f.y,A=Between$1(p,T,b,S);A+=Math.PI/2;var P=p+(a=.001*Math.cos(A)),O=T+(h=.001*Math.sin(A)),L=b+a,D=S+h;if(r.lineToTileXYArray(P,O,L,D,Sn),this.debugLog&&console.log("Line 0: "+JSON.stringify(Sn)),d=this.isPathVisible(Sn,i))return Sn.length=0,drawLine(this.debugGraphics,this.debugVisibleLineColor,p,T,b,S),!0;A+=Math.PI;P=p+(a=.001*Math.cos(A)),O=T+(h=.001*Math.sin(A)),L=b+a,D=S+h;return r.lineToTileXYArray(P,O,L,D,Mn),this.debugLog&&console.log("Line 1: "+JSON.stringify(Mn)),function(t,i){if(t.length!==i.length)return!1;for(var n=0,r=t.length;n<r;n++)if(!AreTileXYEqual(t[n],i[n]))return!1;return!0}(Sn,Mn)||(d=this.isPathVisible(Mn,i)),Sn.length=0,Mn.length=0,drawLine(this.debugGraphics,d?this.debugVisibleLineColor:this.debugInvisibleLineColor,p,T,b,S),d},LOS:function(t,i,n,r){if(IsArray(t)){IsPlainObject(i)?(r=n,n=i,i=void 0):IsArray(i)&&(r=i,i=void 0,n=void 0),IsArray(n)&&(r=n,n=void 0),void 0===r&&(r=[]);for(var o=0,a=t.length;o<a;o++)h=t[o],this.isInLOS(h,i,n)&&r.push(h);return r}var h=t;return this.isInLOS(h,i,n)},findFOV:function(t,i,n){IsPlainObject(t)?(n=i,i=t,t=void 0):IsArray(t)&&(n=t,i=void 0,t=void 0),IsArray(i)&&(n=i,i=void 0),void 0===n&&(n=[]);var r,o,a=this.board,h=this.chessData.tileXYZ,d=1;do{r=!1,a.ringToTileXYArray(h,d,En);for(var f=0,p=En.length;f<p;f++)o=En[f],this.isInLOS(o,t,i)&&(r=!0,n.push(o));d++,En.length=0}while(r);return n}};const An=yn,_n=xn;class FieldOfView extends ComponentBase{constructor(t,i){super(t,{eventEmitter:!1}),this.chessData=GetChessData(t),this.resetFromJSON(i)}resetFromJSON(t){var i=GetValue$l(t,"occupiedTest",!1),n=GetValue$l(t,"blockerTest",!1),r=GetValue$l(t,"edgeBlockerTest",!1),o=GetValue$l(t,"preTestCallback",void 0),a=GetValue$l(t,"preTestCallbackScope",void 0),h=GetValue$l(t,"costCallback",void 0),d=GetValue$l(t,"costCallbackScope",void 0);return void 0===h&&(h=GetValue$l(t,"cost",void 0)),this.setFace(GetValue$l(t,"face",0)),this.setConeMode(GetValue$l(t,"coneMode",0)),this.setCone(GetValue$l(t,"cone",void 0)),this.setOccupiedTest(i),this.setBlockerTest(n),this.setEdgeBlockerTest(r),this.setPreTestFunction(o,a),this.setCostFunction(h,d),this.setDebugGraphics(GetValue$l(t,"debug.graphics",void 0)),this.setDebugLineColor(GetValue$l(t,"debug.visibleLineColor",65280),GetValue$l(t,"debug.invisibleLineColor",16711680)),this.setDebugLog(GetValue$l(t,"debug.log",!1)),this}shutdown(t){this.isShutdown||(this.debugGraphics=void 0,this.chessData=void 0,super.shutdown(t))}get face(){return this._face}set face(t){if(t=this.board.grid.directionNormalize(t),this._face=t,0===this.coneMode);else{var i=this.board.angleToward(this.chessData.tileXYZ,t);this.faceAngle=Normalize(i)}}setFace(t){return this.face=t,this}get cone(){return this._cone}set cone(t){this._cone=t,void 0!==t&&(0===this.coneMode||(this.coneRad=DegToRad$3(t)))}setConeMode(t){return"string"==typeof t&&(t=Rn[t]),this.coneMode=t,this}setCone(t){return this.cone=t,this}setOccupiedTest(t){return void 0===t&&(t=!0),this.occupiedTest=t,this}setBlockerTest(t){return void 0===t&&(t=!0),this.blockerTest=t,this}setEdgeBlockerTest(t){return void 0===t&&(t=!0),this.edgeBlockerTest=t,this}setCostFunction(t,i){return this.costCallback=t,this.costCallbackScope=i,this}setPreTestFunction(t,i){return this.preTestCallback=t,this.preTestCallbackScope=i,this}setDebugGraphics(t){return this.debugGraphics=t,this}setDebugLineColor(t,i){return this.debugVisibleLineColor=t,this.debugInvisibleLineColor=i,this}setDebugLog(t){return void 0===t&&(t=!0),this.debugLog=t,this}clearDebugGraphics(){return this.debugGraphics&&this.debugGraphics.clear(),this}get BLOCKER(){return An}get INFINITY(){return _n}get board(){return this.chessData.board}}const Rn={direction:0,angle:1};Object.assign(FieldOfView.prototype,Cn),ObjectFactory$1.register("fieldOfView",(function(t,i){return new FieldOfView(t,i)})),SetValue(window,"RexPlugins.Board.FieldOfView",FieldOfView);var CreateTileData=function(t,i,n){return{x:t,y:i,direction:n}},Pn=-1;const On=Pn;var kn={getPath:function(t,i){if(void 0===i&&(i=[]),null===this.board)return i;for(var n,r,o=this.chessData.tileXYZ,a=CreateTileData(o.x,o.y,this.face);t>0&&null!==(n=this.getNextTile(a,this.preTileXY));)(r=this.getCost(n,a))===On&&(r=t),n.cost=r,t>=r&&i.push(n),t-=r,this.preTileXY=a,a=n;for(var h=i.length-1;h>=0&&0===i[h].cost;h--)i.length=h;return i},getNextTile:function(t,i){for(var n,r,o=this.board,a=o.grid.allDirections,h=null,d=null,f=[],p=null,T=0,b=a.length;T<b;T++)null!==(n=o.getNeighborTileXY(t,a[T],!0))&&o.contains(n.x,n.y,this.pathTileZ)&&(p=CreateTileData(n.x,n.y,a[T]),a[T]===t.direction&&(h=p),void 0!==i&&AreTileXYEqual(n,i)?d=p:f.push(p));if(null===d&&0===f.length)r=null;else if(null===d&&1===f.length)r=f[0];else if(null!==d&&0===f.length)r=d;else if(1===this.pickMode)null!==d&&f.push(d),r=GetRandom(f);else r=null!==h?h:GetRandom(f);return r},getCost:function(t,i){return"number"==typeof this.costCallback?this.costCallback:this.costCallbackScope?this.costCallback.call(this.costCallbackScope,t,i,this):this.costCallback(t,i,this)}};const Ln=null,Dn=Pn;class Monopoly extends ComponentBase{constructor(t,i){super(t,{eventEmitter:!1}),this.chessData=GetChessData(t),this.resetFromJSON(i)}resetFromJSON(t){this.preTileXY=GetValue$l(t,"preTileXY",void 0);var i=GetValue$l(t,"costCallback",void 0),n=GetValue$l(t,"costCallbackScope",void 0);return void 0===i&&(i=GetValue$l(t,"cost",1)),this.setFace(GetValue$l(t,"face",0)),this.setPathMode(GetValue$l(t,"pathMode",0)),this.setPathTileZ(GetValue$l(t,"pathTileZ",0)),this.setCostFunction(i,n),this}shutdown(t){this.isShutdown||(this.chessData=void 0,super.shutdown(t))}setFace(t){return t=this.board.grid.directionNormalize(t),this.face=t,this}setPathMode(t){return"string"==typeof t&&(t=In[t]),this.pathMode=t,this}setCostFunction(t,i){return this.costCallback=t,this.costCallbackScope=i,this}setPathTileZ(t){return void 0===t&&(t=!0),this.pathTileZ=t,this}get BLOCKER(){return Ln}get STOP(){return Dn}get board(){return this.chessData.board}}Object.assign(Monopoly.prototype,kn);const In={forward:0,random:1};ObjectFactory$1.register("monopoly",(function(t,i){return new Monopoly(t,i)})),SetValue(window,"RexPlugins.Board.Monopoly",Monopoly);const Fn=Phaser.GameObjects.Zone,Bn=Phaser.Utils.Array.Add,Nn=Phaser.Utils.Array.Remove;class Base extends Fn{constructor(t,i,n,r,o){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===o&&(o=1),super(t,i,n,r,o),this.children=[]}destroy(t){if(this.scene){if(t)for(var i,n=this.children.length-1;n>=0;n--)(i=this.children[n]).parentContainer||i.displayList||i.destroy(t);this.clear(!t),super.destroy(t)}}contains(t){return-1!==this.children.indexOf(t)}add(t){var i=this;return Bn(this.children,t,0,(function(t){t.once("destroy",i.onChildDestroy,i)}),this),this}remove(t,i){var n=this;return Nn(this.children,t,(function(t){t.off("destroy",n.onChildDestroy,n),i&&t.destroy()})),this}onChildDestroy(t,i){this.remove(t,!1)}clear(t){for(var i,n=0,r=this.children.length;n<r;n++)(i=this.children[n]).off("destroy",this.onChildDestroy,this),t&&i.destroy();return this.children.length=0,this}}const Yn=Phaser.GameObjects.Components;Phaser.Class.mixin(Base,[Yn.Alpha,Yn.Flip]);var GetParent=function(t,i){var n;if(void 0===i)t.hasOwnProperty("rexContainer")&&(n=t.rexContainer.parent);else for(n=GetParent(t);n&&n.name!==i;)n=GetParent(n);return n};const Xn=Phaser.Math.DegToRad,Gn=Phaser.Math.RadToDeg;var GetLocalState=function(t){if(!t.hasOwnProperty("rexContainer")){var i={parent:null,self:null,x:0,y:0,syncPosition:!0,rotation:0,syncRotation:!0,scaleX:0,scaleY:0,syncScale:!0,alpha:0,syncAlpha:!0,visible:!0,active:!0};Object.defineProperty(i,"angle",{get:function(){return Gn(this.rotation)},set:function(t){this.rotation=Xn(t)}}),Object.defineProperty(i,"displayWidth",{get:function(){return t.width*this.scaleX},set:function(i){this.scaleX=i/t.width}}),Object.defineProperty(i,"displayHeight",{get:function(){return t.height*this.scaleY},set:function(i){this.scaleY=i/t.height}}),t.rexContainer=i}return t.rexContainer},Un={setParent(t,i){void 0===i&&(i=this);var n=GetLocalState(t);return i?(n.parent=i,n.self=t):(n.parent=null,n.self=null),this},getParent(t,i){return"string"==typeof t&&(i=t,t=void 0),void 0===t&&(t=this),GetParent(t,i)},getTopmostParent(t){return void 0===t&&(t=this),function(t){for(var i=GetParent(t);i;)t=i,i=GetParent(i);return t}(t)}};const Vn=Phaser.Utils.Objects.GetValue,zn=Base.prototype.add;var Add=function(t,i){this.setParent(t);var n=GetLocalState(t);return SetupSyncFlags(n,i),this.resetChildState(t).updateChildVisible(t).updateChildActive(t).updateChildScrollFactor(t).updateChildMask(t),zn.call(this,t),this},AddLocal=function(t,i){this.setParent(t);var n=GetLocalState(t);return SetupSyncFlags(n,i),n.x=t.x,n.y=t.y,n.rotation=t.rotation,n.scaleX=t.scaleX,n.scaleY=t.scaleY,n.alpha=t.alpha,n.visible=t.visible,n.active=t.active,this.updateChildPosition(t).updateChildAlpha(t).updateChildVisible(t).updateChildActive(t).updateChildScrollFactor(t).updateChildMask(t),zn.call(this,t),this},SetupSyncFlags=function(t,i){t.syncPosition=Vn(i,"syncPosition",!0),t.syncRotation=Vn(i,"syncRotation",!0),t.syncScale=Vn(i,"syncScale",!0),t.syncAlpha=Vn(i,"syncAlpha",!0)},Wn={add(t){return Array.isArray(t)?this.addMultiple(t):Add.call(this,t),this},pin(t,i){return Array.isArray(t)?this.addMultiple(t,i):Add.call(this,t,i),this},addMultiple(t){for(var i=0,n=t.length;i<n;i++)Add.call(this,t[i]);return this},addLocal(t){return Array.isArray(t)?this.addMultiple(t):AddLocal.call(this,t),this},pinLocal(t,i){return Array.isArray(t)?this.addMultiple(t,i):AddLocal.call(this,t,i),this},addLocalMultiple(t){for(var i=0,n=t.length;i<n;i++)AddLocal.call(this,t[i]);return this}};const Hn=Base.prototype.remove,jn=Base.prototype.clear;var qn={remove(t,i){return GetParent(t)!==this||(this.setParent(t,null),Hn.call(this,t,i)),this},clear(t){for(var i=0,n=this.children.length;i<n;i++)this.setParent(this.children[i],null);return jn.call(this,t),this}},Zn={getLocalState:t=>GetLocalState(t),resetChildState(t){return this.resetChildPositionState(t).resetChildVisibleState(t).resetChildAlphaState(t).resetChildActiveState(t),this},resetChildrenState(t){for(var i=0,n=t.length;i<n;i++)this.resetChildState(t[i]);return this},syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}};const Kn=Phaser.Math.RotateAround;var Jn={worldToLocal(t){return t.x-=this.x,t.y-=this.y,Kn(t,0,0,-this.rotation),t.x/=this.scaleX,t.y/=this.scaleY,t},localToWorld(t){return t.x*=this.scaleX,t.y*=this.scaleY,Kn(t,0,0,this.rotation),t.x+=this.x,t.y+=this.y,t}},GetScale=function(t,i){return t===i?1:t/i},Qn={updateChildPosition(t){t.isRexContainerLite&&(t.syncChildrenEnable=!1);var i=GetLocalState(t),n=i.parent;return i.syncPosition&&(t.x=i.x,t.y=i.y,n.localToWorld(t)),i.syncRotation&&(t.rotation=i.rotation+n.rotation),i.syncScale&&(t.scaleX=i.scaleX*n.scaleX,t.scaleY=i.scaleY*n.scaleY),t.isRexContainerLite&&(t.syncChildrenEnable=!0,t.syncPosition()),this},syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState(t){var i=GetLocalState(t),n=i.parent;return i.x=t.x,i.y=t.y,n.worldToLocal(i),i.scaleX=GetScale(t.scaleX,n.scaleX),i.scaleY=GetScale(t.scaleY,n.scaleY),i.rotation=t.rotation-n.rotation,this},setChildPosition(t,i,n){return t.x=i,t.y=n,this.resetChildPositionState(t),this},setChildLocalPosition(t,i,n){var r=GetLocalState(t);return r.x=i,r.y=n,this.updateChildPosition(t),this},resetLocalPositionState(){var t=GetLocalState(this).parent;return t&&t.resetChildPositionState(this),this}};const $n=Phaser.Math.DegToRad;var ts={updateChildRotation(t){var i=GetLocalState(t),n=i.parent;return i.syncRotation&&(t.rotation=n.rotation+i.rotation),this},syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState(t){var i=GetLocalState(t),n=i.parent;return i.rotation=t.rotation-n.rotation,this},setChildRotation(t,i){return t.rotation=i,this.resetChildRotationState(t),this},setChildAngle(t,i){return t.angle=i,this.resetChildRotationState(t),this},setChildLocalRotation(t,i){return GetLocalState(t).rotation=i,this.updateChildRotation(t),this},setChildLocalAngle(t,i){return GetLocalState(t).rotation=$n(i),this.updateChildRotation(t),this},resetLocalRotationState(){var t=GetLocalState(this).parent;return t&&t.resetChildRotationState(this),this}},es={updateChildScale(t){var i=GetLocalState(t),n=i.parent;return i.syncScale&&(t.scaleX=n.scaleX*i.scaleX,t.scaleY=n.scaleY*i.scaleY),this},syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState(t){var i=GetLocalState(t),n=i.parent;return i.scaleX=GetScale(t.scaleX,n.scaleX),i.scaleY=GetScale(t.scaleY,n.scaleY),this},setChildScale(t,i,n){return void 0===n&&(n=i),t.scaleX=i,t.scaleY=n,this.resetChildScaleState(t),this},setChildLocalScale(t,i,n){void 0===n&&(n=i);var r=GetLocalState(t);return r.scaleX=i,r.scaleY=n,this.updateChildScale(t),this},setChildDisplaySize(t,i,n){return t.setDisplaySize(i,n),this.resetChildScaleState(t),this},resetLocalScaleState(){var t=GetLocalState(this).parent;return t&&t.resetChildScaleState(this),this}},is={updateChildVisible(t){var i=GetLocalState(t),n=i.parent,r=!i.hasOwnProperty("maskVisible")||i.maskVisible;return t.visible=n.visible&&i.visible&&r,this},syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState(t){var i=GetLocalState(t);return i.hasOwnProperty("maskVisible")&&delete i.maskVisible,i.visible=t.visible,this},setChildVisible(t,i){return this.setChildLocalVisible(t,i),this},setChildLocalVisible(t,i){return void 0===i&&(i=!0),GetLocalState(t).visible=i,this.updateChildVisible(t),this},setChildMaskVisible(t,i){return void 0===i&&(i=!0),GetLocalState(t).maskVisible=i,this.updateChildVisible(t),this},resetLocalVisibleState(){var t=GetLocalState(this).parent;return t&&t.resetChildVisibleState(this),this}},ns={updateChildAlpha(t){var i=GetLocalState(t),n=i.parent;return i.syncAlpha&&(t.alpha=n.alpha*i.alpha),this},syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState(t){var i=GetLocalState(t),n=i.parent;return i.alpha=GetScale(t.alpha,n.alpha),this},setChildAlpha(t,i){return t.alpha=i,this.resetChildAlphaState(t),this},setChildLocalAlpha(t,i){return GetLocalState(t).alpha=i,this.updateChildAlpha(t),this},resetLocalAlphaState(){var t=GetLocalState(this).parent;return t&&t.resetChildAlphaState(this),this}},ss={updateChildActive(t){var i=GetLocalState(t),n=i.parent;return t.active=n.active&&i.active,this},syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState(t){return GetLocalState(t).active=t.active,this},setChildActive(t,i){return t.active=i,this.resetChildActiveState(t),this},setChildLocalActive(t,i){return void 0===i&&(i=!0),GetLocalState(t).active=i,this.updateChildActive(t),this},resetLocalActiveState(){var t=GetLocalState(this).parent;return t&&t.resetChildActiveState(this),this}},rs={updateChildScrollFactor(t){var i=GetLocalState(t).parent;return t.setScrollFactor(i.scrollFactorX,i.scrollFactorY),this},syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},os={updateChildMask(t){return null==this.mask||(this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask)!==t&&(t.mask=this.mask),this},syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask(t){return this.mask=t,this},clearMask(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this}},SortGameObjectsByDepth=function(t,i){if(0===t.length)return t;void 0===i&&(i=!1);var n=t[0].scene.sys.displayList;return n.depthSort(),i?t.sort((function(t,i){return n.getIndex(i)-n.getIndex(t)})):t.sort((function(t,i){return n.getIndex(t)-n.getIndex(i)})),t},as={setDepth(t,i){if(this.depth=t,!i&&this.children)for(var n=this.getAllChildren(),r=0,o=n.length;r<o;r++)n[r].depth=t;return this},swapDepth(t){var i=this.depth,n=t.depth;return this.setDepth(n),t.setDepth(i),this},incDepth(t){if(this.depth+=t,this.children)for(var i=this.getAllChildren(),n=0,r=i.length;n<r;n++)i[n].depth+=t;return this},moveDepthBelow(t){var i=t.scene.children,n=this.getAllChildren([this]);SortGameObjectsByDepth(n);for(var r=0,o=n.length;r<o;r++){var a=n[r];if(i.exists(a)){i.moveBelow(t,a);break}}return this},moveDepthAbove(t){var i=t.scene.children,n=this.getAllChildren([this]);SortGameObjectsByDepth(n,!0);for(var r=0,o=n.length;r<o;r++){var a=n[r];if(i.exists(a)){i.moveAbove(t,a);break}}return this}},DepthFirstSearch=function(t,i){if(!i(t)&&t.isRexContainerLite)for(var n=t.children,r=0,o=n.length;r<o;r++)DepthFirstSearch(n[r],i)},BreadthFirstSearch=function(t,i){for(var n=[t];n.length>0;){var r=n.shift();!i(r)&&r.isRexContainerLite&&n.push(...r.children)}};const hs=Phaser.Utils.Array;var ls={getChildren(t){if(t)for(var i=0,n=this.children.length;i<n;i++)t.push(this.children[i]);else t=this.children;return t},getAllChildren(t){void 0===t&&(t=[]);var i=this;return BreadthFirstSearch(i,(function(n){n!==i&&t.push(n)})),t},getAllVisibleChildren(t){void 0===t&&(t=[]);var i=this;return BreadthFirstSearch(i,(function(n){if(n!==i)return!n.visible||void t.push(n)})),t},bfs(t,i){return void 0===i&&(i=this),BreadthFirstSearch(i,t),this},dfs(t,i){return void 0===i&&(i=this),DepthFirstSearch(i,t),this},contains(t){var i=GetParent(t);return!!i&&(i===this||this.contains(i))},getByName(t,i){if(i){for(var n,r,o=[this];o.length;)for(var a=0,h=(n=o.shift()).children.length;a<h;a++){if((r=n.children[a]).name===t)return r;r.isRexContainerLite&&o.push(r)}return null}return hs.GetFirst(this.children,"name",t)},getRandom(t,i){return hs.GetRandom(this.children,t,i)},getFirst(t,i,n,r){return hs.GetFirstElement(this.children,t,i,n,r)},getAll(t,i,n,r){return hs.GetAll(this.children,t,i,n,r)},count(t,i,n,r){return hs.CountAllMatching(this.children,t,i,n,r)},swap(t,i){return hs.Swap(this.children,t,i),this},setAll(t,i,n,r){return hs.SetAll(this.children,t,i,n,r),this}},GetLocalStates=function(t){for(var i=[],n=0,r=t.length;n<r;n++){var o=t[n];o.hasOwnProperty("rexContainer")&&i.push(o.rexContainer)}return i},UpdateChild=function(t,i,n){if(n.parent){var r=n.parent,o=n.self;switch(i){case"x":case"y":r.updateChildPosition(o);break;case"angle":case"rotation":r.updateChildRotation(o);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":r.updateChildScale(o);break;case"alpha":r.updateChildAlpha(o);break;default:r.updateChildPosition(o),r.updateChildRotation(o),r.updateChildScale(o),r.updateChildAlpha(o)}}else t.remove()},us={tweenChild(t){var i=t.targets;Array.isArray(i)||(i=[i]);var n=this.scene||function(t){for(var i=0,n=t.length;i<n;i++){var r=t[i].scene;if(r)return r}return null}(i);if(n){t.targets=GetLocalStates(i);var r=n.tweens.add(t);return r.on("update",UpdateChild),r}},createTweenChildConfig(t){var i=t.targets;i&&(Array.isArray(i)||(i=[i]),t.targets=GetLocalStates(i));var n=t.onUpdate;return t.onUpdate=function(t,i){n&&n(t,i),UpdateChild(t,void 0,i)},t},tween(t){var i=this.scene;return t.targets||(t.targets=this),i.tweens.add(t)},timelineChild(t){var i=t.targets;i&&(Array.isArray(i)||(i=[i]),t.targets=GetLocalStates(i));for(var n=t.tweens,r=0,o=n.length;r<o;r++)n[r]=this.createTweenChildConfig(n[r]);return this.scene.tweens.timeline(t)}},AddToLayer=function(t){var i=this.getAllChildren([this]);return SortGameObjectsByDepth(i),t.add(i),this},cs={addToLayer:AddToLayer,addToContainer:AddToLayer};const ds=Phaser.Math.RotateAround;var fs={changeOrigin:function(t,i){this.syncChildrenEnable=!1,function(t,i,n){void 0===n&&(n=i);var r={x:(i-t.originX)*t.displayWidth,y:(n-t.originY)*t.displayHeight};ds(r,0,0,t.rotation),t.originX=i,t.originY=n,t.x=t.x+r.x,t.y=t.y+r.y}(this,t,i),this.syncChildrenEnable=!0;for(var n=this.getAllChildren(),r=0,o=n.length;r<o;r++)this.resetChildPositionState(n[r]);return this}};Object.assign(fs,Un,Wn,qn,Zn,Jn,Qn,ts,es,is,ns,ss,rs,os,as,ls,us,cs);class ContainerLite extends Base{constructor(t,i,n,r,o,a){super(t,i,n,r,o),this.type="rexContainerLite",this.isRexContainerLite=!0,this.syncChildrenEnable=!0,this._active=!0,this._mask=null,this._scrollFactorX=1,this._scrollFactorY=1,a&&this.add(a)}destroy(t){this.scene&&(this.syncChildrenEnable=!1,super.destroy(t))}resize(t,i){return this.setSize(t,i),this}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.syncPosition())}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.syncPosition())}get rotation(){return super.rotation}set rotation(t){this.rotation!==t&&(super.rotation=t,this.syncPosition())}get scaleX(){return super.scaleX}set scaleX(t){this.scaleX!==t&&(super.scaleX=t,this.syncPosition())}get scaleY(){return super.scaleY}set scaleY(t){this.scaleY!==t&&(super.scaleY=t,this.syncPosition())}get scale(){return super.scale}set scale(t){this.scale!==t&&(super.scale=t,this.syncPosition())}get visible(){return super.visible}set visible(t){super.visible!==t&&(super.visible=t,this.syncVisible())}get alpha(){return super.alpha}set alpha(t){super.alpha!==t&&(super.alpha=t,this.syncAlpha())}get active(){return this._active}set active(t){this._active!==t&&(this._active=t,this.syncActive())}get mask(){return this._mask}set mask(t){this._mask!==t&&(this._mask=t,this.syncMask())}get scrollFactorX(){return this._scrollFactorX}set scrollFactorX(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}get scrollFactorY(){return this._scrollFactorY}set scrollFactorY(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}get list(){return this.children}static GetParent(t){return GetParent(t)}}Object.assign(ContainerLite.prototype,fs);var ps={x:0,y:0,z:0},OnPointerDown=function(t){this.input.enable&&(t.isDown&&(null===this.input.pointer&&(this.input.pointer=t),OnTouchTileStart.call(this,t)&&OnDragStart.call(this,t)))},OnTouchTileStart=function(t){var i=this.grid;i.saveOrigin(),i.setOriginPosition(this.x,this.y);var n=this.board.worldXYToTileXY(t.x,t.y,!0),r=n.x,o=n.y;i.restoreOrigin(),this.input.tilePosition.x=r,this.input.tilePosition.y=o;var a=this.board.tileXYToChessArray(r,o,gs),h=a.length>0;if(h){for(var d,f=0,p=a.length;f<p;f++)(d=a[f]).emit&&d.emit("miniboard.pointerdown",t),this.emit("gameobjectdown",t,d);this.emit("pointerdown",t,this)}return gs.length=0,h},OnDragStart=function(t){var i=this.input.drag;if(1!==i.state){var n=i.position;n.x=t.x-this.x,n.y=t.y-this.y,i.state=1,this.emit("dragstart",t,n.x,n.y)}},gs=[],DragEnd=function(t){var i=this.input.drag;if(0!==i.state){void 0===t&&(t=this.input.pointer);var n=i.position,r=t.x-n.x,o=t.y-n.y;return i.state=0,this.emit("dragend",t,r,o),this}},OnPointerUp=function(t){this.input.enable&&(OnTouchTileEnd.call(this,t),DragEnd.call(this,t),this.input.pointer===t&&(this.input.pointer=null))},OnTouchTileEnd=function(t){var i=this.grid;i.saveOrigin(),i.setOriginPosition(this.x,this.y);var n=this.board.worldXYToTileXY(t.x,t.y,!0),r=n.x,o=n.y;i.restoreOrigin(),this.input.tilePosition.x=r,this.input.tilePosition.y=o;var a=this.board.tileXYToChessArray(r,o,vs),h=a.length>0;if(h){for(var d,f=0,p=a.length;f<p;f++)(d=a[f]).emit&&d.emit("miniboard.pointerup",t),this.emit("gameobjectup",t,d);this.emit("pointerup",t,this)}return vs.length=0,h},vs=[],OnPointerMove=function(t){this.input.enable&&(OnTouchTileMove.call(this,t),OnDrag.call(this,t))},OnTouchTileMove=function(t){var i=this.grid;i.saveOrigin(),i.setOriginPosition(this.x,this.y);var n=this.board.worldXYToTileXY(t.x,t.y,!0),r=n.x,o=n.y;if(i.restoreOrigin(),this.input.tilePosition.x!==r||this.input.tilePosition.y!==o){this.input.tilePosition.x=r,this.input.tilePosition.y=o;var a=this.board.tileXYToChessArray(r,o,ms),h=a.length>0;if(h){for(var d,f=0,p=a.length;f<p;f++)(d=a[f]).emit&&d.emit("miniboard.pointermove",t),this.emit("gameobjectmove",t,d);this.emit("pointermove",t,this)}else this.input.pointer===t&&(this.input.pointer=null);ms.length=0,0===this.input.drag.state&&(this.input.pointer===t?h||(this.input.pointer=null):null===this.input.pointer&&(this.input.pointer=t))}},OnDrag=function(t){var i=this.input.drag;if(0!==i.state){var n=i.position,r=t.x-n.x,o=t.y-n.y;this.emit("drag",t,r,o)}},ms=[],Mirror$1=function(t,i,n){var r,o;for(var a in void 0===t?t=1:"string"==typeof t&&(t=ys[t]),void 0===i&&(i=this.tileXYZMap),void 0===n&&(n={}),i)r=i[a],(o=this.board.mirror(r,t)).z=r.z,n[a]=o;return n};const ys={x:1,y:2,"x&y":3};var ResetChessTileXYZ=function(t){var i;for(var n in this.removeAllChess(),t)i=t[n],n=parseInt(n),this.addChess(n,i.x,i.y,i.z,!1);return this},Rotate$2=function(t,i,n){var r,o;for(var a in void 0===t&&(t=0),void 0===i&&(i=this.tileXYZMap),void 0===n&&(n={}),i)r=i[a],(o=this.board.rotate(r,t)).z=r.z,n[a]=o;return n},GetMinMaxTileXY=function(t,i){void 0===t&&(t=this.tileXYZMap),void 0===i?i={}:!0===i&&(i=xs);var n,r=1/0,o=-1/0,a=1/0,h=-1/0;for(var d in this.tileXYZMap)(n=this.tileXYZMap[d]).x<r&&(r=n.x),n.x>o&&(o=n.x),n.y<a&&(a=n.y),n.y>h&&(h=n.y);return i.minX=r,i.minY=a,i.maxX=o,i.maxY=h,i},xs={},Offset=function(t,i,n,r){var o,a;for(var h in void 0===n&&(n=this.tileXYZMap),void 0===r&&(r={}),n)o=n[h],(a=this.board.offset(o,t,i)).z=o.z,r[h]=a;return r},Ts={addChess:function(t,i,n,r){var o=this.grid;return o.saveOrigin(),o.setOriginPosition(this.x,this.y),this.board.addChess(t,i,n,r,!0),IsUID(t)&&(t=this.board.uidToChess(t)),this.add(t),o.restoreOrigin(),this},removeChess:function(t,i,n,r,o){return this.board.removeChess(t,i,n,r,o),this},removeAllChess:function(t){return this.board.removeAllChess(t),this},pullOutFromMainBoard:function(){var t=this.mainBoard;if(null===t)return this;var i=this.tileXYZMap;for(var n in i)t.removeChess(parseInt(n));return this.setMainBoard(null),this},canPutOnMainBoard:function(t,i,n,r){if(!t)return!1;var o,a,h;for(var d in void 0===r&&(r=this.tileXYZMap),r){if(o=r[d],a=t.offset(o,i,n,!0),!t.contains(a.x,a.y))return!1;if(this.putTestCallback){ps.x=a.x,ps.y=a.x,ps.z=o.z;var f=this.board.uidToChess(d);h=this.putTestCallbackScpe?this.putTestCallback.call(this.putTestCallbackScpe,ps,t,f):this.putTestCallback(ps,t,f)}else h=t.contains(a.x,a.y,o.z);if(h)return!1}return!0},putOnMainBoard:function(t,i,n,r){if(!t)return this;if(void 0===i){var o=t.worldXYToTileXY(this.x,this.y,!0);i=o.x,n=o.y}if(void 0===r&&(r=!0),this.pullOutFromMainBoard(),!this.canPutOnMainBoard(t,i,n))return this;this.setMainBoard(t,i,n);var a,h,d=this.tileXYZMap;for(var f in d)a=d[f],f=parseInt(f),h=t.offset(a,i,n,!0),t.addChess(f,h.x,h.y,a.z,!1);return r&&this.alignToMainBoard(t,i,n),this},putBack:function(){var t=this.lastMainBoardRef.mainBoard,i=this.lastMainBoardRef.tileX,n=this.lastMainBoardRef.tileY;return this.putOnMainBoard(t,i,n,!1),this},isOverlapping:function(t,i){if(!t)return!1;var n;for(var r in this.tileXYZMap)if(n=this.board.uidToChess(r),t.isOverlappingPoint(n.x,n.y,i))return!0;return!1},alignToMainBoard:function(t,i,n){if(!t)return this;if(void 0===i){var r=t.worldXYToTileXY(this.x,this.y,!0);i=r.x,n=r.y}return t.gridAlign(this,i,n),this},setInteractive:function(t){return void 0===t&&(t=!0),this.input||(this.input={enable:!0,tilePosition:{x:void 0,y:void 0},pointer:void 0,drag:{enable:!1,state:0,position:{x:void 0,y:void 0}}},this.scene.input.on("pointerdown",OnPointerDown,this),this.scene.input.on("pointerup",OnPointerUp,this),this.scene.input.on("pointermove",OnPointerMove,this),this.once("destroy",(function(){this.scene&&(this.scene.input.off("pointerdown",OnPointerDown,this),this.scene.input.off("pointerup",OnPointerUp,this),this.scene.input.off("pointermove",OnPointerMove,this))}),this)),this.input.enable=t,t||(this.input.pointer=null),this},setDraggable:function(t){return void 0===t&&(t=!0),this.setInteractive(),this.input.drag.enable=t,t||(this.input.drag.state=0),this},dragEnd:DragEnd,setMainBoard:function(t,i,n){return this.mainBoardRef.set(t,i,n),t&&this.lastMainBoardRef.set(t,i,n),this},canMirror:function(t){if(null===this.mainBoard)return!0;var i=Mirror$1.call(this,t);return this.canPutOnMainBoard(this.mainBoard,tileX,tileY,i)},mirror:function(t){var i=null!=this.mainBoard;i&&this.pullOutFromMainBoard();var n=Mirror$1.call(this,t);if(i){var r=this.lastMainBoardRef.mainBoard,o=this.lastMainBoardRef.tileX,a=this.lastMainBoardRef.tileY;this.lastTransferResult=this.canPutOnMainBoard(r,o,a,n),this.lastTransferResult&&ResetChessTileXYZ.call(this,n),this.putBack()}else this.lastTransferResult=!0,ResetChessTileXYZ.call(this,n);return this},canRotate:function(t){if(null===this.mainBoard)return!0;var i=Rotate$2.call(this,t);return this.canPutOnMainBoard(this.mainBoard,tileX,tileY,i)},rotate:function(t){if(0===t)return this;var i=null!=this.mainBoard;i&&this.pullOutFromMainBoard();var n=Rotate$2.call(this,t);if(i){var r=this.lastMainBoardRef.mainBoard,o=this.lastMainBoardRef.tileX,a=this.lastMainBoardRef.tileY;this.lastTransferResult=this.canPutOnMainBoard(r,o,a,n),this.lastTransferResult&&ResetChessTileXYZ.call(this,n),this.putBack()}else this.lastTransferResult=!0,ResetChessTileXYZ.call(this,n);return this.lastTransferResult&&this.setFace(this.face+t),this},canRotateTo:function(t){return t-=this.face,this.canRotate(t)},rotateTo:function(t){return t-=this.face,this.rotate(t),this},setOrigin:function(t,i){switch(t){case"center":t=.5,i=.5;break;case"top-left":case"left-top":t=0,i=0}void 0===t&&(t=.5),void 0===i&&(i=t);var n=GetMinMaxTileXY.call(this,void 0,!0),r=-Math.floor(Linear$1(n.minX,n.maxX,t)),o=-Math.floor(Linear$1(n.minY,n.maxY,i));if(0!==r||0!==o){var a=Offset.call(this,r,o);ResetChessTileXYZ.call(this,a);var h=this.board.tileXYToWorldXY(r,o),d=this.board.tileXYToWorldXY(0,0);this.setPosition(this.x+(d.x-h.x),this.y+(d.y-h.y))}return this}};class MainBoardReference{constructor(t){this.miniBoard=t,this.set(null)}set(t,i,n){t||(t=null,i=null,n=null),this.mainBoard=t,this.tileX=i,this.tileY=n}}class MiniBoard extends ContainerLite{constructor(t,i,n,r){super(t,i,n,0,0),this.type="rexMiniBoard";var o={isBoard:!1,grid:GetValue$l(r,"grid",void 0),infinity:!0,wrap:!1};this.board=new Board$1(t,o),this.mainBoardRef=new MainBoardReference,this.lastMainBoardRef=new MainBoardReference,this.resetFromJSON(r)}resetFromJSON(t){this.setFace(GetValue$l(t,"face",0));var i=GetValue$l(t,"draggable",void 0);return void 0!==i&&this.setDraggable(i),this.setPutTestCallback(GetValue$l(t,"putTestCallback",void 0),GetValue$l(t,"putTestCallbackScpe",void 0)),this.lastTransferResult=GetValue$l(t,"lastTransferResult",void 0),this}destroy(t){this.scene&&(this.clear(!t),this.board.shutdown(t),this.board=void 0,this.setPutTestCallback(void 0,void 0),super.destroy(t))}setFace(t){return this.face=this.board.grid.directionNormalize(t),this}get mainBoard(){return this.mainBoardRef.mainBoard}get tileX(){return this.mainBoardRef.tileX}get tileY(){return this.mainBoardRef.tileY}get grid(){return this.board.grid}get tileXYZMap(){return this.board.boardData.UIDToXYZ}setPutTestCallback(t,i){return this.putTestCallback=t,this.putTestCallbackScpe=i,this}}Object.assign(MiniBoard.prototype,Ts),ObjectFactory$1.register("miniBoard",(function(t,i,n){var r=new MiniBoard(this.scene,t,i,n);return this.scene.add.existing(r),r})),SetValue(window,"RexPlugins.Board.MiniBoard",MiniBoard);var ws={hexagon:function(t,i,n){void 0===n&&(n=[]);for(var r,o,a=t.grid.mode,h=-i;h<=i;h++){r=Math.max(-i,-h-i),o=Math.min(i,-h+i);for(var d=r;d<=o;d++)n.push(cube2cr(a,h,0,-h-d))}return n},triangle:function(t,i,n,r){void 0===r&&(r=[]);for(var o,a,h=t.grid.mode,d=0;d<=n;d++){1===i?(o=n-d,a=n):(o=0,a=n-d);for(var f=o;f<=a;f++)r.push(cube2cr(h,d,0,-d-f))}return r},parallelogram:function(t,i,n,r,o){void 0===o&&(o=[]);var a=t.grid.mode;switch(i){case 1:for(var h=0;h<=n;h++)for(var d=0;d<=r;d++)o.push(cube2cr(a,d,0,h));break;case 2:for(var f=0;f<=n;f++)for(h=0;h<=r;h++)o.push(cube2cr(a,-f-h,0,h));break;default:for(d=0;d<=n;d++)for(f=0;f<=r;f++)o.push(cube2cr(a,d,0,-d-f))}return o}};const bs=Phaser.Utils.String.Pad;var GetStyle=function(t,i,n){if(null==t)return t;switch(typeof t){case"string":default:return t;case"number":return`#${bs(Math.floor(t).toString(16),6,"0",1)}`;case"function":return t(i,n);case"object":return t.hasOwnProperty("r")?t.hasOwnProperty("a")?`rgba(${t.r},${t.g},${t.b},${t.a})`:`rgb(${t.r},${t.g},${t.b})`:t.hasOwnProperty("h")?t.hasOwnProperty("a")?`hsla(${t.h},${t.s},${t.l},${t.a})`:`hsl(${t.h},${t.s},${t.l})`:t}},Indent=function(t,i,n){return t<i?t+n:t>i?t-n:t},CreateTileTexture=function(t,i,n,r,o,a){void 0===a&&(a="miter"),function(t,i,n,r,o,a,h){void 0===r&&void 0===o&&(r=16777215),void 0===o?a=0:void 0===a&&(a=2);for(var d=1/0,f=1/0,p=-1/0,T=-1/0,b=0,S=n.length;b<S;b++){var A=(G=n[b]).x,P=G.y;d=Math.min(d,A),f=Math.min(f,P),p=Math.max(p,A),T=Math.max(T,P)}var O=p-d,L=T-f,D=t.sys.textures.createCanvas(i,Math.ceil(O),Math.ceil(L)),I=D.getCanvas(),F=D.getContext(),B=O/2,N=L/2,Y=a/2,X=[];for(b=0,S=n.length;b<S;b++){var G=n[b];X.push({x:Indent(G.x-d,B,Y),y:Indent(G.y-f,N,Y)})}!function(t,i,n,r,o,a,h){void 0===h&&(h="round"),i.beginPath(),i.lineJoin=h;var d=n[0];i.moveTo(d.x,d.y);for(var f=1,p=n.length;f<p;f++)d=n[f],i.lineTo(d.x,d.y);i.closePath(),null!=r&&(i.fillStyle=r,i.fill()),null!=o&&(i.strokeStyle=o,i.lineWidth=a,i.stroke())}(0,F,X,GetStyle(r,I,F),GetStyle(o,I,F),a,h),D.refresh()}(t.scene,i,t.getGridPoints(0,0,!0),n,r,o,a)};class BoardPlugin extends Phaser.Plugins.ScenePlugin{constructor(t,i){super(t,i),this.add=new ObjectFactory$1(t),this.hexagonMap=ws,this.createTileTexture=CreateTileTexture}start(){this.scene.sys.events.on("destroy",this.destroy,this)}}var SetVelocity=function(t,i,n,r){var o=t.body,a=o.velocity.x,h=o.velocity.y;i===a&&n===h||(o.setVelocity(i,n),r&&r(i,n,a,h))};const Ss=Phaser.Utils.Objects.GetValue;class Bullet extends SceneUpdateTickTask{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.parent.body||this.scene.physics.add.existing(this.parent,!1),this.setWrapMode(Ss(t,"wrap",!1),Ss(t,"padding",0)),this.setEnable(Ss(t,"enable",!0)),this.setSpeed(Ss(t,"speed",200)),this}get enable(){return this.isRunning}set enable(t){this.isRunning=t,t||SetVelocity(this.parent,0,0)}setEnable(t){return null==t&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}setWrapMode(t,i){return void 0===t&&(t=!0),this.wrap=t,this.padding=i,this}update(t,i){var n=this.parent;if(!this.enable)return SetVelocity(n,0,0),this;if(!n.active)return this;var r=n.rotation,o=this.speed*Math.cos(r),a=this.speed*Math.sin(r);return SetVelocity(n,o,a),this.wrap&&n.body.world.wrap(n,this.padding),this}}class BulletPlugin extends Phaser.Plugins.BasePlugin{constructor(t){super(t)}start(){this.game.events.on("destroy",this.destroy,this)}add(t,i){return new Bullet(t,i)}}const Ms=Phaser.Utils.Objects.GetValue,Es=Phaser.Math.Clamp;class Timer{constructor(t){this.resetFromJSON(t)}resetFromJSON(t){this.state=Ms(t,"state",Cs),this.timeScale=Ms(t,"timeScale",1),this.delay=Ms(t,"delay",0),this.repeat=Ms(t,"repeat",0),this.repeatCounter=Ms(t,"repeatCounter",0),this.duration=Ms(t,"duration",0),this.nowTime=Ms(t,"nowTime",0),this.justRestart=Ms(t,"justRestart",!1)}toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}destroy(){}setTimeScale(t){return this.timeScale=t,this}setDelay(t){return void 0===t&&(t=0),this.delay=t,this}setDuration(t){return this.duration=t,this}setRepeat(t){return this.repeat=t,this}setRepeatInfinity(){return this.repeat=-1,this}start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?_s:As,this.repeatCounter=0,this}stop(){return this.state=Cs,this}update(t,i){this.state!==Cs&&this.state!==Rs&&0!==i&&0!==this.timeScale&&(this.nowTime+=i*this.timeScale,this.state=this.nowTime>=0?_s:As,this.justRestart=!1,this.nowTime>=this.duration&&(-1===this.repeat||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration):(this.nowTime=this.duration,this.state=Rs)))}get t(){var t;switch(this.state){case Cs:case As:t=0;break;case _s:t=this.nowTime/this.duration;break;case Rs:t=1}return Es(t,0,1)}set t(t){(t=Es(t,-1,1))<0?(this.state=As,this.nowTime=-this.delay*t):(this.state=_s,this.nowTime=this.duration*t,1===t&&0!==this.repeat&&this.repeatCounter++)}setT(t){return this.t=t,this}get isIdle(){return this.state===Cs}get isDelay(){return this.state===As}get isCountDown(){return this.state===_s}get isRunning(){return this.state===As||this.state===_s}get isDone(){return this.state===Rs}get isOddIteration(){return 1==(1&this.repeatCounter)}get isEvenIteration(){return 0==(1&this.repeatCounter)}}const Cs=0,As=1,_s=2,Rs=-1;class TimerTickTask extends SceneUpdateTickTask{constructor(t,i){super(t,i),this.timer=new Timer}shutdown(t){this.isShutdown||(super.shutdown(t),this.timer.destroy(),this.timer=void 0)}start(){return this.timer.start(),super.start(),this}stop(){return this.timer.stop(),super.stop(),this}complete(){return this.timer.stop(),super.complete(),this}}const Ps=Phaser.Utils.Objects.GetValue,Os=Phaser.Utils.Objects.GetAdvancedValue,ks=Phaser.Tweens.Builders.GetEaseFunction;class EaseValueTaskBase extends TimerTickTask{resetFromJSON(t){return this.timer.resetFromJSON(Ps(t,"timer")),this.setEnable(Ps(t,"enable",!0)),this.setTarget(Ps(t,"target",this.parent)),this.setDelay(Os(t,"delay",0)),this.setDuration(Os(t,"duration",1e3)),this.setEase(Ps(t,"ease","Linear")),this.setRepeat(Ps(t,"repeat",0)),this}setEnable(t){return null==t&&(t=!0),this.enable=t,this}setTarget(t){return void 0===t&&(t=this.parent),this.target=t,this}setDelay(t){return this.delay=t,this}setDuration(t){return this.duration=t,this}setEase(t){return void 0===t&&(t="Linear"),this.ease=t,this.easeFn=ks(t),this}setRepeat(t){return this.repeat=t,this}start(){return this.timer.isRunning||super.start(),this}restart(){return this.timer.stop(),this.start.apply(this,arguments),this}stop(t){return void 0===t&&(t=!1),super.stop(),t&&(this.timer.setT(1),this.updateGameObject(this.target,this.timer),this.complete()),this}update(t,i){if(!this.isRunning||!this.enable||!this.parent.active)return this;var n=this.target,r=this.timer;return r.update(t,i),r.isDelay||this.updateGameObject(n,r),this.emit("update",n,this),r.isDone&&this.complete(),this}updateGameObject(t,i){}}const Ls=Phaser.Utils.Objects.GetValue,Ds=Phaser.Utils.Objects.GetAdvancedValue,Is=Phaser.Math.Linear;class EaseMove extends EaseValueTaskBase{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){if(super.resetFromJSON(t),this.setMode(Ls(t,"mode",0)),t&&(t.hasOwnProperty("x")||t.hasOwnProperty("y"))){var i=Ds(t,"x",void 0),n=Ds(t,"y",void 0);this.setTargetPosition(i,n)}else this.setTargetPosition(t);return this}setMode(t){return"string"==typeof t&&(t=Fs[t]),this.mode=t,this}setTargetPosition(t,i){if("number"==typeof t||"number"==typeof i)this.startX=this.parent.x,this.startY=this.parent.y,this.endX=t,this.endY=i;else{var n=t;this.startX=Ds(n,"startX",void 0),this.startY=Ds(n,"startY",void 0),this.endX=Ds(n,"endX",void 0),this.endY=Ds(n,"endY",void 0)}return this.hasMoveX=void 0!==this.startX&&void 0!==this.endX,this.hasMoveY=void 0!==this.startY&&void 0!==this.endY,this}start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasMoveX&&(t.x=this.startX),this.hasMoveY&&(t.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(2===this.mode?-1:0),super.start(),this}updateGameObject(t,i){var n=i.t;i.isOddIteration&&(n=1-n),n=this.easeFn(n),this.hasMoveX&&(t.x=Is(this.startX,this.endX,n)),this.hasMoveY&&(t.y=Is(this.startY,this.endY,n))}complete(){return super.complete(),1===this.mode&&this.parent.destroy(),this}}const Fs={stop:0,destroy:1,yoyo:2};var ParseValue=function(t,i){if("number"==typeof t)return t;var n=t[0],r=parseFloat(t.substr(2));switch(n){case"+":return i+r;case"-":return i-r;case"*":return i*r;case"/":return i/r}},EaseMoveTo=function(t,i,n,r,o,a,h){a instanceof EaseMove&&(h=a,a=void 0),void 0===a&&(a=!1);var d={};return d.mode=a?1:0,void 0!==n&&(d.startX=t.x,d.endX=ParseValue(n,t.x)),void 0!==r&&(d.startY=t.y,d.endY=ParseValue(r,t.y)),d.duration=i,d.ease=void 0===o?"Linear":o,void 0===h?h=new EaseMove(t,d):h.resetFromJSON(d),h.restart(),h},EaseMoveFrom=function(t,i,n,r,o,a,h){a instanceof EaseMove&&(h=a,a=void 0),void 0===a&&(a=!1);var d={};return d.mode=a?1:0,void 0!==n&&(d.startX=ParseValue(n,t.x),d.endX=t.x),void 0!==r&&(d.startY=ParseValue(r,t.y),d.endY=t.y),d.duration=i,d.ease=void 0===o?"Linear":o,void 0===h?h=new EaseMove(t,d):h.resetFromJSON(d),h.restart(),h};class EaseMovePlugin extends Phaser.Plugins.BasePlugin{constructor(t){super(t)}start(){this.game.events.on("destroy",this.destroy,this)}add(t,i){return new EaseMove(t,i)}}var Bs={moveTo:EaseMoveTo,moveFrom:EaseMoveFrom,moveToDestroy:function(t,i,n,r,o,a){return EaseMoveTo(t,i,n,r,o,!0,a)},moveFromDestroy:function(t,i,n,r,o,a){return EaseMoveFrom(t,i,n,r,o,!0,a)}};Object.assign(EaseMovePlugin.prototype,Bs);class ObjectFactory{constructor(t){this.scene=t}static register(t,i){ObjectFactory.prototype[t]=i}}const Ns=Phaser.GameObjects.GameObject;var IsGameObject=function(t){return!!t.skeleton||t instanceof Ns};ObjectFactory.register("tap",(function(t,i){return IsGameObject(t)||(i=t,t=this.scene),new Tap(t,i)})),SetValue(window,"RexPlugins.Gestures.Tap",Tap),ObjectFactory.register("press",(function(t,i){return IsGameObject(t)||(i=t,t=this.scene),new Press(t,i)})),SetValue(window,"RexPlugins.Gestures.Press",Press);const Ys=Phaser.Utils.Objects.GetValue;class Pan extends OnePointerTracer{constructor(t,i){super(t,i);var n=this,r={states:{IDLE:{},BEGIN:{enter:function(){var t=n.pointer;n.startX=t.x,n.startY=t.y,n.startWorldX=t.worldX,n.startWorldY=t.worldY}},RECOGNIZED:{enter:function(){n.emit("panstart",n,n.gameObject,n.lastPointer)},exit:function(){var t=n.lastPointer;n.endX=t.x,n.endY=t.y,n.endWorldX=t.worldX,n.endWorldY=t.worldY,n.emit("panend",n,n.gameObject,n.lastPointer)}}},init:function(){this.state=Xs},eventEmitter:!1};this.setRecongizedStateObject(new FSM(r))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Ys(t,"threshold",10)),this}onDragStart(){this.state=Gs,0===this.dragThreshold&&(this.state=Us)}onDragEnd(){this.state=Xs}onDrag(){switch(this.state){case Gs:this.pointer.getDistance()>=this.dragThreshold&&(this.state=Us);break;case Us:var t=this.pointer.position,i=this.pointer.prevPosition;this.dx=t.x-i.x,this.dy=t.y-i.y;var n=this.pointer;this.x=n.x,this.y=n.y,this.worldX=n.worldX,this.worldY=n.worldY,this.emit("pan",this,this.gameObject,this.lastPointer)}}get isPanned(){return this.state===Us}setDragThreshold(t){return this.dragThreshold=t,this}}const Xs="IDLE",Gs="BEGIN",Us="RECOGNIZED";ObjectFactory.register("pan",(function(t,i){return IsGameObject(t)||(i=t,t=this.scene),new Pan(t,i)})),SetValue(window,"RexPlugins.Gestures.Pan",Pan),ObjectFactory.register("swipe",(function(t,i){return IsGameObject(t)||(i=t,t=this.scene),new Swipe(t,i)})),SetValue(window,"RexPlugins.Gestures.Swipe",Swipe);const Vs=Phaser.Utils.Objects.GetValue,zs=Phaser.Utils.Array.SpliceOne,Ws=Phaser.Math.Distance.Between,Hs=Phaser.Math.Angle.Between;class TwoPointersTracer{constructor(t,i){var n=t.input.manager.pointersTotal-1;n<2&&t.input.addPointer(2-n),this.scene=t,this.setEventEmitter(Vs(i,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.setEnable(Vs(t,"enable",!0)),this.bounds=Vs(t,"bounds",void 0),this.tracerState=qs,this.pointers.length=0,Clear(this.movedState),this}boot(){this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){this.scene&&(this.destroyEventEmitter(),this.pointers.length=0,Clear(this.movedState),this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0)}destroy(){this.shutdown()}get enable(){return this._enable}set enable(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}toggleEnable(){return this.setEnable(!this.enable),this}onPointerDown(t){if(this.enable&&(2!==this.pointers.length&&(!this.bounds||this.bounds.contains(t.x,t.y))&&-1===this.pointers.indexOf(t)))switch(this.movedState[t.id]=!1,this.pointers.push(t),this.tracerState){case qs:this.tracerState=Zs,this.onDrag1Start();break;case Zs:this.tracerState=Ks,this.onDrag2Start()}}onPointerUp(t){if(this.enable&&(!this.bounds||this.bounds.contains(t.x,t.y))){var i=this.pointers.indexOf(t);if(-1!==i)switch(delete this.movedState[t.id],zs(this.pointers,i),this.tracerState){case Zs:this.tracerState=qs,this.onDrag1End();break;case Ks:this.tracerState=Zs,this.onDrag2End(),this.onDrag1Start()}}}onPointerMove(t){if(this.enable&&t.isDown){var i=!this.bounds||this.bounds.contains(t.x,t.y),n=-1!==this.pointers.indexOf(t);if(!n&&i);else if(n&&!i)this.onPointerUp(t);else if(this.movedState[t.id]||(this.movedState[t.id]=t.x!==t.downX||t.y!==t.downY),this.movedState[t.id])switch(this.tracerState){case Zs:this.onDrag1();break;case Ks:this.onDrag2()}}}dragCancel(){return this.tracerState===Ks&&this.onDrag2End(),this.pointers.length=0,Clear(this.movedState),this.tracerState=qs,this}onDrag1Start(){this.emit("drag1start",this)}onDrag1End(){this.emit("drag1end",this)}onDrag1(){this.emit("drag1",this)}onDrag2Start(){this.emit("drag2start",this)}onDrag2End(){this.emit("drag2end",this)}onDrag2(){this.emit("drag2",this)}get distanceBetween(){if(this.tracerState!==Ks)return 0;var t=this.pointers[0],i=this.pointers[1];return Ws(t.x,t.y,i.x,i.y)}get angleBetween(){if(this.tracerState!==Ks)return 0;var t=this.pointers[0],i=this.pointers[1];return Hs(t.x,t.y,i.x,i.y)}get drag1Vector(){var t=this.pointers[0];if(t&&this.movedState[t.id]){var i=t.position,n=t.prevPosition;js.x=i.x-n.x,js.y=i.y-n.y}else js.x=0,js.y=0;return js}get centerX(){if(this.tracerState!==Ks)return 0;var t=this.pointers[0].position,i=this.pointers[1].position;return(t.x+i.x)/2}get centerY(){if(this.tracerState!==Ks)return 0;var t=this.pointers[0].position,i=this.pointers[1].position;return(t.y+i.y)/2}get prevCenterX(){if(this.tracerState!==Ks)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,i=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.x+i.x)/2}get prevCenterY(){if(this.tracerState!==Ks)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,i=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.y+i.y)/2}get movementCenterX(){return this.centerX-this.prevCenterX}get movementCenterY(){return this.centerY-this.prevCenterY}setRecongizedStateObject(t){return this.recongizedState=t,this}get state(){return this.recongizedState.state}set state(t){this.recongizedState.state=t}cancel(){return this.state=Js,this}}Object.assign(TwoPointersTracer.prototype,W);var js={};const qs=0,Zs=1,Ks=2,Js="IDLE",Qs=Phaser.Utils.Objects.GetValue;class Pinch extends TwoPointersTracer{constructor(t,i){super(t,i);var n=this,r={states:{IDLE:{enter:function(){n.prevDistance=void 0,n.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function(){n.emit("pinchstart",n)},exit:function(){n.emit("pinchend",n)}}},init:function(){this.state=$s},eventEmitter:!1};this.setRecongizedStateObject(new FSM(r))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(Qs(t,"threshold",0)),this}onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=er,0===this.dragThreshold&&(this.state=ir)}onDrag2End(){this.state=$s}onDrag2(){switch(this.state){case er:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.prevDistance=t,this.state=ir}break;case ir:t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.emit("pinch",this),this.prevDistance=t}}get isPinched(){return this.state===ir}setDragThreshold(t){return this.dragThreshold=t,this}}const $s="IDLE",er="BEGIN",ir="RECOGNIZED";ObjectFactory.register("pinch",(function(t){return new Pinch(this.scene,t)})),SetValue(window,"RexPlugins.Gestures.Pinch",Pinch);const nr=Phaser.Math.RotateAround;var RotateObjectAround=function(t,i,n,r){return nr(t,i,n,r),t.rotation+=r,t},sr={};const rr=Phaser.Utils.Objects.GetValue,or=Phaser.Math.Angle.WrapDegrees,ar=Phaser.Math.Angle.ShortestBetween,hr=Phaser.Math.RadToDeg,lr=Phaser.Math.DegToRad;class Rotate extends TwoPointersTracer{constructor(t,i){super(t,i);var n=this,r={states:{IDLE:{enter:function(){n.prevAngle=void 0,n.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){n.emit("rotatestart",n)},exit:function(){n.emit("rotateend",n)}}},init:function(){this.state=cr},eventEmitter:!1};this.setRecongizedStateObject(new FSM(r))}resetFromJSON(t){return super.resetFromJSON(t),this.setDragThreshold(rr(t,"threshold",0)),this}onDrag2Start(){this.prevAngle=or(hr(this.angleBetween)),this.state=dr,0===this.dragThreshold&&(this.state=fr)}onDrag2End(){this.state=cr}onDrag2(){switch(this.state){case dr:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=or(hr(this.angleBetween));this.angle=ar(this.prevAngle,t),this.prevAngle=t,this.state=fr}break;case fr:t=or(hr(this.angleBetween));this.angle=ar(this.prevAngle,t),this.prevAngle=t,this.emit("rotate",this)}}get isRotated(){return this.state===fr}get rotation(){return lr(this.angle)}setDragThreshold(t){return this.dragThreshold=t,this}}var ur={spinObject:function(t,i){if(!this.isRotation)return this;void 0===i&&(i=this.pointers[0].camera);var n=this.movementCenterX,r=this.movementCenterY,o=function(t,i,n,r){return void 0===r?r={}:!0===r&&(r=sr),n.getWorldPoint(t,i,r),r}(this.centerX,this.centerY,i,!0),a=o.x,h=o.y,d=this.rotation;if(Array.isArray(t))for(var f=t,p=0,T=f.length;p<T;p++)(t=f[p]).x+=n,t.y+=r,RotateObjectAround(t,a,h,d);else t.x+=n,t.y+=r,RotateObjectAround(t,a,h,d);return this}};Object.assign(Rotate.prototype,ur);const cr="IDLE",dr="BEGIN",fr="RECOGNIZED";ObjectFactory.register("rotate",(function(t){return new Rotate(this.scene,t)})),SetValue(window,"RexPlugins.Gestures.Rotate",Rotate);class GesturesPlugin extends Phaser.Plugins.ScenePlugin{constructor(t,i){super(t,i),this.add=new ObjectFactory(t)}}class MoveToPlugin extends Phaser.Plugins.BasePlugin{constructor(t){super(t)}start(){this.game.events.on("destroy",this.destroy,this)}add(t,i){return new MoveTo$2(t,i)}}const pr=Phaser.Utils.Objects.GetValue,gr=Phaser.Math.Wrap,vr=Phaser.Math.Angle.Wrap,mr=Phaser.Math.Angle.Between;class RotateTo extends SceneUpdateTickTask{constructor(t,i){super(t,i),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this.isRunning=pr(t,"isRunning",!1),this.setEnable(pr(t,"enable",!0)),this.timeScale=pr(t,"timeScale",1),this.setSpeed(pr(t,"speed",180)),this.target=pr(t,"target",0),this.dir=pr(t,"dir",0),this}toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,speed:this.speed,target:this.target,dir:this.dir,tickingMode:this.tickingMode}}setEnable(t){return null==t&&(t=!0),this.enable=t,this}setSpeed(t){return this.speed=t,this}rotateTo(t,i,n){if("number"!=typeof t){var r=t;t=pr(r,"angle",void 0),i=pr(r,"dir",void 0)}return this.target=gr(t,0,360),void 0===i&&(i=0),this.dir="string"==typeof i?yr[i]:i,void 0!==n&&this.setSpeed(n),super.start(),this}rotateTowardsPosition(t,i,n,r){var o=this.parent,a=mr(o.x,o.y,t,i),h=RadToDeg$3(a);return this.rotateTo(h,n,r),this}update(t,i){if(!this.isRunning||!this.enable)return this;var n=this.parent;if(!n.active)return this;var r=this.target;if(vr(DegToRad$3(r))===n.rotation)return this.complete(),this;if(0===this.speed||0===i||0===this.timeScale)return this;var o,a,h=(360+n.angle)%360,d=i*this.timeScale/1e3,f=this.speed*d,p=this.dir;switch(p){case 0:var T=diffAngle(h,r,!0),b=360-T;T<b?(p=1,o=T):(p=2,o=b);break;case 1:o=diffAngle(h,r,!0);break;case 2:o=diffAngle(h,r,!1)}return a=f<o?1===p?h+f:h-f:r,n.rotation=DegToRad$3(a),this}}var diffAngle=function(t,i,n){var r=n?i-t:t-i;return r=gr(r,0,360)};const yr={shortest:0,cw:1,ccw:2};class RotateToPlugin extends Phaser.Plugins.BasePlugin{constructor(t){super(t)}start(){this.game.events.on("destroy",this.destroy,this)}add(t,i){return new RotateTo(t,i)}}var xr={exports:{}},Tr=xr.exports=function s(){var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},i=!t.document&&!!t.postMessage,n=i&&/blob:/i.test((t.location||{}).protocol),r={},o=0,a={parse:function(i,n){var h=(n=n||{}).dynamicTyping||!1;if(M(h)&&(n.dynamicTypingFunction=h,h={}),n.dynamicTyping=h,n.transform=!!M(n.transform)&&n.transform,n.worker&&a.WORKERS_SUPPORTED){var d=function(){if(!a.WORKERS_SUPPORTED)return!1;var i,n,h=(i=t.URL||t.webkitURL||null,n=s.toString(),a.BLOB_URL||(a.BLOB_URL=i.createObjectURL(new Blob(["(",n,")();"],{type:"text/javascript"})))),d=new t.Worker(h);return d.onmessage=_,d.id=o++,r[d.id]=d}();return d.userStep=n.step,d.userChunk=n.chunk,d.userComplete=n.complete,d.userError=n.error,n.step=M(n.step),n.chunk=M(n.chunk),n.complete=M(n.complete),n.error=M(n.error),delete n.worker,void d.postMessage({input:i,config:n,workerId:d.id})}var f=null;return a.NODE_STREAM_INPUT,"string"==typeof i?f=n.download?new l(n):new p2(n):!0===i.readable&&M(i.read)&&M(i.on)?f=new g(n):(t.File&&i instanceof File||i instanceof Object)&&(f=new c(n)),f.stream(i)},unparse:function(t,i){var n=!1,r=!0,o=",",h="\r\n",d='"',f=d+d,p=!1,T=null,b=!1;!function(){if("object"==typeof i){if("string"!=typeof i.delimiter||a.BAD_DELIMITERS.filter((function(t){return-1!==i.delimiter.indexOf(t)})).length||(o=i.delimiter),("boolean"==typeof i.quotes||"function"==typeof i.quotes||Array.isArray(i.quotes))&&(n=i.quotes),"boolean"!=typeof i.skipEmptyLines&&"string"!=typeof i.skipEmptyLines||(p=i.skipEmptyLines),"string"==typeof i.newline&&(h=i.newline),"string"==typeof i.quoteChar&&(d=i.quoteChar),"boolean"==typeof i.header&&(r=i.header),Array.isArray(i.columns)){if(0===i.columns.length)throw new Error("Option columns is empty");T=i.columns}void 0!==i.escapeChar&&(f=i.escapeChar+d),("boolean"==typeof i.escapeFormulae||i.escapeFormulae instanceof RegExp)&&(b=i.escapeFormulae instanceof RegExp?i.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var S=new RegExp(j(d),"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return u2(null,t,p);if("object"==typeof t[0])return u2(T||Object.keys(t[0]),t,p)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||T),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:"object"==typeof t.data[0]?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),u2(t.fields||[],t.data||[],p);throw new Error("Unable to serialize unrecognized input");function u2(t,i,n){var a="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof i&&(i=JSON.parse(i));var d=Array.isArray(t)&&0<t.length,f=!Array.isArray(i[0]);if(d&&r){for(var p=0;p<t.length;p++)0<p&&(a+=o),a+=v2(t[p],p);0<i.length&&(a+=h)}for(var T=0;T<i.length;T++){var b=d?t.length:i[T].length,S=!1,A=d?0===Object.keys(i[T]).length:0===i[T].length;if(n&&!d&&(S="greedy"===n?""===i[T].join("").trim():1===i[T].length&&0===i[T][0].length),"greedy"===n&&d){for(var P=[],O=0;O<b;O++){var L=f?t[O]:O;P.push(i[T][L])}S=""===P.join("").trim()}if(!S){for(var D=0;D<b;D++){0<D&&!A&&(a+=o);var I=d&&f?t[D]:D;a+=v2(i[T][I],D)}T<i.length-1&&(!n||0<b&&!A)&&(a+=h)}}return a}function v2(t,i){if(null==t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);var r=!1;b&&"string"==typeof t&&b.test(t)&&(t="'"+t,r=!0);var h=t.toString().replace(S,f);return(r=r||!0===n||"function"==typeof n&&n(t,i)||Array.isArray(n)&&n[i]||function(t,i){for(var n=0;n<i.length;n++)if(-1<t.indexOf(i[n]))return!0;return!1}(h,a.BAD_DELIMITERS)||-1<h.indexOf(o)||" "===h.charAt(0)||" "===h.charAt(h.length-1))?d+h+d:h}}};if(a.RECORD_SEP=String.fromCharCode(30),a.UNIT_SEP=String.fromCharCode(31),a.BYTE_ORDER_MARK="\ufeff",a.BAD_DELIMITERS=["\r","\n",'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!i&&!!t.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=E,a.ParserHandle=i2,a.NetworkStreamer=l,a.FileStreamer=c,a.StringStreamer=p2,a.ReadableStreamStreamer=g,t.jQuery){var h=t.jQuery;h.fn.parse=function(i){var n=i.config||{},r=[];return this.each((function(i){if("INPUT"!==h(this).prop("tagName").toUpperCase()||"file"!==h(this).attr("type").toLowerCase()||!t.FileReader||!this.files||0===this.files.length)return!0;for(var o=0;o<this.files.length;o++)r.push({file:this.files[o],inputElem:this,instanceConfig:h.extend({},n)})})),e(),this;function e(){if(0!==r.length){var t,n,o,d,f=r[0];if(M(i.before)){var p=i.before(f.file,f.inputElem);if("object"==typeof p){if("abort"===p.action)return t="AbortError",n=f.file,o=f.inputElem,d=p.reason,void(M(i.error)&&i.error({name:t},n,o,d));if("skip"===p.action)return void u2();"object"==typeof p.config&&(f.instanceConfig=h.extend(f.instanceConfig,p.config))}else if("skip"===p)return void u2()}var T=f.instanceConfig.complete;f.instanceConfig.complete=function(t){M(T)&&T(t,f.file,f.inputElem),u2()},a.parse(f.file,f.instanceConfig)}else M(i.complete)&&i.complete()}function u2(){r.splice(0,1),e()}}}function u(i){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var i=w(t);i.chunkSize=parseInt(i.chunkSize),t.step||t.chunk||(i.chunkSize=null),this._handle=new i2(i),(this._handle.streamer=this)._config=i}.call(this,i),this.parseChunk=function(i,r){if(this.isFirstChunk&&M(this._config.beforeFirstChunk)){var o=this._config.beforeFirstChunk(i);void 0!==o&&(i=o)}this.isFirstChunk=!1,this._halted=!1;var h=this._partialLine+i;this._partialLine="";var d=this._handle.parse(h,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var f=d.meta.cursor;this._finished||(this._partialLine=h.substring(f-this._baseIndex),this._baseIndex=f),d&&d.data&&(this._rowCount+=d.data.length);var p=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(n)t.postMessage({results:d,workerId:a.WORKER_ID,finished:p});else if(M(this._config.chunk)&&!r){if(this._config.chunk(d,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);d=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(d.data),this._completeResults.errors=this._completeResults.errors.concat(d.errors),this._completeResults.meta=d.meta),this._completed||!p||!M(this._config.complete)||d&&d.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),p||d&&d.meta.paused||this._nextChunk(),d}this._halted=!0},this._sendError=function(i){M(this._config.error)?this._config.error(i):n&&this._config.error&&t.postMessage({workerId:a.WORKER_ID,error:i,finished:!1})}}function l(t){var n;(t=t||{}).chunkSize||(t.chunkSize=a.RemoteChunkSize),u.call(this,t),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(n=new XMLHttpRequest,this._config.withCredentials&&(n.withCredentials=this._config.withCredentials),i||(n.onload=v(this._chunkLoaded,this),n.onerror=v(this._chunkError,this)),n.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var r in t)n.setRequestHeader(r,t[r])}if(this._config.chunkSize){var o=this._start+this._config.chunkSize-1;n.setRequestHeader("Range","bytes="+this._start+"-"+o)}try{n.send(this._config.downloadRequestBody)}catch(a){this._chunkError(a.message)}i&&0===n.status&&this._chunkError()}},this._chunkLoaded=function(){4===n.readyState&&(n.status<200||400<=n.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:n.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(t){var i=t.getResponseHeader("Content-Range");return null===i?-1:parseInt(i.substring(i.lastIndexOf("/")+1))}(n),this.parseChunk(n.responseText)))},this._chunkError=function(t){var i=n.statusText||t;this._sendError(new Error(i))}}function c(t){var i,n;(t=t||{}).chunkSize||(t.chunkSize=a.LocalChunkSize),u.call(this,t);var r="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,n=t.slice||t.webkitSlice||t.mozSlice,r?((i=new FileReader).onload=v(this._chunkLoaded,this),i.onerror=v(this._chunkError,this)):i=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var o=Math.min(this._start+this._config.chunkSize,this._input.size);t=n.call(t,this._start,o)}var a=i.readAsText(t,this._config.encoding);r||this._chunkLoaded({target:{result:a}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(i.error)}}function p2(t){var i;u.call(this,t=t||{}),this.stream=function(t){return i=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t,n=this._config.chunkSize;return n?(t=i.substring(0,n),i=i.substring(n)):(t=i,i=""),this._finished=!i,this.parseChunk(t)}}}function g(t){u.call(this,t=t||{});var i=[],n=!0,r=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===i.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),i.length?this.parseChunk(i.shift()):n=!0},this._streamData=v((function(t){try{i.push("string"==typeof t?t:t.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(i.shift()))}catch(r){this._streamError(r)}}),this),this._streamError=v((function(t){this._streamCleanUp(),this._sendError(t)}),this),this._streamEnd=v((function(){this._streamCleanUp(),r=!0,this._streamData("")}),this),this._streamCleanUp=v((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function i2(t){var i,n,r,o=Math.pow(2,53),h=-o,d=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,f=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,p=this,T=0,b=0,S=!1,A=!1,P=[],O={data:[],errors:[],meta:{}};if(M(t.step)){var L=t.step;t.step=function(i){if(O=i,_2())g2();else{if(g2(),0===O.data.length)return;T+=i.data.length,t.preview&&T>t.preview?n.abort():(O.data=O.data[0],L(O,p))}}}function y2(i){return"greedy"===t.skipEmptyLines?""===i.join("").trim():1===i.length&&0===i[0].length}function g2(){return O&&r&&(k("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),r=!1),t.skipEmptyLines&&(O.data=O.data.filter((function(t){return!y2(t)}))),_2()&&function(){if(O)if(Array.isArray(O.data[0])){for(var i=0;_2()&&i<O.data.length;i++)O.data[i].forEach(e2);O.data.splice(0,1)}else O.data.forEach(e2);function e2(i,n){M(t.transformHeader)&&(i=t.transformHeader(i,n)),P.push(i)}}(),function(){if(!O||!t.header&&!t.dynamicTyping&&!t.transform)return O;function e2(i,n){var r,o=t.header?{}:[];for(r=0;r<i.length;r++){var a=r,h=i[r];t.header&&(a=r>=P.length?"__parsed_extra":P[r]),t.transform&&(h=t.transform(h,a)),h=v2(a,h),"__parsed_extra"===a?(o[a]=o[a]||[],o[a].push(h)):o[a]=h}return t.header&&(r>P.length?k("FieldMismatch","TooManyFields","Too many fields: expected "+P.length+" fields but parsed "+r,b+n):r<P.length&&k("FieldMismatch","TooFewFields","Too few fields: expected "+P.length+" fields but parsed "+r,b+n)),o}var i=1;return!O.data.length||Array.isArray(O.data[0])?(O.data=O.data.map(e2),i=O.data.length):O.data=e2(O.data,0),t.header&&O.meta&&(O.meta.fields=P),b+=i,O}()}function _2(){return t.header&&0===P.length}function v2(i,n){return r=i,t.dynamicTypingFunction&&void 0===t.dynamicTyping[r]&&(t.dynamicTyping[r]=t.dynamicTypingFunction(r)),!0===(t.dynamicTyping[r]||t.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(function(t){if(d.test(t)){var i=parseFloat(t);if(h<i&&i<o)return!0}return!1}(n)?parseFloat(n):f.test(n)?new Date(n):""===n?null:n):n;var r}function k(t,i,n,r){var o={type:t,code:i,message:n};void 0!==r&&(o.row=r),O.errors.push(o)}this.parse=function(o,h,d){var f=t.quoteChar||'"';if(t.newline||(t.newline=function(t,i){t=t.substring(0,1048576);var n=new RegExp(j(i)+"([^]*?)"+j(i),"gm"),r=(t=t.replace(n,"")).split("\r"),o=t.split("\n"),a=1<o.length&&o[0].length<r[0].length;if(1===r.length||a)return"\n";for(var h=0,d=0;d<r.length;d++)"\n"===r[d][0]&&h++;return h>=r.length/2?"\r\n":"\r"}(o,f)),r=!1,t.delimiter)M(t.delimiter)&&(t.delimiter=t.delimiter(o),O.meta.delimiter=t.delimiter);else{var p=function(i,n,r,o,h){var d,f,p,T;h=h||[",","\t","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var b=0;b<h.length;b++){var S=h[b],A=0,P=0,O=0;p=void 0;for(var L=new E({comments:o,delimiter:S,newline:n,preview:10}).parse(i),D=0;D<L.data.length;D++)if(r&&y2(L.data[D]))O++;else{var I=L.data[D].length;P+=I,void 0!==p?0<I&&(A+=Math.abs(I-p),p=I):p=I}0<L.data.length&&(P/=L.data.length-O),(void 0===f||A<=f)&&(void 0===T||T<P)&&1.99<P&&(f=A,d=S,T=P)}return{successful:!!(t.delimiter=d),bestDelimiter:d}}(o,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);p.successful?t.delimiter=p.bestDelimiter:(r=!0,t.delimiter=a.DefaultDelimiter),O.meta.delimiter=t.delimiter}var T=w(t);return t.preview&&t.header&&T.preview++,i=o,n=new E(T),O=n.parse(i,h,d),g2(),S?{meta:{paused:!0}}:O||{meta:{paused:!1}}},this.paused=function(){return S},this.pause=function(){S=!0,n.abort(),i=M(t.chunk)?"":i.substring(n.getCharIndex())},this.resume=function(){p.streamer._halted?(S=!1,p.streamer.parseChunk(i,!0)):setTimeout(p.resume,3)},this.aborted=function(){return A},this.abort=function(){A=!0,n.abort(),O.meta.aborted=!0,M(t.complete)&&t.complete(O),i=""}}function j(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function E(t){var i,n=(t=t||{}).delimiter,r=t.newline,o=t.comments,h=t.step,d=t.preview,f=t.fastMode,p=i=void 0===t.quoteChar||null===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(p=t.escapeChar),("string"!=typeof n||-1<a.BAD_DELIMITERS.indexOf(n))&&(n=","),o===n)throw new Error("Comment character same as delimiter");!0===o?o="#":("string"!=typeof o||-1<a.BAD_DELIMITERS.indexOf(o))&&(o=!1),"\n"!==r&&"\r"!==r&&"\r\n"!==r&&(r="\n");var T=0,b=!1;this.parse=function(t,a,S){if("string"!=typeof t)throw new Error("Input must be a string");var A=t.length,P=n.length,O=r.length,L=o.length,D=M(h),I=[],F=[],B=[],N=T=0;if(!t)return C();if(f||!1!==f&&-1===t.indexOf(i)){for(var Y=t.split(r),X=0;X<Y.length;X++){if(B=Y[X],T+=B.length,X!==Y.length-1)T+=r.length;else if(S)return C();if(!o||B.substring(0,L)!==o){if(D){if(I=[],k(B.split(n)),R(),b)return C()}else k(B.split(n));if(d&&d<=X)return I=I.slice(0,d),C(!0)}}return C()}for(var G=t.indexOf(n,T),U=t.indexOf(r,T),V=new RegExp(j(p)+j(i),"g"),z=t.indexOf(i,T);;)if(t[T]!==i)if(o&&0===B.length&&t.substring(T,T+L)===o){if(-1===U)return C();T=U+O,U=t.indexOf(r,T),G=t.indexOf(n,T)}else if(-1!==G&&(G<U||-1===U))B.push(t.substring(T,G)),T=G+P,G=t.indexOf(n,T);else{if(-1===U)break;if(B.push(t.substring(T,U)),w2(U+O),D&&(R(),b))return C();if(d&&I.length>=d)return C(!0)}else for(z=T,T++;;){if(-1===(z=t.indexOf(i,z+1)))return S||F.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:I.length,index:T}),E2();if(z===A-1)return E2(t.substring(T,z).replace(V,i));if(i!==p||t[z+1]!==p){if(i===p||0===z||t[z-1]!==p){-1!==G&&G<z+1&&(G=t.indexOf(n,z+1)),-1!==U&&U<z+1&&(U=t.indexOf(r,z+1));var W=b2(-1===U?G:Math.min(G,U));if(t.substr(z+1+W,P)===n){B.push(t.substring(T,z).replace(V,i)),t[T=z+1+W+P]!==i&&(z=t.indexOf(i,T)),G=t.indexOf(n,T),U=t.indexOf(r,T);break}var H=b2(U);if(t.substring(z+1+H,z+1+H+O)===r){if(B.push(t.substring(T,z).replace(V,i)),w2(z+1+H+O),G=t.indexOf(n,T),z=t.indexOf(i,T),D&&(R(),b))return C();if(d&&I.length>=d)return C(!0);break}F.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:I.length,index:T}),z++}}else z++}return E2();function k(t){I.push(t),N=T}function b2(i){var n=0;if(-1!==i){var r=t.substring(z+1,i);r&&""===r.trim()&&(n=r.length)}return n}function E2(i){return S||(void 0===i&&(i=t.substring(T)),B.push(i),T=A,k(B),D&&R()),C()}function w2(i){T=i,k(B),B=[],U=t.indexOf(r,T)}function C(t){return{data:I,errors:F,meta:{delimiter:n,linebreak:r,aborted:b,truncated:!!t,cursor:N+(a||0)}}}function R(){h(C()),I=[],F=[]}},this.abort=function(){b=!0},this.getCharIndex=function(){return T}}function _(t){var i=t.data,n=r[i.workerId],o=!1;if(i.error)n.userError(i.error,i.file);else if(i.results&&i.results.data){var a={abort:function(){o=!0,m(i.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:y,resume:y};if(M(n.userStep)){for(var h=0;h<i.results.data.length&&(n.userStep({data:i.results.data[h],errors:i.results.errors,meta:i.results.meta},a),!o);h++);delete i.results}else M(n.userChunk)&&(n.userChunk(i.results,a,i.file),delete i.results)}i.finished&&!o&&m(i.workerId,i.results)}function m(t,i){var n=r[t];M(n.userComplete)&&n.userComplete(i),n.terminate(),delete r[t]}function y(){throw new Error("Not implemented.")}function w(t){if("object"!=typeof t||null===t)return t;var i=Array.isArray(t)?[]:{};for(var n in t)i[n]=w(t[n]);return i}function v(t,i){return function(){t.apply(i,arguments)}}function M(t){return"function"==typeof t}return n&&(t.onmessage=function(i){var n=i.data;if(void 0===a.WORKER_ID&&n&&(a.WORKER_ID=n.workerId),"string"==typeof n.input)t.postMessage({workerId:a.WORKER_ID,results:a.parse(n.input,n.config),finished:!0});else if(t.File&&n.input instanceof File||n.input instanceof Object){var r=a.parse(n.input,n.config);r&&t.postMessage({workerId:a.WORKER_ID,results:r,finished:!0})}}),(l.prototype=Object.create(u.prototype)).constructor=l,(c.prototype=Object.create(u.prototype)).constructor=c,(p2.prototype=Object.create(p2.prototype)).constructor=p2,(g.prototype=Object.create(u.prototype)).constructor=g,a}();const wr=Phaser.Utils.Objects.GetValue;class InstMem{constructor(t){this.scenario=t,this.queue=[],this.currentIdx=-1,this.nextIdx=0}resetFromJSON(t){var i=wr(t,"queue",void 0);return void 0===i?Clear(this.queue):Clone(i,this.queue),this.currentIdx=wr(t,"curIdx",-1),this.nextIdx=wr(t,"nextIdx",0),this}clear(){return this.currentIdx=-1,this.nextIdx=0,this.queue.length=0,this}append(t){return this.queue.push(t),this}setNextIndex(t){return void 0===t&&(t=this.currentIdx+1),this.nextIdx=t,this}get(t){return void 0===t&&(t=this.nextIdx),this.currentIdx=t,this.queue[t]}get length(){return this.queue.length}}class BaseCmd{constructor(t,i){this.scenario=t,this.type=i}resetFromJSON(t){}toJSON(){return{}}parse(t,i){return t}run(t){}}var br=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,convert=function(t){return"string"!=typeof t||(""===t?t=null:br.test(t)?t=parseFloat(t):"false"===t?t=!1:"true"===t&&(t=!0)),t};const Sr=Phaser.Utils.Objects.GetValue;var RunCommands=function(t,i,n){var r,o=Sr(n,"reverse",!1);if(IsArray(t[0]))if(o)for(a=(h=t.length)-1;a>=0;a--)r=RunCommands(t[a],i,n);else for(var a=0,h=t.length;a<h;a++)r=RunCommands(t[a],i,n);else r=RunCommand(t,i,n);return r},RunCommand=function(t,i,n){var r,o=Sr(n,"argsConvert",void 0),a=Sr(n,"argsConvertScope",void 0),h=t[0];if(Mr=function(t,i,n,r){void 0===n&&(n=0),void 0===r&&(r=i.length),t.length=r-n;for(var o=0,a=t.length;o<a;o++)t[o]=i[o+n];return t}(Mr,t,1),o){!0===o&&(o=convert,a=void 0);for(var d=0,f=Mr.length;d<f;d++)Mr[d]=a?o.call(a,Mr[d],t):o(Mr[d],t)}return"string"==typeof h?null==(r=i[h])&&(r=Sr(i,h,null)):r=h,r.apply(i,Mr)},Mr=[];const Er=Phaser.Utils.Array.SpliceOne;class CustomCmd extends BaseCmd{constructor(t){super(t,"-"),this.task=void 0}resetFromJSON(t){this.task&&(this.task.off("complete",this.resume,this),this.task=void 0)}parse(t,i){var n=Er(t,0),r=this.scenario,o=r.argsConvert,a=r.argsConvertScope;if(o){!0===o&&(o=convert,a=void 0);for(var h=1,d=t.length;h<d;h++)t[h]=a?o.call(a,t[h],t):o(t[h],t)}return t=[n,t]}run(t){var i=this.scenario,n=RunCommands(t[1],i.scope);n&&"function"==typeof n.once?(n.once("complete",this.resume,this),this.pause(),this.task=n):this.task=void 0}pause(){this.scenario.pause()}resume(){this.task=void 0;var t=this.scenario;t.resume(),t.runNextCmd()}}class WaitCmd extends BaseCmd{constructor(t){super(t,"wait")}parse(t,i){t.length=2;var n=this.getEventName(t);return isNaN(n)||(t[1]=parseFloat(n)),t}run(t){var i=this.getEventName(t);"number"==typeof i?this.waitTime(i):this.waitEvent(i)}waitTime(t){t>this.scenario.offset?(t-=this.scenario.offset,this.scenario.offset=0,this.scenario.isDebugMode&&this.scenario.log("#WAIT: "+t),this.scenario.wait(t)):this.scenario.offset-=t}waitEvent(t){this.scenario.isDebugMode&&this.scenario.log("#WAIT: "+t),this.scenario.wait(t)}getEventName(t){var i=t[1];return null==i&&(i="",t[1]=i),i}}const Cr=Phaser.Utils.Objects.GetValue;class LabelCmd extends BaseCmd{constructor(t){super(t,"label"),this.labels={},this.prevLabel="",this.lastLabel=""}resetFromJSON(t){this.prevLabel=Cr(t,"preLabel",""),this.lastLabel=Cr(t,"lastLabel","");var i=Cr(t,"labels",void 0);void 0===i?Clear(this.labels):Clone(i,this.labels)}toJSON(){return{preLabel:this.prevLabel,lastLabel:this.lastLabel,labels:this.labels}}parse(t,i){t.length=2;var n=this.getLabel(t);return this.addLabel(n,i),t}run(t){var i=this.getLabel(t);this.scenario.isDebugMode&&this.scenario.log("#LABEL: "+i),this.prevLabel=this.lastLabel,this.lastLabel=i;var n=this.scenario;n.emit("labelchange",this.lastLabel,this.prevLabel,n.scope,n)}getLabel(t){var i=t[1];return null==i&&(i="",t[1]=i),i}addLabel(t,i){this.labels[t]=i}getIndex(t){return""!==t&&this.hasLabel(t)?this.labels[t]:0}hasLabel(t){return this.labels.hasOwnProperty(t)}}class ExitCmd extends BaseCmd{constructor(t){super(t,"exit")}parse(t,i){return t.length=1,t}run(t){this.scenario.log("#EXIT"),this.scenario.complete()}}class GotoCmd extends BaseCmd{constructor(t){super(t,"goto")}parse(t,i){return t.length=2,t}run(t){var i=this.getLabel(t);this.scenario.isDebugMode&&this.scenario.log("#GOTO label: "+i),this.scenario.goto(i)}getLabel(t){var i=t[1];return null==i&&(i="",t[1]=i),i}}class IfCmd extends BaseCmd{constructor(t){super(t,"if")}parse(t,i){t.length=4;var n="("+this.getCond(t)+")";return t[1]=new Function("return "+n),t}run(t){var i=this.getCond(t).call(this.scenario.scope),n=i?this.getTrueLabel(t):this.getFalseLabel(t);""!==n&&(this.scenario.isDebugMode&&this.scenario.log("#IF "+i+"- GOTO label: "+n),this.scenario.goto(n))}getCond(t){var i=t[1];return null!=i&&""!==i||(i="true",t[1]=i),i}getTrueLabel(t){var i=t[2];return null==i&&(i="",t[2]=i),i}getFalseLabel(t){var i=t[3];return null==i&&(i="",t[3]=i),i}}const Ar=Phaser.Utils.Objects.GetValue;class CmdHandlers{constructor(t){this.cmds={"-":new CustomCmd(t),wait:new WaitCmd(t),label:new LabelCmd(t),exit:new ExitCmd(t),goto:new GotoCmd(t),if:new IfCmd(t)}}resetFromJSON(t){for(var i in this.cmds)this.cmds[i].resetFromJSON(Ar(t,i,void 0));return this}toJSON(){var t={};for(var i in this.cmds)t[i]=this.cmds[i].toJSON();return t}get(t){return this.cmds[t]}isValidCmdName(t){return this.cmds.hasOwnProperty(t)}}class CSVScenario{constructor(t,i){this.setEventEmitter(GetValue$l(i,"eventEmitter",void 0)),this.scene=t,this.timer=void 0,this.instMem=new InstMem(this),this.cmdHandlers=new CmdHandlers(this),this.resetFromJSON(i),this.boot()}resetFromJSON(t){return this._inRunCmdLoop=!1,this.isRunning=GetValue$l(t,"state",!1),this.isPaused=GetValue$l(t,"pause",!1),this.waitEvent=GetValue$l(t,"wait",void 0),this.scope=GetValue$l(t,"scope",void 0),this.timeUnit=GetValue$l(t,"timeUnit",0),this.cmdPrefix=GetValue$l(t,"prefix",Rr),this.argsConvert=GetValue$l(t,"argsConvert",!0),this.argsConvertScope=GetValue$l(t,"argsConvertScope",void 0),this.cmdHandlers.resetFromJSON(GetValue$l(t,"handlers",void 0)),this.instMem.resetFromJSON(GetValue$l(t,"instMem",void 0)),this.delimiter=GetValue$l(t,"delimiter",","),this}toJSON(){return{state:this.isRunning,pause:this.isPaused,wait:this.waitEvent,scope:this.scope,timeUnit:this.timeUnit,prefix:this.cmdPrefix,argsConvert:this.argsConvert,argsConvertScope:this.argsConvertScope,handlers:this.cmdHandlers.toJSON(),instMem:this.instMem.toJSON(),delimiter:this.delimiter}}boot(){this.scene.sys.events.once("shutdown",this.destroy,this)}shutdown(){this.scene&&(this.destroyEventEmitter(),this.clear(),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0)}destroy(){this.shutdown()}load(t,i,n){return this.clear(),this.timeUnit=GetValue$l(n,"timeUnit",this.timeUnit),"string"==typeof this.timeUnit&&(this.timeUnit=_r[this.timeUnit]),this.cmdPrefix=GetValue$l(n,"prefix",this.cmdPrefix),"string"==typeof this.cmdPrefix&&(this.cmdPrefix=new RegExp(this.cmdPrefix)),this.argsConvert=GetValue$l(n,"argsConvert",this.argsConvert),this.argsConvertScope=GetValue$l(n,"argsConvertScope",this.argsConvertScope),this.scope=i,this.delimiter=GetValue$l(n,"delimiter",this.delimiter),this.append(t),this}clear(){this.stop(),this.instMem.resetFromJSON(),this.cmdHandlers.resetFromJSON()}start(t){this.stop();var i=GetValue$l(t,"label","");return this.offset=GetValue$l(t,"offset",0),this.isDebugMode&&this.log("Start at Label: "+i),!!this.goto(i)&&(this.isRunning=!0,this.runNextCmd(),!0)}getIndex(t){var i=this.getCmdHandler("label").getIndex(t);return null==i&&this.error("Label: "+t+" is not found"),i}goto(t){var i;return null!=(i="string"==typeof t?this.getIndex(t):t)&&(this.instMem.setNextIndex(i),!0)}wait(t){if(this.waitEvent=t,"number"==typeof t){var i=t;1===this.timeUnit&&(i*=1e3),this.timer=this.scene.time.delayedCall(i,this.continue,[t],this)}return this}stop(){return this.isRunning?(this.isRunning=!1,this.isPaused=!1,this.waitEvent=void 0,this.timer&&(this.timer.remove(),this.timer=void 0),this):this}complete(){return this.emit("complete",this.scope,this),this.stop(),this}append(t){var i=Tr.parse(t,{delimiter:this.delimiter}).data;return this.parse(i),this}pause(){return this.isRunning?(this.isPaused||(this.isPaused=!0,this.timer&&(this.timer.paused=!0)),this):this}resume(){return this.isRunning&&this.isPaused?(this.isPaused=!1,this.timer&&(this.timer.paused=!1),this):this}continue(t){return!this.isRunning||this.isPaused||void 0===this.waitEvent||t===this.waitEvent&&(this.timer=void 0,this.waitEvent=void 0,this.runNextCmd()),this}get lastLabel(){return this.cmdHandlers.labelCmd.lastLabel}get previousLabel(){return this.cmdHandlers.labelCmd.preLabel}getCmdHandler(t){return"string"!=typeof t&&(t=t[0]),this.cmdHandlers.get(t)}parse(t){for(var i,n,r=this.cmdPrefix,o=0,a=t.length;o<a;o++)if("-"===(n=(i=t[o])[0]))this.appendCommand(i);else if(isNaN(n))if(r.test(n)){var h=n.match(r);i[0]=h[1].toLowerCase(),this.appendCommand(i)||this.error("Line "+o+": "+JSON.stringify(i)+" is not a valid command")}else this.appendCommand(["wait",n]),i[0]="-",this.appendCommand(i);else{var d=parseFloat(n);d>0&&this.appendCommand(["wait",d]),i[0]="-",this.appendCommand(i)}return this}appendCommand(t){var i=this.getCmdHandler(t);return null!=i&&((t=i.parse(t,this.instMem.length))&&this.instMem.append(t),!0)}runNextCmd(){if(!this._inRunCmdLoop){this.threadId;var t,i=this.instMem;for(this._inRunCmdLoop=!0;this.isRunning&&!this.isPaused&&void 0===this.waitEvent;){if(t=i.get(),i.setNextIndex(),null==t){this.complete();break}this.getCmdHandler(t).run(t)}return this._inRunCmdLoop=!1,this}}log(t){return this.emit("log",t,this.scope,this),this}get isDebugMode(){return this.listenerCount("log")>0}error(t){return this.emit("error",t,this.scope,this),this}}Object.assign(CSVScenario.prototype,W);const _r={ms:0,s:1,sec:1},Rr=/^#([a-zA-Z]+)/;class CSVScenarioPlugin extends Phaser.Plugins.BasePlugin{constructor(t){super(t)}start(){this.game.events.on("destroy",this.destroy,this)}add(t,i){return new CSVScenario(t,i)}}window.SpinePlugin=function(t){var i={};function __webpack_require__(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}return __webpack_require__.m=t,__webpack_require__.c=i,__webpack_require__.d=function(t,i,n){__webpack_require__.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:n})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(t,i){if(1&i&&(t=__webpack_require__(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var r in t)__webpack_require__.d(n,r,function(i){return t[i]}.bind(null,r));return n},__webpack_require__.n=function(t){var i=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(i,"a",i),i},__webpack_require__.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=63)}([function(t,i){function getProperty2(t,i,n){var r=n?t[i]:Object.getOwnPropertyDescriptor(t,i);return!n&&r.value&&"object"==typeof r.value&&(r=r.value),!(!r||!function hasGetterOrSetter2(t){return!!t.get&&"function"==typeof t.get||!!t.set&&"function"==typeof t.set}(r))&&(void 0===r.enumerable&&(r.enumerable=!0),void 0===r.configurable&&(r.configurable=!0),r)}function hasNonConfigurable2(t,i){var n=Object.getOwnPropertyDescriptor(t,i);return!!n&&(n.value&&"object"==typeof n.value&&(n=n.value),!1===n.configurable)}function extend2(t,i,n,r){for(var o in i)if(i.hasOwnProperty(o)){var a=getProperty2(i,o,n);if(!1!==a){if(hasNonConfigurable2((r||t).prototype,o)){if(Class2.ignoreFinals)continue;throw new Error("cannot override final property '"+o+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,o,a)}else t.prototype[o]=i[o]}}function mixin2(t,i){if(i){Array.isArray(i)||(i=[i]);for(var n=0;n<i.length;n++)extend2(t,i[n].prototype||i[n])}}function Class2(t){var i,n;if(t||(t={}),t.initialize){if("function"!=typeof t.initialize)throw new Error("initialize must be a function");i=t.initialize,delete t.initialize}else if(t.Extends){var r=t.Extends;i=function(){r.apply(this,arguments)}}else i=function(){};t.Extends?(i.prototype=Object.create(t.Extends.prototype),i.prototype.constructor=i,n=t.Extends,delete t.Extends):i.prototype.constructor=i;var o=null;return t.Mixins&&(o=t.Mixins,delete t.Mixins),mixin2(i,o),extend2(i,t,!0,n),i}Class2.extend=extend2,Class2.mixin=mixin2,Class2.ignoreFinals=!1,t.exports=Class2},function(t,i){t.exports=function(){}},function(t,i,n){var r=n(0),o=n(32),a=new r({initialize:function Vector24(t,i){this.x=0,this.y=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0):(void 0===i&&(i=t),this.x=t||0,this.y=i||0)},clone:function(){return new a(this.x,this.y)},copy:function(t){return this.x=t.x||0,this.y=t.y||0,this},setFromObject:function(t){return this.x=t.x||0,this.y=t.y||0,this},set:function(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setTo:function(t,i){return this.set(t,i)},setToPolar:function(t,i){return null==i&&(i=1),this.x=Math.cos(t)*i,this.y=Math.sin(t)*i,this},equals:function(t){return this.x===t.x&&this.y===t.y},fuzzyEquals:function(t,i){return o(this.x,t.x,i)&&o(this.y,t.y,i)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},setAngle:function(t){return this.setToPolar(t,this.length())},add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(t){var i=t.x-this.x,n=t.y-this.y;return Math.sqrt(i*i+n*n)},distanceSq:function(t){var i=t.x-this.x,n=t.y-this.y;return i*i+n*n},length:function(){var t=this.x,i=this.y;return Math.sqrt(t*t+i*i)},setLength:function(t){return this.normalize().scale(t)},lengthSq:function(){var t=this.x,i=this.y;return t*t+i*i},normalize:function(){var t=this.x,i=this.y,n=t*t+i*i;return n>0&&(n=1/Math.sqrt(n),this.x=t*n,this.y=i*n),this},normalizeRightHand:function(){var t=this.x;return this.x=-1*this.y,this.y=t,this},normalizeLeftHand:function(){var t=this.x;return this.x=this.y,this.y=-1*t,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lerp:function(t,i){void 0===i&&(i=0);var n=this.x,r=this.y;return this.x=n+i*(t.x-n),this.y=r+i*(t.y-r),this},transformMat3:function(t){var i=this.x,n=this.y,r=t.val;return this.x=r[0]*i+r[3]*n+r[6],this.y=r[1]*i+r[4]*n+r[7],this},transformMat4:function(t){var i=this.x,n=this.y,r=t.val;return this.x=r[0]*i+r[4]*n+r[12],this.y=r[1]*i+r[5]*n+r[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(t){var i=this.length();return i&&i>t&&this.scale(t/i),this},reflect:function(t){return t=t.clone().normalize(),this.subtract(t.scale(2*this.dot(t)))},mirror:function(t){return this.reflect(t).negate()},rotate:function(t){var i=Math.cos(t),n=Math.sin(t);return this.set(i*this.x-n*this.y,n*this.x+i*this.y)}});a.ZERO=new a,a.RIGHT=new a(1,0),a.LEFT=new a(-1,0),a.UP=new a(0,-1),a.DOWN=new a(0,1),a.ONE=new a(1,1),t.exports=a},function(t,i){t.exports=function(t,i,n){return Math.max(i,Math.min(n,t))}},function(t,i){var n={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};t.exports=n},function(t,i){t.exports=function(t,i,n,r){var o=t.length;if(i<0||i>o||i>=n||n>o||i+n>o){if(r)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},function(t,i){t.exports=function(t,i,n){var r=n-i;return i+((t-i)%r+r)%r}},function(t,i){t.exports=function(t){if("object"!=typeof t||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}return!0}},function(t,i,n){var r=n(4);t.exports=function(t){return t>Math.PI&&(t-=r.PI2),Math.abs(((t+r.TAU)%r.PI2-r.PI2)%r.PI2)}},function(t,i,n){var r=n(4);t.exports=function(t){return t*r.RAD_TO_DEG}},function(t,i){t.exports=function(t,i,n){if(t&&"number"!=typeof t){if(t.hasOwnProperty(i))return t[i];if(-1!==i.indexOf(".")){for(var r=i.split("."),o=t,a=n,h=0;h<r.length;h++){if(!o.hasOwnProperty(r[h])){a=n;break}a=o[r[h]],o=o[r[h]]}return a}return n}return n}},function(t,i){t.exports=function(t,i,n){var r=typeof t;return t&&"number"!==r&&"string"!==r&&t.hasOwnProperty(i)&&void 0!==t[i]?t[i]:n}},function(t,i){t.exports=function(t,i){if(!(i>=t.length)){for(var n=t.length-1,r=t[i],o=i;o<n;o++)t[o]=t[o+1];return t.length=n,r}}},function(t,i,n){var r=n(0),o=n(26),a=new r({initialize:function Point4(t,i){void 0===t&&(t=0),void 0===i&&(i=t),this.type=o.POINT,this.x=t,this.y=i},setTo:function(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.x=t,this.y=i,this}});t.exports=a},function(t,i,n){var r=new(n(0))({initialize:function Vector32(t,i,n){this.x=0,this.y=0,this.z=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=i||0,this.z=n||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clone:function(){return new r(this.x,this.y,this.z)},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this},crossVectors:function(t,i){var n=t.x,r=t.y,o=t.z,a=i.x,h=i.y,d=i.z;return this.x=r*d-o*h,this.y=o*a-n*d,this.z=n*h-r*a,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},set:function(t,i,n){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=i||0,this.z=n||0),this},setFromMatrixPosition:function(t){return this.fromArray(t.val,12)},setFromMatrixColumn:function(t,i){return this.fromArray(t.val,4*i)},fromArray:function(t,i){return void 0===i&&(i=0),this.x=t[i],this.y=t[i+1],this.z=t[i+2],this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addScale:function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(t){var i=t.x-this.x,n=t.y-this.y,r=t.z-this.z||0;return Math.sqrt(i*i+n*n+r*r)},distanceSq:function(t){var i=t.x-this.x,n=t.y-this.y,r=t.z-this.z||0;return i*i+n*n+r*r},length:function(){var t=this.x,i=this.y,n=this.z;return Math.sqrt(t*t+i*i+n*n)},lengthSq:function(){var t=this.x,i=this.y,n=this.z;return t*t+i*i+n*n},normalize:function(){var t=this.x,i=this.y,n=this.z,r=t*t+i*i+n*n;return r>0&&(r=1/Math.sqrt(r),this.x=t*r,this.y=i*r,this.z=n*r),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function(t){var i=this.x,n=this.y,r=this.z,o=t.x,a=t.y,h=t.z;return this.x=n*h-r*a,this.y=r*o-i*h,this.z=i*a-n*o,this},lerp:function(t,i){void 0===i&&(i=0);var n=this.x,r=this.y,o=this.z;return this.x=n+i*(t.x-n),this.y=r+i*(t.y-r),this.z=o+i*(t.z-o),this},applyMatrix3:function(t){var i=this.x,n=this.y,r=this.z,o=t.val;return this.x=o[0]*i+o[3]*n+o[6]*r,this.y=o[1]*i+o[4]*n+o[7]*r,this.z=o[2]*i+o[5]*n+o[8]*r,this},applyMatrix4:function(t){var i=this.x,n=this.y,r=this.z,o=t.val,a=1/(o[3]*i+o[7]*n+o[11]*r+o[15]);return this.x=(o[0]*i+o[4]*n+o[8]*r+o[12])*a,this.y=(o[1]*i+o[5]*n+o[9]*r+o[13])*a,this.z=(o[2]*i+o[6]*n+o[10]*r+o[14])*a,this},transformMat3:function(t){var i=this.x,n=this.y,r=this.z,o=t.val;return this.x=i*o[0]+n*o[3]+r*o[6],this.y=i*o[1]+n*o[4]+r*o[7],this.z=i*o[2]+n*o[5]+r*o[8],this},transformMat4:function(t){var i=this.x,n=this.y,r=this.z,o=t.val;return this.x=o[0]*i+o[4]*n+o[8]*r+o[12],this.y=o[1]*i+o[5]*n+o[9]*r+o[13],this.z=o[2]*i+o[6]*n+o[10]*r+o[14],this},transformCoordinates:function(t){var i=this.x,n=this.y,r=this.z,o=t.val,a=i*o[0]+n*o[4]+r*o[8]+o[12],h=i*o[1]+n*o[5]+r*o[9]+o[13],d=i*o[2]+n*o[6]+r*o[10]+o[14],f=i*o[3]+n*o[7]+r*o[11]+o[15];return this.x=a/f,this.y=h/f,this.z=d/f,this},transformQuat:function(t){var i=this.x,n=this.y,r=this.z,o=t.x,a=t.y,h=t.z,d=t.w,f=d*i+a*r-h*n,p=d*n+h*i-o*r,T=d*r+o*n-a*i,b=-o*i-a*n-h*r;return this.x=f*d+b*-o+p*-h-T*-a,this.y=p*d+b*-a+T*-o-f*-h,this.z=T*d+b*-h+f*-a-p*-o,this},project:function(t){var i=this.x,n=this.y,r=this.z,o=t.val,a=o[0],h=o[1],d=o[2],f=o[3],p=o[4],T=o[5],b=o[6],S=o[7],A=o[8],P=o[9],O=o[10],L=o[11],D=o[12],I=o[13],F=o[14],B=1/(i*f+n*S+r*L+o[15]);return this.x=(i*a+n*p+r*A+D)*B,this.y=(i*h+n*T+r*P+I)*B,this.z=(i*d+n*b+r*O+F)*B,this},projectViewMatrix:function(t,i){return this.applyMatrix4(t).applyMatrix4(i)},unprojectViewMatrix:function(t,i){return this.applyMatrix4(t).applyMatrix4(i)},unproject:function(t,i){var n=t.x,r=t.y,o=t.z,a=t.w,h=this.x-n,d=a-this.y-1-r,f=this.z;return this.x=2*h/o-1,this.y=2*d/a-1,this.z=2*f-1,this.project(i)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});r.ZERO=new r,r.RIGHT=new r(1,0,0),r.LEFT=new r(-1,0,0),r.UP=new r(0,-1,0),r.DOWN=new r(0,1,0),r.FORWARD=new r(0,0,1),r.BACK=new r(0,0,-1),r.ONE=new r(1,1,1),t.exports=r},function(t,i){t.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},function(t,i,n){var r=n(24),o=n(57);t.exports=function(t,i){if(void 0===i&&(i=90),!r(t))return null;if("string"!=typeof i&&(i=(i%360+360)%360),90===i||-270===i||"rotateLeft"===i)(t=o(t)).reverse();else if(-90===i||270===i||"rotateRight"===i)t.reverse(),t=o(t);else if(180===Math.abs(i)||"rotate180"===i){for(var n=0;n<t.length;n++)t[n].reverse();t.reverse()}return t}},function(t,i){t.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(t,i){t.exports=function(t,i){return Math.random()*(i-t)+t}},function(t,i,n){var r=n(4);t.exports=function(t){return t*r.DEG_TO_RAD}},function(t,i,n){var r=n(0),o=n(14),a=1e-6,h=new r({initialize:function Matrix42(t){this.val=new Float32Array(16),t?this.copy(t):this.identity()},clone:function(){return new h(this)},set:function(t){return this.copy(t)},setValues:function(t,i,n,r,o,a,h,d,f,p,T,b,S,A,P,O){var L=this.val;return L[0]=t,L[1]=i,L[2]=n,L[3]=r,L[4]=o,L[5]=a,L[6]=h,L[7]=d,L[8]=f,L[9]=p,L[10]=T,L[11]=b,L[12]=S,L[13]=A,L[14]=P,L[15]=O,this},copy:function(t){var i=t.val;return this.setValues(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9],i[10],i[11],i[12],i[13],i[14],i[15])},fromArray:function(t){return this.setValues(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(t,i,n){var r=d.fromQuat(n).val,o=i.x,a=i.y,h=i.z;return this.setValues(r[0]*o,r[1]*o,r[2]*o,0,r[4]*a,r[5]*a,r[6]*a,0,r[8]*h,r[9]*h,r[10]*h,0,t.x,t.y,t.z,1)},xyz:function(t,i,n){this.identity();var r=this.val;return r[12]=t,r[13]=i,r[14]=n,this},scaling:function(t,i,n){this.zero();var r=this.val;return r[0]=t,r[5]=i,r[10]=n,r[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var t=this.val,i=t[1],n=t[2],r=t[3],o=t[6],a=t[7],h=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=i,t[6]=t[9],t[7]=t[13],t[8]=n,t[9]=o,t[11]=t[14],t[12]=r,t[13]=a,t[14]=h,this},getInverse:function(t){return this.copy(t),this.invert()},invert:function(){var t=this.val,i=t[0],n=t[1],r=t[2],o=t[3],a=t[4],h=t[5],d=t[6],f=t[7],p=t[8],T=t[9],b=t[10],S=t[11],A=t[12],P=t[13],O=t[14],L=t[15],D=i*h-n*a,I=i*d-r*a,F=i*f-o*a,B=n*d-r*h,N=n*f-o*h,Y=r*f-o*d,X=p*P-T*A,G=p*O-b*A,U=p*L-S*A,V=T*O-b*P,z=T*L-S*P,W=b*L-S*O,H=D*W-I*z+F*V+B*U-N*G+Y*X;return H?(H=1/H,this.setValues((h*W-d*z+f*V)*H,(r*z-n*W-o*V)*H,(P*Y-O*N+L*B)*H,(b*N-T*Y-S*B)*H,(d*U-a*W-f*G)*H,(i*W-r*U+o*G)*H,(O*F-A*Y-L*I)*H,(p*Y-b*F+S*I)*H,(a*z-h*U+f*X)*H,(n*U-i*z-o*X)*H,(A*N-P*F+L*D)*H,(T*F-p*N-S*D)*H,(h*G-a*V-d*X)*H,(i*V-n*G+r*X)*H,(P*I-A*B-O*D)*H,(p*B-T*I+b*D)*H)):this},adjoint:function(){var t=this.val,i=t[0],n=t[1],r=t[2],o=t[3],a=t[4],h=t[5],d=t[6],f=t[7],p=t[8],T=t[9],b=t[10],S=t[11],A=t[12],P=t[13],O=t[14],L=t[15];return this.setValues(h*(b*L-S*O)-T*(d*L-f*O)+P*(d*S-f*b),-(n*(b*L-S*O)-T*(r*L-o*O)+P*(r*S-o*b)),n*(d*L-f*O)-h*(r*L-o*O)+P*(r*f-o*d),-(n*(d*S-f*b)-h*(r*S-o*b)+T*(r*f-o*d)),-(a*(b*L-S*O)-p*(d*L-f*O)+A*(d*S-f*b)),i*(b*L-S*O)-p*(r*L-o*O)+A*(r*S-o*b),-(i*(d*L-f*O)-a*(r*L-o*O)+A*(r*f-o*d)),i*(d*S-f*b)-a*(r*S-o*b)+p*(r*f-o*d),a*(T*L-S*P)-p*(h*L-f*P)+A*(h*S-f*T),-(i*(T*L-S*P)-p*(n*L-o*P)+A*(n*S-o*T)),i*(h*L-f*P)-a*(n*L-o*P)+A*(n*f-o*h),-(i*(h*S-f*T)-a*(n*S-o*T)+p*(n*f-o*h)),-(a*(T*O-b*P)-p*(h*O-d*P)+A*(h*b-d*T)),i*(T*O-b*P)-p*(n*O-r*P)+A*(n*b-r*T),-(i*(h*O-d*P)-a*(n*O-r*P)+A*(n*d-r*h)),i*(h*b-d*T)-a*(n*b-r*T)+p*(n*d-r*h))},determinant:function(){var t=this.val,i=t[0],n=t[1],r=t[2],o=t[3],a=t[4],h=t[5],d=t[6],f=t[7],p=t[8],T=t[9],b=t[10],S=t[11],A=t[12],P=t[13],O=t[14],L=t[15];return(i*h-n*a)*(b*L-S*O)-(i*d-r*a)*(T*L-S*P)+(i*f-o*a)*(T*O-b*P)+(n*d-r*h)*(p*L-S*A)-(n*f-o*h)*(p*O-b*A)+(r*f-o*d)*(p*P-T*A)},multiply:function(t){var i=this.val,n=i[0],r=i[1],o=i[2],a=i[3],h=i[4],d=i[5],f=i[6],p=i[7],T=i[8],b=i[9],S=i[10],A=i[11],P=i[12],O=i[13],L=i[14],D=i[15],I=t.val,F=I[0],B=I[1],N=I[2],Y=I[3];return i[0]=F*n+B*h+N*T+Y*P,i[1]=F*r+B*d+N*b+Y*O,i[2]=F*o+B*f+N*S+Y*L,i[3]=F*a+B*p+N*A+Y*D,F=I[4],B=I[5],N=I[6],Y=I[7],i[4]=F*n+B*h+N*T+Y*P,i[5]=F*r+B*d+N*b+Y*O,i[6]=F*o+B*f+N*S+Y*L,i[7]=F*a+B*p+N*A+Y*D,F=I[8],B=I[9],N=I[10],Y=I[11],i[8]=F*n+B*h+N*T+Y*P,i[9]=F*r+B*d+N*b+Y*O,i[10]=F*o+B*f+N*S+Y*L,i[11]=F*a+B*p+N*A+Y*D,F=I[12],B=I[13],N=I[14],Y=I[15],i[12]=F*n+B*h+N*T+Y*P,i[13]=F*r+B*d+N*b+Y*O,i[14]=F*o+B*f+N*S+Y*L,i[15]=F*a+B*p+N*A+Y*D,this},multiplyLocal:function(t){var i=this.val,n=t.val;return this.setValues(i[0]*n[0]+i[1]*n[4]+i[2]*n[8]+i[3]*n[12],i[0]*n[1]+i[1]*n[5]+i[2]*n[9]+i[3]*n[13],i[0]*n[2]+i[1]*n[6]+i[2]*n[10]+i[3]*n[14],i[0]*n[3]+i[1]*n[7]+i[2]*n[11]+i[3]*n[15],i[4]*n[0]+i[5]*n[4]+i[6]*n[8]+i[7]*n[12],i[4]*n[1]+i[5]*n[5]+i[6]*n[9]+i[7]*n[13],i[4]*n[2]+i[5]*n[6]+i[6]*n[10]+i[7]*n[14],i[4]*n[3]+i[5]*n[7]+i[6]*n[11]+i[7]*n[15],i[8]*n[0]+i[9]*n[4]+i[10]*n[8]+i[11]*n[12],i[8]*n[1]+i[9]*n[5]+i[10]*n[9]+i[11]*n[13],i[8]*n[2]+i[9]*n[6]+i[10]*n[10]+i[11]*n[14],i[8]*n[3]+i[9]*n[7]+i[10]*n[11]+i[11]*n[15],i[12]*n[0]+i[13]*n[4]+i[14]*n[8]+i[15]*n[12],i[12]*n[1]+i[13]*n[5]+i[14]*n[9]+i[15]*n[13],i[12]*n[2]+i[13]*n[6]+i[14]*n[10]+i[15]*n[14],i[12]*n[3]+i[13]*n[7]+i[14]*n[11]+i[15]*n[15])},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,i){var n=t.val,r=i.val,o=n[0],a=n[4],h=n[8],d=n[12],f=n[1],p=n[5],T=n[9],b=n[13],S=n[2],A=n[6],P=n[10],O=n[14],L=n[3],D=n[7],I=n[11],F=n[15],B=r[0],N=r[4],Y=r[8],X=r[12],G=r[1],U=r[5],V=r[9],z=r[13],W=r[2],H=r[6],q=r[10],Z=r[14],K=r[3],J=r[7],Q=r[11],$=r[15];return this.setValues(o*B+a*G+h*W+d*K,f*B+p*G+T*W+b*K,S*B+A*G+P*W+O*K,L*B+D*G+I*W+F*K,o*N+a*U+h*H+d*J,f*N+p*U+T*H+b*J,S*N+A*U+P*H+O*J,L*N+D*U+I*H+F*J,o*Y+a*V+h*q+d*Q,f*Y+p*V+T*q+b*Q,S*Y+A*V+P*q+O*Q,L*Y+D*V+I*q+F*Q,o*X+a*z+h*Z+d*$,f*X+p*z+T*Z+b*$,S*X+A*z+P*Z+O*$,L*X+D*z+I*Z+F*$)},translate:function(t){return this.translateXYZ(t.x,t.y,t.z)},translateXYZ:function(t,i,n){var r=this.val;return r[12]=r[0]*t+r[4]*i+r[8]*n+r[12],r[13]=r[1]*t+r[5]*i+r[9]*n+r[13],r[14]=r[2]*t+r[6]*i+r[10]*n+r[14],r[15]=r[3]*t+r[7]*i+r[11]*n+r[15],this},scale:function(t){return this.scaleXYZ(t.x,t.y,t.z)},scaleXYZ:function(t,i,n){var r=this.val;return r[0]=r[0]*t,r[1]=r[1]*t,r[2]=r[2]*t,r[3]=r[3]*t,r[4]=r[4]*i,r[5]=r[5]*i,r[6]=r[6]*i,r[7]=r[7]*i,r[8]=r[8]*n,r[9]=r[9]*n,r[10]=r[10]*n,r[11]=r[11]*n,this},makeRotationAxis:function(t,i){var n=Math.cos(i),r=Math.sin(i),o=1-n,a=t.x,h=t.y,d=t.z,f=o*a,p=o*h;return this.setValues(f*a+n,f*h-r*d,f*d+r*h,0,f*h+r*d,p*h+n,p*d-r*a,0,f*d-r*h,p*d+r*a,o*d*d+n,0,0,0,0,1)},rotate:function(t,i){var n=this.val,r=i.x,o=i.y,h=i.z,d=Math.sqrt(r*r+o*o+h*h);if(Math.abs(d)<a)return this;r*=d=1/d,o*=d,h*=d;var f=Math.sin(t),p=Math.cos(t),T=1-p,b=n[0],S=n[1],A=n[2],P=n[3],O=n[4],L=n[5],D=n[6],I=n[7],F=n[8],B=n[9],N=n[10],Y=n[11],X=n[12],G=n[13],U=n[14],V=n[15],z=r*r*T+p,W=o*r*T+h*f,H=h*r*T-o*f,q=r*o*T-h*f,Z=o*o*T+p,K=h*o*T+r*f,J=r*h*T+o*f,Q=o*h*T-r*f,$=h*h*T+p;return this.setValues(b*z+O*W+F*H,S*z+L*W+B*H,A*z+D*W+N*H,P*z+I*W+Y*H,b*q+O*Z+F*K,S*q+L*Z+B*K,A*q+D*Z+N*K,P*q+I*Z+Y*K,b*J+O*Q+F*$,S*J+L*Q+B*$,A*J+D*Q+N*$,P*J+I*Q+Y*$,X,G,U,V)},rotateX:function(t){var i=this.val,n=Math.sin(t),r=Math.cos(t),o=i[4],a=i[5],h=i[6],d=i[7],f=i[8],p=i[9],T=i[10],b=i[11];return i[4]=o*r+f*n,i[5]=a*r+p*n,i[6]=h*r+T*n,i[7]=d*r+b*n,i[8]=f*r-o*n,i[9]=p*r-a*n,i[10]=T*r-h*n,i[11]=b*r-d*n,this},rotateY:function(t){var i=this.val,n=Math.sin(t),r=Math.cos(t),o=i[0],a=i[1],h=i[2],d=i[3],f=i[8],p=i[9],T=i[10],b=i[11];return i[0]=o*r-f*n,i[1]=a*r-p*n,i[2]=h*r-T*n,i[3]=d*r-b*n,i[8]=o*n+f*r,i[9]=a*n+p*r,i[10]=h*n+T*r,i[11]=d*n+b*r,this},rotateZ:function(t){var i=this.val,n=Math.sin(t),r=Math.cos(t),o=i[0],a=i[1],h=i[2],d=i[3],f=i[4],p=i[5],T=i[6],b=i[7];return i[0]=o*r+f*n,i[1]=a*r+p*n,i[2]=h*r+T*n,i[3]=d*r+b*n,i[4]=f*r-o*n,i[5]=p*r-a*n,i[6]=T*r-h*n,i[7]=b*r-d*n,this},fromRotationTranslation:function(t,i){var n=t.x,r=t.y,o=t.z,a=t.w,h=n+n,d=r+r,f=o+o,p=n*h,T=n*d,b=n*f,S=r*d,A=r*f,P=o*f,O=a*h,L=a*d,D=a*f;return this.setValues(1-(S+P),T+D,b-L,0,T-D,1-(p+P),A+O,0,b+L,A-O,1-(p+S),0,i.x,i.y,i.z,1)},fromQuat:function(t){var i=t.x,n=t.y,r=t.z,o=t.w,a=i+i,h=n+n,d=r+r,f=i*a,p=i*h,T=i*d,b=n*h,S=n*d,A=r*d,P=o*a,O=o*h,L=o*d;return this.setValues(1-(b+A),p+L,T-O,0,p-L,1-(f+A),S+P,0,T+O,S-P,1-(f+b),0,0,0,0,1)},frustum:function(t,i,n,r,o,a){var h=1/(i-t),d=1/(r-n),f=1/(o-a);return this.setValues(2*o*h,0,0,0,0,2*o*d,0,0,(i+t)*h,(r+n)*d,(a+o)*f,-1,0,0,a*o*2*f,0)},perspective:function(t,i,n,r){var o=1/Math.tan(t/2),a=1/(n-r);return this.setValues(o/i,0,0,0,0,o,0,0,0,0,(r+n)*a,-1,0,0,2*r*n*a,0)},perspectiveLH:function(t,i,n,r){return this.setValues(2*n/t,0,0,0,0,2*n/i,0,0,0,0,-r/(n-r),1,0,0,n*r/(n-r),0)},ortho:function(t,i,n,r,o,a){var h=t-i,d=n-r,f=o-a;return h=0===h?h:1/h,d=0===d?d:1/d,f=0===f?f:1/f,this.setValues(-2*h,0,0,0,0,-2*d,0,0,0,0,2*f,0,(t+i)*h,(r+n)*d,(a+o)*f,1)},lookAtRH:function(t,i,n){var r=this.val;return b.subVectors(t,i),0===b.getLengthSquared()&&(b.z=1),b.normalize(),p.crossVectors(n,b),0===p.getLengthSquared()&&(1===Math.abs(n.z)?b.x+=1e-4:b.z+=1e-4,b.normalize(),p.crossVectors(n,b)),p.normalize(),T.crossVectors(b,p),r[0]=p.x,r[1]=p.y,r[2]=p.z,r[4]=T.x,r[5]=T.y,r[6]=T.z,r[8]=b.x,r[9]=b.y,r[10]=b.z,this},lookAt:function(t,i,n){var r=t.x,o=t.y,h=t.z,d=n.x,f=n.y,p=n.z,T=i.x,b=i.y,S=i.z;if(Math.abs(r-T)<a&&Math.abs(o-b)<a&&Math.abs(h-S)<a)return this.identity();var A=r-T,P=o-b,O=h-S,L=1/Math.sqrt(A*A+P*P+O*O),D=f*(O*=L)-p*(P*=L),I=p*(A*=L)-d*O,F=d*P-f*A;(L=Math.sqrt(D*D+I*I+F*F))?(D*=L=1/L,I*=L,F*=L):(D=0,I=0,F=0);var B=P*F-O*I,N=O*D-A*F,Y=A*I-P*D;return(L=Math.sqrt(B*B+N*N+Y*Y))?(B*=L=1/L,N*=L,Y*=L):(B=0,N=0,Y=0),this.setValues(D,B,A,0,I,N,P,0,F,Y,O,0,-(D*r+I*o+F*h),-(B*r+N*o+Y*h),-(A*r+P*o+O*h),1)},yawPitchRoll:function(t,i,n){this.zero(),d.zero(),f.zero();var r=this.val,o=d.val,a=f.val,h=Math.sin(n),p=Math.cos(n);return r[10]=1,r[15]=1,r[0]=p,r[1]=h,r[4]=-h,r[5]=p,h=Math.sin(i),p=Math.cos(i),o[0]=1,o[15]=1,o[5]=p,o[10]=p,o[9]=-h,o[6]=h,h=Math.sin(t),p=Math.cos(t),a[5]=1,a[15]=1,a[0]=p,a[2]=-h,a[8]=h,a[10]=p,this.multiplyLocal(d),this.multiplyLocal(f),this},setWorldMatrix:function(t,i,n,r,o){return this.yawPitchRoll(t.y,t.x,t.z),d.scaling(n.x,n.y,n.z),f.xyz(i.x,i.y,i.z),this.multiplyLocal(d),this.multiplyLocal(f),r&&this.multiplyLocal(r),o&&this.multiplyLocal(o),this},multiplyToMat4:function(t,i){var n=this.val,r=t.val,o=n[0],a=n[1],h=n[2],d=n[3],f=n[4],p=n[5],T=n[6],b=n[7],S=n[8],A=n[9],P=n[10],O=n[11],L=n[12],D=n[13],I=n[14],F=n[15],B=r[0],N=r[1],Y=r[2],X=r[3],G=r[4],U=r[5],V=r[6],z=r[7],W=r[8],H=r[9],q=r[10],Z=r[11],K=r[12],J=r[13],Q=r[14],$=r[15];return i.setValues(B*o+N*f+Y*S+X*L,N*a+N*p+Y*A+X*D,Y*h+N*T+Y*P+X*I,X*d+N*b+Y*O+X*F,G*o+U*f+V*S+z*L,G*a+U*p+V*A+z*D,G*h+U*T+V*P+z*I,G*d+U*b+V*O+z*F,W*o+H*f+q*S+Z*L,W*a+H*p+q*A+Z*D,W*h+H*T+q*P+Z*I,W*d+H*b+q*O+Z*F,K*o+J*f+Q*S+$*L,K*a+J*p+Q*A+$*D,K*h+J*T+Q*P+$*I,K*d+J*b+Q*O+$*F)},fromRotationXYTranslation:function(t,i,n){var r=i.x,o=i.y,a=i.z,h=Math.sin(t.x),d=Math.cos(t.x),f=Math.sin(t.y),p=Math.cos(t.y),T=r,b=o,S=a,A=-h,P=0-A*f,O=0-d*f,L=A*p,D=d*p;return n||(T=p*r+f*a,b=P*r+d*o+L*a,S=O*r+h*o+D*a),this.setValues(p,P,O,0,0,d,h,0,f,L,D,0,T,b,S,1)},getMaxScaleOnAxis:function(){var t=this.val,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(i,n,r))}}),d=new h,f=new h,p=new o,T=new o,b=new o;t.exports=h},function(t,i,n){var r=n(0),o=n(15),a=n(205),h=n(11),d=n(216),f=n(45),p=n(217),T=n(46),b=new r({initialize:function File3(t,i){this.loader=t,this.cache=h(i,"cache",!1),this.type=h(i,"type",!1),this.key=h(i,"key",!1);var n=this.key;if(t.prefix&&""!==t.prefix&&(this.key=t.prefix+n),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var r=h(i,"url");void 0===r?r=t.path+n+"."+h(i,"extension",""):"string"!=typeof r||r.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)||(r=t.path+r),this.url=r,this.src="",this.xhrSettings=T(h(i,"responseType",void 0)),h(i,"xhrSettings",!1)&&(this.xhrSettings=f(this.xhrSettings,h(i,"xhrSettings",{}))),this.xhrLoader=null,this.state="function"==typeof this.url?o.FILE_POPULATED:o.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=h(i,"config",{}),this.multiFile,this.linkFile},setLink:function(t){this.linkFile=t,t.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===o.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=o.FILE_LOADING,this.src=d(this,this.loader.baseURL),0===this.src.indexOf("data:")?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=p(this,this.loader.xhr))},onLoad:function(t,i){var n=t.responseURL&&0===t.responseURL.indexOf("file://")&&0===i.target.status,r=!(i.target&&200!==i.target.status)||n;4===t.readyState&&t.status>=400&&t.status<=599&&(r=!1),this.state=o.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,r)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(t){t.lengthComputable&&(this.bytesLoaded=t.loaded,this.bytesTotal=t.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(a.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=o.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=o.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=o.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(t){void 0===t&&(t=this.data);var i=this.key,n=this.type;this.loader.emit(a.FILE_COMPLETE,i,n,t),this.loader.emit(a.FILE_KEY_COMPLETE+n+"-"+i,i,n,t),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});b.createObjectURL=function(t,i,n){if("function"==typeof URL)t.src=URL.createObjectURL(i);else{var r=new FileReader;r.onload=function(){t.removeAttribute("crossOrigin"),t.src="data:"+(i.type||n)+";base64,"+r.result.split(",")[1]},r.onerror=t.onerror,r.readAsDataURL(i)}},b.revokeObjectURL=function(t){"function"==typeof URL&&URL.revokeObjectURL(t.src)},t.exports=b},function(t,i){var n={},r={install:function(t){for(var i in n)t[i]=n[i]},register:function(t,i){n[t]=i},destroy:function(){n={}}};t.exports=r},function(t,i,n){var r=n(0),o=n(4),a=n(2),h=new r({initialize:function TransformMatrix2(t,i,n,r,o,a){void 0===t&&(t=1),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===o&&(o=0),void 0===a&&(a=0),this.matrix=new Float32Array([t,i,n,r,o,a,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(t){this.matrix[0]=t}},b:{get:function(){return this.matrix[1]},set:function(t){this.matrix[1]=t}},c:{get:function(){return this.matrix[2]},set:function(t){this.matrix[2]=t}},d:{get:function(){return this.matrix[3]},set:function(t){this.matrix[3]=t}},e:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},f:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},tx:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},ty:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var t=this.matrix,i=t[0],n=t[1],r=t[2],a=t[3];return i||n?n>0?Math.acos(i/this.scaleX):-Math.acos(i/this.scaleX):r||a?o.TAU-(a>0?Math.acos(-r/this.scaleY):-Math.acos(r/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var t=this.matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},translate:function(t,i){var n=this.matrix;return n[4]=n[0]*t+n[2]*i+n[4],n[5]=n[1]*t+n[3]*i+n[5],this},scale:function(t,i){var n=this.matrix;return n[0]*=t,n[1]*=t,n[2]*=i,n[3]*=i,this},rotate:function(t){var i=Math.sin(t),n=Math.cos(t),r=this.matrix,o=r[0],a=r[1],h=r[2],d=r[3];return r[0]=o*n+h*i,r[1]=a*n+d*i,r[2]=o*-i+h*n,r[3]=a*-i+d*n,this},multiply:function(t,i){var n=this.matrix,r=t.matrix,o=n[0],a=n[1],h=n[2],d=n[3],f=n[4],p=n[5],T=r[0],b=r[1],S=r[2],A=r[3],P=r[4],O=r[5],L=void 0===i?this:i;return L.a=T*o+b*h,L.b=T*a+b*d,L.c=S*o+A*h,L.d=S*a+A*d,L.e=P*o+O*h+f,L.f=P*a+O*d+p,L},multiplyWithOffset:function(t,i,n){var r=this.matrix,o=t.matrix,a=r[0],h=r[1],d=r[2],f=r[3],p=i*a+n*d+r[4],T=i*h+n*f+r[5],b=o[0],S=o[1],A=o[2],P=o[3],O=o[4],L=o[5];return r[0]=b*a+S*d,r[1]=b*h+S*f,r[2]=A*a+P*d,r[3]=A*h+P*f,r[4]=O*a+L*d+p,r[5]=O*h+L*f+T,this},transform:function(t,i,n,r,o,a){var h=this.matrix,d=h[0],f=h[1],p=h[2],T=h[3],b=h[4],S=h[5];return h[0]=t*d+i*p,h[1]=t*f+i*T,h[2]=n*d+r*p,h[3]=n*f+r*T,h[4]=o*d+a*p+b,h[5]=o*f+a*T+S,this},transformPoint:function(t,i,n){void 0===n&&(n={x:0,y:0});var r=this.matrix,o=r[0],a=r[1],h=r[2],d=r[3],f=r[4],p=r[5];return n.x=t*o+i*h+f,n.y=t*a+i*d+p,n},invert:function(){var t=this.matrix,i=t[0],n=t[1],r=t[2],o=t[3],a=t[4],h=t[5],d=i*o-n*r;return t[0]=o/d,t[1]=-n/d,t[2]=-r/d,t[3]=i/d,t[4]=(r*h-o*a)/d,t[5]=-(i*h-n*a)/d,this},copyFrom:function(t){var i=this.matrix;return i[0]=t.a,i[1]=t.b,i[2]=t.c,i[3]=t.d,i[4]=t.e,i[5]=t.f,this},copyFromArray:function(t){var i=this.matrix;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],this},copyToContext:function(t){var i=this.matrix;return t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),t},setToContext:function(t){var i=this.matrix;return t.setTransform(i[0],i[1],i[2],i[3],i[4],i[5]),t},copyToArray:function(t){var i=this.matrix;return void 0===t?t=[i[0],i[1],i[2],i[3],i[4],i[5]]:(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5]),t},setTransform:function(t,i,n,r,o,a){var h=this.matrix;return h[0]=t,h[1]=i,h[2]=n,h[3]=r,h[4]=o,h[5]=a,this},decomposeMatrix:function(){var t=this.decomposedMatrix,i=this.matrix,n=i[0],r=i[1],o=i[2],a=i[3],h=n*a-r*o;if(t.translateX=i[4],t.translateY=i[5],n||r){var d=Math.sqrt(n*n+r*r);t.rotation=r>0?Math.acos(n/d):-Math.acos(n/d),t.scaleX=d,t.scaleY=h/d}else if(o||a){var f=Math.sqrt(o*o+a*a);t.rotation=.5*Math.PI-(a>0?Math.acos(-o/f):-Math.acos(o/f)),t.scaleX=h/f,t.scaleY=f}else t.rotation=0,t.scaleX=0,t.scaleY=0;return t},applyITRS:function(t,i,n,r,o){var a=this.matrix,h=Math.sin(n),d=Math.cos(n);return a[4]=t,a[5]=i,a[0]=d*r,a[1]=h*r,a[2]=-h*o,a[3]=d*o,this},applyInverse:function(t,i,n){void 0===n&&(n=new a);var r=this.matrix,o=r[0],h=r[1],d=r[2],f=r[3],p=r[4],T=r[5],b=1/(o*f+d*-h);return n.x=f*b*t+-d*b*i+(T*d-p*f)*b,n.y=o*b*i+-h*b*t+(-T*o+p*h)*b,n},getX:function(t,i){return t*this.a+i*this.c+this.e},getY:function(t,i){return t*this.b+i*this.d+this.f},getXRound:function(t,i,n){var r=this.getX(t,i);return n&&(r=Math.round(r)),r},getYRound:function(t,i,n){var r=this.getY(t,i);return n&&(r=Math.round(r)),r},getCSSMatrix:function(){var t=this.matrix;return"matrix("+t[0]+","+t[1]+","+t[2]+","+t[3]+","+t[4]+","+t[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});t.exports=h},function(t,i){t.exports=function(t){if(!Array.isArray(t)||t.length<2||!Array.isArray(t[0]))return!1;for(var i=t[0].length,n=1;n<t.length;n++)if(t[n].length!==i)return!1;return!0}},function(t,i,n){var r=n(0),o=n(299),a=n(61),h=n(300),d=n(26),f=n(301),p=n(306),T=new r({initialize:function Rectangle4(t,i,n,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),this.type=d.RECTANGLE,this.x=t,this.y=i,this.width=n,this.height=r},contains:function(t,i){return o(this,t,i)},getPoint:function(t,i){return a(this,t,i)},getPoints:function(t,i,n){return h(this,t,i,n)},getRandomPoint:function(t){return p(this,t)},setTo:function(t,i,n,r){return this.x=t,this.y=i,this.width=n,this.height=r,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setSize:function(t,i){return void 0===i&&(i=t),this.width=t,this.height=i,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(t){return void 0===t&&(t=new f),t.setTo(this.x,this.y,this.right,this.y),t},getLineB:function(t){return void 0===t&&(t=new f),t.setTo(this.right,this.y,this.right,this.bottom),t},getLineC:function(t){return void 0===t&&(t=new f),t.setTo(this.right,this.bottom,this.x,this.bottom),t},getLineD:function(t){return void 0===t&&(t=new f),t.setTo(this.x,this.bottom,this.x,this.y),t},left:{get:function(){return this.x},set:function(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}},right:{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x}},top:{get:function(){return this.y},set:function(t){t>=this.bottom?this.height=0:this.height=this.bottom-t,this.y=t}},bottom:{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});t.exports=T},function(t,i){t.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},function(t,i,n){var r=n(7),Extend=function(){var t,i,n,o,a,h,d=arguments[0]||{},f=1,p=arguments.length,T=!1;for("boolean"==typeof d&&(T=d,d=arguments[1]||{},f=2),p===f&&(d=this,--f);f<p;f++)if(null!=(t=arguments[f]))for(i in t)n=d[i],d!==(o=t[i])&&(T&&o&&(r(o)||(a=Array.isArray(o)))?(a?(a=!1,h=n&&Array.isArray(n)?n:[]):h=n&&r(n)?n:{},d[i]=Extend(T,h,o)):void 0!==o&&(d[i]=o));return d};t.exports=Extend},function(t,i){t.exports=function(t,i,n,r){return Math.atan2(r-i,n-t)}},function(t,i){t.exports=function(t){return(t%=2*Math.PI)>=0?t:t+2*Math.PI}},function(t,i,n){var r=n(6);t.exports=function(t){return r(t,-Math.PI,Math.PI)}},function(t,i,n){var r=n(6);t.exports=function(t){return r(t,-180,180)}},function(t,i){t.exports=function(t,i,n){return void 0===n&&(n=1e-4),Math.abs(t-i)<n}},function(t,i,n){var r=n(34);t.exports=function(t,i){return r(t)/r(i)/r(t-i)}},function(t,i){t.exports=function(t){if(0===t)return 1;for(var i=t;--t;)i*=t;return i}},function(t,i){t.exports=function(t,i,n,r,o){var a=.5*(r-i),h=.5*(o-n),d=t*t;return(2*n-2*r+a+h)*(t*d)+(-3*n+3*r-2*a-h)*d+a*t+n}},function(t,i){t.exports=function(t,i,n){return(i-t)*n+t}},function(t,i){t.exports=function(t,i,n){return t<=i?0:t>=n?1:(t=(t-i)/(n-i))*t*(3-2*t)}},function(t,i){t.exports=function(t,i,n){return(t=Math.max(0,Math.min(1,(t-i)/(n-i))))*t*t*(t*(6*t-15)+10)}},function(t,i){t.exports=function(t,i,n,r){var o=Math.cos(r),a=Math.sin(r),h=t.x-i,d=t.y-n;return t.x=h*o-d*a+i,t.y=h*a+d*o+n,t}},function(t,i){t.exports=function(t){return t>0?Math.ceil(t):Math.floor(t)}},function(t,i,n){var r=n(2);t.exports=function(t,i,n,o,a,h,d,f){void 0===f&&(f=new r);var p=Math.sin(a),T=Math.cos(a),b=T*h,S=p*h,A=-p*d,P=T*d,O=1/(b*P+A*-S);return f.x=P*O*t+-A*O*i+(o*A-n*P)*O,f.y=b*O*i+-S*O*t+(-o*b+n*S)*O,f}},function(t,i,n){var r=new(n(0))({initialize:function Matrix32(t){this.val=new Float32Array(9),t?this.copy(t):this.identity()},clone:function(){return new r(this)},set:function(t){return this.copy(t)},copy:function(t){var i=this.val,n=t.val;return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],this},fromMat4:function(t){var i=t.val,n=this.val;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[4],n[4]=i[5],n[5]=i[6],n[6]=i[8],n[7]=i[9],n[8]=i[10],this},fromArray:function(t){var i=this.val;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],this},identity:function(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},transpose:function(){var t=this.val,i=t[1],n=t[2],r=t[5];return t[1]=t[3],t[2]=t[6],t[3]=i,t[5]=t[7],t[6]=n,t[7]=r,this},invert:function(){var t=this.val,i=t[0],n=t[1],r=t[2],o=t[3],a=t[4],h=t[5],d=t[6],f=t[7],p=t[8],T=p*a-h*f,b=-p*o+h*d,S=f*o-a*d,A=i*T+n*b+r*S;return A?(A=1/A,t[0]=T*A,t[1]=(-p*n+r*f)*A,t[2]=(h*n-r*a)*A,t[3]=b*A,t[4]=(p*i-r*d)*A,t[5]=(-h*i+r*o)*A,t[6]=S*A,t[7]=(-f*i+n*d)*A,t[8]=(a*i-n*o)*A,this):null},adjoint:function(){var t=this.val,i=t[0],n=t[1],r=t[2],o=t[3],a=t[4],h=t[5],d=t[6],f=t[7],p=t[8];return t[0]=a*p-h*f,t[1]=r*f-n*p,t[2]=n*h-r*a,t[3]=h*d-o*p,t[4]=i*p-r*d,t[5]=r*o-i*h,t[6]=o*f-a*d,t[7]=n*d-i*f,t[8]=i*a-n*o,this},determinant:function(){var t=this.val,i=t[0],n=t[1],r=t[2],o=t[3],a=t[4],h=t[5],d=t[6],f=t[7],p=t[8];return i*(p*a-h*f)+n*(-p*o+h*d)+r*(f*o-a*d)},multiply:function(t){var i=this.val,n=i[0],r=i[1],o=i[2],a=i[3],h=i[4],d=i[5],f=i[6],p=i[7],T=i[8],b=t.val,S=b[0],A=b[1],P=b[2],O=b[3],L=b[4],D=b[5],I=b[6],F=b[7],B=b[8];return i[0]=S*n+A*a+P*f,i[1]=S*r+A*h+P*p,i[2]=S*o+A*d+P*T,i[3]=O*n+L*a+D*f,i[4]=O*r+L*h+D*p,i[5]=O*o+L*d+D*T,i[6]=I*n+F*a+B*f,i[7]=I*r+F*h+B*p,i[8]=I*o+F*d+B*T,this},translate:function(t){var i=this.val,n=t.x,r=t.y;return i[6]=n*i[0]+r*i[3]+i[6],i[7]=n*i[1]+r*i[4]+i[7],i[8]=n*i[2]+r*i[5]+i[8],this},rotate:function(t){var i=this.val,n=i[0],r=i[1],o=i[2],a=i[3],h=i[4],d=i[5],f=Math.sin(t),p=Math.cos(t);return i[0]=p*n+f*a,i[1]=p*r+f*h,i[2]=p*o+f*d,i[3]=p*a-f*n,i[4]=p*h-f*r,i[5]=p*d-f*o,this},scale:function(t){var i=this.val,n=t.x,r=t.y;return i[0]=n*i[0],i[1]=n*i[1],i[2]=n*i[2],i[3]=r*i[3],i[4]=r*i[4],i[5]=r*i[5],this},fromQuat:function(t){var i=t.x,n=t.y,r=t.z,o=t.w,a=i+i,h=n+n,d=r+r,f=i*a,p=i*h,T=i*d,b=n*h,S=n*d,A=r*d,P=o*a,O=o*h,L=o*d,D=this.val;return D[0]=1-(b+A),D[3]=p+L,D[6]=T-O,D[1]=p-L,D[4]=1-(f+A),D[7]=S+P,D[2]=T+O,D[5]=S-P,D[8]=1-(f+b),this},normalFromMat4:function(t){var i=t.val,n=this.val,r=i[0],o=i[1],a=i[2],h=i[3],d=i[4],f=i[5],p=i[6],T=i[7],b=i[8],S=i[9],A=i[10],P=i[11],O=i[12],L=i[13],D=i[14],I=i[15],F=r*f-o*d,B=r*p-a*d,N=r*T-h*d,Y=o*p-a*f,X=o*T-h*f,G=a*T-h*p,U=b*L-S*O,V=b*D-A*O,z=b*I-P*O,W=S*D-A*L,H=S*I-P*L,q=A*I-P*D,Z=F*q-B*H+N*W+Y*z-X*V+G*U;return Z?(Z=1/Z,n[0]=(f*q-p*H+T*W)*Z,n[1]=(p*z-d*q-T*V)*Z,n[2]=(d*H-f*z+T*U)*Z,n[3]=(a*H-o*q-h*W)*Z,n[4]=(r*q-a*z+h*V)*Z,n[5]=(o*z-r*H-h*U)*Z,n[6]=(L*G-D*X+I*Y)*Z,n[7]=(D*N-O*G-I*B)*Z,n[8]=(O*X-L*N+I*F)*Z,this):null}});t.exports=r},function(t,i,n){var r=n(0),o=n(42),a=n(1),h=n(14),d=1e-6,f=new Int8Array([1,2,0]),p=new Float32Array([0,0,0]),T=new h(1,0,0),b=new h(0,1,0),S=new h,A=new o,P=new r({initialize:function Quaternion2(t,i,n,r){this.onChangeCallback=a,this.set(t,i,n,r)},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback(this)}},copy:function(t){return this.set(t)},set:function(t,i,n,r,o){return void 0===o&&(o=!0),"object"==typeof t?(this._x=t.x||0,this._y=t.y||0,this._z=t.z||0,this._w=t.w||0):(this._x=t||0,this._y=i||0,this._z=n||0,this._w=r||0),o&&this.onChangeCallback(this),this},add:function(t){return this._x+=t.x,this._y+=t.y,this._z+=t.z,this._w+=t.w,this.onChangeCallback(this),this},subtract:function(t){return this._x-=t.x,this._y-=t.y,this._z-=t.z,this._w-=t.w,this.onChangeCallback(this),this},scale:function(t){return this._x*=t,this._y*=t,this._z*=t,this._w*=t,this.onChangeCallback(this),this},length:function(){var t=this.x,i=this.y,n=this.z,r=this.w;return Math.sqrt(t*t+i*i+n*n+r*r)},lengthSq:function(){var t=this.x,i=this.y,n=this.z,r=this.w;return t*t+i*i+n*n+r*r},normalize:function(){var t=this.x,i=this.y,n=this.z,r=this.w,o=t*t+i*i+n*n+r*r;return o>0&&(o=1/Math.sqrt(o),this._x=t*o,this._y=i*o,this._z=n*o,this._w=r*o),this.onChangeCallback(this),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,i){void 0===i&&(i=0);var n=this.x,r=this.y,o=this.z,a=this.w;return this.set(n+i*(t.x-n),r+i*(t.y-r),o+i*(t.z-o),a+i*(t.w-a))},rotationTo:function(t,i){var n=t.x*i.x+t.y*i.y+t.z*i.z;return n<-.999999?(S.copy(T).cross(t).length()<d&&S.copy(b).cross(t),S.normalize(),this.setAxisAngle(S,Math.PI)):n>.999999?this.set(0,0,0,1):(S.copy(t).cross(i),this._x=S.x,this._y=S.y,this._z=S.z,this._w=1+n,this.normalize())},setAxes:function(t,i,n){var r=A.val;return r[0]=i.x,r[3]=i.y,r[6]=i.z,r[1]=n.x,r[4]=n.y,r[7]=n.z,r[2]=-t.x,r[5]=-t.y,r[8]=-t.z,this.fromMat3(A).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(t,i){i*=.5;var n=Math.sin(i);return this.set(n*t.x,n*t.y,n*t.z,Math.cos(i))},multiply:function(t){var i=this.x,n=this.y,r=this.z,o=this.w,a=t.x,h=t.y,d=t.z,f=t.w;return this.set(i*f+o*a+n*d-r*h,n*f+o*h+r*a-i*d,r*f+o*d+i*h-n*a,o*f-i*a-n*h-r*d)},slerp:function(t,i){var n=this.x,r=this.y,o=this.z,a=this.w,h=t.x,f=t.y,p=t.z,T=t.w,b=n*h+r*f+o*p+a*T;b<0&&(b=-b,h=-h,f=-f,p=-p,T=-T);var S=1-i,A=i;if(1-b>d){var P=Math.acos(b),O=Math.sin(P);S=Math.sin((1-i)*P)/O,A=Math.sin(i*P)/O}return this.set(S*n+A*h,S*r+A*f,S*o+A*p,S*a+A*T)},invert:function(){var t=this.x,i=this.y,n=this.z,r=this.w,o=t*t+i*i+n*n+r*r,a=o?1/o:0;return this.set(-t*a,-i*a,-n*a,r*a)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(t){t*=.5;var i=this.x,n=this.y,r=this.z,o=this.w,a=Math.sin(t),h=Math.cos(t);return this.set(i*h+o*a,n*h+r*a,r*h-n*a,o*h-i*a)},rotateY:function(t){t*=.5;var i=this.x,n=this.y,r=this.z,o=this.w,a=Math.sin(t),h=Math.cos(t);return this.set(i*h-r*a,n*h+o*a,r*h+i*a,o*h-n*a)},rotateZ:function(t){t*=.5;var i=this.x,n=this.y,r=this.z,o=this.w,a=Math.sin(t),h=Math.cos(t);return this.set(i*h+n*a,n*h-i*a,r*h+o*a,o*h-r*a)},calculateW:function(){var t=this.x,i=this.y,n=this.z;return this.w=-Math.sqrt(1-t*t-i*i-n*n),this},setFromEuler:function(t,i){var n=t.x/2,r=t.y/2,o=t.z/2,a=Math.cos(n),h=Math.cos(r),d=Math.cos(o),f=Math.sin(n),p=Math.sin(r),T=Math.sin(o);switch(t.order){case"XYZ":this.set(f*h*d+a*p*T,a*p*d-f*h*T,a*h*T+f*p*d,a*h*d-f*p*T,i);break;case"YXZ":this.set(f*h*d+a*p*T,a*p*d-f*h*T,a*h*T-f*p*d,a*h*d+f*p*T,i);break;case"ZXY":this.set(f*h*d-a*p*T,a*p*d+f*h*T,a*h*T+f*p*d,a*h*d-f*p*T,i);break;case"ZYX":this.set(f*h*d-a*p*T,a*p*d+f*h*T,a*h*T-f*p*d,a*h*d+f*p*T,i);break;case"YZX":this.set(f*h*d+a*p*T,a*p*d+f*h*T,a*h*T-f*p*d,a*h*d-f*p*T,i);break;case"XZY":this.set(f*h*d-a*p*T,a*p*d-f*h*T,a*h*T+f*p*d,a*h*d+f*p*T,i)}return this},setFromRotationMatrix:function(t){var i,n=t.val,r=n[0],o=n[4],a=n[8],h=n[1],d=n[5],f=n[9],p=n[2],T=n[6],b=n[10],S=r+d+b;return S>0?(i=.5/Math.sqrt(S+1),this.set((T-f)*i,(a-p)*i,(h-o)*i,.25/i)):r>d&&r>b?(i=2*Math.sqrt(1+r-d-b),this.set(.25*i,(o+h)/i,(a+p)/i,(T-f)/i)):d>b?(i=2*Math.sqrt(1+d-r-b),this.set((o+h)/i,.25*i,(f+T)/i,(a-p)/i)):(i=2*Math.sqrt(1+b-r-d),this.set((a+p)/i,(f+T)/i,.25*i,(h-o)/i)),this},fromMat3:function(t){var i,n=t.val,r=n[0]+n[4]+n[8];if(r>0)i=Math.sqrt(r+1),this.w=.5*i,i=.5/i,this._x=(n[7]-n[5])*i,this._y=(n[2]-n[6])*i,this._z=(n[3]-n[1])*i;else{var o=0;n[4]>n[0]&&(o=1),n[8]>n[3*o+o]&&(o=2);var a=f[o],h=f[a];i=Math.sqrt(n[3*o+o]-n[3*a+a]-n[3*h+h]+1),p[o]=.5*i,i=.5/i,p[a]=(n[3*a+o]+n[3*o+a])*i,p[h]=(n[3*h+o]+n[3*o+h])*i,this._x=p[0],this._y=p[1],this._z=p[2],this._w=(n[3*h+a]-n[3*a+h])*i}return this.onChangeCallback(this),this}});t.exports=P},function(t,i,n){t.exports={ADDED_TO_SCENE:n(180),BOOT:n(181),CREATE:n(182),DESTROY:n(183),PAUSE:n(184),POST_UPDATE:n(185),PRE_RENDER:n(186),PRE_UPDATE:n(187),READY:n(188),REMOVED_FROM_SCENE:n(189),RENDER:n(190),RESUME:n(191),SHUTDOWN:n(192),SLEEP:n(193),START:n(194),TRANSITION_COMPLETE:n(195),TRANSITION_INIT:n(196),TRANSITION_OUT:n(197),TRANSITION_START:n(198),TRANSITION_WAKE:n(199),UPDATE:n(200),WAKE:n(201)}},function(t,i,n){var r=n(27),o=n(46);t.exports=function(t,i){var n=void 0===t?o():r({},t);if(i)for(var a in i)void 0!==i[a]&&(n[a]=i[a]);return n}},function(t,i){t.exports=function(t,i,n,r,o,a){return void 0===t&&(t=""),void 0===i&&(i=!0),void 0===n&&(n=""),void 0===r&&(r=""),void 0===o&&(o=0),void 0===a&&(a=!1),{responseType:t,async:i,user:n,password:r,timeout:o,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:a}}},function(t,i){t.exports={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,i){return this.width=t,this.height=i,this},setDisplaySize:function(t,i){return this.displayWidth=t,this.displayHeight=i,this}}},function(t,i){t.exports={_depth:0,depth:{get:function(){return this._depth},set:function(t){this.displayList&&this.displayList.queueDepthSort(),this._depth=t}},setDepth:function(t){return void 0===t&&(t=0),this.depth=t,this}}},function(t,i){t.exports={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,i){return this.flipX=t,this.flipY=i,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}}},function(t,i){t.exports={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(t,i){return void 0===i&&(i=t),this.scrollFactorX=t,this.scrollFactorY=i,this}}},function(t,i,n){var r=n(4),o=n(23),a=n(41),h=n(30),d=n(31),f=n(2),p={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(t){this._scaleX=t,this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function(){return this._scaleX},set:function(t){this._scaleX=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleY:{get:function(){return this._scaleY},set:function(t){this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},angle:{get:function(){return d(this._rotation*r.RAD_TO_DEG)},set:function(t){this.rotation=d(t)*r.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=h(t)}},setPosition:function(t,i,n,r){return void 0===t&&(t=0),void 0===i&&(i=t),void 0===n&&(n=0),void 0===r&&(r=0),this.x=t,this.y=i,this.z=n,this.w=r,this},copyPosition:function(t){return void 0!==t.x&&(this.x=t.x),void 0!==t.y&&(this.y=t.y),void 0!==t.z&&(this.z=t.z),void 0!==t.w&&(this.w=t.w),this},setRandomPosition:function(t,i,n,r){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=this.scene.sys.scale.width),void 0===r&&(r=this.scene.sys.scale.height),this.x=t+Math.random()*n,this.y=i+Math.random()*r,this},setRotation:function(t){return void 0===t&&(t=0),this.rotation=t,this},setAngle:function(t){return void 0===t&&(t=0),this.angle=t,this},setScale:function(t,i){return void 0===t&&(t=1),void 0===i&&(i=t),this.scaleX=t,this.scaleY=i,this},setX:function(t){return void 0===t&&(t=0),this.x=t,this},setY:function(t){return void 0===t&&(t=0),this.y=t,this},setZ:function(t){return void 0===t&&(t=0),this.z=t,this},setW:function(t){return void 0===t&&(t=0),this.w=t,this},getLocalTransformMatrix:function(t){return void 0===t&&(t=new o),t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(t,i){void 0===t&&(t=new o),void 0===i&&(i=new o);var n=this.parentContainer;if(!n)return this.getLocalTransformMatrix(t);for(t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);n;)i.applyITRS(n.x,n.y,n._rotation,n._scaleX,n._scaleY),i.multiply(t,t),n=n.parentContainer;return t},getLocalPoint:function(t,i,n,r){n||(n=new f),r||(r=this.scene.sys.cameras.main);var o=r.scrollX,h=r.scrollY,d=t+o*this.scrollFactorX-o,p=i+h*this.scrollFactorY-h;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(d,p,n):a(d,p,this.x,this.y,this.rotation,this.scaleX,this.scaleY,n),this._originComponent&&(n.x+=this._displayOriginX,n.y+=this._displayOriginY),n},getParentRotation:function(){for(var t=0,i=this.parentContainer;i;)t+=i.rotation,i=i.parentContainer;return t}};t.exports=p},function(t,i){var n={_visible:!0,visible:{get:function(){return this._visible},set:function(t){t?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function(t){return this.visible=t,this}};t.exports=n},function(t,i,n){var r=n(0),o=n(54),a=n(222),h=n(229),d=n(55),f=n(44),p=new r({Extends:h,initialize:function GameObject2(t,i){h.call(this),this.scene=t,this.displayList=null,this.type=i,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(d.ADDED_TO_SCENE,this.addedToScene,this),this.on(d.REMOVED_FROM_SCENE,this.removedFromScene,this),t.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setState:function(t){return this.state=t,this},setDataEnabled:function(){return this.data||(this.data=new a(this)),this},setData:function(t,i){return this.data||(this.data=new a(this)),this.data.set(t,i),this},incData:function(t,i){return this.data||(this.data=new a(this)),this.data.inc(t,i),this},toggleData:function(t){return this.data||(this.data=new a(this)),this.data.toggle(t),this},getData:function(t){return this.data||(this.data=new a(this)),this.data.get(t)},setInteractive:function(t,i,n){return this.scene.sys.input.enable(this,t,i,n),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return o(this)},willRender:function(t){return!(p.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function(){for(var t=this,i=this.parentContainer,n=[];i&&(n.unshift(i.getIndex(t)),t=i,i.parentContainer);)i=i.parentContainer;return this.displayList?n.unshift(this.displayList.getIndex(t)):n.unshift(this.scene.sys.displayList.getIndex(t)),n},addToDisplayList:function(t){return void 0===t&&(t=this.scene.sys.displayList),this.displayList&&this.displayList!==t&&this.removeFromDisplayList(),t.exists(this)||(this.displayList=t,t.add(this,!0),t.queueDepthSort(),this.emit(d.ADDED_TO_SCENE,this,this.scene),t.events.emit(f.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var t=this.displayList||this.scene.sys.displayList;return t.exists(this)&&(t.remove(this,!0),t.queueDepthSort(),this.displayList=null,this.emit(d.REMOVED_FROM_SCENE,this,this.scene),t.events.emit(f.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(){this.scene&&!this.ignoreDestroy&&(this.preDestroy&&this.preDestroy.call(this),this.emit(d.DESTROY,this),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});p.RENDER_MASK=15,t.exports=p},function(t,i){t.exports=function(t){var i={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(i.textureKey=t.texture.key,i.frameKey=t.frame.name),i}},function(t,i,n){t.exports={ADDED_TO_SCENE:n(230),DESTROY:n(231),REMOVED_FROM_SCENE:n(232),VIDEO_COMPLETE:n(233),VIDEO_CREATED:n(234),VIDEO_ERROR:n(235),VIDEO_LOOP:n(236),VIDEO_PLAY:n(237),VIDEO_SEEKED:n(238),VIDEO_SEEKING:n(239),VIDEO_STOP:n(240),VIDEO_TIMEOUT:n(241),VIDEO_UNLOCKED:n(242)}},function(t,i,n){var r=n(23),o=new r,a=new r,h=new r,d={camera:o,sprite:a,calc:h};t.exports=function(t,i,n){var r=o,f=a,p=h;return f.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),r.copyFrom(i.matrix),n?(r.multiplyWithOffset(n,-i.scrollX*t.scrollFactorX,-i.scrollY*t.scrollFactorY),f.e=t.x,f.f=t.y):(f.e-=i.scrollX*t.scrollFactorX,f.f-=i.scrollY*t.scrollFactorY),r.multiply(f,p),d}},function(t,i){t.exports=function(t){for(var i=t.length,n=t[0].length,r=new Array(n),o=0;o<n;o++){r[o]=new Array(i);for(var a=i-1;a>-1;a--)r[o][a]=t[a][o]}return r}},function(t,i){t.exports=function(t,i){void 0===i&&(i=1);for(var n=null,r=0;r<i;r++)n=t.shift(),t.push(n);return n}},function(t,i){t.exports=function(t,i){void 0===i&&(i=1);for(var n=null,r=0;r<i;r++)n=t.pop(),t.unshift(n);return n}},function(t,i){t.exports=function(t){for(var i=t.length-1;i>0;i--){var n=Math.floor(Math.random()*(i+1)),r=t[i];t[i]=t[n],t[n]=r}return t}},function(t,i,n){var r=n(62),o=n(13);t.exports=function(t,i,n){if(void 0===n&&(n=new o),i<=0||i>=1)return n.x=t.x,n.y=t.y,n;var a=r(t)*i;return i>.5?(a-=t.width+t.height)<=t.width?(n.x=t.right-a,n.y=t.bottom):(n.x=t.x,n.y=t.bottom-(a-t.width)):a<=t.width?(n.x=t.x+a,n.y=t.y):(n.x=t.right,n.y=t.y+(a-t.width)),n}},function(t,i){t.exports=function(t){return 2*(t.width+t.height)}},function(t,i,n){var r,o=n(64),a=n(0),h=n(10),d=n(177),f=n(178),p=n(202),T=n(203),b=n(221),S=n(254),A=n(1),P=new a({Extends:f,initialize:function SpinePlugin2(t,i,n){f.call(this,t,i,n);var r=i.game;this.isWebGL=2===r.config.renderType,this.cache=r.cache.addCustom("spine"),this.spineTextures=r.cache.addCustom("spineTextures"),this.json=r.cache.json,this.textures=r.textures,this.drawDebug=!1,this.gl,this.renderer,this.sceneRenderer,this.skeletonRenderer,this.skeletonDebugRenderer,this.plugin=p,this.temp1,this.temp2,this.isWebGL?(this.runtime=p.webgl,this.renderer=r.renderer,this.gl=r.renderer.gl,this.getAtlas=this.getAtlasWebGL):(this.runtime=p.canvas,this.renderer=r.renderer,this.getAtlas=this.getAtlasCanvas),this.renderer||(this.renderer={width:r.scale.width,height:r.scale.height,preRender:A,postRender:A,render:A,destroy:A});i.registerFileType("spine",this.spineFileCallback,t),i.registerGameObject("spine",(function(t,i,r,o,a){var h=this.scene.sys[n],d=new b(this.scene,h,t,i,r,o,a);return this.displayList.add(d),this.updateList.add(d),d}),(function(t,i){void 0===t&&(t={});var r=h(t,"key",null),a=h(t,"animationName",null),d=h(t,"loop",!1),f=this.scene.sys[n],p=new b(this.scene,f,0,0,r,a,d);void 0!==i&&(t.add=i),o(this.scene,p,t);var T=h(t,"skinName",!1);T&&p.setSkinByName(T);var S=h(t,"slotName",!1),A=h(t,"attachmentName",null);return S&&p.setAttachment(S,A),p.refresh()})),i.registerGameObject("spineContainer",(function(t,i,r){var o=this.scene.sys[n],a=new S(this.scene,o,t,i,r);return this.displayList.add(a),a}),(function(t,i){void 0===t&&(t={});var r=h(t,"x",0),a=h(t,"y",0),d=h(t,"children",null),f=this.scene.sys[n],p=new S(this.scene,f,r,a,d);return void 0!==i&&(t.add=i),o(this.scene,p,t),p}))},boot:function(){this.isWebGL?(this.bootWebGL(),this.onResize(),this.game.scale.on(d,this.onResize,this)):this.bootCanvas();var t=this.systems.events;t.once("shutdown",this.shutdown,this),t.once("destroy",this.destroy,this),this.game.events.once("destroy",this.gameDestroy,this)},bootCanvas:function(){this.skeletonRenderer=new p.canvas.SkeletonRenderer(this.scene.sys.context)},bootWebGL:function(){var setBlendMode=function(t,i){if(t!==this.srcBlend||i!==this.dstBlend){var n=this.context.gl;this.srcBlend=t,this.dstBlend=i,this.isDrawing&&(this.flush(),n.blendFunc(this.srcBlend,this.dstBlend))}};r||((r=new p.webgl.SceneRenderer(this.renderer.canvas,this.gl,!0)).batcher.setBlendMode=setBlendMode,r.shapes.setBlendMode=setBlendMode),this.sceneRenderer=r,this.skeletonRenderer=r.skeletonRenderer,this.skeletonDebugRenderer=r.skeletonDebugRenderer,this.temp1=new p.webgl.Vector3(0,0,0),this.temp2=new p.webgl.Vector3(0,0,0)},getAtlasCanvas:function(t){var i=this.cache.get(t);if(i){var n,r=this.spineTextures;if(r.has(t))n=r.get(t);else{var o=this.textures;n=new p.TextureAtlas(i.data,(function(t){return new p.canvas.CanvasTexture(o.get(i.prefix+t).getSourceImage())}))}return n}console.warn("No atlas data for: "+t)},getAtlasWebGL:function(t){var i=this.cache.get(t);if(i){var n,r=this.spineTextures;if(r.has(t))n=r.get(t);else{var o=this.textures,a=this.sceneRenderer.context.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n=new p.TextureAtlas(i.data,(function(t){return new p.webgl.GLTexture(a,o.get(i.prefix+t).getSourceImage(),!1)}))}return n}console.warn("No atlas data for: "+t)},spineFileCallback:function(t,i,n,r,o,a){var h;if(Array.isArray(t))for(var d=0;d<t.length;d++)h=new T(this,t[d]),this.addFile(h.files);else h=new T(this,t,i,n,r,o,a),this.addFile(h.files);return this},worldToLocal:function(t,i,n,r){var o=this.temp1,a=this.temp2,h=this.sceneRenderer.camera;o.set(t+n.x,i-n.y,0);var d=h.viewportWidth,f=h.viewportHeight;return h.screenToWorld(o,d,f),r&&null!==r.parent?(r.parent.worldToLocal(a.set(o.x-n.x,o.y-n.y,0)),new p.Vector2(a.x,a.y)):r?new p.Vector2(o.x-n.x,o.y-n.y):new p.Vector2(o.x,o.y)},getVector2:function(t,i){return new p.Vector2(t,i)},getVector3:function(t,i,n){return new p.webgl.Vector3(t,i,n)},setDebugBones:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawBones=t,this},setDebugRegionAttachments:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawRegionAttachments=t,this},setDebugBoundingBoxes:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawBoundingBoxes=t,this},setDebugMeshHull:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawMeshHull=t,this},setDebugMeshTriangles:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawMeshTriangles=t,this},setDebugPaths:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawPaths=t,this},setDebugSkeletonXY:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawSkeletonXY=t,this},setDebugClipping:function(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawClipping=t,this},setEffect:function(t){return this.sceneRenderer.skeletonRenderer.vertexEffect=t,this},createSkeleton:function(t,i){var n=t,r=t,o=-1!==t.indexOf(".");if(o){var a=t.split(".");n=a.shift(),r=a.join(".")}var d=this.cache.get(n),f=this.getAtlas(n);if(!f)return null;this.spineTextures.has(n)||this.spineTextures.add(n,f);var T,b=d.preMultipliedAlpha,S=new p.AtlasAttachmentLoader(f),A=new p.SkeletonJson(S);if(i)T=i;else{var P=this.json.get(n);T=o?h(P,r):P}if(T){var O=A.readSkeletonData(T);return{skeletonData:O,skeleton:new p.Skeleton(O),preMultipliedAlpha:b}}return null},createAnimationState:function(t){var i=new p.AnimationStateData(t.data);return{stateData:i,state:new p.AnimationState(i)}},getBounds:function(t){var i=new p.Vector2,n=new p.Vector2;return t.getBounds(i,n,[]),{offset:i,size:n}},onResize:function(){var t=this.renderer,i=this.sceneRenderer,n=t.width,r=t.height;i.camera.position.x=n/2,i.camera.position.y=r/2,i.camera.setViewport(n,r)},shutdown:function(){this.systems.events.off("shutdown",this.shutdown,this),this.isWebGL&&this.game.scale.off(d,this.onResize,this)},destroy:function(){this.shutdown(),this.game=null,this.scene=null,this.systems=null,this.cache=null,this.spineTextures=null,this.json=null,this.textures=null,this.skeletonRenderer=null,this.gl=null},gameDestroy:function(){this.pluginManager.removeGameObject("spine",!0,!0),this.pluginManager.removeGameObject("spineContainer",!0,!0),this.pluginManager=null,r&&(r.dispose(),r=null),this.sceneRenderer=null}});P.SpineGameObject=b,P.SpineContainer=S,t.exports=P},function(t,i,n){var r=n(17),o=n(65);t.exports=function(t,i,n){i.x=o(n,"x",0),i.y=o(n,"y",0),i.depth=o(n,"depth",0),i.flipX=o(n,"flipX",!1),i.flipY=o(n,"flipY",!1);var a=o(n,"scale",null);"number"==typeof a?i.setScale(a):null!==a&&(i.scaleX=o(a,"x",1),i.scaleY=o(a,"y",1));var h=o(n,"scrollFactor",null);"number"==typeof h?i.setScrollFactor(h):null!==h&&(i.scrollFactorX=o(h,"x",1),i.scrollFactorY=o(h,"y",1)),i.rotation=o(n,"rotation",0);var d=o(n,"angle",null);null!==d&&(i.angle=d),i.alpha=o(n,"alpha",1);var f=o(n,"origin",null);if("number"==typeof f)i.setOrigin(f);else if(null!==f){var p=o(f,"x",.5),T=o(f,"y",.5);i.setOrigin(p,T)}return i.blendMode=o(n,"blendMode",r.NORMAL),i.visible=o(n,"visible",!0),o(n,"add",!0)&&t.sys.displayList.add(i),i.preUpdate&&t.sys.updateList.add(i),i}},function(t,i,n){var r=n(66),o=n(10);t.exports=function(t,i,n){var a=o(t,i,null);if(null===a)return n;if(Array.isArray(a))return r.RND.pick(a);if("object"==typeof a){if(a.hasOwnProperty("randInt"))return r.RND.integerInRange(a.randInt[0],a.randInt[1]);if(a.hasOwnProperty("randFloat"))return r.RND.realInRange(a.randFloat[0],a.randFloat[1])}else if("function"==typeof a)return a(i);return a}},function(t,i,n){var r=n(4),o=n(27),a={Angle:n(67),Distance:n(76),Easing:n(84),Fuzzy:n(129),Interpolation:n(134),Pow2:n(142),Snap:n(146),RandomDataGenerator:n(150),Average:n(151),Bernstein:n(33),Between:n(152),CatmullRom:n(35),CeilTo:n(153),Clamp:n(3),DegToRad:n(19),Difference:n(154),Euler:n(155),Factorial:n(34),FloatBetween:n(18),FloorTo:n(156),FromPercent:n(157),GetSpeed:n(158),IsEven:n(159),IsEvenStrict:n(160),Linear:n(36),MaxAdd:n(161),Median:n(162),MinSub:n(163),Percent:n(164),RadToDeg:n(9),RandomXY:n(165),RandomXYZ:n(166),RandomXYZW:n(167),Rotate:n(168),RotateAround:n(39),RotateAroundDistance:n(169),RotateTo:n(170),RoundAwayFromZero:n(40),RoundTo:n(171),SinCosTableGenerator:n(172),SmootherStep:n(38),SmoothStep:n(37),ToXY:n(173),TransformXY:n(41),Within:n(174),Wrap:n(6),Vector2:n(2),Vector3:n(14),Vector4:n(175),Matrix3:n(42),Matrix4:n(20),Quaternion:n(43),RotateVec3:n(176)};a=o(!1,a,r),t.exports=a},function(t,i,n){t.exports={Between:n(28),BetweenPoints:n(68),BetweenPointsY:n(69),BetweenY:n(70),CounterClockwise:n(8),Normalize:n(29),Random:n(71),RandomDegrees:n(72),Reverse:n(73),RotateTo:n(74),ShortestBetween:n(75),Wrap:n(30),WrapDegrees:n(31)}},function(t,i){t.exports=function(t,i){return Math.atan2(i.y-t.y,i.x-t.x)}},function(t,i){t.exports=function(t,i){return Math.atan2(i.x-t.x,i.y-t.y)}},function(t,i){t.exports=function(t,i,n,r){return Math.atan2(n-t,r-i)}},function(t,i,n){var r=n(18);t.exports=function(){return r(-Math.PI,Math.PI)}},function(t,i,n){var r=n(18);t.exports=function(){return r(-180,180)}},function(t,i,n){var r=n(29);t.exports=function(t){return r(t+Math.PI)}},function(t,i,n){var r=n(4);t.exports=function(t,i,n){return void 0===n&&(n=.05),t===i||(Math.abs(i-t)<=n||Math.abs(i-t)>=r.PI2-n?t=i:(Math.abs(i-t)>Math.PI&&(i<t?i+=r.PI2:i-=r.PI2),i>t?t+=n:i<t&&(t-=n))),t}},function(t,i){t.exports=function(t,i){var n=i-t;return 0===n?0:n-360*Math.floor((n- -180)/360)}},function(t,i,n){t.exports={Between:n(77),BetweenPoints:n(78),BetweenPointsSquared:n(79),Chebyshev:n(80),Power:n(81),Snake:n(82),Squared:n(83)}},function(t,i){t.exports=function(t,i,n,r){var o=t-n,a=i-r;return Math.sqrt(o*o+a*a)}},function(t,i){t.exports=function(t,i){var n=t.x-i.x,r=t.y-i.y;return Math.sqrt(n*n+r*r)}},function(t,i){t.exports=function(t,i){var n=t.x-i.x,r=t.y-i.y;return n*n+r*r}},function(t,i){t.exports=function(t,i,n,r){return Math.max(Math.abs(t-n),Math.abs(i-r))}},function(t,i){t.exports=function(t,i,n,r,o){return void 0===o&&(o=2),Math.sqrt(Math.pow(n-t,o)+Math.pow(r-i,o))}},function(t,i){t.exports=function(t,i,n,r){return Math.abs(t-n)+Math.abs(i-r)}},function(t,i){t.exports=function(t,i,n,r){var o=t-n,a=i-r;return o*o+a*a}},function(t,i,n){t.exports={Back:n(85),Bounce:n(89),Circular:n(93),Cubic:n(97),Elastic:n(101),Expo:n(105),Linear:n(109),Quadratic:n(111),Quartic:n(115),Quintic:n(119),Sine:n(123),Stepped:n(127)}},function(t,i,n){t.exports={In:n(86),Out:n(87),InOut:n(88)}},function(t,i){t.exports=function(t,i){return void 0===i&&(i=1.70158),t*t*((i+1)*t-i)}},function(t,i){t.exports=function(t,i){return void 0===i&&(i=1.70158),--t*t*((i+1)*t+i)+1}},function(t,i){t.exports=function(t,i){void 0===i&&(i=1.70158);var n=1.525*i;return(t*=2)<1?t*t*((n+1)*t-n)*.5:.5*((t-=2)*t*((n+1)*t+n)+2)}},function(t,i,n){t.exports={In:n(90),Out:n(91),InOut:n(92)}},function(t,i){t.exports=function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}},function(t,i){t.exports=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},function(t,i){t.exports=function(t){var i=!1;return t<.5?(t=1-2*t,i=!0):t=2*t-1,t<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,i?.5*(1-t):.5*t+.5}},function(t,i,n){t.exports={In:n(94),Out:n(95),InOut:n(96)}},function(t,i){t.exports=function(t){return 1-Math.sqrt(1-t*t)}},function(t,i){t.exports=function(t){return Math.sqrt(1- --t*t)}},function(t,i){t.exports=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},function(t,i,n){t.exports={In:n(98),Out:n(99),InOut:n(100)}},function(t,i){t.exports=function(t){return t*t*t}},function(t,i){t.exports=function(t){return--t*t*t+1}},function(t,i){t.exports=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},function(t,i,n){t.exports={In:n(102),Out:n(103),InOut:n(104)}},function(t,i){t.exports=function(t,i,n){if(void 0===i&&(i=.1),void 0===n&&(n=.1),0===t)return 0;if(1===t)return 1;var r=n/4;return i<1?i=1:r=n*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(t-=1))*Math.sin((t-r)*(2*Math.PI)/n)}},function(t,i){t.exports=function(t,i,n){if(void 0===i&&(i=.1),void 0===n&&(n=.1),0===t)return 0;if(1===t)return 1;var r=n/4;return i<1?i=1:r=n*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin((t-r)*(2*Math.PI)/n)+1}},function(t,i){t.exports=function(t,i,n){if(void 0===i&&(i=.1),void 0===n&&(n=.1),0===t)return 0;if(1===t)return 1;var r=n/4;return i<1?i=1:r=n*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?i*Math.pow(2,10*(t-=1))*Math.sin((t-r)*(2*Math.PI)/n)*-.5:i*Math.pow(2,-10*(t-=1))*Math.sin((t-r)*(2*Math.PI)/n)*.5+1}},function(t,i,n){t.exports={In:n(106),Out:n(107),InOut:n(108)}},function(t,i){t.exports=function(t){return Math.pow(2,10*(t-1))-.001}},function(t,i){t.exports=function(t){return 1-Math.pow(2,-10*t)}},function(t,i){t.exports=function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}},function(t,i,n){t.exports=n(110)},function(t,i){t.exports=function(t){return t}},function(t,i,n){t.exports={In:n(112),Out:n(113),InOut:n(114)}},function(t,i){t.exports=function(t){return t*t}},function(t,i){t.exports=function(t){return t*(2-t)}},function(t,i){t.exports=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},function(t,i,n){t.exports={In:n(116),Out:n(117),InOut:n(118)}},function(t,i){t.exports=function(t){return t*t*t*t}},function(t,i){t.exports=function(t){return 1- --t*t*t*t}},function(t,i){t.exports=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},function(t,i,n){t.exports={In:n(120),Out:n(121),InOut:n(122)}},function(t,i){t.exports=function(t){return t*t*t*t*t}},function(t,i){t.exports=function(t){return--t*t*t*t*t+1}},function(t,i){t.exports=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},function(t,i,n){t.exports={In:n(124),Out:n(125),InOut:n(126)}},function(t,i){t.exports=function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)}},function(t,i){t.exports=function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)}},function(t,i){t.exports=function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))}},function(t,i,n){t.exports=n(128)},function(t,i){t.exports=function(t,i){return void 0===i&&(i=1),t<=0?0:t>=1?1:1/i*(1+(i*t|0))}},function(t,i,n){t.exports={Ceil:n(130),Equal:n(32),Floor:n(131),GreaterThan:n(132),LessThan:n(133)}},function(t,i){t.exports=function(t,i){return void 0===i&&(i=1e-4),Math.ceil(t-i)}},function(t,i){t.exports=function(t,i){return void 0===i&&(i=1e-4),Math.floor(t+i)}},function(t,i){t.exports=function(t,i,n){return void 0===n&&(n=1e-4),t>i-n}},function(t,i){t.exports=function(t,i,n){return void 0===n&&(n=1e-4),t<i+n}},function(t,i,n){t.exports={Bezier:n(135),CatmullRom:n(136),CubicBezier:n(137),Linear:n(138),QuadraticBezier:n(139),SmoothStep:n(140),SmootherStep:n(141)}},function(t,i,n){var r=n(33);t.exports=function(t,i){for(var n=0,o=t.length-1,a=0;a<=o;a++)n+=Math.pow(1-i,o-a)*Math.pow(i,a)*t[a]*r(o,a);return n}},function(t,i,n){var r=n(35);t.exports=function(t,i){var n=t.length-1,o=n*i,a=Math.floor(o);return t[0]===t[n]?(i<0&&(a=Math.floor(o=n*(1+i))),r(o-a,t[(a-1+n)%n],t[a],t[(a+1)%n],t[(a+2)%n])):i<0?t[0]-(r(-o,t[0],t[0],t[1],t[1])-t[0]):i>1?t[n]-(r(o-n,t[n],t[n],t[n-1],t[n-1])-t[n]):r(o-a,t[a?a-1:0],t[a],t[n<a+1?n:a+1],t[n<a+2?n:a+2])}},function(t,i){t.exports=function(t,i,n,r,o){return function P0(t,i){var n=1-t;return n*n*n*i}(t,i)+function P1(t,i){var n=1-t;return 3*n*n*t*i}(t,n)+function P2(t,i){return 3*(1-t)*t*t*i}(t,r)+function P3(t,i){return t*t*t*i}(t,o)}},function(t,i,n){var r=n(36);t.exports=function(t,i){var n=t.length-1,o=n*i,a=Math.floor(o);return i<0?r(t[0],t[1],o):i>1?r(t[n],t[n-1],n-o):r(t[a],t[a+1>n?n:a+1],o-a)}},function(t,i){t.exports=function(t,i,n,r){return function P0(t,i){var n=1-t;return n*n*i}(t,i)+function P1(t,i){return 2*(1-t)*t*i}(t,n)+function P2(t,i){return t*t*i}(t,r)}},function(t,i,n){var r=n(37);t.exports=function(t,i,n){return i+(n-i)*r(t,0,1)}},function(t,i,n){var r=n(38);t.exports=function(t,i,n){return i+(n-i)*r(t,0,1)}},function(t,i,n){t.exports={GetNext:n(143),IsSize:n(144),IsValue:n(145)}},function(t,i){t.exports=function(t){var i=Math.log(t)/.6931471805599453;return 1<<Math.ceil(i)}},function(t,i){t.exports=function(t,i){return t>0&&0==(t&t-1)&&i>0&&0==(i&i-1)}},function(t,i){t.exports=function(t){return t>0&&0==(t&t-1)}},function(t,i,n){t.exports={Ceil:n(147),Floor:n(148),To:n(149)}},function(t,i){t.exports=function(t,i,n,r){return void 0===n&&(n=0),0===i?t:(t-=n,t=i*Math.ceil(t/i),r?(n+t)/i:n+t)}},function(t,i){t.exports=function(t,i,n,r){return void 0===n&&(n=0),0===i?t:(t-=n,t=i*Math.floor(t/i),r?(n+t)/i:n+t)}},function(t,i){t.exports=function(t,i,n,r){return void 0===n&&(n=0),0===i?t:(t-=n,t=i*Math.round(t/i),r?(n+t)/i:n+t)}},function(t,i,n){var r=new(n(0))({initialize:function RandomDataGenerator2(t){void 0===t&&(t=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],t&&this.init(t)},rnd:function(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},hash:function(t){var i,n=this.n;t=t.toString();for(var r=0;r<t.length;r++)i=.02519603282416938*(n+=t.charCodeAt(r)),i-=n=i>>>0,n=(i*=n)>>>0,n+=4294967296*(i-=n);return this.n=n,2.3283064365386963e-10*(n>>>0)},init:function(t){"string"==typeof t?this.state(t):this.sow(t)},sow:function(t){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,t)for(var i=0;i<t.length&&null!=t[i];i++){var n=t[i];this.s0-=this.hash(n),this.s0+=~~(this.s0<0),this.s1-=this.hash(n),this.s1+=~~(this.s1<0),this.s2-=this.hash(n),this.s2+=~~(this.s2<0)}},integer:function(){return 4294967296*this.rnd()},frac:function(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(t,i){return Math.floor(this.realInRange(0,i-t+1)+t)},between:function(t,i){return Math.floor(this.realInRange(0,i-t+1)+t)},realInRange:function(t,i){return this.frac()*(i-t)+t},normal:function(){return 1-2*this.frac()},uuid:function(){var t="",i="";for(i=t="";t++<36;i+=~t%5|3*t&4?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return i},pick:function(t){return t[this.integerInRange(0,t.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(t){return t[~~(Math.pow(this.frac(),2)*(t.length-1)+.5)]},timestamp:function(t,i){return this.realInRange(t||9466848e5,i||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(t){return"string"==typeof t&&t.match(/^!rnd/)&&(t=t.split(","),this.c=parseFloat(t[1]),this.s0=parseFloat(t[2]),this.s1=parseFloat(t[3]),this.s2=parseFloat(t[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(t){for(var i=t.length-1;i>0;i--){var n=Math.floor(this.frac()*(i+1)),r=t[n];t[n]=t[i],t[i]=r}return t}});t.exports=r},function(t,i){t.exports=function(t){for(var i=0,n=0;n<t.length;n++)i+=+t[n];return i/t.length}},function(t,i){t.exports=function(t,i){return Math.floor(Math.random()*(i-t+1)+t)}},function(t,i){t.exports=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=10);var r=Math.pow(n,-i);return Math.ceil(t*r)/r}},function(t,i){t.exports=function(t,i){return Math.abs(t-i)}},function(t,i,n){var r=n(3),o=n(0),a=n(20),h=n(1),d=new a,f=new o({initialize:function Euler2(t,i,n,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=Euler2.DefaultOrder),this._x=t,this._y=i,this._z=n,this._order=r,this.onChangeCallback=h},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback(this)}},set:function(t,i,n,r){return void 0===r&&(r=this._order),this._x=t,this._y=i,this._z=n,this._order=r,this.onChangeCallback(this),this},copy:function(t){return this.set(t.x,t.y,t.z,t.order)},setFromQuaternion:function(t,i,n){return void 0===i&&(i=this._order),void 0===n&&(n=!1),d.fromQuat(t),this.setFromRotationMatrix(d,i,n)},setFromRotationMatrix:function(t,i,n){void 0===i&&(i=this._order),void 0===n&&(n=!1);var o=t.val,a=o[0],h=o[4],d=o[8],f=o[1],p=o[5],T=o[9],b=o[2],S=o[6],A=o[10],P=0,O=0,L=0,D=.99999;switch(i){case"XYZ":O=Math.asin(r(d,-1,1)),Math.abs(d)<D?(P=Math.atan2(-T,A),L=Math.atan2(-h,a)):P=Math.atan2(S,p);break;case"YXZ":P=Math.asin(-r(T,-1,1)),Math.abs(T)<D?(O=Math.atan2(d,A),L=Math.atan2(f,p)):O=Math.atan2(-b,a);break;case"ZXY":P=Math.asin(r(S,-1,1)),Math.abs(S)<D?(O=Math.atan2(-b,A),L=Math.atan2(-h,p)):L=Math.atan2(f,a);break;case"ZYX":O=Math.asin(-r(b,-1,1)),Math.abs(b)<D?(P=Math.atan2(S,A),L=Math.atan2(f,a)):L=Math.atan2(-h,p);break;case"YZX":L=Math.asin(r(f,-1,1)),Math.abs(f)<D?(P=Math.atan2(-T,p),O=Math.atan2(-b,a)):O=Math.atan2(d,A);break;case"XZY":L=Math.asin(-r(h,-1,1)),Math.abs(h)<D?(P=Math.atan2(S,p),O=Math.atan2(d,a)):P=Math.atan2(-T,A)}return this._x=P,this._y=O,this._z=L,this._order=i,n&&this.onChangeCallback(this),this}});f.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],f.DefaultOrder="XYZ",t.exports=f},function(t,i){t.exports=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=10);var r=Math.pow(n,-i);return Math.floor(t*r)/r}},function(t,i,n){var r=n(3);t.exports=function(t,i,n){return(n-i)*(t=r(t,0,1))+i}},function(t,i){t.exports=function(t,i){return t/i/1e3}},function(t,i){t.exports=function(t){return t==parseFloat(t)?!(t%2):void 0}},function(t,i){t.exports=function(t){return t===parseFloat(t)?!(t%2):void 0}},function(t,i){t.exports=function(t,i,n){return Math.min(t+i,n)}},function(t,i){t.exports=function(t){var i=t.length;if(0===i)return 0;t.sort((function(t,i){return t-i}));var n=Math.floor(i/2);return i%2==0?(t[n]+t[n-1])/2:t[n]}},function(t,i){t.exports=function(t,i,n){return Math.max(t-i,n)}},function(t,i){t.exports=function(t,i,n,r){void 0===n&&(n=i+1);var o=(t-i)/(n-i);return o>1?void 0!==r?(o=(r-t)/(r-n))<0&&(o=0):o=1:o<0&&(o=0),o}},function(t,i){t.exports=function(t,i){void 0===i&&(i=1);var n=2*Math.random()*Math.PI;return t.x=Math.cos(n)*i,t.y=Math.sin(n)*i,t}},function(t,i){t.exports=function(t,i){void 0===i&&(i=1);var n=2*Math.random()*Math.PI,r=2*Math.random()-1,o=Math.sqrt(1-r*r)*i;return t.x=Math.cos(n)*o,t.y=Math.sin(n)*o,t.z=r*i,t}},function(t,i){t.exports=function(t,i){return void 0===i&&(i=1),t.x=(2*Math.random()-1)*i,t.y=(2*Math.random()-1)*i,t.z=(2*Math.random()-1)*i,t.w=(2*Math.random()-1)*i,t}},function(t,i){t.exports=function(t,i){var n=t.x,r=t.y;return t.x=n*Math.cos(i)-r*Math.sin(i),t.y=n*Math.sin(i)+r*Math.cos(i),t}},function(t,i){t.exports=function(t,i,n,r,o){var a=r+Math.atan2(t.y-n,t.x-i);return t.x=i+o*Math.cos(a),t.y=n+o*Math.sin(a),t}},function(t,i){t.exports=function(t,i,n,r,o){return t.x=i+o*Math.cos(r),t.y=n+o*Math.sin(r),t}},function(t,i){t.exports=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=10);var r=Math.pow(n,-i);return Math.round(t*r)/r}},function(t,i){t.exports=function(t,i,n,r){void 0===i&&(i=1),void 0===n&&(n=1),void 0===r&&(r=1),r*=Math.PI/t;for(var o=[],a=[],h=0;h<t;h++)i+=(n-=i*r)*r,o[h]=n,a[h]=i;return{sin:a,cos:o,length:t}}},function(t,i,n){var r=n(2);t.exports=function(t,i,n,o){void 0===o&&(o=new r);var a=0,h=0;return t>0&&t<=i*n&&(a=t>i-1?t-(h=Math.floor(t/i))*i:t,o.set(a,h)),o}},function(t,i){t.exports=function(t,i,n){return Math.abs(t-i)<=n}},function(t,i,n){var r=new(n(0))({initialize:function Vector42(t,i,n,r){this.x=0,this.y=0,this.z=0,this.w=0,"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=n||0,this.w=r||0)},clone:function(){return new r(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this.w=t.w||0,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},set:function(t,i,n,r){return"object"==typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=n||0,this.w=r||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this.w+=t.w||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this.w-=t.w||0,this},scale:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function(){var t=this.x,i=this.y,n=this.z,r=this.w;return Math.sqrt(t*t+i*i+n*n+r*r)},lengthSq:function(){var t=this.x,i=this.y,n=this.z,r=this.w;return t*t+i*i+n*n+r*r},normalize:function(){var t=this.x,i=this.y,n=this.z,r=this.w,o=t*t+i*i+n*n+r*r;return o>0&&(o=1/Math.sqrt(o),this.x=t*o,this.y=i*o,this.z=n*o,this.w=r*o),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,i){void 0===i&&(i=0);var n=this.x,r=this.y,o=this.z,a=this.w;return this.x=n+i*(t.x-n),this.y=r+i*(t.y-r),this.z=o+i*(t.z-o),this.w=a+i*(t.w-a),this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this.w*=t.w||1,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this.w/=t.w||1,this},distance:function(t){var i=t.x-this.x,n=t.y-this.y,r=t.z-this.z||0,o=t.w-this.w||0;return Math.sqrt(i*i+n*n+r*r+o*o)},distanceSq:function(t){var i=t.x-this.x,n=t.y-this.y,r=t.z-this.z||0,o=t.w-this.w||0;return i*i+n*n+r*r+o*o},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(t){var i=this.x,n=this.y,r=this.z,o=this.w,a=t.val;return this.x=a[0]*i+a[4]*n+a[8]*r+a[12]*o,this.y=a[1]*i+a[5]*n+a[9]*r+a[13]*o,this.z=a[2]*i+a[6]*n+a[10]*r+a[14]*o,this.w=a[3]*i+a[7]*n+a[11]*r+a[15]*o,this},transformQuat:function(t){var i=this.x,n=this.y,r=this.z,o=t.x,a=t.y,h=t.z,d=t.w,f=d*i+a*r-h*n,p=d*n+h*i-o*r,T=d*r+o*n-a*i,b=-o*i-a*n-h*r;return this.x=f*d+b*-o+p*-h-T*-a,this.y=p*d+b*-a+T*-o-f*-h,this.z=T*d+b*-h+f*-a-p*-o,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});r.prototype.sub=r.prototype.subtract,r.prototype.mul=r.prototype.multiply,r.prototype.div=r.prototype.divide,r.prototype.dist=r.prototype.distance,r.prototype.distSq=r.prototype.distanceSq,r.prototype.len=r.prototype.length,r.prototype.lenSq=r.prototype.lengthSq,t.exports=r},function(t,i,n){var r=n(14),o=n(20),a=n(43),h=new o,d=new a,f=new r;t.exports=function(t,i,n){return d.setAxisAngle(i,n),h.fromRotationTranslation(d,f.set(0,0,0)),t.transformMat4(h)}},function(t,i){t.exports="resize"},function(t,i,n){var r=n(179),o=n(0),a=n(44),h=new o({Extends:r,initialize:function ScenePlugin2(t,i,n){r.call(this,i),this.scene=t,this.systems=t.sys,this.pluginKey=n,t.sys.events.once(a.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=h},function(t,i,n){var r=new(n(0))({initialize:function BasePlugin2(t){this.pluginManager=t,this.game=t.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=r},function(t,i){t.exports="addedtoscene"},function(t,i){t.exports="boot"},function(t,i){t.exports="create"},function(t,i){t.exports="destroy"},function(t,i){t.exports="pause"},function(t,i){t.exports="postupdate"},function(t,i){t.exports="prerender"},function(t,i){t.exports="preupdate"},function(t,i){t.exports="ready"},function(t,i){t.exports="removedfromscene"},function(t,i){t.exports="render"},function(t,i){t.exports="resume"},function(t,i){t.exports="shutdown"},function(t,i){t.exports="sleep"},function(t,i){t.exports="start"},function(t,i){t.exports="transitioncomplete"},function(t,i){t.exports="transitioninit"},function(t,i){t.exports="transitionout"},function(t,i){t.exports="transitionstart"},function(t,i){t.exports="transitionwake"},function(t,i){t.exports="update"},function(t,i){t.exports="wake"},function(t,i){(function(){var i,n,r,o,a,h=this&&this.__extends||(i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])})(t,n)},function(t,n){function __(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)});!function(t){var i,n,r,o,a,d,f=function(){function Animation2(t,i,n){if(null==t)throw new Error("name cannot be null.");if(null==i)throw new Error("timelines cannot be null.");this.name=t,this.timelines=i,this.timelineIds=[];for(var r=0;r<i.length;r++)this.timelineIds[i[r].getPropertyId()]=!0;this.duration=n}return Animation2.prototype.hasTimeline=function(t){return 1==this.timelineIds[t]},Animation2.prototype.apply=function(t,i,n,r,o,a,h,d){if(null==t)throw new Error("skeleton cannot be null.");r&&0!=this.duration&&(n%=this.duration,i>0&&(i%=this.duration));for(var f=this.timelines,p=0,T=f.length;p<T;p++)f[p].apply(t,i,n,o,a,h,d)},Animation2.binarySearch=function(t,i,n){void 0===n&&(n=1);var r=0,o=t.length/n-2;if(0==o)return n;for(var a=o>>>1;;){if(t[(a+1)*n]<=i?r=a+1:o=a,r==o)return(r+1)*n;a=r+o>>>1}},Animation2.linearSearch=function(t,i,n){for(var r=0,o=t.length-n;r<=o;r+=n)if(t[r]>i)return r;return-1},Animation2}();t.Animation=f,(n=i=t.MixBlend||(t.MixBlend={}))[n.setup=0]="setup",n[n.first=1]="first",n[n.replace=2]="replace",n[n.add=3]="add",(o=r=t.MixDirection||(t.MixDirection={}))[o.mixIn=0]="mixIn",o[o.mixOut=1]="mixOut",(d=a=t.TimelineType||(t.TimelineType={}))[d.rotate=0]="rotate",d[d.translate=1]="translate",d[d.scale=2]="scale",d[d.shear=3]="shear",d[d.attachment=4]="attachment",d[d.color=5]="color",d[d.deform=6]="deform",d[d.event=7]="event",d[d.drawOrder=8]="drawOrder",d[d.ikConstraint=9]="ikConstraint",d[d.transformConstraint=10]="transformConstraint",d[d.pathConstraintPosition=11]="pathConstraintPosition",d[d.pathConstraintSpacing=12]="pathConstraintSpacing",d[d.pathConstraintMix=13]="pathConstraintMix",d[d.twoColor=14]="twoColor";var p=function(){function CurveTimeline2(i){if(i<=0)throw new Error("frameCount must be > 0: "+i);this.curves=t.Utils.newFloatArray((i-1)*CurveTimeline2.BEZIER_SIZE)}return CurveTimeline2.prototype.getFrameCount=function(){return this.curves.length/CurveTimeline2.BEZIER_SIZE+1},CurveTimeline2.prototype.setLinear=function(t){this.curves[t*CurveTimeline2.BEZIER_SIZE]=CurveTimeline2.LINEAR},CurveTimeline2.prototype.setStepped=function(t){this.curves[t*CurveTimeline2.BEZIER_SIZE]=CurveTimeline2.STEPPED},CurveTimeline2.prototype.getCurveType=function(t){var i=t*CurveTimeline2.BEZIER_SIZE;if(i==this.curves.length)return CurveTimeline2.LINEAR;var n=this.curves[i];return n==CurveTimeline2.LINEAR?CurveTimeline2.LINEAR:n==CurveTimeline2.STEPPED?CurveTimeline2.STEPPED:CurveTimeline2.BEZIER},CurveTimeline2.prototype.setCurve=function(t,i,n,r,o){var a=.03*(2*-i+r),h=.03*(2*-n+o),d=.006*(3*(i-r)+1),f=.006*(3*(n-o)+1),p=2*a+d,T=2*h+f,b=.3*i+a+.16666667*d,S=.3*n+h+.16666667*f,A=t*CurveTimeline2.BEZIER_SIZE,P=this.curves;P[A++]=CurveTimeline2.BEZIER;for(var O=b,L=S,D=A+CurveTimeline2.BEZIER_SIZE-1;A<D;A+=2)P[A]=O,P[A+1]=L,b+=p,S+=T,p+=d,T+=f,O+=b,L+=S},CurveTimeline2.prototype.getCurvePercent=function(i,n){n=t.MathUtils.clamp(n,0,1);var r=this.curves,o=i*CurveTimeline2.BEZIER_SIZE,a=r[o];if(a==CurveTimeline2.LINEAR)return n;if(a==CurveTimeline2.STEPPED)return 0;for(var h=0,d=++o,f=o+CurveTimeline2.BEZIER_SIZE-1;o<f;o+=2)if((h=r[o])>=n){var p=void 0,T=void 0;return o==d?(p=0,T=0):(p=r[o-2],T=r[o-1]),T+(r[o+1]-T)*(n-p)/(h-p)}var b=r[o-1];return b+(1-b)*(n-h)/(1-h)},CurveTimeline2.LINEAR=0,CurveTimeline2.STEPPED=1,CurveTimeline2.BEZIER=2,CurveTimeline2.BEZIER_SIZE=19,CurveTimeline2}();t.CurveTimeline=p;var T=function(n){function RotateTimeline2(i){var r=n.call(this,i)||this;return r.frames=t.Utils.newFloatArray(i<<1),r}return h(RotateTimeline2,n),RotateTimeline2.prototype.getPropertyId=function(){return(a.rotate<<24)+this.boneIndex},RotateTimeline2.prototype.setFrame=function(t,i,n){t<<=1,this.frames[t]=i,this.frames[t+RotateTimeline2.ROTATION]=n},RotateTimeline2.prototype.apply=function(t,n,r,o,a,h,d){var p=this.frames,T=t.bones[this.boneIndex];if(T.active)if(r<p[0])switch(h){case i.setup:return void(T.rotation=T.data.rotation);case i.first:var b=T.data.rotation-T.rotation;T.rotation+=(b-360*(16384-(16384.499999999996-b/360|0)))*a}else if(r>=p[p.length-RotateTimeline2.ENTRIES]){var S=p[p.length+RotateTimeline2.PREV_ROTATION];switch(h){case i.setup:T.rotation=T.data.rotation+S*a;break;case i.first:case i.replace:S+=T.data.rotation-T.rotation,S-=360*(16384-(16384.499999999996-S/360|0));case i.add:T.rotation+=S*a}}else{var A=f.binarySearch(p,r,RotateTimeline2.ENTRIES),P=p[A+RotateTimeline2.PREV_ROTATION],O=p[A],L=this.getCurvePercent((A>>1)-1,1-(r-O)/(p[A+RotateTimeline2.PREV_TIME]-O)),D=p[A+RotateTimeline2.ROTATION]-P;switch(D=P+(D-360*(16384-(16384.499999999996-D/360|0)))*L,h){case i.setup:T.rotation=T.data.rotation+(D-360*(16384-(16384.499999999996-D/360|0)))*a;break;case i.first:case i.replace:D+=T.data.rotation-T.rotation;case i.add:T.rotation+=(D-360*(16384-(16384.499999999996-D/360|0)))*a}}},RotateTimeline2.ENTRIES=2,RotateTimeline2.PREV_TIME=-2,RotateTimeline2.PREV_ROTATION=-1,RotateTimeline2.ROTATION=1,RotateTimeline2}(p);t.RotateTimeline=T;var b=function(n){function TranslateTimeline2(i){var r=n.call(this,i)||this;return r.frames=t.Utils.newFloatArray(i*TranslateTimeline2.ENTRIES),r}return h(TranslateTimeline2,n),TranslateTimeline2.prototype.getPropertyId=function(){return(a.translate<<24)+this.boneIndex},TranslateTimeline2.prototype.setFrame=function(t,i,n,r){t*=TranslateTimeline2.ENTRIES,this.frames[t]=i,this.frames[t+TranslateTimeline2.X]=n,this.frames[t+TranslateTimeline2.Y]=r},TranslateTimeline2.prototype.apply=function(t,n,r,o,a,h,d){var p=this.frames,T=t.bones[this.boneIndex];if(T.active)if(r<p[0])switch(h){case i.setup:return T.x=T.data.x,void(T.y=T.data.y);case i.first:T.x+=(T.data.x-T.x)*a,T.y+=(T.data.y-T.y)*a}else{var b=0,S=0;if(r>=p[p.length-TranslateTimeline2.ENTRIES])b=p[p.length+TranslateTimeline2.PREV_X],S=p[p.length+TranslateTimeline2.PREV_Y];else{var A=f.binarySearch(p,r,TranslateTimeline2.ENTRIES);b=p[A+TranslateTimeline2.PREV_X],S=p[A+TranslateTimeline2.PREV_Y];var P=p[A],O=this.getCurvePercent(A/TranslateTimeline2.ENTRIES-1,1-(r-P)/(p[A+TranslateTimeline2.PREV_TIME]-P));b+=(p[A+TranslateTimeline2.X]-b)*O,S+=(p[A+TranslateTimeline2.Y]-S)*O}switch(h){case i.setup:T.x=T.data.x+b*a,T.y=T.data.y+S*a;break;case i.first:case i.replace:T.x+=(T.data.x+b-T.x)*a,T.y+=(T.data.y+S-T.y)*a;break;case i.add:T.x+=b*a,T.y+=S*a}}},TranslateTimeline2.ENTRIES=3,TranslateTimeline2.PREV_TIME=-3,TranslateTimeline2.PREV_X=-2,TranslateTimeline2.PREV_Y=-1,TranslateTimeline2.X=1,TranslateTimeline2.Y=2,TranslateTimeline2}(p);t.TranslateTimeline=b;var S=function(n){function ScaleTimeline2(t){return n.call(this,t)||this}return h(ScaleTimeline2,n),ScaleTimeline2.prototype.getPropertyId=function(){return(a.scale<<24)+this.boneIndex},ScaleTimeline2.prototype.apply=function(n,o,a,h,d,p,T){var b=this.frames,S=n.bones[this.boneIndex];if(S.active)if(a<b[0])switch(p){case i.setup:return S.scaleX=S.data.scaleX,void(S.scaleY=S.data.scaleY);case i.first:S.scaleX+=(S.data.scaleX-S.scaleX)*d,S.scaleY+=(S.data.scaleY-S.scaleY)*d}else{var A=0,P=0;if(a>=b[b.length-ScaleTimeline2.ENTRIES])A=b[b.length+ScaleTimeline2.PREV_X]*S.data.scaleX,P=b[b.length+ScaleTimeline2.PREV_Y]*S.data.scaleY;else{var O=f.binarySearch(b,a,ScaleTimeline2.ENTRIES);A=b[O+ScaleTimeline2.PREV_X],P=b[O+ScaleTimeline2.PREV_Y];var L=b[O],D=this.getCurvePercent(O/ScaleTimeline2.ENTRIES-1,1-(a-L)/(b[O+ScaleTimeline2.PREV_TIME]-L));A=(A+(b[O+ScaleTimeline2.X]-A)*D)*S.data.scaleX,P=(P+(b[O+ScaleTimeline2.Y]-P)*D)*S.data.scaleY}if(1==d)p==i.add?(S.scaleX+=A-S.data.scaleX,S.scaleY+=P-S.data.scaleY):(S.scaleX=A,S.scaleY=P);else{var I=0,F=0;if(T==r.mixOut)switch(p){case i.setup:I=S.data.scaleX,F=S.data.scaleY,S.scaleX=I+(Math.abs(A)*t.MathUtils.signum(I)-I)*d,S.scaleY=F+(Math.abs(P)*t.MathUtils.signum(F)-F)*d;break;case i.first:case i.replace:I=S.scaleX,F=S.scaleY,S.scaleX=I+(Math.abs(A)*t.MathUtils.signum(I)-I)*d,S.scaleY=F+(Math.abs(P)*t.MathUtils.signum(F)-F)*d;break;case i.add:I=S.scaleX,F=S.scaleY,S.scaleX=I+(Math.abs(A)*t.MathUtils.signum(I)-S.data.scaleX)*d,S.scaleY=F+(Math.abs(P)*t.MathUtils.signum(F)-S.data.scaleY)*d}else switch(p){case i.setup:I=Math.abs(S.data.scaleX)*t.MathUtils.signum(A),F=Math.abs(S.data.scaleY)*t.MathUtils.signum(P),S.scaleX=I+(A-I)*d,S.scaleY=F+(P-F)*d;break;case i.first:case i.replace:I=Math.abs(S.scaleX)*t.MathUtils.signum(A),F=Math.abs(S.scaleY)*t.MathUtils.signum(P),S.scaleX=I+(A-I)*d,S.scaleY=F+(P-F)*d;break;case i.add:I=t.MathUtils.signum(A),F=t.MathUtils.signum(P),S.scaleX=Math.abs(S.scaleX)*I+(A-Math.abs(S.data.scaleX)*I)*d,S.scaleY=Math.abs(S.scaleY)*F+(P-Math.abs(S.data.scaleY)*F)*d}}}},ScaleTimeline2}(b);t.ScaleTimeline=S;var A=function(t){function ShearTimeline2(i){return t.call(this,i)||this}return h(ShearTimeline2,t),ShearTimeline2.prototype.getPropertyId=function(){return(a.shear<<24)+this.boneIndex},ShearTimeline2.prototype.apply=function(t,n,r,o,a,h,d){var p=this.frames,T=t.bones[this.boneIndex];if(T.active)if(r<p[0])switch(h){case i.setup:return T.shearX=T.data.shearX,void(T.shearY=T.data.shearY);case i.first:T.shearX+=(T.data.shearX-T.shearX)*a,T.shearY+=(T.data.shearY-T.shearY)*a}else{var b=0,S=0;if(r>=p[p.length-ShearTimeline2.ENTRIES])b=p[p.length+ShearTimeline2.PREV_X],S=p[p.length+ShearTimeline2.PREV_Y];else{var A=f.binarySearch(p,r,ShearTimeline2.ENTRIES);b=p[A+ShearTimeline2.PREV_X],S=p[A+ShearTimeline2.PREV_Y];var P=p[A],O=this.getCurvePercent(A/ShearTimeline2.ENTRIES-1,1-(r-P)/(p[A+ShearTimeline2.PREV_TIME]-P));b+=(p[A+ShearTimeline2.X]-b)*O,S+=(p[A+ShearTimeline2.Y]-S)*O}switch(h){case i.setup:T.shearX=T.data.shearX+b*a,T.shearY=T.data.shearY+S*a;break;case i.first:case i.replace:T.shearX+=(T.data.shearX+b-T.shearX)*a,T.shearY+=(T.data.shearY+S-T.shearY)*a;break;case i.add:T.shearX+=b*a,T.shearY+=S*a}}},ShearTimeline2}(b);t.ShearTimeline=A;var P=function(n){function ColorTimeline2(i){var r=n.call(this,i)||this;return r.frames=t.Utils.newFloatArray(i*ColorTimeline2.ENTRIES),r}return h(ColorTimeline2,n),ColorTimeline2.prototype.getPropertyId=function(){return(a.color<<24)+this.slotIndex},ColorTimeline2.prototype.setFrame=function(t,i,n,r,o,a){t*=ColorTimeline2.ENTRIES,this.frames[t]=i,this.frames[t+ColorTimeline2.R]=n,this.frames[t+ColorTimeline2.G]=r,this.frames[t+ColorTimeline2.B]=o,this.frames[t+ColorTimeline2.A]=a},ColorTimeline2.prototype.apply=function(t,n,r,o,a,h,d){var p=t.slots[this.slotIndex];if(p.bone.active){var T=this.frames;if(r<T[0])switch(h){case i.setup:return void p.color.setFromColor(p.data.color);case i.first:var b=p.color,S=p.data.color;b.add((S.r-b.r)*a,(S.g-b.g)*a,(S.b-b.b)*a,(S.a-b.a)*a)}else{var A=0,P=0,O=0,L=0;if(r>=T[T.length-ColorTimeline2.ENTRIES]){var D=T.length;A=T[D+ColorTimeline2.PREV_R],P=T[D+ColorTimeline2.PREV_G],O=T[D+ColorTimeline2.PREV_B],L=T[D+ColorTimeline2.PREV_A]}else{var I=f.binarySearch(T,r,ColorTimeline2.ENTRIES);A=T[I+ColorTimeline2.PREV_R],P=T[I+ColorTimeline2.PREV_G],O=T[I+ColorTimeline2.PREV_B],L=T[I+ColorTimeline2.PREV_A];var F=T[I],B=this.getCurvePercent(I/ColorTimeline2.ENTRIES-1,1-(r-F)/(T[I+ColorTimeline2.PREV_TIME]-F));A+=(T[I+ColorTimeline2.R]-A)*B,P+=(T[I+ColorTimeline2.G]-P)*B,O+=(T[I+ColorTimeline2.B]-O)*B,L+=(T[I+ColorTimeline2.A]-L)*B}if(1==a)p.color.set(A,P,O,L);else{b=p.color;h==i.setup&&b.setFromColor(p.data.color),b.add((A-b.r)*a,(P-b.g)*a,(O-b.b)*a,(L-b.a)*a)}}}},ColorTimeline2.ENTRIES=5,ColorTimeline2.PREV_TIME=-5,ColorTimeline2.PREV_R=-4,ColorTimeline2.PREV_G=-3,ColorTimeline2.PREV_B=-2,ColorTimeline2.PREV_A=-1,ColorTimeline2.R=1,ColorTimeline2.G=2,ColorTimeline2.B=3,ColorTimeline2.A=4,ColorTimeline2}(p);t.ColorTimeline=P;var O=function(n){function TwoColorTimeline2(i){var r=n.call(this,i)||this;return r.frames=t.Utils.newFloatArray(i*TwoColorTimeline2.ENTRIES),r}return h(TwoColorTimeline2,n),TwoColorTimeline2.prototype.getPropertyId=function(){return(a.twoColor<<24)+this.slotIndex},TwoColorTimeline2.prototype.setFrame=function(t,i,n,r,o,a,h,d,f){t*=TwoColorTimeline2.ENTRIES,this.frames[t]=i,this.frames[t+TwoColorTimeline2.R]=n,this.frames[t+TwoColorTimeline2.G]=r,this.frames[t+TwoColorTimeline2.B]=o,this.frames[t+TwoColorTimeline2.A]=a,this.frames[t+TwoColorTimeline2.R2]=h,this.frames[t+TwoColorTimeline2.G2]=d,this.frames[t+TwoColorTimeline2.B2]=f},TwoColorTimeline2.prototype.apply=function(t,n,r,o,a,h,d){var p=t.slots[this.slotIndex];if(p.bone.active){var T=this.frames;if(r<T[0])switch(h){case i.setup:return p.color.setFromColor(p.data.color),void p.darkColor.setFromColor(p.data.darkColor);case i.first:var b=p.color,S=p.darkColor,A=p.data.color,P=p.data.darkColor;b.add((A.r-b.r)*a,(A.g-b.g)*a,(A.b-b.b)*a,(A.a-b.a)*a),S.add((P.r-S.r)*a,(P.g-S.g)*a,(P.b-S.b)*a,0)}else{var O=0,L=0,D=0,I=0,F=0,B=0,N=0;if(r>=T[T.length-TwoColorTimeline2.ENTRIES]){var Y=T.length;O=T[Y+TwoColorTimeline2.PREV_R],L=T[Y+TwoColorTimeline2.PREV_G],D=T[Y+TwoColorTimeline2.PREV_B],I=T[Y+TwoColorTimeline2.PREV_A],F=T[Y+TwoColorTimeline2.PREV_R2],B=T[Y+TwoColorTimeline2.PREV_G2],N=T[Y+TwoColorTimeline2.PREV_B2]}else{var X=f.binarySearch(T,r,TwoColorTimeline2.ENTRIES);O=T[X+TwoColorTimeline2.PREV_R],L=T[X+TwoColorTimeline2.PREV_G],D=T[X+TwoColorTimeline2.PREV_B],I=T[X+TwoColorTimeline2.PREV_A],F=T[X+TwoColorTimeline2.PREV_R2],B=T[X+TwoColorTimeline2.PREV_G2],N=T[X+TwoColorTimeline2.PREV_B2];var G=T[X],U=this.getCurvePercent(X/TwoColorTimeline2.ENTRIES-1,1-(r-G)/(T[X+TwoColorTimeline2.PREV_TIME]-G));O+=(T[X+TwoColorTimeline2.R]-O)*U,L+=(T[X+TwoColorTimeline2.G]-L)*U,D+=(T[X+TwoColorTimeline2.B]-D)*U,I+=(T[X+TwoColorTimeline2.A]-I)*U,F+=(T[X+TwoColorTimeline2.R2]-F)*U,B+=(T[X+TwoColorTimeline2.G2]-B)*U,N+=(T[X+TwoColorTimeline2.B2]-N)*U}if(1==a)p.color.set(O,L,D,I),p.darkColor.set(F,B,N,1);else{b=p.color,S=p.darkColor;h==i.setup&&(b.setFromColor(p.data.color),S.setFromColor(p.data.darkColor)),b.add((O-b.r)*a,(L-b.g)*a,(D-b.b)*a,(I-b.a)*a),S.add((F-S.r)*a,(B-S.g)*a,(N-S.b)*a,0)}}}},TwoColorTimeline2.ENTRIES=8,TwoColorTimeline2.PREV_TIME=-8,TwoColorTimeline2.PREV_R=-7,TwoColorTimeline2.PREV_G=-6,TwoColorTimeline2.PREV_B=-5,TwoColorTimeline2.PREV_A=-4,TwoColorTimeline2.PREV_R2=-3,TwoColorTimeline2.PREV_G2=-2,TwoColorTimeline2.PREV_B2=-1,TwoColorTimeline2.R=1,TwoColorTimeline2.G=2,TwoColorTimeline2.B=3,TwoColorTimeline2.A=4,TwoColorTimeline2.R2=5,TwoColorTimeline2.G2=6,TwoColorTimeline2.B2=7,TwoColorTimeline2}(p);t.TwoColorTimeline=O;var L=function(){function AttachmentTimeline2(i){this.frames=t.Utils.newFloatArray(i),this.attachmentNames=new Array(i)}return AttachmentTimeline2.prototype.getPropertyId=function(){return(a.attachment<<24)+this.slotIndex},AttachmentTimeline2.prototype.getFrameCount=function(){return this.frames.length},AttachmentTimeline2.prototype.setFrame=function(t,i,n){this.frames[t]=i,this.attachmentNames[t]=n},AttachmentTimeline2.prototype.apply=function(t,n,o,a,h,d,p){var T=t.slots[this.slotIndex];if(T.bone.active)if(p!=r.mixOut){var b=this.frames;if(o<b[0])d!=i.setup&&d!=i.first||this.setAttachment(t,T,T.data.attachmentName);else{var S=0;S=o>=b[b.length-1]?b.length-1:f.binarySearch(b,o,1)-1;var A=this.attachmentNames[S];t.slots[this.slotIndex].setAttachment(null==A?null:t.getAttachment(this.slotIndex,A))}}else d==i.setup&&this.setAttachment(t,T,T.data.attachmentName)},AttachmentTimeline2.prototype.setAttachment=function(t,i,n){i.attachment=null==n?null:t.getAttachment(this.slotIndex,n)},AttachmentTimeline2}();t.AttachmentTimeline=L;var D=null,I=function(n){function DeformTimeline2(i){var r=n.call(this,i)||this;return r.frames=t.Utils.newFloatArray(i),r.frameVertices=new Array(i),null==D&&(D=t.Utils.newFloatArray(64)),r}return h(DeformTimeline2,n),DeformTimeline2.prototype.getPropertyId=function(){return(a.deform<<27)+ +this.attachment.id+this.slotIndex},DeformTimeline2.prototype.setFrame=function(t,i,n){this.frames[t]=i,this.frameVertices[t]=n},DeformTimeline2.prototype.apply=function(n,r,o,a,h,d,p){var T=n.slots[this.slotIndex];if(T.bone.active){var b=T.getAttachment();if(b instanceof t.VertexAttachment&&b.deformAttachment==this.attachment){var S=T.deform;0==S.length&&(d=i.setup);var A=this.frameVertices,P=A[0].length,O=this.frames;if(o<O[0]){var L=b;switch(d){case i.setup:return void(S.length=0);case i.first:if(1==h){S.length=0;break}var D=t.Utils.setArraySize(S,P);if(null==L.bones)for(var I=L.vertices,F=0;F<P;F++)D[F]+=(I[F]-D[F])*h;else{h=1-h;for(F=0;F<P;F++)D[F]*=h}}}else{var B=t.Utils.setArraySize(S,P);if(o>=O[O.length-1]){var N=A[O.length-1];if(1==h)if(d==i.add)if(null==(L=b).bones){I=L.vertices;for(var Y=0;Y<P;Y++)B[Y]+=N[Y]-I[Y]}else for(var X=0;X<P;X++)B[X]+=N[X];else t.Utils.arrayCopy(N,0,B,0,P);else switch(d){case i.setup:var G=b;if(null==G.bones){I=G.vertices;for(var U=0;U<P;U++){var V=I[U];B[U]=V+(N[U]-V)*h}}else for(var z=0;z<P;z++)B[z]=N[z]*h;break;case i.first:case i.replace:for(var W=0;W<P;W++)B[W]+=(N[W]-B[W])*h;break;case i.add:if(null==(L=b).bones){I=L.vertices;for(var H=0;H<P;H++)B[H]+=(N[H]-I[H])*h}else for(var q=0;q<P;q++)B[q]+=N[q]*h}}else{var Z=f.binarySearch(O,o),K=A[Z-1],J=A[Z],Q=O[Z],$=this.getCurvePercent(Z-1,1-(o-Q)/(O[Z-1]-Q));if(1==h)if(d==i.add)if(null==(L=b).bones){I=L.vertices;for(var tt=0;tt<P;tt++){var et=K[tt];B[tt]+=et+(J[tt]-et)*$-I[tt]}}else for(var it=0;it<P;it++){et=K[it];B[it]+=et+(J[it]-et)*$}else for(var nt=0;nt<P;nt++){et=K[nt];B[nt]=et+(J[nt]-et)*$}else switch(d){case i.setup:var st=b;if(null==st.bones){I=st.vertices;for(var rt=0;rt<P;rt++){et=K[rt],V=I[rt];B[rt]=V+(et+(J[rt]-et)*$-V)*h}}else for(var ot=0;ot<P;ot++){et=K[ot];B[ot]=(et+(J[ot]-et)*$)*h}break;case i.first:case i.replace:for(var at=0;at<P;at++){et=K[at];B[at]+=(et+(J[at]-et)*$-B[at])*h}break;case i.add:if(null==(L=b).bones){I=L.vertices;for(var ht=0;ht<P;ht++){et=K[ht];B[ht]+=(et+(J[ht]-et)*$-I[ht])*h}}else for(var lt=0;lt<P;lt++){et=K[lt];B[lt]+=(et+(J[lt]-et)*$)*h}}}}}}},DeformTimeline2}(p);t.DeformTimeline=I;var F=function(){function EventTimeline2(i){this.frames=t.Utils.newFloatArray(i),this.events=new Array(i)}return EventTimeline2.prototype.getPropertyId=function(){return a.event<<24},EventTimeline2.prototype.getFrameCount=function(){return this.frames.length},EventTimeline2.prototype.setFrame=function(t,i){this.frames[t]=i.time,this.events[t]=i},EventTimeline2.prototype.apply=function(t,i,n,r,o,a,h){if(null!=r){var d=this.frames,p=this.frames.length;if(i>n)this.apply(t,i,Number.MAX_VALUE,r,o,a,h),i=-1;else if(i>=d[p-1])return;if(!(n<d[0])){var T=0;if(i<d[0])T=0;else for(var b=d[T=f.binarySearch(d,i)];T>0&&d[T-1]==b;)T--;for(;T<p&&n>=d[T];T++)r.push(this.events[T])}}},EventTimeline2}();t.EventTimeline=F;var B=function(){function DrawOrderTimeline2(i){this.frames=t.Utils.newFloatArray(i),this.drawOrders=new Array(i)}return DrawOrderTimeline2.prototype.getPropertyId=function(){return a.drawOrder<<24},DrawOrderTimeline2.prototype.getFrameCount=function(){return this.frames.length},DrawOrderTimeline2.prototype.setFrame=function(t,i,n){this.frames[t]=i,this.drawOrders[t]=n},DrawOrderTimeline2.prototype.apply=function(n,o,a,h,d,p,T){var b=n.drawOrder,S=n.slots;if(T!=r.mixOut){var A=this.frames;if(a<A[0])p!=i.setup&&p!=i.first||t.Utils.arrayCopy(n.slots,0,n.drawOrder,0,n.slots.length);else{var P=0;P=a>=A[A.length-1]?A.length-1:f.binarySearch(A,a)-1;var O=this.drawOrders[P];if(null==O)t.Utils.arrayCopy(S,0,b,0,S.length);else for(var L=0,D=O.length;L<D;L++)b[L]=S[O[L]]}}else p==i.setup&&t.Utils.arrayCopy(n.slots,0,n.drawOrder,0,n.slots.length)},DrawOrderTimeline2}();t.DrawOrderTimeline=B;var N=function(n){function IkConstraintTimeline2(i){var r=n.call(this,i)||this;return r.frames=t.Utils.newFloatArray(i*IkConstraintTimeline2.ENTRIES),r}return h(IkConstraintTimeline2,n),IkConstraintTimeline2.prototype.getPropertyId=function(){return(a.ikConstraint<<24)+this.ikConstraintIndex},IkConstraintTimeline2.prototype.setFrame=function(t,i,n,r,o,a,h){t*=IkConstraintTimeline2.ENTRIES,this.frames[t]=i,this.frames[t+IkConstraintTimeline2.MIX]=n,this.frames[t+IkConstraintTimeline2.SOFTNESS]=r,this.frames[t+IkConstraintTimeline2.BEND_DIRECTION]=o,this.frames[t+IkConstraintTimeline2.COMPRESS]=a?1:0,this.frames[t+IkConstraintTimeline2.STRETCH]=h?1:0},IkConstraintTimeline2.prototype.apply=function(t,n,o,a,h,d,p){var T=this.frames,b=t.ikConstraints[this.ikConstraintIndex];if(b.active)if(o<T[0])switch(d){case i.setup:return b.mix=b.data.mix,b.softness=b.data.softness,b.bendDirection=b.data.bendDirection,b.compress=b.data.compress,void(b.stretch=b.data.stretch);case i.first:b.mix+=(b.data.mix-b.mix)*h,b.softness+=(b.data.softness-b.softness)*h,b.bendDirection=b.data.bendDirection,b.compress=b.data.compress,b.stretch=b.data.stretch}else if(o>=T[T.length-IkConstraintTimeline2.ENTRIES])d==i.setup?(b.mix=b.data.mix+(T[T.length+IkConstraintTimeline2.PREV_MIX]-b.data.mix)*h,b.softness=b.data.softness+(T[T.length+IkConstraintTimeline2.PREV_SOFTNESS]-b.data.softness)*h,p==r.mixOut?(b.bendDirection=b.data.bendDirection,b.compress=b.data.compress,b.stretch=b.data.stretch):(b.bendDirection=T[T.length+IkConstraintTimeline2.PREV_BEND_DIRECTION],b.compress=0!=T[T.length+IkConstraintTimeline2.PREV_COMPRESS],b.stretch=0!=T[T.length+IkConstraintTimeline2.PREV_STRETCH])):(b.mix+=(T[T.length+IkConstraintTimeline2.PREV_MIX]-b.mix)*h,b.softness+=(T[T.length+IkConstraintTimeline2.PREV_SOFTNESS]-b.softness)*h,p==r.mixIn&&(b.bendDirection=T[T.length+IkConstraintTimeline2.PREV_BEND_DIRECTION],b.compress=0!=T[T.length+IkConstraintTimeline2.PREV_COMPRESS],b.stretch=0!=T[T.length+IkConstraintTimeline2.PREV_STRETCH]));else{var S=f.binarySearch(T,o,IkConstraintTimeline2.ENTRIES),A=T[S+IkConstraintTimeline2.PREV_MIX],P=T[S+IkConstraintTimeline2.PREV_SOFTNESS],O=T[S],L=this.getCurvePercent(S/IkConstraintTimeline2.ENTRIES-1,1-(o-O)/(T[S+IkConstraintTimeline2.PREV_TIME]-O));d==i.setup?(b.mix=b.data.mix+(A+(T[S+IkConstraintTimeline2.MIX]-A)*L-b.data.mix)*h,b.softness=b.data.softness+(P+(T[S+IkConstraintTimeline2.SOFTNESS]-P)*L-b.data.softness)*h,p==r.mixOut?(b.bendDirection=b.data.bendDirection,b.compress=b.data.compress,b.stretch=b.data.stretch):(b.bendDirection=T[S+IkConstraintTimeline2.PREV_BEND_DIRECTION],b.compress=0!=T[S+IkConstraintTimeline2.PREV_COMPRESS],b.stretch=0!=T[S+IkConstraintTimeline2.PREV_STRETCH])):(b.mix+=(A+(T[S+IkConstraintTimeline2.MIX]-A)*L-b.mix)*h,b.softness+=(P+(T[S+IkConstraintTimeline2.SOFTNESS]-P)*L-b.softness)*h,p==r.mixIn&&(b.bendDirection=T[S+IkConstraintTimeline2.PREV_BEND_DIRECTION],b.compress=0!=T[S+IkConstraintTimeline2.PREV_COMPRESS],b.stretch=0!=T[S+IkConstraintTimeline2.PREV_STRETCH]))}},IkConstraintTimeline2.ENTRIES=6,IkConstraintTimeline2.PREV_TIME=-6,IkConstraintTimeline2.PREV_MIX=-5,IkConstraintTimeline2.PREV_SOFTNESS=-4,IkConstraintTimeline2.PREV_BEND_DIRECTION=-3,IkConstraintTimeline2.PREV_COMPRESS=-2,IkConstraintTimeline2.PREV_STRETCH=-1,IkConstraintTimeline2.MIX=1,IkConstraintTimeline2.SOFTNESS=2,IkConstraintTimeline2.BEND_DIRECTION=3,IkConstraintTimeline2.COMPRESS=4,IkConstraintTimeline2.STRETCH=5,IkConstraintTimeline2}(p);t.IkConstraintTimeline=N;var Y=function(n){function TransformConstraintTimeline2(i){var r=n.call(this,i)||this;return r.frames=t.Utils.newFloatArray(i*TransformConstraintTimeline2.ENTRIES),r}return h(TransformConstraintTimeline2,n),TransformConstraintTimeline2.prototype.getPropertyId=function(){return(a.transformConstraint<<24)+this.transformConstraintIndex},TransformConstraintTimeline2.prototype.setFrame=function(t,i,n,r,o,a){t*=TransformConstraintTimeline2.ENTRIES,this.frames[t]=i,this.frames[t+TransformConstraintTimeline2.ROTATE]=n,this.frames[t+TransformConstraintTimeline2.TRANSLATE]=r,this.frames[t+TransformConstraintTimeline2.SCALE]=o,this.frames[t+TransformConstraintTimeline2.SHEAR]=a},TransformConstraintTimeline2.prototype.apply=function(t,n,r,o,a,h,d){var p=this.frames,T=t.transformConstraints[this.transformConstraintIndex];if(T.active)if(r<p[0]){var b=T.data;switch(h){case i.setup:return T.rotateMix=b.rotateMix,T.translateMix=b.translateMix,T.scaleMix=b.scaleMix,void(T.shearMix=b.shearMix);case i.first:T.rotateMix+=(b.rotateMix-T.rotateMix)*a,T.translateMix+=(b.translateMix-T.translateMix)*a,T.scaleMix+=(b.scaleMix-T.scaleMix)*a,T.shearMix+=(b.shearMix-T.shearMix)*a}}else{var S=0,A=0,P=0,O=0;if(r>=p[p.length-TransformConstraintTimeline2.ENTRIES]){var L=p.length;S=p[L+TransformConstraintTimeline2.PREV_ROTATE],A=p[L+TransformConstraintTimeline2.PREV_TRANSLATE],P=p[L+TransformConstraintTimeline2.PREV_SCALE],O=p[L+TransformConstraintTimeline2.PREV_SHEAR]}else{var D=f.binarySearch(p,r,TransformConstraintTimeline2.ENTRIES);S=p[D+TransformConstraintTimeline2.PREV_ROTATE],A=p[D+TransformConstraintTimeline2.PREV_TRANSLATE],P=p[D+TransformConstraintTimeline2.PREV_SCALE],O=p[D+TransformConstraintTimeline2.PREV_SHEAR];var I=p[D],F=this.getCurvePercent(D/TransformConstraintTimeline2.ENTRIES-1,1-(r-I)/(p[D+TransformConstraintTimeline2.PREV_TIME]-I));S+=(p[D+TransformConstraintTimeline2.ROTATE]-S)*F,A+=(p[D+TransformConstraintTimeline2.TRANSLATE]-A)*F,P+=(p[D+TransformConstraintTimeline2.SCALE]-P)*F,O+=(p[D+TransformConstraintTimeline2.SHEAR]-O)*F}if(h==i.setup){b=T.data;T.rotateMix=b.rotateMix+(S-b.rotateMix)*a,T.translateMix=b.translateMix+(A-b.translateMix)*a,T.scaleMix=b.scaleMix+(P-b.scaleMix)*a,T.shearMix=b.shearMix+(O-b.shearMix)*a}else T.rotateMix+=(S-T.rotateMix)*a,T.translateMix+=(A-T.translateMix)*a,T.scaleMix+=(P-T.scaleMix)*a,T.shearMix+=(O-T.shearMix)*a}},TransformConstraintTimeline2.ENTRIES=5,TransformConstraintTimeline2.PREV_TIME=-5,TransformConstraintTimeline2.PREV_ROTATE=-4,TransformConstraintTimeline2.PREV_TRANSLATE=-3,TransformConstraintTimeline2.PREV_SCALE=-2,TransformConstraintTimeline2.PREV_SHEAR=-1,TransformConstraintTimeline2.ROTATE=1,TransformConstraintTimeline2.TRANSLATE=2,TransformConstraintTimeline2.SCALE=3,TransformConstraintTimeline2.SHEAR=4,TransformConstraintTimeline2}(p);t.TransformConstraintTimeline=Y;var X=function(n){function PathConstraintPositionTimeline2(i){var r=n.call(this,i)||this;return r.frames=t.Utils.newFloatArray(i*PathConstraintPositionTimeline2.ENTRIES),r}return h(PathConstraintPositionTimeline2,n),PathConstraintPositionTimeline2.prototype.getPropertyId=function(){return(a.pathConstraintPosition<<24)+this.pathConstraintIndex},PathConstraintPositionTimeline2.prototype.setFrame=function(t,i,n){t*=PathConstraintPositionTimeline2.ENTRIES,this.frames[t]=i,this.frames[t+PathConstraintPositionTimeline2.VALUE]=n},PathConstraintPositionTimeline2.prototype.apply=function(t,n,r,o,a,h,d){var p=this.frames,T=t.pathConstraints[this.pathConstraintIndex];if(T.active)if(r<p[0])switch(h){case i.setup:return void(T.position=T.data.position);case i.first:T.position+=(T.data.position-T.position)*a}else{var b=0;if(r>=p[p.length-PathConstraintPositionTimeline2.ENTRIES])b=p[p.length+PathConstraintPositionTimeline2.PREV_VALUE];else{var S=f.binarySearch(p,r,PathConstraintPositionTimeline2.ENTRIES);b=p[S+PathConstraintPositionTimeline2.PREV_VALUE];var A=p[S],P=this.getCurvePercent(S/PathConstraintPositionTimeline2.ENTRIES-1,1-(r-A)/(p[S+PathConstraintPositionTimeline2.PREV_TIME]-A));b+=(p[S+PathConstraintPositionTimeline2.VALUE]-b)*P}h==i.setup?T.position=T.data.position+(b-T.data.position)*a:T.position+=(b-T.position)*a}},PathConstraintPositionTimeline2.ENTRIES=2,PathConstraintPositionTimeline2.PREV_TIME=-2,PathConstraintPositionTimeline2.PREV_VALUE=-1,PathConstraintPositionTimeline2.VALUE=1,PathConstraintPositionTimeline2}(p);t.PathConstraintPositionTimeline=X;var G=function(t){function PathConstraintSpacingTimeline2(i){return t.call(this,i)||this}return h(PathConstraintSpacingTimeline2,t),PathConstraintSpacingTimeline2.prototype.getPropertyId=function(){return(a.pathConstraintSpacing<<24)+this.pathConstraintIndex},PathConstraintSpacingTimeline2.prototype.apply=function(t,n,r,o,a,h,d){var p=this.frames,T=t.pathConstraints[this.pathConstraintIndex];if(T.active)if(r<p[0])switch(h){case i.setup:return void(T.spacing=T.data.spacing);case i.first:T.spacing+=(T.data.spacing-T.spacing)*a}else{var b=0;if(r>=p[p.length-PathConstraintSpacingTimeline2.ENTRIES])b=p[p.length+PathConstraintSpacingTimeline2.PREV_VALUE];else{var S=f.binarySearch(p,r,PathConstraintSpacingTimeline2.ENTRIES);b=p[S+PathConstraintSpacingTimeline2.PREV_VALUE];var A=p[S],P=this.getCurvePercent(S/PathConstraintSpacingTimeline2.ENTRIES-1,1-(r-A)/(p[S+PathConstraintSpacingTimeline2.PREV_TIME]-A));b+=(p[S+PathConstraintSpacingTimeline2.VALUE]-b)*P}h==i.setup?T.spacing=T.data.spacing+(b-T.data.spacing)*a:T.spacing+=(b-T.spacing)*a}},PathConstraintSpacingTimeline2}(X);t.PathConstraintSpacingTimeline=G;var U=function(n){function PathConstraintMixTimeline2(i){var r=n.call(this,i)||this;return r.frames=t.Utils.newFloatArray(i*PathConstraintMixTimeline2.ENTRIES),r}return h(PathConstraintMixTimeline2,n),PathConstraintMixTimeline2.prototype.getPropertyId=function(){return(a.pathConstraintMix<<24)+this.pathConstraintIndex},PathConstraintMixTimeline2.prototype.setFrame=function(t,i,n,r){t*=PathConstraintMixTimeline2.ENTRIES,this.frames[t]=i,this.frames[t+PathConstraintMixTimeline2.ROTATE]=n,this.frames[t+PathConstraintMixTimeline2.TRANSLATE]=r},PathConstraintMixTimeline2.prototype.apply=function(t,n,r,o,a,h,d){var p=this.frames,T=t.pathConstraints[this.pathConstraintIndex];if(T.active)if(r<p[0])switch(h){case i.setup:return T.rotateMix=T.data.rotateMix,void(T.translateMix=T.data.translateMix);case i.first:T.rotateMix+=(T.data.rotateMix-T.rotateMix)*a,T.translateMix+=(T.data.translateMix-T.translateMix)*a}else{var b=0,S=0;if(r>=p[p.length-PathConstraintMixTimeline2.ENTRIES])b=p[p.length+PathConstraintMixTimeline2.PREV_ROTATE],S=p[p.length+PathConstraintMixTimeline2.PREV_TRANSLATE];else{var A=f.binarySearch(p,r,PathConstraintMixTimeline2.ENTRIES);b=p[A+PathConstraintMixTimeline2.PREV_ROTATE],S=p[A+PathConstraintMixTimeline2.PREV_TRANSLATE];var P=p[A],O=this.getCurvePercent(A/PathConstraintMixTimeline2.ENTRIES-1,1-(r-P)/(p[A+PathConstraintMixTimeline2.PREV_TIME]-P));b+=(p[A+PathConstraintMixTimeline2.ROTATE]-b)*O,S+=(p[A+PathConstraintMixTimeline2.TRANSLATE]-S)*O}h==i.setup?(T.rotateMix=T.data.rotateMix+(b-T.data.rotateMix)*a,T.translateMix=T.data.translateMix+(S-T.data.translateMix)*a):(T.rotateMix+=(b-T.rotateMix)*a,T.translateMix+=(S-T.translateMix)*a)}},PathConstraintMixTimeline2.ENTRIES=3,PathConstraintMixTimeline2.PREV_TIME=-3,PathConstraintMixTimeline2.PREV_ROTATE=-2,PathConstraintMixTimeline2.PREV_TRANSLATE=-1,PathConstraintMixTimeline2.ROTATE=1,PathConstraintMixTimeline2.TRANSLATE=2,PathConstraintMixTimeline2}(p);t.PathConstraintMixTimeline=U}(a||(a={})),function(t){var i=function(){function AnimationState2(i){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new a(this),this.propertyIDs=new t.IntSet,this.animationsChanged=!1,this.trackEntryPool=new t.Pool((function(){return new n})),this.data=i}return AnimationState2.prototype.update=function(t){t*=this.timeScale;for(var i=this.tracks,n=0,r=i.length;n<r;n++){var o=i[n];if(null!=o){o.animationLast=o.nextAnimationLast,o.trackLast=o.nextTrackLast;var a=t*o.timeScale;if(o.delay>0){if(o.delay-=a,o.delay>0)continue;a=-o.delay,o.delay=0}var h=o.next;if(null!=h){var d=o.trackLast-h.delay;if(d>=0){for(h.delay=0,h.trackTime+=0==o.timeScale?0:(d/o.timeScale+t)*h.timeScale,o.trackTime+=a,this.setCurrent(n,h,!0);null!=h.mixingFrom;)h.mixTime+=t,h=h.mixingFrom;continue}}else if(o.trackLast>=o.trackEnd&&null==o.mixingFrom){i[n]=null,this.queue.end(o),this.disposeNext(o);continue}if(null!=o.mixingFrom&&this.updateMixingFrom(o,t)){var f=o.mixingFrom;for(o.mixingFrom=null,null!=f&&(f.mixingTo=null);null!=f;)this.queue.end(f),f=f.mixingFrom}o.trackTime+=a}}this.queue.drain()},AnimationState2.prototype.updateMixingFrom=function(t,i){var n=t.mixingFrom;if(null==n)return!0;var r=this.updateMixingFrom(n,i);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=n.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=n.mixingFrom,null!=n.mixingFrom&&(n.mixingFrom.mixingTo=t),t.interruptAlpha=n.interruptAlpha,this.queue.end(n)),r):(n.trackTime+=i*n.timeScale,t.mixTime+=i,!1)},AnimationState2.prototype.apply=function(i){if(null==i)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var n=this.events,r=this.tracks,o=!1,a=0,h=r.length;a<h;a++){var d=r[a];if(!(null==d||d.delay>0)){o=!0;var f=0==a?t.MixBlend.first:d.mixBlend,p=d.alpha;null!=d.mixingFrom?p*=this.applyMixingFrom(d,i,f):d.trackTime>=d.trackEnd&&null==d.next&&(p=0);var T=d.animationLast,b=d.getAnimationTime(),S=d.animation.timelines.length,A=d.animation.timelines;if(0==a&&1==p||f==t.MixBlend.add)for(var P=0;P<S;P++){t.Utils.webkit602BugfixHelper(p,f);var O=A[P];O instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(O,i,b,f,!0):O.apply(i,T,b,n,p,f,t.MixDirection.mixIn)}else{var L=d.timelineMode,D=0==d.timelinesRotation.length;D&&t.Utils.setArraySize(d.timelinesRotation,S<<1,null);var I=d.timelinesRotation;for(P=0;P<S;P++){var F=A[P],B=L[P]==AnimationState2.SUBSEQUENT?f:t.MixBlend.setup;F instanceof t.RotateTimeline?this.applyRotateTimeline(F,i,b,p,B,I,P<<1,D):F instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(F,i,b,f,!0):(t.Utils.webkit602BugfixHelper(p,f),F.apply(i,T,b,n,p,B,t.MixDirection.mixIn))}}this.queueEvents(d,b),n.length=0,d.nextAnimationLast=b,d.nextTrackLast=d.trackTime}}for(var N=this.unkeyedState+AnimationState2.SETUP,Y=i.slots,X=0,G=i.slots.length;X<G;X++){var U=Y[X];if(U.attachmentState==N){var V=U.data.attachmentName;U.attachment=null==V?null:i.getAttachment(U.data.index,V)}}return this.unkeyedState+=2,this.queue.drain(),o},AnimationState2.prototype.applyMixingFrom=function(i,n,r){var o=i.mixingFrom;null!=o.mixingFrom&&this.applyMixingFrom(o,n,r);var a=0;0==i.mixDuration?(a=1,r==t.MixBlend.first&&(r=t.MixBlend.setup)):((a=i.mixTime/i.mixDuration)>1&&(a=1),r!=t.MixBlend.first&&(r=o.mixBlend));var h=a<o.eventThreshold?this.events:null,d=a<o.attachmentThreshold,f=a<o.drawOrderThreshold,p=o.animationLast,T=o.getAnimationTime(),b=o.animation.timelines.length,S=o.animation.timelines,A=o.alpha*i.interruptAlpha,P=A*(1-a);if(r==t.MixBlend.add)for(var O=0;O<b;O++)S[O].apply(n,p,T,h,P,r,t.MixDirection.mixOut);else{var L=o.timelineMode,D=o.timelineHoldMix,I=0==o.timelinesRotation.length;I&&t.Utils.setArraySize(o.timelinesRotation,b<<1,null);var F=o.timelinesRotation;o.totalAlpha=0;for(O=0;O<b;O++){var B=S[O],N=t.MixDirection.mixOut,Y=void 0,X=0;switch(L[O]){case AnimationState2.SUBSEQUENT:if(!f&&B instanceof t.DrawOrderTimeline)continue;Y=r,X=P;break;case AnimationState2.FIRST:Y=t.MixBlend.setup,X=P;break;case AnimationState2.HOLD_SUBSEQUENT:Y=r,X=A;break;case AnimationState2.HOLD_FIRST:Y=t.MixBlend.setup,X=A;break;default:Y=t.MixBlend.setup;var G=D[O];X=A*Math.max(0,1-G.mixTime/G.mixDuration)}o.totalAlpha+=X,B instanceof t.RotateTimeline?this.applyRotateTimeline(B,n,T,X,Y,F,O<<1,I):B instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(B,n,T,Y,d):(t.Utils.webkit602BugfixHelper(X,r),f&&B instanceof t.DrawOrderTimeline&&Y==t.MixBlend.setup&&(N=t.MixDirection.mixIn),B.apply(n,p,T,h,X,Y,N))}}return i.mixDuration>0&&this.queueEvents(o,T),this.events.length=0,o.nextAnimationLast=T,o.nextTrackLast=o.trackTime,a},AnimationState2.prototype.applyAttachmentTimeline=function(i,n,r,o,a){var h=n.slots[i.slotIndex];if(h.bone.active){var d,f=i.frames;if(r<f[0])o!=t.MixBlend.setup&&o!=t.MixBlend.first||this.setAttachment(n,h,h.data.attachmentName,a);else d=r>=f[f.length-1]?f.length-1:t.Animation.binarySearch(f,r)-1,this.setAttachment(n,h,i.attachmentNames[d],a);h.attachmentState<=this.unkeyedState&&(h.attachmentState=this.unkeyedState+AnimationState2.SETUP)}},AnimationState2.prototype.setAttachment=function(t,i,n,r){i.attachment=null==n?null:t.getAttachment(i.data.index,n),r&&(i.attachmentState=this.unkeyedState+AnimationState2.CURRENT)},AnimationState2.prototype.applyRotateTimeline=function(i,n,r,o,a,h,d,f){if(f&&(h[d]=0),1!=o){var p=i,T=p.frames,b=n.bones[p.boneIndex];if(b.active){var S=0,A=0;if(r<T[0])switch(a){case t.MixBlend.setup:b.rotation=b.data.rotation;default:return;case t.MixBlend.first:S=b.rotation,A=b.data.rotation}else if(S=a==t.MixBlend.setup?b.data.rotation:b.rotation,r>=T[T.length-t.RotateTimeline.ENTRIES])A=b.data.rotation+T[T.length+t.RotateTimeline.PREV_ROTATION];else{var P=t.Animation.binarySearch(T,r,t.RotateTimeline.ENTRIES),O=T[P+t.RotateTimeline.PREV_ROTATION],L=T[P],D=p.getCurvePercent((P>>1)-1,1-(r-L)/(T[P+t.RotateTimeline.PREV_TIME]-L));A=T[P+t.RotateTimeline.ROTATION]-O,A=O+(A-=360*(16384-(16384.499999999996-A/360|0)))*D+b.data.rotation,A-=360*(16384-(16384.499999999996-A/360|0))}var I=0,F=A-S;if(0==(F-=360*(16384-(16384.499999999996-F/360|0))))I=h[d];else{var B=0,N=0;f?(B=0,N=F):(B=h[d],N=h[d+1]);var Y=F>0,X=B>=0;t.MathUtils.signum(N)!=t.MathUtils.signum(F)&&Math.abs(N)<=90&&(Math.abs(B)>180&&(B+=360*t.MathUtils.signum(B)),X=Y),I=F+B-B%360,X!=Y&&(I+=360*t.MathUtils.signum(B)),h[d]=I}h[d+1]=F,S+=I*o,b.rotation=S-360*(16384-(16384.499999999996-S/360|0))}}else i.apply(n,0,r,null,1,a,t.MixDirection.mixIn)},AnimationState2.prototype.queueEvents=function(t,i){for(var n=t.animationStart,r=t.animationEnd,o=r-n,a=t.trackLast%o,h=this.events,d=0,f=h.length;d<f;d++){var p=h[d];if(p.time<a)break;p.time>r||this.queue.event(t,p)}for((t.loop?0==o||a>t.trackTime%o:i>=r&&t.animationLast<r)&&this.queue.complete(t);d<f;d++){h[d].time<n||this.queue.event(t,h[d])}},AnimationState2.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var i=0,n=this.tracks.length;i<n;i++)this.clearTrack(i);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},AnimationState2.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var i=this.tracks[t];if(null!=i){this.queue.end(i),this.disposeNext(i);for(var n=i;;){var r=n.mixingFrom;if(null==r)break;this.queue.end(r),n.mixingFrom=null,n.mixingTo=null,n=r}this.tracks[i.trackIndex]=null,this.queue.drain()}}},AnimationState2.prototype.setCurrent=function(t,i,n){var r=this.expandToIndex(t);this.tracks[t]=i,null!=r&&(n&&this.queue.interrupt(r),i.mixingFrom=r,r.mixingTo=i,i.mixTime=0,null!=r.mixingFrom&&r.mixDuration>0&&(i.interruptAlpha*=Math.min(1,r.mixTime/r.mixDuration)),r.timelinesRotation.length=0),this.queue.start(i)},AnimationState2.prototype.setAnimation=function(t,i,n){var r=this.data.skeletonData.findAnimation(i);if(null==r)throw new Error("Animation not found: "+i);return this.setAnimationWith(t,r,n)},AnimationState2.prototype.setAnimationWith=function(t,i,n){if(null==i)throw new Error("animation cannot be null.");var r=!0,o=this.expandToIndex(t);null!=o&&(-1==o.nextTrackLast?(this.tracks[t]=o.mixingFrom,this.queue.interrupt(o),this.queue.end(o),this.disposeNext(o),o=o.mixingFrom,r=!1):this.disposeNext(o));var a=this.trackEntry(t,i,n,o);return this.setCurrent(t,a,r),this.queue.drain(),a},AnimationState2.prototype.addAnimation=function(t,i,n,r){var o=this.data.skeletonData.findAnimation(i);if(null==o)throw new Error("Animation not found: "+i);return this.addAnimationWith(t,o,n,r)},AnimationState2.prototype.addAnimationWith=function(t,i,n,r){if(null==i)throw new Error("animation cannot be null.");var o=this.expandToIndex(t);if(null!=o)for(;null!=o.next;)o=o.next;var a=this.trackEntry(t,i,n,o);if(null==o)this.setCurrent(t,a,!0),this.queue.drain();else if(o.next=a,r<=0){var h=o.animationEnd-o.animationStart;0!=h?(o.loop?r+=h*(1+(o.trackTime/h|0)):r+=Math.max(h,o.trackTime),r-=this.data.getMix(o.animation,i)):r=o.trackTime}return a.delay=r,a},AnimationState2.prototype.setEmptyAnimation=function(t,i){var n=this.setAnimationWith(t,AnimationState2.emptyAnimation,!1);return n.mixDuration=i,n.trackEnd=i,n},AnimationState2.prototype.addEmptyAnimation=function(t,i,n){n<=0&&(n-=i);var r=this.addAnimationWith(t,AnimationState2.emptyAnimation,!1,n);return r.mixDuration=i,r.trackEnd=i,r},AnimationState2.prototype.setEmptyAnimations=function(t){var i=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var n=0,r=this.tracks.length;n<r;n++){var o=this.tracks[n];null!=o&&this.setEmptyAnimation(o.trackIndex,t)}this.queue.drainDisabled=i,this.queue.drain()},AnimationState2.prototype.expandToIndex=function(i){return i<this.tracks.length?this.tracks[i]:(t.Utils.ensureArrayCapacity(this.tracks,i+1,null),this.tracks.length=i+1,null)},AnimationState2.prototype.trackEntry=function(i,n,r,o){var a=this.trackEntryPool.obtain();return a.trackIndex=i,a.animation=n,a.loop=r,a.holdPrevious=!1,a.eventThreshold=0,a.attachmentThreshold=0,a.drawOrderThreshold=0,a.animationStart=0,a.animationEnd=n.duration,a.animationLast=-1,a.nextAnimationLast=-1,a.delay=0,a.trackTime=0,a.trackLast=-1,a.nextTrackLast=-1,a.trackEnd=Number.MAX_VALUE,a.timeScale=1,a.alpha=1,a.interruptAlpha=1,a.mixTime=0,a.mixDuration=null==o?0:this.data.getMix(o.animation,n),a.mixBlend=t.MixBlend.replace,a},AnimationState2.prototype.disposeNext=function(t){for(var i=t.next;null!=i;)this.queue.dispose(i),i=i.next;t.next=null},AnimationState2.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var i=0,n=this.tracks.length;i<n;i++){var r=this.tracks[i];if(null!=r){for(;null!=r.mixingFrom;)r=r.mixingFrom;do{null!=r.mixingFrom&&r.mixBlend==t.MixBlend.add||this.computeHold(r),r=r.mixingTo}while(null!=r)}}},AnimationState2.prototype.computeHold=function(i){var n=i.mixingTo,r=i.animation.timelines,o=i.animation.timelines.length,a=t.Utils.setArraySize(i.timelineMode,o);i.timelineHoldMix.length=0;var h=t.Utils.setArraySize(i.timelineHoldMix,o),d=this.propertyIDs;if(null!=n&&n.holdPrevious)for(var f=0;f<o;f++)a[f]=d.add(r[f].getPropertyId())?AnimationState2.HOLD_FIRST:AnimationState2.HOLD_SUBSEQUENT;else t:for(f=0;f<o;f++){var p=r[f],T=p.getPropertyId();if(d.add(T))if(null==n||p instanceof t.AttachmentTimeline||p instanceof t.DrawOrderTimeline||p instanceof t.EventTimeline||!n.animation.hasTimeline(T))a[f]=AnimationState2.FIRST;else{for(var b=n.mixingTo;null!=b;b=b.mixingTo)if(!b.animation.hasTimeline(T)){if(i.mixDuration>0){a[f]=AnimationState2.HOLD_MIX,h[f]=b;continue t}break}a[f]=AnimationState2.HOLD_FIRST}else a[f]=AnimationState2.SUBSEQUENT}},AnimationState2.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},AnimationState2.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},AnimationState2.prototype.removeListener=function(t){var i=this.listeners.indexOf(t);i>=0&&this.listeners.splice(i,1)},AnimationState2.prototype.clearListeners=function(){this.listeners.length=0},AnimationState2.prototype.clearListenerNotifications=function(){this.queue.clear()},AnimationState2.emptyAnimation=new t.Animation("<empty>",[],0),AnimationState2.SUBSEQUENT=0,AnimationState2.FIRST=1,AnimationState2.HOLD_SUBSEQUENT=2,AnimationState2.HOLD_FIRST=3,AnimationState2.HOLD_MIX=4,AnimationState2.SETUP=1,AnimationState2.CURRENT=2,AnimationState2}();t.AnimationState=i;var n=function(){function TrackEntry2(){this.mixBlend=t.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return TrackEntry2.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},TrackEntry2.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},TrackEntry2.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},TrackEntry2.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},TrackEntry2.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},TrackEntry2}();t.TrackEntry=n;var r,o,a=function(){function EventQueue2(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return EventQueue2.prototype.start=function(t){this.objects.push(r.start),this.objects.push(t),this.animState.animationsChanged=!0},EventQueue2.prototype.interrupt=function(t){this.objects.push(r.interrupt),this.objects.push(t)},EventQueue2.prototype.end=function(t){this.objects.push(r.end),this.objects.push(t),this.animState.animationsChanged=!0},EventQueue2.prototype.dispose=function(t){this.objects.push(r.dispose),this.objects.push(t)},EventQueue2.prototype.complete=function(t){this.objects.push(r.complete),this.objects.push(t)},EventQueue2.prototype.event=function(t,i){this.objects.push(r.event),this.objects.push(t),this.objects.push(i)},EventQueue2.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,i=this.animState.listeners,n=0;n<t.length;n+=2){var o=t[n],a=t[n+1];switch(o){case r.start:null!=a.listener&&a.listener.start&&a.listener.start(a);for(var h=0;h<i.length;h++)i[h].start&&i[h].start(a);break;case r.interrupt:null!=a.listener&&a.listener.interrupt&&a.listener.interrupt(a);for(h=0;h<i.length;h++)i[h].interrupt&&i[h].interrupt(a);break;case r.end:null!=a.listener&&a.listener.end&&a.listener.end(a);for(h=0;h<i.length;h++)i[h].end&&i[h].end(a);case r.dispose:null!=a.listener&&a.listener.dispose&&a.listener.dispose(a);for(h=0;h<i.length;h++)i[h].dispose&&i[h].dispose(a);this.animState.trackEntryPool.free(a);break;case r.complete:null!=a.listener&&a.listener.complete&&a.listener.complete(a);for(h=0;h<i.length;h++)i[h].complete&&i[h].complete(a);break;case r.event:var d=t[2+n++];null!=a.listener&&a.listener.event&&a.listener.event(a,d);for(h=0;h<i.length;h++)i[h].event&&i[h].event(a,d)}}this.clear(),this.drainDisabled=!1}},EventQueue2.prototype.clear=function(){this.objects.length=0},EventQueue2}();t.EventQueue=a,(o=r=t.EventType||(t.EventType={}))[o.start=0]="start",o[o.interrupt=1]="interrupt",o[o.end=2]="end",o[o.dispose=3]="dispose",o[o.complete=4]="complete",o[o.event=5]="event";var h=function(){function AnimationStateAdapter2(){}return AnimationStateAdapter2.prototype.start=function(t){},AnimationStateAdapter2.prototype.interrupt=function(t){},AnimationStateAdapter2.prototype.end=function(t){},AnimationStateAdapter2.prototype.dispose=function(t){},AnimationStateAdapter2.prototype.complete=function(t){},AnimationStateAdapter2.prototype.event=function(t,i){},AnimationStateAdapter2}();t.AnimationStateAdapter=h}(a||(a={})),n=a||(a={}),r=function(){function AnimationStateData2(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return AnimationStateData2.prototype.setMix=function(t,i,n){var r=this.skeletonData.findAnimation(t);if(null==r)throw new Error("Animation not found: "+t);var o=this.skeletonData.findAnimation(i);if(null==o)throw new Error("Animation not found: "+i);this.setMixWith(r,o,n)},AnimationStateData2.prototype.setMixWith=function(t,i,n){if(null==t)throw new Error("from cannot be null.");if(null==i)throw new Error("to cannot be null.");var r=t.name+"."+i.name;this.animationToMixTime[r]=n},AnimationStateData2.prototype.getMix=function(t,i){var n=t.name+"."+i.name,r=this.animationToMixTime[n];return void 0===r?this.defaultMix:r},AnimationStateData2}(),n.AnimationStateData=r,function(t){var i=function(){function AssetManager2(t,i){void 0===i&&(i=""),this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.rawDataUris={},this.textureLoader=t,this.pathPrefix=i}return AssetManager2.prototype.downloadText=function(t,i,n){var r=new XMLHttpRequest;r.overrideMimeType("text/html"),this.rawDataUris[t]&&(t=this.rawDataUris[t]),r.open("GET",t,!0),r.onload=function(){200==r.status?i(r.responseText):n(r.status,r.responseText)},r.onerror=function(){n(r.status,r.responseText)},r.send()},AssetManager2.prototype.downloadBinary=function(t,i,n){var r=new XMLHttpRequest;this.rawDataUris[t]&&(t=this.rawDataUris[t]),r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status?i(new Uint8Array(r.response)):n(r.status,r.responseText)},r.onerror=function(){n(r.status,r.responseText)},r.send()},AssetManager2.prototype.setRawDataURI=function(t,i){this.rawDataUris[this.pathPrefix+t]=i},AssetManager2.prototype.loadBinary=function(t,i,n){var r=this;void 0===i&&(i=null),void 0===n&&(n=null),t=this.pathPrefix+t,this.toLoad++,this.downloadBinary(t,(function(n){r.assets[t]=n,i&&i(t,n),r.toLoad--,r.loaded++}),(function(i,o){r.errors[t]="Couldn't load binary "+t+": status "+status+", "+o,n&&n(t,"Couldn't load binary "+t+": status "+status+", "+o),r.toLoad--,r.loaded++}))},AssetManager2.prototype.loadText=function(t,i,n){var r=this;void 0===i&&(i=null),void 0===n&&(n=null),t=this.pathPrefix+t,this.toLoad++,this.downloadText(t,(function(n){r.assets[t]=n,i&&i(t,n),r.toLoad--,r.loaded++}),(function(i,o){r.errors[t]="Couldn't load text "+t+": status "+status+", "+o,n&&n(t,"Couldn't load text "+t+": status "+status+", "+o),r.toLoad--,r.loaded++}))},AssetManager2.prototype.loadTexture=function(t,i,n){var r=this;void 0===i&&(i=null),void 0===n&&(n=null);var o=t=this.pathPrefix+t;this.toLoad++;var a=new Image;a.crossOrigin="anonymous",a.onload=function(n){var h=r.textureLoader(a);r.assets[o]=h,r.toLoad--,r.loaded++,i&&i(t,a)},a.onerror=function(i){r.errors[t]="Couldn't load image "+t,r.toLoad--,r.loaded++,n&&n(t,"Couldn't load image "+t)},this.rawDataUris[t]&&(t=this.rawDataUris[t]),a.src=t},AssetManager2.prototype.loadTextureAtlas=function(i,n,r){var o=this;void 0===n&&(n=null),void 0===r&&(r=null);var a=i.lastIndexOf("/")>=0?i.substring(0,i.lastIndexOf("/")):"";i=this.pathPrefix+i,this.toLoad++,this.downloadText(i,(function(h){var d={count:0},f=new Array;try{new t.TextureAtlas(h,(function(i){f.push(""==a?i:a+"/"+i);var n=document.createElement("img");return n.width=16,n.height=16,new t.FakeTexture(n)}))}catch(S){var p=S;return o.errors[i]="Couldn't load texture atlas "+i+": "+p.message,r&&r(i,"Couldn't load texture atlas "+i+": "+p.message),o.toLoad--,void o.loaded++}for(var _loop_1=function(p){var T=!1;o.loadTexture(p,(function(p,b){if(d.count++,d.count==f.length)if(T)o.errors[i]="Couldn't load texture atlas page "+p+"} of atlas "+i,r&&r(i,"Couldn't load texture atlas page "+p+" of atlas "+i),o.toLoad--,o.loaded++;else try{var A=new t.TextureAtlas(h,(function(t){return o.get(""==a?t:a+"/"+t)}));o.assets[i]=A,n&&n(i,A),o.toLoad--,o.loaded++}catch(S){var P=S;o.errors[i]="Couldn't load texture atlas "+i+": "+P.message,r&&r(i,"Couldn't load texture atlas "+i+": "+P.message),o.toLoad--,o.loaded++}}),(function(t,n){T=!0,d.count++,d.count==f.length&&(o.errors[i]="Couldn't load texture atlas page "+t+"} of atlas "+i,r&&r(i,"Couldn't load texture atlas page "+t+" of atlas "+i),o.toLoad--,o.loaded++)}))},T=0,b=f;T<b.length;T++){_loop_1(b[T])}}),(function(t,n){o.errors[i]="Couldn't load texture atlas "+i+": status "+status+", "+n,r&&r(i,"Couldn't load texture atlas "+i+": status "+status+", "+n),o.toLoad--,o.loaded++}))},AssetManager2.prototype.get=function(t){return t=this.pathPrefix+t,this.assets[t]},AssetManager2.prototype.remove=function(t){t=this.pathPrefix+t;var i=this.assets[t];i.dispose&&i.dispose(),this.assets[t]=null},AssetManager2.prototype.removeAll=function(){for(var t in this.assets){var i=this.assets[t];i.dispose&&i.dispose()}this.assets={}},AssetManager2.prototype.isLoadingComplete=function(){return 0==this.toLoad},AssetManager2.prototype.getToLoad=function(){return this.toLoad},AssetManager2.prototype.getLoaded=function(){return this.loaded},AssetManager2.prototype.dispose=function(){this.removeAll()},AssetManager2.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},AssetManager2.prototype.getErrors=function(){return this.errors},AssetManager2}();t.AssetManager=i}(a||(a={})),function(t){var i=function(){function AtlasAttachmentLoader2(t){this.atlas=t}return AtlasAttachmentLoader2.prototype.newRegionAttachment=function(i,n,r){var o=this.atlas.findRegion(r);if(null==o)throw new Error("Region not found in atlas: "+r+" (region attachment: "+n+")");o.renderObject=o;var a=new t.RegionAttachment(n);return a.setRegion(o),a},AtlasAttachmentLoader2.prototype.newMeshAttachment=function(i,n,r){var o=this.atlas.findRegion(r);if(null==o)throw new Error("Region not found in atlas: "+r+" (mesh attachment: "+n+")");o.renderObject=o;var a=new t.MeshAttachment(n);return a.region=o,a},AtlasAttachmentLoader2.prototype.newBoundingBoxAttachment=function(i,n){return new t.BoundingBoxAttachment(n)},AtlasAttachmentLoader2.prototype.newPathAttachment=function(i,n){return new t.PathAttachment(n)},AtlasAttachmentLoader2.prototype.newPointAttachment=function(i,n){return new t.PointAttachment(n)},AtlasAttachmentLoader2.prototype.newClippingAttachment=function(i,n){return new t.ClippingAttachment(n)},AtlasAttachmentLoader2}();t.AtlasAttachmentLoader=i}(a||(a={})),function(t){var i;(i=t.BlendMode||(t.BlendMode={}))[i.Normal=0]="Normal",i[i.Additive=1]="Additive",i[i.Multiply=2]="Multiply",i[i.Screen=3]="Screen"}(a||(a={})),function(t){var i=function(){function Bone2(t,i,n){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==i)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=i,this.parent=n,this.setToSetupPose()}return Bone2.prototype.isActive=function(){return this.active},Bone2.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},Bone2.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},Bone2.prototype.updateWorldTransformWith=function(i,n,r,o,a,h,d){this.ax=i,this.ay=n,this.arotation=r,this.ascaleX=o,this.ascaleY=a,this.ashearX=h,this.ashearY=d,this.appliedValid=!0;var f=this.parent;if(null==f){var p=this.skeleton,T=r+90+d,b=p.scaleX,S=p.scaleY;return this.a=t.MathUtils.cosDeg(r+h)*o*b,this.b=t.MathUtils.cosDeg(T)*a*b,this.c=t.MathUtils.sinDeg(r+h)*o*S,this.d=t.MathUtils.sinDeg(T)*a*S,this.worldX=i*b+p.x,void(this.worldY=n*S+p.y)}var A=f.a,P=f.b,O=f.c,L=f.d;switch(this.worldX=A*i+P*n+f.worldX,this.worldY=O*i+L*n+f.worldY,this.data.transformMode){case t.TransformMode.Normal:T=r+90+d;var D=t.MathUtils.cosDeg(r+h)*o,I=t.MathUtils.cosDeg(T)*a,F=t.MathUtils.sinDeg(r+h)*o,B=t.MathUtils.sinDeg(T)*a;return this.a=A*D+P*F,this.b=A*I+P*B,this.c=O*D+L*F,void(this.d=O*I+L*B);case t.TransformMode.OnlyTranslation:T=r+90+d;this.a=t.MathUtils.cosDeg(r+h)*o,this.b=t.MathUtils.cosDeg(T)*a,this.c=t.MathUtils.sinDeg(r+h)*o,this.d=t.MathUtils.sinDeg(T)*a;break;case t.TransformMode.NoRotationOrReflection:var N=0;(G=A*A+O*O)>1e-4?(G=Math.abs(A*L-P*O)/G,A/=this.skeleton.scaleX,P=(O/=this.skeleton.scaleY)*G,L=A*G,N=Math.atan2(O,A)*t.MathUtils.radDeg):(A=0,O=0,N=90-Math.atan2(L,P)*t.MathUtils.radDeg);var Y=r+h-N,X=r+d-N+90;D=t.MathUtils.cosDeg(Y)*o,I=t.MathUtils.cosDeg(X)*a,F=t.MathUtils.sinDeg(Y)*o,B=t.MathUtils.sinDeg(X)*a;this.a=A*D-P*F,this.b=A*I-P*B,this.c=O*D+L*F,this.d=O*I+L*B;break;case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:var G,U=t.MathUtils.cosDeg(r),V=t.MathUtils.sinDeg(r),z=(A*U+P*V)/this.skeleton.scaleX,W=(O*U+L*V)/this.skeleton.scaleY;(G=Math.sqrt(z*z+W*W))>1e-5&&(G=1/G),z*=G,W*=G,G=Math.sqrt(z*z+W*W),this.data.transformMode==t.TransformMode.NoScale&&A*L-P*O<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(G=-G);var H=Math.PI/2+Math.atan2(W,z),q=Math.cos(H)*G,Z=Math.sin(H)*G;D=t.MathUtils.cosDeg(h)*o,I=t.MathUtils.cosDeg(90+d)*a,F=t.MathUtils.sinDeg(h)*o,B=t.MathUtils.sinDeg(90+d)*a;this.a=z*D+q*F,this.b=z*I+q*B,this.c=W*D+Z*F,this.d=W*I+Z*B}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY},Bone2.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},Bone2.prototype.getWorldRotationX=function(){return Math.atan2(this.c,this.a)*t.MathUtils.radDeg},Bone2.prototype.getWorldRotationY=function(){return Math.atan2(this.d,this.b)*t.MathUtils.radDeg},Bone2.prototype.getWorldScaleX=function(){return Math.sqrt(this.a*this.a+this.c*this.c)},Bone2.prototype.getWorldScaleY=function(){return Math.sqrt(this.b*this.b+this.d*this.d)},Bone2.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var i=this.parent;if(null==i)return this.ax=this.worldX,this.ay=this.worldY,this.arotation=Math.atan2(this.c,this.a)*t.MathUtils.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*t.MathUtils.radDeg);var n=i.a,r=i.b,o=i.c,a=i.d,h=1/(n*a-r*o),d=this.worldX-i.worldX,f=this.worldY-i.worldY;this.ax=d*a*h-f*r*h,this.ay=f*n*h-d*o*h;var p=h*a,T=h*n,b=h*r,S=h*o,A=p*this.a-b*this.c,P=p*this.b-b*this.d,O=T*this.c-S*this.a,L=T*this.d-S*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(A*A+O*O),this.ascaleX>1e-4){var D=A*L-P*O;this.ascaleY=D/this.ascaleX,this.ashearY=Math.atan2(A*P+O*L,D)*t.MathUtils.radDeg,this.arotation=Math.atan2(O,A)*t.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(P*P+L*L),this.ashearY=0,this.arotation=90-Math.atan2(L,P)*t.MathUtils.radDeg},Bone2.prototype.worldToLocal=function(t){var i=this.a,n=this.b,r=this.c,o=this.d,a=1/(i*o-n*r),h=t.x-this.worldX,d=t.y-this.worldY;return t.x=h*o*a-d*n*a,t.y=d*i*a-h*r*a,t},Bone2.prototype.localToWorld=function(t){var i=t.x,n=t.y;return t.x=i*this.a+n*this.b+this.worldX,t.y=i*this.c+n*this.d+this.worldY,t},Bone2.prototype.worldToLocalRotation=function(i){var n=t.MathUtils.sinDeg(i),r=t.MathUtils.cosDeg(i);return Math.atan2(this.a*n-this.c*r,this.d*r-this.b*n)*t.MathUtils.radDeg+this.rotation-this.shearX},Bone2.prototype.localToWorldRotation=function(i){i-=this.rotation-this.shearX;var n=t.MathUtils.sinDeg(i),r=t.MathUtils.cosDeg(i);return Math.atan2(r*this.c+n*this.d,r*this.a+n*this.b)*t.MathUtils.radDeg},Bone2.prototype.rotateWorld=function(i){var n=this.a,r=this.b,o=this.c,a=this.d,h=t.MathUtils.cosDeg(i),d=t.MathUtils.sinDeg(i);this.a=h*n-d*o,this.b=h*r-d*a,this.c=d*n+h*o,this.d=d*r+h*a,this.appliedValid=!1},Bone2}();t.Bone=i}(a||(a={})),function(t){var i,n,r=function BoneData2(n,r,o){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=i.Normal,this.skinRequired=!1,this.color=new t.Color,n<0)throw new Error("index must be >= 0.");if(null==r)throw new Error("name cannot be null.");this.index=n,this.name=r,this.parent=o};t.BoneData=r,(n=i=t.TransformMode||(t.TransformMode={}))[n.Normal=0]="Normal",n[n.OnlyTranslation=1]="OnlyTranslation",n[n.NoRotationOrReflection=2]="NoRotationOrReflection",n[n.NoScale=3]="NoScale",n[n.NoScaleOrReflection=4]="NoScaleOrReflection"}(a||(a={})),function(t){var i=function ConstraintData2(t,i,n){this.name=t,this.order=i,this.skinRequired=n};t.ConstraintData=i}(a||(a={})),function(t){var i=function Event2(t,i){if(null==i)throw new Error("data cannot be null.");this.time=t,this.data=i};t.Event=i}(a||(a={})),function(t){var i=function EventData2(t){this.name=t};t.EventData=i}(a||(a={})),function(t){var i=function(){function IkConstraint2(t,i){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==i)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(i.findBone(t.bones[n].name));this.target=i.findBone(t.target.name)}return IkConstraint2.prototype.isActive=function(){return this.active},IkConstraint2.prototype.apply=function(){this.update()},IkConstraint2.prototype.update=function(){var t=this.target,i=this.bones;switch(i.length){case 1:this.apply1(i[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(i[0],i[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}},IkConstraint2.prototype.apply1=function(i,n,r,o,a,h,d){i.appliedValid||i.updateAppliedTransform();var f=i.parent,p=f.a,T=f.b,b=f.c,S=f.d,A=-i.ashearX-i.arotation,P=0,O=0;switch(i.data.transformMode){case t.TransformMode.OnlyTranslation:P=n-i.worldX,O=r-i.worldY;break;case t.TransformMode.NoRotationOrReflection:var L=Math.abs(p*S-T*b)/(p*p+b*b),D=p/i.skeleton.scaleX,I=b/i.skeleton.scaleY;T=-I*L*i.skeleton.scaleX,S=D*L*i.skeleton.scaleY,A+=Math.atan2(I,D)*t.MathUtils.radDeg;default:var F=n-f.worldX,B=r-f.worldY,N=p*S-T*b;P=(F*S-B*T)/N-i.ax,O=(B*p-F*b)/N-i.ay}A+=Math.atan2(O,P)*t.MathUtils.radDeg,i.ascaleX<0&&(A+=180),A>180?A-=360:A<-180&&(A+=360);var Y=i.ascaleX,X=i.ascaleY;if(o||a){switch(i.data.transformMode){case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:P=n-i.worldX,O=r-i.worldY}var G=i.data.length*Y,U=Math.sqrt(P*P+O*O);if(o&&U<G||a&&U>G&&G>1e-4)Y*=L=(U/G-1)*d+1,h&&(X*=L)}i.updateWorldTransformWith(i.ax,i.ay,i.arotation+A*d,Y,X,i.ashearX,i.ashearY)},IkConstraint2.prototype.apply2=function(i,n,r,o,a,h,d,f){if(0!=f){i.appliedValid||i.updateAppliedTransform(),n.appliedValid||n.updateAppliedTransform();var p=i.ax,T=i.ay,b=i.ascaleX,S=b,A=i.ascaleY,P=n.ascaleX,O=0,L=0,D=0;b<0?(b=-b,O=180,D=-1):(O=0,D=1),A<0&&(A=-A,D=-D),P<0?(P=-P,L=180):L=0;var I=n.ax,F=0,B=0,N=0,Y=i.a,X=i.b,G=i.c,U=i.d,V=Math.abs(b-A)<=1e-4;V?(B=Y*I+X*(F=n.ay)+i.worldX,N=G*I+U*F+i.worldY):(F=0,B=Y*I+i.worldX,N=G*I+i.worldY);var z=i.parent;Y=z.a,X=z.b,G=z.c;var W,H,q=1/(Y*(U=z.d)-X*G),Z=B-z.worldX,K=N-z.worldY,J=(Z*U-K*X)*q-p,Q=(K*Y-Z*G)*q-T,$=Math.sqrt(J*J+Q*Q),tt=n.data.length*P;if($<1e-4)return this.apply1(i,r,o,!1,h,!1,f),void n.updateWorldTransformWith(I,F,0,n.ascaleX,n.ascaleY,n.ashearX,n.ashearY);var et=((Z=r-z.worldX)*U-(K=o-z.worldY)*X)*q-p,it=(K*Y-Z*G)*q-T,nt=et*et+it*it;if(0!=d){d*=b*(P+1)/2;var st=Math.sqrt(nt),rt=st-$-tt*b+d;if(rt>0){var ot=Math.min(1,rt/(2*d))-1;nt=(et-=(ot=(rt-d*(1-ot*ot))/st)*et)*et+(it-=ot*it)*it}}t:if(V){var at=(nt-$*$-(tt*=b)*tt)/(2*$*tt);at<-1?at=-1:at>1&&(at=1,h&&(S*=(Math.sqrt(nt)/($+tt)-1)*f+1)),H=Math.acos(at)*a,Y=$+tt*at,X=tt*Math.sin(H),W=Math.atan2(it*Y-et*X,et*Y+it*X)}else{var ht=(Y=b*tt)*Y,lt=(X=A*tt)*X,ut=Math.atan2(it,et),ct=-2*lt*$,dt=lt-ht;if((U=ct*ct-4*dt*(G=lt*$*$+ht*nt-ht*lt))>=0){var ft=Math.sqrt(U);ct<0&&(ft=-ft);var pt=(ft=-(ct+ft)/2)/dt,gt=G/ft,vt=Math.abs(pt)<Math.abs(gt)?pt:gt;if(vt*vt<=nt){K=Math.sqrt(nt-vt*vt)*a,W=ut-Math.atan2(K,vt),H=Math.atan2(K/A,(vt-$)/b);break t}}var mt=t.MathUtils.PI,yt=$-Y,xt=yt*yt,Tt=0,wt=0,bt=$+Y,St=bt*bt,Mt=0;(G=-Y*$/(ht-lt))>=-1&&G<=1&&(G=Math.acos(G),(U=(Z=Y*Math.cos(G)+$)*Z+(K=X*Math.sin(G))*K)<xt&&(mt=G,xt=U,yt=Z,Tt=K),U>St&&(wt=G,St=U,bt=Z,Mt=K)),nt<=(xt+St)/2?(W=ut-Math.atan2(Tt*a,yt),H=mt*a):(W=ut-Math.atan2(Mt*a,bt),H=wt*a)}var Et=Math.atan2(F,I)*D,Ct=i.arotation;(W=(W-Et)*t.MathUtils.radDeg+O-Ct)>180?W-=360:W<-180&&(W+=360),i.updateWorldTransformWith(p,T,Ct+W*f,S,i.ascaleY,0,0),Ct=n.arotation,(H=((H+Et)*t.MathUtils.radDeg-n.ashearX)*D+L-Ct)>180?H-=360:H<-180&&(H+=360),n.updateWorldTransformWith(I,F,Ct+H*f,n.ascaleX,n.ascaleY,n.ashearX,n.ashearY)}else n.updateWorldTransform()},IkConstraint2}();t.IkConstraint=i}(a||(a={})),function(t){var i=function(t){function IkConstraintData2(i){var n=t.call(this,i,0,!1)||this;return n.bones=new Array,n.bendDirection=1,n.compress=!1,n.stretch=!1,n.uniform=!1,n.mix=1,n.softness=0,n}return h(IkConstraintData2,t),IkConstraintData2}(t.ConstraintData);t.IkConstraintData=i}(a||(a={})),function(t){var i=function(){function PathConstraint2(t,i){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==i)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var n=0,r=t.bones.length;n<r;n++)this.bones.push(i.findBone(t.bones[n].name));this.target=i.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return PathConstraint2.prototype.isActive=function(){return this.active},PathConstraint2.prototype.apply=function(){this.update()},PathConstraint2.prototype.update=function(){var i=this.target.getAttachment();if(i instanceof t.PathAttachment){var n=this.rotateMix,r=this.translateMix,o=n>0;if(r>0||o){var a=this.data,h=a.spacingMode==t.SpacingMode.Percent,d=a.rotateMode,f=d==t.RotateMode.Tangent,p=d==t.RotateMode.ChainScale,T=this.bones.length,b=f?T:T+1,S=this.bones,A=t.Utils.setArraySize(this.spaces,b),P=null,O=this.spacing;if(p||!h){p&&(P=t.Utils.setArraySize(this.lengths,T));for(var L=a.spacingMode==t.SpacingMode.Length,D=0,I=b-1;D<I;){var F=(q=S[D]).data.length;if(F<PathConstraint2.epsilon)p&&(P[D]=0),A[++D]=0;else if(h){if(p){var B=F*q.a,N=F*q.c,Y=Math.sqrt(B*B+N*N);P[D]=Y}A[++D]=O}else{B=F*q.a,N=F*q.c;var X=Math.sqrt(B*B+N*N);p&&(P[D]=X),A[++D]=(L?F+O:O)*X/F}}}else for(D=1;D<b;D++)A[D]=O;var G=this.computeWorldPositions(i,b,f,a.positionMode==t.PositionMode.Percent,h),U=G[0],V=G[1],z=a.offsetRotation,W=!1;if(0==z)W=d==t.RotateMode.Chain;else W=!1,z*=(H=this.target.bone).a*H.d-H.b*H.c>0?t.MathUtils.degRad:-t.MathUtils.degRad;D=0;for(var H=3;D<T;D++,H+=3){var q;(q=S[D]).worldX+=(U-q.worldX)*r,q.worldY+=(V-q.worldY)*r;var Z=(B=G[H])-U,K=(N=G[H+1])-V;if(p){var J=P[D];if(0!=J){var Q=(Math.sqrt(Z*Z+K*K)/J-1)*n+1;q.a*=Q,q.c*=Q}}if(U=B,V=N,o){var $=q.a,tt=q.b,et=q.c,it=q.d,nt=0,st=0,rt=0;if(nt=f?G[H-1]:0==A[D+1]?G[H+2]:Math.atan2(K,Z),nt-=Math.atan2(et,$),W){st=Math.cos(nt),rt=Math.sin(nt);var ot=q.data.length;U+=(ot*(st*$-rt*et)-Z)*n,V+=(ot*(rt*$+st*et)-K)*n}else nt+=z;nt>t.MathUtils.PI?nt-=t.MathUtils.PI2:nt<-t.MathUtils.PI&&(nt+=t.MathUtils.PI2),nt*=n,st=Math.cos(nt),rt=Math.sin(nt),q.a=st*$-rt*et,q.b=st*tt-rt*it,q.c=rt*$+st*et,q.d=rt*tt+st*it}q.appliedValid=!1}}}},PathConstraint2.prototype.computeWorldPositions=function(i,n,r,o,a){var h=this.target,d=this.position,f=this.spaces,p=t.Utils.setArraySize(this.positions,3*n+2),T=null,b=i.closed,S=i.worldVerticesLength,A=S/6,P=PathConstraint2.NONE;if(!i.constantSpeed){var O=i.lengths,L=O[A-=b?1:2];if(o&&(d*=L),a)for(var D=1;D<n;D++)f[D]*=L;T=t.Utils.setArraySize(this.world,8);D=0;for(var I=0,F=0;D<n;D++,I+=3){var B=d+=ht=f[D];if(b)(B%=L)<0&&(B+=L),F=0;else{if(B<0){P!=PathConstraint2.BEFORE&&(P=PathConstraint2.BEFORE,i.computeWorldVertices(h,2,4,T,0,2)),this.addBeforePosition(B,T,0,p,I);continue}if(B>L){P!=PathConstraint2.AFTER&&(P=PathConstraint2.AFTER,i.computeWorldVertices(h,S-6,4,T,0,2)),this.addAfterPosition(B-L,T,0,p,I);continue}}for(;;F++){var N=O[F];if(!(B>N)){if(0==F)B/=N;else B=(B-(dt=O[F-1]))/(N-dt);break}}F!=P&&(P=F,b&&F==A?(i.computeWorldVertices(h,S-4,4,T,0,2),i.computeWorldVertices(h,0,4,T,4,2)):i.computeWorldVertices(h,6*F+2,8,T,0,2)),this.addCurvePosition(B,T[0],T[1],T[2],T[3],T[4],T[5],T[6],T[7],p,I,r||D>0&&0==ht)}return p}b?(S+=2,T=t.Utils.setArraySize(this.world,S),i.computeWorldVertices(h,2,S-4,T,0,2),i.computeWorldVertices(h,0,2,T,S-4,2),T[S-2]=T[0],T[S-1]=T[1]):(A--,S-=4,T=t.Utils.setArraySize(this.world,S),i.computeWorldVertices(h,2,S,T,0,2));for(var Y=t.Utils.setArraySize(this.curves,A),X=0,G=T[0],U=T[1],V=0,z=0,W=0,H=0,q=0,Z=0,K=0,J=0,Q=0,$=0,tt=0,et=0,it=0,nt=0,st=(D=0,2);D<A;D++,st+=6)V=T[st],z=T[st+1],W=T[st+2],H=T[st+3],tt=2*(K=.1875*(G-2*V+W))+(Q=.09375*(3*(V-W)-G+(q=T[st+4]))),et=2*(J=.1875*(U-2*z+H))+($=.09375*(3*(z-H)-U+(Z=T[st+5]))),it=.75*(V-G)+K+.16666667*Q,nt=.75*(z-U)+J+.16666667*$,X+=Math.sqrt(it*it+nt*nt),it+=tt,nt+=et,tt+=Q,et+=$,X+=Math.sqrt(it*it+nt*nt),it+=tt,nt+=et,X+=Math.sqrt(it*it+nt*nt),it+=tt+Q,nt+=et+$,X+=Math.sqrt(it*it+nt*nt),Y[D]=X,G=q,U=Z;if(d*=o?X:X/i.lengths[A-1],a)for(D=1;D<n;D++)f[D]*=X;for(var rt=this.segments,ot=0,at=(D=0,I=0,F=0,0);D<n;D++,I+=3){var ht;B=d+=ht=f[D];if(b)(B%=X)<0&&(B+=X),F=0;else{if(B<0){this.addBeforePosition(B,T,0,p,I);continue}if(B>X){this.addAfterPosition(B-X,T,S-4,p,I);continue}}for(;;F++){var lt=Y[F];if(!(B>lt)){if(0==F)B/=lt;else B=(B-(dt=Y[F-1]))/(lt-dt);break}}if(F!=P){P=F;var ut=6*F;for(G=T[ut],U=T[ut+1],V=T[ut+2],z=T[ut+3],W=T[ut+4],H=T[ut+5],tt=2*(K=.03*(G-2*V+W))+(Q=.006*(3*(V-W)-G+(q=T[ut+6]))),et=2*(J=.03*(U-2*z+H))+($=.006*(3*(z-H)-U+(Z=T[ut+7]))),it=.3*(V-G)+K+.16666667*Q,nt=.3*(z-U)+J+.16666667*$,ot=Math.sqrt(it*it+nt*nt),rt[0]=ot,ut=1;ut<8;ut++)it+=tt,nt+=et,tt+=Q,et+=$,ot+=Math.sqrt(it*it+nt*nt),rt[ut]=ot;it+=tt,nt+=et,ot+=Math.sqrt(it*it+nt*nt),rt[8]=ot,it+=tt+Q,nt+=et+$,ot+=Math.sqrt(it*it+nt*nt),rt[9]=ot,at=0}for(B*=ot;;at++){var ct=rt[at];if(!(B>ct)){var dt;if(0==at)B/=ct;else B=at+(B-(dt=rt[at-1]))/(ct-dt);break}}this.addCurvePosition(.1*B,G,U,V,z,W,H,q,Z,p,I,r||D>0&&0==ht)}return p},PathConstraint2.prototype.addBeforePosition=function(t,i,n,r,o){var a=i[n],h=i[n+1],d=i[n+2]-a,f=i[n+3]-h,p=Math.atan2(f,d);r[o]=a+t*Math.cos(p),r[o+1]=h+t*Math.sin(p),r[o+2]=p},PathConstraint2.prototype.addAfterPosition=function(t,i,n,r,o){var a=i[n+2],h=i[n+3],d=a-i[n],f=h-i[n+1],p=Math.atan2(f,d);r[o]=a+t*Math.cos(p),r[o+1]=h+t*Math.sin(p),r[o+2]=p},PathConstraint2.prototype.addCurvePosition=function(t,i,n,r,o,a,h,d,f,p,T,b){if(0==t||isNaN(t))return p[T]=i,p[T+1]=n,void(p[T+2]=Math.atan2(o-n,r-i));var S=t*t,A=S*t,P=1-t,O=P*P,L=O*P,D=P*t,I=3*D,F=P*I,B=I*t,N=i*L+r*F+a*B+d*A,Y=n*L+o*F+h*B+f*A;p[T]=N,p[T+1]=Y,b&&(p[T+2]=t<.001?Math.atan2(o-n,r-i):Math.atan2(Y-(n*O+o*D*2+h*S),N-(i*O+r*D*2+a*S)))},PathConstraint2.NONE=-1,PathConstraint2.BEFORE=-2,PathConstraint2.AFTER=-3,PathConstraint2.epsilon=1e-5,PathConstraint2}();t.PathConstraint=i}(a||(a={})),function(t){var i,n,r,o=function(t){function PathConstraintData2(i){var n=t.call(this,i,0,!1)||this;return n.bones=new Array,n}return h(PathConstraintData2,t),PathConstraintData2}(t.ConstraintData);t.PathConstraintData=o,(i=t.PositionMode||(t.PositionMode={}))[i.Fixed=0]="Fixed",i[i.Percent=1]="Percent",(n=t.SpacingMode||(t.SpacingMode={}))[n.Length=0]="Length",n[n.Fixed=1]="Fixed",n[n.Percent=2]="Percent",(r=t.RotateMode||(t.RotateMode={}))[r.Tangent=0]="Tangent",r[r.Chain=1]="Chain",r[r.ChainScale=2]="ChainScale"}(a||(a={})),function(t){var i=function(){function Assets2(t){this.toLoad=new Array,this.assets={},this.clientId=t}return Assets2.prototype.loaded=function(){var t=0;for(var i in this.assets)t++;return t},Assets2}(),n=function(){function SharedAssetManager2(t){void 0===t&&(t=""),this.clientAssets={},this.queuedAssets={},this.rawAssets={},this.errors={},this.pathPrefix=t}return SharedAssetManager2.prototype.queueAsset=function(t,n,r){var o=this.clientAssets[t];return null==o&&(o=new i(t),this.clientAssets[t]=o),null!==n&&(o.textureLoader=n),o.toLoad.push(r),this.queuedAssets[r]!==r&&(this.queuedAssets[r]=r,!0)},SharedAssetManager2.prototype.loadText=function(t,i){var n=this;if(i=this.pathPrefix+i,this.queueAsset(t,null,i)){var r=new XMLHttpRequest;r.overrideMimeType("text/html"),r.onreadystatechange=function(){r.readyState==XMLHttpRequest.DONE&&(r.status>=200&&r.status<300?n.rawAssets[i]=r.responseText:n.errors[i]="Couldn't load text "+i+": status "+r.status+", "+r.responseText)},r.open("GET",i,!0),r.send()}},SharedAssetManager2.prototype.loadJson=function(t,i){var n=this;if(i=this.pathPrefix+i,this.queueAsset(t,null,i)){var r=new XMLHttpRequest;r.overrideMimeType("text/html"),r.onreadystatechange=function(){r.readyState==XMLHttpRequest.DONE&&(r.status>=200&&r.status<300?n.rawAssets[i]=JSON.parse(r.responseText):n.errors[i]="Couldn't load text "+i+": status "+r.status+", "+r.responseText)},r.open("GET",i,!0),r.send()}},SharedAssetManager2.prototype.loadTexture=function(t,i,n){var r=this;if(n=this.pathPrefix+n,this.queueAsset(t,i,n))if(!!("undefined"==typeof window||"undefined"==typeof navigator||!window.document)&&"undefined"!=typeof importScripts){fetch(n,{mode:"cors"}).then((function(t){return t.ok||(r.errors[n]="Couldn't load image "+n),t.blob()})).then((function(t){return createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"})})).then((function(t){r.rawAssets[n]=t}))}else{var o=new Image;o.crossOrigin="anonymous",o.onload=function(t){r.rawAssets[n]=o},o.onerror=function(t){r.errors[n]="Couldn't load image "+n},o.src=n}},SharedAssetManager2.prototype.get=function(t,i){i=this.pathPrefix+i;var n=this.clientAssets[t];return null==n||n.assets[i]},SharedAssetManager2.prototype.updateClientAssets=function(t){for(var i=!!("undefined"==typeof window||"undefined"==typeof navigator||!window.document)&&"undefined"!=typeof importScripts,n=0;n<t.toLoad.length;n++){var r=t.toLoad[n],o=t.assets[r];if(null==o){var a=this.rawAssets[r];if(null==a)continue;i?a instanceof ImageBitmap?t.assets[r]=t.textureLoader(a):t.assets[r]=a:a instanceof HTMLImageElement?t.assets[r]=t.textureLoader(a):t.assets[r]=a}}},SharedAssetManager2.prototype.isLoadingComplete=function(t){var i=this.clientAssets[t];return null==i||(this.updateClientAssets(i),i.toLoad.length==i.loaded())},SharedAssetManager2.prototype.dispose=function(){},SharedAssetManager2.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},SharedAssetManager2.prototype.getErrors=function(){return this.errors},SharedAssetManager2}();t.SharedAssetManager=n}(a||(a={})),function(t){var i=function(){function Skeleton2(i){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==i)throw new Error("data cannot be null.");this.data=i,this.bones=new Array;for(var n=0;n<i.bones.length;n++){var r=i.bones[n],o=void 0;if(null==r.parent)o=new t.Bone(r,this,null);else{var a=this.bones[r.parent.index];o=new t.Bone(r,this,a),a.children.push(o)}this.bones.push(o)}this.slots=new Array,this.drawOrder=new Array;for(n=0;n<i.slots.length;n++){var h=i.slots[n],d=(o=this.bones[h.boneData.index],new t.Slot(h,o));this.slots.push(d),this.drawOrder.push(d)}this.ikConstraints=new Array;for(n=0;n<i.ikConstraints.length;n++){var f=i.ikConstraints[n];this.ikConstraints.push(new t.IkConstraint(f,this))}this.transformConstraints=new Array;for(n=0;n<i.transformConstraints.length;n++){var p=i.transformConstraints[n];this.transformConstraints.push(new t.TransformConstraint(p,this))}this.pathConstraints=new Array;for(n=0;n<i.pathConstraints.length;n++){var T=i.pathConstraints[n];this.pathConstraints.push(new t.PathConstraint(T,this))}this.color=new t.Color(1,1,1,1),this.updateCache()}return Skeleton2.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,i=0,n=t.length;i<n;i++){(o=t[i]).sorted=o.data.skinRequired,o.active=!o.sorted}if(null!=this.skin){var r=this.skin.bones;for(i=0,n=this.skin.bones.length;i<n;i++){var o=this.bones[r[i].index];do{o.sorted=!1,o.active=!0,o=o.parent}while(null!=o)}}var a=this.ikConstraints,h=this.transformConstraints,d=this.pathConstraints,f=a.length,p=h.length,T=d.length,b=f+p+T;t:for(i=0;i<b;i++){for(var S=0;S<f;S++){if((A=a[S]).data.order==i){this.sortIkConstraint(A);continue t}}for(S=0;S<p;S++){if((A=h[S]).data.order==i){this.sortTransformConstraint(A);continue t}}for(S=0;S<T;S++){var A;if((A=d[S]).data.order==i){this.sortPathConstraint(A);continue t}}}for(i=0,n=t.length;i<n;i++)this.sortBone(t[i])},Skeleton2.prototype.sortIkConstraint=function(i){if(i.active=i.target.isActive()&&(!i.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,i.data,!0)),i.active){var n=i.target;this.sortBone(n);var r=i.bones,o=r[0];if(this.sortBone(o),r.length>1){var a=r[r.length-1];this._updateCache.indexOf(a)>-1||this.updateCacheReset.push(a)}this._updateCache.push(i),this.sortReset(o.children),r[r.length-1].sorted=!0}},Skeleton2.prototype.sortPathConstraint=function(i){if(i.active=i.target.bone.isActive()&&(!i.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,i.data,!0)),i.active){var n=i.target,r=n.data.index,o=n.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,r,o),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,r,o);for(var a=0,h=this.data.skins.length;a<h;a++)this.sortPathConstraintAttachment(this.data.skins[a],r,o);var d=n.getAttachment();d instanceof t.PathAttachment&&this.sortPathConstraintAttachmentWith(d,o);var f=i.bones,p=f.length;for(a=0;a<p;a++)this.sortBone(f[a]);this._updateCache.push(i);for(a=0;a<p;a++)this.sortReset(f[a].children);for(a=0;a<p;a++)f[a].sorted=!0}},Skeleton2.prototype.sortTransformConstraint=function(i){if(i.active=i.target.isActive()&&(!i.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,i.data,!0)),i.active){this.sortBone(i.target);var n=i.bones,r=n.length;if(i.data.local)for(var o=0;o<r;o++){var a=n[o];this.sortBone(a.parent),this._updateCache.indexOf(a)>-1||this.updateCacheReset.push(a)}else for(o=0;o<r;o++)this.sortBone(n[o]);this._updateCache.push(i);for(var h=0;h<r;h++)this.sortReset(n[h].children);for(h=0;h<r;h++)n[h].sorted=!0}},Skeleton2.prototype.sortPathConstraintAttachment=function(t,i,n){var r=t.attachments[i];if(r)for(var o in r)this.sortPathConstraintAttachmentWith(r[o],n)},Skeleton2.prototype.sortPathConstraintAttachmentWith=function(i,n){if(i instanceof t.PathAttachment){var r=i.bones;if(null==r)this.sortBone(n);else for(var o=this.bones,a=0;a<r.length;)for(var h=r[a++],d=a+h;a<d;a++){var f=r[a];this.sortBone(o[f])}}},Skeleton2.prototype.sortBone=function(t){if(!t.sorted){var i=t.parent;null!=i&&this.sortBone(i),t.sorted=!0,this._updateCache.push(t)}},Skeleton2.prototype.sortReset=function(t){for(var i=0,n=t.length;i<n;i++){var r=t[i];r.active&&(r.sorted&&this.sortReset(r.children),r.sorted=!1)}},Skeleton2.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,i=0,n=t.length;i<n;i++){var r=t[i];r.ax=r.x,r.ay=r.y,r.arotation=r.rotation,r.ascaleX=r.scaleX,r.ascaleY=r.scaleY,r.ashearX=r.shearX,r.ashearY=r.shearY,r.appliedValid=!0}var o=this._updateCache;for(i=0,n=o.length;i<n;i++)o[i].update()},Skeleton2.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},Skeleton2.prototype.setBonesToSetupPose=function(){for(var t=this.bones,i=0,n=t.length;i<n;i++)t[i].setToSetupPose();var r=this.ikConstraints;for(i=0,n=r.length;i<n;i++){(d=r[i]).mix=d.data.mix,d.softness=d.data.softness,d.bendDirection=d.data.bendDirection,d.compress=d.data.compress,d.stretch=d.data.stretch}var o=this.transformConstraints;for(i=0,n=o.length;i<n;i++){var a=(d=o[i]).data;d.rotateMix=a.rotateMix,d.translateMix=a.translateMix,d.scaleMix=a.scaleMix,d.shearMix=a.shearMix}var h=this.pathConstraints;for(i=0,n=h.length;i<n;i++){var d;a=(d=h[i]).data;d.position=a.position,d.spacing=a.spacing,d.rotateMix=a.rotateMix,d.translateMix=a.translateMix}},Skeleton2.prototype.setSlotsToSetupPose=function(){var i=this.slots;t.Utils.arrayCopy(i,0,this.drawOrder,0,i.length);for(var n=0,r=i.length;n<r;n++)i[n].setToSetupPose()},Skeleton2.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},Skeleton2.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var i=this.bones,n=0,r=i.length;n<r;n++){var o=i[n];if(o.data.name==t)return o}return null},Skeleton2.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var i=this.bones,n=0,r=i.length;n<r;n++)if(i[n].data.name==t)return n;return-1},Skeleton2.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var i=this.slots,n=0,r=i.length;n<r;n++){var o=i[n];if(o.data.name==t)return o}return null},Skeleton2.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var i=this.slots,n=0,r=i.length;n<r;n++)if(i[n].data.name==t)return n;return-1},Skeleton2.prototype.setSkinByName=function(t){var i=this.data.findSkin(t);if(null==i)throw new Error("Skin not found: "+t);this.setSkin(i)},Skeleton2.prototype.setSkin=function(t){if(t!=this.skin){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var i=this.slots,n=0,r=i.length;n<r;n++){var o=i[n],a=o.data.attachmentName;if(null!=a){var h=t.getAttachment(n,a);null!=h&&o.setAttachment(h)}}this.skin=t,this.updateCache()}},Skeleton2.prototype.getAttachmentByName=function(t,i){return this.getAttachment(this.data.findSlotIndex(t),i)},Skeleton2.prototype.getAttachment=function(t,i){if(null==i)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var n=this.skin.getAttachment(t,i);if(null!=n)return n}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,i):null},Skeleton2.prototype.setAttachment=function(t,i){if(null==t)throw new Error("slotName cannot be null.");for(var n=this.slots,r=0,o=n.length;r<o;r++){var a=n[r];if(a.data.name==t){var h=null;if(null!=i&&null==(h=this.getAttachment(r,i)))throw new Error("Attachment not found: "+i+", for slot: "+t);return void a.setAttachment(h)}}throw new Error("Slot not found: "+t)},Skeleton2.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var i=this.ikConstraints,n=0,r=i.length;n<r;n++){var o=i[n];if(o.data.name==t)return o}return null},Skeleton2.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var i=this.transformConstraints,n=0,r=i.length;n<r;n++){var o=i[n];if(o.data.name==t)return o}return null},Skeleton2.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var i=this.pathConstraints,n=0,r=i.length;n<r;n++){var o=i[n];if(o.data.name==t)return o}return null},Skeleton2.prototype.getBounds=function(i,n,r){if(void 0===r&&(r=new Array(2)),null==i)throw new Error("offset cannot be null.");if(null==n)throw new Error("size cannot be null.");for(var o=this.drawOrder,a=Number.POSITIVE_INFINITY,h=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,f=Number.NEGATIVE_INFINITY,p=0,T=o.length;p<T;p++){var b=o[p];if(b.bone.active){var S=0,A=null,P=b.getAttachment();if(P instanceof t.RegionAttachment)S=8,A=t.Utils.setArraySize(r,S,0),P.computeWorldVertices(b.bone,A,0,2);else if(P instanceof t.MeshAttachment){var O=P;S=O.worldVerticesLength,A=t.Utils.setArraySize(r,S,0),O.computeWorldVertices(b,0,S,A,0,2)}if(null!=A)for(var L=0,D=A.length;L<D;L+=2){var I=A[L],F=A[L+1];a=Math.min(a,I),h=Math.min(h,F),d=Math.max(d,I),f=Math.max(f,F)}}}i.set(a,h),n.set(d-a,f-h)},Skeleton2.prototype.update=function(t){this.time+=t},Skeleton2}();t.Skeleton=i}(a||(a={})),function(t){var i=function(){function SkeletonBinary2(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return SkeletonBinary2.prototype.readSkeletonData=function(i){var r=this.scale,o=new t.SkeletonData;o.name="";var a=new n(i);if(o.hash=a.readString(),o.version=a.readString(),"3.8.75"==o.version)throw new Error("Unsupported skeleton data, please export with a newer version of Spine.");o.x=a.readFloat(),o.y=a.readFloat(),o.width=a.readFloat(),o.height=a.readFloat();var h=a.readBoolean();h&&(o.fps=a.readFloat(),o.imagesPath=a.readString(),o.audioPath=a.readString());var d=0;d=a.readInt(!0);for(var f=0;f<d;f++)a.strings.push(a.readString());d=a.readInt(!0);for(f=0;f<d;f++){var p=a.readString(),T=0==f?null:o.bones[a.readInt(!0)];(A=new t.BoneData(f,p,T)).rotation=a.readFloat(),A.x=a.readFloat()*r,A.y=a.readFloat()*r,A.scaleX=a.readFloat(),A.scaleY=a.readFloat(),A.shearX=a.readFloat(),A.shearY=a.readFloat(),A.length=a.readFloat()*r,A.transformMode=SkeletonBinary2.TransformModeValues[a.readInt(!0)],A.skinRequired=a.readBoolean(),h&&t.Color.rgba8888ToColor(A.color,a.readInt32()),o.bones.push(A)}d=a.readInt(!0);for(f=0;f<d;f++){var b=a.readString(),S=o.bones[a.readInt(!0)],A=new t.SlotData(f,b,S);t.Color.rgba8888ToColor(A.color,a.readInt32());var P=a.readInt32();-1!=P&&t.Color.rgb888ToColor(A.darkColor=new t.Color,P),A.attachmentName=a.readStringRef(),A.blendMode=SkeletonBinary2.BlendModeValues[a.readInt(!0)],o.slots.push(A)}d=a.readInt(!0);f=0;for(var O=void 0;f<d;f++){(A=new t.IkConstraintData(a.readString())).order=a.readInt(!0),A.skinRequired=a.readBoolean(),O=a.readInt(!0);for(var L=0;L<O;L++)A.bones.push(o.bones[a.readInt(!0)]);A.target=o.bones[a.readInt(!0)],A.mix=a.readFloat(),A.softness=a.readFloat()*r,A.bendDirection=a.readByte(),A.compress=a.readBoolean(),A.stretch=a.readBoolean(),A.uniform=a.readBoolean(),o.ikConstraints.push(A)}d=a.readInt(!0);for(f=0,O=void 0;f<d;f++){(A=new t.TransformConstraintData(a.readString())).order=a.readInt(!0),A.skinRequired=a.readBoolean(),O=a.readInt(!0);for(L=0;L<O;L++)A.bones.push(o.bones[a.readInt(!0)]);A.target=o.bones[a.readInt(!0)],A.local=a.readBoolean(),A.relative=a.readBoolean(),A.offsetRotation=a.readFloat(),A.offsetX=a.readFloat()*r,A.offsetY=a.readFloat()*r,A.offsetScaleX=a.readFloat(),A.offsetScaleY=a.readFloat(),A.offsetShearY=a.readFloat(),A.rotateMix=a.readFloat(),A.translateMix=a.readFloat(),A.scaleMix=a.readFloat(),A.shearMix=a.readFloat(),o.transformConstraints.push(A)}d=a.readInt(!0);for(f=0,O=void 0;f<d;f++){(A=new t.PathConstraintData(a.readString())).order=a.readInt(!0),A.skinRequired=a.readBoolean(),O=a.readInt(!0);for(L=0;L<O;L++)A.bones.push(o.bones[a.readInt(!0)]);A.target=o.slots[a.readInt(!0)],A.positionMode=SkeletonBinary2.PositionModeValues[a.readInt(!0)],A.spacingMode=SkeletonBinary2.SpacingModeValues[a.readInt(!0)],A.rotateMode=SkeletonBinary2.RotateModeValues[a.readInt(!0)],A.offsetRotation=a.readFloat(),A.position=a.readFloat(),A.positionMode==t.PositionMode.Fixed&&(A.position*=r),A.spacing=a.readFloat(),A.spacingMode!=t.SpacingMode.Length&&A.spacingMode!=t.SpacingMode.Fixed||(A.spacing*=r),A.rotateMix=a.readFloat(),A.translateMix=a.readFloat(),o.pathConstraints.push(A)}var D=this.readSkin(a,o,!0,h);null!=D&&(o.defaultSkin=D,o.skins.push(D));f=o.skins.length;for(t.Utils.setArraySize(o.skins,d=f+a.readInt(!0));f<d;f++)o.skins[f]=this.readSkin(a,o,!1,h);d=this.linkedMeshes.length;for(f=0;f<d;f++){var I=this.linkedMeshes[f],F=null==I.skin?o.defaultSkin:o.findSkin(I.skin);if(null==F)throw new Error("Skin not found: "+I.skin);var B=F.getAttachment(I.slotIndex,I.parent);if(null==B)throw new Error("Parent mesh not found: "+I.parent);I.mesh.deformAttachment=I.inheritDeform?B:I.mesh,I.mesh.setParentMesh(B),I.mesh.updateUVs()}this.linkedMeshes.length=0,d=a.readInt(!0);for(f=0;f<d;f++){(A=new t.EventData(a.readStringRef())).intValue=a.readInt(!1),A.floatValue=a.readFloat(),A.stringValue=a.readString(),A.audioPath=a.readString(),null!=A.audioPath&&(A.volume=a.readFloat(),A.balance=a.readFloat()),o.events.push(A)}d=a.readInt(!0);for(f=0;f<d;f++)o.animations.push(this.readAnimation(a,a.readString(),o));return o},SkeletonBinary2.prototype.readSkin=function(i,n,r,o){var a=null,h=0;if(r){if(0==(h=i.readInt(!0)))return null;a=new t.Skin("default")}else{(a=new t.Skin(i.readStringRef())).bones.length=i.readInt(!0);for(var d=0,f=a.bones.length;d<f;d++)a.bones[d]=n.bones[i.readInt(!0)];for(d=0,f=i.readInt(!0);d<f;d++)a.constraints.push(n.ikConstraints[i.readInt(!0)]);for(d=0,f=i.readInt(!0);d<f;d++)a.constraints.push(n.transformConstraints[i.readInt(!0)]);for(d=0,f=i.readInt(!0);d<f;d++)a.constraints.push(n.pathConstraints[i.readInt(!0)]);h=i.readInt(!0)}for(d=0;d<h;d++)for(var p=i.readInt(!0),T=0,b=i.readInt(!0);T<b;T++){var S=i.readStringRef(),A=this.readAttachment(i,n,a,p,S,o);null!=A&&a.setAttachment(p,S,A)}return a},SkeletonBinary2.prototype.readAttachment=function(i,n,o,a,h,d){var f=this.scale,p=i.readStringRef();null==p&&(p=h);var T=i.readByte();switch(SkeletonBinary2.AttachmentTypeValues[T]){case t.AttachmentType.Region:var b=i.readStringRef(),S=i.readFloat(),A=i.readFloat(),P=i.readFloat(),O=i.readFloat(),L=i.readFloat(),D=i.readFloat(),I=i.readFloat(),F=i.readInt32();null==b&&(b=p);var B=this.attachmentLoader.newRegionAttachment(o,p,b);return null==B?null:(B.path=b,B.x=A*f,B.y=P*f,B.scaleX=O,B.scaleY=L,B.rotation=S,B.width=D*f,B.height=I*f,t.Color.rgba8888ToColor(B.color,F),B.updateOffset(),B);case t.AttachmentType.BoundingBox:var N=i.readInt(!0),Y=this.readVertices(i,N),X=(F=d?i.readInt32():0,this.attachmentLoader.newBoundingBoxAttachment(o,p));return null==X?null:(X.worldVerticesLength=N<<1,X.vertices=Y.vertices,X.bones=Y.bones,d&&t.Color.rgba8888ToColor(X.color,F),X);case t.AttachmentType.Mesh:b=i.readStringRef(),F=i.readInt32(),N=i.readInt(!0);var G=this.readFloatArray(i,N<<1,1),U=this.readShortArray(i),V=(Y=this.readVertices(i,N),i.readInt(!0)),z=null;D=0,I=0;return d&&(z=this.readShortArray(i),D=i.readFloat(),I=i.readFloat()),null==b&&(b=p),null==(W=this.attachmentLoader.newMeshAttachment(o,p,b))?null:(W.path=b,t.Color.rgba8888ToColor(W.color,F),W.bones=Y.bones,W.vertices=Y.vertices,W.worldVerticesLength=N<<1,W.triangles=U,W.regionUVs=G,W.updateUVs(),W.hullLength=V<<1,d&&(W.edges=z,W.width=D*f,W.height=I*f),W);case t.AttachmentType.LinkedMesh:b=i.readStringRef(),F=i.readInt32();var W,H=i.readStringRef(),q=i.readStringRef(),Z=i.readBoolean();D=0,I=0;return d&&(D=i.readFloat(),I=i.readFloat()),null==b&&(b=p),null==(W=this.attachmentLoader.newMeshAttachment(o,p,b))?null:(W.path=b,t.Color.rgba8888ToColor(W.color,F),d&&(W.width=D*f,W.height=I*f),this.linkedMeshes.push(new r(W,H,a,q,Z)),W);case t.AttachmentType.Path:for(var K=i.readBoolean(),J=i.readBoolean(),Q=(N=i.readInt(!0),Y=this.readVertices(i,N),t.Utils.newArray(N/3,0)),$=0,tt=Q.length;$<tt;$++)Q[$]=i.readFloat()*f;F=d?i.readInt32():0;return null==(b=this.attachmentLoader.newPathAttachment(o,p))?null:(b.closed=K,b.constantSpeed=J,b.worldVerticesLength=N<<1,b.vertices=Y.vertices,b.bones=Y.bones,b.lengths=Q,d&&t.Color.rgba8888ToColor(b.color,F),b);case t.AttachmentType.Point:S=i.readFloat(),A=i.readFloat(),P=i.readFloat(),F=d?i.readInt32():0;var et=this.attachmentLoader.newPointAttachment(o,p);return null==et?null:(et.x=A*f,et.y=P*f,et.rotation=S,d&&t.Color.rgba8888ToColor(et.color,F),et);case t.AttachmentType.Clipping:var it=i.readInt(!0),nt=(N=i.readInt(!0),Y=this.readVertices(i,N),F=d?i.readInt32():0,this.attachmentLoader.newClippingAttachment(o,p));return null==nt?null:(nt.endSlot=n.slots[it],nt.worldVerticesLength=N<<1,nt.vertices=Y.vertices,nt.bones=Y.bones,d&&t.Color.rgba8888ToColor(nt.color,F),nt)}return null},SkeletonBinary2.prototype.readVertices=function(i,n){var r=n<<1,a=new o,h=this.scale;if(!i.readBoolean())return a.vertices=this.readFloatArray(i,r,h),a;for(var d=new Array,f=new Array,p=0;p<n;p++){var T=i.readInt(!0);f.push(T);for(var b=0;b<T;b++)f.push(i.readInt(!0)),d.push(i.readFloat()*h),d.push(i.readFloat()*h),d.push(i.readFloat())}return a.vertices=t.Utils.toFloatArray(d),a.bones=f,a},SkeletonBinary2.prototype.readFloatArray=function(t,i,n){var r=new Array(i);if(1==n)for(var o=0;o<i;o++)r[o]=t.readFloat();else for(o=0;o<i;o++)r[o]=t.readFloat()*n;return r},SkeletonBinary2.prototype.readShortArray=function(t){for(var i=t.readInt(!0),n=new Array(i),r=0;r<i;r++)n[r]=t.readShort();return n},SkeletonBinary2.prototype.readAnimation=function(i,n,r){for(var o=new Array,a=this.scale,h=0,d=new t.Color,f=new t.Color,p=0,T=i.readInt(!0);p<T;p++)for(var b=i.readInt(!0),S=0,A=i.readInt(!0);S<A;S++){var P=i.readByte(),O=i.readInt(!0);switch(P){case SkeletonBinary2.SLOT_ATTACHMENT:(F=new t.AttachmentTimeline(O)).slotIndex=b;for(var L=0;L<O;L++)F.setFrame(L,i.readFloat(),i.readStringRef());o.push(F),h=Math.max(h,F.frames[O-1]);break;case SkeletonBinary2.SLOT_COLOR:(F=new t.ColorTimeline(O)).slotIndex=b;for(L=0;L<O;L++){var D=i.readFloat();t.Color.rgba8888ToColor(d,i.readInt32()),F.setFrame(L,D,d.r,d.g,d.b,d.a),L<O-1&&this.readCurve(i,L,F)}o.push(F),h=Math.max(h,F.frames[(O-1)*t.ColorTimeline.ENTRIES]);break;case SkeletonBinary2.SLOT_TWO_COLOR:(F=new t.TwoColorTimeline(O)).slotIndex=b;for(L=0;L<O;L++){D=i.readFloat();t.Color.rgba8888ToColor(d,i.readInt32()),t.Color.rgb888ToColor(f,i.readInt32()),F.setFrame(L,D,d.r,d.g,d.b,d.a,f.r,f.g,f.b),L<O-1&&this.readCurve(i,L,F)}o.push(F),h=Math.max(h,F.frames[(O-1)*t.TwoColorTimeline.ENTRIES])}}for(p=0,T=i.readInt(!0);p<T;p++){var I=i.readInt(!0);for(S=0,A=i.readInt(!0);S<A;S++){P=i.readByte(),O=i.readInt(!0);switch(P){case SkeletonBinary2.BONE_ROTATE:(F=new t.RotateTimeline(O)).boneIndex=I;for(L=0;L<O;L++)F.setFrame(L,i.readFloat(),i.readFloat()),L<O-1&&this.readCurve(i,L,F);o.push(F),h=Math.max(h,F.frames[(O-1)*t.RotateTimeline.ENTRIES]);break;case SkeletonBinary2.BONE_TRANSLATE:case SkeletonBinary2.BONE_SCALE:case SkeletonBinary2.BONE_SHEAR:var F=void 0,B=1;P==SkeletonBinary2.BONE_SCALE?F=new t.ScaleTimeline(O):P==SkeletonBinary2.BONE_SHEAR?F=new t.ShearTimeline(O):(F=new t.TranslateTimeline(O),B=a),F.boneIndex=I;for(L=0;L<O;L++)F.setFrame(L,i.readFloat(),i.readFloat()*B,i.readFloat()*B),L<O-1&&this.readCurve(i,L,F);o.push(F),h=Math.max(h,F.frames[(O-1)*t.TranslateTimeline.ENTRIES])}}}for(p=0,T=i.readInt(!0);p<T;p++){var N=i.readInt(!0);O=i.readInt(!0);(F=new t.IkConstraintTimeline(O)).ikConstraintIndex=N;for(L=0;L<O;L++)F.setFrame(L,i.readFloat(),i.readFloat(),i.readFloat()*a,i.readByte(),i.readBoolean(),i.readBoolean()),L<O-1&&this.readCurve(i,L,F);o.push(F),h=Math.max(h,F.frames[(O-1)*t.IkConstraintTimeline.ENTRIES])}for(p=0,T=i.readInt(!0);p<T;p++){N=i.readInt(!0),O=i.readInt(!0);(F=new t.TransformConstraintTimeline(O)).transformConstraintIndex=N;for(L=0;L<O;L++)F.setFrame(L,i.readFloat(),i.readFloat(),i.readFloat(),i.readFloat(),i.readFloat()),L<O-1&&this.readCurve(i,L,F);o.push(F),h=Math.max(h,F.frames[(O-1)*t.TransformConstraintTimeline.ENTRIES])}for(p=0,T=i.readInt(!0);p<T;p++){N=i.readInt(!0);var Y=r.pathConstraints[N];for(S=0,A=i.readInt(!0);S<A;S++){P=i.readByte(),O=i.readInt(!0);switch(P){case SkeletonBinary2.PATH_POSITION:case SkeletonBinary2.PATH_SPACING:F=void 0,B=1;P==SkeletonBinary2.PATH_SPACING?(F=new t.PathConstraintSpacingTimeline(O),Y.spacingMode!=t.SpacingMode.Length&&Y.spacingMode!=t.SpacingMode.Fixed||(B=a)):(F=new t.PathConstraintPositionTimeline(O),Y.positionMode==t.PositionMode.Fixed&&(B=a)),F.pathConstraintIndex=N;for(L=0;L<O;L++)F.setFrame(L,i.readFloat(),i.readFloat()*B),L<O-1&&this.readCurve(i,L,F);o.push(F),h=Math.max(h,F.frames[(O-1)*t.PathConstraintPositionTimeline.ENTRIES]);break;case SkeletonBinary2.PATH_MIX:(F=new t.PathConstraintMixTimeline(O)).pathConstraintIndex=N;for(L=0;L<O;L++)F.setFrame(L,i.readFloat(),i.readFloat(),i.readFloat()),L<O-1&&this.readCurve(i,L,F);o.push(F),h=Math.max(h,F.frames[(O-1)*t.PathConstraintMixTimeline.ENTRIES])}}}for(p=0,T=i.readInt(!0);p<T;p++){var X=r.skins[i.readInt(!0)];for(S=0,A=i.readInt(!0);S<A;S++){b=i.readInt(!0);for(var G=0,U=i.readInt(!0);G<U;G++){var V=X.getAttachment(b,i.readStringRef()),z=null!=V.bones,W=V.vertices,H=z?W.length/3*2:W.length;O=i.readInt(!0);(F=new t.DeformTimeline(O)).slotIndex=b,F.attachment=V;for(L=0;L<O;L++){D=i.readFloat();var q=void 0,Z=i.readInt(!0);if(0==Z)q=z?t.Utils.newFloatArray(H):W;else{q=t.Utils.newFloatArray(H);var K=i.readInt(!0);if(Z+=K,1==a)for(var J=K;J<Z;J++)q[J]=i.readFloat();else for(J=K;J<Z;J++)q[J]=i.readFloat()*a;if(!z){J=0;for(var Q=q.length;J<Q;J++)q[J]+=W[J]}}F.setFrame(L,D,q),L<O-1&&this.readCurve(i,L,F)}o.push(F),h=Math.max(h,F.frames[O-1])}}}var $=i.readInt(!0);if($>0){F=new t.DrawOrderTimeline($);var tt=r.slots.length;for(p=0;p<$;p++){D=i.readFloat();var et=i.readInt(!0),it=t.Utils.newArray(tt,0);for(S=tt-1;S>=0;S--)it[S]=-1;var nt=t.Utils.newArray(tt-et,0),st=0,rt=0;for(S=0;S<et;S++){for(b=i.readInt(!0);st!=b;)nt[rt++]=st++;it[st+i.readInt(!0)]=st++}for(;st<tt;)nt[rt++]=st++;for(S=tt-1;S>=0;S--)-1==it[S]&&(it[S]=nt[--rt]);F.setFrame(p,D,it)}o.push(F),h=Math.max(h,F.frames[$-1])}var ot=i.readInt(!0);if(ot>0){for(F=new t.EventTimeline(ot),p=0;p<ot;p++){D=i.readFloat();var at=r.events[i.readInt(!0)],ht=new t.Event(D,at);ht.intValue=i.readInt(!1),ht.floatValue=i.readFloat(),ht.stringValue=i.readBoolean()?i.readString():at.stringValue,null!=ht.data.audioPath&&(ht.volume=i.readFloat(),ht.balance=i.readFloat()),F.setFrame(p,ht)}o.push(F),h=Math.max(h,F.frames[ot-1])}return new t.Animation(n,o,h)},SkeletonBinary2.prototype.readCurve=function(t,i,n){switch(t.readByte()){case SkeletonBinary2.CURVE_STEPPED:n.setStepped(i);break;case SkeletonBinary2.CURVE_BEZIER:this.setCurve(n,i,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat())}},SkeletonBinary2.prototype.setCurve=function(t,i,n,r,o,a){t.setCurve(i,n,r,o,a)},SkeletonBinary2.AttachmentTypeValues=[0,1,2,3,4,5,6],SkeletonBinary2.TransformModeValues=[t.TransformMode.Normal,t.TransformMode.OnlyTranslation,t.TransformMode.NoRotationOrReflection,t.TransformMode.NoScale,t.TransformMode.NoScaleOrReflection],SkeletonBinary2.PositionModeValues=[t.PositionMode.Fixed,t.PositionMode.Percent],SkeletonBinary2.SpacingModeValues=[t.SpacingMode.Length,t.SpacingMode.Fixed,t.SpacingMode.Percent],SkeletonBinary2.RotateModeValues=[t.RotateMode.Tangent,t.RotateMode.Chain,t.RotateMode.ChainScale],SkeletonBinary2.BlendModeValues=[t.BlendMode.Normal,t.BlendMode.Additive,t.BlendMode.Multiply,t.BlendMode.Screen],SkeletonBinary2.BONE_ROTATE=0,SkeletonBinary2.BONE_TRANSLATE=1,SkeletonBinary2.BONE_SCALE=2,SkeletonBinary2.BONE_SHEAR=3,SkeletonBinary2.SLOT_ATTACHMENT=0,SkeletonBinary2.SLOT_COLOR=1,SkeletonBinary2.SLOT_TWO_COLOR=2,SkeletonBinary2.PATH_POSITION=0,SkeletonBinary2.PATH_SPACING=1,SkeletonBinary2.PATH_MIX=2,SkeletonBinary2.CURVE_LINEAR=0,SkeletonBinary2.CURVE_STEPPED=1,SkeletonBinary2.CURVE_BEZIER=2,SkeletonBinary2}();t.SkeletonBinary=i;var n=function(){function BinaryInput2(t,i,n,r){void 0===i&&(i=new Array),void 0===n&&(n=0),void 0===r&&(r=new DataView(t.buffer)),this.strings=i,this.index=n,this.buffer=r}return BinaryInput2.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},BinaryInput2.prototype.readShort=function(){var t=this.buffer.getInt16(this.index);return this.index+=2,t},BinaryInput2.prototype.readInt32=function(){var t=this.buffer.getInt32(this.index);return this.index+=4,t},BinaryInput2.prototype.readInt=function(t){var i=this.readByte(),n=127&i;return 0!=(128&i)&&(n|=(127&(i=this.readByte()))<<7,0!=(128&i)&&(n|=(127&(i=this.readByte()))<<14,0!=(128&i)&&(n|=(127&(i=this.readByte()))<<21,0!=(128&i)&&(n|=(127&(i=this.readByte()))<<28)))),t?n:n>>>1^-(1&n)},BinaryInput2.prototype.readStringRef=function(){var t=this.readInt(!0);return 0==t?null:this.strings[t-1]},BinaryInput2.prototype.readString=function(){var t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;for(var i="",n=0;n<t;){var r=this.readByte();switch(r>>4){case 12:case 13:i+=String.fromCharCode((31&r)<<6|63&this.readByte()),n+=2;break;case 14:i+=String.fromCharCode((15&r)<<12|(63&this.readByte())<<6|63&this.readByte()),n+=3;break;default:i+=String.fromCharCode(r),n++}}return i},BinaryInput2.prototype.readFloat=function(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t},BinaryInput2.prototype.readBoolean=function(){return 0!=this.readByte()},BinaryInput2}(),r=function LinkedMesh2(t,i,n,r,o){this.mesh=t,this.skin=i,this.slotIndex=n,this.parent=r,this.inheritDeform=o},o=function Vertices2(t,i){void 0===t&&(t=null),void 0===i&&(i=null),this.bones=t,this.vertices=i}}(a||(a={})),function(t){var i=function(){function SkeletonBounds2(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new t.Pool((function(){return t.Utils.newFloatArray(16)}))}return SkeletonBounds2.prototype.update=function(i,n){if(null==i)throw new Error("skeleton cannot be null.");var r=this.boundingBoxes,o=this.polygons,a=this.polygonPool,h=i.slots,d=h.length;r.length=0,a.freeAll(o),o.length=0;for(var f=0;f<d;f++){var p=h[f];if(p.bone.active){var T=p.getAttachment();if(T instanceof t.BoundingBoxAttachment){var b=T;r.push(b);var S=a.obtain();S.length!=b.worldVerticesLength&&(S=t.Utils.newFloatArray(b.worldVerticesLength)),o.push(S),b.computeWorldVertices(p,0,b.worldVerticesLength,S,0,2)}}}n?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},SkeletonBounds2.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=this.polygons,a=0,h=o.length;a<h;a++)for(var d=o[a],f=d,p=0,T=d.length;p<T;p+=2){var b=f[p],S=f[p+1];t=Math.min(t,b),i=Math.min(i,S),n=Math.max(n,b),r=Math.max(r,S)}this.minX=t,this.minY=i,this.maxX=n,this.maxY=r},SkeletonBounds2.prototype.aabbContainsPoint=function(t,i){return t>=this.minX&&t<=this.maxX&&i>=this.minY&&i<=this.maxY},SkeletonBounds2.prototype.aabbIntersectsSegment=function(t,i,n,r){var o=this.minX,a=this.minY,h=this.maxX,d=this.maxY;if(t<=o&&n<=o||i<=a&&r<=a||t>=h&&n>=h||i>=d&&r>=d)return!1;var f=(r-i)/(n-t),p=f*(o-t)+i;if(p>a&&p<d)return!0;if((p=f*(h-t)+i)>a&&p<d)return!0;var T=(a-i)/f+t;return T>o&&T<h||(T=(d-i)/f+t)>o&&T<h},SkeletonBounds2.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},SkeletonBounds2.prototype.containsPoint=function(t,i){for(var n=this.polygons,r=0,o=n.length;r<o;r++)if(this.containsPointPolygon(n[r],t,i))return this.boundingBoxes[r];return null},SkeletonBounds2.prototype.containsPointPolygon=function(t,i,n){for(var r=t,o=t.length,a=o-2,h=!1,d=0;d<o;d+=2){var f=r[d+1],p=r[a+1];if(f<n&&p>=n||p<n&&f>=n){var T=r[d];T+(n-f)/(p-f)*(r[a]-T)<i&&(h=!h)}a=d}return h},SkeletonBounds2.prototype.intersectsSegment=function(t,i,n,r){for(var o=this.polygons,a=0,h=o.length;a<h;a++)if(this.intersectsSegmentPolygon(o[a],t,i,n,r))return this.boundingBoxes[a];return null},SkeletonBounds2.prototype.intersectsSegmentPolygon=function(t,i,n,r,o){for(var a=t,h=t.length,d=i-r,f=n-o,p=i*o-n*r,T=a[h-2],b=a[h-1],S=0;S<h;S+=2){var A=a[S],P=a[S+1],O=T*P-b*A,L=T-A,D=b-P,I=d*D-f*L,F=(p*L-d*O)/I;if((F>=T&&F<=A||F>=A&&F<=T)&&(F>=i&&F<=r||F>=r&&F<=i)){var B=(p*D-f*O)/I;if((B>=b&&B<=P||B>=P&&B<=b)&&(B>=n&&B<=o||B>=o&&B<=n))return!0}T=A,b=P}return!1},SkeletonBounds2.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");var i=this.boundingBoxes.indexOf(t);return-1==i?null:this.polygons[i]},SkeletonBounds2.prototype.getWidth=function(){return this.maxX-this.minX},SkeletonBounds2.prototype.getHeight=function(){return this.maxY-this.minY},SkeletonBounds2}();t.SkeletonBounds=i}(a||(a={})),function(t){var i=function(){function SkeletonClipping2(){this.triangulator=new t.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}return SkeletonClipping2.prototype.clipStart=function(i,n){if(null!=this.clipAttachment)return 0;this.clipAttachment=n;var r=n.worldVerticesLength,o=t.Utils.setArraySize(this.clippingPolygon,r);n.computeWorldVertices(i,0,r,o,0,2);var a=this.clippingPolygon;SkeletonClipping2.makeClockwise(a);for(var h=this.clippingPolygons=this.triangulator.decompose(a,this.triangulator.triangulate(a)),d=0,f=h.length;d<f;d++){var p=h[d];SkeletonClipping2.makeClockwise(p),p.push(p[0]),p.push(p[1])}return h.length},SkeletonClipping2.prototype.clipEndWithSlot=function(t){null!=this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()},SkeletonClipping2.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},SkeletonClipping2.prototype.isClipping=function(){return null!=this.clipAttachment},SkeletonClipping2.prototype.clipTriangles=function(i,n,r,o,a,h,d,f){var p=this.clipOutput,T=this.clippedVertices,b=this.clippedTriangles,S=this.clippingPolygons,A=this.clippingPolygons.length,P=f?12:8,O=0;T.length=0,b.length=0;t:for(var L=0;L<o;L+=3)for(var D=r[L]<<1,I=i[D],F=i[D+1],B=a[D],N=a[D+1],Y=i[D=r[L+1]<<1],X=i[D+1],G=a[D],U=a[D+1],V=i[D=r[L+2]<<1],z=i[D+1],W=a[D],H=a[D+1],q=0;q<A;q++){var Z=T.length;if(!this.clip(I,F,Y,X,V,z,S[q],p)){(st=t.Utils.setArraySize(T,Z+3*P))[Z]=I,st[Z+1]=F,st[Z+2]=h.r,st[Z+3]=h.g,st[Z+4]=h.b,st[Z+5]=h.a,f?(st[Z+6]=B,st[Z+7]=N,st[Z+8]=d.r,st[Z+9]=d.g,st[Z+10]=d.b,st[Z+11]=d.a,st[Z+12]=Y,st[Z+13]=X,st[Z+14]=h.r,st[Z+15]=h.g,st[Z+16]=h.b,st[Z+17]=h.a,st[Z+18]=G,st[Z+19]=U,st[Z+20]=d.r,st[Z+21]=d.g,st[Z+22]=d.b,st[Z+23]=d.a,st[Z+24]=V,st[Z+25]=z,st[Z+26]=h.r,st[Z+27]=h.g,st[Z+28]=h.b,st[Z+29]=h.a,st[Z+30]=W,st[Z+31]=H,st[Z+32]=d.r,st[Z+33]=d.g,st[Z+34]=d.b,st[Z+35]=d.a):(st[Z+6]=B,st[Z+7]=N,st[Z+8]=Y,st[Z+9]=X,st[Z+10]=h.r,st[Z+11]=h.g,st[Z+12]=h.b,st[Z+13]=h.a,st[Z+14]=G,st[Z+15]=U,st[Z+16]=V,st[Z+17]=z,st[Z+18]=h.r,st[Z+19]=h.g,st[Z+20]=h.b,st[Z+21]=h.a,st[Z+22]=W,st[Z+23]=H),Z=b.length,(ft=t.Utils.setArraySize(b,Z+3))[Z]=O,ft[Z+1]=O+1,ft[Z+2]=O+2,O+=3;continue t}var K=p.length;if(0!=K){for(var J=X-z,Q=V-Y,$=I-V,tt=z-F,et=1/(J*$+Q*(F-z)),it=K>>1,nt=this.clipOutput,st=t.Utils.setArraySize(T,Z+it*P),rt=0;rt<K;rt+=2){var ot=nt[rt],at=nt[rt+1];st[Z]=ot,st[Z+1]=at,st[Z+2]=h.r,st[Z+3]=h.g,st[Z+4]=h.b,st[Z+5]=h.a;var ht=ot-V,lt=at-z,ut=(J*ht+Q*lt)*et,ct=(tt*ht+$*lt)*et,dt=1-ut-ct;st[Z+6]=B*ut+G*ct+W*dt,st[Z+7]=N*ut+U*ct+H*dt,f&&(st[Z+8]=d.r,st[Z+9]=d.g,st[Z+10]=d.b,st[Z+11]=d.a),Z+=P}Z=b.length;var ft=t.Utils.setArraySize(b,Z+3*(it-2));it--;for(rt=1;rt<it;rt++)ft[Z]=O,ft[Z+1]=O+rt,ft[Z+2]=O+rt+1,Z+=3;O+=it+1}}},SkeletonClipping2.prototype.clip=function(t,i,n,r,o,a,h,d){var f=d,p=!1,T=null;h.length%4>=2?(T=d,d=this.scratch):T=this.scratch,T.length=0,T.push(t),T.push(i),T.push(n),T.push(r),T.push(o),T.push(a),T.push(t),T.push(i),d.length=0;for(var b=h,S=h.length-4,A=0;;A+=2){for(var P=b[A],O=b[A+1],L=b[A+2],D=b[A+3],I=P-L,F=O-D,B=T,N=T.length-2,Y=d.length,X=0;X<N;X+=2){var G=B[X],U=B[X+1],V=B[X+2],z=B[X+3],W=I*(z-D)-F*(V-L)>0;if(I*(U-D)-F*(G-L)>0){if(W){d.push(V),d.push(z);continue}var H=(Z=z-U)*(L-P)-(K=V-G)*(D-O);if(Math.abs(H)>1e-6){var q=(K*(O-U)-Z*(P-G))/H;d.push(P+(L-P)*q),d.push(O+(D-O)*q)}else d.push(P),d.push(O)}else if(W){var Z,K;H=(Z=z-U)*(L-P)-(K=V-G)*(D-O);if(Math.abs(H)>1e-6){q=(K*(O-U)-Z*(P-G))/H;d.push(P+(L-P)*q),d.push(O+(D-O)*q)}else d.push(P),d.push(O);d.push(V),d.push(z)}p=!0}if(Y==d.length)return f.length=0,!0;if(d.push(d[0]),d.push(d[1]),A==S)break;var J=d;(d=T).length=0,T=J}if(f!=d){f.length=0;A=0;for(var Q=d.length-2;A<Q;A++)f[A]=d[A]}else f.length=f.length-2;return p},SkeletonClipping2.makeClockwise=function(t){for(var i=t,n=t.length,r=i[n-2]*i[1]-i[0]*i[n-1],o=0,a=0,h=0,d=0,f=n-3;d<f;d+=2)o=i[d],a=i[d+1],h=i[d+2],r+=o*i[d+3]-h*a;if(!(r<0)){d=0;var p=n-2;for(f=n>>1;d<f;d+=2){var T=i[d],b=i[d+1],S=p-d;i[d]=i[S],i[d+1]=i[S+1],i[S]=T,i[S+1]=b}}},SkeletonClipping2}();t.SkeletonClipping=i}(a||(a={})),function(t){var i=function(){function SkeletonData2(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return SkeletonData2.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var i=this.bones,n=0,r=i.length;n<r;n++){var o=i[n];if(o.name==t)return o}return null},SkeletonData2.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var i=this.bones,n=0,r=i.length;n<r;n++)if(i[n].name==t)return n;return-1},SkeletonData2.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var i=this.slots,n=0,r=i.length;n<r;n++){var o=i[n];if(o.name==t)return o}return null},SkeletonData2.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var i=this.slots,n=0,r=i.length;n<r;n++)if(i[n].name==t)return n;return-1},SkeletonData2.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var i=this.skins,n=0,r=i.length;n<r;n++){var o=i[n];if(o.name==t)return o}return null},SkeletonData2.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var i=this.events,n=0,r=i.length;n<r;n++){var o=i[n];if(o.name==t)return o}return null},SkeletonData2.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var i=this.animations,n=0,r=i.length;n<r;n++){var o=i[n];if(o.name==t)return o}return null},SkeletonData2.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var i=this.ikConstraints,n=0,r=i.length;n<r;n++){var o=i[n];if(o.name==t)return o}return null},SkeletonData2.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var i=this.transformConstraints,n=0,r=i.length;n<r;n++){var o=i[n];if(o.name==t)return o}return null},SkeletonData2.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var i=this.pathConstraints,n=0,r=i.length;n<r;n++){var o=i[n];if(o.name==t)return o}return null},SkeletonData2.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var i=this.pathConstraints,n=0,r=i.length;n<r;n++)if(i[n].name==t)return n;return-1},SkeletonData2}();t.SkeletonData=i}(a||(a={})),function(t){var i=function(){function SkeletonJson2(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return SkeletonJson2.prototype.readSkeletonData=function(i){var n=this.scale,r=new t.SkeletonData,o="string"==typeof i?JSON.parse(i):i,a=o.skeleton;if(null!=a){if(r.hash=a.hash,r.version=a.spine,"3.8.75"==r.version)throw new Error("Unsupported skeleton data, please export with a newer version of Spine.");r.x=a.x,r.y=a.y,r.width=a.width,r.height=a.height,r.fps=a.fps,r.imagesPath=a.images}if(o.bones)for(var h=0;h<o.bones.length;h++){var d=o.bones[h],f=null,p=this.getValue(d,"parent",null);if(null!=p&&null==(f=r.findBone(p)))throw new Error("Parent bone not found: "+p);(A=new t.BoneData(r.bones.length,d.name,f)).length=this.getValue(d,"length",0)*n,A.x=this.getValue(d,"x",0)*n,A.y=this.getValue(d,"y",0)*n,A.rotation=this.getValue(d,"rotation",0),A.scaleX=this.getValue(d,"scaleX",1),A.scaleY=this.getValue(d,"scaleY",1),A.shearX=this.getValue(d,"shearX",0),A.shearY=this.getValue(d,"shearY",0),A.transformMode=SkeletonJson2.transformModeFromString(this.getValue(d,"transform","normal")),A.skinRequired=this.getValue(d,"skin",!1),r.bones.push(A)}if(o.slots)for(h=0;h<o.slots.length;h++){var T=(U=o.slots[h]).name,b=U.bone,S=r.findBone(b);if(null==S)throw new Error("Slot bone not found: "+b);var A=new t.SlotData(r.slots.length,T,S),P=this.getValue(U,"color",null);null!=P&&A.color.setFromString(P);var O=this.getValue(U,"dark",null);null!=O&&(A.darkColor=new t.Color(1,1,1,1),A.darkColor.setFromString(O)),A.attachmentName=this.getValue(U,"attachment",null),A.blendMode=SkeletonJson2.blendModeFromString(this.getValue(U,"blend","normal")),r.slots.push(A)}if(o.ik)for(h=0;h<o.ik.length;h++){var L=o.ik[h];(A=new t.IkConstraintData(L.name)).order=this.getValue(L,"order",0),A.skinRequired=this.getValue(L,"skin",!1);for(var D=0;D<L.bones.length;D++){b=L.bones[D];if(null==(Y=r.findBone(b)))throw new Error("IK bone not found: "+b);A.bones.push(Y)}var I=L.target;if(A.target=r.findBone(I),null==A.target)throw new Error("IK target bone not found: "+I);A.mix=this.getValue(L,"mix",1),A.softness=this.getValue(L,"softness",0)*n,A.bendDirection=this.getValue(L,"bendPositive",!0)?1:-1,A.compress=this.getValue(L,"compress",!1),A.stretch=this.getValue(L,"stretch",!1),A.uniform=this.getValue(L,"uniform",!1),r.ikConstraints.push(A)}if(o.transform)for(h=0;h<o.transform.length;h++){L=o.transform[h];(A=new t.TransformConstraintData(L.name)).order=this.getValue(L,"order",0),A.skinRequired=this.getValue(L,"skin",!1);for(D=0;D<L.bones.length;D++){b=L.bones[D];if(null==(Y=r.findBone(b)))throw new Error("Transform constraint bone not found: "+b);A.bones.push(Y)}I=L.target;if(A.target=r.findBone(I),null==A.target)throw new Error("Transform constraint target bone not found: "+I);A.local=this.getValue(L,"local",!1),A.relative=this.getValue(L,"relative",!1),A.offsetRotation=this.getValue(L,"rotation",0),A.offsetX=this.getValue(L,"x",0)*n,A.offsetY=this.getValue(L,"y",0)*n,A.offsetScaleX=this.getValue(L,"scaleX",0),A.offsetScaleY=this.getValue(L,"scaleY",0),A.offsetShearY=this.getValue(L,"shearY",0),A.rotateMix=this.getValue(L,"rotateMix",1),A.translateMix=this.getValue(L,"translateMix",1),A.scaleMix=this.getValue(L,"scaleMix",1),A.shearMix=this.getValue(L,"shearMix",1),r.transformConstraints.push(A)}if(o.path)for(h=0;h<o.path.length;h++){L=o.path[h];(A=new t.PathConstraintData(L.name)).order=this.getValue(L,"order",0),A.skinRequired=this.getValue(L,"skin",!1);for(D=0;D<L.bones.length;D++){b=L.bones[D];if(null==(Y=r.findBone(b)))throw new Error("Transform constraint bone not found: "+b);A.bones.push(Y)}I=L.target;if(A.target=r.findSlot(I),null==A.target)throw new Error("Path target slot not found: "+I);A.positionMode=SkeletonJson2.positionModeFromString(this.getValue(L,"positionMode","percent")),A.spacingMode=SkeletonJson2.spacingModeFromString(this.getValue(L,"spacingMode","length")),A.rotateMode=SkeletonJson2.rotateModeFromString(this.getValue(L,"rotateMode","tangent")),A.offsetRotation=this.getValue(L,"rotation",0),A.position=this.getValue(L,"position",0),A.positionMode==t.PositionMode.Fixed&&(A.position*=n),A.spacing=this.getValue(L,"spacing",0),A.spacingMode!=t.SpacingMode.Length&&A.spacingMode!=t.SpacingMode.Fixed||(A.spacing*=n),A.rotateMix=this.getValue(L,"rotateMix",1),A.translateMix=this.getValue(L,"translateMix",1),r.pathConstraints.push(A)}if(o.skins)for(h=0;h<o.skins.length;h++){var F=o.skins[h],B=new t.Skin(F.name);if(F.bones)for(var N=0;N<F.bones.length;N++){var Y;if(null==(Y=r.findBone(F.bones[N])))throw new Error("Skin bone not found: "+F.bones[h]);B.bones.push(Y)}if(F.ik)for(N=0;N<F.ik.length;N++){if(null==(X=r.findIkConstraint(F.ik[N])))throw new Error("Skin IK constraint not found: "+F.ik[h]);B.constraints.push(X)}if(F.transform)for(N=0;N<F.transform.length;N++){if(null==(X=r.findTransformConstraint(F.transform[N])))throw new Error("Skin transform constraint not found: "+F.transform[h]);B.constraints.push(X)}if(F.path)for(N=0;N<F.path.length;N++){var X;if(null==(X=r.findPathConstraint(F.path[N])))throw new Error("Skin path constraint not found: "+F.path[h]);B.constraints.push(X)}for(var T in F.attachments){var G=r.findSlot(T);if(null==G)throw new Error("Slot not found: "+T);var U=F.attachments[T];for(var V in U){var z=this.readAttachment(U[V],B,G.index,V,r);null!=z&&B.setAttachment(G.index,V,z)}}r.skins.push(B),"default"==B.name&&(r.defaultSkin=B)}h=0;for(var W=this.linkedMeshes.length;h<W;h++){var H=this.linkedMeshes[h];if(null==(B=null==H.skin?r.defaultSkin:r.findSkin(H.skin)))throw new Error("Skin not found: "+H.skin);var q=B.getAttachment(H.slotIndex,H.parent);if(null==q)throw new Error("Parent mesh not found: "+H.parent);H.mesh.deformAttachment=H.inheritDeform?q:H.mesh,H.mesh.setParentMesh(q),H.mesh.updateUVs()}if(this.linkedMeshes.length=0,o.events)for(var Z in o.events){var K=o.events[Z];(A=new t.EventData(Z)).intValue=this.getValue(K,"int",0),A.floatValue=this.getValue(K,"float",0),A.stringValue=this.getValue(K,"string",""),A.audioPath=this.getValue(K,"audio",null),null!=A.audioPath&&(A.volume=this.getValue(K,"volume",1),A.balance=this.getValue(K,"balance",0)),r.events.push(A)}if(o.animations)for(var J in o.animations){var Q=o.animations[J];this.readAnimation(Q,J,r)}return r},SkeletonJson2.prototype.readAttachment=function(i,r,o,a,h){var d=this.scale;switch(a=this.getValue(i,"name",a),this.getValue(i,"type","region")){case"region":var f=this.getValue(i,"path",a),p=this.attachmentLoader.newRegionAttachment(r,a,f);return null==p?null:(p.path=f,p.x=this.getValue(i,"x",0)*d,p.y=this.getValue(i,"y",0)*d,p.scaleX=this.getValue(i,"scaleX",1),p.scaleY=this.getValue(i,"scaleY",1),p.rotation=this.getValue(i,"rotation",0),p.width=i.width*d,p.height=i.height*d,null!=(N=this.getValue(i,"color",null))&&p.color.setFromString(N),p.updateOffset(),p);case"boundingbox":var T=this.attachmentLoader.newBoundingBoxAttachment(r,a);return null==T?null:(this.readVertices(i,T,i.vertexCount<<1),null!=(N=this.getValue(i,"color",null))&&T.color.setFromString(N),T);case"mesh":case"linkedmesh":f=this.getValue(i,"path",a);var b=this.attachmentLoader.newMeshAttachment(r,a,f);if(null==b)return null;b.path=f,null!=(N=this.getValue(i,"color",null))&&b.color.setFromString(N),b.width=this.getValue(i,"width",0)*d,b.height=this.getValue(i,"height",0)*d;var S=this.getValue(i,"parent",null);if(null!=S)return this.linkedMeshes.push(new n(b,this.getValue(i,"skin",null),o,S,this.getValue(i,"deform",!0))),b;var A=i.uvs;return this.readVertices(i,b,A.length),b.triangles=i.triangles,b.regionUVs=A,b.updateUVs(),b.edges=this.getValue(i,"edges",null),b.hullLength=2*this.getValue(i,"hull",0),b;case"path":if(null==(f=this.attachmentLoader.newPathAttachment(r,a)))return null;f.closed=this.getValue(i,"closed",!1),f.constantSpeed=this.getValue(i,"constantSpeed",!0);var P=i.vertexCount;this.readVertices(i,f,P<<1);for(var O=t.Utils.newArray(P/3,0),L=0;L<i.lengths.length;L++)O[L]=i.lengths[L]*d;return f.lengths=O,null!=(N=this.getValue(i,"color",null))&&f.color.setFromString(N),f;case"point":var D=this.attachmentLoader.newPointAttachment(r,a);return null==D?null:(D.x=this.getValue(i,"x",0)*d,D.y=this.getValue(i,"y",0)*d,D.rotation=this.getValue(i,"rotation",0),null!=(N=this.getValue(i,"color",null))&&D.color.setFromString(N),D);case"clipping":var I=this.attachmentLoader.newClippingAttachment(r,a);if(null==I)return null;var F=this.getValue(i,"end",null);if(null!=F){var B=h.findSlot(F);if(null==B)throw new Error("Clipping end slot not found: "+F);I.endSlot=B}var N;P=i.vertexCount;return this.readVertices(i,I,P<<1),null!=(N=this.getValue(i,"color",null))&&I.color.setFromString(N),I}return null},SkeletonJson2.prototype.readVertices=function(i,n,r){var o=this.scale;n.worldVerticesLength=r;var a=i.vertices;if(r!=a.length){var h=new Array,d=new Array;for(b=0,S=a.length;b<S;){var f=a[b++];d.push(f);for(var p=b+4*f;b<p;b+=4)d.push(a[b]),h.push(a[b+1]*o),h.push(a[b+2]*o),h.push(a[b+3])}n.bones=d,n.vertices=t.Utils.toFloatArray(h)}else{var T=t.Utils.toFloatArray(a);if(1!=o)for(var b=0,S=a.length;b<S;b++)T[b]*=o;n.vertices=T}},SkeletonJson2.prototype.readAnimation=function(i,n,r){var o=this.scale,a=new Array,h=0;if(i.slots)for(var d in i.slots){var f=i.slots[d];if(-1==(pt=r.findSlotIndex(d)))throw new Error("Slot not found: "+d);for(var p in f){var T=f[p];if("attachment"==p){(B=new t.AttachmentTimeline(T.length)).slotIndex=pt;for(var b=0,S=0;S<T.length;S++){var A=T[S];B.setFrame(b++,this.getValue(A,"time",0),A.name)}a.push(B),h=Math.max(h,B.frames[B.getFrameCount()-1])}else if("color"==p){(B=new t.ColorTimeline(T.length)).slotIndex=pt;for(b=0,S=0;S<T.length;S++){A=T[S];var P=new t.Color;P.setFromString(A.color),B.setFrame(b,this.getValue(A,"time",0),P.r,P.g,P.b,P.a),this.readCurve(A,B,b),b++}a.push(B),h=Math.max(h,B.frames[(B.getFrameCount()-1)*t.ColorTimeline.ENTRIES])}else{if("twoColor"!=p)throw new Error("Invalid timeline type for a slot: "+p+" ("+d+")");(B=new t.TwoColorTimeline(T.length)).slotIndex=pt;for(b=0,S=0;S<T.length;S++){A=T[S];var O=new t.Color,L=new t.Color;O.setFromString(A.light),L.setFromString(A.dark),B.setFrame(b,this.getValue(A,"time",0),O.r,O.g,O.b,O.a,L.r,L.g,L.b),this.readCurve(A,B,b),b++}a.push(B),h=Math.max(h,B.frames[(B.getFrameCount()-1)*t.TwoColorTimeline.ENTRIES])}}}if(i.bones)for(var D in i.bones){var I=i.bones[D],F=r.findBoneIndex(D);if(-1==F)throw new Error("Bone not found: "+D);for(var p in I){T=I[p];if("rotate"===p){(B=new t.RotateTimeline(T.length)).boneIndex=F;for(b=0,S=0;S<T.length;S++){A=T[S];B.setFrame(b,this.getValue(A,"time",0),this.getValue(A,"angle",0)),this.readCurve(A,B,b),b++}a.push(B),h=Math.max(h,B.frames[(B.getFrameCount()-1)*t.RotateTimeline.ENTRIES])}else{if("translate"!==p&&"scale"!==p&&"shear"!==p)throw new Error("Invalid timeline type for a bone: "+p+" ("+D+")");var B=null,N=1,Y=0;"scale"===p?(B=new t.ScaleTimeline(T.length),Y=1):"shear"===p?B=new t.ShearTimeline(T.length):(B=new t.TranslateTimeline(T.length),N=o),B.boneIndex=F;for(b=0,S=0;S<T.length;S++){A=T[S];var X=this.getValue(A,"x",Y),G=this.getValue(A,"y",Y);B.setFrame(b,this.getValue(A,"time",0),X*N,G*N),this.readCurve(A,B,b),b++}a.push(B),h=Math.max(h,B.frames[(B.getFrameCount()-1)*t.TranslateTimeline.ENTRIES])}}}if(i.ik)for(var U in i.ik){var V=i.ik[U],z=r.findIkConstraint(U);(B=new t.IkConstraintTimeline(V.length)).ikConstraintIndex=r.ikConstraints.indexOf(z);for(b=0,S=0;S<V.length;S++){A=V[S];B.setFrame(b,this.getValue(A,"time",0),this.getValue(A,"mix",1),this.getValue(A,"softness",0)*o,this.getValue(A,"bendPositive",!0)?1:-1,this.getValue(A,"compress",!1),this.getValue(A,"stretch",!1)),this.readCurve(A,B,b),b++}a.push(B),h=Math.max(h,B.frames[(B.getFrameCount()-1)*t.IkConstraintTimeline.ENTRIES])}if(i.transform)for(var U in i.transform){V=i.transform[U],z=r.findTransformConstraint(U);(B=new t.TransformConstraintTimeline(V.length)).transformConstraintIndex=r.transformConstraints.indexOf(z);for(b=0,S=0;S<V.length;S++){A=V[S];B.setFrame(b,this.getValue(A,"time",0),this.getValue(A,"rotateMix",1),this.getValue(A,"translateMix",1),this.getValue(A,"scaleMix",1),this.getValue(A,"shearMix",1)),this.readCurve(A,B,b),b++}a.push(B),h=Math.max(h,B.frames[(B.getFrameCount()-1)*t.TransformConstraintTimeline.ENTRIES])}if(i.path)for(var U in i.path){V=i.path[U];var W=r.findPathConstraintIndex(U);if(-1==W)throw new Error("Path constraint not found: "+U);var H=r.pathConstraints[W];for(var p in V){T=V[p];if("position"===p||"spacing"===p){B=null,N=1;"spacing"===p?(B=new t.PathConstraintSpacingTimeline(T.length),H.spacingMode!=t.SpacingMode.Length&&H.spacingMode!=t.SpacingMode.Fixed||(N=o)):(B=new t.PathConstraintPositionTimeline(T.length),H.positionMode==t.PositionMode.Fixed&&(N=o)),B.pathConstraintIndex=W;for(b=0,S=0;S<T.length;S++){A=T[S];B.setFrame(b,this.getValue(A,"time",0),this.getValue(A,p,0)*N),this.readCurve(A,B,b),b++}a.push(B),h=Math.max(h,B.frames[(B.getFrameCount()-1)*t.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===p){(B=new t.PathConstraintMixTimeline(T.length)).pathConstraintIndex=W;for(b=0,S=0;S<T.length;S++){A=T[S];B.setFrame(b,this.getValue(A,"time",0),this.getValue(A,"rotateMix",1),this.getValue(A,"translateMix",1)),this.readCurve(A,B,b),b++}a.push(B),h=Math.max(h,B.frames[(B.getFrameCount()-1)*t.PathConstraintMixTimeline.ENTRIES])}}}if(i.deform)for(var q in i.deform){var Z=i.deform[q],K=r.findSkin(q);if(null==K)throw new Error("Skin not found: "+q);for(var d in Z){f=Z[d];if(-1==(pt=r.findSlotIndex(d)))throw new Error("Slot not found: "+f.name);for(var p in f){T=f[p];var J=K.getAttachment(pt,p);if(null==J)throw new Error("Deform attachment not found: "+T.name);var Q=null!=J.bones,$=J.vertices,tt=Q?$.length/3*2:$.length;(B=new t.DeformTimeline(T.length)).slotIndex=pt,B.attachment=J;b=0;for(var et=0;et<T.length;et++){A=T[et];var it=void 0,nt=this.getValue(A,"vertices",null);if(null==nt)it=Q?t.Utils.newFloatArray(tt):$;else{it=t.Utils.newFloatArray(tt);var st=this.getValue(A,"offset",0);if(t.Utils.arrayCopy(nt,0,it,st,nt.length),1!=o)for(var rt=(S=st)+nt.length;S<rt;S++)it[S]*=o;if(!Q)for(S=0;S<tt;S++)it[S]+=$[S]}B.setFrame(b,this.getValue(A,"time",0),it),this.readCurve(A,B,b),b++}a.push(B),h=Math.max(h,B.frames[B.getFrameCount()-1])}}}var ot=i.drawOrder;if(null==ot&&(ot=i.draworder),null!=ot){B=new t.DrawOrderTimeline(ot.length);var at=r.slots.length;for(b=0,et=0;et<ot.length;et++){var ht=ot[et],lt=null,ut=this.getValue(ht,"offsets",null);if(null!=ut){lt=t.Utils.newArray(at,-1);var ct=t.Utils.newArray(at-ut.length,0),dt=0,ft=0;for(S=0;S<ut.length;S++){var pt,gt=ut[S];if(-1==(pt=r.findSlotIndex(gt.slot)))throw new Error("Slot not found: "+gt.slot);for(;dt!=pt;)ct[ft++]=dt++;lt[dt+gt.offset]=dt++}for(;dt<at;)ct[ft++]=dt++;for(S=at-1;S>=0;S--)-1==lt[S]&&(lt[S]=ct[--ft])}B.setFrame(b++,this.getValue(ht,"time",0),lt)}a.push(B),h=Math.max(h,B.frames[B.getFrameCount()-1])}if(i.events){for(B=new t.EventTimeline(i.events.length),b=0,S=0;S<i.events.length;S++){var vt=i.events[S],mt=r.findEvent(vt.name);if(null==mt)throw new Error("Event not found: "+vt.name);var yt=new t.Event(t.Utils.toSinglePrecision(this.getValue(vt,"time",0)),mt);yt.intValue=this.getValue(vt,"int",mt.intValue),yt.floatValue=this.getValue(vt,"float",mt.floatValue),yt.stringValue=this.getValue(vt,"string",mt.stringValue),null!=yt.data.audioPath&&(yt.volume=this.getValue(vt,"volume",1),yt.balance=this.getValue(vt,"balance",0)),B.setFrame(b++,yt)}a.push(B),h=Math.max(h,B.frames[B.getFrameCount()-1])}if(isNaN(h))throw new Error("Error while parsing animation, duration is NaN");r.animations.push(new t.Animation(n,a,h))},SkeletonJson2.prototype.readCurve=function(t,i,n){if(t.hasOwnProperty("curve"))if("stepped"==t.curve)i.setStepped(n);else{var r=t.curve;i.setCurve(n,r,this.getValue(t,"c2",0),this.getValue(t,"c3",1),this.getValue(t,"c4",1))}},SkeletonJson2.prototype.getValue=function(t,i,n){return void 0!==t[i]?t[i]:n},SkeletonJson2.blendModeFromString=function(i){if("normal"==(i=i.toLowerCase()))return t.BlendMode.Normal;if("additive"==i)return t.BlendMode.Additive;if("multiply"==i)return t.BlendMode.Multiply;if("screen"==i)return t.BlendMode.Screen;throw new Error("Unknown blend mode: "+i)},SkeletonJson2.positionModeFromString=function(i){if("fixed"==(i=i.toLowerCase()))return t.PositionMode.Fixed;if("percent"==i)return t.PositionMode.Percent;throw new Error("Unknown position mode: "+i)},SkeletonJson2.spacingModeFromString=function(i){if("length"==(i=i.toLowerCase()))return t.SpacingMode.Length;if("fixed"==i)return t.SpacingMode.Fixed;if("percent"==i)return t.SpacingMode.Percent;throw new Error("Unknown position mode: "+i)},SkeletonJson2.rotateModeFromString=function(i){if("tangent"==(i=i.toLowerCase()))return t.RotateMode.Tangent;if("chain"==i)return t.RotateMode.Chain;if("chainscale"==i)return t.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+i)},SkeletonJson2.transformModeFromString=function(i){if("normal"==(i=i.toLowerCase()))return t.TransformMode.Normal;if("onlytranslation"==i)return t.TransformMode.OnlyTranslation;if("norotationorreflection"==i)return t.TransformMode.NoRotationOrReflection;if("noscale"==i)return t.TransformMode.NoScale;if("noscaleorreflection"==i)return t.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+i)},SkeletonJson2}();t.SkeletonJson=i;var n=function LinkedMesh2(t,i,n,r,o){this.mesh=t,this.skin=i,this.slotIndex=n,this.parent=r,this.inheritDeform=o}}(a||(a={})),function(t){var i=function SkinEntry2(t,i,n){this.slotIndex=t,this.name=i,this.attachment=n};t.SkinEntry=i;var n=function(){function Skin2(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,null==t)throw new Error("name cannot be null.");this.name=t}return Skin2.prototype.setAttachment=function(t,i,n){if(null==n)throw new Error("attachment cannot be null.");var r=this.attachments;t>=r.length&&(r.length=t+1),r[t]||(r[t]={}),r[t][i]=n},Skin2.prototype.addSkin=function(t){for(var i=0;i<t.bones.length;i++){for(var n=t.bones[i],r=!1,o=0;o<this.bones.length;o++)if(this.bones[o]==n){r=!0;break}r||this.bones.push(n)}for(i=0;i<t.constraints.length;i++){var a=t.constraints[i];for(r=!1,o=0;o<this.constraints.length;o++)if(this.constraints[o]==a){r=!0;break}r||this.constraints.push(a)}var h=t.getAttachments();for(i=0;i<h.length;i++){var d=h[i];this.setAttachment(d.slotIndex,d.name,d.attachment)}},Skin2.prototype.copySkin=function(i){for(var n=0;n<i.bones.length;n++){for(var r=i.bones[n],o=!1,a=0;a<this.bones.length;a++)if(this.bones[a]==r){o=!0;break}o||this.bones.push(r)}for(n=0;n<i.constraints.length;n++){var h=i.constraints[n];for(o=!1,a=0;a<this.constraints.length;a++)if(this.constraints[a]==h){o=!0;break}o||this.constraints.push(h)}var d=i.getAttachments();for(n=0;n<d.length;n++){var f=d[n];null!=f.attachment&&(f.attachment instanceof t.MeshAttachment?(f.attachment=f.attachment.newLinkedMesh(),this.setAttachment(f.slotIndex,f.name,f.attachment)):(f.attachment=f.attachment.copy(),this.setAttachment(f.slotIndex,f.name,f.attachment)))}},Skin2.prototype.getAttachment=function(t,i){var n=this.attachments[t];return n?n[i]:null},Skin2.prototype.removeAttachment=function(t,i){var n=this.attachments[t];n&&(n[i]=null)},Skin2.prototype.getAttachments=function(){for(var t=new Array,n=0;n<this.attachments.length;n++){var r=this.attachments[n];if(r)for(var o in r){var a=r[o];a&&t.push(new i(n,o,a))}}return t},Skin2.prototype.getAttachmentsForSlot=function(t,n){var r=this.attachments[t];if(r)for(var o in r){var a=r[o];a&&n.push(new i(t,o,a))}},Skin2.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},Skin2.prototype.attachAll=function(t,i){for(var n=0,r=0;r<t.slots.length;r++){var o=t.slots[r],a=o.getAttachment();if(a&&n<i.attachments.length){var h=i.attachments[n];for(var d in h){if(a==h[d]){var f=this.getAttachment(n,d);null!=f&&o.setAttachment(f);break}}}n++}},Skin2}();t.Skin=n}(a||(a={})),function(t){var i=function(){function Slot2(i,n){if(this.deform=new Array,null==i)throw new Error("data cannot be null.");if(null==n)throw new Error("bone cannot be null.");this.data=i,this.bone=n,this.color=new t.Color,this.darkColor=null==i.darkColor?null:new t.Color,this.setToSetupPose()}return Slot2.prototype.getSkeleton=function(){return this.bone.skeleton},Slot2.prototype.getAttachment=function(){return this.attachment},Slot2.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},Slot2.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},Slot2.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},Slot2.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},Slot2}();t.Slot=i}(a||(a={})),function(t){var i=function SlotData2(i,n,r){if(this.color=new t.Color(1,1,1,1),i<0)throw new Error("index must be >= 0.");if(null==n)throw new Error("name cannot be null.");if(null==r)throw new Error("boneData cannot be null.");this.index=i,this.name=n,this.boneData=r};t.SlotData=i}(a||(a={})),function(t){var i,n,r,o,a=function(){function Texture2(t){this._image=t}return Texture2.prototype.getImage=function(){return this._image},Texture2.filterFromString=function(t){switch(t.toLowerCase()){case"nearest":return i.Nearest;case"linear":return i.Linear;case"mipmap":return i.MipMap;case"mipmapnearestnearest":return i.MipMapNearestNearest;case"mipmaplinearnearest":return i.MipMapLinearNearest;case"mipmapnearestlinear":return i.MipMapNearestLinear;case"mipmaplinearlinear":return i.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}},Texture2.wrapFromString=function(t){switch(t.toLowerCase()){case"mirroredtepeat":return r.MirroredRepeat;case"clamptoedge":return r.ClampToEdge;case"repeat":return r.Repeat;default:throw new Error("Unknown texture wrap "+t)}},Texture2}();t.Texture=a,(n=i=t.TextureFilter||(t.TextureFilter={}))[n.Nearest=9728]="Nearest",n[n.Linear=9729]="Linear",n[n.MipMap=9987]="MipMap",n[n.MipMapNearestNearest=9984]="MipMapNearestNearest",n[n.MipMapLinearNearest=9985]="MipMapLinearNearest",n[n.MipMapNearestLinear=9986]="MipMapNearestLinear",n[n.MipMapLinearLinear=9987]="MipMapLinearLinear",(o=r=t.TextureWrap||(t.TextureWrap={}))[o.MirroredRepeat=33648]="MirroredRepeat",o[o.ClampToEdge=33071]="ClampToEdge",o[o.Repeat=10497]="Repeat";var d=function TextureRegion2(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.rotate=!1,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0};t.TextureRegion=d;var f=function(t){function FakeTexture2(){return null!==t&&t.apply(this,arguments)||this}return h(FakeTexture2,t),FakeTexture2.prototype.setFilters=function(t,i){},FakeTexture2.prototype.setWraps=function(t,i){},FakeTexture2.prototype.dispose=function(){},FakeTexture2}(a);t.FakeTexture=f}(a||(a={})),function(t){var i=function(){function TextureAtlas2(t,i){this.pages=new Array,this.regions=new Array,this.load(t,i)}return TextureAtlas2.prototype.load=function(i,a){if(null==a)throw new Error("textureLoader cannot be null.");for(var h=new n(i),d=new Array(4),f=null;;){var p=h.readLine();if(null==p)break;if(0==(p=p.trim()).length)f=null;else if(f){var T=new o;T.name=p,T.page=f;var b=h.readValue();"true"==b.toLocaleLowerCase()?T.degrees=90:"false"==b.toLocaleLowerCase()?T.degrees=0:T.degrees=parseFloat(b),T.rotate=90==T.degrees,h.readTuple(d);var S=parseInt(d[0]),A=parseInt(d[1]);h.readTuple(d);var P=parseInt(d[0]),O=parseInt(d[1]);T.u=S/f.width,T.v=A/f.height,T.rotate?(T.u2=(S+O)/f.width,T.v2=(A+P)/f.height):(T.u2=(S+P)/f.width,T.v2=(A+O)/f.height),T.x=S,T.y=A,T.width=Math.abs(P),T.height=Math.abs(O),4==h.readTuple(d)&&4==h.readTuple(d)&&h.readTuple(d),T.originalWidth=parseInt(d[0]),T.originalHeight=parseInt(d[1]),h.readTuple(d),T.offsetX=parseInt(d[0]),T.offsetY=parseInt(d[1]),T.index=parseInt(h.readValue()),T.texture=f.texture,this.regions.push(T)}else{(f=new r).name=p,2==h.readTuple(d)&&(f.width=parseInt(d[0]),f.height=parseInt(d[1]),h.readTuple(d)),h.readTuple(d),f.minFilter=t.Texture.filterFromString(d[0]),f.magFilter=t.Texture.filterFromString(d[1]);var L=h.readValue();f.uWrap=t.TextureWrap.ClampToEdge,f.vWrap=t.TextureWrap.ClampToEdge,"x"==L?f.uWrap=t.TextureWrap.Repeat:"y"==L?f.vWrap=t.TextureWrap.Repeat:"xy"==L&&(f.uWrap=f.vWrap=t.TextureWrap.Repeat),f.texture=a(p),f.texture.setFilters(f.minFilter,f.magFilter),f.texture.setWraps(f.uWrap,f.vWrap),f.width=f.texture.getImage().width,f.height=f.texture.getImage().height,this.pages.push(f)}}},TextureAtlas2.prototype.findRegion=function(t){for(var i=0;i<this.regions.length;i++)if(this.regions[i].name==t)return this.regions[i];return null},TextureAtlas2.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].texture.dispose()},TextureAtlas2}();t.TextureAtlas=i;var n=function(){function TextureAtlasReader2(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}return TextureAtlasReader2.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},TextureAtlasReader2.prototype.readValue=function(){var t=this.readLine(),i=t.indexOf(":");if(-1==i)throw new Error("Invalid line: "+t);return t.substring(i+1).trim()},TextureAtlasReader2.prototype.readTuple=function(t){var i=this.readLine(),n=i.indexOf(":");if(-1==n)throw new Error("Invalid line: "+i);for(var r=0,o=n+1;r<3;r++){var a=i.indexOf(",",o);if(-1==a)break;t[r]=i.substr(o,a-o).trim(),o=a+1}return t[r]=i.substring(o).trim(),r+1},TextureAtlasReader2}(),r=function TextureAtlasPage2(){};t.TextureAtlasPage=r;var o=function(t){function TextureAtlasRegion2(){return null!==t&&t.apply(this,arguments)||this}return h(TextureAtlasRegion2,t),TextureAtlasRegion2}(t.TextureRegion);t.TextureAtlasRegion=o}(a||(a={})),function(t){var i=function(){function TransformConstraint2(i,n){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new t.Vector2,this.active=!1,null==i)throw new Error("data cannot be null.");if(null==n)throw new Error("skeleton cannot be null.");this.data=i,this.rotateMix=i.rotateMix,this.translateMix=i.translateMix,this.scaleMix=i.scaleMix,this.shearMix=i.shearMix,this.bones=new Array;for(var r=0;r<i.bones.length;r++)this.bones.push(n.findBone(i.bones[r].name));this.target=n.findBone(i.target.name)}return TransformConstraint2.prototype.isActive=function(){return this.active},TransformConstraint2.prototype.apply=function(){this.update()},TransformConstraint2.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},TransformConstraint2.prototype.applyAbsoluteWorld=function(){for(var i=this.rotateMix,n=this.translateMix,r=this.scaleMix,o=this.shearMix,a=this.target,h=a.a,d=a.b,f=a.c,p=a.d,T=h*p-d*f>0?t.MathUtils.degRad:-t.MathUtils.degRad,b=this.data.offsetRotation*T,S=this.data.offsetShearY*T,A=this.bones,P=0,O=A.length;P<O;P++){var L=A[P],D=!1;if(0!=i){var I=L.a,F=L.b,B=L.c,N=L.d;(z=Math.atan2(f,h)-Math.atan2(B,I)+b)>t.MathUtils.PI?z-=t.MathUtils.PI2:z<-t.MathUtils.PI&&(z+=t.MathUtils.PI2),z*=i;var Y=Math.cos(z),X=Math.sin(z);L.a=Y*I-X*B,L.b=Y*F-X*N,L.c=X*I+Y*B,L.d=X*F+Y*N,D=!0}if(0!=n){var G=this.temp;a.localToWorld(G.set(this.data.offsetX,this.data.offsetY)),L.worldX+=(G.x-L.worldX)*n,L.worldY+=(G.y-L.worldY)*n,D=!0}if(r>0){var U=Math.sqrt(L.a*L.a+L.c*L.c),V=Math.sqrt(h*h+f*f);U>1e-5&&(U=(U+(V-U+this.data.offsetScaleX)*r)/U),L.a*=U,L.c*=U,U=Math.sqrt(L.b*L.b+L.d*L.d),V=Math.sqrt(d*d+p*p),U>1e-5&&(U=(U+(V-U+this.data.offsetScaleY)*r)/U),L.b*=U,L.d*=U,D=!0}if(o>0){F=L.b,N=L.d;var z,W=Math.atan2(N,F);(z=Math.atan2(p,d)-Math.atan2(f,h)-(W-Math.atan2(L.c,L.a)))>t.MathUtils.PI?z-=t.MathUtils.PI2:z<-t.MathUtils.PI&&(z+=t.MathUtils.PI2),z=W+(z+S)*o;U=Math.sqrt(F*F+N*N);L.b=Math.cos(z)*U,L.d=Math.sin(z)*U,D=!0}D&&(L.appliedValid=!1)}},TransformConstraint2.prototype.applyRelativeWorld=function(){for(var i=this.rotateMix,n=this.translateMix,r=this.scaleMix,o=this.shearMix,a=this.target,h=a.a,d=a.b,f=a.c,p=a.d,T=h*p-d*f>0?t.MathUtils.degRad:-t.MathUtils.degRad,b=this.data.offsetRotation*T,S=this.data.offsetShearY*T,A=this.bones,P=0,O=A.length;P<O;P++){var L=A[P],D=!1;if(0!=i){var I=L.a,F=L.b,B=L.c,N=L.d;(V=Math.atan2(f,h)+b)>t.MathUtils.PI?V-=t.MathUtils.PI2:V<-t.MathUtils.PI&&(V+=t.MathUtils.PI2),V*=i;var Y=Math.cos(V),X=Math.sin(V);L.a=Y*I-X*B,L.b=Y*F-X*N,L.c=X*I+Y*B,L.d=X*F+Y*N,D=!0}if(0!=n){var G=this.temp;a.localToWorld(G.set(this.data.offsetX,this.data.offsetY)),L.worldX+=G.x*n,L.worldY+=G.y*n,D=!0}if(r>0){var U=(Math.sqrt(h*h+f*f)-1+this.data.offsetScaleX)*r+1;L.a*=U,L.c*=U,U=(Math.sqrt(d*d+p*p)-1+this.data.offsetScaleY)*r+1,L.b*=U,L.d*=U,D=!0}if(o>0){var V;(V=Math.atan2(p,d)-Math.atan2(f,h))>t.MathUtils.PI?V-=t.MathUtils.PI2:V<-t.MathUtils.PI&&(V+=t.MathUtils.PI2);F=L.b,N=L.d;V=Math.atan2(N,F)+(V-t.MathUtils.PI/2+S)*o;U=Math.sqrt(F*F+N*N);L.b=Math.cos(V)*U,L.d=Math.sin(V)*U,D=!0}D&&(L.appliedValid=!1)}},TransformConstraint2.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,i=this.translateMix,n=this.scaleMix,r=this.shearMix,o=this.target;o.appliedValid||o.updateAppliedTransform();for(var a=this.bones,h=0,d=a.length;h<d;h++){var f=a[h];f.appliedValid||f.updateAppliedTransform();var p=f.arotation;if(0!=t){var T=o.arotation-p+this.data.offsetRotation;p+=(T-=360*(16384-(16384.499999999996-T/360|0)))*t}var b=f.ax,S=f.ay;0!=i&&(b+=(o.ax-b+this.data.offsetX)*i,S+=(o.ay-S+this.data.offsetY)*i);var A=f.ascaleX,P=f.ascaleY;0!=n&&(A>1e-5&&(A=(A+(o.ascaleX-A+this.data.offsetScaleX)*n)/A),P>1e-5&&(P=(P+(o.ascaleY-P+this.data.offsetScaleY)*n)/P));var O=f.ashearY;if(0!=r){T=o.ashearY-O+this.data.offsetShearY;T-=360*(16384-(16384.499999999996-T/360|0)),f.shearY+=T*r}f.updateWorldTransformWith(b,S,p,A,P,f.ashearX,O)}},TransformConstraint2.prototype.applyRelativeLocal=function(){var t=this.rotateMix,i=this.translateMix,n=this.scaleMix,r=this.shearMix,o=this.target;o.appliedValid||o.updateAppliedTransform();for(var a=this.bones,h=0,d=a.length;h<d;h++){var f=a[h];f.appliedValid||f.updateAppliedTransform();var p=f.arotation;0!=t&&(p+=(o.arotation+this.data.offsetRotation)*t);var T=f.ax,b=f.ay;0!=i&&(T+=(o.ax+this.data.offsetX)*i,b+=(o.ay+this.data.offsetY)*i);var S=f.ascaleX,A=f.ascaleY;0!=n&&(S>1e-5&&(S*=(o.ascaleX-1+this.data.offsetScaleX)*n+1),A>1e-5&&(A*=(o.ascaleY-1+this.data.offsetScaleY)*n+1));var P=f.ashearY;0!=r&&(P+=(o.ashearY+this.data.offsetShearY)*r),f.updateWorldTransformWith(T,b,p,S,A,f.ashearX,P)}},TransformConstraint2}();t.TransformConstraint=i}(a||(a={})),function(t){var i=function(t){function TransformConstraintData2(i){var n=t.call(this,i,0,!1)||this;return n.bones=new Array,n.rotateMix=0,n.translateMix=0,n.scaleMix=0,n.shearMix=0,n.offsetRotation=0,n.offsetX=0,n.offsetY=0,n.offsetScaleX=0,n.offsetScaleY=0,n.offsetShearY=0,n.relative=!1,n.local=!1,n}return h(TransformConstraintData2,t),TransformConstraintData2}(t.ConstraintData);t.TransformConstraintData=i}(a||(a={})),function(t){var i=function(){function Triangulator2(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new t.Pool((function(){return new Array})),this.polygonIndicesPool=new t.Pool((function(){return new Array}))}return Triangulator2.prototype.triangulate=function(t){var i=t,n=t.length>>1,r=this.indicesArray;r.length=0;for(var o=0;o<n;o++)r[o]=o;var a=this.isConcaveArray;a.length=0;o=0;for(var h=n;o<h;++o)a[o]=Triangulator2.isConcave(o,n,i,r);var d=this.triangles;for(d.length=0;n>3;){for(var f=n-1,p=(o=0,1);;){t:if(!a[o]){for(var T=r[f]<<1,b=r[o]<<1,S=r[p]<<1,A=i[T],P=i[T+1],O=i[b],L=i[b+1],D=i[S],I=i[S+1],F=(p+1)%n;F!=f;F=(F+1)%n)if(a[F]){var B=r[F]<<1,N=i[B],Y=i[B+1];if(Triangulator2.positiveArea(D,I,A,P,N,Y)&&Triangulator2.positiveArea(A,P,O,L,N,Y)&&Triangulator2.positiveArea(O,L,D,I,N,Y))break t}break}if(0==p){do{if(!a[o])break;o--}while(o>0);break}f=o,o=p,p=(p+1)%n}d.push(r[(n+o-1)%n]),d.push(r[o]),d.push(r[(o+1)%n]),r.splice(o,1),a.splice(o,1);var X=(--n+o-1)%n,G=o==n?0:o;a[X]=Triangulator2.isConcave(X,n,i,r),a[G]=Triangulator2.isConcave(G,n,i,r)}return 3==n&&(d.push(r[2]),d.push(r[0]),d.push(r[1])),d},Triangulator2.prototype.decompose=function(t,i){var n=t,r=this.convexPolygons;this.polygonPool.freeAll(r),r.length=0;var o=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(o),o.length=0;var a=this.polygonIndicesPool.obtain();a.length=0;var h=this.polygonPool.obtain();h.length=0;for(var d=-1,f=0,p=0,T=i.length;p<T;p+=3){var b=i[p]<<1,S=i[p+1]<<1,A=i[p+2]<<1,P=n[b],O=n[b+1],L=n[S],D=n[S+1],I=n[A],F=n[A+1],B=!1;if(d==b){var N=h.length-4,Y=Triangulator2.winding(h[N],h[N+1],h[N+2],h[N+3],I,F),X=Triangulator2.winding(I,F,h[0],h[1],h[2],h[3]);Y==f&&X==f&&(h.push(I),h.push(F),a.push(A),B=!0)}B||(h.length>0?(r.push(h),o.push(a)):(this.polygonPool.free(h),this.polygonIndicesPool.free(a)),(h=this.polygonPool.obtain()).length=0,h.push(P),h.push(O),h.push(L),h.push(D),h.push(I),h.push(F),(a=this.polygonIndicesPool.obtain()).length=0,a.push(b),a.push(S),a.push(A),f=Triangulator2.winding(P,O,L,D,I,F),d=b)}h.length>0&&(r.push(h),o.push(a));for(p=0,T=r.length;p<T;p++)if(0!=(a=o[p]).length)for(var G=a[0],U=a[a.length-1],V=(h=r[p])[N=h.length-4],z=h[N+1],W=h[N+2],H=h[N+3],q=h[0],Z=h[1],K=h[2],J=h[3],Q=Triangulator2.winding(V,z,W,H,q,Z),$=0;$<T;$++)if($!=p){var tt=o[$];if(3==tt.length){var et=tt[0],it=tt[1],nt=tt[2],st=r[$];I=st[st.length-2],F=st[st.length-1];if(et==G&&it==U){Y=Triangulator2.winding(V,z,W,H,I,F),X=Triangulator2.winding(I,F,q,Z,K,J);Y==Q&&X==Q&&(st.length=0,tt.length=0,h.push(I),h.push(F),a.push(nt),V=W,z=H,W=I,H=F,$=0)}}}for(p=r.length-1;p>=0;p--)0==(h=r[p]).length&&(r.splice(p,1),this.polygonPool.free(h),a=o[p],o.splice(p,1),this.polygonIndicesPool.free(a));return r},Triangulator2.isConcave=function(t,i,n,r){var o=r[(i+t-1)%i]<<1,a=r[t]<<1,h=r[(t+1)%i]<<1;return!this.positiveArea(n[o],n[o+1],n[a],n[a+1],n[h],n[h+1])},Triangulator2.positiveArea=function(t,i,n,r,o,a){return t*(a-r)+n*(i-a)+o*(r-i)>=0},Triangulator2.winding=function(t,i,n,r,o,a){var h=n-t,d=r-i;return o*d-a*h+h*i-t*d>=0?1:-1},Triangulator2}();t.Triangulator=i}(a||(a={})),function(t){var i=function(){function IntSet2(){this.array=new Array}return IntSet2.prototype.add=function(t){var i=this.contains(t);return this.array[0|t]=0|t,!i},IntSet2.prototype.contains=function(t){return null!=this.array[0|t]},IntSet2.prototype.remove=function(t){this.array[0|t]=void 0},IntSet2.prototype.clear=function(){this.array.length=0},IntSet2}();t.IntSet=i;var n=function(){function Color2(t,i,n,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),this.r=t,this.g=i,this.b=n,this.a=r}return Color2.prototype.set=function(t,i,n,r){return this.r=t,this.g=i,this.b=n,this.a=r,this.clamp(),this},Color2.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},Color2.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255,this},Color2.prototype.add=function(t,i,n,r){return this.r+=t,this.g+=i,this.b+=n,this.a+=r,this.clamp(),this},Color2.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},Color2.rgba8888ToColor=function(t,i){t.r=((4278190080&i)>>>24)/255,t.g=((16711680&i)>>>16)/255,t.b=((65280&i)>>>8)/255,t.a=(255&i)/255},Color2.rgb888ToColor=function(t,i){t.r=((16711680&i)>>>16)/255,t.g=((65280&i)>>>8)/255,t.b=(255&i)/255},Color2.WHITE=new Color2(1,1,1,1),Color2.RED=new Color2(1,0,0,1),Color2.GREEN=new Color2(0,1,0,1),Color2.BLUE=new Color2(0,0,1,1),Color2.MAGENTA=new Color2(1,0,1,1),Color2}();t.Color=n;var r=function(){function MathUtils2(){}return MathUtils2.clamp=function(t,i,n){return t<i?i:t>n?n:t},MathUtils2.cosDeg=function(t){return Math.cos(t*MathUtils2.degRad)},MathUtils2.sinDeg=function(t){return Math.sin(t*MathUtils2.degRad)},MathUtils2.signum=function(t){return t>0?1:t<0?-1:0},MathUtils2.toInt=function(t){return t>0?Math.floor(t):Math.ceil(t)},MathUtils2.cbrt=function(t){var i=Math.pow(Math.abs(t),1/3);return t<0?-i:i},MathUtils2.randomTriangular=function(t,i){return MathUtils2.randomTriangularWith(t,i,.5*(t+i))},MathUtils2.randomTriangularWith=function(t,i,n){var r=Math.random(),o=i-t;return r<=(n-t)/o?t+Math.sqrt(r*o*(n-t)):i-Math.sqrt((1-r)*o*(i-n))},MathUtils2.PI=3.1415927,MathUtils2.PI2=2*MathUtils2.PI,MathUtils2.radiansToDegrees=180/MathUtils2.PI,MathUtils2.radDeg=MathUtils2.radiansToDegrees,MathUtils2.degreesToRadians=MathUtils2.PI/180,MathUtils2.degRad=MathUtils2.degreesToRadians,MathUtils2}();t.MathUtils=r;var o=function(){function Interpolation2(){}return Interpolation2.prototype.apply=function(t,i,n){return t+(i-t)*this.applyInternal(n)},Interpolation2}();t.Interpolation=o;var a=function(t){function Pow2(i){var n=t.call(this)||this;return n.power=2,n.power=i,n}return h(Pow2,t),Pow2.prototype.applyInternal=function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1},Pow2}(o);t.Pow=a;var d=function(t){function PowOut2(i){return t.call(this,i)||this}return h(PowOut2,t),PowOut2.prototype.applyInternal=function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1},PowOut2}(a);t.PowOut=d;var f=function(){function Utils2(){}return Utils2.arrayCopy=function(t,i,n,r,o){for(var a=i,h=r;a<i+o;a++,h++)n[h]=t[a]},Utils2.setArraySize=function(t,i,n){void 0===n&&(n=0);var r=t.length;if(r==i)return t;if(t.length=i,r<i)for(var o=r;o<i;o++)t[o]=n;return t},Utils2.ensureArrayCapacity=function(t,i,n){return void 0===n&&(n=0),t.length>=i?t:Utils2.setArraySize(t,i,n)},Utils2.newArray=function(t,i){for(var n=new Array(t),r=0;r<t;r++)n[r]=i;return n},Utils2.newFloatArray=function(t){if(Utils2.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);for(var i=new Array(t),n=0;n<i.length;n++)i[n]=0;return i},Utils2.newShortArray=function(t){if(Utils2.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);for(var i=new Array(t),n=0;n<i.length;n++)i[n]=0;return i},Utils2.toFloatArray=function(t){return Utils2.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t},Utils2.toSinglePrecision=function(t){return Utils2.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t},Utils2.webkit602BugfixHelper=function(t,i){},Utils2.contains=function(t,i,n){for(var r=0;r<t.length;r++)if(t[r]==i)return!0;return!1},Utils2.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,Utils2}();t.Utils=f;var p=function(){function DebugUtils2(){}return DebugUtils2.logBones=function(t){for(var i=0;i<t.bones.length;i++){var n=t.bones[i];console.log(n.data.name+", "+n.a+", "+n.b+", "+n.c+", "+n.d+", "+n.worldX+", "+n.worldY)}},DebugUtils2}();t.DebugUtils=p;var T=function(){function Pool2(t){this.items=new Array,this.instantiator=t}return Pool2.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},Pool2.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},Pool2.prototype.freeAll=function(t){for(var i=0;i<t.length;i++)this.free(t[i])},Pool2.prototype.clear=function(){this.items.length=0},Pool2}();t.Pool=T;var b=function(){function Vector24(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.x=t,this.y=i}return Vector24.prototype.set=function(t,i){return this.x=t,this.y=i,this},Vector24.prototype.length=function(){var t=this.x,i=this.y;return Math.sqrt(t*t+i*i)},Vector24.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},Vector24}();t.Vector2=b;var S=function(){function TimeKeeper2(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return TimeKeeper2.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},TimeKeeper2}();t.TimeKeeper=S;var A=function(){function WindowedMean2(t){void 0===t&&(t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}return WindowedMean2.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},WindowedMean2.prototype.addValue=function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},WindowedMean2.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,i=0;i<this.values.length;i++)t+=this.values[i];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0},WindowedMean2}();t.WindowedMean=A}(a||(a={})),Math.fround||(Math.fround=(o=new Float32Array(1),function(t){return o[0]=t,o[0]})),function(t){var i=function Attachment2(t){if(null==t)throw new Error("name cannot be null.");this.name=t};t.Attachment=i;var n=function(i){function VertexAttachment2(t){var n=i.call(this,t)||this;return n.id=(65535&VertexAttachment2.nextID++)<<11,n.worldVerticesLength=0,n.deformAttachment=n,n}return h(VertexAttachment2,i),VertexAttachment2.prototype.computeWorldVertices=function(t,i,n,r,o,a){n=o+(n>>1)*a;var h=t.bone.skeleton,d=t.deform,f=this.vertices,p=this.bones;if(null!=p){for(var T=0,b=0,S=0;S<i;S+=2){T+=(L=p[T])+1,b+=L}var A=h.bones;if(0==d.length)for(W=o,G=3*b;W<n;W+=a){var P=0,O=0,L=p[T++];for(L+=T;T<L;T++,G+=3){B=A[p[T]],H=f[G],q=f[G+1];var D=f[G+2];P+=(H*B.a+q*B.b+B.worldX)*D,O+=(H*B.c+q*B.d+B.worldY)*D}r[W]=P,r[W+1]=O}else for(var I=d,F=(W=o,G=3*b,b<<1);W<n;W+=a){P=0,O=0,L=p[T++];for(L+=T;T<L;T++,G+=3,F+=2){B=A[p[T]],H=f[G]+I[F],q=f[G+1]+I[F+1],D=f[G+2];P+=(H*B.a+q*B.b+B.worldX)*D,O+=(H*B.c+q*B.d+B.worldY)*D}r[W]=P,r[W+1]=O}}else{d.length>0&&(f=d);for(var B,N=(B=t.bone).worldX,Y=B.worldY,X=B.a,G=B.b,U=B.c,V=B.d,z=i,W=o;W<n;z+=2,W+=a){var H=f[z],q=f[z+1];r[W]=H*X+q*G+N,r[W+1]=H*U+q*V+Y}}},VertexAttachment2.prototype.copyTo=function(i){null!=this.bones?(i.bones=new Array(this.bones.length),t.Utils.arrayCopy(this.bones,0,i.bones,0,this.bones.length)):i.bones=null,null!=this.vertices?(i.vertices=t.Utils.newFloatArray(this.vertices.length),t.Utils.arrayCopy(this.vertices,0,i.vertices,0,this.vertices.length)):i.vertices=null,i.worldVerticesLength=this.worldVerticesLength,i.deformAttachment=this.deformAttachment},VertexAttachment2.nextID=0,VertexAttachment2}(i);t.VertexAttachment=n}(a||(a={})),function(t){var i;(i=t.AttachmentType||(t.AttachmentType={}))[i.Region=0]="Region",i[i.BoundingBox=1]="BoundingBox",i[i.Mesh=2]="Mesh",i[i.LinkedMesh=3]="LinkedMesh",i[i.Path=4]="Path",i[i.Point=5]="Point",i[i.Clipping=6]="Clipping"}(a||(a={})),function(t){var i=function(i){function BoundingBoxAttachment2(n){var r=i.call(this,n)||this;return r.color=new t.Color(1,1,1,1),r}return h(BoundingBoxAttachment2,i),BoundingBoxAttachment2.prototype.copy=function(){var t=new BoundingBoxAttachment2(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t},BoundingBoxAttachment2}(t.VertexAttachment);t.BoundingBoxAttachment=i}(a||(a={})),function(t){var i=function(i){function ClippingAttachment2(n){var r=i.call(this,n)||this;return r.color=new t.Color(.2275,.2275,.8078,1),r}return h(ClippingAttachment2,i),ClippingAttachment2.prototype.copy=function(){var t=new ClippingAttachment2(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t},ClippingAttachment2}(t.VertexAttachment);t.ClippingAttachment=i}(a||(a={})),function(t){var i=function(i){function MeshAttachment2(n){var r=i.call(this,n)||this;return r.color=new t.Color(1,1,1,1),r.tempColor=new t.Color(0,0,0,0),r}return h(MeshAttachment2,i),MeshAttachment2.prototype.updateUVs=function(){var i=this.regionUVs;null!=this.uvs&&this.uvs.length==i.length||(this.uvs=t.Utils.newFloatArray(i.length));var n=this.uvs,r=this.uvs.length,o=this.region.u,a=this.region.v,h=0,d=0;if(this.region instanceof t.TextureAtlasRegion){var f=this.region,p=f.texture.getImage().width,T=f.texture.getImage().height;switch(f.degrees){case 90:o-=(f.originalHeight-f.offsetY-f.height)/p,a-=(f.originalWidth-f.offsetX-f.width)/T,h=f.originalHeight/p,d=f.originalWidth/T;for(var b=0;b<r;b+=2)n[b]=o+i[b+1]*h,n[b+1]=a+(1-i[b])*d;return;case 180:o-=(f.originalWidth-f.offsetX-f.width)/p,a-=f.offsetY/T,h=f.originalWidth/p,d=f.originalHeight/T;for(b=0;b<r;b+=2)n[b]=o+(1-i[b])*h,n[b+1]=a+(1-i[b+1])*d;return;case 270:o-=f.offsetY/p,a-=f.offsetX/T,h=f.originalHeight/p,d=f.originalWidth/T;for(b=0;b<r;b+=2)n[b]=o+(1-i[b+1])*h,n[b+1]=a+i[b]*d;return}o-=f.offsetX/p,a-=(f.originalHeight-f.offsetY-f.height)/T,h=f.originalWidth/p,d=f.originalHeight/T}else null==this.region?(o=a=0,h=d=1):(h=this.region.u2-o,d=this.region.v2-a);for(b=0;b<r;b+=2)n[b]=o+i[b]*h,n[b+1]=a+i[b+1]*d},MeshAttachment2.prototype.getParentMesh=function(){return this.parentMesh},MeshAttachment2.prototype.setParentMesh=function(t){this.parentMesh=t,null!=t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},MeshAttachment2.prototype.copy=function(){if(null!=this.parentMesh)return this.newLinkedMesh();var i=new MeshAttachment2(this.name);return i.region=this.region,i.path=this.path,i.color.setFromColor(this.color),this.copyTo(i),i.regionUVs=new Array(this.regionUVs.length),t.Utils.arrayCopy(this.regionUVs,0,i.regionUVs,0,this.regionUVs.length),i.uvs=new Array(this.uvs.length),t.Utils.arrayCopy(this.uvs,0,i.uvs,0,this.uvs.length),i.triangles=new Array(this.triangles.length),t.Utils.arrayCopy(this.triangles,0,i.triangles,0,this.triangles.length),i.hullLength=this.hullLength,null!=this.edges&&(i.edges=new Array(this.edges.length),t.Utils.arrayCopy(this.edges,0,i.edges,0,this.edges.length)),i.width=this.width,i.height=this.height,i},MeshAttachment2.prototype.newLinkedMesh=function(){var t=new MeshAttachment2(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(null!=this.parentMesh?this.parentMesh:this),t.updateUVs(),t},MeshAttachment2}(t.VertexAttachment);t.MeshAttachment=i}(a||(a={})),function(t){var i=function(i){function PathAttachment2(n){var r=i.call(this,n)||this;return r.closed=!1,r.constantSpeed=!1,r.color=new t.Color(1,1,1,1),r}return h(PathAttachment2,i),PathAttachment2.prototype.copy=function(){var i=new PathAttachment2(this.name);return this.copyTo(i),i.lengths=new Array(this.lengths.length),t.Utils.arrayCopy(this.lengths,0,i.lengths,0,this.lengths.length),i.closed=closed,i.constantSpeed=this.constantSpeed,i.color.setFromColor(this.color),i},PathAttachment2}(t.VertexAttachment);t.PathAttachment=i}(a||(a={})),function(t){var i=function(i){function PointAttachment2(n){var r=i.call(this,n)||this;return r.color=new t.Color(.38,.94,0,1),r}return h(PointAttachment2,i),PointAttachment2.prototype.computeWorldPosition=function(t,i){return i.x=this.x*t.a+this.y*t.b+t.worldX,i.y=this.x*t.c+this.y*t.d+t.worldY,i},PointAttachment2.prototype.computeWorldRotation=function(i){var n=t.MathUtils.cosDeg(this.rotation),r=t.MathUtils.sinDeg(this.rotation),o=n*i.a+r*i.b,a=n*i.c+r*i.d;return Math.atan2(a,o)*t.MathUtils.radDeg},PointAttachment2.prototype.copy=function(){var t=new PointAttachment2(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t},PointAttachment2}(t.VertexAttachment);t.PointAttachment=i}(a||(a={})),function(t){var i=function(i){function RegionAttachment2(n){var r=i.call(this,n)||this;return r.x=0,r.y=0,r.scaleX=1,r.scaleY=1,r.rotation=0,r.width=0,r.height=0,r.color=new t.Color(1,1,1,1),r.offset=t.Utils.newFloatArray(8),r.uvs=t.Utils.newFloatArray(8),r.tempColor=new t.Color(1,1,1,1),r}return h(RegionAttachment2,i),RegionAttachment2.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,i=this.height/this.region.originalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.region.offsetX*t,r=-this.height/2*this.scaleY+this.region.offsetY*i,o=n+this.region.width*t,a=r+this.region.height*i,h=this.rotation*Math.PI/180,d=Math.cos(h),f=Math.sin(h),p=n*d+this.x,T=n*f,b=r*d+this.y,S=r*f,A=o*d+this.x,P=o*f,O=a*d+this.y,L=a*f,D=this.offset;D[RegionAttachment2.OX1]=p-S,D[RegionAttachment2.OY1]=b+T,D[RegionAttachment2.OX2]=p-L,D[RegionAttachment2.OY2]=O+T,D[RegionAttachment2.OX3]=A-L,D[RegionAttachment2.OY3]=O+P,D[RegionAttachment2.OX4]=A-S,D[RegionAttachment2.OY4]=b+P},RegionAttachment2.prototype.setRegion=function(t){this.region=t;var i=this.uvs;t.rotate?(i[2]=t.u,i[3]=t.v2,i[4]=t.u,i[5]=t.v,i[6]=t.u2,i[7]=t.v,i[0]=t.u2,i[1]=t.v2):(i[0]=t.u,i[1]=t.v2,i[2]=t.u,i[3]=t.v,i[4]=t.u2,i[5]=t.v,i[6]=t.u2,i[7]=t.v2)},RegionAttachment2.prototype.computeWorldVertices=function(t,i,n,r){var o=this.offset,a=t.worldX,h=t.worldY,d=t.a,f=t.b,p=t.c,T=t.d,b=0,S=0;b=o[RegionAttachment2.OX1],S=o[RegionAttachment2.OY1],i[n]=b*d+S*f+a,i[n+1]=b*p+S*T+h,n+=r,b=o[RegionAttachment2.OX2],S=o[RegionAttachment2.OY2],i[n]=b*d+S*f+a,i[n+1]=b*p+S*T+h,n+=r,b=o[RegionAttachment2.OX3],S=o[RegionAttachment2.OY3],i[n]=b*d+S*f+a,i[n+1]=b*p+S*T+h,n+=r,b=o[RegionAttachment2.OX4],S=o[RegionAttachment2.OY4],i[n]=b*d+S*f+a,i[n+1]=b*p+S*T+h},RegionAttachment2.prototype.copy=function(){var i=new RegionAttachment2(this.name);return i.region=this.region,i.rendererObject=this.rendererObject,i.path=this.path,i.x=this.x,i.y=this.y,i.scaleX=this.scaleX,i.scaleY=this.scaleY,i.rotation=this.rotation,i.width=this.width,i.height=this.height,t.Utils.arrayCopy(this.uvs,0,i.uvs,0,8),t.Utils.arrayCopy(this.offset,0,i.offset,0,8),i.color.setFromColor(this.color),i},RegionAttachment2.OX1=0,RegionAttachment2.OY1=1,RegionAttachment2.OX2=2,RegionAttachment2.OY2=3,RegionAttachment2.OX3=4,RegionAttachment2.OY3=5,RegionAttachment2.OX4=6,RegionAttachment2.OY4=7,RegionAttachment2.X1=0,RegionAttachment2.Y1=1,RegionAttachment2.C1R=2,RegionAttachment2.C1G=3,RegionAttachment2.C1B=4,RegionAttachment2.C1A=5,RegionAttachment2.U1=6,RegionAttachment2.V1=7,RegionAttachment2.X2=8,RegionAttachment2.Y2=9,RegionAttachment2.C2R=10,RegionAttachment2.C2G=11,RegionAttachment2.C2B=12,RegionAttachment2.C2A=13,RegionAttachment2.U2=14,RegionAttachment2.V2=15,RegionAttachment2.X3=16,RegionAttachment2.Y3=17,RegionAttachment2.C3R=18,RegionAttachment2.C3G=19,RegionAttachment2.C3B=20,RegionAttachment2.C3A=21,RegionAttachment2.U3=22,RegionAttachment2.V3=23,RegionAttachment2.X4=24,RegionAttachment2.Y4=25,RegionAttachment2.C4R=26,RegionAttachment2.C4G=27,RegionAttachment2.C4B=28,RegionAttachment2.C4A=29,RegionAttachment2.U4=30,RegionAttachment2.V4=31,RegionAttachment2}(t.Attachment);t.RegionAttachment=i}(a||(a={})),function(t){var i=function(){function JitterEffect2(t,i){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=i}return JitterEffect2.prototype.begin=function(t){},JitterEffect2.prototype.transform=function(i,n,r,o){i.x+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY),i.y+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},JitterEffect2.prototype.end=function(){},JitterEffect2}();t.JitterEffect=i}(a||(a={})),function(t){var i=function(){function SwirlEffect2(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return SwirlEffect2.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},SwirlEffect2.prototype.transform=function(i,n,r,o){var a=this.angle*t.MathUtils.degreesToRadians,h=i.x-this.worldX,d=i.y-this.worldY,f=Math.sqrt(h*h+d*d);if(f<this.radius){var p=SwirlEffect2.interpolation.apply(0,a,(this.radius-f)/this.radius),T=Math.cos(p),b=Math.sin(p);i.x=T*h-b*d+this.worldX,i.y=b*h+T*d+this.worldY}},SwirlEffect2.prototype.end=function(){},SwirlEffect2.interpolation=new t.PowOut(2),SwirlEffect2}();t.SwirlEffect=i}(a||(a={})),function(t){var i,n;i=t.canvas||(t.canvas={}),n=function(i){function AssetManager2(n){return void 0===n&&(n=""),i.call(this,(function(i){return new t.canvas.CanvasTexture(i)}),n)||this}return h(AssetManager2,i),AssetManager2}(t.AssetManager),i.AssetManager=n}(a||(a={})),function(t){var i,n;i=t.canvas||(t.canvas={}),n=function(t){function CanvasTexture2(i){return t.call(this,i)||this}return h(CanvasTexture2,t),CanvasTexture2.prototype.setFilters=function(t,i){},CanvasTexture2.prototype.setWraps=function(t,i){},CanvasTexture2.prototype.dispose=function(){},CanvasTexture2}(t.Texture),i.CanvasTexture=n}(a||(a={})),function(t){var i,n;i=t.canvas||(t.canvas={}),n=function(){function SkeletonRenderer2(i){this.triangleRendering=!1,this.debugRendering=!1,this.vertices=t.Utils.newFloatArray(8192),this.tempColor=new t.Color,this.ctx=i}return SkeletonRenderer2.prototype.draw=function(t){this.triangleRendering?this.drawTriangles(t):this.drawImages(t)},SkeletonRenderer2.prototype.drawImages=function(i){var n=this.ctx,r=i.drawOrder;this.debugRendering&&(n.strokeStyle="green"),n.save();for(var o=0,a=r.length;o<a;o++){var h=r[o];if(h.bone.active){var d=h.getAttachment(),f=null,p=null,T=null;if(d instanceof t.RegionAttachment){T=(p=(f=d).region).texture.getImage();var b=h.bone.skeleton.color,S=h.color,A=f.color,P=b.a*S.a*A.a,O=this.tempColor;O.set(b.r*S.r*A.r,b.g*S.g*A.g,b.b*S.b*A.b,P);var L=d,D=h.bone,I=p.width,F=p.height;n.save(),n.transform(D.a,D.c,D.b,D.d,D.worldX,D.worldY),n.translate(d.offset[0],d.offset[1]),n.rotate(d.rotation*Math.PI/180);var B=L.width/I;if(n.scale(B*d.scaleX,B*d.scaleY),n.translate(I/2,F/2),d.region.rotate){var N=I;I=F,F=N,n.rotate(-Math.PI/2)}n.scale(1,-1),n.translate(-I/2,-F/2),1==O.r&&1==O.g&&1==O.b&&1==O.a||(n.globalAlpha=O.a),n.drawImage(T,p.x,p.y,I,F,0,0,I,F),this.debugRendering&&n.strokeRect(0,0,I,F),n.restore()}}}n.restore()},SkeletonRenderer2.prototype.drawTriangles=function(i){for(var n=this.vertices,r=null,o=i.drawOrder,a=0,h=o.length;a<h;a++){var d=o[a],f=d.getAttachment(),p=null;if(f instanceof t.RegionAttachment){var T=f;n=this.computeRegionVertices(d,T,!1),r=SkeletonRenderer2.QUAD_TRIANGLES,p=T.region.texture.getImage()}else{if(!(f instanceof t.MeshAttachment))continue;var b=f;n=this.computeMeshVertices(d,b,!1),r=b.triangles,p=b.region.renderObject.texture.getImage()}if(null!=p){d.data.blendMode;var S=d.bone.skeleton.color,A=d.color,P=f.color,O=S.a*A.a*P.a,L=this.tempColor;L.set(S.r*A.r*P.r,S.g*A.g*P.g,S.b*A.b*P.b,O);var D=this.ctx;1==L.r&&1==L.g&&1==L.b&&1==L.a||(D.globalAlpha=L.a);for(var I=0;I<r.length;I+=3){var F=8*r[I],B=8*r[I+1],N=8*r[I+2],Y=n[F],X=n[F+1],G=n[F+6],U=n[F+7],V=n[B],z=n[B+1],W=n[B+6],H=n[B+7],q=n[N],Z=n[N+1],K=n[N+6],J=n[N+7];this.drawTriangle(p,Y,X,G,U,V,z,W,H,q,Z,K,J),this.debugRendering&&(D.strokeStyle="green",D.beginPath(),D.moveTo(Y,X),D.lineTo(V,z),D.lineTo(q,Z),D.lineTo(Y,X),D.stroke())}}}this.ctx.globalAlpha=1},SkeletonRenderer2.prototype.drawTriangle=function(t,i,n,r,o,a,h,d,f,p,T,b,S){var A=this.ctx;r*=t.width,o*=t.height,d*=t.width,f*=t.height,b*=t.width,S*=t.height,A.beginPath(),A.moveTo(i,n),A.lineTo(a,h),A.lineTo(p,T),A.closePath();var P=1/((d-=r)*(S-=o)-(b-=r)*(f-=o)),O=(S*(a-=i)-f*(p-=i))*P,L=(S*(h-=n)-f*(T-=n))*P,D=(d*p-b*a)*P,I=(d*T-b*h)*P,F=i-O*r-D*o,B=n-L*r-I*o;A.save(),A.transform(O,L,D,I,F,B),A.clip(),A.drawImage(t,0,0),A.restore()},SkeletonRenderer2.prototype.computeRegionVertices=function(i,n,r){var o=i.bone.skeleton.color,a=i.color,h=n.color,d=o.a*a.a*h.a,f=r?d:1,p=this.tempColor;p.set(o.r*a.r*h.r*f,o.g*a.g*h.g*f,o.b*a.b*h.b*f,d),n.computeWorldVertices(i.bone,this.vertices,0,SkeletonRenderer2.VERTEX_SIZE);var T=this.vertices,b=n.uvs;return T[t.RegionAttachment.C1R]=p.r,T[t.RegionAttachment.C1G]=p.g,T[t.RegionAttachment.C1B]=p.b,T[t.RegionAttachment.C1A]=p.a,T[t.RegionAttachment.U1]=b[0],T[t.RegionAttachment.V1]=b[1],T[t.RegionAttachment.C2R]=p.r,T[t.RegionAttachment.C2G]=p.g,T[t.RegionAttachment.C2B]=p.b,T[t.RegionAttachment.C2A]=p.a,T[t.RegionAttachment.U2]=b[2],T[t.RegionAttachment.V2]=b[3],T[t.RegionAttachment.C3R]=p.r,T[t.RegionAttachment.C3G]=p.g,T[t.RegionAttachment.C3B]=p.b,T[t.RegionAttachment.C3A]=p.a,T[t.RegionAttachment.U3]=b[4],T[t.RegionAttachment.V3]=b[5],T[t.RegionAttachment.C4R]=p.r,T[t.RegionAttachment.C4G]=p.g,T[t.RegionAttachment.C4B]=p.b,T[t.RegionAttachment.C4A]=p.a,T[t.RegionAttachment.U4]=b[6],T[t.RegionAttachment.V4]=b[7],T},SkeletonRenderer2.prototype.computeMeshVertices=function(i,n,r){var o=i.bone.skeleton.color,a=i.color,h=n.color,d=o.a*a.a*h.a,f=r?d:1,p=this.tempColor;p.set(o.r*a.r*h.r*f,o.g*a.g*h.g*f,o.b*a.b*h.b*f,d);var T=n.worldVerticesLength/2;this.vertices.length<n.worldVerticesLength&&(this.vertices=t.Utils.newFloatArray(n.worldVerticesLength));var b=this.vertices;n.computeWorldVertices(i,0,n.worldVerticesLength,b,0,SkeletonRenderer2.VERTEX_SIZE);for(var S=n.uvs,A=0,P=T,O=0,L=2;A<P;A++)b[L++]=p.r,b[L++]=p.g,b[L++]=p.b,b[L++]=p.a,b[L++]=S[O++],b[L++]=S[O++],L+=2;return b},SkeletonRenderer2.QUAD_TRIANGLES=[0,1,2,2,3,0],SkeletonRenderer2.VERTEX_SIZE=8,SkeletonRenderer2}(),i.SkeletonRenderer=n}(a||(a={})),function(t){var i,n;i=t.webgl||(t.webgl={}),n=function(i){function AssetManager2(n,r){return void 0===r&&(r=""),i.call(this,(function(i){return new t.webgl.GLTexture(n,i)}),r)||this}return h(AssetManager2,i),AssetManager2}(t.AssetManager),i.AssetManager=n}(a||(a={})),function(t){var i,n;i=t.webgl||(t.webgl={}),n=function(){function OrthoCamera2(t,n){this.position=new i.Vector3(0,0,0),this.direction=new i.Vector3(0,0,-1),this.up=new i.Vector3(0,1,0),this.near=0,this.far=100,this.zoom=1,this.viewportWidth=0,this.viewportHeight=0,this.projectionView=new i.Matrix4,this.inverseProjectionView=new i.Matrix4,this.projection=new i.Matrix4,this.view=new i.Matrix4,this.tmp=new i.Vector3,this.viewportWidth=t,this.viewportHeight=n,this.update()}return OrthoCamera2.prototype.update=function(){var t=this.projection,i=this.view,n=this.projectionView,r=this.inverseProjectionView,o=this.zoom,a=this.viewportWidth,h=this.viewportHeight;t.ortho(o*(-a/2),o*(a/2),o*(-h/2),o*(h/2),this.near,this.far),i.lookAt(this.position,this.direction,this.up),n.set(t.values),n.multiply(i),r.set(n.values).invert()},OrthoCamera2.prototype.screenToWorld=function(t,i,n){var r=t.x,o=n-t.y-1,a=this.tmp;return a.x=2*r/i-1,a.y=2*o/n-1,a.z=2*t.z-1,a.project(this.inverseProjectionView),t.set(a.x,a.y,a.z),t},OrthoCamera2.prototype.setViewport=function(t,i){this.viewportWidth=t,this.viewportHeight=i},OrthoCamera2}(),i.OrthoCamera=n}(a||(a={})),function(t){var i,n;i=t.webgl||(t.webgl={}),n=function(n){function GLTexture2(t,r,o){void 0===o&&(o=!1);var a=n.call(this,r)||this;return a.texture=null,a.boundUnit=0,a.useMipMaps=!1,a.context=t instanceof i.ManagedWebGLRenderingContext?t:new i.ManagedWebGLRenderingContext(t),a.useMipMaps=o,a.restore(),a.context.addRestorable(a),a}return h(GLTexture2,n),GLTexture2.prototype.setFilters=function(t,i){var n=this.context.gl;this.bind(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,GLTexture2.validateMagFilter(i))},GLTexture2.validateMagFilter=function(i){switch(i){case t.TextureFilter.MipMap:case t.TextureFilter.MipMapLinearLinear:case t.TextureFilter.MipMapLinearNearest:case t.TextureFilter.MipMapNearestLinear:case t.TextureFilter.MipMapNearestNearest:return t.TextureFilter.Linear;default:return i}},GLTexture2.prototype.setWraps=function(t,i){var n=this.context.gl;this.bind(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,i)},GLTexture2.prototype.update=function(t){var i=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),GLTexture2.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL&&i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,this._image),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,t?i.LINEAR_MIPMAP_LINEAR:i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),t&&i.generateMipmap(i.TEXTURE_2D)},GLTexture2.prototype.restore=function(){this.texture=null,this.update(this.useMipMaps)},GLTexture2.prototype.bind=function(t){void 0===t&&(t=0);var i=this.context.gl;this.boundUnit=t,i.activeTexture(i.TEXTURE0+t),i.bindTexture(i.TEXTURE_2D,this.texture)},GLTexture2.prototype.unbind=function(){var t=this.context.gl;t.activeTexture(t.TEXTURE0+this.boundUnit),t.bindTexture(t.TEXTURE_2D,null)},GLTexture2.prototype.dispose=function(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture)},GLTexture2.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL=!1,GLTexture2}(t.Texture),i.GLTexture=n}(a||(a={})),function(t){!function(t){t.M00=0,t.M01=4,t.M02=8,t.M03=12,t.M10=1,t.M11=5,t.M12=9,t.M13=13,t.M20=2,t.M21=6,t.M22=10,t.M23=14,t.M30=3,t.M31=7,t.M32=11,t.M33=15;var i=function(){function Matrix42(){this.temp=new Float32Array(16),this.values=new Float32Array(16);var i=this.values;i[t.M00]=1,i[t.M11]=1,i[t.M22]=1,i[t.M33]=1}return Matrix42.prototype.set=function(t){return this.values.set(t),this},Matrix42.prototype.transpose=function(){var i=this.temp,n=this.values;return i[t.M00]=n[t.M00],i[t.M01]=n[t.M10],i[t.M02]=n[t.M20],i[t.M03]=n[t.M30],i[t.M10]=n[t.M01],i[t.M11]=n[t.M11],i[t.M12]=n[t.M21],i[t.M13]=n[t.M31],i[t.M20]=n[t.M02],i[t.M21]=n[t.M12],i[t.M22]=n[t.M22],i[t.M23]=n[t.M32],i[t.M30]=n[t.M03],i[t.M31]=n[t.M13],i[t.M32]=n[t.M23],i[t.M33]=n[t.M33],this.set(i)},Matrix42.prototype.identity=function(){var i=this.values;return i[t.M00]=1,i[t.M01]=0,i[t.M02]=0,i[t.M03]=0,i[t.M10]=0,i[t.M11]=1,i[t.M12]=0,i[t.M13]=0,i[t.M20]=0,i[t.M21]=0,i[t.M22]=1,i[t.M23]=0,i[t.M30]=0,i[t.M31]=0,i[t.M32]=0,i[t.M33]=1,this},Matrix42.prototype.invert=function(){var i=this.values,n=this.temp,r=i[t.M30]*i[t.M21]*i[t.M12]*i[t.M03]-i[t.M20]*i[t.M31]*i[t.M12]*i[t.M03]-i[t.M30]*i[t.M11]*i[t.M22]*i[t.M03]+i[t.M10]*i[t.M31]*i[t.M22]*i[t.M03]+i[t.M20]*i[t.M11]*i[t.M32]*i[t.M03]-i[t.M10]*i[t.M21]*i[t.M32]*i[t.M03]-i[t.M30]*i[t.M21]*i[t.M02]*i[t.M13]+i[t.M20]*i[t.M31]*i[t.M02]*i[t.M13]+i[t.M30]*i[t.M01]*i[t.M22]*i[t.M13]-i[t.M00]*i[t.M31]*i[t.M22]*i[t.M13]-i[t.M20]*i[t.M01]*i[t.M32]*i[t.M13]+i[t.M00]*i[t.M21]*i[t.M32]*i[t.M13]+i[t.M30]*i[t.M11]*i[t.M02]*i[t.M23]-i[t.M10]*i[t.M31]*i[t.M02]*i[t.M23]-i[t.M30]*i[t.M01]*i[t.M12]*i[t.M23]+i[t.M00]*i[t.M31]*i[t.M12]*i[t.M23]+i[t.M10]*i[t.M01]*i[t.M32]*i[t.M23]-i[t.M00]*i[t.M11]*i[t.M32]*i[t.M23]-i[t.M20]*i[t.M11]*i[t.M02]*i[t.M33]+i[t.M10]*i[t.M21]*i[t.M02]*i[t.M33]+i[t.M20]*i[t.M01]*i[t.M12]*i[t.M33]-i[t.M00]*i[t.M21]*i[t.M12]*i[t.M33]-i[t.M10]*i[t.M01]*i[t.M22]*i[t.M33]+i[t.M00]*i[t.M11]*i[t.M22]*i[t.M33];if(0==r)throw new Error("non-invertible matrix");var o=1/r;return n[t.M00]=i[t.M12]*i[t.M23]*i[t.M31]-i[t.M13]*i[t.M22]*i[t.M31]+i[t.M13]*i[t.M21]*i[t.M32]-i[t.M11]*i[t.M23]*i[t.M32]-i[t.M12]*i[t.M21]*i[t.M33]+i[t.M11]*i[t.M22]*i[t.M33],n[t.M01]=i[t.M03]*i[t.M22]*i[t.M31]-i[t.M02]*i[t.M23]*i[t.M31]-i[t.M03]*i[t.M21]*i[t.M32]+i[t.M01]*i[t.M23]*i[t.M32]+i[t.M02]*i[t.M21]*i[t.M33]-i[t.M01]*i[t.M22]*i[t.M33],n[t.M02]=i[t.M02]*i[t.M13]*i[t.M31]-i[t.M03]*i[t.M12]*i[t.M31]+i[t.M03]*i[t.M11]*i[t.M32]-i[t.M01]*i[t.M13]*i[t.M32]-i[t.M02]*i[t.M11]*i[t.M33]+i[t.M01]*i[t.M12]*i[t.M33],n[t.M03]=i[t.M03]*i[t.M12]*i[t.M21]-i[t.M02]*i[t.M13]*i[t.M21]-i[t.M03]*i[t.M11]*i[t.M22]+i[t.M01]*i[t.M13]*i[t.M22]+i[t.M02]*i[t.M11]*i[t.M23]-i[t.M01]*i[t.M12]*i[t.M23],n[t.M10]=i[t.M13]*i[t.M22]*i[t.M30]-i[t.M12]*i[t.M23]*i[t.M30]-i[t.M13]*i[t.M20]*i[t.M32]+i[t.M10]*i[t.M23]*i[t.M32]+i[t.M12]*i[t.M20]*i[t.M33]-i[t.M10]*i[t.M22]*i[t.M33],n[t.M11]=i[t.M02]*i[t.M23]*i[t.M30]-i[t.M03]*i[t.M22]*i[t.M30]+i[t.M03]*i[t.M20]*i[t.M32]-i[t.M00]*i[t.M23]*i[t.M32]-i[t.M02]*i[t.M20]*i[t.M33]+i[t.M00]*i[t.M22]*i[t.M33],n[t.M12]=i[t.M03]*i[t.M12]*i[t.M30]-i[t.M02]*i[t.M13]*i[t.M30]-i[t.M03]*i[t.M10]*i[t.M32]+i[t.M00]*i[t.M13]*i[t.M32]+i[t.M02]*i[t.M10]*i[t.M33]-i[t.M00]*i[t.M12]*i[t.M33],n[t.M13]=i[t.M02]*i[t.M13]*i[t.M20]-i[t.M03]*i[t.M12]*i[t.M20]+i[t.M03]*i[t.M10]*i[t.M22]-i[t.M00]*i[t.M13]*i[t.M22]-i[t.M02]*i[t.M10]*i[t.M23]+i[t.M00]*i[t.M12]*i[t.M23],n[t.M20]=i[t.M11]*i[t.M23]*i[t.M30]-i[t.M13]*i[t.M21]*i[t.M30]+i[t.M13]*i[t.M20]*i[t.M31]-i[t.M10]*i[t.M23]*i[t.M31]-i[t.M11]*i[t.M20]*i[t.M33]+i[t.M10]*i[t.M21]*i[t.M33],n[t.M21]=i[t.M03]*i[t.M21]*i[t.M30]-i[t.M01]*i[t.M23]*i[t.M30]-i[t.M03]*i[t.M20]*i[t.M31]+i[t.M00]*i[t.M23]*i[t.M31]+i[t.M01]*i[t.M20]*i[t.M33]-i[t.M00]*i[t.M21]*i[t.M33],n[t.M22]=i[t.M01]*i[t.M13]*i[t.M30]-i[t.M03]*i[t.M11]*i[t.M30]+i[t.M03]*i[t.M10]*i[t.M31]-i[t.M00]*i[t.M13]*i[t.M31]-i[t.M01]*i[t.M10]*i[t.M33]+i[t.M00]*i[t.M11]*i[t.M33],n[t.M23]=i[t.M03]*i[t.M11]*i[t.M20]-i[t.M01]*i[t.M13]*i[t.M20]-i[t.M03]*i[t.M10]*i[t.M21]+i[t.M00]*i[t.M13]*i[t.M21]+i[t.M01]*i[t.M10]*i[t.M23]-i[t.M00]*i[t.M11]*i[t.M23],n[t.M30]=i[t.M12]*i[t.M21]*i[t.M30]-i[t.M11]*i[t.M22]*i[t.M30]-i[t.M12]*i[t.M20]*i[t.M31]+i[t.M10]*i[t.M22]*i[t.M31]+i[t.M11]*i[t.M20]*i[t.M32]-i[t.M10]*i[t.M21]*i[t.M32],n[t.M31]=i[t.M01]*i[t.M22]*i[t.M30]-i[t.M02]*i[t.M21]*i[t.M30]+i[t.M02]*i[t.M20]*i[t.M31]-i[t.M00]*i[t.M22]*i[t.M31]-i[t.M01]*i[t.M20]*i[t.M32]+i[t.M00]*i[t.M21]*i[t.M32],n[t.M32]=i[t.M02]*i[t.M11]*i[t.M30]-i[t.M01]*i[t.M12]*i[t.M30]-i[t.M02]*i[t.M10]*i[t.M31]+i[t.M00]*i[t.M12]*i[t.M31]+i[t.M01]*i[t.M10]*i[t.M32]-i[t.M00]*i[t.M11]*i[t.M32],n[t.M33]=i[t.M01]*i[t.M12]*i[t.M20]-i[t.M02]*i[t.M11]*i[t.M20]+i[t.M02]*i[t.M10]*i[t.M21]-i[t.M00]*i[t.M12]*i[t.M21]-i[t.M01]*i[t.M10]*i[t.M22]+i[t.M00]*i[t.M11]*i[t.M22],i[t.M00]=n[t.M00]*o,i[t.M01]=n[t.M01]*o,i[t.M02]=n[t.M02]*o,i[t.M03]=n[t.M03]*o,i[t.M10]=n[t.M10]*o,i[t.M11]=n[t.M11]*o,i[t.M12]=n[t.M12]*o,i[t.M13]=n[t.M13]*o,i[t.M20]=n[t.M20]*o,i[t.M21]=n[t.M21]*o,i[t.M22]=n[t.M22]*o,i[t.M23]=n[t.M23]*o,i[t.M30]=n[t.M30]*o,i[t.M31]=n[t.M31]*o,i[t.M32]=n[t.M32]*o,i[t.M33]=n[t.M33]*o,this},Matrix42.prototype.determinant=function(){var i=this.values;return i[t.M30]*i[t.M21]*i[t.M12]*i[t.M03]-i[t.M20]*i[t.M31]*i[t.M12]*i[t.M03]-i[t.M30]*i[t.M11]*i[t.M22]*i[t.M03]+i[t.M10]*i[t.M31]*i[t.M22]*i[t.M03]+i[t.M20]*i[t.M11]*i[t.M32]*i[t.M03]-i[t.M10]*i[t.M21]*i[t.M32]*i[t.M03]-i[t.M30]*i[t.M21]*i[t.M02]*i[t.M13]+i[t.M20]*i[t.M31]*i[t.M02]*i[t.M13]+i[t.M30]*i[t.M01]*i[t.M22]*i[t.M13]-i[t.M00]*i[t.M31]*i[t.M22]*i[t.M13]-i[t.M20]*i[t.M01]*i[t.M32]*i[t.M13]+i[t.M00]*i[t.M21]*i[t.M32]*i[t.M13]+i[t.M30]*i[t.M11]*i[t.M02]*i[t.M23]-i[t.M10]*i[t.M31]*i[t.M02]*i[t.M23]-i[t.M30]*i[t.M01]*i[t.M12]*i[t.M23]+i[t.M00]*i[t.M31]*i[t.M12]*i[t.M23]+i[t.M10]*i[t.M01]*i[t.M32]*i[t.M23]-i[t.M00]*i[t.M11]*i[t.M32]*i[t.M23]-i[t.M20]*i[t.M11]*i[t.M02]*i[t.M33]+i[t.M10]*i[t.M21]*i[t.M02]*i[t.M33]+i[t.M20]*i[t.M01]*i[t.M12]*i[t.M33]-i[t.M00]*i[t.M21]*i[t.M12]*i[t.M33]-i[t.M10]*i[t.M01]*i[t.M22]*i[t.M33]+i[t.M00]*i[t.M11]*i[t.M22]*i[t.M33]},Matrix42.prototype.translate=function(i,n,r){var o=this.values;return o[t.M03]+=i,o[t.M13]+=n,o[t.M23]+=r,this},Matrix42.prototype.copy=function(){return(new Matrix42).set(this.values)},Matrix42.prototype.projection=function(i,n,r,o){this.identity();var a=1/Math.tan(r*(Math.PI/180)/2),h=(n+i)/(i-n),d=2*n*i/(i-n),f=this.values;return f[t.M00]=a/o,f[t.M10]=0,f[t.M20]=0,f[t.M30]=0,f[t.M01]=0,f[t.M11]=a,f[t.M21]=0,f[t.M31]=0,f[t.M02]=0,f[t.M12]=0,f[t.M22]=h,f[t.M32]=-1,f[t.M03]=0,f[t.M13]=0,f[t.M23]=d,f[t.M33]=0,this},Matrix42.prototype.ortho2d=function(t,i,n,r){return this.ortho(t,t+n,i,i+r,0,1)},Matrix42.prototype.ortho=function(i,n,r,o,a,h){this.identity();var d=2/(n-i),f=2/(o-r),p=-2/(h-a),T=-(n+i)/(n-i),b=-(o+r)/(o-r),S=-(h+a)/(h-a),A=this.values;return A[t.M00]=d,A[t.M10]=0,A[t.M20]=0,A[t.M30]=0,A[t.M01]=0,A[t.M11]=f,A[t.M21]=0,A[t.M31]=0,A[t.M02]=0,A[t.M12]=0,A[t.M22]=p,A[t.M32]=0,A[t.M03]=T,A[t.M13]=b,A[t.M23]=S,A[t.M33]=1,this},Matrix42.prototype.multiply=function(i){var n=this.temp,r=this.values,o=i.values;return n[t.M00]=r[t.M00]*o[t.M00]+r[t.M01]*o[t.M10]+r[t.M02]*o[t.M20]+r[t.M03]*o[t.M30],n[t.M01]=r[t.M00]*o[t.M01]+r[t.M01]*o[t.M11]+r[t.M02]*o[t.M21]+r[t.M03]*o[t.M31],n[t.M02]=r[t.M00]*o[t.M02]+r[t.M01]*o[t.M12]+r[t.M02]*o[t.M22]+r[t.M03]*o[t.M32],n[t.M03]=r[t.M00]*o[t.M03]+r[t.M01]*o[t.M13]+r[t.M02]*o[t.M23]+r[t.M03]*o[t.M33],n[t.M10]=r[t.M10]*o[t.M00]+r[t.M11]*o[t.M10]+r[t.M12]*o[t.M20]+r[t.M13]*o[t.M30],n[t.M11]=r[t.M10]*o[t.M01]+r[t.M11]*o[t.M11]+r[t.M12]*o[t.M21]+r[t.M13]*o[t.M31],n[t.M12]=r[t.M10]*o[t.M02]+r[t.M11]*o[t.M12]+r[t.M12]*o[t.M22]+r[t.M13]*o[t.M32],n[t.M13]=r[t.M10]*o[t.M03]+r[t.M11]*o[t.M13]+r[t.M12]*o[t.M23]+r[t.M13]*o[t.M33],n[t.M20]=r[t.M20]*o[t.M00]+r[t.M21]*o[t.M10]+r[t.M22]*o[t.M20]+r[t.M23]*o[t.M30],n[t.M21]=r[t.M20]*o[t.M01]+r[t.M21]*o[t.M11]+r[t.M22]*o[t.M21]+r[t.M23]*o[t.M31],n[t.M22]=r[t.M20]*o[t.M02]+r[t.M21]*o[t.M12]+r[t.M22]*o[t.M22]+r[t.M23]*o[t.M32],n[t.M23]=r[t.M20]*o[t.M03]+r[t.M21]*o[t.M13]+r[t.M22]*o[t.M23]+r[t.M23]*o[t.M33],n[t.M30]=r[t.M30]*o[t.M00]+r[t.M31]*o[t.M10]+r[t.M32]*o[t.M20]+r[t.M33]*o[t.M30],n[t.M31]=r[t.M30]*o[t.M01]+r[t.M31]*o[t.M11]+r[t.M32]*o[t.M21]+r[t.M33]*o[t.M31],n[t.M32]=r[t.M30]*o[t.M02]+r[t.M31]*o[t.M12]+r[t.M32]*o[t.M22]+r[t.M33]*o[t.M32],n[t.M33]=r[t.M30]*o[t.M03]+r[t.M31]*o[t.M13]+r[t.M32]*o[t.M23]+r[t.M33]*o[t.M33],this.set(this.temp)},Matrix42.prototype.multiplyLeft=function(i){var n=this.temp,r=this.values,o=i.values;return n[t.M00]=o[t.M00]*r[t.M00]+o[t.M01]*r[t.M10]+o[t.M02]*r[t.M20]+o[t.M03]*r[t.M30],n[t.M01]=o[t.M00]*r[t.M01]+o[t.M01]*r[t.M11]+o[t.M02]*r[t.M21]+o[t.M03]*r[t.M31],n[t.M02]=o[t.M00]*r[t.M02]+o[t.M01]*r[t.M12]+o[t.M02]*r[t.M22]+o[t.M03]*r[t.M32],n[t.M03]=o[t.M00]*r[t.M03]+o[t.M01]*r[t.M13]+o[t.M02]*r[t.M23]+o[t.M03]*r[t.M33],n[t.M10]=o[t.M10]*r[t.M00]+o[t.M11]*r[t.M10]+o[t.M12]*r[t.M20]+o[t.M13]*r[t.M30],n[t.M11]=o[t.M10]*r[t.M01]+o[t.M11]*r[t.M11]+o[t.M12]*r[t.M21]+o[t.M13]*r[t.M31],n[t.M12]=o[t.M10]*r[t.M02]+o[t.M11]*r[t.M12]+o[t.M12]*r[t.M22]+o[t.M13]*r[t.M32],n[t.M13]=o[t.M10]*r[t.M03]+o[t.M11]*r[t.M13]+o[t.M12]*r[t.M23]+o[t.M13]*r[t.M33],n[t.M20]=o[t.M20]*r[t.M00]+o[t.M21]*r[t.M10]+o[t.M22]*r[t.M20]+o[t.M23]*r[t.M30],n[t.M21]=o[t.M20]*r[t.M01]+o[t.M21]*r[t.M11]+o[t.M22]*r[t.M21]+o[t.M23]*r[t.M31],n[t.M22]=o[t.M20]*r[t.M02]+o[t.M21]*r[t.M12]+o[t.M22]*r[t.M22]+o[t.M23]*r[t.M32],n[t.M23]=o[t.M20]*r[t.M03]+o[t.M21]*r[t.M13]+o[t.M22]*r[t.M23]+o[t.M23]*r[t.M33],n[t.M30]=o[t.M30]*r[t.M00]+o[t.M31]*r[t.M10]+o[t.M32]*r[t.M20]+o[t.M33]*r[t.M30],n[t.M31]=o[t.M30]*r[t.M01]+o[t.M31]*r[t.M11]+o[t.M32]*r[t.M21]+o[t.M33]*r[t.M31],n[t.M32]=o[t.M30]*r[t.M02]+o[t.M31]*r[t.M12]+o[t.M32]*r[t.M22]+o[t.M33]*r[t.M32],n[t.M33]=o[t.M30]*r[t.M03]+o[t.M31]*r[t.M13]+o[t.M32]*r[t.M23]+o[t.M33]*r[t.M33],this.set(this.temp)},Matrix42.prototype.lookAt=function(i,n,r){Matrix42.initTemps();var o=Matrix42.xAxis,a=Matrix42.yAxis,h=Matrix42.zAxis;h.setFrom(n).normalize(),o.setFrom(n).normalize(),o.cross(r).normalize(),a.setFrom(o).cross(h).normalize(),this.identity();var d=this.values;return d[t.M00]=o.x,d[t.M01]=o.y,d[t.M02]=o.z,d[t.M10]=a.x,d[t.M11]=a.y,d[t.M12]=a.z,d[t.M20]=-h.x,d[t.M21]=-h.y,d[t.M22]=-h.z,Matrix42.tmpMatrix.identity(),Matrix42.tmpMatrix.values[t.M03]=-i.x,Matrix42.tmpMatrix.values[t.M13]=-i.y,Matrix42.tmpMatrix.values[t.M23]=-i.z,this.multiply(Matrix42.tmpMatrix),this},Matrix42.initTemps=function(){null===Matrix42.xAxis&&(Matrix42.xAxis=new t.Vector3),null===Matrix42.yAxis&&(Matrix42.yAxis=new t.Vector3),null===Matrix42.zAxis&&(Matrix42.zAxis=new t.Vector3)},Matrix42.xAxis=null,Matrix42.yAxis=null,Matrix42.zAxis=null,Matrix42.tmpMatrix=new Matrix42,Matrix42}();t.Matrix4=i}(t.webgl||(t.webgl={}))}(a||(a={})),function(t){!function(t){var i=function(){function Mesh2(i,n,r,o){this.attributes=n,this.verticesLength=0,this.dirtyVertices=!1,this.indicesLength=0,this.dirtyIndices=!1,this.elementsPerVertex=0,this.context=i instanceof t.ManagedWebGLRenderingContext?i:new t.ManagedWebGLRenderingContext(i),this.elementsPerVertex=0;for(var a=0;a<n.length;a++)this.elementsPerVertex+=n[a].numElements;this.vertices=new Float32Array(r*this.elementsPerVertex),this.indices=new Uint16Array(o),this.context.addRestorable(this)}return Mesh2.prototype.getAttributes=function(){return this.attributes},Mesh2.prototype.maxVertices=function(){return this.vertices.length/this.elementsPerVertex},Mesh2.prototype.numVertices=function(){return this.verticesLength/this.elementsPerVertex},Mesh2.prototype.setVerticesLength=function(t){this.dirtyVertices=!0,this.verticesLength=t},Mesh2.prototype.getVertices=function(){return this.vertices},Mesh2.prototype.maxIndices=function(){return this.indices.length},Mesh2.prototype.numIndices=function(){return this.indicesLength},Mesh2.prototype.setIndicesLength=function(t){this.dirtyIndices=!0,this.indicesLength=t},Mesh2.prototype.getIndices=function(){return this.indices},Mesh2.prototype.getVertexSizeInFloats=function(){for(var t=0,i=0;i<this.attributes.length;i++){t+=this.attributes[i].numElements}return t},Mesh2.prototype.setVertices=function(t){if(this.dirtyVertices=!0,t.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(t,0),this.verticesLength=t.length},Mesh2.prototype.setIndices=function(t){if(this.dirtyIndices=!0,t.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(t,0),this.indicesLength=t.length},Mesh2.prototype.draw=function(t,i){this.drawWithOffset(t,i,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex)},Mesh2.prototype.drawWithOffset=function(t,i,n,r){var o=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(t),this.indicesLength>0?o.drawElements(i,r,o.UNSIGNED_SHORT,2*n):o.drawArrays(i,n,r),this.unbind(t)},Mesh2.prototype.bind=function(t){var i=this.context.gl;i.bindBuffer(i.ARRAY_BUFFER,this.verticesBuffer);for(var n=0,r=0;r<this.attributes.length;r++){var o=this.attributes[r],a=t.getAttributeLocation(o.name);i.enableVertexAttribArray(a),i.vertexAttribPointer(a,o.numElements,i.FLOAT,!1,4*this.elementsPerVertex,4*n),n+=o.numElements}this.indicesLength>0&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.indicesBuffer)},Mesh2.prototype.unbind=function(t){for(var i=this.context.gl,n=0;n<this.attributes.length;n++){var r=this.attributes[n],o=t.getAttributeLocation(r.name);i.disableVertexAttribArray(o)}i.bindBuffer(i.ARRAY_BUFFER,null),this.indicesLength>0&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null)},Mesh2.prototype.update=function(){var t=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.verticesBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),t.DYNAMIC_DRAW),this.dirtyVertices=!1),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),t.DYNAMIC_DRAW),this.dirtyIndices=!1)},Mesh2.prototype.restore=function(){this.verticesBuffer=null,this.indicesBuffer=null,this.update()},Mesh2.prototype.dispose=function(){this.context.removeRestorable(this);var t=this.context.gl;t.deleteBuffer(this.verticesBuffer),t.deleteBuffer(this.indicesBuffer)},Mesh2}();t.Mesh=i;var n=function VertexAttribute2(t,i,n){this.name=t,this.type=i,this.numElements=n};t.VertexAttribute=n;var r=function(i){function Position2Attribute2(){return i.call(this,t.Shader.POSITION,f.Float,2)||this}return h(Position2Attribute2,i),Position2Attribute2}(n);t.Position2Attribute=r;var o=function(i){function Position3Attribute2(){return i.call(this,t.Shader.POSITION,f.Float,3)||this}return h(Position3Attribute2,i),Position3Attribute2}(n);t.Position3Attribute=o;var a=function(i){function TexCoordAttribute2(n){return void 0===n&&(n=0),i.call(this,t.Shader.TEXCOORDS+(0==n?"":n),f.Float,2)||this}return h(TexCoordAttribute2,i),TexCoordAttribute2}(n);t.TexCoordAttribute=a;var d=function(i){function ColorAttribute2(){return i.call(this,t.Shader.COLOR,f.Float,4)||this}return h(ColorAttribute2,i),ColorAttribute2}(n);t.ColorAttribute=d;var f,p,T=function(i){function Color2Attribute2(){return i.call(this,t.Shader.COLOR2,f.Float,4)||this}return h(Color2Attribute2,i),Color2Attribute2}(n);t.Color2Attribute=T,(p=f=t.VertexAttributeType||(t.VertexAttributeType={}))[p.Float=0]="Float"}(t.webgl||(t.webgl={}))}(a||(a={})),function(t){var i,n;i=t.webgl||(t.webgl={}),n=function(){function PolygonBatcher2(t,n,r){if(void 0===n&&(n=!0),void 0===r&&(r=10920),this.isDrawing=!1,this.shader=null,this.lastTexture=null,this.verticesLength=0,this.indicesLength=0,r>10920)throw new Error("Can't have more than 10920 triangles per batch: "+r);this.context=t instanceof i.ManagedWebGLRenderingContext?t:new i.ManagedWebGLRenderingContext(t);var o=n?[new i.Position2Attribute,new i.ColorAttribute,new i.TexCoordAttribute,new i.Color2Attribute]:[new i.Position2Attribute,new i.ColorAttribute,new i.TexCoordAttribute];this.mesh=new i.Mesh(t,o,r,3*r),this.srcBlend=this.context.gl.SRC_ALPHA,this.dstBlend=this.context.gl.ONE_MINUS_SRC_ALPHA}return PolygonBatcher2.prototype.begin=function(t){var i=this.context.gl;if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=t,this.lastTexture=null,this.isDrawing=!0,i.enable(i.BLEND),i.blendFunc(this.srcBlend,this.dstBlend)},PolygonBatcher2.prototype.setBlendMode=function(t,i){var n=this.context.gl;this.srcBlend=t,this.dstBlend=i,this.isDrawing&&(this.flush(),n.blendFunc(this.srcBlend,this.dstBlend))},PolygonBatcher2.prototype.draw=function(t,i,n){t!=this.lastTexture?(this.flush(),this.lastTexture=t):(this.verticesLength+i.length>this.mesh.getVertices().length||this.indicesLength+n.length>this.mesh.getIndices().length)&&this.flush();var r=this.mesh.numVertices();this.mesh.getVertices().set(i,this.verticesLength),this.verticesLength+=i.length,this.mesh.setVerticesLength(this.verticesLength);for(var o=this.mesh.getIndices(),a=this.indicesLength,h=0;h<n.length;a++,h++)o[a]=n[h]+r;this.indicesLength+=n.length,this.mesh.setIndicesLength(this.indicesLength)},PolygonBatcher2.prototype.flush=function(){var t=this.context.gl;0!=this.verticesLength&&(this.lastTexture.bind(),this.mesh.draw(this.shader,t.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++)},PolygonBatcher2.prototype.end=function(){var t=this.context.gl;if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=!1,t.disable(t.BLEND)},PolygonBatcher2.prototype.getDrawCalls=function(){return this.drawCalls},PolygonBatcher2.prototype.dispose=function(){this.mesh.dispose()},PolygonBatcher2}(),i.PolygonBatcher=n}(a||(a={})),function(t){var i,n,r,o;i=t.webgl||(t.webgl={}),o=function(){function SceneRenderer2(n,r,o){void 0===o&&(o=!0),this.twoColorTint=!1,this.activeRenderer=null,this.QUAD=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],this.QUAD_TRIANGLES=[0,1,2,2,3,0],this.WHITE=new t.Color(1,1,1,1),this.canvas=n,this.context=r instanceof i.ManagedWebGLRenderingContext?r:new i.ManagedWebGLRenderingContext(r),this.twoColorTint=o,this.camera=new i.OrthoCamera(n.width,n.height),this.batcherShader=o?i.Shader.newTwoColoredTextured(this.context):i.Shader.newColoredTextured(this.context),this.batcher=new i.PolygonBatcher(this.context,o),this.shapesShader=i.Shader.newColored(this.context),this.shapes=new i.ShapeRenderer(this.context),this.skeletonRenderer=new i.SkeletonRenderer(this.context,o),this.skeletonDebugRenderer=new i.SkeletonDebugRenderer(this.context)}return SceneRenderer2.prototype.begin=function(){this.camera.update(),this.enableRenderer(this.batcher)},SceneRenderer2.prototype.drawSkeleton=function(t,i,n,r){void 0===i&&(i=!1),void 0===n&&(n=-1),void 0===r&&(r=-1),this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=i,this.skeletonRenderer.draw(this.batcher,t,n,r)},SceneRenderer2.prototype.drawSkeletonDebug=function(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=null),this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=i,this.skeletonDebugRenderer.draw(this.shapes,t,n)},SceneRenderer2.prototype.drawTexture=function(t,i,n,r,o,a){void 0===a&&(a=null),this.enableRenderer(this.batcher),null===a&&(a=this.WHITE);var h=this.QUAD,d=0;h[d++]=i,h[d++]=n,h[d++]=a.r,h[d++]=a.g,h[d++]=a.b,h[d++]=a.a,h[d++]=0,h[d++]=1,this.twoColorTint&&(h[d++]=0,h[d++]=0,h[d++]=0,h[d++]=0),h[d++]=i+r,h[d++]=n,h[d++]=a.r,h[d++]=a.g,h[d++]=a.b,h[d++]=a.a,h[d++]=1,h[d++]=1,this.twoColorTint&&(h[d++]=0,h[d++]=0,h[d++]=0,h[d++]=0),h[d++]=i+r,h[d++]=n+o,h[d++]=a.r,h[d++]=a.g,h[d++]=a.b,h[d++]=a.a,h[d++]=1,h[d++]=0,this.twoColorTint&&(h[d++]=0,h[d++]=0,h[d++]=0,h[d++]=0),h[d++]=i,h[d++]=n+o,h[d++]=a.r,h[d++]=a.g,h[d++]=a.b,h[d++]=a.a,h[d++]=0,h[d++]=0,this.twoColorTint&&(h[d++]=0,h[d++]=0,h[d++]=0,h[d++]=0),this.batcher.draw(t,h,this.QUAD_TRIANGLES)},SceneRenderer2.prototype.drawTextureUV=function(t,i,n,r,o,a,h,d,f,p){void 0===p&&(p=null),this.enableRenderer(this.batcher),null===p&&(p=this.WHITE);var T=this.QUAD,b=0;T[b++]=i,T[b++]=n,T[b++]=p.r,T[b++]=p.g,T[b++]=p.b,T[b++]=p.a,T[b++]=a,T[b++]=h,this.twoColorTint&&(T[b++]=0,T[b++]=0,T[b++]=0,T[b++]=0),T[b++]=i+r,T[b++]=n,T[b++]=p.r,T[b++]=p.g,T[b++]=p.b,T[b++]=p.a,T[b++]=d,T[b++]=h,this.twoColorTint&&(T[b++]=0,T[b++]=0,T[b++]=0,T[b++]=0),T[b++]=i+r,T[b++]=n+o,T[b++]=p.r,T[b++]=p.g,T[b++]=p.b,T[b++]=p.a,T[b++]=d,T[b++]=f,this.twoColorTint&&(T[b++]=0,T[b++]=0,T[b++]=0,T[b++]=0),T[b++]=i,T[b++]=n+o,T[b++]=p.r,T[b++]=p.g,T[b++]=p.b,T[b++]=p.a,T[b++]=a,T[b++]=f,this.twoColorTint&&(T[b++]=0,T[b++]=0,T[b++]=0,T[b++]=0),this.batcher.draw(t,T,this.QUAD_TRIANGLES)},SceneRenderer2.prototype.drawTextureRotated=function(i,n,r,o,a,h,d,f,p,T){void 0===p&&(p=null),this.enableRenderer(this.batcher),null===p&&(p=this.WHITE);var b=this.QUAD,S=n+h,A=r+d,P=-h,O=-d,L=o-h,D=a-d,I=P,F=O,B=P,N=D,Y=L,X=D,G=L,U=O,V=0,z=0,W=0,H=0,q=0,Z=0,K=0,J=0;if(0!=f){var Q=t.MathUtils.cosDeg(f),$=t.MathUtils.sinDeg(f);W=(q=Q*Y-$*X)+((V=Q*I-$*F)-(K=Q*B-$*N)),H=(Z=$*Y+Q*X)+((z=$*I+Q*F)-(J=$*B+Q*N))}else V=I,z=F,K=B,J=N,q=Y,Z=X,W=G,H=U;V+=S,z+=A,W+=S,H+=A,q+=S,Z+=A,K+=S,J+=A;var tt=0;b[tt++]=V,b[tt++]=z,b[tt++]=p.r,b[tt++]=p.g,b[tt++]=p.b,b[tt++]=p.a,b[tt++]=0,b[tt++]=1,this.twoColorTint&&(b[tt++]=0,b[tt++]=0,b[tt++]=0,b[tt++]=0),b[tt++]=W,b[tt++]=H,b[tt++]=p.r,b[tt++]=p.g,b[tt++]=p.b,b[tt++]=p.a,b[tt++]=1,b[tt++]=1,this.twoColorTint&&(b[tt++]=0,b[tt++]=0,b[tt++]=0,b[tt++]=0),b[tt++]=q,b[tt++]=Z,b[tt++]=p.r,b[tt++]=p.g,b[tt++]=p.b,b[tt++]=p.a,b[tt++]=1,b[tt++]=0,this.twoColorTint&&(b[tt++]=0,b[tt++]=0,b[tt++]=0,b[tt++]=0),b[tt++]=K,b[tt++]=J,b[tt++]=p.r,b[tt++]=p.g,b[tt++]=p.b,b[tt++]=p.a,b[tt++]=0,b[tt++]=0,this.twoColorTint&&(b[tt++]=0,b[tt++]=0,b[tt++]=0,b[tt++]=0),this.batcher.draw(i,b,this.QUAD_TRIANGLES)},SceneRenderer2.prototype.drawRegion=function(t,i,n,r,o,a,h){void 0===a&&(a=null),this.enableRenderer(this.batcher),null===a&&(a=this.WHITE);var d=this.QUAD,f=0;d[f++]=i,d[f++]=n,d[f++]=a.r,d[f++]=a.g,d[f++]=a.b,d[f++]=a.a,d[f++]=t.u,d[f++]=t.v2,this.twoColorTint&&(d[f++]=0,d[f++]=0,d[f++]=0,d[f++]=0),d[f++]=i+r,d[f++]=n,d[f++]=a.r,d[f++]=a.g,d[f++]=a.b,d[f++]=a.a,d[f++]=t.u2,d[f++]=t.v2,this.twoColorTint&&(d[f++]=0,d[f++]=0,d[f++]=0,d[f++]=0),d[f++]=i+r,d[f++]=n+o,d[f++]=a.r,d[f++]=a.g,d[f++]=a.b,d[f++]=a.a,d[f++]=t.u2,d[f++]=t.v,this.twoColorTint&&(d[f++]=0,d[f++]=0,d[f++]=0,d[f++]=0),d[f++]=i,d[f++]=n+o,d[f++]=a.r,d[f++]=a.g,d[f++]=a.b,d[f++]=a.a,d[f++]=t.u,d[f++]=t.v,this.twoColorTint&&(d[f++]=0,d[f++]=0,d[f++]=0,d[f++]=0),this.batcher.draw(t.texture,d,this.QUAD_TRIANGLES)},SceneRenderer2.prototype.line=function(t,i,n,r,o,a){void 0===o&&(o=null),this.enableRenderer(this.shapes),this.shapes.line(t,i,n,r,o)},SceneRenderer2.prototype.triangle=function(t,i,n,r,o,a,h,d,f,p){void 0===d&&(d=null),void 0===f&&(f=null),void 0===p&&(p=null),this.enableRenderer(this.shapes),this.shapes.triangle(t,i,n,r,o,a,h,d,f,p)},SceneRenderer2.prototype.quad=function(t,i,n,r,o,a,h,d,f,p,T,b,S){void 0===p&&(p=null),void 0===T&&(T=null),void 0===b&&(b=null),void 0===S&&(S=null),this.enableRenderer(this.shapes),this.shapes.quad(t,i,n,r,o,a,h,d,f,p,T,b,S)},SceneRenderer2.prototype.rect=function(t,i,n,r,o,a){void 0===a&&(a=null),this.enableRenderer(this.shapes),this.shapes.rect(t,i,n,r,o,a)},SceneRenderer2.prototype.rectLine=function(t,i,n,r,o,a,h){void 0===h&&(h=null),this.enableRenderer(this.shapes),this.shapes.rectLine(t,i,n,r,o,a,h)},SceneRenderer2.prototype.polygon=function(t,i,n,r){void 0===r&&(r=null),this.enableRenderer(this.shapes),this.shapes.polygon(t,i,n,r)},SceneRenderer2.prototype.circle=function(t,i,n,r,o,a){void 0===o&&(o=null),void 0===a&&(a=0),this.enableRenderer(this.shapes),this.shapes.circle(t,i,n,r,o,a)},SceneRenderer2.prototype.curve=function(t,i,n,r,o,a,h,d,f,p){void 0===p&&(p=null),this.enableRenderer(this.shapes),this.shapes.curve(t,i,n,r,o,a,h,d,f,p)},SceneRenderer2.prototype.end=function(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null},SceneRenderer2.prototype.resize=function(t){var i=this.canvas,r=i.clientWidth,o=i.clientHeight;if(i.width==r&&i.height==o||(i.width=r,i.height=o),this.context.gl.viewport(0,0,i.width,i.height),t===n.Stretch);else if(t===n.Expand)this.camera.setViewport(r,o);else if(t===n.Fit){var a=i.width,h=i.height,d=this.camera.viewportWidth,f=this.camera.viewportHeight,p=f/d<h/a?d/a:f/h;this.camera.viewportWidth=a*p,this.camera.viewportHeight=h*p}this.camera.update()},SceneRenderer2.prototype.enableRenderer=function(t){this.activeRenderer!==t&&(this.end(),t instanceof i.PolygonBatcher?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(i.Shader.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):t instanceof i.ShapeRenderer?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(i.Shader.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer)},SceneRenderer2.prototype.dispose=function(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose()},SceneRenderer2}(),i.SceneRenderer=o,(r=n=i.ResizeMode||(i.ResizeMode={}))[r.Stretch=0]="Stretch",r[r.Expand=1]="Expand",r[r.Fit=2]="Fit"}(a||(a={})),function(t){var i,n;i=t.webgl||(t.webgl={}),n=function(){function Shader2(t,n,r){this.vertexShader=n,this.fragmentShader=r,this.vs=null,this.fs=null,this.program=null,this.tmp2x2=new Float32Array(4),this.tmp3x3=new Float32Array(9),this.tmp4x4=new Float32Array(16),this.vsSource=n,this.fsSource=r,this.context=t instanceof i.ManagedWebGLRenderingContext?t:new i.ManagedWebGLRenderingContext(t),this.context.addRestorable(this),this.compile()}return Shader2.prototype.getProgram=function(){return this.program},Shader2.prototype.getVertexShader=function(){return this.vertexShader},Shader2.prototype.getFragmentShader=function(){return this.fragmentShader},Shader2.prototype.getVertexShaderSource=function(){return this.vsSource},Shader2.prototype.getFragmentSource=function(){return this.fsSource},Shader2.prototype.compile=function(){var t=this.context.gl;try{this.vs=this.compileShader(t.VERTEX_SHADER,this.vertexShader),this.fs=this.compileShader(t.FRAGMENT_SHADER,this.fragmentShader),this.program=this.compileProgram(this.vs,this.fs)}catch(i){throw this.dispose(),i}},Shader2.prototype.compileShader=function(t,i){var n=this.context.gl,r=n.createShader(t);if(n.shaderSource(r,i),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS)){var o="Couldn't compile shader: "+n.getShaderInfoLog(r);if(n.deleteShader(r),!n.isContextLost())throw new Error(o)}return r},Shader2.prototype.compileProgram=function(t,i){var n=this.context.gl,r=n.createProgram();if(n.attachShader(r,t),n.attachShader(r,i),n.linkProgram(r),!n.getProgramParameter(r,n.LINK_STATUS)){var o="Couldn't compile shader program: "+n.getProgramInfoLog(r);if(n.deleteProgram(r),!n.isContextLost())throw new Error(o)}return r},Shader2.prototype.restore=function(){this.compile()},Shader2.prototype.bind=function(){this.context.gl.useProgram(this.program)},Shader2.prototype.unbind=function(){this.context.gl.useProgram(null)},Shader2.prototype.setUniformi=function(t,i){this.context.gl.uniform1i(this.getUniformLocation(t),i)},Shader2.prototype.setUniformf=function(t,i){this.context.gl.uniform1f(this.getUniformLocation(t),i)},Shader2.prototype.setUniform2f=function(t,i,n){this.context.gl.uniform2f(this.getUniformLocation(t),i,n)},Shader2.prototype.setUniform3f=function(t,i,n,r){this.context.gl.uniform3f(this.getUniformLocation(t),i,n,r)},Shader2.prototype.setUniform4f=function(t,i,n,r,o){this.context.gl.uniform4f(this.getUniformLocation(t),i,n,r,o)},Shader2.prototype.setUniform2x2f=function(t,i){var n=this.context.gl;this.tmp2x2.set(i),n.uniformMatrix2fv(this.getUniformLocation(t),!1,this.tmp2x2)},Shader2.prototype.setUniform3x3f=function(t,i){var n=this.context.gl;this.tmp3x3.set(i),n.uniformMatrix3fv(this.getUniformLocation(t),!1,this.tmp3x3)},Shader2.prototype.setUniform4x4f=function(t,i){var n=this.context.gl;this.tmp4x4.set(i),n.uniformMatrix4fv(this.getUniformLocation(t),!1,this.tmp4x4)},Shader2.prototype.getUniformLocation=function(t){var i=this.context.gl,n=i.getUniformLocation(this.program,t);if(!n&&!i.isContextLost())throw new Error("Couldn't find location for uniform "+t);return n},Shader2.prototype.getAttributeLocation=function(t){var i=this.context.gl,n=i.getAttribLocation(this.program,t);if(-1==n&&!i.isContextLost())throw new Error("Couldn't find location for attribute "+t);return n},Shader2.prototype.dispose=function(){this.context.removeRestorable(this);var t=this.context.gl;this.vs&&(t.deleteShader(this.vs),this.vs=null),this.fs&&(t.deleteShader(this.fs),this.fs=null),this.program&&(t.deleteProgram(this.program),this.program=null)},Shader2.newColoredTextured=function(t){return new Shader2(t,"\n\t\t\t\tattribute vec4 "+Shader2.POSITION+";\n\t\t\t\tattribute vec4 "+Shader2.COLOR+";\n\t\t\t\tattribute vec2 "+Shader2.TEXCOORDS+";\n\t\t\t\tuniform mat4 "+Shader2.MVP_MATRIX+";\n\t\t\t\tvarying vec4 v_color;\n\t\t\t\tvarying vec2 v_texCoords;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_color = "+Shader2.COLOR+";\n\t\t\t\t\tv_texCoords = "+Shader2.TEXCOORDS+";\n\t\t\t\t\tgl_Position = "+Shader2.MVP_MATRIX+" * "+Shader2.POSITION+";\n\t\t\t\t}\n\t\t\t","\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_color;\n\t\t\t\tvarying vec2 v_texCoords;\n\t\t\t\tuniform sampler2D u_texture;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tgl_FragColor = v_color * texture2D(u_texture, v_texCoords);\n\t\t\t\t}\n\t\t\t")},Shader2.newTwoColoredTextured=function(t){return new Shader2(t,"\n\t\t\t\tattribute vec4 "+Shader2.POSITION+";\n\t\t\t\tattribute vec4 "+Shader2.COLOR+";\n\t\t\t\tattribute vec4 "+Shader2.COLOR2+";\n\t\t\t\tattribute vec2 "+Shader2.TEXCOORDS+";\n\t\t\t\tuniform mat4 "+Shader2.MVP_MATRIX+";\n\t\t\t\tvarying vec4 v_light;\n\t\t\t\tvarying vec4 v_dark;\n\t\t\t\tvarying vec2 v_texCoords;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_light = "+Shader2.COLOR+";\n\t\t\t\t\tv_dark = "+Shader2.COLOR2+";\n\t\t\t\t\tv_texCoords = "+Shader2.TEXCOORDS+";\n\t\t\t\t\tgl_Position = "+Shader2.MVP_MATRIX+" * "+Shader2.POSITION+";\n\t\t\t\t}\n\t\t\t","\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_light;\n\t\t\t\tvarying LOWP vec4 v_dark;\n\t\t\t\tvarying vec2 v_texCoords;\n\t\t\t\tuniform sampler2D u_texture;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tvec4 texColor = texture2D(u_texture, v_texCoords);\n\t\t\t\t\tgl_FragColor.a = texColor.a * v_light.a;\n\t\t\t\t\tgl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;\n\t\t\t\t}\n\t\t\t")},Shader2.newColored=function(t){return new Shader2(t,"\n\t\t\t\tattribute vec4 "+Shader2.POSITION+";\n\t\t\t\tattribute vec4 "+Shader2.COLOR+";\n\t\t\t\tuniform mat4 "+Shader2.MVP_MATRIX+";\n\t\t\t\tvarying vec4 v_color;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_color = "+Shader2.COLOR+";\n\t\t\t\t\tgl_Position = "+Shader2.MVP_MATRIX+" * "+Shader2.POSITION+";\n\t\t\t\t}\n\t\t\t","\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_color;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tgl_FragColor = v_color;\n\t\t\t\t}\n\t\t\t")},Shader2.MVP_MATRIX="u_projTrans",Shader2.POSITION="a_position",Shader2.COLOR="a_color",Shader2.COLOR2="a_color2",Shader2.TEXCOORDS="a_texCoords",Shader2.SAMPLER="u_texture",Shader2}(),i.Shader=n}(a||(a={})),function(t){var i,n,r,o;i=t.webgl||(t.webgl={}),o=function(){function ShapeRenderer2(r,o){if(void 0===o&&(o=10920),this.isDrawing=!1,this.shapeType=n.Filled,this.color=new t.Color(1,1,1,1),this.vertexIndex=0,this.tmp=new t.Vector2,o>10920)throw new Error("Can't have more than 10920 triangles per batch: "+o);this.context=r instanceof i.ManagedWebGLRenderingContext?r:new i.ManagedWebGLRenderingContext(r),this.mesh=new i.Mesh(r,[new i.Position2Attribute,new i.ColorAttribute],o,0),this.srcBlend=this.context.gl.SRC_ALPHA,this.dstBlend=this.context.gl.ONE_MINUS_SRC_ALPHA}return ShapeRenderer2.prototype.begin=function(t){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=t,this.vertexIndex=0,this.isDrawing=!0;var i=this.context.gl;i.enable(i.BLEND),i.blendFunc(this.srcBlend,this.dstBlend)},ShapeRenderer2.prototype.setBlendMode=function(t,i){var n=this.context.gl;this.srcBlend=t,this.dstBlend=i,this.isDrawing&&(this.flush(),n.blendFunc(this.srcBlend,this.dstBlend))},ShapeRenderer2.prototype.setColor=function(t){this.color.setFromColor(t)},ShapeRenderer2.prototype.setColorWith=function(t,i,n,r){this.color.set(t,i,n,r)},ShapeRenderer2.prototype.point=function(t,i,r){void 0===r&&(r=null),this.check(n.Point,1),null===r&&(r=this.color),this.vertex(t,i,r)},ShapeRenderer2.prototype.line=function(t,i,r,o,a){void 0===a&&(a=null),this.check(n.Line,2),this.mesh.getVertices(),this.vertexIndex,null===a&&(a=this.color),this.vertex(t,i,a),this.vertex(r,o,a)},ShapeRenderer2.prototype.triangle=function(t,i,r,o,a,h,d,f,p,T){void 0===f&&(f=null),void 0===p&&(p=null),void 0===T&&(T=null),this.check(t?n.Filled:n.Line,3),this.mesh.getVertices(),this.vertexIndex,null===f&&(f=this.color),null===p&&(p=this.color),null===T&&(T=this.color),t?(this.vertex(i,r,f),this.vertex(o,a,p),this.vertex(h,d,T)):(this.vertex(i,r,f),this.vertex(o,a,p),this.vertex(o,a,f),this.vertex(h,d,p),this.vertex(h,d,f),this.vertex(i,r,p))},ShapeRenderer2.prototype.quad=function(t,i,r,o,a,h,d,f,p,T,b,S,A){void 0===T&&(T=null),void 0===b&&(b=null),void 0===S&&(S=null),void 0===A&&(A=null),this.check(t?n.Filled:n.Line,3),this.mesh.getVertices(),this.vertexIndex,null===T&&(T=this.color),null===b&&(b=this.color),null===S&&(S=this.color),null===A&&(A=this.color),t?(this.vertex(i,r,T),this.vertex(o,a,b),this.vertex(h,d,S),this.vertex(h,d,S),this.vertex(f,p,A),this.vertex(i,r,T)):(this.vertex(i,r,T),this.vertex(o,a,b),this.vertex(o,a,b),this.vertex(h,d,S),this.vertex(h,d,S),this.vertex(f,p,A),this.vertex(f,p,A),this.vertex(i,r,T))},ShapeRenderer2.prototype.rect=function(t,i,n,r,o,a){void 0===a&&(a=null),this.quad(t,i,n,i+r,n,i+r,n+o,i,n+o,a,a,a,a)},ShapeRenderer2.prototype.rectLine=function(t,i,r,o,a,h,d){void 0===d&&(d=null),this.check(t?n.Filled:n.Line,8),null===d&&(d=this.color);var f=this.tmp.set(a-r,i-o);f.normalize(),h*=.5;var p=f.x*h,T=f.y*h;t?(this.vertex(i+p,r+T,d),this.vertex(i-p,r-T,d),this.vertex(o+p,a+T,d),this.vertex(o-p,a-T,d),this.vertex(o+p,a+T,d),this.vertex(i-p,r-T,d)):(this.vertex(i+p,r+T,d),this.vertex(i-p,r-T,d),this.vertex(o+p,a+T,d),this.vertex(o-p,a-T,d),this.vertex(o+p,a+T,d),this.vertex(i+p,r+T,d),this.vertex(o-p,a-T,d),this.vertex(i-p,r-T,d))},ShapeRenderer2.prototype.x=function(t,i,n){this.line(t-n,i-n,t+n,i+n),this.line(t-n,i+n,t+n,i-n)},ShapeRenderer2.prototype.polygon=function(t,i,r,o){if(void 0===o&&(o=null),r<3)throw new Error("Polygon must contain at least 3 vertices");this.check(n.Line,2*r),null===o&&(o=this.color),this.mesh.getVertices(),this.vertexIndex,r<<=1;for(var a=t[i<<=1],h=t[i+1],d=i+r,f=i,p=i+r-2;f<p;f+=2){var T=t[f],b=t[f+1],S=0,A=0;f+2>=d?(S=a,A=h):(S=t[f+2],A=t[f+3]),this.vertex(T,b,o),this.vertex(S,A,o)}},ShapeRenderer2.prototype.circle=function(i,r,o,a,h,d){if(void 0===h&&(h=null),void 0===d&&(d=0),0===d&&(d=Math.max(1,6*t.MathUtils.cbrt(a)|0)),d<=0)throw new Error("segments must be > 0.");null===h&&(h=this.color);var f=2*t.MathUtils.PI/d,p=Math.cos(f),T=Math.sin(f),b=a,S=0;if(i){for(this.check(n.Filled,3*d+3),d--,P=0;P<d;P++){this.vertex(r,o,h),this.vertex(r+b,o+S,h);var A=b;b=p*b-T*S,S=T*A+p*S,this.vertex(r+b,o+S,h)}this.vertex(r,o,h),this.vertex(r+b,o+S,h)}else{this.check(n.Line,2*d+2);for(var P=0;P<d;P++){this.vertex(r+b,o+S,h);var O=b;b=p*b-T*S,S=T*O+p*S,this.vertex(r+b,o+S,h)}this.vertex(r+b,o+S,h)}b=a,S=0,this.vertex(r+b,o+S,h)},ShapeRenderer2.prototype.curve=function(t,i,r,o,a,h,d,f,p,T){void 0===T&&(T=null),this.check(n.Line,2*p+2),null===T&&(T=this.color);for(var b=1/p,S=b*b,A=b*b*b,P=3*b,O=3*S,L=6*S,D=6*A,I=t-2*r+a,F=i-2*o+h,B=3*(r-a)-t+d,N=3*(o-h)-i+f,Y=t,X=i,G=(r-t)*P+I*O+B*A,U=(o-i)*P+F*O+N*A,V=I*L+B*D,z=F*L+N*D,W=B*D,H=N*D;p-- >0;)this.vertex(Y,X,T),Y+=G,X+=U,G+=V,U+=z,V+=W,z+=H,this.vertex(Y,X,T);this.vertex(Y,X,T),this.vertex(d,f,T)},ShapeRenderer2.prototype.vertex=function(t,i,n){var r=this.vertexIndex,o=this.mesh.getVertices();o[r++]=t,o[r++]=i,o[r++]=n.r,o[r++]=n.g,o[r++]=n.b,o[r++]=n.a,this.vertexIndex=r},ShapeRenderer2.prototype.end=function(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush(),this.context.gl.disable(this.context.gl.BLEND),this.isDrawing=!1},ShapeRenderer2.prototype.flush=function(){0!=this.vertexIndex&&(this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0)},ShapeRenderer2.prototype.check=function(t,i){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==t){if(!(this.mesh.maxVertices()-this.mesh.numVertices()<i))return;this.flush()}else this.flush(),this.shapeType=t},ShapeRenderer2.prototype.dispose=function(){this.mesh.dispose()},ShapeRenderer2}(),i.ShapeRenderer=o,(r=n=i.ShapeType||(i.ShapeType={}))[r.Point=0]="Point",r[r.Line=1]="Line",r[r.Filled=4]="Filled"}(a||(a={})),function(t){var i,n;i=t.webgl||(t.webgl={}),n=function(){function SkeletonDebugRenderer2(n){this.boneLineColor=new t.Color(1,0,0,1),this.boneOriginColor=new t.Color(0,1,0,1),this.attachmentLineColor=new t.Color(0,0,1,.5),this.triangleLineColor=new t.Color(1,.64,0,.5),this.pathColor=(new t.Color).setFromString("FF7F00"),this.clipColor=new t.Color(.8,0,0,2),this.aabbColor=new t.Color(0,1,0,.5),this.drawBones=!0,this.drawRegionAttachments=!0,this.drawBoundingBoxes=!0,this.drawMeshHull=!0,this.drawMeshTriangles=!0,this.drawPaths=!0,this.drawSkeletonXY=!1,this.drawClipping=!0,this.premultipliedAlpha=!1,this.scale=1,this.boneWidth=2,this.bounds=new t.SkeletonBounds,this.temp=new Array,this.vertices=t.Utils.newFloatArray(2048),this.context=n instanceof i.ManagedWebGLRenderingContext?n:new i.ManagedWebGLRenderingContext(n)}return SkeletonDebugRenderer2.prototype.draw=function(i,n,r){void 0===r&&(r=null);var o=n.x,a=n.y,h=this.context.gl,d=this.premultipliedAlpha?h.ONE:h.SRC_ALPHA;i.setBlendMode(d,h.ONE_MINUS_SRC_ALPHA);var f=n.bones;if(this.drawBones){i.setColor(this.boneLineColor);for(var p=0,T=f.length;p<T;p++){var b=f[p];if(!(r&&r.indexOf(b.data.name)>-1)&&null!=b.parent){var S=o+b.data.length*b.a+b.worldX,A=a+b.data.length*b.c+b.worldY;i.rectLine(!0,o+b.worldX,a+b.worldY,S,A,this.boneWidth*this.scale)}}this.drawSkeletonXY&&i.x(o,a,4*this.scale)}if(this.drawRegionAttachments)for(i.setColor(this.attachmentLineColor),p=0,T=(rt=n.slots).length;p<T;p++)if((at=(ot=rt[p]).getAttachment())instanceof t.RegionAttachment){var P=at,O=this.vertices;P.computeWorldVertices(ot.bone,O,0,2),i.line(O[0],O[1],O[2],O[3]),i.line(O[2],O[3],O[4],O[5]),i.line(O[4],O[5],O[6],O[7]),i.line(O[6],O[7],O[0],O[1])}if(this.drawMeshHull||this.drawMeshTriangles)for(p=0,T=(rt=n.slots).length;p<T;p++)if((ot=rt[p]).bone.active&&(at=ot.getAttachment())instanceof t.MeshAttachment){var L=at;O=this.vertices,L.computeWorldVertices(ot,0,L.worldVerticesLength,O,0,2);var D=L.triangles,I=L.hullLength;if(this.drawMeshTriangles){i.setColor(this.triangleLineColor);for(var F=0,B=D.length;F<B;F+=3){var N=2*D[F],Y=2*D[F+1],X=2*D[F+2];i.triangle(!1,O[N],O[N+1],O[Y],O[Y+1],O[X],O[X+1])}}if(this.drawMeshHull&&I>0){i.setColor(this.attachmentLineColor);var G=O[(I=2*(I>>1))-2],U=O[I-1];for(F=0,B=I;F<B;F+=2)S=O[F],A=O[F+1],i.line(S,A,G,U),G=S,U=A}}if(this.drawBoundingBoxes){var V=this.bounds;V.update(n,!0),i.setColor(this.aabbColor),i.rect(!1,V.minX,V.minY,V.getWidth(),V.getHeight());var z=V.polygons,W=V.boundingBoxes;for(p=0,T=z.length;p<T;p++){var H=z[p];i.setColor(W[p].color),i.polygon(H,0,H.length)}}if(this.drawPaths)for(p=0,T=(rt=n.slots).length;p<T;p++)if((ot=rt[p]).bone.active&&(at=ot.getAttachment())instanceof t.PathAttachment){var q=at,Z=(B=q.worldVerticesLength,this.temp=t.Utils.setArraySize(this.temp,B,0));q.computeWorldVertices(ot,0,B,Z,0,2);var K=this.pathColor,J=Z[2],Q=Z[3],$=0,tt=0;if(q.closed){i.setColor(K);var et=Z[0],it=Z[1],nt=Z[B-2],st=Z[B-1];$=Z[B-4],tt=Z[B-3],i.curve(J,Q,et,it,nt,st,$,tt,32),i.setColor(SkeletonDebugRenderer2.LIGHT_GRAY),i.line(J,Q,et,it),i.line($,tt,nt,st)}for(B-=4,F=4;F<B;F+=6)et=Z[F],it=Z[F+1],nt=Z[F+2],st=Z[F+3],$=Z[F+4],tt=Z[F+5],i.setColor(K),i.curve(J,Q,et,it,nt,st,$,tt,32),i.setColor(SkeletonDebugRenderer2.LIGHT_GRAY),i.line(J,Q,et,it),i.line($,tt,nt,st),J=$,Q=tt}if(this.drawBones)for(i.setColor(this.boneOriginColor),p=0,T=f.length;p<T;p++)b=f[p],r&&r.indexOf(b.data.name)>-1||i.circle(!0,o+b.worldX,a+b.worldY,3*this.scale,SkeletonDebugRenderer2.GREEN,8);if(this.drawClipping){var rt=n.slots;for(i.setColor(this.clipColor),p=0,T=rt.length;p<T;p++){var ot,at;if((ot=rt[p]).bone.active&&(at=ot.getAttachment())instanceof t.ClippingAttachment){var ht=at;B=ht.worldVerticesLength,Z=this.temp=t.Utils.setArraySize(this.temp,B,0),ht.computeWorldVertices(ot,0,B,Z,0,2);for(var lt=0,ut=Z.length;lt<ut;lt+=2)S=Z[lt],A=Z[lt+1],$=Z[(lt+2)%Z.length],tt=Z[(lt+3)%Z.length],i.line(S,A,$,tt)}}}},SkeletonDebugRenderer2.prototype.dispose=function(){},SkeletonDebugRenderer2.LIGHT_GRAY=new t.Color(192/255,192/255,192/255,1),SkeletonDebugRenderer2.GREEN=new t.Color(0,1,0,1),SkeletonDebugRenderer2}(),i.SkeletonDebugRenderer=n}(a||(a={})),function(t){var i,n,r;i=t.webgl||(t.webgl={}),n=function Renderable2(t,i,n){this.vertices=t,this.numVertices=i,this.numFloats=n},r=function(){function SkeletonRenderer2(i,r){void 0===r&&(r=!0),this.premultipliedAlpha=!1,this.vertexEffect=null,this.tempColor=new t.Color,this.tempColor2=new t.Color,this.vertexSize=8,this.twoColorTint=!1,this.renderable=new n(null,0,0),this.clipper=new t.SkeletonClipping,this.temp=new t.Vector2,this.temp2=new t.Vector2,this.temp3=new t.Color,this.temp4=new t.Color,this.twoColorTint=r,r&&(this.vertexSize+=4),this.vertices=t.Utils.newFloatArray(1024*this.vertexSize)}return SkeletonRenderer2.prototype.draw=function(n,r,o,a){void 0===o&&(o=-1),void 0===a&&(a=-1);var h=this.clipper,d=this.premultipliedAlpha,f=this.twoColorTint,p=null,T=this.temp,b=this.temp2,S=this.temp3,A=this.temp4,P=this.renderable,O=null,L=null,D=r.drawOrder,I=null,F=r.color,B=f?12:8,N=!1;-1==o&&(N=!0);for(var Y=0,X=D.length;Y<X;Y++){var G=h.isClipping()?2:B,U=D[Y];if(U.bone.active)if(o>=0&&o==U.data.index&&(N=!0),N){a>=0&&a==U.data.index&&(N=!1);var V=U.getAttachment(),z=null;if(V instanceof t.RegionAttachment){var W=V;P.vertices=this.vertices,P.numVertices=4,P.numFloats=G<<2,W.computeWorldVertices(U.bone,P.vertices,0,G),L=SkeletonRenderer2.QUAD_TRIANGLES,O=W.uvs,z=W.region.renderObject.texture,I=W.color}else{if(!(V instanceof t.MeshAttachment)){if(V instanceof t.ClippingAttachment){var H=V;h.clipStart(U,H);continue}h.clipEndWithSlot(U);continue}var q=V;P.vertices=this.vertices,P.numVertices=q.worldVerticesLength>>1,P.numFloats=P.numVertices*G,P.numFloats>P.vertices.length&&(P.vertices=this.vertices=t.Utils.newFloatArray(P.numFloats)),q.computeWorldVertices(U,0,q.worldVerticesLength,P.vertices,0,G),L=q.triangles,z=q.region.renderObject.texture,O=q.uvs,I=q.color}if(null!=z){var Z=U.color,K=this.tempColor;K.r=F.r*Z.r*I.r,K.g=F.g*Z.g*I.g,K.b=F.b*Z.b*I.b,K.a=F.a*Z.a*I.a,d&&(K.r*=K.a,K.g*=K.a,K.b*=K.a);var J=this.tempColor2;null==U.darkColor?J.set(0,0,0,1):(d?(J.r=U.darkColor.r*K.a,J.g=U.darkColor.g*K.a,J.b=U.darkColor.b*K.a):J.setFromColor(U.darkColor),J.a=d?1:0);var Q=U.data.blendMode;if(Q!=p&&(p=Q,n.setBlendMode(i.WebGLBlendModeConverter.getSourceGLBlendMode(p,d),i.WebGLBlendModeConverter.getDestGLBlendMode(p))),h.isClipping()){h.clipTriangles(P.vertices,P.numFloats,L,L.length,O,K,J,f);var $=new Float32Array(h.clippedVertices),tt=h.clippedTriangles;if(null!=this.vertexEffect){var et=this.vertexEffect,it=$;if(f){st=0;for(var nt=$.length;st<nt;st+=B)T.x=it[st],T.y=it[st+1],S.set(it[st+2],it[st+3],it[st+4],it[st+5]),b.x=it[st+6],b.y=it[st+7],A.set(it[st+8],it[st+9],it[st+10],it[st+11]),et.transform(T,b,S,A),it[st]=T.x,it[st+1]=T.y,it[st+2]=S.r,it[st+3]=S.g,it[st+4]=S.b,it[st+5]=S.a,it[st+6]=b.x,it[st+7]=b.y,it[st+8]=A.r,it[st+9]=A.g,it[st+10]=A.b,it[st+11]=A.a}else for(var st=0,rt=$.length;st<rt;st+=B)T.x=it[st],T.y=it[st+1],S.set(it[st+2],it[st+3],it[st+4],it[st+5]),b.x=it[st+6],b.y=it[st+7],A.set(0,0,0,0),et.transform(T,b,S,A),it[st]=T.x,it[st+1]=T.y,it[st+2]=S.r,it[st+3]=S.g,it[st+4]=S.b,it[st+5]=S.a,it[st+6]=b.x,it[st+7]=b.y}n.draw(z,$,tt)}else{if(it=P.vertices,null!=this.vertexEffect)if(et=this.vertexEffect,f){st=0,at=0;for(var ot=P.numFloats;st<ot;st+=B,at+=2)T.x=it[st],T.y=it[st+1],b.x=O[at],b.y=O[at+1],S.setFromColor(K),A.setFromColor(J),et.transform(T,b,S,A),it[st]=T.x,it[st+1]=T.y,it[st+2]=S.r,it[st+3]=S.g,it[st+4]=S.b,it[st+5]=S.a,it[st+6]=b.x,it[st+7]=b.y,it[st+8]=A.r,it[st+9]=A.g,it[st+10]=A.b,it[st+11]=A.a}else for(var st=0,at=0,ht=P.numFloats;st<ht;st+=B,at+=2)T.x=it[st],T.y=it[st+1],b.x=O[at],b.y=O[at+1],S.setFromColor(K),A.set(0,0,0,0),et.transform(T,b,S,A),it[st]=T.x,it[st+1]=T.y,it[st+2]=S.r,it[st+3]=S.g,it[st+4]=S.b,it[st+5]=S.a,it[st+6]=b.x,it[st+7]=b.y;else if(f){st=2,at=0;for(var lt=P.numFloats;st<lt;st+=B,at+=2)it[st]=K.r,it[st+1]=K.g,it[st+2]=K.b,it[st+3]=K.a,it[st+4]=O[at],it[st+5]=O[at+1],it[st+6]=J.r,it[st+7]=J.g,it[st+8]=J.b,it[st+9]=J.a}else{st=2;for(var at=0,ut=P.numFloats;st<ut;st+=B,at+=2)it[st]=K.r,it[st+1]=K.g,it[st+2]=K.b,it[st+3]=K.a,it[st+4]=O[at],it[st+5]=O[at+1]}var ct=P.vertices.subarray(0,P.numFloats);n.draw(z,ct,L)}}h.clipEndWithSlot(U)}else h.clipEndWithSlot(U);else h.clipEndWithSlot(U)}h.clipEnd()},SkeletonRenderer2.QUAD_TRIANGLES=[0,1,2,2,3,0],SkeletonRenderer2}(),i.SkeletonRenderer=r}(a||(a={})),function(t){var i,n;i=t.webgl||(t.webgl={}),n=function(){function Vector32(t,i,n){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=0,this.y=0,this.z=0,this.x=t,this.y=i,this.z=n}return Vector32.prototype.setFrom=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},Vector32.prototype.set=function(t,i,n){return this.x=t,this.y=i,this.z=n,this},Vector32.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},Vector32.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},Vector32.prototype.scale=function(t){return this.x*=t,this.y*=t,this.z*=t,this},Vector32.prototype.normalize=function(){var t=this.length();return 0==t||(t=1/t,this.x*=t,this.y*=t,this.z*=t),this},Vector32.prototype.cross=function(t){return this.set(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},Vector32.prototype.multiply=function(t){var n=t.values;return this.set(this.x*n[i.M00]+this.y*n[i.M01]+this.z*n[i.M02]+n[i.M03],this.x*n[i.M10]+this.y*n[i.M11]+this.z*n[i.M12]+n[i.M13],this.x*n[i.M20]+this.y*n[i.M21]+this.z*n[i.M22]+n[i.M23])},Vector32.prototype.project=function(t){var n=t.values,r=1/(this.x*n[i.M30]+this.y*n[i.M31]+this.z*n[i.M32]+n[i.M33]);return this.set((this.x*n[i.M00]+this.y*n[i.M01]+this.z*n[i.M02]+n[i.M03])*r,(this.x*n[i.M10]+this.y*n[i.M11]+this.z*n[i.M12]+n[i.M13])*r,(this.x*n[i.M20]+this.y*n[i.M21]+this.z*n[i.M22]+n[i.M23])*r)},Vector32.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},Vector32.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},Vector32.prototype.distance=function(t){var i=t.x-this.x,n=t.y-this.y,r=t.z-this.z;return Math.sqrt(i*i+n*n+r*r)},Vector32}(),i.Vector3=n}(a||(a={})),function(t){!function(i){var n=function(){function ManagedWebGLRenderingContext2(t,i){void 0===i&&(i={alpha:"true"}),this.restorables=new Array,t instanceof HTMLCanvasElement||t instanceof EventTarget?this.setupCanvas(t,i):(this.gl=t,this.canvas=this.gl.canvas)}return ManagedWebGLRenderingContext2.prototype.setupCanvas=function(t,i){var n=this;this.gl=t.getContext("webgl2",i)||t.getContext("webgl",i),this.canvas=t,t.addEventListener("webglcontextlost",(function(t){t&&t.preventDefault()})),t.addEventListener("webglcontextrestored",(function(t){for(var i=0,r=n.restorables.length;i<r;i++)n.restorables[i].restore()}))},ManagedWebGLRenderingContext2.prototype.addRestorable=function(t){this.restorables.push(t)},ManagedWebGLRenderingContext2.prototype.removeRestorable=function(t){var i=this.restorables.indexOf(t);i>-1&&this.restorables.splice(i,1)},ManagedWebGLRenderingContext2}();i.ManagedWebGLRenderingContext=n;var r=function(){function WebGLBlendModeConverter2(){}return WebGLBlendModeConverter2.getDestGLBlendMode=function(i){switch(i){case t.BlendMode.Normal:return WebGLBlendModeConverter2.ONE_MINUS_SRC_ALPHA;case t.BlendMode.Additive:return WebGLBlendModeConverter2.ONE;case t.BlendMode.Multiply:case t.BlendMode.Screen:return WebGLBlendModeConverter2.ONE_MINUS_SRC_ALPHA;default:throw new Error("Unknown blend mode: "+i)}},WebGLBlendModeConverter2.getSourceGLBlendMode=function(i,n){switch(void 0===n&&(n=!1),i){case t.BlendMode.Normal:case t.BlendMode.Additive:return n?WebGLBlendModeConverter2.ONE:WebGLBlendModeConverter2.SRC_ALPHA;case t.BlendMode.Multiply:return WebGLBlendModeConverter2.DST_COLOR;case t.BlendMode.Screen:return WebGLBlendModeConverter2.ONE;default:throw new Error("Unknown blend mode: "+i)}},WebGLBlendModeConverter2.ZERO=0,WebGLBlendModeConverter2.ONE=1,WebGLBlendModeConverter2.SRC_COLOR=768,WebGLBlendModeConverter2.ONE_MINUS_SRC_COLOR=769,WebGLBlendModeConverter2.SRC_ALPHA=770,WebGLBlendModeConverter2.ONE_MINUS_SRC_ALPHA=771,WebGLBlendModeConverter2.DST_ALPHA=772,WebGLBlendModeConverter2.ONE_MINUS_DST_ALPHA=773,WebGLBlendModeConverter2.DST_COLOR=774,WebGLBlendModeConverter2}();i.WebGLBlendModeConverter=r}(t.webgl||(t.webgl={}))}(a||(a={})),t.exports=a}).call(window)},function(t,i,n){var r=n(0),o=n(11),a=n(204),h=n(7),d=n(218),f=n(219),p=n(220),T=new r({Extends:f,initialize:function SpineFile2(t,i,n,r,a,T,b){var S,A,P,O=[],L=t.cacheManager.custom.spine;if(h(i)){var D=i;for(i=o(D,"key"),A=new d(t,{key:i,url:o(D,"jsonURL"),extension:o(D,"jsonExtension","json"),xhrSettings:o(D,"jsonXhrSettings")}),r=o(D,"atlasURL"),a=o(D,"preMultipliedAlpha"),Array.isArray(r)||(r=[r]),S=0;S<r.length;S++)(P=new p(t,{key:i+"!"+S,url:r[S],extension:o(D,"atlasExtension","atlas"),xhrSettings:o(D,"atlasXhrSettings")})).cache=L,O.push(P)}else for(A=new d(t,i,n,T),Array.isArray(r)||(r=[r]),S=0;S<r.length;S++)(P=new p(t,i+"!"+S,r[S],b)).cache=L,O.push(P);O.unshift(A),f.call(this,t,"spine",i,O),this.config.preMultipliedAlpha=a},onFileComplete:function(t){if(-1!==this.files.indexOf(t)&&(this.pending--,"text"===t.type)){for(var i=t.data.split("\n"),n=[],r=0;r<i.length;r++){var h=i[r];""===h.trim()&&r<i.length-1&&(h=i[r+1],n.push(h))}var d=this.config,f=this.loader,p=f.baseURL,T=f.path,b=f.prefix,S=o(d,"baseURL",this.baseURL),A=o(d,"path",t.src.match(/^.*\//))[0],P=o(d,"prefix",this.prefix),O=o(d,"textureXhrSettings");f.setBaseURL(S),f.setPath(A),f.setPrefix(P);for(var L=0;L<n.length;L++){var D=n[L],I=new a(f,D,D,O);f.keyExists(I)||(this.addToMultiFile(I),f.addFile(I))}f.setBaseURL(p),f.setPath(T),f.setPrefix(b)}},addToCache:function(){if(this.isReadyToProcess()){var t;this.files[0].addToCache();for(var i="",n="",r=!!this.config.preMultipliedAlpha,o=this.loader.textureManager,a=1;a<this.files.length;a++){var h=this.files[a];if("text"===h.type)i=h.key.replace(/![\d]$/,""),t=h.cache,n=n.concat(h.data);else{var d=h.key.trim(),f=d.indexOf("!"),p=d.substr(f+1);o.exists(p)||o.addImage(p,h.data)}h.pendingDestroy()}t.add(i,{preMultipliedAlpha:r,data:n,prefix:this.prefix}),this.complete=!0}}});t.exports=T},function(t,i,n){var r=n(0),o=n(15),a=n(21),h=n(22),d=n(11),f=n(7),p=new r({Extends:a,initialize:function ImageFile2(t,i,n,r,o){var h,p="png";if(f(i)){var T=i;i=d(T,"key"),n=d(T,"url"),h=d(T,"normalMap"),r=d(T,"xhrSettings"),p=d(T,"extension",p),o=d(T,"frameConfig")}Array.isArray(n)&&(h=n[1],n=n[0]);var b={type:"image",cache:t.textureManager,extension:p,responseType:"blob",key:i,url:n,xhrSettings:r,config:o};if(a.call(this,t,b),h){var S=new ImageFile2(t,this.key,h,r,o);S.type="normalMap",this.setLink(S),t.addFile(S)}},onProcess:function(){this.state=o.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var t=this;this.data.onload=function(){a.revokeObjectURL(t.data),t.onProcessComplete()},this.data.onerror=function(){a.revokeObjectURL(t.data),t.onProcessError()},a.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var t,i=this.linkFile;i&&i.state===o.FILE_COMPLETE?(t="image"===this.type?this.cache.addImage(this.key,this.data,i.data):this.cache.addImage(i.key,i.data,this.data),this.pendingDestroy(t),i.pendingDestroy(t)):i||(t=this.cache.addImage(this.key,this.data),this.pendingDestroy(t))}});h.register("image",(function(t,i,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new p(this,t[r]));else this.addFile(new p(this,t,i,n));return this})),t.exports=p},function(t,i,n){t.exports={ADD:n(206),COMPLETE:n(207),FILE_COMPLETE:n(208),FILE_KEY_COMPLETE:n(209),FILE_LOAD_ERROR:n(210),FILE_LOAD:n(211),FILE_PROGRESS:n(212),POST_PROCESS:n(213),PROGRESS:n(214),START:n(215)}},function(t,i){t.exports="addfile"},function(t,i){t.exports="complete"},function(t,i){t.exports="filecomplete"},function(t,i){t.exports="filecomplete-"},function(t,i){t.exports="loaderror"},function(t,i){t.exports="load"},function(t,i){t.exports="fileprogress"},function(t,i){t.exports="postprocess"},function(t,i){t.exports="progress"},function(t,i){t.exports="start"},function(t,i){t.exports=function(t,i){return!!t.url&&(t.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?t.url:i+t.url)}},function(t,i,n){var r=n(45);t.exports=function(t,i){var n=r(i,t.xhrSettings),o=new XMLHttpRequest;if(o.open("GET",t.src,n.async,n.user,n.password),o.responseType=t.xhrSettings.responseType,o.timeout=n.timeout,n.headers)for(var a in n.headers)o.setRequestHeader(a,n.headers[a]);return n.header&&n.headerValue&&o.setRequestHeader(n.header,n.headerValue),n.requestedWith&&o.setRequestHeader("X-Requested-With",n.requestedWith),n.overrideMimeType&&o.overrideMimeType(n.overrideMimeType),n.withCredentials&&(o.withCredentials=!0),o.onload=t.onLoad.bind(t,o),o.onerror=t.onError.bind(t,o),o.onprogress=t.onProgress.bind(t),o.send(),o}},function(t,i,n){var r=n(0),o=n(15),a=n(21),h=n(22),d=n(11),f=n(10),p=n(7),T=new r({Extends:a,initialize:function JSONFile2(t,i,n,r,h){var T="json";if(p(i)){var b=i;i=d(b,"key"),n=d(b,"url"),r=d(b,"xhrSettings"),T=d(b,"extension",T),h=d(b,"dataKey",h)}var S={type:"json",cache:t.cacheManager.json,extension:T,responseType:"text",key:i,url:n,xhrSettings:r,config:h};a.call(this,t,S),p(n)&&(this.data=h?f(n,h):n,this.state=o.FILE_POPULATED)},onProcess:function(){if(this.state!==o.FILE_POPULATED){this.state=o.FILE_PROCESSING;try{var t=JSON.parse(this.xhrLoader.responseText)}catch(n){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),n}var i=this.config;this.data="string"==typeof i?f(t,i,t):t}this.onProcessComplete()}});h.register("json",(function(t,i,n,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new T(this,t[o]));else this.addFile(new T(this,t,i,r,n));return this})),t.exports=T},function(t,i,n){var r=new(n(0))({initialize:function MultiFile2(t,i,n,r){var o=[];r.forEach((function(t){t&&o.push(t)})),this.loader=t,this.type=i,this.key=n,this.multiKeyIndex=t.multiKeyIndex++,this.files=o,this.complete=!1,this.pending=o.length,this.failed=0,this.config={},this.baseURL=t.baseURL,this.path=t.path,this.prefix=t.prefix;for(var a=0;a<o.length;a++)o[a].multiFile=this},isReadyToProcess:function(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function(t){return this.files.push(t),t.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(t){-1!==this.files.indexOf(t)&&this.pending--},onFileFailed:function(t){-1!==this.files.indexOf(t)&&this.failed++}});t.exports=r},function(t,i,n){var r=n(0),o=n(15),a=n(21),h=n(22),d=n(11),f=n(7),p=new r({Extends:a,initialize:function TextFile2(t,i,n,r){var o="text",h="txt",p=t.cacheManager.text;if(f(i)){var T=i;i=d(T,"key"),n=d(T,"url"),r=d(T,"xhrSettings"),h=d(T,"extension",h),o=d(T,"type",o),p=d(T,"cache",p)}var b={type:o,cache:p,extension:h,responseType:"text",key:i,url:n,xhrSettings:r};a.call(this,t,b)},onProcess:function(){this.state=o.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});h.register("text",(function(t,i,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new p(this,t[r]));else this.addFile(new p(this,t,i,n));return this})),t.exports=p},function(t,i,n){var r=n(28),o=n(3),a=n(0),h=n(47),d=n(48),f=n(49),p=n(50),T=n(51),b=n(52),S=n(8),A=n(19),P=n(53),O=n(9),L=n(243),D=n(250),I=new a({Extends:P,Mixins:[h,d,f,p,T,b,D],initialize:function SpineGameObject2(t,i,n,r,o,a,h){P.call(this,t,"Spine"),this.plugin=i,this.skeleton=null,this.skeletonData=null,this.state=null,this.stateData=null,this.root=null,this.bounds=null,this.drawDebug=!1,this.timeScale=1,this.displayOriginX=0,this.displayOriginY=0,this.preMultipliedAlpha=!1,this.blendMode=-1,this.setPosition(n,r),o&&this.setSkeleton(o,a,h)},willRender:function(t,i){var n=!this.skeleton||!(15!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id);if(!i&&!n&&this.parentContainer){var r=this.plugin,o=r.sceneRenderer;r.gl&&o.batcher.isDrawing&&(o.end(),r.renderer.pipelines.rebind())}return n},setAlpha:function(t,i){if(void 0===t&&(t=1),i){var n=this.findSlot(i);n&&(n.color.a=o(t,0,1))}else this.alpha=t;return this},alpha:{get:function(){return this.skeleton.color.a},set:function(t){var i=o(t,0,1);this.skeleton&&(this.skeleton.color.a=i),0===i?this.renderFlags&=-3:this.renderFlags|=2}},red:{get:function(){return this.skeleton.color.r},set:function(t){var i=o(t,0,1);this.skeleton&&(this.skeleton.color.r=i)}},green:{get:function(){return this.skeleton.color.g},set:function(t){var i=o(t,0,1);this.skeleton&&(this.skeleton.color.g=i)}},blue:{get:function(){return this.skeleton.color.b},set:function(t){var i=o(t,0,1);this.skeleton&&(this.skeleton.color.b=i)}},setColor:function(t,i){void 0===t&&(t=16777215);var n=(t>>16&255)/255,r=(t>>8&255)/255,o=(255&t)/255,a=t>16777215?(t>>>24)/255:null,h=this.skeleton;if(i){var d=this.findSlot(i);d&&(h=d)}return h.color.r=n,h.color.g=r,h.color.b=o,null!==a&&(h.color.a=a),this},setSkeletonFromJSON:function(t,i,n,r){return this.setSkeleton(t,i,n,r)},setSkeleton:function(t,i,n,r){this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications());var o=this.plugin.createSkeleton(t,r);this.skeletonData=o.skeletonData,this.preMultipliedAlpha=o.preMultipliedAlpha;var a=o.skeleton;return a.setSkin(),a.setToSetupPose(),this.skeleton=a,o=this.plugin.createAnimationState(a),this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications()),this.state=o.state,this.stateData=o.stateData,this.state.addListener({event:this.onEvent.bind(this),complete:this.onComplete.bind(this),start:this.onStart.bind(this),end:this.onEnd.bind(this),dispose:this.onDispose.bind(this),interrupted:this.onInterrupted.bind(this)}),i&&this.setAnimation(0,i,n),this.root=this.getRootBone(),this.root&&(this.root.rotation=O(S(this.rotation))+90),this.state.apply(a),a.updateCache(),this.updateSize()},onComplete:function(t){this.emit(L.COMPLETE,t)},onDispose:function(t){this.emit(L.DISPOSE,t)},onEnd:function(t){this.emit(L.END,t)},onEvent:function(t,i){this.emit(L.EVENT,t,i)},onInterrupted:function(t){this.emit(L.INTERRUPTED,t)},onStart:function(t){this.emit(L.START,t)},refresh:function(){return this.root&&(this.root.rotation=O(S(this.rotation))+90),this.updateSize(),this.skeleton.updateCache(),this},setSize:function(t,i,n,r){var o=this.skeleton;return void 0===t&&(t=o.data.width),void 0===i&&(i=o.data.height),void 0===n&&(n=0),void 0===r&&(r=0),this.width=t,this.height=i,this.displayOriginX=o.x-n,this.displayOriginY=o.y-r,this},setOffset:function(t,i){var n=this.skeleton;return void 0===t&&(t=0),void 0===i&&(i=0),this.displayOriginX=n.x-t,this.displayOriginY=n.y-i,this},updateSize:function(){var t=this.skeleton,i=this.plugin.renderer.height,n=this.scaleX,r=this.scaleY;t.x=this.x,t.y=i-this.y,t.scaleX=1,t.scaleY=1,t.updateWorldTransform();var o=this.getBounds();return this.width=o.size.x,this.height=o.size.y,this.displayOriginX=this.x-o.offset.x,this.displayOriginY=this.y-(i-(this.height+o.offset.y)),t.scaleX=n,t.scaleY=r,t.updateWorldTransform(),this},scaleX:{get:function(){return this._scaleX},set:function(t){this._scaleX=t,this.refresh()}},scaleY:{get:function(){return this._scaleY},set:function(t){this._scaleY=t,this.refresh()}},getBoneList:function(){var t=[],i=this.skeletonData;if(i)for(var n=0;n<i.bones.length;n++)t.push(i.bones[n].name);return t},getSkinList:function(){var t=[],i=this.skeletonData;if(i)for(var n=0;n<i.skins.length;n++)t.push(i.skins[n].name);return t},getSlotList:function(){for(var t=[],i=this.skeleton,n=0;n<i.slots.length;n++)t.push(i.slots[n].data.name);return t},getAnimationList:function(){var t=[],i=this.skeletonData;if(i)for(var n=0;n<i.animations.length;n++)t.push(i.animations[n].name);return t},getCurrentAnimation:function(t){void 0===t&&(t=0);var i=this.state.getCurrent(t);if(i)return i.animation},play:function(t,i,n){return this.setAnimation(0,t,i,n),this},setAnimation:function(t,i,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!1),r&&this.state){var o=this.state.getCurrent(t);if(o&&o.animation.name===i&&!o.isComplete())return}if(this.findAnimation(i))return this.state.setAnimation(t,i,n)},addAnimation:function(t,i,n,r){return void 0===n&&(n=!1),void 0===r&&(r=0),this.state.addAnimation(t,i,n,r)},setEmptyAnimation:function(t,i){return this.state.setEmptyAnimation(t,i)},clearTrack:function(t){return this.state.clearTrack(t),this},clearTracks:function(){return this.state.clearTracks(),this},setSkinByName:function(t){var i=this.skeleton;return i.setSkinByName(t),i.setSlotsToSetupPose(),this.state.apply(i),this},setSkin:function(t){var i=this.skeleton;return i.setSkin(t),i.setSlotsToSetupPose(),this.state.apply(i),this},setMix:function(t,i,n){return this.stateData.setMix(t,i,n),this},getAttachment:function(t,i){return this.skeleton.getAttachment(t,i)},getAttachmentByName:function(t,i){return this.skeleton.getAttachmentByName(t,i)},setAttachment:function(t,i){if(Array.isArray(t)&&Array.isArray(i)&&t.length===i.length)for(var n=0;n<t.length;n++)this.skeleton.setAttachment(t[n],i[n]);else this.skeleton.setAttachment(t,i);return this},setToSetupPose:function(){return this.skeleton.setToSetupPose(),this},setSlotsToSetupPose:function(){return this.skeleton.setSlotsToSetupPose(),this},setBonesToSetupPose:function(){return this.skeleton.setBonesToSetupPose(),this},getRootBone:function(){return this.skeleton.getRootBone()},angleBoneToXY:function(t,i,n,a,h,d){void 0===a&&(a=0),void 0===h&&(h=0),void 0===d&&(d=360);var f=this.plugin.renderer.height,p=S(r(t.worldX,f-t.worldY,i,n)+A(a));return t.rotation=o(O(p),h,d),this},findBone:function(t){return this.skeleton.findBone(t)},findBoneIndex:function(t){return this.skeleton.findBoneIndex(t)},findSlot:function(t){return this.skeleton.findSlot(t)},findSlotIndex:function(t){return this.skeleton.findSlotIndex(t)},findSkin:function(t){return this.skeletonData.findSkin(t)},findEvent:function(t){return this.skeletonData.findEvent(t)},findAnimation:function(t){return this.skeletonData.findAnimation(t)},findIkConstraint:function(t){return this.skeletonData.findIkConstraint(t)},findTransformConstraint:function(t){return this.skeletonData.findTransformConstraint(t)},findPathConstraint:function(t){return this.skeletonData.findPathConstraint(t)},findPathConstraintIndex:function(t){return this.skeletonData.findPathConstraintIndex(t)},getBounds:function(){return this.plugin.getBounds(this.skeleton)},preUpdate:function(t,i){var n=this.skeleton;this.state.update(i/1e3*this.timeScale),this.state.apply(n)},preDestroy:function(){this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications()),this.plugin=null,this.skeleton=null,this.skeletonData=null,this.state=null,this.stateData=null}});t.exports=I},function(t,i,n){var r=n(0),o=n(223),a=new r({initialize:function DataManager2(t,i){this.parent=t,this.events=i,i||(this.events=t.events?t.events:t),this.list={},this.values={},this._frozen=!1,!t.hasOwnProperty("sys")&&this.events&&this.events.once(o.DESTROY,this.destroy,this)},get:function(t){var i=this.list;if(Array.isArray(t)){for(var n=[],r=0;r<t.length;r++)n.push(i[t[r]]);return n}return i[t]},getAll:function(){var t={};for(var i in this.list)this.list.hasOwnProperty(i)&&(t[i]=this.list[i]);return t},query:function(t){var i={};for(var n in this.list)this.list.hasOwnProperty(n)&&n.match(t)&&(i[n]=this.list[n]);return i},set:function(t,i){if(this._frozen)return this;if("string"==typeof t)return this.setValue(t,i);for(var n in t)this.setValue(n,t[n]);return this},inc:function(t,i){if(this._frozen)return this;void 0===i&&(i=1);var n=this.get(t);return void 0===n&&(n=0),this.set(t,n+i),this},toggle:function(t){return this._frozen||this.set(t,!this.get(t)),this},setValue:function(t,i){if(this._frozen)return this;if(this.has(t))this.values[t]=i;else{var n=this,r=this.list,a=this.events,h=this.parent;Object.defineProperty(this.values,t,{enumerable:!0,configurable:!0,get:function(){return r[t]},set:function(i){if(!n._frozen){var d=r[t];r[t]=i,a.emit(o.CHANGE_DATA,h,t,i,d),a.emit(o.CHANGE_DATA_KEY+t,h,i,d)}}}),r[t]=i,a.emit(o.SET_DATA,h,t,i)}return this},each:function(t,i){for(var n=[this.parent,null,void 0],r=1;r<arguments.length;r++)n.push(arguments[r]);for(var o in this.list)n[1]=o,n[2]=this.list[o],t.apply(i,n);return this},merge:function(t,i){for(var n in void 0===i&&(i=!0),t)t.hasOwnProperty(n)&&(i||!i&&!this.has(n))&&this.setValue(n,t[n]);return this},remove:function(t){if(this._frozen)return this;if(!Array.isArray(t))return this.removeValue(t);for(var i=0;i<t.length;i++)this.removeValue(t[i]);return this},removeValue:function(t){if(this.has(t)){var i=this.list[t];delete this.list[t],delete this.values[t],this.events.emit(o.REMOVE_DATA,this.parent,t,i)}return this},pop:function(t){var i=void 0;return!this._frozen&&this.has(t)&&(i=this.list[t],delete this.list[t],delete this.values[t],this.events.emit(o.REMOVE_DATA,this.parent,t,i)),i},has:function(t){return this.list.hasOwnProperty(t)},setFreeze:function(t){return this._frozen=t,this},reset:function(){for(var t in this.list)delete this.list[t],delete this.values[t];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(o.CHANGE_DATA),this.events.off(o.SET_DATA),this.events.off(o.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(t){this._frozen=!!t}},count:{get:function(){var t=0;for(var i in this.list)void 0!==this.list[i]&&t++;return t}}});t.exports=a},function(t,i,n){t.exports={CHANGE_DATA:n(224),CHANGE_DATA_KEY:n(225),DESTROY:n(226),REMOVE_DATA:n(227),SET_DATA:n(228)}},function(t,i){t.exports="changedata"},function(t,i){t.exports="changedata-"},function(t,i){t.exports="destroy"},function(t,i){t.exports="removedata"},function(t,i){t.exports="setdata"},function(t,i,n){var r=Object.prototype.hasOwnProperty,o="~";function Events(){}function EE2(t,i,n){this.fn=t,this.context=i,this.once=n||!1}function addListener(t,i,n,r,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var h=new EE2(n,r||t,a),d=o?o+i:i;return t._events[d]?t._events[d].fn?t._events[d]=[t._events[d],h]:t._events[d].push(h):(t._events[d]=h,t._eventsCount++),t}function clearEvent(t,i){0==--t._eventsCount?t._events=new Events:delete t._events[i]}function EventEmitter2(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(o=!1)),EventEmitter2.prototype.eventNames=function eventNames(){var t,i,n=[];if(0===this._eventsCount)return n;for(i in t=this._events)r.call(t,i)&&n.push(o?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},EventEmitter2.prototype.listeners=function listeners(t){var i=o?o+t:t,n=this._events[i];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,a=n.length,h=new Array(a);r<a;r++)h[r]=n[r].fn;return h},EventEmitter2.prototype.listenerCount=function listenerCount(t){var i=o?o+t:t,n=this._events[i];return n?n.fn?1:n.length:0},EventEmitter2.prototype.emit=function emit(t,i,n,r,a,h){var d=o?o+t:t;if(!this._events[d])return!1;var f,p,T=this._events[d],b=arguments.length;if(T.fn){switch(T.once&&this.removeListener(t,T.fn,void 0,!0),b){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,i),!0;case 3:return T.fn.call(T.context,i,n),!0;case 4:return T.fn.call(T.context,i,n,r),!0;case 5:return T.fn.call(T.context,i,n,r,a),!0;case 6:return T.fn.call(T.context,i,n,r,a,h),!0}for(p=1,f=new Array(b-1);p<b;p++)f[p-1]=arguments[p];T.fn.apply(T.context,f)}else{var S,A=T.length;for(p=0;p<A;p++)switch(T[p].once&&this.removeListener(t,T[p].fn,void 0,!0),b){case 1:T[p].fn.call(T[p].context);break;case 2:T[p].fn.call(T[p].context,i);break;case 3:T[p].fn.call(T[p].context,i,n);break;case 4:T[p].fn.call(T[p].context,i,n,r);break;default:if(!f)for(S=1,f=new Array(b-1);S<b;S++)f[S-1]=arguments[S];T[p].fn.apply(T[p].context,f)}}return!0},EventEmitter2.prototype.on=function on(t,i,n){return addListener(this,t,i,n,!1)},EventEmitter2.prototype.once=function once(t,i,n){return addListener(this,t,i,n,!0)},EventEmitter2.prototype.removeListener=function removeListener(t,i,n,r){var a=o?o+t:t;if(!this._events[a])return this;if(!i)return clearEvent(this,a),this;var h=this._events[a];if(h.fn)h.fn!==i||r&&!h.once||n&&h.context!==n||clearEvent(this,a);else{for(var d=0,f=[],p=h.length;d<p;d++)(h[d].fn!==i||r&&!h[d].once||n&&h[d].context!==n)&&f.push(h[d]);f.length?this._events[a]=1===f.length?f[0]:f:clearEvent(this,a)}return this},EventEmitter2.prototype.removeAllListeners=function removeAllListeners(t){var i;return t?(i=o?o+t:t,this._events[i]&&clearEvent(this,i)):(this._events=new Events,this._eventsCount=0),this},EventEmitter2.prototype.off=EventEmitter2.prototype.removeListener,EventEmitter2.prototype.addListener=EventEmitter2.prototype.on,EventEmitter2.prefixed=o,EventEmitter2.EventEmitter=EventEmitter2,t.exports=EventEmitter2},function(t,i){t.exports="addedtoscene"},function(t,i){t.exports="destroy"},function(t,i){t.exports="removedfromscene"},function(t,i){t.exports="complete"},function(t,i){t.exports="created"},function(t,i){t.exports="error"},function(t,i){t.exports="loop"},function(t,i){t.exports="play"},function(t,i){t.exports="seeked"},function(t,i){t.exports="seeking"},function(t,i){t.exports="stop"},function(t,i){t.exports="timeout"},function(t,i){t.exports="unlocked"},function(t,i,n){t.exports={COMPLETE:n(244),DISPOSE:n(245),END:n(246),EVENT:n(247),INTERRUPTED:n(248),START:n(249)}},function(t,i){t.exports="complete"},function(t,i){t.exports="dispose"},function(t,i){t.exports="end"},function(t,i){t.exports="event"},function(t,i){t.exports="interrupted"},function(t,i){t.exports="start"},function(t,i,n){var r=n(1),o=n(1),a=n(1);r=n(251),a=n(252),o=n(253),t.exports={renderWebGL:r,renderCanvas:o,renderDirect:a}},function(t,i,n){var r=n(3),o=n(8),a=n(56),h=n(9),d=n(6);t.exports=function(t,i,n,f,p){var T=i.plugin,b=i.skeleton,S=T.sceneRenderer;t.newType&&(t.pipelines.clear(),S.begin());var A=i.scrollFactorX,P=i.scrollFactorY,O=b.color.a;p&&(i.scrollFactorX=p.scrollFactorX,i.scrollFactorY=p.scrollFactorY,b.color.a=r(O*p.alpha,0,1)),n.addToRenderList(i);var L=a(i,n,f).calc,D=t.height;if(b.x=L.tx,b.y=D-L.ty,b.scaleX=L.scaleX,b.scaleY=L.scaleY,i.scaleX<0?(b.scaleX*=-1,i.root.rotation=d(h(L.rotationNormalized)-180,0,360)):i.root.rotation=d(h(o(L.rotationNormalized))+90,0,360),i.scaleY<0&&(b.scaleY*=-1,i.scaleX<0?i.root.rotation-=2*h(L.rotationNormalized):i.root.rotation+=2*h(L.rotationNormalized)),b.updateWorldTransform(),S.drawSkeleton(b,i.preMultipliedAlpha),p&&(i.scrollFactorX=A,i.scrollFactorY=P,b.color.a=O),T.drawDebug||i.drawDebug){var I=b.x,F=b.y;b.x=0,b.y=0,S.drawSkeletonDebug(b,i.preMultipliedAlpha),b.x=I,b.y=F}t.nextTypeMatch||(S.end(),t.pipelines.rebind())}},function(t,i,n){var r=n(3),o=n(8),a=n(56),h=n(9),d=n(6);t.exports=function(t,i,n,f,p){var T=i.plugin,b=i.skeleton,S=T.sceneRenderer;t.pipelines.clear(),S.begin();var A=i.scrollFactorX,P=i.scrollFactorY,O=b.color.a;p&&(i.scrollFactorX=p.scrollFactorX,i.scrollFactorY=p.scrollFactorY,b.color.a=r(O*p.alpha,0,1)),n.addToRenderList(i);var L=a(i,n,f).calc,D=t.height;if(b.x=L.tx,b.y=D-L.ty,b.scaleX=L.scaleX,b.scaleY=L.scaleY,i.scaleX<0?(b.scaleX*=-1,i.root.rotation=d(h(L.rotationNormalized)-180,0,360)):i.root.rotation=d(h(o(L.rotationNormalized))+90,0,360),i.scaleY<0&&(b.scaleY*=-1,i.scaleX<0?i.root.rotation-=2*h(L.rotationNormalized):i.root.rotation+=2*h(L.rotationNormalized)),b.updateWorldTransform(),S.drawSkeleton(b,i.preMultipliedAlpha),p&&(i.scrollFactorX=A,i.scrollFactorY=P,b.color.a=O),T.drawDebug||i.drawDebug){var I=b.x,F=b.y;b.x=0,b.y=0,S.drawSkeletonDebug(b,i.preMultipliedAlpha),b.x=I,b.y=F}S.end(),t.pipelines.rebind()}},function(t,i,n){var r=n(8),o=n(9),a=n(6);t.exports=function(t,i,n,h){var d=t.currentContext,f=i.plugin,p=i.skeleton,T=f.skeletonRenderer,b=t._tempMatrix1,S=t._tempMatrix2,A=t._tempMatrix3;n.addToRenderList(i),S.applyITRS(i.x,i.y,i.rotation,Math.abs(i.scaleX),Math.abs(i.scaleY)),b.copyFrom(n.matrix),h?(b.multiplyWithOffset(h,-n.scrollX*i.scrollFactorX,-n.scrollY*i.scrollFactorY),S.e=i.x,S.f=i.y,b.multiply(S,A)):(S.e-=n.scrollX*i.scrollFactorX,S.f-=n.scrollY*i.scrollFactorY,b.multiply(S,A)),p.x=A.tx,p.y=A.ty,p.scaleX=A.scaleX,p.scaleY=-1*A.scaleY,i.scaleX<0?(p.scaleX*=-1,i.root.rotation=o(A.rotationNormalized)):i.root.rotation=a(o(r(A.rotationNormalized))+90,0,360),i.scaleY<0&&(p.scaleY*=-1,i.scaleX<0?i.root.rotation-=2*o(A.rotationNormalized):i.root.rotation+=2*o(A.rotationNormalized)),n.renderToTexture&&(p.y=A.ty,p.scaleY*=-1),p.updateWorldTransform(),T.ctx=d,T.debugRendering=f.drawDebug||i.drawDebug,d.save(),T.draw(p),d.restore()}},function(t,i,n){var r=n(0),o=n(255),a=n(347),h=new r({Extends:o,Mixins:[a],initialize:function SpineContainer2(t,i,n,r,a){o.call(this,t,n,r,a),this.type="Spine",this.plugin=i},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[],this._displayList=null,this.plugin=null}});t.exports=h},function(t,i,n){var r=n(256),o=n(17),a=n(0),h=n(293),d=n(55),f=n(53),p=n(25),T=n(343),b=n(346),S=n(2),A=new a({Extends:f,Mixins:[h.AlphaSingle,h.BlendMode,h.ComputedSize,h.Depth,h.Mask,h.Pipeline,h.Transform,h.Visible,T],initialize:function Container2(t,i,n,r){f.call(this,t,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new h.TransformMatrix,this.tempTransformMatrix=new h.TransformMatrix,this._sortKey="",this._sysEvents=t.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(i,n),this.clearAlpha(),this.setBlendMode(o.SKIP_CHECK),r&&this.add(r)},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return.5*this.width}},displayOriginY:{get:function(){return.5*this.height}},setExclusive:function(t){return void 0===t&&(t=!0),this.exclusive=t,this},getBounds:function(t){if(void 0===t&&(t=new p),t.setTo(this.x,this.y,0,0),this.parentContainer){var i=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y);t.setTo(i.x,i.y,0,0)}if(this.list.length>0){var n=this.list,r=new p,o=!1;t.setEmpty();for(var a=0;a<n.length;a++){var h=n[a];h.getBounds&&(h.getBounds(r),o?b(r,t,t):(t.setTo(r.x,r.y,r.width,r.height),o=!0))}}return t},addHandler:function(t){t.once(d.DESTROY,this.remove,this),this.exclusive&&(t.parentContainer&&t.parentContainer.remove(t),t.removeFromDisplayList(),t.parentContainer=this)},removeHandler:function(t){t.off(d.DESTROY,this.remove),this.exclusive&&(t.parentContainer=null,t.addToDisplayList())},pointToContainer:function(t,i){void 0===i&&(i=new S),this.parentContainer?this.parentContainer.pointToContainer(t,i):i=new S(t.x,t.y);var n=this.tempTransformMatrix;return n.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),n.invert(),n.transformPoint(t.x,t.y,i),i},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(t){return r.Add(this.list,t,this.maxSize,this.addHandler,this),this},addAt:function(t,i){return r.AddAt(this.list,t,i,this.maxSize,this.addHandler,this),this},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,i){return t?(void 0===i&&(i=function(i,n){return i[t]-n[t]}),r.StableSort(this.list,i),this):this},getByName:function(t){return r.GetFirst(this.list,"name",t)},getRandom:function(t,i){return r.GetRandom(this.list,t,i)},getFirst:function(t,i,n,o){return r.GetFirst(this.list,t,i,n,o)},getAll:function(t,i,n,o){return r.GetAll(this.list,t,i,n,o)},count:function(t,i,n,o){return r.CountAllMatching(this.list,t,i,n,o)},swap:function(t,i){return r.Swap(this.list,t,i),this},moveTo:function(t,i){return r.MoveTo(this.list,t,i),this},remove:function(t,i){var n=r.Remove(this.list,t,this.removeHandler,this);if(i&&n){Array.isArray(n)||(n=[n]);for(var o=0;o<n.length;o++)n[o].destroy()}return this},removeAt:function(t,i){var n=r.RemoveAt(this.list,t,this.removeHandler,this);return i&&n&&n.destroy(),this},removeBetween:function(t,i,n){var o=r.RemoveBetween(this.list,t,i,this.removeHandler,this);if(n)for(var a=0;a<o.length;a++)o[a].destroy();return this},removeAll:function(t){var i=r.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(t)for(var n=0;n<i.length;n++)i[n].destroy();return this},bringToTop:function(t){return r.BringToTop(this.list,t),this},sendToBack:function(t){return r.SendToBack(this.list,t),this},moveUp:function(t){return r.MoveUp(this.list,t),this},moveDown:function(t){return r.MoveDown(this.list,t),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return r.Shuffle(this.list),this},replace:function(t,i,n){return r.Replace(this.list,t,i)&&(this.addHandler(i),this.removeHandler(t),n&&t.destroy()),this},exists:function(t){return this.list.indexOf(t)>-1},setAll:function(t,i,n,o){return r.SetAll(this.list,t,i,n,o),this},each:function(t,i){var n,r=[null],o=this.list.slice(),a=o.length;for(n=2;n<arguments.length;n++)r.push(arguments[n]);for(n=0;n<a;n++)r[0]=o[n],t.apply(i,r);return this},iterate:function(t,i){var n,r=[null];for(n=2;n<arguments.length;n++)r.push(arguments[n]);for(n=0;n<this.list.length;n++)r[0]=this.list[n],t.apply(i,r);return this},setScrollFactor:function(t,i,n){return void 0===i&&(i=t),void 0===n&&(n=!1),this.scrollFactorX=t,this.scrollFactorY=i,n&&(r.SetAll(this.list,"scrollFactorX",t),r.SetAll(this.list,"scrollFactorY",i)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});t.exports=A},function(t,i,n){t.exports={Matrix:n(257),Add:n(266),AddAt:n(267),BringToTop:n(268),CountAllMatching:n(269),Each:n(270),EachInRange:n(271),FindClosestInSorted:n(272),GetAll:n(273),GetFirst:n(274),GetRandom:n(275),MoveDown:n(276),MoveTo:n(277),MoveUp:n(278),NumberArray:n(279),NumberArrayStep:n(280),QuickSelect:n(281),Range:n(282),Remove:n(283),RemoveAt:n(284),RemoveBetween:n(285),RemoveRandomElement:n(286),Replace:n(287),RotateLeft:n(58),RotateRight:n(59),SafeRange:n(5),SendToBack:n(288),SetAll:n(289),Shuffle:n(60),SortByDigits:n(290),SpliceOne:n(12),StableSort:n(291),Swap:n(292)}},function(t,i,n){t.exports={CheckMatrix:n(24),MatrixToString:n(258),ReverseColumns:n(260),ReverseRows:n(261),Rotate180:n(262),RotateLeft:n(263),RotateMatrix:n(16),RotateRight:n(264),Translate:n(265),TransposeMatrix:n(57)}},function(t,i,n){var r=n(259),o=n(24);t.exports=function(t){var i="";if(!o(t))return i;for(var n=0;n<t.length;n++){for(var a=0;a<t[n].length;a++){var h=t[n][a].toString();i+="undefined"!==h?r(h,2):"?",a<t[n].length-1&&(i+=" |")}if(n<t.length-1){i+="\n";for(var d=0;d<t[n].length;d++)i+="---",d<t[n].length-1&&(i+="+");i+="\n"}}return i}},function(t,i){t.exports=function(t,i,n,r){void 0===i&&(i=0),void 0===n&&(n=" "),void 0===r&&(r=3);var o=0;if(i+1>=(t=t.toString()).length)switch(r){case 1:t=new Array(i+1-t.length).join(n)+t;break;case 3:var a=Math.ceil((o=i-t.length)/2);t=new Array(o-a+1).join(n)+t+new Array(a+1).join(n);break;default:t+=new Array(i+1-t.length).join(n)}return t}},function(t,i){t.exports=function(t){return t.reverse()}},function(t,i){t.exports=function(t){for(var i=0;i<t.length;i++)t[i].reverse();return t}},function(t,i,n){var r=n(16);t.exports=function(t){return r(t,180)}},function(t,i,n){var r=n(16);t.exports=function(t){return r(t,90)}},function(t,i,n){var r=n(16);t.exports=function(t){return r(t,-90)}},function(t,i,n){var r=n(58),o=n(59);t.exports=function(t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),0!==n&&(n<0?r(t,Math.abs(n)):o(t,n)),0!==i)for(var a=0;a<t.length;a++){var h=t[a];i<0?r(h,Math.abs(i)):o(h,i)}return t}},function(t,i){t.exports=function(t,i,n,r,o){if(void 0===o&&(o=t),n>0){var a=n-t.length;if(a<=0)return null}if(!Array.isArray(i))return-1===t.indexOf(i)?(t.push(i),r&&r.call(o,i),i):null;for(var h=i.length-1;h>=0;)-1!==t.indexOf(i[h])&&i.splice(h,1),h--;if(0===(h=i.length))return null;n>0&&h>a&&(i.splice(a),h=a);for(var d=0;d<h;d++){var f=i[d];t.push(f),r&&r.call(o,f)}return i}},function(t,i){t.exports=function(t,i,n,r,o,a){if(void 0===n&&(n=0),void 0===a&&(a=t),r>0){var h=r-t.length;if(h<=0)return null}if(!Array.isArray(i))return-1===t.indexOf(i)?(t.splice(n,0,i),o&&o.call(a,i),i):null;for(var d=i.length-1;d>=0;)-1!==t.indexOf(i[d])&&i.pop(),d--;if(0===(d=i.length))return null;r>0&&d>h&&(i.splice(h),d=h);for(var f=d-1;f>=0;f--){var p=i[f];t.splice(n,0,p),o&&o.call(a,p)}return i}},function(t,i){t.exports=function(t,i){var n=t.indexOf(i);return-1!==n&&n<t.length&&(t.splice(n,1),t.push(i)),i}},function(t,i,n){var r=n(5);t.exports=function(t,i,n,o,a){void 0===o&&(o=0),void 0===a&&(a=t.length);var h=0;if(r(t,o,a))for(var d=o;d<a;d++){t[d][i]===n&&h++}return h}},function(t,i){t.exports=function(t,i,n){var r,o=[null];for(r=3;r<arguments.length;r++)o.push(arguments[r]);for(r=0;r<t.length;r++)o[0]=t[r],i.apply(n,o);return t}},function(t,i,n){var r=n(5);t.exports=function(t,i,n,o,a){if(void 0===o&&(o=0),void 0===a&&(a=t.length),r(t,o,a)){var h,d=[null];for(h=5;h<arguments.length;h++)d.push(arguments[h]);for(h=o;h<a;h++)d[0]=t[h],i.apply(n,d)}return t}},function(t,i){t.exports=function(t,i,n){if(!i.length)return NaN;if(1===i.length)return i[0];var r,o,a=1;if(n){if(t<i[0][n])return i[0];for(;i[a][n]<t;)a++}else for(;i[a]<t;)a++;return a>i.length&&(a=i.length),n?(r=i[a-1][n],(o=i[a][n])-t<=t-r?i[a]:i[a-1]):(r=i[a-1],(o=i[a])-t<=t-r?o:r)}},function(t,i,n){var r=n(5);t.exports=function(t,i,n,o,a){void 0===o&&(o=0),void 0===a&&(a=t.length);var h=[];if(r(t,o,a))for(var d=o;d<a;d++){var f=t[d];(!i||i&&void 0===n&&f.hasOwnProperty(i)||i&&void 0!==n&&f[i]===n)&&h.push(f)}return h}},function(t,i,n){var r=n(5);t.exports=function(t,i,n,o,a){if(void 0===o&&(o=0),void 0===a&&(a=t.length),r(t,o,a))for(var h=o;h<a;h++){var d=t[h];if(!i||i&&void 0===n&&d.hasOwnProperty(i)||i&&void 0!==n&&d[i]===n)return d}return null}},function(t,i){t.exports=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=t.length);var r=i+Math.floor(Math.random()*n);return void 0===t[r]?null:t[r]}},function(t,i){t.exports=function(t,i){var n=t.indexOf(i);if(n>0){var r=t[n-1],o=t.indexOf(r);t[n]=r,t[o]=i}return t}},function(t,i){t.exports=function(t,i,n){var r=t.indexOf(i);if(-1===r||n<0||n>=t.length)throw new Error("Supplied index out of bounds");return r!==n&&(t.splice(r,1),t.splice(n,0,i)),i}},function(t,i){t.exports=function(t,i){var n=t.indexOf(i);if(-1!==n&&n<t.length-1){var r=t[n+1],o=t.indexOf(r);t[n]=r,t[o]=i}return t}},function(t,i){t.exports=function(t,i,n,r){var o,a=[],h=!1;if((n||r)&&(h=!0,n||(n=""),r||(r="")),i<t)for(o=t;o>=i;o--)h?a.push(n+o.toString()+r):a.push(o);else for(o=t;o<=i;o++)h?a.push(n+o.toString()+r):a.push(o);return a}},function(t,i,n){var r=n(40);t.exports=function(t,i,n){void 0===t&&(t=0),void 0===i&&(i=null),void 0===n&&(n=1),null===i&&(i=t,t=0);for(var o=[],a=Math.max(r((i-t)/(n||1)),0),h=0;h<a;h++)o.push(t),t+=n;return o}},function(t,i){function swap(t,i,n){var r=t[i];t[i]=t[n],t[n]=r}function defaultCompare(t,i){return t<i?-1:t>i?1:0}var QuickSelect=function(t,i,n,r,o){for(void 0===n&&(n=0),void 0===r&&(r=t.length-1),void 0===o&&(o=defaultCompare);r>n;){if(r-n>600){var a=r-n+1,h=i-n+1,d=Math.log(a),f=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*f*(a-f)/a)*(h-a/2<0?-1:1),T=Math.max(n,Math.floor(i-h*f/a+p)),b=Math.min(r,Math.floor(i+(a-h)*f/a+p));QuickSelect(t,i,T,b,o)}var S=t[i],A=n,P=r;for(swap(t,n,i),o(t[r],S)>0&&swap(t,n,r);A<P;){for(swap(t,A,P),A++,P--;o(t[A],S)<0;)A++;for(;o(t[P],S)>0;)P--}0===o(t[n],S)?swap(t,n,P):swap(t,++P,r),P<=i&&(n=P+1),i<=P&&(r=P-1)}};t.exports=QuickSelect},function(t,i,n){var r=n(10),o=n(60),BuildChunk=function(t,i,n){for(var r=[],o=0;o<t.length;o++)for(var a=0;a<i.length;a++)for(var h=0;h<n;h++)r.push({a:t[o],b:i[a]});return r};t.exports=function(t,i,n){var a=r(n,"max",0),h=r(n,"qty",1),d=r(n,"random",!1),f=r(n,"randomB",!1),p=r(n,"repeat",0),T=r(n,"yoyo",!1),b=[];if(f&&o(i),-1===p)if(0===a)p=0;else{var S=t.length*i.length*h;T&&(S*=2),p=Math.ceil(a/S)}for(var A=0;A<=p;A++){var P=BuildChunk(t,i,h);d&&o(P),b=b.concat(P),T&&(P.reverse(),b=b.concat(P))}return a&&b.splice(a),b}},function(t,i,n){var r=n(12);t.exports=function(t,i,n,o){var a;if(void 0===o&&(o=t),!Array.isArray(i))return-1!==(a=t.indexOf(i))?(r(t,a),n&&n.call(o,i),i):null;for(var h=i.length-1,d=[];h>=0;){var f=i[h];-1!==(a=t.indexOf(f))&&(r(t,a),d.push(f),n&&n.call(o,f)),h--}return d}},function(t,i,n){var r=n(12);t.exports=function(t,i,n,o){if(void 0===o&&(o=t),i<0||i>t.length-1)throw new Error("Index out of bounds");var a=r(t,i);return n&&n.call(o,a),a}},function(t,i,n){var r=n(5);t.exports=function(t,i,n,o,a){if(void 0===i&&(i=0),void 0===n&&(n=t.length),void 0===a&&(a=t),r(t,i,n)){var h=n-i,d=t.splice(i,h);if(o)for(var f=0;f<d.length;f++){var p=d[f];o.call(a,p)}return d}return[]}},function(t,i,n){var r=n(12);t.exports=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=t.length);var o=i+Math.floor(Math.random()*n);return r(t,o)}},function(t,i){t.exports=function(t,i,n){var r=t.indexOf(i),o=t.indexOf(n);return-1!==r&&-1===o&&(t[r]=n,!0)}},function(t,i){t.exports=function(t,i){var n=t.indexOf(i);return-1!==n&&n>0&&(t.splice(n,1),t.unshift(i)),i}},function(t,i,n){var r=n(5);t.exports=function(t,i,n,o,a){if(void 0===o&&(o=0),void 0===a&&(a=t.length),r(t,o,a))for(var h=o;h<a;h++){var d=t[h];d.hasOwnProperty(i)&&(d[i]=n)}return t}},function(t,i){t.exports=function(t){var i=/\D/g;return t.sort((function(t,n){return parseInt(t.replace(i,""),10)-parseInt(n.replace(i,""),10)})),t}},function(t,i){function Compare(t,i){return String(t).localeCompare(i)}function RunPass(t,i,n,r){var o,a,h,d,f,p=t.length,T=0,b=2*n;for(o=0;o<p;o+=b)for(h=(a=o+n)+n,a>p&&(a=p),h>p&&(h=p),d=o,f=a;;)if(d<a&&f<h)i(t[d],t[f])<=0?r[T++]=t[d++]:r[T++]=t[f++];else if(d<a)r[T++]=t[d++];else{if(!(f<h))break;r[T++]=t[f++]}}t.exports=function(t,i){void 0===i&&(i=Compare);var n=function Process(t,i){var n=t.length;if(n<=1)return t;for(var r=new Array(n),o=1;o<n;o*=2){RunPass(t,i,o,r);var a=t;t=r,r=a}return t}(t,i);return n!==t&&RunPass(n,null,t.length,t),t}},function(t,i){t.exports=function(t,i,n){if(i!==n){var r=t.indexOf(i),o=t.indexOf(n);if(r<0||o<0)throw new Error("Supplied items must be elements of the same array");return t[r]=n,t[o]=i,t}}},function(t,i,n){t.exports={Alpha:n(294),AlphaSingle:n(295),BlendMode:n(296),ComputedSize:n(47),Crop:n(297),Depth:n(48),Flip:n(49),GetBounds:n(298),Mask:n(307),Origin:n(332),PathFollower:n(333),Pipeline:n(336),ScrollFactor:n(50),Size:n(339),Texture:n(340),TextureCrop:n(341),Tint:n(342),ToJSON:n(54),Transform:n(51),TransformMatrix:n(23),Visible:n(52)}},function(t,i,n){var r=n(3),o={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t,i,n,o){return void 0===t&&(t=1),void 0===i?this.alpha=t:(this._alphaTL=r(t,0,1),this._alphaTR=r(i,0,1),this._alphaBL=r(n,0,1),this._alphaBR=r(o,0,1)),this},alpha:{get:function(){return this._alpha},set:function(t){var i=r(t,0,1);this._alpha=i,this._alphaTL=i,this._alphaTR=i,this._alphaBL=i,this._alphaBR=i,0===i?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(t){var i=r(t,0,1);this._alphaTL=i,0!==i&&(this.renderFlags|=2)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(t){var i=r(t,0,1);this._alphaTR=i,0!==i&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(t){var i=r(t,0,1);this._alphaBL=i,0!==i&&(this.renderFlags|=2)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(t){var i=r(t,0,1);this._alphaBR=i,0!==i&&(this.renderFlags|=2)}}};t.exports=o},function(t,i,n){var r=n(3),o={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t){return void 0===t&&(t=1),this.alpha=t,this},alpha:{get:function(){return this._alpha},set:function(t){var i=r(t,0,1);this._alpha=i,0===i?this.renderFlags&=-3:this.renderFlags|=2}}};t.exports=o},function(t,i,n){var r=n(17),o={_blendMode:r.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(t){"string"==typeof t&&(t=r[t]),(t|=0)>=-1&&(this._blendMode=t)}},setBlendMode:function(t){return this.blendMode=t,this}};t.exports=o},function(t,i){t.exports={texture:null,frame:null,isCropped:!1,setCrop:function(t,i,n,r){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,i,n,r,this.flipX,this.flipY);else{var o=t;this.frame.setCropUVs(this._crop,o.x,o.y,o.width,o.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},function(t,i,n){var r=n(25),o=n(39),a=n(2),h={prepareBoundsOutput:function(t,i){(void 0===i&&(i=!1),0!==this.rotation&&o(t,this.x,this.y,this.rotation),i&&this.parentContainer)&&this.parentContainer.getBoundsTransformMatrix().transformPoint(t.x,t.y,t);return t},getCenter:function(t){return void 0===t&&(t=new a),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,t},getTopLeft:function(t,i){return t||(t=new a),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,i)},getTopCenter:function(t,i){return t||(t=new a),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,i)},getTopRight:function(t,i){return t||(t=new a),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,i)},getLeftCenter:function(t,i){return t||(t=new a),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,i)},getRightCenter:function(t,i){return t||(t=new a),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,i)},getBottomLeft:function(t,i){return t||(t=new a),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,i)},getBottomCenter:function(t,i){return t||(t=new a),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,i)},getBottomRight:function(t,i){return t||(t=new a),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,i)},getBounds:function(t){var i,n,o,a,h,d,f,p;if(void 0===t&&(t=new r),this.parentContainer){var T=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(t),T.transformPoint(t.x,t.y,t),i=t.x,n=t.y,this.getTopRight(t),T.transformPoint(t.x,t.y,t),o=t.x,a=t.y,this.getBottomLeft(t),T.transformPoint(t.x,t.y,t),h=t.x,d=t.y,this.getBottomRight(t),T.transformPoint(t.x,t.y,t),f=t.x,p=t.y}else this.getTopLeft(t),i=t.x,n=t.y,this.getTopRight(t),o=t.x,a=t.y,this.getBottomLeft(t),h=t.x,d=t.y,this.getBottomRight(t),f=t.x,p=t.y;return t.x=Math.min(i,o,h,f),t.y=Math.min(n,a,d,p),t.width=Math.max(i,o,h,f)-t.x,t.height=Math.max(n,a,d,p)-t.y,t}};t.exports=h},function(t,i){t.exports=function(t,i,n){return!(t.width<=0||t.height<=0)&&(t.x<=i&&t.x+t.width>=i&&t.y<=n&&t.y+t.height>=n)}},function(t,i,n){var r=n(61),o=n(62);t.exports=function(t,i,n,a){void 0===a&&(a=[]),!i&&n>0&&(i=o(t)/n);for(var h=0;h<i;h++){var d=h/i;a.push(r(t,d))}return a}},function(t,i,n){var r=n(0),o=n(302),a=n(303),h=n(26),d=n(305),f=n(2),p=new r({initialize:function Line4(t,i,n,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),this.type=h.LINE,this.x1=t,this.y1=i,this.x2=n,this.y2=r},getPoint:function(t,i){return o(this,t,i)},getPoints:function(t,i,n){return a(this,t,i,n)},getRandomPoint:function(t){return d(this,t)},setTo:function(t,i,n,r){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x1=t,this.y1=i,this.x2=n,this.y2=r,this},getPointA:function(t){return void 0===t&&(t=new f),t.set(this.x1,this.y1),t},getPointB:function(t){return void 0===t&&(t=new f),t.set(this.x2,this.y2),t},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(t){this.y1>this.y2?this.y1=t:this.y2=t}}});t.exports=p},function(t,i,n){var r=n(13);t.exports=function(t,i,n){return void 0===n&&(n=new r),n.x=t.x1+(t.x2-t.x1)*i,n.y=t.y1+(t.y2-t.y1)*i,n}},function(t,i,n){var r=n(304),o=n(13);t.exports=function(t,i,n,a){void 0===a&&(a=[]),!i&&n>0&&(i=r(t)/n);for(var h=t.x1,d=t.y1,f=t.x2,p=t.y2,T=0;T<i;T++){var b=T/i,S=h+(f-h)*b,A=d+(p-d)*b;a.push(new o(S,A))}return a}},function(t,i){t.exports=function(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))}},function(t,i,n){var r=n(13);t.exports=function(t,i){void 0===i&&(i=new r);var n=Math.random();return i.x=t.x1+n*(t.x2-t.x1),i.y=t.y1+n*(t.y2-t.y1),i}},function(t,i,n){var r=n(13);t.exports=function(t,i){return void 0===i&&(i=new r),i.x=t.x+Math.random()*t.width,i.y=t.y+Math.random()*t.height,i}},function(t,i,n){var r=n(308),o=n(331),a={mask:null,setMask:function(t){return this.mask=t,this},clearMask:function(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(t){return void 0===t&&(this.texture||this.shader)&&(t=this),new r(this.scene,t)},createGeometryMask:function(t){return void 0===t&&"Graphics"===this.type&&(t=this),new o(this.scene,t)}};t.exports=a},function(t,i,n){var r=n(0),o=n(309),a=n(326),h=new r({initialize:function BitmapMask2(t,i){var n=t.sys.renderer;this.renderer=n,this.bitmapMask=i,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),t.sys.game.events.on(o.CONTEXT_RESTORED,this.createMask,this),n&&n.on(a.RESIZE,this.createMask,this)},createMask:function(){var t=this.renderer;if(t&&t.gl){this.mainTexture&&this.clearMask();var i=t.width,n=t.height,r=0==(i&i-1)&&0==(n&n-1),o=t.gl,a=r?o.REPEAT:o.CLAMP_TO_EDGE,h=o.LINEAR;this.mainTexture=t.createTexture2D(0,h,h,a,a,o.RGBA,null,i,n),this.maskTexture=t.createTexture2D(0,h,h,a,a,o.RGBA,null,i,n),this.mainFramebuffer=t.createFramebuffer(i,n,this.mainTexture,!0),this.maskFramebuffer=t.createFramebuffer(i,n,this.maskTexture,!0)}},clearMask:function(){var t=this.renderer;t&&t.gl&&this.mainTexture&&(t.deleteTexture(this.mainTexture),t.deleteTexture(this.maskTexture),t.deleteFramebuffer(this.mainFramebuffer),t.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(t){this.bitmapMask=t},preRenderWebGL:function(t,i,n){t.pipelines.BITMAPMASK_PIPELINE.beginMask(this,i,n)},postRenderWebGL:function(t,i){t.pipelines.BITMAPMASK_PIPELINE.endMask(this,i)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(a.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});t.exports=h},function(t,i,n){t.exports={BLUR:n(310),BOOT:n(311),CONTEXT_LOST:n(312),CONTEXT_RESTORED:n(313),DESTROY:n(314),FOCUS:n(315),HIDDEN:n(316),PAUSE:n(317),POST_RENDER:n(318),POST_STEP:n(319),PRE_RENDER:n(320),PRE_STEP:n(321),READY:n(322),RESUME:n(323),STEP:n(324),VISIBLE:n(325)}},function(t,i){t.exports="blur"},function(t,i){t.exports="boot"},function(t,i){t.exports="contextlost"},function(t,i){t.exports="contextrestored"},function(t,i){t.exports="destroy"},function(t,i){t.exports="focus"},function(t,i){t.exports="hidden"},function(t,i){t.exports="pause"},function(t,i){t.exports="postrender"},function(t,i){t.exports="poststep"},function(t,i){t.exports="prerender"},function(t,i){t.exports="prestep"},function(t,i){t.exports="ready"},function(t,i){t.exports="resume"},function(t,i){t.exports="step"},function(t,i){t.exports="visible"},function(t,i,n){t.exports={POST_RENDER:n(327),PRE_RENDER:n(328),RENDER:n(329),RESIZE:n(330)}},function(t,i){t.exports="postrender"},function(t,i){t.exports="prerender"},function(t,i){t.exports="render"},function(t,i){t.exports="resize"},function(t,i,n){var r=new(n(0))({initialize:function GeometryMask2(t,i){this.geometryMask=i,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(t){return this.geometryMask=t,this},setInvertAlpha:function(t){return void 0===t&&(t=!0),this.invertAlpha=t,this},preRenderWebGL:function(t,i,n){var r=t.gl;t.flush(),0===t.maskStack.length&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),t.maskCount=0),t.currentCameraMask.mask!==this&&(t.currentMask.mask=this),t.maskStack.push({mask:this,camera:n}),this.applyStencil(t,n,!0),t.maskCount++},applyStencil:function(t,i,n){var r=t.gl,o=this.geometryMask,a=t.maskCount;r.colorMask(!1,!1,!1,!1),n?(r.stencilFunc(r.EQUAL,a,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,a+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),o.renderWebGL(t,o,i),t.flush(),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),n?this.invertAlpha?r.stencilFunc(r.NOTEQUAL,a+1,255):r.stencilFunc(r.EQUAL,a+1,255):this.invertAlpha?r.stencilFunc(r.NOTEQUAL,a,255):r.stencilFunc(r.EQUAL,a,255)},postRenderWebGL:function(t){var i=t.gl;t.maskStack.pop(),t.maskCount--,t.flush();var n=t.currentMask;if(0===t.maskStack.length)n.mask=null,i.disable(i.STENCIL_TEST);else{var r=t.maskStack[t.maskStack.length-1];r.mask.applyStencil(t,r.camera,!1),t.currentCameraMask.mask!==r.mask?(n.mask=r.mask,n.camera=r.camera):n.mask=null}},preRenderCanvas:function(t,i,n){var r=this.geometryMask;t.currentContext.save(),r.renderCanvas(t,r,n,null,null,!0),t.currentContext.clip()},postRenderCanvas:function(t){t.currentContext.restore()},destroy:function(){this.geometryMask=null}});t.exports=r},function(t,i){t.exports={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function(t,i){return void 0===t&&(t=.5),void 0===i&&(i=t),this.originX=t,this.originY=i,this.updateDisplayOrigin()},setOriginFromFrame:function(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.displayOriginX=t,this.displayOriginY=i,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}}},function(t,i,n){var r=n(19),o=n(334),a=n(10),h=n(335),d=n(2),f={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:h.PLAYING_FORWARD,setPath:function(t,i){void 0===i&&(i=this.pathConfig);var n=this.pathTween;return n&&n.isPlaying()&&n.stop(),this.path=t,i&&this.startFollow(i),this},setRotateToPath:function(t,i){return void 0===i&&(i=0),this.rotateToPath=t,this.pathRotationOffset=i,this},isFollowing:function(){var t=this.pathTween;return t&&t.isPlaying()},startFollow:function(t,i){void 0===t&&(t={}),void 0===i&&(i=0);var n=this.pathTween;n&&n.isPlaying()&&n.stop(),"number"==typeof t&&(t={duration:t}),t.from=a(t,"from",0),t.to=a(t,"to",1);var f=o(t,"positionOnPath",!1);this.rotateToPath=o(t,"rotateToPath",!1),this.pathRotationOffset=a(t,"rotationOffset",0);var p=a(t,"startAt",i);if(p&&(t.onStart=function(t){var i=t.data[0];i.progress=p,i.elapsed=i.duration*p;var n=i.ease(i.progress);i.current=i.start+(i.end-i.start)*n,i.target[i.key]=i.current}),this.pathOffset||(this.pathOffset=new d(this.x,this.y)),this.pathVector||(this.pathVector=new d),this.pathDelta||(this.pathDelta=new d),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(t),this.path.getStartPoint(this.pathOffset),f&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=h.PLAYING_FORWARD,this.rotateToPath){var T=this.path.getPoint(.1);this.rotation=Math.atan2(T.y-this.y,T.x-this.x)+r(this.pathRotationOffset)}return this.pathConfig=t,this},pauseFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.pause(),this},resumeFollow:function(){var t=this.pathTween;return t&&t.isPaused()&&t.resume(),this},stopFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.stop(),this},pathUpdate:function(){var t=this.pathTween;if(t){var i=t.data[0],n=this.pathDelta,o=this.pathVector;if(n.copy(o).negate(),i.state===h.COMPLETE)return this.path.getPoint(1,o),n.add(o),o.add(this.pathOffset),void this.setPosition(o.x,o.y);if(i.state!==h.PLAYING_FORWARD&&i.state!==h.PLAYING_BACKWARD)return;this.path.getPoint(t.getValue(),o),n.add(o),o.add(this.pathOffset);var a=this.x,d=this.y;this.setPosition(o.x,o.y);var f=this.x-a,p=this.y-d;if(0===f&&0===p)return;if(i.state!==this._prevDirection)return void(this._prevDirection=i.state);this.rotateToPath&&(this.rotation=Math.atan2(p,f)+r(this.pathRotationOffset))}}};t.exports=f},function(t,i){t.exports=function(t,i,n){return t&&t.hasOwnProperty(i)?t[i]:n}},function(t,i){t.exports={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26}},function(t,i,n){var r=n(337),o=n(338),a=n(12),h={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(t){void 0===t&&(t=o.MULTI_PIPELINE);var i=this.scene.sys.renderer;if(!i)return!1;var n=i.pipelines;if(this.postPipelines=[],this.pipelineData={},n){var r=n.get(t);if(r)return this.defaultPipeline=r,this.pipeline=r,!0}return!1},setPipeline:function(t,i,n){var o=this.scene.sys.renderer;if(!o)return this;var a=o.pipelines;if(a){var h=a.get(t);h&&(this.pipeline=h),i&&(this.pipelineData=n?r(i):i)}return this},setPostPipeline:function(t,i,n){var o=this.scene.sys.renderer;if(!o)return this;var a=o.pipelines;if(a){Array.isArray(t)||(t=[t]);for(var h=0;h<t.length;h++){var d=a.getPostPipeline(t[h],this);d&&this.postPipelines.push(d)}i&&(this.pipelineData=n?r(i):i)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(t,i){var n=this.pipelineData;return void 0===i?delete n[t]:n[t]=i,this},getPostPipeline:function(t){for(var i=this.postPipelines,n=[],r=0;r<i.length;r++){var o=i[r];("string"==typeof t&&o.name===t||o instanceof t)&&n.push(o)}return 1===n.length?n[0]:n},resetPipeline:function(t,i){return void 0===t&&(t=!1),void 0===i&&(i=!1),this.pipeline=this.defaultPipeline,t&&(this.postPipelines=[],this.hasPostPipeline=!1),i&&(this.pipelineData={}),null!==this.pipeline},resetPostPipeline:function(t){void 0===t&&(t=!1);for(var i=this.postPipelines,n=0;n<i.length;n++)i[n].destroy();this.postPipelines=[],this.hasPostPipeline=!1,t&&(this.pipelineData={})},removePostPipeline:function(t){for(var i=this.postPipelines,n=i.length-1;n>=0;n--){var r=i[n];("string"==typeof t&&r.name===t||"string"!=typeof t&&r instanceof t)&&(r.destroy(),a(i,n))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};t.exports=h},function(t,i){var DeepCopy=function(t){var i,n,r;if("object"!=typeof t||null===t)return t;for(r in i=Array.isArray(t)?[]:{},t)n=t[r],i[r]=DeepCopy(n);return i};t.exports=DeepCopy},function(t,i){t.exports={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"}},function(t,i){var n={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function(t){return void 0===t&&(t=this.frame),this.width=t.realWidth,this.height=t.realHeight,this},setSize:function(t,i){return this.width=t,this.height=i,this},setDisplaySize:function(t,i){return this.displayWidth=t,this.displayHeight=i,this}};t.exports=n},function(t,i){var n={texture:null,frame:null,isCropped:!1,setTexture:function(t,i){return this.texture=this.scene.sys.textures.get(t),this.setFrame(i)},setFrame:function(t,i,n){return void 0===i&&(i=!0),void 0===n&&(n=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&i&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};t.exports=n},function(t,i){var n={texture:null,frame:null,isCropped:!1,setCrop:function(t,i,n,r){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,i,n,r,this.flipX,this.flipY);else{var o=t;this.frame.setCropUVs(this._crop,o.x,o.y,o.width,o.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(t,i){return this.texture=this.scene.sys.textures.get(t),this.setFrame(i)},setFrame:function(t,i,n){return void 0===i&&(i=!0),void 0===n&&(n=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&i&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};t.exports=n},function(t,i){t.exports={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(t,i,n,r){return void 0===t&&(t=16777215),void 0===i&&(i=t,n=t,r=t),this.tintTopLeft=t,this.tintTopRight=i,this.tintBottomLeft=n,this.tintBottomRight=r,this.tintFill=!1,this},setTintFill:function(t,i,n,r){return this.setTint(t,i,n,r),this.tintFill=!0,this},tint:{set:function(t){this.setTint(t,t,t,t)}},isTinted:{get:function(){var t=16777215;return this.tintFill||this.tintTopLeft!==t||this.tintTopRight!==t||this.tintBottomLeft!==t||this.tintBottomRight!==t}}}},function(t,i,n){var r=n(1),o=n(1);r=n(344),o=n(345),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i){t.exports=function(t,i,n,r){var o=i.list,a=o.length;if(0!==a){n.addToRenderList(i);var h=i.localTransform;r?(h.loadIdentity(),h.multiply(r),h.translate(i.x,i.y),h.rotate(i.rotation),h.scale(i.scaleX,i.scaleY)):h.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY),t.pipelines.preBatch(i);var d=-1!==i.blendMode;d||t.setBlendMode(0);for(var f=i.alpha,p=i.scrollFactorX,T=i.scrollFactorY,b=0;b<a;b++){var S=o[b];if(S.willRender(n)){var A,P,O,L;if(void 0!==S.alphaTopLeft)A=S.alphaTopLeft,P=S.alphaTopRight,O=S.alphaBottomLeft,L=S.alphaBottomRight;else{var D=S.alpha;A=D,P=D,O=D,L=D}var I=S.scrollFactorX,F=S.scrollFactorY;d||S.blendMode===t.currentBlendMode||t.setBlendMode(S.blendMode);var B=S.mask;B&&B.preRenderWebGL(t,S,n);var N=S.type;N!==t.currentType&&(t.newType=!0,t.currentType=N),t.nextTypeMatch=b<a-1&&o[b+1].type===t.currentType,S.setScrollFactor(I*p,F*T),S.setAlpha(A*f,P*f,O*f,L*f),S.renderWebGL(t,S,n,h),S.setAlpha(A,P,O,L),S.setScrollFactor(I,F),B&&B.postRenderWebGL(t,n),t.newType=!1}}t.pipelines.postBatch(i)}}},function(t,i){t.exports=function(t,i,n,r){var o=i.list;if(0!==o.length){n.addToRenderList(i);var a=i.localTransform;r?(a.loadIdentity(),a.multiply(r),a.translate(i.x,i.y),a.rotate(i.rotation),a.scale(i.scaleX,i.scaleY)):a.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY);var h=-1!==i.blendMode;h||t.setBlendMode(0);var d=i._alpha,f=i.scrollFactorX,p=i.scrollFactorY;i.mask&&i.mask.preRenderCanvas(t,null,n);for(var T=0;T<o.length;T++){var b=o[T];if(b.willRender(n)){var S=b.alpha,A=b.scrollFactorX,P=b.scrollFactorY;h||b.blendMode===t.currentBlendMode||t.setBlendMode(b.blendMode),b.setScrollFactor(A*f,P*p),b.setAlpha(S*d),b.renderCanvas(t,b,n,a),b.setAlpha(S),b.setScrollFactor(A,P)}}i.mask&&i.mask.postRenderCanvas(t)}}},function(t,i,n){var r=n(25);t.exports=function(t,i,n){void 0===n&&(n=new r);var o=Math.min(t.x,i.x),a=Math.min(t.y,i.y),h=Math.max(t.right,i.right)-o,d=Math.max(t.bottom,i.bottom)-a;return n.setTo(o,a,h,d)}},function(t,i,n){var r=n(1),o=n(1);r=n(348),o=n(349),t.exports={renderWebGL:r,renderCanvas:o}},function(t,i){t.exports=function(t,i,n,r){var o=i.plugin.sceneRenderer,a=i.list;if(0!==a.length){n.addToRenderList(i);var h=i.localTransform;r?(h.loadIdentity(),h.multiply(r),h.translate(i.x,i.y),h.rotate(i.rotation),h.scale(i.scaleX,i.scaleY)):h.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY),t.newType&&(t.pipelines.clear(),o.begin());var d=t.nextTypeMatch;t.nextTypeMatch=!0,t.newType=!1;for(var f=0;f<a.length;f++){var p=a[f];if(p.willRender(n,i)){var T=p.mask;T&&(o.end(),t.pipelines.rebind(),T.preRenderWebGL(t,p,n),t.pipelines.clear(),o.begin()),p.renderWebGL(t,p,n,h,i),T&&(o.end(),t.pipelines.rebind(),T.postRenderWebGL(t,n),t.pipelines.clear(),o.begin())}}t.nextTypeMatch=d,d||(o.end(),t.pipelines.rebind())}else o.batcher.isDrawing&&t.finalType&&(o.end(),t.pipelines.rebind())}},function(t,i){t.exports=function(t,i,n,r){var o=i.list;if(0!==o.length){n.addToRenderList(i);var a=i.localTransform;r?(a.loadIdentity(),a.multiply(r),a.translate(i.x,i.y),a.rotate(i.rotation),a.scale(i.scaleX,i.scaleY)):a.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY);var h=-1!==i.blendMode;h||t.setBlendMode(0);var d=i._alpha,f=i.scrollFactorX,p=i.scrollFactorY;i.mask&&i.mask.preRenderCanvas(t,null,n);for(var T=0;T<o.length;T++){var b=o[T];if(b.willRender(n)){var S=b.alpha,A=b.scrollFactorX,P=b.scrollFactorY;h||b.blendMode===t.currentBlendMode||t.setBlendMode(b.blendMode),b.setScrollFactor(A*f,P*p),b.setAlpha(S*d),b.renderCanvas(t,b,n,a),b.setAlpha(S),b.setScrollFactor(A,P)}}i.mask&&i.mask.postRenderCanvas(t)}}}]);class EngineInitVO{constructor(){this.data={flagOverrides:{},gameName:null,gameVersion:"_v1",gameSubEngineConfig:null,preloaderInitialsAssetsNames:{manifestJson:null,font:null,logo:null},initialAssetPackData:null,funcStartGame:null,funcRegisterComponents:null,funcDoGameRegisters:null,requiredScreenOrientation:"any"}}}const Pr={scene:[{key:"spine",plugin:window.SpinePlugin,start:!0,sceneKey:"spine",mapping:"spine"},{key:"rexGestures",plugin:GesturesPlugin,start:!0,sceneKey:"rexGestures",mapping:"rexGestures"},{key:"rexBoard",plugin:BoardPlugin,mapping:"rexBoard"}],global:[{key:"rexEaseMove",plugin:EaseMovePlugin,start:!0,sceneKey:"rexEaseMove",mapping:"rexEaseMove"},{key:"rexCsvScenario",plugin:CSVScenarioPlugin,start:!0,sceneKey:"rexCsvScenario",mapping:"rexCsvScenario"},{key:"rexMoveTo",plugin:MoveToPlugin,start:!0,sceneKey:"rexMoveTo",mapping:"rexMoveTo"},{key:"rexBullet",plugin:BulletPlugin,start:!0,sceneKey:"rexBullet",mapping:"rexBullet"},{key:"rexRotateTo",plugin:RotateToPlugin,start:!0}]};class BMEngine{static EnableEditor(){kr.enabled=!0}static IsCanvas(){return Lr.phaserGameObject.renderer.type===r.CANVAS}static SetGameplayCameraOffset(t=0,i=0,n=!1){Or.camera.x=t,Or.camera.y=i,n&&_InternalUpdateCamera()}static GetGameplayCameraOffset(){return Or.camera}static SetCameraCenter(t=!0,i=!1){Or.camera.centerX=t,Or.camera.centerY=i}static SetPauseAllowedByStates(t){Or.pauseAllowedByStates=t}static TryPauseGame(){if(0==Or.flags.allowPauseAlways){if(!Or.pauseAllowedByStates)return;if(!Or.pauseAllowedAfterStartGame)return}return!Or.hasBeenPaused&&(InternalPauseModel.PauseGameScenes(),!0)}static TryUnpauseGame(){return!!Or.hasBeenPaused&&(InternalPauseModel.UnPauseGameScenes(),!0)}static UserMuteAudio(){Or.audio.wasMutedManually=!0,Dr.MuteAudio(),InternalSaveModel.SaveGameSettings()}static UserUnmuteAudio(){Or.audio.wasMutedManually=!1,Dr.UnmuteAudio(),InternalSaveModel.SaveGameSettings()}static PlayAudioFile(t,i=null,n=null){let r;if(Lr.soundInstanceCache[t])r=Lr.soundInstanceCache[t];else{if(!BMEngine.GetPhaserGame().cache.audio.exists(t))return void console.log("RETURNING, FAIL QUIETLY - NO AUDIO :",t);Or.audioConfigCache[t]||(Or.audioConfigCache[t]={volume:1,loop:!1},n&&b(Or.audioConfigCache[t],n));const i=Or.audioConfigCache[t];r=BMEngine.GetPhaserGame().sound.add(t,i)}r.play(),Lr.soundInstanceCache[t]=r}static GetAudioState(){return Or.audio.audioState}static GetDisplayDataCopy(){return b({},Or.display)}static GetPhaserGame(){return Lr.phaserGameObject}static GetGameplayScene(){return console.assert(Lr.phaserScenes.game.ref,Lr.phaserScenes.game),Lr.phaserScenes.game.ref}static GetAudioModelInstance(){return Dr}static GetGameplayCamera(){return BMEngine.GetGameplayScene().cameras.main}static GetRightForGameplayScene(){const t=BMEngine.GetGameplayScene().cameras.main.worldView;return t.width+t.x}static GetInterfaceScene(){return console.assert(Lr.phaserScenes.gameInterface.ref,Lr.phaserScenes.gameInterface),Lr.phaserScenes.gameInterface.ref}static GetEditorScene(){return Lr.phaserScenes.pauseDisplayer.ref}static GetFileFromCache(t,i){return Lr.phaserGameObject.cache[t].get(i)}static IsRotationDisplayed(){return Or.isRotationDisplayActive}static GetOrMakeContainerLayer(t,i,n,r){const o=t+"_"+i+n+"_"+r;if(!Lr.phaserLayers[o]){if("gameplay"==t){const t=BMEngine.GetGameplayScene().make.container({},!1);BMEngine.GetGameplayScene().add.existing(t),t.setDepth(1e4*r),Lr.phaserLayers[o]={layer:t,anchorX:1,anchorY:1}}else{let a;"gui"==t?(a=BMEngine.GetInterfaceScene().make.container({},!1),BMEngine.GetInterfaceScene().add.existing(a)):"pause"==t&&(a=Lr.phaserScenes.pauseDisplayer.ref.make.container({},!1),Lr.phaserScenes.pauseDisplayer.ref.add.existing(a)),a.setDepth(1e4*r);let h=i,d=n;Lr.phaserLayers[o]={layer:a,anchorX:h,anchorY:d}}_InternalRepositionLayers()}return Lr.phaserLayers[o].layer}static GetSaveSlotReference(t){return InternalSaveModel.LoadGameData(t)}static SaveGame(){InternalSaveModel.SaveCurrentSlot()}}const Or={refGameSave:{},refGameState:null,audioConfigCache:{},audio:{wasMutedManually:!1,wasMutedAutomatically:!1,audioState:1},pausedFromRotation:!1,isRotationDisplayActive:!1,hasBeenPaused:!1,pauseAllowedAfterStartGame:!1,pauseAllowedByStates:!1,flags:{disableSaveUserPrefs:0,disableSaveGameData:0,disableFakeMusicPreload:0,cordovaListenersEnabled:0,disableAutoPause:0,allowPauseAlways:0},camera:{x:0,y:0,centerX:!0,centerY:!1},display:{designWidth:1,designHeight:1,responsiveWidth:1,responsiveHeight:1,dpi:1,lastWidth:1,lastHeight:1},currentOrientation:"any",requiredOrientation:"any",gameManifestJSON:null,initVO:null},kr={enabled:!1},Lr={gameSubEngineConfig:{},phaserGameObject:null,phaserLayers:{},soundInstanceCache:{},phaserScenes:{preloader:{ref:null,def:null,loadedPreloaderInitials:!1,loadedGameAssets:!1,assetsRealLoadPercentage:0,assetsRealLoadDone:!1,funcRefUpdatePreloaderFont:null,funcRefCompletePreload:null,extraMaxRequiredTime:5e3,extraCurRequiredTime:0},resizeHandler:{ref:null,def:null},pauseDisplayer:{ref:null,def:null},rotateDisplayer:{ref:null,def:null,layer:null,bg:null,rotateHelper:null},controlPauseGameLoop:{ref:null,def:null},game:{ref:null,def:null},gameInterface:{ref:null,def:null}}};function UsePhaserSubEngine(t){b(Or.flags,t.data.flagOverrides);const i=b(Lr.gameSubEngineConfig,t.data.gameSubEngineConfig);kr.enabled&&(i.backgroundColor="0x000000"),Or.requiredOrientation=t.data.requiredScreenOrientation,Or.initVO=t,InternalSaveModel.LoadGameSettings(),t.data.funcDoGameRegisters();const n=t.data.preloaderInitialsAssetsNames,o=t.data.initialAssetPackData,a=t.data.funcStartGame;let h=!1;GetOs().android&&function GetBrowser(){if(G)return X;G=!0;var t=navigator.userAgent;return/Edge\/\d+/.test(t)?X.edge=!0:/Chrome\/(\d+)/.test(t)&&!GetOs().windowsPhone?(X.chrome=!0,X.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(t)?(X.firefox=!0,X.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(t)&&GetOs().iOS?X.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(t)?(X.ie=!0,X.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(t)?X.opera=!0:/Safari/.test(t)&&!GetOs().windowsPhone?X.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(t)&&(X.ie=!0,X.trident=!0,X.tridentVersion=parseInt(RegExp.$1,10),X.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(t)&&(X.silk=!0),X}().firefox&&(i.type=r.CANVAS),!GetOs().desktop&&GetOs().iOS&&(h=!0),GetOs().desktop&&GetOs().macOS&&(h=!0),i.fps={forceSetTimeOut:!1,target:60},h&&(i.type=r.CANVAS,i.fps={forceSetTimeOut:!0,target:60},i.roundPixels=!1),i.type=D.GetSingleton().onGetRendererTypeOverride(i.type);const recalcDisplayValues=function(){if(GetOs().desktop)Or.display.designWidth=i.scale.width,Or.display.designHeight=i.scale.height;else{const t=i.scale.height/i.scale.width;let n=InternalScreenModel.GetRealScreenHeight()/InternalScreenModel.GetRealScreenWidth()/t;n=Clamp$1(n,1,2),Or.display.dpi=n,Or.display.designWidth=i.scale.width*Or.display.dpi,Or.display.designHeight=i.scale.height*Or.display.dpi}};recalcDisplayValues(),i.plugins=Pr;const d=new r.Game(i);Lr.phaserGameObject=d,d.events.addListener(r.Core.Events.BLUR,(function(){Or.flags.disableAutoPause||I.hasKey("PauseGame")&&(console.log("PAUSE FROM: BLUR"),Dr.TryToAutomaticallyMuteIfNotMutedManually(),I.runCommand("PauseGame"))})),d.events.addListener(r.Core.Events.FOCUS,(function(){Or.pausedFromRotation||Dr.TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically()})),document.addEventListener("visibilitychange",(function(){if(document.hidden){if(Or.flags.disableAutoPause)return;I.hasKey("PauseGame")&&(console.log("PAUSE FROM: VISIBILITYCHANGE"),I.runCommand("PauseGame"),Dr.TryToAutomaticallyMuteIfNotMutedManually())}else{if(Or.pausedFromRotation)return;Dr.TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically()}}),!1),document.addEventListener("pause",(function(){if(document.hidden){if(Or.flags.disableAutoPause)return;I.hasKey("PauseGame")&&(console.log("PAUSE FROM: PAUSE"),I.runCommand("PauseGame"),Dr.TryToAutomaticallyMuteIfNotMutedManually())}}),!1),window.document.addEventListener("resume",(function(){Or.pausedFromRotation||Dr.TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically()}),!1);{const _resize=()=>{recalcDisplayValues();const t=InternalScreenModel.GetRealScreenWidth()/InternalScreenModel.GetRealScreenHeight(),i=Or.display.designHeight/Or.display.designWidth;if(Or.display.responsiveWidth=Or.display.designWidth*i*t,Or.display.responsiveHeight=Or.display.designHeight,d.scale.setGameSize(Or.display.responsiveWidth,Or.display.responsiveHeight),kr.enabled){const t=[BMEngine.GetGameplayScene().cameras,BMEngine.GetInterfaceScene().cameras];for(const i in t){const n=t[i],r=Or.display.responsiveHeight,o=Or.display.responsiveWidth;n.main.setViewport(o/4,0,o/2,r)}}_InternalRepositionLayers()};Lr.phaserScenes.resizeHandler.def={create:function(){_resize(),window.addEventListener("resize",(function(){_resize()}))},update:function(){InternalScreenModel.GetRealScreenWidth()==Or.display.lastWidth&&InternalScreenModel.GetRealScreenHeight()==Or.display.lastHeight||(Or.display.lastWidth=InternalScreenModel.GetRealScreenWidth(),Or.display.lastHeight=InternalScreenModel.GetRealScreenHeight(),_resize())}}}Lr.phaserScenes.preloader.def={preload:function(){const t=this,r=new AssetPackLoader;r.fillRequestDataFrom(o),r.supplyLoadFunctionDictionary(t,(()=>{const r=this.make.container({},!0),o=this.make.image({x:0,y:0,key:n.logo,add:!0},!1),h=this.make.bitmapText({x:0,y:125,font:n.font,text:"0",size:!1,add:!0,align:1},!1);r.add(o),r.add(h);const repositionLayer=()=>{r.x=Or.display.responsiveWidth/2,r.y=Or.display.responsiveHeight/2};repositionLayer(),window.addEventListener("resize",repositionLayer),Lr.phaserScenes.preloader.funcRefCompletePreload=()=>{Lr.phaserScenes.preloader.funcRefCompletePreload=null,o.destroy(),h.destroy(),r.destroy(),window.removeEventListener("resize",repositionLayer),t.game.scene.stop("PreloaderScene"),-1==Or.audio.audioState&&BMEngine.UserMuteAudio();const validator=()=>{if(i.optionalLoadDelayValidator){i.optionalValidatorBreak&&(i.optionalValidatorBreak.val-=1,i.optionalValidatorBreak.val<=0&&(i.optionalValidatorBreak=null,i.optionalLoadDelayValidator=null));i.optionalLoadDelayValidator()&&(i.optionalLoadDelayValidator=null),EndOfLoopRoutine.QueueDelayedFunction(GetGUID(),10,(()=>{validator()}))}else a(),Or.pauseAllowedAfterStartGame=!0};validator()},Lr.phaserScenes.preloader.funcRefUpdatePreloaderFont=()=>{let t=Math.ceil(100*Lr.phaserScenes.preloader.assetsRealLoadPercentage);if(Or.flags.disableFakeMusicPreload)h.text=t+"%",h.x=-h.width/2;else{t*=.75;let i=Lr.phaserScenes.preloader.extraCurRequiredTime/Lr.phaserScenes.preloader.extraMaxRequiredTime;i=Math.ceil(.25*i*100),t=Math.ceil(t+i),h.text=t+"%",h.x=-h.width/2}},Or.gameManifestJSON=BMEngine.GetFileFromCache("json",n.manifestJson);const d=new AssetPackLoader;d.fillRequestDataFrom(Or.gameManifestJSON.assets),d.supplyLoadFunctionDictionary(t,(()=>{Lr.phaserScenes.preloader.assetsRealLoadPercentage=1,Lr.phaserScenes.preloader.assetsRealLoadDone=!0})),t.load.on("progress",(t=>{Lr.phaserScenes.preloader.funcRefUpdatePreloaderFont&&(Lr.phaserScenes.preloader.assetsRealLoadPercentage=t,Lr.phaserScenes.preloader.funcRefUpdatePreloaderFont())})),d.load(),t.load.start()})),r.load()},create:function(){},update:function(t,i){if(!Lr.phaserScenes.preloader.funcRefCompletePreload)return;if(!Lr.phaserScenes.preloader.funcRefUpdatePreloaderFont)return;Lr.phaserScenes.preloader.assetsRealLoadDone&&(Lr.phaserScenes.preloader.assetsRealLoadPercentage=1);let n=!1;if(1==Or.flags.disableFakeMusicPreload)n=!0;else if(Lr.phaserScenes.preloader.assetsRealLoadPercentage>=.75){let t=1;Lr.phaserScenes.preloader.assetsRealLoadDone&&(t=5),Lr.phaserScenes.preloader.extraCurRequiredTime+=i*t,Lr.phaserScenes.preloader.extraCurRequiredTime>=Lr.phaserScenes.preloader.extraMaxRequiredTime&&(Lr.phaserScenes.preloader.extraCurRequiredTime=Lr.phaserScenes.preloader.extraMaxRequiredTime,n=!0)}Lr.phaserScenes.preloader.funcRefUpdatePreloaderFont(),Lr.phaserScenes.preloader.assetsRealLoadDone&&n&&Lr.phaserScenes.preloader.funcRefCompletePreload()}},Lr.phaserScenes.rotateDisplayer.def={create:function(){Lr.phaserScenes.rotateDisplayer.ref=this,Lr.phaserScenes.rotateDisplayer.layer=this.make.container({},!0)},update:function(){Lr.phaserScenes.rotateDisplayer.bg&&Lr.phaserScenes.rotateDisplayer.def.updateRotateSize()},showRotate:function(){Lr.phaserScenes.rotateDisplayer.bg||(Lr.phaserScenes.rotateDisplayer.bg=Lr.phaserScenes.rotateDisplayer.ref.make.image({x:0,y:0,key:"RotateBG",add:!1},!1),Lr.phaserScenes.rotateDisplayer.rotateHelper=Lr.phaserScenes.rotateDisplayer.ref.make.image({x:0,y:0,key:"NeedPortrait",add:!1},!1),Lr.phaserScenes.rotateDisplayer.def.updateRotateSize(),Lr.phaserScenes.rotateDisplayer.layer.add(Lr.phaserScenes.rotateDisplayer.bg),Lr.phaserScenes.rotateDisplayer.layer.add(Lr.phaserScenes.rotateDisplayer.rotateHelper))},hideRotate:function(){Lr.phaserScenes.rotateDisplayer.bg&&Lr.phaserScenes.rotateDisplayer.bg.destroy(),Lr.phaserScenes.rotateDisplayer.bg=null,Lr.phaserScenes.rotateDisplayer.rotateHelper&&Lr.phaserScenes.rotateDisplayer.rotateHelper.destroy(),Lr.phaserScenes.rotateDisplayer.rotateHelper=null},updateRotateSize(){Lr.phaserScenes.rotateDisplayer.bg.setDisplaySize(4096,4096),Lr.phaserScenes.rotateDisplayer.layer.x=Or.display.responsiveWidth/2,Lr.phaserScenes.rotateDisplayer.layer.y=Or.display.responsiveHeight/2}},Lr.phaserScenes.pauseDisplayer.def={create:function(){Lr.phaserScenes.pauseDisplayer.ref=this},update:function(){}},Lr.phaserScenes.controlPauseGameLoop.def={create:function(){},update:function(){if("any"==Or.requiredOrientation)return;if(!Lr.phaserScenes.preloader.assetsRealLoadDone)return;let t;t=InternalScreenModel.GetRealScreenWidth()>InternalScreenModel.GetRealScreenHeight()?"landscape":"portrait",Or.currentOrientation!=t&&(Or.currentOrientation=t,Or.requiredOrientation==Or.currentOrientation?(Or.isRotationDisplayActive=!1,Lr.phaserScenes.rotateDisplayer.def.hideRotate(),Dr.TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically(),Or.pausedFromRotation&&(Or.pausedFromRotation=!1)):(Or.isRotationDisplayActive=!0,Lr.phaserScenes.rotateDisplayer.def.showRotate(),Dr.TryToAutomaticallyMuteIfNotMutedManually(),Or.hasBeenPaused||(I.runCommand("PauseGame"),Or.pausedFromRotation=!0)))}},Lr.phaserScenes.gameInterface.def={create:function(){Lr.phaserScenes.gameInterface.ref=this},update:function(){}},Lr.phaserScenes.game.def={create:function(){Lr.phaserScenes.game.ref=this,RoutinesManager.InitRoutines()},update:function(t,i){Or.isRotationDisplayActive||(_InternalUpdateCamera(),RoutinesManager.UpdateRoutines(t,i))}},d.scene.add("PreloaderScene",Lr.phaserScenes.preloader.def,!0),d.scene.add("GameScene",Lr.phaserScenes.game.def,!0),d.scene.add("GameInterface",Lr.phaserScenes.gameInterface.def,!0),d.scene.add("ControlPauseGameLoop",Lr.phaserScenes.controlPauseGameLoop.def,!0),d.scene.add("PauseSceneDisplayer",Lr.phaserScenes.pauseDisplayer.def,!0),d.scene.add("RotateDeviceSceneDisplayer",Lr.phaserScenes.rotateDisplayer.def,!0),d.scene.add("ResizeHandlerScene",Lr.phaserScenes.resizeHandler.def,!0),console.log("DisplayData: ",Or.display)}class InternalSaveModel{static GetSaveSlotKey(){return Or.initVO.data.gameName+"_slot_"+Or.initVO.data.gameVersion+"_major_1"}static SaveCurrentSlot(){1!=Or.flags.disableSaveGameData&&D.GetSingleton().adaptLocalStorageSetItem(InternalSaveModel.GetSaveSlotKey(),JSON.stringify(Or.refGameSave))}static SaveGameSettings(){1!=Or.flags.disableSaveUserPrefs&&D.GetSingleton().adaptLocalStorageSetItem(InternalSaveModel.GetSaveSlotKey(),JSON.stringify(Or.refGameSave))}static LoadGameSettings(){if(1==Or.flags.disableSaveUserPrefs)return;const t=D.GetSingleton().adaptLocalStorageGetItem(InternalSaveModel.GetSaveSlotKey());if(null==t){const t={version:1,audio:{audioState:Or.audio.audioState},gameState:null};Or.refGameSave=t,this.SaveGameSettings()}else b(Or.refGameSave,JSON.parse(t));Or.audio=Or.refGameSave.audio}static LoadGameData(t){return 1==Or.flags.disableSaveGameData?(Or.refGameState=t,t):(null==Or.refGameSave.gameState&&(Or.refGameSave.gameState={},b(Or.refGameSave.gameState,t)),Or.refGameState=Or.refGameSave.gameState,Or.refGameState)}}const Dr=new class InternalAudioModel{MuteAudio(t=!0){t&&(Or.audio.audioState=-1),BMEngine.GetGameplayScene().sound.setMute(!0)}UnmuteAudio(t=!0){t&&(Or.audio.audioState=1),BMEngine.GetGameplayScene().sound.setMute(!1)}TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically(){Or.audio.wasMutedManually||Or.audio.wasMutedAutomatically&&(Or.audio.wasMutedAutomatically=!1,Dr.UnmuteAudio(!1))}TryToAutomaticallyMuteIfNotMutedManually(){Or.audio.wasMutedManually||Or.audio.wasMutedAutomatically||(Or.audio.wasMutedAutomatically=!0,Dr.MuteAudio(!1))}};class InternalPauseModel{static PauseGameScenes(){Or.hasBeenPaused||(Or.hasBeenPaused=!0,Lr.phaserScenes.game.ref&&Lr.phaserScenes.game.ref.sys.pause(),Lr.phaserScenes.gameInterface.ref&&Lr.phaserScenes.gameInterface.ref.sys.pause())}static UnPauseGameScenes(){Or.hasBeenPaused&&(Or.hasBeenPaused=!1,Lr.phaserScenes.game.ref&&Lr.phaserScenes.game.ref.sys.resume(),Lr.phaserScenes.gameInterface.ref&&Lr.phaserScenes.gameInterface.ref.sys.resume())}}class InternalScreenModel{static GetRealScreenSize(){let t=window.innerWidth,i=window.innerHeight;document.documentElement&&"clientWidth"in document.documentElement&&(t=document.documentElement.clientWidth,i=document.documentElement.clientHeight);let n={bottom:0,top:0};GetOs().iOS&&(document.documentElement&&"getBoundingClientRect"in document.documentElement?n=document.documentElement.getBoundingClientRect():"getBoundingClientRect"in document.body&&(n=document.body.getBoundingClientRect()),n&&(t=n.right-n.left,i=n.bottom-n.top));let r={w:t,h:i};return r.h=window.innerHeight,r}static GetRealScreenHeight(){return InternalScreenModel.GetRealScreenSize().h}static GetRealScreenWidth(){return InternalScreenModel.GetRealScreenSize().w}}function _InternalUpdateCamera(){BMEngine.GetGameplayScene().cameras.main.scrollX=-BMEngine.GetGameplayScene().cameras.main.width/2+Or.camera.x,Or.camera.centerY?BMEngine.GetGameplayScene().cameras.main.scrollY=-BMEngine.GetGameplayScene().cameras.main.height/2+Or.camera.y:BMEngine.GetGameplayScene().cameras.main.scrollY=Or.camera.y}function _InternalRepositionLayers(){for(const t in Lr.phaserLayers){const i=Lr.phaserLayers[t],n=i.layer.scene.cameras.main.width,r=i.layer.scene.cameras.main.height;2==i.anchorX&&(i.layer.x=n/2),3==i.anchorX&&(i.layer.x=n),2==i.anchorY&&(i.layer.y=r/2),3==i.anchorY&&(i.layer.y=r)}}class OffscreenDieComponent extends Component{constructor(t){super(null),this.timeOffScreenMS=0,this.maxTimeOffScreenMS=1e4,this.wasOnScreen=!1;const i=JSON.parse(JSON.stringify(this.constructor.properties));Object.assign(this,i,t)}static GetName(){return"offscreenDie"}static get properties(){return{}}static At(t){return t.offscreenDie}static AddToEntity(t,i){t.add(OffscreenDieComponent,i)}}const Ir=class{static RegisterPackedAsGameCommand(){I.register(this.Name,new GameCommand((t=>{Ir.Take(t.entity)})))}static Take(t){EndOfLoopRoutine.QueueActorToDisposeBuffer(t)}};let Fr=Ir;function isNil(t){return null==t}function coerceToBoolean(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return isNil(t)?i:Boolean(t)}function isString(t){return"string"==typeof t}function coerceToString(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return isNil(t)?i:isString(t)?t:String(t)}function capitalize(t,i){var n=coerceToString(t),r=coerceToBoolean(i);return""===n?"":(r&&(n=n.toLowerCase()),n.substr(0,1).toUpperCase()+n.substr(1))}function lowerCase(t){return coerceToString(t,"").toLowerCase()}__publicField(Fr,"Name","DisposeEntityAction");var Br="\\u0300-\\u036F\\u1AB0-\\u1AFF\\u1DC0-\\u1DFF\\u20D0-\\u20FF\\uFE20-\\uFE2F",Nr="\\0-\\u02FF\\u0370-\\u1AAF\\u1B00-\\u1DBF\\u1E00-\\u20CF\\u2100-\\uD7FF\\uE000-\\uFE1F\\uFE30-\\uFFFF",Yr=new RegExp("(["+Nr+"]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])(["+Br+"]+)","g"),Xr=new RegExp("([\\uD800-\\uDBFF])([\\uDC00-\\uDFFF])","g"),Gr=new RegExp("((?:["+Nr+"]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])(?:["+Br+"]+))|([\\uD800-\\uDBFF][\\uDC00-\\uDFFF])|([\\n\\r\\u2028\\u2029])|(.)","g"),Ur=new RegExp("[\\s\\uFEFF\\xA0]"),Vr=new RegExp("^[\\s\\uFEFF\\xA0]+"),zr=new RegExp("[\\s\\uFEFF\\xA0]+$"),Wr=new RegExp("^\\d+$"),Hr=/[-[\]{}()*+!<=:?./\\^$|#,]/g,jr=/[^A-Za-z0-9]/g,qr=/[<>&"'`]/g,Zr=/(%{1,2})(?:(\d+)\$)?(\+)?([ 0]|'.{1})?(-)?(\d+)?(?:\.(\d+))?([bcdiouxXeEfgGs])?/g,Kr=/\.?0+$/g,Jr=/[gimuy]*$/,Qr=/<([A-Za-z0-9]+)>/g,$r="a-z\\xB5\\xDF-\\xF6\\xF8-\\xFF\\u0101\\u0103\\u0105\\u0107\\u0109\\u010B\\u010D\\u010F\\u0111\\u0113\\u0115\\u0117\\u0119\\u011B\\u011D\\u011F\\u0121\\u0123\\u0125\\u0127\\u0129\\u012B\\u012D\\u012F\\u0131\\u0133\\u0135\\u0137\\u0138\\u013A\\u013C\\u013E\\u0140\\u0142\\u0144\\u0146\\u0148\\u0149\\u014B\\u014D\\u014F\\u0151\\u0153\\u0155\\u0157\\u0159\\u015B\\u015D\\u015F\\u0161\\u0163\\u0165\\u0167\\u0169\\u016B\\u016D\\u016F\\u0171\\u0173\\u0175\\u0177\\u017A\\u017C\\u017E-\\u0180\\u0183\\u0185\\u0188\\u018C\\u018D\\u0192\\u0195\\u0199-\\u019B\\u019E\\u01A1\\u01A3\\u01A5\\u01A8\\u01AA\\u01AB\\u01AD\\u01B0\\u01B4\\u01B6\\u01B9\\u01BA\\u01BD-\\u01BF\\u01C6\\u01C9\\u01CC\\u01CE\\u01D0\\u01D2\\u01D4\\u01D6\\u01D8\\u01DA\\u01DC\\u01DD\\u01DF\\u01E1\\u01E3\\u01E5\\u01E7\\u01E9\\u01EB\\u01ED\\u01EF\\u01F0\\u01F3\\u01F5\\u01F9\\u01FB\\u01FD\\u01FF\\u0201\\u0203\\u0205\\u0207\\u0209\\u020B\\u020D\\u020F\\u0211\\u0213\\u0215\\u0217\\u0219\\u021B\\u021D\\u021F\\u0221\\u0223\\u0225\\u0227\\u0229\\u022B\\u022D\\u022F\\u0231\\u0233-\\u0239\\u023C\\u023F\\u0240\\u0242\\u0247\\u0249\\u024B\\u024D\\u024F",to="\\x41-\\x5a\\xc0-\\xd6\\xd8-\\xde\\u0100\\u0102\\u0104\\u0106\\u0108\\u010a\\u010c\\u010e\\u0110\\u0112\\u0114\\u0116\\u0118\\u011a\\u011c\\u011e\\u0120\\u0122\\u0124\\u0126\\u0128\\u012a\\u012c\\u012e\\u0130\\u0132\\u0134\\u0136\\u0139\\u013b\\u013d\\u013f\\u0141\\u0143\\u0145\\u0147\\u014a\\u014c\\u014e\\u0150\\u0152\\u0154\\u0156\\u0158\\u015a\\u015c\\u015e\\u0160\\u0162\\u0164\\u0166\\u0168\\u016a\\u016c\\u016e\\u0170\\u0172\\u0174\\u0176\\u0178\\u0179\\u017b\\u017d\\u0181\\u0182\\u0184\\u0186\\u0187\\u0189-\\u018b\\u018e-\\u0191\\u0193\\u0194\\u0196-\\u0198\\u019c\\u019d\\u019f\\u01a0\\u01a2\\u01a4\\u01a6\\u01a7\\u01a9\\u01ac\\u01ae\\u01af\\u01b1-\\u01b3\\u01b5\\u01b7\\u01b8\\u01bc\\u01c4\\u01c5\\u01c7\\u01c8\\u01ca\\u01cb\\u01cd\\u01cf\\u01d1\\u01d3\\u01d5\\u01d7\\u01d9\\u01db\\u01de\\u01e0\\u01e2\\u01e4\\u01e6\\u01e8\\u01ea\\u01ec\\u01ee\\u01f1\\u01f2\\u01f4\\u01f6-\\u01f8\\u01fa\\u01fc\\u01fe\\u0200\\u0202\\u0204\\u0206\\u0208\\u020a\\u020c\\u020e\\u0210\\u0212\\u0214\\u0216\\u0218\\u021a\\u021c\\u021e\\u0220\\u0222\\u0224\\u0226\\u0228\\u022a\\u022c\\u022e\\u0230\\u0232\\u023a\\u023b\\u023d\\u023e\\u0241\\u0243-\\u0246\\u0248\\u024a\\u024c\\u024e",eo=new RegExp("(?:["+to+"]["+Br+"]*)?(?:["+$r+"]["+Br+"]*)+|(?:["+to+"]["+Br+"]*)+(?!["+$r+"])|[\\d]+|[\\u2700-\\u27BF]|[^\\x00-\\x2F\\x3A-\\x40\\x5B-\\x60\\x7b-\\xBF\\xD7\\xF7\\u2000-\\u206F\\s\\uFEFF\\xA0]+","g"),io=/[A-Z\xC0-\xD6\xD8-\xDE]?[a-z\xDF-\xF6\xF8-\xFF]+|[A-Z\xC0-\xD6\xD8-\xDE]+(?![a-z\xDF-\xF6\xF8-\xFF])|\d+/g,no=new RegExp("^(?:["+$r+to+"]["+Br+"]*)+$"),so=new RegExp("^((?:["+$r+to+"]["+Br+"]*)|[\\d])+$"),ro=/^[\x01-\xFF]*$/;function nilDefault(t,i){return null==t?i:t}function toString(t){return isNil(t)?null:isString(t)?t:String(t)}function words(t,i,n){var r=coerceToString(t),o=void 0;if(isNil(i))o=ro.test(r)?io:eo;else if(i instanceof RegExp)o=i;else{var a=toString(nilDefault(n,""));o=new RegExp(toString(i),a)}return nilDefault(r.match(o),[])}function wordToCamel(t,i){return 0===i?lowerCase(t):capitalize(t,!0)}function kebabCase(t){var i=coerceToString(t);return""===i?"":words(i).map(lowerCase).join("-")}function swapAndConcat(t,i){var n=i.toLowerCase(),r=i.toUpperCase();return t+(i===n?r:n)}function clipNumber(t,i,n){return t<=i?i:t>=n?n:t}function toInteger(t){return t===1/0?9007199254740991:t===-1/0?-9007199254740991:~~t}function truncate(t,i,n){var r=coerceToString(t),o=isNil(i)?r.length:clipNumber(toInteger(i),0,9007199254740991),a=coerceToString(n,"...");return o>=r.length?r:r.substr(0,i-a.length)+a}function coerceToNumber(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return isNil(t)?i:"number"==typeof t?t:Number(t)}function nanDefault(t,i){return t!=t?i:t}function codePointAt(t,i){var n=coerceToString(t),r=n.length,o=coerceToNumber(i);if(!((o=nanDefault(o,0))<0||o>=r)){var a=n.charCodeAt(o),h=void 0;return function isHighSurrogate(t){return t>=55296&&t<=56319}(a)&&r>o+1&&function isLowSurrogate(t){return t>=56320&&t<=57343}(h=n.charCodeAt(o+1))?function getAstralNumberFromSurrogatePair(t,i){return 1024*(t-55296)+i-56320+65536}(a,h):a}}var oo=Array.prototype.reduce;function ReplacementIndex(){this.index=0}ReplacementIndex.prototype.increment=function(){this.index++},ReplacementIndex.prototype.incrementOnEmptyPosition=function(t){isNil(t)&&this.increment()},ReplacementIndex.prototype.getIndexByPosition=function(t){return isNil(t)?this.index:t-1};function repeat(t,i){for(var n=coerceToString(t),r=isNil(i)?1:clipNumber(toInteger(i),0,9007199254740991),o="";r;)1&r&&(o+=n),r>1&&(n+=n),r>>=1;return o}function buildPadding(t,i){return repeat(t,toInteger(i/t.length)+i%t.length).substr(0,i)}function padLeft(t,i,n){var r=coerceToString(t),o=isNil(i)?0:clipNumber(toInteger(i),0,9007199254740991),a=coerceToString(n," ");return o<=r.length?r:buildPadding(a,o-r.length)+r}function padRight(t,i,n){var r=coerceToString(t),o=isNil(i)?0:clipNumber(toInteger(i),0,9007199254740991),a=coerceToString(n," ");return o<=r.length?r:r+buildPadding(a,o-r.length)}function addSignToFormattedNumber(t,i,n){return"+"===n.signSpecifier&&t>=0&&(i="+"+i),i}function float(t,i){var n=parseFloat(t),r=void 0;isNaN(n)&&(n=0);var o=coerceToNumber(i.precision,6);switch(i.typeSpecifier){case"f":r=n.toFixed(o);break;case"e":r=n.toExponential(o);break;case"E":r=n.toExponential(o).toUpperCase();break;case"g":case"G":r=function formatFloatAsShort(t,i,n){if(0===t)return"0";var r=0===i?1:i,o=t.toPrecision(r).replace(Kr,"");"G"===n.typeSpecifier&&(o=o.toUpperCase());return o}(n,o,i)}return coerceToString(r=addSignToFormattedNumber(n,r,i))}function integerBase(t,i){var n=parseInt(t);switch(isNaN(n)&&(n=0),n>>>=0,i.typeSpecifier){case"c":n=String.fromCharCode(n);break;case"b":n=n.toString(2);break;case"o":n=n.toString(8);break;case"x":n=n.toString(16);break;case"X":n=n.toString(16).toUpperCase()}return coerceToString(n)}function integerDecimal(t,i){var n=parseInt(t);return isNaN(n)&&(n=0),addSignToFormattedNumber(n,toString(n),i)}function stringFormat(t,i){var n=t,r=i.precision;return!isNil(r)&&n.length>r&&(n=truncate(n,r,"")),n}function compute(t,i){var n=void 0;switch(i.typeSpecifier){case"s":n=stringFormat;break;case"d":case"i":n=integerDecimal;break;case"c":case"b":case"o":case"x":case"X":case"u":n=integerBase;break;case"f":case"e":case"E":case"g":case"G":n=float}return function alignAndPad(t,i){var n=i.width;return isNil(n)||t.length>=n?t:("-"===i.alignmentSpecifier?padRight:padLeft)(t,n,i.getPaddingCharacter())}(n(t,i),i)}function ConversionSpecification(t){this.percent=t.percent,this.signSpecifier=t.signSpecifier,this.paddingSpecifier=t.paddingSpecifier,this.alignmentSpecifier=t.alignmentSpecifier,this.width=t.width,this.precision=t.precision,this.typeSpecifier=t.typeSpecifier}function match(t,i,n,r,o,a,h,d,f,p,T){var b=new ConversionSpecification({percent:r,signSpecifier:a,paddingSpecifier:h,alignmentSpecifier:d,width:coerceToNumber(f,null),precision:coerceToNumber(p,null),typeSpecifier:T});if(b.isPercentLiteral())return n.slice(1);var S=t.getIndexByPosition(o);return t.incrementOnEmptyPosition(o),function validate(t,i,n){if(isNil(n.typeSpecifier))throw new Error("sprintf(): Unknown type specifier");if(t>i-1)throw new Error("sprintf(): Too few arguments");if(t<0)throw new Error("sprintf(): Argument number must be greater than zero")}(S,i.length,b),compute(i[S],b)}function sprintf(t){var i=coerceToString(t);if(""===i)return i;for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a=match.bind(void 0,new ReplacementIndex,r);return i.replace(Zr,a)}ConversionSpecification.prototype.isPercentLiteral=function(){return"%%"===this.percent},ConversionSpecification.prototype.getPaddingCharacter=function(){var t=nilDefault(this.paddingSpecifier," ");return 2===t.length&&"'"===t[0]&&(t=t[1]),t};var ao={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};function replaceSpecialCharacter(t){return ao[t]}function escapeRegExp(t){return coerceToString(t).replace(Hr,"\\$&")}var ho={"<":/(&lt;)|(&#x0*3c;)|(&#0*60;)/gi,">":/(&gt;)|(&#x0*3e;)|(&#0*62;)/gi,"&":/(&amp;)|(&#x0*26;)|(&#0*38;)/gi,'"':/(&quot;)|(&#x0*22;)|(&#0*34;)/gi,"'":/(&#x0*27;)|(&#0*39;)/gi,"`":/(&#x0*60;)|(&#0*96;)/gi},lo=Object.keys(ho);function reduceUnescapedString(t,i){return t.replace(ho[i],i)}var uo={3:"Ξξ",8:"Θθ",A:"AÀÁÂÃÄÅĀĂĄǍǞǠǺȀȂȦȺḀẠẢẤẦẨẪẬẮẰẲẴẶⒶⱯＡΆΑА",B:"BƁƂɃḂḄḆⒷＢΒБ",C:"CÇĆĈĊČƇȻḈⒸꜾＣЦ",D:"DĎĐƉƊƋḊḌḎḐḒⒹꝹＤÐΔД",E:"EÈÉÊËĒĔĖĘĚƎƐȄȆȨḔḖḘḚḜẸẺẼẾỀỂỄỆⒺＥΈΕЕЭ",F:"FƑḞⒻꝻＦΦФ",G:"GĜĞĠĢƓǤǦǴḠⒼꝽꝾꞠＧΓГҐ",H:"HĤĦȞḢḤḦḨḪⒽⱧⱵꞍＨΉΗХ",I:"IÌÍÎÏĨĪĬĮİƗǏȈȊḬḮỈỊⒾＩΊΙΪІИ",J:"JĴɈⒿＪЙ",K:"KĶƘǨḰḲḴⓀⱩꝀꝂꝄꞢＫΚК",L:"LĹĻĽĿŁȽḶḸḺḼⓁⱠⱢꝆꝈꞀＬΛЛ",M:"MƜḾṀṂⓂⱮＭΜМ",N:"NÑŃŅŇƝǸȠṄṆṈṊⓃꞐꞤＮΝН",O:"OÒÓÔÕÖØŌŎŐƆƟƠǑǪǬǾȌȎȪȬȮȰṌṎṐṒỌỎỐỒỔỖỘỚỜỞỠỢⓄꝊꝌＯΌΟО",P:"PƤṔṖⓅⱣꝐꝒꝔＰΠП",Q:"QɊⓆꝖꝘＱ",R:"RŔŖŘȐȒɌṘṚṜṞⓇⱤꝚꞂꞦＲΡР",S:"SŚŜŞŠȘṠṢṤṦṨẞⓈⱾꞄꞨＳΣС",T:"TŢŤŦƬƮȚȾṪṬṮṰⓉꞆＴΤТ",U:"UÙÚÛÜŨŪŬŮŰŲƯǓǕǗǙǛȔȖɄṲṴṶṸṺỤỦỨỪỬỮỰⓊＵУЪ",V:"VƲɅṼṾⓋꝞＶВ",W:"WŴẀẂẄẆẈⓌⱲＷΏΩ",X:"XẊẌⓍＸΧ",Y:"YÝŶŸƳȲɎẎỲỴỶỸỾⓎＹΎΥΫЫ",Z:"ZŹŻŽƵȤẐẒẔⓏⱫⱿꝢＺΖЗ",a:"aàáâãäåāăąǎǟǡǻȁȃȧɐḁẚạảấầẩẫậắằẳẵặⓐⱥａάαа",b:"bƀƃɓḃḅḇⓑｂβб",c:"cçćĉċčƈȼḉↄⓒꜿｃц",d:"dďđƌɖɗḋḍḏḑḓⓓꝺｄðδд",e:"eèéêëēĕėęěǝȅȇȩɇɛḕḗḙḛḝẹẻẽếềểễệⓔｅέεеэ",f:"fƒḟⓕꝼｆφф",g:"gĝğġģǥǧǵɠᵹḡⓖꝿꞡｇγгґ",h:"hĥħȟɥḣḥḧḩḫẖⓗⱨⱶｈήηх",i:"iìíîïĩīĭįıǐȉȋɨḭḯỉịⓘｉΐίιϊиі",j:"jĵǰɉⓙｊй",k:"kķƙǩḱḳḵⓚⱪꝁꝃꝅꞣｋκк",l:"lĺļľŀłſƚɫḷḹḻḽⓛⱡꝇꝉꞁｌλл",m:"mɯɱḿṁṃⓜｍμм",n:"nñńņňŉƞǹɲṅṇṉṋⓝꞑꞥｎνн",o:"oòóôõöøōŏőơǒǫǭǿȍȏȫȭȯȱɔɵṍṏṑṓọỏốồổỗộớờởỡợⓞꝋꝍｏοόо",p:"pƥᵽṕṗⓟꝑꝓꝕｐπп",q:"qɋⓠꝗꝙｑ",r:"rŕŗřȑȓɍɽṙṛṝṟⓡꝛꞃꞧｒρр",s:"sßśŝşšșȿṡṣṥṧṩẛⓢꞅꞩｓςσс",t:"tţťŧƭțʈṫṭṯṱẗⓣⱦꞇｔτт",u:"uùúûüũūŭůűųưǔǖǘǚǜȕȗʉṳṵṷṹṻụủứừửữựⓤｕуъ",v:"vʋʌṽṿⓥꝟｖв",w:"wŵẁẃẅẇẉẘⓦⱳｗωώ",x:"xẋẍⓧｘχ",y:"yýÿŷƴȳɏẏẙỳỵỷỹỿⓨｙΰυϋύы",z:"zźżžƶȥɀẑẓẕⓩⱬꝣｚζз",OE:"Œ",oe:"œ",AE:"ÆǢǼ",ae:"æǣǽ",hv:"ƕ",OI:"Ƣ",oi:"ƣ",DZ:"ǄǱ",Dz:"ǅǲ",dz:"ǆǳ",LJ:"Ǉ",Lj:"ǈ",lj:"ǉ",NJ:"Ǌ",Nj:"ǋ",nj:"ǌ",OU:"Ȣ",ou:"ȣ",TZ:"Ꜩ",tz:"ꜩ",AA:"Ꜳ",aa:"ꜳ",AO:"Ꜵ",ao:"ꜵ",AU:"Ꜷ",au:"ꜷ",AV:"ꜸꜺ",av:"ꜹꜻ",AY:"Ꜽ",ay:"ꜽ",OO:"Ꝏ",oo:"ꝏ",VY:"Ꝡ",vy:"ꝡ",TH:"Þ",th:"þ",PS:"Ψ",ps:"ψ",Yo:"Ё",Ye:"Є",Yi:"Ї",Zh:"Ж",Ch:"Ч",Sh:"ШЩ","":"Ьь",Yu:"Ю",Ya:"Я",zh:"ж",ch:"ч",sh:"шщ",yu:"ю",ya:"я",yo:"ё",ye:"є",yi:"ї"},co=null;function getLatinCharacter(t){var i=function getDiacriticsMap(){return null!==co||(co={},Object.keys(uo).forEach((function(t){for(var i=uo[t],n=0;n<i.length;n++){var r=i[n];co[r]=t}}))),co}()[t];return i||t}function removeCombiningMarks(t,i){return i}function latinise(t){var i=coerceToString(t);return""===i?"":i.replace(jr,getLatinCharacter).replace(Yr,removeCombiningMarks)}function includes(t,i,n){var r=coerceToString(t),o=toString(i);return null!==o&&(""===o||(n=isNil(n)?0:clipNumber(toInteger(n),0,r.length),-1!==r.indexOf(o,n)))}function appendFlagToRegExp(t,i){var n=function getRegExpFlags(t){return t.toString().match(Jr)[0]}(t);return includes(n,i)?t:new RegExp(t.source,n+i)}var _slicedToArray=function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function sliceIterator(t,i){var n=[],r=!0,o=!1,a=void 0;try{for(var h,d=t[Symbol.iterator]();!(r=(h=d.next()).done)&&(n.push(h.value),!i||n.length!==i);r=!0);}catch(f){o=!0,a=f}finally{try{!r&&d.return&&d.return()}finally{if(o)throw a}}return n}(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function sortStringByLength(t,i){return t.length===i.length?0:t.length<i.length?1:-1}var fo=Array.prototype.reduce;function trimLeft(t,i){var n=coerceToString(t);if(""===i||""===n)return n;var r=toString(i);if(isNil(r))return n.replace(Vr,"");var o=!0;return fo.call(n,(function(t,i){return o&&includes(r,i)?t:(o=!1,t+i)}),"")}var po=Array.prototype.reduceRight;function trimRight(t,i){var n=coerceToString(t);if(""===i||""===n)return n;var r=toString(i);if(isNil(r))return n.replace(zr,"");var o=!0;return po.call(n,(function(t,i){return o&&includes(r,i)?t:(o=!1,i+t)}),"")}function determineOptions(t){return{width:coerceToNumber(t.width,75),newLine:coerceToString(t.newLine,"\n"),indent:coerceToString(t.indent,""),cut:coerceToBoolean(t.cut,!1)}}function isAlpha(t){var i=coerceToString(t);return no.test(i)}function hasSubstringAtIndex(t,i,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=0;r&&(o=1-i.length);var a=t.substr(n+o,i.length);return a.toLowerCase()===i}function parseTagName(t){for(var i=0,n="",r=0;2!==i;){var o=t[r++].toLowerCase();switch(o){case"<":break;case">":i=2;break;default:Ur.test(o)?1===i&&(i=2):(0===i&&(i=1),"/"!==o&&(n+=o))}}return n}var go=null;var vo=function getGlobalObject(){return null!==go?go:go="object"==typeof global&&global.Object===Object?global:"object"==typeof self&&self.Object===Object?self:new Function("return this")()}(),mo=vo.v;var yo={camelCase:function camelCase(t){var i=coerceToString(t);return""===i?"":words(i).map(wordToCamel).join("")},capitalize:capitalize,decapitalize:function decapitalize(t){var i=coerceToString(t);return""===i?"":i.substr(0,1).toLowerCase()+i.substr(1)},kebabCase:kebabCase,lowerCase:lowerCase,snakeCase:function snakeCase(t){var i=coerceToString(t);return""===i?"":words(i).map(lowerCase).join("_")},swapCase:function swapCase(t){return coerceToString(t).split("").reduce(swapAndConcat,"")},titleCase:function titleCase(t,i){var n=coerceToString(t),r=Array.isArray(i)?i:[],o=ro.test(n)?io:eo;return n.replace(o,(function(t,i){return i>0&&r.indexOf(n[i-1])>=0?t.toLowerCase():capitalize(t,!0)}))},upperCase:function upperCase(t){return coerceToString(t).toUpperCase()},count:function count(t){return coerceToString(t).length},countGraphemes:function countGrapheme(t){return coerceToString(t).replace(Yr,"*").replace(Xr,"*").length},countSubstrings:function countSubstrings(t,i){var n=coerceToString(t),r=coerceToString(i),o=r.length,a=0,h=0;if(""===n||""===r)return a;do{-1!==(h=n.indexOf(r,h))&&(a++,h+=o)}while(-1!==h);return a},countWhere:function countWhere(t,i,n){var r=coerceToString(t);if(""===r||"function"!=typeof i)return 0;var o=i.bind(n);return oo.call(r,(function(t,i,n){return o(i,n,r)?t+1:t}),0)},countWords:function countWords(t,i,n){return words(t,i,n).length},escapeHtml:function escapeHtml(t){return coerceToString(t).replace(qr,replaceSpecialCharacter)},escapeRegExp:escapeRegExp,unescapeHtml:function unescapeHtml(t){var i=coerceToString(t);return lo.reduce(reduceUnescapedString,i)},sprintf:sprintf,vprintf:function vprintf(t,i){return sprintf.apply(void 0,[t].concat(function _toConsumableArray(t){if(Array.isArray(t)){for(var i=0,n=Array(t.length);i<t.length;i++)n[i]=t[i];return n}return Array.from(t)}(nilDefault(i,[]))))},indexOf:function indexOf(t,i,n){return coerceToString(t).indexOf(i,n)},lastIndexOf:function lastIndexOf(t,i,n){return coerceToString(t).lastIndexOf(i,n)},search:function search(t,i,n){var r=coerceToString(t),o=isNil(n)?0:clipNumber(toInteger(n),0,r.length),a=r.substr(o).search(i);return-1===a||isNaN(o)||(a+=o),a},charAt:function charAt(t,i){return coerceToString(t).charAt(i)},codePointAt:codePointAt,first:function first(t,i){var n=coerceToString(t),r=isNil(i)?1:clipNumber(toInteger(i),0,9007199254740991);return n.length<=r?n:n.substr(0,r)},graphemeAt:function graphemeAt(t,i){var n=coerceToString(t),r=coerceToNumber(i),o=void 0,a=0;for(r=nanDefault(r,0);null!==(o=Gr.exec(n));){if(a===r)return Gr.lastIndex=0,o[0];a++}return""},last:function last(t,i){var n=coerceToString(t),r=isNil(i)?1:clipNumber(toInteger(i),0,9007199254740991);return n.length<=r?n:n.substr(n.length-r,r)},prune:function prune(t,i,n){var r=coerceToString(t),o=isNil(i)?r.length:clipNumber(toInteger(i),0,9007199254740991),a=coerceToString(n,"...");if(o>=r.length)return r;var h=ro.test(r)?io:eo,d=0;return r.replace(h,(function(t,i){var n=i+t.length;n<=o-a.length&&(d=n)})),r.substr(0,d)+a},slice:function slice(t,i,n){return coerceToString(t).slice(i,n)},substr:function substr(t,i,n){return coerceToString(t).substr(i,n)},substring:function substring(t,i,n){return coerceToString(t).substring(i,n)},truncate:truncate,insert:function insert(t,i,n){var r=coerceToString(t),o=coerceToString(i),a=coerceToNumber(n);return a<0||a>r.length||""===o?r:r.slice(0,a)+o+r.slice(a)},latinise:latinise,pad:function pad(t,i,n){var r=coerceToString(t),o=isNil(i)?0:clipNumber(toInteger(i),0,9007199254740991),a=coerceToString(n," ");if(o<=r.length)return r;var h=o-r.length,d=toInteger(h/2),f=h%2;return buildPadding(a,d)+r+buildPadding(a,d+f)},padLeft:padLeft,padRight:padRight,repeat:repeat,replace:function replace(t,i,n){return coerceToString(t).replace(i,n)},replaceAll:function replaceAll(t,i,n){var r=coerceToString(t),o=i;return i instanceof RegExp?i.global||(o=appendFlagToRegExp(i,"g")):o=new RegExp(escapeRegExp(i),"g"),r.replace(o,n)},reverse:function reverse(t){return coerceToString(t).split("").reverse().join("")},reverseGrapheme:function reverseGrapheme(t){for(var i=coerceToString(t),n="",r=(i=i.replace(Yr,(function(t,i,n){return reverseGrapheme(n)+i})).replace(Xr,"$2$1")).length;r--;)n+=i.charAt(r);return n},slugify:function slugify(t){var i=coerceToString(t);return""===i?"":kebabCase(latinise(i).replace(jr,"-"))},splice:function splice(t,i,n,r){var o=coerceToString(t),a=coerceToString(r),h=coerceToNumber(i);h<0?(h=o.length+h)<0&&(h=0):h>o.length&&(h=o.length);var d=coerceToNumber(n,o.length-h);return d<0&&(d=0),o.slice(0,h)+a+o.slice(h+d)},tr:function tr(t,i,n){var r=coerceToString(t),o=void 0,a=void 0;if(isString(i)&&isString(n))o=i.split(""),a=n.split("");else{var h=function extractKeysAndValues(t){var i=Object.keys(t),n=i.sort(sortStringByLength).map((function(i){return t[i]}));return[i,n]}(nilDefault(i,{})),d=_slicedToArray(h,2);o=d[0],a=d[1]}var f=o.length;if(0===f)return r;for(var p="",T=a.length,b=0;b<r.length;b++){for(var S=!1,A=void 0,P=0;P<f&&P<T;P++){var O=o[P];if(r.substr(b,O.length)===O){S=!0,A=a[P],b=b+O.length-1;break}}p+=S?A:r[b]}return p},trim:function trim(t,i){var n=coerceToString(t);if(""===i||""===n)return n;var r=toString(i);return isNil(r)?n.trim():trimRight(trimLeft(n,r),r)},trimLeft:trimLeft,trimRight:trimRight,wordWrap:function wordWrap(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=coerceToString(t),r=determineOptions(i),o=r.width,a=r.newLine,h=r.indent,d=r.cut;if(""===n||o<=0)return h;for(var f=n.length,p=n.substring.bind(n),T=0,b="";f-T>o;)if(" "!==n[T]){var S=n.lastIndexOf(" ",o+T);S>=T?(b+=h+p(T,S)+a,T=S+1):d?(b+=h+p(T,o+T)+a,T+=o):(S=n.indexOf(" ",o+T))>=0?(b+=h+p(T,S)+a,T=S+1):(b+=h+p(T),T=f)}else T++;return T<f&&(b+=h+p(T)),b},endsWith:function endsWith(t,i,n){if(isNil(i))return!1;var r=coerceToString(t),o=coerceToString(i);if(""===o)return!0;n=isNil(n)?r.length:clipNumber(toInteger(n),0,r.length),n-=o.length;var a=r.indexOf(o,n);return-1!==a&&a===n},includes:includes,isAlpha:isAlpha,isAlphaDigit:function isAlphaDigit(t){var i=coerceToString(t);return so.test(i)},isBlank:function isBlank(t){return 0===coerceToString(t).trim().length},isDigit:function isDigit(t){var i=coerceToString(t);return Wr.test(i)},isEmpty:function isEmpty(t){return 0===coerceToString(t).length},isLowerCase:function isLowerCase(t){var i=coerceToString(t);return isAlpha(i)&&i.toLowerCase()===i},isNumeric:function isNumeric(t){var i="object"!=typeof t||isNil(t)?t:Number(t);return("number"==typeof i||"string"==typeof i)&&!isNaN(i-parseFloat(i))},isString:isString,isUpperCase:function isUpperCase(t){var i=coerceToString(t);return isAlpha(i)&&i.toUpperCase()===i},matches:function matches(t,i,n){var r=coerceToString(t),o=coerceToString(n),a=void 0;if(!(i instanceof RegExp)){if(null===(a=toString(i)))return!1;i=new RegExp(a,o)}return i.test(r)},startsWith:function startsWith(t,i,n){var r=coerceToString(t),o=toString(i);return null!==o&&(""===o||(n=isNil(n)?0:clipNumber(toInteger(n),0,r.length),r.substr(n,o.length)===o))},chars:function chars(t){return coerceToString(t).split("")},codePoints:function codePoints(t){for(var i=coerceToString(t),n=i.length,r=[],o=0,a=void 0;o<n;)a=codePointAt(i,o),r.push(a),o+=a>65535?2:1;return r},graphemes:function graphemes(t){return nilDefault(coerceToString(t).match(Gr),[])},split:function split(t,i,n){return coerceToString(t).split(i,n)},words:words,stripBom:function trim$1(t){var i=coerceToString(t);return""===i?"":"\ufeff"===i[0]?i.substring(1):i},stripTags:function trim$2(t,i,n){if(""===(t=coerceToString(t)))return"";if(!Array.isArray(i)){var r=coerceToString(i);i=""===r?[]:function parseTagList(t){for(var i=[],n=void 0;null!==(n=Qr.exec(t));)i.push(n[1]);return i}(r)}for(var o=coerceToString(n),a=t.length,h=i.length>0,d=hasSubstringAtIndex.bind(null,t),f=0,p=0,T="",b="",S=null,A=0;A<a;A++){var P=t[A],O=!1;switch(P){case"<":if(S)break;if(d("< ",A,!1)){O=!0;break}if(0===f){O=!0,f=1;break}if(1===f){p++;break}O=!0;break;case"!":if(1===f&&d("<!",A)){f=2;break}O=!0;break;case"-":if(2===f&&d("!--",A)){f=3;break}O=!0;break;case'"':case"'":1===f&&(S===P?S=null:S||(S=P)),O=!0;break;case"E":case"e":if(2===f&&d("doctype",A)){f=1;break}O=!0;break;case">":if(p>0){p--;break}if(S)break;if(1===f){if(S=null,f=0,h){var L=parseTagName(b+=">");-1!==i.indexOf(L.toLowerCase())?T+=b:T+=o,b=""}else T+=o;break}if(2===f||3===f&&d("--\x3e",A)){S=null,f=0,b="";break}O=!0;break;default:O=!0}if(O)switch(f){case 0:T+=P;break;case 1:h&&(b+=P)}}return T},noConflict:function noConflict(){return this===vo.v&&(vo.v=mo),this},version:"1.4.0"};function ChainWrapper(t,i){this._wrappedValue=t,this._explicitChain=i}function Voca(t){return new ChainWrapper(t,!1)}ChainWrapper.prototype.value=function(){return this._wrappedValue},ChainWrapper.prototype.valueOf=function(){return this.value()},ChainWrapper.prototype.toJSON=function(){return this.value()},ChainWrapper.prototype.toString=function(){return String(this.value())},ChainWrapper.prototype.chain=function(){return new ChainWrapper(this._wrappedValue,!0)},ChainWrapper.prototype.thru=function(t){return"function"==typeof t?new ChainWrapper(t(this._wrappedValue),this._explicitChain):this},ChainWrapper.prototype._explicitChain=!0,Object.keys(yo).forEach((function(t){ChainWrapper.prototype[t]=function makeFunctionChainable(t){return function(){for(var i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];var o=t.apply(void 0,[this._wrappedValue].concat(n));return this._explicitChain||"string"==typeof o?new ChainWrapper(o,this._explicitChain):o}}(yo[t])})),(Object.assign||function(t){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t})(Voca,yo,{chain:function chain(t){return new ChainWrapper(t,!0)}});const xo="sprite",To="image",wo="spine",bo="text",So="zone",Mo="particle";class OperateOnVisual{static GetDisplayedAsAny(t){return VisualComponent.At(t).refDisplayed}static GetDisplayed(t){return VisualComponent.At(t).refDisplayed}static GetDisplayedAsImage(t){return VisualComponent.At(t).refDisplayed}static GetDisplayedAsBitmapText(t){return VisualComponent.At(t).refDisplayed}static GetBottomY(t){return OperateOnVisual.GetDisplayed(t).y+OperateOnVisual.GetHeight(t)/2}static GetHeight(t){return OperateOnVisual.GetDisplayedAsImage(t).displayHeight}static GetWidth(t){return OperateOnVisual.GetDisplayedAsImage(t).displayWidth}static IsImgOrSprite(t){return VisualComponent.At(t).type==To||VisualComponent.At(t).type==xo}static IsSpine(t){return VisualComponent.At(t).type==wo}static SpineListAttachmentsBySlots(t,i=!1){const n=OperateOnVisual.GetDisplayedAsAny(t);let r={},o=n.skeletonData.defaultSkin.attachments,a=n.getSlotList();for(let h=0;h<a.length;h++){let t=a[h],i=o[h];for(let n in i){let i=r[t];i||(i=[],r[t]=i),i.push(n)}}return i&&console.log(t,r),r}static RandomizeAnimationTime(t){let i=OperateOnVisual.GetDisplayedAsAny(t).state.tracks[0];i.trackTime=Phaser.Math.FloatBetween(0,i.animationEnd)}static SpineSetAttachment(t,i,n){OperateOnVisual.GetDisplayedAsAny(t).setAttachment(i,n)}static SetScale(t,i=1,n=1){1!=i&&(OperateOnVisual.GetDisplayedAsImage(t).scaleX=i,1!=n&&(OperateOnVisual.GetDisplayedAsImage(t).scaleY=i)),1!=n&&(OperateOnVisual.GetDisplayedAsImage(t).scaleY=n)}static SetTextWithZeroPad(t,i,n){let r=Voca.padLeft(i,n,"0");OperateOnVisual.GetDisplayedAsBitmapText(t).setText(r)}static SetText(t,i){OperateOnVisual.GetDisplayedAsBitmapText(t).setText(i)}static SortParentByProperty(t,i){OperateOnVisual.GetDisplayedAsImage(t).parentContainer.sort(i)}static ReparentLayer(t,i,n={}){let r=VisualComponent.At(t);b(r,n),r.layerName=i,PostProcessLayerName(r);let o=OperateOnVisual.GetDisplayedAsImage(t),a=BMEngine.GetOrMakeContainerLayer(r.layerData.layer,r.layerData.anchorX,r.layerData.anchorY,r.layerDepth),h=o.parentContainer,d=a,f=o.x,p=o.y;f-=h.scene.cameras.main.scrollX,p-=h.scene.cameras.main.scrollY,f+=d.scene.cameras.main.scrollX,p+=d.scene.cameras.main.scrollY,f+=h.x,p+=h.y,f-=d.x,p-=d.y,OperateOnVisual.GetDisplayedAsImage(t).x=f,OperateOnVisual.GetDisplayedAsImage(t).y=p,a.add(r.refDisplayed)}static GetBounds(t){const i=VisualComponent.At(t);if(OperateOnVisual.IsSpine(t)){const n=OperateOnVisual.GetDisplayedAsAny(t).getBounds();return i._boundCache.setTo(n.offset.x,n.offset.y,n.size.x,n.size.y),i._boundCache}return OperateOnVisual.GetDisplayedAsImage(t).getBounds(i._boundCache)}static GetParticles(t){return VisualComponent.At(t).refDisplayed}}function PostProcessLayerName(t){if(Voca.countSubstrings(t.layerName,"_")>0){const i=Voca.split(t.layerName,"_");t.layerData.layer=i[0],t.layerData.anchorX=parseInt(Voca.charAt(i[1],0)),t.layerData.anchorY=parseInt(Voca.charAt(i[1],1))}else t.layerData.layer=t.layerName,t.layerData.anchorX=1,t.layerData.anchorY=1}class VisualComponent extends Component{constructor(t){super(null),this._boundCache=new Phaser.Geom.Rectangle(0,0,1,1),this.type=null,this.texture=null,this.animations={},this.curAnimation=null,this.curAnimationCfg=null,this.curAnimationFinishCount=0,this.emitterConfig=null,this.layerName="gameplay",this.selfDepth=0,this.layerDepth=0,this.scale=1,this.layerData={layer:"gameplay",x:1,y:1},this.tweens={position:null,scale:null,alpha:null},this.refDisplayed=null;const i=JSON.parse(JSON.stringify(this.constructor.properties));Object.assign(this,i,t)}static At(t){return t.visual}onAttached(t){let i;super.onAttached(t),PostProcessLayerName(this);let n=BMEngine.GetOrMakeContainerLayer(this.layerData.layer,this.layerData.anchorX,this.layerData.anchorY,this.layerDepth);const r=n.scene;if(this.type==To)if(BMEngine.GetPhaserGame().textures.exists(this.texture))i=r.make.image({x:0,y:0,key:this.texture,add:!0},!1);else{const t="megaset",n=this.texture;i=r.make.image({x:0,y:0,key:t,frame:n,add:!0},!1)}else if(this.type==wo)null==this.animations&&(this.animations={Idle:{loop:!0}},this.curAnimation="Idle"),i=r.make.spine({x:0,y:0,key:this.texture,animationName:this.curAnimation,loop:this.animations[this.curAnimation].loop,add:!1},!1),i.state.addListener({complete:t=>{t.animation.name,this.curAnimationCfg&&(0==this.curAnimationCfg.loop&&this.curAnimationFinishCount<=0&&this.curAnimationFinishCount++,this.curAnimationCfg.onAnimationLoopedCmd&&(this.curAnimationCfg.onAnimationLoopedCmd.entity=this.entity,I.runCommandObj(this.curAnimationCfg.onAnimationLoopedCmd)))}});else if(this.type==bo){let t=this.text;null==t&&(t="000000",this.text=t),i=r.make.bitmapText({x:0,y:0,font:this.texture,text:t,add:!0},!1),i.setOrigin(.5,.5)}else if(this.type==So)null==this.width&&(this.width=100),null==this.height&&(this.height=100),i=r.make.zone({x:0,y:0,width:this.width,height:this.height,add:!0});else if(this.type==Mo){const t=this.emitterConfig,n=r.add.particles(this.texture);n.createEmitter(t),i=n}i.setScale(this.scale),this.refDisplayed=i,n.add(i),i.selfEntity=t,0!=this.selfDepth&&(i.setDepth(this.selfDepth),OperateOnVisual.SortParentByProperty(this.entity,"depth"))}bringToTop(){OperateOnVisual.GetDisplayedAsImage(this.entity).parentContainer.bringToTop(OperateOnVisual.GetDisplayedAsImage(this.entity))}setTexture(t){if(OperateOnVisual.IsImgOrSprite(this.entity)){const i=OperateOnVisual.GetDisplayedAsImage(this.entity);BMEngine.GetPhaserGame().textures.exists(t)?i.setTexture(t):i.setTexture("megaset",t)}}setAnimation(t,i=null){if(OperateOnVisual.IsImgOrSprite(this.entity))this.curAnimation=t,this.setTexture(this.animations[this.curAnimation].texture);else if(OperateOnVisual.IsSpine(this.entity)){let n=!1;if(this.curAnimation==t&&(n=!0),this.animations[t]&&0==this.animations[t].loop&&this.curAnimationFinishCount>=1&&(n=!1),n)return;this.curAnimation=t,this.curAnimationFinishCount=0;let r={};this.animations[t]&&b(r,this.animations[t]),i&&b(r,i),null==r.loop&&(r.loop=!0),this.curAnimationCfg=r,this.refDisplayed.setAnimation(0,t,r.loop)}else console.warn("IMPLEMENT HERE!")}getAnimationName(){return this.curAnimation}getDisplayedAsImage(){return this.refDisplayed}getDisplayedAsZone(){return this.refDisplayed}getEmitter(){return this.refDisplayed.emitters.list[0]}isDisplayedOnScreen(t=!1){const i=this.getDisplayedAsImage(),n=OperateOnVisual.GetBounds(this.entity),r=i.scene.cameras.main.worldView;let o=!1;return 0==OperateOnVisual.IsSpine(this.entity)?(o=!0,n.y+n.height<r.y&&(o=!1),n.y>r.bottom&&(o=!1),n.x+n.width<r.x&&(o=!1),n.x>r.width&&(o=!1)):(o=!0,n.x=this.refDisplayed.x,n.y=this.refDisplayed.y,n.y+n.height<r.y&&(o=!1),n.y-n.height>r.y+r.height&&(o=!1),n.x+n.width<r.x&&(o=!1),n.x-n.width>r.right&&(o=!1)),o}setFlipX(t){const i=this.getDisplayedAsImage();OperateOnVisual.IsSpine(this.entity)?t?i.scaleX>=0&&(i.scaleX*=-1):i.scaleX<=0&&(i.scaleX*=-1):i.setFlipX(t)}setFlipY(t){const i=this.getDisplayedAsImage();OperateOnVisual.IsSpine(this.entity)?t?i.scaleY>=0&&(i.scaleY*=-1):i.scaleY<=0&&(i.scaleY*=-1):i.setFlipY(t)}disposePositionTween(){this.tweens.position&&(this.tweens.position.stop(0),this.tweens.position.remove(),this.tweens.position=null)}disposeAllTweens(){this.disposePositionTween(),this.tweens.scale&&(this.tweens.scale.stop(0),this.tweens.scale.remove(),this.tweens.scale=null),this.tweens.alpha&&(this.tweens.alpha.stop(0),this.tweens.alpha.remove(),this.tweens.alpha=null)}fastTrackPosition(t){const i=this.tweens;if(i.position){let t=i.position;if(26!=t.state){t.stop(),t.remove();for(let i=0;i<t.data.length;i++){let n=t.data[i];n.target[n.key]=n.end}}i.position=null}}tweenPosition(t){const i=this.tweens;i.position&&(26!=i.position.state&&i.position.stop(),i.position.remove(),i.position=null),t.targets=OperateOnVisual.GetDisplayedAsImage(this.entity),i.position=OperateOnVisual.GetDisplayedAsImage(this.entity).scene.tweens.add(t)}isTweeningPosition(){const t=this.tweens;if(!t.position)return!1;return 26!=t.position.state}isTweeningScale(){const t=this.tweens;if(!t.scale)return!1;return 26!=t.scale.state}tweenScale(t,i=null){const n=this.tweens;n.scale&&(26!=n.scale.state&&n.scale.stop(),n.scale.remove(),n.scale=null),t.targets=OperateOnVisual.GetDisplayedAsImage(this.entity),null==i?n.scale=OperateOnVisual.GetDisplayedAsImage(this.entity).scene.tweens.add(t):OperateOnVisual.GetDisplayedAsImage(this.entity).scene.tweens.add(t)}tweenAlpha(t){const i=this.tweens;i.alpha&&(26!=i.alpha.state&&i.alpha.stop(),i.alpha.remove(),i.alpha=null),t.targets=OperateOnVisual.GetDisplayedAsImage(this.entity),i.alpha=OperateOnVisual.GetDisplayedAsImage(this.entity).scene.tweens.add(t)}getSpineSlotsList(t=!1){const i=this.refDisplayed.getSlotList();return t&&console.log(this.entity,i),i}getSpineAnimationList(t=!1){const i=[],n=OperateOnVisual.GetDisplayedAsAny(this.entity);for(var r=0;r<n.stateData.skeletonData.animations.length;r++){var o=n.stateData.skeletonData.animations[r].name;i.push(o)}return t&&console.log(this.entity,i),i}spineRandomizeSlotsAttachments(t){OperateOnVisual.GetDisplayedAsAny(this.entity);for(let i=0;i<t.length;i++){let n=t[i],r=OperateOnVisual.SpineListAttachmentsBySlots(this.entity,!1)[n],o=Phaser.Utils.Array.GetRandom(r);OperateOnVisual.SpineSetAttachment(this.entity,n,o)}}onDestroyed(t){this.refDisplayed&&(this.disposeAllTweens(),this.refDisplayed.selfEntity=null,this.refDisplayed.destroy(),this.refDisplayed=null)}static get properties(){return{}}}class VisualTemplates{static DefaultImage(t="_NONE",i=null){let n={type:To,texture:t};return i&&b(n,i),n}static DefaultSpine(t="_NONE",i=null){let n={type:wo,texture:t};return i&&b(n,i),n}static DefaultText(t="_NONE",i=null){let n={type:bo,texture:t};return i&&b(n,i),n}static DefaultParticle(t="_NONE",i=null){let n={type:Mo,texture:t};return i&&b(n,i),n}static DefaultZone(t=null){let i={type:So};return t&&b(i,t),i}}const Eo=new class InternalDataClass$7{constructor(){this.query}};class ReactiveOffscreenDieAndVisualQuery{static RegisterQuery(){Eo.query=GeoticManager.GetWorld().createQuery({all:[VisualComponent,OffscreenDieComponent]}),Eo.query.onEntityAdded((t=>{})),Eo.query.onEntityRemoved((t=>{}))}static GetReference(){return Eo.query}}class OffscreenDieRoutine{static OnRegister(){}static Register(){RoutinesManager.RegisterRoutine(OffscreenDieRoutine)}static Init(){}static GetName(){return"OffscreenDieRoutine"}static Update(t){const i=ReactiveOffscreenDieAndVisualQuery.GetReference()._cache;for(let n=0;n<i.length;n++){const r=i[n],o=OffscreenDieComponent.At(r);o.timeOffScreenMS+=t,o.timeOffScreenMS>=1e4&&(o.wasOnScreen=!0);const a=VisualComponent.At(r).isDisplayedOnScreen();0==a&&o.wasOnScreen?Fr.Take(r):1==a&&(o.wasOnScreen=!0)}}}class PinOthers extends Component{constructor(t){super(null),this.pinnedEntitiesList=[],this.killPinnedOnDestroy=!1;const i=JSON.parse(JSON.stringify(this.constructor.properties));Object.assign(this,i,t)}addPin(t,i){null!=i.x||(i.x=0),null!=i.y||(i.y=0),this.pinnedEntitiesList.push({ref:t,relation:i}),SynchPinsRoutine.UpdateEntity(this.entity)}onDestroyed(){if(super.onDestroyed(),this.killPinnedOnDestroy)for(let t=0;t<this.pinnedEntitiesList.length;t++){const i=this.pinnedEntitiesList[t].ref;Fr.Take(i)}}unpinAll(){this.pinnedEntitiesList=[]}static AddWithPin(t,i,n,r=!0){t.has(PinOthers)||t.add(PinOthers);const o=PinOthers.At(t);o.addPin(i,n),o.killPinnedOnDestroy=r}static At(t){return t.pinOthers}static get properties(){return{}}}class TransformComponent extends Component{constructor(t){super(null),this.refTarget={x:t.x,y:t.y,angle:t.angle};const i=JSON.parse(JSON.stringify(this.constructor.properties));Object.assign(this,i,t)}static CalculateDeltaBetween(t,i){const n=TransformComponent.At(t),r=TransformComponent.At(i),o={x:0,y:0};return n&&r&&(o.x=r.refTarget.x-n.refTarget.x,o.y=r.refTarget.y-n.refTarget.y),o}static At(t){return t.transform}setPosition(t,i){null!=t&&(this.refTarget.x=t),null!=i&&(this.refTarget.y=i)}getTarget(){return this.refTarget}static get properties(){return{}}static AddToEntity(t,i=0,n=0,r=0){t.add(TransformComponent,{x:i,y:n,angle:r})}}const Co=new class InternalDataClass$6{constructor(){this.query}};class ReactivePinOthersQuery{static RegisterQuery(){Co.query=GeoticManager.GetWorld().createQuery({all:[PinOthers,TransformComponent]}),Co.query.onEntityAdded((t=>{})),Co.query.onEntityRemoved((t=>{}))}static GetReference(){return Co.query}}const Ao=new class InternalDataClass$5{constructor(){__publicField(this,"active",!0),__publicField(this,"queryPinOthers",null)}};class SynchPinsRoutine{static Register(){RoutinesManager.RegisterRoutine(SynchPinsRoutine)}static OnRegister(){}static Init(){Ao.queryPinOthers=ReactivePinOthersQuery.GetReference()}static GetName(){return"SynchPinsRoutine"}static UpdateEntity(t){let i=PinOthers.At(t).pinnedEntitiesList;for(let n=0;n<i.length;n++){let r=i[n].ref,o=i[n].relation;if(!r.isDestroyed){const i=TransformComponent.At(r),n=TransformComponent.At(t);i.refTarget.x=n.refTarget.x+o.x,i.refTarget.y=n.refTarget.y+o.y}}}static Update(t){const i=Ao.queryPinOthers._cache;for(let n=0;n<i.length;n++){let t=i[n];SynchPinsRoutine.UpdateEntity(t)}}}function CmdTweenAlphaTo(t,i){let n={duration:1e3,delay:0,ease:"Cubic.InOut"};null!=i.alpha||(i.alpha=1),b(n,i),VisualComponent.At(t).tweenAlpha(n)}function CmdTweenVisualByDeltaFrom(t,i){VisualComponent.At(t).fastTrackPosition(t);let n={x:0,y:0,duration:1e3,delay:0,ease:"Cubic.InOut"};b(n,i);const r=OperateOnVisual.GetDisplayed(t),o=n.x,a=n.y;n.x=r.x,n.y=r.y,r.x=r.x+o,r.y=r.y+a,VisualComponent.At(t).tweenPosition(n)}function CmdTweenVisualByDeltaTo(t,i){VisualComponent.At(t).fastTrackPosition();let n=b({x:0,y:0,duration:1e3,delay:0,ease:"Cubic.InOut"},i);const r=OperateOnVisual.GetDisplayed(t);n.x=r.x+n.x,n.y=r.y+n.y,VisualComponent.At(t).tweenPosition(n)}const _o=class{static RegisterPackedAsGameCommand(){I.register(this.Name,new GameCommand((t=>{_o.Take()})))}static Take(){BMEngine.UserMuteAudio()}};let Ro=_o;__publicField(Ro,"Name","GlobalMuteAudioAction");const Po=class{static RegisterPackedAsGameCommand(){I.register(this.Name,new GameCommand((t=>{Po.Take()})))}static Take(){BMEngine.UserUnmuteAudio()}};let Oo=Po;__publicField(Oo,"Name","GlobalUnmuteAudioAction");const ko=class{static RegisterPackedAsGameCommand(){I.register(this.Name,new GameCommand((t=>{ko.Take(t.target,t.animationName,t)})))}static Take(t,i,n){VisualComponent.At(t).setAnimation(i,n)}};let Lo=ko;function CmdTweenScaleTo(t,i,n=null){if(!t)return;if(t.isDestroyed)return;let r={scale:1,duration:1e3,delay:0,ease:"Cubic.InOut"};b(r,i),VisualComponent.At(t).tweenScale(r,n)}__publicField(Lo,"Name","SetEntityAnimationAction");const Do=class{static RegisterPackedAsGameCommand(){I.register(this.Name,new GameCommand((t=>{Do.Take(t.entity,t.reason)})))}static Take(t,i){"over"==i?CmdTweenScaleTo(t,{scale:1.1,duration:100}):"out"==i||"up"==i?CmdTweenScaleTo(t,{scale:1,duration:100}):"down"==i&&CmdTweenScaleTo(t,{scale:.9,duration:100})}};let Io=Do;__publicField(Io,"Name","BasicInteractionAction");const Fo=class{static RegisterPackedAsGameCommand(){I.register(this.Name,new GameCommand((t=>{Fo.Take(t.entity,t.reason)})))}static Take(t,i){"over"==i?CmdTweenScaleTo(t,{scale:1.1,duration:100}):"out"==i?CmdTweenScaleTo(t,{scale:1,duration:100}):"up"==i?(BMEngine.PlayAudioFile("tap"),CmdTweenScaleTo(t,{scale:1,duration:100})):"down"==i&&CmdTweenScaleTo(t,{scale:.9,duration:100})}};let Bo=Fo;__publicField(Bo,"Name","ButtonInteractionAction");const No=class{static RegisterPackedAsGameCommand(){I.register(this.Name,new GameCommand((t=>{No.Take(t.entity,t.reason)})))}static Take(t,i){}};let Yo=No;__publicField(Yo,"Name","NoInteractionAction");const Xo=class{static RegisterPackedAsGameCommand(){I.register(this.Name,new GameCommand((t=>{Xo.Take(t.entity,t.deltaX,t.deltaY)})))}static Take(t,i=null,n=null){null==i&&(i=0),null==n&&(n=0);const r=TransformComponent.At(t);r.refTarget.x+=i,r.refTarget.y+=n}};let Go=Xo;__publicField(Go,"Name","RepositionEntityByDeltaAction");const Uo=class{static RegisterPackedAsGameCommand(){I.register(this.Name,new GameCommand((t=>{Uo.Take(t.entity,t.multX,t.multY)})))}static Take(t,i=null,n=null){null==i&&(i=0),null==n&&(n=0);const r=TransformComponent.At(t),o=OperateOnVisual.GetDisplayed(t);r.refTarget.x+=o.displayWidth*i,r.refTarget.y+=o.displayHeight*n}};let Vo=Uo;__publicField(Vo,"Name","RepositionEntityToAction");class RepositionEntityToEntityAction{static RegisterPackedAsGameCommand(){I.register(this.Name,new GameCommand((t=>{console.log("IMPLEMENT: RepositionEntityToEntityAction as GameCommand")})))}static Take(t,i,n={x:0,y:0}){const r=TransformComponent.At(t),o=TransformComponent.At(i);r.refTarget.x=o.refTarget.x+n.x,r.refTarget.y=o.refTarget.y+n.y}}__publicField(RepositionEntityToEntityAction,"Name","RepositionEntityToEntityAction");class ToggleComponent extends Component{constructor(t){super(null),this.curStateName=null,this.states=null;const i=JSON.parse(JSON.stringify(this.constructor.properties));Object.assign(this,i,t)}synchAnimationToState(){Lo.Take(this.entity,this.curStateName)}setToggleStateAsNext(){this.curStateName=this.states[this.curStateName].nextState,this.synchAnimationToState()}runCommandsAtCurrentState(){I.runCommandObj(b({entity:this.entity},this.states[this.curStateName].command))}setToggleState(t){this.curStateName=t,this.synchAnimationToState()}static At(t){return console.assert(null!=t,t),console.assert(null!=t.toggle,t),t.toggle}static get properties(){return{}}static AddWithToggleStatesDictionary(t,i,n){const r={curStateName:i,states:n};t.add(ToggleComponent,r)}}const zo=class{static RegisterPackedAsGameCommand(){I.register(this.Name,new GameCommand((t=>{zo.Take(t.entity)})))}static Take(t){const i=ToggleComponent.At(t);i.runCommandsAtCurrentState(),i.setToggleStateAsNext()}};let Wo=zo;__publicField(Wo,"Name","RunEntityToggleLogic");const BuildCommand=(t,i)=>b({key:t},i);class Interactive extends Component{constructor(t){super(null),this.isDisabled=!1,this.canDrag=!1,this.canSwipe=!1,this.pressed=!1,this.dict={},this.onSwipeCmdName=null,this.swipeCfg=null,this.runtime={rexSwipe:null},this.refHitArea=null;const i=JSON.parse(JSON.stringify(this.constructor.properties));Object.assign(this,i,t)}setEnabled(t){this.isDisabled=!t}resizeInputAreaAsRectangle(t,i,n=null,r=null){this.refHitArea.setSize(t,i),null!=n&&(this.refHitArea.x=n),null!=r&&(this.refHitArea.y=r)}debugInput(){const t=VisualComponent.At(this.entity).getDisplayedAsImage();t.scene.input.enableDebug(t)}static At(t){return t.interactive}static AddPlain(t,i,n,r,o,a){if(t.has(Interactive))return void console.warn("CANT ADD COMPONENT SECOND TIME");const h={};n&&(h.up=BuildCommand(n)),i&&(h.down=BuildCommand(i)),r&&(h.over=BuildCommand(r)),o&&(h.move=BuildCommand(o)),a&&(h.always=BuildCommand(a)),t.add(Interactive,GetInitialData(h))}static AddWithCmdOnUpAndBtnInteraction(t,i,n=null){if(t.has(Interactive))return void console.warn("CANT ADD COMPONENT SECOND TIME");const r={};null==n&&(n=Bo.Name),n&&(r.always=BuildCommand(n)),r.up=BuildCommand(i),t.add(Interactive,GetInitialData(r))}static AddWithDrag(t,i=null,n=null,r=null){if(t.has(Interactive))return void console.warn("CANT ADD COMPONENT SECOND TIME");const o={};null==r&&(r=Bo.Name),r&&(o.always=BuildCommand(r)),i&&(o.down=BuildCommand(i)),n&&(o.up=BuildCommand(n)),t.add(Interactive,GetInitialData(o,{canDrag:!0}))}static AddWithSwipe(t,i,n={},r=null){if(t.has(Interactive))return void console.warn("CANT ADD COMPONENT SECOND TIME");const o={};null==r&&(r=Io.Name),r&&(o.always=BuildCommand(r)),t.add(Interactive,GetInitialData(o,{canSwipe:!0,onSwipeCmdName:i,swipeCfg:n}))}static get properties(){return{}}}function GetInitialData(t,i=null){let n={dict:t};return i&&b(n,i),n}const Ho=new class InternalDataClass$4{constructor(){this.groups={},this.colliders={}}},jo=class{static GetGroup(t){return Ho.groups[t]?Ho.groups[t]:(console.warn("NO GROUP: ",t),null)}static PhysicsAddCollider(t,i,n,r){if(Ho.colliders[t])return;let o=jo.GetGroup(i),a=jo.GetGroup(n);const h=BMEngine.GetGameplayScene().physics.add.collider(o,a,r,null);Ho.colliders[t]={group1:i,group2:n,callbackFn:r,collider:h}}static PhysicsAddOverlap(t,i,n,r){if(Ho.colliders[t])return;let o=jo.GetGroup(i),a=jo.GetGroup(n);const h=BMEngine.GetGameplayScene().physics.add.overlap(o,a,r,null);Ho.colliders[t]={group1:i,group2:n,callbackFn:r,collider:h}}static OverlapGroupsByNames(t,i,n,r,o){console.assert(n);let a=jo.GetGroup(t),h=jo.GetGroup(i);a&&h&&BMEngine.GetGameplayScene().physics.world.overlap(a,h,n,r,o)}static OverlapObjects(t,i,n,r,o){return BMEngine.GetGameplayScene().physics.world.overlap(t,i,n,r,o)}};let qo=jo;__publicField(qo,"AddGroup",(function(t,i=!1){if(!Ho.groups[t])return Ho.groups[t]=i?BMEngine.GetGameplayScene().physics.add.staticGroup():BMEngine.GetGameplayScene().physics.add.group(),Ho.groups[t]}));class PhysicsComponent extends Component{constructor(t){super(null),this.isStatic=!1,this.isCircle=!1,this.groupsList=[],this.offsetX=0,this.offsetY=0,this.circleRadius=0,this.bulletData=null,this.body=null,this.bullet=null;const i=JSON.parse(JSON.stringify(this.constructor.properties));Object.assign(this,i,t)}getBodyAsDynamic(){return this.body}setSizeScaled(t){var i=this.getBodyAsDynamic().sourceWidth*t,n=this.getBodyAsDynamic().sourceHeight*t;this.getBodyAsDynamic().setSize(i,n,!0)}resizeTo(t,i,n=null,r=null){this.isCircle?console.warn("IMPLEMENT!"):(this.body.setSize(t,i),null!=n&&(this.offsetX=n),null!=r&&(this.offsetY=r),this.body.setOffset(this.offsetX,this.offsetY))}resizeDeltaOwnSize(t,i,n,r){this.isCircle?console.warn("IMPLEMENT!"):this.resizeTo(this.body.width+t,this.body.height+i,n,r)}static get properties(){return{}}static At(t){return t.physics}static AddToEntity(t,i){t.add(PhysicsComponent,i)}static AddToEntityWithBulletBehaviour(t,i){let n={bulletData:{speed:100,rotateToTarget:!0,enable:!0}};b(n,i),t.has(PhysicsComponent)||PhysicsComponent.AddToEntity(t,n)}static BootBody(t){const i=PhysicsComponent.At(t);if(i.isCircle){let t=i.body.halfWidth-i.circleRadius,n=i.body.halfWidth-i.circleRadius;i.body.setCircle(i.circleRadius),i.body.setOffset(t+i.offsetX,n+i.offsetY)}else i.body.setSize(i.body.width,i.body.height),i.body.setOffset(i.offsetX,i.offsetY);if(i.bulletData){const t=BMEngine.GetGameplayScene().plugins.get("rexBullet");i.bullet=t.add(i.body.gameObject,i.bulletData)}(class OperateOnPhysics{static GetBodyAsDynamic(t){return t.physics.body}static GetBodyAsStatic(t){return t.physics.body}static PutIntoPhysicsGroups(t){const i=PhysicsComponent.At(t);for(let n=0;n<i.groupsList.length;n++){let r=i.groupsList[n];const o=qo.GetGroup(r);o||console.warn("NO GROUP: ",r),o.add(t.physics.body.gameObject)}}static DisableBody(t){t.physics.body.stop(),t.physics.body.enable=!1,t.physics.body.gameObject.active=!1}}).PutIntoPhysicsGroups(t)}}const Zo=new class InternalDataClass$3{constructor(){this.query}};class ReactiveInteractiveAndVisualQuery{static RegisterQuery(){Zo.query=GeoticManager.GetWorld().createQuery({all:[Interactive,VisualComponent]}),Zo.query.onEntityAdded((t=>{const i=VisualComponent.At(t),n=Interactive.At(t);i.getDisplayedAsImage().setInteractive(),n.refHitArea=i.refDisplayed.input.hitArea})),Zo.query.onEntityRemoved((t=>{}))}static GetReference(){return Zo.query}}const Ko=new class InternalDataClass$2{constructor(){this.query}};const Jo=new class InternalDataClass$1{constructor(){this.query}};class ParticleTrailFollowerComponent extends Component{constructor(t){super(null),this.targetGuid=null,this.angleMinOffset=0,this.angleMaxOffset=0,this.offsetX=0,this.offsetY=0;const i=JSON.parse(JSON.stringify(this.constructor.properties));Object.assign(this,i,t)}static GetName(){return"particleTrailFollower"}static At(t){return t.particleTrailFollower}static get properties(){return{}}static AddToEntity(t,i,n={}){const r={targetGuid:i};b(r,n),t.add(ParticleTrailFollowerComponent,r)}}const Qo=new class InternalDataClass{constructor(){this.query}};function DoCommonGameRegisters(t){t.registerComponent(DataComponent,"data"),t.registerComponent(TransformComponent,"transform"),t.registerComponent(VisualComponent,"visual"),t.registerComponent(CommandsComponent,"commands"),t.registerComponent(BagsComponent,"bags"),t.registerComponent(PinOthers,"pinOthers"),t.registerComponent(Interactive,"interactive"),t.registerComponent(ToggleComponent,"toggle"),t.registerComponent(PhysicsComponent,"physics"),t.registerComponent(ParticleTrailFollowerComponent,ParticleTrailFollowerComponent.GetName()),class ReactiveTransformAndVisualQuery{static RegisterQuery(){Jo.query=GeoticManager.GetWorld().createQuery({all:[VisualComponent,TransformComponent]}),Jo.query.onEntityAdded((t=>{const i=TransformComponent.At(t);OperateOnVisual.GetDisplayed(t).x=i.refTarget.x,OperateOnVisual.GetDisplayed(t).y=i.refTarget.y,OperateOnVisual.GetDisplayed(t).angle=i.refTarget.angle,i.refTarget=OperateOnVisual.GetDisplayed(t)})),Jo.query.onEntityRemoved((t=>{}))}static GetReference(){return Jo.query}}.RegisterQuery(),ReactiveInteractiveAndVisualQuery.RegisterQuery(),ReactivePinOthersQuery.RegisterQuery(),class ReactivePhysicsAndVisualQuery{static RegisterQuery(){Ko.query=GeoticManager.GetWorld().createQuery({all:[VisualComponent,PhysicsComponent]}),Ko.query.onEntityAdded((t=>{const i=PhysicsComponent.At(t),n=VisualComponent.At(t).getDisplayedAsImage();n.body?console.warn("IMPLEMENT! ReactivePhysicsAndVisualQuery:onEntityAdded"):(i.body=n.scene.physics.add.existing(n,i.isStatic).body,PhysicsComponent.BootBody(t))})),Ko.query.onEntityRemoved((t=>{}))}static GetReference(){return Ko.query}}.RegisterQuery(),class ReactiveParticleTrailAndTransformAndVisualQuery{static RegisterQuery(){Qo.query=GeoticManager.GetWorld().createQuery({all:[TransformComponent,VisualComponent,ParticleTrailFollowerComponent]})}static GetReference(){return console.assert(Qo.query),Qo.query}}.RegisterQuery(),Fr.RegisterPackedAsGameCommand(),RepositionEntityToEntityAction.RegisterPackedAsGameCommand(),Lo.RegisterPackedAsGameCommand(),Vo.RegisterPackedAsGameCommand(),Go.RegisterPackedAsGameCommand(),Bo.RegisterPackedAsGameCommand(),Io.RegisterPackedAsGameCommand(),Yo.RegisterPackedAsGameCommand(),Wo.RegisterPackedAsGameCommand(),Ro.RegisterPackedAsGameCommand(),Oo.RegisterPackedAsGameCommand()}const $o=class{static RegisterPackedAsGameCommand(){I.register(this.Name,new GameCommand((t=>{$o.Take(t.entity,t.x,t.y)})))}static Take(t,i=null,n=null){TransformComponent.At(t).setPosition(i,n)}};let ta=$o;__publicField(ta,"Name","RepositionEntityToAction");const ea=new class Data{constructor(){this.trackedTaps={},this.trackedInputs=[{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null}],this.keys={},this.sinceButtonPress=1e4,this.swipe=null,this.swipeCallback=null,this.keyCallbacks={}}};class InputRoutine{static Register(){RoutinesManager.RegisterRoutine(InputRoutine)}static OnRegister(){ReactiveInteractiveAndVisualQuery.GetReference().onEntityAdded((t=>{!function _AddActorInteractivity(t){const i=OperateOnVisual.GetDisplayedAsImage(t),n=Interactive.At(t);if(n.canSwipe){const t=BMEngine.GetGameplayScene();let r={threshold:35,velocityThreshold:10,workaroundEnabled:1,workaroundMaxTime:1e3};b(r,n.swipeCfg),t.rexGestures.add.swipe(i,r).on("swipe",((t,i,n)=>{const r=Interactive.At(i.selfEntity);I.runCommand(r.onSwipeCmdName,{entity:i.selfEntity,swipe:t})}))}i.on("pointerup",(function(i,r,o,a){BMEngine.IsRotationDisplayed()||n.pressed&&F.getData(DataComponent.At(t).gameStateName).isRunning()&&(_RemoveButtonTracking(t),_PerformInteraction(t,"always","up"),n.isDisabled||_PerformInteraction(t,"up","up"))})),i.on("pointerdown",(function(i,r,o,a){BMEngine.IsRotationDisplayed()||F.getData(DataComponent.At(t).gameStateName).isRunning()&&(n.isDisabled||(_PerformInteraction(t,"always","down"),_PerformInteraction(t,"down","down"),n.pressed=!0,function _AddButtonTracking(t,i){ea.trackedInputs[i].obj?console.warn("ALREADY TRACKING BUTTON AT ID: ",i):ea.trackedInputs[i].obj=t}(t,i.id)))})),i.on("pointerover",(function(i,r,o,a){BMEngine.IsRotationDisplayed()||F.getData(DataComponent.At(t).gameStateName).isRunning()&&(n.isDisabled||n.pressed||(_PerformInteraction(t,"always","over"),_PerformInteraction(t,"over","over")))})),i.on("pointermove",(function(i,r,o,a){BMEngine.IsRotationDisplayed()||F.getData(DataComponent.At(t).gameStateName).isRunning()&&(n.isDisabled||n.pressed&&(_PerformInteraction(t,"always","move"),_PerformInteraction(t,"move","move")))})),i.on("pointerout",(function(i,r,o,a){BMEngine.IsRotationDisplayed()||F.getData(DataComponent.At(t).gameStateName).isRunning()&&(n.pressed||(_PerformInteraction(t,"always","out"),_PerformInteraction(t,"out","out")))}))}(t)})),ReactiveInteractiveAndVisualQuery.GetReference().onEntityRemoved((t=>{_RemoveButtonTracking(t),OperateOnVisual.GetDisplayedAsImage(t).removeInteractive()}))}static Init(){const t=BMEngine.GetGameplayScene();t.input.addPointer(10),ea.trackedInputs[0].input=t.input.mousePointer,ea.trackedInputs[1].input=t.input.pointer1,ea.trackedInputs[2].input=t.input.pointer2,ea.trackedInputs[3].input=t.input.pointer3,ea.trackedInputs[4].input=t.input.pointer4,ea.trackedInputs[5].input=t.input.pointer5,ea.trackedInputs[6].input=t.input.pointer6,ea.trackedInputs[7].input=t.input.pointer7,ea.trackedInputs[8].input=t.input.pointer8,ea.trackedInputs[9].input=t.input.pointer9,ea.trackedInputs[10].input=t.input.pointer10,ea.keys.w=t.input.keyboard.addKey("w"),ea.keys.s=t.input.keyboard.addKey("s"),ea.keys.a=t.input.keyboard.addKey("a"),ea.keys.d=t.input.keyboard.addKey("d"),ea.keys[" "]=t.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE),ea.keys["/"]=t.input.keyboard.addKey("/"),ea.keys.right=t.input.keyboard.addKey("right"),ea.keys.left=t.input.keyboard.addKey("left"),ea.keys.up=t.input.keyboard.addKey("up"),ea.keys.down=t.input.keyboard.addKey("down"),t.input.keyboard.on("keydown",(function(t){ea.keyCallbacks[t.key]&&ea.keyCallbacks[t.key](t)})),ea.swipe=t.rexGestures.add.swipe({threshold:35,velocityThreshold:10,workaroundEnabled:1,workaroundMaxTime:1e9}),ea.swipe.on("swipe",(t=>{ea.swipeCallback&&ea.swipeCallback(t)}))}static GetName(){return"InputRoutine"}static Update(t){BMEngine.GetGameplayScene();for(let i=0;i<ea.trackedInputs.length;i++){let t=ea.trackedInputs[i].input;if(ea.trackedInputs[i].obj){if(Interactive.At(ea.trackedInputs[i].obj).canDrag){const n=OperateOnVisual.GetDisplayedAsImage(ea.trackedInputs[i].obj);ta.Take(ea.trackedInputs[i].obj,t.x+n.scene.cameras.main.scrollX,t.y+n.scene.cameras.main.scrollY)}}t&&!t.isDown&&ea.trackedInputs[i].obj&&_RemoveButtonTracking(ea.trackedInputs[i].obj)}InputRoutine.GetPointerIfNotPressingButton()?(ea.sinceButtonPress+=t,ea.sinceButtonPress>=1e4&&(ea.sinceButtonPress=1e4)):ea.sinceButtonPress=0}static GetSinceButtonPress(){return ea.sinceButtonPress}static SetSwipeCallback(t){ea.swipeCallback=t}static AddKeyDown(t,i){if(Array.isArray(t))for(let n=0;n<t.length;n++){let r=t[n];ea.keyCallbacks[r]=i}else ea.keyCallbacks[t]=i}static HasTrackedButton(){for(let t=0;t<ea.trackedInputs.length;t++)if(null!=ea.trackedInputs[t].obj)return!0;return!1}static GetPointerIfNotPressingButton(){return 0==InputRoutine.HasTrackedButton()?BMEngine.GetGameplayScene().input.activePointer:null}static GetPointer(){return BMEngine.GetGameplayScene().input.activePointer}static IsKeyFromListDown(t){for(let i=0;i<t.length;i++){if(ea.keys[t[i]].isDown)return!0}return!1}}function _PerformInteraction(t,i,n){const r=Interactive.At(t);if(r.dict[i]&&r.dict[i].key){const o=r.dict[i];let a=b({entity:t,reason:n},o);I.runCommand(o.key,a)}}function _RemoveButtonTracking(t){const i=Interactive.At(t);i.pressed&&(_PerformInteraction(t,"always","out"),function _NullifyTrackedButton(t){for(let i=0;i<ea.trackedInputs.length;i++)if(ea.trackedInputs[i].obj==t)return void(ea.trackedInputs[i].obj=null)}(t)),i.pressed=!1}const ia=new DataHolder;class LogicLoopRoutine{static Init(){}static OnRegister(){}static Register(){RoutinesManager.RegisterRoutine(LogicLoopRoutine)}static GetName(){return"LogicLoopRoutine"}static Update(t){const i=ia.getKeyList();for(let n=0;n<i.length;n++){let r=i[n];ia.getData(r).f(t)}}static SetUpdateFunc(t,i){ia.register(t,{f:i},!0)}static CleanFunction(t){ia.register(t,{f:()=>{}},!0)}}class GameSession{constructor(){this.seenTutorial=!1,this.initialized=!1,this.tutState=0,this.sawTutorialOnFirstCatch=!1}}class GameSubsession{constructor(){this.score=0,this.latestScore=0}}class InternalGameLevelData{constructor(){this.levelLoopEnded=!1,this.levelLoopStarted=!1,this.activeLevelTime=0,this.shotHaczyk=!1,this.isHaczykRetreating=!1,this.haczykStartY=0,this.haczykStartX=0,this.referenceCaughtFish=null,this.wasPointerUpToAllowRetreat=!1,this.keepReelingFishFor=0,this.offsetCaughtFishX=0,this.offsetCaughtFishY=30,this.offsetWhereFishIsCaught=70,this.waitingForUntap=!1,this.splashAtY=0,this.didSplash=!1,this.tryToSplash=!1,this.temp_spawn=1e6,this.lives=3,this.playerDead=!1,this.score=0,this.playedFor=0,this.sinceSlowed=0,this.sinceGigaspawn=0,this.firstReturn=!0,this.fishSpeedMultiplier=1,this.fishSpawner=null,this.scriptTarget={}}}const na=new class InternalGlobals{constructor(){this.session=new GameSession,this.subsession=new GameSubsession,this.currentLevelData=new InternalGameLevelData}ResetLevelData(){this.currentLevelData=new InternalGameLevelData}ResetSubsession(){this.subsession=new GameSubsession}};class MathUtil{static GetRotatedCoordinate(t,i,n){return Phaser.Math.Rotate({x:t,y:i},Phaser.Math.DegToRad(n))}static AddRotatedByAnglePositionsToObject(t,i,n,r){var o=MathUtil.GetRotatedCoordinate(i,n,r);t.x+=o.x,t.y+=o.y}static GetAngleBetweenInDegrees(t,i,n,r){return Phaser.Math.RadToDeg(Phaser.Math.Angle.Between(t,i,n,r))}static BetweenPadded(t,i,n){let r=Phaser.Math.Between(t,i);return Voca.padLeft(r,n,"0")}}const sa=new class Internal{constructor(){this.fishSpeedMultiplier=1}Get(){return this}};var ra=new class FishingActorsCreationHelper{constructor(){this.lastType=null}getFunctionCall(t){var i=t;if("last"==i&&null==this.lastType&&(i="any"),"last"==i&&null!=this.lastType&&(i=this.lastType),"any"==i){i=Phaser.Utils.Array.GetRandom(["fish_0","fish_1","fish_2","fish_3","fish_4","fish_5"])}this.lastType=i;var n=null;return"fish_0"==i&&(n=ha.Slow_Simple_Fish),"fish_1"==i&&(n=ha.Fish_1),"fish_2"==i&&(n=ha.Fish_2),"fish_3"==i&&(n=ha.Fish_3),"fish_4"==i&&(n=ha.Fish_4),"fish_5"==i&&(n=ha.Fish_5),n}};var oa=new class FishingPositionsHelper{getX(t){if(null==t)return this.any_x()}getY(t){if(null==t)return this.any_y();if("any"==t){return(0,this[t+"_y"])()}return(0,this[t])()}any_x(){return-500+Phaser.Math.Between(0,50)}any_y(){return Phaser.Math.Between(750,1200)}bottom(){return Phaser.Math.Between(950,1200)}middle(){return Phaser.Math.Between(850,950)}top(){return Phaser.Math.Between(750,950)}};class FishingSpawnActorsScriptTarget{copyFunctionsToTargetByBind(t){t.spawn_single=this.spawn_single.bind(t),t.spawn_v_horizontal=this.spawn_v_horizontal.bind(t),t.spawn_v_horizontal_reverse=this.spawn_v_horizontal_reverse.bind(t),t.spawn_line=this.spawn_line.bind(t),t.idle=this.idle.bind(t)}idle(t){}spawn_single(t){t=JSON.parse(t),ra.getFunctionCall(t.type)(oa.getX(t.x),oa.getY(t.y))}spawn_v_horizontal(t){t=JSON.parse(t);var i=oa.getX(t.x),n=oa.getY(t.y),r=[];r.push({x:i,y:n});var o=t.count-1;o=Math.floor(o/2);for(let d=0;d<o;d++)r.push({x:i+t.spacing_x*(d+1),y:n-t.spacing_y*(d+1)}),r.push({x:i-t.spacing_x*(d+1),y:n-t.spacing_y*(d+1)});var a=ra.getFunctionCall(t.type);for(let d=0;d<r.length;d++){var h=r[d];a(h.x,h.y)}}spawn_v_horizontal_reverse(t){t=JSON.parse(t);var i=oa.getX(t.x),n=oa.getY(t.y),r=[];r.push({x:i,y:n});var o=t.count-1;o=Math.floor(o/2);for(let d=0;d<o;d++)r.push({x:i+t.spacing_x*(d+1),y:n+t.spacing_y*(d+1)}),r.push({x:i-t.spacing_x*(d+1),y:n+t.spacing_y*(d+1)});var a=ra.getFunctionCall(t.type);for(let d=0;d<r.length;d++){var h=r[d];a(h.x,h.y)}}spawn_line(t){t=JSON.parse(t);var i=oa.getX(t.x),n=oa.getY(t.y),r=[];r.push({x:i,y:n});var o=t.count-1;for(let d=0;d<o;d++)r.push({x:i+t.spacing_x*(d+1),y:n+t.spacing_y*(d+1)});var a=ra.getFunctionCall(t.type);for(let d=0;d<r.length;d++){var h=r[d];a(h.x,h.y)}}}const aa=new class InternalStatesModel extends class CasualGameStates{constructor(){this.Always=new GameState("Always"),this.GameplayLoop=new GameState("GameplayLoop"),this.GameplayLevel=new GameState("GameplayLevel"),this.GameplayGui=new GameState("GameplayGui"),this.Cover=new GameState("Cover"),this.GameOver=new GameState("GameOver"),this.Fade=new GameState("Fade"),this.AudioController=new GameState("AudioController"),this.Pause=new GameState("Pause"),this.CommandRequestCover=I.register("RequestCover",new GameCommand((()=>{BMEngine.SetPauseAllowedByStates(!1),this.Always.continue(),this.GameplayLoop.quit(),this.GameplayGui.quit(),this.GameplayLevel.enterFresh(),this.GameOver.quit(),this.Cover.enterFresh(),this.AudioController.continue()}))),this.CommandRequestCoverFromGameOver=I.register("RequestCoverFromGameOver",new GameCommand((()=>{BMEngine.SetPauseAllowedByStates(!1),this.Always.continue(),this.GameplayLevel.exit(),this.GameplayGui.exit(),this.GameplayLoop.exit(),this.GameOver.exit(),this.AudioController.continue(),this.Fade.enterFresh(),EndOfLoopRoutine.QueueDelayedFunction(null,550,(()=>{this.Cover.enterFresh(),this.GameplayLevel.enterFresh(),this.Fade.exit()}))}))),this.CommandRequestGameplay=I.register("RequestGameplay",new GameCommand((()=>{BMEngine.SetPauseAllowedByStates(!0),this.Always.continue(),this.Cover.exit(),this.GameOver.quit(),this.GameplayLevel.continue(),this.GameplayGui.enterFresh(),this.GameplayLoop.enterFresh(),this.AudioController.continue()}))),this.CommandRequestGameOver=I.register("RequestGameOver",new GameCommand((()=>{BMEngine.SetPauseAllowedByStates(!0),this.Always.continue(),this.GameplayLevel.continue(),this.GameplayGui.continue(),this.GameplayLoop.exit(),this.Cover.quit(),this.GameOver.enterFresh(),this.AudioController.continue()}))),this.CommandRestartLevelLogic=I.register("RestartLevelLogic",new GameCommand((()=>{BMEngine.SetPauseAllowedByStates(!0),this.Always.continue(),this.Cover.exit(),this.GameOver.quit(),this.GameplayLevel.exit(),this.GameplayGui.continue(),this.GameplayLoop.exit(),this.AudioController.continue(),EndOfLoopRoutine.QueueDelayedFunction(null,100,(()=>{this.GameplayLevel.enterFresh(),this.GameplayGui.continue(),this.GameplayLoop.enterFresh()}))}))),this.CommandPauseGame=I.register("PauseGame",new GameCommand((t=>{BMEngine.TryPauseGame()&&this.Pause.continue()}))),this.CommandUnpauseGame=I.register("UnpauseGame",new GameCommand((t=>{BMEngine.TryUnpauseGame()&&this.Pause.quit()})))}}{EnterGameplayLevel(){const t=na.currentLevelData;BMEngine.SetGameplayCameraOffset(0,300,!0),t.fishSpawner=new CSVScenario(BMEngine.GetGameplayScene(),{delimiter:"="});for(var i=[new FishingSpawnActorsScriptTarget],n=0;n<i.length;n++){i[n].copyFunctionsToTargetByBind(na.currentLevelData.scriptTarget)}ha.FisherPlayer(-225,450),t.haczykStartY=470,t.haczykStartX=25,ha.FishingHaczyk(t.haczykStartX,t.haczykStartY),ha.FishingLinka(t.haczykStartX,t.haczykStartY),ha.HaczykVis(t.haczykStartX,t.haczykStartY)}EnterGameplayLoop(){}};const ha=new class FishermanPrefabs extends class CasualGameSharedPrefabs extends class CommonGamePrefabs{constructor(){this.EmptyObject=t=>GeoticManager.CreateEntity(t),this.GuiImageObject=(t,i,n="gui_22",r=null)=>{const o=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(o),o.add(VisualComponent,VisualTemplates.DefaultImage(i,{layerName:n})),"bottom"==r&&CommandsComponent.AddWithData(o,{postmake:BuildCommand("TweenPositionFromBottom"),exit:BuildCommand("TweenPositionToBottom")}),"top"==r&&CommandsComponent.AddWithData(o,{postmake:BuildCommand("TweenPositionFromTop"),exit:BuildCommand("TweenPositionToTop")}),o},this.GuiSpineObject=(t,i,n="Idle",r=0,o=0,a="gui_22",h={layerDepth:0})=>{console.assert(null!=t);const d=GeoticManager.CreateEntity(t);TransformComponent.AddToEntity(d,r,o);let f={curAnimation:n,animations:{[n]:{loop:!0}},layerName:a};b(f,h);const p=VisualTemplates.DefaultSpine(i,f);return d.add(VisualComponent,p),d},this.GuiButtonObject=(t,i,n,r="gui_22",o=null)=>{const a=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(a),a.add(VisualComponent,VisualTemplates.DefaultImage(i,{layerName:r})),"bottom"==o&&CommandsComponent.AddWithData(a,{postmake:BuildCommand("TweenPositionFromBottom"),exit:BuildCommand("TweenPositionToBottom")}),Interactive.AddWithCmdOnUpAndBtnInteraction(a,n),a},this.GuiFont=(t,i,n)=>{const r=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(r),r.add(VisualComponent,VisualTemplates.DefaultText(i,{layerName:n})),r},this.GameplayImageObject=(t,i,n=0,r=0,o={})=>{const a=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(a,n,r),a.add(VisualComponent,VisualTemplates.DefaultImage(i,o)),a},this.GameplayZoneObject=(t,i=0,n=0,r={})=>{const o=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(o,i,n),o.add(VisualComponent,VisualTemplates.DefaultZone(r)),o},this.GameplaySpineObject=(t,i,n="Idle",r=0,o=0,a={layerDepth:0})=>{console.assert(null!=t);const h=GeoticManager.CreateEntity(t);TransformComponent.AddToEntity(h,r,o);let d={curAnimation:n,animations:{[n]:{loop:!0}}};return b(d,a),h.add(VisualComponent,VisualTemplates.DefaultSpine(i,d)),h},this.GameplaySpineObjectDieAfterAnim=(t,i,n="Idle",r=0,o=0,a={layerDepth:0})=>{let h={curAnimation:n,layerDepth:0,animations:{[n]:{loop:!1,onAnimationLoopedCmd:BuildCommand(Fr.Name,{})}}};return b(h,a),this.GameplaySpineObject(t,i,n,r,o,h)},this.GameplayTextObject=(t,i,n=0,r=0,o=null)=>{const a=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(a,n,r),a.add(VisualComponent,VisualTemplates.DefaultText(i,o)),a},this.GameplayParticleObject=(t,i,n=0,r=0,o={})=>{const a=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(a,n,r),a.add(VisualComponent,VisualTemplates.DefaultParticle(i,o)),a}}}{constructor(){super(),this.Background=t=>{const i=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultImage("BG")),i},this.CoverTitle=t=>{const i=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultImage("GameTitle",{layerName:"gui_22"})),CommandsComponent.AddWithData(i,{postmake:BuildCommand("TweenCoverTitle"),exit:BuildCommand("TweenPositionToTop")}),i},this.CoverLogo=(t,i)=>{const n=this.GuiImageObject(t,"BM_Logo",i);let r="TweenPositionFromTop",o="TweenPositionToTop";return"gui_33"==i&&(r="TweenPositionFromBottom",o="TweenPositionToBottom"),CommandsComponent.AddWithData(n,{postmake:BuildCommand(r,{delay:200}),exit:BuildCommand(o)}),n},this.ScorePanel=(t,i)=>{const n=this.GuiImageObject(t,"ScorePanel",i);return CommandsComponent.AddWithData(n,{postmake:BuildCommand("TweenPositionFromTop",{delay:100}),exit:BuildCommand("TweenPositionToTop")}),n},this.CoverScoreFont=t=>{const i=GeoticManager.CreateEntity(t);return BagsComponent.At(i).setAlias("AliasCoverScoreText"),TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultText("scorefont",{layerName:"gui_11"})),i},this.CoverHighscoreIcon=t=>{const i=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultImage("HighscoreIcon",{layerName:"gui_11"})),i},this.CoverPlayBtn=t=>{const i=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultImage("Btn_Play",{layerName:"gui_22"})),CommandsComponent.AddWithData(i,{postmake:BuildCommand("TweenPositionFromBottom",{duration:800,delay:300}),exit:BuildCommand("TweenPositionToBottom")}),Interactive.AddWithCmdOnUpAndBtnInteraction(i,"RequestGameplay"),i},this.GameOverRestartIcon=t=>{const i=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultImage("TryAgain",{layerName:"gui_22"})),CommandsComponent.AddWithData(i,{postmake:BuildCommand("TweenPositionFromTop",{delay:100}),exit:BuildCommand("TweenPositionToTop")}),i},this.GameOverPlayBtn=t=>{const i=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultImage("Btn_Play",{layerName:"gui_22"})),CommandsComponent.AddWithData(i,{postmake:BuildCommand("TweenPositionFromBottom"),exit:BuildCommand("TweenPositionToBottom")}),Interactive.AddWithCmdOnUpAndBtnInteraction(i,"RequestCoverFromGameOver"),i},this.GameOverHighscoreIcon=t=>{const i=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultImage("HighscoreIcon",{layerName:"gui_11"})),CommandsComponent.AddWithData(i,{postmake:BuildCommand("TweenPositionFromTop"),exit:BuildCommand("TweenPositionToTop")}),i},this.FadeCurtain=t=>{const i=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultImage("ZaslonkaFade",{layerName:"pause_22",scale:32})),CommandsComponent.AddWithData(i,{exit:BuildCommand("TweenAlphaTo",{alpha:0,duration:400})}),i},this.PauseBackground=t=>{const i=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultImage("PauseCurtain",{layerName:"pause_22",scale:32})),i},this.PauseIcon=t=>{const i=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultImage("PauseIcon",{layerName:"pause_22"})),i},this.PauseButtonCallUnpause=t=>{const i=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultImage("Btn_Play",{layerName:"pause_22"})),Interactive.AddWithCmdOnUpAndBtnInteraction(i,"UnpauseGame"),i},this.BtnAudioToggle=t=>{const i=GeoticManager.CreateEntity(t);return BagsComponent.At(i).setAlias("SettingsToggleBtnAudio"),TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultImage("Btn_SoundOn",{layerName:"gui_31",animations:{active:{texture:"Btn_SoundOn"},inactive:{texture:"Btn_SoundOff"}}})),CommandsComponent.AddWithData(i,{postmake:BuildCommand("TweenPositionFromTop"),exit:BuildCommand("TweenPositionToTop")}),Interactive.AddWithCmdOnUpAndBtnInteraction(i,Wo.Name),ToggleComponent.AddWithToggleStatesDictionary(i,"active",{active:{nextState:"inactive",command:BuildCommand(Ro.Name)},inactive:{nextState:"active",command:BuildCommand(Oo.Name)}}),i},this.TutorialHowToPlayHand=(t,i=null)=>{const n=GeoticManager.CreateEntity(t);BagsComponent.At(n).setAlias("TutorialHowToPlayHand"),TransformComponent.AddToEntity(n);const r={selfDepth:50,layerDepth:25,curAnimation:"SwipeRight",animations:{Hold:{loop:!0},SwipeRight:{loop:!0}}};return i&&b(r,i),n.add(VisualComponent,VisualTemplates.DefaultSpine("HTP_MinimalHand",r)),n},this.GameplayBtnPause=t=>{const i=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultImage("Btn_Pause",{layerName:"gui_31"})),CommandsComponent.AddWithData(i,{postmake:BuildCommand("TweenPositionFromRight"),exit:BuildCommand("TweenPositionToRight")}),Interactive.AddWithCmdOnUpAndBtnInteraction(i,"PauseGame"),i},this.GameplayScoreFont=t=>{const i=GeoticManager.CreateEntity(t);return BagsComponent.At(i).setAlias("GameplayScoreText"),TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultText("scorefont",{layerName:"gui_11"})),i},this.GameplayScoreIcon=t=>{const i=GeoticManager.CreateEntity(t);return TransformComponent.AddToEntity(i),i.add(VisualComponent,VisualTemplates.DefaultImage("ScoreIcon",{layerName:"gui_11"})),i}}}{constructor(){super()}Heart(t,i,n){var r=this.GuiSpineObject(aa.GameplayLevel,"Heart","idle_heart",i,n,"gui_11");BagsComponent.At(r).setAlias("heart_"+t),Go.Take(r,30+50*(t-1),0),CommandsComponent.AddWithData(r,{postmake:BuildCommand("TweenPositionFromTop",{delay:100}),exit:BuildCommand("TweenPositionToTop")}),CommandsComponent.At(r).runCommandAtTriggerKey("postmake")}DomeczekBackgroundResized(){var t=this.GameplayImageObject(aa.Always,"Domeczek_BG",0,0);return Vo.Take(t,0,.5),OperateOnVisual.SetScale(t,8,1),t}BackgroundTile(){var t=this.GameplayImageObject(aa.Always,"Domeczek",0,0);return Vo.Take(t,0,.5),t}LiniaWody(t,i){return this.GameplayImageObject(aa.Always,"LiniaWody",t,i,{layerDepth:10})}WodorostTop(t,i,n,r){n+=.05,i+=20;var o=this.GameplayImageObject(aa.Always,"WeedsSingle",0,0,{layerDepth:8});return Vo.Take(o,0,.5),Go.Take(o,t,i),OperateOnVisual.SetScale(o,n,n),VisualComponent.At(o).setFlipX(r),o}FisherPlayer(t,i){var n=this.GameplaySpineObject(aa.GameplayLevel,"Fisherman","idle",t,i,{layerDepth:9});return BagsComponent.At(n).setAlias("fisherman"),Vo.Take(n,0,.5),VisualComponent.At(n).setFlipX(!0),n}FishingHaczyk(t,i){var n=this.GameplayZoneObject(aa.GameplayLevel,0,0);return VisualComponent.At(n).getDisplayedAsZone().setSize(20,20),VisualComponent.At(n).getDisplayedAsZone().setOrigin(0,.5),BagsComponent.At(n).setAlias("haczyk"),BagsComponent.AddBagList(n,["BOUNCE_ANGLE"]),VisualComponent.At(n).getDisplayedAsZone().setAngle(90),PhysicsComponent.AddToEntityWithBulletBehaviour(n,{groupsList:["haczyk"],bulletData:{speed:500,rotateToTarget:!1,enable:!1}}),Go.Take(n,t,i),DataComponent.AddToEntityWithProperties(n,{bounce:{enabled:!0,angleChangeSpeed:100,angleChangeDir:Phaser.Utils.Array.GetRandom([-1,1]),maxDiff:40,angleChangeSpeedMultiplier:1,curDiff:0,baseAngle:90}}),n}FishingLinka(t,i){var n=this.GameplayImageObject(aa.GameplayLevel,"Linka",t,i,{layerDepth:12});return BagsComponent.At(n).setAlias("linka"),VisualComponent.At(n).getDisplayedAsImage().setAngle(90),VisualComponent.At(n).getDisplayedAsImage().setOrigin(0,.5),VisualComponent.At(n).getDisplayedAsImage().setVisible(!1),n}HaczykVis(t,i){var n=this.GameplayImageObject(aa.GameplayLevel,"Haczyk",t,i,{layerDepth:6});return VisualComponent.At(n).getDisplayedAsImage().setAngle(90),VisualComponent.At(n).getDisplayedAsImage().setOrigin(0,.5),BagsComponent.At(n).setAlias("haczyk_vis"),n}Slow_Simple_Fish(t,i){var n=ha.GameplaySpineObject(aa.GameplayLevel,"Fish04","relaxingSwim",t,i,{layerDepth:7});BagsComponent.AddBagList(n,["TICK_AI_FISH"]),OffscreenDieComponent.AddToEntity(n),DataComponent.AddToEntityWithProperties(n,{state:"swimming",reel_state:"none",reel_speed:150,score:50}),PhysicsComponent.AddToEntityWithBulletBehaviour(n,{groupsList:["fish"],bulletData:{speed:100,rotateToTarget:!1}}),VisualComponent.At(n).getDisplayedAsImage().setAlpha(0),CmdTweenAlphaTo(n,{alpha:1,duration:1500})}Fish_1(t,i){var n=ha.GameplaySpineObject(aa.GameplayLevel,"Fish01","relaxingSwim",t,i,{layerDepth:7});return BagsComponent.AddBagList(n,["TICK_AI_FISH","BOUNCE_ANGLE"]),OffscreenDieComponent.AddToEntity(n),DataComponent.AddToEntityWithProperties(n,{state:"swimming",reel_state:"none",reel_speed:150,score:70}),PhysicsComponent.AddToEntityWithBulletBehaviour(n,{groupsList:["fish"],bulletData:{speed:100*sa.Get().fishSpeedMultiplier,rotateToTarget:!1}}),VisualComponent.At(n).getDisplayedAsImage().setAlpha(0),CmdTweenAlphaTo(n,{alpha:1,duration:1500}),DataComponent.AddToEntityWithProperties(n,{bounce:{enabled:!0,angleChangeSpeed:20,angleChangeDir:Phaser.Utils.Array.GetRandom([-1,1]),maxDiff:30,angleChangeSpeedMultiplier:1,curDiff:0,baseAngle:VisualComponent.At(n).getDisplayedAsImage().angle}}),n}Fish_2(t,i){var n=ha.GameplaySpineObject(aa.GameplayLevel,"Fish03","relaxingSwim",t,i,{layerDepth:7});return BagsComponent.AddBagList(n,["TICK_AI_FISH","BOUNCE_ANGLE"]),OffscreenDieComponent.AddToEntity(n),DataComponent.AddToEntityWithProperties(n,{state:"swimming",reel_state:"none",reel_speed:150,score:100}),PhysicsComponent.AddToEntityWithBulletBehaviour(n,{groupsList:["fish"],bulletData:{speed:120*sa.Get().fishSpeedMultiplier,rotateToTarget:!1}}),VisualComponent.At(n).getDisplayedAsImage().setAlpha(0),CmdTweenAlphaTo(n,{alpha:1,duration:1500}),DataComponent.AddToEntityWithProperties(n,{bounce:{enabled:!0,angleChangeSpeed:5,angleChangeDir:-1,maxDiff:35,angleChangeSpeedMultiplier:1,curDiff:0,baseAngle:VisualComponent.At(n).getDisplayedAsImage().angle}}),n}Fish_3(t,i){var n=ha.GameplaySpineObject(aa.GameplayLevel,"Fish02","relaxingSwim",t,i,{layerDepth:7});return BagsComponent.AddBagList(n,["TICK_AI_FISH","BOUNCE_ANGLE"]),OffscreenDieComponent.AddToEntity(n),DataComponent.AddToEntityWithProperties(n,{state:"swimming",reel_state:"none",reel_speed:150,score:100}),PhysicsComponent.AddToEntityWithBulletBehaviour(n,{groupsList:["fish"],bulletData:{speed:120*sa.Get().fishSpeedMultiplier,rotateToTarget:!1}}),VisualComponent.At(n).getDisplayedAsImage().setAlpha(0),CmdTweenAlphaTo(n,{alpha:1,duration:1500}),DataComponent.AddToEntityWithProperties(n,{bounce:{enabled:!0,angleChangeSpeed:12,angleChangeDir:1,maxDiff:30,angleChangeSpeedMultiplier:1,curDiff:0,baseAngle:VisualComponent.At(n).getDisplayedAsImage().angle}}),n}Fish_4(t,i){var n=ha.GameplaySpineObject(aa.GameplayLevel,"Fish05","relaxingSwim",t,i,{layerDepth:7});return BagsComponent.AddBagList(n,["TICK_AI_FISH","SPOOK_FISH"]),OffscreenDieComponent.AddToEntity(n),DataComponent.AddToEntityWithProperties(n,{state:"swimming",reel_state:"none",reel_speed:150,score:200,spookedByHaczyk:!1}),PhysicsComponent.AddToEntityWithBulletBehaviour(n,{groupsList:["fish"],bulletData:{speed:120*sa.Get().fishSpeedMultiplier,rotateToTarget:!1}}),VisualComponent.At(n).getDisplayedAsImage().setAlpha(0),CmdTweenAlphaTo(n,{alpha:1,duration:1500}),n}Fish_5(t,i){var n=ha.GameplaySpineObject(aa.GameplayLevel,"Fish06","relaxingSwim",t,i,{layerDepth:7});return BagsComponent.AddBagList(n,["TICK_AI_FISH"]),OffscreenDieComponent.AddToEntity(n),DataComponent.AddToEntityWithProperties(n,{state:"swimming",reel_state:"none",reel_speed:150,score:250,isGoingToSlow:!0,hasSlowed:!1,slowAfterX:Phaser.Math.Between(150,220)}),PhysicsComponent.AddToEntityWithBulletBehaviour(n,{groupsList:["fish"],bulletData:{speed:300*sa.Get().fishSpeedMultiplier,rotateToTarget:!1}}),VisualComponent.At(n).getDisplayedAsImage().setAlpha(0),CmdTweenAlphaTo(n,{alpha:1,duration:1500}),VisualComponent.At(n).getDisplayedAsImage().setScale(.7),n}SplashAnimation(t,i){return this.GameplaySpineObjectDieAfterAnim(aa.GameplayLevel,"Splash","Splash",t,i,{layerDepth:9})}};class FishingSequenceData{constructor(t){this.name=t,this.commandsArray=[],this.commandString=""}build(){for(var t=0;t<this.commandsArray.length;t++){var i=this.commandsArray[t];""!=this.commandString&&(this.commandString+="\n"),3==i.length?this.commandString+=i[0]+"="+i[1]+"="+JSON.stringify(i[2]):2==i.length&&(this.commandString+=i[0]+"="+i[1])}}getCommandString(){return this.commandString||this.build(),this.commandString}addCommandWaitUntilEvent(t){var i=[];i.push("#WAIT"),i.push(t),this.commandsArray.push(i)}addCommandWaitUntilContinue(){}addCommandDelayed(t,i,n){var r=[];return r.push(t),r.push(i),r.push(n),this.commandsArray.push(r),this}}var la=function(){return 500+Phaser.Math.Between(-100,100)}.bind(globalThis),ua=function(){return 1400+Phaser.Math.Between(-100,100)}.bind(globalThis),ca=function(){return 2e3+Phaser.Math.Between(-100,100)}.bind(globalThis),da=function(){return 3e3+Phaser.Math.Between(-100,100)}.bind(globalThis);class FishingSpawnSequencesGenerator{static GenerateSequence(){var f_doForSingleTypeExceptRare=function(t){t(Phaser.Utils.Array.GetRandom(["fish_0","fish_1","fish_2","fish_3","fish_4"]))},t=[function(t){f_doForSingleTypeExceptRare((function(i){t.addCommandDelayed(0,"spawn_single",{type:i,y:"bottom"})}))},function(t){f_doForSingleTypeExceptRare((function(i){t.addCommandDelayed(0,"spawn_single",{type:i,y:"bottom"}).addCommandDelayed(ca(),"spawn_single",{type:i,y:"bottom"}).addCommandDelayed(ua(),"spawn_single",{type:i,y:"bottom"}).addCommandDelayed(ca(),"idle",{})}))},function(t){f_doForSingleTypeExceptRare((function(i){t.addCommandDelayed(0,"spawn_single",{type:i,y:"any"}).addCommandDelayed(ca(),"spawn_single",{type:i,y:"any"}).addCommandDelayed(ua(),"spawn_single",{type:i,y:"any"}).addCommandDelayed(la(),"spawn_single",{type:i,y:"any"}).addCommandDelayed(ca(),"idle",{})}))},function(t){f_doForSingleTypeExceptRare((function(i){t.addCommandDelayed(ua(),"spawn_single",{type:i,y:"top"}).addCommandDelayed(ca(),"spawn_single",{type:"any",y:"top"}).addCommandDelayed(ua(),"spawn_single",{type:i,y:"bottom"}).addCommandDelayed(ca(),"idle",{})}))},function(t){f_doForSingleTypeExceptRare((function(i){t.addCommandDelayed(0,"spawn_single",{type:i,y:"top"}).addCommandDelayed(ca(),"spawn_line",{type:i,y:"middle",count:3,spacing_x:Phaser.Math.Between(-170,-190),spacing_y:0}).addCommandDelayed(da(),"spawn_single",{type:"any",y:"bottom"}).addCommandDelayed(la(),"spawn_single",{type:"any",y:"bottom"}).addCommandDelayed(ca(),"idle",{})}))},function(t){f_doForSingleTypeExceptRare((function(i){t.addCommandDelayed(0,"spawn_single",{type:i,y:"top"}).addCommandDelayed(ca(),"spawn_line",{type:i,y:"middle",count:3,spacing_x:Phaser.Math.Between(-170,-190),spacing_y:Phaser.Math.Between(100,130)}).addCommandDelayed(ua(),"spawn_single",{type:"any",y:"bottom"}).addCommandDelayed(ca(),"idle",{})}))}],i=new FishingSequenceData;return t[Phaser.Math.Between(0,t.length-1)](i),i}static AddExtraDelay(t){t.addCommandDelayed(ca(),"idle",{})}static AddLotsOfExtraSpawns(t){t.addCommandDelayed(la(),"spawn_single",{type:"any",y:"any"}),t.addCommandDelayed(la(),"spawn_single",{type:"any",y:"any"}),t.addCommandDelayed(la(),"spawn_single",{type:"any",y:"any"}),t.addCommandDelayed(la(),"spawn_single",{type:"any",y:"any"}),t.addCommandDelayed(la(),"spawn_single",{type:"any",y:"any"}),t.addCommandDelayed(la(),"spawn_single",{type:"any",y:"any"}),t.addCommandDelayed(la(),"spawn_single",{type:"any",y:"any"})}}class CasualGamePremadeOverrides{constructor(){this.cover={delta:{x:0,y:0}},this.coverBtnPlay={delta:{x:0,y:0}},this.scorePanel={layer:"gui_11",x:0,y:0},this.coverLogo={layer:"gui_31"},this.gameplayScoreIcon={x:-145,y:0},this.coverScoreIcon={x:-145,y:3}}}const fa=new class InternalGamePremades extends class CasualGamePremades{constructor(){this.overrides=new CasualGamePremadeOverrides}Always(t,i){console.warn("PLEASE DON'T CALL ALWAYS ON CASUAL PREMADES")}GameplayLevel(t,i){}GameplayLoop(t,i){const n=t.GameplayBtnPause(i.name);Vo.Take(n,-.5,.5),Go.Take(n,0,80),CommandsComponent.At(n).runCommandAtTriggerKey("postmake")}AudioController(t,i){const n=t.BtnAudioToggle(i.name);Vo.Take(n,-.5,.5),Go.Take(n,0,7),CommandsComponent.At(n).runCommandAtTriggerKey("postmake")}GameOver(t,i){const n=t.GameOverRestartIcon(i.name);Vo.Take(n,0,-.5),Go.Take(n,0,-30),CommandsComponent.At(n).runCommandAtTriggerKey("postmake");const r=t.GameOverPlayBtn(i.name);Vo.Take(r,0,.5),Go.Take(r,0,30),CommandsComponent.At(r).runCommandAtTriggerKey("postmake")}Fade(t,i){const n=t.FadeCurtain(i.name);CommandsComponent.At(n).runCommandAtTriggerKey("postmake"),VisualComponent.At(n).getDisplayedAsImage().alpha=0,CmdTweenAlphaTo(n,{alpha:1,duration:450})}Pause(t,i){t.PauseBackground(i.name);const n=t.PauseIcon(i.name);Vo.Take(n,0,-.5),Go.Take(n,0,-40);const r=t.PauseButtonCallUnpause(i.name);Vo.Take(r,0,.5),Go.Take(r,0,40),CommandsComponent.At(r).runCommandAtTriggerKey("postmake")}GameplayGui(t,i){b(this.overrides,D.GetSingleton().getPremadeOverrides());const n=t.ScorePanel(i.name,this.overrides.scorePanel.layer);ta.Take(n,this.overrides.scorePanel.x,this.overrides.scorePanel.y),"gui_11"==this.overrides.scorePanel.layer&&Vo.Take(n,.5,.5),"gui_21"==this.overrides.scorePanel.layer&&Vo.Take(n,0,.5),CommandsComponent.At(n).runCommandAtTriggerKey("postmake");const r=t.GameplayScoreFont(i.name);OperateOnVisual.ReparentLayer(r,this.overrides.scorePanel.layer),PinOthers.AddWithPin(n,r,{x:25,y:2});const o=t.GameplayScoreIcon(i.name);OperateOnVisual.ReparentLayer(o,this.overrides.scorePanel.layer),BagsComponent.At(o).setAlias("AliasGameplayGuiScoreIcon"),PinOthers.AddWithPin(n,o,{x:this.overrides.gameplayScoreIcon.x,y:this.overrides.gameplayScoreIcon.y})}Cover(t,i){b(this.overrides,D.GetSingleton().getPremadeOverrides());const n=t.CoverTitle(i.name);Vo.Take(n,0,-.5),Go.Take(n,this.overrides.cover.delta.x,this.overrides.cover.delta.y),CommandsComponent.At(n).runCommandAtTriggerKey("postmake");const r=t.CoverLogo(i.name,this.overrides.coverLogo.layer);"gui_31"==this.overrides.coverLogo.layer?(Vo.Take(r,-.5,.5),Go.Take(r,-85,8)):(Vo.Take(r,-.5,-.5),Go.Take(r,-10,-10)),CommandsComponent.At(r).runCommandAtTriggerKey("postmake");const o=t.ScorePanel(i.name,this.overrides.scorePanel.layer);ta.Take(o,this.overrides.scorePanel.x,this.overrides.scorePanel.y),BagsComponent.At(o).setAlias("AliasCoverScorePanel"),"gui_11"==this.overrides.scorePanel.layer&&Vo.Take(o,.5,.5),"gui_21"==this.overrides.scorePanel.layer&&Vo.Take(o,0,.5),CommandsComponent.At(o).runCommandAtTriggerKey("postmake");const a=t.CoverScoreFont(i.name);OperateOnVisual.ReparentLayer(a,this.overrides.scorePanel.layer),PinOthers.AddWithPin(o,a,{x:25,y:2});const h=t.CoverHighscoreIcon(i.name);BagsComponent.At(h).setAlias("AliasCoverScoreIcon"),OperateOnVisual.ReparentLayer(h,this.overrides.scorePanel.layer),PinOthers.AddWithPin(o,h,{x:this.overrides.coverScoreIcon.x,y:this.overrides.coverScoreIcon.y});const d=t.CoverPlayBtn(i.name);Vo.Take(d,0,.5),Go.Take(d,this.overrides.coverBtnPlay.delta.x,150+this.overrides.coverBtnPlay.delta.y),CommandsComponent.At(d).runCommandAtTriggerKey("postmake")}}{constructor(){super()}Always(t,i){const n=t.Background(i);VisualComponent.At(n).getDisplayedAsImage().setScale(8,8),ha.DomeczekBackgroundResized(),ha.BackgroundTile(),ha.WodorostTop(-380,570,1,!1),ha.WodorostTop(-530+Phaser.Math.Between(-30,30),570+Phaser.Math.Between(-30,30),Phaser.Math.FloatBetween(.85,1.05),1),ha.WodorostTop(-680+Phaser.Math.Between(-30,30),570+Phaser.Math.Between(-30,30),Phaser.Math.FloatBetween(.85,1.05),Phaser.Math.Between(0,1)),ha.WodorostTop(-830+Phaser.Math.Between(-30,30),570+Phaser.Math.Between(-30,30),Phaser.Math.FloatBetween(.85,1.05),Phaser.Math.Between(0,1)),ha.WodorostTop(-980+Phaser.Math.Between(-30,30),570+Phaser.Math.Between(-30,30),Phaser.Math.FloatBetween(.85,1.05),Phaser.Math.Between(0,1)),ha.WodorostTop(410,570,1,!1),ha.WodorostTop(560+Phaser.Math.Between(-30,30),570+Phaser.Math.Between(-30,30),Phaser.Math.FloatBetween(.85,1.05),Phaser.Math.Between(0,1)),ha.WodorostTop(710+Phaser.Math.Between(-30,30),570+Phaser.Math.Between(-30,30),Phaser.Math.FloatBetween(.85,1.05),Phaser.Math.Between(0,1)),ha.WodorostTop(860+Phaser.Math.Between(-30,30),570+Phaser.Math.Between(-30,30),Phaser.Math.FloatBetween(.85,1.05),Phaser.Math.Between(0,1)),ha.WodorostTop(1010+Phaser.Math.Between(-30,30),570+Phaser.Math.Between(-30,30),Phaser.Math.FloatBetween(.85,1.05),Phaser.Math.Between(0,1)),ha.LiniaWody(0,564),ha.LiniaWody(-640,564),ha.LiniaWody(-1280,564),ha.LiniaWody(640,564),ha.LiniaWody(1280,564)}GameplayLoop(t,i){console.log("loop"),super.GameplayLoop(t,i),ha.Heart(1,335,42),ha.Heart(2,335,42),ha.Heart(3,335,42)}};let pa={version:"1",highscore:0};const ga=na,va=fa;var ma,ya;const xa=new class InternalMainScript{Init(){ma=aa,ya=ha,qo.AddGroup("haczyk"),qo.AddGroup("fish");(()=>{ma.AudioController.onEnter=()=>{if(va.AudioController(ya,ma.AudioController),-1==BMEngine.GetAudioState()){const t=EntityKeeper.GetEntityByAlias("SettingsToggleBtnAudio");ToggleComponent.At(t).setToggleState("inactive")}},ma.Pause.onEnter=()=>{va.Pause(ya,ma.Pause)},ma.Fade.onEnter=()=>{va.Fade(ya,ma.Fade)},ma.Always.onEnter=()=>{va.Always(ya,ma.Always)},ma.GameplayGui.onEnter=()=>{va.GameplayGui(ya,ma.GameplayGui),this.AddToScore(0)},ma.GameplayLoop.onEnter=()=>{va.GameplayLoop(ya,ma.GameplayLoop),this.StateEnterGameplayLoop()},ma.GameplayLoop.onExit=()=>{},ma.GameplayLevel.onEnter=()=>{va.GameplayLevel(ya,ma.GameplayLevel),D.GetSingleton().hasToResetScoreEachLevel()&&(ga.subsession.score=0,ga.subsession.latestScore=0),this.AddToScore(0),this.StateEnterGameplayLevel()},ma.Cover.onEnter=()=>{va.Cover(ya,ma.Cover),ga.ResetSubsession(),null!=pa&&OperateOnVisual.SetTextWithZeroPad(EntityKeeper.GetEntityByAlias("AliasCoverScoreText"),pa.highscore,6)},ma.GameOver.onEnter=()=>{if(va.GameOver(ya,ma.GameOver),this.TrySaveNewHighscore()){const t=ya.GameOverHighscoreIcon(ma.GameOver);Vo.Take(t,.5,.5),Go.Take(t,10,80),CommandsComponent.At(t).runCommandAtTriggerKey("postmake")}}})()}AddToScore(t){ga.subsession.score+=t,ga.subsession.latestScore=ga.subsession.score,D.GetSingleton().onUpdateScore(ga.subsession.latestScore),EntityKeeper.GetEntityByAlias("GameplayScoreText")&&OperateOnVisual.SetTextWithZeroPad(EntityKeeper.GetEntityByAlias("GameplayScoreText"),ga.subsession.score,6)}ShowTutorialHand(t="Tap",i=0,n=300){const r=ya.TutorialHowToPlayHand(ma.GameplayLevel);return VisualComponent.At(r).getSpineAnimationList(!1),VisualComponent.At(r).setAnimation(t,{loop:!0}),TransformComponent.At(r).setPosition(i,n),r}TrySaveNewHighscore(){return pa.highscore<ga.subsession.score&&(pa.highscore=ga.subsession.score,BMEngine.SaveGame(),!0)}TryKillTutorial(){let t=EntityKeeper.GetEntityByAlias("TutorialHowToPlayHand");t&&EndOfLoopRoutine.QueueActorToDisposeBuffer(t)}RequestLevelWon(){ga.session.seenTutorial=!0,ga.currentLevelData.levelLoopEnded||(ga.currentLevelData.levelLoopEnded=!0,this.TrySaveNewHighscore(),EndOfLoopRoutine.QueueDelayedFunction(null,750,(()=>{D.GetSingleton().showAd((()=>{})),ma.CommandRestartLevelLogic.run({levelResult:"won"})})),LogicLoopRoutine.CleanFunction("LOOP_COUNT_GAMEPLAY_TIME"))}RequestLevelLost(){ga.session.seenTutorial=!0,ga.currentLevelData.levelLoopEnded||(ga.currentLevelData.levelLoopEnded=!0,this.TryKillTutorial(),ma.CommandRequestGameOver.run(),D.GetSingleton().showAd((()=>{})),LogicLoopRoutine.CleanFunction("LOOP_COUNT_GAMEPLAY_TIME"))}StateEnterGameplayLevel(){ga.ResetLevelData(),ma.EnterGameplayLevel()}StateEnterGameplayLoop(){ga.currentLevelData.levelLoopStarted=!0,0==ga.session.seenTutorial&&(this.ShowTutorialHand("Tap",0,900),ga.session.seenTutorial=!0),LogicLoopRoutine.SetUpdateFunc("LOOP_COUNT_GAMEPLAY_TIME",(t=>{if(0==ga.currentLevelData.levelLoopStarted)return;if(1==ga.currentLevelData.levelLoopEnded)return;const i=function DeltaScaled(t){return t/1e3}(t);ga.currentLevelData.activeLevelTime+=i})),ma.EnterGameplayLoop()}};function _onCollideHaczykWithFish(t,i){const n=na.currentLevelData;t.selfEntity;const r=i.selfEntity;if(n.referenceCaughtFish)return;const o=DataComponent.At(r);if("swimming"==o.state){n.referenceCaughtFish=r,o.state="caught",o.reel_state="fight";let t=EntityKeeper.GetEntityByAlias("haczyk");PhysicsComponent.At(t).bullet.setEnable(!1),PhysicsComponent.At(t).bullet.speed=250,BMEngine.PlayAudioFile("lup"),na.session.sawTutorialOnFirstCatch||(na.session.sawTutorialOnFirstCatch=!0,function _setTutorialVisibleOnFirstCatch(){const t=EntityKeeper.GetEntityByAlias("TutorialHowToPlayHand");if(!t)return;VisualComponent.At(t).getDisplayedAsImage().alpha=1,VisualComponent.At(t).setAnimation("Hold",{loop:!0})}())}}function ResetBounce(t){const i=DataComponent.At(t).bounce,n=VisualComponent.At(t);if(1==i.angleChangeDir){const t=n.refDisplayed.angle,r=i.baseAngle-i.maxDiff;i.curDiff=t-r}else{const t=n.refDisplayed.angle,r=i.baseAngle+i.maxDiff;i.curDiff=r-t}}function fishingPreThread(t){const i=EntityKeeper.GetBagActorsReferenceList("BOUNCE_ANGLE");for(let h=0;h<i.length;h++){const r=i[h];if(0==r.isDestroyed){const i=DataComponent.At(r).bounce,o=VisualComponent.At(r);if(o.isDisplayedOnScreen()&&i&&i.enabled){var n=i.angleChangeSpeed*i.angleChangeSpeedMultiplier*(t/1e3);o.refDisplayed.angle+=n*i.angleChangeDir,i.curDiff+=n,i.curDiff>=2*i.maxDiff&&(i.curDiff=0,i.angleChangeDir*=-1,ResetBounce(r))}}}const r=na.currentLevelData,o=EntityKeeper.GetEntityByAlias("haczyk"),a=EntityKeeper.GetEntityByAlias("haczyk_vis");r.isHaczykRetreating&&a&&o?VisualComponent.At(a).getDisplayedAsImage().setAngle(VisualComponent.At(o).getDisplayedAsImage().angle-180):a&&o&&VisualComponent.At(a).getDisplayedAsImage().setAngle(VisualComponent.At(o).getDisplayedAsImage().angle)}function fishingMainThread(t){const i=na.currentLevelData;qo.OverlapGroupsByNames("haczyk","fish",_onCollideHaczykWithFish,null,this);const n=EntityKeeper.GetEntityByAlias("linka"),r=EntityKeeper.GetEntityByAlias("haczyk");var o=!1,a=!1,h=InputRoutine.GetPointerIfNotPressingButton();0==i.levelLoopStarted&&1==na.session.seenTutorial&&(i.levelLoopStarted=!0);const d=EntityKeeper.GetEntityByAlias("TutorialHowToPlayHand");if(0==na.session.tutState)return void(h&&h.isDown&&(VisualComponent.At(d).getDisplayedAsImage().alpha=0,i.levelLoopStarted=!0,na.session.tutState=1));if(!i.fishSpawner.isRunning&&0==i.playerDead){var f=FishingSpawnSequencesGenerator.GenerateSequence();i.sinceSlowed+=10,Phaser.Math.Between(0,100)<i.sinceSlowed&&(i.sinceSlowed=0,FishingSpawnSequencesGenerator.AddExtraDelay(f)),i.sinceGigaspawn+=3,Phaser.Math.Between(0,100)<i.sinceGigaspawn&&(i.sinceGigaspawn=0,FishingSpawnSequencesGenerator.AddLotsOfExtraSpawns(f)),i.playedFor>=10&&(sa.Get().fishSpeedMultiplier=1.2),i.playedFor>=20&&(sa.Get().fishSpeedMultiplier=1.4),i.playedFor>=30&&(sa.Get().fishSpeedMultiplier=1.6),i.playedFor>=40&&(sa.Get().fishSpeedMultiplier=2),i.fishSpawner.load(f.getCommandString(),i.scriptTarget,{timeUnit:"ms"}),i.fishSpawner.start()}if(h&&!h.isDown&&(i.wasPointerUpToAllowRetreat=!0),i.waitingForUntap&&h&&!h.isDown&&(i.waitingForUntap=!1),h&&h.isDown&&!i.waitingForUntap&&0==i.playerDead){const t=EntityKeeper.GetEntityByAlias("fisherman");if(i.shotHaczyk)h&&h.isDown&&i.shotHaczyk&&(i.isHaczykRetreating||i.referenceCaughtFish||!i.wasPointerUpToAllowRetreat||(VisualComponent.At(t).setAnimation("haczykUp"),o=!0));else{VisualComponent.At(t).setAnimation("haczykDown"),VisualComponent.At(n).getDisplayedAsImage().setVisible(!0);var p=EntityKeeper.GetBagActorsReferenceList("SPOOK_FISH");for(let t=0;t<p.length;t++){const i=p[t];DataComponent.At(i).spookedByHaczyk||(DataComponent.At(i).spookedByHaczyk=!0,PhysicsComponent.At(i).bullet.setSpeed(PhysicsComponent.At(i).bullet.speed*(Phaser.Math.Between(17,25)/10)))}i.wasPointerUpToAllowRetreat=!1,i.shotHaczyk=!0,PhysicsComponent.At(r).bullet.setEnable(!0),PhysicsComponent.At(r).bullet.setSpeed(500),DataComponent.At(r).bounce.enabled=!1,i.tryToSplash=!0,i.splashAtY=VisualComponent.At(r).refDisplayed.y+105}}if(i.tryToSplash&&!i.didSplash&&TransformComponent.At(r).refTarget.y>=i.splashAtY&&(i.didSplash=!0,ha.SplashAnimation(TransformComponent.At(r).refTarget.x,i.splashAtY),BMEngine.PlayAudioFile("splash")),i.shotHaczyk&&(VisualComponent.At(r).isDisplayedOnScreen()||i.isHaczykRetreating||(o=!0),(TransformComponent.At(r).refTarget.x<-320||TransformComponent.At(r).refTarget.x>320)&&(i.isHaczykRetreating||(o=!0)),i.referenceCaughtFish&&!i.isHaczykRetreating&&(o=!0)),o&&(i.isHaczykRetreating=!0,VisualComponent.At(r).getDisplayedAsImage().setAngle(TransformComponent.At(r).refTarget.angle-180)),i.referenceCaughtFish)if(i.referenceCaughtFish.isDestroyed||0==VisualComponent.At(i.referenceCaughtFish).isDisplayedOnScreen(!0))i.referenceCaughtFish=null,a=!0;else{const n=InputRoutine.GetPointerIfNotPressingButton();n&&n.isDown?i.keepReelingFishFor=1e3:i.keepReelingFishFor=0,i.keepReelingFishFor>=0&&(i.keepReelingFishFor-=t);const o=TransformComponent.At(r);if(i.keepReelingFishFor<=0){o.refTarget.x=TransformComponent.At(i.referenceCaughtFish).refTarget.x,o.refTarget.y=TransformComponent.At(i.referenceCaughtFish).refTarget.y-i.offsetCaughtFishY,PhysicsComponent.At(r).bullet.setEnable(!1),PhysicsComponent.At(r).bullet.speed=250,DataComponent.At(i.referenceCaughtFish).reel_state="fight";const t=EntityKeeper.GetEntityByAlias("fisherman");VisualComponent.At(t).setAnimation("haczykDown")}else{PhysicsComponent.At(r).bullet.setEnable(!0),PhysicsComponent.At(r).bullet.speed=250,DataComponent.At(i.referenceCaughtFish).reel_state="reel";const t=EntityKeeper.GetEntityByAlias("fisherman");VisualComponent.At(t).setAnimation("haczykUp"),TransformComponent.At(i.referenceCaughtFish).refTarget.x=o.refTarget.x,TransformComponent.At(i.referenceCaughtFish).refTarget.y=o.refTarget.y+i.offsetCaughtFishY}}const T=EntityKeeper.GetBagActorsReferenceList("TICK_AI_FISH");for(let P=0;P<T.length;P++){const t=T[P],i=DataComponent.At(t),n=VisualComponent.At(t);if(i.bounce&&i.bounce.enabled)if(n.refDisplayed.y<=680)if(-1==i.bounce.angleChangeDir&&(i.bounce.angleChangeDir=1),n.refDisplayed.angle<=0){const t=1+Math.abs(n.refDisplayed.angle)/5;i.bounce.angleChangeSpeedMultiplier=t}else i.bounce.angleChangeSpeedMultiplier=1;else i.bounce.angleChangeSpeedMultiplier=1;"caught"==i.state?(i.bounce&&(i.bounce.enabled=!1),"relaxingSwim"==VisualComponent.At(t).getAnimationName()&&VisualComponent.At(t).setAnimation("speedSwim",{loop:!0}),PhysicsComponent.At(t).bullet.setSpeed(i.reel_speed),VisualComponent.At(t).getDisplayedAsImage().setAngle(0),"fight"==i.reel_state?PhysicsComponent.At(t).bullet.setEnable(!0):"reel"==i.reel_state&&PhysicsComponent.At(t).bullet.setEnable(!1)):i.isGoingToSlow&&n.refDisplayed.x>i.slowAfterX&&!i.hasSlowed&&(i.hasSlowed=!0,PhysicsComponent.At(t).bullet.setSpeed(PhysicsComponent.At(t).bullet.speed*(Phaser.Math.Between(35,50)/100)))}if(i.shotHaczyk&&((Phaser.Math.Distance.Between(TransformComponent.At(r).refTarget.x,TransformComponent.At(r).refTarget.y,i.haczykStartX,i.haczykStartY)<=40||i.referenceCaughtFish&&TransformComponent.At(r).refTarget.y<i.haczykStartY+i.offsetWhereFishIsCaught)&&i.isHaczykRetreating||a)){const t=EntityKeeper.GetEntityByAlias("fisherman");VisualComponent.At(t).setAnimation("idle"),a?BMEngine.PlayAudioFile("swift"):i.referenceCaughtFish&&i.isHaczykRetreating&&(ha.SplashAnimation(TransformComponent.At(r).refTarget.x,i.splashAtY),BMEngine.PlayAudioFile("splash")),i.isHaczykRetreating=!1,i.shotHaczyk=!1,PhysicsComponent.At(r).bullet.setEnable(!1),TransformComponent.At(r).refTarget.x=i.haczykStartX,TransformComponent.At(r).refTarget.y=i.haczykStartY,VisualComponent.At(r).getDisplayedAsImage().setAngle(TransformComponent.At(r).refTarget.angle-180),ResetBounce(r),DataComponent.At(r).bounce.enabled=!0,i.keepReelingFishFor=0,i.didSplash=!1,i.tryToSplash=!1,VisualComponent.At(n).getDisplayedAsImage().setVisible(!1),i.referenceCaughtFish?(xa.TryKillTutorial(),xa.AddToScore(DataComponent.At(i.referenceCaughtFish).score),DataComponent.At(i.referenceCaughtFish).state="dispose",Fr.Take(i.referenceCaughtFish),i.referenceCaughtFish=null,i.waitingForUntap=!0):i.firstReturn||function _reduceLives(){const t=na.currentLevelData;if(t.lives>0){let i=EntityKeeper.GetEntityByAlias("heart_"+t.lives);VisualComponent.At(i).setAnimation("broken_heart",{loop:!1})}if(t.lives-=1,t.lives<=0){if(1==t.playerDead)return;const i=EntityKeeper.GetEntityByAlias("haczyk");DataComponent.At(i).bounce=null,t.fishSpawner.shutdown(),t.playerDead=!0,xa.RequestLevelLost()}}(),i.firstReturn=!1}const b=Phaser.Math.Distance.Between(TransformComponent.At(n).refTarget.x,TransformComponent.At(n).refTarget.y,TransformComponent.At(r).refTarget.x,TransformComponent.At(r).refTarget.y);VisualComponent.At(n).getDisplayedAsImage().setDisplaySize(b,4);const S=MathUtil.GetAngleBetweenInDegrees(TransformComponent.At(n).refTarget.x,TransformComponent.At(n).refTarget.y,TransformComponent.At(r).refTarget.x,TransformComponent.At(r).refTarget.y);i.isHaczykRetreating&&VisualComponent.At(r).getDisplayedAsImage().setAngle(S-180),VisualComponent.At(n).getDisplayedAsImage().setAngle(S);const A=EntityKeeper.GetEntityByAlias("haczyk_vis");ta.Take(A,TransformComponent.At(r).refTarget.x,TransformComponent.At(r).refTarget.y),i.isHaczykRetreating?VisualComponent.At(A).getDisplayedAsImage().setAngle(VisualComponent.At(r).getDisplayedAsImage().angle-180):VisualComponent.At(A).getDisplayedAsImage().setAngle(VisualComponent.At(r).getDisplayedAsImage().angle)}const Ta=new class InternalModel{constructor(){this.fishingPreThread=fishingPreThread,this.fishingMainThread=fishingMainThread}};class ScriptLoopRoutine{Init(){}OnRegister(){}static Register(t,i=[],n){RoutinesManager.RegisterRoutine(new ScriptLoopRoutine(t,i,n))}constructor(t,i=[],n){null==n&&(n=GetGUID()),this.name=n,this.func=t,this.guards=i}GetName(){return this.name}Update(t){for(let i=0;i<this.guards.length;i++){if((0,this.guards[i])())return}this.func(t)}}const wa=function FishermanGameCentralRegistry(){const t=na,i=new Engine;GeoticManager.SetEngine(i);const n=i.createWorld();GeoticManager.SetWorld(n),DoCommonGameRegisters(i),function DoCasualGameRegisters(t){I.register("TweenCoverTitle",new GameCommand((t=>{const i=t.entity;CmdTweenVisualByDeltaFrom(i,{y:-800,duration:1e3,onComplete:()=>{CmdTweenVisualByDeltaTo(i,{y:-25,duration:1800,yoyo:!0,repeat:-1,ease:"Quadratic.In"})}})}))),I.register("TweenPositionFromTop",new GameCommand((t=>{CmdTweenVisualByDeltaFrom(t.entity,b({y:-700,duration:700},t))}))),I.register("TweenPositionToTop",new GameCommand((t=>{CmdTweenVisualByDeltaTo(t.entity,b({y:-700,duration:450},t))}))),I.register("TweenPositionFromBottom",new GameCommand((t=>{CmdTweenVisualByDeltaFrom(t.entity,b({y:700,duration:450},t))}))),I.register("TweenPositionToBottom",new GameCommand((t=>{CmdTweenVisualByDeltaTo(t.entity,b({y:700,duration:700},t))}))),I.register("TweenPositionFromRight",new GameCommand((t=>{CmdTweenVisualByDeltaFrom(t.entity,b({x:700,duration:450},t))}))),I.register("TweenPositionToRight",new GameCommand((t=>{CmdTweenVisualByDeltaTo(t.entity,b({x:700,duration:700},t))}))),I.register("TweenAlphaTo",new GameCommand((t=>{CmdTweenAlphaTo(t.entity,b({alpha:1,duration:500},t))})))}(),i.registerComponent(OffscreenDieComponent,OffscreenDieComponent.GetName()),ReactiveOffscreenDieAndVisualQuery.RegisterQuery();const fBlockIfGameInitializedFalse=()=>0==t.session.initialized,fBlockIfLevelFalse=()=>0==t.currentLevelData.levelLoopStarted;InputRoutine.Register(),LogicLoopRoutine.Register(),ScriptLoopRoutine.Register(Ta.fishingPreThread,[fBlockIfGameInitializedFalse,fBlockIfLevelFalse]),ScriptLoopRoutine.Register(Ta.fishingMainThread,[fBlockIfGameInitializedFalse,()=>1==t.currentLevelData.levelLoopEnded,fBlockIfLevelFalse]),SynchPinsRoutine.Register(),OffscreenDieRoutine.Register(),EndOfLoopRoutine.Register()},ba=function FishermanGameStartNormal(){pa=BMEngine.GetSaveSlotReference(pa),xa.Init(),ga.session.initialized=!0,EndOfLoopRoutine.QueueDelayedFunction(null,0,(()=>aa.CommandRequestCover.run())),BMEngine.PlayAudioFile("GameMusic",null,{loop:!0,volume:1})};class EventTargetPolyfill{constructor(){this.listeners={}}addEventListener(t,i){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(i)}removeEventListener(t,i){if(!(t in this.listeners))return;const n=this.listeners[t];for(let r=0,o=n.length;r<o;r++)if(n[r]===i)return void n.splice(r,1)}dispatchEvent(t){if(!(t.type in this.listeners))return!0;const i=this.listeners[t.type].slice();for(let n=0,r=i.length;n<r;n++)i[n].call(this,t);return!t.defaultPrevented}}"function"!=typeof Object.assign&&(console.log("PolyfillPatch: Object.Assign"),Object.defineProperty(Object,"assign",{value:function assign(t,i){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),r=1;r<arguments.length;r++){var o=arguments[r];if(null!=o)for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])}return n},writable:!0,configurable:!0})),window.EventTarget||(console.log("PolyfillPatch: EventTarget"),window.EventTarget=EventTargetPolyfill),Object.entries||console.log("PolyfillPatch: Object.Entries"),Object.entries=function(t){for(var i=Object.keys(t),n=i.length,r=new Array(n);n--;)r[n]=[i[n],t[i[n]]];return r},Object.values||(console.log("PolyfillPatch: Object.Values"),Object.values=function(t){return Object.keys(t).map((function(i){return t[i]}))}),function(){var t=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^\(\s\/]*)\s*/;function _name(){var i,n;return this===Function||this===Function.prototype.constructor?n="Function":this!==Function.prototype&&(n=(i=(""+this).match(t))&&i[1]),n||""}var i=!("name"in Function.prototype&&"name"in function x(){}),n="function"==typeof Object.defineProperty&&function(){var t;try{Object.defineProperty(Function.prototype,"_xyz",{get:function(){return"blah"},configurable:!0}),t="blah"===Function.prototype._xyz,delete Function.prototype._xyz}catch(i){t=!1}return t}(),r="function"==typeof Object.prototype.__defineGetter__&&function(){var t;try{Function.prototype.__defineGetter__("_abc",(function(){return"foo"})),t="foo"===Function.prototype._abc,delete Function.prototype._abc}catch(i){t=!1}return t}();Function.prototype._name=_name,i&&(console.log("PolyfixPatch: Function.name"),n?Object.defineProperty(Function.prototype,"name",{get:function(){var t=_name.call(this);return this!==Function.prototype&&Object.defineProperty(this,"name",{value:t,configurable:!0}),t},configurable:!0}):r&&Function.prototype.__defineGetter__("name",(function(){var t=_name.call(this);return this!==Function.prototype&&this.__defineGetter__("name",(function(){return t})),t})))}();D.SetSingleton(new class BlackmoonReleaseBranding extends D{getFlags(){return{disableSaveUserPrefs:0,disableSaveGameData:0,disableFakeMusicPreload:0,cordovaListenersEnabled:0,disableAutoPause:0,allowPauseAlways:0}}}),function InitFishermanGame(t={},i={}){const n=new EngineInitVO;n.data.flagOverrides=t,n.data.gameName="Fisherman",n.data.gameSubEngineConfig=b({dom:{createContainer:!0},title:"Fisherman",type:Phaser.AUTO,parent:"game",backgroundColor:"#00A1B7",scale:{width:640,height:1050,min:{width:135,height:240},max:{width:4320,height:7680},mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{debug:false}}},i),n.data.requiredScreenOrientation="portrait",GetOs().desktop&&(n.data.requiredScreenOrientation="any"),n.data.preloaderInitialsAssetsNames={manifestJson:"FishermanManifest",logo:"PreloaderLogo",font:"PreloaderFontObelix_63"},n.data.initialAssetPackData=AssetPackLoader.GetRequestAsJsonFromArray([{path:"json",type:"json",files:["FishermanManifest"]},{path:"preloader",type:"png",files:["PreloaderLogo","EmptyPNG"]},{path:"preloader",type:"font",files:["PreloaderFontObelix_63"]}]),n.data.funcDoGameRegisters=wa,n.data.funcStartGame=ba,UsePhaserSubEngine(n)}(D.GetSingleton().getFlags(),{});
