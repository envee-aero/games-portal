!function(){var t=["id"];function set(t,r,o,a){return set="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function set(t,r,o,a){var h,d=_superPropBase(t,r);if(d){if((h=Object.getOwnPropertyDescriptor(d,r)).set)return h.set.call(a,o),!0;if(!h.writable)return!1}if(h=Object.getOwnPropertyDescriptor(a,r)){if(!h.writable)return!1;h.value=o,Object.defineProperty(a,r,h)}else _defineProperty(a,r,o);return!0},set(t,r,o,a)}function _set(t,r,o,a,h){if(!set(t,r,o,a||t)&&h)throw new Error("failed to set property");return o}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,r,o){var a=_superPropBase(t,r);if(a){var h=Object.getOwnPropertyDescriptor(a,r);return h.get?h.get.call(arguments.length<3?t:o):h.value}},_get.apply(this,arguments)}function _superPropBase(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=_getPrototypeOf(t)););return t}function _slicedToArray2(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==o)return;var a,h,d=[],T=!0,S=!1;try{for(o=o.call(t);!(T=(a=o.next()).done)&&(d.push(a.value),!r||d.length!==r);T=!0);}catch(A){S=!0,h=A}finally{try{T||null==o.return||o.return()}finally{if(S)throw h}}return d}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _objectWithoutProperties(t,r){if(null==t)return{};var o,a,h=function _objectWithoutPropertiesLoose(t,r){if(null==t)return{};var o,a,h={},d=Object.keys(t);for(a=0;a<d.length;a++)o=d[a],r.indexOf(o)>=0||(h[o]=t[o]);return h}(t,r);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(t);for(a=0;a<d.length;a++)o=d[a],r.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(t,o)&&(h[o]=t[o])}return h}function _toConsumableArray2(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,a=_getPrototypeOf(t);if(r){var h=_getPrototypeOf(this).constructor;o=Reflect.construct(a,arguments,h)}else o=a.apply(this,arguments);return _possibleConstructorReturn(this,o)}}function _possibleConstructorReturn(t,r){if(r&&("object"===_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function ownKeys(t,r){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),o.push.apply(o,a)}return o}function _defineProperty(t,r,o){return r in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var o=0;o<r.length;o++){var a=r[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,r,o){return r&&_defineProperties(t.prototype,r),o&&_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}function _createForOfIteratorHelper(t,r){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){o&&(t=o);var a=0,h=function F(){};return{s:h,n:function n(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function e(t){throw t},f:h}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var d,T=!0,S=!1;return{s:function s(){o=o.call(t)},n:function n(){var t=o.next();return T=t.done,t},e:function e(t){S=!0,d=t},f:function f(){try{T||null==o.return||o.return()}finally{if(S)throw d}}}}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,a=new Array(r);o<r;o++)a[o]=t[o];return a}System.register([],(function(){"use strict";return{execute:function execute(){var r,o=function IsArray(t){return"[object Array]"===Object.prototype.toString.call(t)},a=function(){function AssetPackLoader(){_classCallCheck(this,AssetPackLoader),this._files={jsons:[],png:[]},this.request=null,this.loadFuncDict=null}return _createClass(AssetPackLoader,[{key:"fillRequestDataFrom",value:function fillRequestDataFrom(t){console.assert(t,"data is: ",t),o(t)||console.error("TODO: implement for object that isnt array"),this.request=t}},{key:"supplyLoadFunctionDictionary",value:function supplyLoadFunctionDictionary(t,r){this.loadFuncDict=function getAssetPackLoaderForScene(t,r){return{begin:function begin(){t.load.on("loaderror",(function(t){console.warn("error loading: ",t)}),t),t.load.once("complete",(function(){var o=r;t.load.removeAllListeners(),t.load.reset(),o()}))},audio:function audio(r,o){t.load.audio(r,[o+"/"+r+".mp3",o+"/"+r+".ogg"])},font:function font(r,o){t.load.bitmapFont(r,o+"/"+r+".png",o+"/"+r+".xml")},text:function text(r,o){t.load.text(r,o+"/"+r+".txt")},json:function json(r,o){t.load.json(r,o+"/"+r+".json")},png:function png(r,o){t.load.image(r,o+"/"+r+".png")},spine:function spine(r,o){t.load.spine(r,o+"/"+r+".json",o+"/"+r+".atlas")},multiatlas:function multiatlas(r,o){t.load.multiatlas("megaset","megaset/megaset.json")}}}(t,r)}},{key:"load",value:function load(){for(var t in console.assert(null!=this.loadFuncDict,"load func dict: ",this.loadFuncDict),console.assert(this.request,"request: ",this.request),this.loadFuncDict.begin(),this.request){var r=this.request[t],o=r.path,a=r.type,h=r.files;if(r.mode){var d=r.mode;if("sequential"==d.def)for(var T=d.from;T<=d.to;T++)h.push(d.base+T)}for(var S in h){var A=h[S];null==this.loadFuncDict[a]&&console.error("loader dict didnt implement: ",a),this.loadFuncDict[a](A,o)}}}},{key:"getRequestAsJson",value:function getRequestAsJson(){return JSON.parse(JSON.stringify(this.request))}},{key:"addRequestArray",value:function addRequestArray(t){this.request&&console.error("TODO: implement request merge"),this.request=t}}],[{key:"GetRequestAsJsonFromArray",value:function GetRequestAsJsonFromArray(t){var r=new AssetPackLoader;return r.addRequestArray(t),r.getRequestAsJson()}}]),AssetPackLoader}();"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var h,d={exports:{}};h=d,function webpackUniversalModuleDefinition(t,r){h.exports=r()}(0,(function(){return function(t){var r={};function __webpack_require__(o){if(r[o])return r[o].exports;var a=r[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,__webpack_require__),a.l=!0,a.exports}return __webpack_require__.m=t,__webpack_require__.c=r,__webpack_require__.d=function(t,r,o){__webpack_require__.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:o})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(t,r){if(1&r&&(t=__webpack_require__(t)),8&r)return t;if(4&r&&"object"===_typeof(t)&&t&&t.__esModule)return t;var o=Object.create(null);if(__webpack_require__.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var a in t)__webpack_require__.d(o,a,function(r){return t[r]}.bind(null,a));return o},__webpack_require__.n=function(t){var r=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(r,"a",r),r},__webpack_require__.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=1528)}([function(t,r){function getProperty(t,r,o){var a=o?t[r]:Object.getOwnPropertyDescriptor(t,r);return!o&&a.value&&"object"===_typeof(a.value)&&(a=a.value),!(!a||!function hasGetterOrSetter(t){return!!t.get&&"function"==typeof t.get||!!t.set&&"function"==typeof t.set}(a))&&(void 0===a.enumerable&&(a.enumerable=!0),void 0===a.configurable&&(a.configurable=!0),a)}function hasNonConfigurable(t,r){var o=Object.getOwnPropertyDescriptor(t,r);return!!o&&(o.value&&"object"===_typeof(o.value)&&(o=o.value),!1===o.configurable)}function extend(t,r,o,a){for(var h in r)if(r.hasOwnProperty(h)){var d=getProperty(r,h,o);if(!1!==d){if(hasNonConfigurable((a||t).prototype,h)){if(Class.ignoreFinals)continue;throw new Error("cannot override final property '"+h+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,h,d)}else t.prototype[h]=r[h]}}function mixin(t,r){if(r){Array.isArray(r)||(r=[r]);for(var o=0;o<r.length;o++)extend(t,r[o].prototype||r[o])}}function Class(t){var r,o;if(t||(t={}),t.initialize){if("function"!=typeof t.initialize)throw new Error("initialize must be a function");r=t.initialize,delete t.initialize}else if(t.Extends){var a=t.Extends;r=function initialize(){a.apply(this,arguments)}}else r=function initialize(){};t.Extends?(r.prototype=Object.create(t.Extends.prototype),r.prototype.constructor=r,o=t.Extends,delete t.Extends):r.prototype.constructor=r;var h=null;return t.Mixins&&(h=t.Mixins,delete t.Mixins),mixin(r,h),extend(r,t,!0,o),r}Class.extend=extend,Class.mixin=mixin,Class.ignoreFinals=!1,t.exports=Class},function(t,r){t.exports=function NOOP(){}},function(t,r){t.exports=function GetFastValue(t,r,o){var a=_typeof(t);return t&&"number"!==a&&"string"!==a&&t.hasOwnProperty(r)&&void 0!==t[r]?t[r]:o}},function(t,r,o){var a=o(0),h=o(124),d=new a({initialize:function Vector2(t,r){this.x=0,this.y=0,"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0):(void 0===r&&(r=t),this.x=t||0,this.y=r||0)},clone:function clone(){return new d(this.x,this.y)},copy:function copy(t){return this.x=t.x||0,this.y=t.y||0,this},setFromObject:function setFromObject(t){return this.x=t.x||0,this.y=t.y||0,this},set:function set(t,r){return void 0===r&&(r=t),this.x=t,this.y=r,this},setTo:function setTo(t,r){return this.set(t,r)},setToPolar:function setToPolar(t,r){return null==r&&(r=1),this.x=Math.cos(t)*r,this.y=Math.sin(t)*r,this},equals:function equals(t){return this.x===t.x&&this.y===t.y},fuzzyEquals:function fuzzyEquals(t,r){return h(this.x,t.x,r)&&h(this.y,t.y,r)},angle:function angle(){var angle=Math.atan2(this.y,this.x);return angle<0&&(angle+=2*Math.PI),angle},setAngle:function setAngle(t){return this.setToPolar(t,this.length())},add:function add(t){return this.x+=t.x,this.y+=t.y,this},subtract:function subtract(t){return this.x-=t.x,this.y-=t.y,this},multiply:function multiply(t){return this.x*=t.x,this.y*=t.y,this},scale:function scale(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function divide(t){return this.x/=t.x,this.y/=t.y,this},negate:function negate(){return this.x=-this.x,this.y=-this.y,this},distance:function distance(t){var r=t.x-this.x,o=t.y-this.y;return Math.sqrt(r*r+o*o)},distanceSq:function distanceSq(t){var r=t.x-this.x,o=t.y-this.y;return r*r+o*o},length:function length(){var t=this.x,r=this.y;return Math.sqrt(t*t+r*r)},setLength:function setLength(t){return this.normalize().scale(t)},lengthSq:function lengthSq(){var t=this.x,r=this.y;return t*t+r*r},normalize:function normalize(){var t=this.x,r=this.y,o=t*t+r*r;return o>0&&(o=1/Math.sqrt(o),this.x=t*o,this.y=r*o),this},normalizeRightHand:function normalizeRightHand(){var t=this.x;return this.x=-1*this.y,this.y=t,this},normalizeLeftHand:function normalizeLeftHand(){var t=this.x;return this.x=this.y,this.y=-1*t,this},dot:function dot(t){return this.x*t.x+this.y*t.y},cross:function cross(t){return this.x*t.y-this.y*t.x},lerp:function lerp(t,r){void 0===r&&(r=0);var o=this.x,a=this.y;return this.x=o+r*(t.x-o),this.y=a+r*(t.y-a),this},transformMat3:function transformMat3(t){var r=this.x,o=this.y,a=t.val;return this.x=a[0]*r+a[3]*o+a[6],this.y=a[1]*r+a[4]*o+a[7],this},transformMat4:function transformMat4(t){var r=this.x,o=this.y,a=t.val;return this.x=a[0]*r+a[4]*o+a[12],this.y=a[1]*r+a[5]*o+a[13],this},reset:function reset(){return this.x=0,this.y=0,this},limit:function limit(t){var r=this.length();return r&&r>t&&this.scale(t/r),this},reflect:function reflect(t){return t=t.clone().normalize(),this.subtract(t.scale(2*this.dot(t)))},mirror:function mirror(t){return this.reflect(t).negate()},rotate:function rotate(t){var r=Math.cos(t),o=Math.sin(t);return this.set(r*this.x-o*this.y,o*this.x+r*this.y)}});d.ZERO=new d,d.RIGHT=new d(1,0),d.LEFT=new d(-1,0),d.UP=new d(0,-1),d.DOWN=new d(0,1),d.ONE=new d(1,1),t.exports=d},function(t,r,o){var a=o(0),h=o(56),d=new a({initialize:function Point(t,r){void 0===t&&(t=0),void 0===r&&(r=t),this.type=h.POINT,this.x=t,this.y=r},setTo:function setTo(t,r){return void 0===t&&(t=0),void 0===r&&(r=t),this.x=t,this.y=r,this}});t.exports=d},function(t,r,o){var a=o(0),h=o(24),d=o(20),T=new a({initialize:function GameObjectFactory(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(d.BOOT,this.boot,this),this.events.on(d.START,this.start,this)},boot:function boot(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(d.DESTROY,this.destroy,this)},start:function start(){this.events.once(d.SHUTDOWN,this.shutdown,this)},existing:function existing(t){return(t.renderCanvas||t.renderWebGL)&&this.displayList.add(t),t.preUpdate&&this.updateList.add(t),t},shutdown:function shutdown(){this.events.off(d.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown(),this.events.off(d.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});T.register=function(t,r){T.prototype.hasOwnProperty(t)||(T.prototype[t]=r)},T.remove=function(t){T.prototype.hasOwnProperty(t)&&delete T.prototype[t]},h.register("GameObjectFactory",T,"add"),t.exports=T},function(t,r){t.exports=function GetValue(t,r,o){if(t&&"number"!=typeof t){if(t.hasOwnProperty(r))return t[r];if(-1!==r.indexOf(".")){for(var a=r.split("."),h=t,d=o,T=0;T<a.length;T++){if(!h.hasOwnProperty(a[T])){d=o;break}d=h[a[T]],h=h[a[T]]}return d}return o}return o}},function(t,r){t.exports=function IsPlainObject(t){if("object"!==_typeof(t)||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}return!0}},function(t,r){var o={},a={install:function install(t){for(var r in o)t[r]=o[r]},register:function register(t,r){o[t]=r},destroy:function destroy(){o={}}};t.exports=a},function(t,r,o){var a=Object.prototype.hasOwnProperty,h="~";function Events(){}function EE(t,r,o){this.fn=t,this.context=r,this.once=o||!1}function addListener(t,r,o,a,d){if("function"!=typeof o)throw new TypeError("The listener must be a function");var T=new EE(o,a||t,d),S=h?h+r:r;return t._events[S]?t._events[S].fn?t._events[S]=[t._events[S],T]:t._events[S].push(T):(t._events[S]=T,t._eventsCount++),t}function clearEvent(t,r){0==--t._eventsCount?t._events=new Events:delete t._events[r]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(h=!1)),EventEmitter.prototype.eventNames=function eventNames(){var t,r,o=[];if(0===this._eventsCount)return o;for(r in t=this._events)a.call(t,r)&&o.push(h?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},EventEmitter.prototype.listeners=function listeners(t){var r=h?h+t:t,o=this._events[r];if(!o)return[];if(o.fn)return[o.fn];for(var a=0,d=o.length,T=new Array(d);a<d;a++)T[a]=o[a].fn;return T},EventEmitter.prototype.listenerCount=function listenerCount(t){var r=h?h+t:t,o=this._events[r];return o?o.fn?1:o.length:0},EventEmitter.prototype.emit=function emit(t,r,o,a,d,T){var S=h?h+t:t;if(!this._events[S])return!1;var A,P,O=this._events[S],D=arguments.length;if(O.fn){switch(O.once&&this.removeListener(t,O.fn,void 0,!0),D){case 1:return O.fn.call(O.context),!0;case 2:return O.fn.call(O.context,r),!0;case 3:return O.fn.call(O.context,r,o),!0;case 4:return O.fn.call(O.context,r,o,a),!0;case 5:return O.fn.call(O.context,r,o,a,d),!0;case 6:return O.fn.call(O.context,r,o,a,d,T),!0}for(P=1,A=new Array(D-1);P<D;P++)A[P-1]=arguments[P];O.fn.apply(O.context,A)}else{var L,I=O.length;for(P=0;P<I;P++)switch(O[P].once&&this.removeListener(t,O[P].fn,void 0,!0),D){case 1:O[P].fn.call(O[P].context);break;case 2:O[P].fn.call(O[P].context,r);break;case 3:O[P].fn.call(O[P].context,r,o);break;case 4:O[P].fn.call(O[P].context,r,o,a);break;default:if(!A)for(L=1,A=new Array(D-1);L<D;L++)A[L-1]=arguments[L];O[P].fn.apply(O[P].context,A)}}return!0},EventEmitter.prototype.on=function on(t,r,o){return addListener(this,t,r,o,!1)},EventEmitter.prototype.once=function once(t,r,o){return addListener(this,t,r,o,!0)},EventEmitter.prototype.removeListener=function removeListener(t,r,o,a){var d=h?h+t:t;if(!this._events[d])return this;if(!r)return clearEvent(this,d),this;var T=this._events[d];if(T.fn)T.fn!==r||a&&!T.once||o&&T.context!==o||clearEvent(this,d);else{for(var S=0,A=[],P=T.length;S<P;S++)(T[S].fn!==r||a&&!T[S].once||o&&T[S].context!==o)&&A.push(T[S]);A.length?this._events[d]=1===A.length?A[0]:A:clearEvent(this,d)}return this},EventEmitter.prototype.removeAllListeners=function removeAllListeners(t){var r;return t?(r=h?h+t:t,this._events[r]&&clearEvent(this,r)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=h,EventEmitter.EventEmitter=EventEmitter,t.exports=EventEmitter},function(t,r,o){var a=o(0),h=o(57),d=o(171),T=o(306),S=o(56),A=o(47),P=o(174),O=new a({initialize:function Rectangle(t,r,o,a){void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),this.type=S.RECTANGLE,this.x=t,this.y=r,this.width=o,this.height=a},contains:function contains(t,r){return h(this,t,r)},getPoint:function getPoint(t,r){return d(this,t,r)},getPoints:function getPoints(t,r,o){return T(this,t,r,o)},getRandomPoint:function getRandomPoint(t){return P(this,t)},setTo:function setTo(t,r,o,a){return this.x=t,this.y=r,this.width=o,this.height=a,this},setEmpty:function setEmpty(){return this.setTo(0,0,0,0)},setPosition:function setPosition(t,r){return void 0===r&&(r=t),this.x=t,this.y=r,this},setSize:function setSize(t,r){return void 0===r&&(r=t),this.width=t,this.height=r,this},isEmpty:function isEmpty(){return this.width<=0||this.height<=0},getLineA:function getLineA(t){return void 0===t&&(t=new A),t.setTo(this.x,this.y,this.right,this.y),t},getLineB:function getLineB(t){return void 0===t&&(t=new A),t.setTo(this.right,this.y,this.right,this.bottom),t},getLineC:function getLineC(t){return void 0===t&&(t=new A),t.setTo(this.right,this.bottom,this.x,this.bottom),t},getLineD:function getLineD(t){return void 0===t&&(t=new A),t.setTo(this.x,this.bottom,this.x,this.y),t},left:{get:function get(){return this.x},set:function set(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}},right:{get:function get(){return this.x+this.width},set:function set(t){t<=this.x?this.width=0:this.width=t-this.x}},top:{get:function get(){return this.y},set:function set(t){t>=this.bottom?this.height=0:this.height=this.bottom-t,this.y=t}},bottom:{get:function get(){return this.y+this.height},set:function set(t){t<=this.y?this.height=0:this.height=t-this.y}},centerX:{get:function get(){return this.x+this.width/2},set:function set(t){this.x=t-this.width/2}},centerY:{get:function get(){return this.y+this.height/2},set:function set(t){this.y=t-this.height/2}}});t.exports=O},function(t,r,o){t.exports={Alpha:o(607),AlphaSingle:o(303),BlendMode:o(304),ComputedSize:o(608),Crop:o(609),Depth:o(305),Flip:o(610),GetBounds:o(611),Mask:o(309),Origin:o(632),PathFollower:o(633),Pipeline:o(167),ScrollFactor:o(312),Size:o(634),Texture:o(635),TextureCrop:o(636),Tint:o(637),ToJSON:o(176),Transform:o(313),TransformMatrix:o(25),Visible:o(314)}},function(t,r){function GenerateSrc(t){for(var r="",o=0;o<t;++o)o>0&&(r+="\nelse "),o<t-1&&(r+="if(test == "+o+".0){}");return r}t.exports={getTintFromFloats:function getTintFromFloats(t,r,o,a){return((255&(255*a|0))<<24|(255&(255*t|0))<<16|(255&(255*r|0))<<8|255&(255*o|0))>>>0},getTintAppendFloatAlpha:function getTintAppendFloatAlpha(t,r){return((255&(255*r|0))<<24|t)>>>0},getTintAppendFloatAlphaAndSwap:function getTintAppendFloatAlphaAndSwap(t,r){return((255&(255*r|0))<<24|(255&(0|t))<<16|(255&(t>>8|0))<<8|255&(t>>16|0))>>>0},getFloatsFromUintRGB:function getFloatsFromUintRGB(t){return[(255&(t>>16|0))/255,(255&(t>>8|0))/255,(255&(0|t))/255]},checkShaderMax:function checkShaderMax(t,r){r&&-1!==r||(r=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS));for(var o=t.createShader(t.FRAGMENT_SHADER),a=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");;){var h=a.replace(/%forloop%/gi,GenerateSrc(r));if(t.shaderSource(o,h),t.compileShader(o),t.getShaderParameter(o,t.COMPILE_STATUS))break;r=r/2|0}return r},parseFragmentShaderMaxTextures:function parseFragmentShaderMaxTextures(t,r){if(!t)return"";for(var o="",a=0;a<r;a++)a>0&&(o+="\n\telse "),a<r-1&&(o+="if (outTexId < "+a+".5)"),o+="\n\t{",o+="\n\t\ttexture = texture2D(uMainSampler["+a+"], outTexCoord);",o+="\n\t}";return(t=t.replace(/%count%/gi,r.toString())).replace(/%forloop%/gi,o)}}},function(t,r,o){var a=o(193),h=o(6);t.exports=function GetAdvancedValue(t,r,o){var d=h(t,r,null);if(null===d)return o;if(Array.isArray(d))return a.RND.pick(d);if("object"===_typeof(d)){if(d.hasOwnProperty("randInt"))return a.RND.integerInRange(d.randInt[0],d.randInt[1]);if(d.hasOwnProperty("randFloat"))return a.RND.realInRange(d.randFloat[0],d.randFloat[1])}else if("function"==typeof d)return d(r);return d}},function(t,r){var o={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};t.exports=o},function(t,r,o){var a=o(0),h=o(176),d=o(101),T=o(9),S=o(75),A=o(20),P=new a({Extends:T,initialize:function GameObject(t,r){T.call(this),this.scene=t,this.displayList=null,this.type=r,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(S.ADDED_TO_SCENE,this.addedToScene,this),this.on(S.REMOVED_FROM_SCENE,this.removedFromScene,this),t.sys.queueDepthSort()},setActive:function setActive(t){return this.active=t,this},setName:function setName(t){return this.name=t,this},setState:function setState(t){return this.state=t,this},setDataEnabled:function setDataEnabled(){return this.data||(this.data=new d(this)),this},setData:function setData(t,r){return this.data||(this.data=new d(this)),this.data.set(t,r),this},incData:function incData(t,r){return this.data||(this.data=new d(this)),this.data.inc(t,r),this},toggleData:function toggleData(t){return this.data||(this.data=new d(this)),this.data.toggle(t),this},getData:function getData(t){return this.data||(this.data=new d(this)),this.data.get(t)},setInteractive:function setInteractive(t,r,o){return this.scene.sys.input.enable(this,t,r,o),this},disableInteractive:function disableInteractive(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function removeInteractive(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function addedToScene(){},removedFromScene:function removedFromScene(){},update:function update(){},toJSON:function toJSON(){return h(this)},willRender:function willRender(t){return!(P.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function getIndexList(){for(var t=this,r=this.parentContainer,o=[];r&&(o.unshift(r.getIndex(t)),t=r,r.parentContainer);)r=r.parentContainer;return this.displayList?o.unshift(this.displayList.getIndex(t)):o.unshift(this.scene.sys.displayList.getIndex(t)),o},addToDisplayList:function addToDisplayList(t){return void 0===t&&(t=this.scene.sys.displayList),this.displayList&&this.displayList!==t&&this.removeFromDisplayList(),t.exists(this)||(this.displayList=t,t.add(this,!0),t.queueDepthSort(),this.emit(S.ADDED_TO_SCENE,this,this.scene),t.events.emit(A.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function addToUpdateList(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function removeFromDisplayList(){var t=this.displayList||this.scene.sys.displayList;return t.exists(this)&&(t.remove(this,!0),t.queueDepthSort(),this.displayList=null,this.emit(S.REMOVED_FROM_SCENE,this,this.scene),t.events.emit(A.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function removeFromUpdateList(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function destroy(t){this.scene&&!this.ignoreDestroy&&(void 0===t&&(t=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(S.DESTROY,this,t),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});P.RENDER_MASK=15,t.exports=P},function(t,r,o){var a=o(0),h=o(24),d=o(20),T=new a({initialize:function GameObjectCreator(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(d.BOOT,this.boot,this),this.events.on(d.START,this.start,this)},boot:function boot(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(d.DESTROY,this.destroy,this)},start:function start(){this.events.once(d.SHUTDOWN,this.shutdown,this)},shutdown:function shutdown(){this.events.off(d.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown(),this.events.off(d.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});T.register=function(t,r){T.prototype.hasOwnProperty(t)||(T.prototype[t]=r)},T.remove=function(t){T.prototype.hasOwnProperty(t)&&delete T.prototype[t]},h.register("GameObjectCreator",T,"make"),t.exports=T},function(t,r,o){var a=o(7);t.exports=function Extend(){var t,r,o,h,d,T,S=arguments[0]||{},A=1,P=arguments.length,O=!1;for("boolean"==typeof S&&(O=S,S=arguments[1]||{},A=2),P===A&&(S=this,--A);A<P;A++)if(null!=(t=arguments[A]))for(r in t)o=S[r],S!==(h=t[r])&&(O&&h&&(a(h)||(d=Array.isArray(h)))?(d?(d=!1,T=o&&Array.isArray(o)?o:[]):T=o&&a(o)?o:{},S[r]=Extend(O,T,h)):void 0!==h&&(S[r]=h));return S}},function(t,r){t.exports=function Clamp(t,r,o){return Math.max(r,Math.min(o,t))}},function(t,r,o){var a=o(25),h=new a,d=new a,T=new a,S={camera:h,sprite:d,calc:T};t.exports=function GetCalcMatrix(t,r,o){var a=h,A=d,P=T;return A.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),a.copyFrom(r.matrix),o?(a.multiplyWithOffset(o,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY),A.e=t.x,A.f=t.y):(A.e-=r.scrollX*t.scrollFactorX,A.f-=r.scrollY*t.scrollFactorY),a.multiply(A,P),S}},function(t,r,o){t.exports={ADDED_TO_SCENE:o(656),BOOT:o(657),CREATE:o(658),DESTROY:o(659),PAUSE:o(660),POST_UPDATE:o(661),PRE_RENDER:o(662),PRE_UPDATE:o(663),READY:o(664),REMOVED_FROM_SCENE:o(665),RENDER:o(666),RESUME:o(667),SHUTDOWN:o(668),SLEEP:o(669),START:o(670),TRANSITION_COMPLETE:o(671),TRANSITION_INIT:o(672),TRANSITION_OUT:o(673),TRANSITION_START:o(674),TRANSITION_WAKE:o(675),UPDATE:o(676),WAKE:o(677)}},function(t,r){t.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},function(t,r,o){t.exports={BLUR:o(612),BOOT:o(613),CONTEXT_LOST:o(614),CONTEXT_RESTORED:o(615),DESTROY:o(616),FOCUS:o(617),HIDDEN:o(618),PAUSE:o(619),POST_RENDER:o(620),POST_STEP:o(621),PRE_RENDER:o(622),PRE_STEP:o(623),READY:o(624),RESUME:o(625),STEP:o(626),VISIBLE:o(627)}},function(t,r,o){var a=o(0),h=o(21),d=o(95),T=o(2),S=o(155),A=o(240),P=o(517),O=o(156),D=new a({initialize:function File(t,r){this.loader=t,this.cache=T(r,"cache",!1),this.type=T(r,"type",!1),this.key=T(r,"key",!1);var o=this.key;if(t.prefix&&""!==t.prefix&&(this.key=t.prefix+o),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var a=T(r,"url");void 0===a?a=t.path+o+"."+T(r,"extension",""):"string"!=typeof a||a.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)||(a=t.path+a),this.url=a,this.src="",this.xhrSettings=O(T(r,"responseType",void 0)),T(r,"xhrSettings",!1)&&(this.xhrSettings=A(this.xhrSettings,T(r,"xhrSettings",{}))),this.xhrLoader=null,this.state="function"==typeof this.url?h.FILE_POPULATED:h.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=T(r,"config",{}),this.multiFile,this.linkFile},setLink:function setLink(t){this.linkFile=t,t.linkFile=this},resetXHR:function resetXHR(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function load(){this.state===h.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=h.FILE_LOADING,this.src=S(this,this.loader.baseURL),0===this.src.indexOf("data:")?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=P(this,this.loader.xhr))},onLoad:function onLoad(t,r){var o=t.responseURL&&(0===t.responseURL.indexOf("file://")||0===t.responseURL.indexOf("capacitor://"))&&0===r.target.status,a=!(r.target&&200!==r.target.status)||o;4===t.readyState&&t.status>=400&&t.status<=599&&(a=!1),this.state=h.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,a)},onError:function onError(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function onProgress(t){t.lengthComputable&&(this.bytesLoaded=t.loaded,this.bytesTotal=t.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(d.FILE_PROGRESS,this,this.percentComplete))},onProcess:function onProcess(){this.state=h.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function onProcessComplete(){this.state=h.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function onProcessError(){this.state=h.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function hasCacheConflict(){return this.cache&&this.cache.exists(this.key)},addToCache:function addToCache(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function pendingDestroy(t){void 0===t&&(t=this.data);var r=this.key,o=this.type;this.loader.emit(d.FILE_COMPLETE,r,o,t),this.loader.emit(d.FILE_KEY_COMPLETE+o+"-"+r,r,o,t),this.loader.flagForRemoval(this)},destroy:function destroy(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});D.createObjectURL=function(t,r,o){if("function"==typeof URL)t.src=URL.createObjectURL(r);else{var a=new FileReader;a.onload=function(){t.removeAttribute("crossOrigin"),t.src="data:"+(r.type||o)+";base64,"+a.result.split(",")[1]},a.onerror=t.onerror,a.readAsDataURL(r)}},D.revokeObjectURL=function(t){"function"==typeof URL&&URL.revokeObjectURL(t.src)},t.exports=D},function(t,r){var o={},a={},h={register:function(t,r,a,h){void 0===h&&(h=!1),o[t]={plugin:r,mapping:a,custom:h}},registerCustom:function(t,r,o,h){a[t]={plugin:r,mapping:o,data:h}},hasCore:function(t){return o.hasOwnProperty(t)},hasCustom:function(t){return a.hasOwnProperty(t)},getCore:function(t){return o[t]},getCustom:function(t){return a[t]},getCustomClass:function(t){return a.hasOwnProperty(t)?a[t].plugin:null},remove:function(t){o.hasOwnProperty(t)&&delete o[t]},removeCustom:function(t){a.hasOwnProperty(t)&&delete a[t]},destroyCorePlugins:function(){for(var t in o)o.hasOwnProperty(t)&&delete o[t]},destroyCustomPlugins:function(){for(var t in a)a.hasOwnProperty(t)&&delete a[t]}};t.exports=h},function(t,r,o){var a=o(0),h=o(14),d=o(3),T=new a({initialize:function TransformMatrix(t,r,o,a,h,d){void 0===t&&(t=1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=1),void 0===h&&(h=0),void 0===d&&(d=0),this.matrix=new Float32Array([t,r,o,a,h,d,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function get(){return this.matrix[0]},set:function set(t){this.matrix[0]=t}},b:{get:function get(){return this.matrix[1]},set:function set(t){this.matrix[1]=t}},c:{get:function get(){return this.matrix[2]},set:function set(t){this.matrix[2]=t}},d:{get:function get(){return this.matrix[3]},set:function set(t){this.matrix[3]=t}},e:{get:function get(){return this.matrix[4]},set:function set(t){this.matrix[4]=t}},f:{get:function get(){return this.matrix[5]},set:function set(t){this.matrix[5]=t}},tx:{get:function get(){return this.matrix[4]},set:function set(t){this.matrix[4]=t}},ty:{get:function get(){return this.matrix[5]},set:function set(t){this.matrix[5]=t}},rotation:{get:function get(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function get(){var t=this.matrix,r=t[0],o=t[1],a=t[2],d=t[3];return r||o?o>0?Math.acos(r/this.scaleX):-Math.acos(r/this.scaleX):a||d?h.TAU-(d>0?Math.acos(-a/this.scaleY):-Math.acos(a/this.scaleY)):0}},scaleX:{get:function get(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function get(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function loadIdentity(){var t=this.matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},translate:function translate(t,r){var o=this.matrix;return o[4]=o[0]*t+o[2]*r+o[4],o[5]=o[1]*t+o[3]*r+o[5],this},scale:function scale(t,r){var o=this.matrix;return o[0]*=t,o[1]*=t,o[2]*=r,o[3]*=r,this},rotate:function rotate(t){var r=Math.sin(t),o=Math.cos(t),a=this.matrix,h=a[0],d=a[1],T=a[2],S=a[3];return a[0]=h*o+T*r,a[1]=d*o+S*r,a[2]=h*-r+T*o,a[3]=d*-r+S*o,this},multiply:function multiply(t,r){var o=this.matrix,a=t.matrix,h=o[0],d=o[1],T=o[2],S=o[3],A=o[4],P=o[5],O=a[0],D=a[1],L=a[2],I=a[3],B=a[4],N=a[5],G=void 0===r?this:r;return G.a=O*h+D*T,G.b=O*d+D*S,G.c=L*h+I*T,G.d=L*d+I*S,G.e=B*h+N*T+A,G.f=B*d+N*S+P,G},multiplyWithOffset:function multiplyWithOffset(t,r,o){var a=this.matrix,h=t.matrix,d=a[0],T=a[1],S=a[2],A=a[3],P=r*d+o*S+a[4],O=r*T+o*A+a[5],D=h[0],L=h[1],I=h[2],B=h[3],N=h[4],G=h[5];return a[0]=D*d+L*S,a[1]=D*T+L*A,a[2]=I*d+B*S,a[3]=I*T+B*A,a[4]=N*d+G*S+P,a[5]=N*T+G*A+O,this},transform:function transform(t,r,o,a,h,d){var T=this.matrix,S=T[0],A=T[1],P=T[2],O=T[3],D=T[4],L=T[5];return T[0]=t*S+r*P,T[1]=t*A+r*O,T[2]=o*S+a*P,T[3]=o*A+a*O,T[4]=h*S+d*P+D,T[5]=h*A+d*O+L,this},transformPoint:function transformPoint(t,r,o){void 0===o&&(o={x:0,y:0});var a=this.matrix,h=a[0],d=a[1],T=a[2],S=a[3],A=a[4],P=a[5];return o.x=t*h+r*T+A,o.y=t*d+r*S+P,o},invert:function invert(){var t=this.matrix,r=t[0],o=t[1],a=t[2],h=t[3],d=t[4],T=t[5],S=r*h-o*a;return t[0]=h/S,t[1]=-o/S,t[2]=-a/S,t[3]=r/S,t[4]=(a*T-h*d)/S,t[5]=-(r*T-o*d)/S,this},copyFrom:function copyFrom(t){var r=this.matrix;return r[0]=t.a,r[1]=t.b,r[2]=t.c,r[3]=t.d,r[4]=t.e,r[5]=t.f,this},copyFromArray:function copyFromArray(t){var r=this.matrix;return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],this},copyToContext:function copyToContext(t){var r=this.matrix;return t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),t},setToContext:function setToContext(t){var r=this.matrix;return t.setTransform(r[0],r[1],r[2],r[3],r[4],r[5]),t},copyToArray:function copyToArray(t){var r=this.matrix;return void 0===t?t=[r[0],r[1],r[2],r[3],r[4],r[5]]:(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5]),t},setTransform:function setTransform(t,r,o,a,h,d){var T=this.matrix;return T[0]=t,T[1]=r,T[2]=o,T[3]=a,T[4]=h,T[5]=d,this},decomposeMatrix:function decomposeMatrix(){var t=this.decomposedMatrix,r=this.matrix,o=r[0],a=r[1],h=r[2],d=r[3],T=o*d-a*h;if(t.translateX=r[4],t.translateY=r[5],o||a){var S=Math.sqrt(o*o+a*a);t.rotation=a>0?Math.acos(o/S):-Math.acos(o/S),t.scaleX=S,t.scaleY=T/S}else if(h||d){var A=Math.sqrt(h*h+d*d);t.rotation=.5*Math.PI-(d>0?Math.acos(-h/A):-Math.acos(h/A)),t.scaleX=T/A,t.scaleY=A}else t.rotation=0,t.scaleX=0,t.scaleY=0;return t},applyITRS:function applyITRS(t,r,o,a,h){var d=this.matrix,T=Math.sin(o),S=Math.cos(o);return d[4]=t,d[5]=r,d[0]=S*a,d[1]=T*a,d[2]=-T*h,d[3]=S*h,this},applyInverse:function applyInverse(t,r,o){void 0===o&&(o=new d);var a=this.matrix,h=a[0],T=a[1],S=a[2],A=a[3],P=a[4],O=a[5],D=1/(h*A+S*-T);return o.x=A*D*t+-S*D*r+(O*S-P*A)*D,o.y=h*D*r+-T*D*t+(-O*h+P*T)*D,o},getX:function getX(t,r){return t*this.a+r*this.c+this.e},getY:function getY(t,r){return t*this.b+r*this.d+this.f},getXRound:function getXRound(t,r,o){var a=this.getX(t,r);return o&&(a=Math.round(a)),a},getYRound:function getYRound(t,r,o){var a=this.getY(t,r);return o&&(a=Math.round(a)),a},getCSSMatrix:function getCSSMatrix(){var t=this.matrix;return"matrix("+t[0]+","+t[1]+","+t[2]+","+t[3]+","+t[4]+","+t[5]+")"},destroy:function destroy(){this.matrix=null,this.decomposedMatrix=null}});t.exports=T},function(t,r,o){var a=o(2);t.exports=function GetTilesWithin(t,r,o,h,d,T){void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=T.width),void 0===h&&(h=T.height),d||(d={});var S=a(d,"isNotEmpty",!1),A=a(d,"isColliding",!1),P=a(d,"hasInterestingFace",!1);t<0&&(o+=t,t=0),r<0&&(h+=r,r=0),t+o>T.width&&(o=Math.max(T.width-t,0)),r+h>T.height&&(h=Math.max(T.height-r,0));for(var O=[],D=r;D<r+h;D++)for(var L=t;L<t+o;L++){var I=T.data[D][L];if(null!==I){if(S&&-1===I.index)continue;if(A&&!I.collides)continue;if(P&&!I.hasInterestingFace)continue;O.push(I)}}return O}},function(t,r){t.exports=function PropertyValueSet(t,r,o,a,h,d){var T;void 0===a&&(a=0),void 0===h&&(h=0),void 0===d&&(d=1);var S=0,A=t.length;if(1===d)for(T=h;T<A;T++)t[T][r]=o+S*a,S++;else for(T=h;T>=0;T--)t[T][r]=o+S*a,S++;return t}},function(t,r,o){var a=o(35),h=o(13);t.exports=function BuildGameObject(t,r,o){r.x=h(o,"x",0),r.y=h(o,"y",0),r.depth=h(o,"depth",0),r.flipX=h(o,"flipX",!1),r.flipY=h(o,"flipY",!1);var d=h(o,"scale",null);"number"==typeof d?r.setScale(d):null!==d&&(r.scaleX=h(d,"x",1),r.scaleY=h(d,"y",1));var T=h(o,"scrollFactor",null);"number"==typeof T?r.setScrollFactor(T):null!==T&&(r.scrollFactorX=h(T,"x",1),r.scrollFactorY=h(T,"y",1)),r.rotation=h(o,"rotation",0);var S=h(o,"angle",null);null!==S&&(r.angle=S),r.alpha=h(o,"alpha",1);var A=h(o,"origin",null);if("number"==typeof A)r.setOrigin(A);else if(null!==A){var P=h(A,"x",.5),O=h(A,"y",.5);r.setOrigin(P,O)}return r.blendMode=h(o,"blendMode",a.NORMAL),r.visible=h(o,"visible",!0),h(o,"add",!0)&&t.sys.displayList.add(r),r.preUpdate&&t.sys.updateList.add(r),r}},function(t,r){t.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},function(t,r,o){var a=o(19);t.exports=function SetTransform(t,r,o,h,d){var T=h.alpha*o.alpha;if(T<=0)return!1;var S=a(o,h,d).calc;return r.globalCompositeOperation=t.blendModes[o.blendMode],r.globalAlpha=T,r.save(),S.setToContext(r),r.imageSmoothingEnabled=!(!t.antialias||o.frame&&o.frame.source.scaleMode),!0}},function(t,r,o){var a=o(33),h=o(192),d=[],T=!1;t.exports=function CanvasPool(){var t=function create(t,o,S,A,P){var O;void 0===o&&(o=1),void 0===S&&(S=1),void 0===A&&(A=a.CANVAS),void 0===P&&(P=!1);var D=r(A);return null===D?(D={parent:t,canvas:document.createElement("canvas"),type:A},A===a.CANVAS&&d.push(D),O=D.canvas):(D.parent=t,O=D.canvas),P&&(D.parent=O),O.width=o,O.height=S,T&&A===a.CANVAS&&h.disable(O.getContext("2d")),O},r=function first(t){if(void 0===t&&(t=a.CANVAS),t===a.WEBGL)return null;for(var r=0;r<d.length;r++){var o=d[r];if(!o.parent&&o.type===t)return o}return null},o=function total(){var t=0;return d.forEach((function(r){r.parent&&t++})),t};return{create2D:function create2D(r,o,h){return t(r,o,h,a.CANVAS)},create:t,createWebGL:function createWebGL(r,o,h){return t(r,o,h,a.WEBGL)},disableSmoothing:function disableSmoothing(){T=!0},enableSmoothing:function enableSmoothing(){T=!1},first:r,free:function free(){return d.length-o()},pool:d,remove:function remove(t){var r=t instanceof HTMLCanvasElement;d.forEach((function(o){(r&&o.canvas===t||!r&&o.parent===t)&&(o.parent=null,o.canvas.width=1,o.canvas.height=1)}))},total:o}}()},function(t,r){var o={};t.exports=o,function(){o._nextId=0,o._seed=0,o._nowStartTime=+new Date,o.extend=function(t,r){var a,h;"boolean"==typeof r?(a=2,h=r):(a=1,h=!0);for(var d=a;d<arguments.length;d++){var T=arguments[d];if(T)for(var S in T)h&&T[S]&&T[S].constructor===Object?t[S]&&t[S].constructor!==Object?t[S]=T[S]:(t[S]=t[S]||{},o.extend(t[S],h,T[S])):t[S]=T[S]}return t},o.clone=function(t,r){return o.extend({},r,t)},o.keys=function(t){if(Object.keys)return Object.keys(t);var r=[];for(var o in t)r.push(o);return r},o.values=function(t){var r=[];if(Object.keys){for(var o=Object.keys(t),a=0;a<o.length;a++)r.push(t[o[a]]);return r}for(var h in t)r.push(t[h]);return r},o.get=function(t,r,o,a){r=r.split(".").slice(o,a);for(var h=0;h<r.length;h+=1)t=t[r[h]];return t},o.set=function(t,r,a,h,d){var T=r.split(".").slice(h,d);return o.get(t,r,0,-1)[T[T.length-1]]=a,a},o.shuffle=function(t){for(var r=t.length-1;r>0;r--){var a=Math.floor(o.random()*(r+1)),h=t[r];t[r]=t[a],t[a]=h}return t},o.choose=function(t){return t[Math.floor(o.random()*t.length)]},o.isElement=function(t){return"undefined"!=typeof HTMLElement?t instanceof HTMLElement:!!(t&&t.nodeType&&t.nodeName)},o.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},o.isFunction=function(t){return"function"==typeof t},o.isPlainObject=function(t){return"object"===_typeof(t)&&t.constructor===Object},o.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},o.clamp=function(t,r,o){return t<r?r:t>o?o:t},o.sign=function(t){return t<0?-1:1},o.now=function(){if("undefined"!=typeof window&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-o._nowStartTime},o.random=function(r,o){return o=void 0!==o?o:1,(r=void 0!==r?r:0)+t()*(o-r)};var t=function _seededRandom(){return o._seed=(9301*o._seed+49297)%233280,o._seed/233280};o.colorToNumber=function(t){return 3==(t=t.replace("#","")).length&&(t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)),parseInt(t,16)},o.logLevel=1,o.log=function(){console&&o.logLevel>0&&o.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},o.info=function(){console&&o.logLevel>0&&o.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},o.warn=function(){console&&o.logLevel>0&&o.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},o.nextId=function(){return o._nextId++},o.indexOf=function(t,r){if(t.indexOf)return t.indexOf(r);for(var o=0;o<t.length;o++)if(t[o]===r)return o;return-1},o.map=function(t,r){if(t.map)return t.map(r);for(var o=[],a=0;a<t.length;a+=1)o.push(r(t[a]));return o},o.topologicalSort=function(t){var r=[],a=[],h=[];for(var d in t)a[d]||h[d]||o._topologicalSort(d,a,h,t,r);return r},o._topologicalSort=function(t,r,a,h,d){var T=h[t]||[];a[t]=!0;for(var S=0;S<T.length;S+=1){var A=T[S];a[A]||r[A]||o._topologicalSort(A,r,a,h,d)}a[t]=!1,r[t]=!0,d.push(t)},o.chain=function(){for(var t=[],r=0;r<arguments.length;r+=1){var o=arguments[r];o._chained?t.push.apply(t,o._chained):t.push(o)}var a=function chain(){for(var r,o=new Array(arguments.length),a=0,h=arguments.length;a<h;a++)o[a]=arguments[a];for(a=0;a<t.length;a+=1){var d=t[a].apply(r,o);void 0!==d&&(r=d)}return r};return a._chained=t,a},o.chainPathBefore=function(t,r,a){return o.set(t,r,o.chain(a,o.get(t,r)))},o.chainPathAfter=function(t,r,a){return o.set(t,r,o.chain(o.get(t,r),a))}}()},function(t,r,o){var a={VERSION:"3.55.2",BlendModes:o(35),ScaleModes:o(168),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};t.exports=a},function(t,r,o){var a=o(0),h=o(11),d=o(15),T=o(47),S=new a({Extends:d,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.ScrollFactor,h.Transform,h.Visible],initialize:function Shape(t,r,o){void 0===r&&(r="Shape"),d.call(this,t,r),this.geom=o,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new T,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function setFillStyle(t,r){return void 0===r&&(r=1),void 0===t?this.isFilled=!1:(this.fillColor=t,this.fillAlpha=r,this.isFilled=!0),this},setStrokeStyle:function setStrokeStyle(t,r,o){return void 0===o&&(o=1),void 0===t?this.isStroked=!1:(this.lineWidth=t,this.strokeColor=r,this.strokeAlpha=o,this.isStroked=!0),this},setClosePath:function setClosePath(t){return this.closePath=t,this},setSize:function setSize(t,r){return this.width=t,this.height=r,this},setDisplaySize:function setDisplaySize(t,r){return this.displayWidth=t,this.displayHeight=r,this},preDestroy:function preDestroy(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function get(){return this.scaleX*this.width},set:function set(t){this.scaleX=t/this.width}},displayHeight:{get:function get(){return this.scaleY*this.height},set:function set(t){this.scaleY=t/this.height}}});t.exports=S},function(t,r){t.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(t,r,o){var a=o(14);t.exports=function DegToRad(t){return t*a.DEG_TO_RAD}},function(t,r,o){t.exports={DESTROY:o(743),FADE_IN_COMPLETE:o(744),FADE_IN_START:o(745),FADE_OUT_COMPLETE:o(746),FADE_OUT_START:o(747),FLASH_COMPLETE:o(748),FLASH_START:o(749),FOLLOW_UPDATE:o(750),PAN_COMPLETE:o(751),PAN_START:o(752),POST_RENDER:o(753),PRE_RENDER:o(754),ROTATE_COMPLETE:o(755),ROTATE_START:o(756),SHAKE_COMPLETE:o(757),SHAKE_START:o(758),ZOOM_COMPLETE:o(759),ZOOM_START:o(760)}},function(t,r,o){var a=o(0),h=o(103),d=o(328),T=o(188),S=o(329),A=new a({initialize:function Color(t,r,o,a){void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(t,r,o,a)},transparent:function transparent(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function setTo(t,r,o,a,h){return void 0===a&&(a=255),void 0===h&&(h=!0),this._locked=!0,this.red=t,this.green=r,this.blue=o,this.alpha=a,this._locked=!1,this.update(h)},setGLTo:function setGLTo(t,r,o,a){return void 0===a&&(a=1),this._locked=!0,this.redGL=t,this.greenGL=r,this.blueGL=o,this.alphaGL=a,this._locked=!1,this.update(!0)},setFromRGB:function setFromRGB(t){return this._locked=!0,this.red=t.r,this.green=t.g,this.blue=t.b,t.hasOwnProperty("a")&&(this.alpha=t.a),this._locked=!1,this.update(!0)},setFromHSV:function setFromHSV(t,r,o){return T(t,r,o,this)},update:function update(t){if(void 0===t&&(t=!1),this._locked)return this;var r=this.r,o=this.g,a=this.b,T=this.a;return this._color=h(r,o,a),this._color32=d(r,o,a,T),this._rgba="rgba("+r+","+o+","+a+","+T/255+")",t&&S(r,o,a,this),this},updateHSV:function updateHSV(){var t=this.r,r=this.g,o=this.b;return S(t,r,o,this),this},clone:function clone(){return new A(this.r,this.g,this.b,this.a)},gray:function gray(t){return this.setTo(t,t,t)},random:function random(t,r){void 0===t&&(t=0),void 0===r&&(r=255);var o=Math.floor(t+Math.random()*(r-t)),a=Math.floor(t+Math.random()*(r-t)),h=Math.floor(t+Math.random()*(r-t));return this.setTo(o,a,h)},randomGray:function randomGray(t,r){void 0===t&&(t=0),void 0===r&&(r=255);var o=Math.floor(t+Math.random()*(r-t));return this.setTo(o,o,o)},saturate:function saturate(t){return this.s+=t/100,this},desaturate:function desaturate(t){return this.s-=t/100,this},lighten:function lighten(t){return this.v+=t/100,this},darken:function darken(t){return this.v-=t/100,this},brighten:function brighten(t){var r=this.r,o=this.g,a=this.b;return r=Math.max(0,Math.min(255,r-Math.round(-t/100*255))),o=Math.max(0,Math.min(255,o-Math.round(-t/100*255))),a=Math.max(0,Math.min(255,a-Math.round(-t/100*255))),this.setTo(r,o,a)},color:{get:function get(){return this._color}},color32:{get:function get(){return this._color32}},rgba:{get:function get(){return this._rgba}},redGL:{get:function get(){return this.gl[0]},set:function set(t){this.gl[0]=Math.min(Math.abs(t),1),this.r=Math.floor(255*this.gl[0]),this.update(!0)}},greenGL:{get:function get(){return this.gl[1]},set:function set(t){this.gl[1]=Math.min(Math.abs(t),1),this.g=Math.floor(255*this.gl[1]),this.update(!0)}},blueGL:{get:function get(){return this.gl[2]},set:function set(t){this.gl[2]=Math.min(Math.abs(t),1),this.b=Math.floor(255*this.gl[2]),this.update(!0)}},alphaGL:{get:function get(){return this.gl[3]},set:function set(t){this.gl[3]=Math.min(Math.abs(t),1),this.a=Math.floor(255*this.gl[3]),this.update()}},red:{get:function get(){return this.r},set:function set(t){t=Math.floor(Math.abs(t)),this.r=Math.min(t,255),this.gl[0]=t/255,this.update(!0)}},green:{get:function get(){return this.g},set:function set(t){t=Math.floor(Math.abs(t)),this.g=Math.min(t,255),this.gl[1]=t/255,this.update(!0)}},blue:{get:function get(){return this.b},set:function set(t){t=Math.floor(Math.abs(t)),this.b=Math.min(t,255),this.gl[2]=t/255,this.update(!0)}},alpha:{get:function get(){return this.a},set:function set(t){t=Math.floor(Math.abs(t)),this.a=Math.min(t,255),this.gl[3]=t/255,this.update()}},h:{get:function get(){return this._h},set:function set(t){this._h=t,T(t,this._s,this._v,this)}},s:{get:function get(){return this._s},set:function set(t){this._s=t,T(this._h,t,this._v,this)}},v:{get:function get(){return this._v},set:function set(t){this._v=t,T(this._h,this._s,t,this)}}});t.exports=A},function(t,r,o){var a=new(o(0))({initialize:function Vector3(t,r,o){this.x=0,this.y=0,this.z=0,"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=r||0,this.z=o||0)},up:function up(){return this.x=0,this.y=1,this.z=0,this},min:function min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clone:function clone(){return new a(this.x,this.y,this.z)},addVectors:function addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this},crossVectors:function crossVectors(t,r){var o=t.x,a=t.y,h=t.z,d=r.x,T=r.y,S=r.z;return this.x=a*S-h*T,this.y=h*d-o*S,this.z=o*T-a*d,this},equals:function equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},copy:function copy(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},set:function set(t,r,o){return"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=r||0,this.z=o||0),this},setFromMatrixPosition:function setFromMatrixPosition(t){return this.fromArray(t.val,12)},setFromMatrixColumn:function setFromMatrixColumn(t,r){return this.fromArray(t.val,4*r)},fromArray:function fromArray(t,r){return void 0===r&&(r=0),this.x=t[r],this.y=t[r+1],this.z=t[r+2],this},add:function add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this},addScalar:function addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this},addScale:function addScale(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r||0,this},subtract:function subtract(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this},multiply:function multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this},scale:function scale(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divide:function divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this},negate:function negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function distance(t){var r=t.x-this.x,o=t.y-this.y,a=t.z-this.z||0;return Math.sqrt(r*r+o*o+a*a)},distanceSq:function distanceSq(t){var r=t.x-this.x,o=t.y-this.y,a=t.z-this.z||0;return r*r+o*o+a*a},length:function length(){var t=this.x,r=this.y,o=this.z;return Math.sqrt(t*t+r*r+o*o)},lengthSq:function lengthSq(){var t=this.x,r=this.y,o=this.z;return t*t+r*r+o*o},normalize:function normalize(){var t=this.x,r=this.y,o=this.z,a=t*t+r*r+o*o;return a>0&&(a=1/Math.sqrt(a),this.x=t*a,this.y=r*a,this.z=o*a),this},dot:function dot(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function cross(t){var r=this.x,o=this.y,a=this.z,h=t.x,d=t.y,T=t.z;return this.x=o*T-a*d,this.y=a*h-r*T,this.z=r*d-o*h,this},lerp:function lerp(t,r){void 0===r&&(r=0);var o=this.x,a=this.y,h=this.z;return this.x=o+r*(t.x-o),this.y=a+r*(t.y-a),this.z=h+r*(t.z-h),this},applyMatrix3:function applyMatrix3(t){var r=this.x,o=this.y,a=this.z,h=t.val;return this.x=h[0]*r+h[3]*o+h[6]*a,this.y=h[1]*r+h[4]*o+h[7]*a,this.z=h[2]*r+h[5]*o+h[8]*a,this},applyMatrix4:function applyMatrix4(t){var r=this.x,o=this.y,a=this.z,h=t.val,d=1/(h[3]*r+h[7]*o+h[11]*a+h[15]);return this.x=(h[0]*r+h[4]*o+h[8]*a+h[12])*d,this.y=(h[1]*r+h[5]*o+h[9]*a+h[13])*d,this.z=(h[2]*r+h[6]*o+h[10]*a+h[14])*d,this},transformMat3:function transformMat3(t){var r=this.x,o=this.y,a=this.z,h=t.val;return this.x=r*h[0]+o*h[3]+a*h[6],this.y=r*h[1]+o*h[4]+a*h[7],this.z=r*h[2]+o*h[5]+a*h[8],this},transformMat4:function transformMat4(t){var r=this.x,o=this.y,a=this.z,h=t.val;return this.x=h[0]*r+h[4]*o+h[8]*a+h[12],this.y=h[1]*r+h[5]*o+h[9]*a+h[13],this.z=h[2]*r+h[6]*o+h[10]*a+h[14],this},transformCoordinates:function transformCoordinates(t){var r=this.x,o=this.y,a=this.z,h=t.val,d=r*h[0]+o*h[4]+a*h[8]+h[12],T=r*h[1]+o*h[5]+a*h[9]+h[13],S=r*h[2]+o*h[6]+a*h[10]+h[14],A=r*h[3]+o*h[7]+a*h[11]+h[15];return this.x=d/A,this.y=T/A,this.z=S/A,this},transformQuat:function transformQuat(t){var r=this.x,o=this.y,a=this.z,h=t.x,d=t.y,T=t.z,S=t.w,A=S*r+d*a-T*o,P=S*o+T*r-h*a,O=S*a+h*o-d*r,D=-h*r-d*o-T*a;return this.x=A*S+D*-h+P*-T-O*-d,this.y=P*S+D*-d+O*-h-A*-T,this.z=O*S+D*-T+A*-d-P*-h,this},project:function project(t){var r=this.x,o=this.y,a=this.z,h=t.val,d=h[0],T=h[1],S=h[2],A=h[3],P=h[4],O=h[5],D=h[6],L=h[7],I=h[8],B=h[9],N=h[10],G=h[11],Y=h[12],X=h[13],U=h[14],z=1/(r*A+o*L+a*G+h[15]);return this.x=(r*d+o*P+a*I+Y)*z,this.y=(r*T+o*O+a*B+X)*z,this.z=(r*S+o*D+a*N+U)*z,this},projectViewMatrix:function projectViewMatrix(t,r){return this.applyMatrix4(t).applyMatrix4(r)},unprojectViewMatrix:function unprojectViewMatrix(t,r){return this.applyMatrix4(t).applyMatrix4(r)},unproject:function unproject(t,r){var o=t.x,a=t.y,h=t.z,d=t.w,T=this.x-o,S=d-this.y-1-a,A=this.z;return this.x=2*T/h-1,this.y=2*S/d-1,this.z=2*A-1,this.project(r)},reset:function reset(){return this.x=0,this.y=0,this.z=0,this}});a.ZERO=new a,a.RIGHT=new a(1,0,0),a.LEFT=new a(-1,0,0),a.UP=new a(0,-1,0),a.DOWN=new a(0,1,0),a.FORWARD=new a(0,0,1),a.BACK=new a(0,0,-1),a.ONE=new a(1,1,1),t.exports=a},function(t,r){t.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(t,r,o){var a={};t.exports=a;var h=o(64),d=o(83),T=o(165),S=o(32),A=o(84),P=o(271);!function(){a._inertiaScale=4,a._nextCollidingGroupId=1,a._nextNonCollidingGroupId=-1,a._nextCategory=1,a.create=function(r){var o={id:S.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!r.hasOwnProperty("position")&&r.hasOwnProperty("vertices")?r.position=h.centre(r.vertices):r.hasOwnProperty("vertices")||(o.vertices=h.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var a=S.extend(o,r);return t(a,r),a.setOnCollideWith=function(t,r){return r?this.onCollideWith[t.id]=r:delete this.onCollideWith[t.id],this},a},a.nextGroup=function(t){return t?a._nextNonCollidingGroupId--:a._nextCollidingGroupId++},a.nextCategory=function(){return a._nextCategory=a._nextCategory<<1,a._nextCategory};var t=function _initProperties(t,r){r=r||{},a.set(t,{bounds:t.bounds||A.create(t.vertices),positionPrev:t.positionPrev||d.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t});var o=t.bounds;if(h.rotate(t.vertices,t.angle,t.position),P.rotate(t.axes,t.angle),A.update(o,t.vertices,t.velocity),a.set(t,{axes:r.axes||t.axes,area:r.area||t.area,mass:r.mass||t.mass,inertia:r.inertia||t.inertia}),1===t.parts.length){var T=t.centerOfMass,S=t.centerOffset,O=o.max.x-o.min.x,D=o.max.y-o.min.y;T.x=-(o.min.x-t.position.x)/O,T.y=-(o.min.y-t.position.y)/D,S.x=O*T.x,S.y=D*T.y}};a.set=function(t,r,o){var h;for(h in"string"==typeof r&&(h=r,(r={})[h]=o),r)if(Object.prototype.hasOwnProperty.call(r,h))switch(o=r[h],h){case"isStatic":a.setStatic(t,o);break;case"isSleeping":T.set(t,o);break;case"mass":a.setMass(t,o);break;case"density":a.setDensity(t,o);break;case"inertia":a.setInertia(t,o);break;case"vertices":a.setVertices(t,o);break;case"position":a.setPosition(t,o);break;case"angle":a.setAngle(t,o);break;case"velocity":a.setVelocity(t,o);break;case"angularVelocity":a.setAngularVelocity(t,o);break;case"parts":a.setParts(t,o);break;case"centre":a.setCentre(t,o);break;default:t[h]=o}},a.setStatic=function(t,r){for(var o=0;o<t.parts.length;o++){var a=t.parts[o];a.isStatic=r,r?(a._original={restitution:a.restitution,friction:a.friction,mass:a.mass,inertia:a.inertia,density:a.density,inverseMass:a.inverseMass,inverseInertia:a.inverseInertia},a.restitution=0,a.friction=1,a.mass=a.inertia=a.density=1/0,a.inverseMass=a.inverseInertia=0,a.positionPrev.x=a.position.x,a.positionPrev.y=a.position.y,a.anglePrev=a.angle,a.angularVelocity=0,a.speed=0,a.angularSpeed=0,a.motion=0):a._original&&(a.restitution=a._original.restitution,a.friction=a._original.friction,a.mass=a._original.mass,a.inertia=a._original.inertia,a.density=a._original.density,a.inverseMass=a._original.inverseMass,a.inverseInertia=a._original.inverseInertia,a._original=null)}},a.setMass=function(t,r){var o=t.inertia/(t.mass/6);t.inertia=o*(r/6),t.inverseInertia=1/t.inertia,t.mass=r,t.inverseMass=1/t.mass,t.density=t.mass/t.area},a.setDensity=function(t,r){a.setMass(t,r*t.area),t.density=r},a.setInertia=function(t,r){t.inertia=r,t.inverseInertia=1/t.inertia},a.setVertices=function(t,r){r[0].body===t?t.vertices=r:t.vertices=h.create(r,t),t.axes=P.fromVertices(t.vertices),t.area=h.area(t.vertices),a.setMass(t,t.density*t.area);var o=h.centre(t.vertices);h.translate(t.vertices,o,-1),a.setInertia(t,a._inertiaScale*h.inertia(t.vertices,t.mass)),h.translate(t.vertices,t.position),A.update(t.bounds,t.vertices,t.velocity)},a.setParts=function(t,r,o){var d;for(r=r.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,d=0;d<r.length;d++){var T=r[d];T!==t&&(T.parent=t,t.parts.push(T))}if(1!==t.parts.length){if(o=void 0===o||o){var S=[];for(d=0;d<r.length;d++)S=S.concat(r[d].vertices);h.clockwiseSort(S);var P=h.hull(S),O=h.centre(P);a.setVertices(t,P),h.translate(t.vertices,O)}var D=a._totalProperties(t),L=D.centre.x,I=D.centre.y,B=t.bounds,N=t.centerOfMass,G=t.centerOffset;A.update(B,t.vertices,t.velocity),N.x=-(B.min.x-L)/(B.max.x-B.min.x),N.y=-(B.min.y-I)/(B.max.y-B.min.y),G.x=L,G.y=I,t.area=D.area,t.parent=t,t.position.x=L,t.position.y=I,t.positionPrev.x=L,t.positionPrev.y=I,a.setMass(t,D.mass),a.setInertia(t,D.inertia),a.setPosition(t,D.centre)}},a.setCentre=function(t,r,o){o?(t.positionPrev.x+=r.x,t.positionPrev.y+=r.y,t.position.x+=r.x,t.position.y+=r.y):(t.positionPrev.x=r.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=r.y-(t.position.y-t.positionPrev.y),t.position.x=r.x,t.position.y=r.y)},a.setPosition=function(t,r){var o=d.sub(r,t.position);t.positionPrev.x+=o.x,t.positionPrev.y+=o.y;for(var a=0;a<t.parts.length;a++){var T=t.parts[a];T.position.x+=o.x,T.position.y+=o.y,h.translate(T.vertices,o),A.update(T.bounds,T.vertices,t.velocity)}},a.setAngle=function(t,r){var o=r-t.angle;t.anglePrev+=o;for(var a=0;a<t.parts.length;a++){var T=t.parts[a];T.angle+=o,h.rotate(T.vertices,o,t.position),P.rotate(T.axes,o),A.update(T.bounds,T.vertices,t.velocity),a>0&&d.rotateAbout(T.position,o,t.position,T.position)}},a.setVelocity=function(t,r){t.positionPrev.x=t.position.x-r.x,t.positionPrev.y=t.position.y-r.y,t.velocity.x=r.x,t.velocity.y=r.y,t.speed=d.magnitude(t.velocity)},a.setAngularVelocity=function(t,r){t.anglePrev=t.angle-r,t.angularVelocity=r,t.angularSpeed=Math.abs(t.angularVelocity)},a.translate=function(t,r){a.setPosition(t,d.add(t.position,r))},a.rotate=function(t,r,o){if(o){var h=Math.cos(r),d=Math.sin(r),T=t.position.x-o.x,S=t.position.y-o.y;a.setPosition(t,{x:o.x+(T*h-S*d),y:o.y+(T*d+S*h)}),a.setAngle(t,t.angle+r)}else a.setAngle(t,t.angle+r)},a.scale=function(t,r,o,d){var T=0,S=0;d=d||t.position;for(var O=0;O<t.parts.length;O++){var D=t.parts[O];D.scale.x=r,D.scale.y=o,h.scale(D.vertices,r,o,d),D.axes=P.fromVertices(D.vertices),D.area=h.area(D.vertices),a.setMass(D,t.density*D.area),h.translate(D.vertices,{x:-D.position.x,y:-D.position.y}),a.setInertia(D,a._inertiaScale*h.inertia(D.vertices,D.mass)),h.translate(D.vertices,{x:D.position.x,y:D.position.y}),O>0&&(T+=D.area,S+=D.inertia),D.position.x=d.x+(D.position.x-d.x)*r,D.position.y=d.y+(D.position.y-d.y)*o,A.update(D.bounds,D.vertices,t.velocity)}t.parts.length>1&&(t.area=T,t.isStatic||(a.setMass(t,t.density*T),a.setInertia(t,S))),t.circleRadius&&(r===o?t.circleRadius*=r:t.circleRadius=null)},a.update=function(t,r,o,a){var T=Math.pow(r*o*t.timeScale,2),S=1-t.frictionAir*o*t.timeScale,O=t.position.x-t.positionPrev.x,D=t.position.y-t.positionPrev.y;t.velocity.x=O*S*a+t.force.x/t.mass*T,t.velocity.y=D*S*a+t.force.y/t.mass*T,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*S*a+t.torque/t.inertia*T,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=d.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var L=0;L<t.parts.length;L++){var I=t.parts[L];h.translate(I.vertices,t.velocity),L>0&&(I.position.x+=t.velocity.x,I.position.y+=t.velocity.y),0!==t.angularVelocity&&(h.rotate(I.vertices,t.angularVelocity,t.position),P.rotate(I.axes,t.angularVelocity),L>0&&d.rotateAbout(I.position,t.angularVelocity,t.position,I.position)),A.update(I.bounds,I.vertices,t.velocity)}},a.applyForce=function(t,r,o){t.force.x+=o.x,t.force.y+=o.y;var a=r.x-t.position.x,h=r.y-t.position.y;t.torque+=a*o.y-h*o.x},a._totalProperties=function(t){for(var r={mass:0,area:0,inertia:0,centre:{x:0,y:0}},o=1===t.parts.length?0:1;o<t.parts.length;o++){var a=t.parts[o],h=a.mass!==1/0?a.mass:1;r.mass+=h,r.area+=a.area,r.inertia+=a.inertia,r.centre=d.add(r.centre,d.mult(a.position,h))}return r.centre=d.div(r.centre,r.mass),r}}()},function(t,r){t.exports=function GetBottom(t){return t.y+t.height-t.height*t.originY}},function(t,r){t.exports=function GetLeft(t){return t.x-t.width*t.originX}},function(t,r){t.exports=function GetRight(t){return t.x+t.width-t.width*t.originX}},function(t,r){t.exports=function GetTop(t){return t.y-t.height*t.originY}},function(t,r){t.exports=function PropertyValueInc(t,r,o,a,h,d){var T;void 0===a&&(a=0),void 0===h&&(h=0),void 0===d&&(d=1);var S=0,A=t.length;if(1===d)for(T=h;T<A;T++)t[T][r]+=o+S*a,S++;else for(T=h;T>=0;T--)t[T][r]+=o+S*a,S++;return t}},function(t,r,o){var a=o(0),h=o(307),d=o(172),T=o(56),S=o(173),A=o(3),P=new a({initialize:function Line(t,r,o,a){void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),this.type=T.LINE,this.x1=t,this.y1=r,this.x2=o,this.y2=a},getPoint:function getPoint(t,r){return h(this,t,r)},getPoints:function getPoints(t,r,o){return d(this,t,r,o)},getRandomPoint:function getRandomPoint(t){return S(this,t)},setTo:function setTo(t,r,o,a){return void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),this.x1=t,this.y1=r,this.x2=o,this.y2=a,this},getPointA:function getPointA(t){return void 0===t&&(t=new A),t.set(this.x1,this.y1),t},getPointB:function getPointB(t){return void 0===t&&(t=new A),t.set(this.x2,this.y2),t},left:{get:function get(){return Math.min(this.x1,this.x2)},set:function set(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function get(){return Math.max(this.x1,this.x2)},set:function set(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function get(){return Math.min(this.y1,this.y2)},set:function set(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function get(){return Math.max(this.y1,this.y2)},set:function set(t){this.y1>this.y2?this.y1=t:this.y2=t}}});t.exports=P},function(t,r){t.exports=function FillStyleCanvas(t,r,o,a){var h=o||r.fillColor,d=a||r.fillAlpha,T=(16711680&h)>>>16,S=(65280&h)>>>8,A=255&h;t.fillStyle="rgba("+T+","+S+","+A+","+d+")"}},function(t,r,o){var a=new(o(0))({initialize:function MultiFile(t,r,o,a){var h=[];a.forEach((function(t){t&&h.push(t)})),this.loader=t,this.type=r,this.key=o,this.multiKeyIndex=t.multiKeyIndex++,this.files=h,this.complete=!1,this.pending=h.length,this.failed=0,this.config={},this.baseURL=t.baseURL,this.path=t.path,this.prefix=t.prefix;for(var d=0;d<h.length;d++)h[d].multiFile=this},isReadyToProcess:function isReadyToProcess(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function addToMultiFile(t){return this.files.push(t),t.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function onFileComplete(t){-1!==this.files.indexOf(t)&&this.pending--},onFileFailed:function onFileFailed(t){-1!==this.files.indexOf(t)&&this.failed++}});t.exports=a},function(t,r){t.exports=function DistanceBetween(t,r,o,a){var h=t-o,d=r-a;return Math.sqrt(h*h+d*d)}},function(t,r,o){t.exports={BOOT:o(922),DESTROY:o(923),DRAG_END:o(924),DRAG_ENTER:o(925),DRAG:o(926),DRAG_LEAVE:o(927),DRAG_OVER:o(928),DRAG_START:o(929),DROP:o(930),GAME_OUT:o(931),GAME_OVER:o(932),GAMEOBJECT_DOWN:o(933),GAMEOBJECT_DRAG_END:o(934),GAMEOBJECT_DRAG_ENTER:o(935),GAMEOBJECT_DRAG:o(936),GAMEOBJECT_DRAG_LEAVE:o(937),GAMEOBJECT_DRAG_OVER:o(938),GAMEOBJECT_DRAG_START:o(939),GAMEOBJECT_DROP:o(940),GAMEOBJECT_MOVE:o(941),GAMEOBJECT_OUT:o(942),GAMEOBJECT_OVER:o(943),GAMEOBJECT_POINTER_DOWN:o(944),GAMEOBJECT_POINTER_MOVE:o(945),GAMEOBJECT_POINTER_OUT:o(946),GAMEOBJECT_POINTER_OVER:o(947),GAMEOBJECT_POINTER_UP:o(948),GAMEOBJECT_POINTER_WHEEL:o(949),GAMEOBJECT_UP:o(950),GAMEOBJECT_WHEEL:o(951),MANAGER_BOOT:o(952),MANAGER_PROCESS:o(953),MANAGER_UPDATE:o(954),POINTER_DOWN:o(955),POINTER_DOWN_OUTSIDE:o(956),POINTER_MOVE:o(957),POINTER_OUT:o(958),POINTER_OVER:o(959),POINTER_UP:o(960),POINTER_UP_OUTSIDE:o(961),POINTER_WHEEL:o(962),POINTERLOCK_CHANGE:o(963),PRE_UPDATE:o(964),SHUTDOWN:o(965),START:o(966),UPDATE:o(967)}},function(t,r){t.exports=function SetTop(t,r){return t.y=r+t.height*t.originY,t}},function(t,r){t.exports=function SetLeft(t,r){return t.x=r+t.width*t.originX,t}},function(t,r){t.exports=function SetRight(t,r){return t.x=r-t.width+t.width*t.originX,t}},function(t,r){t.exports=function SetBottom(t,r){return t.y=r-t.height+t.height*t.originY,t}},function(t,r){t.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},function(t,r){t.exports=function Contains(t,r,o){return!(t.width<=0||t.height<=0)&&t.x<=r&&t.x+t.width>=r&&t.y<=o&&t.y+t.height>=o}},function(t,r,o){var a=o(0),h=o(175),d=o(9),T=o(374),S=o(2),A=o(69),P=o(91),O=o(141),D=o(12),L=o(375),I=new a({Extends:d,initialize:function WebGLPipeline(t){d.call(this);var r=t.game,o=r.renderer,a=o.gl;this.name=S(t,"name","WebGLPipeline"),this.game=r,this.renderer=o,this.manager,this.gl=a,this.view=r.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=S(t,"topology",a.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=S(t,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=t,this.glReset=!1},boot:function boot(){var t,r=this.gl,o=this.config,a=this.renderer;this.isPostFX||(this.projectionMatrix=(new A).identity());var h=this.renderTargets,d=S(o,"renderTarget",!1);"boolean"==typeof d&&d&&(d=1);var D=a.width,L=a.height;if("number"==typeof d)for(t=0;t<d;t++)h.push(new O(a,D,L,1,0,!0));else if(Array.isArray(d))for(t=0;t<d.length;t++){var I=S(d[t],"scale",1),B=S(d[t],"minFilter",0),N=S(d[t],"autoClear",1);h.push(new O(a,D,L,I,B,N))}h.length&&(this.currentRenderTarget=h[0]),this.setShadersFromConfig(o);var G=this.shaders,Y=0;for(t=0;t<G.length;t++)G[t].vertexSize>Y&&(Y=G[t].vertexSize);var X=S(o,"batchSize",a.config.batchSize);this.vertexCapacity=6*X;var U=new ArrayBuffer(this.vertexCapacity*Y);this.vertexData=U,this.bytes=new Uint8Array(U),this.vertexViewF32=new Float32Array(U),this.vertexViewU32=new Uint32Array(U);var z=S(o,"vertices",null);for(z?(this.vertexViewF32.set(z),this.vertexBuffer=a.createVertexBuffer(U,r.STATIC_DRAW)):this.vertexBuffer=a.createVertexBuffer(U.byteLength,r.DYNAMIC_DRAW),this.setVertexBuffer(),t=G.length-1;t>=0;t--)G[t].rebind();this.hasBooted=!0,a.on(P.RESIZE,this.resize,this),a.on(P.PRE_RENDER,this.onPreRender,this),a.on(P.RENDER,this.onRender,this),a.on(P.POST_RENDER,this.onPostRender,this),this.emit(T.BOOT,this),this.onBoot()},onBoot:function onBoot(){},onResize:function onResize(){},setShader:function setShader(t,r){var o=this.renderer;return t===this.currentShader&&o.currentProgram===this.currentShader.program||(this.flush(),o.resetTextures(),this.setVertexBuffer()&&!r&&(r=!0),t.bind(r,!1),this.currentShader=t),this},getShaderByName:function getShaderByName(t){for(var r=this.shaders,o=0;o<r.length;o++)if(r[o].name===t)return r[o]},setShadersFromConfig:function setShadersFromConfig(t){var r,o=this.shaders,a=this.renderer;for(r=0;r<o.length;r++)o[r].destroy();var d="vertShader",T="fragShader",A="attributes",P=S(t,d,null),O=D.parseFragmentShaderMaxTextures(S(t,T,null),a.maxTextures),I=S(t,A,null),B=S(t,"shaders",[]),N=B.length;if(0===N)P&&O&&(this.shaders=[new L(this,"default",P,O,h(I))]);else{var G=[];for(r=0;r<N;r++){var Y=B[r],X=S(Y,"name","default"),U=S(Y,d,P),z=D.parseFragmentShaderMaxTextures(S(Y,T,O),a.maxTextures),V=S(Y,A,I);U&&z&&G.push(new L(this,X,U,z,h(V)))}this.shaders=G}return 0===this.shaders.length?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function setGameObject(t,r){return void 0===r&&(r=t.frame),this.currentUnit=this.renderer.setTextureSource(r.source),this.currentUnit},shouldFlush:function shouldFlush(t){return void 0===t&&(t=0),this.vertexCount+t>this.vertexCapacity},resize:function resize(t,r){t===this.width&&r===this.height||this.flush(),this.width=t,this.height=r;for(var o=this.renderTargets,a=0;a<o.length;a++)o[a].resize(t,r);return this.setProjectionMatrix(t,r),this.emit(T.RESIZE,t,r,this),this.onResize(t,r),this},setProjectionMatrix:function setProjectionMatrix(t,r){var o=this.projectionMatrix;if(!o)return this;this.projectionWidth=t,this.projectionHeight=r,o.ortho(0,t,r,0,-1e3,1e3);for(var a=this.shaders,h="uProjectionMatrix",d=0;d<a.length;d++){var T=a[d];T.hasUniform(h)&&(T.resetUniform(h),T.setMatrix4fv(h,!1,o.val,T))}return this},updateProjectionMatrix:function updateProjectionMatrix(){if(this.projectionMatrix){var t=this.renderer.projectionWidth,r=this.renderer.projectionHeight;this.projectionWidth===t&&this.projectionHeight===r||this.setProjectionMatrix(t,r)}},bind:function bind(t){if(void 0===t&&(t=this.currentShader),this.glReset)return this.rebind(t);var r=this.setVertexBuffer();return t.bind(r),this.currentShader=t,this.emit(T.BIND,this,t),this.onActive(t),this},rebind:function rebind(t){this.setVertexBuffer();for(var r=this.shaders,o=r.length-1;o>=0;o--){var a=r[o].rebind();t&&a!==t||(this.currentShader=a)}return this.emit(T.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function setVertexBuffer(){var t=this.gl,r=this.vertexBuffer;return t.getParameter(t.ARRAY_BUFFER_BINDING)!==r&&(t.bindBuffer(t.ARRAY_BUFFER,r),!0)},preBatch:function preBatch(t){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(t),this},postBatch:function postBatch(t){return this.onDraw(this.currentRenderTarget),this.onPostBatch(t),this},onDraw:function onDraw(){},unbind:function unbind(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function flush(t){if(void 0===t&&(t=!1),this.vertexCount>0){this.emit(T.BEFORE_FLUSH,this,t),this.onBeforeFlush(t);var r=this.gl,o=this.vertexCount,a=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),o===this.vertexCapacity?r.bufferData(r.ARRAY_BUFFER,this.vertexData,r.DYNAMIC_DRAW):r.bufferSubData(r.ARRAY_BUFFER,0,this.bytes.subarray(0,o*a)),r.drawArrays(this.topology,0,o)),this.vertexCount=0,this.emit(T.AFTER_FLUSH,this,t),this.onAfterFlush(t)}return this},onActive:function onActive(){},onBind:function onBind(){},onRebind:function onRebind(){},onBatch:function onBatch(){},onPreBatch:function onPreBatch(){},onPostBatch:function onPostBatch(){},onPreRender:function onPreRender(){},onRender:function onRender(){},onPostRender:function onPostRender(){},onBeforeFlush:function onBeforeFlush(){},onAfterFlush:function onAfterFlush(){},batchVert:function batchVert(t,r,o,a,h,d,T){var S=this.vertexViewF32,A=this.vertexViewU32,P=this.vertexCount*this.currentShader.vertexComponentCount-1;S[++P]=t,S[++P]=r,S[++P]=o,S[++P]=a,S[++P]=h,S[++P]=d,A[++P]=T,this.vertexCount++},batchQuad:function batchQuad(t,r,o,a,h,d,T,S,A,P,O,D,L,I,B,N,G,Y,X,U){void 0===U&&(U=this.currentUnit);var z=!1;return this.shouldFlush(6)&&(this.flush(),z=!0,U=this.setTexture2D(X)),this.batchVert(r,o,P,O,U,Y,I),this.batchVert(a,h,P,L,U,Y,N),this.batchVert(d,T,D,L,U,Y,G),this.batchVert(r,o,P,O,U,Y,I),this.batchVert(d,T,D,L,U,Y,G),this.batchVert(S,A,D,O,U,Y,B),this.onBatch(t),z},batchTri:function batchTri(t,r,o,a,h,d,T,S,A,P,O,D,L,I,B,N,G){void 0===G&&(G=this.currentUnit);var Y=!1;return this.shouldFlush(3)&&(this.flush(),Y=!0,G=this.setTexture2D(N)),this.batchVert(r,o,S,A,G,B,D),this.batchVert(a,h,S,O,G,B,L),this.batchVert(d,T,P,O,G,B,I),this.onBatch(t),Y},drawFillRect:function drawFillRect(t,r,o,a,h,d,T,S){void 0===T&&(T=this.renderer.whiteTexture.glTexture),void 0===S&&(S=!0),t=Math.floor(t),r=Math.floor(r);var A=Math.floor(t+o),P=Math.floor(r+a),O=this.setTexture2D(T),L=D.getTintAppendFloatAlphaAndSwap(h,d),I=0,B=1;S&&(I=1,B=0),this.batchQuad(null,t,r,t,P,A,P,A,r,0,I,1,B,L,L,L,L,0,T,O)},setTexture2D:function setTexture2D(t){return void 0===t&&(t=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(t),this.currentUnit},bindTexture:function bindTexture(t,r){void 0===r&&(r=0);var o=this.gl;return o.activeTexture(o.TEXTURE0+r),o.bindTexture(o.TEXTURE_2D,t),this},bindRenderTarget:function bindRenderTarget(t,r){return this.bindTexture(t.texture,r)},setTime:function setTime(t){return this.set1f(t,this.game.loop.getDuration()),this},set1f:function set1f(t,r,o){return void 0===o&&(o=this.currentShader),o.set1f(t,r),this},set2f:function set2f(t,r,o,a){return void 0===a&&(a=this.currentShader),a.set2f(t,r,o),this},set3f:function set3f(t,r,o,a,h){return void 0===h&&(h=this.currentShader),h.set3f(t,r,o,a),this},set4f:function set4f(t,r,o,a,h,d){return void 0===d&&(d=this.currentShader),d.set4f(t,r,o,a,h),this},set1fv:function set1fv(t,r,o){return void 0===o&&(o=this.currentShader),o.set1fv(t,r),this},set2fv:function set2fv(t,r,o){return void 0===o&&(o=this.currentShader),o.set2fv(t,r),this},set3fv:function set3fv(t,r,o){return void 0===o&&(o=this.currentShader),o.set3fv(t,r),this},set4fv:function set4fv(t,r,o){return void 0===o&&(o=this.currentShader),o.set4fv(t,r),this},set1iv:function set1iv(t,r,o){return void 0===o&&(o=this.currentShader),o.set1iv(t,r),this},set2iv:function set2iv(t,r,o){return void 0===o&&(o=this.currentShader),o.set2iv(t,r),this},set3iv:function set3iv(t,r,o){return void 0===o&&(o=this.currentShader),o.set3iv(t,r),this},set4iv:function set4iv(t,r,o){return void 0===o&&(o=this.currentShader),o.set4iv(t,r),this},set1i:function set1i(t,r,o){return void 0===o&&(o=this.currentShader),o.set1i(t,r),this},set2i:function set2i(t,r,o,a){return void 0===a&&(a=this.currentShader),a.set2i(t,r,o),this},set3i:function set3i(t,r,o,a,h){return void 0===h&&(h=this.currentShader),h.set3i(t,r,o,a),this},set4i:function set4i(t,r,o,a,h,d){return void 0===d&&(d=this.currentShader),d.set4i(t,r,o,a,h),this},setMatrix2fv:function setMatrix2fv(t,r,o,a){return void 0===a&&(a=this.currentShader),a.setMatrix2fv(t,r,o),this},setMatrix3fv:function setMatrix3fv(t,r,o,a){return void 0===a&&(a=this.currentShader),a.setMatrix3fv(t,r,o),this},setMatrix4fv:function setMatrix4fv(t,r,o,a){return void 0===a&&(a=this.currentShader),a.setMatrix4fv(t,r,o),this},destroy:function destroy(){var t;this.emit(T.DESTROY,this);var r=this.shaders;for(t=0;t<r.length;t++)r[t].destroy();var o=this.renderTargets;for(t=0;t<o.length;t++)o[t].destroy();this.gl.deleteBuffer(this.vertexBuffer);var a=this.renderer;return a.off(P.RESIZE,this.resize,this),a.off(P.PRE_RENDER,this.onPreRender,this),a.off(P.RENDER,this.onRender,this),a.off(P.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});t.exports=I},function(t,r,o){function earcut(t,r,o){o=o||2;var a,h,d,T,S,A,P,O=r&&r.length,D=O?r[0]*o:t.length,L=linkedList(t,0,D,o,!0),I=[];if(!L||L.next===L.prev)return I;if(O&&(L=function eliminateHoles(t,r,o,a){var h,d,T,S=[];for(h=0,d=r.length;h<d;h++)(T=linkedList(t,r[h]*a,h<d-1?r[h+1]*a:t.length,a,!1))===T.next&&(T.steiner=!0),S.push(getLeftmost(T));for(S.sort(compareX),h=0;h<S.length;h++)eliminateHole(S[h],o),o=filterPoints(o,o.next);return o}(t,r,L,o)),t.length>80*o){a=d=t[0],h=T=t[1];for(var B=o;B<D;B+=o)(S=t[B])<a&&(a=S),(A=t[B+1])<h&&(h=A),S>d&&(d=S),A>T&&(T=A);P=0!==(P=Math.max(d-a,T-h))?1/P:0}return earcutLinked(L,I,o,a,h,P),I}function linkedList(t,r,o,a,h){var d,T;if(h===signedArea(t,r,o,a)>0)for(d=r;d<o;d+=a)T=insertNode(d,t[d],t[d+1],T);else for(d=o-a;d>=r;d-=a)T=insertNode(d,t[d],t[d+1],T);return T&&equals(T,T.next)&&(removeNode(T),T=T.next),T}function filterPoints(t,r){if(!t)return t;r||(r=t);var o,a=t;do{if(o=!1,a.steiner||!equals(a,a.next)&&0!==area(a.prev,a,a.next))a=a.next;else{if(removeNode(a),(a=r=a.prev)===a.next)break;o=!0}}while(o||a!==r);return r}function earcutLinked(t,r,o,a,h,d,T){if(t){!T&&d&&function indexCurve(t,r,o,a){var h=t;do{null===h.z&&(h.z=zOrder(h.x,h.y,r,o,a)),h.prevZ=h.prev,h.nextZ=h.next,h=h.next}while(h!==t);h.prevZ.nextZ=null,h.prevZ=null,function sortLinked(t){var r,o,a,h,d,T,S,A,P=1;do{for(o=t,t=null,d=null,T=0;o;){for(T++,a=o,S=0,r=0;r<P&&(S++,a=a.nextZ);r++);for(A=P;S>0||A>0&&a;)0!==S&&(0===A||!a||o.z<=a.z)?(h=o,o=o.nextZ,S--):(h=a,a=a.nextZ,A--),d?d.nextZ=h:t=h,h.prevZ=d,d=h;o=a}d.nextZ=null,P*=2}while(T>1);return t}(h)}(t,a,h,d);for(var S,A,P=t;t.prev!==t.next;)if(S=t.prev,A=t.next,d?isEarHashed(t,a,h,d):isEar(t))r.push(S.i/o),r.push(t.i/o),r.push(A.i/o),removeNode(t),t=A.next,P=A.next;else if((t=A)===P){T?1===T?earcutLinked(t=cureLocalIntersections(filterPoints(t),r,o),r,o,a,h,d,2):2===T&&splitEarcut(t,r,o,a,h,d):earcutLinked(filterPoints(t),r,o,a,h,d,1);break}}}function isEar(t){var r=t.prev,o=t,a=t.next;if(area(r,o,a)>=0)return!1;for(var h=t.next.next;h!==t.prev;){if(pointInTriangle(r.x,r.y,o.x,o.y,a.x,a.y,h.x,h.y)&&area(h.prev,h,h.next)>=0)return!1;h=h.next}return!0}function isEarHashed(t,r,o,a){var h=t.prev,d=t,T=t.next;if(area(h,d,T)>=0)return!1;for(var S=h.x<d.x?h.x<T.x?h.x:T.x:d.x<T.x?d.x:T.x,A=h.y<d.y?h.y<T.y?h.y:T.y:d.y<T.y?d.y:T.y,P=h.x>d.x?h.x>T.x?h.x:T.x:d.x>T.x?d.x:T.x,O=h.y>d.y?h.y>T.y?h.y:T.y:d.y>T.y?d.y:T.y,D=zOrder(S,A,r,o,a),L=zOrder(P,O,r,o,a),I=t.prevZ,B=t.nextZ;I&&I.z>=D&&B&&B.z<=L;){if(I!==t.prev&&I!==t.next&&pointInTriangle(h.x,h.y,d.x,d.y,T.x,T.y,I.x,I.y)&&area(I.prev,I,I.next)>=0)return!1;if(I=I.prevZ,B!==t.prev&&B!==t.next&&pointInTriangle(h.x,h.y,d.x,d.y,T.x,T.y,B.x,B.y)&&area(B.prev,B,B.next)>=0)return!1;B=B.nextZ}for(;I&&I.z>=D;){if(I!==t.prev&&I!==t.next&&pointInTriangle(h.x,h.y,d.x,d.y,T.x,T.y,I.x,I.y)&&area(I.prev,I,I.next)>=0)return!1;I=I.prevZ}for(;B&&B.z<=L;){if(B!==t.prev&&B!==t.next&&pointInTriangle(h.x,h.y,d.x,d.y,T.x,T.y,B.x,B.y)&&area(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function cureLocalIntersections(t,r,o){var a=t;do{var h=a.prev,d=a.next.next;!equals(h,d)&&intersects(h,a,a.next,d)&&locallyInside(h,d)&&locallyInside(d,h)&&(r.push(h.i/o),r.push(a.i/o),r.push(d.i/o),removeNode(a),removeNode(a.next),a=t=d),a=a.next}while(a!==t);return filterPoints(a)}function splitEarcut(t,r,o,a,h,d){var T=t;do{for(var S=T.next.next;S!==T.prev;){if(T.i!==S.i&&isValidDiagonal(T,S)){var A=splitPolygon(T,S);return T=filterPoints(T,T.next),A=filterPoints(A,A.next),earcutLinked(T,r,o,a,h,d),void earcutLinked(A,r,o,a,h,d)}S=S.next}T=T.next}while(T!==t)}function compareX(t,r){return t.x-r.x}function eliminateHole(t,r){if(r=function findHoleBridge(t,r){var o,a=r,h=t.x,d=t.y,T=-1/0;do{if(d<=a.y&&d>=a.next.y&&a.next.y!==a.y){var S=a.x+(d-a.y)*(a.next.x-a.x)/(a.next.y-a.y);if(S<=h&&S>T){if(T=S,S===h){if(d===a.y)return a;if(d===a.next.y)return a.next}o=a.x<a.next.x?a:a.next}}a=a.next}while(a!==r);if(!o)return null;if(h===T)return o;var A,P=o,O=o.x,D=o.y,L=1/0;a=o;do{h>=a.x&&a.x>=O&&h!==a.x&&pointInTriangle(d<D?h:T,d,O,D,d<D?T:h,d,a.x,a.y)&&(A=Math.abs(d-a.y)/(h-a.x),locallyInside(a,t)&&(A<L||A===L&&(a.x>o.x||a.x===o.x&&sectorContainsSector(o,a)))&&(o=a,L=A)),a=a.next}while(a!==P);return o}(t,r),r){var o=splitPolygon(r,t);filterPoints(r,r.next),filterPoints(o,o.next)}}function sectorContainsSector(t,r){return area(t.prev,t,r.prev)<0&&area(r.next,t,t.next)<0}function zOrder(t,r,o,a,h){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-o)*h)|t<<8))|t<<4))|t<<2))|t<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-a)*h)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function getLeftmost(t){var r=t,o=t;do{(r.x<o.x||r.x===o.x&&r.y<o.y)&&(o=r),r=r.next}while(r!==t);return o}function pointInTriangle(t,r,o,a,h,d,T,S){return(h-T)*(r-S)-(t-T)*(d-S)>=0&&(t-T)*(a-S)-(o-T)*(r-S)>=0&&(o-T)*(d-S)-(h-T)*(a-S)>=0}function isValidDiagonal(t,r){return t.next.i!==r.i&&t.prev.i!==r.i&&!function intersectsPolygon(t,r){var o=t;do{if(o.i!==t.i&&o.next.i!==t.i&&o.i!==r.i&&o.next.i!==r.i&&intersects(o,o.next,t,r))return!0;o=o.next}while(o!==t);return!1}(t,r)&&(locallyInside(t,r)&&locallyInside(r,t)&&function middleInside(t,r){var o=t,a=!1,h=(t.x+r.x)/2,d=(t.y+r.y)/2;do{o.y>d!=o.next.y>d&&o.next.y!==o.y&&h<(o.next.x-o.x)*(d-o.y)/(o.next.y-o.y)+o.x&&(a=!a),o=o.next}while(o!==t);return a}(t,r)&&(area(t.prev,t,r.prev)||area(t,r.prev,r))||equals(t,r)&&area(t.prev,t,t.next)>0&&area(r.prev,r,r.next)>0)}function area(t,r,o){return(r.y-t.y)*(o.x-r.x)-(r.x-t.x)*(o.y-r.y)}function equals(t,r){return t.x===r.x&&t.y===r.y}function intersects(t,r,o,a){var h=sign(area(t,r,o)),d=sign(area(t,r,a)),T=sign(area(o,a,t)),S=sign(area(o,a,r));return h!==d&&T!==S||!(0!==h||!onSegment(t,o,r))||!(0!==d||!onSegment(t,a,r))||!(0!==T||!onSegment(o,t,a))||!(0!==S||!onSegment(o,r,a))}function onSegment(t,r,o){return r.x<=Math.max(t.x,o.x)&&r.x>=Math.min(t.x,o.x)&&r.y<=Math.max(t.y,o.y)&&r.y>=Math.min(t.y,o.y)}function sign(t){return t>0?1:t<0?-1:0}function locallyInside(t,r){return area(t.prev,t,t.next)<0?area(t,r,t.next)>=0&&area(t,t.prev,r)>=0:area(t,r,t.prev)<0||area(t,t.next,r)<0}function splitPolygon(t,r){var o=new Node(t.i,t.x,t.y),a=new Node(r.i,r.x,r.y),h=t.next,d=r.prev;return t.next=r,r.prev=t,o.next=h,h.prev=o,a.next=o,o.prev=a,d.next=a,a.prev=d,a}function insertNode(t,r,o,a){var h=new Node(t,r,o);return a?(h.next=a.next,h.prev=a,a.next.prev=h,a.next=h):(h.prev=h,h.next=h),h}function removeNode(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Node(t,r,o){this.i=t,this.x=r,this.y=o,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(t,r,o,a){for(var h=0,d=r,T=o-a;d<o;d+=a)h+=(t[T]-t[d])*(t[d+1]+t[T+1]),T=d;return h}earcut.deviation=function(t,r,o,a){var h=r&&r.length,d=h?r[0]*o:t.length,T=Math.abs(signedArea(t,0,d,o));if(h)for(var S=0,A=r.length;S<A;S++){var P=r[S]*o,O=S<A-1?r[S+1]*o:t.length;T-=Math.abs(signedArea(t,P,O,o))}var D=0;for(S=0;S<a.length;S+=3){var L=a[S]*o,I=a[S+1]*o,B=a[S+2]*o;D+=Math.abs((t[L]-t[B])*(t[I+1]-t[L+1])-(t[L]-t[I])*(t[B+1]-t[L+1]))}return 0===T&&0===D?0:Math.abs((D-T)/T)},earcut.flatten=function(t){for(var r=t[0][0].length,o={vertices:[],holes:[],dimensions:r},a=0,h=0;h<t.length;h++){for(var d=0;d<t[h].length;d++)for(var T=0;T<r;T++)o.vertices.push(t[h][d][T]);h>0&&(a+=t[h-1].length,o.holes.push(a))}return o},t.exports=earcut},function(t,r){t.exports=function LineStyleCanvas(t,r,o,a){var h=o||r.strokeColor,d=a||r.strokeAlpha,T=(16711680&h)>>>16,S=(65280&h)>>>8,A=255&h;t.strokeStyle="rgba("+T+","+S+","+A+","+d+")",t.lineWidth=r.lineWidth}},function(t,r,o){var a=o(0),h=o(21),d=o(23),T=o(8),S=o(2),A=o(6),P=o(7),O=new a({Extends:d,initialize:function JSONFile(t,r,o,a,T){var O="json";if(P(r)){var D=r;r=S(D,"key"),o=S(D,"url"),a=S(D,"xhrSettings"),O=S(D,"extension",O),T=S(D,"dataKey",T)}var L={type:"json",cache:t.cacheManager.json,extension:O,responseType:"text",key:r,url:o,xhrSettings:a,config:T};d.call(this,t,L),P(o)&&(this.data=T?A(o,T):o,this.state=h.FILE_POPULATED)},onProcess:function onProcess(){if(this.state!==h.FILE_POPULATED){this.state=h.FILE_PROCESSING;try{var t=JSON.parse(this.xhrLoader.responseText)}catch(o){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),o}var r=this.config;this.data="string"==typeof r?A(t,r,t):t}this.onProcessComplete()}});T.register("json",(function(t,r,o,a){if(Array.isArray(t))for(var h=0;h<t.length;h++)this.addFile(new O(this,t[h]));else this.addFile(new O(this,t,r,a,o));return this})),t.exports=O},function(t,r){t.exports={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14}},function(t,r,o){var a=o(158),h=o(26);t.exports=function CalculateFacesWithin(t,r,o,d,T){for(var S=null,A=null,P=null,O=null,D=h(t,r,o,d,null,T),L=0;L<D.length;L++){var I=D[L];I&&(I.collides?(S=a(I.x,I.y-1,!0,T),A=a(I.x,I.y+1,!0,T),P=a(I.x-1,I.y,!0,T),O=a(I.x+1,I.y,!0,T),I.faceTop=!S||!S.collides,I.faceBottom=!A||!A.collides,I.faceLeft=!P||!P.collides,I.faceRight=!O||!O.collides):I.resetFaces())}}},function(t,r,o){var a={};t.exports=a;var h=o(83),d=o(32);a.create=function(t,r){for(var o=[],a=0;a<t.length;a++){var h=t[a],d={x:h.x,y:h.y,index:a,body:r,isInternal:!1,contact:null,offset:null};d.contact={vertex:d,normalImpulse:0,tangentImpulse:0},o.push(d)}return o},a.fromPath=function(t,r){var o=[];return t.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/gi,(function(t,r,a){o.push({x:parseFloat(r),y:parseFloat(a)})})),a.create(o,r)},a.centre=function(t){for(var r,o,d,T=a.area(t,!0),S={x:0,y:0},A=0;A<t.length;A++)d=(A+1)%t.length,r=h.cross(t[A],t[d]),o=h.mult(h.add(t[A],t[d]),r),S=h.add(S,o);return h.div(S,6*T)},a.mean=function(t){for(var r={x:0,y:0},o=0;o<t.length;o++)r.x+=t[o].x,r.y+=t[o].y;return h.div(r,t.length)},a.area=function(t,r){for(var o=0,a=t.length-1,h=0;h<t.length;h++)o+=(t[a].x-t[h].x)*(t[a].y+t[h].y),a=h;return r?o/2:Math.abs(o)/2},a.inertia=function(t,r){for(var o,a,d=0,T=0,S=t,A=0;A<S.length;A++)a=(A+1)%S.length,d+=(o=Math.abs(h.cross(S[a],S[A])))*(h.dot(S[a],S[a])+h.dot(S[a],S[A])+h.dot(S[A],S[A])),T+=o;return r/6*(d/T)},a.translate=function(t,r,o){var a;if(o)for(a=0;a<t.length;a++)t[a].x+=r.x*o,t[a].y+=r.y*o;else for(a=0;a<t.length;a++)t[a].x+=r.x,t[a].y+=r.y;return t},a.rotate=function(t,r,o){if(0!==r){for(var a=Math.cos(r),h=Math.sin(r),d=0;d<t.length;d++){var T=t[d],S=T.x-o.x,A=T.y-o.y;T.x=o.x+(S*a-A*h),T.y=o.y+(S*h+A*a)}return t}},a.contains=function(t,r){for(var o=0;o<t.length;o++){var a=t[o],h=t[(o+1)%t.length];if((r.x-a.x)*(h.y-a.y)+(r.y-a.y)*(a.x-h.x)>0)return!1}return!0},a.scale=function(t,r,o,d){if(1===r&&1===o)return t;var T,S;d=d||a.centre(t);for(var A=0;A<t.length;A++)T=t[A],S=h.sub(T,d),t[A].x=d.x+S.x*r,t[A].y=d.y+S.y*o;return t},a.chamfer=function(t,r,o,a,T){r="number"==typeof r?[r]:r||[8],o=void 0!==o?o:-1,a=a||2,T=T||14;for(var S=[],A=0;A<t.length;A++){var P=t[A-1>=0?A-1:t.length-1],O=t[A],D=t[(A+1)%t.length],L=r[A<r.length?A:r.length-1];if(0!==L){var I=h.normalise({x:O.y-P.y,y:P.x-O.x}),B=h.normalise({x:D.y-O.y,y:O.x-D.x}),N=Math.sqrt(2*Math.pow(L,2)),G=h.mult(d.clone(I),L),Y=h.normalise(h.mult(h.add(I,B),.5)),X=h.sub(O,h.mult(Y,N)),U=o;-1===o&&(U=1.75*Math.pow(L,.32)),(U=d.clamp(U,a,T))%2==1&&(U+=1);for(var z=Math.acos(h.dot(I,B))/U,V=0;V<U;V++)S.push(h.add(h.rotate(G,z*V),X))}else S.push(O)}return S},a.clockwiseSort=function(t){var r=a.mean(t);return t.sort((function(t,o){return h.angle(r,t)-h.angle(r,o)})),t},a.isConvex=function(t){var r,o,a,h,d=0,T=t.length;if(T<3)return null;for(r=0;r<T;r++)if(a=(r+2)%T,h=(t[o=(r+1)%T].x-t[r].x)*(t[a].y-t[o].y),(h-=(t[o].y-t[r].y)*(t[a].x-t[o].x))<0?d|=1:h>0&&(d|=2),3===d)return!1;return 0!==d||null},a.hull=function(t){var r,o,a=[],d=[];for((t=t.slice(0)).sort((function(t,r){var o=t.x-r.x;return 0!==o?o:t.y-r.y})),o=0;o<t.length;o+=1){for(r=t[o];d.length>=2&&h.cross3(d[d.length-2],d[d.length-1],r)<=0;)d.pop();d.push(r)}for(o=t.length-1;o>=0;o-=1){for(r=t[o];a.length>=2&&h.cross3(a[a.length-2],a[a.length-1],r)<=0;)a.pop();a.push(r)}return a.pop(),d.pop(),a.concat(d)}},function(t,r,o){var a=o(0),h=o(66),d=o(300),T=o(301),S=o(56),A=o(170),P=new a({initialize:function Circle(t,r,o){void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=0),this.type=S.CIRCLE,this.x=t,this.y=r,this._radius=o,this._diameter=2*o},contains:function contains(t,r){return h(this,t,r)},getPoint:function getPoint(t,r){return d(this,t,r)},getPoints:function getPoints(t,r,o){return T(this,t,r,o)},getRandomPoint:function getRandomPoint(t){return A(this,t)},setTo:function setTo(t,r,o){return this.x=t,this.y=r,this._radius=o,this._diameter=2*o,this},setEmpty:function setEmpty(){return this._radius=0,this._diameter=0,this},setPosition:function setPosition(t,r){return void 0===r&&(r=t),this.x=t,this.y=r,this},isEmpty:function isEmpty(){return this._radius<=0},radius:{get:function get(){return this._radius},set:function set(t){this._radius=t,this._diameter=2*t}},diameter:{get:function get(){return this._diameter},set:function set(t){this._diameter=t,this._radius=.5*t}},left:{get:function get(){return this.x-this._radius},set:function set(t){this.x=t+this._radius}},right:{get:function get(){return this.x+this._radius},set:function set(t){this.x=t-this._radius}},top:{get:function get(){return this.y-this._radius},set:function set(t){this.y=t+this._radius}},bottom:{get:function get(){return this.y+this._radius},set:function set(t){this.y=t-this._radius}}});t.exports=P},function(t,r){t.exports=function Contains(t,r,o){return t.radius>0&&r>=t.left&&r<=t.right&&o>=t.top&&o<=t.bottom&&(t.x-r)*(t.x-r)+(t.y-o)*(t.y-o)<=t.radius*t.radius}},function(t,r){t.exports=function Length(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))}},function(t,r){t.exports=function Wrap(t,r,o){var a=o-r;return r+((t-r)%a+a)%a}},function(t,r,o){var a=o(0),h=o(39),d=1e-6,T=new a({initialize:function Matrix4(t){this.val=new Float32Array(16),t?this.copy(t):this.identity()},clone:function clone(){return new T(this)},set:function set(t){return this.copy(t)},setValues:function setValues(t,r,o,a,h,d,T,S,A,P,O,D,L,I,B,N){var G=this.val;return G[0]=t,G[1]=r,G[2]=o,G[3]=a,G[4]=h,G[5]=d,G[6]=T,G[7]=S,G[8]=A,G[9]=P,G[10]=O,G[11]=D,G[12]=L,G[13]=I,G[14]=B,G[15]=N,this},copy:function copy(t){var r=t.val;return this.setValues(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])},fromArray:function fromArray(t){return this.setValues(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},zero:function zero(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function transform(t,r,o){var a=S.fromQuat(o).val,h=r.x,d=r.y,T=r.z;return this.setValues(a[0]*h,a[1]*h,a[2]*h,0,a[4]*d,a[5]*d,a[6]*d,0,a[8]*T,a[9]*T,a[10]*T,0,t.x,t.y,t.z,1)},xyz:function xyz(t,r,o){this.identity();var a=this.val;return a[12]=t,a[13]=r,a[14]=o,this},scaling:function scaling(t,r,o){this.zero();var a=this.val;return a[0]=t,a[5]=r,a[10]=o,a[15]=1,this},identity:function identity(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function transpose(){var t=this.val,r=t[1],o=t[2],a=t[3],h=t[6],d=t[7],T=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=r,t[6]=t[9],t[7]=t[13],t[8]=o,t[9]=h,t[11]=t[14],t[12]=a,t[13]=d,t[14]=T,this},getInverse:function getInverse(t){return this.copy(t),this.invert()},invert:function invert(){var t=this.val,r=t[0],o=t[1],a=t[2],h=t[3],d=t[4],T=t[5],S=t[6],A=t[7],P=t[8],O=t[9],D=t[10],L=t[11],I=t[12],B=t[13],N=t[14],G=t[15],Y=r*T-o*d,X=r*S-a*d,U=r*A-h*d,z=o*S-a*T,V=o*A-h*T,W=a*A-h*S,H=P*B-O*I,q=P*N-D*I,Z=P*G-L*I,K=O*N-D*B,J=O*G-L*B,Q=D*G-L*N,$=Y*Q-X*J+U*K+z*Z-V*q+W*H;return $?($=1/$,this.setValues((T*Q-S*J+A*K)*$,(a*J-o*Q-h*K)*$,(B*W-N*V+G*z)*$,(D*V-O*W-L*z)*$,(S*Z-d*Q-A*q)*$,(r*Q-a*Z+h*q)*$,(N*U-I*W-G*X)*$,(P*W-D*U+L*X)*$,(d*J-T*Z+A*H)*$,(o*Z-r*J-h*H)*$,(I*V-B*U+G*Y)*$,(O*U-P*V-L*Y)*$,(T*q-d*K-S*H)*$,(r*K-o*q+a*H)*$,(B*X-I*z-N*Y)*$,(P*z-O*X+D*Y)*$)):this},adjoint:function adjoint(){var t=this.val,r=t[0],o=t[1],a=t[2],h=t[3],d=t[4],T=t[5],S=t[6],A=t[7],P=t[8],O=t[9],D=t[10],L=t[11],I=t[12],B=t[13],N=t[14],G=t[15];return this.setValues(T*(D*G-L*N)-O*(S*G-A*N)+B*(S*L-A*D),-(o*(D*G-L*N)-O*(a*G-h*N)+B*(a*L-h*D)),o*(S*G-A*N)-T*(a*G-h*N)+B*(a*A-h*S),-(o*(S*L-A*D)-T*(a*L-h*D)+O*(a*A-h*S)),-(d*(D*G-L*N)-P*(S*G-A*N)+I*(S*L-A*D)),r*(D*G-L*N)-P*(a*G-h*N)+I*(a*L-h*D),-(r*(S*G-A*N)-d*(a*G-h*N)+I*(a*A-h*S)),r*(S*L-A*D)-d*(a*L-h*D)+P*(a*A-h*S),d*(O*G-L*B)-P*(T*G-A*B)+I*(T*L-A*O),-(r*(O*G-L*B)-P*(o*G-h*B)+I*(o*L-h*O)),r*(T*G-A*B)-d*(o*G-h*B)+I*(o*A-h*T),-(r*(T*L-A*O)-d*(o*L-h*O)+P*(o*A-h*T)),-(d*(O*N-D*B)-P*(T*N-S*B)+I*(T*D-S*O)),r*(O*N-D*B)-P*(o*N-a*B)+I*(o*D-a*O),-(r*(T*N-S*B)-d*(o*N-a*B)+I*(o*S-a*T)),r*(T*D-S*O)-d*(o*D-a*O)+P*(o*S-a*T))},determinant:function determinant(){var t=this.val,r=t[0],o=t[1],a=t[2],h=t[3],d=t[4],T=t[5],S=t[6],A=t[7],P=t[8],O=t[9],D=t[10],L=t[11],I=t[12],B=t[13],N=t[14],G=t[15];return(r*T-o*d)*(D*G-L*N)-(r*S-a*d)*(O*G-L*B)+(r*A-h*d)*(O*N-D*B)+(o*S-a*T)*(P*G-L*I)-(o*A-h*T)*(P*N-D*I)+(a*A-h*S)*(P*B-O*I)},multiply:function multiply(t){var r=this.val,o=r[0],a=r[1],h=r[2],d=r[3],T=r[4],S=r[5],A=r[6],P=r[7],O=r[8],D=r[9],L=r[10],I=r[11],B=r[12],N=r[13],G=r[14],Y=r[15],X=t.val,U=X[0],z=X[1],V=X[2],W=X[3];return r[0]=U*o+z*T+V*O+W*B,r[1]=U*a+z*S+V*D+W*N,r[2]=U*h+z*A+V*L+W*G,r[3]=U*d+z*P+V*I+W*Y,U=X[4],z=X[5],V=X[6],W=X[7],r[4]=U*o+z*T+V*O+W*B,r[5]=U*a+z*S+V*D+W*N,r[6]=U*h+z*A+V*L+W*G,r[7]=U*d+z*P+V*I+W*Y,U=X[8],z=X[9],V=X[10],W=X[11],r[8]=U*o+z*T+V*O+W*B,r[9]=U*a+z*S+V*D+W*N,r[10]=U*h+z*A+V*L+W*G,r[11]=U*d+z*P+V*I+W*Y,U=X[12],z=X[13],V=X[14],W=X[15],r[12]=U*o+z*T+V*O+W*B,r[13]=U*a+z*S+V*D+W*N,r[14]=U*h+z*A+V*L+W*G,r[15]=U*d+z*P+V*I+W*Y,this},multiplyLocal:function multiplyLocal(t){var r=this.val,o=t.val;return this.setValues(r[0]*o[0]+r[1]*o[4]+r[2]*o[8]+r[3]*o[12],r[0]*o[1]+r[1]*o[5]+r[2]*o[9]+r[3]*o[13],r[0]*o[2]+r[1]*o[6]+r[2]*o[10]+r[3]*o[14],r[0]*o[3]+r[1]*o[7]+r[2]*o[11]+r[3]*o[15],r[4]*o[0]+r[5]*o[4]+r[6]*o[8]+r[7]*o[12],r[4]*o[1]+r[5]*o[5]+r[6]*o[9]+r[7]*o[13],r[4]*o[2]+r[5]*o[6]+r[6]*o[10]+r[7]*o[14],r[4]*o[3]+r[5]*o[7]+r[6]*o[11]+r[7]*o[15],r[8]*o[0]+r[9]*o[4]+r[10]*o[8]+r[11]*o[12],r[8]*o[1]+r[9]*o[5]+r[10]*o[9]+r[11]*o[13],r[8]*o[2]+r[9]*o[6]+r[10]*o[10]+r[11]*o[14],r[8]*o[3]+r[9]*o[7]+r[10]*o[11]+r[11]*o[15],r[12]*o[0]+r[13]*o[4]+r[14]*o[8]+r[15]*o[12],r[12]*o[1]+r[13]*o[5]+r[14]*o[9]+r[15]*o[13],r[12]*o[2]+r[13]*o[6]+r[14]*o[10]+r[15]*o[14],r[12]*o[3]+r[13]*o[7]+r[14]*o[11]+r[15]*o[15])},premultiply:function premultiply(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function multiplyMatrices(t,r){var o=t.val,a=r.val,h=o[0],d=o[4],T=o[8],S=o[12],A=o[1],P=o[5],O=o[9],D=o[13],L=o[2],I=o[6],B=o[10],N=o[14],G=o[3],Y=o[7],X=o[11],U=o[15],z=a[0],V=a[4],W=a[8],H=a[12],q=a[1],Z=a[5],K=a[9],J=a[13],Q=a[2],$=a[6],tt=a[10],et=a[14],it=a[3],nt=a[7],rt=a[11],st=a[15];return this.setValues(h*z+d*q+T*Q+S*it,A*z+P*q+O*Q+D*it,L*z+I*q+B*Q+N*it,G*z+Y*q+X*Q+U*it,h*V+d*Z+T*$+S*nt,A*V+P*Z+O*$+D*nt,L*V+I*Z+B*$+N*nt,G*V+Y*Z+X*$+U*nt,h*W+d*K+T*tt+S*rt,A*W+P*K+O*tt+D*rt,L*W+I*K+B*tt+N*rt,G*W+Y*K+X*tt+U*rt,h*H+d*J+T*et+S*st,A*H+P*J+O*et+D*st,L*H+I*J+B*et+N*st,G*H+Y*J+X*et+U*st)},translate:function translate(t){return this.translateXYZ(t.x,t.y,t.z)},translateXYZ:function translateXYZ(t,r,o){var a=this.val;return a[12]=a[0]*t+a[4]*r+a[8]*o+a[12],a[13]=a[1]*t+a[5]*r+a[9]*o+a[13],a[14]=a[2]*t+a[6]*r+a[10]*o+a[14],a[15]=a[3]*t+a[7]*r+a[11]*o+a[15],this},scale:function scale(t){return this.scaleXYZ(t.x,t.y,t.z)},scaleXYZ:function scaleXYZ(t,r,o){var a=this.val;return a[0]=a[0]*t,a[1]=a[1]*t,a[2]=a[2]*t,a[3]=a[3]*t,a[4]=a[4]*r,a[5]=a[5]*r,a[6]=a[6]*r,a[7]=a[7]*r,a[8]=a[8]*o,a[9]=a[9]*o,a[10]=a[10]*o,a[11]=a[11]*o,this},makeRotationAxis:function makeRotationAxis(t,r){var o=Math.cos(r),a=Math.sin(r),h=1-o,d=t.x,T=t.y,S=t.z,A=h*d,P=h*T;return this.setValues(A*d+o,A*T-a*S,A*S+a*T,0,A*T+a*S,P*T+o,P*S-a*d,0,A*S-a*T,P*S+a*d,h*S*S+o,0,0,0,0,1)},rotate:function rotate(t,r){var o=this.val,a=r.x,h=r.y,T=r.z,S=Math.sqrt(a*a+h*h+T*T);if(Math.abs(S)<d)return this;a*=S=1/S,h*=S,T*=S;var A=Math.sin(t),P=Math.cos(t),O=1-P,D=o[0],L=o[1],I=o[2],B=o[3],N=o[4],G=o[5],Y=o[6],X=o[7],U=o[8],z=o[9],V=o[10],W=o[11],H=o[12],q=o[13],Z=o[14],K=o[15],J=a*a*O+P,Q=h*a*O+T*A,$=T*a*O-h*A,tt=a*h*O-T*A,et=h*h*O+P,it=T*h*O+a*A,nt=a*T*O+h*A,rt=h*T*O-a*A,st=T*T*O+P;return this.setValues(D*J+N*Q+U*$,L*J+G*Q+z*$,I*J+Y*Q+V*$,B*J+X*Q+W*$,D*tt+N*et+U*it,L*tt+G*et+z*it,I*tt+Y*et+V*it,B*tt+X*et+W*it,D*nt+N*rt+U*st,L*nt+G*rt+z*st,I*nt+Y*rt+V*st,B*nt+X*rt+W*st,H,q,Z,K)},rotateX:function rotateX(t){var r=this.val,o=Math.sin(t),a=Math.cos(t),h=r[4],d=r[5],T=r[6],S=r[7],A=r[8],P=r[9],O=r[10],D=r[11];return r[4]=h*a+A*o,r[5]=d*a+P*o,r[6]=T*a+O*o,r[7]=S*a+D*o,r[8]=A*a-h*o,r[9]=P*a-d*o,r[10]=O*a-T*o,r[11]=D*a-S*o,this},rotateY:function rotateY(t){var r=this.val,o=Math.sin(t),a=Math.cos(t),h=r[0],d=r[1],T=r[2],S=r[3],A=r[8],P=r[9],O=r[10],D=r[11];return r[0]=h*a-A*o,r[1]=d*a-P*o,r[2]=T*a-O*o,r[3]=S*a-D*o,r[8]=h*o+A*a,r[9]=d*o+P*a,r[10]=T*o+O*a,r[11]=S*o+D*a,this},rotateZ:function rotateZ(t){var r=this.val,o=Math.sin(t),a=Math.cos(t),h=r[0],d=r[1],T=r[2],S=r[3],A=r[4],P=r[5],O=r[6],D=r[7];return r[0]=h*a+A*o,r[1]=d*a+P*o,r[2]=T*a+O*o,r[3]=S*a+D*o,r[4]=A*a-h*o,r[5]=P*a-d*o,r[6]=O*a-T*o,r[7]=D*a-S*o,this},fromRotationTranslation:function fromRotationTranslation(t,r){var o=t.x,a=t.y,h=t.z,d=t.w,T=o+o,S=a+a,A=h+h,P=o*T,O=o*S,D=o*A,L=a*S,I=a*A,B=h*A,N=d*T,G=d*S,Y=d*A;return this.setValues(1-(L+B),O+Y,D-G,0,O-Y,1-(P+B),I+N,0,D+G,I-N,1-(P+L),0,r.x,r.y,r.z,1)},fromQuat:function fromQuat(t){var r=t.x,o=t.y,a=t.z,h=t.w,d=r+r,T=o+o,S=a+a,A=r*d,P=r*T,O=r*S,D=o*T,L=o*S,I=a*S,B=h*d,N=h*T,G=h*S;return this.setValues(1-(D+I),P+G,O-N,0,P-G,1-(A+I),L+B,0,O+N,L-B,1-(A+D),0,0,0,0,1)},frustum:function frustum(t,r,o,a,h,d){var T=1/(r-t),S=1/(a-o),A=1/(h-d);return this.setValues(2*h*T,0,0,0,0,2*h*S,0,0,(r+t)*T,(a+o)*S,(d+h)*A,-1,0,0,d*h*2*A,0)},perspective:function perspective(t,r,o,a){var h=1/Math.tan(t/2),d=1/(o-a);return this.setValues(h/r,0,0,0,0,h,0,0,0,0,(a+o)*d,-1,0,0,2*a*o*d,0)},perspectiveLH:function perspectiveLH(t,r,o,a){return this.setValues(2*o/t,0,0,0,0,2*o/r,0,0,0,0,-a/(o-a),1,0,0,o*a/(o-a),0)},ortho:function ortho(t,r,o,a,h,d){var T=t-r,S=o-a,A=h-d;return T=0===T?T:1/T,S=0===S?S:1/S,A=0===A?A:1/A,this.setValues(-2*T,0,0,0,0,-2*S,0,0,0,0,2*A,0,(t+r)*T,(a+o)*S,(d+h)*A,1)},lookAtRH:function lookAtRH(t,r,o){var a=this.val;return D.subVectors(t,r),0===D.getLengthSquared()&&(D.z=1),D.normalize(),P.crossVectors(o,D),0===P.getLengthSquared()&&(1===Math.abs(o.z)?D.x+=1e-4:D.z+=1e-4,D.normalize(),P.crossVectors(o,D)),P.normalize(),O.crossVectors(D,P),a[0]=P.x,a[1]=P.y,a[2]=P.z,a[4]=O.x,a[5]=O.y,a[6]=O.z,a[8]=D.x,a[9]=D.y,a[10]=D.z,this},lookAt:function lookAt(t,r,o){var a=t.x,h=t.y,T=t.z,S=o.x,A=o.y,P=o.z,O=r.x,D=r.y,L=r.z;if(Math.abs(a-O)<d&&Math.abs(h-D)<d&&Math.abs(T-L)<d)return this.identity();var I=a-O,B=h-D,N=T-L,G=1/Math.sqrt(I*I+B*B+N*N),Y=A*(N*=G)-P*(B*=G),X=P*(I*=G)-S*N,U=S*B-A*I;(G=Math.sqrt(Y*Y+X*X+U*U))?(Y*=G=1/G,X*=G,U*=G):(Y=0,X=0,U=0);var z=B*U-N*X,V=N*Y-I*U,W=I*X-B*Y;return(G=Math.sqrt(z*z+V*V+W*W))?(z*=G=1/G,V*=G,W*=G):(z=0,V=0,W=0),this.setValues(Y,z,I,0,X,V,B,0,U,W,N,0,-(Y*a+X*h+U*T),-(z*a+V*h+W*T),-(I*a+B*h+N*T),1)},yawPitchRoll:function yawPitchRoll(t,r,o){this.zero(),S.zero(),A.zero();var a=this.val,h=S.val,d=A.val,T=Math.sin(o),P=Math.cos(o);return a[10]=1,a[15]=1,a[0]=P,a[1]=T,a[4]=-T,a[5]=P,T=Math.sin(r),P=Math.cos(r),h[0]=1,h[15]=1,h[5]=P,h[10]=P,h[9]=-T,h[6]=T,T=Math.sin(t),P=Math.cos(t),d[5]=1,d[15]=1,d[0]=P,d[2]=-T,d[8]=T,d[10]=P,this.multiplyLocal(S),this.multiplyLocal(A),this},setWorldMatrix:function setWorldMatrix(t,r,o,a,h){return this.yawPitchRoll(t.y,t.x,t.z),S.scaling(o.x,o.y,o.z),A.xyz(r.x,r.y,r.z),this.multiplyLocal(S),this.multiplyLocal(A),a&&this.multiplyLocal(a),h&&this.multiplyLocal(h),this},multiplyToMat4:function multiplyToMat4(t,r){var o=this.val,a=t.val,h=o[0],d=o[1],T=o[2],S=o[3],A=o[4],P=o[5],O=o[6],D=o[7],L=o[8],I=o[9],B=o[10],N=o[11],G=o[12],Y=o[13],X=o[14],U=o[15],z=a[0],V=a[1],W=a[2],H=a[3],q=a[4],Z=a[5],K=a[6],J=a[7],Q=a[8],$=a[9],tt=a[10],et=a[11],it=a[12],nt=a[13],rt=a[14],st=a[15];return r.setValues(z*h+V*A+W*L+H*G,V*d+V*P+W*I+H*Y,W*T+V*O+W*B+H*X,H*S+V*D+W*N+H*U,q*h+Z*A+K*L+J*G,q*d+Z*P+K*I+J*Y,q*T+Z*O+K*B+J*X,q*S+Z*D+K*N+J*U,Q*h+$*A+tt*L+et*G,Q*d+$*P+tt*I+et*Y,Q*T+$*O+tt*B+et*X,Q*S+$*D+tt*N+et*U,it*h+nt*A+rt*L+st*G,it*d+nt*P+rt*I+st*Y,it*T+nt*O+rt*B+st*X,it*S+nt*D+rt*N+st*U)},fromRotationXYTranslation:function fromRotationXYTranslation(t,r,o){var a=r.x,h=r.y,d=r.z,T=Math.sin(t.x),S=Math.cos(t.x),A=Math.sin(t.y),P=Math.cos(t.y),O=a,D=h,L=d,I=-T,B=0-I*A,N=0-S*A,G=I*P,Y=S*P;return o||(O=P*a+A*d,D=B*a+S*h+G*d,L=N*a+T*h+Y*d),this.setValues(P,B,N,0,0,S,T,0,A,G,Y,0,O,D,L,1)},getMaxScaleOnAxis:function getMaxScaleOnAxis(){var t=this.val,r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],o=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],a=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(r,o,a))}}),S=new T,A=new T,P=new h,O=new h,D=new h;t.exports=T},function(t,r,o){t.exports={COMPLETE:o(987),DECODED:o(988),DECODED_ALL:o(989),DESTROY:o(990),DETUNE:o(991),GLOBAL_DETUNE:o(992),GLOBAL_MUTE:o(993),GLOBAL_RATE:o(994),GLOBAL_VOLUME:o(995),LOOP:o(996),LOOPED:o(997),MUTE:o(998),PAN:o(999),PAUSE_ALL:o(1e3),PAUSE:o(1001),PLAY:o(1002),RATE:o(1003),RESUME_ALL:o(1004),RESUME:o(1005),SEEK:o(1006),STOP_ALL:o(1007),STOP:o(1008),UNLOCKED:o(1009),VOLUME:o(1010)}},function(t,r,o){var a=o(0),h=o(21),d=o(23),T=o(8),S=o(2),A=o(7),P=new a({Extends:d,initialize:function ImageFile(t,r,o,a,h){var T,P="png";if(A(r)){var O=r;r=S(O,"key"),o=S(O,"url"),T=S(O,"normalMap"),a=S(O,"xhrSettings"),P=S(O,"extension",P),h=S(O,"frameConfig")}Array.isArray(o)&&(T=o[1],o=o[0]);var D={type:"image",cache:t.textureManager,extension:P,responseType:"blob",key:r,url:o,xhrSettings:a,config:h};if(d.call(this,t,D),T){var L=new ImageFile(t,this.key,T,a,h);L.type="normalMap",this.setLink(L),t.addFile(L)}},onProcess:function onProcess(){this.state=h.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var t=this;this.data.onload=function(){d.revokeObjectURL(t.data),t.onProcessComplete()},this.data.onerror=function(){d.revokeObjectURL(t.data),t.onProcessError()},d.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function addToCache(){var t,r=this.linkFile;r&&r.state===h.FILE_COMPLETE?(t="image"===this.type?this.cache.addImage(this.key,this.data,r.data):this.cache.addImage(r.key,r.data,this.data),this.pendingDestroy(t),r.pendingDestroy(t)):r||(t=this.cache.addImage(this.key,this.data),this.pendingDestroy(t))}});T.register("image",(function(t,r,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new P(this,t[a]));else this.addFile(new P(this,t,r,o));return this})),t.exports=P},function(t,r){t.exports=function SetTileCollision(t,r){r?t.setCollision(!0,!0,!0,!0,!1):t.resetCollision(!1)}},function(t,r,o){var a=o(164),h=o(0),d=o(11),T=o(15),S=o(1065),A=new h({Extends:T,Mixins:[d.Alpha,d.BlendMode,d.Depth,d.Flip,d.GetBounds,d.Mask,d.Origin,d.Pipeline,d.ScrollFactor,d.Size,d.TextureCrop,d.Tint,d.Transform,d.Visible,S],initialize:function Sprite(t,r,o,h,d){T.call(this,t,"Sprite"),this._crop=this.resetCropObject(),this.anims=new a(this),this.setTexture(h,d),this.setPosition(r,o),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function addedToScene(){this.scene.sys.updateList.add(this)},removedFromScene:function removedFromScene(){this.scene.sys.updateList.remove(this)},preUpdate:function preUpdate(t,r){this.anims.update(t,r)},play:function play(t,r){return this.anims.play(t,r)},playReverse:function playReverse(t,r){return this.anims.playReverse(t,r)},playAfterDelay:function playAfterDelay(t,r){return this.anims.playAfterDelay(t,r)},playAfterRepeat:function playAfterRepeat(t,r){return this.anims.playAfterRepeat(t,r)},chain:function chain(t){return this.anims.chain(t)},stop:function stop(){return this.anims.stop()},stopAfterDelay:function stopAfterDelay(t){return this.anims.stopAfterDelay(t)},stopAfterRepeat:function stopAfterRepeat(t){return this.anims.stopAfterRepeat(t)},stopOnFrame:function stopOnFrame(t){return this.anims.stopOnFrame(t)},toJSON:function toJSON(){return d.ToJSON(this)},preDestroy:function preDestroy(){this.anims.destroy(),this.anims=void 0}});t.exports=A},function(t,r){t.exports=function SpliceOne(t,r){if(!(r>=t.length)){for(var o=t.length-1,a=t[r],h=r;h<o;h++)t[h]=t[h+1];return t.length=o,a}}},function(t,r,o){t.exports={ADDED_TO_SCENE:o(643),DESTROY:o(644),REMOVED_FROM_SCENE:o(645),VIDEO_COMPLETE:o(646),VIDEO_CREATED:o(647),VIDEO_ERROR:o(648),VIDEO_LOOP:o(649),VIDEO_PLAY:o(650),VIDEO_SEEKED:o(651),VIDEO_SEEKING:o(652),VIDEO_STOP:o(653),VIDEO_TIMEOUT:o(654),VIDEO_UNLOCKED:o(655)}},function(t,r){t.exports=function SnapFloor(t,r,o,a){return void 0===o&&(o=0),0===r?t:(t-=o,t=r*Math.floor(t/r),a?(o+t)/r:o+t)}},function(t,r){t.exports=function Clone(t){var r={};for(var o in t)Array.isArray(t[o])?r[o]=t[o].slice(0):r[o]=t[o];return r}},function(t,r){t.exports=function SafeRange(t,r,o,a){var h=t.length;if(r<0||r>h||r>=o||o>h||r+o>h){if(a)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},function(t,r){function Compare(t,r){return String(t).localeCompare(r)}function RunPass(t,r,o,a){var h,d,T,S,A,P=t.length,O=0,D=2*o;for(h=0;h<P;h+=D)for(T=(d=h+o)+o,d>P&&(d=P),T>P&&(T=P),S=h,A=d;;)if(S<d&&A<T)r(t[S],t[A])<=0?a[O++]=t[S++]:a[O++]=t[A++];else if(S<d)a[O++]=t[S++];else{if(!(A<T))break;a[O++]=t[A++]}}t.exports=function StableSort(t,r){void 0===r&&(r=Compare);var o=function Process(t,r){var o=t.length;if(o<=1)return t;for(var a=new Array(o),h=1;h<o;h*=2){RunPass(t,r,h,a);var d=t;t=a,a=d}return t}(t,r);return o!==t&&RunPass(o,null,t.length,t),t}},function(t,r,o){var a=o(134),h=o(205);t.exports=function GetEaseFunction(t,r){var o=a.Power0;if("string"==typeof t)if(a.hasOwnProperty(t))o=a[t];else{var d="";t.indexOf(".")&&("in"===(d=t.substr(t.indexOf(".")+1)).toLowerCase()?d="easeIn":"out"===d.toLowerCase()?d="easeOut":"inout"===d.toLowerCase()&&(d="easeInOut")),t=h(t.substr(0,t.indexOf(".")+1)+d),a.hasOwnProperty(t)&&(o=a[t])}else"function"==typeof t?o=t:Array.isArray(t)&&t.length;if(!r)return o;var T=r.slice(0);return T.unshift(0),function(t){return T[0]=t,o.apply(this,T)}}},function(t,r,o){var a=o(12);t.exports=function StrokePathWebGL(t,r,o,h,d){var T=t.strokeTint,S=a.getTintAppendFloatAlpha(r.strokeColor,r.strokeAlpha*o);T.TL=S,T.TR=S,T.BL=S,T.BR=S;var A=r.pathData,P=A.length-1,O=r.lineWidth,D=O/2,L=A[0]-h,I=A[1]-d;r.closePath||(P-=2);for(var B=2;B<P;B+=2){var N=A[B]-h,G=A[B+1]-d;t.batchLine(L,I,N,G,D,D,O,B-2,!!r.closePath&&B===P-1),L=N,I=G}}},function(t,r,o){var a=o(0),h=o(115),d=o(476),T=o(477),S=o(56),A=o(47),P=o(181),O=new a({initialize:function Triangle(t,r,o,a,h,d){void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),void 0===d&&(d=0),this.type=S.TRIANGLE,this.x1=t,this.y1=r,this.x2=o,this.y2=a,this.x3=h,this.y3=d},contains:function contains(t,r){return h(this,t,r)},getPoint:function getPoint(t,r){return d(this,t,r)},getPoints:function getPoints(t,r,o){return T(this,t,r,o)},getRandomPoint:function getRandomPoint(t){return P(this,t)},setTo:function setTo(t,r,o,a,h,d){return void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),void 0===d&&(d=0),this.x1=t,this.y1=r,this.x2=o,this.y2=a,this.x3=h,this.y3=d,this},getLineA:function getLineA(t){return void 0===t&&(t=new A),t.setTo(this.x1,this.y1,this.x2,this.y2),t},getLineB:function getLineB(t){return void 0===t&&(t=new A),t.setTo(this.x2,this.y2,this.x3,this.y3),t},getLineC:function getLineC(t){return void 0===t&&(t=new A),t.setTo(this.x3,this.y3,this.x1,this.y1),t},left:{get:function get(){return Math.min(this.x1,this.x2,this.x3)},set:function set(t){var r=0;r=this.x1<=this.x2&&this.x1<=this.x3?this.x1-t:this.x2<=this.x1&&this.x2<=this.x3?this.x2-t:this.x3-t,this.x1-=r,this.x2-=r,this.x3-=r}},right:{get:function get(){return Math.max(this.x1,this.x2,this.x3)},set:function set(t){var r=0;r=this.x1>=this.x2&&this.x1>=this.x3?this.x1-t:this.x2>=this.x1&&this.x2>=this.x3?this.x2-t:this.x3-t,this.x1-=r,this.x2-=r,this.x3-=r}},top:{get:function get(){return Math.min(this.y1,this.y2,this.y3)},set:function set(t){var r=0;r=this.y1<=this.y2&&this.y1<=this.y3?this.y1-t:this.y2<=this.y1&&this.y2<=this.y3?this.y2-t:this.y3-t,this.y1-=r,this.y2-=r,this.y3-=r}},bottom:{get:function get(){return Math.max(this.y1,this.y2,this.y3)},set:function set(t){var r=0;r=this.y1>=this.y2&&this.y1>=this.y3?this.y1-t:this.y2>=this.y1&&this.y2>=this.y3?this.y2-t:this.y3-t,this.y1-=r,this.y2-=r,this.y3-=r}}});t.exports=O},function(t,r){var o={};t.exports=o,o.create=function(t,r){return{x:t||0,y:r||0}},o.clone=function(t){return{x:t.x,y:t.y}},o.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},o.magnitudeSquared=function(t){return t.x*t.x+t.y*t.y},o.rotate=function(t,r,o){var a=Math.cos(r),h=Math.sin(r);o||(o={});var d=t.x*a-t.y*h;return o.y=t.x*h+t.y*a,o.x=d,o},o.rotateAbout=function(t,r,o,a){var h=Math.cos(r),d=Math.sin(r);a||(a={});var T=o.x+((t.x-o.x)*h-(t.y-o.y)*d);return a.y=o.y+((t.x-o.x)*d+(t.y-o.y)*h),a.x=T,a},o.normalise=function(t){var r=o.magnitude(t);return 0===r?{x:0,y:0}:{x:t.x/r,y:t.y/r}},o.dot=function(t,r){return t.x*r.x+t.y*r.y},o.cross=function(t,r){return t.x*r.y-t.y*r.x},o.cross3=function(t,r,o){return(r.x-t.x)*(o.y-t.y)-(r.y-t.y)*(o.x-t.x)},o.add=function(t,r,o){return o||(o={}),o.x=t.x+r.x,o.y=t.y+r.y,o},o.sub=function(t,r,o){return o||(o={}),o.x=t.x-r.x,o.y=t.y-r.y,o},o.mult=function(t,r){return{x:t.x*r,y:t.y*r}},o.div=function(t,r){return{x:t.x/r,y:t.y/r}},o.perp=function(t,r){return{x:(r=!0===r?-1:1)*-t.y,y:r*t.x}},o.neg=function(t){return{x:-t.x,y:-t.y}},o.angle=function(t,r){return Math.atan2(r.y-t.y,r.x-t.x)},o._temp=[o.create(),o.create(),o.create(),o.create(),o.create(),o.create()]},function(t,r){var o={};t.exports=o,o.create=function(t){var r={min:{x:0,y:0},max:{x:0,y:0}};return t&&o.update(r,t),r},o.update=function(t,r,o){t.min.x=1/0,t.max.x=-1/0,t.min.y=1/0,t.max.y=-1/0;for(var a=0;a<r.length;a++){var h=r[a];h.x>t.max.x&&(t.max.x=h.x),h.x<t.min.x&&(t.min.x=h.x),h.y>t.max.y&&(t.max.y=h.y),h.y<t.min.y&&(t.min.y=h.y)}o&&(o.x>0?t.max.x+=o.x:t.min.x+=o.x,o.y>0?t.max.y+=o.y:t.min.y+=o.y)},o.contains=function(t,r){return r.x>=t.min.x&&r.x<=t.max.x&&r.y>=t.min.y&&r.y<=t.max.y},o.overlaps=function(t,r){return t.min.x<=r.max.x&&t.max.x>=r.min.x&&t.max.y>=r.min.y&&t.min.y<=r.max.y},o.translate=function(t,r){t.min.x+=r.x,t.max.x+=r.x,t.min.y+=r.y,t.max.y+=r.y},o.shift=function(t,r){var o=t.max.x-t.min.x,a=t.max.y-t.min.y;t.min.x=r.x,t.max.x=r.x+o,t.min.y=r.y,t.max.y=r.y+a}},function(t,r,o){var a=o(29),h=o(0),d=o(11),T=o(502),S=new h({Mixins:[d.Alpha,d.Flip,d.Visible],initialize:function Tile(t,r,o,a,h,d,T,S){this.layer=t,this.index=r,this.x=o,this.y=a,this.width=h,this.height=d,this.right,this.bottom,this.baseWidth=void 0!==T?T:h,this.baseHeight=void 0!==S?S:d,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function containsPoint(t,r){return!(t<this.pixelX||r<this.pixelY||t>this.right||r>this.bottom)},copy:function copy(t){return this.index=t.index,this.alpha=t.alpha,this.properties=t.properties,this.visible=t.visible,this.setFlip(t.flipX,t.flipY),this.tint=t.tint,this.rotation=t.rotation,this.collideUp=t.collideUp,this.collideDown=t.collideDown,this.collideLeft=t.collideLeft,this.collideRight=t.collideRight,this.collisionCallback=t.collisionCallback,this.collisionCallbackContext=t.collisionCallbackContext,this},getCollisionGroup:function getCollisionGroup(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function getTileData(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function getLeft(t){var r=this.tilemapLayer;return r?r.tileToWorldX(this.x,t):this.x*this.baseWidth},getRight:function getRight(t){var r=this.tilemapLayer;return r?this.getLeft(t)+this.width*r.scaleX:this.getLeft(t)+this.width},getTop:function getTop(t){var r=this.tilemapLayer;return r?r.tileToWorldY(this.y,t)-(this.height-this.baseHeight)*r.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function getBottom(t){var r=this.tilemapLayer;return r?this.getTop(t)+this.height*r.scaleY:this.getTop(t)+this.height},getBounds:function getBounds(t,r){return void 0===r&&(r=new T),r.x=this.getLeft(),r.y=this.getTop(),r.width=this.getRight()-r.x,r.height=this.getBottom()-r.y,r},getCenterX:function getCenterX(t){return(this.getLeft(t)+this.getRight(t))/2},getCenterY:function getCenterY(t){return(this.getTop(t)+this.getBottom(t))/2},intersects:function intersects(t,r,o,a){return!(o<=this.pixelX||a<=this.pixelY||t>=this.right||r>=this.bottom)},isInteresting:function isInteresting(t,r){return t&&r?this.canCollide||this.hasInterestingFace:t?this.collides:!!r&&this.hasInterestingFace},resetCollision:function resetCollision(t){return void 0===t&&(t=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,t&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},resetFaces:function resetFaces(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function setCollision(t,r,o,a,h){return void 0===r&&(r=t),void 0===o&&(o=t),void 0===a&&(a=t),void 0===h&&(h=!0),this.collideLeft=t,this.collideRight=r,this.collideUp=o,this.collideDown=a,this.faceLeft=t,this.faceRight=r,this.faceTop=o,this.faceBottom=a,h&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},setCollisionCallback:function setCollisionCallback(t,r){return null===t?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=t,this.collisionCallbackContext=r),this},setSize:function setSize(t,r,o,a){return void 0!==t&&(this.width=t),void 0!==r&&(this.height=r),void 0!==o&&(this.baseWidth=o),void 0!==a&&(this.baseHeight=a),this.updatePixelXY(),this},updatePixelXY:function updatePixelXY(){var t=this.layer.orientation;if(t===a.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(t===a.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(t===a.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(t===a.HEXAGONAL){var r=this.layer.hexSideLength,o=(this.baseHeight-r)/2+r;this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*o}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function destroy(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function get(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||void 0!==this.collisionCallback}},collides:{get:function get(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function get(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function get(){var t=this.layer.tilemapLayer;if(t){var r=t.gidMap[this.index];if(r)return r}return null}},tilemapLayer:{get:function get(){return this.layer.tilemapLayer}},tilemap:{get:function get(){var t=this.tilemapLayer;return t?t.tilemap:null}}});t.exports=S},function(t,r,o){var a={};t.exports=a;var h=o(64),d=o(32),T=o(41),S=o(84),A=o(83),P=o(1393);a.rectangle=function(t,r,o,a,S){S=S||{};var A={label:"Rectangle Body",position:{x:t,y:r},vertices:h.fromPath("L 0 0 L "+o+" 0 L "+o+" "+a+" L 0 "+a)};if(S.chamfer){var P=S.chamfer;A.vertices=h.chamfer(A.vertices,P.radius,P.quality,P.qualityMin,P.qualityMax),delete S.chamfer}return T.create(d.extend({},A,S))},a.trapezoid=function(t,r,o,a,S,A){A=A||{};var P,O=o*(S*=.5),D=O+(1-2*S)*o,L=D+O;P=S<.5?"L 0 0 L "+O+" "+-a+" L "+D+" "+-a+" L "+L+" 0":"L 0 0 L "+D+" "+-a+" L "+L+" 0";var I={label:"Trapezoid Body",position:{x:t,y:r},vertices:h.fromPath(P)};if(A.chamfer){var B=A.chamfer;I.vertices=h.chamfer(I.vertices,B.radius,B.quality,B.qualityMin,B.qualityMax),delete A.chamfer}return T.create(d.extend({},I,A))},a.circle=function(t,r,o,h,T){h=h||{};var S={label:"Circle Body",circleRadius:o};T=T||25;var A=Math.ceil(Math.max(10,Math.min(T,o)));return A%2==1&&(A+=1),a.polygon(t,r,A,o,d.extend({},S,h))},a.polygon=function(t,r,o,S,A){if(A=A||{},o<3)return a.circle(t,r,S,A);for(var P=2*Math.PI/o,O="",D=.5*P,L=0;L<o;L+=1){var I=D+L*P,B=Math.cos(I)*S,N=Math.sin(I)*S;O+="L "+B.toFixed(3)+" "+N.toFixed(3)+" "}var G={label:"Polygon Body",position:{x:t,y:r},vertices:h.fromPath(O)};if(A.chamfer){var Y=A.chamfer;G.vertices=h.chamfer(G.vertices,Y.radius,Y.quality,Y.qualityMin,Y.qualityMax),delete A.chamfer}return T.create(d.extend({},G,A))},a.fromVertices=function(t,r,o,S,A,O,D){var L,I,B,N,G,Y;for(S=S||{},I=[],A=void 0!==A&&A,O=void 0!==O?O:.01,D=void 0!==D?D:10,P||d.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),d.isArray(o[0])||(o=[o]),Y=0;Y<o.length;Y+=1)if(N=o[Y],(B=h.isConvex(N))||!P)N=B?h.clockwiseSort(N):h.hull(N),I.push({position:{x:t,y:r},vertices:N});else{var X=N.map((function(t){return[t.x,t.y]}));P.makeCCW(X),!1!==O&&P.removeCollinearPoints(X,O);var U=P.quickDecomp(X);for(G=0;G<U.length;G++){var z=U[G].map((function(t){return{x:t[0],y:t[1]}}));D>0&&h.area(z)<D||I.push({position:h.centre(z),vertices:z})}}for(G=0;G<I.length;G++)I[G]=T.create(d.extend(I[G],S));return A&&a.flagCoincidentParts(I,5),I.length>1?(L=T.create(d.extend({parts:I.slice(0)},S)),T.setPosition(L,{x:t,y:r}),L):I[0]},a.flagCoincidentParts=function(t,r){void 0===r&&(r=5);for(var o=0;o<t.length;o++)for(var a=t[o],h=o+1;h<t.length;h++){var d=t[h];if(S.overlaps(a.bounds,d.bounds))for(var T=a.vertices,P=d.vertices,O=0;O<a.vertices.length;O++)for(var D=0;D<d.vertices.length;D++){var L=A.magnitudeSquared(A.sub(T[(O+1)%T.length],P[D])),I=A.magnitudeSquared(A.sub(T[O],P[(D+1)%P.length]));L<r&&I<r&&(T[O].isInternal=!0,P[D].isInternal=!0)}}return t}},function(t,r){t.exports=function GetCenterX(t){return t.x-t.width*t.originX+.5*t.width}},function(t,r){t.exports=function SetCenterX(t,r){var o=t.width*t.originX;return t.x=r+o-.5*t.width,t}},function(t,r){t.exports=function GetCenterY(t){return t.y-t.height*t.originY+.5*t.height}},function(t,r){t.exports=function SetCenterY(t,r){var o=t.height*t.originY;return t.y=r+o-.5*t.height,t}},function(t,r,o){t.exports={POST_RENDER:o(628),PRE_RENDER:o(629),RENDER:o(630),RESIZE:o(631)}},function(t,r){t.exports={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"}},function(t,r,o){var a=o(74);t.exports=function Remove(t,r,o,h){var d;if(void 0===h&&(h=t),!Array.isArray(r))return-1!==(d=t.indexOf(r))?(a(t,d),o&&o.call(h,r),r):null;for(var T=r.length-1,S=[];T>=0;){var A=r[T];-1!==(d=t.indexOf(A))&&(a(t,d),S.push(A),o&&o.call(h,A)),T--}return S}},function(t,r,o){var a=o(0),h=o(199),d=o(10),T=o(3),S=new a({initialize:function Curve(t){this.type=t,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new T,this._tmpVec2B=new T},draw:function draw(t,r){return void 0===r&&(r=32),t.strokePoints(this.getPoints(r))},getBounds:function getBounds(t,r){t||(t=new d),void 0===r&&(r=16);var o=this.getLength();r>o&&(r=o/2);var a=Math.max(1,Math.round(o/r));return h(this.getSpacedPoints(a),t)},getDistancePoints:function getDistancePoints(t){var r=this.getLength(),o=Math.max(1,r/t);return this.getSpacedPoints(o)},getEndPoint:function getEndPoint(t){return void 0===t&&(t=new T),this.getPointAt(1,t)},getLength:function getLength(){var t=this.getLengths();return t[t.length-1]},getLengths:function getLengths(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var r,o=[],a=this.getPoint(0,this._tmpVec2A),h=0;o.push(0);for(var d=1;d<=t;d++)h+=(r=this.getPoint(d/t,this._tmpVec2B)).distance(a),o.push(h),a.copy(r);return this.cacheArcLengths=o,o},getPointAt:function getPointAt(t,r){var o=this.getUtoTmapping(t);return this.getPoint(o,r)},getPoints:function getPoints(t,r,o){void 0===o&&(o=[]),t||(t=r?this.getLength()/r:this.defaultDivisions);for(var a=0;a<=t;a++)o.push(this.getPoint(a/t));return o},getRandomPoint:function getRandomPoint(t){return void 0===t&&(t=new T),this.getPoint(Math.random(),t)},getSpacedPoints:function getSpacedPoints(t,r,o){void 0===o&&(o=[]),t||(t=r?this.getLength()/r:this.defaultDivisions);for(var a=0;a<=t;a++){var h=this.getUtoTmapping(a/t,null,t);o.push(this.getPoint(h))}return o},getStartPoint:function getStartPoint(t){return void 0===t&&(t=new T),this.getPointAt(0,t)},getTangent:function getTangent(t,r){void 0===r&&(r=new T);var o=1e-4,a=t-o,h=t+o;return a<0&&(a=0),h>1&&(h=1),this.getPoint(a,this._tmpVec2A),this.getPoint(h,r),r.subtract(this._tmpVec2A).normalize()},getTangentAt:function getTangentAt(t,r){var o=this.getUtoTmapping(t);return this.getTangent(o,r)},getTFromDistance:function getTFromDistance(t,r){return t<=0?0:this.getUtoTmapping(0,t,r)},getUtoTmapping:function getUtoTmapping(t,r,o){var a,h=this.getLengths(o),d=0,T=h.length;a=r?Math.min(r,h[T-1]):t*h[T-1];for(var S,A=0,P=T-1;A<=P;)if((S=h[d=Math.floor(A+(P-A)/2)]-a)<0)A=d+1;else{if(!(S>0)){P=d;break}P=d-1}if(h[d=P]===a)return d/(T-1);var O=h[d];return(d+(a-O)/(h[d+1]-O))/(T-1)},updateArcLengths:function updateArcLengths(){this.needsUpdate=!0,this.getLengths()}});t.exports=S},function(t,r,o){t.exports={ADD:o(968),COMPLETE:o(969),FILE_COMPLETE:o(970),FILE_KEY_COMPLETE:o(971),FILE_LOAD_ERROR:o(972),FILE_LOAD:o(973),FILE_PROGRESS:o(974),POST_PROCESS:o(975),PROGRESS:o(976),START:o(977)}},function(t,r,o){var a=o(4);t.exports=function LineToLine(t,r,o){void 0===o&&(o=new a);var h=t.x1,d=t.y1,T=t.x2,S=t.y2,A=r.x1,P=r.y1,O=r.x2,D=r.y2,L=(D-P)*(T-h)-(O-A)*(S-d);if(0===L)return!1;var I=((O-A)*(d-P)-(D-P)*(h-A))/L,B=((T-h)*(d-P)-(S-d)*(h-A))/L;return I>=0&&I<=1&&B>=0&&B<=1&&(o.x=h+I*(T-h),o.y=d+I*(S-d),!0)}},function(t,r){t.exports=function Angle(t){return Math.atan2(t.y2-t.y1,t.x2-t.x1)}},function(t,r,o){var a=o(18);t.exports=function FromPercent(t,r,o){return(o-r)*(t=a(t,0,1))+r}},function(t,r){t.exports=function GetBoolean(t,r,o){return t&&t.hasOwnProperty(r)?t[r]:o}},function(t,r){t.exports={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26}},function(t,r,o){var a=o(0),h=o(315),d=new a({initialize:function DataManager(t,r){this.parent=t,this.events=r,r||(this.events=t.events?t.events:t),this.list={},this.values={},this._frozen=!1,!t.hasOwnProperty("sys")&&this.events&&this.events.once(h.DESTROY,this.destroy,this)},get:function get(t){var r=this.list;if(Array.isArray(t)){for(var o=[],a=0;a<t.length;a++)o.push(r[t[a]]);return o}return r[t]},getAll:function getAll(){var t={};for(var r in this.list)this.list.hasOwnProperty(r)&&(t[r]=this.list[r]);return t},query:function query(t){var r={};for(var o in this.list)this.list.hasOwnProperty(o)&&o.match(t)&&(r[o]=this.list[o]);return r},set:function set(t,r){if(this._frozen)return this;if("string"==typeof t)return this.setValue(t,r);for(var o in t)this.setValue(o,t[o]);return this},inc:function inc(t,r){if(this._frozen)return this;void 0===r&&(r=1);var o=this.get(t);return void 0===o&&(o=0),this.set(t,o+r),this},toggle:function toggle(t){return this._frozen||this.set(t,!this.get(t)),this},setValue:function setValue(t,r){if(this._frozen)return this;if(this.has(t))this.values[t]=r;else{var o=this,a=this.list,d=this.events,T=this.parent;Object.defineProperty(this.values,t,{enumerable:!0,configurable:!0,get:function get(){return a[t]},set:function set(r){if(!o._frozen){var S=a[t];a[t]=r,d.emit(h.CHANGE_DATA,T,t,r,S),d.emit(h.CHANGE_DATA_KEY+t,T,r,S)}}}),a[t]=r,d.emit(h.SET_DATA,T,t,r)}return this},each:function each(t,r){for(var o=[this.parent,null,void 0],a=1;a<arguments.length;a++)o.push(arguments[a]);for(var h in this.list)o[1]=h,o[2]=this.list[h],t.apply(r,o);return this},merge:function merge(t,r){for(var o in void 0===r&&(r=!0),t)t.hasOwnProperty(o)&&(r||!r&&!this.has(o))&&this.setValue(o,t[o]);return this},remove:function remove(t){if(this._frozen)return this;if(!Array.isArray(t))return this.removeValue(t);for(var r=0;r<t.length;r++)this.removeValue(t[r]);return this},removeValue:function removeValue(t){if(this.has(t)){var r=this.list[t];delete this.list[t],delete this.values[t],this.events.emit(h.REMOVE_DATA,this.parent,t,r)}return this},pop:function pop(t){var r=void 0;return!this._frozen&&this.has(t)&&(r=this.list[t],delete this.list[t],delete this.values[t],this.events.emit(h.REMOVE_DATA,this.parent,t,r)),r},has:function has(t){return this.list.hasOwnProperty(t)},setFreeze:function setFreeze(t){return this._frozen=t,this},reset:function reset(){for(var t in this.list)delete this.list[t],delete this.values[t];return this._frozen=!1,this},destroy:function destroy(){this.reset(),this.events.off(h.CHANGE_DATA),this.events.off(h.SET_DATA),this.events.off(h.REMOVE_DATA),this.parent=null},freeze:{get:function get(){return this._frozen},set:function set(t){this._frozen=!!t}},count:{get:function get(){var t=0;for(var r in this.list)void 0!==this.list[r]&&t++;return t}}});t.exports=d},function(t,r,o){var a=new(o(0))({initialize:function Map(t){if(this.entries={},this.size=0,Array.isArray(t))for(var r=0;r<t.length;r++)this.set(t[r][0],t[r][1])},set:function set(t,r){return this.has(t)||this.size++,this.entries[t]=r,this},get:function get(t){if(this.has(t))return this.entries[t]},getArray:function getArray(){var t=[],r=this.entries;for(var o in r)t.push(r[o]);return t},has:function has(t){return this.entries.hasOwnProperty(t)},delete:function _delete(t){return this.has(t)&&(delete this.entries[t],this.size--),this},clear:function clear(){return Object.keys(this.entries).forEach((function(t){delete this.entries[t]}),this),this.size=0,this},keys:function keys(){return Object.keys(this.entries)},values:function values(){var t=[],r=this.entries;for(var o in r)t.push(r[o]);return t},dump:function dump(){var t=this.entries;for(var r in console.group("Map"),t)console.log(r,t[r]);console.groupEnd()},each:function each(t){var r=this.entries;for(var o in r)if(!1===t(o,r[o]))break;return this},contains:function contains(t){var r=this.entries;for(var o in r)if(r[o]===t)return!0;return!1},merge:function merge(t,r){void 0===r&&(r=!1);var o=this.entries,a=t.entries;for(var h in a)o.hasOwnProperty(h)&&r?o[h]=a[h]:this.set(h,a[h]);return this}});t.exports=a},function(t,r){t.exports=function GetColor(t,r,o){return t<<16|r<<8|o}},function(t,r,o){t.exports={ENTER_FULLSCREEN:o(800),FULLSCREEN_FAILED:o(801),FULLSCREEN_UNSUPPORTED:o(802),LEAVE_FULLSCREEN:o(803),ORIENTATION_CHANGE:o(804),RESIZE:o(805)}},function(t,r,o){(function(r){var o={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};t.exports=function init(){if("function"==typeof importScripts)return o;var t=navigator.userAgent;/Windows/.test(t)?o.windows=!0:/Mac OS/.test(t)&&!/like Mac OS/.test(t)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(o.iOS=!0,o.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),o.iOSVersion=parseInt(RegExp.$1,10)):o.macOS=!0:/Android/.test(t)?o.android=!0:/Linux/.test(t)?o.linux=!0:/iP[ao]d|iPhone/i.test(t)?(o.iOS=!0,navigator.appVersion.match(/OS (\d+)/),o.iOSVersion=parseInt(RegExp.$1,10),o.iPhone=-1!==t.toLowerCase().indexOf("iphone"),o.iPad=-1!==t.toLowerCase().indexOf("ipad")):/Kindle/.test(t)||/\bKF[A-Z][A-Z]+/.test(t)||/Silk.*Mobile Safari/.test(t)?o.kindle=!0:/CrOS/.test(t)&&(o.chromeOS=!0),(/Windows Phone/i.test(t)||/IEMobile/i.test(t))&&(o.android=!1,o.iOS=!1,o.macOS=!1,o.windows=!0,o.windowsPhone=!0);var a=/Silk/.test(t);return(o.windows||o.macOS||o.linux&&!a||o.chromeOS)&&(o.desktop=!0),(o.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(o.desktop=!1),navigator.standalone&&(o.webApp=!0),"function"!=typeof importScripts&&(void 0!==window.cordova&&(o.cordova=!0),void 0!==window.ejecta&&(o.ejecta=!0)),void 0!==r&&r.versions&&r.versions.node&&(o.node=!0),o.node&&"object"===_typeof(r.versions)&&(o.nodeWebkit=!!r.versions["node-webkit"],o.electron=!!r.versions.electron),/Crosswalk/.test(t)&&(o.crosswalk=!0),o.pixelRatio=window.devicePixelRatio||1,o}()}).call(this,o(807))},function(t,r,o){t.exports={ADD:o(861),ERROR:o(862),LOAD:o(863),READY:o(864),REMOVE:o(865)}},function(t,r){t.exports={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}}},function(t,r,o){var a=o(0),h=o(59),d=o(2),T=o(878),S=o(879),A=o(25),P=o(12),O=o(107),D=o(58),L=new a({Extends:D,initialize:function MultiPipeline(t){var r=t.game.renderer,o=d(t,"fragShader",T);t.fragShader=P.parseFragmentShaderMaxTextures(o,r.maxTextures),t.vertShader=d(t,"vertShader",S),t.attributes=d(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:O.UNSIGNED_BYTE,normalized:!0}]),D.call(this,t),this._tempMatrix1=new A,this._tempMatrix2=new A,this._tempMatrix3=new A,this.calcMatrix=new A,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function boot(){D.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function batchSprite(t,r,o){this.manager.set(this,t);var a=this._tempMatrix1,h=this._tempMatrix2,d=this._tempMatrix3,T=t.frame,S=T.glTexture,A=T.u0,O=T.v0,D=T.u1,L=T.v1,I=T.x,B=T.y,N=T.cutWidth,G=T.cutHeight,Y=T.customPivot,X=t.displayOriginX,U=t.displayOriginY,z=-X+I,V=-U+B;if(t.isCropped){var W=t._crop;W.flipX===t.flipX&&W.flipY===t.flipY||T.updateCropUVs(W,t.flipX,t.flipY),A=W.u0,O=W.v0,D=W.u1,L=W.v1,N=W.width,G=W.height,z=-X+(I=W.x),V=-U+(B=W.y)}var H=1,q=1;t.flipX&&(Y||(z+=-T.realWidth+2*X),H=-1),(t.flipY||T.source.isGLTexture&&!S.flipY)&&(Y||(V+=-T.realHeight+2*U),q=-1),h.applyITRS(t.x,t.y,t.rotation,t.scaleX*H,t.scaleY*q),a.copyFrom(r.matrix),o?(a.multiplyWithOffset(o,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY),h.e=t.x,h.f=t.y):(h.e-=r.scrollX*t.scrollFactorX,h.f-=r.scrollY*t.scrollFactorY),a.multiply(h,d);var Z=z+N,K=V+G,J=r.roundPixels,Q=d.getXRound(z,V,J),$=d.getYRound(z,V,J),tt=d.getXRound(z,K,J),et=d.getYRound(z,K,J),it=d.getXRound(Z,K,J),nt=d.getYRound(Z,K,J),rt=d.getXRound(Z,V,J),st=d.getYRound(Z,V,J),ot=P.getTintAppendFloatAlpha,at=r.alpha,ht=ot(t.tintTopLeft,at*t._alphaTL),lt=ot(t.tintTopRight,at*t._alphaTR),ut=ot(t.tintBottomLeft,at*t._alphaBL),ct=ot(t.tintBottomRight,at*t._alphaBR);this.shouldFlush(6)&&this.flush();var dt=this.setGameObject(t,T);this.manager.preBatch(t),this.batchQuad(t,Q,$,tt,et,it,nt,rt,st,A,O,D,L,ht,lt,ut,ct,t.tintFill,S,dt),this.manager.postBatch(t)},batchTexture:function batchTexture(t,r,o,a,h,d,T,S,A,P,O,D,L,I,B,N,G,Y,X,U,z,V,W,H,q,Z,K,J,Q,$,tt,et){this.manager.set(this,t);var it=this._tempMatrix1,nt=this._tempMatrix2,rt=this._tempMatrix3,st=Y/o+K,ot=X/a+J,at=(Y+U)/o+K,ht=(X+z)/a+J,lt=T,ut=S,ct=-N,dt=-G;if(t.isCropped){var ft=t._crop,pt=ft.width,gt=ft.height;lt=pt,ut=gt,T=pt,S=gt;var vt=Y=ft.x,mt=X=ft.y;D&&(vt=U-ft.x-pt),L&&(mt=z-ft.y-gt),st=vt/o+K,ot=mt/a+J,at=(vt+pt)/o+K,ht=(mt+gt)/a+J,ct=-N+Y,dt=-G+X}D&&(lt*=-1,ct+=T),(L^=!tt&&r.isRenderTexture?1:0)&&(ut*=-1,dt+=S);var yt=ct+lt,xt=dt+ut;nt.applyITRS(h,d,O,A,P),it.copyFrom(Q.matrix),$?(it.multiplyWithOffset($,-Q.scrollX*I,-Q.scrollY*B),nt.e=h,nt.f=d):(nt.e-=Q.scrollX*I,nt.f-=Q.scrollY*B),it.multiply(nt,rt);var Tt=Q.roundPixels,bt=rt.getXRound(ct,dt,Tt),wt=rt.getYRound(ct,dt,Tt),St=rt.getXRound(ct,xt,Tt),Ct=rt.getYRound(ct,xt,Tt),Et=rt.getXRound(yt,xt,Tt),Mt=rt.getYRound(yt,xt,Tt),_t=rt.getXRound(yt,dt,Tt),Pt=rt.getYRound(yt,dt,Tt);void 0===et&&(et=this.renderer.setTexture2D(r)),t&&this.manager.preBatch(t),this.batchQuad(t,bt,wt,St,Ct,Et,Mt,_t,Pt,st,ot,at,ht,V,W,H,q,Z,r,et),t&&this.manager.postBatch(t)},batchTextureFrame:function batchTextureFrame(t,r,o,a,h,d,T){this.manager.set(this);var S=this._tempMatrix1.copyFrom(d),A=this._tempMatrix2,O=r+t.width,D=o+t.height;T?S.multiply(T,A):A=S;var L=A.getX(r,o),I=A.getY(r,o),B=A.getX(r,D),N=A.getY(r,D),G=A.getX(O,D),Y=A.getY(O,D),X=A.getX(O,o),U=A.getY(O,o),z=this.renderer.setTextureSource(t.source);a=P.getTintAppendFloatAlpha(a,h),this.batchQuad(null,L,I,B,N,G,Y,X,U,t.u0,t.v0,t.u1,t.v1,a,a,a,a,0,t.glTexture,z)},batchFillRect:function batchFillRect(t,r,o,a,h,d){this.renderer.pipelines.set(this);var T=this.calcMatrix;d&&d.multiply(h,T);var S=t+o,A=r+a,P=T.getX(t,r),O=T.getY(t,r),D=T.getX(t,A),L=T.getY(t,A),I=T.getX(S,A),B=T.getY(S,A),N=T.getX(S,r),G=T.getY(S,r),Y=this.fillTint;this.batchQuad(null,P,O,D,L,I,B,N,G,0,0,1,1,Y.TL,Y.TR,Y.BL,Y.BR,2)},batchFillTriangle:function batchFillTriangle(t,r,o,a,h,d,T,S){this.renderer.pipelines.set(this);var A=this.calcMatrix;S&&S.multiply(T,A);var P=A.getX(t,r),O=A.getY(t,r),D=A.getX(o,a),L=A.getY(o,a),I=A.getX(h,d),B=A.getY(h,d),N=this.fillTint;this.batchTri(null,P,O,D,L,I,B,0,0,1,1,N.TL,N.TR,N.BL,2)},batchStrokeTriangle:function batchStrokeTriangle(t,r,o,a,h,d,T,S,A){var P=this.tempTriangle;P[0].x=t,P[0].y=r,P[0].width=T,P[1].x=o,P[1].y=a,P[1].width=T,P[2].x=h,P[2].y=d,P[2].width=T,P[3].x=t,P[3].y=r,P[3].width=T,this.batchStrokePath(P,T,!1,S,A)},batchFillPath:function batchFillPath(t,r,o){this.renderer.pipelines.set(this);var a=this.calcMatrix;o&&o.multiply(r,a);for(var d,T,S=t.length,A=this.polygonCache,P=this.fillTint.TL,O=this.fillTint.TR,D=this.fillTint.BL,L=0;L<S;++L)T=t[L],A.push(T.x,T.y);S=(d=h(A)).length;for(var I=0;I<S;I+=3){var B=2*d[I+0],N=2*d[I+1],G=2*d[I+2],Y=A[B+0],X=A[B+1],U=A[N+0],z=A[N+1],V=A[G+0],W=A[G+1],H=a.getX(Y,X),q=a.getY(Y,X),Z=a.getX(U,z),K=a.getY(U,z),J=a.getX(V,W),Q=a.getY(V,W);this.batchTri(null,H,q,Z,K,J,Q,0,0,1,1,P,O,D,2)}A.length=0},batchStrokePath:function batchStrokePath(t,r,o,a,h){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var d=t.length-1,T=0;T<d;T++){var S=t[T],A=t[T+1];this.batchLine(S.x,S.y,A.x,A.y,S.width/2,A.width/2,r,T,!o&&T===d-1,a,h)}},batchLine:function batchLine(t,r,o,a,h,d,T,S,A,P,O){this.renderer.pipelines.set(this);var D=this.calcMatrix;O&&O.multiply(P,D);var L=o-t,I=a-r,B=Math.sqrt(L*L+I*I),N=h*(a-r)/B,G=h*(t-o)/B,Y=d*(a-r)/B,X=d*(t-o)/B,U=o-Y,z=a-X,V=t-N,W=r-G,H=o+Y,q=a+X,Z=t+N,K=r+G,J=D.getX(U,z),Q=D.getY(U,z),$=D.getX(V,W),tt=D.getY(V,W),et=D.getX(H,q),it=D.getY(H,q),nt=D.getX(Z,K),rt=D.getY(Z,K),st=this.strokeTint,ot=st.TL,at=st.TR,ht=st.BL,lt=st.BR;if(this.batchQuad(null,nt,rt,$,tt,J,Q,et,it,0,0,1,1,ot,at,ht,lt,2),!(T<=2)){var ut=this.prevQuad,ct=this.firstQuad;S>0&&ut[4]?this.batchQuad(null,nt,rt,$,tt,ut[0],ut[1],ut[2],ut[3],0,0,1,1,ot,at,ht,lt,2):(ct[0]=nt,ct[1]=rt,ct[2]=$,ct[3]=tt,ct[4]=1),A&&ct[4]?this.batchQuad(null,J,Q,et,it,ct[0],ct[1],ct[2],ct[3],0,0,1,1,ot,at,ht,lt,2):(ut[0]=J,ut[1]=Q,ut[2]=et,ut[3]=it,ut[4]=1)}}});t.exports=L},function(t,r,o){var a=o(0),h=o(18),d=o(17),T=new a({initialize:function Frame(t,r,o,a,h,d,T){this.texture=t,this.name=r,this.source=t.source[o],this.sourceIndex=o,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(d,T,a,h)},setSize:function setSize(t,r,o,a){void 0===o&&(o=0),void 0===a&&(a=0),this.cutX=o,this.cutY=a,this.cutWidth=t,this.cutHeight=r,this.width=t,this.height=r,this.halfWidth=Math.floor(.5*t),this.halfHeight=Math.floor(.5*r),this.centerX=Math.floor(t/2),this.centerY=Math.floor(r/2);var h=this.data,d=h.cut;d.x=o,d.y=a,d.w=t,d.h=r,d.r=o+t,d.b=a+r,h.sourceSize.w=t,h.sourceSize.h=r,h.spriteSourceSize.w=t,h.spriteSourceSize.h=r,h.radius=.5*Math.sqrt(t*t+r*r);var T=h.drawImage;return T.x=o,T.y=a,T.width=t,T.height=r,this.updateUVs()},setTrim:function setTrim(t,r,o,a,h,d){var T=this.data,S=T.spriteSourceSize;return T.trim=!0,T.sourceSize.w=t,T.sourceSize.h=r,S.x=o,S.y=a,S.w=h,S.h=d,S.r=o+h,S.b=a+d,this.x=o,this.y=a,this.width=h,this.height=d,this.halfWidth=.5*h,this.halfHeight=.5*d,this.centerX=Math.floor(h/2),this.centerY=Math.floor(d/2),this.updateUVs()},setCropUVs:function setCropUVs(t,r,o,a,d,T,S){var A=this.cutX,P=this.cutY,O=this.cutWidth,D=this.cutHeight,L=this.realWidth,I=this.realHeight,B=A+(r=h(r,0,L)),N=P+(o=h(o,0,I)),G=a=h(a,0,L-r),Y=d=h(d,0,I-o),X=this.data;if(X.trim){var U=X.spriteSourceSize,z=r+(a=h(a,0,O-r)),V=o+(d=h(d,0,D-o));if(U.r<r||U.b<o||U.x>z||U.y>V)B=0,N=0,G=0,Y=0;else{var W=Math.max(U.x,r),H=Math.max(U.y,o),q=Math.min(U.r,z)-W,Z=Math.min(U.b,V)-H;G=q,Y=Z,B=T?A+(O-(W-U.x)-q):A+(W-U.x),N=S?P+(D-(H-U.y)-Z):P+(H-U.y),r=W,o=H,a=q,d=Z}}else T&&(B=A+(O-r-a)),S&&(N=P+(D-o-d));var K=this.source.width,J=this.source.height;return t.u0=Math.max(0,B/K),t.v0=Math.max(0,N/J),t.u1=Math.min(1,(B+G)/K),t.v1=Math.min(1,(N+Y)/J),t.x=r,t.y=o,t.cx=B,t.cy=N,t.cw=G,t.ch=Y,t.width=a,t.height=d,t.flipX=T,t.flipY=S,t},updateCropUVs:function updateCropUVs(t,r,o){return this.setCropUVs(t,t.x,t.y,t.width,t.height,r,o)},setUVs:function setUVs(t,r,o,a,h,d){var T=this.data.drawImage;return T.width=t,T.height=r,this.u0=o,this.v0=a,this.u1=h,this.v1=d,this},updateUVs:function updateUVs(){var t=this.cutX,r=this.cutY,o=this.cutWidth,a=this.cutHeight,h=this.data.drawImage;h.width=o,h.height=a;var d=this.source.width,T=this.source.height;return this.u0=t/d,this.v0=r/T,this.u1=(t+o)/d,this.v1=(r+a)/T,this},updateUVsInverted:function updateUVsInverted(){var t=this.source.width,r=this.source.height;return this.u0=(this.cutX+this.cutHeight)/t,this.v0=this.cutY/r,this.u1=this.cutX/t,this.v1=(this.cutY+this.cutWidth)/r,this},clone:function clone(){var clone=new T(this.texture,this.name,this.sourceIndex);return clone.cutX=this.cutX,clone.cutY=this.cutY,clone.cutWidth=this.cutWidth,clone.cutHeight=this.cutHeight,clone.x=this.x,clone.y=this.y,clone.width=this.width,clone.height=this.height,clone.halfWidth=this.halfWidth,clone.halfHeight=this.halfHeight,clone.centerX=this.centerX,clone.centerY=this.centerY,clone.rotated=this.rotated,clone.data=d(!0,clone.data,this.data),clone.updateUVs(),clone},destroy:function destroy(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function get(){return this.data.sourceSize.w}},realHeight:{get:function get(){return this.data.sourceSize.h}},radius:{get:function get(){return this.data.radius}},trimmed:{get:function get(){return this.data.trim}},canvasData:{get:function get(){return this.data.drawImage}}});t.exports=T},function(t,r,o){var a=o(208),h=o(0),d=o(1),T=o(79),S=new h({initialize:function List(t){this.parent=t,this.list=[],this.position=0,this.addCallback=d,this.removeCallback=d,this._sortKey=""},add:function add(t,r){return r?a.Add(this.list,t):a.Add(this.list,t,0,this.addCallback,this)},addAt:function addAt(t,r,o){return o?a.AddAt(this.list,t,r):a.AddAt(this.list,t,r,0,this.addCallback,this)},getAt:function getAt(t){return this.list[t]},getIndex:function getIndex(t){return this.list.indexOf(t)},sort:function sort(t,r){return t?(void 0===r&&(r=function handler(r,o){return r[t]-o[t]}),T(this.list,r),this):this},getByName:function getByName(t){return a.GetFirst(this.list,"name",t)},getRandom:function getRandom(t,r){return a.GetRandom(this.list,t,r)},getFirst:function getFirst(t,r,o,h){return a.GetFirst(this.list,t,r,o,h)},getAll:function getAll(t,r,o,h){return a.GetAll(this.list,t,r,o,h)},count:function count(t,r){return a.CountAllMatching(this.list,t,r)},swap:function swap(t,r){a.Swap(this.list,t,r)},moveTo:function moveTo(t,r){return a.MoveTo(this.list,t,r)},moveAbove:function moveAbove(t,r){return a.MoveAbove(this.list,t,r)},moveBelow:function moveBelow(t,r){return a.MoveBelow(this.list,t,r)},remove:function remove(t,r){return r?a.Remove(this.list,t):a.Remove(this.list,t,this.removeCallback,this)},removeAt:function removeAt(t,r){return r?a.RemoveAt(this.list,t):a.RemoveAt(this.list,t,this.removeCallback,this)},removeBetween:function removeBetween(t,r,o){return o?a.RemoveBetween(this.list,t,r):a.RemoveBetween(this.list,t,r,this.removeCallback,this)},removeAll:function removeAll(t){for(var r=this.list.length;r--;)this.remove(this.list[r],t);return this},bringToTop:function bringToTop(t){return a.BringToTop(this.list,t)},sendToBack:function sendToBack(t){return a.SendToBack(this.list,t)},moveUp:function moveUp(t){return a.MoveUp(this.list,t),t},moveDown:function moveDown(t){return a.MoveDown(this.list,t),t},reverse:function reverse(){return this.list.reverse(),this},shuffle:function shuffle(){return a.Shuffle(this.list),this},replace:function replace(t,r){return a.Replace(this.list,t,r)},exists:function exists(t){return this.list.indexOf(t)>-1},setAll:function setAll(t,r,o,h){return a.SetAll(this.list,t,r,o,h),this},each:function each(t,r){for(var o=[null],a=2;a<arguments.length;a++)o.push(arguments[a]);for(a=0;a<this.list.length;a++)o[0]=this.list[a],t.apply(r,o)},shutdown:function shutdown(){this.removeAll(),this.list=[]},destroy:function destroy(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function get(){return this.list.length}},first:{get:function get(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function get(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function get(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function get(){return this.position>0?(this.position--,this.list[this.position]):null}}});t.exports=S},function(t,r,o){var a=o(0),h=o(112),d=o(445),T=o(446),S=o(56),A=o(180),P=new a({initialize:function Ellipse(t,r,o,a){void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),this.type=S.ELLIPSE,this.x=t,this.y=r,this.width=o,this.height=a},contains:function contains(t,r){return h(this,t,r)},getPoint:function getPoint(t,r){return d(this,t,r)},getPoints:function getPoints(t,r,o){return T(this,t,r,o)},getRandomPoint:function getRandomPoint(t){return A(this,t)},setTo:function setTo(t,r,o,a){return this.x=t,this.y=r,this.width=o,this.height=a,this},setEmpty:function setEmpty(){return this.width=0,this.height=0,this},setPosition:function setPosition(t,r){return void 0===r&&(r=t),this.x=t,this.y=r,this},setSize:function setSize(t,r){return void 0===r&&(r=t),this.width=t,this.height=r,this},isEmpty:function isEmpty(){return this.width<=0||this.height<=0},getMinorRadius:function getMinorRadius(){return Math.min(this.width,this.height)/2},getMajorRadius:function getMajorRadius(){return Math.max(this.width,this.height)/2},left:{get:function get(){return this.x-this.width/2},set:function set(t){this.x=t+this.width/2}},right:{get:function get(){return this.x+this.width/2},set:function set(t){this.x=t-this.width/2}},top:{get:function get(){return this.y-this.height/2},set:function set(t){this.y=t+this.height/2}},bottom:{get:function get(){return this.y+this.height/2},set:function set(t){this.y=t-this.height/2}}});t.exports=P},function(t,r){t.exports=function Contains(t,r,o){if(t.width<=0||t.height<=0)return!1;var a=(r-t.x)/t.width,h=(o-t.y)/t.height;return(a*=a)+(h*=h)<.25}},function(t,r,o){var a=o(275),h=o(0),d=o(75),T=o(9),S=o(207),A=o(2),P=o(6),O=o(7),D=o(437),L=o(149),I=o(73),B=new h({Extends:T,initialize:function Group(t,r,o){T.call(this),o?r&&!Array.isArray(r)&&(r=[r]):Array.isArray(r)?O(r[0])&&(o=r,r=null):O(r)&&(o=r,r=null),this.scene=t,this.children=new L,this.isParent=!0,this.type="Group",this.classType=A(o,"classType",I),this.name=A(o,"name",""),this.active=A(o,"active",!0),this.maxSize=A(o,"maxSize",-1),this.defaultKey=A(o,"defaultKey",null),this.defaultFrame=A(o,"defaultFrame",null),this.runChildUpdate=A(o,"runChildUpdate",!1),this.createCallback=A(o,"createCallback",null),this.removeCallback=A(o,"removeCallback",null),this.createMultipleCallback=A(o,"createMultipleCallback",null),this.internalCreateCallback=A(o,"internalCreateCallback",null),this.internalRemoveCallback=A(o,"internalRemoveCallback",null),r&&this.addMultiple(r),o&&this.createMultiple(o),this.on(d.ADDED_TO_SCENE,this.addedToScene,this),this.on(d.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function addedToScene(){this.scene.sys.updateList.add(this)},removedFromScene:function removedFromScene(){this.scene.sys.updateList.remove(this)},create:function create(t,r,o,a,h,d){if(void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=this.defaultKey),void 0===a&&(a=this.defaultFrame),void 0===h&&(h=!0),void 0===d&&(d=!0),this.isFull())return null;var T=new this.classType(this.scene,t,r,o,a);return T.addToDisplayList(this.scene.sys.displayList),T.addToUpdateList(),T.visible=h,T.setActive(d),this.add(T),T},createMultiple:function createMultiple(t){if(this.isFull())return[];Array.isArray(t)||(t=[t]);var r=[];if(t[0].key)for(var o=0;o<t.length;o++){var a=this.createFromConfig(t[o]);r=r.concat(a)}return r},createFromConfig:function createFromConfig(t){if(this.isFull())return[];this.classType=A(t,"classType",this.classType);var r=A(t,"key",void 0),o=A(t,"frame",null),h=A(t,"visible",!0),d=A(t,"active",!0),T=[];if(void 0===r)return T;Array.isArray(r)||(r=[r]),Array.isArray(o)||(o=[o]);var S=A(t,"repeat",0),O=A(t,"randomKey",!1),L=A(t,"randomFrame",!1),I=A(t,"yoyo",!1),B=A(t,"quantity",!1),N=A(t,"frameQuantity",1),G=A(t,"max",0),Y=D(r,o,{max:G,qty:B||N,random:O,randomB:L,repeat:S,yoyo:I});t.createCallback&&(this.createCallback=t.createCallback),t.removeCallback&&(this.removeCallback=t.removeCallback);for(var X=0;X<Y.length;X++){var U=this.create(0,0,Y[X].a,Y[X].b,h,d);if(!U)break;T.push(U)}var z=P(t,"setXY.x",0),V=P(t,"setXY.y",0),W=P(t,"setXY.stepX",0),H=P(t,"setXY.stepY",0);a.SetXY(T,z,V,W,H);var q=P(t,"setRotation.value",0),Z=P(t,"setRotation.step",0);a.SetRotation(T,q,Z);var K=P(t,"setScale.x",1),J=P(t,"setScale.y",K),Q=P(t,"setScale.stepX",0),$=P(t,"setScale.stepY",0);a.SetScale(T,K,J,Q,$);var tt=P(t,"setOrigin.x",.5),et=P(t,"setOrigin.y",tt),it=P(t,"setOrigin.stepX",0),nt=P(t,"setOrigin.stepY",0);a.SetOrigin(T,tt,et,it,nt);var rt=P(t,"setAlpha.value",1),st=P(t,"setAlpha.step",0);a.SetAlpha(T,rt,st);var ot=P(t,"setDepth.value",0),at=P(t,"setDepth.step",0);a.SetDepth(T,ot,at);var ht=P(t,"setScrollFactor.x",1),lt=P(t,"setScrollFactor.y",ht),ut=P(t,"setScrollFactor.stepX",0),ct=P(t,"setScrollFactor.stepY",0);a.SetScrollFactor(T,ht,lt,ut,ct);var dt=A(t,"hitArea",null),ft=A(t,"hitAreaCallback",null);dt&&a.SetHitArea(T,dt,ft);var pt=A(t,"gridAlign",!1);return pt&&a.GridAlign(T,pt),this.createMultipleCallback&&this.createMultipleCallback.call(this,T),T},preUpdate:function preUpdate(t,r){if(this.runChildUpdate&&0!==this.children.size)for(var o=this.children.entries.slice(),a=0;a<o.length;a++){var h=o[a];h.active&&h.update(t,r)}},add:function add(t,r){return void 0===r&&(r=!1),this.isFull()||(this.children.set(t),this.internalCreateCallback&&this.internalCreateCallback.call(this,t),this.createCallback&&this.createCallback.call(this,t),r&&(t.addToDisplayList(this.scene.sys.displayList),t.addToUpdateList()),t.on(d.DESTROY,this.remove,this)),this},addMultiple:function addMultiple(t,r){if(void 0===r&&(r=!1),Array.isArray(t))for(var o=0;o<t.length;o++)this.add(t[o],r);return this},remove:function remove(t,r,o){return void 0===r&&(r=!1),void 0===o&&(o=!1),this.children.contains(t)?(this.children.delete(t),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,t),this.removeCallback&&this.removeCallback.call(this,t),t.off(d.DESTROY,this.remove,this),o?t.destroy():r&&(t.removeFromDisplayList(),t.removeFromUpdateList()),this):this},clear:function clear(t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);for(var o=this.children,a=0;a<o.size;a++){var h=o.entries[a];h.off(d.DESTROY,this.remove,this),r?h.destroy():t&&(h.removeFromDisplayList(),h.removeFromUpdateList())}return this.children.clear(),this},contains:function contains(t){return this.children.contains(t)},getChildren:function getChildren(){return this.children.entries},getLength:function getLength(){return this.children.size},getMatching:function getMatching(t,r,o,a){return S(this.children.entries,t,r,o,a)},getFirst:function getFirst(t,r,o,a,h,d,T){return this.getHandler(!0,1,t,r,o,a,h,d,T)},getFirstNth:function getFirstNth(t,r,o,a,h,d,T,S){return this.getHandler(!0,t,r,o,a,h,d,T,S)},getLast:function getLast(t,r,o,a,h,d,T){return this.getHandler(!1,1,t,r,o,a,h,d,T)},getLastNth:function getLastNth(t,r,o,a,h,d,T,S){return this.getHandler(!1,t,r,o,a,h,d,T,S)},getHandler:function getHandler(t,r,o,a,h,d,T,S,A){var P,O;void 0===o&&(o=!1),void 0===a&&(a=!1);var D=0,L=this.children.entries;if(t)for(O=0;O<L.length;O++)if((P=L[O]).active===o){if(++D===r)break}else P=null;else for(O=L.length-1;O>=0;O--)if((P=L[O]).active===o){if(++D===r)break}else P=null;return P?("number"==typeof h&&(P.x=h),"number"==typeof d&&(P.y=d),P):a?this.create(h,d,T,S,A):null},get:function get(t,r,o,a,h){return this.getFirst(!1,!0,t,r,o,a,h)},getFirstAlive:function getFirstAlive(t,r,o,a,h,d){return this.getFirst(!0,t,r,o,a,h,d)},getFirstDead:function getFirstDead(t,r,o,a,h,d){return this.getFirst(!1,t,r,o,a,h,d)},playAnimation:function playAnimation(t,r){return a.PlayAnimation(this.children.entries,t,r),this},isFull:function isFull(){return-1!==this.maxSize&&this.children.size>=this.maxSize},countActive:function countActive(t){void 0===t&&(t=!0);for(var r=0,o=0;o<this.children.size;o++)this.children.entries[o].active===t&&r++;return r},getTotalUsed:function getTotalUsed(){return this.countActive()},getTotalFree:function getTotalFree(){var t=this.getTotalUsed();return(-1===this.maxSize?999999999999:this.maxSize)-t},setActive:function setActive(t){return this.active=t,this},setName:function setName(t){return this.name=t,this},propertyValueSet:function propertyValueSet(t,r,o,h,d){return a.PropertyValueSet(this.children.entries,t,r,o,h,d),this},propertyValueInc:function propertyValueInc(t,r,o,h,d){return a.PropertyValueInc(this.children.entries,t,r,o,h,d),this},setX:function setX(t,r){return a.SetX(this.children.entries,t,r),this},setY:function setY(t,r){return a.SetY(this.children.entries,t,r),this},setXY:function setXY(t,r,o,h){return a.SetXY(this.children.entries,t,r,o,h),this},incX:function incX(t,r){return a.IncX(this.children.entries,t,r),this},incY:function incY(t,r){return a.IncY(this.children.entries,t,r),this},incXY:function incXY(t,r,o,h){return a.IncXY(this.children.entries,t,r,o,h),this},shiftPosition:function shiftPosition(t,r,o){return a.ShiftPosition(this.children.entries,t,r,o),this},angle:function angle(t,r){return a.Angle(this.children.entries,t,r),this},rotate:function rotate(t,r){return a.Rotate(this.children.entries,t,r),this},rotateAround:function rotateAround(t,r){return a.RotateAround(this.children.entries,t,r),this},rotateAroundDistance:function rotateAroundDistance(t,r,o){return a.RotateAroundDistance(this.children.entries,t,r,o),this},setAlpha:function setAlpha(t,r){return a.SetAlpha(this.children.entries,t,r),this},setTint:function setTint(t,r,o,h){return a.SetTint(this.children.entries,t,r,o,h),this},setOrigin:function setOrigin(t,r,o,h){return a.SetOrigin(this.children.entries,t,r,o,h),this},scaleX:function scaleX(t,r){return a.ScaleX(this.children.entries,t,r),this},scaleY:function scaleY(t,r){return a.ScaleY(this.children.entries,t,r),this},scaleXY:function scaleXY(t,r,o,h){return a.ScaleXY(this.children.entries,t,r,o,h),this},setDepth:function setDepth(t,r){return a.SetDepth(this.children.entries,t,r),this},setBlendMode:function setBlendMode(t){return a.SetBlendMode(this.children.entries,t),this},setHitArea:function setHitArea(t,r){return a.SetHitArea(this.children.entries,t,r),this},shuffle:function shuffle(){return a.Shuffle(this.children.entries),this},kill:function kill(t){this.children.contains(t)&&t.setActive(!1)},killAndHide:function killAndHide(t){this.children.contains(t)&&(t.setActive(!1),t.setVisible(!1))},setVisible:function setVisible(t,r,o){return a.SetVisible(this.children.entries,t,r,o),this},toggleVisible:function toggleVisible(){return a.ToggleVisible(this.children.entries),this},destroy:function destroy(t,r){void 0===t&&(t=!1),void 0===r&&(r=!1),this.scene&&!this.ignoreDestroy&&(this.emit(d.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(r,t),this.scene=void 0,this.children=void 0)}});t.exports=B},function(t,r,o){var a=o(12);t.exports=function FillPathWebGL(t,r,o,h,d,T){for(var S=a.getTintAppendFloatAlpha(o.fillColor,o.fillAlpha*h),A=o.pathData,P=o.pathIndexes,O=0;O<P.length;O+=3){var D=2*P[O],L=2*P[O+1],I=2*P[O+2],B=A[D+0]-d,N=A[D+1]-T,G=A[L+0]-d,Y=A[L+1]-T,X=A[I+0]-d,U=A[I+1]-T,z=r.getX(B,N),V=r.getY(B,N),W=r.getX(G,Y),H=r.getY(G,Y),q=r.getX(X,U),Z=r.getY(X,U);t.batchTri(o,z,V,W,H,q,Z,0,0,1,1,S,S,S,2)}}},function(t,r){t.exports=function Contains(t,r,o){var a=t.x3-t.x1,h=t.y3-t.y1,d=t.x2-t.x1,T=t.y2-t.y1,S=r-t.x1,A=o-t.y1,P=a*a+h*h,O=a*d+h*T,D=a*S+h*A,L=d*d+T*T,I=d*S+T*A,B=P*L-O*O,N=0===B?0:1/B,G=(L*D-O*I)*N,Y=(P*I-O*D)*N;return G>=0&&Y>=0&&G+Y<1}},function(t,r,o){var a=o(0),h=o(10),d=o(3);function GetLength(t,r,o,a){var h=t-o,d=r-a,T=h*h+d*d;return Math.sqrt(T)}var T=new a({initialize:function Face(t,r,o){this.vertex1=t,this.vertex2=r,this.vertex3=o,this.bounds=new h,this._inCenter=new d},getInCenter:function getInCenter(t){void 0===t&&(t=!0);var r,o,a,h,d,T,S=this.vertex1,A=this.vertex2,P=this.vertex3;t?(r=S.x,o=S.y,a=A.x,h=A.y,d=P.x,T=P.y):(r=S.vx,o=S.vy,a=A.vx,h=A.vy,d=P.vx,T=P.vy);var O=GetLength(d,T,a,h),D=GetLength(r,o,d,T),L=GetLength(a,h,r,o),I=O+D+L;return this._inCenter.set((r*O+a*D+d*L)/I,(o*O+h*D+T*L)/I)},contains:function contains(t,r,o){var a=this.vertex1,h=this.vertex2,d=this.vertex3,T=a.vx,S=a.vy,A=h.vx,P=h.vy,O=d.vx,D=d.vy;if(o){var L=o.a,I=o.b,B=o.c,N=o.d,G=o.e,Y=o.f;T=a.vx*L+a.vy*B+G,S=a.vx*I+a.vy*N+Y,A=h.vx*L+h.vy*B+G,P=h.vx*I+h.vy*N+Y,O=d.vx*L+d.vy*B+G,D=d.vx*I+d.vy*N+Y}var X=O-T,U=D-S,z=A-T,V=P-S,W=t-T,H=r-S,q=X*X+U*U,Z=X*z+U*V,K=X*W+U*H,J=z*z+V*V,Q=z*W+V*H,$=q*J-Z*Z,tt=0===$?0:1/$,et=(J*K-Z*Q)*tt,it=(q*Q-Z*K)*tt;return et>=0&&it>=0&&et+it<1},isCounterClockwise:function isCounterClockwise(t){var r=this.vertex1,o=this.vertex2,a=this.vertex3,h=(o.vx-r.vx)*(a.vy-r.vy)-(o.vy-r.vy)*(a.vx-r.vx);return t<=0?h>=0:h<0},load:function load(t,r,o,a,h){return o=this.vertex1.load(t,r,o,a,h),o=this.vertex2.load(t,r,o,a,h),o=this.vertex3.load(t,r,o,a,h)},transformCoordinatesLocal:function transformCoordinatesLocal(t,r,o,a){return this.vertex1.transformCoordinatesLocal(t,r,o,a),this.vertex2.transformCoordinatesLocal(t,r,o,a),this.vertex3.transformCoordinatesLocal(t,r,o,a),this},updateBounds:function updateBounds(){var t=this.vertex1,r=this.vertex2,o=this.vertex3,a=this.bounds;return a.x=Math.min(t.vx,r.vx,o.vx),a.y=Math.min(t.vy,r.vy,o.vy),a.width=Math.max(t.vx,r.vx,o.vx)-a.x,a.height=Math.max(t.vy,r.vy,o.vy)-a.y,this},isInView:function isInView(t,r,o,a,h,d,T,S,A,P,O){var D=this.vertex1.update(h,d,T,S,A,P,O,a),L=this.vertex2.update(h,d,T,S,A,P,O,a),I=this.vertex3.update(h,d,T,S,A,P,O,a);if(D.ta<=0&&L.ta<=0&&I.ta<=0)return!1;if(r&&!this.isCounterClockwise(o))return!1;var B=this.bounds;B.x=Math.min(D.tx,L.tx,I.tx),B.y=Math.min(D.ty,L.ty,I.ty),B.width=Math.max(D.tx,L.tx,I.tx)-B.x,B.height=Math.max(D.ty,L.ty,I.ty)-B.y;var N=t.x+t.width,G=t.y+t.height;return!(B.width<=0||B.height<=0||t.width<=0||t.height<=0||B.right<t.x||B.bottom<t.y||B.x>N||B.y>G)},translate:function translate(t,r){void 0===r&&(r=0);var o=this.vertex1,a=this.vertex2,h=this.vertex3;return o.x+=t,o.y+=r,a.x+=t,a.y+=r,h.x+=t,h.y+=r,this},x:{get:function get(){return this.getInCenter().x},set:function set(t){var r=this.getInCenter();this.translate(t-r.x,0)}},y:{get:function get(){return this.getInCenter().y},set:function set(t){var r=this.getInCenter();this.translate(0,t-r.y)}},alpha:{get:function get(){var t=this.vertex1,r=this.vertex2,o=this.vertex3;return(t.alpha+r.alpha+o.alpha)/3},set:function set(t){this.vertex1.alpha=t,this.vertex2.alpha=t,this.vertex3.alpha=t}},depth:{get:function get(){var t=this.vertex1,r=this.vertex2,o=this.vertex3;return(t.vz+r.vz+o.vz)/3}},destroy:function destroy(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});t.exports=T},function(t,r,o){var a=o(0),h=o(12),d=o(39),T=new a({Extends:d,initialize:function Vertex(t,r,o,a,h,T,S,A,P,O){void 0===T&&(T=16777215),void 0===S&&(S=1),void 0===A&&(A=0),void 0===P&&(P=0),void 0===O&&(O=0),d.call(this,t,r,o),this.vx=0,this.vy=0,this.vz=0,this.nx=A,this.ny=P,this.nz=O,this.u=a,this.v=h,this.color=T,this.alpha=S,this.tx=0,this.ty=0,this.ta=0},setUVs:function setUVs(t,r){return this.u=t,this.v=r,this},transformCoordinatesLocal:function transformCoordinatesLocal(t,r,o,a){var h=this.x,d=this.y,T=this.z,S=t.val,A=h*S[0]+d*S[4]+T*S[8]+S[12],P=h*S[1]+d*S[5]+T*S[9]+S[13],O=h*S[2]+d*S[6]+T*S[10]+S[14],D=h*S[3]+d*S[7]+T*S[11]+S[15];this.vx=A/D*r,this.vy=-P/D*o,this.vz=a<=0?O/D:-O/D},update:function update(t,r,o,a,h,d,T,S){var A=this.vx*t+this.vy*o+h,P=this.vx*r+this.vy*a+d;return T&&(A=Math.round(A),P=Math.round(P)),this.tx=A,this.ty=P,this.ta=this.alpha*S,this},load:function load(t,r,o,a,d){return t[++o]=this.tx,t[++o]=this.ty,t[++o]=this.u,t[++o]=this.v,t[++o]=a,t[++o]=d,r[++o]=h.getTintAppendFloatAlpha(this.color,this.ta),o}});t.exports=T},function(t,r,o){var a={};t.exports=a;var h=o(166),d=o(32),T=o(84),S=o(41);a.create=function(t){return d.extend({id:d.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},t)},a.setModified=function(t,r,o,d){if(h.trigger(t,"compositeModified",t),t.isModified=r,o&&t.parent&&a.setModified(t.parent,r,o,d),d)for(var T=0;T<t.composites.length;T++){var S=t.composites[T];a.setModified(S,r,o,d)}},a.add=function(t,r){var o=[].concat(r);h.trigger(t,"beforeAdd",{object:r});for(var T=0;T<o.length;T++){var S=o[T];switch(S.type){case"body":if(S.parent!==S){d.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}a.addBody(t,S);break;case"constraint":a.addConstraint(t,S);break;case"composite":a.addComposite(t,S);break;case"mouseConstraint":a.addConstraint(t,S.constraint)}}return h.trigger(t,"afterAdd",{object:r}),t},a.remove=function(t,r,o){var d=[].concat(r);h.trigger(t,"beforeRemove",{object:r});for(var T=0;T<d.length;T++){var S=d[T];switch(S.type){case"body":a.removeBody(t,S,o);break;case"constraint":a.removeConstraint(t,S,o);break;case"composite":a.removeComposite(t,S,o);break;case"mouseConstraint":a.removeConstraint(t,S.constraint)}}return h.trigger(t,"afterRemove",{object:r}),t},a.addComposite=function(t,r){return t.composites.push(r),r.parent=t,a.setModified(t,!0,!0,!1),t},a.removeComposite=function(t,r,o){var h=t.composites.indexOf(r);if(-1!==h&&(a.removeCompositeAt(t,h),a.setModified(t,!0,!0,!1)),o)for(var d=0;d<t.composites.length;d++)a.removeComposite(t.composites[d],r,!0);return t},a.removeCompositeAt=function(t,r){return t.composites.splice(r,1),a.setModified(t,!0,!0,!1),t},a.addBody=function(t,r){return t.bodies.push(r),a.setModified(t,!0,!0,!1),t},a.removeBody=function(t,r,o){var h=t.bodies.indexOf(r);if(-1!==h&&(a.removeBodyAt(t,h),a.setModified(t,!0,!0,!1)),o)for(var d=0;d<t.composites.length;d++)a.removeBody(t.composites[d],r,!0);return t},a.removeBodyAt=function(t,r){return t.bodies.splice(r,1),a.setModified(t,!0,!0,!1),t},a.addConstraint=function(t,r){return t.constraints.push(r),a.setModified(t,!0,!0,!1),t},a.removeConstraint=function(t,r,o){var h=t.constraints.indexOf(r);if(-1!==h&&a.removeConstraintAt(t,h),o)for(var d=0;d<t.composites.length;d++)a.removeConstraint(t.composites[d],r,!0);return t},a.removeConstraintAt=function(t,r){return t.constraints.splice(r,1),a.setModified(t,!0,!0,!1),t},a.clear=function(t,r,o){if(o)for(var h=0;h<t.composites.length;h++)a.clear(t.composites[h],r,!0);return r?t.bodies=t.bodies.filter((function(t){return t.isStatic})):t.bodies.length=0,t.constraints.length=0,t.composites.length=0,a.setModified(t,!0,!0,!1),t},a.allBodies=function(t){for(var r=[].concat(t.bodies),o=0;o<t.composites.length;o++)r=r.concat(a.allBodies(t.composites[o]));return r},a.allConstraints=function(t){for(var r=[].concat(t.constraints),o=0;o<t.composites.length;o++)r=r.concat(a.allConstraints(t.composites[o]));return r},a.allComposites=function(t){for(var r=[].concat(t.composites),o=0;o<t.composites.length;o++)r=r.concat(a.allComposites(t.composites[o]));return r},a.get=function(t,r,o){var h,d;switch(o){case"body":h=a.allBodies(t);break;case"constraint":h=a.allConstraints(t);break;case"composite":h=a.allComposites(t).concat(t)}return h?0===(d=h.filter((function(t){return t.id.toString()===r.toString()}))).length?null:d[0]:null},a.move=function(t,r,o){return a.remove(t,r),a.add(o,r),t},a.rebase=function(t){for(var r=a.allBodies(t).concat(a.allConstraints(t)).concat(a.allComposites(t)),o=0;o<r.length;o++)r[o].id=d.nextId();return a.setModified(t,!0,!0,!1),t},a.translate=function(t,r,o){for(var h=o?a.allBodies(t):t.bodies,d=0;d<h.length;d++)S.translate(h[d],r);return a.setModified(t,!0,!0,!1),t},a.rotate=function(t,r,o,h){for(var d=Math.cos(r),T=Math.sin(r),A=h?a.allBodies(t):t.bodies,P=0;P<A.length;P++){var O=A[P],D=O.position.x-o.x,L=O.position.y-o.y;S.setPosition(O,{x:o.x+(D*d-L*T),y:o.y+(D*T+L*d)}),S.rotate(O,r)}return a.setModified(t,!0,!0,!1),t},a.scale=function(t,r,o,h,d){for(var T=d?a.allBodies(t):t.bodies,A=0;A<T.length;A++){var P=T[A],O=P.position.x-h.x,D=P.position.y-h.y;S.setPosition(P,{x:h.x+O*r,y:h.y+D*o}),S.scale(P,r,o)}return a.setModified(t,!0,!0,!1),t},a.bounds=function(t){for(var r=a.allBodies(t),o=[],h=0;h<r.length;h+=1){var d=r[h];o.push(d.bounds.min,d.bounds.max)}return T.create(o)}},function(t,r){t.exports=function IsInLayerBounds(t,r,o){return t>=0&&t<o.width&&r>=0&&r<o.height}},function(t,r,o){var a=o(0),h=o(29),d=o(2),T=new a({initialize:function LayerData(t){void 0===t&&(t={}),this.name=d(t,"name","layer"),this.x=d(t,"x",0),this.y=d(t,"y",0),this.width=d(t,"width",0),this.height=d(t,"height",0),this.tileWidth=d(t,"tileWidth",0),this.tileHeight=d(t,"tileHeight",0),this.baseTileWidth=d(t,"baseTileWidth",this.tileWidth),this.baseTileHeight=d(t,"baseTileHeight",this.tileHeight),this.orientation=d(t,"orientation",h.ORTHOGONAL),this.widthInPixels=d(t,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=d(t,"heightInPixels",this.height*this.baseTileHeight),this.alpha=d(t,"alpha",1),this.visible=d(t,"visible",!0),this.properties=d(t,"properties",[]),this.indexes=d(t,"indexes",[]),this.collideIndexes=d(t,"collideIndexes",[]),this.callbacks=d(t,"callbacks",[]),this.bodies=d(t,"bodies",[]),this.data=d(t,"data",[]),this.tilemapLayer=d(t,"tilemapLayer",null),this.hexSideLength=d(t,"hexSideLength",0)}});t.exports=T},function(t,r,o){var a=o(0),h=o(29),d=o(2),T=new a({initialize:function MapData(t){void 0===t&&(t={}),this.name=d(t,"name","map"),this.width=d(t,"width",0),this.height=d(t,"height",0),this.infinite=d(t,"infinite",!1),this.tileWidth=d(t,"tileWidth",0),this.tileHeight=d(t,"tileHeight",0),this.widthInPixels=d(t,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=d(t,"heightInPixels",this.height*this.tileHeight),this.format=d(t,"format",null),this.orientation=d(t,"orientation",h.ORTHOGONAL),this.renderOrder=d(t,"renderOrder","right-down"),this.version=d(t,"version","1"),this.properties=d(t,"properties",{}),this.layers=d(t,"layers",[]),this.images=d(t,"images",[]),this.objects=d(t,"objects",{}),this.collision=d(t,"collision",{}),this.tilesets=d(t,"tilesets",[]),this.imageCollections=d(t,"imageCollections",[]),this.tiles=d(t,"tiles",[]),this.hexSideLength=d(t,"hexSideLength",0)}});t.exports=T},function(t,r,o){var a=new(o(0))({initialize:function Tileset(t,r,o,a,h,d,T,S){(void 0===o||o<=0)&&(o=32),(void 0===a||a<=0)&&(a=32),void 0===h&&(h=0),void 0===d&&(d=0),void 0===T&&(T={}),void 0===S&&(S={}),this.name=t,this.firstgid=r,this.tileWidth=o,this.tileHeight=a,this.tileMargin=h,this.tileSpacing=d,this.tileProperties=T,this.tileData=S,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function getTileProperties(t){return this.containsTileIndex(t)?this.tileProperties[t-this.firstgid]:null},getTileData:function getTileData(t){return this.containsTileIndex(t)?this.tileData[t-this.firstgid]:null},getTileCollisionGroup:function getTileCollisionGroup(t){var r=this.getTileData(t);return r&&r.objectgroup?r.objectgroup:null},containsTileIndex:function containsTileIndex(t){return t>=this.firstgid&&t<this.firstgid+this.total},getTileTextureCoordinates:function getTileTextureCoordinates(t){return this.containsTileIndex(t)?this.texCoordinates[t-this.firstgid]:null},setImage:function setImage(t){return this.image=t,this.glTexture=t.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function setTileSize(t,r){return void 0!==t&&(this.tileWidth=t),void 0!==r&&(this.tileHeight=r),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function setSpacing(t,r){return void 0!==t&&(this.tileMargin=t),void 0!==r&&(this.tileSpacing=r),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function updateTileData(t,r){var o=(r-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),a=(t-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);o%1==0&&a%1==0||console.warn("Image tile area not tile size multiple in: "+this.name),o=Math.floor(o),a=Math.floor(a),this.rows=o,this.columns=a,this.total=o*a,this.texCoordinates.length=0;for(var h=this.tileMargin,d=this.tileMargin,T=0;T<this.rows;T++){for(var S=0;S<this.columns;S++)this.texCoordinates.push({x:h,y:d}),h+=this.tileWidth+this.tileSpacing;h=this.tileMargin,d+=this.tileHeight+this.tileSpacing}return this}});t.exports=a},function(t,r){t.exports={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12}},function(t,r){t.exports=function Equal(t,r,o){return void 0===o&&(o=1e-4),Math.abs(t-r)<o}},function(t,r,o){var a=o(0),h=o(11),d=o(15),T=o(1068),S=new a({Extends:d,Mixins:[h.Alpha,h.BlendMode,h.Depth,h.Flip,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.ScrollFactor,h.Size,h.TextureCrop,h.Tint,h.Transform,h.Visible,T],initialize:function Image(t,r,o,a,h){d.call(this,t,"Image"),this._crop=this.resetCropObject(),this.setTexture(a,h),this.setPosition(r,o),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});t.exports=S},function(t,r){t.exports=function HasValue(t,r){return t.hasOwnProperty(r)}},function(t,r,o){var a=o(77);t.exports=function Merge(t,r){var o=a(t);for(var h in r)o.hasOwnProperty(h)||(o[h]=r[h]);return o}},function(t,r,o){var a={};t.exports=a;var h=o(64),d=o(83),T=o(165),S=o(84),A=o(271),P=o(32);a._warming=.4,a._torqueDampen=1,a._minLength=1e-6,a.create=function(t){var r=t;r.bodyA&&!r.pointA&&(r.pointA={x:0,y:0}),r.bodyB&&!r.pointB&&(r.pointB={x:0,y:0});var o=r.bodyA?d.add(r.bodyA.position,r.pointA):r.pointA,a=r.bodyB?d.add(r.bodyB.position,r.pointB):r.pointB,h=d.magnitude(d.sub(o,a));r.length=void 0!==r.length?r.length:h,r.id=r.id||P.nextId(),r.label=r.label||"Constraint",r.type="constraint",r.stiffness=r.stiffness||(r.length>0?1:.7),r.damping=r.damping||0,r.angularStiffness=r.angularStiffness||0,r.angleA=r.bodyA?r.bodyA.angle:r.angleA,r.angleB=r.bodyB?r.bodyB.angle:r.angleB,r.plugin={};var T={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return 0===r.length&&r.stiffness>.1?(T.type="pin",T.anchors=!1):r.stiffness<.9&&(T.type="spring"),r.render=P.extend(T,r.render),r},a.preSolveAll=function(t){for(var r=0;r<t.length;r+=1){var o=t[r],a=o.constraintImpulse;o.isStatic||0===a.x&&0===a.y&&0===a.angle||(o.position.x+=a.x,o.position.y+=a.y,o.angle+=a.angle)}},a.solveAll=function(t,r){for(var o=0;o<t.length;o+=1){var h=t[o],d=!h.bodyA||h.bodyA&&h.bodyA.isStatic,T=!h.bodyB||h.bodyB&&h.bodyB.isStatic;(d||T)&&a.solve(t[o],r)}for(o=0;o<t.length;o+=1)d=!(h=t[o]).bodyA||h.bodyA&&h.bodyA.isStatic,T=!h.bodyB||h.bodyB&&h.bodyB.isStatic,d||T||a.solve(t[o],r)},a.solve=function(t,r){var o=t.bodyA,h=t.bodyB,T=t.pointA,S=t.pointB;if(o||h){o&&!o.isStatic&&(d.rotate(T,o.angle-t.angleA,T),t.angleA=o.angle),h&&!h.isStatic&&(d.rotate(S,h.angle-t.angleB,S),t.angleB=h.angle);var A=T,P=S;if(o&&(A=d.add(o.position,T)),h&&(P=d.add(h.position,S)),A&&P){var O=d.sub(A,P),D=d.magnitude(O);D<a._minLength&&(D=a._minLength);var L,I,B,N,G,Y=(D-t.length)/D,X=t.stiffness<1?t.stiffness*r:t.stiffness,U=d.mult(O,Y*X),z=(o?o.inverseMass:0)+(h?h.inverseMass:0),V=z+((o?o.inverseInertia:0)+(h?h.inverseInertia:0));if(t.damping){var W=d.create();B=d.div(O,D),G=d.sub(h&&d.sub(h.position,h.positionPrev)||W,o&&d.sub(o.position,o.positionPrev)||W),N=d.dot(B,G)}o&&!o.isStatic&&(I=o.inverseMass/z,o.constraintImpulse.x-=U.x*I,o.constraintImpulse.y-=U.y*I,o.position.x-=U.x*I,o.position.y-=U.y*I,t.damping&&(o.positionPrev.x-=t.damping*B.x*N*I,o.positionPrev.y-=t.damping*B.y*N*I),L=d.cross(T,U)/V*a._torqueDampen*o.inverseInertia*(1-t.angularStiffness),o.constraintImpulse.angle-=L,o.angle-=L),h&&!h.isStatic&&(I=h.inverseMass/z,h.constraintImpulse.x+=U.x*I,h.constraintImpulse.y+=U.y*I,h.position.x+=U.x*I,h.position.y+=U.y*I,t.damping&&(h.positionPrev.x+=t.damping*B.x*N*I,h.positionPrev.y+=t.damping*B.y*N*I),L=d.cross(S,U)/V*a._torqueDampen*h.inverseInertia*(1-t.angularStiffness),h.constraintImpulse.angle+=L,h.angle+=L)}}},a.postSolveAll=function(t){for(var r=0;r<t.length;r++){var o=t[r],P=o.constraintImpulse;if(!(o.isStatic||0===P.x&&0===P.y&&0===P.angle)){T.set(o,!1);for(var O=0;O<o.parts.length;O++){var D=o.parts[O];h.translate(D.vertices,P),O>0&&(D.position.x+=P.x,D.position.y+=P.y),0!==P.angle&&(h.rotate(D.vertices,P.angle,o.position),A.rotate(D.axes,P.angle),O>0&&d.rotateAbout(D.position,P.angle,o.position,D.position)),S.update(D.bounds,D.vertices,o.velocity)}P.angle*=a._warming,P.x*=a._warming,P.y*=a._warming}}},a.pointAWorld=function(t){return{x:(t.bodyA?t.bodyA.position.x:0)+t.pointA.x,y:(t.bodyA?t.bodyA.position.y:0)+t.pointA.y}},a.pointBWorld=function(t){return{x:(t.bodyB?t.bodyB.position.x:0)+t.pointB.x,y:(t.bodyB?t.bodyB.position.y:0)+t.pointB.y}}},function(t,r,o){var a=o(35),h=o(65),d=o(66),T=o(0),S=o(11),A=o(15),P=o(10),O=o(57),D=new T({Extends:A,Mixins:[S.Depth,S.GetBounds,S.Origin,S.Transform,S.ScrollFactor,S.Visible],initialize:function Zone(t,r,o,h,d){void 0===h&&(h=1),void 0===d&&(d=h),A.call(this,t,"Zone"),this.setPosition(r,o),this.width=h,this.height=d,this.blendMode=a.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function get(){return this.scaleX*this.width},set:function set(t){this.scaleX=t/this.width}},displayHeight:{get:function get(){return this.scaleY*this.height},set:function set(t){this.scaleY=t/this.height}},setSize:function setSize(t,r,o){void 0===o&&(o=!0),this.width=t,this.height=r,this.updateDisplayOrigin();var a=this.input;return o&&a&&!a.customHitArea&&(a.hitArea.width=t,a.hitArea.height=r),this},setDisplaySize:function setDisplaySize(t,r){return this.displayWidth=t,this.displayHeight=r,this},setCircleDropZone:function setCircleDropZone(t){return this.setDropZone(new h(0,0,t),d)},setRectangleDropZone:function setRectangleDropZone(t,r){return this.setDropZone(new P(0,0,t,r),O)},setDropZone:function setDropZone(t,r){return void 0===t?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(t,r,!0),this},setAlpha:function setAlpha(){},setBlendMode:function setBlendMode(){},renderCanvas:function renderCanvas(t,r,o){o.addToRenderList(r)},renderWebGL:function renderWebGL(t,r,o){o.addToRenderList(r)}});t.exports=D},function(t,r){t.exports=function Perimeter(t){return 2*(t.width+t.height)}},function(t,r){t.exports=function Shuffle(t){for(var r=t.length-1;r>0;r--){var o=Math.floor(Math.random()*(r+1)),a=t[r];t[r]=t[o],t[o]=a}return t}},function(t,r,o){t.exports={ADD_ANIMATION:o(724),ANIMATION_COMPLETE:o(725),ANIMATION_COMPLETE_KEY:o(726),ANIMATION_REPEAT:o(727),ANIMATION_RESTART:o(728),ANIMATION_START:o(729),ANIMATION_STOP:o(730),ANIMATION_UPDATE:o(731),PAUSE_ALL:o(732),REMOVE_ANIMATION:o(733),RESUME_ALL:o(734)}},function(t,r,o){var a=o(0),h=o(11),d=o(36),T=o(9),S=o(37),A=o(10),P=o(25),O=o(187),D=o(3),L=new a({Extends:T,Mixins:[h.Alpha,h.Visible],initialize:function BaseCamera(t,r,o,a){void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),T.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new A,this.dirty=!0,this._x=t,this._y=r,this._width=o,this._height=a,this._bounds=new A,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new P,this.transparent=!0,this.backgroundColor=O("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new D(o/2,a/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function addToRenderList(t){this.renderList.push(t)},setOrigin:function setOrigin(t,r){return void 0===t&&(t=.5),void 0===r&&(r=t),this.originX=t,this.originY=r,this},getScroll:function getScroll(t,r,o){void 0===o&&(o=new D);var a=.5*this.width,h=.5*this.height;return o.x=t-a,o.y=r-h,this.useBounds&&(o.x=this.clampX(o.x),o.y=this.clampY(o.y)),o},centerOnX:function centerOnX(t){var r=.5*this.width;return this.midPoint.x=t,this.scrollX=t-r,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function centerOnY(t){var r=.5*this.height;return this.midPoint.y=t,this.scrollY=t-r,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function centerOn(t,r){return this.centerOnX(t),this.centerOnY(r),this},centerToBounds:function centerToBounds(){if(this.useBounds){var t=this._bounds,r=.5*this.width,o=.5*this.height;this.midPoint.set(t.centerX,t.centerY),this.scrollX=t.centerX-r,this.scrollY=t.centerY-o}return this},centerToSize:function centerToSize(){return this.scrollX=.5*this.width,this.scrollY=.5*this.height,this},cull:function cull(t){if(this.disableCull)return t;var r=this.matrix.matrix,o=r[0],a=r[1],h=r[2],d=r[3],T=o*d-a*h;if(!T)return t;var S=r[4],A=r[5],P=this.scrollX,O=this.scrollY,D=this.width,L=this.height,I=this.y,B=I+L,N=this.x,G=N+D,Y=this.culledObjects,X=t.length;T=1/T,Y.length=0;for(var U=0;U<X;++U){var z=t[U];if(z.hasOwnProperty("width")&&!z.parentContainer){var V=z.width,W=z.height,H=z.x-P*z.scrollFactorX-V*z.originX,q=z.y-O*z.scrollFactorY-W*z.originY;(H+V)*o+(q+W)*h+S>N&&H*o+q*h+S<G&&(H+V)*a+(q+W)*d+A>I&&H*a+q*d+A<B&&Y.push(z)}else Y.push(z)}return Y},getWorldPoint:function getWorldPoint(t,r,o){void 0===o&&(o=new D);var a=this.matrix.matrix,h=a[0],d=a[1],T=a[2],S=a[3],A=a[4],P=a[5],O=h*S-d*T;if(!O)return o.x=t,o.y=r,o;var L=S*(O=1/O),I=-d*O,B=-T*O,N=h*O,G=(T*P-S*A)*O,Y=(d*A-h*P)*O,X=Math.cos(this.rotation),U=Math.sin(this.rotation),z=this.zoomX,V=this.zoomY,W=this.scrollX,H=this.scrollY,q=t+(W*X-H*U)*z,Z=r+(W*U+H*X)*V;return o.x=q*L+Z*B+G,o.y=q*I+Z*N+Y,o},ignore:function ignore(t){var r=this.id;Array.isArray(t)||(t=[t]);for(var o=0;o<t.length;o++){var a=t[o];Array.isArray(a)?this.ignore(a):a.isParent?this.ignore(a.getChildren()):a.cameraFilter|=r}return this},preRender:function preRender(){this.renderList.length=0;var t=this.width,r=this.height,o=.5*t,a=.5*r,h=this.zoomX,d=this.zoomY,T=this.matrix,S=t*this.originX,A=r*this.originY,P=this.scrollX,O=this.scrollY;this.useBounds&&(P=this.clampX(P),O=this.clampY(O)),this.roundPixels&&(S=Math.round(S),A=Math.round(A)),this.scrollX=P,this.scrollY=O;var D=P+o,L=O+a;this.midPoint.set(D,L);var I=t/h,B=r/d;this.worldView.setTo(D-I/2,L-B/2,I,B),T.applyITRS(this.x+S,this.y+A,this.rotation,h,d),T.translate(-S,-A)},clampX:function clampX(t){var r=this._bounds,o=this.displayWidth,a=r.x+(o-this.width)/2,h=Math.max(a,a+r.width-o);return t<a?t=a:t>h&&(t=h),t},clampY:function clampY(t){var r=this._bounds,o=this.displayHeight,a=r.y+(o-this.height)/2,h=Math.max(a,a+r.height-o);return t<a?t=a:t>h&&(t=h),t},removeBounds:function removeBounds(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function setAngle(t){return void 0===t&&(t=0),this.rotation=d(t),this},setBackgroundColor:function setBackgroundColor(t){return void 0===t&&(t="rgba(0,0,0,0)"),this.backgroundColor=O(t),this.transparent=0===this.backgroundColor.alpha,this},setBounds:function setBounds(t,r,o,a,h){return void 0===h&&(h=!1),this._bounds.setTo(t,r,o,a),this.dirty=!0,this.useBounds=!0,h?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function getBounds(t){void 0===t&&(t=new A);var r=this._bounds;return t.setTo(r.x,r.y,r.width,r.height),t},setName:function setName(t){return void 0===t&&(t=""),this.name=t,this},setPosition:function setPosition(t,r){return void 0===r&&(r=t),this.x=t,this.y=r,this},setRotation:function setRotation(t){return void 0===t&&(t=0),this.rotation=t,this},setRoundPixels:function setRoundPixels(t){return this.roundPixels=t,this},setScene:function setScene(t){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=t;var r=t.sys;return this.sceneManager=r.game.scene,this.scaleManager=r.scale,this.cameraManager=r.cameras,this.updateSystem(),this},setScroll:function setScroll(t,r){return void 0===r&&(r=t),this.scrollX=t,this.scrollY=r,this},setSize:function setSize(t,r){return void 0===r&&(r=t),this.width=t,this.height=r,this},setViewport:function setViewport(t,r,o,a){return this.x=t,this.y=r,this.width=o,this.height=a,this},setZoom:function setZoom(t,r){return void 0===t&&(t=1),void 0===r&&(r=t),0===t&&(t=.001),0===r&&(r=.001),this.zoomX=t,this.zoomY=r,this},setMask:function setMask(t,r){return void 0===r&&(r=!0),this.mask=t,this._maskCamera=r?this.cameraManager.default:this,this},clearMask:function clearMask(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function toJSON(){var t={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(t.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),t},update:function update(){},updateSystem:function updateSystem(){if(this.scaleManager){var t=0!==this._x||0!==this._y||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,r=this.sceneManager;t&&!this._customViewport?r.customViewports++:!t&&this._customViewport&&r.customViewports--,this.dirty=!0,this._customViewport=t}},destroy:function destroy(){this.emit(S.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function get(){return this._x},set:function set(t){this._x=t,this.updateSystem()}},y:{get:function get(){return this._y},set:function set(t){this._y=t,this.updateSystem()}},width:{get:function get(){return this._width},set:function set(t){this._width=t,this.updateSystem()}},height:{get:function get(){return this._height},set:function set(t){this._height=t,this.updateSystem()}},scrollX:{get:function get(){return this._scrollX},set:function set(t){this._scrollX=t,this.dirty=!0}},scrollY:{get:function get(){return this._scrollY},set:function set(t){this._scrollY=t,this.dirty=!0}},zoom:{get:function get(){return(this._zoomX+this._zoomY)/2},set:function set(t){this._zoomX=t,this._zoomY=t,this.dirty=!0}},zoomX:{get:function get(){return this._zoomX},set:function set(t){this._zoomX=t,this.dirty=!0}},zoomY:{get:function get(){return this._zoomY},set:function set(t){this._zoomY=t,this.dirty=!0}},rotation:{get:function get(){return this._rotation},set:function set(t){this._rotation=t,this.dirty=!0}},centerX:{get:function get(){return this.x+.5*this.width}},centerY:{get:function get(){return this.y+.5*this.height}},displayWidth:{get:function get(){return this.width/this.zoomX}},displayHeight:{get:function get(){return this.height/this.zoomY}}});t.exports=L},function(t,r,o){var a=o(334),h=o(335),d=o(336),T=o(337),S=o(338),A=o(339),P=o(340),O=o(341),D=o(342),L=o(343),I=o(344),B=o(345);t.exports={Power0:P,Power1:O.Out,Power2:T.Out,Power3:D.Out,Power4:L.Out,Linear:P,Quad:O.Out,Cubic:T.Out,Quart:D.Out,Quint:L.Out,Sine:I.Out,Expo:A.Out,Circ:d.Out,Elastic:S.Out,Back:a.Out,Bounce:h.Out,Stepped:B,"Quad.easeIn":O.In,"Cubic.easeIn":T.In,"Quart.easeIn":D.In,"Quint.easeIn":L.In,"Sine.easeIn":I.In,"Expo.easeIn":A.In,"Circ.easeIn":d.In,"Elastic.easeIn":S.In,"Back.easeIn":a.In,"Bounce.easeIn":h.In,"Quad.easeOut":O.Out,"Cubic.easeOut":T.Out,"Quart.easeOut":D.Out,"Quint.easeOut":L.Out,"Sine.easeOut":I.Out,"Expo.easeOut":A.Out,"Circ.easeOut":d.Out,"Elastic.easeOut":S.Out,"Back.easeOut":a.Out,"Bounce.easeOut":h.Out,"Quad.easeInOut":O.InOut,"Cubic.easeInOut":T.InOut,"Quart.easeInOut":D.InOut,"Quint.easeInOut":L.InOut,"Sine.easeInOut":I.InOut,"Expo.easeInOut":A.InOut,"Circ.easeInOut":d.InOut,"Elastic.easeInOut":S.InOut,"Back.easeInOut":a.InOut,"Bounce.easeInOut":h.InOut}},function(t,r){t.exports=function Linear(t,r,o){return(r-t)*o+t}},function(t,r,o){var a=o(105),h={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};t.exports=function init(){var t=navigator.userAgent;return/Edge\/\d+/.test(t)?h.edge=!0:/Chrome\/(\d+)/.test(t)&&!a.windowsPhone?(h.chrome=!0,h.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(t)?(h.firefox=!0,h.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(t)&&a.iOS?h.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(t)?(h.ie=!0,h.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(t)?h.opera=!0:/Safari/.test(t)&&!a.windowsPhone?h.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(t)&&(h.ie=!0,h.trident=!0,h.tridentVersion=parseInt(RegExp.$1,10),h.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(t)&&(h.silk=!0),h}()},function(t,r){t.exports=function FloatBetween(t,r){return Math.random()*(r-t)+t}},function(t,r){t.exports=function IsSizePowerOfTwo(t,r){return t>0&&0==(t&t-1)&&r>0&&0==(r&r-1)}},function(t,r){t.exports=function SnapCeil(t,r,o,a){return void 0===o&&(o=0),0===r?t:(t-=o,t=r*Math.ceil(t/r),a?(o+t)/r:o+t)}},function(t,r,o){var a=new(o(0))({initialize:function Vector4(t,r,o,a){this.x=0,this.y=0,this.z=0,this.w=0,"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=r||0,this.z=o||0,this.w=a||0)},clone:function clone(){return new a(this.x,this.y,this.z,this.w)},copy:function copy(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this.w=t.w||0,this},equals:function equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},set:function set(t,r,o,a){return"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=r||0,this.z=o||0,this.w=a||0),this},add:function add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this.w+=t.w||0,this},subtract:function subtract(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this.w-=t.w||0,this},scale:function scale(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function length(){var t=this.x,r=this.y,o=this.z,a=this.w;return Math.sqrt(t*t+r*r+o*o+a*a)},lengthSq:function lengthSq(){var t=this.x,r=this.y,o=this.z,a=this.w;return t*t+r*r+o*o+a*a},normalize:function normalize(){var t=this.x,r=this.y,o=this.z,a=this.w,h=t*t+r*r+o*o+a*a;return h>0&&(h=1/Math.sqrt(h),this.x=t*h,this.y=r*h,this.z=o*h,this.w=a*h),this},dot:function dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function lerp(t,r){void 0===r&&(r=0);var o=this.x,a=this.y,h=this.z,d=this.w;return this.x=o+r*(t.x-o),this.y=a+r*(t.y-a),this.z=h+r*(t.z-h),this.w=d+r*(t.w-d),this},multiply:function multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this.w*=t.w||1,this},divide:function divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this.w/=t.w||1,this},distance:function distance(t){var r=t.x-this.x,o=t.y-this.y,a=t.z-this.z||0,h=t.w-this.w||0;return Math.sqrt(r*r+o*o+a*a+h*h)},distanceSq:function distanceSq(t){var r=t.x-this.x,o=t.y-this.y,a=t.z-this.z||0,h=t.w-this.w||0;return r*r+o*o+a*a+h*h},negate:function negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function transformMat4(t){var r=this.x,o=this.y,a=this.z,h=this.w,d=t.val;return this.x=d[0]*r+d[4]*o+d[8]*a+d[12]*h,this.y=d[1]*r+d[5]*o+d[9]*a+d[13]*h,this.z=d[2]*r+d[6]*o+d[10]*a+d[14]*h,this.w=d[3]*r+d[7]*o+d[11]*a+d[15]*h,this},transformQuat:function transformQuat(t){var r=this.x,o=this.y,a=this.z,h=t.x,d=t.y,T=t.z,S=t.w,A=S*r+d*a-T*o,P=S*o+T*r-h*a,O=S*a+h*o-d*r,D=-h*r-d*o-T*a;return this.x=A*S+D*-h+P*-T-O*-d,this.y=P*S+D*-d+O*-h-A*-T,this.z=O*S+D*-T+A*-d-P*-h,this},reset:function reset(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});a.prototype.sub=a.prototype.subtract,a.prototype.mul=a.prototype.multiply,a.prototype.div=a.prototype.divide,a.prototype.dist=a.prototype.distance,a.prototype.distSq=a.prototype.distanceSq,a.prototype.len=a.prototype.length,a.prototype.lenSq=a.prototype.lengthSq,t.exports=a},function(t,r,o){var a=o(0),h=o(91),d=new a({initialize:function RenderTarget(t,r,o,a,h,d,T){void 0===a&&(a=1),void 0===h&&(h=0),void 0===d&&(d=!0),void 0===T&&(T=!1),this.renderer=t,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=a,this.minFilter=h,this.autoClear=d,this.autoResize=!1,this.resize(r,o),T&&this.setAutoResize(!0)},setAutoResize:function setAutoResize(t){return t&&!this.autoResize?(this.renderer.on(h.RESIZE,this.resize,this),this.autoResize=!0):!t&&this.autoResize&&(this.renderer.off(h.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function resize(t,r){var o=t*this.scale,a=r*this.scale;if(o!==this.width||a!==this.height){var h=this.renderer;h.deleteFramebuffer(this.framebuffer),h.deleteTexture(this.texture),t*=this.scale,r*=this.scale,(t=Math.round(t))<=0&&(t=1),(r=Math.round(r))<=0&&(r=1),this.texture=h.createTextureFromSource(null,t,r,this.minFilter),this.framebuffer=h.createFramebuffer(t,r,this.texture,!1),this.width=t,this.height=r}return this},bind:function bind(t,r,o){if(void 0===t&&(t=!1),t&&this.renderer.flush(),r&&o&&this.resize(r,o),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),t&&this.adjustViewport(),this.autoClear){var a=this.renderer.gl;a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT)}},adjustViewport:function adjustViewport(){var t=this.renderer.gl;t.viewport(0,0,this.width,this.height),t.disable(t.SCISSOR_TEST)},clear:function clear(){var t=this.renderer,r=t.gl;t.pushFramebuffer(this.framebuffer),r.disable(r.SCISSOR_TEST),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),t.popFramebuffer(),t.resetScissor()},unbind:function unbind(t){void 0===t&&(t=!1);var r=this.renderer;return t&&r.flush(),r.popFramebuffer()},destroy:function destroy(){var t=this.renderer;t.deleteFramebuffer(this.framebuffer),t.deleteTexture(this.texture),t.off(h.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});t.exports=d},function(t,r){t.exports=function AddToDOM(t,r){var o;if(r)"string"==typeof r?o=document.getElementById(r):"object"===_typeof(r)&&1===r.nodeType&&(o=r);else if(t.parentElement||null===r)return t;return o||(o=document.body),o.appendChild(t),t}},function(t,r){t.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175}},function(t,r){t.exports={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9}},function(t,r,o){var a=o(0),h=o(77),d=o(9),T=o(70),S=o(22),A=o(1),P=o(207),O=o(428),D=new a({Extends:d,initialize:function BaseSoundManager(t){d.call(this),this.game=t,this.jsonCache=t.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,t.events.on(S.BLUR,this.onGameBlur,this),t.events.on(S.FOCUS,this.onGameFocus,this),t.events.on(S.PRE_STEP,this.update,this),t.events.once(S.DESTROY,this.destroy,this)},add:A,addAudioSprite:function addAudioSprite(t,r){void 0===r&&(r={});var o=this.add(t,r);for(var a in o.spritemap=this.jsonCache.get(t).spritemap,o.spritemap)if(o.spritemap.hasOwnProperty(a)){var d=h(r),T=o.spritemap[a];d.loop=!!T.hasOwnProperty("loop")&&T.loop,o.addMarker({name:a,start:T.start,duration:T.end-T.start,config:d})}return o},get:function get(t){return O(this.sounds,"key",t)},getAll:function getAll(t){return P(this.sounds,"key",t)},play:function play(t,r){var o=this.add(t);return o.once(T.COMPLETE,o.destroy,o),r?r.name?(o.addMarker(r),o.play(r.name)):o.play(r):o.play()},playAudioSprite:function playAudioSprite(t,r,o){var a=this.addAudioSprite(t);return a.once(T.COMPLETE,a.destroy,a),a.play(r,o)},remove:function remove(t){var r=this.sounds.indexOf(t);return-1!==r&&(t.destroy(),this.sounds.splice(r,1),!0)},removeAll:function removeAll(){this.sounds.forEach((function(t){t.destroy()})),this.sounds.length=0},removeByKey:function removeByKey(t){for(var r=0,o=this.sounds.length-1;o>=0;o--){var a=this.sounds[o];a.key===t&&(a.destroy(),this.sounds.splice(o,1),r++)}return r},pauseAll:function pauseAll(){this.forEachActiveSound((function(t){t.pause()})),this.emit(T.PAUSE_ALL,this)},resumeAll:function resumeAll(){this.forEachActiveSound((function(t){t.resume()})),this.emit(T.RESUME_ALL,this)},stopAll:function stopAll(){this.forEachActiveSound((function(t){t.stop()})),this.emit(T.STOP_ALL,this)},stopByKey:function stopByKey(t){var r=0;return this.getAll(t).forEach((function(t){t.stop()&&r++})),r},unlock:A,onBlur:A,onFocus:A,onGameBlur:function onGameBlur(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function onGameFocus(){this.pauseOnBlur&&this.onFocus()},update:function update(t,r){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(T.UNLOCKED,this));for(var o=this.sounds.length-1;o>=0;o--)this.sounds[o].pendingRemove&&this.sounds.splice(o,1);this.sounds.forEach((function(o){o.update(t,r)}))},destroy:function destroy(){this.game.events.off(S.BLUR,this.onGameBlur,this),this.game.events.off(S.FOCUS,this.onGameFocus,this),this.game.events.off(S.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function forEachActiveSound(t,r){var o=this;this.sounds.forEach((function(a,h){a&&!a.pendingRemove&&t.call(r||o,a,h,o.sounds)}))},setRate:function setRate(t){return this.rate=t,this},rate:{get:function get(){return this._rate},set:function set(t){this._rate=t,this.forEachActiveSound((function(t){t.calculateRate()})),this.emit(T.GLOBAL_RATE,this,t)}},setDetune:function setDetune(t){return this.detune=t,this},detune:{get:function get(){return this._detune},set:function set(t){this._detune=t,this.forEachActiveSound((function(t){t.calculateRate()})),this.emit(T.GLOBAL_DETUNE,this,t)}}});t.exports=D},function(t,r,o){var a=o(0),h=o(9),d=o(70),T=o(17),S=o(1),A=new a({Extends:h,initialize:function BaseSound(t,r,o){h.call(this),this.manager=t,this.key=r,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=T(this.config,o),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function addMarker(t){return!(!t||!t.name||"string"!=typeof t.name||(this.markers[t.name]?(console.error("addMarker "+t.name+" already exists in Sound"),1):(t=T(!0,{name:"",start:0,duration:this.totalDuration-(t.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},t),this.markers[t.name]=t,0)))},updateMarker:function updateMarker(t){return!(!t||!t.name||"string"!=typeof t.name||(this.markers[t.name]?(this.markers[t.name]=T(!0,this.markers[t.name],t),0):(console.warn("Audio Marker: "+t.name+" missing in Sound: "+this.key),1)))},removeMarker:function removeMarker(t){var r=this.markers[t];return r?(this.markers[t]=null,r):null},play:function play(t,r){if(void 0===t&&(t=""),"object"===_typeof(t)&&(r=t,t=""),"string"!=typeof t)return!1;if(t){if(!this.markers[t])return console.warn("Marker: "+t+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[t],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}else this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;return this.resetConfig(),this.currentConfig=T(this.currentConfig,r),this.isPlaying=!0,this.isPaused=!1,!0},pause:function pause(){return!(this.isPaused||!this.isPlaying||(this.isPlaying=!1,this.isPaused=!0,0))},resume:function resume(){return!(!this.isPaused||this.isPlaying||(this.isPlaying=!0,this.isPaused=!1,0))},stop:function stop(){return!(!this.isPaused&&!this.isPlaying||(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),0))},applyConfig:function applyConfig(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function resetConfig(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:S,calculateRate:function calculateRate(){var t=this.currentConfig.detune+this.manager.detune,r=Math.pow(1.0005777895065548,t);this.totalRate=this.currentConfig.rate*this.manager.rate*r},destroy:function destroy(){this.pendingRemove||(this.emit(d.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});t.exports=A},function(t,r,o){var a=o(209),h=o(435);t.exports=function RotateMatrix(t,r){if(void 0===r&&(r=90),!a(t))return null;if("string"!=typeof r&&(r=(r%360+360)%360),90===r||-270===r||"rotateLeft"===r)(t=h(t)).reverse();else if(-90===r||270===r||"rotateRight"===r)t.reverse(),t=h(t);else if(180===Math.abs(r)||"rotate180"===r){for(var o=0;o<t.length;o++)t[o].reverse();t.reverse()}return t}},function(t,r,o){var a=o(0),h=o(18),d=o(11),T=o(15),S=o(1043),A=o(1044),P=o(212),O=o(10),D=o(1045),L=new a({Extends:T,Mixins:[d.Alpha,d.BlendMode,d.Depth,d.Mask,d.Origin,d.Pipeline,d.ScrollFactor,d.Texture,d.Tint,d.Transform,d.Visible,D],initialize:function BitmapText(t,r,o,a,h,d,A){void 0===h&&(h=""),void 0===A&&(A=0),T.call(this,t,"BitmapText"),this.font=a;var P=this.scene.sys.cache.bitmapFont.get(a);P||console.warn("Invalid BitmapText key: "+a),this.fontData=P.data,this._text="",this._fontSize=d||this.fontData.size,this._letterSpacing=0,this._align=A,this._bounds=S(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=P.fromAtlas,this.setTexture(P.texture,P.frame),this.setPosition(r,o),this.setOrigin(0,0),this.initPipeline(),this.setText(h)},setLeftAlign:function setLeftAlign(){return this._align=L.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function setCenterAlign(){return this._align=L.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function setRightAlign(){return this._align=L.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function setFontSize(t){return this._fontSize=t,this._dirty=!0,this},setLetterSpacing:function setLetterSpacing(t){return void 0===t&&(t=0),this._letterSpacing=t,this._dirty=!0,this},setText:function setText(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this.text&&(this._text=t.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function setDropShadow(t,r,o,a){return void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=.5),this.dropShadowX=t,this.dropShadowY=r,this.dropShadowColor=o,this.dropShadowAlpha=a,this},setCharacterTint:function setCharacterTint(t,r,o,a,d,T,S){void 0===t&&(t=0),void 0===r&&(r=1),void 0===o&&(o=!1),void 0===a&&(a=-1),void 0===d&&(d=a,T=a,S=a);var A=this.text.length;-1===r&&(r=A),t<0&&(t=A+t),t=h(t,0,A-1);for(var P=h(t+r,t,A),O=this.charColors,D=t;D<P;D++){var L=O[D];if(-1===a)O[D]=null;else{var I=o?1:0;L?(L.tintEffect=I,L.tintTL=a,L.tintTR=d,L.tintBL=T,L.tintBR=S):O[D]={tintEffect:I,tintTL:a,tintTR:d,tintBL:T,tintBR:S}}}return this},setWordTint:function setWordTint(t,r,o,a,h,d,T){void 0===r&&(r=1);for(var S=this.getTextBounds().words,A="number"==typeof t,P=0,O=0;O<S.length;O++){var D=S[O];if((A&&O===t||!A&&D.word===t)&&(this.setCharacterTint(D.i,D.word.length,o,a,h,d,T),++P===r))return this}return this},getTextBounds:function getTextBounds(t){var r=this._bounds;return(this._dirty||t||this.scaleX!==r.scaleX||this.scaleY!==r.scaleY)&&(S(this,t,!0,r),this._dirty=!1),r},getCharacterAt:function getCharacterAt(t,r,o){for(var a=this.getLocalPoint(t,r,null,o),h=this.getTextBounds().characters,d=new O,T=0;T<h.length;T++){var S=h[T];if(d.setTo(S.x,S.t,S.r-S.x,S.b),d.contains(a.x,a.y))return S}return null},updateDisplayOrigin:function updateDisplayOrigin(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function setFont(t,r,o){if(void 0===r&&(r=this._fontSize),void 0===o&&(o=this._align),t!==this.font){var a=this.scene.sys.cache.bitmapFont.get(t);a&&(this.font=t,this.fontData=a.data,this._fontSize=r,this._align=o,this.fromAtlas=!0===a.fromAtlas,this.setTexture(a.texture,a.frame),S(this,!1,!0,this._bounds))}return this},setMaxWidth:function setMaxWidth(t,r){return this._maxWidth=t,this._dirty=!0,void 0!==r&&(this.wordWrapCharCode=r),this},align:{set:function set(t){this._align=t,this._dirty=!0},get:function get(){return this._align}},text:{set:function set(t){this.setText(t)},get:function get(){return this._text}},fontSize:{set:function set(t){this._fontSize=t,this._dirty=!0},get:function get(){return this._fontSize}},letterSpacing:{set:function set(t){this._letterSpacing=t,this._dirty=!0},get:function get(){return this._letterSpacing}},maxWidth:{set:function set(t){this._maxWidth=t,this._dirty=!0},get:function get(){return this._maxWidth}},width:{get:function get(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function get(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function toJSON(){var t=d.ToJSON(this),r={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return t.data=r,t},preDestroy:function preDestroy(){this.charColors.length=0,this._bounds=null,this.fontData=null}});L.ALIGN_LEFT=0,L.ALIGN_CENTER=1,L.ALIGN_RIGHT=2,L.ParseFromAtlas=A,L.ParseXMLBitmapFont=P,t.exports=L},function(t,r,o){var a=new(o(0))({initialize:function Set(t){if(this.entries=[],Array.isArray(t))for(var r=0;r<t.length;r++)this.set(t[r])},set:function set(t){return-1===this.entries.indexOf(t)&&this.entries.push(t),this},get:function get(t,r){for(var o=0;o<this.entries.length;o++){var a=this.entries[o];if(a[t]===r)return a}},getArray:function getArray(){return this.entries.slice(0)},delete:function _delete(t){var r=this.entries.indexOf(t);return r>-1&&this.entries.splice(r,1),this},dump:function dump(){console.group("Set");for(var t=0;t<this.entries.length;t++){var r=this.entries[t];console.log(r)}console.groupEnd()},each:function each(t,r){var o,a=this.entries.slice(),h=a.length;if(r)for(o=0;o<h&&!1!==t.call(r,a[o],o);o++);else for(o=0;o<h&&!1!==t(a[o],o);o++);return this},iterate:function iterate(t,r){var o,a=this.entries.length;if(r)for(o=0;o<a&&!1!==t.call(r,this.entries[o],o);o++);else for(o=0;o<a&&!1!==t(this.entries[o],o);o++);return this},iterateLocal:function iterateLocal(t){var r,o=[];for(r=1;r<arguments.length;r++)o.push(arguments[r]);var a=this.entries.length;for(r=0;r<a;r++){var h=this.entries[r];h[t].apply(h,o)}return this},clear:function clear(){return this.entries.length=0,this},contains:function contains(t){return this.entries.indexOf(t)>-1},union:function union(t){var r=new a;return t.entries.forEach((function(t){r.set(t)})),this.entries.forEach((function(t){r.set(t)})),r},intersect:function intersect(t){var r=new a;return this.entries.forEach((function(o){t.contains(o)&&r.set(o)})),r},difference:function difference(t){var r=new a;return this.entries.forEach((function(o){t.contains(o)||r.set(o)})),r},size:{get:function get(){return this.entries.length},set:function set(t){return t<this.entries.length?this.entries.length=t:this.entries.length}}});t.exports=a},function(t,r,o){var a=o(0),h=o(11),d=o(15),T=o(189),S=o(92),A=o(1182),P=new a({Extends:d,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.GetBounds,h.Mask,h.Pipeline,h.ScrollFactor,h.Transform,h.Visible,A],initialize:function PointLight(t,r,o,a,h,A,P){void 0===a&&(a=16777215),void 0===h&&(h=128),void 0===A&&(A=1),void 0===P&&(P=.1),d.call(this,t,"PointLight"),this.initPipeline(S.POINTLIGHT_PIPELINE),this.setPosition(r,o),this.color=T(a),this.intensity=A,this.attenuation=P,this.width=2*h,this.height=2*h,this._radius=h},radius:{get:function get(){return this._radius},set:function set(t){this._radius=t,this.width=2*t,this.height=2*t}},originX:{get:function get(){return.5}},originY:{get:function get(){return.5}},displayOriginX:{get:function get(){return this._radius}},displayOriginY:{get:function get(){return this._radius}}});t.exports=P},function(t,r){t.exports=function CircleToRectangle(t,r){var o=r.width/2,a=r.height/2,h=Math.abs(t.x-r.x-o),d=Math.abs(t.y-r.y-a),T=o+t.radius,S=a+t.radius;if(h>T||d>S)return!1;if(h<=o||d<=a)return!0;var A=h-o,P=d-a;return A*A+P*P<=t.radius*t.radius}},function(t,r){t.exports=function RectangleToRectangle(t,r){return!(t.width<=0||t.height<=0||r.width<=0||r.height<=0||t.right<r.x||t.bottom<r.y||t.x>r.right||t.y>r.bottom)}},function(t,r,o){var a=o(6),h={},d={register:function(t,r,o,a,d){h[t]={plugin:r,mapping:o,settingsKey:a,configKey:d}},getPlugin:function(t){return h[t]},install:function(t){var r=t.scene.sys,o=r.settings.input,d=r.game.config;for(var T in h){var S=h[T].plugin,A=h[T].mapping,P=h[T].settingsKey,O=h[T].configKey;a(o,P,d[O])&&(t[A]=new S(t))}},remove:function(t){h.hasOwnProperty(t)&&delete h[t]}};t.exports=d},function(t,r,o){t.exports={ANY_KEY_DOWN:o(1323),ANY_KEY_UP:o(1324),COMBO_MATCH:o(1325),DOWN:o(1326),KEY_DOWN:o(1327),KEY_UP:o(1328),UP:o(1329)}},function(t,r){t.exports=function GetURL(t,r){return!!t.url&&(t.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?t.url:r+t.url)}},function(t,r){t.exports=function XHRSettings(t,r,o,a,h,d){return void 0===t&&(t=""),void 0===r&&(r=!0),void 0===o&&(o=""),void 0===a&&(a=""),void 0===h&&(h=0),void 0===d&&(d=!1),{responseType:t,async:r,user:o,password:a,timeout:h,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:d}}},function(t,r,o){var a=o(0),h=o(243),d=o(73),T=new a({Extends:d,Mixins:[h.Acceleration,h.Angular,h.Bounce,h.Debug,h.Drag,h.Enable,h.Friction,h.Gravity,h.Immovable,h.Mass,h.Pushable,h.Size,h.Velocity],initialize:function ArcadeSprite(t,r,o,a,h){d.call(this,t,r,o,a,h),this.body=null}});t.exports=T},function(t,r,o){var a=o(119);t.exports=function GetTileAt(t,r,o,h){if(void 0===o&&(o=!1),a(t,r,h)){var d=h.data[r][t]||null;return d?-1===d.index?o?d:null:d:null}return null}},function(t,r){t.exports=function RunCull(t,r,o,a){var h,d,T,S=t.data,A=t.width,P=t.height,O=t.tilemapLayer,D=Math.max(0,r.left),L=Math.min(A,r.right),I=Math.max(0,r.top),B=Math.min(P,r.bottom);if(0===o)for(d=I;d<B;d++)for(h=D;S[d]&&h<L;h++)(T=S[d][h])&&-1!==T.index&&T.visible&&0!==T.alpha&&a.push(T);else if(1===o)for(d=I;d<B;d++)for(h=L;S[d]&&h>=D;h--)(T=S[d][h])&&-1!==T.index&&T.visible&&0!==T.alpha&&a.push(T);else if(2===o)for(d=B;d>=I;d--)for(h=D;S[d]&&h<L;h++)(T=S[d][h])&&-1!==T.index&&T.visible&&0!==T.alpha&&a.push(T);else if(3===o)for(d=B;d>=I;d--)for(h=L;S[d]&&h>=D;h--)(T=S[d][h])&&-1!==T.index&&T.visible&&0!==T.alpha&&a.push(T);return O.tilesDrawn=a.length,O.tilesTotal=A*P,a}},function(t,r){t.exports=function SetLayerCollisionIndex(t,r,o){var a=o.collideIndexes.indexOf(t);r&&-1===a?o.collideIndexes.push(t):r||-1===a||o.collideIndexes.splice(a,1)}},function(t,r,o){var a=o(2);t.exports=function CreateGroupLayer(t,r,o){if(!r)return{i:0,layers:t.layers,name:"",opacity:1,visible:!0,x:0,y:0};var h=r.x+a(r,"startx",0)*t.tilewidth+a(r,"offsetx",0),d=r.y+a(r,"starty",0)*t.tileheight+a(r,"offsety",0);return{i:0,layers:r.layers,name:o.name+r.name+"/",opacity:o.opacity*r.opacity,visible:o.visible&&r.visible,x:o.x+h,y:o.y+d}}},function(t,r){t.exports=function GetNewValue(t,r,o){return t.hasOwnProperty(r)?"function"===_typeof(t[r])?function valueCallback(o,a,h,d,T,S){return t[r](o,a,h,d,T,S)}:function valueCallback(){return t[r]}:"function"==typeof o?o:function valueCallback(){return o}}},function(t,r,o){var a=o(265),h=o(13),d=o(99),T=o(80),S=o(162),A=o(583),P=o(263),O=o(6),D=o(264),L=o(266),I=o(268);t.exports=function TweenBuilder(t,r,o){void 0===o&&(o=a);for(var B=o.targets?o.targets:P(r),N=A(r),G=S(r,"delay",o.delay),Y=S(r,"duration",o.duration),X=O(r,"easeParams",o.easeParams),U=T(O(r,"ease",o.ease),X),z=S(r,"hold",o.hold),V=S(r,"repeat",o.repeat),W=S(r,"repeatDelay",o.repeatDelay),H=d(r,"yoyo",o.yoyo),q=d(r,"flipX",o.flipX),Z=d(r,"flipY",o.flipY),K=[],J=0;J<N.length;J++)for(var Q=N[J].key,$=N[J].value,tt=0;tt<B.length;tt++){var et=D(Q,$),it=I(B[tt],tt,Q,et.getEnd,et.getStart,et.getActive,T(O($,"ease",U),O($,"easeParams",X)),S($,"delay",G),S($,"duration",Y),d($,"yoyo",H),S($,"hold",z),S($,"repeat",V),S($,"repeatDelay",W),d($,"flipX",q),d($,"flipY",Z));K.push(it)}var nt=new L(t,K,B);nt.offset=h(r,"offset",null),nt.completeDelay=h(r,"completeDelay",0),nt.loop=Math.round(h(r,"loop",0)),nt.loopDelay=Math.round(h(r,"loopDelay",0)),nt.paused=d(r,"paused",!1),nt.useFrames=d(r,"useFrames",!1);for(var rt=O(r,"callbackScope",nt),st=[nt,null],ot=L.TYPES,at=0;at<ot.length;at++){var ht=ot[at],lt=O(r,ht,!1);if(lt){var ut=O(r,ht+"Scope",rt),ct=O(r,ht+"Params",[]);nt.setCallback(ht,lt,st.concat(ct),ut)}}return nt}},function(t,r,o){var a=o(0),h=o(102),d=o(2),T=o(132),S=o(185),A=new a({initialize:function AnimationState(t){this.parent=t,this.animationManager=t.scene.sys.anims,this.animationManager.on(T.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function chain(t){var r=this.parent;if(void 0===t)return this.nextAnimsQueue.length=0,this.nextAnim=null,r;Array.isArray(t)||(t=[t]);for(var o=0;o<t.length;o++){var a=t[o];null===this.nextAnim?this.nextAnim=a:this.nextAnimsQueue.push(a)}return this.parent},getName:function getName(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function getFrameName(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function load(t){this.isPlaying&&this.stop();var r=this.animationManager,o="string"==typeof t?t:d(t,"key",null),a=this.exists(o)?this.get(o):r.get(o);if(a){this.currentAnim=a;var h=a.getTotalFrames(),T=d(t,"frameRate",a.frameRate),S=d(t,"duration",a.duration);a.calculateDuration(this,h,S,T),this.delay=d(t,"delay",a.delay),this.repeat=d(t,"repeat",a.repeat),this.repeatDelay=d(t,"repeatDelay",a.repeatDelay),this.yoyo=d(t,"yoyo",a.yoyo),this.showOnStart=d(t,"showOnStart",a.showOnStart),this.hideOnComplete=d(t,"hideOnComplete",a.hideOnComplete),this.skipMissedFrames=d(t,"skipMissedFrames",a.skipMissedFrames),this.timeScale=d(t,"timeScale",this.timeScale);var A=d(t,"startFrame",0);A>a.getTotalFrames()&&(A=0);var P=a.frames[A];0!==A||this.forward||(P=a.getLastFrame()),this.currentFrame=P}else console.warn("Missing animation: "+o);return this.parent},pause:function pause(t){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),void 0!==t&&this.setCurrentFrame(t),this.parent},resume:function resume(t){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),void 0!==t&&this.setCurrentFrame(t),this.parent},playAfterDelay:function playAfterDelay(t,r){if(this.isPlaying){var o=this.nextAnim,a=this.nextAnimsQueue;o&&a.unshift(o),this.nextAnim=t,this._pendingStop=1,this._pendingStopValue=r}else this.delayCounter=r,this.play(t,!0);return this.parent},playAfterRepeat:function playAfterRepeat(t,r){if(void 0===r&&(r=1),this.isPlaying){var o=this.nextAnim,a=this.nextAnimsQueue;o&&a.unshift(o),-1!==this.repeatCounter&&r>this.repeatCounter&&(r=this.repeatCounter),this.nextAnim=t,this._pendingStop=2,this._pendingStopValue=r}else this.play(t);return this.parent},play:function play(t,r){void 0===r&&(r=!1);var o=this.currentAnim,a=this.parent,h="string"==typeof t?t:t.key;if(r&&this.isPlaying&&o.key===h)return a;if(o&&this.isPlaying){var d=this.animationManager.getMix(o.key,t);if(d>0)return this.playAfterDelay(t,d)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(t)},playReverse:function playReverse(t,r){void 0===r&&(r=!1);var o="string"==typeof t?t:t.key;return r&&this.isPlaying&&this.currentAnim.key===o?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(t))},startAnimation:function startAnimation(t){this.load(t);var r=this.currentAnim,o=this.parent;return r?(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat,r.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,0===this.delayCounter&&this.handleStart(),o):o},handleStart:function handleStart(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(T.ANIMATION_START)},handleRepeat:function handleRepeat(){this.pendingRepeat=!1,this.emitEvents(T.ANIMATION_REPEAT)},handleStop:function handleStop(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(T.ANIMATION_STOP)},handleComplete:function handleComplete(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(T.ANIMATION_COMPLETE,T.ANIMATION_COMPLETE_KEY)},emitEvents:function emitEvents(t,r){var o=this.currentAnim,a=this.currentFrame,h=this.parent,d=a.textureFrame;h.emit(t,o,a,h,d),r&&h.emit(r+o.key,o,a,h,d)},reverse:function reverse(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function getProgress(){var t=this.currentFrame;if(!t)return 0;var r=t.progress;return this.inReverse&&(r*=-1),r},setProgress:function setProgress(t){return this.forward||(t=1-t),this.setCurrentFrame(this.currentAnim.getFrameByProgress(t)),this.parent},setRepeat:function setRepeat(t){return this.repeatCounter=-1===t?Number.MAX_VALUE:t,this.parent},globalRemove:function globalRemove(t,r){void 0===r&&(r=this.currentAnim),this.isPlaying&&r.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function restart(t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);var o=this.currentAnim,a=this.parent;return o?(r&&(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat),o.getFirstTick(this),this.emitEvents(T.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!t,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(o.frames[0]),this.parent):a},complete:function complete(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var t=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(t)}return this.parent},stop:function stop(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var t=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(t)}return this.parent},stopAfterDelay:function stopAfterDelay(t){return this._pendingStop=1,this._pendingStopValue=t,this.parent},stopAfterRepeat:function stopAfterRepeat(t){return void 0===t&&(t=1),-1!==this.repeatCounter&&t>this.repeatCounter&&(t=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=t,this.parent},stopOnFrame:function stopOnFrame(t){return this._pendingStop=3,this._pendingStopValue=t,this.parent},getTotalFrames:function getTotalFrames(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function update(t,r){var o=this.currentAnim;if(this.isPlaying&&o&&!o.paused){if(this.accumulator+=r*this.timeScale,1===this._pendingStop&&(this._pendingStopValue-=r,this._pendingStopValue<=0))return this.stop();if(this.hasStarted){if(this.accumulator>=this.nextTick&&(this.forward?o.nextFrame(this):o.previousFrame(this),this.isPlaying&&0===this._pendingStop&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var a=0;do{this.forward?o.nextFrame(this):o.previousFrame(this),a++}while(this.isPlaying&&this.accumulator>this.nextTick&&a<60)}}else this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart())}},setCurrentFrame:function setCurrentFrame(t){var r=this.parent;return this.currentFrame=t,r.texture=t.frame.texture,r.frame=t.frame,r.isCropped&&r.frame.updateCropUVs(r._crop,r.flipX,r.flipY),t.setAlpha&&(r.alpha=t.alpha),r.setSizeToFrame(),r._originComponent&&(t.frame.customPivot?r.setOrigin(t.frame.pivotX,t.frame.pivotY):r.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(T.ANIMATION_UPDATE),3===this._pendingStop&&this._pendingStopValue===t&&this.stop()),r},nextFrame:function nextFrame(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function previousFrame(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function get(t){return this.anims?this.anims.get(t):null},exists:function exists(t){return!!this.anims&&this.anims.has(t)},create:function create(t){var r=t.key,o=!1;return r&&((o=this.get(r))||(o=new S(this,r,t),this.anims||(this.anims=new h),this.anims.set(r,o))),o},generateFrameNames:function generateFrameNames(t,r){return this.animationManager.generateFrameNames(t,r)},generateFrameNumbers:function generateFrameNumbers(t,r){return this.animationManager.generateFrameNumbers(t,r)},remove:function remove(t){var r=this.get(t);return r&&(this.currentAnim===r&&this.stop(),this.anims.delete(t)),r},destroy:function destroy(){this.animationManager.off(T.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function get(){return this._paused}}});t.exports=A},function(t,r,o){var a={};t.exports=a;var h=o(166);a._motionWakeThreshold=.18,a._motionSleepThreshold=.08,a._minBias=.9,a.update=function(t,r){for(var o=r*r*r,h=0;h<t.length;h++){var d=t[h],T=d.speed*d.speed+d.angularSpeed*d.angularSpeed;if(0===d.force.x&&0===d.force.y){var S=Math.min(d.motion,T),A=Math.max(d.motion,T);d.motion=a._minBias*S+(1-a._minBias)*A,d.sleepThreshold>0&&d.motion<a._motionSleepThreshold*o?(d.sleepCounter+=1,d.sleepCounter>=d.sleepThreshold&&a.set(d,!0)):d.sleepCounter>0&&(d.sleepCounter-=1)}else a.set(d,!1)}},a.afterCollisions=function(t,r){for(var o=r*r*r,h=0;h<t.length;h++){var d=t[h];if(d.isActive){var T=d.collision,S=T.bodyA.parent,A=T.bodyB.parent;if(!(S.isSleeping&&A.isSleeping||S.isStatic||A.isStatic)&&(S.isSleeping||A.isSleeping)){var P=S.isSleeping&&!S.isStatic?S:A,O=P===S?A:S;!P.isStatic&&O.motion>a._motionWakeThreshold*o&&a.set(P,!1)}}}},a.set=function(t,r){var o=t.isSleeping;r?(t.isSleeping=!0,t.sleepCounter=t.sleepThreshold,t.positionImpulse.x=0,t.positionImpulse.y=0,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.anglePrev=t.angle,t.speed=0,t.angularSpeed=0,t.motion=0,o||h.trigger(t,"sleepStart")):(t.isSleeping=!1,t.sleepCounter=0,o&&h.trigger(t,"sleepEnd"))}},function(t,r,o){var a={};t.exports=a;var h=o(32);a.on=function(t,r,o){for(var a,h=r.split(" "),d=0;d<h.length;d++)a=h[d],t.events=t.events||{},t.events[a]=t.events[a]||[],t.events[a].push(o);return o},a.off=function(t,r,o){if(r){"function"==typeof r&&(o=r,r=h.keys(t.events).join(" "));for(var a=r.split(" "),d=0;d<a.length;d++){var T=t.events[a[d]],S=[];if(o&&T)for(var A=0;A<T.length;A++)T[A]!==o&&S.push(T[A]);t.events[a[d]]=S}}else t.events={}},a.trigger=function(t,r,o){var a,d,T,S,A=t.events;if(A&&h.keys(A).length>0){o||(o={}),a=r.split(" ");for(var P=0;P<a.length;P++)if(T=A[d=a[P]]){(S=h.clone(o,!1)).name=d,S.source=t;for(var O=0;O<T.length;O++)T[O].apply(t,[S])}}}},function(t,r,o){var a=o(175),h=o(92),d=o(74),T={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function initPipeline(t){void 0===t&&(t=h.MULTI_PIPELINE);var r=this.scene.sys.renderer;if(!r)return!1;var o=r.pipelines;if(this.postPipelines=[],this.pipelineData={},o){var a=o.get(t);if(a)return this.defaultPipeline=a,this.pipeline=a,!0}return!1},setPipeline:function setPipeline(t,r,o){var h=this.scene.sys.renderer;if(!h)return this;var d=h.pipelines;if(d){var T=d.get(t);T&&(this.pipeline=T),r&&(this.pipelineData=o?a(r):r)}return this},setPostPipeline:function setPostPipeline(t,r,o){var h=this.scene.sys.renderer;if(!h)return this;var d=h.pipelines;if(d){Array.isArray(t)||(t=[t]);for(var T=0;T<t.length;T++){var S=d.getPostPipeline(t[T],this);S&&this.postPipelines.push(S)}r&&(this.pipelineData=o?a(r):r)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function setPipelineData(t,r){var o=this.pipelineData;return void 0===r?delete o[t]:o[t]=r,this},getPostPipeline:function getPostPipeline(t){for(var r=this.postPipelines,o=[],a=0;a<r.length;a++){var h=r[a];("string"==typeof t&&h.name===t||h instanceof t)&&o.push(h)}return 1===o.length?o[0]:o},resetPipeline:function resetPipeline(t,r){return void 0===t&&(t=!1),void 0===r&&(r=!1),this.pipeline=this.defaultPipeline,t&&(this.postPipelines=[],this.hasPostPipeline=!1),r&&(this.pipelineData={}),null!==this.pipeline},resetPostPipeline:function resetPostPipeline(t){void 0===t&&(t=!1);for(var r=this.postPipelines,o=0;o<r.length;o++)r[o].destroy();this.postPipelines=[],this.hasPostPipeline=!1,t&&(this.pipelineData={})},removePostPipeline:function removePostPipeline(t){for(var r=this.postPipelines,o=r.length-1;o>=0;o--){var a=r[o];("string"==typeof t&&a.name===t||"string"!=typeof t&&a instanceof t)&&(a.destroy(),d(r,o))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function getPipelineName(){return this.pipeline.name}};t.exports=T},function(t,r){t.exports={DEFAULT:0,LINEAR:0,NEAREST:1}},function(t,r,o){var a=o(4);t.exports=function CircumferencePoint(t,r,o){return void 0===o&&(o=new a),o.x=t.x+t.radius*Math.cos(r),o.y=t.y+t.radius*Math.sin(r),o}},function(t,r,o){var a=o(4);t.exports=function Random(t,r){void 0===r&&(r=new a);var o=2*Math.PI*Math.random(),h=Math.random()+Math.random(),d=h>1?2-h:h,T=d*Math.cos(o),S=d*Math.sin(o);return r.x=t.x+T*t.radius,r.y=t.y+S*t.radius,r}},function(t,r,o){var a=o(130),h=o(4);t.exports=function GetPoint(t,r,o){if(void 0===o&&(o=new h),r<=0||r>=1)return o.x=t.x,o.y=t.y,o;var d=a(t)*r;return r>.5?(d-=t.width+t.height)<=t.width?(o.x=t.right-d,o.y=t.bottom):(o.x=t.x,o.y=t.bottom-(d-t.width)):d<=t.width?(o.x=t.x+d,o.y=t.y):(o.x=t.right,o.y=t.y+(d-t.width)),o}},function(t,r,o){var a=o(67),h=o(4);t.exports=function GetPoints(t,r,o,d){void 0===d&&(d=[]),!r&&o>0&&(r=a(t)/o);for(var T=t.x1,S=t.y1,A=t.x2,P=t.y2,O=0;O<r;O++){var D=O/r,L=T+(A-T)*D,I=S+(P-S)*D;d.push(new h(L,I))}return d}},function(t,r,o){var a=o(4);t.exports=function Random(t,r){void 0===r&&(r=new a);var o=Math.random();return r.x=t.x1+o*(t.x2-t.x1),r.y=t.y1+o*(t.y2-t.y1),r}},function(t,r,o){var a=o(4);t.exports=function Random(t,r){return void 0===r&&(r=new a),r.x=t.x+Math.random()*t.width,r.y=t.y+Math.random()*t.height,r}},function(t,r){t.exports=function DeepCopy(t){var r,o,a;if("object"!==_typeof(t)||null===t)return t;for(a in r=Array.isArray(t)?[]:{},t)o=t[a],r[a]=DeepCopy(o);return r}},function(t,r){t.exports=function ToJSON(t){var r={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(r.textureKey=t.texture.key,r.frameKey=t.frame.name),r}},function(t,r,o){var a=o(3);t.exports=function TransformXY(t,r,o,h,d,T,S,A){void 0===A&&(A=new a);var P=Math.sin(d),O=Math.cos(d),D=O*T,L=P*T,I=-P*S,B=O*S,N=1/(D*B+I*-L);return A.x=B*N*t+-I*N*r+(h*I-o*B)*N,A.y=D*N*r+-L*N*t+(-h*D+o*L)*N,A}},function(t,r){t.exports=function RotateLeft(t,r){void 0===r&&(r=1);for(var o=null,a=0;a<r;a++)o=t.shift(),t.push(o);return o}},function(t,r){t.exports=function RotateRight(t,r){void 0===r&&(r=1);for(var o=null,a=0;a<r;a++)o=t.pop(),t.unshift(o);return o}},function(t,r,o){var a=o(4);t.exports=function Random(t,r){void 0===r&&(r=new a);var o=Math.random()*Math.PI*2,h=Math.sqrt(Math.random());return r.x=t.x+h*Math.cos(o)*t.width/2,r.y=t.y+h*Math.sin(o)*t.height/2,r}},function(t,r,o){var a=o(4);t.exports=function Random(t,r){void 0===r&&(r=new a);var o=t.x2-t.x1,h=t.y2-t.y1,d=t.x3-t.x1,T=t.y3-t.y1,S=Math.random(),A=Math.random();return S+A>=1&&(S=1-S,A=1-A),r.x=t.x1+(o*S+d*A),r.y=t.y1+(h*S+T*A),r}},function(t,r){t.exports=function RotateAroundDistance(t,r,o,a,h){var d=a+Math.atan2(t.y-o,t.x-r);return t.x=r+h*Math.cos(d),t.y=o+h*Math.sin(d),t}},function(t,r){t.exports=function SmootherStep(t,r,o){return(t=Math.max(0,Math.min(1,(t-r)/(o-r))))*t*t*(t*(6*t-15)+10)}},function(t,r){t.exports=function SmoothStep(t,r,o){return t<=r?0:t>=o?1:(t=(t-r)/(o-r))*t*(3-2*t)}},function(t,r,o){var a=o(18),h=o(0),d=o(132),T=o(318),S=o(319),A=o(6),P=o(320),O=new h({initialize:function Animation(t,r,o){this.manager=t,this.key=r,this.type="frame",this.frames=this.getFrames(t.textureManager,A(o,"frames",[]),A(o,"defaultTextureKey",null),A(o,"sortFrames",!0)),this.frameRate=A(o,"frameRate",null),this.duration=A(o,"duration",null),this.msPerFrame,this.skipMissedFrames=A(o,"skipMissedFrames",!0),this.delay=A(o,"delay",0),this.repeat=A(o,"repeat",0),this.repeatDelay=A(o,"repeatDelay",0),this.yoyo=A(o,"yoyo",!1),this.showOnStart=A(o,"showOnStart",!1),this.hideOnComplete=A(o,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(d.PAUSE_ALL,this.pause,this),this.manager.on(d.RESUME_ALL,this.resume,this))},getTotalFrames:function getTotalFrames(){return this.frames.length},calculateDuration:function calculateDuration(t,r,o,a){null===o&&null===a?(t.frameRate=24,t.duration=24/r*1e3):o&&null===a?(t.duration=o,t.frameRate=r/(o/1e3)):(t.frameRate=a,t.duration=r/a*1e3),t.msPerFrame=1e3/t.frameRate},addFrame:function addFrame(t){return this.addFrameAt(this.frames.length,t)},addFrameAt:function addFrameAt(t,r){var o=this.getFrames(this.manager.textureManager,r);if(o.length>0){if(0===t)this.frames=o.concat(this.frames);else if(t===this.frames.length)this.frames=this.frames.concat(o);else{var a=this.frames.slice(0,t),h=this.frames.slice(t);this.frames=a.concat(o,h)}this.updateFrameSequence()}return this},checkFrame:function checkFrame(t){return t>=0&&t<this.frames.length},getFirstTick:function getFirstTick(t){t.accumulator=0,t.nextTick=t.msPerFrame+t.currentFrame.duration},getFrameAt:function getFrameAt(t){return this.frames[t]},getFrames:function getFrames(t,r,o,a){void 0===a&&(a=!0);var h,d,T,O,D=[],L=1;if("string"==typeof r){O=r;var I=t.get(O).getFrameNames();a&&P(I),r=[],I.forEach((function(t){r.push({key:O,frame:t})}))}if(!Array.isArray(r)||0===r.length)return D;for(T=0;T<r.length;T++){var B=r[T],N=A(B,"key",o);if(N){var G=A(B,"frame",0),Y=t.getFrame(N,G);(d=new S(N,G,L,Y)).duration=A(B,"duration",0),d.isFirst=!h,h&&(h.nextFrame=d,d.prevFrame=h),D.push(d),h=d,L++}}if(D.length>0){d.isLast=!0,d.nextFrame=D[0],D[0].prevFrame=d;var X=1/(D.length-1);for(T=0;T<D.length;T++)D[T].progress=T*X}return D},getNextTick:function getNextTick(t){t.accumulator-=t.nextTick,t.nextTick=t.msPerFrame+t.currentFrame.duration},getFrameByProgress:function getFrameByProgress(t){return t=a(t,0,1),T(t,this.frames,"progress")},nextFrame:function nextFrame(t){var r=t.currentFrame;r.isLast?t.yoyo?this.handleYoyoFrame(t,!1):t.repeatCounter>0?t.inReverse&&t.forward?t.forward=!1:this.repeatAnimation(t):t.complete():this.updateAndGetNextTick(t,r.nextFrame)},handleYoyoFrame:function handleYoyoFrame(t,r){if(r||(r=!1),t.inReverse===!r&&t.repeatCounter>0)return(0===t.repeatDelay||t.pendingRepeat)&&(t.forward=r),void this.repeatAnimation(t);if(t.inReverse===r||0!==t.repeatCounter){t.forward=r;var o=r?t.currentFrame.nextFrame:t.currentFrame.prevFrame;this.updateAndGetNextTick(t,o)}else t.complete()},getLastFrame:function getLastFrame(){return this.frames[this.frames.length-1]},previousFrame:function previousFrame(t){var r=t.currentFrame;r.isFirst?t.yoyo?this.handleYoyoFrame(t,!0):t.repeatCounter>0?(t.inReverse&&!t.forward||(t.forward=!0),this.repeatAnimation(t)):t.complete():this.updateAndGetNextTick(t,r.prevFrame)},updateAndGetNextTick:function updateAndGetNextTick(t,r){t.setCurrentFrame(r),this.getNextTick(t)},removeFrame:function removeFrame(t){var r=this.frames.indexOf(t);return-1!==r&&this.removeFrameAt(r),this},removeFrameAt:function removeFrameAt(t){return this.frames.splice(t,1),this.updateFrameSequence(),this},repeatAnimation:function repeatAnimation(t){if(2===t._pendingStop){if(0===t._pendingStopValue)return t.stop();t._pendingStopValue--}t.repeatDelay>0&&!t.pendingRepeat?(t.pendingRepeat=!0,t.accumulator-=t.nextTick,t.nextTick+=t.repeatDelay):(t.repeatCounter--,t.forward?t.setCurrentFrame(t.currentFrame.nextFrame):t.setCurrentFrame(t.currentFrame.prevFrame),t.isPlaying&&(this.getNextTick(t),t.handleRepeat()))},toJSON:function toJSON(){var t={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach((function(r){t.frames.push(r.toJSON())})),t},updateFrameSequence:function updateFrameSequence(){for(var t,r=this.frames.length,o=1/(r-1),a=0;a<r;a++)(t=this.frames[a]).index=a+1,t.isFirst=!1,t.isLast=!1,t.progress=a*o,0===a?(t.isFirst=!0,1===r?(t.isLast=!0,t.nextFrame=t,t.prevFrame=t):(t.isLast=!1,t.prevFrame=this.frames[r-1],t.nextFrame=this.frames[a+1])):a===r-1&&r>1?(t.isLast=!0,t.prevFrame=this.frames[r-2],t.nextFrame=this.frames[0]):r>1&&(t.prevFrame=this.frames[a-1],t.nextFrame=this.frames[a+1]);return this},pause:function pause(){return this.paused=!0,this},resume:function resume(){return this.paused=!1,this},destroy:function destroy(){this.manager.off&&(this.manager.off(d.PAUSE_ALL,this.pause,this),this.manager.off(d.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var t=0;t<this.frames.length;t++)this.frames[t].destroy();this.frames=[],this.manager=null}});t.exports=O},function(t,r){t.exports=function Pad(t,r,o,a){void 0===r&&(r=0),void 0===o&&(o=" "),void 0===a&&(a=3);var h=0;if(r+1>=(t=t.toString()).length)switch(a){case 1:t=new Array(r+1-t.length).join(o)+t;break;case 3:var d=Math.ceil((h=r-t.length)/2);t=new Array(h-d+1).join(o)+t+new Array(d+1).join(o);break;default:t+=new Array(r+1-t.length).join(o)}return t}},function(t,r,o){var a=o(327),h=o(189),d=o(331),T=o(332);t.exports=function ValueToColor(t){switch(_typeof(t)){case"string":return"rgb"===t.substr(0,3).toLowerCase()?T(t):a(t);case"number":return h(t);case"object":return d(t)}}},function(t,r,o){var a=o(103);function ConvertValue(t,r,o,a){var h=(t+6*r)%6,d=Math.min(h,4-h,1);return Math.round(255*(a-a*o*Math.max(0,d)))}t.exports=function HSVToRGB(t,r,o,h){void 0===r&&(r=1),void 0===o&&(o=1);var d=ConvertValue(5,t,r,o),T=ConvertValue(3,t,r,o),S=ConvertValue(1,t,r,o);return h?h.setTo?h.setTo(d,T,S,h.alpha,!1):(h.r=d,h.g=T,h.b=S,h.color=a(d,T,S),h):{r:d,g:T,b:S,color:a(d,T,S)}}},function(t,r,o){var a=o(38),h=o(330);t.exports=function IntegerToColor(t){var r=h(t);return new a(r.r,r.g,r.b,r.a)}},function(t,r){t.exports=function CenterOn(t,r,o){return t.x=r-t.width/2,t.y=o-t.height/2,t}},function(t,r,o){var a=o(105),h=o(136),d=o(31),T={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};t.exports=function init(){if("function"==typeof importScripts)return T;T.canvas=!!window.CanvasRenderingContext2D;try{T.localStorage=!!localStorage.getItem}catch(r){T.localStorage=!1}T.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),T.fileSystem=!!window.requestFileSystem;var t=!1;return T.webGL=function testWebGL(){if(window.WebGLRenderingContext)try{var r=d.createWebGL(this),o=r.getContext("webgl")||r.getContext("experimental-webgl"),a=d.create2D(this),h=a.getContext("2d").createImageData(1,1);return t=h.data instanceof Uint8ClampedArray,d.remove(r),d.remove(a),!!o}catch(T){return!1}return!1}(),T.worker=!!window.Worker,T.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,T.getUserMedia=T.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,h.firefox&&h.firefoxVersion<21&&(T.getUserMedia=!1),!a.iOS&&(h.ie||h.firefox||h.chrome)&&(T.canvasBitBltShift=!0),(h.safari||h.mobileSafari)&&(T.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(T.vibration=!0),"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint32Array&&(T.littleEndian=function checkIsLittleEndian(){var t=new ArrayBuffer(4),r=new Uint8Array(t),o=new Uint32Array(t);return r[0]=161,r[1]=178,r[2]=195,r[3]=212,3569595041===o[0]||2712847316!==o[0]&&null}()),T.support32bit="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof Int32Array&&null!==T.littleEndian&&t,T}()},function(t,r){var o="";t.exports=function Smoothing(){var t=function getPrefix(t){for(var r=["i","webkitI","msI","mozI","oI"],o=0;o<r.length;o++){var a=r[o]+"mageSmoothingEnabled";if(a in t)return a}return null};return{disable:function disable(r){return""===o&&(o=t(r)),o&&(r[o]=!1),r},enable:function enable(r){return""===o&&(o=t(r)),o&&(r[o]=!0),r},getPrefix:t,isEnabled:function isEnabled(t){return null!==o?t[o]:null}}}()},function(t,r,o){var a=o(14),h=o(17),d={Angle:o(812),Distance:o(821),Easing:o(826),Fuzzy:o(827),Interpolation:o(830),Pow2:o(835),Snap:o(837),RandomDataGenerator:o(839),Average:o(840),Bernstein:o(356),Between:o(195),CatmullRom:o(194),CeilTo:o(841),Clamp:o(18),DegToRad:o(36),Difference:o(842),Euler:o(843),Factorial:o(357),FloatBetween:o(137),FloorTo:o(844),FromPercent:o(98),GetSpeed:o(845),IsEven:o(846),IsEvenStrict:o(847),Linear:o(135),MaxAdd:o(848),Median:o(849),MinSub:o(850),Percent:o(851),RadToDeg:o(196),RandomXY:o(852),RandomXYZ:o(853),RandomXYZW:o(854),Rotate:o(362),RotateAround:o(308),RotateAroundDistance:o(182),RotateTo:o(855),RoundAwayFromZero:o(363),RoundTo:o(856),SinCosTableGenerator:o(857),SmootherStep:o(183),SmoothStep:o(184),ToXY:o(858),TransformXY:o(177),Within:o(859),Wrap:o(68),Vector2:o(3),Vector3:o(39),Vector4:o(140),Matrix3:o(364),Matrix4:o(69),Quaternion:o(365),RotateVec3:o(860)};d=h(!1,d,a),t.exports=d},function(t,r){t.exports=function CatmullRom(t,r,o,a,h){var d=.5*(a-r),T=.5*(h-o),S=t*t;return(2*o-2*a+d+T)*(t*S)+(-3*o+3*a-2*d-T)*S+d*t+o}},function(t,r){t.exports=function Between(t,r){return Math.floor(Math.random()*(r-t+1)+t)}},function(t,r,o){var a=o(14);t.exports=function RadToDeg(t){return t*a.RAD_TO_DEG}},function(t,r,o){t.exports={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]}},function(t,r,o){var a=new(o(0))({initialize:function ColorMatrix(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function set(t){return this._matrix=t,this._dirty=!0,this},reset:function reset(){var t=this._matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=1,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=1,t[13]=0,t[14]=0,t[15]=0,t[16]=0,t[17]=0,t[18]=1,t[19]=0,this._dirty=!0,this},getData:function getData(){if(this._dirty){var t=new Float32Array(this._matrix);t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,this._data=t,this._dirty=!1}return this._data},brightness:function brightness(t,r){void 0===t&&(t=0),void 0===r&&(r=!1);var o=t;return this.multiply([o,0,0,0,0,0,o,0,0,0,0,0,o,0,0,0,0,0,1,0],r)},saturate:function saturate(t,r){void 0===t&&(t=0),void 0===r&&(r=!1);var o=2*t/3+1,a=-.5*(o-1);return this.multiply([o,a,a,0,0,a,o,a,0,0,a,a,o,0,0,0,0,0,1,0],r)},desaturate:function desaturate(t){return void 0===t&&(t=!1),this.saturate(-1,t)},hue:function hue(t,r){void 0===t&&(t=0),void 0===r&&(r=!1),t=t/180*Math.PI;var o=Math.cos(t),a=Math.sin(t),h=.213,d=.715,T=.072;return this.multiply([h+.787*o+a*-h,d+o*-d+a*-d,T+o*-T+.928*a,0,0,h+o*-h+.143*a,d+o*(1-d)+.14*a,T+o*-T+-.283*a,0,0,h+o*-h+-.787*a,d+o*-d+a*d,T+.928*o+a*T,0,0,0,0,0,1,0],r)},grayscale:function grayscale(t,r){return void 0===t&&(t=1),void 0===r&&(r=!1),this.saturate(-t,r)},blackWhite:function blackWhite(t){return void 0===t&&(t=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},contrast:function contrast(t,r){void 0===t&&(t=0),void 0===r&&(r=!1);var o=t+1,a=-.5*(o-1);return this.multiply([o,0,0,0,a,0,o,0,0,a,0,0,o,0,a,0,0,0,1,0],r)},negative:function negative(t){return void 0===t&&(t=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},desaturateLuminance:function desaturateLuminance(t){return void 0===t&&(t=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],t)},sepia:function sepia(t){return void 0===t&&(t=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},night:function night(t,r){return void 0===t&&(t=.1),void 0===r&&(r=!1),this.multiply([-2*t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0],r)},lsd:function lsd(t){return void 0===t&&(t=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},brown:function brown(t){return void 0===t&&(t=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},vintagePinhole:function vintagePinhole(t){return void 0===t&&(t=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},kodachrome:function kodachrome(t){return void 0===t&&(t=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},technicolor:function technicolor(t){return void 0===t&&(t=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},polaroid:function polaroid(t){return void 0===t&&(t=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},shiftToBGR:function shiftToBGR(t){return void 0===t&&(t=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},multiply:function multiply(t,r){r||this.reset();for(var o=this._matrix,a=[],h=0;h<20;h++)a[h]=o[h];return o[0]=a[0]*t[0]+a[1]*t[5]+a[2]*t[10]+a[3]*t[15],o[1]=a[0]*t[1]+a[1]*t[6]+a[2]*t[11]+a[3]*t[16],o[2]=a[0]*t[2]+a[1]*t[7]+a[2]*t[12]+a[3]*t[17],o[3]=a[0]*t[3]+a[1]*t[8]+a[2]*t[13]+a[3]*t[18],o[4]=a[0]*t[4]+a[1]*t[9]+a[2]*t[14]+a[3]*t[19]+a[4],o[5]=a[5]*t[0]+a[6]*t[5]+a[7]*t[10]+a[8]*t[15],o[6]=a[5]*t[1]+a[6]*t[6]+a[7]*t[11]+a[8]*t[16],o[7]=a[5]*t[2]+a[6]*t[7]+a[7]*t[12]+a[8]*t[17],o[8]=a[5]*t[3]+a[6]*t[8]+a[7]*t[13]+a[8]*t[18],o[9]=a[5]*t[4]+a[6]*t[9]+a[7]*t[14]+a[8]*t[19]+a[9],o[10]=a[10]*t[0]+a[11]*t[5]+a[12]*t[10]+a[13]*t[15],o[11]=a[10]*t[1]+a[11]*t[6]+a[12]*t[11]+a[13]*t[16],o[12]=a[10]*t[2]+a[11]*t[7]+a[12]*t[12]+a[13]*t[17],o[13]=a[10]*t[3]+a[11]*t[8]+a[12]*t[13]+a[13]*t[18],o[14]=a[10]*t[4]+a[11]*t[9]+a[12]*t[14]+a[13]*t[19]+a[14],o[15]=a[15]*t[0]+a[16]*t[5]+a[17]*t[10]+a[18]*t[15],o[16]=a[15]*t[1]+a[16]*t[6]+a[17]*t[11]+a[18]*t[16],o[17]=a[15]*t[2]+a[16]*t[7]+a[17]*t[12]+a[18]*t[17],o[18]=a[15]*t[3]+a[16]*t[8]+a[17]*t[13]+a[18]*t[18],o[19]=a[15]*t[4]+a[16]*t[9]+a[17]*t[14]+a[18]*t[19]+a[19],this._dirty=!0,this}});t.exports=a},function(t,r,o){var a=o(10),h=o(14);t.exports=function FromPoints(t,r){if(void 0===r&&(r=new a),0===t.length)return r;for(var o,d,T,S=Number.MAX_VALUE,A=Number.MAX_VALUE,P=h.MIN_SAFE_INTEGER,O=h.MIN_SAFE_INTEGER,D=0;D<t.length;D++)o=t[D],Array.isArray(o)?(d=o[0],T=o[1]):(d=o.x,T=o.y),S=Math.min(S,d),A=Math.min(A,T),P=Math.max(P,d),O=Math.max(O,T);return r.x=S,r.y=A,r.width=P-S,r.height=O-A,r}},function(t,r,o){var a=o(0),h=o(1),d=new a({initialize:function RGB(t,r,o){this._rgb=[0,0,0],this.onChangeCallback=h,this.dirty=!1,this.set(t,r,o)},set:function set(t,r,o){return void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=0),this._rgb=[t,r,o],this.onChange(),this},equals:function equals(t,r,o){var a=this._rgb;return a.r===t&&a.g===r&&a.b===o},onChange:function onChange(){this.dirty=!0;var t=this._rgb;this.onChangeCallback.call(this,t[0],t[1],t[2])},r:{get:function get(){return this._rgb[0]},set:function set(t){this._rgb[0]=t,this.onChange()}},g:{get:function get(){return this._rgb[1]},set:function set(t){this._rgb[1]=t,this.onChange()}},b:{get:function get(){return this._rgb[2]},set:function set(t){this._rgb[2]=t,this.onChange()}},destroy:function destroy(){this.onChangeCallback=null}});t.exports=d},function(t,r,o){var a={CENTER:o(403),ORIENTATION:o(404),SCALE_MODE:o(405),ZOOM:o(406)};t.exports=a},function(t,r){t.exports=function RemoveFromDOM(t){t.parentNode&&t.parentNode.removeChild(t)}},function(t,r){t.exports={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8}},function(t,r,o){var a=o(0),h=o(144),d=o(197),T=o(20),S=o(419),A=o(420),P=o(33),O=o(1),D=o(421),L=new a({initialize:function Systems(t,r){this.scene=t,this.game,this.renderer,this.config=r,this.settings=D.create(r),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=O},init:function init(t){this.settings.status=h.INIT,this.sceneUpdate=O,this.game=t,this.renderer=t.renderer,this.canvas=t.canvas,this.context=t.context;var r=t.plugins;this.plugins=r,r.addToScene(this,d.Global,[d.CoreScene,A(this),S(this)]),this.events.emit(T.BOOT,this),this.settings.isBooted=!0},step:function step(t,r){var o=this.events;o.emit(T.PRE_UPDATE,t,r),o.emit(T.UPDATE,t,r),this.sceneUpdate.call(this.scene,t,r),o.emit(T.POST_UPDATE,t,r)},render:function render(t){var r=this.displayList;r.depthSort(),this.events.emit(T.PRE_RENDER,t),this.cameras.render(t,r),this.events.emit(T.RENDER,t)},queueDepthSort:function queueDepthSort(){this.displayList.queueDepthSort()},depthSort:function depthSort(){this.displayList.depthSort()},pause:function pause(t){var r=this.events,o=this.settings;return this.settings.active&&(o.status=h.PAUSED,o.active=!1,r.emit(T.PAUSE,this,t)),this},resume:function resume(t){var r=this.events,o=this.settings;return this.settings.active||(o.status=h.RUNNING,o.active=!0,r.emit(T.RESUME,this,t)),this},sleep:function sleep(t){var r=this.events,o=this.settings;return o.status=h.SLEEPING,o.active=!1,o.visible=!1,r.emit(T.SLEEP,this,t),this},wake:function wake(t){var r=this.events,o=this.settings;return o.status=h.RUNNING,o.active=!0,o.visible=!0,r.emit(T.WAKE,this,t),o.isTransition&&r.emit(T.TRANSITION_WAKE,o.transitionFrom,o.transitionDuration),this},getData:function getData(){return this.settings.data},isSleeping:function isSleeping(){return this.settings.status===h.SLEEPING},isActive:function isActive(){return this.settings.status===h.RUNNING},isPaused:function isPaused(){return this.settings.status===h.PAUSED},isTransitioning:function isTransitioning(){return this.settings.isTransition||null!==this.scenePlugin._target},isTransitionOut:function isTransitionOut(){return null!==this.scenePlugin._target&&this.scenePlugin._duration>0},isTransitionIn:function isTransitionIn(){return this.settings.isTransition},isVisible:function isVisible(){return this.settings.visible},setVisible:function setVisible(t){return this.settings.visible=t,this},setActive:function setActive(t,r){return t?this.resume(r):this.pause(r)},start:function start(t){var r=this.events,o=this.settings;t&&(o.data=t),o.status=h.START,o.active=!0,o.visible=!0,r.emit(T.START,this),r.emit(T.READY,this,t)},shutdown:function shutdown(t){var r=this.events,o=this.settings;r.off(T.TRANSITION_INIT),r.off(T.TRANSITION_START),r.off(T.TRANSITION_COMPLETE),r.off(T.TRANSITION_OUT),o.status=h.SHUTDOWN,o.active=!1,o.visible=!1,this.renderer===P.WEBGL&&this.renderer.resetTextures(!0),r.emit(T.SHUTDOWN,this,t)},destroy:function destroy(){var t=this.events,r=this.settings;r.status=h.DESTROYED,r.active=!1,r.visible=!1,t.emit(T.DESTROY,this),t.removeAllListeners();for(var o=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],a=0;a<o.length;a++)this[o[a]]=null}});t.exports=L},function(t,r){t.exports=function UppercaseFirst(t){return t&&t[0].toUpperCase()+t.slice(1)}},function(t,r,o){var a=o(33),h=o(0),d=o(109),T=o(424),S="Texture.frame missing: ",A=new h({initialize:function Texture(t,r,o,a,h){Array.isArray(o)||(o=[o]),this.manager=t,this.key=r,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var d=0;d<o.length;d++)this.source.push(new T(this,o[d],a,h))},add:function add(t,r,o,a,h,T){if(this.has(t))return null;var S=new d(this,t,r,o,a,h,T);return this.frames[t]=S,"__BASE"===this.firstFrame&&(this.firstFrame=t),this.frameTotal++,S},remove:function remove(t){return!!this.has(t)&&(this.get(t).destroy(),delete this.frames[t],!0)},has:function has(t){return this.frames[t]},get:function get(t){t||(t=this.firstFrame);var r=this.frames[t];return r||(console.warn(S+t),r=this.frames[this.firstFrame]),r},getTextureSourceIndex:function getTextureSourceIndex(t){for(var r=0;r<this.source.length;r++)if(this.source[r]===t)return r;return-1},getFramesFromTextureSource:function getFramesFromTextureSource(t,r){void 0===r&&(r=!1);var o=[];for(var a in this.frames)if("__BASE"!==a||r){var h=this.frames[a];h.sourceIndex===t&&o.push(h)}return o},getFrameNames:function getFrameNames(t){void 0===t&&(t=!1);var r=Object.keys(this.frames);if(!t){var o=r.indexOf("__BASE");-1!==o&&r.splice(o,1)}return r},getSourceImage:function getSourceImage(t){null!=t&&1!==this.frameTotal||(t="__BASE");var r=this.frames[t];return r?r.source.image:(console.warn(S+t),this.frames.__BASE.source.image)},getDataSourceImage:function getDataSourceImage(t){null!=t&&1!==this.frameTotal||(t="__BASE");var r,o=this.frames[t];return o?r=o.sourceIndex:(console.warn(S+t),r=this.frames.__BASE.sourceIndex),this.dataSource[r].image},setDataSource:function setDataSource(t){Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var o=this.source[r];this.dataSource.push(new T(this,t[r],o.width,o.height))}},setFilter:function setFilter(t){var r;for(r=0;r<this.source.length;r++)this.source[r].setFilter(t);for(r=0;r<this.dataSource.length;r++)this.dataSource[r].setFilter(t)},destroy:function destroy(){var t;for(t=0;t<this.source.length;t++)this.source[t].destroy();for(t=0;t<this.dataSource.length;t++)this.dataSource[t].destroy();for(var r in this.frames)this.frames[r].destroy();this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var o=this.manager.game.renderer;o&&o.type===a.WEBGL&&o.resetTextures(!0),this.manager=null}});t.exports=A},function(t,r,o){var a=o(78);t.exports=function GetAll(t,r,o,h,d){void 0===h&&(h=0),void 0===d&&(d=t.length);var T=[];if(a(t,h,d))for(var S=h;S<d;S++){var A=t[S];(!r||r&&void 0===o&&A.hasOwnProperty(r)||r&&void 0!==o&&A[r]===o)&&T.push(A)}return T}},function(t,r,o){t.exports={Matrix:o(1013),Add:o(1021),AddAt:o(1022),BringToTop:o(1023),CountAllMatching:o(1024),Each:o(1025),EachInRange:o(1026),FindClosestInSorted:o(318),GetAll:o(207),GetFirst:o(428),GetRandom:o(210),MoveDown:o(1027),MoveTo:o(1028),MoveUp:o(1029),MoveAbove:o(1030),MoveBelow:o(1031),NumberArray:o(322),NumberArrayStep:o(1032),QuickSelect:o(436),Range:o(437),Remove:o(93),RemoveAt:o(1033),RemoveBetween:o(1034),RemoveRandomElement:o(1035),Replace:o(1036),RotateLeft:o(178),RotateRight:o(179),SafeRange:o(78),SendToBack:o(1037),SetAll:o(1038),Shuffle:o(131),SortByDigits:o(320),SpliceOne:o(74),StableSort:o(79),Swap:o(1039)}},function(t,r){t.exports=function CheckMatrix(t){if(!Array.isArray(t)||t.length<2||!Array.isArray(t[0]))return!1;for(var r=t[0].length,o=1;o<t.length;o++)if(t[o].length!==r)return!1;return!0}},function(t,r){t.exports=function GetRandom(t,r,o){void 0===r&&(r=0),void 0===o&&(o=t.length);var a=r+Math.floor(Math.random()*o);return void 0===t[a]?null:t[a]}},function(t,r,o){var a=o(0),h=o(9),d=o(438),T=new a({Extends:h,initialize:function ProcessQueue(){h.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function add(t){return this._pending.push(t),this._toProcess++,t},remove:function remove(t){return this._destroy.push(t),this._toProcess++,t},removeAll:function removeAll(){for(var t=this._active,r=this._destroy,o=t.length;o--;)r.push(t[o]),this._toProcess++;return this},update:function update(){if(0===this._toProcess)return this._active;var t,r,o=this._destroy,a=this._active;for(t=0;t<o.length;t++){r=o[t];var h=a.indexOf(r);-1!==h&&(a.splice(h,1),this.emit(d.PROCESS_QUEUE_REMOVE,r))}for(o.length=0,o=this._pending,t=0;t<o.length;t++)r=o[t],(!this.checkQueue||this.checkQueue&&-1===a.indexOf(r))&&(a.push(r),this.emit(d.PROCESS_QUEUE_ADD,r));return o.length=0,this._toProcess=0,a},getActive:function getActive(){return this._active},length:{get:function get(){return this._active.length}},destroy:function destroy(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});t.exports=T},function(t,r){function getValue(t,r){return parseInt(t.getAttribute(r),10)}t.exports=function ParseXMLBitmapFont(t,r,o,a,h){void 0===o&&(o=0),void 0===a&&(a=0);var d=r.cutX,T=r.cutY,S=r.source.width,A=r.source.height,P=r.sourceIndex,O={},D=t.getElementsByTagName("info")[0],L=t.getElementsByTagName("common")[0];O.font=D.getAttribute("face"),O.size=getValue(D,"size"),O.lineHeight=getValue(L,"lineHeight")+a,O.chars={};var I=t.getElementsByTagName("char"),B=void 0!==r&&r.trimmed;if(B)var N=r.height,G=r.width;for(var Y=0;Y<I.length;Y++){var X=I[Y],U=getValue(X,"id"),z=String.fromCharCode(U),V=getValue(X,"x"),W=getValue(X,"y"),H=getValue(X,"width"),q=getValue(X,"height");B&&(V<G&&(G=V),W<N&&(N=W)),B&&0!==N&&0!==G&&(V-=r.x,W-=r.y);var Z=(d+V)/S,K=(T+W)/A,J=(d+V+H)/S,Q=(T+W+q)/A;if(O.chars[U]={x:V,y:W,width:H,height:q,centerX:Math.floor(H/2),centerY:Math.floor(q/2),xOffset:getValue(X,"xoffset"),yOffset:getValue(X,"yoffset"),xAdvance:getValue(X,"xadvance")+o,data:{},kerning:{},u0:Z,v0:K,u1:J,v1:Q},h&&0!==H&&0!==q){var $=h.add(z,P,V,W,H,q);$&&$.setUVs(H,q,Z,K,J,Q)}}var tt=t.getElementsByTagName("kerning");for(Y=0;Y<tt.length;Y++){var et=tt[Y],it=getValue(et,"first"),nt=getValue(et,"second"),rt=getValue(et,"amount");O.chars[nt].kerning[it]=rt}return O}},function(t,r,o){var a=o(1049),h=o(440),d=o(0),T=o(11),S=o(109),A=o(15),P=o(110),O=new d({Extends:A,Mixins:[T.Alpha,T.BlendMode,T.Depth,T.Mask,T.Pipeline,T.ScrollFactor,T.Size,T.Texture,T.Transform,T.Visible,a],initialize:function Blitter(t,r,o,a,h){A.call(this,t,"Blitter"),this.setTexture(a,h),this.setPosition(r,o),this.initPipeline(),this.children=new P,this.renderList=[],this.dirty=!1},create:function create(t,r,o,a,d){void 0===a&&(a=!0),void 0===d&&(d=this.children.length),void 0===o?o=this.frame:o instanceof S||(o=this.texture.get(o));var T=new h(this,t,r,o,a);return this.children.addAt(T,d,!1),this.dirty=!0,T},createFromCallback:function createFromCallback(t,r,o,a){for(var h=this.createMultiple(r,o,a),d=0;d<h.length;d++){var T=h[d];t.call(this,T,d)}return h},createMultiple:function createMultiple(t,r,o){void 0===r&&(r=this.frame.name),void 0===o&&(o=!0),Array.isArray(r)||(r=[r]);var a=[],h=this;return r.forEach((function(r){for(var d=0;d<t;d++)a.push(h.create(0,0,r,o))})),a},childCanRender:function childCanRender(t){return t.visible&&t.alpha>0},getRenderList:function getRenderList(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function clear(){this.children.removeAll(),this.dirty=!0},preDestroy:function preDestroy(){this.children.destroy(),this.renderList=[]}});t.exports=O},function(t,r,o){var a=o(208),h=o(35),d=o(0),T=o(11),S=o(75),A=o(15),P=o(10),O=o(1052),D=o(441),L=o(3),I=new d({Extends:A,Mixins:[T.AlphaSingle,T.BlendMode,T.ComputedSize,T.Depth,T.Mask,T.Pipeline,T.Transform,T.Visible,O],initialize:function Container(t,r,o,a){A.call(this,t,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new T.TransformMatrix,this.tempTransformMatrix=new T.TransformMatrix,this._sortKey="",this._sysEvents=t.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(r,o),this.clearAlpha(),this.setBlendMode(h.SKIP_CHECK),a&&this.add(a)},originX:{get:function get(){return.5}},originY:{get:function get(){return.5}},displayOriginX:{get:function get(){return.5*this.width}},displayOriginY:{get:function get(){return.5*this.height}},setExclusive:function setExclusive(t){return void 0===t&&(t=!0),this.exclusive=t,this},getBounds:function getBounds(t){if(void 0===t&&(t=new P),t.setTo(this.x,this.y,0,0),this.parentContainer){var r=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y);t.setTo(r.x,r.y,0,0)}if(this.list.length>0){var o=this.list,a=new P,h=!1;t.setEmpty();for(var d=0;d<o.length;d++){var T=o[d];T.getBounds&&(T.getBounds(a),h?D(a,t,t):(t.setTo(a.x,a.y,a.width,a.height),h=!0))}}return t},addHandler:function addHandler(t){t.once(S.DESTROY,this.remove,this),this.exclusive&&(t.parentContainer&&t.parentContainer.remove(t),t.removeFromDisplayList(),t.parentContainer=this)},removeHandler:function removeHandler(t){t.off(S.DESTROY,this.remove),this.exclusive&&(t.parentContainer=null,t.addToDisplayList())},pointToContainer:function pointToContainer(t,r){void 0===r&&(r=new L),this.parentContainer?this.parentContainer.pointToContainer(t,r):r=new L(t.x,t.y);var o=this.tempTransformMatrix;return o.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),o.invert(),o.transformPoint(t.x,t.y,r),r},getBoundsTransformMatrix:function getBoundsTransformMatrix(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function add(t){return a.Add(this.list,t,this.maxSize,this.addHandler,this),this},addAt:function addAt(t,r){return a.AddAt(this.list,t,r,this.maxSize,this.addHandler,this),this},getAt:function getAt(t){return this.list[t]},getIndex:function getIndex(t){return this.list.indexOf(t)},sort:function sort(t,r){return t?(void 0===r&&(r=function handler(r,o){return r[t]-o[t]}),a.StableSort(this.list,r),this):this},getByName:function getByName(t){return a.GetFirst(this.list,"name",t)},getRandom:function getRandom(t,r){return a.GetRandom(this.list,t,r)},getFirst:function getFirst(t,r,o,h){return a.GetFirst(this.list,t,r,o,h)},getAll:function getAll(t,r,o,h){return a.GetAll(this.list,t,r,o,h)},count:function count(t,r,o,h){return a.CountAllMatching(this.list,t,r,o,h)},swap:function swap(t,r){return a.Swap(this.list,t,r),this},moveTo:function moveTo(t,r){return a.MoveTo(this.list,t,r),this},moveAbove:function moveAbove(t,r){return a.MoveAbove(this.list,t,r),this},moveBelow:function moveBelow(t,r){return a.MoveBelow(this.list,t,r),this},remove:function remove(t,r){var o=a.Remove(this.list,t,this.removeHandler,this);if(r&&o){Array.isArray(o)||(o=[o]);for(var h=0;h<o.length;h++)o[h].destroy()}return this},removeAt:function removeAt(t,r){var o=a.RemoveAt(this.list,t,this.removeHandler,this);return r&&o&&o.destroy(),this},removeBetween:function removeBetween(t,r,o){var h=a.RemoveBetween(this.list,t,r,this.removeHandler,this);if(o)for(var d=0;d<h.length;d++)h[d].destroy();return this},removeAll:function removeAll(t){var r=a.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(t)for(var o=0;o<r.length;o++)r[o].destroy();return this},bringToTop:function bringToTop(t){return a.BringToTop(this.list,t),this},sendToBack:function sendToBack(t){return a.SendToBack(this.list,t),this},moveUp:function moveUp(t){return a.MoveUp(this.list,t),this},moveDown:function moveDown(t){return a.MoveDown(this.list,t),this},reverse:function reverse(){return this.list.reverse(),this},shuffle:function shuffle(){return a.Shuffle(this.list),this},replace:function replace(t,r,o){return a.Replace(this.list,t,r)&&(this.addHandler(r),this.removeHandler(t),o&&t.destroy()),this},exists:function exists(t){return this.list.indexOf(t)>-1},setAll:function setAll(t,r,o,h){return a.SetAll(this.list,t,r,o,h),this},each:function each(t,r){var o,a=[null],h=this.list.slice(),d=h.length;for(o=2;o<arguments.length;o++)a.push(arguments[o]);for(o=0;o<d;o++)a[0]=h[o],t.apply(r,a);return this},iterate:function iterate(t,r){var o,a=[null];for(o=2;o<arguments.length;o++)a.push(arguments[o]);for(o=0;o<this.list.length;o++)a[0]=this.list[o],t.apply(r,a);return this},setScrollFactor:function setScrollFactor(t,r,o){return void 0===r&&(r=t),void 0===o&&(o=!1),this.scrollFactorX=t,this.scrollFactorY=r,o&&(a.SetAll(this.list,"scrollFactorX",t),a.SetAll(this.list,"scrollFactorY",r)),this},length:{get:function get(){return this.list.length}},first:{get:function get(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function get(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function get(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function get(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function preDestroy(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});t.exports=I},function(t,r,o){var a=o(148),h=o(0),d=o(1057),T=new h({Extends:a,Mixins:[d],initialize:function DynamicBitmapText(t,r,o,h,d,T,S){a.call(this,t,r,o,h,d,T,S),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function setSize(t,r){return this.cropWidth=t,this.cropHeight=r,this},setDisplayCallback:function setDisplayCallback(t){return this.displayCallback=t,this},setScrollX:function setScrollX(t){return this.scrollX=t,this},setScrollY:function setScrollY(t){return this.scrollY=t,this}});t.exports=T},function(t,r,o){var a=o(133),h=o(0),d=o(217),T=o(303),S=o(304),A=o(305),P=o(309),O=o(167),D=o(312),L=o(313),I=o(314),B=o(111),N=o(15),G=o(2),Y=o(6),X=o(14),U=o(1063),z=new h({Extends:N,Mixins:[T,S,A,P,O,L,I,D,U],initialize:function Graphics(t,r){var o=Y(r,"x",0),a=Y(r,"y",0);N.call(this,t,"Graphics"),this.setPosition(o,a),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(r)},setDefaultStyles:function setDefaultStyles(t){return Y(t,"lineStyle",null)&&(this.defaultStrokeWidth=Y(t,"lineStyle.width",1),this.defaultStrokeColor=Y(t,"lineStyle.color",16777215),this.defaultStrokeAlpha=Y(t,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),Y(t,"fillStyle",null)&&(this.defaultFillColor=Y(t,"fillStyle.color",16777215),this.defaultFillAlpha=Y(t,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function lineStyle(t,r,o){return void 0===o&&(o=1),this.commandBuffer.push(d.LINE_STYLE,t,r,o),this._lineWidth=t,this},fillStyle:function fillStyle(t,r){return void 0===r&&(r=1),this.commandBuffer.push(d.FILL_STYLE,t,r),this},fillGradientStyle:function fillGradientStyle(t,r,o,a,h,T,S,A){return void 0===h&&(h=1),void 0===T&&(T=h),void 0===S&&(S=h),void 0===A&&(A=h),this.commandBuffer.push(d.GRADIENT_FILL_STYLE,h,T,S,A,t,r,o,a),this},lineGradientStyle:function lineGradientStyle(t,r,o,a,h,T){return void 0===T&&(T=1),this.commandBuffer.push(d.GRADIENT_LINE_STYLE,t,T,r,o,a,h),this},beginPath:function beginPath(){return this.commandBuffer.push(d.BEGIN_PATH),this},closePath:function closePath(){return this.commandBuffer.push(d.CLOSE_PATH),this},fillPath:function fillPath(){return this.commandBuffer.push(d.FILL_PATH),this},fill:function fill(){return this.commandBuffer.push(d.FILL_PATH),this},strokePath:function strokePath(){return this.commandBuffer.push(d.STROKE_PATH),this},stroke:function stroke(){return this.commandBuffer.push(d.STROKE_PATH),this},fillCircleShape:function fillCircleShape(t){return this.fillCircle(t.x,t.y,t.radius)},strokeCircleShape:function strokeCircleShape(t){return this.strokeCircle(t.x,t.y,t.radius)},fillCircle:function fillCircle(t,r,o){return this.beginPath(),this.arc(t,r,o,0,X.PI2),this.fillPath(),this},strokeCircle:function strokeCircle(t,r,o){return this.beginPath(),this.arc(t,r,o,0,X.PI2),this.strokePath(),this},fillRectShape:function fillRectShape(t){return this.fillRect(t.x,t.y,t.width,t.height)},strokeRectShape:function strokeRectShape(t){return this.strokeRect(t.x,t.y,t.width,t.height)},fillRect:function fillRect(t,r,o,a){return this.commandBuffer.push(d.FILL_RECT,t,r,o,a),this},strokeRect:function strokeRect(t,r,o,a){var h=this._lineWidth/2,d=t-h,T=t+h;return this.beginPath(),this.moveTo(t,r),this.lineTo(t,r+a),this.strokePath(),this.beginPath(),this.moveTo(t+o,r),this.lineTo(t+o,r+a),this.strokePath(),this.beginPath(),this.moveTo(d,r),this.lineTo(T+o,r),this.strokePath(),this.beginPath(),this.moveTo(d,r+a),this.lineTo(T+o,r+a),this.strokePath(),this},fillRoundedRect:function fillRoundedRect(t,r,o,a,h){void 0===h&&(h=20);var d=h,T=h,S=h,A=h;return"number"!=typeof h&&(d=G(h,"tl",20),T=G(h,"tr",20),S=G(h,"bl",20),A=G(h,"br",20)),this.beginPath(),this.moveTo(t+d,r),this.lineTo(t+o-T,r),this.arc(t+o-T,r+T,T,-X.TAU,0),this.lineTo(t+o,r+a-A),this.arc(t+o-A,r+a-A,A,0,X.TAU),this.lineTo(t+S,r+a),this.arc(t+S,r+a-S,S,X.TAU,Math.PI),this.lineTo(t,r+d),this.arc(t+d,r+d,d,-Math.PI,-X.TAU),this.fillPath(),this},strokeRoundedRect:function strokeRoundedRect(t,r,o,a,h){void 0===h&&(h=20);var d=h,T=h,S=h,A=h;return"number"!=typeof h&&(d=G(h,"tl",20),T=G(h,"tr",20),S=G(h,"bl",20),A=G(h,"br",20)),this.beginPath(),this.moveTo(t+d,r),this.lineTo(t+o-T,r),this.moveTo(t+o-T,r),this.arc(t+o-T,r+T,T,-X.TAU,0),this.lineTo(t+o,r+a-A),this.moveTo(t+o,r+a-A),this.arc(t+o-A,r+a-A,A,0,X.TAU),this.lineTo(t+S,r+a),this.moveTo(t+S,r+a),this.arc(t+S,r+a-S,S,X.TAU,Math.PI),this.lineTo(t,r+d),this.moveTo(t,r+d),this.arc(t+d,r+d,d,-Math.PI,-X.TAU),this.strokePath(),this},fillPointShape:function fillPointShape(t,r){return this.fillPoint(t.x,t.y,r)},fillPoint:function fillPoint(t,r,o){return!o||o<1?o=1:(t-=o/2,r-=o/2),this.commandBuffer.push(d.FILL_RECT,t,r,o,o),this},fillTriangleShape:function fillTriangleShape(t){return this.fillTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},strokeTriangleShape:function strokeTriangleShape(t){return this.strokeTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},fillTriangle:function fillTriangle(t,r,o,a,h,T){return this.commandBuffer.push(d.FILL_TRIANGLE,t,r,o,a,h,T),this},strokeTriangle:function strokeTriangle(t,r,o,a,h,T){return this.commandBuffer.push(d.STROKE_TRIANGLE,t,r,o,a,h,T),this},strokeLineShape:function strokeLineShape(t){return this.lineBetween(t.x1,t.y1,t.x2,t.y2)},lineBetween:function lineBetween(t,r,o,a){return this.beginPath(),this.moveTo(t,r),this.lineTo(o,a),this.strokePath(),this},lineTo:function lineTo(t,r){return this.commandBuffer.push(d.LINE_TO,t,r),this},moveTo:function moveTo(t,r){return this.commandBuffer.push(d.MOVE_TO,t,r),this},strokePoints:function strokePoints(t,r,o,a){void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===a&&(a=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var h=1;h<a;h++)this.lineTo(t[h].x,t[h].y);return r&&this.lineTo(t[0].x,t[0].y),o&&this.closePath(),this.strokePath(),this},fillPoints:function fillPoints(t,r,o,a){void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===a&&(a=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var h=1;h<a;h++)this.lineTo(t[h].x,t[h].y);return r&&this.lineTo(t[0].x,t[0].y),o&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function strokeEllipseShape(t,r){void 0===r&&(r=32);var o=t.getPoints(r);return this.strokePoints(o,!0)},strokeEllipse:function strokeEllipse(t,r,o,a,h){void 0===h&&(h=32);var d=new B(t,r,o,a).getPoints(h);return this.strokePoints(d,!0)},fillEllipseShape:function fillEllipseShape(t,r){void 0===r&&(r=32);var o=t.getPoints(r);return this.fillPoints(o,!0)},fillEllipse:function fillEllipse(t,r,o,a,h){void 0===h&&(h=32);var d=new B(t,r,o,a).getPoints(h);return this.fillPoints(d,!0)},arc:function arc(t,r,o,a,h,T,S){return void 0===T&&(T=!1),void 0===S&&(S=0),this.commandBuffer.push(d.ARC,t,r,o,a,h,T,S),this},slice:function slice(t,r,o,a,h,T,S){return void 0===T&&(T=!1),void 0===S&&(S=0),this.commandBuffer.push(d.BEGIN_PATH),this.commandBuffer.push(d.MOVE_TO,t,r),this.commandBuffer.push(d.ARC,t,r,o,a,h,T,S),this.commandBuffer.push(d.CLOSE_PATH),this},save:function save(){return this.commandBuffer.push(d.SAVE),this},restore:function restore(){return this.commandBuffer.push(d.RESTORE),this},translateCanvas:function translateCanvas(t,r){return this.commandBuffer.push(d.TRANSLATE,t,r),this},scaleCanvas:function scaleCanvas(t,r){return this.commandBuffer.push(d.SCALE,t,r),this},rotateCanvas:function rotateCanvas(t){return this.commandBuffer.push(d.ROTATE,t),this},clear:function clear(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function generateTexture(t,r,o){var a,h,d=this.scene.sys,T=d.game.renderer;if(void 0===r&&(r=d.scale.width),void 0===o&&(o=d.scale.height),z.TargetCamera.setScene(this.scene),z.TargetCamera.setViewport(0,0,r,o),z.TargetCamera.scrollX=this.x,z.TargetCamera.scrollY=this.y,"string"==typeof t)if(d.textures.exists(t)){var S=(a=d.textures.get(t)).getSourceImage();S instanceof HTMLCanvasElement&&(h=S.getContext("2d"))}else h=(a=d.textures.createCanvas(t,r,o)).getSourceImage().getContext("2d");else t instanceof HTMLCanvasElement&&(h=t.getContext("2d"));return h&&(this.renderCanvas(T,this,z.TargetCamera,null,h,!1),a&&a.refresh()),this},preDestroy:function preDestroy(){this.commandBuffer=[]}});z.TargetCamera=new a,t.exports=z},function(t,r){t.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(t,r,o){var a=o(4);t.exports=function CircumferencePoint(t,r,o){void 0===o&&(o=new a);var h=t.width/2,d=t.height/2;return o.x=t.x+h*Math.cos(r),o.y=t.y+d*Math.sin(r),o}},function(t,r,o){var a=o(35),h=o(0),d=o(11),T=o(176),S=o(101),A=o(9),P=o(75),O=o(110),D=o(1071),L=o(20),I=o(79),B=new h({Extends:O,Mixins:[d.AlphaSingle,d.BlendMode,d.Depth,d.Mask,d.Pipeline,d.Visible,A,D],initialize:function Layer(t,r){O.call(this,t),A.call(this),this.scene=t,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=t.sys,this.events=t.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(a.SKIP_CHECK),r&&this.add(r),t.sys.queueDepthSort()},setActive:function setActive(t){return this.active=t,this},setName:function setName(t){return this.name=t,this},setState:function setState(t){return this.state=t,this},setDataEnabled:function setDataEnabled(){return this.data||(this.data=new S(this)),this},setData:function setData(t,r){return this.data||(this.data=new S(this)),this.data.set(t,r),this},incData:function incData(t,r){return this.data||(this.data=new S(this)),this.data.inc(t,r),this},toggleData:function toggleData(t){return this.data||(this.data=new S(this)),this.data.toggle(t),this},getData:function getData(t){return this.data||(this.data=new S(this)),this.data.get(t)},setInteractive:function setInteractive(){return this},disableInteractive:function disableInteractive(){return this},removeInteractive:function removeInteractive(){return this},addedToScene:function addedToScene(){},removedFromScene:function removedFromScene(){},update:function update(){},toJSON:function toJSON(){return T(this)},willRender:function willRender(t){return!(15!==this.renderFlags||0===this.list.length||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function getIndexList(){for(var t=this,r=this.parentContainer,o=[];r&&(o.unshift(r.getIndex(t)),t=r,r.parentContainer);)r=r.parentContainer;return o.unshift(this.displayList.getIndex(t)),o},addChildCallback:function addChildCallback(t){t.displayList&&t.displayList!==this&&t.removeFromDisplayList(),t.displayList||(this.queueDepthSort(),t.displayList=this,t.emit(P.ADDED_TO_SCENE,t,this.scene),this.events.emit(L.ADDED_TO_SCENE,t,this.scene))},removeChildCallback:function removeChildCallback(t){this.queueDepthSort(),t.displayList=null,t.emit(P.REMOVED_FROM_SCENE,t,this.scene),this.events.emit(L.REMOVED_FROM_SCENE,t,this.scene)},queueDepthSort:function queueDepthSort(){this.sortChildrenFlag=!0},depthSort:function depthSort(){this.sortChildrenFlag&&(I(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function sortByDepth(t,r){return t._depth-r._depth},getChildren:function getChildren(){return this.list},destroy:function destroy(){if(this.scene&&!this.ignoreDestroy){this.emit(P.DESTROY,this);for(var t=this.list.length;t--;)this.list[t].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});t.exports=B},function(t,r,o){var a=o(0),h=o(11),d=o(15),T=o(450),S=o(110),A=o(452),P=o(1075),O=new a({Extends:d,Mixins:[h.Depth,h.Mask,h.Pipeline,h.Transform,h.Visible,P],initialize:function ParticleEmitterManager(t,r,o,a){if(d.call(this,t,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],null===o||"object"!==_typeof(o)&&!Array.isArray(o)||(a=o,o=null),this.setTexture(r,o),this.initPipeline(),this.emitters=new S(this),this.wells=new S(this),a){Array.isArray(a)||(a=[a]);for(var h=0;h<a.length;h++)this.createEmitter(a[h])}},addedToScene:function addedToScene(){this.scene.sys.updateList.add(this)},removedFromScene:function removedFromScene(){this.scene.sys.updateList.remove(this)},setTexture:function setTexture(t,r){return this.texture=this.scene.sys.textures.get(t),this.setFrame(r)},setFrame:function setFrame(t){this.frame=this.texture.get(t);var r=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),o=[];return r.forEach((function(t){o.push(t.name)})),this.frameNames=o,this.defaultFrame=this.frame,this},setEmitterFrames:function setEmitterFrames(t,r){Array.isArray(t)||(t=[t]);var o=r.frames;o.length=0;for(var a=0;a<t.length;a++){var h=t[a];-1!==this.frameNames.indexOf(h)&&o.push(this.texture.get(h))}return o.length>0?r.defaultFrame=o[0]:r.defaultFrame=this.defaultFrame,this},addEmitter:function addEmitter(t){return this.emitters.add(t)},createEmitter:function createEmitter(t){return this.addEmitter(new A(this,t))},removeEmitter:function removeEmitter(t){return this.emitters.remove(t,!0)},addGravityWell:function addGravityWell(t){return this.wells.add(t)},createGravityWell:function createGravityWell(t){return this.addGravityWell(new T(t))},emitParticle:function emitParticle(t,r,o){for(var a=this.emitters.list,h=0;h<a.length;h++){var d=a[h];d.active&&d.emitParticle(t,r,o)}return this},emitParticleAt:function emitParticleAt(t,r,o){return this.emitParticle(o,t,r)},pause:function pause(){return this.active=!1,this},resume:function resume(){return this.active=!0,this},getProcessors:function getProcessors(){return this.wells.getAll("active",!0)},preUpdate:function preUpdate(t,r){r*=this.timeScale;for(var o=this.emitters.list,a=0;a<o.length;a++){var h=o[a];h.active&&h.preUpdate(t,r)}},setAlpha:function setAlpha(){},setScrollFactor:function setScrollFactor(){},setBlendMode:function setBlendMode(){}});t.exports=O},function(t,r,o){var a=o(35),h=o(133),d=o(31),T=o(0),S=o(11),A=o(33),P=o(109),O=o(15),D=o(1),L=o(92),I=o(1079),B=o(141),N=o(12),G=o(222),Y=new T({Extends:O,Mixins:[S.Alpha,S.BlendMode,S.ComputedSize,S.Crop,S.Depth,S.Flip,S.GetBounds,S.Mask,S.Origin,S.Pipeline,S.ScrollFactor,S.Tint,S.Transform,S.Visible,I],initialize:function RenderTexture(t,r,o,a,T,S,P){void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=32),void 0===T&&(T=32),O.call(this,t,"RenderTexture"),this.renderer=t.sys.renderer,this.textureManager=t.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,void 0===S?(this.canvas=d.create2D(this,a,T),this.texture=t.sys.textures.addCanvas(G(),this.canvas),this.frame=this.texture.get()):(this.texture=t.sys.textures.get(S),this.frame=this.texture.get(P),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new h(0,0,a,T),this.renderTarget=null;var I=this.renderer;I?I.type===A.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new B(I,a,T,1,0,!1)):I.type===A.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=D,this.camera.setScene(t),this.setPosition(r,o),void 0===S&&this.setSize(a,T),this.setOrigin(0,0),this.initPipeline(L.SINGLE_PIPELINE)},setSize:function setSize(t,r){return this.resize(t,r)},resize:function resize(t,r){void 0===r&&(r=t);var o=this.frame;if(t!==this.width||r!==this.height){if("__BASE"===o.name){this.canvas.width=t,this.canvas.height=r,this.texture.width=t,this.texture.height=r;var a=this.renderTarget;a&&(a.resize(t,r),o.glTexture=a.texture,o.source.isRenderTexture=!0,o.source.isGLTexture=!0,o.source.glTexture=a.texture),this.camera.setSize(t,r),o.source.width=t,o.source.height=r,o.setSize(t,r),this.width=t,this.height=r}}else{var h=this.texture.getSourceImage();o.cutX+t>h.width&&(t=h.width-o.cutX),o.cutY+r>h.height&&(r=h.height-o.cutY),o.setSize(t,r,o.cutX,o.cutY)}this.updateDisplayOrigin();var d=this.input;return d&&!d.customHitArea&&(d.hitArea.width=t,d.hitArea.height=r),this},setGlobalTint:function setGlobalTint(t){return this.globalTint=t,this},setGlobalAlpha:function setGlobalAlpha(t){return this.globalAlpha=t,this},saveTexture:function saveTexture(t){return this.textureManager.renameTexture(this.texture.key,t),this._saved=!0,this.texture},fill:function fill(t,r,o,a,h,d){var T=this.frame,S=this.camera,A=this.renderer;void 0===r&&(r=1),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=T.cutWidth),void 0===d&&(d=T.cutHeight);var P=(t>>16&255)/255,O=(t>>8&255)/255,D=(255&t)/255,L=this.renderTarget;if(S.preRender(),L){L.bind(!0);var I=this.pipeline;I.manager.set(I);var B=L.width,G=L.height,Y=A.width/B,X=A.height/G;I.drawFillRect(o*Y,a*X,h*Y,d*X,N.getTintFromFloats(D,O,P,1),r),L.unbind(!0)}else{var U=this.context;A.setContext(U),U.fillStyle="rgba("+P+","+O+","+D+","+r+")",U.fillRect(o+T.cutX,a+T.cutY,h,d),A.setContext()}return this.dirty=!0,this},clear:function clear(){if(this.dirty){var t=this.renderTarget;if(t)t.clear();else{var r=this.context;r.save(),r.setTransform(1,0,0,1,0,0),r.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),r.restore()}this.dirty=!1}return this},erase:function erase(t,r,o){return this._eraseMode=!0,this.draw(t,r,o,1,16777215),this._eraseMode=!1,this},draw:function draw(t,r,o,a,h){return this.beginDraw(),this.batchDraw(t,r,o,a,h),this.endDraw(),this},drawFrame:function drawFrame(t,r,o,a,h,d){return this.beginDraw(),this.batchDrawFrame(t,r,o,a,h,d),this.endDraw(),this},beginDraw:function beginDraw(){var t=this.camera,r=this.renderer,o=this.renderTarget;return t.preRender(),o?r.beginCapture(o.width,o.height):r.setContext(this.context),this},batchDraw:function batchDraw(t,r,o,a,h){return void 0===a&&(a=this.globalAlpha),h=void 0===h?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(h>>16)+(65280&h)+((255&h)<<16),Array.isArray(t)||(t=[t]),this.batchList(t,r,o,a,h),this},batchDrawFrame:function batchDrawFrame(t,r,o,a,h,d){void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=this.globalAlpha),d=void 0===d?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(d>>16)+(65280&d)+((255&d)<<16);var T=this.textureManager.getFrame(t,r);return T&&(this.renderTarget?this.pipeline.batchTextureFrame(T,o,a,d,h,this.camera.matrix,null):this.batchTextureFrame(T,o+this.frame.cutX,a+this.frame.cutY,h,d)),this},endDraw:function endDraw(t){void 0===t&&(t=this._eraseMode);var r=this.renderer,o=this.renderTarget;if(o){var a=r.endCapture();r.pipelines.setUtility().blitFrame(a,o,1,!1,!1,t),r.resetScissor(),r.resetViewport()}else r.setContext();return this.dirty=!0,this},batchList:function batchList(t,r,o,a,h){for(var d=0;d<t.length;d++){var T=t[d];T&&T!==this&&(T.renderWebGL||T.renderCanvas?this.drawGameObject(T,r,o):T.isParent||T.list?this.batchGroup(T.getChildren(),r,o):"string"==typeof T?this.batchTextureFrameKey(T,null,r,o,a,h):T instanceof P?this.batchTextureFrame(T,r,o,a,h):Array.isArray(T)&&this.batchList(T,r,o,a,h))}},batchGroup:function batchGroup(t,r,o){void 0===r&&(r=0),void 0===o&&(o=0),r+=this.frame.cutX,o+=this.frame.cutY;for(var a=0;a<t.length;a++){var h=t[a];if(h.willRender(this.camera)){var d=h.x+r,T=h.y+o;this.drawGameObject(h,d,T)}}},batchGameObjectWebGL:function batchGameObjectWebGL(t,r,o){void 0===r&&(r=t.x),void 0===o&&(o=t.y);var a=t.x,h=t.y;t.setPosition(r+this.frame.cutX,o+this.frame.cutY),t.renderDirect?t.renderDirect(this.renderer,t,this.camera):t.renderWebGL(this.renderer,t,this.camera),t.setPosition(a,h)},batchGameObjectCanvas:function batchGameObjectCanvas(t,r,o){void 0===r&&(r=t.x),void 0===o&&(o=t.y);var h=t.x,d=t.y;if(this._eraseMode){var T=t.blendMode;t.blendMode=a.ERASE}t.setPosition(r+this.frame.cutX,o+this.frame.cutY),t.renderCanvas(this.renderer,t,this.camera,null),t.setPosition(h,d),this._eraseMode&&(t.blendMode=T)},batchTextureFrameKey:function batchTextureFrameKey(t,r,o,a,h,d){var T=this.textureManager.getFrame(t,r);T&&this.batchTextureFrame(T,o,a,h,d)},batchTextureFrame:function batchTextureFrame(t,r,o,a,h){if(void 0===r&&(r=0),void 0===o&&(o=0),r+=this.frame.cutX,o+=this.frame.cutY,this.renderTarget)this.pipeline.batchTextureFrame(t,r,o,h,a,this.camera.matrix,null);else{var d=this.context,T=t.canvasData,S=t.source.image,A=this.camera.matrix;d.save(),d.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",d.globalAlpha=a,A.setToContext(d),d.drawImage(S,T.x,T.y,T.width,T.height,r,o,T.width,T.height),d.restore()}},snapshotArea:function snapshotArea(t,r,o,a,h,d,T){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,h,!1,t,r,o,a,d,T):this.renderer.snapshotCanvas(this.canvas,h,!1,t,r,o,a,d,T),this},snapshot:function snapshot(t,r,o){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,t,!1,0,0,this.width,this.height,r,o):this.renderer.snapshotCanvas(this.canvas,t,!1,0,0,this.width,this.height,r,o),this},snapshotPixel:function snapshotPixel(t,r,o){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,o,!0,t,r):this.renderer.snapshotCanvas(this.canvas,o,!0,t,r),this},preDestroy:function preDestroy(){this._saved||(d.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});t.exports=Y},function(t,r){t.exports=function UUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var r=16*Math.random()|0;return("x"===t?r:3&r|8).toString(16)}))}},function(t,r,o){var a=o(164),h=o(0),d=o(11),T=o(15),S=o(92),A=o(1085),P=o(3),O=new h({Extends:T,Mixins:[d.AlphaSingle,d.BlendMode,d.Depth,d.Flip,d.Mask,d.Pipeline,d.Size,d.Texture,d.Transform,d.Visible,d.ScrollFactor,A],initialize:function Rope(t,r,o,h,d,A,O,D,L){void 0===h&&(h="__DEFAULT"),void 0===A&&(A=2),void 0===O&&(O=!0),T.call(this,t,"Rope"),this.anims=new a(this),this.points=A,this.vertices,this.uv,this.colors,this.alphas,this.tintFill="__DEFAULT"===h,this.dirty=!1,this.horizontal=O,this._flipX=!1,this._flipY=!1,this._perp=new P,this.debugCallback=null,this.debugGraphic=null,this.setTexture(h,d),this.setPosition(r,o),this.setSizeToFrame(),this.initPipeline(S.ROPE_PIPELINE),Array.isArray(A)&&this.resizeArrays(A.length),this.setPoints(A,D,L),this.updateVertices()},addedToScene:function addedToScene(){this.scene.sys.updateList.add(this)},removedFromScene:function removedFromScene(){this.scene.sys.updateList.remove(this)},preUpdate:function preUpdate(t,r){var o=this.anims.currentFrame;this.anims.update(t,r),this.anims.currentFrame!==o&&(this.updateUVs(),this.updateVertices())},play:function play(t,r,o){return this.anims.play(t,r,o),this},setDirty:function setDirty(){return this.dirty=!0,this},setHorizontal:function setHorizontal(t,r,o){return void 0===t&&(t=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(t,r,o))},setVertical:function setVertical(t,r,o){return void 0===t&&(t=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(t,r,o)):this},setTintFill:function setTintFill(t){return void 0===t&&(t=!1),this.tintFill=t,this},setAlphas:function setAlphas(t,r){var o=this.points.length;if(o<1)return this;var a,h=this.alphas;void 0===t?t=[1]:Array.isArray(t)||void 0!==r||(t=[t]);var d=0;if(void 0!==r)for(a=0;a<o;a++)h[d=2*a]=t,h[d+1]=r;else if(t.length===o)for(a=0;a<o;a++)h[d=2*a]=t[a],h[d+1]=t[a];else{var T=t[0];for(a=0;a<o;a++)d=2*a,t.length>d&&(T=t[d]),h[d]=T,t.length>d+1&&(T=t[d+1]),h[d+1]=T}return this},setColors:function setColors(t){var r=this.points.length;if(r<1)return this;var o,a=this.colors;void 0===t?t=[16777215]:Array.isArray(t)||(t=[t]);var h=0;if(t.length===r)for(o=0;o<r;o++)a[h=2*o]=t[o],a[h+1]=t[o];else{var d=t[0];for(o=0;o<r;o++)h=2*o,t.length>h&&(d=t[h]),a[h]=d,t.length>h+1&&(d=t[h+1]),a[h+1]=d}return this},setPoints:function setPoints(t,r,o){if(void 0===t&&(t=2),"number"==typeof t){var a,h,d,T=t;if(T<2&&(T=2),t=[],this.horizontal)for(d=-this.frame.halfWidth,h=this.frame.width/(T-1),a=0;a<T;a++)t.push({x:d+a*h,y:0});else for(d=-this.frame.halfHeight,h=this.frame.height/(T-1),a=0;a<T;a++)t.push({x:0,y:d+a*h})}var S=t.length,A=this.points.length;return S<1?(console.warn("Rope: Not enough points given"),this):(1===S&&(t.unshift({x:0,y:0}),S++),A!==S&&this.resizeArrays(S),this.points=t,this.updateUVs(),null!=r&&this.setColors(r),null!=o&&this.setAlphas(o),this)},updateUVs:function updateUVs(){for(var t=this.uv,r=this.points.length,o=this.frame.u0,a=this.frame.v0,h=this.frame.u1,d=this.frame.v1,T=(h-o)/(r-1),S=(d-a)/(r-1),A=0;A<r;A++){var P,O,D,L,I=4*A;this.horizontal?(this._flipX?(P=h-A*T,D=h-A*T):(P=o+A*T,D=o+A*T),this._flipY?(O=d,L=a):(O=a,L=d)):(this._flipX?(P=o,D=h):(P=h,D=o),this._flipY?(O=d-A*S,L=d-A*S):(O=a+A*S,L=a+A*S)),t[I+0]=P,t[I+1]=O,t[I+2]=D,t[I+3]=L}return this},resizeArrays:function resizeArrays(t){var r=this.colors,o=this.alphas;this.vertices=new Float32Array(4*t),this.uv=new Float32Array(4*t),r=new Uint32Array(2*t),o=new Float32Array(2*t);for(var a=0;a<2*t;a++)r[a]=16777215,o[a]=1;return this.colors=r,this.alphas=o,this.dirty=!0,this},updateVertices:function updateVertices(){var t=this._perp,r=this.points,o=this.vertices,a=r.length;if(this.dirty=!1,!(a<1)){for(var h,d=r[0],T=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,S=0;S<a;S++){var A=r[S],P=4*S;h=S<a-1?r[S+1]:A,t.x=h.y-d.y,t.y=-(h.x-d.x);var O=t.length();t.x/=O,t.y/=O,t.x*=T,t.y*=T,o[P]=A.x+t.x,o[P+1]=A.y+t.y,o[P+2]=A.x-t.x,o[P+3]=A.y-t.y,d=A}return this}},setDebug:function setDebug(t,r){return this.debugGraphic=t,this.debugCallback=t||r?r||this.renderDebugVerts:null,this},renderDebugVerts:function renderDebugVerts(t,r,o){var a=t.debugGraphic,h=o[0],d=o[1],T=o[2],S=o[3];a.lineBetween(h,d,T,S);for(var A=4;A<r;A+=4){var P=o[A+0],O=o[A+1],D=o[A+2],L=o[A+3];a.lineBetween(h,d,P,O),a.lineBetween(T,S,D,L),a.lineBetween(T,S,P,O),a.lineBetween(P,O,D,L),h=P,d=O,T=D,S=L}},preDestroy:function preDestroy(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function get(){return this._flipX},set:function set(t){return this._flipX=t,this.updateUVs()}},flipY:{get:function get(){return this._flipY},set:function set(t){return this._flipY=t,this.updateUVs()}}});t.exports=O},function(t,r,o){var a=o(142),h=o(31),d=o(0),T=o(11),S=o(22),A=o(15),P=o(458),O=o(6),D=o(202),L=o(1088),I=o(459),B=new d({Extends:A,Mixins:[T.Alpha,T.BlendMode,T.ComputedSize,T.Crop,T.Depth,T.Flip,T.GetBounds,T.Mask,T.Origin,T.Pipeline,T.ScrollFactor,T.Tint,T.Transform,T.Visible,L],initialize:function Text(t,r,o,a,d){void 0===r&&(r=0),void 0===o&&(o=0),A.call(this,t,"Text"),this.renderer=t.sys.renderer,this.setPosition(r,o),this.setOrigin(0,0),this.initPipeline(),this.canvas=h.create(this),this.context=this.canvas.getContext("2d"),this.style=new I(this,d),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,0===this.style.resolution&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(a),d&&d.padding&&this.setPadding(d.padding),d&&d.lineSpacing&&this.setLineSpacing(d.lineSpacing),t.sys.game.events.on(S.CONTEXT_RESTORED,(function(){this.dirty=!0}),this)},initRTL:function initRTL(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",a(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function runWordWrap(t){var r=this.style;if(r.wordWrapCallback){var o=r.wordWrapCallback.call(r.wordWrapCallbackScope,t,this);return Array.isArray(o)&&(o=o.join("\n")),o}return r.wordWrapWidth?r.wordWrapUseAdvanced?this.advancedWordWrap(t,this.context,this.style.wordWrapWidth):this.basicWordWrap(t,this.context,this.style.wordWrapWidth):t},advancedWordWrap:function advancedWordWrap(t,r,o){for(var a="",h=t.replace(/ +/gi," ").split(this.splitRegExp),d=h.length,T=0;T<d;T++){var S=h[T],A="";if(S=S.replace(/^ *|\s*$/gi,""),r.measureText(S).width<o)a+=S+"\n";else{for(var P=o,O=S.split(" "),D=0;D<O.length;D++){var L=O[D],I=L+" ",B=r.measureText(I).width;if(B>P){if(0===D){for(var N=I;N.length&&(N=N.slice(0,-1),!((B=r.measureText(N).width)<=P)););if(!N.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var G=L.substr(N.length);O[D]=G,A+=N}var Y=O[D].length?D:D+1,X=O.slice(Y).join(" ").replace(/[ \n]*$/gi,"");h[T+1]=X+" "+(h[T+1]||""),d=h.length;break}A+=I,P-=B}a+=A.replace(/[ \n]*$/gi,"")+"\n"}}return a=a.replace(/[\s|\n]*$/gi,"")},basicWordWrap:function basicWordWrap(t,r,o){for(var a="",h=t.split(this.splitRegExp),d=h.length-1,T=r.measureText(" ").width,S=0;S<=d;S++){for(var A=o,P=h[S].split(" "),O=P.length-1,D=0;D<=O;D++){var L=P[D],I=r.measureText(L).width,B=I;D<O&&(B+=T),B>A&&D>0&&(a+="\n",A=o),a+=L,D<O?(a+=" ",A-=B):A-=I}S<d&&(a+="\n")}return a},getWrappedText:function getWrappedText(t){return void 0===t&&(t=this._text),this.style.syncFont(this.canvas,this.context),this.runWordWrap(t).split(this.splitRegExp)},setText:function setText(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this._text&&(this._text=t.toString(),this.updateText()),this},setStyle:function setStyle(t){return this.style.setStyle(t)},setFont:function setFont(t){return this.style.setFont(t)},setFontFamily:function setFontFamily(t){return this.style.setFontFamily(t)},setFontSize:function setFontSize(t){return this.style.setFontSize(t)},setFontStyle:function setFontStyle(t){return this.style.setFontStyle(t)},setFixedSize:function setFixedSize(t,r){return this.style.setFixedSize(t,r)},setBackgroundColor:function setBackgroundColor(t){return this.style.setBackgroundColor(t)},setFill:function setFill(t){return this.style.setFill(t)},setColor:function setColor(t){return this.style.setColor(t)},setStroke:function setStroke(t,r){return this.style.setStroke(t,r)},setShadow:function setShadow(t,r,o,a,h,d){return this.style.setShadow(t,r,o,a,h,d)},setShadowOffset:function setShadowOffset(t,r){return this.style.setShadowOffset(t,r)},setShadowColor:function setShadowColor(t){return this.style.setShadowColor(t)},setShadowBlur:function setShadowBlur(t){return this.style.setShadowBlur(t)},setShadowStroke:function setShadowStroke(t){return this.style.setShadowStroke(t)},setShadowFill:function setShadowFill(t){return this.style.setShadowFill(t)},setWordWrapWidth:function setWordWrapWidth(t,r){return this.style.setWordWrapWidth(t,r)},setWordWrapCallback:function setWordWrapCallback(t,r){return this.style.setWordWrapCallback(t,r)},setAlign:function setAlign(t){return this.style.setAlign(t)},setResolution:function setResolution(t){return this.style.setResolution(t)},setLineSpacing:function setLineSpacing(t){return this.lineSpacing=t,this.updateText()},setPadding:function setPadding(t,r,o,a){if("object"===_typeof(t)){var h=t,d=O(h,"x",null);null!==d?(t=d,o=d):(t=O(h,"left",0),o=O(h,"right",t));var T=O(h,"y",null);null!==T?(r=T,a=T):(r=O(h,"top",0),a=O(h,"bottom",r))}else void 0===t&&(t=0),void 0===r&&(r=t),void 0===o&&(o=t),void 0===a&&(a=r);return this.padding.left=t,this.padding.top=r,this.padding.right=o,this.padding.bottom=a,this.updateText()},setMaxLines:function setMaxLines(t){return this.style.setMaxLines(t)},updateText:function updateText(){var t=this.canvas,r=this.context,o=this.style,a=o.resolution,h=o.metrics;o.syncFont(t,r);var d=this._text;(o.wordWrapWidth||o.wordWrapCallback)&&(d=this.runWordWrap(this._text));var T,S=d.split(this.splitRegExp),A=P(this,h,S),O=this.padding;0===o.fixedWidth?(this.width=A.width+O.left+O.right,T=A.width):(this.width=o.fixedWidth,(T=this.width-O.left-O.right)<A.width&&(T=A.width)),0===o.fixedHeight?this.height=A.height+O.top+O.bottom:this.height=o.fixedHeight;var D,L,I=this.width,B=this.height;this.updateDisplayOrigin(),I*=a,B*=a,I=Math.max(I,1),B=Math.max(B,1),t.width!==I||t.height!==B?(t.width=I,t.height=B,this.frame.setSize(I,B),o.syncFont(t,r)):r.clearRect(0,0,I,B),r.save(),r.scale(a,a),o.backgroundColor&&(r.fillStyle=o.backgroundColor,r.fillRect(0,0,I,B)),o.syncStyle(t,r),r.textBaseline="alphabetic",r.translate(O.left,O.top);for(var N=0;N<A.lines;N++){if(D=o.strokeThickness/2,L=o.strokeThickness/2+N*A.lineHeight+h.ascent,N>0&&(L+=A.lineSpacing*N),o.rtl)D=I-D;else if("right"===o.align)D+=T-A.lineWidths[N];else if("center"===o.align)D+=(T-A.lineWidths[N])/2;else if("justify"===o.align&&A.lineWidths[N]/A.width>=.85){var G=A.width-A.lineWidths[N],Y=r.measureText(" ").width,X=S[N].trim(),U=X.split(" ");G+=(S[N].length-X.length)*Y;for(var z=Math.floor(G/Y),V=0;z>0;)U[V]+=" ",V=(V+1)%(U.length-1||1),--z;S[N]=U.join(" ")}this.autoRound&&(D=Math.round(D),L=Math.round(L)),o.strokeThickness&&(this.style.syncShadow(r,o.shadowStroke),r.strokeText(S[N],D,L)),o.color&&(this.style.syncShadow(r,o.shadowFill),r.fillText(S[N],D,L))}r.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(t,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var W=this.input;return W&&!W.customHitArea&&(W.hitArea.width=this.width,W.hitArea.height=this.height),this},getTextMetrics:function getTextMetrics(){return this.style.getTextMetrics()},text:{get:function get(){return this._text},set:function set(t){this.setText(t)}},toJSON:function toJSON(){var t=T.ToJSON(this),r={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=r,t},preDestroy:function preDestroy(){this.style.rtl&&D(this.canvas),h.remove(this.canvas),this.texture.destroy()}});t.exports=B},function(t,r,o){var a=o(31),h=o(0),d=o(11),T=o(22),S=o(15),A=o(361),P=o(192),O=o(1091),D=o(3),L=new h({Extends:S,Mixins:[d.Alpha,d.BlendMode,d.ComputedSize,d.Crop,d.Depth,d.Flip,d.GetBounds,d.Mask,d.Origin,d.Pipeline,d.ScrollFactor,d.Tint,d.Transform,d.Visible,O],initialize:function TileSprite(t,r,o,h,d,P,O){var L=t.sys.renderer;S.call(this,t,"TileSprite");var I=t.sys.textures.get(P),B=I.get(O);h&&d?(h=Math.floor(h),d=Math.floor(d)):(h=B.width,d=B.height),this._tilePosition=new D,this._tileScale=new D(1,1),this.dirty=!1,this.renderer=L,this.canvas=a.create(this,h,d),this.context=this.canvas.getContext("2d"),this.displayTexture=I,this.displayFrame=B,this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=A(B.width),this.potHeight=A(B.height),this.fillCanvas=a.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(r,o),this.setSize(h,d),this.setFrame(O),this.setOriginFromFrame(),this.initPipeline(),t.sys.game.events.on(T.CONTEXT_RESTORED,(function(t){if(t){var r=t.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=t.createTexture2D(0,r.LINEAR,r.LINEAR,r.REPEAT,r.REPEAT,r.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}}),this)},setTexture:function setTexture(t,r){return this.displayTexture=this.scene.sys.textures.get(t),this.setFrame(r)},setFrame:function setFrame(t){var r=this.displayTexture.get(t);return this.potWidth=A(r.width),this.potHeight=A(r.height),this.canvas.width=0,r.cutWidth&&r.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this.displayFrame=r,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function setTilePosition(t,r){return void 0!==t&&(this.tilePositionX=t),void 0!==r&&(this.tilePositionY=r),this},setTileScale:function setTileScale(t,r){return void 0===t&&(t=this.tileScaleX),void 0===r&&(r=t),this.tileScaleX=t,this.tileScaleY=r,this},updateTileTexture:function updateTileTexture(){if(this.dirty&&this.renderer){var t=this.displayFrame;if(t.source.isRenderTexture||t.source.isGLTexture)return console.warn("TileSprites can only use Image or Canvas based textures"),void(this.dirty=!1);var r=this.fillContext,o=this.fillCanvas,a=this.potWidth,h=this.potHeight;this.renderer&&this.renderer.gl||(a=t.cutWidth,h=t.cutHeight),r.clearRect(0,0,a,h),o.width=a,o.height=h,r.drawImage(t.source.image,t.cutX,t.cutY,t.cutWidth,t.cutHeight,0,0,a,h),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(o,this.fillPattern):this.fillPattern=r.createPattern(o,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function updateCanvas(){var t=this.canvas;if(t.width===this.width&&t.height===this.height||(t.width=this.width,t.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl)this.dirty=!1;else{var r=this.context;this.scene.sys.game.config.antialias||P.disable(r);var o=this._tileScale.x,a=this._tileScale.y,h=this._tilePosition.x,d=this._tilePosition.y;r.clearRect(0,0,this.width,this.height),r.save(),r.scale(o,a),r.translate(-h,-d),r.fillStyle=this.fillPattern,r.fillRect(h,d,this.width/o,this.height/a),r.restore(),this.dirty=!1}},preDestroy:function preDestroy(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),a.remove(this.canvas),a.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function get(){return this._tilePosition.x},set:function set(t){this._tilePosition.x=t,this.dirty=!0}},tilePositionY:{get:function get(){return this._tilePosition.y},set:function set(t){this._tilePosition.y=t,this.dirty=!0}},tileScaleX:{get:function get(){return this._tileScale.x},set:function set(t){this._tileScale.x=t,this.dirty=!0}},tileScaleY:{get:function get(){return this._tileScale.y},set:function set(t){this._tileScale.y=t,this.dirty=!0}}});t.exports=L},function(t,r,o){var a=o(0),h=o(18),d=o(11),T=o(75),S=o(22),A=o(51),P=o(15),O=o(70),D=o(222),L=o(1094),I=o(14),B=new a({Extends:P,Mixins:[d.Alpha,d.BlendMode,d.Depth,d.Flip,d.GetBounds,d.Mask,d.Origin,d.Pipeline,d.ScrollFactor,d.Size,d.TextureCrop,d.Tint,d.Transform,d.Visible,L],initialize:function Video(t,r,o,a){P.call(this,t,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=D(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=I.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(r,o),this.initPipeline(),a&&this.changeSource(a,!1);var h=t.sys.game.events;h.on(S.PAUSE,this.globalPause,this),h.on(S.RESUME,this.globalResume,this);var d=t.sys.sound;d&&d.on(O.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function addedToScene(){this.scene.sys.updateList.add(this)},removedFromScene:function removedFromScene(){this.scene.sys.updateList.remove(this)},play:function play(t,r,o){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var a=this.video;if(!a)return console.warn("Video not loaded"),this;void 0===t&&(t=a.loop);var h=this.scene.sys.sound;h&&h.mute&&this.setMute(!0),isNaN(r)||(this._markerIn=r),!isNaN(o)&&o>r&&(this._markerOut=o),a.loop=t;var d=this._callbacks,T=a.play();return void 0!==T?T.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(a.addEventListener("playing",d.play,!0),a.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),a.addEventListener("ended",d.end,!0),a.addEventListener("timeupdate",d.time,!0),a.addEventListener("seeking",d.seeking,!0),a.addEventListener("seeked",d.seeked,!0),this},changeSource:function changeSource(t,r,o,a,h){void 0===r&&(r=!0),this.video&&this.stop();var d=this.scene.sys.cache.video.get(t);return d?(this.video=d,this._cacheKey=t,this._codePaused=d.paused,this._codeMuted=d.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,d,d.videoWidth,d.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,d.videoWidth,d.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(T.VIDEO_CREATED,this,d.videoWidth,d.videoHeight)):this.updateTexture(),d.currentTime=0,this._lastUpdate=0,r&&this.play(o,a,h)):this.video=null,this},addMarker:function addMarker(t,r,o){return!isNaN(r)&&r>=0&&!isNaN(o)&&(this.markers[t]=[r,o]),this},playMarker:function playMarker(t,r){var o=this.markers[t];return o&&this.play(r,o[0],o[1]),this},removeMarker:function removeMarker(t){return delete this.markers[t],this},snapshot:function snapshot(t,r){return void 0===t&&(t=this.width),void 0===r&&(r=this.height),this.snapshotArea(0,0,this.width,this.height,t,r)},snapshotArea:function snapshotArea(t,r,o,a,h,d){void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=this.width),void 0===a&&(a=this.height),void 0===h&&(h=o),void 0===d&&(d=a);var T=this.video,S=this.snapshotTexture;return S?(S.setSize(h,d),T&&S.context.drawImage(T,t,r,o,a,0,0,h,d)):(S=this.scene.sys.textures.createCanvas(D(),h,d),this.snapshotTexture=S,T&&S.context.drawImage(T,t,r,o,a,0,0,h,d)),S.update()},saveSnapshotTexture:function saveSnapshotTexture(t){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,t):this.snapshotTexture=this.scene.sys.textures.createCanvas(t,this.width,this.height),this.snapshotTexture},loadURL:function loadURL(t,r,o){void 0===o&&(o=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var a=document.createElement("video");return a.controls=!1,o&&(a.muted=!0,a.defaultMuted=!0,a.setAttribute("autoplay","autoplay")),a.setAttribute("playsinline","playsinline"),a.setAttribute("preload","auto"),a.addEventListener("error",this._callbacks.error,!0),a.src=t,a.load(),this.video=a,this},loadMediaStream:function loadMediaStream(t,r,o){void 0===o&&(o=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var a=document.createElement("video");a.controls=!1,o&&(a.muted=!0,a.defaultMuted=!0,a.setAttribute("autoplay","autoplay")),a.setAttribute("playsinline","playsinline"),a.setAttribute("preload","auto"),a.addEventListener("error",this._callbacks.error,!0);try{a.srcObject=t}catch(h){a.src=window.URL.createObjectURL(t)}return a.load(),this.video=a,this},playPromiseSuccessHandler:function playPromiseSuccessHandler(){this._codePaused=!1,this.touchLocked=!1,this.emit(T.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function playPromiseErrorHandler(t){this.scene.sys.input.once(A.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(T.VIDEO_ERROR,this,t)},playHandler:function playHandler(){this._codePaused=!1,this.touchLocked=!1,this.emit(T.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function loadErrorHandler(t){this.stop(),this.emit(T.VIDEO_ERROR,this,t)},unlockHandler:function unlockHandler(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(T.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(T.VIDEO_PLAY,this)},completeHandler:function completeHandler(){this.emit(T.VIDEO_COMPLETE,this)},timeUpdateHandler:function timeUpdateHandler(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(T.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function preUpdate(){var t=this.video;if(t){var r=t.currentTime;r!==this._lastUpdate&&(this._lastUpdate=r,this.updateTexture(),r>=this._markerOut&&(t.loop?(t.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=r,this.emit(T.VIDEO_LOOP,this)):(this.emit(T.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function checkVideoProgress(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(T.VIDEO_TIMEOUT,this))},updateTexture:function updateTexture(){var t=this.video,r=t.videoWidth,o=t.videoHeight;if(this.videoTexture){var a=this.videoTextureSource;a.source!==t&&(a.source=t,a.width=r,a.height=o),a.update()}else this.videoTexture=this.scene.sys.textures.create(this._key,t,r,o),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,r,o),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(T.VIDEO_CREATED,this,r,o)},getVideoKey:function getVideoKey(){return this._cacheKey},seekTo:function seekTo(t){var r=this.video;if(r){var o=r.duration;if(o!==1/0&&!isNaN(o)){var a=o*t;this.setCurrentTime(a)}}return this},getCurrentTime:function getCurrentTime(){return this.video?this.video.currentTime:0},setCurrentTime:function setCurrentTime(t){var r=this.video;if(r){if("string"==typeof t){var o=t[0],a=parseFloat(t.substr(1));"+"===o?t=r.currentTime+a:"-"===o&&(t=r.currentTime-a)}r.currentTime=t,this._lastUpdate=t}return this},isSeeking:function isSeeking(){return this._isSeeking},seekingHandler:function seekingHandler(){this._isSeeking=!0,this.emit(T.VIDEO_SEEKING,this)},seekedHandler:function seekedHandler(){this._isSeeking=!1,this.emit(T.VIDEO_SEEKED,this),this.video&&this.updateTexture()},getProgress:function getProgress(){var t=this.video;if(t){var r=t.currentTime,o=t.duration;if(o!==1/0&&!isNaN(o))return r/o}return 0},getDuration:function getDuration(){return this.video?this.video.duration:0},setMute:function setMute(t){void 0===t&&(t=!0),this._codeMuted=t;var r=this.video;return r&&(r.muted=!!this._systemMuted||t),this},isMuted:function isMuted(){return this._codeMuted},globalMute:function globalMute(t,r){this._systemMuted=r;var o=this.video;o&&(o.muted=!!this._codeMuted||r)},globalPause:function globalPause(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function globalResume(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function setPaused(t){void 0===t&&(t=!0);var r=this.video;return this._codePaused=t,r&&(t?r.paused||r.pause():t||r.paused&&!this._systemPaused&&r.play()),this},getVolume:function getVolume(){return this.video?this.video.volume:1},setVolume:function setVolume(t){return void 0===t&&(t=1),this.video&&(this.video.volume=h(t,0,1)),this},getPlaybackRate:function getPlaybackRate(){return this.video?this.video.playbackRate:1},setPlaybackRate:function setPlaybackRate(t){return this.video&&(this.video.playbackRate=t),this},getLoop:function getLoop(){return!!this.video&&this.video.loop},setLoop:function setLoop(t){return void 0===t&&(t=!0),this.video&&(this.video.loop=t),this},isPlaying:function isPlaying(){return!!this.video&&!(this.video.paused||this.video.ended)},isPaused:function isPaused(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function saveTexture(t,r){return void 0===r&&(r=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,t),this._key=t,this.flipY=r,this.videoTextureSource&&this.videoTextureSource.setFlipY(r),this.videoTexture},stop:function stop(){var t=this.video;if(t){var r=this._callbacks;for(var o in r)t.removeEventListener(o,r[o],!0);t.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(T.VIDEO_STOP,this),this},removeVideoElement:function removeVideoElement(){var t=this.video;if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("autoplay"),t.removeAttribute("src"),this.video=null}},preDestroy:function preDestroy(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var t=this.scene.sys.game.events;t.off(S.PAUSE,this.globalPause,this),t.off(S.RESUME,this.globalResume,this);var r=this.scene.sys.sound;r&&r.off(O.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});t.exports=B},function(t,r,o){var a=o(0),h=o(228),d=o(470),T=o(56),S=new a({initialize:function Polygon(t){this.type=T.POLYGON,this.area=0,this.points=[],t&&this.setTo(t)},contains:function contains(t,r){return h(this,t,r)},setTo:function setTo(t){if(this.area=0,this.points=[],"string"==typeof t&&(t=t.split(" ")),!Array.isArray(t))return this;for(var r,o=Number.MAX_VALUE,a=0;a<t.length;a++)r={x:0,y:0},"number"==typeof t[a]||"string"==typeof t[a]?(r.x=parseFloat(t[a]),r.y=parseFloat(t[a+1]),a++):Array.isArray(t[a])?(r.x=t[a][0],r.y=t[a][1]):(r.x=t[a].x,r.y=t[a].y),this.points.push(r),r.y<o&&(o=r.y);return this.calculateArea(o),this},calculateArea:function calculateArea(){if(this.points.length<3)return this.area=0,this.area;for(var t,r,o=0,a=0;a<this.points.length-1;a++)t=this.points[a],o+=((r=this.points[a+1]).x-t.x)*(t.y+r.y);return t=this.points[0],r=this.points[this.points.length-1],o+=(t.x-r.x)*(r.y+t.y),this.area=.5*-o,this.area},getPoints:function getPoints(t,r,o){return d(this,t,r,o)}});t.exports=S},function(t,r){t.exports=function Contains(t,r,o){for(var a=!1,h=-1,d=t.points.length-1;++h<t.points.length;d=h){var T=t.points[h].x,S=t.points[h].y,A=t.points[d].x,P=t.points[d].y;(S<=o&&o<P||P<=o&&o<S)&&r<(A-T)*(o-S)/(P-S)+T&&(a=!a)}return a}},function(t,r,o){var a=o(0),h=o(11),d=o(15),T=o(2),S=o(17),A=o(478),P=o(1176),O=o(25),D=new a({Extends:d,Mixins:[h.ComputedSize,h.Depth,h.GetBounds,h.Mask,h.Origin,h.ScrollFactor,h.Transform,h.Visible,P],initialize:function Shader(t,r,o,a,h,T,S,A){void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=128),void 0===T&&(T=128),d.call(this,t,"Shader"),this.blendMode=-1,this.shader;var P=t.sys.renderer;this.renderer=P,this.gl=P.gl,this.vertexData=new ArrayBuffer(2*Float32Array.BYTES_PER_ELEMENT*6),this.vertexBuffer=P.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new O,this._tempMatrix2=new O,this._tempMatrix3=new O,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=P.width,this._rendererHeight=P.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(o,a),this.setSize(h,T),this.setOrigin(.5,.5),this.setShader(r,S,A)},willRender:function willRender(t){return!!this.renderToTexture||!(d.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},setRenderToTexture:function setRenderToTexture(t,r){if(void 0===r&&(r=!1),!this.renderToTexture){var o=this.width,a=this.height,h=this.renderer;this.glTexture=h.createTextureFromSource(null,o,a,0),this.glTexture.flipY=r,this.framebuffer=h.createFramebuffer(o,a,this.glTexture,!1),this._rendererWidth=o,this._rendererHeight=a,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),t&&(this.texture=this.scene.sys.textures.addGLTexture(t,this.glTexture,o,a))}return this.shader&&(h.pipelines.clear(),this.load(),this.flush(),h.pipelines.rebind()),this},setShader:function setShader(t,r,o){if(void 0===r&&(r=[]),"string"==typeof t){var a=this.scene.sys.cache.shader;if(!a.has(t))return console.warn("Shader missing: "+t),this;this.shader=a.get(t)}else this.shader=t;var h=this.gl,d=this.renderer;this.program&&h.deleteProgram(this.program);var T=d.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);h.uniformMatrix4fv(h.getUniformLocation(T,"uViewMatrix"),!1,this.viewMatrix),h.uniformMatrix4fv(h.getUniformLocation(T,"uProjectionMatrix"),!1,this.projectionMatrix),h.uniform2f(h.getUniformLocation(T,"uResolution"),this.width,this.height),this.program=T;var A=new Date,P={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[A.getFullYear(),A.getMonth(),A.getDate(),60*A.getHours()*60+60*A.getMinutes()+A.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=S(!0,{},this.shader.uniforms,P):this.uniforms=P;for(var O=0;O<4;O++)r[O]&&this.setSampler2D("iChannel"+O,r[O],O,o);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function setPointer(t){return this.pointer=t,this},projOrtho:function projOrtho(t,r,o,a){var h=1/(t-r),d=1/(o-a),T=this.projectionMatrix;T[0]=-2*h,T[5]=-2*d,T[10]=-.001,T[12]=(t+r)*h,T[13]=(a+o)*d,T[14]=-0;var S=this.program,A=this.gl;this.renderer.setProgram(S),A.uniformMatrix4fv(A.getUniformLocation(S,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=r,this._rendererHeight=o},initUniforms:function initUniforms(){var t=this.gl,r=this.renderer.glFuncMap,o=this.program;for(var a in this._textureCount=0,this.uniforms){var h=this.uniforms[a],d=h.type,T=r[d];h.uniformLocation=t.getUniformLocation(o,a),"sampler2D"!==d&&(h.glMatrix=T.matrix,h.glValueLength=T.length,h.glFunc=T.func)}},setSampler2DBuffer:function setSampler2DBuffer(t,r,o,a,h,d){void 0===h&&(h=0),void 0===d&&(d={});var T=this.uniforms[t];return T.value=r,d.width=o,d.height=a,T.textureData=d,this._textureCount=h,this.initSampler2D(T),this},setSampler2D:function setSampler2D(t,r,o,a){void 0===o&&(o=0);var h=this.scene.sys.textures;if(h.exists(r)){var d=h.getFrame(r);if(d.glTexture&&d.glTexture.isRenderTexture)return this.setSampler2DBuffer(t,d.glTexture,d.width,d.height,o,a);var T=this.uniforms[t],S=d.source;T.textureKey=r,T.source=S.image,T.value=d.glTexture,S.isGLTexture&&(a||(a={}),a.width=S.width,a.height=S.height),a&&(T.textureData=a),this._textureCount=o,this.initSampler2D(T)}return this},setUniform:function setUniform(t,r){return A(this.uniforms,t,r),this},getUniform:function getUniform(t){return T(this.uniforms,t,null)},setChannel0:function setChannel0(t,r){return this.setSampler2D("iChannel0",t,0,r)},setChannel1:function setChannel1(t,r){return this.setSampler2D("iChannel1",t,1,r)},setChannel2:function setChannel2(t,r){return this.setSampler2D("iChannel2",t,2,r)},setChannel3:function setChannel3(t,r){return this.setSampler2D("iChannel3",t,3,r)},initSampler2D:function initSampler2D(t){if(t.value){var r=this.gl;r.activeTexture(r.TEXTURE0+this._textureCount),r.bindTexture(r.TEXTURE_2D,t.value);var o=t.textureData;if(o&&!t.value.isRenderTexture){var a=r[T(o,"magFilter","linear").toUpperCase()],h=r[T(o,"minFilter","linear").toUpperCase()],d=r[T(o,"wrapS","repeat").toUpperCase()],S=r[T(o,"wrapT","repeat").toUpperCase()],A=r[T(o,"format","rgba").toUpperCase()];if(o.repeat&&(d=r.REPEAT,S=r.REPEAT),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!o.flipY),o.width){var P=T(o,"width",512),O=T(o,"height",2),D=T(o,"border",0);r.texImage2D(r.TEXTURE_2D,0,A,P,O,D,A,r.UNSIGNED_BYTE,null)}else r.texImage2D(r.TEXTURE_2D,0,A,r.RGBA,r.UNSIGNED_BYTE,t.source);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,a),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,h),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,d),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,S)}this.renderer.setProgram(this.program),r.uniform1i(t.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function syncUniforms(){var t,r,o,a,h,d=this.gl,T=this.uniforms,S=0;for(var A in T)o=(t=T[A]).glFunc,r=t.glValueLength,a=t.uniformLocation,null!==(h=t.value)&&(1===r?t.glMatrix?o.call(d,a,t.transpose,h):o.call(d,a,h):2===r?o.call(d,a,h.x,h.y):3===r?o.call(d,a,h.x,h.y,h.z):4===r?o.call(d,a,h.x,h.y,h.z,h.w):"sampler2D"===t.type&&(d.activeTexture(d.TEXTURE0+S),d.bindTexture(d.TEXTURE_2D,h),d.uniform1i(a,S),S++))},load:function load(t){var r=this.gl,o=this.width,a=this.height,h=this.renderer,d=this.program,T=this.viewMatrix;if(!this.renderToTexture){var S=-this._displayOriginX,A=-this._displayOriginY;T[0]=t[0],T[1]=t[1],T[4]=t[2],T[5]=t[3],T[8]=t[4],T[9]=t[5],T[12]=T[0]*S+T[4]*A,T[13]=T[1]*S+T[5]*A}r.useProgram(d),r.uniformMatrix4fv(r.getUniformLocation(d,"uViewMatrix"),!1,T),r.uniform2f(r.getUniformLocation(d,"uResolution"),this.width,this.height);var P=this.uniforms,O=P.resolution;O.value.x=o,O.value.y=a,P.time.value=h.game.loop.getDuration();var D=this.pointer;if(D){var L=P.mouse,I=D.x/o,B=1-D.y/a;L.value.x=I.toFixed(2),L.value.y=B.toFixed(2)}this.syncUniforms()},flush:function flush(){var t=this.width,r=this.height,o=this.program,a=this.gl,h=this.vertexBuffer,d=this.renderer,T=2*Float32Array.BYTES_PER_ELEMENT;this.renderToTexture&&(d.setFramebuffer(this.framebuffer),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT)),a.bindBuffer(a.ARRAY_BUFFER,h);var S=a.getAttribLocation(o,"inPosition");-1!==S&&(a.enableVertexAttribArray(S),a.vertexAttribPointer(S,2,a.FLOAT,!1,T,0));var A=this.vertexViewF32;A[3]=r,A[4]=t,A[5]=r,A[8]=t,A[9]=r,A[10]=t,a.bufferSubData(a.ARRAY_BUFFER,0,this.bytes.subarray(0,6*T)),a.drawArrays(a.TRIANGLES,0,6),this.renderToTexture&&d.setFramebuffer(null,!1)},setAlpha:function setAlpha(){},setBlendMode:function setBlendMode(){},preDestroy:function preDestroy(){var t=this.gl;t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});t.exports=D},function(t,r,o){var a=o(0),h=o(11),d=o(36),T=o(116),S=o(15),A=o(479),P=o(480),O=o(19),D=o(69),L=o(1179),I=o(79),B=o(39),N=o(117),G=new a({Extends:S,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.Mask,h.Pipeline,h.Size,h.Texture,h.Transform,h.Visible,h.ScrollFactor,L],initialize:function Mesh(t,r,o,a,h,d,T,A,P,O,L,I){void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a="__WHITE"),S.call(this,t,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new B,this.modelScale=new B(1,1,1),this.modelRotation=new B,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new D,this.viewPosition=new B,this.viewMatrix=new D,this.projectionMatrix=new D,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var N=t.sys.renderer;this.setPosition(r,o),this.setTexture(a,h),this.setSize(N.width,N.height),this.initPipeline(),this.setPerspective(N.width,N.height),d&&this.addVertices(d,T,A,P,O,L,I)},addedToScene:function addedToScene(){this.scene.sys.updateList.add(this)},removedFromScene:function removedFromScene(){this.scene.sys.updateList.remove(this)},panX:function panX(t){return this.viewPosition.addScale(B.LEFT,t),this.dirtyCache[10]=1,this},panY:function panY(t){return this.viewPosition.y+=B.DOWN.y*t,this.dirtyCache[10]=1,this},panZ:function panZ(t){return this.viewPosition.z+=t,this.dirtyCache[10]=1,this},setPerspective:function setPerspective(t,r,o,a,h){return void 0===o&&(o=45),void 0===a&&(a=.01),void 0===h&&(h=1e3),this.projectionMatrix.perspective(d(o),t/r,a,h),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function setOrtho(t,r,o,a){return void 0===t&&(t=this.scene.sys.renderer.getAspectRatio()),void 0===r&&(r=1),void 0===o&&(o=-1e3),void 0===a&&(a=1e3),this.projectionMatrix.ortho(-t,t,-r,r,o,a),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function clear(){return this.faces.forEach((function(t){t.destroy()})),this.faces=[],this.vertices=[],this},addVerticesFromObj:function addVerticesFromObj(t,r,o,a,h,d,T,S,A){var O=this.scene.sys.cache.obj.get(t);return O&&P(O,this,r,o,a,h,d,T,S,A),this},sortByDepth:function sortByDepth(t,r){return t.depth-r.depth},depthSort:function depthSort(){return I(this.faces,this.sortByDepth),this},addVertex:function addVertex(t,r,o,a,h,d,T){var S=new N(t,r,o,a,h,d,T);return this.vertices.push(S),S},addFace:function addFace(t,r,o){var a=new T(t,r,o);return this.faces.push(a),this.dirtyCache[9]=-1,a},addVertices:function addVertices(t,r,o,a,h,d,T){var S=A(t,r,o,a,h,d,T);return S&&(this.faces=this.faces.concat(S.faces),this.vertices=this.vertices.concat(S.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function getFaceCount(){return this.faces.length},getVertexCount:function getVertexCount(){return this.vertices.length},getFace:function getFace(t){return this.faces[t]},getFaceAt:function getFaceAt(t,r,o){void 0===o&&(o=this.scene.sys.cameras.main);for(var a=O(this,o).calc,h=this.faces,d=[],T=0;T<h.length;T++){var S=h[T];S.contains(t,r,a)&&d.push(S)}return I(d,this.sortByDepth)},setDebug:function setDebug(t,r){return this.debugGraphic=t,this.debugCallback=t||r?r||this.renderDebug:null,this},isDirty:function isDirty(){var t=this.modelPosition,r=this.modelRotation,o=this.modelScale,a=this.dirtyCache,h=t.x,d=t.y,T=t.z,S=r.x,A=r.y,P=r.z,O=o.x,D=o.y,L=o.z,I=this.getFaceCount(),B=a[0],N=a[1],G=a[2],Y=a[3],X=a[4],U=a[5],z=a[6],V=a[7],W=a[8],H=a[9];return a[0]=h,a[1]=d,a[2]=T,a[3]=S,a[4]=A,a[5]=P,a[6]=O,a[7]=D,a[8]=L,a[9]=I,B!==h||N!==d||G!==T||Y!==S||X!==A||U!==P||z!==O||V!==D||W!==L||H!==I},preUpdate:function preUpdate(){this.totalRendered=this.totalFrame,this.totalFrame=0;var t=this.dirtyCache;if(this.ignoreDirtyCache||t[10]||this.isDirty()){var r=this.width,o=this.height,a=this.viewMatrix,h=this.viewPosition;t[10]&&(a.identity(),a.translate(h),a.invert(),t[10]=0);var d=this.transformMatrix;d.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var T=h.z,S=this.faces,A=0;A<S.length;A++)S[A].transformCoordinatesLocal(d,r,o,T);this.depthSort()}},renderDebug:function renderDebug(t,r){for(var o=t.debugGraphic,a=0;a<r.length;a++){var h=r[a],d=h.vertex1.tx,T=h.vertex1.ty,S=h.vertex2.tx,A=h.vertex2.ty,P=h.vertex3.tx,O=h.vertex3.ty;o.strokeTriangle(d,T,S,A,P,O)}},preDestroy:function preDestroy(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});t.exports=G},function(t,r,o){var a=o(50);t.exports=function CircleToCircle(t,r){return a(t.x,t.y,r.x,r.y)<=t.radius+r.radius}},function(t,r,o){var a=o(4),h=o(233);t.exports=function GetLineToCircle(t,r,o){if(void 0===o&&(o=[]),h(t,r)){var d,T,S=t.x1,A=t.y1,P=t.x2,O=t.y2,D=r.x,L=r.y,I=r.radius,B=P-S,N=O-A,G=S-D,Y=A-L,X=B*B+N*N,U=2*(B*G+N*Y),z=U*U-4*X*(G*G+Y*Y-I*I);if(0===z){var V=-U/(2*X);d=S+V*B,T=A+V*N,V>=0&&V<=1&&o.push(new a(d,T))}else if(z>0){var W=(-U-Math.sqrt(z))/(2*X);d=S+W*B,T=A+W*N,W>=0&&W<=1&&o.push(new a(d,T));var H=(-U+Math.sqrt(z))/(2*X);d=S+H*B,T=A+H*N,H>=0&&H<=1&&o.push(new a(d,T))}}return o}},function(t,r,o){var a=o(66),h=new(o(4));t.exports=function LineToCircle(t,r,o){if(void 0===o&&(o=h),a(r,t.x1,t.y1))return o.x=t.x1,o.y=t.y1,!0;if(a(r,t.x2,t.y2))return o.x=t.x2,o.y=t.y2,!0;var d=t.x2-t.x1,T=t.y2-t.y1,S=r.x-t.x1,A=r.y-t.y1,P=d*d+T*T,O=d,D=T;if(P>0){var L=(S*d+A*T)/P;O*=L,D*=L}return o.x=t.x1+O,o.y=t.y1+D,O*O+D*D<=P&&O*d+D*T>=0&&a(r,o.x,o.y)}},function(t,r,o){var a=o(4),h=o(96),d=o(488);t.exports=function GetLineToRectangle(t,r,o){if(void 0===o&&(o=[]),d(t,r))for(var T=r.getLineA(),S=r.getLineB(),A=r.getLineC(),P=r.getLineD(),O=[new a,new a,new a,new a],D=[h(T,t,O[0]),h(S,t,O[1]),h(A,t,O[2]),h(P,t,O[3])],L=0;L<4;L++)D[L]&&o.push(O[L]);return o}},function(t,r){t.exports=function ContainsArray(t,r,o,a){void 0===o&&(o=!1),void 0===a&&(a=[]);for(var h,d,T,S,A,P,O=t.x3-t.x1,D=t.y3-t.y1,L=t.x2-t.x1,I=t.y2-t.y1,B=O*O+D*D,N=O*L+D*I,G=L*L+I*I,Y=B*G-N*N,X=0===Y?0:1/Y,U=t.x1,z=t.y1,V=0;V<r.length&&(d=(B*(P=L*(T=r[V].x-U)+I*(S=r[V].y-z))-N*(A=O*T+D*S))*X,!((h=(G*A-N*P)*X)>=0&&d>=0&&h+d<1&&(a.push({x:r[V].x,y:r[V].y}),o)));V++);return a}},function(t,r){t.exports=function RotateAroundXY(t,r,o,a){var h=Math.cos(a),d=Math.sin(a),T=t.x1-r,S=t.y1-o;return t.x1=T*h-S*d+r,t.y1=T*d+S*h+o,T=t.x2-r,S=t.y2-o,t.x2=T*h-S*d+r,t.y2=T*d+S*h+o,t}},function(t,r){t.exports=function GetAspectRatio(t){return 0===t.height?NaN:t.width/t.height}},function(t,r){t.exports=function RotateAroundXY(t,r,o,a){var h=Math.cos(a),d=Math.sin(a),T=t.x1-r,S=t.y1-o;return t.x1=T*h-S*d+r,t.y1=T*d+S*h+o,T=t.x2-r,S=t.y2-o,t.x2=T*h-S*d+r,t.y2=T*d+S*h+o,T=t.x3-r,S=t.y3-o,t.x3=T*h-S*d+r,t.y3=T*d+S*h+o,t}},function(t,r,o){t.exports={BUTTON_DOWN:o(1310),BUTTON_UP:o(1311),CONNECTED:o(1312),DISCONNECTED:o(1313),GAMEPAD_BUTTON_DOWN:o(1314),GAMEPAD_BUTTON_UP:o(1315)}},function(t,r,o){var a=o(17),h=o(156);t.exports=function MergeXHRSettings(t,r){var o=void 0===t?h():a({},t);if(r)for(var d in r)void 0!==r[d]&&(o[d]=r[d]);return o}},function(t,r,o){var a=o(0),h=o(21),d=o(23),T=o(8),S=o(2),A=o(7),P=o(408),O=new a({Extends:d,initialize:function XMLFile(t,r,o,a){var h="xml";if(A(r)){var T=r;r=S(T,"key"),o=S(T,"url"),a=S(T,"xhrSettings"),h=S(T,"extension",h)}var P={type:"xml",cache:t.cacheManager.xml,extension:h,responseType:"text",key:r,url:o,xhrSettings:a};d.call(this,t,P)},onProcess:function onProcess(){this.state=h.FILE_PROCESSING,this.data=P(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});T.register("xml",(function(t,r,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new O(this,t[a]));else this.addFile(new O(this,t,r,o));return this})),t.exports=O},function(t,r,o){var a=o(0),h=o(21),d=o(23),T=o(8),S=o(2),A=o(7),P=new a({Extends:d,initialize:function TextFile(t,r,o,a){var h="text",T="txt",P=t.cacheManager.text;if(A(r)){var O=r;r=S(O,"key"),o=S(O,"url"),a=S(O,"xhrSettings"),T=S(O,"extension",T),h=S(O,"type",h),P=S(O,"cache",P)}var D={type:h,cache:P,extension:T,responseType:"text",key:r,url:o,xhrSettings:a};d.call(this,t,D)},onProcess:function onProcess(){this.state=h.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});T.register("text",(function(t,r,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new P(this,t[a]));else this.addFile(new P(this,t,r,o));return this})),t.exports=P},function(t,r,o){t.exports={Acceleration:o(1368),Angular:o(1369),Bounce:o(1370),Debug:o(1371),Drag:o(1372),Enable:o(1373),Friction:o(1374),Gravity:o(1375),Immovable:o(1376),Mass:o(1377),OverlapCirc:o(523),OverlapRect:o(244),Pushable:o(1378),Size:o(1379),Velocity:o(1380)}},function(t,r){t.exports=function OverlapRect(t,r,o,a,h,d,T){void 0===d&&(d=!0),void 0===T&&(T=!1);var S=[],A=[],P=t.treeMinMax;if(P.minX=r,P.minY=o,P.maxX=r+a,P.maxY=o+h,T&&(A=t.staticTree.search(P)),d&&t.useTree)S=t.tree.search(P);else if(d){var O=t.bodies,D={position:{x:r,y:o},left:r,top:o,right:r+a,bottom:o+h,isCircle:!1},L=t.intersects;O.iterate((function(t){L(t,D)&&S.push(t)}))}return A.concat(S)}},function(t,r,o){t.exports={COLLIDE:o(1381),OVERLAP:o(1382),PAUSE:o(1383),RESUME:o(1384),TILE_COLLIDE:o(1385),TILE_OVERLAP:o(1386),WORLD_BOUNDS:o(1387),WORLD_STEP:o(1388)}},function(t,r,o){var a=o(62);t.exports=function GetOverlapX(t,r,o,h){var d=0,T=t.deltaAbsX()+r.deltaAbsX()+h;return 0===t._dx&&0===r._dx?(t.embedded=!0,r.embedded=!0):t._dx>r._dx?(d=t.right-r.x)>T&&!o||!1===t.checkCollision.right||!1===r.checkCollision.left?d=0:(t.touching.none=!1,t.touching.right=!0,r.touching.none=!1,r.touching.left=!0,r.physicsType!==a.STATIC_BODY||o||(t.blocked.none=!1,t.blocked.right=!0),t.physicsType!==a.STATIC_BODY||o||(r.blocked.none=!1,r.blocked.left=!0)):t._dx<r._dx&&(-(d=t.x-r.width-r.x)>T&&!o||!1===t.checkCollision.left||!1===r.checkCollision.right?d=0:(t.touching.none=!1,t.touching.left=!0,r.touching.none=!1,r.touching.right=!0,r.physicsType!==a.STATIC_BODY||o||(t.blocked.none=!1,t.blocked.left=!0),t.physicsType!==a.STATIC_BODY||o||(r.blocked.none=!1,r.blocked.right=!0))),t.overlapX=d,r.overlapX=d,d}},function(t,r,o){var a=o(62);t.exports=function GetOverlapY(t,r,o,h){var d=0,T=t.deltaAbsY()+r.deltaAbsY()+h;return 0===t._dy&&0===r._dy?(t.embedded=!0,r.embedded=!0):t._dy>r._dy?(d=t.bottom-r.y)>T&&!o||!1===t.checkCollision.down||!1===r.checkCollision.up?d=0:(t.touching.none=!1,t.touching.down=!0,r.touching.none=!1,r.touching.up=!0,r.physicsType!==a.STATIC_BODY||o||(t.blocked.none=!1,t.blocked.down=!0),t.physicsType!==a.STATIC_BODY||o||(r.blocked.none=!1,r.blocked.up=!0)):t._dy<r._dy&&(-(d=t.y-r.bottom)>T&&!o||!1===t.checkCollision.up||!1===r.checkCollision.down?d=0:(t.touching.none=!1,t.touching.up=!0,r.touching.none=!1,r.touching.down=!0,r.physicsType!==a.STATIC_BODY||o||(t.blocked.none=!1,t.blocked.up=!0),t.physicsType!==a.STATIC_BODY||o||(r.blocked.none=!1,r.blocked.down=!0))),t.overlapY=d,r.overlapY=d,d}},function(t,r){t.exports=function TileIntersectsBody(t,r){return!(r.right<=t.left||r.bottom<=t.top||r.position.x>=t.right||r.position.y>=t.bottom)}},function(t,r,o){t.exports={Bounce:o(1495),Collision:o(1496),Force:o(1497),Friction:o(1498),Gravity:o(1499),Mass:o(1500),Sensor:o(1501),SetBody:o(1502),Sleep:o(1503),Static:o(1520),Transform:o(1521),Velocity:o(1522)}},function(t,r){var o={};t.exports=o,o.create=function(t,r){var a=t.bodyA,h=t.bodyB,d={id:o.id(a,h),bodyA:a,bodyB:h,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:a.isSensor||h.isSensor,timeCreated:r,timeUpdated:r,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return o.update(d,t,r),d},o.update=function(t,r,a){if(t.collision=r,r.collided){var h=r.supports,d=t.activeContacts,T=r.parentA,S=r.parentB;t.inverseMass=T.inverseMass+S.inverseMass,t.friction=Math.min(T.friction,S.friction),t.frictionStatic=Math.max(T.frictionStatic,S.frictionStatic),t.restitution=Math.max(T.restitution,S.restitution),t.slop=Math.max(T.slop,S.slop);for(var A=0;A<h.length;A++)d[A]=h[A].contact;var P=h.length;P<d.length&&(d.length=P),t.separation=r.depth,o.setActive(t,!0,a)}else!0===t.isActive&&o.setActive(t,!1,a)},o.setActive=function(t,r,o){r?(t.isActive=!0,t.timeUpdated=o):(t.isActive=!1,t.activeContacts.length=0)},o.id=function(t,r){return t.id<r.id?"A"+t.id+"B"+r.id:"A"+r.id+"B"+t.id}},function(t,r,o){t.exports={CalculateFacesAt:o(252),CalculateFacesWithin:o(63),CheckIsoBounds:o(541),Copy:o(1420),CreateFromTiles:o(1421),CullBounds:o(543),CullTiles:o(544),Fill:o(1422),FilterTiles:o(1423),FindByIndex:o(1424),FindTile:o(1425),ForEachTile:o(1426),GetCullTilesFunction:o(1427),GetTileAt:o(158),GetTileAtWorldXY:o(1428),GetTilesWithin:o(26),GetTilesWithinShape:o(1429),GetTilesWithinWorldXY:o(529),GetTileToWorldXFunction:o(1430),GetTileToWorldXYFunction:o(1431),GetTileToWorldYFunction:o(1432),GetWorldToTileXFunction:o(1433),GetWorldToTileXYFunction:o(1434),GetWorldToTileYFunction:o(1435),HasTileAt:o(562),HasTileAtWorldXY:o(1436),HexagonalCullBounds:o(546),HexagonalCullTiles:o(545),HexagonalTileToWorldXY:o(550),HexagonalTileToWorldY:o(554),HexagonalWorldToTileXY:o(556),HexagonalWorldToTileY:o(560),IsInLayerBounds:o(119),IsometricCullTiles:o(547),IsometricTileToWorldXY:o(551),IsometricWorldToTileXY:o(557),PutTileAt:o(257),PutTileAtWorldXY:o(1437),PutTilesAt:o(1438),Randomize:o(1439),RemoveTileAt:o(563),RemoveTileAtWorldXY:o(1440),RenderDebug:o(1441),ReplaceByIndex:o(542),RunCull:o(159),SetCollision:o(1442),SetCollisionBetween:o(1443),SetCollisionByExclusion:o(1444),SetCollisionByProperty:o(1445),SetCollisionFromCollisionGroup:o(1446),SetLayerCollisionIndex:o(160),SetTileCollision:o(72),SetTileIndexCallback:o(1447),SetTileLocationCallback:o(1448),Shuffle:o(1449),StaggeredCullBounds:o(549),StaggeredCullTiles:o(548),StaggeredTileToWorldXY:o(552),StaggeredTileToWorldY:o(555),StaggeredWorldToTileXY:o(558),StaggeredWorldToTileY:o(561),SwapByIndex:o(1450),TileToWorldX:o(253),TileToWorldXY:o(553),TileToWorldY:o(254),WeightedRandomize:o(1451),WorldToTileX:o(255),WorldToTileXY:o(559),WorldToTileY:o(256)}},function(t,r,o){var a=o(158);t.exports=function CalculateFacesAt(t,r,o){var h=a(t,r,!0,o),d=a(t,r-1,!0,o),T=a(t,r+1,!0,o),S=a(t-1,r,!0,o),A=a(t+1,r,!0,o),P=h&&h.collides;return P&&(h.faceTop=!0,h.faceBottom=!0,h.faceLeft=!0,h.faceRight=!0),d&&d.collides&&(P&&(h.faceTop=!1),d.faceBottom=!P),T&&T.collides&&(P&&(h.faceBottom=!1),T.faceTop=!P),S&&S.collides&&(P&&(h.faceLeft=!1),S.faceRight=!P),A&&A.collides&&(P&&(h.faceRight=!1),A.faceLeft=!P),h&&!h.collides&&h.resetFaces(),h}},function(t,r){t.exports=function TileToWorldX(t,r,o){var a=o.baseTileWidth,h=o.tilemapLayer,d=0;return h&&(r||(r=h.scene.cameras.main),d=h.x+r.scrollX*(1-h.scrollFactorX),a*=h.scaleX),d+t*a}},function(t,r){t.exports=function TileToWorldY(t,r,o){var a=o.baseTileHeight,h=o.tilemapLayer,d=0;return h&&(r||(r=h.scene.cameras.main),d=h.y+r.scrollY*(1-h.scrollFactorY),a*=h.scaleY),d+t*a}},function(t,r){t.exports=function WorldToTileX(t,r,o,a){void 0===r&&(r=!0);var h=a.baseTileWidth,d=a.tilemapLayer;return d&&(o||(o=d.scene.cameras.main),t-=d.x+o.scrollX*(1-d.scrollFactorX),h*=d.scaleX),r?Math.floor(t/h):t/h}},function(t,r){t.exports=function WorldToTileY(t,r,o,a){void 0===r&&(r=!0);var h=a.baseTileHeight,d=a.tilemapLayer;return d&&(o||(o=d.scene.cameras.main),t-=d.y+o.scrollY*(1-d.scrollFactorY),h*=d.scaleY),r?Math.floor(t/h):t/h}},function(t,r,o){var a=o(85),h=o(119),d=o(252),T=o(72);t.exports=function PutTileAt(t,r,o,S,A){if(void 0===S&&(S=!0),!h(r,o,A))return null;var P=A.data[o][r],O=P&&P.collides;if(t instanceof a)null===A.data[o][r]&&(A.data[o][r]=new a(A,t.index,r,o,A.tileWidth,A.tileHeight)),A.data[o][r].copy(t);else{var D=t;null===A.data[o][r]?A.data[o][r]=new a(A,D,r,o,A.tileWidth,A.tileHeight):A.data[o][r].index=D}var L=A.data[o][r],I=-1!==A.collideIndexes.indexOf(L.index);return T(L,I),S&&O!==L.collides&&d(r,o,A),L}},function(t,r,o){var a=o(29);t.exports=function FromOrientationString(t){return"isometric"===(t=t.toLowerCase())?a.ISOMETRIC:"staggered"===t?a.STAGGERED:"hexagonal"===t?a.HEXAGONAL:a.ORTHOGONAL}},function(t,r,o){var a=o(40),h=o(120),d=o(121),T=o(85);t.exports=function Parse2DArray(t,r,o,S,A){for(var P=new h({tileWidth:o,tileHeight:S}),O=new d({name:t,tileWidth:o,tileHeight:S,format:a.ARRAY_2D,layers:[P]}),D=[],L=r.length,I=0,B=0;B<r.length;B++){D[B]=[];for(var N=r[B],G=0;G<N.length;G++){var Y=parseInt(N[G],10);isNaN(Y)||-1===Y?D[B][G]=A?null:new T(P,-1,G,B,o,S):D[B][G]=new T(P,Y,G,B,o,S)}0===I&&(I=N.length)}return O.width=P.width=I,O.height=P.height=L,O.widthInPixels=P.widthInPixels=I*o,O.heightInPixels=P.heightInPixels=L*S,P.data=D,O}},function(t,r,o){var a=o(571),h=o(261),d=function copyPoints(t){return{x:t.x,y:t.y}},T=["id","name","type","rotation","properties","visible","x","y","width","height"];t.exports=function ParseObject(t,r,o){void 0===r&&(r=0),void 0===o&&(o=0);var S=a(t,T);if(S.x+=r,S.y+=o,t.gid){var A=h(t.gid);S.gid=A.gid,S.flippedHorizontal=A.flippedHorizontal,S.flippedVertical=A.flippedVertical,S.flippedAntiDiagonal=A.flippedAntiDiagonal}else t.polyline?S.polyline=t.polyline.map(d):t.polygon?S.polygon=t.polygon.map(d):t.ellipse?S.ellipse=t.ellipse:t.text?S.text=t.text:t.point?S.point=!0:S.rectangle=!0;return S}},function(t,r){var o=2147483648,a=1073741824,h=536870912;t.exports=function ParseGID(t){var r=Boolean(t&o),d=Boolean(t&a),T=Boolean(t&h);t&=536870911;var S=0,A=!1;return r&&d&&T?(S=Math.PI/2,A=!0):r&&d&&!T?(S=Math.PI,A=!1):r&&!d&&T?(S=Math.PI/2,A=!1):!r||d||T?!r&&d&&T?(S=3*Math.PI/2,A=!1):r||!d||T?r||d||!T?r||d||T||(S=0,A=!1):(S=3*Math.PI/2,A=!0):(S=Math.PI,A=!0):(S=0,A=!0),{gid:t,flippedHorizontal:r,flippedVertical:d,flippedAntiDiagonal:T,rotation:S,flipped:A}}},function(t,r,o){var a=o(40),h=o(121),d=o(564),T=o(580);t.exports=function ParseToTilemap(t,r,o,S,A,P,O,D){void 0===o&&(o=32),void 0===S&&(S=32),void 0===A&&(A=10),void 0===P&&(P=10),void 0===D&&(D=!1);var L=null;if(Array.isArray(O))L=d(void 0!==r?r:"map",a.ARRAY_2D,O,o,S,D);else if(void 0!==r){var I=t.cache.tilemap.get(r);I?L=d(r,I.format,I.data,o,S,D):console.warn("No map data found for key "+r)}return null===L&&(L=new h({tileWidth:o,tileHeight:S,width:A,height:P})),new T(t,L)}},function(t,r,o){var a=o(6);t.exports=function GetTargets(t){var r=a(t,"targets",null);return null===r||("function"==typeof r&&(r=r.call()),Array.isArray(r)||(r=[r])),r}},function(t,r){function hasGetActive(t){return!!t.getActive&&"function"==typeof t.getActive}function hasGetStart(t){return!!t.getStart&&"function"==typeof t.getStart}function hasGetEnd(t){return!!t.getEnd&&"function"==typeof t.getEnd}t.exports=function GetValueOp(t,r){var o,a=function getEnd(t,r,o){return o},h=function getStart(t,r,o){return o},d=null,T=_typeof(r);if("number"===T)a=function getEnd(){return r};else if("string"===T){var S=r[0],A=parseFloat(r.substr(2));switch(S){case"+":a=function getEnd(t,r,o){return o+A};break;case"-":a=function getEnd(t,r,o){return o-A};break;case"*":a=function getEnd(t,r,o){return o*A};break;case"/":a=function getEnd(t,r,o){return o/A};break;default:a=function getEnd(){return parseFloat(r)}}}else if("function"===T)a=r;else if("object"===T)if(function hasGetters(t){return hasGetStart(t)||hasGetEnd(t)||hasGetActive(t)}(r))hasGetActive(r)&&(d=r.getActive),hasGetEnd(r)&&(a=r.getEnd),hasGetStart(r)&&(h=r.getStart);else if(r.hasOwnProperty("value"))o=GetValueOp(t,r.value);else{var P=r.hasOwnProperty("to"),O=r.hasOwnProperty("from"),D=r.hasOwnProperty("start");if(P&&(O||D)){if(o=GetValueOp(t,r.to),D){var L=GetValueOp(t,r.start);o.getActive=L.getEnd}if(O){var I=GetValueOp(t,r.from);o.getStart=I.getEnd}}}return o||(o={getActive:d,getEnd:a,getStart:h}),o}},function(t,r){t.exports={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1}},function(t,r,o){var a=o(0),h=o(9),d=o(267),T=o(16),S=o(5),A=o(100),P=o(14),O=new a({Extends:h,initialize:function Tween(t,r,o){h.call(this),this.parent=t,this.parentIsTimeline=t.hasOwnProperty("isTimeline"),this.data=r,this.totalData=r.length,this.targets=o,this.totalTargets=o.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=A.PENDING_ADD,this._pausedState=A.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function getValue(t){return void 0===t&&(t=0),this.data[t].current},setTimeScale:function setTimeScale(t){return this.timeScale=t,this},getTimeScale:function getTimeScale(){return this.timeScale},isPlaying:function isPlaying(){return this.state===A.ACTIVE},isPaused:function isPaused(){return this.state===A.PAUSED},hasTarget:function hasTarget(t){return-1!==this.targets.indexOf(t)},updateTo:function updateTo(t,r,o){void 0===o&&(o=!1);for(var a=0;a<this.totalData;a++){var h=this.data[a];h.key===t&&(h.end=r,o&&(h.start=h.current))}return this},restart:function restart(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===A.ACTIVE?this.seek(0):this.state===A.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===A.PENDING_ADD?this:this.play()},calcDuration:function calcDuration(){for(var t=0,r=P.MAX_SAFE_INTEGER,o=this.data,a=0;a<this.totalData;a++){var h=o[a];h.t1=h.duration+h.hold,h.yoyo&&(h.t1+=h.duration),h.t2=h.t1+h.repeatDelay,h.totalDuration=h.delay+h.t1,-1===h.repeat?h.totalDuration+=999999999999*h.t2:h.repeat>0&&(h.totalDuration+=h.t2*h.repeat),h.totalDuration>t&&(t=h.totalDuration),h.delay<r&&(r=h.delay)}this.duration=Math.max(t,.001),this.loopCounter=-1===this.loop?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=r},init:function init(){if(this.paused&&!this.parentIsTimeline)return this.state=A.PENDING_ADD,this._pausedState=A.INIT,!1;for(var t=this.data,r=this.totalTargets,o=0;o<this.totalData;o++){var a=t[o],h=a.target,d=a.gen,T=a.key,S=a.index;a.delay=d.delay(h,T,0,S,r,this),a.duration=Math.max(d.duration(h,T,0,S,r,this),.001),a.hold=d.hold(h,T,0,S,r,this),a.repeat=d.repeat(h,T,0,S,r,this),a.repeatDelay=d.repeatDelay(h,T,0,S,r,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=A.INIT,!0},makeActive:function makeActive(){this.parent.makeActive(this),this.dispatchTweenEvent(d.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function nextState(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=A.LOOP_DELAY):(this.state=A.ACTIVE,this.dispatchTweenEvent(d.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=A.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=A.PENDING_REMOVE,this.dispatchTweenEvent(d.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function pause(){return this.state===A.PAUSED||(this.paused=!0,this._pausedState=this.state,this.state=A.PAUSED),this},play:function play(t){void 0===t&&(t=!1);var r=this.state;return r!==A.INIT||this.parentIsTimeline?r===A.ACTIVE||r===A.PENDING_ADD&&this._pausedState===A.PENDING_ADD?this:this.parentIsTimeline||r!==A.PENDING_REMOVE&&r!==A.REMOVED?(this.parentIsTimeline?(this.resetTweenData(t),0===this.calculatedOffset?this.state=A.ACTIVE:(this.countdown=this.calculatedOffset,this.state=A.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(t),this.state=A.ACTIVE,this.makeActive()),this):(this.seek(0),this.parent.makeActive(this),this):(this.resetTweenData(!1),this.state=A.ACTIVE,this)},resetTweenData:function resetTweenData(t){for(var r=this.data,o=this.totalData,a=this.totalTargets,h=0;h<o;h++){var d=r[h],T=d.target,S=d.key,P=d.index;d.progress=0,d.elapsed=0,d.repeatCounter=-1===d.repeat?999999999999:d.repeat,t?(d.start=d.getStartValue(T,S,d.start,P,a,this),d.end=d.getEndValue(T,S,d.end,P,a,this),d.current=d.start,d.state=A.PLAYING_FORWARD):d.state=A.PENDING_RENDER,d.delay>0&&(d.elapsed=d.delay,d.state=A.DELAY),d.getActiveValue&&(T[S]=d.getActiveValue(d.target,d.key,d.start))}},resume:function resume(){return this.state===A.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function seek(t,r){void 0===r&&(r=16.6),this.state===A.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var o=this.data,a=this.totalTargets,h=0;h<this.totalData;h++){var d=o[h],T=d.target,S=d.gen,P=d.key,O=d.index;d.progress=0,d.elapsed=0,d.repeatCounter=-1===d.repeat?999999999999:d.repeat,d.delay=S.delay(T,P,0,O,a,this),d.duration=Math.max(S.duration(T,P,0,O,a,this),.001),d.hold=S.hold(T,P,0,O,a,this),d.repeat=S.repeat(T,P,0,O,a,this),d.repeatDelay=S.repeatDelay(T,P,0,O,a,this),d.current=d.start,d.state=A.PLAYING_FORWARD,this.updateTweenData(this,d,0,O,a),d.delay>0&&(d.elapsed=d.delay,d.state=A.DELAY)}this.calcDuration();var D=!1;this.state===A.PAUSED&&(D=!0,this.state=A.ACTIVE),this.isSeeking=!0;do{this.update(0,r)}while(this.totalProgress<t);return this.isSeeking=!1,D&&(this.state=A.PAUSED),this},setCallback:function setCallback(t,r,o,a){return this.callbacks[t]={func:r,scope:a,params:o},this},complete:function complete(t){return void 0===t&&(t=0),t?(this.state=A.COMPLETE_DELAY,this.countdown=t):(this.state=A.PENDING_REMOVE,this.dispatchTweenEvent(d.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function remove(){return this.parent.remove(this),this},stop:function stop(t){return this.state===A.ACTIVE&&void 0!==t&&this.seek(t),this.state!==A.REMOVED&&(this.state!==A.PAUSED&&this.state!==A.PENDING_ADD||(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(d.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=A.PENDING_REMOVE),this},update:function update(t,r){if(this.state===A.PAUSED)return!1;switch(this.useFrames&&(r=1*this.parent.timeScale),r*=this.timeScale,this.elapsed+=r,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=r,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case A.ACTIVE:this.hasStarted||this.isSeeking||(this.startDelay-=r,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(d.TWEEN_START,this.callbacks.onStart)));for(var o=!1,a=0;a<this.totalData;a++){var h=this.data[a];this.updateTweenData(this,h,r)&&(o=!0)}o||this.nextState();break;case A.LOOP_DELAY:this.countdown-=r,this.countdown<=0&&(this.state=A.ACTIVE,this.dispatchTweenEvent(d.TWEEN_LOOP,this.callbacks.onLoop));break;case A.OFFSET_DELAY:this.countdown-=r,this.countdown<=0&&(this.state=A.ACTIVE);break;case A.COMPLETE_DELAY:this.countdown-=r,this.countdown<=0&&(this.state=A.PENDING_REMOVE,this.dispatchTweenEvent(d.TWEEN_COMPLETE,this.callbacks.onComplete))}return this.state===A.PENDING_REMOVE},dispatchTweenDataEvent:function dispatchTweenDataEvent(t,r,o){this.isSeeking||(this.emit(t,this,o.key,o.target,o.current,o.previous),r&&(r.params[1]=o.target,r.func.apply(r.scope,r.params)))},dispatchTweenEvent:function dispatchTweenEvent(t,r){this.isSeeking||(this.emit(t,this,this.targets),r&&(r.params[1]=this.targets,r.func.apply(r.scope,r.params)))},setStateFromEnd:function setStateFromEnd(t,r,o){return r.yoyo?(r.elapsed=o,r.progress=o/r.duration,r.flipX&&r.target.toggleFlipX(),r.flipY&&r.target.toggleFlipY(),this.dispatchTweenDataEvent(d.TWEEN_YOYO,t.callbacks.onYoyo,r),r.start=r.getStartValue(r.target,r.key,r.start,r.index,t.totalTargets,t),A.PLAYING_BACKWARD):r.repeatCounter>0?(r.repeatCounter--,r.elapsed=o,r.progress=o/r.duration,r.flipX&&r.target.toggleFlipX(),r.flipY&&r.target.toggleFlipY(),r.start=r.getStartValue(r.target,r.key,r.start,r.index,t.totalTargets,t),r.end=r.getEndValue(r.target,r.key,r.start,r.index,t.totalTargets,t),r.repeatDelay>0?(r.elapsed=r.repeatDelay-o,r.current=r.start,r.target[r.key]=r.current,A.REPEAT_DELAY):(this.dispatchTweenDataEvent(d.TWEEN_REPEAT,t.callbacks.onRepeat,r),A.PLAYING_FORWARD)):A.COMPLETE},setStateFromStart:function setStateFromStart(t,r,o){return r.repeatCounter>0?(r.repeatCounter--,r.elapsed=o,r.progress=o/r.duration,r.flipX&&r.target.toggleFlipX(),r.flipY&&r.target.toggleFlipY(),r.end=r.getEndValue(r.target,r.key,r.start,r.index,t.totalTargets,t),r.repeatDelay>0?(r.elapsed=r.repeatDelay-o,r.current=r.start,r.target[r.key]=r.current,A.REPEAT_DELAY):(this.dispatchTweenDataEvent(d.TWEEN_REPEAT,t.callbacks.onRepeat,r),A.PLAYING_FORWARD)):A.COMPLETE},updateTweenData:function updateTweenData(t,r,o){var a=r.target;switch(r.state){case A.PLAYING_FORWARD:case A.PLAYING_BACKWARD:if(!a){r.state=A.COMPLETE;break}var h=r.elapsed,T=r.duration,S=0;(h+=o)>T&&(S=h-T,h=T);var P=r.state===A.PLAYING_FORWARD,O=h/T;if(r.elapsed=h,r.progress=O,r.previous=r.current,1===O)P?(r.current=r.end,a[r.key]=r.end,r.hold>0?(r.elapsed=r.hold-S,r.state=A.HOLD_DELAY):r.state=this.setStateFromEnd(t,r,S)):(r.current=r.start,a[r.key]=r.start,r.state=this.setStateFromStart(t,r,S));else{var D=P?r.ease(O):r.ease(1-O);r.current=r.start+(r.end-r.start)*D,a[r.key]=r.current}this.dispatchTweenDataEvent(d.TWEEN_UPDATE,t.callbacks.onUpdate,r);break;case A.DELAY:r.elapsed-=o,r.elapsed<=0&&(r.elapsed=Math.abs(r.elapsed),r.state=A.PENDING_RENDER);break;case A.REPEAT_DELAY:r.elapsed-=o,r.elapsed<=0&&(r.elapsed=Math.abs(r.elapsed),r.state=A.PLAYING_FORWARD,this.dispatchTweenDataEvent(d.TWEEN_REPEAT,t.callbacks.onRepeat,r));break;case A.HOLD_DELAY:r.elapsed-=o,r.elapsed<=0&&(r.state=this.setStateFromEnd(t,r,Math.abs(r.elapsed)));break;case A.PENDING_RENDER:a?(r.start=r.getStartValue(a,r.key,a[r.key],r.index,t.totalTargets,t),r.end=r.getEndValue(a,r.key,r.start,r.index,t.totalTargets,t),r.current=r.start,a[r.key]=r.start,r.state=A.PLAYING_FORWARD):r.state=A.COMPLETE}return r.state!==A.COMPLETE}});O.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],S.register("tween",(function(t){return this.scene.sys.tweens.add(t)})),T.register("tween",(function(t){return this.scene.sys.tweens.create(t)})),t.exports=O},function(t,r,o){t.exports={TIMELINE_COMPLETE:o(1466),TIMELINE_LOOP:o(1467),TIMELINE_PAUSE:o(1468),TIMELINE_RESUME:o(1469),TIMELINE_START:o(1470),TIMELINE_UPDATE:o(1471),TWEEN_ACTIVE:o(1472),TWEEN_COMPLETE:o(1473),TWEEN_LOOP:o(1474),TWEEN_REPEAT:o(1475),TWEEN_START:o(1476),TWEEN_STOP:o(1477),TWEEN_UPDATE:o(1478),TWEEN_YOYO:o(1479)}},function(t,r){t.exports=function TweenData(t,r,o,a,h,d,T,S,A,P,O,D,L,I,B){return{target:t,index:r,key:o,getActiveValue:d,getEndValue:a,getStartValue:h,ease:T,duration:0,totalDuration:0,delay:0,yoyo:P,hold:0,repeat:0,repeatDelay:0,flipX:I,flipY:B,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:S,duration:A,hold:O,repeat:D,repeatDelay:L},state:0}}},function(t,r,o){var a=o(68);t.exports=function Wrap(t){return a(t,-Math.PI,Math.PI)}},function(t,r,o){var a=o(68);t.exports=function WrapDegrees(t){return a(t,-180,180)}},function(t,r,o){var a={};t.exports=a;var h=o(83),d=o(32);a.fromVertices=function(t){for(var r={},o=0;o<t.length;o++){var a=(o+1)%t.length,T=h.normalise({x:t[a].y-t[o].y,y:t[o].x-t[a].x}),S=0===T.y?1/0:T.x/T.y;r[S=S.toFixed(3).toString()]=T}return d.values(r)},a.rotate=function(t,r){if(0!==r)for(var o=Math.cos(r),a=Math.sin(r),h=0;h<t.length;h++){var d,T=t[h];d=T.x*o-T.y*a,T.y=T.x*a+T.y*o,T.x=d}}},function(t,r,o){t.exports={AFTER_ADD:o(1504),AFTER_REMOVE:o(1505),AFTER_UPDATE:o(1506),BEFORE_ADD:o(1507),BEFORE_REMOVE:o(1508),BEFORE_UPDATE:o(1509),COLLISION_ACTIVE:o(1510),COLLISION_END:o(1511),COLLISION_START:o(1512),DRAG_END:o(1513),DRAG:o(1514),DRAG_START:o(1515),PAUSE:o(1516),RESUME:o(1517),SLEEP_END:o(1518),SLEEP_START:o(1519)}},function(t,r,o){var a={};t.exports=a;var h=o(274),d=o(250),T=o(84);a.collisions=function(t,r){for(var o=[],S=r.pairs.table,A=r.metrics,P=0;P<t.length;P++){var O=t[P][0],D=t[P][1];if((!O.isStatic&&!O.isSleeping||!D.isStatic&&!D.isSleeping)&&a.canCollide(O.collisionFilter,D.collisionFilter)&&(A.midphaseTests+=1,T.overlaps(O.bounds,D.bounds)))for(var L=O.parts.length>1?1:0;L<O.parts.length;L++)for(var I=O.parts[L],B=D.parts.length>1?1:0;B<D.parts.length;B++){var N=D.parts[B];if(I===O&&N===D||T.overlaps(I.bounds,N.bounds)){var G,Y=S[d.id(I,N)];G=Y&&Y.isActive?Y.collision:null;var X=h.collides(I,N,G);A.narrowphaseTests+=1,X.reused&&(A.narrowReuseCount+=1),X.collided&&(o.push(X),A.narrowDetections+=1)}}}return o},a.canCollide=function(t,r){return t.group===r.group&&0!==t.group?t.group>0:0!=(t.mask&r.category)&&0!=(r.mask&t.category)}},function(t,r,o){var a={};t.exports=a;var h=o(64),d=o(83);a.collides=function(t,r,o){var T,S,A,P,O=!1;if(o){var D=t.parent,L=r.parent,I=D.speed*D.speed+D.angularSpeed*D.angularSpeed+L.speed*L.speed+L.angularSpeed*L.angularSpeed;O=o&&o.collided&&I<.2,P=o}else P={collided:!1,bodyA:t,bodyB:r};if(o&&O){var B=P.axisBody,N=B===t?r:t,G=[B.axes[o.axisNumber]];if(A=a._overlapAxes(B.vertices,N.vertices,G),P.reused=!0,A.overlap<=0)return P.collided=!1,P}else{if((T=a._overlapAxes(t.vertices,r.vertices,t.axes)).overlap<=0)return P.collided=!1,P;if((S=a._overlapAxes(r.vertices,t.vertices,r.axes)).overlap<=0)return P.collided=!1,P;T.overlap<S.overlap?(A=T,P.axisBody=t):(A=S,P.axisBody=r),P.axisNumber=A.axisNumber}P.bodyA=t.id<r.id?t:r,P.bodyB=t.id<r.id?r:t,P.collided=!0,P.depth=A.overlap,P.parentA=P.bodyA.parent,P.parentB=P.bodyB.parent,t=P.bodyA,r=P.bodyB,d.dot(A.axis,d.sub(r.position,t.position))<0?P.normal={x:A.axis.x,y:A.axis.y}:P.normal={x:-A.axis.x,y:-A.axis.y},P.tangent=d.perp(P.normal),P.penetration=P.penetration||{},P.penetration.x=P.normal.x*P.depth,P.penetration.y=P.normal.y*P.depth;var Y=a._findSupports(t,r,P.normal),X=[];if(h.contains(t.vertices,Y[0])&&X.push(Y[0]),h.contains(t.vertices,Y[1])&&X.push(Y[1]),X.length<2){var U=a._findSupports(r,t,d.neg(P.normal));h.contains(r.vertices,U[0])&&X.push(U[0]),X.length<2&&h.contains(r.vertices,U[1])&&X.push(U[1])}return X.length<1&&(X=[Y[0]]),P.supports=X,P},a._overlapAxes=function(t,r,o){for(var h,T,S=d._temp[0],A=d._temp[1],P={overlap:Number.MAX_VALUE},O=0;O<o.length;O++){if(T=o[O],a._projectToAxis(S,t,T),a._projectToAxis(A,r,T),(h=Math.min(S.max-A.min,A.max-S.min))<=0)return P.overlap=h,P;h<P.overlap&&(P.overlap=h,P.axis=T,P.axisNumber=O)}return P},a._projectToAxis=function(t,r,o){for(var a=d.dot(r[0],o),h=a,T=1;T<r.length;T+=1){var S=d.dot(r[T],o);S>h?h=S:S<a&&(a=S)}t.min=a,t.max=h},a._findSupports=function(t,r,o){for(var a,h,T,S,A=Number.MAX_VALUE,P=d._temp[0],O=r.vertices,D=t.position,L=0;L<O.length;L++)h=O[L],P.x=h.x-D.x,P.y=h.y-D.y,(a=-d.dot(o,P))<A&&(A=a,T=h);return h=O[T.index-1>=0?T.index-1:O.length-1],P.x=h.x-D.x,P.y=h.y-D.y,A=-d.dot(o,P),S=h,h=O[(T.index+1)%O.length],P.x=h.x-D.x,P.y=h.y-D.y,(a=-d.dot(o,P))<A&&(S=h),[T,S]}},function(t,r,o){t.exports={AlignTo:o(601),Angle:o(602),Call:o(603),GetFirst:o(604),GetLast:o(605),GridAlign:o(606),IncAlpha:o(678),IncX:o(679),IncXY:o(680),IncY:o(681),PlaceOnCircle:o(682),PlaceOnEllipse:o(683),PlaceOnLine:o(684),PlaceOnRectangle:o(685),PlaceOnTriangle:o(686),PlayAnimation:o(687),PropertyValueInc:o(46),PropertyValueSet:o(27),RandomCircle:o(688),RandomEllipse:o(689),RandomLine:o(690),RandomRectangle:o(691),RandomTriangle:o(692),Rotate:o(693),RotateAround:o(694),RotateAroundDistance:o(695),ScaleX:o(696),ScaleXY:o(697),ScaleY:o(698),SetAlpha:o(699),SetBlendMode:o(700),SetDepth:o(701),SetHitArea:o(702),SetOrigin:o(703),SetRotation:o(704),SetScale:o(705),SetScaleX:o(706),SetScaleY:o(707),SetScrollFactor:o(708),SetScrollFactorX:o(709),SetScrollFactorY:o(710),SetTint:o(711),SetVisible:o(712),SetX:o(713),SetXY:o(714),SetY:o(715),ShiftPosition:o(716),Shuffle:o(717),SmootherStep:o(718),SmoothStep:o(719),Spread:o(720),ToggleVisible:o(721),WrapInRectangle:o(722)}},function(t,r,o){var a=o(123),h=[];h[a.BOTTOM_CENTER]=o(277),h[a.BOTTOM_LEFT]=o(278),h[a.BOTTOM_RIGHT]=o(279),h[a.LEFT_BOTTOM]=o(280),h[a.LEFT_CENTER]=o(281),h[a.LEFT_TOP]=o(282),h[a.RIGHT_BOTTOM]=o(283),h[a.RIGHT_CENTER]=o(284),h[a.RIGHT_TOP]=o(285),h[a.TOP_CENTER]=o(286),h[a.TOP_LEFT]=o(287),h[a.TOP_RIGHT]=o(288),t.exports=function QuickSet(t,r,o,a,d){return h[o](t,r,a,d)}},function(t,r,o){var a=o(42),h=o(87),d=o(88),T=o(52);t.exports=function BottomCenter(t,r,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),d(t,h(r)+o),T(t,a(r)+S),t}},function(t,r,o){var a=o(42),h=o(43),d=o(53),T=o(52);t.exports=function BottomLeft(t,r,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),d(t,h(r)-o),T(t,a(r)+S),t}},function(t,r,o){var a=o(42),h=o(44),d=o(54),T=o(52);t.exports=function BottomRight(t,r,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),d(t,h(r)+o),T(t,a(r)+S),t}},function(t,r,o){var a=o(42),h=o(43),d=o(55),T=o(54);t.exports=function LeftBottom(t,r,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),T(t,h(r)-o),d(t,a(r)+S),t}},function(t,r,o){var a=o(89),h=o(43),d=o(90),T=o(54);t.exports=function LeftCenter(t,r,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),T(t,h(r)-o),d(t,a(r)+S),t}},function(t,r,o){var a=o(43),h=o(45),d=o(54),T=o(52);t.exports=function LeftTop(t,r,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),d(t,a(r)-o),T(t,h(r)-S),t}},function(t,r,o){var a=o(42),h=o(44),d=o(55),T=o(53);t.exports=function RightBottom(t,r,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),T(t,h(r)+o),d(t,a(r)+S),t}},function(t,r,o){var a=o(89),h=o(44),d=o(90),T=o(53);t.exports=function RightCenter(t,r,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),T(t,h(r)+o),d(t,a(r)+S),t}},function(t,r,o){var a=o(44),h=o(45),d=o(53),T=o(52);t.exports=function RightTop(t,r,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),d(t,a(r)+o),T(t,h(r)-S),t}},function(t,r,o){var a=o(87),h=o(45),d=o(55),T=o(88);t.exports=function TopCenter(t,r,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),T(t,a(r)+o),d(t,h(r)-S),t}},function(t,r,o){var a=o(43),h=o(45),d=o(55),T=o(53);t.exports=function TopLeft(t,r,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),T(t,a(r)-o),d(t,h(r)-S),t}},function(t,r,o){var a=o(44),h=o(45),d=o(55),T=o(54);t.exports=function TopRight(t,r,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),T(t,a(r)+o),d(t,h(r)-S),t}},function(t,r,o){var a=o(123),h=[];h[a.BOTTOM_CENTER]=o(290),h[a.BOTTOM_LEFT]=o(291),h[a.BOTTOM_RIGHT]=o(292),h[a.CENTER]=o(293),h[a.LEFT_CENTER]=o(295),h[a.RIGHT_CENTER]=o(296),h[a.TOP_CENTER]=o(297),h[a.TOP_LEFT]=o(298),h[a.TOP_RIGHT]=o(299),h[a.LEFT_BOTTOM]=h[a.BOTTOM_LEFT],h[a.LEFT_TOP]=h[a.TOP_LEFT],h[a.RIGHT_BOTTOM]=h[a.BOTTOM_RIGHT],h[a.RIGHT_TOP]=h[a.TOP_RIGHT],t.exports=function QuickSet(t,r,o,a,d){return h[o](t,r,a,d)}},function(t,r,o){var a=o(42),h=o(87),d=o(55),T=o(88);t.exports=function BottomCenter(t,r,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),T(t,h(r)+o),d(t,a(r)+S),t}},function(t,r,o){var a=o(42),h=o(43),d=o(55),T=o(53);t.exports=function BottomLeft(t,r,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),T(t,h(r)-o),d(t,a(r)+S),t}},function(t,r,o){var a=o(42),h=o(44),d=o(55),T=o(54);t.exports=function BottomRight(t,r,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),T(t,h(r)+o),d(t,a(r)+S),t}},function(t,r,o){var a=o(294),h=o(87),d=o(89);t.exports=function Center(t,r,o,T){return void 0===o&&(o=0),void 0===T&&(T=0),a(t,h(r)+o,d(r)+T),t}},function(t,r,o){var a=o(88),h=o(90);t.exports=function CenterOn(t,r,o){return a(t,r),h(t,o)}},function(t,r,o){var a=o(89),h=o(43),d=o(90),T=o(53);t.exports=function LeftCenter(t,r,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),T(t,h(r)-o),d(t,a(r)+S),t}},function(t,r,o){var a=o(89),h=o(44),d=o(90),T=o(54);t.exports=function RightCenter(t,r,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),T(t,h(r)+o),d(t,a(r)+S),t}},function(t,r,o){var a=o(87),h=o(45),d=o(88),T=o(52);t.exports=function TopCenter(t,r,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),d(t,a(r)+o),T(t,h(r)-S),t}},function(t,r,o){var a=o(43),h=o(45),d=o(53),T=o(52);t.exports=function TopLeft(t,r,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),d(t,a(r)-o),T(t,h(r)-S),t}},function(t,r,o){var a=o(44),h=o(45),d=o(54),T=o(52);t.exports=function TopRight(t,r,o,S){return void 0===o&&(o=0),void 0===S&&(S=0),d(t,a(r)+o),T(t,h(r)-S),t}},function(t,r,o){var a=o(169),h=o(98),d=o(14),T=o(4);t.exports=function GetPoint(t,r,o){void 0===o&&(o=new T);var S=h(r,0,d.PI2);return a(t,S,o)}},function(t,r,o){var a=o(302),h=o(169),d=o(98),T=o(14);t.exports=function GetPoints(t,r,o,S){void 0===S&&(S=[]),!r&&o>0&&(r=a(t)/o);for(var A=0;A<r;A++){var P=d(A/r,0,T.PI2);S.push(h(t,P))}return S}},function(t,r){t.exports=function Circumference(t){return Math.PI*t.radius*2}},function(t,r,o){var a=o(18),h={_alpha:1,clearAlpha:function clearAlpha(){return this.setAlpha(1)},setAlpha:function setAlpha(t){return void 0===t&&(t=1),this.alpha=t,this},alpha:{get:function get(){return this._alpha},set:function set(t){var r=a(t,0,1);this._alpha=r,0===r?this.renderFlags&=-3:this.renderFlags|=2}}};t.exports=h},function(t,r,o){var a=o(35),h={_blendMode:a.NORMAL,blendMode:{get:function get(){return this._blendMode},set:function set(t){"string"==typeof t&&(t=a[t]),(t|=0)>=-1&&(this._blendMode=t)}},setBlendMode:function setBlendMode(t){return this.blendMode=t,this}};t.exports=h},function(t,r){var o={_depth:0,depth:{get:function get(){return this._depth},set:function set(t){this.displayList&&this.displayList.queueDepthSort(),this._depth=t}},setDepth:function setDepth(t){return void 0===t&&(t=0),this.depth=t,this}};t.exports=o},function(t,r,o){var a=o(171),h=o(130);t.exports=function GetPoints(t,r,o,d){void 0===d&&(d=[]),!r&&o>0&&(r=h(t)/o);for(var T=0;T<r;T++){var S=T/r;d.push(a(t,S))}return d}},function(t,r,o){var a=o(4);t.exports=function GetPoint(t,r,o){return void 0===o&&(o=new a),o.x=t.x1+(t.x2-t.x1)*r,o.y=t.y1+(t.y2-t.y1)*r,o}},function(t,r){t.exports=function RotateAround(t,r,o,a){var h=Math.cos(a),d=Math.sin(a),T=t.x-r,S=t.y-o;return t.x=T*h-S*d+r,t.y=T*d+S*h+o,t}},function(t,r,o){var a=o(310),h=o(311),d={mask:null,setMask:function setMask(t){return this.mask=t,this},clearMask:function clearMask(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function createBitmapMask(t){return void 0===t&&(this.texture||this.shader)&&(t=this),new a(this.scene,t)},createGeometryMask:function createGeometryMask(t){return void 0===t&&"Graphics"===this.type&&(t=this),new h(this.scene,t)}};t.exports=d},function(t,r,o){var a=o(0),h=o(22),d=o(91),T=new a({initialize:function BitmapMask(t,r){var o=t.sys.renderer;this.renderer=o,this.bitmapMask=r,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),t.sys.game.events.on(h.CONTEXT_RESTORED,this.createMask,this),o&&o.on(d.RESIZE,this.createMask,this)},createMask:function createMask(){var t=this.renderer;if(t&&t.gl){this.mainTexture&&this.clearMask();var r=t.width,o=t.height,a=0==(r&r-1)&&0==(o&o-1),h=t.gl,d=a?h.REPEAT:h.CLAMP_TO_EDGE,T=h.LINEAR;this.mainTexture=t.createTexture2D(0,T,T,d,d,h.RGBA,null,r,o),this.maskTexture=t.createTexture2D(0,T,T,d,d,h.RGBA,null,r,o),this.mainFramebuffer=t.createFramebuffer(r,o,this.mainTexture,!0),this.maskFramebuffer=t.createFramebuffer(r,o,this.maskTexture,!0)}},clearMask:function clearMask(){var t=this.renderer;t&&t.gl&&this.mainTexture&&(t.deleteTexture(this.mainTexture),t.deleteTexture(this.maskTexture),t.deleteFramebuffer(this.mainFramebuffer),t.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function setBitmap(t){this.bitmapMask=t},preRenderWebGL:function preRenderWebGL(t,r,o){t.pipelines.BITMAPMASK_PIPELINE.beginMask(this,r,o)},postRenderWebGL:function postRenderWebGL(t,r){t.pipelines.BITMAPMASK_PIPELINE.endMask(this,r)},preRenderCanvas:function preRenderCanvas(){},postRenderCanvas:function postRenderCanvas(){},destroy:function destroy(){this.clearMask(),this.renderer&&this.renderer.off(d.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});t.exports=T},function(t,r,o){var a=new(o(0))({initialize:function GeometryMask(t,r){this.geometryMask=r,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function setShape(t){return this.geometryMask=t,this},setInvertAlpha:function setInvertAlpha(t){return void 0===t&&(t=!0),this.invertAlpha=t,this},preRenderWebGL:function preRenderWebGL(t,r,o){var a=t.gl;t.flush(),0===t.maskStack.length&&(a.enable(a.STENCIL_TEST),a.clear(a.STENCIL_BUFFER_BIT),t.maskCount=0),t.currentCameraMask.mask!==this&&(t.currentMask.mask=this),t.maskStack.push({mask:this,camera:o}),this.applyStencil(t,o,!0),t.maskCount++},applyStencil:function applyStencil(t,r,o){var a=t.gl,h=this.geometryMask,d=t.maskCount;a.colorMask(!1,!1,!1,!1),o?(a.stencilFunc(a.EQUAL,d,255),a.stencilOp(a.KEEP,a.KEEP,a.INCR)):(a.stencilFunc(a.EQUAL,d+1,255),a.stencilOp(a.KEEP,a.KEEP,a.DECR)),h.renderWebGL(t,h,r),t.flush(),a.colorMask(!0,!0,!0,!0),a.stencilOp(a.KEEP,a.KEEP,a.KEEP),o?this.invertAlpha?a.stencilFunc(a.NOTEQUAL,d+1,255):a.stencilFunc(a.EQUAL,d+1,255):this.invertAlpha?a.stencilFunc(a.NOTEQUAL,d,255):a.stencilFunc(a.EQUAL,d,255)},postRenderWebGL:function postRenderWebGL(t){var r=t.gl;t.maskStack.pop(),t.maskCount--,t.flush();var o=t.currentMask;if(0===t.maskStack.length)o.mask=null,r.disable(r.STENCIL_TEST);else{var a=t.maskStack[t.maskStack.length-1];a.mask.applyStencil(t,a.camera,!1),t.currentCameraMask.mask!==a.mask?(o.mask=a.mask,o.camera=a.camera):o.mask=null}},preRenderCanvas:function preRenderCanvas(t,r,o){var a=this.geometryMask;t.currentContext.save(),a.renderCanvas(t,a,o,null,null,!0),t.currentContext.clip()},postRenderCanvas:function postRenderCanvas(t){t.currentContext.restore()},destroy:function destroy(){this.geometryMask=null}});t.exports=a},function(t,r){var o={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function setScrollFactor(t,r){return void 0===r&&(r=t),this.scrollFactorX=t,this.scrollFactorY=r,this}};t.exports=o},function(t,r,o){var a=o(14),h=o(25),d=o(177),T=o(269),S=o(270),A=o(3),P={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function get(){return(this._scaleX+this._scaleY)/2},set:function set(t){this._scaleX=t,this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function get(){return this._scaleX},set:function set(t){this._scaleX=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleY:{get:function get(){return this._scaleY},set:function set(t){this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},angle:{get:function get(){return S(this._rotation*a.RAD_TO_DEG)},set:function set(t){this.rotation=S(t)*a.DEG_TO_RAD}},rotation:{get:function get(){return this._rotation},set:function set(t){this._rotation=T(t)}},setPosition:function setPosition(t,r,o,a){return void 0===t&&(t=0),void 0===r&&(r=t),void 0===o&&(o=0),void 0===a&&(a=0),this.x=t,this.y=r,this.z=o,this.w=a,this},copyPosition:function copyPosition(t){return void 0!==t.x&&(this.x=t.x),void 0!==t.y&&(this.y=t.y),void 0!==t.z&&(this.z=t.z),void 0!==t.w&&(this.w=t.w),this},setRandomPosition:function setRandomPosition(t,r,o,a){return void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=this.scene.sys.scale.width),void 0===a&&(a=this.scene.sys.scale.height),this.x=t+Math.random()*o,this.y=r+Math.random()*a,this},setRotation:function setRotation(t){return void 0===t&&(t=0),this.rotation=t,this},setAngle:function setAngle(t){return void 0===t&&(t=0),this.angle=t,this},setScale:function setScale(t,r){return void 0===t&&(t=1),void 0===r&&(r=t),this.scaleX=t,this.scaleY=r,this},setX:function setX(t){return void 0===t&&(t=0),this.x=t,this},setY:function setY(t){return void 0===t&&(t=0),this.y=t,this},setZ:function setZ(t){return void 0===t&&(t=0),this.z=t,this},setW:function setW(t){return void 0===t&&(t=0),this.w=t,this},getLocalTransformMatrix:function getLocalTransformMatrix(t){return void 0===t&&(t=new h),t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function getWorldTransformMatrix(t,r){void 0===t&&(t=new h),void 0===r&&(r=new h);var o=this.parentContainer;if(!o)return this.getLocalTransformMatrix(t);for(t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);o;)r.applyITRS(o.x,o.y,o._rotation,o._scaleX,o._scaleY),r.multiply(t,t),o=o.parentContainer;return t},getLocalPoint:function getLocalPoint(t,r,o,a){o||(o=new A),a||(a=this.scene.sys.cameras.main);var h=a.scrollX,T=a.scrollY,S=t+h*this.scrollFactorX-h,P=r+T*this.scrollFactorY-T;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(S,P,o):d(S,P,this.x,this.y,this.rotation,this.scaleX,this.scaleY,o),this._originComponent&&(o.x+=this._displayOriginX,o.y+=this._displayOriginY),o},getParentRotation:function getParentRotation(){for(var t=0,r=this.parentContainer;r;)t+=r.rotation,r=r.parentContainer;return t}};t.exports=P},function(t,r){var o={_visible:!0,visible:{get:function get(){return this._visible},set:function set(t){t?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function setVisible(t){return this.visible=t,this}};t.exports=o},function(t,r,o){t.exports={CHANGE_DATA:o(638),CHANGE_DATA_KEY:o(639),DESTROY:o(640),REMOVE_DATA:o(641),SET_DATA:o(642)}},function(t,r,o){var a=o(130),h=o(4);t.exports=function MarchingAnts(t,r,o,d){if(void 0===d&&(d=[]),!r&&!o)return d;r?o=Math.round(a(t)/r):r=a(t)/o;for(var T=t.x,S=t.y,A=0,P=0;P<o;P++)switch(d.push(new h(T,S)),A){case 0:(T+=r)>=t.right&&(A=1,S+=T-t.right,T=t.right);break;case 1:(S+=r)>=t.bottom&&(A=2,T-=S-t.bottom,S=t.bottom);break;case 2:(T-=r)<=t.left&&(A=3,S-=t.left-T,T=t.left);break;case 3:(S-=r)<=t.top&&(A=0,S=t.top)}return d}},function(t,r){t.exports=function BresenhamPoints(t,r,o){void 0===r&&(r=1),void 0===o&&(o=[]);var a=Math.round(t.x1),h=Math.round(t.y1),d=Math.round(t.x2),T=Math.round(t.y2),S=Math.abs(d-a),A=Math.abs(T-h),P=a<d?1:-1,O=h<T?1:-1,D=S-A;o.push({x:a,y:h});for(var L=1;a!==d||h!==T;){var I=D<<1;I>-A&&(D-=A,a+=P),I<S&&(D+=S,h+=O),L%r==0&&o.push({x:a,y:h}),L++}return o}},function(t,r){t.exports=function FindClosestInSorted(t,r,o){if(!r.length)return NaN;if(1===r.length)return r[0];var a,h,d=1;if(o){if(t<r[0][o])return r[0];for(;r[d][o]<t;)d++}else for(;r[d]<t;)d++;return d>r.length&&(d=r.length),o?(a=r[d-1][o],(h=r[d][o])-t<=t-a?r[d]:r[d-1]):(a=r[d-1],(h=r[d])-t<=t-a?h:a)}},function(t,r,o){var a=new(o(0))({initialize:function AnimationFrame(t,r,o,a,h){void 0===h&&(h=!1),this.textureKey=t,this.textureFrame=r,this.index=o,this.frame=a,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=h},toJSON:function toJSON(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function destroy(){this.frame=void 0}});t.exports=a},function(t,r){t.exports=function SortByDigits(t){var r=/\D/g;return t.sort((function(t,o){return parseInt(t.replace(r,""),10)-parseInt(o.replace(r,""),10)})),t}},function(t,r,o){var a=o(185),h=o(0),d=o(102),T=o(9),S=o(132),A=o(22),P=o(2),O=o(6),D=o(186),L=o(322),I=new h({Extends:T,initialize:function AnimationManager(t){T.call(this),this.game=t,this.textureManager=null,this.globalTimeScale=1,this.anims=new d,this.mixes=new d,this.paused=!1,this.name="AnimationManager",t.events.once(A.BOOT,this.boot,this)},boot:function boot(){this.textureManager=this.game.textures,this.game.events.once(A.DESTROY,this.destroy,this)},addMix:function addMix(t,r,o){var a=this.anims,h=this.mixes,d="string"==typeof t?t:t.key,T="string"==typeof r?r:r.key;if(a.has(d)&&a.has(T)){var S=h.get(d);S||(S={}),S[T]=o,h.set(d,S)}return this},removeMix:function removeMix(t,r){var o=this.mixes,a="string"==typeof t?t:t.key,h=o.get(a);if(h)if(r){var d="string"==typeof r?r:r.key;h.hasOwnProperty(d)&&delete h[d]}else r||o.delete(a);return this},getMix:function getMix(t,r){var o=this.mixes,a="string"==typeof t?t:t.key,h="string"==typeof r?r:r.key,d=o.get(a);return d&&d.hasOwnProperty(h)?d[h]:0},add:function add(t,r){return this.anims.has(t)?(console.warn("Animation key exists: "+t),this):(r.key=t,this.anims.set(t,r),this.emit(S.ADD_ANIMATION,t,r),this)},exists:function exists(t){return this.anims.has(t)},createFromAseprite:function createFromAseprite(t,r){var o=[],a=this.game.cache.json.get(t);if(!a)return o;var h=this,d=O(a,"meta",null),T=O(a,"frames",null);return d&&T&&O(d,"frameTags",[]).forEach((function(a){var d=[],S=P(a,"name",null),A=P(a,"from",0),O=P(a,"to",0),D=P(a,"direction","forward");if(S&&(!r||r&&r.indexOf(S)>-1)){for(var L=[],I=Number.MAX_SAFE_INTEGER,B=A;B<=O;B++){var N=B.toString(),G=T[N];if(G){var Y=P(G,"duration",Number.MAX_SAFE_INTEGER);Y<I&&(I=Y),L.push({frame:N,duration:Y})}}L.forEach((function(r){d.push({key:t,frame:r.frame,duration:I-r.duration})}));var X=I*d.length;"reverse"===D&&(d=d.reverse());var U={key:S,frames:d,duration:X,yoyo:"pingpong"===D},z=h.create(U);z&&o.push(z)}})),o},create:function create(t){var r=t.key,o=!1;return r&&((o=this.get(r))||(o=new a(this,r,t),this.anims.set(r,o),this.emit(S.ADD_ANIMATION,r,o))),o},fromJSON:function fromJSON(t,r){void 0===r&&(r=!1),r&&this.anims.clear(),"string"==typeof t&&(t=JSON.parse(t));var o=[];if(t.hasOwnProperty("anims")&&Array.isArray(t.anims)){for(var a=0;a<t.anims.length;a++)o.push(this.create(t.anims[a]));t.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=t.globalTimeScale)}else t.hasOwnProperty("key")&&"frame"===t.type&&o.push(this.create(t));return o},generateFrameNames:function generateFrameNames(t,r){var o,a=O(r,"prefix",""),h=O(r,"start",0),d=O(r,"end",0),T=O(r,"suffix",""),S=O(r,"zeroPad",0),A=O(r,"outputArray",[]),P=O(r,"frames",!1),I=this.textureManager.get(t);if(!I)return A;if(r)for(P||(P=L(h,d)),o=0;o<P.length;o++){var B=a+D(P[o],S,"0",1)+T;I.has(B)?A.push({key:t,frame:B}):console.warn("generateFrameNames: Frame missing: "+B+" from texture: "+t)}else for(P=I.getFrameNames(),o=0;o<P.length;o++)A.push({key:t,frame:P[o]});return A},generateFrameNumbers:function generateFrameNumbers(t,r){var o=O(r,"start",0),a=O(r,"end",-1),h=O(r,"first",!1),d=O(r,"outputArray",[]),T=O(r,"frames",!1),S=this.textureManager.get(t);if(!S)return d;h&&S.has(h)&&d.push({key:t,frame:h}),T||(-1===a&&(a=S.frameTotal-2),T=L(o,a));for(var A=0;A<T.length;A++)S.has(T[A])?d.push({key:t,frame:T[A]}):console.warn("generateFrameNumbers: Frame "+A+" missing from texture: "+t);return d},get:function get(t){return this.anims.get(t)},pauseAll:function pauseAll(){return this.paused||(this.paused=!0,this.emit(S.PAUSE_ALL)),this},play:function play(t,r){Array.isArray(r)||(r=[r]);for(var o=0;o<r.length;o++)r[o].anims.play(t);return this},staggerPlay:function staggerPlay(t,r,o,a){void 0===o&&(o=0),void 0===a&&(a=!0),Array.isArray(r)||(r=[r]);var h=r.length;a||h--;for(var d=0;d<r.length;d++){var T=o<0?Math.abs(o)*(h-d):o*d;r[d].anims.playAfterDelay(t,T)}return this},remove:function remove(t){var r=this.get(t);return r&&(this.emit(S.REMOVE_ANIMATION,t,r),this.anims.delete(t),this.removeMix(t)),r},resumeAll:function resumeAll(){return this.paused&&(this.paused=!1,this.emit(S.RESUME_ALL)),this},toJSON:function toJSON(t){var r={anims:[],globalTimeScale:this.globalTimeScale};return void 0!==t&&""!==t?r.anims.push(this.anims.get(t).toJSON()):this.anims.each((function(t,o){r.anims.push(o.toJSON())})),r},destroy:function destroy(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});t.exports=I},function(t,r){t.exports=function NumberArray(t,r,o,a){var h,d=[],T=!1;if((o||a)&&(T=!0,o||(o=""),a||(a="")),r<t)for(h=t;h>=r;h--)T?d.push(o+h.toString()+a):d.push(h);else for(h=t;h<=r;h++)T?d.push(o+h.toString()+a):d.push(h);return d}},function(t,r,o){var a=o(0),h=o(102),d=o(9),T=o(324),S=new a({initialize:function BaseCache(){this.entries=new h,this.events=new d},add:function add(t,r){return this.entries.set(t,r),this.events.emit(T.ADD,this,t,r),this},has:function has(t){return this.entries.has(t)},exists:function exists(t){return this.entries.has(t)},get:function get(t){return this.entries.get(t)},remove:function remove(t){var r=this.get(t);return r&&(this.entries.delete(t),this.events.emit(T.REMOVE,this,t,r.data)),this},getKeys:function getKeys(){return this.entries.keys()},destroy:function destroy(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});t.exports=S},function(t,r,o){t.exports={ADD:o(736),REMOVE:o(737)}},function(t,r,o){var a=o(323),h=o(0),d=o(22),T=new h({initialize:function CacheManager(t){this.game=t,this.binary=new a,this.bitmapFont=new a,this.json=new a,this.physics=new a,this.shader=new a,this.audio=new a,this.video=new a,this.text=new a,this.html=new a,this.obj=new a,this.tilemap=new a,this.xml=new a,this.custom={},this.game.events.once(d.DESTROY,this.destroy,this)},addCustom:function addCustom(t){return this.custom.hasOwnProperty(t)||(this.custom[t]=new a),this.custom[t]},destroy:function destroy(){for(var t=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],r=0;r<t.length;r++)this[t[r]].destroy(),this[t[r]]=null;for(var o in this.custom)this.custom[o].destroy();this.custom=null,this.game=null}});t.exports=T},function(t,r,o){var a=o(133),h=o(190),d=o(18),T=o(0),S=o(11),A=o(333),P=o(37),O=o(135),D=o(10),L=o(3),I=new T({Extends:a,Mixins:[S.Flip,S.Tint,S.Pipeline],initialize:function Camera(t,r,o,h){a.call(this,t,r,o,h),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new A.Fade(this),this.flashEffect=new A.Flash(this),this.shakeEffect=new A.Shake(this),this.panEffect=new A.Pan(this),this.rotateToEffect=new A.RotateTo(this),this.zoomEffect=new A.Zoom(this),this.lerp=new L(1,1),this.followOffset=new L,this.deadzone=null,this._follow=null},setDeadzone:function setDeadzone(t,r){if(void 0===t)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=t,this.deadzone.height=r):this.deadzone=new D(0,0,t,r),this._follow){var o=this.width/2,a=this.height/2,d=this._follow.x-this.followOffset.x,T=this._follow.y-this.followOffset.y;this.midPoint.set(d,T),this.scrollX=d-o,this.scrollY=T-a}h(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function fadeIn(t,r,o,a,h,d){return this.fadeEffect.start(!1,t,r,o,a,!0,h,d)},fadeOut:function fadeOut(t,r,o,a,h,d){return this.fadeEffect.start(!0,t,r,o,a,!0,h,d)},fadeFrom:function fadeFrom(t,r,o,a,h,d,T){return this.fadeEffect.start(!1,t,r,o,a,h,d,T)},fade:function fade(t,r,o,a,h,d,T){return this.fadeEffect.start(!0,t,r,o,a,h,d,T)},flash:function flash(t,r,o,a,h,d,T){return this.flashEffect.start(t,r,o,a,h,d,T)},shake:function shake(t,r,o,a,h){return this.shakeEffect.start(t,r,o,a,h)},pan:function pan(t,r,o,a,h,d,T){return this.panEffect.start(t,r,o,a,h,d,T)},rotateTo:function rotateTo(t,r,o,a,h,d,T){return this.rotateToEffect.start(t,r,o,a,h,d,T)},zoomTo:function zoomTo(t,r,o,a,h,d){return this.zoomEffect.start(t,r,o,a,h,d)},preRender:function preRender(){this.renderList.length=0;var t=this.width,r=this.height,o=.5*t,a=.5*r,d=this.zoom,T=this.matrix,S=t*this.originX,A=r*this.originY,D=this._follow,L=this.deadzone,I=this.scrollX,B=this.scrollY;L&&h(L,this.midPoint.x,this.midPoint.y);var N=!1;if(D&&!this.panEffect.isRunning){var G=D.x-this.followOffset.x,Y=D.y-this.followOffset.y;L?(G<L.x?I=O(I,I-(L.x-G),this.lerp.x):G>L.right&&(I=O(I,I+(G-L.right),this.lerp.x)),Y<L.y?B=O(B,B-(L.y-Y),this.lerp.y):Y>L.bottom&&(B=O(B,B+(Y-L.bottom),this.lerp.y))):(I=O(I,G-S,this.lerp.x),B=O(B,Y-A,this.lerp.y)),N=!0}this.useBounds&&(I=this.clampX(I),B=this.clampY(B)),this.roundPixels&&(S=Math.round(S),A=Math.round(A),I=Math.round(I),B=Math.round(B)),this.scrollX=I,this.scrollY=B;var X=I+o,U=B+a;this.midPoint.set(X,U);var z=t/d,V=r/d,W=X-z/2,H=U-V/2;this.roundPixels&&(W=Math.round(W),H=Math.round(H)),this.worldView.setTo(W,H,z,V),T.applyITRS(this.x+S,this.y+A,this.rotation,d,d),T.translate(-S,-A),this.shakeEffect.preRender(),N&&this.emit(P.FOLLOW_UPDATE,this,D)},setLerp:function setLerp(t,r){return void 0===t&&(t=1),void 0===r&&(r=t),this.lerp.set(t,r),this},setFollowOffset:function setFollowOffset(t,r){return void 0===t&&(t=0),void 0===r&&(r=0),this.followOffset.set(t,r),this},startFollow:function startFollow(t,r,o,a,h,T){void 0===r&&(r=!1),void 0===o&&(o=1),void 0===a&&(a=o),void 0===h&&(h=0),void 0===T&&(T=h),this._follow=t,this.roundPixels=r,o=d(o,0,1),a=d(a,0,1),this.lerp.set(o,a),this.followOffset.set(h,T);var S=this.width/2,A=this.height/2,P=t.x-h,O=t.y-T;return this.midPoint.set(P,O),this.scrollX=P-S,this.scrollY=O-A,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function stopFollow(){return this._follow=null,this},resetFX:function resetFX(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function update(t,r){this.visible&&(this.rotateToEffect.update(t,r),this.panEffect.update(t,r),this.zoomEffect.update(t,r),this.shakeEffect.update(t,r),this.flashEffect.update(t,r),this.fadeEffect.update(t,r))},destroy:function destroy(){this.resetFX(),a.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});t.exports=I},function(t,r,o){var a=o(38);t.exports=function HexStringToColor(t){var r=new a;t=t.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,r,o,a){return r+r+o+o+a+a}));var o=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(o){var h=parseInt(o[1],16),d=parseInt(o[2],16),T=parseInt(o[3],16);r.setTo(h,d,T)}return r}},function(t,r){t.exports=function GetColor32(t,r,o,a){return a<<24|t<<16|r<<8|o}},function(t,r){t.exports=function RGBToHSV(t,r,o,a){void 0===a&&(a={h:0,s:0,v:0}),t/=255,r/=255,o/=255;var h=Math.min(t,r,o),d=Math.max(t,r,o),T=d-h,S=0,A=0===d?0:T/d,P=d;return d!==h&&(d===t?S=(r-o)/T+(r<o?6:0):d===r?S=(o-t)/T+2:d===o&&(S=(t-r)/T+4),S/=6),a.hasOwnProperty("_h")?(a._h=S,a._s=A,a._v=P):(a.h=S,a.s=A,a.v=P),a}},function(t,r){t.exports=function IntegerToRGB(t){return t>16777215?{a:t>>>24,r:t>>16&255,g:t>>8&255,b:255&t}:{a:255,r:t>>16&255,g:t>>8&255,b:255&t}}},function(t,r,o){var a=o(38);t.exports=function ObjectToColor(t){return new a(t.r,t.g,t.b,t.a)}},function(t,r,o){var a=o(38);t.exports=function RGBStringToColor(t){var r=new a,o=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(t.toLowerCase());if(o){var h=parseInt(o[1],10),d=parseInt(o[2],10),T=parseInt(o[3],10),S=void 0!==o[4]?parseFloat(o[4]):1;r.setTo(h,d,T,255*S)}return r}},function(t,r,o){t.exports={Fade:o(761),Flash:o(762),Pan:o(763),Shake:o(796),RotateTo:o(797),Zoom:o(798)}},function(t,r,o){t.exports={In:o(764),Out:o(765),InOut:o(766)}},function(t,r,o){t.exports={In:o(767),Out:o(768),InOut:o(769)}},function(t,r,o){t.exports={In:o(770),Out:o(771),InOut:o(772)}},function(t,r,o){t.exports={In:o(773),Out:o(774),InOut:o(775)}},function(t,r,o){t.exports={In:o(776),Out:o(777),InOut:o(778)}},function(t,r,o){t.exports={In:o(779),Out:o(780),InOut:o(781)}},function(t,r,o){t.exports=o(782)},function(t,r,o){t.exports={In:o(783),Out:o(784),InOut:o(785)}},function(t,r,o){t.exports={In:o(786),Out:o(787),InOut:o(788)}},function(t,r,o){t.exports={In:o(789),Out:o(790),InOut:o(791)}},function(t,r,o){t.exports={In:o(792),Out:o(793),InOut:o(794)}},function(t,r,o){t.exports=o(795)},function(t,r,o){var a=o(0),h=o(33),d=o(347),T=o(2),S=o(6),A=o(7),P=o(193),O=o(1),D=o(197),L=o(187),I=new a({initialize:function Config(t){void 0===t&&(t={}),this.width=S(t,"width",1024),this.height=S(t,"height",768),this.zoom=S(t,"zoom",1),this.parent=S(t,"parent",void 0),this.scaleMode=S(t,"scaleMode",0),this.expandParent=S(t,"expandParent",!0),this.autoRound=S(t,"autoRound",!1),this.autoCenter=S(t,"autoCenter",0),this.resizeInterval=S(t,"resizeInterval",500),this.fullscreenTarget=S(t,"fullscreenTarget",null),this.minWidth=S(t,"minWidth",0),this.maxWidth=S(t,"maxWidth",0),this.minHeight=S(t,"minHeight",0),this.maxHeight=S(t,"maxHeight",0);var r=S(t,"scale",null);r&&(this.width=S(r,"width",this.width),this.height=S(r,"height",this.height),this.zoom=S(r,"zoom",this.zoom),this.parent=S(r,"parent",this.parent),this.scaleMode=S(r,"mode",this.scaleMode),this.expandParent=S(r,"expandParent",this.expandParent),this.autoRound=S(r,"autoRound",this.autoRound),this.autoCenter=S(r,"autoCenter",this.autoCenter),this.resizeInterval=S(r,"resizeInterval",this.resizeInterval),this.fullscreenTarget=S(r,"fullscreenTarget",this.fullscreenTarget),this.minWidth=S(r,"min.width",this.minWidth),this.maxWidth=S(r,"max.width",this.maxWidth),this.minHeight=S(r,"min.height",this.minHeight),this.maxHeight=S(r,"max.height",this.maxHeight)),this.renderType=S(t,"type",h.AUTO),this.canvas=S(t,"canvas",null),this.context=S(t,"context",null),this.canvasStyle=S(t,"canvasStyle",null),this.customEnvironment=S(t,"customEnvironment",!1),this.sceneConfig=S(t,"scene",null),this.seed=S(t,"seed",[(Date.now()*Math.random()).toString()]),P.RND=new P.RandomDataGenerator(this.seed),this.gameTitle=S(t,"title",""),this.gameURL=S(t,"url","https://phaser.io"),this.gameVersion=S(t,"version",""),this.autoFocus=S(t,"autoFocus",!0),this.domCreateContainer=S(t,"dom.createContainer",!1),this.domBehindCanvas=S(t,"dom.behindCanvas",!1),this.domPointerEvents=S(t,"dom.pointerEvents","none"),this.inputKeyboard=S(t,"input.keyboard",!0),this.inputKeyboardEventTarget=S(t,"input.keyboard.target",window),this.inputKeyboardCapture=S(t,"input.keyboard.capture",[]),this.inputMouse=S(t,"input.mouse",!0),this.inputMouseEventTarget=S(t,"input.mouse.target",null),this.inputMousePreventDefaultDown=S(t,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=S(t,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=S(t,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=S(t,"input.mouse.preventDefaultWheel",!0),this.inputTouch=S(t,"input.touch",d.input.touch),this.inputTouchEventTarget=S(t,"input.touch.target",null),this.inputTouchCapture=S(t,"input.touch.capture",!0),this.inputActivePointers=S(t,"input.activePointers",1),this.inputSmoothFactor=S(t,"input.smoothFactor",0),this.inputWindowEvents=S(t,"input.windowEvents",!0),this.inputGamepad=S(t,"input.gamepad",!1),this.inputGamepadEventTarget=S(t,"input.gamepad.target",window),this.disableContextMenu=S(t,"disableContextMenu",!1),this.audio=S(t,"audio",{}),this.hideBanner=!1===S(t,"banner",null),this.hidePhaser=S(t,"banner.hidePhaser",!1),this.bannerTextColor=S(t,"banner.text","#ffffff"),this.bannerBackgroundColor=S(t,"banner.background",["#ff0000","#ffff00","#00ff00","#00ffff","#000000"]),""===this.gameTitle&&this.hidePhaser&&(this.hideBanner=!0),this.fps=S(t,"fps",null);var o=S(t,"render",t);this.pipeline=S(o,"pipeline",null),this.antialias=S(o,"antialias",!0),this.antialiasGL=S(o,"antialiasGL",!0),this.mipmapFilter=S(o,"mipmapFilter","LINEAR"),this.desynchronized=S(o,"desynchronized",!1),this.roundPixels=S(o,"roundPixels",!1),this.pixelArt=S(o,"pixelArt",1!==this.zoom),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=S(o,"transparent",!1),this.clearBeforeRender=S(o,"clearBeforeRender",!0),this.preserveDrawingBuffer=S(o,"preserveDrawingBuffer",!1),this.premultipliedAlpha=S(o,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=S(o,"failIfMajorPerformanceCaveat",!1),this.powerPreference=S(o,"powerPreference","default"),this.batchSize=S(o,"batchSize",4096),this.maxTextures=S(o,"maxTextures",-1),this.maxLights=S(o,"maxLights",10);var a=S(t,"backgroundColor",0);this.backgroundColor=L(a),this.transparent&&(this.backgroundColor=L(0),this.backgroundColor.alpha=0),this.preBoot=S(t,"callbacks.preBoot",O),this.postBoot=S(t,"callbacks.postBoot",O),this.physics=S(t,"physics",{}),this.defaultPhysicsSystem=S(this.physics,"default",!1),this.loaderBaseURL=S(t,"loader.baseURL",""),this.loaderPath=S(t,"loader.path","");var I=d.os.android?6:32;this.loaderMaxParallelDownloads=S(t,"loader.maxParallelDownloads",I),this.loaderCrossOrigin=S(t,"loader.crossOrigin",void 0),this.loaderResponseType=S(t,"loader.responseType",""),this.loaderAsync=S(t,"loader.async",!0),this.loaderUser=S(t,"loader.user",""),this.loaderPassword=S(t,"loader.password",""),this.loaderTimeout=S(t,"loader.timeout",0),this.loaderWithCredentials=S(t,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var B=S(t,"plugins",null),N=D.DefaultScene;B&&(Array.isArray(B)?this.defaultPlugins=B:A(B)&&(this.installGlobalPlugins=T(B,"global",[]),this.installScenePlugins=T(B,"scene",[]),Array.isArray(B.default)?N=B.default:Array.isArray(B.defaultMerge)&&(N=N.concat(B.defaultMerge)))),this.defaultPlugins=N;var G="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=S(t,"images.default",G+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=S(t,"images.missing",G+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=S(t,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=h.WEBGL:window.FORCE_CANVAS&&(this.renderType=h.CANVAS))}});t.exports=I},function(t,r,o){t.exports={os:o(105),browser:o(136),features:o(191),input:o(808),audio:o(809),video:o(810),fullscreen:o(811),canvasFeatures:o(348)}},function(t,r,o){var a=o(31),h={supportInverseAlpha:!1,supportNewBlendModes:!1};t.exports=function init(){return"function"!=typeof importScripts&&void 0!==document&&(h.supportNewBlendModes=function checkBlendMode(){var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",r="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",o=new Image;return o.onload=function(){var d=new Image;d.onload=function(){var t=a.create(d,6,1).getContext("2d");if(t.globalCompositeOperation="multiply",t.drawImage(o,0,0),t.drawImage(d,2,0),!t.getImageData(2,0,1,1))return!1;var r=t.getImageData(2,0,1,1).data;a.remove(d),h.supportNewBlendModes=255===r[0]&&0===r[1]&&0===r[2]},d.src=t+"/wCKxvRF"+r},o.src=t+"AP804Oa6"+r,!1}(),h.supportInverseAlpha=function checkInverseAlpha(){var t=a.create(this,2,1).getContext("2d");t.fillStyle="rgba(10, 20, 30, 0.5)",t.fillRect(0,0,1,1);var r=t.getImageData(0,0,1,1);if(null===r)return!1;t.putImageData(r,1,0);var o=t.getImageData(1,0,1,1);return o.data[0]===r.data[0]&&o.data[1]===r.data[1]&&o.data[2]===r.data[2]&&o.data[3]===r.data[3]}()),h}()},function(t,r){t.exports=function Between(t,r,o,a){return Math.atan2(a-r,o-t)}},function(t,r){t.exports=function BetweenPoints(t,r){return Math.atan2(r.y-t.y,r.x-t.x)}},function(t,r){t.exports=function Normalize(t){return(t%=2*Math.PI)>=0?t:t+2*Math.PI}},function(t,r){t.exports=function DistanceBetweenPoints(t,r){var o=t.x-r.x,a=t.y-r.y;return Math.sqrt(o*o+a*a)}},function(t,r){t.exports=function DistanceSquared(t,r,o,a){var h=t-o,d=r-a;return h*h+d*d}},function(t,r){t.exports=function GreaterThan(t,r,o){return void 0===o&&(o=1e-4),t>r-o}},function(t,r){t.exports=function LessThan(t,r,o){return void 0===o&&(o=1e-4),t<r+o}},function(t,r,o){var a=o(357);t.exports=function Bernstein(t,r){return a(t)/a(r)/a(t-r)}},function(t,r){t.exports=function Factorial(t){if(0===t)return 1;for(var r=t;--t;)r*=t;return r}},function(t,r){t.exports=function CubicBezierInterpolation(t,r,o,a,h){return function P0(t,r){var o=1-t;return o*o*o*r}(t,r)+function P1(t,r){var o=1-t;return 3*o*o*t*r}(t,o)+function P2(t,r){return 3*(1-t)*t*t*r}(t,a)+function P3(t,r){return t*t*t*r}(t,h)}},function(t,r){t.exports=function QuadraticBezierInterpolation(t,r,o,a){return function P0(t,r){var o=1-t;return o*o*r}(t,r)+function P1(t,r){return 2*(1-t)*t*r}(t,o)+function P2(t,r){return t*t*r}(t,a)}},function(t,r,o){var a=o(184);t.exports=function SmoothStepInterpolation(t,r,o){return r+(o-r)*a(t,0,1)}},function(t,r){t.exports=function GetPowerOfTwo(t){var r=Math.log(t)/.6931471805599453;return 1<<Math.ceil(r)}},function(t,r){t.exports=function Rotate(t,r){var o=t.x,a=t.y;return t.x=o*Math.cos(r)-a*Math.sin(r),t.y=o*Math.sin(r)+a*Math.cos(r),t}},function(t,r){t.exports=function RoundAwayFromZero(t){return t>0?Math.ceil(t):Math.floor(t)}},function(t,r,o){var a=new(o(0))({initialize:function Matrix3(t){this.val=new Float32Array(9),t?this.copy(t):this.identity()},clone:function clone(){return new a(this)},set:function set(t){return this.copy(t)},copy:function copy(t){var r=this.val,o=t.val;return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],this},fromMat4:function fromMat4(t){var r=t.val,o=this.val;return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[4],o[4]=r[5],o[5]=r[6],o[6]=r[8],o[7]=r[9],o[8]=r[10],this},fromArray:function fromArray(t){var r=this.val;return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],this},identity:function identity(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},transpose:function transpose(){var t=this.val,r=t[1],o=t[2],a=t[5];return t[1]=t[3],t[2]=t[6],t[3]=r,t[5]=t[7],t[6]=o,t[7]=a,this},invert:function invert(){var t=this.val,r=t[0],o=t[1],a=t[2],h=t[3],d=t[4],T=t[5],S=t[6],A=t[7],P=t[8],O=P*d-T*A,D=-P*h+T*S,L=A*h-d*S,I=r*O+o*D+a*L;return I?(I=1/I,t[0]=O*I,t[1]=(-P*o+a*A)*I,t[2]=(T*o-a*d)*I,t[3]=D*I,t[4]=(P*r-a*S)*I,t[5]=(-T*r+a*h)*I,t[6]=L*I,t[7]=(-A*r+o*S)*I,t[8]=(d*r-o*h)*I,this):null},adjoint:function adjoint(){var t=this.val,r=t[0],o=t[1],a=t[2],h=t[3],d=t[4],T=t[5],S=t[6],A=t[7],P=t[8];return t[0]=d*P-T*A,t[1]=a*A-o*P,t[2]=o*T-a*d,t[3]=T*S-h*P,t[4]=r*P-a*S,t[5]=a*h-r*T,t[6]=h*A-d*S,t[7]=o*S-r*A,t[8]=r*d-o*h,this},determinant:function determinant(){var t=this.val,r=t[0],o=t[1],a=t[2],h=t[3],d=t[4],T=t[5],S=t[6],A=t[7],P=t[8];return r*(P*d-T*A)+o*(-P*h+T*S)+a*(A*h-d*S)},multiply:function multiply(t){var r=this.val,o=r[0],a=r[1],h=r[2],d=r[3],T=r[4],S=r[5],A=r[6],P=r[7],O=r[8],D=t.val,L=D[0],I=D[1],B=D[2],N=D[3],G=D[4],Y=D[5],X=D[6],U=D[7],z=D[8];return r[0]=L*o+I*d+B*A,r[1]=L*a+I*T+B*P,r[2]=L*h+I*S+B*O,r[3]=N*o+G*d+Y*A,r[4]=N*a+G*T+Y*P,r[5]=N*h+G*S+Y*O,r[6]=X*o+U*d+z*A,r[7]=X*a+U*T+z*P,r[8]=X*h+U*S+z*O,this},translate:function translate(t){var r=this.val,o=t.x,a=t.y;return r[6]=o*r[0]+a*r[3]+r[6],r[7]=o*r[1]+a*r[4]+r[7],r[8]=o*r[2]+a*r[5]+r[8],this},rotate:function rotate(t){var r=this.val,o=r[0],a=r[1],h=r[2],d=r[3],T=r[4],S=r[5],A=Math.sin(t),P=Math.cos(t);return r[0]=P*o+A*d,r[1]=P*a+A*T,r[2]=P*h+A*S,r[3]=P*d-A*o,r[4]=P*T-A*a,r[5]=P*S-A*h,this},scale:function scale(t){var r=this.val,o=t.x,a=t.y;return r[0]=o*r[0],r[1]=o*r[1],r[2]=o*r[2],r[3]=a*r[3],r[4]=a*r[4],r[5]=a*r[5],this},fromQuat:function fromQuat(t){var r=t.x,o=t.y,a=t.z,h=t.w,d=r+r,T=o+o,S=a+a,A=r*d,P=r*T,O=r*S,D=o*T,L=o*S,I=a*S,B=h*d,N=h*T,G=h*S,Y=this.val;return Y[0]=1-(D+I),Y[3]=P+G,Y[6]=O-N,Y[1]=P-G,Y[4]=1-(A+I),Y[7]=L+B,Y[2]=O+N,Y[5]=L-B,Y[8]=1-(A+D),this},normalFromMat4:function normalFromMat4(t){var r=t.val,o=this.val,a=r[0],h=r[1],d=r[2],T=r[3],S=r[4],A=r[5],P=r[6],O=r[7],D=r[8],L=r[9],I=r[10],B=r[11],N=r[12],G=r[13],Y=r[14],X=r[15],U=a*A-h*S,z=a*P-d*S,V=a*O-T*S,W=h*P-d*A,H=h*O-T*A,q=d*O-T*P,Z=D*G-L*N,K=D*Y-I*N,J=D*X-B*N,Q=L*Y-I*G,$=L*X-B*G,tt=I*X-B*Y,et=U*tt-z*$+V*Q+W*J-H*K+q*Z;return et?(et=1/et,o[0]=(A*tt-P*$+O*Q)*et,o[1]=(P*J-S*tt-O*K)*et,o[2]=(S*$-A*J+O*Z)*et,o[3]=(d*$-h*tt-T*Q)*et,o[4]=(a*tt-d*J+T*K)*et,o[5]=(h*J-a*$-T*Z)*et,o[6]=(G*q-Y*H+X*W)*et,o[7]=(Y*V-N*q-X*z)*et,o[8]=(N*H-G*V+X*U)*et,this):null}});t.exports=a},function(t,r,o){var a=o(0),h=o(364),d=o(1),T=o(39),S=1e-6,A=new Int8Array([1,2,0]),P=new Float32Array([0,0,0]),O=new T(1,0,0),D=new T(0,1,0),L=new T,I=new h,B=new a({initialize:function Quaternion(t,r,o,a){this.onChangeCallback=d,this.set(t,r,o,a)},x:{get:function get(){return this._x},set:function set(t){this._x=t,this.onChangeCallback(this)}},y:{get:function get(){return this._y},set:function set(t){this._y=t,this.onChangeCallback(this)}},z:{get:function get(){return this._z},set:function set(t){this._z=t,this.onChangeCallback(this)}},w:{get:function get(){return this._w},set:function set(t){this._w=t,this.onChangeCallback(this)}},copy:function copy(t){return this.set(t)},set:function set(t,r,o,a,h){return void 0===h&&(h=!0),"object"===_typeof(t)?(this._x=t.x||0,this._y=t.y||0,this._z=t.z||0,this._w=t.w||0):(this._x=t||0,this._y=r||0,this._z=o||0,this._w=a||0),h&&this.onChangeCallback(this),this},add:function add(t){return this._x+=t.x,this._y+=t.y,this._z+=t.z,this._w+=t.w,this.onChangeCallback(this),this},subtract:function subtract(t){return this._x-=t.x,this._y-=t.y,this._z-=t.z,this._w-=t.w,this.onChangeCallback(this),this},scale:function scale(t){return this._x*=t,this._y*=t,this._z*=t,this._w*=t,this.onChangeCallback(this),this},length:function length(){var t=this.x,r=this.y,o=this.z,a=this.w;return Math.sqrt(t*t+r*r+o*o+a*a)},lengthSq:function lengthSq(){var t=this.x,r=this.y,o=this.z,a=this.w;return t*t+r*r+o*o+a*a},normalize:function normalize(){var t=this.x,r=this.y,o=this.z,a=this.w,h=t*t+r*r+o*o+a*a;return h>0&&(h=1/Math.sqrt(h),this._x=t*h,this._y=r*h,this._z=o*h,this._w=a*h),this.onChangeCallback(this),this},dot:function dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function lerp(t,r){void 0===r&&(r=0);var o=this.x,a=this.y,h=this.z,d=this.w;return this.set(o+r*(t.x-o),a+r*(t.y-a),h+r*(t.z-h),d+r*(t.w-d))},rotationTo:function rotationTo(t,r){var o=t.x*r.x+t.y*r.y+t.z*r.z;return o<-.999999?(L.copy(O).cross(t).length()<S&&L.copy(D).cross(t),L.normalize(),this.setAxisAngle(L,Math.PI)):o>.999999?this.set(0,0,0,1):(L.copy(t).cross(r),this._x=L.x,this._y=L.y,this._z=L.z,this._w=1+o,this.normalize())},setAxes:function setAxes(t,r,o){var a=I.val;return a[0]=r.x,a[3]=r.y,a[6]=r.z,a[1]=o.x,a[4]=o.y,a[7]=o.z,a[2]=-t.x,a[5]=-t.y,a[8]=-t.z,this.fromMat3(I).normalize()},identity:function identity(){return this.set(0,0,0,1)},setAxisAngle:function setAxisAngle(t,r){r*=.5;var o=Math.sin(r);return this.set(o*t.x,o*t.y,o*t.z,Math.cos(r))},multiply:function multiply(t){var r=this.x,o=this.y,a=this.z,h=this.w,d=t.x,T=t.y,S=t.z,A=t.w;return this.set(r*A+h*d+o*S-a*T,o*A+h*T+a*d-r*S,a*A+h*S+r*T-o*d,h*A-r*d-o*T-a*S)},slerp:function slerp(t,r){var o=this.x,a=this.y,h=this.z,d=this.w,T=t.x,A=t.y,P=t.z,O=t.w,D=o*T+a*A+h*P+d*O;D<0&&(D=-D,T=-T,A=-A,P=-P,O=-O);var L=1-r,I=r;if(1-D>S){var B=Math.acos(D),N=Math.sin(B);L=Math.sin((1-r)*B)/N,I=Math.sin(r*B)/N}return this.set(L*o+I*T,L*a+I*A,L*h+I*P,L*d+I*O)},invert:function invert(){var t=this.x,r=this.y,o=this.z,a=this.w,h=t*t+r*r+o*o+a*a,d=h?1/h:0;return this.set(-t*d,-r*d,-o*d,a*d)},conjugate:function conjugate(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function rotateX(t){t*=.5;var r=this.x,o=this.y,a=this.z,h=this.w,d=Math.sin(t),T=Math.cos(t);return this.set(r*T+h*d,o*T+a*d,a*T-o*d,h*T-r*d)},rotateY:function rotateY(t){t*=.5;var r=this.x,o=this.y,a=this.z,h=this.w,d=Math.sin(t),T=Math.cos(t);return this.set(r*T-a*d,o*T+h*d,a*T+r*d,h*T-o*d)},rotateZ:function rotateZ(t){t*=.5;var r=this.x,o=this.y,a=this.z,h=this.w,d=Math.sin(t),T=Math.cos(t);return this.set(r*T+o*d,o*T-r*d,a*T+h*d,h*T-a*d)},calculateW:function calculateW(){var t=this.x,r=this.y,o=this.z;return this.w=-Math.sqrt(1-t*t-r*r-o*o),this},setFromEuler:function setFromEuler(t,r){var o=t.x/2,a=t.y/2,h=t.z/2,d=Math.cos(o),T=Math.cos(a),S=Math.cos(h),A=Math.sin(o),P=Math.sin(a),O=Math.sin(h);switch(t.order){case"XYZ":this.set(A*T*S+d*P*O,d*P*S-A*T*O,d*T*O+A*P*S,d*T*S-A*P*O,r);break;case"YXZ":this.set(A*T*S+d*P*O,d*P*S-A*T*O,d*T*O-A*P*S,d*T*S+A*P*O,r);break;case"ZXY":this.set(A*T*S-d*P*O,d*P*S+A*T*O,d*T*O+A*P*S,d*T*S-A*P*O,r);break;case"ZYX":this.set(A*T*S-d*P*O,d*P*S+A*T*O,d*T*O-A*P*S,d*T*S+A*P*O,r);break;case"YZX":this.set(A*T*S+d*P*O,d*P*S+A*T*O,d*T*O-A*P*S,d*T*S-A*P*O,r);break;case"XZY":this.set(A*T*S-d*P*O,d*P*S-A*T*O,d*T*O+A*P*S,d*T*S+A*P*O,r)}return this},setFromRotationMatrix:function setFromRotationMatrix(t){var r,o=t.val,a=o[0],h=o[4],d=o[8],T=o[1],S=o[5],A=o[9],P=o[2],O=o[6],D=o[10],L=a+S+D;return L>0?(r=.5/Math.sqrt(L+1),this.set((O-A)*r,(d-P)*r,(T-h)*r,.25/r)):a>S&&a>D?(r=2*Math.sqrt(1+a-S-D),this.set(.25*r,(h+T)/r,(d+P)/r,(O-A)/r)):S>D?(r=2*Math.sqrt(1+S-a-D),this.set((h+T)/r,.25*r,(A+O)/r,(d-P)/r)):(r=2*Math.sqrt(1+D-a-S),this.set((d+P)/r,(A+O)/r,.25*r,(T-h)/r)),this},fromMat3:function fromMat3(t){var r,o=t.val,a=o[0]+o[4]+o[8];if(a>0)r=Math.sqrt(a+1),this.w=.5*r,r=.5/r,this._x=(o[7]-o[5])*r,this._y=(o[2]-o[6])*r,this._z=(o[3]-o[1])*r;else{var h=0;o[4]>o[0]&&(h=1),o[8]>o[3*h+h]&&(h=2);var d=A[h],T=A[d];r=Math.sqrt(o[3*h+h]-o[3*d+d]-o[3*T+T]+1),P[h]=.5*r,r=.5/r,P[d]=(o[3*d+h]+o[3*h+d])*r,P[T]=(o[3*T+h]+o[3*h+T])*r,this._x=P[0],this._y=P[1],this._z=P[2],this._w=(o[3*T+d]-o[3*d+T])*r}return this.onChangeCallback(this),this}});t.exports=B},function(t,r,o){var a=o(367),h=o(31),d=o(33),T=o(191);t.exports=function CreateRenderer(t){var r=t.config;if((r.customEnvironment||r.canvas)&&r.renderType===d.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!r.customEnvironment&&!r.canvas&&r.renderType!==d.HEADLESS)if(r.renderType===d.CANVAS||r.renderType!==d.CANVAS&&!T.webGL){if(!T.canvas)throw new Error("Cannot create Canvas or WebGL context, aborting.");r.renderType=d.CANVAS}else r.renderType=d.WEBGL;r.antialias||h.disableSmoothing();var S,A,P=t.scale.baseSize,O=P.width,D=P.height;r.canvas?(t.canvas=r.canvas,t.canvas.width=O,t.canvas.height=D):t.canvas=h.create(t,O,D,r.renderType),r.canvasStyle&&(t.canvas.style=r.canvasStyle),r.antialias||a.setCrisp(t.canvas),r.renderType!==d.HEADLESS&&(S=o(368),A=o(371),r.renderType===d.WEBGL?t.renderer=new A(t):(t.renderer=new S(t),t.context=t.renderer.gameContext))}},function(t,r){t.exports={setCrisp:function setCrisp(t){return["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"].forEach((function(r){t.style["image-rendering"]=r})),t.style.msInterpolationMode="nearest-neighbor",t},setBicubic:function setBicubic(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}}},function(t,r,o){var a=o(37),h=o(369),d=o(0),T=o(33),S=o(9),A=o(91),P=o(370),O=o(104),D=o(106),L=o(25),I=new d({Extends:S,initialize:function CanvasRenderer(t){S.call(this);var r=t.config;this.config={clearBeforeRender:r.clearBeforeRender,backgroundColor:r.backgroundColor,antialias:r.antialias,roundPixels:r.roundPixels},this.game=t,this.type=T.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=t.canvas;var o={alpha:t.config.transparent,desynchronized:t.config.desynchronized};this.gameContext=r.context?r.context:this.gameCanvas.getContext("2d",o),this.currentContext=this.gameContext,this.antialias=t.config.antialias,this.blendModes=P(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new L,this._tempMatrix2=new L,this._tempMatrix3=new L,this.isBooted=!1,this.init()},init:function init(){this.game.textures.once(D.READY,this.boot,this)},boot:function boot(){var t=this.game,r=t.scale.baseSize;this.width=r.width,this.height=r.height,this.isBooted=!0,t.scale.on(O.RESIZE,this.onResize,this),this.resize(r.width,r.height)},onResize:function onResize(t,r){r.width===this.width&&r.height===this.height||this.resize(r.width,r.height)},resize:function resize(t,r){this.width=t,this.height=r,this.emit(A.RESIZE,t,r)},resetTransform:function resetTransform(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function setBlendMode(t){return this.currentContext.globalCompositeOperation=t,this},setContext:function setContext(t){return this.currentContext=t||this.gameContext,this},setAlpha:function setAlpha(t){return this.currentContext.globalAlpha=t,this},preRender:function preRender(){var t=this.gameContext,r=this.config,o=this.width,a=this.height;t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),r.clearBeforeRender&&(t.clearRect(0,0,o,a),r.transparent||(t.fillStyle=r.backgroundColor.rgba,t.fillRect(0,0,o,a))),t.save(),this.drawCount=0,this.emit(A.PRE_RENDER)},render:function render(t,r,o){var h=r.length;this.emit(A.RENDER,t,o);var d=o.x,T=o.y,S=o.width,P=o.height,O=o.renderToTexture?o.context:t.sys.context;O.save(),this.game.scene.customViewports&&(O.beginPath(),O.rect(d,T,S,P),O.clip()),this.currentContext=O;var D=o.mask;D&&D.preRenderCanvas(this,null,o._maskCamera),o.transparent||(O.fillStyle=o.backgroundColor.rgba,O.fillRect(d,T,S,P)),O.globalAlpha=o.alpha,O.globalCompositeOperation="source-over",this.drawCount+=h,o.renderToTexture&&o.emit(a.PRE_RENDER,o),o.matrix.copyToContext(O);for(var L=0;L<h;L++){var I=r[L];I.mask&&I.mask.preRenderCanvas(this,I,o),I.renderCanvas(this,I,o),I.mask&&I.mask.postRenderCanvas(this,I,o)}O.setTransform(1,0,0,1,0,0),O.globalCompositeOperation="source-over",O.globalAlpha=1,o.flashEffect.postRenderCanvas(O),o.fadeEffect.postRenderCanvas(O),o.dirty=!1,D&&D.postRenderCanvas(this),O.restore(),o.renderToTexture&&(o.emit(a.POST_RENDER,o),o.renderToGame&&t.sys.context.drawImage(o.canvas,d,T))},postRender:function postRender(){this.gameContext.restore(),this.emit(A.POST_RENDER);var t=this.snapshotState;t.callback&&(h(this.gameCanvas,t),t.callback=null)},snapshotCanvas:function snapshotCanvas(t,r,o,a,d,T,S,A,P){void 0===o&&(o=!1),this.snapshotArea(a,d,T,S,r,A,P);var O=this.snapshotState;return O.getPixel=o,h(this.canvas,O),O.callback=null,this},snapshot:function snapshot(t,r,o){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,t,r,o)},snapshotArea:function snapshotArea(t,r,o,a,h,d,T){var S=this.snapshotState;return S.callback=h,S.type=d,S.encoder=T,S.getPixel=!1,S.x=t,S.y=r,S.width=Math.min(o,this.gameCanvas.width),S.height=Math.min(a,this.gameCanvas.height),this},snapshotPixel:function snapshotPixel(t,r,o){return this.snapshotArea(t,r,1,1,o),this.snapshotState.getPixel=!0,this},batchSprite:function batchSprite(t,r,o,a){var h=o.alpha*t.alpha;if(0!==h){var d=this.currentContext,T=this._tempMatrix1,S=this._tempMatrix2,A=r.canvasData,P=A.x,O=A.y,D=r.cutWidth,L=r.cutHeight,I=r.customPivot,B=r.source.resolution,N=t.displayOriginX,G=t.displayOriginY,Y=-N+r.x,X=-G+r.y;if(t.isCropped){var U=t._crop;U.flipX===t.flipX&&U.flipY===t.flipY||r.updateCropUVs(U,t.flipX,t.flipY),D=U.cw,L=U.ch,P=U.cx,O=U.cy,Y=-N+U.x,X=-G+U.y,t.flipX&&(Y>=0?Y=-(Y+D):Y<0&&(Y=Math.abs(Y)-D)),t.flipY&&(X>=0?X=-(X+L):X<0&&(X=Math.abs(X)-L))}var z=1,V=1;t.flipX&&(I||(Y+=-r.realWidth+2*N),z=-1),t.flipY&&(I||(X+=-r.realHeight+2*G),V=-1),S.applyITRS(t.x,t.y,t.rotation,t.scaleX*z,t.scaleY*V),T.copyFrom(o.matrix),a?(T.multiplyWithOffset(a,-o.scrollX*t.scrollFactorX,-o.scrollY*t.scrollFactorY),S.e=t.x,S.f=t.y):(S.e-=o.scrollX*t.scrollFactorX,S.f-=o.scrollY*t.scrollFactorY),T.multiply(S),d.save(),T.setToContext(d),d.globalCompositeOperation=this.blendModes[t.blendMode],d.globalAlpha=h,d.imageSmoothingEnabled=!(!this.antialias||r.source.scaleMode),t.mask&&t.mask.preRenderCanvas(this,t,o),d.drawImage(r.source.image,P,O,D,L,Y,X,D/B,L/B),t.mask&&t.mask.postRenderCanvas(this,t,o),d.restore()}},destroy:function destroy(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});t.exports=I},function(t,r,o){var a=o(31),h=o(38),d=o(2);t.exports=function CanvasSnapshot(t,r){var o=d(r,"callback"),T=d(r,"type","image/png"),S=d(r,"encoder",.92),A=Math.abs(Math.round(d(r,"x",0))),P=Math.abs(Math.round(d(r,"y",0))),O=d(r,"width",t.width),D=d(r,"height",t.height);if(d(r,"getPixel",!1)){var L=t.getContext("2d").getImageData(A,P,1,1).data;o.call(null,new h(L[0],L[1],L[2],L[3]/255))}else if(0!==A||0!==P||O!==t.width||D!==t.height){var I=a.createWebGL(this,O,D);I.getContext("2d").drawImage(t,A,P,O,D,0,0,O,D);var B=new Image;B.onerror=function(){o.call(null),a.remove(I)},B.onload=function(){o.call(null,B),a.remove(I)},B.src=I.toDataURL(T,S)}else{var N=new Image;N.onerror=function(){o.call(null)},N.onload=function(){o.call(null,N)},N.src=t.toDataURL(T,S)}}},function(t,r,o){var a=o(35),h=o(348);t.exports=function GetBlendModes(){var t=[],r=h.supportNewBlendModes,o="source-over";return t[a.NORMAL]=o,t[a.ADD]="lighter",t[a.MULTIPLY]=r?"multiply":o,t[a.SCREEN]=r?"screen":o,t[a.OVERLAY]=r?"overlay":o,t[a.DARKEN]=r?"darken":o,t[a.LIGHTEN]=r?"lighten":o,t[a.COLOR_DODGE]=r?"color-dodge":o,t[a.COLOR_BURN]=r?"color-burn":o,t[a.HARD_LIGHT]=r?"hard-light":o,t[a.SOFT_LIGHT]=r?"soft-light":o,t[a.DIFFERENCE]=r?"difference":o,t[a.EXCLUSION]=r?"exclusion":o,t[a.HUE]=r?"hue":o,t[a.SATURATION]=r?"saturation":o,t[a.COLOR]=r?"color":o,t[a.LUMINOSITY]=r?"luminosity":o,t[a.ERASE]="destination-out",t[a.SOURCE_IN]="source-in",t[a.SOURCE_OUT]="source-out",t[a.SOURCE_ATOP]="source-atop",t[a.DESTINATION_OVER]="destination-over",t[a.DESTINATION_IN]="destination-in",t[a.DESTINATION_OUT]="destination-out",t[a.DESTINATION_ATOP]="destination-atop",t[a.LIGHTER]="lighter",t[a.COPY]="copy",t[a.XOR]="xor",t}},function(t,r,o){var a=o(93),h=o(37),d=o(0),T=o(33),S=o(9),A=o(91),P=o(22),O=o(138),D=o(69),L=o(1),I=o(372),B=o(141),N=o(104),G=o(106),Y=o(12),X=o(383),U=new d({Extends:S,initialize:function WebGLRenderer(t){S.call(this);var r=t.config,o={alpha:r.transparent,desynchronized:r.desynchronized,depth:!1,antialias:r.antialiasGL,premultipliedAlpha:r.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:r.failIfMajorPerformanceCaveat,powerPreference:r.powerPreference,preserveDrawingBuffer:r.preserveDrawingBuffer};this.config={clearBeforeRender:r.clearBeforeRender,antialias:r.antialias,backgroundColor:r.backgroundColor,contextCreation:o,roundPixels:r.roundPixels,maxTextures:r.maxTextures,maxTextureSize:r.maxTextureSize,batchSize:r.batchSize,maxLights:r.maxLights,mipmapFilter:r.mipmapFilter},this.game=t,this.type=T.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=t.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=L,this.contextRestoredHandler=L,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function init(t){var r,o=this.game,a=this.canvas,h=t.backgroundColor;if(!(r=o.config.context?o.config.context:a.getContext("webgl",t.contextCreation)||a.getContext("experimental-webgl",t.contextCreation))||r.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=r;var d=this;this.contextLostHandler=function(t){d.contextLost=!0,d.game.events.emit(P.CONTEXT_LOST,d),t.preventDefault()},this.contextRestoredHandler=function(){d.contextLost=!1,d.init(d.config),d.game.events.emit(P.CONTEXT_RESTORED,d)},a.addEventListener("webglcontextlost",this.contextLostHandler,!1),a.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),o.context=r;for(var S=0;S<=27;S++)this.blendModes.push({func:[r.ONE,r.ONE_MINUS_SRC_ALPHA],equation:r.FUNC_ADD});this.blendModes[1].func=[r.ONE,r.DST_ALPHA],this.blendModes[2].func=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[r.ONE,r.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[r.ZERO,r.ONE_MINUS_SRC_ALPHA],equation:r.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=r.BYTE,this.glFormats[1]=r.SHORT,this.glFormats[2]=r.UNSIGNED_BYTE,this.glFormats[3]=r.UNSIGNED_SHORT,this.glFormats[4]=r.FLOAT,this.glFuncMap={mat2:{func:r.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:r.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:r.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:r.uniform1f,length:1},"1fv":{func:r.uniform1fv,length:1},"1i":{func:r.uniform1i,length:1},"1iv":{func:r.uniform1iv,length:1},"2f":{func:r.uniform2f,length:2},"2fv":{func:r.uniform2fv,length:1},"2i":{func:r.uniform2i,length:2},"2iv":{func:r.uniform2iv,length:1},"3f":{func:r.uniform3f,length:3},"3fv":{func:r.uniform3fv,length:1},"3i":{func:r.uniform3i,length:3},"3iv":{func:r.uniform3iv,length:1},"4f":{func:r.uniform4f,length:4},"4fv":{func:r.uniform4fv,length:1},"4i":{func:r.uniform4i,length:4},"4iv":{func:r.uniform4iv,length:1}};var A=r.getSupportedExtensions();t.maxTextures&&-1!==t.maxTextures||(t.maxTextures=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS)),t.maxTextureSize||(t.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE));var O="WEBGL_compressed_texture_",L="WEBKIT_"+O;this.compression.ETC1=r.getExtension(O+"etc1")||r.getExtension(L+"etc1"),this.compression.PVRTC=r.getExtension(O+"pvrtc")||r.getExtension(L+"pvrtc"),this.compression.S3TC=r.getExtension(O+"s3tc")||r.getExtension(L+"s3tc"),this.supportedExtensions=A;var B="ANGLE_instanced_arrays";this.instancedArraysExtension=A.indexOf(B)>-1?r.getExtension(B):null;var N="OES_vertex_array_object";this.vaoExtension=A.indexOf(N)>-1?r.getExtension(N):null,r.disable(r.DEPTH_TEST),r.disable(r.CULL_FACE),r.enable(r.BLEND),r.clearColor(h.redGL,h.greenGL,h.blueGL,h.alphaGL),this.mipmapFilter=r[t.mipmapFilter],this.maxTextures=Y.checkShaderMax(r,t.maxTextures),this.textureIndexes=[];var X=this.tempTextures;if(Array.isArray(X))for(var U=0;S<this.maxTextures;U++)r.deleteTexture(X[U]);else X=new Array(this.maxTextures);for(var z=0;z<this.maxTextures;z++){var V=r.createTexture();r.activeTexture(r.TEXTURE0+z),r.bindTexture(r.TEXTURE_2D,V),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),X[z]=V,this.textureIndexes.push(z)}return this.tempTextures=X,this.currentActiveTexture=1,this.startActiveTexture++,r.activeTexture(r.TEXTURE1),this.pipelines=new I(this),this.setBlendMode(T.BlendModes.NORMAL),this.projectionMatrix=(new D).identity(),o.textures.once(G.READY,this.boot,this),this},boot:function boot(){var t=this.game,r=this.pipelines,o=t.scale.baseSize;this.width=o.width,this.height=o.height,this.isBooted=!0,this.renderTarget=new B(this,this.width,this.height,1,0,!0,!0),r.boot(t.config.pipeline),this.blankTexture=t.textures.getFrame("__DEFAULT"),this.whiteTexture=t.textures.getFrame("__WHITE");var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,null),a.enable(a.SCISSOR_TEST),t.scale.on(N.RESIZE,this.onResize,this),this.resize(o.width,o.height)},onResize:function onResize(t,r){r.width===this.width&&r.height===this.height||this.resize(r.width,r.height)},beginCapture:function beginCapture(t,r){void 0===t&&(t=this.width),void 0===r&&(r=this.height),this.renderTarget.bind(!0,t,r),this.setProjectionMatrix(t,r),this.resetTextures()},endCapture:function endCapture(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function resize(t,r){var o=this.gl;return this.width=t,this.height=r,this.setProjectionMatrix(t,r),o.viewport(0,0,t,r),this.drawingBufferHeight=o.drawingBufferHeight,o.scissor(0,o.drawingBufferHeight-r,t,r),this.defaultScissor[2]=t,this.defaultScissor[3]=r,this.emit(A.RESIZE,t,r),this},getAspectRatio:function getAspectRatio(){return this.width/this.height},setProjectionMatrix:function setProjectionMatrix(t,r){return t===this.projectionWidth&&r===this.projectionHeight||(this.projectionWidth=t,this.projectionHeight=r,this.projectionMatrix.ortho(0,t,r,0,-1e3,1e3)),this},resetProjectionMatrix:function resetProjectionMatrix(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function hasExtension(t){return!!this.supportedExtensions&&this.supportedExtensions.indexOf(t)},getExtension:function getExtension(t){return this.hasExtension(t)?(t in this.extensions||(this.extensions[t]=this.gl.getExtension(t)),this.extensions[t]):null},flush:function flush(){this.pipelines.flush()},pushScissor:function pushScissor(t,r,o,a,h){void 0===h&&(h=this.drawingBufferHeight);var d=[t,r,o,a];return this.scissorStack.push(d),this.setScissor(t,r,o,a,h),this.currentScissor=d,d},setScissor:function setScissor(t,r,o,a,h){void 0===h&&(h=this.drawingBufferHeight);var d=this.gl,T=this.currentScissor,setScissor=o>0&&a>0;if(T&&setScissor){var S=T[0],A=T[1],P=T[2],O=T[3];setScissor=S!==t||A!==r||P!==o||O!==a}setScissor&&(this.flush(),d.scissor(t,h-r-a,o,a))},resetScissor:function resetScissor(){var t=this.gl;t.enable(t.SCISSOR_TEST);var r=this.currentScissor;if(r){var o=r[0],a=r[1],h=r[2],d=r[3];h>0&&d>0&&t.scissor(o,this.drawingBufferHeight-a-d,h,d)}},popScissor:function popScissor(){var t=this.scissorStack;t.pop();var r=t[t.length-1];r&&this.setScissor(r[0],r[1],r[2],r[3]),this.currentScissor=r},hasActiveStencilMask:function hasActiveStencilMask(){var t=this.currentMask.mask,r=this.currentCameraMask.mask;return t&&t.isStencil||r&&r.isStencil},resetViewport:function resetViewport(){var t=this.gl;t.viewport(0,0,this.width,this.height),this.drawingBufferHeight=t.drawingBufferHeight},setBlendMode:function setBlendMode(t,r){void 0===r&&(r=!1);var o=this.gl,a=this.blendModes[t];return!!(r||t!==T.BlendModes.SKIP_CHECK&&this.currentBlendMode!==t)&&(this.flush(),o.enable(o.BLEND),o.blendEquation(a.equation),a.func.length>2?o.blendFuncSeparate(a.func[0],a.func[1],a.func[2],a.func[3]):o.blendFunc(a.func[0],a.func[1]),this.currentBlendMode=t,!0)},addBlendMode:function addBlendMode(t,r){return this.blendModes.push({func:t,equation:r})-1},updateBlendMode:function updateBlendMode(t,r,o){return this.blendModes[t]&&(this.blendModes[t].func=r,o&&(this.blendModes[t].equation=o)),this},removeBlendMode:function removeBlendMode(t){return t>17&&this.blendModes[t]&&this.blendModes.splice(t,1),this},setBlankTexture:function setBlankTexture(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function setTextureSource(t){if(this.pipelines.forceZero())return this.setTextureZero(t.glTexture,!0),0;var r=this.gl,o=this.currentActiveTexture;return t.glIndexCounter<this.startActiveTexture&&(t.glIndexCounter=this.startActiveTexture,o<this.maxTextures?(t.glIndex=o,r.activeTexture(r.TEXTURE0+o),r.bindTexture(r.TEXTURE_2D,t.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,t.glIndexCounter=this.startActiveTexture,t.glIndex=1,r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,t.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,t.glIndex},isNewNormalMap:function isNewNormalMap(t,r){return this.textureZero!==t||this.normalTexture!==r},setTextureZero:function setTextureZero(t,r){if(this.textureZero!==t){r&&this.flush();var o=this.gl;o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,t),this.textureZero=t}},clearTextureZero:function clearTextureZero(){this.textureZero=null},setNormalMap:function setNormalMap(t){if(this.normalTexture!==t){var r=this.gl;r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,t),this.normalTexture=t,1===this.currentActiveTexture&&(this.currentActiveTexture=2)}},clearNormalMap:function clearNormalMap(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function unbindTextures(){for(var t=this.gl,r=this.tempTextures,o=0;o<r.length;o++)t.activeTexture(t.TEXTURE0+o),t.bindTexture(t.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function resetTextures(t){if(void 0===t&&(t=!1),!this.isTextureClean){this.flush();var r=this.gl,o=this.tempTextures;if(t){for(var a=0;a<o.length;a++)r.activeTexture(r.TEXTURE0+a),r.bindTexture(r.TEXTURE_2D,o[a]);r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,o[1]),this.isTextureClean=!0}else r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,o[0]),r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,o[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function setTexture2D(t){if(this.pipelines.forceZero())return this.setTextureZero(t,!0),0;var r=this.gl,o=this.currentActiveTexture;return t.glIndexCounter<this.startActiveTexture&&(t.glIndexCounter=this.startActiveTexture,o<this.maxTextures?(t.glIndex=o,r.activeTexture(r.TEXTURE0+o),r.bindTexture(r.TEXTURE_2D,t),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,t.glIndexCounter=this.startActiveTexture,t.glIndex=1,r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,t),this.currentActiveTexture=2)),this.isTextureClean=!1,t.glIndex},pushFramebuffer:function pushFramebuffer(t,r,o,a){return t===this.currentFramebuffer?this:(this.fboStack.push(t),this.setFramebuffer(t,r,o,a))},setFramebuffer:function setFramebuffer(t,r,o,a){if(void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===a&&(a=!0),t===this.currentFramebuffer)return this;var h=this.gl,d=this.width,T=this.height;return t&&t.renderTexture&&a?(d=t.renderTexture.width,T=t.renderTexture.height):this.flush(),h.bindFramebuffer(h.FRAMEBUFFER,t),a&&h.viewport(0,0,d,T),r&&(t?(this.drawingBufferHeight=T,this.pushScissor(0,0,d,T)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=t,o&&this.resetTextures(),this},popFramebuffer:function popFramebuffer(t,r,o){void 0===t&&(t=!1),void 0===r&&(r=!1),void 0===o&&(o=!0);var a=this.fboStack;a.pop();var h=a[a.length-1];return h||(h=null),this.setFramebuffer(h,t,r,o),h},setProgram:function setProgram(t){return t!==this.currentProgram&&(this.flush(),this.gl.useProgram(t),this.currentProgram=t,!0)},resetProgram:function resetProgram(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function createTextureFromSource(t,r,o,a){var h=this.gl,d=h.NEAREST,S=h.NEAREST,A=h.CLAMP_TO_EDGE;r=t?t.width:r,o=t?t.height:o;var P=O(r,o);return P&&(A=h.REPEAT),a===T.ScaleModes.LINEAR&&this.config.antialias&&(d=P?this.mipmapFilter:h.LINEAR,S=h.LINEAR),t||"number"!=typeof r||"number"!=typeof o?this.createTexture2D(0,d,S,A,A,h.RGBA,t):this.createTexture2D(0,d,S,A,A,h.RGBA,null,r,o)},createTexture2D:function createTexture2D(t,r,o,a,h,d,T,S,A,P,D,L){P=null==P||P,void 0===D&&(D=!1),void 0===L&&(L=!1);var I=this.gl,B=I.createTexture();I.activeTexture(I.TEXTURE0);var N=I.getParameter(I.TEXTURE_BINDING_2D);return I.bindTexture(I.TEXTURE_2D,B),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,r),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,o),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,h),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,a),I.pixelStorei(I.UNPACK_PREMULTIPLY_ALPHA_WEBGL,P),I.pixelStorei(I.UNPACK_FLIP_Y_WEBGL,L),null==T?I.texImage2D(I.TEXTURE_2D,t,d,S,A,0,d,I.UNSIGNED_BYTE,null):(D||(S=T.width,A=T.height),I.texImage2D(I.TEXTURE_2D,t,d,d,I.UNSIGNED_BYTE,T)),O(S,A)&&I.generateMipmap(I.TEXTURE_2D),N&&I.bindTexture(I.TEXTURE_2D,N),B.isAlphaPremultiplied=P,B.isRenderTexture=!1,B.width=S,B.height=A,B.glIndex=0,B.glIndexCounter=-1,B},createFramebuffer:function createFramebuffer(t,r,o,a){var h,d=this.gl,T=d.createFramebuffer();if(this.setFramebuffer(T),a){var S=d.createRenderbuffer();d.bindRenderbuffer(d.RENDERBUFFER,S),d.renderbufferStorage(d.RENDERBUFFER,d.DEPTH_STENCIL,t,r),d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,S)}if(o.isRenderTexture=!0,o.isAlphaPremultiplied=!1,d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,o,0),(h=d.checkFramebufferStatus(d.FRAMEBUFFER))!==d.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+{36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"}[h]);return T.renderTexture=o,this.setFramebuffer(null),this.resetTextures(),T},createProgram:function createProgram(t,r){var o=this.gl,a=o.createProgram(),h=o.createShader(o.VERTEX_SHADER),d=o.createShader(o.FRAGMENT_SHADER);if(o.shaderSource(h,t),o.shaderSource(d,r),o.compileShader(h),o.compileShader(d),!o.getShaderParameter(h,o.COMPILE_STATUS))throw new Error("Vertex Shader failed:\n"+o.getShaderInfoLog(h));if(!o.getShaderParameter(d,o.COMPILE_STATUS))throw new Error("Fragment Shader failed:\n"+o.getShaderInfoLog(d));if(o.attachShader(a,h),o.attachShader(a,d),o.linkProgram(a),!o.getProgramParameter(a,o.LINK_STATUS))throw new Error("Link Program failed:\n"+o.getProgramInfoLog(a));return o.useProgram(a),a},createVertexBuffer:function createVertexBuffer(t,r){var o=this.gl,a=o.createBuffer();return o.bindBuffer(o.ARRAY_BUFFER,a),o.bufferData(o.ARRAY_BUFFER,t,r),o.bindBuffer(o.ARRAY_BUFFER,null),a},createIndexBuffer:function createIndexBuffer(t,r){var o=this.gl,a=o.createBuffer();return o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,a),o.bufferData(o.ELEMENT_ARRAY_BUFFER,t,r),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,null),a},deleteTexture:function deleteTexture(t,r){return r&&this.resetTextures(!0),t&&this.gl.deleteTexture(t),this},deleteFramebuffer:function deleteFramebuffer(t){return t&&(this.gl.deleteFramebuffer(t),a(this.fboStack,t),this.currentFramebuffer===t&&(this.currentFramebuffer=null)),this},deleteProgram:function deleteProgram(t){return t&&this.gl.deleteProgram(t),this},deleteBuffer:function deleteBuffer(t){return this.gl.deleteBuffer(t),this},preRenderCamera:function preRenderCamera(t){var r=t.x,o=t.y,a=t.width,d=t.height,T=t.backgroundColor;t.emit(h.PRE_RENDER,t),this.pipelines.preBatchCamera(t),this.pushScissor(r,o,a,d),t.mask&&(this.currentCameraMask.mask=t.mask,this.currentCameraMask.camera=t._maskCamera,t.mask.preRenderWebGL(this,t,t._maskCamera)),T.alphaGL>0&&this.pipelines.setMulti().drawFillRect(r,o,a,d,Y.getTintFromFloats(T.blueGL,T.greenGL,T.redGL,1),T.alphaGL)},getCurrentStencilMask:function getCurrentStencilMask(){var t=null,r=this.maskStack,o=this.currentCameraMask;return r.length>0?t=r[r.length-1]:o.mask&&o.mask.isStencil&&(t=o),t},postRenderCamera:function postRenderCamera(t){var r=t.flashEffect,o=t.fadeEffect;if(r.isRunning||o.isRunning||o.isComplete){var a=this.pipelines.setMulti();r.postRenderWebGL(a,Y.getTintFromFloats),o.postRenderWebGL(a,Y.getTintFromFloats)}t.dirty=!1,this.popScissor(),t.mask&&(this.currentCameraMask.mask=null,t.mask.postRenderWebGL(this,t._maskCamera)),this.pipelines.postBatchCamera(t),t.emit(h.POST_RENDER,t)},preRender:function preRender(){if(!this.contextLost){var t=this.gl;if(t.bindFramebuffer(t.FRAMEBUFFER,null),this.config.clearBeforeRender){var r=this.config.backgroundColor;t.clearColor(r.redGL,r.greenGL,r.blueGL,r.alphaGL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT)}t.enable(t.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&t.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(A.PRE_RENDER)}},render:function render(t,r,o){if(!this.contextLost){var a=r.length;if(this.emit(A.RENDER,t,o),this.preRenderCamera(o),0===a)return this.setBlendMode(T.BlendModes.NORMAL),void this.postRenderCamera(o);this.currentType="";for(var h=this.currentMask,d=0;d<a;d++){this.finalType=d===a-1;var S=r[d],P=S.mask;(h=this.currentMask).mask&&h.mask!==P&&h.mask.postRenderWebGL(this,h.camera),P&&h.mask!==P&&P.preRenderWebGL(this,S,o),S.blendMode!==this.currentBlendMode&&this.setBlendMode(S.blendMode);var O=S.type;O!==this.currentType&&(this.newType=!0,this.currentType=O),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=r[d+1].type===this.currentType,S.renderWebGL(this,S,o),this.newType=!1}(h=this.currentMask).mask&&h.mask.postRenderWebGL(this,h.camera),this.setBlendMode(T.BlendModes.NORMAL),this.postRenderCamera(o)}},postRender:function postRender(){if(!this.contextLost){this.flush(),this.emit(A.POST_RENDER);var t=this.snapshotState;t.callback&&(X(this.canvas,t),t.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function snapshot(t,r,o){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,t,r,o)},snapshotArea:function snapshotArea(t,r,o,a,h,d,T){var S=this.snapshotState;return S.callback=h,S.type=d,S.encoder=T,S.getPixel=!1,S.x=t,S.y=r,S.width=Math.min(o,this.gl.drawingBufferWidth),S.height=Math.min(a,this.gl.drawingBufferHeight),this},snapshotPixel:function snapshotPixel(t,r,o){return this.snapshotArea(t,r,1,1,o),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function snapshotFramebuffer(t,r,o,a,h,d,T,S,A,P,O){void 0===h&&(h=!1),void 0===d&&(d=0),void 0===T&&(T=0),void 0===S&&(S=r),void 0===A&&(A=o);var D=this.currentFramebuffer;this.snapshotArea(d,T,S,A,a,P,O);var L=this.snapshotState;return L.getPixel=h,L.isFramebuffer=!0,L.bufferWidth=r,L.bufferHeight=o,this.setFramebuffer(t),X(this.canvas,L),this.setFramebuffer(D),L.callback=null,L.isFramebuffer=!1,this},canvasToTexture:function canvasToTexture(t,r,o,a){return void 0===o&&(o=!1),void 0===a&&(a=!1),r?this.updateCanvasTexture(t,r,a):this.createCanvasTexture(t,o,a)},createCanvasTexture:function createCanvasTexture(t,r,o){void 0===r&&(r=!1),void 0===o&&(o=!1);var a=this.gl,h=a.NEAREST,d=a.NEAREST,T=t.width,S=t.height,A=a.CLAMP_TO_EDGE,P=O(T,S);return!r&&P&&(A=a.REPEAT),this.config.antialias&&(h=P?this.mipmapFilter:a.LINEAR,d=a.LINEAR),this.createTexture2D(0,h,d,A,A,a.RGBA,t,T,S,!0,!1,o)},updateCanvasTexture:function updateCanvasTexture(t,r,o){void 0===o&&(o=!1);var a=this.gl,h=t.width,d=t.height;if(h>0&&d>0){a.activeTexture(a.TEXTURE0);var T=a.getParameter(a.TEXTURE_BINDING_2D);a.bindTexture(a.TEXTURE_2D,r),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,o),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,t),r.width=h,r.height=d,T&&a.bindTexture(a.TEXTURE_2D,T)}return r},createVideoTexture:function createVideoTexture(t,r,o){void 0===r&&(r=!1),void 0===o&&(o=!1);var a=this.gl,h=a.NEAREST,d=a.NEAREST,T=t.videoWidth,S=t.videoHeight,A=a.CLAMP_TO_EDGE,P=O(T,S);return!r&&P&&(A=a.REPEAT),this.config.antialias&&(h=P?this.mipmapFilter:a.LINEAR,d=a.LINEAR),this.createTexture2D(0,h,d,A,A,a.RGBA,t,T,S,!0,!0,o)},updateVideoTexture:function updateVideoTexture(t,r,o){void 0===o&&(o=!1);var a=this.gl,h=t.videoWidth,d=t.videoHeight;if(h>0&&d>0){a.activeTexture(a.TEXTURE0);var T=a.getParameter(a.TEXTURE_BINDING_2D);a.bindTexture(a.TEXTURE_2D,r),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,o),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,t),r.width=h,r.height=d,T&&a.bindTexture(a.TEXTURE_2D,T)}return r},setTextureFilter:function setTextureFilter(t,r){var o=this.gl,a=[o.LINEAR,o.NEAREST][r];o.activeTexture(o.TEXTURE0);var h=o.getParameter(o.TEXTURE_BINDING_2D);return o.bindTexture(o.TEXTURE_2D,t),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,a),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,a),h&&o.bindTexture(o.TEXTURE_2D,h),this},getMaxTextureSize:function getMaxTextureSize(){return this.config.maxTextureSize},destroy:function destroy(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var t=this.gl,r=this.tempTextures,o=0;o<r.length;o++)t.deleteTexture(r[o]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});t.exports=U},function(t,r,o){var a=o(0),h=o(92),d=o(102),T=o(373),S=o(376),A=o(377),P=o(108),O=o(378),D=o(379),L=o(380),I=o(381),B=new a({initialize:function PipelineManager(t){this.game=t.game,this.renderer=t,this.classes=new d([[h.UTILITY_PIPELINE,I],[h.MULTI_PIPELINE,P],[h.BITMAPMASK_PIPELINE,T],[h.SINGLE_PIPELINE,L],[h.ROPE_PIPELINE,D],[h.LIGHT_PIPELINE,A],[h.POINTLIGHT_PIPELINE,O],[h.GRAPHICS_PIPELINE,S]]),this.postPipelineClasses=new d,this.pipelines=new d,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function boot(t){var r,o,a=this,d=this.game;if(this.classes.each((function(t,o){r=a.add(t,new o({game:d})),t===h.UTILITY_PIPELINE&&(a.UTILITY_PIPELINE=r,a.fullFrame1=r.fullFrame1,a.fullFrame2=r.fullFrame2,a.halfFrame1=r.halfFrame1,a.halfFrame2=r.halfFrame2)})),this.MULTI_PIPELINE=this.get(h.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(h.BITMAPMASK_PIPELINE),t)for(o in t){var T=t[o];(r=new T(d)).isPostFX?this.postPipelineClasses.set(o,T):this.has(o)||(this.classes.set(o,T),this.add(o,r))}},add:function add(t,r){if(!r.isPostFX){var o=this.pipelines,a=this.renderer;return o.has(t)?console.warn("Pipeline exists: "+t):(r.name=t,r.manager=this,o.set(t,r)),r.hasBooted||r.boot(),0!==a.width&&0!==a.height&&r.resize(a.width,a.height),r}console.warn(t+" is a Post Pipeline. Use `addPostPipeline` instead")},addPostPipeline:function addPostPipeline(t,r){this.postPipelineClasses.has(t)||this.postPipelineClasses.set(t,r)},flush:function flush(){this.current&&this.current.flush()},has:function has(t){var r=this.pipelines;return"string"==typeof t?r.has(t):!!r.contains(t)},get:function get(t){var r=this.pipelines;return"string"==typeof t?r.get(t):r.contains(t)?t:void 0},getPostPipeline:function getPostPipeline(t,r){var o,a=this.postPipelineClasses;if("string"==typeof t?o=a.get(t):"function"==typeof t?a.contains(t)&&(o=t):"object"===_typeof(t)&&(o=a.get(t.name)),o){var h=new o(this.game);return r&&(h.gameObject=r),h}},remove:function remove(t,r,o){void 0===r&&(r=!0),void 0===o&&(o=!0),this.pipelines.delete(t),r&&this.classes.delete(t),o&&this.postPipelineClasses.delete(t)},set:function set(t,r,o){if(!t.isPostFX)return this.isCurrent(t,o)||(this.flush(),this.current&&this.current.unbind(),this.current=t,t.bind(o)),t.updateProjectionMatrix(),t.onBind(r),t},preBatch:function preBatch(t){if(t.hasPostPipeline){this.flush();for(var r=t.postPipelines,o=r.length-1;o>=0;o--){var a=r[o];a.active&&a.preBatch(t)}}},postBatch:function postBatch(t){if(t.hasPostPipeline){this.flush();for(var r=t.postPipelines,o=0;o<r.length;o++){var a=r[o];a.active&&a.postBatch(t)}}},preBatchCamera:function preBatchCamera(t){if(t.hasPostPipeline){this.flush();for(var r=t.postPipelines,o=r.length-1;o>=0;o--){var a=r[o];a.active&&a.preBatch(t)}}},postBatchCamera:function postBatchCamera(t){if(t.hasPostPipeline){this.flush();for(var r=t.postPipelines,o=0;o<r.length;o++){var a=r[o];a.active&&a.postBatch(t)}}},isCurrent:function isCurrent(t,r){var o=this.renderer,a=this.current;return a&&!r&&(r=a.currentShader),!(a!==t||r.program!==o.currentProgram)},copyFrame:function copyFrame(t,r,o,a,h){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(t,r,o,a,h),this},copyToGame:function copyToGame(t){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(t),this},drawFrame:function drawFrame(t,r,o,a){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(t,r,o,a),this},blendFrames:function blendFrames(t,r,o,a,h){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(t,r,o,a,h),this},blendFramesAdditive:function blendFramesAdditive(t,r,o,a,h){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(t,r,o,a,h),this},clearFrame:function clearFrame(t,r){return this.UTILITY_PIPELINE.clearFrame(t,r),this},blitFrame:function blitFrame(t,r,o,a,h,d){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(t,r,o,a,h,d),this},copyFrameRect:function copyFrameRect(t,r,o,a,h,d,T,S){return this.UTILITY_PIPELINE.copyFrameRect(t,r,o,a,h,d,T,S),this},forceZero:function forceZero(){return this.current&&this.current.forceZero},setMulti:function setMulti(){return this.set(this.MULTI_PIPELINE)},setUtility:function setUtility(t){return this.UTILITY_PIPELINE.bind(t)},rebind:function rebind(t){void 0===t&&this.previous&&(t=this.previous);var r=this.renderer,o=r.gl;o.disable(o.DEPTH_TEST),o.disable(o.CULL_FACE),r.hasActiveStencilMask()?o.clear(o.DEPTH_BUFFER_BIT):(o.disable(o.STENCIL_TEST),o.clear(o.DEPTH_BUFFER_BIT|o.STENCIL_BUFFER_BIT)),o.viewport(0,0,r.width,r.height),r.currentProgram=null,r.setBlendMode(0,!0);var a=this.pipelines.entries;for(var h in a)a[h].glReset=!0;t&&(this.current=t,t.rebind()),r.resetTextures()},clear:function clear(){var t=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,t.currentProgram=null,t.setBlendMode(0,!0)},destroy:function destroy(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});t.exports=B},function(t,r,o){var a=o(0),h=o(2),d=o(866),T=o(867),S=o(107),A=o(58),P=new a({Extends:A,initialize:function BitmapMaskPipeline(t){t.fragShader=h(t,"fragShader",d),t.vertShader=h(t,"vertShader",T),t.batchSize=h(t,"batchSize",1),t.vertices=h(t,"vertices",[-1,1,-1,-7,7,1]),t.attributes=h(t,"attributes",[{name:"inPosition",size:2,type:S.FLOAT}]),A.call(this,t)},boot:function boot(){A.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function resize(t,r){A.prototype.resize.call(this,t,r),this.set2f("uResolution",t,r)},beginMask:function beginMask(t,r,o){var a=this.gl;if(t.bitmapMask&&a){var h=this.renderer;h.flush(),h.pushFramebuffer(t.mainFramebuffer),a.disable(a.STENCIL_TEST),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT),h.currentCameraMask.mask!==t&&(h.currentMask.mask=t,h.currentMask.camera=o)}},endMask:function endMask(t,r){var o=this.gl,a=this.renderer,h=t.bitmapMask;if(h&&o){a.flush(),a.pushFramebuffer(t.maskFramebuffer),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),a.setBlendMode(0,!0),h.renderWebGL(a,h,r),a.flush(),a.popFramebuffer(),a.popFramebuffer();var d=a.getCurrentStencilMask();d?(o.enable(o.STENCIL_TEST),d.mask.applyStencil(a,d.camera,!0)):a.currentMask.mask=null,a.pipelines.set(this),o.activeTexture(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,t.maskTexture),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,t.mainTexture),this.set1i("uInvertMaskAlpha",t.invertAlpha),o.drawArrays(this.topology,0,3),a.resetTextures()}}});t.exports=P},function(t,r,o){t.exports={AFTER_FLUSH:o(868),BEFORE_FLUSH:o(869),BIND:o(870),BOOT:o(871),DESTROY:o(872),REBIND:o(873),RESIZE:o(874)}},function(t,r,o){var a=o(0),h=o(2),d=o(107),T=new a({initialize:function WebGLShader(t,r,o,a,h){this.pipeline=t,this.name=r,this.renderer=t.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(o,a),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(h),this.createUniforms()},createAttributes:function createAttributes(t){var r=0,o=0,a=[];this.vertexComponentCount=0;for(var T=0;T<t.length;T++){var S=t[T],A=S.name,P=h(S,"size",1),O=h(S,"type",d.FLOAT),D=O.enum,L=O.size,I=!!S.normalized;a.push({name:A,size:P,type:D,normalized:I,offset:o,enabled:!1,location:-1}),4===L?r+=P:r++,o+=P*L}this.vertexSize=o,this.vertexComponentCount=r,this.attributes=a},bind:function bind(t,r){return void 0===t&&(t=!1),void 0===r&&(r=!1),r&&this.pipeline.flush(),this.renderer.setProgram(this.program),t&&this.setAttribPointers(),this},rebind:function rebind(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function setAttribPointers(t){void 0===t&&(t=!1);for(var r=this.gl,o=this.vertexSize,a=this.attributes,h=this.program,d=0;d<a.length;d++){var T=a[d],S=T.size,A=T.type,P=T.offset,O=T.enabled,D=T.location,L=!!T.normalized;if(t){var I=r.getAttribLocation(h,T.name);I>=0?(r.enableVertexAttribArray(I),r.vertexAttribPointer(I,S,A,L,o,P),T.enabled=!0,T.location=I):-1!==I&&r.disableVertexAttribArray(I)}else O?r.vertexAttribPointer(D,S,A,L,o,P):!O&&D>-1&&(r.disableVertexAttribArray(D),T.location=-1)}return this},createUniforms:function createUniforms(){var t,r,o,a=this.gl,h=this.program,d=this.uniforms,T=a.getProgramParameter(h,a.ACTIVE_UNIFORMS);for(t=0;t<T;t++){var S=a.getActiveUniform(h,t);if(S){r=S.name,null!==(o=a.getUniformLocation(h,r))&&(d[r]={name:r,location:o,value1:null,value2:null,value3:null,value4:null});var A=r.indexOf("[");A>0&&(r=r.substr(0,A),d.hasOwnProperty(r)||null!==(o=a.getUniformLocation(h,r))&&(d[r]={name:r,location:o,value1:null,value2:null,value3:null,value4:null}))}}return this},hasUniform:function hasUniform(t){return this.uniforms.hasOwnProperty(t)},resetUniform:function resetUniform(t){var r=this.uniforms[t];return r&&(r.value1=null,r.value2=null,r.value3=null,r.value4=null),this},setUniform1:function setUniform1(t,r,o,a){var h=this.uniforms[r];return h?((a||h.value1!==o)&&(h.value1=o,this.renderer.setProgram(this.program),t.call(this.gl,h.location,o),this.pipeline.currentShader=this),this):this},setUniform2:function setUniform2(t,r,o,a,h){var d=this.uniforms[r];return d?((h||d.value1!==o||d.value2!==a)&&(d.value1=o,d.value2=a,this.renderer.setProgram(this.program),t.call(this.gl,d.location,o,a),this.pipeline.currentShader=this),this):this},setUniform3:function setUniform3(t,r,o,a,h,d){var T=this.uniforms[r];return T?((d||T.value1!==o||T.value2!==a||T.value3!==h)&&(T.value1=o,T.value2=a,T.value3=h,this.renderer.setProgram(this.program),t.call(this.gl,T.location,o,a,h),this.pipeline.currentShader=this),this):this},setUniform4:function setUniform4(t,r,o,a,h,d,T){var S=this.uniforms[r];return S?((T||S.value1!==o||S.value2!==a||S.value3!==h||S.value4!==d)&&(S.value1=o,S.value2=a,S.value3=h,S.value4=d,this.renderer.setProgram(this.program),t.call(this.gl,S.location,o,a,h,d),this.pipeline.currentShader=this),this):this},set1f:function set1f(t,r){return this.setUniform1(this.gl.uniform1f,t,r)},set2f:function set2f(t,r,o){return this.setUniform2(this.gl.uniform2f,t,r,o)},set3f:function set3f(t,r,o,a){return this.setUniform3(this.gl.uniform3f,t,r,o,a)},set4f:function set4f(t,r,o,a,h){return this.setUniform4(this.gl.uniform4f,t,r,o,a,h)},set1fv:function set1fv(t,r){return this.setUniform1(this.gl.uniform1fv,t,r,!0)},set2fv:function set2fv(t,r){return this.setUniform1(this.gl.uniform2fv,t,r,!0)},set3fv:function set3fv(t,r){return this.setUniform1(this.gl.uniform3fv,t,r,!0)},set4fv:function set4fv(t,r){return this.setUniform1(this.gl.uniform4fv,t,r,!0)},set1iv:function set1iv(t,r){return this.setUniform1(this.gl.uniform1iv,t,r,!0)},set2iv:function set2iv(t,r){return this.setUniform1(this.gl.uniform2iv,t,r,!0)},set3iv:function set3iv(t,r){return this.setUniform1(this.gl.uniform3iv,t,r,!0)},set4iv:function set4iv(t,r){return this.setUniform1(this.gl.uniform4iv,t,r,!0)},set1i:function set1i(t,r){return this.setUniform1(this.gl.uniform1i,t,r)},set2i:function set2i(t,r,o){return this.setUniform2(this.gl.uniform2i,t,r,o)},set3i:function set3i(t,r,o,a){return this.setUniform3(this.gl.uniform3i,t,r,o,a)},set4i:function set4i(t,r,o,a,h){return this.setUniform4(this.gl.uniform4i,t,r,o,a,h)},setMatrix2fv:function setMatrix2fv(t,r,o){return this.setUniform2(this.gl.uniformMatrix2fv,t,r,o,!0)},setMatrix3fv:function setMatrix3fv(t,r,o){return this.setUniform2(this.gl.uniformMatrix3fv,t,r,o,!0)},setMatrix4fv:function setMatrix4fv(t,r,o){return this.setUniform2(this.gl.uniformMatrix4fv,t,r,o,!0)},destroy:function destroy(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});t.exports=T},function(t,r,o){var a=o(0),h=o(59),d=o(2),T=o(875),S=o(876),A=o(25),P=o(107),O=o(58),D=new a({Extends:O,initialize:function GraphicsPipeline(t){t.fragShader=d(t,"fragShader",T),t.vertShader=d(t,"vertShader",S),t.attributes=d(t,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:P.UNSIGNED_BYTE,normalized:!0}]),O.call(this,t),this.calcMatrix=new A,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function batchFillRect(t,r,o,a,h,d){this.renderer.pipelines.set(this);var T=this.calcMatrix;d&&d.multiply(h,T);var S=t+o,A=r+a,P=T.getX(t,r),O=T.getY(t,r),D=T.getX(t,A),L=T.getY(t,A),I=T.getX(S,A),B=T.getY(S,A),N=T.getX(S,r),G=T.getY(S,r),Y=this.fillTint;this.batchQuad(P,O,D,L,I,B,N,G,Y.TL,Y.TR,Y.BL,Y.BR)},batchFillTriangle:function batchFillTriangle(t,r,o,a,h,d,T,S){this.renderer.pipelines.set(this);var A=this.calcMatrix;S&&S.multiply(T,A);var P=A.getX(t,r),O=A.getY(t,r),D=A.getX(o,a),L=A.getY(o,a),I=A.getX(h,d),B=A.getY(h,d),N=this.fillTint;this.batchTri(P,O,D,L,I,B,N.TL,N.TR,N.BL)},batchStrokeTriangle:function batchStrokeTriangle(t,r,o,a,h,d,T,S,A){var P=this.tempTriangle;P[0].x=t,P[0].y=r,P[0].width=T,P[1].x=o,P[1].y=a,P[1].width=T,P[2].x=h,P[2].y=d,P[2].width=T,P[3].x=t,P[3].y=r,P[3].width=T,this.batchStrokePath(P,T,!1,S,A)},batchFillPath:function batchFillPath(t,r,o){this.renderer.pipelines.set(this);var a=this.calcMatrix;o&&o.multiply(r,a);for(var d,T,S=t.length,A=this.polygonCache,P=this.fillTint.TL,O=this.fillTint.TR,D=this.fillTint.BL,L=0;L<S;++L)T=t[L],A.push(T.x,T.y);S=(d=h(A)).length;for(var I=0;I<S;I+=3){var B=2*d[I+0],N=2*d[I+1],G=2*d[I+2],Y=A[B+0],X=A[B+1],U=A[N+0],z=A[N+1],V=A[G+0],W=A[G+1],H=a.getX(Y,X),q=a.getY(Y,X),Z=a.getX(U,z),K=a.getY(U,z),J=a.getX(V,W),Q=a.getY(V,W);this.batchTri(H,q,Z,K,J,Q,P,O,D)}A.length=0},batchStrokePath:function batchStrokePath(t,r,o,a,h){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var d=t.length-1,T=0;T<d;T++){var S=t[T],A=t[T+1];this.batchLine(S.x,S.y,A.x,A.y,S.width/2,A.width/2,r,T,!o&&T===d-1,a,h)}},batchLine:function batchLine(t,r,o,a,h,d,T,S,A,P,O){this.renderer.pipelines.set(this);var D=this.calcMatrix;O&&O.multiply(P,D);var L=o-t,I=a-r,B=Math.sqrt(L*L+I*I),N=h*(a-r)/B,G=h*(t-o)/B,Y=d*(a-r)/B,X=d*(t-o)/B,U=o-Y,z=a-X,V=t-N,W=r-G,H=o+Y,q=a+X,Z=t+N,K=r+G,J=D.getX(U,z),Q=D.getY(U,z),$=D.getX(V,W),tt=D.getY(V,W),et=D.getX(H,q),it=D.getY(H,q),nt=D.getX(Z,K),rt=D.getY(Z,K),st=this.strokeTint,ot=st.TL,at=st.TR,ht=st.BL,lt=st.BR;if(this.batchQuad(nt,rt,$,tt,J,Q,et,it,ot,at,ht,lt),!(T<=2)){var ut=this.prevQuad,ct=this.firstQuad;S>0&&ut[4]?this.batchQuad(nt,rt,$,tt,ut[0],ut[1],ut[2],ut[3],ot,at,ht,lt):(ct[0]=nt,ct[1]=rt,ct[2]=$,ct[3]=tt,ct[4]=1),A&&ct[4]?this.batchQuad(J,Q,et,it,ct[0],ct[1],ct[2],ct[3],ot,at,ht,lt):(ut[0]=J,ut[1]=Q,ut[2]=et,ut[3]=it,ut[4]=1)}},batchVert:function batchVert(t,r,o){var a=this.vertexViewF32,h=this.vertexViewU32,d=this.vertexCount*this.currentShader.vertexComponentCount-1;a[++d]=t,a[++d]=r,h[++d]=o,this.vertexCount++},batchQuad:function batchQuad(t,r,o,a,h,d,T,S,A,P,O,D){var L=!1;return this.shouldFlush(6)&&(this.flush(),L=!0),this.batchVert(t,r,A),this.batchVert(o,a,O),this.batchVert(h,d,D),this.batchVert(t,r,A),this.batchVert(h,d,D),this.batchVert(T,S,P),L},batchTri:function batchTri(t,r,o,a,h,d,T,S,A){var P=!1;return this.shouldFlush(3)&&(this.flush(),P=!0),this.batchVert(t,r,T),this.batchVert(o,a,S),this.batchVert(h,d,A),P},destroy:function destroy(){return O.prototype.destroy.call(this),this.polygonCache=null,this}});t.exports=D},function(t,r,o){var a=o(0),h=o(2),d=o(877),T=o(108),S=o(3),A=o(58),P=10,O=new S,D=new a({Extends:T,initialize:function LightPipeline(t){P=t.game.renderer.config.maxLights;for(var r=h(t,"fragShader",d),o=[],a=1;a<=P;a++)o.push({name:"lights"+a,fragShader:r.replace("%LIGHT_COUNT%",a.toString())});t.shaders=o,T.call(this,t),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function boot(){A.prototype.boot.call(this);var t=this.gl,r=t.createTexture();t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:r};for(var o=0;o<this.shaders.length;o++)this["lightShader"+(o+1)]=this.shaders[o]},onRender:function onRender(t,r){var o=t.sys.lights;if(this.lightsActive=!1,o&&o.active){var a=o.getLights(r),h=a.length;if(0!==h){var d;this.lightsActive=!0,this.setShader(this["lightShader"+h],!0);var T=this.renderer.height,S=r.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",r.x,r.y,r.rotation,r.zoom),this.set3f("uAmbientLightColor",o.ambientColor.r,o.ambientColor.g,o.ambientColor.b),d=0;d<h;d++){var A=a[d].light,P=A.color,D="uLights["+d+"].";S.transformPoint(A.x,A.y,O),this.set2f(D+"position",O.x-r.scrollX*A.scrollFactorX*r.zoom,T-(O.y-r.scrollY*A.scrollFactorY*r.zoom)),this.set3f(D+"color",P.r,P.g,P.b),this.set1f(D+"intensity",A.intensity),this.set1f(D+"radius",A.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function setNormalMapRotation(t){if(t!==this.currentNormalMapRotation||0===this.vertexCount){this.vertexCount>0&&this.flush();var r=this.inverseRotationMatrix;if(t){var o=-t,a=Math.cos(o),h=Math.sin(o);r[1]=h,r[3]=-h,r[0]=r[4]=a}else r[0]=r[4]=1,r[1]=r[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,r),this.currentNormalMapRotation=t}},setTexture2D:function setTexture2D(t,r){var o=this.renderer;void 0===t&&(t=o.tempTextures[0]);var a=this.getNormalMap(r);o.isNewNormalMap(t,a)&&(this.flush(),o.setTextureZero(t),o.setNormalMap(a));var h=r?r.rotation:0;return this.setNormalMapRotation(h),this.currentUnit=0,0},setGameObject:function setGameObject(t,r){void 0===r&&(r=t.frame);var o=this.renderer,a=r.glTexture,h=this.getNormalMap(t);return o.isNewNormalMap()&&(this.flush(),o.setTextureZero(a),o.setNormalMap(h)),this.setNormalMapRotation(t.rotation),this.currentUnit=0,0},getNormalMap:function getNormalMap(t){var r;return t?t.displayTexture?r=t.displayTexture.dataSource[t.displayFrame.sourceIndex]:t.texture?r=t.texture.dataSource[t.frame.sourceIndex]:t.tileset&&(r=Array.isArray(t.tileset)?t.tileset[0].image.dataSource[0]:t.tileset.image.dataSource[0]):r=this.defaultNormalMap,r||(r=this.defaultNormalMap),r.glTexture},batchSprite:function batchSprite(t,r,o){this.lightsActive&&T.prototype.batchSprite.call(this,t,r,o)},batchTexture:function batchTexture(t,r,o,a,h,d,S,A,P,O,D,L,I,B,N,G,Y,X,U,z,V,W,H,q,Z,K,J,Q,$,tt,et,it){this.lightsActive&&T.prototype.batchTexture.call(this,t,r,o,a,h,d,S,A,P,O,D,L,I,B,N,G,Y,X,U,z,V,W,H,q,Z,K,J,Q,$,tt,et,it)},batchTextureFrame:function batchTextureFrame(t,r,o,a,h,d,S){this.lightsActive&&T.prototype.batchTextureFrame.call(this,t,r,o,a,h,d,S)}});D.LIGHT_COUNT=P,t.exports=D},function(t,r,o){var a=o(0),h=o(2),d=o(880),T=o(881),S=o(58),A=new a({Extends:S,initialize:function PointLightPipeline(t){t.vertShader=h(t,"vertShader",T),t.fragShader=h(t,"fragShader",d),t.attributes=h(t,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),S.call(this,t)},onRender:function onRender(t,r){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",r.zoom)},batchPointLight:function batchPointLight(t,r,o,a,h,d,T,S,A,P,O,D){var L=t.color,I=t.intensity,B=t.radius,N=t.attenuation,G=L.r*I,Y=L.g*I,X=L.b*I,U=r.alpha*t.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(o,a,O,D,B,N,G,Y,X,U),this.batchLightVert(h,d,O,D,B,N,G,Y,X,U),this.batchLightVert(T,S,O,D,B,N,G,Y,X,U),this.batchLightVert(o,a,O,D,B,N,G,Y,X,U),this.batchLightVert(T,S,O,D,B,N,G,Y,X,U),this.batchLightVert(A,P,O,D,B,N,G,Y,X,U)},batchLightVert:function batchLightVert(t,r,o,a,h,d,T,S,A,P){var O=this.vertexViewF32,D=this.vertexCount*this.currentShader.vertexComponentCount-1;O[++D]=t,O[++D]=r,O[++D]=o,O[++D]=a,O[++D]=h,O[++D]=d,O[++D]=T,O[++D]=S,O[++D]=A,O[++D]=P,this.vertexCount++}});t.exports=A},function(t,r,o){var a=o(0),h=o(2),d=o(108),T=new a({Extends:d,initialize:function RopePipeline(t){t.topology=5,t.batchSize=h(t,"batchSize",256),d.call(this,t)}});t.exports=T},function(t,r,o){var a=o(0),h=o(2),d=o(108),T=o(882),S=o(883),A=o(58),P=new a({Extends:d,initialize:function SinglePipeline(t){t.fragShader=h(t,"fragShader",T),t.vertShader=h(t,"vertShader",S),t.forceZero=!0,d.call(this,t)},boot:function boot(){A.prototype.boot.call(this),this.set1i("uMainSampler",0)}});t.exports=P},function(t,r,o){var a=o(884),h=o(35),d=o(0),T=o(198),S=o(885),A=o(886),P=o(2),O=o(887),D=o(382),L=o(58),I=new d({Extends:L,initialize:function UtilityPipeline(t){t.renderTarget=P(t,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),t.vertShader=P(t,"vertShader",D),t.shaders=P(t,"shaders",[{name:"Copy",fragShader:A},{name:"AddBlend",fragShader:a},{name:"LinearBlend",fragShader:O},{name:"ColorMatrix",fragShader:S}]),t.attributes=P(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],t.batchSize=1,L.call(this,t),this.colorMatrix=new T,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function boot(){L.prototype.boot.call(this);var t=this.shaders,r=this.renderTargets;this.copyShader=t[0],this.addShader=t[1],this.linearShader=t[2],this.colorMatrixShader=t[3],this.fullFrame1=r[0],this.fullFrame2=r[1],this.halfFrame1=r[2],this.halfFrame2=r[3]},copyFrame:function copyFrame(t,r,o,a,h){void 0===o&&(o=1),void 0===a&&(a=!0),void 0===h&&(h=!0);var d=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",o),d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,t.texture),r?(d.viewport(0,0,r.width,r.height),d.bindFramebuffer(d.FRAMEBUFFER,r.framebuffer),d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,r.texture,0)):d.viewport(0,0,t.width,t.height),a&&(h?d.clearColor(0,0,0,0):d.clearColor(0,0,0,1),d.clear(d.COLOR_BUFFER_BIT)),d.bufferData(d.ARRAY_BUFFER,this.vertexData,d.STATIC_DRAW),d.drawArrays(d.TRIANGLES,0,6),d.bindFramebuffer(d.FRAMEBUFFER,null),d.bindTexture(d.TEXTURE_2D,null)},blitFrame:function blitFrame(t,r,o,a,d,T){void 0===o&&(o=1),void 0===a&&(a=!0),void 0===d&&(d=!0),void 0===T&&(T=!1);var S=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",o),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,t.texture),t.height>r.height)S.viewport(0,0,t.width,t.height),this.setTargetUVs(t,r);else{var A=r.height-t.height;S.viewport(0,A,t.width,t.height)}if(S.bindFramebuffer(S.FRAMEBUFFER,r.framebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,r.texture,0),a&&(d?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT)),T){var P=this.renderer.currentBlendMode;this.renderer.setBlendMode(h.ERASE)}S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),T&&this.renderer.setBlendMode(P),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function copyFrameRect(t,r,o,a,h,d,T,S){void 0===T&&(T=!0),void 0===S&&(S=!0);var A=this.gl;A.bindFramebuffer(A.FRAMEBUFFER,t.framebuffer),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,t.texture,0),T&&(S?A.clearColor(0,0,0,0):A.clearColor(0,0,0,1),A.clear(A.COLOR_BUFFER_BIT)),A.activeTexture(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,r.texture),A.copyTexSubImage2D(A.TEXTURE_2D,0,0,0,o,a,h,d),A.bindFramebuffer(A.FRAMEBUFFER,null),A.bindTexture(A.TEXTURE_2D,null)},copyToGame:function copyToGame(t){var r=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,t.texture),r.bufferData(r.ARRAY_BUFFER,this.vertexData,r.STATIC_DRAW),r.drawArrays(r.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function drawFrame(t,r,o,a){void 0===o&&(o=!0),void 0===a&&(a=this.colorMatrix);var h=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",a.getData()),this.set1f("uAlpha",a.alpha),h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,t.texture),r?(h.viewport(0,0,r.width,r.height),h.bindFramebuffer(h.FRAMEBUFFER,r.framebuffer),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,r.texture,0)):h.viewport(0,0,t.width,t.height),o?h.clearColor(0,0,0,0):h.clearColor(0,0,0,1),h.clear(h.COLOR_BUFFER_BIT),h.bufferData(h.ARRAY_BUFFER,this.vertexData,h.STATIC_DRAW),h.drawArrays(h.TRIANGLES,0,6),h.bindFramebuffer(h.FRAMEBUFFER,null),h.bindTexture(h.TEXTURE_2D,null)},blendFrames:function blendFrames(t,r,o,a,h,d){void 0===a&&(a=1),void 0===h&&(h=!0),void 0===d&&(d=this.linearShader);var T=this.gl;this.setShader(d),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",a),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,t.texture),T.activeTexture(T.TEXTURE1),T.bindTexture(T.TEXTURE_2D,r.texture),o?(T.bindFramebuffer(T.FRAMEBUFFER,o.framebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,o.texture,0),T.viewport(0,0,o.width,o.height)):T.viewport(0,0,t.width,t.height),h?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),T.bindFramebuffer(T.FRAMEBUFFER,null),T.bindTexture(T.TEXTURE_2D,null)},blendFramesAdditive:function blendFramesAdditive(t,r,o,a,h){this.blendFrames(t,r,o,a,h,this.addShader)},clearFrame:function clearFrame(t,r){void 0===r&&(r=!0);var o=this.gl;o.viewport(0,0,t.width,t.height),o.bindFramebuffer(o.FRAMEBUFFER,t.framebuffer),r?o.clearColor(0,0,0,0):o.clearColor(0,0,0,1),o.clear(o.COLOR_BUFFER_BIT);var a=this.renderer.currentFramebuffer;o.bindFramebuffer(o.FRAMEBUFFER,a)},setUVs:function setUVs(t,r,o,a,h,d,T,S){var A=this.vertexViewF32;A[2]=t,A[3]=r,A[6]=o,A[7]=a,A[10]=h,A[11]=d,A[14]=t,A[15]=r,A[18]=h,A[19]=d,A[22]=T,A[23]=S},setTargetUVs:function setTargetUVs(t,r){var o=r.height/t.height;o=o>.5?.5-(o-.5):.5-o+.5,this.setUVs(0,o,0,1+o,1,1+o,1,o)},flipX:function flipX(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function flipY(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function resetUVs(){this.setUVs(0,0,0,1,1,1,1,0)}});t.exports=I},function(t,r){t.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join("\n")},function(t,r,o){var a=o(31),h=o(38),d=o(2);t.exports=function WebGLSnapshot(t,r){var o=t.getContext("experimental-webgl"),T=d(r,"callback"),S=d(r,"type","image/png"),A=d(r,"encoder",.92),P=d(r,"x",0),O=d(r,"y",0),D=d(r,"getPixel",!1),L=d(r,"isFramebuffer",!1),I=L?d(r,"bufferWidth",1):o.drawingBufferWidth,B=L?d(r,"bufferHeight",1):o.drawingBufferHeight;if(D){var N=new Uint8Array(4),G=L?O:B-O;o.readPixels(P,G,1,1,o.RGBA,o.UNSIGNED_BYTE,N),T.call(null,new h(N[0],N[1],N[2],N[3]/255))}else{var Y=d(r,"width",I),X=d(r,"height",B),U=new Uint8Array(Y*X*4);o.readPixels(P,B-O-X,Y,X,o.RGBA,o.UNSIGNED_BYTE,U);for(var z=a.createWebGL(this,Y,X),V=z.getContext("2d"),W=V.getImageData(0,0,Y,X),H=W.data,q=0;q<X;q++)for(var Z=0;Z<Y;Z++){var K=4*((X-q-1)*Y+Z),J=4*(q*Y+Z);H[J+0]=U[K+0],H[J+1]=U[K+1],H[J+2]=U[K+2],H[J+3]=U[K+3]}V.putImageData(W,0,0);var Q=new Image;Q.onerror=function(){T.call(null),a.remove(z)},Q.onload=function(){T.call(null,Q),a.remove(z)},Q.src=z.toDataURL(S,A)}}},function(t,r,o){var a=o(33);t.exports=function DebugHeader(t){var r=t.config;if(!r.hideBanner){var o="WebGL";r.renderType===a.CANVAS?o="Canvas":r.renderType===a.HEADLESS&&(o="Headless");var h,d=r.audio,T=t.device.audio;if(h=T.webAudio&&!d.disableWebAudio?"Web Audio":d.noAudio||!T.webAudio&&!T.audioData?"No Audio":"HTML5 Audio",t.device.browser.ie)window.console&&console.log("Phaser v"+a.VERSION+" / https://phaser.io");else{var S,A="",P=[A];Array.isArray(r.bannerBackgroundColor)?(r.bannerBackgroundColor.forEach((function(t){A=A.concat("%c "),P.push("background: "+t),S=t})),P[P.length-1]="color: "+r.bannerTextColor+"; background: "+S):(A=A.concat("%c "),P.push("color: "+r.bannerTextColor+"; background: "+r.bannerBackgroundColor)),P.push("background: transparent"),r.gameTitle&&(A=A.concat(r.gameTitle),r.gameVersion&&(A=A.concat(" v"+r.gameVersion)),r.hidePhaser||(A=A.concat(" / "))),r.hidePhaser||(A=A.concat("Phaser v"+a.VERSION+" ("+o+" | "+h+")")),A=A.concat(" %c "+r.gameURL),P[0]=A,console.log.apply(console,P)}}}},function(t,r,o){var a=o(0),h=o(6),d=o(1),T=o(386),S=new a({initialize:function TimeStep(t,r){this.game=t,this.raf=new T,this.started=!1,this.running=!1,this.minFps=h(r,"min",5),this.targetFps=h(r,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=d,this.forceSetTimeOut=h(r,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=h(r,"deltaHistory",10),this.panicMax=h(r,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=h(r,"smoothStep",!0)},blur:function blur(){this.inFocus=!1},focus:function focus(){this.inFocus=!0,this.resetDelta()},pause:function pause(){this._pauseTime=window.performance.now()},resume:function resume(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function resetDelta(){var t=window.performance.now();this.time=t,this.lastTime=t,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0;for(var r=0;r<this.deltaSmoothingMax;r++)this.deltaHistory[r]=Math.min(this._target,this.deltaHistory[r]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function start(t){if(this.started)return this;this.started=!0,this.running=!0;for(var r=0;r<this.deltaSmoothingMax;r++)this.deltaHistory[r]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=t,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function step(){var t=window.performance.now();this.now=t;var r=t-this.lastTime;r<0&&(r=0),this.rawDelta=r;var o=this.deltaIndex,a=this.deltaHistory,h=this.deltaSmoothingMax,d=r,T=r;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,d=Math.min(d,this._target)),d>this._min&&(d=a[o],d=Math.min(d,this._min)),a[o]=d,this.deltaIndex++,this.deltaIndex>h&&(this.deltaIndex=0),T=0;for(var S=0;S<h;S++)T+=a[S];T/=h}this.delta=T,this.time+=this.rawDelta,t>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0),this.framesThisSecond++;var A=T/this._target;this.callback(t,T,A),this.lastTime=t,this.frame++},tick:function tick(){this.step()},sleep:function sleep(){this.running&&(this.raf.stop(),this.running=!1)},wake:function wake(t){this.running||(t&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function getDuration(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function getDurationMS(){return Math.round(this.lastTime-this.startTime)},stop:function stop(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function destroy(){this.stop(),this.callback=d,this.raf=null,this.game=null}});t.exports=S},function(t,r,o){var a=o(0),h=o(1),d=new a({initialize:function RequestAnimationFrame(){this.isRunning=!1,this.callback=h,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var t=this;this.step=function step(){var r=window.performance.now();t.lastTime=t.tick,t.tick=r,t.callback(r),t.timeOutID=window.requestAnimationFrame(step)},this.stepTimeout=function stepTimeout(){var r=Date.now(),o=Math.min(Math.max(2*t.target+t.tick-r,0),t.target);t.lastTime=t.tick,t.tick=r,t.callback(r),t.timeOutID=window.setTimeout(stepTimeout,o)}},start:function start(t,r,o){this.isRunning||(this.callback=t,this.isSetTimeOut=r,this.target=o,this.isRunning=!0,this.timeOutID=r?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function stop(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function destroy(){this.stop(),this.callback=h}});t.exports=d},function(t,r,o){var a=o(22);t.exports=function VisibilityHandler(t){var r,o=t.events;void 0!==document.hidden?r="visibilitychange":["webkit","moz","ms"].forEach((function(t){void 0!==document[t+"Hidden"]&&(document.hidden=function(){return document[t+"Hidden"]},r=t+"visibilitychange")})),r&&document.addEventListener(r,(function onChange(t){document.hidden||"pause"===t.type?o.emit(a.HIDDEN):o.emit(a.VISIBLE)}),!1),window.onblur=function(){o.emit(a.BLUR)},window.onfocus=function(){o.emit(a.FOCUS)},window.focus&&t.config.autoFocus&&window.focus()}},function(t,r,o){var a=o(389),h=o(31),d=o(6);t.exports=function GenerateTexture(t){var r=d(t,"data",[]),o=d(t,"canvas",null),T=d(t,"palette",a),S=d(t,"pixelWidth",1),A=d(t,"pixelHeight",S),P=d(t,"resizeCanvas",!0),O=d(t,"clearCanvas",!0),D=d(t,"preRender",null),L=d(t,"postRender",null),I=Math.floor(Math.abs(r[0].length*S)),B=Math.floor(Math.abs(r.length*A));o||(o=h.create2D(this,I,B),P=!1,O=!1),P&&(o.width=I,o.height=B);var N=o.getContext("2d");O&&N.clearRect(0,0,I,B),D&&D(o,N);for(var G=0;G<r.length;G++)for(var Y=r[G],X=0;X<Y.length;X++){var U=Y[X];"."!==U&&" "!==U&&(N.fillStyle=T[U],N.fillRect(X*S,G*A,S,A))}return L&&L(o,N),o}},function(t,r){t.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(t,r,o){var a=o(0),h=o(358),d=o(94),T=o(3),S=new a({Extends:d,initialize:function CubicBezierCurve(t,r,o,a){d.call(this,"CubicBezierCurve"),Array.isArray(t)&&(a=new T(t[6],t[7]),o=new T(t[4],t[5]),r=new T(t[2],t[3]),t=new T(t[0],t[1])),this.p0=t,this.p1=r,this.p2=o,this.p3=a},getStartPoint:function getStartPoint(t){return void 0===t&&(t=new T),t.copy(this.p0)},getResolution:function getResolution(t){return t},getPoint:function getPoint(t,r){void 0===r&&(r=new T);var o=this.p0,a=this.p1,d=this.p2,S=this.p3;return r.set(h(t,o.x,a.x,d.x,S.x),h(t,o.y,a.y,d.y,S.y))},draw:function draw(t,r){void 0===r&&(r=32);var o=this.getPoints(r);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var a=1;a<o.length;a++)t.lineTo(o[a].x,o[a].y);return t.strokePath(),t},toJSON:function toJSON(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});S.fromJSON=function(t){var r=t.points,o=new T(r[0],r[1]),a=new T(r[2],r[3]),h=new T(r[4],r[5]),d=new T(r[6],r[7]);return new S(o,a,h,d)},t.exports=S},function(t,r,o){var a=o(0),h=o(94),d=o(36),T=o(6),S=o(196),A=o(3),P=new a({Extends:h,initialize:function EllipseCurve(t,r,o,a,S,P,O,D){if("object"===_typeof(t)){var L=t;t=T(L,"x",0),r=T(L,"y",0),o=T(L,"xRadius",0),a=T(L,"yRadius",o),S=T(L,"startAngle",0),P=T(L,"endAngle",360),O=T(L,"clockwise",!1),D=T(L,"rotation",0)}else void 0===a&&(a=o),void 0===S&&(S=0),void 0===P&&(P=360),void 0===O&&(O=!1),void 0===D&&(D=0);h.call(this,"EllipseCurve"),this.p0=new A(t,r),this._xRadius=o,this._yRadius=a,this._startAngle=d(S),this._endAngle=d(P),this._clockwise=O,this._rotation=d(D)},getStartPoint:function getStartPoint(t){return void 0===t&&(t=new A),this.getPoint(0,t)},getResolution:function getResolution(t){return 2*t},getPoint:function getPoint(t,r){void 0===r&&(r=new A);for(var o=2*Math.PI,a=this._endAngle-this._startAngle,h=Math.abs(a)<Number.EPSILON;a<0;)a+=o;for(;a>o;)a-=o;a<Number.EPSILON&&(a=h?0:o),this._clockwise&&!h&&(a===o?a=-o:a-=o);var d=this._startAngle+t*a,T=this.p0.x+this._xRadius*Math.cos(d),S=this.p0.y+this._yRadius*Math.sin(d);if(0!==this._rotation){var P=Math.cos(this._rotation),O=Math.sin(this._rotation),D=T-this.p0.x,L=S-this.p0.y;T=D*P-L*O+this.p0.x,S=D*O+L*P+this.p0.y}return r.set(T,S)},setXRadius:function setXRadius(t){return this.xRadius=t,this},setYRadius:function setYRadius(t){return this.yRadius=t,this},setWidth:function setWidth(t){return this.xRadius=t/2,this},setHeight:function setHeight(t){return this.yRadius=t/2,this},setStartAngle:function setStartAngle(t){return this.startAngle=t,this},setEndAngle:function setEndAngle(t){return this.endAngle=t,this},setClockwise:function setClockwise(t){return this.clockwise=t,this},setRotation:function setRotation(t){return this.rotation=t,this},x:{get:function get(){return this.p0.x},set:function set(t){this.p0.x=t}},y:{get:function get(){return this.p0.y},set:function set(t){this.p0.y=t}},xRadius:{get:function get(){return this._xRadius},set:function set(t){this._xRadius=t}},yRadius:{get:function get(){return this._yRadius},set:function set(t){this._yRadius=t}},startAngle:{get:function get(){return S(this._startAngle)},set:function set(t){this._startAngle=d(t)}},endAngle:{get:function get(){return S(this._endAngle)},set:function set(t){this._endAngle=d(t)}},clockwise:{get:function get(){return this._clockwise},set:function set(t){this._clockwise=t}},angle:{get:function get(){return S(this._rotation)},set:function set(t){this._rotation=d(t)}},rotation:{get:function get(){return this._rotation},set:function set(t){this._rotation=t}},toJSON:function toJSON(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:S(this._startAngle),endAngle:S(this._endAngle),clockwise:this._clockwise,rotation:S(this._rotation)}}});P.fromJSON=function(t){return new P(t)},t.exports=P},function(t,r,o){var a=o(0),h=o(94),d=o(199),T=o(10),S=o(3),A=new a({Extends:h,initialize:function LineCurve(t,r){h.call(this,"LineCurve"),Array.isArray(t)&&(r=new S(t[2],t[3]),t=new S(t[0],t[1])),this.p0=t,this.p1=r,this.arcLengthDivisions=1},getBounds:function getBounds(t){return void 0===t&&(t=new T),d([this.p0,this.p1],t)},getStartPoint:function getStartPoint(t){return void 0===t&&(t=new S),t.copy(this.p0)},getResolution:function getResolution(t){return void 0===t&&(t=1),t},getPoint:function getPoint(t,r){return void 0===r&&(r=new S),1===t?r.copy(this.p1):(r.copy(this.p1).subtract(this.p0).scale(t).add(this.p0),r)},getPointAt:function getPointAt(t,r){return this.getPoint(t,r)},getTangent:function getTangent(t,r){return void 0===r&&(r=new S),r.copy(this.p1).subtract(this.p0).normalize(),r},getUtoTmapping:function getUtoTmapping(t,r,o){var a;if(r){var h=this.getLengths(o),d=h[h.length-1];a=Math.min(r,d)/d}else a=t;return a},draw:function draw(t){return t.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),t},toJSON:function toJSON(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});A.fromJSON=function(t){var r=t.points,o=new S(r[0],r[1]),a=new S(r[2],r[3]);return new A(o,a)},t.exports=A},function(t,r,o){var a=o(0),h=o(3),d=new a({initialize:function MoveTo(t,r){this.active=!1,this.p0=new h(t,r)},getPoint:function getPoint(t,r){return void 0===r&&(r=new h),r.copy(this.p0)},getPointAt:function getPointAt(t,r){return this.getPoint(t,r)},getResolution:function getResolution(){return 1},getLength:function getLength(){return 0},toJSON:function toJSON(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});t.exports=d},function(t,r,o){var a=o(0),h=o(94),d=o(359),T=o(3),S=new a({Extends:h,initialize:function QuadraticBezier(t,r,o){h.call(this,"QuadraticBezier"),Array.isArray(t)&&(o=new T(t[4],t[5]),r=new T(t[2],t[3]),t=new T(t[0],t[1])),this.p0=t,this.p1=r,this.p2=o},getStartPoint:function getStartPoint(t){return void 0===t&&(t=new T),t.copy(this.p0)},getResolution:function getResolution(t){return t},getPoint:function getPoint(t,r){void 0===r&&(r=new T);var o=this.p0,a=this.p1,h=this.p2;return r.set(d(t,o.x,a.x,h.x),d(t,o.y,a.y,h.y))},draw:function draw(t,r){void 0===r&&(r=32);var o=this.getPoints(r);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var a=1;a<o.length;a++)t.lineTo(o[a].x,o[a].y);return t.strokePath(),t},toJSON:function toJSON(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});S.fromJSON=function(t){var r=t.points,o=new T(r[0],r[1]),a=new T(r[2],r[3]),h=new T(r[4],r[5]);return new S(o,a,h)},t.exports=S},function(t,r,o){var a=o(194),h=o(0),d=o(94),T=o(3),S=new h({Extends:d,initialize:function SplineCurve(t){void 0===t&&(t=[]),d.call(this,"SplineCurve"),this.points=[],this.addPoints(t)},addPoints:function addPoints(t){for(var r=0;r<t.length;r++){var o=new T;"number"==typeof t[r]?(o.x=t[r],o.y=t[r+1],r++):Array.isArray(t[r])?(o.x=t[r][0],o.y=t[r][1]):(o.x=t[r].x,o.y=t[r].y),this.points.push(o)}return this},addPoint:function addPoint(t,r){var o=new T(t,r);return this.points.push(o),o},getStartPoint:function getStartPoint(t){return void 0===t&&(t=new T),t.copy(this.points[0])},getResolution:function getResolution(t){return t*this.points.length},getPoint:function getPoint(t,r){void 0===r&&(r=new T);var o=this.points,h=(o.length-1)*t,d=Math.floor(h),S=h-d,A=o[0===d?d:d-1],P=o[d],O=o[d>o.length-2?o.length-1:d+1],D=o[d>o.length-3?o.length-1:d+2];return r.set(a(S,A.x,P.x,O.x,D.x),a(S,A.y,P.y,O.y,D.y))},toJSON:function toJSON(){for(var t=[],r=0;r<this.points.length;r++)t.push(this.points[r].x),t.push(this.points[r].y);return{type:this.type,points:t}}});S.fromJSON=function(t){return new S(t.points)},t.exports=S},function(t,r,o){var a=new(o(0))({initialize:function BaseShader(t,r,o,a){r&&""!==r||(r=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join("\n")),o&&""!==o||(o=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join("\n")),void 0===a&&(a=null),this.key=t,this.fragmentSrc=r,this.vertexSrc=o,this.uniforms=a}});t.exports=a},function(t,r,o){var a=o(38);a.ColorSpectrum=o(909),a.ColorToRGBA=o(910),a.ComponentToHex=o(398),a.GetColor=o(103),a.GetColor32=o(328),a.HexStringToColor=o(327),a.HSLToColor=o(911),a.HSVColorWheel=o(912),a.HSVToRGB=o(188),a.HueToComponent=o(399),a.IntegerToColor=o(189),a.IntegerToRGB=o(330),a.Interpolate=o(913),a.ObjectToColor=o(331),a.RandomRGB=o(914),a.RGBStringToColor=o(332),a.RGBToHSV=o(329),a.RGBToString=o(915),a.ValueToColor=o(187),t.exports=a},function(t,r){t.exports=function ComponentToHex(t){var r=t.toString(16);return 1===r.length?"0"+r:r}},function(t,r){t.exports=function HueToComponent(t,r,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?t+6*(r-t)*o:o<.5?r:o<2/3?t+(r-t)*(2/3-o)*6:t}},function(t,r,o){var a=o(105);t.exports=function DOMContentLoaded(t){if("complete"!==document.readyState&&"interactive"!==document.readyState){var r=function check(){document.removeEventListener("deviceready",check,!0),document.removeEventListener("DOMContentLoaded",check,!0),window.removeEventListener("load",check,!0),t()};document.body?a.cordova?document.addEventListener("deviceready",r,!1):(document.addEventListener("DOMContentLoaded",r,!0),window.addEventListener("load",r,!0)):window.setTimeout(r,20)}else t()}},function(t,r){t.exports=function GetInnerHeight(t){if(!t)return window.innerHeight;var r=Math.abs(window.orientation),o={w:0,h:0},a=document.createElement("div");return a.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(a),o.w=90===r?a.offsetHeight:window.innerWidth,o.h=90===r?window.innerWidth:a.offsetHeight,document.documentElement.removeChild(a),a=null,90!==Math.abs(window.orientation)?o.h:o.w}},function(t,r,o){var a=o(201);t.exports=function GetScreenOrientation(t,r){var o=window.screen,h=!!o&&(o.orientation||o.mozOrientation||o.msOrientation);return h&&"string"==typeof h.type?h.type:"string"==typeof h?h:"number"==typeof window.orientation?0===window.orientation||180===window.orientation?a.ORIENTATION.PORTRAIT:a.ORIENTATION.LANDSCAPE:window.matchMedia?window.matchMedia("(orientation: portrait)").matches?a.ORIENTATION.PORTRAIT:window.matchMedia("(orientation: landscape)").matches?a.ORIENTATION.LANDSCAPE:void 0:r>t?a.ORIENTATION.PORTRAIT:a.ORIENTATION.LANDSCAPE}},function(t,r){t.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(t,r){t.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(t,r){t.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(t,r){t.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(t,r){t.exports=function GetTarget(t){var r;return""!==t&&("string"==typeof t?r=document.getElementById(t):t&&1===t.nodeType&&(r=t)),r||(r=document.body),r}},function(t,r){t.exports=function ParseXML(t){var r="";try{window.DOMParser?r=(new DOMParser).parseFromString(t,"text/xml"):(r=new ActiveXObject("Microsoft.XMLDOM")).loadXML(t)}catch(o){r=null}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length?r:null}},function(t,r,o){var a=o(0),h=o(203),d=o(9),T=o(51),S=o(22),A=o(410),P=o(411),O=o(412),D=o(413),L=o(25),I=o(177),B=new a({initialize:function InputManager(t,r){this.game=t,this.scaleManager,this.canvas,this.config=r,this.enabled=!0,this.events=new d,this.isOver=!0,this.defaultCursor="",this.keyboard=r.inputKeyboard?new A(this):null,this.mouse=r.inputMouse?new P(this):null,this.touch=r.inputTouch?new D(this):null,this.pointers=[],this.pointersTotal=r.inputActivePointers,r.inputTouch&&1===this.pointersTotal&&(this.pointersTotal=2);for(var o=0;o<=this.pointersTotal;o++){var a=new O(this,o);a.smoothFactor=r.inputSmoothFactor,this.pointers.push(a)}this.mousePointer=r.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new L,this._tempMatrix2=new L,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],t.events.once(S.BOOT,this.boot,this)},boot:function boot(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(T.MANAGER_BOOT),this.game.events.on(S.PRE_RENDER,this.preRender,this),this.game.events.once(S.DESTROY,this.destroy,this)},setCanvasOver:function setCanvasOver(t){this.isOver=!0,this.events.emit(T.GAME_OVER,t)},setCanvasOut:function setCanvasOut(t){this.isOver=!1,this.events.emit(T.GAME_OUT,t)},preRender:function preRender(){var t=this.game.loop.now,r=this.game.loop.delta,o=this.game.scene.getScenes(!0,!0);this.time=t,this.events.emit(T.MANAGER_UPDATE);for(var a=0;a<o.length;a++){var h=o[a];if(h.sys.input&&h.sys.input.updatePoll(t,r)&&this.globalTopOnly)return}},setDefaultCursor:function setDefaultCursor(t){this.defaultCursor=t,this.canvas.style.cursor!==t&&(this.canvas.style.cursor=t)},setCursor:function setCursor(t){t.cursor&&(this.canvas.style.cursor=t.cursor)},resetCursor:function resetCursor(t){t.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function addPointer(t){void 0===t&&(t=1);var r=[];this.pointersTotal+t>10&&(t=10-this.pointersTotal);for(var o=0;o<t;o++){var a=this.pointers.length,h=new O(this,a);h.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(h),this.pointersTotal++,r.push(h)}return r},updateInputPlugins:function updateInputPlugins(t,r){var o=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var a=0;a<o.length;a++){var h=o[a];if(h.sys.input&&(h.sys.input.update(t,r)&&this.globalTopOnly||this._tempSkip))return}},onTouchStart:function onTouchStart(t){for(var r=this.pointers,o=[],a=0;a<t.changedTouches.length;a++)for(var d=t.changedTouches[a],T=1;T<this.pointersTotal;T++){var S=r[T];if(!S.active){S.touchstart(d,t),this.activePointer=S,o.push(S);break}}this.updateInputPlugins(h.TOUCH_START,o)},onTouchMove:function onTouchMove(t){for(var r=this.pointers,o=[],a=0;a<t.changedTouches.length;a++)for(var d=t.changedTouches[a],T=1;T<this.pointersTotal;T++){var S=r[T];if(S.active&&S.identifier===d.identifier){S.touchmove(d,t),this.activePointer=S,o.push(S);break}}this.updateInputPlugins(h.TOUCH_MOVE,o)},onTouchEnd:function onTouchEnd(t){for(var r=this.pointers,o=[],a=0;a<t.changedTouches.length;a++)for(var d=t.changedTouches[a],T=1;T<this.pointersTotal;T++){var S=r[T];if(S.active&&S.identifier===d.identifier){S.touchend(d,t),o.push(S);break}}this.updateInputPlugins(h.TOUCH_END,o)},onTouchCancel:function onTouchCancel(t){for(var r=this.pointers,o=[],a=0;a<t.changedTouches.length;a++)for(var d=t.changedTouches[a],T=1;T<this.pointersTotal;T++){var S=r[T];if(S.active&&S.identifier===d.identifier){S.touchcancel(d,t),o.push(S);break}}this.updateInputPlugins(h.TOUCH_CANCEL,o)},onMouseDown:function onMouseDown(t){var r=this.mousePointer;r.down(t),r.updateMotion(),this.activePointer=r,this.updateInputPlugins(h.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function onMouseMove(t){var r=this.mousePointer;r.move(t),r.updateMotion(),this.activePointer=r,this.updateInputPlugins(h.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function onMouseUp(t){var r=this.mousePointer;r.up(t),r.updateMotion(),this.activePointer=r,this.updateInputPlugins(h.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function onMouseWheel(t){var r=this.mousePointer;r.wheel(t),this.activePointer=r,this.updateInputPlugins(h.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function onPointerLockChange(t){var r=this.mouse.locked;this.mousePointer.locked=r,this.events.emit(T.POINTERLOCK_CHANGE,t,r)},inputCandidate:function inputCandidate(t,r){var o=t.input;if(!o||!o.enabled||!o.alwaysEnabled&&!t.willRender(r))return!1;var a=!0,h=t.parentContainer;if(h)do{if(!h.willRender(r)){a=!1;break}h=h.parentContainer}while(h);return a},hitTest:function hitTest(t,r,o,a){void 0===a&&(a=this._tempHitTest);var h=this._tempPoint,d=o.scrollX,T=o.scrollY;a.length=0;var S=t.x,A=t.y;o.getWorldPoint(S,A,h),t.worldX=h.x,t.worldY=h.y;for(var P={x:0,y:0},O=this._tempMatrix,D=this._tempMatrix2,L=0;L<r.length;L++){var B=r[L];if(this.inputCandidate(B,o)){var N=h.x+d*B.scrollFactorX-d,G=h.y+T*B.scrollFactorY-T;B.parentContainer?(B.getWorldTransformMatrix(O,D),O.applyInverse(N,G,P)):I(N,G,B.x,B.y,B.rotation,B.scaleX,B.scaleY,P),this.pointWithinHitArea(B,P.x,P.y)&&a.push(B)}}return a},pointWithinHitArea:function pointWithinHitArea(t,r,o){r+=t.displayOriginX,o+=t.displayOriginY;var a=t.input;return!(!a||!a.hitAreaCallback(a.hitArea,r,o,t)||(a.localX=r,a.localY=o,0))},pointWithinInteractiveObject:function pointWithinInteractiveObject(t,r,o){return!!t.hitArea&&(r+=t.gameObject.displayOriginX,o+=t.gameObject.displayOriginY,t.localX=r,t.localY=o,t.hitAreaCallback(t.hitArea,r,o,t))},transformPointer:function transformPointer(t,r,o,a){var h=t.position,d=t.prevPosition;d.x=h.x,d.y=h.y;var T=this.scaleManager.transformX(r),S=this.scaleManager.transformY(o),A=t.smoothFactor;a&&0!==A?(h.x=T*A+d.x*(1-A),h.y=S*A+d.y*(1-A)):(h.x=T,h.y=S)},destroy:function destroy(){this.events.removeAllListeners(),this.game.events.off(S.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var t=0;t<this.pointers.length;t++)this.pointers[t].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});t.exports=B},function(t,r,o){var a=o(93),h=o(0),d=o(22),T=o(51),S=o(143),A=o(1),P=new h({initialize:function KeyboardManager(t){this.manager=t,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=A,this.onKeyUp=A,t.events.once(T.MANAGER_BOOT,this.boot,this)},boot:function boot(){var t=this.manager.config;this.enabled=t.inputKeyboard,this.target=t.inputKeyboardEventTarget,this.addCapture(t.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(d.POST_STEP,this.postUpdate,this)},startListeners:function startListeners(){var t=this;this.onKeyDown=function(r){if(!r.defaultPrevented&&t.enabled&&t.manager){t.queue.push(r),t.manager.events.emit(T.MANAGER_PROCESS);var o=r.altKey||r.ctrlKey||r.shiftKey||r.metaKey;t.preventDefault&&!o&&t.captures.indexOf(r.keyCode)>-1&&r.preventDefault()}},this.onKeyUp=function(r){if(!r.defaultPrevented&&t.enabled&&t.manager){t.queue.push(r),t.manager.events.emit(T.MANAGER_PROCESS);var o=r.altKey||r.ctrlKey||r.shiftKey||r.metaKey;t.preventDefault&&!o&&t.captures.indexOf(r.keyCode)>-1&&r.preventDefault()}};var r=this.target;r&&(r.addEventListener("keydown",this.onKeyDown,!1),r.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function stopListeners(){var t=this.target;t.removeEventListener("keydown",this.onKeyDown,!1),t.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function postUpdate(){this.queue=[]},addCapture:function addCapture(t){"string"==typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]);for(var r=this.captures,o=0;o<t.length;o++){var a=t[o];"string"==typeof a&&(a=S[a.trim().toUpperCase()]),-1===r.indexOf(a)&&r.push(a)}this.preventDefault=r.length>0},removeCapture:function removeCapture(t){"string"==typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]);for(var r=this.captures,o=0;o<t.length;o++){var h=t[o];"string"==typeof h&&(h=S[h.toUpperCase()]),a(r,h)}this.preventDefault=r.length>0},clearCaptures:function clearCaptures(){this.captures=[],this.preventDefault=!1},destroy:function destroy(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(d.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});t.exports=P},function(t,r,o){var a=o(0),h=o(191),d=o(51),T=o(1),S=new a({initialize:function MouseManager(t){this.manager=t,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=T,this.onMouseDown=T,this.onMouseUp=T,this.onMouseDownWindow=T,this.onMouseUpWindow=T,this.onMouseOver=T,this.onMouseOut=T,this.onMouseWheel=T,this.pointerLockChange=T,this.isTop=!0,t.events.once(d.MANAGER_BOOT,this.boot,this)},boot:function boot(){var t=this.manager.config;this.enabled=t.inputMouse,this.target=t.inputMouseEventTarget,this.passive=t.inputMousePassive,this.preventDefaultDown=t.inputMousePreventDefaultDown,this.preventDefaultUp=t.inputMousePreventDefaultUp,this.preventDefaultMove=t.inputMousePreventDefaultMove,this.preventDefaultWheel=t.inputMousePreventDefaultWheel,this.target?"string"==typeof this.target&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,t.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function disableContextMenu(){return document.body.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),this},requestPointerLock:function requestPointerLock(){if(h.pointerLock){var t=this.target;t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock()}},releasePointerLock:function releasePointerLock(){h.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function startListeners(){var t=this.target;if(t){var r=this,o=this.manager,a=o.canvas,d=window&&window.focus&&o.game.config.autoFocus;this.onMouseMove=function(t){!t.defaultPrevented&&r.enabled&&o&&o.enabled&&(o.onMouseMove(t),r.preventDefaultMove&&t.preventDefault())},this.onMouseDown=function(t){d&&window.focus(),!t.defaultPrevented&&r.enabled&&o&&o.enabled&&(o.onMouseDown(t),r.preventDefaultDown&&t.target===a&&t.preventDefault())},this.onMouseDownWindow=function(t){!t.defaultPrevented&&r.enabled&&o&&o.enabled&&t.target!==a&&o.onMouseDown(t)},this.onMouseUp=function(t){!t.defaultPrevented&&r.enabled&&o&&o.enabled&&(o.onMouseUp(t),r.preventDefaultUp&&t.target===a&&t.preventDefault())},this.onMouseUpWindow=function(t){!t.defaultPrevented&&r.enabled&&o&&o.enabled&&t.target!==a&&o.onMouseUp(t)},this.onMouseOver=function(t){!t.defaultPrevented&&r.enabled&&o&&o.enabled&&o.setCanvasOver(t)},this.onMouseOut=function(t){!t.defaultPrevented&&r.enabled&&o&&o.enabled&&o.setCanvasOut(t)},this.onMouseWheel=function(t){!t.defaultPrevented&&r.enabled&&o&&o.enabled&&o.onMouseWheel(t),r.preventDefaultWheel&&t.target===a&&t.preventDefault()};var T={passive:!0};if(t.addEventListener("mousemove",this.onMouseMove),t.addEventListener("mousedown",this.onMouseDown),t.addEventListener("mouseup",this.onMouseUp),t.addEventListener("mouseover",this.onMouseOver,T),t.addEventListener("mouseout",this.onMouseOut,T),this.preventDefaultWheel?t.addEventListener("wheel",this.onMouseWheel,{passive:!1}):t.addEventListener("wheel",this.onMouseWheel,T),window&&o.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,T),window.top.addEventListener("mouseup",this.onMouseUpWindow,T)}catch(S){window.addEventListener("mousedown",this.onMouseDownWindow,T),window.addEventListener("mouseup",this.onMouseUpWindow,T),this.isTop=!1}h.pointerLock&&(this.pointerLockChange=function(t){var a=r.target;r.locked=document.pointerLockElement===a||document.mozPointerLockElement===a||document.webkitPointerLockElement===a,o.onPointerLockChange(t)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function stopListeners(){var t=this.target;t.removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("mouseover",this.onMouseOver),t.removeEventListener("mouseout",this.onMouseOut),window&&((t=this.isTop?window.top:window).removeEventListener("mousedown",this.onMouseDownWindow),t.removeEventListener("mouseup",this.onMouseUpWindow)),h.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function destroy(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=S},function(t,r,o){var a=o(349),h=o(0),d=o(50),T=o(124),S=o(360),A=o(3),P=o(105),O=new h({initialize:function Pointer(t,r){this.manager=t,this.id=r,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new A,this.prevPosition=new A,this.midPoint=new A(-1,-1),this.velocity=new A,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=0===r,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function updateWorldPoint(t){var r=t.getWorldPoint(this.x,this.y);return this.worldX=r.x,this.worldY=r.y,this},positionToCamera:function positionToCamera(t,r){return t.getWorldPoint(this.x,this.y,r)},updateMotion:function updateMotion(){var t=this.position.x,r=this.position.y,o=this.midPoint.x,h=this.midPoint.y;if(t!==o||r!==h){var d=S(this.motionFactor,o,t),A=S(this.motionFactor,h,r);T(d,t,.1)&&(d=t),T(A,r,.1)&&(A=r),this.midPoint.set(d,A);var P=t-d,O=r-A;this.velocity.set(P,O),this.angle=a(d,A,t,r),this.distance=Math.sqrt(P*P+O*O)}},up:function up(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),0===this.buttons&&(this.isDown=!1,this.upTime=t.timeStamp,this.wasTouch=!1)},down:function down(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),P.macOS&&t.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=t.timeStamp),this.wasTouch=!1},move:function move(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.locked&&(this.movementX=t.movementX||t.mozMovementX||t.webkitMovementX||0,this.movementY=t.movementY||t.mozMovementY||t.webkitMovementY||0),this.moveTime=t.timeStamp,this.wasTouch=!1},wheel:function wheel(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.deltaX=t.deltaX,this.deltaY=t.deltaY,this.deltaZ=t.deltaZ,this.wasTouch=!1},touchstart:function touchstart(t,r){t.pointerId&&(this.pointerId=t.pointerId),this.identifier=t.identifier,this.target=t.target,this.active=!0,this.buttons=1,this.event=r,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=r.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function touchmove(t,r){this.event=r,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.moveTime=r.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function touchend(t,r){this.buttons=0,this.event=r,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=r.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function touchcancel(t,r){this.buttons=0,this.event=r,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=r.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function noButtonDown(){return 0===this.buttons},leftButtonDown:function leftButtonDown(){return!!(1&this.buttons)},rightButtonDown:function rightButtonDown(){return!!(2&this.buttons)},middleButtonDown:function middleButtonDown(){return!!(4&this.buttons)},backButtonDown:function backButtonDown(){return!!(8&this.buttons)},forwardButtonDown:function forwardButtonDown(){return!!(16&this.buttons)},leftButtonReleased:function leftButtonReleased(){return 0===this.button&&!this.isDown},rightButtonReleased:function rightButtonReleased(){return 2===this.button&&!this.isDown},middleButtonReleased:function middleButtonReleased(){return 1===this.button&&!this.isDown},backButtonReleased:function backButtonReleased(){return 3===this.button&&!this.isDown},forwardButtonReleased:function forwardButtonReleased(){return 4===this.button&&!this.isDown},getDistance:function getDistance(){return this.isDown?d(this.downX,this.downY,this.x,this.y):d(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function getDistanceX(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function getDistanceY(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function getDuration(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function getAngle(){return this.isDown?a(this.downX,this.downY,this.x,this.y):a(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function getInterpolatedPosition(t,r){void 0===t&&(t=10),void 0===r&&(r=[]);for(var o=this.prevPosition.x,a=this.prevPosition.y,h=this.position.x,d=this.position.y,T=0;T<t;T++){var A=1/t*T;r[T]={x:S(A,o,h),y:S(A,a,d)}}return r},destroy:function destroy(){this.camera=null,this.manager=null,this.position=null},x:{get:function get(){return this.position.x},set:function set(t){this.position.x=t}},y:{get:function get(){return this.position.y},set:function set(t){this.position.y=t}},time:{get:function get(){return this.event?this.event.timeStamp:0}}});t.exports=O},function(t,r,o){var a=o(0),h=o(51),d=o(1),T=new a({initialize:function TouchManager(t){this.manager=t,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=d,this.onTouchStartWindow=d,this.onTouchMove=d,this.onTouchEnd=d,this.onTouchEndWindow=d,this.onTouchCancel=d,this.onTouchCancelWindow=d,this.onTouchOver=d,this.onTouchOut=d,t.events.once(h.MANAGER_BOOT,this.boot,this)},boot:function boot(){var t=this.manager.config;this.enabled=t.inputTouch,this.target=t.inputTouchEventTarget,this.capture=t.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),t.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function disableContextMenu(){return document.body.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),this},startListeners:function startListeners(){var t=this,r=this.manager.canvas,o=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(a){o&&window.focus(),!a.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchStart(a),t.capture&&a.cancelable&&a.target===r&&a.preventDefault())},this.onTouchStartWindow=function(o){!o.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&o.target!==r&&t.manager.onTouchStart(o)},this.onTouchMove=function(r){!r.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchMove(r),t.capture&&r.cancelable&&r.preventDefault())},this.onTouchEnd=function(o){!o.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchEnd(o),t.capture&&o.cancelable&&o.target===r&&o.preventDefault())},this.onTouchEndWindow=function(o){!o.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&o.target!==r&&t.manager.onTouchEnd(o)},this.onTouchCancel=function(r){!r.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchCancel(r),t.capture&&r.preventDefault())},this.onTouchCancelWindow=function(r){!r.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.onTouchCancel(r)},this.onTouchOver=function(r){!r.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOver(r)},this.onTouchOut=function(r){!r.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOut(r)};var a=this.target;if(a){var h={passive:!0},d={passive:!1};a.addEventListener("touchstart",this.onTouchStart,this.capture?d:h),a.addEventListener("touchmove",this.onTouchMove,this.capture?d:h),a.addEventListener("touchend",this.onTouchEnd,this.capture?d:h),a.addEventListener("touchcancel",this.onTouchCancel,this.capture?d:h),a.addEventListener("touchover",this.onTouchOver,this.capture?d:h),a.addEventListener("touchout",this.onTouchOut,this.capture?d:h),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,d),window.addEventListener("touchend",this.onTouchEndWindow,d),window.addEventListener("touchcancel",this.onTouchCancelWindow,d)),this.enabled=!0}},stopListeners:function stopListeners(){var t=this.target;t.removeEventListener("touchstart",this.onTouchStart),t.removeEventListener("touchmove",this.onTouchMove),t.removeEventListener("touchend",this.onTouchEnd),t.removeEventListener("touchcancel",this.onTouchCancel),t.removeEventListener("touchover",this.onTouchOver),t.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function destroy(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=T},function(t,r,o){var a=o(0),h=o(22),d=o(9),T=o(8),S=o(16),A=o(5),P=o(2),O=o(24),D=o(93),L=new a({Extends:d,initialize:function PluginManager(t){d.call(this),this.game=t,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],t.isBooted?this.boot():t.events.once(h.BOOT,this.boot,this)},boot:function boot(){var t,r,o,a,d,T,S,A=this.game.config,O=A.installGlobalPlugins;for(O=O.concat(this._pendingGlobal),t=0;t<O.length;t++)r=O[t],o=P(r,"key",null),a=P(r,"plugin",null),d=P(r,"start",!1),T=P(r,"mapping",null),S=P(r,"data",null),o&&(a?this.install(o,a,d,T,S):console.warn("Missing `plugin` for key: "+o));for(O=(O=A.installScenePlugins).concat(this._pendingScene),t=0;t<O.length;t++)r=O[t],o=P(r,"key",null),a=P(r,"plugin",null),T=P(r,"mapping",null),o&&(a?this.installScenePlugin(o,a,T):console.warn("Missing `plugin` for key: "+o));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(h.DESTROY,this.destroy,this)},addToScene:function addToScene(t,r,o){var a,h,d,T=this.game,S=t.scene,A=t.settings.map,P=t.settings.isBooted;for(a=0;a<r.length;a++)T[h=r[a]]?(t[h]=T[h],A.hasOwnProperty(h)&&(S[A[h]]=t[h])):"game"===h&&A.hasOwnProperty(h)&&(S[A[h]]=T);for(var D=0;D<o.length;D++)for(d=o[D],a=0;a<d.length;a++)if(h=d[a],O.hasCore(h)){var L=O.getCore(h),I=L.mapping,B=new L.plugin(S,this,I);t[I]=B,L.custom?S[I]=B:A.hasOwnProperty(I)&&(S[A[I]]=B),P&&B.boot()}for(d=this.plugins,a=0;a<d.length;a++){var N=d[a];N.mapping&&(S[N.mapping]=N.plugin)}},getDefaultScenePlugins:function getDefaultScenePlugins(){var t=this.game.config.defaultPlugins;return t=t.concat(this.scenePlugins)},installScenePlugin:function installScenePlugin(t,r,o,a,h){if(void 0===h&&(h=!1),"function"==typeof r){if(O.hasCore(t)){if(!h&&O.hasCore(t))return void console.warn("Scene Plugin key in use: "+t)}else O.register(t,r,o,!0),this.scenePlugins.push(t);if(a){var d=new r(a,this,t);a.sys[t]=d,o&&""!==o&&(a[o]=d),d.boot()}}else console.warn("Invalid Scene Plugin: "+t)},install:function install(t,r,o,a,h){if(void 0===o&&(o=!1),void 0===a&&(a=null),void 0===h&&(h=null),"function"!=typeof r)return console.warn("Invalid Plugin: "+t),null;if(O.hasCustom(t))return console.warn("Plugin key in use: "+t),null;if(null!==a&&(o=!0),this.game.isBooted){if(O.registerCustom(t,r,a,h),o)return this.start(t)}else this._pendingGlobal.push({key:t,plugin:r,start:o,mapping:a,data:h});return null},getIndex:function getIndex(t){for(var r=this.plugins,o=0;o<r.length;o++)if(r[o].key===t)return o;return-1},getEntry:function getEntry(t){var r=this.getIndex(t);if(-1!==r)return this.plugins[r]},isActive:function isActive(t){var r=this.getEntry(t);return r&&r.active},start:function start(t,r){void 0===r&&(r=t);var o=this.getEntry(r);return o&&!o.active?(o.active=!0,o.plugin.start()):o||(o=this.createEntry(t,r)),o?o.plugin:null},createEntry:function createEntry(t,r){var o=O.getCustom(t);if(o){var a=new o.plugin(this);o={key:r,plugin:a,active:!0,mapping:o.mapping,data:o.data},this.plugins.push(o),a.init(o.data),a.start()}return o},stop:function stop(t){var r=this.getEntry(t);return r&&r.active&&(r.active=!1,r.plugin.stop()),this},get:function get(t,r){void 0===r&&(r=!0);var o=this.getEntry(t);if(o)return o.plugin;var a=this.getClass(t);return a&&r?(o=this.createEntry(t,t))?o.plugin:null:a||null},getClass:function getClass(t){return O.getCustomClass(t)},removeGlobalPlugin:function removeGlobalPlugin(t){var r=this.getEntry(t);r&&D(this.plugins,r),O.removeCustom(t)},removeScenePlugin:function removeScenePlugin(t){D(this.scenePlugins,t),O.remove(t)},registerGameObject:function registerGameObject(t,r,o){return r&&A.register(t,r),o&&S.register(t,o),this},removeGameObject:function removeGameObject(t,r,o){return void 0===r&&(r=!0),void 0===o&&(o=!0),r&&A.remove(t),o&&S.remove(t),this},registerFileType:function registerFileType(t,r,o){T.register(t,r),o&&o.sys.load&&(o.sys.load[t]=r)},destroy:function destroy(){for(var t=0;t<this.plugins.length;t++)this.plugins[t].plugin.destroy();O.destroyCustomPlugins(),this.game.noReturn&&O.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});t.exports=L},function(t,r,o){var a=o(201),h=o(0),d=o(9),T=o(104),S=o(22),A=o(401),P=o(407),O=o(402),D=o(1),L=o(10),I=o(416),B=o(76),N=o(3),G=new h({Extends:d,initialize:function ScaleManager(t){d.call(this),this.game=t,this.canvas,this.canvasBounds=new L,this.parent=null,this.parentIsWindow=!1,this.parentSize=new I,this.gameSize=new I,this.baseSize=new I,this.displaySize=new I,this.scaleMode=a.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new N(1,1),this.autoRound=!1,this.autoCenter=a.CENTER.NO_CENTER,this.orientation=a.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:D,windowResize:D,fullScreenChange:D,fullScreenError:D}},preBoot:function preBoot(){this.parseConfig(this.game.config),this.game.events.once(S.BOOT,this.boot,this)},boot:function boot(){var t=this.game;this.canvas=t.canvas,this.fullscreen=t.device.fullscreen,this.scaleMode!==a.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===a.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),t.events.on(S.PRE_STEP,this.step,this),t.events.once(S.READY,this.refresh,this),t.events.once(S.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function parseConfig(t){this.getParent(t),this.getParentBounds();var r=t.width,o=t.height,h=t.scaleMode,d=t.zoom,T=t.autoRound;if("string"==typeof r){var S=this.parentSize.width;0===S&&(S=window.innerWidth);var A=parseInt(r,10)/100;r=Math.floor(S*A)}if("string"==typeof o){var P=this.parentSize.height;0===P&&(P=window.innerHeight);var D=parseInt(o,10)/100;o=Math.floor(P*D)}this.scaleMode=h,this.autoRound=T,this.autoCenter=t.autoCenter,this.resizeInterval=t.resizeInterval,T&&(r=Math.floor(r),o=Math.floor(o)),this.gameSize.setSize(r,o),d===a.ZOOM.MAX_ZOOM&&(d=this.getMaxZoom()),this.zoom=d,1!==d&&(this._resetZoom=!0),this.baseSize.setSize(r,o),T&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),t.minWidth>0&&this.displaySize.setMin(t.minWidth*d,t.minHeight*d),t.maxWidth>0&&this.displaySize.setMax(t.maxWidth*d,t.maxHeight*d),this.displaySize.setSize(r,o),this.orientation=O(r,o)},getParent:function getParent(t){var r=t.parent;if(null!==r){if(this.parent=P(r),this.parentIsWindow=this.parent===document.body,t.expandParent&&t.scaleMode!==a.SCALE_MODE.NONE){var o=this.parent.getBoundingClientRect();(this.parentIsWindow||0===o.height)&&(document.documentElement.style.height="100%",document.body.style.height="100%",o=this.parent.getBoundingClientRect(),this.parentIsWindow||0!==o.height||(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}t.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=P(t.fullscreenTarget))}},getParentBounds:function getParentBounds(){if(!this.parent)return!1;var t=this.parentSize,r=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(r.height=A(!0));var o=r.width,a=r.height;return(t.width!==o||t.height!==a)&&(t.setSize(o,a),!0)},lockOrientation:function lockOrientation(t){var r=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return!!r&&r.call(screen,t)},setParentSize:function setParentSize(t,r){return this.parentSize.setSize(t,r),this.refresh()},setGameSize:function setGameSize(t,r){var o=this.autoRound;o&&(t=Math.floor(t),r=Math.floor(r));var a=this.width,h=this.height;return this.gameSize.resize(t,r),this.baseSize.resize(t,r),o&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(t/r),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(a,h)},resize:function resize(t,r){var o=this.zoom,a=this.autoRound;a&&(t=Math.floor(t),r=Math.floor(r));var h=this.width,d=this.height;this.gameSize.resize(t,r),this.baseSize.resize(t,r),a&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(t*o,r*o),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var T=this.canvas.style,S=t*o,A=r*o;return a&&(S=Math.floor(S),A=Math.floor(A)),S===t&&A===r||(T.width=S+"px",T.height=A+"px"),this.refresh(h,d)},setZoom:function setZoom(t){return this.zoom=t,this._resetZoom=!0,this.refresh()},setMaxZoom:function setMaxZoom(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function refresh(t,r){void 0===t&&(t=this.width),void 0===r&&(r=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var o=this.game.domContainer;if(o){this.baseSize.setCSS(o);var a=this.canvas.style,h=o.style;h.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",h.marginLeft=a.marginLeft,h.marginTop=a.marginTop}return this.emit(T.RESIZE,this.gameSize,this.baseSize,this.displaySize,t,r),this},updateOrientation:function updateOrientation(){if(this._checkOrientation){this._checkOrientation=!1;var t=O(this.width,this.height);t!==this.orientation&&(this.orientation=t,this.emit(T.ORIENTATION_CHANGE,t))}},updateScale:function updateScale(){var t,r,o=this.canvas.style,h=this.gameSize.width,d=this.gameSize.height,T=this.zoom,S=this.autoRound;this.scaleMode===a.SCALE_MODE.NONE?(this.displaySize.setSize(h*T,d*T),t=this.displaySize.width,r=this.displaySize.height,S&&(t=Math.floor(t),r=Math.floor(r)),this._resetZoom&&(o.width=t+"px",o.height=r+"px",this._resetZoom=!1)):this.scaleMode===a.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),t=this.displaySize.width,r=this.displaySize.height,S&&(t=Math.floor(t),r=Math.floor(r)),this.canvas.width=t,this.canvas.height=r):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),t=this.displaySize.width,r=this.displaySize.height,S&&(t=Math.floor(t),r=Math.floor(r)),o.width=t+"px",o.height=r+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function getMaxZoom(){var t=B(this.parentSize.width,this.gameSize.width,0,!0),r=B(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(t,r),1)},updateCenter:function updateCenter(){var t=this.autoCenter;if(t!==a.CENTER.NO_CENTER){var r=this.canvas,o=r.style,h=r.getBoundingClientRect(),d=h.width,T=h.height,S=Math.floor((this.parentSize.width-d)/2),A=Math.floor((this.parentSize.height-T)/2);t===a.CENTER.CENTER_HORIZONTALLY?A=0:t===a.CENTER.CENTER_VERTICALLY&&(S=0),o.marginLeft=S+"px",o.marginTop=A+"px"}},updateBounds:function updateBounds(){var t=this.canvasBounds,r=this.canvas.getBoundingClientRect();t.x=r.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),t.y=r.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),t.width=r.width,t.height=r.height},transformX:function transformX(t){return(t-this.canvasBounds.left)*this.displayScale.x},transformY:function transformY(t){return(t-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function startFullscreen(t){void 0===t&&(t={navigationUI:"hide"});var r=this.fullscreen;if(r.available){if(!r.active){var o=this.getFullscreenTarget();r.keyboard?o[r.request](Element.ALLOW_KEYBOARD_INPUT):o[r.request](t)}}else this.emit(T.FULLSCREEN_UNSUPPORTED)},fullscreenSuccessHandler:function fullscreenSuccessHandler(){this.getParentBounds(),this.refresh(),this.emit(T.ENTER_FULLSCREEN)},fullscreenErrorHandler:function fullscreenErrorHandler(t){this.removeFullscreenTarget(),this.emit(T.FULLSCREEN_FAILED,t)},getFullscreenTarget:function getFullscreenTarget(){if(!this.fullscreenTarget){var t=document.createElement("div");t.style.margin="0",t.style.padding="0",t.style.width="100%",t.style.height="100%",this.fullscreenTarget=t,this._createdFullscreenTarget=!0}return this._createdFullscreenTarget&&(this.canvas.parentNode.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)),this.fullscreenTarget},removeFullscreenTarget:function removeFullscreenTarget(){if(this._createdFullscreenTarget){var t=this.fullscreenTarget;if(t&&t.parentNode){var r=t.parentNode;r.insertBefore(this.canvas,t),r.removeChild(t)}}},stopFullscreen:function stopFullscreen(){var t=this.fullscreen;if(!t.available)return this.emit(T.FULLSCREEN_UNSUPPORTED),!1;t.active&&document[t.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(T.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function toggleFullscreen(t){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(t)},startListeners:function startListeners(){var t=this,r=this.listeners;r.orientationChange=function(){t.updateBounds(),t._checkOrientation=!0,t.dirty=!0},r.windowResize=function(){t.updateBounds(),t.dirty=!0},window.addEventListener("orientationchange",r.orientationChange,!1),window.addEventListener("resize",r.windowResize,!1),this.fullscreen.available&&(r.fullScreenChange=function(r){return t.onFullScreenChange(r)},r.fullScreenError=function(r){return t.onFullScreenError(r)},["webkit","moz",""].forEach((function(t){document.addEventListener(t+"fullscreenchange",r.fullScreenChange,!1),document.addEventListener(t+"fullscreenerror",r.fullScreenError,!1)})),document.addEventListener("MSFullscreenChange",r.fullScreenChange,!1),document.addEventListener("MSFullscreenError",r.fullScreenError,!1))},onFullScreenChange:function onFullScreenChange(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function onFullScreenError(){this.removeFullscreenTarget()},step:function step(t,r){this.parent&&(this._lastCheck+=r,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function stopListeners(){var t=this.listeners;window.removeEventListener("orientationchange",t.orientationChange,!1),window.removeEventListener("resize",t.windowResize,!1),["webkit","moz",""].forEach((function(r){document.removeEventListener(r+"fullscreenchange",t.fullScreenChange,!1),document.removeEventListener(r+"fullscreenerror",t.fullScreenError,!1)})),document.removeEventListener("MSFullscreenChange",t.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",t.fullScreenError,!1)},destroy:function destroy(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function get(){return this.fullscreen.active}},width:{get:function get(){return this.gameSize.width}},height:{get:function get(){return this.gameSize.height}},isPortrait:{get:function get(){return this.orientation===a.ORIENTATION.PORTRAIT}},isLandscape:{get:function get(){return this.orientation===a.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function get(){return this.height>this.width}},isGameLandscape:{get:function get(){return this.width>this.height}}});t.exports=G},function(t,r,o){var a=o(18),h=o(0),d=o(76),T=o(3),S=new h({initialize:function Size(t,r,o,a){void 0===t&&(t=0),void 0===r&&(r=t),void 0===o&&(o=0),void 0===a&&(a=null),this._width=t,this._height=r,this._parent=a,this.aspectMode=o,this.aspectRatio=0===r?1:t/r,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new T},setAspectMode:function setAspectMode(t){return void 0===t&&(t=0),this.aspectMode=t,this.setSize(this._width,this._height)},setSnap:function setSnap(t,r){return void 0===t&&(t=0),void 0===r&&(r=t),this.snapTo.set(t,r),this.setSize(this._width,this._height)},setParent:function setParent(t){return this._parent=t,this.setSize(this._width,this._height)},setMin:function setMin(t,r){return void 0===t&&(t=0),void 0===r&&(r=t),this.minWidth=a(t,0,this.maxWidth),this.minHeight=a(r,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function setMax(t,r){return void 0===t&&(t=Number.MAX_VALUE),void 0===r&&(r=t),this.maxWidth=a(t,this.minWidth,Number.MAX_VALUE),this.maxHeight=a(r,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function setSize(t,r){switch(void 0===t&&(t=0),void 0===r&&(r=t),this.aspectMode){case S.NONE:this._width=this.getNewWidth(d(t,this.snapTo.x)),this._height=this.getNewHeight(d(r,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height;break;case S.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(d(t,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case S.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(d(r,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case S.FIT:this.constrain(t,r,!0);break;case S.ENVELOP:this.constrain(t,r,!1)}return this},setAspectRatio:function setAspectRatio(t){return this.aspectRatio=t,this.setSize(this._width,this._height)},resize:function resize(t,r){return this._width=this.getNewWidth(d(t,this.snapTo.x)),this._height=this.getNewHeight(d(r,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height,this},getNewWidth:function getNewWidth(t,r){return void 0===r&&(r=!0),t=a(t,this.minWidth,this.maxWidth),r&&this._parent&&t>this._parent.width&&(t=Math.max(this.minWidth,this._parent.width)),t},getNewHeight:function getNewHeight(t,r){return void 0===r&&(r=!0),t=a(t,this.minHeight,this.maxHeight),r&&this._parent&&t>this._parent.height&&(t=Math.max(this.minHeight,this._parent.height)),t},constrain:function constrain(t,r,o){void 0===t&&(t=0),void 0===r&&(r=t),void 0===o&&(o=!0),t=this.getNewWidth(t),r=this.getNewHeight(r);var a=this.snapTo,h=0===r?1:t/r;return o&&this.aspectRatio>h||!o&&this.aspectRatio<h?(r=(t=d(t,a.x))/this.aspectRatio,a.y>0&&(t=(r=d(r,a.y))*this.aspectRatio)):(o&&this.aspectRatio<h||!o&&this.aspectRatio>h)&&(t=(r=d(r,a.y))*this.aspectRatio,a.x>0&&(r=(t=d(t,a.x))*(1/this.aspectRatio))),this._width=t,this._height=r,this},fitTo:function fitTo(t,r){return this.constrain(t,r,!0)},envelop:function envelop(t,r){return this.constrain(t,r,!1)},setWidth:function setWidth(t){return this.setSize(t,this._height)},setHeight:function setHeight(t){return this.setSize(this._width,t)},toString:function toString(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function setCSS(t){t&&t.style&&(t.style.width=this._width+"px",t.style.height=this._height+"px")},copy:function copy(t){return t.setAspectMode(this.aspectMode),t.aspectRatio=this.aspectRatio,t.setSize(this.width,this.height)},destroy:function destroy(){this._parent=null,this.snapTo=null},width:{get:function get(){return this._width},set:function set(t){this.setSize(t,this._height)}},height:{get:function get(){return this._height},set:function set(t){this.setSize(this._width,t)}}});S.NONE=0,S.WIDTH_CONTROLS_HEIGHT=1,S.HEIGHT_CONTROLS_WIDTH=2,S.FIT=3,S.ENVELOP=4,t.exports=S},function(t,r,o){var a=o(0),h=o(144),d=o(20),T=o(22),S=o(6),A=o(95),P=o(1),O=o(418),D=o(204),L=new a({initialize:function SceneManager(t,r){if(this.game=t,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,r){Array.isArray(r)||(r=[r]);for(var o=0;o<r.length;o++)this._pending.push({key:"default",scene:r[o],autoStart:0===o,data:{}})}t.events.once(T.READY,this.bootQueue,this)},bootQueue:function bootQueue(){if(!this.isBooted){var t,r,o,a;for(t=0;t<this._pending.length;t++){var h;o=(r=this._pending[t]).key,(a=r.scene)instanceof O?h=this.createSceneFromInstance(o,a):"object"===_typeof(a)?h=this.createSceneFromObject(o,a):"function"==typeof a&&(h=this.createSceneFromFunction(o,a)),o=h.sys.settings.key,this.keys[o]=h,this.scenes.push(h),this._data[o]&&(h.sys.settings.data=this._data[o].data,this._data[o].autoStart&&(r.autoStart=!0)),(r.autoStart||h.sys.settings.active)&&this._start.push(o)}for(this._pending.length=0,this._data={},this.isBooted=!0,t=0;t<this._start.length;t++)r=this._start[t],this.start(r);this._start.length=0}},processQueue:function processQueue(){var t=this._pending.length,r=this._queue.length;if(0!==t||0!==r){var o,a;if(t){for(o=0;o<t;o++)a=this._pending[o],this.add(a.key,a.scene,a.autoStart,a.data);for(o=0;o<this._start.length;o++)a=this._start[o],this.start(a);return this._start.length=0,void(this._pending.length=0)}for(o=0;o<this._queue.length;o++)this[(a=this._queue[o]).op](a.keyA,a.keyB);this._queue.length=0}},add:function add(t,r,o,a){return void 0===o&&(o=!1),void 0===a&&(a={}),this.isProcessing||!this.isBooted?(this._pending.push({key:t,scene:r,autoStart:o,data:a}),this.isBooted||(this._data[t]={data:a}),null):(t=this.getKey(t,r),r instanceof O?h=this.createSceneFromInstance(t,r):"object"===_typeof(r)?(r.key=t,h=this.createSceneFromObject(t,r)):"function"==typeof r&&(h=this.createSceneFromFunction(t,r)),h.sys.settings.data=a,t=h.sys.settings.key,this.keys[t]=h,this.scenes.push(h),(o||h.sys.settings.active)&&(this._pending.length?this._start.push(t):this.start(t)),h);var h},remove:function remove(t){if(this.isProcessing)this._queue.push({op:"remove",keyA:t,keyB:null});else{var r=this.getScene(t);if(!r||r.sys.isTransitioning())return this;var o=this.scenes.indexOf(r),a=r.sys.settings.key;o>-1&&(delete this.keys[a],this.scenes.splice(o,1),this._start.indexOf(a)>-1&&(o=this._start.indexOf(a),this._start.splice(o,1)),r.sys.destroy())}return this},bootScene:function bootScene(t){var r,o=t.sys,a=o.settings;o.sceneUpdate=P,t.init&&(t.init.call(t,a.data),a.status=h.INIT,a.isTransition&&o.events.emit(d.TRANSITION_INIT,a.transitionFrom,a.transitionDuration)),o.load&&(r=o.load).reset(),r&&t.preload?(t.preload.call(t),0===r.list.size?this.create(t):(a.status=h.LOADING,r.once(A.COMPLETE,this.loadComplete,this),r.start())):this.create(t)},loadComplete:function loadComplete(t){this.create(t.scene)},payloadComplete:function payloadComplete(t){this.bootScene(t.scene)},update:function update(t,r){this.processQueue(),this.isProcessing=!0;for(var o=this.scenes.length-1;o>=0;o--){var a=this.scenes[o].sys;a.settings.status>h.START&&a.settings.status<=h.RUNNING&&a.step(t,r)}},render:function render(t){for(var r=0;r<this.scenes.length;r++){var o=this.scenes[r].sys;o.settings.visible&&o.settings.status>=h.LOADING&&o.settings.status<h.SLEEPING&&o.render(t)}this.isProcessing=!1},create:function create(t){var r=t.sys,o=r.settings;t.create&&(o.status=h.CREATING,t.create.call(t,o.data),o.status===h.DESTROYED)||(o.isTransition&&r.events.emit(d.TRANSITION_START,o.transitionFrom,o.transitionDuration),t.update&&(r.sceneUpdate=t.update),o.status=h.RUNNING,r.events.emit(d.CREATE,t))},createSceneFromFunction:function createSceneFromFunction(t,r){var o=new r;if(o instanceof O){var a=o.sys.settings.key;if(""!==a&&(t=a),this.keys.hasOwnProperty(t))throw new Error("Cannot add a Scene with duplicate key: "+t);return this.createSceneFromInstance(t,o)}return o.sys=new D(o),o.sys.settings.key=t,o.sys.init(this.game),o},createSceneFromInstance:function createSceneFromInstance(t,r){return""===r.sys.settings.key&&(r.sys.settings.key=t),r.sys.init(this.game),r},createSceneFromObject:function createSceneFromObject(t,r){var o=new O(r),a=o.sys.settings.key;""!==a?t=a:o.sys.settings.key=t,o.sys.init(this.game);for(var h=["init","preload","create","update","render"],d=0;d<h.length;d++){var T=S(r,h[d],null);T&&(o[h[d]]=T)}if(r.hasOwnProperty("extend"))for(var A in r.extend)if(r.extend.hasOwnProperty(A)){var P=r.extend[A];"data"===A&&o.hasOwnProperty("data")&&"object"===_typeof(P)?o.data.merge(P):"sys"!==A&&(o[A]=P)}return o},getKey:function getKey(t,r){if(t||(t="default"),"function"==typeof r)return t;if(r instanceof O?t=r.sys.settings.key:"object"===_typeof(r)&&r.hasOwnProperty("key")&&(t=r.key),this.keys.hasOwnProperty(t))throw new Error("Cannot add a Scene with duplicate key: "+t);return t},getScenes:function getScenes(t,r){void 0===t&&(t=!0),void 0===r&&(r=!1);for(var o=[],a=this.scenes,h=0;h<a.length;h++){var d=a[h];d&&(!t||t&&d.sys.isActive())&&o.push(d)}return r?o.reverse():o},getScene:function getScene(t){if("string"==typeof t){if(this.keys[t])return this.keys[t]}else for(var r=0;r<this.scenes.length;r++)if(t===this.scenes[r])return t;return null},isActive:function isActive(t){var r=this.getScene(t);return r?r.sys.isActive():null},isPaused:function isPaused(t){var r=this.getScene(t);return r?r.sys.isPaused():null},isVisible:function isVisible(t){var r=this.getScene(t);return r?r.sys.isVisible():null},isSleeping:function isSleeping(t){var r=this.getScene(t);return r?r.sys.isSleeping():null},pause:function pause(t,r){var o=this.getScene(t);return o&&o.sys.pause(r),this},resume:function resume(t,r){var o=this.getScene(t);return o&&o.sys.resume(r),this},sleep:function sleep(t,r){var o=this.getScene(t);return o&&!o.sys.isTransitioning()&&o.sys.sleep(r),this},wake:function wake(t,r){var o=this.getScene(t);return o&&o.sys.wake(r),this},run:function run(t,r){var o=this.getScene(t);if(!o){for(var a=0;a<this._pending.length;a++)if(this._pending[a].key===t){this.queueOp("start",t,r);break}return this}o.sys.isSleeping()?o.sys.wake(r):o.sys.isPaused()?o.sys.resume(r):this.start(t,r)},start:function start(t,r){if(!this.isBooted)return this._data[t]={autoStart:!0,data:r},this;var o=this.getScene(t);if(o){var a,d=o.sys;if(d.isActive()||d.isPaused())d.shutdown(),d.sceneUpdate=P,d.start(r);else if(d.sceneUpdate=P,d.start(r),d.load&&(a=d.load),a&&d.settings.hasOwnProperty("pack")&&(a.reset(),a.addPack({payload:d.settings.pack})))return d.settings.status=h.LOADING,a.once(A.COMPLETE,this.payloadComplete,this),a.start(),this;this.bootScene(o)}return this},stop:function stop(t,r){var o=this.getScene(t);return o&&!o.sys.isTransitioning()&&o.sys.shutdown(r),this},switch:function _switch(t,r){var o=this.getScene(t),a=this.getScene(r);return o&&a&&o!==a&&(this.sleep(t),this.isSleeping(r)?this.wake(r):this.start(r)),this},getAt:function getAt(t){return this.scenes[t]},getIndex:function getIndex(t){var r=this.getScene(t);return this.scenes.indexOf(r)},bringToTop:function bringToTop(t){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:t,keyB:null});else{var r=this.getIndex(t);if(-1!==r&&r<this.scenes.length){var o=this.getScene(t);this.scenes.splice(r,1),this.scenes.push(o)}}return this},sendToBack:function sendToBack(t){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:t,keyB:null});else{var r=this.getIndex(t);if(-1!==r&&r>0){var o=this.getScene(t);this.scenes.splice(r,1),this.scenes.unshift(o)}}return this},moveDown:function moveDown(t){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:t,keyB:null});else{var r=this.getIndex(t);if(r>0){var o=r-1,a=this.getScene(t),h=this.getAt(o);this.scenes[r]=h,this.scenes[o]=a}}return this},moveUp:function moveUp(t){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:t,keyB:null});else{var r=this.getIndex(t);if(r<this.scenes.length-1){var o=r+1,a=this.getScene(t),h=this.getAt(o);this.scenes[r]=h,this.scenes[o]=a}}return this},moveAbove:function moveAbove(t,r){if(t===r)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:t,keyB:r});else{var o=this.getIndex(t),a=this.getIndex(r);if(-1!==o&&-1!==a){var h=this.getAt(a);this.scenes.splice(a,1),this.scenes.splice(o+1,0,h)}}return this},moveBelow:function moveBelow(t,r){if(t===r)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:t,keyB:r});else{var o=this.getIndex(t),a=this.getIndex(r);if(-1!==o&&-1!==a){var h=this.getAt(a);this.scenes.splice(a,1),0===o?this.scenes.unshift(h):this.scenes.splice(o,0,h)}}return this},queueOp:function queueOp(t,r,o){return this._queue.push({op:t,keyA:r,keyB:o}),this},swapPosition:function swapPosition(t,r){if(t===r)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:t,keyB:r});else{var o=this.getIndex(t),a=this.getIndex(r);if(o!==a&&-1!==o&&-1!==a){var h=this.getAt(o);this.scenes[o]=this.scenes[a],this.scenes[a]=h}}return this},dump:function dump(){for(var t=[],r=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],o=0;o<this.scenes.length;o++){var a=this.scenes[o].sys,d=!a.settings.visible||a.settings.status!==h.RUNNING&&a.settings.status!==h.PAUSED?"[-] ":"[*] ";d+=a.settings.key+" ("+r[a.settings.status]+")",t.push(d)}console.log(t.join("\n"))},destroy:function destroy(){for(var t=0;t<this.scenes.length;t++)this.scenes[t].sys.destroy();this.update=P,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});t.exports=L},function(t,r,o){var a=o(0),h=o(204),d=new a({initialize:function Scene(t){this.sys=new h(this,t),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function update(){}});t.exports=d},function(t,r,o){var a=o(2),h=o(205);t.exports=function GetPhysicsPlugins(t){var r=t.game.config.defaultPhysicsSystem,o=a(t.settings,"physics",!1);if(r||o){var d=[];if(r&&d.push(h(r+"Physics")),o)for(var T in o)T=h(T.concat("Physics")),-1===d.indexOf(T)&&d.push(T);return d}}},function(t,r,o){var a=o(2);t.exports=function GetScenePlugins(t){var r=t.plugins.getDefaultScenePlugins(),o=a(t.settings,"plugins",!1);return Array.isArray(o)?o:r||[]}},function(t,r,o){var a=o(144),h=o(6),d=o(127),T=o(978),S={create:function create(t){return"string"==typeof t?t={key:t}:void 0===t&&(t={}),{status:a.PENDING,key:h(t,"key",""),active:h(t,"active",!1),visible:h(t,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:h(t,"pack",!1),cameras:h(t,"cameras",null),map:h(t,"map",d(T,h(t,"mapAdd",{}))),physics:h(t,"physics",{}),loader:h(t,"loader",{}),plugins:h(t,"plugins",!1),input:h(t,"input",{})}}};t.exports=S},function(t,r,o){var a=o(31),h=o(423),d=o(0),T=o(38),S=o(33),A=o(9),P=o(106),O=o(22),D=o(388),L=o(6),I=o(425),B=o(206),N=new d({Extends:A,initialize:function TextureManager(t){A.call(this),this.game=t,this.name="TextureManager",this.list={},this._tempCanvas=a.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,t.events.once(O.BOOT,this.boot,this)},boot:function boot(){this._pending=3,this.on(P.LOAD,this.updatePending,this),this.on(P.ERROR,this.updatePending,this);var t=this.game.config;this.addBase64("__DEFAULT",t.defaultImage),this.addBase64("__MISSING",t.missingImage),this.addBase64("__WHITE",t.whiteImage),this.game.events.once(O.DESTROY,this.destroy,this)},updatePending:function updatePending(){this._pending--,0===this._pending&&(this.off(P.LOAD),this.off(P.ERROR),this.emit(P.READY))},checkKey:function checkKey(t){return!this.exists(t)||(console.error("Texture key already in use: "+t),!1)},remove:function remove(t){if("string"==typeof t){if(!this.exists(t))return console.warn("No texture found matching key: "+t),this;t=this.get(t)}return this.list.hasOwnProperty(t.key)&&(t.destroy(),this.emit(P.REMOVE,t.key)),this},removeKey:function removeKey(t){return this.list.hasOwnProperty(t)&&delete this.list[t],this},addBase64:function addBase64(t,r){if(this.checkKey(t)){var o=this,a=new Image;a.onerror=function(){o.emit(P.ERROR,t)},a.onload=function(){var r=o.create(t,a);I.Image(r,0),o.emit(P.ADD,t,r),o.emit(P.LOAD,t,r)},a.src=r}return this},getBase64:function getBase64(t,r,o,h){void 0===o&&(o="image/png"),void 0===h&&(h=.92);var d="",T=this.getFrame(t,r);if(T&&(T.source.isRenderTexture||T.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(T){var S=T.canvasData,A=a.create2D(this,S.width,S.height);A.getContext("2d").drawImage(T.source.image,S.x,S.y,S.width,S.height,0,0,S.width,S.height),d=A.toDataURL(o,h),a.remove(A)}return d},addImage:function addImage(t,r,o){var a=null;return this.checkKey(t)&&(a=this.create(t,r),I.Image(a,0),o&&a.setDataSource(o),this.emit(P.ADD,t,a)),a},addGLTexture:function addGLTexture(t,r,o,a){var h=null;return this.checkKey(t)&&(void 0===o&&(o=r.width),void 0===a&&(a=r.height),(h=this.create(t,r,o,a)).add("__BASE",0,0,0,o,a),this.emit(P.ADD,t,h)),h},addRenderTexture:function addRenderTexture(t,r){var o=null;return this.checkKey(t)&&((o=this.create(t,r)).add("__BASE",0,0,0,r.width,r.height),this.emit(P.ADD,t,o)),o},generate:function generate(t,r){if(this.checkKey(t)){var o=a.create(this,1,1);return r.canvas=o,D(r),this.addCanvas(t,o)}return null},createCanvas:function createCanvas(t,r,o){if(void 0===r&&(r=256),void 0===o&&(o=256),this.checkKey(t)){var h=a.create(this,r,o,S.CANVAS,!0);return this.addCanvas(t,h)}return null},addCanvas:function addCanvas(t,r,o){void 0===o&&(o=!1);var a=null;return o?a=new h(this,t,r,r.width,r.height):this.checkKey(t)&&(a=new h(this,t,r,r.width,r.height),this.list[t]=a,this.emit(P.ADD,t,a)),a},addAtlas:function addAtlas(t,r,o,a){return Array.isArray(o.textures)||Array.isArray(o.frames)?this.addAtlasJSONArray(t,r,o,a):this.addAtlasJSONHash(t,r,o,a)},addAtlasJSONArray:function addAtlasJSONArray(t,r,o,a){var h=null;if(this.checkKey(t)){if(h=this.create(t,r),Array.isArray(o))for(var d=1===o.length,T=0;T<h.source.length;T++){var S=d?o[0]:o[T];I.JSONArray(h,T,S)}else I.JSONArray(h,0,o);a&&h.setDataSource(a),this.emit(P.ADD,t,h)}return h},addAtlasJSONHash:function addAtlasJSONHash(t,r,o,a){var h=null;if(this.checkKey(t)){if(h=this.create(t,r),Array.isArray(o))for(var d=0;d<o.length;d++)I.JSONHash(h,d,o[d]);else I.JSONHash(h,0,o);a&&h.setDataSource(a),this.emit(P.ADD,t,h)}return h},addAtlasXML:function addAtlasXML(t,r,o,a){var h=null;return this.checkKey(t)&&(h=this.create(t,r),I.AtlasXML(h,0,o),a&&h.setDataSource(a),this.emit(P.ADD,t,h)),h},addUnityAtlas:function addUnityAtlas(t,r,o,a){var h=null;return this.checkKey(t)&&(h=this.create(t,r),I.UnityYAML(h,0,o),a&&h.setDataSource(a),this.emit(P.ADD,t,h)),h},addSpriteSheet:function addSpriteSheet(t,r,o){var a=null;if(this.checkKey(t)){var h=(a=this.create(t,r)).source[0].width,d=a.source[0].height;I.SpriteSheet(a,0,0,0,h,d,o),this.emit(P.ADD,t,a)}return a},addSpriteSheetFromAtlas:function addSpriteSheetFromAtlas(t,r){if(!this.checkKey(t))return null;var o=L(r,"atlas",null),a=L(r,"frame",null);if(o&&a){var h=this.get(o).get(a);if(h){var d=this.create(t,h.source.image);return h.trimmed?I.SpriteSheetFromAtlas(d,h,r):I.SpriteSheet(d,0,h.cutX,h.cutY,h.cutWidth,h.cutHeight,r),this.emit(P.ADD,t,d),d}}},create:function create(t,r,o,a){var h=null;return this.checkKey(t)&&(h=new B(this,t,r,o,a),this.list[t]=h),h},exists:function exists(t){return this.list.hasOwnProperty(t)},get:function get(t){return void 0===t&&(t="__DEFAULT"),this.list[t]?this.list[t]:t instanceof B?t:this.list.__MISSING},cloneFrame:function cloneFrame(t,r){if(this.list[t])return this.list[t].get(r).clone()},getFrame:function getFrame(t,r){if(this.list[t])return this.list[t].get(r)},getTextureKeys:function getTextureKeys(){var t=[];for(var r in this.list)"__DEFAULT"!==r&&"__MISSING"!==r&&t.push(r);return t},getPixel:function getPixel(t,r,o,a){var h=this.getFrame(o,a);if(h){t-=h.x,r-=h.y;var d=h.data.cut;if(t+=d.x,r+=d.y,t>=d.x&&t<d.r&&r>=d.y&&r<d.b){var S=this._tempContext;S.clearRect(0,0,1,1),S.drawImage(h.source.image,t,r,1,1,0,0,1,1);var A=S.getImageData(0,0,1,1);return new T(A.data[0],A.data[1],A.data[2],A.data[3])}}return null},getPixelAlpha:function getPixelAlpha(t,r,o,a){var h=this.getFrame(o,a);if(h){t-=h.x,r-=h.y;var d=h.data.cut;if(t+=d.x,r+=d.y,t>=d.x&&t<d.r&&r>=d.y&&r<d.b){var T=this._tempContext;return T.clearRect(0,0,1,1),T.drawImage(h.source.image,t,r,1,1,0,0,1,1),T.getImageData(0,0,1,1).data[3]}}return null},setTexture:function setTexture(t,r,o){return this.list[r]&&(t.texture=this.list[r],t.frame=t.texture.get(o)),t},renameTexture:function renameTexture(t,r){var o=this.get(t);return!(!o||t===r||(o.key=r,this.list[r]=o,delete this.list[t],0))},each:function each(t,r){for(var o=[null],a=1;a<arguments.length;a++)o.push(arguments[a]);for(var h in this.list)o[0]=this.list[h],t.apply(r,o)},destroy:function destroy(){for(var t in this.list)this.list[t].destroy();this.list={},this.game=null,a.remove(this._tempCanvas)}});t.exports=N},function(t,r,o){var a=o(0),h=o(18),d=o(38),T=o(33),S=o(138),A=o(206),P=new a({Extends:A,initialize:function CanvasTexture(t,r,o,a,h){A.call(this,t,r,o,a,h),this.add("__BASE",0,0,0,a,h),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=a,this.height=h,this.imageData=this.context.getImageData(0,0,a,h),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function update(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===T.WEBGL&&this.refresh(),this},draw:function draw(t,r,o){return this.context.drawImage(o,t,r),this.update()},drawFrame:function drawFrame(t,r,o,a){void 0===o&&(o=0),void 0===a&&(a=0);var h=this.manager.getFrame(t,r);if(h){var d=h.canvasData,T=h.cutWidth,S=h.cutHeight,A=h.source.resolution;return this.context.drawImage(h.source.image,d.x,d.y,T,S,o,a,T/A,S/A),this.update()}return this},setPixel:function setPixel(t,r,o,a,h,d){if(void 0===d&&(d=255),t=Math.abs(Math.floor(t)),r=Math.abs(Math.floor(r)),this.getIndex(t,r)>-1){var T=this.context.getImageData(t,r,1,1);T.data[0]=o,T.data[1]=a,T.data[2]=h,T.data[3]=d,this.context.putImageData(T,t,r)}return this},putData:function putData(t,r,o,a,h,d,T){return void 0===a&&(a=0),void 0===h&&(h=0),void 0===d&&(d=t.width),void 0===T&&(T=t.height),this.context.putImageData(t,r,o,a,h,d,T),this},getData:function getData(t,r,o,a){return t=h(Math.floor(t),0,this.width-1),r=h(Math.floor(r),0,this.height-1),o=h(o,1,this.width-t),a=h(a,1,this.height-r),this.context.getImageData(t,r,o,a)},getPixel:function getPixel(t,r,o){o||(o=new d);var a=this.getIndex(t,r);if(a>-1){var h=this.data,T=h[a+0],S=h[a+1],A=h[a+2],P=h[a+3];o.setTo(T,S,A,P)}return o},getPixels:function getPixels(t,r,o,a){void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=this.width),void 0===a&&(a=o),t=Math.abs(Math.round(t)),r=Math.abs(Math.round(r));for(var T=h(t,0,this.width),S=h(t+o,0,this.width),A=h(r,0,this.height),P=h(r+a,0,this.height),O=new d,D=[],L=A;L<P;L++){for(var I=[],B=T;B<S;B++)O=this.getPixel(B,L,O),I.push({x:B,y:L,color:O.color,alpha:O.alphaGL});D.push(I)}return D},getIndex:function getIndex(t,r){return t=Math.abs(Math.round(t)),r=Math.abs(Math.round(r)),t<this.width&&r<this.height?4*(t+r*this.width):-1},refresh:function refresh(){return this._source.update(),this},getCanvas:function getCanvas(){return this.canvas},getContext:function getContext(){return this.context},clear:function clear(t,r,o,a){return void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=this.width),void 0===a&&(a=this.height),this.context.clearRect(t,r,o,a),this.update()},setSize:function setSize(t,r){return void 0===r&&(r=t),t===this.width&&r===this.height||(this.canvas.width=t,this.canvas.height=r,this._source.width=t,this._source.height=r,this._source.isPowerOf2=S(t,r),this.frames.__BASE.setSize(t,r,0,0),this.width=t,this.height=r,this.refresh()),this},destroy:function destroy(){A.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});t.exports=P},function(t,r,o){var a=o(31),h=o(0),d=o(138),T=o(168),S=new h({initialize:function TextureSource(t,r,o,a,h){void 0===h&&(h=!1);var S=t.manager.game;this.renderer=S.renderer,this.texture=t,this.source=r,this.image=r,this.compressionAlgorithm=null,this.resolution=1,this.width=o||r.naturalWidth||r.videoWidth||r.width||0,this.height=a||r.naturalHeight||r.videoHeight||r.height||0,this.scaleMode=T.DEFAULT,this.isCanvas=r instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&r instanceof HTMLVideoElement,this.isRenderTexture="RenderTexture"===r.type,this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&r instanceof WebGLTexture,this.isPowerOf2=d(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=h,this.init(S)},init:function init(t){var r=this.renderer;r&&(r.gl?this.isCanvas?this.glTexture=r.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=r.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=r.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=r.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),t.config.antialias||this.setFilter(1)},setFilter:function setFilter(t){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,t),this.scaleMode=t},setFlipY:function setFlipY(t){return void 0===t&&(t=!0),this.flipY=t,this},update:function update(){var t=this.renderer.gl;t&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):t&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function destroy(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&a.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});t.exports=S},function(t,r,o){t.exports={AtlasXML:o(979),Canvas:o(980),Image:o(981),JSONArray:o(982),JSONHash:o(983),SpriteSheet:o(984),SpriteSheetFromAtlas:o(985),UnityYAML:o(986)}},function(t,r,o){var a=o(427),h=o(430),d=o(432),T={create:function create(t){var r=t.config.audio,o=t.device.audio;return r.noAudio||!o.webAudio&&!o.audioData?new h(t):o.webAudio&&!r.disableWebAudio?new d(t):new a(t)}};t.exports=T},function(t,r,o){var a=o(145),h=o(0),d=o(70),T=o(429),S=new h({Extends:a,initialize:function HTML5AudioSoundManager(t){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,a.call(this,t)},add:function add(t,r){var o=new T(this,t,r);return this.sounds.push(o),o},unlock:function unlock(){this.locked=!1;var t=this;if(this.game.cache.audio.entries.each((function(r,o){for(var a=0;a<o.length;a++)if("true"===o[a].dataset.locked)return t.locked=!0,!1;return!0})),this.locked){var r=!1,o=function detectMove(){r=!0},unlock=function unlock(){if(r)r=!1;else{document.body.removeEventListener("touchmove",o),document.body.removeEventListener("touchend",unlock);var a=[];if(t.game.cache.audio.entries.each((function(t,r){for(var o=0;o<r.length;o++){var h=r[o];"true"===h.dataset.locked&&a.push(h)}return!0})),0!==a.length){var h=a[a.length-1];h.oncanplaythrough=function(){h.oncanplaythrough=null,a.forEach((function(t){t.dataset.locked="false"})),t.unlocked=!0},a.forEach((function(t){t.load()}))}}};this.once(d.UNLOCKED,(function(){for(this.forEachActiveSound((function(t){null===t.currentMarker&&0===t.duration&&(t.duration=t.tags[0].duration),t.totalDuration=t.tags[0].duration}));this.lockedActionsQueue.length;){var t=this.lockedActionsQueue.shift();t.sound[t.prop].apply?t.sound[t.prop].apply(t.sound,t.value||[]):t.sound[t.prop]=t.value}}),this),document.body.addEventListener("touchmove",o,!1),document.body.addEventListener("touchend",unlock,!1)}},onBlur:function onBlur(){this.forEachActiveSound((function(t){t.isPlaying&&(this.onBlurPausedSounds.push(t),t.onBlur())}))},onFocus:function onFocus(){this.onBlurPausedSounds.forEach((function(t){t.onFocus()})),this.onBlurPausedSounds.length=0},destroy:function destroy(){a.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function isLocked(t,r,o){return"true"===t.tags[0].dataset.locked&&(this.lockedActionsQueue.push({sound:t,prop:r,value:o}),!0)},setMute:function setMute(t){return this.mute=t,this},mute:{get:function get(){return this._mute},set:function set(t){this._mute=t,this.forEachActiveSound((function(t){t.updateMute()})),this.emit(d.GLOBAL_MUTE,this,t)}},setVolume:function setVolume(t){return this.volume=t,this},volume:{get:function get(){return this._volume},set:function set(t){this._volume=t,this.forEachActiveSound((function(t){t.updateVolume()})),this.emit(d.GLOBAL_VOLUME,this,t)}}});t.exports=S},function(t,r,o){var a=o(78);t.exports=function GetFirst(t,r,o,h,d){if(void 0===h&&(h=0),void 0===d&&(d=t.length),a(t,h,d))for(var T=h;T<d;T++){var S=t[T];if(!r||r&&void 0===o&&S.hasOwnProperty(r)||r&&void 0!==o&&S[r]===o)return S}return null}},function(t,r,o){var a=o(146),h=o(0),d=o(70),T=o(18),S=new h({Extends:a,initialize:function HTML5AudioSound(t,r,o){if(void 0===o&&(o={}),this.tags=t.game.cache.audio.get(r),!this.tags)throw new Error('There is no audio asset with key "'+r+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,a.call(this,t,r,o)},play:function play(t,r){return!(this.manager.isLocked(this,"play",[t,r])||!a.prototype.play.call(this,t,r)||!this.pickAndPlayAudioTag()||(this.emit(d.PLAY,this),0))},pause:function pause(){return!(this.manager.isLocked(this,"pause")||this.startTime>0||!a.prototype.pause.call(this)||(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(d.PAUSE,this),0))},resume:function resume(){return!(this.manager.isLocked(this,"resume")||this.startTime>0||!a.prototype.resume.call(this)||!this.pickAndPlayAudioTag()||(this.emit(d.RESUME,this),0))},stop:function stop(){return!this.manager.isLocked(this,"stop")&&!!a.prototype.stop.call(this)&&(this.stopAndReleaseAudioTag(),this.emit(d.STOP,this),!0)},pickAndPlayAudioTag:function pickAndPlayAudioTag(){if(!this.pickAudioTag())return this.reset(),!1;var t=this.currentConfig.seek,r=this.currentConfig.delay,o=(this.currentMarker?this.currentMarker.start:0)+t;return this.previousTime=o,this.audio.currentTime=o,this.applyConfig(),0===r?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+1e3*r,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function pickAudioTag(){if(this.audio)return!0;for(var t=0;t<this.tags.length;t++){var r=this.tags[t];if("false"===r.dataset.used)return r.dataset.used="true",this.audio=r,!0}if(!this.manager.override)return!1;var o=[];this.manager.forEachActiveSound((function(t){t.key===this.key&&t.audio&&o.push(t)}),this),o.sort((function(t,r){return t.loop===r.loop?r.seek/r.duration-t.seek/t.duration:t.loop?1:-1}));var a=o[0];return this.audio=a.audio,a.reset(),a.audio=null,a.startTime=0,a.previousTime=0,!0},playCatchPromise:function playCatchPromise(){var t=this.audio.play();t&&t.catch((function(t){console.warn(t)}))},stopAndReleaseAudioTag:function stopAndReleaseAudioTag(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function reset(){a.prototype.stop.call(this)},onBlur:function onBlur(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function onFocus(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function update(t){if(this.isPlaying)if(this.startTime>0)this.startTime<t-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,t-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());else{var r=this.currentMarker?this.currentMarker.start:0,o=r+this.duration,a=this.audio.currentTime;if(this.currentConfig.loop)a>=o-this.manager.loopEndOffset?(this.audio.currentTime=r+Math.max(0,a-o),a=this.audio.currentTime):a<r&&(this.audio.currentTime+=r,a=this.audio.currentTime),a<this.previousTime&&this.emit(d.LOOPED,this);else if(a>=o)return this.reset(),this.stopAndReleaseAudioTag(),void this.emit(d.COMPLETE,this);this.previousTime=a}},destroy:function destroy(){a.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function updateMute(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function updateVolume(){this.audio&&(this.audio.volume=T(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function calculateRate(){a.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function get(){return this.currentConfig.mute},set:function set(t){this.currentConfig.mute=t,this.manager.isLocked(this,"mute",t)||(this.updateMute(),this.emit(d.MUTE,this,t))}},setMute:function setMute(t){return this.mute=t,this},volume:{get:function get(){return this.currentConfig.volume},set:function set(t){this.currentConfig.volume=t,this.manager.isLocked(this,"volume",t)||(this.updateVolume(),this.emit(d.VOLUME,this,t))}},setVolume:function setVolume(t){return this.volume=t,this},rate:{get:function get(){return this.currentConfig.rate},set:function set(t){this.currentConfig.rate=t,this.manager.isLocked(this,d.RATE,t)||(this.calculateRate(),this.emit(d.RATE,this,t))}},setRate:function setRate(t){return this.rate=t,this},detune:{get:function get(){return this.currentConfig.detune},set:function set(t){this.currentConfig.detune=t,this.manager.isLocked(this,d.DETUNE,t)||(this.calculateRate(),this.emit(d.DETUNE,this,t))}},setDetune:function setDetune(t){return this.detune=t,this},seek:{get:function get(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function set(t){this.manager.isLocked(this,"seek",t)||this.startTime>0||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.isPlaying?(this.previousTime=t,this.audio.currentTime=t):this.isPaused&&(this.currentConfig.seek=t),this.emit(d.SEEK,this,t))}},setSeek:function setSeek(t){return this.seek=t,this},loop:{get:function get(){return this.currentConfig.loop},set:function set(t){this.currentConfig.loop=t,this.manager.isLocked(this,"loop",t)||(this.audio&&(this.audio.loop=t),this.emit(d.LOOP,this,t))}},setLoop:function setLoop(t){return this.loop=t,this},pan:{get:function get(){return this.currentConfig.pan},set:function set(t){this.currentConfig.pan=t,this.emit(d.PAN,this,t)}},setPan:function setPan(t){return this.pan=t,this}});t.exports=S},function(t,r,o){var a=o(145),h=o(0),d=o(9),T=o(431),S=o(1),A=new h({Extends:d,initialize:function NoAudioSoundManager(t){d.call(this),this.game=t,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function add(t,r){var o=new T(this,t,r);return this.sounds.push(o),o},addAudioSprite:function addAudioSprite(t,r){var o=this.add(t,r);return o.spritemap={},o},play:function play(t,r){return!1},playAudioSprite:function playAudioSprite(t,r,o){return!1},remove:function remove(t){return a.prototype.remove.call(this,t)},removeByKey:function removeByKey(t){return a.prototype.removeByKey.call(this,t)},pauseAll:S,resumeAll:S,stopAll:S,update:S,setRate:S,setDetune:S,setMute:S,setVolume:S,forEachActiveSound:function forEachActiveSound(t,r){a.prototype.forEachActiveSound.call(this,t,r)},destroy:function destroy(){a.prototype.destroy.call(this)}});t.exports=A},function(t,r,o){var a=o(146),h=o(0),d=o(9),T=o(17),S=function returnFalse(){return!1},A=function returnThis(){return this},P=new h({Extends:d,initialize:function NoAudioSound(t,r,o){void 0===o&&(o={}),d.call(this),this.manager=t,this.key=r,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=T({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},o),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:S,updateMarker:S,removeMarker:function returnNull(){return null},play:S,pause:S,resume:S,stop:S,destroy:function destroy(){a.prototype.destroy.call(this)},setMute:A,setVolume:A,setRate:A,setDetune:A,setSeek:A,setLoop:A,setPan:A});t.exports=P},function(t,r,o){var a=o(433),h=o(145),d=o(0),T=o(70),S=o(22),A=o(434),P=new d({Extends:h,initialize:function WebAudioSoundManager(t){this.context=this.createAudioContext(t),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked="suspended"===this.context.state&&("ontouchstart"in window||"onclick"in window),h.call(this,t),this.locked&&t.isBooted?this.unlock():t.events.once(S.BOOT,this.unlock,this)},createAudioContext:function createAudioContext(t){var r=t.config.audio;return r.context?(r.context.resume(),r.context):window.hasOwnProperty("AudioContext")?new AudioContext:window.hasOwnProperty("webkitAudioContext")?new window.webkitAudioContext:void 0},setAudioContext:function setAudioContext(t){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=t,this.masterMuteNode=t.createGain(),this.masterVolumeNode=t.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(t.destination),this.destination=this.masterMuteNode,this},add:function add(t,r){var o=new A(this,t,r);return this.sounds.push(o),o},decodeAudio:function decodeAudio(t,r){var o;o=Array.isArray(t)?t:[{key:t,data:r}];for(var h=this.game.cache.audio,d=o.length,S=0;S<o.length;S++){var A=o[S],P=A.key,O=A.data;"string"==typeof O&&(O=a(O));var D=function(t,r){h.add(t,r),this.emit(T.DECODED,t),0==--d&&this.emit(T.DECODED_ALL)}.bind(this,P),L=function(t,r){console.error("Error decoding audio: "+t+" - ",r?r.message:""),0==--d&&this.emit(T.DECODED_ALL)}.bind(this,P);this.context.decodeAudioData(O,D,L)}},unlock:function unlock(){var t=this,r=document.body,o=function unlockHandler(){if(t.context&&r){var o=r.removeEventListener;t.context.resume().then((function(){o("touchstart",unlockHandler),o("touchend",unlockHandler),o("click",unlockHandler),o("keydown",unlockHandler),t.unlocked=!0}),(function(){o("touchstart",unlockHandler),o("touchend",unlockHandler),o("click",unlockHandler),o("keydown",unlockHandler)}))}};r&&(r.addEventListener("touchstart",o,!1),r.addEventListener("touchend",o,!1),r.addEventListener("click",o,!1),r.addEventListener("keydown",o,!1))},onBlur:function onBlur(){this.locked||this.context.suspend()},onFocus:function onFocus(){var t=this.context;"suspended"!==t.state&&"interrupted"!==t.state||this.locked||t.resume()},update:function update(t,r){h.prototype.update.call(this,t,r);var o=this.context;o&&"interrupted"===o.state&&o.resume()},destroy:function destroy(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var t=this;this.context.close().then((function(){t.context=null}))}h.prototype.destroy.call(this)},setMute:function setMute(t){return this.mute=t,this},mute:{get:function get(){return 0===this.masterMuteNode.gain.value},set:function set(t){this.masterMuteNode.gain.setValueAtTime(t?0:1,0),this.emit(T.GLOBAL_MUTE,this,t)}},setVolume:function setVolume(t){return this.volume=t,this},volume:{get:function get(){return this.masterVolumeNode.gain.value},set:function set(t){this.masterVolumeNode.gain.setValueAtTime(t,0),this.emit(T.GLOBAL_VOLUME,this,t)}}});t.exports=P},function(t,r){for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=new Uint8Array(256),h=0;h<o.length;h++)a[o.charCodeAt(h)]=h;t.exports=function Base64ToArrayBuffer(t){var r,o,h,d,T=(t=t.substr(t.indexOf(",")+1)).length,S=.75*T,A=0;"="===t[T-1]&&(S--,"="===t[T-2]&&S--);for(var P=new ArrayBuffer(S),O=new Uint8Array(P),D=0;D<T;D+=4)r=a[t.charCodeAt(D)],o=a[t.charCodeAt(D+1)],h=a[t.charCodeAt(D+2)],d=a[t.charCodeAt(D+3)],O[A++]=r<<2|o>>4,O[A++]=(15&o)<<4|h>>2,O[A++]=(3&h)<<6|63&d;return P}},function(t,r,o){var a=o(146),h=o(0),d=o(70),T=new h({Extends:a,initialize:function WebAudioSound(t,r,o){if(void 0===o&&(o={}),this.audioBuffer=t.game.cache.audio.get(r),!this.audioBuffer)throw new Error('Audio key "'+r+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=t.context.createGain(),this.volumeNode=t.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),t.context.createStereoPanner?(this.pannerNode=t.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(t.destination)):this.volumeNode.connect(t.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,a.call(this,t,r,o)},play:function play(t,r){return!!a.prototype.play.call(this,t,r)&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(d.PLAY,this),!0)},pause:function pause(){return!(this.manager.context.currentTime<this.startTime||!a.prototype.pause.call(this)||(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(d.PAUSE,this),0))},resume:function resume(){return!(this.manager.context.currentTime<this.startTime||!a.prototype.resume.call(this)||(this.createAndStartBufferSource(),this.emit(d.RESUME,this),0))},stop:function stop(){return!!a.prototype.stop.call(this)&&(this.stopAndRemoveBufferSource(),this.emit(d.STOP,this),!0)},createAndStartBufferSource:function createAndStartBufferSource(){var t=this.currentConfig.seek,r=this.currentConfig.delay,o=this.manager.context.currentTime+r,a=(this.currentMarker?this.currentMarker.start:0)+t,h=this.duration-t;this.playTime=o-t,this.startTime=o,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,o),Math.max(0,a),Math.max(0,h)),this.resetConfig()},createAndStartLoopBufferSource:function createAndStartLoopBufferSource(){var t=this.getLoopTime(),r=this.currentMarker?this.currentMarker.start:0,o=this.duration;this.loopTime=t,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,t),Math.max(0,r),Math.max(0,o))},createBufferSource:function createBufferSource(){var t=this,r=this.manager.context.createBufferSource();return r.buffer=this.audioBuffer,r.connect(this.muteNode),r.onended=function(r){r.target===t.source&&(t.currentConfig.loop?t.hasLooped=!0:t.hasEnded=!0)},r},stopAndRemoveBufferSource:function stopAndRemoveBufferSource(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function stopAndRemoveLoopBufferSource(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function applyConfig(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),a.prototype.applyConfig.call(this)},update:function update(){this.hasEnded?(this.hasEnded=!1,a.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(d.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(d.LOOPED,this))},destroy:function destroy(){a.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function calculateRate(){a.prototype.calculateRate.call(this);var t=this.manager.context.currentTime;this.source&&"number"==typeof this.totalRate&&this.source.playbackRate.setValueAtTime(this.totalRate,t),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,t)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function getCurrentTime(){for(var t=0,r=0;r<this.rateUpdates.length;r++)t+=((r<this.rateUpdates.length-1?this.rateUpdates[r+1].time:this.manager.context.currentTime-this.playTime)-this.rateUpdates[r].time)*this.rateUpdates[r].rate;return t},getLoopTime:function getLoopTime(){for(var t=0,r=0;r<this.rateUpdates.length-1;r++)t+=(this.rateUpdates[r+1].time-this.rateUpdates[r].time)*this.rateUpdates[r].rate;var o=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+o.time+(this.duration-t)/o.rate},rate:{get:function get(){return this.currentConfig.rate},set:function set(t){this.currentConfig.rate=t,this.calculateRate(),this.emit(d.RATE,this,t)}},setRate:function setRate(t){return this.rate=t,this},detune:{get:function get(){return this.currentConfig.detune},set:function set(t){this.currentConfig.detune=t,this.calculateRate(),this.emit(d.DETUNE,this,t)}},setDetune:function setDetune(t){return this.detune=t,this},mute:{get:function get(){return 0===this.muteNode.gain.value},set:function set(t){this.currentConfig.mute=t,this.muteNode.gain.setValueAtTime(t?0:1,0),this.emit(d.MUTE,this,t)}},setMute:function setMute(t){return this.mute=t,this},volume:{get:function get(){return this.volumeNode.gain.value},set:function set(t){this.currentConfig.volume=t,this.volumeNode.gain.setValueAtTime(t,0),this.emit(d.VOLUME,this,t)}},setVolume:function setVolume(t){return this.volume=t,this},seek:{get:function get(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function set(t){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.currentConfig.seek=t,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(d.SEEK,this,t))}},setSeek:function setSeek(t){return this.seek=t,this},loop:{get:function get(){return this.currentConfig.loop},set:function set(t){this.currentConfig.loop=t,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),t&&this.createAndStartLoopBufferSource()),this.emit(d.LOOP,this,t)}},setLoop:function setLoop(t){return this.loop=t,this},pan:{get:function get(){return this.pannerNode?this.pannerNode.pan.value:0},set:function set(t){this.currentConfig.pan=t,this.pannerNode&&this.pannerNode.pan.setValueAtTime(t,this.manager.context.currentTime),this.emit(d.PAN,this,t)}},setPan:function setPan(t){return this.pan=t,this}});t.exports=T},function(t,r){t.exports=function TransposeMatrix(t){for(var r=t.length,o=t[0].length,a=new Array(o),h=0;h<o;h++){a[h]=new Array(r);for(var d=r-1;d>-1;d--)a[h][d]=t[d][h]}return a}},function(t,r){function swap(t,r,o){var a=t[r];t[r]=t[o],t[o]=a}function defaultCompare(t,r){return t<r?-1:t>r?1:0}t.exports=function QuickSelect(t,r,o,a,h){for(void 0===o&&(o=0),void 0===a&&(a=t.length-1),void 0===h&&(h=defaultCompare);a>o;){if(a-o>600){var d=a-o+1,T=r-o+1,S=Math.log(d),A=.5*Math.exp(2*S/3),P=.5*Math.sqrt(S*A*(d-A)/d)*(T-d/2<0?-1:1);QuickSelect(t,r,Math.max(o,Math.floor(r-T*A/d+P)),Math.min(a,Math.floor(r+(d-T)*A/d+P)),h)}var O=t[r],D=o,L=a;for(swap(t,o,r),h(t[a],O)>0&&swap(t,o,a);D<L;){for(swap(t,D,L),D++,L--;h(t[D],O)<0;)D++;for(;h(t[L],O)>0;)L--}0===h(t[o],O)?swap(t,o,L):swap(t,++L,a),L<=r&&(o=L+1),r<=L&&(a=L-1)}}},function(t,r,o){var a=o(6),h=o(131),d=function BuildChunk(t,r,o){for(var a=[],h=0;h<t.length;h++)for(var d=0;d<r.length;d++)for(var T=0;T<o;T++)a.push({a:t[h],b:r[d]});return a};t.exports=function Range(t,r,o){var T=a(o,"max",0),S=a(o,"qty",1),A=a(o,"random",!1),P=a(o,"randomB",!1),O=a(o,"repeat",0),D=a(o,"yoyo",!1),L=[];if(P&&h(r),-1===O)if(0===T)O=0;else{var I=t.length*r.length*S;D&&(I*=2),O=Math.ceil(T/I)}for(var B=0;B<=O;B++){var N=d(t,r,S);A&&h(N),L=L.concat(N),D&&(N.reverse(),L=L.concat(N))}return T&&L.splice(T),L}},function(t,r,o){t.exports={PROCESS_QUEUE_ADD:o(1041),PROCESS_QUEUE_REMOVE:o(1042)}},function(t,r,o){var a=o(13);t.exports=function BuildGameObjectAnimation(t,r){var o=a(r,"anims",null);if(null===o)return t;if("string"==typeof o)t.anims.play(o);else if("object"===_typeof(o)){var h=t.anims,d=a(o,"key",void 0);if(d){var T=a(o,"startFrame",void 0),S=a(o,"delay",0),A=a(o,"repeat",0),P=a(o,"repeatDelay",0),O=a(o,"yoyo",!1),D=a(o,"play",!1),L=a(o,"delayedPlay",0),I={key:d,delay:S,repeat:A,repeatDelay:P,yoyo:O,startFrame:T};D?h.play(I):L>0?h.playAfterDelay(I,L):h.load(I)}}return t}},function(t,r,o){var a=o(0),h=o(109),d=new a({initialize:function Bob(t,r,o,a,h){this.parent=t,this.x=r,this.y=o,this.frame=a,this.data={},this.tint=16777215,this._visible=h,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function setFrame(t){return void 0===t?this.frame=this.parent.frame:t instanceof h&&t.texture===this.parent.texture?this.frame=t:this.frame=this.parent.texture.get(t),this},resetFlip:function resetFlip(){return this.flipX=!1,this.flipY=!1,this},reset:function reset(t,r,o){return this.x=t,this.y=r,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,o&&this.setFrame(o),this},setPosition:function setPosition(t,r){return this.x=t,this.y=r,this},setFlipX:function setFlipX(t){return this.flipX=t,this},setFlipY:function setFlipY(t){return this.flipY=t,this},setFlip:function setFlip(t,r){return this.flipX=t,this.flipY=r,this},setVisible:function setVisible(t){return this.visible=t,this},setAlpha:function setAlpha(t){return this.alpha=t,this},setTint:function setTint(t){return this.tint=t,this},destroy:function destroy(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function get(){return this._visible},set:function set(t){this.parent.dirty|=this._visible!==t,this._visible=t}},alpha:{get:function get(){return this._alpha},set:function set(t){this.parent.dirty|=this._alpha>0!=t>0,this._alpha=t}}});t.exports=d},function(t,r,o){var a=o(10);t.exports=function Union(t,r,o){void 0===o&&(o=new a);var h=Math.min(t.x,r.x),d=Math.min(t.y,r.y),T=Math.max(t.right,r.right)-h,S=Math.max(t.bottom,r.bottom)-d;return o.setTo(h,d,T,S)}},function(t,r,o){var a=o(0),h=o(11),d=o(1055),T=o(15),S=o(7),A=o(202),P=o(20),O=o(140),D=new a({Extends:T,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.Origin,h.ScrollFactor,h.Transform,h.Visible,d],initialize:function DOMElement(t,r,o,a,h,d){T.call(this,t,"DOMElement"),this.parent=t.sys.game.domContainer,this.cache=t.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new O,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(r,o),"string"==typeof a?"#"===a[0]?this.setElement(a.substr(1),h,d):this.createElement(a,h,d):a&&this.setElement(a,h,d),t.sys.events.on(P.SLEEP,this.handleSceneEvent,this),t.sys.events.on(P.WAKE,this.handleSceneEvent,this)},addedToScene:function addedToScene(){this.scene.sys.updateList.add(this)},removedFromScene:function removedFromScene(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function handleSceneEvent(t){var r=this.node,o=r.style;r&&(o.display=t.settings.visible?"block":"none")},setSkew:function setSkew(t,r){return void 0===t&&(t=0),void 0===r&&(r=t),this.skewX=t,this.skewY=r,this},setPerspective:function setPerspective(t){return this.parent.style.perspective=t+"px",this},perspective:{get:function get(){return parseFloat(this.parent.style.perspective)},set:function set(t){this.parent.style.perspective=t+"px"}},addListener:function addListener(t){if(this.node){t=t.split(" ");for(var r=0;r<t.length;r++)this.node.addEventListener(t[r],this.handler,!1)}return this},removeListener:function removeListener(t){if(this.node){t=t.split(" ");for(var r=0;r<t.length;r++)this.node.removeEventListener(t[r],this.handler)}return this},dispatchNativeEvent:function dispatchNativeEvent(t){this.emit(t.type,t)},createElement:function createElement(t,r,o){return this.setElement(document.createElement(t),r,o)},setElement:function setElement(t,r,o){var a;if(this.removeElement(),"string"==typeof t?("#"===t[0]&&(t=t.substr(1)),a=document.getElementById(t)):"object"===_typeof(t)&&1===t.nodeType&&(a=t),!a)return this;if(this.node=a,r&&S(r))for(var h in r)a.style[h]=r[h];else"string"==typeof r&&(a.style=r);return a.style.zIndex="0",a.style.display="inline",a.style.position="absolute",a.phaser=this,this.parent&&this.parent.appendChild(a),o&&(a.innerText=o),this.updateSize()},createFromCache:function createFromCache(t,r){var o=this.cache.get(t);return o&&this.createFromHTML(o,r),this},createFromHTML:function createFromHTML(t,r){void 0===r&&(r="div"),this.removeElement();var o=document.createElement(r);return this.node=o,o.style.zIndex="0",o.style.display="inline",o.style.position="absolute",o.phaser=this,this.parent&&this.parent.appendChild(o),o.innerHTML=t,this.updateSize()},removeElement:function removeElement(){return this.node&&(A(this.node),this.node=null),this},updateSize:function updateSize(){var t=this.node,r=t.getBoundingClientRect();return this.width=t.clientWidth,this.height=t.clientHeight,this.displayWidth=r.width||0,this.displayHeight=r.height||0,this},getChildByProperty:function getChildByProperty(t,r){if(this.node)for(var o=this.node.querySelectorAll("*"),a=0;a<o.length;a++)if(o[a][t]===r)return o[a];return null},getChildByID:function getChildByID(t){return this.getChildByProperty("id",t)},getChildByName:function getChildByName(t){return this.getChildByProperty("name",t)},setClassName:function setClassName(t){return this.node&&(this.node.className=t,this.updateSize()),this},setText:function setText(t){return this.node&&(this.node.innerText=t,this.updateSize()),this},setHTML:function setHTML(t){return this.node&&(this.node.innerHTML=t,this.updateSize()),this},preUpdate:function preUpdate(){var t=this.parentContainer,r=this.node;r&&t&&!t.willRender()&&(r.style.display="none")},willRender:function willRender(){return!0},preDestroy:function preDestroy(){this.removeElement(),this.scene.sys.events.off(P.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(P.WAKE,this.handleSceneEvent,this)}});t.exports=D},function(t,r,o){var a=o(1056),h=o(15),d=o(25),T=new d,S=new d,A=new d;t.exports=function DOMElementCSSRenderer(t,r,o,d){if(r.node){var P=r.node.style,O=r.scene.sys.settings;if(!P||!O.visible||h.RENDER_MASK!==r.renderFlags||0!==r.cameraFilter&&r.cameraFilter&o.id||r.parentContainer&&!r.parentContainer.willRender())P.display="none";else{var D=r.parentContainer,L=o.alpha*r.alpha;D&&(L*=D.alpha);var I=T,B=S,N=A,G=0,Y=0,X="0%",U="0%";d?(G=r.width*r.scaleX*r.originX,Y=r.height*r.scaleY*r.originY,B.applyITRS(r.x-G,r.y-Y,r.rotation,r.scaleX,r.scaleY),I.copyFrom(o.matrix),I.multiplyWithOffset(d,-o.scrollX*r.scrollFactorX,-o.scrollY*r.scrollFactorY),B.e=r.x-G,B.f=r.y-Y,I.multiply(B,N)):(G=r.width*r.originX,Y=r.height*r.originY,B.applyITRS(r.x-G,r.y-Y,r.rotation,r.scaleX,r.scaleY),I.copyFrom(o.matrix),X=100*r.originX+"%",U=100*r.originY+"%",B.e-=o.scrollX*r.scrollFactorX,B.f-=o.scrollY*r.scrollFactorY,I.multiply(B,N)),r.transformOnly||(P.display="block",P.opacity=L,P.zIndex=r._depth,P.pointerEvents=r.pointerEvents,P.mixBlendMode=a[r._blendMode]),P.transform=N.getCSSMatrix()+" skew("+r.skewX+"rad, "+r.skewY+"rad) rotate3d("+r.rotate3d.x+","+r.rotate3d.y+","+r.rotate3d.z+","+r.rotate3d.w+r.rotate3dAngle+")",P.transformOrigin=X+" "+U}}}},function(t,r,o){var a=o(0),h=o(11),d=o(15),T=o(1060),S=new a({Extends:d,Mixins:[h.Alpha,h.BlendMode,h.Depth,h.Flip,h.Origin,h.ScrollFactor,h.Size,h.Texture,h.Tint,h.Transform,h.Visible,T],initialize:function Extern(t){d.call(this,t,"Extern")},addedToScene:function addedToScene(){this.scene.sys.updateList.add(this)},removedFromScene:function removedFromScene(){this.scene.sys.updateList.remove(this)},preUpdate:function preUpdate(){},render:function render(){}});t.exports=S},function(t,r,o){var a=o(218),h=o(98),d=o(14),T=o(4);t.exports=function GetPoint(t,r,o){void 0===o&&(o=new T);var S=h(r,0,d.PI2);return a(t,S,o)}},function(t,r,o){var a=o(447),h=o(218),d=o(98),T=o(14);t.exports=function GetPoints(t,r,o,S){void 0===S&&(S=[]),!r&&o>0&&(r=a(t)/o);for(var A=0;A<r;A++){var P=d(A/r,0,T.PI2);S.push(h(t,P))}return S}},function(t,r){t.exports=function Circumference(t){var r=t.width/2,o=t.height/2,a=Math.pow(r-o,2)/Math.pow(r+o,2);return Math.PI*(r+o)*(1+3*a/(10+Math.sqrt(4-3*a)))}},function(t,r,o){var a=o(217),h=o(30);t.exports=function GraphicsCanvasRenderer(t,r,o,d,T,S){var A=r.commandBuffer,P=A.length,O=T||t.currentContext;if(0!==P&&h(t,O,r,o,d)){o.addToRenderList(r);var D=1,L=1,I=0,B=0,N=1,G=0,Y=0,X=0;O.beginPath();for(var U=0;U<P;++U)switch(A[U]){case a.ARC:O.arc(A[U+1],A[U+2],A[U+3],A[U+4],A[U+5],A[U+6]),U+=7;break;case a.LINE_STYLE:N=A[U+1],I=A[U+2],D=A[U+3],G=(16711680&I)>>>16,Y=(65280&I)>>>8,X=255&I,O.strokeStyle="rgba("+G+","+Y+","+X+","+D+")",O.lineWidth=N,U+=3;break;case a.FILL_STYLE:B=A[U+1],L=A[U+2],G=(16711680&B)>>>16,Y=(65280&B)>>>8,X=255&B,O.fillStyle="rgba("+G+","+Y+","+X+","+L+")",U+=2;break;case a.BEGIN_PATH:O.beginPath();break;case a.CLOSE_PATH:O.closePath();break;case a.FILL_PATH:S||O.fill();break;case a.STROKE_PATH:S||O.stroke();break;case a.FILL_RECT:S?O.rect(A[U+1],A[U+2],A[U+3],A[U+4]):O.fillRect(A[U+1],A[U+2],A[U+3],A[U+4]),U+=4;break;case a.FILL_TRIANGLE:O.beginPath(),O.moveTo(A[U+1],A[U+2]),O.lineTo(A[U+3],A[U+4]),O.lineTo(A[U+5],A[U+6]),O.closePath(),S||O.fill(),U+=6;break;case a.STROKE_TRIANGLE:O.beginPath(),O.moveTo(A[U+1],A[U+2]),O.lineTo(A[U+3],A[U+4]),O.lineTo(A[U+5],A[U+6]),O.closePath(),S||O.stroke(),U+=6;break;case a.LINE_TO:O.lineTo(A[U+1],A[U+2]),U+=2;break;case a.MOVE_TO:O.moveTo(A[U+1],A[U+2]),U+=2;break;case a.LINE_FX_TO:O.lineTo(A[U+1],A[U+2]),U+=5;break;case a.MOVE_FX_TO:O.moveTo(A[U+1],A[U+2]),U+=5;break;case a.SAVE:O.save();break;case a.RESTORE:O.restore();break;case a.TRANSLATE:O.translate(A[U+1],A[U+2]),U+=2;break;case a.SCALE:O.scale(A[U+1],A[U+2]),U+=2;break;case a.ROTATE:O.rotate(A[U+1]),U+=1;break;case a.GRADIENT_FILL_STYLE:U+=5;break;case a.GRADIENT_LINE_STYLE:U+=6}O.restore()}}},function(t,r,o){var a=o(0),h=o(137),d=o(80),T=o(2),S=o(68),A=new a({initialize:function EmitterOp(t,r,o,a){void 0===a&&(a=!1),this.propertyKey=r,this.propertyValue=o,this.defaultValue=o,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=a,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(t)},loadConfig:function loadConfig(t,r){void 0===t&&(t={}),r&&(this.propertyKey=r),this.propertyValue=T(t,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function toJSON(){return this.propertyValue},onChange:function onChange(t){return this.propertyValue=t,this.setMethods()},setMethods:function setMethods(){var t=this.propertyValue,r=_typeof(t);if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,"number"===r)this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(t))this.onEmit=this.randomStaticValueEmit;else if("function"===r)this.emitOnly?this.onEmit=t:this.onUpdate=t;else if("object"===r&&this.hasBoth(t,"start","end")){this.start=t.start,this.end=t.end;var o=this.has(t,"random");if(o&&(this.onEmit=this.randomRangedValueEmit),this.has(t,"steps"))this.steps=t.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var a=this.has(t,"ease")?t.ease:"Linear";this.ease=d(a,t.easeParams),o||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if("object"===r&&this.hasBoth(t,"min","max"))this.start=t.min,this.end=t.max,this.onEmit=this.randomRangedValueEmit;else if("object"===r&&this.has(t,"random")){var h=t.random;Array.isArray(h)&&(this.start=h[0],this.end=h[1]),this.onEmit=this.randomRangedValueEmit}else"object"===r&&this.hasEither(t,"onEmit","onUpdate")&&(this.has(t,"onEmit")&&(this.onEmit=t.onEmit),this.has(t,"onUpdate")&&(this.onUpdate=t.onUpdate));return this},has:function has(t,r){return t.hasOwnProperty(r)},hasBoth:function hasBoth(t,r,o){return t.hasOwnProperty(r)&&t.hasOwnProperty(o)},hasEither:function hasEither(t,r,o){return t.hasOwnProperty(r)||t.hasOwnProperty(o)},defaultEmit:function defaultEmit(t,r,o){return o},defaultUpdate:function defaultUpdate(t,r,o,a){return a},staticValueEmit:function staticValueEmit(){return this.propertyValue},staticValueUpdate:function staticValueUpdate(){return this.propertyValue},randomStaticValueEmit:function randomStaticValueEmit(){var t=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[t]},randomRangedValueEmit:function randomRangedValueEmit(t,r){var o=h(this.start,this.end);return t&&t.data[r]&&(t.data[r].min=o),o},steppedEmit:function steppedEmit(){var t=this.counter,r=this.counter+(this.end-this.start)/this.steps;return this.counter=S(r,this.start,this.end),t},easedValueEmit:function easedValueEmit(t,r){if(t&&t.data[r]){var o=t.data[r];o.min=this.start,o.max=this.end}return this.start},easeValueUpdate:function easeValueUpdate(t,r,o){var a=t.data[r];return(a.max-a.min)*this.ease(o)+a.min}});t.exports=A},function(t,r,o){var a=o(0),h=o(2),d=new a({initialize:function GravityWell(t,r,o,a,d){if("object"===_typeof(t)){var T=t;t=h(T,"x",0),r=h(T,"y",0),o=h(T,"power",0),a=h(T,"epsilon",100),d=h(T,"gravity",50)}else void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=100),void 0===d&&(d=50);this.x=t,this.y=r,this.active=!0,this._gravity=d,this._power=0,this._epsilon=0,this.power=o,this.epsilon=a},update:function update(t,r){var o=this.x-t.x,a=this.y-t.y,h=o*o+a*a;if(0!==h){var d=Math.sqrt(h);h<this._epsilon&&(h=this._epsilon);var T=this._power*r/(h*d)*100;t.velocityX+=o*T,t.velocityY+=a*T}},epsilon:{get:function get(){return Math.sqrt(this._epsilon)},set:function set(t){this._epsilon=t*t}},power:{get:function get(){return this._power/this._gravity},set:function set(t){this._power=t*this._gravity}},gravity:{get:function get(){return this._gravity},set:function set(t){var r=this.power;this._gravity=t,this.power=r}}});t.exports=d},function(t,r,o){var a=o(0),h=o(36),d=o(50),T=new a({initialize:function Particle(t){this.emitter=t,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function isAlive(){return this.lifeCurrent>0},resetPosition:function resetPosition(){this.x=0,this.y=0},fire:function fire(t,r){var o=this.emitter;this.frame=o.getFrame(),o.emitZone&&o.emitZone.getPoint(this),this.x+=void 0===t?o.x.onEmit(this,"x"):t,this.y+=void 0===r?o.y.onEmit(this,"y"):r,this.life=o.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var a=o.speedX.onEmit(this,"speedX"),T=o.speedY?o.speedY.onEmit(this,"speedY"):a;if(o.radial){var S=h(o.angle.onEmit(this,"angle"));this.velocityX=Math.cos(S)*Math.abs(a),this.velocityY=Math.sin(S)*Math.abs(T)}else if(o.moveTo){var A=o.moveToX.onEmit(this,"moveToX"),P=o.moveToY?o.moveToY.onEmit(this,"moveToY"):A,O=Math.atan2(P-this.y,A-this.x),D=d(this.x,this.y,A,P)/(this.life/1e3);this.velocityX=Math.cos(O)*D,this.velocityY=Math.sin(O)*D}else this.velocityX=a,this.velocityY=T;o.acceleration&&(this.accelerationX=o.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=o.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=o.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=o.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=o.delay.onEmit(this,"delay"),this.scaleX=o.scaleX.onEmit(this,"scaleX"),this.scaleY=o.scaleY?o.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=o.rotate.onEmit(this,"rotate"),this.rotation=h(this.angle),this.bounce=o.bounce.onEmit(this,"bounce"),this.alpha=o.alpha.onEmit(this,"alpha"),this.tint=o.tint.onEmit(this,"tint")},computeVelocity:function computeVelocity(t,r,o,a){var h=this.velocityX,d=this.velocityY,T=this.accelerationX,S=this.accelerationY,A=this.maxVelocityX,P=this.maxVelocityY;h+=t.gravityX*o,d+=t.gravityY*o,T&&(h+=T*o),S&&(d+=S*o),h>A?h=A:h<-A&&(h=-A),d>P?d=P:d<-P&&(d=-P),this.velocityX=h,this.velocityY=d;for(var O=0;O<a.length;O++)a[O].update(this,r,o)},checkBounds:function checkBounds(t){var r=t.bounds,o=-this.bounce;this.x<r.x&&t.collideLeft?(this.x=r.x,this.velocityX*=o):this.x>r.right&&t.collideRight&&(this.x=r.right,this.velocityX*=o),this.y<r.y&&t.collideTop?(this.y=r.y,this.velocityY*=o):this.y>r.bottom&&t.collideBottom&&(this.y=r.bottom,this.velocityY*=o)},update:function update(t,r,o){if(this.delayCurrent>0)return this.delayCurrent-=t,!1;var a=this.emitter,d=1-this.lifeCurrent/this.life;return this.lifeT=d,this.computeVelocity(a,t,r,o),this.x+=this.velocityX*r,this.y+=this.velocityY*r,a.bounds&&this.checkBounds(a),a.deathZone&&a.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=a.scaleX.onUpdate(this,"scaleX",d,this.scaleX),a.scaleY?this.scaleY=a.scaleY.onUpdate(this,"scaleY",d,this.scaleY):this.scaleY=this.scaleX,this.angle=a.rotate.onUpdate(this,"rotate",d,this.angle),this.rotation=h(this.angle),this.alpha=a.alpha.onUpdate(this,"alpha",d,this.alpha),this.tint=a.tint.onUpdate(this,"tint",d,this.tint),this.lifeCurrent-=t,this.lifeCurrent<=0)}});t.exports=T},function(t,r,o){var a=o(35),h=o(0),d=o(11),T=o(453),S=o(454),A=o(449),P=o(2),O=o(210),D=o(455),L=o(126),I=o(451),B=o(456),N=o(10),G=o(79),Y=o(3),X=o(68),U=new h({Mixins:[d.BlendMode,d.Mask,d.ScrollFactor,d.Visible],initialize:function ParticleEmitter(t,r){this.manager=t,this.texture=t.texture,this.frames=[t.defaultFrame],this.defaultFrame=t.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=I,this.x=new A(r,"x",0,!0),this.y=new A(r,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new A(r,"accelerationX",0,!0),this.accelerationY=new A(r,"accelerationY",0,!0),this.maxVelocityX=new A(r,"maxVelocityX",1e4,!0),this.maxVelocityY=new A(r,"maxVelocityY",1e4,!0),this.speedX=new A(r,"speedX",0,!0),this.speedY=new A(r,"speedY",0,!0),this.moveTo=!1,this.moveToX=new A(r,"moveToX",0,!0),this.moveToY=new A(r,"moveToY",0,!0),this.bounce=new A(r,"bounce",0,!0),this.scaleX=new A(r,"scaleX",1),this.scaleY=new A(r,"scaleY",1),this.tint=new A(r,"tint",16777215),this.alpha=new A(r,"alpha",1),this.lifespan=new A(r,"lifespan",1e3,!0),this.angle=new A(r,"angle",{min:0,max:360},!0),this.rotate=new A(r,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new A(r,"quantity",1,!0),this.delay=new A(r,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=a.NORMAL,this.follow=null,this.followOffset=new Y,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,r&&this.fromJSON(r)},fromJSON:function fromJSON(t){if(!t)return this;var r=0,o="";for(r=0;r<this.configFastMap.length;r++)o=this.configFastMap[r],L(t,o)&&(this[o]=P(t,o));for(r=0;r<this.configOpMap.length;r++)o=this.configOpMap[r],L(t,o)&&this[o].loadConfig(t);if(this.acceleration=0!==this.accelerationX.propertyValue||0!==this.accelerationY.propertyValue,this.moveTo=0!==this.moveToX.propertyValue||0!==this.moveToY.propertyValue,L(t,"speed")&&(this.speedX.loadConfig(t,"speed"),this.speedY=null),(D(t,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),L(t,"scale")&&(this.scaleX.loadConfig(t,"scale"),this.scaleY=null),L(t,"callbackScope")){var a=P(t,"callbackScope",null);this.emitCallbackScope=a,this.deathCallbackScope=a}return L(t,"emitZone")&&this.setEmitZone(t.emitZone),L(t,"deathZone")&&this.setDeathZone(t.deathZone),L(t,"bounds")&&this.setBounds(t.bounds),L(t,"followOffset")&&this.followOffset.setFromObject(P(t,"followOffset",0)),L(t,"frame")&&this.setFrame(t.frame),L(t,"reserve")&&this.reserve(t.reserve),this},toJSON:function toJSON(t){void 0===t&&(t={});var r=0,o="";for(r=0;r<this.configFastMap.length;r++)t[o=this.configFastMap[r]]=this[o];for(r=0;r<this.configOpMap.length;r++)this[o=this.configOpMap[r]]&&(t[o]=this[o].toJSON());return this.speedY||(delete t.speedX,t.speed=this.speedX.toJSON()),this.scaleY||(delete t.scaleX,t.scale=this.scaleX.toJSON()),t},startFollow:function startFollow(t,r,o,a){return void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=!1),this.follow=t,this.followOffset.set(r,o),this.trackVisible=a,this},stopFollow:function stopFollow(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function getFrame(){if(1===this.frames.length)return this.defaultFrame;if(this.randomFrame)return O(this.frames);var t=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=X(this.currentFrame+1,0,this._frameLength)),t},setFrame:function setFrame(t,r,o){void 0===r&&(r=!0),void 0===o&&(o=1),this.randomFrame=r,this.frameQuantity=o,this.currentFrame=0,this._frameCounter=0;var a=_typeof(t);if(Array.isArray(t)||"string"===a||"number"===a)this.manager.setEmitterFrames(t,this);else if("object"===a){var h=t;(t=P(h,"frames",null))&&this.manager.setEmitterFrames(t,this);var d=P(h,"cycle",!1);this.randomFrame=!d,this.frameQuantity=P(h,"quantity",o)}return this._frameLength=this.frames.length,1===this._frameLength&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function setRadial(t){return void 0===t&&(t=!0),this.radial=t,this},setPosition:function setPosition(t,r){return this.x.onChange(t),this.y.onChange(r),this},setBounds:function setBounds(t,r,o,a){if("object"===_typeof(t)){var h=t;t=h.x,r=h.y,o=L(h,"w")?h.w:h.width,a=L(h,"h")?h.h:h.height}return this.bounds?this.bounds.setTo(t,r,o,a):this.bounds=new N(t,r,o,a),this},setSpeedX:function setSpeedX(t){return this.speedX.onChange(t),this.radial=!1,this},setSpeedY:function setSpeedY(t){return this.speedY&&(this.speedY.onChange(t),this.radial=!1),this},setSpeed:function setSpeed(t){return this.speedX.onChange(t),this.speedY=null,this.radial=!0,this},setScaleX:function setScaleX(t){return this.scaleX.onChange(t),this},setScaleY:function setScaleY(t){return this.scaleY.onChange(t),this},setScale:function setScale(t){return this.scaleX.onChange(t),this.scaleY=null,this},setGravityX:function setGravityX(t){return this.gravityX=t,this},setGravityY:function setGravityY(t){return this.gravityY=t,this},setGravity:function setGravity(t,r){return this.gravityX=t,this.gravityY=r,this},setAlpha:function setAlpha(t){return this.alpha.onChange(t),this},setTint:function setTint(t){return this.tint.onChange(t),this},setEmitterAngle:function setEmitterAngle(t){return this.angle.onChange(t),this},setAngle:function setAngle(t){return this.angle.onChange(t),this},setLifespan:function setLifespan(t){return this.lifespan.onChange(t),this},setQuantity:function setQuantity(t){return this.quantity.onChange(t),this},setFrequency:function setFrequency(t,r){return this.frequency=t,this._counter=0,r&&this.quantity.onChange(r),this},setEmitZone:function setEmitZone(t){if(void 0===t)this.emitZone=null;else{var r=P(t,"type","random"),o=P(t,"source",null);switch(r){case"random":this.emitZone=new B(o);break;case"edge":var a=P(t,"quantity",1),h=P(t,"stepRate",0),d=P(t,"yoyo",!1),T=P(t,"seamless",!0);this.emitZone=new S(o,a,h,d,T)}}return this},setDeathZone:function setDeathZone(t){if(void 0===t)this.deathZone=null;else{var r=P(t,"type","onEnter"),o=P(t,"source",null);if(o&&"function"==typeof o.contains){var a="onEnter"===r;this.deathZone=new T(o,a)}}return this},reserve:function reserve(t){for(var r=this.dead,o=0;o<t;o++)r.push(new this.particleClass(this));return this},getAliveParticleCount:function getAliveParticleCount(){return this.alive.length},getDeadParticleCount:function getDeadParticleCount(){return this.dead.length},getParticleCount:function getParticleCount(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function atLimit(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function onParticleEmit(t,r){return void 0===t?(this.emitCallback=null,this.emitCallbackScope=null):"function"==typeof t&&(this.emitCallback=t,r&&(this.emitCallbackScope=r)),this},onParticleDeath:function onParticleDeath(t,r){return void 0===t?(this.deathCallback=null,this.deathCallbackScope=null):"function"==typeof t&&(this.deathCallback=t,r&&(this.deathCallbackScope=r)),this},killAll:function killAll(){for(var t=this.dead,r=this.alive;r.length>0;)t.push(r.pop());return this},forEachAlive:function forEachAlive(t,r){for(var o=this.alive,a=o.length,h=0;h<a;++h)t.call(r,o[h],this);return this},forEachDead:function forEachDead(t,r){for(var o=this.dead,a=o.length,h=0;h<a;++h)t.call(r,o[h],this);return this},start:function start(){return this.on=!0,this._counter=0,this},stop:function stop(){return this.on=!1,this},pause:function pause(){return this.active=!1,this},resume:function resume(){return this.active=!0,this},remove:function remove(){return this.manager.removeEmitter(this),this},depthSort:function depthSort(){return G(this.alive,this.depthSortCallback),this},flow:function flow(t,r){return void 0===r&&(r=1),this.frequency=t,this.quantity.onChange(r),this.start()},explode:function explode(t,r,o){return this.frequency=-1,this.emitParticle(t,r,o)},emitParticleAt:function emitParticleAt(t,r,o){return this.emitParticle(o,t,r)},emitParticle:function emitParticle(t,r,o){if(!this.atLimit()){void 0===t&&(t=this.quantity.onEmit());for(var a=this.dead,h=this.follow?this.follow.x+this.followOffset.x:r,d=this.follow?this.follow.y+this.followOffset.y:o,T=0;T<t;T++){var S=a.pop();if(S||(S=new this.particleClass(this)),S.fire(h,d),this.particleBringToTop?this.alive.push(S):this.alive.unshift(S),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,S,this),this.atLimit())break}return S}},preUpdate:function preUpdate(t,r){var o=(r*=this.timeScale)/1e3;this.trackVisible&&(this.visible=this.follow.visible);var a=this.manager.getProcessors(),h=this.alive,d=this.dead,T=0,S=[],A=h.length;for(T=0;T<A;T++){var P=h[T];P.update(r,o,a)&&S.push({index:T,particle:P})}if((A=S.length)>0){var O=this.deathCallback,D=this.deathCallbackScope;for(T=A-1;T>=0;T--){var L=S[T];h.splice(L.index,1),d.push(L.particle),O&&O.call(D,L.particle),L.particle.resetPosition()}}this.on&&(0===this.frequency?this.emitParticle():this.frequency>0&&(this._counter-=r,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function depthSortCallback(t,r){return t.y-r.y}});t.exports=U},function(t,r,o){var a=new(o(0))({initialize:function DeathZone(t,r){this.source=t,this.killOnEnter=r},willKill:function willKill(t){var r=this.source.contains(t.x,t.y);return r&&this.killOnEnter||!r&&!this.killOnEnter}});t.exports=a},function(t,r,o){var a=new(o(0))({initialize:function EdgeZone(t,r,o,a,h){void 0===a&&(a=!1),void 0===h&&(h=!0),this.source=t,this.points=[],this.quantity=r,this.stepRate=o,this.yoyo=a,this.counter=-1,this.seamless=h,this._length=0,this._direction=0,this.updateSource()},updateSource:function updateSource(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var t=this.points[0],r=this.points[this.points.length-1];t.x===r.x&&t.y===r.y&&this.points.pop()}var o=this._length;return this._length=this.points.length,this._length<o&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function changeSource(t){return this.source=t,this.updateSource()},getPoint:function getPoint(t){0===this._direction?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,-1===this.counter&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var r=this.points[this.counter];r&&(t.x=r.x,t.y=r.y)}});t.exports=a},function(t,r){t.exports=function HasAny(t,r){for(var o=0;o<r.length;o++)if(t.hasOwnProperty(r[o]))return!0;return!1}},function(t,r,o){var a=o(0),h=o(3),d=new a({initialize:function RandomZone(t){this.source=t,this._tempVec=new h},getPoint:function getPoint(t){var r=this._tempVec;this.source.getRandomPoint(r),t.x=r.x,t.y=r.y}});t.exports=d},function(t,r,o){var a=o(0),h=o(11),d=o(73),T=new a({Extends:d,Mixins:[h.PathFollower],initialize:function PathFollower(t,r,o,a,h,T){d.call(this,t,o,a,h,T),this.path=r},preUpdate:function preUpdate(t,r){this.anims.update(t,r),this.pathUpdate(t)}});t.exports=T},function(t,r){t.exports=function GetTextSize(t,r,o){var a=t.canvas,h=t.context,d=t.style,T=[],S=0,A=o.length;d.maxLines>0&&d.maxLines<o.length&&(A=d.maxLines),d.syncFont(a,h);for(var P=0;P<A;P++){var O=d.strokeThickness;O+=h.measureText(o[P]).width,d.wordWrap&&(O-=h.measureText(" ").width),T[P]=Math.ceil(O),S=Math.max(S,T[P])}var D=r.fontSize+d.strokeThickness,L=D*A,I=t.lineSpacing;return A>1&&(L+=I*(A-1)),{width:S,height:L,lines:A,lineWidths:T,lineSpacing:I,lineHeight:D}}},function(t,r,o){var a=o(0),h=o(13),d=o(6),T=o(460),S={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|Mqgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},A=new a({initialize:function TextStyle(t,r){this.parent=t,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(r,!1,!0);var o=d(r,"metrics",!1);this.metrics=o?{ascent:d(o,"ascent",0),descent:d(o,"descent",0),fontSize:d(o,"fontSize",0)}:T(this)},setStyle:function setStyle(t,r,o){for(var a in void 0===r&&(r=!0),void 0===o&&(o=!1),t&&t.hasOwnProperty("fontSize")&&"number"==typeof t.fontSize&&(t.fontSize=t.fontSize.toString()+"px"),S){var T=o?S[a][1]:this[a];this[a]="wordWrapCallback"===a||"wordWrapCallbackScope"===a?d(t,S[a][0],T):h(t,S[a][0],T)}var A=d(t,"font",null);null!==A&&this.setFont(A,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var P=d(t,"fill",null);return null!==P&&(this.color=P),r?this.update(!0):this.parent},syncFont:function syncFont(t,r){r.font=this._font},syncStyle:function syncStyle(t,r){r.textBaseline="alphabetic",r.fillStyle=this.color,r.strokeStyle=this.stroke,r.lineWidth=this.strokeThickness,r.lineCap="round",r.lineJoin="round"},syncShadow:function syncShadow(t,r){r?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)},update:function update(t){return t&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=T(this)),this.parent.updateText()},setFont:function setFont(t,r){void 0===r&&(r=!0);var o=t,a="",h="";if("string"!=typeof t)o=d(t,"fontFamily","Courier"),a=d(t,"fontSize","16px"),h=d(t,"fontStyle","");else{var T=t.split(" "),S=0;h=T.length>2?T[S++]:"",a=T[S++]||"16px",o=T[S++]||"Courier"}return o===this.fontFamily&&a===this.fontSize&&h===this.fontStyle||(this.fontFamily=o,this.fontSize=a,this.fontStyle=h,r&&this.update(!0)),this.parent},setFontFamily:function setFontFamily(t){return this.fontFamily!==t&&(this.fontFamily=t,this.update(!0)),this.parent},setFontStyle:function setFontStyle(t){return this.fontStyle!==t&&(this.fontStyle=t,this.update(!0)),this.parent},setFontSize:function setFontSize(t){return"number"==typeof t&&(t=t.toString()+"px"),this.fontSize!==t&&(this.fontSize=t,this.update(!0)),this.parent},setTestString:function setTestString(t){return this.testString=t,this.update(!0)},setFixedSize:function setFixedSize(t,r){return this.fixedWidth=t,this.fixedHeight=r,t&&(this.parent.width=t),r&&(this.parent.height=r),this.update(!1)},setBackgroundColor:function setBackgroundColor(t){return this.backgroundColor=t,this.update(!1)},setFill:function setFill(t){return this.color=t,this.update(!1)},setColor:function setColor(t){return this.color=t,this.update(!1)},setResolution:function setResolution(t){return this.resolution=t,this.update(!1)},setStroke:function setStroke(t,r){return void 0===r&&(r=this.strokeThickness),void 0===t&&0!==this.strokeThickness?(this.strokeThickness=0,this.update(!0)):this.stroke===t&&this.strokeThickness===r||(this.stroke=t,this.strokeThickness=r,this.update(!0)),this.parent},setShadow:function setShadow(t,r,o,a,h,d){return void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o="#000"),void 0===a&&(a=0),void 0===h&&(h=!1),void 0===d&&(d=!0),this.shadowOffsetX=t,this.shadowOffsetY=r,this.shadowColor=o,this.shadowBlur=a,this.shadowStroke=h,this.shadowFill=d,this.update(!1)},setShadowOffset:function setShadowOffset(t,r){return void 0===t&&(t=0),void 0===r&&(r=t),this.shadowOffsetX=t,this.shadowOffsetY=r,this.update(!1)},setShadowColor:function setShadowColor(t){return void 0===t&&(t="#000"),this.shadowColor=t,this.update(!1)},setShadowBlur:function setShadowBlur(t){return void 0===t&&(t=0),this.shadowBlur=t,this.update(!1)},setShadowStroke:function setShadowStroke(t){return this.shadowStroke=t,this.update(!1)},setShadowFill:function setShadowFill(t){return this.shadowFill=t,this.update(!1)},setWordWrapWidth:function setWordWrapWidth(t,r){return void 0===r&&(r=!1),this.wordWrapWidth=t,this.wordWrapUseAdvanced=r,this.update(!1)},setWordWrapCallback:function setWordWrapCallback(t,r){return void 0===r&&(r=null),this.wordWrapCallback=t,this.wordWrapCallbackScope=r,this.update(!1)},setAlign:function setAlign(t){return void 0===t&&(t="left"),this.align=t,this.update(!1)},setMaxLines:function setMaxLines(t){return void 0===t&&(t=0),this.maxLines=t,this.update(!1)},getTextMetrics:function getTextMetrics(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}},toJSON:function toJSON(){var t={};for(var r in S)t[r]=this[r];return t.metrics=this.getTextMetrics(),t},destroy:function destroy(){this.parent=void 0}});t.exports=A},function(t,r,o){var a=o(31);t.exports=function MeasureText(t){var r=a.create(this),o=r.getContext("2d");t.syncFont(r,o);var h=o.measureText(t.testString);if("actualBoundingBoxAscent"in h){var d=h.actualBoundingBoxAscent,T=h.actualBoundingBoxDescent;return a.remove(r),{ascent:d,descent:T,fontSize:d+T}}var S=Math.ceil(h.width*t.baselineX),A=S,P=2*A;A=A*t.baselineY|0,r.width=S,r.height=P,o.fillStyle="#f00",o.fillRect(0,0,S,P),o.font=t._font,o.textBaseline="alphabetic",o.fillStyle="#000",o.fillText(t.testString,0,A);var O={ascent:0,descent:0,fontSize:0},D=o.getImageData(0,0,S,P);if(!D)return O.ascent=A,O.descent=A+6,O.fontSize=O.ascent+O.descent,a.remove(r),O;var L,I,B=D.data,N=B.length,G=4*S,Y=0,X=!1;for(L=0;L<A;L++){for(I=0;I<G;I+=4)if(255!==B[Y+I]){X=!0;break}if(X)break;Y+=G}for(O.ascent=A-L,Y=N-G,X=!1,L=P;L>A;L--){for(I=0;I<G;I+=4)if(255!==B[Y+I]){X=!0;break}if(X)break;Y-=G}return O.descent=L-A,O.fontSize=O.ascent+O.descent,a.remove(r),O}},function(t,r,o){var a=o(1097),h=o(0),d=o(36),T=o(59),S=o(65),A=o(14),P=o(34),O=new h({Extends:P,Mixins:[a],initialize:function Arc(t,r,o,a,h,d,T,A,O){void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=128),void 0===h&&(h=0),void 0===d&&(d=360),void 0===T&&(T=!1),P.call(this,t,"Arc",new S(0,0,a)),this._startAngle=h,this._endAngle=d,this._anticlockwise=T,this._iterations=.01,this.setPosition(r,o);var D=2*this.geom.radius;this.setSize(D,D),void 0!==A&&this.setFillStyle(A,O),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function get(){return this._iterations},set:function set(t){this._iterations=t,this.updateData()}},radius:{get:function get(){return this.geom.radius},set:function set(t){this.geom.radius=t;var r=2*t;this.setSize(r,r),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function get(){return this._startAngle},set:function set(t){this._startAngle=t,this.updateData()}},endAngle:{get:function get(){return this._endAngle},set:function set(t){this._endAngle=t,this.updateData()}},anticlockwise:{get:function get(){return this._anticlockwise},set:function set(t){this._anticlockwise=t,this.updateData()}},setRadius:function setRadius(t){return this.radius=t,this},setIterations:function setIterations(t){return void 0===t&&(t=.01),this.iterations=t,this},setStartAngle:function setStartAngle(t,r){return this._startAngle=t,void 0!==r&&(this._anticlockwise=r),this.updateData()},setEndAngle:function setEndAngle(t,r){return this._endAngle=t,void 0!==r&&(this._anticlockwise=r),this.updateData()},updateData:function updateData(){var t=this._iterations,r=t,o=this.geom.radius,a=d(this._startAngle),h=d(this._endAngle),S=o,P=o;h-=a,this._anticlockwise?h<-A.PI2?h=-A.PI2:h>0&&(h=-A.PI2+h%A.PI2):h>A.PI2?h=A.PI2:h<0&&(h=A.PI2+h%A.PI2);for(var O,D=[S+Math.cos(a)*o,P+Math.sin(a)*o];r<1;)O=h*r+a,D.push(S+Math.cos(O)*o,P+Math.sin(O)*o),r+=t;return O=h+a,D.push(S+Math.cos(O)*o,P+Math.sin(O)*o),D.push(S+Math.cos(a)*o,P+Math.sin(a)*o),this.pathIndexes=T(D),this.pathData=D,this}});t.exports=O},function(t,r,o){var a=o(0),h=o(1100),d=o(59),T=o(10),S=o(34),A=new a({Extends:S,Mixins:[h],initialize:function Curve(t,r,o,a,h,d){void 0===r&&(r=0),void 0===o&&(o=0),S.call(this,t,"Curve",a),this._smoothness=32,this._curveBounds=new T,this.closePath=!1,this.setPosition(r,o),void 0!==h&&this.setFillStyle(h,d),this.updateData()},smoothness:{get:function get(){return this._smoothness},set:function set(t){this._smoothness=t,this.updateData()}},setSmoothness:function setSmoothness(t){return this._smoothness=t,this.updateData()},updateData:function updateData(){var t=this._curveBounds,r=this._smoothness;this.geom.getBounds(t,r),this.setSize(t.width,t.height),this.updateDisplayOrigin();for(var o=[],a=this.geom.getPoints(r),h=0;h<a.length;h++)o.push(a[h].x,a[h].y);return o.push(a[0].x,a[0].y),this.pathIndexes=d(o),this.pathData=o,this}});t.exports=A},function(t,r,o){var a=o(0),h=o(59),d=o(1103),T=o(111),S=o(34),A=new a({Extends:S,Mixins:[d],initialize:function Ellipse(t,r,o,a,h,d,A){void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=128),void 0===h&&(h=128),S.call(this,t,"Ellipse",new T(a/2,h/2,a,h)),this._smoothness=64,this.setPosition(r,o),this.width=a,this.height=h,void 0!==d&&this.setFillStyle(d,A),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function get(){return this._smoothness},set:function set(t){this._smoothness=t,this.updateData()}},setSize:function setSize(t,r){return this.width=t,this.height=r,this.geom.setPosition(t/2,r/2),this.geom.setSize(t,r),this.updateData()},setSmoothness:function setSmoothness(t){return this._smoothness=t,this.updateData()},updateData:function updateData(){for(var t=[],r=this.geom.getPoints(this._smoothness),o=0;o<r.length;o++)t.push(r[o].x,r[o].y);return t.push(r[0].x,r[0].y),this.pathIndexes=h(t),this.pathData=t,this}});t.exports=A},function(t,r,o){var a=o(0),h=o(34),d=o(1106),T=new a({Extends:h,Mixins:[d],initialize:function Grid(t,r,o,a,d,T,S,A,P,O,D){void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=128),void 0===d&&(d=128),void 0===T&&(T=32),void 0===S&&(S=32),h.call(this,t,"Grid",null),this.cellWidth=T,this.cellHeight=S,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(r,o),this.setSize(a,d),this.setFillStyle(A,P),void 0!==O&&this.setOutlineStyle(O,D),this.updateDisplayOrigin()},setFillStyle:function setFillStyle(t,r){return void 0===r&&(r=1),void 0===t?this.showCells=!1:(this.fillColor=t,this.fillAlpha=r,this.showCells=!0),this},setAltFillStyle:function setAltFillStyle(t,r){return void 0===r&&(r=1),void 0===t?this.showAltCells=!1:(this.altFillColor=t,this.altFillAlpha=r,this.showAltCells=!0),this},setOutlineStyle:function setOutlineStyle(t,r){return void 0===r&&(r=1),void 0===t?this.showOutline=!1:(this.outlineFillColor=t,this.outlineFillAlpha=r,this.showOutline=!0),this}});t.exports=T},function(t,r,o){var a=o(1109),h=o(0),d=o(34),T=new h({Extends:d,Mixins:[a],initialize:function IsoBox(t,r,o,a,h,T,S,A){void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=48),void 0===h&&(h=32),void 0===T&&(T=15658734),void 0===S&&(S=10066329),void 0===A&&(A=13421772),d.call(this,t,"IsoBox",null),this.projection=4,this.fillTop=T,this.fillLeft=S,this.fillRight=A,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(r,o),this.setSize(a,h),this.updateDisplayOrigin()},setProjection:function setProjection(t){return this.projection=t,this},setFaces:function setFaces(t,r,o){return void 0===t&&(t=!0),void 0===r&&(r=!0),void 0===o&&(o=!0),this.showTop=t,this.showLeft=r,this.showRight=o,this},setFillStyle:function setFillStyle(t,r,o){return this.fillTop=t,this.fillLeft=r,this.fillRight=o,this.isFilled=!0,this}});t.exports=T},function(t,r,o){var a=o(0),h=o(1112),d=o(34),T=new a({Extends:d,Mixins:[h],initialize:function IsoTriangle(t,r,o,a,h,T,S,A,P){void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=48),void 0===h&&(h=32),void 0===T&&(T=!1),void 0===S&&(S=15658734),void 0===A&&(A=10066329),void 0===P&&(P=13421772),d.call(this,t,"IsoTriangle",null),this.projection=4,this.fillTop=S,this.fillLeft=A,this.fillRight=P,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=T,this.isFilled=!0,this.setPosition(r,o),this.setSize(a,h),this.updateDisplayOrigin()},setProjection:function setProjection(t){return this.projection=t,this},setReversed:function setReversed(t){return this.isReversed=t,this},setFaces:function setFaces(t,r,o){return void 0===t&&(t=!0),void 0===r&&(r=!0),void 0===o&&(o=!0),this.showTop=t,this.showLeft=r,this.showRight=o,this},setFillStyle:function setFillStyle(t,r,o){return this.fillTop=t,this.fillLeft=r,this.fillRight=o,this.isFilled=!0,this}});t.exports=T},function(t,r,o){var a=o(0),h=o(34),d=o(47),T=o(1115),S=new a({Extends:h,Mixins:[T],initialize:function Line(t,r,o,a,T,S,A,P,O){void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===T&&(T=0),void 0===S&&(S=128),void 0===A&&(A=0),h.call(this,t,"Line",new d(a,T,S,A));var D=Math.max(1,this.geom.right-this.geom.left),L=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(r,o),this.setSize(D,L),void 0!==P&&this.setStrokeStyle(1,P,O),this.updateDisplayOrigin()},setLineWidth:function setLineWidth(t,r){return void 0===r&&(r=t),this._startWidth=t,this._endWidth=r,this.lineWidth=t,this},setTo:function setTo(t,r,o,a){return this.geom.setTo(t,r,o,a),this}});t.exports=S},function(t,r,o){var a=o(1118),h=o(0),d=o(59),T=o(469),S=o(227),A=o(34),P=o(472),O=new h({Extends:A,Mixins:[a],initialize:function Polygon(t,r,o,a,h,d){void 0===r&&(r=0),void 0===o&&(o=0),A.call(this,t,"Polygon",new S(a));var P=T(this.geom);this.setPosition(r,o),this.setSize(P.width,P.height),void 0!==h&&this.setFillStyle(h,d),this.updateDisplayOrigin(),this.updateData()},smooth:function smooth(t){void 0===t&&(t=1);for(var r=0;r<t;r++)P(this.geom);return this.updateData()},updateData:function updateData(){for(var t=[],r=this.geom.points,o=0;o<r.length;o++)t.push(r[o].x,r[o].y);return t.push(r[0].x,r[0].y),this.pathIndexes=d(t),this.pathData=t,this}});t.exports=O},function(t,r,o){var a=o(10);t.exports=function GetAABB(t,r){void 0===r&&(r=new a);for(var o,h=1/0,d=1/0,T=-h,S=-d,A=0;A<t.points.length;A++)o=t.points[A],h=Math.min(h,o.x),d=Math.min(d,o.y),T=Math.max(T,o.x),S=Math.max(S,o.y);return r.x=h,r.y=d,r.width=T-h,r.height=S-d,r}},function(t,r,o){var a=o(67),h=o(47),d=o(471);t.exports=function GetPoints(t,r,o,T){void 0===T&&(T=[]);var S=t.points,A=d(t);!r&&o>0&&(r=A/o);for(var P=0;P<r;P++)for(var O=A*(P/r),D=0,L=0;L<S.length;L++){var I=S[L],B=S[(L+1)%S.length],N=new h(I.x,I.y,B.x,B.y),G=a(N);if(!(O<D||O>D+G)){var Y=N.getPoint((O-D)/G);T.push(Y);break}D+=G}return T}},function(t,r,o){var a=o(67),h=o(47);t.exports=function Perimeter(t){for(var r=t.points,o=0,d=0;d<r.length;d++){var T=r[d],S=r[(d+1)%r.length],A=new h(T.x,T.y,S.x,S.y);o+=a(A)}return o}},function(t,r){var o=function copy(t,r){return t[0]=r[0],t[1]=r[1],t};t.exports=function Smooth(t){var r,a=[],h=t.points;for(r=0;r<h.length;r++)a.push([h[r].x,h[r].y]);var d=[];for(a.length>0&&d.push(o([0,0],a[0])),r=0;r<a.length-1;r++){var T=a[r],S=a[r+1],A=T[0],P=T[1],O=S[0],D=S[1];d.push([.85*A+.15*O,.85*P+.15*D]),d.push([.15*A+.85*O,.15*P+.85*D])}return a.length>1&&d.push(o([0,0],a[a.length-1])),t.setTo(d)}},function(t,r,o){var a=o(0),h=o(10),d=o(34),T=o(1121),S=new a({Extends:d,Mixins:[T],initialize:function Rectangle(t,r,o,a,T,S,A){void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=128),void 0===T&&(T=128),d.call(this,t,"Rectangle",new h(0,0,a,T)),this.setPosition(r,o),this.setSize(a,T),void 0!==S&&this.setFillStyle(S,A),this.updateDisplayOrigin(),this.updateData()},setSize:function setSize(t,r){return this.width=t,this.height=r,this.geom.setSize(t,r),this.updateData(),this},updateData:function updateData(){var t=[],r=this.geom,o=this._tempLine;return r.getLineA(o),t.push(o.x1,o.y1,o.x2,o.y2),r.getLineB(o),t.push(o.x2,o.y2),r.getLineC(o),t.push(o.x2,o.y2),r.getLineD(o),t.push(o.x2,o.y2),this.pathData=t,this}});t.exports=S},function(t,r,o){var a=o(1124),h=o(0),d=o(59),T=o(34),S=new h({Extends:T,Mixins:[a],initialize:function Star(t,r,o,a,h,d,S,A){void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=5),void 0===h&&(h=32),void 0===d&&(d=64),T.call(this,t,"Star",null),this._points=a,this._innerRadius=h,this._outerRadius=d,this.setPosition(r,o),this.setSize(2*d,2*d),void 0!==S&&this.setFillStyle(S,A),this.updateDisplayOrigin(),this.updateData()},setPoints:function setPoints(t){return this._points=t,this.updateData()},setInnerRadius:function setInnerRadius(t){return this._innerRadius=t,this.updateData()},setOuterRadius:function setOuterRadius(t){return this._outerRadius=t,this.updateData()},points:{get:function get(){return this._points},set:function set(t){this._points=t,this.updateData()}},innerRadius:{get:function get(){return this._innerRadius},set:function set(t){this._innerRadius=t,this.updateData()}},outerRadius:{get:function get(){return this._outerRadius},set:function set(t){this._outerRadius=t,this.updateData()}},updateData:function updateData(){var t=[],r=this._points,o=this._innerRadius,a=this._outerRadius,h=Math.PI/2*3,T=Math.PI/r,S=a,A=a;t.push(S,A+-a);for(var P=0;P<r;P++)t.push(S+Math.cos(h)*a,A+Math.sin(h)*a),h+=T,t.push(S+Math.cos(h)*o,A+Math.sin(h)*o),h+=T;return t.push(S,A+-a),this.pathIndexes=d(t),this.pathData=t,this}});t.exports=S},function(t,r,o){var a=o(0),h=o(34),d=o(82),T=o(1127),S=new a({Extends:h,Mixins:[T],initialize:function Triangle(t,r,o,a,T,S,A,P,O,D,L){void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===T&&(T=128),void 0===S&&(S=64),void 0===A&&(A=0),void 0===P&&(P=128),void 0===O&&(O=128),h.call(this,t,"Triangle",new d(a,T,S,A,P,O));var I=this.geom.right-this.geom.left,B=this.geom.bottom-this.geom.top;this.setPosition(r,o),this.setSize(I,B),void 0!==D&&this.setFillStyle(D,L),this.updateDisplayOrigin(),this.updateData()},setTo:function setTo(t,r,o,a,h,d){return this.geom.setTo(t,r,o,a,h,d),this.updateData()},updateData:function updateData(){var t=[],r=this.geom,o=this._tempLine;return r.getLineA(o),t.push(o.x1,o.y1,o.x2,o.y2),r.getLineB(o),t.push(o.x2,o.y2),r.getLineC(o),t.push(o.x2,o.y2),this.pathData=t,this}});t.exports=S},function(t,r,o){var a=o(4),h=o(67);t.exports=function GetPoint(t,r,o){void 0===o&&(o=new a);var d=t.getLineA(),T=t.getLineB(),S=t.getLineC();if(r<=0||r>=1)return o.x=d.x1,o.y=d.y1,o;var A=h(d),P=h(T),O=h(S),D=(A+P+O)*r,L=0;return D<A?(L=D/A,o.x=d.x1+(d.x2-d.x1)*L,o.y=d.y1+(d.y2-d.y1)*L):D>A+P?(L=(D-=A+P)/O,o.x=S.x1+(S.x2-S.x1)*L,o.y=S.y1+(S.y2-S.y1)*L):(L=(D-=A)/P,o.x=T.x1+(T.x2-T.x1)*L,o.y=T.y1+(T.y2-T.y1)*L),o}},function(t,r,o){var a=o(67),h=o(4);t.exports=function GetPoints(t,r,o,d){void 0===d&&(d=[]);var T=t.getLineA(),S=t.getLineB(),A=t.getLineC(),P=a(T),O=a(S),D=a(A),L=P+O+D;!r&&o>0&&(r=L/o);for(var I=0;I<r;I++){var B=L*(I/r),N=0,G=new h;B<P?(N=B/P,G.x=T.x1+(T.x2-T.x1)*N,G.y=T.y1+(T.y2-T.y1)*N):B>P+O?(N=(B-=P+O)/D,G.x=A.x1+(A.x2-A.x1)*N,G.y=A.y1+(A.y2-A.y1)*N):(N=(B-=P)/O,G.x=S.x1+(S.x2-S.x1)*N,G.y=S.y1+(S.y2-S.y1)*N),d.push(G)}return d}},function(t,r){t.exports=function SetValue(t,r,o){if(!t||"number"==typeof t)return!1;if(t.hasOwnProperty(r))return t[r]=o,!0;if(-1!==r.indexOf(".")){for(var a=r.split("."),h=t,d=t,T=0;T<a.length;T++){if(!h.hasOwnProperty(a[T]))return!1;d=h,h=h[a[T]]}return d[a[a.length-1]]=o,!0}return!1}},function(t,r,o){var a=o(116),h=o(117);t.exports=function GenerateVerts(t,r,o,d,T,S,A){if(void 0===d&&(d=!1),void 0===S&&(S=16777215),void 0===A&&(A=1),t.length===r.length){var P,O,D,L,I,B,N,G,Y,X,U,z={faces:[],vertices:[]},V=d?3:2,W=Array.isArray(S),H=Array.isArray(A);if(Array.isArray(o)&&o.length>0)for(P=0;P<o.length;P++){var q=o[P],Z=2*o[P],K=o[P]*V;O=t[K],D=t[K+1],L=d?t[K+2]:0,I=r[Z],B=r[Z+1],N=W?S[q]:S,G=H?A[q]:A,Y=0,X=0,U=0,T&&(Y=T[K],X=T[K+1],U=d?T[K+2]:0),z.vertices.push(new h(O,D,L,I,B,N,G,Y,X,U))}else{var J=0,Q=0;for(P=0;P<t.length;P+=V)O=t[P],D=t[P+1],L=d?t[P+2]:0,I=r[J],B=r[J+1],N=W?S[Q]:S,G=H?A[Q]:A,Y=0,X=0,U=0,T&&(Y=T[P],X=T[P+1],U=d?T[P+2]:0),z.vertices.push(new h(O,D,L,I,B,N,G,Y,X,U)),J+=2,Q++}for(P=0;P<z.vertices.length;P+=3){var $=z.vertices[P],tt=z.vertices[P+1],et=z.vertices[P+2];z.faces.push(new a($,tt,et))}return z}console.warn("GenerateVerts: vertices and uvs count not equal")}},function(t,r,o){var a=o(116),h=o(69),d=o(39),T=o(117),S=new d,A=new d,P=new h;t.exports=function GenerateObjVerts(t,r,o,h,d,O,D,L,I,B){void 0===o&&(o=1),void 0===h&&(h=0),void 0===d&&(d=0),void 0===O&&(O=0),void 0===D&&(D=0),void 0===L&&(L=0),void 0===I&&(I=0),void 0===B&&(B=!0);var N={faces:[],verts:[]},G=t.materials;S.set(h,d,O),A.set(D,L,I),P.fromRotationXYTranslation(A,S,B);for(var Y=0;Y<t.models.length;Y++)for(var X=t.models[Y],U=X.vertices,z=X.textureCoords,V=X.faces,W=0;W<V.length;W++){var H=V[W],q=H.vertices[0],Z=H.vertices[1],K=H.vertices[2],J=U[q.vertexIndex],Q=U[Z.vertexIndex],$=U[K.vertexIndex],tt=q.textureCoordsIndex,et=Z.textureCoordsIndex,it=K.textureCoordsIndex,nt=-1===tt?{u:0,v:1}:z[tt],rt=-1===et?{u:0,v:0}:z[et],st=-1===it?{u:1,v:1}:z[it],ot=16777215;""!==H.material&&G[H.material]&&(ot=G[H.material]);var at=new T(J.x*o,J.y*o,J.z*o,nt.u,nt.v,ot).transformMat4(P),ht=new T(Q.x*o,Q.y*o,Q.z*o,rt.u,rt.v,ot).transformMat4(P),lt=new T($.x*o,$.y*o,$.z*o,st.u,st.v,ot).transformMat4(P);N.verts.push(at,ht,lt),N.faces.push(new a(at,ht,lt))}return r&&(r.faces=r.faces.concat(N.faces),r.vertices=r.vertices.concat(N.verts)),N}},function(t,r,o){var a=o(65),h=o(0),d=o(11),T=o(200),S=o(12),A=new h({Extends:a,Mixins:[d.ScrollFactor,d.Visible],initialize:function Light(t,r,o,h,d,S,A){a.call(this,t,r,o),this.color=new T(h,d,S),this.intensity=A,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function willRender(t){return!(A.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},setColor:function setColor(t){var r=S.getFloatsFromUintRGB(t);return this.color.set(r[0],r[1],r[2]),this},setIntensity:function setIntensity(t){return this.intensity=t,this},setRadius:function setRadius(t){return this.radius=t,this}});A.RENDER_MASK=15,t.exports=A},function(t,r,o){var a=o(151),h=o(0),d=o(50),T=o(481),S=o(150),A=o(200),P=o(74),O=o(79),D=o(12),L=new h({initialize:function LightsManager(){this.lights=[],this.ambientColor=new A(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function addPointLight(t,r,o,a,h,d){return this.systems.displayList.add(new S(this.scene,t,r,o,a,h,d))},enable:function enable(){return-1===this.maxLights&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function disable(){return this.active=!1,this},getLights:function getLights(t){for(var r=this.lights,o=t.worldView,h=[],T=0;T<r.length;T++){var S=r[T];S.willRender(t)&&a(S,o)&&h.push({light:S,distance:d(S.x,S.y,o.centerX,o.centerY)})}return h.length>this.maxLights&&(O(h,this.sortByDistance),h=h.slice(0,this.maxLights)),this.visibleLights=h.length,h},sortByDistance:function sortByDistance(t,r){return t.distance>=r.distance},setAmbientColor:function setAmbientColor(t){var r=D.getFloatsFromUintRGB(t);return this.ambientColor.set(r[0],r[1],r[2]),this},getMaxVisibleLights:function getMaxVisibleLights(){return this.maxLights},getLightCount:function getLightCount(){return this.lights.length},addLight:function addLight(t,r,o,a,h){void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=128),void 0===a&&(a=16777215),void 0===h&&(h=1);var d=D.getFloatsFromUintRGB(a),S=new T(t,r,o,d[0],d[1],d[2],h);return this.lights.push(S),S},removeLight:function removeLight(t){var r=this.lights.indexOf(t);return r>=0&&P(this.lights,r),this},shutdown:function shutdown(){this.lights.length=0},destroy:function destroy(){this.shutdown()}});t.exports=L},function(t,r,o){var a=o(56),h=o(17),d={Circle:o(1191),Ellipse:o(1201),Intersects:o(484),Line:o(1221),Mesh:o(1243),Point:o(1246),Polygon:o(1260),Rectangle:o(502),Triangle:o(1293)};d=h(!1,d,a),t.exports=d},function(t,r,o){t.exports={CircleToCircle:o(231),CircleToRectangle:o(151),GetCircleToCircle:o(1211),GetCircleToRectangle:o(1212),GetLineToCircle:o(232),GetLineToLine:o(485),GetLineToPoints:o(486),GetLineToPolygon:o(487),GetLineToRectangle:o(234),GetRaysFromPointToPolygon:o(1213),GetRectangleIntersection:o(1214),GetRectangleToRectangle:o(1215),GetRectangleToTriangle:o(1216),GetTriangleToCircle:o(1217),GetTriangleToLine:o(492),GetTriangleToTriangle:o(1218),LineToCircle:o(233),LineToLine:o(96),LineToRectangle:o(488),PointToLine:o(496),PointToLineSegment:o(1219),RectangleToRectangle:o(152),RectangleToTriangle:o(489),RectangleToValues:o(1220),TriangleToCircle:o(491),TriangleToLine:o(493),TriangleToTriangle:o(494)}},function(t,r,o){var a=o(39);t.exports=function GetLineToLine(t,r,o){var h=t.x1,d=t.y1,T=t.x2,S=t.y2,A=r.x1,P=r.y1,O=T-h,D=S-d,L=r.x2-A,I=r.y2-P;if(0===O||0==I*O-L*D)return!1;var B=(O*(P-d)+D*(h-A))/(L*D-I*O),N=(A+L*B-h)/O;return N<0||B<0||B>1?null:(void 0===o&&(o=new a),o.set(h+O*N,d+D*N,N))}},function(t,r,o){var a=o(39),h=o(485),d=new(o(47)),T=new a;t.exports=function GetLineToPoints(t,r,o){void 0===o&&(o=new a);var S=!1;o.set(),T.set();for(var A=r[0],P=1;P<r.length;P++){var O=r[P];d.setTo(A.x,A.y,O.x,O.y),A=O,h(t,d,T)&&(!S||T.z<o.z)&&(o.copy(T),S=!0)}return S?o:null}},function(t,r,o){var a=o(39),h=o(140),d=o(486),T=new a;t.exports=function GetLineToPolygon(t,r,o){void 0===o&&(o=new h),Array.isArray(r)||(r=[r]);var a=!1;o.set(),T.set();for(var S=0;S<r.length;S++)d(t,r[S].points,T)&&(!a||T.z<o.z)&&(o.set(T.x,T.y,T.z,S),a=!0);return a?o:null}},function(t,r){t.exports=function LineToRectangle(t,r){var o=t.x1,a=t.y1,h=t.x2,d=t.y2,T=r.x,S=r.y,A=r.right,P=r.bottom,O=0;if(o>=T&&o<=A&&a>=S&&a<=P||h>=T&&h<=A&&d>=S&&d<=P)return!0;if(o<T&&h>=T){if((O=a+(d-a)*(T-o)/(h-o))>S&&O<=P)return!0}else if(o>A&&h<=A&&(O=a+(d-a)*(A-o)/(h-o))>=S&&O<=P)return!0;if(a<S&&d>=S){if((O=o+(h-o)*(S-a)/(d-a))>=T&&O<=A)return!0}else if(a>P&&d<=P&&(O=o+(h-o)*(P-a)/(d-a))>=T&&O<=A)return!0;return!1}},function(t,r,o){var a=o(96),h=o(57),d=o(235),T=o(490);t.exports=function RectangleToTriangle(t,r){if(r.left>t.right||r.right<t.left||r.top>t.bottom||r.bottom<t.top)return!1;var o=r.getLineA(),S=r.getLineB(),A=r.getLineC();if(h(t,o.x1,o.y1)||h(t,o.x2,o.y2))return!0;if(h(t,S.x1,S.y1)||h(t,S.x2,S.y2))return!0;if(h(t,A.x1,A.y1)||h(t,A.x2,A.y2))return!0;var P=t.getLineA(),O=t.getLineB(),D=t.getLineC(),L=t.getLineD();if(a(o,P)||a(o,O)||a(o,D)||a(o,L))return!0;if(a(S,P)||a(S,O)||a(S,D)||a(S,L))return!0;if(a(A,P)||a(A,O)||a(A,D)||a(A,L))return!0;var I=T(t);return d(r,I,!0).length>0}},function(t,r){t.exports=function Decompose(t,r){return void 0===r&&(r=[]),r.push({x:t.x,y:t.y}),r.push({x:t.right,y:t.y}),r.push({x:t.right,y:t.bottom}),r.push({x:t.x,y:t.bottom}),r}},function(t,r,o){var a=o(233),h=o(115);t.exports=function TriangleToCircle(t,r){return!(t.left>r.right||t.right<r.left||t.top>r.bottom||t.bottom<r.top||!h(t,r.x,r.y)&&!a(t.getLineA(),r)&&!a(t.getLineB(),r)&&!a(t.getLineC(),r))}},function(t,r,o){var a=o(4),h=o(493),d=o(96);t.exports=function GetTriangleToLine(t,r,o){if(void 0===o&&(o=[]),h(t,r))for(var T=t.getLineA(),S=t.getLineB(),A=t.getLineC(),P=[new a,new a,new a],O=[d(T,r,P[0]),d(S,r,P[1]),d(A,r,P[2])],D=0;D<3;D++)O[D]&&o.push(P[D]);return o}},function(t,r,o){var a=o(96);t.exports=function TriangleToLine(t,r){return!!(t.contains(r.x1,r.y1)||t.contains(r.x2,r.y2)||a(t.getLineA(),r)||a(t.getLineB(),r)||a(t.getLineC(),r))}},function(t,r,o){var a=o(235),h=o(495),d=o(96);t.exports=function TriangleToTriangle(t,r){if(t.left>r.right||t.right<r.left||t.top>r.bottom||t.bottom<r.top)return!1;var o=t.getLineA(),T=t.getLineB(),S=t.getLineC(),A=r.getLineA(),P=r.getLineB(),O=r.getLineC();if(d(o,A)||d(o,P)||d(o,O))return!0;if(d(T,A)||d(T,P)||d(T,O))return!0;if(d(S,A)||d(S,P)||d(S,O))return!0;var D=h(t),L=a(r,D,!0);return L.length>0||(D=h(r),(L=a(t,D,!0)).length>0)}},function(t,r){t.exports=function Decompose(t,r){return void 0===r&&(r=[]),r.push({x:t.x1,y:t.y1}),r.push({x:t.x2,y:t.y2}),r.push({x:t.x3,y:t.y3}),r}},function(t,r){t.exports=function PointToLine(t,r,o){void 0===o&&(o=1);var a=r.x1,h=r.y1,d=r.x2,T=r.y2,S=t.x,A=t.y,P=(d-a)*(d-a)+(T-h)*(T-h);if(0===P)return!1;var O=((S-a)*(d-a)+(A-h)*(T-h))/P;if(O<0)return Math.sqrt((a-S)*(a-S)+(h-A)*(h-A))<=o;if(O>=0&&O<=1){var D=((h-A)*(d-a)-(a-S)*(T-h))/P;return Math.abs(D)*Math.sqrt(P)<=o}return Math.sqrt((d-S)*(d-S)+(T-A)*(T-A))<=o}},function(t,r,o){var a=o(14),h=o(68),d=o(97);t.exports=function NormalAngle(t){var r=d(t)-a.TAU;return h(r,-Math.PI,Math.PI)}},function(t,r){var o=!0,a="untitled",h="",d="";function stripComments(t){var r=t.indexOf("#");return r>-1?t.substring(0,r):t}function currentModel(t){return 0===t.models.length&&t.models.push({faces:[],name:a,textureCoords:[],vertexNormals:[],vertices:[]}),h="",t.models[t.models.length-1]}function parseObject(t,r){var o=t.length>=2?t[1]:a;r.models.push({faces:[],name:o,textureCoords:[],vertexNormals:[],vertices:[]}),h=""}function parseGroup(t){2===t.length&&(h=t[1])}function parseVertexCoords(t,r){var o=t.length,a=o>=2?parseFloat(t[1]):0,h=o>=3?parseFloat(t[2]):0,d=o>=4?parseFloat(t[3]):0;currentModel(r).vertices.push({x:a,y:h,z:d})}function parseTextureCoords(t,r){var a=t.length,h=a>=2?parseFloat(t[1]):0,d=a>=3?parseFloat(t[2]):0,T=a>=4?parseFloat(t[3]):0;isNaN(h)&&(h=0),isNaN(d)&&(d=0),isNaN(T)&&(T=0),o&&(d=1-d),currentModel(r).textureCoords.push({u:h,v:d,w:T})}function parseVertexNormal(t,r){var o=t.length,a=o>=2?parseFloat(t[1]):0,h=o>=3?parseFloat(t[2]):0,d=o>=4?parseFloat(t[3]):0;currentModel(r).vertexNormals.push({x:a,y:h,z:d})}function parsePolygon(t,r){var o=t.length-1;if(!(o<3)){for(var a={group:h,material:d,vertices:[]},T=0;T<o;T++){var S=t[T+1].split("/"),A=S.length;if(!(A<1||A>3)){var P=0,O=0,D=0;P=parseInt(S[0],10),A>1&&""!==S[1]&&(O=parseInt(S[1],10)),A>2&&(D=parseInt(S[2],10)),0!==P&&(P<0&&(P=currentModel(r).vertices.length+1+P),O-=1,P-=1,D-=1,a.vertices.push({textureCoordsIndex:O,vertexIndex:P,vertexNormalIndex:D}))}}currentModel(r).faces.push(a)}}function parseMtlLib(t,r){t.length>=2&&r.materialLibraries.push(t[1])}function parseUseMtl(t){t.length>=2&&(d=t[1])}t.exports=function ParseObj(t,r){void 0===r&&(r=!0),o=r;var a={materials:{},materialLibraries:[],models:[]};h="",d="";for(var T=t.split("\n"),S=0;S<T.length;S++){var A=stripComments(T[S]).replace(/\s\s+/g," ").trim().split(" ");switch(A[0].toLowerCase()){case"o":parseObject(A,a);break;case"g":parseGroup(A);break;case"v":parseVertexCoords(A,a);break;case"vt":parseTextureCoords(A,a);break;case"vn":parseVertexNormal(A,a);break;case"f":parsePolygon(A,a);break;case"mtllib":parseMtlLib(A,a);break;case"usemtl":parseUseMtl(A)}}return a}},function(t,r,o){var a=o(103);t.exports=function ParseObjMaterial(t){for(var r={},o=t.split("\n"),h="",d=0;d<o.length;d++){var T=o[d].trim();if(0!==T.indexOf("#")&&""!==T){var S=T.replace(/\s\s+/g," ").trim().split(" ");switch(S[0].toLowerCase()){case"newmtl":h=S[1];break;case"kd":var A=Math.floor(255*S[1]),P=S.length>=2?Math.floor(255*S[2]):A,O=S.length>=3?Math.floor(255*S[3]):A;r[h]=a(A,P,O)}}}return r}},function(t,r){t.exports=function GetMagnitude(t){return Math.sqrt(t.x*t.x+t.y*t.y)}},function(t,r){t.exports=function GetMagnitudeSq(t){return t.x*t.x+t.y*t.y}},function(t,r,o){var a=o(10);a.Area=o(1267),a.Ceil=o(1268),a.CeilAll=o(1269),a.CenterOn=o(190),a.Clone=o(1270),a.Contains=o(57),a.ContainsPoint=o(1271),a.ContainsRect=o(503),a.CopyFrom=o(1272),a.Decompose=o(490),a.Equals=o(1273),a.FitInside=o(1274),a.FitOutside=o(1275),a.Floor=o(1276),a.FloorAll=o(1277),a.FromPoints=o(199),a.FromXY=o(1278),a.GetAspectRatio=o(237),a.GetCenter=o(1279),a.GetPoint=o(171),a.GetPoints=o(306),a.GetSize=o(1280),a.Inflate=o(1281),a.Intersection=o(1282),a.MarchingAnts=o(316),a.MergePoints=o(1283),a.MergeRect=o(1284),a.MergeXY=o(1285),a.Offset=o(1286),a.OffsetPoint=o(1287),a.Overlaps=o(1288),a.Perimeter=o(130),a.PerimeterPoint=o(1289),a.Random=o(174),a.RandomOutside=o(1290),a.SameDimensions=o(1291),a.Scale=o(1292),a.Union=o(441),t.exports=a},function(t,r){t.exports=function ContainsRect(t,r){return!(r.width*r.height>t.width*t.height)&&r.x>t.x&&r.x<t.right&&r.right>t.x&&r.right<t.right&&r.y>t.y&&r.y<t.bottom&&r.bottom>t.y&&r.bottom<t.bottom}},function(t,r,o){var a=o(4);t.exports=function Centroid(t,r){return void 0===r&&(r=new a),r.x=(t.x1+t.x2+t.x3)/3,r.y=(t.y1+t.y2+t.y3)/3,r}},function(t,r){t.exports=function Offset(t,r,o){return t.x1+=r,t.y1+=o,t.x2+=r,t.y2+=o,t.x3+=r,t.y3+=o,t}},function(t,r,o){var a=o(4);function getLength(t,r,o,a){var h=t-o,d=r-a,T=h*h+d*d;return Math.sqrt(T)}t.exports=function InCenter(t,r){void 0===r&&(r=new a);var o=t.x1,h=t.y1,d=t.x2,T=t.y2,S=t.x3,A=t.y3,P=getLength(S,A,d,T),O=getLength(o,h,S,A),D=getLength(d,T,o,h),L=P+O+D;return r.x=(o*P+d*O+S*D)/L,r.y=(h*P+T*O+A*D)/L,r}},function(t,r){t.exports=function CreatePixelPerfectHandler(t,r){return function(o,a,h,d){var T=t.getPixelAlpha(a,h,d.texture.key,d.frame.name);return T&&T>=r}}},function(t,r){t.exports=function CreateInteractiveObject(t,r,o){return{gameObject:t,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:r,hitAreaCallback:o,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}}},function(t,r,o){var a=new(o(0))({initialize:function Axis(t,r){this.pad=t,this.events=t.events,this.index=r,this.value=0,this.threshold=.1},update:function update(t){this.value=t},getValue:function getValue(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function destroy(){this.pad=null,this.events=null}});t.exports=a},function(t,r,o){var a=o(0),h=o(239),d=new a({initialize:function Button(t,r){this.pad=t,this.events=t.manager,this.index=r,this.value=0,this.threshold=1,this.pressed=!1},update:function update(t){this.value=t;var r=this.pad,o=this.index;t>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(h.BUTTON_DOWN,r,this,t),this.pad.emit(h.GAMEPAD_BUTTON_DOWN,o,t,this)):this.pressed&&(this.pressed=!1,this.events.emit(h.BUTTON_UP,r,this,t),this.pad.emit(h.GAMEPAD_BUTTON_UP,o,t,this))},destroy:function destroy(){this.pad=null,this.events=null}});t.exports=d},function(t,r,o){var a=o(509),h=o(510),d=o(0),T=o(9),S=o(3),A=new d({Extends:T,initialize:function Gamepad(t,r){T.call(this),this.manager=t,this.pad=r,this.id=r.id,this.index=r.index;for(var o=[],d=0;d<r.buttons.length;d++)o.push(new h(this,d));this.buttons=o;var A=[];for(d=0;d<r.axes.length;d++)A.push(new a(this,d));this.axes=A,this.vibration=r.vibrationActuator;var P={value:0,pressed:!1};this._LCLeft=o[14]?o[14]:P,this._LCRight=o[15]?o[15]:P,this._LCTop=o[12]?o[12]:P,this._LCBottom=o[13]?o[13]:P,this._RCLeft=o[2]?o[2]:P,this._RCRight=o[1]?o[1]:P,this._RCTop=o[3]?o[3]:P,this._RCBottom=o[0]?o[0]:P,this._FBLeftTop=o[4]?o[4]:P,this._FBLeftBottom=o[6]?o[6]:P,this._FBRightTop=o[5]?o[5]:P,this._FBRightBottom=o[7]?o[7]:P;var O={value:0};this._HAxisLeft=A[0]?A[0]:O,this._VAxisLeft=A[1]?A[1]:O,this._HAxisRight=A[2]?A[2]:O,this._VAxisRight=A[3]?A[3]:O,this.leftStick=new S,this.rightStick=new S,this._created=performance.now()},getAxisTotal:function getAxisTotal(){return this.axes.length},getAxisValue:function getAxisValue(t){return this.axes[t].getValue()},setAxisThreshold:function setAxisThreshold(t){for(var r=0;r<this.axes.length;r++)this.axes[r].threshold=t},getButtonTotal:function getButtonTotal(){return this.buttons.length},getButtonValue:function getButtonValue(t){return this.buttons[t].value},isButtonDown:function isButtonDown(t){return this.buttons[t].pressed},update:function update(t){if(!(t.timestamp<this._created)){var r,o=this.buttons,a=t.buttons,h=o.length;for(r=0;r<h;r++)o[r].update(a[r].value);var d=this.axes,T=t.axes;for(h=d.length,r=0;r<h;r++)d[r].update(T[r]);h>=2&&(this.leftStick.set(d[0].getValue(),d[1].getValue()),h>=4&&this.rightStick.set(d[2].getValue(),d[3].getValue()))}},destroy:function destroy(){var t;for(this.removeAllListeners(),this.manager=null,this.pad=null,t=0;t<this.buttons.length;t++)this.buttons[t].destroy();for(t=0;t<this.axes.length;t++)this.axes[t].destroy();this.buttons=[],this.axes=[]},connected:{get:function get(){return this.pad.connected}},timestamp:{get:function get(){return this.pad.timestamp}},left:{get:function get(){return this._LCLeft.pressed}},right:{get:function get(){return this._LCRight.pressed}},up:{get:function get(){return this._LCTop.pressed}},down:{get:function get(){return this._LCBottom.pressed}},A:{get:function get(){return this._RCBottom.pressed}},Y:{get:function get(){return this._RCTop.pressed}},X:{get:function get(){return this._RCLeft.pressed}},B:{get:function get(){return this._RCRight.pressed}},L1:{get:function get(){return this._FBLeftTop.value}},L2:{get:function get(){return this._FBLeftBottom.value}},R1:{get:function get(){return this._FBRightTop.value}},R2:{get:function get(){return this._FBRightBottom.value}}});t.exports=A},function(t,r,o){var a=o(0),h=o(9),d=o(154),T=new a({Extends:h,initialize:function Key(t,r){h.call(this),this.plugin=t,this.keyCode=r,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function setEmitOnRepeat(t){return this.emitOnRepeat=t,this},onDown:function onDown(t){this.originalEvent=t,this.enabled&&(this.altKey=t.altKey,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.location=t.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(d.DOWN,this,t):(this.isDown=!0,this.isUp=!1,this.timeDown=t.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(d.DOWN,this,t)))},onUp:function onUp(t){this.originalEvent=t,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=t.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(d.UP,this,t))},reset:function reset(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function getDuration(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function destroy(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});t.exports=T},function(t,r,o){var a=o(0),h=o(154),d=o(2),T=o(514),S=o(516),A=new a({initialize:function KeyCombo(t,r,o){if(void 0===o&&(o={}),r.length<2)return!1;this.manager=t,this.enabled=!0,this.keyCodes=[];for(var a=0;a<r.length;a++){var A=r[a];"string"==typeof A?this.keyCodes.push(A.toUpperCase().charCodeAt(0)):"number"==typeof A?this.keyCodes.push(A):A.hasOwnProperty("keyCode")&&this.keyCodes.push(A.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=d(o,"resetOnWrongKey",!0),this.maxKeyDelay=d(o,"maxKeyDelay",0),this.resetOnMatch=d(o,"resetOnMatch",!1),this.deleteOnMatch=d(o,"deleteOnMatch",!1);var P=this;this.onKeyDown=function onKeyDownHandler(t){!P.matched&&P.enabled&&T(t,P)&&(P.manager.emit(h.COMBO_MATCH,P,t),P.resetOnMatch?S(P):P.deleteOnMatch&&P.destroy())},this.manager.on(h.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function get(){return this.index/this.size}},destroy:function destroy(){this.enabled=!1,this.keyCodes=[],this.manager.off(h.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});t.exports=A},function(t,r,o){var a=o(515);t.exports=function ProcessKeyCombo(t,r){if(r.matched)return!0;var o=!1,h=!1;if(t.keyCode===r.current)if(r.index>0&&r.maxKeyDelay>0){var d=r.timeLastMatched+r.maxKeyDelay;t.timeStamp<=d&&(h=!0,o=a(t,r))}else h=!0,o=a(t,r);return!h&&r.resetOnWrongKey&&(r.index=0,r.current=r.keyCodes[0]),o&&(r.timeLastMatched=t.timeStamp,r.matched=!0,r.timeMatched=t.timeStamp),o}},function(t,r){t.exports=function AdvanceKeyCombo(t,r){return r.timeLastMatched=t.timeStamp,r.index++,r.index===r.size||(r.current=r.keyCodes[r.index],!1)}},function(t,r){t.exports=function ResetKeyCombo(t){return t.current=t.keyCodes[0],t.index=0,t.timeLastMatched=0,t.matched=!1,t.timeMatched=0,t}},function(t,r,o){var a=o(240);t.exports=function XHRLoader(t,r){var o=a(r,t.xhrSettings),h=new XMLHttpRequest;if(h.open("GET",t.src,o.async,o.user,o.password),h.responseType=t.xhrSettings.responseType,h.timeout=o.timeout,o.headers)for(var d in o.headers)h.setRequestHeader(d,o.headers[d]);return o.header&&o.headerValue&&h.setRequestHeader(o.header,o.headerValue),o.requestedWith&&h.setRequestHeader("X-Requested-With",o.requestedWith),o.overrideMimeType&&h.overrideMimeType(o.overrideMimeType),o.withCredentials&&(h.withCredentials=!0),h.onload=t.onLoad.bind(t,h),h.onerror=t.onError.bind(t,h),h.onprogress=t.onProgress.bind(t),h.send(),h}},function(t,r,o){var a=o(0),h=o(21),d=o(23),T=o(8),S=o(2),A=o(519),P=o(7),O=new a({Extends:d,initialize:function AudioFile(t,r,o,a,h){if(P(r)){var T=r;r=S(T,"key"),a=S(T,"xhrSettings"),h=S(T,"context",h)}var A={type:"audio",cache:t.cacheManager.audio,extension:o.type,responseType:"arraybuffer",key:r,url:o.url,xhrSettings:a,config:{context:h}};d.call(this,t,A)},onProcess:function onProcess(){this.state=h.FILE_PROCESSING;var t=this;this.config.context.decodeAudioData(this.xhrLoader.response,(function(r){t.data=r,t.onProcessComplete()}),(function(r){console.error("Error decoding audio: "+t.key+" - ",r?r.message:null),t.onProcessError()})),this.config.context=null}});O.create=function(t,r,o,a,h){var d=t.systems.game,T=d.config.audio,D=d.device.audio;P(r)&&(o=S(r,"url",[]),a=S(r,"config",{}));var L=O.getAudioURL(d,o);return L?D.webAudio&&!T.disableWebAudio?new O(t,r,L,h,d.sound.context):new A(t,r,L,a):null},O.getAudioURL=function(t,r){Array.isArray(r)||(r=[r]);for(var o=0;o<r.length;o++){var a=S(r[o],"url",r[o]);if(0===a.indexOf("blob:")||0===a.indexOf("data:"))return{url:a,type:""};var h=a.match(/\.([a-zA-Z0-9]+)($|\?)/);if(h=S(r[o],"type",h?h[1]:"").toLowerCase(),t.device.audio[h])return{url:a,type:h}}return null},T.register("audio",(function(t,r,o,a){var h,d=this.systems.game,T=d.config.audio,S=d.device.audio;if(T.noAudio||!S.webAudio&&!S.audioData)return this;if(Array.isArray(t))for(var A=0;A<t.length;A++)(h=O.create(this,t[A]))&&this.addFile(h);else(h=O.create(this,t,r,o,a))&&this.addFile(h);return this})),t.exports=O},function(t,r,o){var a=o(0),h=o(95),d=o(23),T=o(2),S=o(155),A=o(7),P=new a({Extends:d,initialize:function HTML5AudioFile(t,r,o,a){if(A(r)){var h=r;r=T(h,"key"),a=T(h,"config",a)}var S={type:"audio",cache:t.cacheManager.audio,extension:o.type,key:r,url:o.url,config:a};d.call(this,t,S),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function onLoad(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function onError(){for(var t=0;t<this.data.length;t++){var r=this.data[t];r.oncanplaythrough=null,r.onerror=null}this.loader.nextFile(this,!1)},onProgress:function onProgress(t){var r=t.target;r.oncanplaythrough=null,r.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(h.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function load(){this.data=[];var t=this.config&&this.config.instances||1;this.filesTotal=t,this.filesLoaded=0,this.percentComplete=0;for(var r=0;r<t;r++){var o=new Audio;o.dataset||(o.dataset={}),o.dataset.name=this.key+("0"+r).slice(-2),o.dataset.used="false",this.locked?o.dataset.locked="true":(o.dataset.locked="false",o.preload="auto",o.oncanplaythrough=this.onProgress.bind(this),o.onerror=this.onError.bind(this)),this.data.push(o)}for(r=0;r<this.data.length;r++)(o=this.data[r]).src=S(this,this.loader.baseURL),this.locked||o.load();this.locked&&setTimeout(this.onLoad.bind(this))}});t.exports=P},function(t,r,o){var a=o(0),h=o(21),d=o(23),T=o(8),S=o(2),A=o(7),P=new a({Extends:d,initialize:function ScriptFile(t,r,o,a){var h="js";if(A(r)){var T=r;r=S(T,"key"),o=S(T,"url"),a=S(T,"xhrSettings"),h=S(T,"extension",h)}var P={type:"script",cache:!1,extension:h,responseType:"text",key:r,url:o,xhrSettings:a};d.call(this,t,P)},onProcess:function onProcess(){this.state=h.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});T.register("script",(function(t,r,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new P(this,t[a]));else this.addFile(new P(this,t,r,o));return this})),t.exports=P},function(t,r,o){var a=o(522),h=o(157),d=o(0),T=o(62),S=o(524),A=o(525),P=new d({initialize:function Factory(t){this.world=t,this.scene=t.scene,this.sys=t.scene.sys},collider:function collider(t,r,o,a,h){return this.world.addCollider(t,r,o,a,h)},overlap:function overlap(t,r,o,a,h){return this.world.addOverlap(t,r,o,a,h)},existing:function existing(t,r){var o=r?T.STATIC_BODY:T.DYNAMIC_BODY;return this.world.enableBody(t,o),t},staticImage:function staticImage(t,r,o,h){var d=new a(this.scene,t,r,o,h);return this.sys.displayList.add(d),this.world.enableBody(d,T.STATIC_BODY),d},image:function image(t,r,o,h){var image=new a(this.scene,t,r,o,h);return this.sys.displayList.add(image),this.world.enableBody(image,T.DYNAMIC_BODY),image},staticSprite:function staticSprite(t,r,o,a){var d=new h(this.scene,t,r,o,a);return this.sys.displayList.add(d),this.sys.updateList.add(d),this.world.enableBody(d,T.STATIC_BODY),d},sprite:function sprite(t,r,o,a){var sprite=new h(this.scene,t,r,o,a);return this.sys.displayList.add(sprite),this.sys.updateList.add(sprite),this.world.enableBody(sprite,T.DYNAMIC_BODY),sprite},staticGroup:function staticGroup(t,r){return this.sys.updateList.add(new A(this.world,this.world.scene,t,r))},group:function group(t,r){return this.sys.updateList.add(new S(this.world,this.world.scene,t,r))},destroy:function destroy(){this.world=null,this.scene=null,this.sys=null}});t.exports=P},function(t,r,o){var a=o(0),h=o(243),d=o(125),T=new a({Extends:d,Mixins:[h.Acceleration,h.Angular,h.Bounce,h.Debug,h.Drag,h.Enable,h.Friction,h.Gravity,h.Immovable,h.Mass,h.Pushable,h.Size,h.Velocity],initialize:function ArcadeImage(t,r,o,a,h){d.call(this,t,r,o,a,h),this.body=null}});t.exports=T},function(t,r,o){var a=o(244),h=o(65),d=o(231),T=o(151);t.exports=function OverlapCirc(t,r,o,S,A,P){var O=a(t,r-S,o-S,2*S,2*S,A,P);if(0===O.length)return O;for(var D=new h(r,o,S),L=new h,I=[],B=0;B<O.length;B++){var N=O[B];N.isCircle?(L.setTo(N.center.x,N.center.y,N.halfWidth),d(D,L)&&I.push(N)):T(D,N)&&I.push(N)}return I}},function(t,r,o){var a=o(157),h=o(0),d=o(62),T=o(2),S=o(113),A=o(7),P=new h({Extends:S,initialize:function PhysicsGroup(t,r,o,h){if(o||h)if(A(o))h=o,o=null,h.internalCreateCallback=this.createCallbackHandler,h.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(o)&&A(o[0])){h=o[0];var P=this;o.forEach((function(t){t.internalCreateCallback=P.createCallbackHandler,t.internalRemoveCallback=P.removeCallbackHandler})),o=null}else h={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else h={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=t,h.classType=T(h,"classType",a),this.physicsType=d.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:T(h,"collideWorldBounds",!1),setBoundsRectangle:T(h,"customBoundsRectangle",null),setAccelerationX:T(h,"accelerationX",0),setAccelerationY:T(h,"accelerationY",0),setAllowDrag:T(h,"allowDrag",!0),setAllowGravity:T(h,"allowGravity",!0),setAllowRotation:T(h,"allowRotation",!0),setBounceX:T(h,"bounceX",0),setBounceY:T(h,"bounceY",0),setDragX:T(h,"dragX",0),setDragY:T(h,"dragY",0),setEnable:T(h,"enable",!0),setGravityX:T(h,"gravityX",0),setGravityY:T(h,"gravityY",0),setFrictionX:T(h,"frictionX",0),setFrictionY:T(h,"frictionY",0),setMaxVelocityX:T(h,"maxVelocityX",1e4),setMaxVelocityY:T(h,"maxVelocityY",1e4),setVelocityX:T(h,"velocityX",0),setVelocityY:T(h,"velocityY",0),setAngularVelocity:T(h,"angularVelocity",0),setAngularAcceleration:T(h,"angularAcceleration",0),setAngularDrag:T(h,"angularDrag",0),setMass:T(h,"mass",1),setImmovable:T(h,"immovable",!1)},S.call(this,r,o,h),this.type="PhysicsGroup"},createCallbackHandler:function createCallbackHandler(t){t.body||this.world.enableBody(t,d.DYNAMIC_BODY);var r=t.body;for(var o in this.defaults)r[o](this.defaults[o])},removeCallbackHandler:function removeCallbackHandler(t){t.body&&this.world.disableBody(t)},setVelocity:function setVelocity(t,r,o){void 0===o&&(o=0);for(var a=this.getChildren(),h=0;h<a.length;h++)a[h].body.velocity.set(t+h*o,r+h*o);return this},setVelocityX:function setVelocityX(t,r){void 0===r&&(r=0);for(var o=this.getChildren(),a=0;a<o.length;a++)o[a].body.velocity.x=t+a*r;return this},setVelocityY:function setVelocityY(t,r){void 0===r&&(r=0);for(var o=this.getChildren(),a=0;a<o.length;a++)o[a].body.velocity.y=t+a*r;return this}});t.exports=P},function(t,r,o){var a=o(157),h=o(0),d=o(62),T=o(2),S=o(113),A=o(7),P=new h({Extends:S,initialize:function StaticPhysicsGroup(t,r,o,h){o||h?A(o)?(h=o,o=null,h.internalCreateCallback=this.createCallbackHandler,h.internalRemoveCallback=this.removeCallbackHandler,h.createMultipleCallback=this.createMultipleCallbackHandler,h.classType=T(h,"classType",a)):Array.isArray(o)&&A(o[0])?(h=o,o=null,h.forEach((function(t){t.internalCreateCallback=this.createCallbackHandler,t.internalRemoveCallback=this.removeCallbackHandler,t.createMultipleCallback=this.createMultipleCallbackHandler,t.classType=T(t,"classType",a)}))):h={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler}:h={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:a},this.world=t,this.physicsType=d.STATIC_BODY,S.call(this,r,o,h),this.type="StaticPhysicsGroup"},createCallbackHandler:function createCallbackHandler(t){t.body||this.world.enableBody(t,d.STATIC_BODY)},removeCallbackHandler:function removeCallbackHandler(t){t.body&&this.world.disableBody(t)},createMultipleCallbackHandler:function createMultipleCallbackHandler(){this.refresh()},refresh:function refresh(){for(var t=this.children.entries,r=0;r<t.length;r++)t[r].body.reset();return this}});t.exports=P},function(t,r,o){var a=o(350),h=o(527),d=o(18),T=o(0),S=o(528),A=o(62),P=o(50),O=o(9),D=o(245),L=o(124),I=o(354),B=o(355),N=o(246),G=o(247),Y=o(529),X=o(6),U=o(14),z=o(211),V=o(530),W=o(10),H=o(531),q=o(532),Z=o(537),K=o(538),J=o(149),Q=o(539),$=o(248),tt=o(25),et=o(3),it=o(68),nt=new T({Extends:O,initialize:function World(t,r){O.call(this),this.scene=t,this.bodies=new J,this.staticBodies=new J,this.pendingDestroy=new J,this.colliders=new z,this.gravity=new et(X(r,"gravity.x",0),X(r,"gravity.y",0)),this.bounds=new W(X(r,"x",0),X(r,"y",0),X(r,"width",t.sys.scale.width),X(r,"height",t.sys.scale.height)),this.checkCollision={up:X(r,"checkCollision.up",!0),down:X(r,"checkCollision.down",!0),left:X(r,"checkCollision.left",!0),right:X(r,"checkCollision.right",!0)},this.fps=X(r,"fps",60),this.fixedStep=X(r,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=X(r,"timeScale",1),this.OVERLAP_BIAS=X(r,"overlapBias",4),this.TILE_BIAS=X(r,"tileBias",16),this.forceX=X(r,"forceX",!1),this.isPaused=X(r,"isPaused",!1),this._total=0,this.drawDebug=X(r,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:X(r,"debugShowBody",!0),debugShowStaticBody:X(r,"debugShowStaticBody",!0),debugShowVelocity:X(r,"debugShowVelocity",!0),bodyDebugColor:X(r,"debugBodyColor",16711935),staticBodyDebugColor:X(r,"debugStaticBodyColor",255),velocityDebugColor:X(r,"debugVelocityColor",65280)},this.maxEntries=X(r,"maxEntries",16),this.useTree=X(r,"useTree",!0),this.tree=new H(this.maxEntries),this.staticTree=new H(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new tt,this._tempMatrix2=new tt,this.drawDebug&&this.createDebugGraphic()},enable:function enable(t,r){void 0===r&&(r=A.DYNAMIC_BODY),Array.isArray(t)||(t=[t]);for(var o=0;o<t.length;o++){var a=t[o];if(a.isParent)for(var h=a.getChildren(),d=0;d<h.length;d++){var T=h[d];T.isParent?this.enable(T,r):this.enableBody(T,r)}else this.enableBody(a,r)}},enableBody:function enableBody(t,r){return void 0===r&&(r=A.DYNAMIC_BODY),t.body||(r===A.DYNAMIC_BODY?t.body=new h(this,t):r===A.STATIC_BODY&&(t.body=new Q(this,t))),this.add(t.body),t},add:function add(t){return t.physicsType===A.DYNAMIC_BODY?this.bodies.set(t):t.physicsType===A.STATIC_BODY&&(this.staticBodies.set(t),this.staticTree.insert(t)),t.enable=!0,t},disable:function disable(t){Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var o=t[r];if(o.isParent)for(var a=o.getChildren(),h=0;h<a.length;h++){var d=a[h];d.isParent?this.disable(d):this.disableBody(d.body)}else this.disableBody(o.body)}},disableBody:function disableBody(t){this.remove(t),t.enable=!1},remove:function remove(t){t.physicsType===A.DYNAMIC_BODY?(this.tree.remove(t),this.bodies.delete(t)):t.physicsType===A.STATIC_BODY&&(this.staticBodies.delete(t),this.staticTree.remove(t))},createDebugGraphic:function createDebugGraphic(){var t=this.scene.sys.add.graphics({x:0,y:0});return t.setDepth(Number.MAX_VALUE),this.debugGraphic=t,this.drawDebug=!0,t},setBounds:function setBounds(t,r,o,a,h,d,T,S){return this.bounds.setTo(t,r,o,a),void 0!==h&&this.setBoundsCollision(h,d,T,S),this},setBoundsCollision:function setBoundsCollision(t,r,o,a){return void 0===t&&(t=!0),void 0===r&&(r=!0),void 0===o&&(o=!0),void 0===a&&(a=!0),this.checkCollision.left=t,this.checkCollision.right=r,this.checkCollision.up=o,this.checkCollision.down=a,this},pause:function pause(){return this.isPaused=!0,this.emit(D.PAUSE),this},resume:function resume(){return this.isPaused=!1,this.emit(D.RESUME),this},addCollider:function addCollider(t,r,o,a,h){void 0===o&&(o=null),void 0===a&&(a=null),void 0===h&&(h=o);var d=new S(this,!1,t,r,o,a,h);return this.colliders.add(d),d},addOverlap:function addOverlap(t,r,o,a,h){void 0===o&&(o=null),void 0===a&&(a=null),void 0===h&&(h=o);var d=new S(this,!0,t,r,o,a,h);return this.colliders.add(d),d},removeCollider:function removeCollider(t){return this.colliders.remove(t),this},setFPS:function setFPS(t){return this.fps=t,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function update(t,r){if(!this.isPaused&&0!==this.bodies.size){var o,a,h=this._frameTime,d=this._frameTimeMS*this.timeScale;this._elapsed+=r;var T=this.bodies.entries,S=this._elapsed>=d;for(this.fixedStep||(h=.001*r,S=!0,this._elapsed=0),o=0;o<T.length;o++)(a=T[o]).enable&&a.preUpdate(S,h);if(S){this._elapsed-=d,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(T));var A=this.colliders.update();for(o=0;o<A.length;o++){var P=A[o];P.active&&P.update()}this.emit(D.WORLD_STEP,h)}for(;this._elapsed>=d;)this._elapsed-=d,this.step(h)}},step:function step(t){var r,o,a=this.bodies.entries,h=a.length;for(r=0;r<h;r++)(o=a[r]).enable&&o.update(t);this.useTree&&(this.tree.clear(),this.tree.load(a));var d=this.colliders.update();for(r=0;r<d.length;r++){var T=d[r];T.active&&T.update()}this.emit(D.WORLD_STEP,t),this.stepsLastFrame++},postUpdate:function postUpdate(){var t,r,o=this.bodies.entries,a=o.length,h=this.bodies,d=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,t=0;t<a;t++)(r=o[t]).enable&&r.postUpdate();if(this.drawDebug){var T=this.debugGraphic;for(T.clear(),t=0;t<a;t++)(r=o[t]).willDrawDebug()&&r.drawDebug(T);for(a=(o=d.entries).length,t=0;t<a;t++)(r=o[t]).willDrawDebug()&&r.drawDebug(T)}var S=this.pendingDestroy;if(S.size>0){var P=this.tree,O=this.staticTree;for(a=(o=S.entries).length,t=0;t<a;t++)(r=o[t]).physicsType===A.DYNAMIC_BODY?(P.remove(r),h.delete(r)):r.physicsType===A.STATIC_BODY&&(O.remove(r),d.delete(r)),r.world=void 0,r.gameObject=void 0;S.clear()}},updateMotion:function updateMotion(t,r){t.allowRotation&&this.computeAngularVelocity(t,r),this.computeVelocity(t,r)},computeAngularVelocity:function computeAngularVelocity(t,r){var o=t.angularVelocity,a=t.angularAcceleration,h=t.angularDrag,T=t.maxAngular;a?o+=a*r:t.allowDrag&&h&&(I(o-(h*=r),0,.1)?o-=h:B(o+h,0,.1)?o+=h:o=0);var S=(o=d(o,-T,T))-t.angularVelocity;t.angularVelocity+=S,t.rotation+=t.angularVelocity*r},computeVelocity:function computeVelocity(t,r){var o=t.velocity.x,a=t.acceleration.x,h=t.drag.x,T=t.maxVelocity.x,S=t.velocity.y,A=t.acceleration.y,P=t.drag.y,O=t.maxVelocity.y,D=t.speed,N=t.maxSpeed,G=t.allowDrag,Y=t.useDamping;t.allowGravity&&(o+=(this.gravity.x+t.gravity.x)*r,S+=(this.gravity.y+t.gravity.y)*r),a?o+=a*r:G&&h&&(Y?(o*=h=Math.pow(h,r),D=Math.sqrt(o*o+S*S),L(D,0,.001)&&(o=0)):I(o-(h*=r),0,.01)?o-=h:B(o+h,0,.01)?o+=h:o=0),A?S+=A*r:G&&P&&(Y?(S*=P=Math.pow(P,r),D=Math.sqrt(o*o+S*S),L(D,0,.001)&&(S=0)):I(S-(P*=r),0,.01)?S-=P:B(S+P,0,.01)?S+=P:S=0),o=d(o,-T,T),S=d(S,-O,O),t.velocity.set(o,S),N>-1&&D>N&&(t.velocity.normalize().scale(N),D=N),t.speed=D},separate:function separate(t,r,o,a,h,d){if(!d&&!t.enable||!r.enable||t.checkCollision.none||r.checkCollision.none||!this.intersects(t,r))return!1;if(o&&!1===o.call(a,t.gameObject,r.gameObject))return!1;if(t.isCircle&&r.isCircle)return this.separateCircle(t,r,h);if(t.isCircle!==r.isCircle){var T=t.isCircle?r:t,S=t.isCircle?t:r,A={x:T.x,y:T.y,right:T.right,bottom:T.bottom},P=S.center;if((P.y<A.y||P.y>A.bottom)&&(P.x<A.x||P.x>A.right))return this.separateCircle(t,r,h)}var O=!1,L=!1;h?(O=Z(t,r,h,this.OVERLAP_BIAS),L=K(t,r,h,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+t.gravity.y)<Math.abs(this.gravity.x+t.gravity.x)?(O=Z(t,r,h,this.OVERLAP_BIAS),this.intersects(t,r)&&(L=K(t,r,h,this.OVERLAP_BIAS))):(L=K(t,r,h,this.OVERLAP_BIAS),this.intersects(t,r)&&(O=Z(t,r,h,this.OVERLAP_BIAS)));var I=O||L;return I&&(h?(t.onOverlap||r.onOverlap)&&this.emit(D.OVERLAP,t.gameObject,r.gameObject,t,r):(t.onCollide||r.onCollide)&&this.emit(D.COLLIDE,t.gameObject,r.gameObject,t,r)),I},separateCircle:function separateCircle(t,r,o,h){N(t,r,!1,h),G(t,r,!1,h);var d=0;if(t.isCircle!==r.isCircle){var T={x:r.isCircle?t.position.x:r.position.x,y:r.isCircle?t.position.y:r.position.y,right:r.isCircle?t.right:r.right,bottom:r.isCircle?t.bottom:r.bottom},S={x:t.isCircle?t.center.x:r.center.x,y:t.isCircle?t.center.y:r.center.y,radius:t.isCircle?t.halfWidth:r.halfWidth};S.y<T.y?S.x<T.x?d=P(S.x,S.y,T.x,T.y)-S.radius:S.x>T.right&&(d=P(S.x,S.y,T.right,T.y)-S.radius):S.y>T.bottom&&(S.x<T.x?d=P(S.x,S.y,T.x,T.bottom)-S.radius:S.x>T.right&&(d=P(S.x,S.y,T.right,T.bottom)-S.radius)),d*=-1}else d=t.halfWidth+r.halfWidth-P(t.center.x,t.center.y,r.center.x,r.center.y);if(t.overlapR=d,r.overlapR=d,o||0===d||t.immovable&&r.immovable||t.customSeparateX||r.customSeparateX)return 0!==d&&(t.onOverlap||r.onOverlap)&&this.emit(D.OVERLAP,t.gameObject,r.gameObject,t,r),0!==d;var A=t.center.x-r.center.x,O=t.center.y-r.center.y,L=Math.sqrt(Math.pow(A,2)+Math.pow(O,2)),I=(r.center.x-t.center.x)/L||0,B=(r.center.y-t.center.y)/L||0,Y=2*(t.velocity.x*I+t.velocity.y*B-r.velocity.x*I-r.velocity.y*B)/(t.mass+r.mass);(t.immovable||r.immovable)&&(Y*=2),t.immovable||(t.velocity.x=t.velocity.x-Y/t.mass*I,t.velocity.y=t.velocity.y-Y/t.mass*B),r.immovable||(r.velocity.x=r.velocity.x+Y/r.mass*I,r.velocity.y=r.velocity.y+Y/r.mass*B),t.immovable||r.immovable||(d/=2);var X=a(t.center,r.center),z=(d+U.EPSILON)*Math.cos(X),V=(d+U.EPSILON)*Math.sin(X);return t.immovable||(t.x-=z,t.y-=V,t.updateCenter()),r.immovable||(r.x+=z,r.y+=V,r.updateCenter()),t.velocity.x*=t.bounce.x,t.velocity.y*=t.bounce.y,r.velocity.x*=r.bounce.x,r.velocity.y*=r.bounce.y,(t.onCollide||r.onCollide)&&this.emit(D.COLLIDE,t.gameObject,r.gameObject,t,r),!0},intersects:function intersects(t,r){return t!==r&&(t.isCircle||r.isCircle?t.isCircle?r.isCircle?P(t.center.x,t.center.y,r.center.x,r.center.y)<=t.halfWidth+r.halfWidth:this.circleBodyIntersects(t,r):this.circleBodyIntersects(r,t):!(t.right<=r.position.x||t.bottom<=r.position.y||t.position.x>=r.right||t.position.y>=r.bottom))},circleBodyIntersects:function circleBodyIntersects(t,r){var o=d(t.center.x,r.left,r.right),a=d(t.center.y,r.top,r.bottom);return(t.center.x-o)*(t.center.x-o)+(t.center.y-a)*(t.center.y-a)<=t.halfWidth*t.halfWidth},overlap:function overlap(t,r,o,a,h){return void 0===o&&(o=null),void 0===a&&(a=null),void 0===h&&(h=o),this.collideObjects(t,r,o,a,h,!0)},collide:function collide(t,r,o,a,h){return void 0===o&&(o=null),void 0===a&&(a=null),void 0===h&&(h=o),this.collideObjects(t,r,o,a,h,!1)},collideObjects:function collideObjects(t,r,o,a,h,d){var T,S;t.isParent&&void 0===t.physicsType&&(t=t.children.entries),r&&r.isParent&&void 0===r.physicsType&&(r=r.children.entries);var A=Array.isArray(t),P=Array.isArray(r);if(this._total=0,A||P)if(!A&&P)for(T=0;T<r.length;T++)this.collideHandler(t,r[T],o,a,h,d);else if(A&&!P)if(r)for(T=0;T<t.length;T++)this.collideHandler(t[T],r,o,a,h,d);else for(T=0;T<t.length;T++){var O=t[T];for(S=T+1;S<t.length;S++)T!==S&&this.collideHandler(O,t[S],o,a,h,d)}else for(T=0;T<t.length;T++)for(S=0;S<r.length;S++)this.collideHandler(t[T],r[S],o,a,h,d);else this.collideHandler(t,r,o,a,h,d);return this._total>0},collideHandler:function collideHandler(t,r,o,a,h,d){if(void 0===r&&t.isParent)return this.collideGroupVsGroup(t,t,o,a,h,d);if(!t||!r)return!1;if(t.body){if(r.body)return this.collideSpriteVsSprite(t,r,o,a,h,d);if(r.isParent)return this.collideSpriteVsGroup(t,r,o,a,h,d);if(r.isTilemap)return this.collideSpriteVsTilemapLayer(t,r,o,a,h,d)}else if(t.isParent){if(r.body)return this.collideSpriteVsGroup(r,t,o,a,h,d);if(r.isParent)return this.collideGroupVsGroup(t,r,o,a,h,d);if(r.isTilemap)return this.collideGroupVsTilemapLayer(t,r,o,a,h,d)}else if(t.isTilemap){if(r.body)return this.collideSpriteVsTilemapLayer(r,t,o,a,h,d);if(r.isParent)return this.collideGroupVsTilemapLayer(r,t,o,a,h,d)}},collideSpriteVsSprite:function collideSpriteVsSprite(t,r,o,a,h,d){return!(!t.body||!r.body||(this.separate(t.body,r.body,a,h,d)&&(o&&o.call(h,t,r),this._total++),0))},collideSpriteVsGroup:function collideSpriteVsGroup(t,r,o,a,h,d){var T,S,P,O=t.body;if(0!==r.length&&O&&O.enable&&!O.checkCollision.none)if(this.useTree||r.physicsType===A.STATIC_BODY){var D=this.treeMinMax;D.minX=O.left,D.minY=O.top,D.maxX=O.right,D.maxY=O.bottom;var L=r.physicsType===A.DYNAMIC_BODY?this.tree.search(D):this.staticTree.search(D);for(S=L.length,T=0;T<S;T++)O!==(P=L[T])&&P.enable&&!P.checkCollision.none&&r.contains(P.gameObject)&&this.separate(O,P,a,h,d,!0)&&(o&&o.call(h,O.gameObject,P.gameObject),this._total++)}else{var I=r.getChildren(),B=r.children.entries.indexOf(t);for(S=I.length,T=0;T<S;T++)(P=I[T].body)&&T!==B&&P.enable&&this.separate(O,P,a,h,d)&&(o&&o.call(h,O.gameObject,P.gameObject),this._total++)}},collideGroupVsTilemapLayer:function collideGroupVsTilemapLayer(t,r,o,a,h,d){var T=t.getChildren();if(0===T.length)return!1;for(var S=!1,A=0;A<T.length;A++)T[A].body&&this.collideSpriteVsTilemapLayer(T[A],r,o,a,h,d)&&(S=!0);return S},collideTiles:function collideTiles(t,r,o,a,h){return!(!t.body.enable||0===r.length)&&this.collideSpriteVsTilesHandler(t,r,o,a,h,!1,!1)},overlapTiles:function overlapTiles(t,r,o,a,h){return!(!t.body.enable||0===r.length)&&this.collideSpriteVsTilesHandler(t,r,o,a,h,!0,!1)},collideSpriteVsTilemapLayer:function collideSpriteVsTilemapLayer(t,r,o,a,h,d){var T=t.body;if(!T.enable||T.checkCollision.none)return!1;var S=T.position.x,A=T.position.y,P=T.width,O=T.height,D=r.layer;if(D.tileWidth>D.baseTileWidth){var L=(D.tileWidth-D.baseTileWidth)*r.scaleX;S-=L,P+=L}D.tileHeight>D.baseTileHeight&&(O+=(D.tileHeight-D.baseTileHeight)*r.scaleY);var I=Y(S,A,P,O,null,r.scene.cameras.main,r.layer);return 0!==I.length&&this.collideSpriteVsTilesHandler(t,I,o,a,h,d,!0)},collideSpriteVsTilesHandler:function collideSpriteVsTilesHandler(t,r,o,a,h,d,T){for(var S,A,P=t.body,O={left:0,right:0,top:0,bottom:0},L=!1,I=0;I<r.length;I++){var B=(A=(S=r[I]).tilemapLayer).tileToWorldXY(S.x,S.y);O.left=B.x,O.top=B.y,S.baseHeight!==S.height&&(O.top-=(S.height-S.baseHeight)*A.scaleY),O.right=O.left+S.width*A.scaleX,O.bottom=O.top+S.height*A.scaleY,$(O,P)&&(!a||a.call(h,t,S))&&V(S,t)&&(d||q(I,P,S,O,A,this.TILE_BIAS,T))&&(this._total++,L=!0,o&&o.call(h,t,S),d&&P.onOverlap?this.emit(D.TILE_OVERLAP,t,S,P):P.onCollide&&this.emit(D.TILE_COLLIDE,t,S,P))}return L},collideGroupVsGroup:function collideGroupVsGroup(t,r,o,a,h,d){if(0!==t.length&&0!==r.length)for(var T=t.getChildren(),S=0;S<T.length;S++)this.collideSpriteVsGroup(T[S],r,o,a,h,d)},wrap:function wrap(t,r){t.body?this.wrapObject(t,r):t.getChildren?this.wrapArray(t.getChildren(),r):Array.isArray(t)?this.wrapArray(t,r):this.wrapObject(t,r)},wrapArray:function wrapArray(t,r){for(var o=0;o<t.length;o++)this.wrapObject(t[o],r)},wrapObject:function wrapObject(t,r){void 0===r&&(r=0),t.x=it(t.x,this.bounds.left-r,this.bounds.right+r),t.y=it(t.y,this.bounds.top-r,this.bounds.bottom+r)},shutdown:function shutdown(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function destroy(){this.shutdown(),this.scene=null}});t.exports=nt},function(t,r,o){var a=o(0),h=o(62),d=o(245),T=o(196),S=o(10),A=o(57),P=o(3),O=new a({initialize:function Body(t,r){var o=r.displayWidth?r.displayWidth:64,a=r.displayHeight?r.displayHeight:64;this.world=t,this.gameObject=r,this.transform={x:r.x,y:r.y,rotation:r.angle,scaleX:r.scaleX,scaleY:r.scaleY,displayOriginX:r.displayOriginX,displayOriginY:r.displayOriginY},this.debugShowBody=t.defaults.debugShowBody,this.debugShowVelocity=t.defaults.debugShowVelocity,this.debugBodyColor=t.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new P,this.position=new P(r.x-r.scaleX*r.displayOriginX,r.y-r.scaleY*r.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=r.angle,this.preRotation=r.angle,this.width=o,this.height=a,this.sourceWidth=o,this.sourceHeight=a,r.frame&&(this.sourceWidth=r.frame.realWidth,this.sourceHeight=r.frame.realHeight),this.halfWidth=Math.abs(o/2),this.halfHeight=Math.abs(a/2),this.center=new P(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new P,this.newVelocity=new P,this.deltaMax=new P,this.acceleration=new P,this.allowDrag=!0,this.drag=new P,this.allowGravity=!0,this.gravity=new P,this.bounce=new P,this.worldBounce=null,this.customBoundsRectangle=t.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new P(1e4,1e4),this.maxSpeed=-1,this.friction=new P(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=h.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=h.DYNAMIC_BODY,this._sx=r.scaleX,this._sy=r.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new S},updateBounds:function updateBounds(){var t=this.gameObject,r=this.transform;if(t.parentContainer){var o=t.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);r.x=o.tx,r.y=o.ty,r.rotation=T(o.rotation),r.scaleX=o.scaleX,r.scaleY=o.scaleY,r.displayOriginX=t.displayOriginX,r.displayOriginY=t.displayOriginY}else r.x=t.x,r.y=t.y,r.rotation=t.angle,r.scaleX=t.scaleX,r.scaleY=t.scaleY,r.displayOriginX=t.displayOriginX,r.displayOriginY=t.displayOriginY;var a=!1;if(this.syncBounds){var h=t.getBounds(this._bounds);this.width=h.width,this.height=h.height,a=!0}else{var d=Math.abs(r.scaleX),S=Math.abs(r.scaleY);this._sx===d&&this._sy===S||(this.width=this.sourceWidth*d,this.height=this.sourceHeight*S,this._sx=d,this._sy=S,a=!0)}a&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function updateCenter(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function updateFromGameObject(){this.updateBounds();var t=this.transform;this.position.x=t.x+t.scaleX*(this.offset.x-t.displayOriginX),this.position.y=t.y+t.scaleY*(this.offset.y-t.displayOriginY),this.updateCenter()},resetFlags:function resetFlags(t){void 0===t&&(t=!1);var r=this.wasTouching,o=this.touching,a=this.blocked;t?(r.none=!0,r.up=!1,r.down=!1,r.left=!1,r.right=!1):(r.none=o.none,r.up=o.up,r.down=o.down,r.left=o.left,r.right=o.right),o.none=!0,o.up=!1,o.down=!1,o.left=!1,o.right=!1,a.none=!0,a.up=!1,a.down=!1,a.left=!1,a.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function preUpdate(t,r){t&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),t&&this.update(r)},update:function update(t){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,t);var r=this.velocity.x,o=this.velocity.y;this.newVelocity.set(r*t,o*t),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(o,r),this.speed=Math.sqrt(r*r+o*o),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(d.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function postUpdate(){var t=this.position.x-this.prevFrame.x,r=this.position.y-this.prevFrame.y;if(this.moves){var o=this.deltaMax.x,a=this.deltaMax.y;0!==o&&0!==t&&(t<0&&t<-o?t=-o:t>0&&t>o&&(t=o)),0!==a&&0!==r&&(r<0&&r<-a?r=-a:r>0&&r>a&&(r=a)),this.gameObject.x+=t,this.gameObject.y+=r}t<0?this.facing=h.FACING_LEFT:t>0&&(this.facing=h.FACING_RIGHT),r<0?this.facing=h.FACING_UP:r>0&&(this.facing=h.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=t,this._ty=r},setBoundsRectangle:function setBoundsRectangle(t){return this.customBoundsRectangle=t||this.world.bounds,this},checkWorldBounds:function checkWorldBounds(){var t=this.position,r=this.customBoundsRectangle,o=this.world.checkCollision,a=this.worldBounce?-this.worldBounce.x:-this.bounce.x,h=this.worldBounce?-this.worldBounce.y:-this.bounce.y,d=!1;return t.x<r.x&&o.left?(t.x=r.x,this.velocity.x*=a,this.blocked.left=!0,d=!0):this.right>r.right&&o.right&&(t.x=r.right-this.width,this.velocity.x*=a,this.blocked.right=!0,d=!0),t.y<r.y&&o.up?(t.y=r.y,this.velocity.y*=h,this.blocked.up=!0,d=!0):this.bottom>r.bottom&&o.down&&(t.y=r.bottom-this.height,this.velocity.y*=h,this.blocked.down=!0,d=!0),d&&(this.blocked.none=!1,this.updateCenter()),d},setOffset:function setOffset(t,r){return void 0===r&&(r=t),this.offset.set(t,r),this},setSize:function setSize(t,r,o){void 0===o&&(o=!0);var a=this.gameObject;if(!t&&a.frame&&(t=a.frame.realWidth),!r&&a.frame&&(r=a.frame.realHeight),this.sourceWidth=t,this.sourceHeight=r,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),o&&a.getCenter){var h=(a.width-t)/2,d=(a.height-r)/2;this.offset.set(h,d)}return this.isCircle=!1,this.radius=0,this},setCircle:function setCircle(t,r,o){return void 0===r&&(r=this.offset.x),void 0===o&&(o=this.offset.y),t>0?(this.isCircle=!0,this.radius=t,this.sourceWidth=2*t,this.sourceHeight=2*t,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(r,o),this.updateCenter()):this.isCircle=!1,this},reset:function reset(t,r){this.stop();var o=this.gameObject;o.setPosition(t,r),o.getTopLeft?o.getTopLeft(this.position):this.position.set(t,r),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=o.angle,this.preRotation=o.angle,this.updateBounds(),this.updateCenter(),this.resetFlags(!0)},stop:function stop(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function getBounds(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function hitTest(t,r){return this.isCircle?this.radius>0&&t>=this.left&&t<=this.right&&r>=this.top&&r<=this.bottom&&(this.center.x-t)*(this.center.x-t)+(this.center.y-r)*(this.center.y-r)<=this.radius*this.radius:A(this,t,r)},onFloor:function onFloor(){return this.blocked.down},onCeiling:function onCeiling(){return this.blocked.up},onWall:function onWall(){return this.blocked.left||this.blocked.right},deltaAbsX:function deltaAbsX(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function deltaAbsY(){return this._dy>0?this._dy:-this._dy},deltaX:function deltaX(){return this._dx},deltaY:function deltaY(){return this._dy},deltaXFinal:function deltaXFinal(){return this._tx},deltaYFinal:function deltaYFinal(){return this._ty},deltaZ:function deltaZ(){return this.rotation-this.preRotation},destroy:function destroy(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function drawDebug(t){var r=this.position,o=r.x+this.halfWidth,a=r.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor),this.isCircle?t.strokeCircle(o,a,this.width/2):(this.checkCollision.up&&t.lineBetween(r.x,r.y,r.x+this.width,r.y),this.checkCollision.right&&t.lineBetween(r.x+this.width,r.y,r.x+this.width,r.y+this.height),this.checkCollision.down&&t.lineBetween(r.x,r.y+this.height,r.x+this.width,r.y+this.height),this.checkCollision.left&&t.lineBetween(r.x,r.y,r.x,r.y+this.height))),this.debugShowVelocity&&(t.lineStyle(t.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),t.lineBetween(o,a,o+this.velocity.x/2,a+this.velocity.y/2))},willDrawDebug:function willDrawDebug(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function setCollideWorldBounds(t,r,o,a){void 0===t&&(t=!0),this.collideWorldBounds=t;var h=void 0!==r,d=void 0!==o;return(h||d)&&(this.worldBounce||(this.worldBounce=new P),h&&(this.worldBounce.x=r),d&&(this.worldBounce.y=o)),void 0!==a&&(this.onWorldBounds=a),this},setVelocity:function setVelocity(t,r){return this.velocity.set(t,r),t=this.velocity.x,r=this.velocity.y,this.speed=Math.sqrt(t*t+r*r),this},setVelocityX:function setVelocityX(t){this.velocity.x=t;var r=t,o=this.velocity.y;return this.speed=Math.sqrt(r*r+o*o),this},setVelocityY:function setVelocityY(t){this.velocity.y=t;var r=this.velocity.x,o=t;return this.speed=Math.sqrt(r*r+o*o),this},setMaxVelocity:function setMaxVelocity(t,r){return this.maxVelocity.set(t,r),this},setMaxVelocityX:function setMaxVelocityX(t){return this.maxVelocity.x=t,this},setMaxVelocityY:function setMaxVelocityY(t){return this.maxVelocity.y=t,this},setMaxSpeed:function setMaxSpeed(t){return this.maxSpeed=t,this},setBounce:function setBounce(t,r){return this.bounce.set(t,r),this},setBounceX:function setBounceX(t){return this.bounce.x=t,this},setBounceY:function setBounceY(t){return this.bounce.y=t,this},setAcceleration:function setAcceleration(t,r){return this.acceleration.set(t,r),this},setAccelerationX:function setAccelerationX(t){return this.acceleration.x=t,this},setAccelerationY:function setAccelerationY(t){return this.acceleration.y=t,this},setAllowDrag:function setAllowDrag(t){return void 0===t&&(t=!0),this.allowDrag=t,this},setAllowGravity:function setAllowGravity(t){return void 0===t&&(t=!0),this.allowGravity=t,this},setAllowRotation:function setAllowRotation(t){return void 0===t&&(t=!0),this.allowRotation=t,this},setDrag:function setDrag(t,r){return this.drag.set(t,r),this},setDamping:function setDamping(t){return this.useDamping=t,this},setDragX:function setDragX(t){return this.drag.x=t,this},setDragY:function setDragY(t){return this.drag.y=t,this},setGravity:function setGravity(t,r){return this.gravity.set(t,r),this},setGravityX:function setGravityX(t){return this.gravity.x=t,this},setGravityY:function setGravityY(t){return this.gravity.y=t,this},setFriction:function setFriction(t,r){return this.friction.set(t,r),this},setFrictionX:function setFrictionX(t){return this.friction.x=t,this},setFrictionY:function setFrictionY(t){return this.friction.y=t,this},setAngularVelocity:function setAngularVelocity(t){return this.angularVelocity=t,this},setAngularAcceleration:function setAngularAcceleration(t){return this.angularAcceleration=t,this},setAngularDrag:function setAngularDrag(t){return this.angularDrag=t,this},setMass:function setMass(t){return this.mass=t,this},setImmovable:function setImmovable(t){return void 0===t&&(t=!0),this.immovable=t,this},setEnable:function setEnable(t){return void 0===t&&(t=!0),this.enable=t,this},processX:function processX(t,r,o,a){this.x+=t,this.updateCenter(),null!==r&&(this.velocity.x=r);var h=this.blocked;o&&(h.left=!0),a&&(h.right=!0)},processY:function processY(t,r,o,a){this.y+=t,this.updateCenter(),null!==r&&(this.velocity.y=r);var h=this.blocked;o&&(h.up=!0),a&&(h.down=!0)},x:{get:function get(){return this.position.x},set:function set(t){this.position.x=t}},y:{get:function get(){return this.position.y},set:function set(t){this.position.y=t}},left:{get:function get(){return this.position.x}},right:{get:function get(){return this.position.x+this.width}},top:{get:function get(){return this.position.y}},bottom:{get:function get(){return this.position.y+this.height}}});t.exports=O},function(t,r,o){var a=new(o(0))({initialize:function Collider(t,r,o,a,h,d,T){this.world=t,this.name="",this.active=!0,this.overlapOnly=r,this.object1=o,this.object2=a,this.collideCallback=h,this.processCallback=d,this.callbackContext=T},setName:function setName(t){return this.name=t,this},update:function update(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function destroy(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});t.exports=a},function(t,r,o){var a=o(26),h=o(3),d=new h,T=new h;t.exports=function GetTilesWithinWorldXY(t,r,o,h,S,A,P){var O=P.tilemapLayer.tilemap._convert.WorldToTileXY;O(t,r,!0,d,A,P);var D=d.x,L=d.y;O(t+o,r+h,!1,T,A,P);var I=Math.ceil(T.x),B=Math.ceil(T.y);return a(D,L,I-D,B-L,S,P)}},function(t,r){t.exports=function ProcessTileCallbacks(t,r){return t.collisionCallback?!t.collisionCallback.call(t.collisionCallbackContext,r,t):!t.layer.callbacks[t.index]||!t.layer.callbacks[t.index].callback.call(t.layer.callbacks[t.index].callbackContext,r,t)}},function(t,r,o){var a,h=o(436);function rbush(t){if(!(this instanceof rbush))return new rbush(t);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}function findItem(t,r,o){if(!o)return r.indexOf(t);for(var a=0;a<r.length;a++)if(o(t,r[a]))return a;return-1}function calcBBox(t,r){distBBox(t,0,t.children.length,r,t)}function distBBox(t,r,o,a,h){h||(h=createNode(null)),h.minX=1/0,h.minY=1/0,h.maxX=-1/0,h.maxY=-1/0;for(var d,T=r;T<o;T++)d=t.children[T],extend(h,t.leaf?a(d):d);return h}function extend(t,r){return t.minX=Math.min(t.minX,r.minX),t.minY=Math.min(t.minY,r.minY),t.maxX=Math.max(t.maxX,r.maxX),t.maxY=Math.max(t.maxY,r.maxY),t}function compareNodeMinX(t,r){return t.minX-r.minX}function compareNodeMinY(t,r){return t.minY-r.minY}function bboxArea(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function bboxMargin(t){return t.maxX-t.minX+(t.maxY-t.minY)}function contains(t,r){return t.minX<=r.minX&&t.minY<=r.minY&&r.maxX<=t.maxX&&r.maxY<=t.maxY}function intersects(t,r){return r.minX<=t.maxX&&r.minY<=t.maxY&&r.maxX>=t.minX&&r.maxY>=t.minY}function createNode(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function multiSelect(t,r,o,a,d){for(var T,S=[r,o];S.length;)(o=S.pop())-(r=S.pop())<=a||(T=r+Math.ceil((o-r)/a/2)*a,h(t,T,r,o,d),S.push(r,T,T,o))}rbush.prototype=(a={all:function all(){return this._all(this.data,[])},search:function search(t){var r=this.data,o=[],a=this.toBBox;if(!intersects(t,r))return o;for(var h,d,T,S,A=[];r;){for(h=0,d=r.children.length;h<d;h++)T=r.children[h],intersects(t,S=r.leaf?a(T):T)&&(r.leaf?o.push(T):contains(t,S)?this._all(T,o):A.push(T));r=A.pop()}return o},collides:function collides(t){var r=this.data,o=this.toBBox;if(!intersects(t,r))return!1;for(var a,h,d,T,S=[];r;){for(a=0,h=r.children.length;a<h;a++)if(d=r.children[a],intersects(t,T=r.leaf?o(d):d)){if(r.leaf||contains(t,T))return!0;S.push(d)}r=S.pop()}return!1},load:function load(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var r=0,o=t.length;r<o;r++)this.insert(t[r]);return this}var a=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===a.height)this._splitRoot(this.data,a);else{if(this.data.height<a.height){var h=this.data;this.data=a,a=h}this._insert(a,this.data.height-a.height-1,!0)}else this.data=a;return this},insert:function insert(t){return t&&this._insert(t,this.data.height-1),this},clear:function clear(){return this.data=createNode([]),this},remove:function remove(t,r){if(!t)return this;for(var o,a,h,d,T=this.data,S=this.toBBox(t),A=[],P=[];T||A.length;){if(T||(T=A.pop(),a=A[A.length-1],o=P.pop(),d=!0),T.leaf&&-1!==(h=findItem(t,T.children,r)))return T.children.splice(h,1),A.push(T),this._condense(A),this;d||T.leaf||!contains(T,S)?a?(o++,T=a.children[o],d=!1):T=null:(A.push(T),P.push(o),o=0,a=T,T=T.children[0])}return this},toBBox:function toBBox(t){return t},compareMinX:compareNodeMinX,compareMinY:compareNodeMinY,toJSON:function toJSON(){return this.data},fromJSON:function fromJSON(t){return this.data=t,this},_all:function _all(t,r){for(var o=[];t;)t.leaf?r.push.apply(r,t.children):o.push.apply(o,t.children),t=o.pop();return r},_build:function _build(t,r,o,a){var h,d=o-r+1,T=this._maxEntries;if(d<=T)return calcBBox(h=createNode(t.slice(r,o+1)),this.toBBox),h;a||(a=Math.ceil(Math.log(d)/Math.log(T)),T=Math.ceil(d/Math.pow(T,a-1))),(h=createNode([])).leaf=!1,h.height=a;var S,A,P,O,D=Math.ceil(d/T),L=D*Math.ceil(Math.sqrt(T));for(multiSelect(t,r,o,L,this.compareMinX),S=r;S<=o;S+=L)for(multiSelect(t,S,P=Math.min(S+L-1,o),D,this.compareMinY),A=S;A<=P;A+=D)O=Math.min(A+D-1,P),h.children.push(this._build(t,A,O,a-1));return calcBBox(h,this.toBBox),h},_chooseSubtree:function _chooseSubtree(t,r,o,a){for(var h,d,T,S,A,P,O,D,L,I;a.push(r),!r.leaf&&a.length-1!==o;){for(O=D=1/0,h=0,d=r.children.length;h<d;h++)A=bboxArea(T=r.children[h]),L=t,I=T,(P=(Math.max(I.maxX,L.maxX)-Math.min(I.minX,L.minX))*(Math.max(I.maxY,L.maxY)-Math.min(I.minY,L.minY))-A)<D?(D=P,O=A<O?A:O,S=T):P===D&&A<O&&(O=A,S=T);r=S||r.children[0]}return r},_insert:function _insert(t,r,o){var a=this.toBBox,h=o?t:a(t),d=[],T=this._chooseSubtree(h,this.data,r,d);for(T.children.push(t),extend(T,h);r>=0&&d[r].children.length>this._maxEntries;)this._split(d,r),r--;this._adjustParentBBoxes(h,d,r)},_split:function _split(t,r){var o=t[r],a=o.children.length,h=this._minEntries;this._chooseSplitAxis(o,h,a);var d=this._chooseSplitIndex(o,h,a),T=createNode(o.children.splice(d,o.children.length-d));T.height=o.height,T.leaf=o.leaf,calcBBox(o,this.toBBox),calcBBox(T,this.toBBox),r?t[r-1].children.push(T):this._splitRoot(o,T)},_splitRoot:function _splitRoot(t,r){this.data=createNode([t,r]),this.data.height=t.height+1,this.data.leaf=!1,calcBBox(this.data,this.toBBox)},_chooseSplitIndex:function _chooseSplitIndex(t,r,o){var a,h,d,T,S,A,P,O,D,L,I,B,N,G;for(A=P=1/0,a=r;a<=o-r;a++)h=distBBox(t,0,a,this.toBBox),d=distBBox(t,a,o,this.toBBox),D=h,L=d,I=void 0,B=void 0,N=void 0,G=void 0,I=Math.max(D.minX,L.minX),B=Math.max(D.minY,L.minY),N=Math.min(D.maxX,L.maxX),G=Math.min(D.maxY,L.maxY),T=Math.max(0,N-I)*Math.max(0,G-B),S=bboxArea(h)+bboxArea(d),T<A?(A=T,O=a,P=S<P?S:P):T===A&&S<P&&(P=S,O=a);return O},_chooseSplitAxis:function _chooseSplitAxis(t,r,o){var a=t.leaf?this.compareMinX:compareNodeMinX,h=t.leaf?this.compareMinY:compareNodeMinY;this._allDistMargin(t,r,o,a)<this._allDistMargin(t,r,o,h)&&t.children.sort(a)},_allDistMargin:function _allDistMargin(t,r,o,a){t.children.sort(a);var h,d,T=this.toBBox,S=distBBox(t,0,r,T),A=distBBox(t,o-r,o,T),P=bboxMargin(S)+bboxMargin(A);for(h=r;h<o-r;h++)d=t.children[h],extend(S,t.leaf?T(d):d),P+=bboxMargin(S);for(h=o-r-1;h>=r;h--)d=t.children[h],extend(A,t.leaf?T(d):d),P+=bboxMargin(A);return P},_adjustParentBBoxes:function _adjustParentBBoxes(t,r,o){for(var a=o;a>=0;a--)extend(r[a],t)},_condense:function _condense(t){for(var r,o=t.length-1;o>=0;o--)0===t[o].children.length?o>0?(r=t[o-1].children).splice(r.indexOf(t[o]),1):this.clear():calcBBox(t[o],this.toBBox)}},_defineProperty(a,"compareMinX",(function compareMinX(t,r){return t.left-r.left})),_defineProperty(a,"compareMinY",(function compareMinY(t,r){return t.top-r.top})),_defineProperty(a,"toBBox",(function toBBox(t){return{minX:t.left,minY:t.top,maxX:t.right,maxY:t.bottom}})),a),t.exports=rbush},function(t,r,o){var a=o(533),h=o(535),d=o(248);t.exports=function SeparateTile(t,r,o,T,S,A,P){var O=T.left,D=T.top,L=T.right,I=T.bottom,B=o.faceLeft||o.faceRight,N=o.faceTop||o.faceBottom;if(P||(B=!0,N=!0),!B&&!N)return!1;var G=0,Y=0,X=0,U=1;if(r.deltaAbsX()>r.deltaAbsY()?X=-1:r.deltaAbsX()<r.deltaAbsY()&&(U=-1),0!==r.deltaX()&&0!==r.deltaY()&&B&&N&&(X=Math.min(Math.abs(r.position.x-L),Math.abs(r.right-O)),U=Math.min(Math.abs(r.position.y-I),Math.abs(r.bottom-D))),X<U){if(B&&0!==(G=a(r,o,O,L,A,P))&&!d(T,r))return!0;N&&(Y=h(r,o,D,I,A,P))}else{if(N&&0!==(Y=h(r,o,D,I,A,P))&&!d(T,r))return!0;B&&(G=a(r,o,O,L,A,P))}return 0!==G||0!==Y}},function(t,r,o){var a=o(534);t.exports=function TileCheckX(t,r,o,h,d,T){var S=0,A=r.faceLeft,P=r.faceRight,O=r.collideLeft,D=r.collideRight;return T||(A=!0,P=!0,O=!0,D=!0),t.deltaX()<0&&D&&t.checkCollision.left?P&&t.x<h&&(S=t.x-h)<-d&&(S=0):t.deltaX()>0&&O&&t.checkCollision.right&&A&&t.right>o&&(S=t.right-o)>d&&(S=0),0!==S&&(t.customSeparateX?t.overlapX=S:a(t,S)),S}},function(t,r){t.exports=function ProcessTileSeparationX(t,r){r<0?(t.blocked.none=!1,t.blocked.left=!0):r>0&&(t.blocked.none=!1,t.blocked.right=!0),t.position.x-=r,0===t.bounce.x?t.velocity.x=0:t.velocity.x=-t.velocity.x*t.bounce.x}},function(t,r,o){var a=o(536);t.exports=function TileCheckY(t,r,o,h,d,T){var S=0,A=r.faceTop,P=r.faceBottom,O=r.collideUp,D=r.collideDown;return T||(A=!0,P=!0,O=!0,D=!0),t.deltaY()<0&&D&&t.checkCollision.up?P&&t.y<h&&(S=t.y-h)<-d&&(S=0):t.deltaY()>0&&O&&t.checkCollision.down&&A&&t.bottom>o&&(S=t.bottom-o)>d&&(S=0),0!==S&&(t.customSeparateY?t.overlapY=S:a(t,S)),S}},function(t,r){t.exports=function ProcessTileSeparationY(t,r){r<0?(t.blocked.none=!1,t.blocked.up=!0):r>0&&(t.blocked.none=!1,t.blocked.down=!0),t.position.y-=r,0===t.bounce.y?t.velocity.y=0:t.velocity.y=-t.velocity.y*t.bounce.y}},function(t,r,o){var a=o(246),h=o(1389);t.exports=function SeparateX(t,r,o,d){var T=a(t,r,o,d),S=t.immovable,A=r.immovable;if(o||0===T||S&&A||t.customSeparateX||r.customSeparateX)return 0!==T||t.embedded&&r.embedded;var P=h.Set(t,r,T);return S||A?(S?h.RunImmovableBody1(P):A&&h.RunImmovableBody2(P),!0):P>0||h.Check()}},function(t,r,o){var a=o(247),h=o(1390);t.exports=function SeparateY(t,r,o,d){var T=a(t,r,o,d),S=t.immovable,A=r.immovable;if(o||0===T||S&&A||t.customSeparateY||r.customSeparateY)return 0!==T||t.embedded&&r.embedded;var P=h.Set(t,r,T);return S||A?(S?h.RunImmovableBody1(P):A&&h.RunImmovableBody2(P),!0):P>0||h.Check()}},function(t,r,o){var a=o(66),h=o(0),d=o(62),T=o(57),S=o(3),A=new h({initialize:function StaticBody(t,r){var o=r.displayWidth?r.displayWidth:64,a=r.displayHeight?r.displayHeight:64;this.world=t,this.gameObject=r,this.debugShowBody=t.defaults.debugShowStaticBody,this.debugBodyColor=t.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new S,this.position=new S(r.x-o*r.originX,r.y-a*r.originY),this.width=o,this.height=a,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new S(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=S.ZERO,this.allowGravity=!1,this.gravity=S.ZERO,this.bounce=S.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=d.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function setGameObject(t,r){return t&&t!==this.gameObject&&(this.gameObject.body=null,t.body=this,this.gameObject=t),r&&this.updateFromGameObject(),this},updateFromGameObject:function updateFromGameObject(){this.world.staticTree.remove(this);var t=this.gameObject;return t.getTopLeft(this.position),this.width=t.displayWidth,this.height=t.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function setOffset(t,r){return void 0===r&&(r=t),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(t,r),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function setSize(t,r,o){void 0===o&&(o=!0);var a=this.gameObject;if(!t&&a.frame&&(t=a.frame.realWidth),!r&&a.frame&&(r=a.frame.realHeight),this.world.staticTree.remove(this),this.width=t,this.height=r,this.halfWidth=Math.floor(t/2),this.halfHeight=Math.floor(r/2),o&&a.getCenter){var h=a.displayWidth/2,d=a.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(h-this.halfWidth,d-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function setCircle(t,r,o){return void 0===r&&(r=this.offset.x),void 0===o&&(o=this.offset.y),t>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=t,this.width=2*t,this.height=2*t,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(r,o),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function updateCenter(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function reset(t,r){var o=this.gameObject;void 0===t&&(t=o.x),void 0===r&&(r=o.y),this.world.staticTree.remove(this),o.setPosition(t,r),o.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function stop(){return this},getBounds:function getBounds(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function hitTest(t,r){return this.isCircle?a(this,t,r):T(this,t,r)},postUpdate:function postUpdate(){},deltaAbsX:function deltaAbsX(){return 0},deltaAbsY:function deltaAbsY(){return 0},deltaX:function deltaX(){return 0},deltaY:function deltaY(){return 0},deltaZ:function deltaZ(){return 0},destroy:function destroy(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function drawDebug(t){var r=this.position,o=r.x+this.halfWidth,a=r.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?t.strokeCircle(o,a,this.width/2):t.strokeRect(r.x,r.y,this.width,this.height))},willDrawDebug:function willDrawDebug(){return this.debugShowBody},setMass:function setMass(t){return t<=0&&(t=.1),this.mass=t,this},x:{get:function get(){return this.position.x},set:function set(t){this.world.staticTree.remove(this),this.position.x=t,this.world.staticTree.insert(this)}},y:{get:function get(){return this.position.y},set:function set(t){this.world.staticTree.remove(this),this.position.y=t,this.world.staticTree.insert(this)}},left:{get:function get(){return this.position.x}},right:{get:function get(){return this.position.x+this.width}},top:{get:function get(){return this.position.y}},bottom:{get:function get(){return this.position.y+this.height}}});t.exports=A},function(t,r,o){var a=new(o(0))({initialize:function BasePlugin(t){this.pluginManager=t,this.game=t.game},init:function init(){},start:function start(){},stop:function stop(){},destroy:function destroy(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=a},function(t,r,o){var a=new(o(3));t.exports=function CheckIsoBounds(t,r,o,h){var d=o.tilemapLayer,T=d.cullPaddingX,S=d.cullPaddingY,A=d.tilemap.tileToWorldXY(t,r,a,h,d);return A.x>h.worldView.x+d.scaleX*o.tileWidth*(-T-.5)&&A.x<h.worldView.right+d.scaleX*o.tileWidth*(T-.5)&&A.y>h.worldView.y+d.scaleY*o.tileHeight*(-S-1)&&A.y<h.worldView.bottom+d.scaleY*o.tileHeight*(S-.5)}},function(t,r,o){var a=o(26);t.exports=function ReplaceByIndex(t,r,o,h,d,T,S){for(var A=a(o,h,d,T,null,S),P=0;P<A.length;P++)A[P]&&A[P].index===t&&(A[P].index=r)}},function(t,r,o){var a=o(10),h=o(139),d=o(76),T=new a;t.exports=function CullBounds(t,r){var o=t.tilemapLayer.tilemap,a=t.tilemapLayer,S=Math.floor(o.tileWidth*a.scaleX),A=Math.floor(o.tileHeight*a.scaleY),P=d(r.worldView.x-a.x,S,0,!0)-a.cullPaddingX,O=h(r.worldView.right-a.x,S,0,!0)+a.cullPaddingX,D=d(r.worldView.y-a.y,A,0,!0)-a.cullPaddingY,L=h(r.worldView.bottom-a.y,A,0,!0)+a.cullPaddingY;return T.setTo(P,D,O-P,L-D)}},function(t,r,o){var a=o(543),h=o(159);t.exports=function CullTiles(t,r,o,d){void 0===o&&(o=[]),void 0===d&&(d=0),o.length=0;var T=t.tilemapLayer,S=a(t,r);return(T.skipCull||1!==T.scrollFactorX||1!==T.scrollFactorY)&&(S.left=0,S.right=t.width,S.top=0,S.bottom=t.height),h(t,S,d,o),o}},function(t,r,o){var a=o(546),h=o(159);t.exports=function HexagonalCullTiles(t,r,o,d){void 0===o&&(o=[]),void 0===d&&(d=0),o.length=0;var T=t.tilemapLayer;if(!T.skipCull&&1===T.scrollFactorX&&1===T.scrollFactorY){var S=a(t,r);h(t,S,d,o)}return o}},function(t,r,o){var a=o(139),h=o(76);t.exports=function HexagonalCullBounds(t,r){var o=t.tilemapLayer.tilemap,d=t.tilemapLayer,T=Math.floor(o.tileWidth*d.scaleX),S=Math.floor(o.tileHeight*d.scaleY),A=t.hexSideLength,P=(S-A)/2+A;return{left:h(r.worldView.x-d.x,T,0,!0)-d.cullPaddingX,right:a(r.worldView.right-d.x,T,0,!0)+d.cullPaddingX,top:h(r.worldView.y-d.y,P,0,!0)-d.cullPaddingY,bottom:a(r.worldView.bottom-d.y,P,0,!0)+d.cullPaddingY}}},function(t,r,o){var a=o(541);t.exports=function IsometricCullTiles(t,r,o,h){void 0===o&&(o=[]),void 0===h&&(h=0),o.length=0;var d,T,S,A=t.tilemapLayer,P=t.data,O=t.width,D=t.height,L=O,I=D;if(!A.skipCull)if(0===h){for(T=0;T<I;T++)for(d=0;P[T]&&d<L;d++)if(a(d,T,t,r)){if(!(S=P[T][d])||-1===S.index||!S.visible||0===S.alpha)continue;o.push(S)}}else if(1===h){for(T=0;T<I;T++)for(d=L;P[T]&&d>=0;d--)if(a(d,T,t,r)){if(!(S=P[T][d])||-1===S.index||!S.visible||0===S.alpha)continue;o.push(S)}}else if(2===h){for(T=I;T>=0;T--)for(d=0;P[T]&&d<L;d++)if(a(d,T,t,r)){if(!(S=P[T][d])||-1===S.index||!S.visible||0===S.alpha)continue;o.push(S)}}else if(3===h)for(T=I;T>=0;T--)for(d=L;P[T]&&d>=0;d--)if(a(d,T,t,r)){if(!(S=P[T][d])||-1===S.index||!S.visible||0===S.alpha)continue;o.push(S)}return A.tilesDrawn=o.length,A.tilesTotal=O*D,o}},function(t,r,o){var a=o(549),h=o(159);t.exports=function StaggeredCullTiles(t,r,o,d){void 0===o&&(o=[]),void 0===d&&(d=0),o.length=0;var T=t.tilemapLayer;if(!T.skipCull&&1===T.scrollFactorX&&1===T.scrollFactorY){var S=a(t,r);h(t,S,d,o)}return o}},function(t,r,o){var a=o(139),h=o(76);t.exports=function StaggeredCullBounds(t,r){var o=t.tilemapLayer.tilemap,d=t.tilemapLayer,T=Math.floor(o.tileWidth*d.scaleX),S=Math.floor(o.tileHeight*d.scaleY);return{left:h(r.worldView.x-d.x,T,0,!0)-d.cullPaddingX,right:a(r.worldView.right-d.x,T,0,!0)+d.cullPaddingX,top:h(r.worldView.y-d.y,S/2,0,!0)-d.cullPaddingY,bottom:a(r.worldView.bottom-d.y,S/2,0,!0)+d.cullPaddingY}}},function(t,r,o){var a=o(3);t.exports=function HexagonalTileToWorldXY(t,r,o,h,d){o||(o=new a);var T=d.baseTileWidth,S=d.baseTileHeight,A=d.tilemapLayer,P=0,O=0;A&&(h||(h=A.scene.cameras.main),P=A.x+h.scrollX*(1-A.scrollFactorX),T*=A.scaleX,O=A.y+h.scrollY*(1-A.scrollFactorY),S*=A.scaleY);var D=d.hexSideLength,L=P+t*T+r%2*(T/2),I=O+r*((S-D)/2+D);return o.set(L,I)}},function(t,r,o){var a=o(3);t.exports=function IsometricTileToWorldXY(t,r,o,h,d){o||(o=new a);var T=d.baseTileWidth,S=d.baseTileHeight,A=d.tilemapLayer,P=0,O=0;A&&(h||(h=A.scene.cameras.main),P=A.x+h.scrollX*(1-A.scrollFactorX),T*=A.scaleX,O=A.y+h.scrollY*(1-A.scrollFactorY),S*=A.scaleY);var D=P+T/2*(t-r),L=O+(t+r)*(S/2);return o.set(D,L)}},function(t,r,o){var a=o(3);t.exports=function StaggeredTileToWorldXY(t,r,o,h,d){o||(o=new a);var T=d.baseTileWidth,S=d.baseTileHeight,A=d.tilemapLayer,P=0,O=0;A&&(h||(h=A.scene.cameras.main),P=A.x+h.scrollX*(1-A.scrollFactorX),T*=A.scaleX,O=A.y+h.scrollY*(1-A.scrollFactorY),S*=A.scaleY);var D=P+t*T+r%2*(T/2),L=O+r*(S/2);return o.set(D,L)}},function(t,r,o){var a=o(253),h=o(254),d=o(3);t.exports=function TileToWorldXY(t,r,o,T,S){return o||(o=new d(0,0)),o.x=a(t,T,S),o.y=h(r,T,S),o}},function(t,r){t.exports=function HexagonalTileToWorldY(t,r,o){var a=o.baseTileHeight,h=o.tilemapLayer,d=0;h&&(void 0===r&&(r=h.scene.cameras.main),d=h.y+r.scrollY*(1-h.scrollFactorY),a*=h.scaleY);var T=h.tilemap.hexSideLength;return d+t*((a-T)/2+T)}},function(t,r){t.exports=function StaggeredTileToWorldY(t,r,o){var a=o.baseTileHeight,h=o.tilemapLayer,d=0;return h&&(void 0===r&&(r=h.scene.cameras.main),d=h.y+r.scrollY*(1-h.scrollFactorY),a*=h.scaleY),d+t*(a/2)}},function(t,r,o){var a=o(3);t.exports=function HexagonalWorldToTileXY(t,r,o,h,d,T){h||(h=new a);var S=T.baseTileWidth,A=T.baseTileHeight,P=T.tilemapLayer;P&&(d||(d=P.scene.cameras.main),r-=P.y+d.scrollY*(1-P.scrollFactorY),A*=P.scaleY,t-=P.x+d.scrollX*(1-P.scrollFactorX),S*=P.scaleX);var O=T.hexSideLength,D=(A-O)/2+O,L=o?Math.floor(r/D):r/D,I=o?Math.floor((t-L%2*.5*S)/S):(t-L%2*.5*S)/S;return h.set(I,L)}},function(t,r,o){var a=o(3);t.exports=function IsometricWorldToTileXY(t,r,o,h,d,T){h||(h=new a);var S=T.baseTileWidth,A=T.baseTileHeight,P=T.tilemapLayer;P&&(d||(d=P.scene.cameras.main),r-=P.y+d.scrollY*(1-P.scrollFactorY),A*=P.scaleY,t-=P.x+d.scrollX*(1-P.scrollFactorX),S*=P.scaleX);var O=o?Math.floor((t/(S/2)+r/(A/2))/2):(t/(S/2)+r/(A/2))/2,D=o?Math.floor((r/(A/2)-t/(S/2))/2):(r/(A/2)-t/(S/2))/2;return h.set(O,D)}},function(t,r,o){var a=o(3);t.exports=function StaggeredWorldToTileXY(t,r,o,h,d,T){h||(h=new a);var S=T.baseTileWidth,A=T.baseTileHeight,P=T.tilemapLayer;P&&(d||(d=P.scene.cameras.main),r-=P.y+d.scrollY*(1-P.scrollFactorY),A*=P.scaleY,t-=P.x+d.scrollX*(1-P.scrollFactorX),S*=P.scaleX);var O=o?Math.floor(r/(A/2)):r/(A/2),D=o?Math.floor((t+O%2*.5*S)/S):(t+O%2*.5*S)/S;return h.set(D,O)}},function(t,r,o){var a=o(255),h=o(256),d=o(3);t.exports=function WorldToTileXY(t,r,o,T,S,A){return void 0===o&&(o=!0),T||(T=new d(0,0)),T.x=a(t,o,S,A),T.y=h(r,o,S,A),T}},function(t,r){t.exports=function HexagonalWorldToTileY(t,r,o,a){var h=a.baseTileHeight,d=a.tilemapLayer;d&&(o||(o=d.scene.cameras.main),t-=d.y+o.scrollY*(1-d.scrollFactorY),h*=d.scaleY);var T=a.hexSideLength,S=(h-T)/2+T;return r?Math.floor(t/S):t/S}},function(t,r){t.exports=function StaggeredWorldToTileY(t,r,o,a){var h=a.baseTileHeight,d=a.tilemapLayer;return d&&(o||(o=d.scene.cameras.main),t-=d.y+o.scrollY*(1-d.scrollFactorY),h*=d.scaleY),r?Math.floor(t/(h/2)):t/(h/2)}},function(t,r,o){var a=o(119);t.exports=function HasTileAt(t,r,o){if(a(t,r,o)){var h=o.data[r][t];return null!==h&&h.index>-1}return!1}},function(t,r,o){var a=o(85),h=o(119),d=o(252);t.exports=function RemoveTileAt(t,r,o,T,S){if(void 0===o&&(o=!0),void 0===T&&(T=!0),!h(t,r,S))return null;var A=S.data[r][t];return A?(S.data[r][t]=o?null:new a(S,-1,t,r,S.tileWidth,S.tileHeight),T&&A&&A.collides&&d(t,r,S),A):null}},function(t,r,o){var a=o(40),h=o(259),d=o(565),T=o(566),S=o(577);t.exports=function Parse(t,r,o,A,P,O){var D;switch(r){case a.ARRAY_2D:D=h(t,o,A,P,O);break;case a.CSV:D=d(t,o,A,P,O);break;case a.TILED_JSON:D=T(t,o,O);break;case a.WELTMEISTER:D=S(t,o,O);break;default:console.warn("Unrecognized tilemap data format: "+r),D=null}return D}},function(t,r,o){var a=o(40),h=o(259);t.exports=function ParseCSV(t,r,o,d,T){var S=r.trim().split("\n").map((function(t){return t.split(",")})),A=h(t,S,o,d,T);return A.format=a.CSV,A}},function(t,r,o){var a=o(567),h=o(568),d=o(29),T=o(40),S=o(258),A=o(121),P=o(569),O=o(570),D=o(573),L=o(575);t.exports=function ParseJSONTiled(t,r,o){var I=new A({width:r.width,height:r.height,name:t,tileWidth:r.tilewidth,tileHeight:r.tileheight,orientation:S(r.orientation),format:T.TILED_JSON,version:r.version,properties:r.properties,renderOrder:r.renderorder,infinite:r.infinite});I.orientation===d.HEXAGONAL&&(I.hexSideLength=r.hexsidelength),I.layers=D(r,o),I.images=P(r);var B=L(r);return I.tilesets=B.tilesets,I.imageCollections=B.imageCollections,I.objects=O(r),I.tiles=h(I),a(I),I}},function(t,r,o){var a=o(17);t.exports=function AssignTileProperties(t){for(var r,o,h,d,T,S=0;S<t.layers.length;S++){r=t.layers[S],d=null;for(var A=0;A<r.data.length;A++){T=r.data[A];for(var P=0;P<T.length;P++)null===(o=T[P])||o.index<0||(h=t.tiles[o.index][2],d=t.tilesets[h],o.width=d.tileWidth,o.height=d.tileHeight,d.tileProperties&&d.tileProperties[o.index-d.firstgid]&&(o.properties=a(o.properties,d.tileProperties[o.index-d.firstgid])))}}}},function(t,r,o){var a=o(122);t.exports=function BuildTilesetIndex(t){var r,o,h=[];for(r=0;r<t.imageCollections.length;r++)for(var d=t.imageCollections[r],T=d.images,S=0;S<T.length;S++){var A=T[S];(o=new a(A.image,A.gid,d.imageWidth,d.imageHeight,0,0)).updateTileData(d.imageWidth,d.imageHeight),t.tilesets.push(o)}for(r=0;r<t.tilesets.length;r++)for(var P=(o=t.tilesets[r]).tileMargin,O=o.tileMargin,D=0,L=0,I=0,B=o.firstgid;B<o.firstgid+o.total&&(h[B]=[P,O,r],P+=o.tileWidth+o.tileSpacing,++D!==o.total)&&(++L!==o.columns||(P=o.tileMargin,O+=o.tileHeight+o.tileSpacing,L=0,++I!==o.rows));B++);return h}},function(t,r,o){var a=o(2),h=o(161);t.exports=function ParseImageLayers(t){for(var r=[],o=[],d=h(t);d.i<d.layers.length||o.length>0;)if(d.i>=d.layers.length){if(o.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}d=o.pop()}else{var T=d.layers[d.i];if(d.i++,"imagelayer"===T.type){var S=a(T,"offsetx",0)+a(T,"startx",0),A=a(T,"offsety",0)+a(T,"starty",0);r.push({name:d.name+T.name,image:T.image,x:d.x+S+T.x,y:d.y+A+T.y,alpha:d.opacity*T.opacity,visible:d.visible&&T.visible,properties:a(T,"properties",{})})}else if("group"===T.type){var P=h(t,T,d);o.push(d),d=P}}return r}},function(t,r,o){var a=o(2),h=o(260),d=o(572),T=o(161);t.exports=function ParseObjectLayers(t){for(var r=[],o=[],S=T(t);S.i<S.layers.length||o.length>0;)if(S.i>=S.layers.length){if(o.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}S=o.pop()}else{var A=S.layers[S.i];if(S.i++,A.opacity*=S.opacity,A.visible=S.visible&&A.visible,"objectgroup"===A.type){A.name=S.name+A.name;for(var P=S.x+a(A,"startx",0)+a(A,"offsetx",0),O=S.y+a(A,"starty",0)+a(A,"offsety",0),D=[],L=0;L<A.objects.length;L++){var I=h(A.objects[L],P,O);D.push(I)}var B=new d(A);B.objects=D,r.push(B)}else if("group"===A.type){var N=T(t,A,S);o.push(S),S=N}}return r}},function(t,r,o){var a=o(126);t.exports=function Pick(t,r){for(var o={},h=0;h<r.length;h++){var d=r[h];a(t,d)&&(o[d]=t[d])}return o}},function(t,r,o){var a=o(0),h=o(2),d=new a({initialize:function ObjectLayer(t){void 0===t&&(t={}),this.name=h(t,"name","object layer"),this.opacity=h(t,"opacity",1),this.properties=h(t,"properties",{}),this.propertyTypes=h(t,"propertytypes",{}),this.type=h(t,"type","objectgroup"),this.visible=h(t,"visible",!0),this.objects=h(t,"objects",[])}});t.exports=d},function(t,r,o){var a=o(574),h=o(29),d=o(161),T=o(258),S=o(2),A=o(120),P=o(261),O=o(85);t.exports=function ParseTileLayers(t,r){for(var o=S(t,"infinite",!1),D=[],L=[],I=d(t);I.i<I.layers.length||L.length>0;)if(I.i>=I.layers.length){if(L.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}I=L.pop()}else{var B=I.layers[I.i];if(I.i++,"tilelayer"===B.type)if(B.compression)console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+B.name+"'");else{if(B.encoding&&"base64"===B.encoding){if(B.chunks)for(var N=0;N<B.chunks.length;N++)B.chunks[N].data=a(B.chunks[N].data);B.data&&(B.data=a(B.data)),delete B.encoding}var G,Y,X,U,z=[],V=0;if(o){var W=S(B,"startx",0)+B.x,H=S(B,"starty",0)+B.y;(G=new A({name:I.name+B.name,x:I.x+S(B,"offsetx",0)+W*t.tilewidth,y:I.y+S(B,"offsety",0)+H*t.tileheight,width:B.width,height:B.height,tileWidth:t.tilewidth,tileHeight:t.tileheight,alpha:I.opacity*B.opacity,visible:I.visible&&B.visible,properties:S(B,"properties",[]),orientation:T(t.orientation)})).orientation===h.HEXAGONAL&&(G.hexSideLength=t.hexsidelength);for(var q=0;q<B.height;q++){z.push([null]);for(var Z=0;Z<B.width;Z++)z[q][Z]=null}for(q=0,ot=B.chunks.length;q<ot;q++)for(var K=B.chunks[q],J=K.x-W,Q=K.y-H,$=0,tt=0,et=K.data.length;tt<et;tt++){var it=V+J,nt=$+Q;(Y=P(K.data[tt])).gid>0?((X=new O(G,Y.gid,it,nt,t.tilewidth,t.tileheight)).rotation=Y.rotation,X.flipX=Y.flipped,z[nt][it]=X):(U=r?null:new O(G,-1,it,nt,t.tilewidth,t.tileheight),z[nt][it]=U),++V===K.width&&($++,V=0)}}else{(G=new A({name:I.name+B.name,x:I.x+S(B,"offsetx",0)+B.x,y:I.y+S(B,"offsety",0)+B.y,width:B.width,height:B.height,tileWidth:t.tilewidth,tileHeight:t.tileheight,alpha:I.opacity*B.opacity,visible:I.visible&&B.visible,properties:S(B,"properties",[]),orientation:T(t.orientation)})).orientation===h.HEXAGONAL&&(G.hexSideLength=t.hexsidelength);for(var rt=[],st=0,ot=B.data.length;st<ot;st++)(Y=P(B.data[st])).gid>0?((X=new O(G,Y.gid,V,z.length,t.tilewidth,t.tileheight)).rotation=Y.rotation,X.flipX=Y.flipped,rt.push(X)):(U=r?null:new O(G,-1,V,z.length,t.tilewidth,t.tileheight),rt.push(U)),++V===B.width&&(z.push(rt),V=0,rt=[])}G.data=z,D.push(G)}else if("group"===B.type){var at=d(t,B,I);L.push(I),I=at}}return D}},function(t,r){t.exports=function Base64Decode(t){for(var r=window.atob(t),o=r.length,a=new Array(o/4),h=0;h<o;h+=4)a[h/4]=(r.charCodeAt(h)|r.charCodeAt(h+1)<<8|r.charCodeAt(h+2)<<16|r.charCodeAt(h+3)<<24)>>>0;return a}},function(t,r,o){var a=o(122),h=o(576),d=o(260),T=o(1453);t.exports=function ParseTilesets(t){for(var r,o=[],S=[],A=null,P=0;P<t.tilesets.length;P++){var O=t.tilesets[P];if(O.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(O.image){var D=new a(O.name,O.firstgid,O.tilewidth,O.tileheight,O.margin,O.spacing);if(t.version>1){var L=void 0,I=void 0;if(Array.isArray(O.tiles)){L=L||{},I=I||{};for(var B=0;B<O.tiles.length;B++){var N=O.tiles[B];if(N.properties){var G={};N.properties.forEach((function(t){G[t.name]=t.value})),I[N.id]=G}if(N.objectgroup&&((L[N.id]||(L[N.id]={})).objectgroup=N.objectgroup,N.objectgroup.objects)){var Y=N.objectgroup.objects.map((function(t){return d(t)}));L[N.id].objectgroup.objects=Y}N.animation&&((L[N.id]||(L[N.id]={})).animation=N.animation),N.type&&((L[N.id]||(L[N.id]={})).type=N.type)}}Array.isArray(O.wangsets)&&(L=L||{},I=I||{},T(O.wangsets,L)),L&&(D.tileData=L,D.tileProperties=I)}else if(O.tileproperties&&(D.tileProperties=O.tileproperties),O.tiles)for(r in D.tileData=O.tiles,D.tileData){var X=D.tileData[r].objectgroup;if(X&&X.objects){var U=X.objects.map((function(t){return d(t)}));D.tileData[r].objectgroup.objects=U}}D.updateTileData(O.imagewidth,O.imageheight),o.push(D)}else{var z=new h(O.name,O.firstgid,O.tilewidth,O.tileheight,O.margin,O.spacing,O.properties),V=0;for(B=0;B<O.tiles.length;B++){var W=(N=O.tiles[B]).image,H=parseInt(N.id,10),q=O.firstgid+H;z.addImage(q,W),V=Math.max(H,V)}z.maxId=V,S.push(z)}A&&(A.lastgid=O.firstgid-1),A=O}return{tilesets:o,imageCollections:S}}},function(t,r,o){var a=new(o(0))({initialize:function ImageCollection(t,r,o,a,h,d,T){(void 0===o||o<=0)&&(o=32),(void 0===a||a<=0)&&(a=32),void 0===h&&(h=0),void 0===d&&(d=0),this.name=t,this.firstgid=0|r,this.imageWidth=0|o,this.imageHeight=0|a,this.imageMargin=0|h,this.imageSpacing=0|d,this.properties=T||{},this.images=[],this.total=0},containsImageIndex:function containsImageIndex(t){return t>=this.firstgid&&t<this.firstgid+this.total},addImage:function addImage(t,r){return this.images.push({gid:t,image:r}),this.total++,this}});t.exports=a},function(t,r,o){var a=o(40),h=o(121),d=o(578),T=o(579);t.exports=function ParseWeltmeister(t,r,o){if(0===r.layer.length)return console.warn("No layers found in the Weltmeister map: "+t),null;for(var S=0,A=0,P=0;P<r.layer.length;P++)r.layer[P].width>S&&(S=r.layer[P].width),r.layer[P].height>A&&(A=r.layer[P].height);var O=new h({width:S,height:A,name:t,tileWidth:r.layer[0].tilesize,tileHeight:r.layer[0].tilesize,format:a.WELTMEISTER});return O.layers=d(r,o),O.tilesets=T(r),O}},function(t,r,o){var a=o(120),h=o(85);t.exports=function ParseTileLayers(t,r){for(var o=[],d=0;d<t.layer.length;d++){for(var T=t.layer[d],S=new a({name:T.name,width:T.width,height:T.height,tileWidth:T.tilesize,tileHeight:T.tilesize,visible:1===T.visible}),A=[],P=[],O=0;O<T.data.length;O++){for(var D=0;D<T.data[O].length;D++){var L,I=T.data[O][D]-1;L=I>-1?new h(S,I,D,O,T.tilesize,T.tilesize):r?null:new h(S,-1,D,O,T.tilesize,T.tilesize),A.push(L)}P.push(A),A=[]}S.data=P,o.push(S)}return o}},function(t,r,o){var a=o(122);t.exports=function ParseTilesets(t){for(var r=[],o=[],h=0;h<t.layer.length;h++){var d=t.layer[h],T=d.tilesetName;""!==T&&-1===o.indexOf(T)&&(o.push(T),r.push(new a(T,0,d.tilesize,d.tilesize,0,0)))}return r}},function(t,r,o){var a=o(0),h=o(36),d=o(40),T=o(2),S=o(120),A=o(29),P=o(362),O=o(74),D=o(73),L=o(85),I=o(251),B=o(581),N=o(122),G=new a({initialize:function Tilemap(t,r){this.scene=t,this.tileWidth=r.tileWidth,this.tileHeight=r.tileHeight,this.width=r.width,this.height=r.height,this.orientation=r.orientation,this.renderOrder=r.renderOrder,this.format=r.format,this.version=r.version,this.properties=r.properties,this.widthInPixels=r.widthInPixels,this.heightInPixels=r.heightInPixels,this.imageCollections=r.imageCollections,this.images=r.images,this.layers=r.layers,this.tilesets=r.tilesets,this.objects=r.objects,this.currentLayerIndex=0,this.hexSideLength=r.hexSideLength;var o=this.orientation;this._convert={WorldToTileXY:I.GetWorldToTileXYFunction(o),WorldToTileX:I.GetWorldToTileXFunction(o),WorldToTileY:I.GetWorldToTileYFunction(o),TileToWorldXY:I.GetTileToWorldXYFunction(o),TileToWorldX:I.GetTileToWorldXFunction(o),TileToWorldY:I.GetTileToWorldYFunction(o)}},createBlankDynamicLayer:function createBlankDynamicLayer(t,r,o,a,h,d,T,S){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(t,r,o,a,h,d,T,S)},createDynamicLayer:function createDynamicLayer(t,r,o,a){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(t,r,o,a)},createStaticLayer:function createStaticLayer(t,r,o,a){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(t,r,o,a)},setRenderOrder:function setRenderOrder(t){var r=["right-down","left-down","right-up","left-up"];return"number"==typeof t&&(t=r[t]),r.indexOf(t)>-1&&(this.renderOrder=t),this},addTilesetImage:function addTilesetImage(t,r,o,a,h,T,S){if(void 0===t)return null;if(null==r&&(r=t),!this.scene.sys.textures.exists(r))return console.warn("Invalid Tileset Image: "+r),null;var A=this.scene.sys.textures.get(r),P=this.getTilesetIndex(t);if(null===P&&this.format===d.TILED_JSON)return console.warn("No data found for Tileset: "+t),null;var O=this.tilesets[P];return O?(O.setTileSize(o,a),O.setSpacing(h,T),O.setImage(A),O):(void 0===o&&(o=this.tileWidth),void 0===a&&(a=this.tileHeight),void 0===h&&(h=0),void 0===T&&(T=0),void 0===S&&(S=0),(O=new N(t,S,o,a,h,T)).setImage(A),this.tilesets.push(O),O)},copy:function copy(t,r,o,a,h,d,T,S){return null!==(S=this.getLayer(S))?(I.Copy(t,r,o,a,h,d,T,S),this):null},createBlankLayer:function createBlankLayer(t,r,o,a,h,d,T,A){if(void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=this.width),void 0===d&&(d=this.height),void 0===T&&(T=this.tileWidth),void 0===A&&(A=this.tileHeight),null!==this.getLayerIndex(t))return console.warn("Invalid Tilemap Layer ID: "+t),null;for(var P,O=new S({name:t,tileWidth:T,tileHeight:A,width:h,height:d,orientation:this.orientation}),D=0;D<d;D++){P=[];for(var I=0;I<h;I++)P.push(new L(O,-1,I,D,T,A,this.tileWidth,this.tileHeight));O.data.push(P)}this.layers.push(O),this.currentLayerIndex=this.layers.length-1;var N=new B(this.scene,this,this.currentLayerIndex,r,o,a);return N.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(N),N},createLayer:function createLayer(t,r,o,a){var h=this.getLayerIndex(t);if(null===h)return console.warn("Invalid Tilemap Layer ID: "+t),"string"==typeof t&&console.warn("Valid tilelayer names:\n\t"+this.getTileLayerNames().join(",\n\t")),null;var d=this.layers[h];if(d.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+t),null;this.currentLayerIndex=h,void 0===o&&(o=d.x),void 0===a&&(a=d.y);var T=new B(this.scene,this,h,r,o,a);return T.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(T),T},createFromObjects:function createFromObjects(t,r){var o=[],a=this.getObjectLayer(t);if(!a)return console.warn("createFromObjects: Invalid objectLayerName given: "+t),o;Array.isArray(r)||(r=[r]);for(var d=a.objects,S=0;S<r.length;S++){for(var A,O=r[S],L=T(O,"id",null),I=T(O,"gid",null),B=T(O,"name",null),N=[],G=0;G<d.length;G++)A=d[G],(null===L&&null===I&&null===B||null!==L&&A.id===L||null!==I&&A.gid===I||null!==B&&A.name===B)&&N.push(A);for(var Y=T(O,"classType",D),X=T(O,"scene",this.scene),U=T(O,"container",null),z=T(O,"key",null),V=T(O,"frame",null),W=0;W<N.length;W++){A=N[W];var H=new Y(X);H.setName(A.name),H.setPosition(A.x,A.y),H.setTexture(z,V),A.width&&(H.displayWidth=A.width),A.height&&(H.displayHeight=A.height);var q={x:H.originX*A.width,y:(H.originY-1)*A.height};if(A.rotation){var Z=h(A.rotation);P(q,Z),H.rotation=Z}if(H.x+=q.x,H.y+=q.y,void 0===A.flippedHorizontal&&void 0===A.flippedVertical||H.setFlip(A.flippedHorizontal,A.flippedVertical),A.visible||(H.visible=!1),Array.isArray(A.properties))A.properties.forEach((function(t){var r=t.name;void 0!==H[r]?H[r]=t.value:H.setData(r,t.value)}));else for(var K in A.properties)void 0!==H[K]?H[K]=A.properties[K]:H.setData(K,A.properties[K]);U?U.add(H):X.add.existing(H),o.push(H)}}return o},createFromTiles:function createFromTiles(t,r,o,a,h,d){return null===(d=this.getLayer(d))?null:I.CreateFromTiles(t,r,o,a,h,d)},fill:function fill(t,r,o,a,h,d,T){return void 0===d&&(d=!0),null===(T=this.getLayer(T))?null:(I.Fill(t,r,o,a,h,d,T),this)},filterObjects:function filterObjects(t,r,o){if("string"==typeof t){var a=t;if(!(t=this.getObjectLayer(t)))return console.warn("No object layer found with the name: "+a),null}return t.objects.filter(r,o)},filterTiles:function filterTiles(t,r,o,a,h,d,T,S){return null===(S=this.getLayer(S))?null:I.FilterTiles(t,r,o,a,h,d,T,S)},findByIndex:function findByIndex(t,r,o,a){return null===(a=this.getLayer(a))?null:I.FindByIndex(t,r,o,a)},findObject:function findObject(t,r,o){if("string"==typeof t){var a=t;if(!(t=this.getObjectLayer(t)))return console.warn("No object layer found with the name: "+a),null}return t.objects.find(r,o)||null},findTile:function findTile(t,r,o,a,h,d,T,S){return null===(S=this.getLayer(S))?null:I.FindTile(t,r,o,a,h,d,T,S)},forEachTile:function forEachTile(t,r,o,a,h,d,T,S){return null===(S=this.getLayer(S))?null:(I.ForEachTile(t,r,o,a,h,d,T,S),this)},getImageIndex:function getImageIndex(t){return this.getIndex(this.images,t)},getImageLayerNames:function getImageLayerNames(){return this.images&&Array.isArray(this.images)?this.images.map((function(t){return t.name})):[]},getIndex:function getIndex(t,r){for(var o=0;o<t.length;o++)if(t[o].name===r)return o;return null},getLayer:function getLayer(t){var r=this.getLayerIndex(t);return null!==r?this.layers[r]:null},getObjectLayer:function getObjectLayer(t){var r=this.getIndex(this.objects,t);return null!==r?this.objects[r]:null},getObjectLayerNames:function getObjectLayerNames(){return this.objects&&Array.isArray(this.objects)?this.objects.map((function(t){return t.name})):[]},getLayerIndex:function getLayerIndex(t){return void 0===t?this.currentLayerIndex:"string"==typeof t?this.getLayerIndexByName(t):"number"==typeof t&&t<this.layers.length?t:t instanceof B?t.layerIndex:null},getLayerIndexByName:function getLayerIndexByName(t){return this.getIndex(this.layers,t)},getTileAt:function getTileAt(t,r,o,a){return null===(a=this.getLayer(a))?null:I.GetTileAt(t,r,o,a)},getTileAtWorldXY:function getTileAtWorldXY(t,r,o,a,h){return null===(h=this.getLayer(h))?null:I.GetTileAtWorldXY(t,r,o,a,h)},getTileLayerNames:function getTileLayerNames(){return this.layers&&Array.isArray(this.layers)?this.layers.map((function(t){return t.name})):[]},getTilesWithin:function getTilesWithin(t,r,o,a,h,d){return null===(d=this.getLayer(d))?null:I.GetTilesWithin(t,r,o,a,h,d)},getTilesWithinShape:function getTilesWithinShape(t,r,o,a){return null===(a=this.getLayer(a))?null:I.GetTilesWithinShape(t,r,o,a)},getTilesWithinWorldXY:function getTilesWithinWorldXY(t,r,o,a,h,d,T){return null===(T=this.getLayer(T))?null:I.GetTilesWithinWorldXY(t,r,o,a,h,d,T)},getTileset:function getTileset(t){var r=this.getIndex(this.tilesets,t);return null!==r?this.tilesets[r]:null},getTilesetIndex:function getTilesetIndex(t){return this.getIndex(this.tilesets,t)},hasTileAt:function hasTileAt(t,r,o){return null===(o=this.getLayer(o))?null:I.HasTileAt(t,r,o)},hasTileAtWorldXY:function hasTileAtWorldXY(t,r,o,a){return null===(a=this.getLayer(a))?null:I.HasTileAtWorldXY(t,r,o,a)},layer:{get:function get(){return this.layers[this.currentLayerIndex]},set:function set(t){this.setLayer(t)}},putTileAt:function putTileAt(t,r,o,a,h){return void 0===a&&(a=!0),null===(h=this.getLayer(h))?null:I.PutTileAt(t,r,o,a,h)},putTileAtWorldXY:function putTileAtWorldXY(t,r,o,a,h,d){return void 0===a&&(a=!0),null===(d=this.getLayer(d))?null:I.PutTileAtWorldXY(t,r,o,a,h,d)},putTilesAt:function putTilesAt(t,r,o,a,h){return void 0===a&&(a=!0),null===(h=this.getLayer(h))?null:(I.PutTilesAt(t,r,o,a,h),this)},randomize:function randomize(t,r,o,a,h,d){return null===(d=this.getLayer(d))?null:(I.Randomize(t,r,o,a,h,d),this)},calculateFacesAt:function calculateFacesAt(t,r,o){return null===(o=this.getLayer(o))?null:(I.CalculateFacesAt(t,r,o),this)},calculateFacesWithin:function calculateFacesWithin(t,r,o,a,h){return null===(h=this.getLayer(h))?null:(I.CalculateFacesWithin(t,r,o,a,h),this)},removeLayer:function removeLayer(t){var r=this.getLayerIndex(t);if(null!==r){O(this.layers,r);for(var o=r;o<this.layers.length;o++)this.layers[o].tilemapLayer&&this.layers[o].tilemapLayer.layerIndex--;return this.currentLayerIndex===r&&(this.currentLayerIndex=0),this}return null},destroyLayer:function destroyLayer(t){var r=this.getLayerIndex(t);return null!==r?((t=this.layers[r]).destroy(),O(this.layers,r),this.currentLayerIndex===r&&(this.currentLayerIndex=0),this):null},removeAllLayers:function removeAllLayers(){for(var t=this.layers,r=0;r<t.length;r++)t[r].tilemapLayer&&t[r].tilemapLayer.destroy(!1);return t.length=0,this.currentLayerIndex=0,this},removeTile:function removeTile(t,r,o){void 0===r&&(r=-1),void 0===o&&(o=!0);var a=[];Array.isArray(t)||(t=[t]);for(var h=0;h<t.length;h++){var d=t[h];a.push(this.removeTileAt(d.x,d.y,!0,o,d.tilemapLayer)),r>-1&&this.putTileAt(r,d.x,d.y,o,d.tilemapLayer)}return a},removeTileAt:function removeTileAt(t,r,o,a,h){return void 0===o&&(o=!0),void 0===a&&(a=!0),null===(h=this.getLayer(h))?null:I.RemoveTileAt(t,r,o,a,h)},removeTileAtWorldXY:function removeTileAtWorldXY(t,r,o,a,h,d){return void 0===o&&(o=!0),void 0===a&&(a=!0),null===(d=this.getLayer(d))?null:I.RemoveTileAtWorldXY(t,r,o,a,h,d)},renderDebug:function renderDebug(t,r,o){return null===(o=this.getLayer(o))?null:(this.orientation===A.ORTHOGONAL&&I.RenderDebug(t,r,o),this)},renderDebugFull:function renderDebugFull(t,r){for(var o=this.layers,a=0;a<o.length;a++)I.RenderDebug(t,r,o[a]);return this},replaceByIndex:function replaceByIndex(t,r,o,a,h,d,T){return null===(T=this.getLayer(T))?null:(I.ReplaceByIndex(t,r,o,a,h,d,T),this)},setCollision:function setCollision(t,r,o,a,h){return void 0===r&&(r=!0),void 0===o&&(o=!0),void 0===h&&(h=!0),null===(a=this.getLayer(a))?null:(I.SetCollision(t,r,o,a,h),this)},setCollisionBetween:function setCollisionBetween(t,r,o,a,h){return void 0===o&&(o=!0),void 0===a&&(a=!0),null===(h=this.getLayer(h))?null:(I.SetCollisionBetween(t,r,o,a,h),this)},setCollisionByProperty:function setCollisionByProperty(t,r,o,a){return void 0===r&&(r=!0),void 0===o&&(o=!0),null===(a=this.getLayer(a))?null:(I.SetCollisionByProperty(t,r,o,a),this)},setCollisionByExclusion:function setCollisionByExclusion(t,r,o,a){return void 0===r&&(r=!0),void 0===o&&(o=!0),null===(a=this.getLayer(a))?null:(I.SetCollisionByExclusion(t,r,o,a),this)},setCollisionFromCollisionGroup:function setCollisionFromCollisionGroup(t,r,o){return void 0===t&&(t=!0),void 0===r&&(r=!0),null===(o=this.getLayer(o))?null:(I.SetCollisionFromCollisionGroup(t,r,o),this)},setTileIndexCallback:function setTileIndexCallback(t,r,o,a){return null===(a=this.getLayer(a))?null:(I.SetTileIndexCallback(t,r,o,a),this)},setTileLocationCallback:function setTileLocationCallback(t,r,o,a,h,d,T){return null===(T=this.getLayer(T))?null:(I.SetTileLocationCallback(t,r,o,a,h,d,T),this)},setLayer:function setLayer(t){var r=this.getLayerIndex(t);return null!==r&&(this.currentLayerIndex=r),this},setBaseTileSize:function setBaseTileSize(t,r){this.tileWidth=t,this.tileHeight=r,this.widthInPixels=this.width*t,this.heightInPixels=this.height*r;for(var o=0;o<this.layers.length;o++){this.layers[o].baseTileWidth=t,this.layers[o].baseTileHeight=r;for(var a=this.layers[o].data,h=this.layers[o].width,d=this.layers[o].height,T=0;T<d;T++)for(var S=0;S<h;S++){var A=a[T][S];null!==A&&A.setSize(void 0,void 0,t,r)}}return this},setLayerTileSize:function setLayerTileSize(t,r,o){if(null===(o=this.getLayer(o)))return this;o.tileWidth=t,o.tileHeight=r;for(var a=o.data,h=o.width,d=o.height,T=0;T<d;T++)for(var S=0;S<h;S++){var A=a[T][S];null!==A&&A.setSize(t,r)}return this},shuffle:function shuffle(t,r,o,a,h){return null===(h=this.getLayer(h))?null:(I.Shuffle(t,r,o,a,h),this)},swapByIndex:function swapByIndex(t,r,o,a,h,d,T){return null===(T=this.getLayer(T))?null:(I.SwapByIndex(t,r,o,a,h,d,T),this)},tileToWorldX:function tileToWorldX(t,r,o){return null===(o=this.getLayer(o))?null:this._convert.TileToWorldX(t,r,o)},tileToWorldY:function tileToWorldY(t,r,o){return null===(o=this.getLayer(o))?null:this._convert.TileToWorldY(t,r,o)},tileToWorldXY:function tileToWorldXY(t,r,o,a,h){return null===(h=this.getLayer(h))?null:this._convert.TileToWorldXY(t,r,o,a,h)},weightedRandomize:function weightedRandomize(t,r,o,a,h,d){return null===(d=this.getLayer(d))?null:(I.WeightedRandomize(r,o,a,h,t,d),this)},worldToTileX:function worldToTileX(t,r,o,a){return null===(a=this.getLayer(a))?null:this._convert.WorldToTileX(t,r,o,a)},worldToTileY:function worldToTileY(t,r,o,a){return null===(a=this.getLayer(a))?null:this._convert.WorldToTileY(t,r,o,a)},worldToTileXY:function worldToTileXY(t,r,o,a,h,d){return null===(d=this.getLayer(d))?null:this._convert.WorldToTileXY(t,r,o,a,h,d)},destroy:function destroy(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});t.exports=G},function(t,r,o){var a=o(0),h=o(11),d=o(15),T=o(251),S=o(1456),A=new a({Extends:d,Mixins:[h.Alpha,h.BlendMode,h.ComputedSize,h.Depth,h.Flip,h.GetBounds,h.Origin,h.Pipeline,h.Transform,h.Visible,h.ScrollFactor,S],initialize:function TilemapLayer(t,r,o,a,h,S){d.call(this,t,"TilemapLayer"),this.isTilemap=!0,this.tilemap=r,this.layerIndex=o,this.layer=r.layers[o],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=T.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(a),this.setAlpha(this.layer.alpha),this.setPosition(h,S),this.setOrigin(),this.setSize(r.tileWidth*this.layer.width,r.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function setTilesets(t){var r=[],o=[],a=this.tilemap;Array.isArray(t)||(t=[t]);for(var h=0;h<t.length;h++){var d=t[h];if("string"==typeof d&&(d=a.getTileset(d)),d){o.push(d);for(var T=d.firstgid,S=0;S<d.total;S++)r[T+S]=d}}this.gidMap=r,this.tileset=o},setRenderOrder:function setRenderOrder(t){return"string"==typeof t&&(t=["right-down","left-down","right-up","left-up"].indexOf(t)),t>=0&&t<4&&(this._renderOrder=t),this},calculateFacesAt:function calculateFacesAt(t,r){return T.CalculateFacesAt(t,r,this.layer),this},calculateFacesWithin:function calculateFacesWithin(t,r,o,a){return T.CalculateFacesWithin(t,r,o,a,this.layer),this},createFromTiles:function createFromTiles(t,r,o,a,h){return T.CreateFromTiles(t,r,o,a,h,this.layer)},cull:function cull(t){return this.cullCallback(this.layer,t,this.culledTiles,this._renderOrder)},copy:function copy(t,r,o,a,h,d,S){return T.Copy(t,r,o,a,h,d,S,this.layer),this},fill:function fill(t,r,o,a,h,d){return T.Fill(t,r,o,a,h,d,this.layer),this},filterTiles:function filterTiles(t,r,o,a,h,d,S){return T.FilterTiles(t,r,o,a,h,d,S,this.layer)},findByIndex:function findByIndex(t,r,o){return T.FindByIndex(t,r,o,this.layer)},findTile:function findTile(t,r,o,a,h,d,S){return T.FindTile(t,r,o,a,h,d,S,this.layer)},forEachTile:function forEachTile(t,r,o,a,h,d,S){return T.ForEachTile(t,r,o,a,h,d,S,this.layer),this},getTileAt:function getTileAt(t,r,o){return T.GetTileAt(t,r,o,this.layer)},getTileAtWorldXY:function getTileAtWorldXY(t,r,o,a){return T.GetTileAtWorldXY(t,r,o,a,this.layer)},getTilesWithin:function getTilesWithin(t,r,o,a,h){return T.GetTilesWithin(t,r,o,a,h,this.layer)},getTilesWithinShape:function getTilesWithinShape(t,r,o){return T.GetTilesWithinShape(t,r,o,this.layer)},getTilesWithinWorldXY:function getTilesWithinWorldXY(t,r,o,a,h,d){return T.GetTilesWithinWorldXY(t,r,o,a,h,d,this.layer)},hasTileAt:function hasTileAt(t,r){return T.HasTileAt(t,r,this.layer)},hasTileAtWorldXY:function hasTileAtWorldXY(t,r,o){return T.HasTileAtWorldXY(t,r,o,this.layer)},putTileAt:function putTileAt(t,r,o,a){return T.PutTileAt(t,r,o,a,this.layer)},putTileAtWorldXY:function putTileAtWorldXY(t,r,o,a,h){return T.PutTileAtWorldXY(t,r,o,a,h,this.layer)},putTilesAt:function putTilesAt(t,r,o,a){return T.PutTilesAt(t,r,o,a,this.layer),this},randomize:function randomize(t,r,o,a,h){return T.Randomize(t,r,o,a,h,this.layer),this},removeTileAt:function removeTileAt(t,r,o,a){return T.RemoveTileAt(t,r,o,a,this.layer)},removeTileAtWorldXY:function removeTileAtWorldXY(t,r,o,a,h){return T.RemoveTileAtWorldXY(t,r,o,a,h,this.layer)},renderDebug:function renderDebug(t,r){return T.RenderDebug(t,r,this.layer),this},replaceByIndex:function replaceByIndex(t,r,o,a,h,d){return T.ReplaceByIndex(t,r,o,a,h,d,this.layer),this},setSkipCull:function setSkipCull(t){return void 0===t&&(t=!0),this.skipCull=t,this},setCullPadding:function setCullPadding(t,r){return void 0===t&&(t=1),void 0===r&&(r=1),this.cullPaddingX=t,this.cullPaddingY=r,this},setCollision:function setCollision(t,r,o,a){return T.SetCollision(t,r,o,this.layer,a),this},setCollisionBetween:function setCollisionBetween(t,r,o,a){return T.SetCollisionBetween(t,r,o,a,this.layer),this},setCollisionByProperty:function setCollisionByProperty(t,r,o){return T.SetCollisionByProperty(t,r,o,this.layer),this},setCollisionByExclusion:function setCollisionByExclusion(t,r,o){return T.SetCollisionByExclusion(t,r,o,this.layer),this},setCollisionFromCollisionGroup:function setCollisionFromCollisionGroup(t,r){return T.SetCollisionFromCollisionGroup(t,r,this.layer),this},setTileIndexCallback:function setTileIndexCallback(t,r,o){return T.SetTileIndexCallback(t,r,o,this.layer),this},setTileLocationCallback:function setTileLocationCallback(t,r,o,a,h,d){return T.SetTileLocationCallback(t,r,o,a,h,d,this.layer),this},shuffle:function shuffle(t,r,o,a){return T.Shuffle(t,r,o,a,this.layer),this},swapByIndex:function swapByIndex(t,r,o,a,h,d){return T.SwapByIndex(t,r,o,a,h,d,this.layer),this},tileToWorldX:function tileToWorldX(t,r){return this.tilemap.tileToWorldX(t,r,this)},tileToWorldY:function tileToWorldY(t,r){return this.tilemap.tileToWorldY(t,r,this)},tileToWorldXY:function tileToWorldXY(t,r,o,a){return this.tilemap.tileToWorldXY(t,r,o,a,this)},weightedRandomize:function weightedRandomize(t,r,o,a,h){return T.WeightedRandomize(r,o,a,h,t,this.layer),this},worldToTileX:function worldToTileX(t,r,o){return this.tilemap.worldToTileX(t,r,o,this)},worldToTileY:function worldToTileY(t,r,o){return this.tilemap.worldToTileY(t,r,o,this)},worldToTileXY:function worldToTileXY(t,r,o,a,h){return this.tilemap.worldToTileXY(t,r,o,a,h,this)},destroy:function destroy(t){void 0===t&&(t=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),t&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],d.prototype.destroy.call(this))}});t.exports=A},function(t,r,o){var a=o(0),h=o(2),d=new a({initialize:function TimerEvent(t){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(t)},reset:function reset(t){return this.delay=h(t,"delay",0),this.repeat=h(t,"repeat",0),this.loop=h(t,"loop",!1),this.callback=h(t,"callback",void 0),this.callbackScope=h(t,"callbackScope",this.callback),this.args=h(t,"args",[]),this.timeScale=h(t,"timeScale",1),this.startAt=h(t,"startAt",0),this.paused=h(t,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=-1===this.repeat||this.loop?999999999999:this.repeat,this},getProgress:function getProgress(){return this.elapsed/this.delay},getOverallProgress:function getOverallProgress(){if(this.repeat>0){var t=this.delay+this.delay*this.repeat;return(this.elapsed+this.delay*(this.repeat-this.repeatCount))/t}return this.getProgress()},getRepeatCount:function getRepeatCount(){return this.repeatCount},getElapsed:function getElapsed(){return this.elapsed},getElapsedSeconds:function getElapsedSeconds(){return.001*this.elapsed},getRemaining:function getRemaining(){return this.delay-this.elapsed},getRemainingSeconds:function getRemainingSeconds(){return.001*this.getRemaining()},getOverallRemaining:function getOverallRemaining(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function getOverallRemainingSeconds(){return.001*this.getOverallRemaining()},remove:function remove(t){void 0===t&&(t=!1),this.elapsed=this.delay,this.hasDispatched=!t,this.repeatCount=0},destroy:function destroy(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});t.exports=d},function(t,r,o){var a=o(1465);t.exports=function GetProps(t){var r,o=[];if(t.hasOwnProperty("props"))for(r in t.props)"_"!==r.substr(0,1)&&o.push({key:r,value:t.props[r]});else for(r in t)-1===a.indexOf(r)&&"_"!==r.substr(0,1)&&o.push({key:r,value:t[r]});return o}},function(t,r,o){var a=o(6);t.exports=function GetTweens(t){var r=a(t,"tweens",null);return null===r?[]:("function"==typeof r&&(r=r.call()),Array.isArray(r)||(r=[r]),r)}},function(t,r,o){var a=o(265),h=o(13),d=o(99),T=o(80),S=o(162),A=o(6),P=o(264),O=o(266),D=o(268);t.exports=function NumberTweenBuilder(t,r,o){void 0===o&&(o=a);var L=A(r,"from",0),I=A(r,"to",1),B=[{value:L}],N=S(r,"delay",o.delay),G=S(r,"duration",o.duration),Y=A(r,"easeParams",o.easeParams),X=T(A(r,"ease",o.ease),Y),U=S(r,"hold",o.hold),z=S(r,"repeat",o.repeat),V=S(r,"repeatDelay",o.repeatDelay),W=d(r,"yoyo",o.yoyo),H=[],q=P("value",I),Z=D(B[0],0,"value",q.getEnd,q.getStart,q.getActive,X,N,G,W,U,z,V,!1,!1);Z.start=L,Z.current=L,Z.to=I,H.push(Z);var K=new O(t,H,B);K.offset=h(r,"offset",null),K.completeDelay=h(r,"completeDelay",0),K.loop=Math.round(h(r,"loop",0)),K.loopDelay=Math.round(h(r,"loopDelay",0)),K.paused=d(r,"paused",!1),K.useFrames=d(r,"useFrames",!1);for(var J=A(r,"callbackScope",K),Q=[K,null],$=O.TYPES,tt=0;tt<$.length;tt++){var et=$[tt],it=A(r,et,!1);if(it){var nt=A(r,et+"Scope",J),rt=A(r,et+"Params",[]);K.setCallback(et,it,Q.concat(rt),nt)}}return K}},function(t,r,o){var a=o(80),h=o(6),d=o(14);t.exports=function StaggerBuilder(t,r){var o;void 0===r&&(r={});var T=h(r,"start",0),S=h(r,"ease",null),A=h(r,"grid",null),P=h(r,"from",0),O="first"===P,D="center"===P,L="last"===P,I="number"==typeof P,B=Array.isArray(t),N=B?parseFloat(t[0]):parseFloat(t),G=B?parseFloat(t[1]):0,Y=Math.max(N,G);if(B&&(T+=N),A){var X=A[0],U=A[1],z=0,V=0,W=0,H=0,q=[];L?(z=X-1,V=U-1):I?(z=P%X,V=Math.floor(P/X)):D&&(z=(X-1)/2,V=(U-1)/2);for(var Z=d.MIN_SAFE_INTEGER,K=0;K<U;K++){q[K]=[];for(var J=0;J<X;J++){W=z-J,H=V-K;var Q=Math.sqrt(W*W+H*H);Q>Z&&(Z=Q),q[K][J]=Q}}}var $=S?a(S):null;return o=A?function result(t,r,o,a){var h,d=0,S=a%X,A=Math.floor(a/X);if(S>=0&&S<X&&A>=0&&A<U&&(d=q[A][S]),B){var P=G-N;h=$?d/Z*P*$(d/Z):d/Z*P}else h=$?d*N*$(d/Z):d*N;return h+T}:function result(t,r,o,a,h){var d,S,A;return h--,O?d=a:D?d=Math.abs(h/2-a):L?d=h-a:I&&(d=Math.abs(P-a)),B?(A=D?(G-N)/h*(2*d):(G-N)/h*d,S=$?A*$(d/h):A):S=$?h*Y*$(d/h):d*N,S+T},o}},function(t,r,o){var a=o(77),h=o(265),d=o(13),T=o(99),S=o(80),A=o(162),P=o(263),O=o(584),D=o(6),L=o(588),I=o(163);t.exports=function TimelineBuilder(t,r){var o=new L(t);o.completeDelay=d(r,"completeDelay",0),o.loop=Math.round(d(r,"loop",0)),o.loopDelay=Math.round(d(r,"loopDelay",0)),o.paused=T(r,"paused",!1),o.useFrames=T(r,"useFrames",!1);var B=D(r,"callbackScope",o),N=[o],G=D(r,"onStart",!1);if(G){var Y=D(r,"onStartScope",B),X=D(r,"onStartParams",[]);o.setCallback("onStart",G,N.concat(X),Y)}var U=D(r,"onUpdate",!1);if(U){var z=D(r,"onUpdateScope",B),V=D(r,"onUpdateParams",[]);o.setCallback("onUpdate",U,N.concat(V),z)}var W=D(r,"onLoop",!1);if(W){var H=D(r,"onLoopScope",B),q=D(r,"onLoopParams",[]);o.setCallback("onLoop",W,N.concat(q),H)}var Z=D(r,"onYoyo",!1);if(Z){var K=D(r,"onYoyoScope",B),J=D(r,"onYoyoParams",[]);o.setCallback("onYoyo",Z,N.concat(null,J),K)}var Q=D(r,"onComplete",!1);if(Q){var $=D(r,"onCompleteScope",B),tt=D(r,"onCompleteParams",[]);o.setCallback("onComplete",Q,N.concat(tt),$)}var et=O(r);if(0===et.length)return o.paused=!0,o;var it=a(h);it.targets=P(r);var nt=d(r,"totalDuration",0);it.duration=nt>0?Math.floor(nt/et.length):A(r,"duration",it.duration),it.delay=A(r,"delay",it.delay),it.easeParams=D(r,"easeParams",it.easeParams),it.ease=S(D(r,"ease",it.ease),it.easeParams),it.hold=A(r,"hold",it.hold),it.repeat=A(r,"repeat",it.repeat),it.repeatDelay=A(r,"repeatDelay",it.repeatDelay),it.yoyo=T(r,"yoyo",it.yoyo),it.flipX=T(r,"flipX",it.flipX),it.flipY=T(r,"flipY",it.flipY);for(var rt=0;rt<et.length;rt++)o.queue(I(o,et[rt],it));return o}},function(t,r,o){var a=o(0),h=o(9),d=o(267),T=o(163),S=o(100),A=new a({Extends:h,initialize:function Timeline(t){h.call(this),this.manager=t,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=S.PENDING_ADD,this._pausedState=S.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function dispatchTimelineEvent(t,r){this.emit(t,this),r&&r.func.apply(r.scope,r.params)},setTimeScale:function setTimeScale(t){return this.timeScale=t,this},getTimeScale:function getTimeScale(){return this.timeScale},isPlaying:function isPlaying(){return this.state===S.ACTIVE},add:function add(t){return this.queue(T(this,t))},queue:function queue(t){return this.isPlaying()||(t.parent=this,t.parentIsTimeline=!0,this.data.push(t),this.totalData=this.data.length),this},hasOffset:function hasOffset(t){return null!==t.offset},isOffsetAbsolute:function isOffsetAbsolute(t){return"number"==typeof t},isOffsetRelative:function isOffsetRelative(t){if("string"===_typeof(t)){var r=t[0];if("-"===r||"+"===r)return!0}return!1},getRelativeOffset:function getRelativeOffset(t,r){var o=t[0],a=parseFloat(t.substr(2)),h=r;switch(o){case"+":h+=a;break;case"-":h-=a}return Math.max(0,h)},calcDuration:function calcDuration(){for(var t=0,r=0,o=0,a=0;a<this.totalData;a++){var h=this.data[a];h.init(),this.hasOffset(h)?this.isOffsetAbsolute(h.offset)?(h.calculatedOffset=h.offset,0===h.offset&&(o=0)):this.isOffsetRelative(h.offset)&&(h.calculatedOffset=this.getRelativeOffset(h.offset,t)):h.calculatedOffset=o,t=h.totalDuration+h.calculatedOffset,r+=h.totalDuration,o+=h.totalDuration}this.duration=r,this.loopCounter=-1===this.loop?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function init(){return this.calcDuration(),this.progress=0,this.totalProgress=0,!this.paused||(this.state=S.PAUSED,!1)},resetTweens:function resetTweens(t){for(var r=0;r<this.totalData;r++)this.data[r].play(t)},setCallback:function setCallback(t,r,o,a){return-1!==A.TYPES.indexOf(t)&&(this.callbacks[t]={func:r,scope:a,params:o}),this},makeActive:function makeActive(t){return this.manager.makeActive(t)},play:function play(){if(this.state!==S.ACTIVE){if(this.paused)return this.paused=!1,void this.manager.makeActive(this);this.resetTweens(!1),this.state=S.ACTIVE,this.dispatchTimelineEvent(d.TIMELINE_START,this.callbacks.onStart)}},nextState:function nextState(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=S.LOOP_DELAY):(this.state=S.ACTIVE,this.dispatchTimelineEvent(d.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=S.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=S.PENDING_REMOVE,this.dispatchTimelineEvent(d.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function update(t,r){if(this.state!==S.PAUSED){switch(this.useFrames&&(r=1*this.manager.timeScale),r*=this.timeScale,this.elapsed+=r,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=r,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case S.ACTIVE:for(var o=this.totalData,a=0;a<this.totalData;a++)this.data[a].update(t,r)&&o--;this.dispatchTimelineEvent(d.TIMELINE_UPDATE,this.callbacks.onUpdate),0===o&&this.nextState();break;case S.LOOP_DELAY:this.countdown-=r,this.countdown<=0&&(this.state=S.ACTIVE,this.dispatchTimelineEvent(d.TIMELINE_LOOP,this.callbacks.onLoop));break;case S.COMPLETE_DELAY:this.countdown-=r,this.countdown<=0&&(this.state=S.PENDING_REMOVE,this.dispatchTimelineEvent(d.TIMELINE_COMPLETE,this.callbacks.onComplete))}return this.state===S.PENDING_REMOVE}},stop:function stop(){this.state=S.PENDING_REMOVE},pause:function pause(){if(this.state!==S.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=S.PAUSED,this.emit(d.TIMELINE_PAUSE,this),this},resume:function resume(){return this.state===S.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(d.TIMELINE_RESUME,this)),this},hasTarget:function hasTarget(t){for(var r=0;r<this.data.length;r++)if(this.data[r].hasTarget(t))return!0;return!1},destroy:function destroy(){for(var t=0;t<this.data.length;t++)this.data[t].stop()}});A.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],t.exports=A},function(t,r,o){var a=o(86),h=o(41),d=o(32),T=o(2),S=o(64),A={parseBody:function parseBody(t,r,o,a){void 0===a&&(a={});for(var S=T(o,"fixtures",[]),A=[],P=0;P<S.length;P++)for(var O=this.parseFixture(S[P]),D=0;D<O.length;D++)A.push(O[D]);var L=d.clone(o,!0);d.extend(L,a,!0),delete L.fixtures,delete L.type;var I=h.create(L);return h.setParts(I,A),h.setPosition(I,{x:t,y:r}),I},parseFixture:function parseFixture(t){var r,o=d.extend({},!1,t);if(delete o.circle,delete o.vertices,t.circle){var h=T(t.circle,"x"),S=T(t.circle,"y"),A=T(t.circle,"radius");r=[a.circle(h,S,A,o)]}else t.vertices&&(r=this.parseVertices(t.vertices,o));return r},parseVertices:function parseVertices(t,r){void 0===r&&(r={});for(var o=[],T=0;T<t.length;T++)S.clockwiseSort(t[T]),o.push(h.create(d.extend({position:S.centre(t[T]),vertices:t[T]},r)));return a.flagCoincidentParts(o)}};t.exports=A},function(t,r,o){var a=o(86),h=o(41),d={parseBody:function parseBody(t,r,o,d){var T;void 0===d&&(d={});var S=o.vertices;if(1===S.length)d.vertices=S[0],T=h.create(d),a.flagCoincidentParts(T.parts);else{for(var A=[],P=0;P<S.length;P++){var O=h.create({vertices:S[P]});A.push(O)}a.flagCoincidentParts(A),d.parts=A,T=h.create(d)}return T.label=o.label,h.setPosition(T,{x:t,y:r}),T}};t.exports=d},function(t,r,o){var a={};t.exports=a;var h=o(118),d=o(128),T=o(32),S=o(41),A=o(86);a.stack=function(t,r,o,a,d,T,A){for(var P,O=h.create({label:"Stack"}),D=t,L=r,I=0,B=0;B<a;B++){for(var N=0,G=0;G<o;G++){var Y=A(D,L,G,B,P,I);if(Y){var X=Y.bounds.max.y-Y.bounds.min.y,U=Y.bounds.max.x-Y.bounds.min.x;X>N&&(N=X),S.translate(Y,{x:.5*U,y:.5*X}),D=Y.bounds.max.x+d,h.addBody(O,Y),P=Y,I+=1}else D+=d}L+=N+T,D=t}return O},a.chain=function(t,r,o,a,S,A){for(var P=t.bodies,O=1;O<P.length;O++){var D=P[O-1],L=P[O],I=D.bounds.max.y-D.bounds.min.y,B=D.bounds.max.x-D.bounds.min.x,N=L.bounds.max.y-L.bounds.min.y,G={bodyA:D,pointA:{x:B*r,y:I*o},bodyB:L,pointB:{x:(L.bounds.max.x-L.bounds.min.x)*a,y:N*S}},Y=T.extend(G,A);h.addConstraint(t,d.create(Y))}return t.label+=" Chain",t},a.mesh=function(t,r,o,a,S){var A,P,O,D,L,I=t.bodies;for(A=0;A<o;A++){for(P=1;P<r;P++)O=I[P-1+A*r],D=I[P+A*r],h.addConstraint(t,d.create(T.extend({bodyA:O,bodyB:D},S)));if(A>0)for(P=0;P<r;P++)O=I[P+(A-1)*r],D=I[P+A*r],h.addConstraint(t,d.create(T.extend({bodyA:O,bodyB:D},S))),a&&P>0&&(L=I[P-1+(A-1)*r],h.addConstraint(t,d.create(T.extend({bodyA:L,bodyB:D},S)))),a&&P<r-1&&(L=I[P+1+(A-1)*r],h.addConstraint(t,d.create(T.extend({bodyA:L,bodyB:D},S))))}return t.label+=" Mesh",t},a.pyramid=function(t,r,o,h,d,T,A){return a.stack(t,r,o,h,d,T,(function(r,a,T,P,O,D){var L=Math.min(h,Math.ceil(o/2)),I=O?O.bounds.max.x-O.bounds.min.x:0;if(!(P>L||T<(P=L-P)||T>o-1-P))return 1===D&&S.translate(O,{x:(T+(o%2==1?1:-1))*I,y:0}),A(t+(O?T*I:0)+T*d,a,T,P,O,D)}))},a.newtonsCradle=function(t,r,o,a,T){for(var S=h.create({label:"Newtons Cradle"}),P=0;P<o;P++){var O=A.circle(t+P*(1.9*a),r+T,a,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),D=d.create({pointA:{x:t+P*(1.9*a),y:r},bodyB:O});h.addBody(S,O),h.addConstraint(S,D)}return S},a.car=function(t,r,o,a,T){var P=S.nextGroup(!0),O=.5*-o+20,D=.5*o-20,L=h.create({label:"Car"}),I=A.rectangle(t,r,o,a,{collisionFilter:{group:P},chamfer:{radius:.5*a},density:2e-4}),B=A.circle(t+O,r+0,T,{collisionFilter:{group:P},friction:.8}),N=A.circle(t+D,r+0,T,{collisionFilter:{group:P},friction:.8}),G=d.create({bodyB:I,pointB:{x:O,y:0},bodyA:B,stiffness:1,length:0}),Y=d.create({bodyB:I,pointB:{x:D,y:0},bodyA:N,stiffness:1,length:0});return h.addBody(L,I),h.addBody(L,B),h.addBody(L,N),h.addConstraint(L,G),h.addConstraint(L,Y),L},a.softBody=function(t,r,o,h,d,S,P,O,D,L){D=T.extend({inertia:1/0},D),L=T.extend({stiffness:.2,render:{type:"line",anchors:!1}},L);var I=a.stack(t,r,o,h,d,S,(function(t,r){return A.circle(t,r,O,D)}));return a.mesh(I,o,h,P,L),I.label="Soft Body",I}},function(t,r,o){var a={};t.exports=a,o(84);var h=o(32);a.pathToVertices=function(t,r){"undefined"==typeof window||"SVGPathSeg"in window||h.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var o,d,T,S,A,P,O,D,L,I,B,N=[],G=0,Y=0,X=0;r=r||15;var U=function addPoint(t,r,o){var a=o%2==1&&o>1;if(!L||t!=L.x||r!=L.y){L&&a?(I=L.x,B=L.y):(I=0,B=0);var h={x:I+t,y:B+r};!a&&L||(L=h),N.push(h),Y=I+t,X=B+r}},z=function addSegmentPoint(t){var r=t.pathSegTypeAsLetter.toUpperCase();if("Z"!==r){switch(r){case"M":case"L":case"T":case"C":case"S":case"Q":Y=t.x,X=t.y;break;case"H":Y=t.x;break;case"V":X=t.y}U(Y,X,t.pathSegType)}};for(a._svgPathToAbsolute(t),T=t.getTotalLength(),P=[],o=0;o<t.pathSegList.numberOfItems;o+=1)P.push(t.pathSegList.getItem(o));for(O=P.concat();G<T;){if((A=P[t.getPathSegAtLength(G)])!=D){for(;O.length&&O[0]!=A;)z(O.shift());D=A}switch(A.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":S=t.getPointAtLength(G),U(S.x,S.y,0)}G+=r}for(o=0,d=O.length;o<d;++o)z(O[o]);return N},a._svgPathToAbsolute=function(t){for(var r,o,a,h,d,T,S=t.pathSegList,A=0,P=0,O=S.numberOfItems,D=0;D<O;++D){var L=S.getItem(D),I=L.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(I))"x"in L&&(A=L.x),"y"in L&&(P=L.y);else switch("x1"in L&&(a=A+L.x1),"x2"in L&&(d=A+L.x2),"y1"in L&&(h=P+L.y1),"y2"in L&&(T=P+L.y2),"x"in L&&(A+=L.x),"y"in L&&(P+=L.y),I){case"m":S.replaceItem(t.createSVGPathSegMovetoAbs(A,P),D);break;case"l":S.replaceItem(t.createSVGPathSegLinetoAbs(A,P),D);break;case"h":S.replaceItem(t.createSVGPathSegLinetoHorizontalAbs(A),D);break;case"v":S.replaceItem(t.createSVGPathSegLinetoVerticalAbs(P),D);break;case"c":S.replaceItem(t.createSVGPathSegCurvetoCubicAbs(A,P,a,h,d,T),D);break;case"s":S.replaceItem(t.createSVGPathSegCurvetoCubicSmoothAbs(A,P,d,T),D);break;case"q":S.replaceItem(t.createSVGPathSegCurvetoQuadraticAbs(A,P,a,h),D);break;case"t":S.replaceItem(t.createSVGPathSegCurvetoQuadraticSmoothAbs(A,P),D);break;case"a":S.replaceItem(t.createSVGPathSegArcAbs(A,P,L.r1,L.r2,L.angle,L.largeArcFlag,L.sweepFlag),D);break;case"z":case"Z":A=r,P=o}"M"!=I&&"m"!=I||(r=A,o=P)}}},function(t,r,o){var a=o(86),h=o(41),d=o(0),T=o(249),S=o(9),A=o(2),P=o(126),O=o(64),D=new d({Extends:S,Mixins:[T.Bounce,T.Collision,T.Friction,T.Gravity,T.Mass,T.Sensor,T.Sleep,T.Static],initialize:function MatterTileBody(t,r,o){S.call(this),this.tile=r,this.world=t,r.physics.matterBody&&r.physics.matterBody.destroy(),r.physics.matterBody=this;var a=A(o,"body",null),h=A(o,"addToWorld",!0);if(a)this.setBody(a,h);else{var d=r.getCollisionGroup();A(d,"objects",[]).length>0?this.setFromTileCollision(o):this.setFromTileRectangle(o)}},setFromTileRectangle:function setFromTileRectangle(t){void 0===t&&(t={}),P(t,"isStatic")||(t.isStatic=!0),P(t,"addToWorld")||(t.addToWorld=!0);var r=this.tile.getBounds(),o=r.x+r.width/2,h=r.y+r.height/2,d=a.rectangle(o,h,r.width,r.height,t);return this.setBody(d,t.addToWorld),this},setFromTileCollision:function setFromTileCollision(t){void 0===t&&(t={}),P(t,"isStatic")||(t.isStatic=!0),P(t,"addToWorld")||(t.addToWorld=!0);for(var r=this.tile.tilemapLayer.scaleX,o=this.tile.tilemapLayer.scaleY,d=this.tile.getLeft(),T=this.tile.getTop(),S=this.tile.getCollisionGroup(),D=A(S,"objects",[]),L=[],I=0;I<D.length;I++){var B=D[I],N=d+B.x*r,G=T+B.y*o,Y=B.width*r,X=B.height*o,U=null;if(B.rectangle)U=a.rectangle(N+Y/2,G+X/2,Y,X,t);else if(B.ellipse)U=a.circle(N+Y/2,G+X/2,Y/2,t);else if(B.polygon||B.polyline){var z=(B.polygon?B.polygon:B.polyline).map((function(t){return{x:t.x*r,y:t.y*o}})),V=O.create(z),W=O.centre(V);N+=W.x,G+=W.y,U=a.fromVertices(N,G,V,t)}U&&L.push(U)}return 1===L.length?this.setBody(L[0],t.addToWorld):L.length>1&&(t.parts=L,this.setBody(h.create(t),t.addToWorld)),this},setBody:function setBody(t,r){return void 0===r&&(r=!0),this.body&&this.removeBody(),this.body=t,this.body.gameObject=this,r&&this.world.add(this.body),this},removeBody:function removeBody(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function destroy(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});t.exports=D},function(t,r,o){var a=o(1399);a.Body=o(41),a.Composite=o(118),a.World=o(596),a.Detector=o(273),a.Grid=o(597),a.Pairs=o(598),a.Pair=o(250),a.Query=o(1400),a.Resolver=o(599),a.SAT=o(274),a.Constraint=o(128),a.Common=o(32),a.Engine=o(1401),a.Events=o(166),a.Sleeping=o(165),a.Plugin=o(595),a.Bodies=o(86),a.Composites=o(591),a.Axes=o(271),a.Bounds=o(84),a.Svg=o(592),a.Vector=o(83),a.Vertices=o(64),a.World.add=a.Composite.add,a.World.remove=a.Composite.remove,a.World.addComposite=a.Composite.addComposite,a.World.addBody=a.Composite.addBody,a.World.addConstraint=a.Composite.addConstraint,a.World.clear=a.Composite.clear,t.exports=a},function(t,r,o){var a={};t.exports=a;var h=o(32);a._registry={},a.register=function(t){if(a.isPlugin(t)||h.warn("Plugin.register:",a.toString(t),"does not implement all required fields."),t.name in a._registry){var r=a._registry[t.name],o=a.versionParse(t.version).number,d=a.versionParse(r.version).number;o>d?(h.warn("Plugin.register:",a.toString(r),"was upgraded to",a.toString(t)),a._registry[t.name]=t):o<d?h.warn("Plugin.register:",a.toString(r),"can not be downgraded to",a.toString(t)):t!==r&&h.warn("Plugin.register:",a.toString(t),"is already registered to different plugin object")}else a._registry[t.name]=t;return t},a.resolve=function(t){return a._registry[a.dependencyParse(t).name]},a.toString=function(t){return"string"==typeof t?t:(t.name||"anonymous")+"@"+(t.version||t.range||"0.0.0")},a.isPlugin=function(t){return t&&t.name&&t.version&&t.install},a.isUsed=function(t,r){return t.used.indexOf(r)>-1},a.isFor=function(t,r){var o=t.for&&a.dependencyParse(t.for);return!t.for||r.name===o.name&&a.versionSatisfies(r.version,o.range)},a.use=function(t,r){if(t.uses=(t.uses||[]).concat(r||[]),0!==t.uses.length){for(var o=a.dependencies(t),d=h.topologicalSort(o),T=[],S=0;S<d.length;S+=1)if(d[S]!==t.name){var A=a.resolve(d[S]);A?a.isUsed(t,A.name)||(a.isFor(A,t)||(h.warn("Plugin.use:",a.toString(A),"is for",A.for,"but installed on",a.toString(t)+"."),A._warned=!0),A.install?A.install(t):(h.warn("Plugin.use:",a.toString(A),"does not specify an install function."),A._warned=!0),A._warned?(T.push(" "+a.toString(A)),delete A._warned):T.push(" "+a.toString(A)),t.used.push(A.name)):T.push(" "+d[S])}T.length>0&&!A.silent&&h.info(T.join("  "))}else h.warn("Plugin.use:",a.toString(t),"does not specify any dependencies to install.")},a.dependencies=function(t,r){var o=a.dependencyParse(t),d=o.name;if(!(d in(r=r||{}))){t=a.resolve(t)||t,r[d]=h.map(t.uses||[],(function(r){a.isPlugin(r)&&a.register(r);var d=a.dependencyParse(r),T=a.resolve(r);return T&&!a.versionSatisfies(T.version,d.range)?(h.warn("Plugin.dependencies:",a.toString(T),"does not satisfy",a.toString(d),"used by",a.toString(o)+"."),T._warned=!0,t._warned=!0):T||(h.warn("Plugin.dependencies:",a.toString(r),"used by",a.toString(o),"could not be resolved."),t._warned=!0),d.name}));for(var T=0;T<r[d].length;T+=1)a.dependencies(r[d][T],r);return r}},a.dependencyParse=function(t){return h.isString(t)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/.test(t)||h.warn("Plugin.dependencyParse:",t,"is not a valid dependency string."),{name:t.split("@")[0],range:t.split("@")[1]||"*"}):{name:t.name,range:t.range||t.version}},a.versionParse=function(t){/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/.test(t)||h.warn("Plugin.versionParse:",t,"is not a valid version or range.");var r=t.split("-");t=r[0];var o=isNaN(Number(t[0])),a=o?t.substr(1):t,d=h.map(a.split("."),(function(t){return Number(t)}));return{isRange:o,version:a,range:t,operator:o?t[0]:"",parts:d,prerelease:r[1],number:1e8*d[0]+1e4*d[1]+d[2]}},a.versionSatisfies=function(t,r){r=r||"*";var o=a.versionParse(r),h=o.parts,d=a.versionParse(t),T=d.parts;if(o.isRange){if("*"===o.operator||"*"===t)return!0;if("~"===o.operator)return T[0]===h[0]&&T[1]===h[1]&&T[2]>=h[2];if("^"===o.operator)return h[0]>0?T[0]===h[0]&&d.number>=o.number:h[1]>0?T[1]===h[1]&&T[2]>=h[2]:T[2]===h[2]}return t===r||"*"===t}},function(t,r,o){var a={};t.exports=a;var h=o(118);o(128);var d=o(32);a.create=function(t){var r=h.create(),o={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return d.extend(r,o,t)}},function(t,r,o){var a={};t.exports=a;var h=o(250),d=o(273),T=o(32);a.create=function(t){var r={controller:a,detector:d.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return T.extend(r,t)},a.update=function(t,r,o,h){var d,T,S,A,P,O=o.world,D=t.buckets,L=!1,I=o.metrics;for(I.broadphaseTests=0,d=0;d<r.length;d++){var B=r[d];if((!B.isSleeping||h)&&!(B.bounds.max.x<O.bounds.min.x||B.bounds.min.x>O.bounds.max.x||B.bounds.max.y<O.bounds.min.y||B.bounds.min.y>O.bounds.max.y)){var N=a._getRegion(t,B);if(!B.region||N.id!==B.region.id||h){I.broadphaseTests+=1,B.region&&!h||(B.region=N);var G=a._regionUnion(N,B.region);for(T=G.startCol;T<=G.endCol;T++)for(S=G.startRow;S<=G.endRow;S++){A=D[P=a._getBucketId(T,S)];var Y=T>=N.startCol&&T<=N.endCol&&S>=N.startRow&&S<=N.endRow,X=T>=B.region.startCol&&T<=B.region.endCol&&S>=B.region.startRow&&S<=B.region.endRow;!Y&&X&&X&&A&&a._bucketRemoveBody(t,A,B),(B.region===N||Y&&!X||h)&&(A||(A=a._createBucket(D,P)),a._bucketAddBody(t,A,B))}B.region=N,L=!0}}}L&&(t.pairsList=a._createActivePairsList(t))},a.clear=function(t){t.buckets={},t.pairs={},t.pairsList=[]},a._regionUnion=function(t,r){var o=Math.min(t.startCol,r.startCol),h=Math.max(t.endCol,r.endCol),d=Math.min(t.startRow,r.startRow),T=Math.max(t.endRow,r.endRow);return a._createRegion(o,h,d,T)},a._getRegion=function(t,r){var o=r.bounds,h=Math.floor(o.min.x/t.bucketWidth),d=Math.floor(o.max.x/t.bucketWidth),T=Math.floor(o.min.y/t.bucketHeight),S=Math.floor(o.max.y/t.bucketHeight);return a._createRegion(h,d,T,S)},a._createRegion=function(t,r,o,a){return{id:t+","+r+","+o+","+a,startCol:t,endCol:r,startRow:o,endRow:a}},a._getBucketId=function(t,r){return"C"+t+"R"+r},a._createBucket=function(t,r){return t[r]=[]},a._bucketAddBody=function(t,r,o){for(var a=0;a<r.length;a++){var d=r[a];if(!(o.id===d.id||o.isStatic&&d.isStatic)){var T=h.id(o,d),S=t.pairs[T];S?S[2]+=1:t.pairs[T]=[o,d,1]}}r.push(o)},a._bucketRemoveBody=function(t,r,o){r.splice(r.indexOf(o),1);for(var a=0;a<r.length;a++){var d=r[a],T=h.id(o,d),S=t.pairs[T];S&&(S[2]-=1)}},a._createActivePairsList=function(t){var r,o,a=[];r=T.keys(t.pairs);for(var h=0;h<r.length;h++)(o=t.pairs[r[h]])[2]>0?a.push(o):delete t.pairs[r[h]];return a}},function(t,r,o){var a={};t.exports=a;var h=o(250),d=o(32);a._pairMaxIdleLife=1e3,a.create=function(t){return d.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},t)},a.update=function(t,r,o){var a,d,T,S,A=t.list,P=t.table,O=t.collisionStart,D=t.collisionEnd,L=t.collisionActive;for(O.length=0,D.length=0,L.length=0,S=0;S<A.length;S++)A[S].confirmedActive=!1;for(S=0;S<r.length;S++)(a=r[S]).collided&&((T=P[d=h.id(a.bodyA,a.bodyB)])?(T.isActive?L.push(T):O.push(T),h.update(T,a,o),T.confirmedActive=!0):(T=h.create(a,o),P[d]=T,O.push(T),A.push(T)));for(S=0;S<A.length;S++)(T=A[S]).isActive&&!T.confirmedActive&&(h.setActive(T,!1,o),D.push(T))},a.removeOld=function(t,r){var o,h,d,T,S=t.list,A=t.table,P=[];for(T=0;T<S.length;T++)(h=(o=S[T]).collision).bodyA.isSleeping||h.bodyB.isSleeping?o.timeUpdated=r:r-o.timeUpdated>a._pairMaxIdleLife&&P.push(T);for(T=0;T<P.length;T++)delete A[(o=S[d=P[T]-T]).id],S.splice(d,1)},a.clear=function(t){return t.table={},t.list.length=0,t.collisionStart.length=0,t.collisionActive.length=0,t.collisionEnd.length=0,t}},function(t,r,o){var a={};t.exports=a;var h=o(64),d=o(83),T=o(32),S=o(84);a._restingThresh=4,a._restingThreshTangent=6,a._positionDampen=.9,a._positionWarming=.8,a._frictionNormalMultiplier=5,a.preSolvePosition=function(t){var r,o,a;for(r=0;r<t.length;r++)(o=t[r]).isActive&&(a=o.activeContacts.length,o.collision.parentA.totalContacts+=a,o.collision.parentB.totalContacts+=a)},a.solvePosition=function(t,r,o){var h,d,T,S,A,P,O,D,L,I,B,N,G,Y,X,U,z=o*a._positionDampen;for(h=0;h<r.length;h++){var V=r[h];V.previousPositionImpulse.x=V.positionImpulse.x,V.previousPositionImpulse.y=V.positionImpulse.y}for(h=0;h<t.length;h++)(S=t[h]).isActive&&!S.isSensor&&(P=(A=S.collision).parentA,O=A.parentB,D=A.normal,B=P.previousPositionImpulse,N=O.previousPositionImpulse,I=A.penetration,Y=N.x-B.x+I.x,X=N.y-B.y+I.y,L=(d=D.x)*Y+(T=D.y)*X,S.separation=L,U=(L-S.slop)*z,(P.isStatic||O.isStatic)&&(U*=2),P.isStatic||P.isSleeping||(G=U/P.totalContacts,P.positionImpulse.x+=d*G,P.positionImpulse.y+=T*G),O.isStatic||O.isSleeping||(G=U/O.totalContacts,O.positionImpulse.x-=d*G,O.positionImpulse.y-=T*G))},a.postSolvePosition=function(t){for(var r=0;r<t.length;r++){var o=t[r];if(o.totalContacts=0,0!==o.positionImpulse.x||0!==o.positionImpulse.y){for(var T=0;T<o.parts.length;T++){var A=o.parts[T];h.translate(A.vertices,o.positionImpulse),S.update(A.bounds,A.vertices,o.velocity),A.position.x+=o.positionImpulse.x,A.position.y+=o.positionImpulse.y}o.positionPrev.x+=o.positionImpulse.x,o.positionPrev.y+=o.positionImpulse.y,d.dot(o.positionImpulse,o.velocity)<0?(o.positionImpulse.x=0,o.positionImpulse.y=0):(o.positionImpulse.x*=a._positionWarming,o.positionImpulse.y*=a._positionWarming)}}},a.preSolveVelocity=function(t){var r,o,a,h,T,S,A,P,O,D,L,I,B,N,G=d._temp[0],Y=d._temp[1];for(r=0;r<t.length;r++)if((a=t[r]).isActive&&!a.isSensor)for(h=a.activeContacts,S=(T=a.collision).parentA,A=T.parentB,P=T.normal,O=T.tangent,o=0;o<h.length;o++)L=(D=h[o]).vertex,I=D.normalImpulse,B=D.tangentImpulse,0===I&&0===B||(G.x=P.x*I+O.x*B,G.y=P.y*I+O.y*B,S.isStatic||S.isSleeping||(N=d.sub(L,S.position,Y),S.positionPrev.x+=G.x*S.inverseMass,S.positionPrev.y+=G.y*S.inverseMass,S.anglePrev+=d.cross(N,G)*S.inverseInertia),A.isStatic||A.isSleeping||(N=d.sub(L,A.position,Y),A.positionPrev.x-=G.x*A.inverseMass,A.positionPrev.y-=G.y*A.inverseMass,A.anglePrev-=d.cross(N,G)*A.inverseInertia))},a.solveVelocity=function(t,r){for(var o=r*r,h=d._temp[0],S=d._temp[1],A=d._temp[2],P=d._temp[3],O=d._temp[4],D=d._temp[5],L=0;L<t.length;L++){var I=t[L];if(I.isActive&&!I.isSensor){var B=I.collision,N=B.parentA,G=B.parentB,Y=B.normal,X=B.tangent,U=I.activeContacts,z=1/U.length;N.velocity.x=N.position.x-N.positionPrev.x,N.velocity.y=N.position.y-N.positionPrev.y,G.velocity.x=G.position.x-G.positionPrev.x,G.velocity.y=G.position.y-G.positionPrev.y,N.angularVelocity=N.angle-N.anglePrev,G.angularVelocity=G.angle-G.anglePrev;for(var V=0;V<U.length;V++){var W=U[V],H=W.vertex,q=d.sub(H,N.position,S),Z=d.sub(H,G.position,A),K=d.add(N.velocity,d.mult(d.perp(q),N.angularVelocity),P),J=d.add(G.velocity,d.mult(d.perp(Z),G.angularVelocity),O),Q=d.sub(K,J,D),$=d.dot(Y,Q),tt=d.dot(X,Q),et=Math.abs(tt),it=T.sign(tt),nt=(1+I.restitution)*$,rt=T.clamp(I.separation+$,0,1)*a._frictionNormalMultiplier,st=tt,ot=1/0;et>I.friction*I.frictionStatic*rt*o&&(ot=et,st=T.clamp(I.friction*it*o,-ot,ot));var at=d.cross(q,Y),ht=d.cross(Z,Y),lt=z/(N.inverseMass+G.inverseMass+N.inverseInertia*at*at+G.inverseInertia*ht*ht);if(nt*=lt,st*=lt,$<0&&$*$>a._restingThresh*o)W.normalImpulse=0;else{var ut=W.normalImpulse;W.normalImpulse=Math.min(W.normalImpulse+nt,0),nt=W.normalImpulse-ut}if(tt*tt>a._restingThreshTangent*o)W.tangentImpulse=0;else{var ct=W.tangentImpulse;W.tangentImpulse=T.clamp(W.tangentImpulse+st,-ot,ot),st=W.tangentImpulse-ct}h.x=Y.x*nt+X.x*st,h.y=Y.y*nt+X.y*st,N.isStatic||N.isSleeping||(N.positionPrev.x+=h.x*N.inverseMass,N.positionPrev.y+=h.y*N.inverseMass,N.anglePrev+=d.cross(q,h)*N.inverseInertia),G.isStatic||G.isSleeping||(G.positionPrev.x-=h.x*G.inverseMass,G.positionPrev.y-=h.y*G.inverseMass,G.anglePrev-=d.cross(Z,h)*G.inverseInertia)}}}}},function(t,r){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch(a){"object"===("undefined"==typeof window?"undefined":_typeof(window))&&(o=window)}t.exports=o},function(t,r,o){var a=o(276);t.exports=function AlignTo(t,r,o,h){for(var d=t[0],T=1;T<t.length;T++){var S=t[T];a(S,d,r,o,h),d=S}return t}},function(t,r,o){var a=o(46);t.exports=function Angle(t,r,o,h,d){return a(t,"angle",r,o,h,d)}},function(t,r){t.exports=function Call(t,r,o){for(var a=0;a<t.length;a++){var h=t[a];r.call(o,h)}return t}},function(t,r){t.exports=function GetFirst(t,r,o){void 0===o&&(o=0);for(var a=o;a<t.length;a++){var h=t[a],d=!0;for(var T in r)h[T]!==r[T]&&(d=!1);if(d)return h}return null}},function(t,r){t.exports=function GetLast(t,r,o){void 0===o&&(o=0);for(var a=o;a<t.length;a++){var h=t[a],d=!0;for(var T in r)h[T]!==r[T]&&(d=!1);if(d)return h}return null}},function(t,r,o){var a=o(289),h=o(123),d=o(2),T=o(1),S=new(o(129))({sys:{queueDepthSort:T,events:{once:T}}},0,0,1,1);t.exports=function GridAlign(t,r){void 0===r&&(r={});var o=r.hasOwnProperty("width"),T=r.hasOwnProperty("height"),A=d(r,"width",-1),P=d(r,"height",-1),O=d(r,"cellWidth",1),D=d(r,"cellHeight",O),L=d(r,"position",h.TOP_LEFT),I=d(r,"x",0),B=d(r,"y",0),N=0,G=0,Y=A*O,X=P*D;S.setPosition(I,B),S.setSize(O,D);for(var U=0;U<t.length;U++)if(a(t[U],S,L),o&&-1===A)S.x+=O;else if(T&&-1===P)S.y+=D;else if(T&&!o){if(G+=D,S.y+=D,G===X&&(G=0,N+=O,S.y=B,S.x+=O,N===Y))break}else if(N+=O,S.x+=O,N===Y&&(N=0,G+=D,S.x=I,S.y+=D,G===X))break;return t}},function(t,r,o){var a=o(18),h={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function clearAlpha(){return this.setAlpha(1)},setAlpha:function setAlpha(t,r,o,h){return void 0===t&&(t=1),void 0===r?this.alpha=t:(this._alphaTL=a(t,0,1),this._alphaTR=a(r,0,1),this._alphaBL=a(o,0,1),this._alphaBR=a(h,0,1)),this},alpha:{get:function get(){return this._alpha},set:function set(t){var r=a(t,0,1);this._alpha=r,this._alphaTL=r,this._alphaTR=r,this._alphaBL=r,this._alphaBR=r,0===r?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function get(){return this._alphaTL},set:function set(t){var r=a(t,0,1);this._alphaTL=r,0!==r&&(this.renderFlags|=2)}},alphaTopRight:{get:function get(){return this._alphaTR},set:function set(t){var r=a(t,0,1);this._alphaTR=r,0!==r&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function get(){return this._alphaBL},set:function set(t){var r=a(t,0,1);this._alphaBL=r,0!==r&&(this.renderFlags|=2)}},alphaBottomRight:{get:function get(){return this._alphaBR},set:function set(t){var r=a(t,0,1);this._alphaBR=r,0!==r&&(this.renderFlags|=2)}}};t.exports=h},function(t,r){t.exports={width:0,height:0,displayWidth:{get:function get(){return this.scaleX*this.width},set:function set(t){this.scaleX=t/this.width}},displayHeight:{get:function get(){return this.scaleY*this.height},set:function set(t){this.scaleY=t/this.height}},setSize:function setSize(t,r){return this.width=t,this.height=r,this},setDisplaySize:function setDisplaySize(t,r){return this.displayWidth=t,this.displayHeight=r,this}}},function(t,r){var o={texture:null,frame:null,isCropped:!1,setCrop:function setCrop(t,r,o,a){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,r,o,a,this.flipX,this.flipY);else{var h=t;this.frame.setCropUVs(this._crop,h.x,h.y,h.width,h.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function resetCropObject(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};t.exports=o},function(t,r){t.exports={flipX:!1,flipY:!1,toggleFlipX:function toggleFlipX(){return this.flipX=!this.flipX,this},toggleFlipY:function toggleFlipY(){return this.flipY=!this.flipY,this},setFlipX:function setFlipX(t){return this.flipX=t,this},setFlipY:function setFlipY(t){return this.flipY=t,this},setFlip:function setFlip(t,r){return this.flipX=t,this.flipY=r,this},resetFlip:function resetFlip(){return this.flipX=!1,this.flipY=!1,this}}},function(t,r,o){var a=o(10),h=o(308),d=o(3),T={prepareBoundsOutput:function prepareBoundsOutput(t,r){return void 0===r&&(r=!1),0!==this.rotation&&h(t,this.x,this.y,this.rotation),r&&this.parentContainer&&this.parentContainer.getBoundsTransformMatrix().transformPoint(t.x,t.y,t),t},getCenter:function getCenter(t){return void 0===t&&(t=new d),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,t},getTopLeft:function getTopLeft(t,r){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,r)},getTopCenter:function getTopCenter(t,r){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,r)},getTopRight:function getTopRight(t,r){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,r)},getLeftCenter:function getLeftCenter(t,r){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,r)},getRightCenter:function getRightCenter(t,r){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,r)},getBottomLeft:function getBottomLeft(t,r){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,r)},getBottomCenter:function getBottomCenter(t,r){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,r)},getBottomRight:function getBottomRight(t,r){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,r)},getBounds:function getBounds(t){var r,o,h,d,T,S,A,P;if(void 0===t&&(t=new a),this.parentContainer){var O=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(t),O.transformPoint(t.x,t.y,t),r=t.x,o=t.y,this.getTopRight(t),O.transformPoint(t.x,t.y,t),h=t.x,d=t.y,this.getBottomLeft(t),O.transformPoint(t.x,t.y,t),T=t.x,S=t.y,this.getBottomRight(t),O.transformPoint(t.x,t.y,t),A=t.x,P=t.y}else this.getTopLeft(t),r=t.x,o=t.y,this.getTopRight(t),h=t.x,d=t.y,this.getBottomLeft(t),T=t.x,S=t.y,this.getBottomRight(t),A=t.x,P=t.y;return t.x=Math.min(r,h,T,A),t.y=Math.min(o,d,S,P),t.width=Math.max(r,h,T,A)-t.x,t.height=Math.max(o,d,S,P)-t.y,t}};t.exports=T},function(t,r){t.exports="blur"},function(t,r){t.exports="boot"},function(t,r){t.exports="contextlost"},function(t,r){t.exports="contextrestored"},function(t,r){t.exports="destroy"},function(t,r){t.exports="focus"},function(t,r){t.exports="hidden"},function(t,r){t.exports="pause"},function(t,r){t.exports="postrender"},function(t,r){t.exports="poststep"},function(t,r){t.exports="prerender"},function(t,r){t.exports="prestep"},function(t,r){t.exports="ready"},function(t,r){t.exports="resume"},function(t,r){t.exports="step"},function(t,r){t.exports="visible"},function(t,r){t.exports="postrender"},function(t,r){t.exports="prerender"},function(t,r){t.exports="render"},function(t,r){t.exports="resize"},function(t,r){var o={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function get(){return this._displayOriginX},set:function set(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function get(){return this._displayOriginY},set:function set(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function setOrigin(t,r){return void 0===t&&(t=.5),void 0===r&&(r=t),this.originX=t,this.originY=r,this.updateDisplayOrigin()},setOriginFromFrame:function setOriginFromFrame(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function setDisplayOrigin(t,r){return void 0===t&&(t=0),void 0===r&&(r=t),this.displayOriginX=t,this.displayOriginY=r,this},updateDisplayOrigin:function updateDisplayOrigin(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};t.exports=o},function(t,r,o){var a=o(36),h=o(99),d=o(6),T=o(100),S=o(3),A={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:T.PLAYING_FORWARD,setPath:function setPath(t,r){void 0===r&&(r=this.pathConfig);var o=this.pathTween;return o&&o.isPlaying()&&o.stop(),this.path=t,r&&this.startFollow(r),this},setRotateToPath:function setRotateToPath(t,r){return void 0===r&&(r=0),this.rotateToPath=t,this.pathRotationOffset=r,this},isFollowing:function isFollowing(){var t=this.pathTween;return t&&t.isPlaying()},startFollow:function startFollow(t,r){void 0===t&&(t={}),void 0===r&&(r=0);var o=this.pathTween;o&&o.isPlaying()&&o.stop(),"number"==typeof t&&(t={duration:t}),t.from=d(t,"from",0),t.to=d(t,"to",1);var A=h(t,"positionOnPath",!1);this.rotateToPath=h(t,"rotateToPath",!1),this.pathRotationOffset=d(t,"rotationOffset",0);var P=d(t,"startAt",r);if(P&&(t.onStart=function(t){var r=t.data[0];r.progress=P,r.elapsed=r.duration*P;var o=r.ease(r.progress);r.current=r.start+(r.end-r.start)*o,r.target[r.key]=r.current}),this.pathOffset||(this.pathOffset=new S(this.x,this.y)),this.pathVector||(this.pathVector=new S),this.pathDelta||(this.pathDelta=new S),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(t),this.path.getStartPoint(this.pathOffset),A&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=T.PLAYING_FORWARD,this.rotateToPath){var O=this.path.getPoint(.1);this.rotation=Math.atan2(O.y-this.y,O.x-this.x)+a(this.pathRotationOffset)}return this.pathConfig=t,this},pauseFollow:function pauseFollow(){var t=this.pathTween;return t&&t.isPlaying()&&t.pause(),this},resumeFollow:function resumeFollow(){var t=this.pathTween;return t&&t.isPaused()&&t.resume(),this},stopFollow:function stopFollow(){var t=this.pathTween;return t&&t.isPlaying()&&t.stop(),this},pathUpdate:function pathUpdate(){var t=this.pathTween;if(t){var r=t.data[0],o=this.pathDelta,h=this.pathVector;if(o.copy(h).negate(),r.state===T.COMPLETE)return this.path.getPoint(1,h),o.add(h),h.add(this.pathOffset),void this.setPosition(h.x,h.y);if(r.state!==T.PLAYING_FORWARD&&r.state!==T.PLAYING_BACKWARD)return;this.path.getPoint(t.getValue(),h),o.add(h),h.add(this.pathOffset);var d=this.x,S=this.y;this.setPosition(h.x,h.y);var A=this.x-d,P=this.y-S;if(0===A&&0===P)return;if(r.state!==this._prevDirection)return void(this._prevDirection=r.state);this.rotateToPath&&(this.rotation=Math.atan2(P,A)+a(this.pathRotationOffset))}}};t.exports=A},function(t,r){var o={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function get(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function set(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function get(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function set(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function setSizeToFrame(t){return void 0===t&&(t=this.frame),this.width=t.realWidth,this.height=t.realHeight,this},setSize:function setSize(t,r){return this.width=t,this.height=r,this},setDisplaySize:function setDisplaySize(t,r){return this.displayWidth=t,this.displayHeight=r,this}};t.exports=o},function(t,r){var o={texture:null,frame:null,isCropped:!1,setTexture:function setTexture(t,r){return this.texture=this.scene.sys.textures.get(t),this.setFrame(r)},setFrame:function setFrame(t,r,o){return void 0===r&&(r=!0),void 0===o&&(o=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&r&&this.setSizeToFrame(),this._originComponent&&o&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};t.exports=o},function(t,r){var o={texture:null,frame:null,isCropped:!1,setCrop:function setCrop(t,r,o,a){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,r,o,a,this.flipX,this.flipY);else{var h=t;this.frame.setCropUVs(this._crop,h.x,h.y,h.width,h.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function setTexture(t,r){return this.texture=this.scene.sys.textures.get(t),this.setFrame(r)},setFrame:function setFrame(t,r,o){return void 0===r&&(r=!0),void 0===o&&(o=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&r&&this.setSizeToFrame(),this._originComponent&&o&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function resetCropObject(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};t.exports=o},function(t,r){var o={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function clearTint(){return this.setTint(16777215),this},setTint:function setTint(t,r,o,a){return void 0===t&&(t=16777215),void 0===r&&(r=t,o=t,a=t),this.tintTopLeft=t,this.tintTopRight=r,this.tintBottomLeft=o,this.tintBottomRight=a,this.tintFill=!1,this},setTintFill:function setTintFill(t,r,o,a){return this.setTint(t,r,o,a),this.tintFill=!0,this},tint:{set:function set(t){this.setTint(t,t,t,t)}},isTinted:{get:function get(){var t=16777215;return this.tintFill||this.tintTopLeft!==t||this.tintTopRight!==t||this.tintBottomLeft!==t||this.tintBottomRight!==t}}};t.exports=o},function(t,r){t.exports="changedata"},function(t,r){t.exports="changedata-"},function(t,r){t.exports="destroy"},function(t,r){t.exports="removedata"},function(t,r){t.exports="setdata"},function(t,r){t.exports="addedtoscene"},function(t,r){t.exports="destroy"},function(t,r){t.exports="removedfromscene"},function(t,r){t.exports="complete"},function(t,r){t.exports="created"},function(t,r){t.exports="error"},function(t,r){t.exports="loop"},function(t,r){t.exports="play"},function(t,r){t.exports="seeked"},function(t,r){t.exports="seeking"},function(t,r){t.exports="stop"},function(t,r){t.exports="timeout"},function(t,r){t.exports="unlocked"},function(t,r){t.exports="addedtoscene"},function(t,r){t.exports="boot"},function(t,r){t.exports="create"},function(t,r){t.exports="destroy"},function(t,r){t.exports="pause"},function(t,r){t.exports="postupdate"},function(t,r){t.exports="prerender"},function(t,r){t.exports="preupdate"},function(t,r){t.exports="ready"},function(t,r){t.exports="removedfromscene"},function(t,r){t.exports="render"},function(t,r){t.exports="resume"},function(t,r){t.exports="shutdown"},function(t,r){t.exports="sleep"},function(t,r){t.exports="start"},function(t,r){t.exports="transitioncomplete"},function(t,r){t.exports="transitioninit"},function(t,r){t.exports="transitionout"},function(t,r){t.exports="transitionstart"},function(t,r){t.exports="transitionwake"},function(t,r){t.exports="update"},function(t,r){t.exports="wake"},function(t,r,o){var a=o(46);t.exports=function IncAlpha(t,r,o,h,d){return a(t,"alpha",r,o,h,d)}},function(t,r,o){var a=o(46);t.exports=function IncX(t,r,o,h,d){return a(t,"x",r,o,h,d)}},function(t,r,o){var a=o(46);t.exports=function IncXY(t,r,o,h,d,T,S){return null==o&&(o=r),a(t,"x",r,h,T,S),a(t,"y",o,d,T,S)}},function(t,r,o){var a=o(46);t.exports=function IncY(t,r,o,h,d){return a(t,"y",r,o,h,d)}},function(t,r){t.exports=function PlaceOnCircle(t,r,o,a){void 0===o&&(o=0),void 0===a&&(a=6.28);for(var h=o,d=(a-o)/t.length,T=0;T<t.length;T++)t[T].x=r.x+r.radius*Math.cos(h),t[T].y=r.y+r.radius*Math.sin(h),h+=d;return t}},function(t,r){t.exports=function PlaceOnEllipse(t,r,o,a){void 0===o&&(o=0),void 0===a&&(a=6.28);for(var h=o,d=(a-o)/t.length,T=r.width/2,S=r.height/2,A=0;A<t.length;A++)t[A].x=r.x+T*Math.cos(h),t[A].y=r.y+S*Math.sin(h),h+=d;return t}},function(t,r,o){var a=o(172);t.exports=function PlaceOnLine(t,r){for(var o=a(r,t.length),h=0;h<t.length;h++){var d=t[h],T=o[h];d.x=T.x,d.y=T.y}return t}},function(t,r,o){var a=o(316),h=o(178),d=o(179);t.exports=function PlaceOnRectangle(t,r,o){void 0===o&&(o=0);var T=a(r,!1,t.length);o>0?h(T,o):o<0&&d(T,Math.abs(o));for(var S=0;S<t.length;S++)t[S].x=T[S].x,t[S].y=T[S].y;return t}},function(t,r,o){var a=o(317);t.exports=function PlaceOnTriangle(t,r,o){var h=a({x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2},o),d=a({x1:r.x2,y1:r.y2,x2:r.x3,y2:r.y3},o),T=a({x1:r.x3,y1:r.y3,x2:r.x1,y2:r.y1},o);h.pop(),d.pop(),T.pop();for(var S=(h=h.concat(d,T)).length/t.length,A=0,P=0;P<t.length;P++){var O=t[P],D=h[Math.floor(A)];O.x=D.x,O.y=D.y,A+=S}return t}},function(t,r){t.exports=function PlayAnimation(t,r,o){for(var a=0;a<t.length;a++){var h=t[a];h.anims&&h.anims.play(r,o)}return t}},function(t,r,o){var a=o(170);t.exports=function RandomCircle(t,r){for(var o=0;o<t.length;o++)a(r,t[o]);return t}},function(t,r,o){var a=o(180);t.exports=function RandomEllipse(t,r){for(var o=0;o<t.length;o++)a(r,t[o]);return t}},function(t,r,o){var a=o(173);t.exports=function RandomLine(t,r){for(var o=0;o<t.length;o++)a(r,t[o]);return t}},function(t,r,o){var a=o(174);t.exports=function RandomRectangle(t,r){for(var o=0;o<t.length;o++)a(r,t[o]);return t}},function(t,r,o){var a=o(181);t.exports=function RandomTriangle(t,r){for(var o=0;o<t.length;o++)a(r,t[o]);return t}},function(t,r,o){var a=o(46);t.exports=function Rotate(t,r,o,h,d){return a(t,"rotation",r,o,h,d)}},function(t,r,o){var a=o(182),h=o(50);t.exports=function RotateAround(t,r,o){for(var d=r.x,T=r.y,S=0;S<t.length;S++){var A=t[S];a(A,d,T,o,Math.max(1,h(A.x,A.y,d,T)))}return t}},function(t,r,o){var a=o(182);t.exports=function RotateAroundDistance(t,r,o,h){var d=r.x,T=r.y;if(0===h)return t;for(var S=0;S<t.length;S++)a(t[S],d,T,o,h);return t}},function(t,r,o){var a=o(46);t.exports=function ScaleX(t,r,o,h,d){return a(t,"scaleX",r,o,h,d)}},function(t,r,o){var a=o(46);t.exports=function ScaleXY(t,r,o,h,d,T,S){return null==o&&(o=r),a(t,"scaleX",r,h,T,S),a(t,"scaleY",o,d,T,S)}},function(t,r,o){var a=o(46);t.exports=function ScaleY(t,r,o,h,d){return a(t,"scaleY",r,o,h,d)}},function(t,r,o){var a=o(27);t.exports=function SetAlpha(t,r,o,h,d){return a(t,"alpha",r,o,h,d)}},function(t,r,o){var a=o(27);t.exports=function SetBlendMode(t,r,o,h){return a(t,"blendMode",r,0,o,h)}},function(t,r,o){var a=o(27);t.exports=function SetDepth(t,r,o,h,d){return a(t,"depth",r,o,h,d)}},function(t,r){t.exports=function SetHitArea(t,r,o){for(var a=0;a<t.length;a++)t[a].setInteractive(r,o);return t}},function(t,r,o){var a=o(27);t.exports=function SetOrigin(t,r,o,h,d,T,S){return null==o&&(o=r),a(t,"originX",r,h,T,S),a(t,"originY",o,d,T,S),t.forEach((function(t){t.updateDisplayOrigin()})),t}},function(t,r,o){var a=o(27);t.exports=function SetRotation(t,r,o,h,d){return a(t,"rotation",r,o,h,d)}},function(t,r,o){var a=o(27);t.exports=function SetScale(t,r,o,h,d,T,S){return null==o&&(o=r),a(t,"scaleX",r,h,T,S),a(t,"scaleY",o,d,T,S)}},function(t,r,o){var a=o(27);t.exports=function SetScaleX(t,r,o,h,d){return a(t,"scaleX",r,o,h,d)}},function(t,r,o){var a=o(27);t.exports=function SetScaleY(t,r,o,h,d){return a(t,"scaleY",r,o,h,d)}},function(t,r,o){var a=o(27);t.exports=function SetScrollFactor(t,r,o,h,d,T,S){return null==o&&(o=r),a(t,"scrollFactorX",r,h,T,S),a(t,"scrollFactorY",o,d,T,S)}},function(t,r,o){var a=o(27);t.exports=function SetScrollFactorX(t,r,o,h,d){return a(t,"scrollFactorX",r,o,h,d)}},function(t,r,o){var a=o(27);t.exports=function SetScrollFactorY(t,r,o,h,d){return a(t,"scrollFactorY",r,o,h,d)}},function(t,r){t.exports=function SetTint(t,r,o,a,h){for(var d=0;d<t.length;d++)t[d].setTint(r,o,a,h);return t}},function(t,r,o){var a=o(27);t.exports=function SetVisible(t,r,o,h){return a(t,"visible",r,0,o,h)}},function(t,r,o){var a=o(27);t.exports=function SetX(t,r,o,h,d){return a(t,"x",r,o,h,d)}},function(t,r,o){var a=o(27);t.exports=function SetXY(t,r,o,h,d,T,S){return null==o&&(o=r),a(t,"x",r,h,T,S),a(t,"y",o,d,T,S)}},function(t,r,o){var a=o(27);t.exports=function SetY(t,r,o,h,d){return a(t,"y",r,o,h,d)}},function(t,r,o){var a=o(3);t.exports=function ShiftPosition(t,r,o,h,d){var T,S,A,P,O,D;if(void 0===h&&(h=0),void 0===d&&(d=new a),t.length>1)if(0===h){var L=t.length-1;for(T=t[L].x,S=t[L].y,A=L-1;A>=0;A--)P=(D=t[A]).x,O=D.y,D.x=T,D.y=S,T=P,S=O;t[L].x=r,t[L].y=o}else{for(T=t[0].x,S=t[0].y,A=1;A<t.length;A++)P=(D=t[A]).x,O=D.y,D.x=T,D.y=S,T=P,S=O;t[0].x=r,t[0].y=o}else T=t[0].x,S=t[0].y,t[0].x=r,t[0].y=o;return d.x=T,d.y=S,d}},function(t,r,o){var a=o(131);t.exports=function Shuffle(t){return a(t)}},function(t,r,o){var a=o(183);t.exports=function SmootherStep(t,r,o,h,d){void 0===d&&(d=!1);var T,S=Math.abs(h-o)/t.length;if(d)for(T=0;T<t.length;T++)t[T][r]+=a(T*S,o,h);else for(T=0;T<t.length;T++)t[T][r]=a(T*S,o,h);return t}},function(t,r,o){var a=o(184);t.exports=function SmoothStep(t,r,o,h,d){void 0===d&&(d=!1);var T,S=Math.abs(h-o)/t.length;if(d)for(T=0;T<t.length;T++)t[T][r]+=a(T*S,o,h);else for(T=0;T<t.length;T++)t[T][r]=a(T*S,o,h);return t}},function(t,r){t.exports=function Spread(t,r,o,a,h){void 0===h&&(h=!1);var d,T=Math.abs(a-o)/t.length;if(h)for(d=0;d<t.length;d++)t[d][r]+=d*T+o;else for(d=0;d<t.length;d++)t[d][r]=d*T+o;return t}},function(t,r){t.exports=function ToggleVisible(t){for(var r=0;r<t.length;r++)t[r].visible=!t[r].visible;return t}},function(t,r,o){var a=o(68);t.exports=function WrapInRectangle(t,r,o){void 0===o&&(o=0);for(var h=0;h<t.length;h++){var d=t[h];d.x=a(d.x,r.left-o,r.right+o),d.y=a(d.y,r.top-o,r.bottom+o)}return t}},function(t,r,o){t.exports={Animation:o(185),AnimationFrame:o(319),AnimationManager:o(321),AnimationState:o(164),Events:o(132)}},function(t,r){t.exports="add"},function(t,r){t.exports="animationcomplete"},function(t,r){t.exports="animationcomplete-"},function(t,r){t.exports="animationrepeat"},function(t,r){t.exports="animationrestart"},function(t,r){t.exports="animationstart"},function(t,r){t.exports="animationstop"},function(t,r){t.exports="animationupdate"},function(t,r){t.exports="pauseall"},function(t,r){t.exports="remove"},function(t,r){t.exports="resumeall"},function(t,r,o){t.exports={BaseCache:o(323),CacheManager:o(325),Events:o(324)}},function(t,r){t.exports="add"},function(t,r){t.exports="remove"},function(t,r,o){t.exports={Controls:o(739),Scene2D:o(742)}},function(t,r,o){t.exports={FixedKeyControl:o(740),SmoothedKeyControl:o(741)}},function(t,r,o){var a=o(0),h=o(6),d=new a({initialize:function FixedKeyControl(t){this.camera=h(t,"camera",null),this.left=h(t,"left",null),this.right=h(t,"right",null),this.up=h(t,"up",null),this.down=h(t,"down",null),this.zoomIn=h(t,"zoomIn",null),this.zoomOut=h(t,"zoomOut",null),this.zoomSpeed=h(t,"zoomSpeed",.01),this.minZoom=h(t,"minZoom",.001),this.maxZoom=h(t,"maxZoom",1e3),this.speedX=0,this.speedY=0;var r=h(t,"speed",null);"number"==typeof r?(this.speedX=r,this.speedY=r):(this.speedX=h(t,"speed.x",0),this.speedY=h(t,"speed.y",0)),this._zoom=0,this.active=null!==this.camera},start:function start(){return this.active=null!==this.camera,this},stop:function stop(){return this.active=!1,this},setCamera:function setCamera(t){return this.camera=t,this},update:function update(t){if(this.active){void 0===t&&(t=1);var r=this.camera;this.up&&this.up.isDown?r.scrollY-=this.speedY*t|0:this.down&&this.down.isDown&&(r.scrollY+=this.speedY*t|0),this.left&&this.left.isDown?r.scrollX-=this.speedX*t|0:this.right&&this.right.isDown&&(r.scrollX+=this.speedX*t|0),this.zoomIn&&this.zoomIn.isDown?(r.zoom-=this.zoomSpeed,r.zoom<this.minZoom&&(r.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(r.zoom+=this.zoomSpeed,r.zoom>this.maxZoom&&(r.zoom=this.maxZoom))}},destroy:function destroy(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});t.exports=d},function(t,r,o){var a=o(0),h=o(6),d=new a({initialize:function SmoothedKeyControl(t){this.camera=h(t,"camera",null),this.left=h(t,"left",null),this.right=h(t,"right",null),this.up=h(t,"up",null),this.down=h(t,"down",null),this.zoomIn=h(t,"zoomIn",null),this.zoomOut=h(t,"zoomOut",null),this.zoomSpeed=h(t,"zoomSpeed",.01),this.minZoom=h(t,"minZoom",.001),this.maxZoom=h(t,"maxZoom",1e3),this.accelX=0,this.accelY=0;var r=h(t,"acceleration",null);"number"==typeof r?(this.accelX=r,this.accelY=r):(this.accelX=h(t,"acceleration.x",0),this.accelY=h(t,"acceleration.y",0)),this.dragX=0,this.dragY=0;var o=h(t,"drag",null);"number"==typeof o?(this.dragX=o,this.dragY=o):(this.dragX=h(t,"drag.x",0),this.dragY=h(t,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var a=h(t,"maxSpeed",null);"number"==typeof a?(this.maxSpeedX=a,this.maxSpeedY=a):(this.maxSpeedX=h(t,"maxSpeed.x",0),this.maxSpeedY=h(t,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=null!==this.camera},start:function start(){return this.active=null!==this.camera,this},stop:function stop(){return this.active=!1,this},setCamera:function setCamera(t){return this.camera=t,this},update:function update(t){if(this.active){void 0===t&&(t=1);var r=this.camera;this._speedX>0?(this._speedX-=this.dragX*t,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*t,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*t,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*t,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,0!==this._speedX&&(r.scrollX-=this._speedX*t|0),0!==this._speedY&&(r.scrollY-=this._speedY*t|0),0!==this._zoom&&(r.zoom+=this._zoom,r.zoom<this.minZoom?r.zoom=this.minZoom:r.zoom>this.maxZoom&&(r.zoom=this.maxZoom))}},destroy:function destroy(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});t.exports=d},function(t,r,o){t.exports={Camera:o(326),BaseCamera:o(133),CameraManager:o(799),Effects:o(333),Events:o(37)}},function(t,r){t.exports="cameradestroy"},function(t,r){t.exports="camerafadeincomplete"},function(t,r){t.exports="camerafadeinstart"},function(t,r){t.exports="camerafadeoutcomplete"},function(t,r){t.exports="camerafadeoutstart"},function(t,r){t.exports="cameraflashcomplete"},function(t,r){t.exports="cameraflashstart"},function(t,r){t.exports="followupdate"},function(t,r){t.exports="camerapancomplete"},function(t,r){t.exports="camerapanstart"},function(t,r){t.exports="postrender"},function(t,r){t.exports="prerender"},function(t,r){t.exports="camerarotatecomplete"},function(t,r){t.exports="camerarotatestart"},function(t,r){t.exports="camerashakecomplete"},function(t,r){t.exports="camerashakestart"},function(t,r){t.exports="camerazoomcomplete"},function(t,r){t.exports="camerazoomstart"},function(t,r,o){var a=o(18),h=o(0),d=o(37),T=new h({initialize:function Fade(t){this.camera=t,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function start(t,r,o,a,h,T,S,A){if(void 0===t&&(t=!0),void 0===r&&(r=1e3),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),void 0===T&&(T=!1),void 0===S&&(S=null),void 0===A&&(A=this.camera.scene),!T&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=r,this.direction=t,this.progress=0,this.red=o,this.green=a,this.blue=h,this.alpha=t?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=S,this._onUpdateScope=A;var P=t?d.FADE_OUT_START:d.FADE_IN_START;return this.camera.emit(P,this.camera,this,r,o,a,h),this.camera},update:function update(t,r){this.isRunning&&(this._elapsed+=r,this.progress=a(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function postRenderCanvas(t){if(!this.isRunning&&!this.isComplete)return!1;var r=this.camera;return t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(r.x,r.y,r.width,r.height),!0},postRenderWebGL:function postRenderWebGL(t,r){if(!this.isRunning&&!this.isComplete)return!1;var o=this.camera,a=this.red/255,h=this.green/255,d=this.blue/255;return t.drawFillRect(o.x,o.y,o.width,o.height,r(d,h,a,1),this.alpha),!0},effectComplete:function effectComplete(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var t=this.direction?d.FADE_OUT_COMPLETE:d.FADE_IN_COMPLETE;this.camera.emit(t,this.camera,this)},reset:function reset(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function destroy(){this.reset(),this.camera=null}});t.exports=T},function(t,r,o){var a=o(18),h=o(0),d=o(37),T=new h({initialize:function Flash(t){this.camera=t,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function start(t,r,o,a,h,T,S){return void 0===t&&(t=250),void 0===r&&(r=255),void 0===o&&(o=255),void 0===a&&(a=255),void 0===h&&(h=!1),void 0===T&&(T=null),void 0===S&&(S=this.camera.scene),!h&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,this.red=r,this.green=o,this.blue=a,this.alpha=1,this._elapsed=0,this._onUpdate=T,this._onUpdateScope=S,this.camera.emit(d.FLASH_START,this.camera,this,t,r,o,a)),this.camera},update:function update(t,r){this.isRunning&&(this._elapsed+=r,this.progress=a(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function postRenderCanvas(t){if(!this.isRunning)return!1;var r=this.camera;return t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(r.x,r.y,r.width,r.height),!0},postRenderWebGL:function postRenderWebGL(t,r){if(!this.isRunning)return!1;var o=this.camera,a=this.red/255,h=this.green/255,d=this.blue/255;return t.drawFillRect(o.x,o.y,o.width,o.height,r(d,h,a,1),this.alpha),!0},effectComplete:function effectComplete(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(d.FLASH_COMPLETE,this.camera,this)},reset:function reset(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function destroy(){this.reset(),this.camera=null}});t.exports=T},function(t,r,o){var a=o(18),h=o(0),d=o(134),T=o(37),S=o(3),A=new h({initialize:function Pan(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=new S,this.current=new S,this.destination=new S,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function start(t,r,o,a,h,S,A){void 0===o&&(o=1e3),void 0===a&&(a=d.Linear),void 0===h&&(h=!1),void 0===S&&(S=null),void 0===A&&(A=this.camera.scene);var P=this.camera;return!h&&this.isRunning||(this.isRunning=!0,this.duration=o,this.progress=0,this.source.set(P.scrollX,P.scrollY),this.destination.set(t,r),P.getScroll(t,r,this.current),"string"==typeof a&&d.hasOwnProperty(a)?this.ease=d[a]:"function"==typeof a&&(this.ease=a),this._elapsed=0,this._onUpdate=S,this._onUpdateScope=A,this.camera.emit(T.PAN_START,this.camera,this,o,t,r)),P},update:function update(t,r){if(this.isRunning){this._elapsed+=r;var o=a(this._elapsed/this.duration,0,1);this.progress=o;var h=this.camera;if(this._elapsed<this.duration){var d=this.ease(o);h.getScroll(this.destination.x,this.destination.y,this.current);var T=this.source.x+(this.current.x-this.source.x)*d,S=this.source.y+(this.current.y-this.source.y)*d;h.setScroll(T,S),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,h,o,T,S)}else h.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,h,o,h.scrollX,h.scrollY),this.effectComplete()}},effectComplete:function effectComplete(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(T.PAN_COMPLETE,this.camera,this)},reset:function reset(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function destroy(){this.reset(),this.camera=null,this.source=null,this.destination=null}});t.exports=A},function(t,r){t.exports=function In(t,r){return void 0===r&&(r=1.70158),t*t*((r+1)*t-r)}},function(t,r){t.exports=function Out(t,r){return void 0===r&&(r=1.70158),--t*t*((r+1)*t+r)+1}},function(t,r){t.exports=function InOut(t,r){void 0===r&&(r=1.70158);var o=1.525*r;return(t*=2)<1?t*t*((o+1)*t-o)*.5:.5*((t-=2)*t*((o+1)*t+o)+2)}},function(t,r){t.exports=function In(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}},function(t,r){t.exports=function Out(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},function(t,r){t.exports=function InOut(t){var r=!1;return t<.5?(t=1-2*t,r=!0):t=2*t-1,t<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,r?.5*(1-t):.5*t+.5}},function(t,r){t.exports=function In(t){return 1-Math.sqrt(1-t*t)}},function(t,r){t.exports=function Out(t){return Math.sqrt(1- --t*t)}},function(t,r){t.exports=function InOut(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},function(t,r){t.exports=function In(t){return t*t*t}},function(t,r){t.exports=function Out(t){return--t*t*t+1}},function(t,r){t.exports=function InOut(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},function(t,r){t.exports=function In(t,r,o){if(void 0===r&&(r=.1),void 0===o&&(o=.1),0===t)return 0;if(1===t)return 1;var a=o/4;return r<1?r=1:a=o*Math.asin(1/r)/(2*Math.PI),-r*Math.pow(2,10*(t-=1))*Math.sin((t-a)*(2*Math.PI)/o)}},function(t,r){t.exports=function Out(t,r,o){if(void 0===r&&(r=.1),void 0===o&&(o=.1),0===t)return 0;if(1===t)return 1;var a=o/4;return r<1?r=1:a=o*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*t)*Math.sin((t-a)*(2*Math.PI)/o)+1}},function(t,r){t.exports=function InOut(t,r,o){if(void 0===r&&(r=.1),void 0===o&&(o=.1),0===t)return 0;if(1===t)return 1;var a=o/4;return r<1?r=1:a=o*Math.asin(1/r)/(2*Math.PI),(t*=2)<1?r*Math.pow(2,10*(t-=1))*Math.sin((t-a)*(2*Math.PI)/o)*-.5:r*Math.pow(2,-10*(t-=1))*Math.sin((t-a)*(2*Math.PI)/o)*.5+1}},function(t,r){t.exports=function In(t){return Math.pow(2,10*(t-1))-.001}},function(t,r){t.exports=function Out(t){return 1-Math.pow(2,-10*t)}},function(t,r){t.exports=function InOut(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}},function(t,r){t.exports=function Linear(t){return t}},function(t,r){t.exports=function In(t){return t*t}},function(t,r){t.exports=function Out(t){return t*(2-t)}},function(t,r){t.exports=function InOut(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},function(t,r){t.exports=function In(t){return t*t*t*t}},function(t,r){t.exports=function Out(t){return 1- --t*t*t*t}},function(t,r){t.exports=function InOut(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},function(t,r){t.exports=function In(t){return t*t*t*t*t}},function(t,r){t.exports=function Out(t){return--t*t*t*t*t+1}},function(t,r){t.exports=function InOut(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},function(t,r){t.exports=function In(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)}},function(t,r){t.exports=function Out(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)}},function(t,r){t.exports=function InOut(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))}},function(t,r){t.exports=function Stepped(t,r){return void 0===r&&(r=1),t<=0?0:t>=1?1:1/r*(1+(r*t|0))}},function(t,r,o){var a=o(18),h=o(0),d=o(37),T=o(3),S=new h({initialize:function Shake(t){this.camera=t,this.isRunning=!1,this.duration=0,this.intensity=new T,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function start(t,r,o,a,h){return void 0===t&&(t=100),void 0===r&&(r=.05),void 0===o&&(o=!1),void 0===a&&(a=null),void 0===h&&(h=this.camera.scene),!o&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,"number"==typeof r?this.intensity.set(r):this.intensity.set(r.x,r.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=a,this._onUpdateScope=h,this.camera.emit(d.SHAKE_START,this.camera,this,t,r)),this.camera},preRender:function preRender(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function update(t,r){if(this.isRunning)if(this._elapsed+=r,this.progress=a(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var o=this.intensity,h=this.camera.width,d=this.camera.height,T=this.camera.zoom;this._offsetX=(Math.random()*o.x*h*2-o.x*h)*T,this._offsetY=(Math.random()*o.y*d*2-o.y*d)*T,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function effectComplete(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(d.SHAKE_COMPLETE,this.camera,this)},reset:function reset(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function destroy(){this.reset(),this.camera=null,this.intensity=null}});t.exports=S},function(t,r,o){var a=o(18),h=o(0),d=o(37),T=o(134),S=new h({initialize:function RotateTo(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function start(t,r,o,a,h,S,A){void 0===o&&(o=1e3),void 0===a&&(a=T.Linear),void 0===h&&(h=!1),void 0===S&&(S=null),void 0===A&&(A=this.camera.scene),void 0===r&&(r=!1),this.shortestPath=r;var P=t;t<0?(P=-1*t,this.clockwise=!1):this.clockwise=!0;var O=360*Math.PI/180;P-=Math.floor(P/O)*O;var D=this.camera;if(!h&&this.isRunning)return D;if(this.isRunning=!0,this.duration=o,this.progress=0,this.source=D.rotation,this.destination=P,"string"==typeof a&&T.hasOwnProperty(a)?this.ease=T[a]:"function"==typeof a&&(this.ease=a),this._elapsed=0,this._onUpdate=S,this._onUpdateScope=A,this.shortestPath){var L=0,I=0;(L=this.destination>this.source?Math.abs(this.destination-this.source):Math.abs(this.destination+O)-this.source)<(I=this.source>this.destination?Math.abs(this.source-this.destination):Math.abs(this.source+O)-this.destination)?this.clockwise=!0:L>I&&(this.clockwise=!1)}return this.camera.emit(d.ROTATE_START,this.camera,this,o,P),D},update:function update(t,r){if(this.isRunning){this._elapsed+=r;var o=a(this._elapsed/this.duration,0,1);this.progress=o;var h=this.camera;if(this._elapsed<this.duration){var d=this.ease(o);this.current=h.rotation;var T=0,S=360*Math.PI/180,A=this.destination,P=this.current;!1===this.clockwise&&(A=this.current,P=this.destination),T=A>=P?Math.abs(A-P):Math.abs(A+S)-P;var O=0;O=this.clockwise?h.rotation+T*d:h.rotation-T*d,h.rotation=O,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,h,o,O)}else h.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,h,o,this.destination),this.effectComplete()}},effectComplete:function effectComplete(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(d.ROTATE_COMPLETE,this.camera,this)},reset:function reset(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function destroy(){this.reset(),this.camera=null,this.source=null,this.destination=null}});t.exports=S},function(t,r,o){var a=o(18),h=o(0),d=o(134),T=o(37),S=new h({initialize:function Zoom(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function start(t,r,o,a,h,S){void 0===r&&(r=1e3),void 0===o&&(o=d.Linear),void 0===a&&(a=!1),void 0===h&&(h=null),void 0===S&&(S=this.camera.scene);var A=this.camera;return!a&&this.isRunning||(this.isRunning=!0,this.duration=r,this.progress=0,this.source=A.zoom,this.destination=t,"string"==typeof o&&d.hasOwnProperty(o)?this.ease=d[o]:"function"==typeof o&&(this.ease=o),this._elapsed=0,this._onUpdate=h,this._onUpdateScope=S,this.camera.emit(T.ZOOM_START,this.camera,this,r,t)),A},update:function update(t,r){this.isRunning&&(this._elapsed+=r,this.progress=a(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function effectComplete(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(T.ZOOM_COMPLETE,this.camera,this)},reset:function reset(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function destroy(){this.reset(),this.camera=null}});t.exports=S},function(t,r,o){var a=o(326),h=o(0),d=o(2),T=o(24),S=o(57),A=o(104),P=o(20),O=new h({initialize:function CameraManager(t){this.scene=t,this.systems=t.sys,this.roundPixels=t.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,t.sys.events.once(P.BOOT,this.boot,this),t.sys.events.on(P.START,this.start,this)},boot:function boot(){var t=this.systems;t.settings.cameras?this.fromJSON(t.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new a(0,0,t.scale.width,t.scale.height).setScene(this.scene),t.game.scale.on(A.RESIZE,this.onResize,this),this.systems.events.once(P.DESTROY,this.destroy,this)},start:function start(){if(!this.main){var t=this.systems;t.settings.cameras?this.fromJSON(t.settings.cameras):this.add(),this.main=this.cameras[0]}var r=this.systems.events;r.on(P.UPDATE,this.update,this),r.once(P.SHUTDOWN,this.shutdown,this)},add:function add(t,r,o,h,d,T){void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=this.scene.sys.scale.width),void 0===h&&(h=this.scene.sys.scale.height),void 0===d&&(d=!1),void 0===T&&(T="");var S=new a(t,r,o,h);return S.setName(T),S.setScene(this.scene),S.setRoundPixels(this.roundPixels),S.id=this.getNextID(),this.cameras.push(S),d&&(this.main=S),S},addExisting:function addExisting(t,r){return void 0===r&&(r=!1),-1===this.cameras.indexOf(t)?(t.id=this.getNextID(),t.setRoundPixels(this.roundPixels),this.cameras.push(t),r&&(this.main=t),t):null},getNextID:function getNextID(){for(var t=this.cameras,r=1,o=0;o<32;o++){for(var a=!1,h=0;h<t.length;h++){var d=t[h];d&&d.id===r&&(a=!0)}if(!a)return r;r<<=1}return 0},getTotal:function getTotal(t){void 0===t&&(t=!1);for(var r=0,o=this.cameras,a=0;a<o.length;a++){var h=o[a];(!t||t&&h.visible)&&r++}return r},fromJSON:function fromJSON(t){Array.isArray(t)||(t=[t]);for(var r=this.scene.sys.scale.width,o=this.scene.sys.scale.height,a=0;a<t.length;a++){var h=t[a],T=d(h,"x",0),S=d(h,"y",0),A=d(h,"width",r),P=d(h,"height",o),O=this.add(T,S,A,P);O.name=d(h,"name",""),O.zoom=d(h,"zoom",1),O.rotation=d(h,"rotation",0),O.scrollX=d(h,"scrollX",0),O.scrollY=d(h,"scrollY",0),O.roundPixels=d(h,"roundPixels",!1),O.visible=d(h,"visible",!0);var D=d(h,"backgroundColor",!1);D&&O.setBackgroundColor(D);var L=d(h,"bounds",null);if(L){var I=d(L,"x",0),B=d(L,"y",0),N=d(L,"width",r),G=d(L,"height",o);O.setBounds(I,B,N,G)}}return this},getCamera:function getCamera(t){for(var r=this.cameras,o=0;o<r.length;o++)if(r[o].name===t)return r[o];return null},getCamerasBelowPointer:function getCamerasBelowPointer(t){for(var r=this.cameras,o=t.x,a=t.y,h=[],d=0;d<r.length;d++){var T=r[d];T.visible&&T.inputEnabled&&S(T,o,a)&&h.unshift(T)}return h},remove:function remove(t,r){void 0===r&&(r=!0),Array.isArray(t)||(t=[t]);for(var o=0,a=this.cameras,h=0;h<t.length;h++){var d=a.indexOf(t[h]);-1!==d&&(r?a[d].destroy():a[d].renderList=[],a.splice(d,1),o++)}return!this.main&&a[0]&&(this.main=a[0]),o},render:function render(t,r){for(var o=this.scene,a=this.cameras,h=0;h<this.cameras.length;h++){var d=a[h];if(d.visible&&d.alpha>0){d.preRender();var T=this.getVisibleChildren(r.getChildren(),d);t.render(o,T,d)}}},getVisibleChildren:function getVisibleChildren(t,r){for(var o=[],a=0;a<t.length;a++){var h=t[a];h.willRender(r)&&o.push(h)}return o},resetAll:function resetAll(){for(var t=0;t<this.cameras.length;t++)this.cameras[t].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function update(t,r){for(var o=0;o<this.cameras.length;o++)this.cameras[o].update(t,r)},onResize:function onResize(t,r,o,a,h){for(var d=0;d<this.cameras.length;d++){var T=this.cameras[d];0===T._x&&0===T._y&&T._width===a&&T._height===h&&T.setSize(r.width,r.height)}},resize:function resize(t,r){for(var o=0;o<this.cameras.length;o++)this.cameras[o].setSize(t,r)},shutdown:function shutdown(){this.main=void 0;for(var t=0;t<this.cameras.length;t++)this.cameras[t].destroy();this.cameras=[];var r=this.systems.events;r.off(P.UPDATE,this.update,this),r.off(P.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(P.START,this.start,this),this.scene=null,this.systems=null}});T.register("CameraManager",O,"cameras"),t.exports=O},function(t,r){t.exports="enterfullscreen"},function(t,r){t.exports="fullscreenfailed"},function(t,r){t.exports="fullscreenunsupported"},function(t,r){t.exports="leavefullscreen"},function(t,r){t.exports="orientationchange"},function(t,r){t.exports="resize"},function(t,r,o){t.exports={Config:o(346),CreateRenderer:o(366),DebugHeader:o(384),Events:o(22),TimeStep:o(385),VisibilityHandler:o(387)}},function(t,r){var o,a,h=t.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(t){if(o===setTimeout)return setTimeout(t,0);if((o===defaultSetTimout||!o)&&setTimeout)return o=setTimeout,setTimeout(t,0);try{return o(t,0)}catch(r){try{return o.call(null,t,0)}catch(r){return o.call(this,t,0)}}}!function(){try{o="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(t){o=defaultSetTimout}try{a="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(t){a=defaultClearTimeout}}();var d,T=[],S=!1,A=-1;function cleanUpNextTick(){S&&d&&(S=!1,d.length?T=d.concat(T):A=-1,T.length&&drainQueue())}function drainQueue(){if(!S){var t=runTimeout(cleanUpNextTick);S=!0;for(var r=T.length;r;){for(d=T,T=[];++A<r;)d&&d[A].run();A=-1,r=T.length}d=null,S=!1,function runClearTimeout(t){if(a===clearTimeout)return clearTimeout(t);if((a===defaultClearTimeout||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(t);try{return a(t)}catch(r){try{return a.call(null,t)}catch(r){return a.call(this,t)}}}(t)}}function Item(t,r){this.fun=t,this.array=r}function noop(){}h.nextTick=function(t){var r=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)r[o-1]=arguments[o];T.push(new Item(t,r)),1!==T.length||S||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=noop,h.addListener=noop,h.once=noop,h.off=noop,h.removeListener=noop,h.removeAllListeners=noop,h.emit=noop,h.prependListener=noop,h.prependOnceListener=noop,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,r,o){var a=o(136),h={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};t.exports=function init(){return"function"==typeof importScripts||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(h.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(h.mspointer=!0),navigator.getGamepads&&(h.gamepads=!0),"onwheel"in window||a.ie&&"WheelEvent"in window?h.wheelEvent="wheel":"onmousewheel"in window?h.wheelEvent="mousewheel":a.firefox&&"MouseScrollEvent"in window&&(h.wheelEvent="DOMMouseScroll")),h}()},function(t,r,o){var a=o(136),h={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};t.exports=function init(){if("function"==typeof importScripts)return h;h.audioData=!!window.Audio,h.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var t=document.createElement("audio"),r=!!t.canPlayType;try{if(r&&(t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(h.ogg=!0),(t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||t.canPlayType("audio/opus;").replace(/^no$/,""))&&(h.opus=!0),t.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(h.mp3=!0),t.canPlayType("audio/wav").replace(/^no$/,"")&&(h.wav=!0),(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;").replace(/^no$/,""))&&(h.m4a=!0),t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(h.webm=!0),""!==t.canPlayType('audio/mp4;codecs="ec-3"')))if(a.edge)h.dolby=!0;else if(a.safari&&a.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var o=parseInt(RegExp.$1,10),d=parseInt(RegExp.$2,10);(10===o&&d>=11||o>10)&&(h.dolby=!0)}}catch(T){}return h}()},function(t,r){var o={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};t.exports=function init(){if("function"==typeof importScripts)return o;var t=document.createElement("video"),r=!!t.canPlayType;try{r&&(t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(o.ogg=!0),t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(o.h264=!0,o.mp4=!0),t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(o.webm=!0),t.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(o.vp9=!0),t.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(o.hls=!0))}catch(a){}return o}()},function(t,r){var o={available:!1,cancel:"",keyboard:!1,request:""};t.exports=function init(){if("function"==typeof importScripts)return o;var t,r="Fullscreen",a="FullScreen",h=["request"+r,"request"+a,"webkitRequest"+r,"webkitRequest"+a,"msRequest"+r,"msRequest"+a,"mozRequest"+a,"mozRequest"+r];for(t=0;t<h.length;t++)if(document.documentElement[h[t]]){o.available=!0,o.request=h[t];break}var d=["cancel"+a,"exit"+r,"webkitCancel"+a,"webkitExit"+r,"msCancel"+a,"msExit"+r,"mozCancel"+a,"mozExit"+r];if(o.available)for(t=0;t<d.length;t++)if(document[d[t]]){o.cancel=d[t];break}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(o.keyboard=!0),Object.defineProperty(o,"active",{get:function get(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),o}()},function(t,r,o){t.exports={Between:o(349),BetweenPoints:o(350),BetweenPointsY:o(813),BetweenY:o(814),CounterClockwise:o(815),Normalize:o(351),Random:o(816),RandomDegrees:o(817),Reverse:o(818),RotateTo:o(819),ShortestBetween:o(820),Wrap:o(269),WrapDegrees:o(270)}},function(t,r){t.exports=function BetweenPointsY(t,r){return Math.atan2(r.x-t.x,r.y-t.y)}},function(t,r){t.exports=function BetweenY(t,r,o,a){return Math.atan2(o-t,a-r)}},function(t,r,o){var a=o(14);t.exports=function CounterClockwise(t){return t>Math.PI&&(t-=a.PI2),Math.abs(((t+a.TAU)%a.PI2-a.PI2)%a.PI2)}},function(t,r,o){var a=o(137);t.exports=function Random(){return a(-Math.PI,Math.PI)}},function(t,r,o){var a=o(137);t.exports=function RandomDegrees(){return a(-180,180)}},function(t,r,o){var a=o(351);t.exports=function Reverse(t){return a(t+Math.PI)}},function(t,r,o){var a=o(14);t.exports=function RotateTo(t,r,o){return void 0===o&&(o=.05),t===r||(Math.abs(r-t)<=o||Math.abs(r-t)>=a.PI2-o?t=r:(Math.abs(r-t)>Math.PI&&(r<t?r+=a.PI2:r-=a.PI2),r>t?t+=o:r<t&&(t-=o))),t}},function(t,r){t.exports=function ShortestBetween(t,r){var o=r-t;return 0===o?0:o-360*Math.floor((o- -180)/360)}},function(t,r,o){t.exports={Between:o(50),BetweenPoints:o(352),BetweenPointsSquared:o(822),Chebyshev:o(823),Power:o(824),Snake:o(825),Squared:o(353)}},function(t,r){t.exports=function DistanceBetweenPointsSquared(t,r){var o=t.x-r.x,a=t.y-r.y;return o*o+a*a}},function(t,r){t.exports=function ChebyshevDistance(t,r,o,a){return Math.max(Math.abs(t-o),Math.abs(r-a))}},function(t,r){t.exports=function DistancePower(t,r,o,a,h){return void 0===h&&(h=2),Math.sqrt(Math.pow(o-t,h)+Math.pow(a-r,h))}},function(t,r){t.exports=function SnakeDistance(t,r,o,a){return Math.abs(t-o)+Math.abs(r-a)}},function(t,r,o){t.exports={Back:o(334),Bounce:o(335),Circular:o(336),Cubic:o(337),Elastic:o(338),Expo:o(339),Linear:o(340),Quadratic:o(341),Quartic:o(342),Quintic:o(343),Sine:o(344),Stepped:o(345)}},function(t,r,o){t.exports={Ceil:o(828),Equal:o(124),Floor:o(829),GreaterThan:o(354),LessThan:o(355)}},function(t,r){t.exports=function Ceil(t,r){return void 0===r&&(r=1e-4),Math.ceil(t-r)}},function(t,r){t.exports=function Floor(t,r){return void 0===r&&(r=1e-4),Math.floor(t+r)}},function(t,r,o){t.exports={Bezier:o(831),CatmullRom:o(832),CubicBezier:o(358),Linear:o(833),QuadraticBezier:o(359),SmoothStep:o(360),SmootherStep:o(834)}},function(t,r,o){var a=o(356);t.exports=function BezierInterpolation(t,r){for(var o=0,h=t.length-1,d=0;d<=h;d++)o+=Math.pow(1-r,h-d)*Math.pow(r,d)*t[d]*a(h,d);return o}},function(t,r,o){var a=o(194);t.exports=function CatmullRomInterpolation(t,r){var o=t.length-1,h=o*r,d=Math.floor(h);return t[0]===t[o]?(r<0&&(d=Math.floor(h=o*(1+r))),a(h-d,t[(d-1+o)%o],t[d],t[(d+1)%o],t[(d+2)%o])):r<0?t[0]-(a(-h,t[0],t[0],t[1],t[1])-t[0]):r>1?t[o]-(a(h-o,t[o],t[o],t[o-1],t[o-1])-t[o]):a(h-d,t[d?d-1:0],t[d],t[o<d+1?o:d+1],t[o<d+2?o:d+2])}},function(t,r,o){var a=o(135);t.exports=function LinearInterpolation(t,r){var o=t.length-1,h=o*r,d=Math.floor(h);return r<0?a(t[0],t[1],h):r>1?a(t[o],t[o-1],o-h):a(t[d],t[d+1>o?o:d+1],h-d)}},function(t,r,o){var a=o(183);t.exports=function SmootherStepInterpolation(t,r,o){return r+(o-r)*a(t,0,1)}},function(t,r,o){t.exports={GetNext:o(361),IsSize:o(138),IsValue:o(836)}},function(t,r){t.exports=function IsValuePowerOfTwo(t){return t>0&&0==(t&t-1)}},function(t,r,o){t.exports={Ceil:o(139),Floor:o(76),To:o(838)}},function(t,r){t.exports=function SnapTo(t,r,o,a){return void 0===o&&(o=0),0===r?t:(t-=o,t=r*Math.round(t/r),a?(o+t)/r:o+t)}},function(t,r,o){var a=new(o(0))({initialize:function RandomDataGenerator(t){void 0===t&&(t=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],t&&this.init(t)},rnd:function rnd(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},hash:function hash(t){var r,o=this.n;t=t.toString();for(var a=0;a<t.length;a++)r=.02519603282416938*(o+=t.charCodeAt(a)),r-=o=r>>>0,o=(r*=o)>>>0,o+=4294967296*(r-=o);return this.n=o,2.3283064365386963e-10*(o>>>0)},init:function init(t){"string"==typeof t?this.state(t):this.sow(t)},sow:function sow(t){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,t)for(var r=0;r<t.length&&null!=t[r];r++){var o=t[r];this.s0-=this.hash(o),this.s0+=~~(this.s0<0),this.s1-=this.hash(o),this.s1+=~~(this.s1<0),this.s2-=this.hash(o),this.s2+=~~(this.s2<0)}},integer:function integer(){return 4294967296*this.rnd()},frac:function frac(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function real(){return this.integer()+this.frac()},integerInRange:function integerInRange(t,r){return Math.floor(this.realInRange(0,r-t+1)+t)},between:function between(t,r){return Math.floor(this.realInRange(0,r-t+1)+t)},realInRange:function realInRange(t,r){return this.frac()*(r-t)+t},normal:function normal(){return 1-2*this.frac()},uuid:function uuid(){var t="",r="";for(r=t="";t++<36;r+=~t%5|3*t&4?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return r},pick:function pick(t){return t[this.integerInRange(0,t.length-1)]},sign:function sign(){return this.pick(this.signs)},weightedPick:function weightedPick(t){return t[~~(Math.pow(this.frac(),2)*(t.length-1)+.5)]},timestamp:function timestamp(t,r){return this.realInRange(t||9466848e5,r||1577862e6)},angle:function angle(){return this.integerInRange(-180,180)},rotation:function rotation(){return this.realInRange(-3.1415926,3.1415926)},state:function state(t){return"string"==typeof t&&t.match(/^!rnd/)&&(t=t.split(","),this.c=parseFloat(t[1]),this.s0=parseFloat(t[2]),this.s1=parseFloat(t[3]),this.s2=parseFloat(t[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function shuffle(t){for(var r=t.length-1;r>0;r--){var o=Math.floor(this.frac()*(r+1)),a=t[o];t[o]=t[r],t[r]=a}return t}});t.exports=a},function(t,r){t.exports=function Average(t){for(var r=0,o=0;o<t.length;o++)r+=+t[o];return r/t.length}},function(t,r){t.exports=function CeilTo(t,r,o){void 0===r&&(r=0),void 0===o&&(o=10);var a=Math.pow(o,-r);return Math.ceil(t*a)/a}},function(t,r){t.exports=function Difference(t,r){return Math.abs(t-r)}},function(t,r,o){var a=o(18),h=o(0),d=o(69),T=o(1),S=new d,A=new h({initialize:function Euler(t,r,o,a){void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=Euler.DefaultOrder),this._x=t,this._y=r,this._z=o,this._order=a,this.onChangeCallback=T},x:{get:function get(){return this._x},set:function set(t){this._x=t,this.onChangeCallback(this)}},y:{get:function get(){return this._y},set:function set(t){this._y=t,this.onChangeCallback(this)}},z:{get:function get(){return this._z},set:function set(t){this._z=t,this.onChangeCallback(this)}},order:{get:function get(){return this._order},set:function set(t){this._order=t,this.onChangeCallback(this)}},set:function set(t,r,o,a){return void 0===a&&(a=this._order),this._x=t,this._y=r,this._z=o,this._order=a,this.onChangeCallback(this),this},copy:function copy(t){return this.set(t.x,t.y,t.z,t.order)},setFromQuaternion:function setFromQuaternion(t,r,o){return void 0===r&&(r=this._order),void 0===o&&(o=!1),S.fromQuat(t),this.setFromRotationMatrix(S,r,o)},setFromRotationMatrix:function setFromRotationMatrix(t,r,o){void 0===r&&(r=this._order),void 0===o&&(o=!1);var h=t.val,d=h[0],T=h[4],S=h[8],A=h[1],P=h[5],O=h[9],D=h[2],L=h[6],I=h[10],B=0,N=0,G=0,Y=.99999;switch(r){case"XYZ":N=Math.asin(a(S,-1,1)),Math.abs(S)<Y?(B=Math.atan2(-O,I),G=Math.atan2(-T,d)):B=Math.atan2(L,P);break;case"YXZ":B=Math.asin(-a(O,-1,1)),Math.abs(O)<Y?(N=Math.atan2(S,I),G=Math.atan2(A,P)):N=Math.atan2(-D,d);break;case"ZXY":B=Math.asin(a(L,-1,1)),Math.abs(L)<Y?(N=Math.atan2(-D,I),G=Math.atan2(-T,P)):G=Math.atan2(A,d);break;case"ZYX":N=Math.asin(-a(D,-1,1)),Math.abs(D)<Y?(B=Math.atan2(L,I),G=Math.atan2(A,d)):G=Math.atan2(-T,P);break;case"YZX":G=Math.asin(a(A,-1,1)),Math.abs(A)<Y?(B=Math.atan2(-O,P),N=Math.atan2(-D,d)):N=Math.atan2(S,I);break;case"XZY":G=Math.asin(-a(T,-1,1)),Math.abs(T)<Y?(B=Math.atan2(L,P),N=Math.atan2(S,d)):B=Math.atan2(-O,I)}return this._x=B,this._y=N,this._z=G,this._order=r,o&&this.onChangeCallback(this),this}});A.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],A.DefaultOrder="XYZ",t.exports=A},function(t,r){t.exports=function FloorTo(t,r,o){void 0===r&&(r=0),void 0===o&&(o=10);var a=Math.pow(o,-r);return Math.floor(t*a)/a}},function(t,r){t.exports=function GetSpeed(t,r){return t/r/1e3}},function(t,r){t.exports=function IsEven(t){return t==parseFloat(t)?!(t%2):void 0}},function(t,r){t.exports=function IsEvenStrict(t){return t===parseFloat(t)?!(t%2):void 0}},function(t,r){t.exports=function MaxAdd(t,r,o){return Math.min(t+r,o)}},function(t,r){t.exports=function Median(t){var r=t.length;if(0===r)return 0;t.sort((function(t,r){return t-r}));var o=Math.floor(r/2);return r%2==0?(t[o]+t[o-1])/2:t[o]}},function(t,r){t.exports=function MinSub(t,r,o){return Math.max(t-r,o)}},function(t,r){t.exports=function Percent(t,r,o,a){void 0===o&&(o=r+1);var h=(t-r)/(o-r);return h>1?void 0!==a?(h=(a-t)/(a-o))<0&&(h=0):h=1:h<0&&(h=0),h}},function(t,r){t.exports=function RandomXY(t,r){void 0===r&&(r=1);var o=2*Math.random()*Math.PI;return t.x=Math.cos(o)*r,t.y=Math.sin(o)*r,t}},function(t,r){t.exports=function RandomXYZ(t,r){void 0===r&&(r=1);var o=2*Math.random()*Math.PI,a=2*Math.random()-1,h=Math.sqrt(1-a*a)*r;return t.x=Math.cos(o)*h,t.y=Math.sin(o)*h,t.z=a*r,t}},function(t,r){t.exports=function RandomXYZW(t,r){return void 0===r&&(r=1),t.x=(2*Math.random()-1)*r,t.y=(2*Math.random()-1)*r,t.z=(2*Math.random()-1)*r,t.w=(2*Math.random()-1)*r,t}},function(t,r){t.exports=function RotateTo(t,r,o,a,h){return t.x=r+h*Math.cos(a),t.y=o+h*Math.sin(a),t}},function(t,r){t.exports=function RoundTo(t,r,o){void 0===r&&(r=0),void 0===o&&(o=10);var a=Math.pow(o,-r);return Math.round(t*a)/a}},function(t,r){t.exports=function SinCosTableGenerator(t,r,o,a){void 0===r&&(r=1),void 0===o&&(o=1),void 0===a&&(a=1),a*=Math.PI/t;for(var h=[],d=[],T=0;T<t;T++)r+=(o-=r*a)*a,h[T]=o,d[T]=r;return{sin:d,cos:h,length:t}}},function(t,r,o){var a=o(3);t.exports=function ToXY(t,r,o,h){void 0===h&&(h=new a);var d=0,T=0;return t>0&&t<=r*o&&(d=t>r-1?t-(T=Math.floor(t/r))*r:t),h.set(d,T)}},function(t,r){t.exports=function Within(t,r,o){return Math.abs(t-r)<=o}},function(t,r,o){var a=o(39),h=o(69),d=o(365),T=new h,S=new d,A=new a;t.exports=function RotateVec3(t,r,o){return S.setAxisAngle(r,o),T.fromRotationTranslation(S,A.set(0,0,0)),t.transformMat4(T)}},function(t,r){t.exports="addtexture"},function(t,r){t.exports="onerror"},function(t,r){t.exports="onload"},function(t,r){t.exports="ready"},function(t,r){t.exports="removetexture"},function(t,r){t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join("\n")},function(t,r){t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join("\n")},function(t,r){t.exports="pipelineafterflush"},function(t,r){t.exports="pipelinebeforeflush"},function(t,r){t.exports="pipelinebind"},function(t,r){t.exports="pipelineboot"},function(t,r){t.exports="pipelinedestroy"},function(t,r){t.exports="pipelinerebind"},function(t,r){t.exports="pipelineresize"},function(t,r){t.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join("\n")},function(t,r){t.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join("\n")},function(t,r){t.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join("\n")},function(t,r){t.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join("\n")},function(t,r){t.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join("\n")},function(t,r){t.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join("\n")},function(t,r){t.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join("\n")},function(t,r){t.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join("\n")},function(t,r){t.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join("\n")},function(t,r){t.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join("\n")},function(t,r){t.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join("\n")},function(t,r){t.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join("\n")},function(t,r){t.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join("\n")},function(t,r,o){t.exports={GenerateTexture:o(388),Palettes:o(889)}},function(t,r,o){t.exports={ARNE16:o(389),C64:o(890),CGA:o(891),JMP:o(892),MSX:o(893)}},function(t,r){t.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(t,r){t.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(t,r){t.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(t,r){t.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(t,r,o){t.exports={Path:o(895),MoveTo:o(393),CubicBezier:o(390),Curve:o(94),Ellipse:o(391),Line:o(392),QuadraticBezier:o(394),Spline:o(395)}},function(t,r,o){var a=o(0),h=o(390),d=o(391),T=o(5),S=o(392),A=o(393),P=o(394),O=o(10),D=o(395),L=o(3),I=o(14),B=new a({initialize:function Path(t,r){void 0===t&&(t=0),void 0===r&&(r=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new L,this._tmpVec2A=new L,this._tmpVec2B=new L,"object"===_typeof(t)?this.fromJSON(t):this.startPoint.set(t,r)},add:function add(t){return this.curves.push(t),this},circleTo:function circleTo(t,r,o){return void 0===r&&(r=!1),this.ellipseTo(t,t,0,360,r,o)},closePath:function closePath(){var t=this.curves[0].getPoint(0),r=this.curves[this.curves.length-1].getPoint(1);return t.equals(r)||this.curves.push(new S(r,t)),this},cubicBezierTo:function cubicBezierTo(t,r,o,a,d,T){var S,A,P,O=this.getEndPoint();return t instanceof L?(S=t,A=r,P=o):(S=new L(o,a),A=new L(d,T),P=new L(t,r)),this.add(new h(O,S,A,P))},quadraticBezierTo:function quadraticBezierTo(t,r,o,a){var h,d,T=this.getEndPoint();return t instanceof L?(h=t,d=r):(h=new L(o,a),d=new L(t,r)),this.add(new P(T,h,d))},draw:function draw(t,r){for(var o=0;o<this.curves.length;o++){var a=this.curves[o];a.active&&a.draw(t,r)}return t},ellipseTo:function ellipseTo(t,r,o,a,h,T){var S=new d(0,0,t,r,o,a,h,T),A=this.getEndPoint(this._tmpVec2A),P=S.getStartPoint(this._tmpVec2B);return A.subtract(P),S.x=A.x,S.y=A.y,this.add(S)},fromJSON:function fromJSON(t){this.curves=[],this.cacheLengths=[],this.startPoint.set(t.x,t.y),this.autoClose=t.autoClose;for(var r=0;r<t.curves.length;r++){var o=t.curves[r];switch(o.type){case"LineCurve":this.add(S.fromJSON(o));break;case"EllipseCurve":this.add(d.fromJSON(o));break;case"SplineCurve":this.add(D.fromJSON(o));break;case"CubicBezierCurve":this.add(h.fromJSON(o));break;case"QuadraticBezierCurve":this.add(P.fromJSON(o))}}return this},getBounds:function getBounds(t,r){void 0===t&&(t=new O),void 0===r&&(r=16),t.x=Number.MAX_VALUE,t.y=Number.MAX_VALUE;for(var o=new O,a=I.MIN_SAFE_INTEGER,h=I.MIN_SAFE_INTEGER,d=0;d<this.curves.length;d++){var T=this.curves[d];T.active&&(T.getBounds(o,r),t.x=Math.min(t.x,o.x),t.y=Math.min(t.y,o.y),a=Math.max(a,o.right),h=Math.max(h,o.bottom))}return t.right=a,t.bottom=h,t},getCurveLengths:function getCurveLengths(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],r=0,o=0;o<this.curves.length;o++)r+=this.curves[o].getLength(),t.push(r);return this.cacheLengths=t,t},getEndPoint:function getEndPoint(t){return void 0===t&&(t=new L),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,t):t.copy(this.startPoint),t},getLength:function getLength(){var t=this.getCurveLengths();return t[t.length-1]},getPoint:function getPoint(t,r){void 0===r&&(r=new L);for(var o=t*this.getLength(),a=this.getCurveLengths(),h=0;h<a.length;){if(a[h]>=o){var d=a[h]-o,T=this.curves[h],S=T.getLength(),A=0===S?0:1-d/S;return T.getPointAt(A,r)}h++}return null},getPoints:function getPoints(t){void 0===t&&(t=12);for(var r,o=[],a=0;a<this.curves.length;a++){var h=this.curves[a];if(h.active)for(var d=h.getResolution(t),T=h.getPoints(d),S=0;S<T.length;S++){var A=T[S];r&&r.equals(A)||(o.push(A),r=A)}}return this.autoClose&&o.length>1&&!o[o.length-1].equals(o[0])&&o.push(o[0]),o},getRandomPoint:function getRandomPoint(t){return void 0===t&&(t=new L),this.getPoint(Math.random(),t)},getSpacedPoints:function getSpacedPoints(t){void 0===t&&(t=40);for(var r=[],o=0;o<=t;o++)r.push(this.getPoint(o/t));return this.autoClose&&r.push(r[0]),r},getStartPoint:function getStartPoint(t){return void 0===t&&(t=new L),t.copy(this.startPoint)},getTangent:function getTangent(t,r){void 0===r&&(r=new L);for(var o=t*this.getLength(),a=this.getCurveLengths(),h=0;h<a.length;){if(a[h]>=o){var d=a[h]-o,T=this.curves[h],S=T.getLength(),A=0===S?0:1-d/S;return T.getTangentAt(A,r)}h++}return null},lineTo:function lineTo(t,r){t instanceof L?this._tmpVec2B.copy(t):this._tmpVec2B.set(t,r);var o=this.getEndPoint(this._tmpVec2A);return this.add(new S([o.x,o.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function splineTo(t){return t.unshift(this.getEndPoint()),this.add(new D(t))},moveTo:function moveTo(t,r){return t instanceof L?this.add(new A(t.x,t.y)):this.add(new A(t,r))},toJSON:function toJSON(){for(var t=[],r=0;r<this.curves.length;r++)t.push(this.curves[r].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:t}},updateArcLengths:function updateArcLengths(){this.cacheLengths=[],this.getCurveLengths()},destroy:function destroy(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});T.register("path",(function(t,r){return new B(t,r)})),t.exports=B},function(t,r,o){t.exports={DataManager:o(101),DataManagerPlugin:o(897),Events:o(315)}},function(t,r,o){var a=o(0),h=o(101),d=o(24),T=o(20),S=new a({Extends:h,initialize:function DataManagerPlugin(t){h.call(this,t,t.sys.events),this.scene=t,this.systems=t.sys,t.sys.events.once(T.BOOT,this.boot,this),t.sys.events.on(T.START,this.start,this)},boot:function boot(){this.events=this.systems.events,this.events.once(T.DESTROY,this.destroy,this)},start:function start(){this.events.once(T.SHUTDOWN,this.shutdown,this)},shutdown:function shutdown(){this.systems.events.off(T.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){h.prototype.destroy.call(this),this.events.off(T.START,this.start,this),this.scene=null,this.systems=null}});d.register("DataManagerPlugin",S,"data"),t.exports=S},function(t,r,o){t.exports={Align:o(899),BaseShader:o(396),Bounds:o(902),Canvas:o(906),Color:o(397),ColorMatrix:o(198),Masks:o(916),RGB:o(200)}},function(t,r,o){var a=o(123),h=o(17),d={In:o(900),To:o(901)};d=h(!1,d,a),t.exports=d},function(t,r,o){t.exports={BottomCenter:o(290),BottomLeft:o(291),BottomRight:o(292),Center:o(293),LeftCenter:o(295),QuickSet:o(289),RightCenter:o(296),TopCenter:o(297),TopLeft:o(298),TopRight:o(299)}},function(t,r,o){t.exports={BottomCenter:o(277),BottomLeft:o(278),BottomRight:o(279),LeftBottom:o(280),LeftCenter:o(281),LeftTop:o(282),QuickSet:o(276),RightBottom:o(283),RightCenter:o(284),RightTop:o(285),TopCenter:o(286),TopLeft:o(287),TopRight:o(288)}},function(t,r,o){t.exports={CenterOn:o(294),GetBottom:o(42),GetBounds:o(903),GetCenterX:o(87),GetCenterY:o(89),GetLeft:o(43),GetOffsetX:o(904),GetOffsetY:o(905),GetRight:o(44),GetTop:o(45),SetBottom:o(55),SetCenterX:o(88),SetCenterY:o(90),SetLeft:o(53),SetRight:o(54),SetTop:o(52)}},function(t,r,o){var a=o(42),h=o(43),d=o(44),T=o(45);t.exports=function GetBounds(t,r){void 0===r&&(r={});var o=h(t),S=T(t);return r.x=o,r.y=S,r.width=d(t)-o,r.height=a(t)-S,r}},function(t,r){t.exports=function GetOffsetX(t){return t.width*t.originX}},function(t,r){t.exports=function GetOffsetY(t){return t.height*t.originY}},function(t,r,o){t.exports={CanvasInterpolation:o(367),CanvasPool:o(31),Smoothing:o(192),TouchAction:o(907),UserSelect:o(908)}},function(t,r){t.exports=function TouchAction(t,r){return void 0===r&&(r="none"),t.style.msTouchAction=r,t.style["ms-touch-action"]=r,t.style["touch-action"]=r,t}},function(t,r){t.exports=function UserSelect(t,r){return void 0===r&&(r="none"),["-webkit-","-khtml-","-moz-","-ms-",""].forEach((function(o){t.style[o+"user-select"]=r})),t.style["-webkit-touch-callout"]=r,t.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",t}},function(t,r,o){var a=o(103);t.exports=function ColorSpectrum(t){void 0===t&&(t=1024);var r,o=[],h=255,d=255,T=0,S=0;for(r=0;r<=h;r++)o.push({r:d,g:r,b:S,color:a(d,r,S)});for(T=255,r=h;r>=0;r--)o.push({r:r,g:T,b:S,color:a(r,T,S)});for(d=0,r=0;r<=h;r++,T--)o.push({r:d,g:T,b:r,color:a(d,T,r)});for(T=0,S=255,r=0;r<=h;r++,S--,d++)o.push({r:d,g:T,b:S,color:a(d,T,S)});if(1024===t)return o;var A=[],P=0,O=1024/t;for(r=0;r<t;r++)A.push(o[Math.floor(P)]),P+=O;return A}},function(t,r){t.exports=function ColorToRGBA(t){var r={r:t>>16&255,g:t>>8&255,b:255&t,a:255};return t>16777215&&(r.a=t>>>24),r}},function(t,r,o){var a=o(38),h=o(399);t.exports=function HSLToColor(t,r,o){var d=o,T=o,S=o;if(0!==r){var A=o<.5?o*(1+r):o+r-o*r,P=2*o-A;d=h(P,A,t+1/3),T=h(P,A,t),S=h(P,A,t-1/3)}return(new a).setGLTo(d,T,S,1)}},function(t,r,o){var a=o(188);t.exports=function HSVColorWheel(t,r){void 0===t&&(t=1),void 0===r&&(r=1);for(var o=[],h=0;h<=359;h++)o.push(a(h/359,t,r));return o}},function(t,r,o){var a=o(135),h=function RGBWithRGB(t,r,o,h,d,T,S,A){void 0===S&&(S=100),void 0===A&&(A=0);var P=A/S;return{r:a(t,h,P),g:a(r,d,P),b:a(o,T,P)}};t.exports={RGBWithRGB:h,ColorWithRGB:function ColorWithRGB(t,r,o,a,d,T){return void 0===d&&(d=100),void 0===T&&(T=0),h(t.r,t.g,t.b,r,o,a,d,T)},ColorWithColor:function ColorWithColor(t,r,o,a){return void 0===o&&(o=100),void 0===a&&(a=0),h(t.r,t.g,t.b,r.r,r.g,r.b,o,a)}}},function(t,r,o){var a=o(195),h=o(38);t.exports=function RandomRGB(t,r){return void 0===t&&(t=0),void 0===r&&(r=255),new h(a(t,r),a(t,r),a(t,r))}},function(t,r,o){var a=o(398);t.exports=function RGBToString(t,r,o,h,d){return void 0===h&&(h=255),void 0===d&&(d="#"),"#"===d?"#"+((1<<24)+(t<<16)+(r<<8)+o).toString(16).slice(1,7):"0x"+a(h)+a(t)+a(r)+a(o)}},function(t,r,o){t.exports={BitmapMask:o(310),GeometryMask:o(311)}},function(t,r,o){var a={AddToDOM:o(142),DOMContentLoaded:o(400),GetInnerHeight:o(401),GetScreenOrientation:o(402),GetTarget:o(407),ParseXML:o(408),RemoveFromDOM:o(202),RequestAnimationFrame:o(386)};t.exports=a},function(t,r,o){t.exports={EventEmitter:o(919)}},function(t,r,o){var a=o(0),h=o(9),d=o(24),T=new a({Extends:h,initialize:function EventEmitter(){h.call(this)},shutdown:function shutdown(){this.removeAllListeners()},destroy:function destroy(){this.removeAllListeners()}});d.register("EventEmitter",T,"events"),t.exports=T},function(t,r,o){var a=o(142),h=o(321),d=o(325),T=o(31),S=o(0),A=o(346),P=o(921),O=o(366),D=o(101),L=o(384),I=o(347),B=o(400),N=o(9),G=o(22),Y=o(409),X=o(24),U=o(414),z=o(415),V=o(417),W=o(106),H=o(422),q=o(385),Z=o(387),K=o(426),J=new S({initialize:function Game(t){this.config=new A(t),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new N,this.anims=new h(this),this.textures=new H(this),this.cache=new d(this),this.registry=new D(this),this.input=new Y(this,this.config),this.scene=new V(this,this.config.sceneConfig),this.device=I,this.scale=new z(this,this.config),this.sound=null,this.sound=K.create(this),this.loop=new q(this,this.config.fps),this.plugins=new U(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,B(this.boot.bind(this))},boot:function boot(){X.hasCore("EventEmitter")?(this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),O(this),P(this),L(this),a(this.canvas,this.config.parent),this.textures.once(W.READY,this.texturesReady,this),this.events.emit(G.BOOT)):console.warn("Aborting. Core Plugins missing.")},texturesReady:function texturesReady(){this.events.emit(G.READY),this.start()},start:function start(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),Z(this);var t=this.events;t.on(G.HIDDEN,this.onHidden,this),t.on(G.VISIBLE,this.onVisible,this),t.on(G.BLUR,this.onBlur,this),t.on(G.FOCUS,this.onFocus,this)},step:function step(t,r){if(this.pendingDestroy)return this.runDestroy();var o=this.events;o.emit(G.PRE_STEP,t,r),o.emit(G.STEP,t,r),this.scene.update(t,r),o.emit(G.POST_STEP,t,r);var a=this.renderer;a.preRender(),o.emit(G.PRE_RENDER,a,t,r),this.scene.render(a),a.postRender(),o.emit(G.POST_RENDER,a,t,r)},headlessStep:function headlessStep(t,r){if(this.pendingDestroy)return this.runDestroy();var o=this.events;o.emit(G.PRE_STEP,t,r),o.emit(G.STEP,t,r),this.scene.update(t,r),o.emit(G.POST_STEP,t,r),o.emit(G.PRE_RENDER),o.emit(G.POST_RENDER)},onHidden:function onHidden(){this.loop.pause(),this.events.emit(G.PAUSE)},onVisible:function onVisible(){this.loop.resume(),this.events.emit(G.RESUME)},onBlur:function onBlur(){this.hasFocus=!1,this.loop.blur()},onFocus:function onFocus(){this.hasFocus=!0,this.loop.focus()},getFrame:function getFrame(){return this.loop.frame},getTime:function getTime(){return this.loop.now},destroy:function destroy(t,r){void 0===r&&(r=!1),this.pendingDestroy=!0,this.removeCanvas=t,this.noReturn=r},runDestroy:function runDestroy(){this.scene.destroy(),this.events.emit(G.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(T.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});t.exports=J},function(t,r,o){var a=o(142);t.exports=function CreateDOMContainer(t){var r=t.config;if(r.parent&&r.domCreateContainer){var o=document.createElement("div");o.style.cssText=["display: block;","width: "+t.scale.width+"px;","height: "+t.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+r.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),t.domContainer=o,a(o,r.parent)}}},function(t,r){t.exports="boot"},function(t,r){t.exports="destroy"},function(t,r){t.exports="dragend"},function(t,r){t.exports="dragenter"},function(t,r){t.exports="drag"},function(t,r){t.exports="dragleave"},function(t,r){t.exports="dragover"},function(t,r){t.exports="dragstart"},function(t,r){t.exports="drop"},function(t,r){t.exports="gameout"},function(t,r){t.exports="gameover"},function(t,r){t.exports="gameobjectdown"},function(t,r){t.exports="dragend"},function(t,r){t.exports="dragenter"},function(t,r){t.exports="drag"},function(t,r){t.exports="dragleave"},function(t,r){t.exports="dragover"},function(t,r){t.exports="dragstart"},function(t,r){t.exports="drop"},function(t,r){t.exports="gameobjectmove"},function(t,r){t.exports="gameobjectout"},function(t,r){t.exports="gameobjectover"},function(t,r){t.exports="pointerdown"},function(t,r){t.exports="pointermove"},function(t,r){t.exports="pointerout"},function(t,r){t.exports="pointerover"},function(t,r){t.exports="pointerup"},function(t,r){t.exports="wheel"},function(t,r){t.exports="gameobjectup"},function(t,r){t.exports="gameobjectwheel"},function(t,r){t.exports="boot"},function(t,r){t.exports="process"},function(t,r){t.exports="update"},function(t,r){t.exports="pointerdown"},function(t,r){t.exports="pointerdownoutside"},function(t,r){t.exports="pointermove"},function(t,r){t.exports="pointerout"},function(t,r){t.exports="pointerover"},function(t,r){t.exports="pointerup"},function(t,r){t.exports="pointerupoutside"},function(t,r){t.exports="wheel"},function(t,r){t.exports="pointerlockchange"},function(t,r){t.exports="preupdate"},function(t,r){t.exports="shutdown"},function(t,r){t.exports="start"},function(t,r){t.exports="update"},function(t,r){t.exports="addfile"},function(t,r){t.exports="complete"},function(t,r){t.exports="filecomplete"},function(t,r){t.exports="filecomplete-"},function(t,r){t.exports="loaderror"},function(t,r){t.exports="load"},function(t,r){t.exports="fileprogress"},function(t,r){t.exports="postprocess"},function(t,r){t.exports="progress"},function(t,r){t.exports="start"},function(t,r,o){t.exports={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"}},function(t,r){t.exports=function AtlasXML(t,r,o){if(o.getElementsByTagName("TextureAtlas")){var a=t.source[r];t.add("__BASE",r,0,0,a.width,a.height);for(var h,d=o.getElementsByTagName("SubTexture"),T=0;T<d.length;T++){var S=d[T].attributes,A=S.name.value,P=parseInt(S.x.value,10),O=parseInt(S.y.value,10),D=parseInt(S.width.value,10),L=parseInt(S.height.value,10);if(h=t.add(A,r,P,O,D,L),S.frameX){var I=Math.abs(parseInt(S.frameX.value,10)),B=Math.abs(parseInt(S.frameY.value,10)),N=parseInt(S.frameWidth.value,10),G=parseInt(S.frameHeight.value,10);h.setTrim(D,L,I,B,N,G)}}return t}console.warn("Invalid Texture Atlas XML given")}},function(t,r){t.exports=function Canvas(t,r){var o=t.source[r];return t.add("__BASE",r,0,0,o.width,o.height),t}},function(t,r){t.exports=function Image(t,r){var o=t.source[r];return t.add("__BASE",r,0,0,o.width,o.height),t}},function(t,r,o){var a=o(77);t.exports=function JSONArray(t,r,o){if(o.frames||o.textures){var h=t.source[r];t.add("__BASE",r,0,0,h.width,h.height);for(var d,T=Array.isArray(o.textures)?o.textures[r].frames:o.frames,S=0;S<T.length;S++){var A=T[S];d=t.add(A.filename,r,A.frame.x,A.frame.y,A.frame.w,A.frame.h),A.trimmed&&d.setTrim(A.sourceSize.w,A.sourceSize.h,A.spriteSourceSize.x,A.spriteSourceSize.y,A.spriteSourceSize.w,A.spriteSourceSize.h),A.rotated&&(d.rotated=!0,d.updateUVsInverted());var P=A.anchor||A.pivot;P&&(d.customPivot=!0,d.pivotX=P.x,d.pivotY=P.y),d.customData=a(A)}for(var O in o)"frames"!==O&&(Array.isArray(o[O])?t.customData[O]=o[O].slice(0):t.customData[O]=o[O]);return t}console.warn("Invalid Texture Atlas JSON Array")}},function(t,r,o){var a=o(77);t.exports=function JSONHash(t,r,o){if(o.frames){var h=t.source[r];t.add("__BASE",r,0,0,h.width,h.height);var d,T=o.frames;for(var S in T)if(T.hasOwnProperty(S)){var A=T[S];d=t.add(S,r,A.frame.x,A.frame.y,A.frame.w,A.frame.h),A.trimmed&&d.setTrim(A.sourceSize.w,A.sourceSize.h,A.spriteSourceSize.x,A.spriteSourceSize.y,A.spriteSourceSize.w,A.spriteSourceSize.h),A.rotated&&(d.rotated=!0,d.updateUVsInverted());var P=A.anchor||A.pivot;P&&(d.customPivot=!0,d.pivotX=P.x,d.pivotY=P.y),d.customData=a(A)}for(var O in o)"frames"!==O&&(Array.isArray(o[O])?t.customData[O]=o[O].slice(0):t.customData[O]=o[O]);return t}console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object")}},function(t,r,o){var a=o(2);t.exports=function SpriteSheet(t,r,o,h,d,T,S){var A=a(S,"frameWidth",null),P=a(S,"frameHeight",A);if(null===A)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var O=t.source[r];t.add("__BASE",r,0,0,O.width,O.height);var D=a(S,"startFrame",0),L=a(S,"endFrame",-1),I=a(S,"margin",0),B=a(S,"spacing",0),N=Math.floor((d-I+B)/(A+B))*Math.floor((T-I+B)/(P+B));0===N&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",t.key),(D>N||D<-N)&&(D=0),D<0&&(D=N+D),-1!==L&&(N=D+(L+1));for(var G=I,Y=I,X=0,U=0,z=0;z<N;z++){X=0,U=0;var V=G+A,W=Y+P;V>d&&(X=V-d),W>T&&(U=W-T),t.add(z,r,o+G,h+Y,A-X,P-U),(G+=A+B)+A>d&&(G=I,Y+=P+B)}return t}},function(t,r,o){var a=o(2);t.exports=function SpriteSheetFromAtlas(t,r,o){var h=a(o,"frameWidth",null),d=a(o,"frameHeight",h);if(!h)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var T=t.source[0];t.add("__BASE",0,0,0,T.width,T.height),a(o,"startFrame",0),a(o,"endFrame",-1);for(var S,A=a(o,"margin",0),P=a(o,"spacing",0),O=r.cutX,D=r.cutY,L=r.cutWidth,I=r.cutHeight,B=r.realWidth,N=r.realHeight,G=Math.floor((B-A+P)/(h+P)),Y=Math.floor((N-A+P)/(d+P)),X=r.x,U=h-X,z=h-(B-L-X),V=r.y,W=d-V,H=d-(N-I-V),q=A,Z=A,K=0,J=r.sourceIndex,Q=0;Q<Y;Q++){for(var $=0===Q,tt=Q===Y-1,et=0;et<G;et++){var it=0===et,nt=et===G-1;if(S=t.add(K,J,O+q,D+Z,h,d),it||$||nt||tt){var rt=it?X:0,st=$?V:0,ot=0,at=0;it&&(ot+=h-U),nt&&(ot+=h-z),$&&(at+=d-W),tt&&(at+=d-H);var ht=h-ot,lt=d-at;S.cutWidth=ht,S.cutHeight=lt,S.setTrim(h,d,rt,st,ht,lt)}q+=P,q+=it?U:nt?z:h,K++}q=A,Z+=P,Z+=$?W:tt?H:d}return t}},function(t,r){var o=0,a=function addFrame(t,r,a,h){var d=o-h.y-h.height;t.add(a,r,h.x,d,h.width,h.height)};t.exports=function UnityYAML(t,r,h){var d=t.source[r];t.add("__BASE",r,0,0,d.width,d.height),o=d.height;for(var T=h.split("\n"),S=/^[ ]*(- )*(\w+)+[: ]+(.*)/,A="",P="",O={x:0,y:0,width:0,height:0},D=0;D<T.length;D++){var L=T[D].match(S);if(L){var I="- "===L[1],B=L[2],N=L[3];if(I&&(P!==A&&(a(t,r,P,O),A=P),O={x:0,y:0,width:0,height:0}),"name"!==B)switch(B){case"x":case"y":case"width":case"height":O[B]=parseInt(N,10)}else P=N}}return P!==A&&a(t,r,P,O),t}},function(t,r){t.exports="complete"},function(t,r){t.exports="decoded"},function(t,r){t.exports="decodedall"},function(t,r){t.exports="destroy"},function(t,r){t.exports="detune"},function(t,r){t.exports="detune"},function(t,r){t.exports="mute"},function(t,r){t.exports="rate"},function(t,r){t.exports="volume"},function(t,r){t.exports="loop"},function(t,r){t.exports="looped"},function(t,r){t.exports="mute"},function(t,r){t.exports="pan"},function(t,r){t.exports="pauseall"},function(t,r){t.exports="pause"},function(t,r){t.exports="play"},function(t,r){t.exports="rate"},function(t,r){t.exports="resumeall"},function(t,r){t.exports="resume"},function(t,r){t.exports="seek"},function(t,r){t.exports="stopall"},function(t,r){t.exports="stop"},function(t,r){t.exports="unlocked"},function(t,r){t.exports="volume"},function(t,r,o){var a={Events:o(75),DisplayList:o(1012),GameObjectCreator:o(16),GameObjectFactory:o(5),UpdateList:o(1040),Components:o(11),GetCalcMatrix:o(19),BuildGameObject:o(28),BuildGameObjectAnimation:o(439),GameObject:o(15),BitmapText:o(148),Blitter:o(213),Bob:o(440),Container:o(214),DOMElement:o(442),DynamicBitmapText:o(215),Extern:o(444),Graphics:o(216),Group:o(113),Image:o(125),Layer:o(219),Particles:o(1074),PathFollower:o(457),RenderTexture:o(221),RetroFont:o(1082),Rope:o(223),Sprite:o(73),Text:o(224),GetTextSize:o(458),MeasureText:o(460),TextStyle:o(459),TileSprite:o(225),Zone:o(129),Video:o(226),Shape:o(34),Arc:o(461),Curve:o(462),Ellipse:o(463),Grid:o(464),IsoBox:o(465),IsoTriangle:o(466),Line:o(467),Polygon:o(468),Rectangle:o(473),Star:o(474),Triangle:o(475),Factories:{Blitter:o(1130),Container:o(1131),DOMElement:o(1132),DynamicBitmapText:o(1133),Extern:o(1134),Graphics:o(1135),Group:o(1136),Image:o(1137),Layer:o(1138),Particles:o(1139),PathFollower:o(1140),RenderTexture:o(1141),Rope:o(1142),Sprite:o(1143),StaticBitmapText:o(1144),Text:o(1145),TileSprite:o(1146),Zone:o(1147),Video:o(1148),Arc:o(1149),Curve:o(1150),Ellipse:o(1151),Grid:o(1152),IsoBox:o(1153),IsoTriangle:o(1154),Line:o(1155),Polygon:o(1156),Rectangle:o(1157),Star:o(1158),Triangle:o(1159)},Creators:{Blitter:o(1160),Container:o(1161),DynamicBitmapText:o(1162),Graphics:o(1163),Group:o(1164),Image:o(1165),Layer:o(1166),Particles:o(1167),RenderTexture:o(1168),Rope:o(1169),Sprite:o(1170),StaticBitmapText:o(1171),Text:o(1172),TileSprite:o(1173),Zone:o(1174),Video:o(1175)}};a.Shader=o(229),a.Mesh=o(230),a.PointLight=o(150),a.Factories.Shader=o(1184),a.Factories.Mesh=o(1185),a.Factories.PointLight=o(1186),a.Creators.Shader=o(1187),a.Creators.Mesh=o(1188),a.Creators.PointLight=o(1189),a.Light=o(481),a.LightsManager=o(482),a.LightsPlugin=o(1190),t.exports=a},function(t,r,o){var a=o(0),h=o(110),d=o(24),T=o(75),S=o(20),A=o(79),P=new a({Extends:h,initialize:function DisplayList(t){h.call(this,t),this.sortChildrenFlag=!1,this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(S.BOOT,this.boot,this),this.events.on(S.START,this.start,this)},boot:function boot(){this.events.once(S.DESTROY,this.destroy,this)},addChildCallback:function addChildCallback(t){t.displayList&&t.displayList!==this&&t.removeFromDisplayList(),t.displayList||(this.queueDepthSort(),t.displayList=this,t.emit(T.ADDED_TO_SCENE,t,this.scene),this.events.emit(S.ADDED_TO_SCENE,t,this.scene))},removeChildCallback:function removeChildCallback(t){this.queueDepthSort(),t.displayList=null,t.emit(T.REMOVED_FROM_SCENE,t,this.scene),this.events.emit(S.REMOVED_FROM_SCENE,t,this.scene)},start:function start(){this.events.once(S.SHUTDOWN,this.shutdown,this)},queueDepthSort:function queueDepthSort(){this.sortChildrenFlag=!0},depthSort:function depthSort(){this.sortChildrenFlag&&(A(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function sortByDepth(t,r){return t._depth-r._depth},getChildren:function getChildren(){return this.list},shutdown:function shutdown(){for(var t=this.list,r=t.length;r--;)t[r].destroy(!0);t.length=0,this.events.off(S.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown(),this.events.off(S.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});d.register("DisplayList",P,"displayList"),t.exports=P},function(t,r,o){t.exports={CheckMatrix:o(209),MatrixToString:o(1014),ReverseColumns:o(1015),ReverseRows:o(1016),Rotate180:o(1017),RotateLeft:o(1018),RotateMatrix:o(147),RotateRight:o(1019),Translate:o(1020),TransposeMatrix:o(435)}},function(t,r,o){var a=o(186),h=o(209);t.exports=function MatrixToString(t){var r="";if(!h(t))return r;for(var o=0;o<t.length;o++){for(var d=0;d<t[o].length;d++){var T=t[o][d].toString();r+="undefined"!==T?a(T,2):"?",d<t[o].length-1&&(r+=" |")}if(o<t.length-1){r+="\n";for(var S=0;S<t[o].length;S++)r+="---",S<t[o].length-1&&(r+="+");r+="\n"}}return r}},function(t,r){t.exports=function ReverseColumns(t){return t.reverse()}},function(t,r){t.exports=function ReverseRows(t){for(var r=0;r<t.length;r++)t[r].reverse();return t}},function(t,r,o){var a=o(147);t.exports=function Rotate180(t){return a(t,180)}},function(t,r,o){var a=o(147);t.exports=function RotateLeft(t){return a(t,90)}},function(t,r,o){var a=o(147);t.exports=function RotateRight(t){return a(t,-90)}},function(t,r,o){var a=o(178),h=o(179);t.exports=function TranslateMatrix(t,r,o){if(void 0===r&&(r=0),void 0===o&&(o=0),0!==o&&(o<0?a(t,Math.abs(o)):h(t,o)),0!==r)for(var d=0;d<t.length;d++){var T=t[d];r<0?a(T,Math.abs(r)):h(T,r)}return t}},function(t,r){t.exports=function Add(t,r,o,a,h){if(void 0===h&&(h=t),o>0){var d=o-t.length;if(d<=0)return null}if(!Array.isArray(r))return-1===t.indexOf(r)?(t.push(r),a&&a.call(h,r),r):null;for(var T=r.length-1;T>=0;)-1!==t.indexOf(r[T])&&r.splice(T,1),T--;if(0===(T=r.length))return null;o>0&&T>d&&(r.splice(d),T=d);for(var S=0;S<T;S++){var A=r[S];t.push(A),a&&a.call(h,A)}return r}},function(t,r){t.exports=function AddAt(t,r,o,a,h,d){if(void 0===o&&(o=0),void 0===d&&(d=t),a>0){var T=a-t.length;if(T<=0)return null}if(!Array.isArray(r))return-1===t.indexOf(r)?(t.splice(o,0,r),h&&h.call(d,r),r):null;for(var S=r.length-1;S>=0;)-1!==t.indexOf(r[S])&&r.pop(),S--;if(0===(S=r.length))return null;a>0&&S>T&&(r.splice(T),S=T);for(var A=S-1;A>=0;A--){var P=r[A];t.splice(o,0,P),h&&h.call(d,P)}return r}},function(t,r){t.exports=function BringToTop(t,r){var o=t.indexOf(r);return-1!==o&&o<t.length&&(t.splice(o,1),t.push(r)),r}},function(t,r,o){var a=o(78);t.exports=function CountAllMatching(t,r,o,h,d){void 0===h&&(h=0),void 0===d&&(d=t.length);var T=0;if(a(t,h,d))for(var S=h;S<d;S++)t[S][r]===o&&T++;return T}},function(t,r){t.exports=function Each(t,r,o){var a,h=[null];for(a=3;a<arguments.length;a++)h.push(arguments[a]);for(a=0;a<t.length;a++)h[0]=t[a],r.apply(o,h);return t}},function(t,r,o){var a=o(78);t.exports=function EachInRange(t,r,o,h,d){if(void 0===h&&(h=0),void 0===d&&(d=t.length),a(t,h,d)){var T,S=[null];for(T=5;T<arguments.length;T++)S.push(arguments[T]);for(T=h;T<d;T++)S[0]=t[T],r.apply(o,S)}return t}},function(t,r){t.exports=function MoveDown(t,r){var o=t.indexOf(r);if(o>0){var a=t[o-1],h=t.indexOf(a);t[o]=a,t[h]=r}return t}},function(t,r){t.exports=function MoveTo(t,r,o){var a=t.indexOf(r);if(-1===a||o<0||o>=t.length)throw new Error("Supplied index out of bounds");return a!==o&&(t.splice(a,1),t.splice(o,0,r)),r}},function(t,r){t.exports=function MoveUp(t,r){var o=t.indexOf(r);if(-1!==o&&o<t.length-1){var a=t[o+1],h=t.indexOf(a);t[o]=a,t[h]=r}return t}},function(t,r){t.exports=function MoveAbove(t,r,o){if(r===o)return t;var a=t.indexOf(r),h=t.indexOf(o);if(a<0||h<0)throw new Error("Supplied items must be elements of the same array");return a>h||(t.splice(a,1),h===t.length-1?t.push(r):t.splice(h,0,r)),t}},function(t,r){t.exports=function MoveBelow(t,r,o){if(r===o)return t;var a=t.indexOf(r),h=t.indexOf(o);if(a<0||h<0)throw new Error("Supplied items must be elements of the same array");return a<h||(t.splice(a,1),0===h?t.unshift(r):t.splice(h,0,r)),t}},function(t,r,o){var a=o(363);t.exports=function NumberArrayStep(t,r,o){void 0===t&&(t=0),void 0===r&&(r=null),void 0===o&&(o=1),null===r&&(r=t,t=0);for(var h=[],d=Math.max(a((r-t)/(o||1)),0),T=0;T<d;T++)h.push(t),t+=o;return h}},function(t,r,o){var a=o(74);t.exports=function RemoveAt(t,r,o,h){if(void 0===h&&(h=t),r<0||r>t.length-1)throw new Error("Index out of bounds");var d=a(t,r);return o&&o.call(h,d),d}},function(t,r,o){var a=o(78);t.exports=function RemoveBetween(t,r,o,h,d){if(void 0===r&&(r=0),void 0===o&&(o=t.length),void 0===d&&(d=t),a(t,r,o)){var T=o-r,S=t.splice(r,T);if(h)for(var A=0;A<S.length;A++){var P=S[A];h.call(d,P)}return S}return[]}},function(t,r,o){var a=o(74);t.exports=function RemoveRandomElement(t,r,o){void 0===r&&(r=0),void 0===o&&(o=t.length);var h=r+Math.floor(Math.random()*o);return a(t,h)}},function(t,r){t.exports=function Replace(t,r,o){var a=t.indexOf(r),h=t.indexOf(o);return-1!==a&&-1===h&&(t[a]=o,!0)}},function(t,r){t.exports=function SendToBack(t,r){var o=t.indexOf(r);return-1!==o&&o>0&&(t.splice(o,1),t.unshift(r)),r}},function(t,r,o){var a=o(78);t.exports=function SetAll(t,r,o,h,d){if(void 0===h&&(h=0),void 0===d&&(d=t.length),a(t,h,d))for(var T=h;T<d;T++){var S=t[T];S.hasOwnProperty(r)&&(S[r]=o)}return t}},function(t,r){t.exports=function Swap(t,r,o){if(r===o)return t;var a=t.indexOf(r),h=t.indexOf(o);if(a<0||h<0)throw new Error("Supplied items must be elements of the same array");return t[a]=o,t[h]=r,t}},function(t,r,o){var a=o(0),h=o(211),d=o(24),T=o(20),S=new a({Extends:h,initialize:function UpdateList(t){h.call(this),this.checkQueue=!0,this.scene=t,this.systems=t.sys,t.sys.events.once(T.BOOT,this.boot,this),t.sys.events.on(T.START,this.start,this)},boot:function boot(){this.systems.events.once(T.DESTROY,this.destroy,this)},start:function start(){var t=this.systems.events;t.on(T.PRE_UPDATE,this.update,this),t.on(T.UPDATE,this.sceneUpdate,this),t.once(T.SHUTDOWN,this.shutdown,this)},sceneUpdate:function sceneUpdate(t,r){for(var o=this._active,a=o.length,h=0;h<a;h++){var d=o[h];d.active&&d.preUpdate.call(d,t,r)}},shutdown:function shutdown(){for(var t=this._active.length;t--;)this._active[t].destroy(!0);for(t=this._pending.length;t--;)this._pending[t].destroy(!0);for(t=this._destroy.length;t--;)this._destroy[t].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var r=this.systems.events;r.off(T.PRE_UPDATE,this.update,this),r.off(T.UPDATE,this.sceneUpdate,this),r.off(T.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown(),this.systems.events.off(T.START,this.start,this),this.scene=null,this.systems=null}});d.register("UpdateList",S,"updateList"),t.exports=S},function(t,r){t.exports="add"},function(t,r){t.exports="remove"},function(t,r){t.exports=function GetBitmapTextSize(t,r,o,a){if(void 0===o&&(o=!1),void 0===a)return a={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0};var h,d=t.text,T=d.length,S=t.maxWidth,A=t.wordWrapCharCode,P=Number.MAX_VALUE,O=Number.MAX_VALUE,D=0,L=0,I=t.fontData.chars,B=t.fontData.lineHeight,N=t.letterSpacing,G=0,Y=0,X=0,U=null,z=t._align,V=0,W=0,H=t.fontSize/t.fontData.size,q=H*t.scaleX,Z=H*t.scaleY,K=null,J=0,Q=[],$=Number.MAX_VALUE,tt=0,et=0,it=0,nt=[],rt=[],st=null;if(S>0){for(h=0;h<T;h++)if(10!==(X=d.charCodeAt(h))){if(U=I[X]){if(null!==K)var ot=U.kerning[J];X===A?null!==st&&(nt.push({word:st.word,i:st.i,x:st.x*q,y:st.y*Z,w:st.w*q,h:st.h*Z,cr:!1}),st=null):(null===st&&(st={word:"",i:h,x:G,y:Y,w:0,h:B,cr:!1}),st.word=st.word.concat(d[h]),st.w+=U.xOffset+U.xAdvance+(void 0!==ot?ot:0)),G+=U.xAdvance+N,K=U,J=X}}else null!==st&&(nt.push({word:st.word,i:st.i,x:st.x*q,y:st.y*Z,w:st.w*q,h:st.h*Z,cr:!0}),st=null),G=0,Y+=B,K=null;var at;null!==st&&nt.push({word:st.word,i:st.i,x:st.x*q,y:st.y*Z,w:st.w*q,h:st.h*Z,cr:!1}),G=0,Y=0,K=null,J=0;var ht=0,lt=[];for(h=0;h<nt.length;h++){var ut=nt[h],ct=ut.x,dt=ut.x+ut.w;at&&(ht=ct-(ct-(at.x+at.w)+at.w),at=null),ct-ht>S||dt-ht>S?(lt.push(ut.i-1),ut.cr?(lt.push(ut.i+ut.word.length),ht=0,at=null):at=ut):ut.cr&&(lt.push(ut.i+ut.word.length),ht=0,at=null)}var ft=function stringInsert(t,r,o){return t.substr(0,r)+o+t.substr(r+1)};for(h=lt.length-1;h>=0;h--)d=ft(d,lt[h],"\n");a.wrappedText=d,T=d.length,nt=[],st=null}var pt=0;for(h=0;h<T;h++)if(10!==(X=d.charCodeAt(h))){if(U=I[X]){if(V=G,W=Y,null!==K){var gt=U.kerning[J];V+=void 0!==gt?gt:0}P>V&&(P=V),O>W&&(O=W);var vt=V+U.xAdvance,mt=W+B;D<vt&&(D=vt),L<mt&&(L=mt);var yt=U.xOffset+U.xAdvance+(void 0!==gt?gt:0);X===A?null!==st&&(nt.push({word:st.word,i:st.i,x:st.x*q,y:st.y*Z,w:st.w*q,h:st.h*Z}),st=null):(null===st&&(st={word:"",i:pt,x:G,y:Y,w:0,h:B}),st.word=st.word.concat(d[h]),st.w+=yt),rt.push({i:pt,char:d[h],code:X,x:(U.xOffset+G)*H,y:(U.yOffset+Y)*H,w:U.width*H,h:U.height*H,t:Y*H,r:vt*H,b:B*H,line:et,glyph:U}),G+=U.xAdvance+N,K=U,J=X,it=vt*H,pt++}}else null!==st&&(nt.push({word:st.word,i:st.i,x:st.x*q,y:st.y*Z,w:st.w*q,h:st.h*Z}),st=null),G=0,Y+=B,K=null,Q[et]=it,it>tt&&(tt=it),it<$&&($=it),et++,it=0;if(null!==st&&nt.push({word:st.word,i:st.i,x:st.x*q,y:st.y*Z,w:st.w*q,h:st.h*Z}),Q[et]=it,it>tt&&(tt=it),it<$&&($=it),z>0)for(var xt=0;xt<rt.length;xt++){var Tt=rt[xt];if(1===z){var bt=(tt-Q[Tt.line])/2;Tt.x+=bt,Tt.r+=bt}else if(2===z){var wt=tt-Q[Tt.line];Tt.x+=wt,Tt.r+=wt}}var St=a.local,Ct=a.global,Et=a.lines;return St.x=P*H,St.y=O*H,St.width=D*H,St.height=L*H,Ct.x=t.x-t._displayOriginX+P*q,Ct.y=t.y-t._displayOriginY+O*Z,Ct.width=D*q,Ct.height=L*Z,Et.shortest=$,Et.longest=tt,Et.lengths=Q,r&&(St.x=Math.ceil(St.x),St.y=Math.ceil(St.y),St.width=Math.ceil(St.width),St.height=Math.ceil(St.height),Ct.x=Math.ceil(Ct.x),Ct.y=Math.ceil(Ct.y),Ct.width=Math.ceil(Ct.width),Ct.height=Math.ceil(Ct.height),Et.shortest=Math.ceil($),Et.longest=Math.ceil(tt)),o&&(t._displayOriginX=t.originX*St.width,t._displayOriginY=t.originY*St.height,Ct.x=t.x-t._displayOriginX*t.scaleX,Ct.y=t.y-t._displayOriginY*t.scaleY,r&&(Ct.x=Math.ceil(Ct.x),Ct.y=Math.ceil(Ct.y))),a.words=nt,a.characters=rt,a.lines.height=B,a.scale=H,a.scaleX=t.scaleX,a.scaleY=t.scaleY,a}},function(t,r,o){var a=o(212);t.exports=function ParseFromAtlas(t,r,o,h,d,T,S){var A=t.sys.textures.get(o),P=A.get(h),O=t.sys.cache.xml.get(d);if(P&&O){var D=a(O,P,T,S,A);return t.sys.cache.bitmapFont.add(r,{data:D,texture:o,frame:h,fromAtlas:!0}),!0}return!1}},function(t,r,o){var a=o(1),h=o(1);a=o(1046),h=o(1048),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r,o){var a=o(1047),h=o(19),d=o(12);t.exports=function BitmapTextWebGLRenderer(t,r,o,T){if(0!==r._text.length){o.addToRenderList(r);var S,A,P,O=t.pipelines.set(r.pipeline,r),D=h(r,o,T).calc,L=o.roundPixels,I=o.alpha,B=r.charColors,N=r.tintFill,G=d.getTintAppendFloatAlpha,Y=G(r.tintTopLeft,I*r._alphaTL),X=G(r.tintTopRight,I*r._alphaTR),U=G(r.tintBottomLeft,I*r._alphaBL),z=G(r.tintBottomRight,I*r._alphaBR),V=r.frame.glTexture,W=O.setGameObject(r),H=r.getTextBounds(!1).characters,q=r.dropShadowX,Z=r.dropShadowY,K=0!==q||0!==Z;if(t.pipelines.preBatch(r),K){var J=r.dropShadowColor,Q=r.dropShadowAlpha,$=G(J,I*Q*r._alphaTL),tt=G(J,I*Q*r._alphaTR),et=G(J,I*Q*r._alphaBL),it=G(J,I*Q*r._alphaBR);for(S=0;S<H.length;S++)P=(A=H[S]).glyph,32!==A.code&&0!==P.width&&0!==P.height&&a(O,r,A,P,q,Z,D,L,$,tt,et,it,1,V,W)}for(S=0;S<H.length;S++)if(P=(A=H[S]).glyph,32!==A.code&&0!==P.width&&0!==P.height)if(B[A.i]){var nt=B[A.i],rt=nt.tintEffect,st=G(nt.tintTL,I*r._alphaTL),ot=G(nt.tintTR,I*r._alphaTR),at=G(nt.tintBL,I*r._alphaBL),ht=G(nt.tintBR,I*r._alphaBR);a(O,r,A,P,0,0,D,L,st,ot,at,ht,rt,V,W)}else a(O,r,A,P,0,0,D,L,Y,X,U,z,N,V,W);t.pipelines.postBatch(r)}}},function(t,r){t.exports=function BatchChar(t,r,o,a,h,d,T,S,A,P,O,D,L,I,B){var N=o.x-r.displayOriginX+h,G=o.y-r.displayOriginY+d,Y=N+o.w,X=G+o.h,U=T.getXRound(N,G,S),z=T.getYRound(N,G,S),V=T.getXRound(N,X,S),W=T.getYRound(N,X,S),H=T.getXRound(Y,X,S),q=T.getYRound(Y,X,S),Z=T.getXRound(Y,G,S),K=T.getYRound(Y,G,S);t.batchQuad(r,U,z,V,W,H,q,Z,K,a.u0,a.v0,a.u1,a.v1,A,P,O,D,L,I,B)}},function(t,r,o){var a=o(30);t.exports=function BitmapTextCanvasRenderer(t,r,o,h){var d=r._text,T=d.length,S=t.currentContext;if(0!==T&&a(t,S,r,o,h)){o.addToRenderList(r);var A=r.fromAtlas?r.frame:r.texture.frames.__BASE,P=r.fontData.chars,O=r.fontData.lineHeight,D=r._letterSpacing,L=0,I=0,B=0,N=null,G=0,Y=0,X=0,U=0,z=0,V=0,W=null,H=0,q=A.source.image,Z=A.cutX,K=A.cutY,J=r._fontSize/r.fontData.size,Q=r._align,$=0,tt=0,et=r.getTextBounds(!1);r.maxWidth>0&&(T=(d=et.wrappedText).length);var it=r._bounds.lines;1===Q?tt=(it.longest-it.lengths[0])/2:2===Q&&(tt=it.longest-it.lengths[0]),S.translate(-r.displayOriginX,-r.displayOriginY);for(var nt=o.roundPixels,rt=0;rt<T;rt++)if(10!==(B=d.charCodeAt(rt))){if(N=P[B]){if(G=Z+N.x,Y=K+N.y,X=N.width,U=N.height,z=N.xOffset+L,V=N.yOffset+I,null!==W){var st=N.kerning[H];z+=void 0!==st?st:0}z*=J,V*=J,z+=tt,L+=N.xAdvance+D,W=N,H=B,0!==X&&0!==U&&32!==B&&(nt&&(z=Math.round(z),V=Math.round(V)),S.save(),S.translate(z,V),S.scale(J,J),S.drawImage(q,G,Y,X,U,0,0,X,U),S.restore())}}else $++,1===Q?tt=(it.longest-it.lengths[$])/2:2===Q&&(tt=it.longest-it.lengths[$]),L=0,I+=O,W=null;S.restore()}}},function(t,r,o){var a=o(1),h=o(1);a=o(1050),h=o(1051),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r,o){var a=o(25),h=o(12),d=new a;t.exports=function BlitterWebGLRenderer(t,r,o,a){var T=r.getRenderList();if(0!==T.length){var S=o.alpha*r.alpha;if(0!==S){o.addToRenderList(r);var A=t.pipelines.set(this.pipeline,r),P=o.scrollX*r.scrollFactorX,O=o.scrollY*r.scrollFactorY,D=d.copyFrom(o.matrix);a&&(D.multiplyWithOffset(a,-P,-O),P=0,O=0);var L=r.x-P,I=r.y-O,B=-1,N=o.roundPixels;t.pipelines.preBatch(r);for(var G=0;G<T.length;G++){var Y=T[G],X=Y.frame,U=Y.alpha*S;if(0!==U){var z=X.width,V=X.height,W=L+Y.x+X.x,H=I+Y.y+X.y;Y.flipX&&(z*=-1,W+=X.width),Y.flipY&&(V*=-1,H+=X.height);var q=W+z,Z=H+V,K=D.getX(W,H),J=D.getY(W,H),Q=D.getX(q,Z),$=D.getY(q,Z),tt=h.getTintAppendFloatAlpha(Y.tint,U);if(X.sourceIndex!==B){var et=A.setGameObject(r,X);B=X.sourceIndex}N&&(K=Math.round(K),J=Math.round(J),Q=Math.round(Q),$=Math.round($)),A.batchQuad(r,K,J,K,$,Q,$,Q,J,X.u0,X.v0,X.u1,X.v1,tt,tt,tt,tt,!1,X.glTexture,et)&&(B=-1)}}t.pipelines.postBatch(r)}}}},function(t,r){t.exports=function BlitterCanvasRenderer(t,r,o,a){var h=r.getRenderList();if(0!==h.length){var d=t.currentContext,T=o.alpha*r.alpha;if(0!==T){o.addToRenderList(r),d.globalCompositeOperation=t.blendModes[r.blendMode],d.imageSmoothingEnabled=!(!t.antialias||r.frame.source.scaleMode);var S=r.x-o.scrollX*r.scrollFactorX,A=r.y-o.scrollY*r.scrollFactorY;d.save(),a&&a.copyToContext(d);for(var P=o.roundPixels,O=0;O<h.length;O++){var D=h[O],L=D.flipX||D.flipY,I=D.frame,B=I.canvasData,N=I.x,G=I.y,Y=1,X=1,U=D.alpha*T;0!==U&&(d.globalAlpha=U,L?(D.flipX&&(Y=-1,N-=B.width),D.flipY&&(X=-1,G-=B.height),d.save(),d.translate(D.x+S,D.y+A),d.scale(Y,X),d.drawImage(I.source.image,B.x,B.y,B.width,B.height,N,G,B.width,B.height),d.restore()):(P&&(N=Math.round(N),G=Math.round(G)),d.drawImage(I.source.image,B.x,B.y,B.width,B.height,N+D.x+S,G+D.y+A,B.width,B.height)))}d.restore()}}}},function(t,r,o){var a=o(1),h=o(1);a=o(1053),h=o(1054),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r){t.exports=function ContainerWebGLRenderer(t,r,o,a){o.addToRenderList(r);var h=r.list,d=h.length;if(0!==d){var T=r.localTransform;a?(T.loadIdentity(),T.multiply(a),T.translate(r.x,r.y),T.rotate(r.rotation),T.scale(r.scaleX,r.scaleY)):T.applyITRS(r.x,r.y,r.rotation,r.scaleX,r.scaleY),t.pipelines.preBatch(r);var S=-1!==r.blendMode;S||t.setBlendMode(0);for(var A=r.alpha,P=r.scrollFactorX,O=r.scrollFactorY,D=0;D<d;D++){var L=h[D];if(L.willRender(o)){var I,B,N,G;if(void 0!==L.alphaTopLeft)I=L.alphaTopLeft,B=L.alphaTopRight,N=L.alphaBottomLeft,G=L.alphaBottomRight;else{var Y=L.alpha;I=Y,B=Y,N=Y,G=Y}var X=L.scrollFactorX,U=L.scrollFactorY;S||L.blendMode===t.currentBlendMode||t.setBlendMode(L.blendMode);var z=L.mask;z&&z.preRenderWebGL(t,L,o);var V=L.type;V!==t.currentType&&(t.newType=!0,t.currentType=V),t.nextTypeMatch=D<d-1&&h[D+1].type===t.currentType,L.setScrollFactor(X*P,U*O),L.setAlpha(I*A,B*A,N*A,G*A),L.renderWebGL(t,L,o,T),L.setAlpha(I,B,N,G),L.setScrollFactor(X,U),z&&z.postRenderWebGL(t,o),t.newType=!1}}t.pipelines.postBatch(r)}}},function(t,r){t.exports=function ContainerCanvasRenderer(t,r,o,a){o.addToRenderList(r);var h=r.list;if(0!==h.length){var d=r.localTransform;a?(d.loadIdentity(),d.multiply(a),d.translate(r.x,r.y),d.rotate(r.rotation),d.scale(r.scaleX,r.scaleY)):d.applyITRS(r.x,r.y,r.rotation,r.scaleX,r.scaleY);var T=-1!==r.blendMode;T||t.setBlendMode(0);var S=r._alpha,A=r.scrollFactorX,P=r.scrollFactorY;r.mask&&r.mask.preRenderCanvas(t,null,o);for(var O=0;O<h.length;O++){var D=h[O];if(D.willRender(o)){var L=D.alpha,I=D.scrollFactorX,B=D.scrollFactorY;T||D.blendMode===t.currentBlendMode||t.setBlendMode(D.blendMode),D.setScrollFactor(I*A,B*P),D.setAlpha(L*S),D.renderCanvas(t,D,o,d),D.setAlpha(L),D.setScrollFactor(I,B)}}r.mask&&r.mask.postRenderCanvas(t)}}},function(t,r,o){var a=o(1),h=o(1);a=o(443),h=o(443),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r){t.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(t,r,o){var a=o(1),h=o(1);a=o(1058),h=o(1059),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r,o){var a=o(19),h=o(25),d=o(12),T=new h;t.exports=function DynamicBitmapTextWebGLRenderer(t,r,o,h){var S=r.text,A=S.length;if(0!==A){o.addToRenderList(r);var P=t.pipelines.set(r.pipeline,r),O=a(r,o,h),D=O.sprite,L=O.calc,I=T,B=r.cropWidth>0||r.cropHeight>0;B&&(P.flush(),t.pushScissor(L.tx,L.ty,r.cropWidth*L.scaleX,r.cropHeight*L.scaleY));var N,G,Y=r.frame.glTexture,X=r.tintFill,U=d.getTintAppendFloatAlpha(r.tintTopLeft,o.alpha*r._alphaTL),z=d.getTintAppendFloatAlpha(r.tintTopRight,o.alpha*r._alphaTR),V=d.getTintAppendFloatAlpha(r.tintBottomLeft,o.alpha*r._alphaBL),W=d.getTintAppendFloatAlpha(r.tintBottomRight,o.alpha*r._alphaBR),H=P.setGameObject(r),q=0,Z=0,K=0,J=0,Q=r.letterSpacing,$=0,tt=0,et=r.scrollX,it=r.scrollY,nt=r.fontData,rt=nt.chars,st=nt.lineHeight,ot=r.fontSize/nt.size,at=0,ht=r._align,lt=0,ut=0,ct=r.getTextBounds(!1);r.maxWidth>0&&(A=(S=ct.wrappedText).length);var dt=r._bounds.lines;1===ht?ut=(dt.longest-dt.lengths[0])/2:2===ht&&(ut=dt.longest-dt.lengths[0]);var ft=o.roundPixels,pt=r.displayCallback,gt=r.callbackData;t.pipelines.preBatch(r);for(var vt=0;vt<A;vt++)if(10!==(K=S.charCodeAt(vt))){if(N=rt[K]){$=N.width,tt=N.height;var mt=N.xOffset+q-et,yt=N.yOffset+Z-it;if(null!==G){var xt=N.kerning[J];mt+=void 0!==xt?xt:0}if(q+=N.xAdvance+Q,G=N,J=K,0!==$&&0!==tt&&32!==K){if(ot=r.fontSize/r.fontData.size,at=0,pt){gt.color=0,gt.tint.topLeft=U,gt.tint.topRight=z,gt.tint.bottomLeft=V,gt.tint.bottomRight=W,gt.index=vt,gt.charCode=K,gt.x=mt,gt.y=yt,gt.scale=ot,gt.rotation=at,gt.data=N.data;var Tt=pt(gt);mt=Tt.x,yt=Tt.y,ot=Tt.scale,at=Tt.rotation,Tt.color?(U=Tt.color,z=Tt.color,V=Tt.color,W=Tt.color):(U=Tt.tint.topLeft,z=Tt.tint.topRight,V=Tt.tint.bottomLeft,W=Tt.tint.bottomRight),U=d.getTintAppendFloatAlpha(U,o.alpha*r._alphaTL),z=d.getTintAppendFloatAlpha(z,o.alpha*r._alphaTR),V=d.getTintAppendFloatAlpha(V,o.alpha*r._alphaBL),W=d.getTintAppendFloatAlpha(W,o.alpha*r._alphaBR)}mt*=ot,yt*=ot,mt-=r.displayOriginX,yt-=r.displayOriginY,mt+=ut,I.applyITRS(mt,yt,at,ot,ot),L.multiply(I,D);var bt=N.u0,wt=N.v0,St=N.u1,Ct=N.v1,Et=$,Mt=tt,_t=D.e,Pt=D.f,Rt=Mt*D.c+D.e,kt=Mt*D.d+D.f,Ot=Et*D.a+Mt*D.c+D.e,Dt=Et*D.b+Mt*D.d+D.f,Lt=Et*D.a+D.e,It=Et*D.b+D.f;ft&&(_t=Math.round(_t),Pt=Math.round(Pt),Rt=Math.round(Rt),kt=Math.round(kt),Ot=Math.round(Ot),Dt=Math.round(Dt),Lt=Math.round(Lt),It=Math.round(It)),P.batchQuad(r,_t,Pt,Rt,kt,Ot,Dt,Lt,It,bt,wt,St,Ct,U,z,V,W,X,Y,H)}}}else lt++,1===ht?ut=(dt.longest-dt.lengths[lt])/2:2===ht&&(ut=dt.longest-dt.lengths[lt]),q=0,Z+=st,G=null;B&&(P.flush(),t.popScissor()),t.pipelines.postBatch(r)}}},function(t,r,o){var a=o(30);t.exports=function DynamicBitmapTextCanvasRenderer(t,r,o,h){var d=r._text,T=d.length,S=t.currentContext;if(0!==T&&a(t,S,r,o,h)){o.addToRenderList(r);var A=r.fromAtlas?r.frame:r.texture.frames.__BASE,P=r.displayCallback,O=r.callbackData,D=r.fontData.chars,L=r.fontData.lineHeight,I=r._letterSpacing,B=0,N=0,G=0,Y=null,X=0,U=0,z=0,V=0,W=0,H=0,q=null,Z=0,K=r.frame.source.image,J=A.cutX,Q=A.cutY,$=0,tt=0,et=r._fontSize/r.fontData.size,it=r._align,nt=0,rt=0;r.getTextBounds(!1);var st=r._bounds.lines;1===it?rt=(st.longest-st.lengths[0])/2:2===it&&(rt=st.longest-st.lengths[0]),S.translate(-r.displayOriginX,-r.displayOriginY);var ot=o.roundPixels;r.cropWidth>0&&r.cropHeight>0&&(S.beginPath(),S.rect(0,0,r.cropWidth,r.cropHeight),S.clip());for(var at=0;at<T;at++)if(tt=et,$=0,10!==(G=d.charCodeAt(at))){if(Y=D[G]){if(X=J+Y.x,U=Q+Y.y,z=Y.width,V=Y.height,W=Y.xOffset+B-r.scrollX,H=Y.yOffset+N-r.scrollY,null!==q){var ht=Y.kerning[Z];W+=void 0!==ht?ht:0}if(P){O.index=at,O.charCode=G,O.x=W,O.y=H,O.scale=tt,O.rotation=$,O.data=Y.data;var lt=P(O);W=lt.x,H=lt.y,tt=lt.scale,$=lt.rotation}W*=tt,H*=tt,W+=rt,B+=Y.xAdvance+I,q=Y,Z=G,0!==z&&0!==V&&32!==G&&(ot&&(W=Math.round(W),H=Math.round(H)),S.save(),S.translate(W,H),S.rotate($),S.scale(tt,tt),S.drawImage(K,X,U,z,V,0,0,z,V),S.restore())}}else nt++,1===it?rt=(st.longest-st.lengths[nt])/2:2===it&&(rt=st.longest-st.lengths[nt]),B=0,N+=L,q=null;S.restore()}}},function(t,r,o){var a=o(1),h=o(1);a=o(1061),h=o(1062),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r,o){var a=o(19);t.exports=function ExternWebGLRenderer(t,r,o,h){t.pipelines.clear();var d=a(r,o,h).calc;r.render.call(r,t,o,d),t.pipelines.rebind()}},function(t,r){},function(t,r,o){var a=o(1),h=o(1);a=o(1064),o(448),h=o(448),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r,o){var a=o(217),h=o(19),d=o(25),T=o(12),S=function Point(t,r,o){this.x=t,this.y=r,this.width=o},A=function Path(t,r,o){this.points=[],this.pointsLength=1,this.points[0]=new S(t,r,o)},P=[],O=new d;t.exports=function GraphicsWebGLRenderer(t,r,o,d){if(0!==r.commandBuffer.length){o.addToRenderList(r);var D=t.pipelines.set(r.pipeline,r);t.pipelines.preBatch(r);for(var L=h(r,o,d).calc,I=O.loadIdentity(),B=r.commandBuffer,N=o.alpha*r.alpha,G=1,Y=D.fillTint,X=D.strokeTint,U=0,z=0,V=0,W=2*Math.PI,H=[],q=0,Z=!0,K=null,J=T.getTintAppendFloatAlpha,Q=0;Q<B.length;Q++)switch(B[Q]){case a.BEGIN_PATH:H.length=0,K=null,Z=!0;break;case a.CLOSE_PATH:Z=!1,K&&K.points.length&&K.points.push(K.points[0]);break;case a.FILL_PATH:for(q=0;q<H.length;q++)D.batchFillPath(H[q].points,I,L);break;case a.STROKE_PATH:for(q=0;q<H.length;q++)D.batchStrokePath(H[q].points,G,Z,I,L);break;case a.LINE_STYLE:G=B[++Q];var $=J(B[++Q],B[++Q]*N);X.TL=$,X.TR=$,X.BL=$,X.BR=$;break;case a.FILL_STYLE:var tt=J(B[++Q],B[++Q]*N);Y.TL=tt,Y.TR=tt,Y.BL=tt,Y.BR=tt;break;case a.GRADIENT_FILL_STYLE:var et=B[++Q]*N,it=B[++Q]*N,nt=B[++Q]*N,rt=B[++Q]*N;Y.TL=J(B[++Q],et),Y.TR=J(B[++Q],it),Y.BL=J(B[++Q],nt),Y.BR=J(B[++Q],rt);break;case a.GRADIENT_LINE_STYLE:G=B[++Q];var st=B[++Q]*N;X.TL=J(B[++Q],st),X.TR=J(B[++Q],st),X.BL=J(B[++Q],st),X.BR=J(B[++Q],st);break;case a.ARC:var ot=0,at=B[++Q],ht=B[++Q],lt=B[++Q],ut=B[++Q],ct=B[++Q],dt=B[++Q],ft=B[++Q];for(ct-=ut,dt?ct<-W?ct=-W:ct>0&&(ct=ct%W-W):ct>W?ct=W:ct<0&&(ct=W+ct%W),null===K&&(K=new A(at+Math.cos(ut)*lt,ht+Math.sin(ut)*lt,G),H.push(K),ot+=.01);ot<1+ft;)V=ct*ot+ut,U=at+Math.cos(V)*lt,z=ht+Math.sin(V)*lt,K.points.push(new S(U,z,G)),ot+=.01;V=ct+ut,U=at+Math.cos(V)*lt,z=ht+Math.sin(V)*lt,K.points.push(new S(U,z,G));break;case a.FILL_RECT:D.batchFillRect(B[++Q],B[++Q],B[++Q],B[++Q],I,L);break;case a.FILL_TRIANGLE:D.batchFillTriangle(B[++Q],B[++Q],B[++Q],B[++Q],B[++Q],B[++Q],I,L);break;case a.STROKE_TRIANGLE:D.batchStrokeTriangle(B[++Q],B[++Q],B[++Q],B[++Q],B[++Q],B[++Q],G,I,L);break;case a.LINE_TO:null!==K?K.points.push(new S(B[++Q],B[++Q],G)):(K=new A(B[++Q],B[++Q],G),H.push(K));break;case a.MOVE_TO:K=new A(B[++Q],B[++Q],G),H.push(K);break;case a.SAVE:P.push(I.copyToArray());break;case a.RESTORE:I.copyFromArray(P.pop());break;case a.TRANSLATE:at=B[++Q],ht=B[++Q],I.translate(at,ht);break;case a.SCALE:at=B[++Q],ht=B[++Q],I.scale(at,ht);break;case a.ROTATE:I.rotate(B[++Q])}t.pipelines.postBatch(r)}}},function(t,r,o){var a=o(1),h=o(1);a=o(1066),h=o(1067),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r){t.exports=function SpriteWebGLRenderer(t,r,o,a){o.addToRenderList(r),r.pipeline.batchSprite(r,o,a)}},function(t,r){t.exports=function SpriteCanvasRenderer(t,r,o,a){o.addToRenderList(r),t.batchSprite(r,r.frame,o,a)}},function(t,r,o){var a=o(1),h=o(1);a=o(1069),h=o(1070),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r){t.exports=function ImageWebGLRenderer(t,r,o,a){o.addToRenderList(r),this.pipeline.batchSprite(r,o,a)}},function(t,r){t.exports=function ImageCanvasRenderer(t,r,o,a){o.addToRenderList(r),t.batchSprite(r,r.frame,o,a)}},function(t,r,o){var a=o(1),h=o(1);a=o(1072),h=o(1073),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r){t.exports=function LayerWebGLRenderer(t,r,o){var a=r.list,h=a.length;if(0!==h){r.depthSort(),t.pipelines.preBatch(r);var d=-1!==r.blendMode;d||t.setBlendMode(0);for(var T=r.alpha,S=0;S<h;S++){var A=a[S];if(A.willRender(o)){var P,O,D,L;if(void 0!==A.alphaTopLeft)P=A.alphaTopLeft,O=A.alphaTopRight,D=A.alphaBottomLeft,L=A.alphaBottomRight;else{var I=A.alpha;P=I,O=I,D=I,L=I}d||A.blendMode===t.currentBlendMode||t.setBlendMode(A.blendMode);var B=A.mask;B&&B.preRenderWebGL(t,A,o);var N=A.type;N!==t.currentType&&(t.newType=!0,t.currentType=N),t.nextTypeMatch=S<h-1&&a[S+1].type===t.currentType,A.setAlpha(P*T,O*T,D*T,L*T),A.renderWebGL(t,A,o),A.setAlpha(P,O,D,L),B&&B.postRenderWebGL(t,o),t.newType=!1}}t.pipelines.postBatch(r)}}},function(t,r){t.exports=function LayerCanvasRenderer(t,r,o){var a=r.list;if(0!==a.length){r.depthSort();var h=-1!==r.blendMode;h||t.setBlendMode(0);var d=r._alpha;r.mask&&r.mask.preRenderCanvas(t,null,o);for(var T=0;T<a.length;T++){var S=a[T];if(S.willRender(o)){var A=S.alpha;h||S.blendMode===t.currentBlendMode||t.setBlendMode(S.blendMode),S.setAlpha(A*d),S.renderCanvas(t,S,o),S.setAlpha(A)}}r.mask&&r.mask.postRenderCanvas(t)}}},function(t,r,o){t.exports={EmitterOp:o(449),GravityWell:o(450),Particle:o(451),ParticleEmitter:o(452),ParticleEmitterManager:o(220),Zones:o(1078)}},function(t,r,o){var a=o(1),h=o(1);a=o(1076),h=o(1077),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r,o){var a=o(25),h=o(12),d=new a,T=new a,S=new a,A=new a;t.exports=function ParticleManagerWebGLRenderer(t,r,o,a){var P=r.emitters.list,O=P.length;if(0!==O){var D=t.pipelines.set(r.pipeline),L=d,I=T,B=S,N=A;a?(N.loadIdentity(),N.multiply(a),N.translate(r.x,r.y),N.rotate(r.rotation),N.scale(r.scaleX,r.scaleY)):N.applyITRS(r.x,r.y,r.rotation,r.scaleX,r.scaleY);var G=o.roundPixels,Y=r.defaultFrame.glTexture,X=h.getTintAppendFloatAlpha,U=D.setGameObject(r,r.defaultFrame);t.pipelines.preBatch(r);for(var z=0;z<O;z++){var V=P[z],W=V.alive,H=W.length;if(V.visible&&0!==H){o.addToRenderList(V);var q=V.scrollFactorX,Z=V.scrollFactorY;t.setBlendMode(V.blendMode),V.mask&&(V.mask.preRenderWebGL(t,V,o),t.pipelines.set(r.pipeline));for(var K=0;K<H;K++){var J=W[K],Q=J.alpha*o.alpha;if(!(Q<=0)){B.applyITRS(J.x,J.y,J.rotation,J.scaleX,J.scaleY),L.copyFrom(o.matrix),L.multiplyWithOffset(N,-o.scrollX*q,-o.scrollY*Z),B.e=J.x,B.f=J.y,L.multiply(B,I);var $=J.frame,tt=-$.halfWidth,et=-$.halfHeight,it=tt+$.width,nt=et+$.height,rt=I.getXRound(tt,et,G),st=I.getYRound(tt,et,G),ot=I.getXRound(tt,nt,G),at=I.getYRound(tt,nt,G),ht=I.getXRound(it,nt,G),lt=I.getYRound(it,nt,G),ut=I.getXRound(it,et,G),ct=I.getYRound(it,et,G),dt=X(J.tint,Q);D.batchQuad(V,rt,st,ot,at,ht,lt,ut,ct,$.u0,$.v0,$.u1,$.v1,dt,dt,dt,dt,0,Y,U)}}V.mask&&V.mask.postRenderWebGL(t,o)}}t.pipelines.postBatch(r)}}},function(t,r,o){var a=o(25),h=new a,d=new a,T=new a,S=new a;t.exports=function ParticleManagerCanvasRenderer(t,r,o,a){var A=r.emitters.list,P=A.length;if(0!==P){var O=h.copyFrom(o.matrix),D=d,L=T,I=S;a?(I.loadIdentity(),I.multiply(a),I.translate(r.x,r.y),I.rotate(r.rotation),I.scale(r.scaleX,r.scaleY)):I.applyITRS(r.x,r.y,r.rotation,r.scaleX,r.scaleY);for(var B=t.currentContext,N=o.roundPixels,G=0;G<P;G++){var Y=A[G],X=Y.alive,U=X.length;if(Y.visible&&0!==U){o.addToRenderList(Y);var z=Y.scrollFactorX,V=Y.scrollFactorY;B.save(),B.globalCompositeOperation=t.blendModes[Y.blendMode];for(var W=0;W<U;W++){var H=X[W],q=H.alpha*o.alpha;if(!(q<=0)){L.applyITRS(H.x,H.y,H.rotation,H.scaleX,H.scaleY),O.copyFrom(o.matrix),O.multiplyWithOffset(I,-o.scrollX*z,-o.scrollY*V),L.e=H.x,L.f=H.y,O.multiply(L,D);var Z=H.frame,K=Z.canvasData,J=-Z.halfWidth,Q=-Z.halfHeight;B.globalAlpha=q,B.save(),D.setToContext(B),N&&(J=Math.round(J),Q=Math.round(Q)),B.imageSmoothingEnabled=!(!t.antialias||Z.source.scaleMode),B.drawImage(Z.source.image,K.x,K.y,K.width,K.height,J,Q,K.width,K.height),B.restore()}}B.restore()}}}}},function(t,r,o){t.exports={DeathZone:o(453),EdgeZone:o(454),RandomZone:o(456)}},function(t,r,o){var a=o(1),h=o(1);a=o(1080),h=o(1081),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r,o){var a=o(12);t.exports=function RenderTextureWebGLRenderer(t,r,o,h){o.addToRenderList(r);var d=o.alpha,T=r.renderTarget,S=T.width,A=T.height,P=a.getTintAppendFloatAlpha,O=t.pipelines.set(r.pipeline),D=O.setTexture2D(T.texture);t.pipelines.preBatch(r),O.batchTexture(r,T.texture,S,A,r.x,r.y,S,A,r.scaleX,r.scaleY,r.rotation,r.flipX,!r.flipY,r.scrollFactorX,r.scrollFactorY,r.displayOriginX,r.displayOriginY,0,0,S,A,P(r.tintTopLeft,d*r._alphaTL),P(r.tintTopRight,d*r._alphaTR),P(r.tintBottomLeft,d*r._alphaBL),P(r.tintBottomRight,d*r._alphaBR),r.tintFill,0,0,o,h,!0,D),t.resetTextures(),t.pipelines.postBatch(r)}},function(t,r){t.exports=function RenderTextureCanvasRenderer(t,r,o,a){o.addToRenderList(r),t.batchSprite(r,r.frame,o,a)}},function(t,r,o){var a=o(1083),h=o(17),d={Parse:o(1084)};d=h(!1,d,a),t.exports=d},function(t,r){t.exports={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:"ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",TEXT_SET7:"AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:"ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789"}},function(t,r,o){var a=o(6);t.exports=function ParseRetroFont(t,r){var o=r.width,h=r.height,d=Math.floor(o/2),T=Math.floor(h/2),S=a(r,"chars","");if(""!==S){var A=a(r,"image",""),P=t.sys.textures.getFrame(A),O=P.cutX,D=P.cutY,L=P.source.width,I=P.source.height,B=a(r,"offset.x",0),N=a(r,"offset.y",0),G=a(r,"spacing.x",0),Y=a(r,"spacing.y",0),X=a(r,"lineSpacing",0),U=a(r,"charsPerRow",null);null===U&&(U=L/o)>S.length&&(U=S.length);for(var z=B,V=N,W={retroFont:!0,font:A,size:o,lineHeight:h+X,chars:{}},H=0,q=0;q<S.length;q++){var Z=S.charCodeAt(q),K=(O+z)/L,J=(D+V)/I,Q=(O+z+o)/L,$=(D+V+h)/I;W.chars[Z]={x:z,y:V,width:o,height:h,centerX:d,centerY:T,xOffset:0,yOffset:0,xAdvance:o,data:{},kerning:{},u0:K,v0:J,u1:Q,v1:$},++H===U?(H=0,z=B,V+=h+Y):z+=o+G}return{data:W,frame:null,texture:A}}}},function(t,r,o){var a=o(1),h=o(1);a=o(1086),h=o(1087),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r,o){var a=o(19),h=o(12);t.exports=function RopeWebGLRenderer(t,r,o,d){o.addToRenderList(r);var T=t.pipelines.set(r.pipeline,r),S=a(r,o,d).calc,A=r.vertices,P=r.uv,O=r.colors,D=r.alphas,L=r.alpha,I=h.getTintAppendFloatAlpha,B=o.roundPixels,N=A.length,G=Math.floor(.5*N);T.flush(),t.pipelines.preBatch(r);var Y=T.setGameObject(r),X=T.vertexViewF32,U=T.vertexViewU32,z=T.vertexCount*T.currentShader.vertexComponentCount-1,V=0,W=r.tintFill;r.dirty&&r.updateVertices();for(var H=r.debugCallback,q=[],Z=0;Z<N;Z+=2){var K=A[Z+0],J=A[Z+1],Q=K*S.a+J*S.c+S.e,$=K*S.b+J*S.d+S.f;B&&(Q=Math.round(Q),$=Math.round($)),X[++z]=Q,X[++z]=$,X[++z]=P[Z+0],X[++z]=P[Z+1],X[++z]=Y,X[++z]=W,U[++z]=I(O[V],o.alpha*(D[V]*L)),V++,H&&(q[Z+0]=Q,q[Z+1]=$)}H&&H.call(r,r,N,q),T.vertexCount+=G,t.pipelines.postBatch(r)}},function(t,r){t.exports=function RopeCanvasRenderer(){}},function(t,r,o){var a=o(1),h=o(1);a=o(1089),h=o(1090),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r,o){var a=o(12);t.exports=function TextWebGLRenderer(t,r,o,h){if(0!==r.width&&0!==r.height){o.addToRenderList(r);var d=r.frame,T=d.width,S=d.height,A=a.getTintAppendFloatAlpha,P=t.pipelines.set(r.pipeline,r),O=P.setTexture2D(d.glTexture,r);t.pipelines.preBatch(r),P.batchTexture(r,d.glTexture,T,S,r.x,r.y,T/r.style.resolution,S/r.style.resolution,r.scaleX,r.scaleY,r.rotation,r.flipX,r.flipY,r.scrollFactorX,r.scrollFactorY,r.displayOriginX,r.displayOriginY,0,0,T,S,A(r.tintTopLeft,o.alpha*r._alphaTL),A(r.tintTopRight,o.alpha*r._alphaTR),A(r.tintBottomLeft,o.alpha*r._alphaBL),A(r.tintBottomRight,o.alpha*r._alphaBR),r.tintFill,0,0,o,h,!1,O),t.pipelines.postBatch(r)}}},function(t,r){t.exports=function TextCanvasRenderer(t,r,o,a){0!==r.width&&0!==r.height&&(o.addToRenderList(r),t.batchSprite(r,r.frame,o,a))}},function(t,r,o){var a=o(1),h=o(1);a=o(1092),h=o(1093),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r,o){var a=o(12);t.exports=function TileSpriteWebGLRenderer(t,r,o,h){r.updateCanvas();var d=r.width,T=r.height;if(0!==d&&0!==T){o.addToRenderList(r),t.pipelines.preBatch(r);var S=a.getTintAppendFloatAlpha,A=t.pipelines.set(r.pipeline,r),P=A.setTexture2D(r.fillPattern,r);A.batchTexture(r,r.fillPattern,r.displayFrame.width*r.tileScaleX,r.displayFrame.height*r.tileScaleY,r.x,r.y,d,T,r.scaleX,r.scaleY,r.rotation,r.flipX,r.flipY,r.scrollFactorX,r.scrollFactorY,r.originX*d,r.originY*T,0,0,d,T,S(r.tintTopLeft,o.alpha*r._alphaTL),S(r.tintTopRight,o.alpha*r._alphaTR),S(r.tintBottomLeft,o.alpha*r._alphaBL),S(r.tintBottomRight,o.alpha*r._alphaBR),r.tintFill,r.tilePositionX%r.displayFrame.width/r.displayFrame.width,r.tilePositionY%r.displayFrame.height/r.displayFrame.height,o,h,!1,P),t.pipelines.postBatch(r)}}},function(t,r){t.exports=function TileSpriteCanvasRenderer(t,r,o,a){r.updateCanvas(),o.addToRenderList(r),t.batchSprite(r,r.frame,o,a)}},function(t,r,o){var a=o(1),h=o(1);a=o(1095),h=o(1096),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r){t.exports=function VideoWebGLRenderer(t,r,o,a){r.videoTexture&&(o.addToRenderList(r),r.pipeline.batchSprite(r,o,a))}},function(t,r){t.exports=function VideoCanvasRenderer(t,r,o,a){r.videoTexture&&(o.addToRenderList(r),t.batchSprite(r,r.frame,o,a))}},function(t,r,o){var a=o(1),h=o(1);a=o(1098),h=o(1099),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r,o){var a=o(19),h=o(114),d=o(81);t.exports=function ArcWebGLRenderer(t,r,o,T){o.addToRenderList(r);var S=t.pipelines.set(r.pipeline),A=a(r,o,T),P=S.calcMatrix.copyFrom(A.calc),O=r._displayOriginX,D=r._displayOriginY,L=o.alpha*r.alpha;t.pipelines.preBatch(r),r.isFilled&&h(S,P,r,L,O,D),r.isStroked&&d(S,r,L,O,D),t.pipelines.postBatch(r)}},function(t,r,o){var a=o(36),h=o(48),d=o(60),T=o(30);t.exports=function ArcCanvasRenderer(t,r,o,S){o.addToRenderList(r);var A=t.currentContext;if(T(t,A,r,o,S)){var P=r.radius;A.beginPath(),A.arc(P-r.originX*(2*P),P-r.originY*(2*P),P,a(r._startAngle),a(r._endAngle),r.anticlockwise),r.closePath&&A.closePath(),r.isFilled&&(h(A,r),A.fill()),r.isStroked&&(d(A,r),A.stroke()),A.restore()}}},function(t,r,o){var a=o(1),h=o(1);a=o(1101),h=o(1102),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r,o){var a=o(114),h=o(19),d=o(81);t.exports=function CurveWebGLRenderer(t,r,o,T){o.addToRenderList(r);var S=t.pipelines.set(r.pipeline),A=h(r,o,T),P=S.calcMatrix.copyFrom(A.calc),O=r._displayOriginX+r._curveBounds.x,D=r._displayOriginY+r._curveBounds.y,L=o.alpha*r.alpha;t.pipelines.preBatch(r),r.isFilled&&a(S,P,r,L,O,D),r.isStroked&&d(S,r,L,O,D),t.pipelines.postBatch(r)}},function(t,r,o){var a=o(48),h=o(60),d=o(30);t.exports=function CurveCanvasRenderer(t,r,o,T){o.addToRenderList(r);var S=t.currentContext;if(d(t,S,r,o,T)){var A=r._displayOriginX+r._curveBounds.x,P=r._displayOriginY+r._curveBounds.y,O=r.pathData,D=O.length-1,L=O[0]-A,I=O[1]-P;S.beginPath(),S.moveTo(L,I),r.closePath||(D-=2);for(var B=2;B<D;B+=2){var N=O[B]-A,G=O[B+1]-P;S.lineTo(N,G)}r.closePath&&S.closePath(),r.isFilled&&(a(S,r),S.fill()),r.isStroked&&(h(S,r),S.stroke()),S.restore()}}},function(t,r,o){var a=o(1),h=o(1);a=o(1104),h=o(1105),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r,o){var a=o(114),h=o(19),d=o(81);t.exports=function EllipseWebGLRenderer(t,r,o,T){o.addToRenderList(r);var S=t.pipelines.set(r.pipeline),A=h(r,o,T),P=S.calcMatrix.copyFrom(A.calc),O=r._displayOriginX,D=r._displayOriginY,L=o.alpha*r.alpha;t.pipelines.preBatch(r),r.isFilled&&a(S,P,r,L,O,D),r.isStroked&&d(S,r,L,O,D),t.pipelines.postBatch(r)}},function(t,r,o){var a=o(48),h=o(60),d=o(30);t.exports=function EllipseCanvasRenderer(t,r,o,T){o.addToRenderList(r);var S=t.currentContext;if(d(t,S,r,o,T)){var A=r._displayOriginX,P=r._displayOriginY,O=r.pathData,D=O.length-1,L=O[0]-A,I=O[1]-P;S.beginPath(),S.moveTo(L,I),r.closePath||(D-=2);for(var B=2;B<D;B+=2){var N=O[B]-A,G=O[B+1]-P;S.lineTo(N,G)}S.closePath(),r.isFilled&&(a(S,r),S.fill()),r.isStroked&&(h(S,r),S.stroke()),S.restore()}}},function(t,r,o){var a=o(1),h=o(1);a=o(1107),h=o(1108),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r,o){var a=o(19),h=o(12);t.exports=function GridWebGLRenderer(t,r,o,d){o.addToRenderList(r);var T=t.pipelines.set(r.pipeline),S=a(r,o,d);T.calcMatrix.copyFrom(S.calc).translate(-r._displayOriginX,-r._displayOriginY);var A,P,O=o.alpha*r.alpha,D=r.width,L=r.height,I=r.cellWidth,B=r.cellHeight,N=Math.ceil(D/I),G=Math.ceil(L/B),Y=I,X=B,U=I-(N*I-D),z=B-(G*B-L),V=r.showCells,W=r.showAltCells,H=r.showOutline,q=0,Z=0,K=0,J=0,Q=0;if(H&&(Y--,X--,U===I&&U--,z===B&&z--),t.pipelines.preBatch(r),V&&r.fillAlpha>0)for(A=T.fillTint,P=h.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*O),A.TL=P,A.TR=P,A.BL=P,A.BR=P,Z=0;Z<G;Z++)for(W&&(K=Z%2),q=0;q<N;q++)W&&K?K=0:(K++,J=q<N-1?Y:U,Q=Z<G-1?X:z,T.batchFillRect(q*I,Z*B,J,Q));if(W&&r.altFillAlpha>0)for(A=T.fillTint,P=h.getTintAppendFloatAlpha(r.altFillColor,r.altFillAlpha*O),A.TL=P,A.TR=P,A.BL=P,A.BR=P,Z=0;Z<G;Z++)for(W&&(K=Z%2),q=0;q<N;q++)!W||K?(K=0,J=q<N-1?Y:U,Q=Z<G-1?X:z,T.batchFillRect(q*I,Z*B,J,Q)):K=1;if(H&&r.outlineFillAlpha>0){var $=T.strokeTint,tt=h.getTintAppendFloatAlpha(r.outlineFillColor,r.outlineFillAlpha*O);for($.TL=tt,$.TR=tt,$.BL=tt,$.BR=tt,q=1;q<N;q++){var et=q*I;T.batchLine(et,0,et,L,1,1,1,0,!1)}for(Z=1;Z<G;Z++){var it=Z*B;T.batchLine(0,it,D,it,1,1,1,0,!1)}}t.pipelines.postBatch(r)}},function(t,r,o){var a=o(48),h=o(60),d=o(30);t.exports=function GridCanvasRenderer(t,r,o,T){o.addToRenderList(r);var S=t.currentContext;if(d(t,S,r,o,T)){var A=-r._displayOriginX,P=-r._displayOriginY,O=o.alpha*r.alpha,D=r.width,L=r.height,I=r.cellWidth,B=r.cellHeight,N=Math.ceil(D/I),G=Math.ceil(L/B),Y=I,X=B,U=I-(N*I-D),z=B-(G*B-L),V=r.showCells,W=r.showAltCells,H=r.showOutline,q=0,Z=0,K=0,J=0,Q=0;if(H&&(Y--,X--,U===I&&U--,z===B&&z--),V&&r.fillAlpha>0)for(a(S,r),Z=0;Z<G;Z++)for(W&&(K=Z%2),q=0;q<N;q++)W&&K?K=0:(K++,J=q<N-1?Y:U,Q=Z<G-1?X:z,S.fillRect(A+q*I,P+Z*B,J,Q));if(W&&r.altFillAlpha>0)for(a(S,r,r.altFillColor,r.altFillAlpha*O),Z=0;Z<G;Z++)for(W&&(K=Z%2),q=0;q<N;q++)!W||K?(K=0,J=q<N-1?Y:U,Q=Z<G-1?X:z,S.fillRect(A+q*I,P+Z*B,J,Q)):K=1;if(H&&r.outlineFillAlpha>0){for(h(S,r,r.outlineFillColor,r.outlineFillAlpha*O),q=1;q<N;q++){var $=q*I;S.beginPath(),S.moveTo($+A,P),S.lineTo($+A,L+P),S.stroke()}for(Z=1;Z<G;Z++){var tt=Z*B;S.beginPath(),S.moveTo(A,tt+P),S.lineTo(A+D,tt+P),S.stroke()}}S.restore()}}},function(t,r,o){var a=o(1),h=o(1);a=o(1110),h=o(1111),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r,o){var a=o(19),h=o(12);t.exports=function IsoBoxWebGLRenderer(t,r,o,d){o.addToRenderList(r);var T,S,A,P,O,D,L,I,B,N=t.pipelines.set(r.pipeline),G=a(r,o,d),Y=N.calcMatrix.copyFrom(G.calc),X=r.width,U=r.height,z=X/2,V=X/r.projection,W=o.alpha*r.alpha;r.isFilled&&(t.pipelines.preBatch(r),r.showTop&&(T=h.getTintAppendFloatAlpha(r.fillTop,W),S=Y.getX(-z,-U),A=Y.getY(-z,-U),P=Y.getX(0,-V-U),O=Y.getY(0,-V-U),D=Y.getX(z,-U),L=Y.getY(z,-U),I=Y.getX(0,V-U),B=Y.getY(0,V-U),N.batchQuad(r,S,A,P,O,D,L,I,B,0,0,1,1,T,T,T,T,2)),r.showLeft&&(T=h.getTintAppendFloatAlpha(r.fillLeft,W),S=Y.getX(-z,0),A=Y.getY(-z,0),P=Y.getX(0,V),O=Y.getY(0,V),D=Y.getX(0,V-U),L=Y.getY(0,V-U),I=Y.getX(-z,-U),B=Y.getY(-z,-U),N.batchQuad(r,S,A,P,O,D,L,I,B,0,0,1,1,T,T,T,T,2)),r.showRight&&(T=h.getTintAppendFloatAlpha(r.fillRight,W),S=Y.getX(z,0),A=Y.getY(z,0),P=Y.getX(0,V),O=Y.getY(0,V),D=Y.getX(0,V-U),L=Y.getY(0,V-U),I=Y.getX(z,-U),B=Y.getY(z,-U),N.batchQuad(r,S,A,P,O,D,L,I,B,0,0,1,1,T,T,T,T,2)),t.pipelines.postBatch(r))}},function(t,r,o){var a=o(48),h=o(30);t.exports=function IsoBoxCanvasRenderer(t,r,o,d){o.addToRenderList(r);var T=t.currentContext;if(h(t,T,r,o,d)&&r.isFilled){var S=r.width,A=r.height,P=S/2,O=S/r.projection;r.showTop&&(a(T,r,r.fillTop),T.beginPath(),T.moveTo(-P,-A),T.lineTo(0,-O-A),T.lineTo(P,-A),T.lineTo(P,-1),T.lineTo(0,O-1),T.lineTo(-P,-1),T.lineTo(-P,-A),T.fill()),r.showLeft&&(a(T,r,r.fillLeft),T.beginPath(),T.moveTo(-P,0),T.lineTo(0,O),T.lineTo(0,O-A),T.lineTo(-P,-A),T.lineTo(-P,0),T.fill()),r.showRight&&(a(T,r,r.fillRight),T.beginPath(),T.moveTo(P,0),T.lineTo(0,O),T.lineTo(0,O-A),T.lineTo(P,-A),T.lineTo(P,0),T.fill()),T.restore()}}},function(t,r,o){var a=o(1),h=o(1);a=o(1113),h=o(1114),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r,o){var a=o(19),h=o(12);t.exports=function IsoTriangleWebGLRenderer(t,r,o,d){o.addToRenderList(r);var T=t.pipelines.set(r.pipeline),S=a(r,o,d),A=T.calcMatrix.copyFrom(S.calc),P=r.width,O=r.height,D=P/2,L=P/r.projection,I=r.isReversed,B=o.alpha*r.alpha;if(r.isFilled){var N,G,Y,X,U,z,V;if(t.pipelines.preBatch(r),r.showTop&&I){N=h.getTintAppendFloatAlpha(r.fillTop,B),G=A.getX(-D,-O),Y=A.getY(-D,-O),X=A.getX(0,-L-O),U=A.getY(0,-L-O),z=A.getX(D,-O),V=A.getY(D,-O);var W=A.getX(0,L-O),H=A.getY(0,L-O);T.batchQuad(r,G,Y,X,U,z,V,W,H,0,0,1,1,N,N,N,N,2)}r.showLeft&&(N=h.getTintAppendFloatAlpha(r.fillLeft,B),I?(G=A.getX(-D,-O),Y=A.getY(-D,-O),X=A.getX(0,L),U=A.getY(0,L),z=A.getX(0,L-O),V=A.getY(0,L-O)):(G=A.getX(-D,0),Y=A.getY(-D,0),X=A.getX(0,L),U=A.getY(0,L),z=A.getX(0,L-O),V=A.getY(0,L-O)),T.batchTri(r,G,Y,X,U,z,V,0,0,1,1,N,N,N,2)),r.showRight&&(N=h.getTintAppendFloatAlpha(r.fillRight,B),I?(G=A.getX(D,-O),Y=A.getY(D,-O),X=A.getX(0,L),U=A.getY(0,L),z=A.getX(0,L-O),V=A.getY(0,L-O)):(G=A.getX(D,0),Y=A.getY(D,0),X=A.getX(0,L),U=A.getY(0,L),z=A.getX(0,L-O),V=A.getY(0,L-O)),T.batchTri(r,G,Y,X,U,z,V,0,0,1,1,N,N,N,2)),t.pipelines.postBatch(r)}}},function(t,r,o){var a=o(48),h=o(30);t.exports=function IsoTriangleCanvasRenderer(t,r,o,d){o.addToRenderList(r);var T=t.currentContext;if(h(t,T,r,o,d)&&r.isFilled){var S=r.width,A=r.height,P=S/2,O=S/r.projection,D=r.isReversed;r.showTop&&D&&(a(T,r,r.fillTop),T.beginPath(),T.moveTo(-P,-A),T.lineTo(0,-O-A),T.lineTo(P,-A),T.lineTo(0,O-A),T.fill()),r.showLeft&&(a(T,r,r.fillLeft),T.beginPath(),D?(T.moveTo(-P,-A),T.lineTo(0,O),T.lineTo(0,O-A)):(T.moveTo(-P,0),T.lineTo(0,O),T.lineTo(0,O-A)),T.fill()),r.showRight&&(a(T,r,r.fillRight),T.beginPath(),D?(T.moveTo(P,-A),T.lineTo(0,O),T.lineTo(0,O-A)):(T.moveTo(P,0),T.lineTo(0,O),T.lineTo(0,O-A)),T.fill()),T.restore()}}},function(t,r,o){var a=o(1),h=o(1);a=o(1116),h=o(1117),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r,o){var a=o(19),h=o(12);t.exports=function LineWebGLRenderer(t,r,o,d){o.addToRenderList(r);var T=t.pipelines.set(r.pipeline),S=a(r,o,d);T.calcMatrix.copyFrom(S.calc);var A=r._displayOriginX,P=r._displayOriginY,O=o.alpha*r.alpha;if(t.pipelines.preBatch(r),r.isStroked){var D=T.strokeTint,L=h.getTintAppendFloatAlpha(r.strokeColor,r.strokeAlpha*O);D.TL=L,D.TR=L,D.BL=L,D.BR=L;var I=r._startWidth,B=r._endWidth;T.batchLine(r.geom.x1-A,r.geom.y1-P,r.geom.x2-A,r.geom.y2-P,I,B,1,0,!1,S.sprite,S.camera)}t.pipelines.postBatch(r)}},function(t,r,o){var a=o(60),h=o(30);t.exports=function LineCanvasRenderer(t,r,o,d){o.addToRenderList(r);var T=t.currentContext;if(h(t,T,r,o,d)){var S=r._displayOriginX,A=r._displayOriginY;r.isStroked&&(a(T,r),T.beginPath(),T.moveTo(r.geom.x1-S,r.geom.y1-A),T.lineTo(r.geom.x2-S,r.geom.y2-A),T.stroke()),T.restore()}}},function(t,r,o){var a=o(1),h=o(1);a=o(1119),h=o(1120),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r,o){var a=o(114),h=o(19),d=o(81);t.exports=function PolygonWebGLRenderer(t,r,o,T){o.addToRenderList(r);var S=t.pipelines.set(r.pipeline),A=h(r,o,T),P=S.calcMatrix.copyFrom(A.calc),O=r._displayOriginX,D=r._displayOriginY,L=o.alpha*r.alpha;t.pipelines.preBatch(r),r.isFilled&&a(S,P,r,L,O,D),r.isStroked&&d(S,r,L,O,D),t.pipelines.postBatch(r)}},function(t,r,o){var a=o(48),h=o(60),d=o(30);t.exports=function PolygonCanvasRenderer(t,r,o,T){o.addToRenderList(r);var S=t.currentContext;if(d(t,S,r,o,T)){var A=r._displayOriginX,P=r._displayOriginY,O=r.pathData,D=O.length-1,L=O[0]-A,I=O[1]-P;S.beginPath(),S.moveTo(L,I),r.closePath||(D-=2);for(var B=2;B<D;B+=2){var N=O[B]-A,G=O[B+1]-P;S.lineTo(N,G)}S.closePath(),r.isFilled&&(a(S,r),S.fill()),r.isStroked&&(h(S,r),S.stroke()),S.restore()}}},function(t,r,o){var a=o(1),h=o(1);a=o(1122),h=o(1123),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r,o){var a=o(19),h=o(81),d=o(12);t.exports=function RectangleWebGLRenderer(t,r,o,T){o.addToRenderList(r);var S=t.pipelines.set(r.pipeline),A=a(r,o,T);S.calcMatrix.copyFrom(A.calc);var P=r._displayOriginX,O=r._displayOriginY,D=o.alpha*r.alpha;if(t.pipelines.preBatch(r),r.isFilled){var L=S.fillTint,I=d.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*D);L.TL=I,L.TR=I,L.BL=I,L.BR=I,S.batchFillRect(-P,-O,r.width,r.height)}r.isStroked&&h(S,r,D,P,O),t.pipelines.postBatch(r)}},function(t,r,o){var a=o(48),h=o(60),d=o(30);t.exports=function RectangleCanvasRenderer(t,r,o,T){o.addToRenderList(r);var S=t.currentContext;if(d(t,S,r,o,T)){var A=r._displayOriginX,P=r._displayOriginY;r.isFilled&&(a(S,r),S.fillRect(-A,-P,r.width,r.height)),r.isStroked&&(h(S,r),S.beginPath(),S.rect(-A,-P,r.width,r.height),S.stroke()),S.restore()}}},function(t,r,o){var a=o(1),h=o(1);a=o(1125),h=o(1126),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r,o){var a=o(114),h=o(19),d=o(81);t.exports=function StarWebGLRenderer(t,r,o,T){o.addToRenderList(r);var S=t.pipelines.set(r.pipeline),A=h(r,o,T),P=S.calcMatrix.copyFrom(A.calc),O=r._displayOriginX,D=r._displayOriginY,L=o.alpha*r.alpha;t.pipelines.preBatch(r),r.isFilled&&a(S,P,r,L,O,D),r.isStroked&&d(S,r,L,O,D),t.pipelines.postBatch(r)}},function(t,r,o){var a=o(48),h=o(60),d=o(30);t.exports=function StarCanvasRenderer(t,r,o,T){o.addToRenderList(r);var S=t.currentContext;if(d(t,S,r,o,T)){var A=r._displayOriginX,P=r._displayOriginY,O=r.pathData,D=O.length-1,L=O[0]-A,I=O[1]-P;S.beginPath(),S.moveTo(L,I),r.closePath||(D-=2);for(var B=2;B<D;B+=2){var N=O[B]-A,G=O[B+1]-P;S.lineTo(N,G)}S.closePath(),r.isFilled&&(a(S,r),S.fill()),r.isStroked&&(h(S,r),S.stroke()),S.restore()}}},function(t,r,o){var a=o(1),h=o(1);a=o(1128),h=o(1129),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r,o){var a=o(19),h=o(81),d=o(12);t.exports=function TriangleWebGLRenderer(t,r,o,T){o.addToRenderList(r);var S=t.pipelines.set(r.pipeline),A=a(r,o,T);S.calcMatrix.copyFrom(A.calc);var P=r._displayOriginX,O=r._displayOriginY,D=o.alpha*r.alpha;if(t.pipelines.preBatch(r),r.isFilled){var L=S.fillTint,I=d.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*D);L.TL=I,L.TR=I,L.BL=I,L.BR=I;var B=r.geom.x1-P,N=r.geom.y1-O,G=r.geom.x2-P,Y=r.geom.y2-O,X=r.geom.x3-P,U=r.geom.y3-O;S.batchFillTriangle(B,N,G,Y,X,U,A.sprite,A.camera)}r.isStroked&&h(S,r,D,P,O),t.pipelines.postBatch(r)}},function(t,r,o){var a=o(48),h=o(60),d=o(30);t.exports=function TriangleCanvasRenderer(t,r,o,T){o.addToRenderList(r);var S=t.currentContext;if(d(t,S,r,o,T)){var A=r._displayOriginX,P=r._displayOriginY,O=r.geom.x1-A,D=r.geom.y1-P,L=r.geom.x2-A,I=r.geom.y2-P,B=r.geom.x3-A,N=r.geom.y3-P;S.beginPath(),S.moveTo(O,D),S.lineTo(L,I),S.lineTo(B,N),S.closePath(),r.isFilled&&(a(S,r),S.fill()),r.isStroked&&(h(S,r),S.stroke()),S.restore()}}},function(t,r,o){var a=o(213);o(5).register("blitter",(function(t,r,o,h){return this.displayList.add(new a(this.scene,t,r,o,h))}))},function(t,r,o){var a=o(214);o(5).register("container",(function(t,r,o){return this.displayList.add(new a(this.scene,t,r,o))}))},function(t,r,o){var a=o(442);o(5).register("dom",(function(t,r,o,h,d){var T=new a(this.scene,t,r,o,h,d);return this.displayList.add(T),T}))},function(t,r,o){var a=o(215);o(5).register("dynamicBitmapText",(function(t,r,o,h,d){return this.displayList.add(new a(this.scene,t,r,o,h,d))}))},function(t,r,o){var a=o(444);o(5).register("extern",(function(){var t=new a(this.scene);return this.displayList.add(t),t}))},function(t,r,o){var a=o(216);o(5).register("graphics",(function(t){return this.displayList.add(new a(this.scene,t))}))},function(t,r,o){var a=o(113);o(5).register("group",(function(t,r){return this.updateList.add(new a(this.scene,t,r))}))},function(t,r,o){var a=o(125);o(5).register("image",(function(t,r,o,h){return this.displayList.add(new a(this.scene,t,r,o,h))}))},function(t,r,o){var a=o(219);o(5).register("layer",(function(t){return this.displayList.add(new a(this.scene,t))}))},function(t,r,o){var a=o(5),h=o(220);a.register("particles",(function(t,r,o){return this.displayList.add(new h(this.scene,t,r,o))}))},function(t,r,o){var a=o(5),h=o(457);a.register("follower",(function(t,r,o,a,d){var T=new h(this.scene,t,r,o,a,d);return this.displayList.add(T),this.updateList.add(T),T}))},function(t,r,o){var a=o(5),h=o(221);a.register("renderTexture",(function(t,r,o,a,d,T){return this.displayList.add(new h(this.scene,t,r,o,a,d,T))}))},function(t,r,o){var a=o(223);o(5).register("rope",(function(t,r,o,h,d,T,S,A){return this.displayList.add(new a(this.scene,t,r,o,h,d,T,S,A))}))},function(t,r,o){var a=o(5),h=o(73);a.register("sprite",(function(t,r,o,a){var d=new h(this.scene,t,r,o,a);return this.displayList.add(d),d}))},function(t,r,o){var a=o(148);o(5).register("bitmapText",(function(t,r,o,h,d,T){return this.displayList.add(new a(this.scene,t,r,o,h,d,T))}))},function(t,r,o){var a=o(224);o(5).register("text",(function(t,r,o,h){return this.displayList.add(new a(this.scene,t,r,o,h))}))},function(t,r,o){var a=o(225);o(5).register("tileSprite",(function(t,r,o,h,d,T){return this.displayList.add(new a(this.scene,t,r,o,h,d,T))}))},function(t,r,o){var a=o(129);o(5).register("zone",(function(t,r,o,h){return this.displayList.add(new a(this.scene,t,r,o,h))}))},function(t,r,o){var a=o(226);o(5).register("video",(function(t,r,o){return this.displayList.add(new a(this.scene,t,r,o))}))},function(t,r,o){var a=o(461),h=o(5);h.register("arc",(function(t,r,o,h,d,T,S,A){return this.displayList.add(new a(this.scene,t,r,o,h,d,T,S,A))})),h.register("circle",(function(t,r,o,h,d){return this.displayList.add(new a(this.scene,t,r,o,0,360,!1,h,d))}))},function(t,r,o){var a=o(5),h=o(462);a.register("curve",(function(t,r,o,a,d){return this.displayList.add(new h(this.scene,t,r,o,a,d))}))},function(t,r,o){var a=o(463);o(5).register("ellipse",(function(t,r,o,h,d,T){return this.displayList.add(new a(this.scene,t,r,o,h,d,T))}))},function(t,r,o){var a=o(5),h=o(464);a.register("grid",(function(t,r,o,a,d,T,S,A,P,O){return this.displayList.add(new h(this.scene,t,r,o,a,d,T,S,A,P,O))}))},function(t,r,o){var a=o(5),h=o(465);a.register("isobox",(function(t,r,o,a,d,T,S){return this.displayList.add(new h(this.scene,t,r,o,a,d,T,S))}))},function(t,r,o){var a=o(5),h=o(466);a.register("isotriangle",(function(t,r,o,a,d,T,S,A){return this.displayList.add(new h(this.scene,t,r,o,a,d,T,S,A))}))},function(t,r,o){var a=o(5),h=o(467);a.register("line",(function(t,r,o,a,d,T,S,A){return this.displayList.add(new h(this.scene,t,r,o,a,d,T,S,A))}))},function(t,r,o){var a=o(5),h=o(468);a.register("polygon",(function(t,r,o,a,d){return this.displayList.add(new h(this.scene,t,r,o,a,d))}))},function(t,r,o){var a=o(5),h=o(473);a.register("rectangle",(function(t,r,o,a,d,T){return this.displayList.add(new h(this.scene,t,r,o,a,d,T))}))},function(t,r,o){var a=o(474);o(5).register("star",(function(t,r,o,h,d,T,S){return this.displayList.add(new a(this.scene,t,r,o,h,d,T,S))}))},function(t,r,o){var a=o(5),h=o(475);a.register("triangle",(function(t,r,o,a,d,T,S,A,P,O){return this.displayList.add(new h(this.scene,t,r,o,a,d,T,S,A,P,O))}))},function(t,r,o){var a=o(213),h=o(28),d=o(16),T=o(13);d.register("blitter",(function(t,r){void 0===t&&(t={});var o=T(t,"key",null),d=T(t,"frame",null),S=new a(this.scene,0,0,o,d);return void 0!==r&&(t.add=r),h(this.scene,S,t),S}))},function(t,r,o){var a=o(28),h=o(214),d=o(16),T=o(13);d.register("container",(function(t,r){void 0===t&&(t={});var o=T(t,"x",0),d=T(t,"y",0),S=T(t,"children",null),A=new h(this.scene,o,d,S);return void 0!==r&&(t.add=r),a(this.scene,A,t),A}))},function(t,r,o){var a=o(215),h=o(28),d=o(16),T=o(13);d.register("dynamicBitmapText",(function(t,r){void 0===t&&(t={});var o=T(t,"font",""),d=T(t,"text",""),S=T(t,"size",!1),A=new a(this.scene,0,0,o,d,S);return void 0!==r&&(t.add=r),h(this.scene,A,t),A}))},function(t,r,o){var a=o(16),h=o(216);a.register("graphics",(function(t,r){void 0===t&&(t={}),void 0!==r&&(t.add=r);var o=new h(this.scene,t);return t.add&&this.scene.sys.displayList.add(o),o}))},function(t,r,o){var a=o(16),h=o(113);a.register("group",(function(t){return new h(this.scene,null,t)}))},function(t,r,o){var a=o(28),h=o(16),d=o(13),T=o(125);h.register("image",(function(t,r){void 0===t&&(t={});var o=d(t,"key",null),h=d(t,"frame",null),S=new T(this.scene,0,0,o,h);return void 0!==r&&(t.add=r),a(this.scene,S,t),S}))},function(t,r,o){var a=o(28),h=o(219),d=o(16),T=o(13);d.register("layer",(function(t,r){void 0===t&&(t={});var o=T(t,"children",null),d=new h(this.scene,o);return void 0!==r&&(t.add=r),a(this.scene,d,t),d}))},function(t,r,o){var a=o(16),h=o(13),d=o(2),T=o(220);a.register("particles",(function(t,r){void 0===t&&(t={});var o=h(t,"key",null),a=h(t,"frame",null),S=d(t,"emitters",null),A=new T(this.scene,o,a,S);return void 0!==r&&(t.add=r),d(t,"add",!1)?this.displayList.add(A):this.updateList.add(A),A}))},function(t,r,o){var a=o(28),h=o(16),d=o(13),T=o(221);h.register("renderTexture",(function(t,r){void 0===t&&(t={});var o=d(t,"x",0),h=d(t,"y",0),S=d(t,"width",32),A=d(t,"height",32),P=d(t,"key",void 0),O=d(t,"frame",void 0),D=new T(this.scene,o,h,S,A,P,O);return void 0!==r&&(t.add=r),a(this.scene,D,t),D}))},function(t,r,o){var a=o(28),h=o(16),d=o(13),T=o(6),S=o(223);h.register("rope",(function(t,r){void 0===t&&(t={});var o=d(t,"key",null),h=d(t,"frame",null),A=d(t,"horizontal",!0),P=T(t,"points",void 0),O=T(t,"colors",void 0),D=T(t,"alphas",void 0),L=new S(this.scene,0,0,o,h,P,A,O,D);return void 0!==r&&(t.add=r),a(this.scene,L,t),t.add||this.updateList.add(L),L}))},function(t,r,o){var a=o(28),h=o(439),d=o(16),T=o(13),S=o(73);d.register("sprite",(function(t,r){void 0===t&&(t={});var o=T(t,"key",null),d=T(t,"frame",null),A=new S(this.scene,0,0,o,d);return void 0!==r&&(t.add=r),a(this.scene,A,t),h(A,t),A}))},function(t,r,o){var a=o(148),h=o(28),d=o(16),T=o(13),S=o(6);d.register("bitmapText",(function(t,r){void 0===t&&(t={});var o=S(t,"font",""),d=T(t,"text",""),A=T(t,"size",!1),P=S(t,"align",0),O=new a(this.scene,0,0,o,d,A,P);return void 0!==r&&(t.add=r),h(this.scene,O,t),O}))},function(t,r,o){var a=o(28),h=o(16),d=o(13),T=o(224);h.register("text",(function(t,r){void 0===t&&(t={});var o=d(t,"text",""),h=d(t,"style",null),S=d(t,"padding",null);null!==S&&(h.padding=S);var A=new T(this.scene,0,0,o,h);return void 0!==r&&(t.add=r),a(this.scene,A,t),A.autoRound=d(t,"autoRound",!0),A.resolution=d(t,"resolution",1),A}))},function(t,r,o){var a=o(28),h=o(16),d=o(13),T=o(225);h.register("tileSprite",(function(t,r){void 0===t&&(t={});var o=d(t,"x",0),h=d(t,"y",0),S=d(t,"width",512),A=d(t,"height",512),P=d(t,"key",""),O=d(t,"frame",""),D=new T(this.scene,o,h,S,A,P,O);return void 0!==r&&(t.add=r),a(this.scene,D,t),D}))},function(t,r,o){var a=o(16),h=o(13),d=o(129);a.register("zone",(function(t){var r=h(t,"x",0),o=h(t,"y",0),a=h(t,"width",1),T=h(t,"height",a);return new d(this.scene,r,o,a,T)}))},function(t,r,o){var a=o(28),h=o(16),d=o(13),T=o(226);h.register("video",(function(t,r){void 0===t&&(t={});var o=d(t,"key",null),h=new T(this.scene,0,0,o);return void 0!==r&&(t.add=r),a(this.scene,h,t),t.add||this.updateList.add(h),h}))},function(t,r,o){var a=o(1),h=o(1);a=o(1177),h=o(1178),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r,o){var a=o(19);t.exports=function ShaderWebGLRenderer(t,r,o,h){if(r.shader){if(o.addToRenderList(r),t.pipelines.clear(),r.renderToTexture)r.load(),r.flush();else{var d=a(r,o,h).calc;t.width===r._rendererWidth&&t.height===r._rendererHeight||r.projOrtho(0,t.width,t.height,0),r.load(d.matrix),r.flush()}t.pipelines.rebind()}}},function(t,r){t.exports=function ShaderCanvasRenderer(){}},function(t,r,o){var a=o(1),h=o(1);a=o(1180),h=o(1181),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r,o){var a=o(19);t.exports=function MeshWebGLRenderer(t,r,o,h){var d=r.faces,T=d.length;if(0!==T){o.addToRenderList(r);var S=t.pipelines.set(r.pipeline,r),A=a(r,o,h).calc,P=S.setGameObject(r),O=S.vertexViewF32,D=S.vertexViewU32,L=S.vertexCount*S.currentShader.vertexComponentCount-1,I=r.tintFill,B=[],N=r.debugCallback,G=A.a,Y=A.b,X=A.c,U=A.d,z=A.e,V=A.f,W=r.viewPosition.z,H=r.hideCCW,q=o.roundPixels,Z=o.alpha*r.alpha,K=0;t.pipelines.preBatch(r);for(var J=0;J<T;J++){var Q=d[J];Q.isInView(o,H,W,Z,G,Y,X,U,z,V,q)&&(S.shouldFlush(3)&&(S.flush(),L=0),L=Q.load(O,D,L,P,I),K++,S.vertexCount+=3,N&&B.push(Q))}r.totalFrame+=K,N&&N.call(r,r,B),t.pipelines.postBatch(r)}}},function(t,r){t.exports=function MeshCanvasRenderer(){}},function(t,r,o){var a=o(1),h=o(1);a=o(1183),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r,o){var a=o(19);t.exports=function PointLightWebGLRenderer(t,r,o,h){o.addToRenderList(r);var d=t.pipelines.set(r.pipeline),T=a(r,o,h).calc,S=r.width,A=r.height,P=-r._radius,O=-r._radius,D=P+S,L=O+A,I=T.getX(0,0),B=T.getY(0,0),N=T.getX(P,O),G=T.getY(P,O),Y=T.getX(P,L),X=T.getY(P,L),U=T.getX(D,L),z=T.getY(D,L),V=T.getX(D,O),W=T.getY(D,O);t.pipelines.preBatch(r),d.batchPointLight(r,o,N,G,Y,X,U,z,V,W,I,B),t.pipelines.postBatch(r)}},function(t,r,o){var a=o(229);o(5).register("shader",(function(t,r,o,h,d,T,S){return this.displayList.add(new a(this.scene,t,r,o,h,d,T,S))}))},function(t,r,o){var a=o(230);o(5).register("mesh",(function(t,r,o,h,d,T,S,A,P,O,D){return this.displayList.add(new a(this.scene,t,r,o,h,d,T,S,A,P,O,D))}))},function(t,r,o){var a=o(5),h=o(150);a.register("pointlight",(function(t,r,o,a,d,T){return this.displayList.add(new h(this.scene,t,r,o,a,d,T))}))},function(t,r,o){var a=o(28),h=o(16),d=o(13),T=o(229);h.register("shader",(function(t,r){void 0===t&&(t={});var o=d(t,"key",null),h=d(t,"x",0),S=d(t,"y",0),A=d(t,"width",128),P=d(t,"height",128),O=new T(this.scene,o,h,S,A,P);return void 0!==r&&(t.add=r),a(this.scene,O,t),O}))},function(t,r,o){var a=o(28),h=o(16),d=o(13),T=o(6),S=o(230);h.register("mesh",(function(t,r){void 0===t&&(t={});var o=d(t,"key",null),h=d(t,"frame",null),A=T(t,"vertices",[]),P=T(t,"uvs",[]),O=T(t,"indicies",[]),D=T(t,"containsZ",!1),L=T(t,"normals",[]),I=T(t,"colors",16777215),B=T(t,"alphas",1),N=new S(this.scene,0,0,o,h,A,P,O,D,L,I,B);return void 0!==r&&(t.add=r),a(this.scene,N,t),N}))},function(t,r,o){var a=o(28),h=o(16),d=o(13),T=o(150);h.register("pointlight",(function(t,r){void 0===t&&(t={});var o=d(t,"color",16777215),h=d(t,"radius",128),S=d(t,"intensity",1),A=d(t,"attenuation",.1),P=new T(this.scene,0,0,o,h,S,A);return void 0!==r&&(t.add=r),a(this.scene,P,t),P}))},function(t,r,o){var a=o(0),h=o(482),d=o(24),T=o(20),S=new a({Extends:h,initialize:function LightsPlugin(t){this.scene=t,this.systems=t.sys,t.sys.settings.isBooted||t.sys.events.once(T.BOOT,this.boot,this),h.call(this)},boot:function boot(){var t=this.systems.events;t.on(T.SHUTDOWN,this.shutdown,this),t.on(T.DESTROY,this.destroy,this)},destroy:function destroy(){this.shutdown(),this.scene=void 0,this.systems=void 0}});d.register("LightsPlugin",S,"lights"),t.exports=S},function(t,r,o){var a=o(65);a.Area=o(1192),a.Circumference=o(302),a.CircumferencePoint=o(169),a.Clone=o(1193),a.Contains=o(66),a.ContainsPoint=o(1194),a.ContainsRect=o(1195),a.CopyFrom=o(1196),a.Equals=o(1197),a.GetBounds=o(1198),a.GetPoint=o(300),a.GetPoints=o(301),a.Offset=o(1199),a.OffsetPoint=o(1200),a.Random=o(170),t.exports=a},function(t,r){t.exports=function Area(t){return t.radius>0?Math.PI*t.radius*t.radius:0}},function(t,r,o){var a=o(65);t.exports=function Clone(t){return new a(t.x,t.y,t.radius)}},function(t,r,o){var a=o(66);t.exports=function ContainsPoint(t,r){return a(t,r.x,r.y)}},function(t,r,o){var a=o(66);t.exports=function ContainsRect(t,r){return a(t,r.x,r.y)&&a(t,r.right,r.y)&&a(t,r.x,r.bottom)&&a(t,r.right,r.bottom)}},function(t,r){t.exports=function CopyFrom(t,r){return r.setTo(t.x,t.y,t.radius)}},function(t,r){t.exports=function Equals(t,r){return t.x===r.x&&t.y===r.y&&t.radius===r.radius}},function(t,r,o){var a=o(10);t.exports=function GetBounds(t,r){return void 0===r&&(r=new a),r.x=t.left,r.y=t.top,r.width=t.diameter,r.height=t.diameter,r}},function(t,r){t.exports=function Offset(t,r,o){return t.x+=r,t.y+=o,t}},function(t,r){t.exports=function OffsetPoint(t,r){return t.x+=r.x,t.y+=r.y,t}},function(t,r,o){var a=o(111);a.Area=o(1202),a.Circumference=o(447),a.CircumferencePoint=o(218),a.Clone=o(1203),a.Contains=o(112),a.ContainsPoint=o(1204),a.ContainsRect=o(1205),a.CopyFrom=o(1206),a.Equals=o(1207),a.GetBounds=o(1208),a.GetPoint=o(445),a.GetPoints=o(446),a.Offset=o(1209),a.OffsetPoint=o(1210),a.Random=o(180),t.exports=a},function(t,r){t.exports=function Area(t){return t.isEmpty()?0:t.getMajorRadius()*t.getMinorRadius()*Math.PI}},function(t,r,o){var a=o(111);t.exports=function Clone(t){return new a(t.x,t.y,t.width,t.height)}},function(t,r,o){var a=o(112);t.exports=function ContainsPoint(t,r){return a(t,r.x,r.y)}},function(t,r,o){var a=o(112);t.exports=function ContainsRect(t,r){return a(t,r.x,r.y)&&a(t,r.right,r.y)&&a(t,r.x,r.bottom)&&a(t,r.right,r.bottom)}},function(t,r){t.exports=function CopyFrom(t,r){return r.setTo(t.x,t.y,t.width,t.height)}},function(t,r){t.exports=function Equals(t,r){return t.x===r.x&&t.y===r.y&&t.width===r.width&&t.height===r.height}},function(t,r,o){var a=o(10);t.exports=function GetBounds(t,r){return void 0===r&&(r=new a),r.x=t.left,r.y=t.top,r.width=t.width,r.height=t.height,r}},function(t,r){t.exports=function Offset(t,r,o){return t.x+=r,t.y+=o,t}},function(t,r){t.exports=function OffsetPoint(t,r){return t.x+=r.x,t.y+=r.y,t}},function(t,r,o){var a=o(4),h=o(231);t.exports=function GetCircleToCircle(t,r,o){if(void 0===o&&(o=[]),h(t,r)){var d,T,S,A,P=t.x,O=t.y,D=t.radius,L=r.x,I=r.y,B=r.radius;if(O===I)0==(S=(T=-2*I)*T-4*(d=1)*(L*L+(A=(B*B-D*D-L*L+P*P)/(2*(P-L)))*A-2*L*A+I*I-B*B))?o.push(new a(A,-T/(2*d))):S>0&&(o.push(new a(A,(-T+Math.sqrt(S))/(2*d))),o.push(new a(A,(-T-Math.sqrt(S))/(2*d))));else{var N=(P-L)/(O-I),G=(B*B-D*D-L*L+P*P-I*I+O*O)/(2*(O-I));0==(S=(T=2*O*N-2*G*N-2*P)*T-4*(d=N*N+1)*(P*P+O*O+G*G-D*D-2*O*G))?(A=-T/(2*d),o.push(new a(A,G-A*N))):S>0&&(A=(-T+Math.sqrt(S))/(2*d),o.push(new a(A,G-A*N)),A=(-T-Math.sqrt(S))/(2*d),o.push(new a(A,G-A*N)))}}return o}},function(t,r,o){var a=o(232),h=o(151);t.exports=function GetCircleToRectangle(t,r,o){if(void 0===o&&(o=[]),h(t,r)){var d=r.getLineA(),T=r.getLineB(),S=r.getLineC(),A=r.getLineD();a(d,t,o),a(T,t,o),a(S,t,o),a(A,t,o)}return o}},function(t,r,o){var a=o(140),h=o(487),d=new(o(47));function CheckIntersects(t,r,o,T,S){var A=Math.cos(t),P=Math.sin(t);d.setTo(r,o,r+A,o+P);var O=h(d,T);O&&S.push(new a(O.x,O.y,t,O.w))}function SortIntersects(t,r){return t.z-r.z}t.exports=function GetRaysFromPointToPolygon(t,r,o){Array.isArray(o)||(o=[o]);for(var a=[],h=[],d=0;d<o.length;d++)for(var T=o[d].points,S=0;S<T.length;S++){var A=Math.atan2(T[S].y-r,T[S].x-t);-1===h.indexOf(A)&&(CheckIntersects(A,t,r,o,a),CheckIntersects(A-1e-5,t,r,o,a),CheckIntersects(A+1e-5,t,r,o,a),h.push(A))}return a.sort(SortIntersects)}},function(t,r,o){var a=o(10),h=o(152);t.exports=function GetRectangleIntersection(t,r,o){return void 0===o&&(o=new a),h(t,r)&&(o.x=Math.max(t.x,r.x),o.y=Math.max(t.y,r.y),o.width=Math.min(t.right,r.right)-o.x,o.height=Math.min(t.bottom,r.bottom)-o.y),o}},function(t,r,o){var a=o(234),h=o(152);t.exports=function GetRectangleToRectangle(t,r,o){if(void 0===o&&(o=[]),h(t,r)){var d=t.getLineA(),T=t.getLineB(),S=t.getLineC(),A=t.getLineD();a(d,r,o),a(T,r,o),a(S,r,o),a(A,r,o)}return o}},function(t,r,o){var a=o(489),h=o(234);t.exports=function GetRectangleToTriangle(t,r,o){if(void 0===o&&(o=[]),a(t,r)){var d=r.getLineA(),T=r.getLineB(),S=r.getLineC();h(d,t,o),h(T,t,o),h(S,t,o)}return o}},function(t,r,o){var a=o(232),h=o(491);t.exports=function GetTriangleToCircle(t,r,o){if(void 0===o&&(o=[]),h(t,r)){var d=t.getLineA(),T=t.getLineB(),S=t.getLineC();a(d,r,o),a(T,r,o),a(S,r,o)}return o}},function(t,r,o){var a=o(494),h=o(492);t.exports=function GetTriangleToTriangle(t,r,o){if(void 0===o&&(o=[]),a(t,r)){var d=r.getLineA(),T=r.getLineB(),S=r.getLineC();h(t,d,o),h(t,T,o),h(t,S,o)}return o}},function(t,r,o){var a=o(496);t.exports=function PointToLineSegment(t,r){if(!a(t,r))return!1;var o=Math.min(r.x1,r.x2),h=Math.max(r.x1,r.x2),d=Math.min(r.y1,r.y2),T=Math.max(r.y1,r.y2);return t.x>=o&&t.x<=h&&t.y>=d&&t.y<=T}},function(t,r){t.exports=function RectangleToValues(t,r,o,a,h,d){return void 0===d&&(d=0),!(r>t.right+d||o<t.left-d||a>t.bottom+d||h<t.top-d)}},function(t,r,o){var a=o(47);a.Angle=o(97),a.BresenhamPoints=o(317),a.CenterOn=o(1222),a.Clone=o(1223),a.CopyFrom=o(1224),a.Equals=o(1225),a.Extend=o(1226),a.GetEasedPoints=o(1227),a.GetMidPoint=o(1228),a.GetNearestPoint=o(1229),a.GetNormal=o(1230),a.GetPoint=o(307),a.GetPoints=o(172),a.GetShortestDistance=o(1231),a.Height=o(1232),a.Length=o(67),a.NormalAngle=o(497),a.NormalX=o(1233),a.NormalY=o(1234),a.Offset=o(1235),a.PerpSlope=o(1236),a.Random=o(173),a.ReflectAngle=o(1237),a.Rotate=o(1238),a.RotateAroundPoint=o(1239),a.RotateAroundXY=o(236),a.SetToAngle=o(1240),a.Slope=o(1241),a.Width=o(1242),t.exports=a},function(t,r){t.exports=function CenterOn(t,r,o){var a=r-(t.x1+t.x2)/2,h=o-(t.y1+t.y2)/2;return t.x1+=a,t.y1+=h,t.x2+=a,t.y2+=h,t}},function(t,r,o){var a=o(47);t.exports=function Clone(t){return new a(t.x1,t.y1,t.x2,t.y2)}},function(t,r){t.exports=function CopyFrom(t,r){return r.setTo(t.x1,t.y1,t.x2,t.y2)}},function(t,r){t.exports=function Equals(t,r){return t.x1===r.x1&&t.y1===r.y1&&t.x2===r.x2&&t.y2===r.y2}},function(t,r,o){var a=o(67);t.exports=function Extend(t,r,o){void 0===o&&(o=r);var h=a(t),d=t.x2-t.x1,T=t.y2-t.y1;return r&&(t.x1=t.x1-d/h*r,t.y1=t.y1-T/h*r),o&&(t.x2=t.x2+d/h*o,t.y2=t.y2+T/h*o),t}},function(t,r,o){var a=o(352),h=o(80),d=o(4);t.exports=function GetEasedPoints(t,r,o,T,S){void 0===T&&(T=0),void 0===S&&(S=[]);var A,P,O=[],D=t.x1,L=t.y1,I=t.x2-D,B=t.y2-L,N=h(r,S),G=o-1;for(A=0;A<G;A++)P=N(A/G),O.push(new d(D+I*P,L+B*P));if(P=N(1),O.push(new d(D+I*P,L+B*P)),T>0){var Y=O[0],X=[Y];for(A=1;A<O.length-1;A++){var U=O[A];a(Y,U)>=T&&(X.push(U),Y=U)}var z=O[O.length-1];return a(Y,z)<T&&X.pop(),X.push(z),X}return O}},function(t,r,o){var a=o(4);t.exports=function GetMidPoint(t,r){return void 0===r&&(r=new a),r.x=(t.x1+t.x2)/2,r.y=(t.y1+t.y2)/2,r}},function(t,r,o){var a=o(4);t.exports=function GetNearestPoint(t,r,o){void 0===o&&(o=new a);var h=t.x1,d=t.y1,T=t.x2,S=t.y2,A=(T-h)*(T-h)+(S-d)*(S-d);if(0===A)return o;var P=((r.x-h)*(T-h)+(r.y-d)*(S-d))/A;return o.x=h+P*(T-h),o.y=d+P*(S-d),o}},function(t,r,o){var a=o(14),h=o(97),d=o(4);t.exports=function GetNormal(t,r){void 0===r&&(r=new d);var o=h(t)-a.TAU;return r.x=Math.cos(o),r.y=Math.sin(o),r}},function(t,r){t.exports=function GetShortestDistance(t,r){var o=t.x1,a=t.y1,h=t.x2,d=t.y2,T=(h-o)*(h-o)+(d-a)*(d-a);if(0===T)return!1;var S=((a-r.y)*(h-o)-(o-r.x)*(d-a))/T;return Math.abs(S)*Math.sqrt(T)}},function(t,r){t.exports=function Height(t){return Math.abs(t.y1-t.y2)}},function(t,r,o){var a=o(14),h=o(97);t.exports=function NormalX(t){return Math.cos(h(t)-a.TAU)}},function(t,r,o){var a=o(14),h=o(97);t.exports=function NormalY(t){return Math.sin(h(t)-a.TAU)}},function(t,r){t.exports=function Offset(t,r,o){return t.x1+=r,t.y1+=o,t.x2+=r,t.y2+=o,t}},function(t,r){t.exports=function PerpSlope(t){return-(t.x2-t.x1)/(t.y2-t.y1)}},function(t,r,o){var a=o(97),h=o(497);t.exports=function ReflectAngle(t,r){return 2*h(r)-Math.PI-a(t)}},function(t,r,o){var a=o(236);t.exports=function Rotate(t,r){var o=(t.x1+t.x2)/2,h=(t.y1+t.y2)/2;return a(t,o,h,r)}},function(t,r,o){var a=o(236);t.exports=function RotateAroundPoint(t,r,o){return a(t,r.x,r.y,o)}},function(t,r){t.exports=function SetToAngle(t,r,o,a,h){return t.x1=r,t.y1=o,t.x2=r+Math.cos(a)*h,t.y2=o+Math.sin(a)*h,t}},function(t,r){t.exports=function Slope(t){return(t.y2-t.y1)/(t.x2-t.x1)}},function(t,r){t.exports=function Width(t){return Math.abs(t.x1-t.x2)}},function(t,r,o){var a={Face:o(116),GenerateGridVerts:o(1244),GenerateObjVerts:o(480),GenerateVerts:o(479),ParseObj:o(498),ParseObjMaterial:o(499),RotateFace:o(1245),Vertex:o(117)};t.exports=a},function(t,r,o){var a=o(116),h=o(2),d=o(69),T=o(39),S=o(117),A=new T,P=new T,O=new d;t.exports=function GenerateGridVerts(t){var r=h(t,"mesh"),o=h(t,"texture",null),d=h(t,"frame"),T=h(t,"width",1),D=h(t,"height",T),L=h(t,"widthSegments",1),I=h(t,"heightSegments",L),B=h(t,"x",0),N=h(t,"y",0),G=h(t,"z",0),Y=h(t,"rotateX",0),X=h(t,"rotateY",0),U=h(t,"rotateZ",0),z=h(t,"zIsUp",!0),V=h(t,"isOrtho",!!r&&r.dirtyCache[11]),W=h(t,"colors",[16777215]),H=h(t,"alphas",[1]),q=h(t,"tile",!1),Z=h(t,"flipY",!1),K=h(t,"width",null),J={faces:[],verts:[]};if(A.set(B,N,G),P.set(Y,X,U),O.fromRotationXYTranslation(P,A,z),!o&&r)o=r.texture;else{if(!r||"string"!=typeof o)return J;o=r.scene.sys.textures.get(o)}var Q=o.get(d);!K&&V&&o&&r&&(T=Q.width/r.height,D=Q.height/r.height);var $,tt,et=T/2,it=D/2,nt=Math.floor(L),rt=Math.floor(I),st=nt+1,ot=rt+1,at=T/nt,ht=D/rt,lt=[],ut=[],ct=0,dt=1,ft=0,pt=1;Q&&(ct=Q.u0,dt=Q.u1,Z?(ft=Q.v1,pt=Q.v0):(ft=Q.v0,pt=Q.v1));var gt=dt-ct,vt=pt-ft;for(tt=0;tt<ot;tt++){var mt=tt*ht-it;for($=0;$<st;$++){var yt=$*at-et;ut.push(yt,-mt);var xt=ct+gt*($/nt),Tt=ft+vt*(tt/rt);lt.push(xt,Tt)}}Array.isArray(W)||(W=[W]),Array.isArray(H)||(H=[H]);var bt=0,wt=0;for(tt=0;tt<rt;tt++)for($=0;$<nt;$++){var St=2*($+st*tt),Ct=2*($+st*(tt+1)),Et=2*($+1+st*(tt+1)),Mt=2*($+1+st*tt),_t=W[wt],Pt=H[bt],Rt=new S(ut[St],ut[St+1],0,lt[St],lt[St+1],_t,Pt).transformMat4(O),kt=new S(ut[Ct],ut[Ct+1],0,lt[Ct],lt[Ct+1],_t,Pt).transformMat4(O),Ot=new S(ut[Mt],ut[Mt+1],0,lt[Mt],lt[Mt+1],_t,Pt).transformMat4(O),Dt=new S(ut[Ct],ut[Ct+1],0,lt[Ct],lt[Ct+1],_t,Pt).transformMat4(O),Lt=new S(ut[Et],ut[Et+1],0,lt[Et],lt[Et+1],_t,Pt).transformMat4(O),It=new S(ut[Mt],ut[Mt+1],0,lt[Mt],lt[Mt+1],_t,Pt).transformMat4(O);q&&(Rt.setUVs(ct,pt),kt.setUVs(ct,ft),Ot.setUVs(dt,pt),Dt.setUVs(ct,ft),Lt.setUVs(dt,ft),It.setUVs(dt,pt)),++wt===W.length&&(wt=0),++bt===H.length&&(bt=0),J.verts.push(Rt,kt,Ot,Dt,Lt,It),J.faces.push(new a(Rt,kt,Ot),new a(Dt,Lt,It))}return r&&(r.faces=r.faces.concat(J.faces),r.vertices=r.vertices.concat(J.verts)),J}},function(t,r){t.exports=function RotateFace(t,r,o,a){var h,d;if(void 0===o&&void 0===a){var T=t.getInCenter();h=T.x,d=T.y}var S=Math.cos(r),A=Math.sin(r),P=t.vertex1,O=t.vertex2,D=t.vertex3,L=P.x-h,I=P.y-d;P.set(L*S-I*A+h,L*A+I*S+d),L=O.x-h,I=O.y-d,O.set(L*S-I*A+h,L*A+I*S+d),L=D.x-h,I=D.y-d,D.set(L*S-I*A+h,L*A+I*S+d)}},function(t,r,o){var a=o(4);a.Ceil=o(1247),a.Clone=o(1248),a.CopyFrom=o(1249),a.Equals=o(1250),a.Floor=o(1251),a.GetCentroid=o(1252),a.GetMagnitude=o(500),a.GetMagnitudeSq=o(501),a.GetRectangleFromPoints=o(1253),a.Interpolate=o(1254),a.Invert=o(1255),a.Negative=o(1256),a.Project=o(1257),a.ProjectUnit=o(1258),a.SetMagnitude=o(1259),t.exports=a},function(t,r){t.exports=function Ceil(t){return t.setTo(Math.ceil(t.x),Math.ceil(t.y))}},function(t,r,o){var a=o(4);t.exports=function Clone(t){return new a(t.x,t.y)}},function(t,r){t.exports=function CopyFrom(t,r){return r.setTo(t.x,t.y)}},function(t,r){t.exports=function Equals(t,r){return t.x===r.x&&t.y===r.y}},function(t,r){t.exports=function Floor(t){return t.setTo(Math.floor(t.x),Math.floor(t.y))}},function(t,r,o){var a=o(4);t.exports=function GetCentroid(t,r){if(void 0===r&&(r=new a),!Array.isArray(t))throw new Error("GetCentroid points argument must be an array");var o=t.length;if(o<1)throw new Error("GetCentroid points array must not be empty");if(1===o)r.x=t[0].x,r.y=t[0].y;else{for(var h=0;h<o;h++)r.x+=t[h].x,r.y+=t[h].y;r.x/=o,r.y/=o}return r}},function(t,r,o){var a=o(10);t.exports=function GetRectangleFromPoints(t,r){void 0===r&&(r=new a);for(var o=Number.NEGATIVE_INFINITY,h=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,T=Number.POSITIVE_INFINITY,S=0;S<t.length;S++){var A=t[S];A.x>o&&(o=A.x),A.x<h&&(h=A.x),A.y>d&&(d=A.y),A.y<T&&(T=A.y)}return r.x=h,r.y=T,r.width=o-h,r.height=d-T,r}},function(t,r,o){var a=o(4);t.exports=function Interpolate(t,r,o,h){return void 0===o&&(o=0),void 0===h&&(h=new a),h.x=t.x+(r.x-t.x)*o,h.y=t.y+(r.y-t.y)*o,h}},function(t,r){t.exports=function Invert(t){return t.setTo(t.y,t.x)}},function(t,r,o){var a=o(4);t.exports=function Negative(t,r){return void 0===r&&(r=new a),r.setTo(-t.x,-t.y)}},function(t,r,o){var a=o(4),h=o(501);t.exports=function Project(t,r,o){void 0===o&&(o=new a);var d=(t.x*r.x+t.y*r.y)/h(r);return 0!==d&&(o.x=d*r.x,o.y=d*r.y),o}},function(t,r,o){var a=o(4);t.exports=function ProjectUnit(t,r,o){void 0===o&&(o=new a);var h=t.x*r.x+t.y*r.y;return 0!==h&&(o.x=h*r.x,o.y=h*r.y),o}},function(t,r,o){var a=o(500);t.exports=function SetMagnitude(t,r){if(0!==t.x||0!==t.y){var o=a(t);t.x/=o,t.y/=o}return t.x*=r,t.y*=r,t}},function(t,r,o){var a=o(227);a.Clone=o(1261),a.Contains=o(228),a.ContainsPoint=o(1262),a.Earcut=o(59),a.GetAABB=o(469),a.GetNumberArray=o(1263),a.GetPoints=o(470),a.Perimeter=o(471),a.Reverse=o(1264),a.Simplify=o(1265),a.Smooth=o(472),a.Translate=o(1266),t.exports=a},function(t,r,o){var a=o(227);t.exports=function Clone(t){return new a(t.points)}},function(t,r,o){var a=o(228);t.exports=function ContainsPoint(t,r){return a(t,r.x,r.y)}},function(t,r){t.exports=function GetNumberArray(t,r){void 0===r&&(r=[]);for(var o=0;o<t.points.length;o++)r.push(t.points[o].x),r.push(t.points[o].y);return r}},function(t,r){t.exports=function Reverse(t){return t.points.reverse(),t}},function(t,r){function getSqSegDist(t,r,o){var a=r.x,h=r.y,d=o.x-a,T=o.y-h;if(0!==d||0!==T){var S=((t.x-a)*d+(t.y-h)*T)/(d*d+T*T);S>1?(a=o.x,h=o.y):S>0&&(a+=d*S,h+=T*S)}return(d=t.x-a)*d+(T=t.y-h)*T}function simplifyDPStep(t,r,o,a,h){for(var d,T=a,S=r+1;S<o;S++){var A=getSqSegDist(t[S],t[r],t[o]);A>T&&(d=S,T=A)}T>a&&(d-r>1&&simplifyDPStep(t,r,d,a,h),h.push(t[d]),o-d>1&&simplifyDPStep(t,d,o,a,h))}function simplifyDouglasPeucker(t,r){var o=t.length-1,a=[t[0]];return simplifyDPStep(t,0,o,r,a),a.push(t[o]),a}t.exports=function Simplify(t,r,o){void 0===r&&(r=1),void 0===o&&(o=!1);var a=t.points;if(a.length>2){var h=r*r;o||(a=function simplifyRadialDist(t,r){for(var o,a,h,d,T,S=t[0],A=[S],P=1,O=t.length;P<O;P++)o=t[P],h=S,d=void 0,T=void 0,d=(a=o).x-h.x,T=a.y-h.y,d*d+T*T>r&&(A.push(o),S=o);return S!==o&&A.push(o),A}(a,h)),t.setTo(simplifyDouglasPeucker(a,h))}return t}},function(t,r){t.exports=function Translate(t,r,o){for(var a=t.points,h=0;h<a.length;h++)a[h].x+=r,a[h].y+=o;return t}},function(t,r){t.exports=function Area(t){return t.width*t.height}},function(t,r){t.exports=function Ceil(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t}},function(t,r){t.exports=function CeilAll(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t}},function(t,r,o){var a=o(10);t.exports=function Clone(t){return new a(t.x,t.y,t.width,t.height)}},function(t,r,o){var a=o(57);t.exports=function ContainsPoint(t,r){return a(t,r.x,r.y)}},function(t,r){t.exports=function CopyFrom(t,r){return r.setTo(t.x,t.y,t.width,t.height)}},function(t,r){t.exports=function Equals(t,r){return t.x===r.x&&t.y===r.y&&t.width===r.width&&t.height===r.height}},function(t,r,o){var a=o(237);t.exports=function FitInside(t,r){var o=a(t);return o<a(r)?t.setSize(r.height*o,r.height):t.setSize(r.width,r.width/o),t.setPosition(r.centerX-t.width/2,r.centerY-t.height/2)}},function(t,r,o){var a=o(237);t.exports=function FitOutside(t,r){var o=a(t);return o>a(r)?t.setSize(r.height*o,r.height):t.setSize(r.width,r.width/o),t.setPosition(r.centerX-t.width/2,r.centerY-t.height/2)}},function(t,r){t.exports=function Floor(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t}},function(t,r){t.exports=function FloorAll(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t.width=Math.floor(t.width),t.height=Math.floor(t.height),t}},function(t,r,o){var a=o(10);t.exports=function FromXY(t,r,o,h,d){return void 0===d&&(d=new a),d.setTo(Math.min(t,o),Math.min(r,h),Math.abs(t-o),Math.abs(r-h))}},function(t,r,o){var a=o(4);t.exports=function GetCenter(t,r){return void 0===r&&(r=new a),r.x=t.centerX,r.y=t.centerY,r}},function(t,r,o){var a=o(4);t.exports=function GetSize(t,r){return void 0===r&&(r=new a),r.x=t.width,r.y=t.height,r}},function(t,r,o){var a=o(190);t.exports=function Inflate(t,r,o){var h=t.centerX,d=t.centerY;return t.setSize(t.width+2*r,t.height+2*o),a(t,h,d)}},function(t,r,o){var a=o(10),h=o(152);t.exports=function Intersection(t,r,o){return void 0===o&&(o=new a),h(t,r)?(o.x=Math.max(t.x,r.x),o.y=Math.max(t.y,r.y),o.width=Math.min(t.right,r.right)-o.x,o.height=Math.min(t.bottom,r.bottom)-o.y):o.setEmpty(),o}},function(t,r){t.exports=function MergePoints(t,r){for(var o=t.x,a=t.right,h=t.y,d=t.bottom,T=0;T<r.length;T++)o=Math.min(o,r[T].x),a=Math.max(a,r[T].x),h=Math.min(h,r[T].y),d=Math.max(d,r[T].y);return t.x=o,t.y=h,t.width=a-o,t.height=d-h,t}},function(t,r){t.exports=function MergeRect(t,r){var o=Math.min(t.x,r.x),a=Math.max(t.right,r.right);t.x=o,t.width=a-o;var h=Math.min(t.y,r.y),d=Math.max(t.bottom,r.bottom);return t.y=h,t.height=d-h,t}},function(t,r){t.exports=function MergeXY(t,r,o){var a=Math.min(t.x,r),h=Math.max(t.right,r);t.x=a,t.width=h-a;var d=Math.min(t.y,o),T=Math.max(t.bottom,o);return t.y=d,t.height=T-d,t}},function(t,r){t.exports=function Offset(t,r,o){return t.x+=r,t.y+=o,t}},function(t,r){t.exports=function OffsetPoint(t,r){return t.x+=r.x,t.y+=r.y,t}},function(t,r){t.exports=function Overlaps(t,r){return t.x<r.right&&t.right>r.x&&t.y<r.bottom&&t.bottom>r.y}},function(t,r,o){var a=o(4),h=o(36);t.exports=function PerimeterPoint(t,r,o){void 0===o&&(o=new a),r=h(r);var d=Math.sin(r),T=Math.cos(r),S=T>0?t.width/2:t.width/-2,A=d>0?t.height/2:t.height/-2;return Math.abs(S*d)<Math.abs(A*T)?A=S*d/T:S=A*T/d,o.x=S+t.centerX,o.y=A+t.centerY,o}},function(t,r,o){var a=o(195),h=o(503),d=o(4);t.exports=function RandomOutside(t,r,o){if(void 0===o&&(o=new d),h(t,r))switch(a(0,3)){case 0:o.x=t.x+Math.random()*(r.right-t.x),o.y=t.y+Math.random()*(r.top-t.y);break;case 1:o.x=r.x+Math.random()*(t.right-r.x),o.y=r.bottom+Math.random()*(t.bottom-r.bottom);break;case 2:o.x=t.x+Math.random()*(r.x-t.x),o.y=r.y+Math.random()*(t.bottom-r.y);break;case 3:o.x=r.right+Math.random()*(t.right-r.right),o.y=t.y+Math.random()*(r.bottom-t.y)}return o}},function(t,r){t.exports=function SameDimensions(t,r){return t.width===r.width&&t.height===r.height}},function(t,r){t.exports=function Scale(t,r,o){return void 0===o&&(o=r),t.width*=r,t.height*=o,t}},function(t,r,o){var a=o(82);a.Area=o(1294),a.BuildEquilateral=o(1295),a.BuildFromPolygon=o(1296),a.BuildRight=o(1297),a.CenterOn=o(1298),a.Centroid=o(504),a.CircumCenter=o(1299),a.CircumCircle=o(1300),a.Clone=o(1301),a.Contains=o(115),a.ContainsArray=o(235),a.ContainsPoint=o(1302),a.CopyFrom=o(1303),a.Decompose=o(495),a.Equals=o(1304),a.GetPoint=o(476),a.GetPoints=o(477),a.InCenter=o(506),a.Perimeter=o(1305),a.Offset=o(505),a.Random=o(181),a.Rotate=o(1306),a.RotateAroundPoint=o(1307),a.RotateAroundXY=o(238),t.exports=a},function(t,r){t.exports=function Area(t){var r=t.x1,o=t.y1,a=t.x2,h=t.y2,d=t.x3,T=t.y3;return Math.abs(((d-r)*(h-o)-(a-r)*(T-o))/2)}},function(t,r,o){var a=o(82);t.exports=function BuildEquilateral(t,r,o){var h=o*(Math.sqrt(3)/2);return new a(t,r,t+o/2,r+h,t-o/2,r+h)}},function(t,r,o){var a=o(59),h=o(82);t.exports=function BuildFromPolygon(t,r,o,d,T){void 0===r&&(r=null),void 0===o&&(o=1),void 0===d&&(d=1),void 0===T&&(T=[]);for(var S,A,P,O,D,L,I,B,N,G=a(t,r),Y=0;Y<G.length;Y+=3)S=G[Y],A=G[Y+1],P=G[Y+2],O=t[2*S]*o,D=t[2*S+1]*d,L=t[2*A]*o,I=t[2*A+1]*d,B=t[2*P]*o,N=t[2*P+1]*d,T.push(new h(O,D,L,I,B,N));return T}},function(t,r,o){var a=o(82);t.exports=function BuildRight(t,r,o,h){return void 0===h&&(h=o),new a(t,r,t,r-h,t+o,r)}},function(t,r,o){var a=o(504),h=o(505);t.exports=function CenterOn(t,r,o,d){void 0===d&&(d=a);var T=d(t),S=r-T.x,A=o-T.y;return h(t,S,A)}},function(t,r,o){var a=o(3);function det(t,r,o,a){return t*a-r*o}t.exports=function CircumCenter(t,r){void 0===r&&(r=new a);var o=t.x3,h=t.y3,d=t.x1-o,T=t.y1-h,S=t.x2-o,A=t.y2-h,P=2*det(d,T,S,A),O=det(T,d*d+T*T,A,S*S+A*A),D=det(d,d*d+T*T,S,S*S+A*A);return r.x=o-O/P,r.y=h+D/P,r}},function(t,r,o){var a=o(65);t.exports=function CircumCircle(t,r){void 0===r&&(r=new a);var o,h,d=t.x1,T=t.y1,S=t.x2,A=t.y2,P=t.x3,O=t.y3,D=S-d,L=A-T,I=P-d,B=O-T,N=D*(d+S)+L*(T+A),G=I*(d+P)+B*(T+O),Y=2*(D*(O-A)-L*(P-S));if(Math.abs(Y)<1e-6){var X=Math.min(d,S,P),U=Math.min(T,A,O);o=.5*(Math.max(d,S,P)-X),h=.5*(Math.max(T,A,O)-U),r.x=X+o,r.y=U+h,r.radius=Math.sqrt(o*o+h*h)}else r.x=(B*N-L*G)/Y,r.y=(D*G-I*N)/Y,o=r.x-d,h=r.y-T,r.radius=Math.sqrt(o*o+h*h);return r}},function(t,r,o){var a=o(82);t.exports=function Clone(t){return new a(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},function(t,r,o){var a=o(115);t.exports=function ContainsPoint(t,r){return a(t,r.x,r.y)}},function(t,r){t.exports=function CopyFrom(t,r){return r.setTo(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},function(t,r){t.exports=function Equals(t,r){return t.x1===r.x1&&t.y1===r.y1&&t.x2===r.x2&&t.y2===r.y2&&t.x3===r.x3&&t.y3===r.y3}},function(t,r,o){var a=o(67);t.exports=function Perimeter(t){var r=t.getLineA(),o=t.getLineB(),h=t.getLineC();return a(r)+a(o)+a(h)}},function(t,r,o){var a=o(238),h=o(506);t.exports=function Rotate(t,r){var o=h(t);return a(t,o.x,o.y,r)}},function(t,r,o){var a=o(238);t.exports=function RotateAroundPoint(t,r,o){return a(t,r.x,r.y,o)}},function(t,r,o){var a=o(203),h=o(17),d={CreatePixelPerfectHandler:o(507),CreateInteractiveObject:o(508),Events:o(51),Gamepad:o(1309),InputManager:o(409),InputPlugin:o(1321),InputPluginCache:o(153),Keyboard:o(1322),Mouse:o(1336),Pointer:o(412),Touch:o(1337)};d=h(!1,d,a),t.exports=d},function(t,r,o){t.exports={Axis:o(509),Button:o(510),Events:o(239),Gamepad:o(511),GamepadPlugin:o(1316),Configs:o(1317)}},function(t,r){t.exports="down"},function(t,r){t.exports="up"},function(t,r){t.exports="connected"},function(t,r){t.exports="disconnected"},function(t,r){t.exports="down"},function(t,r){t.exports="up"},function(t,r,o){var a=o(0),h=o(9),d=o(239),T=o(511),S=o(6),A=o(153),P=o(51),O=new a({Extends:h,initialize:function GamepadPlugin(t){h.call(this),this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,t.pluginEvents.once(P.BOOT,this.boot,this),t.pluginEvents.on(P.START,this.start,this)},boot:function boot(){var t=this.scene.sys.game,r=this.settings.input,o=t.config;this.enabled=S(r,"gamepad",o.inputGamepad)&&t.device.input.gamepads,this.target=S(r,"gamepad.target",o.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(P.DESTROY,this.destroy,this)},start:function start(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(P.SHUTDOWN,this.shutdown,this)},isActive:function isActive(){return this.enabled&&this.scene.sys.isActive()},startListeners:function startListeners(){var t=this,r=this.target,o=function handler(r){!r.defaultPrevented&&t.isActive()&&(t.refreshPads(),t.queue.push(r))};this.onGamepadHandler=o,r.addEventListener("gamepadconnected",o,!1),r.addEventListener("gamepaddisconnected",o,!1),this.sceneInputPlugin.pluginEvents.on(P.UPDATE,this.update,this)},stopListeners:function stopListeners(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(P.UPDATE,this.update);for(var t=0;t<this.gamepads.length;t++)this.gamepads[t].removeAllListeners()},disconnectAll:function disconnectAll(){for(var t=0;t<this.gamepads.length;t++)this.gamepads[t].pad.connected=!1},refreshPads:function refreshPads(){var t=navigator.getGamepads();if(t)for(var r=this.gamepads,o=0;o<t.length;o++){var a=t[o];if(a){var h=a.id,d=a.index,S=r[d];if(S)S.id!==h?(S.destroy(),r[d]=new T(this,a)):S.update(a);else{var A=new T(this,a);r[d]=A,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=A):this._pad3=A:this._pad2=A:this._pad1=A}}}else this.disconnectAll()},getAll:function getAll(){for(var t=[],r=this.gamepads,o=0;o<r.length;o++)r[o]&&t.push(r[o]);return t},getPad:function getPad(t){for(var r=this.gamepads,o=0;o<r.length;o++)if(r[o]&&r[o].index===t)return r[o]},update:function update(){if(this.enabled){this.refreshPads();var t=this.queue.length;if(0!==t)for(var r=this.queue.splice(0,t),o=0;o<t;o++){var a=r[o],h=this.getPad(a.gamepad.index);"gamepadconnected"===a.type?this.emit(d.CONNECTED,h,a):"gamepaddisconnected"===a.type&&this.emit(d.DISCONNECTED,h,a)}}},shutdown:function shutdown(){this.stopListeners(),this.removeAllListeners()},destroy:function destroy(){this.shutdown();for(var t=0;t<this.gamepads.length;t++)this.gamepads[t]&&this.gamepads[t].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function get(){return this.gamepads.length}},pad1:{get:function get(){return this._pad1}},pad2:{get:function get(){return this._pad2}},pad3:{get:function get(){return this._pad3}},pad4:{get:function get(){return this._pad4}}});A.register("GamepadPlugin",O,"gamepad","gamepad","inputGamepad"),t.exports=O},function(t,r,o){t.exports={DUALSHOCK_4:o(1318),SNES_USB:o(1319),XBOX_360:o(1320)}},function(t,r){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(t,r){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(t,r){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(t,r,o){var a=o(65),h=o(66),d=o(0),T=o(203),S=o(508),A=o(507),P=o(50),O=o(111),D=o(112),L=o(51),I=o(9),B=o(2),N=o(56),G=o(153),Y=o(7),X=o(24),U=o(10),z=o(57),V=o(20),W=o(82),H=o(115),q=new d({Extends:I,initialize:function InputPlugin(t){I.call(this),this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.manager=t.sys.game.input,this.pluginEvents=new I,this.enabled=!0,this.displayList,this.cameras,G.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var r={cancelled:!1};this._eventContainer={stopPropagation:function stopPropagation(){r.cancelled=!0}},this._eventData=r,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,t.sys.events.once(V.BOOT,this.boot,this),t.sys.events.on(V.START,this.start,this)},boot:function boot(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(V.DESTROY,this.destroy,this),this.pluginEvents.emit(L.BOOT)},start:function start(){var t=this.systems.events;t.on(V.TRANSITION_START,this.transitionIn,this),t.on(V.TRANSITION_OUT,this.transitionOut,this),t.on(V.TRANSITION_COMPLETE,this.transitionComplete,this),t.on(V.PRE_UPDATE,this.preUpdate,this),t.once(V.SHUTDOWN,this.shutdown,this),this.manager.events.on(L.GAME_OUT,this.onGameOut,this),this.manager.events.on(L.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(L.START)},onGameOver:function onGameOver(t){this.isActive()&&this.emit(L.GAME_OVER,t.timeStamp,t)},onGameOut:function onGameOut(t){this.isActive()&&this.emit(L.GAME_OUT,t.timeStamp,t)},preUpdate:function preUpdate(){this.pluginEvents.emit(L.PRE_UPDATE);var t=this._pendingRemoval,r=this._pendingInsertion,o=t.length,a=r.length;if(0!==o||0!==a){for(var h=this._list,d=0;d<o;d++){var T=t[d],S=h.indexOf(T);S>-1&&(h.splice(S,1),this.clear(T,!0))}t.length=0,this._pendingRemoval.length=0,this._list=h.concat(r.splice(0))}},isActive:function isActive(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function updatePoll(t,r){if(!this.isActive())return!1;if(this.pluginEvents.emit(L.UPDATE,t,r),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var o,a=this.manager,h=a.pointers,d=a.pointersTotal;for(o=0;o<d;o++)h[o].updateMotion();if(0===this._list.length)return!1;var T=this.pollRate;if(-1===T)return!1;if(T>0){if(this._pollTimer-=r,!(this._pollTimer<0))return!1;this._pollTimer=this.pollRate}var S=!1;for(o=0;o<d;o++){var A=0,P=h[o];this._tempZones=[],this._temp=this.hitTestPointer(P),this.sortGameObjects(this._temp,P),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),A+=this.processOverOutEvents(P),2===this.getDragState(P)&&this.processDragThresholdEvent(P,t),A>0&&(S=!0)}return S},update:function update(t,r){if(!this.isActive())return!1;for(var o=r.length,a=!1,h=0;h<o;h++){var d=0,S=r[h];switch(this._tempZones=[],this._temp=this.hitTestPointer(S),this.sortGameObjects(this._temp,S),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),t){case T.MOUSE_DOWN:d+=this.processDragDownEvent(S),d+=this.processDownEvents(S),d+=this.processOverOutEvents(S);break;case T.MOUSE_UP:d+=this.processDragUpEvent(S),d+=this.processUpEvents(S),d+=this.processOverOutEvents(S);break;case T.TOUCH_START:d+=this.processDragDownEvent(S),d+=this.processDownEvents(S),d+=this.processOverEvents(S);break;case T.TOUCH_END:case T.TOUCH_CANCEL:d+=this.processDragUpEvent(S),d+=this.processUpEvents(S),d+=this.processOutEvents(S);break;case T.MOUSE_MOVE:case T.TOUCH_MOVE:d+=this.processDragMoveEvent(S),d+=this.processMoveEvents(S),d+=this.processOverOutEvents(S);break;case T.MOUSE_WHEEL:d+=this.processWheelEvent(S)}d>0&&(a=!0)}return this._updatedThisFrame=!0,a},clear:function clear(t,r){void 0===r&&(r=!1);var o=t.input;if(o){r||this.queueForRemoval(t),o.gameObject=void 0,o.target=void 0,o.hitArea=void 0,o.hitAreaCallback=void 0,o.callbackContext=void 0,t.input=null;var a=this._draggable.indexOf(t);return a>-1&&this._draggable.splice(a,1),(a=this._drag[0].indexOf(t))>-1&&this._drag[0].splice(a,1),(a=this._over[0].indexOf(t))>-1&&(this._over[0].splice(a,1),this.manager.resetCursor(o)),t}},disable:function disable(t){t.input.enabled=!1},enable:function enable(t,r,o,a){return void 0===a&&(a=!1),t.input?t.input.enabled=!0:this.setHitArea(t,r,o),t.input&&a&&!t.input.dropZone&&(t.input.dropZone=a),this},hitTestPointer:function hitTestPointer(t){for(var r=this.cameras.getCamerasBelowPointer(t),o=0;o<r.length;o++){for(var a=r[o],h=this.manager.hitTest(t,this._list,a),d=0;d<h.length;d++){var T=h[d];T.input.dropZone&&this._tempZones.push(T)}if(h.length>0)return t.camera=a,h}return t.camera=r[0],[]},processDownEvents:function processDownEvents(t){var r=0,o=this._temp,a=this._eventData,h=this._eventContainer;a.cancelled=!1;for(var d=!1,T=0;T<o.length;T++){var S=o[T];if(S.input){if(r++,S.emit(L.GAMEOBJECT_POINTER_DOWN,t,S.input.localX,S.input.localY,h),a.cancelled||!S.input){d=!0;break}if(this.emit(L.GAMEOBJECT_DOWN,t,S,h),a.cancelled||!S.input){d=!0;break}}}return!d&&this.manager&&(t.downElement===this.manager.game.canvas?this.emit(L.POINTER_DOWN,t,o):this.emit(L.POINTER_DOWN_OUTSIDE,t)),r},getDragState:function getDragState(t){return this._dragState[t.id]},setDragState:function setDragState(t,r){this._dragState[t.id]=r},processDragThresholdEvent:function processDragThresholdEvent(t,r){var o=!1,a=this.dragTimeThreshold,h=this.dragDistanceThreshold;if((h>0&&P(t.x,t.y,t.downX,t.downY)>=h||a>0&&r>=t.downTime+a)&&(o=!0),o)return this.setDragState(t,3),this.processDragStartList(t)},processDragStartList:function processDragStartList(t){if(3!==this.getDragState(t))return 0;for(var r=this._drag[t.id],o=0;o<r.length;o++){var a=r[o],h=a.input;h.dragState=2,h.dragStartX=a.x,h.dragStartY=a.y,h.dragStartXGlobal=t.worldX,h.dragStartYGlobal=t.worldY,h.dragX=h.dragStartXGlobal-h.dragStartX,h.dragY=h.dragStartYGlobal-h.dragStartY,a.emit(L.GAMEOBJECT_DRAG_START,t,h.dragX,h.dragY),this.emit(L.DRAG_START,t,a)}return this.setDragState(t,4),r.length},processDragDownEvent:function processDragDownEvent(t){var r=this._temp;if(0===this._draggable.length||0===r.length||!t.primaryDown||0!==this.getDragState(t))return 0;this.setDragState(t,1);for(var o=[],a=0;a<r.length;a++){var h=r[a];h.input.draggable&&0===h.input.dragState&&o.push(h)}return 0===o.length?(this.setDragState(t,0),0):(o.length>1&&(this.sortGameObjects(o,t),this.topOnly&&o.splice(1)),this._drag[t.id]=o,0===this.dragDistanceThreshold&&0===this.dragTimeThreshold?(this.setDragState(t,3),this.processDragStartList(t)):(this.setDragState(t,2),0))},processDragMoveEvent:function processDragMoveEvent(t){if(2===this.getDragState(t)&&this.processDragThresholdEvent(t,this.manager.game.loop.now),4!==this.getDragState(t))return 0;for(var r=this._tempZones,o=this._drag[t.id],a=0;a<o.length;a++){var h,d,T=o[a],S=T.input,A=S.target;if(A){var P=r.indexOf(A);0===P?(T.emit(L.GAMEOBJECT_DRAG_OVER,t,A),this.emit(L.DRAG_OVER,t,T,A)):P>0?(T.emit(L.GAMEOBJECT_DRAG_LEAVE,t,A),this.emit(L.DRAG_LEAVE,t,T,A),S.target=r[0],A=S.target,T.emit(L.GAMEOBJECT_DRAG_ENTER,t,A),this.emit(L.DRAG_ENTER,t,T,A)):(T.emit(L.GAMEOBJECT_DRAG_LEAVE,t,A),this.emit(L.DRAG_LEAVE,t,T,A),r[0]?(S.target=r[0],A=S.target,T.emit(L.GAMEOBJECT_DRAG_ENTER,t,A),this.emit(L.DRAG_ENTER,t,T,A)):S.target=null)}else!A&&r[0]&&(S.target=r[0],A=S.target,T.emit(L.GAMEOBJECT_DRAG_ENTER,t,A),this.emit(L.DRAG_ENTER,t,T,A));if(T.parentContainer){var O=t.worldX-S.dragStartXGlobal,D=t.worldY-S.dragStartYGlobal,I=T.getParentRotation(),B=O*Math.cos(I)+D*Math.sin(I),N=D*Math.cos(I)-O*Math.sin(I);B*=1/T.parentContainer.scaleX,N*=1/T.parentContainer.scaleY,h=B+S.dragStartX,d=N+S.dragStartY}else h=t.worldX-S.dragX,d=t.worldY-S.dragY;T.emit(L.GAMEOBJECT_DRAG,t,h,d),this.emit(L.DRAG,t,T,h,d)}return o.length},processDragUpEvent:function processDragUpEvent(t){for(var r=this._drag[t.id],o=0;o<r.length;o++){var a=r[o],h=a.input;if(h&&2===h.dragState){h.dragState=0,h.dragX=h.localX-a.displayOriginX,h.dragY=h.localY-a.displayOriginY;var d=!1,T=h.target;T&&(a.emit(L.GAMEOBJECT_DROP,t,T),this.emit(L.DROP,t,a,T),h.target=null,d=!0),a.input&&(a.emit(L.GAMEOBJECT_DRAG_END,t,h.dragX,h.dragY,d),this.emit(L.DRAG_END,t,a,d))}}return this.setDragState(t,0),r.splice(0),0},processMoveEvents:function processMoveEvents(t){var r=0,o=this._temp,a=this._eventData,h=this._eventContainer;a.cancelled=!1;for(var d=!1,T=0;T<o.length;T++){var S=o[T];if(S.input){if(r++,S.emit(L.GAMEOBJECT_POINTER_MOVE,t,S.input.localX,S.input.localY,h),a.cancelled||!S.input){d=!0;break}if(this.emit(L.GAMEOBJECT_MOVE,t,S,h),a.cancelled||!S.input){d=!0;break}if(this.topOnly)break}}return d||this.emit(L.POINTER_MOVE,t,o),r},processWheelEvent:function processWheelEvent(t){var r=0,o=this._temp,a=this._eventData,h=this._eventContainer;a.cancelled=!1;for(var d=!1,T=t.deltaX,S=t.deltaY,A=t.deltaZ,P=0;P<o.length;P++){var O=o[P];if(O.input){if(r++,O.emit(L.GAMEOBJECT_POINTER_WHEEL,t,T,S,A,h),a.cancelled||!O.input){d=!0;break}if(this.emit(L.GAMEOBJECT_WHEEL,t,O,T,S,A,h),a.cancelled||!O.input){d=!0;break}}}return d||this.emit(L.POINTER_WHEEL,t,o,T,S,A),r},processOverEvents:function processOverEvents(t){var r=this._temp,o=0,a=r.length,h=[];if(a>0){var d=this.manager,T=this._eventData,S=this._eventContainer;T.cancelled=!1;for(var A=!1,P=0;P<a;P++){var O=r[P];if(O.input){if(h.push(O),d.setCursor(O.input),O.emit(L.GAMEOBJECT_POINTER_OVER,t,O.input.localX,O.input.localY,S),o++,T.cancelled||!O.input){A=!0;break}if(this.emit(L.GAMEOBJECT_OVER,t,O,S),T.cancelled||!O.input){A=!0;break}}}A||this.emit(L.POINTER_OVER,t,h)}return this._over[t.id]=h,o},processOutEvents:function processOutEvents(t){var r=this._over[t.id],o=0,a=r.length;if(a>0){var h=this.manager,d=this._eventData,T=this._eventContainer;d.cancelled=!1;var S=!1;this.sortGameObjects(r,t);for(var A=0;A<a;A++){var P=r[A];if((P=r[A]).input){if(h.resetCursor(P.input),P.emit(L.GAMEOBJECT_POINTER_OUT,t,T),o++,d.cancelled||!P.input){S=!0;break}if(this.emit(L.GAMEOBJECT_OUT,t,P,T),d.cancelled||!P.input){S=!0;break}S||this.emit(L.POINTER_OUT,t,r)}}this._over[t.id]=[]}return o},processOverOutEvents:function processOverOutEvents(t){var r,o,a=this._temp,h=[],d=[],T=[],S=this._over[t.id],A=this._drag[t.id],P=this.manager;for(r=0;r<S.length;r++)o=S[r],-1===a.indexOf(o)&&-1===A.indexOf(o)?h.push(o):T.push(o);for(r=0;r<a.length;r++)o=a[r],-1===S.indexOf(o)&&d.push(o);var O=h.length,D=0,I=this._eventData,B=this._eventContainer;I.cancelled=!1;var N=!1;if(O>0){for(this.sortGameObjects(h,t),r=0;r<O;r++)if((o=h[r]).input){if(P.resetCursor(o.input),o.emit(L.GAMEOBJECT_POINTER_OUT,t,B),D++,I.cancelled||!o.input){N=!0;break}if(this.emit(L.GAMEOBJECT_OUT,t,o,B),I.cancelled||!o.input){N=!0;break}}N||this.emit(L.POINTER_OUT,t,h)}if(O=d.length,I.cancelled=!1,N=!1,O>0){for(this.sortGameObjects(d,t),r=0;r<O;r++)if((o=d[r]).input){if(P.setCursor(o.input),o.emit(L.GAMEOBJECT_POINTER_OVER,t,o.input.localX,o.input.localY,B),D++,I.cancelled||!o.input){N=!0;break}if(this.emit(L.GAMEOBJECT_OVER,t,o,B),I.cancelled||!o.input){N=!0;break}}N||this.emit(L.POINTER_OVER,t,d)}return S=T.concat(d),this._over[t.id]=this.sortGameObjects(S,t),D},processUpEvents:function processUpEvents(t){var r=this._temp,o=this._eventData,a=this._eventContainer;o.cancelled=!1;for(var h=!1,d=0;d<r.length;d++){var T=r[d];if(T.input){if(T.emit(L.GAMEOBJECT_POINTER_UP,t,T.input.localX,T.input.localY,a),o.cancelled||!T.input){h=!0;break}if(this.emit(L.GAMEOBJECT_UP,t,T,a),o.cancelled||!T.input){h=!0;break}}}return!h&&this.manager&&(t.upElement===this.manager.game.canvas?this.emit(L.POINTER_UP,t,r):this.emit(L.POINTER_UP_OUTSIDE,t)),r.length},queueForInsertion:function queueForInsertion(t){return-1===this._pendingInsertion.indexOf(t)&&-1===this._list.indexOf(t)&&this._pendingInsertion.push(t),this},queueForRemoval:function queueForRemoval(t){return this._pendingRemoval.push(t),this},setDraggable:function setDraggable(t,r){void 0===r&&(r=!0),Array.isArray(t)||(t=[t]);for(var o=0;o<t.length;o++){var a=t[o];a.input.draggable=r;var h=this._draggable.indexOf(a);r&&-1===h?this._draggable.push(a):!r&&h>-1&&this._draggable.splice(h,1)}return this},makePixelPerfect:function makePixelPerfect(t){void 0===t&&(t=1);var r=this.systems.textures;return A(r,t)},setHitArea:function setHitArea(t,r,o){if(void 0===r)return this.setHitAreaFromTexture(t);Array.isArray(t)||(t=[t]);var a=!1,h=!1,d=!1,T=!1,A=!1,P=!0;if(Y(r)){var O=r;r=B(O,"hitArea",null),o=B(O,"hitAreaCallback",null),a=B(O,"draggable",!1),h=B(O,"dropZone",!1),d=B(O,"cursor",!1),T=B(O,"useHandCursor",!1),A=B(O,"pixelPerfect",!1);var D=B(O,"alphaTolerance",1);A&&(r={},o=this.makePixelPerfect(D)),r&&o||(this.setHitAreaFromTexture(t),P=!1)}else"function"!=typeof r||o||(o=r,r={});for(var L=0;L<t.length;L++){var I=t[L];if(A&&"Container"===I.type)console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");else{var N=I.input?I.input:S(I,r,o);N.customHitArea=P,N.dropZone=h,N.cursor=T?"pointer":d,I.input=N,a&&this.setDraggable(I),this.queueForInsertion(I)}}return this},setHitAreaCircle:function setHitAreaCircle(t,r,o,d,T){void 0===T&&(T=h);var S=new a(r,o,d);return this.setHitArea(t,S,T)},setHitAreaEllipse:function setHitAreaEllipse(t,r,o,a,h,d){void 0===d&&(d=D);var T=new O(r,o,a,h);return this.setHitArea(t,T,d)},setHitAreaFromTexture:function setHitAreaFromTexture(t,r){void 0===r&&(r=z),Array.isArray(t)||(t=[t]);for(var o=0;o<t.length;o++){var a=t[o],h=a.frame,d=0,T=0;a.width?(d=a.width,T=a.height):h&&(d=h.realWidth,T=h.realHeight),"Container"!==a.type||0!==d&&0!==T?0!==d&&0!==T&&(a.input=S(a,new U(0,0,d,T),r),this.queueForInsertion(a)):console.warn("Container.setInteractive must specify a Shape or call setSize() first")}return this},setHitAreaRectangle:function setHitAreaRectangle(t,r,o,a,h,d){void 0===d&&(d=z);var T=new U(r,o,a,h);return this.setHitArea(t,T,d)},setHitAreaTriangle:function setHitAreaTriangle(t,r,o,a,h,d,T,S){void 0===S&&(S=H);var A=new W(r,o,a,h,d,T);return this.setHitArea(t,A,S)},enableDebug:function enableDebug(t,r){void 0===r&&(r=65280);var o=t.input;if(!o||!o.hitArea)return this;var a=o.hitArea,h=a.type,d=o.hitAreaDebug,T=this.systems.add,S=this.systems.updateList;d&&(S.remove(d),d.destroy(),d=null);var A=0,P=0;switch(h){case N.CIRCLE:d=T.arc(0,0,a.radius),A=a.x-a.radius,P=a.y-a.radius;break;case N.ELLIPSE:d=T.ellipse(0,0,a.width,a.height),A=a.x-a.width/2,P=a.y-a.height/2;break;case N.LINE:d=T.line(0,0,a.x1,a.y1,a.x2,a.y2);break;case N.POLYGON:d=T.polygon(0,0,a.points);break;case N.RECTANGLE:d=T.rectangle(0,0,a.width,a.height),A=a.x,P=a.y;break;case N.TRIANGLE:d=T.triangle(0,0,a.x1,a.y1,a.x2,a.y2,a.x3,a.y3)}return d&&(d.isFilled=!1,d.preUpdate=function(){d.setStrokeStyle(1/t.scale,r),d.setDisplayOrigin(t.displayOriginX,t.displayOriginY);var o=t.x,a=t.y,h=t.rotation,T=t.scaleX,S=t.scaleY;if(t.parentContainer){var O=t.getWorldTransformMatrix();o=O.tx,a=O.ty,h=O.rotation,T=O.scaleX,S=O.scaleY}d.setRotation(h),d.setScale(T,S),d.setPosition(o+A,a+P),d.setScrollFactor(t.scrollFactorX,t.scrollFactorY),d.setDepth(t.depth)},S.add(d),o.hitAreaDebug=d),this},removeDebug:function removeDebug(t){var r=t.input;if(r&&r.hitAreaDebug){var o=r.hitAreaDebug;this.systems.updateList.remove(o),o.destroy(),r.hitAreaDebug=null}return this},setPollAlways:function setPollAlways(){return this.setPollRate(0)},setPollOnMove:function setPollOnMove(){return this.setPollRate(-1)},setPollRate:function setPollRate(t){return this.pollRate=t,this._pollTimer=0,this},setGlobalTopOnly:function setGlobalTopOnly(t){return this.manager.globalTopOnly=t,this},setTopOnly:function setTopOnly(t){return this.topOnly=t,this},sortGameObjects:function sortGameObjects(t,r){if(t.length<2)return t;var o=r.camera.renderList;return t.sort((function(t,r){return o.indexOf(r)-o.indexOf(t)}))},sortDropZones:function sortDropZones(t){return t.length<2?t:(this.scene.sys.depthSort(),t.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function sortDropZoneHandler(t,r){if(t.parentContainer||r.parentContainer){if(t.parentContainer===r.parentContainer)return r.parentContainer.getIndex(r)-t.parentContainer.getIndex(t);if(t.parentContainer===r)return-1;if(r.parentContainer===t)return 1;for(var o=t.getIndexList(),a=r.getIndexList(),h=Math.min(o.length,a.length),d=0;d<h;d++){var T=o[d],S=a[d];if(T!==S)return S-T}return a.length-o.length}return this.displayList.getIndex(r)-this.displayList.getIndex(t)},stopPropagation:function stopPropagation(){return this.manager._tempSkip=!0,this},addPointer:function addPointer(t){return this.manager.addPointer(t)},setDefaultCursor:function setDefaultCursor(t){return this.manager.setDefaultCursor(t),this},transitionIn:function transitionIn(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function transitionComplete(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function transitionOut(){this.enabled=this.settings.transitionAllowInput},shutdown:function shutdown(){this.pluginEvents.emit(L.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var t=0;t<10;t++)this._drag[t]=[],this._over[t]=[];this.removeAllListeners();var r=this.manager;r.canvas.style.cursor=r.defaultCursor;var o=this.systems.events;o.off(V.TRANSITION_START,this.transitionIn,this),o.off(V.TRANSITION_OUT,this.transitionOut,this),o.off(V.TRANSITION_COMPLETE,this.transitionComplete,this),o.off(V.PRE_UPDATE,this.preUpdate,this),r.events.off(L.GAME_OUT,this.onGameOut,this),r.events.off(L.GAME_OVER,this.onGameOver,this),o.off(V.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown(),this.pluginEvents.emit(L.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(V.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function get(){return this.manager.activePointer.x}},y:{get:function get(){return this.manager.activePointer.y}},isOver:{get:function get(){return this.manager.isOver}},mousePointer:{get:function get(){return this.manager.mousePointer}},activePointer:{get:function get(){return this.manager.activePointer}},pointer1:{get:function get(){return this.manager.pointers[1]}},pointer2:{get:function get(){return this.manager.pointers[2]}},pointer3:{get:function get(){return this.manager.pointers[3]}},pointer4:{get:function get(){return this.manager.pointers[4]}},pointer5:{get:function get(){return this.manager.pointers[5]}},pointer6:{get:function get(){return this.manager.pointers[6]}},pointer7:{get:function get(){return this.manager.pointers[7]}},pointer8:{get:function get(){return this.manager.pointers[8]}},pointer9:{get:function get(){return this.manager.pointers[9]}},pointer10:{get:function get(){return this.manager.pointers[10]}}});X.register("InputPlugin",q,"input"),t.exports=q},function(t,r,o){t.exports={Events:o(154),KeyboardManager:o(410),KeyboardPlugin:o(1330),Key:o(512),KeyCodes:o(143),KeyCombo:o(513),AdvanceKeyCombo:o(515),ProcessKeyCombo:o(514),ResetKeyCombo:o(516),JustDown:o(1332),JustUp:o(1333),DownDuration:o(1334),UpDuration:o(1335)}},function(t,r){t.exports="keydown"},function(t,r){t.exports="keyup"},function(t,r){t.exports="keycombomatch"},function(t,r){t.exports="down"},function(t,r){t.exports="keydown-"},function(t,r){t.exports="keyup-"},function(t,r){t.exports="up"},function(t,r,o){var a=o(0),h=o(9),d=o(154),T=o(22),S=o(6),A=o(51),P=o(153),O=o(512),D=o(143),L=o(513),I=o(1331),B=o(20),N=o(76),G=new a({Extends:h,initialize:function KeyboardPlugin(t){h.call(this),this.game=t.systems.game,this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.manager=t.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,t.pluginEvents.once(A.BOOT,this.boot,this),t.pluginEvents.on(A.START,this.start,this)},boot:function boot(){var t=this.settings.input;this.enabled=S(t,"keyboard",!0);var r=S(t,"keyboard.capture",null);r&&this.addCaptures(r),this.sceneInputPlugin.pluginEvents.once(A.DESTROY,this.destroy,this)},start:function start(){this.sceneInputPlugin.manager.events.on(A.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(A.SHUTDOWN,this.shutdown,this),this.game.events.on(T.BLUR,this.resetKeys,this),this.scene.sys.events.on(B.PAUSE,this.resetKeys,this),this.scene.sys.events.on(B.SLEEP,this.resetKeys,this)},isActive:function isActive(){return this.enabled&&this.scene.sys.isActive()},addCapture:function addCapture(t){return this.manager.addCapture(t),this},removeCapture:function removeCapture(t){return this.manager.removeCapture(t),this},getCaptures:function getCaptures(){return this.manager.captures},enableGlobalCapture:function enableGlobalCapture(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function disableGlobalCapture(){return this.manager.preventDefault=!1,this},clearCaptures:function clearCaptures(){return this.manager.clearCaptures(),this},createCursorKeys:function createCursorKeys(){return this.addKeys({up:D.UP,down:D.DOWN,left:D.LEFT,right:D.RIGHT,space:D.SPACE,shift:D.SHIFT})},addKeys:function addKeys(t,r,o){void 0===r&&(r=!0),void 0===o&&(o=!1);var a={};if("string"==typeof t){t=t.split(",");for(var h=0;h<t.length;h++){var d=t[h].trim();d&&(a[d]=this.addKey(d,r,o))}}else for(var T in t)a[T]=this.addKey(t[T],r,o);return a},addKey:function addKey(t,r,o){void 0===r&&(r=!0),void 0===o&&(o=!1);var a=this.keys;if(t instanceof O){var h=a.indexOf(t);return h>-1?a[h]=t:a[t.keyCode]=t,r&&this.addCapture(t.keyCode),t.setEmitOnRepeat(o),t}return"string"==typeof t&&(t=D[t.toUpperCase()]),a[t]||(a[t]=new O(this,t),r&&this.addCapture(t),a[t].setEmitOnRepeat(o)),a[t]},removeKey:function removeKey(t,r){void 0===r&&(r=!1);var o,a=this.keys;if(t instanceof O){var h=a.indexOf(t);h>-1&&(o=this.keys[h],this.keys[h]=void 0)}else"string"==typeof t&&(t=D[t.toUpperCase()]);return a[t]&&(o=a[t],a[t]=void 0),o&&(o.plugin=null,r&&o.destroy()),this},removeAllKeys:function removeAllKeys(t){for(var r=this.keys,o=0;o<r.length;o++){var a=r[o];a&&(r[o]=void 0,t&&a.destroy())}return this},createCombo:function createCombo(t,r){return new L(this,t,r)},checkDown:function checkDown(t,r){if(void 0===r&&(r=0),this.enabled&&t.isDown){var o=N(this.time-t.timeDown,r);if(o>t._tick)return t._tick=o,!0}return!1},update:function update(){var t=this.manager.queue,r=t.length;if(this.isActive()&&0!==r)for(var o=this.keys,a=0;a<r;a++){var h=t[a],T=h.keyCode,S=o[T],A=!1;void 0===h.cancelled&&(h.cancelled=0,h.stopImmediatePropagation=function(){h.cancelled=1},h.stopPropagation=function(){h.cancelled=-1}),-1!==h.cancelled&&(T===this.prevCode&&h.timeStamp===this.prevTime&&h.type===this.prevType||(this.prevCode=T,this.prevTime=h.timeStamp,this.prevType=h.type,"keydown"===h.type?(S&&(A=S.isDown,S.onDown(h)),h.cancelled||S&&A||(I[T]&&this.emit(d.KEY_DOWN+I[T],h),h.cancelled||this.emit(d.ANY_KEY_DOWN,h))):(S&&S.onUp(h),h.cancelled||(I[T]&&this.emit(d.KEY_UP+I[T],h),h.cancelled||this.emit(d.ANY_KEY_UP,h))),1===h.cancelled&&(h.cancelled=0)))}},resetKeys:function resetKeys(){for(var t=this.keys,r=0;r<t.length;r++)t[r]&&t[r].reset();return this},shutdown:function shutdown(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(A.MANAGER_PROCESS,this.update,this),this.game.events.off(T.BLUR,this.resetKeys),this.scene.sys.events.off(B.PAUSE,this.resetKeys,this),this.scene.sys.events.off(B.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function destroy(){this.shutdown();for(var t=this.keys,r=0;r<t.length;r++)t[r]&&t[r].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function get(){return this.sceneInputPlugin.manager.time}}});P.register("KeyboardPlugin",G,"keyboard","keyboard","inputKeyboard"),t.exports=G},function(t,r,o){var a=o(143),h={};for(var d in a)h[a[d]]=d;t.exports=h},function(t,r){t.exports=function JustDown(t){return!!t._justDown&&(t._justDown=!1,!0)}},function(t,r){t.exports=function JustUp(t){return!!t._justUp&&(t._justUp=!1,!0)}},function(t,r){t.exports=function DownDuration(t,r){void 0===r&&(r=50);var o=t.plugin.game.loop.time-t.timeDown;return t.isDown&&o<r}},function(t,r){t.exports=function UpDuration(t,r){void 0===r&&(r=50);var o=t.plugin.game.loop.time-t.timeUp;return t.isUp&&o<r}},function(t,r,o){t.exports={MouseManager:o(411)}},function(t,r,o){t.exports={TouchManager:o(413)}},function(t,r,o){var a=o(21),h=o(17),d={Events:o(95),FileTypes:o(1339),File:o(23),FileTypesManager:o(8),GetURL:o(155),LoaderPlugin:o(1365),MergeXHRSettings:o(240),MultiFile:o(49),XHRLoader:o(517),XHRSettings:o(156)};d=h(!1,d,a),t.exports=d},function(t,r,o){t.exports={AnimationJSONFile:o(1340),AsepriteFile:o(1341),AtlasJSONFile:o(1342),AtlasXMLFile:o(1343),AudioFile:o(518),AudioSpriteFile:o(1344),BinaryFile:o(1345),BitmapFontFile:o(1346),CSSFile:o(1347),GLSLFile:o(1348),HTML5AudioFile:o(519),HTMLFile:o(1349),HTMLTextureFile:o(1350),ImageFile:o(71),JSONFile:o(61),MultiAtlasFile:o(1351),MultiScriptFile:o(1352),OBJFile:o(1353),PackFile:o(1354),PluginFile:o(1355),SceneFile:o(1356),ScenePluginFile:o(1357),ScriptFile:o(520),SpriteSheetFile:o(1358),SVGFile:o(1359),TextFile:o(242),TilemapCSVFile:o(1360),TilemapImpactFile:o(1361),TilemapJSONFile:o(1362),UnityAtlasFile:o(1363),VideoFile:o(1364),XMLFile:o(241)}},function(t,r,o){var a=o(0),h=o(8),d=o(61),T=o(95),S=new a({Extends:d,initialize:function AnimationJSONFile(t,r,o,a,h){d.call(this,t,r,o,a,h),this.type="animationJSON"},onProcess:function onProcess(){this.loader.once(T.POST_PROCESS,this.onLoadComplete,this),d.prototype.onProcess.call(this)},onLoadComplete:function onLoadComplete(){this.loader.systems.anims.fromJSON(this.data)}});h.register("animation",(function(t,r,o,a){if(Array.isArray(t))for(var h=0;h<t.length;h++)this.addFile(new S(this,t[h]));else this.addFile(new S(this,t,r,a,o));return this})),t.exports=S},function(t,r,o){var a=o(0),h=o(8),d=o(2),T=o(71),S=o(7),A=o(61),P=o(49),O=new a({Extends:P,initialize:function AsepriteFile(t,r,o,a,h,O){var D,L;if(S(r)){var I=r;r=d(I,"key"),D=new T(t,{key:r,url:d(I,"textureURL"),extension:d(I,"textureExtension","png"),normalMap:d(I,"normalMap"),xhrSettings:d(I,"textureXhrSettings")}),L=new A(t,{key:r,url:d(I,"atlasURL"),extension:d(I,"atlasExtension","json"),xhrSettings:d(I,"atlasXhrSettings")})}else D=new T(t,r,o,h),L=new A(t,r,a,O);D.linkFile?P.call(this,t,"atlasjson",r,[D,L,D.linkFile]):P.call(this,t,"atlasjson",r,[D,L])},addToCache:function addToCache(){if(this.isReadyToProcess()){var t=this.files[0],r=this.files[1],o=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(t.key,t.data,r.data,o),r.addToCache(),this.complete=!0}}});h.register("aseprite",(function(t,r,o,a,h){var d;if(Array.isArray(t))for(var T=0;T<t.length;T++)d=new O(this,t[T]),this.addFile(d.files);else d=new O(this,t,r,o,a,h),this.addFile(d.files);return this})),t.exports=O},function(t,r,o){var a=o(0),h=o(8),d=o(2),T=o(71),S=o(7),A=o(61),P=o(49),O=new a({Extends:P,initialize:function AtlasJSONFile(t,r,o,a,h,O){var D,L;if(S(r)){var I=r;r=d(I,"key"),D=new T(t,{key:r,url:d(I,"textureURL"),extension:d(I,"textureExtension","png"),normalMap:d(I,"normalMap"),xhrSettings:d(I,"textureXhrSettings")}),L=new A(t,{key:r,url:d(I,"atlasURL"),extension:d(I,"atlasExtension","json"),xhrSettings:d(I,"atlasXhrSettings")})}else D=new T(t,r,o,h),L=new A(t,r,a,O);D.linkFile?P.call(this,t,"atlasjson",r,[D,L,D.linkFile]):P.call(this,t,"atlasjson",r,[D,L])},addToCache:function addToCache(){if(this.isReadyToProcess()){var t=this.files[0],r=this.files[1],o=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(t.key,t.data,r.data,o),r.pendingDestroy(),this.complete=!0}}});h.register("atlas",(function(t,r,o,a,h){var d;if(Array.isArray(t))for(var T=0;T<t.length;T++)d=new O(this,t[T]),this.addFile(d.files);else d=new O(this,t,r,o,a,h),this.addFile(d.files);return this})),t.exports=O},function(t,r,o){var a=o(0),h=o(8),d=o(2),T=o(71),S=o(7),A=o(49),P=o(241),O=new a({Extends:A,initialize:function AtlasXMLFile(t,r,o,a,h,O){var D,L;if(S(r)){var I=r;r=d(I,"key"),D=new T(t,{key:r,url:d(I,"textureURL"),extension:d(I,"textureExtension","png"),normalMap:d(I,"normalMap"),xhrSettings:d(I,"textureXhrSettings")}),L=new P(t,{key:r,url:d(I,"atlasURL"),extension:d(I,"atlasExtension","xml"),xhrSettings:d(I,"atlasXhrSettings")})}else D=new T(t,r,o,h),L=new P(t,r,a,O);D.linkFile?A.call(this,t,"atlasxml",r,[D,L,D.linkFile]):A.call(this,t,"atlasxml",r,[D,L])},addToCache:function addToCache(){if(this.isReadyToProcess()){var t=this.files[0],r=this.files[1],o=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(t.key,t.data,r.data,o),r.pendingDestroy(),this.complete=!0}}});h.register("atlasXML",(function(t,r,o,a,h){var d;if(Array.isArray(t))for(var T=0;T<t.length;T++)d=new O(this,t[T]),this.addFile(d.files);else d=new O(this,t,r,o,a,h),this.addFile(d.files);return this})),t.exports=O},function(t,r,o){var a=o(518),h=o(0),d=o(8),T=o(2),S=o(7),A=o(61),P=o(49),O=new h({Extends:P,initialize:function AudioSpriteFile(t,r,o,h,d,O,D){if(S(r)){var L=r;r=T(L,"key"),o=T(L,"jsonURL"),h=T(L,"audioURL"),d=T(L,"audioConfig"),O=T(L,"audioXhrSettings"),D=T(L,"jsonXhrSettings")}var I;if(h){var B=a.create(t,r,h,d,O);B&&(I=new A(t,r,o,D),P.call(this,t,"audiosprite",r,[B,I]),this.config.resourceLoad=!1)}else I=new A(t,r,o,D),P.call(this,t,"audiosprite",r,[I]),this.config.resourceLoad=!0,this.config.audioConfig=d,this.config.audioXhrSettings=O},onFileComplete:function onFileComplete(t){if(-1!==this.files.indexOf(t)&&(this.pending--,this.config.resourceLoad&&"json"===t.type&&t.data.hasOwnProperty("resources"))){var r=t.data.resources,o=T(this.config,"audioConfig"),h=T(this.config,"audioXhrSettings"),d=a.create(this.loader,t.key,r,o,h);d&&(this.addToMultiFile(d),this.loader.addFile(d))}},addToCache:function addToCache(){if(this.isReadyToProcess()){var t=this.files[0],r=this.files[1];t.addToCache(),r.addToCache(),this.complete=!0}}});d.register("audioSprite",(function(t,r,o,a,h,d){var T,S=this.systems.game,A=S.config.audio,P=S.device.audio;if(A&&A.noAudio||!P.webAudio&&!P.audioData)return this;if(Array.isArray(t))for(var D=0;D<t.length;D++)(T=new O(this,t[D])).files&&this.addFile(T.files);else(T=new O(this,t,r,o,a,h,d)).files&&this.addFile(T.files);return this}))},function(t,r,o){var a=o(0),h=o(21),d=o(23),T=o(8),S=o(2),A=o(7),P=new a({Extends:d,initialize:function BinaryFile(t,r,o,a,h){var T="bin";if(A(r)){var P=r;r=S(P,"key"),o=S(P,"url"),a=S(P,"xhrSettings"),T=S(P,"extension",T),h=S(P,"dataType",h)}var O={type:"binary",cache:t.cacheManager.binary,extension:T,responseType:"arraybuffer",key:r,url:o,xhrSettings:a,config:{dataType:h}};d.call(this,t,O)},onProcess:function onProcess(){this.state=h.FILE_PROCESSING;var t=this.config.dataType;this.data=t?new t(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});T.register("binary",(function(t,r,o,a){if(Array.isArray(t))for(var h=0;h<t.length;h++)this.addFile(new P(this,t[h]));else this.addFile(new P(this,t,r,a,o));return this})),t.exports=P},function(t,r,o){var a=o(0),h=o(8),d=o(2),T=o(71),S=o(7),A=o(49),P=o(212),O=o(241),D=new a({Extends:A,initialize:function BitmapFontFile(t,r,o,a,h,P){var D,L;if(S(r)){var I=r;r=d(I,"key"),D=new T(t,{key:r,url:d(I,"textureURL"),extension:d(I,"textureExtension","png"),normalMap:d(I,"normalMap"),xhrSettings:d(I,"textureXhrSettings")}),L=new O(t,{key:r,url:d(I,"fontDataURL"),extension:d(I,"fontDataExtension","xml"),xhrSettings:d(I,"fontDataXhrSettings")})}else D=new T(t,r,o,h),L=new O(t,r,a,P);D.linkFile?A.call(this,t,"bitmapfont",r,[D,L,D.linkFile]):A.call(this,t,"bitmapfont",r,[D,L])},addToCache:function addToCache(){if(this.isReadyToProcess()){var t=this.files[0],r=this.files[1];t.addToCache(),r.pendingDestroy();var o=t.cache.get(t.key),a=P(r.data,t.cache.getFrame(t.key),0,0,o);this.loader.cacheManager.bitmapFont.add(t.key,{data:a,texture:t.key,frame:null}),this.complete=!0}}});h.register("bitmapFont",(function(t,r,o,a,h){var d;if(Array.isArray(t))for(var T=0;T<t.length;T++)d=new D(this,t[T]),this.addFile(d.files);else d=new D(this,t,r,o,a,h),this.addFile(d.files);return this})),t.exports=D},function(t,r,o){var a=o(0),h=o(21),d=o(23),T=o(8),S=o(2),A=o(7),P=new a({Extends:d,initialize:function CSSFile(t,r,o,a){var h="css";if(A(r)){var T=r;r=S(T,"key"),o=S(T,"url"),a=S(T,"xhrSettings"),h=S(T,"extension",h)}var P={type:"script",cache:!1,extension:h,responseType:"text",key:r,url:o,xhrSettings:a};d.call(this,t,P)},onProcess:function onProcess(){this.state=h.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});T.register("css",(function(t,r,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new P(this,t[a]));else this.addFile(new P(this,t,r,o));return this})),t.exports=P},function(t,r,o){var a=o(0),h=o(21),d=o(23),T=o(8),S=o(2),A=o(7),P=o(396),O=new a({Extends:d,initialize:function GLSLFile(t,r,o,a,h){var T="glsl";if(A(r)){var P=r;r=S(P,"key"),o=S(P,"url"),a=S(P,"shaderType","fragment"),h=S(P,"xhrSettings"),T=S(P,"extension",T)}else void 0===a&&(a="fragment");var O={type:"glsl",cache:t.cacheManager.shader,extension:T,responseType:"text",key:r,url:o,config:{shaderType:a},xhrSettings:h};d.call(this,t,O)},onProcess:function onProcess(){this.state=h.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function addToCache(){var t=this.data.split("\n"),r=this.extractBlock(t,0);if(r)for(;r;){var o=this.getShaderName(r.header),a=this.getShaderType(r.header),h=this.getShaderUniforms(r.header),d=r.shader;if(this.cache.has(o)){var T=this.cache.get(o);"fragment"===a?T.fragmentSrc=d:T.vertexSrc=d,T.uniforms||(T.uniforms=h)}else"fragment"===a?this.cache.add(o,new P(o,d,"",h)):this.cache.add(o,new P(o,"",d,h));r=this.extractBlock(t,r.offset)}else"fragment"===this.config.shaderType?this.cache.add(this.key,new P(this.key,this.data)):this.cache.add(this.key,new P(this.key,"",this.data));this.pendingDestroy()},getShaderName:function getShaderName(t){for(var r=0;r<t.length;r++){var o=t[r].trim();if("name:"===o.substring(0,5))return o.substring(5).trim()}return this.key},getShaderType:function getShaderType(t){for(var r=0;r<t.length;r++){var o=t[r].trim();if("type:"===o.substring(0,5))return o.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function getShaderUniforms(t){for(var r={},o=0;o<t.length;o++){var a=t[o].trim();if("uniform."===a.substring(0,8)){var h=a.indexOf(":");if(h){var d=a.substring(8,h);try{r[d]=JSON.parse(a.substring(h+1))}catch(T){console.warn("Invalid uniform JSON: "+d)}}}}return r},extractBlock:function extractBlock(t,r){for(var o=-1,a=-1,h=-1,d=!1,T=!1,S=[],A=[],P=r;P<t.length;P++){var O=t[P].trim();if("---"===O)if(-1===o)o=P,d=!0;else{if(!d){T=!1;break}a=P,d=!1,T=!0}else d?S.push(O):T&&(A.push(O),h=P)}return d||-1===a?null:{header:S,shader:A.join("\n"),offset:h}}});T.register("glsl",(function(t,r,o,a){if(Array.isArray(t))for(var h=0;h<t.length;h++)this.addFile(new O(this,t[h]));else this.addFile(new O(this,t,r,o,a));return this})),t.exports=O},function(t,r,o){var a=o(0),h=o(21),d=o(23),T=o(8),S=o(2),A=o(7),P=new a({Extends:d,initialize:function HTMLFile(t,r,o,a){var h="html";if(A(r)){var T=r;r=S(T,"key"),o=S(T,"url"),a=S(T,"xhrSettings"),h=S(T,"extension",h)}var P={type:"text",cache:t.cacheManager.html,extension:h,responseType:"text",key:r,url:o,xhrSettings:a};d.call(this,t,P)},onProcess:function onProcess(){this.state=h.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});T.register("html",(function(t,r,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new P(this,t[a]));else this.addFile(new P(this,t,r,o));return this})),t.exports=P},function(t,r,o){var a=o(0),h=o(21),d=o(23),T=o(8),S=o(2),A=o(7),P=new a({Extends:d,initialize:function HTMLTextureFile(t,r,o,a,h,T){void 0===a&&(a=512),void 0===h&&(h=512);var P="html";if(A(r)){var O=r;r=S(O,"key"),o=S(O,"url"),T=S(O,"xhrSettings"),P=S(O,"extension",P),a=S(O,"width",a),h=S(O,"height",h)}var D={type:"html",cache:t.textureManager,extension:P,responseType:"text",key:r,url:o,xhrSettings:T,config:{width:a,height:h}};d.call(this,t,D)},onProcess:function onProcess(){this.state=h.FILE_PROCESSING;var t=this.config.width,r=this.config.height,o=[];o.push('<svg width="'+t+'px" height="'+r+'px" viewBox="0 0 '+t+" "+r+'" xmlns="http://www.w3.org/2000/svg">'),o.push('<foreignObject width="100%" height="100%">'),o.push('<body xmlns="http://www.w3.org/1999/xhtml">'),o.push(this.xhrLoader.responseText),o.push("</body>"),o.push("</foreignObject>"),o.push("</svg>");var a=[o.join("\n")],T=this;try{var S=new window.Blob(a,{type:"image/svg+xml;charset=utf-8"})}catch(A){return T.state=h.FILE_ERRORED,void T.onProcessComplete()}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){d.revokeObjectURL(T.data),T.onProcessComplete()},this.data.onerror=function(){d.revokeObjectURL(T.data),T.onProcessError()},d.createObjectURL(this.data,S,"image/svg+xml")},addToCache:function addToCache(){var t=this.cache.addImage(this.key,this.data);this.pendingDestroy(t)}});T.register("htmlTexture",(function(t,r,o,a,h){if(Array.isArray(t))for(var d=0;d<t.length;d++)this.addFile(new P(this,t[d]));else this.addFile(new P(this,t,r,o,a,h));return this})),t.exports=P},function(t,r,o){var a=o(0),h=o(8),d=o(2),T=o(71),S=o(7),A=o(61),P=o(49),O=new a({Extends:P,initialize:function MultiAtlasFile(t,r,o,a,h,T,O){if(S(r)){var D=r;r=d(D,"key"),o=d(D,"url",!1)?d(D,"url"):d(D,"atlasURL"),T=d(D,"xhrSettings"),a=d(D,"path"),h=d(D,"baseURL"),O=d(D,"textureXhrSettings")}var L=new A(t,r,o,T);P.call(this,t,"multiatlas",r,[L]),this.config.path=a,this.config.baseURL=h,this.config.textureXhrSettings=O},onFileComplete:function onFileComplete(t){if(-1!==this.files.indexOf(t)&&(this.pending--,"json"===t.type&&t.data.hasOwnProperty("textures"))){var r=t.data.textures,o=this.config,a=this.loader,h=a.baseURL,S=a.path,A=a.prefix,P=d(o,"baseURL",this.baseURL),O=d(o,"path",this.path),D=d(o,"prefix",this.prefix),L=d(o,"textureXhrSettings");a.setBaseURL(P),a.setPath(O),a.setPrefix(D);for(var I=0;I<r.length;I++){var B=r[I].image,N="MA"+this.multiKeyIndex+"_"+B,G=new T(a,N,B,L);if(this.addToMultiFile(G),a.addFile(G),r[I].normalMap){var Y=new T(a,N,r[I].normalMap,L);Y.type="normalMap",G.setLink(Y),this.addToMultiFile(Y),a.addFile(Y)}}a.setBaseURL(h),a.setPath(S),a.setPrefix(A)}},addToCache:function addToCache(){if(this.isReadyToProcess()){for(var t=this.files[0],r=[],o=[],a=[],h=1;h<this.files.length;h++){var d=this.files[h];if("normalMap"!==d.type)for(var T=d.key.indexOf("_"),S=d.key.substr(T+1),A=d.data,P=0;P<t.data.textures.length;P++){var O=t.data.textures[P];if(O.image===S){o.push(A),r.push(O),d.linkFile&&a.push(d.linkFile.data);break}}}for(0===a.length&&(a=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,o,r,a),this.complete=!0,h=0;h<this.files.length;h++)this.files[h].pendingDestroy()}}});h.register("multiatlas",(function(t,r,o,a,h){var d;if(Array.isArray(t))for(var T=0;T<t.length;T++)d=new O(this,t[T]),this.addFile(d.files);else d=new O(this,t,r,o,a,h),this.addFile(d.files);return this})),t.exports=O},function(t,r,o){var a=o(0),h=o(8),d=o(2),T=o(7),S=o(49),A=o(520),P=new a({Extends:S,initialize:function MultiScriptFile(t,r,o,a){var h="js",P=[];if(T(r)){var O=r;r=d(O,"key"),o=d(O,"url"),a=d(O,"xhrSettings"),h=d(O,"extension",h)}Array.isArray(o)||(o=[o]);for(var D=0;D<o.length;D++){var L=new A(t,{key:r+"_"+D.toString(),url:o[D],extension:h,xhrSettings:a});L.onProcess=function(){this.onProcessComplete()},P.push(L)}S.call(this,t,"scripts",r,P)},addToCache:function addToCache(){if(this.isReadyToProcess()){for(var t=0;t<this.files.length;t++){var r=this.files[t];r.data=document.createElement("script"),r.data.language="javascript",r.data.type="text/javascript",r.data.defer=!1,r.data.text=r.xhrLoader.responseText,document.head.appendChild(r.data)}this.complete=!0}}});h.register("scripts",(function(t,r,o){var a;if(Array.isArray(t))for(var h=0;h<t.length;h++)a=new P(this,t[h]),this.addFile(a.files);else a=new P(this,t,r,o),this.addFile(a.files);return this})),t.exports=P},function(t,r,o){var a=o(0),h=o(8),d=o(2),T=o(7),S=o(49),A=o(498),P=o(499),O=o(242),D=new a({Extends:S,initialize:function OBJFile(t,r,o,a,h,A){var P,D,L=t.cacheManager.obj;if(T(r)){var I=r;r=d(I,"key"),P=new O(t,{key:r,type:"obj",cache:L,url:d(I,"url"),extension:d(I,"extension","obj"),xhrSettings:d(I,"xhrSettings"),config:{flipUV:d(I,"flipUV",h)}}),(a=d(I,"matURL"))&&(D=new O(t,{key:r,type:"mat",cache:L,url:a,extension:d(I,"matExtension","mat"),xhrSettings:d(I,"xhrSettings")}))}else P=new O(t,{key:r,url:o,type:"obj",cache:L,extension:"obj",xhrSettings:A,config:{flipUV:h}}),a&&(D=new O(t,{key:r,url:a,type:"mat",cache:L,extension:"mat",xhrSettings:A}));S.call(this,t,"obj",r,[P,D])},addToCache:function addToCache(){if(this.isReadyToProcess()){var t=this.files[0],r=this.files[1],o=A(t.data,t.config.flipUV);r&&(o.materials=P(r.data)),t.cache.add(t.key,o),this.complete=!0}}});h.register("obj",(function(t,r,o,a,h){var d;if(Array.isArray(t))for(var T=0;T<t.length;T++)d=new D(this,t[T]),this.addFile(d.files);else d=new D(this,t,r,o,a,h),this.addFile(d.files);return this})),t.exports=D},function(t,r,o){var a=o(0),h=o(21),d=o(8),T=o(61),S=new a({Extends:T,initialize:function PackFile(t,r,o,a,h){T.call(this,t,r,o,a,h),this.type="packfile"},onProcess:function onProcess(){this.state!==h.FILE_POPULATED&&(this.state=h.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});d.register("pack",(function(t,r,o,a){if(Array.isArray(t))for(var h=0;h<t.length;h++)this.addFile(new S(this,t[h]));else this.addFile(new S(this,t,r,a,o));return this})),t.exports=S},function(t,r,o){var a=o(0),h=o(21),d=o(23),T=o(8),S=o(2),A=o(7),P=new a({Extends:d,initialize:function PluginFile(t,r,o,a,T,P){var O="js";if(A(r)){var D=r;r=S(D,"key"),o=S(D,"url"),P=S(D,"xhrSettings"),O=S(D,"extension",O),a=S(D,"start"),T=S(D,"mapping")}var L={type:"plugin",cache:!1,extension:O,responseType:"text",key:r,url:o,xhrSettings:P,config:{start:a,mapping:T}};d.call(this,t,L),"function"==typeof o&&(this.data=o,this.state=h.FILE_POPULATED)},onProcess:function onProcess(){var t=this.loader.systems.plugins,r=this.config,o=S(r,"start",!1),a=S(r,"mapping",null);if(this.state===h.FILE_POPULATED)t.install(this.key,this.data,o,a);else{this.state=h.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var d=t.install(this.key,window[this.key],o,a);(o||a)&&(this.loader.systems[a]=d,this.loader.scene[a]=d)}this.onProcessComplete()}});T.register("plugin",(function(t,r,o,a,h){if(Array.isArray(t))for(var d=0;d<t.length;d++)this.addFile(new P(this,t[d]));else this.addFile(new P(this,t,r,o,a,h));return this})),t.exports=P},function(t,r,o){var a=o(0),h=o(21),d=o(23),T=o(8),S=o(2),A=o(7),P=new a({Extends:d,initialize:function SceneFile(t,r,o,a){var h="js";if(A(r)){var T=r;r=S(T,"key"),o=S(T,"url"),a=S(T,"xhrSettings"),h=S(T,"extension",h)}var P={type:"text",extension:h,responseType:"text",key:r,url:o,xhrSettings:a};d.call(this,t,P)},onProcess:function onProcess(){this.state=h.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function addToCache(){var t=this.data.concat("(function(){\nreturn new "+this.key+"();\n}).call(this);"),r=eval;this.loader.sceneManager.add(this.key,r(t)),this.complete=!0}});T.register("sceneFile",(function(t,r,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new P(this,t[a]));else this.addFile(new P(this,t,r,o));return this})),t.exports=P},function(t,r,o){var a=o(0),h=o(21),d=o(23),T=o(8),S=o(2),A=o(7),P=new a({Extends:d,initialize:function ScenePluginFile(t,r,o,a,T,P){var O="js";if(A(r)){var D=r;r=S(D,"key"),o=S(D,"url"),P=S(D,"xhrSettings"),O=S(D,"extension",O),a=S(D,"systemKey"),T=S(D,"sceneKey")}var L={type:"scenePlugin",cache:!1,extension:O,responseType:"text",key:r,url:o,xhrSettings:P,config:{systemKey:a,sceneKey:T}};d.call(this,t,L),"function"==typeof o&&(this.data=o,this.state=h.FILE_POPULATED)},onProcess:function onProcess(){var t=this.loader.systems.plugins,r=this.config,o=this.key,a=S(r,"systemKey",o),d=S(r,"sceneKey",o);this.state===h.FILE_POPULATED?t.installScenePlugin(a,this.data,d,this.loader.scene,!0):(this.state=h.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),t.installScenePlugin(a,window[this.key],d,this.loader.scene,!0)),this.onProcessComplete()}});T.register("scenePlugin",(function(t,r,o,a,h){if(Array.isArray(t))for(var d=0;d<t.length;d++)this.addFile(new P(this,t[d]));else this.addFile(new P(this,t,r,o,a,h));return this})),t.exports=P},function(t,r,o){var a=o(0),h=o(8),d=o(71),T=new a({Extends:d,initialize:function SpriteSheetFile(t,r,o,a,h){d.call(this,t,r,o,h,a),this.type="spritesheet"},addToCache:function addToCache(){var t=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(t)}});h.register("spritesheet",(function(t,r,o,a){if(Array.isArray(t))for(var h=0;h<t.length;h++)this.addFile(new T(this,t[h]));else this.addFile(new T(this,t,r,o,a));return this})),t.exports=T},function(t,r,o){var a=o(0),h=o(21),d=o(23),T=o(8),S=o(2),A=o(7),P=new a({Extends:d,initialize:function SVGFile(t,r,o,a,h){var T="svg";if(A(r)){var P=r;r=S(P,"key"),o=S(P,"url"),a=S(P,"svgConfig",{}),h=S(P,"xhrSettings"),T=S(P,"extension",T)}var O={type:"svg",cache:t.textureManager,extension:T,responseType:"text",key:r,url:o,xhrSettings:h,config:{width:S(a,"width"),height:S(a,"height"),scale:S(a,"scale")}};d.call(this,t,O)},onProcess:function onProcess(){this.state=h.FILE_PROCESSING;var t=this.xhrLoader.responseText,r=[t],o=this.config.width,a=this.config.height,T=this.config.scale;t:if(o&&a||T){var S=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("svg")[0],A=S.hasAttribute("viewBox"),P=parseFloat(S.getAttribute("width")),O=parseFloat(S.getAttribute("height"));if(!A&&P&&O)S.setAttribute("viewBox","0  0 "+P+" "+O);else if(A&&!P&&!O){var D=S.getAttribute("viewBox").split(/\s+|,/);P=D[2],O=D[3]}if(T){if(!P||!O)break t;o=P*T,a=O*T}S.setAttribute("width",o.toString()+"px"),S.setAttribute("height",a.toString()+"px"),r=[(new XMLSerializer).serializeToString(S)]}try{var L=new window.Blob(r,{type:"image/svg+xml;charset=utf-8"})}catch(N){return void this.onProcessError()}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var I=this,B=!1;this.data.onload=function(){B||d.revokeObjectURL(I.data),I.onProcessComplete()},this.data.onerror=function(){B?I.onProcessError():(B=!0,d.revokeObjectURL(I.data),I.data.src="data:image/svg+xml,"+encodeURIComponent(r.join("")))},d.createObjectURL(this.data,L,"image/svg+xml")},addToCache:function addToCache(){var t=this.cache.addImage(this.key,this.data);this.pendingDestroy(t)}});T.register("svg",(function(t,r,o,a){if(Array.isArray(t))for(var h=0;h<t.length;h++)this.addFile(new P(this,t[h]));else this.addFile(new P(this,t,r,o,a));return this})),t.exports=P},function(t,r,o){var a=o(0),h=o(21),d=o(23),T=o(8),S=o(2),A=o(7),P=o(40),O=new a({Extends:d,initialize:function TilemapCSVFile(t,r,o,a){var h="csv";if(A(r)){var T=r;r=S(T,"key"),o=S(T,"url"),a=S(T,"xhrSettings"),h=S(T,"extension",h)}var O={type:"tilemapCSV",cache:t.cacheManager.tilemap,extension:h,responseType:"text",key:r,url:o,xhrSettings:a};d.call(this,t,O),this.tilemapFormat=P.CSV},onProcess:function onProcess(){this.state=h.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function addToCache(){var t={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});T.register("tilemapCSV",(function(t,r,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new O(this,t[a]));else this.addFile(new O(this,t,r,o));return this})),t.exports=O},function(t,r,o){var a=o(0),h=o(8),d=o(61),T=o(40),S=new a({Extends:d,initialize:function TilemapImpactFile(t,r,o,a){d.call(this,t,r,o,a),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function addToCache(){var t={format:T.WELTMEISTER,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});h.register("tilemapImpact",(function(t,r,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new S(this,t[a]));else this.addFile(new S(this,t,r,o));return this})),t.exports=S},function(t,r,o){var a=o(0),h=o(8),d=o(61),T=o(40),S=new a({Extends:d,initialize:function TilemapJSONFile(t,r,o,a){d.call(this,t,r,o,a),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function addToCache(){var t={format:T.TILED_JSON,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});h.register("tilemapTiledJSON",(function(t,r,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new S(this,t[a]));else this.addFile(new S(this,t,r,o));return this})),t.exports=S},function(t,r,o){var a=o(0),h=o(8),d=o(2),T=o(71),S=o(7),A=o(49),P=o(242),O=new a({Extends:A,initialize:function UnityAtlasFile(t,r,o,a,h,O){var D,L;if(S(r)){var I=r;r=d(I,"key"),D=new T(t,{key:r,url:d(I,"textureURL"),extension:d(I,"textureExtension","png"),normalMap:d(I,"normalMap"),xhrSettings:d(I,"textureXhrSettings")}),L=new P(t,{key:r,url:d(I,"atlasURL"),extension:d(I,"atlasExtension","txt"),xhrSettings:d(I,"atlasXhrSettings")})}else D=new T(t,r,o,h),L=new P(t,r,a,O);D.linkFile?A.call(this,t,"unityatlas",r,[D,L,D.linkFile]):A.call(this,t,"unityatlas",r,[D,L])},addToCache:function addToCache(){if(this.isReadyToProcess()){var t=this.files[0],r=this.files[1],o=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(t.key,t.data,r.data,o),r.pendingDestroy(),this.complete=!0}}});h.register("unityAtlas",(function(t,r,o,a,h){var d;if(Array.isArray(t))for(var T=0;T<t.length;T++)d=new O(this,t[T]),this.addFile(d.files);else d=new O(this,t,r,o,a,h),this.addFile(d.files);return this})),t.exports=O},function(t,r,o){var a=o(0),h=o(21),d=o(23),T=o(8),S=o(155),A=o(2),P=o(7),O=new a({Extends:d,initialize:function VideoFile(t,r,o,a,h,T,S){void 0===a&&(a="loadeddata"),void 0===h&&(h=!1),void 0===T&&(T=!1),"loadeddata"!==a&&"canplay"!==a&&"canplaythrough"!==a&&(a="loadeddata");var A={type:"video",cache:t.cacheManager.video,extension:o.type,responseType:"blob",key:r,url:o.url,xhrSettings:S,config:{loadEvent:a,asBlob:h,noAudio:T}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),d.call(this,t,A)},onProcess:function onProcess(){if(this.state=h.FILE_PROCESSING,this.config.asBlob){var t=this.createVideoElement();this.data=t;var r=this;this.data.onloadeddata=function(){r.onProcessComplete()},this.data.onerror=function(){d.revokeObjectURL(r.data),r.onProcessError()},d.createObjectURL(t,this.xhrLoader.response,""),t.load()}else this.onProcessComplete()},createVideoElement:function createVideoElement(){var t=document.createElement("video");return t.controls=!1,t.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(t.muted=!0,t.defaultMuted=!0,t.setAttribute("autoplay","autoplay")),t.setAttribute("playsinline","playsinline"),t.setAttribute("preload","auto"),t},onVideoLoadHandler:function onVideoLoadHandler(t){var r=t.target;r.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),r.removeEventListener("error",this.onErrorCallback,!0),this.data=r,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function onVideoErrorHandler(t){var r=t.target;r&&(r.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),r.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function load(){var t=this.config.loadEvent;if(this.config.asBlob)d.prototype.load.call(this);else{this.percentComplete=0;var r=this.createVideoElement();r.addEventListener(t,this.onLoadCallback,!0),r.addEventListener("error",this.onErrorCallback,!0),r.src=S(this,this.loader.baseURL),r.load()}}});O.create=function(t,r,o,a,h,d,T){var S=t.systems.game;P(r)&&(o=A(r,"url",[]),a=A(r,"loadEvent","loadeddata"),h=A(r,"asBlob",!1),d=A(r,"noAudio",!1),T=A(r,"xhrSettings"),r=A(r,"key"));var D=O.getVideoURL(S,o);if(D)return new O(t,r,D,a,h,d,T)},O.getVideoURL=function(t,r){Array.isArray(r)||(r=[r]);for(var o=0;o<r.length;o++){var a,h=A(r[o],"url",r[o]);if(0===h.indexOf("blob:"))return{url:h,type:""};if(a=0===h.indexOf("data:")?h.split(",")[0].match(/\/(.*?);/):h.match(/\.([a-zA-Z0-9]+)($|\?)/),a=A(r[o],"type",a?a[1]:"").toLowerCase(),t.device.video[a])return{url:h,type:a}}return null},T.register("video",(function(t,r,o,a,h,d){var T;if(Array.isArray(t))for(var S=0;S<t.length;S++)(T=O.create(this,t[S]))&&this.addFile(T);else(T=O.create(this,t,r,o,a,h,d))&&this.addFile(T);return this})),t.exports=O},function(t,r,o){var a=o(0),h=o(21),d=o(149),T=o(9),S=o(95),A=o(8),P=o(2),O=o(24),D=o(20),L=o(156),I=new a({Extends:T,initialize:function LoaderPlugin(t){T.call(this);var r=t.sys.game.config,o=t.sys.settings.loader;this.scene=t,this.systems=t.sys,this.cacheManager=t.sys.cache,this.textureManager=t.sys.textures,this.sceneManager=t.sys.game.scene,A.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(P(o,"baseURL",r.loaderBaseURL)),this.setPath(P(o,"path",r.loaderPath)),this.setPrefix(P(o,"prefix",r.loaderPrefix)),this.maxParallelDownloads=P(o,"maxParallelDownloads",r.loaderMaxParallelDownloads),this.xhr=L(P(o,"responseType",r.loaderResponseType),P(o,"async",r.loaderAsync),P(o,"user",r.loaderUser),P(o,"password",r.loaderPassword),P(o,"timeout",r.loaderTimeout),P(o,"withCredentials",r.loaderWithCredentials)),this.crossOrigin=P(o,"crossOrigin",r.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new d,this.inflight=new d,this.queue=new d,this._deleteQueue=new d,this.totalFailed=0,this.totalComplete=0,this.state=h.LOADER_IDLE,this.multiKeyIndex=0,t.sys.events.once(D.BOOT,this.boot,this),t.sys.events.on(D.START,this.pluginStart,this)},boot:function boot(){this.systems.events.once(D.DESTROY,this.destroy,this)},pluginStart:function pluginStart(){this.systems.events.once(D.SHUTDOWN,this.shutdown,this)},setBaseURL:function setBaseURL(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.baseURL=t,this},setPath:function setPath(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.path=t,this},setPrefix:function setPrefix(t){return void 0===t&&(t=""),this.prefix=t,this},setCORS:function setCORS(t){return this.crossOrigin=t,this},addFile:function addFile(t){Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var o=t[r];this.keyExists(o)||(this.list.set(o),this.emit(S.ADD,o.key,o.type,this,o),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function keyExists(t){var r=t.hasCacheConflict();return r||this.list.iterate((function(o){if(o.type===t.type&&o.key===t.key)return r=!0,!1})),!r&&this.isLoading()&&(this.inflight.iterate((function(o){if(o.type===t.type&&o.key===t.key)return r=!0,!1})),this.queue.iterate((function(o){if(o.type===t.type&&o.key===t.key)return r=!0,!1}))),r},addPack:function addPack(t,r){r&&t.hasOwnProperty(r)&&(t={packKey:t[r]});var o=0,a=this.baseURL,h=this.path,d=this.prefix;for(var T in t)if(Object.prototype.hasOwnProperty.call(t,T)){var S=t[T],A=P(S,"baseURL",a),O=P(S,"path",h),D=P(S,"prefix",d),L=P(S,"files",null),I=P(S,"defaultType","void");if(Array.isArray(L)){this.setBaseURL(A),this.setPath(O),this.setPrefix(D);for(var B=0;B<L.length;B++){var N=L[B],G=N.hasOwnProperty("type")?N.type:I;this[G]&&(this[G](N),o++)}}}return this.setBaseURL(a),this.setPath(h),this.setPrefix(d),o>0},isLoading:function isLoading(){return this.state===h.LOADER_LOADING||this.state===h.LOADER_PROCESSING},isReady:function isReady(){return this.state===h.LOADER_IDLE||this.state===h.LOADER_COMPLETE},start:function start(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(S.START,this),0===this.list.size?this.loadComplete():(this.state=h.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(D.UPDATE,this.update,this)))},updateProgress:function updateProgress(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(S.PROGRESS,this.progress)},update:function update(){this.state===h.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function checkLoadQueue(){this.list.each((function(t){if((t.state===h.FILE_POPULATED||t.state===h.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(t),this.list.delete(t),t.crossOrigin||(t.crossOrigin=this.crossOrigin),t.load()),this.inflight.size===this.maxParallelDownloads)return!1}),this)},nextFile:function nextFile(t,r){this.inflight&&(this.inflight.delete(t),this.updateProgress(),r?(this.totalComplete++,this.queue.set(t),this.emit(S.FILE_LOAD,t),t.onProcess()):(this.totalFailed++,this._deleteQueue.set(t),this.emit(S.FILE_LOAD_ERROR,t),this.fileProcessComplete(t)))},fileProcessComplete:function fileProcessComplete(t){this.scene&&this.systems&&this.systems.game&&!this.systems.game.pendingDestroy&&(t.state===h.FILE_ERRORED?t.multiFile&&t.multiFile.onFileFailed(t):t.state===h.FILE_COMPLETE&&(t.multiFile?t.multiFile.isReadyToProcess()&&t.multiFile.addToCache():t.addToCache()),this.queue.delete(t),0===this.list.size&&0===this.inflight.size&&0===this.queue.size&&this.loadComplete())},loadComplete:function loadComplete(){this.emit(S.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=h.LOADER_COMPLETE,this.systems.events.off(D.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(S.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function flagForRemoval(t){this._deleteQueue.set(t)},saveJSON:function saveJSON(t,r){return this.save(JSON.stringify(t),r)},save:function save(t,r,o){void 0===r&&(r="file.json"),void 0===o&&(o="application/json");var a=new Blob([t],{type:o}),h=URL.createObjectURL(a),d=document.createElement("a");return d.download=r,d.textContent="Download "+r,d.href=h,d.click(),this},reset:function reset(){this.list.clear(),this.inflight.clear(),this.queue.clear();var t=this.systems.game.config,r=this.systems.settings.loader;this.setBaseURL(P(r,"baseURL",t.loaderBaseURL)),this.setPath(P(r,"path",t.loaderPath)),this.setPrefix(P(r,"prefix",t.loaderPrefix)),this.state=h.LOADER_IDLE},shutdown:function shutdown(){this.reset(),this.state=h.LOADER_SHUTDOWN,this.systems.events.off(D.UPDATE,this.update,this),this.systems.events.off(D.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown(),this.state=h.LOADER_DESTROYED,this.systems.events.off(D.UPDATE,this.update,this),this.systems.events.off(D.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});O.register("Loader",I,"load"),t.exports=I},function(t,r,o){var a=o(62),h=o(17),d={ArcadePhysics:o(1367),Body:o(527),Collider:o(528),Components:o(243),Events:o(245),Factory:o(521),GetOverlapX:o(246),GetOverlapY:o(247),SeparateX:o(537),SeparateY:o(538),Group:o(524),Image:o(522),Sprite:o(157),StaticBody:o(539),StaticGroup:o(525),Tilemap:o(1391),World:o(526)};d=h(!1,d,a),t.exports=d},function(t,r,o){var a=o(0),h=o(36),d=o(50),T=o(353),S=o(521),A=o(2),P=o(127),O=o(523),D=o(244),L=o(24),I=o(20),B=o(3),N=o(526),G=new a({initialize:function ArcadePhysics(t){this.scene=t,this.systems=t.sys,this.config=this.getConfig(),this.world,this.add,t.sys.events.once(I.BOOT,this.boot,this),t.sys.events.on(I.START,this.start,this)},boot:function boot(){this.world=new N(this.scene,this.config),this.add=new S(this.world),this.systems.events.once(I.DESTROY,this.destroy,this)},start:function start(){this.world||(this.world=new N(this.scene,this.config),this.add=new S(this.world));var t=this.systems.events;A(this.config,"customUpdate",!1)||t.on(I.UPDATE,this.world.update,this.world),t.on(I.POST_UPDATE,this.world.postUpdate,this.world),t.once(I.SHUTDOWN,this.shutdown,this)},enableUpdate:function enableUpdate(){this.systems.events.on(I.UPDATE,this.world.update,this.world)},disableUpdate:function disableUpdate(){this.systems.events.off(I.UPDATE,this.world.update,this.world)},getConfig:function getConfig(){var t=this.systems.game.config.physics,r=this.systems.settings.physics;return P(A(r,"arcade",{}),A(t,"arcade",{}))},overlap:function overlap(t,r,o,a,h){return void 0===o&&(o=null),void 0===a&&(a=null),void 0===h&&(h=o),this.world.collideObjects(t,r,o,a,h,!0)},collide:function collide(t,r,o,a,h){return void 0===o&&(o=null),void 0===a&&(a=null),void 0===h&&(h=o),this.world.collideObjects(t,r,o,a,h,!1)},collideTiles:function collideTiles(t,r,o,a,h){return this.world.collideTiles(t,r,o,a,h)},overlapTiles:function overlapTiles(t,r,o,a,h){return this.world.overlapTiles(t,r,o,a,h)},pause:function pause(){return this.world.pause()},resume:function resume(){return this.world.resume()},accelerateTo:function accelerateTo(t,r,o,a,h,d){void 0===a&&(a=60);var T=Math.atan2(o-t.y,r-t.x);return t.body.acceleration.setToPolar(T,a),void 0!==h&&void 0!==d&&t.body.maxVelocity.set(h,d),T},accelerateToObject:function accelerateToObject(t,r,o,a,h){return this.accelerateTo(t,r.x,r.y,o,a,h)},closest:function closest(t,r){r||(r=this.world.bodies.entries);for(var o=Number.MAX_VALUE,closest=null,a=t.x,h=t.y,d=r.length,S=0;S<d;S++){var A=r[S],P=A.body||A;if(t!==A&&t!==P&&t!==P.gameObject&&t!==P.center){var O=T(a,h,P.center.x,P.center.y);O<o&&(closest=A,o=O)}}return closest},furthest:function furthest(t,r){r||(r=this.world.bodies.entries);for(var o=-1,a=null,h=t.x,d=t.y,S=r.length,A=0;A<S;A++){var P=r[A],O=P.body||P;if(t!==P&&t!==O&&t!==O.gameObject&&t!==O.center){var D=T(h,d,O.center.x,O.center.y);D>o&&(a=P,o=D)}}return a},moveTo:function moveTo(t,r,o,a,h){void 0===a&&(a=60),void 0===h&&(h=0);var T=Math.atan2(o-t.y,r-t.x);return h>0&&(a=d(t.x,t.y,r,o)/(h/1e3)),t.body.velocity.setToPolar(T,a),T},moveToObject:function moveToObject(t,r,o,a){return this.moveTo(t,r.x,r.y,o,a)},velocityFromAngle:function velocityFromAngle(t,r,o){return void 0===r&&(r=60),void 0===o&&(o=new B),o.setToPolar(h(t),r)},velocityFromRotation:function velocityFromRotation(t,r,o){return void 0===r&&(r=60),void 0===o&&(o=new B),o.setToPolar(t,r)},overlapRect:function overlapRect(t,r,o,a,h,d){return D(this.world,t,r,o,a,h,d)},overlapCirc:function overlapCirc(t,r,o,a,h){return O(this.world,t,r,o,a,h)},shutdown:function shutdown(){if(this.world){var t=this.systems.events;t.off(I.UPDATE,this.world.update,this.world),t.off(I.POST_UPDATE,this.world.postUpdate,this.world),t.off(I.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function destroy(){this.shutdown(),this.scene.sys.events.off(I.START,this.start,this),this.scene=null,this.systems=null}});L.register("ArcadePhysics",G,"arcadePhysics"),t.exports=G},function(t,r){t.exports={setAcceleration:function setAcceleration(t,r){return this.body.acceleration.set(t,r),this},setAccelerationX:function setAccelerationX(t){return this.body.acceleration.x=t,this},setAccelerationY:function setAccelerationY(t){return this.body.acceleration.y=t,this}}},function(t,r){t.exports={setAngularVelocity:function setAngularVelocity(t){return this.body.angularVelocity=t,this},setAngularAcceleration:function setAngularAcceleration(t){return this.body.angularAcceleration=t,this},setAngularDrag:function setAngularDrag(t){return this.body.angularDrag=t,this}}},function(t,r){t.exports={setBounce:function setBounce(t,r){return this.body.bounce.set(t,r),this},setBounceX:function setBounceX(t){return this.body.bounce.x=t,this},setBounceY:function setBounceY(t){return this.body.bounce.y=t,this},setCollideWorldBounds:function setCollideWorldBounds(t,r,o){return this.body.setCollideWorldBounds(t,r,o),this}}},function(t,r){t.exports={setDebug:function setDebug(t,r,o){return this.debugShowBody=t,this.debugShowVelocity=r,this.debugBodyColor=o,this},setDebugBodyColor:function setDebugBodyColor(t){return this.body.debugBodyColor=t,this},debugShowBody:{get:function get(){return this.body.debugShowBody},set:function set(t){this.body.debugShowBody=t}},debugShowVelocity:{get:function get(){return this.body.debugShowVelocity},set:function set(t){this.body.debugShowVelocity=t}},debugBodyColor:{get:function get(){return this.body.debugBodyColor},set:function set(t){this.body.debugBodyColor=t}}}},function(t,r){t.exports={setDrag:function setDrag(t,r){return this.body.drag.set(t,r),this},setDragX:function setDragX(t){return this.body.drag.x=t,this},setDragY:function setDragY(t){return this.body.drag.y=t,this},setDamping:function setDamping(t){return this.body.useDamping=t,this}}},function(t,r){var o={enableBody:function enableBody(t,r,o,a,h){return t&&this.body.reset(r,o),a&&(this.body.gameObject.active=!0),h&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function disableBody(t,r){return void 0===t&&(t=!1),void 0===r&&(r=!1),this.body.stop(),this.body.enable=!1,t&&(this.body.gameObject.active=!1),r&&(this.body.gameObject.visible=!1),this},refreshBody:function refreshBody(){return this.body.updateFromGameObject(),this}};t.exports=o},function(t,r){t.exports={setFriction:function setFriction(t,r){return this.body.friction.set(t,r),this},setFrictionX:function setFrictionX(t){return this.body.friction.x=t,this},setFrictionY:function setFrictionY(t){return this.body.friction.y=t,this}}},function(t,r){t.exports={setGravity:function setGravity(t,r){return this.body.gravity.set(t,r),this},setGravityX:function setGravityX(t){return this.body.gravity.x=t,this},setGravityY:function setGravityY(t){return this.body.gravity.y=t,this}}},function(t,r){var o={setImmovable:function setImmovable(t){return void 0===t&&(t=!0),this.body.immovable=t,this}};t.exports=o},function(t,r){t.exports={setMass:function setMass(t){return this.body.mass=t,this}}},function(t,r){var o={setPushable:function setPushable(t){return void 0===t&&(t=!0),this.body.pushable=t,this}};t.exports=o},function(t,r){t.exports={setOffset:function setOffset(t,r){return this.body.setOffset(t,r),this},setSize:function setSize(t,r,o){return this.body.setSize(t,r,o),this},setBodySize:function setBodySize(t,r,o){return this.body.setSize(t,r,o),this},setCircle:function setCircle(t,r,o){return this.body.setCircle(t,r,o),this}}},function(t,r){t.exports={setVelocity:function setVelocity(t,r){return this.body.setVelocity(t,r),this},setVelocityX:function setVelocityX(t){return this.body.setVelocityX(t),this},setVelocityY:function setVelocityY(t){return this.body.setVelocityY(t),this},setMaxVelocity:function setMaxVelocity(t,r){return this.body.maxVelocity.set(t,r),this}}},function(t,r){t.exports="collide"},function(t,r){t.exports="overlap"},function(t,r){t.exports="pause"},function(t,r){t.exports="resume"},function(t,r){t.exports="tilecollide"},function(t,r){t.exports="tileoverlap"},function(t,r){t.exports="worldbounds"},function(t,r){t.exports="worldstep"},function(t,r){var o,a,h,d,T,S,A,P,O,D,L,I,B,N,G,Y,X,U=function BlockCheck(){return D&&G&&a.blocked.right?(o.processX(-X,A,!1,!0),1):O&&Y&&a.blocked.left?(o.processX(X,A,!0),1):B&&Y&&o.blocked.right?(a.processX(-X,P,!1,!0),2):I&&G&&o.blocked.left?(a.processX(X,P,!0),2):0},z=function Run(t){if(h&&d)X*=.5,0===t||3===t?(o.processX(X,T),a.processX(-X,S)):(o.processX(-X,T),a.processX(X,S));else if(h&&!d)0===t||3===t?o.processX(X,A,!0):o.processX(-X,A,!1,!0);else if(!h&&d)0===t||3===t?a.processX(-X,P,!1,!0):a.processX(X,P,!0);else{var r=.5*X;0===t?N?(o.processX(X,0,!0),a.processX(0,null,!1,!0)):B?(o.processX(r,0,!0),a.processX(-r,0,!1,!0)):(o.processX(r,a.velocity.x,!0),a.processX(-r,null,!1,!0)):1===t?L?(o.processX(0,null,!1,!0),a.processX(X,0,!0)):D?(o.processX(-r,0,!1,!0),a.processX(r,0,!0)):(o.processX(-r,null,!1,!0),a.processX(r,o.velocity.x,!0)):2===t?N?(o.processX(-X,0,!1,!0),a.processX(0,null,!0)):I?(o.processX(-r,0,!1,!0),a.processX(r,0,!0)):(o.processX(-r,a.velocity.x,!1,!0),a.processX(r,null,!0)):3===t&&(L?(o.processX(0,null,!0),a.processX(-X,0,!1,!0)):O?(o.processX(r,0,!0),a.processX(-r,0,!1,!0)):(o.processX(r,a.velocity.y,!0),a.processX(-r,null,!1,!0)))}return!0};t.exports={BlockCheck:U,Check:function Check(){var t=o.velocity.x,r=a.velocity.x,h=Math.sqrt(r*r*a.mass/o.mass)*(r>0?1:-1),d=Math.sqrt(t*t*o.mass/a.mass)*(t>0?1:-1),A=.5*(h+d);return d-=A,T=A+(h-=A)*o.bounce.x,S=A+d*a.bounce.x,O&&Y?z(0):I&&G?z(1):D&&G?z(2):!(!B||!Y)&&z(3)},Set:function Set(t,r,T){a=r;var S=(o=t).velocity.x,z=a.velocity.x;return h=o.pushable,O=o._dx<0,D=o._dx>0,L=0===o._dx,G=Math.abs(o.right-a.x)<=Math.abs(a.right-o.x),A=z-S*o.bounce.x,d=a.pushable,I=a._dx<0,B=a._dx>0,N=0===a._dx,Y=!G,P=S-z*a.bounce.x,X=Math.abs(T),U()},Run:z,RunImmovableBody1:function RunImmovableBody1(t){1===t?a.velocity.x=0:G?a.processX(X,P,!0):a.processX(-X,P,!1,!0),o.moves&&(a.y+=(o.y-o.prev.y)*o.friction.y,a._dy=a.y-a.prev.y)},RunImmovableBody2:function RunImmovableBody2(t){2===t?o.velocity.x=0:Y?o.processX(X,A,!0):o.processX(-X,A,!1,!0),a.moves&&(o.y+=(a.y-a.prev.y)*a.friction.y,o._dy=o.y-o.prev.y)}}},function(t,r){var o,a,h,d,T,S,A,P,O,D,L,I,B,N,G,Y,X,U=function BlockCheck(){return D&&G&&a.blocked.down?(o.processY(-X,A,!1,!0),1):O&&Y&&a.blocked.up?(o.processY(X,A,!0),1):B&&Y&&o.blocked.down?(a.processY(-X,P,!1,!0),2):I&&G&&o.blocked.up?(a.processY(X,P,!0),2):0},z=function Run(t){if(h&&d)X*=.5,0===t||3===t?(o.processY(X,T),a.processY(-X,S)):(o.processY(-X,T),a.processY(X,S));else if(h&&!d)0===t||3===t?o.processY(X,A,!0):o.processY(-X,A,!1,!0);else if(!h&&d)0===t||3===t?a.processY(-X,P,!1,!0):a.processY(X,P,!0);else{var r=.5*X;0===t?N?(o.processY(X,0,!0),a.processY(0,null,!1,!0)):B?(o.processY(r,0,!0),a.processY(-r,0,!1,!0)):(o.processY(r,a.velocity.y,!0),a.processY(-r,null,!1,!0)):1===t?L?(o.processY(0,null,!1,!0),a.processY(X,0,!0)):D?(o.processY(-r,0,!1,!0),a.processY(r,0,!0)):(o.processY(-r,null,!1,!0),a.processY(r,o.velocity.y,!0)):2===t?N?(o.processY(-X,0,!1,!0),a.processY(0,null,!0)):I?(o.processY(-r,0,!1,!0),a.processY(r,0,!0)):(o.processY(-r,a.velocity.y,!1,!0),a.processY(r,null,!0)):3===t&&(L?(o.processY(0,null,!0),a.processY(-X,0,!1,!0)):O?(o.processY(r,0,!0),a.processY(-r,0,!1,!0)):(o.processY(r,a.velocity.y,!0),a.processY(-r,null,!1,!0)))}return!0};t.exports={BlockCheck:U,Check:function Check(){var t=o.velocity.y,r=a.velocity.y,h=Math.sqrt(r*r*a.mass/o.mass)*(r>0?1:-1),d=Math.sqrt(t*t*o.mass/a.mass)*(t>0?1:-1),A=.5*(h+d);return d-=A,T=A+(h-=A)*o.bounce.y,S=A+d*a.bounce.y,O&&Y?z(0):I&&G?z(1):D&&G?z(2):!(!B||!Y)&&z(3)},Set:function Set(t,r,T){a=r;var S=(o=t).velocity.y,z=a.velocity.y;return h=o.pushable,O=o._dy<0,D=o._dy>0,L=0===o._dy,G=Math.abs(o.bottom-a.y)<=Math.abs(a.bottom-o.y),A=z-S*o.bounce.y,d=a.pushable,I=a._dy<0,B=a._dy>0,N=0===a._dy,Y=!G,P=S-z*a.bounce.y,X=Math.abs(T),U()},Run:z,RunImmovableBody1:function RunImmovableBody1(t){1===t?a.velocity.y=0:G?a.processY(X,P,!0):a.processY(-X,P,!1,!0),o.moves&&(a.x+=(o.x-o.prev.x)*o.friction.x,a._dx=a.x-a.prev.x)},RunImmovableBody2:function RunImmovableBody2(t){2===t?o.velocity.y=0:Y?o.processY(X,A,!0):o.processY(-X,A,!1,!0),a.moves&&(o.x+=(a.x-a.prev.x)*a.friction.x,o._dx=o.x-o.prev.x)}}},function(t,r,o){var a={ProcessTileCallbacks:o(530),ProcessTileSeparationX:o(534),ProcessTileSeparationY:o(536),SeparateTile:o(532),TileCheckX:o(533),TileCheckY:o(535),TileIntersectsBody:o(248)};t.exports=a},function(t,r,o){var a=o(0),h=o(3),d=new a({initialize:function BodyBounds(){this.boundsCenter=new h,this.centerDiff=new h},parseBody:function parseBody(t){if(!(t=t.hasOwnProperty("body")?t.body:t).hasOwnProperty("bounds")||!t.hasOwnProperty("centerOfMass"))return!1;var r=this.boundsCenter,o=this.centerDiff,a=t.bounds.max.x-t.bounds.min.x,h=t.bounds.max.y-t.bounds.min.y,d=a*t.centerOfMass.x,T=h*t.centerOfMass.y;return r.set(a/2,h/2),o.set(d-r.x,T-r.y),!0},getTopLeft:function getTopLeft(t,r,o){if(void 0===r&&(r=0),void 0===o&&(o=0),this.parseBody(t)){var a=this.boundsCenter,d=this.centerDiff;return new h(r+a.x+d.x,o+a.y+d.y)}return!1},getTopCenter:function getTopCenter(t,r,o){if(void 0===r&&(r=0),void 0===o&&(o=0),this.parseBody(t)){var a=this.boundsCenter,d=this.centerDiff;return new h(r+d.x,o+a.y+d.y)}return!1},getTopRight:function getTopRight(t,r,o){if(void 0===r&&(r=0),void 0===o&&(o=0),this.parseBody(t)){var a=this.boundsCenter,d=this.centerDiff;return new h(r-(a.x-d.x),o+a.y+d.y)}return!1},getLeftCenter:function getLeftCenter(t,r,o){if(void 0===r&&(r=0),void 0===o&&(o=0),this.parseBody(t)){var a=this.boundsCenter,d=this.centerDiff;return new h(r+a.x+d.x,o+d.y)}return!1},getCenter:function getCenter(t,r,o){if(void 0===r&&(r=0),void 0===o&&(o=0),this.parseBody(t)){var a=this.centerDiff;return new h(r+a.x,o+a.y)}return!1},getRightCenter:function getRightCenter(t,r,o){if(void 0===r&&(r=0),void 0===o&&(o=0),this.parseBody(t)){var a=this.boundsCenter,d=this.centerDiff;return new h(r-(a.x-d.x),o+d.y)}return!1},getBottomLeft:function getBottomLeft(t,r,o){if(void 0===r&&(r=0),void 0===o&&(o=0),this.parseBody(t)){var a=this.boundsCenter,d=this.centerDiff;return new h(r+a.x+d.x,o-(a.y-d.y))}return!1},getBottomCenter:function getBottomCenter(t,r,o){if(void 0===r&&(r=0),void 0===o&&(o=0),this.parseBody(t)){var a=this.boundsCenter,d=this.centerDiff;return new h(r+d.x,o-(a.y-d.y))}return!1},getBottomRight:function getBottomRight(t,r,o){if(void 0===r&&(r=0),void 0===o&&(o=0),this.parseBody(t)){var a=this.boundsCenter,d=this.centerDiff;return new h(r-(a.x-d.x),o-(a.y-d.y))}return!1}});t.exports=d},function(t,r){function lineInt(t,r,o){o=o||0;var a,h,d,T,S,A,P,O=[0,0];return a=t[1][1]-t[0][1],h=t[0][0]-t[1][0],d=a*t[0][0]+h*t[0][1],T=r[1][1]-r[0][1],S=r[0][0]-r[1][0],A=T*r[0][0]+S*r[0][1],scalar_eq(P=a*S-T*h,0,o)||(O[0]=(S*d-h*A)/P,O[1]=(a*A-T*d)/P),O}function lineSegmentsIntersect(t,r,o,a){var h=r[0]-t[0],d=r[1]-t[1],T=a[0]-o[0],S=a[1]-o[1];if(T*d-S*h==0)return!1;var A=(h*(o[1]-t[1])+d*(t[0]-o[0]))/(T*d-S*h),P=(T*(t[1]-o[1])+S*(o[0]-t[0]))/(S*h-T*d);return A>=0&&A<=1&&P>=0&&P<=1}function triangleArea(t,r,o){return(r[0]-t[0])*(o[1]-t[1])-(o[0]-t[0])*(r[1]-t[1])}function isLeft(t,r,o){return triangleArea(t,r,o)>0}function isLeftOn(t,r,o){return triangleArea(t,r,o)>=0}function isRight(t,r,o){return triangleArea(t,r,o)<0}function isRightOn(t,r,o){return triangleArea(t,r,o)<=0}t.exports={decomp:function polygonDecomp(t){var r=polygonGetCutEdges(t);return r.length>0?polygonSlice(t,r):[t]},quickDecomp:function polygonQuickDecomp(t,r,o,a,h,d,T){d=d||100,T=T||0,h=h||25,r=void 0!==r?r:[],o=o||[],a=a||[];var S=[0,0],A=[0,0],P=[0,0],O=0,D=0,L=0,I=0,B=0,N=0,G=0,Y=[],X=[],U=t,z=t;if(z.length<3)return r;if(++T>d)return console.warn("quickDecomp: max level ("+d+") reached."),r;for(var V=0;V<t.length;++V)if(polygonIsReflex(U,V)){o.push(U[V]),O=D=Number.MAX_VALUE;for(var W=0;W<t.length;++W)isLeft(polygonAt(U,V-1),polygonAt(U,V),polygonAt(U,W))&&isRightOn(polygonAt(U,V-1),polygonAt(U,V),polygonAt(U,W-1))&&(P=getIntersectionPoint(polygonAt(U,V-1),polygonAt(U,V),polygonAt(U,W),polygonAt(U,W-1)),isRight(polygonAt(U,V+1),polygonAt(U,V),P)&&(L=sqdist(U[V],P))<D&&(D=L,A=P,N=W)),isLeft(polygonAt(U,V+1),polygonAt(U,V),polygonAt(U,W+1))&&isRightOn(polygonAt(U,V+1),polygonAt(U,V),polygonAt(U,W))&&(P=getIntersectionPoint(polygonAt(U,V+1),polygonAt(U,V),polygonAt(U,W),polygonAt(U,W+1)),isLeft(polygonAt(U,V-1),polygonAt(U,V),P)&&(L=sqdist(U[V],P))<O&&(O=L,S=P,B=W));if(N===(B+1)%t.length)P[0]=(A[0]+S[0])/2,P[1]=(A[1]+S[1])/2,a.push(P),V<B?(polygonAppend(Y,U,V,B+1),Y.push(P),X.push(P),0!==N&&polygonAppend(X,U,N,U.length),polygonAppend(X,U,0,V+1)):(0!==V&&polygonAppend(Y,U,V,U.length),polygonAppend(Y,U,0,B+1),Y.push(P),X.push(P),polygonAppend(X,U,N,V+1));else{if(N>B&&(B+=t.length),I=Number.MAX_VALUE,B<N)return r;for(W=N;W<=B;++W)isLeftOn(polygonAt(U,V-1),polygonAt(U,V),polygonAt(U,W))&&isRightOn(polygonAt(U,V+1),polygonAt(U,V),polygonAt(U,W))&&(L=sqdist(polygonAt(U,V),polygonAt(U,W)))<I&&polygonCanSee2(U,V,W)&&(I=L,G=W%t.length);V<G?(polygonAppend(Y,U,V,G+1),0!==G&&polygonAppend(X,U,G,z.length),polygonAppend(X,U,0,V+1)):(0!==V&&polygonAppend(Y,U,V,z.length),polygonAppend(Y,U,0,G+1),polygonAppend(X,U,G,V+1))}return Y.length<X.length?(polygonQuickDecomp(Y,r,o,a,h,d,T),polygonQuickDecomp(X,r,o,a,h,d,T)):(polygonQuickDecomp(X,r,o,a,h,d,T),polygonQuickDecomp(Y,r,o,a,h,d,T)),r}return r.push(t),r},isSimple:function polygonIsSimple(t){var r,o=t;for(r=0;r<o.length-1;r++)for(var a=0;a<r-1;a++)if(lineSegmentsIntersect(o[r],o[r+1],o[a],o[a+1]))return!1;for(r=1;r<o.length-2;r++)if(lineSegmentsIntersect(o[0],o[o.length-1],o[r],o[r+1]))return!1;return!0},removeCollinearPoints:function polygonRemoveCollinearPoints(t,r){for(var o=0,a=t.length-1;t.length>3&&a>=0;--a)collinear(polygonAt(t,a-1),polygonAt(t,a),polygonAt(t,a+1),r)&&(t.splice(a%t.length,1),o++);return o},removeDuplicatePoints:function polygonRemoveDuplicatePoints(t,r){for(var o=t.length-1;o>=1;--o)for(var a=t[o],h=o-1;h>=0;--h)points_eq(a,t[h],r)&&t.splice(o,1)},makeCCW:function polygonMakeCCW(t){for(var r=0,o=t,a=1;a<t.length;++a)(o[a][1]<o[r][1]||o[a][1]===o[r][1]&&o[a][0]>o[r][0])&&(r=a);return!isLeft(polygonAt(t,r-1),polygonAt(t,r),polygonAt(t,r+1))&&(function polygonReverse(t){for(var r=[],o=t.length,a=0;a!==o;a++)r.push(t.pop());for(a=0;a!==o;a++)t[a]=r[a]}(t),!0)}};var o=[],a=[];function collinear(t,r,h,d){if(d){var T=o,S=a;T[0]=r[0]-t[0],T[1]=r[1]-t[1],S[0]=h[0]-r[0],S[1]=h[1]-r[1];var A=T[0]*S[0]+T[1]*S[1],P=Math.sqrt(T[0]*T[0]+T[1]*T[1]),O=Math.sqrt(S[0]*S[0]+S[1]*S[1]);return Math.acos(A/(P*O))<d}return 0===triangleArea(t,r,h)}function sqdist(t,r){var o=r[0]-t[0],a=r[1]-t[1];return o*o+a*a}function polygonAt(t,r){var o=t.length;return t[r<0?r%o+o:r%o]}function polygonAppend(t,r,o,a){for(var h=o;h<a;h++)t.push(r[h])}function polygonIsReflex(t,r){return isRight(polygonAt(t,r-1),polygonAt(t,r),polygonAt(t,r+1))}var h=[],d=[];function polygonCanSee(t,r,o){var a,T,S=h,A=d;if(isLeftOn(polygonAt(t,r+1),polygonAt(t,r),polygonAt(t,o))&&isRightOn(polygonAt(t,r-1),polygonAt(t,r),polygonAt(t,o)))return!1;T=sqdist(polygonAt(t,r),polygonAt(t,o));for(var P=0;P!==t.length;++P)if((P+1)%t.length!==r&&P!==r&&isLeftOn(polygonAt(t,r),polygonAt(t,o),polygonAt(t,P+1))&&isRightOn(polygonAt(t,r),polygonAt(t,o),polygonAt(t,P))&&(S[0]=polygonAt(t,r),S[1]=polygonAt(t,o),A[0]=polygonAt(t,P),A[1]=polygonAt(t,P+1),a=lineInt(S,A),sqdist(polygonAt(t,r),a)<T))return!1;return!0}function polygonCanSee2(t,r,o){for(var a=0;a!==t.length;++a)if(a!==r&&a!==o&&(a+1)%t.length!==r&&(a+1)%t.length!==o&&lineSegmentsIntersect(polygonAt(t,r),polygonAt(t,o),polygonAt(t,a),polygonAt(t,a+1)))return!1;return!0}function polygonCopy(t,r,o,a){var h=a||[];if(function polygonClear(t){t.length=0}(h),r<o)for(var d=r;d<=o;d++)h.push(t[d]);else{for(d=0;d<=o;d++)h.push(t[d]);for(d=r;d<t.length;d++)h.push(t[d])}return h}function polygonGetCutEdges(t){for(var r=[],o=[],a=[],h=[],d=Number.MAX_VALUE,T=0;T<t.length;++T)if(polygonIsReflex(t,T))for(var S=0;S<t.length;++S)if(polygonCanSee(t,T,S)){o=polygonGetCutEdges(polygonCopy(t,T,S,h)),a=polygonGetCutEdges(polygonCopy(t,S,T,h));for(var A=0;A<a.length;A++)o.push(a[A]);o.length<d&&(r=o,d=o.length,r.push([polygonAt(t,T),polygonAt(t,S)]))}return r}function polygonSlice(t,r){if(0===r.length)return[t];if(r instanceof Array&&r.length&&r[0]instanceof Array&&2===r[0].length&&r[0][0]instanceof Array){for(var o=[t],a=0;a<r.length;a++)for(var h=r[a],d=0;d<o.length;d++){var T=polygonSlice(o[d],h);if(T){o.splice(d,1),o.push(T[0],T[1]);break}}return o}return h=r,a=t.indexOf(h[0]),d=t.indexOf(h[1]),-1!==a&&-1!==d&&[polygonCopy(t,a,d),polygonCopy(t,d,a)]}function getIntersectionPoint(t,r,o,a,h){h=h||0;var d=r[1]-t[1],T=t[0]-r[0],S=d*t[0]+T*t[1],A=a[1]-o[1],P=o[0]-a[0],O=A*o[0]+P*o[1],D=d*P-A*T;return scalar_eq(D,0,h)?[0,0]:[(P*S-T*O)/D,(d*O-A*S)/D]}function scalar_eq(t,r,o){return o=o||0,Math.abs(t-r)<=o}function points_eq(t,r,o){return scalar_eq(t[0],r[0],o)&&scalar_eq(t[1],r[1],o)}},function(t,r,o){var a=o(86),h=o(0),d=o(591),T=o(128),S=o(592),A=o(1395),P=o(1396),O=o(1397),D=o(593),L=o(589),I=o(590),B=o(1398),N=o(64),G=new h({initialize:function Factory(t){this.world=t,this.scene=t.scene,this.sys=t.scene.sys},rectangle:function rectangle(t,r,o,h,d){var T=a.rectangle(t,r,o,h,d);return this.world.add(T),T},trapezoid:function trapezoid(t,r,o,h,d,T){var S=a.trapezoid(t,r,o,h,d,T);return this.world.add(S),S},circle:function circle(t,r,o,h,d){var T=a.circle(t,r,o,h,d);return this.world.add(T),T},polygon:function polygon(t,r,o,h,d){var T=a.polygon(t,r,o,h,d);return this.world.add(T),T},fromVertices:function fromVertices(t,r,o,h,d,T,S){"string"==typeof o&&(o=N.fromPath(o));var A=a.fromVertices(t,r,o,h,d,T,S);return this.world.add(A),A},fromPhysicsEditor:function fromPhysicsEditor(t,r,o,a,h){void 0===h&&(h=!0);var d=L.parseBody(t,r,o,a);return h&&!this.world.has(d)&&this.world.add(d),d},fromSVG:function fromSVG(t,r,o,h,d,T){void 0===h&&(h=1),void 0===d&&(d={}),void 0===T&&(T=!0);for(var A=o.getElementsByTagName("path"),P=[],O=0;O<A.length;O++){var D=S.pathToVertices(A[O],30);1!==h&&N.scale(D,h,h),P.push(D)}var L=a.fromVertices(t,r,P,d);return T&&this.world.add(L),L},fromJSON:function fromJSON(t,r,o,a,h){void 0===a&&(a={}),void 0===h&&(h=!0);var d=I.parseBody(t,r,o,a);return d&&h&&this.world.add(d),d},imageStack:function imageStack(t,r,o,a,h,T,S,A,O){void 0===S&&(S=0),void 0===A&&(A=0),void 0===O&&(O={});var D=this.world,L=this.sys.displayList;O.addToWorld=!1;var I=d.stack(o,a,h,T,S,A,(function(o,a){var h=new P(D,o,a,t,r,O);return L.add(h),h.body}));return D.add(I),I},stack:function stack(t,r,o,a,h,T,S){var stack=d.stack(t,r,o,a,h,T,S);return this.world.add(stack),stack},pyramid:function pyramid(t,r,o,a,h,T,S){var A=d.pyramid(t,r,o,a,h,T,S);return this.world.add(A),A},chain:function chain(t,r,o,a,h,T){return d.chain(t,r,o,a,h,T)},mesh:function mesh(t,r,o,a,h){return d.mesh(t,r,o,a,h)},newtonsCradle:function newtonsCradle(t,r,o,a,h){var T=d.newtonsCradle(t,r,o,a,h);return this.world.add(T),T},car:function car(t,r,o,a,h){var T=d.car(t,r,o,a,h);return this.world.add(T),T},softBody:function softBody(t,r,o,a,h,T,S,A,P,O){var D=d.softBody(t,r,o,a,h,T,S,A,P,O);return this.world.add(D),D},joint:function joint(t,r,o,a,h){return this.constraint(t,r,o,a,h)},spring:function spring(t,r,o,a,h){return this.constraint(t,r,o,a,h)},constraint:function constraint(t,r,o,a,h){void 0===a&&(a=1),void 0===h&&(h={}),h.bodyA="body"===t.type?t:t.body,h.bodyB="body"===r.type?r:r.body,isNaN(o)||(h.length=o),h.stiffness=a;var constraint=T.create(h);return this.world.add(constraint),constraint},worldConstraint:function worldConstraint(t,r,o,a){void 0===o&&(o=1),void 0===a&&(a={}),a.bodyB="body"===t.type?t:t.body,isNaN(r)||(a.length=r),a.stiffness=o;var h=T.create(a);return this.world.add(h),h},mouseSpring:function mouseSpring(t){return this.pointerConstraint(t)},pointerConstraint:function pointerConstraint(t){void 0===t&&(t={}),t.hasOwnProperty("render")||(t.render={visible:!1});var pointerConstraint=new B(this.scene,this.world,t);return this.world.add(pointerConstraint.constraint),pointerConstraint},image:function image(t,r,o,a,h){var image=new P(this.world,t,r,o,a,h);return this.sys.displayList.add(image),image},tileBody:function tileBody(t,r){return new D(this.world,t,r)},sprite:function sprite(t,r,o,a,h){var sprite=new O(this.world,t,r,o,a,h);return this.sys.displayList.add(sprite),this.sys.updateList.add(sprite),sprite},gameObject:function gameObject(t,r,o){return A(this.world,t,r,o)},destroy:function destroy(){this.world=null,this.scene=null,this.sys=null}});t.exports=G},function(t,r,o){var a=o(249),h=o(2),d=o(3);t.exports=function MatterGameObject(t,r,o,T){void 0===o&&(o={}),void 0===T&&(T=!0);var S=r.x,A=r.y;if(r.body={temp:!0,position:{x:S,y:A}},[a.Bounce,a.Collision,a.Force,a.Friction,a.Gravity,a.Mass,a.Sensor,a.SetBody,a.Sleep,a.Static,a.Transform,a.Velocity].forEach((function(t){for(var o in t)(a=t[o]).get&&"function"==typeof a.get||a.set&&"function"==typeof a.set?Object.defineProperty(r,o,{get:t[o].get,set:t[o].set}):Object.defineProperty(r,o,{value:t[o]});var a})),r.world=t,r._tempVec2=new d(S,A),o.hasOwnProperty("type")&&"body"===o.type)r.setExistingBody(o,T);else{var P=h(o,"shape",null);P||(P="rectangle"),o.addToWorld=T,r.setBody(P,o)}return r}},function(t,r,o){var a=o(0),h=o(249),d=o(15),T=o(2),S=o(125),A=o(167),P=o(3),O=new a({Extends:S,Mixins:[h.Bounce,h.Collision,h.Force,h.Friction,h.Gravity,h.Mass,h.Sensor,h.SetBody,h.Sleep,h.Static,h.Transform,h.Velocity,A],initialize:function MatterImage(t,r,o,a,h,S){d.call(this,t.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(a,h),this.setSizeToFrame(),this.setOrigin(),this.world=t,this._tempVec2=new P(r,o);var A=T(S,"shape",null);A?this.setBody(A,S):this.setRectangle(this.width,this.height,S),this.setPosition(r,o),this.initPipeline()}});t.exports=O},function(t,r,o){var a=o(164),h=o(0),d=o(249),T=o(15),S=o(2),A=o(167),P=o(73),O=o(3),D=new h({Extends:P,Mixins:[d.Bounce,d.Collision,d.Force,d.Friction,d.Gravity,d.Mass,d.Sensor,d.SetBody,d.Sleep,d.Static,d.Transform,d.Velocity,A],initialize:function MatterSprite(t,r,o,h,d,A){T.call(this,t.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new a(this),this.setTexture(h,d),this.setSizeToFrame(),this.setOrigin(),this.world=t,this._tempVec2=new O(r,o);var P=S(A,"shape",null);P?this.setBody(P,A):this.setRectangle(this.width,this.height,A),this.setPosition(r,o),this.initPipeline()}});t.exports=D},function(t,r,o){var a=o(84),h=o(0),d=o(118),T=o(128),S=o(273),A=o(272),P=o(51),O=o(127),D=o(165),L=o(3),I=o(64),B=new h({initialize:function PointerConstraint(t,r,o){void 0===o&&(o={}),this.scene=t,this.world=r,this.camera=null,this.pointer=null,this.active=!0,this.position=new L,this.body=null,this.part=null,this.constraint=T.create(O(o,{label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}})),this.world.on(A.BEFORE_UPDATE,this.update,this),t.sys.input.on(P.POINTER_DOWN,this.onDown,this),t.sys.input.on(P.POINTER_UP,this.onUp,this)},onDown:function onDown(t){this.pointer||(this.pointer=t,this.camera=t.camera)},onUp:function onUp(t){t===this.pointer&&(this.pointer=null)},getBody:function getBody(t){var r=this.position,o=this.constraint;this.camera.getWorldPoint(t.x,t.y,r);for(var h=d.allBodies(this.world.localWorld),T=0;T<h.length;T++){var P=h[T];if(!P.ignorePointer&&a.contains(P.bounds,r)&&S.canCollide(P.collisionFilter,o.collisionFilter)&&this.hitTestBody(P,r))return this.world.emit(A.DRAG_START,P,this.part,this),!0}return!1},hitTestBody:function hitTestBody(t,r){for(var o=this.constraint,a=t.parts.length,h=a>1?1:0;h<a;h++){var d=t.parts[h];if(I.contains(d.vertices,r))return o.pointA=r,o.pointB={x:r.x-t.position.x,y:r.y-t.position.y},o.bodyB=t,o.angleB=t.angle,D.set(t,!1),this.part=d,this.body=t,!0}return!1},update:function update(){var t=this.pointer,r=this.body;if(this.active&&t)if(t.isDown||!r){if(t.isDown){if(!r&&!this.getBody(t))return;r=this.body;var o=this.position,a=this.constraint;this.camera.getWorldPoint(t.x,t.y,o),a.pointA.x=o.x,a.pointA.y=o.y,D.set(r,!1),this.world.emit(A.DRAG,r,this)}}else this.stopDrag();else r&&this.stopDrag()},stopDrag:function stopDrag(){var t=this.body,r=this.constraint;r.bodyB=null,r.pointB=null,this.pointer=null,this.body=null,this.part=null,t&&this.world.emit(A.DRAG_END,t,this)},destroy:function destroy(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(A.BEFORE_UPDATE,this.update),this.scene.sys.input.off(P.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(P.POINTER_UP,this.onUp,this)}});t.exports=B},function(t,r,o){var a={};t.exports=a;var h=o(595),d=o(32);a.name="matter-js",a.version="0.14.2",a.uses=[],a.used=[],a.use=function(){h.use(a,Array.prototype.slice.call(arguments))},a.before=function(t,r){return t=t.replace(/^Matter./,""),d.chainPathBefore(a,t,r)},a.after=function(t,r){return t=t.replace(/^Matter./,""),d.chainPathAfter(a,t,r)}},function(t,r,o){var a={};t.exports=a;var h=o(83),d=o(274),T=o(84),S=o(86),A=o(64);a.collides=function(t,r){for(var o=[],a=0;a<r.length;a++){var h=r[a];if(t!==h&&T.overlaps(h.bounds,t.bounds))for(var S=1===h.parts.length?0:1;S<h.parts.length;S++){var A=h.parts[S];if(T.overlaps(A.bounds,t.bounds)){var P=d.collides(A,t);if(P.collided){o.push(P);break}}}}return o},a.ray=function(t,r,o,d){d=d||1e-100;for(var T=h.angle(r,o),A=h.magnitude(h.sub(r,o)),P=.5*(o.x+r.x),O=.5*(o.y+r.y),D=S.rectangle(P,O,A,d,{angle:T}),L=a.collides(D,t),I=0;I<L.length;I+=1){var B=L[I];B.body=B.bodyB=B.bodyA}return L},a.region=function(t,r,o){for(var a=[],h=0;h<t.length;h++){var d=t[h],S=T.overlaps(d.bounds,r);(S&&!o||!S&&o)&&a.push(d)}return a},a.point=function(t,r){for(var o=[],a=0;a<t.length;a++){var h=t[a];if(T.contains(h.bounds,r))for(var d=1===h.parts.length?0:1;d<h.parts.length;d++){var S=h.parts[d];if(T.contains(S.bounds,r)&&A.contains(S.vertices,r)){o.push(h);break}}}return o}},function(t,r,o){var a={};t.exports=a;var h=o(596),d=o(165),T=o(599),S=o(598),A=o(1523),P=o(597),O=o(166),D=o(118),L=o(128),I=o(32),B=o(41);a.create=function(t,r){r=(r=I.isElement(t)?r:t)||{},((t=I.isElement(t)?t:null)||r.render)&&I.warn("Engine.create: engine.render is deprecated (see docs)");var o={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:P}},a=I.extend(o,r);return a.world=r.world||h.create(a.world),a.pairs=S.create(),a.broadphase=a.broadphase.controller.create(a.broadphase),a.metrics=a.metrics||{extended:!1},a.metrics=A.create(a.metrics),a},a.update=function(t,r,o){r=r||1e3/60,o=o||1;var h,P=t.world,I=t.timing,B=t.broadphase,N=[];I.timestamp+=r*I.timeScale;var G={timestamp:I.timestamp};O.trigger(t,"beforeUpdate",G);var Y=D.allBodies(P),X=D.allConstraints(P);for(A.reset(t.metrics),t.enableSleeping&&d.update(Y,I.timeScale),a._bodiesApplyGravity(Y,P.gravity),a._bodiesUpdate(Y,r,I.timeScale,o,P.bounds),L.preSolveAll(Y),h=0;h<t.constraintIterations;h++)L.solveAll(X,I.timeScale);L.postSolveAll(Y),B.controller?(P.isModified&&B.controller.clear(B),B.controller.update(B,Y,t,P.isModified),N=B.pairsList):N=Y,P.isModified&&D.setModified(P,!1,!1,!0);var U=B.detector(N,t),z=t.pairs,V=I.timestamp;for(S.update(z,U,V),S.removeOld(z,V),t.enableSleeping&&d.afterCollisions(z.list,I.timeScale),z.collisionStart.length>0&&O.trigger(t,"collisionStart",{pairs:z.collisionStart}),T.preSolvePosition(z.list),h=0;h<t.positionIterations;h++)T.solvePosition(z.list,Y,I.timeScale);for(T.postSolvePosition(Y),L.preSolveAll(Y),h=0;h<t.constraintIterations;h++)L.solveAll(X,I.timeScale);for(L.postSolveAll(Y),T.preSolveVelocity(z.list),h=0;h<t.velocityIterations;h++)T.solveVelocity(z.list,I.timeScale);return z.collisionActive.length>0&&O.trigger(t,"collisionActive",{pairs:z.collisionActive}),z.collisionEnd.length>0&&O.trigger(t,"collisionEnd",{pairs:z.collisionEnd}),A.update(t.metrics,t),a._bodiesClearForces(Y),O.trigger(t,"afterUpdate",G),t},a.merge=function(t,r){if(I.extend(t,r),r.world){t.world=r.world,a.clear(t);for(var o=D.allBodies(t.world),h=0;h<o.length;h++){var T=o[h];d.set(T,!1),T.id=I.nextId()}}},a.clear=function(t){var r=t.world;S.clear(t.pairs);var o=t.broadphase;if(o.controller){var a=D.allBodies(r);o.controller.clear(o),o.controller.update(o,a,t,!0)}},a._bodiesClearForces=function(t){for(var r=0;r<t.length;r++){var o=t[r];o.force.x=0,o.force.y=0,o.torque=0}},a._bodiesApplyGravity=function(t,r){var o=void 0!==r.scale?r.scale:.001;if((0!==r.x||0!==r.y)&&0!==o)for(var a=0;a<t.length;a++){var h=t[a];h.ignoreGravity||h.isStatic||h.isSleeping||(h.force.x+=h.mass*r.x*o*h.gravityScale.x,h.force.y+=h.mass*r.y*o*h.gravityScale.y)}},a._bodiesUpdate=function(t,r,o,a,h){for(var d=0;d<t.length;d++){var T=t[d];T.isStatic||T.isSleeping||B.update(T,r,o,a)}}},function(t,r,o){var a=o(86),h=o(41),d=o(0),T=o(32),S=o(118),A=o(1401),P=o(9),O=o(272),D=o(2),L=o(6),I=o(41),B=o(166),N=o(593),G=o(596),Y=o(83),X=new d({Extends:P,initialize:function World(t,r){P.call(this),this.scene=t,this.engine=A.create(r),this.localWorld=this.engine.world;var o=L(r,"gravity",null);o?this.setGravity(o.x,o.y,o.scale):!1===o&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=L(r,"enabled",!0),this.correction=L(r,"correction",1),this.getDelta=L(r,"getDelta",this.update60Hz);var a=D(r,"runner",{}),h=D(a,"fps",!1),d=D(a,"fps",60),T=D(a,"delta",1e3/d),S=D(a,"deltaMin",1e3/d),O=D(a,"deltaMax",1e3/(.5*d));h||(d=1e3/T),this.runner={fps:d,correction:D(a,"correction",1),deltaSampleSize:D(a,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:D(a,"isFixed",!1),delta:T,deltaMin:S,deltaMax:O},this.autoUpdate=L(r,"autoUpdate",!0);var I=L(r,"debug",!1);if(this.drawDebug="object"===_typeof(I)||I,this.debugGraphic,this.debugConfig={showAxes:D(I,"showAxes",!1),showAngleIndicator:D(I,"showAngleIndicator",!1),angleColor:D(I,"angleColor",15208787),showBroadphase:D(I,"showBroadphase",!1),broadphaseColor:D(I,"broadphaseColor",16757760),showBounds:D(I,"showBounds",!1),boundsColor:D(I,"boundsColor",16777215),showVelocity:D(I,"showVelocity",!1),velocityColor:D(I,"velocityColor",44783),showCollisions:D(I,"showCollisions",!1),collisionColor:D(I,"collisionColor",16094476),showSeparations:D(I,"showSeparations",!1),separationColor:D(I,"separationColor",16753920),showBody:D(I,"showBody",!0),showStaticBody:D(I,"showStaticBody",!0),showInternalEdges:D(I,"showInternalEdges",!1),renderFill:D(I,"renderFill",!1),renderLine:D(I,"renderLine",!0),fillColor:D(I,"fillColor",1075465),fillOpacity:D(I,"fillOpacity",1),lineColor:D(I,"lineColor",2678297),lineOpacity:D(I,"lineOpacity",1),lineThickness:D(I,"lineThickness",1),staticFillColor:D(I,"staticFillColor",857979),staticLineColor:D(I,"staticLineColor",1255396),showSleeping:D(I,"showSleeping",!1),staticBodySleepOpacity:D(I,"staticBodySleepOpacity",.7),sleepFillColor:D(I,"sleepFillColor",4605510),sleepLineColor:D(I,"sleepLineColor",10066585),showSensors:D(I,"showSensors",!0),sensorFillColor:D(I,"sensorFillColor",857979),sensorLineColor:D(I,"sensorLineColor",1255396),showPositions:D(I,"showPositions",!0),positionSize:D(I,"positionSize",4),positionColor:D(I,"positionColor",14697178),showJoint:D(I,"showJoint",!0),jointColor:D(I,"jointColor",14737474),jointLineOpacity:D(I,"jointLineOpacity",1),jointLineThickness:D(I,"jointLineThickness",2),pinSize:D(I,"pinSize",4),pinColor:D(I,"pinColor",4382944),springColor:D(I,"springColor",14697184),anchorColor:D(I,"anchorColor",15724527),anchorSize:D(I,"anchorSize",4),showConvexHulls:D(I,"showConvexHulls",!1),hullColor:D(I,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),D(r,"setBounds",!1)){var B=r.setBounds;if("boolean"==typeof B)this.setBounds();else{var N=D(B,"x",0),G=D(B,"y",0),Y=D(B,"width",t.sys.scale.width),X=D(B,"height",t.sys.scale.height),U=D(B,"thickness",64),z=D(B,"left",!0),V=D(B,"right",!0),W=D(B,"top",!0),H=D(B,"bottom",!0);this.setBounds(N,G,Y,X,U,z,V,W,H)}}},setCompositeRenderStyle:function setCompositeRenderStyle(t){var r,o,a,h=t.bodies,d=t.constraints,T=t.composites;for(r=0;r<h.length;r++)a=(o=h[r]).render,this.setBodyRenderStyle(o,a.lineColor,a.lineOpacity,a.lineThickness,a.fillColor,a.fillOpacity);for(r=0;r<d.length;r++)a=(o=d[r]).render,this.setConstraintRenderStyle(o,a.lineColor,a.lineOpacity,a.lineThickness,a.pinSize,a.anchorColor,a.anchorSize);for(r=0;r<T.length;r++)o=T[r],this.setCompositeRenderStyle(o);return this},setBodyRenderStyle:function setBodyRenderStyle(t,r,o,a,h,d){var T=t.render,S=this.debugConfig;return T?(null==r&&(r=t.isStatic?S.staticLineColor:S.lineColor),null==o&&(o=S.lineOpacity),null==a&&(a=S.lineThickness),null==h&&(h=t.isStatic?S.staticFillColor:S.fillColor),null==d&&(d=S.fillOpacity),!1!==r&&(T.lineColor=r),!1!==o&&(T.lineOpacity=o),!1!==a&&(T.lineThickness=a),!1!==h&&(T.fillColor=h),!1!==d&&(T.fillOpacity=d),this):this},setConstraintRenderStyle:function setConstraintRenderStyle(t,r,o,a,h,d,T){var S=t.render,A=this.debugConfig;if(!S)return this;if(null==r){var P=S.type;"line"===P?r=A.jointColor:"pin"===P?r=A.pinColor:"spring"===P&&(r=A.springColor)}return null==o&&(o=A.jointLineOpacity),null==a&&(a=A.jointLineThickness),null==h&&(h=A.pinSize),null==d&&(d=A.anchorColor),null==T&&(T=A.anchorSize),!1!==r&&(S.lineColor=r),!1!==o&&(S.lineOpacity=o),!1!==a&&(S.lineThickness=a),!1!==h&&(S.pinSize=h),!1!==d&&(S.anchorColor=d),!1!==T&&(S.anchorSize=T),this},setEventsProxy:function setEventsProxy(){var t=this,r=this.engine,o=this.localWorld;this.drawDebug&&(B.on(o,"compositeModified",(function(r){t.setCompositeRenderStyle(r)})),B.on(o,"beforeAdd",(function(r){for(var o=[].concat(r.object),a=0;a<o.length;a++){var h=o[a],d=h.render;"body"===h.type?t.setBodyRenderStyle(h,d.lineColor,d.lineOpacity,d.lineThickness,d.fillColor,d.fillOpacity):"composite"===h.type?t.setCompositeRenderStyle(h):"constraint"===h.type&&t.setConstraintRenderStyle(h,d.lineColor,d.lineOpacity,d.lineThickness,d.pinSize,d.anchorColor,d.anchorSize)}}))),B.on(o,"beforeAdd",(function(r){t.emit(O.BEFORE_ADD,r)})),B.on(o,"afterAdd",(function(r){t.emit(O.AFTER_ADD,r)})),B.on(o,"beforeRemove",(function(r){t.emit(O.BEFORE_REMOVE,r)})),B.on(o,"afterRemove",(function(r){t.emit(O.AFTER_REMOVE,r)})),B.on(r,"beforeUpdate",(function(r){t.emit(O.BEFORE_UPDATE,r)})),B.on(r,"afterUpdate",(function(r){t.emit(O.AFTER_UPDATE,r)})),B.on(r,"collisionStart",(function(r){var o,a,h=r.pairs;h.length>0&&(o=h[0].bodyA,a=h[0].bodyB),t.emit(O.COLLISION_START,r,o,a)})),B.on(r,"collisionActive",(function(r){var o,a,h=r.pairs;h.length>0&&(o=h[0].bodyA,a=h[0].bodyB),t.emit(O.COLLISION_ACTIVE,r,o,a)})),B.on(r,"collisionEnd",(function(r){var o,a,h=r.pairs;h.length>0&&(o=h[0].bodyA,a=h[0].bodyB),t.emit(O.COLLISION_END,r,o,a)}))},setBounds:function setBounds(t,r,o,a,h,d,T,S,A){return void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=this.scene.sys.scale.width),void 0===a&&(a=this.scene.sys.scale.height),void 0===h&&(h=64),void 0===d&&(d=!0),void 0===T&&(T=!0),void 0===S&&(S=!0),void 0===A&&(A=!0),this.updateWall(d,"left",t-h,r-h,h,a+2*h),this.updateWall(T,"right",t+o,r-h,h,a+2*h),this.updateWall(S,"top",t,r-h,o,h),this.updateWall(A,"bottom",t,r+a,o,h),this},updateWall:function updateWall(t,r,o,a,h,d){var T=this.walls[r];t?(T&&G.remove(this.localWorld,T),o+=h/2,a+=d/2,this.walls[r]=this.create(o,a,h,d,{isStatic:!0,friction:0,frictionStatic:0})):(T&&G.remove(this.localWorld,T),this.walls[r]=null)},createDebugGraphic:function createDebugGraphic(){var t=this.scene.sys.add.graphics({x:0,y:0});return t.setDepth(Number.MAX_VALUE),this.debugGraphic=t,this.drawDebug=!0,t},disableGravity:function disableGravity(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function setGravity(t,r,o){return void 0===t&&(t=0),void 0===r&&(r=1),this.localWorld.gravity.x=t,this.localWorld.gravity.y=r,void 0!==o&&(this.localWorld.gravity.scale=o),this},create:function create(t,r,o,h,d){var T=a.rectangle(t,r,o,h,d);return G.add(this.localWorld,T),T},add:function add(t){return G.add(this.localWorld,t),this},remove:function remove(t,r){Array.isArray(t)||(t=[t]);for(var o=0;o<t.length;o++){var a=t[o],h=a.body?a.body:a;S.remove(this.localWorld,h,r)}return this},removeConstraint:function removeConstraint(t,r){return S.remove(this.localWorld,t,r),this},convertTilemapLayer:function convertTilemapLayer(t,r){var o=t.layer,a=t.getTilesWithin(0,0,o.width,o.height,{isColliding:!0});return this.convertTiles(a,r),this},convertTiles:function convertTiles(t,r){if(0===t.length)return this;for(var o=0;o<t.length;o++)new N(this,t[o],r);return this},nextGroup:function nextGroup(t){return I.nextGroup(t)},nextCategory:function nextCategory(){return I.nextCategory()},pause:function pause(){return this.enabled=!1,this.emit(O.PAUSE),this},resume:function resume(){return this.enabled=!0,this.emit(O.RESUME),this},update:function update(t,r){if(this.enabled&&this.autoUpdate){var o=this.engine,a=this.runner,h=o.timing,d=this.correction;a.isFixed?r=this.getDelta(t,r):(r=t-a.timePrev||a.delta,a.timePrev=t,a.deltaHistory.push(r),a.deltaHistory=a.deltaHistory.slice(-a.deltaSampleSize),d=(r=(r=(r=Math.min.apply(null,a.deltaHistory))<a.deltaMin?a.deltaMin:r)>a.deltaMax?a.deltaMax:r)/a.delta,a.delta=r),0!==a.timeScalePrev&&(d*=h.timeScale/a.timeScalePrev),0===h.timeScale&&(d=0),a.timeScalePrev=h.timeScale,a.correction=d,a.frameCounter+=1,t-a.counterTimestamp>=1e3&&(a.fps=a.frameCounter*((t-a.counterTimestamp)/1e3),a.counterTimestamp=t,a.frameCounter=0),A.update(o,r,d)}},step:function step(t,r){A.update(this.engine,t,r)},update60Hz:function update60Hz(){return 1e3/60},update30Hz:function update30Hz(){return 1e3/30},has:function has(t){var r=t.hasOwnProperty("body")?t.body:t;return null!==S.get(this.localWorld,r.id,r.type)},getAllBodies:function getAllBodies(){return S.allBodies(this.localWorld)},getAllConstraints:function getAllConstraints(){return S.allConstraints(this.localWorld)},getAllComposites:function getAllComposites(){return S.allComposites(this.localWorld)},postUpdate:function postUpdate(){if(this.drawDebug){var t=this.debugConfig,r=this.engine,o=this.debugGraphic,a=S.allBodies(this.localWorld);this.debugGraphic.clear(),t.showBroadphase&&r.broadphase.controller&&this.renderGrid(r.broadphase,o,t.broadphaseColor,.5),t.showBounds&&this.renderBodyBounds(a,o,t.boundsColor,.5),(t.showBody||t.showStaticBody)&&this.renderBodies(a),t.showJoint&&this.renderJoints(),(t.showAxes||t.showAngleIndicator)&&this.renderBodyAxes(a,o,t.showAxes,t.angleColor,.5),t.showVelocity&&this.renderBodyVelocity(a,o,t.velocityColor,1,2),t.showSeparations&&this.renderSeparations(r.pairs.list,o,t.separationColor),t.showCollisions&&this.renderCollisions(r.pairs.list,o,t.collisionColor)}},renderGrid:function renderGrid(t,r,o,a){r.lineStyle(1,o,a);for(var h=T.keys(t.buckets),d=0;d<h.length;d++){var S=h[d];if(!(t.buckets[S].length<2)){var A=S.split(/C|R/);r.strokeRect(parseInt(A[1],10)*t.bucketWidth,parseInt(A[2],10)*t.bucketHeight,t.bucketWidth,t.bucketHeight)}}return this},renderSeparations:function renderSeparations(t,r,o){r.lineStyle(1,o,1);for(var a=0;a<t.length;a++){var h=t[a];if(h.isActive){var d=h.collision,T=d.bodyA,S=d.bodyB,A=T.position,P=S.position,O=d.penetration,D=T.isStatic||S.isStatic?1:4;S.isStatic&&(D=0),r.lineBetween(P.x,P.y,P.x-O.x*D,P.y-O.y*D),D=T.isStatic||S.isStatic?1:4,T.isStatic&&(D=0),r.lineBetween(A.x,A.y,A.x-O.x*D,A.y-O.y*D)}}return this},renderCollisions:function renderCollisions(t,r,o){var a,h;for(r.lineStyle(1,o,.5),r.fillStyle(o,1),a=0;a<t.length;a++)if((h=t[a]).isActive)for(var d=0;d<h.activeContacts.length;d++){var T=h.activeContacts[d].vertex;r.fillRect(T.x-2,T.y-2,5,5)}for(a=0;a<t.length;a++)if((h=t[a]).isActive){var S=h.collision,A=h.activeContacts;if(A.length>0){var P=A[0].vertex.x,O=A[0].vertex.y;2===A.length&&(P=(A[0].vertex.x+A[1].vertex.x)/2,O=(A[0].vertex.y+A[1].vertex.y)/2),S.bodyB===S.supports[0].body||S.bodyA.isStatic?r.lineBetween(P-8*S.normal.x,O-8*S.normal.y,P,O):r.lineBetween(P+8*S.normal.x,O+8*S.normal.y,P,O)}}return this},renderBodyBounds:function renderBodyBounds(t,r,o,a){r.lineStyle(1,o,a);for(var h=0;h<t.length;h++){var d=t[h];if(d.render.visible){var T=d.bounds;if(T)r.strokeRect(T.min.x,T.min.y,T.max.x-T.min.x,T.max.y-T.min.y);else for(var S=d.parts,A=S.length>1?1:0;A<S.length;A++){var P=S[A];r.strokeRect(P.bounds.min.x,P.bounds.min.y,P.bounds.max.x-P.bounds.min.x,P.bounds.max.y-P.bounds.min.y)}}}return this},renderBodyAxes:function renderBodyAxes(t,r,o,a,h){r.lineStyle(1,a,h);for(var d=0;d<t.length;d++){var T,S,A,P=t[d],O=P.parts;if(P.render.visible)if(o)for(S=O.length>1?1:0;S<O.length;S++)for(T=O[S],A=0;A<T.axes.length;A++){var D=T.axes[A];r.lineBetween(T.position.x,T.position.y,T.position.x+20*D.x,T.position.y+20*D.y)}else for(S=O.length>1?1:0;S<O.length;S++)for(T=O[S],A=0;A<T.axes.length;A++)r.lineBetween(T.position.x,T.position.y,(T.vertices[0].x+T.vertices[T.vertices.length-1].x)/2,(T.vertices[0].y+T.vertices[T.vertices.length-1].y)/2)}return this},renderBodyVelocity:function renderBodyVelocity(t,r,o,a,h){r.lineStyle(h,o,a);for(var d=0;d<t.length;d++){var T=t[d];T.render.visible&&r.lineBetween(T.position.x,T.position.y,T.position.x+2*(T.position.x-T.positionPrev.x),T.position.y+2*(T.position.y-T.positionPrev.y))}return this},renderBodies:function renderBodies(t){for(var r=this.debugGraphic,o=this.debugConfig,a=o.showBody,h=o.showStaticBody,d=o.showSleeping,T=o.showInternalEdges,S=o.showConvexHulls,A=o.renderFill,P=o.renderLine,O=o.staticBodySleepOpacity,D=o.sleepFillColor,L=o.sleepLineColor,I=o.hullColor,B=0;B<t.length;B++){var N=t[B];if(N.render.visible&&(h||!N.isStatic)&&(a||N.isStatic)){var G=N.render.lineColor,Y=N.render.lineOpacity,X=N.render.lineThickness,U=N.render.fillColor,z=N.render.fillOpacity;d&&N.isSleeping&&(N.isStatic?(Y*=O,z*=O):(G=L,U=D)),A||(U=null),P||(G=null),this.renderBody(N,r,T,G,Y,X,U,z);var V=N.parts.length;S&&V>1&&this.renderConvexHull(N,r,I,X)}}},renderBody:function renderBody(t,r,o,a,h,d,T,S){void 0===a&&(a=null),void 0===h&&(h=null),void 0===d&&(d=1),void 0===T&&(T=null),void 0===S&&(S=null);for(var A=this.debugConfig,P=A.sensorFillColor,O=A.sensorLineColor,D=t.parts,L=D.length,I=L>1?1:0;I<L;I++){var B=D[I],N=B.render,G=N.opacity;if(N.visible&&0!==G&&(!B.isSensor||A.showSensors)){var Y=B.circleRadius;if(r.beginPath(),B.isSensor?(null!==T&&r.fillStyle(P,S*G),null!==a&&r.lineStyle(d,O,h*G)):(null!==T&&r.fillStyle(T,S*G),null!==a&&r.lineStyle(d,a,h*G)),Y)r.arc(B.position.x,B.position.y,Y,0,2*Math.PI);else{var X=B.vertices,U=X.length;r.moveTo(X[0].x,X[0].y);for(var z=1;z<U;z++){var V=X[z];if(!X[z-1].isInternal||o?r.lineTo(V.x,V.y):r.moveTo(V.x,V.y),z<U&&V.isInternal&&!o){var W=(z+1)%U;r.moveTo(X[W].x,X[W].y)}}r.closePath()}null!==T&&r.fillPath(),null!==a&&r.strokePath()}}if(A.showPositions&&!t.isStatic){var H=t.position.x,q=t.position.y,Z=Math.ceil(A.positionSize/2);r.fillStyle(A.positionColor,1),r.fillRect(H-Z,q-Z,A.positionSize,A.positionSize)}return this},renderConvexHull:function renderConvexHull(t,r,o,a){if(void 0===a&&(a=1),t.parts.length>1){var h=t.vertices;r.lineStyle(a,o),r.beginPath(),r.moveTo(h[0].x,h[0].y);for(var d=1;d<h.length;d++)r.lineTo(h[d].x,h[d].y);r.lineTo(h[0].x,h[0].y),r.strokePath()}return this},renderJoints:function renderJoints(){for(var t=this.debugGraphic,r=S.allConstraints(this.localWorld),o=0;o<r.length;o++){var a=r[o].render,h=a.lineColor,d=a.lineOpacity,T=a.lineThickness,A=a.pinSize,P=a.anchorColor,O=a.anchorSize;this.renderConstraint(r[o],t,h,d,T,A,P,O)}},renderConstraint:function renderConstraint(t,r,o,a,h,d,S,A){var P=t.render;if(!P.visible||!t.pointA||!t.pointB)return this;r.lineStyle(h,o,a);var O,D,L=t.bodyA,I=t.bodyB;if(O=L?Y.add(L.position,t.pointA):t.pointA,"pin"===P.type)r.strokeCircle(O.x,O.y,d);else{if(D=I?Y.add(I.position,t.pointB):t.pointB,r.beginPath(),r.moveTo(O.x,O.y),"spring"===P.type)for(var B,N=Y.sub(D,O),G=Y.perp(Y.normalise(N)),X=Math.ceil(T.clamp(t.length/5,12,20)),U=1;U<X;U+=1)B=U%2==0?1:-1,r.lineTo(O.x+N.x*(U/X)+G.x*B*4,O.y+N.y*(U/X)+G.y*B*4);r.lineTo(D.x,D.y)}return r.strokePath(),P.anchors&&A>0&&(r.fillStyle(S),r.fillCircle(O.x,O.y,A),r.fillCircle(D.x,D.y,A)),this},resetCollisionIDs:function resetCollisionIDs(){return h._nextCollidingGroupId=1,h._nextNonCollidingGroupId=-1,h._nextCategory=1,this},shutdown:function shutdown(){B.off(this.engine),this.removeAllListeners(),G.clear(this.localWorld,!1),A.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function destroy(){this.shutdown()}});t.exports=X},function(t,r,o){t.exports={BasePlugin:o(540),DefaultPlugins:o(197),PluginCache:o(24),PluginManager:o(414),ScenePlugin:o(1404)}},function(t,r,o){var a=o(540),h=o(0),d=o(20),T=new h({Extends:a,initialize:function ScenePlugin(t,r,o){a.call(this,r),this.scene=t,this.systems=t.sys,this.pluginKey=o,t.sys.events.once(d.BOOT,this.boot,this)},boot:function boot(){},destroy:function destroy(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=T},function(t,r,o){t.exports={Canvas:o(1406),Events:o(91),Snapshot:o(1407),WebGL:o(1408)}},function(t,r,o){t.exports={CanvasRenderer:o(368),GetBlendModes:o(370),SetTransform:o(30)}},function(t,r,o){t.exports={Canvas:o(369),WebGL:o(383)}},function(t,r,o){var a=o(107),h=o(17),d={PipelineManager:o(372),Pipelines:o(1409),RenderTarget:o(141),Utils:o(12),WebGLPipeline:o(58),WebGLRenderer:o(371),WebGLShader:o(375)};d=h(!1,d,a),t.exports=d},function(t,r,o){var a=o(92),h=o(17),d={BitmapMaskPipeline:o(373),Events:o(374),GraphicsPipeline:o(376),LightPipeline:o(377),MultiPipeline:o(108),PointLightPipeline:o(378),PostFXPipeline:o(1410),RopePipeline:o(379),SinglePipeline:o(380),UtilityPipeline:o(381)};d=h(!1,d,a),t.exports=d},function(t,r,o){var a=o(0),h=o(198),d=o(2),T=o(1411),S=o(382),A=o(58),P=new a({Extends:A,initialize:function PostFXPipeline(t){t.renderTarget=d(t,"renderTarget",1),t.fragShader=d(t,"fragShader",T),t.vertShader=d(t,"vertShader",S),t.attributes=d(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.batchSize=1,t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],A.call(this,t),this.isPostFX=!0,this.gameObject,this.colorMatrix=new h,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function boot(){A.prototype.boot.call(this);var t=this.manager.UTILITY_PIPELINE;this.fullFrame1=t.fullFrame1,this.fullFrame2=t.fullFrame2,this.halfFrame1=t.halfFrame1,this.halfFrame2=t.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function onDraw(t){this.bindAndDraw(t)},copyFrame:function copyFrame(t,r,o,a,h){this.manager.copyFrame(t,r,o,a,h)},copyToGame:function copyToGame(t){this.manager.copyToGame(t)},drawFrame:function drawFrame(t,r,o){this.manager.drawFrame(t,r,o,this.colorMatrix)},blendFrames:function blendFrames(t,r,o,a,h){this.manager.blendFrames(t,r,o,a,h)},blendFramesAdditive:function blendFramesAdditive(t,r,o,a,h){this.manager.blendFramesAdditive(t,r,o,a,h)},clearFrame:function clearFrame(t,r){this.manager.clearFrame(t,r)},blitFrame:function blitFrame(t,r,o,a,h,d){this.manager.blitFrame(t,r,o,a,h,d)},copyFrameRect:function copyFrameRect(t,r,o,a,h,d,T,S){this.manager.copyFrameRect(t,r,o,a,h,d,T,S)},bindAndDraw:function bindAndDraw(t,r,o,a,h){void 0===o&&(o=!0),void 0===a&&(a=!0);var d=this.gl,T=this.renderer;this.bind(h),this.set1i("uMainSampler",0),r?(d.viewport(0,0,r.width,r.height),d.bindFramebuffer(d.FRAMEBUFFER,r.framebuffer),d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,r.texture,0),o&&(a?d.clearColor(0,0,0,0):d.clearColor(0,0,0,1),d.clear(d.COLOR_BUFFER_BIT))):(T.popFramebuffer(!1,!1,!1),T.currentFramebuffer||d.viewport(0,0,T.width,T.height)),d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,t.texture),d.bufferData(d.ARRAY_BUFFER,this.vertexData,d.STATIC_DRAW),d.drawArrays(d.TRIANGLES,0,6),r?(d.bindTexture(d.TEXTURE_2D,null),d.bindFramebuffer(d.FRAMEBUFFER,null)):T.resetTextures()}});t.exports=P},function(t,r){t.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join("\n")},function(t,r,o){var a=o(17),h=o(201),d={Center:o(403),Events:o(104),Orientation:o(404),ScaleManager:o(415),ScaleModes:o(405),Zoom:o(406)};d=a(!1,d,h.CENTER),d=a(!1,d,h.ORIENTATION),d=a(!1,d,h.SCALE_MODE),d=a(!1,d,h.ZOOM),t.exports=d},function(t,r,o){var a=o(144),h=o(17),d={Events:o(20),GetPhysicsPlugins:o(419),GetScenePlugins:o(420),SceneManager:o(417),ScenePlugin:o(1414),Settings:o(421),Systems:o(204)};d=h(!1,d,a),t.exports=d},function(t,r,o){var a=o(18),h=o(0),d=o(20),T=o(2),S=o(24),A=new h({initialize:function ScenePlugin(t){this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.key=t.sys.settings.key,this.manager=t.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,t.sys.events.once(d.BOOT,this.boot,this),t.sys.events.on(d.START,this.pluginStart,this)},boot:function boot(){this.systems.events.once(d.DESTROY,this.destroy,this)},pluginStart:function pluginStart(){this._target=null,this.systems.events.once(d.SHUTDOWN,this.shutdown,this)},start:function start(t,r){return void 0===t&&(t=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",t,r),this},restart:function restart(t){var r=this.key;return this.manager.queueOp("stop",r),this.manager.queueOp("start",r,t),this},transition:function transition(t){void 0===t&&(t={});var r=T(t,"target",!1),o=this.manager.getScene(r);if(!r||!this.checkValidTransition(o))return!1;var a=T(t,"duration",1e3);this._elapsed=0,this._target=o,this._duration=a,this._willSleep=T(t,"sleep",!1),this._willRemove=T(t,"remove",!1);var h=T(t,"onUpdate",null);h&&(this._onUpdate=h,this._onUpdateScope=T(t,"onUpdateScope",this.scene));var S=T(t,"allowInput",!1);this.settings.transitionAllowInput=S;var A=o.sys.settings;return A.isTransition=!0,A.transitionFrom=this.scene,A.transitionDuration=a,A.transitionAllowInput=S,T(t,"moveAbove",!1)?this.manager.moveAbove(this.key,r):T(t,"moveBelow",!1)&&this.manager.moveBelow(this.key,r),o.sys.isSleeping()?o.sys.wake(T(t,"data")):this.manager.start(r,T(t,"data")),this.systems.events.emit(d.TRANSITION_OUT,o,a),this.systems.events.on(d.UPDATE,this.step,this),!0},checkValidTransition:function checkValidTransition(t){return!(!t||t.sys.isActive()||t.sys.isTransitioning()||t===this.scene||this.systems.isTransitioning())},step:function step(t,r){this._elapsed+=r,this.transitionProgress=a(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function transitionComplete(){var t=this._target.sys,r=this._target.sys.settings;this.systems.events.off(d.UPDATE,this.step,this),t.events.emit(d.TRANSITION_COMPLETE,this.scene),r.isTransition=!1,r.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function add(t,r,o,a){return this.manager.add(t,r,o,a)},launch:function launch(t,r){return t&&t!==this.key&&this.manager.queueOp("start",t,r),this},run:function run(t,r){return t&&t!==this.key&&this.manager.queueOp("run",t,r),this},pause:function pause(t,r){return void 0===t&&(t=this.key),this.manager.queueOp("pause",t,r),this},resume:function resume(t,r){return void 0===t&&(t=this.key),this.manager.queueOp("resume",t,r),this},sleep:function sleep(t,r){return void 0===t&&(t=this.key),this.manager.queueOp("sleep",t,r),this},wake:function wake(t,r){return void 0===t&&(t=this.key),this.manager.queueOp("wake",t,r),this},switch:function _switch(t){return t!==this.key&&this.manager.queueOp("switch",this.key,t),this},stop:function stop(t,r){return void 0===t&&(t=this.key),this.manager.queueOp("stop",t,r),this},setActive:function setActive(t,r,o){void 0===r&&(r=this.key);var a=this.manager.getScene(r);return a&&a.sys.setActive(t,o),this},setVisible:function setVisible(t,r){void 0===r&&(r=this.key);var o=this.manager.getScene(r);return o&&o.sys.setVisible(t),this},isSleeping:function isSleeping(t){return void 0===t&&(t=this.key),this.manager.isSleeping(t)},isActive:function isActive(t){return void 0===t&&(t=this.key),this.manager.isActive(t)},isPaused:function isPaused(t){return void 0===t&&(t=this.key),this.manager.isPaused(t)},isVisible:function isVisible(t){return void 0===t&&(t=this.key),this.manager.isVisible(t)},swapPosition:function swapPosition(t,r){return void 0===r&&(r=this.key),t!==r&&this.manager.swapPosition(t,r),this},moveAbove:function moveAbove(t,r){return void 0===r&&(r=this.key),t!==r&&this.manager.moveAbove(t,r),this},moveBelow:function moveBelow(t,r){return void 0===r&&(r=this.key),t!==r&&this.manager.moveBelow(t,r),this},remove:function remove(t){return void 0===t&&(t=this.key),this.manager.remove(t),this},moveUp:function moveUp(t){return void 0===t&&(t=this.key),this.manager.moveUp(t),this},moveDown:function moveDown(t){return void 0===t&&(t=this.key),this.manager.moveDown(t),this},bringToTop:function bringToTop(t){return void 0===t&&(t=this.key),this.manager.bringToTop(t),this},sendToBack:function sendToBack(t){return void 0===t&&(t=this.key),this.manager.sendToBack(t),this},get:function get(t){return this.manager.getScene(t)},getIndex:function getIndex(t){return void 0===t&&(t=this.key),this.manager.getIndex(t)},shutdown:function shutdown(){var t=this.systems.events;t.off(d.SHUTDOWN,this.shutdown,this),t.off(d.POST_UPDATE,this.step,this),t.off(d.TRANSITION_OUT)},destroy:function destroy(){this.shutdown(),this.scene.sys.events.off(d.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});S.register("ScenePlugin",A,"scenePlugin"),t.exports=A},function(t,r,o){t.exports={Events:o(438),List:o(110),Map:o(102),ProcessQueue:o(211),RTree:o(531),Set:o(149),Size:o(416)}},function(t,r,o){var a=o(17),h=o(1417),d={CanvasTexture:o(423),Events:o(106),FilterMode:h,Frame:o(109),Parsers:o(425),Texture:o(206),TextureManager:o(422),TextureSource:o(424)};d=a(!1,d,h),t.exports=d},function(t,r){t.exports={LINEAR:0,NEAREST:1}},function(t,r,o){var a=o(17),h=o(1419),d={Components:o(251),Parsers:o(1452),Formats:o(40),ImageCollection:o(576),ParseToTilemap:o(262),Tile:o(85),Tilemap:o(580),TilemapCreator:o(1459),TilemapFactory:o(1460),Tileset:o(122),TilemapLayer:o(581),Orientation:o(29),LayerData:o(120),MapData:o(121),ObjectLayer:o(572)};d=a(!1,d,h.ORIENTATION),t.exports=d},function(t,r,o){var a={ORIENTATION:o(29)};t.exports=a},function(t,r,o){var a=o(26),h=o(63);t.exports=function Copy(t,r,o,d,T,S,A,P){void 0===A&&(A=!0),t<0&&(t=0),r<0&&(r=0);for(var O=a(t,r,o,d,null,P),D=T-t,L=S-r,I=0;I<O.length;I++){var B=O[I].x+D,N=O[I].y+L;B>=0&&B<P.width&&N>=0&&N<P.height&&P.data[N][B]&&P.data[N][B].copy(O[I])}A&&h(T-1,S-1,o+2,d+2,P)}},function(t,r,o){var a=o(26),h=o(542);t.exports=function CreateFromTiles(t,r,o,d,T,S){o||(o={}),Array.isArray(t)||(t=[t]);var A=S.tilemapLayer;d||(d=A.scene),T||(T=d.cameras.main);var P,O=a(0,0,S.width,S.height,null,S),D=[];for(P=0;P<O.length;P++){var L=O[P];if(-1!==t.indexOf(L.index)){var I=A.tileToWorldXY(L.x,L.y,void 0,T,S);o.x=I.x,o.y=I.y,D.push(d.make.sprite(o))}}if("number"==typeof r)for(P=0;P<t.length;P++)h(t[P],r,0,0,S.width,S.height,S);else if(Array.isArray(r))for(P=0;P<t.length;P++)h(t[P],r[P],0,0,S.width,S.height,S);return D}},function(t,r,o){var a=o(26),h=o(63),d=o(72);t.exports=function Fill(t,r,o,T,S,A,P){for(var O=-1!==P.collideIndexes.indexOf(t),D=a(r,o,T,S,null,P),L=0;L<D.length;L++)D[L].index=t,d(D[L],O);A&&h(r-1,o-1,T+2,S+2,P)}},function(t,r,o){var a=o(26);t.exports=function FilterTiles(t,r,o,h,d,T,S,A){return a(o,h,d,T,S,A).filter(t,r)}},function(t,r){t.exports=function FindByIndex(t,r,o,a){void 0===r&&(r=0),void 0===o&&(o=!1);var h,d,T,S=0;if(o){for(d=a.height-1;d>=0;d--)for(h=a.width-1;h>=0;h--)if((T=a.data[d][h])&&T.index===t){if(S===r)return T;S+=1}}else for(d=0;d<a.height;d++)for(h=0;h<a.width;h++)if((T=a.data[d][h])&&T.index===t){if(S===r)return T;S+=1}return null}},function(t,r,o){var a=o(26);t.exports=function FindTile(t,r,o,h,d,T,S,A){return a(o,h,d,T,S,A).find(t,r)||null}},function(t,r,o){var a=o(26);t.exports=function ForEachTile(t,r,o,h,d,T,S,A){a(o,h,d,T,S,A).forEach(t,r)}},function(t,r,o){var a=o(29),h=o(544),d=o(545),T=o(547),S=o(1),A=o(548);t.exports=function GetCullTilesFunction(t){return t===a.ORTHOGONAL?h:t===a.HEXAGONAL?d:t===a.STAGGERED?A:t===a.ISOMETRIC?T:S}},function(t,r,o){var a=o(158),h=new(o(3));t.exports=function GetTileAtWorldXY(t,r,o,d,T){return T.tilemapLayer.worldToTileXY(t,r,!0,h,d),a(h.x,h.y,o,T)}},function(t,r,o){var a=o(483),h=o(26),d=o(484),T=o(1),S=o(3),A=function TriangleToRectangle(t,r){return d.RectangleToTriangle(r,t)},P=new S,O=new S,D=new S;t.exports=function GetTilesWithinShape(t,r,o,S){if(void 0===t)return[];var L=T;t instanceof a.Circle?L=d.CircleToRectangle:t instanceof a.Rectangle?L=d.RectangleToRectangle:t instanceof a.Triangle?L=A:t instanceof a.Line&&(L=d.LineToRectangle),S.tilemapLayer.worldToTileXY(t.left,t.top,!0,O,o);var I=O.x,B=O.y;S.tilemapLayer.worldToTileXY(t.right,t.bottom,!0,D,o);var N=Math.ceil(D.x),G=Math.ceil(D.y),Y=Math.max(N-I,1),X=Math.max(G-B,1),U=h(I,B,Y,X,r,S),z=S.tileWidth,V=S.tileHeight;S.tilemapLayer&&(z*=S.tilemapLayer.scaleX,V*=S.tilemapLayer.scaleY);for(var W=[],H=new a.Rectangle(0,0,z,V),q=0;q<U.length;q++){var Z=U[q];S.tilemapLayer.tileToWorldXY(Z.x,Z.y,P,o),H.x=P.x,H.y=P.y,L(t,H)&&W.push(Z)}return W}},function(t,r,o){var a=o(29),h=o(1),d=o(253);t.exports=function GetTileToWorldXFunction(t){return t===a.ORTHOGONAL?d:h}},function(t,r,o){var a=o(29),h=o(550),d=o(551),T=o(1),S=o(552),A=o(553);t.exports=function GetTileToWorldXYFunction(t){return t===a.ORTHOGONAL?A:t===a.ISOMETRIC?d:t===a.HEXAGONAL?h:t===a.STAGGERED?S:T}},function(t,r,o){var a=o(29),h=o(554),d=o(1),T=o(555),S=o(254);t.exports=function GetTileToWorldYFunction(t){return t===a.ORTHOGONAL?S:t===a.HEXAGONAL?h:t===a.STAGGERED?T:d}},function(t,r,o){var a=o(29),h=o(1),d=o(255);t.exports=function GetWorldToTileXFunction(t){return t===a.ORTHOGONAL?d:h}},function(t,r,o){var a=o(29),h=o(556),d=o(557),T=o(1),S=o(558),A=o(559);t.exports=function GetWorldToTileXYFunction(t){return t===a.ORTHOGONAL?A:t===a.ISOMETRIC?d:t===a.HEXAGONAL?h:t===a.STAGGERED?S:T}},function(t,r,o){var a=o(29),h=o(560),d=o(1),T=o(561),S=o(256);t.exports=function GetWorldToTileYFunction(t){return t===a.ORTHOGONAL?S:t===a.HEXAGONAL?h:t===a.STAGGERED?T:d}},function(t,r,o){var a=o(562),h=new(o(3));t.exports=function HasTileAtWorldXY(t,r,o,d){d.tilemapLayer.worldToTileXY(t,r,!0,h,o);var T=h.x,S=h.y;return a(T,S,d)}},function(t,r,o){var a=o(257),h=new(o(3));t.exports=function PutTileAtWorldXY(t,r,o,d,T,S){return S.tilemapLayer.worldToTileXY(r,o,!0,h,T,S),a(t,h.x,h.y,d,S)}},function(t,r,o){var a=o(63),h=o(257);t.exports=function PutTilesAt(t,r,o,d,T){if(void 0===d&&(d=!0),!Array.isArray(t))return null;Array.isArray(t[0])||(t=[t]);for(var S=t.length,A=t[0].length,P=0;P<S;P++)for(var O=0;O<A;O++){var D=t[P][O];h(D,r+O,o+P,!1,T)}d&&a(r-1,o-1,A+2,S+2,T)}},function(t,r,o){var a=o(26),h=o(210);t.exports=function Randomize(t,r,o,d,T,S){var A,P=a(t,r,o,d,{},S);if(!T)for(T=[],A=0;A<P.length;A++)-1===T.indexOf(P[A].index)&&T.push(P[A].index);for(A=0;A<P.length;A++)P[A].index=h(T)}},function(t,r,o){var a=o(563),h=new(o(3));t.exports=function RemoveTileAtWorldXY(t,r,o,d,T,S){return S.tilemapLayer.worldToTileXY(t,r,!0,h,T,S),a(h.x,h.y,o,d,S)}},function(t,r,o){var a=o(26),h=o(397),d=new h(105,210,231,150),T=new h(243,134,48,200),S=new h(40,39,37,150);t.exports=function RenderDebug(t,r,o){void 0===r&&(r={});var h=void 0!==r.tileColor?r.tileColor:d,A=void 0!==r.collidingTileColor?r.collidingTileColor:T,P=void 0!==r.faceColor?r.faceColor:S,O=a(0,0,o.width,o.height,null,o);t.translateCanvas(o.tilemapLayer.x,o.tilemapLayer.y),t.scaleCanvas(o.tilemapLayer.scaleX,o.tilemapLayer.scaleY);for(var D=0;D<O.length;D++){var L=O[D],I=L.width,B=L.height,N=L.pixelX,G=L.pixelY,Y=L.collides?A:h;null!==Y&&(t.fillStyle(Y.color,Y.alpha/255),t.fillRect(N,G,I,B)),N+=1,G+=1,I-=2,B-=2,null!==P&&(t.lineStyle(1,P.color,P.alpha/255),L.faceTop&&t.lineBetween(N,G,N+I,G),L.faceRight&&t.lineBetween(N+I,G,N+I,G+B),L.faceBottom&&t.lineBetween(N,G+B,N+I,G+B),L.faceLeft&&t.lineBetween(N,G,N,G+B))}}},function(t,r,o){var a=o(72),h=o(63),d=o(160);t.exports=function SetCollision(t,r,o,T,S){void 0===r&&(r=!0),void 0===o&&(o=!0),void 0===S&&(S=!0),Array.isArray(t)||(t=[t]);for(var A=0;A<t.length;A++)d(t[A],r,T);if(S)for(var P=0;P<T.height;P++)for(var O=0;O<T.width;O++){var D=T.data[P][O];D&&-1!==t.indexOf(D.index)&&a(D,r)}o&&h(0,0,T.width,T.height,T)}},function(t,r,o){var a=o(72),h=o(63),d=o(160);t.exports=function SetCollisionBetween(t,r,o,T,S,A){if(void 0===o&&(o=!0),void 0===T&&(T=!0),void 0===A&&(A=!0),!(t>r)){for(var P=t;P<=r;P++)d(P,o,S);if(A)for(var O=0;O<S.height;O++)for(var D=0;D<S.width;D++){var L=S.data[O][D];L&&L.index>=t&&L.index<=r&&a(L,o)}T&&h(0,0,S.width,S.height,S)}}},function(t,r,o){var a=o(72),h=o(63),d=o(160);t.exports=function SetCollisionByExclusion(t,r,o,T){void 0===r&&(r=!0),void 0===o&&(o=!0),Array.isArray(t)||(t=[t]);for(var S=0;S<T.height;S++)for(var A=0;A<T.width;A++){var P=T.data[S][A];P&&-1===t.indexOf(P.index)&&(a(P,r),d(P.index,r,T))}o&&h(0,0,T.width,T.height,T)}},function(t,r,o){var a=o(72),h=o(63),d=o(126);t.exports=function SetCollisionByProperty(t,r,o,T){void 0===r&&(r=!0),void 0===o&&(o=!0);for(var S=0;S<T.height;S++)for(var A=0;A<T.width;A++){var P=T.data[S][A];if(P)for(var O in t)if(d(P.properties,O)){var D=t[O];Array.isArray(D)||(D=[D]);for(var L=0;L<D.length;L++)P.properties[O]===D[L]&&a(P,r)}}o&&h(0,0,T.width,T.height,T)}},function(t,r,o){var a=o(72),h=o(63);t.exports=function SetCollisionFromCollisionGroup(t,r,o){void 0===t&&(t=!0),void 0===r&&(r=!0);for(var d=0;d<o.height;d++)for(var T=0;T<o.width;T++){var S=o.data[d][T];if(S){var A=S.getCollisionGroup();A&&A.objects&&A.objects.length>0&&a(S,t)}}r&&h(0,0,o.width,o.height,o)}},function(t,r){t.exports=function SetTileIndexCallback(t,r,o,a){if("number"==typeof t)a.callbacks[t]=null!==r?{callback:r,callbackContext:o}:void 0;else for(var h=0,d=t.length;h<d;h++)a.callbacks[t[h]]=null!==r?{callback:r,callbackContext:o}:void 0}},function(t,r,o){var a=o(26);t.exports=function SetTileLocationCallback(t,r,o,h,d,T,S){for(var A=a(t,r,o,h,null,S),P=0;P<A.length;P++)A[P].setCollisionCallback(d,T)}},function(t,r,o){var a=o(26),h=o(131);t.exports=function Shuffle(t,r,o,d,T){var S=a(t,r,o,d,null,T),A=S.map((function(t){return t.index}));h(A);for(var P=0;P<S.length;P++)S[P].index=A[P]}},function(t,r,o){var a=o(26);t.exports=function SwapByIndex(t,r,o,h,d,T,S){for(var A=a(o,h,d,T,null,S),P=0;P<A.length;P++)A[P]&&(A[P].index===t?A[P].index=r:A[P].index===r&&(A[P].index=t))}},function(t,r,o){var a=o(26);t.exports=function WeightedRandomize(t,r,o,h,d,T){if(d){var S,A=a(t,r,o,h,null,T),P=0;for(S=0;S<d.length;S++)P+=d[S].weight;if(!(P<=0))for(S=0;S<A.length;S++){for(var O=Math.random()*P,D=0,L=-1,I=0;I<d.length;I++)if(O<=(D+=d[I].weight)){var B=d[I].index;L=Array.isArray(B)?B[Math.floor(Math.random()*B.length)]:B;break}A[S].index=L}}}},function(t,r,o){t.exports={FromOrientationString:o(258),Parse:o(564),Parse2DArray:o(259),ParseCSV:o(565),Impact:o(1454),Tiled:o(1455)}},function(t,r){t.exports=function ParseWangsets(t,r){for(var o=0;o<t.length;o++){var a=t[o],h=o;if(a.name&&""!==a.name&&(h=a.name),Array.isArray(a.wangtiles)&&a.wangtiles.length>0){var d,T,S,A={},P={};if(Array.isArray(a.edgecolors))for(d=0;d<a.edgecolors.length;d++)S=1+d,""!==(T=a.edgecolors[d]).name&&(A[S]=T.name);if(Array.isArray(a.cornercolors))for(d=0;d<a.cornercolors.length;d++)S=1+d,""!==(T=a.cornercolors[d]).name&&(P[S]=T.name);if(Array.isArray(a.colors))for(d=0;d<a.colors.length;d++)S=1+d,""!==(T=a.colors[d]).name&&(A[S]=P[S]=T.name);for(var O=[A,P,A,P,A,P,A,P],D=0;D<a.wangtiles.length;D++){var L=a.wangtiles[D],I=r[L.tileid]||(r[L.tileid]={});I=I.wangid||(I.wangid={});for(var B=[],N=0;N<Math.min(O.length,L.wangid.length);N++)if(0!==(T=L.wangid[N])){var G=O[N][T];void 0===G?B.push(T):B.push(G)}else B.push(void 0);I[h]=B}}}}},function(t,r,o){t.exports={ParseTileLayers:o(578),ParseTilesets:o(579),ParseWeltmeister:o(577)}},function(t,r,o){t.exports={AssignTileProperties:o(567),Base64Decode:o(574),BuildTilesetIndex:o(568),CreateGroupLayer:o(161),ParseGID:o(261),ParseImageLayers:o(569),ParseJSONTiled:o(566),ParseObject:o(260),ParseObjectLayers:o(570),ParseTileLayers:o(573),ParseTilesets:o(575)}},function(t,r,o){var a=o(1),h=o(1);a=o(1457),h=o(1458),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r,o){var a=o(12);t.exports=function TilemapLayerWebGLRenderer(t,r,o){var h=r.cull(o),d=h.length,T=o.alpha*r.alpha;if(!(0===d||T<=0)){var S=r.gidMap,A=t.pipelines.set(r.pipeline,r),P=a.getTintAppendFloatAlpha,O=r.scrollFactorX,D=r.scrollFactorY,L=r.x,I=r.y,B=r.scaleX,N=r.scaleY;t.pipelines.preBatch(r);for(var G=0;G<d;G++){var Y=h[G],X=S[Y.index];if(X){var U=X.getTileTextureCoordinates(Y.index);if(null!==U){var z=X.glTexture,V=A.setTexture2D(z,r),W=X.tileWidth,H=X.tileHeight,q=U.x,Z=U.y,K=.5*X.tileWidth,J=.5*X.tileHeight,Q=P(Y.tint,T*Y.alpha);A.batchTexture(r,z,z.width,z.height,L+(K+Y.pixelX)*B,I+(J+Y.pixelY)*N,Y.width,Y.height,B,N,Y.rotation,Y.flipX,Y.flipY,O,D,K,J,q,Z,W,H,Q,Q,Q,Q,!1,0,0,o,null,!0,V)}}}t.pipelines.postBatch(r)}}},function(t,r,o){var a=o(25),h=new a,d=new a,T=new a;t.exports=function TilemapLayerCanvasRenderer(t,r,o,a){var S=r.cull(o),A=S.length,P=o.alpha*r.alpha;if(!(0===A||P<=0)){var O=h,D=d,L=T;D.applyITRS(r.x,r.y,r.rotation,r.scaleX,r.scaleY),O.copyFrom(o.matrix);var I=t.currentContext,B=r.gidMap;I.save(),a?(O.multiplyWithOffset(a,-o.scrollX*r.scrollFactorX,-o.scrollY*r.scrollFactorY),D.e=r.x,D.f=r.y,O.multiply(D,L),L.copyToContext(I)):(D.e-=o.scrollX*r.scrollFactorX,D.f-=o.scrollY*r.scrollFactorY,D.copyToContext(I)),(!t.antialias||r.scaleX>1||r.scaleY>1)&&(I.imageSmoothingEnabled=!1);for(var N=0;N<A;N++){var G=S[N],Y=B[G.index];if(Y){var X=Y.image.getSourceImage(),U=Y.getTileTextureCoordinates(G.index);if(null!==U){var z=Y.tileWidth,V=Y.tileHeight,W=.5*z,H=.5*V;I.save(),I.translate(G.pixelX+W,G.pixelY+H),0!==G.rotation&&I.rotate(G.rotation),(G.flipX||G.flipY)&&I.scale(G.flipX?-1:1,G.flipY?-1:1),I.globalAlpha=P*G.alpha,I.drawImage(X,U.x,U.y,z,V,-W,-H,z,V),I.restore()}}}I.restore()}}},function(t,r,o){var a=o(16),h=o(262);a.register("tilemap",(function(t){var r=void 0!==t?t:{};return h(this.scene,r.key,r.tileWidth,r.tileHeight,r.width,r.height,r.data,r.insertNull)}))},function(t,r,o){var a=o(5),h=o(262);a.register("tilemap",(function(t,r,o,a,d,T,S){return null===t&&(t=void 0),null===r&&(r=void 0),null===o&&(o=void 0),null===a&&(a=void 0),null===d&&(d=void 0),h(this.scene,t,r,o,a,d,T,S)}))},function(t,r,o){t.exports={Clock:o(1462),TimerEvent:o(582)}},function(t,r,o){var a=o(0),h=o(24),d=o(20),T=o(582),S=o(93),A=new a({initialize:function Clock(t){this.scene=t,this.systems=t.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],t.sys.events.once(d.BOOT,this.boot,this),t.sys.events.on(d.START,this.start,this)},boot:function boot(){this.now=this.systems.game.loop.time,this.systems.events.once(d.DESTROY,this.destroy,this)},start:function start(){var t=this.systems.events;t.on(d.PRE_UPDATE,this.preUpdate,this),t.on(d.UPDATE,this.update,this),t.once(d.SHUTDOWN,this.shutdown,this)},addEvent:function addEvent(t){var r;return t instanceof T?(r=t,this.removeEvent(r),r.elapsed=r.startAt,r.hasDispatched=!1,r.repeatCount=-1===r.repeat||r.loop?999999999999:r.repeat):r=new T(t),this._pendingInsertion.push(r),r},delayedCall:function delayedCall(t,r,o,a){return this.addEvent({delay:t,callback:r,args:o,callbackScope:a})},clearPendingEvents:function clearPendingEvents(){return this._pendingInsertion=[],this},removeEvent:function removeEvent(t){Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var o=t[r];S(this._pendingRemoval,o),S(this._pendingInsertion,o),S(this._active,o)}return this},removeAllEvents:function removeAllEvents(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function preUpdate(){var t=this._pendingRemoval.length,r=this._pendingInsertion.length;if(0!==t||0!==r){var o,a;for(o=0;o<t;o++){a=this._pendingRemoval[o];var h=this._active.indexOf(a);h>-1&&this._active.splice(h,1),a.destroy()}for(o=0;o<r;o++)a=this._pendingInsertion[o],this._active.push(a);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function update(t,r){if(this.now=t,!this.paused){r*=this.timeScale;for(var o=0;o<this._active.length;o++){var a=this._active[o];if(!a.paused&&(a.elapsed+=r*a.timeScale,a.elapsed>=a.delay)){var h=a.elapsed-a.delay;a.elapsed=a.delay,!a.hasDispatched&&a.callback&&(a.hasDispatched=!0,a.callback.apply(a.callbackScope,a.args)),a.repeatCount>0?(a.repeatCount--,a.elapsed=h,a.hasDispatched=!1):this._pendingRemoval.push(a)}}}},shutdown:function shutdown(){var t;for(t=0;t<this._pendingInsertion.length;t++)this._pendingInsertion[t].destroy();for(t=0;t<this._active.length;t++)this._active[t].destroy();for(t=0;t<this._pendingRemoval.length;t++)this._pendingRemoval[t].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var r=this.systems.events;r.off(d.PRE_UPDATE,this.preUpdate,this),r.off(d.UPDATE,this.update,this),r.off(d.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown(),this.scene.sys.events.off(d.START,this.start,this),this.scene=null,this.systems=null}});h.register("Clock",A,"time"),t.exports=A},function(t,r,o){var a=o(100),h=o(17),d={Builders:o(1464),Events:o(267),TweenManager:o(1480),Tween:o(266),TweenData:o(268),Timeline:o(588)};d=h(!1,d,a),t.exports=d},function(t,r,o){t.exports={GetBoolean:o(99),GetEaseFunction:o(80),GetNewValue:o(162),GetProps:o(583),GetTargets:o(263),GetTweens:o(584),GetValueOp:o(264),NumberTweenBuilder:o(585),StaggerBuilder:o(586),TimelineBuilder:o(587),TweenBuilder:o(163)}},function(t,r){t.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(t,r){t.exports="complete"},function(t,r){t.exports="loop"},function(t,r){t.exports="pause"},function(t,r){t.exports="resume"},function(t,r){t.exports="start"},function(t,r){t.exports="update"},function(t,r){t.exports="active"},function(t,r){t.exports="complete"},function(t,r){t.exports="loop"},function(t,r){t.exports="repeat"},function(t,r){t.exports="start"},function(t,r){t.exports="stop"},function(t,r){t.exports="update"},function(t,r){t.exports="yoyo"},function(t,r,o){var a=o(93),h=o(0),d=o(585),T=o(24),S=o(20),A=o(586),P=o(587),O=o(100),D=o(163),L=new h({initialize:function TweenManager(t){this.scene=t,this.systems=t.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,t.sys.events.once(S.BOOT,this.boot,this),t.sys.events.on(S.START,this.start,this)},boot:function boot(){this.systems.events.once(S.DESTROY,this.destroy,this)},start:function start(){var t=this.systems.events;t.on(S.PRE_UPDATE,this.preUpdate,this),t.on(S.UPDATE,this.update,this),t.once(S.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function createTimeline(t){return P(this,t)},timeline:function timeline(t){var timeline=P(this,t);return timeline.paused||(this._add.push(timeline),this._toProcess++),timeline},create:function create(t){return D(this,t)},add:function add(t){var r=D(this,t);return this._add.push(r),this._toProcess++,r},existing:function existing(t){return this._add.push(t),this._toProcess++,this},addCounter:function addCounter(t){var r=d(this,t);return this._add.push(r),this._toProcess++,r},stagger:function stagger(t,r){return A(t,r)},preUpdate:function preUpdate(){if(0!==this._toProcess){var t,r,o=this._destroy,a=this._active,h=this._pending;for(t=0;t<o.length;t++){r=o[t];var d=a.indexOf(r);-1===d?(d=h.indexOf(r))>-1&&(r.state=O.REMOVED,h.splice(d,1)):(r.state=O.REMOVED,a.splice(d,1))}for(o.length=0,o=this._add,t=0;t<o.length;t++)(r=o[t]).state===O.PENDING_ADD&&(r.init()?(r.play(),this._active.push(r)):this._pending.push(r));o.length=0,this._toProcess=0}},update:function update(t,r){var o,a=this._active;r*=this.timeScale;for(var h=0;h<a.length;h++)(o=a[h]).update(t,r)&&(this._destroy.push(o),this._toProcess++)},remove:function remove(t){return a(this._add,t),a(this._pending,t),a(this._active,t),a(this._destroy,t),t.state=O.REMOVED,this},makeActive:function makeActive(t){if(-1!==this._add.indexOf(t)||-1!==this._active.indexOf(t))return this;var r=this._pending.indexOf(t);return-1!==r&&this._pending.splice(r,1),this._add.push(t),t.state=O.PENDING_ADD,this._toProcess++,this},each:function each(t,r){for(var o=[null],a=1;a<arguments.length;a++)o.push(arguments[a]);for(var h in this.list)o[0]=this.list[h],t.apply(r,o)},getAllTweens:function getAllTweens(){for(var t=this._active,r=[],o=0;o<t.length;o++)r.push(t[o]);return r},getGlobalTimeScale:function getGlobalTimeScale(){return this.timeScale},getTweensOf:function getTweensOf(t,r){void 0===r&&(r=!1);var o,a,h,d=this._active,T=[];for(Array.isArray(t)||(t=[t]),a=0;a<d.length;a++)for(o=d[a],h=0;h<t.length;h++)o.hasTarget(t[h])&&T.push(o);if(r)for(d=this._pending,a=0;a<d.length;a++)for(o=d[a],h=0;h<t.length;h++)o.hasTarget(t[h])&&T.push(o);return T},isTweening:function isTweening(t){for(var r,o=this._active,a=0;a<o.length;a++)if((r=o[a]).hasTarget(t)&&r.isPlaying())return!0;return!1},killAll:function killAll(){for(var t=this.getAllTweens(),r=0;r<t.length;r++)t[r].stop();return this},killTweensOf:function killTweensOf(t){for(var r=this.getTweensOf(t),o=0;o<r.length;o++)r[o].stop();return this},pauseAll:function pauseAll(){for(var t=this._active,r=0;r<t.length;r++)t[r].pause();return this},resumeAll:function resumeAll(){for(var t=this._active,r=0;r<t.length;r++)t[r].resume();return this},setGlobalTimeScale:function setGlobalTimeScale(t){return this.timeScale=t,this},shutdown:function shutdown(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var t=this.systems.events;t.off(S.PRE_UPDATE,this.preUpdate,this),t.off(S.UPDATE,this.update,this),t.off(S.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown(),this.scene.sys.events.off(S.START,this.start,this),this.scene=null,this.systems=null}});T.register("TweenManager",L,"tweens"),t.exports=L},function(t,r,o){t.exports={Array:o(208),Base64:o(1482),Objects:o(1484),String:o(1488),NOOP:o(1)}},function(t,r,o){t.exports={ArrayBufferToBase64:o(1483),Base64ToArrayBuffer:o(433)}},function(t,r){var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";t.exports=function ArrayBufferToBase64(t,r){for(var a=new Uint8Array(t),h=a.length,d=r?"data:"+r+";base64,":"",T=0;T<h;T+=3)d+=o[a[T]>>2],d+=o[(3&a[T])<<4|a[T+1]>>4],d+=o[(15&a[T+1])<<2|a[T+2]>>6],d+=o[63&a[T+2]];return h%3==2?d=d.substring(0,d.length-1)+"=":h%3==1&&(d=d.substring(0,d.length-2)+"=="),d}},function(t,r,o){t.exports={Clone:o(77),DeepCopy:o(175),Extend:o(17),GetAdvancedValue:o(13),GetFastValue:o(2),GetMinMaxValue:o(1485),GetValue:o(6),HasAll:o(1486),HasAny:o(455),HasValue:o(126),IsPlainObject:o(7),Merge:o(127),MergeRight:o(1487),Pick:o(571),SetValue:o(478)}},function(t,r,o){var a=o(6),h=o(18);t.exports=function GetMinMaxValue(t,r,o,d,T){void 0===T&&(T=o);var S=a(t,r,T);return h(S,o,d)}},function(t,r){t.exports=function HasAll(t,r){for(var o=0;o<r.length;o++)if(!t.hasOwnProperty(r[o]))return!1;return!0}},function(t,r,o){var a=o(77);t.exports=function MergeRight(t,r){var o=a(t);for(var h in r)o.hasOwnProperty(h)&&(o[h]=r[h]);return o}},function(t,r,o){t.exports={Format:o(1489),Pad:o(186),RemoveAt:o(1490),Reverse:o(1491),UppercaseFirst:o(205),UUID:o(222)}},function(t,r){t.exports=function Format(t,r){return t.replace(/%([0-9]+)/g,(function(t,o){return r[Number(o)-1]}))}},function(t,r){t.exports=function RemoveAt(t,r){return 0===r?t.slice(1):t.slice(0,r-1)+t.slice(r)}},function(t,r){t.exports=function Reverse(t){return t.split("").reverse().join("")}},function(t,r,o){t.exports={SoundManagerCreator:o(426),Events:o(70),BaseSound:o(146),BaseSoundManager:o(145),WebAudioSound:o(434),WebAudioSoundManager:o(432),HTML5AudioSound:o(429),HTML5AudioSoundManager:o(427),NoAudioSound:o(431),NoAudioSoundManager:o(430)}},function(t,r,o){t.exports={Arcade:o(1366),Matter:o(1494)}},function(t,r,o){t.exports={BodyBounds:o(1392),Components:o(249),Events:o(272),Factory:o(1394),MatterGameObject:o(1395),Image:o(1396),Matter:o(594),MatterPhysics:o(1524),PolyDecomp:o(1393),Sprite:o(1397),TileBody:o(593),PhysicsEditorParser:o(589),PhysicsJSONParser:o(590),PointerConstraint:o(1398),World:o(1402)}},function(t,r){t.exports={setBounce:function setBounce(t){return this.body.restitution=t,this}}},function(t,r){var o={setCollisionCategory:function setCollisionCategory(t){return this.body.collisionFilter.category=t,this},setCollisionGroup:function setCollisionGroup(t){return this.body.collisionFilter.group=t,this},setCollidesWith:function setCollidesWith(t){var r=0;if(Array.isArray(t))for(var o=0;o<t.length;o++)r|=t[o];else r=t;return this.body.collisionFilter.mask=r,this},setOnCollide:function setOnCollide(t){return this.body.onCollideCallback=t,this},setOnCollideEnd:function setOnCollideEnd(t){return this.body.onCollideEndCallback=t,this},setOnCollideActive:function setOnCollideActive(t){return this.body.onCollideActiveCallback=t,this},setOnCollideWith:function setOnCollideWith(t,r){Array.isArray(t)||(t=[t]);for(var o=0;o<t.length;o++){var a=t[o].hasOwnProperty("body")?t[o].body:t[o];this.body.setOnCollideWith(a,r)}return this}};t.exports=o},function(t,r,o){var a=o(41),h={applyForce:function applyForce(t){return this._tempVec2.set(this.body.position.x,this.body.position.y),a.applyForce(this.body,this._tempVec2,t),this},applyForceFrom:function applyForceFrom(t,r){return a.applyForce(this.body,t,r),this},thrust:function thrust(t){var r=this.body.angle;return this._tempVec2.set(t*Math.cos(r),t*Math.sin(r)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function thrustLeft(t){var r=this.body.angle-Math.PI/2;return this._tempVec2.set(t*Math.cos(r),t*Math.sin(r)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function thrustRight(t){var r=this.body.angle+Math.PI/2;return this._tempVec2.set(t*Math.cos(r),t*Math.sin(r)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function thrustBack(t){var r=this.body.angle-Math.PI;return this._tempVec2.set(t*Math.cos(r),t*Math.sin(r)),a.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};t.exports=h},function(t,r){var o={setFriction:function setFriction(t,r,o){return this.body.friction=t,void 0!==r&&(this.body.frictionAir=r),void 0!==o&&(this.body.frictionStatic=o),this},setFrictionAir:function setFrictionAir(t){return this.body.frictionAir=t,this},setFrictionStatic:function setFrictionStatic(t){return this.body.frictionStatic=t,this}};t.exports=o},function(t,r){t.exports={setIgnoreGravity:function setIgnoreGravity(t){return this.body.ignoreGravity=t,this}}},function(t,r,o){var a=o(41),h=o(3),d={setMass:function setMass(t){return a.setMass(this.body,t),this},setDensity:function setDensity(t){return a.setDensity(this.body,t),this},centerOfMass:{get:function get(){return new h(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};t.exports=d},function(t,r){t.exports={setSensor:function setSensor(t){return this.body.isSensor=t,this},isSensor:function isSensor(){return this.body.isSensor}}},function(t,r,o){var a=o(86),h=o(41),d=o(124),T=o(2),S=o(589),A=o(590),P=o(64),O={setRectangle:function setRectangle(t,r,o){return this.setBody({type:"rectangle",width:t,height:r},o)},setCircle:function setCircle(t,r){return this.setBody({type:"circle",radius:t},r)},setPolygon:function setPolygon(t,r,o){return this.setBody({type:"polygon",sides:r,radius:t},o)},setTrapezoid:function setTrapezoid(t,r,o,a){return this.setBody({type:"trapezoid",width:t,height:r,slope:o},a)},setExistingBody:function setExistingBody(t,r){void 0===r&&(r=!0),this.body&&this.world.remove(this.body,!0),this.body=t;for(var o=0;o<t.parts.length;o++)t.parts[o].gameObject=this;var a=this;if(t.destroy=function destroy(){a.world.remove(a.body,!0),a.body.gameObject=null},r&&(this.world.has(t)&&this.world.remove(t,!0),this.world.add(t)),this._originComponent){var h=t.render.sprite.xOffset,T=t.render.sprite.yOffset,S=t.centerOfMass.x,A=t.centerOfMass.y;if(d(S,.5)&&d(A,.5))this.setOrigin(h+.5,T+.5);else{var P=t.centerOffset.x,O=t.centerOffset.y;this.setOrigin(h+P/this.displayWidth,T+O/this.displayHeight)}}return this},setBody:function setBody(t,r){if(!t)return this;var o;"string"==typeof t&&(t={type:t});var d=T(t,"type","rectangle"),O=T(t,"x",this._tempVec2.x),D=T(t,"y",this._tempVec2.y),L=T(t,"width",this.width),I=T(t,"height",this.height);switch(d){case"rectangle":o=a.rectangle(O,D,L,I,r);break;case"circle":var B=T(t,"radius",Math.max(L,I)/2),N=T(t,"maxSides",25);o=a.circle(O,D,B,r,N);break;case"trapezoid":var G=T(t,"slope",.5);o=a.trapezoid(O,D,L,I,G,r);break;case"polygon":var Y=T(t,"sides",5),X=T(t,"radius",Math.max(L,I)/2);o=a.polygon(O,D,Y,X,r);break;case"fromVertices":case"fromVerts":var U=T(t,"verts",null);if(U)if("string"==typeof U&&(U=P.fromPath(U)),this.body&&!this.body.hasOwnProperty("temp"))h.setVertices(this.body,U),o=this.body;else{var z=T(t,"flagInternal",!1),V=T(t,"removeCollinear",.01),W=T(t,"minimumArea",10);o=a.fromVertices(O,D,U,r,z,V,W)}break;case"fromPhysicsEditor":o=S.parseBody(O,D,t,r);break;case"fromPhysicsTracer":o=A.parseBody(O,D,t,r)}return o&&this.setExistingBody(o,t.addToWorld),this}};t.exports=O},function(t,r,o){var a=o(272),h=o(165),d=o(166),T={setToSleep:function setToSleep(){return h.set(this.body,!0),this},setAwake:function setAwake(){return h.set(this.body,!1),this},setSleepThreshold:function setSleepThreshold(t){return void 0===t&&(t=60),this.body.sleepThreshold=t,this},setSleepEvents:function setSleepEvents(t,r){return this.setSleepStartEvent(t),this.setSleepEndEvent(r),this},setSleepStartEvent:function setSleepStartEvent(t){if(t){var r=this.world;d.on(this.body,"sleepStart",(function(t){r.emit(a.SLEEP_START,t,this)}))}else d.off(this.body,"sleepStart");return this},setSleepEndEvent:function setSleepEndEvent(t){if(t){var r=this.world;d.on(this.body,"sleepEnd",(function(t){r.emit(a.SLEEP_END,t,this)}))}else d.off(this.body,"sleepEnd");return this}};t.exports=T},function(t,r){t.exports="afteradd"},function(t,r){t.exports="afterremove"},function(t,r){t.exports="afterupdate"},function(t,r){t.exports="beforeadd"},function(t,r){t.exports="beforeremove"},function(t,r){t.exports="beforeupdate"},function(t,r){t.exports="collisionactive"},function(t,r){t.exports="collisionend"},function(t,r){t.exports="collisionstart"},function(t,r){t.exports="dragend"},function(t,r){t.exports="drag"},function(t,r){t.exports="dragstart"},function(t,r){t.exports="pause"},function(t,r){t.exports="resume"},function(t,r){t.exports="sleepend"},function(t,r){t.exports="sleepstart"},function(t,r,o){var a=o(41),h={setStatic:function setStatic(t){return a.setStatic(this.body,t),this},isStatic:function isStatic(){return this.body.isStatic}};t.exports=h},function(t,r,o){var a=o(41),h=o(14),d=o(269),T=o(270),S={x:{get:function get(){return this.body.position.x},set:function set(t){this._tempVec2.set(t,this.y),a.setPosition(this.body,this._tempVec2)}},y:{get:function get(){return this.body.position.y},set:function set(t){this._tempVec2.set(this.x,t),a.setPosition(this.body,this._tempVec2)}},scaleX:{get:function get(){return this._scaleX},set:function set(t){var r=1/this._scaleX,o=1/this._scaleY;this._scaleX=t,0===this._scaleX?this.renderFlags&=-5:this.renderFlags|=4,a.scale(this.body,r,o),a.scale(this.body,t,this._scaleY)}},scaleY:{get:function get(){return this._scaleY},set:function set(t){var r=1/this._scaleX,o=1/this._scaleY;this._scaleY=t,0===this._scaleY?this.renderFlags&=-5:this.renderFlags|=4,a.scale(this.body,r,o),a.scale(this.body,this._scaleX,t)}},angle:{get:function get(){return T(this.body.angle*h.RAD_TO_DEG)},set:function set(t){this.rotation=T(t)*h.DEG_TO_RAD}},rotation:{get:function get(){return this.body.angle},set:function set(t){this._rotation=d(t),a.setAngle(this.body,this._rotation)}},setPosition:function setPosition(t,r){return void 0===t&&(t=0),void 0===r&&(r=t),this._tempVec2.set(t,r),a.setPosition(this.body,this._tempVec2),this},setRotation:function setRotation(t){return void 0===t&&(t=0),this._rotation=d(t),a.setAngle(this.body,t),this},setFixedRotation:function setFixedRotation(){return a.setInertia(this.body,1/0),this},setAngle:function setAngle(t){return void 0===t&&(t=0),this.angle=t,a.setAngle(this.body,this.rotation),this},setScale:function setScale(t,r,o){void 0===t&&(t=1),void 0===r&&(r=t);var h=1/this._scaleX,d=1/this._scaleY;return this._scaleX=t,this._scaleY=r,a.scale(this.body,h,d,o),a.scale(this.body,t,r,o),this}};t.exports=S},function(t,r,o){var a=o(41),h={setAngularVelocity:function setAngularVelocity(t){return a.setAngularVelocity(this.body,t),this},setVelocityX:function setVelocityX(t){return this._tempVec2.set(t,this.body.velocity.y),a.setVelocity(this.body,this._tempVec2),this},setVelocityY:function setVelocityY(t){return this._tempVec2.set(this.body.velocity.x,t),a.setVelocity(this.body,this._tempVec2),this},setVelocity:function setVelocity(t,r){return this._tempVec2.set(t,r),a.setVelocity(this.body,this._tempVec2),this}};t.exports=h},function(t,r,o){var a={};t.exports=a;var h=o(118),d=o(32);a.create=function(t){return d.extend({extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0},!1,t)},a.reset=function(t){t.extended&&(t.narrowDetections=0,t.narrowphaseTests=0,t.narrowReuse=0,t.narrowReuseCount=0,t.midphaseTests=0,t.broadphaseTests=0,t.narrowEff=0,t.midEff=0,t.broadEff=0,t.collisions=0,t.buckets=0,t.pairs=0,t.bodies=0)},a.update=function(t,r){if(t.extended){var o=r.world,a=h.allBodies(o);t.collisions=t.narrowDetections,t.pairs=r.pairs.list.length,t.bodies=a.length,t.midEff=(t.narrowDetections/(t.midphaseTests||1)).toFixed(2),t.narrowEff=(t.narrowDetections/(t.narrowphaseTests||1)).toFixed(2),t.broadEff=(1-t.broadphaseTests/(a.length||1)).toFixed(2),t.narrowReuse=(t.narrowReuseCount/(t.narrowphaseTests||1)).toFixed(2)}}},function(t,r,o){var a=o(123),h=o(271),d=o(86),T=o(41),S=o(1392),A=o(84),P=o(0),O=o(118),D=o(591),L=o(128),I=o(273),B=o(50),N=o(1394),G=o(2),Y=o(6),X=o(597),U=o(1525),z=o(1526),V=o(1399),W=o(1527),H=o(127),q=o(250),Z=o(598),K=o(595),J=o(24),Q=o(1400),$=o(599),tt=o(274),et=o(20),it=o(592),nt=o(83),rt=o(64),st=o(1402),ot=new P({initialize:function MatterPhysics(t){this.scene=t,this.systems=t.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=T,this.composite=O,this.detector=I,this.grid=X,this.pair=q,this.pairs=Z,this.query=Q,this.resolver=$,this.sat=tt,this.constraint=L,this.bodies=d,this.composites=D,this.axes=h,this.bounds=A,this.svg=it,this.vector=nt,this.vertices=rt,this.verts=rt,this._tempVec2=nt.create(),Y(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),Y(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),Y(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),$._restingThresh=Y(this.config,"restingThresh",4),$._restingThreshTangent=Y(this.config,"restingThreshTangent",6),$._positionDampen=Y(this.config,"positionDampen",.9),$._positionWarming=Y(this.config,"positionWarming",.8),$._frictionNormalMultiplier=Y(this.config,"frictionNormalMultiplier",5),t.sys.events.once(et.BOOT,this.boot,this),t.sys.events.on(et.START,this.start,this)},boot:function boot(){this.world=new st(this.scene,this.config),this.add=new N(this.world),this.bodyBounds=new S,this.systems.events.once(et.DESTROY,this.destroy,this)},start:function start(){this.world||(this.world=new st(this.scene,this.config),this.add=new N(this.world));var t=this.systems.events;t.on(et.UPDATE,this.world.update,this.world),t.on(et.POST_UPDATE,this.world.postUpdate,this.world),t.once(et.SHUTDOWN,this.shutdown,this)},getConfig:function getConfig(){var t=this.systems.game.config.physics,r=this.systems.settings.physics;return H(G(r,"matter",{}),G(t,"matter",{}))},enableAttractorPlugin:function enableAttractorPlugin(){return K.register(U),K.use(V,U),this},enableWrapPlugin:function enableWrapPlugin(){return K.register(W),K.use(V,W),this},enableCollisionEventsPlugin:function enableCollisionEventsPlugin(){return K.register(z),K.use(V,z),this},pause:function pause(){return this.world.pause()},resume:function resume(){return this.world.resume()},set60Hz:function set60Hz(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function set30Hz(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function step(t,r){this.world.step(t,r)},containsPoint:function containsPoint(t,r,o){t=this.getMatterBodies(t);var a=nt.create(r,o);return Q.point(t,a).length>0},intersectPoint:function intersectPoint(t,r,o){o=this.getMatterBodies(o);var a=nt.create(t,r),h=[];return Q.point(o,a).forEach((function(t){-1===h.indexOf(t)&&h.push(t)})),h},intersectRect:function intersectRect(t,r,o,a,h,d){void 0===h&&(h=!1),d=this.getMatterBodies(d);var T={min:{x:t,y:r},max:{x:t+o,y:r+a}},S=[];return Q.region(d,T,h).forEach((function(t){-1===S.indexOf(t)&&S.push(t)})),S},intersectRay:function intersectRay(t,r,o,a,h,d){void 0===h&&(h=1),d=this.getMatterBodies(d);for(var T=[],S=Q.ray(d,nt.create(t,r),nt.create(o,a),h),A=0;A<S.length;A++)T.push(S[A].body);return T},intersectBody:function intersectBody(t,r){r=this.getMatterBodies(r);for(var o=[],a=Q.collides(t,r),h=0;h<a.length;h++){var d=a[h];d.bodyA===t?o.push(d.bodyB):o.push(d.bodyA)}return o},overlap:function overlap(t,r,o,a,h){void 0===o&&(o=null),void 0===a&&(a=null),void 0===h&&(h=o),Array.isArray(t)||(t=[t]),t=this.getMatterBodies(t),r=this.getMatterBodies(r);for(var d=!1,T=0;T<t.length;T++)for(var S=t[T],A=Q.collides(S,r),P=0;P<A.length;P++){var O=A[P],D=O.bodyA.id===S.id?O.bodyB:O.bodyA;if(!a||a.call(h,S,D,O))if(d=!0,o)o.call(h,S,D,O);else if(!a)return!0}return d},setCollisionCategory:function setCollisionCategory(t,r){return(t=this.getMatterBodies(t)).forEach((function(t){t.collisionFilter.category=r})),this},setCollisionGroup:function setCollisionGroup(t,r){return(t=this.getMatterBodies(t)).forEach((function(t){t.collisionFilter.group=r})),this},setCollidesWith:function setCollidesWith(t,r){t=this.getMatterBodies(t);var o=0;if(Array.isArray(r))for(var a=0;a<r.length;a++)o|=r[a];else o=r;return t.forEach((function(t){t.collisionFilter.mask=o})),this},getMatterBodies:function getMatterBodies(t){if(!t)return this.world.getAllBodies();Array.isArray(t)||(t=[t]);for(var r=[],o=0;o<t.length;o++){var a=t[o].hasOwnProperty("body")?t[o].body:t[o];r.push(a)}return r},setVelocity:function setVelocity(t,r,o){t=this.getMatterBodies(t);var a=this._tempVec2;return a.x=r,a.y=o,t.forEach((function(t){T.setVelocity(t,a)})),this},setVelocityX:function setVelocityX(t,r){t=this.getMatterBodies(t);var o=this._tempVec2;return o.x=r,t.forEach((function(t){o.y=t.velocity.y,T.setVelocity(t,o)})),this},setVelocityY:function setVelocityY(t,r){t=this.getMatterBodies(t);var o=this._tempVec2;return o.y=r,t.forEach((function(t){o.x=t.velocity.x,T.setVelocity(t,o)})),this},setAngularVelocity:function setAngularVelocity(t,r){return(t=this.getMatterBodies(t)).forEach((function(t){T.setAngularVelocity(t,r)})),this},applyForce:function applyForce(t,r){t=this.getMatterBodies(t);var o=this._tempVec2;return t.forEach((function(t){o.x=t.position.x,o.y=t.position.y,T.applyForce(t,o,r)})),this},applyForceFromPosition:function applyForceFromPosition(t,r,o,a){t=this.getMatterBodies(t);var h=this._tempVec2;return t.forEach((function(t){void 0===a&&(a=t.angle),h.x=o*Math.cos(a),h.y=o*Math.sin(a),T.applyForce(t,r,h)})),this},applyForceFromAngle:function applyForceFromAngle(t,r,o){t=this.getMatterBodies(t);var a=this._tempVec2;return t.forEach((function(t){void 0===o&&(o=t.angle),a.x=r*Math.cos(o),a.y=r*Math.sin(o),T.applyForce(t,{x:t.position.x,y:t.position.y},a)})),this},getConstraintLength:function getConstraintLength(t){var r=t.pointA.x,o=t.pointA.y,a=t.pointB.x,h=t.pointB.y;return t.bodyA&&(r+=t.bodyA.position.x,o+=t.bodyA.position.y),t.bodyB&&(a+=t.bodyB.position.x,h+=t.bodyB.position.y),B(r,o,a,h)},alignBody:function alignBody(t,r,o,h){var d;switch(t=t.hasOwnProperty("body")?t.body:t,h){case a.TOP_LEFT:case a.LEFT_TOP:d=this.bodyBounds.getTopLeft(t,r,o);break;case a.TOP_CENTER:d=this.bodyBounds.getTopCenter(t,r,o);break;case a.TOP_RIGHT:case a.RIGHT_TOP:d=this.bodyBounds.getTopRight(t,r,o);break;case a.LEFT_CENTER:d=this.bodyBounds.getLeftCenter(t,r,o);break;case a.CENTER:d=this.bodyBounds.getCenter(t,r,o);break;case a.RIGHT_CENTER:d=this.bodyBounds.getRightCenter(t,r,o);break;case a.LEFT_BOTTOM:case a.BOTTOM_LEFT:d=this.bodyBounds.getBottomLeft(t,r,o);break;case a.BOTTOM_CENTER:d=this.bodyBounds.getBottomCenter(t,r,o);break;case a.BOTTOM_RIGHT:case a.RIGHT_BOTTOM:d=this.bodyBounds.getBottomRight(t,r,o)}return d&&T.setPosition(t,d),this},shutdown:function shutdown(){var t=this.systems.events;this.world&&(t.off(et.UPDATE,this.world.update,this.world),t.off(et.POST_UPDATE,this.world.postUpdate,this.world)),t.off(et.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function destroy(){this.shutdown(),this.scene.sys.events.off(et.START,this.start,this),this.scene=null,this.systems=null}});J.register("MatterPhysics",ot,"matterPhysics"),t.exports=ot},function(t,r,o){var a=o(594),h={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.14.2",silent:!0,install:function install(t){t.after("Body.create",(function(){h.Body.init(this)})),t.before("Engine.update",(function(t){h.Engine.update(t)}))},Body:{init:function init(t){t.plugin.attractors=t.plugin.attractors||[]}},Engine:{update:function update(t){for(var r=a.Composite.allBodies(t.world),o=0;o<r.length;o++){var h=r[o],d=h.plugin.attractors;if(d&&d.length>0)for(var T=0;T<r.length;T++){var S=r[T];if(o!==T)for(var A=0;A<d.length;A++){var P=d[A],O=P;a.Common.isFunction(P)&&(O=P(h,S)),O&&a.Body.applyForce(S,S.position,O)}}}}},Attractors:{gravityConstant:.001,gravity:function gravity(t,r){var o=a.Vector.sub(r.position,t.position),d=a.Vector.magnitudeSquared(o)||1e-4,T=a.Vector.normalise(o),S=-h.Attractors.gravityConstant*(t.mass*r.mass/d),A=a.Vector.mult(T,S);a.Body.applyForce(t,t.position,a.Vector.neg(A)),a.Body.applyForce(r,r.position,A)}}};t.exports=h},function(t,r){t.exports={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function install(t){t.after("Engine.create",(function(){t.Events.on(this,"collisionStart",(function(r){r.pairs.map((function(r){var o=r.bodyA,a=r.bodyB;o.gameObject&&o.gameObject.emit("collide",o,a,r),a.gameObject&&a.gameObject.emit("collide",a,o,r),t.Events.trigger(o,"onCollide",{pair:r}),t.Events.trigger(a,"onCollide",{pair:r}),o.onCollideCallback&&o.onCollideCallback(r),a.onCollideCallback&&a.onCollideCallback(r),o.onCollideWith[a.id]&&o.onCollideWith[a.id](a,r),a.onCollideWith[o.id]&&a.onCollideWith[o.id](o,r)}))})),t.Events.on(this,"collisionActive",(function(r){r.pairs.map((function(r){var o=r.bodyA,a=r.bodyB;o.gameObject&&o.gameObject.emit("collideActive",o,a,r),a.gameObject&&a.gameObject.emit("collideActive",a,o,r),t.Events.trigger(o,"onCollideActive",{pair:r}),t.Events.trigger(a,"onCollideActive",{pair:r}),o.onCollideActiveCallback&&o.onCollideActiveCallback(r),a.onCollideActiveCallback&&a.onCollideActiveCallback(r)}))})),t.Events.on(this,"collisionEnd",(function(r){r.pairs.map((function(r){var o=r.bodyA,a=r.bodyB;o.gameObject&&o.gameObject.emit("collideEnd",o,a,r),a.gameObject&&a.gameObject.emit("collideEnd",a,o,r),t.Events.trigger(o,"onCollideEnd",{pair:r}),t.Events.trigger(a,"onCollideEnd",{pair:r}),o.onCollideEndCallback&&o.onCollideEndCallback(r),a.onCollideEndCallback&&a.onCollideEndCallback(r)}))}))}))}}},function(t,r,o){var a=o(594),h={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function install(t){t.after("Engine.update",(function(){h.Engine.update(this)}))},Engine:{update:function update(t){for(var r=t.world,o=a.Composite.allBodies(r),d=a.Composite.allComposites(r),T=0;T<o.length;T+=1){var S=o[T];S.plugin.wrap&&h.Body.wrap(S,S.plugin.wrap)}for(T=0;T<d.length;T+=1){var A=d[T];A.plugin.wrap&&h.Composite.wrap(A,A.plugin.wrap)}}},Bounds:{wrap:function wrap(t,r){var o=null,a=null;if(void 0!==r.min.x&&void 0!==r.max.x&&(t.min.x>r.max.x?o=r.min.x-t.max.x:t.max.x<r.min.x&&(o=r.max.x-t.min.x)),void 0!==r.min.y&&void 0!==r.max.y&&(t.min.y>r.max.y?a=r.min.y-t.max.y:t.max.y<r.min.y&&(a=r.max.y-t.min.y)),null!==o||null!==a)return{x:o||0,y:a||0}}},Body:{wrap:function wrap(t,r){var o=h.Bounds.wrap(t.bounds,r);return o&&a.Body.translate(t,o),o}},Composite:{bounds:function bounds(t){for(var r=a.Composite.allBodies(t),o=[],h=0;h<r.length;h+=1){var d=r[h];o.push(d.bounds.min,d.bounds.max)}return a.Bounds.create(o)},wrap:function wrap(t,r){var o=h.Bounds.wrap(h.Composite.bounds(t),r);return o&&a.Composite.translate(t,o),o}}};t.exports=h},function(t,r,o){(function(r){var a=o(33),h=o(17),d={Actions:o(275),Animations:o(723),BlendModes:o(35),Cache:o(735),Cameras:o(738),Core:o(806),Class:o(0),Create:o(888),Curves:o(894),Data:o(896),Display:o(898),DOM:o(917),Events:o(918),Game:o(920),GameObjects:o(1011),Geom:o(483),Input:o(1308),Loader:o(1338),Math:o(193),Physics:o(1493),Plugins:o(1403),Renderer:o(1405),Scale:o(1412),ScaleModes:o(168),Scene:o(418),Scenes:o(1413),Structs:o(1415),Textures:o(1416),Tilemaps:o(1418),Time:o(1461),Tweens:o(1463),Utils:o(1481)};d.Sound=o(1492),d=h(!1,d,a),t.exports=d,r.Phaser=d}).call(this,o(600))}])}));var T,S=getDefaultExportFromCjs(d.exports),A=new(_createClass((function RoutinesData(){_classCallCheck(this,RoutinesData),this.routines=[],this.routinesByNames={}}))),P=function(){function RoutinesManager(){_classCallCheck(this,RoutinesManager)}return _createClass(RoutinesManager,null,[{key:"RegisterRoutine",value:function RegisterRoutine(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;A.routines.push(t),t.GetName(),A.routinesByNames[r]=t,console.assert(t.OnRegister,t),t.OnRegister()}},{key:"InitRoutines",value:function InitRoutines(){for(var t in A.routines){var r=A.routines[t];console.assert(r.Init,r),r.Init()}}},{key:"UpdateRoutines",value:function UpdateRoutines(t,r){for(var o in A.routines){A.routines[o].Update(r)}}}]),RoutinesManager}(),O="undefined"!=typeof global&&(global.crypto||global.msCrypto);if(O&&O.getRandomValues){var D=new Uint8Array(16);T=function whatwgRNG(){return O.getRandomValues(D),D}}if(!T){var L=new Array(16);T=function rng(){for(var t,r=0;r<16;r++)0==(3&r)&&(t=4294967296*Math.random()),L[r]=t>>>((3&r)<<3)&255;return L}}for(var I=[],B=0;B<256;++B)I[B]=(B+256).toString(16).substr(1);function v4(t,r,o){var a=r&&o||0;"string"==typeof t&&(r="binary"==t?new Array(16):null,t=null);var h=(t=t||{}).random||(t.rng||T)();if(h[6]=15&h[6]|64,h[8]=63&h[8]|128,r)for(var d=0;d<16;++d)r[a+d]=h[d];return r||function bytesToUuid(t,r){var o=r||0,a=I;return a[t[o++]]+a[t[o++]]+a[t[o++]]+a[t[o++]]+"-"+a[t[o++]]+a[t[o++]]+"-"+a[t[o++]]+a[t[o++]]+"-"+a[t[o++]]+a[t[o++]]+"-"+a[t[o++]]+a[t[o++]]+a[t[o++]]+a[t[o++]]+a[t[o++]]+a[t[o++]]}(h)}function GetGUID(){return v4()}function clone(t){return Array.isArray(t)?t.slice():t instanceof Object?Object.assign({},t):t}function forEach(t,r){return Array.isArray(t)?forEachOfArray(t,r):function forOwnOfNonArray(t,r){return forEachOfArray(function keysOfNonArray(t){return t?Object.getOwnPropertyNames(t):[]}(t),(function(o){return r(t[o],o)})),t}(t,r),t}function forEachOfArray(t,r){for(var o=0,a=t.length;o<a&&!1!==r(t[o],o);++o);}var N=function merge(t){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];for(var h=0,d=o;h<d.length;h++){var T=d[h];forEach(T,(function(r,o){var a=t[o];a instanceof Object&&(r=merge(clone(a),r)),t[o]=r}))}return t},G=function(){function Component(){_classCallCheck(this,Component),null==this._cbit&&console.warn("COMPONENT NOT REGISTERED")}return _createClass(Component,[{key:"world",get:function get(){return this.entity.world}},{key:"allowMultiple",get:function get(){return this.constructor.allowMultiple}},{key:"keyProperty",get:function get(){return this.constructor.keyProperty}},{key:"destroy",value:function destroy(){this.entity.remove(this)}},{key:"_onDestroyed",value:function _onDestroyed(){this.onDestroyed(),delete this.entity}},{key:"_onEvent",value:function _onEvent(t){this.onEvent(t),"function"==typeof this[t.handlerName]&&this[t.handlerName](t)}},{key:"_onAttached",value:function _onAttached(t){this.entity=t,this.onAttached(t)}},{key:"serialize",value:function serialize(){var t={};for(var r in this.constructor.properties)t[r]=this[r];return JSON.parse(JSON.stringify(t))}},{key:"onAttached",value:function onAttached(t){}},{key:"onDestroyed",value:function onDestroyed(){}},{key:"onEvent",value:function onEvent(t){}}]),Component}();_defineProperty(G,"allowMultiple",!1),_defineProperty(G,"keyProperty",null),_defineProperty(G,"properties",{});var Y={},X=function camelString(t){var r=Y[t];return r||(Y[t]=function camelCase$1(t){return function words$1(t){var r;return null!==(r=t.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/(\d)([A-Za-z])/g,"$1 $2").replace(/([A-Za-z])(\d)/g,"$1 $2").replace(/\b([A-Z]+)([A-Z])([a-z])/,"$1 $2$3").match(/[A-Za-z0-9]+/g))&&void 0!==r?r:[]}(t).map((function(t,r){return r?function capitalize$1(t){return function upperFirst(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""}(t.toLowerCase())}(t):t.toLowerCase()})).join("")}(t),Y[t])},U=function(){function EntityEvent(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,EntityEvent),_defineProperty(this,"data",{}),_defineProperty(this,"prevented",!1),_defineProperty(this,"handled",!1),this.name=t,this.data=r,this.handlerName=X("on ".concat(this.name))}return _createClass(EntityEvent,[{key:"is",value:function is(t){return this.name===t}},{key:"handle",value:function handle(){this.handled=!0,this.prevented=!0}},{key:"prevent",value:function prevent(){this.prevented=!0}}]),EntityEvent}(),z=0,V=function subtractBit(t,r){return t&~(1<<r)},W=function addBit(t,r){return t|1<<r},H=function bitIntersection(t,r){return t&r},q=function serializeComponent(t){return t.serialize()},Z=function serializeComponentArray(t){return t.map(q)},K=function serializeComponentKeyed(t){var r={};for(var o in t)r[o]=q(t[o]);return r},J=function(){function Entity(t,r){_classCallCheck(this,Entity),_defineProperty(this,"_cbits",function GetBitZero(){return z}()),_defineProperty(this,"_qeligible",!0),this.world=t,this.id=r,this.components={},this.isDestroyed=!1}return _createClass(Entity,[{key:"_candidacy",value:function _candidacy(){this._qeligible&&this.world._candidate(this)}},{key:"add",value:function add(t,r){var o=new t(r);o.keyProperty?function attachComponentKeyed(t,r){var o=r._ckey;t.components[o]||(t[o]={},t.components[o]={}),t[o][r[r.keyProperty]]=r,t.components[o][r[r.keyProperty]]=r}(this,o):o.allowMultiple?function attachComponentArray(t,r){var o=r._ckey;t.components[o]||(t[o]=[],t.components[o]=[]),t[o].push(r),t.components[o].push(r)}(this,o):function attachComponent(t,r){var o=r._ckey;t[o]=r,t.components[o]=r}(this,o),this._cbits=W(this._cbits,o._cbit),o._onAttached(this),this._candidacy()}},{key:"has",value:function has(t){return function hasBit(t,r){return(t>>r)%2!==z}(this._cbits,t.prototype._cbit)}},{key:"remove",value:function remove(t){t.keyProperty?function removeComponentKeyed(t,r){var o=r._ckey,a=r[r.keyProperty];delete t[o][a],delete t.components[o][a],Object.keys(t[o]).length<=0&&(t._cbits=V(t._cbits,r._cbit),t._candidacy(),delete t.components[o],delete t[o])}(this,t):t.allowMultiple?function removeComponentArray(t,r){var o=r._ckey,a=t[o].indexOf(r);t[o].splice(a,1),t.components[o].splice(a,1),t[o].length<=0&&(t._cbits=V(t._cbits,r._cbit),t._candidacy(),delete t.components[o],delete t[o])}(this,t):function removeComponent(t,r){var o=r._ckey;t._cbits=V(t._cbits,r._cbit),t._candidacy(),delete t.components[o],delete t[o]}(this,t),t._onDestroyed()}},{key:"destroy",value:function destroy(){for(var t in this.components){var r=this.components[t];if(r instanceof G)this._cbits=V(this._cbits,r._cbit);else if(r instanceof Array){var o,a=_createForOfIteratorHelper(r);try{for(a.s();!(o=a.n()).done;){var h=o.value;this._cbits=V(this._cbits,h._cbit)}}catch(B){a.e(B)}finally{a.f()}}else for(var d=0,T=Object.values(r);d<T.length;d++){var S=T[d];this._cbits=V(this._cbits,S._cbit)}}for(var A in this._candidacy(),this.components){var P=this.components[A];if(P instanceof G)P._onDestroyed();else if(P instanceof Array){var O,D=_createForOfIteratorHelper(P);try{for(D.s();!(O=D.n()).done;){O.value._onDestroyed()}}catch(B){D.e(B)}finally{D.f()}}else for(var L=0,I=Object.values(P);L<I.length;L++){I[L]._onDestroyed()}delete this[A],delete this.components[A]}this.world._destroyed(this.id),this.components={},this.isDestroyed=!0}},{key:"serialize",value:function serialize(){var t={};for(var r in this.components){var o=this.components[r];t[r]=o instanceof G?q(o):o instanceof Array?Z(o):K(o)}return function _objectSpread(t){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(o),!0).forEach((function(r){_defineProperty(t,r,o[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(o,r))}))}return t}({id:this.id},t)}},{key:"clone",value:function clone(){return this.world.cloneEntity(this)}},{key:"fireEvent",value:function fireEvent(t,r){var o=new U(t,r);for(var a in this.components){var h=this.components[a];if(h instanceof G){if(h._onEvent(o),o.prevented)return o}else if(h instanceof Array){for(var d=0;d<h.length;d++)if(h[d]._onEvent(o),o.prevented)return o}else for(var T=0,S=Object.values(h);T<S.length;T++){if(S[T]._onEvent(o),o.prevented)return o}}return o}}]),Entity}(),Q=function(t){_inherits(DataComponent,t);var r=_createSuper(DataComponent);function DataComponent(t){var o;_classCallCheck(this,DataComponent),(o=r.call(this,null)).gameStateName=null;var a=JSON.parse(JSON.stringify(o.constructor.properties));return Object.assign(_assertThisInitialized(o),a,t),o}return _createClass(DataComponent,null,[{key:"At",value:function At(t){return t.data}},{key:"properties",get:function get(){return{}}},{key:"AddToEntityWithProperties",value:function AddToEntityWithProperties(t,r){return t.has(DataComponent)||t.add(DataComponent,{}),N(DataComponent.At(t),r),DataComponent.At(t)}}]),DataComponent}(G),$=new(_createClass((function InternalData$b(){_classCallCheck(this,InternalData$b),this.bags={},this.entitiesByAlias={}}))),tt=function(){function EntityKeeper(){_classCallCheck(this,EntityKeeper)}return _createClass(EntityKeeper,null,[{key:"Init",value:function Init(){}},{key:"PutActorIntoHisBags",value:function PutActorIntoHisBags(t){var r=et.At(t);for(var o in r.keys)$.bags[o]||($.bags[o]=[]),$.bags[o].indexOf(t)<=-1&&$.bags[o].push(t);r.alias&&($.entitiesByAlias[r.alias]&&$.entitiesByAlias[r.alias],$.entitiesByAlias[r.alias]=t)}},{key:"RemoveActorFromAllHisBags",value:function RemoveActorFromAllHisBags(t){var r=et.At(t);for(var o in r.keys){$.bags[o]||($.bags[o]=[]);var a=$.bags[o].indexOf(t);a>=0&&$.bags[o].splice(a,1)}r.alias&&$.entitiesByAlias[r.alias]&&$.entitiesByAlias[r.alias]==t&&delete $.entitiesByAlias[r.alias]}},{key:"QueueDisposeActorsInBag",value:function QueueDisposeActorsInBag(t){for(var r=$.bags[t],o=r.length-1;o>=0;o--)Ct.QueueActorToDisposeBuffer(r[o])}},{key:"GetBagActorsReferenceList",value:function GetBagActorsReferenceList(t){return $.bags[t]||($.bags[t]=[]),$.bags[t]}},{key:"GetEntityByAlias",value:function GetEntityByAlias(t){return $.entitiesByAlias[t]}},{key:"GetEntityByID",value:function GetEntityByID(t){return ut.GetWorld().getEntity(t)}},{key:"DumpLogBags",value:function DumpLogBags(){console.log($.bags)}},{key:"DumpLogLengthALL",value:function DumpLogLengthALL(){console.log($.bags.ALL.length)}}]),EntityKeeper}(),et=function(t){_inherits(BagsComponent,t);var r=_createSuper(BagsComponent);function BagsComponent(t){var o;_classCallCheck(this,BagsComponent),(o=r.call(this,null)).keys={},o.alias=null;var a=JSON.parse(JSON.stringify(o.constructor.properties));return Object.assign(_assertThisInitialized(o),a,t),o}return _createClass(BagsComponent,[{key:"setAlias",value:function setAlias(t){this.alias&&console.warn("FIX ME! ",this.alias,t),this.alias=t,tt.PutActorIntoHisBags(this.entity)}},{key:"onAttached",value:function onAttached(t){tt.PutActorIntoHisBags(t)}},{key:"onDestroyed",value:function onDestroyed(){tt.RemoveActorFromAllHisBags(this.entity)}}],[{key:"At",value:function At(t){return t.bags}},{key:"AddBagList",value:function AddBagList(t,r){console.assert(o(r),"not an array! ",r);var a={};for(var h in r){a[r[h]]=!0}t.has(BagsComponent)||t.add(BagsComponent,{});var d=BagsComponent.At(t);return N(d.keys,a),tt.PutActorIntoHisBags(t),this}},{key:"properties",get:function get(){return{}}}]),BagsComponent}(G),it=function(){function ComponentRegistry(){_classCallCheck(this,ComponentRegistry),_defineProperty(this,"_cbit",0),_defineProperty(this,"_map",{})}return _createClass(ComponentRegistry,[{key:"register",value:function register(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r=X(t.name),null!=o&&(r=o),t.prototype._ckey=r,t.prototype._cbit=++this._cbit,this._map[r]=t}},{key:"get",value:function get(t){return this._map[t]}}]),ComponentRegistry}(),nt=function(){function PrefabComponent(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];_classCallCheck(this,PrefabComponent),this.clazz=t,this.properties=r,this.overwrite=o}return _createClass(PrefabComponent,[{key:"applyToEntity",value:function applyToEntity(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.clazz.allowMultiple&&t.has(this.clazz)){if(!this.overwrite)return;var o=t[this.clazz.prototype._ckey];t.remove(o)}var a=N(this.properties,r);t.add(this.clazz,a)}}]),PrefabComponent}(),rt=function(){function Prefab(t){_classCallCheck(this,Prefab),_defineProperty(this,"name",""),_defineProperty(this,"inherit",[]),_defineProperty(this,"components",[]),this.name=t}return _createClass(Prefab,[{key:"addComponent",value:function addComponent(t){this.components.push(t)}},{key:"applyToEntity",value:function applyToEntity(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.inherit.forEach((function(o){o.applyToEntity(t,r)}));var o={};return this.components.forEach((function(a){var h=a.clazz,d=h.prototype._ckey,T={};if(h.allowMultiple)if(h.keyProperty){var S=a.properties[h.keyProperty];r[d]&&r[d][S]&&(T=r[d][S])}else o[d]||(o[d]=0),r[d]&&r[d][o[d]]&&(T=r[d][o[d]]),o[d]++;else T=r[d];a.applyToEntity(t,T)})),t}}]),Prefab}(),st=function(){function PrefabRegistry(t){_classCallCheck(this,PrefabRegistry),_defineProperty(this,"_prefabs",{}),_defineProperty(this,"_engine",null),this._engine=t}return _createClass(PrefabRegistry,[{key:"deserialize",value:function deserialize(t){var r=this,o=this.get(t.name);if(o)return o;var a,h=new rt(t.name);return a=Array.isArray(t.inherit)?t.inherit:"string"==typeof t.inherit?[t.inherit]:[],h.inherit=a.map((function(o){var a=r.get(o);return a||(console.warn('Prefab "'.concat(t.name,'" cannot inherit from Prefab "').concat(o,'" because is not registered yet! Prefabs must be registered in the right order.')),o)})),(t.components||[]).forEach((function(o){var a="unknown";if("string"==typeof o){a=o;var d=X(o),T=r._engine._components.get(d);if(T)return void h.addComponent(new nt(T))}if("object"===_typeof(o)){a=o.type||"unknown";var S=X(o.type),A=r._engine._components.get(S);if(A)return void h.addComponent(new nt(A,o.properties,o.overwrite))}console.warn('Unrecognized component reference "'.concat(a,'" in prefab "').concat(t.name,'". Ensure the component is registered before the prefab.'),o)})),h}},{key:"register",value:function register(t){var r=this.deserialize(t);this._prefabs[r.name]=r}},{key:"get",value:function get(t){return this._prefabs[t]}},{key:"create",value:function create(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=this.get(r);if(a){var h=t.createEntity();return h._qeligible=!1,a.applyToEntity(h,o),h._qeligible=!0,h._candidacy(),h}console.warn('Could not instantiate prefab "'.concat(r,'" since it is not registered'))}}]),PrefabRegistry}(),ot=function(){function Query(t,r){_classCallCheck(this,Query),_defineProperty(this,"_cache",[]),_defineProperty(this,"_onAddListeners",[]),_defineProperty(this,"_onRemoveListeners",[]),_defineProperty(this,"_immutableResult",!0),this._world=t;var o=r.any||[],a=r.all||[],h=r.none||[];this._any=o.reduce((function(t,r){return W(t,r.prototype._cbit)}),z),this._all=a.reduce((function(t,r){return W(t,r.prototype._cbit)}),z),this._none=h.reduce((function(t,r){return W(t,r.prototype._cbit)}),z),this._immutableResult=null==r.immutableResult||r.immutableResult,this.refresh()}return _createClass(Query,[{key:"onEntityAdded",value:function onEntityAdded(t){this._onAddListeners.push(t)}},{key:"onEntityRemoved",value:function onEntityRemoved(t){this._onRemoveListeners.push(t)}},{key:"has",value:function has(t){return this.idx(t)>=0}},{key:"idx",value:function idx(t){return this._cache.indexOf(t)}},{key:"matches",value:function matches(t){var r=t._cbits,o=this._any===z||H(r,this._any)>0,a=H(r,this._all)===this._all,h=H(r,this._none)===z;return o&&a&&h}},{key:"candidate",value:function candidate(t){var r=this.idx(t),o=r>=0;return!t.isDestroyed&&this.matches(t)?(o||(this._cache.push(t),this._onAddListeners.forEach((function(r){return r(t)}))),!0):(o&&(this._cache.splice(r,1),this._onRemoveListeners.forEach((function(r){return r(t)}))),!1)}},{key:"refresh",value:function refresh(){var t=this;this._cache=[],this._world._entities.forEach((function(r){t.candidate(r)}))}},{key:"get",value:function get(){return this._immutableResult?_toConsumableArray2(this._cache):this._cache}}]),Query}(),at=function(){function World(t){_classCallCheck(this,World),_defineProperty(this,"_id",0),_defineProperty(this,"_queries",[]),_defineProperty(this,"_entities",new Map),this.engine=t}return _createClass(World,[{key:"createId",value:function createId(){return++this._id+Math.random().toString(36).substr(2,9)}},{key:"getEntity",value:function getEntity(t){return this._entities.get(t)}},{key:"getEntities",value:function getEntities(){return this._entities.values()}},{key:"createEntity",value:function createEntity(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.createId(),r=new J(this,t);return this._entities.set(t,r),r}},{key:"destroyEntity",value:function destroyEntity(t){var r=this.getEntity(t);r&&r.destroy()}},{key:"destroyEntities",value:function destroyEntities(){this._entities.forEach((function(t){t.destroy()}))}},{key:"destroy",value:function destroy(){this.destroyEntities(),this._id=0,this._queries=[],this._entities=new Map}},{key:"createQuery",value:function createQuery(t){var r=new ot(this,t);return this._queries.push(r),r}},{key:"createPrefab",value:function createPrefab(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.engine._prefabs.create(this,t,r)}},{key:"serialize",value:function serialize(t){var r=[];return(t||this._entities).forEach((function(t){r.push(t.serialize())})),{entities:r}}},{key:"cloneEntity",value:function cloneEntity(t){var r=t.serialize();return r.id=this.createId(),this._deserializeEntity(r)}},{key:"deserialize",value:function deserialize(t){var r,o=_createForOfIteratorHelper(t.entities);try{for(o.s();!(r=o.n()).done;){var a=r.value;this._createOrGetEntityById(a.id)}}catch(S){o.e(S)}finally{o.f()}var h,d=_createForOfIteratorHelper(t.entities);try{for(d.s();!(h=d.n()).done;){var T=h.value;this._deserializeEntity(T)}}catch(S){d.e(S)}finally{d.f()}}},{key:"_createOrGetEntityById",value:function _createOrGetEntityById(t){return this.getEntity(t)||this.createEntity(t)}},{key:"_deserializeEntity",value:function _deserializeEntity(r){var o=this,a=r.id,h=_objectWithoutProperties(r,t),d=this._createOrGetEntityById(a);return d._qeligible=!1,Object.entries(h).forEach((function(t){var r=_slicedToArray2(t,2),a=r[0],h=r[1],T=X(a),S=o.engine._components.get(T);S.allowMultiple?Object.values(h).forEach((function(t){d.add(S,t)})):d.add(S,h)})),d._qeligible=!0,d._candidacy(),d}},{key:"_candidate",value:function _candidate(t){this._queries.forEach((function(r){return r.candidate(t)}))}},{key:"_destroyed",value:function _destroyed(t){return this._entities.delete(t)}}]),World}(),ht=function(){function Engine(){_classCallCheck(this,Engine),_defineProperty(this,"_components",new it),_defineProperty(this,"_prefabs",new st(this))}return _createClass(Engine,[{key:"registerComponent",value:function registerComponent(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._components.register(t,r)}},{key:"registerPrefab",value:function registerPrefab(t){this._prefabs.register(t)}},{key:"createWorld",value:function createWorld(){return new at(this)}},{key:"destroyWorld",value:function destroyWorld(t){t.destroy()}}]),Engine}(),lt=new(_createClass((function InternalDataClass$8(){_classCallCheck(this,InternalDataClass$8),this.engine=null,this.world=null}))),ut=function(){function GeoticManager(){_classCallCheck(this,GeoticManager)}return _createClass(GeoticManager,null,[{key:"SetEngine",value:function SetEngine(t){lt.engine=t}},{key:"GetEngine",value:function GetEngine(){return lt.engine}},{key:"SetWorld",value:function SetWorld(t){lt.world=t}},{key:"GetWorld",value:function GetWorld(){return lt.world}},{key:"CreateEntity",value:function CreateEntity(t){console.assert(t,"GameState: ",t),t.name&&(t=t.name);var r=lt.world.createEntity();return Q.AddToEntityWithProperties(r,{gameStateName:t}),et.AddBagList(r,["ALL"]),et.AddBagList(r,[t]),r}},{key:"InstantActorDestroy",value:function InstantActorDestroy(t){t.isDestroyed||t.destroy()}}]),GeoticManager}(),ct=function(){function DataHolder(){_classCallCheck(this,DataHolder),this.data={},this.keyList=[]}return _createClass(DataHolder,[{key:"register",value:function register(t,r){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.data[t]&&0==o&&console.warn(t," ALREADY EXIST IN DATA HOLDER"),this.data[t]=r,this.keyList.indexOf(t)<=-1&&this.keyList.push(t),r}},{key:"hasKey",value:function hasKey(t){return!!this.data[t]}},{key:"getData",value:function getData(t){return console.assert(this.data[t],t," not in: ",this.data),this.data[t]}},{key:"getKeyList",value:function getKeyList(){return this.keyList}}]),DataHolder}(),dt=function(){function GameBranding(){_classCallCheck(this,GameBranding),this.topScore=0}return _createClass(GameBranding,[{key:"init",value:function init(){}},{key:"getPremadeOverrides",value:function getPremadeOverrides(){return{}}},{key:"gameEvent",value:function gameEvent(t){}},{key:"getAudioOverrides",value:function getAudioOverrides(){return{}}},{key:"getFlags",value:function getFlags(){return{disableSaveUserPrefs:0,disableSaveGameData:0,disableFakeMusicPreload:0,cordovaListenersEnabled:0,disableAutoPause:0,allowPauseAlways:0}}},{key:"getUntypedFlags",value:function getUntypedFlags(){return{}}},{key:"onGetRendererTypeOverride",value:function onGetRendererTypeOverride(t){return t}},{key:"hasToResetScoreEachLevel",value:function hasToResetScoreEachLevel(){return!1}},{key:"adaptLocalStorageSetItem",value:function adaptLocalStorageSetItem(t,r){localStorage.setItem(t,r)}},{key:"adaptLocalStorageGetItem",value:function adaptLocalStorageGetItem(t){return localStorage.getItem(t)}},{key:"showAd",value:function showAd(t){t()}},{key:"onUpdateScore",value:function onUpdateScore(t){this.topScore=t}},{key:"onUpdateLevelNumber",value:function onUpdateLevelNumber(t){}},{key:"pushAPIGameLoadObj",value:function pushAPIGameLoadObj(t){}}],[{key:"SetSingleton",value:function SetSingleton(t){GameBranding.Singleton=t,GameBranding.Singleton.init(),console.log(t)}},{key:"GetSingleton",value:function GetSingleton(){return this.Singleton}}]),GameBranding}();_defineProperty(dt,"Singleton",void 0);var ft=function(){function GameCommand(t){_classCallCheck(this,GameCommand),this._func=t}return _createClass(GameCommand,[{key:"run",value:function run(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._func(t)}}]),GameCommand}(),pt=function(t){_inherits(ExtendedDataHolder$1,t);var r=_createSuper(ExtendedDataHolder$1);function ExtendedDataHolder$1(){return _classCallCheck(this,ExtendedDataHolder$1),r.apply(this,arguments)}return _createClass(ExtendedDataHolder$1,[{key:"register",value:function register(t,r){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _get(_getPrototypeOf(ExtendedDataHolder$1.prototype),"register",this).call(this,t,r,o),r}},{key:"getData",value:function getData(t){return _get(_getPrototypeOf(ExtendedDataHolder$1.prototype),"getData",this).call(this,t)}},{key:"runCommand",value:function runCommand(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.getData(t).run(r)}},{key:"runCommandObj",value:function runCommandObj(t){this.runCommand(t.key,t)}}]),ExtendedDataHolder$1}(ct),gt=new pt,vt=function(t){_inherits(CommandsComponent,t);var r=_createSuper(CommandsComponent);function CommandsComponent(t){var o;_classCallCheck(this,CommandsComponent),(o=r.call(this,null)).byTriggers={};var a=JSON.parse(JSON.stringify(o.constructor.properties));return Object.assign(_assertThisInitialized(o),a,t),o}return _createClass(CommandsComponent,[{key:"runCommandAtTriggerKey",value:function runCommandAtTriggerKey(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=this.byTriggers[t]){var o=this.byTriggers[t];if(gt.hasKey(o.key)){var a={entity:this.entity};o&&N(a,o),o.pOptPayload&&N(a,r),gt.runCommand(o.key,a)}else console.warn("GameCommandsRegistry no defined command: ",o.key)}}}],[{key:"At",value:function At(t){return t.commands||CommandsComponent.AddWithData(t,{}),t.commands}},{key:"AddWithData",value:function AddWithData(t,r){t.has(CommandsComponent)||t.add(CommandsComponent,{});var o=CommandsComponent.At(t);return N(o,{byTriggers:r}),o}},{key:"properties",get:function get(){return{}}}]),CommandsComponent}(G),mt="quit",yt="exit",xt="enterFresh",Tt=function(){function GameState(t){_classCallCheck(this,GameState),this.name=t,this.state="null",this.curQuitDelay=0,this.onEnter=function(){},this.onExit=function(){},this.onQuit=function(){},wt.register(this.name,this)}return _createClass(GameState,[{key:"enterFresh",value:function enterFresh(){this.state!=mt&&"null"!=this.state&&(this.state!=yt&&this.exit(),this.quit()),this.state=xt,this.onEnter(),dt.GetSingleton().gameEvent("stateChange",{stateName:this.name,stateChangeType:"enter"})}},{key:"exit",value:function exit(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;if(this.delayedFunctionDict={},this.state!=yt&&this.state!=mt&&"null"!=this.state){this.curQuitDelay=t,this.state=yt,this.onExit(),dt.GetSingleton().gameEvent("stateChange",{stateName:this.name,stateChangeType:"exit"});var r=tt.GetBagActorsReferenceList(this.name);for(var o in r){var a=r[o];vt.At(a).runCommandAtTriggerKey("exit")}}}},{key:"quit",value:function quit(){this.delayedFunctionDict={},this.state!=mt&&"null"!=this.state&&(this.state=mt,tt.QueueDisposeActorsInBag(this.name),this.onQuit())}},{key:"continue",value:function _continue(){this.state==yt&&this.quit(),this.state!=xt&&this.enterFresh()}},{key:"isRunning",value:function isRunning(){return this.state==xt}},{key:"updateDelayedQuit",value:function updateDelayedQuit(t){this.state==yt&&(this.curQuitDelay-=t,this.curQuitDelay<0&&this.quit())}}]),GameState}(),bt=function(t){_inherits(ExtendedDataHolder,t);var r=_createSuper(ExtendedDataHolder);function ExtendedDataHolder(){return _classCallCheck(this,ExtendedDataHolder),r.apply(this,arguments)}return _createClass(ExtendedDataHolder,[{key:"register",value:function register(t,r){return _get(_getPrototypeOf(ExtendedDataHolder.prototype),"register",this).call(this,t,r),r}},{key:"getData",value:function getData(t){return _get(_getPrototypeOf(ExtendedDataHolder.prototype),"getData",this).call(this,t)}}]),ExtendedDataHolder}(ct),wt=new bt,St={entityDisposeBuffer:[],delayedFunctionDict:{},delayedFunctionDeleteKeysList:[],active:!0};var Ct=function(){function EndOfLoopRoutine(){_classCallCheck(this,EndOfLoopRoutine)}return _createClass(EndOfLoopRoutine,null,[{key:"OnRegister",value:function OnRegister(){}},{key:"Init",value:function Init(){}},{key:"Register",value:function Register(){P.RegisterRoutine(EndOfLoopRoutine)}},{key:"GetName",value:function GetName(){return"EndOfLoopRoutine"}},{key:"QueueActorToDisposeBuffer",value:function QueueActorToDisposeBuffer(t){t&&(t.isDestroyed||St.entityDisposeBuffer.indexOf(t)>-1||St.entityDisposeBuffer.push(t))}},{key:"QueueDelayedFunction",value:function QueueDelayedFunction(t,r,o){return null==t&&(t=GetGUID()),St.delayedFunctionDict[t]={tag:t,delay:r,func:o},t}},{key:"Update",value:function Update(t){var r=wt.getKeyList();for(var o in r){var a=r[o];wt.getData(a).updateDelayedQuit(t)}for(var h in St.delayedFunctionDict){var d=St.delayedFunctionDict[h];d.delay-=t,d.delay<=0&&(St.delayedFunctionDeleteKeysList.push(h),d.func())}for(var T=St.delayedFunctionDeleteKeysList.length-1;T>=0;T--){var S=St.delayedFunctionDeleteKeysList[T];delete St.delayedFunctionDict[S],St.delayedFunctionDeleteKeysList.splice(T,1)}St.entityDisposeBuffer.length>0&&function _FlushDisposeBuffer(){var t=St.entityDisposeBuffer;St.entityDisposeBuffer=[];for(var r=t.length-1;r>=0;r--){var o=t[r];ut.InstantActorDestroy(o)}}()}}]),EndOfLoopRoutine}(),Et={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1},Mt=!1;function GetOs(){if(Mt)return Et;Mt=!0;var t=navigator.userAgent;/Windows/.test(t)?Et.windows=!0:/Mac OS/.test(t)&&!/like Mac OS/.test(t)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(Et.iOS=!0,Et.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),Et.iOSVersion=parseInt(RegExp.$1,10)):Et.macOS=!0:/Android/.test(t)?Et.android=!0:/Linux/.test(t)?Et.linux=!0:/iP[ao]d|iPhone/i.test(t)?(Et.iOS=!0,navigator.appVersion.match(/OS (\d+)/),Et.iOSVersion=parseInt(RegExp.$1,10),Et.iPhone=-1!==t.toLowerCase().indexOf("iphone"),Et.iPad=-1!==t.toLowerCase().indexOf("ipad")):/Kindle/.test(t)||/\bKF[A-Z][A-Z]+/.test(t)||/Silk.*Mobile Safari/.test(t)?Et.kindle=!0:/CrOS/.test(t)&&(Et.chromeOS=!0),(/Windows Phone/i.test(t)||/IEMobile/i.test(t))&&(Et.android=!1,Et.iOS=!1,Et.macOS=!1,Et.windows=!0,Et.windowsPhone=!0);var r=/Silk/.test(t);return(Et.windows||Et.macOS||Et.linux&&!r||Et.chromeOS)&&(Et.desktop=!0),(Et.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(Et.desktop=!1),navigator.standalone&&(Et.webApp=!0),void 0!==window.cordova&&(Et.cordova=!0),"undefined"!=typeof process&&process.versions&&process.versions.node&&(Et.node=!0),Et.node&&"object"===_typeof(process.versions)&&(Et.nodeWebkit=!!process.versions["node-webkit"],Et.electron=!!process.versions.electron),void 0!==window.ejecta&&(Et.ejecta=!0),/Crosswalk/.test(t)&&(Et.crosswalk=!0),Et.pixelRatio=window.devicePixelRatio||1,Et}var _t={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0},Pt=!1;var Rt=function(){function ObjectFactory$1(t){_classCallCheck(this,ObjectFactory$1),this.scene=t,this.displayList=t.sys.displayList,this.updateList=t.sys.updateList,t.sys.events.once("destroy",this.destroy,this)}return _createClass(ObjectFactory$1,[{key:"destroy",value:function destroy(){this.scene=null,this.displayList=null,this.updateList=null}}],[{key:"register",value:function register(t,r){ObjectFactory$1.prototype[t]=r}}]),ObjectFactory$1}(),kt={exports:{}};!function(t){var r=Object.prototype.hasOwnProperty,o="~";function Events(){}function EE(t,r,o){this.fn=t,this.context=r,this.once=o||!1}function addListener(t,r,a,h,d){if("function"!=typeof a)throw new TypeError("The listener must be a function");var T=new EE(a,h||t,d),S=o?o+r:r;return t._events[S]?t._events[S].fn?t._events[S]=[t._events[S],T]:t._events[S].push(T):(t._events[S]=T,t._eventsCount++),t}function clearEvent(t,r){0==--t._eventsCount?t._events=new Events:delete t._events[r]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(o=!1)),EventEmitter.prototype.eventNames=function eventNames(){var t,a,h=[];if(0===this._eventsCount)return h;for(a in t=this._events)r.call(t,a)&&h.push(o?a.slice(1):a);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(t)):h},EventEmitter.prototype.listeners=function listeners(t){var r=o?o+t:t,a=this._events[r];if(!a)return[];if(a.fn)return[a.fn];for(var h=0,d=a.length,T=new Array(d);h<d;h++)T[h]=a[h].fn;return T},EventEmitter.prototype.listenerCount=function listenerCount(t){var r=o?o+t:t,a=this._events[r];return a?a.fn?1:a.length:0},EventEmitter.prototype.emit=function emit(t,r,a,h,d,T){var S=o?o+t:t;if(!this._events[S])return!1;var A,P,O=this._events[S],D=arguments.length;if(O.fn){switch(O.once&&this.removeListener(t,O.fn,void 0,!0),D){case 1:return O.fn.call(O.context),!0;case 2:return O.fn.call(O.context,r),!0;case 3:return O.fn.call(O.context,r,a),!0;case 4:return O.fn.call(O.context,r,a,h),!0;case 5:return O.fn.call(O.context,r,a,h,d),!0;case 6:return O.fn.call(O.context,r,a,h,d,T),!0}for(P=1,A=new Array(D-1);P<D;P++)A[P-1]=arguments[P];O.fn.apply(O.context,A)}else{var L,I=O.length;for(P=0;P<I;P++)switch(O[P].once&&this.removeListener(t,O[P].fn,void 0,!0),D){case 1:O[P].fn.call(O[P].context);break;case 2:O[P].fn.call(O[P].context,r);break;case 3:O[P].fn.call(O[P].context,r,a);break;case 4:O[P].fn.call(O[P].context,r,a,h);break;default:if(!A)for(L=1,A=new Array(D-1);L<D;L++)A[L-1]=arguments[L];O[P].fn.apply(O[P].context,A)}}return!0},EventEmitter.prototype.on=function on(t,r,o){return addListener(this,t,r,o,!1)},EventEmitter.prototype.once=function once(t,r,o){return addListener(this,t,r,o,!0)},EventEmitter.prototype.removeListener=function removeListener(t,r,a,h){var d=o?o+t:t;if(!this._events[d])return this;if(!r)return clearEvent(this,d),this;var T=this._events[d];if(T.fn)T.fn!==r||h&&!T.once||a&&T.context!==a||clearEvent(this,d);else{for(var S=0,A=[],P=T.length;S<P;S++)(T[S].fn!==r||h&&!T[S].once||a&&T[S].context!==a)&&A.push(T[S]);A.length?this._events[d]=1===A.length?A[0]:A:clearEvent(this,d)}return this},EventEmitter.prototype.removeAllListeners=function removeAllListeners(t){var r;return t?(r=o?o+t:t,this._events[r]&&clearEvent(this,r)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=o,EventEmitter.EventEmitter=EventEmitter,t.exports=EventEmitter}(kt);var Ot=function(t){_inherits(EventEmitter,t);var r=_createSuper(EventEmitter);function EventEmitter(){return _classCallCheck(this,EventEmitter),r.apply(this,arguments)}return _createClass(EventEmitter,[{key:"shutdown",value:function shutdown(){this.removeAllListeners()}},{key:"destroy",value:function destroy(){this.removeAllListeners()}}]),EventEmitter}(kt.exports),Dt=function GetValue$l(t,r,o){if(t&&"number"!=typeof t){if(t.hasOwnProperty(r))return t[r];if(-1!==r.indexOf(".")){for(var a=r.split("."),h=t,d=o,T=0;T<a.length;T++){if(!h.hasOwnProperty(a[T])){d=o;break}d=h[a[T]],h=h[a[T]]}return d}return o}return o},Lt=function(){function Bank(t){_classCallCheck(this,Bank),this.nextId=Dt(t,"start",1),this.uidKey=Dt(t,"uidKey","$uid"),this.autoRemove=Dt(t,"remove",!0),this.refs={},this.count=0}return _createClass(Bank,[{key:"add",value:function add(t,r){var o=this.refs,a=this.uidKey;if(a&&null!=(r=t[a]))return this;if(null==r)do{r=this.nextId,this.nextId++}while(o.hasOwnProperty(r));return o.hasOwnProperty(r)?r=null:(o[r]=t,this.count++,a&&(t[a]=r),this.autoRemove&&t.on&&t.once("destroy",(function(){this.remove(r)}),this)),a?this:r}},{key:"addMultiple",value:function addMultiple(t){for(var r=0,o=t.length;r<o;r++)this.add(t[r]);return this}},{key:"get",value:function get(t){return this.refs[t]}},{key:"has",value:function has(t){return this.refs.hasOwnProperty(t)}},{key:"remove",value:function remove(t){var r=this.refs;if(r.hasOwnProperty(t)){if(this.uidKey)r[t][this.uidKey]=void 0;delete r[t],this.count--}return this}},{key:"forEach",value:function forEach(t,r){var o,a=this.refs;for(var h in a)o=a[h],r?t.call(r,o,h):t(o,h)}},{key:"clear",value:function clear(){this.forEach((function(t){this.remove(t)}),this)}}]),Bank}(),It=new Lt({uidKey:"$uid",remove:!1}),Ft={setEventEmitter:function setEventEmitter(t,r){return void 0===r&&(r=Phaser.Events.EventEmitter),this._privateEE=!0===t||void 0===t,this._eventEmitter=this._privateEE?new r:t,this},destroyEventEmitter:function destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter:function getEventEmitter(){return this._eventEmitter},on:function on(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function once(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function off(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function emit(t){return this._eventEmitter&&t&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function addListener(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function removeListener(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function removeAllListeners(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function listenerCount(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function listeners(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function eventNames(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},Bt=Phaser.Scene,Nt=function IsSceneObject(t){return t instanceof Bt},Gt=function GetSceneObject(t){return null==t||"object"!==_typeof(t)?null:Nt(t)?t:t.scene&&Nt(t.scene)?t.scene:t.parent&&t.parent.scene&&Nt(t.parent.scene)?t.parent.scene:void 0},Yt=Phaser.Utils.Objects.GetValue,Xt=function(){function ComponentBase(t,r){_classCallCheck(this,ComponentBase),this.parent=t,this.scene=Gt(t),this.isShutdown=!1,this.setEventEmitter(Yt(r,"eventEmitter",!0)),this.parent&&this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this)}return _createClass(ComponentBase,[{key:"shutdown",value:function shutdown(t){this.isShutdown||(this.parent&&this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.isShutdown=!0)}},{key:"destroy",value:function destroy(t){this.shutdown(t)}},{key:"onSceneDestroy",value:function onSceneDestroy(){this.destroy(!0)}},{key:"onParentDestroy",value:function onParentDestroy(t,r){this.destroy(r)}}]),ComponentBase}();Object.assign(Xt.prototype,Ft);var Ut={x:0,y:0},zt=function IsPlainObject(t){if("object"!==_typeof(t)||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}return!0},Vt=It.uidKey,Wt=function(t){_inherits(Chess,t);var r=_createSuper(Chess);function Chess(t,o){var a;return _classCallCheck(this,Chess),a=r.call(this,t,{eventEmitter:!1}),It.add(_assertThisInitialized(a),o),a.board=null,a.blocker=!1,a}return _createClass(Chess,[{key:"shutdown",value:function shutdown(t){this.isShutdown||(this.board&&this.board.removeChess(this[Vt]),It.remove(this[Vt]),this.board=null,_get(_getPrototypeOf(Chess.prototype),"shutdown",this).call(this,t))}},{key:"setBoard",value:function setBoard(t){return this.board=t,this}},{key:"tileXYZ",get:function get(){return null==this.board?null:this.board.chessToTileXYZ(this[Vt])}},{key:"setTileZ",value:function setTileZ(t){return null==this.board||this.board.setChessTileZ(this.parent,t),this}},{key:"setBlocker",value:function setBlocker(t){return void 0===t&&(t=!0),this.blocker=t,this}},{key:"setBlockEdge",value:function setBlockEdge(t,r){!1===this.blocker&&(this.blocker={});var o=this.blocker;if(zt(t)){var a=t;for(t in a)o[t]=a[t]}else void 0===r&&(r=!0),o[t]=r;return this}},{key:"getBlockEdge",value:function getBlockEdge(t){var r=this.blocker;return!1!==r&&(!!r.hasOwnProperty(t)&&r[t])}}]),Chess}(Xt),Ht={getTileDirection:function GetTileDirection(t,r){var o=this.board;return null===o?null:(Ut.x=t,Ut.y=r,o.getNeighborTileDirection(this.tileXYZ,Ut))}};Object.assign(Wt.prototype,Ht);var jt=function IsUID(t){var r=_typeof(t);return"number"===r||"string"===r},qt=function GetChessData(t){return jt(t)?It.get(t):(t.hasOwnProperty("rexChess")||(t.rexChess=new Wt(t)),t.rexChess)},Zt=It.uidKey,Kt=function GetChessUID(t){return jt(t)?t:qt(t)[Zt]},Jt=function TileXYToKey(t,r,o){return void 0===o&&(o=","),"".concat(t).concat(o).concat(r)},Qt={},$t={},te=function Between$1(t,r,o,a){return Math.atan2(a-r,o-t)},ee=function Normalize(t){return(t%=2*Math.PI)>=0?t:t+2*Math.PI},ie=2*Math.PI,ne={x:0,y:0},re=180/Math.PI,se=function RadToDeg$3(t){return t*re},oe=function ShortestBetween$1(t,r){var o=r-t;return 0===o?0:o-360*Math.floor((o- -180)/360)},ae=function GetGridPoints$2(t,r,o){if(t&&"number"!=typeof t){o=r;var a=this.chessToTileXYZ(t);t=a.x,r=a.y}return this.grid.getGridPoints(t,r,o)},he=function Linear$1(t,r,o){return(r-t)*o+t},le=function AreTileXYEqual(t,r){return t&&r&&t.x===r.x&&t.y===r.y},ue=function Contains$5(t,r,o){return t.radius>0&&r>=t.left&&r<=t.right&&o>=t.top&&o<=t.bottom&&(t.x-r)*(t.x-r)+(t.y-o)*(t.y-o)<=t.radius*t.radius},ce=function Contains$4(t,r,o){if(t.width<=0||t.height<=0)return!1;var a=(r-t.x)/t.width,h=(o-t.y)/t.height;return(a*=a)+(h*=h)<.25},de=function Contains$3(t,r,o){for(var a=!1,h=-1,d=t.points.length-1;++h<t.points.length;d=h){var T=t.points[h].x,S=t.points[h].y,A=t.points[d].x,P=t.points[d].y;(S<=o&&o<P||P<=o&&o<S)&&r<(A-T)*(o-S)/(P-S)+T&&(a=!a)}return a};function getProperty(t,r,o){var a=o?t[r]:Object.getOwnPropertyDescriptor(t,r);return!o&&a.value&&"object"===_typeof(a.value)&&(a=a.value),!(!a||!function hasGetterOrSetter(t){return!!t.get&&"function"==typeof t.get||!!t.set&&"function"==typeof t.set}(a))&&(void 0===a.enumerable&&(a.enumerable=!0),void 0===a.configurable&&(a.configurable=!0),a)}function hasNonConfigurable(t,r){var o=Object.getOwnPropertyDescriptor(t,r);return!!o&&(o.value&&"object"===_typeof(o.value)&&(o=o.value),!1===o.configurable)}function extend(t,r,o,a){for(var h in r)if(r.hasOwnProperty(h)){var d=getProperty(r,h,o);if(!1!==d){if(hasNonConfigurable((a||t).prototype,h)){if(Class.ignoreFinals)continue;throw new Error("cannot override final property '"+h+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,h,d)}else t.prototype[h]=r[h]}}function mixin(t,r){if(r){Array.isArray(r)||(r=[r]);for(var o=0;o<r.length;o++)extend(t,r[o].prototype||r[o])}}function Class(t){var r,o;if(t||(t={}),t.initialize){if("function"!=typeof t.initialize)throw new Error("initialize must be a function");r=t.initialize,delete t.initialize}else if(t.Extends){var a=t.Extends;r=function initialize(){a.apply(this,arguments)}}else r=function initialize(){};t.Extends?(r.prototype=Object.create(t.Extends.prototype),r.prototype.constructor=r,o=t.Extends,delete t.Extends):r.prototype.constructor=r;var h=null;return t.Mixins&&(h=t.Mixins,delete t.Mixins),mixin(r,h),extend(r,t,!0,o),r}Class.extend=extend,Class.mixin=mixin,Class.ignoreFinals=!1;var fe=function Contains$2(t,r,o){return!(t.width<=0||t.height<=0)&&(t.x<=r&&t.x+t.width>=r&&t.y<=o&&t.y+t.height>=o)},pe=function Perimeter(t){return 2*(t.width+t.height)},ge=new Class({initialize:function Point(t,r){void 0===t&&(t=0),void 0===r&&(r=t),this.x=t,this.y=r},setTo:function setTo(t,r){return void 0===t&&(t=0),void 0===r&&(r=t),this.x=t,this.y=r,this}}),ve=function GetPoint$1(t,r,o){if(void 0===o&&(o=new ge),r<=0||r>=1)return o.x=t.x,o.y=t.y,o;var a=pe(t)*r;return r>.5?(a-=t.width+t.height)<=t.width?(o.x=t.right-a,o.y=t.bottom):(o.x=t.x,o.y=t.bottom-(a-t.width)):a<=t.width?(o.x=t.x+a,o.y=t.y):(o.x=t.right,o.y=t.y+(a-t.width)),o},me=function GetPoints(t,r,o,a){void 0===a&&(a=[]),r||(r=function Length(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))}(t)/o);for(var h=t.x1,d=t.y1,T=t.x2,S=t.y2,A=0;A<r;A++){var P=A/r,O=h+(T-h)*P,D=d+(S-d)*P;a.push(new ge(O,D))}return a},ye=new Class({initialize:function Vector2(t,r){this.x=0,this.y=0,"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0):(void 0===r&&(r=t),this.x=t||0,this.y=r||0)},clone:function clone(){return new ye(this.x,this.y)},copy:function copy(t){return this.x=t.x||0,this.y=t.y||0,this},setFromObject:function setFromObject(t){return this.x=t.x||0,this.y=t.y||0,this},set:function set(t,r){return void 0===r&&(r=t),this.x=t,this.y=r,this},setTo:function setTo(t,r){return this.set(t,r)},setToPolar:function setToPolar(t,r){return null==r&&(r=1),this.x=Math.cos(t)*r,this.y=Math.sin(t)*r,this},equals:function equals(t){return this.x===t.x&&this.y===t.y},angle:function angle(){var angle=Math.atan2(this.y,this.x);return angle<0&&(angle+=2*Math.PI),angle},add:function add(t){return this.x+=t.x,this.y+=t.y,this},subtract:function subtract(t){return this.x-=t.x,this.y-=t.y,this},multiply:function multiply(t){return this.x*=t.x,this.y*=t.y,this},scale:function scale(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function divide(t){return this.x/=t.x,this.y/=t.y,this},negate:function negate(){return this.x=-this.x,this.y=-this.y,this},distance:function distance(t){var r=t.x-this.x,o=t.y-this.y;return Math.sqrt(r*r+o*o)},distanceSq:function distanceSq(t){var r=t.x-this.x,o=t.y-this.y;return r*r+o*o},length:function length(){var t=this.x,r=this.y;return Math.sqrt(t*t+r*r)},lengthSq:function lengthSq(){var t=this.x,r=this.y;return t*t+r*r},normalize:function normalize(){var t=this.x,r=this.y,o=t*t+r*r;return o>0&&(o=1/Math.sqrt(o),this.x=t*o,this.y=r*o),this},normalizeRightHand:function normalizeRightHand(){var t=this.x;return this.x=-1*this.y,this.y=t,this},dot:function dot(t){return this.x*t.x+this.y*t.y},cross:function cross(t){return this.x*t.y-this.y*t.x},lerp:function lerp(t,r){void 0===r&&(r=0);var o=this.x,a=this.y;return this.x=o+r*(t.x-o),this.y=a+r*(t.y-a),this},transformMat3:function transformMat3(t){var r=this.x,o=this.y,a=t.val;return this.x=a[0]*r+a[3]*o+a[6],this.y=a[1]*r+a[4]*o+a[7],this},transformMat4:function transformMat4(t){var r=this.x,o=this.y,a=t.val;return this.x=a[0]*r+a[4]*o+a[12],this.y=a[1]*r+a[5]*o+a[13],this},reset:function reset(){return this.x=0,this.y=0,this}});ye.ZERO=new ye,ye.RIGHT=new ye(1,0),ye.LEFT=new ye(-1,0),ye.UP=new ye(0,-1),ye.DOWN=new ye(0,1),ye.ONE=new ye(1,1);var xe,Te,be,we=new Class({initialize:function Line(t,r,o,a){void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),this.x1=t,this.y1=r,this.x2=o,this.y2=a},getPoint:function getPoint(t,r){return function GetPoint(t,r,o){return void 0===o&&(o=new ge),o.x=t.x1+(t.x2-t.x1)*r,o.y=t.y1+(t.y2-t.y1)*r,o}(this,t,r)},getPoints:function getPoints(t,r,o){return me(this,t,r,o)},getRandomPoint:function getRandomPoint(t){return function Random$1(t,r){void 0===r&&(r=new ge);var o=Math.random();return r.x=t.x1+o*(t.x2-t.x1),r.y=t.y1+o*(t.y2-t.y1),r}(this,t)},setTo:function setTo(t,r,o,a){return void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),this.x1=t,this.y1=r,this.x2=o,this.y2=a,this},getPointA:function getPointA(t){return void 0===t&&(t=new ye),t.set(this.x1,this.y1),t},getPointB:function getPointB(t){return void 0===t&&(t=new ye),t.set(this.x2,this.y2),t},left:{get:function get(){return Math.min(this.x1,this.x2)},set:function set(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function get(){return Math.max(this.x1,this.x2)},set:function set(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function get(){return Math.min(this.y1,this.y2)},set:function set(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function get(){return Math.max(this.y1,this.y2)},set:function set(t){this.y1>this.y2?this.y1=t:this.y2=t}}}),Se=new Class({initialize:function Rectangle(t,r,o,a){void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),this.x=t,this.y=r,this.width=o,this.height=a},contains:function contains(t,r){return fe(this,t,r)},getPoint:function getPoint(t,r){return ve(this,t,r)},getPoints:function getPoints(t,r,o){return function GetPoints$1(t,r,o,a){void 0===a&&(a=[]),r||(r=pe(t)/o);for(var h=0;h<r;h++){var d=h/r;a.push(ve(t,d))}return a}(this,t,r,o)},getRandomPoint:function getRandomPoint(t){return function Random(t,r){return void 0===r&&(r=new ge),r.x=t.x+Math.random()*t.width,r.y=t.y+Math.random()*t.height,r}(this,t)},setTo:function setTo(t,r,o,a){return this.x=t,this.y=r,this.width=o,this.height=a,this},setEmpty:function setEmpty(){return this.setTo(0,0,0,0)},setPosition:function setPosition(t,r){return void 0===r&&(r=t),this.x=t,this.y=r,this},setSize:function setSize(t,r){return void 0===r&&(r=t),this.width=t,this.height=r,this},isEmpty:function isEmpty(){return this.width<=0||this.height<=0},getLineA:function getLineA(t){return void 0===t&&(t=new we),t.setTo(this.x,this.y,this.right,this.y),t},getLineB:function getLineB(t){return void 0===t&&(t=new we),t.setTo(this.right,this.y,this.right,this.bottom),t},getLineC:function getLineC(t){return void 0===t&&(t=new we),t.setTo(this.right,this.bottom,this.x,this.bottom),t},getLineD:function getLineD(t){return void 0===t&&(t=new we),t.setTo(this.x,this.bottom,this.x,this.y),t},left:{get:function get(){return this.x},set:function set(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}},right:{get:function get(){return this.x+this.width},set:function set(t){t<=this.x?this.width=0:this.width=t-this.x}},top:{get:function get(){return this.y},set:function set(t){t>=this.bottom?this.height=0:this.height=this.bottom-t,this.y=t}},bottom:{get:function get(){return this.y+this.height},set:function set(t){t<=this.y?this.height=0:this.height=t-this.y}},centerX:{get:function get(){return this.x+this.width/2},set:function set(t){this.x=t-this.width/2}},centerY:{get:function get(){return this.y+this.height/2},set:function set(t){this.y=t-this.height/2}}}),Ce=function Contains$1(t,r,o){var a=t.x3-t.x1,h=t.y3-t.y1,d=t.x2-t.x1,T=t.y2-t.y1,S=r-t.x1,A=o-t.y1,P=a*a+h*h,O=a*d+h*T,D=a*S+h*A,L=d*d+T*T,I=d*S+T*A,B=P*L-O*O,N=0===B?0:1/B,G=(L*D-O*I)*N,Y=(P*I-O*D)*N;return G>=0&&Y>=0&&G+Y<1},Ae=function Clamp$1(t,r,o){return Math.max(r,Math.min(o,t))},Ee=function AddChess$1(t,r,o,a,h){if(!this.contains(r,o))return this;void 0===h&&(h=!0);var d=this.chessToTileXYZ(t);if(void 0===a&&(a=d?d.z:0),d&&d.x===r&&d.y===o&&d.z===a)return this;var T=this.tileXYZToChess(r,o,a);return T&&this.emit("kickout",t,T,d),this.removeChess(t),T&&this.removeChess(T,r,o,a),this.boardData.addUID(this.getChessUID(t),r,o,a),this.isBoard&&this.getChessData(t).setBoard(this),h&&this.gridAlign(t,r,o),this},Me={x:0,y:0},_e=function Wrap(t,r,o){var a=o-r;return r+((t-r)%a+a)%a},Pe={},Re={},ke={},Oe={},De=function Between(t,r){return Math.floor(Math.random()*(r-t+1)+t)},Le=function GetRandom(t,r,o){void 0===r&&(r=0),void 0===o&&(o=t.length);var a=r+Math.floor(Math.random()*o);return void 0===t[a]?null:t[a]},Ie=[],Fe={},Be=[],Ne=[],Ge=[],Ye=[],Xe=function isEdgeBlocker(t,r){return!1===t||!0===t?t:!0===t[r]},Ue=[],ze=function GetBoard(t){return t?t.rexChess?t.rexChess.board:t.mainBoard?t.mainBoard:void 0:void 0},Ve=(r={getChessData:qt,getChessUID:Kt,setBoardWidth:function SetBoardWidth(t){if(this.infinityMode)return this;if(void 0===this.width||this.width<=t)return this.width=t,this;var r,o,a;for(r=t;r<this.width;r++)for(o=0;o<this.height;o++)for(a in this.boardData.getUID(r,o))this.RemoveChess(!1,r,o,a);return this.width=t,this},setBoardHeight:function SetBoardHeight(t){if(this.infinityMode)return this;if(void 0===this.height||this.height<=t)return this.height=t,this;var r,o,a;for(o=t;o<this.height;o++)for(r=0;r<this.width;r++)for(a in this.boardData.getUID(r,o))this.RemoveChess(!1,r,o,a);return this.height=t,this},tileXYZToKey:function TileXYZToKey(t,r,o,a){return void 0===a&&(a=","),"".concat(t).concat(a).concat(r).concat(a).concat(o)},tileXYToKey:Jt,keyToTileXYZ:function KeyToTileXYZ(t,r,o){void 0===r?r={}:!0===r&&(r=Qt),void 0===o&&(o=",");var a=t.split(o);return r.x=a[0],r.y=a[1],r.z=a[2],r},tileXYToWorldX:function TileXYToWorldX(t,r){return this.tileXYToWorldXY(t,r,!0).x},tileXYToWorldY:function TileXYToWorldY(t,r){return this.tileXYToWorldXY(t,r,!0).y},tileXYToWorldXY:function TileXYToWorldXY(t,r,o){return this.grid.getWorldXY(t,r,o)},tileXYArrayToWorldXYArray:function TileXYArrayToWorldXYArray(t,r){var o;void 0===r&&(r=[]);for(var a=0,h=t.length;a<h;a++)o=t[a],r.push(this.tileXYToWorldXY(o.x,o.y));return r},worldXYToTileX:function WorldXYToTileX(t,r){return this.worldXYToTileXY(t,r,!0).x},worldXYToTileY:function WorldXYToTileY(t,r){return this.worldXYToTileXY(t,r,!0).y},worldXYToTileXY:function WorldXYToTileXY(t,r,o){return this.grid.getTileXY(t,r,o)},worldXYToChessArray:function WorldXYToChessArray(t,r,o){var a=this.worldXYToTileXY(t,r,!0);return this.tileXYToChessArray(a.x,a.y,o)},worldXYToChess:function WorldXYToChess(t,r,o){var a=this.worldXYToTileXY(t,r,!0);if(void 0!==o)return this.tileXYZToChess(a.x,a.y,o);var h=this.boardData.getUID(a.x,a.y);if(null==h)return null;for(var o in h)return this.uidToChess(h[o])},worldXYSnapToGrid:function WorldXYSnapToGrid(t,r,o){return void 0===o?o={}:!0===o&&(o=$t),this.worldXYToTileXY(t,r,o),this.tileXYToWorldXY(o.x,o.y,o),o},angleBetween:function AngleBetween$4(t,r){t=this.chessToTileXYZ(t),r=this.chessToTileXYZ(r);var o=this.tileXYToWorldXY(t.x,t.y,!0),a=o.x,h=o.y,d=(o=this.tileXYToWorldXY(r.x,r.y,!0)).x,T=o.y;return te(a,h,d,T)},isAngleInCone:function IsAngleInCone(t,r,o,a){var h=this.chessToTileXYZ(t),d=this.chessToTileXYZ(r),T=this.angleBetween(h,d);T=ee(T);var S=Math.abs(T-o),A=a/2;return function Equal(t,r,o){return void 0===o&&(o=1e-4),Math.abs(t-r)<o}(S=Math.min(S,ie-S),A)||S<A},angleToward:function AngleToward(t,r){void 0===t&&(t=ne);var o=this.wrapMode,a=this.infinityMode;this.wrapMode=!1,this.infinityMode=!0;var h=this.getNeighborTileXY(t,r,!0);return this.wrapMode=o,this.infinityMode=a,this.angleBetween(t,h)},angleSnapToDirection:function AngleSnapToDirection(t,r){r=se(r);for(var o,a,h=this.grid.allDirections,d=1/0,T=void 0,S=0,A=h.length;S<A;S++)o=se(this.angleToward(t,h[S])),(a=Math.abs(oe(r,o)))<d&&(d=a,T=S);return T},isOverlappingPoint:function IsOverlappingPoint(t,r,o){if(this.infinityMode&&void 0===o)return!0;var a=this.worldXYToTileXY(t,r,!0);return this.contains(a.x,a.y,o)},gridAlign:function GridAlign(t,r,o){if(void 0===t)for(var a=this.getAllChess(),h=0,d=a.length;h<d;h++)this.gridAlign(a[h]);else{if(jt(t)&&(t=this.uidToChess(t)),void 0===r){var T=this.chessToTileXYZ(t);r=T.x,o=T.y}this.tileXYToWorldXY(r,o,t)}return this},getGridPoints:ae,lineToTileXYArray:function LineToTileXYArray(t,r,o,a,h){if("number"!=typeof t){var d=t;h=r,t=d.x1,r=d.y1,o=d.x2,a=d.y2}void 0===h&&(h=[]);for(var T,S,A,P,O,D=function DistanceBetween$4(t,r,o,a){var h=t-o,d=r-a;return Math.sqrt(h*h+d*d)}(t,r,o,a),L=Math.min(this.grid.cellWidth,this.grid.cellHeight),I=Math.ceil(D/(L/4)),B=0;B<=I;B++)S=he(t,o,T=B/I),A=he(r,a,T),O=this.worldXYToTileXY(S,A),this.contains(O.x,O.y)&&(P&&le(P,O)||(h.push(O),P=O));return h},circleToTileXYArray:function CircleToTileXYArray(t,r){return this.shapeToTileXYArray(t,ue,r)},ellipseToTileXYArray:function EllipseToTileXYArray(t,r){return this.shapeToTileXYArray(t,ce,r)},polygonToTileXYArray:function PolygonToTileXYArray(t,r){return xe=function GetAABB(t,r){void 0===r&&(r=new Se);for(var o,a=1/0,h=1/0,d=-a,T=-h,S=0;S<t.points.length;S++)o=t.points[S],a=Math.min(a,o.x),h=Math.min(h,o.y),d=Math.max(d,o.x),T=Math.max(T,o.y);return r.x=a,r.y=h,r.width=d-a,r.height=T-h,r}(t,xe),this.shapeToTileXYArray(t,de,xe,r)},rectangleToTileXYArray:function RectangleToTileXYArray(t,r){return this.shapeToTileXYArray(t,fe,r)},triangleToTileXYArray:function TriangleToTileXYArray(t,r){return this.shapeToTileXYArray(t,Ce,r)},shapeToTileXYArray:function ShapeToTileXYArray(t,r,o){void 0===o&&(o=[]),Te=this.worldXYToTileXY(t.left,t.top,Te),be=this.worldXYToTileXY(t.right,t.bottom,be);var a,h=Te.x-1,d=Te.y-1,T=be.x+1,S=be.y+1;this.infinityMode||(h=Ae(h,0,this.width-1),d=Ae(d,0,this.height-1),T=Ae(T,0,this.width-1),S=Ae(S,0,this.height-1));for(var A=h;A<=T;A++)for(var P=d;P<=S;P++)r(t,(a=this.tileXYToWorldXY(A,P,!0)).x,a.y)&&o.push({x:A,y:P});return o},uidToChess:function UidToChess(t){return null==t?null:this.boardData.exists(t)?It.get(t).parent:null},addChess:Ee,removeChess:function RemoveChess$1(t,r,o,a,h,d){if(void 0===h&&(h=!1),void 0===d&&(d=!1),t){var T=this.chessToTileXYZ(t);if(!T)return this;r=T.x,o=T.y,a=T.z}else if(!(t=this.tileXYZToChess(r,o,a)))return this;return d||this.boardData.removeUID(r,o,a),this.isBoard&&this.getChessData(t).setBoard(null),h&&t.destroy&&t.destroy(),this},removeAllChess:function RemoveAllChess$1(t,r){for(var o=this.getAllChess(),a=0,h=o.length;a<h;a++)this.removeChess(o[a],void 0,void 0,void 0,t,r);return this},swapChess:function SwapChess(t,r,o){void 0===o&&(o=!0);var a=this.chessToTileXYZ(t),h=this.chessToTileXYZ(r);return null==a||null==h||(this.removeChess(t),this.removeChess(r),this.addChess(t,h.x,h.y,h.z,o),this.addChess(r,a.x,a.y,a.z,o)),this},moveChess:Ee,setChessTileZ:function SetChessTileZ(t,r,o){void 0===o&&(o=!1);var a=this.chessToTileXYZ(t);return a&&this.moveChess(t,a.x,a.y,r,o),this},getAllChess:function GetAllChess(t){void 0===t&&(t=[]);var r=this.boardData.UIDToXYZ;for(var o in r)t.push(this.uidToChess(o));return t},contains:function Contains(t,r,o){var a;return(a=!!this.infinityMode||t>=0&&t<this.width&&r>=0&&r<this.height)&&void 0!==o&&(a=this.boardData.contains(t,r,o)),a},forEachTileXY:function ForEachTileXY(t,r,o){switch(void 0===o&&(o=0),o){case 0:for(var a=0;a<this.height;a++)for(var h=0;h<this.width&&(Me.x=h,Me.y=a,!(r?t.call(r,Me,this):t(Me,this)));h++);break;case 1:for(a=0;a<this.height;a++)for(h=this.width-1;h>=0&&(Me.x=h,Me.y=a,!(r?t.call(r,Me,this):t(Me,this)));h--);break;case 2:for(h=0;h<this.width;h++)for(a=0;a<this.height&&(Me.x=h,Me.y=a,!(r?t.call(r,Me,this):t(Me,this)));a++);break;case 3:for(h=0;h<this.width;h++)for(a=this.height-1;a>=0&&(Me.x=h,Me.y=a,!(r?t.call(r,Me,this):t(Me,this)));a--);}return this},getWrapTileXY:function GetWrapTileXY(t,r,o){return void 0===o?o={}:!0===o&&(o=Pe),this.wrapMode?t=_e(t,0,this.width):!this.infinityMode&&(t<0||t>=this.width)&&(t=null),this.wrapMode?r=_e(r,0,this.height):!this.infinityMode&&(r<0||r>=this.height)&&(r=null),o.x=t,o.y=r,o},tileXYZToChess:function TileXYZToChess(t,r,o){var a=this.boardData.getUID(t,r,o);return this.uidToChess(a)},tileXYToChessArray:function TileXYToChessArray(t,r,o){void 0===o&&(o=[]);var a=this.boardData.getUID(t,r);if(null==a)return o;for(var h in a)o.push(this.uidToChess(a[h]));return o},tileZToChessArray:function TileZToChessArray(t,r){void 0===r&&(r=[]);var o=this.boardData.UIDToXYZ;for(var a in o)o[a].z===t&&r.push(this.uidToChess(a));return r},tileXYArrayToChessArray:function TileXYArrayToChessArray(t,r,o){Array.isArray(r)&&(o=r,r=void 0),void 0===o&&(o=[]);for(var a,h=null!=r,d=0,T=t.length;d<T;d++)a=t[d],h?o.push(this.tileXYZToChess(a.x,a.y,r)):this.tileXYToChessArray(a.x,a.y,o);return o},chessToTileXYZ:function ChessToTileXYZ(t){if(!t)return null;if(jt(t)||function IsChess(t){return!jt(t)&&t&&!!t.rexChess}(t)){var r=Kt(t);return this.boardData.getXYZ(r)}return function IsTileXYZ(t){return t&&(zt(t)||t.isTileXYZ)}(t)?t:null},offset:function Offset$3(t,r,o,a){return void 0===a?a={}:!0===a&&(a=Re),0===r&&0===o?(a.x=t.x,a.y=t.y):this.grid.offset(t,r,o,a),a},mirror:function Mirror$4(t,r,o,a){return void 0===a?a={}:!0===a&&(a=ke),void 0!==o?this.offset(t,-o.x,-o.y,a):(a.x=t.x,a.y=t.y),this.grid.mirror(a,r,a),void 0!==o&&this.offset(a,o.x,o.y,a),a},rotate:function Rotate$5(t,r,o,a){return void 0===a?a={}:!0===a&&(a=Oe),void 0!==o?this.offset(t,-o.x,-o.y,a):(a.x=t.x,a.y=t.y),this.grid.rotate(a,r,a),void 0!==o&&this.offset(a,o.x,o.y,a),a},getOppositeDirection:function GetOppositeDirection$2(t,r,o){if(t&&"number"!=typeof t){o=r;var a=t,h=this.chessToTileXYZ(a);t=h.x,r=h.y}return this.grid.getOppositeDirection(t,r,o)},getDistance:function GetDistance$2(t,r,o){return t=this.chessToTileXYZ(t),r=this.chessToTileXYZ(r),this.grid.getDistance(t,r,o)},directionBetween:function DirectionBetween$2(t,r,o){void 0===o&&(o=!0);var a=this.chessToTileXYZ(t),h=this.chessToTileXYZ(r);return this.grid.directionBetween(a,h,o)},isDirectionInCone:function IsDirectionInCone(t,r,o,a){var h=this.chessToTileXYZ(t),d=this.chessToTileXYZ(r),T=this.grid.directions;this.grid.setDirectionMode(this.sides);var S=this.grid.directionBetween(h,d,!1);this.grid.setDirectionMode(T);var A=Math.abs(S-o);return(A=Math.min(A,this.grid.directions-A))<=a/2},fit:function Fit(t){var r,o=1/0,a=1/0;for(var h in t)r=t[h],o=Math.min(o,r.x),a=Math.min(a,r.y);if(0!==o||0!==a)for(var h in t)r=t[h],this.offset(r,-o,-a,r);var d=-1/0,T=-1/0;for(var h in t)r=t[h],d=Math.max(d,r.x),T=Math.max(T,r.y);return this.setBoardWidth(d+1),this.setBoardHeight(T+1),t},getEmptyTileXYArray:function GetEmptyTileXYArray(t,r){void 0===r&&(r=[]),void 0===t&&(t=0);for(var o=0;o<this.height;o++)for(var a=0;a<this.width;a++)null===this.tileXYZToChess(a,o,t)&&r.push({x:a,y:o});return r},getRandomEmptyTileXY:function GetRandomEmptyTileXY(t,r){var o,a;void 0===t&&(t=0),void 0===r?r={}:!0===r&&(r=Fe);for(var h=!0,d=20;h&&d>0;)o=De(0,this.width-1),a=De(0,this.height-1),h=null!==this.tileXYZToChess(o,a,t),d--;if(h){if(0===(Ie=this.getEmptyTileXYArray(t,Ie)).length)return null;var T=Le(Ie);return r.x=T.x,r.y=T.y,Ie.length=0,r}return r.x=o,r.y=a,r},getTileXYAtDirection:function GetTileXYAtDirection(t,r,o,a){var h=this.chessToTileXYZ(t);if(!h)return null;"string"==typeof r&&(r=-1===r.indexOf(",")?parseInt(r):r.split(","));var d,T="number"==typeof r,S="number"==typeof o;if(T&&S)a=this.grid.getTileXYAtDirection(h.x,h.y,r,o,a),this.getWrapTileXY(a.x,a.y,a),null!=a.x&&null!=a.y||(a=null);else if(void 0===a&&(a=[]),null==r&&(r=this.grid.allDirections),T)if(zt(o)){var A=Dt(o,"end",1),P=Dt(o,"start",A>0?1:-1),O=Dt(o,"step",A>=P?1:-1);if(P===A)null!==(d=this.getTileXYAtDirection(h,r,A))&&a.push(d);else if(P<A)for(var D=P;D<=A;D+=O)null!==(d=this.getTileXYAtDirection(h,r,D))&&a.push(d);else for(D=P;D>=A;D+=O)null!==(d=this.getTileXYAtDirection(h,r,D))&&a.push(d)}else{D=0;for(var L=o.length;D<L;D++)null!==(d=this.getTileXYAtDirection(h,r,o[D]))&&a.push(d)}else for(D=0,L=r.length;D<L;D++)S?null!==(d=this.getTileXYAtDirection(h,r[D],o))&&a.push(d):this.getTileXYAtDirection(h,r[D],o,a);return a},getNeighborTileXY:function GetNeighborTileXY$2(t,r,o){return this.getTileXYAtDirection(t,r,1,o)},getNeighborTileXYAtAngle:function GetNeighborTileXYAtAngle(t,r,o){var a=this.angleSnapToDirection(t,r);return this.getTileXYAtDirection(t,a,1,o)},getNeighborChess:function GetNeighborChess(t,r,o,a){if(null===(t=this.chessToTileXYZ(t)))return null;null==o&&(o=t.z);var h,d=_typeof(r);if("number"===d||"string"===d&&-1===r.indexOf(",")){var T=r,S=this.getNeighborTileXY(t,T,!0);return null===S?null:this.tileXYZToChess(S.x,S.y,o)}void 0===a&&(a=[]),this.getNeighborTileXY(t,r,Be);for(var A=0,P=Be.length;A<P;A++)null!=(h=this.tileXYZToChess(Be[A].x,Be[A].y,o))&&a.push(h);return Be.length=0,a},getNeighborTileDirection:function GetNeighborTileDirection$2(t,r){if(null===t||null===r)return null;if(t=this.chessToTileXYZ(t),r=this.chessToTileXYZ(r),le(t,r))return null;var o=this.grid.getNeighborTileDirection(t,r);if(this.wrapMode&&null===o){for(var a=0,h=(Ne=this.getNeighborTileXY(t,null,Ne)).length;a<h;a++)if(le(r,Ne[a])){o=a;break}Ne.length=0}return o},getNeighborChessDirection:function GetNeighborChessDirection(t,r){var o=this.chessToTileXYZ(t),a=this.chessToTileXYZ(r);return this.getNeighborTileDirection(o,a)},areNeighbors:function AreNeighbors(t,r){return null!==this.getNeighborChessDirection(t,r)},ringToTileXYArray:function RingToTileXYArray$2(t,r,o){var a;void 0===o&&(o=[]),t=this.chessToTileXYZ(t),this.grid.ringToTileXYArray(t,r,Ge);for(var h=0,d=Ge.length;h<d;h++)a=Ge[h],this.contains(a.x,a.y)&&o.push(a);return Ge.length=0,o},filledRingToTileXYArray:function FilledRingToTileXYArray(t,r,a,h){var d;o(a)&&(h=a,a=void 0),void 0===a&&(a=!0),void 0===h&&(h=[]),t=this.chessToTileXYZ(t);for(var T=0;T<=r;T++)d=a?T:r-T,this.ringToTileXYArray(t,d,h);return h},hasBlocker:function HasBlocker(t,r,o){if(t&&"number"!=typeof t){var a=this.chessToTileXYZ(t);t=a.x,r=a.y,o=a.z}var h;if(void 0===o){for(var d=0,T=(h=this.tileXYToChessArray(t,r,Ye)).length;d<T;d++)if(!0===this.getChessData(h[d]).blocker)return Ye.length=0,!0;return Ye.length=0,!1}return null!==(h=this.tileXYZToChess(t,r,o))&&!0===this.getChessData(h).blocker},hasEdgeBlocker:function HasEdgeBlocker(t,r,o,a){var h;if(void 0===o){for(var d=0,T=(h=this.tileXYToChessArray(t,r,Ue)).length;d<T;d++)if(Xe(this.getChessData(h[d]).blocker))return Ue.length=0,!0;return Ue.length=0,!1}return null!==(h=this.tileXYZToChess(t,r,o))&&Xe(this.getChessData(h).blocker)}},_defineProperty(r,"getGridPoints",ae),_defineProperty(r,"chessToBoard",ze),r),We=function Clear(t){if("object"!==_typeof(t)||null===t)return t;if(Array.isArray(t))t.length=0;else for(var r in t)delete t[r];return t},He=function IsEmpty(t){for(var r in t)return!1;return!0},je=function(){function BoardData(){_classCallCheck(this,BoardData),this.XYZToUID={},this.UIDToXYZ={},this.clear()}return _createClass(BoardData,[{key:"shutdown",value:function shutdown(t){return this.XYZToUID=void 0,this.UIDToXYZ=void 0,this}},{key:"destroy",value:function destroy(t){return this.shutdown(t),this}},{key:"clear",value:function clear(){return We(this.UIDToXYZ),We(this.XYZToUID),this.chessCount=0,this.clearBounds(),this}},{key:"clearBounds",value:function clearBounds(){return this._xMax=void 0,this._xMin=void 0,this._yMax=void 0,this._yMin=void 0,this}},{key:"addUID",value:function addUID(t,r,o,a){this.XYZToUID.hasOwnProperty(r)||(this.XYZToUID[r]={});var h=this.XYZToUID[r];return h.hasOwnProperty(o)||(h[o]={}),h[o][a]=t,this.UIDToXYZ[t]={x:r,y:o,z:a},this.chessCount++,this.clearBounds(),this}},{key:"getUID",value:function getUID(t,r,o){var a=this.XYZToUID[t];return a&&(a=a[r])&&void 0!==o&&(a=a[o]),a}},{key:"removeUID",value:function removeUID(t,r,o){if(!this.XYZToUID.hasOwnProperty(t))return this;var a=this.XYZToUID[t];if(!a.hasOwnProperty(r))return this;var h=a[r];if(!h.hasOwnProperty(o))return this;var d=h[o];return delete h[o],delete this.UIDToXYZ[d],He(h)&&delete a[r],He(a)&&delete this.XYZToUID[t],this.chessCount--,this.clearBounds(),this}},{key:"exists",value:function exists(t){return this.UIDToXYZ.hasOwnProperty(t)}},{key:"contains",value:function contains(t,r,o){return null!=this.getUID(t,r,o)}},{key:"getXYZ",value:function getXYZ(t){return this.exists(t)?this.UIDToXYZ[t]:null}},{key:"xMax",get:function get(){if(void 0===this._xMax){this._xMax=-1/0;var t,r=this.UIDToXYZ;for(var o in r)t=r[o].x,this._xMax<t&&(this._xMax=t)}return this._xMax}},{key:"xMin",get:function get(){if(void 0===this._xMin){this._xMin=1/0;var t,r=this.UIDToXYZ;for(var o in r)t=r[o].x,this._xMin>t&&(this._xMin=t)}return this._xMin}},{key:"yMax",get:function get(){if(void 0===this._yMax){this._yMax=-1/0;var t,r=this.UIDToXYZ;for(var o in r)t=r[o].y,this._yMax<t&&(this._yMax=t)}return this._yMax}},{key:"yMin",get:function get(){if(void 0===this._yMin){this._yMin=1/0;var t,r=this.UIDToXYZ;for(var o in r)t=r[o].y,this._yMin>t&&(this._yMin=t)}return this._yMin}}]),BoardData}(),qe={},Ze={},Ke=function(){function Quad(t){_classCallCheck(this,Quad),this.resetFromJSON(t)}return _createClass(Quad,[{key:"resetFromJSON",value:function resetFromJSON(t){this.setType(Dt(t,"type",0)),this.setDirectionMode(Dt(t,"dir",4)),this.setOriginPosition(Dt(t,"x",0),Dt(t,"y",0)),this.setCellSize(Dt(t,"cellWidth",0),Dt(t,"cellHeight",0))}},{key:"setType",value:function setType(t){return"string"==typeof t&&(t=Qe[t]),this.mode=t,this}},{key:"setDirectionMode",value:function setDirectionMode(t){return"string"==typeof t&&(t=$e[t]),this.directions=t,this}},{key:"setOriginPosition",value:function setOriginPosition(t,r){return this.x=t,this.y=r,this}},{key:"width",get:function get(){return this._width},set:function set(t){this._width=t,this._halfWidth=t/2}},{key:"height",get:function get(){return this._height},set:function set(t){this._height=t,this._halfHeight=t/2}},{key:"setCellSize",value:function setCellSize(t,r){return this.width=t,this.height=r,this}},{key:"cellWidth",get:function get(){return this.width},set:function set(t){this.width=t}},{key:"cellHeight",get:function get(){return this.height},set:function set(t){this.height=t}}]),Quad}(),Je={getWorldXY:function GetWorldX$2(t,r,o){var a,h;switch(void 0===o?o={}:!0===o&&(o=qe),this.mode){case 0:a=t*this.width,h=r*this.height;break;case 1:a=(t-r)*this._halfWidth,h=(t+r)*this._halfHeight}return a+=this.x,h+=this.y,o.x=a,o.y=h,o},getWorldX:function GetWorldX$1(t,r){return this.getWorldXY(t,r,!0).x},getWorldY:function GetWorldY$1(t,r){return this.getWorldXY(t,r,!0).y},getTileXY:function GetTileXY$1(t,r,o){void 0===o?o={}:!0===o&&(o=Ze),t-=this.x,r-=this.y;var a=t/this.width,h=r/this.height;switch(this.mode){case 0:o.x=Math.round(a),o.y=Math.round(h);break;case 1:o.x=Math.round(+a+h),o.y=Math.round(-a+h)}return o},getTileX:function GetTileX$1(t,r){return this.getTileXY(t,r,!0).x},getTileY:function GetTileY$1(t,r){return this.getTileXY(t,r,!0).y}};Object.assign(Ke.prototype,Je);var Qe={orthogonal:0,isometric:1,staggered:2},$e={"4dir":4,"8dir":8},ti=function SaveOrigin(){return this._savedOriginX=this.x,this._savedOriginY=this.y,this},ei=function RestoreOrigin(){return this.x=this._savedOriginX,this.y=this._savedOriginY,this},ii=[[1,0],[0,1],[-1,0],[0,-1],[1,1],[-1,1],[-1,-1],[1,-1]],ni=ii,ri=function GetTileXAtDirection$1(t,r,o,a,h){var d,T;switch(void 0===h?h={}:!0===h&&(h=si),this.mode){case 0:d=ii[o][0],T=ii[o][1];break;case 1:d=ni[o][0],T=ni[o][1]}return 1===a?(h.x=t+d,h.y=r+T):(h.x=t+a*d,h.y=r+a*T),h},si={},oi=function ReverseDirMap$1(t){var r,o,a,h={};for(var d in t)o=(r=t[d])[0],a=r[1],h.hasOwnProperty(o)||(h[o]={}),h[o][a]=parseInt(d);return h}(ii),ai=oi,hi={0:2,1:3,2:0,3:1,4:6,5:7,6:4,7:5},li=function Offset$2(t,r,o,a){void 0===a?a={}:!0===a&&(a=ui);var h=t.x+r,d=t.y+o;return a.x=h,a.y=d,a},ui={},ci={},di={},fi=function DirectionNormalize(t){return _e(t,0,this.directions)},pi=function InitPoints(t){for(var r=[],o=0;o<t;o++)r.push({x:0,y:0});return r},gi={},vi=pi(4),mi=function(t){_inherits(QuadGrid,t);var r=_createSuper(QuadGrid);function QuadGrid(t){var o;return _classCallCheck(this,QuadGrid),(o=r.call(this,t)).sides=4,o}return _createClass(QuadGrid,[{key:"allDirections",get:function get(){return 4===this.directions?yi:xi}},{key:"halfDirections",get:function get(){return 4===this.directions?Ti:bi}}]),QuadGrid}(Ke),yi=[0,1,2,3],xi=[0,1,2,3,4,5,6,7],Ti=[0,1],bi=[0,1,4,5],wi={saveOrigin:ti,restoreOrigin:ei,getTileXYAtDirection:ri,getNeighborTileXY:function GetNeighborTileXY$1(t,r,o,a){return ri.call(this,t,r,o,1,a)},getNeighborTileDirection:function GetNeighborTileDirection$1(t,r){var o;switch(this.mode){case 0:o=oi;break;case 1:o=ai}var a=r.x-t.x,h=r.y-t.y;if(o.hasOwnProperty(a)){var d=o[a];if(d.hasOwnProperty(h))return d[h]}return null},getOppositeDirection:function GetOppositeDirection$1(t,r,o){return hi[o]},offset:li,mirror:function Mirror$3(t,r,o){return void 0===o?o={}:!0===o&&(o=ci),o.x=1&r?-t.x:t.x,o.y=2&r?-t.y:t.y,o},rotate:function Rotate$4(t,r,o){var a,h;switch(void 0===o?o={}:!0===o&&(o=di),r=_e(r,0,3)){case 1:a=-t.y,h=t.x;break;case 2:a=-t.x,h=-t.y;break;case 3:a=t.y,h=-t.x;break;default:a=t.x,h=t.y}return o.x=a,o.y=h,o},getDistance:function GetDistance$1(t,r,o){var a=r.x-t.x,h=r.y-t.y;return o?Math.abs(a)+Math.abs(h):Math.sqrt(a*a+h*h)},directionBetween:function DirectionBetween$1(t,r,o){var a;switch(void 0===o&&(o=!0),this.mode){case 0:case 1:if(t.y===r.y)a=r.x>=t.x?0:2;else if(t.x===r.x)a=r.y>=t.y?1:3;else if(4===this.directions){(T=se(te(t.x,t.y,r.x,r.y)))<0&&(T+=360),a=T/90,o&&(a=Math.round(a))}else{var h=r.x-t.x,d=r.y-t.y;if(h===d)a=h>0?4:6;else if(h===-d)a=h>0?7:5;else{var T;(T=se(Math.atan2(d,h)))<0&&(T+=360);var S=T/45;o&&(S=Math.round(S)),a=S>=0&&S<1?S:S>=1&&S<2?S+3:S>=2&&S<3?S-1:S>=3&&S<4?S+2:S>=4&&S<5?S-2:S>=5&&S<6?S+1:S>=6&&S<7?S-3:S}}}return a===this.directions&&(a=0),a},directionNormalize:fi,getGridPoints:function GetGridPoints$1(t,r,o){void 0===o?o=pi(4):!0===o&&(o=vi),void 0===t?(gi.x=0,gi.y=0):this.getWorldXY(t,r,gi);var a=0===this.mode?0:1;return function SetPoints$1(t,r,o,a,h,d){void 0===d&&(d=pi(4));var T=o/2,S=a/2;0===h?(d[0].x=t+T,d[0].y=r-S,d[1].x=t+T,d[1].y=r+S,d[2].x=t-T,d[2].y=r+S,d[3].x=t-T,d[3].y=r-S):(d[0].x=t+T,d[0].y=r,d[1].x=t,d[1].y=r+S,d[2].x=t-T,d[2].y=r,d[3].x=t,d[3].y=r-S)}(gi.x,gi.y,this.width,this.height,a,o),o},ringToTileXYArray:function RingToTileXYArray$1(t,r,o){var a,h;for(void 0===o&&(o=[]),a=r,h=-r;h<=r;h++)o.push(li(t,a,h));for(h=r,a=r-1;a>=-r;a--)o.push(li(t,a,h));for(a=-r,h=r-1;h>=-r;h--)o.push(li(t,a,h));for(h=-r,a=1-r;a<=r-1;a++)o.push(li(t,a,h));return o}};Object.assign(mi.prototype,wi);var Si=Math.sqrt(3),Ci=Math.sqrt(3),Ai=0,Ei=1,Mi=2,_i=3,Pi=Ai,Ri=Ei,ki=Mi,Oi=_i,Di={},Li=Ai,Ii=Ei,Fi=Mi,Bi=_i,Ni=function cr2cube(t,r,o,a){switch(void 0===a?a={}:!0===a&&(a=Yi),t){case Li:a.x=r-(o-(1&o))/2,a.z=o;break;case Ii:a.x=r-(o+(1&o))/2,a.z=o;break;case Fi:a.x=r,a.z=o-(r-(1&r))/2;break;case Bi:a.x=r,a.z=o-(r+(1&r))/2}return a.y=-a.x-a.z,a},Gi=function cube2cr(t,r,o,a,h){switch(void 0===h?h={}:!0===h&&(h=Xi),t){case Li:h.x=r+(a-(1&a))/2,h.y=a;break;case Ii:h.x=r+(a+(1&a))/2,h.y=a;break;case Fi:h.x=r,h.y=a+(r-(1&r))/2;break;case Bi:h.x=r,h.y=a+(r+(1&r))/2}return h},Yi={},Xi={},Ui=Ai,zi=Ei,Vi=Mi,Wi=_i,Hi=4/3,ji=2/3,qi={},Zi={},Ki=Ai,Ji=Ei,Qi=Mi,$i=_i,tn=function(){function Hexagon(t){_classCallCheck(this,Hexagon),this.resetFromJSON(t)}return _createClass(Hexagon,[{key:"resetFromJSON",value:function resetFromJSON(t){this.setType(Dt(t,"staggeraxis",1),Dt(t,"staggerindex",1)),this.setDirectionMode(),this.setOriginPosition(Dt(t,"x",0),Dt(t,"y",0));var r=Dt(t,"size",void 0);void 0!==r?this.setCellRadius(r):this.setCellSize(Dt(t,"cellWidth",0),Dt(t,"cellHeight",0))}},{key:"setType",value:function setType(t,r){return"string"==typeof t&&(t=nn[t]),"string"==typeof r&&(r=rn[r]),this.staggeraxis=t,this.staggerindex=r,this.mode=0===t?0===r?$i:Qi:0===r?Ji:Ki,this}},{key:"setDirectionMode",value:function setDirectionMode(){return this.directions=6,this}},{key:"setOriginPosition",value:function setOriginPosition(t,r){return this.x=t,this.y=r,this}},{key:"width",get:function get(){return this._width},set:function set(t){this._width=t,this._halfWidth=t/2}},{key:"height",get:function get(){return this._height},set:function set(t){this._height=t,this._halfHeight=t/2}},{key:"setCellSize",value:function setCellSize(t,r){return this.width=t,this.height=r,this}},{key:"setCellRadius",value:function setCellRadius(t){this.size=t;var r={size:this.size,type:this.staggeraxis},o=function Width(t){return 0===t.type?2*t.size:Si*t.size}(r),a=function Height(t){return 0===t.type?Ci*t.size:2*t.size}(r);return this.setCellSize(o,a),this}},{key:"cellWidth",get:function get(){return this.width},set:function set(t){this.width=t}},{key:"cellHeight",get:function get(){return this.height},set:function set(t){this.height=t}}]),Hexagon}(),en={getWorldXY:function GetWorldXY(t,r,o){void 0===o?o={}:!0===o&&(o=Di);var a=t*this.width,h=r*this.height;switch(this.mode){case Pi:1&r&&(a+=this._halfWidth),h*=.75;break;case Ri:1&r&&(a-=this._halfWidth),h*=.75;break;case ki:a*=.75,1&t&&(h+=this._halfHeight);break;case Oi:a*=.75,1&t&&(h-=this._halfHeight)}return a+=this.x,h+=this.y,o.x=a,o.y=h,o},getWorldX:function GetWorldX(t,r){return this.getWorldXY(t,r,!0).x},getWorldY:function GetWorldY(t,r){return this.getWorldXY(t,r,!0).y},getTileXY:function GetTileXY(t,r,o){var a,h;switch(void 0===o?o={}:!0===o&&(o=Zi),t-=this.x,r-=this.y,this.mode){case Ui:case zi:h=r*Hi/this.height,a=t/this.width-ji*(r/this.height);break;case Vi:case Wi:h=r/this.height-ji*(t/this.width),a=t*Hi/this.width}var d=function qr2cube(t,r,o){return void 0===o?o={}:!0===o&&(o=Yi),o.x=t,o.y=-t-r,o.z=r,o}(a,h,qi);return function roundcube(t,r,o,a){"number"!=typeof t&&(t=(a=t).x,r=a.y,o=a.z),void 0===a?a={}:!0===a&&(a=Yi);var h=Math.round(t),d=Math.round(r),T=Math.round(o),S=Math.abs(h-t),A=Math.abs(d-r),P=Math.abs(T-o);S>A&&S>P?h=-d-T:A>P?d=-h-T:T=-h-d,a.x=h,a.y=d,a.z=T}(d),Gi(this.mode,d.x,d.y,d.z,o),o},getTileX:function GetTileX(t,r){return this.getTileXY(t,r,!0).x},getTileY:function GetTileY(t,r){return this.getTileXY(t,r,!0).y}};Object.assign(tn.prototype,en);var nn={y:0,x:1},rn={even:0,odd:1},sn=[[[[1,0],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1]],[[1,0],[1,1],[0,1],[-1,0],[0,-1],[1,-1]]],[[[1,0],[1,1],[0,1],[-1,0],[0,-1],[1,-1]],[[1,0],[0,1],[-1,1],[-1,0],[-1,-1],[0,-1]]],[[[1,0],[0,1],[-1,0],[-1,-1],[0,-1],[1,-1]],[[1,1],[0,1],[-1,1],[-1,0],[0,-1],[1,0]]],[[[1,1],[0,1],[-1,1],[-1,0],[0,-1],[1,0]],[[1,0],[0,1],[-1,0],[-1,-1],[0,-1],[1,-1]]]],an=Ai,hn=Ei,ln=Mi,un=_i,cn=function GetParity(t,r,o){var a;switch(t){case an:case hn:a=1&o;break;case ln:case un:a=1&r}return a},dn=function GetTileXAtDirection(t,r,o,a,h){if(void 0===h?h={}:!0===h&&(h=fn),1===a){var d=cn(this.mode,t,r);h.x=t+sn[this.mode][d][o][0],h.y=r+sn[this.mode][d][o][1]}else if(0===a)h.x=t,h.y=r;else{var T,S,A=Ni(this.mode,t,r,!0);switch(o){case 1:T=A.x,A.y-a,S=A.z+a;break;case 2:T=A.x-a,A.y,S=A.z+a;break;case 3:T=A.x-a,A.y+a,S=A.z;break;case 4:T=A.x,A.y+a,S=A.z-a;break;case 5:T=A.x+a,A.y,S=A.z-a;break;default:T=A.x+a,A.y-a,S=A.z}Gi(this.mode,T,0,S,h)}return h},fn={},pn=function ReverseDirMap(t){var r,o,a,h={};for(var d in t)o=(r=t[d])[0],a=r[1],h.hasOwnProperty(o)||(h[o]={}),h[o][a]=parseInt(d);return h},gn=[[pn(sn[0][0]),pn(sn[0][1])],[pn(sn[1][0]),pn(sn[1][1])],[pn(sn[2][0]),pn(sn[2][1])],[pn(sn[3][0]),pn(sn[3][1])]],vn=Ai,mn=Ei,yn=Mi,xn=_i,Tn={},bn=Ai,wn=Ei,Sn={},Cn={},An={},En={},Mn={},_n={},Pn=Math.PI/180,Rn=function DegToRad$3(t){return t*Pn},kn=pi(6),On={},Dn={},Ln=function(t){_inherits(HexagonGrid,t);var r=_createSuper(HexagonGrid);function HexagonGrid(t){var o;return _classCallCheck(this,HexagonGrid),(o=r.call(this,t)).sides=6,o}return _createClass(HexagonGrid,[{key:"allDirections",get:function get(){return Fn}},{key:"halfDirections",get:function get(){return Bn}}]),HexagonGrid}(tn),Fn=[0,1,2,3,4,5],Bn=[0,1,2],Nn={saveOrigin:ti,restoreOrigin:ei,getTileXYAtDirection:dn,getNeighborTileXY:function GetNeighborTileXY(t,r,o,a){return dn.call(this,t,r,o,1,a)},getNeighborTileDirection:function GetNeighborTileDirection(t,r){var o=cn(this.mode,t.x,t.y),a=gn[this.mode][o],h=r.x-t.x,d=r.y-t.y;if(a.hasOwnProperty(h)){var T=a[h];if(T.hasOwnProperty(d))return T[d]}return null},getOppositeDirection:function GetOppositeDirection(t,r,o){return(o+3)%6},offset:function Offset$1(t,r,o,a){void 0===a?a={}:!0===a&&(a=Tn);var h=t.x+r,d=t.y+o;switch(this.mode){case vn:0!=(1&o)&&0==(1&d)&&(h+=1);break;case mn:0!=(1&o)&&0==(1&d)&&(h-=1);break;case yn:0!=(1&r)&&0==(1&h)&&(d+=1);break;case xn:0!=(1&r)&&0==(1&h)&&(d-=1)}return a.x=h,a.y=d,a},mirror:function Mirror$2(t,r,o){void 0===o?o={}:!0===o&&(o=Sn);var a,h,d,T=Ni(this.mode,t.x,t.y,!0),S=this.mode===bn||this.mode===wn;return 1&r&&(S?(a=T.y,h=T.x,d=T.z):(a=-T.x,h=-T.z,d=-T.y),T.x=a,T.y=h,T.z=d),2&r&&(S?(a=-T.y,h=-T.x,d=-T.z):(a=T.x,h=T.z,d=T.y)),Gi(this.mode,a,0,d,o),o},rotate:function Rotate$3(t,r,o){void 0===o?o={}:!0===o&&(o=Cn),r=_e(r,0,5);var a,h,d=Ni(this.mode,t.x,t.y,!0);switch(r){case 1:a=-d.z,-d.x,h=-d.y;break;case 2:a=d.y,d.z,h=d.x;break;case 3:a=-d.x,-d.y,h=-d.z;break;case 4:a=d.z,d.x,h=d.y;break;case 5:a=-d.y,-d.z,h=-d.x;break;default:a=d.x,d.y,h=d.z}return Gi(this.mode,a,0,h,o),o},getDistance:function GetDistance(t,r,o){Ni(this.mode,t.x,t.y,An),Ni(this.mode,r.x,r.y,En);var a=En.x-An.x,h=En.y-An.y,d=En.z-An.z;return(Math.abs(a)+Math.abs(h)+Math.abs(d))/2},directionBetween:function DirectionBetween(t,r,o){var a;void 0===o&&(o=!0),Ni(this.mode,t.x,t.y,Mn),Ni(this.mode,r.x,r.y,_n);var h=_n.x-Mn.x,d=_n.y-Mn.y,T=_n.z-Mn.z;return a=0===T?h>0?0:3:0===h?T>0?1:4:0===d?T>0?2:5:h>0&&d<0&&T>0?0+T/-d:h<0&&d<0&&T>0?1+-d/T:h<0&&d>0&&T>0?2+d/-h:h<0&&d>0&&T<0?3+-T/d:h>0&&d>0&&T<0?4+h/-T:5+-d/h,o&&(a=Math.round(a)),a},directionNormalize:fi,getGridPoints:function GetGridPoints(t,r,o){var a;return void 0===o?o=pi(6):!0===o&&(o=kn),void 0===t?(On.x=0,On.y=0):this.getWorldXY(t,r,On),void 0!==this.size?a=this.size:((a=Dn).width=this.width,a.height=this.height),function SetPoints(t,r,o,a,h){if(void 0===h&&(h=pi(6)),void 0===o);else if("number"==typeof o)for(var d,T=0===a?0:-30,S=0;S<6;S++)d=Rn(60*S+T),h[S].x=t+o*Math.cos(d),h[S].y=r+o*Math.sin(d);else{var A=o,P=A.width,O=A.height,D=P/2,L=P/4,I=O/2,B=O/4;0===a?(h[0].x=t+D,h[0].y=r,h[1].x=t+L,h[1].y=r+I,h[2].x=t-L,h[2].y=r+I,h[3].x=t-D,h[3].y=r,h[4].x=t-L,h[4].y=r-I,h[5].x=t+L,h[5].y=r-I):(h[0].x=t+D,h[0].y=r-B,h[1].x=t+D,h[1].y=r+B,h[2].x=t,h[2].y=r+I,h[3].x=t-D,h[3].y=r+B,h[4].x=t-D,h[4].y=r-B,h[5].x=t,h[5].y=r-I)}}(On.x,On.y,a,this.staggeraxis,o),o},ringToTileXYArray:function RingToTileXYArray(t,r,o){void 0===o&&(o=[]);var a,h,d,T=Ni(this.mode,t.x,t.y,!0),S=T.x,A=(T.y,T.z);for(d=r,a=0;a>=-r;a--)h=-a-d,o.push(Gi(this.mode,S+a,0,A+d));for(a=-r,h=1;h<=r;h++)d=-a-h,o.push(Gi(this.mode,S+a,0,A+d));for(h=r,d=-1;d>=-r;d--)a=-h-d,o.push(Gi(this.mode,S+a,0,A+d));for(d=-r,a=1;a<=r;a++)h=-a-d,o.push(Gi(this.mode,S+a,0,A+d));for(a=r,h=-1;h>=-r;h--)d=-a-h,o.push(Gi(this.mode,S+a,0,A+d));for(h=-r,d=1;d<=r-1;d++)a=-h-d,o.push(Gi(this.mode,S+a,0,A+d));return o}};Object.assign(Ln.prototype,Nn);var Gn={quadGrid:mi,hexagonGrid:Ln},Yn=function(t){_inherits(Board$1,t);var r=_createSuper(Board$1);function Board$1(t,o){var a;return _classCallCheck(this,Board$1),(a=r.call(this)).isShutdown=!1,a.scene=t,a.boardData=new je,a.resetFromJSON(o),a.boot(),a}return _createClass(Board$1,[{key:"resetFromJSON",value:function resetFromJSON(t){return this.isBoard=Dt(t,"isBoard",!0),this.setGrid(Dt(t,"grid",void 0)),this.setWrapMode(Dt(t,"wrap",!1)),this.setInfinityMode(Dt(t,"infinity",!1)),this.setBoardWidth(Dt(t,"width",0)),this.setBoardHeight(Dt(t,"height",0)),this}},{key:"boot",value:function boot(){this.scene&&this.isBoard&&this.scene.sys.events.once("shutdown",this.destroy,this)}},{key:"shutdown",value:function shutdown(t){if(!this.isShutdown)return this.scene&&this.isBoard&&this.scene.sys.events.off("shutdown",this.destroy,this),this.isBoard&&this.removeAllChess(!t,!0),_get(_getPrototypeOf(Board$1.prototype),"shutdown",this).call(this),this.boardData.shutdown(t),this.scene=void 0,this.boardData=void 0,this.isShutdown=!0,this}},{key:"destroy",value:function destroy(t){this.isShutdown||(this.emit("destroy",this,t),this.shutdown(t))}},{key:"setGrid",value:function setGrid(t){if(zt(t)){var r=t,o=Dt(r,"gridType","quadGrid");t=new Gn[o](r)}return this.grid=t,this}},{key:"setWrapMode",value:function setWrapMode(t){return void 0===t&&(t=!0),this.wrapMode=t,this}},{key:"setInfinityMode",value:function setInfinityMode(t){return void 0===t&&(t=!0),this.infinityMode=t,this}},{key:"setBoardSize",value:function setBoardSize(t,r){return this.setBoardWidth(t),this.setBoardHeight(r),this}},{key:"exists",value:function exists(t){return this.boardData.exists(this.getChessUID(t))}},{key:"chessCount",get:function get(){return this.boardData.chessCount}},{key:"clear",value:function clear(t){return void 0===t&&(t=!0),this.removeAllChess(t,!0),this.boardData.clear(),this}}],[{key:"GetBoard",value:function GetBoard(t){return ze(t)}}]),Board$1}(Ot);Object.assign(Yn.prototype,Ve);var Xn=function(t){_inherits(TouchZone,t);var r=_createSuper(TouchZone);function TouchZone(t){var o;return _classCallCheck(this,TouchZone),o=r.call(this,t,0,0,1,1),t.add.existing(_assertThisInitialized(o)),o.setScrollFactor(0),o.setInteractive({hitArea:{},hitAreaCallback:function hitAreaCallback(){return!0}}),o}return _createClass(TouchZone)}(Phaser.GameObjects.Zone),Un=Phaser.GameObjects.GameObject.RENDER_MASK,zn=function InputCandidate(t){if(t.renderFlags!==Un)return!1;var r=!0,o=t.parentContainer;if(o)do{if(o.renderFlags!==Un){r=!1;break}o=o.parentContainer}while(o);return r},Vn=function EmitChessEvent(t,r,o,a,h,d){if(null!=a&&null!=h){for(var T,S="string"!=typeof t?t:void 0,A="string"!=typeof r?r:void 0,P=o.tileXYToChessArray(a,h,Wn),O=0,D=P.length;O<D;O++)T=P[O],zn(T)&&(T.emit&&(A?A(T):T.emit(r,d)),S?S(T):o.emit(t,d,T));Wn.length=0}},Wn=[],Hn=function OnPointerDown$1(t){if(this.enable&&t.isDown){var r=this.board;null===this.pointer&&(this.pointer=t);var o=r.worldXYToTileXY(t.worldX,t.worldY,!0),a=o.x,h=o.y;if(this.prevTilePosition.x=this.tilePosition.x,this.prevTilePosition.y=this.tilePosition.y,this.tilePosition.x=a,this.tilePosition.y=h,r.contains(a,h)){r.emit("tiledown",t,this.tilePosition),r.emit("tileover",t,this.tilePosition);Vn((function boardEventCallback(o){r.emit("gameobjectdown",t,o),r.emit("gameobjectover",t,o)}),(function chessEventCallback(r){r.emit("board.pointerdown",t),r.emit("board.pointerover",t)}),r,a,h,t)}}},jn=function OnPointerUp$1(t){if(this.enable){var r=this.board,o=r.worldXYToTileXY(t.worldX,t.worldY,!0),a=o.x,h=o.y;if(this.prevTilePosition.x=this.tilePosition.x,this.prevTilePosition.y=this.tilePosition.y,this.tilePosition.x=a,this.tilePosition.y=h,r.contains(a,h)){r.emit("tileup",t,this.tilePosition),r.emit("tileout",t,this.prevTilePosition);Vn((function boardEventCallback(o){r.emit("gameobjectup",t,o),r.emit("gameobjectout",t,o)}),(function chessEventCallback(r){r.emit("board.pointerup",t),r.emit("board.pointerout",t)}),r,a,h,t),this.pointer===t&&(this.pointer=null)}}},qn=function OnPointerMove$1(t){if(this.enable){var r=this.board,o=r.worldXYToTileXY(t.worldX,t.worldY,!0);if(!le(this.tilePosition,o)){this.prevTilePosition.x=this.tilePosition.x,this.prevTilePosition.y=this.tilePosition.y,null!=this.prevTilePosition.x&&null!=this.prevTilePosition.y&&r.emit("tileout",t,this.prevTilePosition);var a=o.x,h=o.y;if(this.tilePosition.x=a,this.tilePosition.y=h,r.contains(a,h)){null===this.pointer&&(this.pointer=t),r.emit("tilemove",t,this.tilePosition),r.emit("tileover",t,this.tilePosition),Vn("gameobjectout","board.pointerout",r,this.prevTilePosition.x,this.prevTilePosition.y,t);Vn((function boardEventCallback(o){r.emit("gameobjectmove",t,o),r.emit("gameobjectover",t,o)}),(function chessEventCallback(r){r.emit("board.pointermove",t),r.emit("board.pointerover",t)}),r,a,h,t)}else this.pointer===t&&(this.pointer=null)}}},Zn=Phaser.Utils.Objects.GetValue,Kn=function(t){_inherits(TickTask,t);var r=_createSuper(TickTask);function TickTask(t,o){var a;return _classCallCheck(this,TickTask),(a=r.call(this,t,o))._isRunning=!1,a.isPaused=!1,a.tickingState=!1,a.setTickingMode(Zn(o,"tickingMode",1)),a}return _createClass(TickTask,[{key:"boot",value:function boot(){2!==this.tickingMode||this.tickingState||this.startTicking()}},{key:"shutdown",value:function shutdown(t){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),_get(_getPrototypeOf(TickTask.prototype),"shutdown",this).call(this,t))}},{key:"setTickingMode",value:function setTickingMode(t){"string"==typeof t&&(t=Jn[t]),this.tickingMode=t}},{key:"startTicking",value:function startTicking(){this.tickingState=!0}},{key:"stopTicking",value:function stopTicking(){this.tickingState=!1}},{key:"isRunning",get:function get(){return this._isRunning},set:function set(t){this._isRunning!==t&&(this._isRunning=t,1===this.tickingMode&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}},{key:"start",value:function start(){return this.isPaused=!1,this.isRunning=!0,this}},{key:"pause",value:function pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}},{key:"resume",value:function resume(){return this.isPaused&&(this.isRunning=!0),this}},{key:"stop",value:function stop(){return this.isPaused=!1,this.isRunning=!1,this}},{key:"complete",value:function complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}}]),TickTask}(Xt),Jn={no:0,lazy:1,always:2},Qn=Phaser.Utils.Objects.GetValue,$n=function(t){_inherits(OnePointerTracer,t);var r=_createSuper(OnePointerTracer);function OnePointerTracer(t,o){var a;_classCallCheck(this,OnePointerTracer);var h=Gt(t);return h===t&&(t=void 0),(a=r.call(this,h,o)).gameObject=t,t&&t.setInteractive(Qn(o,"inputConfig",void 0)),a._enable=void 0,a.resetFromJSON(o),a.boot(),a}return _createClass(OnePointerTracer,[{key:"resetFromJSON",value:function resetFromJSON(t){return this.setEnable(Qn(t,"enable",!0)),this.setDetectBounds(),void 0===this.gameObject?this.setDetectBounds(Qn(t,"bounds",void 0)):this.setDetectBounds(),this.tracerState=er,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}},{key:"boot",value:function boot(){_get(_getPrototypeOf(OnePointerTracer.prototype),"boot",this).call(this),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}},{key:"shutdown",value:function shutdown(t){this.scene&&(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,_get(_getPrototypeOf(OnePointerTracer.prototype),"shutdown",this).call(this,t))}},{key:"enable",get:function get(){return this._enable},set:function set(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}},{key:"setEnable",value:function setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}},{key:"setDetectBounds",value:function setDetectBounds(t){return this.bounds=t,this}},{key:"toggleEnable",value:function toggleEnable(){return this.setEnable(!this.enable),this}},{key:"onPointerDown",value:function onPointerDown(t,r){this.enable&&(void 0===this.pointer&&(!this.bounds||this.bounds.contains(t.x,t.y))&&this.pointer!==t&&(this.pointer=t,this.lastPointer=t,this.movedState=!1,this.tracerState=ir,void 0===this.gameObject&&(this.isTouchingAnyObject=r.length>0),this.onDragStart()))}},{key:"onPointerUp",value:function onPointerUp(t){this.enable&&((!this.bounds||this.bounds.contains(t.x,t.y))&&this.pointer===t&&(this.pointer=void 0,this.movedState=!1,this.tracerState=er,this.onDragEnd()))}},{key:"onPointerMove",value:function onPointerMove(t){if(this.enable&&t.isDown){var r=!this.bounds||this.bounds.contains(t.x,t.y),o=this.pointer===t;!o&&r||(o&&!r?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}}},{key:"dragCancel",value:function dragCancel(){return this.tracerState===ir&&this.onDragEnd(),this.pointer=void 0,this.tracerState=er,this}},{key:"onDragStart",value:function onDragStart(){this.emit("dragstart",this)}},{key:"onDragEnd",value:function onDragEnd(){this.emit("dragend",this)}},{key:"onDrag",value:function onDrag(){this.emit("drag",this)}},{key:"preUpdate",value:function preUpdate(t,r){}},{key:"postUpdate",value:function postUpdate(t,r){}},{key:"startTicking",value:function startTicking(){_get(_getPrototypeOf(OnePointerTracer.prototype),"startTicking",this).call(this),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}},{key:"stopTicking",value:function stopTicking(){_get(_getPrototypeOf(OnePointerTracer.prototype),"stopTicking",this).call(this),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}},{key:"setRecongizedStateObject",value:function setRecongizedStateObject(t){return this.recongizedState=t,this}},{key:"state",get:function get(){return this.recongizedState.state},set:function set(t){this.recongizedState.state=t}},{key:"cancel",value:function cancel(){return this.state=nr,this}}]),OnePointerTracer}(Kn),er=0,ir=1,nr="IDLE",rr=function(){function FSM(t){_classCallCheck(this,FSM);var r=Dt(t,"states",void 0);r&&this.addStates(r);var o=Dt(t,"extend",void 0);if(o)for(var a in o)this.hasOwnProperty(a)&&void 0!==this[a]||(this[a]=o[a]);var h=Dt(t,"eventEmitter",void 0),d=Dt(t,"EventEmitterClass",void 0);this.setEventEmitter(h,d),this._stateLock=!1,this.resetFromJSON(t)}return _createClass(FSM,[{key:"shutdown",value:function shutdown(){this.destroyEventEmitter()}},{key:"destroy",value:function destroy(){this.shutdown()}},{key:"resetFromJSON",value:function resetFromJSON(t){this.setEnable(Dt(t,"enable",!0)),this.start(Dt(t,"start",void 0));var r=Dt(t,"init",void 0);return r&&r.call(this),this}},{key:"toJSON",value:function toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}},{key:"setEnable",value:function setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}},{key:"toggleEnable",value:function toggleEnable(){return this.setEnable(!this.enable),this}},{key:"state",get:function get(){return this._state},set:function set(t){if(this.enable&&!this._stateLock&&this._state!==t){if(this._prevState=this._state,this._state=t,this._stateLock=!0,this.emit("statechange",this),null!=this._prevState){var r="exit_"+this._prevState,o=this[r];o&&o.call(this),this.emit(r,this)}if(this._stateLock=!1,null!=this._state){var a="enter_"+this._state,h=this[a];h&&h.call(this),this.emit(a,this)}}}},{key:"prevState",get:function get(){return this._prevState}},{key:"start",value:function start(t){return this._start=t,this._prevState=void 0,this._state=t,this}},{key:"goto",value:function goto(t){return null!=t&&(this.state=t),this}},{key:"next",value:function next(){var t,r=this["next_"+this.state];return r&&(t="string"==typeof r?r:r.call(this)),this.goto(t),this}},{key:"addState",value:function addState(t,r){"string"!=typeof t&&(t=(r=t).name);var o=r.next;o&&(this["next_"+t]=o);var a=r.exit;a&&(this["exit_"+t]=a);var h=r.enter;return h&&(this["enter_"+t]=h),this}},{key:"addStates",value:function addStates(t){if(Array.isArray(t))for(var r=0,o=t.length;r<o;r++)this.addState(t[r]);else for(var a in t)this.addState(a,t[a]);return this}},{key:"runMethod",value:function runMethod(t,r,o,a,h,d){var T=this[t+"_"+this.state];if(T){var S=arguments.length;switch(S){case 1:return T.call(this);case 2:return T.call(this,r);case 3:return T.call(this,r,o);case 4:return T.call(this,r,o,a);case 5:return T.call(this,r,o,a,h);case 6:return T.call(this,r,o,a,h,d)}for(var A=new Array(S-1),P=1;P<S;P++)A[P-1]=arguments[P];return T.apply(this,A)}}},{key:"update",value:function update(t,r){this.runMethod("update",t,r)}},{key:"preupdate",value:function preupdate(t,r){this.runMethod("preupdate",t,r)}},{key:"postupdate",value:function postupdate(t,r){this.runMethod("postupdate",t,r)}}]),FSM}();Object.assign(rr.prototype,Ft);var sr=Phaser.Utils.Objects.GetValue,or=Phaser.Math.Distance.Between,ar=function(t){_inherits(Tap,t);var r=_createSuper(Tap);function Tap(t,o){var a;_classCallCheck(this,Tap);var h=_assertThisInitialized(a=r.call(this,t,o)),d={states:{IDLE:{enter:function enter(){h.stop(),h.tapsCount=0,h.x=0,h.y=0,h.worldX=0,h.worldY=0},exit:function exit(){var t=h.lastPointer;h.x=t.x,h.y=t.y,h.worldX=t.worldX,h.worldY=t.worldY}},BEGIN:{enter:function enter(){h.start(),h.tapsCount=0,h.emit("tappingstart",h,h.gameObject,h.lastPointer)}},RECOGNIZED:{enter:function enter(){h.start(),h.emit("tap",h,h.gameObject,h.lastPointer),h.emit("".concat(h.tapsCount,"tap"),h,h.gameObject,h.lastPointer)}}},init:function init(){this.state=hr},eventEmitter:!1};return a.setRecongizedStateObject(new rr(d)),a}return _createClass(Tap,[{key:"resetFromJSON",value:function resetFromJSON(t){_get(_getPrototypeOf(Tap.prototype),"resetFromJSON",this).call(this,t),this.setHoldTime(sr(t,"time",250)),this.setTapInterval(sr(t,"tapInterval",200)),this.setDragThreshold(sr(t,"threshold",9)),this.setTapOffset(sr(t,"tapOffset",10));var r=sr(t,"taps",void 0);return void 0!==r?this.setTaps(r):(this.setMaxTaps(sr(t,"maxTaps",void 0)),this.setMinTaps(sr(t,"minTaps",void 0))),this}},{key:"onDragStart",value:function onDragStart(){switch(this.state){case hr:this.state=lr;break;case lr:var t=this.lastPointer;or(t.upX,t.upY,t.x,t.y)>this.tapOffset&&(this.state=ur,this.state=lr);break;case ur:this.state=lr}}},{key:"onDragEnd",value:function onDragEnd(){this.state===lr&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),void 0!==this.maxTaps&&this.tapsCount===this.maxTaps&&(this.state=ur))}},{key:"onDrag",value:function onDrag(){this.state!==hr&&this.pointer.getDistance()>this.dragThreshold&&(this.state=hr)}},{key:"preUpdate",value:function preUpdate(t,r){if(this.isRunning&&this.enable&&this.state===lr){var o=this.lastPointer;if(o.isDown)t-o.downTime>this.holdTime&&(this.state=hr);else t-o.upTime>this.tapInterval&&(void 0===this.minTaps||this.tapsCount>=this.minTaps?this.state=ur:this.state=hr)}}},{key:"postUpdate",value:function postUpdate(t,r){this.isRunning&&this.enable&&this.state===ur&&(this.state=hr)}},{key:"isTapped",get:function get(){return this.state===ur}},{key:"setHoldTime",value:function setHoldTime(t){return this.holdTime=t,this}},{key:"setTapInterval",value:function setTapInterval(t){return this.tapInterval=t,this}},{key:"setDragThreshold",value:function setDragThreshold(t){return this.dragThreshold=t,this}},{key:"setTapOffset",value:function setTapOffset(t){return this.tapOffset=t,this}},{key:"setMaxTaps",value:function setMaxTaps(t){return this.maxTaps=t,this}},{key:"setMinTaps",value:function setMinTaps(t){return this.minTaps=t,this}},{key:"setTaps",value:function setTaps(t,r){return void 0===r&&(r=t),this.setMinTaps(t).setMaxTaps(r),this}}]),Tap}($n),hr="IDLE",lr="BEGIN",ur="RECOGNIZED",cr=function InstallTap(){var t=this.touchZone?this.touchZone:this.board.scene,r=new ar(t);return r.on("tap",dr,this),r},dr=function OnTap(t){var r=this.board,o=r.worldXYToTileXY(t.worldX,t.worldY),a=o.x,h=o.y;if(r.contains(a,h)){r.emit("tiletap",t,o),r.emit("tile".concat(t.tapsCount,"tap"),t,o);Vn((function boardEventCallback(o){r.emit("gameobjecttap",t,o),r.emit("gameobject".concat(t.tapsCount,"tap"),t,o)}),(function chessEventCallback(r){r.emit("board.tap",t),r.emit("board.".concat(t.tapsCount,"tap"),t)}),r,a,h,t)}},fr=Phaser.Utils.Objects.GetValue,pr=function(t){_inherits(Press,t);var r=_createSuper(Press);function Press(t,o){var a;_classCallCheck(this,Press);var h=_assertThisInitialized(a=r.call(this,t,o)),d={states:{IDLE:{enter:function enter(){h.x=0,h.y=0,h.worldX=0,h.worldY=0},exit:function exit(){var t=h.lastPointer;h.x=t.x,h.y=t.y,h.worldX=t.worldX,h.worldY=t.worldY}},BEGIN:{enter:function enter(){h.start()},exit:function exit(){h.stop()}},RECOGNIZED:{enter:function enter(){h.emit("pressstart",h,h.gameObject,h.lastPointer)},exit:function exit(){h.emit("pressend",h,h.gameObject,h.lastPointer)}}},init:function init(){this.state=gr},eventEmitter:!1};return a.setRecongizedStateObject(new rr(d)),a}return _createClass(Press,[{key:"resetFromJSON",value:function resetFromJSON(t){return _get(_getPrototypeOf(Press.prototype),"resetFromJSON",this).call(this,t),this.setDragThreshold(fr(t,"threshold",9)),this.setHoldTime(fr(t,"time",251)),this}},{key:"onDragStart",value:function onDragStart(){this.state=vr,0===this.holdTime&&(this.state=mr)}},{key:"onDragEnd",value:function onDragEnd(){this.state=gr}},{key:"onDrag",value:function onDrag(){this.state!==gr&&this.pointer.getDistance()>this.dragThreshold&&(this.state=gr)}},{key:"preUpdate",value:function preUpdate(t,r){this.isRunning&&this.enable&&(this.state===vr&&t-this.pointer.downTime>=this.holdTime&&(this.state=mr))}},{key:"isPressed",get:function get(){return this.state===mr}},{key:"setHoldTime",value:function setHoldTime(t){return this.holdTime=t,this}},{key:"setDragThreshold",value:function setDragThreshold(t){return this.dragThreshold=t,this}}]),Press}($n),gr="IDLE",vr="BEGIN",mr="RECOGNIZED",yr=function InstallPress(){var t=this.touchZone?this.touchZone:this.board.scene,r=new pr(t);return r.on("pressstart",xr,this).on("pressend",Tr,this),r},xr=function OnPressStart(t){var r=this.board,o=r.worldXYToTileXY(t.worldX,t.worldY),a=o.x,h=o.y;r.contains(a,h)&&(r.emit("tilepressstart",t,o),Vn("gameobjectpressstart","board.pressstart",r,a,h,t))},Tr=function OnPressEnd(t){var r=this.board,o=r.worldXYToTileXY(t.worldX,t.worldY),a=o.x,h=o.y;r.contains(a,h)&&(r.emit("tilepressend",t,o),Vn("gameobjectpressend","board.pressend",r,a,h,t))},br=Phaser.Math.Distance.Between,wr=Phaser.Math.Angle.Between,Sr={getDt:function getDt(){return this.scene.sys.game.loop.delta},getVelocity:function getVelocity(){var t=this.pointer.position,r=this.pointer.prevPosition;return br(r.x,r.y,t.x,t.y)/(.001*this.getDt())},getVelocityX:function getVelocityX(){var t=this.pointer.position,r=this.pointer.prevPosition;return Math.abs(t.x-r.x)/(.001*this.getDt())},getVelocityY:function getVelocityY(){var t=this.pointer.position,r=this.pointer.prevPosition;return Math.abs(t.y-r.y)/(.001*this.getDt())},getVelocityAngle:function getVelocityAngle(){var t=this.pointer.position,r=this.pointer.prevPosition;return wr(r.x,r.y,t.x,t.y)}},Cr={"up&down":0,"left&right":1,"4dir":2,"8dir":3},Ar={},Er=Phaser.Utils.Objects.GetValue,Mr=Phaser.Math.RadToDeg,_r=function(t){_inherits(Swipe,t);var r=_createSuper(Swipe);function Swipe(t,o){var a;_classCallCheck(this,Swipe);var h=_assertThisInitialized(a=r.call(this,t,o)),d={states:{IDLE:{enter:function enter(){h.x=0,h.y=0,h.worldX=0,h.worldY=0},exit:function exit(){var t=h.lastPointer;h.x=t.x,h.y=t.y,h.worldX=t.worldX,h.worldY=t.worldY}},BEGIN:{enter:function enter(){h.validDrag=!1}},RECOGNIZED:{enter:function enter(){h.start(),h.updateDirectionStates(),h.emit("swipe",h,h.gameObject,h.lastPointer)},exit:function exit(){h.stop(),h.clearDirectionStates()}}},init:function init(){this.state=Pr},eventEmitter:!1};return a.setRecongizedStateObject(new rr(d)),a.clearDirectionStates(),a}return _createClass(Swipe,[{key:"resetFromJSON",value:function resetFromJSON(t){return _get(_getPrototypeOf(Swipe.prototype),"resetFromJSON",this).call(this,t),this.setDragThreshold(Er(t,"threshold",10)),this.setVelocityThreshold(Er(t,"velocityThreshold",1e3)),this.setDirectionMode(Er(t,"dir","8dir")),this}},{key:"onDragStart",value:function onDragStart(){this.state=Rr}},{key:"onDragEnd",value:function onDragEnd(){this.state=Pr}},{key:"onDrag",value:function onDrag(){this.state===Rr&&(this.validDrag||(this.validDrag=0===this.dragThreshold||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=kr))}},{key:"postUpdate",value:function postUpdate(t,r){this.isRunning&&this.enable&&this.state===kr&&(this.state=Pr)}},{key:"isSwiped",get:function get(){return this.state===kr}},{key:"dragVelocity",get:function get(){var t;switch(this.dirMode){case 0:t=this.getVelocityY();break;case 1:t=this.getVelocityX();break;default:t=this.getVelocity()}return t}},{key:"setDragThreshold",value:function setDragThreshold(t){return this.dragThreshold=t,this}},{key:"setVelocityThreshold",value:function setVelocityThreshold(t){return this.velocityThreshold=t,this}},{key:"setDirectionMode",value:function setDirectionMode(t){return"string"==typeof t&&(t=Cr[t]),this.dirMode=t,this}},{key:"updateDirectionStates",value:function updateDirectionStates(){return function AngleToDirections(t,r,o){switch(void 0===o?o={}:!0===o&&(o=Ar),o.left=!1,o.right=!1,o.up=!1,o.down=!1,t=(t+360)%360,r){case 0:t<180?o.down=!0:o.up=!0;break;case 1:t>90&&t<=270?o.left=!0:o.right=!0;break;case 2:t>45&&t<=135?o.down=!0:t>135&&t<=225?o.left=!0:t>225&&t<=315?o.up=!0:o.right=!0;break;case 3:t>22.5&&t<=67.5?(o.down=!0,o.right=!0):t>67.5&&t<=112.5?o.down=!0:t>112.5&&t<=157.5?(o.down=!0,o.left=!0):t>157.5&&t<=202.5?o.left=!0:t>202.5&&t<=247.5?(o.left=!0,o.up=!0):t>247.5&&t<=292.5?o.up=!0:t>292.5&&t<=337.5?(o.up=!0,o.right=!0):o.right=!0}}(Mr(this.getVelocityAngle()),this.dirMode,this),this}},{key:"clearDirectionStates",value:function clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}]),Swipe}($n);Object.assign(_r.prototype,Sr);var Pr="IDLE",Rr="BEGIN",kr="RECOGNIZED",Or=function InstallSwipe(){var t=this.touchZone?this.touchZone:this.board.scene,r=new _r(t);return r.on("swipe",Dr,this),r},Dr=function OnSwipe(t){var r=this.board,o=r.worldXYToTileXY(t.worldX,t.worldY),a=o.x,h=o.y;r.contains(a,h)&&(t.direction=r.angleSnapToDirection(o,t.getVelocityAngle()),r.emit("tileswipe",t,o),Vn("gameobjectswipe","board.swipe",r,a,h,t))},Lr=function(){function Input(t,r){_classCallCheck(this,Input);var o=Dt(r,"enable",!0),a=Dt(r,"useTouchZone",!0),h=t.scene;if(this.board=t,this.touchZone=void 0,this._enable=!0,this.pointer=null,this.tilePosition={x:void 0,y:void 0},this.prevTilePosition={x:void 0,y:void 0},a){var d=new Xn(h);d.on("pointerdown",Hn,this),d.on("pointerup",jn,this),d.on("pointermove",qn,this),this.touchZone=d}else h.input.on("pointerdown",Hn,this),h.input.on("pointerup",jn,this),h.input.on("pointermove",qn,this);this.tap=cr.call(this),this.press=yr.call(this),this.swipe=Or.call(this),t.once("destroy",this.onBoardDestroy,this),this.setEnable(o)}return _createClass(Input,[{key:"destroy",value:function destroy(t){if(this.tap.destroy(t),this.press.destroy(t),this.swipe.destroy(t),this.touchZone)this.touchZone.destroy(t),this.touchZone=void 0;else{var r=this.board.scene;r&&(r.input.off("pointerdown",Hn,this),r.input.off("pointerup",jn,this),r.input.off("pointermove",qn,this))}this.board=void 0}},{key:"onBoardDestroy",value:function onBoardDestroy(t,r){this.destroy(r)}},{key:"enable",get:function get(){return this._enable},set:function set(t){this._enable!==t&&(t||(this.pointer=null),this._enable=t,this.touchZone&&(t?this.touchZone.setInteractive():this.touchZone.disableInteractive()),this.tap.setEnable(t),this.press.setEnable(t),this.swipe.setEnable(t))}},{key:"setEnable",value:function setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}}]),Input}(),Ir=function(t){_inherits(Board,t);var r=_createSuper(Board);function Board(){return _classCallCheck(this,Board),r.apply(this,arguments)}return _createClass(Board,[{key:"touchZone",get:function get(){return this.input?this.input.touchZone:null}},{key:"getTouchZone",value:function getTouchZone(){return this.touchZone}}]),Board}(Yn),Fr={setInteractive:function SetInteractive$1(t){if(this.input){var r=!1!==t;this.input.setEnable(r)}else this.input=new Lr(this,t);return this}};Object.assign(Ir.prototype,Fr);var Br=function IsInValidKey(t){return null==t||""===t||0===t.length},Nr=function SetValue(t,r,o,a){if(void 0===a&&(a="."),"object"===_typeof(t)){if(Br(r)){if(null==o)return;"object"===_typeof(o)&&(t=o)}else{"string"==typeof r&&(r=r.split(a));var h=r.pop(),d=function GetEntry(t,r,o){var a=t;if(Br(r));else{var h;"string"==typeof r&&(r=r.split("."));for(var d=0,T=r.length;d<T;d++){var S;null!=a[h=r[d]]&&"object"===_typeof(a[h])||(S=d===T-1?void 0===o?{}:o:{},a[h]=S),a=a[h]}}return a}(t,r);d[h]=o}return t}};Rt.register("board",(function(t){return new Ir(this.scene,t)})),Nr(window,"RexPlugins.Board.Board",Ir),Rt.register("hexagonGrid",(function(t){return new Ln(t)})),Rt.register("quadGrid",(function(t){return new mi(t)}));var Gr=function IsMiniBoardObject(t){return"rexMiniBoard"===t.type},Yr=function(t){_inherits(Shape,t);var r=_createSuper(Shape);function Shape(t,o,a,h,d,T,S){var A;_classCallCheck(this,Shape),void 0===S&&(S=!0);var P,O=Gr(t);O&&(t=(P=t).board);var D,L,I=t.scene;S?(D=0,L=0):(D=o,L=a);var B=t.getGridPoints(void 0,void 0,!0);return Xr(B),A=r.call(this,I,D,L,B,d,T),S?O?P.addChess(_assertThisInitialized(A),o,a,h):t.addChess(_assertThisInitialized(A),o,a,h,!0):qt(_assertThisInitialized(A)),A}return _createClass(Shape)}(Phaser.GameObjects.Polygon),Xr=function ShiftToO(t){for(var r,o=1/0,a=1/0,h=0,d=t.length;h<d;h++)r=t[h],o=Math.min(o,r.x),a=Math.min(a,r.y);if(0===o&&0===a)return t;for(h=0,d=t.length;h<d;h++)(r=t[h]).x-=o,r.y-=a;return t};Rt.register("shape",(function(t,r,o,a,h,d,T){var S=new Yr(t,r,o,a,h,d,T);return t.scene.add.existing(S),S})),Nr(window,"RexPlugins.Board.Shape",Yr);var Ur=function(t){_inherits(SceneUpdateTickTask,t);var r=_createSuper(SceneUpdateTickTask);function SceneUpdateTickTask(){return _classCallCheck(this,SceneUpdateTickTask),r.apply(this,arguments)}return _createClass(SceneUpdateTickTask,[{key:"startTicking",value:function startTicking(){_get(_getPrototypeOf(SceneUpdateTickTask.prototype),"startTicking",this).call(this),this.scene.sys.events.on("update",this.update,this)}},{key:"stopTicking",value:function stopTicking(){_get(_getPrototypeOf(SceneUpdateTickTask.prototype),"stopTicking",this).call(this),this.scene&&this.scene.sys.events.off("update",this.update,this)}}]),SceneUpdateTickTask}(Kn),zr={x:0,y:0,z:0},Vr=function GetSneakTileZ(t,r,o,a){var h=t.chessData.board,d=a.toString();do{d+="."}while(h.contains(r,o,d));return d},Wr={},Hr={},jr=function Clone(t,r){var o=Array.isArray(t);if(void 0===r?r=o?[]:{}:We(r),o){r.length=t.length;for(var a=0,h=t.length;a<h;a++)r[a]=t[a]}else for(var d in t)r[d]=t[d];return r},qr=function Shuffle(t){for(var r=t.length-1;r>0;r--){var o=Math.floor(Math.random()*(r+1)),a=t[r];t[r]=t[o],t[o]=a}return t},Zr=[],Kr={x:0,y:0},Jr=[],Qr={canMoveTo:function CanMoveToTile$1(t,r,o){var a=this.chessData.board;if(null==a)return!1;var h=this.chessData.tileXYZ,d=h.x,T=h.y,S=h.z;if(t===d&&r===T)return!0;if(!a.contains(t,r))return!1;if(this.blockerTest&&a.hasBlocker(t,r))return!1;if(this.edgeBlockerTest,this.moveableTestCallback){if(void 0===o&&(o=this.chessData.getTileDirection(t,r)),zr.x=t,zr.y=r,zr.z=S,this.moveableTestScope)var A=this.moveableTestCallback.call(this.moveableTestScope,h,zr,o,a);else A=this.moveableTestCallback(h,zr,o,a);if(!A)return!1}if(this.occupiedTest&&!this.sneakMode){var P=a.tileXYZToChess(t,r,S);if(P&&(this.emit("occupy",P,this.parent,this),a.contains(t,r,S)))return!1}return!0},moveTo:function MoveToTile$1(t,r,o){var a=this.chessData.board;if(null===a)return this.lastMoveResult=!1,this;if(null!=t&&"number"!=typeof t){var h=t;t=Dt(h,"x",void 0),r=Dt(h,"y",void 0),o=Dt(h,"direction",void 0)}var d=this.chessData.tileXYZ;if(void 0!==o&&null==t||null==r){var T=a.getNeighborTileXY(d,o,!0);null!==T?(t=T.x,r=T.y):(t=null,r=null)}if(null==t||null==r)return this.lastMoveResult=!1,this;if(void 0===o&&(Wr.x=t,Wr.y=r,o=a.getNeighborTileDirection(d,Wr)),!this.canMoveTo(t,r,o))return this.lastMoveResult=!1,this;if(this.destinationTileX=t,this.destinationTileY=r,this.destinationDirection=o,a.wrapMode&&null!==o)if(a.grid.getNeighborTileXY(d.x,d.y,o,Hr),Hr.x===t&&Hr.y===r){var S=a.tileXYToWorldXY(t,r,!0);this.moveAlongLine(void 0,void 0,S.x,S.y)}else{var A=(S=a.tileXYToWorldXY(Hr.x,Hr.y,!0)).x,P=S.y,O=(S=a.tileXYToWorldXY(d.x,d.y,!0)).x,D=S.y,L=(O+A)/2,I=(D+P)/2;this.moveAlongLine(void 0,void 0,L,I);var B=a.getOppositeDirection(t,r,o);a.grid.getNeighborTileXY(t,r,B,Hr),A=(S=a.tileXYToWorldXY(Hr.x,Hr.y,!0)).x,P=S.y,O=(A+(L=(S=a.tileXYToWorldXY(t,r,!0)).x))/2,D=(P+(I=S.y))/2,this.addMoveLine(O,D,L,I)}else{S=a.tileXYToWorldXY(t,r,!0);this.moveAlongLine(void 0,void 0,S.x,S.y)}var N=d.z;return this.sneakMode&&(void 0===this.tileZSave?a.contains(t,r,N)&&(this.tileZSave=N,N=Vr(this,t,r,this.tileZSave)):a.contains(t,r,this.tileZSave)?N=Vr(this,t,r,this.tileZSave):(N=this.tileZSave,this.tileZSave=void 0)),a.moveChess(this.parent,t,r,N,!1),this.isRunning=!0,this.lastMoveResult=!0,this},moveToward:function MoveToward$1(t){return this.moveTo(void 0,void 0,t),this},moveToRandomNeighbor:function MoveToRandomNeighbor$1(){var t=this.chessData.board;if(null===t)return this.lastMoveResult=!1,this;var r=t.grid.allDirections;Zr.length!==r.length&&jr(r,Zr),qr(Zr);for(var o=0,a=Zr.length;o<a;o++)if(this.moveToward(Zr[o]),this.lastMoveResult)return this;return this},moveAway:function MoveAway(t,r,o){var a=this.chessData.board;if(null===a)return this.lastMoveResult=!1,this;if("number"!=typeof t){var h=t;t=h.x,r=h.y}Kr.x=t,Kr.y=r,void 0===o&&(o=!0);var d,T,S=this.chessData.tileXYZ,A=a.grid.allDirections;if(Jr.length!==A.length+1){Jr.length=0;for(var P=0,O=A.length;P<O;P++)Jr.push({direction:P});Jr.push({direction:null})}for(P=0,O=Jr.length;P<O;P++){if(null===(T=(d=Jr[P]).direction))d.x=S.x,d.y=S.y;else if(null===a.getNeighborTileXY(S,T,d)){d.x=null,d.y=null,d.distance=null;continue}d.distance=a.getDistance(d,Kr,!0)}var D=this.destinationDirection;Jr.sort((function(t,r){return null===t.distance?1:null===r.distance?-1:t.distance>r.distance?o?-1:1:t.distance<r.distance?o?1:-1:t.direction===D?1:r.direction===D?-1:null===t.direction?1:null===r.direction?-1:0}));for(P=0,O=Jr.length;P<O;P++){if(null===(d=Jr[P]).distance)return this;if(this.moveTo(d),this.lastMoveResult)return this}return this},moveCloser:function MoveCloser(t,r){return this.moveAway(t,r,!1),this}},$r=Phaser.Utils.Objects.GetValue,ts=Phaser.Math.Distance.Between,es=Phaser.Math.Linear,ns=Phaser.Math.Angle.Between,rs=function(t){_inherits(MoveTo$2,t);var r=_createSuper(MoveTo$2);function MoveTo$2(t,o){var a;return _classCallCheck(this,MoveTo$2),(a=r.call(this,t,o)).resetFromJSON(o),a.boot(),a}return _createClass(MoveTo$2,[{key:"resetFromJSON",value:function resetFromJSON(t){return this.isRunning=$r(t,"isRunning",!1),this.setEnable($r(t,"enable",!0)),this.timeScale=$r(t,"timeScale",1),this.setSpeed($r(t,"speed",400)),this.setRotateToTarget($r(t,"rotateToTarget",!1)),this.targetX=$r(t,"targetX",0),this.targetY=$r(t,"targetY",0),this}},{key:"toJSON",value:function toJSON(){return{isRunning:this.isRunning,enable:this.enable,timeScale:this.timeScale,speed:this.speed,rotateToTarget:this.rotateToTarget,targetX:this.targetX,targetY:this.targetY,tickingMode:this.tickingMode}}},{key:"setEnable",value:function setEnable(t){return null==t&&(t=!0),this.enable=t,this}},{key:"setSpeed",value:function setSpeed(t){return this.speed=t,this}},{key:"setRotateToTarget",value:function setRotateToTarget(t){return this.rotateToTarget=t,this}},{key:"moveTo",value:function moveTo(t,r){if("number"!=typeof t){var o=t;t=o.x,r=o.y}return this.targetX=t,this.targetY=r,_get(_getPrototypeOf(MoveTo$2.prototype),"start",this).call(this),this}},{key:"moveFrom",value:function moveFrom(t,r){if("number"!=typeof t){var o=t;t=o.x,r=o.y}var a=this.parent,h=a.x,d=a.y;return a.setPosition(t,r),this.moveTo(h,d),this}},{key:"moveToward",value:function moveToward(t,r){var o=this.parent,a=o.x+Math.cos(t)*r,h=o.y+Math.sin(t)*r;return this.moveTo(a,h),this}},{key:"update",value:function update(t,r){if(!this.isRunning||!this.enable)return this;var o=this.parent;if(!o.active)return this;var a=o.x,h=o.y,d=this.targetX,T=this.targetY;if(a===d&&h===T)return this.complete(),this;if(0===this.speed||0===r||0===this.timeScale)return this;var S,A,P=r*this.timeScale/1e3,O=this.speed*P,D=ts(a,h,d,T);if(O<D){var L=O/D;S=es(a,d,L),A=es(h,T,L)}else S=d,A=T;return o.setPosition(S,A),this.rotateToTarget&&(o.rotation=ns(a,h,S,A)),this}}]),MoveTo$2}(Ur),ss=function(t){_inherits(MoveTo$1,t);var r=_createSuper(MoveTo$1);function MoveTo$1(t,o){var a;return _classCallCheck(this,MoveTo$1),(a=r.call(this,t,o)).chessData=qt(t),a.scene=t.scene,a.moveToTask=new rs(t,{tickingMode:0}),a.resetFromJSON(o),a.boot(),a}return _createClass(MoveTo$1,[{key:"resetFromJSON",value:function resetFromJSON(t){return this.isRunning=Dt(t,"isRunning",!1),this.setEnable(Dt(t,"enable",!0)),this.timeScale=Dt(t,"timeScale",1),this.setSpeed(Dt(t,"speed",400)),this.setRotateToTarget(Dt(t,"rotateToTarget",!1)),this.setOccupiedTest(Dt(t,"occupiedTest",!1)),this.setBlockerTest(Dt(t,"blockerTest",!1)),this.setEdgeBlockerTest(Dt(t,"edgeBlockerTest",!1)),this.setMoveableTestCallback(Dt(t,"moveableTest",void 0),Dt(t,"moveableTestScope",void 0)),this.setSneakEnable(Dt(t,"sneak",!1)),this.destinationTileX=Dt(t,"destinationTileX",null),this.destinationTileY=Dt(t,"destinationTileY",null),this.destinationDirection=Dt(t,"destinationDirection",null),this.lastMoveResult=Dt(t,"lastMoveResult",void 0),this}},{key:"toJSON",value:function toJSON(){return{isRunning:this.isRunning,enable:this.enable,timeScale:this.timeScale,speed:this.speed,occupiedTest:this.occupiedTest,blockerTest:this.blockerTest,edgeBlockerTest:this.edgeBlockerTest,moveableTest:this.moveableTestCallback,moveableTestScope:this.moveableTestScope,rotateToTarget:this.rotateToTarget,destinationTileX:this.destinationTileX,destinationTileY:this.destinationTileY,destinationDirection:this.destinationDirection,lastMoveResult:this.lastMoveResult,tickingMode:this.tickingMode}}},{key:"shutdown",value:function shutdown(t){this.moveToTask.shutdown(t),_get(_getPrototypeOf(MoveTo$1.prototype),"shutdown",this).call(this,t)}},{key:"enable",get:function get(){return this.moveToTask.enable},set:function set(t){this.moveToTask.setEnable(t)}},{key:"setEnable",value:function setEnable(t){return null==t&&(t=!0),this.enable=t,this}},{key:"timeScale",get:function get(){return this.moveToTask.timeScale},set:function set(t){this.moveToTask.timeScale=t}},{key:"speed",get:function get(){return this.moveToTask.speed},set:function set(t){this.moveToTask.setSpeed(t)}},{key:"setSpeed",value:function setSpeed(t){return this.speed=t,this}},{key:"rotateToTarget",get:function get(){return this.moveToTask.rotateToTarget},set:function set(t){this.moveToTask.setRotateToTarget(t)}},{key:"setRotateToTarget",value:function setRotateToTarget(t){return void 0===t&&(t=!0),this.rotateToTarget=t,this}},{key:"setOccupiedTest",value:function setOccupiedTest(t){return void 0===t&&(t=!0),this.occupiedTest=t,this}},{key:"setBlockerTest",value:function setBlockerTest(t){return void 0===t&&(t=!0),this.blockerTest=t,this}},{key:"setEdgeBlockerTest",value:function setEdgeBlockerTest(t){return void 0===t&&(t=!0),this.edgeBlockerTest=t,this}},{key:"setMoveableTestCallback",value:function setMoveableTestCallback(t,r){return this.moveableTestCallback=t,this.moveableTestScope=r,this}},{key:"setSneakEnable",value:function setSneakEnable(t){return void 0===t&&(t=!0),this.sneakMode=t,this.tileZSave=void 0,this}},{key:"moveAlongLine",value:function moveAlongLine(t,r,o,a){return void 0!==t&&(this.parent.x=t),void 0!==r&&(this.parent.y=r),this.moveToTask.moveTo(o,a),this}},{key:"addMoveLine",value:function addMoveLine(t,r,o,a){return this.moveToTask.hasOwnProperty("nextlines")||(this.moveToTask.nextlines=[]),this.moveToTask.nextlines.push([t,r,o,a]),this}},{key:"moveNextLine",value:function moveNextLine(){var t=this.moveToTask.nextlines;return!!t&&(0!==t.length&&(this.moveAlongLine.apply(this,t[0]),t.length=0,!0))}},{key:"update",value:function update(t,r){if(!this.isRunning||!this.enable)return this;var o=this.moveToTask;return o.update(t,r),o.isRunning||this.moveNextLine()||this.complete(),this}}]),MoveTo$1}(Ur);Object.assign(ss.prototype,Qr);var os={x:0,y:0,z:0},as={x:0,y:0,z:0},hs={},ls={},us=[],cs=function(t){_inherits(MoveTo,t);var r=_createSuper(MoveTo);function MoveTo(t,o){var a;return _classCallCheck(this,MoveTo),(a=r.call(this,t,o)).moveToTask=new rs(t,{tickingMode:0}),a.resetFromJSON(o),a.boot(),a}return _createClass(MoveTo,[{key:"resetFromJSON",value:function resetFromJSON(t){return this.isRunning=Dt(t,"isRunning",!1),this.setEnable(Dt(t,"enable",!0)),this.timeScale=Dt(t,"timeScale",1),this.setSpeed(Dt(t,"speed",400)),this.destinationTileX=Dt(t,"destinationTileX",null),this.destinationTileY=Dt(t,"destinationTileY",null),this.destinationDirection=Dt(t,"destinationDirection",null),this.lastMoveResult=Dt(t,"lastMoveResult",void 0),this}},{key:"toJSON",value:function toJSON(){return{isRunning:this.isRunning,enable:this.enable,timeScale:this.timeScale,speed:this.speed,moveableTest:this.moveableTestCallback,moveableTestScope:this.moveableTestScope,destinationTileX:this.destinationTileX,destinationTileY:this.destinationTileY,destinationDirection:this.destinationDirection,lastMoveResult:this.lastMoveResult,tickingMode:this.tickingMode}}},{key:"shutdown",value:function shutdown(t){this.isShutdown||(this.moveToTask.shutdown(t),_get(_getPrototypeOf(MoveTo.prototype),"shutdown",this).call(this,t))}},{key:"enable",get:function get(){return this.moveToTask.enable},set:function set(t){this.moveToTask.setEnable(t)}},{key:"setEnable",value:function setEnable(t){return null==t&&(t=!0),this.enable=t,this}},{key:"timeScale",get:function get(){return this.moveToTask.timeScale},set:function set(t){this.moveToTask.timeScale=t}},{key:"speed",get:function get(){return this.moveToTask.speed},set:function set(t){this.moveToTask.setSpeed(t)}},{key:"setSpeed",value:function setSpeed(t){return this.speed=t,this}},{key:"moveAlongLine",value:function moveAlongLine(t,r,o,a){return void 0!==t&&(this.parent.x=t),void 0!==r&&(this.parent.y=r),this.moveToTask.moveTo(o,a),this}},{key:"update",value:function update(t,r){if(!this.isRunning||!this.enable)return this;var o=this.moveToTask;return o.update(t,r),o.isRunning||this.complete(),this}}]),MoveTo}(Ur),ds={canMoveTo:function CanMoveToTile(t,r,o){var a=this.parent,h=a.mainBoard;if(null==h)return!1;if(os.x=a.tileX,os.y=a.tileY,as.x=t,as.y=r,as.x===os.x&&as.y===os.y)return!0;if(a.pullOutFromMainBoard(),!a.canPutOnMainBoard(h,as.x,as.y))return a.putBack(),!1;if(this.moveableTestCallback){if(void 0===o&&(o=h.getNeighborTileDirection(os,as)),this.moveableTestScope)var d=this.moveableTestCallback.call(this.moveableTestScope,os,as,o,h);else d=this.moveableTestCallback(os,as,o,h);if(!d)return a.putBack(),!1}return a.putBack(),!0},moveTo:function MoveToTile(t,r,o){var a=this.parent,h=a.mainBoard;if(null==h)return this.lastMoveResult=!1,this;if(null!=t&&"number"!=typeof t){var d=t;t=Dt(d,"x",void 0),r=Dt(d,"y",void 0),o=Dt(d,"direction",void 0)}(hs.x=a.tileX,hs.y=a.tileY,void 0!==o&&null==t||null==r)&&(null!==(T=h.getNeighborTileXY(hs,o,!0))?(t=T.x,r=T.y):(t=null,r=null));if(null==t||null==r)return this.lastMoveResult=!1,this;if(void 0===o&&(ls.x=t,ls.y=r,o=board.getNeighborTileDirection(hs,ls)),!this.canMoveTo(t,r,o))return this.lastMoveResult=!1,this;this.destinationTileX=t,this.destinationTileY=r,this.destinationDirection=o;var T=h.tileXYToWorldXY(t,r,!0);return this.moveToTask.moveTo(T.x,T.y),a.putOnMainBoard(h,t,r,!1),this.isRunning=!0,this.lastMoveResult=!0,this},moveToward:function MoveToward(t){return this.moveTo(void 0,void 0,t),this},moveToRandomNeighbor:function MoveToRandomNeighbor(){var t=this.parent.mainBoard;if(null==t)return this.lastMoveResult=!1,this;var r=t.grid.allDirections;us.length!==r.length&&jr(r,us),qr(us);for(var o=0,a=us.length;o<a;o++)if(this.moveToward(us[o]),this.lastMoveResult)return this;return this}};Object.assign(cs.prototype,ds),Rt.register("moveTo",(function(t,r){return new(Gr(t)?cs:ss)(t,r)})),Nr(window,"RexPlugins.Board.MoveTo",ss),Nr(window,"RexPlugins.Board.MiniBoardMoveTo",cs);var fs,ps={tileXY:[],direction:void 0,pattern:void 0},gs=function(){function Queue(){_classCallCheck(this,Queue),this.data=[],this.visited={}}return _createClass(Queue,[{key:"push",value:function push(t,r){if(o(t)){for(var a=t,h=0,d=a.length;h<d;h++)this.push(a[h]);return this}if(zt(t)){var T=t;t=T.x,r=T.y}var S="".concat(t,",").concat(r);return this.visited.hasOwnProperty(S)||(this.data.push({x:t,y:r}),this.visited[S]=!0),this}},{key:"pop",value:function pop(){return this.data.pop()}},{key:"length",get:function get(){return this.data.length}},{key:"clear",value:function clear(){return We(this.data),We(this.visited),this}}]),Queue}(),vs={match:function MatchBoard(t,r,o,a){for(var h,d,T,S=this.board,A=S.grid.halfDirections,P=this.dirMask,O=S.width,D=S.height,L=0,I=A.length;L<I;L++)if(!1!==P[h=A[L]])for(var B=0;B<D;B++){for(var N=0;N<O;N++)if(!1!==(d=this.matchAtDir(t,N,B,h))){if(r&&(T=o?r.call(o,d,S):r(d,S)),a)return d;if(T)break}if(T)break}return this},matchAtDir:function MatchAtDir(t,r,o,a){var h,d="number"==typeof t;d?(h=t,t=null):h=t.length;var T,S,A=this.wildcard,P=this.board,O=ps.tileXY;O.length=0;for(var D=0;D<h;D++){if(void 0===S)S={x:r,y:o};else if(null===(S=P.getNeighborTileXY(S,a,S)))return!1;if(null==(T=this.getSymbol(S.x,S.y)))return!1;if(T!==A)if(d){if(null===t)t=T;else if(t!==T)return!1}else if(t[D]!==T)return!1;O.push({x:S.x,y:S.y})}return ps.direction=a,ps.pattern=t,ps},group:function Group(t,r,o){void 0===o&&(o=[]);var a,h,d=this.board,T=this.wildcard,S=this.getSymbol(t,r);if(null==S||S===T)return o;for(void 0===fs&&(fs=new gs),fs.push(t,r);fs.length;)a=fs.pop(),(h=this.getSymbol(a.x,a.y))!==S&&h!==T||(o.push(a),fs.push(d.getNeighborTileXY(a)));return fs.clear(),o}},ms=function(){function Match(t){_classCallCheck(this,Match),this.symbols=[],this.dirMask={},this.resetFromJSON(t),this.boot()}return _createClass(Match,[{key:"resetFromJSON",value:function resetFromJSON(t){this.setBoard(Dt(t,"board",void 0)),this.setWildcard(Dt(t,"wildcard",void 0));var r=Dt(t,"dirMask",void 0);return void 0!==r&&this.setDirMask(r),this}},{key:"boot",value:function boot(){}},{key:"shutdown",value:function shutdown(){return this.board=void 0,this.symbols=void 0,this.dirMask=void 0,this}},{key:"destroy",value:function destroy(){return this.shutdown(),this}},{key:"setBoard",value:function setBoard(t){return this.board=t,t&&this.clearSymbols(),this}},{key:"setDirMask",value:function setDirMask(t,r){if(zt(t)){var o=t;for(t in o)this.dirMask[t]=o[t]}else this.dirMask[t]=r;return this}},{key:"setDirectionMode",value:function setDirectionMode(t){return this.board.grid.setDirectionMode(t),this}},{key:"clearSymbols",value:function clearSymbols(){return this.refreshSymbols(null),this}},{key:"setSymbol",value:function setSymbol(t,r,o){return this.board.contains(t,r)?(this.symbols[this.tileXYToKey(t,r)]=o,this):this}},{key:"getSymbol",value:function getSymbol(t,r){return this.symbols[this.tileXYToKey(t,r)]}},{key:"forEach",value:function forEach(t,r){for(var o,a,h=this.board,d=0,T=this.symbols.length;d<T&&(a=this.symbols[d],o=this.keyToTileXY(d),!(r?t.call(r,o,a,h):t(o,a,h)));d++);return this}},{key:"refreshSymbols",value:function refreshSymbols(t,r){var o,a,h=this.board,d=h.width,T=h.height;if(this.symbols.length=d*T,function IsFunction(t){return t&&"function"==typeof t}(t))for(var S=0,A=this.symbols.length;S<A;S++)a=this.keyToTileXY(S,!0),o=r?t.call(r,a,h):t(a,h),this.symbols[S]=o;else{o=t;for(S=0,A=this.symbols.length;S<A;S++)this.symbols[S]=o}return this}},{key:"setWildcard",value:function setWildcard(t){return this.wildcard=t,this}},{key:"tileXYToKey",value:function tileXYToKey(t,r){return t+r*this.board.width}},{key:"keyToTileXY",value:function keyToTileXY(t,r){void 0===r?r={}:!0===r&&(r=ys);var o=this.board.width;return r.x=t%o,r.y=Math.floor(t/o),r}},{key:"anyMatch",value:function anyMatch(t){return this.match(t,null,null,!0)}}]),Match}(),ys={x:0,y:0};Object.assign(ms.prototype,vs),Rt.register("match",(function(t){return new ms(t)})),Nr(window,"RexPlugins.Board.Match",ms);var xs=function(){function Stack(){_classCallCheck(this,Stack),this.items=[]}return _createClass(Stack,[{key:"destroy",value:function destroy(){this.clear(),this.items=void 0}},{key:"pop",value:function pop(){return this.items.length>0?this.items.pop():null}},{key:"push",value:function push(t){return this.items.push(t),this}},{key:"pushMultiple",value:function pushMultiple(t){return this.items.push.apply(this.items,t),t.length=0,this}},{key:"clear",value:function clear(){return this.items.length=0,this}}]),Stack}(),Ts=function(){function Node(){_classCallCheck(this,Node),this.preNodes=[],this.manager=void 0}return _createClass(Node,[{key:"reset",value:function reset(t){this.manager=t,this.sn=void 0,this.key=void 0,this.x=void 0,this.y=void 0,this.isTileXYZ=!0,this._px=void 0,this._py=void 0,this.cost=void 0,this.f=0,this.g=0,this.h=0,this.closerH=0,this.visited=!1,this.closed=!1,this.preNodes.length=0}},{key:"destroy",value:function destroy(){this.preNodes.length=0,this.manager=void 0}},{key:"heuristic",value:function heuristic(t,r,o){if(null===r)return 0;var a,h=this.board.getDistance(t,this,!0)*this.pathFinder.weight;if(1===r&&void 0!==o){var d=t.angleTo(o)-this.angleTo(o);a=h+Math.abs(d)}else a=2===r?h+Math.random():h;return a}},{key:"getNeighborNodes",value:function getNeighborNodes(){var t=this.board.getNeighborTileXY(this);this.pathFinder.shuffleNeighbors&&qr(t);for(var r,o=[],a=0,h=t.length;a<h;a++)r=this.manager.getNode(t[a],!0),o.push(r);return o}},{key:"getCost",value:function getCost(t){return this.pathFinder.cacheCost?void 0===this.cost&&(this.cost=this.pathFinder.getCost(this,t)):this.cost=this.pathFinder.getCost(this,t),this.cost}},{key:"angleTo",value:function angleTo(t){return te(this.worldX,this.wroldY,t.worldX,t.wroldY)}},{key:"pathFinder",get:function get(){return this.manager.pathFinder}},{key:"board",get:function get(){return this.manager.pathFinder.board}},{key:"worldX",get:function get(){return void 0===this._px&&(this._px=this.board.tileXYToWroldX(this.x,this.y)),this._px}},{key:"wroldY",get:function get(){return void 0===this._py&&(this._py=this.board.tileXYToWroldY(this.x,this.y)),this._py}},{key:"pathCost",get:function get(){return this.g}}]),Node}(),bs=new xs,ws=function(){function NodeCache(t){_classCallCheck(this,NodeCache),this.sn=0,this.pool=bs,this.nodes={},this.pathFinder=t,this.closestNode=null}return _createClass(NodeCache,[{key:"destroy",value:function destroy(){return this.freeAllNodes(),this.pathFinder=null,this.pool=void 0,this}},{key:"getNode",value:function getNode(t,r,o){var a;switch(_typeof(t)){case"number":a=Jt(t,r);break;case"string":a=t,o=r;break;default:var h=t;o=r,t=h.x,r=h.y,a=Jt(t,r)}if(void 0===o&&(o=!1),this.sn++,!this.nodes.hasOwnProperty(a)){if(!o)return null;var d=this.pool.pop();null===d&&(d=new Ts),d.reset(this),d.sn=this.sn,d.key=a,d.x=t,d.y=r,this.nodes[a]=d}return this.nodes[a]}},{key:"freeAllNodes",value:function freeAllNodes(){this.closestNode=null;var t,r=this.nodes,o=this.pool;for(var a in r)(t=r[a]).destroy(),o.push(t),delete r[a];return this.sn=0,this}},{key:"getAllNodes",value:function getAllNodes(){return this.nodes}}]),NodeCache}(),Ss=function(){function BinaryHeap(t){_classCallCheck(this,BinaryHeap),this.content=[],this.scoreFunction=t}return _createClass(BinaryHeap,[{key:"clear",value:function clear(){this.content.length=0}},{key:"push",value:function push(t){this.content.push(t),this.sinkDown(this.content.length-1)}},{key:"pop",value:function pop(){var t=this.content[0],r=this.content.pop();return this.content.length>0&&(this.content[0]=r,this.bubbleUp(0)),t}},{key:"remove",value:function remove(t){var r=this.content.indexOf(t),o=this.content.pop();r!==this.content.length-1&&(this.content[r]=o,this.scoreFunction(o)<this.scoreFunction(t)?this.sinkDown(r):this.bubbleUp(r))}},{key:"size",value:function size(){return this.content.length}},{key:"rescoreElement",value:function rescoreElement(t){this.sinkDown(this.content.indexOf(t))}},{key:"sinkDown",value:function sinkDown(t){for(var r=this.content[t];t>0;){var o=(t+1>>1)-1,a=this.content[o];if(!(this.scoreFunction(r)<this.scoreFunction(a)))break;this.content[o]=r,this.content[t]=a,t=o}}},{key:"bubbleUp",value:function bubbleUp(t){for(var r=this.content.length,o=this.content[t],a=this.scoreFunction(o);;){var h,d=t+1<<1,T=d-1,S=null;if(T<r){var A=this.content[T];(h=this.scoreFunction(A))<a&&(S=T)}if(d<r){var P=this.content[d];this.scoreFunction(P)<(null===S?a:h)&&(S=d)}if(null===S)break;this.content[t]=this.content[S],this.content[S]=o,t=S}}}]),BinaryHeap}(),Cs={AREA_MODE:16,PATH_MODE:0,random:0,diagonal:1,straight:2,line:3,"A*":10,"A*-random":11,"A*-line":12,BLOCKER:null,INFINITY:void 0},As=Cs.PATH_MODE,Es=Cs["A*"],Ms=Cs["A*-line"],_s=Cs["A*-random"],Ps=Cs.BLOCKER,Rs=Cs.INFINITY,ks=new Ss((function(t){return t.f})),Os=Cs.BLOCKER,Ds=Cs.AREA_MODE,Ls=Cs.INFINITY,Is=Cs.random,Fs=Cs.diagonal,Bs=Cs.straight,Ns=Cs.line,Gs=Cs["A*"],Ys=Cs["A*-line"],Xs=Cs["A*-random"],Us=Cs.PATH_MODE,zs=Cs.INFINITY,Vs={aStarSearch:function AStarSerach(t,r,o,a){void 0===this.nodeManager&&(this.nodeManager=new ws(this));var h=this.nodeManager;h.freeAllNodes();var d,T=a===As,S=this.pathMode===Es||this.pathMode===Ms||this.pathMode===_s,A=T&&!S,P=T&&S?this.pathMode==Es?0:this.pathMode==Ms?1:this.pathMode==_s?2:null:null,O=null!==r?h.getNode(r.x,r.y,!0):null,D=h.getNode(t.x,t.y,!0);for(D.h=D.heuristic(O,P),T&&((d=D).closerH=d.h||d.heuristic(O,0)),ks.push(D);ks.size()>0;){var L=ks.pop();if(T&&L===O){d=O;break}L.closed=!0;for(var I,B,N=L.getNeighborNodes(),G=0,Y=N.length;G<Y;++G)if(B=(I=N[G]).getCost(L),!I.closed&&B!==Ps){var X=L.g+B,U=I.visited;o!=Rs&&X>o||(!U||X<I.g?(I.visited=!0,I.preNodes.length=0,I.preNodes.push(L),I.h=I.h||I.heuristic(O,P,D),I.g=X,I.f=I.g+I.h,T&&(I.closerH=I.h||I.heuristic(O,0),(I.closerH<d.closerH||I.closerH===d.closerH&&I.g<d.g)&&(d=I)),U?ks.rescoreElement(I):ks.push(I)):A&&X==I.g&&I.preNodes.push(L))}}return h.closestNode=T?d:null,ks.clear(),this},getCost:function GetCost$2(t,r){return this.occupiedTest&&this.board.contains(t.x,t.y,this.chessData.tileXYZ.z)||this.blockerTest&&this.board.hasBlocker(t.x,t.y)?Os:(this.edgeBlockerTest,"number"==typeof this.costCallback?this.costCallback:(void 0===(o=this.costCallbackScope?this.costCallback.call(this.costCallbackScope,t,r,this):this.costCallback(t,r,this))&&(o=Os),o));var o},findArea:function FindArea(t,r){if(void 0===r&&(r=[]),null===this.board)return r;if(t!==Ls&&t<=0)return r;var o=this.chessData.tileXYZ,a=o.x,h=o.y;this.aStarSearch(o,null,t,Ds);var d,T=this.nodeManager.getAllNodes(),S=[];for(var A in T)(d=T[A]).x===a&&d.y===h||d.closed&&S.push(d);S.sort((function(t,r){var o=t.sn,a=r.sn;return o>a?1:o<a?-1:0}));for(var P=0,O=S.length;P<O;P++)d=S[P],r.push({x:d.x,y:d.y,cost:d.g});return r},getPath:function GetPath$1(t,r){if(void 0===r&&(r=[]),void 0===this.board)return r;var o=this.nodeManager;if(void 0===o)return r;var a=o.getNode(this.chessData.tileXYZ,!1),h=o.getNode(t,!1);if(null===a||null===h)return r;for(var d,T=function GetNodePath(t,r,o){for(var a,h,d,T,S,A=t.board,P=r,O=[];P.preNodes.length>0;)switch(O.push(P),S=P.preNodes.length,o){case Gs:case Ys:case Xs:P=T=P.preNodes[0];break;case Is:P=T=1===S?P.preNodes[0]:P.preNodes[De(0,S-1)];break;case Fs:for(var D=0;D<S;D++)if(T=P.preNodes[D],(h=A.getNeighborTileDirection(P,T))!==a){a=h;break}P=T;break;case Bs:for(D=0;D<S&&(T=P.preNodes[D],(h=A.getNeighborTileDirection(P,T))!==a);D++);a=h,P=T;break;case Ns:if(void 0===d&&(d=r.angleTo(t)),1===S)P=T=P.preNodes[0],d=r.angleTo(P);else{T=P.preNodes[0];var L,I=Math.abs(r.angleTo(T)-d);for(D=1;D<S;D++)L=P.preNodes[D],Math.abs(r.angleTo(L)-d)<I&&(T=L);P=T}}return O.reverse()}(a,h,this.pathMode),S=0,A=T.length;S<A;S++)d=T[S],r.push({x:d.x,y:d.y,cost:d.g});return r},findPath:function FindPath(t,r,o,a){if(void 0===o&&(o=!0),void 0===a&&(a=[]),null===this.board)return a;if(r!==zs&&r<=0)return a;var h=this.chessData.tileXYZ;this.aStarSearch(h,t,r,Us);var d=this.nodeManager,T=o?d.closestNode:d.getNode(t);return null===T?a:this.getPath(T,a)},tileXYToCost:function TileXYToCost(t,r,o){if(void 0===this.nodeManager)return null;var a=this.nodeManager.getNode(t,r);return null===a?null:(void 0===o&&(o=!0),o?a.g:a.cost)}},Ws=Cs.BLOCKER,Hs=Cs.INFINITY,js=function(t){_inherits(PathFinder,t);var r=_createSuper(PathFinder);function PathFinder(t,o){var a;return _classCallCheck(this,PathFinder),zt(t)&&(o=t,t=void 0),(a=r.call(this,t,{eventEmitter:!1})).setChess(t),a.nodeManager=void 0,a.resetFromJSON(o),a}return _createClass(PathFinder,[{key:"resetFromJSON",value:function resetFromJSON(t){var r=Dt(t,"costCallback",void 0),o=Dt(t,"costCallbackScope",void 0);return void 0===r&&(r=Dt(t,"cost",1)),this.setOccupiedTest(Dt(t,"occupiedTest",!1)),this.setBlockerTest(Dt(t,"blockerTest",!1)),this.setEdgeBlockerTest(Dt(t,"edgeBlockerTest",!1)),this.setCostFunction(r,o),this.setPathMode(Dt(t,"pathMode",0)),this.setCacheCostMode(Dt(t,"cacheCost",!0)),this.setWeight(Dt(t,"weight",10)),this.setShuffleNeighborsMode(Dt(t,"shuffleNeighbors",!1)),this}},{key:"shutdown",value:function shutdown(t){this.isShutdown||(void 0!==this.nodeManager&&this.nodeManager.destroy(),this.chessData=void 0,_get(_getPrototypeOf(PathFinder.prototype),"shutdown",this).call(this,t))}},{key:"gameObject",get:function get(){return this.parent}},{key:"setChess",value:function setChess(t){return t?(this.chessData=qt(t),this.parent!==t&&(this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.parent=t,this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this))):(this.parent=void 0,this.chessData=void 0),this}},{key:"setCostFunction",value:function setCostFunction(t,r){return this.costCallback=t,this.costCallbackScope=r,this}},{key:"setPathMode",value:function setPathMode(t){return"string"==typeof t&&(t=Cs[t]),this.pathMode=t,this}},{key:"setCacheCostMode",value:function setCacheCostMode(t){return void 0===t&&(t=!0),this.cacheCost=t,this}},{key:"setOccupiedTest",value:function setOccupiedTest(t){return void 0===t&&(t=!0),this.occupiedTest=t,this}},{key:"setBlockerTest",value:function setBlockerTest(t){return void 0===t&&(t=!0),this.blockerTest=t,this}},{key:"setEdgeBlockerTest",value:function setEdgeBlockerTest(t){return void 0===t&&(t=!0),this.edgeBlockerTest=t,this}},{key:"setWeight",value:function setWeight(t){return this.weight=t,this}},{key:"setShuffleNeighborsMode",value:function setShuffleNeighborsMode(t){return void 0===t&&(t=!0),this.shuffleNeighbors=t,this}},{key:"BLOCKER",get:function get(){return Ws}},{key:"INFINITY",get:function get(){return Hs}},{key:"board",get:function get(){return this.chessData.board}}]),PathFinder}(Xt);Object.assign(js.prototype,Vs),Rt.register("pathFinder",(function(t,r){return new js(t,r)})),Nr(window,"RexPlugins.Board.PathFinder",js);var qs={BLOCKER:null,INFINITY:void 0},Zs=qs.BLOCKER,Ks=qs.INFINITY,Js=qs.INFINITY,Qs=.001,$s=function drawLine(t,r,o,a,h,d){t&&void 0!==r&&t.lineStyle(1,r,1).lineBetween(o,a,h,d)},to=[],eo=[],io=[],no={preTest:function PreTest(t,r){if(this.occupiedTest||this.blockerTest||this.edgeBlockerTest)for(var o,a=this.chessData.tileXYZ.z,h=1,d=t.length;h<d;h++){if(o=t[h],this.occupiedTest&&this.board.contains(o.x,o.y,a))return!1;if(this.blockerTest&&this.board.hasBlocker(o.x,o.y))return!1;this.edgeBlockerTest}return!this.preTestCallback||(this.preTestCallbackScope?this.preTestCallback.call(this.preTestCallbackScope,t,r,this):this.preTestCallback(t,r,this))},getCost:function GetCost$1(t,r){return"number"==typeof this.costCallback?this.costCallback:this.costCallbackScope?this.costCallback.call(this.costCallbackScope,t,this,r):this.costCallback(t,this,r)},isInCone:function IsInCone(t){if(void 0===this.cone)return!0;var r=this.board,o=this.chessData.tileXYZ;return 0===this.coneMode?r.isDirectionInCone(o,t,this.face,this.cone):r.isAngleInCone(o,t,this.faceAngle,this.coneRad)},isPathVisible:function IsPathVisible(t,r){if(!1===this.preTest(t,r))return!1;if(void 0===this.costCallback)return!0;for(var o,a,h=this.chessData.tileXYZ,d=!1,T=1,S=t.length;T<S;T++)if(o=t[T],!le(h,o)){if(d)return!1;if((a=this.getCost(o,t))!==Zs){if(r!==Ks&&(r-=a)<0)return!1}else d=!0}return!0},isInLOS:function IsInLOS(t,r,o){if(r!==Js&&r<=0)return!1;var a=this.board,h=a.chessToTileXYZ(t);if(!this.isInCone(h))return!1;void 0===o&&(o=this.chessData.tileXYZ),this.debugLog&&console.log("Visible test from ("+o.x+","+o.y+") to ("+h.x+","+h.y+")");var d,T,S,A=a.tileXYToWorldXY(o.x,o.y,!0),P=A.x,O=A.y,D=(A=a.tileXYToWorldXY(h.x,h.y,!0)).x,L=A.y,I=te(P,O,D,L);I+=Math.PI/2;var B=P+(d=Qs*Math.cos(I)),N=O+(T=Qs*Math.sin(I)),G=D+d,Y=L+T;if(a.lineToTileXYArray(B,N,G,Y,to),this.debugLog&&console.log("Line 0: "+JSON.stringify(to)),S=this.isPathVisible(to,r))return to.length=0,$s(this.debugGraphics,this.debugVisibleLineColor,P,O,D,L),!0;I+=Math.PI;B=P+(d=Qs*Math.cos(I)),N=O+(T=Qs*Math.sin(I)),G=D+d,Y=L+T;return a.lineToTileXYArray(B,N,G,Y,eo),this.debugLog&&console.log("Line 1: "+JSON.stringify(eo)),function AreTileXYArrayEqual(t,r){if(t.length!==r.length)return!1;for(var o=0,a=t.length;o<a;o++)if(!le(t[o],r[o]))return!1;return!0}(to,eo)||(S=this.isPathVisible(eo,r)),to.length=0,eo.length=0,$s(this.debugGraphics,S?this.debugVisibleLineColor:this.debugInvisibleLineColor,P,O,D,L),S},LOS:function LOS(t,r,a,h){if(o(t)){zt(r)?(h=a,a=r,r=void 0):o(r)&&(h=r,r=void 0,a=void 0),o(a)&&(h=a,a=void 0),void 0===h&&(h=[]);for(var d=0,T=t.length;d<T;d++)S=t[d],this.isInLOS(S,r,a)&&h.push(S);return h}var S=t;return this.isInLOS(S,r,a)},findFOV:function FindFOV(t,r,a){zt(t)?(a=r,r=t,t=void 0):o(t)&&(a=t,r=void 0,t=void 0),o(r)&&(a=r,r=void 0),void 0===a&&(a=[]);var h,d,T=this.board,S=this.chessData.tileXYZ,A=1;do{h=!1,T.ringToTileXYArray(S,A,io);for(var P=0,O=io.length;P<O;P++)d=io[P],this.isInLOS(d,t,r)&&(h=!0,a.push(d));A++,io.length=0}while(h);return a}},ro=qs.BLOCKER,so=qs.INFINITY,oo=function(t){_inherits(FieldOfView,t);var r=_createSuper(FieldOfView);function FieldOfView(t,o){var a;return _classCallCheck(this,FieldOfView),(a=r.call(this,t,{eventEmitter:!1})).chessData=qt(t),a.resetFromJSON(o),a}return _createClass(FieldOfView,[{key:"resetFromJSON",value:function resetFromJSON(t){var r=Dt(t,"occupiedTest",!1),o=Dt(t,"blockerTest",!1),a=Dt(t,"edgeBlockerTest",!1),h=Dt(t,"preTestCallback",void 0),d=Dt(t,"preTestCallbackScope",void 0),T=Dt(t,"costCallback",void 0),S=Dt(t,"costCallbackScope",void 0);return void 0===T&&(T=Dt(t,"cost",void 0)),this.setFace(Dt(t,"face",0)),this.setConeMode(Dt(t,"coneMode",0)),this.setCone(Dt(t,"cone",void 0)),this.setOccupiedTest(r),this.setBlockerTest(o),this.setEdgeBlockerTest(a),this.setPreTestFunction(h,d),this.setCostFunction(T,S),this.setDebugGraphics(Dt(t,"debug.graphics",void 0)),this.setDebugLineColor(Dt(t,"debug.visibleLineColor",65280),Dt(t,"debug.invisibleLineColor",16711680)),this.setDebugLog(Dt(t,"debug.log",!1)),this}},{key:"shutdown",value:function shutdown(t){this.isShutdown||(this.debugGraphics=void 0,this.chessData=void 0,_get(_getPrototypeOf(FieldOfView.prototype),"shutdown",this).call(this,t))}},{key:"face",get:function get(){return this._face},set:function set(t){if(t=this.board.grid.directionNormalize(t),this._face=t,0===this.coneMode);else{var r=this.board.angleToward(this.chessData.tileXYZ,t);this.faceAngle=ee(r)}}},{key:"setFace",value:function setFace(t){return this.face=t,this}},{key:"cone",get:function get(){return this._cone},set:function set(t){this._cone=t,void 0!==t&&(0===this.coneMode||(this.coneRad=Rn(t)))}},{key:"setConeMode",value:function setConeMode(t){return"string"==typeof t&&(t=ao[t]),this.coneMode=t,this}},{key:"setCone",value:function setCone(t){return this.cone=t,this}},{key:"setOccupiedTest",value:function setOccupiedTest(t){return void 0===t&&(t=!0),this.occupiedTest=t,this}},{key:"setBlockerTest",value:function setBlockerTest(t){return void 0===t&&(t=!0),this.blockerTest=t,this}},{key:"setEdgeBlockerTest",value:function setEdgeBlockerTest(t){return void 0===t&&(t=!0),this.edgeBlockerTest=t,this}},{key:"setCostFunction",value:function setCostFunction(t,r){return this.costCallback=t,this.costCallbackScope=r,this}},{key:"setPreTestFunction",value:function setPreTestFunction(t,r){return this.preTestCallback=t,this.preTestCallbackScope=r,this}},{key:"setDebugGraphics",value:function setDebugGraphics(t){return this.debugGraphics=t,this}},{key:"setDebugLineColor",value:function setDebugLineColor(t,r){return this.debugVisibleLineColor=t,this.debugInvisibleLineColor=r,this}},{key:"setDebugLog",value:function setDebugLog(t){return void 0===t&&(t=!0),this.debugLog=t,this}},{key:"clearDebugGraphics",value:function clearDebugGraphics(){return this.debugGraphics&&this.debugGraphics.clear(),this}},{key:"BLOCKER",get:function get(){return ro}},{key:"INFINITY",get:function get(){return so}},{key:"board",get:function get(){return this.chessData.board}}]),FieldOfView}(Xt),ao={direction:0,angle:1};Object.assign(oo.prototype,no),Rt.register("fieldOfView",(function(t,r){return new oo(t,r)})),Nr(window,"RexPlugins.Board.FieldOfView",oo);var ho=function CreateTileData(t,r,o){return{x:t,y:r,direction:o}},lo=-1,uo=lo,co={getPath:function GetPath(t,r){if(void 0===r&&(r=[]),null===this.board)return r;for(var o,a,h=this.chessData.tileXYZ,d=ho(h.x,h.y,this.face);t>0&&null!==(o=this.getNextTile(d,this.preTileXY));)(a=this.getCost(o,d))===uo&&(a=t),o.cost=a,t>=a&&r.push(o),t-=a,this.preTileXY=d,d=o;for(var T=r.length-1;T>=0&&0===r[T].cost;T--)r.length=T;return r},getNextTile:function GetNextTile(t,r){for(var o,a,h=this.board,d=h.grid.allDirections,T=null,S=null,A=[],P=null,O=0,D=d.length;O<D;O++)null!==(o=h.getNeighborTileXY(t,d[O],!0))&&h.contains(o.x,o.y,this.pathTileZ)&&(P=ho(o.x,o.y,d[O]),d[O]===t.direction&&(T=P),void 0!==r&&le(o,r)?S=P:A.push(P));if(null===S&&0===A.length)a=null;else if(null===S&&1===A.length)a=A[0];else if(null!==S&&0===A.length)a=S;else if(1===this.pickMode)null!==S&&A.push(S),a=Le(A);else a=null!==T?T:Le(A);return a},getCost:function GetCost(t,r){return"number"==typeof this.costCallback?this.costCallback:this.costCallbackScope?this.costCallback.call(this.costCallbackScope,t,r,this):this.costCallback(t,r,this)}},fo=null,po=lo,go=function(t){_inherits(Monopoly,t);var r=_createSuper(Monopoly);function Monopoly(t,o){var a;return _classCallCheck(this,Monopoly),(a=r.call(this,t,{eventEmitter:!1})).chessData=qt(t),a.resetFromJSON(o),a}return _createClass(Monopoly,[{key:"resetFromJSON",value:function resetFromJSON(t){this.preTileXY=Dt(t,"preTileXY",void 0);var r=Dt(t,"costCallback",void 0),o=Dt(t,"costCallbackScope",void 0);return void 0===r&&(r=Dt(t,"cost",1)),this.setFace(Dt(t,"face",0)),this.setPathMode(Dt(t,"pathMode",0)),this.setPathTileZ(Dt(t,"pathTileZ",0)),this.setCostFunction(r,o),this}},{key:"shutdown",value:function shutdown(t){this.isShutdown||(this.chessData=void 0,_get(_getPrototypeOf(Monopoly.prototype),"shutdown",this).call(this,t))}},{key:"setFace",value:function setFace(t){return t=this.board.grid.directionNormalize(t),this.face=t,this}},{key:"setPathMode",value:function setPathMode(t){return"string"==typeof t&&(t=vo[t]),this.pathMode=t,this}},{key:"setCostFunction",value:function setCostFunction(t,r){return this.costCallback=t,this.costCallbackScope=r,this}},{key:"setPathTileZ",value:function setPathTileZ(t){return void 0===t&&(t=!0),this.pathTileZ=t,this}},{key:"BLOCKER",get:function get(){return fo}},{key:"STOP",get:function get(){return po}},{key:"board",get:function get(){return this.chessData.board}}]),Monopoly}(Xt);Object.assign(go.prototype,co);var vo={forward:0,random:1};Rt.register("monopoly",(function(t,r){return new go(t,r)})),Nr(window,"RexPlugins.Board.Monopoly",go);var mo=Phaser.GameObjects.Zone,yo=Phaser.Utils.Array.Add,xo=Phaser.Utils.Array.Remove,To=function(t){_inherits(Base,t);var r=_createSuper(Base);function Base(t,o,a,h,d){var T;return _classCallCheck(this,Base),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=1),void 0===d&&(d=1),(T=r.call(this,t,o,a,h,d)).children=[],T}return _createClass(Base,[{key:"destroy",value:function destroy(t){if(this.scene){if(t)for(var r,o=this.children.length-1;o>=0;o--)(r=this.children[o]).parentContainer||r.displayList||r.destroy(t);this.clear(!t),_get(_getPrototypeOf(Base.prototype),"destroy",this).call(this,t)}}},{key:"contains",value:function contains(t){return-1!==this.children.indexOf(t)}},{key:"add",value:function add(t){var r=this;return yo(this.children,t,0,(function(t){t.once("destroy",r.onChildDestroy,r)}),this),this}},{key:"remove",value:function remove(t,r){var o=this;return xo(this.children,t,(function(t){t.off("destroy",o.onChildDestroy,o),r&&t.destroy()})),this}},{key:"onChildDestroy",value:function onChildDestroy(t,r){this.remove(t,!1)}},{key:"clear",value:function clear(t){for(var r,o=0,a=this.children.length;o<a;o++)(r=this.children[o]).off("destroy",this.onChildDestroy,this),t&&r.destroy();return this.children.length=0,this}}]),Base}(mo),bo=Phaser.GameObjects.Components;Phaser.Class.mixin(To,[bo.Alpha,bo.Flip]);var wo=function GetParent(t,r){var o;if(void 0===r)t.hasOwnProperty("rexContainer")&&(o=t.rexContainer.parent);else for(o=wo(t);o&&o.name!==r;)o=wo(o);return o},So=Phaser.Math.DegToRad,Co=Phaser.Math.RadToDeg,Ao=function GetLocalState(t){if(!t.hasOwnProperty("rexContainer")){var r={parent:null,self:null,x:0,y:0,syncPosition:!0,rotation:0,syncRotation:!0,scaleX:0,scaleY:0,syncScale:!0,alpha:0,syncAlpha:!0,visible:!0,active:!0};Object.defineProperty(r,"angle",{get:function get(){return Co(this.rotation)},set:function set(t){this.rotation=So(t)}}),Object.defineProperty(r,"displayWidth",{get:function get(){return t.width*this.scaleX},set:function set(r){this.scaleX=r/t.width}}),Object.defineProperty(r,"displayHeight",{get:function get(){return t.height*this.scaleY},set:function set(r){this.scaleY=r/t.height}}),t.rexContainer=r}return t.rexContainer},Eo={setParent:function setParent(t,r){void 0===r&&(r=this);var o=Ao(t);return r?(o.parent=r,o.self=t):(o.parent=null,o.self=null),this},getParent:function getParent(t,r){return"string"==typeof t&&(r=t,t=void 0),void 0===t&&(t=this),wo(t,r)},getTopmostParent:function getTopmostParent(t){return void 0===t&&(t=this),function GetTopmostParent(t){for(var r=wo(t);r;)t=r,r=wo(r);return t}(t)}},Mo=Phaser.Utils.Objects.GetValue,_o=To.prototype.add,Po=function Add(t,r){this.setParent(t);var o=Ao(t);return ko(o,r),this.resetChildState(t).updateChildVisible(t).updateChildActive(t).updateChildScrollFactor(t).updateChildMask(t),_o.call(this,t),this},Ro=function AddLocal(t,r){this.setParent(t);var o=Ao(t);return ko(o,r),o.x=t.x,o.y=t.y,o.rotation=t.rotation,o.scaleX=t.scaleX,o.scaleY=t.scaleY,o.alpha=t.alpha,o.visible=t.visible,o.active=t.active,this.updateChildPosition(t).updateChildAlpha(t).updateChildVisible(t).updateChildActive(t).updateChildScrollFactor(t).updateChildMask(t),_o.call(this,t),this},ko=function SetupSyncFlags(t,r){t.syncPosition=Mo(r,"syncPosition",!0),t.syncRotation=Mo(r,"syncRotation",!0),t.syncScale=Mo(r,"syncScale",!0),t.syncAlpha=Mo(r,"syncAlpha",!0)},Oo={add:function add(t){return Array.isArray(t)?this.addMultiple(t):Po.call(this,t),this},pin:function pin(t,r){return Array.isArray(t)?this.addMultiple(t,r):Po.call(this,t,r),this},addMultiple:function addMultiple(t){for(var r=0,o=t.length;r<o;r++)Po.call(this,t[r]);return this},addLocal:function addLocal(t){return Array.isArray(t)?this.addMultiple(t):Ro.call(this,t),this},pinLocal:function pinLocal(t,r){return Array.isArray(t)?this.addMultiple(t,r):Ro.call(this,t,r),this},addLocalMultiple:function addLocalMultiple(t){for(var r=0,o=t.length;r<o;r++)Ro.call(this,t[r]);return this}},Do=To.prototype.remove,Lo=To.prototype.clear,Io={remove:function remove(t,r){return wo(t)!==this||(this.setParent(t,null),Do.call(this,t,r)),this},clear:function clear(t){for(var r=0,o=this.children.length;r<o;r++)this.setParent(this.children[r],null);return Lo.call(this,t),this}},Fo={getLocalState:function getLocalState(t){return Ao(t)},resetChildState:function resetChildState(t){return this.resetChildPositionState(t).resetChildVisibleState(t).resetChildAlphaState(t).resetChildActiveState(t),this},resetChildrenState:function resetChildrenState(t){for(var r=0,o=t.length;r<o;r++)this.resetChildState(t[r]);return this},syncProperties:function syncProperties(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}},Bo=Phaser.Math.RotateAround,No={worldToLocal:function worldToLocal(t){return t.x-=this.x,t.y-=this.y,Bo(t,0,0,-this.rotation),t.x/=this.scaleX,t.y/=this.scaleY,t},localToWorld:function localToWorld(t){return t.x*=this.scaleX,t.y*=this.scaleY,Bo(t,0,0,this.rotation),t.x+=this.x,t.y+=this.y,t}},Go=function GetScale(t,r){return t===r?1:t/r},Yo={updateChildPosition:function updateChildPosition(t){t.isRexContainerLite&&(t.syncChildrenEnable=!1);var r=Ao(t),o=r.parent;return r.syncPosition&&(t.x=r.x,t.y=r.y,o.localToWorld(t)),r.syncRotation&&(t.rotation=r.rotation+o.rotation),r.syncScale&&(t.scaleX=r.scaleX*o.scaleX,t.scaleY=r.scaleY*o.scaleY),t.isRexContainerLite&&(t.syncChildrenEnable=!0,t.syncPosition()),this},syncPosition:function syncPosition(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState:function resetChildPositionState(t){var r=Ao(t),o=r.parent;return r.x=t.x,r.y=t.y,o.worldToLocal(r),r.scaleX=Go(t.scaleX,o.scaleX),r.scaleY=Go(t.scaleY,o.scaleY),r.rotation=t.rotation-o.rotation,this},setChildPosition:function setChildPosition(t,r,o){return t.x=r,t.y=o,this.resetChildPositionState(t),this},setChildLocalPosition:function setChildLocalPosition(t,r,o){var a=Ao(t);return a.x=r,a.y=o,this.updateChildPosition(t),this},resetLocalPositionState:function resetLocalPositionState(){var t=Ao(this).parent;return t&&t.resetChildPositionState(this),this}},Xo=Phaser.Math.DegToRad,Uo={updateChildRotation:function updateChildRotation(t){var r=Ao(t),o=r.parent;return r.syncRotation&&(t.rotation=o.rotation+r.rotation),this},syncRotation:function syncRotation(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildRotation,this),this},resetChildRotationState:function resetChildRotationState(t){var r=Ao(t),o=r.parent;return r.rotation=t.rotation-o.rotation,this},setChildRotation:function setChildRotation(t,r){return t.rotation=r,this.resetChildRotationState(t),this},setChildAngle:function setChildAngle(t,r){return t.angle=r,this.resetChildRotationState(t),this},setChildLocalRotation:function setChildLocalRotation(t,r){return Ao(t).rotation=r,this.updateChildRotation(t),this},setChildLocalAngle:function setChildLocalAngle(t,r){return Ao(t).rotation=Xo(r),this.updateChildRotation(t),this},resetLocalRotationState:function resetLocalRotationState(){var t=Ao(this).parent;return t&&t.resetChildRotationState(this),this}},zo={updateChildScale:function updateChildScale(t){var r=Ao(t),o=r.parent;return r.syncScale&&(t.scaleX=o.scaleX*r.scaleX,t.scaleY=o.scaleY*r.scaleY),this},syncScale:function syncScale(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScale,this),this},resetChildScaleState:function resetChildScaleState(t){var r=Ao(t),o=r.parent;return r.scaleX=Go(t.scaleX,o.scaleX),r.scaleY=Go(t.scaleY,o.scaleY),this},setChildScale:function setChildScale(t,r,o){return void 0===o&&(o=r),t.scaleX=r,t.scaleY=o,this.resetChildScaleState(t),this},setChildLocalScale:function setChildLocalScale(t,r,o){void 0===o&&(o=r);var a=Ao(t);return a.scaleX=r,a.scaleY=o,this.updateChildScale(t),this},setChildDisplaySize:function setChildDisplaySize(t,r,o){return t.setDisplaySize(r,o),this.resetChildScaleState(t),this},resetLocalScaleState:function resetLocalScaleState(){var t=Ao(this).parent;return t&&t.resetChildScaleState(this),this}},Vo={updateChildVisible:function updateChildVisible(t){var r=Ao(t),o=r.parent,a=!r.hasOwnProperty("maskVisible")||r.maskVisible;return t.visible=o.visible&&r.visible&&a,this},syncVisible:function syncVisible(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState:function resetChildVisibleState(t){var r=Ao(t);return r.hasOwnProperty("maskVisible")&&delete r.maskVisible,r.visible=t.visible,this},setChildVisible:function setChildVisible(t,r){return this.setChildLocalVisible(t,r),this},setChildLocalVisible:function setChildLocalVisible(t,r){return void 0===r&&(r=!0),Ao(t).visible=r,this.updateChildVisible(t),this},setChildMaskVisible:function setChildMaskVisible(t,r){return void 0===r&&(r=!0),Ao(t).maskVisible=r,this.updateChildVisible(t),this},resetLocalVisibleState:function resetLocalVisibleState(){var t=Ao(this).parent;return t&&t.resetChildVisibleState(this),this}},Wo={updateChildAlpha:function updateChildAlpha(t){var r=Ao(t),o=r.parent;return r.syncAlpha&&(t.alpha=o.alpha*r.alpha),this},syncAlpha:function syncAlpha(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState:function resetChildAlphaState(t){var r=Ao(t),o=r.parent;return r.alpha=Go(t.alpha,o.alpha),this},setChildAlpha:function setChildAlpha(t,r){return t.alpha=r,this.resetChildAlphaState(t),this},setChildLocalAlpha:function setChildLocalAlpha(t,r){return Ao(t).alpha=r,this.updateChildAlpha(t),this},resetLocalAlphaState:function resetLocalAlphaState(){var t=Ao(this).parent;return t&&t.resetChildAlphaState(this),this}},Ho={updateChildActive:function updateChildActive(t){var r=Ao(t),o=r.parent;return t.active=o.active&&r.active,this},syncActive:function syncActive(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState:function resetChildActiveState(t){return Ao(t).active=t.active,this},setChildActive:function setChildActive(t,r){return t.active=r,this.resetChildActiveState(t),this},setChildLocalActive:function setChildLocalActive(t,r){return void 0===r&&(r=!0),Ao(t).active=r,this.updateChildActive(t),this},resetLocalActiveState:function resetLocalActiveState(){var t=Ao(this).parent;return t&&t.resetChildActiveState(this),this}},jo={updateChildScrollFactor:function updateChildScrollFactor(t){var r=Ao(t).parent;return t.setScrollFactor(r.scrollFactorX,r.scrollFactorY),this},syncScrollFactor:function syncScrollFactor(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}},qo={updateChildMask:function updateChildMask(t){return null==this.mask||(this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask)!==t&&(t.mask=this.mask),this},syncMask:function syncMask(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask:function setMask(t){return this.mask=t,this},clearMask:function clearMask(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this}},Zo=function SortGameObjectsByDepth(t,r){if(0===t.length)return t;void 0===r&&(r=!1);var o=t[0].scene.sys.displayList;return o.depthSort(),r?t.sort((function(t,r){return o.getIndex(r)-o.getIndex(t)})):t.sort((function(t,r){return o.getIndex(t)-o.getIndex(r)})),t},Ko={setDepth:function setDepth(t,r){if(this.depth=t,!r&&this.children)for(var o=this.getAllChildren(),a=0,h=o.length;a<h;a++)o[a].depth=t;return this},swapDepth:function swapDepth(t){var r=this.depth,o=t.depth;return this.setDepth(o),t.setDepth(r),this},incDepth:function incDepth(t){if(this.depth+=t,this.children)for(var r=this.getAllChildren(),o=0,a=r.length;o<a;o++)r[o].depth+=t;return this},moveDepthBelow:function moveDepthBelow(t){var r=t.scene.children,o=this.getAllChildren([this]);Zo(o);for(var a=0,h=o.length;a<h;a++){var d=o[a];if(r.exists(d)){r.moveBelow(t,d);break}}return this},moveDepthAbove:function moveDepthAbove(t){var r=t.scene.children,o=this.getAllChildren([this]);Zo(o,!0);for(var a=0,h=o.length;a<h;a++){var d=o[a];if(r.exists(d)){r.moveAbove(t,d);break}}return this}},Jo=function DepthFirstSearch(t,r){if(!r(t)&&t.isRexContainerLite)for(var o=t.children,a=0,h=o.length;a<h;a++)DepthFirstSearch(o[a],r)},Qo=function BreadthFirstSearch(t,r){for(var o=[t];o.length>0;){var a=o.shift();!r(a)&&a.isRexContainerLite&&o.push.apply(o,_toConsumableArray2(a.children))}},$o=Phaser.Utils.Array,ta={getChildren:function getChildren(t){if(t)for(var r=0,o=this.children.length;r<o;r++)t.push(this.children[r]);else t=this.children;return t},getAllChildren:function getAllChildren(t){void 0===t&&(t=[]);var r=this;return Qo(r,(function(o){o!==r&&t.push(o)})),t},getAllVisibleChildren:function getAllVisibleChildren(t){void 0===t&&(t=[]);var r=this;return Qo(r,(function(o){if(o!==r)return!o.visible||void t.push(o)})),t},bfs:function bfs(t,r){return void 0===r&&(r=this),Qo(r,t),this},dfs:function dfs(t,r){return void 0===r&&(r=this),Jo(r,t),this},contains:function contains(t){var r=wo(t);return!!r&&(r===this||this.contains(r))},getByName:function getByName(t,r){if(r){for(var o,a,h=[this];h.length;)for(var d=0,T=(o=h.shift()).children.length;d<T;d++){if((a=o.children[d]).name===t)return a;a.isRexContainerLite&&h.push(a)}return null}return $o.GetFirst(this.children,"name",t)},getRandom:function getRandom(t,r){return $o.GetRandom(this.children,t,r)},getFirst:function getFirst(t,r,o,a){return $o.GetFirstElement(this.children,t,r,o,a)},getAll:function getAll(t,r,o,a){return $o.GetAll(this.children,t,r,o,a)},count:function count(t,r,o,a){return $o.CountAllMatching(this.children,t,r,o,a)},swap:function swap(t,r){return $o.Swap(this.children,t,r),this},setAll:function setAll(t,r,o,a){return $o.SetAll(this.children,t,r,o,a),this}},ea=function GetLocalStates(t){for(var r=[],o=0,a=t.length;o<a;o++){var h=t[o];h.hasOwnProperty("rexContainer")&&r.push(h.rexContainer)}return r},ia=function UpdateChild(t,r,o){if(o.parent){var a=o.parent,h=o.self;switch(r){case"x":case"y":a.updateChildPosition(h);break;case"angle":case"rotation":a.updateChildRotation(h);break;case"scaleX":case"scaleY":case"displayWidth":case"displayHeight":a.updateChildScale(h);break;case"alpha":a.updateChildAlpha(h);break;default:a.updateChildPosition(h),a.updateChildRotation(h),a.updateChildScale(h),a.updateChildAlpha(h)}}else t.remove()},na={tweenChild:function tweenChild(t){var r=t.targets;Array.isArray(r)||(r=[r]);var o=this.scene||function GetScene(t){for(var r=0,o=t.length;r<o;r++){var a=t[r].scene;if(a)return a}return null}(r);if(o){t.targets=ea(r);var a=o.tweens.add(t);return a.on("update",ia),a}},createTweenChildConfig:function createTweenChildConfig(t){var r=t.targets;r&&(Array.isArray(r)||(r=[r]),t.targets=ea(r));var o=t.onUpdate;return t.onUpdate=function(t,r){o&&o(t,r),ia(t,void 0,r)},t},tween:function tween(t){var r=this.scene;return t.targets||(t.targets=this),r.tweens.add(t)},timelineChild:function timelineChild(t){var r=t.targets;r&&(Array.isArray(r)||(r=[r]),t.targets=ea(r));for(var o=t.tweens,a=0,h=o.length;a<h;a++)o[a]=this.createTweenChildConfig(o[a]);return this.scene.tweens.timeline(t)}},ra=function AddToLayer(t){var r=this.getAllChildren([this]);return Zo(r),t.add(r),this},sa={addToLayer:ra,addToContainer:ra},oa=Phaser.Math.RotateAround,aa={changeOrigin:function ChangeOrigin(t,r){this.syncChildrenEnable=!1,function ChangeOrigin$1(t,r,o){void 0===o&&(o=r);var a={x:(r-t.originX)*t.displayWidth,y:(o-t.originY)*t.displayHeight};oa(a,0,0,t.rotation),t.originX=r,t.originY=o,t.x=t.x+a.x,t.y=t.y+a.y}(this,t,r),this.syncChildrenEnable=!0;for(var o=this.getAllChildren(),a=0,h=o.length;a<h;a++)this.resetChildPositionState(o[a]);return this}};Object.assign(aa,Eo,Oo,Io,Fo,No,Yo,Uo,zo,Vo,Wo,Ho,jo,qo,Ko,ta,na,sa);var ha=function(t){_inherits(ContainerLite,t);var r=_createSuper(ContainerLite);function ContainerLite(t,o,a,h,d,T){var S;return _classCallCheck(this,ContainerLite),(S=r.call(this,t,o,a,h,d)).type="rexContainerLite",S.isRexContainerLite=!0,S.syncChildrenEnable=!0,S._active=!0,S._mask=null,S._scrollFactorX=1,S._scrollFactorY=1,T&&S.add(T),S}return _createClass(ContainerLite,[{key:"destroy",value:function destroy(t){this.scene&&(this.syncChildrenEnable=!1,_get(_getPrototypeOf(ContainerLite.prototype),"destroy",this).call(this,t))}},{key:"resize",value:function resize(t,r){return this.setSize(t,r),this}},{key:"x",get:function get(){return this._x},set:function set(t){this._x!==t&&(this._x=t,this.syncPosition())}},{key:"y",get:function get(){return this._y},set:function set(t){this._y!==t&&(this._y=t,this.syncPosition())}},{key:"rotation",get:function get(){return _get(_getPrototypeOf(ContainerLite.prototype),"rotation",this)},set:function set(t){this.rotation!==t&&(_set(_getPrototypeOf(ContainerLite.prototype),"rotation",t,this,!0),this.syncPosition())}},{key:"scaleX",get:function get(){return _get(_getPrototypeOf(ContainerLite.prototype),"scaleX",this)},set:function set(t){this.scaleX!==t&&(_set(_getPrototypeOf(ContainerLite.prototype),"scaleX",t,this,!0),this.syncPosition())}},{key:"scaleY",get:function get(){return _get(_getPrototypeOf(ContainerLite.prototype),"scaleY",this)},set:function set(t){this.scaleY!==t&&(_set(_getPrototypeOf(ContainerLite.prototype),"scaleY",t,this,!0),this.syncPosition())}},{key:"scale",get:function get(){return _get(_getPrototypeOf(ContainerLite.prototype),"scale",this)},set:function set(t){this.scale!==t&&(_set(_getPrototypeOf(ContainerLite.prototype),"scale",t,this,!0),this.syncPosition())}},{key:"visible",get:function get(){return _get(_getPrototypeOf(ContainerLite.prototype),"visible",this)},set:function set(t){_get(_getPrototypeOf(ContainerLite.prototype),"visible",this)!==t&&(_set(_getPrototypeOf(ContainerLite.prototype),"visible",t,this,!0),this.syncVisible())}},{key:"alpha",get:function get(){return _get(_getPrototypeOf(ContainerLite.prototype),"alpha",this)},set:function set(t){_get(_getPrototypeOf(ContainerLite.prototype),"alpha",this)!==t&&(_set(_getPrototypeOf(ContainerLite.prototype),"alpha",t,this,!0),this.syncAlpha())}},{key:"active",get:function get(){return this._active},set:function set(t){this._active!==t&&(this._active=t,this.syncActive())}},{key:"mask",get:function get(){return this._mask},set:function set(t){this._mask!==t&&(this._mask=t,this.syncMask())}},{key:"scrollFactorX",get:function get(){return this._scrollFactorX},set:function set(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}},{key:"scrollFactorY",get:function get(){return this._scrollFactorY},set:function set(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}},{key:"list",get:function get(){return this.children}}],[{key:"GetParent",value:function GetParent(t){return wo(t)}}]),ContainerLite}(To);Object.assign(ha.prototype,aa);var la={x:0,y:0,z:0},ua=function OnPointerDown(t){this.input.enable&&(t.isDown&&(null===this.input.pointer&&(this.input.pointer=t),ca.call(this,t)&&da.call(this,t)))},ca=function OnTouchTileStart(t){var r=this.grid;r.saveOrigin(),r.setOriginPosition(this.x,this.y);var o=this.board.worldXYToTileXY(t.x,t.y,!0),a=o.x,h=o.y;r.restoreOrigin(),this.input.tilePosition.x=a,this.input.tilePosition.y=h;var d=this.board.tileXYToChessArray(a,h,fa),T=d.length>0;if(T){for(var S,A=0,P=d.length;A<P;A++)(S=d[A]).emit&&S.emit("miniboard.pointerdown",t),this.emit("gameobjectdown",t,S);this.emit("pointerdown",t,this)}return fa.length=0,T},da=function OnDragStart(t){var r=this.input.drag;if(1!==r.state){var o=r.position;o.x=t.x-this.x,o.y=t.y-this.y,r.state=1,this.emit("dragstart",t,o.x,o.y)}},fa=[],pa=function DragEnd(t){var r=this.input.drag;if(0!==r.state){void 0===t&&(t=this.input.pointer);var o=r.position,a=t.x-o.x,h=t.y-o.y;return r.state=0,this.emit("dragend",t,a,h),this}},ga=function OnPointerUp(t){this.input.enable&&(va.call(this,t),pa.call(this,t),this.input.pointer===t&&(this.input.pointer=null))},va=function OnTouchTileEnd(t){var r=this.grid;r.saveOrigin(),r.setOriginPosition(this.x,this.y);var o=this.board.worldXYToTileXY(t.x,t.y,!0),a=o.x,h=o.y;r.restoreOrigin(),this.input.tilePosition.x=a,this.input.tilePosition.y=h;var d=this.board.tileXYToChessArray(a,h,ma),T=d.length>0;if(T){for(var S,A=0,P=d.length;A<P;A++)(S=d[A]).emit&&S.emit("miniboard.pointerup",t),this.emit("gameobjectup",t,S);this.emit("pointerup",t,this)}return ma.length=0,T},ma=[],ya=function OnPointerMove(t){this.input.enable&&(xa.call(this,t),Ta.call(this,t))},xa=function OnTouchTileMove(t){var r=this.grid;r.saveOrigin(),r.setOriginPosition(this.x,this.y);var o=this.board.worldXYToTileXY(t.x,t.y,!0),a=o.x,h=o.y;if(r.restoreOrigin(),this.input.tilePosition.x!==a||this.input.tilePosition.y!==h){this.input.tilePosition.x=a,this.input.tilePosition.y=h;var d=this.board.tileXYToChessArray(a,h,ba),T=d.length>0;if(T){for(var S,A=0,P=d.length;A<P;A++)(S=d[A]).emit&&S.emit("miniboard.pointermove",t),this.emit("gameobjectmove",t,S);this.emit("pointermove",t,this)}else this.input.pointer===t&&(this.input.pointer=null);ba.length=0,0===this.input.drag.state&&(this.input.pointer===t?T||(this.input.pointer=null):null===this.input.pointer&&(this.input.pointer=t))}},Ta=function OnDrag(t){var r=this.input.drag;if(0!==r.state){var o=r.position,a=t.x-o.x,h=t.y-o.y;this.emit("drag",t,a,h)}},ba=[],wa=function Mirror$1(t,r,o){var a,h;for(var d in void 0===t?t=1:"string"==typeof t&&(t=Sa[t]),void 0===r&&(r=this.tileXYZMap),void 0===o&&(o={}),r)a=r[d],(h=this.board.mirror(a,t)).z=a.z,o[d]=h;return o},Sa={x:1,y:2,"x&y":3},Ca=function ResetChessTileXYZ(t){var r;for(var o in this.removeAllChess(),t)r=t[o],o=parseInt(o),this.addChess(o,r.x,r.y,r.z,!1);return this},Aa=function Rotate$2(t,r,o){var a,h;for(var d in void 0===t&&(t=0),void 0===r&&(r=this.tileXYZMap),void 0===o&&(o={}),r)a=r[d],(h=this.board.rotate(a,t)).z=a.z,o[d]=h;return o},Ea=function GetMinMaxTileXY(t,r){void 0===t&&(t=this.tileXYZMap),void 0===r?r={}:!0===r&&(r=Ma);var o,a=1/0,h=-1/0,d=1/0,T=-1/0;for(var S in this.tileXYZMap)(o=this.tileXYZMap[S]).x<a&&(a=o.x),o.x>h&&(h=o.x),o.y<d&&(d=o.y),o.y>T&&(T=o.y);return r.minX=a,r.minY=d,r.maxX=h,r.maxY=T,r},Ma={},_a=function Offset(t,r,o,a){var h,d;for(var T in void 0===o&&(o=this.tileXYZMap),void 0===a&&(a={}),o)h=o[T],(d=this.board.offset(h,t,r)).z=h.z,a[T]=d;return a},Pa={addChess:function AddChess(t,r,o,a){var h=this.grid;return h.saveOrigin(),h.setOriginPosition(this.x,this.y),this.board.addChess(t,r,o,a,!0),jt(t)&&(t=this.board.uidToChess(t)),this.add(t),h.restoreOrigin(),this},removeChess:function RemoveChess(t,r,o,a,h){return this.board.removeChess(t,r,o,a,h),this},removeAllChess:function RemoveAllChess(t){return this.board.removeAllChess(t),this},pullOutFromMainBoard:function PullOutFromMainBoard(){var t=this.mainBoard;if(null===t)return this;var r=this.tileXYZMap;for(var o in r)t.removeChess(parseInt(o));return this.setMainBoard(null),this},canPutOnMainBoard:function CanPutOnMainBoard(t,r,o,a){if(!t)return!1;var h,d,T;for(var S in void 0===a&&(a=this.tileXYZMap),a){if(h=a[S],d=t.offset(h,r,o,!0),!t.contains(d.x,d.y))return!1;if(this.putTestCallback){la.x=d.x,la.y=d.x,la.z=h.z;var A=this.board.uidToChess(S);T=this.putTestCallbackScpe?this.putTestCallback.call(this.putTestCallbackScpe,la,t,A):this.putTestCallback(la,t,A)}else T=t.contains(d.x,d.y,h.z);if(T)return!1}return!0},putOnMainBoard:function PutOnMainBoard(t,r,o,a){if(!t)return this;if(void 0===r){var h=t.worldXYToTileXY(this.x,this.y,!0);r=h.x,o=h.y}if(void 0===a&&(a=!0),this.pullOutFromMainBoard(),!this.canPutOnMainBoard(t,r,o))return this;this.setMainBoard(t,r,o);var d,T,S=this.tileXYZMap;for(var A in S)d=S[A],A=parseInt(A),T=t.offset(d,r,o,!0),t.addChess(A,T.x,T.y,d.z,!1);return a&&this.alignToMainBoard(t,r,o),this},putBack:function PutBack(){var t=this.lastMainBoardRef.mainBoard,r=this.lastMainBoardRef.tileX,o=this.lastMainBoardRef.tileY;return this.putOnMainBoard(t,r,o,!1),this},isOverlapping:function IsOverlapping(t,r){if(!t)return!1;var o;for(var a in this.tileXYZMap)if(o=this.board.uidToChess(a),t.isOverlappingPoint(o.x,o.y,r))return!0;return!1},alignToMainBoard:function AlignToMainBoard(t,r,o){if(!t)return this;if(void 0===r){var a=t.worldXYToTileXY(this.x,this.y,!0);r=a.x,o=a.y}return t.gridAlign(this,r,o),this},setInteractive:function SetInteractive(t){return void 0===t&&(t=!0),this.input||(this.input={enable:!0,tilePosition:{x:void 0,y:void 0},pointer:void 0,drag:{enable:!1,state:0,position:{x:void 0,y:void 0}}},this.scene.input.on("pointerdown",ua,this),this.scene.input.on("pointerup",ga,this),this.scene.input.on("pointermove",ya,this),this.once("destroy",(function(){this.scene&&(this.scene.input.off("pointerdown",ua,this),this.scene.input.off("pointerup",ga,this),this.scene.input.off("pointermove",ya,this))}),this)),this.input.enable=t,t||(this.input.pointer=null),this},setDraggable:function SetDraggable(t){return void 0===t&&(t=!0),this.setInteractive(),this.input.drag.enable=t,t||(this.input.drag.state=0),this},dragEnd:pa,setMainBoard:function SetMainBoard(t,r,o){return this.mainBoardRef.set(t,r,o),t&&this.lastMainBoardRef.set(t,r,o),this},canMirror:function CanMirror(t){if(null===this.mainBoard)return!0;var r=wa.call(this,t);return this.canPutOnMainBoard(this.mainBoard,tileX,tileY,r)},mirror:function Mirror(t){var r=null!=this.mainBoard;r&&this.pullOutFromMainBoard();var o=wa.call(this,t);if(r){var a=this.lastMainBoardRef.mainBoard,h=this.lastMainBoardRef.tileX,d=this.lastMainBoardRef.tileY;this.lastTransferResult=this.canPutOnMainBoard(a,h,d,o),this.lastTransferResult&&Ca.call(this,o),this.putBack()}else this.lastTransferResult=!0,Ca.call(this,o);return this},canRotate:function CanRotate(t){if(null===this.mainBoard)return!0;var r=Aa.call(this,t);return this.canPutOnMainBoard(this.mainBoard,tileX,tileY,r)},rotate:function Rotate$1(t){if(0===t)return this;var r=null!=this.mainBoard;r&&this.pullOutFromMainBoard();var o=Aa.call(this,t);if(r){var a=this.lastMainBoardRef.mainBoard,h=this.lastMainBoardRef.tileX,d=this.lastMainBoardRef.tileY;this.lastTransferResult=this.canPutOnMainBoard(a,h,d,o),this.lastTransferResult&&Ca.call(this,o),this.putBack()}else this.lastTransferResult=!0,Ca.call(this,o);return this.lastTransferResult&&this.setFace(this.face+t),this},canRotateTo:function CanRotateTo(t){return t-=this.face,this.canRotate(t)},rotateTo:function RotateTo$1(t){return t-=this.face,this.rotate(t),this},setOrigin:function SetOrigin(t,r){switch(t){case"center":t=.5,r=.5;break;case"top-left":case"left-top":t=0,r=0}void 0===t&&(t=.5),void 0===r&&(r=t);var o=Ea.call(this,void 0,!0),a=-Math.floor(he(o.minX,o.maxX,t)),h=-Math.floor(he(o.minY,o.maxY,r));if(0!==a||0!==h){var d=_a.call(this,a,h);Ca.call(this,d);var T=this.board.tileXYToWorldXY(a,h),S=this.board.tileXYToWorldXY(0,0);this.setPosition(this.x+(S.x-T.x),this.y+(S.y-T.y))}return this}},Ra=function(){function MainBoardReference(t){_classCallCheck(this,MainBoardReference),this.miniBoard=t,this.set(null)}return _createClass(MainBoardReference,[{key:"set",value:function set(t,r,o){t||(t=null,r=null,o=null),this.mainBoard=t,this.tileX=r,this.tileY=o}}]),MainBoardReference}(),ka=function(t){_inherits(MiniBoard,t);var r=_createSuper(MiniBoard);function MiniBoard(t,o,a,h){var d;_classCallCheck(this,MiniBoard),(d=r.call(this,t,o,a,0,0)).type="rexMiniBoard";var T={isBoard:!1,grid:Dt(h,"grid",void 0),infinity:!0,wrap:!1};return d.board=new Yn(t,T),d.mainBoardRef=new Ra,d.lastMainBoardRef=new Ra,d.resetFromJSON(h),d}return _createClass(MiniBoard,[{key:"resetFromJSON",value:function resetFromJSON(t){this.setFace(Dt(t,"face",0));var r=Dt(t,"draggable",void 0);return void 0!==r&&this.setDraggable(r),this.setPutTestCallback(Dt(t,"putTestCallback",void 0),Dt(t,"putTestCallbackScpe",void 0)),this.lastTransferResult=Dt(t,"lastTransferResult",void 0),this}},{key:"destroy",value:function destroy(t){this.scene&&(this.clear(!t),this.board.shutdown(t),this.board=void 0,this.setPutTestCallback(void 0,void 0),_get(_getPrototypeOf(MiniBoard.prototype),"destroy",this).call(this,t))}},{key:"setFace",value:function setFace(t){return this.face=this.board.grid.directionNormalize(t),this}},{key:"mainBoard",get:function get(){return this.mainBoardRef.mainBoard}},{key:"tileX",get:function get(){return this.mainBoardRef.tileX}},{key:"tileY",get:function get(){return this.mainBoardRef.tileY}},{key:"grid",get:function get(){return this.board.grid}},{key:"tileXYZMap",get:function get(){return this.board.boardData.UIDToXYZ}},{key:"setPutTestCallback",value:function setPutTestCallback(t,r){return this.putTestCallback=t,this.putTestCallbackScpe=r,this}}]),MiniBoard}(ha);Object.assign(ka.prototype,Pa),Rt.register("miniBoard",(function(t,r,o){var a=new ka(this.scene,t,r,o);return this.scene.add.existing(a),a})),Nr(window,"RexPlugins.Board.MiniBoard",ka);var Oa={hexagon:function GetHexagonMap(t,r,o){void 0===o&&(o=[]);for(var a,h,d=t.grid.mode,T=-r;T<=r;T++){a=Math.max(-r,-T-r),h=Math.min(r,-T+r);for(var S=a;S<=h;S++)o.push(Gi(d,T,0,-T-S))}return o},triangle:function GetTriangleMap(t,r,o,a){void 0===a&&(a=[]);for(var h,d,T=t.grid.mode,S=0;S<=o;S++){1===r?(h=o-S,d=o):(h=0,d=o-S);for(var A=h;A<=d;A++)a.push(Gi(T,S,0,-S-A))}return a},parallelogram:function GetParallelogramMap(t,r,o,a,h){void 0===h&&(h=[]);var d=t.grid.mode;switch(r){case 1:for(var T=0;T<=o;T++)for(var S=0;S<=a;S++)h.push(Gi(d,S,0,T));break;case 2:for(var A=0;A<=o;A++)for(T=0;T<=a;T++)h.push(Gi(d,-A-T,0,T));break;default:for(S=0;S<=o;S++)for(A=0;A<=a;A++)h.push(Gi(d,S,0,-S-A))}return h}},Da=Phaser.Utils.String.Pad,La=function GetStyle(t,r,o){if(null==t)return t;switch(_typeof(t)){case"string":default:return t;case"number":return"#".concat(Da(Math.floor(t).toString(16),6,"0",1));case"function":return t(r,o);case"object":return t.hasOwnProperty("r")?t.hasOwnProperty("a")?"rgba(".concat(t.r,",").concat(t.g,",").concat(t.b,",").concat(t.a,")"):"rgb(".concat(t.r,",").concat(t.g,",").concat(t.b,")"):t.hasOwnProperty("h")?t.hasOwnProperty("a")?"hsla(".concat(t.h,",").concat(t.s,",").concat(t.l,",").concat(t.a,")"):"hsl(".concat(t.h,",").concat(t.s,",").concat(t.l,")"):t}},Ia=function Indent(t,r,o){return t<r?t+o:t>r?t-o:t},Fa=function CreateTileTexture(t,r,o,a,h,d){void 0===d&&(d="miter"),function CreatePolygonTexture(t,r,o,a,h,d,T){void 0===a&&void 0===h&&(a=16777215),void 0===h?d=0:void 0===d&&(d=2);for(var S=1/0,A=1/0,P=-1/0,O=-1/0,D=0,L=o.length;D<L;D++){var I=(q=o[D]).x,B=q.y;S=Math.min(S,I),A=Math.min(A,B),P=Math.max(P,I),O=Math.max(O,B)}var N=P-S,G=O-A,Y=t.sys.textures.createCanvas(r,Math.ceil(N),Math.ceil(G)),X=Y.getCanvas(),U=Y.getContext(),z=N/2,V=G/2,W=d/2,H=[];for(D=0,L=o.length;D<L;D++){var q=o[D];H.push({x:Ia(q.x-S,z,W),y:Ia(q.y-A,V,W)})}!function DrawPolygon(t,r,o,a,h,d,T){void 0===T&&(T="round"),r.beginPath(),r.lineJoin=T;var S=o[0];r.moveTo(S.x,S.y);for(var A=1,P=o.length;A<P;A++)S=o[A],r.lineTo(S.x,S.y);r.closePath(),null!=a&&(r.fillStyle=a,r.fill()),null!=h&&(r.strokeStyle=h,r.lineWidth=d,r.stroke())}(0,U,H,La(a,X,U),La(h,X,U),d,T),Y.refresh()}(t.scene,r,t.getGridPoints(0,0,!0),o,a,h,d)},Ba=function(t){_inherits(BoardPlugin,Phaser.Plugins.ScenePlugin);var r=_createSuper(BoardPlugin);function BoardPlugin(t,o){var a;return _classCallCheck(this,BoardPlugin),(a=r.call(this,t,o)).add=new Rt(t),a.hexagonMap=Oa,a.createTileTexture=Fa,a}return _createClass(BoardPlugin,[{key:"start",value:function start(){this.scene.sys.events.on("destroy",this.destroy,this)}}]),BoardPlugin}(),Na=function SetVelocity(t,r,o,a){var h=t.body,d=h.velocity.x,T=h.velocity.y;r===d&&o===T||(h.setVelocity(r,o),a&&a(r,o,d,T))},Ga=Phaser.Utils.Objects.GetValue,Ya=function(t){_inherits(Bullet,t);var r=_createSuper(Bullet);function Bullet(t,o){var a;return _classCallCheck(this,Bullet),(a=r.call(this,t,o)).resetFromJSON(o),a.boot(),a}return _createClass(Bullet,[{key:"resetFromJSON",value:function resetFromJSON(t){return this.parent.body||this.scene.physics.add.existing(this.parent,!1),this.setWrapMode(Ga(t,"wrap",!1),Ga(t,"padding",0)),this.setEnable(Ga(t,"enable",!0)),this.setSpeed(Ga(t,"speed",200)),this}},{key:"enable",get:function get(){return this.isRunning},set:function set(t){this.isRunning=t,t||Na(this.parent,0,0)}},{key:"setEnable",value:function setEnable(t){return null==t&&(t=!0),this.enable=t,this}},{key:"setSpeed",value:function setSpeed(t){return this.speed=t,this}},{key:"setWrapMode",value:function setWrapMode(t,r){return void 0===t&&(t=!0),this.wrap=t,this.padding=r,this}},{key:"update",value:function update(t,r){var o=this.parent;if(!this.enable)return Na(o,0,0),this;if(!o.active)return this;var a=o.rotation,h=this.speed*Math.cos(a),d=this.speed*Math.sin(a);return Na(o,h,d),this.wrap&&o.body.world.wrap(o,this.padding),this}}]),Bullet}(Ur),Xa=function(t){_inherits(BulletPlugin,Phaser.Plugins.BasePlugin);var r=_createSuper(BulletPlugin);function BulletPlugin(t){return _classCallCheck(this,BulletPlugin),r.call(this,t)}return _createClass(BulletPlugin,[{key:"start",value:function start(){this.game.events.on("destroy",this.destroy,this)}},{key:"add",value:function add(t,r){return new Ya(t,r)}}]),BulletPlugin}(),Ua=Phaser.Utils.Objects.GetValue,za=Phaser.Math.Clamp,Va=function(){function Timer(t){_classCallCheck(this,Timer),this.resetFromJSON(t)}return _createClass(Timer,[{key:"resetFromJSON",value:function resetFromJSON(t){this.state=Ua(t,"state",Wa),this.timeScale=Ua(t,"timeScale",1),this.delay=Ua(t,"delay",0),this.repeat=Ua(t,"repeat",0),this.repeatCounter=Ua(t,"repeatCounter",0),this.duration=Ua(t,"duration",0),this.nowTime=Ua(t,"nowTime",0),this.justRestart=Ua(t,"justRestart",!1)}},{key:"toJSON",value:function toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}},{key:"destroy",value:function destroy(){}},{key:"setTimeScale",value:function setTimeScale(t){return this.timeScale=t,this}},{key:"setDelay",value:function setDelay(t){return void 0===t&&(t=0),this.delay=t,this}},{key:"setDuration",value:function setDuration(t){return this.duration=t,this}},{key:"setRepeat",value:function setRepeat(t){return this.repeat=t,this}},{key:"setRepeatInfinity",value:function setRepeatInfinity(){return this.repeat=-1,this}},{key:"start",value:function start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?ja:Ha,this.repeatCounter=0,this}},{key:"stop",value:function stop(){return this.state=Wa,this}},{key:"update",value:function update(t,r){this.state!==Wa&&this.state!==qa&&0!==r&&0!==this.timeScale&&(this.nowTime+=r*this.timeScale,this.state=this.nowTime>=0?ja:Ha,this.justRestart=!1,this.nowTime>=this.duration&&(-1===this.repeat||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration):(this.nowTime=this.duration,this.state=qa)))}},{key:"t",get:function get(){var t;switch(this.state){case Wa:case Ha:t=0;break;case ja:t=this.nowTime/this.duration;break;case qa:t=1}return za(t,0,1)},set:function set(t){(t=za(t,-1,1))<0?(this.state=Ha,this.nowTime=-this.delay*t):(this.state=ja,this.nowTime=this.duration*t,1===t&&0!==this.repeat&&this.repeatCounter++)}},{key:"setT",value:function setT(t){return this.t=t,this}},{key:"isIdle",get:function get(){return this.state===Wa}},{key:"isDelay",get:function get(){return this.state===Ha}},{key:"isCountDown",get:function get(){return this.state===ja}},{key:"isRunning",get:function get(){return this.state===Ha||this.state===ja}},{key:"isDone",get:function get(){return this.state===qa}},{key:"isOddIteration",get:function get(){return 1==(1&this.repeatCounter)}},{key:"isEvenIteration",get:function get(){return 0==(1&this.repeatCounter)}}]),Timer}(),Wa=0,Ha=1,ja=2,qa=-1,Za=function(t){_inherits(TimerTickTask,t);var r=_createSuper(TimerTickTask);function TimerTickTask(t,o){var a;return _classCallCheck(this,TimerTickTask),(a=r.call(this,t,o)).timer=new Va,a}return _createClass(TimerTickTask,[{key:"shutdown",value:function shutdown(t){this.isShutdown||(_get(_getPrototypeOf(TimerTickTask.prototype),"shutdown",this).call(this,t),this.timer.destroy(),this.timer=void 0)}},{key:"start",value:function start(){return this.timer.start(),_get(_getPrototypeOf(TimerTickTask.prototype),"start",this).call(this),this}},{key:"stop",value:function stop(){return this.timer.stop(),_get(_getPrototypeOf(TimerTickTask.prototype),"stop",this).call(this),this}},{key:"complete",value:function complete(){return this.timer.stop(),_get(_getPrototypeOf(TimerTickTask.prototype),"complete",this).call(this),this}}]),TimerTickTask}(Ur),Ka=Phaser.Utils.Objects.GetValue,Ja=Phaser.Utils.Objects.GetAdvancedValue,Qa=Phaser.Tweens.Builders.GetEaseFunction,$a=function(t){_inherits(EaseValueTaskBase,t);var r=_createSuper(EaseValueTaskBase);function EaseValueTaskBase(){return _classCallCheck(this,EaseValueTaskBase),r.apply(this,arguments)}return _createClass(EaseValueTaskBase,[{key:"resetFromJSON",value:function resetFromJSON(t){return this.timer.resetFromJSON(Ka(t,"timer")),this.setEnable(Ka(t,"enable",!0)),this.setTarget(Ka(t,"target",this.parent)),this.setDelay(Ja(t,"delay",0)),this.setDuration(Ja(t,"duration",1e3)),this.setEase(Ka(t,"ease","Linear")),this.setRepeat(Ka(t,"repeat",0)),this}},{key:"setEnable",value:function setEnable(t){return null==t&&(t=!0),this.enable=t,this}},{key:"setTarget",value:function setTarget(t){return void 0===t&&(t=this.parent),this.target=t,this}},{key:"setDelay",value:function setDelay(t){return this.delay=t,this}},{key:"setDuration",value:function setDuration(t){return this.duration=t,this}},{key:"setEase",value:function setEase(t){return void 0===t&&(t="Linear"),this.ease=t,this.easeFn=Qa(t),this}},{key:"setRepeat",value:function setRepeat(t){return this.repeat=t,this}},{key:"start",value:function start(){return this.timer.isRunning||_get(_getPrototypeOf(EaseValueTaskBase.prototype),"start",this).call(this),this}},{key:"restart",value:function restart(){return this.timer.stop(),this.start.apply(this,arguments),this}},{key:"stop",value:function stop(t){return void 0===t&&(t=!1),_get(_getPrototypeOf(EaseValueTaskBase.prototype),"stop",this).call(this),t&&(this.timer.setT(1),this.updateGameObject(this.target,this.timer),this.complete()),this}},{key:"update",value:function update(t,r){if(!this.isRunning||!this.enable||!this.parent.active)return this;var o=this.target,a=this.timer;return a.update(t,r),a.isDelay||this.updateGameObject(o,a),this.emit("update",o,this),a.isDone&&this.complete(),this}},{key:"updateGameObject",value:function updateGameObject(t,r){}}]),EaseValueTaskBase}(Za),th=Phaser.Utils.Objects.GetValue,eh=Phaser.Utils.Objects.GetAdvancedValue,ih=Phaser.Math.Linear,nh=function(t){_inherits(EaseMove,t);var r=_createSuper(EaseMove);function EaseMove(t,o){var a;return _classCallCheck(this,EaseMove),(a=r.call(this,t,o)).resetFromJSON(o),a.boot(),a}return _createClass(EaseMove,[{key:"resetFromJSON",value:function resetFromJSON(t){if(_get(_getPrototypeOf(EaseMove.prototype),"resetFromJSON",this).call(this,t),this.setMode(th(t,"mode",0)),t&&(t.hasOwnProperty("x")||t.hasOwnProperty("y"))){var r=eh(t,"x",void 0),o=eh(t,"y",void 0);this.setTargetPosition(r,o)}else this.setTargetPosition(t);return this}},{key:"setMode",value:function setMode(t){return"string"==typeof t&&(t=rh[t]),this.mode=t,this}},{key:"setTargetPosition",value:function setTargetPosition(t,r){if("number"==typeof t||"number"==typeof r)this.startX=this.parent.x,this.startY=this.parent.y,this.endX=t,this.endY=r;else{var o=t;this.startX=eh(o,"startX",void 0),this.startY=eh(o,"startY",void 0),this.endX=eh(o,"endX",void 0),this.endY=eh(o,"endY",void 0)}return this.hasMoveX=void 0!==this.startX&&void 0!==this.endX,this.hasMoveY=void 0!==this.startY&&void 0!==this.endY,this}},{key:"start",value:function start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasMoveX&&(t.x=this.startX),this.hasMoveY&&(t.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(2===this.mode?-1:0),_get(_getPrototypeOf(EaseMove.prototype),"start",this).call(this),this}},{key:"updateGameObject",value:function updateGameObject(t,r){var o=r.t;r.isOddIteration&&(o=1-o),o=this.easeFn(o),this.hasMoveX&&(t.x=ih(this.startX,this.endX,o)),this.hasMoveY&&(t.y=ih(this.startY,this.endY,o))}},{key:"complete",value:function complete(){return _get(_getPrototypeOf(EaseMove.prototype),"complete",this).call(this),1===this.mode&&this.parent.destroy(),this}}]),EaseMove}($a),rh={stop:0,destroy:1,yoyo:2},sh=function ParseValue(t,r){if("number"==typeof t)return t;var o=t[0],a=parseFloat(t.substr(2));switch(o){case"+":return r+a;case"-":return r-a;case"*":return r*a;case"/":return r/a}},oh=function EaseMoveTo(t,r,o,a,h,d,T){d instanceof nh&&(T=d,d=void 0),void 0===d&&(d=!1);var S={};return S.mode=d?1:0,void 0!==o&&(S.startX=t.x,S.endX=sh(o,t.x)),void 0!==a&&(S.startY=t.y,S.endY=sh(a,t.y)),S.duration=r,S.ease=void 0===h?"Linear":h,void 0===T?T=new nh(t,S):T.resetFromJSON(S),T.restart(),T},ah=function EaseMoveFrom(t,r,o,a,h,d,T){d instanceof nh&&(T=d,d=void 0),void 0===d&&(d=!1);var S={};return S.mode=d?1:0,void 0!==o&&(S.startX=sh(o,t.x),S.endX=t.x),void 0!==a&&(S.startY=sh(a,t.y),S.endY=t.y),S.duration=r,S.ease=void 0===h?"Linear":h,void 0===T?T=new nh(t,S):T.resetFromJSON(S),T.restart(),T},hh=function(t){_inherits(EaseMovePlugin,Phaser.Plugins.BasePlugin);var r=_createSuper(EaseMovePlugin);function EaseMovePlugin(t){return _classCallCheck(this,EaseMovePlugin),r.call(this,t)}return _createClass(EaseMovePlugin,[{key:"start",value:function start(){this.game.events.on("destroy",this.destroy,this)}},{key:"add",value:function add(t,r){return new nh(t,r)}}]),EaseMovePlugin}(),lh={moveTo:oh,moveFrom:ah,moveToDestroy:function EaseMoveToDestroy(t,r,o,a,h,d){return oh(t,r,o,a,h,!0,d)},moveFromDestroy:function EaseMoveFromDestroy(t,r,o,a,h,d){return ah(t,r,o,a,h,!0,d)}};Object.assign(hh.prototype,lh);var uh=function(){function ObjectFactory(t){_classCallCheck(this,ObjectFactory),this.scene=t}return _createClass(ObjectFactory,null,[{key:"register",value:function register(t,r){ObjectFactory.prototype[t]=r}}]),ObjectFactory}(),ch=Phaser.GameObjects.GameObject,dh=function IsGameObject(t){return!!t.skeleton||t instanceof ch};uh.register("tap",(function(t,r){return dh(t)||(r=t,t=this.scene),new ar(t,r)})),Nr(window,"RexPlugins.Gestures.Tap",ar),uh.register("press",(function(t,r){return dh(t)||(r=t,t=this.scene),new pr(t,r)})),Nr(window,"RexPlugins.Gestures.Press",pr);var fh=Phaser.Utils.Objects.GetValue,ph=function(t){_inherits(Pan,t);var r=_createSuper(Pan);function Pan(t,o){var a;_classCallCheck(this,Pan);var h=_assertThisInitialized(a=r.call(this,t,o)),d={states:{IDLE:{},BEGIN:{enter:function enter(){var t=h.pointer;h.startX=t.x,h.startY=t.y,h.startWorldX=t.worldX,h.startWorldY=t.worldY}},RECOGNIZED:{enter:function enter(){h.emit("panstart",h,h.gameObject,h.lastPointer)},exit:function exit(){var t=h.lastPointer;h.endX=t.x,h.endY=t.y,h.endWorldX=t.worldX,h.endWorldY=t.worldY,h.emit("panend",h,h.gameObject,h.lastPointer)}}},init:function init(){this.state=gh},eventEmitter:!1};return a.setRecongizedStateObject(new rr(d)),a}return _createClass(Pan,[{key:"resetFromJSON",value:function resetFromJSON(t){return _get(_getPrototypeOf(Pan.prototype),"resetFromJSON",this).call(this,t),this.setDragThreshold(fh(t,"threshold",10)),this}},{key:"onDragStart",value:function onDragStart(){this.state=vh,0===this.dragThreshold&&(this.state=mh)}},{key:"onDragEnd",value:function onDragEnd(){this.state=gh}},{key:"onDrag",value:function onDrag(){switch(this.state){case vh:this.pointer.getDistance()>=this.dragThreshold&&(this.state=mh);break;case mh:var t=this.pointer.position,r=this.pointer.prevPosition;this.dx=t.x-r.x,this.dy=t.y-r.y;var o=this.pointer;this.x=o.x,this.y=o.y,this.worldX=o.worldX,this.worldY=o.worldY,this.emit("pan",this,this.gameObject,this.lastPointer)}}},{key:"isPanned",get:function get(){return this.state===mh}},{key:"setDragThreshold",value:function setDragThreshold(t){return this.dragThreshold=t,this}}]),Pan}($n),gh="IDLE",vh="BEGIN",mh="RECOGNIZED";uh.register("pan",(function(t,r){return dh(t)||(r=t,t=this.scene),new ph(t,r)})),Nr(window,"RexPlugins.Gestures.Pan",ph),uh.register("swipe",(function(t,r){return dh(t)||(r=t,t=this.scene),new _r(t,r)})),Nr(window,"RexPlugins.Gestures.Swipe",_r);var yh=Phaser.Utils.Objects.GetValue,xh=Phaser.Utils.Array.SpliceOne,Th=Phaser.Math.Distance.Between,bh=Phaser.Math.Angle.Between,wh=function(){function TwoPointersTracer(t,r){_classCallCheck(this,TwoPointersTracer);var o=t.input.manager.pointersTotal-1;o<2&&t.input.addPointer(2-o),this.scene=t,this.setEventEmitter(yh(r,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(r),this.boot()}return _createClass(TwoPointersTracer,[{key:"resetFromJSON",value:function resetFromJSON(t){return this.setEnable(yh(t,"enable",!0)),this.bounds=yh(t,"bounds",void 0),this.tracerState=Ch,this.pointers.length=0,We(this.movedState),this}},{key:"boot",value:function boot(){this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}},{key:"shutdown",value:function shutdown(){this.scene&&(this.destroyEventEmitter(),this.pointers.length=0,We(this.movedState),this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0)}},{key:"destroy",value:function destroy(){this.shutdown()}},{key:"enable",get:function get(){return this._enable},set:function set(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}},{key:"setEnable",value:function setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}},{key:"toggleEnable",value:function toggleEnable(){return this.setEnable(!this.enable),this}},{key:"onPointerDown",value:function onPointerDown(t){if(this.enable&&(2!==this.pointers.length&&(!this.bounds||this.bounds.contains(t.x,t.y))&&-1===this.pointers.indexOf(t)))switch(this.movedState[t.id]=!1,this.pointers.push(t),this.tracerState){case Ch:this.tracerState=Ah,this.onDrag1Start();break;case Ah:this.tracerState=Eh,this.onDrag2Start()}}},{key:"onPointerUp",value:function onPointerUp(t){if(this.enable&&(!this.bounds||this.bounds.contains(t.x,t.y))){var r=this.pointers.indexOf(t);if(-1!==r)switch(delete this.movedState[t.id],xh(this.pointers,r),this.tracerState){case Ah:this.tracerState=Ch,this.onDrag1End();break;case Eh:this.tracerState=Ah,this.onDrag2End(),this.onDrag1Start()}}}},{key:"onPointerMove",value:function onPointerMove(t){if(this.enable&&t.isDown){var r=!this.bounds||this.bounds.contains(t.x,t.y),o=-1!==this.pointers.indexOf(t);if(!o&&r);else if(o&&!r)this.onPointerUp(t);else if(this.movedState[t.id]||(this.movedState[t.id]=t.x!==t.downX||t.y!==t.downY),this.movedState[t.id])switch(this.tracerState){case Ah:this.onDrag1();break;case Eh:this.onDrag2()}}}},{key:"dragCancel",value:function dragCancel(){return this.tracerState===Eh&&this.onDrag2End(),this.pointers.length=0,We(this.movedState),this.tracerState=Ch,this}},{key:"onDrag1Start",value:function onDrag1Start(){this.emit("drag1start",this)}},{key:"onDrag1End",value:function onDrag1End(){this.emit("drag1end",this)}},{key:"onDrag1",value:function onDrag1(){this.emit("drag1",this)}},{key:"onDrag2Start",value:function onDrag2Start(){this.emit("drag2start",this)}},{key:"onDrag2End",value:function onDrag2End(){this.emit("drag2end",this)}},{key:"onDrag2",value:function onDrag2(){this.emit("drag2",this)}},{key:"distanceBetween",get:function get(){if(this.tracerState!==Eh)return 0;var t=this.pointers[0],r=this.pointers[1];return Th(t.x,t.y,r.x,r.y)}},{key:"angleBetween",get:function get(){if(this.tracerState!==Eh)return 0;var t=this.pointers[0],r=this.pointers[1];return bh(t.x,t.y,r.x,r.y)}},{key:"drag1Vector",get:function get(){var t=this.pointers[0];if(t&&this.movedState[t.id]){var r=t.position,o=t.prevPosition;Sh.x=r.x-o.x,Sh.y=r.y-o.y}else Sh.x=0,Sh.y=0;return Sh}},{key:"centerX",get:function get(){if(this.tracerState!==Eh)return 0;var t=this.pointers[0].position,r=this.pointers[1].position;return(t.x+r.x)/2}},{key:"centerY",get:function get(){if(this.tracerState!==Eh)return 0;var t=this.pointers[0].position,r=this.pointers[1].position;return(t.y+r.y)/2}},{key:"prevCenterX",get:function get(){if(this.tracerState!==Eh)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,r=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.x+r.x)/2}},{key:"prevCenterY",get:function get(){if(this.tracerState!==Eh)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,r=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.y+r.y)/2}},{key:"movementCenterX",get:function get(){return this.centerX-this.prevCenterX}},{key:"movementCenterY",get:function get(){return this.centerY-this.prevCenterY}},{key:"setRecongizedStateObject",value:function setRecongizedStateObject(t){return this.recongizedState=t,this}},{key:"state",get:function get(){return this.recongizedState.state},set:function set(t){this.recongizedState.state=t}},{key:"cancel",value:function cancel(){return this.state=Mh,this}}]),TwoPointersTracer}();Object.assign(wh.prototype,Ft);var Sh={},Ch=0,Ah=1,Eh=2,Mh="IDLE",_h=Phaser.Utils.Objects.GetValue,Ph=function(t){_inherits(Pinch,t);var r=_createSuper(Pinch);function Pinch(t,o){var a;_classCallCheck(this,Pinch);var h=_assertThisInitialized(a=r.call(this,t,o)),d={states:{IDLE:{enter:function enter(){h.prevDistance=void 0,h.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function enter(){h.emit("pinchstart",h)},exit:function exit(){h.emit("pinchend",h)}}},init:function init(){this.state=Rh},eventEmitter:!1};return a.setRecongizedStateObject(new rr(d)),a}return _createClass(Pinch,[{key:"resetFromJSON",value:function resetFromJSON(t){return _get(_getPrototypeOf(Pinch.prototype),"resetFromJSON",this).call(this,t),this.setDragThreshold(_h(t,"threshold",0)),this}},{key:"onDrag2Start",value:function onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=kh,0===this.dragThreshold&&(this.state=Oh)}},{key:"onDrag2End",value:function onDrag2End(){this.state=Rh}},{key:"onDrag2",value:function onDrag2(){switch(this.state){case kh:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.prevDistance=t,this.state=Oh}break;case Oh:t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.emit("pinch",this),this.prevDistance=t}}},{key:"isPinched",get:function get(){return this.state===Oh}},{key:"setDragThreshold",value:function setDragThreshold(t){return this.dragThreshold=t,this}}]),Pinch}(wh),Rh="IDLE",kh="BEGIN",Oh="RECOGNIZED";uh.register("pinch",(function(t){return new Ph(this.scene,t)})),Nr(window,"RexPlugins.Gestures.Pinch",Ph);var Dh=Phaser.Math.RotateAround,Lh=function RotateObjectAround(t,r,o,a){return Dh(t,r,o,a),t.rotation+=a,t},Ih={},Fh=Phaser.Utils.Objects.GetValue,Bh=Phaser.Math.Angle.WrapDegrees,Nh=Phaser.Math.Angle.ShortestBetween,Gh=Phaser.Math.RadToDeg,Yh=Phaser.Math.DegToRad,Xh=function(t){_inherits(Rotate,t);var r=_createSuper(Rotate);function Rotate(t,o){var a;_classCallCheck(this,Rotate);var h=_assertThisInitialized(a=r.call(this,t,o)),d={states:{IDLE:{enter:function enter(){h.prevAngle=void 0,h.angle=0}},BEGIN:{},RECOGNIZED:{enter:function enter(){h.emit("rotatestart",h)},exit:function exit(){h.emit("rotateend",h)}}},init:function init(){this.state=zh},eventEmitter:!1};return a.setRecongizedStateObject(new rr(d)),a}return _createClass(Rotate,[{key:"resetFromJSON",value:function resetFromJSON(t){return _get(_getPrototypeOf(Rotate.prototype),"resetFromJSON",this).call(this,t),this.setDragThreshold(Fh(t,"threshold",0)),this}},{key:"onDrag2Start",value:function onDrag2Start(){this.prevAngle=Bh(Gh(this.angleBetween)),this.state=Vh,0===this.dragThreshold&&(this.state=Wh)}},{key:"onDrag2End",value:function onDrag2End(){this.state=zh}},{key:"onDrag2",value:function onDrag2(){switch(this.state){case Vh:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=Bh(Gh(this.angleBetween));this.angle=Nh(this.prevAngle,t),this.prevAngle=t,this.state=Wh}break;case Wh:t=Bh(Gh(this.angleBetween));this.angle=Nh(this.prevAngle,t),this.prevAngle=t,this.emit("rotate",this)}}},{key:"isRotated",get:function get(){return this.state===Wh}},{key:"rotation",get:function get(){return Yh(this.angle)}},{key:"setDragThreshold",value:function setDragThreshold(t){return this.dragThreshold=t,this}}]),Rotate}(wh),Uh={spinObject:function SpinObject(t,r){if(!this.isRotation)return this;void 0===r&&(r=this.pointers[0].camera);var o=this.movementCenterX,a=this.movementCenterY,h=function ScreenXYToWorldXY(t,r,o,a){return void 0===a?a={}:!0===a&&(a=Ih),o.getWorldPoint(t,r,a),a}(this.centerX,this.centerY,r,!0),d=h.x,T=h.y,S=this.rotation;if(Array.isArray(t))for(var A=t,P=0,O=A.length;P<O;P++)(t=A[P]).x+=o,t.y+=a,Lh(t,d,T,S);else t.x+=o,t.y+=a,Lh(t,d,T,S);return this}};Object.assign(Xh.prototype,Uh);var zh="IDLE",Vh="BEGIN",Wh="RECOGNIZED";uh.register("rotate",(function(t){return new Xh(this.scene,t)})),Nr(window,"RexPlugins.Gestures.Rotate",Xh);var Hh=function(t){_inherits(GesturesPlugin,Phaser.Plugins.ScenePlugin);var r=_createSuper(GesturesPlugin);function GesturesPlugin(t,o){var a;return _classCallCheck(this,GesturesPlugin),(a=r.call(this,t,o)).add=new uh(t),a}return _createClass(GesturesPlugin)}(),jh=function(t){_inherits(MoveToPlugin,Phaser.Plugins.BasePlugin);var r=_createSuper(MoveToPlugin);function MoveToPlugin(t){return _classCallCheck(this,MoveToPlugin),r.call(this,t)}return _createClass(MoveToPlugin,[{key:"start",value:function start(){this.game.events.on("destroy",this.destroy,this)}},{key:"add",value:function add(t,r){return new rs(t,r)}}]),MoveToPlugin}(),qh=Phaser.Utils.Objects.GetValue,Zh=Phaser.Math.Wrap,Kh=Phaser.Math.Angle.Wrap,Jh=Phaser.Math.Angle.Between,Qh=function(t){_inherits(RotateTo,t);var r=_createSuper(RotateTo);function RotateTo(t,o){var a;return _classCallCheck(this,RotateTo),(a=r.call(this,t,o)).resetFromJSON(o),a.boot(),a}return _createClass(RotateTo,[{key:"resetFromJSON",value:function resetFromJSON(t){return this.isRunning=qh(t,"isRunning",!1),this.setEnable(qh(t,"enable",!0)),this.timeScale=qh(t,"timeScale",1),this.setSpeed(qh(t,"speed",180)),this.target=qh(t,"target",0),this.dir=qh(t,"dir",0),this}},{key:"toJSON",value:function toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,speed:this.speed,target:this.target,dir:this.dir,tickingMode:this.tickingMode}}},{key:"setEnable",value:function setEnable(t){return null==t&&(t=!0),this.enable=t,this}},{key:"setSpeed",value:function setSpeed(t){return this.speed=t,this}},{key:"rotateTo",value:function rotateTo(t,r,o){if("number"!=typeof t){var a=t;t=qh(a,"angle",void 0),r=qh(a,"dir",void 0)}return this.target=Zh(t,0,360),void 0===r&&(r=0),this.dir="string"==typeof r?tl[r]:r,void 0!==o&&this.setSpeed(o),_get(_getPrototypeOf(RotateTo.prototype),"start",this).call(this),this}},{key:"rotateTowardsPosition",value:function rotateTowardsPosition(t,r,o,a){var h=this.parent,d=Jh(h.x,h.y,t,r),T=se(d);return this.rotateTo(T,o,a),this}},{key:"update",value:function update(t,r){if(!this.isRunning||!this.enable)return this;var o=this.parent;if(!o.active)return this;var a=this.target;if(Kh(Rn(a))===o.rotation)return this.complete(),this;if(0===this.speed||0===r||0===this.timeScale)return this;var h,d,T=(360+o.angle)%360,S=r*this.timeScale/1e3,A=this.speed*S,P=this.dir;switch(P){case 0:var O=$h(T,a,!0),D=360-O;O<D?(P=1,h=O):(P=2,h=D);break;case 1:h=$h(T,a,!0);break;case 2:h=$h(T,a,!1)}return d=A<h?1===P?T+A:T-A:a,o.rotation=Rn(d),this}}]),RotateTo}(Ur),$h=function diffAngle(t,r,o){var a=o?r-t:t-r;return a=Zh(a,0,360)},tl={shortest:0,cw:1,ccw:2},el=function(t){_inherits(RotateToPlugin,Phaser.Plugins.BasePlugin);var r=_createSuper(RotateToPlugin);function RotateToPlugin(t){return _classCallCheck(this,RotateToPlugin),r.call(this,t)}return _createClass(RotateToPlugin,[{key:"start",value:function start(){this.game.events.on("destroy",this.destroy,this)}},{key:"add",value:function add(t,r){return new Qh(t,r)}}]),RotateToPlugin}(),il={exports:{}};!function(t,r){t.exports=function s(){var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},r=!t.document&&!!t.postMessage,o=r&&/blob:/i.test((t.location||{}).protocol),a={},h=0,d={parse:function parse(r,o){var T=(o=o||{}).dynamicTyping||!1;if(M(T)&&(o.dynamicTypingFunction=T,T={}),o.dynamicTyping=T,o.transform=!!M(o.transform)&&o.transform,o.worker&&d.WORKERS_SUPPORTED){var S=function(){if(!d.WORKERS_SUPPORTED)return!1;var r,o,T=(r=t.URL||t.webkitURL||null,o=s.toString(),d.BLOB_URL||(d.BLOB_URL=r.createObjectURL(new Blob(["(",o,")();"],{type:"text/javascript"})))),S=new t.Worker(T);return S.onmessage=_,S.id=h++,a[S.id]=S}();return S.userStep=o.step,S.userChunk=o.chunk,S.userComplete=o.complete,S.userError=o.error,o.step=M(o.step),o.chunk=M(o.chunk),o.complete=M(o.complete),o.error=M(o.error),delete o.worker,void S.postMessage({input:r,config:o,workerId:S.id})}var A=null;return d.NODE_STREAM_INPUT,"string"==typeof r?A=o.download?new l(o):new p(o):!0===r.readable&&M(r.read)&&M(r.on)?A=new g(o):(t.File&&r instanceof File||r instanceof Object)&&(A=new c(o)),A.stream(r)},unparse:function unparse(t,r){var o=!1,a=!0,h=",",T="\r\n",S='"',A=S+S,P=!1,O=null,D=!1;!function(){if("object"==_typeof(r)){if("string"!=typeof r.delimiter||d.BAD_DELIMITERS.filter((function(t){return-1!==r.delimiter.indexOf(t)})).length||(h=r.delimiter),("boolean"==typeof r.quotes||"function"==typeof r.quotes||Array.isArray(r.quotes))&&(o=r.quotes),"boolean"!=typeof r.skipEmptyLines&&"string"!=typeof r.skipEmptyLines||(P=r.skipEmptyLines),"string"==typeof r.newline&&(T=r.newline),"string"==typeof r.quoteChar&&(S=r.quoteChar),"boolean"==typeof r.header&&(a=r.header),Array.isArray(r.columns)){if(0===r.columns.length)throw new Error("Option columns is empty");O=r.columns}void 0!==r.escapeChar&&(A=r.escapeChar+S),("boolean"==typeof r.escapeFormulae||r.escapeFormulae instanceof RegExp)&&(D=r.escapeFormulae instanceof RegExp?r.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var L=new RegExp(j(S),"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return u(null,t,P);if("object"==_typeof(t[0]))return u(O||Object.keys(t[0]),t,P)}else if("object"==_typeof(t))return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||O),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:"object"==_typeof(t.data[0])?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||"object"==_typeof(t.data[0])||(t.data=[t.data])),u(t.fields||[],t.data||[],P);throw new Error("Unable to serialize unrecognized input");function u(t,r,o){var d="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof r&&(r=JSON.parse(r));var S=Array.isArray(t)&&0<t.length,A=!Array.isArray(r[0]);if(S&&a){for(var P=0;P<t.length;P++)0<P&&(d+=h),d+=v(t[P],P);0<r.length&&(d+=T)}for(var O=0;O<r.length;O++){var D=S?t.length:r[O].length,L=!1,I=S?0===Object.keys(r[O]).length:0===r[O].length;if(o&&!S&&(L="greedy"===o?""===r[O].join("").trim():1===r[O].length&&0===r[O][0].length),"greedy"===o&&S){for(var B=[],N=0;N<D;N++){var G=A?t[N]:N;B.push(r[O][G])}L=""===B.join("").trim()}if(!L){for(var Y=0;Y<D;Y++){0<Y&&!I&&(d+=h);var X=S&&A?t[Y]:Y;d+=v(r[O][X],Y)}O<r.length-1&&(!o||0<D&&!I)&&(d+=T)}}return d}function v(t,r){if(null==t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);var a=!1;D&&"string"==typeof t&&D.test(t)&&(t="'"+t,a=!0);var T=t.toString().replace(L,A);return(a=a||!0===o||"function"==typeof o&&o(t,r)||Array.isArray(o)&&o[r]||function(t,r){for(var o=0;o<r.length;o++)if(-1<t.indexOf(r[o]))return!0;return!1}(T,d.BAD_DELIMITERS)||-1<T.indexOf(h)||" "===T.charAt(0)||" "===T.charAt(T.length-1))?S+T+S:T}}};if(d.RECORD_SEP=String.fromCharCode(30),d.UNIT_SEP=String.fromCharCode(31),d.BYTE_ORDER_MARK="\ufeff",d.BAD_DELIMITERS=["\r","\n",'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!r&&!!t.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=E,d.ParserHandle=i,d.NetworkStreamer=l,d.FileStreamer=c,d.StringStreamer=p,d.ReadableStreamStreamer=g,t.jQuery){var T=t.jQuery;T.fn.parse=function(r){var o=r.config||{},a=[];return this.each((function(r){if("INPUT"!==T(this).prop("tagName").toUpperCase()||"file"!==T(this).attr("type").toLowerCase()||!t.FileReader||!this.files||0===this.files.length)return!0;for(var h=0;h<this.files.length;h++)a.push({file:this.files[h],inputElem:this,instanceConfig:T.extend({},o)})})),e(),this;function e(){if(0!==a.length){var t,o,h,S,A=a[0];if(M(r.before)){var P=r.before(A.file,A.inputElem);if("object"==_typeof(P)){if("abort"===P.action)return t="AbortError",o=A.file,h=A.inputElem,S=P.reason,void(M(r.error)&&r.error({name:t},o,h,S));if("skip"===P.action)return void u();"object"==_typeof(P.config)&&(A.instanceConfig=T.extend(A.instanceConfig,P.config))}else if("skip"===P)return void u()}var O=A.instanceConfig.complete;A.instanceConfig.complete=function(t){M(O)&&O(t,A.file,A.inputElem),u()},d.parse(A.file,A.instanceConfig)}else M(r.complete)&&r.complete()}function u(){a.splice(0,1),e()}}}function u(r){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var r=w(t);r.chunkSize=parseInt(r.chunkSize),t.step||t.chunk||(r.chunkSize=null),this._handle=new i(r),(this._handle.streamer=this)._config=r}.call(this,r),this.parseChunk=function(r,a){if(this.isFirstChunk&&M(this._config.beforeFirstChunk)){var h=this._config.beforeFirstChunk(r);void 0!==h&&(r=h)}this.isFirstChunk=!1,this._halted=!1;var T=this._partialLine+r;this._partialLine="";var S=this._handle.parse(T,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var A=S.meta.cursor;this._finished||(this._partialLine=T.substring(A-this._baseIndex),this._baseIndex=A),S&&S.data&&(this._rowCount+=S.data.length);var P=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(o)t.postMessage({results:S,workerId:d.WORKER_ID,finished:P});else if(M(this._config.chunk)&&!a){if(this._config.chunk(S,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);S=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(S.data),this._completeResults.errors=this._completeResults.errors.concat(S.errors),this._completeResults.meta=S.meta),this._completed||!P||!M(this._config.complete)||S&&S.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),P||S&&S.meta.paused||this._nextChunk(),S}this._halted=!0},this._sendError=function(r){M(this._config.error)?this._config.error(r):o&&this._config.error&&t.postMessage({workerId:d.WORKER_ID,error:r,finished:!1})}}function l(t){var o;(t=t||{}).chunkSize||(t.chunkSize=d.RemoteChunkSize),u.call(this,t),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(o=new XMLHttpRequest,this._config.withCredentials&&(o.withCredentials=this._config.withCredentials),r||(o.onload=v(this._chunkLoaded,this),o.onerror=v(this._chunkError,this)),o.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var a in t)o.setRequestHeader(a,t[a])}if(this._config.chunkSize){var h=this._start+this._config.chunkSize-1;o.setRequestHeader("Range","bytes="+this._start+"-"+h)}try{o.send(this._config.downloadRequestBody)}catch(t){this._chunkError(t.message)}r&&0===o.status&&this._chunkError()}},this._chunkLoaded=function(){4===o.readyState&&(o.status<200||400<=o.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:o.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(t){var r=t.getResponseHeader("Content-Range");return null===r?-1:parseInt(r.substring(r.lastIndexOf("/")+1))}(o),this.parseChunk(o.responseText)))},this._chunkError=function(t){var r=o.statusText||t;this._sendError(new Error(r))}}function c(t){var r,o;(t=t||{}).chunkSize||(t.chunkSize=d.LocalChunkSize),u.call(this,t);var a="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,o=t.slice||t.webkitSlice||t.mozSlice,a?((r=new FileReader).onload=v(this._chunkLoaded,this),r.onerror=v(this._chunkError,this)):r=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var h=Math.min(this._start+this._config.chunkSize,this._input.size);t=o.call(t,this._start,h)}var d=r.readAsText(t,this._config.encoding);a||this._chunkLoaded({target:{result:d}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(r.error)}}function p(t){var r;u.call(this,t=t||{}),this.stream=function(t){return r=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t,o=this._config.chunkSize;return o?(t=r.substring(0,o),r=r.substring(o)):(t=r,r=""),this._finished=!r,this.parseChunk(t)}}}function g(t){u.call(this,t=t||{});var r=[],o=!0,a=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){a&&1===r.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),r.length?this.parseChunk(r.shift()):o=!0},this._streamData=v((function(t){try{r.push("string"==typeof t?t:t.toString(this._config.encoding)),o&&(o=!1,this._checkIsFinished(),this.parseChunk(r.shift()))}catch(t){this._streamError(t)}}),this),this._streamError=v((function(t){this._streamCleanUp(),this._sendError(t)}),this),this._streamEnd=v((function(){this._streamCleanUp(),a=!0,this._streamData("")}),this),this._streamCleanUp=v((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function i(t){var r,o,a,h=Math.pow(2,53),T=-h,S=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,A=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,P=this,O=0,D=0,L=!1,I=!1,B=[],N={data:[],errors:[],meta:{}};if(M(t.step)){var G=t.step;t.step=function(r){if(N=r,_())g();else{if(g(),0===N.data.length)return;O+=r.data.length,t.preview&&O>t.preview?o.abort():(N.data=N.data[0],G(N,P))}}}function y(r){return"greedy"===t.skipEmptyLines?""===r.join("").trim():1===r.length&&0===r[0].length}function g(){return N&&a&&(k("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),a=!1),t.skipEmptyLines&&(N.data=N.data.filter((function(t){return!y(t)}))),_()&&function(){if(N)if(Array.isArray(N.data[0])){for(var r=0;_()&&r<N.data.length;r++)N.data[r].forEach(e);N.data.splice(0,1)}else N.data.forEach(e);function e(r,o){M(t.transformHeader)&&(r=t.transformHeader(r,o)),B.push(r)}}(),function(){if(!N||!t.header&&!t.dynamicTyping&&!t.transform)return N;function e(r,o){var a,h=t.header?{}:[];for(a=0;a<r.length;a++){var d=a,T=r[a];t.header&&(d=a>=B.length?"__parsed_extra":B[a]),t.transform&&(T=t.transform(T,d)),T=v(d,T),"__parsed_extra"===d?(h[d]=h[d]||[],h[d].push(T)):h[d]=T}return t.header&&(a>B.length?k("FieldMismatch","TooManyFields","Too many fields: expected "+B.length+" fields but parsed "+a,D+o):a<B.length&&k("FieldMismatch","TooFewFields","Too few fields: expected "+B.length+" fields but parsed "+a,D+o)),h}var r=1;return!N.data.length||Array.isArray(N.data[0])?(N.data=N.data.map(e),r=N.data.length):N.data=e(N.data,0),t.header&&N.meta&&(N.meta.fields=B),D+=r,N}()}function _(){return t.header&&0===B.length}function v(r,o){return a=r,t.dynamicTypingFunction&&void 0===t.dynamicTyping[a]&&(t.dynamicTyping[a]=t.dynamicTypingFunction(a)),!0===(t.dynamicTyping[a]||t.dynamicTyping)?"true"===o||"TRUE"===o||"false"!==o&&"FALSE"!==o&&(function(t){if(S.test(t)){var r=parseFloat(t);if(T<r&&r<h)return!0}return!1}(o)?parseFloat(o):A.test(o)?new Date(o):""===o?null:o):o;var a}function k(t,r,o,a){var h={type:t,code:r,message:o};void 0!==a&&(h.row=a),N.errors.push(h)}this.parse=function(h,T,S){var A=t.quoteChar||'"';if(t.newline||(t.newline=function(t,r){t=t.substring(0,1048576);var o=new RegExp(j(r)+"([^]*?)"+j(r),"gm"),a=(t=t.replace(o,"")).split("\r"),h=t.split("\n"),d=1<h.length&&h[0].length<a[0].length;if(1===a.length||d)return"\n";for(var T=0,S=0;S<a.length;S++)"\n"===a[S][0]&&T++;return T>=a.length/2?"\r\n":"\r"}(h,A)),a=!1,t.delimiter)M(t.delimiter)&&(t.delimiter=t.delimiter(h),N.meta.delimiter=t.delimiter);else{var P=function(r,o,a,h,T){var S,A,P,O;T=T||[",","\t","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var D=0;D<T.length;D++){var L=T[D],I=0,B=0,N=0;P=void 0;for(var G=new E({comments:h,delimiter:L,newline:o,preview:10}).parse(r),Y=0;Y<G.data.length;Y++)if(a&&y(G.data[Y]))N++;else{var X=G.data[Y].length;B+=X,void 0!==P?0<X&&(I+=Math.abs(X-P),P=X):P=X}0<G.data.length&&(B/=G.data.length-N),(void 0===A||I<=A)&&(void 0===O||O<B)&&1.99<B&&(A=I,S=L,O=B)}return{successful:!!(t.delimiter=S),bestDelimiter:S}}(h,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);P.successful?t.delimiter=P.bestDelimiter:(a=!0,t.delimiter=d.DefaultDelimiter),N.meta.delimiter=t.delimiter}var O=w(t);return t.preview&&t.header&&O.preview++,r=h,o=new E(O),N=o.parse(r,T,S),g(),L?{meta:{paused:!0}}:N||{meta:{paused:!1}}},this.paused=function(){return L},this.pause=function(){L=!0,o.abort(),r=M(t.chunk)?"":r.substring(o.getCharIndex())},this.resume=function(){P.streamer._halted?(L=!1,P.streamer.parseChunk(r,!0)):setTimeout(P.resume,3)},this.aborted=function(){return I},this.abort=function(){I=!0,o.abort(),N.meta.aborted=!0,M(t.complete)&&t.complete(N),r=""}}function j(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function E(t){var r,o=(t=t||{}).delimiter,a=t.newline,h=t.comments,T=t.step,S=t.preview,A=t.fastMode,P=r=void 0===t.quoteChar||null===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(P=t.escapeChar),("string"!=typeof o||-1<d.BAD_DELIMITERS.indexOf(o))&&(o=","),h===o)throw new Error("Comment character same as delimiter");!0===h?h="#":("string"!=typeof h||-1<d.BAD_DELIMITERS.indexOf(h))&&(h=!1),"\n"!==a&&"\r"!==a&&"\r\n"!==a&&(a="\n");var O=0,D=!1;this.parse=function(t,d,L){if("string"!=typeof t)throw new Error("Input must be a string");var I=t.length,B=o.length,N=a.length,G=h.length,Y=M(T),X=[],U=[],z=[],V=O=0;if(!t)return C();if(A||!1!==A&&-1===t.indexOf(r)){for(var W=t.split(a),H=0;H<W.length;H++){if(z=W[H],O+=z.length,H!==W.length-1)O+=a.length;else if(L)return C();if(!h||z.substring(0,G)!==h){if(Y){if(X=[],k(z.split(o)),R(),D)return C()}else k(z.split(o));if(S&&S<=H)return X=X.slice(0,S),C(!0)}}return C()}for(var q=t.indexOf(o,O),Z=t.indexOf(a,O),K=new RegExp(j(P)+j(r),"g"),J=t.indexOf(r,O);;)if(t[O]!==r)if(h&&0===z.length&&t.substring(O,O+G)===h){if(-1===Z)return C();O=Z+N,Z=t.indexOf(a,O),q=t.indexOf(o,O)}else if(-1!==q&&(q<Z||-1===Z))z.push(t.substring(O,q)),O=q+B,q=t.indexOf(o,O);else{if(-1===Z)break;if(z.push(t.substring(O,Z)),w(Z+N),Y&&(R(),D))return C();if(S&&X.length>=S)return C(!0)}else for(J=O,O++;;){if(-1===(J=t.indexOf(r,J+1)))return L||U.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:X.length,index:O}),E();if(J===I-1)return E(t.substring(O,J).replace(K,r));if(r!==P||t[J+1]!==P){if(r===P||0===J||t[J-1]!==P){-1!==q&&q<J+1&&(q=t.indexOf(o,J+1)),-1!==Z&&Z<J+1&&(Z=t.indexOf(a,J+1));var Q=b(-1===Z?q:Math.min(q,Z));if(t.substr(J+1+Q,B)===o){z.push(t.substring(O,J).replace(K,r)),t[O=J+1+Q+B]!==r&&(J=t.indexOf(r,O)),q=t.indexOf(o,O),Z=t.indexOf(a,O);break}var $=b(Z);if(t.substring(J+1+$,J+1+$+N)===a){if(z.push(t.substring(O,J).replace(K,r)),w(J+1+$+N),q=t.indexOf(o,O),J=t.indexOf(r,O),Y&&(R(),D))return C();if(S&&X.length>=S)return C(!0);break}U.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:X.length,index:O}),J++}}else J++}return E();function k(t){X.push(t),V=O}function b(r){var o=0;if(-1!==r){var a=t.substring(J+1,r);a&&""===a.trim()&&(o=a.length)}return o}function E(r){return L||(void 0===r&&(r=t.substring(O)),z.push(r),O=I,k(z),Y&&R()),C()}function w(r){O=r,k(z),z=[],Z=t.indexOf(a,O)}function C(t){return{data:X,errors:U,meta:{delimiter:o,linebreak:a,aborted:D,truncated:!!t,cursor:V+(d||0)}}}function R(){T(C()),X=[],U=[]}},this.abort=function(){D=!0},this.getCharIndex=function(){return O}}function _(t){var r=t.data,o=a[r.workerId],h=!1;if(r.error)o.userError(r.error,r.file);else if(r.results&&r.results.data){var d={abort:function abort(){h=!0,m(r.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:y,resume:y};if(M(o.userStep)){for(var T=0;T<r.results.data.length&&(o.userStep({data:r.results.data[T],errors:r.results.errors,meta:r.results.meta},d),!h);T++);delete r.results}else M(o.userChunk)&&(o.userChunk(r.results,d,r.file),delete r.results)}r.finished&&!h&&m(r.workerId,r.results)}function m(t,r){var o=a[t];M(o.userComplete)&&o.userComplete(r),o.terminate(),delete a[t]}function y(){throw new Error("Not implemented.")}function w(t){if("object"!=_typeof(t)||null===t)return t;var r=Array.isArray(t)?[]:{};for(var o in t)r[o]=w(t[o]);return r}function v(t,r){return function(){t.apply(r,arguments)}}function M(t){return"function"==typeof t}return o&&(t.onmessage=function(r){var o=r.data;if(void 0===d.WORKER_ID&&o&&(d.WORKER_ID=o.workerId),"string"==typeof o.input)t.postMessage({workerId:d.WORKER_ID,results:d.parse(o.input,o.config),finished:!0});else if(t.File&&o.input instanceof File||o.input instanceof Object){var a=d.parse(o.input,o.config);a&&t.postMessage({workerId:d.WORKER_ID,results:a,finished:!0})}}),(l.prototype=Object.create(u.prototype)).constructor=l,(c.prototype=Object.create(u.prototype)).constructor=c,(p.prototype=Object.create(p.prototype)).constructor=p,(g.prototype=Object.create(u.prototype)).constructor=g,d}()}(il);var nl=il.exports,rl=Phaser.Utils.Objects.GetValue,sl=function(){function InstMem(t){_classCallCheck(this,InstMem),this.scenario=t,this.queue=[],this.currentIdx=-1,this.nextIdx=0}return _createClass(InstMem,[{key:"resetFromJSON",value:function resetFromJSON(t){var r=rl(t,"queue",void 0);return void 0===r?We(this.queue):jr(r,this.queue),this.currentIdx=rl(t,"curIdx",-1),this.nextIdx=rl(t,"nextIdx",0),this}},{key:"clear",value:function clear(){return this.currentIdx=-1,this.nextIdx=0,this.queue.length=0,this}},{key:"append",value:function append(t){return this.queue.push(t),this}},{key:"setNextIndex",value:function setNextIndex(t){return void 0===t&&(t=this.currentIdx+1),this.nextIdx=t,this}},{key:"get",value:function get(t){return void 0===t&&(t=this.nextIdx),this.currentIdx=t,this.queue[t]}},{key:"length",get:function get(){return this.queue.length}}]),InstMem}(),ol=function(){function BaseCmd(t,r){_classCallCheck(this,BaseCmd),this.scenario=t,this.type=r}return _createClass(BaseCmd,[{key:"resetFromJSON",value:function resetFromJSON(t){}},{key:"toJSON",value:function toJSON(){return{}}},{key:"parse",value:function parse(t,r){return t}},{key:"run",value:function run(t){}}]),BaseCmd}(),al=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,hl=function convert(t){return"string"!=typeof t||(""===t?t=null:al.test(t)?t=parseFloat(t):"false"===t?t=!1:"true"===t&&(t=!0)),t},ll=Phaser.Utils.Objects.GetValue,ul=function RunCommands(t,r,a){var h,d=ll(a,"reverse",!1);if(o(t[0]))if(d)for(T=(S=t.length)-1;T>=0;T--)h=RunCommands(t[T],r,a);else for(var T=0,S=t.length;T<S;T++)h=RunCommands(t[T],r,a);else h=cl(t,r,a);return h},cl=function RunCommand(t,r,o){var a,h=ll(o,"argsConvert",void 0),d=ll(o,"argsConvertScope",void 0),T=t[0];if(dl=function Copy(t,r,o,a){void 0===o&&(o=0),void 0===a&&(a=r.length),t.length=a-o;for(var h=0,d=t.length;h<d;h++)t[h]=r[h+o];return t}(dl,t,1),h){!0===h&&(h=hl,d=void 0);for(var S=0,A=dl.length;S<A;S++)dl[S]=d?h.call(d,dl[S],t):h(dl[S],t)}return"string"==typeof T?null==(a=r[T])&&(a=ll(r,T,null)):a=T,a.apply(r,dl)},dl=[],fl=Phaser.Utils.Array.SpliceOne,pl=function(t){_inherits(CustomCmd,t);var r=_createSuper(CustomCmd);function CustomCmd(t){var o;return _classCallCheck(this,CustomCmd),(o=r.call(this,t,"-")).task=void 0,o}return _createClass(CustomCmd,[{key:"resetFromJSON",value:function resetFromJSON(t){this.task&&(this.task.off("complete",this.resume,this),this.task=void 0)}},{key:"parse",value:function parse(t,r){var o=fl(t,0),a=this.scenario,h=a.argsConvert,d=a.argsConvertScope;if(h){!0===h&&(h=hl,d=void 0);for(var T=1,S=t.length;T<S;T++)t[T]=d?h.call(d,t[T],t):h(t[T],t)}return t=[o,t]}},{key:"run",value:function run(t){var r=this.scenario,o=ul(t[1],r.scope);o&&"function"==typeof o.once?(o.once("complete",this.resume,this),this.pause(),this.task=o):this.task=void 0}},{key:"pause",value:function pause(){this.scenario.pause()}},{key:"resume",value:function resume(){this.task=void 0;var t=this.scenario;t.resume(),t.runNextCmd()}}]),CustomCmd}(ol),gl=function(t){_inherits(WaitCmd,t);var r=_createSuper(WaitCmd);function WaitCmd(t){return _classCallCheck(this,WaitCmd),r.call(this,t,"wait")}return _createClass(WaitCmd,[{key:"parse",value:function parse(t,r){t.length=2;var o=this.getEventName(t);return isNaN(o)||(t[1]=parseFloat(o)),t}},{key:"run",value:function run(t){var r=this.getEventName(t);"number"==typeof r?this.waitTime(r):this.waitEvent(r)}},{key:"waitTime",value:function waitTime(t){t>this.scenario.offset?(t-=this.scenario.offset,this.scenario.offset=0,this.scenario.isDebugMode&&this.scenario.log("#WAIT: "+t),this.scenario.wait(t)):this.scenario.offset-=t}},{key:"waitEvent",value:function waitEvent(t){this.scenario.isDebugMode&&this.scenario.log("#WAIT: "+t),this.scenario.wait(t)}},{key:"getEventName",value:function getEventName(t){var r=t[1];return null==r&&(r="",t[1]=r),r}}]),WaitCmd}(ol),vl=Phaser.Utils.Objects.GetValue,ml=function(t){_inherits(LabelCmd,t);var r=_createSuper(LabelCmd);function LabelCmd(t){var o;return _classCallCheck(this,LabelCmd),(o=r.call(this,t,"label")).labels={},o.prevLabel="",o.lastLabel="",o}return _createClass(LabelCmd,[{key:"resetFromJSON",value:function resetFromJSON(t){this.prevLabel=vl(t,"preLabel",""),this.lastLabel=vl(t,"lastLabel","");var r=vl(t,"labels",void 0);void 0===r?We(this.labels):jr(r,this.labels)}},{key:"toJSON",value:function toJSON(){return{preLabel:this.prevLabel,lastLabel:this.lastLabel,labels:this.labels}}},{key:"parse",value:function parse(t,r){t.length=2;var o=this.getLabel(t);return this.addLabel(o,r),t}},{key:"run",value:function run(t){var r=this.getLabel(t);this.scenario.isDebugMode&&this.scenario.log("#LABEL: "+r),this.prevLabel=this.lastLabel,this.lastLabel=r;var o=this.scenario;o.emit("labelchange",this.lastLabel,this.prevLabel,o.scope,o)}},{key:"getLabel",value:function getLabel(t){var r=t[1];return null==r&&(r="",t[1]=r),r}},{key:"addLabel",value:function addLabel(t,r){this.labels[t]=r}},{key:"getIndex",value:function getIndex(t){return""!==t&&this.hasLabel(t)?this.labels[t]:0}},{key:"hasLabel",value:function hasLabel(t){return this.labels.hasOwnProperty(t)}}]),LabelCmd}(ol),yl=function(t){_inherits(ExitCmd,t);var r=_createSuper(ExitCmd);function ExitCmd(t){return _classCallCheck(this,ExitCmd),r.call(this,t,"exit")}return _createClass(ExitCmd,[{key:"parse",value:function parse(t,r){return t.length=1,t}},{key:"run",value:function run(t){this.scenario.log("#EXIT"),this.scenario.complete()}}]),ExitCmd}(ol),xl=function(t){_inherits(GotoCmd,t);var r=_createSuper(GotoCmd);function GotoCmd(t){return _classCallCheck(this,GotoCmd),r.call(this,t,"goto")}return _createClass(GotoCmd,[{key:"parse",value:function parse(t,r){return t.length=2,t}},{key:"run",value:function run(t){var r=this.getLabel(t);this.scenario.isDebugMode&&this.scenario.log("#GOTO label: "+r),this.scenario.goto(r)}},{key:"getLabel",value:function getLabel(t){var r=t[1];return null==r&&(r="",t[1]=r),r}}]),GotoCmd}(ol),Tl=function(t){_inherits(IfCmd,t);var r=_createSuper(IfCmd);function IfCmd(t){return _classCallCheck(this,IfCmd),r.call(this,t,"if")}return _createClass(IfCmd,[{key:"parse",value:function parse(t,r){t.length=4;var o="("+this.getCond(t)+")";return t[1]=new Function("return "+o),t}},{key:"run",value:function run(t){var r=this.getCond(t).call(this.scenario.scope),o=r?this.getTrueLabel(t):this.getFalseLabel(t);""!==o&&(this.scenario.isDebugMode&&this.scenario.log("#IF "+r+"- GOTO label: "+o),this.scenario.goto(o))}},{key:"getCond",value:function getCond(t){var r=t[1];return null!=r&&""!==r||(r="true",t[1]=r),r}},{key:"getTrueLabel",value:function getTrueLabel(t){var r=t[2];return null==r&&(r="",t[2]=r),r}},{key:"getFalseLabel",value:function getFalseLabel(t){var r=t[3];return null==r&&(r="",t[3]=r),r}}]),IfCmd}(ol),bl=Phaser.Utils.Objects.GetValue,wl=function(){function CmdHandlers(t){_classCallCheck(this,CmdHandlers),this.cmds={"-":new pl(t),wait:new gl(t),label:new ml(t),exit:new yl(t),goto:new xl(t),if:new Tl(t)}}return _createClass(CmdHandlers,[{key:"resetFromJSON",value:function resetFromJSON(t){for(var r in this.cmds)this.cmds[r].resetFromJSON(bl(t,r,void 0));return this}},{key:"toJSON",value:function toJSON(){var t={};for(var r in this.cmds)t[r]=this.cmds[r].toJSON();return t}},{key:"get",value:function get(t){return this.cmds[t]}},{key:"isValidCmdName",value:function isValidCmdName(t){return this.cmds.hasOwnProperty(t)}}]),CmdHandlers}(),Sl=function(){function CSVScenario(t,r){_classCallCheck(this,CSVScenario),this.setEventEmitter(Dt(r,"eventEmitter",void 0)),this.scene=t,this.timer=void 0,this.instMem=new sl(this),this.cmdHandlers=new wl(this),this.resetFromJSON(r),this.boot()}return _createClass(CSVScenario,[{key:"resetFromJSON",value:function resetFromJSON(t){return this._inRunCmdLoop=!1,this.isRunning=Dt(t,"state",!1),this.isPaused=Dt(t,"pause",!1),this.waitEvent=Dt(t,"wait",void 0),this.scope=Dt(t,"scope",void 0),this.timeUnit=Dt(t,"timeUnit",0),this.cmdPrefix=Dt(t,"prefix",Al),this.argsConvert=Dt(t,"argsConvert",!0),this.argsConvertScope=Dt(t,"argsConvertScope",void 0),this.cmdHandlers.resetFromJSON(Dt(t,"handlers",void 0)),this.instMem.resetFromJSON(Dt(t,"instMem",void 0)),this.delimiter=Dt(t,"delimiter",","),this}},{key:"toJSON",value:function toJSON(){return{state:this.isRunning,pause:this.isPaused,wait:this.waitEvent,scope:this.scope,timeUnit:this.timeUnit,prefix:this.cmdPrefix,argsConvert:this.argsConvert,argsConvertScope:this.argsConvertScope,handlers:this.cmdHandlers.toJSON(),instMem:this.instMem.toJSON(),delimiter:this.delimiter}}},{key:"boot",value:function boot(){this.scene.sys.events.once("shutdown",this.destroy,this)}},{key:"shutdown",value:function shutdown(){this.scene&&(this.destroyEventEmitter(),this.clear(),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0)}},{key:"destroy",value:function destroy(){this.shutdown()}},{key:"load",value:function load(t,r,o){return this.clear(),this.timeUnit=Dt(o,"timeUnit",this.timeUnit),"string"==typeof this.timeUnit&&(this.timeUnit=Cl[this.timeUnit]),this.cmdPrefix=Dt(o,"prefix",this.cmdPrefix),"string"==typeof this.cmdPrefix&&(this.cmdPrefix=new RegExp(this.cmdPrefix)),this.argsConvert=Dt(o,"argsConvert",this.argsConvert),this.argsConvertScope=Dt(o,"argsConvertScope",this.argsConvertScope),this.scope=r,this.delimiter=Dt(o,"delimiter",this.delimiter),this.append(t),this}},{key:"clear",value:function clear(){this.stop(),this.instMem.resetFromJSON(),this.cmdHandlers.resetFromJSON()}},{key:"start",value:function start(t){this.stop();var r=Dt(t,"label","");return this.offset=Dt(t,"offset",0),this.isDebugMode&&this.log("Start at Label: "+r),!!this.goto(r)&&(this.isRunning=!0,this.runNextCmd(),!0)}},{key:"getIndex",value:function getIndex(t){var r=this.getCmdHandler("label").getIndex(t);return null==r&&this.error("Label: "+t+" is not found"),r}},{key:"goto",value:function goto(t){var r;return null!=(r="string"==typeof t?this.getIndex(t):t)&&(this.instMem.setNextIndex(r),!0)}},{key:"wait",value:function wait(t){if(this.waitEvent=t,"number"==typeof t){var r=t;1===this.timeUnit&&(r*=1e3),this.timer=this.scene.time.delayedCall(r,this.continue,[t],this)}return this}},{key:"stop",value:function stop(){return this.isRunning?(this.isRunning=!1,this.isPaused=!1,this.waitEvent=void 0,this.timer&&(this.timer.remove(),this.timer=void 0),this):this}},{key:"complete",value:function complete(){return this.emit("complete",this.scope,this),this.stop(),this}},{key:"append",value:function append(t){var r=nl.parse(t,{delimiter:this.delimiter}).data;return this.parse(r),this}},{key:"pause",value:function pause(){return this.isRunning?(this.isPaused||(this.isPaused=!0,this.timer&&(this.timer.paused=!0)),this):this}},{key:"resume",value:function resume(){return this.isRunning&&this.isPaused?(this.isPaused=!1,this.timer&&(this.timer.paused=!1),this):this}},{key:"continue",value:function _continue(t){return!this.isRunning||this.isPaused||void 0===this.waitEvent||t===this.waitEvent&&(this.timer=void 0,this.waitEvent=void 0,this.runNextCmd()),this}},{key:"lastLabel",get:function get(){return this.cmdHandlers.labelCmd.lastLabel}},{key:"previousLabel",get:function get(){return this.cmdHandlers.labelCmd.preLabel}},{key:"getCmdHandler",value:function getCmdHandler(t){return"string"!=typeof t&&(t=t[0]),this.cmdHandlers.get(t)}},{key:"parse",value:function parse(t){for(var r,o,a=this.cmdPrefix,h=0,d=t.length;h<d;h++)if("-"===(o=(r=t[h])[0]))this.appendCommand(r);else if(isNaN(o))if(a.test(o)){var T=o.match(a);r[0]=T[1].toLowerCase(),this.appendCommand(r)||this.error("Line "+h+": "+JSON.stringify(r)+" is not a valid command")}else this.appendCommand(["wait",o]),r[0]="-",this.appendCommand(r);else{var S=parseFloat(o);S>0&&this.appendCommand(["wait",S]),r[0]="-",this.appendCommand(r)}return this}},{key:"appendCommand",value:function appendCommand(t){var r=this.getCmdHandler(t);return null!=r&&((t=r.parse(t,this.instMem.length))&&this.instMem.append(t),!0)}},{key:"runNextCmd",value:function runNextCmd(){if(!this._inRunCmdLoop){this.threadId;var t,r=this.instMem;for(this._inRunCmdLoop=!0;this.isRunning&&!this.isPaused&&void 0===this.waitEvent;){if(t=r.get(),r.setNextIndex(),null==t){this.complete();break}this.getCmdHandler(t).run(t)}return this._inRunCmdLoop=!1,this}}},{key:"log",value:function log(t){return this.emit("log",t,this.scope,this),this}},{key:"isDebugMode",get:function get(){return this.listenerCount("log")>0}},{key:"error",value:function error(t){return this.emit("error",t,this.scope,this),this}}]),CSVScenario}();Object.assign(Sl.prototype,Ft);var Cl={ms:0,s:1,sec:1},Al=/^#([a-zA-Z]+)/,El=function(t){_inherits(CSVScenarioPlugin,Phaser.Plugins.BasePlugin);var r=_createSuper(CSVScenarioPlugin);function CSVScenarioPlugin(t){return _classCallCheck(this,CSVScenarioPlugin),r.call(this,t)}return _createClass(CSVScenarioPlugin,[{key:"start",value:function start(){this.game.events.on("destroy",this.destroy,this)}},{key:"add",value:function add(t,r){return new Sl(t,r)}}]),CSVScenarioPlugin}();window.SpinePlugin=function(t){var r={};function __webpack_require__(o){if(r[o])return r[o].exports;var a=r[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,__webpack_require__),a.l=!0,a.exports}return __webpack_require__.m=t,__webpack_require__.c=r,__webpack_require__.d=function(t,r,o){__webpack_require__.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:o})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(t,r){if(1&r&&(t=__webpack_require__(t)),8&r)return t;if(4&r&&"object"===_typeof(t)&&t&&t.__esModule)return t;var o=Object.create(null);if(__webpack_require__.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var a in t)__webpack_require__.d(o,a,function(r){return t[r]}.bind(null,a));return o},__webpack_require__.n=function(t){var r=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(r,"a",r),r},__webpack_require__.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=63)}([function(t,r){function getProperty(t,r,o){var a=o?t[r]:Object.getOwnPropertyDescriptor(t,r);return!o&&a.value&&"object"===_typeof(a.value)&&(a=a.value),!(!a||!function hasGetterOrSetter(t){return!!t.get&&"function"==typeof t.get||!!t.set&&"function"==typeof t.set}(a))&&(void 0===a.enumerable&&(a.enumerable=!0),void 0===a.configurable&&(a.configurable=!0),a)}function hasNonConfigurable(t,r){var o=Object.getOwnPropertyDescriptor(t,r);return!!o&&(o.value&&"object"===_typeof(o.value)&&(o=o.value),!1===o.configurable)}function extend(t,r,o,a){for(var h in r)if(r.hasOwnProperty(h)){var d=getProperty(r,h,o);if(!1!==d){if(hasNonConfigurable((a||t).prototype,h)){if(Class.ignoreFinals)continue;throw new Error("cannot override final property '"+h+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,h,d)}else t.prototype[h]=r[h]}}function mixin(t,r){if(r){Array.isArray(r)||(r=[r]);for(var o=0;o<r.length;o++)extend(t,r[o].prototype||r[o])}}function Class(t){var r,o;if(t||(t={}),t.initialize){if("function"!=typeof t.initialize)throw new Error("initialize must be a function");r=t.initialize,delete t.initialize}else if(t.Extends){var a=t.Extends;r=function initialize(){a.apply(this,arguments)}}else r=function initialize(){};t.Extends?(r.prototype=Object.create(t.Extends.prototype),r.prototype.constructor=r,o=t.Extends,delete t.Extends):r.prototype.constructor=r;var h=null;return t.Mixins&&(h=t.Mixins,delete t.Mixins),mixin(r,h),extend(r,t,!0,o),r}Class.extend=extend,Class.mixin=mixin,Class.ignoreFinals=!1,t.exports=Class},function(t,r){t.exports=function NOOP(){}},function(t,r,o){var a=o(0),h=o(32),d=new a({initialize:function Vector2(t,r){this.x=0,this.y=0,"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0):(void 0===r&&(r=t),this.x=t||0,this.y=r||0)},clone:function clone(){return new d(this.x,this.y)},copy:function copy(t){return this.x=t.x||0,this.y=t.y||0,this},setFromObject:function setFromObject(t){return this.x=t.x||0,this.y=t.y||0,this},set:function set(t,r){return void 0===r&&(r=t),this.x=t,this.y=r,this},setTo:function setTo(t,r){return this.set(t,r)},setToPolar:function setToPolar(t,r){return null==r&&(r=1),this.x=Math.cos(t)*r,this.y=Math.sin(t)*r,this},equals:function equals(t){return this.x===t.x&&this.y===t.y},fuzzyEquals:function fuzzyEquals(t,r){return h(this.x,t.x,r)&&h(this.y,t.y,r)},angle:function angle(){var angle=Math.atan2(this.y,this.x);return angle<0&&(angle+=2*Math.PI),angle},setAngle:function setAngle(t){return this.setToPolar(t,this.length())},add:function add(t){return this.x+=t.x,this.y+=t.y,this},subtract:function subtract(t){return this.x-=t.x,this.y-=t.y,this},multiply:function multiply(t){return this.x*=t.x,this.y*=t.y,this},scale:function scale(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function divide(t){return this.x/=t.x,this.y/=t.y,this},negate:function negate(){return this.x=-this.x,this.y=-this.y,this},distance:function distance(t){var r=t.x-this.x,o=t.y-this.y;return Math.sqrt(r*r+o*o)},distanceSq:function distanceSq(t){var r=t.x-this.x,o=t.y-this.y;return r*r+o*o},length:function length(){var t=this.x,r=this.y;return Math.sqrt(t*t+r*r)},setLength:function setLength(t){return this.normalize().scale(t)},lengthSq:function lengthSq(){var t=this.x,r=this.y;return t*t+r*r},normalize:function normalize(){var t=this.x,r=this.y,o=t*t+r*r;return o>0&&(o=1/Math.sqrt(o),this.x=t*o,this.y=r*o),this},normalizeRightHand:function normalizeRightHand(){var t=this.x;return this.x=-1*this.y,this.y=t,this},normalizeLeftHand:function normalizeLeftHand(){var t=this.x;return this.x=this.y,this.y=-1*t,this},dot:function dot(t){return this.x*t.x+this.y*t.y},cross:function cross(t){return this.x*t.y-this.y*t.x},lerp:function lerp(t,r){void 0===r&&(r=0);var o=this.x,a=this.y;return this.x=o+r*(t.x-o),this.y=a+r*(t.y-a),this},transformMat3:function transformMat3(t){var r=this.x,o=this.y,a=t.val;return this.x=a[0]*r+a[3]*o+a[6],this.y=a[1]*r+a[4]*o+a[7],this},transformMat4:function transformMat4(t){var r=this.x,o=this.y,a=t.val;return this.x=a[0]*r+a[4]*o+a[12],this.y=a[1]*r+a[5]*o+a[13],this},reset:function reset(){return this.x=0,this.y=0,this},limit:function limit(t){var r=this.length();return r&&r>t&&this.scale(t/r),this},reflect:function reflect(t){return t=t.clone().normalize(),this.subtract(t.scale(2*this.dot(t)))},mirror:function mirror(t){return this.reflect(t).negate()},rotate:function rotate(t){var r=Math.cos(t),o=Math.sin(t);return this.set(r*this.x-o*this.y,o*this.x+r*this.y)}});d.ZERO=new d,d.RIGHT=new d(1,0),d.LEFT=new d(-1,0),d.UP=new d(0,-1),d.DOWN=new d(0,1),d.ONE=new d(1,1),t.exports=d},function(t,r){t.exports=function Clamp(t,r,o){return Math.max(r,Math.min(o,t))}},function(t,r){var o={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};t.exports=o},function(t,r){t.exports=function SafeRange(t,r,o,a){var h=t.length;if(r<0||r>h||r>=o||o>h||r+o>h){if(a)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},function(t,r){t.exports=function Wrap(t,r,o){var a=o-r;return r+((t-r)%a+a)%a}},function(t,r){t.exports=function IsPlainObject(t){if("object"!==_typeof(t)||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(r){return!1}return!0}},function(t,r,o){var a=o(4);t.exports=function CounterClockwise(t){return t>Math.PI&&(t-=a.PI2),Math.abs(((t+a.TAU)%a.PI2-a.PI2)%a.PI2)}},function(t,r,o){var a=o(4);t.exports=function RadToDeg(t){return t*a.RAD_TO_DEG}},function(t,r){t.exports=function GetValue(t,r,o){if(t&&"number"!=typeof t){if(t.hasOwnProperty(r))return t[r];if(-1!==r.indexOf(".")){for(var a=r.split("."),h=t,d=o,T=0;T<a.length;T++){if(!h.hasOwnProperty(a[T])){d=o;break}d=h[a[T]],h=h[a[T]]}return d}return o}return o}},function(t,r){t.exports=function GetFastValue(t,r,o){var a=_typeof(t);return t&&"number"!==a&&"string"!==a&&t.hasOwnProperty(r)&&void 0!==t[r]?t[r]:o}},function(t,r){t.exports=function SpliceOne(t,r){if(!(r>=t.length)){for(var o=t.length-1,a=t[r],h=r;h<o;h++)t[h]=t[h+1];return t.length=o,a}}},function(t,r,o){var a=o(0),h=o(26),d=new a({initialize:function Point(t,r){void 0===t&&(t=0),void 0===r&&(r=t),this.type=h.POINT,this.x=t,this.y=r},setTo:function setTo(t,r){return void 0===t&&(t=0),void 0===r&&(r=t),this.x=t,this.y=r,this}});t.exports=d},function(t,r,o){var a=new(o(0))({initialize:function Vector3(t,r,o){this.x=0,this.y=0,this.z=0,"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=r||0,this.z=o||0)},up:function up(){return this.x=0,this.y=1,this.z=0,this},min:function min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clone:function clone(){return new a(this.x,this.y,this.z)},addVectors:function addVectors(t,r){return this.x=t.x+r.x,this.y=t.y+r.y,this.z=t.z+r.z,this},crossVectors:function crossVectors(t,r){var o=t.x,a=t.y,h=t.z,d=r.x,T=r.y,S=r.z;return this.x=a*S-h*T,this.y=h*d-o*S,this.z=o*T-a*d,this},equals:function equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},copy:function copy(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},set:function set(t,r,o){return"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=r||0,this.z=o||0),this},setFromMatrixPosition:function setFromMatrixPosition(t){return this.fromArray(t.val,12)},setFromMatrixColumn:function setFromMatrixColumn(t,r){return this.fromArray(t.val,4*r)},fromArray:function fromArray(t,r){return void 0===r&&(r=0),this.x=t[r],this.y=t[r+1],this.z=t[r+2],this},add:function add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this},addScalar:function addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this},addScale:function addScale(t,r){return this.x+=t.x*r,this.y+=t.y*r,this.z+=t.z*r||0,this},subtract:function subtract(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this},multiply:function multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this},scale:function scale(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divide:function divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this},negate:function negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function distance(t){var r=t.x-this.x,o=t.y-this.y,a=t.z-this.z||0;return Math.sqrt(r*r+o*o+a*a)},distanceSq:function distanceSq(t){var r=t.x-this.x,o=t.y-this.y,a=t.z-this.z||0;return r*r+o*o+a*a},length:function length(){var t=this.x,r=this.y,o=this.z;return Math.sqrt(t*t+r*r+o*o)},lengthSq:function lengthSq(){var t=this.x,r=this.y,o=this.z;return t*t+r*r+o*o},normalize:function normalize(){var t=this.x,r=this.y,o=this.z,a=t*t+r*r+o*o;return a>0&&(a=1/Math.sqrt(a),this.x=t*a,this.y=r*a,this.z=o*a),this},dot:function dot(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function cross(t){var r=this.x,o=this.y,a=this.z,h=t.x,d=t.y,T=t.z;return this.x=o*T-a*d,this.y=a*h-r*T,this.z=r*d-o*h,this},lerp:function lerp(t,r){void 0===r&&(r=0);var o=this.x,a=this.y,h=this.z;return this.x=o+r*(t.x-o),this.y=a+r*(t.y-a),this.z=h+r*(t.z-h),this},applyMatrix3:function applyMatrix3(t){var r=this.x,o=this.y,a=this.z,h=t.val;return this.x=h[0]*r+h[3]*o+h[6]*a,this.y=h[1]*r+h[4]*o+h[7]*a,this.z=h[2]*r+h[5]*o+h[8]*a,this},applyMatrix4:function applyMatrix4(t){var r=this.x,o=this.y,a=this.z,h=t.val,d=1/(h[3]*r+h[7]*o+h[11]*a+h[15]);return this.x=(h[0]*r+h[4]*o+h[8]*a+h[12])*d,this.y=(h[1]*r+h[5]*o+h[9]*a+h[13])*d,this.z=(h[2]*r+h[6]*o+h[10]*a+h[14])*d,this},transformMat3:function transformMat3(t){var r=this.x,o=this.y,a=this.z,h=t.val;return this.x=r*h[0]+o*h[3]+a*h[6],this.y=r*h[1]+o*h[4]+a*h[7],this.z=r*h[2]+o*h[5]+a*h[8],this},transformMat4:function transformMat4(t){var r=this.x,o=this.y,a=this.z,h=t.val;return this.x=h[0]*r+h[4]*o+h[8]*a+h[12],this.y=h[1]*r+h[5]*o+h[9]*a+h[13],this.z=h[2]*r+h[6]*o+h[10]*a+h[14],this},transformCoordinates:function transformCoordinates(t){var r=this.x,o=this.y,a=this.z,h=t.val,d=r*h[0]+o*h[4]+a*h[8]+h[12],T=r*h[1]+o*h[5]+a*h[9]+h[13],S=r*h[2]+o*h[6]+a*h[10]+h[14],A=r*h[3]+o*h[7]+a*h[11]+h[15];return this.x=d/A,this.y=T/A,this.z=S/A,this},transformQuat:function transformQuat(t){var r=this.x,o=this.y,a=this.z,h=t.x,d=t.y,T=t.z,S=t.w,A=S*r+d*a-T*o,P=S*o+T*r-h*a,O=S*a+h*o-d*r,D=-h*r-d*o-T*a;return this.x=A*S+D*-h+P*-T-O*-d,this.y=P*S+D*-d+O*-h-A*-T,this.z=O*S+D*-T+A*-d-P*-h,this},project:function project(t){var r=this.x,o=this.y,a=this.z,h=t.val,d=h[0],T=h[1],S=h[2],A=h[3],P=h[4],O=h[5],D=h[6],L=h[7],I=h[8],B=h[9],N=h[10],G=h[11],Y=h[12],X=h[13],U=h[14],z=1/(r*A+o*L+a*G+h[15]);return this.x=(r*d+o*P+a*I+Y)*z,this.y=(r*T+o*O+a*B+X)*z,this.z=(r*S+o*D+a*N+U)*z,this},projectViewMatrix:function projectViewMatrix(t,r){return this.applyMatrix4(t).applyMatrix4(r)},unprojectViewMatrix:function unprojectViewMatrix(t,r){return this.applyMatrix4(t).applyMatrix4(r)},unproject:function unproject(t,r){var o=t.x,a=t.y,h=t.z,d=t.w,T=this.x-o,S=d-this.y-1-a,A=this.z;return this.x=2*T/h-1,this.y=2*S/d-1,this.z=2*A-1,this.project(r)},reset:function reset(){return this.x=0,this.y=0,this.z=0,this}});a.ZERO=new a,a.RIGHT=new a(1,0,0),a.LEFT=new a(-1,0,0),a.UP=new a(0,-1,0),a.DOWN=new a(0,1,0),a.FORWARD=new a(0,0,1),a.BACK=new a(0,0,-1),a.ONE=new a(1,1,1),t.exports=a},function(t,r){t.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},function(t,r,o){var a=o(24),h=o(57);t.exports=function RotateMatrix(t,r){if(void 0===r&&(r=90),!a(t))return null;if("string"!=typeof r&&(r=(r%360+360)%360),90===r||-270===r||"rotateLeft"===r)(t=h(t)).reverse();else if(-90===r||270===r||"rotateRight"===r)t.reverse(),t=h(t);else if(180===Math.abs(r)||"rotate180"===r){for(var o=0;o<t.length;o++)t[o].reverse();t.reverse()}return t}},function(t,r){t.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(t,r){t.exports=function FloatBetween(t,r){return Math.random()*(r-t)+t}},function(t,r,o){var a=o(4);t.exports=function DegToRad(t){return t*a.DEG_TO_RAD}},function(t,r,o){var a=o(0),h=o(14),d=1e-6,T=new a({initialize:function Matrix4(t){this.val=new Float32Array(16),t?this.copy(t):this.identity()},clone:function clone(){return new T(this)},set:function set(t){return this.copy(t)},setValues:function setValues(t,r,o,a,h,d,T,S,A,P,O,D,L,I,B,N){var G=this.val;return G[0]=t,G[1]=r,G[2]=o,G[3]=a,G[4]=h,G[5]=d,G[6]=T,G[7]=S,G[8]=A,G[9]=P,G[10]=O,G[11]=D,G[12]=L,G[13]=I,G[14]=B,G[15]=N,this},copy:function copy(t){var r=t.val;return this.setValues(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])},fromArray:function fromArray(t){return this.setValues(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},zero:function zero(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function transform(t,r,o){var a=S.fromQuat(o).val,h=r.x,d=r.y,T=r.z;return this.setValues(a[0]*h,a[1]*h,a[2]*h,0,a[4]*d,a[5]*d,a[6]*d,0,a[8]*T,a[9]*T,a[10]*T,0,t.x,t.y,t.z,1)},xyz:function xyz(t,r,o){this.identity();var a=this.val;return a[12]=t,a[13]=r,a[14]=o,this},scaling:function scaling(t,r,o){this.zero();var a=this.val;return a[0]=t,a[5]=r,a[10]=o,a[15]=1,this},identity:function identity(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function transpose(){var t=this.val,r=t[1],o=t[2],a=t[3],h=t[6],d=t[7],T=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=r,t[6]=t[9],t[7]=t[13],t[8]=o,t[9]=h,t[11]=t[14],t[12]=a,t[13]=d,t[14]=T,this},getInverse:function getInverse(t){return this.copy(t),this.invert()},invert:function invert(){var t=this.val,r=t[0],o=t[1],a=t[2],h=t[3],d=t[4],T=t[5],S=t[6],A=t[7],P=t[8],O=t[9],D=t[10],L=t[11],I=t[12],B=t[13],N=t[14],G=t[15],Y=r*T-o*d,X=r*S-a*d,U=r*A-h*d,z=o*S-a*T,V=o*A-h*T,W=a*A-h*S,H=P*B-O*I,q=P*N-D*I,Z=P*G-L*I,K=O*N-D*B,J=O*G-L*B,Q=D*G-L*N,$=Y*Q-X*J+U*K+z*Z-V*q+W*H;return $?($=1/$,this.setValues((T*Q-S*J+A*K)*$,(a*J-o*Q-h*K)*$,(B*W-N*V+G*z)*$,(D*V-O*W-L*z)*$,(S*Z-d*Q-A*q)*$,(r*Q-a*Z+h*q)*$,(N*U-I*W-G*X)*$,(P*W-D*U+L*X)*$,(d*J-T*Z+A*H)*$,(o*Z-r*J-h*H)*$,(I*V-B*U+G*Y)*$,(O*U-P*V-L*Y)*$,(T*q-d*K-S*H)*$,(r*K-o*q+a*H)*$,(B*X-I*z-N*Y)*$,(P*z-O*X+D*Y)*$)):this},adjoint:function adjoint(){var t=this.val,r=t[0],o=t[1],a=t[2],h=t[3],d=t[4],T=t[5],S=t[6],A=t[7],P=t[8],O=t[9],D=t[10],L=t[11],I=t[12],B=t[13],N=t[14],G=t[15];return this.setValues(T*(D*G-L*N)-O*(S*G-A*N)+B*(S*L-A*D),-(o*(D*G-L*N)-O*(a*G-h*N)+B*(a*L-h*D)),o*(S*G-A*N)-T*(a*G-h*N)+B*(a*A-h*S),-(o*(S*L-A*D)-T*(a*L-h*D)+O*(a*A-h*S)),-(d*(D*G-L*N)-P*(S*G-A*N)+I*(S*L-A*D)),r*(D*G-L*N)-P*(a*G-h*N)+I*(a*L-h*D),-(r*(S*G-A*N)-d*(a*G-h*N)+I*(a*A-h*S)),r*(S*L-A*D)-d*(a*L-h*D)+P*(a*A-h*S),d*(O*G-L*B)-P*(T*G-A*B)+I*(T*L-A*O),-(r*(O*G-L*B)-P*(o*G-h*B)+I*(o*L-h*O)),r*(T*G-A*B)-d*(o*G-h*B)+I*(o*A-h*T),-(r*(T*L-A*O)-d*(o*L-h*O)+P*(o*A-h*T)),-(d*(O*N-D*B)-P*(T*N-S*B)+I*(T*D-S*O)),r*(O*N-D*B)-P*(o*N-a*B)+I*(o*D-a*O),-(r*(T*N-S*B)-d*(o*N-a*B)+I*(o*S-a*T)),r*(T*D-S*O)-d*(o*D-a*O)+P*(o*S-a*T))},determinant:function determinant(){var t=this.val,r=t[0],o=t[1],a=t[2],h=t[3],d=t[4],T=t[5],S=t[6],A=t[7],P=t[8],O=t[9],D=t[10],L=t[11],I=t[12],B=t[13],N=t[14],G=t[15];return(r*T-o*d)*(D*G-L*N)-(r*S-a*d)*(O*G-L*B)+(r*A-h*d)*(O*N-D*B)+(o*S-a*T)*(P*G-L*I)-(o*A-h*T)*(P*N-D*I)+(a*A-h*S)*(P*B-O*I)},multiply:function multiply(t){var r=this.val,o=r[0],a=r[1],h=r[2],d=r[3],T=r[4],S=r[5],A=r[6],P=r[7],O=r[8],D=r[9],L=r[10],I=r[11],B=r[12],N=r[13],G=r[14],Y=r[15],X=t.val,U=X[0],z=X[1],V=X[2],W=X[3];return r[0]=U*o+z*T+V*O+W*B,r[1]=U*a+z*S+V*D+W*N,r[2]=U*h+z*A+V*L+W*G,r[3]=U*d+z*P+V*I+W*Y,U=X[4],z=X[5],V=X[6],W=X[7],r[4]=U*o+z*T+V*O+W*B,r[5]=U*a+z*S+V*D+W*N,r[6]=U*h+z*A+V*L+W*G,r[7]=U*d+z*P+V*I+W*Y,U=X[8],z=X[9],V=X[10],W=X[11],r[8]=U*o+z*T+V*O+W*B,r[9]=U*a+z*S+V*D+W*N,r[10]=U*h+z*A+V*L+W*G,r[11]=U*d+z*P+V*I+W*Y,U=X[12],z=X[13],V=X[14],W=X[15],r[12]=U*o+z*T+V*O+W*B,r[13]=U*a+z*S+V*D+W*N,r[14]=U*h+z*A+V*L+W*G,r[15]=U*d+z*P+V*I+W*Y,this},multiplyLocal:function multiplyLocal(t){var r=this.val,o=t.val;return this.setValues(r[0]*o[0]+r[1]*o[4]+r[2]*o[8]+r[3]*o[12],r[0]*o[1]+r[1]*o[5]+r[2]*o[9]+r[3]*o[13],r[0]*o[2]+r[1]*o[6]+r[2]*o[10]+r[3]*o[14],r[0]*o[3]+r[1]*o[7]+r[2]*o[11]+r[3]*o[15],r[4]*o[0]+r[5]*o[4]+r[6]*o[8]+r[7]*o[12],r[4]*o[1]+r[5]*o[5]+r[6]*o[9]+r[7]*o[13],r[4]*o[2]+r[5]*o[6]+r[6]*o[10]+r[7]*o[14],r[4]*o[3]+r[5]*o[7]+r[6]*o[11]+r[7]*o[15],r[8]*o[0]+r[9]*o[4]+r[10]*o[8]+r[11]*o[12],r[8]*o[1]+r[9]*o[5]+r[10]*o[9]+r[11]*o[13],r[8]*o[2]+r[9]*o[6]+r[10]*o[10]+r[11]*o[14],r[8]*o[3]+r[9]*o[7]+r[10]*o[11]+r[11]*o[15],r[12]*o[0]+r[13]*o[4]+r[14]*o[8]+r[15]*o[12],r[12]*o[1]+r[13]*o[5]+r[14]*o[9]+r[15]*o[13],r[12]*o[2]+r[13]*o[6]+r[14]*o[10]+r[15]*o[14],r[12]*o[3]+r[13]*o[7]+r[14]*o[11]+r[15]*o[15])},premultiply:function premultiply(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function multiplyMatrices(t,r){var o=t.val,a=r.val,h=o[0],d=o[4],T=o[8],S=o[12],A=o[1],P=o[5],O=o[9],D=o[13],L=o[2],I=o[6],B=o[10],N=o[14],G=o[3],Y=o[7],X=o[11],U=o[15],z=a[0],V=a[4],W=a[8],H=a[12],q=a[1],Z=a[5],K=a[9],J=a[13],Q=a[2],$=a[6],tt=a[10],et=a[14],it=a[3],nt=a[7],rt=a[11],st=a[15];return this.setValues(h*z+d*q+T*Q+S*it,A*z+P*q+O*Q+D*it,L*z+I*q+B*Q+N*it,G*z+Y*q+X*Q+U*it,h*V+d*Z+T*$+S*nt,A*V+P*Z+O*$+D*nt,L*V+I*Z+B*$+N*nt,G*V+Y*Z+X*$+U*nt,h*W+d*K+T*tt+S*rt,A*W+P*K+O*tt+D*rt,L*W+I*K+B*tt+N*rt,G*W+Y*K+X*tt+U*rt,h*H+d*J+T*et+S*st,A*H+P*J+O*et+D*st,L*H+I*J+B*et+N*st,G*H+Y*J+X*et+U*st)},translate:function translate(t){return this.translateXYZ(t.x,t.y,t.z)},translateXYZ:function translateXYZ(t,r,o){var a=this.val;return a[12]=a[0]*t+a[4]*r+a[8]*o+a[12],a[13]=a[1]*t+a[5]*r+a[9]*o+a[13],a[14]=a[2]*t+a[6]*r+a[10]*o+a[14],a[15]=a[3]*t+a[7]*r+a[11]*o+a[15],this},scale:function scale(t){return this.scaleXYZ(t.x,t.y,t.z)},scaleXYZ:function scaleXYZ(t,r,o){var a=this.val;return a[0]=a[0]*t,a[1]=a[1]*t,a[2]=a[2]*t,a[3]=a[3]*t,a[4]=a[4]*r,a[5]=a[5]*r,a[6]=a[6]*r,a[7]=a[7]*r,a[8]=a[8]*o,a[9]=a[9]*o,a[10]=a[10]*o,a[11]=a[11]*o,this},makeRotationAxis:function makeRotationAxis(t,r){var o=Math.cos(r),a=Math.sin(r),h=1-o,d=t.x,T=t.y,S=t.z,A=h*d,P=h*T;return this.setValues(A*d+o,A*T-a*S,A*S+a*T,0,A*T+a*S,P*T+o,P*S-a*d,0,A*S-a*T,P*S+a*d,h*S*S+o,0,0,0,0,1)},rotate:function rotate(t,r){var o=this.val,a=r.x,h=r.y,T=r.z,S=Math.sqrt(a*a+h*h+T*T);if(Math.abs(S)<d)return this;a*=S=1/S,h*=S,T*=S;var A=Math.sin(t),P=Math.cos(t),O=1-P,D=o[0],L=o[1],I=o[2],B=o[3],N=o[4],G=o[5],Y=o[6],X=o[7],U=o[8],z=o[9],V=o[10],W=o[11],H=o[12],q=o[13],Z=o[14],K=o[15],J=a*a*O+P,Q=h*a*O+T*A,$=T*a*O-h*A,tt=a*h*O-T*A,et=h*h*O+P,it=T*h*O+a*A,nt=a*T*O+h*A,rt=h*T*O-a*A,st=T*T*O+P;return this.setValues(D*J+N*Q+U*$,L*J+G*Q+z*$,I*J+Y*Q+V*$,B*J+X*Q+W*$,D*tt+N*et+U*it,L*tt+G*et+z*it,I*tt+Y*et+V*it,B*tt+X*et+W*it,D*nt+N*rt+U*st,L*nt+G*rt+z*st,I*nt+Y*rt+V*st,B*nt+X*rt+W*st,H,q,Z,K)},rotateX:function rotateX(t){var r=this.val,o=Math.sin(t),a=Math.cos(t),h=r[4],d=r[5],T=r[6],S=r[7],A=r[8],P=r[9],O=r[10],D=r[11];return r[4]=h*a+A*o,r[5]=d*a+P*o,r[6]=T*a+O*o,r[7]=S*a+D*o,r[8]=A*a-h*o,r[9]=P*a-d*o,r[10]=O*a-T*o,r[11]=D*a-S*o,this},rotateY:function rotateY(t){var r=this.val,o=Math.sin(t),a=Math.cos(t),h=r[0],d=r[1],T=r[2],S=r[3],A=r[8],P=r[9],O=r[10],D=r[11];return r[0]=h*a-A*o,r[1]=d*a-P*o,r[2]=T*a-O*o,r[3]=S*a-D*o,r[8]=h*o+A*a,r[9]=d*o+P*a,r[10]=T*o+O*a,r[11]=S*o+D*a,this},rotateZ:function rotateZ(t){var r=this.val,o=Math.sin(t),a=Math.cos(t),h=r[0],d=r[1],T=r[2],S=r[3],A=r[4],P=r[5],O=r[6],D=r[7];return r[0]=h*a+A*o,r[1]=d*a+P*o,r[2]=T*a+O*o,r[3]=S*a+D*o,r[4]=A*a-h*o,r[5]=P*a-d*o,r[6]=O*a-T*o,r[7]=D*a-S*o,this},fromRotationTranslation:function fromRotationTranslation(t,r){var o=t.x,a=t.y,h=t.z,d=t.w,T=o+o,S=a+a,A=h+h,P=o*T,O=o*S,D=o*A,L=a*S,I=a*A,B=h*A,N=d*T,G=d*S,Y=d*A;return this.setValues(1-(L+B),O+Y,D-G,0,O-Y,1-(P+B),I+N,0,D+G,I-N,1-(P+L),0,r.x,r.y,r.z,1)},fromQuat:function fromQuat(t){var r=t.x,o=t.y,a=t.z,h=t.w,d=r+r,T=o+o,S=a+a,A=r*d,P=r*T,O=r*S,D=o*T,L=o*S,I=a*S,B=h*d,N=h*T,G=h*S;return this.setValues(1-(D+I),P+G,O-N,0,P-G,1-(A+I),L+B,0,O+N,L-B,1-(A+D),0,0,0,0,1)},frustum:function frustum(t,r,o,a,h,d){var T=1/(r-t),S=1/(a-o),A=1/(h-d);return this.setValues(2*h*T,0,0,0,0,2*h*S,0,0,(r+t)*T,(a+o)*S,(d+h)*A,-1,0,0,d*h*2*A,0)},perspective:function perspective(t,r,o,a){var h=1/Math.tan(t/2),d=1/(o-a);return this.setValues(h/r,0,0,0,0,h,0,0,0,0,(a+o)*d,-1,0,0,2*a*o*d,0)},perspectiveLH:function perspectiveLH(t,r,o,a){return this.setValues(2*o/t,0,0,0,0,2*o/r,0,0,0,0,-a/(o-a),1,0,0,o*a/(o-a),0)},ortho:function ortho(t,r,o,a,h,d){var T=t-r,S=o-a,A=h-d;return T=0===T?T:1/T,S=0===S?S:1/S,A=0===A?A:1/A,this.setValues(-2*T,0,0,0,0,-2*S,0,0,0,0,2*A,0,(t+r)*T,(a+o)*S,(d+h)*A,1)},lookAtRH:function lookAtRH(t,r,o){var a=this.val;return D.subVectors(t,r),0===D.getLengthSquared()&&(D.z=1),D.normalize(),P.crossVectors(o,D),0===P.getLengthSquared()&&(1===Math.abs(o.z)?D.x+=1e-4:D.z+=1e-4,D.normalize(),P.crossVectors(o,D)),P.normalize(),O.crossVectors(D,P),a[0]=P.x,a[1]=P.y,a[2]=P.z,a[4]=O.x,a[5]=O.y,a[6]=O.z,a[8]=D.x,a[9]=D.y,a[10]=D.z,this},lookAt:function lookAt(t,r,o){var a=t.x,h=t.y,T=t.z,S=o.x,A=o.y,P=o.z,O=r.x,D=r.y,L=r.z;if(Math.abs(a-O)<d&&Math.abs(h-D)<d&&Math.abs(T-L)<d)return this.identity();var I=a-O,B=h-D,N=T-L,G=1/Math.sqrt(I*I+B*B+N*N),Y=A*(N*=G)-P*(B*=G),X=P*(I*=G)-S*N,U=S*B-A*I;(G=Math.sqrt(Y*Y+X*X+U*U))?(Y*=G=1/G,X*=G,U*=G):(Y=0,X=0,U=0);var z=B*U-N*X,V=N*Y-I*U,W=I*X-B*Y;return(G=Math.sqrt(z*z+V*V+W*W))?(z*=G=1/G,V*=G,W*=G):(z=0,V=0,W=0),this.setValues(Y,z,I,0,X,V,B,0,U,W,N,0,-(Y*a+X*h+U*T),-(z*a+V*h+W*T),-(I*a+B*h+N*T),1)},yawPitchRoll:function yawPitchRoll(t,r,o){this.zero(),S.zero(),A.zero();var a=this.val,h=S.val,d=A.val,T=Math.sin(o),P=Math.cos(o);return a[10]=1,a[15]=1,a[0]=P,a[1]=T,a[4]=-T,a[5]=P,T=Math.sin(r),P=Math.cos(r),h[0]=1,h[15]=1,h[5]=P,h[10]=P,h[9]=-T,h[6]=T,T=Math.sin(t),P=Math.cos(t),d[5]=1,d[15]=1,d[0]=P,d[2]=-T,d[8]=T,d[10]=P,this.multiplyLocal(S),this.multiplyLocal(A),this},setWorldMatrix:function setWorldMatrix(t,r,o,a,h){return this.yawPitchRoll(t.y,t.x,t.z),S.scaling(o.x,o.y,o.z),A.xyz(r.x,r.y,r.z),this.multiplyLocal(S),this.multiplyLocal(A),a&&this.multiplyLocal(a),h&&this.multiplyLocal(h),this},multiplyToMat4:function multiplyToMat4(t,r){var o=this.val,a=t.val,h=o[0],d=o[1],T=o[2],S=o[3],A=o[4],P=o[5],O=o[6],D=o[7],L=o[8],I=o[9],B=o[10],N=o[11],G=o[12],Y=o[13],X=o[14],U=o[15],z=a[0],V=a[1],W=a[2],H=a[3],q=a[4],Z=a[5],K=a[6],J=a[7],Q=a[8],$=a[9],tt=a[10],et=a[11],it=a[12],nt=a[13],rt=a[14],st=a[15];return r.setValues(z*h+V*A+W*L+H*G,V*d+V*P+W*I+H*Y,W*T+V*O+W*B+H*X,H*S+V*D+W*N+H*U,q*h+Z*A+K*L+J*G,q*d+Z*P+K*I+J*Y,q*T+Z*O+K*B+J*X,q*S+Z*D+K*N+J*U,Q*h+$*A+tt*L+et*G,Q*d+$*P+tt*I+et*Y,Q*T+$*O+tt*B+et*X,Q*S+$*D+tt*N+et*U,it*h+nt*A+rt*L+st*G,it*d+nt*P+rt*I+st*Y,it*T+nt*O+rt*B+st*X,it*S+nt*D+rt*N+st*U)},fromRotationXYTranslation:function fromRotationXYTranslation(t,r,o){var a=r.x,h=r.y,d=r.z,T=Math.sin(t.x),S=Math.cos(t.x),A=Math.sin(t.y),P=Math.cos(t.y),O=a,D=h,L=d,I=-T,B=0-I*A,N=0-S*A,G=I*P,Y=S*P;return o||(O=P*a+A*d,D=B*a+S*h+G*d,L=N*a+T*h+Y*d),this.setValues(P,B,N,0,0,S,T,0,A,G,Y,0,O,D,L,1)},getMaxScaleOnAxis:function getMaxScaleOnAxis(){var t=this.val,r=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],o=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],a=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(r,o,a))}}),S=new T,A=new T,P=new h,O=new h,D=new h;t.exports=T},function(t,r,o){var a=o(0),h=o(15),d=o(205),T=o(11),S=o(216),A=o(45),P=o(217),O=o(46),D=new a({initialize:function File(t,r){this.loader=t,this.cache=T(r,"cache",!1),this.type=T(r,"type",!1),this.key=T(r,"key",!1);var o=this.key;if(t.prefix&&""!==t.prefix&&(this.key=t.prefix+o),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var a=T(r,"url");void 0===a?a=t.path+o+"."+T(r,"extension",""):"string"!=typeof a||a.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)||(a=t.path+a),this.url=a,this.src="",this.xhrSettings=O(T(r,"responseType",void 0)),T(r,"xhrSettings",!1)&&(this.xhrSettings=A(this.xhrSettings,T(r,"xhrSettings",{}))),this.xhrLoader=null,this.state="function"==typeof this.url?h.FILE_POPULATED:h.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=T(r,"config",{}),this.multiFile,this.linkFile},setLink:function setLink(t){this.linkFile=t,t.linkFile=this},resetXHR:function resetXHR(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function load(){this.state===h.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=h.FILE_LOADING,this.src=S(this,this.loader.baseURL),0===this.src.indexOf("data:")?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=P(this,this.loader.xhr))},onLoad:function onLoad(t,r){var o=t.responseURL&&0===t.responseURL.indexOf("file://")&&0===r.target.status,a=!(r.target&&200!==r.target.status)||o;4===t.readyState&&t.status>=400&&t.status<=599&&(a=!1),this.state=h.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,a)},onError:function onError(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function onProgress(t){t.lengthComputable&&(this.bytesLoaded=t.loaded,this.bytesTotal=t.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(d.FILE_PROGRESS,this,this.percentComplete))},onProcess:function onProcess(){this.state=h.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function onProcessComplete(){this.state=h.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function onProcessError(){this.state=h.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function hasCacheConflict(){return this.cache&&this.cache.exists(this.key)},addToCache:function addToCache(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function pendingDestroy(t){void 0===t&&(t=this.data);var r=this.key,o=this.type;this.loader.emit(d.FILE_COMPLETE,r,o,t),this.loader.emit(d.FILE_KEY_COMPLETE+o+"-"+r,r,o,t),this.loader.flagForRemoval(this)},destroy:function destroy(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});D.createObjectURL=function(t,r,o){if("function"==typeof URL)t.src=URL.createObjectURL(r);else{var a=new FileReader;a.onload=function(){t.removeAttribute("crossOrigin"),t.src="data:"+(r.type||o)+";base64,"+a.result.split(",")[1]},a.onerror=t.onerror,a.readAsDataURL(r)}},D.revokeObjectURL=function(t){"function"==typeof URL&&URL.revokeObjectURL(t.src)},t.exports=D},function(t,r){var o={},a={install:function install(t){for(var r in o)t[r]=o[r]},register:function register(t,r){o[t]=r},destroy:function destroy(){o={}}};t.exports=a},function(t,r,o){var a=o(0),h=o(4),d=o(2),T=new a({initialize:function TransformMatrix(t,r,o,a,h,d){void 0===t&&(t=1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=1),void 0===h&&(h=0),void 0===d&&(d=0),this.matrix=new Float32Array([t,r,o,a,h,d,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function get(){return this.matrix[0]},set:function set(t){this.matrix[0]=t}},b:{get:function get(){return this.matrix[1]},set:function set(t){this.matrix[1]=t}},c:{get:function get(){return this.matrix[2]},set:function set(t){this.matrix[2]=t}},d:{get:function get(){return this.matrix[3]},set:function set(t){this.matrix[3]=t}},e:{get:function get(){return this.matrix[4]},set:function set(t){this.matrix[4]=t}},f:{get:function get(){return this.matrix[5]},set:function set(t){this.matrix[5]=t}},tx:{get:function get(){return this.matrix[4]},set:function set(t){this.matrix[4]=t}},ty:{get:function get(){return this.matrix[5]},set:function set(t){this.matrix[5]=t}},rotation:{get:function get(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function get(){var t=this.matrix,r=t[0],o=t[1],a=t[2],d=t[3];return r||o?o>0?Math.acos(r/this.scaleX):-Math.acos(r/this.scaleX):a||d?h.TAU-(d>0?Math.acos(-a/this.scaleY):-Math.acos(a/this.scaleY)):0}},scaleX:{get:function get(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function get(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function loadIdentity(){var t=this.matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},translate:function translate(t,r){var o=this.matrix;return o[4]=o[0]*t+o[2]*r+o[4],o[5]=o[1]*t+o[3]*r+o[5],this},scale:function scale(t,r){var o=this.matrix;return o[0]*=t,o[1]*=t,o[2]*=r,o[3]*=r,this},rotate:function rotate(t){var r=Math.sin(t),o=Math.cos(t),a=this.matrix,h=a[0],d=a[1],T=a[2],S=a[3];return a[0]=h*o+T*r,a[1]=d*o+S*r,a[2]=h*-r+T*o,a[3]=d*-r+S*o,this},multiply:function multiply(t,r){var o=this.matrix,a=t.matrix,h=o[0],d=o[1],T=o[2],S=o[3],A=o[4],P=o[5],O=a[0],D=a[1],L=a[2],I=a[3],B=a[4],N=a[5],G=void 0===r?this:r;return G.a=O*h+D*T,G.b=O*d+D*S,G.c=L*h+I*T,G.d=L*d+I*S,G.e=B*h+N*T+A,G.f=B*d+N*S+P,G},multiplyWithOffset:function multiplyWithOffset(t,r,o){var a=this.matrix,h=t.matrix,d=a[0],T=a[1],S=a[2],A=a[3],P=r*d+o*S+a[4],O=r*T+o*A+a[5],D=h[0],L=h[1],I=h[2],B=h[3],N=h[4],G=h[5];return a[0]=D*d+L*S,a[1]=D*T+L*A,a[2]=I*d+B*S,a[3]=I*T+B*A,a[4]=N*d+G*S+P,a[5]=N*T+G*A+O,this},transform:function transform(t,r,o,a,h,d){var T=this.matrix,S=T[0],A=T[1],P=T[2],O=T[3],D=T[4],L=T[5];return T[0]=t*S+r*P,T[1]=t*A+r*O,T[2]=o*S+a*P,T[3]=o*A+a*O,T[4]=h*S+d*P+D,T[5]=h*A+d*O+L,this},transformPoint:function transformPoint(t,r,o){void 0===o&&(o={x:0,y:0});var a=this.matrix,h=a[0],d=a[1],T=a[2],S=a[3],A=a[4],P=a[5];return o.x=t*h+r*T+A,o.y=t*d+r*S+P,o},invert:function invert(){var t=this.matrix,r=t[0],o=t[1],a=t[2],h=t[3],d=t[4],T=t[5],S=r*h-o*a;return t[0]=h/S,t[1]=-o/S,t[2]=-a/S,t[3]=r/S,t[4]=(a*T-h*d)/S,t[5]=-(r*T-o*d)/S,this},copyFrom:function copyFrom(t){var r=this.matrix;return r[0]=t.a,r[1]=t.b,r[2]=t.c,r[3]=t.d,r[4]=t.e,r[5]=t.f,this},copyFromArray:function copyFromArray(t){var r=this.matrix;return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],this},copyToContext:function copyToContext(t){var r=this.matrix;return t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),t},setToContext:function setToContext(t){var r=this.matrix;return t.setTransform(r[0],r[1],r[2],r[3],r[4],r[5]),t},copyToArray:function copyToArray(t){var r=this.matrix;return void 0===t?t=[r[0],r[1],r[2],r[3],r[4],r[5]]:(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5]),t},setTransform:function setTransform(t,r,o,a,h,d){var T=this.matrix;return T[0]=t,T[1]=r,T[2]=o,T[3]=a,T[4]=h,T[5]=d,this},decomposeMatrix:function decomposeMatrix(){var t=this.decomposedMatrix,r=this.matrix,o=r[0],a=r[1],h=r[2],d=r[3],T=o*d-a*h;if(t.translateX=r[4],t.translateY=r[5],o||a){var S=Math.sqrt(o*o+a*a);t.rotation=a>0?Math.acos(o/S):-Math.acos(o/S),t.scaleX=S,t.scaleY=T/S}else if(h||d){var A=Math.sqrt(h*h+d*d);t.rotation=.5*Math.PI-(d>0?Math.acos(-h/A):-Math.acos(h/A)),t.scaleX=T/A,t.scaleY=A}else t.rotation=0,t.scaleX=0,t.scaleY=0;return t},applyITRS:function applyITRS(t,r,o,a,h){var d=this.matrix,T=Math.sin(o),S=Math.cos(o);return d[4]=t,d[5]=r,d[0]=S*a,d[1]=T*a,d[2]=-T*h,d[3]=S*h,this},applyInverse:function applyInverse(t,r,o){void 0===o&&(o=new d);var a=this.matrix,h=a[0],T=a[1],S=a[2],A=a[3],P=a[4],O=a[5],D=1/(h*A+S*-T);return o.x=A*D*t+-S*D*r+(O*S-P*A)*D,o.y=h*D*r+-T*D*t+(-O*h+P*T)*D,o},getX:function getX(t,r){return t*this.a+r*this.c+this.e},getY:function getY(t,r){return t*this.b+r*this.d+this.f},getXRound:function getXRound(t,r,o){var a=this.getX(t,r);return o&&(a=Math.round(a)),a},getYRound:function getYRound(t,r,o){var a=this.getY(t,r);return o&&(a=Math.round(a)),a},getCSSMatrix:function getCSSMatrix(){var t=this.matrix;return"matrix("+t[0]+","+t[1]+","+t[2]+","+t[3]+","+t[4]+","+t[5]+")"},destroy:function destroy(){this.matrix=null,this.decomposedMatrix=null}});t.exports=T},function(t,r){t.exports=function CheckMatrix(t){if(!Array.isArray(t)||t.length<2||!Array.isArray(t[0]))return!1;for(var r=t[0].length,o=1;o<t.length;o++)if(t[o].length!==r)return!1;return!0}},function(t,r,o){var a=o(0),h=o(299),d=o(61),T=o(300),S=o(26),A=o(301),P=o(306),O=new a({initialize:function Rectangle(t,r,o,a){void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),this.type=S.RECTANGLE,this.x=t,this.y=r,this.width=o,this.height=a},contains:function contains(t,r){return h(this,t,r)},getPoint:function getPoint(t,r){return d(this,t,r)},getPoints:function getPoints(t,r,o){return T(this,t,r,o)},getRandomPoint:function getRandomPoint(t){return P(this,t)},setTo:function setTo(t,r,o,a){return this.x=t,this.y=r,this.width=o,this.height=a,this},setEmpty:function setEmpty(){return this.setTo(0,0,0,0)},setPosition:function setPosition(t,r){return void 0===r&&(r=t),this.x=t,this.y=r,this},setSize:function setSize(t,r){return void 0===r&&(r=t),this.width=t,this.height=r,this},isEmpty:function isEmpty(){return this.width<=0||this.height<=0},getLineA:function getLineA(t){return void 0===t&&(t=new A),t.setTo(this.x,this.y,this.right,this.y),t},getLineB:function getLineB(t){return void 0===t&&(t=new A),t.setTo(this.right,this.y,this.right,this.bottom),t},getLineC:function getLineC(t){return void 0===t&&(t=new A),t.setTo(this.right,this.bottom,this.x,this.bottom),t},getLineD:function getLineD(t){return void 0===t&&(t=new A),t.setTo(this.x,this.bottom,this.x,this.y),t},left:{get:function get(){return this.x},set:function set(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}},right:{get:function get(){return this.x+this.width},set:function set(t){t<=this.x?this.width=0:this.width=t-this.x}},top:{get:function get(){return this.y},set:function set(t){t>=this.bottom?this.height=0:this.height=this.bottom-t,this.y=t}},bottom:{get:function get(){return this.y+this.height},set:function set(t){t<=this.y?this.height=0:this.height=t-this.y}},centerX:{get:function get(){return this.x+this.width/2},set:function set(t){this.x=t-this.width/2}},centerY:{get:function get(){return this.y+this.height/2},set:function set(t){this.y=t-this.height/2}}});t.exports=O},function(t,r){t.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},function(t,r,o){var a=o(7);t.exports=function Extend(){var t,r,o,h,d,T,S=arguments[0]||{},A=1,P=arguments.length,O=!1;for("boolean"==typeof S&&(O=S,S=arguments[1]||{},A=2),P===A&&(S=this,--A);A<P;A++)if(null!=(t=arguments[A]))for(r in t)o=S[r],S!==(h=t[r])&&(O&&h&&(a(h)||(d=Array.isArray(h)))?(d?(d=!1,T=o&&Array.isArray(o)?o:[]):T=o&&a(o)?o:{},S[r]=Extend(O,T,h)):void 0!==h&&(S[r]=h));return S}},function(t,r){t.exports=function Between(t,r,o,a){return Math.atan2(a-r,o-t)}},function(t,r){t.exports=function Normalize(t){return(t%=2*Math.PI)>=0?t:t+2*Math.PI}},function(t,r,o){var a=o(6);t.exports=function Wrap(t){return a(t,-Math.PI,Math.PI)}},function(t,r,o){var a=o(6);t.exports=function WrapDegrees(t){return a(t,-180,180)}},function(t,r){t.exports=function Equal(t,r,o){return void 0===o&&(o=1e-4),Math.abs(t-r)<o}},function(t,r,o){var a=o(34);t.exports=function Bernstein(t,r){return a(t)/a(r)/a(t-r)}},function(t,r){t.exports=function Factorial(t){if(0===t)return 1;for(var r=t;--t;)r*=t;return r}},function(t,r){t.exports=function CatmullRom(t,r,o,a,h){var d=.5*(a-r),T=.5*(h-o),S=t*t;return(2*o-2*a+d+T)*(t*S)+(-3*o+3*a-2*d-T)*S+d*t+o}},function(t,r){t.exports=function Linear(t,r,o){return(r-t)*o+t}},function(t,r){t.exports=function SmoothStep(t,r,o){return t<=r?0:t>=o?1:(t=(t-r)/(o-r))*t*(3-2*t)}},function(t,r){t.exports=function SmootherStep(t,r,o){return(t=Math.max(0,Math.min(1,(t-r)/(o-r))))*t*t*(t*(6*t-15)+10)}},function(t,r){t.exports=function RotateAround(t,r,o,a){var h=Math.cos(a),d=Math.sin(a),T=t.x-r,S=t.y-o;return t.x=T*h-S*d+r,t.y=T*d+S*h+o,t}},function(t,r){t.exports=function RoundAwayFromZero(t){return t>0?Math.ceil(t):Math.floor(t)}},function(t,r,o){var a=o(2);t.exports=function TransformXY(t,r,o,h,d,T,S,A){void 0===A&&(A=new a);var P=Math.sin(d),O=Math.cos(d),D=O*T,L=P*T,I=-P*S,B=O*S,N=1/(D*B+I*-L);return A.x=B*N*t+-I*N*r+(h*I-o*B)*N,A.y=D*N*r+-L*N*t+(-h*D+o*L)*N,A}},function(t,r,o){var a=new(o(0))({initialize:function Matrix3(t){this.val=new Float32Array(9),t?this.copy(t):this.identity()},clone:function clone(){return new a(this)},set:function set(t){return this.copy(t)},copy:function copy(t){var r=this.val,o=t.val;return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],this},fromMat4:function fromMat4(t){var r=t.val,o=this.val;return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[4],o[4]=r[5],o[5]=r[6],o[6]=r[8],o[7]=r[9],o[8]=r[10],this},fromArray:function fromArray(t){var r=this.val;return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],this},identity:function identity(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},transpose:function transpose(){var t=this.val,r=t[1],o=t[2],a=t[5];return t[1]=t[3],t[2]=t[6],t[3]=r,t[5]=t[7],t[6]=o,t[7]=a,this},invert:function invert(){var t=this.val,r=t[0],o=t[1],a=t[2],h=t[3],d=t[4],T=t[5],S=t[6],A=t[7],P=t[8],O=P*d-T*A,D=-P*h+T*S,L=A*h-d*S,I=r*O+o*D+a*L;return I?(I=1/I,t[0]=O*I,t[1]=(-P*o+a*A)*I,t[2]=(T*o-a*d)*I,t[3]=D*I,t[4]=(P*r-a*S)*I,t[5]=(-T*r+a*h)*I,t[6]=L*I,t[7]=(-A*r+o*S)*I,t[8]=(d*r-o*h)*I,this):null},adjoint:function adjoint(){var t=this.val,r=t[0],o=t[1],a=t[2],h=t[3],d=t[4],T=t[5],S=t[6],A=t[7],P=t[8];return t[0]=d*P-T*A,t[1]=a*A-o*P,t[2]=o*T-a*d,t[3]=T*S-h*P,t[4]=r*P-a*S,t[5]=a*h-r*T,t[6]=h*A-d*S,t[7]=o*S-r*A,t[8]=r*d-o*h,this},determinant:function determinant(){var t=this.val,r=t[0],o=t[1],a=t[2],h=t[3],d=t[4],T=t[5],S=t[6],A=t[7],P=t[8];return r*(P*d-T*A)+o*(-P*h+T*S)+a*(A*h-d*S)},multiply:function multiply(t){var r=this.val,o=r[0],a=r[1],h=r[2],d=r[3],T=r[4],S=r[5],A=r[6],P=r[7],O=r[8],D=t.val,L=D[0],I=D[1],B=D[2],N=D[3],G=D[4],Y=D[5],X=D[6],U=D[7],z=D[8];return r[0]=L*o+I*d+B*A,r[1]=L*a+I*T+B*P,r[2]=L*h+I*S+B*O,r[3]=N*o+G*d+Y*A,r[4]=N*a+G*T+Y*P,r[5]=N*h+G*S+Y*O,r[6]=X*o+U*d+z*A,r[7]=X*a+U*T+z*P,r[8]=X*h+U*S+z*O,this},translate:function translate(t){var r=this.val,o=t.x,a=t.y;return r[6]=o*r[0]+a*r[3]+r[6],r[7]=o*r[1]+a*r[4]+r[7],r[8]=o*r[2]+a*r[5]+r[8],this},rotate:function rotate(t){var r=this.val,o=r[0],a=r[1],h=r[2],d=r[3],T=r[4],S=r[5],A=Math.sin(t),P=Math.cos(t);return r[0]=P*o+A*d,r[1]=P*a+A*T,r[2]=P*h+A*S,r[3]=P*d-A*o,r[4]=P*T-A*a,r[5]=P*S-A*h,this},scale:function scale(t){var r=this.val,o=t.x,a=t.y;return r[0]=o*r[0],r[1]=o*r[1],r[2]=o*r[2],r[3]=a*r[3],r[4]=a*r[4],r[5]=a*r[5],this},fromQuat:function fromQuat(t){var r=t.x,o=t.y,a=t.z,h=t.w,d=r+r,T=o+o,S=a+a,A=r*d,P=r*T,O=r*S,D=o*T,L=o*S,I=a*S,B=h*d,N=h*T,G=h*S,Y=this.val;return Y[0]=1-(D+I),Y[3]=P+G,Y[6]=O-N,Y[1]=P-G,Y[4]=1-(A+I),Y[7]=L+B,Y[2]=O+N,Y[5]=L-B,Y[8]=1-(A+D),this},normalFromMat4:function normalFromMat4(t){var r=t.val,o=this.val,a=r[0],h=r[1],d=r[2],T=r[3],S=r[4],A=r[5],P=r[6],O=r[7],D=r[8],L=r[9],I=r[10],B=r[11],N=r[12],G=r[13],Y=r[14],X=r[15],U=a*A-h*S,z=a*P-d*S,V=a*O-T*S,W=h*P-d*A,H=h*O-T*A,q=d*O-T*P,Z=D*G-L*N,K=D*Y-I*N,J=D*X-B*N,Q=L*Y-I*G,$=L*X-B*G,tt=I*X-B*Y,et=U*tt-z*$+V*Q+W*J-H*K+q*Z;return et?(et=1/et,o[0]=(A*tt-P*$+O*Q)*et,o[1]=(P*J-S*tt-O*K)*et,o[2]=(S*$-A*J+O*Z)*et,o[3]=(d*$-h*tt-T*Q)*et,o[4]=(a*tt-d*J+T*K)*et,o[5]=(h*J-a*$-T*Z)*et,o[6]=(G*q-Y*H+X*W)*et,o[7]=(Y*V-N*q-X*z)*et,o[8]=(N*H-G*V+X*U)*et,this):null}});t.exports=a},function(t,r,o){var a=o(0),h=o(42),d=o(1),T=o(14),S=1e-6,A=new Int8Array([1,2,0]),P=new Float32Array([0,0,0]),O=new T(1,0,0),D=new T(0,1,0),L=new T,I=new h,B=new a({initialize:function Quaternion(t,r,o,a){this.onChangeCallback=d,this.set(t,r,o,a)},x:{get:function get(){return this._x},set:function set(t){this._x=t,this.onChangeCallback(this)}},y:{get:function get(){return this._y},set:function set(t){this._y=t,this.onChangeCallback(this)}},z:{get:function get(){return this._z},set:function set(t){this._z=t,this.onChangeCallback(this)}},w:{get:function get(){return this._w},set:function set(t){this._w=t,this.onChangeCallback(this)}},copy:function copy(t){return this.set(t)},set:function set(t,r,o,a,h){return void 0===h&&(h=!0),"object"===_typeof(t)?(this._x=t.x||0,this._y=t.y||0,this._z=t.z||0,this._w=t.w||0):(this._x=t||0,this._y=r||0,this._z=o||0,this._w=a||0),h&&this.onChangeCallback(this),this},add:function add(t){return this._x+=t.x,this._y+=t.y,this._z+=t.z,this._w+=t.w,this.onChangeCallback(this),this},subtract:function subtract(t){return this._x-=t.x,this._y-=t.y,this._z-=t.z,this._w-=t.w,this.onChangeCallback(this),this},scale:function scale(t){return this._x*=t,this._y*=t,this._z*=t,this._w*=t,this.onChangeCallback(this),this},length:function length(){var t=this.x,r=this.y,o=this.z,a=this.w;return Math.sqrt(t*t+r*r+o*o+a*a)},lengthSq:function lengthSq(){var t=this.x,r=this.y,o=this.z,a=this.w;return t*t+r*r+o*o+a*a},normalize:function normalize(){var t=this.x,r=this.y,o=this.z,a=this.w,h=t*t+r*r+o*o+a*a;return h>0&&(h=1/Math.sqrt(h),this._x=t*h,this._y=r*h,this._z=o*h,this._w=a*h),this.onChangeCallback(this),this},dot:function dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function lerp(t,r){void 0===r&&(r=0);var o=this.x,a=this.y,h=this.z,d=this.w;return this.set(o+r*(t.x-o),a+r*(t.y-a),h+r*(t.z-h),d+r*(t.w-d))},rotationTo:function rotationTo(t,r){var o=t.x*r.x+t.y*r.y+t.z*r.z;return o<-.999999?(L.copy(O).cross(t).length()<S&&L.copy(D).cross(t),L.normalize(),this.setAxisAngle(L,Math.PI)):o>.999999?this.set(0,0,0,1):(L.copy(t).cross(r),this._x=L.x,this._y=L.y,this._z=L.z,this._w=1+o,this.normalize())},setAxes:function setAxes(t,r,o){var a=I.val;return a[0]=r.x,a[3]=r.y,a[6]=r.z,a[1]=o.x,a[4]=o.y,a[7]=o.z,a[2]=-t.x,a[5]=-t.y,a[8]=-t.z,this.fromMat3(I).normalize()},identity:function identity(){return this.set(0,0,0,1)},setAxisAngle:function setAxisAngle(t,r){r*=.5;var o=Math.sin(r);return this.set(o*t.x,o*t.y,o*t.z,Math.cos(r))},multiply:function multiply(t){var r=this.x,o=this.y,a=this.z,h=this.w,d=t.x,T=t.y,S=t.z,A=t.w;return this.set(r*A+h*d+o*S-a*T,o*A+h*T+a*d-r*S,a*A+h*S+r*T-o*d,h*A-r*d-o*T-a*S)},slerp:function slerp(t,r){var o=this.x,a=this.y,h=this.z,d=this.w,T=t.x,A=t.y,P=t.z,O=t.w,D=o*T+a*A+h*P+d*O;D<0&&(D=-D,T=-T,A=-A,P=-P,O=-O);var L=1-r,I=r;if(1-D>S){var B=Math.acos(D),N=Math.sin(B);L=Math.sin((1-r)*B)/N,I=Math.sin(r*B)/N}return this.set(L*o+I*T,L*a+I*A,L*h+I*P,L*d+I*O)},invert:function invert(){var t=this.x,r=this.y,o=this.z,a=this.w,h=t*t+r*r+o*o+a*a,d=h?1/h:0;return this.set(-t*d,-r*d,-o*d,a*d)},conjugate:function conjugate(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function rotateX(t){t*=.5;var r=this.x,o=this.y,a=this.z,h=this.w,d=Math.sin(t),T=Math.cos(t);return this.set(r*T+h*d,o*T+a*d,a*T-o*d,h*T-r*d)},rotateY:function rotateY(t){t*=.5;var r=this.x,o=this.y,a=this.z,h=this.w,d=Math.sin(t),T=Math.cos(t);return this.set(r*T-a*d,o*T+h*d,a*T+r*d,h*T-o*d)},rotateZ:function rotateZ(t){t*=.5;var r=this.x,o=this.y,a=this.z,h=this.w,d=Math.sin(t),T=Math.cos(t);return this.set(r*T+o*d,o*T-r*d,a*T+h*d,h*T-a*d)},calculateW:function calculateW(){var t=this.x,r=this.y,o=this.z;return this.w=-Math.sqrt(1-t*t-r*r-o*o),this},setFromEuler:function setFromEuler(t,r){var o=t.x/2,a=t.y/2,h=t.z/2,d=Math.cos(o),T=Math.cos(a),S=Math.cos(h),A=Math.sin(o),P=Math.sin(a),O=Math.sin(h);switch(t.order){case"XYZ":this.set(A*T*S+d*P*O,d*P*S-A*T*O,d*T*O+A*P*S,d*T*S-A*P*O,r);break;case"YXZ":this.set(A*T*S+d*P*O,d*P*S-A*T*O,d*T*O-A*P*S,d*T*S+A*P*O,r);break;case"ZXY":this.set(A*T*S-d*P*O,d*P*S+A*T*O,d*T*O+A*P*S,d*T*S-A*P*O,r);break;case"ZYX":this.set(A*T*S-d*P*O,d*P*S+A*T*O,d*T*O-A*P*S,d*T*S+A*P*O,r);break;case"YZX":this.set(A*T*S+d*P*O,d*P*S+A*T*O,d*T*O-A*P*S,d*T*S-A*P*O,r);break;case"XZY":this.set(A*T*S-d*P*O,d*P*S-A*T*O,d*T*O+A*P*S,d*T*S+A*P*O,r)}return this},setFromRotationMatrix:function setFromRotationMatrix(t){var r,o=t.val,a=o[0],h=o[4],d=o[8],T=o[1],S=o[5],A=o[9],P=o[2],O=o[6],D=o[10],L=a+S+D;return L>0?(r=.5/Math.sqrt(L+1),this.set((O-A)*r,(d-P)*r,(T-h)*r,.25/r)):a>S&&a>D?(r=2*Math.sqrt(1+a-S-D),this.set(.25*r,(h+T)/r,(d+P)/r,(O-A)/r)):S>D?(r=2*Math.sqrt(1+S-a-D),this.set((h+T)/r,.25*r,(A+O)/r,(d-P)/r)):(r=2*Math.sqrt(1+D-a-S),this.set((d+P)/r,(A+O)/r,.25*r,(T-h)/r)),this},fromMat3:function fromMat3(t){var r,o=t.val,a=o[0]+o[4]+o[8];if(a>0)r=Math.sqrt(a+1),this.w=.5*r,r=.5/r,this._x=(o[7]-o[5])*r,this._y=(o[2]-o[6])*r,this._z=(o[3]-o[1])*r;else{var h=0;o[4]>o[0]&&(h=1),o[8]>o[3*h+h]&&(h=2);var d=A[h],T=A[d];r=Math.sqrt(o[3*h+h]-o[3*d+d]-o[3*T+T]+1),P[h]=.5*r,r=.5/r,P[d]=(o[3*d+h]+o[3*h+d])*r,P[T]=(o[3*T+h]+o[3*h+T])*r,this._x=P[0],this._y=P[1],this._z=P[2],this._w=(o[3*T+d]-o[3*d+T])*r}return this.onChangeCallback(this),this}});t.exports=B},function(t,r,o){t.exports={ADDED_TO_SCENE:o(180),BOOT:o(181),CREATE:o(182),DESTROY:o(183),PAUSE:o(184),POST_UPDATE:o(185),PRE_RENDER:o(186),PRE_UPDATE:o(187),READY:o(188),REMOVED_FROM_SCENE:o(189),RENDER:o(190),RESUME:o(191),SHUTDOWN:o(192),SLEEP:o(193),START:o(194),TRANSITION_COMPLETE:o(195),TRANSITION_INIT:o(196),TRANSITION_OUT:o(197),TRANSITION_START:o(198),TRANSITION_WAKE:o(199),UPDATE:o(200),WAKE:o(201)}},function(t,r,o){var a=o(27),h=o(46);t.exports=function MergeXHRSettings(t,r){var o=void 0===t?h():a({},t);if(r)for(var d in r)void 0!==r[d]&&(o[d]=r[d]);return o}},function(t,r){t.exports=function XHRSettings(t,r,o,a,h,d){return void 0===t&&(t=""),void 0===r&&(r=!0),void 0===o&&(o=""),void 0===a&&(a=""),void 0===h&&(h=0),void 0===d&&(d=!1),{responseType:t,async:r,user:o,password:a,timeout:h,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:d}}},function(t,r){t.exports={width:0,height:0,displayWidth:{get:function get(){return this.scaleX*this.width},set:function set(t){this.scaleX=t/this.width}},displayHeight:{get:function get(){return this.scaleY*this.height},set:function set(t){this.scaleY=t/this.height}},setSize:function setSize(t,r){return this.width=t,this.height=r,this},setDisplaySize:function setDisplaySize(t,r){return this.displayWidth=t,this.displayHeight=r,this}}},function(t,r){var o={_depth:0,depth:{get:function get(){return this._depth},set:function set(t){this.displayList&&this.displayList.queueDepthSort(),this._depth=t}},setDepth:function setDepth(t){return void 0===t&&(t=0),this.depth=t,this}};t.exports=o},function(t,r){t.exports={flipX:!1,flipY:!1,toggleFlipX:function toggleFlipX(){return this.flipX=!this.flipX,this},toggleFlipY:function toggleFlipY(){return this.flipY=!this.flipY,this},setFlipX:function setFlipX(t){return this.flipX=t,this},setFlipY:function setFlipY(t){return this.flipY=t,this},setFlip:function setFlip(t,r){return this.flipX=t,this.flipY=r,this},resetFlip:function resetFlip(){return this.flipX=!1,this.flipY=!1,this}}},function(t,r){var o={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function setScrollFactor(t,r){return void 0===r&&(r=t),this.scrollFactorX=t,this.scrollFactorY=r,this}};t.exports=o},function(t,r,o){var a=o(4),h=o(23),d=o(41),T=o(30),S=o(31),A=o(2),P={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function get(){return(this._scaleX+this._scaleY)/2},set:function set(t){this._scaleX=t,this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function get(){return this._scaleX},set:function set(t){this._scaleX=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleY:{get:function get(){return this._scaleY},set:function set(t){this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},angle:{get:function get(){return S(this._rotation*a.RAD_TO_DEG)},set:function set(t){this.rotation=S(t)*a.DEG_TO_RAD}},rotation:{get:function get(){return this._rotation},set:function set(t){this._rotation=T(t)}},setPosition:function setPosition(t,r,o,a){return void 0===t&&(t=0),void 0===r&&(r=t),void 0===o&&(o=0),void 0===a&&(a=0),this.x=t,this.y=r,this.z=o,this.w=a,this},copyPosition:function copyPosition(t){return void 0!==t.x&&(this.x=t.x),void 0!==t.y&&(this.y=t.y),void 0!==t.z&&(this.z=t.z),void 0!==t.w&&(this.w=t.w),this},setRandomPosition:function setRandomPosition(t,r,o,a){return void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=this.scene.sys.scale.width),void 0===a&&(a=this.scene.sys.scale.height),this.x=t+Math.random()*o,this.y=r+Math.random()*a,this},setRotation:function setRotation(t){return void 0===t&&(t=0),this.rotation=t,this},setAngle:function setAngle(t){return void 0===t&&(t=0),this.angle=t,this},setScale:function setScale(t,r){return void 0===t&&(t=1),void 0===r&&(r=t),this.scaleX=t,this.scaleY=r,this},setX:function setX(t){return void 0===t&&(t=0),this.x=t,this},setY:function setY(t){return void 0===t&&(t=0),this.y=t,this},setZ:function setZ(t){return void 0===t&&(t=0),this.z=t,this},setW:function setW(t){return void 0===t&&(t=0),this.w=t,this},getLocalTransformMatrix:function getLocalTransformMatrix(t){return void 0===t&&(t=new h),t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function getWorldTransformMatrix(t,r){void 0===t&&(t=new h),void 0===r&&(r=new h);var o=this.parentContainer;if(!o)return this.getLocalTransformMatrix(t);for(t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);o;)r.applyITRS(o.x,o.y,o._rotation,o._scaleX,o._scaleY),r.multiply(t,t),o=o.parentContainer;return t},getLocalPoint:function getLocalPoint(t,r,o,a){o||(o=new A),a||(a=this.scene.sys.cameras.main);var h=a.scrollX,T=a.scrollY,S=t+h*this.scrollFactorX-h,P=r+T*this.scrollFactorY-T;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(S,P,o):d(S,P,this.x,this.y,this.rotation,this.scaleX,this.scaleY,o),this._originComponent&&(o.x+=this._displayOriginX,o.y+=this._displayOriginY),o},getParentRotation:function getParentRotation(){for(var t=0,r=this.parentContainer;r;)t+=r.rotation,r=r.parentContainer;return t}};t.exports=P},function(t,r){var o={_visible:!0,visible:{get:function get(){return this._visible},set:function set(t){t?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function setVisible(t){return this.visible=t,this}};t.exports=o},function(t,r,o){var a=o(0),h=o(54),d=o(222),T=o(229),S=o(55),A=o(44),P=new a({Extends:T,initialize:function GameObject(t,r){T.call(this),this.scene=t,this.displayList=null,this.type=r,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(S.ADDED_TO_SCENE,this.addedToScene,this),this.on(S.REMOVED_FROM_SCENE,this.removedFromScene,this),t.sys.queueDepthSort()},setActive:function setActive(t){return this.active=t,this},setName:function setName(t){return this.name=t,this},setState:function setState(t){return this.state=t,this},setDataEnabled:function setDataEnabled(){return this.data||(this.data=new d(this)),this},setData:function setData(t,r){return this.data||(this.data=new d(this)),this.data.set(t,r),this},incData:function incData(t,r){return this.data||(this.data=new d(this)),this.data.inc(t,r),this},toggleData:function toggleData(t){return this.data||(this.data=new d(this)),this.data.toggle(t),this},getData:function getData(t){return this.data||(this.data=new d(this)),this.data.get(t)},setInteractive:function setInteractive(t,r,o){return this.scene.sys.input.enable(this,t,r,o),this},disableInteractive:function disableInteractive(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function removeInteractive(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function addedToScene(){},removedFromScene:function removedFromScene(){},update:function update(){},toJSON:function toJSON(){return h(this)},willRender:function willRender(t){return!(P.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function getIndexList(){for(var t=this,r=this.parentContainer,o=[];r&&(o.unshift(r.getIndex(t)),t=r,r.parentContainer);)r=r.parentContainer;return this.displayList?o.unshift(this.displayList.getIndex(t)):o.unshift(this.scene.sys.displayList.getIndex(t)),o},addToDisplayList:function addToDisplayList(t){return void 0===t&&(t=this.scene.sys.displayList),this.displayList&&this.displayList!==t&&this.removeFromDisplayList(),t.exists(this)||(this.displayList=t,t.add(this,!0),t.queueDepthSort(),this.emit(S.ADDED_TO_SCENE,this,this.scene),t.events.emit(A.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function addToUpdateList(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function removeFromDisplayList(){var t=this.displayList||this.scene.sys.displayList;return t.exists(this)&&(t.remove(this,!0),t.queueDepthSort(),this.displayList=null,this.emit(S.REMOVED_FROM_SCENE,this,this.scene),t.events.emit(A.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function removeFromUpdateList(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function destroy(){this.scene&&!this.ignoreDestroy&&(this.preDestroy&&this.preDestroy.call(this),this.emit(S.DESTROY,this),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});P.RENDER_MASK=15,t.exports=P},function(t,r){t.exports=function ToJSON(t){var r={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(r.textureKey=t.texture.key,r.frameKey=t.frame.name),r}},function(t,r,o){t.exports={ADDED_TO_SCENE:o(230),DESTROY:o(231),REMOVED_FROM_SCENE:o(232),VIDEO_COMPLETE:o(233),VIDEO_CREATED:o(234),VIDEO_ERROR:o(235),VIDEO_LOOP:o(236),VIDEO_PLAY:o(237),VIDEO_SEEKED:o(238),VIDEO_SEEKING:o(239),VIDEO_STOP:o(240),VIDEO_TIMEOUT:o(241),VIDEO_UNLOCKED:o(242)}},function(t,r,o){var a=o(23),h=new a,d=new a,T=new a,S={camera:h,sprite:d,calc:T};t.exports=function GetCalcMatrix(t,r,o){var a=h,A=d,P=T;return A.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),a.copyFrom(r.matrix),o?(a.multiplyWithOffset(o,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY),A.e=t.x,A.f=t.y):(A.e-=r.scrollX*t.scrollFactorX,A.f-=r.scrollY*t.scrollFactorY),a.multiply(A,P),S}},function(t,r){t.exports=function TransposeMatrix(t){for(var r=t.length,o=t[0].length,a=new Array(o),h=0;h<o;h++){a[h]=new Array(r);for(var d=r-1;d>-1;d--)a[h][d]=t[d][h]}return a}},function(t,r){t.exports=function RotateLeft(t,r){void 0===r&&(r=1);for(var o=null,a=0;a<r;a++)o=t.shift(),t.push(o);return o}},function(t,r){t.exports=function RotateRight(t,r){void 0===r&&(r=1);for(var o=null,a=0;a<r;a++)o=t.pop(),t.unshift(o);return o}},function(t,r){t.exports=function Shuffle(t){for(var r=t.length-1;r>0;r--){var o=Math.floor(Math.random()*(r+1)),a=t[r];t[r]=t[o],t[o]=a}return t}},function(t,r,o){var a=o(62),h=o(13);t.exports=function GetPoint(t,r,o){if(void 0===o&&(o=new h),r<=0||r>=1)return o.x=t.x,o.y=t.y,o;var d=a(t)*r;return r>.5?(d-=t.width+t.height)<=t.width?(o.x=t.right-d,o.y=t.bottom):(o.x=t.x,o.y=t.bottom-(d-t.width)):d<=t.width?(o.x=t.x+d,o.y=t.y):(o.x=t.right,o.y=t.y+(d-t.width)),o}},function(t,r){t.exports=function Perimeter(t){return 2*(t.width+t.height)}},function(t,r,o){var a,h=o(64),d=o(0),T=o(10),S=o(177),A=o(178),P=o(202),O=o(203),D=o(221),L=o(254),I=o(1),B=new d({Extends:A,initialize:function SpinePlugin(t,r,o){A.call(this,t,r,o);var a=r.game;this.isWebGL=2===a.config.renderType,this.cache=a.cache.addCustom("spine"),this.spineTextures=a.cache.addCustom("spineTextures"),this.json=a.cache.json,this.textures=a.textures,this.drawDebug=!1,this.gl,this.renderer,this.sceneRenderer,this.skeletonRenderer,this.skeletonDebugRenderer,this.plugin=P,this.temp1,this.temp2,this.isWebGL?(this.runtime=P.webgl,this.renderer=a.renderer,this.gl=a.renderer.gl,this.getAtlas=this.getAtlasWebGL):(this.runtime=P.canvas,this.renderer=a.renderer,this.getAtlas=this.getAtlasCanvas),this.renderer||(this.renderer={width:a.scale.width,height:a.scale.height,preRender:I,postRender:I,render:I,destroy:I});r.registerFileType("spine",this.spineFileCallback,t),r.registerGameObject("spine",(function add(t,r,a,h,d){var T=this.scene.sys[o],S=new D(this.scene,T,t,r,a,h,d);return this.displayList.add(S),this.updateList.add(S),S}),(function make(t,r){void 0===t&&(t={});var a=T(t,"key",null),d=T(t,"animationName",null),S=T(t,"loop",!1),A=this.scene.sys[o],P=new D(this.scene,A,0,0,a,d,S);void 0!==r&&(t.add=r),h(this.scene,P,t);var O=T(t,"skinName",!1);O&&P.setSkinByName(O);var L=T(t,"slotName",!1),I=T(t,"attachmentName",null);return L&&P.setAttachment(L,I),P.refresh()})),r.registerGameObject("spineContainer",(function addContainer(t,r,a){var h=this.scene.sys[o],d=new L(this.scene,h,t,r,a);return this.displayList.add(d),d}),(function makeContainer(t,r){void 0===t&&(t={});var a=T(t,"x",0),d=T(t,"y",0),S=T(t,"children",null),A=this.scene.sys[o],P=new L(this.scene,A,a,d,S);return void 0!==r&&(t.add=r),h(this.scene,P,t),P}))},boot:function boot(){this.isWebGL?(this.bootWebGL(),this.onResize(),this.game.scale.on(S,this.onResize,this)):this.bootCanvas();var t=this.systems.events;t.once("shutdown",this.shutdown,this),t.once("destroy",this.destroy,this),this.game.events.once("destroy",this.gameDestroy,this)},bootCanvas:function bootCanvas(){this.skeletonRenderer=new P.canvas.SkeletonRenderer(this.scene.sys.context)},bootWebGL:function bootWebGL(){var t=function setBlendMode(t,r){if(t!==this.srcBlend||r!==this.dstBlend){var o=this.context.gl;this.srcBlend=t,this.dstBlend=r,this.isDrawing&&(this.flush(),o.blendFunc(this.srcBlend,this.dstBlend))}};a||((a=new P.webgl.SceneRenderer(this.renderer.canvas,this.gl,!0)).batcher.setBlendMode=t,a.shapes.setBlendMode=t),this.sceneRenderer=a,this.skeletonRenderer=a.skeletonRenderer,this.skeletonDebugRenderer=a.skeletonDebugRenderer,this.temp1=new P.webgl.Vector3(0,0,0),this.temp2=new P.webgl.Vector3(0,0,0)},getAtlasCanvas:function getAtlasCanvas(t){var r=this.cache.get(t);if(r){var o,a=this.spineTextures;if(a.has(t))o=a.get(t);else{var h=this.textures;o=new P.TextureAtlas(r.data,(function(t){return new P.canvas.CanvasTexture(h.get(r.prefix+t).getSourceImage())}))}return o}console.warn("No atlas data for: "+t)},getAtlasWebGL:function getAtlasWebGL(t){var r=this.cache.get(t);if(r){var o,a=this.spineTextures;if(a.has(t))o=a.get(t);else{var h=this.textures,d=this.sceneRenderer.context.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),o=new P.TextureAtlas(r.data,(function(t){return new P.webgl.GLTexture(d,h.get(r.prefix+t).getSourceImage(),!1)}))}return o}console.warn("No atlas data for: "+t)},spineFileCallback:function spineFileCallback(t,r,o,a,h,d){var T;if(Array.isArray(t))for(var S=0;S<t.length;S++)T=new O(this,t[S]),this.addFile(T.files);else T=new O(this,t,r,o,a,h,d),this.addFile(T.files);return this},worldToLocal:function worldToLocal(t,r,o,a){var h=this.temp1,d=this.temp2,T=this.sceneRenderer.camera;h.set(t+o.x,r-o.y,0);var S=T.viewportWidth,A=T.viewportHeight;return T.screenToWorld(h,S,A),a&&null!==a.parent?(a.parent.worldToLocal(d.set(h.x-o.x,h.y-o.y,0)),new P.Vector2(d.x,d.y)):a?new P.Vector2(h.x-o.x,h.y-o.y):new P.Vector2(h.x,h.y)},getVector2:function getVector2(t,r){return new P.Vector2(t,r)},getVector3:function getVector3(t,r,o){return new P.webgl.Vector3(t,r,o)},setDebugBones:function setDebugBones(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawBones=t,this},setDebugRegionAttachments:function setDebugRegionAttachments(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawRegionAttachments=t,this},setDebugBoundingBoxes:function setDebugBoundingBoxes(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawBoundingBoxes=t,this},setDebugMeshHull:function setDebugMeshHull(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawMeshHull=t,this},setDebugMeshTriangles:function setDebugMeshTriangles(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawMeshTriangles=t,this},setDebugPaths:function setDebugPaths(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawPaths=t,this},setDebugSkeletonXY:function setDebugSkeletonXY(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawSkeletonXY=t,this},setDebugClipping:function setDebugClipping(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawClipping=t,this},setEffect:function setEffect(t){return this.sceneRenderer.skeletonRenderer.vertexEffect=t,this},createSkeleton:function createSkeleton(t,r){var o=t,a=t,h=-1!==t.indexOf(".");if(h){var d=t.split(".");o=d.shift(),a=d.join(".")}var S=this.cache.get(o),A=this.getAtlas(o);if(!A)return null;this.spineTextures.has(o)||this.spineTextures.add(o,A);var O,D=S.preMultipliedAlpha,L=new P.AtlasAttachmentLoader(A),I=new P.SkeletonJson(L);if(r)O=r;else{var B=this.json.get(o);O=h?T(B,a):B}if(O){var N=I.readSkeletonData(O);return{skeletonData:N,skeleton:new P.Skeleton(N),preMultipliedAlpha:D}}return null},createAnimationState:function createAnimationState(t){var r=new P.AnimationStateData(t.data);return{stateData:r,state:new P.AnimationState(r)}},getBounds:function getBounds(t){var r=new P.Vector2,o=new P.Vector2;return t.getBounds(r,o,[]),{offset:r,size:o}},onResize:function onResize(){var t=this.renderer,r=this.sceneRenderer,o=t.width,a=t.height;r.camera.position.x=o/2,r.camera.position.y=a/2,r.camera.setViewport(o,a)},shutdown:function shutdown(){this.systems.events.off("shutdown",this.shutdown,this),this.isWebGL&&this.game.scale.off(S,this.onResize,this)},destroy:function destroy(){this.shutdown(),this.game=null,this.scene=null,this.systems=null,this.cache=null,this.spineTextures=null,this.json=null,this.textures=null,this.skeletonRenderer=null,this.gl=null},gameDestroy:function gameDestroy(){this.pluginManager.removeGameObject("spine",!0,!0),this.pluginManager.removeGameObject("spineContainer",!0,!0),this.pluginManager=null,a&&(a.dispose(),a=null),this.sceneRenderer=null}});B.SpineGameObject=D,B.SpineContainer=L,t.exports=B},function(t,r,o){var a=o(17),h=o(65);t.exports=function BuildGameObject(t,r,o){r.x=h(o,"x",0),r.y=h(o,"y",0),r.depth=h(o,"depth",0),r.flipX=h(o,"flipX",!1),r.flipY=h(o,"flipY",!1);var d=h(o,"scale",null);"number"==typeof d?r.setScale(d):null!==d&&(r.scaleX=h(d,"x",1),r.scaleY=h(d,"y",1));var T=h(o,"scrollFactor",null);"number"==typeof T?r.setScrollFactor(T):null!==T&&(r.scrollFactorX=h(T,"x",1),r.scrollFactorY=h(T,"y",1)),r.rotation=h(o,"rotation",0);var S=h(o,"angle",null);null!==S&&(r.angle=S),r.alpha=h(o,"alpha",1);var A=h(o,"origin",null);if("number"==typeof A)r.setOrigin(A);else if(null!==A){var P=h(A,"x",.5),O=h(A,"y",.5);r.setOrigin(P,O)}return r.blendMode=h(o,"blendMode",a.NORMAL),r.visible=h(o,"visible",!0),h(o,"add",!0)&&t.sys.displayList.add(r),r.preUpdate&&t.sys.updateList.add(r),r}},function(t,r,o){var a=o(66),h=o(10);t.exports=function GetAdvancedValue(t,r,o){var d=h(t,r,null);if(null===d)return o;if(Array.isArray(d))return a.RND.pick(d);if("object"===_typeof(d)){if(d.hasOwnProperty("randInt"))return a.RND.integerInRange(d.randInt[0],d.randInt[1]);if(d.hasOwnProperty("randFloat"))return a.RND.realInRange(d.randFloat[0],d.randFloat[1])}else if("function"==typeof d)return d(r);return d}},function(t,r,o){var a=o(4),h=o(27),d={Angle:o(67),Distance:o(76),Easing:o(84),Fuzzy:o(129),Interpolation:o(134),Pow2:o(142),Snap:o(146),RandomDataGenerator:o(150),Average:o(151),Bernstein:o(33),Between:o(152),CatmullRom:o(35),CeilTo:o(153),Clamp:o(3),DegToRad:o(19),Difference:o(154),Euler:o(155),Factorial:o(34),FloatBetween:o(18),FloorTo:o(156),FromPercent:o(157),GetSpeed:o(158),IsEven:o(159),IsEvenStrict:o(160),Linear:o(36),MaxAdd:o(161),Median:o(162),MinSub:o(163),Percent:o(164),RadToDeg:o(9),RandomXY:o(165),RandomXYZ:o(166),RandomXYZW:o(167),Rotate:o(168),RotateAround:o(39),RotateAroundDistance:o(169),RotateTo:o(170),RoundAwayFromZero:o(40),RoundTo:o(171),SinCosTableGenerator:o(172),SmootherStep:o(38),SmoothStep:o(37),ToXY:o(173),TransformXY:o(41),Within:o(174),Wrap:o(6),Vector2:o(2),Vector3:o(14),Vector4:o(175),Matrix3:o(42),Matrix4:o(20),Quaternion:o(43),RotateVec3:o(176)};d=h(!1,d,a),t.exports=d},function(t,r,o){t.exports={Between:o(28),BetweenPoints:o(68),BetweenPointsY:o(69),BetweenY:o(70),CounterClockwise:o(8),Normalize:o(29),Random:o(71),RandomDegrees:o(72),Reverse:o(73),RotateTo:o(74),ShortestBetween:o(75),Wrap:o(30),WrapDegrees:o(31)}},function(t,r){t.exports=function BetweenPoints(t,r){return Math.atan2(r.y-t.y,r.x-t.x)}},function(t,r){t.exports=function BetweenPointsY(t,r){return Math.atan2(r.x-t.x,r.y-t.y)}},function(t,r){t.exports=function BetweenY(t,r,o,a){return Math.atan2(o-t,a-r)}},function(t,r,o){var a=o(18);t.exports=function Random(){return a(-Math.PI,Math.PI)}},function(t,r,o){var a=o(18);t.exports=function RandomDegrees(){return a(-180,180)}},function(t,r,o){var a=o(29);t.exports=function Reverse(t){return a(t+Math.PI)}},function(t,r,o){var a=o(4);t.exports=function RotateTo(t,r,o){return void 0===o&&(o=.05),t===r||(Math.abs(r-t)<=o||Math.abs(r-t)>=a.PI2-o?t=r:(Math.abs(r-t)>Math.PI&&(r<t?r+=a.PI2:r-=a.PI2),r>t?t+=o:r<t&&(t-=o))),t}},function(t,r){t.exports=function ShortestBetween(t,r){var o=r-t;return 0===o?0:o-360*Math.floor((o- -180)/360)}},function(t,r,o){t.exports={Between:o(77),BetweenPoints:o(78),BetweenPointsSquared:o(79),Chebyshev:o(80),Power:o(81),Snake:o(82),Squared:o(83)}},function(t,r){t.exports=function DistanceBetween(t,r,o,a){var h=t-o,d=r-a;return Math.sqrt(h*h+d*d)}},function(t,r){t.exports=function DistanceBetweenPoints(t,r){var o=t.x-r.x,a=t.y-r.y;return Math.sqrt(o*o+a*a)}},function(t,r){t.exports=function DistanceBetweenPointsSquared(t,r){var o=t.x-r.x,a=t.y-r.y;return o*o+a*a}},function(t,r){t.exports=function ChebyshevDistance(t,r,o,a){return Math.max(Math.abs(t-o),Math.abs(r-a))}},function(t,r){t.exports=function DistancePower(t,r,o,a,h){return void 0===h&&(h=2),Math.sqrt(Math.pow(o-t,h)+Math.pow(a-r,h))}},function(t,r){t.exports=function SnakeDistance(t,r,o,a){return Math.abs(t-o)+Math.abs(r-a)}},function(t,r){t.exports=function DistanceSquared(t,r,o,a){var h=t-o,d=r-a;return h*h+d*d}},function(t,r,o){t.exports={Back:o(85),Bounce:o(89),Circular:o(93),Cubic:o(97),Elastic:o(101),Expo:o(105),Linear:o(109),Quadratic:o(111),Quartic:o(115),Quintic:o(119),Sine:o(123),Stepped:o(127)}},function(t,r,o){t.exports={In:o(86),Out:o(87),InOut:o(88)}},function(t,r){t.exports=function In(t,r){return void 0===r&&(r=1.70158),t*t*((r+1)*t-r)}},function(t,r){t.exports=function Out(t,r){return void 0===r&&(r=1.70158),--t*t*((r+1)*t+r)+1}},function(t,r){t.exports=function InOut(t,r){void 0===r&&(r=1.70158);var o=1.525*r;return(t*=2)<1?t*t*((o+1)*t-o)*.5:.5*((t-=2)*t*((o+1)*t+o)+2)}},function(t,r,o){t.exports={In:o(90),Out:o(91),InOut:o(92)}},function(t,r){t.exports=function In(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}},function(t,r){t.exports=function Out(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},function(t,r){t.exports=function InOut(t){var r=!1;return t<.5?(t=1-2*t,r=!0):t=2*t-1,t<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,r?.5*(1-t):.5*t+.5}},function(t,r,o){t.exports={In:o(94),Out:o(95),InOut:o(96)}},function(t,r){t.exports=function In(t){return 1-Math.sqrt(1-t*t)}},function(t,r){t.exports=function Out(t){return Math.sqrt(1- --t*t)}},function(t,r){t.exports=function InOut(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},function(t,r,o){t.exports={In:o(98),Out:o(99),InOut:o(100)}},function(t,r){t.exports=function In(t){return t*t*t}},function(t,r){t.exports=function Out(t){return--t*t*t+1}},function(t,r){t.exports=function InOut(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},function(t,r,o){t.exports={In:o(102),Out:o(103),InOut:o(104)}},function(t,r){t.exports=function In(t,r,o){if(void 0===r&&(r=.1),void 0===o&&(o=.1),0===t)return 0;if(1===t)return 1;var a=o/4;return r<1?r=1:a=o*Math.asin(1/r)/(2*Math.PI),-r*Math.pow(2,10*(t-=1))*Math.sin((t-a)*(2*Math.PI)/o)}},function(t,r){t.exports=function Out(t,r,o){if(void 0===r&&(r=.1),void 0===o&&(o=.1),0===t)return 0;if(1===t)return 1;var a=o/4;return r<1?r=1:a=o*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*t)*Math.sin((t-a)*(2*Math.PI)/o)+1}},function(t,r){t.exports=function InOut(t,r,o){if(void 0===r&&(r=.1),void 0===o&&(o=.1),0===t)return 0;if(1===t)return 1;var a=o/4;return r<1?r=1:a=o*Math.asin(1/r)/(2*Math.PI),(t*=2)<1?r*Math.pow(2,10*(t-=1))*Math.sin((t-a)*(2*Math.PI)/o)*-.5:r*Math.pow(2,-10*(t-=1))*Math.sin((t-a)*(2*Math.PI)/o)*.5+1}},function(t,r,o){t.exports={In:o(106),Out:o(107),InOut:o(108)}},function(t,r){t.exports=function In(t){return Math.pow(2,10*(t-1))-.001}},function(t,r){t.exports=function Out(t){return 1-Math.pow(2,-10*t)}},function(t,r){t.exports=function InOut(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}},function(t,r,o){t.exports=o(110)},function(t,r){t.exports=function Linear(t){return t}},function(t,r,o){t.exports={In:o(112),Out:o(113),InOut:o(114)}},function(t,r){t.exports=function In(t){return t*t}},function(t,r){t.exports=function Out(t){return t*(2-t)}},function(t,r){t.exports=function InOut(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},function(t,r,o){t.exports={In:o(116),Out:o(117),InOut:o(118)}},function(t,r){t.exports=function In(t){return t*t*t*t}},function(t,r){t.exports=function Out(t){return 1- --t*t*t*t}},function(t,r){t.exports=function InOut(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},function(t,r,o){t.exports={In:o(120),Out:o(121),InOut:o(122)}},function(t,r){t.exports=function In(t){return t*t*t*t*t}},function(t,r){t.exports=function Out(t){return--t*t*t*t*t+1}},function(t,r){t.exports=function InOut(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},function(t,r,o){t.exports={In:o(124),Out:o(125),InOut:o(126)}},function(t,r){t.exports=function In(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)}},function(t,r){t.exports=function Out(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)}},function(t,r){t.exports=function InOut(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))}},function(t,r,o){t.exports=o(128)},function(t,r){t.exports=function Stepped(t,r){return void 0===r&&(r=1),t<=0?0:t>=1?1:1/r*(1+(r*t|0))}},function(t,r,o){t.exports={Ceil:o(130),Equal:o(32),Floor:o(131),GreaterThan:o(132),LessThan:o(133)}},function(t,r){t.exports=function Ceil(t,r){return void 0===r&&(r=1e-4),Math.ceil(t-r)}},function(t,r){t.exports=function Floor(t,r){return void 0===r&&(r=1e-4),Math.floor(t+r)}},function(t,r){t.exports=function GreaterThan(t,r,o){return void 0===o&&(o=1e-4),t>r-o}},function(t,r){t.exports=function LessThan(t,r,o){return void 0===o&&(o=1e-4),t<r+o}},function(t,r,o){t.exports={Bezier:o(135),CatmullRom:o(136),CubicBezier:o(137),Linear:o(138),QuadraticBezier:o(139),SmoothStep:o(140),SmootherStep:o(141)}},function(t,r,o){var a=o(33);t.exports=function BezierInterpolation(t,r){for(var o=0,h=t.length-1,d=0;d<=h;d++)o+=Math.pow(1-r,h-d)*Math.pow(r,d)*t[d]*a(h,d);return o}},function(t,r,o){var a=o(35);t.exports=function CatmullRomInterpolation(t,r){var o=t.length-1,h=o*r,d=Math.floor(h);return t[0]===t[o]?(r<0&&(d=Math.floor(h=o*(1+r))),a(h-d,t[(d-1+o)%o],t[d],t[(d+1)%o],t[(d+2)%o])):r<0?t[0]-(a(-h,t[0],t[0],t[1],t[1])-t[0]):r>1?t[o]-(a(h-o,t[o],t[o],t[o-1],t[o-1])-t[o]):a(h-d,t[d?d-1:0],t[d],t[o<d+1?o:d+1],t[o<d+2?o:d+2])}},function(t,r){t.exports=function CubicBezierInterpolation(t,r,o,a,h){return function P0(t,r){var o=1-t;return o*o*o*r}(t,r)+function P1(t,r){var o=1-t;return 3*o*o*t*r}(t,o)+function P2(t,r){return 3*(1-t)*t*t*r}(t,a)+function P3(t,r){return t*t*t*r}(t,h)}},function(t,r,o){var a=o(36);t.exports=function LinearInterpolation(t,r){var o=t.length-1,h=o*r,d=Math.floor(h);return r<0?a(t[0],t[1],h):r>1?a(t[o],t[o-1],o-h):a(t[d],t[d+1>o?o:d+1],h-d)}},function(t,r){t.exports=function QuadraticBezierInterpolation(t,r,o,a){return function P0(t,r){var o=1-t;return o*o*r}(t,r)+function P1(t,r){return 2*(1-t)*t*r}(t,o)+function P2(t,r){return t*t*r}(t,a)}},function(t,r,o){var a=o(37);t.exports=function SmoothStepInterpolation(t,r,o){return r+(o-r)*a(t,0,1)}},function(t,r,o){var a=o(38);t.exports=function SmootherStepInterpolation(t,r,o){return r+(o-r)*a(t,0,1)}},function(t,r,o){t.exports={GetNext:o(143),IsSize:o(144),IsValue:o(145)}},function(t,r){t.exports=function GetPowerOfTwo(t){var r=Math.log(t)/.6931471805599453;return 1<<Math.ceil(r)}},function(t,r){t.exports=function IsSizePowerOfTwo(t,r){return t>0&&0==(t&t-1)&&r>0&&0==(r&r-1)}},function(t,r){t.exports=function IsValuePowerOfTwo(t){return t>0&&0==(t&t-1)}},function(t,r,o){t.exports={Ceil:o(147),Floor:o(148),To:o(149)}},function(t,r){t.exports=function SnapCeil(t,r,o,a){return void 0===o&&(o=0),0===r?t:(t-=o,t=r*Math.ceil(t/r),a?(o+t)/r:o+t)}},function(t,r){t.exports=function SnapFloor(t,r,o,a){return void 0===o&&(o=0),0===r?t:(t-=o,t=r*Math.floor(t/r),a?(o+t)/r:o+t)}},function(t,r){t.exports=function SnapTo(t,r,o,a){return void 0===o&&(o=0),0===r?t:(t-=o,t=r*Math.round(t/r),a?(o+t)/r:o+t)}},function(t,r,o){var a=new(o(0))({initialize:function RandomDataGenerator(t){void 0===t&&(t=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],t&&this.init(t)},rnd:function rnd(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},hash:function hash(t){var r,o=this.n;t=t.toString();for(var a=0;a<t.length;a++)r=.02519603282416938*(o+=t.charCodeAt(a)),r-=o=r>>>0,o=(r*=o)>>>0,o+=4294967296*(r-=o);return this.n=o,2.3283064365386963e-10*(o>>>0)},init:function init(t){"string"==typeof t?this.state(t):this.sow(t)},sow:function sow(t){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,t)for(var r=0;r<t.length&&null!=t[r];r++){var o=t[r];this.s0-=this.hash(o),this.s0+=~~(this.s0<0),this.s1-=this.hash(o),this.s1+=~~(this.s1<0),this.s2-=this.hash(o),this.s2+=~~(this.s2<0)}},integer:function integer(){return 4294967296*this.rnd()},frac:function frac(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function real(){return this.integer()+this.frac()},integerInRange:function integerInRange(t,r){return Math.floor(this.realInRange(0,r-t+1)+t)},between:function between(t,r){return Math.floor(this.realInRange(0,r-t+1)+t)},realInRange:function realInRange(t,r){return this.frac()*(r-t)+t},normal:function normal(){return 1-2*this.frac()},uuid:function uuid(){var t="",r="";for(r=t="";t++<36;r+=~t%5|3*t&4?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return r},pick:function pick(t){return t[this.integerInRange(0,t.length-1)]},sign:function sign(){return this.pick(this.signs)},weightedPick:function weightedPick(t){return t[~~(Math.pow(this.frac(),2)*(t.length-1)+.5)]},timestamp:function timestamp(t,r){return this.realInRange(t||9466848e5,r||1577862e6)},angle:function angle(){return this.integerInRange(-180,180)},rotation:function rotation(){return this.realInRange(-3.1415926,3.1415926)},state:function state(t){return"string"==typeof t&&t.match(/^!rnd/)&&(t=t.split(","),this.c=parseFloat(t[1]),this.s0=parseFloat(t[2]),this.s1=parseFloat(t[3]),this.s2=parseFloat(t[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function shuffle(t){for(var r=t.length-1;r>0;r--){var o=Math.floor(this.frac()*(r+1)),a=t[o];t[o]=t[r],t[r]=a}return t}});t.exports=a},function(t,r){t.exports=function Average(t){for(var r=0,o=0;o<t.length;o++)r+=+t[o];return r/t.length}},function(t,r){t.exports=function Between(t,r){return Math.floor(Math.random()*(r-t+1)+t)}},function(t,r){t.exports=function CeilTo(t,r,o){void 0===r&&(r=0),void 0===o&&(o=10);var a=Math.pow(o,-r);return Math.ceil(t*a)/a}},function(t,r){t.exports=function Difference(t,r){return Math.abs(t-r)}},function(t,r,o){var a=o(3),h=o(0),d=o(20),T=o(1),S=new d,A=new h({initialize:function Euler(t,r,o,a){void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=Euler.DefaultOrder),this._x=t,this._y=r,this._z=o,this._order=a,this.onChangeCallback=T},x:{get:function get(){return this._x},set:function set(t){this._x=t,this.onChangeCallback(this)}},y:{get:function get(){return this._y},set:function set(t){this._y=t,this.onChangeCallback(this)}},z:{get:function get(){return this._z},set:function set(t){this._z=t,this.onChangeCallback(this)}},order:{get:function get(){return this._order},set:function set(t){this._order=t,this.onChangeCallback(this)}},set:function set(t,r,o,a){return void 0===a&&(a=this._order),this._x=t,this._y=r,this._z=o,this._order=a,this.onChangeCallback(this),this},copy:function copy(t){return this.set(t.x,t.y,t.z,t.order)},setFromQuaternion:function setFromQuaternion(t,r,o){return void 0===r&&(r=this._order),void 0===o&&(o=!1),S.fromQuat(t),this.setFromRotationMatrix(S,r,o)},setFromRotationMatrix:function setFromRotationMatrix(t,r,o){void 0===r&&(r=this._order),void 0===o&&(o=!1);var h=t.val,d=h[0],T=h[4],S=h[8],A=h[1],P=h[5],O=h[9],D=h[2],L=h[6],I=h[10],B=0,N=0,G=0,Y=.99999;switch(r){case"XYZ":N=Math.asin(a(S,-1,1)),Math.abs(S)<Y?(B=Math.atan2(-O,I),G=Math.atan2(-T,d)):B=Math.atan2(L,P);break;case"YXZ":B=Math.asin(-a(O,-1,1)),Math.abs(O)<Y?(N=Math.atan2(S,I),G=Math.atan2(A,P)):N=Math.atan2(-D,d);break;case"ZXY":B=Math.asin(a(L,-1,1)),Math.abs(L)<Y?(N=Math.atan2(-D,I),G=Math.atan2(-T,P)):G=Math.atan2(A,d);break;case"ZYX":N=Math.asin(-a(D,-1,1)),Math.abs(D)<Y?(B=Math.atan2(L,I),G=Math.atan2(A,d)):G=Math.atan2(-T,P);break;case"YZX":G=Math.asin(a(A,-1,1)),Math.abs(A)<Y?(B=Math.atan2(-O,P),N=Math.atan2(-D,d)):N=Math.atan2(S,I);break;case"XZY":G=Math.asin(-a(T,-1,1)),Math.abs(T)<Y?(B=Math.atan2(L,P),N=Math.atan2(S,d)):B=Math.atan2(-O,I)}return this._x=B,this._y=N,this._z=G,this._order=r,o&&this.onChangeCallback(this),this}});A.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],A.DefaultOrder="XYZ",t.exports=A},function(t,r){t.exports=function FloorTo(t,r,o){void 0===r&&(r=0),void 0===o&&(o=10);var a=Math.pow(o,-r);return Math.floor(t*a)/a}},function(t,r,o){var a=o(3);t.exports=function FromPercent(t,r,o){return(o-r)*(t=a(t,0,1))+r}},function(t,r){t.exports=function GetSpeed(t,r){return t/r/1e3}},function(t,r){t.exports=function IsEven(t){return t==parseFloat(t)?!(t%2):void 0}},function(t,r){t.exports=function IsEvenStrict(t){return t===parseFloat(t)?!(t%2):void 0}},function(t,r){t.exports=function MaxAdd(t,r,o){return Math.min(t+r,o)}},function(t,r){t.exports=function Median(t){var r=t.length;if(0===r)return 0;t.sort((function(t,r){return t-r}));var o=Math.floor(r/2);return r%2==0?(t[o]+t[o-1])/2:t[o]}},function(t,r){t.exports=function MinSub(t,r,o){return Math.max(t-r,o)}},function(t,r){t.exports=function Percent(t,r,o,a){void 0===o&&(o=r+1);var h=(t-r)/(o-r);return h>1?void 0!==a?(h=(a-t)/(a-o))<0&&(h=0):h=1:h<0&&(h=0),h}},function(t,r){t.exports=function RandomXY(t,r){void 0===r&&(r=1);var o=2*Math.random()*Math.PI;return t.x=Math.cos(o)*r,t.y=Math.sin(o)*r,t}},function(t,r){t.exports=function RandomXYZ(t,r){void 0===r&&(r=1);var o=2*Math.random()*Math.PI,a=2*Math.random()-1,h=Math.sqrt(1-a*a)*r;return t.x=Math.cos(o)*h,t.y=Math.sin(o)*h,t.z=a*r,t}},function(t,r){t.exports=function RandomXYZW(t,r){return void 0===r&&(r=1),t.x=(2*Math.random()-1)*r,t.y=(2*Math.random()-1)*r,t.z=(2*Math.random()-1)*r,t.w=(2*Math.random()-1)*r,t}},function(t,r){t.exports=function Rotate(t,r){var o=t.x,a=t.y;return t.x=o*Math.cos(r)-a*Math.sin(r),t.y=o*Math.sin(r)+a*Math.cos(r),t}},function(t,r){t.exports=function RotateAroundDistance(t,r,o,a,h){var d=a+Math.atan2(t.y-o,t.x-r);return t.x=r+h*Math.cos(d),t.y=o+h*Math.sin(d),t}},function(t,r){t.exports=function RotateTo(t,r,o,a,h){return t.x=r+h*Math.cos(a),t.y=o+h*Math.sin(a),t}},function(t,r){t.exports=function RoundTo(t,r,o){void 0===r&&(r=0),void 0===o&&(o=10);var a=Math.pow(o,-r);return Math.round(t*a)/a}},function(t,r){t.exports=function SinCosTableGenerator(t,r,o,a){void 0===r&&(r=1),void 0===o&&(o=1),void 0===a&&(a=1),a*=Math.PI/t;for(var h=[],d=[],T=0;T<t;T++)r+=(o-=r*a)*a,h[T]=o,d[T]=r;return{sin:d,cos:h,length:t}}},function(t,r,o){var a=o(2);t.exports=function ToXY(t,r,o,h){void 0===h&&(h=new a);var d=0,T=0;return t>0&&t<=r*o&&(d=t>r-1?t-(T=Math.floor(t/r))*r:t,h.set(d,T)),h}},function(t,r){t.exports=function Within(t,r,o){return Math.abs(t-r)<=o}},function(t,r,o){var a=new(o(0))({initialize:function Vector4(t,r,o,a){this.x=0,this.y=0,this.z=0,this.w=0,"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=r||0,this.z=o||0,this.w=a||0)},clone:function clone(){return new a(this.x,this.y,this.z,this.w)},copy:function copy(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this.w=t.w||0,this},equals:function equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},set:function set(t,r,o,a){return"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=r||0,this.z=o||0,this.w=a||0),this},add:function add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this.w+=t.w||0,this},subtract:function subtract(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this.w-=t.w||0,this},scale:function scale(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function length(){var t=this.x,r=this.y,o=this.z,a=this.w;return Math.sqrt(t*t+r*r+o*o+a*a)},lengthSq:function lengthSq(){var t=this.x,r=this.y,o=this.z,a=this.w;return t*t+r*r+o*o+a*a},normalize:function normalize(){var t=this.x,r=this.y,o=this.z,a=this.w,h=t*t+r*r+o*o+a*a;return h>0&&(h=1/Math.sqrt(h),this.x=t*h,this.y=r*h,this.z=o*h,this.w=a*h),this},dot:function dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function lerp(t,r){void 0===r&&(r=0);var o=this.x,a=this.y,h=this.z,d=this.w;return this.x=o+r*(t.x-o),this.y=a+r*(t.y-a),this.z=h+r*(t.z-h),this.w=d+r*(t.w-d),this},multiply:function multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this.w*=t.w||1,this},divide:function divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this.w/=t.w||1,this},distance:function distance(t){var r=t.x-this.x,o=t.y-this.y,a=t.z-this.z||0,h=t.w-this.w||0;return Math.sqrt(r*r+o*o+a*a+h*h)},distanceSq:function distanceSq(t){var r=t.x-this.x,o=t.y-this.y,a=t.z-this.z||0,h=t.w-this.w||0;return r*r+o*o+a*a+h*h},negate:function negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function transformMat4(t){var r=this.x,o=this.y,a=this.z,h=this.w,d=t.val;return this.x=d[0]*r+d[4]*o+d[8]*a+d[12]*h,this.y=d[1]*r+d[5]*o+d[9]*a+d[13]*h,this.z=d[2]*r+d[6]*o+d[10]*a+d[14]*h,this.w=d[3]*r+d[7]*o+d[11]*a+d[15]*h,this},transformQuat:function transformQuat(t){var r=this.x,o=this.y,a=this.z,h=t.x,d=t.y,T=t.z,S=t.w,A=S*r+d*a-T*o,P=S*o+T*r-h*a,O=S*a+h*o-d*r,D=-h*r-d*o-T*a;return this.x=A*S+D*-h+P*-T-O*-d,this.y=P*S+D*-d+O*-h-A*-T,this.z=O*S+D*-T+A*-d-P*-h,this},reset:function reset(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});a.prototype.sub=a.prototype.subtract,a.prototype.mul=a.prototype.multiply,a.prototype.div=a.prototype.divide,a.prototype.dist=a.prototype.distance,a.prototype.distSq=a.prototype.distanceSq,a.prototype.len=a.prototype.length,a.prototype.lenSq=a.prototype.lengthSq,t.exports=a},function(t,r,o){var a=o(14),h=o(20),d=o(43),T=new h,S=new d,A=new a;t.exports=function RotateVec3(t,r,o){return S.setAxisAngle(r,o),T.fromRotationTranslation(S,A.set(0,0,0)),t.transformMat4(T)}},function(t,r){t.exports="resize"},function(t,r,o){var a=o(179),h=o(0),d=o(44),T=new h({Extends:a,initialize:function ScenePlugin(t,r,o){a.call(this,r),this.scene=t,this.systems=t.sys,this.pluginKey=o,t.sys.events.once(d.BOOT,this.boot,this)},boot:function boot(){},destroy:function destroy(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=T},function(t,r,o){var a=new(o(0))({initialize:function BasePlugin(t){this.pluginManager=t,this.game=t.game},init:function init(){},start:function start(){},stop:function stop(){},destroy:function destroy(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=a},function(t,r){t.exports="addedtoscene"},function(t,r){t.exports="boot"},function(t,r){t.exports="create"},function(t,r){t.exports="destroy"},function(t,r){t.exports="pause"},function(t,r){t.exports="postupdate"},function(t,r){t.exports="prerender"},function(t,r){t.exports="preupdate"},function(t,r){t.exports="ready"},function(t,r){t.exports="removedfromscene"},function(t,r){t.exports="render"},function(t,r){t.exports="resume"},function(t,r){t.exports="shutdown"},function(t,r){t.exports="sleep"},function(t,r){t.exports="start"},function(t,r){t.exports="transitioncomplete"},function(t,r){t.exports="transitioninit"},function(t,r){t.exports="transitionout"},function(t,r){t.exports="transitionstart"},function(t,r){t.exports="transitionwake"},function(t,r){t.exports="update"},function(t,r){t.exports="wake"},function(t,r){(function(){var r,o,a,h=this&&this.__extends||(r=function extendStatics(t,o){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])},r(t,o)},function(t,o){function __(){this.constructor=t}r(t,o),t.prototype=null===o?Object.create(o):(__.prototype=o.prototype,new __)});!function(t){var r,o,a,d=function(){function Animation(t,r,o){if(null==t)throw new Error("name cannot be null.");if(null==r)throw new Error("timelines cannot be null.");this.name=t,this.timelines=r,this.timelineIds=[];for(var a=0;a<r.length;a++)this.timelineIds[r[a].getPropertyId()]=!0;this.duration=o}return Animation.prototype.hasTimeline=function(t){return 1==this.timelineIds[t]},Animation.prototype.apply=function(t,r,o,a,h,d,T,S){if(null==t)throw new Error("skeleton cannot be null.");a&&0!=this.duration&&(o%=this.duration,r>0&&(r%=this.duration));for(var A=this.timelines,P=0,O=A.length;P<O;P++)A[P].apply(t,r,o,h,d,T,S)},Animation.binarySearch=function(t,r,o){void 0===o&&(o=1);var a=0,h=t.length/o-2;if(0==h)return o;for(var d=h>>>1;;){if(t[(d+1)*o]<=r?a=d+1:h=d,a==h)return(a+1)*o;d=a+h>>>1}},Animation.linearSearch=function(t,r,o){for(var a=0,h=t.length-o;a<=h;a+=o)if(t[a]>r)return a;return-1},Animation}();t.Animation=d,function(t){t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add"}(r=t.MixBlend||(t.MixBlend={})),function(t){t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut"}(o=t.MixDirection||(t.MixDirection={})),function(t){t[t.rotate=0]="rotate",t[t.translate=1]="translate",t[t.scale=2]="scale",t[t.shear=3]="shear",t[t.attachment=4]="attachment",t[t.color=5]="color",t[t.deform=6]="deform",t[t.event=7]="event",t[t.drawOrder=8]="drawOrder",t[t.ikConstraint=9]="ikConstraint",t[t.transformConstraint=10]="transformConstraint",t[t.pathConstraintPosition=11]="pathConstraintPosition",t[t.pathConstraintSpacing=12]="pathConstraintSpacing",t[t.pathConstraintMix=13]="pathConstraintMix",t[t.twoColor=14]="twoColor"}(a=t.TimelineType||(t.TimelineType={}));var T=function(){function CurveTimeline(r){if(r<=0)throw new Error("frameCount must be > 0: "+r);this.curves=t.Utils.newFloatArray((r-1)*CurveTimeline.BEZIER_SIZE)}return CurveTimeline.prototype.getFrameCount=function(){return this.curves.length/CurveTimeline.BEZIER_SIZE+1},CurveTimeline.prototype.setLinear=function(t){this.curves[t*CurveTimeline.BEZIER_SIZE]=CurveTimeline.LINEAR},CurveTimeline.prototype.setStepped=function(t){this.curves[t*CurveTimeline.BEZIER_SIZE]=CurveTimeline.STEPPED},CurveTimeline.prototype.getCurveType=function(t){var r=t*CurveTimeline.BEZIER_SIZE;if(r==this.curves.length)return CurveTimeline.LINEAR;var o=this.curves[r];return o==CurveTimeline.LINEAR?CurveTimeline.LINEAR:o==CurveTimeline.STEPPED?CurveTimeline.STEPPED:CurveTimeline.BEZIER},CurveTimeline.prototype.setCurve=function(t,r,o,a,h){var d=.03*(2*-r+a),T=.03*(2*-o+h),S=.006*(3*(r-a)+1),A=.006*(3*(o-h)+1),P=2*d+S,O=2*T+A,D=.3*r+d+.16666667*S,L=.3*o+T+.16666667*A,I=t*CurveTimeline.BEZIER_SIZE,B=this.curves;B[I++]=CurveTimeline.BEZIER;for(var N=D,G=L,Y=I+CurveTimeline.BEZIER_SIZE-1;I<Y;I+=2)B[I]=N,B[I+1]=G,D+=P,L+=O,P+=S,O+=A,N+=D,G+=L},CurveTimeline.prototype.getCurvePercent=function(r,o){o=t.MathUtils.clamp(o,0,1);var a=this.curves,h=r*CurveTimeline.BEZIER_SIZE,d=a[h];if(d==CurveTimeline.LINEAR)return o;if(d==CurveTimeline.STEPPED)return 0;for(var T=0,S=++h,A=h+CurveTimeline.BEZIER_SIZE-1;h<A;h+=2)if((T=a[h])>=o){var P=void 0,O=void 0;return h==S?(P=0,O=0):(P=a[h-2],O=a[h-1]),O+(a[h+1]-O)*(o-P)/(T-P)}var D=a[h-1];return D+(1-D)*(o-T)/(1-T)},CurveTimeline.LINEAR=0,CurveTimeline.STEPPED=1,CurveTimeline.BEZIER=2,CurveTimeline.BEZIER_SIZE=19,CurveTimeline}();t.CurveTimeline=T;var S=function(o){function RotateTimeline(r){var a=o.call(this,r)||this;return a.frames=t.Utils.newFloatArray(r<<1),a}return h(RotateTimeline,o),RotateTimeline.prototype.getPropertyId=function(){return(a.rotate<<24)+this.boneIndex},RotateTimeline.prototype.setFrame=function(t,r,o){t<<=1,this.frames[t]=r,this.frames[t+RotateTimeline.ROTATION]=o},RotateTimeline.prototype.apply=function(t,o,a,h,T,S,A){var P=this.frames,O=t.bones[this.boneIndex];if(O.active)if(a<P[0])switch(S){case r.setup:return void(O.rotation=O.data.rotation);case r.first:var D=O.data.rotation-O.rotation;O.rotation+=(D-360*(16384-(16384.499999999996-D/360|0)))*T}else if(a>=P[P.length-RotateTimeline.ENTRIES]){var L=P[P.length+RotateTimeline.PREV_ROTATION];switch(S){case r.setup:O.rotation=O.data.rotation+L*T;break;case r.first:case r.replace:L+=O.data.rotation-O.rotation,L-=360*(16384-(16384.499999999996-L/360|0));case r.add:O.rotation+=L*T}}else{var I=d.binarySearch(P,a,RotateTimeline.ENTRIES),B=P[I+RotateTimeline.PREV_ROTATION],N=P[I],G=this.getCurvePercent((I>>1)-1,1-(a-N)/(P[I+RotateTimeline.PREV_TIME]-N)),Y=P[I+RotateTimeline.ROTATION]-B;switch(Y=B+(Y-360*(16384-(16384.499999999996-Y/360|0)))*G,S){case r.setup:O.rotation=O.data.rotation+(Y-360*(16384-(16384.499999999996-Y/360|0)))*T;break;case r.first:case r.replace:Y+=O.data.rotation-O.rotation;case r.add:O.rotation+=(Y-360*(16384-(16384.499999999996-Y/360|0)))*T}}},RotateTimeline.ENTRIES=2,RotateTimeline.PREV_TIME=-2,RotateTimeline.PREV_ROTATION=-1,RotateTimeline.ROTATION=1,RotateTimeline}(T);t.RotateTimeline=S;var A=function(o){function TranslateTimeline(r){var a=o.call(this,r)||this;return a.frames=t.Utils.newFloatArray(r*TranslateTimeline.ENTRIES),a}return h(TranslateTimeline,o),TranslateTimeline.prototype.getPropertyId=function(){return(a.translate<<24)+this.boneIndex},TranslateTimeline.prototype.setFrame=function(t,r,o,a){t*=TranslateTimeline.ENTRIES,this.frames[t]=r,this.frames[t+TranslateTimeline.X]=o,this.frames[t+TranslateTimeline.Y]=a},TranslateTimeline.prototype.apply=function(t,o,a,h,T,S,A){var P=this.frames,O=t.bones[this.boneIndex];if(O.active)if(a<P[0])switch(S){case r.setup:return O.x=O.data.x,void(O.y=O.data.y);case r.first:O.x+=(O.data.x-O.x)*T,O.y+=(O.data.y-O.y)*T}else{var D=0,L=0;if(a>=P[P.length-TranslateTimeline.ENTRIES])D=P[P.length+TranslateTimeline.PREV_X],L=P[P.length+TranslateTimeline.PREV_Y];else{var I=d.binarySearch(P,a,TranslateTimeline.ENTRIES);D=P[I+TranslateTimeline.PREV_X],L=P[I+TranslateTimeline.PREV_Y];var B=P[I],N=this.getCurvePercent(I/TranslateTimeline.ENTRIES-1,1-(a-B)/(P[I+TranslateTimeline.PREV_TIME]-B));D+=(P[I+TranslateTimeline.X]-D)*N,L+=(P[I+TranslateTimeline.Y]-L)*N}switch(S){case r.setup:O.x=O.data.x+D*T,O.y=O.data.y+L*T;break;case r.first:case r.replace:O.x+=(O.data.x+D-O.x)*T,O.y+=(O.data.y+L-O.y)*T;break;case r.add:O.x+=D*T,O.y+=L*T}}},TranslateTimeline.ENTRIES=3,TranslateTimeline.PREV_TIME=-3,TranslateTimeline.PREV_X=-2,TranslateTimeline.PREV_Y=-1,TranslateTimeline.X=1,TranslateTimeline.Y=2,TranslateTimeline}(T);t.TranslateTimeline=A;var P=function(T){function ScaleTimeline(t){return T.call(this,t)||this}return h(ScaleTimeline,T),ScaleTimeline.prototype.getPropertyId=function(){return(a.scale<<24)+this.boneIndex},ScaleTimeline.prototype.apply=function(a,h,T,S,A,P,O){var D=this.frames,L=a.bones[this.boneIndex];if(L.active)if(T<D[0])switch(P){case r.setup:return L.scaleX=L.data.scaleX,void(L.scaleY=L.data.scaleY);case r.first:L.scaleX+=(L.data.scaleX-L.scaleX)*A,L.scaleY+=(L.data.scaleY-L.scaleY)*A}else{var I=0,B=0;if(T>=D[D.length-ScaleTimeline.ENTRIES])I=D[D.length+ScaleTimeline.PREV_X]*L.data.scaleX,B=D[D.length+ScaleTimeline.PREV_Y]*L.data.scaleY;else{var N=d.binarySearch(D,T,ScaleTimeline.ENTRIES);I=D[N+ScaleTimeline.PREV_X],B=D[N+ScaleTimeline.PREV_Y];var G=D[N],Y=this.getCurvePercent(N/ScaleTimeline.ENTRIES-1,1-(T-G)/(D[N+ScaleTimeline.PREV_TIME]-G));I=(I+(D[N+ScaleTimeline.X]-I)*Y)*L.data.scaleX,B=(B+(D[N+ScaleTimeline.Y]-B)*Y)*L.data.scaleY}if(1==A)P==r.add?(L.scaleX+=I-L.data.scaleX,L.scaleY+=B-L.data.scaleY):(L.scaleX=I,L.scaleY=B);else{var X=0,U=0;if(O==o.mixOut)switch(P){case r.setup:X=L.data.scaleX,U=L.data.scaleY,L.scaleX=X+(Math.abs(I)*t.MathUtils.signum(X)-X)*A,L.scaleY=U+(Math.abs(B)*t.MathUtils.signum(U)-U)*A;break;case r.first:case r.replace:X=L.scaleX,U=L.scaleY,L.scaleX=X+(Math.abs(I)*t.MathUtils.signum(X)-X)*A,L.scaleY=U+(Math.abs(B)*t.MathUtils.signum(U)-U)*A;break;case r.add:X=L.scaleX,U=L.scaleY,L.scaleX=X+(Math.abs(I)*t.MathUtils.signum(X)-L.data.scaleX)*A,L.scaleY=U+(Math.abs(B)*t.MathUtils.signum(U)-L.data.scaleY)*A}else switch(P){case r.setup:X=Math.abs(L.data.scaleX)*t.MathUtils.signum(I),U=Math.abs(L.data.scaleY)*t.MathUtils.signum(B),L.scaleX=X+(I-X)*A,L.scaleY=U+(B-U)*A;break;case r.first:case r.replace:X=Math.abs(L.scaleX)*t.MathUtils.signum(I),U=Math.abs(L.scaleY)*t.MathUtils.signum(B),L.scaleX=X+(I-X)*A,L.scaleY=U+(B-U)*A;break;case r.add:X=t.MathUtils.signum(I),U=t.MathUtils.signum(B),L.scaleX=Math.abs(L.scaleX)*X+(I-Math.abs(L.data.scaleX)*X)*A,L.scaleY=Math.abs(L.scaleY)*U+(B-Math.abs(L.data.scaleY)*U)*A}}}},ScaleTimeline}(A);t.ScaleTimeline=P;var O=function(t){function ShearTimeline(r){return t.call(this,r)||this}return h(ShearTimeline,t),ShearTimeline.prototype.getPropertyId=function(){return(a.shear<<24)+this.boneIndex},ShearTimeline.prototype.apply=function(t,o,a,h,T,S,A){var P=this.frames,O=t.bones[this.boneIndex];if(O.active)if(a<P[0])switch(S){case r.setup:return O.shearX=O.data.shearX,void(O.shearY=O.data.shearY);case r.first:O.shearX+=(O.data.shearX-O.shearX)*T,O.shearY+=(O.data.shearY-O.shearY)*T}else{var D=0,L=0;if(a>=P[P.length-ShearTimeline.ENTRIES])D=P[P.length+ShearTimeline.PREV_X],L=P[P.length+ShearTimeline.PREV_Y];else{var I=d.binarySearch(P,a,ShearTimeline.ENTRIES);D=P[I+ShearTimeline.PREV_X],L=P[I+ShearTimeline.PREV_Y];var B=P[I],N=this.getCurvePercent(I/ShearTimeline.ENTRIES-1,1-(a-B)/(P[I+ShearTimeline.PREV_TIME]-B));D+=(P[I+ShearTimeline.X]-D)*N,L+=(P[I+ShearTimeline.Y]-L)*N}switch(S){case r.setup:O.shearX=O.data.shearX+D*T,O.shearY=O.data.shearY+L*T;break;case r.first:case r.replace:O.shearX+=(O.data.shearX+D-O.shearX)*T,O.shearY+=(O.data.shearY+L-O.shearY)*T;break;case r.add:O.shearX+=D*T,O.shearY+=L*T}}},ShearTimeline}(A);t.ShearTimeline=O;var D=function(o){function ColorTimeline(r){var a=o.call(this,r)||this;return a.frames=t.Utils.newFloatArray(r*ColorTimeline.ENTRIES),a}return h(ColorTimeline,o),ColorTimeline.prototype.getPropertyId=function(){return(a.color<<24)+this.slotIndex},ColorTimeline.prototype.setFrame=function(t,r,o,a,h,d){t*=ColorTimeline.ENTRIES,this.frames[t]=r,this.frames[t+ColorTimeline.R]=o,this.frames[t+ColorTimeline.G]=a,this.frames[t+ColorTimeline.B]=h,this.frames[t+ColorTimeline.A]=d},ColorTimeline.prototype.apply=function(t,o,a,h,T,S,A){var P=t.slots[this.slotIndex];if(P.bone.active){var O=this.frames;if(a<O[0])switch(S){case r.setup:return void P.color.setFromColor(P.data.color);case r.first:var D=P.color,L=P.data.color;D.add((L.r-D.r)*T,(L.g-D.g)*T,(L.b-D.b)*T,(L.a-D.a)*T)}else{var I=0,B=0,N=0,G=0;if(a>=O[O.length-ColorTimeline.ENTRIES]){var Y=O.length;I=O[Y+ColorTimeline.PREV_R],B=O[Y+ColorTimeline.PREV_G],N=O[Y+ColorTimeline.PREV_B],G=O[Y+ColorTimeline.PREV_A]}else{var X=d.binarySearch(O,a,ColorTimeline.ENTRIES);I=O[X+ColorTimeline.PREV_R],B=O[X+ColorTimeline.PREV_G],N=O[X+ColorTimeline.PREV_B],G=O[X+ColorTimeline.PREV_A];var U=O[X],z=this.getCurvePercent(X/ColorTimeline.ENTRIES-1,1-(a-U)/(O[X+ColorTimeline.PREV_TIME]-U));I+=(O[X+ColorTimeline.R]-I)*z,B+=(O[X+ColorTimeline.G]-B)*z,N+=(O[X+ColorTimeline.B]-N)*z,G+=(O[X+ColorTimeline.A]-G)*z}if(1==T)P.color.set(I,B,N,G);else{D=P.color;S==r.setup&&D.setFromColor(P.data.color),D.add((I-D.r)*T,(B-D.g)*T,(N-D.b)*T,(G-D.a)*T)}}}},ColorTimeline.ENTRIES=5,ColorTimeline.PREV_TIME=-5,ColorTimeline.PREV_R=-4,ColorTimeline.PREV_G=-3,ColorTimeline.PREV_B=-2,ColorTimeline.PREV_A=-1,ColorTimeline.R=1,ColorTimeline.G=2,ColorTimeline.B=3,ColorTimeline.A=4,ColorTimeline}(T);t.ColorTimeline=D;var L=function(o){function TwoColorTimeline(r){var a=o.call(this,r)||this;return a.frames=t.Utils.newFloatArray(r*TwoColorTimeline.ENTRIES),a}return h(TwoColorTimeline,o),TwoColorTimeline.prototype.getPropertyId=function(){return(a.twoColor<<24)+this.slotIndex},TwoColorTimeline.prototype.setFrame=function(t,r,o,a,h,d,T,S,A){t*=TwoColorTimeline.ENTRIES,this.frames[t]=r,this.frames[t+TwoColorTimeline.R]=o,this.frames[t+TwoColorTimeline.G]=a,this.frames[t+TwoColorTimeline.B]=h,this.frames[t+TwoColorTimeline.A]=d,this.frames[t+TwoColorTimeline.R2]=T,this.frames[t+TwoColorTimeline.G2]=S,this.frames[t+TwoColorTimeline.B2]=A},TwoColorTimeline.prototype.apply=function(t,o,a,h,T,S,A){var P=t.slots[this.slotIndex];if(P.bone.active){var O=this.frames;if(a<O[0])switch(S){case r.setup:return P.color.setFromColor(P.data.color),void P.darkColor.setFromColor(P.data.darkColor);case r.first:var D=P.color,L=P.darkColor,I=P.data.color,B=P.data.darkColor;D.add((I.r-D.r)*T,(I.g-D.g)*T,(I.b-D.b)*T,(I.a-D.a)*T),L.add((B.r-L.r)*T,(B.g-L.g)*T,(B.b-L.b)*T,0)}else{var N=0,G=0,Y=0,X=0,U=0,z=0,V=0;if(a>=O[O.length-TwoColorTimeline.ENTRIES]){var W=O.length;N=O[W+TwoColorTimeline.PREV_R],G=O[W+TwoColorTimeline.PREV_G],Y=O[W+TwoColorTimeline.PREV_B],X=O[W+TwoColorTimeline.PREV_A],U=O[W+TwoColorTimeline.PREV_R2],z=O[W+TwoColorTimeline.PREV_G2],V=O[W+TwoColorTimeline.PREV_B2]}else{var H=d.binarySearch(O,a,TwoColorTimeline.ENTRIES);N=O[H+TwoColorTimeline.PREV_R],G=O[H+TwoColorTimeline.PREV_G],Y=O[H+TwoColorTimeline.PREV_B],X=O[H+TwoColorTimeline.PREV_A],U=O[H+TwoColorTimeline.PREV_R2],z=O[H+TwoColorTimeline.PREV_G2],V=O[H+TwoColorTimeline.PREV_B2];var q=O[H],Z=this.getCurvePercent(H/TwoColorTimeline.ENTRIES-1,1-(a-q)/(O[H+TwoColorTimeline.PREV_TIME]-q));N+=(O[H+TwoColorTimeline.R]-N)*Z,G+=(O[H+TwoColorTimeline.G]-G)*Z,Y+=(O[H+TwoColorTimeline.B]-Y)*Z,X+=(O[H+TwoColorTimeline.A]-X)*Z,U+=(O[H+TwoColorTimeline.R2]-U)*Z,z+=(O[H+TwoColorTimeline.G2]-z)*Z,V+=(O[H+TwoColorTimeline.B2]-V)*Z}if(1==T)P.color.set(N,G,Y,X),P.darkColor.set(U,z,V,1);else{D=P.color,L=P.darkColor;S==r.setup&&(D.setFromColor(P.data.color),L.setFromColor(P.data.darkColor)),D.add((N-D.r)*T,(G-D.g)*T,(Y-D.b)*T,(X-D.a)*T),L.add((U-L.r)*T,(z-L.g)*T,(V-L.b)*T,0)}}}},TwoColorTimeline.ENTRIES=8,TwoColorTimeline.PREV_TIME=-8,TwoColorTimeline.PREV_R=-7,TwoColorTimeline.PREV_G=-6,TwoColorTimeline.PREV_B=-5,TwoColorTimeline.PREV_A=-4,TwoColorTimeline.PREV_R2=-3,TwoColorTimeline.PREV_G2=-2,TwoColorTimeline.PREV_B2=-1,TwoColorTimeline.R=1,TwoColorTimeline.G=2,TwoColorTimeline.B=3,TwoColorTimeline.A=4,TwoColorTimeline.R2=5,TwoColorTimeline.G2=6,TwoColorTimeline.B2=7,TwoColorTimeline}(T);t.TwoColorTimeline=L;var I=function(){function AttachmentTimeline(r){this.frames=t.Utils.newFloatArray(r),this.attachmentNames=new Array(r)}return AttachmentTimeline.prototype.getPropertyId=function(){return(a.attachment<<24)+this.slotIndex},AttachmentTimeline.prototype.getFrameCount=function(){return this.frames.length},AttachmentTimeline.prototype.setFrame=function(t,r,o){this.frames[t]=r,this.attachmentNames[t]=o},AttachmentTimeline.prototype.apply=function(t,a,h,T,S,A,P){var O=t.slots[this.slotIndex];if(O.bone.active)if(P!=o.mixOut){var D=this.frames;if(h<D[0])A!=r.setup&&A!=r.first||this.setAttachment(t,O,O.data.attachmentName);else{var L=0;L=h>=D[D.length-1]?D.length-1:d.binarySearch(D,h,1)-1;var I=this.attachmentNames[L];t.slots[this.slotIndex].setAttachment(null==I?null:t.getAttachment(this.slotIndex,I))}}else A==r.setup&&this.setAttachment(t,O,O.data.attachmentName)},AttachmentTimeline.prototype.setAttachment=function(t,r,o){r.attachment=null==o?null:t.getAttachment(this.slotIndex,o)},AttachmentTimeline}();t.AttachmentTimeline=I;var B=null,N=function(o){function DeformTimeline(r){var a=o.call(this,r)||this;return a.frames=t.Utils.newFloatArray(r),a.frameVertices=new Array(r),null==B&&(B=t.Utils.newFloatArray(64)),a}return h(DeformTimeline,o),DeformTimeline.prototype.getPropertyId=function(){return(a.deform<<27)+ +this.attachment.id+this.slotIndex},DeformTimeline.prototype.setFrame=function(t,r,o){this.frames[t]=r,this.frameVertices[t]=o},DeformTimeline.prototype.apply=function(o,a,h,T,S,A,P){var O=o.slots[this.slotIndex];if(O.bone.active){var D=O.getAttachment();if(D instanceof t.VertexAttachment&&D.deformAttachment==this.attachment){var L=O.deform;0==L.length&&(A=r.setup);var I=this.frameVertices,B=I[0].length,N=this.frames;if(h<N[0]){var G=D;switch(A){case r.setup:return void(L.length=0);case r.first:if(1==S){L.length=0;break}var Y=t.Utils.setArraySize(L,B);if(null==G.bones)for(var X=G.vertices,U=0;U<B;U++)Y[U]+=(X[U]-Y[U])*S;else{S=1-S;for(U=0;U<B;U++)Y[U]*=S}}}else{var z=t.Utils.setArraySize(L,B);if(h>=N[N.length-1]){var V=I[N.length-1];if(1==S)if(A==r.add)if(null==(G=D).bones){X=G.vertices;for(var W=0;W<B;W++)z[W]+=V[W]-X[W]}else for(var H=0;H<B;H++)z[H]+=V[H];else t.Utils.arrayCopy(V,0,z,0,B);else switch(A){case r.setup:var q=D;if(null==q.bones){X=q.vertices;for(var Z=0;Z<B;Z++){var K=X[Z];z[Z]=K+(V[Z]-K)*S}}else for(var J=0;J<B;J++)z[J]=V[J]*S;break;case r.first:case r.replace:for(var Q=0;Q<B;Q++)z[Q]+=(V[Q]-z[Q])*S;break;case r.add:if(null==(G=D).bones){X=G.vertices;for(var $=0;$<B;$++)z[$]+=(V[$]-X[$])*S}else for(var tt=0;tt<B;tt++)z[tt]+=V[tt]*S}}else{var et=d.binarySearch(N,h),it=I[et-1],nt=I[et],rt=N[et],st=this.getCurvePercent(et-1,1-(h-rt)/(N[et-1]-rt));if(1==S)if(A==r.add)if(null==(G=D).bones){X=G.vertices;for(var ot=0;ot<B;ot++){var at=it[ot];z[ot]+=at+(nt[ot]-at)*st-X[ot]}}else for(var ht=0;ht<B;ht++){at=it[ht];z[ht]+=at+(nt[ht]-at)*st}else for(var lt=0;lt<B;lt++){at=it[lt];z[lt]=at+(nt[lt]-at)*st}else switch(A){case r.setup:var ut=D;if(null==ut.bones){X=ut.vertices;for(var ct=0;ct<B;ct++){at=it[ct],K=X[ct];z[ct]=K+(at+(nt[ct]-at)*st-K)*S}}else for(var dt=0;dt<B;dt++){at=it[dt];z[dt]=(at+(nt[dt]-at)*st)*S}break;case r.first:case r.replace:for(var ft=0;ft<B;ft++){at=it[ft];z[ft]+=(at+(nt[ft]-at)*st-z[ft])*S}break;case r.add:if(null==(G=D).bones){X=G.vertices;for(var pt=0;pt<B;pt++){at=it[pt];z[pt]+=(at+(nt[pt]-at)*st-X[pt])*S}}else for(var gt=0;gt<B;gt++){at=it[gt];z[gt]+=(at+(nt[gt]-at)*st)*S}}}}}}},DeformTimeline}(T);t.DeformTimeline=N;var G=function(){function EventTimeline(r){this.frames=t.Utils.newFloatArray(r),this.events=new Array(r)}return EventTimeline.prototype.getPropertyId=function(){return a.event<<24},EventTimeline.prototype.getFrameCount=function(){return this.frames.length},EventTimeline.prototype.setFrame=function(t,r){this.frames[t]=r.time,this.events[t]=r},EventTimeline.prototype.apply=function(t,r,o,a,h,T,S){if(null!=a){var A=this.frames,P=this.frames.length;if(r>o)this.apply(t,r,Number.MAX_VALUE,a,h,T,S),r=-1;else if(r>=A[P-1])return;if(!(o<A[0])){var O=0;if(r<A[0])O=0;else for(var D=A[O=d.binarySearch(A,r)];O>0&&A[O-1]==D;)O--;for(;O<P&&o>=A[O];O++)a.push(this.events[O])}}},EventTimeline}();t.EventTimeline=G;var Y=function(){function DrawOrderTimeline(r){this.frames=t.Utils.newFloatArray(r),this.drawOrders=new Array(r)}return DrawOrderTimeline.prototype.getPropertyId=function(){return a.drawOrder<<24},DrawOrderTimeline.prototype.getFrameCount=function(){return this.frames.length},DrawOrderTimeline.prototype.setFrame=function(t,r,o){this.frames[t]=r,this.drawOrders[t]=o},DrawOrderTimeline.prototype.apply=function(a,h,T,S,A,P,O){var D=a.drawOrder,L=a.slots;if(O!=o.mixOut){var I=this.frames;if(T<I[0])P!=r.setup&&P!=r.first||t.Utils.arrayCopy(a.slots,0,a.drawOrder,0,a.slots.length);else{var B=0;B=T>=I[I.length-1]?I.length-1:d.binarySearch(I,T)-1;var N=this.drawOrders[B];if(null==N)t.Utils.arrayCopy(L,0,D,0,L.length);else for(var G=0,Y=N.length;G<Y;G++)D[G]=L[N[G]]}}else P==r.setup&&t.Utils.arrayCopy(a.slots,0,a.drawOrder,0,a.slots.length)},DrawOrderTimeline}();t.DrawOrderTimeline=Y;var X=function(T){function IkConstraintTimeline(r){var o=T.call(this,r)||this;return o.frames=t.Utils.newFloatArray(r*IkConstraintTimeline.ENTRIES),o}return h(IkConstraintTimeline,T),IkConstraintTimeline.prototype.getPropertyId=function(){return(a.ikConstraint<<24)+this.ikConstraintIndex},IkConstraintTimeline.prototype.setFrame=function(t,r,o,a,h,d,T){t*=IkConstraintTimeline.ENTRIES,this.frames[t]=r,this.frames[t+IkConstraintTimeline.MIX]=o,this.frames[t+IkConstraintTimeline.SOFTNESS]=a,this.frames[t+IkConstraintTimeline.BEND_DIRECTION]=h,this.frames[t+IkConstraintTimeline.COMPRESS]=d?1:0,this.frames[t+IkConstraintTimeline.STRETCH]=T?1:0},IkConstraintTimeline.prototype.apply=function(t,a,h,T,S,A,P){var O=this.frames,D=t.ikConstraints[this.ikConstraintIndex];if(D.active)if(h<O[0])switch(A){case r.setup:return D.mix=D.data.mix,D.softness=D.data.softness,D.bendDirection=D.data.bendDirection,D.compress=D.data.compress,void(D.stretch=D.data.stretch);case r.first:D.mix+=(D.data.mix-D.mix)*S,D.softness+=(D.data.softness-D.softness)*S,D.bendDirection=D.data.bendDirection,D.compress=D.data.compress,D.stretch=D.data.stretch}else if(h>=O[O.length-IkConstraintTimeline.ENTRIES])A==r.setup?(D.mix=D.data.mix+(O[O.length+IkConstraintTimeline.PREV_MIX]-D.data.mix)*S,D.softness=D.data.softness+(O[O.length+IkConstraintTimeline.PREV_SOFTNESS]-D.data.softness)*S,P==o.mixOut?(D.bendDirection=D.data.bendDirection,D.compress=D.data.compress,D.stretch=D.data.stretch):(D.bendDirection=O[O.length+IkConstraintTimeline.PREV_BEND_DIRECTION],D.compress=0!=O[O.length+IkConstraintTimeline.PREV_COMPRESS],D.stretch=0!=O[O.length+IkConstraintTimeline.PREV_STRETCH])):(D.mix+=(O[O.length+IkConstraintTimeline.PREV_MIX]-D.mix)*S,D.softness+=(O[O.length+IkConstraintTimeline.PREV_SOFTNESS]-D.softness)*S,P==o.mixIn&&(D.bendDirection=O[O.length+IkConstraintTimeline.PREV_BEND_DIRECTION],D.compress=0!=O[O.length+IkConstraintTimeline.PREV_COMPRESS],D.stretch=0!=O[O.length+IkConstraintTimeline.PREV_STRETCH]));else{var L=d.binarySearch(O,h,IkConstraintTimeline.ENTRIES),I=O[L+IkConstraintTimeline.PREV_MIX],B=O[L+IkConstraintTimeline.PREV_SOFTNESS],N=O[L],G=this.getCurvePercent(L/IkConstraintTimeline.ENTRIES-1,1-(h-N)/(O[L+IkConstraintTimeline.PREV_TIME]-N));A==r.setup?(D.mix=D.data.mix+(I+(O[L+IkConstraintTimeline.MIX]-I)*G-D.data.mix)*S,D.softness=D.data.softness+(B+(O[L+IkConstraintTimeline.SOFTNESS]-B)*G-D.data.softness)*S,P==o.mixOut?(D.bendDirection=D.data.bendDirection,D.compress=D.data.compress,D.stretch=D.data.stretch):(D.bendDirection=O[L+IkConstraintTimeline.PREV_BEND_DIRECTION],D.compress=0!=O[L+IkConstraintTimeline.PREV_COMPRESS],D.stretch=0!=O[L+IkConstraintTimeline.PREV_STRETCH])):(D.mix+=(I+(O[L+IkConstraintTimeline.MIX]-I)*G-D.mix)*S,D.softness+=(B+(O[L+IkConstraintTimeline.SOFTNESS]-B)*G-D.softness)*S,P==o.mixIn&&(D.bendDirection=O[L+IkConstraintTimeline.PREV_BEND_DIRECTION],D.compress=0!=O[L+IkConstraintTimeline.PREV_COMPRESS],D.stretch=0!=O[L+IkConstraintTimeline.PREV_STRETCH]))}},IkConstraintTimeline.ENTRIES=6,IkConstraintTimeline.PREV_TIME=-6,IkConstraintTimeline.PREV_MIX=-5,IkConstraintTimeline.PREV_SOFTNESS=-4,IkConstraintTimeline.PREV_BEND_DIRECTION=-3,IkConstraintTimeline.PREV_COMPRESS=-2,IkConstraintTimeline.PREV_STRETCH=-1,IkConstraintTimeline.MIX=1,IkConstraintTimeline.SOFTNESS=2,IkConstraintTimeline.BEND_DIRECTION=3,IkConstraintTimeline.COMPRESS=4,IkConstraintTimeline.STRETCH=5,IkConstraintTimeline}(T);t.IkConstraintTimeline=X;var U=function(o){function TransformConstraintTimeline(r){var a=o.call(this,r)||this;return a.frames=t.Utils.newFloatArray(r*TransformConstraintTimeline.ENTRIES),a}return h(TransformConstraintTimeline,o),TransformConstraintTimeline.prototype.getPropertyId=function(){return(a.transformConstraint<<24)+this.transformConstraintIndex},TransformConstraintTimeline.prototype.setFrame=function(t,r,o,a,h,d){t*=TransformConstraintTimeline.ENTRIES,this.frames[t]=r,this.frames[t+TransformConstraintTimeline.ROTATE]=o,this.frames[t+TransformConstraintTimeline.TRANSLATE]=a,this.frames[t+TransformConstraintTimeline.SCALE]=h,this.frames[t+TransformConstraintTimeline.SHEAR]=d},TransformConstraintTimeline.prototype.apply=function(t,o,a,h,T,S,A){var P=this.frames,O=t.transformConstraints[this.transformConstraintIndex];if(O.active)if(a<P[0]){var D=O.data;switch(S){case r.setup:return O.rotateMix=D.rotateMix,O.translateMix=D.translateMix,O.scaleMix=D.scaleMix,void(O.shearMix=D.shearMix);case r.first:O.rotateMix+=(D.rotateMix-O.rotateMix)*T,O.translateMix+=(D.translateMix-O.translateMix)*T,O.scaleMix+=(D.scaleMix-O.scaleMix)*T,O.shearMix+=(D.shearMix-O.shearMix)*T}}else{var L=0,I=0,B=0,N=0;if(a>=P[P.length-TransformConstraintTimeline.ENTRIES]){var G=P.length;L=P[G+TransformConstraintTimeline.PREV_ROTATE],I=P[G+TransformConstraintTimeline.PREV_TRANSLATE],B=P[G+TransformConstraintTimeline.PREV_SCALE],N=P[G+TransformConstraintTimeline.PREV_SHEAR]}else{var Y=d.binarySearch(P,a,TransformConstraintTimeline.ENTRIES);L=P[Y+TransformConstraintTimeline.PREV_ROTATE],I=P[Y+TransformConstraintTimeline.PREV_TRANSLATE],B=P[Y+TransformConstraintTimeline.PREV_SCALE],N=P[Y+TransformConstraintTimeline.PREV_SHEAR];var X=P[Y],U=this.getCurvePercent(Y/TransformConstraintTimeline.ENTRIES-1,1-(a-X)/(P[Y+TransformConstraintTimeline.PREV_TIME]-X));L+=(P[Y+TransformConstraintTimeline.ROTATE]-L)*U,I+=(P[Y+TransformConstraintTimeline.TRANSLATE]-I)*U,B+=(P[Y+TransformConstraintTimeline.SCALE]-B)*U,N+=(P[Y+TransformConstraintTimeline.SHEAR]-N)*U}if(S==r.setup){D=O.data;O.rotateMix=D.rotateMix+(L-D.rotateMix)*T,O.translateMix=D.translateMix+(I-D.translateMix)*T,O.scaleMix=D.scaleMix+(B-D.scaleMix)*T,O.shearMix=D.shearMix+(N-D.shearMix)*T}else O.rotateMix+=(L-O.rotateMix)*T,O.translateMix+=(I-O.translateMix)*T,O.scaleMix+=(B-O.scaleMix)*T,O.shearMix+=(N-O.shearMix)*T}},TransformConstraintTimeline.ENTRIES=5,TransformConstraintTimeline.PREV_TIME=-5,TransformConstraintTimeline.PREV_ROTATE=-4,TransformConstraintTimeline.PREV_TRANSLATE=-3,TransformConstraintTimeline.PREV_SCALE=-2,TransformConstraintTimeline.PREV_SHEAR=-1,TransformConstraintTimeline.ROTATE=1,TransformConstraintTimeline.TRANSLATE=2,TransformConstraintTimeline.SCALE=3,TransformConstraintTimeline.SHEAR=4,TransformConstraintTimeline}(T);t.TransformConstraintTimeline=U;var z=function(o){function PathConstraintPositionTimeline(r){var a=o.call(this,r)||this;return a.frames=t.Utils.newFloatArray(r*PathConstraintPositionTimeline.ENTRIES),a}return h(PathConstraintPositionTimeline,o),PathConstraintPositionTimeline.prototype.getPropertyId=function(){return(a.pathConstraintPosition<<24)+this.pathConstraintIndex},PathConstraintPositionTimeline.prototype.setFrame=function(t,r,o){t*=PathConstraintPositionTimeline.ENTRIES,this.frames[t]=r,this.frames[t+PathConstraintPositionTimeline.VALUE]=o},PathConstraintPositionTimeline.prototype.apply=function(t,o,a,h,T,S,A){var P=this.frames,O=t.pathConstraints[this.pathConstraintIndex];if(O.active)if(a<P[0])switch(S){case r.setup:return void(O.position=O.data.position);case r.first:O.position+=(O.data.position-O.position)*T}else{var D=0;if(a>=P[P.length-PathConstraintPositionTimeline.ENTRIES])D=P[P.length+PathConstraintPositionTimeline.PREV_VALUE];else{var L=d.binarySearch(P,a,PathConstraintPositionTimeline.ENTRIES);D=P[L+PathConstraintPositionTimeline.PREV_VALUE];var I=P[L],B=this.getCurvePercent(L/PathConstraintPositionTimeline.ENTRIES-1,1-(a-I)/(P[L+PathConstraintPositionTimeline.PREV_TIME]-I));D+=(P[L+PathConstraintPositionTimeline.VALUE]-D)*B}S==r.setup?O.position=O.data.position+(D-O.data.position)*T:O.position+=(D-O.position)*T}},PathConstraintPositionTimeline.ENTRIES=2,PathConstraintPositionTimeline.PREV_TIME=-2,PathConstraintPositionTimeline.PREV_VALUE=-1,PathConstraintPositionTimeline.VALUE=1,PathConstraintPositionTimeline}(T);t.PathConstraintPositionTimeline=z;var V=function(t){function PathConstraintSpacingTimeline(r){return t.call(this,r)||this}return h(PathConstraintSpacingTimeline,t),PathConstraintSpacingTimeline.prototype.getPropertyId=function(){return(a.pathConstraintSpacing<<24)+this.pathConstraintIndex},PathConstraintSpacingTimeline.prototype.apply=function(t,o,a,h,T,S,A){var P=this.frames,O=t.pathConstraints[this.pathConstraintIndex];if(O.active)if(a<P[0])switch(S){case r.setup:return void(O.spacing=O.data.spacing);case r.first:O.spacing+=(O.data.spacing-O.spacing)*T}else{var D=0;if(a>=P[P.length-PathConstraintSpacingTimeline.ENTRIES])D=P[P.length+PathConstraintSpacingTimeline.PREV_VALUE];else{var L=d.binarySearch(P,a,PathConstraintSpacingTimeline.ENTRIES);D=P[L+PathConstraintSpacingTimeline.PREV_VALUE];var I=P[L],B=this.getCurvePercent(L/PathConstraintSpacingTimeline.ENTRIES-1,1-(a-I)/(P[L+PathConstraintSpacingTimeline.PREV_TIME]-I));D+=(P[L+PathConstraintSpacingTimeline.VALUE]-D)*B}S==r.setup?O.spacing=O.data.spacing+(D-O.data.spacing)*T:O.spacing+=(D-O.spacing)*T}},PathConstraintSpacingTimeline}(z);t.PathConstraintSpacingTimeline=V;var W=function(o){function PathConstraintMixTimeline(r){var a=o.call(this,r)||this;return a.frames=t.Utils.newFloatArray(r*PathConstraintMixTimeline.ENTRIES),a}return h(PathConstraintMixTimeline,o),PathConstraintMixTimeline.prototype.getPropertyId=function(){return(a.pathConstraintMix<<24)+this.pathConstraintIndex},PathConstraintMixTimeline.prototype.setFrame=function(t,r,o,a){t*=PathConstraintMixTimeline.ENTRIES,this.frames[t]=r,this.frames[t+PathConstraintMixTimeline.ROTATE]=o,this.frames[t+PathConstraintMixTimeline.TRANSLATE]=a},PathConstraintMixTimeline.prototype.apply=function(t,o,a,h,T,S,A){var P=this.frames,O=t.pathConstraints[this.pathConstraintIndex];if(O.active)if(a<P[0])switch(S){case r.setup:return O.rotateMix=O.data.rotateMix,void(O.translateMix=O.data.translateMix);case r.first:O.rotateMix+=(O.data.rotateMix-O.rotateMix)*T,O.translateMix+=(O.data.translateMix-O.translateMix)*T}else{var D=0,L=0;if(a>=P[P.length-PathConstraintMixTimeline.ENTRIES])D=P[P.length+PathConstraintMixTimeline.PREV_ROTATE],L=P[P.length+PathConstraintMixTimeline.PREV_TRANSLATE];else{var I=d.binarySearch(P,a,PathConstraintMixTimeline.ENTRIES);D=P[I+PathConstraintMixTimeline.PREV_ROTATE],L=P[I+PathConstraintMixTimeline.PREV_TRANSLATE];var B=P[I],N=this.getCurvePercent(I/PathConstraintMixTimeline.ENTRIES-1,1-(a-B)/(P[I+PathConstraintMixTimeline.PREV_TIME]-B));D+=(P[I+PathConstraintMixTimeline.ROTATE]-D)*N,L+=(P[I+PathConstraintMixTimeline.TRANSLATE]-L)*N}S==r.setup?(O.rotateMix=O.data.rotateMix+(D-O.data.rotateMix)*T,O.translateMix=O.data.translateMix+(L-O.data.translateMix)*T):(O.rotateMix+=(D-O.rotateMix)*T,O.translateMix+=(L-O.translateMix)*T)}},PathConstraintMixTimeline.ENTRIES=3,PathConstraintMixTimeline.PREV_TIME=-3,PathConstraintMixTimeline.PREV_ROTATE=-2,PathConstraintMixTimeline.PREV_TRANSLATE=-1,PathConstraintMixTimeline.ROTATE=1,PathConstraintMixTimeline.TRANSLATE=2,PathConstraintMixTimeline}(T);t.PathConstraintMixTimeline=W}(a||(a={})),function(t){var r=function(){function AnimationState(r){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new h(this),this.propertyIDs=new t.IntSet,this.animationsChanged=!1,this.trackEntryPool=new t.Pool((function(){return new o})),this.data=r}return AnimationState.prototype.update=function(t){t*=this.timeScale;for(var r=this.tracks,o=0,a=r.length;o<a;o++){var h=r[o];if(null!=h){h.animationLast=h.nextAnimationLast,h.trackLast=h.nextTrackLast;var d=t*h.timeScale;if(h.delay>0){if(h.delay-=d,h.delay>0)continue;d=-h.delay,h.delay=0}var T=h.next;if(null!=T){var S=h.trackLast-T.delay;if(S>=0){for(T.delay=0,T.trackTime+=0==h.timeScale?0:(S/h.timeScale+t)*T.timeScale,h.trackTime+=d,this.setCurrent(o,T,!0);null!=T.mixingFrom;)T.mixTime+=t,T=T.mixingFrom;continue}}else if(h.trackLast>=h.trackEnd&&null==h.mixingFrom){r[o]=null,this.queue.end(h),this.disposeNext(h);continue}if(null!=h.mixingFrom&&this.updateMixingFrom(h,t)){var A=h.mixingFrom;for(h.mixingFrom=null,null!=A&&(A.mixingTo=null);null!=A;)this.queue.end(A),A=A.mixingFrom}h.trackTime+=d}}this.queue.drain()},AnimationState.prototype.updateMixingFrom=function(t,r){var o=t.mixingFrom;if(null==o)return!0;var a=this.updateMixingFrom(o,r);return o.animationLast=o.nextAnimationLast,o.trackLast=o.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=o.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=o.mixingFrom,null!=o.mixingFrom&&(o.mixingFrom.mixingTo=t),t.interruptAlpha=o.interruptAlpha,this.queue.end(o)),a):(o.trackTime+=r*o.timeScale,t.mixTime+=r,!1)},AnimationState.prototype.apply=function(r){if(null==r)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var o=this.events,a=this.tracks,h=!1,d=0,T=a.length;d<T;d++){var S=a[d];if(!(null==S||S.delay>0)){h=!0;var A=0==d?t.MixBlend.first:S.mixBlend,P=S.alpha;null!=S.mixingFrom?P*=this.applyMixingFrom(S,r,A):S.trackTime>=S.trackEnd&&null==S.next&&(P=0);var O=S.animationLast,D=S.getAnimationTime(),L=S.animation.timelines.length,I=S.animation.timelines;if(0==d&&1==P||A==t.MixBlend.add)for(var B=0;B<L;B++){t.Utils.webkit602BugfixHelper(P,A);var N=I[B];N instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(N,r,D,A,!0):N.apply(r,O,D,o,P,A,t.MixDirection.mixIn)}else{var G=S.timelineMode,Y=0==S.timelinesRotation.length;Y&&t.Utils.setArraySize(S.timelinesRotation,L<<1,null);var X=S.timelinesRotation;for(B=0;B<L;B++){var U=I[B],z=G[B]==AnimationState.SUBSEQUENT?A:t.MixBlend.setup;U instanceof t.RotateTimeline?this.applyRotateTimeline(U,r,D,P,z,X,B<<1,Y):U instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(U,r,D,A,!0):(t.Utils.webkit602BugfixHelper(P,A),U.apply(r,O,D,o,P,z,t.MixDirection.mixIn))}}this.queueEvents(S,D),o.length=0,S.nextAnimationLast=D,S.nextTrackLast=S.trackTime}}for(var V=this.unkeyedState+AnimationState.SETUP,W=r.slots,H=0,q=r.slots.length;H<q;H++){var Z=W[H];if(Z.attachmentState==V){var K=Z.data.attachmentName;Z.attachment=null==K?null:r.getAttachment(Z.data.index,K)}}return this.unkeyedState+=2,this.queue.drain(),h},AnimationState.prototype.applyMixingFrom=function(r,o,a){var h=r.mixingFrom;null!=h.mixingFrom&&this.applyMixingFrom(h,o,a);var d=0;0==r.mixDuration?(d=1,a==t.MixBlend.first&&(a=t.MixBlend.setup)):((d=r.mixTime/r.mixDuration)>1&&(d=1),a!=t.MixBlend.first&&(a=h.mixBlend));var T=d<h.eventThreshold?this.events:null,S=d<h.attachmentThreshold,A=d<h.drawOrderThreshold,P=h.animationLast,O=h.getAnimationTime(),D=h.animation.timelines.length,L=h.animation.timelines,I=h.alpha*r.interruptAlpha,B=I*(1-d);if(a==t.MixBlend.add)for(var N=0;N<D;N++)L[N].apply(o,P,O,T,B,a,t.MixDirection.mixOut);else{var G=h.timelineMode,Y=h.timelineHoldMix,X=0==h.timelinesRotation.length;X&&t.Utils.setArraySize(h.timelinesRotation,D<<1,null);var U=h.timelinesRotation;h.totalAlpha=0;for(N=0;N<D;N++){var z=L[N],V=t.MixDirection.mixOut,W=void 0,H=0;switch(G[N]){case AnimationState.SUBSEQUENT:if(!A&&z instanceof t.DrawOrderTimeline)continue;W=a,H=B;break;case AnimationState.FIRST:W=t.MixBlend.setup,H=B;break;case AnimationState.HOLD_SUBSEQUENT:W=a,H=I;break;case AnimationState.HOLD_FIRST:W=t.MixBlend.setup,H=I;break;default:W=t.MixBlend.setup;var q=Y[N];H=I*Math.max(0,1-q.mixTime/q.mixDuration)}h.totalAlpha+=H,z instanceof t.RotateTimeline?this.applyRotateTimeline(z,o,O,H,W,U,N<<1,X):z instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(z,o,O,W,S):(t.Utils.webkit602BugfixHelper(H,a),A&&z instanceof t.DrawOrderTimeline&&W==t.MixBlend.setup&&(V=t.MixDirection.mixIn),z.apply(o,P,O,T,H,W,V))}}return r.mixDuration>0&&this.queueEvents(h,O),this.events.length=0,h.nextAnimationLast=O,h.nextTrackLast=h.trackTime,d},AnimationState.prototype.applyAttachmentTimeline=function(r,o,a,h,d){var T=o.slots[r.slotIndex];if(T.bone.active){var S,A=r.frames;if(a<A[0])h!=t.MixBlend.setup&&h!=t.MixBlend.first||this.setAttachment(o,T,T.data.attachmentName,d);else S=a>=A[A.length-1]?A.length-1:t.Animation.binarySearch(A,a)-1,this.setAttachment(o,T,r.attachmentNames[S],d);T.attachmentState<=this.unkeyedState&&(T.attachmentState=this.unkeyedState+AnimationState.SETUP)}},AnimationState.prototype.setAttachment=function(t,r,o,a){r.attachment=null==o?null:t.getAttachment(r.data.index,o),a&&(r.attachmentState=this.unkeyedState+AnimationState.CURRENT)},AnimationState.prototype.applyRotateTimeline=function(r,o,a,h,d,T,S,A){if(A&&(T[S]=0),1!=h){var P=r,O=P.frames,D=o.bones[P.boneIndex];if(D.active){var L=0,I=0;if(a<O[0])switch(d){case t.MixBlend.setup:D.rotation=D.data.rotation;default:return;case t.MixBlend.first:L=D.rotation,I=D.data.rotation}else if(L=d==t.MixBlend.setup?D.data.rotation:D.rotation,a>=O[O.length-t.RotateTimeline.ENTRIES])I=D.data.rotation+O[O.length+t.RotateTimeline.PREV_ROTATION];else{var B=t.Animation.binarySearch(O,a,t.RotateTimeline.ENTRIES),N=O[B+t.RotateTimeline.PREV_ROTATION],G=O[B],Y=P.getCurvePercent((B>>1)-1,1-(a-G)/(O[B+t.RotateTimeline.PREV_TIME]-G));I=O[B+t.RotateTimeline.ROTATION]-N,I=N+(I-=360*(16384-(16384.499999999996-I/360|0)))*Y+D.data.rotation,I-=360*(16384-(16384.499999999996-I/360|0))}var X=0,U=I-L;if(0==(U-=360*(16384-(16384.499999999996-U/360|0))))X=T[S];else{var z=0,V=0;A?(z=0,V=U):(z=T[S],V=T[S+1]);var W=U>0,H=z>=0;t.MathUtils.signum(V)!=t.MathUtils.signum(U)&&Math.abs(V)<=90&&(Math.abs(z)>180&&(z+=360*t.MathUtils.signum(z)),H=W),X=U+z-z%360,H!=W&&(X+=360*t.MathUtils.signum(z)),T[S]=X}T[S+1]=U,L+=X*h,D.rotation=L-360*(16384-(16384.499999999996-L/360|0))}}else r.apply(o,0,a,null,1,d,t.MixDirection.mixIn)},AnimationState.prototype.queueEvents=function(t,r){for(var o=t.animationStart,a=t.animationEnd,h=a-o,d=t.trackLast%h,T=this.events,S=0,A=T.length;S<A;S++){var P=T[S];if(P.time<d)break;P.time>a||this.queue.event(t,P)}for((t.loop?0==h||d>t.trackTime%h:r>=a&&t.animationLast<a)&&this.queue.complete(t);S<A;S++){T[S].time<o||this.queue.event(t,T[S])}},AnimationState.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var r=0,o=this.tracks.length;r<o;r++)this.clearTrack(r);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},AnimationState.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var r=this.tracks[t];if(null!=r){this.queue.end(r),this.disposeNext(r);for(var o=r;;){var a=o.mixingFrom;if(null==a)break;this.queue.end(a),o.mixingFrom=null,o.mixingTo=null,o=a}this.tracks[r.trackIndex]=null,this.queue.drain()}}},AnimationState.prototype.setCurrent=function(t,r,o){var a=this.expandToIndex(t);this.tracks[t]=r,null!=a&&(o&&this.queue.interrupt(a),r.mixingFrom=a,a.mixingTo=r,r.mixTime=0,null!=a.mixingFrom&&a.mixDuration>0&&(r.interruptAlpha*=Math.min(1,a.mixTime/a.mixDuration)),a.timelinesRotation.length=0),this.queue.start(r)},AnimationState.prototype.setAnimation=function(t,r,o){var a=this.data.skeletonData.findAnimation(r);if(null==a)throw new Error("Animation not found: "+r);return this.setAnimationWith(t,a,o)},AnimationState.prototype.setAnimationWith=function(t,r,o){if(null==r)throw new Error("animation cannot be null.");var a=!0,h=this.expandToIndex(t);null!=h&&(-1==h.nextTrackLast?(this.tracks[t]=h.mixingFrom,this.queue.interrupt(h),this.queue.end(h),this.disposeNext(h),h=h.mixingFrom,a=!1):this.disposeNext(h));var d=this.trackEntry(t,r,o,h);return this.setCurrent(t,d,a),this.queue.drain(),d},AnimationState.prototype.addAnimation=function(t,r,o,a){var h=this.data.skeletonData.findAnimation(r);if(null==h)throw new Error("Animation not found: "+r);return this.addAnimationWith(t,h,o,a)},AnimationState.prototype.addAnimationWith=function(t,r,o,a){if(null==r)throw new Error("animation cannot be null.");var h=this.expandToIndex(t);if(null!=h)for(;null!=h.next;)h=h.next;var d=this.trackEntry(t,r,o,h);if(null==h)this.setCurrent(t,d,!0),this.queue.drain();else if(h.next=d,a<=0){var T=h.animationEnd-h.animationStart;0!=T?(h.loop?a+=T*(1+(h.trackTime/T|0)):a+=Math.max(T,h.trackTime),a-=this.data.getMix(h.animation,r)):a=h.trackTime}return d.delay=a,d},AnimationState.prototype.setEmptyAnimation=function(t,r){var o=this.setAnimationWith(t,AnimationState.emptyAnimation,!1);return o.mixDuration=r,o.trackEnd=r,o},AnimationState.prototype.addEmptyAnimation=function(t,r,o){o<=0&&(o-=r);var a=this.addAnimationWith(t,AnimationState.emptyAnimation,!1,o);return a.mixDuration=r,a.trackEnd=r,a},AnimationState.prototype.setEmptyAnimations=function(t){var r=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var o=0,a=this.tracks.length;o<a;o++){var h=this.tracks[o];null!=h&&this.setEmptyAnimation(h.trackIndex,t)}this.queue.drainDisabled=r,this.queue.drain()},AnimationState.prototype.expandToIndex=function(r){return r<this.tracks.length?this.tracks[r]:(t.Utils.ensureArrayCapacity(this.tracks,r+1,null),this.tracks.length=r+1,null)},AnimationState.prototype.trackEntry=function(r,o,a,h){var d=this.trackEntryPool.obtain();return d.trackIndex=r,d.animation=o,d.loop=a,d.holdPrevious=!1,d.eventThreshold=0,d.attachmentThreshold=0,d.drawOrderThreshold=0,d.animationStart=0,d.animationEnd=o.duration,d.animationLast=-1,d.nextAnimationLast=-1,d.delay=0,d.trackTime=0,d.trackLast=-1,d.nextTrackLast=-1,d.trackEnd=Number.MAX_VALUE,d.timeScale=1,d.alpha=1,d.interruptAlpha=1,d.mixTime=0,d.mixDuration=null==h?0:this.data.getMix(h.animation,o),d.mixBlend=t.MixBlend.replace,d},AnimationState.prototype.disposeNext=function(t){for(var r=t.next;null!=r;)this.queue.dispose(r),r=r.next;t.next=null},AnimationState.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var r=0,o=this.tracks.length;r<o;r++){var a=this.tracks[r];if(null!=a){for(;null!=a.mixingFrom;)a=a.mixingFrom;do{null!=a.mixingFrom&&a.mixBlend==t.MixBlend.add||this.computeHold(a),a=a.mixingTo}while(null!=a)}}},AnimationState.prototype.computeHold=function(r){var o=r.mixingTo,a=r.animation.timelines,h=r.animation.timelines.length,d=t.Utils.setArraySize(r.timelineMode,h);r.timelineHoldMix.length=0;var T=t.Utils.setArraySize(r.timelineHoldMix,h),S=this.propertyIDs;if(null!=o&&o.holdPrevious)for(var A=0;A<h;A++)d[A]=S.add(a[A].getPropertyId())?AnimationState.HOLD_FIRST:AnimationState.HOLD_SUBSEQUENT;else t:for(A=0;A<h;A++){var P=a[A],O=P.getPropertyId();if(S.add(O))if(null==o||P instanceof t.AttachmentTimeline||P instanceof t.DrawOrderTimeline||P instanceof t.EventTimeline||!o.animation.hasTimeline(O))d[A]=AnimationState.FIRST;else{for(var D=o.mixingTo;null!=D;D=D.mixingTo)if(!D.animation.hasTimeline(O)){if(r.mixDuration>0){d[A]=AnimationState.HOLD_MIX,T[A]=D;continue t}break}d[A]=AnimationState.HOLD_FIRST}else d[A]=AnimationState.SUBSEQUENT}},AnimationState.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},AnimationState.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},AnimationState.prototype.removeListener=function(t){var r=this.listeners.indexOf(t);r>=0&&this.listeners.splice(r,1)},AnimationState.prototype.clearListeners=function(){this.listeners.length=0},AnimationState.prototype.clearListenerNotifications=function(){this.queue.clear()},AnimationState.emptyAnimation=new t.Animation("<empty>",[],0),AnimationState.SUBSEQUENT=0,AnimationState.FIRST=1,AnimationState.HOLD_SUBSEQUENT=2,AnimationState.HOLD_FIRST=3,AnimationState.HOLD_MIX=4,AnimationState.SETUP=1,AnimationState.CURRENT=2,AnimationState}();t.AnimationState=r;var o=function(){function TrackEntry(){this.mixBlend=t.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return TrackEntry.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},TrackEntry.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},TrackEntry.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},TrackEntry.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},TrackEntry.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},TrackEntry}();t.TrackEntry=o;var a,h=function(){function EventQueue(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return EventQueue.prototype.start=function(t){this.objects.push(a.start),this.objects.push(t),this.animState.animationsChanged=!0},EventQueue.prototype.interrupt=function(t){this.objects.push(a.interrupt),this.objects.push(t)},EventQueue.prototype.end=function(t){this.objects.push(a.end),this.objects.push(t),this.animState.animationsChanged=!0},EventQueue.prototype.dispose=function(t){this.objects.push(a.dispose),this.objects.push(t)},EventQueue.prototype.complete=function(t){this.objects.push(a.complete),this.objects.push(t)},EventQueue.prototype.event=function(t,r){this.objects.push(a.event),this.objects.push(t),this.objects.push(r)},EventQueue.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,r=this.animState.listeners,o=0;o<t.length;o+=2){var h=t[o],d=t[o+1];switch(h){case a.start:null!=d.listener&&d.listener.start&&d.listener.start(d);for(var T=0;T<r.length;T++)r[T].start&&r[T].start(d);break;case a.interrupt:null!=d.listener&&d.listener.interrupt&&d.listener.interrupt(d);for(T=0;T<r.length;T++)r[T].interrupt&&r[T].interrupt(d);break;case a.end:null!=d.listener&&d.listener.end&&d.listener.end(d);for(T=0;T<r.length;T++)r[T].end&&r[T].end(d);case a.dispose:null!=d.listener&&d.listener.dispose&&d.listener.dispose(d);for(T=0;T<r.length;T++)r[T].dispose&&r[T].dispose(d);this.animState.trackEntryPool.free(d);break;case a.complete:null!=d.listener&&d.listener.complete&&d.listener.complete(d);for(T=0;T<r.length;T++)r[T].complete&&r[T].complete(d);break;case a.event:var S=t[2+o++];null!=d.listener&&d.listener.event&&d.listener.event(d,S);for(T=0;T<r.length;T++)r[T].event&&r[T].event(d,S)}}this.clear(),this.drainDisabled=!1}},EventQueue.prototype.clear=function(){this.objects.length=0},EventQueue}();t.EventQueue=h,function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(a=t.EventType||(t.EventType={}));var d=function(){function AnimationStateAdapter(){}return AnimationStateAdapter.prototype.start=function(t){},AnimationStateAdapter.prototype.interrupt=function(t){},AnimationStateAdapter.prototype.end=function(t){},AnimationStateAdapter.prototype.dispose=function(t){},AnimationStateAdapter.prototype.complete=function(t){},AnimationStateAdapter.prototype.event=function(t,r){},AnimationStateAdapter}();t.AnimationStateAdapter=d}(a||(a={})),function(t){var r=function(){function AnimationStateData(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return AnimationStateData.prototype.setMix=function(t,r,o){var a=this.skeletonData.findAnimation(t);if(null==a)throw new Error("Animation not found: "+t);var h=this.skeletonData.findAnimation(r);if(null==h)throw new Error("Animation not found: "+r);this.setMixWith(a,h,o)},AnimationStateData.prototype.setMixWith=function(t,r,o){if(null==t)throw new Error("from cannot be null.");if(null==r)throw new Error("to cannot be null.");var a=t.name+"."+r.name;this.animationToMixTime[a]=o},AnimationStateData.prototype.getMix=function(t,r){var o=t.name+"."+r.name,a=this.animationToMixTime[o];return void 0===a?this.defaultMix:a},AnimationStateData}();t.AnimationStateData=r}(a||(a={})),function(t){var r=function(){function AssetManager(t,r){void 0===r&&(r=""),this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.rawDataUris={},this.textureLoader=t,this.pathPrefix=r}return AssetManager.prototype.downloadText=function(t,r,o){var a=new XMLHttpRequest;a.overrideMimeType("text/html"),this.rawDataUris[t]&&(t=this.rawDataUris[t]),a.open("GET",t,!0),a.onload=function(){200==a.status?r(a.responseText):o(a.status,a.responseText)},a.onerror=function(){o(a.status,a.responseText)},a.send()},AssetManager.prototype.downloadBinary=function(t,r,o){var a=new XMLHttpRequest;this.rawDataUris[t]&&(t=this.rawDataUris[t]),a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){200==a.status?r(new Uint8Array(a.response)):o(a.status,a.responseText)},a.onerror=function(){o(a.status,a.responseText)},a.send()},AssetManager.prototype.setRawDataURI=function(t,r){this.rawDataUris[this.pathPrefix+t]=r},AssetManager.prototype.loadBinary=function(t,r,o){var a=this;void 0===r&&(r=null),void 0===o&&(o=null),t=this.pathPrefix+t,this.toLoad++,this.downloadBinary(t,(function(o){a.assets[t]=o,r&&r(t,o),a.toLoad--,a.loaded++}),(function(r,h){a.errors[t]="Couldn't load binary "+t+": status "+status+", "+h,o&&o(t,"Couldn't load binary "+t+": status "+status+", "+h),a.toLoad--,a.loaded++}))},AssetManager.prototype.loadText=function(t,r,o){var a=this;void 0===r&&(r=null),void 0===o&&(o=null),t=this.pathPrefix+t,this.toLoad++,this.downloadText(t,(function(o){a.assets[t]=o,r&&r(t,o),a.toLoad--,a.loaded++}),(function(r,h){a.errors[t]="Couldn't load text "+t+": status "+status+", "+h,o&&o(t,"Couldn't load text "+t+": status "+status+", "+h),a.toLoad--,a.loaded++}))},AssetManager.prototype.loadTexture=function(t,r,o){var a=this;void 0===r&&(r=null),void 0===o&&(o=null);var h=t=this.pathPrefix+t;this.toLoad++;var d=new Image;d.crossOrigin="anonymous",d.onload=function(o){var T=a.textureLoader(d);a.assets[h]=T,a.toLoad--,a.loaded++,r&&r(t,d)},d.onerror=function(r){a.errors[t]="Couldn't load image "+t,a.toLoad--,a.loaded++,o&&o(t,"Couldn't load image "+t)},this.rawDataUris[t]&&(t=this.rawDataUris[t]),d.src=t},AssetManager.prototype.loadTextureAtlas=function(r,o,a){var h=this;void 0===o&&(o=null),void 0===a&&(a=null);var d=r.lastIndexOf("/")>=0?r.substring(0,r.lastIndexOf("/")):"";r=this.pathPrefix+r,this.toLoad++,this.downloadText(r,(function(T){var S={count:0},A=new Array;try{new t.TextureAtlas(T,(function(r){A.push(""==d?r:d+"/"+r);var o=document.createElement("img");return o.width=16,o.height=16,new t.FakeTexture(o)}))}catch(I){var P=I;return h.errors[r]="Couldn't load texture atlas "+r+": "+P.message,a&&a(r,"Couldn't load texture atlas "+r+": "+P.message),h.toLoad--,void h.loaded++}for(var O=function _loop_1(P){var O=!1;h.loadTexture(P,(function(P,D){if(S.count++,S.count==A.length)if(O)h.errors[r]="Couldn't load texture atlas page "+P+"} of atlas "+r,a&&a(r,"Couldn't load texture atlas page "+P+" of atlas "+r),h.toLoad--,h.loaded++;else try{var L=new t.TextureAtlas(T,(function(t){return h.get(""==d?t:d+"/"+t)}));h.assets[r]=L,o&&o(r,L),h.toLoad--,h.loaded++}catch(I){var B=I;h.errors[r]="Couldn't load texture atlas "+r+": "+B.message,a&&a(r,"Couldn't load texture atlas "+r+": "+B.message),h.toLoad--,h.loaded++}}),(function(t,o){O=!0,S.count++,S.count==A.length&&(h.errors[r]="Couldn't load texture atlas page "+t+"} of atlas "+r,a&&a(r,"Couldn't load texture atlas page "+t+" of atlas "+r),h.toLoad--,h.loaded++)}))},D=0,L=A;D<L.length;D++){O(L[D])}}),(function(t,o){h.errors[r]="Couldn't load texture atlas "+r+": status "+status+", "+o,a&&a(r,"Couldn't load texture atlas "+r+": status "+status+", "+o),h.toLoad--,h.loaded++}))},AssetManager.prototype.get=function(t){return t=this.pathPrefix+t,this.assets[t]},AssetManager.prototype.remove=function(t){t=this.pathPrefix+t;var r=this.assets[t];r.dispose&&r.dispose(),this.assets[t]=null},AssetManager.prototype.removeAll=function(){for(var t in this.assets){var r=this.assets[t];r.dispose&&r.dispose()}this.assets={}},AssetManager.prototype.isLoadingComplete=function(){return 0==this.toLoad},AssetManager.prototype.getToLoad=function(){return this.toLoad},AssetManager.prototype.getLoaded=function(){return this.loaded},AssetManager.prototype.dispose=function(){this.removeAll()},AssetManager.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},AssetManager.prototype.getErrors=function(){return this.errors},AssetManager}();t.AssetManager=r}(a||(a={})),function(t){var r=function(){function AtlasAttachmentLoader(t){this.atlas=t}return AtlasAttachmentLoader.prototype.newRegionAttachment=function(r,o,a){var h=this.atlas.findRegion(a);if(null==h)throw new Error("Region not found in atlas: "+a+" (region attachment: "+o+")");h.renderObject=h;var d=new t.RegionAttachment(o);return d.setRegion(h),d},AtlasAttachmentLoader.prototype.newMeshAttachment=function(r,o,a){var h=this.atlas.findRegion(a);if(null==h)throw new Error("Region not found in atlas: "+a+" (mesh attachment: "+o+")");h.renderObject=h;var d=new t.MeshAttachment(o);return d.region=h,d},AtlasAttachmentLoader.prototype.newBoundingBoxAttachment=function(r,o){return new t.BoundingBoxAttachment(o)},AtlasAttachmentLoader.prototype.newPathAttachment=function(r,o){return new t.PathAttachment(o)},AtlasAttachmentLoader.prototype.newPointAttachment=function(r,o){return new t.PointAttachment(o)},AtlasAttachmentLoader.prototype.newClippingAttachment=function(r,o){return new t.ClippingAttachment(o)},AtlasAttachmentLoader}();t.AtlasAttachmentLoader=r}(a||(a={})),function(t){var r;(r=t.BlendMode||(t.BlendMode={}))[r.Normal=0]="Normal",r[r.Additive=1]="Additive",r[r.Multiply=2]="Multiply",r[r.Screen=3]="Screen"}(a||(a={})),function(t){var r=function(){function Bone(t,r,o){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==r)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=r,this.parent=o,this.setToSetupPose()}return Bone.prototype.isActive=function(){return this.active},Bone.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},Bone.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},Bone.prototype.updateWorldTransformWith=function(r,o,a,h,d,T,S){this.ax=r,this.ay=o,this.arotation=a,this.ascaleX=h,this.ascaleY=d,this.ashearX=T,this.ashearY=S,this.appliedValid=!0;var A=this.parent;if(null==A){var P=this.skeleton,O=a+90+S,D=P.scaleX,L=P.scaleY;return this.a=t.MathUtils.cosDeg(a+T)*h*D,this.b=t.MathUtils.cosDeg(O)*d*D,this.c=t.MathUtils.sinDeg(a+T)*h*L,this.d=t.MathUtils.sinDeg(O)*d*L,this.worldX=r*D+P.x,void(this.worldY=o*L+P.y)}var I=A.a,B=A.b,N=A.c,G=A.d;switch(this.worldX=I*r+B*o+A.worldX,this.worldY=N*r+G*o+A.worldY,this.data.transformMode){case t.TransformMode.Normal:O=a+90+S;var Y=t.MathUtils.cosDeg(a+T)*h,X=t.MathUtils.cosDeg(O)*d,U=t.MathUtils.sinDeg(a+T)*h,z=t.MathUtils.sinDeg(O)*d;return this.a=I*Y+B*U,this.b=I*X+B*z,this.c=N*Y+G*U,void(this.d=N*X+G*z);case t.TransformMode.OnlyTranslation:O=a+90+S;this.a=t.MathUtils.cosDeg(a+T)*h,this.b=t.MathUtils.cosDeg(O)*d,this.c=t.MathUtils.sinDeg(a+T)*h,this.d=t.MathUtils.sinDeg(O)*d;break;case t.TransformMode.NoRotationOrReflection:var V=0;(q=I*I+N*N)>1e-4?(q=Math.abs(I*G-B*N)/q,I/=this.skeleton.scaleX,B=(N/=this.skeleton.scaleY)*q,G=I*q,V=Math.atan2(N,I)*t.MathUtils.radDeg):(I=0,N=0,V=90-Math.atan2(G,B)*t.MathUtils.radDeg);var W=a+T-V,H=a+S-V+90;Y=t.MathUtils.cosDeg(W)*h,X=t.MathUtils.cosDeg(H)*d,U=t.MathUtils.sinDeg(W)*h,z=t.MathUtils.sinDeg(H)*d;this.a=I*Y-B*U,this.b=I*X-B*z,this.c=N*Y+G*U,this.d=N*X+G*z;break;case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:var q,Z=t.MathUtils.cosDeg(a),K=t.MathUtils.sinDeg(a),J=(I*Z+B*K)/this.skeleton.scaleX,Q=(N*Z+G*K)/this.skeleton.scaleY;(q=Math.sqrt(J*J+Q*Q))>1e-5&&(q=1/q),J*=q,Q*=q,q=Math.sqrt(J*J+Q*Q),this.data.transformMode==t.TransformMode.NoScale&&I*G-B*N<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(q=-q);var $=Math.PI/2+Math.atan2(Q,J),tt=Math.cos($)*q,et=Math.sin($)*q;Y=t.MathUtils.cosDeg(T)*h,X=t.MathUtils.cosDeg(90+S)*d,U=t.MathUtils.sinDeg(T)*h,z=t.MathUtils.sinDeg(90+S)*d;this.a=J*Y+tt*U,this.b=J*X+tt*z,this.c=Q*Y+et*U,this.d=Q*X+et*z}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY},Bone.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},Bone.prototype.getWorldRotationX=function(){return Math.atan2(this.c,this.a)*t.MathUtils.radDeg},Bone.prototype.getWorldRotationY=function(){return Math.atan2(this.d,this.b)*t.MathUtils.radDeg},Bone.prototype.getWorldScaleX=function(){return Math.sqrt(this.a*this.a+this.c*this.c)},Bone.prototype.getWorldScaleY=function(){return Math.sqrt(this.b*this.b+this.d*this.d)},Bone.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var r=this.parent;if(null==r)return this.ax=this.worldX,this.ay=this.worldY,this.arotation=Math.atan2(this.c,this.a)*t.MathUtils.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*t.MathUtils.radDeg);var o=r.a,a=r.b,h=r.c,d=r.d,T=1/(o*d-a*h),S=this.worldX-r.worldX,A=this.worldY-r.worldY;this.ax=S*d*T-A*a*T,this.ay=A*o*T-S*h*T;var P=T*d,O=T*o,D=T*a,L=T*h,I=P*this.a-D*this.c,B=P*this.b-D*this.d,N=O*this.c-L*this.a,G=O*this.d-L*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(I*I+N*N),this.ascaleX>1e-4){var Y=I*G-B*N;this.ascaleY=Y/this.ascaleX,this.ashearY=Math.atan2(I*B+N*G,Y)*t.MathUtils.radDeg,this.arotation=Math.atan2(N,I)*t.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(B*B+G*G),this.ashearY=0,this.arotation=90-Math.atan2(G,B)*t.MathUtils.radDeg},Bone.prototype.worldToLocal=function(t){var r=this.a,o=this.b,a=this.c,h=this.d,d=1/(r*h-o*a),T=t.x-this.worldX,S=t.y-this.worldY;return t.x=T*h*d-S*o*d,t.y=S*r*d-T*a*d,t},Bone.prototype.localToWorld=function(t){var r=t.x,o=t.y;return t.x=r*this.a+o*this.b+this.worldX,t.y=r*this.c+o*this.d+this.worldY,t},Bone.prototype.worldToLocalRotation=function(r){var o=t.MathUtils.sinDeg(r),a=t.MathUtils.cosDeg(r);return Math.atan2(this.a*o-this.c*a,this.d*a-this.b*o)*t.MathUtils.radDeg+this.rotation-this.shearX},Bone.prototype.localToWorldRotation=function(r){r-=this.rotation-this.shearX;var o=t.MathUtils.sinDeg(r),a=t.MathUtils.cosDeg(r);return Math.atan2(a*this.c+o*this.d,a*this.a+o*this.b)*t.MathUtils.radDeg},Bone.prototype.rotateWorld=function(r){var o=this.a,a=this.b,h=this.c,d=this.d,T=t.MathUtils.cosDeg(r),S=t.MathUtils.sinDeg(r);this.a=T*o-S*h,this.b=T*a-S*d,this.c=S*o+T*h,this.d=S*a+T*d,this.appliedValid=!1},Bone}();t.Bone=r}(a||(a={})),function(t){var r,o=function o(a,h,d){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=r.Normal,this.skinRequired=!1,this.color=new t.Color,a<0)throw new Error("index must be >= 0.");if(null==h)throw new Error("name cannot be null.");this.index=a,this.name=h,this.parent=d};t.BoneData=o,function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(r=t.TransformMode||(t.TransformMode={}))}(a||(a={})),function(t){var r=function r(t,o,a){this.name=t,this.order=o,this.skinRequired=a};t.ConstraintData=r}(a||(a={})),function(t){var r=function r(t,o){if(null==o)throw new Error("data cannot be null.");this.time=t,this.data=o};t.Event=r}(a||(a={})),function(t){var r=function r(t){this.name=t};t.EventData=r}(a||(a={})),function(t){var r=function(){function IkConstraint(t,r){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==r)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var o=0;o<t.bones.length;o++)this.bones.push(r.findBone(t.bones[o].name));this.target=r.findBone(t.target.name)}return IkConstraint.prototype.isActive=function(){return this.active},IkConstraint.prototype.apply=function(){this.update()},IkConstraint.prototype.update=function(){var t=this.target,r=this.bones;switch(r.length){case 1:this.apply1(r[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(r[0],r[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}},IkConstraint.prototype.apply1=function(r,o,a,h,d,T,S){r.appliedValid||r.updateAppliedTransform();var A=r.parent,P=A.a,O=A.b,D=A.c,L=A.d,I=-r.ashearX-r.arotation,B=0,N=0;switch(r.data.transformMode){case t.TransformMode.OnlyTranslation:B=o-r.worldX,N=a-r.worldY;break;case t.TransformMode.NoRotationOrReflection:var G=Math.abs(P*L-O*D)/(P*P+D*D),Y=P/r.skeleton.scaleX,X=D/r.skeleton.scaleY;O=-X*G*r.skeleton.scaleX,L=Y*G*r.skeleton.scaleY,I+=Math.atan2(X,Y)*t.MathUtils.radDeg;default:var U=o-A.worldX,z=a-A.worldY,V=P*L-O*D;B=(U*L-z*O)/V-r.ax,N=(z*P-U*D)/V-r.ay}I+=Math.atan2(N,B)*t.MathUtils.radDeg,r.ascaleX<0&&(I+=180),I>180?I-=360:I<-180&&(I+=360);var W=r.ascaleX,H=r.ascaleY;if(h||d){switch(r.data.transformMode){case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:B=o-r.worldX,N=a-r.worldY}var q=r.data.length*W,Z=Math.sqrt(B*B+N*N);if(h&&Z<q||d&&Z>q&&q>1e-4)W*=G=(Z/q-1)*S+1,T&&(H*=G)}r.updateWorldTransformWith(r.ax,r.ay,r.arotation+I*S,W,H,r.ashearX,r.ashearY)},IkConstraint.prototype.apply2=function(r,o,a,h,d,T,S,A){if(0!=A){r.appliedValid||r.updateAppliedTransform(),o.appliedValid||o.updateAppliedTransform();var P=r.ax,O=r.ay,D=r.ascaleX,L=D,I=r.ascaleY,B=o.ascaleX,N=0,G=0,Y=0;D<0?(D=-D,N=180,Y=-1):(N=0,Y=1),I<0&&(I=-I,Y=-Y),B<0?(B=-B,G=180):G=0;var X=o.ax,U=0,z=0,V=0,W=r.a,H=r.b,q=r.c,Z=r.d,K=Math.abs(D-I)<=1e-4;K?(z=W*X+H*(U=o.ay)+r.worldX,V=q*X+Z*U+r.worldY):(U=0,z=W*X+r.worldX,V=q*X+r.worldY);var J=r.parent;W=J.a,H=J.b,q=J.c;var Q,$,tt=1/(W*(Z=J.d)-H*q),et=z-J.worldX,it=V-J.worldY,nt=(et*Z-it*H)*tt-P,rt=(it*W-et*q)*tt-O,st=Math.sqrt(nt*nt+rt*rt),ot=o.data.length*B;if(st<1e-4)return this.apply1(r,a,h,!1,T,!1,A),void o.updateWorldTransformWith(X,U,0,o.ascaleX,o.ascaleY,o.ashearX,o.ashearY);var at=((et=a-J.worldX)*Z-(it=h-J.worldY)*H)*tt-P,ht=(it*W-et*q)*tt-O,lt=at*at+ht*ht;if(0!=S){S*=D*(B+1)/2;var ut=Math.sqrt(lt),ct=ut-st-ot*D+S;if(ct>0){var dt=Math.min(1,ct/(2*S))-1;lt=(at-=(dt=(ct-S*(1-dt*dt))/ut)*at)*at+(ht-=dt*ht)*ht}}t:if(K){var ft=(lt-st*st-(ot*=D)*ot)/(2*st*ot);ft<-1?ft=-1:ft>1&&(ft=1,T&&(L*=(Math.sqrt(lt)/(st+ot)-1)*A+1)),$=Math.acos(ft)*d,W=st+ot*ft,H=ot*Math.sin($),Q=Math.atan2(ht*W-at*H,at*W+ht*H)}else{var pt=(W=D*ot)*W,gt=(H=I*ot)*H,vt=Math.atan2(ht,at),mt=-2*gt*st,yt=gt-pt;if((Z=mt*mt-4*yt*(q=gt*st*st+pt*lt-pt*gt))>=0){var xt=Math.sqrt(Z);mt<0&&(xt=-xt);var Tt=(xt=-(mt+xt)/2)/yt,bt=q/xt,wt=Math.abs(Tt)<Math.abs(bt)?Tt:bt;if(wt*wt<=lt){it=Math.sqrt(lt-wt*wt)*d,Q=vt-Math.atan2(it,wt),$=Math.atan2(it/I,(wt-st)/D);break t}}var St=t.MathUtils.PI,Ct=st-W,Et=Ct*Ct,Mt=0,_t=0,Pt=st+W,Rt=Pt*Pt,kt=0;(q=-W*st/(pt-gt))>=-1&&q<=1&&(q=Math.acos(q),(Z=(et=W*Math.cos(q)+st)*et+(it=H*Math.sin(q))*it)<Et&&(St=q,Et=Z,Ct=et,Mt=it),Z>Rt&&(_t=q,Rt=Z,Pt=et,kt=it)),lt<=(Et+Rt)/2?(Q=vt-Math.atan2(Mt*d,Ct),$=St*d):(Q=vt-Math.atan2(kt*d,Pt),$=_t*d)}var Ot=Math.atan2(U,X)*Y,Dt=r.arotation;(Q=(Q-Ot)*t.MathUtils.radDeg+N-Dt)>180?Q-=360:Q<-180&&(Q+=360),r.updateWorldTransformWith(P,O,Dt+Q*A,L,r.ascaleY,0,0),Dt=o.arotation,($=(($+Ot)*t.MathUtils.radDeg-o.ashearX)*Y+G-Dt)>180?$-=360:$<-180&&($+=360),o.updateWorldTransformWith(X,U,Dt+$*A,o.ascaleX,o.ascaleY,o.ashearX,o.ashearY)}else o.updateWorldTransform()},IkConstraint}();t.IkConstraint=r}(a||(a={})),function(t){var r=function(t){function IkConstraintData(r){var o=t.call(this,r,0,!1)||this;return o.bones=new Array,o.bendDirection=1,o.compress=!1,o.stretch=!1,o.uniform=!1,o.mix=1,o.softness=0,o}return h(IkConstraintData,t),IkConstraintData}(t.ConstraintData);t.IkConstraintData=r}(a||(a={})),function(t){var r=function(){function PathConstraint(t,r){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==r)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var o=0,a=t.bones.length;o<a;o++)this.bones.push(r.findBone(t.bones[o].name));this.target=r.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return PathConstraint.prototype.isActive=function(){return this.active},PathConstraint.prototype.apply=function(){this.update()},PathConstraint.prototype.update=function(){var r=this.target.getAttachment();if(r instanceof t.PathAttachment){var o=this.rotateMix,a=this.translateMix,h=o>0;if(a>0||h){var d=this.data,T=d.spacingMode==t.SpacingMode.Percent,S=d.rotateMode,A=S==t.RotateMode.Tangent,P=S==t.RotateMode.ChainScale,O=this.bones.length,D=A?O:O+1,L=this.bones,I=t.Utils.setArraySize(this.spaces,D),B=null,N=this.spacing;if(P||!T){P&&(B=t.Utils.setArraySize(this.lengths,O));for(var G=d.spacingMode==t.SpacingMode.Length,Y=0,X=D-1;Y<X;){var U=(tt=L[Y]).data.length;if(U<PathConstraint.epsilon)P&&(B[Y]=0),I[++Y]=0;else if(T){if(P){var z=U*tt.a,V=U*tt.c,W=Math.sqrt(z*z+V*V);B[Y]=W}I[++Y]=N}else{z=U*tt.a,V=U*tt.c;var H=Math.sqrt(z*z+V*V);P&&(B[Y]=H),I[++Y]=(G?U+N:N)*H/U}}}else for(Y=1;Y<D;Y++)I[Y]=N;var q=this.computeWorldPositions(r,D,A,d.positionMode==t.PositionMode.Percent,T),Z=q[0],K=q[1],J=d.offsetRotation,Q=!1;if(0==J)Q=S==t.RotateMode.Chain;else Q=!1,J*=($=this.target.bone).a*$.d-$.b*$.c>0?t.MathUtils.degRad:-t.MathUtils.degRad;Y=0;for(var $=3;Y<O;Y++,$+=3){var tt;(tt=L[Y]).worldX+=(Z-tt.worldX)*a,tt.worldY+=(K-tt.worldY)*a;var et=(z=q[$])-Z,it=(V=q[$+1])-K;if(P){var nt=B[Y];if(0!=nt){var rt=(Math.sqrt(et*et+it*it)/nt-1)*o+1;tt.a*=rt,tt.c*=rt}}if(Z=z,K=V,h){var st=tt.a,ot=tt.b,at=tt.c,ht=tt.d,lt=0,ut=0,ct=0;if(lt=A?q[$-1]:0==I[Y+1]?q[$+2]:Math.atan2(it,et),lt-=Math.atan2(at,st),Q){ut=Math.cos(lt),ct=Math.sin(lt);var dt=tt.data.length;Z+=(dt*(ut*st-ct*at)-et)*o,K+=(dt*(ct*st+ut*at)-it)*o}else lt+=J;lt>t.MathUtils.PI?lt-=t.MathUtils.PI2:lt<-t.MathUtils.PI&&(lt+=t.MathUtils.PI2),lt*=o,ut=Math.cos(lt),ct=Math.sin(lt),tt.a=ut*st-ct*at,tt.b=ut*ot-ct*ht,tt.c=ct*st+ut*at,tt.d=ct*ot+ut*ht}tt.appliedValid=!1}}}},PathConstraint.prototype.computeWorldPositions=function(r,o,a,h,d){var T=this.target,S=this.position,A=this.spaces,P=t.Utils.setArraySize(this.positions,3*o+2),O=null,D=r.closed,L=r.worldVerticesLength,I=L/6,B=PathConstraint.NONE;if(!r.constantSpeed){var N=r.lengths,G=N[I-=D?1:2];if(h&&(S*=G),d)for(var Y=1;Y<o;Y++)A[Y]*=G;O=t.Utils.setArraySize(this.world,8);Y=0;for(var X=0,U=0;Y<o;Y++,X+=3){var z=S+=pt=A[Y];if(D)(z%=G)<0&&(z+=G),U=0;else{if(z<0){B!=PathConstraint.BEFORE&&(B=PathConstraint.BEFORE,r.computeWorldVertices(T,2,4,O,0,2)),this.addBeforePosition(z,O,0,P,X);continue}if(z>G){B!=PathConstraint.AFTER&&(B=PathConstraint.AFTER,r.computeWorldVertices(T,L-6,4,O,0,2)),this.addAfterPosition(z-G,O,0,P,X);continue}}for(;;U++){var V=N[U];if(!(z>V)){if(0==U)z/=V;else z=(z-(yt=N[U-1]))/(V-yt);break}}U!=B&&(B=U,D&&U==I?(r.computeWorldVertices(T,L-4,4,O,0,2),r.computeWorldVertices(T,0,4,O,4,2)):r.computeWorldVertices(T,6*U+2,8,O,0,2)),this.addCurvePosition(z,O[0],O[1],O[2],O[3],O[4],O[5],O[6],O[7],P,X,a||Y>0&&0==pt)}return P}D?(L+=2,O=t.Utils.setArraySize(this.world,L),r.computeWorldVertices(T,2,L-4,O,0,2),r.computeWorldVertices(T,0,2,O,L-4,2),O[L-2]=O[0],O[L-1]=O[1]):(I--,L-=4,O=t.Utils.setArraySize(this.world,L),r.computeWorldVertices(T,2,L,O,0,2));for(var W=t.Utils.setArraySize(this.curves,I),H=0,q=O[0],Z=O[1],K=0,J=0,Q=0,$=0,tt=0,et=0,it=0,nt=0,rt=0,st=0,ot=0,at=0,ht=0,lt=0,ut=(Y=0,2);Y<I;Y++,ut+=6)K=O[ut],J=O[ut+1],Q=O[ut+2],$=O[ut+3],ot=2*(it=.1875*(q-2*K+Q))+(rt=.09375*(3*(K-Q)-q+(tt=O[ut+4]))),at=2*(nt=.1875*(Z-2*J+$))+(st=.09375*(3*(J-$)-Z+(et=O[ut+5]))),ht=.75*(K-q)+it+.16666667*rt,lt=.75*(J-Z)+nt+.16666667*st,H+=Math.sqrt(ht*ht+lt*lt),ht+=ot,lt+=at,ot+=rt,at+=st,H+=Math.sqrt(ht*ht+lt*lt),ht+=ot,lt+=at,H+=Math.sqrt(ht*ht+lt*lt),ht+=ot+rt,lt+=at+st,H+=Math.sqrt(ht*ht+lt*lt),W[Y]=H,q=tt,Z=et;if(S*=h?H:H/r.lengths[I-1],d)for(Y=1;Y<o;Y++)A[Y]*=H;for(var ct=this.segments,dt=0,ft=(Y=0,X=0,U=0,0);Y<o;Y++,X+=3){var pt;z=S+=pt=A[Y];if(D)(z%=H)<0&&(z+=H),U=0;else{if(z<0){this.addBeforePosition(z,O,0,P,X);continue}if(z>H){this.addAfterPosition(z-H,O,L-4,P,X);continue}}for(;;U++){var gt=W[U];if(!(z>gt)){if(0==U)z/=gt;else z=(z-(yt=W[U-1]))/(gt-yt);break}}if(U!=B){B=U;var vt=6*U;for(q=O[vt],Z=O[vt+1],K=O[vt+2],J=O[vt+3],Q=O[vt+4],$=O[vt+5],ot=2*(it=.03*(q-2*K+Q))+(rt=.006*(3*(K-Q)-q+(tt=O[vt+6]))),at=2*(nt=.03*(Z-2*J+$))+(st=.006*(3*(J-$)-Z+(et=O[vt+7]))),ht=.3*(K-q)+it+.16666667*rt,lt=.3*(J-Z)+nt+.16666667*st,dt=Math.sqrt(ht*ht+lt*lt),ct[0]=dt,vt=1;vt<8;vt++)ht+=ot,lt+=at,ot+=rt,at+=st,dt+=Math.sqrt(ht*ht+lt*lt),ct[vt]=dt;ht+=ot,lt+=at,dt+=Math.sqrt(ht*ht+lt*lt),ct[8]=dt,ht+=ot+rt,lt+=at+st,dt+=Math.sqrt(ht*ht+lt*lt),ct[9]=dt,ft=0}for(z*=dt;;ft++){var mt=ct[ft];if(!(z>mt)){var yt;if(0==ft)z/=mt;else z=ft+(z-(yt=ct[ft-1]))/(mt-yt);break}}this.addCurvePosition(.1*z,q,Z,K,J,Q,$,tt,et,P,X,a||Y>0&&0==pt)}return P},PathConstraint.prototype.addBeforePosition=function(t,r,o,a,h){var d=r[o],T=r[o+1],S=r[o+2]-d,A=r[o+3]-T,P=Math.atan2(A,S);a[h]=d+t*Math.cos(P),a[h+1]=T+t*Math.sin(P),a[h+2]=P},PathConstraint.prototype.addAfterPosition=function(t,r,o,a,h){var d=r[o+2],T=r[o+3],S=d-r[o],A=T-r[o+1],P=Math.atan2(A,S);a[h]=d+t*Math.cos(P),a[h+1]=T+t*Math.sin(P),a[h+2]=P},PathConstraint.prototype.addCurvePosition=function(t,r,o,a,h,d,T,S,A,P,O,D){if(0==t||isNaN(t))return P[O]=r,P[O+1]=o,void(P[O+2]=Math.atan2(h-o,a-r));var L=t*t,I=L*t,B=1-t,N=B*B,G=N*B,Y=B*t,X=3*Y,U=B*X,z=X*t,V=r*G+a*U+d*z+S*I,W=o*G+h*U+T*z+A*I;P[O]=V,P[O+1]=W,D&&(P[O+2]=t<.001?Math.atan2(h-o,a-r):Math.atan2(W-(o*N+h*Y*2+T*L),V-(r*N+a*Y*2+d*L)))},PathConstraint.NONE=-1,PathConstraint.BEFORE=-2,PathConstraint.AFTER=-3,PathConstraint.epsilon=1e-5,PathConstraint}();t.PathConstraint=r}(a||(a={})),function(t){var r,o,a,d=function(t){function PathConstraintData(r){var o=t.call(this,r,0,!1)||this;return o.bones=new Array,o}return h(PathConstraintData,t),PathConstraintData}(t.ConstraintData);t.PathConstraintData=d,(r=t.PositionMode||(t.PositionMode={}))[r.Fixed=0]="Fixed",r[r.Percent=1]="Percent",(o=t.SpacingMode||(t.SpacingMode={}))[o.Length=0]="Length",o[o.Fixed=1]="Fixed",o[o.Percent=2]="Percent",(a=t.RotateMode||(t.RotateMode={}))[a.Tangent=0]="Tangent",a[a.Chain=1]="Chain",a[a.ChainScale=2]="ChainScale"}(a||(a={})),function(t){var r=function(){function Assets(t){this.toLoad=new Array,this.assets={},this.clientId=t}return Assets.prototype.loaded=function(){var t=0;for(var r in this.assets)t++;return t},Assets}(),o=function(){function SharedAssetManager(t){void 0===t&&(t=""),this.clientAssets={},this.queuedAssets={},this.rawAssets={},this.errors={},this.pathPrefix=t}return SharedAssetManager.prototype.queueAsset=function(t,o,a){var h=this.clientAssets[t];return null==h&&(h=new r(t),this.clientAssets[t]=h),null!==o&&(h.textureLoader=o),h.toLoad.push(a),this.queuedAssets[a]!==a&&(this.queuedAssets[a]=a,!0)},SharedAssetManager.prototype.loadText=function(t,r){var o=this;if(r=this.pathPrefix+r,this.queueAsset(t,null,r)){var a=new XMLHttpRequest;a.overrideMimeType("text/html"),a.onreadystatechange=function(){a.readyState==XMLHttpRequest.DONE&&(a.status>=200&&a.status<300?o.rawAssets[r]=a.responseText:o.errors[r]="Couldn't load text "+r+": status "+a.status+", "+a.responseText)},a.open("GET",r,!0),a.send()}},SharedAssetManager.prototype.loadJson=function(t,r){var o=this;if(r=this.pathPrefix+r,this.queueAsset(t,null,r)){var a=new XMLHttpRequest;a.overrideMimeType("text/html"),a.onreadystatechange=function(){a.readyState==XMLHttpRequest.DONE&&(a.status>=200&&a.status<300?o.rawAssets[r]=JSON.parse(a.responseText):o.errors[r]="Couldn't load text "+r+": status "+a.status+", "+a.responseText)},a.open("GET",r,!0),a.send()}},SharedAssetManager.prototype.loadTexture=function(t,r,o){var a=this;if(o=this.pathPrefix+o,this.queueAsset(t,r,o))if(!!("undefined"==typeof window||"undefined"==typeof navigator||!window.document)&&"undefined"!=typeof importScripts){fetch(o,{mode:"cors"}).then((function(t){return t.ok||(a.errors[o]="Couldn't load image "+o),t.blob()})).then((function(t){return createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"})})).then((function(t){a.rawAssets[o]=t}))}else{var h=new Image;h.crossOrigin="anonymous",h.onload=function(t){a.rawAssets[o]=h},h.onerror=function(t){a.errors[o]="Couldn't load image "+o},h.src=o}},SharedAssetManager.prototype.get=function(t,r){r=this.pathPrefix+r;var o=this.clientAssets[t];return null==o||o.assets[r]},SharedAssetManager.prototype.updateClientAssets=function(t){for(var r=!!("undefined"==typeof window||"undefined"==typeof navigator||!window.document)&&"undefined"!=typeof importScripts,o=0;o<t.toLoad.length;o++){var a=t.toLoad[o],h=t.assets[a];if(null==h){var d=this.rawAssets[a];if(null==d)continue;r?d instanceof ImageBitmap?t.assets[a]=t.textureLoader(d):t.assets[a]=d:d instanceof HTMLImageElement?t.assets[a]=t.textureLoader(d):t.assets[a]=d}}},SharedAssetManager.prototype.isLoadingComplete=function(t){var r=this.clientAssets[t];return null==r||(this.updateClientAssets(r),r.toLoad.length==r.loaded())},SharedAssetManager.prototype.dispose=function(){},SharedAssetManager.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},SharedAssetManager.prototype.getErrors=function(){return this.errors},SharedAssetManager}();t.SharedAssetManager=o}(a||(a={})),function(t){var r=function(){function Skeleton(r){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==r)throw new Error("data cannot be null.");this.data=r,this.bones=new Array;for(var o=0;o<r.bones.length;o++){var a=r.bones[o],h=void 0;if(null==a.parent)h=new t.Bone(a,this,null);else{var d=this.bones[a.parent.index];h=new t.Bone(a,this,d),d.children.push(h)}this.bones.push(h)}this.slots=new Array,this.drawOrder=new Array;for(o=0;o<r.slots.length;o++){var T=r.slots[o],S=(h=this.bones[T.boneData.index],new t.Slot(T,h));this.slots.push(S),this.drawOrder.push(S)}this.ikConstraints=new Array;for(o=0;o<r.ikConstraints.length;o++){var A=r.ikConstraints[o];this.ikConstraints.push(new t.IkConstraint(A,this))}this.transformConstraints=new Array;for(o=0;o<r.transformConstraints.length;o++){var P=r.transformConstraints[o];this.transformConstraints.push(new t.TransformConstraint(P,this))}this.pathConstraints=new Array;for(o=0;o<r.pathConstraints.length;o++){var O=r.pathConstraints[o];this.pathConstraints.push(new t.PathConstraint(O,this))}this.color=new t.Color(1,1,1,1),this.updateCache()}return Skeleton.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,r=0,o=t.length;r<o;r++){(h=t[r]).sorted=h.data.skinRequired,h.active=!h.sorted}if(null!=this.skin){var a=this.skin.bones;for(r=0,o=this.skin.bones.length;r<o;r++){var h=this.bones[a[r].index];do{h.sorted=!1,h.active=!0,h=h.parent}while(null!=h)}}var d=this.ikConstraints,T=this.transformConstraints,S=this.pathConstraints,A=d.length,P=T.length,O=S.length,D=A+P+O;t:for(r=0;r<D;r++){for(var L=0;L<A;L++){if((I=d[L]).data.order==r){this.sortIkConstraint(I);continue t}}for(L=0;L<P;L++){if((I=T[L]).data.order==r){this.sortTransformConstraint(I);continue t}}for(L=0;L<O;L++){var I;if((I=S[L]).data.order==r){this.sortPathConstraint(I);continue t}}}for(r=0,o=t.length;r<o;r++)this.sortBone(t[r])},Skeleton.prototype.sortIkConstraint=function(r){if(r.active=r.target.isActive()&&(!r.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,r.data,!0)),r.active){var o=r.target;this.sortBone(o);var a=r.bones,h=a[0];if(this.sortBone(h),a.length>1){var d=a[a.length-1];this._updateCache.indexOf(d)>-1||this.updateCacheReset.push(d)}this._updateCache.push(r),this.sortReset(h.children),a[a.length-1].sorted=!0}},Skeleton.prototype.sortPathConstraint=function(r){if(r.active=r.target.bone.isActive()&&(!r.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,r.data,!0)),r.active){var o=r.target,a=o.data.index,h=o.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,a,h),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,a,h);for(var d=0,T=this.data.skins.length;d<T;d++)this.sortPathConstraintAttachment(this.data.skins[d],a,h);var S=o.getAttachment();S instanceof t.PathAttachment&&this.sortPathConstraintAttachmentWith(S,h);var A=r.bones,P=A.length;for(d=0;d<P;d++)this.sortBone(A[d]);this._updateCache.push(r);for(d=0;d<P;d++)this.sortReset(A[d].children);for(d=0;d<P;d++)A[d].sorted=!0}},Skeleton.prototype.sortTransformConstraint=function(r){if(r.active=r.target.isActive()&&(!r.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,r.data,!0)),r.active){this.sortBone(r.target);var o=r.bones,a=o.length;if(r.data.local)for(var h=0;h<a;h++){var d=o[h];this.sortBone(d.parent),this._updateCache.indexOf(d)>-1||this.updateCacheReset.push(d)}else for(h=0;h<a;h++)this.sortBone(o[h]);this._updateCache.push(r);for(var T=0;T<a;T++)this.sortReset(o[T].children);for(T=0;T<a;T++)o[T].sorted=!0}},Skeleton.prototype.sortPathConstraintAttachment=function(t,r,o){var a=t.attachments[r];if(a)for(var h in a)this.sortPathConstraintAttachmentWith(a[h],o)},Skeleton.prototype.sortPathConstraintAttachmentWith=function(r,o){if(r instanceof t.PathAttachment){var a=r.bones;if(null==a)this.sortBone(o);else for(var h=this.bones,d=0;d<a.length;)for(var T=a[d++],S=d+T;d<S;d++){var A=a[d];this.sortBone(h[A])}}},Skeleton.prototype.sortBone=function(t){if(!t.sorted){var r=t.parent;null!=r&&this.sortBone(r),t.sorted=!0,this._updateCache.push(t)}},Skeleton.prototype.sortReset=function(t){for(var r=0,o=t.length;r<o;r++){var a=t[r];a.active&&(a.sorted&&this.sortReset(a.children),a.sorted=!1)}},Skeleton.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,r=0,o=t.length;r<o;r++){var a=t[r];a.ax=a.x,a.ay=a.y,a.arotation=a.rotation,a.ascaleX=a.scaleX,a.ascaleY=a.scaleY,a.ashearX=a.shearX,a.ashearY=a.shearY,a.appliedValid=!0}var h=this._updateCache;for(r=0,o=h.length;r<o;r++)h[r].update()},Skeleton.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},Skeleton.prototype.setBonesToSetupPose=function(){for(var t=this.bones,r=0,o=t.length;r<o;r++)t[r].setToSetupPose();var a=this.ikConstraints;for(r=0,o=a.length;r<o;r++){(S=a[r]).mix=S.data.mix,S.softness=S.data.softness,S.bendDirection=S.data.bendDirection,S.compress=S.data.compress,S.stretch=S.data.stretch}var h=this.transformConstraints;for(r=0,o=h.length;r<o;r++){var d=(S=h[r]).data;S.rotateMix=d.rotateMix,S.translateMix=d.translateMix,S.scaleMix=d.scaleMix,S.shearMix=d.shearMix}var T=this.pathConstraints;for(r=0,o=T.length;r<o;r++){var S;d=(S=T[r]).data;S.position=d.position,S.spacing=d.spacing,S.rotateMix=d.rotateMix,S.translateMix=d.translateMix}},Skeleton.prototype.setSlotsToSetupPose=function(){var r=this.slots;t.Utils.arrayCopy(r,0,this.drawOrder,0,r.length);for(var o=0,a=r.length;o<a;o++)r[o].setToSetupPose()},Skeleton.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},Skeleton.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var r=this.bones,o=0,a=r.length;o<a;o++){var h=r[o];if(h.data.name==t)return h}return null},Skeleton.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var r=this.bones,o=0,a=r.length;o<a;o++)if(r[o].data.name==t)return o;return-1},Skeleton.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var r=this.slots,o=0,a=r.length;o<a;o++){var h=r[o];if(h.data.name==t)return h}return null},Skeleton.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var r=this.slots,o=0,a=r.length;o<a;o++)if(r[o].data.name==t)return o;return-1},Skeleton.prototype.setSkinByName=function(t){var r=this.data.findSkin(t);if(null==r)throw new Error("Skin not found: "+t);this.setSkin(r)},Skeleton.prototype.setSkin=function(t){if(t!=this.skin){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var r=this.slots,o=0,a=r.length;o<a;o++){var h=r[o],d=h.data.attachmentName;if(null!=d){var T=t.getAttachment(o,d);null!=T&&h.setAttachment(T)}}this.skin=t,this.updateCache()}},Skeleton.prototype.getAttachmentByName=function(t,r){return this.getAttachment(this.data.findSlotIndex(t),r)},Skeleton.prototype.getAttachment=function(t,r){if(null==r)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var o=this.skin.getAttachment(t,r);if(null!=o)return o}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,r):null},Skeleton.prototype.setAttachment=function(t,r){if(null==t)throw new Error("slotName cannot be null.");for(var o=this.slots,a=0,h=o.length;a<h;a++){var d=o[a];if(d.data.name==t){var T=null;if(null!=r&&null==(T=this.getAttachment(a,r)))throw new Error("Attachment not found: "+r+", for slot: "+t);return void d.setAttachment(T)}}throw new Error("Slot not found: "+t)},Skeleton.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var r=this.ikConstraints,o=0,a=r.length;o<a;o++){var h=r[o];if(h.data.name==t)return h}return null},Skeleton.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var r=this.transformConstraints,o=0,a=r.length;o<a;o++){var h=r[o];if(h.data.name==t)return h}return null},Skeleton.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var r=this.pathConstraints,o=0,a=r.length;o<a;o++){var h=r[o];if(h.data.name==t)return h}return null},Skeleton.prototype.getBounds=function(r,o,a){if(void 0===a&&(a=new Array(2)),null==r)throw new Error("offset cannot be null.");if(null==o)throw new Error("size cannot be null.");for(var h=this.drawOrder,d=Number.POSITIVE_INFINITY,T=Number.POSITIVE_INFINITY,S=Number.NEGATIVE_INFINITY,A=Number.NEGATIVE_INFINITY,P=0,O=h.length;P<O;P++){var D=h[P];if(D.bone.active){var L=0,I=null,B=D.getAttachment();if(B instanceof t.RegionAttachment)L=8,I=t.Utils.setArraySize(a,L,0),B.computeWorldVertices(D.bone,I,0,2);else if(B instanceof t.MeshAttachment){var N=B;L=N.worldVerticesLength,I=t.Utils.setArraySize(a,L,0),N.computeWorldVertices(D,0,L,I,0,2)}if(null!=I)for(var G=0,Y=I.length;G<Y;G+=2){var X=I[G],U=I[G+1];d=Math.min(d,X),T=Math.min(T,U),S=Math.max(S,X),A=Math.max(A,U)}}}r.set(d,T),o.set(S-d,A-T)},Skeleton.prototype.update=function(t){this.time+=t},Skeleton}();t.Skeleton=r}(a||(a={})),function(t){var r=function(){function SkeletonBinary(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return SkeletonBinary.prototype.readSkeletonData=function(r){var a=this.scale,h=new t.SkeletonData;h.name="";var d=new o(r);if(h.hash=d.readString(),h.version=d.readString(),"3.8.75"==h.version)throw new Error("Unsupported skeleton data, please export with a newer version of Spine.");h.x=d.readFloat(),h.y=d.readFloat(),h.width=d.readFloat(),h.height=d.readFloat();var T=d.readBoolean();T&&(h.fps=d.readFloat(),h.imagesPath=d.readString(),h.audioPath=d.readString());var S=0;S=d.readInt(!0);for(var A=0;A<S;A++)d.strings.push(d.readString());S=d.readInt(!0);for(A=0;A<S;A++){var P=d.readString(),O=0==A?null:h.bones[d.readInt(!0)];(I=new t.BoneData(A,P,O)).rotation=d.readFloat(),I.x=d.readFloat()*a,I.y=d.readFloat()*a,I.scaleX=d.readFloat(),I.scaleY=d.readFloat(),I.shearX=d.readFloat(),I.shearY=d.readFloat(),I.length=d.readFloat()*a,I.transformMode=SkeletonBinary.TransformModeValues[d.readInt(!0)],I.skinRequired=d.readBoolean(),T&&t.Color.rgba8888ToColor(I.color,d.readInt32()),h.bones.push(I)}S=d.readInt(!0);for(A=0;A<S;A++){var D=d.readString(),L=h.bones[d.readInt(!0)],I=new t.SlotData(A,D,L);t.Color.rgba8888ToColor(I.color,d.readInt32());var B=d.readInt32();-1!=B&&t.Color.rgb888ToColor(I.darkColor=new t.Color,B),I.attachmentName=d.readStringRef(),I.blendMode=SkeletonBinary.BlendModeValues[d.readInt(!0)],h.slots.push(I)}S=d.readInt(!0);A=0;for(var N=void 0;A<S;A++){(I=new t.IkConstraintData(d.readString())).order=d.readInt(!0),I.skinRequired=d.readBoolean(),N=d.readInt(!0);for(var G=0;G<N;G++)I.bones.push(h.bones[d.readInt(!0)]);I.target=h.bones[d.readInt(!0)],I.mix=d.readFloat(),I.softness=d.readFloat()*a,I.bendDirection=d.readByte(),I.compress=d.readBoolean(),I.stretch=d.readBoolean(),I.uniform=d.readBoolean(),h.ikConstraints.push(I)}S=d.readInt(!0);for(A=0,N=void 0;A<S;A++){(I=new t.TransformConstraintData(d.readString())).order=d.readInt(!0),I.skinRequired=d.readBoolean(),N=d.readInt(!0);for(G=0;G<N;G++)I.bones.push(h.bones[d.readInt(!0)]);I.target=h.bones[d.readInt(!0)],I.local=d.readBoolean(),I.relative=d.readBoolean(),I.offsetRotation=d.readFloat(),I.offsetX=d.readFloat()*a,I.offsetY=d.readFloat()*a,I.offsetScaleX=d.readFloat(),I.offsetScaleY=d.readFloat(),I.offsetShearY=d.readFloat(),I.rotateMix=d.readFloat(),I.translateMix=d.readFloat(),I.scaleMix=d.readFloat(),I.shearMix=d.readFloat(),h.transformConstraints.push(I)}S=d.readInt(!0);for(A=0,N=void 0;A<S;A++){(I=new t.PathConstraintData(d.readString())).order=d.readInt(!0),I.skinRequired=d.readBoolean(),N=d.readInt(!0);for(G=0;G<N;G++)I.bones.push(h.bones[d.readInt(!0)]);I.target=h.slots[d.readInt(!0)],I.positionMode=SkeletonBinary.PositionModeValues[d.readInt(!0)],I.spacingMode=SkeletonBinary.SpacingModeValues[d.readInt(!0)],I.rotateMode=SkeletonBinary.RotateModeValues[d.readInt(!0)],I.offsetRotation=d.readFloat(),I.position=d.readFloat(),I.positionMode==t.PositionMode.Fixed&&(I.position*=a),I.spacing=d.readFloat(),I.spacingMode!=t.SpacingMode.Length&&I.spacingMode!=t.SpacingMode.Fixed||(I.spacing*=a),I.rotateMix=d.readFloat(),I.translateMix=d.readFloat(),h.pathConstraints.push(I)}var Y=this.readSkin(d,h,!0,T);null!=Y&&(h.defaultSkin=Y,h.skins.push(Y));A=h.skins.length;for(t.Utils.setArraySize(h.skins,S=A+d.readInt(!0));A<S;A++)h.skins[A]=this.readSkin(d,h,!1,T);S=this.linkedMeshes.length;for(A=0;A<S;A++){var X=this.linkedMeshes[A],U=null==X.skin?h.defaultSkin:h.findSkin(X.skin);if(null==U)throw new Error("Skin not found: "+X.skin);var z=U.getAttachment(X.slotIndex,X.parent);if(null==z)throw new Error("Parent mesh not found: "+X.parent);X.mesh.deformAttachment=X.inheritDeform?z:X.mesh,X.mesh.setParentMesh(z),X.mesh.updateUVs()}this.linkedMeshes.length=0,S=d.readInt(!0);for(A=0;A<S;A++){(I=new t.EventData(d.readStringRef())).intValue=d.readInt(!1),I.floatValue=d.readFloat(),I.stringValue=d.readString(),I.audioPath=d.readString(),null!=I.audioPath&&(I.volume=d.readFloat(),I.balance=d.readFloat()),h.events.push(I)}S=d.readInt(!0);for(A=0;A<S;A++)h.animations.push(this.readAnimation(d,d.readString(),h));return h},SkeletonBinary.prototype.readSkin=function(r,o,a,h){var d=null,T=0;if(a){if(0==(T=r.readInt(!0)))return null;d=new t.Skin("default")}else{(d=new t.Skin(r.readStringRef())).bones.length=r.readInt(!0);for(var S=0,A=d.bones.length;S<A;S++)d.bones[S]=o.bones[r.readInt(!0)];for(S=0,A=r.readInt(!0);S<A;S++)d.constraints.push(o.ikConstraints[r.readInt(!0)]);for(S=0,A=r.readInt(!0);S<A;S++)d.constraints.push(o.transformConstraints[r.readInt(!0)]);for(S=0,A=r.readInt(!0);S<A;S++)d.constraints.push(o.pathConstraints[r.readInt(!0)]);T=r.readInt(!0)}for(S=0;S<T;S++)for(var P=r.readInt(!0),O=0,D=r.readInt(!0);O<D;O++){var L=r.readStringRef(),I=this.readAttachment(r,o,d,P,L,h);null!=I&&d.setAttachment(P,L,I)}return d},SkeletonBinary.prototype.readAttachment=function(r,o,h,d,T,S){var A=this.scale,P=r.readStringRef();null==P&&(P=T);var O=r.readByte();switch(SkeletonBinary.AttachmentTypeValues[O]){case t.AttachmentType.Region:var D=r.readStringRef(),L=r.readFloat(),I=r.readFloat(),B=r.readFloat(),N=r.readFloat(),G=r.readFloat(),Y=r.readFloat(),X=r.readFloat(),U=r.readInt32();null==D&&(D=P);var z=this.attachmentLoader.newRegionAttachment(h,P,D);return null==z?null:(z.path=D,z.x=I*A,z.y=B*A,z.scaleX=N,z.scaleY=G,z.rotation=L,z.width=Y*A,z.height=X*A,t.Color.rgba8888ToColor(z.color,U),z.updateOffset(),z);case t.AttachmentType.BoundingBox:var V=r.readInt(!0),W=this.readVertices(r,V),H=(U=S?r.readInt32():0,this.attachmentLoader.newBoundingBoxAttachment(h,P));return null==H?null:(H.worldVerticesLength=V<<1,H.vertices=W.vertices,H.bones=W.bones,S&&t.Color.rgba8888ToColor(H.color,U),H);case t.AttachmentType.Mesh:D=r.readStringRef(),U=r.readInt32(),V=r.readInt(!0);var q=this.readFloatArray(r,V<<1,1),Z=this.readShortArray(r),K=(W=this.readVertices(r,V),r.readInt(!0)),J=null;Y=0,X=0;return S&&(J=this.readShortArray(r),Y=r.readFloat(),X=r.readFloat()),null==D&&(D=P),null==(Q=this.attachmentLoader.newMeshAttachment(h,P,D))?null:(Q.path=D,t.Color.rgba8888ToColor(Q.color,U),Q.bones=W.bones,Q.vertices=W.vertices,Q.worldVerticesLength=V<<1,Q.triangles=Z,Q.regionUVs=q,Q.updateUVs(),Q.hullLength=K<<1,S&&(Q.edges=J,Q.width=Y*A,Q.height=X*A),Q);case t.AttachmentType.LinkedMesh:D=r.readStringRef(),U=r.readInt32();var Q,$=r.readStringRef(),tt=r.readStringRef(),et=r.readBoolean();Y=0,X=0;return S&&(Y=r.readFloat(),X=r.readFloat()),null==D&&(D=P),null==(Q=this.attachmentLoader.newMeshAttachment(h,P,D))?null:(Q.path=D,t.Color.rgba8888ToColor(Q.color,U),S&&(Q.width=Y*A,Q.height=X*A),this.linkedMeshes.push(new a(Q,$,d,tt,et)),Q);case t.AttachmentType.Path:for(var it=r.readBoolean(),nt=r.readBoolean(),rt=(V=r.readInt(!0),W=this.readVertices(r,V),t.Utils.newArray(V/3,0)),st=0,ot=rt.length;st<ot;st++)rt[st]=r.readFloat()*A;U=S?r.readInt32():0;return null==(D=this.attachmentLoader.newPathAttachment(h,P))?null:(D.closed=it,D.constantSpeed=nt,D.worldVerticesLength=V<<1,D.vertices=W.vertices,D.bones=W.bones,D.lengths=rt,S&&t.Color.rgba8888ToColor(D.color,U),D);case t.AttachmentType.Point:L=r.readFloat(),I=r.readFloat(),B=r.readFloat(),U=S?r.readInt32():0;var at=this.attachmentLoader.newPointAttachment(h,P);return null==at?null:(at.x=I*A,at.y=B*A,at.rotation=L,S&&t.Color.rgba8888ToColor(at.color,U),at);case t.AttachmentType.Clipping:var ht=r.readInt(!0),lt=(V=r.readInt(!0),W=this.readVertices(r,V),U=S?r.readInt32():0,this.attachmentLoader.newClippingAttachment(h,P));return null==lt?null:(lt.endSlot=o.slots[ht],lt.worldVerticesLength=V<<1,lt.vertices=W.vertices,lt.bones=W.bones,S&&t.Color.rgba8888ToColor(lt.color,U),lt)}return null},SkeletonBinary.prototype.readVertices=function(r,o){var a=o<<1,d=new h,T=this.scale;if(!r.readBoolean())return d.vertices=this.readFloatArray(r,a,T),d;for(var S=new Array,A=new Array,P=0;P<o;P++){var O=r.readInt(!0);A.push(O);for(var D=0;D<O;D++)A.push(r.readInt(!0)),S.push(r.readFloat()*T),S.push(r.readFloat()*T),S.push(r.readFloat())}return d.vertices=t.Utils.toFloatArray(S),d.bones=A,d},SkeletonBinary.prototype.readFloatArray=function(t,r,o){var a=new Array(r);if(1==o)for(var h=0;h<r;h++)a[h]=t.readFloat();else for(h=0;h<r;h++)a[h]=t.readFloat()*o;return a},SkeletonBinary.prototype.readShortArray=function(t){for(var r=t.readInt(!0),o=new Array(r),a=0;a<r;a++)o[a]=t.readShort();return o},SkeletonBinary.prototype.readAnimation=function(r,o,a){for(var h=new Array,d=this.scale,T=0,S=new t.Color,A=new t.Color,P=0,O=r.readInt(!0);P<O;P++)for(var D=r.readInt(!0),L=0,I=r.readInt(!0);L<I;L++){var B=r.readByte(),N=r.readInt(!0);switch(B){case SkeletonBinary.SLOT_ATTACHMENT:(U=new t.AttachmentTimeline(N)).slotIndex=D;for(var G=0;G<N;G++)U.setFrame(G,r.readFloat(),r.readStringRef());h.push(U),T=Math.max(T,U.frames[N-1]);break;case SkeletonBinary.SLOT_COLOR:(U=new t.ColorTimeline(N)).slotIndex=D;for(G=0;G<N;G++){var Y=r.readFloat();t.Color.rgba8888ToColor(S,r.readInt32()),U.setFrame(G,Y,S.r,S.g,S.b,S.a),G<N-1&&this.readCurve(r,G,U)}h.push(U),T=Math.max(T,U.frames[(N-1)*t.ColorTimeline.ENTRIES]);break;case SkeletonBinary.SLOT_TWO_COLOR:(U=new t.TwoColorTimeline(N)).slotIndex=D;for(G=0;G<N;G++){Y=r.readFloat();t.Color.rgba8888ToColor(S,r.readInt32()),t.Color.rgb888ToColor(A,r.readInt32()),U.setFrame(G,Y,S.r,S.g,S.b,S.a,A.r,A.g,A.b),G<N-1&&this.readCurve(r,G,U)}h.push(U),T=Math.max(T,U.frames[(N-1)*t.TwoColorTimeline.ENTRIES])}}for(P=0,O=r.readInt(!0);P<O;P++){var X=r.readInt(!0);for(L=0,I=r.readInt(!0);L<I;L++){B=r.readByte(),N=r.readInt(!0);switch(B){case SkeletonBinary.BONE_ROTATE:(U=new t.RotateTimeline(N)).boneIndex=X;for(G=0;G<N;G++)U.setFrame(G,r.readFloat(),r.readFloat()),G<N-1&&this.readCurve(r,G,U);h.push(U),T=Math.max(T,U.frames[(N-1)*t.RotateTimeline.ENTRIES]);break;case SkeletonBinary.BONE_TRANSLATE:case SkeletonBinary.BONE_SCALE:case SkeletonBinary.BONE_SHEAR:var U=void 0,z=1;B==SkeletonBinary.BONE_SCALE?U=new t.ScaleTimeline(N):B==SkeletonBinary.BONE_SHEAR?U=new t.ShearTimeline(N):(U=new t.TranslateTimeline(N),z=d),U.boneIndex=X;for(G=0;G<N;G++)U.setFrame(G,r.readFloat(),r.readFloat()*z,r.readFloat()*z),G<N-1&&this.readCurve(r,G,U);h.push(U),T=Math.max(T,U.frames[(N-1)*t.TranslateTimeline.ENTRIES])}}}for(P=0,O=r.readInt(!0);P<O;P++){var V=r.readInt(!0);N=r.readInt(!0);(U=new t.IkConstraintTimeline(N)).ikConstraintIndex=V;for(G=0;G<N;G++)U.setFrame(G,r.readFloat(),r.readFloat(),r.readFloat()*d,r.readByte(),r.readBoolean(),r.readBoolean()),G<N-1&&this.readCurve(r,G,U);h.push(U),T=Math.max(T,U.frames[(N-1)*t.IkConstraintTimeline.ENTRIES])}for(P=0,O=r.readInt(!0);P<O;P++){V=r.readInt(!0),N=r.readInt(!0);(U=new t.TransformConstraintTimeline(N)).transformConstraintIndex=V;for(G=0;G<N;G++)U.setFrame(G,r.readFloat(),r.readFloat(),r.readFloat(),r.readFloat(),r.readFloat()),G<N-1&&this.readCurve(r,G,U);h.push(U),T=Math.max(T,U.frames[(N-1)*t.TransformConstraintTimeline.ENTRIES])}for(P=0,O=r.readInt(!0);P<O;P++){V=r.readInt(!0);var W=a.pathConstraints[V];for(L=0,I=r.readInt(!0);L<I;L++){B=r.readByte(),N=r.readInt(!0);switch(B){case SkeletonBinary.PATH_POSITION:case SkeletonBinary.PATH_SPACING:U=void 0,z=1;B==SkeletonBinary.PATH_SPACING?(U=new t.PathConstraintSpacingTimeline(N),W.spacingMode!=t.SpacingMode.Length&&W.spacingMode!=t.SpacingMode.Fixed||(z=d)):(U=new t.PathConstraintPositionTimeline(N),W.positionMode==t.PositionMode.Fixed&&(z=d)),U.pathConstraintIndex=V;for(G=0;G<N;G++)U.setFrame(G,r.readFloat(),r.readFloat()*z),G<N-1&&this.readCurve(r,G,U);h.push(U),T=Math.max(T,U.frames[(N-1)*t.PathConstraintPositionTimeline.ENTRIES]);break;case SkeletonBinary.PATH_MIX:(U=new t.PathConstraintMixTimeline(N)).pathConstraintIndex=V;for(G=0;G<N;G++)U.setFrame(G,r.readFloat(),r.readFloat(),r.readFloat()),G<N-1&&this.readCurve(r,G,U);h.push(U),T=Math.max(T,U.frames[(N-1)*t.PathConstraintMixTimeline.ENTRIES])}}}for(P=0,O=r.readInt(!0);P<O;P++){var H=a.skins[r.readInt(!0)];for(L=0,I=r.readInt(!0);L<I;L++){D=r.readInt(!0);for(var q=0,Z=r.readInt(!0);q<Z;q++){var K=H.getAttachment(D,r.readStringRef()),J=null!=K.bones,Q=K.vertices,$=J?Q.length/3*2:Q.length;N=r.readInt(!0);(U=new t.DeformTimeline(N)).slotIndex=D,U.attachment=K;for(G=0;G<N;G++){Y=r.readFloat();var tt=void 0,et=r.readInt(!0);if(0==et)tt=J?t.Utils.newFloatArray($):Q;else{tt=t.Utils.newFloatArray($);var it=r.readInt(!0);if(et+=it,1==d)for(var nt=it;nt<et;nt++)tt[nt]=r.readFloat();else for(nt=it;nt<et;nt++)tt[nt]=r.readFloat()*d;if(!J){nt=0;for(var rt=tt.length;nt<rt;nt++)tt[nt]+=Q[nt]}}U.setFrame(G,Y,tt),G<N-1&&this.readCurve(r,G,U)}h.push(U),T=Math.max(T,U.frames[N-1])}}}var st=r.readInt(!0);if(st>0){U=new t.DrawOrderTimeline(st);var ot=a.slots.length;for(P=0;P<st;P++){Y=r.readFloat();var at=r.readInt(!0),ht=t.Utils.newArray(ot,0);for(L=ot-1;L>=0;L--)ht[L]=-1;var lt=t.Utils.newArray(ot-at,0),ut=0,ct=0;for(L=0;L<at;L++){for(D=r.readInt(!0);ut!=D;)lt[ct++]=ut++;ht[ut+r.readInt(!0)]=ut++}for(;ut<ot;)lt[ct++]=ut++;for(L=ot-1;L>=0;L--)-1==ht[L]&&(ht[L]=lt[--ct]);U.setFrame(P,Y,ht)}h.push(U),T=Math.max(T,U.frames[st-1])}var dt=r.readInt(!0);if(dt>0){for(U=new t.EventTimeline(dt),P=0;P<dt;P++){Y=r.readFloat();var ft=a.events[r.readInt(!0)],pt=new t.Event(Y,ft);pt.intValue=r.readInt(!1),pt.floatValue=r.readFloat(),pt.stringValue=r.readBoolean()?r.readString():ft.stringValue,null!=pt.data.audioPath&&(pt.volume=r.readFloat(),pt.balance=r.readFloat()),U.setFrame(P,pt)}h.push(U),T=Math.max(T,U.frames[dt-1])}return new t.Animation(o,h,T)},SkeletonBinary.prototype.readCurve=function(t,r,o){switch(t.readByte()){case SkeletonBinary.CURVE_STEPPED:o.setStepped(r);break;case SkeletonBinary.CURVE_BEZIER:this.setCurve(o,r,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat())}},SkeletonBinary.prototype.setCurve=function(t,r,o,a,h,d){t.setCurve(r,o,a,h,d)},SkeletonBinary.AttachmentTypeValues=[0,1,2,3,4,5,6],SkeletonBinary.TransformModeValues=[t.TransformMode.Normal,t.TransformMode.OnlyTranslation,t.TransformMode.NoRotationOrReflection,t.TransformMode.NoScale,t.TransformMode.NoScaleOrReflection],SkeletonBinary.PositionModeValues=[t.PositionMode.Fixed,t.PositionMode.Percent],SkeletonBinary.SpacingModeValues=[t.SpacingMode.Length,t.SpacingMode.Fixed,t.SpacingMode.Percent],SkeletonBinary.RotateModeValues=[t.RotateMode.Tangent,t.RotateMode.Chain,t.RotateMode.ChainScale],SkeletonBinary.BlendModeValues=[t.BlendMode.Normal,t.BlendMode.Additive,t.BlendMode.Multiply,t.BlendMode.Screen],SkeletonBinary.BONE_ROTATE=0,SkeletonBinary.BONE_TRANSLATE=1,SkeletonBinary.BONE_SCALE=2,SkeletonBinary.BONE_SHEAR=3,SkeletonBinary.SLOT_ATTACHMENT=0,SkeletonBinary.SLOT_COLOR=1,SkeletonBinary.SLOT_TWO_COLOR=2,SkeletonBinary.PATH_POSITION=0,SkeletonBinary.PATH_SPACING=1,SkeletonBinary.PATH_MIX=2,SkeletonBinary.CURVE_LINEAR=0,SkeletonBinary.CURVE_STEPPED=1,SkeletonBinary.CURVE_BEZIER=2,SkeletonBinary}();t.SkeletonBinary=r;var o=function(){function BinaryInput(t,r,o,a){void 0===r&&(r=new Array),void 0===o&&(o=0),void 0===a&&(a=new DataView(t.buffer)),this.strings=r,this.index=o,this.buffer=a}return BinaryInput.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},BinaryInput.prototype.readShort=function(){var t=this.buffer.getInt16(this.index);return this.index+=2,t},BinaryInput.prototype.readInt32=function(){var t=this.buffer.getInt32(this.index);return this.index+=4,t},BinaryInput.prototype.readInt=function(t){var r=this.readByte(),o=127&r;return 0!=(128&r)&&(o|=(127&(r=this.readByte()))<<7,0!=(128&r)&&(o|=(127&(r=this.readByte()))<<14,0!=(128&r)&&(o|=(127&(r=this.readByte()))<<21,0!=(128&r)&&(o|=(127&(r=this.readByte()))<<28)))),t?o:o>>>1^-(1&o)},BinaryInput.prototype.readStringRef=function(){var t=this.readInt(!0);return 0==t?null:this.strings[t-1]},BinaryInput.prototype.readString=function(){var t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;for(var r="",o=0;o<t;){var a=this.readByte();switch(a>>4){case 12:case 13:r+=String.fromCharCode((31&a)<<6|63&this.readByte()),o+=2;break;case 14:r+=String.fromCharCode((15&a)<<12|(63&this.readByte())<<6|63&this.readByte()),o+=3;break;default:r+=String.fromCharCode(a),o++}}return r},BinaryInput.prototype.readFloat=function(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t},BinaryInput.prototype.readBoolean=function(){return 0!=this.readByte()},BinaryInput}(),a=function a(t,r,o,h,d){this.mesh=t,this.skin=r,this.slotIndex=o,this.parent=h,this.inheritDeform=d},h=function h(t,r){void 0===t&&(t=null),void 0===r&&(r=null),this.bones=t,this.vertices=r}}(a||(a={})),function(t){var r=function(){function SkeletonBounds(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new t.Pool((function(){return t.Utils.newFloatArray(16)}))}return SkeletonBounds.prototype.update=function(r,o){if(null==r)throw new Error("skeleton cannot be null.");var a=this.boundingBoxes,h=this.polygons,d=this.polygonPool,T=r.slots,S=T.length;a.length=0,d.freeAll(h),h.length=0;for(var A=0;A<S;A++){var P=T[A];if(P.bone.active){var O=P.getAttachment();if(O instanceof t.BoundingBoxAttachment){var D=O;a.push(D);var L=d.obtain();L.length!=D.worldVerticesLength&&(L=t.Utils.newFloatArray(D.worldVerticesLength)),h.push(L),D.computeWorldVertices(P,0,D.worldVerticesLength,L,0,2)}}}o?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},SkeletonBounds.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,h=this.polygons,d=0,T=h.length;d<T;d++)for(var S=h[d],A=S,P=0,O=S.length;P<O;P+=2){var D=A[P],L=A[P+1];t=Math.min(t,D),r=Math.min(r,L),o=Math.max(o,D),a=Math.max(a,L)}this.minX=t,this.minY=r,this.maxX=o,this.maxY=a},SkeletonBounds.prototype.aabbContainsPoint=function(t,r){return t>=this.minX&&t<=this.maxX&&r>=this.minY&&r<=this.maxY},SkeletonBounds.prototype.aabbIntersectsSegment=function(t,r,o,a){var h=this.minX,d=this.minY,T=this.maxX,S=this.maxY;if(t<=h&&o<=h||r<=d&&a<=d||t>=T&&o>=T||r>=S&&a>=S)return!1;var A=(a-r)/(o-t),P=A*(h-t)+r;if(P>d&&P<S)return!0;if((P=A*(T-t)+r)>d&&P<S)return!0;var O=(d-r)/A+t;return O>h&&O<T||(O=(S-r)/A+t)>h&&O<T},SkeletonBounds.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},SkeletonBounds.prototype.containsPoint=function(t,r){for(var o=this.polygons,a=0,h=o.length;a<h;a++)if(this.containsPointPolygon(o[a],t,r))return this.boundingBoxes[a];return null},SkeletonBounds.prototype.containsPointPolygon=function(t,r,o){for(var a=t,h=t.length,d=h-2,T=!1,S=0;S<h;S+=2){var A=a[S+1],P=a[d+1];if(A<o&&P>=o||P<o&&A>=o){var O=a[S];O+(o-A)/(P-A)*(a[d]-O)<r&&(T=!T)}d=S}return T},SkeletonBounds.prototype.intersectsSegment=function(t,r,o,a){for(var h=this.polygons,d=0,T=h.length;d<T;d++)if(this.intersectsSegmentPolygon(h[d],t,r,o,a))return this.boundingBoxes[d];return null},SkeletonBounds.prototype.intersectsSegmentPolygon=function(t,r,o,a,h){for(var d=t,T=t.length,S=r-a,A=o-h,P=r*h-o*a,O=d[T-2],D=d[T-1],L=0;L<T;L+=2){var I=d[L],B=d[L+1],N=O*B-D*I,G=O-I,Y=D-B,X=S*Y-A*G,U=(P*G-S*N)/X;if((U>=O&&U<=I||U>=I&&U<=O)&&(U>=r&&U<=a||U>=a&&U<=r)){var z=(P*Y-A*N)/X;if((z>=D&&z<=B||z>=B&&z<=D)&&(z>=o&&z<=h||z>=h&&z<=o))return!0}O=I,D=B}return!1},SkeletonBounds.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");var r=this.boundingBoxes.indexOf(t);return-1==r?null:this.polygons[r]},SkeletonBounds.prototype.getWidth=function(){return this.maxX-this.minX},SkeletonBounds.prototype.getHeight=function(){return this.maxY-this.minY},SkeletonBounds}();t.SkeletonBounds=r}(a||(a={})),function(t){var r=function(){function SkeletonClipping(){this.triangulator=new t.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}return SkeletonClipping.prototype.clipStart=function(r,o){if(null!=this.clipAttachment)return 0;this.clipAttachment=o;var a=o.worldVerticesLength,h=t.Utils.setArraySize(this.clippingPolygon,a);o.computeWorldVertices(r,0,a,h,0,2);var d=this.clippingPolygon;SkeletonClipping.makeClockwise(d);for(var T=this.clippingPolygons=this.triangulator.decompose(d,this.triangulator.triangulate(d)),S=0,A=T.length;S<A;S++){var P=T[S];SkeletonClipping.makeClockwise(P),P.push(P[0]),P.push(P[1])}return T.length},SkeletonClipping.prototype.clipEndWithSlot=function(t){null!=this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()},SkeletonClipping.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},SkeletonClipping.prototype.isClipping=function(){return null!=this.clipAttachment},SkeletonClipping.prototype.clipTriangles=function(r,o,a,h,d,T,S,A){var P=this.clipOutput,O=this.clippedVertices,D=this.clippedTriangles,L=this.clippingPolygons,I=this.clippingPolygons.length,B=A?12:8,N=0;O.length=0,D.length=0;t:for(var G=0;G<h;G+=3)for(var Y=a[G]<<1,X=r[Y],U=r[Y+1],z=d[Y],V=d[Y+1],W=r[Y=a[G+1]<<1],H=r[Y+1],q=d[Y],Z=d[Y+1],K=r[Y=a[G+2]<<1],J=r[Y+1],Q=d[Y],$=d[Y+1],tt=0;tt<I;tt++){var et=O.length;if(!this.clip(X,U,W,H,K,J,L[tt],P)){(ut=t.Utils.setArraySize(O,et+3*B))[et]=X,ut[et+1]=U,ut[et+2]=T.r,ut[et+3]=T.g,ut[et+4]=T.b,ut[et+5]=T.a,A?(ut[et+6]=z,ut[et+7]=V,ut[et+8]=S.r,ut[et+9]=S.g,ut[et+10]=S.b,ut[et+11]=S.a,ut[et+12]=W,ut[et+13]=H,ut[et+14]=T.r,ut[et+15]=T.g,ut[et+16]=T.b,ut[et+17]=T.a,ut[et+18]=q,ut[et+19]=Z,ut[et+20]=S.r,ut[et+21]=S.g,ut[et+22]=S.b,ut[et+23]=S.a,ut[et+24]=K,ut[et+25]=J,ut[et+26]=T.r,ut[et+27]=T.g,ut[et+28]=T.b,ut[et+29]=T.a,ut[et+30]=Q,ut[et+31]=$,ut[et+32]=S.r,ut[et+33]=S.g,ut[et+34]=S.b,ut[et+35]=S.a):(ut[et+6]=z,ut[et+7]=V,ut[et+8]=W,ut[et+9]=H,ut[et+10]=T.r,ut[et+11]=T.g,ut[et+12]=T.b,ut[et+13]=T.a,ut[et+14]=q,ut[et+15]=Z,ut[et+16]=K,ut[et+17]=J,ut[et+18]=T.r,ut[et+19]=T.g,ut[et+20]=T.b,ut[et+21]=T.a,ut[et+22]=Q,ut[et+23]=$),et=D.length,(xt=t.Utils.setArraySize(D,et+3))[et]=N,xt[et+1]=N+1,xt[et+2]=N+2,N+=3;continue t}var it=P.length;if(0!=it){for(var nt=H-J,rt=K-W,st=X-K,ot=J-U,at=1/(nt*st+rt*(U-J)),ht=it>>1,lt=this.clipOutput,ut=t.Utils.setArraySize(O,et+ht*B),ct=0;ct<it;ct+=2){var dt=lt[ct],ft=lt[ct+1];ut[et]=dt,ut[et+1]=ft,ut[et+2]=T.r,ut[et+3]=T.g,ut[et+4]=T.b,ut[et+5]=T.a;var pt=dt-K,gt=ft-J,vt=(nt*pt+rt*gt)*at,mt=(ot*pt+st*gt)*at,yt=1-vt-mt;ut[et+6]=z*vt+q*mt+Q*yt,ut[et+7]=V*vt+Z*mt+$*yt,A&&(ut[et+8]=S.r,ut[et+9]=S.g,ut[et+10]=S.b,ut[et+11]=S.a),et+=B}et=D.length;var xt=t.Utils.setArraySize(D,et+3*(ht-2));ht--;for(ct=1;ct<ht;ct++)xt[et]=N,xt[et+1]=N+ct,xt[et+2]=N+ct+1,et+=3;N+=ht+1}}},SkeletonClipping.prototype.clip=function(t,r,o,a,h,d,T,S){var A=S,P=!1,O=null;T.length%4>=2?(O=S,S=this.scratch):O=this.scratch,O.length=0,O.push(t),O.push(r),O.push(o),O.push(a),O.push(h),O.push(d),O.push(t),O.push(r),S.length=0;for(var D=T,L=T.length-4,I=0;;I+=2){for(var B=D[I],N=D[I+1],G=D[I+2],Y=D[I+3],X=B-G,U=N-Y,z=O,V=O.length-2,W=S.length,H=0;H<V;H+=2){var q=z[H],Z=z[H+1],K=z[H+2],J=z[H+3],Q=X*(J-Y)-U*(K-G)>0;if(X*(Z-Y)-U*(q-G)>0){if(Q){S.push(K),S.push(J);continue}var $=(et=J-Z)*(G-B)-(it=K-q)*(Y-N);if(Math.abs($)>1e-6){var tt=(it*(N-Z)-et*(B-q))/$;S.push(B+(G-B)*tt),S.push(N+(Y-N)*tt)}else S.push(B),S.push(N)}else if(Q){var et,it;$=(et=J-Z)*(G-B)-(it=K-q)*(Y-N);if(Math.abs($)>1e-6){tt=(it*(N-Z)-et*(B-q))/$;S.push(B+(G-B)*tt),S.push(N+(Y-N)*tt)}else S.push(B),S.push(N);S.push(K),S.push(J)}P=!0}if(W==S.length)return A.length=0,!0;if(S.push(S[0]),S.push(S[1]),I==L)break;var nt=S;(S=O).length=0,O=nt}if(A!=S){A.length=0;I=0;for(var rt=S.length-2;I<rt;I++)A[I]=S[I]}else A.length=A.length-2;return P},SkeletonClipping.makeClockwise=function(t){for(var r=t,o=t.length,a=r[o-2]*r[1]-r[0]*r[o-1],h=0,d=0,T=0,S=0,A=o-3;S<A;S+=2)h=r[S],d=r[S+1],T=r[S+2],a+=h*r[S+3]-T*d;if(!(a<0)){S=0;var P=o-2;for(A=o>>1;S<A;S+=2){var O=r[S],D=r[S+1],L=P-S;r[S]=r[L],r[S+1]=r[L+1],r[L]=O,r[L+1]=D}}},SkeletonClipping}();t.SkeletonClipping=r}(a||(a={})),function(t){var r=function(){function SkeletonData(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return SkeletonData.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var r=this.bones,o=0,a=r.length;o<a;o++){var h=r[o];if(h.name==t)return h}return null},SkeletonData.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var r=this.bones,o=0,a=r.length;o<a;o++)if(r[o].name==t)return o;return-1},SkeletonData.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var r=this.slots,o=0,a=r.length;o<a;o++){var h=r[o];if(h.name==t)return h}return null},SkeletonData.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var r=this.slots,o=0,a=r.length;o<a;o++)if(r[o].name==t)return o;return-1},SkeletonData.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var r=this.skins,o=0,a=r.length;o<a;o++){var h=r[o];if(h.name==t)return h}return null},SkeletonData.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var r=this.events,o=0,a=r.length;o<a;o++){var h=r[o];if(h.name==t)return h}return null},SkeletonData.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var r=this.animations,o=0,a=r.length;o<a;o++){var h=r[o];if(h.name==t)return h}return null},SkeletonData.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var r=this.ikConstraints,o=0,a=r.length;o<a;o++){var h=r[o];if(h.name==t)return h}return null},SkeletonData.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var r=this.transformConstraints,o=0,a=r.length;o<a;o++){var h=r[o];if(h.name==t)return h}return null},SkeletonData.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var r=this.pathConstraints,o=0,a=r.length;o<a;o++){var h=r[o];if(h.name==t)return h}return null},SkeletonData.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var r=this.pathConstraints,o=0,a=r.length;o<a;o++)if(r[o].name==t)return o;return-1},SkeletonData}();t.SkeletonData=r}(a||(a={})),function(t){var r=function(){function SkeletonJson(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return SkeletonJson.prototype.readSkeletonData=function(r){var o=this.scale,a=new t.SkeletonData,h="string"==typeof r?JSON.parse(r):r,d=h.skeleton;if(null!=d){if(a.hash=d.hash,a.version=d.spine,"3.8.75"==a.version)throw new Error("Unsupported skeleton data, please export with a newer version of Spine.");a.x=d.x,a.y=d.y,a.width=d.width,a.height=d.height,a.fps=d.fps,a.imagesPath=d.images}if(h.bones)for(var T=0;T<h.bones.length;T++){var S=h.bones[T],A=null,P=this.getValue(S,"parent",null);if(null!=P&&null==(A=a.findBone(P)))throw new Error("Parent bone not found: "+P);(I=new t.BoneData(a.bones.length,S.name,A)).length=this.getValue(S,"length",0)*o,I.x=this.getValue(S,"x",0)*o,I.y=this.getValue(S,"y",0)*o,I.rotation=this.getValue(S,"rotation",0),I.scaleX=this.getValue(S,"scaleX",1),I.scaleY=this.getValue(S,"scaleY",1),I.shearX=this.getValue(S,"shearX",0),I.shearY=this.getValue(S,"shearY",0),I.transformMode=SkeletonJson.transformModeFromString(this.getValue(S,"transform","normal")),I.skinRequired=this.getValue(S,"skin",!1),a.bones.push(I)}if(h.slots)for(T=0;T<h.slots.length;T++){var O=(Z=h.slots[T]).name,D=Z.bone,L=a.findBone(D);if(null==L)throw new Error("Slot bone not found: "+D);var I=new t.SlotData(a.slots.length,O,L),B=this.getValue(Z,"color",null);null!=B&&I.color.setFromString(B);var N=this.getValue(Z,"dark",null);null!=N&&(I.darkColor=new t.Color(1,1,1,1),I.darkColor.setFromString(N)),I.attachmentName=this.getValue(Z,"attachment",null),I.blendMode=SkeletonJson.blendModeFromString(this.getValue(Z,"blend","normal")),a.slots.push(I)}if(h.ik)for(T=0;T<h.ik.length;T++){var G=h.ik[T];(I=new t.IkConstraintData(G.name)).order=this.getValue(G,"order",0),I.skinRequired=this.getValue(G,"skin",!1);for(var Y=0;Y<G.bones.length;Y++){D=G.bones[Y];if(null==(W=a.findBone(D)))throw new Error("IK bone not found: "+D);I.bones.push(W)}var X=G.target;if(I.target=a.findBone(X),null==I.target)throw new Error("IK target bone not found: "+X);I.mix=this.getValue(G,"mix",1),I.softness=this.getValue(G,"softness",0)*o,I.bendDirection=this.getValue(G,"bendPositive",!0)?1:-1,I.compress=this.getValue(G,"compress",!1),I.stretch=this.getValue(G,"stretch",!1),I.uniform=this.getValue(G,"uniform",!1),a.ikConstraints.push(I)}if(h.transform)for(T=0;T<h.transform.length;T++){G=h.transform[T];(I=new t.TransformConstraintData(G.name)).order=this.getValue(G,"order",0),I.skinRequired=this.getValue(G,"skin",!1);for(Y=0;Y<G.bones.length;Y++){D=G.bones[Y];if(null==(W=a.findBone(D)))throw new Error("Transform constraint bone not found: "+D);I.bones.push(W)}X=G.target;if(I.target=a.findBone(X),null==I.target)throw new Error("Transform constraint target bone not found: "+X);I.local=this.getValue(G,"local",!1),I.relative=this.getValue(G,"relative",!1),I.offsetRotation=this.getValue(G,"rotation",0),I.offsetX=this.getValue(G,"x",0)*o,I.offsetY=this.getValue(G,"y",0)*o,I.offsetScaleX=this.getValue(G,"scaleX",0),I.offsetScaleY=this.getValue(G,"scaleY",0),I.offsetShearY=this.getValue(G,"shearY",0),I.rotateMix=this.getValue(G,"rotateMix",1),I.translateMix=this.getValue(G,"translateMix",1),I.scaleMix=this.getValue(G,"scaleMix",1),I.shearMix=this.getValue(G,"shearMix",1),a.transformConstraints.push(I)}if(h.path)for(T=0;T<h.path.length;T++){G=h.path[T];(I=new t.PathConstraintData(G.name)).order=this.getValue(G,"order",0),I.skinRequired=this.getValue(G,"skin",!1);for(Y=0;Y<G.bones.length;Y++){D=G.bones[Y];if(null==(W=a.findBone(D)))throw new Error("Transform constraint bone not found: "+D);I.bones.push(W)}X=G.target;if(I.target=a.findSlot(X),null==I.target)throw new Error("Path target slot not found: "+X);I.positionMode=SkeletonJson.positionModeFromString(this.getValue(G,"positionMode","percent")),I.spacingMode=SkeletonJson.spacingModeFromString(this.getValue(G,"spacingMode","length")),I.rotateMode=SkeletonJson.rotateModeFromString(this.getValue(G,"rotateMode","tangent")),I.offsetRotation=this.getValue(G,"rotation",0),I.position=this.getValue(G,"position",0),I.positionMode==t.PositionMode.Fixed&&(I.position*=o),I.spacing=this.getValue(G,"spacing",0),I.spacingMode!=t.SpacingMode.Length&&I.spacingMode!=t.SpacingMode.Fixed||(I.spacing*=o),I.rotateMix=this.getValue(G,"rotateMix",1),I.translateMix=this.getValue(G,"translateMix",1),a.pathConstraints.push(I)}if(h.skins)for(T=0;T<h.skins.length;T++){var U=h.skins[T],z=new t.Skin(U.name);if(U.bones)for(var V=0;V<U.bones.length;V++){var W;if(null==(W=a.findBone(U.bones[V])))throw new Error("Skin bone not found: "+U.bones[T]);z.bones.push(W)}if(U.ik)for(V=0;V<U.ik.length;V++){if(null==(H=a.findIkConstraint(U.ik[V])))throw new Error("Skin IK constraint not found: "+U.ik[T]);z.constraints.push(H)}if(U.transform)for(V=0;V<U.transform.length;V++){if(null==(H=a.findTransformConstraint(U.transform[V])))throw new Error("Skin transform constraint not found: "+U.transform[T]);z.constraints.push(H)}if(U.path)for(V=0;V<U.path.length;V++){var H;if(null==(H=a.findPathConstraint(U.path[V])))throw new Error("Skin path constraint not found: "+U.path[T]);z.constraints.push(H)}for(var O in U.attachments){var q=a.findSlot(O);if(null==q)throw new Error("Slot not found: "+O);var Z=U.attachments[O];for(var K in Z){var J=this.readAttachment(Z[K],z,q.index,K,a);null!=J&&z.setAttachment(q.index,K,J)}}a.skins.push(z),"default"==z.name&&(a.defaultSkin=z)}T=0;for(var Q=this.linkedMeshes.length;T<Q;T++){var $=this.linkedMeshes[T];if(null==(z=null==$.skin?a.defaultSkin:a.findSkin($.skin)))throw new Error("Skin not found: "+$.skin);var tt=z.getAttachment($.slotIndex,$.parent);if(null==tt)throw new Error("Parent mesh not found: "+$.parent);$.mesh.deformAttachment=$.inheritDeform?tt:$.mesh,$.mesh.setParentMesh(tt),$.mesh.updateUVs()}if(this.linkedMeshes.length=0,h.events)for(var et in h.events){var it=h.events[et];(I=new t.EventData(et)).intValue=this.getValue(it,"int",0),I.floatValue=this.getValue(it,"float",0),I.stringValue=this.getValue(it,"string",""),I.audioPath=this.getValue(it,"audio",null),null!=I.audioPath&&(I.volume=this.getValue(it,"volume",1),I.balance=this.getValue(it,"balance",0)),a.events.push(I)}if(h.animations)for(var nt in h.animations){var rt=h.animations[nt];this.readAnimation(rt,nt,a)}return a},SkeletonJson.prototype.readAttachment=function(r,a,h,d,T){var S=this.scale;switch(d=this.getValue(r,"name",d),this.getValue(r,"type","region")){case"region":var A=this.getValue(r,"path",d),P=this.attachmentLoader.newRegionAttachment(a,d,A);return null==P?null:(P.path=A,P.x=this.getValue(r,"x",0)*S,P.y=this.getValue(r,"y",0)*S,P.scaleX=this.getValue(r,"scaleX",1),P.scaleY=this.getValue(r,"scaleY",1),P.rotation=this.getValue(r,"rotation",0),P.width=r.width*S,P.height=r.height*S,null!=(V=this.getValue(r,"color",null))&&P.color.setFromString(V),P.updateOffset(),P);case"boundingbox":var O=this.attachmentLoader.newBoundingBoxAttachment(a,d);return null==O?null:(this.readVertices(r,O,r.vertexCount<<1),null!=(V=this.getValue(r,"color",null))&&O.color.setFromString(V),O);case"mesh":case"linkedmesh":A=this.getValue(r,"path",d);var D=this.attachmentLoader.newMeshAttachment(a,d,A);if(null==D)return null;D.path=A,null!=(V=this.getValue(r,"color",null))&&D.color.setFromString(V),D.width=this.getValue(r,"width",0)*S,D.height=this.getValue(r,"height",0)*S;var L=this.getValue(r,"parent",null);if(null!=L)return this.linkedMeshes.push(new o(D,this.getValue(r,"skin",null),h,L,this.getValue(r,"deform",!0))),D;var I=r.uvs;return this.readVertices(r,D,I.length),D.triangles=r.triangles,D.regionUVs=I,D.updateUVs(),D.edges=this.getValue(r,"edges",null),D.hullLength=2*this.getValue(r,"hull",0),D;case"path":if(null==(A=this.attachmentLoader.newPathAttachment(a,d)))return null;A.closed=this.getValue(r,"closed",!1),A.constantSpeed=this.getValue(r,"constantSpeed",!0);var B=r.vertexCount;this.readVertices(r,A,B<<1);for(var N=t.Utils.newArray(B/3,0),G=0;G<r.lengths.length;G++)N[G]=r.lengths[G]*S;return A.lengths=N,null!=(V=this.getValue(r,"color",null))&&A.color.setFromString(V),A;case"point":var Y=this.attachmentLoader.newPointAttachment(a,d);return null==Y?null:(Y.x=this.getValue(r,"x",0)*S,Y.y=this.getValue(r,"y",0)*S,Y.rotation=this.getValue(r,"rotation",0),null!=(V=this.getValue(r,"color",null))&&Y.color.setFromString(V),Y);case"clipping":var X=this.attachmentLoader.newClippingAttachment(a,d);if(null==X)return null;var U=this.getValue(r,"end",null);if(null!=U){var z=T.findSlot(U);if(null==z)throw new Error("Clipping end slot not found: "+U);X.endSlot=z}var V;B=r.vertexCount;return this.readVertices(r,X,B<<1),null!=(V=this.getValue(r,"color",null))&&X.color.setFromString(V),X}return null},SkeletonJson.prototype.readVertices=function(r,o,a){var h=this.scale;o.worldVerticesLength=a;var d=r.vertices;if(a!=d.length){var T=new Array,S=new Array;for(D=0,L=d.length;D<L;){var A=d[D++];S.push(A);for(var P=D+4*A;D<P;D+=4)S.push(d[D]),T.push(d[D+1]*h),T.push(d[D+2]*h),T.push(d[D+3])}o.bones=S,o.vertices=t.Utils.toFloatArray(T)}else{var O=t.Utils.toFloatArray(d);if(1!=h)for(var D=0,L=d.length;D<L;D++)O[D]*=h;o.vertices=O}},SkeletonJson.prototype.readAnimation=function(r,o,a){var h=this.scale,d=new Array,T=0;if(r.slots)for(var S in r.slots){var A=r.slots[S];if(-1==(Tt=a.findSlotIndex(S)))throw new Error("Slot not found: "+S);for(var P in A){var O=A[P];if("attachment"==P){(z=new t.AttachmentTimeline(O.length)).slotIndex=Tt;for(var D=0,L=0;L<O.length;L++){var I=O[L];z.setFrame(D++,this.getValue(I,"time",0),I.name)}d.push(z),T=Math.max(T,z.frames[z.getFrameCount()-1])}else if("color"==P){(z=new t.ColorTimeline(O.length)).slotIndex=Tt;for(D=0,L=0;L<O.length;L++){I=O[L];var B=new t.Color;B.setFromString(I.color),z.setFrame(D,this.getValue(I,"time",0),B.r,B.g,B.b,B.a),this.readCurve(I,z,D),D++}d.push(z),T=Math.max(T,z.frames[(z.getFrameCount()-1)*t.ColorTimeline.ENTRIES])}else{if("twoColor"!=P)throw new Error("Invalid timeline type for a slot: "+P+" ("+S+")");(z=new t.TwoColorTimeline(O.length)).slotIndex=Tt;for(D=0,L=0;L<O.length;L++){I=O[L];var N=new t.Color,G=new t.Color;N.setFromString(I.light),G.setFromString(I.dark),z.setFrame(D,this.getValue(I,"time",0),N.r,N.g,N.b,N.a,G.r,G.g,G.b),this.readCurve(I,z,D),D++}d.push(z),T=Math.max(T,z.frames[(z.getFrameCount()-1)*t.TwoColorTimeline.ENTRIES])}}}if(r.bones)for(var Y in r.bones){var X=r.bones[Y],U=a.findBoneIndex(Y);if(-1==U)throw new Error("Bone not found: "+Y);for(var P in X){O=X[P];if("rotate"===P){(z=new t.RotateTimeline(O.length)).boneIndex=U;for(D=0,L=0;L<O.length;L++){I=O[L];z.setFrame(D,this.getValue(I,"time",0),this.getValue(I,"angle",0)),this.readCurve(I,z,D),D++}d.push(z),T=Math.max(T,z.frames[(z.getFrameCount()-1)*t.RotateTimeline.ENTRIES])}else{if("translate"!==P&&"scale"!==P&&"shear"!==P)throw new Error("Invalid timeline type for a bone: "+P+" ("+Y+")");var z=null,V=1,W=0;"scale"===P?(z=new t.ScaleTimeline(O.length),W=1):"shear"===P?z=new t.ShearTimeline(O.length):(z=new t.TranslateTimeline(O.length),V=h),z.boneIndex=U;for(D=0,L=0;L<O.length;L++){I=O[L];var H=this.getValue(I,"x",W),q=this.getValue(I,"y",W);z.setFrame(D,this.getValue(I,"time",0),H*V,q*V),this.readCurve(I,z,D),D++}d.push(z),T=Math.max(T,z.frames[(z.getFrameCount()-1)*t.TranslateTimeline.ENTRIES])}}}if(r.ik)for(var Z in r.ik){var K=r.ik[Z],J=a.findIkConstraint(Z);(z=new t.IkConstraintTimeline(K.length)).ikConstraintIndex=a.ikConstraints.indexOf(J);for(D=0,L=0;L<K.length;L++){I=K[L];z.setFrame(D,this.getValue(I,"time",0),this.getValue(I,"mix",1),this.getValue(I,"softness",0)*h,this.getValue(I,"bendPositive",!0)?1:-1,this.getValue(I,"compress",!1),this.getValue(I,"stretch",!1)),this.readCurve(I,z,D),D++}d.push(z),T=Math.max(T,z.frames[(z.getFrameCount()-1)*t.IkConstraintTimeline.ENTRIES])}if(r.transform)for(var Z in r.transform){K=r.transform[Z],J=a.findTransformConstraint(Z);(z=new t.TransformConstraintTimeline(K.length)).transformConstraintIndex=a.transformConstraints.indexOf(J);for(D=0,L=0;L<K.length;L++){I=K[L];z.setFrame(D,this.getValue(I,"time",0),this.getValue(I,"rotateMix",1),this.getValue(I,"translateMix",1),this.getValue(I,"scaleMix",1),this.getValue(I,"shearMix",1)),this.readCurve(I,z,D),D++}d.push(z),T=Math.max(T,z.frames[(z.getFrameCount()-1)*t.TransformConstraintTimeline.ENTRIES])}if(r.path)for(var Z in r.path){K=r.path[Z];var Q=a.findPathConstraintIndex(Z);if(-1==Q)throw new Error("Path constraint not found: "+Z);var $=a.pathConstraints[Q];for(var P in K){O=K[P];if("position"===P||"spacing"===P){z=null,V=1;"spacing"===P?(z=new t.PathConstraintSpacingTimeline(O.length),$.spacingMode!=t.SpacingMode.Length&&$.spacingMode!=t.SpacingMode.Fixed||(V=h)):(z=new t.PathConstraintPositionTimeline(O.length),$.positionMode==t.PositionMode.Fixed&&(V=h)),z.pathConstraintIndex=Q;for(D=0,L=0;L<O.length;L++){I=O[L];z.setFrame(D,this.getValue(I,"time",0),this.getValue(I,P,0)*V),this.readCurve(I,z,D),D++}d.push(z),T=Math.max(T,z.frames[(z.getFrameCount()-1)*t.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===P){(z=new t.PathConstraintMixTimeline(O.length)).pathConstraintIndex=Q;for(D=0,L=0;L<O.length;L++){I=O[L];z.setFrame(D,this.getValue(I,"time",0),this.getValue(I,"rotateMix",1),this.getValue(I,"translateMix",1)),this.readCurve(I,z,D),D++}d.push(z),T=Math.max(T,z.frames[(z.getFrameCount()-1)*t.PathConstraintMixTimeline.ENTRIES])}}}if(r.deform)for(var tt in r.deform){var et=r.deform[tt],it=a.findSkin(tt);if(null==it)throw new Error("Skin not found: "+tt);for(var S in et){A=et[S];if(-1==(Tt=a.findSlotIndex(S)))throw new Error("Slot not found: "+A.name);for(var P in A){O=A[P];var nt=it.getAttachment(Tt,P);if(null==nt)throw new Error("Deform attachment not found: "+O.name);var rt=null!=nt.bones,st=nt.vertices,ot=rt?st.length/3*2:st.length;(z=new t.DeformTimeline(O.length)).slotIndex=Tt,z.attachment=nt;D=0;for(var at=0;at<O.length;at++){I=O[at];var ht=void 0,lt=this.getValue(I,"vertices",null);if(null==lt)ht=rt?t.Utils.newFloatArray(ot):st;else{ht=t.Utils.newFloatArray(ot);var ut=this.getValue(I,"offset",0);if(t.Utils.arrayCopy(lt,0,ht,ut,lt.length),1!=h)for(var ct=(L=ut)+lt.length;L<ct;L++)ht[L]*=h;if(!rt)for(L=0;L<ot;L++)ht[L]+=st[L]}z.setFrame(D,this.getValue(I,"time",0),ht),this.readCurve(I,z,D),D++}d.push(z),T=Math.max(T,z.frames[z.getFrameCount()-1])}}}var dt=r.drawOrder;if(null==dt&&(dt=r.draworder),null!=dt){z=new t.DrawOrderTimeline(dt.length);var ft=a.slots.length;for(D=0,at=0;at<dt.length;at++){var pt=dt[at],gt=null,vt=this.getValue(pt,"offsets",null);if(null!=vt){gt=t.Utils.newArray(ft,-1);var mt=t.Utils.newArray(ft-vt.length,0),yt=0,xt=0;for(L=0;L<vt.length;L++){var Tt,bt=vt[L];if(-1==(Tt=a.findSlotIndex(bt.slot)))throw new Error("Slot not found: "+bt.slot);for(;yt!=Tt;)mt[xt++]=yt++;gt[yt+bt.offset]=yt++}for(;yt<ft;)mt[xt++]=yt++;for(L=ft-1;L>=0;L--)-1==gt[L]&&(gt[L]=mt[--xt])}z.setFrame(D++,this.getValue(pt,"time",0),gt)}d.push(z),T=Math.max(T,z.frames[z.getFrameCount()-1])}if(r.events){for(z=new t.EventTimeline(r.events.length),D=0,L=0;L<r.events.length;L++){var wt=r.events[L],St=a.findEvent(wt.name);if(null==St)throw new Error("Event not found: "+wt.name);var Ct=new t.Event(t.Utils.toSinglePrecision(this.getValue(wt,"time",0)),St);Ct.intValue=this.getValue(wt,"int",St.intValue),Ct.floatValue=this.getValue(wt,"float",St.floatValue),Ct.stringValue=this.getValue(wt,"string",St.stringValue),null!=Ct.data.audioPath&&(Ct.volume=this.getValue(wt,"volume",1),Ct.balance=this.getValue(wt,"balance",0)),z.setFrame(D++,Ct)}d.push(z),T=Math.max(T,z.frames[z.getFrameCount()-1])}if(isNaN(T))throw new Error("Error while parsing animation, duration is NaN");a.animations.push(new t.Animation(o,d,T))},SkeletonJson.prototype.readCurve=function(t,r,o){if(t.hasOwnProperty("curve"))if("stepped"==t.curve)r.setStepped(o);else{var a=t.curve;r.setCurve(o,a,this.getValue(t,"c2",0),this.getValue(t,"c3",1),this.getValue(t,"c4",1))}},SkeletonJson.prototype.getValue=function(t,r,o){return void 0!==t[r]?t[r]:o},SkeletonJson.blendModeFromString=function(r){if("normal"==(r=r.toLowerCase()))return t.BlendMode.Normal;if("additive"==r)return t.BlendMode.Additive;if("multiply"==r)return t.BlendMode.Multiply;if("screen"==r)return t.BlendMode.Screen;throw new Error("Unknown blend mode: "+r)},SkeletonJson.positionModeFromString=function(r){if("fixed"==(r=r.toLowerCase()))return t.PositionMode.Fixed;if("percent"==r)return t.PositionMode.Percent;throw new Error("Unknown position mode: "+r)},SkeletonJson.spacingModeFromString=function(r){if("length"==(r=r.toLowerCase()))return t.SpacingMode.Length;if("fixed"==r)return t.SpacingMode.Fixed;if("percent"==r)return t.SpacingMode.Percent;throw new Error("Unknown position mode: "+r)},SkeletonJson.rotateModeFromString=function(r){if("tangent"==(r=r.toLowerCase()))return t.RotateMode.Tangent;if("chain"==r)return t.RotateMode.Chain;if("chainscale"==r)return t.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+r)},SkeletonJson.transformModeFromString=function(r){if("normal"==(r=r.toLowerCase()))return t.TransformMode.Normal;if("onlytranslation"==r)return t.TransformMode.OnlyTranslation;if("norotationorreflection"==r)return t.TransformMode.NoRotationOrReflection;if("noscale"==r)return t.TransformMode.NoScale;if("noscaleorreflection"==r)return t.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+r)},SkeletonJson}();t.SkeletonJson=r;var o=function o(t,r,a,h,d){this.mesh=t,this.skin=r,this.slotIndex=a,this.parent=h,this.inheritDeform=d}}(a||(a={})),function(t){var r=function r(t,o,a){this.slotIndex=t,this.name=o,this.attachment=a};t.SkinEntry=r;var o=function(){function Skin(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,null==t)throw new Error("name cannot be null.");this.name=t}return Skin.prototype.setAttachment=function(t,r,o){if(null==o)throw new Error("attachment cannot be null.");var a=this.attachments;t>=a.length&&(a.length=t+1),a[t]||(a[t]={}),a[t][r]=o},Skin.prototype.addSkin=function(t){for(var r=0;r<t.bones.length;r++){for(var o=t.bones[r],a=!1,h=0;h<this.bones.length;h++)if(this.bones[h]==o){a=!0;break}a||this.bones.push(o)}for(r=0;r<t.constraints.length;r++){var d=t.constraints[r];for(a=!1,h=0;h<this.constraints.length;h++)if(this.constraints[h]==d){a=!0;break}a||this.constraints.push(d)}var T=t.getAttachments();for(r=0;r<T.length;r++){var S=T[r];this.setAttachment(S.slotIndex,S.name,S.attachment)}},Skin.prototype.copySkin=function(r){for(var o=0;o<r.bones.length;o++){for(var a=r.bones[o],h=!1,d=0;d<this.bones.length;d++)if(this.bones[d]==a){h=!0;break}h||this.bones.push(a)}for(o=0;o<r.constraints.length;o++){var T=r.constraints[o];for(h=!1,d=0;d<this.constraints.length;d++)if(this.constraints[d]==T){h=!0;break}h||this.constraints.push(T)}var S=r.getAttachments();for(o=0;o<S.length;o++){var A=S[o];null!=A.attachment&&(A.attachment instanceof t.MeshAttachment?(A.attachment=A.attachment.newLinkedMesh(),this.setAttachment(A.slotIndex,A.name,A.attachment)):(A.attachment=A.attachment.copy(),this.setAttachment(A.slotIndex,A.name,A.attachment)))}},Skin.prototype.getAttachment=function(t,r){var o=this.attachments[t];return o?o[r]:null},Skin.prototype.removeAttachment=function(t,r){var o=this.attachments[t];o&&(o[r]=null)},Skin.prototype.getAttachments=function(){for(var t=new Array,o=0;o<this.attachments.length;o++){var a=this.attachments[o];if(a)for(var h in a){var d=a[h];d&&t.push(new r(o,h,d))}}return t},Skin.prototype.getAttachmentsForSlot=function(t,o){var a=this.attachments[t];if(a)for(var h in a){var d=a[h];d&&o.push(new r(t,h,d))}},Skin.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},Skin.prototype.attachAll=function(t,r){for(var o=0,a=0;a<t.slots.length;a++){var h=t.slots[a],d=h.getAttachment();if(d&&o<r.attachments.length){var T=r.attachments[o];for(var S in T){if(d==T[S]){var A=this.getAttachment(o,S);null!=A&&h.setAttachment(A);break}}}o++}},Skin}();t.Skin=o}(a||(a={})),function(t){var r=function(){function Slot(r,o){if(this.deform=new Array,null==r)throw new Error("data cannot be null.");if(null==o)throw new Error("bone cannot be null.");this.data=r,this.bone=o,this.color=new t.Color,this.darkColor=null==r.darkColor?null:new t.Color,this.setToSetupPose()}return Slot.prototype.getSkeleton=function(){return this.bone.skeleton},Slot.prototype.getAttachment=function(){return this.attachment},Slot.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},Slot.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},Slot.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},Slot.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},Slot}();t.Slot=r}(a||(a={})),function(t){var r=function r(o,a,h){if(this.color=new t.Color(1,1,1,1),o<0)throw new Error("index must be >= 0.");if(null==a)throw new Error("name cannot be null.");if(null==h)throw new Error("boneData cannot be null.");this.index=o,this.name=a,this.boneData=h};t.SlotData=r}(a||(a={})),function(t){var r,o,a=function(){function Texture(t){this._image=t}return Texture.prototype.getImage=function(){return this._image},Texture.filterFromString=function(t){switch(t.toLowerCase()){case"nearest":return r.Nearest;case"linear":return r.Linear;case"mipmap":return r.MipMap;case"mipmapnearestnearest":return r.MipMapNearestNearest;case"mipmaplinearnearest":return r.MipMapLinearNearest;case"mipmapnearestlinear":return r.MipMapNearestLinear;case"mipmaplinearlinear":return r.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}},Texture.wrapFromString=function(t){switch(t.toLowerCase()){case"mirroredtepeat":return o.MirroredRepeat;case"clamptoedge":return o.ClampToEdge;case"repeat":return o.Repeat;default:throw new Error("Unknown texture wrap "+t)}},Texture}();t.Texture=a,function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(r=t.TextureFilter||(t.TextureFilter={})),function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"}(o=t.TextureWrap||(t.TextureWrap={}));var d=function d(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.rotate=!1,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0};t.TextureRegion=d;var T=function(t){function FakeTexture(){return null!==t&&t.apply(this,arguments)||this}return h(FakeTexture,t),FakeTexture.prototype.setFilters=function(t,r){},FakeTexture.prototype.setWraps=function(t,r){},FakeTexture.prototype.dispose=function(){},FakeTexture}(a);t.FakeTexture=T}(a||(a={})),function(t){var r=function(){function TextureAtlas(t,r){this.pages=new Array,this.regions=new Array,this.load(t,r)}return TextureAtlas.prototype.load=function(r,h){if(null==h)throw new Error("textureLoader cannot be null.");for(var T=new o(r),S=new Array(4),A=null;;){var P=T.readLine();if(null==P)break;if(0==(P=P.trim()).length)A=null;else if(A){var O=new d;O.name=P,O.page=A;var D=T.readValue();"true"==D.toLocaleLowerCase()?O.degrees=90:"false"==D.toLocaleLowerCase()?O.degrees=0:O.degrees=parseFloat(D),O.rotate=90==O.degrees,T.readTuple(S);var L=parseInt(S[0]),I=parseInt(S[1]);T.readTuple(S);var B=parseInt(S[0]),N=parseInt(S[1]);O.u=L/A.width,O.v=I/A.height,O.rotate?(O.u2=(L+N)/A.width,O.v2=(I+B)/A.height):(O.u2=(L+B)/A.width,O.v2=(I+N)/A.height),O.x=L,O.y=I,O.width=Math.abs(B),O.height=Math.abs(N),4==T.readTuple(S)&&4==T.readTuple(S)&&T.readTuple(S),O.originalWidth=parseInt(S[0]),O.originalHeight=parseInt(S[1]),T.readTuple(S),O.offsetX=parseInt(S[0]),O.offsetY=parseInt(S[1]),O.index=parseInt(T.readValue()),O.texture=A.texture,this.regions.push(O)}else{(A=new a).name=P,2==T.readTuple(S)&&(A.width=parseInt(S[0]),A.height=parseInt(S[1]),T.readTuple(S)),T.readTuple(S),A.minFilter=t.Texture.filterFromString(S[0]),A.magFilter=t.Texture.filterFromString(S[1]);var G=T.readValue();A.uWrap=t.TextureWrap.ClampToEdge,A.vWrap=t.TextureWrap.ClampToEdge,"x"==G?A.uWrap=t.TextureWrap.Repeat:"y"==G?A.vWrap=t.TextureWrap.Repeat:"xy"==G&&(A.uWrap=A.vWrap=t.TextureWrap.Repeat),A.texture=h(P),A.texture.setFilters(A.minFilter,A.magFilter),A.texture.setWraps(A.uWrap,A.vWrap),A.width=A.texture.getImage().width,A.height=A.texture.getImage().height,this.pages.push(A)}}},TextureAtlas.prototype.findRegion=function(t){for(var r=0;r<this.regions.length;r++)if(this.regions[r].name==t)return this.regions[r];return null},TextureAtlas.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].texture.dispose()},TextureAtlas}();t.TextureAtlas=r;var o=function(){function TextureAtlasReader(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}return TextureAtlasReader.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},TextureAtlasReader.prototype.readValue=function(){var t=this.readLine(),r=t.indexOf(":");if(-1==r)throw new Error("Invalid line: "+t);return t.substring(r+1).trim()},TextureAtlasReader.prototype.readTuple=function(t){var r=this.readLine(),o=r.indexOf(":");if(-1==o)throw new Error("Invalid line: "+r);for(var a=0,h=o+1;a<3;a++){var d=r.indexOf(",",h);if(-1==d)break;t[a]=r.substr(h,d-h).trim(),h=d+1}return t[a]=r.substring(h).trim(),a+1},TextureAtlasReader}(),a=function a(){};t.TextureAtlasPage=a;var d=function(t){function TextureAtlasRegion(){return null!==t&&t.apply(this,arguments)||this}return h(TextureAtlasRegion,t),TextureAtlasRegion}(t.TextureRegion);t.TextureAtlasRegion=d}(a||(a={})),function(t){var r=function(){function TransformConstraint(r,o){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new t.Vector2,this.active=!1,null==r)throw new Error("data cannot be null.");if(null==o)throw new Error("skeleton cannot be null.");this.data=r,this.rotateMix=r.rotateMix,this.translateMix=r.translateMix,this.scaleMix=r.scaleMix,this.shearMix=r.shearMix,this.bones=new Array;for(var a=0;a<r.bones.length;a++)this.bones.push(o.findBone(r.bones[a].name));this.target=o.findBone(r.target.name)}return TransformConstraint.prototype.isActive=function(){return this.active},TransformConstraint.prototype.apply=function(){this.update()},TransformConstraint.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},TransformConstraint.prototype.applyAbsoluteWorld=function(){for(var r=this.rotateMix,o=this.translateMix,a=this.scaleMix,h=this.shearMix,d=this.target,T=d.a,S=d.b,A=d.c,P=d.d,O=T*P-S*A>0?t.MathUtils.degRad:-t.MathUtils.degRad,D=this.data.offsetRotation*O,L=this.data.offsetShearY*O,I=this.bones,B=0,N=I.length;B<N;B++){var G=I[B],Y=!1;if(0!=r){var X=G.a,U=G.b,z=G.c,V=G.d;(J=Math.atan2(A,T)-Math.atan2(z,X)+D)>t.MathUtils.PI?J-=t.MathUtils.PI2:J<-t.MathUtils.PI&&(J+=t.MathUtils.PI2),J*=r;var W=Math.cos(J),H=Math.sin(J);G.a=W*X-H*z,G.b=W*U-H*V,G.c=H*X+W*z,G.d=H*U+W*V,Y=!0}if(0!=o){var q=this.temp;d.localToWorld(q.set(this.data.offsetX,this.data.offsetY)),G.worldX+=(q.x-G.worldX)*o,G.worldY+=(q.y-G.worldY)*o,Y=!0}if(a>0){var Z=Math.sqrt(G.a*G.a+G.c*G.c),K=Math.sqrt(T*T+A*A);Z>1e-5&&(Z=(Z+(K-Z+this.data.offsetScaleX)*a)/Z),G.a*=Z,G.c*=Z,Z=Math.sqrt(G.b*G.b+G.d*G.d),K=Math.sqrt(S*S+P*P),Z>1e-5&&(Z=(Z+(K-Z+this.data.offsetScaleY)*a)/Z),G.b*=Z,G.d*=Z,Y=!0}if(h>0){U=G.b,V=G.d;var J,Q=Math.atan2(V,U);(J=Math.atan2(P,S)-Math.atan2(A,T)-(Q-Math.atan2(G.c,G.a)))>t.MathUtils.PI?J-=t.MathUtils.PI2:J<-t.MathUtils.PI&&(J+=t.MathUtils.PI2),J=Q+(J+L)*h;Z=Math.sqrt(U*U+V*V);G.b=Math.cos(J)*Z,G.d=Math.sin(J)*Z,Y=!0}Y&&(G.appliedValid=!1)}},TransformConstraint.prototype.applyRelativeWorld=function(){for(var r=this.rotateMix,o=this.translateMix,a=this.scaleMix,h=this.shearMix,d=this.target,T=d.a,S=d.b,A=d.c,P=d.d,O=T*P-S*A>0?t.MathUtils.degRad:-t.MathUtils.degRad,D=this.data.offsetRotation*O,L=this.data.offsetShearY*O,I=this.bones,B=0,N=I.length;B<N;B++){var G=I[B],Y=!1;if(0!=r){var X=G.a,U=G.b,z=G.c,V=G.d;(K=Math.atan2(A,T)+D)>t.MathUtils.PI?K-=t.MathUtils.PI2:K<-t.MathUtils.PI&&(K+=t.MathUtils.PI2),K*=r;var W=Math.cos(K),H=Math.sin(K);G.a=W*X-H*z,G.b=W*U-H*V,G.c=H*X+W*z,G.d=H*U+W*V,Y=!0}if(0!=o){var q=this.temp;d.localToWorld(q.set(this.data.offsetX,this.data.offsetY)),G.worldX+=q.x*o,G.worldY+=q.y*o,Y=!0}if(a>0){var Z=(Math.sqrt(T*T+A*A)-1+this.data.offsetScaleX)*a+1;G.a*=Z,G.c*=Z,Z=(Math.sqrt(S*S+P*P)-1+this.data.offsetScaleY)*a+1,G.b*=Z,G.d*=Z,Y=!0}if(h>0){var K;(K=Math.atan2(P,S)-Math.atan2(A,T))>t.MathUtils.PI?K-=t.MathUtils.PI2:K<-t.MathUtils.PI&&(K+=t.MathUtils.PI2);U=G.b,V=G.d;K=Math.atan2(V,U)+(K-t.MathUtils.PI/2+L)*h;Z=Math.sqrt(U*U+V*V);G.b=Math.cos(K)*Z,G.d=Math.sin(K)*Z,Y=!0}Y&&(G.appliedValid=!1)}},TransformConstraint.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,r=this.translateMix,o=this.scaleMix,a=this.shearMix,h=this.target;h.appliedValid||h.updateAppliedTransform();for(var d=this.bones,T=0,S=d.length;T<S;T++){var A=d[T];A.appliedValid||A.updateAppliedTransform();var P=A.arotation;if(0!=t){var O=h.arotation-P+this.data.offsetRotation;P+=(O-=360*(16384-(16384.499999999996-O/360|0)))*t}var D=A.ax,L=A.ay;0!=r&&(D+=(h.ax-D+this.data.offsetX)*r,L+=(h.ay-L+this.data.offsetY)*r);var I=A.ascaleX,B=A.ascaleY;0!=o&&(I>1e-5&&(I=(I+(h.ascaleX-I+this.data.offsetScaleX)*o)/I),B>1e-5&&(B=(B+(h.ascaleY-B+this.data.offsetScaleY)*o)/B));var N=A.ashearY;if(0!=a){O=h.ashearY-N+this.data.offsetShearY;O-=360*(16384-(16384.499999999996-O/360|0)),A.shearY+=O*a}A.updateWorldTransformWith(D,L,P,I,B,A.ashearX,N)}},TransformConstraint.prototype.applyRelativeLocal=function(){var t=this.rotateMix,r=this.translateMix,o=this.scaleMix,a=this.shearMix,h=this.target;h.appliedValid||h.updateAppliedTransform();for(var d=this.bones,T=0,S=d.length;T<S;T++){var A=d[T];A.appliedValid||A.updateAppliedTransform();var P=A.arotation;0!=t&&(P+=(h.arotation+this.data.offsetRotation)*t);var O=A.ax,D=A.ay;0!=r&&(O+=(h.ax+this.data.offsetX)*r,D+=(h.ay+this.data.offsetY)*r);var L=A.ascaleX,I=A.ascaleY;0!=o&&(L>1e-5&&(L*=(h.ascaleX-1+this.data.offsetScaleX)*o+1),I>1e-5&&(I*=(h.ascaleY-1+this.data.offsetScaleY)*o+1));var B=A.ashearY;0!=a&&(B+=(h.ashearY+this.data.offsetShearY)*a),A.updateWorldTransformWith(O,D,P,L,I,A.ashearX,B)}},TransformConstraint}();t.TransformConstraint=r}(a||(a={})),function(t){var r=function(t){function TransformConstraintData(r){var o=t.call(this,r,0,!1)||this;return o.bones=new Array,o.rotateMix=0,o.translateMix=0,o.scaleMix=0,o.shearMix=0,o.offsetRotation=0,o.offsetX=0,o.offsetY=0,o.offsetScaleX=0,o.offsetScaleY=0,o.offsetShearY=0,o.relative=!1,o.local=!1,o}return h(TransformConstraintData,t),TransformConstraintData}(t.ConstraintData);t.TransformConstraintData=r}(a||(a={})),function(t){var r=function(){function Triangulator(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new t.Pool((function(){return new Array})),this.polygonIndicesPool=new t.Pool((function(){return new Array}))}return Triangulator.prototype.triangulate=function(t){var r=t,o=t.length>>1,a=this.indicesArray;a.length=0;for(var h=0;h<o;h++)a[h]=h;var d=this.isConcaveArray;d.length=0;h=0;for(var T=o;h<T;++h)d[h]=Triangulator.isConcave(h,o,r,a);var S=this.triangles;for(S.length=0;o>3;){for(var A=o-1,P=(h=0,1);;){t:if(!d[h]){for(var O=a[A]<<1,D=a[h]<<1,L=a[P]<<1,I=r[O],B=r[O+1],N=r[D],G=r[D+1],Y=r[L],X=r[L+1],U=(P+1)%o;U!=A;U=(U+1)%o)if(d[U]){var z=a[U]<<1,V=r[z],W=r[z+1];if(Triangulator.positiveArea(Y,X,I,B,V,W)&&Triangulator.positiveArea(I,B,N,G,V,W)&&Triangulator.positiveArea(N,G,Y,X,V,W))break t}break}if(0==P){do{if(!d[h])break;h--}while(h>0);break}A=h,h=P,P=(P+1)%o}S.push(a[(o+h-1)%o]),S.push(a[h]),S.push(a[(h+1)%o]),a.splice(h,1),d.splice(h,1);var H=(--o+h-1)%o,q=h==o?0:h;d[H]=Triangulator.isConcave(H,o,r,a),d[q]=Triangulator.isConcave(q,o,r,a)}return 3==o&&(S.push(a[2]),S.push(a[0]),S.push(a[1])),S},Triangulator.prototype.decompose=function(t,r){var o=t,a=this.convexPolygons;this.polygonPool.freeAll(a),a.length=0;var h=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(h),h.length=0;var d=this.polygonIndicesPool.obtain();d.length=0;var T=this.polygonPool.obtain();T.length=0;for(var S=-1,A=0,P=0,O=r.length;P<O;P+=3){var D=r[P]<<1,L=r[P+1]<<1,I=r[P+2]<<1,B=o[D],N=o[D+1],G=o[L],Y=o[L+1],X=o[I],U=o[I+1],z=!1;if(S==D){var V=T.length-4,W=Triangulator.winding(T[V],T[V+1],T[V+2],T[V+3],X,U),H=Triangulator.winding(X,U,T[0],T[1],T[2],T[3]);W==A&&H==A&&(T.push(X),T.push(U),d.push(I),z=!0)}z||(T.length>0?(a.push(T),h.push(d)):(this.polygonPool.free(T),this.polygonIndicesPool.free(d)),(T=this.polygonPool.obtain()).length=0,T.push(B),T.push(N),T.push(G),T.push(Y),T.push(X),T.push(U),(d=this.polygonIndicesPool.obtain()).length=0,d.push(D),d.push(L),d.push(I),A=Triangulator.winding(B,N,G,Y,X,U),S=D)}T.length>0&&(a.push(T),h.push(d));for(P=0,O=a.length;P<O;P++)if(0!=(d=h[P]).length)for(var q=d[0],Z=d[d.length-1],K=(T=a[P])[V=T.length-4],J=T[V+1],Q=T[V+2],$=T[V+3],tt=T[0],et=T[1],it=T[2],nt=T[3],rt=Triangulator.winding(K,J,Q,$,tt,et),st=0;st<O;st++)if(st!=P){var ot=h[st];if(3==ot.length){var at=ot[0],ht=ot[1],lt=ot[2],ut=a[st];X=ut[ut.length-2],U=ut[ut.length-1];if(at==q&&ht==Z){W=Triangulator.winding(K,J,Q,$,X,U),H=Triangulator.winding(X,U,tt,et,it,nt);W==rt&&H==rt&&(ut.length=0,ot.length=0,T.push(X),T.push(U),d.push(lt),K=Q,J=$,Q=X,$=U,st=0)}}}for(P=a.length-1;P>=0;P--)0==(T=a[P]).length&&(a.splice(P,1),this.polygonPool.free(T),d=h[P],h.splice(P,1),this.polygonIndicesPool.free(d));return a},Triangulator.isConcave=function(t,r,o,a){var h=a[(r+t-1)%r]<<1,d=a[t]<<1,T=a[(t+1)%r]<<1;return!this.positiveArea(o[h],o[h+1],o[d],o[d+1],o[T],o[T+1])},Triangulator.positiveArea=function(t,r,o,a,h,d){return t*(d-a)+o*(r-d)+h*(a-r)>=0},Triangulator.winding=function(t,r,o,a,h,d){var T=o-t,S=a-r;return h*S-d*T+T*r-t*S>=0?1:-1},Triangulator}();t.Triangulator=r}(a||(a={})),function(t){var r=function(){function IntSet(){this.array=new Array}return IntSet.prototype.add=function(t){var r=this.contains(t);return this.array[0|t]=0|t,!r},IntSet.prototype.contains=function(t){return null!=this.array[0|t]},IntSet.prototype.remove=function(t){this.array[0|t]=void 0},IntSet.prototype.clear=function(){this.array.length=0},IntSet}();t.IntSet=r;var o=function(){function Color(t,r,o,a){void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),this.r=t,this.g=r,this.b=o,this.a=a}return Color.prototype.set=function(t,r,o,a){return this.r=t,this.g=r,this.b=o,this.a=a,this.clamp(),this},Color.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},Color.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255,this},Color.prototype.add=function(t,r,o,a){return this.r+=t,this.g+=r,this.b+=o,this.a+=a,this.clamp(),this},Color.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},Color.rgba8888ToColor=function(t,r){t.r=((4278190080&r)>>>24)/255,t.g=((16711680&r)>>>16)/255,t.b=((65280&r)>>>8)/255,t.a=(255&r)/255},Color.rgb888ToColor=function(t,r){t.r=((16711680&r)>>>16)/255,t.g=((65280&r)>>>8)/255,t.b=(255&r)/255},Color.WHITE=new Color(1,1,1,1),Color.RED=new Color(1,0,0,1),Color.GREEN=new Color(0,1,0,1),Color.BLUE=new Color(0,0,1,1),Color.MAGENTA=new Color(1,0,1,1),Color}();t.Color=o;var a=function(){function MathUtils(){}return MathUtils.clamp=function(t,r,o){return t<r?r:t>o?o:t},MathUtils.cosDeg=function(t){return Math.cos(t*MathUtils.degRad)},MathUtils.sinDeg=function(t){return Math.sin(t*MathUtils.degRad)},MathUtils.signum=function(t){return t>0?1:t<0?-1:0},MathUtils.toInt=function(t){return t>0?Math.floor(t):Math.ceil(t)},MathUtils.cbrt=function(t){var r=Math.pow(Math.abs(t),1/3);return t<0?-r:r},MathUtils.randomTriangular=function(t,r){return MathUtils.randomTriangularWith(t,r,.5*(t+r))},MathUtils.randomTriangularWith=function(t,r,o){var a=Math.random(),h=r-t;return a<=(o-t)/h?t+Math.sqrt(a*h*(o-t)):r-Math.sqrt((1-a)*h*(r-o))},MathUtils.PI=3.1415927,MathUtils.PI2=2*MathUtils.PI,MathUtils.radiansToDegrees=180/MathUtils.PI,MathUtils.radDeg=MathUtils.radiansToDegrees,MathUtils.degreesToRadians=MathUtils.PI/180,MathUtils.degRad=MathUtils.degreesToRadians,MathUtils}();t.MathUtils=a;var d=function(){function Interpolation(){}return Interpolation.prototype.apply=function(t,r,o){return t+(r-t)*this.applyInternal(o)},Interpolation}();t.Interpolation=d;var T=function(t){function Pow(r){var o=t.call(this)||this;return o.power=2,o.power=r,o}return h(Pow,t),Pow.prototype.applyInternal=function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1},Pow}(d);t.Pow=T;var S=function(t){function PowOut(r){return t.call(this,r)||this}return h(PowOut,t),PowOut.prototype.applyInternal=function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1},PowOut}(T);t.PowOut=S;var A=function(){function Utils(){}return Utils.arrayCopy=function(t,r,o,a,h){for(var d=r,T=a;d<r+h;d++,T++)o[T]=t[d]},Utils.setArraySize=function(t,r,o){void 0===o&&(o=0);var a=t.length;if(a==r)return t;if(t.length=r,a<r)for(var h=a;h<r;h++)t[h]=o;return t},Utils.ensureArrayCapacity=function(t,r,o){return void 0===o&&(o=0),t.length>=r?t:Utils.setArraySize(t,r,o)},Utils.newArray=function(t,r){for(var o=new Array(t),a=0;a<t;a++)o[a]=r;return o},Utils.newFloatArray=function(t){if(Utils.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);for(var r=new Array(t),o=0;o<r.length;o++)r[o]=0;return r},Utils.newShortArray=function(t){if(Utils.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);for(var r=new Array(t),o=0;o<r.length;o++)r[o]=0;return r},Utils.toFloatArray=function(t){return Utils.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t},Utils.toSinglePrecision=function(t){return Utils.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t},Utils.webkit602BugfixHelper=function(t,r){},Utils.contains=function(t,r,o){for(var a=0;a<t.length;a++)if(t[a]==r)return!0;return!1},Utils.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,Utils}();t.Utils=A;var P=function(){function DebugUtils(){}return DebugUtils.logBones=function(t){for(var r=0;r<t.bones.length;r++){var o=t.bones[r];console.log(o.data.name+", "+o.a+", "+o.b+", "+o.c+", "+o.d+", "+o.worldX+", "+o.worldY)}},DebugUtils}();t.DebugUtils=P;var O=function(){function Pool(t){this.items=new Array,this.instantiator=t}return Pool.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},Pool.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},Pool.prototype.freeAll=function(t){for(var r=0;r<t.length;r++)this.free(t[r])},Pool.prototype.clear=function(){this.items.length=0},Pool}();t.Pool=O;var D=function(){function Vector2(t,r){void 0===t&&(t=0),void 0===r&&(r=0),this.x=t,this.y=r}return Vector2.prototype.set=function(t,r){return this.x=t,this.y=r,this},Vector2.prototype.length=function(){var t=this.x,r=this.y;return Math.sqrt(t*t+r*r)},Vector2.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},Vector2}();t.Vector2=D;var L=function(){function TimeKeeper(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return TimeKeeper.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},TimeKeeper}();t.TimeKeeper=L;var I=function(){function WindowedMean(t){void 0===t&&(t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}return WindowedMean.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},WindowedMean.prototype.addValue=function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},WindowedMean.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,r=0;r<this.values.length;r++)t+=this.values[r];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0},WindowedMean}();t.WindowedMean=I}(a||(a={})),Math.fround||(Math.fround=(o=new Float32Array(1),function(t){return o[0]=t,o[0]})),function(t){var r=function r(t){if(null==t)throw new Error("name cannot be null.");this.name=t};t.Attachment=r;var o=function(r){function VertexAttachment(t){var o=r.call(this,t)||this;return o.id=(65535&VertexAttachment.nextID++)<<11,o.worldVerticesLength=0,o.deformAttachment=o,o}return h(VertexAttachment,r),VertexAttachment.prototype.computeWorldVertices=function(t,r,o,a,h,d){o=h+(o>>1)*d;var T=t.bone.skeleton,S=t.deform,A=this.vertices,P=this.bones;if(null!=P){for(var O=0,D=0,L=0;L<r;L+=2){O+=(G=P[O])+1,D+=G}var I=T.bones;if(0==S.length)for(Q=h,q=3*D;Q<o;Q+=d){var B=0,N=0,G=P[O++];for(G+=O;O<G;O++,q+=3){z=I[P[O]],$=A[q],tt=A[q+1];var Y=A[q+2];B+=($*z.a+tt*z.b+z.worldX)*Y,N+=($*z.c+tt*z.d+z.worldY)*Y}a[Q]=B,a[Q+1]=N}else for(var X=S,U=(Q=h,q=3*D,D<<1);Q<o;Q+=d){B=0,N=0,G=P[O++];for(G+=O;O<G;O++,q+=3,U+=2){z=I[P[O]],$=A[q]+X[U],tt=A[q+1]+X[U+1],Y=A[q+2];B+=($*z.a+tt*z.b+z.worldX)*Y,N+=($*z.c+tt*z.d+z.worldY)*Y}a[Q]=B,a[Q+1]=N}}else{S.length>0&&(A=S);for(var z,V=(z=t.bone).worldX,W=z.worldY,H=z.a,q=z.b,Z=z.c,K=z.d,J=r,Q=h;Q<o;J+=2,Q+=d){var $=A[J],tt=A[J+1];a[Q]=$*H+tt*q+V,a[Q+1]=$*Z+tt*K+W}}},VertexAttachment.prototype.copyTo=function(r){null!=this.bones?(r.bones=new Array(this.bones.length),t.Utils.arrayCopy(this.bones,0,r.bones,0,this.bones.length)):r.bones=null,null!=this.vertices?(r.vertices=t.Utils.newFloatArray(this.vertices.length),t.Utils.arrayCopy(this.vertices,0,r.vertices,0,this.vertices.length)):r.vertices=null,r.worldVerticesLength=this.worldVerticesLength,r.deformAttachment=this.deformAttachment},VertexAttachment.nextID=0,VertexAttachment}(r);t.VertexAttachment=o}(a||(a={})),function(t){var r;(r=t.AttachmentType||(t.AttachmentType={}))[r.Region=0]="Region",r[r.BoundingBox=1]="BoundingBox",r[r.Mesh=2]="Mesh",r[r.LinkedMesh=3]="LinkedMesh",r[r.Path=4]="Path",r[r.Point=5]="Point",r[r.Clipping=6]="Clipping"}(a||(a={})),function(t){var r=function(r){function BoundingBoxAttachment(o){var a=r.call(this,o)||this;return a.color=new t.Color(1,1,1,1),a}return h(BoundingBoxAttachment,r),BoundingBoxAttachment.prototype.copy=function(){var t=new BoundingBoxAttachment(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t},BoundingBoxAttachment}(t.VertexAttachment);t.BoundingBoxAttachment=r}(a||(a={})),function(t){var r=function(r){function ClippingAttachment(o){var a=r.call(this,o)||this;return a.color=new t.Color(.2275,.2275,.8078,1),a}return h(ClippingAttachment,r),ClippingAttachment.prototype.copy=function(){var t=new ClippingAttachment(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t},ClippingAttachment}(t.VertexAttachment);t.ClippingAttachment=r}(a||(a={})),function(t){var r=function(r){function MeshAttachment(o){var a=r.call(this,o)||this;return a.color=new t.Color(1,1,1,1),a.tempColor=new t.Color(0,0,0,0),a}return h(MeshAttachment,r),MeshAttachment.prototype.updateUVs=function(){var r=this.regionUVs;null!=this.uvs&&this.uvs.length==r.length||(this.uvs=t.Utils.newFloatArray(r.length));var o=this.uvs,a=this.uvs.length,h=this.region.u,d=this.region.v,T=0,S=0;if(this.region instanceof t.TextureAtlasRegion){var A=this.region,P=A.texture.getImage().width,O=A.texture.getImage().height;switch(A.degrees){case 90:h-=(A.originalHeight-A.offsetY-A.height)/P,d-=(A.originalWidth-A.offsetX-A.width)/O,T=A.originalHeight/P,S=A.originalWidth/O;for(var D=0;D<a;D+=2)o[D]=h+r[D+1]*T,o[D+1]=d+(1-r[D])*S;return;case 180:h-=(A.originalWidth-A.offsetX-A.width)/P,d-=A.offsetY/O,T=A.originalWidth/P,S=A.originalHeight/O;for(D=0;D<a;D+=2)o[D]=h+(1-r[D])*T,o[D+1]=d+(1-r[D+1])*S;return;case 270:h-=A.offsetY/P,d-=A.offsetX/O,T=A.originalHeight/P,S=A.originalWidth/O;for(D=0;D<a;D+=2)o[D]=h+(1-r[D+1])*T,o[D+1]=d+r[D]*S;return}h-=A.offsetX/P,d-=(A.originalHeight-A.offsetY-A.height)/O,T=A.originalWidth/P,S=A.originalHeight/O}else null==this.region?(h=d=0,T=S=1):(T=this.region.u2-h,S=this.region.v2-d);for(D=0;D<a;D+=2)o[D]=h+r[D]*T,o[D+1]=d+r[D+1]*S},MeshAttachment.prototype.getParentMesh=function(){return this.parentMesh},MeshAttachment.prototype.setParentMesh=function(t){this.parentMesh=t,null!=t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},MeshAttachment.prototype.copy=function(){if(null!=this.parentMesh)return this.newLinkedMesh();var r=new MeshAttachment(this.name);return r.region=this.region,r.path=this.path,r.color.setFromColor(this.color),this.copyTo(r),r.regionUVs=new Array(this.regionUVs.length),t.Utils.arrayCopy(this.regionUVs,0,r.regionUVs,0,this.regionUVs.length),r.uvs=new Array(this.uvs.length),t.Utils.arrayCopy(this.uvs,0,r.uvs,0,this.uvs.length),r.triangles=new Array(this.triangles.length),t.Utils.arrayCopy(this.triangles,0,r.triangles,0,this.triangles.length),r.hullLength=this.hullLength,null!=this.edges&&(r.edges=new Array(this.edges.length),t.Utils.arrayCopy(this.edges,0,r.edges,0,this.edges.length)),r.width=this.width,r.height=this.height,r},MeshAttachment.prototype.newLinkedMesh=function(){var t=new MeshAttachment(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(null!=this.parentMesh?this.parentMesh:this),t.updateUVs(),t},MeshAttachment}(t.VertexAttachment);t.MeshAttachment=r}(a||(a={})),function(t){var r=function(r){function PathAttachment(o){var a=r.call(this,o)||this;return a.closed=!1,a.constantSpeed=!1,a.color=new t.Color(1,1,1,1),a}return h(PathAttachment,r),PathAttachment.prototype.copy=function(){var r=new PathAttachment(this.name);return this.copyTo(r),r.lengths=new Array(this.lengths.length),t.Utils.arrayCopy(this.lengths,0,r.lengths,0,this.lengths.length),r.closed=closed,r.constantSpeed=this.constantSpeed,r.color.setFromColor(this.color),r},PathAttachment}(t.VertexAttachment);t.PathAttachment=r}(a||(a={})),function(t){var r=function(r){function PointAttachment(o){var a=r.call(this,o)||this;return a.color=new t.Color(.38,.94,0,1),a}return h(PointAttachment,r),PointAttachment.prototype.computeWorldPosition=function(t,r){return r.x=this.x*t.a+this.y*t.b+t.worldX,r.y=this.x*t.c+this.y*t.d+t.worldY,r},PointAttachment.prototype.computeWorldRotation=function(r){var o=t.MathUtils.cosDeg(this.rotation),a=t.MathUtils.sinDeg(this.rotation),h=o*r.a+a*r.b,d=o*r.c+a*r.d;return Math.atan2(d,h)*t.MathUtils.radDeg},PointAttachment.prototype.copy=function(){var t=new PointAttachment(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t},PointAttachment}(t.VertexAttachment);t.PointAttachment=r}(a||(a={})),function(t){var r=function(r){function RegionAttachment(o){var a=r.call(this,o)||this;return a.x=0,a.y=0,a.scaleX=1,a.scaleY=1,a.rotation=0,a.width=0,a.height=0,a.color=new t.Color(1,1,1,1),a.offset=t.Utils.newFloatArray(8),a.uvs=t.Utils.newFloatArray(8),a.tempColor=new t.Color(1,1,1,1),a}return h(RegionAttachment,r),RegionAttachment.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,r=this.height/this.region.originalHeight*this.scaleY,o=-this.width/2*this.scaleX+this.region.offsetX*t,a=-this.height/2*this.scaleY+this.region.offsetY*r,h=o+this.region.width*t,d=a+this.region.height*r,T=this.rotation*Math.PI/180,S=Math.cos(T),A=Math.sin(T),P=o*S+this.x,O=o*A,D=a*S+this.y,L=a*A,I=h*S+this.x,B=h*A,N=d*S+this.y,G=d*A,Y=this.offset;Y[RegionAttachment.OX1]=P-L,Y[RegionAttachment.OY1]=D+O,Y[RegionAttachment.OX2]=P-G,Y[RegionAttachment.OY2]=N+O,Y[RegionAttachment.OX3]=I-G,Y[RegionAttachment.OY3]=N+B,Y[RegionAttachment.OX4]=I-L,Y[RegionAttachment.OY4]=D+B},RegionAttachment.prototype.setRegion=function(t){this.region=t;var r=this.uvs;t.rotate?(r[2]=t.u,r[3]=t.v2,r[4]=t.u,r[5]=t.v,r[6]=t.u2,r[7]=t.v,r[0]=t.u2,r[1]=t.v2):(r[0]=t.u,r[1]=t.v2,r[2]=t.u,r[3]=t.v,r[4]=t.u2,r[5]=t.v,r[6]=t.u2,r[7]=t.v2)},RegionAttachment.prototype.computeWorldVertices=function(t,r,o,a){var h=this.offset,d=t.worldX,T=t.worldY,S=t.a,A=t.b,P=t.c,O=t.d,D=0,L=0;D=h[RegionAttachment.OX1],L=h[RegionAttachment.OY1],r[o]=D*S+L*A+d,r[o+1]=D*P+L*O+T,o+=a,D=h[RegionAttachment.OX2],L=h[RegionAttachment.OY2],r[o]=D*S+L*A+d,r[o+1]=D*P+L*O+T,o+=a,D=h[RegionAttachment.OX3],L=h[RegionAttachment.OY3],r[o]=D*S+L*A+d,r[o+1]=D*P+L*O+T,o+=a,D=h[RegionAttachment.OX4],L=h[RegionAttachment.OY4],r[o]=D*S+L*A+d,r[o+1]=D*P+L*O+T},RegionAttachment.prototype.copy=function(){var r=new RegionAttachment(this.name);return r.region=this.region,r.rendererObject=this.rendererObject,r.path=this.path,r.x=this.x,r.y=this.y,r.scaleX=this.scaleX,r.scaleY=this.scaleY,r.rotation=this.rotation,r.width=this.width,r.height=this.height,t.Utils.arrayCopy(this.uvs,0,r.uvs,0,8),t.Utils.arrayCopy(this.offset,0,r.offset,0,8),r.color.setFromColor(this.color),r},RegionAttachment.OX1=0,RegionAttachment.OY1=1,RegionAttachment.OX2=2,RegionAttachment.OY2=3,RegionAttachment.OX3=4,RegionAttachment.OY3=5,RegionAttachment.OX4=6,RegionAttachment.OY4=7,RegionAttachment.X1=0,RegionAttachment.Y1=1,RegionAttachment.C1R=2,RegionAttachment.C1G=3,RegionAttachment.C1B=4,RegionAttachment.C1A=5,RegionAttachment.U1=6,RegionAttachment.V1=7,RegionAttachment.X2=8,RegionAttachment.Y2=9,RegionAttachment.C2R=10,RegionAttachment.C2G=11,RegionAttachment.C2B=12,RegionAttachment.C2A=13,RegionAttachment.U2=14,RegionAttachment.V2=15,RegionAttachment.X3=16,RegionAttachment.Y3=17,RegionAttachment.C3R=18,RegionAttachment.C3G=19,RegionAttachment.C3B=20,RegionAttachment.C3A=21,RegionAttachment.U3=22,RegionAttachment.V3=23,RegionAttachment.X4=24,RegionAttachment.Y4=25,RegionAttachment.C4R=26,RegionAttachment.C4G=27,RegionAttachment.C4B=28,RegionAttachment.C4A=29,RegionAttachment.U4=30,RegionAttachment.V4=31,RegionAttachment}(t.Attachment);t.RegionAttachment=r}(a||(a={})),function(t){var r=function(){function JitterEffect(t,r){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=r}return JitterEffect.prototype.begin=function(t){},JitterEffect.prototype.transform=function(r,o,a,h){r.x+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY),r.y+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},JitterEffect.prototype.end=function(){},JitterEffect}();t.JitterEffect=r}(a||(a={})),function(t){var r=function(){function SwirlEffect(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return SwirlEffect.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},SwirlEffect.prototype.transform=function(r,o,a,h){var d=this.angle*t.MathUtils.degreesToRadians,T=r.x-this.worldX,S=r.y-this.worldY,A=Math.sqrt(T*T+S*S);if(A<this.radius){var P=SwirlEffect.interpolation.apply(0,d,(this.radius-A)/this.radius),O=Math.cos(P),D=Math.sin(P);r.x=O*T-D*S+this.worldX,r.y=D*T+O*S+this.worldY}},SwirlEffect.prototype.end=function(){},SwirlEffect.interpolation=new t.PowOut(2),SwirlEffect}();t.SwirlEffect=r}(a||(a={})),function(t){var r,o;r=t.canvas||(t.canvas={}),o=function(r){function AssetManager(o){return void 0===o&&(o=""),r.call(this,(function(r){return new t.canvas.CanvasTexture(r)}),o)||this}return h(AssetManager,r),AssetManager}(t.AssetManager),r.AssetManager=o}(a||(a={})),function(t){var r,o;r=t.canvas||(t.canvas={}),o=function(t){function CanvasTexture(r){return t.call(this,r)||this}return h(CanvasTexture,t),CanvasTexture.prototype.setFilters=function(t,r){},CanvasTexture.prototype.setWraps=function(t,r){},CanvasTexture.prototype.dispose=function(){},CanvasTexture}(t.Texture),r.CanvasTexture=o}(a||(a={})),function(t){var r,o;r=t.canvas||(t.canvas={}),o=function(){function SkeletonRenderer(r){this.triangleRendering=!1,this.debugRendering=!1,this.vertices=t.Utils.newFloatArray(8192),this.tempColor=new t.Color,this.ctx=r}return SkeletonRenderer.prototype.draw=function(t){this.triangleRendering?this.drawTriangles(t):this.drawImages(t)},SkeletonRenderer.prototype.drawImages=function(r){var o=this.ctx,a=r.drawOrder;this.debugRendering&&(o.strokeStyle="green"),o.save();for(var h=0,d=a.length;h<d;h++){var T=a[h];if(T.bone.active){var S=T.getAttachment(),A=null,P=null,O=null;if(S instanceof t.RegionAttachment){O=(P=(A=S).region).texture.getImage();var D=T.bone.skeleton.color,L=T.color,I=A.color,B=D.a*L.a*I.a,N=this.tempColor;N.set(D.r*L.r*I.r,D.g*L.g*I.g,D.b*L.b*I.b,B);var G=S,Y=T.bone,X=P.width,U=P.height;o.save(),o.transform(Y.a,Y.c,Y.b,Y.d,Y.worldX,Y.worldY),o.translate(S.offset[0],S.offset[1]),o.rotate(S.rotation*Math.PI/180);var z=G.width/X;if(o.scale(z*S.scaleX,z*S.scaleY),o.translate(X/2,U/2),S.region.rotate){var V=X;X=U,U=V,o.rotate(-Math.PI/2)}o.scale(1,-1),o.translate(-X/2,-U/2),1==N.r&&1==N.g&&1==N.b&&1==N.a||(o.globalAlpha=N.a),o.drawImage(O,P.x,P.y,X,U,0,0,X,U),this.debugRendering&&o.strokeRect(0,0,X,U),o.restore()}}}o.restore()},SkeletonRenderer.prototype.drawTriangles=function(r){for(var o=this.vertices,a=null,h=r.drawOrder,d=0,T=h.length;d<T;d++){var S=h[d],A=S.getAttachment(),P=null;if(A instanceof t.RegionAttachment){var O=A;o=this.computeRegionVertices(S,O,!1),a=SkeletonRenderer.QUAD_TRIANGLES,P=O.region.texture.getImage()}else{if(!(A instanceof t.MeshAttachment))continue;var D=A;o=this.computeMeshVertices(S,D,!1),a=D.triangles,P=D.region.renderObject.texture.getImage()}if(null!=P){S.data.blendMode;var L=S.bone.skeleton.color,I=S.color,B=A.color,N=L.a*I.a*B.a,G=this.tempColor;G.set(L.r*I.r*B.r,L.g*I.g*B.g,L.b*I.b*B.b,N);var Y=this.ctx;1==G.r&&1==G.g&&1==G.b&&1==G.a||(Y.globalAlpha=G.a);for(var X=0;X<a.length;X+=3){var U=8*a[X],z=8*a[X+1],V=8*a[X+2],W=o[U],H=o[U+1],q=o[U+6],Z=o[U+7],K=o[z],J=o[z+1],Q=o[z+6],$=o[z+7],tt=o[V],et=o[V+1],it=o[V+6],nt=o[V+7];this.drawTriangle(P,W,H,q,Z,K,J,Q,$,tt,et,it,nt),this.debugRendering&&(Y.strokeStyle="green",Y.beginPath(),Y.moveTo(W,H),Y.lineTo(K,J),Y.lineTo(tt,et),Y.lineTo(W,H),Y.stroke())}}}this.ctx.globalAlpha=1},SkeletonRenderer.prototype.drawTriangle=function(t,r,o,a,h,d,T,S,A,P,O,D,L){var I=this.ctx;a*=t.width,h*=t.height,S*=t.width,A*=t.height,D*=t.width,L*=t.height,I.beginPath(),I.moveTo(r,o),I.lineTo(d,T),I.lineTo(P,O),I.closePath();var B=1/((S-=a)*(L-=h)-(D-=a)*(A-=h)),N=(L*(d-=r)-A*(P-=r))*B,G=(L*(T-=o)-A*(O-=o))*B,Y=(S*P-D*d)*B,X=(S*O-D*T)*B,U=r-N*a-Y*h,z=o-G*a-X*h;I.save(),I.transform(N,G,Y,X,U,z),I.clip(),I.drawImage(t,0,0),I.restore()},SkeletonRenderer.prototype.computeRegionVertices=function(r,o,a){var h=r.bone.skeleton.color,d=r.color,T=o.color,S=h.a*d.a*T.a,A=a?S:1,P=this.tempColor;P.set(h.r*d.r*T.r*A,h.g*d.g*T.g*A,h.b*d.b*T.b*A,S),o.computeWorldVertices(r.bone,this.vertices,0,SkeletonRenderer.VERTEX_SIZE);var O=this.vertices,D=o.uvs;return O[t.RegionAttachment.C1R]=P.r,O[t.RegionAttachment.C1G]=P.g,O[t.RegionAttachment.C1B]=P.b,O[t.RegionAttachment.C1A]=P.a,O[t.RegionAttachment.U1]=D[0],O[t.RegionAttachment.V1]=D[1],O[t.RegionAttachment.C2R]=P.r,O[t.RegionAttachment.C2G]=P.g,O[t.RegionAttachment.C2B]=P.b,O[t.RegionAttachment.C2A]=P.a,O[t.RegionAttachment.U2]=D[2],O[t.RegionAttachment.V2]=D[3],O[t.RegionAttachment.C3R]=P.r,O[t.RegionAttachment.C3G]=P.g,O[t.RegionAttachment.C3B]=P.b,O[t.RegionAttachment.C3A]=P.a,O[t.RegionAttachment.U3]=D[4],O[t.RegionAttachment.V3]=D[5],O[t.RegionAttachment.C4R]=P.r,O[t.RegionAttachment.C4G]=P.g,O[t.RegionAttachment.C4B]=P.b,O[t.RegionAttachment.C4A]=P.a,O[t.RegionAttachment.U4]=D[6],O[t.RegionAttachment.V4]=D[7],O},SkeletonRenderer.prototype.computeMeshVertices=function(r,o,a){var h=r.bone.skeleton.color,d=r.color,T=o.color,S=h.a*d.a*T.a,A=a?S:1,P=this.tempColor;P.set(h.r*d.r*T.r*A,h.g*d.g*T.g*A,h.b*d.b*T.b*A,S);var O=o.worldVerticesLength/2;this.vertices.length<o.worldVerticesLength&&(this.vertices=t.Utils.newFloatArray(o.worldVerticesLength));var D=this.vertices;o.computeWorldVertices(r,0,o.worldVerticesLength,D,0,SkeletonRenderer.VERTEX_SIZE);for(var L=o.uvs,I=0,B=O,N=0,G=2;I<B;I++)D[G++]=P.r,D[G++]=P.g,D[G++]=P.b,D[G++]=P.a,D[G++]=L[N++],D[G++]=L[N++],G+=2;return D},SkeletonRenderer.QUAD_TRIANGLES=[0,1,2,2,3,0],SkeletonRenderer.VERTEX_SIZE=8,SkeletonRenderer}(),r.SkeletonRenderer=o}(a||(a={})),function(t){var r,o;r=t.webgl||(t.webgl={}),o=function(r){function AssetManager(o,a){return void 0===a&&(a=""),r.call(this,(function(r){return new t.webgl.GLTexture(o,r)}),a)||this}return h(AssetManager,r),AssetManager}(t.AssetManager),r.AssetManager=o}(a||(a={})),function(t){var r,o;r=t.webgl||(t.webgl={}),o=function(){function OrthoCamera(t,o){this.position=new r.Vector3(0,0,0),this.direction=new r.Vector3(0,0,-1),this.up=new r.Vector3(0,1,0),this.near=0,this.far=100,this.zoom=1,this.viewportWidth=0,this.viewportHeight=0,this.projectionView=new r.Matrix4,this.inverseProjectionView=new r.Matrix4,this.projection=new r.Matrix4,this.view=new r.Matrix4,this.tmp=new r.Vector3,this.viewportWidth=t,this.viewportHeight=o,this.update()}return OrthoCamera.prototype.update=function(){var t=this.projection,r=this.view,o=this.projectionView,a=this.inverseProjectionView,h=this.zoom,d=this.viewportWidth,T=this.viewportHeight;t.ortho(h*(-d/2),h*(d/2),h*(-T/2),h*(T/2),this.near,this.far),r.lookAt(this.position,this.direction,this.up),o.set(t.values),o.multiply(r),a.set(o.values).invert()},OrthoCamera.prototype.screenToWorld=function(t,r,o){var a=t.x,h=o-t.y-1,d=this.tmp;return d.x=2*a/r-1,d.y=2*h/o-1,d.z=2*t.z-1,d.project(this.inverseProjectionView),t.set(d.x,d.y,d.z),t},OrthoCamera.prototype.setViewport=function(t,r){this.viewportWidth=t,this.viewportHeight=r},OrthoCamera}(),r.OrthoCamera=o}(a||(a={})),function(t){var r,o;r=t.webgl||(t.webgl={}),o=function(o){function GLTexture(t,a,h){void 0===h&&(h=!1);var d=o.call(this,a)||this;return d.texture=null,d.boundUnit=0,d.useMipMaps=!1,d.context=t instanceof r.ManagedWebGLRenderingContext?t:new r.ManagedWebGLRenderingContext(t),d.useMipMaps=h,d.restore(),d.context.addRestorable(d),d}return h(GLTexture,o),GLTexture.prototype.setFilters=function(t,r){var o=this.context.gl;this.bind(),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,t),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,GLTexture.validateMagFilter(r))},GLTexture.validateMagFilter=function(r){switch(r){case t.TextureFilter.MipMap:case t.TextureFilter.MipMapLinearLinear:case t.TextureFilter.MipMapLinearNearest:case t.TextureFilter.MipMapNearestLinear:case t.TextureFilter.MipMapNearestNearest:return t.TextureFilter.Linear;default:return r}},GLTexture.prototype.setWraps=function(t,r){var o=this.context.gl;this.bind(),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,t),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,r)},GLTexture.prototype.update=function(t){var r=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),GLTexture.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL&&r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,this._image),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,t?r.LINEAR_MIPMAP_LINEAR:r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),t&&r.generateMipmap(r.TEXTURE_2D)},GLTexture.prototype.restore=function(){this.texture=null,this.update(this.useMipMaps)},GLTexture.prototype.bind=function(t){void 0===t&&(t=0);var r=this.context.gl;this.boundUnit=t,r.activeTexture(r.TEXTURE0+t),r.bindTexture(r.TEXTURE_2D,this.texture)},GLTexture.prototype.unbind=function(){var t=this.context.gl;t.activeTexture(t.TEXTURE0+this.boundUnit),t.bindTexture(t.TEXTURE_2D,null)},GLTexture.prototype.dispose=function(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture)},GLTexture.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL=!1,GLTexture}(t.Texture),r.GLTexture=o}(a||(a={})),function(t){!function(t){t.M00=0,t.M01=4,t.M02=8,t.M03=12,t.M10=1,t.M11=5,t.M12=9,t.M13=13,t.M20=2,t.M21=6,t.M22=10,t.M23=14,t.M30=3,t.M31=7,t.M32=11,t.M33=15;var r=function(){function Matrix4(){this.temp=new Float32Array(16),this.values=new Float32Array(16);var r=this.values;r[t.M00]=1,r[t.M11]=1,r[t.M22]=1,r[t.M33]=1}return Matrix4.prototype.set=function(t){return this.values.set(t),this},Matrix4.prototype.transpose=function(){var r=this.temp,o=this.values;return r[t.M00]=o[t.M00],r[t.M01]=o[t.M10],r[t.M02]=o[t.M20],r[t.M03]=o[t.M30],r[t.M10]=o[t.M01],r[t.M11]=o[t.M11],r[t.M12]=o[t.M21],r[t.M13]=o[t.M31],r[t.M20]=o[t.M02],r[t.M21]=o[t.M12],r[t.M22]=o[t.M22],r[t.M23]=o[t.M32],r[t.M30]=o[t.M03],r[t.M31]=o[t.M13],r[t.M32]=o[t.M23],r[t.M33]=o[t.M33],this.set(r)},Matrix4.prototype.identity=function(){var r=this.values;return r[t.M00]=1,r[t.M01]=0,r[t.M02]=0,r[t.M03]=0,r[t.M10]=0,r[t.M11]=1,r[t.M12]=0,r[t.M13]=0,r[t.M20]=0,r[t.M21]=0,r[t.M22]=1,r[t.M23]=0,r[t.M30]=0,r[t.M31]=0,r[t.M32]=0,r[t.M33]=1,this},Matrix4.prototype.invert=function(){var r=this.values,o=this.temp,a=r[t.M30]*r[t.M21]*r[t.M12]*r[t.M03]-r[t.M20]*r[t.M31]*r[t.M12]*r[t.M03]-r[t.M30]*r[t.M11]*r[t.M22]*r[t.M03]+r[t.M10]*r[t.M31]*r[t.M22]*r[t.M03]+r[t.M20]*r[t.M11]*r[t.M32]*r[t.M03]-r[t.M10]*r[t.M21]*r[t.M32]*r[t.M03]-r[t.M30]*r[t.M21]*r[t.M02]*r[t.M13]+r[t.M20]*r[t.M31]*r[t.M02]*r[t.M13]+r[t.M30]*r[t.M01]*r[t.M22]*r[t.M13]-r[t.M00]*r[t.M31]*r[t.M22]*r[t.M13]-r[t.M20]*r[t.M01]*r[t.M32]*r[t.M13]+r[t.M00]*r[t.M21]*r[t.M32]*r[t.M13]+r[t.M30]*r[t.M11]*r[t.M02]*r[t.M23]-r[t.M10]*r[t.M31]*r[t.M02]*r[t.M23]-r[t.M30]*r[t.M01]*r[t.M12]*r[t.M23]+r[t.M00]*r[t.M31]*r[t.M12]*r[t.M23]+r[t.M10]*r[t.M01]*r[t.M32]*r[t.M23]-r[t.M00]*r[t.M11]*r[t.M32]*r[t.M23]-r[t.M20]*r[t.M11]*r[t.M02]*r[t.M33]+r[t.M10]*r[t.M21]*r[t.M02]*r[t.M33]+r[t.M20]*r[t.M01]*r[t.M12]*r[t.M33]-r[t.M00]*r[t.M21]*r[t.M12]*r[t.M33]-r[t.M10]*r[t.M01]*r[t.M22]*r[t.M33]+r[t.M00]*r[t.M11]*r[t.M22]*r[t.M33];if(0==a)throw new Error("non-invertible matrix");var h=1/a;return o[t.M00]=r[t.M12]*r[t.M23]*r[t.M31]-r[t.M13]*r[t.M22]*r[t.M31]+r[t.M13]*r[t.M21]*r[t.M32]-r[t.M11]*r[t.M23]*r[t.M32]-r[t.M12]*r[t.M21]*r[t.M33]+r[t.M11]*r[t.M22]*r[t.M33],o[t.M01]=r[t.M03]*r[t.M22]*r[t.M31]-r[t.M02]*r[t.M23]*r[t.M31]-r[t.M03]*r[t.M21]*r[t.M32]+r[t.M01]*r[t.M23]*r[t.M32]+r[t.M02]*r[t.M21]*r[t.M33]-r[t.M01]*r[t.M22]*r[t.M33],o[t.M02]=r[t.M02]*r[t.M13]*r[t.M31]-r[t.M03]*r[t.M12]*r[t.M31]+r[t.M03]*r[t.M11]*r[t.M32]-r[t.M01]*r[t.M13]*r[t.M32]-r[t.M02]*r[t.M11]*r[t.M33]+r[t.M01]*r[t.M12]*r[t.M33],o[t.M03]=r[t.M03]*r[t.M12]*r[t.M21]-r[t.M02]*r[t.M13]*r[t.M21]-r[t.M03]*r[t.M11]*r[t.M22]+r[t.M01]*r[t.M13]*r[t.M22]+r[t.M02]*r[t.M11]*r[t.M23]-r[t.M01]*r[t.M12]*r[t.M23],o[t.M10]=r[t.M13]*r[t.M22]*r[t.M30]-r[t.M12]*r[t.M23]*r[t.M30]-r[t.M13]*r[t.M20]*r[t.M32]+r[t.M10]*r[t.M23]*r[t.M32]+r[t.M12]*r[t.M20]*r[t.M33]-r[t.M10]*r[t.M22]*r[t.M33],o[t.M11]=r[t.M02]*r[t.M23]*r[t.M30]-r[t.M03]*r[t.M22]*r[t.M30]+r[t.M03]*r[t.M20]*r[t.M32]-r[t.M00]*r[t.M23]*r[t.M32]-r[t.M02]*r[t.M20]*r[t.M33]+r[t.M00]*r[t.M22]*r[t.M33],o[t.M12]=r[t.M03]*r[t.M12]*r[t.M30]-r[t.M02]*r[t.M13]*r[t.M30]-r[t.M03]*r[t.M10]*r[t.M32]+r[t.M00]*r[t.M13]*r[t.M32]+r[t.M02]*r[t.M10]*r[t.M33]-r[t.M00]*r[t.M12]*r[t.M33],o[t.M13]=r[t.M02]*r[t.M13]*r[t.M20]-r[t.M03]*r[t.M12]*r[t.M20]+r[t.M03]*r[t.M10]*r[t.M22]-r[t.M00]*r[t.M13]*r[t.M22]-r[t.M02]*r[t.M10]*r[t.M23]+r[t.M00]*r[t.M12]*r[t.M23],o[t.M20]=r[t.M11]*r[t.M23]*r[t.M30]-r[t.M13]*r[t.M21]*r[t.M30]+r[t.M13]*r[t.M20]*r[t.M31]-r[t.M10]*r[t.M23]*r[t.M31]-r[t.M11]*r[t.M20]*r[t.M33]+r[t.M10]*r[t.M21]*r[t.M33],o[t.M21]=r[t.M03]*r[t.M21]*r[t.M30]-r[t.M01]*r[t.M23]*r[t.M30]-r[t.M03]*r[t.M20]*r[t.M31]+r[t.M00]*r[t.M23]*r[t.M31]+r[t.M01]*r[t.M20]*r[t.M33]-r[t.M00]*r[t.M21]*r[t.M33],o[t.M22]=r[t.M01]*r[t.M13]*r[t.M30]-r[t.M03]*r[t.M11]*r[t.M30]+r[t.M03]*r[t.M10]*r[t.M31]-r[t.M00]*r[t.M13]*r[t.M31]-r[t.M01]*r[t.M10]*r[t.M33]+r[t.M00]*r[t.M11]*r[t.M33],o[t.M23]=r[t.M03]*r[t.M11]*r[t.M20]-r[t.M01]*r[t.M13]*r[t.M20]-r[t.M03]*r[t.M10]*r[t.M21]+r[t.M00]*r[t.M13]*r[t.M21]+r[t.M01]*r[t.M10]*r[t.M23]-r[t.M00]*r[t.M11]*r[t.M23],o[t.M30]=r[t.M12]*r[t.M21]*r[t.M30]-r[t.M11]*r[t.M22]*r[t.M30]-r[t.M12]*r[t.M20]*r[t.M31]+r[t.M10]*r[t.M22]*r[t.M31]+r[t.M11]*r[t.M20]*r[t.M32]-r[t.M10]*r[t.M21]*r[t.M32],o[t.M31]=r[t.M01]*r[t.M22]*r[t.M30]-r[t.M02]*r[t.M21]*r[t.M30]+r[t.M02]*r[t.M20]*r[t.M31]-r[t.M00]*r[t.M22]*r[t.M31]-r[t.M01]*r[t.M20]*r[t.M32]+r[t.M00]*r[t.M21]*r[t.M32],o[t.M32]=r[t.M02]*r[t.M11]*r[t.M30]-r[t.M01]*r[t.M12]*r[t.M30]-r[t.M02]*r[t.M10]*r[t.M31]+r[t.M00]*r[t.M12]*r[t.M31]+r[t.M01]*r[t.M10]*r[t.M32]-r[t.M00]*r[t.M11]*r[t.M32],o[t.M33]=r[t.M01]*r[t.M12]*r[t.M20]-r[t.M02]*r[t.M11]*r[t.M20]+r[t.M02]*r[t.M10]*r[t.M21]-r[t.M00]*r[t.M12]*r[t.M21]-r[t.M01]*r[t.M10]*r[t.M22]+r[t.M00]*r[t.M11]*r[t.M22],r[t.M00]=o[t.M00]*h,r[t.M01]=o[t.M01]*h,r[t.M02]=o[t.M02]*h,r[t.M03]=o[t.M03]*h,r[t.M10]=o[t.M10]*h,r[t.M11]=o[t.M11]*h,r[t.M12]=o[t.M12]*h,r[t.M13]=o[t.M13]*h,r[t.M20]=o[t.M20]*h,r[t.M21]=o[t.M21]*h,r[t.M22]=o[t.M22]*h,r[t.M23]=o[t.M23]*h,r[t.M30]=o[t.M30]*h,r[t.M31]=o[t.M31]*h,r[t.M32]=o[t.M32]*h,r[t.M33]=o[t.M33]*h,this},Matrix4.prototype.determinant=function(){var r=this.values;return r[t.M30]*r[t.M21]*r[t.M12]*r[t.M03]-r[t.M20]*r[t.M31]*r[t.M12]*r[t.M03]-r[t.M30]*r[t.M11]*r[t.M22]*r[t.M03]+r[t.M10]*r[t.M31]*r[t.M22]*r[t.M03]+r[t.M20]*r[t.M11]*r[t.M32]*r[t.M03]-r[t.M10]*r[t.M21]*r[t.M32]*r[t.M03]-r[t.M30]*r[t.M21]*r[t.M02]*r[t.M13]+r[t.M20]*r[t.M31]*r[t.M02]*r[t.M13]+r[t.M30]*r[t.M01]*r[t.M22]*r[t.M13]-r[t.M00]*r[t.M31]*r[t.M22]*r[t.M13]-r[t.M20]*r[t.M01]*r[t.M32]*r[t.M13]+r[t.M00]*r[t.M21]*r[t.M32]*r[t.M13]+r[t.M30]*r[t.M11]*r[t.M02]*r[t.M23]-r[t.M10]*r[t.M31]*r[t.M02]*r[t.M23]-r[t.M30]*r[t.M01]*r[t.M12]*r[t.M23]+r[t.M00]*r[t.M31]*r[t.M12]*r[t.M23]+r[t.M10]*r[t.M01]*r[t.M32]*r[t.M23]-r[t.M00]*r[t.M11]*r[t.M32]*r[t.M23]-r[t.M20]*r[t.M11]*r[t.M02]*r[t.M33]+r[t.M10]*r[t.M21]*r[t.M02]*r[t.M33]+r[t.M20]*r[t.M01]*r[t.M12]*r[t.M33]-r[t.M00]*r[t.M21]*r[t.M12]*r[t.M33]-r[t.M10]*r[t.M01]*r[t.M22]*r[t.M33]+r[t.M00]*r[t.M11]*r[t.M22]*r[t.M33]},Matrix4.prototype.translate=function(r,o,a){var h=this.values;return h[t.M03]+=r,h[t.M13]+=o,h[t.M23]+=a,this},Matrix4.prototype.copy=function(){return(new Matrix4).set(this.values)},Matrix4.prototype.projection=function(r,o,a,h){this.identity();var d=1/Math.tan(a*(Math.PI/180)/2),T=(o+r)/(r-o),S=2*o*r/(r-o),A=this.values;return A[t.M00]=d/h,A[t.M10]=0,A[t.M20]=0,A[t.M30]=0,A[t.M01]=0,A[t.M11]=d,A[t.M21]=0,A[t.M31]=0,A[t.M02]=0,A[t.M12]=0,A[t.M22]=T,A[t.M32]=-1,A[t.M03]=0,A[t.M13]=0,A[t.M23]=S,A[t.M33]=0,this},Matrix4.prototype.ortho2d=function(t,r,o,a){return this.ortho(t,t+o,r,r+a,0,1)},Matrix4.prototype.ortho=function(r,o,a,h,d,T){this.identity();var S=2/(o-r),A=2/(h-a),P=-2/(T-d),O=-(o+r)/(o-r),D=-(h+a)/(h-a),L=-(T+d)/(T-d),I=this.values;return I[t.M00]=S,I[t.M10]=0,I[t.M20]=0,I[t.M30]=0,I[t.M01]=0,I[t.M11]=A,I[t.M21]=0,I[t.M31]=0,I[t.M02]=0,I[t.M12]=0,I[t.M22]=P,I[t.M32]=0,I[t.M03]=O,I[t.M13]=D,I[t.M23]=L,I[t.M33]=1,this},Matrix4.prototype.multiply=function(r){var o=this.temp,a=this.values,h=r.values;return o[t.M00]=a[t.M00]*h[t.M00]+a[t.M01]*h[t.M10]+a[t.M02]*h[t.M20]+a[t.M03]*h[t.M30],o[t.M01]=a[t.M00]*h[t.M01]+a[t.M01]*h[t.M11]+a[t.M02]*h[t.M21]+a[t.M03]*h[t.M31],o[t.M02]=a[t.M00]*h[t.M02]+a[t.M01]*h[t.M12]+a[t.M02]*h[t.M22]+a[t.M03]*h[t.M32],o[t.M03]=a[t.M00]*h[t.M03]+a[t.M01]*h[t.M13]+a[t.M02]*h[t.M23]+a[t.M03]*h[t.M33],o[t.M10]=a[t.M10]*h[t.M00]+a[t.M11]*h[t.M10]+a[t.M12]*h[t.M20]+a[t.M13]*h[t.M30],o[t.M11]=a[t.M10]*h[t.M01]+a[t.M11]*h[t.M11]+a[t.M12]*h[t.M21]+a[t.M13]*h[t.M31],o[t.M12]=a[t.M10]*h[t.M02]+a[t.M11]*h[t.M12]+a[t.M12]*h[t.M22]+a[t.M13]*h[t.M32],o[t.M13]=a[t.M10]*h[t.M03]+a[t.M11]*h[t.M13]+a[t.M12]*h[t.M23]+a[t.M13]*h[t.M33],o[t.M20]=a[t.M20]*h[t.M00]+a[t.M21]*h[t.M10]+a[t.M22]*h[t.M20]+a[t.M23]*h[t.M30],o[t.M21]=a[t.M20]*h[t.M01]+a[t.M21]*h[t.M11]+a[t.M22]*h[t.M21]+a[t.M23]*h[t.M31],o[t.M22]=a[t.M20]*h[t.M02]+a[t.M21]*h[t.M12]+a[t.M22]*h[t.M22]+a[t.M23]*h[t.M32],o[t.M23]=a[t.M20]*h[t.M03]+a[t.M21]*h[t.M13]+a[t.M22]*h[t.M23]+a[t.M23]*h[t.M33],o[t.M30]=a[t.M30]*h[t.M00]+a[t.M31]*h[t.M10]+a[t.M32]*h[t.M20]+a[t.M33]*h[t.M30],o[t.M31]=a[t.M30]*h[t.M01]+a[t.M31]*h[t.M11]+a[t.M32]*h[t.M21]+a[t.M33]*h[t.M31],o[t.M32]=a[t.M30]*h[t.M02]+a[t.M31]*h[t.M12]+a[t.M32]*h[t.M22]+a[t.M33]*h[t.M32],o[t.M33]=a[t.M30]*h[t.M03]+a[t.M31]*h[t.M13]+a[t.M32]*h[t.M23]+a[t.M33]*h[t.M33],this.set(this.temp)},Matrix4.prototype.multiplyLeft=function(r){var o=this.temp,a=this.values,h=r.values;return o[t.M00]=h[t.M00]*a[t.M00]+h[t.M01]*a[t.M10]+h[t.M02]*a[t.M20]+h[t.M03]*a[t.M30],o[t.M01]=h[t.M00]*a[t.M01]+h[t.M01]*a[t.M11]+h[t.M02]*a[t.M21]+h[t.M03]*a[t.M31],o[t.M02]=h[t.M00]*a[t.M02]+h[t.M01]*a[t.M12]+h[t.M02]*a[t.M22]+h[t.M03]*a[t.M32],o[t.M03]=h[t.M00]*a[t.M03]+h[t.M01]*a[t.M13]+h[t.M02]*a[t.M23]+h[t.M03]*a[t.M33],o[t.M10]=h[t.M10]*a[t.M00]+h[t.M11]*a[t.M10]+h[t.M12]*a[t.M20]+h[t.M13]*a[t.M30],o[t.M11]=h[t.M10]*a[t.M01]+h[t.M11]*a[t.M11]+h[t.M12]*a[t.M21]+h[t.M13]*a[t.M31],o[t.M12]=h[t.M10]*a[t.M02]+h[t.M11]*a[t.M12]+h[t.M12]*a[t.M22]+h[t.M13]*a[t.M32],o[t.M13]=h[t.M10]*a[t.M03]+h[t.M11]*a[t.M13]+h[t.M12]*a[t.M23]+h[t.M13]*a[t.M33],o[t.M20]=h[t.M20]*a[t.M00]+h[t.M21]*a[t.M10]+h[t.M22]*a[t.M20]+h[t.M23]*a[t.M30],o[t.M21]=h[t.M20]*a[t.M01]+h[t.M21]*a[t.M11]+h[t.M22]*a[t.M21]+h[t.M23]*a[t.M31],o[t.M22]=h[t.M20]*a[t.M02]+h[t.M21]*a[t.M12]+h[t.M22]*a[t.M22]+h[t.M23]*a[t.M32],o[t.M23]=h[t.M20]*a[t.M03]+h[t.M21]*a[t.M13]+h[t.M22]*a[t.M23]+h[t.M23]*a[t.M33],o[t.M30]=h[t.M30]*a[t.M00]+h[t.M31]*a[t.M10]+h[t.M32]*a[t.M20]+h[t.M33]*a[t.M30],o[t.M31]=h[t.M30]*a[t.M01]+h[t.M31]*a[t.M11]+h[t.M32]*a[t.M21]+h[t.M33]*a[t.M31],o[t.M32]=h[t.M30]*a[t.M02]+h[t.M31]*a[t.M12]+h[t.M32]*a[t.M22]+h[t.M33]*a[t.M32],o[t.M33]=h[t.M30]*a[t.M03]+h[t.M31]*a[t.M13]+h[t.M32]*a[t.M23]+h[t.M33]*a[t.M33],this.set(this.temp)},Matrix4.prototype.lookAt=function(r,o,a){Matrix4.initTemps();var h=Matrix4.xAxis,d=Matrix4.yAxis,T=Matrix4.zAxis;T.setFrom(o).normalize(),h.setFrom(o).normalize(),h.cross(a).normalize(),d.setFrom(h).cross(T).normalize(),this.identity();var S=this.values;return S[t.M00]=h.x,S[t.M01]=h.y,S[t.M02]=h.z,S[t.M10]=d.x,S[t.M11]=d.y,S[t.M12]=d.z,S[t.M20]=-T.x,S[t.M21]=-T.y,S[t.M22]=-T.z,Matrix4.tmpMatrix.identity(),Matrix4.tmpMatrix.values[t.M03]=-r.x,Matrix4.tmpMatrix.values[t.M13]=-r.y,Matrix4.tmpMatrix.values[t.M23]=-r.z,this.multiply(Matrix4.tmpMatrix),this},Matrix4.initTemps=function(){null===Matrix4.xAxis&&(Matrix4.xAxis=new t.Vector3),null===Matrix4.yAxis&&(Matrix4.yAxis=new t.Vector3),null===Matrix4.zAxis&&(Matrix4.zAxis=new t.Vector3)},Matrix4.xAxis=null,Matrix4.yAxis=null,Matrix4.zAxis=null,Matrix4.tmpMatrix=new Matrix4,Matrix4}();t.Matrix4=r}(t.webgl||(t.webgl={}))}(a||(a={})),function(t){!function(t){var r=function(){function Mesh(r,o,a,h){this.attributes=o,this.verticesLength=0,this.dirtyVertices=!1,this.indicesLength=0,this.dirtyIndices=!1,this.elementsPerVertex=0,this.context=r instanceof t.ManagedWebGLRenderingContext?r:new t.ManagedWebGLRenderingContext(r),this.elementsPerVertex=0;for(var d=0;d<o.length;d++)this.elementsPerVertex+=o[d].numElements;this.vertices=new Float32Array(a*this.elementsPerVertex),this.indices=new Uint16Array(h),this.context.addRestorable(this)}return Mesh.prototype.getAttributes=function(){return this.attributes},Mesh.prototype.maxVertices=function(){return this.vertices.length/this.elementsPerVertex},Mesh.prototype.numVertices=function(){return this.verticesLength/this.elementsPerVertex},Mesh.prototype.setVerticesLength=function(t){this.dirtyVertices=!0,this.verticesLength=t},Mesh.prototype.getVertices=function(){return this.vertices},Mesh.prototype.maxIndices=function(){return this.indices.length},Mesh.prototype.numIndices=function(){return this.indicesLength},Mesh.prototype.setIndicesLength=function(t){this.dirtyIndices=!0,this.indicesLength=t},Mesh.prototype.getIndices=function(){return this.indices},Mesh.prototype.getVertexSizeInFloats=function(){for(var t=0,r=0;r<this.attributes.length;r++){t+=this.attributes[r].numElements}return t},Mesh.prototype.setVertices=function(t){if(this.dirtyVertices=!0,t.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(t,0),this.verticesLength=t.length},Mesh.prototype.setIndices=function(t){if(this.dirtyIndices=!0,t.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(t,0),this.indicesLength=t.length},Mesh.prototype.draw=function(t,r){this.drawWithOffset(t,r,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex)},Mesh.prototype.drawWithOffset=function(t,r,o,a){var h=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(t),this.indicesLength>0?h.drawElements(r,a,h.UNSIGNED_SHORT,2*o):h.drawArrays(r,o,a),this.unbind(t)},Mesh.prototype.bind=function(t){var r=this.context.gl;r.bindBuffer(r.ARRAY_BUFFER,this.verticesBuffer);for(var o=0,a=0;a<this.attributes.length;a++){var h=this.attributes[a],d=t.getAttributeLocation(h.name);r.enableVertexAttribArray(d),r.vertexAttribPointer(d,h.numElements,r.FLOAT,!1,4*this.elementsPerVertex,4*o),o+=h.numElements}this.indicesLength>0&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.indicesBuffer)},Mesh.prototype.unbind=function(t){for(var r=this.context.gl,o=0;o<this.attributes.length;o++){var a=this.attributes[o],h=t.getAttributeLocation(a.name);r.disableVertexAttribArray(h)}r.bindBuffer(r.ARRAY_BUFFER,null),this.indicesLength>0&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null)},Mesh.prototype.update=function(){var t=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.verticesBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),t.DYNAMIC_DRAW),this.dirtyVertices=!1),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),t.DYNAMIC_DRAW),this.dirtyIndices=!1)},Mesh.prototype.restore=function(){this.verticesBuffer=null,this.indicesBuffer=null,this.update()},Mesh.prototype.dispose=function(){this.context.removeRestorable(this);var t=this.context.gl;t.deleteBuffer(this.verticesBuffer),t.deleteBuffer(this.indicesBuffer)},Mesh}();t.Mesh=r;var o=function o(t,r,a){this.name=t,this.type=r,this.numElements=a};t.VertexAttribute=o;var a=function(r){function Position2Attribute(){return r.call(this,t.Shader.POSITION,A.Float,2)||this}return h(Position2Attribute,r),Position2Attribute}(o);t.Position2Attribute=a;var d=function(r){function Position3Attribute(){return r.call(this,t.Shader.POSITION,A.Float,3)||this}return h(Position3Attribute,r),Position3Attribute}(o);t.Position3Attribute=d;var T=function(r){function TexCoordAttribute(o){return void 0===o&&(o=0),r.call(this,t.Shader.TEXCOORDS+(0==o?"":o),A.Float,2)||this}return h(TexCoordAttribute,r),TexCoordAttribute}(o);t.TexCoordAttribute=T;var S=function(r){function ColorAttribute(){return r.call(this,t.Shader.COLOR,A.Float,4)||this}return h(ColorAttribute,r),ColorAttribute}(o);t.ColorAttribute=S;var A,P=function(r){function Color2Attribute(){return r.call(this,t.Shader.COLOR2,A.Float,4)||this}return h(Color2Attribute,r),Color2Attribute}(o);t.Color2Attribute=P,function(t){t[t.Float=0]="Float"}(A=t.VertexAttributeType||(t.VertexAttributeType={}))}(t.webgl||(t.webgl={}))}(a||(a={})),function(t){var r,o;r=t.webgl||(t.webgl={}),o=function(){function PolygonBatcher(t,o,a){if(void 0===o&&(o=!0),void 0===a&&(a=10920),this.isDrawing=!1,this.shader=null,this.lastTexture=null,this.verticesLength=0,this.indicesLength=0,a>10920)throw new Error("Can't have more than 10920 triangles per batch: "+a);this.context=t instanceof r.ManagedWebGLRenderingContext?t:new r.ManagedWebGLRenderingContext(t);var h=o?[new r.Position2Attribute,new r.ColorAttribute,new r.TexCoordAttribute,new r.Color2Attribute]:[new r.Position2Attribute,new r.ColorAttribute,new r.TexCoordAttribute];this.mesh=new r.Mesh(t,h,a,3*a),this.srcBlend=this.context.gl.SRC_ALPHA,this.dstBlend=this.context.gl.ONE_MINUS_SRC_ALPHA}return PolygonBatcher.prototype.begin=function(t){var r=this.context.gl;if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=t,this.lastTexture=null,this.isDrawing=!0,r.enable(r.BLEND),r.blendFunc(this.srcBlend,this.dstBlend)},PolygonBatcher.prototype.setBlendMode=function(t,r){var o=this.context.gl;this.srcBlend=t,this.dstBlend=r,this.isDrawing&&(this.flush(),o.blendFunc(this.srcBlend,this.dstBlend))},PolygonBatcher.prototype.draw=function(t,r,o){t!=this.lastTexture?(this.flush(),this.lastTexture=t):(this.verticesLength+r.length>this.mesh.getVertices().length||this.indicesLength+o.length>this.mesh.getIndices().length)&&this.flush();var a=this.mesh.numVertices();this.mesh.getVertices().set(r,this.verticesLength),this.verticesLength+=r.length,this.mesh.setVerticesLength(this.verticesLength);for(var h=this.mesh.getIndices(),d=this.indicesLength,T=0;T<o.length;d++,T++)h[d]=o[T]+a;this.indicesLength+=o.length,this.mesh.setIndicesLength(this.indicesLength)},PolygonBatcher.prototype.flush=function(){var t=this.context.gl;0!=this.verticesLength&&(this.lastTexture.bind(),this.mesh.draw(this.shader,t.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++)},PolygonBatcher.prototype.end=function(){var t=this.context.gl;if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=!1,t.disable(t.BLEND)},PolygonBatcher.prototype.getDrawCalls=function(){return this.drawCalls},PolygonBatcher.prototype.dispose=function(){this.mesh.dispose()},PolygonBatcher}(),r.PolygonBatcher=o}(a||(a={})),function(t){var r,o,a;r=t.webgl||(t.webgl={}),a=function(){function SceneRenderer(o,a,h){void 0===h&&(h=!0),this.twoColorTint=!1,this.activeRenderer=null,this.QUAD=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],this.QUAD_TRIANGLES=[0,1,2,2,3,0],this.WHITE=new t.Color(1,1,1,1),this.canvas=o,this.context=a instanceof r.ManagedWebGLRenderingContext?a:new r.ManagedWebGLRenderingContext(a),this.twoColorTint=h,this.camera=new r.OrthoCamera(o.width,o.height),this.batcherShader=h?r.Shader.newTwoColoredTextured(this.context):r.Shader.newColoredTextured(this.context),this.batcher=new r.PolygonBatcher(this.context,h),this.shapesShader=r.Shader.newColored(this.context),this.shapes=new r.ShapeRenderer(this.context),this.skeletonRenderer=new r.SkeletonRenderer(this.context,h),this.skeletonDebugRenderer=new r.SkeletonDebugRenderer(this.context)}return SceneRenderer.prototype.begin=function(){this.camera.update(),this.enableRenderer(this.batcher)},SceneRenderer.prototype.drawSkeleton=function(t,r,o,a){void 0===r&&(r=!1),void 0===o&&(o=-1),void 0===a&&(a=-1),this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=r,this.skeletonRenderer.draw(this.batcher,t,o,a)},SceneRenderer.prototype.drawSkeletonDebug=function(t,r,o){void 0===r&&(r=!1),void 0===o&&(o=null),this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=r,this.skeletonDebugRenderer.draw(this.shapes,t,o)},SceneRenderer.prototype.drawTexture=function(t,r,o,a,h,d){void 0===d&&(d=null),this.enableRenderer(this.batcher),null===d&&(d=this.WHITE);var T=this.QUAD,S=0;T[S++]=r,T[S++]=o,T[S++]=d.r,T[S++]=d.g,T[S++]=d.b,T[S++]=d.a,T[S++]=0,T[S++]=1,this.twoColorTint&&(T[S++]=0,T[S++]=0,T[S++]=0,T[S++]=0),T[S++]=r+a,T[S++]=o,T[S++]=d.r,T[S++]=d.g,T[S++]=d.b,T[S++]=d.a,T[S++]=1,T[S++]=1,this.twoColorTint&&(T[S++]=0,T[S++]=0,T[S++]=0,T[S++]=0),T[S++]=r+a,T[S++]=o+h,T[S++]=d.r,T[S++]=d.g,T[S++]=d.b,T[S++]=d.a,T[S++]=1,T[S++]=0,this.twoColorTint&&(T[S++]=0,T[S++]=0,T[S++]=0,T[S++]=0),T[S++]=r,T[S++]=o+h,T[S++]=d.r,T[S++]=d.g,T[S++]=d.b,T[S++]=d.a,T[S++]=0,T[S++]=0,this.twoColorTint&&(T[S++]=0,T[S++]=0,T[S++]=0,T[S++]=0),this.batcher.draw(t,T,this.QUAD_TRIANGLES)},SceneRenderer.prototype.drawTextureUV=function(t,r,o,a,h,d,T,S,A,P){void 0===P&&(P=null),this.enableRenderer(this.batcher),null===P&&(P=this.WHITE);var O=this.QUAD,D=0;O[D++]=r,O[D++]=o,O[D++]=P.r,O[D++]=P.g,O[D++]=P.b,O[D++]=P.a,O[D++]=d,O[D++]=T,this.twoColorTint&&(O[D++]=0,O[D++]=0,O[D++]=0,O[D++]=0),O[D++]=r+a,O[D++]=o,O[D++]=P.r,O[D++]=P.g,O[D++]=P.b,O[D++]=P.a,O[D++]=S,O[D++]=T,this.twoColorTint&&(O[D++]=0,O[D++]=0,O[D++]=0,O[D++]=0),O[D++]=r+a,O[D++]=o+h,O[D++]=P.r,O[D++]=P.g,O[D++]=P.b,O[D++]=P.a,O[D++]=S,O[D++]=A,this.twoColorTint&&(O[D++]=0,O[D++]=0,O[D++]=0,O[D++]=0),O[D++]=r,O[D++]=o+h,O[D++]=P.r,O[D++]=P.g,O[D++]=P.b,O[D++]=P.a,O[D++]=d,O[D++]=A,this.twoColorTint&&(O[D++]=0,O[D++]=0,O[D++]=0,O[D++]=0),this.batcher.draw(t,O,this.QUAD_TRIANGLES)},SceneRenderer.prototype.drawTextureRotated=function(r,o,a,h,d,T,S,A,P,O){void 0===P&&(P=null),this.enableRenderer(this.batcher),null===P&&(P=this.WHITE);var D=this.QUAD,L=o+T,I=a+S,B=-T,N=-S,G=h-T,Y=d-S,X=B,U=N,z=B,V=Y,W=G,H=Y,q=G,Z=N,K=0,J=0,Q=0,$=0,tt=0,et=0,it=0,nt=0;if(0!=A){var rt=t.MathUtils.cosDeg(A),st=t.MathUtils.sinDeg(A);Q=(tt=rt*W-st*H)+((K=rt*X-st*U)-(it=rt*z-st*V)),$=(et=st*W+rt*H)+((J=st*X+rt*U)-(nt=st*z+rt*V))}else K=X,J=U,it=z,nt=V,tt=W,et=H,Q=q,$=Z;K+=L,J+=I,Q+=L,$+=I,tt+=L,et+=I,it+=L,nt+=I;var ot=0;D[ot++]=K,D[ot++]=J,D[ot++]=P.r,D[ot++]=P.g,D[ot++]=P.b,D[ot++]=P.a,D[ot++]=0,D[ot++]=1,this.twoColorTint&&(D[ot++]=0,D[ot++]=0,D[ot++]=0,D[ot++]=0),D[ot++]=Q,D[ot++]=$,D[ot++]=P.r,D[ot++]=P.g,D[ot++]=P.b,D[ot++]=P.a,D[ot++]=1,D[ot++]=1,this.twoColorTint&&(D[ot++]=0,D[ot++]=0,D[ot++]=0,D[ot++]=0),D[ot++]=tt,D[ot++]=et,D[ot++]=P.r,D[ot++]=P.g,D[ot++]=P.b,D[ot++]=P.a,D[ot++]=1,D[ot++]=0,this.twoColorTint&&(D[ot++]=0,D[ot++]=0,D[ot++]=0,D[ot++]=0),D[ot++]=it,D[ot++]=nt,D[ot++]=P.r,D[ot++]=P.g,D[ot++]=P.b,D[ot++]=P.a,D[ot++]=0,D[ot++]=0,this.twoColorTint&&(D[ot++]=0,D[ot++]=0,D[ot++]=0,D[ot++]=0),this.batcher.draw(r,D,this.QUAD_TRIANGLES)},SceneRenderer.prototype.drawRegion=function(t,r,o,a,h,d,T){void 0===d&&(d=null),this.enableRenderer(this.batcher),null===d&&(d=this.WHITE);var S=this.QUAD,A=0;S[A++]=r,S[A++]=o,S[A++]=d.r,S[A++]=d.g,S[A++]=d.b,S[A++]=d.a,S[A++]=t.u,S[A++]=t.v2,this.twoColorTint&&(S[A++]=0,S[A++]=0,S[A++]=0,S[A++]=0),S[A++]=r+a,S[A++]=o,S[A++]=d.r,S[A++]=d.g,S[A++]=d.b,S[A++]=d.a,S[A++]=t.u2,S[A++]=t.v2,this.twoColorTint&&(S[A++]=0,S[A++]=0,S[A++]=0,S[A++]=0),S[A++]=r+a,S[A++]=o+h,S[A++]=d.r,S[A++]=d.g,S[A++]=d.b,S[A++]=d.a,S[A++]=t.u2,S[A++]=t.v,this.twoColorTint&&(S[A++]=0,S[A++]=0,S[A++]=0,S[A++]=0),S[A++]=r,S[A++]=o+h,S[A++]=d.r,S[A++]=d.g,S[A++]=d.b,S[A++]=d.a,S[A++]=t.u,S[A++]=t.v,this.twoColorTint&&(S[A++]=0,S[A++]=0,S[A++]=0,S[A++]=0),this.batcher.draw(t.texture,S,this.QUAD_TRIANGLES)},SceneRenderer.prototype.line=function(t,r,o,a,h,d){void 0===h&&(h=null),this.enableRenderer(this.shapes),this.shapes.line(t,r,o,a,h)},SceneRenderer.prototype.triangle=function(t,r,o,a,h,d,T,S,A,P){void 0===S&&(S=null),void 0===A&&(A=null),void 0===P&&(P=null),this.enableRenderer(this.shapes),this.shapes.triangle(t,r,o,a,h,d,T,S,A,P)},SceneRenderer.prototype.quad=function(t,r,o,a,h,d,T,S,A,P,O,D,L){void 0===P&&(P=null),void 0===O&&(O=null),void 0===D&&(D=null),void 0===L&&(L=null),this.enableRenderer(this.shapes),this.shapes.quad(t,r,o,a,h,d,T,S,A,P,O,D,L)},SceneRenderer.prototype.rect=function(t,r,o,a,h,d){void 0===d&&(d=null),this.enableRenderer(this.shapes),this.shapes.rect(t,r,o,a,h,d)},SceneRenderer.prototype.rectLine=function(t,r,o,a,h,d,T){void 0===T&&(T=null),this.enableRenderer(this.shapes),this.shapes.rectLine(t,r,o,a,h,d,T)},SceneRenderer.prototype.polygon=function(t,r,o,a){void 0===a&&(a=null),this.enableRenderer(this.shapes),this.shapes.polygon(t,r,o,a)},SceneRenderer.prototype.circle=function(t,r,o,a,h,d){void 0===h&&(h=null),void 0===d&&(d=0),this.enableRenderer(this.shapes),this.shapes.circle(t,r,o,a,h,d)},SceneRenderer.prototype.curve=function(t,r,o,a,h,d,T,S,A,P){void 0===P&&(P=null),this.enableRenderer(this.shapes),this.shapes.curve(t,r,o,a,h,d,T,S,A,P)},SceneRenderer.prototype.end=function(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null},SceneRenderer.prototype.resize=function(t){var r=this.canvas,a=r.clientWidth,h=r.clientHeight;if(r.width==a&&r.height==h||(r.width=a,r.height=h),this.context.gl.viewport(0,0,r.width,r.height),t===o.Stretch);else if(t===o.Expand)this.camera.setViewport(a,h);else if(t===o.Fit){var d=r.width,T=r.height,S=this.camera.viewportWidth,A=this.camera.viewportHeight,P=A/S<T/d?S/d:A/T;this.camera.viewportWidth=d*P,this.camera.viewportHeight=T*P}this.camera.update()},SceneRenderer.prototype.enableRenderer=function(t){this.activeRenderer!==t&&(this.end(),t instanceof r.PolygonBatcher?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(r.Shader.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):t instanceof r.ShapeRenderer?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(r.Shader.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer)},SceneRenderer.prototype.dispose=function(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose()},SceneRenderer}(),r.SceneRenderer=a,function(t){t[t.Stretch=0]="Stretch",t[t.Expand=1]="Expand",t[t.Fit=2]="Fit"}(o=r.ResizeMode||(r.ResizeMode={}))}(a||(a={})),function(t){var r,o;r=t.webgl||(t.webgl={}),o=function(){function Shader(t,o,a){this.vertexShader=o,this.fragmentShader=a,this.vs=null,this.fs=null,this.program=null,this.tmp2x2=new Float32Array(4),this.tmp3x3=new Float32Array(9),this.tmp4x4=new Float32Array(16),this.vsSource=o,this.fsSource=a,this.context=t instanceof r.ManagedWebGLRenderingContext?t:new r.ManagedWebGLRenderingContext(t),this.context.addRestorable(this),this.compile()}return Shader.prototype.getProgram=function(){return this.program},Shader.prototype.getVertexShader=function(){return this.vertexShader},Shader.prototype.getFragmentShader=function(){return this.fragmentShader},Shader.prototype.getVertexShaderSource=function(){return this.vsSource},Shader.prototype.getFragmentSource=function(){return this.fsSource},Shader.prototype.compile=function(){var t=this.context.gl;try{this.vs=this.compileShader(t.VERTEX_SHADER,this.vertexShader),this.fs=this.compileShader(t.FRAGMENT_SHADER,this.fragmentShader),this.program=this.compileProgram(this.vs,this.fs)}catch(r){throw this.dispose(),r}},Shader.prototype.compileShader=function(t,r){var o=this.context.gl,a=o.createShader(t);if(o.shaderSource(a,r),o.compileShader(a),!o.getShaderParameter(a,o.COMPILE_STATUS)){var h="Couldn't compile shader: "+o.getShaderInfoLog(a);if(o.deleteShader(a),!o.isContextLost())throw new Error(h)}return a},Shader.prototype.compileProgram=function(t,r){var o=this.context.gl,a=o.createProgram();if(o.attachShader(a,t),o.attachShader(a,r),o.linkProgram(a),!o.getProgramParameter(a,o.LINK_STATUS)){var h="Couldn't compile shader program: "+o.getProgramInfoLog(a);if(o.deleteProgram(a),!o.isContextLost())throw new Error(h)}return a},Shader.prototype.restore=function(){this.compile()},Shader.prototype.bind=function(){this.context.gl.useProgram(this.program)},Shader.prototype.unbind=function(){this.context.gl.useProgram(null)},Shader.prototype.setUniformi=function(t,r){this.context.gl.uniform1i(this.getUniformLocation(t),r)},Shader.prototype.setUniformf=function(t,r){this.context.gl.uniform1f(this.getUniformLocation(t),r)},Shader.prototype.setUniform2f=function(t,r,o){this.context.gl.uniform2f(this.getUniformLocation(t),r,o)},Shader.prototype.setUniform3f=function(t,r,o,a){this.context.gl.uniform3f(this.getUniformLocation(t),r,o,a)},Shader.prototype.setUniform4f=function(t,r,o,a,h){this.context.gl.uniform4f(this.getUniformLocation(t),r,o,a,h)},Shader.prototype.setUniform2x2f=function(t,r){var o=this.context.gl;this.tmp2x2.set(r),o.uniformMatrix2fv(this.getUniformLocation(t),!1,this.tmp2x2)},Shader.prototype.setUniform3x3f=function(t,r){var o=this.context.gl;this.tmp3x3.set(r),o.uniformMatrix3fv(this.getUniformLocation(t),!1,this.tmp3x3)},Shader.prototype.setUniform4x4f=function(t,r){var o=this.context.gl;this.tmp4x4.set(r),o.uniformMatrix4fv(this.getUniformLocation(t),!1,this.tmp4x4)},Shader.prototype.getUniformLocation=function(t){var r=this.context.gl,o=r.getUniformLocation(this.program,t);if(!o&&!r.isContextLost())throw new Error("Couldn't find location for uniform "+t);return o},Shader.prototype.getAttributeLocation=function(t){var r=this.context.gl,o=r.getAttribLocation(this.program,t);if(-1==o&&!r.isContextLost())throw new Error("Couldn't find location for attribute "+t);return o},Shader.prototype.dispose=function(){this.context.removeRestorable(this);var t=this.context.gl;this.vs&&(t.deleteShader(this.vs),this.vs=null),this.fs&&(t.deleteShader(this.fs),this.fs=null),this.program&&(t.deleteProgram(this.program),this.program=null)},Shader.newColoredTextured=function(t){return new Shader(t,"\n\t\t\t\tattribute vec4 "+Shader.POSITION+";\n\t\t\t\tattribute vec4 "+Shader.COLOR+";\n\t\t\t\tattribute vec2 "+Shader.TEXCOORDS+";\n\t\t\t\tuniform mat4 "+Shader.MVP_MATRIX+";\n\t\t\t\tvarying vec4 v_color;\n\t\t\t\tvarying vec2 v_texCoords;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_color = "+Shader.COLOR+";\n\t\t\t\t\tv_texCoords = "+Shader.TEXCOORDS+";\n\t\t\t\t\tgl_Position = "+Shader.MVP_MATRIX+" * "+Shader.POSITION+";\n\t\t\t\t}\n\t\t\t","\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_color;\n\t\t\t\tvarying vec2 v_texCoords;\n\t\t\t\tuniform sampler2D u_texture;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tgl_FragColor = v_color * texture2D(u_texture, v_texCoords);\n\t\t\t\t}\n\t\t\t")},Shader.newTwoColoredTextured=function(t){return new Shader(t,"\n\t\t\t\tattribute vec4 "+Shader.POSITION+";\n\t\t\t\tattribute vec4 "+Shader.COLOR+";\n\t\t\t\tattribute vec4 "+Shader.COLOR2+";\n\t\t\t\tattribute vec2 "+Shader.TEXCOORDS+";\n\t\t\t\tuniform mat4 "+Shader.MVP_MATRIX+";\n\t\t\t\tvarying vec4 v_light;\n\t\t\t\tvarying vec4 v_dark;\n\t\t\t\tvarying vec2 v_texCoords;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_light = "+Shader.COLOR+";\n\t\t\t\t\tv_dark = "+Shader.COLOR2+";\n\t\t\t\t\tv_texCoords = "+Shader.TEXCOORDS+";\n\t\t\t\t\tgl_Position = "+Shader.MVP_MATRIX+" * "+Shader.POSITION+";\n\t\t\t\t}\n\t\t\t","\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_light;\n\t\t\t\tvarying LOWP vec4 v_dark;\n\t\t\t\tvarying vec2 v_texCoords;\n\t\t\t\tuniform sampler2D u_texture;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tvec4 texColor = texture2D(u_texture, v_texCoords);\n\t\t\t\t\tgl_FragColor.a = texColor.a * v_light.a;\n\t\t\t\t\tgl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;\n\t\t\t\t}\n\t\t\t")},Shader.newColored=function(t){return new Shader(t,"\n\t\t\t\tattribute vec4 "+Shader.POSITION+";\n\t\t\t\tattribute vec4 "+Shader.COLOR+";\n\t\t\t\tuniform mat4 "+Shader.MVP_MATRIX+";\n\t\t\t\tvarying vec4 v_color;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_color = "+Shader.COLOR+";\n\t\t\t\t\tgl_Position = "+Shader.MVP_MATRIX+" * "+Shader.POSITION+";\n\t\t\t\t}\n\t\t\t","\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_color;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tgl_FragColor = v_color;\n\t\t\t\t}\n\t\t\t")},Shader.MVP_MATRIX="u_projTrans",Shader.POSITION="a_position",Shader.COLOR="a_color",Shader.COLOR2="a_color2",Shader.TEXCOORDS="a_texCoords",Shader.SAMPLER="u_texture",Shader}(),r.Shader=o}(a||(a={})),function(t){var r,o,a;r=t.webgl||(t.webgl={}),a=function(){function ShapeRenderer(a,h){if(void 0===h&&(h=10920),this.isDrawing=!1,this.shapeType=o.Filled,this.color=new t.Color(1,1,1,1),this.vertexIndex=0,this.tmp=new t.Vector2,h>10920)throw new Error("Can't have more than 10920 triangles per batch: "+h);this.context=a instanceof r.ManagedWebGLRenderingContext?a:new r.ManagedWebGLRenderingContext(a),this.mesh=new r.Mesh(a,[new r.Position2Attribute,new r.ColorAttribute],h,0),this.srcBlend=this.context.gl.SRC_ALPHA,this.dstBlend=this.context.gl.ONE_MINUS_SRC_ALPHA}return ShapeRenderer.prototype.begin=function(t){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=t,this.vertexIndex=0,this.isDrawing=!0;var r=this.context.gl;r.enable(r.BLEND),r.blendFunc(this.srcBlend,this.dstBlend)},ShapeRenderer.prototype.setBlendMode=function(t,r){var o=this.context.gl;this.srcBlend=t,this.dstBlend=r,this.isDrawing&&(this.flush(),o.blendFunc(this.srcBlend,this.dstBlend))},ShapeRenderer.prototype.setColor=function(t){this.color.setFromColor(t)},ShapeRenderer.prototype.setColorWith=function(t,r,o,a){this.color.set(t,r,o,a)},ShapeRenderer.prototype.point=function(t,r,a){void 0===a&&(a=null),this.check(o.Point,1),null===a&&(a=this.color),this.vertex(t,r,a)},ShapeRenderer.prototype.line=function(t,r,a,h,d){void 0===d&&(d=null),this.check(o.Line,2),this.mesh.getVertices(),this.vertexIndex,null===d&&(d=this.color),this.vertex(t,r,d),this.vertex(a,h,d)},ShapeRenderer.prototype.triangle=function(t,r,a,h,d,T,S,A,P,O){void 0===A&&(A=null),void 0===P&&(P=null),void 0===O&&(O=null),this.check(t?o.Filled:o.Line,3),this.mesh.getVertices(),this.vertexIndex,null===A&&(A=this.color),null===P&&(P=this.color),null===O&&(O=this.color),t?(this.vertex(r,a,A),this.vertex(h,d,P),this.vertex(T,S,O)):(this.vertex(r,a,A),this.vertex(h,d,P),this.vertex(h,d,A),this.vertex(T,S,P),this.vertex(T,S,A),this.vertex(r,a,P))},ShapeRenderer.prototype.quad=function(t,r,a,h,d,T,S,A,P,O,D,L,I){void 0===O&&(O=null),void 0===D&&(D=null),void 0===L&&(L=null),void 0===I&&(I=null),this.check(t?o.Filled:o.Line,3),this.mesh.getVertices(),this.vertexIndex,null===O&&(O=this.color),null===D&&(D=this.color),null===L&&(L=this.color),null===I&&(I=this.color),t?(this.vertex(r,a,O),this.vertex(h,d,D),this.vertex(T,S,L),this.vertex(T,S,L),this.vertex(A,P,I),this.vertex(r,a,O)):(this.vertex(r,a,O),this.vertex(h,d,D),this.vertex(h,d,D),this.vertex(T,S,L),this.vertex(T,S,L),this.vertex(A,P,I),this.vertex(A,P,I),this.vertex(r,a,O))},ShapeRenderer.prototype.rect=function(t,r,o,a,h,d){void 0===d&&(d=null),this.quad(t,r,o,r+a,o,r+a,o+h,r,o+h,d,d,d,d)},ShapeRenderer.prototype.rectLine=function(t,r,a,h,d,T,S){void 0===S&&(S=null),this.check(t?o.Filled:o.Line,8),null===S&&(S=this.color);var A=this.tmp.set(d-a,r-h);A.normalize(),T*=.5;var P=A.x*T,O=A.y*T;t?(this.vertex(r+P,a+O,S),this.vertex(r-P,a-O,S),this.vertex(h+P,d+O,S),this.vertex(h-P,d-O,S),this.vertex(h+P,d+O,S),this.vertex(r-P,a-O,S)):(this.vertex(r+P,a+O,S),this.vertex(r-P,a-O,S),this.vertex(h+P,d+O,S),this.vertex(h-P,d-O,S),this.vertex(h+P,d+O,S),this.vertex(r+P,a+O,S),this.vertex(h-P,d-O,S),this.vertex(r-P,a-O,S))},ShapeRenderer.prototype.x=function(t,r,o){this.line(t-o,r-o,t+o,r+o),this.line(t-o,r+o,t+o,r-o)},ShapeRenderer.prototype.polygon=function(t,r,a,h){if(void 0===h&&(h=null),a<3)throw new Error("Polygon must contain at least 3 vertices");this.check(o.Line,2*a),null===h&&(h=this.color),this.mesh.getVertices(),this.vertexIndex,a<<=1;for(var d=t[r<<=1],T=t[r+1],S=r+a,A=r,P=r+a-2;A<P;A+=2){var O=t[A],D=t[A+1],L=0,I=0;A+2>=S?(L=d,I=T):(L=t[A+2],I=t[A+3]),this.vertex(O,D,h),this.vertex(L,I,h)}},ShapeRenderer.prototype.circle=function(r,a,h,d,T,S){if(void 0===T&&(T=null),void 0===S&&(S=0),0===S&&(S=Math.max(1,6*t.MathUtils.cbrt(d)|0)),S<=0)throw new Error("segments must be > 0.");null===T&&(T=this.color);var A=2*t.MathUtils.PI/S,P=Math.cos(A),O=Math.sin(A),D=d,L=0;if(r){for(this.check(o.Filled,3*S+3),S--,B=0;B<S;B++){this.vertex(a,h,T),this.vertex(a+D,h+L,T);var I=D;D=P*D-O*L,L=O*I+P*L,this.vertex(a+D,h+L,T)}this.vertex(a,h,T),this.vertex(a+D,h+L,T)}else{this.check(o.Line,2*S+2);for(var B=0;B<S;B++){this.vertex(a+D,h+L,T);var N=D;D=P*D-O*L,L=O*N+P*L,this.vertex(a+D,h+L,T)}this.vertex(a+D,h+L,T)}D=d,L=0,this.vertex(a+D,h+L,T)},ShapeRenderer.prototype.curve=function(t,r,a,h,d,T,S,A,P,O){void 0===O&&(O=null),this.check(o.Line,2*P+2),null===O&&(O=this.color);for(var D=1/P,L=D*D,I=D*D*D,B=3*D,N=3*L,G=6*L,Y=6*I,X=t-2*a+d,U=r-2*h+T,z=3*(a-d)-t+S,V=3*(h-T)-r+A,W=t,H=r,q=(a-t)*B+X*N+z*I,Z=(h-r)*B+U*N+V*I,K=X*G+z*Y,J=U*G+V*Y,Q=z*Y,$=V*Y;P-- >0;)this.vertex(W,H,O),W+=q,H+=Z,q+=K,Z+=J,K+=Q,J+=$,this.vertex(W,H,O);this.vertex(W,H,O),this.vertex(S,A,O)},ShapeRenderer.prototype.vertex=function(t,r,o){var a=this.vertexIndex,h=this.mesh.getVertices();h[a++]=t,h[a++]=r,h[a++]=o.r,h[a++]=o.g,h[a++]=o.b,h[a++]=o.a,this.vertexIndex=a},ShapeRenderer.prototype.end=function(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush(),this.context.gl.disable(this.context.gl.BLEND),this.isDrawing=!1},ShapeRenderer.prototype.flush=function(){0!=this.vertexIndex&&(this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0)},ShapeRenderer.prototype.check=function(t,r){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==t){if(!(this.mesh.maxVertices()-this.mesh.numVertices()<r))return;this.flush()}else this.flush(),this.shapeType=t},ShapeRenderer.prototype.dispose=function(){this.mesh.dispose()},ShapeRenderer}(),r.ShapeRenderer=a,function(t){t[t.Point=0]="Point",t[t.Line=1]="Line",t[t.Filled=4]="Filled"}(o=r.ShapeType||(r.ShapeType={}))}(a||(a={})),function(t){var r,o;r=t.webgl||(t.webgl={}),o=function(){function SkeletonDebugRenderer(o){this.boneLineColor=new t.Color(1,0,0,1),this.boneOriginColor=new t.Color(0,1,0,1),this.attachmentLineColor=new t.Color(0,0,1,.5),this.triangleLineColor=new t.Color(1,.64,0,.5),this.pathColor=(new t.Color).setFromString("FF7F00"),this.clipColor=new t.Color(.8,0,0,2),this.aabbColor=new t.Color(0,1,0,.5),this.drawBones=!0,this.drawRegionAttachments=!0,this.drawBoundingBoxes=!0,this.drawMeshHull=!0,this.drawMeshTriangles=!0,this.drawPaths=!0,this.drawSkeletonXY=!1,this.drawClipping=!0,this.premultipliedAlpha=!1,this.scale=1,this.boneWidth=2,this.bounds=new t.SkeletonBounds,this.temp=new Array,this.vertices=t.Utils.newFloatArray(2048),this.context=o instanceof r.ManagedWebGLRenderingContext?o:new r.ManagedWebGLRenderingContext(o)}return SkeletonDebugRenderer.prototype.draw=function(r,o,a){void 0===a&&(a=null);var h=o.x,d=o.y,T=this.context.gl,S=this.premultipliedAlpha?T.ONE:T.SRC_ALPHA;r.setBlendMode(S,T.ONE_MINUS_SRC_ALPHA);var A=o.bones;if(this.drawBones){r.setColor(this.boneLineColor);for(var P=0,O=A.length;P<O;P++){var D=A[P];if(!(a&&a.indexOf(D.data.name)>-1)&&null!=D.parent){var L=h+D.data.length*D.a+D.worldX,I=d+D.data.length*D.c+D.worldY;r.rectLine(!0,h+D.worldX,d+D.worldY,L,I,this.boneWidth*this.scale)}}this.drawSkeletonXY&&r.x(h,d,4*this.scale)}if(this.drawRegionAttachments)for(r.setColor(this.attachmentLineColor),P=0,O=(ct=o.slots).length;P<O;P++)if((ft=(dt=ct[P]).getAttachment())instanceof t.RegionAttachment){var B=ft,N=this.vertices;B.computeWorldVertices(dt.bone,N,0,2),r.line(N[0],N[1],N[2],N[3]),r.line(N[2],N[3],N[4],N[5]),r.line(N[4],N[5],N[6],N[7]),r.line(N[6],N[7],N[0],N[1])}if(this.drawMeshHull||this.drawMeshTriangles)for(P=0,O=(ct=o.slots).length;P<O;P++)if((dt=ct[P]).bone.active&&(ft=dt.getAttachment())instanceof t.MeshAttachment){var G=ft;N=this.vertices,G.computeWorldVertices(dt,0,G.worldVerticesLength,N,0,2);var Y=G.triangles,X=G.hullLength;if(this.drawMeshTriangles){r.setColor(this.triangleLineColor);for(var U=0,z=Y.length;U<z;U+=3){var V=2*Y[U],W=2*Y[U+1],H=2*Y[U+2];r.triangle(!1,N[V],N[V+1],N[W],N[W+1],N[H],N[H+1])}}if(this.drawMeshHull&&X>0){r.setColor(this.attachmentLineColor);var q=N[(X=2*(X>>1))-2],Z=N[X-1];for(U=0,z=X;U<z;U+=2)L=N[U],I=N[U+1],r.line(L,I,q,Z),q=L,Z=I}}if(this.drawBoundingBoxes){var K=this.bounds;K.update(o,!0),r.setColor(this.aabbColor),r.rect(!1,K.minX,K.minY,K.getWidth(),K.getHeight());var J=K.polygons,Q=K.boundingBoxes;for(P=0,O=J.length;P<O;P++){var $=J[P];r.setColor(Q[P].color),r.polygon($,0,$.length)}}if(this.drawPaths)for(P=0,O=(ct=o.slots).length;P<O;P++)if((dt=ct[P]).bone.active&&(ft=dt.getAttachment())instanceof t.PathAttachment){var tt=ft,et=(z=tt.worldVerticesLength,this.temp=t.Utils.setArraySize(this.temp,z,0));tt.computeWorldVertices(dt,0,z,et,0,2);var it=this.pathColor,nt=et[2],rt=et[3],st=0,ot=0;if(tt.closed){r.setColor(it);var at=et[0],ht=et[1],lt=et[z-2],ut=et[z-1];st=et[z-4],ot=et[z-3],r.curve(nt,rt,at,ht,lt,ut,st,ot,32),r.setColor(SkeletonDebugRenderer.LIGHT_GRAY),r.line(nt,rt,at,ht),r.line(st,ot,lt,ut)}for(z-=4,U=4;U<z;U+=6)at=et[U],ht=et[U+1],lt=et[U+2],ut=et[U+3],st=et[U+4],ot=et[U+5],r.setColor(it),r.curve(nt,rt,at,ht,lt,ut,st,ot,32),r.setColor(SkeletonDebugRenderer.LIGHT_GRAY),r.line(nt,rt,at,ht),r.line(st,ot,lt,ut),nt=st,rt=ot}if(this.drawBones)for(r.setColor(this.boneOriginColor),P=0,O=A.length;P<O;P++)D=A[P],a&&a.indexOf(D.data.name)>-1||r.circle(!0,h+D.worldX,d+D.worldY,3*this.scale,SkeletonDebugRenderer.GREEN,8);if(this.drawClipping){var ct=o.slots;for(r.setColor(this.clipColor),P=0,O=ct.length;P<O;P++){var dt,ft;if((dt=ct[P]).bone.active&&(ft=dt.getAttachment())instanceof t.ClippingAttachment){var pt=ft;z=pt.worldVerticesLength,et=this.temp=t.Utils.setArraySize(this.temp,z,0),pt.computeWorldVertices(dt,0,z,et,0,2);for(var gt=0,vt=et.length;gt<vt;gt+=2)L=et[gt],I=et[gt+1],st=et[(gt+2)%et.length],ot=et[(gt+3)%et.length],r.line(L,I,st,ot)}}}},SkeletonDebugRenderer.prototype.dispose=function(){},SkeletonDebugRenderer.LIGHT_GRAY=new t.Color(192/255,192/255,192/255,1),SkeletonDebugRenderer.GREEN=new t.Color(0,1,0,1),SkeletonDebugRenderer}(),r.SkeletonDebugRenderer=o}(a||(a={})),function(t){var r,o,a;r=t.webgl||(t.webgl={}),o=function o(t,r,a){this.vertices=t,this.numVertices=r,this.numFloats=a},a=function(){function SkeletonRenderer(r,a){void 0===a&&(a=!0),this.premultipliedAlpha=!1,this.vertexEffect=null,this.tempColor=new t.Color,this.tempColor2=new t.Color,this.vertexSize=8,this.twoColorTint=!1,this.renderable=new o(null,0,0),this.clipper=new t.SkeletonClipping,this.temp=new t.Vector2,this.temp2=new t.Vector2,this.temp3=new t.Color,this.temp4=new t.Color,this.twoColorTint=a,a&&(this.vertexSize+=4),this.vertices=t.Utils.newFloatArray(1024*this.vertexSize)}return SkeletonRenderer.prototype.draw=function(o,a,h,d){void 0===h&&(h=-1),void 0===d&&(d=-1);var T=this.clipper,S=this.premultipliedAlpha,A=this.twoColorTint,P=null,O=this.temp,D=this.temp2,L=this.temp3,I=this.temp4,B=this.renderable,N=null,G=null,Y=a.drawOrder,X=null,U=a.color,z=A?12:8,V=!1;-1==h&&(V=!0);for(var W=0,H=Y.length;W<H;W++){var q=T.isClipping()?2:z,Z=Y[W];if(Z.bone.active)if(h>=0&&h==Z.data.index&&(V=!0),V){d>=0&&d==Z.data.index&&(V=!1);var K=Z.getAttachment(),J=null;if(K instanceof t.RegionAttachment){var Q=K;B.vertices=this.vertices,B.numVertices=4,B.numFloats=q<<2,Q.computeWorldVertices(Z.bone,B.vertices,0,q),G=SkeletonRenderer.QUAD_TRIANGLES,N=Q.uvs,J=Q.region.renderObject.texture,X=Q.color}else{if(!(K instanceof t.MeshAttachment)){if(K instanceof t.ClippingAttachment){var $=K;T.clipStart(Z,$);continue}T.clipEndWithSlot(Z);continue}var tt=K;B.vertices=this.vertices,B.numVertices=tt.worldVerticesLength>>1,B.numFloats=B.numVertices*q,B.numFloats>B.vertices.length&&(B.vertices=this.vertices=t.Utils.newFloatArray(B.numFloats)),tt.computeWorldVertices(Z,0,tt.worldVerticesLength,B.vertices,0,q),G=tt.triangles,J=tt.region.renderObject.texture,N=tt.uvs,X=tt.color}if(null!=J){var et=Z.color,it=this.tempColor;it.r=U.r*et.r*X.r,it.g=U.g*et.g*X.g,it.b=U.b*et.b*X.b,it.a=U.a*et.a*X.a,S&&(it.r*=it.a,it.g*=it.a,it.b*=it.a);var nt=this.tempColor2;null==Z.darkColor?nt.set(0,0,0,1):(S?(nt.r=Z.darkColor.r*it.a,nt.g=Z.darkColor.g*it.a,nt.b=Z.darkColor.b*it.a):nt.setFromColor(Z.darkColor),nt.a=S?1:0);var rt=Z.data.blendMode;if(rt!=P&&(P=rt,o.setBlendMode(r.WebGLBlendModeConverter.getSourceGLBlendMode(P,S),r.WebGLBlendModeConverter.getDestGLBlendMode(P))),T.isClipping()){T.clipTriangles(B.vertices,B.numFloats,G,G.length,N,it,nt,A);var st=new Float32Array(T.clippedVertices),ot=T.clippedTriangles;if(null!=this.vertexEffect){var at=this.vertexEffect,ht=st;if(A){ut=0;for(var lt=st.length;ut<lt;ut+=z)O.x=ht[ut],O.y=ht[ut+1],L.set(ht[ut+2],ht[ut+3],ht[ut+4],ht[ut+5]),D.x=ht[ut+6],D.y=ht[ut+7],I.set(ht[ut+8],ht[ut+9],ht[ut+10],ht[ut+11]),at.transform(O,D,L,I),ht[ut]=O.x,ht[ut+1]=O.y,ht[ut+2]=L.r,ht[ut+3]=L.g,ht[ut+4]=L.b,ht[ut+5]=L.a,ht[ut+6]=D.x,ht[ut+7]=D.y,ht[ut+8]=I.r,ht[ut+9]=I.g,ht[ut+10]=I.b,ht[ut+11]=I.a}else for(var ut=0,ct=st.length;ut<ct;ut+=z)O.x=ht[ut],O.y=ht[ut+1],L.set(ht[ut+2],ht[ut+3],ht[ut+4],ht[ut+5]),D.x=ht[ut+6],D.y=ht[ut+7],I.set(0,0,0,0),at.transform(O,D,L,I),ht[ut]=O.x,ht[ut+1]=O.y,ht[ut+2]=L.r,ht[ut+3]=L.g,ht[ut+4]=L.b,ht[ut+5]=L.a,ht[ut+6]=D.x,ht[ut+7]=D.y}o.draw(J,st,ot)}else{if(ht=B.vertices,null!=this.vertexEffect)if(at=this.vertexEffect,A){ut=0,ft=0;for(var dt=B.numFloats;ut<dt;ut+=z,ft+=2)O.x=ht[ut],O.y=ht[ut+1],D.x=N[ft],D.y=N[ft+1],L.setFromColor(it),I.setFromColor(nt),at.transform(O,D,L,I),ht[ut]=O.x,ht[ut+1]=O.y,ht[ut+2]=L.r,ht[ut+3]=L.g,ht[ut+4]=L.b,ht[ut+5]=L.a,ht[ut+6]=D.x,ht[ut+7]=D.y,ht[ut+8]=I.r,ht[ut+9]=I.g,ht[ut+10]=I.b,ht[ut+11]=I.a}else for(var ut=0,ft=0,pt=B.numFloats;ut<pt;ut+=z,ft+=2)O.x=ht[ut],O.y=ht[ut+1],D.x=N[ft],D.y=N[ft+1],L.setFromColor(it),I.set(0,0,0,0),at.transform(O,D,L,I),ht[ut]=O.x,ht[ut+1]=O.y,ht[ut+2]=L.r,ht[ut+3]=L.g,ht[ut+4]=L.b,ht[ut+5]=L.a,ht[ut+6]=D.x,ht[ut+7]=D.y;else if(A){ut=2,ft=0;for(var gt=B.numFloats;ut<gt;ut+=z,ft+=2)ht[ut]=it.r,ht[ut+1]=it.g,ht[ut+2]=it.b,ht[ut+3]=it.a,ht[ut+4]=N[ft],ht[ut+5]=N[ft+1],ht[ut+6]=nt.r,ht[ut+7]=nt.g,ht[ut+8]=nt.b,ht[ut+9]=nt.a}else{ut=2;for(var ft=0,vt=B.numFloats;ut<vt;ut+=z,ft+=2)ht[ut]=it.r,ht[ut+1]=it.g,ht[ut+2]=it.b,ht[ut+3]=it.a,ht[ut+4]=N[ft],ht[ut+5]=N[ft+1]}var mt=B.vertices.subarray(0,B.numFloats);o.draw(J,mt,G)}}T.clipEndWithSlot(Z)}else T.clipEndWithSlot(Z);else T.clipEndWithSlot(Z)}T.clipEnd()},SkeletonRenderer.QUAD_TRIANGLES=[0,1,2,2,3,0],SkeletonRenderer}(),r.SkeletonRenderer=a}(a||(a={})),function(t){var r,o;r=t.webgl||(t.webgl={}),o=function(){function Vector3(t,r,o){void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=0),this.x=0,this.y=0,this.z=0,this.x=t,this.y=r,this.z=o}return Vector3.prototype.setFrom=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},Vector3.prototype.set=function(t,r,o){return this.x=t,this.y=r,this.z=o,this},Vector3.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},Vector3.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},Vector3.prototype.scale=function(t){return this.x*=t,this.y*=t,this.z*=t,this},Vector3.prototype.normalize=function(){var t=this.length();return 0==t||(t=1/t,this.x*=t,this.y*=t,this.z*=t),this},Vector3.prototype.cross=function(t){return this.set(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},Vector3.prototype.multiply=function(t){var o=t.values;return this.set(this.x*o[r.M00]+this.y*o[r.M01]+this.z*o[r.M02]+o[r.M03],this.x*o[r.M10]+this.y*o[r.M11]+this.z*o[r.M12]+o[r.M13],this.x*o[r.M20]+this.y*o[r.M21]+this.z*o[r.M22]+o[r.M23])},Vector3.prototype.project=function(t){var o=t.values,a=1/(this.x*o[r.M30]+this.y*o[r.M31]+this.z*o[r.M32]+o[r.M33]);return this.set((this.x*o[r.M00]+this.y*o[r.M01]+this.z*o[r.M02]+o[r.M03])*a,(this.x*o[r.M10]+this.y*o[r.M11]+this.z*o[r.M12]+o[r.M13])*a,(this.x*o[r.M20]+this.y*o[r.M21]+this.z*o[r.M22]+o[r.M23])*a)},Vector3.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},Vector3.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},Vector3.prototype.distance=function(t){var r=t.x-this.x,o=t.y-this.y,a=t.z-this.z;return Math.sqrt(r*r+o*o+a*a)},Vector3}(),r.Vector3=o}(a||(a={})),function(t){!function(r){var o=function(){function ManagedWebGLRenderingContext(t,r){void 0===r&&(r={alpha:"true"}),this.restorables=new Array,t instanceof HTMLCanvasElement||t instanceof EventTarget?this.setupCanvas(t,r):(this.gl=t,this.canvas=this.gl.canvas)}return ManagedWebGLRenderingContext.prototype.setupCanvas=function(t,r){var o=this;this.gl=t.getContext("webgl2",r)||t.getContext("webgl",r),this.canvas=t,t.addEventListener("webglcontextlost",(function(t){t&&t.preventDefault()})),t.addEventListener("webglcontextrestored",(function(t){for(var r=0,a=o.restorables.length;r<a;r++)o.restorables[r].restore()}))},ManagedWebGLRenderingContext.prototype.addRestorable=function(t){this.restorables.push(t)},ManagedWebGLRenderingContext.prototype.removeRestorable=function(t){var r=this.restorables.indexOf(t);r>-1&&this.restorables.splice(r,1)},ManagedWebGLRenderingContext}();r.ManagedWebGLRenderingContext=o;var a=function(){function WebGLBlendModeConverter(){}return WebGLBlendModeConverter.getDestGLBlendMode=function(r){switch(r){case t.BlendMode.Normal:return WebGLBlendModeConverter.ONE_MINUS_SRC_ALPHA;case t.BlendMode.Additive:return WebGLBlendModeConverter.ONE;case t.BlendMode.Multiply:case t.BlendMode.Screen:return WebGLBlendModeConverter.ONE_MINUS_SRC_ALPHA;default:throw new Error("Unknown blend mode: "+r)}},WebGLBlendModeConverter.getSourceGLBlendMode=function(r,o){switch(void 0===o&&(o=!1),r){case t.BlendMode.Normal:case t.BlendMode.Additive:return o?WebGLBlendModeConverter.ONE:WebGLBlendModeConverter.SRC_ALPHA;case t.BlendMode.Multiply:return WebGLBlendModeConverter.DST_COLOR;case t.BlendMode.Screen:return WebGLBlendModeConverter.ONE;default:throw new Error("Unknown blend mode: "+r)}},WebGLBlendModeConverter.ZERO=0,WebGLBlendModeConverter.ONE=1,WebGLBlendModeConverter.SRC_COLOR=768,WebGLBlendModeConverter.ONE_MINUS_SRC_COLOR=769,WebGLBlendModeConverter.SRC_ALPHA=770,WebGLBlendModeConverter.ONE_MINUS_SRC_ALPHA=771,WebGLBlendModeConverter.DST_ALPHA=772,WebGLBlendModeConverter.ONE_MINUS_DST_ALPHA=773,WebGLBlendModeConverter.DST_COLOR=774,WebGLBlendModeConverter}();r.WebGLBlendModeConverter=a}(t.webgl||(t.webgl={}))}(a||(a={})),t.exports=a}).call(window)},function(t,r,o){var a=o(0),h=o(11),d=o(204),T=o(7),S=o(218),A=o(219),P=o(220),O=new a({Extends:A,initialize:function SpineFile(t,r,o,a,d,O,D){var L,I,B,N=[],G=t.cacheManager.custom.spine;if(T(r)){var Y=r;for(r=h(Y,"key"),I=new S(t,{key:r,url:h(Y,"jsonURL"),extension:h(Y,"jsonExtension","json"),xhrSettings:h(Y,"jsonXhrSettings")}),a=h(Y,"atlasURL"),d=h(Y,"preMultipliedAlpha"),Array.isArray(a)||(a=[a]),L=0;L<a.length;L++)(B=new P(t,{key:r+"!"+L,url:a[L],extension:h(Y,"atlasExtension","atlas"),xhrSettings:h(Y,"atlasXhrSettings")})).cache=G,N.push(B)}else for(I=new S(t,r,o,O),Array.isArray(a)||(a=[a]),L=0;L<a.length;L++)(B=new P(t,r+"!"+L,a[L],D)).cache=G,N.push(B);N.unshift(I),A.call(this,t,"spine",r,N),this.config.preMultipliedAlpha=d},onFileComplete:function onFileComplete(t){if(-1!==this.files.indexOf(t)&&(this.pending--,"text"===t.type)){for(var r=t.data.split("\n"),o=[],a=0;a<r.length;a++){var T=r[a];""===T.trim()&&a<r.length-1&&(T=r[a+1],o.push(T))}var S=this.config,A=this.loader,P=A.baseURL,O=A.path,D=A.prefix,L=h(S,"baseURL",this.baseURL),I=h(S,"path",t.src.match(/^.*\//))[0],B=h(S,"prefix",this.prefix),N=h(S,"textureXhrSettings");A.setBaseURL(L),A.setPath(I),A.setPrefix(B);for(var G=0;G<o.length;G++){var Y=o[G],X=new d(A,Y,Y,N);A.keyExists(X)||(this.addToMultiFile(X),A.addFile(X))}A.setBaseURL(P),A.setPath(O),A.setPrefix(D)}},addToCache:function addToCache(){if(this.isReadyToProcess()){var t;this.files[0].addToCache();for(var r="",o="",a=!!this.config.preMultipliedAlpha,h=this.loader.textureManager,d=1;d<this.files.length;d++){var T=this.files[d];if("text"===T.type)r=T.key.replace(/![\d]$/,""),t=T.cache,o=o.concat(T.data);else{var S=T.key.trim(),A=S.indexOf("!"),P=S.substr(A+1);h.exists(P)||h.addImage(P,T.data)}T.pendingDestroy()}t.add(r,{preMultipliedAlpha:a,data:o,prefix:this.prefix}),this.complete=!0}}});t.exports=O},function(t,r,o){var a=o(0),h=o(15),d=o(21),T=o(22),S=o(11),A=o(7),P=new a({Extends:d,initialize:function ImageFile(t,r,o,a,h){var T,P="png";if(A(r)){var O=r;r=S(O,"key"),o=S(O,"url"),T=S(O,"normalMap"),a=S(O,"xhrSettings"),P=S(O,"extension",P),h=S(O,"frameConfig")}Array.isArray(o)&&(T=o[1],o=o[0]);var D={type:"image",cache:t.textureManager,extension:P,responseType:"blob",key:r,url:o,xhrSettings:a,config:h};if(d.call(this,t,D),T){var L=new ImageFile(t,this.key,T,a,h);L.type="normalMap",this.setLink(L),t.addFile(L)}},onProcess:function onProcess(){this.state=h.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var t=this;this.data.onload=function(){d.revokeObjectURL(t.data),t.onProcessComplete()},this.data.onerror=function(){d.revokeObjectURL(t.data),t.onProcessError()},d.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function addToCache(){var t,r=this.linkFile;r&&r.state===h.FILE_COMPLETE?(t="image"===this.type?this.cache.addImage(this.key,this.data,r.data):this.cache.addImage(r.key,r.data,this.data),this.pendingDestroy(t),r.pendingDestroy(t)):r||(t=this.cache.addImage(this.key,this.data),this.pendingDestroy(t))}});T.register("image",(function(t,r,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new P(this,t[a]));else this.addFile(new P(this,t,r,o));return this})),t.exports=P},function(t,r,o){t.exports={ADD:o(206),COMPLETE:o(207),FILE_COMPLETE:o(208),FILE_KEY_COMPLETE:o(209),FILE_LOAD_ERROR:o(210),FILE_LOAD:o(211),FILE_PROGRESS:o(212),POST_PROCESS:o(213),PROGRESS:o(214),START:o(215)}},function(t,r){t.exports="addfile"},function(t,r){t.exports="complete"},function(t,r){t.exports="filecomplete"},function(t,r){t.exports="filecomplete-"},function(t,r){t.exports="loaderror"},function(t,r){t.exports="load"},function(t,r){t.exports="fileprogress"},function(t,r){t.exports="postprocess"},function(t,r){t.exports="progress"},function(t,r){t.exports="start"},function(t,r){t.exports=function GetURL(t,r){return!!t.url&&(t.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?t.url:r+t.url)}},function(t,r,o){var a=o(45);t.exports=function XHRLoader(t,r){var o=a(r,t.xhrSettings),h=new XMLHttpRequest;if(h.open("GET",t.src,o.async,o.user,o.password),h.responseType=t.xhrSettings.responseType,h.timeout=o.timeout,o.headers)for(var d in o.headers)h.setRequestHeader(d,o.headers[d]);return o.header&&o.headerValue&&h.setRequestHeader(o.header,o.headerValue),o.requestedWith&&h.setRequestHeader("X-Requested-With",o.requestedWith),o.overrideMimeType&&h.overrideMimeType(o.overrideMimeType),o.withCredentials&&(h.withCredentials=!0),h.onload=t.onLoad.bind(t,h),h.onerror=t.onError.bind(t,h),h.onprogress=t.onProgress.bind(t),h.send(),h}},function(t,r,o){var a=o(0),h=o(15),d=o(21),T=o(22),S=o(11),A=o(10),P=o(7),O=new a({Extends:d,initialize:function JSONFile(t,r,o,a,T){var O="json";if(P(r)){var D=r;r=S(D,"key"),o=S(D,"url"),a=S(D,"xhrSettings"),O=S(D,"extension",O),T=S(D,"dataKey",T)}var L={type:"json",cache:t.cacheManager.json,extension:O,responseType:"text",key:r,url:o,xhrSettings:a,config:T};d.call(this,t,L),P(o)&&(this.data=T?A(o,T):o,this.state=h.FILE_POPULATED)},onProcess:function onProcess(){if(this.state!==h.FILE_POPULATED){this.state=h.FILE_PROCESSING;try{var t=JSON.parse(this.xhrLoader.responseText)}catch(o){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),o}var r=this.config;this.data="string"==typeof r?A(t,r,t):t}this.onProcessComplete()}});T.register("json",(function(t,r,o,a){if(Array.isArray(t))for(var h=0;h<t.length;h++)this.addFile(new O(this,t[h]));else this.addFile(new O(this,t,r,a,o));return this})),t.exports=O},function(t,r,o){var a=new(o(0))({initialize:function MultiFile(t,r,o,a){var h=[];a.forEach((function(t){t&&h.push(t)})),this.loader=t,this.type=r,this.key=o,this.multiKeyIndex=t.multiKeyIndex++,this.files=h,this.complete=!1,this.pending=h.length,this.failed=0,this.config={},this.baseURL=t.baseURL,this.path=t.path,this.prefix=t.prefix;for(var d=0;d<h.length;d++)h[d].multiFile=this},isReadyToProcess:function isReadyToProcess(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function addToMultiFile(t){return this.files.push(t),t.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function onFileComplete(t){-1!==this.files.indexOf(t)&&this.pending--},onFileFailed:function onFileFailed(t){-1!==this.files.indexOf(t)&&this.failed++}});t.exports=a},function(t,r,o){var a=o(0),h=o(15),d=o(21),T=o(22),S=o(11),A=o(7),P=new a({Extends:d,initialize:function TextFile(t,r,o,a){var h="text",T="txt",P=t.cacheManager.text;if(A(r)){var O=r;r=S(O,"key"),o=S(O,"url"),a=S(O,"xhrSettings"),T=S(O,"extension",T),h=S(O,"type",h),P=S(O,"cache",P)}var D={type:h,cache:P,extension:T,responseType:"text",key:r,url:o,xhrSettings:a};d.call(this,t,D)},onProcess:function onProcess(){this.state=h.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});T.register("text",(function(t,r,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new P(this,t[a]));else this.addFile(new P(this,t,r,o));return this})),t.exports=P},function(t,r,o){var a=o(28),h=o(3),d=o(0),T=o(47),S=o(48),A=o(49),P=o(50),O=o(51),D=o(52),L=o(8),I=o(19),B=o(53),N=o(9),G=o(243),Y=o(250),X=new d({Extends:B,Mixins:[T,S,A,P,O,D,Y],initialize:function SpineGameObject(t,r,o,a,h,d,T){B.call(this,t,"Spine"),this.plugin=r,this.skeleton=null,this.skeletonData=null,this.state=null,this.stateData=null,this.root=null,this.bounds=null,this.drawDebug=!1,this.timeScale=1,this.displayOriginX=0,this.displayOriginY=0,this.preMultipliedAlpha=!1,this.blendMode=-1,this.setPosition(o,a),h&&this.setSkeleton(h,d,T)},willRender:function willRender(t,r){var o=!this.skeleton||!(15!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id);if(!r&&!o&&this.parentContainer){var a=this.plugin,h=a.sceneRenderer;a.gl&&h.batcher.isDrawing&&(h.end(),a.renderer.pipelines.rebind())}return o},setAlpha:function setAlpha(t,r){if(void 0===t&&(t=1),r){var o=this.findSlot(r);o&&(o.color.a=h(t,0,1))}else this.alpha=t;return this},alpha:{get:function get(){return this.skeleton.color.a},set:function set(t){var r=h(t,0,1);this.skeleton&&(this.skeleton.color.a=r),0===r?this.renderFlags&=-3:this.renderFlags|=2}},red:{get:function get(){return this.skeleton.color.r},set:function set(t){var r=h(t,0,1);this.skeleton&&(this.skeleton.color.r=r)}},green:{get:function get(){return this.skeleton.color.g},set:function set(t){var r=h(t,0,1);this.skeleton&&(this.skeleton.color.g=r)}},blue:{get:function get(){return this.skeleton.color.b},set:function set(t){var r=h(t,0,1);this.skeleton&&(this.skeleton.color.b=r)}},setColor:function setColor(t,r){void 0===t&&(t=16777215);var o=(t>>16&255)/255,a=(t>>8&255)/255,h=(255&t)/255,d=t>16777215?(t>>>24)/255:null,T=this.skeleton;if(r){var S=this.findSlot(r);S&&(T=S)}return T.color.r=o,T.color.g=a,T.color.b=h,null!==d&&(T.color.a=d),this},setSkeletonFromJSON:function setSkeletonFromJSON(t,r,o,a){return this.setSkeleton(t,r,o,a)},setSkeleton:function setSkeleton(t,r,o,a){this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications());var h=this.plugin.createSkeleton(t,a);this.skeletonData=h.skeletonData,this.preMultipliedAlpha=h.preMultipliedAlpha;var d=h.skeleton;return d.setSkin(),d.setToSetupPose(),this.skeleton=d,h=this.plugin.createAnimationState(d),this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications()),this.state=h.state,this.stateData=h.stateData,this.state.addListener({event:this.onEvent.bind(this),complete:this.onComplete.bind(this),start:this.onStart.bind(this),end:this.onEnd.bind(this),dispose:this.onDispose.bind(this),interrupted:this.onInterrupted.bind(this)}),r&&this.setAnimation(0,r,o),this.root=this.getRootBone(),this.root&&(this.root.rotation=N(L(this.rotation))+90),this.state.apply(d),d.updateCache(),this.updateSize()},onComplete:function onComplete(t){this.emit(G.COMPLETE,t)},onDispose:function onDispose(t){this.emit(G.DISPOSE,t)},onEnd:function onEnd(t){this.emit(G.END,t)},onEvent:function onEvent(t,r){this.emit(G.EVENT,t,r)},onInterrupted:function onInterrupted(t){this.emit(G.INTERRUPTED,t)},onStart:function onStart(t){this.emit(G.START,t)},refresh:function refresh(){return this.root&&(this.root.rotation=N(L(this.rotation))+90),this.updateSize(),this.skeleton.updateCache(),this},setSize:function setSize(t,r,o,a){var h=this.skeleton;return void 0===t&&(t=h.data.width),void 0===r&&(r=h.data.height),void 0===o&&(o=0),void 0===a&&(a=0),this.width=t,this.height=r,this.displayOriginX=h.x-o,this.displayOriginY=h.y-a,this},setOffset:function setOffset(t,r){var o=this.skeleton;return void 0===t&&(t=0),void 0===r&&(r=0),this.displayOriginX=o.x-t,this.displayOriginY=o.y-r,this},updateSize:function updateSize(){var t=this.skeleton,r=this.plugin.renderer.height,o=this.scaleX,a=this.scaleY;t.x=this.x,t.y=r-this.y,t.scaleX=1,t.scaleY=1,t.updateWorldTransform();var h=this.getBounds();return this.width=h.size.x,this.height=h.size.y,this.displayOriginX=this.x-h.offset.x,this.displayOriginY=this.y-(r-(this.height+h.offset.y)),t.scaleX=o,t.scaleY=a,t.updateWorldTransform(),this},scaleX:{get:function get(){return this._scaleX},set:function set(t){this._scaleX=t,this.refresh()}},scaleY:{get:function get(){return this._scaleY},set:function set(t){this._scaleY=t,this.refresh()}},getBoneList:function getBoneList(){var t=[],r=this.skeletonData;if(r)for(var o=0;o<r.bones.length;o++)t.push(r.bones[o].name);return t},getSkinList:function getSkinList(){var t=[],r=this.skeletonData;if(r)for(var o=0;o<r.skins.length;o++)t.push(r.skins[o].name);return t},getSlotList:function getSlotList(){for(var t=[],r=this.skeleton,o=0;o<r.slots.length;o++)t.push(r.slots[o].data.name);return t},getAnimationList:function getAnimationList(){var t=[],r=this.skeletonData;if(r)for(var o=0;o<r.animations.length;o++)t.push(r.animations[o].name);return t},getCurrentAnimation:function getCurrentAnimation(t){void 0===t&&(t=0);var r=this.state.getCurrent(t);if(r)return r.animation},play:function play(t,r,o){return this.setAnimation(0,t,r,o),this},setAnimation:function setAnimation(t,r,o,a){if(void 0===o&&(o=!1),void 0===a&&(a=!1),a&&this.state){var h=this.state.getCurrent(t);if(h&&h.animation.name===r&&!h.isComplete())return}if(this.findAnimation(r))return this.state.setAnimation(t,r,o)},addAnimation:function addAnimation(t,r,o,a){return void 0===o&&(o=!1),void 0===a&&(a=0),this.state.addAnimation(t,r,o,a)},setEmptyAnimation:function setEmptyAnimation(t,r){return this.state.setEmptyAnimation(t,r)},clearTrack:function clearTrack(t){return this.state.clearTrack(t),this},clearTracks:function clearTracks(){return this.state.clearTracks(),this},setSkinByName:function setSkinByName(t){var r=this.skeleton;return r.setSkinByName(t),r.setSlotsToSetupPose(),this.state.apply(r),this},setSkin:function setSkin(t){var r=this.skeleton;return r.setSkin(t),r.setSlotsToSetupPose(),this.state.apply(r),this},setMix:function setMix(t,r,o){return this.stateData.setMix(t,r,o),this},getAttachment:function getAttachment(t,r){return this.skeleton.getAttachment(t,r)},getAttachmentByName:function getAttachmentByName(t,r){return this.skeleton.getAttachmentByName(t,r)},setAttachment:function setAttachment(t,r){if(Array.isArray(t)&&Array.isArray(r)&&t.length===r.length)for(var o=0;o<t.length;o++)this.skeleton.setAttachment(t[o],r[o]);else this.skeleton.setAttachment(t,r);return this},setToSetupPose:function setToSetupPose(){return this.skeleton.setToSetupPose(),this},setSlotsToSetupPose:function setSlotsToSetupPose(){return this.skeleton.setSlotsToSetupPose(),this},setBonesToSetupPose:function setBonesToSetupPose(){return this.skeleton.setBonesToSetupPose(),this},getRootBone:function getRootBone(){return this.skeleton.getRootBone()},angleBoneToXY:function angleBoneToXY(t,r,o,d,T,S){void 0===d&&(d=0),void 0===T&&(T=0),void 0===S&&(S=360);var A=this.plugin.renderer.height,P=L(a(t.worldX,A-t.worldY,r,o)+I(d));return t.rotation=h(N(P),T,S),this},findBone:function findBone(t){return this.skeleton.findBone(t)},findBoneIndex:function findBoneIndex(t){return this.skeleton.findBoneIndex(t)},findSlot:function findSlot(t){return this.skeleton.findSlot(t)},findSlotIndex:function findSlotIndex(t){return this.skeleton.findSlotIndex(t)},findSkin:function findSkin(t){return this.skeletonData.findSkin(t)},findEvent:function findEvent(t){return this.skeletonData.findEvent(t)},findAnimation:function findAnimation(t){return this.skeletonData.findAnimation(t)},findIkConstraint:function findIkConstraint(t){return this.skeletonData.findIkConstraint(t)},findTransformConstraint:function findTransformConstraint(t){return this.skeletonData.findTransformConstraint(t)},findPathConstraint:function findPathConstraint(t){return this.skeletonData.findPathConstraint(t)},findPathConstraintIndex:function findPathConstraintIndex(t){return this.skeletonData.findPathConstraintIndex(t)},getBounds:function getBounds(){return this.plugin.getBounds(this.skeleton)},preUpdate:function preUpdate(t,r){var o=this.skeleton;this.state.update(r/1e3*this.timeScale),this.state.apply(o)},preDestroy:function preDestroy(){this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications()),this.plugin=null,this.skeleton=null,this.skeletonData=null,this.state=null,this.stateData=null}});t.exports=X},function(t,r,o){var a=o(0),h=o(223),d=new a({initialize:function DataManager(t,r){this.parent=t,this.events=r,r||(this.events=t.events?t.events:t),this.list={},this.values={},this._frozen=!1,!t.hasOwnProperty("sys")&&this.events&&this.events.once(h.DESTROY,this.destroy,this)},get:function get(t){var r=this.list;if(Array.isArray(t)){for(var o=[],a=0;a<t.length;a++)o.push(r[t[a]]);return o}return r[t]},getAll:function getAll(){var t={};for(var r in this.list)this.list.hasOwnProperty(r)&&(t[r]=this.list[r]);return t},query:function query(t){var r={};for(var o in this.list)this.list.hasOwnProperty(o)&&o.match(t)&&(r[o]=this.list[o]);return r},set:function set(t,r){if(this._frozen)return this;if("string"==typeof t)return this.setValue(t,r);for(var o in t)this.setValue(o,t[o]);return this},inc:function inc(t,r){if(this._frozen)return this;void 0===r&&(r=1);var o=this.get(t);return void 0===o&&(o=0),this.set(t,o+r),this},toggle:function toggle(t){return this._frozen||this.set(t,!this.get(t)),this},setValue:function setValue(t,r){if(this._frozen)return this;if(this.has(t))this.values[t]=r;else{var o=this,a=this.list,d=this.events,T=this.parent;Object.defineProperty(this.values,t,{enumerable:!0,configurable:!0,get:function get(){return a[t]},set:function set(r){if(!o._frozen){var S=a[t];a[t]=r,d.emit(h.CHANGE_DATA,T,t,r,S),d.emit(h.CHANGE_DATA_KEY+t,T,r,S)}}}),a[t]=r,d.emit(h.SET_DATA,T,t,r)}return this},each:function each(t,r){for(var o=[this.parent,null,void 0],a=1;a<arguments.length;a++)o.push(arguments[a]);for(var h in this.list)o[1]=h,o[2]=this.list[h],t.apply(r,o);return this},merge:function merge(t,r){for(var o in void 0===r&&(r=!0),t)t.hasOwnProperty(o)&&(r||!r&&!this.has(o))&&this.setValue(o,t[o]);return this},remove:function remove(t){if(this._frozen)return this;if(!Array.isArray(t))return this.removeValue(t);for(var r=0;r<t.length;r++)this.removeValue(t[r]);return this},removeValue:function removeValue(t){if(this.has(t)){var r=this.list[t];delete this.list[t],delete this.values[t],this.events.emit(h.REMOVE_DATA,this.parent,t,r)}return this},pop:function pop(t){var r=void 0;return!this._frozen&&this.has(t)&&(r=this.list[t],delete this.list[t],delete this.values[t],this.events.emit(h.REMOVE_DATA,this.parent,t,r)),r},has:function has(t){return this.list.hasOwnProperty(t)},setFreeze:function setFreeze(t){return this._frozen=t,this},reset:function reset(){for(var t in this.list)delete this.list[t],delete this.values[t];return this._frozen=!1,this},destroy:function destroy(){this.reset(),this.events.off(h.CHANGE_DATA),this.events.off(h.SET_DATA),this.events.off(h.REMOVE_DATA),this.parent=null},freeze:{get:function get(){return this._frozen},set:function set(t){this._frozen=!!t}},count:{get:function get(){var t=0;for(var r in this.list)void 0!==this.list[r]&&t++;return t}}});t.exports=d},function(t,r,o){t.exports={CHANGE_DATA:o(224),CHANGE_DATA_KEY:o(225),DESTROY:o(226),REMOVE_DATA:o(227),SET_DATA:o(228)}},function(t,r){t.exports="changedata"},function(t,r){t.exports="changedata-"},function(t,r){t.exports="destroy"},function(t,r){t.exports="removedata"},function(t,r){t.exports="setdata"},function(t,r,o){var a=Object.prototype.hasOwnProperty,h="~";function Events(){}function EE(t,r,o){this.fn=t,this.context=r,this.once=o||!1}function addListener(t,r,o,a,d){if("function"!=typeof o)throw new TypeError("The listener must be a function");var T=new EE(o,a||t,d),S=h?h+r:r;return t._events[S]?t._events[S].fn?t._events[S]=[t._events[S],T]:t._events[S].push(T):(t._events[S]=T,t._eventsCount++),t}function clearEvent(t,r){0==--t._eventsCount?t._events=new Events:delete t._events[r]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(h=!1)),EventEmitter.prototype.eventNames=function eventNames(){var t,r,o=[];if(0===this._eventsCount)return o;for(r in t=this._events)a.call(t,r)&&o.push(h?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},EventEmitter.prototype.listeners=function listeners(t){var r=h?h+t:t,o=this._events[r];if(!o)return[];if(o.fn)return[o.fn];for(var a=0,d=o.length,T=new Array(d);a<d;a++)T[a]=o[a].fn;return T},EventEmitter.prototype.listenerCount=function listenerCount(t){var r=h?h+t:t,o=this._events[r];return o?o.fn?1:o.length:0},EventEmitter.prototype.emit=function emit(t,r,o,a,d,T){var S=h?h+t:t;if(!this._events[S])return!1;var A,P,O=this._events[S],D=arguments.length;if(O.fn){switch(O.once&&this.removeListener(t,O.fn,void 0,!0),D){case 1:return O.fn.call(O.context),!0;case 2:return O.fn.call(O.context,r),!0;case 3:return O.fn.call(O.context,r,o),!0;case 4:return O.fn.call(O.context,r,o,a),!0;case 5:return O.fn.call(O.context,r,o,a,d),!0;case 6:return O.fn.call(O.context,r,o,a,d,T),!0}for(P=1,A=new Array(D-1);P<D;P++)A[P-1]=arguments[P];O.fn.apply(O.context,A)}else{var L,I=O.length;for(P=0;P<I;P++)switch(O[P].once&&this.removeListener(t,O[P].fn,void 0,!0),D){case 1:O[P].fn.call(O[P].context);break;case 2:O[P].fn.call(O[P].context,r);break;case 3:O[P].fn.call(O[P].context,r,o);break;case 4:O[P].fn.call(O[P].context,r,o,a);break;default:if(!A)for(L=1,A=new Array(D-1);L<D;L++)A[L-1]=arguments[L];O[P].fn.apply(O[P].context,A)}}return!0},EventEmitter.prototype.on=function on(t,r,o){return addListener(this,t,r,o,!1)},EventEmitter.prototype.once=function once(t,r,o){return addListener(this,t,r,o,!0)},EventEmitter.prototype.removeListener=function removeListener(t,r,o,a){var d=h?h+t:t;if(!this._events[d])return this;if(!r)return clearEvent(this,d),this;var T=this._events[d];if(T.fn)T.fn!==r||a&&!T.once||o&&T.context!==o||clearEvent(this,d);else{for(var S=0,A=[],P=T.length;S<P;S++)(T[S].fn!==r||a&&!T[S].once||o&&T[S].context!==o)&&A.push(T[S]);A.length?this._events[d]=1===A.length?A[0]:A:clearEvent(this,d)}return this},EventEmitter.prototype.removeAllListeners=function removeAllListeners(t){var r;return t?(r=h?h+t:t,this._events[r]&&clearEvent(this,r)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=h,EventEmitter.EventEmitter=EventEmitter,t.exports=EventEmitter},function(t,r){t.exports="addedtoscene"},function(t,r){t.exports="destroy"},function(t,r){t.exports="removedfromscene"},function(t,r){t.exports="complete"},function(t,r){t.exports="created"},function(t,r){t.exports="error"},function(t,r){t.exports="loop"},function(t,r){t.exports="play"},function(t,r){t.exports="seeked"},function(t,r){t.exports="seeking"},function(t,r){t.exports="stop"},function(t,r){t.exports="timeout"},function(t,r){t.exports="unlocked"},function(t,r,o){t.exports={COMPLETE:o(244),DISPOSE:o(245),END:o(246),EVENT:o(247),INTERRUPTED:o(248),START:o(249)}},function(t,r){t.exports="complete"},function(t,r){t.exports="dispose"},function(t,r){t.exports="end"},function(t,r){t.exports="event"},function(t,r){t.exports="interrupted"},function(t,r){t.exports="start"},function(t,r,o){var a=o(1),h=o(1),d=o(1);a=o(251),d=o(252),h=o(253),t.exports={renderWebGL:a,renderCanvas:h,renderDirect:d}},function(t,r,o){var a=o(3),h=o(8),d=o(56),T=o(9),S=o(6);t.exports=function SpineGameObjectWebGLRenderer(t,r,o,A,P){var O=r.plugin,D=r.skeleton,L=O.sceneRenderer;t.newType&&(t.pipelines.clear(),L.begin());var I=r.scrollFactorX,B=r.scrollFactorY,N=D.color.a;P&&(r.scrollFactorX=P.scrollFactorX,r.scrollFactorY=P.scrollFactorY,D.color.a=a(N*P.alpha,0,1)),o.addToRenderList(r);var G=d(r,o,A).calc,Y=t.height;if(D.x=G.tx,D.y=Y-G.ty,D.scaleX=G.scaleX,D.scaleY=G.scaleY,r.scaleX<0?(D.scaleX*=-1,r.root.rotation=S(T(G.rotationNormalized)-180,0,360)):r.root.rotation=S(T(h(G.rotationNormalized))+90,0,360),r.scaleY<0&&(D.scaleY*=-1,r.scaleX<0?r.root.rotation-=2*T(G.rotationNormalized):r.root.rotation+=2*T(G.rotationNormalized)),D.updateWorldTransform(),L.drawSkeleton(D,r.preMultipliedAlpha),P&&(r.scrollFactorX=I,r.scrollFactorY=B,D.color.a=N),O.drawDebug||r.drawDebug){var X=D.x,U=D.y;D.x=0,D.y=0,L.drawSkeletonDebug(D,r.preMultipliedAlpha),D.x=X,D.y=U}t.nextTypeMatch||(L.end(),t.pipelines.rebind())}},function(t,r,o){var a=o(3),h=o(8),d=o(56),T=o(9),S=o(6);t.exports=function SpineGameObjectWebGLDirect(t,r,o,A,P){var O=r.plugin,D=r.skeleton,L=O.sceneRenderer;t.pipelines.clear(),L.begin();var I=r.scrollFactorX,B=r.scrollFactorY,N=D.color.a;P&&(r.scrollFactorX=P.scrollFactorX,r.scrollFactorY=P.scrollFactorY,D.color.a=a(N*P.alpha,0,1)),o.addToRenderList(r);var G=d(r,o,A).calc,Y=t.height;if(D.x=G.tx,D.y=Y-G.ty,D.scaleX=G.scaleX,D.scaleY=G.scaleY,r.scaleX<0?(D.scaleX*=-1,r.root.rotation=S(T(G.rotationNormalized)-180,0,360)):r.root.rotation=S(T(h(G.rotationNormalized))+90,0,360),r.scaleY<0&&(D.scaleY*=-1,r.scaleX<0?r.root.rotation-=2*T(G.rotationNormalized):r.root.rotation+=2*T(G.rotationNormalized)),D.updateWorldTransform(),L.drawSkeleton(D,r.preMultipliedAlpha),P&&(r.scrollFactorX=I,r.scrollFactorY=B,D.color.a=N),O.drawDebug||r.drawDebug){var X=D.x,U=D.y;D.x=0,D.y=0,L.drawSkeletonDebug(D,r.preMultipliedAlpha),D.x=X,D.y=U}L.end(),t.pipelines.rebind()}},function(t,r,o){var a=o(8),h=o(9),d=o(6);t.exports=function SpineGameObjectCanvasRenderer(t,r,o,T){var S=t.currentContext,A=r.plugin,P=r.skeleton,O=A.skeletonRenderer,D=t._tempMatrix1,L=t._tempMatrix2,I=t._tempMatrix3;o.addToRenderList(r),L.applyITRS(r.x,r.y,r.rotation,Math.abs(r.scaleX),Math.abs(r.scaleY)),D.copyFrom(o.matrix),T?(D.multiplyWithOffset(T,-o.scrollX*r.scrollFactorX,-o.scrollY*r.scrollFactorY),L.e=r.x,L.f=r.y,D.multiply(L,I)):(L.e-=o.scrollX*r.scrollFactorX,L.f-=o.scrollY*r.scrollFactorY,D.multiply(L,I)),P.x=I.tx,P.y=I.ty,P.scaleX=I.scaleX,P.scaleY=-1*I.scaleY,r.scaleX<0?(P.scaleX*=-1,r.root.rotation=h(I.rotationNormalized)):r.root.rotation=d(h(a(I.rotationNormalized))+90,0,360),r.scaleY<0&&(P.scaleY*=-1,r.scaleX<0?r.root.rotation-=2*h(I.rotationNormalized):r.root.rotation+=2*h(I.rotationNormalized)),o.renderToTexture&&(P.y=I.ty,P.scaleY*=-1),P.updateWorldTransform(),O.ctx=S,O.debugRendering=A.drawDebug||r.drawDebug,S.save(),O.draw(P),S.restore()}},function(t,r,o){var a=o(0),h=o(255),d=o(347),T=new a({Extends:h,Mixins:[d],initialize:function SpineContainer(t,r,o,a,d){h.call(this,t,o,a,d),this.type="Spine",this.plugin=r},preDestroy:function preDestroy(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[],this._displayList=null,this.plugin=null}});t.exports=T},function(t,r,o){var a=o(256),h=o(17),d=o(0),T=o(293),S=o(55),A=o(53),P=o(25),O=o(343),D=o(346),L=o(2),I=new d({Extends:A,Mixins:[T.AlphaSingle,T.BlendMode,T.ComputedSize,T.Depth,T.Mask,T.Pipeline,T.Transform,T.Visible,O],initialize:function Container(t,r,o,a){A.call(this,t,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new T.TransformMatrix,this.tempTransformMatrix=new T.TransformMatrix,this._sortKey="",this._sysEvents=t.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(r,o),this.clearAlpha(),this.setBlendMode(h.SKIP_CHECK),a&&this.add(a)},originX:{get:function get(){return.5}},originY:{get:function get(){return.5}},displayOriginX:{get:function get(){return.5*this.width}},displayOriginY:{get:function get(){return.5*this.height}},setExclusive:function setExclusive(t){return void 0===t&&(t=!0),this.exclusive=t,this},getBounds:function getBounds(t){if(void 0===t&&(t=new P),t.setTo(this.x,this.y,0,0),this.parentContainer){var r=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y);t.setTo(r.x,r.y,0,0)}if(this.list.length>0){var o=this.list,a=new P,h=!1;t.setEmpty();for(var d=0;d<o.length;d++){var T=o[d];T.getBounds&&(T.getBounds(a),h?D(a,t,t):(t.setTo(a.x,a.y,a.width,a.height),h=!0))}}return t},addHandler:function addHandler(t){t.once(S.DESTROY,this.remove,this),this.exclusive&&(t.parentContainer&&t.parentContainer.remove(t),t.removeFromDisplayList(),t.parentContainer=this)},removeHandler:function removeHandler(t){t.off(S.DESTROY,this.remove),this.exclusive&&(t.parentContainer=null,t.addToDisplayList())},pointToContainer:function pointToContainer(t,r){void 0===r&&(r=new L),this.parentContainer?this.parentContainer.pointToContainer(t,r):r=new L(t.x,t.y);var o=this.tempTransformMatrix;return o.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),o.invert(),o.transformPoint(t.x,t.y,r),r},getBoundsTransformMatrix:function getBoundsTransformMatrix(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function add(t){return a.Add(this.list,t,this.maxSize,this.addHandler,this),this},addAt:function addAt(t,r){return a.AddAt(this.list,t,r,this.maxSize,this.addHandler,this),this},getAt:function getAt(t){return this.list[t]},getIndex:function getIndex(t){return this.list.indexOf(t)},sort:function sort(t,r){return t?(void 0===r&&(r=function handler(r,o){return r[t]-o[t]}),a.StableSort(this.list,r),this):this},getByName:function getByName(t){return a.GetFirst(this.list,"name",t)},getRandom:function getRandom(t,r){return a.GetRandom(this.list,t,r)},getFirst:function getFirst(t,r,o,h){return a.GetFirst(this.list,t,r,o,h)},getAll:function getAll(t,r,o,h){return a.GetAll(this.list,t,r,o,h)},count:function count(t,r,o,h){return a.CountAllMatching(this.list,t,r,o,h)},swap:function swap(t,r){return a.Swap(this.list,t,r),this},moveTo:function moveTo(t,r){return a.MoveTo(this.list,t,r),this},remove:function remove(t,r){var o=a.Remove(this.list,t,this.removeHandler,this);if(r&&o){Array.isArray(o)||(o=[o]);for(var h=0;h<o.length;h++)o[h].destroy()}return this},removeAt:function removeAt(t,r){var o=a.RemoveAt(this.list,t,this.removeHandler,this);return r&&o&&o.destroy(),this},removeBetween:function removeBetween(t,r,o){var h=a.RemoveBetween(this.list,t,r,this.removeHandler,this);if(o)for(var d=0;d<h.length;d++)h[d].destroy();return this},removeAll:function removeAll(t){var r=a.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(t)for(var o=0;o<r.length;o++)r[o].destroy();return this},bringToTop:function bringToTop(t){return a.BringToTop(this.list,t),this},sendToBack:function sendToBack(t){return a.SendToBack(this.list,t),this},moveUp:function moveUp(t){return a.MoveUp(this.list,t),this},moveDown:function moveDown(t){return a.MoveDown(this.list,t),this},reverse:function reverse(){return this.list.reverse(),this},shuffle:function shuffle(){return a.Shuffle(this.list),this},replace:function replace(t,r,o){return a.Replace(this.list,t,r)&&(this.addHandler(r),this.removeHandler(t),o&&t.destroy()),this},exists:function exists(t){return this.list.indexOf(t)>-1},setAll:function setAll(t,r,o,h){return a.SetAll(this.list,t,r,o,h),this},each:function each(t,r){var o,a=[null],h=this.list.slice(),d=h.length;for(o=2;o<arguments.length;o++)a.push(arguments[o]);for(o=0;o<d;o++)a[0]=h[o],t.apply(r,a);return this},iterate:function iterate(t,r){var o,a=[null];for(o=2;o<arguments.length;o++)a.push(arguments[o]);for(o=0;o<this.list.length;o++)a[0]=this.list[o],t.apply(r,a);return this},setScrollFactor:function setScrollFactor(t,r,o){return void 0===r&&(r=t),void 0===o&&(o=!1),this.scrollFactorX=t,this.scrollFactorY=r,o&&(a.SetAll(this.list,"scrollFactorX",t),a.SetAll(this.list,"scrollFactorY",r)),this},length:{get:function get(){return this.list.length}},first:{get:function get(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function get(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function get(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function get(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function preDestroy(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});t.exports=I},function(t,r,o){t.exports={Matrix:o(257),Add:o(266),AddAt:o(267),BringToTop:o(268),CountAllMatching:o(269),Each:o(270),EachInRange:o(271),FindClosestInSorted:o(272),GetAll:o(273),GetFirst:o(274),GetRandom:o(275),MoveDown:o(276),MoveTo:o(277),MoveUp:o(278),NumberArray:o(279),NumberArrayStep:o(280),QuickSelect:o(281),Range:o(282),Remove:o(283),RemoveAt:o(284),RemoveBetween:o(285),RemoveRandomElement:o(286),Replace:o(287),RotateLeft:o(58),RotateRight:o(59),SafeRange:o(5),SendToBack:o(288),SetAll:o(289),Shuffle:o(60),SortByDigits:o(290),SpliceOne:o(12),StableSort:o(291),Swap:o(292)}},function(t,r,o){t.exports={CheckMatrix:o(24),MatrixToString:o(258),ReverseColumns:o(260),ReverseRows:o(261),Rotate180:o(262),RotateLeft:o(263),RotateMatrix:o(16),RotateRight:o(264),Translate:o(265),TransposeMatrix:o(57)}},function(t,r,o){var a=o(259),h=o(24);t.exports=function MatrixToString(t){var r="";if(!h(t))return r;for(var o=0;o<t.length;o++){for(var d=0;d<t[o].length;d++){var T=t[o][d].toString();r+="undefined"!==T?a(T,2):"?",d<t[o].length-1&&(r+=" |")}if(o<t.length-1){r+="\n";for(var S=0;S<t[o].length;S++)r+="---",S<t[o].length-1&&(r+="+");r+="\n"}}return r}},function(t,r){t.exports=function Pad(t,r,o,a){void 0===r&&(r=0),void 0===o&&(o=" "),void 0===a&&(a=3);var h=0;if(r+1>=(t=t.toString()).length)switch(a){case 1:t=new Array(r+1-t.length).join(o)+t;break;case 3:var d=Math.ceil((h=r-t.length)/2);t=new Array(h-d+1).join(o)+t+new Array(d+1).join(o);break;default:t+=new Array(r+1-t.length).join(o)}return t}},function(t,r){t.exports=function ReverseColumns(t){return t.reverse()}},function(t,r){t.exports=function ReverseRows(t){for(var r=0;r<t.length;r++)t[r].reverse();return t}},function(t,r,o){var a=o(16);t.exports=function Rotate180(t){return a(t,180)}},function(t,r,o){var a=o(16);t.exports=function RotateLeft(t){return a(t,90)}},function(t,r,o){var a=o(16);t.exports=function RotateRight(t){return a(t,-90)}},function(t,r,o){var a=o(58),h=o(59);t.exports=function TranslateMatrix(t,r,o){if(void 0===r&&(r=0),void 0===o&&(o=0),0!==o&&(o<0?a(t,Math.abs(o)):h(t,o)),0!==r)for(var d=0;d<t.length;d++){var T=t[d];r<0?a(T,Math.abs(r)):h(T,r)}return t}},function(t,r){t.exports=function Add(t,r,o,a,h){if(void 0===h&&(h=t),o>0){var d=o-t.length;if(d<=0)return null}if(!Array.isArray(r))return-1===t.indexOf(r)?(t.push(r),a&&a.call(h,r),r):null;for(var T=r.length-1;T>=0;)-1!==t.indexOf(r[T])&&r.splice(T,1),T--;if(0===(T=r.length))return null;o>0&&T>d&&(r.splice(d),T=d);for(var S=0;S<T;S++){var A=r[S];t.push(A),a&&a.call(h,A)}return r}},function(t,r){t.exports=function AddAt(t,r,o,a,h,d){if(void 0===o&&(o=0),void 0===d&&(d=t),a>0){var T=a-t.length;if(T<=0)return null}if(!Array.isArray(r))return-1===t.indexOf(r)?(t.splice(o,0,r),h&&h.call(d,r),r):null;for(var S=r.length-1;S>=0;)-1!==t.indexOf(r[S])&&r.pop(),S--;if(0===(S=r.length))return null;a>0&&S>T&&(r.splice(T),S=T);for(var A=S-1;A>=0;A--){var P=r[A];t.splice(o,0,P),h&&h.call(d,P)}return r}},function(t,r){t.exports=function BringToTop(t,r){var o=t.indexOf(r);return-1!==o&&o<t.length&&(t.splice(o,1),t.push(r)),r}},function(t,r,o){var a=o(5);t.exports=function CountAllMatching(t,r,o,h,d){void 0===h&&(h=0),void 0===d&&(d=t.length);var T=0;if(a(t,h,d))for(var S=h;S<d;S++){t[S][r]===o&&T++}return T}},function(t,r){t.exports=function Each(t,r,o){var a,h=[null];for(a=3;a<arguments.length;a++)h.push(arguments[a]);for(a=0;a<t.length;a++)h[0]=t[a],r.apply(o,h);return t}},function(t,r,o){var a=o(5);t.exports=function EachInRange(t,r,o,h,d){if(void 0===h&&(h=0),void 0===d&&(d=t.length),a(t,h,d)){var T,S=[null];for(T=5;T<arguments.length;T++)S.push(arguments[T]);for(T=h;T<d;T++)S[0]=t[T],r.apply(o,S)}return t}},function(t,r){t.exports=function FindClosestInSorted(t,r,o){if(!r.length)return NaN;if(1===r.length)return r[0];var a,h,d=1;if(o){if(t<r[0][o])return r[0];for(;r[d][o]<t;)d++}else for(;r[d]<t;)d++;return d>r.length&&(d=r.length),o?(a=r[d-1][o],(h=r[d][o])-t<=t-a?r[d]:r[d-1]):(a=r[d-1],(h=r[d])-t<=t-a?h:a)}},function(t,r,o){var a=o(5);t.exports=function GetAll(t,r,o,h,d){void 0===h&&(h=0),void 0===d&&(d=t.length);var T=[];if(a(t,h,d))for(var S=h;S<d;S++){var A=t[S];(!r||r&&void 0===o&&A.hasOwnProperty(r)||r&&void 0!==o&&A[r]===o)&&T.push(A)}return T}},function(t,r,o){var a=o(5);t.exports=function GetFirst(t,r,o,h,d){if(void 0===h&&(h=0),void 0===d&&(d=t.length),a(t,h,d))for(var T=h;T<d;T++){var S=t[T];if(!r||r&&void 0===o&&S.hasOwnProperty(r)||r&&void 0!==o&&S[r]===o)return S}return null}},function(t,r){t.exports=function GetRandom(t,r,o){void 0===r&&(r=0),void 0===o&&(o=t.length);var a=r+Math.floor(Math.random()*o);return void 0===t[a]?null:t[a]}},function(t,r){t.exports=function MoveDown(t,r){var o=t.indexOf(r);if(o>0){var a=t[o-1],h=t.indexOf(a);t[o]=a,t[h]=r}return t}},function(t,r){t.exports=function MoveTo(t,r,o){var a=t.indexOf(r);if(-1===a||o<0||o>=t.length)throw new Error("Supplied index out of bounds");return a!==o&&(t.splice(a,1),t.splice(o,0,r)),r}},function(t,r){t.exports=function MoveUp(t,r){var o=t.indexOf(r);if(-1!==o&&o<t.length-1){var a=t[o+1],h=t.indexOf(a);t[o]=a,t[h]=r}return t}},function(t,r){t.exports=function NumberArray(t,r,o,a){var h,d=[],T=!1;if((o||a)&&(T=!0,o||(o=""),a||(a="")),r<t)for(h=t;h>=r;h--)T?d.push(o+h.toString()+a):d.push(h);else for(h=t;h<=r;h++)T?d.push(o+h.toString()+a):d.push(h);return d}},function(t,r,o){var a=o(40);t.exports=function NumberArrayStep(t,r,o){void 0===t&&(t=0),void 0===r&&(r=null),void 0===o&&(o=1),null===r&&(r=t,t=0);for(var h=[],d=Math.max(a((r-t)/(o||1)),0),T=0;T<d;T++)h.push(t),t+=o;return h}},function(t,r){function swap(t,r,o){var a=t[r];t[r]=t[o],t[o]=a}function defaultCompare(t,r){return t<r?-1:t>r?1:0}t.exports=function QuickSelect(t,r,o,a,h){for(void 0===o&&(o=0),void 0===a&&(a=t.length-1),void 0===h&&(h=defaultCompare);a>o;){if(a-o>600){var d=a-o+1,T=r-o+1,S=Math.log(d),A=.5*Math.exp(2*S/3),P=.5*Math.sqrt(S*A*(d-A)/d)*(T-d/2<0?-1:1);QuickSelect(t,r,Math.max(o,Math.floor(r-T*A/d+P)),Math.min(a,Math.floor(r+(d-T)*A/d+P)),h)}var O=t[r],D=o,L=a;for(swap(t,o,r),h(t[a],O)>0&&swap(t,o,a);D<L;){for(swap(t,D,L),D++,L--;h(t[D],O)<0;)D++;for(;h(t[L],O)>0;)L--}0===h(t[o],O)?swap(t,o,L):swap(t,++L,a),L<=r&&(o=L+1),r<=L&&(a=L-1)}}},function(t,r,o){var a=o(10),h=o(60),d=function BuildChunk(t,r,o){for(var a=[],h=0;h<t.length;h++)for(var d=0;d<r.length;d++)for(var T=0;T<o;T++)a.push({a:t[h],b:r[d]});return a};t.exports=function Range(t,r,o){var T=a(o,"max",0),S=a(o,"qty",1),A=a(o,"random",!1),P=a(o,"randomB",!1),O=a(o,"repeat",0),D=a(o,"yoyo",!1),L=[];if(P&&h(r),-1===O)if(0===T)O=0;else{var I=t.length*r.length*S;D&&(I*=2),O=Math.ceil(T/I)}for(var B=0;B<=O;B++){var N=d(t,r,S);A&&h(N),L=L.concat(N),D&&(N.reverse(),L=L.concat(N))}return T&&L.splice(T),L}},function(t,r,o){var a=o(12);t.exports=function Remove(t,r,o,h){var d;if(void 0===h&&(h=t),!Array.isArray(r))return-1!==(d=t.indexOf(r))?(a(t,d),o&&o.call(h,r),r):null;for(var T=r.length-1,S=[];T>=0;){var A=r[T];-1!==(d=t.indexOf(A))&&(a(t,d),S.push(A),o&&o.call(h,A)),T--}return S}},function(t,r,o){var a=o(12);t.exports=function RemoveAt(t,r,o,h){if(void 0===h&&(h=t),r<0||r>t.length-1)throw new Error("Index out of bounds");var d=a(t,r);return o&&o.call(h,d),d}},function(t,r,o){var a=o(5);t.exports=function RemoveBetween(t,r,o,h,d){if(void 0===r&&(r=0),void 0===o&&(o=t.length),void 0===d&&(d=t),a(t,r,o)){var T=o-r,S=t.splice(r,T);if(h)for(var A=0;A<S.length;A++){var P=S[A];h.call(d,P)}return S}return[]}},function(t,r,o){var a=o(12);t.exports=function RemoveRandomElement(t,r,o){void 0===r&&(r=0),void 0===o&&(o=t.length);var h=r+Math.floor(Math.random()*o);return a(t,h)}},function(t,r){t.exports=function Replace(t,r,o){var a=t.indexOf(r),h=t.indexOf(o);return-1!==a&&-1===h&&(t[a]=o,!0)}},function(t,r){t.exports=function SendToBack(t,r){var o=t.indexOf(r);return-1!==o&&o>0&&(t.splice(o,1),t.unshift(r)),r}},function(t,r,o){var a=o(5);t.exports=function SetAll(t,r,o,h,d){if(void 0===h&&(h=0),void 0===d&&(d=t.length),a(t,h,d))for(var T=h;T<d;T++){var S=t[T];S.hasOwnProperty(r)&&(S[r]=o)}return t}},function(t,r){t.exports=function SortByDigits(t){var r=/\D/g;return t.sort((function(t,o){return parseInt(t.replace(r,""),10)-parseInt(o.replace(r,""),10)})),t}},function(t,r){function Compare(t,r){return String(t).localeCompare(r)}function RunPass(t,r,o,a){var h,d,T,S,A,P=t.length,O=0,D=2*o;for(h=0;h<P;h+=D)for(T=(d=h+o)+o,d>P&&(d=P),T>P&&(T=P),S=h,A=d;;)if(S<d&&A<T)r(t[S],t[A])<=0?a[O++]=t[S++]:a[O++]=t[A++];else if(S<d)a[O++]=t[S++];else{if(!(A<T))break;a[O++]=t[A++]}}t.exports=function StableSort(t,r){void 0===r&&(r=Compare);var o=function Process(t,r){var o=t.length;if(o<=1)return t;for(var a=new Array(o),h=1;h<o;h*=2){RunPass(t,r,h,a);var d=t;t=a,a=d}return t}(t,r);return o!==t&&RunPass(o,null,t.length,t),t}},function(t,r){t.exports=function Swap(t,r,o){if(r!==o){var a=t.indexOf(r),h=t.indexOf(o);if(a<0||h<0)throw new Error("Supplied items must be elements of the same array");return t[a]=o,t[h]=r,t}}},function(t,r,o){t.exports={Alpha:o(294),AlphaSingle:o(295),BlendMode:o(296),ComputedSize:o(47),Crop:o(297),Depth:o(48),Flip:o(49),GetBounds:o(298),Mask:o(307),Origin:o(332),PathFollower:o(333),Pipeline:o(336),ScrollFactor:o(50),Size:o(339),Texture:o(340),TextureCrop:o(341),Tint:o(342),ToJSON:o(54),Transform:o(51),TransformMatrix:o(23),Visible:o(52)}},function(t,r,o){var a=o(3),h={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function clearAlpha(){return this.setAlpha(1)},setAlpha:function setAlpha(t,r,o,h){return void 0===t&&(t=1),void 0===r?this.alpha=t:(this._alphaTL=a(t,0,1),this._alphaTR=a(r,0,1),this._alphaBL=a(o,0,1),this._alphaBR=a(h,0,1)),this},alpha:{get:function get(){return this._alpha},set:function set(t){var r=a(t,0,1);this._alpha=r,this._alphaTL=r,this._alphaTR=r,this._alphaBL=r,this._alphaBR=r,0===r?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function get(){return this._alphaTL},set:function set(t){var r=a(t,0,1);this._alphaTL=r,0!==r&&(this.renderFlags|=2)}},alphaTopRight:{get:function get(){return this._alphaTR},set:function set(t){var r=a(t,0,1);this._alphaTR=r,0!==r&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function get(){return this._alphaBL},set:function set(t){var r=a(t,0,1);this._alphaBL=r,0!==r&&(this.renderFlags|=2)}},alphaBottomRight:{get:function get(){return this._alphaBR},set:function set(t){var r=a(t,0,1);this._alphaBR=r,0!==r&&(this.renderFlags|=2)}}};t.exports=h},function(t,r,o){var a=o(3),h={_alpha:1,clearAlpha:function clearAlpha(){return this.setAlpha(1)},setAlpha:function setAlpha(t){return void 0===t&&(t=1),this.alpha=t,this},alpha:{get:function get(){return this._alpha},set:function set(t){var r=a(t,0,1);this._alpha=r,0===r?this.renderFlags&=-3:this.renderFlags|=2}}};t.exports=h},function(t,r,o){var a=o(17),h={_blendMode:a.NORMAL,blendMode:{get:function get(){return this._blendMode},set:function set(t){"string"==typeof t&&(t=a[t]),(t|=0)>=-1&&(this._blendMode=t)}},setBlendMode:function setBlendMode(t){return this.blendMode=t,this}};t.exports=h},function(t,r){var o={texture:null,frame:null,isCropped:!1,setCrop:function setCrop(t,r,o,a){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,r,o,a,this.flipX,this.flipY);else{var h=t;this.frame.setCropUVs(this._crop,h.x,h.y,h.width,h.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function resetCropObject(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};t.exports=o},function(t,r,o){var a=o(25),h=o(39),d=o(2),T={prepareBoundsOutput:function prepareBoundsOutput(t,r){(void 0===r&&(r=!1),0!==this.rotation&&h(t,this.x,this.y,this.rotation),r&&this.parentContainer)&&this.parentContainer.getBoundsTransformMatrix().transformPoint(t.x,t.y,t);return t},getCenter:function getCenter(t){return void 0===t&&(t=new d),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,t},getTopLeft:function getTopLeft(t,r){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,r)},getTopCenter:function getTopCenter(t,r){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,r)},getTopRight:function getTopRight(t,r){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,r)},getLeftCenter:function getLeftCenter(t,r){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,r)},getRightCenter:function getRightCenter(t,r){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,r)},getBottomLeft:function getBottomLeft(t,r){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,r)},getBottomCenter:function getBottomCenter(t,r){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,r)},getBottomRight:function getBottomRight(t,r){return t||(t=new d),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,r)},getBounds:function getBounds(t){var r,o,h,d,T,S,A,P;if(void 0===t&&(t=new a),this.parentContainer){var O=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(t),O.transformPoint(t.x,t.y,t),r=t.x,o=t.y,this.getTopRight(t),O.transformPoint(t.x,t.y,t),h=t.x,d=t.y,this.getBottomLeft(t),O.transformPoint(t.x,t.y,t),T=t.x,S=t.y,this.getBottomRight(t),O.transformPoint(t.x,t.y,t),A=t.x,P=t.y}else this.getTopLeft(t),r=t.x,o=t.y,this.getTopRight(t),h=t.x,d=t.y,this.getBottomLeft(t),T=t.x,S=t.y,this.getBottomRight(t),A=t.x,P=t.y;return t.x=Math.min(r,h,T,A),t.y=Math.min(o,d,S,P),t.width=Math.max(r,h,T,A)-t.x,t.height=Math.max(o,d,S,P)-t.y,t}};t.exports=T},function(t,r){t.exports=function Contains(t,r,o){return!(t.width<=0||t.height<=0)&&(t.x<=r&&t.x+t.width>=r&&t.y<=o&&t.y+t.height>=o)}},function(t,r,o){var a=o(61),h=o(62);t.exports=function GetPoints(t,r,o,d){void 0===d&&(d=[]),!r&&o>0&&(r=h(t)/o);for(var T=0;T<r;T++){var S=T/r;d.push(a(t,S))}return d}},function(t,r,o){var a=o(0),h=o(302),d=o(303),T=o(26),S=o(305),A=o(2),P=new a({initialize:function Line(t,r,o,a){void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),this.type=T.LINE,this.x1=t,this.y1=r,this.x2=o,this.y2=a},getPoint:function getPoint(t,r){return h(this,t,r)},getPoints:function getPoints(t,r,o){return d(this,t,r,o)},getRandomPoint:function getRandomPoint(t){return S(this,t)},setTo:function setTo(t,r,o,a){return void 0===t&&(t=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),this.x1=t,this.y1=r,this.x2=o,this.y2=a,this},getPointA:function getPointA(t){return void 0===t&&(t=new A),t.set(this.x1,this.y1),t},getPointB:function getPointB(t){return void 0===t&&(t=new A),t.set(this.x2,this.y2),t},left:{get:function get(){return Math.min(this.x1,this.x2)},set:function set(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function get(){return Math.max(this.x1,this.x2)},set:function set(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function get(){return Math.min(this.y1,this.y2)},set:function set(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function get(){return Math.max(this.y1,this.y2)},set:function set(t){this.y1>this.y2?this.y1=t:this.y2=t}}});t.exports=P},function(t,r,o){var a=o(13);t.exports=function GetPoint(t,r,o){return void 0===o&&(o=new a),o.x=t.x1+(t.x2-t.x1)*r,o.y=t.y1+(t.y2-t.y1)*r,o}},function(t,r,o){var a=o(304),h=o(13);t.exports=function GetPoints(t,r,o,d){void 0===d&&(d=[]),!r&&o>0&&(r=a(t)/o);for(var T=t.x1,S=t.y1,A=t.x2,P=t.y2,O=0;O<r;O++){var D=O/r,L=T+(A-T)*D,I=S+(P-S)*D;d.push(new h(L,I))}return d}},function(t,r){t.exports=function Length(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))}},function(t,r,o){var a=o(13);t.exports=function Random(t,r){void 0===r&&(r=new a);var o=Math.random();return r.x=t.x1+o*(t.x2-t.x1),r.y=t.y1+o*(t.y2-t.y1),r}},function(t,r,o){var a=o(13);t.exports=function Random(t,r){return void 0===r&&(r=new a),r.x=t.x+Math.random()*t.width,r.y=t.y+Math.random()*t.height,r}},function(t,r,o){var a=o(308),h=o(331),d={mask:null,setMask:function setMask(t){return this.mask=t,this},clearMask:function clearMask(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function createBitmapMask(t){return void 0===t&&(this.texture||this.shader)&&(t=this),new a(this.scene,t)},createGeometryMask:function createGeometryMask(t){return void 0===t&&"Graphics"===this.type&&(t=this),new h(this.scene,t)}};t.exports=d},function(t,r,o){var a=o(0),h=o(309),d=o(326),T=new a({initialize:function BitmapMask(t,r){var o=t.sys.renderer;this.renderer=o,this.bitmapMask=r,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),t.sys.game.events.on(h.CONTEXT_RESTORED,this.createMask,this),o&&o.on(d.RESIZE,this.createMask,this)},createMask:function createMask(){var t=this.renderer;if(t&&t.gl){this.mainTexture&&this.clearMask();var r=t.width,o=t.height,a=0==(r&r-1)&&0==(o&o-1),h=t.gl,d=a?h.REPEAT:h.CLAMP_TO_EDGE,T=h.LINEAR;this.mainTexture=t.createTexture2D(0,T,T,d,d,h.RGBA,null,r,o),this.maskTexture=t.createTexture2D(0,T,T,d,d,h.RGBA,null,r,o),this.mainFramebuffer=t.createFramebuffer(r,o,this.mainTexture,!0),this.maskFramebuffer=t.createFramebuffer(r,o,this.maskTexture,!0)}},clearMask:function clearMask(){var t=this.renderer;t&&t.gl&&this.mainTexture&&(t.deleteTexture(this.mainTexture),t.deleteTexture(this.maskTexture),t.deleteFramebuffer(this.mainFramebuffer),t.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function setBitmap(t){this.bitmapMask=t},preRenderWebGL:function preRenderWebGL(t,r,o){t.pipelines.BITMAPMASK_PIPELINE.beginMask(this,r,o)},postRenderWebGL:function postRenderWebGL(t,r){t.pipelines.BITMAPMASK_PIPELINE.endMask(this,r)},preRenderCanvas:function preRenderCanvas(){},postRenderCanvas:function postRenderCanvas(){},destroy:function destroy(){this.clearMask(),this.renderer&&this.renderer.off(d.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});t.exports=T},function(t,r,o){t.exports={BLUR:o(310),BOOT:o(311),CONTEXT_LOST:o(312),CONTEXT_RESTORED:o(313),DESTROY:o(314),FOCUS:o(315),HIDDEN:o(316),PAUSE:o(317),POST_RENDER:o(318),POST_STEP:o(319),PRE_RENDER:o(320),PRE_STEP:o(321),READY:o(322),RESUME:o(323),STEP:o(324),VISIBLE:o(325)}},function(t,r){t.exports="blur"},function(t,r){t.exports="boot"},function(t,r){t.exports="contextlost"},function(t,r){t.exports="contextrestored"},function(t,r){t.exports="destroy"},function(t,r){t.exports="focus"},function(t,r){t.exports="hidden"},function(t,r){t.exports="pause"},function(t,r){t.exports="postrender"},function(t,r){t.exports="poststep"},function(t,r){t.exports="prerender"},function(t,r){t.exports="prestep"},function(t,r){t.exports="ready"},function(t,r){t.exports="resume"},function(t,r){t.exports="step"},function(t,r){t.exports="visible"},function(t,r,o){t.exports={POST_RENDER:o(327),PRE_RENDER:o(328),RENDER:o(329),RESIZE:o(330)}},function(t,r){t.exports="postrender"},function(t,r){t.exports="prerender"},function(t,r){t.exports="render"},function(t,r){t.exports="resize"},function(t,r,o){var a=new(o(0))({initialize:function GeometryMask(t,r){this.geometryMask=r,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function setShape(t){return this.geometryMask=t,this},setInvertAlpha:function setInvertAlpha(t){return void 0===t&&(t=!0),this.invertAlpha=t,this},preRenderWebGL:function preRenderWebGL(t,r,o){var a=t.gl;t.flush(),0===t.maskStack.length&&(a.enable(a.STENCIL_TEST),a.clear(a.STENCIL_BUFFER_BIT),t.maskCount=0),t.currentCameraMask.mask!==this&&(t.currentMask.mask=this),t.maskStack.push({mask:this,camera:o}),this.applyStencil(t,o,!0),t.maskCount++},applyStencil:function applyStencil(t,r,o){var a=t.gl,h=this.geometryMask,d=t.maskCount;a.colorMask(!1,!1,!1,!1),o?(a.stencilFunc(a.EQUAL,d,255),a.stencilOp(a.KEEP,a.KEEP,a.INCR)):(a.stencilFunc(a.EQUAL,d+1,255),a.stencilOp(a.KEEP,a.KEEP,a.DECR)),h.renderWebGL(t,h,r),t.flush(),a.colorMask(!0,!0,!0,!0),a.stencilOp(a.KEEP,a.KEEP,a.KEEP),o?this.invertAlpha?a.stencilFunc(a.NOTEQUAL,d+1,255):a.stencilFunc(a.EQUAL,d+1,255):this.invertAlpha?a.stencilFunc(a.NOTEQUAL,d,255):a.stencilFunc(a.EQUAL,d,255)},postRenderWebGL:function postRenderWebGL(t){var r=t.gl;t.maskStack.pop(),t.maskCount--,t.flush();var o=t.currentMask;if(0===t.maskStack.length)o.mask=null,r.disable(r.STENCIL_TEST);else{var a=t.maskStack[t.maskStack.length-1];a.mask.applyStencil(t,a.camera,!1),t.currentCameraMask.mask!==a.mask?(o.mask=a.mask,o.camera=a.camera):o.mask=null}},preRenderCanvas:function preRenderCanvas(t,r,o){var a=this.geometryMask;t.currentContext.save(),a.renderCanvas(t,a,o,null,null,!0),t.currentContext.clip()},postRenderCanvas:function postRenderCanvas(t){t.currentContext.restore()},destroy:function destroy(){this.geometryMask=null}});t.exports=a},function(t,r){var o={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function get(){return this._displayOriginX},set:function set(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function get(){return this._displayOriginY},set:function set(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function setOrigin(t,r){return void 0===t&&(t=.5),void 0===r&&(r=t),this.originX=t,this.originY=r,this.updateDisplayOrigin()},setOriginFromFrame:function setOriginFromFrame(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function setDisplayOrigin(t,r){return void 0===t&&(t=0),void 0===r&&(r=t),this.displayOriginX=t,this.displayOriginY=r,this},updateDisplayOrigin:function updateDisplayOrigin(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};t.exports=o},function(t,r,o){var a=o(19),h=o(334),d=o(10),T=o(335),S=o(2),A={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:T.PLAYING_FORWARD,setPath:function setPath(t,r){void 0===r&&(r=this.pathConfig);var o=this.pathTween;return o&&o.isPlaying()&&o.stop(),this.path=t,r&&this.startFollow(r),this},setRotateToPath:function setRotateToPath(t,r){return void 0===r&&(r=0),this.rotateToPath=t,this.pathRotationOffset=r,this},isFollowing:function isFollowing(){var t=this.pathTween;return t&&t.isPlaying()},startFollow:function startFollow(t,r){void 0===t&&(t={}),void 0===r&&(r=0);var o=this.pathTween;o&&o.isPlaying()&&o.stop(),"number"==typeof t&&(t={duration:t}),t.from=d(t,"from",0),t.to=d(t,"to",1);var A=h(t,"positionOnPath",!1);this.rotateToPath=h(t,"rotateToPath",!1),this.pathRotationOffset=d(t,"rotationOffset",0);var P=d(t,"startAt",r);if(P&&(t.onStart=function(t){var r=t.data[0];r.progress=P,r.elapsed=r.duration*P;var o=r.ease(r.progress);r.current=r.start+(r.end-r.start)*o,r.target[r.key]=r.current}),this.pathOffset||(this.pathOffset=new S(this.x,this.y)),this.pathVector||(this.pathVector=new S),this.pathDelta||(this.pathDelta=new S),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(t),this.path.getStartPoint(this.pathOffset),A&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=T.PLAYING_FORWARD,this.rotateToPath){var O=this.path.getPoint(.1);this.rotation=Math.atan2(O.y-this.y,O.x-this.x)+a(this.pathRotationOffset)}return this.pathConfig=t,this},pauseFollow:function pauseFollow(){var t=this.pathTween;return t&&t.isPlaying()&&t.pause(),this},resumeFollow:function resumeFollow(){var t=this.pathTween;return t&&t.isPaused()&&t.resume(),this},stopFollow:function stopFollow(){var t=this.pathTween;return t&&t.isPlaying()&&t.stop(),this},pathUpdate:function pathUpdate(){var t=this.pathTween;if(t){var r=t.data[0],o=this.pathDelta,h=this.pathVector;if(o.copy(h).negate(),r.state===T.COMPLETE)return this.path.getPoint(1,h),o.add(h),h.add(this.pathOffset),void this.setPosition(h.x,h.y);if(r.state!==T.PLAYING_FORWARD&&r.state!==T.PLAYING_BACKWARD)return;this.path.getPoint(t.getValue(),h),o.add(h),h.add(this.pathOffset);var d=this.x,S=this.y;this.setPosition(h.x,h.y);var A=this.x-d,P=this.y-S;if(0===A&&0===P)return;if(r.state!==this._prevDirection)return void(this._prevDirection=r.state);this.rotateToPath&&(this.rotation=Math.atan2(P,A)+a(this.pathRotationOffset))}}};t.exports=A},function(t,r){t.exports=function GetBoolean(t,r,o){return t&&t.hasOwnProperty(r)?t[r]:o}},function(t,r){t.exports={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26}},function(t,r,o){var a=o(337),h=o(338),d=o(12),T={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function initPipeline(t){void 0===t&&(t=h.MULTI_PIPELINE);var r=this.scene.sys.renderer;if(!r)return!1;var o=r.pipelines;if(this.postPipelines=[],this.pipelineData={},o){var a=o.get(t);if(a)return this.defaultPipeline=a,this.pipeline=a,!0}return!1},setPipeline:function setPipeline(t,r,o){var h=this.scene.sys.renderer;if(!h)return this;var d=h.pipelines;if(d){var T=d.get(t);T&&(this.pipeline=T),r&&(this.pipelineData=o?a(r):r)}return this},setPostPipeline:function setPostPipeline(t,r,o){var h=this.scene.sys.renderer;if(!h)return this;var d=h.pipelines;if(d){Array.isArray(t)||(t=[t]);for(var T=0;T<t.length;T++){var S=d.getPostPipeline(t[T],this);S&&this.postPipelines.push(S)}r&&(this.pipelineData=o?a(r):r)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function setPipelineData(t,r){var o=this.pipelineData;return void 0===r?delete o[t]:o[t]=r,this},getPostPipeline:function getPostPipeline(t){for(var r=this.postPipelines,o=[],a=0;a<r.length;a++){var h=r[a];("string"==typeof t&&h.name===t||h instanceof t)&&o.push(h)}return 1===o.length?o[0]:o},resetPipeline:function resetPipeline(t,r){return void 0===t&&(t=!1),void 0===r&&(r=!1),this.pipeline=this.defaultPipeline,t&&(this.postPipelines=[],this.hasPostPipeline=!1),r&&(this.pipelineData={}),null!==this.pipeline},resetPostPipeline:function resetPostPipeline(t){void 0===t&&(t=!1);for(var r=this.postPipelines,o=0;o<r.length;o++)r[o].destroy();this.postPipelines=[],this.hasPostPipeline=!1,t&&(this.pipelineData={})},removePostPipeline:function removePostPipeline(t){for(var r=this.postPipelines,o=r.length-1;o>=0;o--){var a=r[o];("string"==typeof t&&a.name===t||"string"!=typeof t&&a instanceof t)&&(a.destroy(),d(r,o))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function getPipelineName(){return this.pipeline.name}};t.exports=T},function(t,r){t.exports=function DeepCopy(t){var r,o,a;if("object"!==_typeof(t)||null===t)return t;for(a in r=Array.isArray(t)?[]:{},t)o=t[a],r[a]=DeepCopy(o);return r}},function(t,r){t.exports={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"}},function(t,r){var o={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function get(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function set(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function get(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function set(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function setSizeToFrame(t){return void 0===t&&(t=this.frame),this.width=t.realWidth,this.height=t.realHeight,this},setSize:function setSize(t,r){return this.width=t,this.height=r,this},setDisplaySize:function setDisplaySize(t,r){return this.displayWidth=t,this.displayHeight=r,this}};t.exports=o},function(t,r){var o={texture:null,frame:null,isCropped:!1,setTexture:function setTexture(t,r){return this.texture=this.scene.sys.textures.get(t),this.setFrame(r)},setFrame:function setFrame(t,r,o){return void 0===r&&(r=!0),void 0===o&&(o=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&r&&this.setSizeToFrame(),this._originComponent&&o&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};t.exports=o},function(t,r){var o={texture:null,frame:null,isCropped:!1,setCrop:function setCrop(t,r,o,a){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,r,o,a,this.flipX,this.flipY);else{var h=t;this.frame.setCropUVs(this._crop,h.x,h.y,h.width,h.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function setTexture(t,r){return this.texture=this.scene.sys.textures.get(t),this.setFrame(r)},setFrame:function setFrame(t,r,o){return void 0===r&&(r=!0),void 0===o&&(o=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&r&&this.setSizeToFrame(),this._originComponent&&o&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function resetCropObject(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};t.exports=o},function(t,r){var o={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function clearTint(){return this.setTint(16777215),this},setTint:function setTint(t,r,o,a){return void 0===t&&(t=16777215),void 0===r&&(r=t,o=t,a=t),this.tintTopLeft=t,this.tintTopRight=r,this.tintBottomLeft=o,this.tintBottomRight=a,this.tintFill=!1,this},setTintFill:function setTintFill(t,r,o,a){return this.setTint(t,r,o,a),this.tintFill=!0,this},tint:{set:function set(t){this.setTint(t,t,t,t)}},isTinted:{get:function get(){var t=16777215;return this.tintFill||this.tintTopLeft!==t||this.tintTopRight!==t||this.tintBottomLeft!==t||this.tintBottomRight!==t}}};t.exports=o},function(t,r,o){var a=o(1),h=o(1);a=o(344),h=o(345),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r){t.exports=function ContainerWebGLRenderer(t,r,o,a){var h=r.list,d=h.length;if(0!==d){o.addToRenderList(r);var T=r.localTransform;a?(T.loadIdentity(),T.multiply(a),T.translate(r.x,r.y),T.rotate(r.rotation),T.scale(r.scaleX,r.scaleY)):T.applyITRS(r.x,r.y,r.rotation,r.scaleX,r.scaleY),t.pipelines.preBatch(r);var S=-1!==r.blendMode;S||t.setBlendMode(0);for(var A=r.alpha,P=r.scrollFactorX,O=r.scrollFactorY,D=0;D<d;D++){var L=h[D];if(L.willRender(o)){var I,B,N,G;if(void 0!==L.alphaTopLeft)I=L.alphaTopLeft,B=L.alphaTopRight,N=L.alphaBottomLeft,G=L.alphaBottomRight;else{var Y=L.alpha;I=Y,B=Y,N=Y,G=Y}var X=L.scrollFactorX,U=L.scrollFactorY;S||L.blendMode===t.currentBlendMode||t.setBlendMode(L.blendMode);var z=L.mask;z&&z.preRenderWebGL(t,L,o);var V=L.type;V!==t.currentType&&(t.newType=!0,t.currentType=V),t.nextTypeMatch=D<d-1&&h[D+1].type===t.currentType,L.setScrollFactor(X*P,U*O),L.setAlpha(I*A,B*A,N*A,G*A),L.renderWebGL(t,L,o,T),L.setAlpha(I,B,N,G),L.setScrollFactor(X,U),z&&z.postRenderWebGL(t,o),t.newType=!1}}t.pipelines.postBatch(r)}}},function(t,r){t.exports=function ContainerCanvasRenderer(t,r,o,a){var h=r.list;if(0!==h.length){o.addToRenderList(r);var d=r.localTransform;a?(d.loadIdentity(),d.multiply(a),d.translate(r.x,r.y),d.rotate(r.rotation),d.scale(r.scaleX,r.scaleY)):d.applyITRS(r.x,r.y,r.rotation,r.scaleX,r.scaleY);var T=-1!==r.blendMode;T||t.setBlendMode(0);var S=r._alpha,A=r.scrollFactorX,P=r.scrollFactorY;r.mask&&r.mask.preRenderCanvas(t,null,o);for(var O=0;O<h.length;O++){var D=h[O];if(D.willRender(o)){var L=D.alpha,I=D.scrollFactorX,B=D.scrollFactorY;T||D.blendMode===t.currentBlendMode||t.setBlendMode(D.blendMode),D.setScrollFactor(I*A,B*P),D.setAlpha(L*S),D.renderCanvas(t,D,o,d),D.setAlpha(L),D.setScrollFactor(I,B)}}r.mask&&r.mask.postRenderCanvas(t)}}},function(t,r,o){var a=o(25);t.exports=function Union(t,r,o){void 0===o&&(o=new a);var h=Math.min(t.x,r.x),d=Math.min(t.y,r.y),T=Math.max(t.right,r.right)-h,S=Math.max(t.bottom,r.bottom)-d;return o.setTo(h,d,T,S)}},function(t,r,o){var a=o(1),h=o(1);a=o(348),h=o(349),t.exports={renderWebGL:a,renderCanvas:h}},function(t,r){t.exports=function SpineContainerWebGLRenderer(t,r,o,a){var h=r.plugin.sceneRenderer,d=r.list;if(0!==d.length){o.addToRenderList(r);var T=r.localTransform;a?(T.loadIdentity(),T.multiply(a),T.translate(r.x,r.y),T.rotate(r.rotation),T.scale(r.scaleX,r.scaleY)):T.applyITRS(r.x,r.y,r.rotation,r.scaleX,r.scaleY),t.newType&&(t.pipelines.clear(),h.begin());var S=t.nextTypeMatch;t.nextTypeMatch=!0,t.newType=!1;for(var A=0;A<d.length;A++){var P=d[A];if(P.willRender(o,r)){var O=P.mask;O&&(h.end(),t.pipelines.rebind(),O.preRenderWebGL(t,P,o),t.pipelines.clear(),h.begin()),P.renderWebGL(t,P,o,T,r),O&&(h.end(),t.pipelines.rebind(),O.postRenderWebGL(t,o),t.pipelines.clear(),h.begin())}}t.nextTypeMatch=S,S||(h.end(),t.pipelines.rebind())}else h.batcher.isDrawing&&t.finalType&&(h.end(),t.pipelines.rebind())}},function(t,r){t.exports=function SpineContainerCanvasRenderer(t,r,o,a){var h=r.list;if(0!==h.length){o.addToRenderList(r);var d=r.localTransform;a?(d.loadIdentity(),d.multiply(a),d.translate(r.x,r.y),d.rotate(r.rotation),d.scale(r.scaleX,r.scaleY)):d.applyITRS(r.x,r.y,r.rotation,r.scaleX,r.scaleY);var T=-1!==r.blendMode;T||t.setBlendMode(0);var S=r._alpha,A=r.scrollFactorX,P=r.scrollFactorY;r.mask&&r.mask.preRenderCanvas(t,null,o);for(var O=0;O<h.length;O++){var D=h[O];if(D.willRender(o)){var L=D.alpha,I=D.scrollFactorX,B=D.scrollFactorY;T||D.blendMode===t.currentBlendMode||t.setBlendMode(D.blendMode),D.setScrollFactor(I*A,B*P),D.setAlpha(L*S),D.renderCanvas(t,D,o,d),D.setAlpha(L),D.setScrollFactor(I,B)}}r.mask&&r.mask.postRenderCanvas(t)}}}]);var Ml=_createClass((function EngineInitVO(){_classCallCheck(this,EngineInitVO),this.data={flagOverrides:{},gameName:null,gameVersion:"_v1",gameSubEngineConfig:null,preloaderInitialsAssetsNames:{manifestJson:null,font:null,logo:null},initialAssetPackData:null,funcStartGame:null,funcRegisterComponents:null,funcDoGameRegisters:null,requiredScreenOrientation:"any"}})),_l={scene:[{key:"spine",plugin:window.SpinePlugin,start:!0,sceneKey:"spine",mapping:"spine"},{key:"rexGestures",plugin:Hh,start:!0,sceneKey:"rexGestures",mapping:"rexGestures"},{key:"rexBoard",plugin:Ba,mapping:"rexBoard"}],global:[{key:"rexEaseMove",plugin:hh,start:!0,sceneKey:"rexEaseMove",mapping:"rexEaseMove"},{key:"rexCsvScenario",plugin:El,start:!0,sceneKey:"rexCsvScenario",mapping:"rexCsvScenario"},{key:"rexMoveTo",plugin:jh,start:!0,sceneKey:"rexMoveTo",mapping:"rexMoveTo"},{key:"rexBullet",plugin:Xa,start:!0,sceneKey:"rexBullet",mapping:"rexBullet"},{key:"rexRotateTo",plugin:el,start:!0}]},Pl=function(){function BMEngine(){_classCallCheck(this,BMEngine)}return _createClass(BMEngine,null,[{key:"EnableEditor",value:function EnableEditor(){kl.enabled=!0}},{key:"IsCanvas",value:function IsCanvas(){return Ol.phaserGameObject.renderer.type===S.CANVAS}},{key:"SetGameplayCameraOffset",value:function SetGameplayCameraOffset(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Rl.camera.x=t,Rl.camera.y=r,o&&_InternalUpdateCamera()}},{key:"GetGameplayCameraOffset",value:function GetGameplayCameraOffset(){return Rl.camera}},{key:"SetCameraCenter",value:function SetCameraCenter(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Rl.camera.centerX=t,Rl.camera.centerY=r}},{key:"SetPauseAllowedByStates",value:function SetPauseAllowedByStates(t){Rl.pauseAllowedByStates=t}},{key:"TryPauseGame",value:function TryPauseGame(){if(0==Rl.flags.allowPauseAlways){if(!Rl.pauseAllowedByStates)return;if(!Rl.pauseAllowedAfterStartGame)return}return!Rl.hasBeenPaused&&(Fl.PauseGameScenes(),!0)}},{key:"TryUnpauseGame",value:function TryUnpauseGame(){return!!Rl.hasBeenPaused&&(Fl.UnPauseGameScenes(),!0)}},{key:"UserMuteAudio",value:function UserMuteAudio(){Rl.audio.wasMutedManually=!0,Il.MuteAudio(),Dl.SaveGameSettings()}},{key:"UserUnmuteAudio",value:function UserUnmuteAudio(){Rl.audio.wasMutedManually=!1,Il.UnmuteAudio(),Dl.SaveGameSettings()}},{key:"PlayAudioFile",value:function PlayAudioFile(t){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Ol.soundInstanceCache[t])r=Ol.soundInstanceCache[t];else{if(!BMEngine.GetPhaserGame().cache.audio.exists(t))return void console.log("RETURNING, FAIL QUIETLY - NO AUDIO :",t);Rl.audioConfigCache[t]||(Rl.audioConfigCache[t]={volume:1,loop:!1},o&&N(Rl.audioConfigCache[t],o));var a=Rl.audioConfigCache[t];r=BMEngine.GetPhaserGame().sound.add(t,a)}r.play(),Ol.soundInstanceCache[t]=r}},{key:"GetAudioState",value:function GetAudioState(){return Rl.audio.audioState}},{key:"GetDisplayDataCopy",value:function GetDisplayDataCopy(){return N({},Rl.display)}},{key:"GetPhaserGame",value:function GetPhaserGame(){return Ol.phaserGameObject}},{key:"GetGameplayScene",value:function GetGameplayScene(){return console.assert(Ol.phaserScenes.game.ref,Ol.phaserScenes.game),Ol.phaserScenes.game.ref}},{key:"GetAudioModelInstance",value:function GetAudioModelInstance(){return Il}},{key:"GetGameplayCamera",value:function GetGameplayCamera(){return BMEngine.GetGameplayScene().cameras.main}},{key:"GetRightForGameplayScene",value:function GetRightForGameplayScene(){var t=BMEngine.GetGameplayScene().cameras.main.worldView;return t.width+t.x}},{key:"GetInterfaceScene",value:function GetInterfaceScene(){return console.assert(Ol.phaserScenes.gameInterface.ref,Ol.phaserScenes.gameInterface),Ol.phaserScenes.gameInterface.ref}},{key:"GetEditorScene",value:function GetEditorScene(){return Ol.phaserScenes.pauseDisplayer.ref}},{key:"GetFileFromCache",value:function GetFileFromCache(t,r){return Ol.phaserGameObject.cache[t].get(r)}},{key:"IsRotationDisplayed",value:function IsRotationDisplayed(){return Rl.isRotationDisplayActive}},{key:"GetOrMakeContainerLayer",value:function GetOrMakeContainerLayer(t,r,o,a){var h=t+"_"+r+o+"_"+a;if(!Ol.phaserLayers[h]){if("gameplay"==t){var d=BMEngine.GetGameplayScene().make.container({},!1);BMEngine.GetGameplayScene().add.existing(d),d.setDepth(1e4*a),Ol.phaserLayers[h]={layer:d,anchorX:1,anchorY:1}}else{var T;"gui"==t?(T=BMEngine.GetInterfaceScene().make.container({},!1),BMEngine.GetInterfaceScene().add.existing(T)):"pause"==t&&(T=Ol.phaserScenes.pauseDisplayer.ref.make.container({},!1),Ol.phaserScenes.pauseDisplayer.ref.add.existing(T)),T.setDepth(1e4*a);var S=r,A=o;Ol.phaserLayers[h]={layer:T,anchorX:S,anchorY:A}}_InternalRepositionLayers()}return Ol.phaserLayers[h].layer}},{key:"GetSaveSlotReference",value:function GetSaveSlotReference(t){return Dl.LoadGameData(t)}},{key:"SaveGame",value:function SaveGame(){Dl.SaveCurrentSlot()}}]),BMEngine}(),Rl={refGameSave:{},refGameState:null,audioConfigCache:{},audio:{wasMutedManually:!1,wasMutedAutomatically:!1,audioState:1},pausedFromRotation:!1,isRotationDisplayActive:!1,hasBeenPaused:!1,pauseAllowedAfterStartGame:!1,pauseAllowedByStates:!1,flags:{disableSaveUserPrefs:0,disableSaveGameData:0,disableFakeMusicPreload:0,cordovaListenersEnabled:0,disableAutoPause:0,allowPauseAlways:0},camera:{x:0,y:0,centerX:!0,centerY:!1},display:{designWidth:1,designHeight:1,responsiveWidth:1,responsiveHeight:1,dpi:1,lastWidth:1,lastHeight:1},currentOrientation:"any",requiredOrientation:"any",gameManifestJSON:null,initVO:null},kl={enabled:!1},Ol={gameSubEngineConfig:{},phaserGameObject:null,phaserLayers:{},soundInstanceCache:{},phaserScenes:{preloader:{ref:null,def:null,loadedPreloaderInitials:!1,loadedGameAssets:!1,assetsRealLoadPercentage:0,assetsRealLoadDone:!1,funcRefUpdatePreloaderFont:null,funcRefCompletePreload:null,extraMaxRequiredTime:5e3,extraCurRequiredTime:0},resizeHandler:{ref:null,def:null},pauseDisplayer:{ref:null,def:null},rotateDisplayer:{ref:null,def:null,layer:null,bg:null,rotateHelper:null},controlPauseGameLoop:{ref:null,def:null},game:{ref:null,def:null},gameInterface:{ref:null,def:null}}};function UsePhaserSubEngine(t){N(Rl.flags,t.data.flagOverrides);var r=N(Ol.gameSubEngineConfig,t.data.gameSubEngineConfig);kl.enabled&&(r.backgroundColor="0x000000"),Rl.requiredOrientation=t.data.requiredScreenOrientation,Rl.initVO=t,Dl.LoadGameSettings(),t.data.funcDoGameRegisters();var o=t.data.preloaderInitialsAssetsNames,h=t.data.initialAssetPackData,d=t.data.funcStartGame,T=!1;GetOs().android&&function GetBrowser(){if(Pt)return _t;Pt=!0;var t=navigator.userAgent;return/Edge\/\d+/.test(t)?_t.edge=!0:/Chrome\/(\d+)/.test(t)&&!GetOs().windowsPhone?(_t.chrome=!0,_t.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(t)?(_t.firefox=!0,_t.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(t)&&GetOs().iOS?_t.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(t)?(_t.ie=!0,_t.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(t)?_t.opera=!0:/Safari/.test(t)&&!GetOs().windowsPhone?_t.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(t)&&(_t.ie=!0,_t.trident=!0,_t.tridentVersion=parseInt(RegExp.$1,10),_t.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(t)&&(_t.silk=!0),_t}().firefox&&(r.type=S.CANVAS),!GetOs().desktop&&GetOs().iOS&&(T=!0),GetOs().desktop&&GetOs().macOS&&(T=!0),r.fps={forceSetTimeOut:!1,target:60},T&&(r.type=S.CANVAS,r.fps={forceSetTimeOut:!0,target:60},r.roundPixels=!1),r.type=dt.GetSingleton().onGetRendererTypeOverride(r.type);var A=function recalcDisplayValues(){if(GetOs().desktop)Rl.display.designWidth=r.scale.width,Rl.display.designHeight=r.scale.height;else{var t=r.scale.height/r.scale.width,o=Bl.GetRealScreenHeight()/Bl.GetRealScreenWidth()/t;o=Ae(o,1,2),Rl.display.dpi=o,Rl.display.designWidth=r.scale.width*Rl.display.dpi,Rl.display.designHeight=r.scale.height*Rl.display.dpi}};A(),r.plugins=_l;var O=new S.Game(r);Ol.phaserGameObject=O,O.events.addListener(S.Core.Events.BLUR,(function(){Rl.flags.disableAutoPause||gt.hasKey("PauseGame")&&(console.log("PAUSE FROM: BLUR"),Il.TryToAutomaticallyMuteIfNotMutedManually(),gt.runCommand("PauseGame"))})),O.events.addListener(S.Core.Events.FOCUS,(function(){Rl.pausedFromRotation||Il.TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically()})),document.addEventListener("visibilitychange",(function(){if(document.hidden){if(Rl.flags.disableAutoPause)return;gt.hasKey("PauseGame")&&(console.log("PAUSE FROM: VISIBILITYCHANGE"),gt.runCommand("PauseGame"),Il.TryToAutomaticallyMuteIfNotMutedManually())}else{if(Rl.pausedFromRotation)return;Il.TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically()}}),!1),document.addEventListener("pause",(function(){if(document.hidden){if(Rl.flags.disableAutoPause)return;gt.hasKey("PauseGame")&&(console.log("PAUSE FROM: PAUSE"),gt.runCommand("PauseGame"),Il.TryToAutomaticallyMuteIfNotMutedManually())}}),!1),window.document.addEventListener("resume",(function(){Rl.pausedFromRotation||Il.TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically()}),!1);var D=function _resize(){A();var t=Bl.GetRealScreenWidth()/Bl.GetRealScreenHeight(),r=Rl.display.designHeight/Rl.display.designWidth;if(Rl.display.responsiveWidth=Rl.display.designWidth*r*t,Rl.display.responsiveHeight=Rl.display.designHeight,O.scale.setGameSize(Rl.display.responsiveWidth,Rl.display.responsiveHeight),kl.enabled){var o=[Pl.GetGameplayScene().cameras,Pl.GetInterfaceScene().cameras];for(var a in o){var h=o[a],d=Rl.display.responsiveHeight,T=Rl.display.responsiveWidth;h.main.setViewport(T/4,0,T/2,d)}}_InternalRepositionLayers()};Ol.phaserScenes.resizeHandler.def={create:function create(){D(),window.addEventListener("resize",(function(){D()}))},update:function update(){Bl.GetRealScreenWidth()==Rl.display.lastWidth&&Bl.GetRealScreenHeight()==Rl.display.lastHeight||(Rl.display.lastWidth=Bl.GetRealScreenWidth(),Rl.display.lastHeight=Bl.GetRealScreenHeight(),D())}},Ol.phaserScenes.preloader.def={preload:function preload(){var t=this,T=this,S=new a;S.fillRequestDataFrom(h),S.supplyLoadFunctionDictionary(T,(function(){var h=t.make.container({},!0),S=t.make.image({x:0,y:0,key:o.logo,add:!0},!1),A=t.make.bitmapText({x:0,y:125,font:o.font,text:"0",size:!1,add:!0,align:1},!1);h.add(S),h.add(A);var P=function repositionLayer(){h.x=Rl.display.responsiveWidth/2,h.y=Rl.display.responsiveHeight/2};P(),window.addEventListener("resize",P),Ol.phaserScenes.preloader.funcRefCompletePreload=function(){Ol.phaserScenes.preloader.funcRefCompletePreload=null,S.destroy(),A.destroy(),h.destroy(),window.removeEventListener("resize",P),T.game.scene.stop("PreloaderScene"),-1==Rl.audio.audioState&&Pl.UserMuteAudio();!function validator(){r.optionalLoadDelayValidator?(r.optionalValidatorBreak&&(r.optionalValidatorBreak.val-=1,r.optionalValidatorBreak.val<=0&&(r.optionalValidatorBreak=null,r.optionalLoadDelayValidator=null)),r.optionalLoadDelayValidator()&&(r.optionalLoadDelayValidator=null),Ct.QueueDelayedFunction(GetGUID(),10,(function(){validator()}))):(d(),Rl.pauseAllowedAfterStartGame=!0)}()},Ol.phaserScenes.preloader.funcRefUpdatePreloaderFont=function(){var t=Math.ceil(100*Ol.phaserScenes.preloader.assetsRealLoadPercentage);if(Rl.flags.disableFakeMusicPreload)A.text=t+"%",A.x=-A.width/2;else{t*=.75;var r=Ol.phaserScenes.preloader.extraCurRequiredTime/Ol.phaserScenes.preloader.extraMaxRequiredTime;r=Math.ceil(.25*r*100),t=Math.ceil(t+r),A.text=t+"%",A.x=-A.width/2}},Rl.gameManifestJSON=Pl.GetFileFromCache("json",o.manifestJson);var O=new a;O.fillRequestDataFrom(Rl.gameManifestJSON.assets),O.supplyLoadFunctionDictionary(T,(function(){Ol.phaserScenes.preloader.assetsRealLoadPercentage=1,Ol.phaserScenes.preloader.assetsRealLoadDone=!0})),T.load.on("progress",(function(t){Ol.phaserScenes.preloader.funcRefUpdatePreloaderFont&&(Ol.phaserScenes.preloader.assetsRealLoadPercentage=t,Ol.phaserScenes.preloader.funcRefUpdatePreloaderFont())})),O.load(),T.load.start()})),S.load()},create:function create(){},update:function update(t,r){if(Ol.phaserScenes.preloader.funcRefCompletePreload&&Ol.phaserScenes.preloader.funcRefUpdatePreloaderFont){Ol.phaserScenes.preloader.assetsRealLoadDone&&(Ol.phaserScenes.preloader.assetsRealLoadPercentage=1);var o=!1;if(1==Rl.flags.disableFakeMusicPreload)o=!0;else if(Ol.phaserScenes.preloader.assetsRealLoadPercentage>=.75){var a=1;Ol.phaserScenes.preloader.assetsRealLoadDone&&(a=5),Ol.phaserScenes.preloader.extraCurRequiredTime+=r*a,Ol.phaserScenes.preloader.extraCurRequiredTime>=Ol.phaserScenes.preloader.extraMaxRequiredTime&&(Ol.phaserScenes.preloader.extraCurRequiredTime=Ol.phaserScenes.preloader.extraMaxRequiredTime,o=!0)}Ol.phaserScenes.preloader.funcRefUpdatePreloaderFont(),Ol.phaserScenes.preloader.assetsRealLoadDone&&o&&Ol.phaserScenes.preloader.funcRefCompletePreload()}}},Ol.phaserScenes.rotateDisplayer.def={create:function create(){Ol.phaserScenes.rotateDisplayer.ref=this,Ol.phaserScenes.rotateDisplayer.layer=this.make.container({},!0)},update:function update(){Ol.phaserScenes.rotateDisplayer.bg&&Ol.phaserScenes.rotateDisplayer.def.updateRotateSize()},showRotate:function showRotate(){Ol.phaserScenes.rotateDisplayer.bg||(Ol.phaserScenes.rotateDisplayer.bg=Ol.phaserScenes.rotateDisplayer.ref.make.image({x:0,y:0,key:"RotateBG",add:!1},!1),Ol.phaserScenes.rotateDisplayer.rotateHelper=Ol.phaserScenes.rotateDisplayer.ref.make.image({x:0,y:0,key:"NeedPortrait",add:!1},!1),Ol.phaserScenes.rotateDisplayer.def.updateRotateSize(),Ol.phaserScenes.rotateDisplayer.layer.add(Ol.phaserScenes.rotateDisplayer.bg),Ol.phaserScenes.rotateDisplayer.layer.add(Ol.phaserScenes.rotateDisplayer.rotateHelper))},hideRotate:function hideRotate(){Ol.phaserScenes.rotateDisplayer.bg&&Ol.phaserScenes.rotateDisplayer.bg.destroy(),Ol.phaserScenes.rotateDisplayer.bg=null,Ol.phaserScenes.rotateDisplayer.rotateHelper&&Ol.phaserScenes.rotateDisplayer.rotateHelper.destroy(),Ol.phaserScenes.rotateDisplayer.rotateHelper=null},updateRotateSize:function updateRotateSize(){Ol.phaserScenes.rotateDisplayer.bg.setDisplaySize(4096,4096),Ol.phaserScenes.rotateDisplayer.layer.x=Rl.display.responsiveWidth/2,Ol.phaserScenes.rotateDisplayer.layer.y=Rl.display.responsiveHeight/2}},Ol.phaserScenes.pauseDisplayer.def={create:function create(){Ol.phaserScenes.pauseDisplayer.ref=this},update:function update(){}},Ol.phaserScenes.controlPauseGameLoop.def={create:function create(){},update:function update(){var t;"any"!=Rl.requiredOrientation&&(Ol.phaserScenes.preloader.assetsRealLoadDone&&(t=Bl.GetRealScreenWidth()>Bl.GetRealScreenHeight()?"landscape":"portrait",Rl.currentOrientation!=t&&(Rl.currentOrientation=t,Rl.requiredOrientation==Rl.currentOrientation?(Rl.isRotationDisplayActive=!1,Ol.phaserScenes.rotateDisplayer.def.hideRotate(),Il.TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically(),Rl.pausedFromRotation&&(Rl.pausedFromRotation=!1)):(Rl.isRotationDisplayActive=!0,Ol.phaserScenes.rotateDisplayer.def.showRotate(),Il.TryToAutomaticallyMuteIfNotMutedManually(),Rl.hasBeenPaused||(gt.runCommand("PauseGame"),Rl.pausedFromRotation=!0)))))}},Ol.phaserScenes.gameInterface.def={create:function create(){Ol.phaserScenes.gameInterface.ref=this},update:function update(){}},Ol.phaserScenes.game.def={create:function create(){Ol.phaserScenes.game.ref=this,P.InitRoutines()},update:function update(t,r){Rl.isRotationDisplayActive||(_InternalUpdateCamera(),P.UpdateRoutines(t,r))}},O.scene.add("PreloaderScene",Ol.phaserScenes.preloader.def,!0),O.scene.add("GameScene",Ol.phaserScenes.game.def,!0),O.scene.add("GameInterface",Ol.phaserScenes.gameInterface.def,!0),O.scene.add("ControlPauseGameLoop",Ol.phaserScenes.controlPauseGameLoop.def,!0),O.scene.add("PauseSceneDisplayer",Ol.phaserScenes.pauseDisplayer.def,!0),O.scene.add("RotateDeviceSceneDisplayer",Ol.phaserScenes.rotateDisplayer.def,!0),O.scene.add("ResizeHandlerScene",Ol.phaserScenes.resizeHandler.def,!0),console.log("DisplayData: ",Rl.display)}var Dl=function(){function InternalSaveModel(){_classCallCheck(this,InternalSaveModel)}return _createClass(InternalSaveModel,null,[{key:"GetSaveSlotKey",value:function GetSaveSlotKey(){return Rl.initVO.data.gameName+"_slot_"+Rl.initVO.data.gameVersion+"_major_1"}},{key:"SaveCurrentSlot",value:function SaveCurrentSlot(){1!=Rl.flags.disableSaveGameData&&dt.GetSingleton().adaptLocalStorageSetItem(InternalSaveModel.GetSaveSlotKey(),JSON.stringify(Rl.refGameSave))}},{key:"SaveGameSettings",value:function SaveGameSettings(){1!=Rl.flags.disableSaveUserPrefs&&dt.GetSingleton().adaptLocalStorageSetItem(InternalSaveModel.GetSaveSlotKey(),JSON.stringify(Rl.refGameSave))}},{key:"LoadGameSettings",value:function LoadGameSettings(){if(1!=Rl.flags.disableSaveUserPrefs){var t=dt.GetSingleton().adaptLocalStorageGetItem(InternalSaveModel.GetSaveSlotKey());if(null==t){var r={version:1,audio:{audioState:Rl.audio.audioState},gameState:null};Rl.refGameSave=r,this.SaveGameSettings()}else N(Rl.refGameSave,JSON.parse(t));Rl.audio=Rl.refGameSave.audio}}},{key:"LoadGameData",value:function LoadGameData(t){return 1==Rl.flags.disableSaveGameData?(Rl.refGameState=t,t):(null==Rl.refGameSave.gameState&&(Rl.refGameSave.gameState={},N(Rl.refGameSave.gameState,t)),Rl.refGameState=Rl.refGameSave.gameState,Rl.refGameState)}}]),InternalSaveModel}(),Ll=function(){function InternalAudioModel(){_classCallCheck(this,InternalAudioModel)}return _createClass(InternalAudioModel,[{key:"MuteAudio",value:function MuteAudio(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&(Rl.audio.audioState=-1),Pl.GetGameplayScene().sound.setMute(!0)}},{key:"UnmuteAudio",value:function UnmuteAudio(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&(Rl.audio.audioState=1),Pl.GetGameplayScene().sound.setMute(!1)}},{key:"TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically",value:function TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically(){Rl.audio.wasMutedManually||Rl.audio.wasMutedAutomatically&&(Rl.audio.wasMutedAutomatically=!1,Il.UnmuteAudio(!1))}},{key:"TryToAutomaticallyMuteIfNotMutedManually",value:function TryToAutomaticallyMuteIfNotMutedManually(){Rl.audio.wasMutedManually||Rl.audio.wasMutedAutomatically||(Rl.audio.wasMutedAutomatically=!0,Il.MuteAudio(!1))}}]),InternalAudioModel}(),Il=new Ll,Fl=function(){function InternalPauseModel(){_classCallCheck(this,InternalPauseModel)}return _createClass(InternalPauseModel,null,[{key:"PauseGameScenes",value:function PauseGameScenes(){Rl.hasBeenPaused||(Rl.hasBeenPaused=!0,Ol.phaserScenes.game.ref&&Ol.phaserScenes.game.ref.sys.pause(),Ol.phaserScenes.gameInterface.ref&&Ol.phaserScenes.gameInterface.ref.sys.pause())}},{key:"UnPauseGameScenes",value:function UnPauseGameScenes(){Rl.hasBeenPaused&&(Rl.hasBeenPaused=!1,Ol.phaserScenes.game.ref&&Ol.phaserScenes.game.ref.sys.resume(),Ol.phaserScenes.gameInterface.ref&&Ol.phaserScenes.gameInterface.ref.sys.resume())}}]),InternalPauseModel}(),Bl=function(){function InternalScreenModel(){_classCallCheck(this,InternalScreenModel)}return _createClass(InternalScreenModel,null,[{key:"GetRealScreenSize",value:function GetRealScreenSize(){var t=window.innerWidth,r=window.innerHeight;document.documentElement&&"clientWidth"in document.documentElement&&(t=document.documentElement.clientWidth,r=document.documentElement.clientHeight);var o={bottom:0,top:0};GetOs().iOS&&(document.documentElement&&"getBoundingClientRect"in document.documentElement?o=document.documentElement.getBoundingClientRect():"getBoundingClientRect"in document.body&&(o=document.body.getBoundingClientRect()),o&&(t=o.right-o.left,r=o.bottom-o.top));var a={w:t,h:r};return a.h=window.innerHeight,a}},{key:"GetRealScreenHeight",value:function GetRealScreenHeight(){return InternalScreenModel.GetRealScreenSize().h}},{key:"GetRealScreenWidth",value:function GetRealScreenWidth(){return InternalScreenModel.GetRealScreenSize().w}}]),InternalScreenModel}();function _InternalUpdateCamera(){Pl.GetGameplayScene().cameras.main.scrollX=-Pl.GetGameplayScene().cameras.main.width/2+Rl.camera.x,Rl.camera.centerY?Pl.GetGameplayScene().cameras.main.scrollY=-Pl.GetGameplayScene().cameras.main.height/2+Rl.camera.y:Pl.GetGameplayScene().cameras.main.scrollY=Rl.camera.y}function _InternalRepositionLayers(){for(var t in Ol.phaserLayers){var r=Ol.phaserLayers[t],o=r.layer.scene.cameras.main.width,a=r.layer.scene.cameras.main.height;2==r.anchorX&&(r.layer.x=o/2),3==r.anchorX&&(r.layer.x=o),2==r.anchorY&&(r.layer.y=a/2),3==r.anchorY&&(r.layer.y=a)}}var Nl=function(t){_inherits(OffscreenDieComponent,t);var r=_createSuper(OffscreenDieComponent);function OffscreenDieComponent(t){var o;_classCallCheck(this,OffscreenDieComponent),(o=r.call(this,null)).timeOffScreenMS=0,o.maxTimeOffScreenMS=1e4,o.wasOnScreen=!1;var a=JSON.parse(JSON.stringify(o.constructor.properties));return Object.assign(_assertThisInitialized(o),a,t),o}return _createClass(OffscreenDieComponent,null,[{key:"GetName",value:function GetName(){return"offscreenDie"}},{key:"properties",get:function get(){return{}}},{key:"At",value:function At(t){return t.offscreenDie}},{key:"AddToEntity",value:function AddToEntity(t,r){t.add(OffscreenDieComponent,r)}}]),OffscreenDieComponent}(G),Gl=function(){function DisposeEntityAction(){_classCallCheck(this,DisposeEntityAction)}return _createClass(DisposeEntityAction,null,[{key:"RegisterPackedAsGameCommand",value:function RegisterPackedAsGameCommand(){gt.register(this.Name,new ft((function(t){DisposeEntityAction.Take(t.entity)})))}},{key:"Take",value:function Take(t){Ct.QueueActorToDisposeBuffer(t)}}]),DisposeEntityAction}();function isNil(t){return null==t}function coerceToBoolean(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return isNil(t)?r:Boolean(t)}function isString(t){return"string"==typeof t}function coerceToString(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return isNil(t)?r:isString(t)?t:String(t)}function capitalize(t,r){var o=coerceToString(t),a=coerceToBoolean(r);return""===o?"":(a&&(o=o.toLowerCase()),o.substr(0,1).toUpperCase()+o.substr(1))}function lowerCase(t){return coerceToString(t,"").toLowerCase()}_defineProperty(Gl,"Name","DisposeEntityAction");var Yl="\\s\\uFEFF\\xA0",Xl="\\u0300-\\u036F\\u1AB0-\\u1AFF\\u1DC0-\\u1DFF\\u20D0-\\u20FF\\uFE20-\\uFE2F",Ul="\\0-\\u02FF\\u0370-\\u1AAF\\u1B00-\\u1DBF\\u1E00-\\u20CF\\u2100-\\uD7FF\\uE000-\\uFE1F\\uFE30-\\uFFFF",zl=new RegExp("(["+Ul+"]|["+"\\uD800-\\uDBFF]["+"\\uDC00-\\uDFFF]|["+"\\uD800-\\uDBFF](?!["+"\\uDC00-\\uDFFF])|(?:[^"+"\\uD800-\\uDBFF]|^)["+"\\uDC00-\\uDFFF])(["+Xl+"]+)","g"),Vl=new RegExp("([\\uD800-\\uDBFF])([\\uDC00-\\uDFFF])","g"),Wl=new RegExp("((?:["+Ul+"]|["+"\\uD800-\\uDBFF]["+"\\uDC00-\\uDFFF]|["+"\\uD800-\\uDBFF](?!["+"\\uDC00-\\uDFFF])|(?:[^"+"\\uD800-\\uDBFF]|^)["+"\\uDC00-\\uDFFF])(?:["+Xl+"]+))|(["+"\\uD800-\\uDBFF]["+"\\uDC00-\\uDFFF])|([\\n\\r\\u2028\\u2029])|(.)","g"),Hl=new RegExp("[\\s\\uFEFF\\xA0]"),jl=new RegExp("^[\\s\\uFEFF\\xA0]+"),ql=new RegExp("[\\s\\uFEFF\\xA0]+$"),Zl=new RegExp("^\\d+$"),Kl=/[-[\]{}()*+!<=:?./\\^$|#,]/g,Jl=/[^A-Za-z0-9]/g,Ql=/[<>&"'`]/g,$l=/(%{1,2})(?:(\d+)\$)?(\+)?([ 0]|'.{1})?(-)?(\d+)?(?:\.(\d+))?([bcdiouxXeEfgGs])?/g,tu=/\.?0+$/g,eu=/[gimuy]*$/,iu=/<([A-Za-z0-9]+)>/g,nu="a-z\\xB5\\xDF-\\xF6\\xF8-\\xFF\\u0101\\u0103\\u0105\\u0107\\u0109\\u010B\\u010D\\u010F\\u0111\\u0113\\u0115\\u0117\\u0119\\u011B\\u011D\\u011F\\u0121\\u0123\\u0125\\u0127\\u0129\\u012B\\u012D\\u012F\\u0131\\u0133\\u0135\\u0137\\u0138\\u013A\\u013C\\u013E\\u0140\\u0142\\u0144\\u0146\\u0148\\u0149\\u014B\\u014D\\u014F\\u0151\\u0153\\u0155\\u0157\\u0159\\u015B\\u015D\\u015F\\u0161\\u0163\\u0165\\u0167\\u0169\\u016B\\u016D\\u016F\\u0171\\u0173\\u0175\\u0177\\u017A\\u017C\\u017E-\\u0180\\u0183\\u0185\\u0188\\u018C\\u018D\\u0192\\u0195\\u0199-\\u019B\\u019E\\u01A1\\u01A3\\u01A5\\u01A8\\u01AA\\u01AB\\u01AD\\u01B0\\u01B4\\u01B6\\u01B9\\u01BA\\u01BD-\\u01BF\\u01C6\\u01C9\\u01CC\\u01CE\\u01D0\\u01D2\\u01D4\\u01D6\\u01D8\\u01DA\\u01DC\\u01DD\\u01DF\\u01E1\\u01E3\\u01E5\\u01E7\\u01E9\\u01EB\\u01ED\\u01EF\\u01F0\\u01F3\\u01F5\\u01F9\\u01FB\\u01FD\\u01FF\\u0201\\u0203\\u0205\\u0207\\u0209\\u020B\\u020D\\u020F\\u0211\\u0213\\u0215\\u0217\\u0219\\u021B\\u021D\\u021F\\u0221\\u0223\\u0225\\u0227\\u0229\\u022B\\u022D\\u022F\\u0231\\u0233-\\u0239\\u023C\\u023F\\u0240\\u0242\\u0247\\u0249\\u024B\\u024D\\u024F",ru="\\x41-\\x5a\\xc0-\\xd6\\xd8-\\xde\\u0100\\u0102\\u0104\\u0106\\u0108\\u010a\\u010c\\u010e\\u0110\\u0112\\u0114\\u0116\\u0118\\u011a\\u011c\\u011e\\u0120\\u0122\\u0124\\u0126\\u0128\\u012a\\u012c\\u012e\\u0130\\u0132\\u0134\\u0136\\u0139\\u013b\\u013d\\u013f\\u0141\\u0143\\u0145\\u0147\\u014a\\u014c\\u014e\\u0150\\u0152\\u0154\\u0156\\u0158\\u015a\\u015c\\u015e\\u0160\\u0162\\u0164\\u0166\\u0168\\u016a\\u016c\\u016e\\u0170\\u0172\\u0174\\u0176\\u0178\\u0179\\u017b\\u017d\\u0181\\u0182\\u0184\\u0186\\u0187\\u0189-\\u018b\\u018e-\\u0191\\u0193\\u0194\\u0196-\\u0198\\u019c\\u019d\\u019f\\u01a0\\u01a2\\u01a4\\u01a6\\u01a7\\u01a9\\u01ac\\u01ae\\u01af\\u01b1-\\u01b3\\u01b5\\u01b7\\u01b8\\u01bc\\u01c4\\u01c5\\u01c7\\u01c8\\u01ca\\u01cb\\u01cd\\u01cf\\u01d1\\u01d3\\u01d5\\u01d7\\u01d9\\u01db\\u01de\\u01e0\\u01e2\\u01e4\\u01e6\\u01e8\\u01ea\\u01ec\\u01ee\\u01f1\\u01f2\\u01f4\\u01f6-\\u01f8\\u01fa\\u01fc\\u01fe\\u0200\\u0202\\u0204\\u0206\\u0208\\u020a\\u020c\\u020e\\u0210\\u0212\\u0214\\u0216\\u0218\\u021a\\u021c\\u021e\\u0220\\u0222\\u0224\\u0226\\u0228\\u022a\\u022c\\u022e\\u0230\\u0232\\u023a\\u023b\\u023d\\u023e\\u0241\\u0243-\\u0246\\u0248\\u024a\\u024c\\u024e",su=new RegExp("(?:["+ru+"]["+Xl+"]*)?(?:["+nu+"]["+Xl+"]*)+|(?:["+ru+"]["+Xl+"]*)+(?!["+nu+"])|["+"\\d]+|[\\u2700-\\u27BF]|[^\\x00-\\x2F\\x3A-\\x40\\x5B-\\x60\\x7b-\\xBF\\xD7\\xF7\\u2000-\\u206F"+Yl+"]+","g"),ou=/[A-Z\xC0-\xD6\xD8-\xDE]?[a-z\xDF-\xF6\xF8-\xFF]+|[A-Z\xC0-\xD6\xD8-\xDE]+(?![a-z\xDF-\xF6\xF8-\xFF])|\d+/g,au=new RegExp("^(?:["+nu+ru+"]["+Xl+"]*)+$"),hu=new RegExp("^((?:["+nu+ru+"]["+Xl+"]*)|["+"\\d])+$"),lu=/^[\x01-\xFF]*$/;function nilDefault(t,r){return null==t?r:t}function toString(t){return isNil(t)?null:isString(t)?t:String(t)}function words(t,r,o){var a=coerceToString(t),h=void 0;if(isNil(r))h=lu.test(a)?ou:su;else if(r instanceof RegExp)h=r;else{var d=toString(nilDefault(o,""));h=new RegExp(toString(r),d)}return nilDefault(a.match(h),[])}function wordToCamel(t,r){return 0===r?lowerCase(t):capitalize(t,!0)}function kebabCase(t){var r=coerceToString(t);return""===r?"":words(r).map(lowerCase).join("-")}function swapAndConcat(t,r){var o=r.toLowerCase(),a=r.toUpperCase();return t+(r===o?a:o)}function clipNumber(t,r,o){return t<=r?r:t>=o?o:t}var uu=9007199254740991;function toInteger(t){return t===1/0?uu:t===-1/0?-9007199254740991:~~t}function truncate(t,r,o){var a=coerceToString(t),h=isNil(r)?a.length:clipNumber(toInteger(r),0,uu),d=coerceToString(o,"...");return h>=a.length?a:a.substr(0,r-d.length)+d}function coerceToNumber(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return isNil(t)?r:"number"==typeof t?t:Number(t)}function nanDefault(t,r){return t!=t?r:t}function codePointAt(t,r){var o=coerceToString(t),a=o.length,h=coerceToNumber(r);if(!((h=nanDefault(h,0))<0||h>=a)){var d=o.charCodeAt(h),T=void 0;return function isHighSurrogate(t){return t>=55296&&t<=56319}(d)&&a>h+1&&function isLowSurrogate(t){return t>=56320&&t<=57343}(T=o.charCodeAt(h+1))?function getAstralNumberFromSurrogatePair(t,r){return 1024*(t-55296)+r-56320+65536}(d,T):d}}var cu=Array.prototype.reduce;function ReplacementIndex(){this.index=0}ReplacementIndex.prototype.increment=function(){this.index++},ReplacementIndex.prototype.incrementOnEmptyPosition=function(t){isNil(t)&&this.increment()},ReplacementIndex.prototype.getIndexByPosition=function(t){return isNil(t)?this.index:t-1};var du="G";function repeat(t,r){for(var o=coerceToString(t),a=isNil(r)?1:clipNumber(toInteger(r),0,uu),h="";a;)1&a&&(h+=o),a>1&&(o+=o),a>>=1;return h}function buildPadding(t,r){return repeat(t,toInteger(r/t.length)+r%t.length).substr(0,r)}function padLeft(t,r,o){var a=coerceToString(t),h=isNil(r)?0:clipNumber(toInteger(r),0,uu),d=coerceToString(o," ");return h<=a.length?a:buildPadding(d,h-a.length)+a}function padRight(t,r,o){var a=coerceToString(t),h=isNil(r)?0:clipNumber(toInteger(r),0,uu),d=coerceToString(o," ");return h<=a.length?a:a+buildPadding(d,h-a.length)}function addSignToFormattedNumber(t,r,o){return"+"===o.signSpecifier&&t>=0&&(r="+"+r),r}function float(t,r){var o=parseFloat(t),a=void 0;isNaN(o)&&(o=0);var h=coerceToNumber(r.precision,6);switch(r.typeSpecifier){case"f":a=o.toFixed(h);break;case"e":a=o.toExponential(h);break;case"E":a=o.toExponential(h).toUpperCase();break;case"g":case"G":a=function formatFloatAsShort(t,r,o){if(0===t)return"0";var a=0===r?1:r,h=t.toPrecision(a).replace(tu,"");o.typeSpecifier===du&&(h=h.toUpperCase());return h}(o,h,r)}return coerceToString(a=addSignToFormattedNumber(o,a,r))}function integerBase(t,r){var o=parseInt(t);switch(isNaN(o)&&(o=0),o>>>=0,r.typeSpecifier){case"c":o=String.fromCharCode(o);break;case"b":o=o.toString(2);break;case"o":o=o.toString(8);break;case"x":o=o.toString(16);break;case"X":o=o.toString(16).toUpperCase()}return coerceToString(o)}function integerDecimal(t,r){var o=parseInt(t);return isNaN(o)&&(o=0),addSignToFormattedNumber(o,toString(o),r)}function stringFormat(t,r){var o=t,a=r.precision;return!isNil(a)&&o.length>a&&(o=truncate(o,a,"")),o}function compute(t,r){var o=void 0;switch(r.typeSpecifier){case"s":o=stringFormat;break;case"d":case"i":o=integerDecimal;break;case"c":case"b":case"o":case"x":case"X":case"u":o=integerBase;break;case"f":case"e":case"E":case"g":case du:o=float}return function alignAndPad(t,r){var o=r.width;return isNil(o)||t.length>=o?t:("-"===r.alignmentSpecifier?padRight:padLeft)(t,o,r.getPaddingCharacter())}(o(t,r),r)}function ConversionSpecification(t){this.percent=t.percent,this.signSpecifier=t.signSpecifier,this.paddingSpecifier=t.paddingSpecifier,this.alignmentSpecifier=t.alignmentSpecifier,this.width=t.width,this.precision=t.precision,this.typeSpecifier=t.typeSpecifier}function match(t,r,o,a,h,d,T,S,A,P,O){var D=new ConversionSpecification({percent:a,signSpecifier:d,paddingSpecifier:T,alignmentSpecifier:S,width:coerceToNumber(A,null),precision:coerceToNumber(P,null),typeSpecifier:O});if(D.isPercentLiteral())return o.slice(1);var L=t.getIndexByPosition(h);return t.incrementOnEmptyPosition(h),function validate(t,r,o){if(isNil(o.typeSpecifier))throw new Error("sprintf(): Unknown type specifier");if(t>r-1)throw new Error("sprintf(): Too few arguments");if(t<0)throw new Error("sprintf(): Argument number must be greater than zero")}(L,r.length,D),compute(r[L],D)}function sprintf(t){var r=coerceToString(t);if(""===r)return r;for(var o=arguments.length,a=Array(o>1?o-1:0),h=1;h<o;h++)a[h-1]=arguments[h];var d=match.bind(void 0,new ReplacementIndex,a);return r.replace($l,d)}ConversionSpecification.prototype.isPercentLiteral=function(){return"%%"===this.percent},ConversionSpecification.prototype.getPaddingCharacter=function(){var t=nilDefault(this.paddingSpecifier," ");return 2===t.length&&"'"===t[0]&&(t=t[1]),t};var fu={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};function replaceSpecialCharacter(t){return fu[t]}function escapeRegExp(t){return coerceToString(t).replace(Kl,"\\$&")}var pu={"<":/(&lt;)|(&#x0*3c;)|(&#0*60;)/gi,">":/(&gt;)|(&#x0*3e;)|(&#0*62;)/gi,"&":/(&amp;)|(&#x0*26;)|(&#0*38;)/gi,'"':/(&quot;)|(&#x0*22;)|(&#0*34;)/gi,"'":/(&#x0*27;)|(&#0*39;)/gi,"`":/(&#x0*60;)|(&#0*96;)/gi},gu=Object.keys(pu);function reduceUnescapedString(t,r){return t.replace(pu[r],r)}var vu={3:"",8:"",A:"A",B:"B",C:"C",D:"D",E:"E",F:"F",G:"G",H:"H",I:"I",J:"J",K:"K",L:"L",M:"M",N:"N",O:"O",P:"P",Q:"Q",R:"R",S:"S",T:"T",U:"U",V:"V",W:"W",X:"X",Y:"Y",Z:"Z",a:"a",b:"b",c:"c",d:"d",e:"e",f:"f",g:"g",h:"h",i:"i",j:"j",k:"k",l:"l",m:"m",n:"n",o:"o",p:"p",q:"q",r:"r",s:"s",t:"t",u:"u",v:"v",w:"w",x:"x",y:"y",z:"z",OE:"",oe:"",AE:"",ae:"",hv:"",OI:"",oi:"",DZ:"",Dz:"",dz:"",LJ:"",Lj:"",lj:"",NJ:"",Nj:"",nj:"",OU:"",ou:"",TZ:"",tz:"",AA:"",aa:"",AO:"",ao:"",AU:"",au:"",AV:"",av:"",AY:"",ay:"",OO:"",oo:"",VY:"",vy:"",TH:"",th:"",PS:"",ps:"",Yo:"",Ye:"",Yi:"",Zh:"",Ch:"",Sh:"","":"",Yu:"",Ya:"",zh:"",ch:"",sh:"",yu:"",ya:"",yo:"",ye:"",yi:""},mu=null;function getLatinCharacter(t){var r=function getDiacriticsMap(){return null!==mu||(mu={},Object.keys(vu).forEach((function(t){for(var r=vu[t],o=0;o<r.length;o++){var a=r[o];mu[a]=t}}))),mu}()[t];return r||t}function removeCombiningMarks(t,r){return r}function latinise(t){var r=coerceToString(t);return""===r?"":r.replace(Jl,getLatinCharacter).replace(zl,removeCombiningMarks)}function includes(t,r,o){var a=coerceToString(t),h=toString(r);return null!==h&&(""===h||(o=isNil(o)?0:clipNumber(toInteger(o),0,a.length),-1!==a.indexOf(h,o)))}function appendFlagToRegExp(t,r){var o=function getRegExpFlags(t){return t.toString().match(eu)[0]}(t);return includes(o,r)?t:new RegExp(t.source,o+r)}var _slicedToArray=function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function sliceIterator(t,r){var o=[],a=!0,h=!1,d=void 0;try{for(var T,S=t[Symbol.iterator]();!(a=(T=S.next()).done)&&(o.push(T.value),!r||o.length!==r);a=!0);}catch(A){h=!0,d=A}finally{try{!a&&S.return&&S.return()}finally{if(h)throw d}}return o}(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function sortStringByLength(t,r){return t.length===r.length?0:t.length<r.length?1:-1}var yu=Array.prototype.reduce;function trimLeft(t,r){var o=coerceToString(t);if(""===r||""===o)return o;var a=toString(r);if(isNil(a))return o.replace(jl,"");var h=!0;return yu.call(o,(function(t,r){return h&&includes(a,r)?t:(h=!1,t+r)}),"")}var xu=Array.prototype.reduceRight;function trimRight(t,r){var o=coerceToString(t);if(""===r||""===o)return o;var a=toString(r);if(isNil(a))return o.replace(ql,"");var h=!0;return xu.call(o,(function(t,r){return h&&includes(a,r)?t:(h=!1,r+t)}),"")}function determineOptions(t){return{width:coerceToNumber(t.width,75),newLine:coerceToString(t.newLine,"\n"),indent:coerceToString(t.indent,""),cut:coerceToBoolean(t.cut,!1)}}function isAlpha(t){var r=coerceToString(t);return au.test(r)}function hasSubstringAtIndex(t,r,o){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],h=0;a&&(h=1-r.length);var d=t.substr(o+h,r.length);return d.toLowerCase()===r}function parseTagName(t){for(var r=0,o="",a=0;2!==r;){var h=t[a++].toLowerCase();switch(h){case"<":break;case">":r=2;break;default:Hl.test(h)?1===r&&(r=2):(0===r&&(r=1),"/"!==h&&(o+=h))}}return o}var Tu=null;var bu=function getGlobalObject(){return null!==Tu?Tu:Tu="object"===("undefined"==typeof global?"undefined":_typeof(global))&&global.Object===Object?global:"object"===("undefined"==typeof self?"undefined":_typeof(self))&&self.Object===Object?self:new Function("return this")()}(),wu=bu.v;var Su={camelCase:function camelCase(t){var r=coerceToString(t);return""===r?"":words(r).map(wordToCamel).join("")},capitalize:capitalize,decapitalize:function decapitalize(t){var r=coerceToString(t);return""===r?"":r.substr(0,1).toLowerCase()+r.substr(1)},kebabCase:kebabCase,lowerCase:lowerCase,snakeCase:function snakeCase(t){var r=coerceToString(t);return""===r?"":words(r).map(lowerCase).join("_")},swapCase:function swapCase(t){return coerceToString(t).split("").reduce(swapAndConcat,"")},titleCase:function titleCase(t,r){var o=coerceToString(t),a=Array.isArray(r)?r:[],h=lu.test(o)?ou:su;return o.replace(h,(function(t,r){return r>0&&a.indexOf(o[r-1])>=0?t.toLowerCase():capitalize(t,!0)}))},upperCase:function upperCase(t){return coerceToString(t).toUpperCase()},count:function count(t){return coerceToString(t).length},countGraphemes:function countGrapheme(t){return coerceToString(t).replace(zl,"*").replace(Vl,"*").length},countSubstrings:function countSubstrings(t,r){var o=coerceToString(t),a=coerceToString(r),h=a.length,d=0,T=0;if(""===o||""===a)return d;do{-1!==(T=o.indexOf(a,T))&&(d++,T+=h)}while(-1!==T);return d},countWhere:function countWhere(t,r,o){var a=coerceToString(t);if(""===a||"function"!=typeof r)return 0;var h=r.bind(o);return cu.call(a,(function(t,r,o){return h(r,o,a)?t+1:t}),0)},countWords:function countWords(t,r,o){return words(t,r,o).length},escapeHtml:function escapeHtml(t){return coerceToString(t).replace(Ql,replaceSpecialCharacter)},escapeRegExp:escapeRegExp,unescapeHtml:function unescapeHtml(t){var r=coerceToString(t);return gu.reduce(reduceUnescapedString,r)},sprintf:sprintf,vprintf:function vprintf(t,r){return sprintf.apply(void 0,[t].concat(function _toConsumableArray(t){if(Array.isArray(t)){for(var r=0,o=Array(t.length);r<t.length;r++)o[r]=t[r];return o}return Array.from(t)}(nilDefault(r,[]))))},indexOf:function indexOf(t,r,o){return coerceToString(t).indexOf(r,o)},lastIndexOf:function lastIndexOf(t,r,o){return coerceToString(t).lastIndexOf(r,o)},search:function search(t,r,o){var a=coerceToString(t),h=isNil(o)?0:clipNumber(toInteger(o),0,a.length),d=a.substr(h).search(r);return-1===d||isNaN(h)||(d+=h),d},charAt:function charAt(t,r){return coerceToString(t).charAt(r)},codePointAt:codePointAt,first:function first(t,r){var o=coerceToString(t),a=isNil(r)?1:clipNumber(toInteger(r),0,uu);return o.length<=a?o:o.substr(0,a)},graphemeAt:function graphemeAt(t,r){var o=coerceToString(t),a=coerceToNumber(r),h=void 0,d=0;for(a=nanDefault(a,0);null!==(h=Wl.exec(o));){if(d===a)return Wl.lastIndex=0,h[0];d++}return""},last:function last(t,r){var o=coerceToString(t),a=isNil(r)?1:clipNumber(toInteger(r),0,uu);return o.length<=a?o:o.substr(o.length-a,a)},prune:function prune(t,r,o){var a=coerceToString(t),h=isNil(r)?a.length:clipNumber(toInteger(r),0,uu),d=coerceToString(o,"...");if(h>=a.length)return a;var T=lu.test(a)?ou:su,S=0;return a.replace(T,(function(t,r){var o=r+t.length;o<=h-d.length&&(S=o)})),a.substr(0,S)+d},slice:function slice(t,r,o){return coerceToString(t).slice(r,o)},substr:function substr(t,r,o){return coerceToString(t).substr(r,o)},substring:function substring(t,r,o){return coerceToString(t).substring(r,o)},truncate:truncate,insert:function insert(t,r,o){var a=coerceToString(t),h=coerceToString(r),d=coerceToNumber(o);return d<0||d>a.length||""===h?a:a.slice(0,d)+h+a.slice(d)},latinise:latinise,pad:function pad(t,r,o){var a=coerceToString(t),h=isNil(r)?0:clipNumber(toInteger(r),0,uu),d=coerceToString(o," ");if(h<=a.length)return a;var T=h-a.length,S=toInteger(T/2),A=T%2;return buildPadding(d,S)+a+buildPadding(d,S+A)},padLeft:padLeft,padRight:padRight,repeat:repeat,replace:function replace(t,r,o){return coerceToString(t).replace(r,o)},replaceAll:function replaceAll(t,r,o){var a=coerceToString(t),h=r;return r instanceof RegExp?r.global||(h=appendFlagToRegExp(r,"g")):h=new RegExp(escapeRegExp(r),"g"),a.replace(h,o)},reverse:function reverse(t){return coerceToString(t).split("").reverse().join("")},reverseGrapheme:function reverseGrapheme(t){for(var r=coerceToString(t),o="",a=(r=r.replace(zl,(function(t,r,o){return reverseGrapheme(o)+r})).replace(Vl,"$2$1")).length;a--;)o+=r.charAt(a);return o},slugify:function slugify(t){var r=coerceToString(t);return""===r?"":kebabCase(latinise(r).replace(Jl,"-"))},splice:function splice(t,r,o,a){var h=coerceToString(t),d=coerceToString(a),T=coerceToNumber(r);T<0?(T=h.length+T)<0&&(T=0):T>h.length&&(T=h.length);var S=coerceToNumber(o,h.length-T);return S<0&&(S=0),h.slice(0,T)+d+h.slice(T+S)},tr:function tr(t,r,o){var a=coerceToString(t),h=void 0,d=void 0;if(isString(r)&&isString(o))h=r.split(""),d=o.split("");else{var T=function extractKeysAndValues(t){var r=Object.keys(t),o=r.sort(sortStringByLength).map((function(r){return t[r]}));return[r,o]}(nilDefault(r,{})),S=_slicedToArray(T,2);h=S[0],d=S[1]}var A=h.length;if(0===A)return a;for(var P="",O=d.length,D=0;D<a.length;D++){for(var L=!1,I=void 0,B=0;B<A&&B<O;B++){var N=h[B];if(a.substr(D,N.length)===N){L=!0,I=d[B],D=D+N.length-1;break}}P+=L?I:a[D]}return P},trim:function trim(t,r){var o=coerceToString(t);if(""===r||""===o)return o;var a=toString(r);return isNil(a)?o.trim():trimRight(trimLeft(o,a),a)},trimLeft:trimLeft,trimRight:trimRight,wordWrap:function wordWrap(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=coerceToString(t),a=determineOptions(r),h=a.width,d=a.newLine,T=a.indent,S=a.cut;if(""===o||h<=0)return T;for(var A=o.length,P=o.substring.bind(o),O=0,D="";A-O>h;)if(" "!==o[O]){var L=o.lastIndexOf(" ",h+O);L>=O?(D+=T+P(O,L)+d,O=L+1):S?(D+=T+P(O,h+O)+d,O+=h):(L=o.indexOf(" ",h+O))>=0?(D+=T+P(O,L)+d,O=L+1):(D+=T+P(O),O=A)}else O++;return O<A&&(D+=T+P(O)),D},endsWith:function endsWith(t,r,o){if(isNil(r))return!1;var a=coerceToString(t),h=coerceToString(r);if(""===h)return!0;o=isNil(o)?a.length:clipNumber(toInteger(o),0,a.length),o-=h.length;var d=a.indexOf(h,o);return-1!==d&&d===o},includes:includes,isAlpha:isAlpha,isAlphaDigit:function isAlphaDigit(t){var r=coerceToString(t);return hu.test(r)},isBlank:function isBlank(t){return 0===coerceToString(t).trim().length},isDigit:function isDigit(t){var r=coerceToString(t);return Zl.test(r)},isEmpty:function isEmpty(t){return 0===coerceToString(t).length},isLowerCase:function isLowerCase(t){var r=coerceToString(t);return isAlpha(r)&&r.toLowerCase()===r},isNumeric:function isNumeric(t){var r="object"!==_typeof(t)||isNil(t)?t:Number(t);return("number"==typeof r||"string"==typeof r)&&!isNaN(r-parseFloat(r))},isString:isString,isUpperCase:function isUpperCase(t){var r=coerceToString(t);return isAlpha(r)&&r.toUpperCase()===r},matches:function matches(t,r,o){var a=coerceToString(t),h=coerceToString(o),d=void 0;if(!(r instanceof RegExp)){if(null===(d=toString(r)))return!1;r=new RegExp(d,h)}return r.test(a)},startsWith:function startsWith(t,r,o){var a=coerceToString(t),h=toString(r);return null!==h&&(""===h||(o=isNil(o)?0:clipNumber(toInteger(o),0,a.length),a.substr(o,h.length)===h))},chars:function chars(t){return coerceToString(t).split("")},codePoints:function codePoints(t){for(var r=coerceToString(t),o=r.length,a=[],h=0,d=void 0;h<o;)d=codePointAt(r,h),a.push(d),h+=d>65535?2:1;return a},graphemes:function graphemes(t){return nilDefault(coerceToString(t).match(Wl),[])},split:function split(t,r,o){return coerceToString(t).split(r,o)},words:words,stripBom:function trim$1(t){var r=coerceToString(t);return""===r?"":"\ufeff"===r[0]?r.substring(1):r},stripTags:function trim$2(t,r,o){if(""===(t=coerceToString(t)))return"";if(!Array.isArray(r)){var a=coerceToString(r);r=""===a?[]:function parseTagList(t){for(var r=[],o=void 0;null!==(o=iu.exec(t));)r.push(o[1]);return r}(a)}for(var h=coerceToString(o),d=t.length,T=r.length>0,S=hasSubstringAtIndex.bind(null,t),A=0,P=0,O="",D="",L=null,I=0;I<d;I++){var B=t[I],N=!1;switch(B){case"<":if(L)break;if(S("< ",I,!1)){N=!0;break}if(0===A){N=!0,A=1;break}if(1===A){P++;break}N=!0;break;case"!":if(1===A&&S("<!",I)){A=2;break}N=!0;break;case"-":if(2===A&&S("!--",I)){A=3;break}N=!0;break;case'"':case"'":1===A&&(L===B?L=null:L||(L=B)),N=!0;break;case"E":case"e":if(2===A&&S("doctype",I)){A=1;break}N=!0;break;case">":if(P>0){P--;break}if(L)break;if(1===A){if(L=null,A=0,T){var G=parseTagName(D+=">");-1!==r.indexOf(G.toLowerCase())?O+=D:O+=h,D=""}else O+=h;break}if(2===A||3===A&&S("--\x3e",I)){L=null,A=0,D="";break}N=!0;break;default:N=!0}if(N)switch(A){case 0:O+=B;break;case 1:T&&(D+=B)}}return O},noConflict:function noConflict(){return this===bu.v&&(bu.v=wu),this},version:"1.4.0"};function ChainWrapper(t,r){this._wrappedValue=t,this._explicitChain=r}ChainWrapper.prototype.value=function(){return this._wrappedValue},ChainWrapper.prototype.valueOf=function(){return this.value()},ChainWrapper.prototype.toJSON=function(){return this.value()},ChainWrapper.prototype.toString=function(){return String(this.value())},ChainWrapper.prototype.chain=function(){return new ChainWrapper(this._wrappedValue,!0)},ChainWrapper.prototype.thru=function(t){return"function"==typeof t?new ChainWrapper(t(this._wrappedValue),this._explicitChain):this},ChainWrapper.prototype._explicitChain=!0,Object.keys(Su).forEach((function(t){ChainWrapper.prototype[t]=function makeFunctionChainable(t){return function(){for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];var h=t.apply(void 0,[this._wrappedValue].concat(o));return this._explicitChain||"string"==typeof h?new ChainWrapper(h,this._explicitChain):h}}(Su[t])}));var Cu=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a])}return t};function Voca(t){return new ChainWrapper(t,!1)}Cu(Voca,Su,{chain:function chain(t){return new ChainWrapper(t,!0)}});var Au=26,Eu="sprite",Mu="image",_u="spine",Pu="text",Ru="zone",ku="particle",Ou=function(){function OperateOnVisual(){_classCallCheck(this,OperateOnVisual)}return _createClass(OperateOnVisual,null,[{key:"GetDisplayedAsAny",value:function GetDisplayedAsAny(t){return Du.At(t).refDisplayed}},{key:"GetDisplayed",value:function GetDisplayed(t){return Du.At(t).refDisplayed}},{key:"GetDisplayedAsImage",value:function GetDisplayedAsImage(t){return Du.At(t).refDisplayed}},{key:"GetDisplayedAsBitmapText",value:function GetDisplayedAsBitmapText(t){return Du.At(t).refDisplayed}},{key:"GetBottomY",value:function GetBottomY(t){return OperateOnVisual.GetDisplayed(t).y+OperateOnVisual.GetHeight(t)/2}},{key:"GetHeight",value:function GetHeight(t){return OperateOnVisual.GetDisplayedAsImage(t).displayHeight}},{key:"GetWidth",value:function GetWidth(t){return OperateOnVisual.GetDisplayedAsImage(t).displayWidth}},{key:"IsImgOrSprite",value:function IsImgOrSprite(t){return Du.At(t).type==Mu||Du.At(t).type==Eu}},{key:"IsSpine",value:function IsSpine(t){return Du.At(t).type==_u}},{key:"SpineListAttachmentsBySlots",value:function SpineListAttachmentsBySlots(t){for(var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=OperateOnVisual.GetDisplayedAsAny(t),a={},h=o.skeletonData.defaultSkin.attachments,d=o.getSlotList(),T=0;T<d.length;T++){var S=d[T],A=h[T];for(var P in A){var O=a[S];O||(O=[],a[S]=O),O.push(P)}}return r&&console.log(t,a),a}},{key:"RandomizeAnimationTime",value:function RandomizeAnimationTime(t){var r=OperateOnVisual.GetDisplayedAsAny(t).state.tracks[0];r.trackTime=Phaser.Math.FloatBetween(0,r.animationEnd)}},{key:"SpineSetAttachment",value:function SpineSetAttachment(t,r,o){OperateOnVisual.GetDisplayedAsAny(t).setAttachment(r,o)}},{key:"SetScale",value:function SetScale(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;1!=r&&(OperateOnVisual.GetDisplayedAsImage(t).scaleX=r,1!=o&&(OperateOnVisual.GetDisplayedAsImage(t).scaleY=r)),1!=o&&(OperateOnVisual.GetDisplayedAsImage(t).scaleY=o)}},{key:"SetTextWithZeroPad",value:function SetTextWithZeroPad(t,r,o){var a=Voca.padLeft(r,o,"0");OperateOnVisual.GetDisplayedAsBitmapText(t).setText(a)}},{key:"SetText",value:function SetText(t,r){OperateOnVisual.GetDisplayedAsBitmapText(t).setText(r)}},{key:"SortParentByProperty",value:function SortParentByProperty(t,r){OperateOnVisual.GetDisplayedAsImage(t).parentContainer.sort(r)}},{key:"ReparentLayer",value:function ReparentLayer(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Du.At(t);N(a,o),a.layerName=r,PostProcessLayerName(a);var h=OperateOnVisual.GetDisplayedAsImage(t),d=Pl.GetOrMakeContainerLayer(a.layerData.layer,a.layerData.anchorX,a.layerData.anchorY,a.layerDepth),T=h.parentContainer,S=d,A=h.x,P=h.y;A-=T.scene.cameras.main.scrollX,P-=T.scene.cameras.main.scrollY,A+=S.scene.cameras.main.scrollX,P+=S.scene.cameras.main.scrollY,A+=T.x,P+=T.y,A-=S.x,P-=S.y,OperateOnVisual.GetDisplayedAsImage(t).x=A,OperateOnVisual.GetDisplayedAsImage(t).y=P,d.add(a.refDisplayed)}},{key:"GetBounds",value:function GetBounds(t){var r=Du.At(t);if(OperateOnVisual.IsSpine(t)){var o=OperateOnVisual.GetDisplayedAsAny(t).getBounds();return r._boundCache.setTo(o.offset.x,o.offset.y,o.size.x,o.size.y),r._boundCache}return OperateOnVisual.GetDisplayedAsImage(t).getBounds(r._boundCache)}},{key:"GetParticles",value:function GetParticles(t){return Du.At(t).refDisplayed}}]),OperateOnVisual}();function PostProcessLayerName(t){if(Voca.countSubstrings(t.layerName,"_")>0){var r=Voca.split(t.layerName,"_");t.layerData.layer=r[0],t.layerData.anchorX=parseInt(Voca.charAt(r[1],0)),t.layerData.anchorY=parseInt(Voca.charAt(r[1],1))}else t.layerData.layer=t.layerName,t.layerData.anchorX=1,t.layerData.anchorY=1}var Du=function(t){_inherits(VisualComponent,t);var r=_createSuper(VisualComponent);function VisualComponent(t){var o;_classCallCheck(this,VisualComponent),(o=r.call(this,null))._boundCache=new Phaser.Geom.Rectangle(0,0,1,1),o.type=null,o.texture=null,o.animations={},o.curAnimation=null,o.curAnimationCfg=null,o.curAnimationFinishCount=0,o.emitterConfig=null,o.layerName="gameplay",o.selfDepth=0,o.layerDepth=0,o.scale=1,o.layerData={layer:"gameplay",x:1,y:1},o.tweens={position:null,scale:null,alpha:null},o.refDisplayed=null;var a=JSON.parse(JSON.stringify(o.constructor.properties));return Object.assign(_assertThisInitialized(o),a,t),o}return _createClass(VisualComponent,[{key:"onAttached",value:function onAttached(t){var r,o=this;_get(_getPrototypeOf(VisualComponent.prototype),"onAttached",this).call(this,t),PostProcessLayerName(this);var a=Pl.GetOrMakeContainerLayer(this.layerData.layer,this.layerData.anchorX,this.layerData.anchorY,this.layerDepth),h=a.scene;if(this.type==Mu)if(Pl.GetPhaserGame().textures.exists(this.texture))r=h.make.image({x:0,y:0,key:this.texture,add:!0},!1);else{var d=this.texture;r=h.make.image({x:0,y:0,key:"megaset",frame:d,add:!0},!1)}else if(this.type==_u)null==this.animations&&(this.animations={Idle:{loop:!0}},this.curAnimation="Idle"),(r=h.make.spine({x:0,y:0,key:this.texture,animationName:this.curAnimation,loop:this.animations[this.curAnimation].loop,add:!1},!1)).state.addListener({complete:function complete(t){t.animation.name,o.curAnimationCfg&&(0==o.curAnimationCfg.loop&&o.curAnimationFinishCount<=0&&o.curAnimationFinishCount++,o.curAnimationCfg.onAnimationLoopedCmd&&(o.curAnimationCfg.onAnimationLoopedCmd.entity=o.entity,gt.runCommandObj(o.curAnimationCfg.onAnimationLoopedCmd)))}});else if(this.type==Pu){var T=this.text;null==T&&(T="000000",this.text=T),(r=h.make.bitmapText({x:0,y:0,font:this.texture,text:T,add:!0},!1)).setOrigin(.5,.5)}else if(this.type==Ru)null==this.width&&(this.width=100),null==this.height&&(this.height=100),r=h.make.zone({x:0,y:0,width:this.width,height:this.height,add:!0});else if(this.type==ku){var S=this.emitterConfig,A=h.add.particles(this.texture);A.createEmitter(S),r=A}r.setScale(this.scale),this.refDisplayed=r,a.add(r),r.selfEntity=t,0!=this.selfDepth&&(r.setDepth(this.selfDepth),Ou.SortParentByProperty(this.entity,"depth"))}},{key:"bringToTop",value:function bringToTop(){Ou.GetDisplayedAsImage(this.entity).parentContainer.bringToTop(Ou.GetDisplayedAsImage(this.entity))}},{key:"setTexture",value:function setTexture(t){if(Ou.IsImgOrSprite(this.entity)){var r=Ou.GetDisplayedAsImage(this.entity);Pl.GetPhaserGame().textures.exists(t)?r.setTexture(t):r.setTexture("megaset",t)}}},{key:"setAnimation",value:function setAnimation(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Ou.IsImgOrSprite(this.entity))this.curAnimation=t,this.setTexture(this.animations[this.curAnimation].texture);else if(Ou.IsSpine(this.entity)){var o=!1;if(this.curAnimation==t&&(o=!0),this.animations[t]&&0==this.animations[t].loop&&this.curAnimationFinishCount>=1&&(o=!1),o)return;this.curAnimation=t,this.curAnimationFinishCount=0;var a={};this.animations[t]&&N(a,this.animations[t]),r&&N(a,r),null==a.loop&&(a.loop=!0),this.curAnimationCfg=a,this.refDisplayed.setAnimation(0,t,a.loop)}else console.warn("IMPLEMENT HERE!")}},{key:"getAnimationName",value:function getAnimationName(){return this.curAnimation}},{key:"getDisplayedAsImage",value:function getDisplayedAsImage(){return this.refDisplayed}},{key:"getDisplayedAsZone",value:function getDisplayedAsZone(){return this.refDisplayed}},{key:"getEmitter",value:function getEmitter(){return this.refDisplayed.emitters.list[0]}},{key:"isDisplayedOnScreen",value:function isDisplayedOnScreen(){var t=this.getDisplayedAsImage(),r=Ou.GetBounds(this.entity),o=t.scene.cameras.main.worldView,a=!1;return 0==Ou.IsSpine(this.entity)?(a=!0,r.y+r.height<o.y&&(a=!1),r.y>o.bottom&&(a=!1),r.x+r.width<o.x&&(a=!1),r.x>o.width&&(a=!1)):(a=!0,r.x=this.refDisplayed.x,r.y=this.refDisplayed.y,r.y+r.height<o.y&&(a=!1),r.y-r.height>o.y+o.height&&(a=!1),r.x+r.width<o.x&&(a=!1),r.x-r.width>o.right&&(a=!1)),a}},{key:"setFlipX",value:function setFlipX(t){var r=this.getDisplayedAsImage();Ou.IsSpine(this.entity)?t?r.scaleX>=0&&(r.scaleX*=-1):r.scaleX<=0&&(r.scaleX*=-1):r.setFlipX(t)}},{key:"setFlipY",value:function setFlipY(t){var r=this.getDisplayedAsImage();Ou.IsSpine(this.entity)?t?r.scaleY>=0&&(r.scaleY*=-1):r.scaleY<=0&&(r.scaleY*=-1):r.setFlipY(t)}},{key:"disposePositionTween",value:function disposePositionTween(){this.tweens.position&&(this.tweens.position.stop(0),this.tweens.position.remove(),this.tweens.position=null)}},{key:"disposeAllTweens",value:function disposeAllTweens(){this.disposePositionTween(),this.tweens.scale&&(this.tweens.scale.stop(0),this.tweens.scale.remove(),this.tweens.scale=null),this.tweens.alpha&&(this.tweens.alpha.stop(0),this.tweens.alpha.remove(),this.tweens.alpha=null)}},{key:"fastTrackPosition",value:function fastTrackPosition(t){var r=this.tweens;if(r.position){var o=r.position;if(o.state!=Au){o.stop(),o.remove();for(var a=0;a<o.data.length;a++){var h=o.data[a];h.target[h.key]=h.end}}r.position=null}}},{key:"tweenPosition",value:function tweenPosition(t){var r=this.tweens;r.position&&(r.position.state!=Au&&r.position.stop(),r.position.remove(),r.position=null),t.targets=Ou.GetDisplayedAsImage(this.entity),r.position=Ou.GetDisplayedAsImage(this.entity).scene.tweens.add(t)}},{key:"isTweeningPosition",value:function isTweeningPosition(){var t=this.tweens;return!!t.position&&t.position.state!=Au}},{key:"isTweeningScale",value:function isTweeningScale(){var t=this.tweens;return!!t.scale&&t.scale.state!=Au}},{key:"tweenScale",value:function tweenScale(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=this.tweens;o.scale&&(o.scale.state!=Au&&o.scale.stop(),o.scale.remove(),o.scale=null),t.targets=Ou.GetDisplayedAsImage(this.entity),null==r?o.scale=Ou.GetDisplayedAsImage(this.entity).scene.tweens.add(t):Ou.GetDisplayedAsImage(this.entity).scene.tweens.add(t)}},{key:"tweenAlpha",value:function tweenAlpha(t){var r=this.tweens;r.alpha&&(r.alpha.state!=Au&&r.alpha.stop(),r.alpha.remove(),r.alpha=null),t.targets=Ou.GetDisplayedAsImage(this.entity),r.alpha=Ou.GetDisplayedAsImage(this.entity).scene.tweens.add(t)}},{key:"getSpineSlotsList",value:function getSpineSlotsList(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this.refDisplayed,o=r.getSlotList();return t&&console.log(this.entity,o),o}},{key:"getSpineAnimationList",value:function getSpineAnimationList(){for(var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=[],o=Ou.GetDisplayedAsAny(this.entity),a=0;a<o.stateData.skeletonData.animations.length;a++){var h=o.stateData.skeletonData.animations[a],d=h.name;r.push(d)}return t&&console.log(this.entity,r),r}},{key:"spineRandomizeSlotsAttachments",value:function spineRandomizeSlotsAttachments(t){Ou.GetDisplayedAsAny(this.entity);for(var r=0;r<t.length;r++){var o=t[r],a=Ou.SpineListAttachmentsBySlots(this.entity,!1)[o],h=Phaser.Utils.Array.GetRandom(a);Ou.SpineSetAttachment(this.entity,o,h)}}},{key:"onDestroyed",value:function onDestroyed(t){this.refDisplayed&&(this.disposeAllTweens(),this.refDisplayed.selfEntity=null,this.refDisplayed.destroy(),this.refDisplayed=null)}}],[{key:"At",value:function At(t){return t.visual}},{key:"properties",get:function get(){return{}}}]),VisualComponent}(G),Lu=function(){function VisualTemplates(){_classCallCheck(this,VisualTemplates)}return _createClass(VisualTemplates,null,[{key:"DefaultImage",value:function DefaultImage(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"_NONE",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o={type:Mu,texture:t};return r&&N(o,r),o}},{key:"DefaultSpine",value:function DefaultSpine(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"_NONE",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o={type:_u,texture:t};return r&&N(o,r),o}},{key:"DefaultText",value:function DefaultText(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"_NONE",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o={type:Pu,texture:t};return r&&N(o,r),o}},{key:"DefaultParticle",value:function DefaultParticle(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"_NONE",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o={type:ku,texture:t};return r&&N(o,r),o}},{key:"DefaultZone",value:function DefaultZone(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r={type:Ru};return t&&N(r,t),r}}]),VisualTemplates}(),Iu=new(_createClass((function InternalDataClass$7(){_classCallCheck(this,InternalDataClass$7),this.query}))),Fu=function(){function ReactiveOffscreenDieAndVisualQuery(){_classCallCheck(this,ReactiveOffscreenDieAndVisualQuery)}return _createClass(ReactiveOffscreenDieAndVisualQuery,null,[{key:"RegisterQuery",value:function RegisterQuery(){Iu.query=ut.GetWorld().createQuery({all:[Du,Nl]}),Iu.query.onEntityAdded((function(t){})),Iu.query.onEntityRemoved((function(t){}))}},{key:"GetReference",value:function GetReference(){return Iu.query}}]),ReactiveOffscreenDieAndVisualQuery}(),Bu=function(){function OffscreenDieRoutine(){_classCallCheck(this,OffscreenDieRoutine)}return _createClass(OffscreenDieRoutine,null,[{key:"OnRegister",value:function OnRegister(){}},{key:"Register",value:function Register(){P.RegisterRoutine(OffscreenDieRoutine)}},{key:"Init",value:function Init(){}},{key:"GetName",value:function GetName(){return"OffscreenDieRoutine"}},{key:"Update",value:function Update(t){for(var r=Fu.GetReference()._cache,o=0;o<r.length;o++){var a=r[o],h=Nl.At(a);h.timeOffScreenMS+=t,h.timeOffScreenMS>=1e4&&(h.wasOnScreen=!0);var d=Du.At(a).isDisplayedOnScreen();0==d&&h.wasOnScreen?Gl.Take(a):1==d&&(h.wasOnScreen=!0)}}}]),OffscreenDieRoutine}(),Nu=function(t){_inherits(PinOthers,t);var r=_createSuper(PinOthers);function PinOthers(t){var o;_classCallCheck(this,PinOthers),(o=r.call(this,null)).pinnedEntitiesList=[],o.killPinnedOnDestroy=!1;var a=JSON.parse(JSON.stringify(o.constructor.properties));return Object.assign(_assertThisInitialized(o),a,t),o}return _createClass(PinOthers,[{key:"addPin",value:function addPin(t,r){var o,a;null!==(o=r.x)&&void 0!==o||(r.x=0),null!==(a=r.y)&&void 0!==a||(r.y=0),this.pinnedEntitiesList.push({ref:t,relation:r}),zu.UpdateEntity(this.entity)}},{key:"onDestroyed",value:function onDestroyed(){if(_get(_getPrototypeOf(PinOthers.prototype),"onDestroyed",this).call(this),this.killPinnedOnDestroy)for(var t=0;t<this.pinnedEntitiesList.length;t++){var r=this.pinnedEntitiesList[t].ref;Gl.Take(r)}}},{key:"unpinAll",value:function unpinAll(){this.pinnedEntitiesList=[]}}],[{key:"AddWithPin",value:function AddWithPin(t,r,o){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t.has(PinOthers)||t.add(PinOthers);var h=PinOthers.At(t);h.addPin(r,o),h.killPinnedOnDestroy=a}},{key:"At",value:function At(t){return t.pinOthers}},{key:"properties",get:function get(){return{}}}]),PinOthers}(G),Gu=function(t){_inherits(TransformComponent,t);var r=_createSuper(TransformComponent);function TransformComponent(t){var o;_classCallCheck(this,TransformComponent),(o=r.call(this,null)).refTarget={x:t.x,y:t.y,angle:t.angle};var a=JSON.parse(JSON.stringify(o.constructor.properties));return Object.assign(_assertThisInitialized(o),a,t),o}return _createClass(TransformComponent,[{key:"setPosition",value:function setPosition(t,r){null!=t&&(this.refTarget.x=t),null!=r&&(this.refTarget.y=r)}},{key:"getTarget",value:function getTarget(){return this.refTarget}}],[{key:"CalculateDeltaBetween",value:function CalculateDeltaBetween(t,r){var o=TransformComponent.At(t),a=TransformComponent.At(r),h={x:0,y:0};return o&&a&&(h.x=a.refTarget.x-o.refTarget.x,h.y=a.refTarget.y-o.refTarget.y),h}},{key:"At",value:function At(t){return t.transform}},{key:"properties",get:function get(){return{}}},{key:"AddToEntity",value:function AddToEntity(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;t.add(TransformComponent,{x:r,y:o,angle:a})}}]),TransformComponent}(G),Yu=new(_createClass((function InternalDataClass$6(){_classCallCheck(this,InternalDataClass$6),this.query}))),Xu=function(){function ReactivePinOthersQuery(){_classCallCheck(this,ReactivePinOthersQuery)}return _createClass(ReactivePinOthersQuery,null,[{key:"RegisterQuery",value:function RegisterQuery(){Yu.query=ut.GetWorld().createQuery({all:[Nu,Gu]}),Yu.query.onEntityAdded((function(t){})),Yu.query.onEntityRemoved((function(t){}))}},{key:"GetReference",value:function GetReference(){return Yu.query}}]),ReactivePinOthersQuery}(),Uu=new(_createClass((function InternalDataClass$5(){_classCallCheck(this,InternalDataClass$5),_defineProperty(this,"active",!0),_defineProperty(this,"queryPinOthers",null)}))),zu=function(){function SynchPinsRoutine(){_classCallCheck(this,SynchPinsRoutine)}return _createClass(SynchPinsRoutine,null,[{key:"Register",value:function Register(){P.RegisterRoutine(SynchPinsRoutine)}},{key:"OnRegister",value:function OnRegister(){}},{key:"Init",value:function Init(){Uu.queryPinOthers=Xu.GetReference()}},{key:"GetName",value:function GetName(){return"SynchPinsRoutine"}},{key:"UpdateEntity",value:function UpdateEntity(t){for(var r=Nu.At(t).pinnedEntitiesList,o=0;o<r.length;o++){var a=r[o].ref,h=r[o].relation;if(!a.isDestroyed){var d=Gu.At(a),T=Gu.At(t);d.refTarget.x=T.refTarget.x+h.x,d.refTarget.y=T.refTarget.y+h.y}}}},{key:"Update",value:function Update(t){for(var r=Uu.queryPinOthers._cache,o=0;o<r.length;o++){var a=r[o];SynchPinsRoutine.UpdateEntity(a)}}}]),SynchPinsRoutine}();function CmdTweenAlphaTo(t,r){var o,a={duration:1e3,delay:0,ease:"Cubic.InOut"};null!==(o=r.alpha)&&void 0!==o||(r.alpha=1),N(a,r),Du.At(t).tweenAlpha(a)}function CmdTweenVisualByDeltaFrom(t,r){Du.At(t).fastTrackPosition(t);var o={x:0,y:0,duration:1e3,delay:0,ease:"Cubic.InOut"};N(o,r);var a=Ou.GetDisplayed(t),h=o.x,d=o.y;o.x=a.x,o.y=a.y,a.x=a.x+h,a.y=a.y+d,Du.At(t).tweenPosition(o)}function CmdTweenVisualByDeltaTo(t,r){Du.At(t).fastTrackPosition();var o=N({x:0,y:0,duration:1e3,delay:0,ease:"Cubic.InOut"},r),a=Ou.GetDisplayed(t);o.x=a.x+o.x,o.y=a.y+o.y,Du.At(t).tweenPosition(o)}var Vu=function(){function GlobalMuteAudioAction(){_classCallCheck(this,GlobalMuteAudioAction)}return _createClass(GlobalMuteAudioAction,null,[{key:"RegisterPackedAsGameCommand",value:function RegisterPackedAsGameCommand(){gt.register(this.Name,new ft((function(t){GlobalMuteAudioAction.Take()})))}},{key:"Take",value:function Take(){Pl.UserMuteAudio()}}]),GlobalMuteAudioAction}();_defineProperty(Vu,"Name","GlobalMuteAudioAction");var Wu=function(){function GlobalUnmuteAudioAction(){_classCallCheck(this,GlobalUnmuteAudioAction)}return _createClass(GlobalUnmuteAudioAction,null,[{key:"RegisterPackedAsGameCommand",value:function RegisterPackedAsGameCommand(){gt.register(this.Name,new ft((function(t){GlobalUnmuteAudioAction.Take()})))}},{key:"Take",value:function Take(){Pl.UserUnmuteAudio()}}]),GlobalUnmuteAudioAction}();_defineProperty(Wu,"Name","GlobalUnmuteAudioAction");var Hu=function(){function SetEntityAnimationAction(){_classCallCheck(this,SetEntityAnimationAction)}return _createClass(SetEntityAnimationAction,null,[{key:"RegisterPackedAsGameCommand",value:function RegisterPackedAsGameCommand(){gt.register(this.Name,new ft((function(t){SetEntityAnimationAction.Take(t.target,t.animationName,t)})))}},{key:"Take",value:function Take(t,r,o){Du.At(t).setAnimation(r,o)}}]),SetEntityAnimationAction}();function CmdTweenScaleTo(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(t&&!t.isDestroyed){var a={scale:1,duration:1e3,delay:0,ease:"Cubic.InOut"};N(a,r),Du.At(t).tweenScale(a,o)}}_defineProperty(Hu,"Name","SetEntityAnimationAction");var ju=function(){function BasicInteractionAction(){_classCallCheck(this,BasicInteractionAction)}return _createClass(BasicInteractionAction,null,[{key:"RegisterPackedAsGameCommand",value:function RegisterPackedAsGameCommand(){gt.register(this.Name,new ft((function(t){BasicInteractionAction.Take(t.entity,t.reason)})))}},{key:"Take",value:function Take(t,r){"over"==r?CmdTweenScaleTo(t,{scale:1.1,duration:100}):"out"==r||"up"==r?CmdTweenScaleTo(t,{scale:1,duration:100}):"down"==r&&CmdTweenScaleTo(t,{scale:.9,duration:100})}}]),BasicInteractionAction}();_defineProperty(ju,"Name","BasicInteractionAction");var qu=function(){function ButtonInteractionAction(){_classCallCheck(this,ButtonInteractionAction)}return _createClass(ButtonInteractionAction,null,[{key:"RegisterPackedAsGameCommand",value:function RegisterPackedAsGameCommand(){gt.register(this.Name,new ft((function(t){ButtonInteractionAction.Take(t.entity,t.reason)})))}},{key:"Take",value:function Take(t,r){"over"==r?CmdTweenScaleTo(t,{scale:1.1,duration:100}):"out"==r?CmdTweenScaleTo(t,{scale:1,duration:100}):"up"==r?(Pl.PlayAudioFile("tap"),CmdTweenScaleTo(t,{scale:1,duration:100})):"down"==r&&CmdTweenScaleTo(t,{scale:.9,duration:100})}}]),ButtonInteractionAction}();_defineProperty(qu,"Name","ButtonInteractionAction");var Zu=function(){function NoInteractionAction(){_classCallCheck(this,NoInteractionAction)}return _createClass(NoInteractionAction,null,[{key:"RegisterPackedAsGameCommand",value:function RegisterPackedAsGameCommand(){gt.register(this.Name,new ft((function(t){NoInteractionAction.Take(t.entity,t.reason)})))}},{key:"Take",value:function Take(t,r){}}]),NoInteractionAction}();_defineProperty(Zu,"Name","NoInteractionAction");var Ku=function(){function RepositionEntityByDeltaAction(){_classCallCheck(this,RepositionEntityByDeltaAction)}return _createClass(RepositionEntityByDeltaAction,null,[{key:"RegisterPackedAsGameCommand",value:function RegisterPackedAsGameCommand(){gt.register(this.Name,new ft((function(t){RepositionEntityByDeltaAction.Take(t.entity,t.deltaX,t.deltaY)})))}},{key:"Take",value:function Take(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null==r&&(r=0),null==o&&(o=0);var a=Gu.At(t);a.refTarget.x+=r,a.refTarget.y+=o}}]),RepositionEntityByDeltaAction}();_defineProperty(Ku,"Name","RepositionEntityByDeltaAction");var Ju=function(){function RepositionEntityBySizeAction(){_classCallCheck(this,RepositionEntityBySizeAction)}return _createClass(RepositionEntityBySizeAction,null,[{key:"RegisterPackedAsGameCommand",value:function RegisterPackedAsGameCommand(){gt.register(this.Name,new ft((function(t){RepositionEntityBySizeAction.Take(t.entity,t.multX,t.multY)})))}},{key:"Take",value:function Take(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null==r&&(r=0),null==o&&(o=0);var a=Gu.At(t),h=Ou.GetDisplayed(t);a.refTarget.x+=h.displayWidth*r,a.refTarget.y+=h.displayHeight*o}}]),RepositionEntityBySizeAction}();_defineProperty(Ju,"Name","RepositionEntityToAction");var Qu=function(){function RepositionEntityToEntityAction(){_classCallCheck(this,RepositionEntityToEntityAction)}return _createClass(RepositionEntityToEntityAction,null,[{key:"RegisterPackedAsGameCommand",value:function RegisterPackedAsGameCommand(){gt.register(this.Name,new ft((function(t){console.log("IMPLEMENT: RepositionEntityToEntityAction as GameCommand")})))}},{key:"Take",value:function Take(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0},a=Gu.At(t),h=Gu.At(r);a.refTarget.x=h.refTarget.x+o.x,a.refTarget.y=h.refTarget.y+o.y}}]),RepositionEntityToEntityAction}();_defineProperty(Qu,"Name","RepositionEntityToEntityAction");var $u=function(t){_inherits(ToggleComponent,t);var r=_createSuper(ToggleComponent);function ToggleComponent(t){var o;_classCallCheck(this,ToggleComponent),(o=r.call(this,null)).curStateName=null,o.states=null;var a=JSON.parse(JSON.stringify(o.constructor.properties));return Object.assign(_assertThisInitialized(o),a,t),o}return _createClass(ToggleComponent,[{key:"synchAnimationToState",value:function synchAnimationToState(){Hu.Take(this.entity,this.curStateName)}},{key:"setToggleStateAsNext",value:function setToggleStateAsNext(){this.curStateName=this.states[this.curStateName].nextState,this.synchAnimationToState()}},{key:"runCommandsAtCurrentState",value:function runCommandsAtCurrentState(){gt.runCommandObj(N({entity:this.entity},this.states[this.curStateName].command))}},{key:"setToggleState",value:function setToggleState(t){this.curStateName=t,this.synchAnimationToState()}}],[{key:"At",value:function At(t){return console.assert(null!=t,t),console.assert(null!=t.toggle,t),t.toggle}},{key:"properties",get:function get(){return{}}},{key:"AddWithToggleStatesDictionary",value:function AddWithToggleStatesDictionary(t,r,o){var a={curStateName:r,states:o};t.add(ToggleComponent,a)}}]),ToggleComponent}(G),tc=function(){function RunEntityToggleLogic(){_classCallCheck(this,RunEntityToggleLogic)}return _createClass(RunEntityToggleLogic,null,[{key:"RegisterPackedAsGameCommand",value:function RegisterPackedAsGameCommand(){gt.register(this.Name,new ft((function(t){RunEntityToggleLogic.Take(t.entity)})))}},{key:"Take",value:function Take(t){var r=$u.At(t);r.runCommandsAtCurrentState(),r.setToggleStateAsNext()}}]),RunEntityToggleLogic}();_defineProperty(tc,"Name","RunEntityToggleLogic");var ec=function BuildCommand(t,r){return N({key:t},r)},ic=function(t){_inherits(Interactive,t);var r=_createSuper(Interactive);function Interactive(t){var o;_classCallCheck(this,Interactive),(o=r.call(this,null)).isDisabled=!1,o.canDrag=!1,o.canSwipe=!1,o.pressed=!1,o.dict={},o.onSwipeCmdName=null,o.swipeCfg=null,o.runtime={rexSwipe:null},o.refHitArea=null;var a=JSON.parse(JSON.stringify(o.constructor.properties));return Object.assign(_assertThisInitialized(o),a,t),o}return _createClass(Interactive,[{key:"setEnabled",value:function setEnabled(t){this.isDisabled=!t}},{key:"resizeInputAreaAsRectangle",value:function resizeInputAreaAsRectangle(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.refHitArea.setSize(t,r),null!=o&&(this.refHitArea.x=o),null!=a&&(this.refHitArea.y=a)}},{key:"debugInput",value:function debugInput(){var t=Du.At(this.entity).getDisplayedAsImage();t.scene.input.enableDebug(t)}}],[{key:"At",value:function At(t){return t.interactive}},{key:"AddPlain",value:function AddPlain(t,r,o,a,h,d){if(t.has(Interactive))console.warn("CANT ADD COMPONENT SECOND TIME");else{var T={};o&&(T.up=ec(o)),r&&(T.down=ec(r)),a&&(T.over=ec(a)),h&&(T.move=ec(h)),d&&(T.always=ec(d)),t.add(Interactive,GetInitialData(T))}}},{key:"AddWithCmdOnUpAndBtnInteraction",value:function AddWithCmdOnUpAndBtnInteraction(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(t.has(Interactive))console.warn("CANT ADD COMPONENT SECOND TIME");else{var a={};null==o&&(o=qu.Name),o&&(a.always=ec(o)),a.up=ec(r),t.add(Interactive,GetInitialData(a))}}},{key:"AddWithDrag",value:function AddWithDrag(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(t.has(Interactive))console.warn("CANT ADD COMPONENT SECOND TIME");else{var h={};null==a&&(a=qu.Name),a&&(h.always=ec(a)),r&&(h.down=ec(r)),o&&(h.up=ec(o)),t.add(Interactive,GetInitialData(h,{canDrag:!0}))}}},{key:"AddWithSwipe",value:function AddWithSwipe(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(t.has(Interactive))console.warn("CANT ADD COMPONENT SECOND TIME");else{var h={};null==a&&(a=ju.Name),a&&(h.always=ec(a)),t.add(Interactive,GetInitialData(h,{canSwipe:!0,onSwipeCmdName:r,swipeCfg:o}))}}},{key:"properties",get:function get(){return{}}}]),Interactive}(G);function GetInitialData(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o={dict:t};return r&&N(o,r),o}var nc=new(_createClass((function InternalDataClass$4(){_classCallCheck(this,InternalDataClass$4),this.groups={},this.colliders={}}))),rc=function(){function PhysicsModel(){_classCallCheck(this,PhysicsModel)}return _createClass(PhysicsModel,null,[{key:"GetGroup",value:function GetGroup(t){return nc.groups[t]?nc.groups[t]:(console.warn("NO GROUP: ",t),null)}},{key:"PhysicsAddCollider",value:function PhysicsAddCollider(t,r,o,a){if(!nc.colliders[t]){var h=PhysicsModel.GetGroup(r),d=PhysicsModel.GetGroup(o),T=Pl.GetGameplayScene().physics.add.collider(h,d,a,null);nc.colliders[t]={group1:r,group2:o,callbackFn:a,collider:T}}}},{key:"PhysicsAddOverlap",value:function PhysicsAddOverlap(t,r,o,a){if(!nc.colliders[t]){var h=PhysicsModel.GetGroup(r),d=PhysicsModel.GetGroup(o),T=Pl.GetGameplayScene().physics.add.overlap(h,d,a,null);nc.colliders[t]={group1:r,group2:o,callbackFn:a,collider:T}}}},{key:"OverlapGroupsByNames",value:function OverlapGroupsByNames(t,r,o,a,h){console.assert(o);var d=PhysicsModel.GetGroup(t),T=PhysicsModel.GetGroup(r);d&&T&&Pl.GetGameplayScene().physics.world.overlap(d,T,o,a,h)}},{key:"OverlapObjects",value:function OverlapObjects(t,r,o,a,h){return Pl.GetGameplayScene().physics.world.overlap(t,r,o,a,h)}}]),PhysicsModel}();_defineProperty(rc,"AddGroup",(function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!nc.groups[t])return nc.groups[t]=r?Pl.GetGameplayScene().physics.add.staticGroup():Pl.GetGameplayScene().physics.add.group(),nc.groups[t]}));var sc=function(){function OperateOnPhysics(){_classCallCheck(this,OperateOnPhysics)}return _createClass(OperateOnPhysics,null,[{key:"GetBodyAsDynamic",value:function GetBodyAsDynamic(t){return t.physics.body}},{key:"GetBodyAsStatic",value:function GetBodyAsStatic(t){return t.physics.body}},{key:"PutIntoPhysicsGroups",value:function PutIntoPhysicsGroups(t){for(var r=oc.At(t),o=0;o<r.groupsList.length;o++){var a=r.groupsList[o],h=rc.GetGroup(a);h||console.warn("NO GROUP: ",a),h.add(t.physics.body.gameObject)}}},{key:"DisableBody",value:function DisableBody(t){t.physics.body.stop(),t.physics.body.enable=!1,t.physics.body.gameObject.active=!1}}]),OperateOnPhysics}(),oc=function(t){_inherits(PhysicsComponent,t);var r=_createSuper(PhysicsComponent);function PhysicsComponent(t){var o;_classCallCheck(this,PhysicsComponent),(o=r.call(this,null)).isStatic=!1,o.isCircle=!1,o.groupsList=[],o.offsetX=0,o.offsetY=0,o.circleRadius=0,o.bulletData=null,o.body=null,o.bullet=null;var a=JSON.parse(JSON.stringify(o.constructor.properties));return Object.assign(_assertThisInitialized(o),a,t),o}return _createClass(PhysicsComponent,[{key:"getBodyAsDynamic",value:function getBodyAsDynamic(){return this.body}},{key:"setSizeScaled",value:function setSizeScaled(t){var r=this.getBodyAsDynamic().sourceWidth*t,o=this.getBodyAsDynamic().sourceHeight*t;this.getBodyAsDynamic().setSize(r,o,!0)}},{key:"resizeTo",value:function resizeTo(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.isCircle?console.warn("IMPLEMENT!"):(this.body.setSize(t,r),null!=o&&(this.offsetX=o),null!=a&&(this.offsetY=a),this.body.setOffset(this.offsetX,this.offsetY))}},{key:"resizeDeltaOwnSize",value:function resizeDeltaOwnSize(t,r,o,a){this.isCircle?console.warn("IMPLEMENT!"):this.resizeTo(this.body.width+t,this.body.height+r,o,a)}}],[{key:"properties",get:function get(){return{}}},{key:"At",value:function At(t){return t.physics}},{key:"AddToEntity",value:function AddToEntity(t,r){t.add(PhysicsComponent,r)}},{key:"AddToEntityWithBulletBehaviour",value:function AddToEntityWithBulletBehaviour(t,r){var o={bulletData:{speed:100,rotateToTarget:!0,enable:!0}};N(o,r),t.has(PhysicsComponent)||PhysicsComponent.AddToEntity(t,o)}},{key:"BootBody",value:function BootBody(t){var r=PhysicsComponent.At(t);if(r.isCircle){var o=r.body.halfWidth-r.circleRadius,a=r.body.halfWidth-r.circleRadius;r.body.setCircle(r.circleRadius),r.body.setOffset(o+r.offsetX,a+r.offsetY)}else r.body.setSize(r.body.width,r.body.height),r.body.setOffset(r.offsetX,r.offsetY);if(r.bulletData){var h=Pl.GetGameplayScene().plugins.get("rexBullet");r.bullet=h.add(r.body.gameObject,r.bulletData)}sc.PutIntoPhysicsGroups(t)}}]),PhysicsComponent}(G),ac=new(_createClass((function InternalDataClass$3(){_classCallCheck(this,InternalDataClass$3),this.query}))),hc=function(){function ReactiveInteractiveAndVisualQuery(){_classCallCheck(this,ReactiveInteractiveAndVisualQuery)}return _createClass(ReactiveInteractiveAndVisualQuery,null,[{key:"RegisterQuery",value:function RegisterQuery(){ac.query=ut.GetWorld().createQuery({all:[ic,Du]}),ac.query.onEntityAdded((function(t){var r=Du.At(t),o=ic.At(t);r.getDisplayedAsImage().setInteractive(),o.refHitArea=r.refDisplayed.input.hitArea})),ac.query.onEntityRemoved((function(t){}))}},{key:"GetReference",value:function GetReference(){return ac.query}}]),ReactiveInteractiveAndVisualQuery}(),lc=new(_createClass((function InternalDataClass$2(){_classCallCheck(this,InternalDataClass$2),this.query}))),uc=function(){function ReactivePhysicsAndVisualQuery(){_classCallCheck(this,ReactivePhysicsAndVisualQuery)}return _createClass(ReactivePhysicsAndVisualQuery,null,[{key:"RegisterQuery",value:function RegisterQuery(){lc.query=ut.GetWorld().createQuery({all:[Du,oc]}),lc.query.onEntityAdded((function(t){var r=oc.At(t),o=Du.At(t).getDisplayedAsImage();o.body?console.warn("IMPLEMENT! ReactivePhysicsAndVisualQuery:onEntityAdded"):(r.body=o.scene.physics.add.existing(o,r.isStatic).body,oc.BootBody(t))})),lc.query.onEntityRemoved((function(t){}))}},{key:"GetReference",value:function GetReference(){return lc.query}}]),ReactivePhysicsAndVisualQuery}(),cc=new(_createClass((function InternalDataClass$1(){_classCallCheck(this,InternalDataClass$1),this.query}))),dc=function(){function ReactiveTransformAndVisualQuery(){_classCallCheck(this,ReactiveTransformAndVisualQuery)}return _createClass(ReactiveTransformAndVisualQuery,null,[{key:"RegisterQuery",value:function RegisterQuery(){cc.query=ut.GetWorld().createQuery({all:[Du,Gu]}),cc.query.onEntityAdded((function(t){var r=Gu.At(t);Ou.GetDisplayed(t).x=r.refTarget.x,Ou.GetDisplayed(t).y=r.refTarget.y,Ou.GetDisplayed(t).angle=r.refTarget.angle,r.refTarget=Ou.GetDisplayed(t)})),cc.query.onEntityRemoved((function(t){}))}},{key:"GetReference",value:function GetReference(){return cc.query}}]),ReactiveTransformAndVisualQuery}(),fc=function(t){_inherits(ParticleTrailFollowerComponent,t);var r=_createSuper(ParticleTrailFollowerComponent);function ParticleTrailFollowerComponent(t){var o;_classCallCheck(this,ParticleTrailFollowerComponent),(o=r.call(this,null)).targetGuid=null,o.angleMinOffset=0,o.angleMaxOffset=0,o.offsetX=0,o.offsetY=0;var a=JSON.parse(JSON.stringify(o.constructor.properties));return Object.assign(_assertThisInitialized(o),a,t),o}return _createClass(ParticleTrailFollowerComponent,null,[{key:"GetName",value:function GetName(){return"particleTrailFollower"}},{key:"At",value:function At(t){return t.particleTrailFollower}},{key:"properties",get:function get(){return{}}},{key:"AddToEntity",value:function AddToEntity(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a={targetGuid:r};N(a,o),t.add(ParticleTrailFollowerComponent,a)}}]),ParticleTrailFollowerComponent}(G),pc=new(_createClass((function InternalDataClass(){_classCallCheck(this,InternalDataClass),this.query}))),gc=function(){function ReactiveParticleTrailAndTransformAndVisualQuery(){_classCallCheck(this,ReactiveParticleTrailAndTransformAndVisualQuery)}return _createClass(ReactiveParticleTrailAndTransformAndVisualQuery,null,[{key:"RegisterQuery",value:function RegisterQuery(){pc.query=ut.GetWorld().createQuery({all:[Gu,Du,fc]})}},{key:"GetReference",value:function GetReference(){return console.assert(pc.query),pc.query}}]),ReactiveParticleTrailAndTransformAndVisualQuery}();var vc=function(){function RepositionEntityToAction(){_classCallCheck(this,RepositionEntityToAction)}return _createClass(RepositionEntityToAction,null,[{key:"RegisterPackedAsGameCommand",value:function RegisterPackedAsGameCommand(){gt.register(this.Name,new ft((function(t){RepositionEntityToAction.Take(t.entity,t.x,t.y)})))}},{key:"Take",value:function Take(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Gu.At(t).setPosition(r,o)}}]),RepositionEntityToAction}();_defineProperty(vc,"Name","RepositionEntityToAction");var mc=new(_createClass((function Data(){_classCallCheck(this,Data),this.trackedTaps={},this.trackedInputs=[{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null}],this.keys={},this.sinceButtonPress=1e4,this.swipe=null,this.swipeCallback=null,this.keyCallbacks={}}))),yc=function(){function InputRoutine(){_classCallCheck(this,InputRoutine)}return _createClass(InputRoutine,null,[{key:"Register",value:function Register(){P.RegisterRoutine(InputRoutine)}},{key:"OnRegister",value:function OnRegister(){hc.GetReference().onEntityAdded((function(t){!function _AddActorInteractivity(t){var r=Ou.GetDisplayedAsImage(t),o=ic.At(t);if(o.canSwipe){var a=Pl.GetGameplayScene(),h={threshold:35,velocityThreshold:10,workaroundEnabled:1,workaroundMaxTime:1e3};N(h,o.swipeCfg),a.rexGestures.add.swipe(r,h).on("swipe",(function(t,r,o){var a=ic.At(r.selfEntity);gt.runCommand(a.onSwipeCmdName,{entity:r.selfEntity,swipe:t})}))}r.on("pointerup",(function(r,a,h,d){Pl.IsRotationDisplayed()||o.pressed&&wt.getData(Q.At(t).gameStateName).isRunning()&&(_RemoveButtonTracking(t),_PerformInteraction(t,"always","up"),o.isDisabled||_PerformInteraction(t,"up","up"))})),r.on("pointerdown",(function(r,a,h,d){Pl.IsRotationDisplayed()||wt.getData(Q.At(t).gameStateName).isRunning()&&(o.isDisabled||(_PerformInteraction(t,"always","down"),_PerformInteraction(t,"down","down"),o.pressed=!0,function _AddButtonTracking(t,r){mc.trackedInputs[r].obj?console.warn("ALREADY TRACKING BUTTON AT ID: ",r):mc.trackedInputs[r].obj=t}(t,r.id)))})),r.on("pointerover",(function(r,a,h,d){Pl.IsRotationDisplayed()||wt.getData(Q.At(t).gameStateName).isRunning()&&(o.isDisabled||o.pressed||(_PerformInteraction(t,"always","over"),_PerformInteraction(t,"over","over")))})),r.on("pointermove",(function(r,a,h,d){Pl.IsRotationDisplayed()||wt.getData(Q.At(t).gameStateName).isRunning()&&(o.isDisabled||o.pressed&&(_PerformInteraction(t,"always","move"),_PerformInteraction(t,"move","move")))})),r.on("pointerout",(function(r,a,h,d){Pl.IsRotationDisplayed()||wt.getData(Q.At(t).gameStateName).isRunning()&&(o.pressed||(_PerformInteraction(t,"always","out"),_PerformInteraction(t,"out","out")))}))}(t)})),hc.GetReference().onEntityRemoved((function(t){_RemoveButtonTracking(t),Ou.GetDisplayedAsImage(t).removeInteractive()}))}},{key:"Init",value:function Init(){var t=Pl.GetGameplayScene();t.input.addPointer(10),mc.trackedInputs[0].input=t.input.mousePointer,mc.trackedInputs[1].input=t.input.pointer1,mc.trackedInputs[2].input=t.input.pointer2,mc.trackedInputs[3].input=t.input.pointer3,mc.trackedInputs[4].input=t.input.pointer4,mc.trackedInputs[5].input=t.input.pointer5,mc.trackedInputs[6].input=t.input.pointer6,mc.trackedInputs[7].input=t.input.pointer7,mc.trackedInputs[8].input=t.input.pointer8,mc.trackedInputs[9].input=t.input.pointer9,mc.trackedInputs[10].input=t.input.pointer10,mc.keys.w=t.input.keyboard.addKey("w"),mc.keys.s=t.input.keyboard.addKey("s"),mc.keys.a=t.input.keyboard.addKey("a"),mc.keys.d=t.input.keyboard.addKey("d"),mc.keys[" "]=t.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE),mc.keys["/"]=t.input.keyboard.addKey("/"),mc.keys.right=t.input.keyboard.addKey("right"),mc.keys.left=t.input.keyboard.addKey("left"),mc.keys.up=t.input.keyboard.addKey("up"),mc.keys.down=t.input.keyboard.addKey("down"),t.input.keyboard.on("keydown",(function(t){mc.keyCallbacks[t.key]&&mc.keyCallbacks[t.key](t)})),mc.swipe=t.rexGestures.add.swipe({threshold:35,velocityThreshold:10,workaroundEnabled:1,workaroundMaxTime:1e9}),mc.swipe.on("swipe",(function(t){mc.swipeCallback&&mc.swipeCallback(t)}))}},{key:"GetName",value:function GetName(){return"InputRoutine"}},{key:"Update",value:function Update(t){Pl.GetGameplayScene();for(var r=0;r<mc.trackedInputs.length;r++){var o=mc.trackedInputs[r].input;if(mc.trackedInputs[r].obj)if(ic.At(mc.trackedInputs[r].obj).canDrag){var a=Ou.GetDisplayedAsImage(mc.trackedInputs[r].obj);vc.Take(mc.trackedInputs[r].obj,o.x+a.scene.cameras.main.scrollX,o.y+a.scene.cameras.main.scrollY)}o&&!o.isDown&&mc.trackedInputs[r].obj&&_RemoveButtonTracking(mc.trackedInputs[r].obj)}InputRoutine.GetPointerIfNotPressingButton()?(mc.sinceButtonPress+=t,mc.sinceButtonPress>=1e4&&(mc.sinceButtonPress=1e4)):mc.sinceButtonPress=0}},{key:"GetSinceButtonPress",value:function GetSinceButtonPress(){return mc.sinceButtonPress}},{key:"SetSwipeCallback",value:function SetSwipeCallback(t){mc.swipeCallback=t}},{key:"AddKeyDown",value:function AddKeyDown(t,r){if(Array.isArray(t))for(var o=0;o<t.length;o++){var a=t[o];mc.keyCallbacks[a]=r}else mc.keyCallbacks[t]=r}},{key:"HasTrackedButton",value:function HasTrackedButton(){for(var t=0;t<mc.trackedInputs.length;t++)if(null!=mc.trackedInputs[t].obj)return!0;return!1}},{key:"GetPointerIfNotPressingButton",value:function GetPointerIfNotPressingButton(){return 0==InputRoutine.HasTrackedButton()?Pl.GetGameplayScene().input.activePointer:null}},{key:"GetPointer",value:function GetPointer(){return Pl.GetGameplayScene().input.activePointer}},{key:"IsKeyFromListDown",value:function IsKeyFromListDown(t){for(var r=0;r<t.length;r++){if(mc.keys[t[r]].isDown)return!0}return!1}}]),InputRoutine}();function _PerformInteraction(t,r,o){var a=ic.At(t);if(a.dict[r]&&a.dict[r].key){var h=a.dict[r],d=N({entity:t,reason:o},h);gt.runCommand(h.key,d)}}function _RemoveButtonTracking(t){var r=ic.At(t);r.pressed&&(_PerformInteraction(t,"always","out"),function _NullifyTrackedButton(t){for(var r=0;r<mc.trackedInputs.length;r++)if(mc.trackedInputs[r].obj==t)return void(mc.trackedInputs[r].obj=null)}(t)),r.pressed=!1}var xc=new ct,Tc=function(){function LogicLoopRoutine(){_classCallCheck(this,LogicLoopRoutine)}return _createClass(LogicLoopRoutine,null,[{key:"Init",value:function Init(){}},{key:"OnRegister",value:function OnRegister(){}},{key:"Register",value:function Register(){P.RegisterRoutine(LogicLoopRoutine)}},{key:"GetName",value:function GetName(){return"LogicLoopRoutine"}},{key:"Update",value:function Update(t){for(var r=xc.getKeyList(),o=0;o<r.length;o++){var a=r[o];xc.getData(a).f(t)}}},{key:"SetUpdateFunc",value:function SetUpdateFunc(t,r){xc.register(t,{f:r},!0)}},{key:"CleanFunction",value:function CleanFunction(t){xc.register(t,{f:function f(){}},!0)}}]),LogicLoopRoutine}(),bc=_createClass((function GameSession(){_classCallCheck(this,GameSession),this.seenTutorial=!1,this.initialized=!1,this.tutState=0,this.sawTutorialOnFirstCatch=!1})),wc=_createClass((function GameSubsession(){_classCallCheck(this,GameSubsession),this.score=0,this.latestScore=0})),Sc=_createClass((function InternalGameLevelData(){_classCallCheck(this,InternalGameLevelData),this.levelLoopEnded=!1,this.levelLoopStarted=!1,this.activeLevelTime=0,this.shotHaczyk=!1,this.isHaczykRetreating=!1,this.haczykStartY=0,this.haczykStartX=0,this.referenceCaughtFish=null,this.wasPointerUpToAllowRetreat=!1,this.keepReelingFishFor=0,this.offsetCaughtFishX=0,this.offsetCaughtFishY=30,this.offsetWhereFishIsCaught=70,this.waitingForUntap=!1,this.splashAtY=0,this.didSplash=!1,this.tryToSplash=!1,this.temp_spawn=1e6,this.lives=3,this.playerDead=!1,this.score=0,this.playedFor=0,this.sinceSlowed=0,this.sinceGigaspawn=0,this.firstReturn=!0,this.fishSpeedMultiplier=1,this.fishSpawner=null,this.scriptTarget={}})),Cc=new(function(){function InternalGlobals(){_classCallCheck(this,InternalGlobals),this.session=new bc,this.subsession=new wc,this.currentLevelData=new Sc}return _createClass(InternalGlobals,[{key:"ResetLevelData",value:function ResetLevelData(){this.currentLevelData=new Sc}},{key:"ResetSubsession",value:function ResetSubsession(){this.subsession=new wc}}]),InternalGlobals}()),Ac=function(){function MathUtil(){_classCallCheck(this,MathUtil)}return _createClass(MathUtil,null,[{key:"GetRotatedCoordinate",value:function GetRotatedCoordinate(t,r,o){return Phaser.Math.Rotate({x:t,y:r},Phaser.Math.DegToRad(o))}},{key:"AddRotatedByAnglePositionsToObject",value:function AddRotatedByAnglePositionsToObject(t,r,o,a){var h=MathUtil.GetRotatedCoordinate(r,o,a);t.x+=h.x,t.y+=h.y}},{key:"GetAngleBetweenInDegrees",value:function GetAngleBetweenInDegrees(t,r,o,a){return Phaser.Math.RadToDeg(Phaser.Math.Angle.Between(t,r,o,a))}},{key:"BetweenPadded",value:function BetweenPadded(t,r,o){var a=Phaser.Math.Between(t,r);return Voca.padLeft(a,o,"0")}}]),MathUtil}(),Ec=new(function(){function Internal(){_classCallCheck(this,Internal),this.fishSpeedMultiplier=1}return _createClass(Internal,[{key:"Get",value:function Get(){return this}}]),Internal}()),Mc=_createClass((function CommonGamePrefabs(){var t=this;_classCallCheck(this,CommonGamePrefabs),this.EmptyObject=function(t){return ut.CreateEntity(t)},this.GuiImageObject=function(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"gui_22",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,h=ut.CreateEntity(t);return Gu.AddToEntity(h),h.add(Du,Lu.DefaultImage(r,{layerName:o})),"bottom"==a&&vt.AddWithData(h,{postmake:ec("TweenPositionFromBottom"),exit:ec("TweenPositionToBottom")}),"top"==a&&vt.AddWithData(h,{postmake:ec("TweenPositionFromTop"),exit:ec("TweenPositionToTop")}),h},this.GuiSpineObject=function(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Idle",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"gui_22",T=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{layerDepth:0};console.assert(null!=t);var S=ut.CreateEntity(t);Gu.AddToEntity(S,a,h);var A={curAnimation:o,animations:_defineProperty({},o,{loop:!0}),layerName:d};N(A,T);var P=Lu.DefaultSpine(r,A);return S.add(Du,P),S},this.GuiButtonObject=function(t,r,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"gui_22",h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,d=ut.CreateEntity(t);return Gu.AddToEntity(d),d.add(Du,Lu.DefaultImage(r,{layerName:a})),"bottom"==h&&vt.AddWithData(d,{postmake:ec("TweenPositionFromBottom"),exit:ec("TweenPositionToBottom")}),ic.AddWithCmdOnUpAndBtnInteraction(d,o),d},this.GuiFont=function(t,r,o){var a=ut.CreateEntity(t);return Gu.AddToEntity(a),a.add(Du,Lu.DefaultText(r,{layerName:o})),a},this.GameplayImageObject=function(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},d=ut.CreateEntity(t);return Gu.AddToEntity(d,o,a),d.add(Du,Lu.DefaultImage(r,h)),d},this.GameplayZoneObject=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},h=ut.CreateEntity(t);return Gu.AddToEntity(h,r,o),h.add(Du,Lu.DefaultZone(a)),h},this.GameplaySpineObject=function(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Idle",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{layerDepth:0};console.assert(null!=t);var T=ut.CreateEntity(t);Gu.AddToEntity(T,a,h);var S={curAnimation:o,animations:_defineProperty({},o,{loop:!0})};return N(S,d),T.add(Du,Lu.DefaultSpine(r,S)),T},this.GameplaySpineObjectDieAfterAnim=function(r,o){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Idle",h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,T=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{layerDepth:0},S={curAnimation:a,layerDepth:0,animations:_defineProperty({},a,{loop:!1,onAnimationLoopedCmd:ec(Gl.Name,{})})};return N(S,T),t.GameplaySpineObject(r,o,a,h,d,S)},this.GameplayTextObject=function(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,d=ut.CreateEntity(t);return Gu.AddToEntity(d,o,a),d.add(Du,Lu.DefaultText(r,h)),d},this.GameplayParticleObject=function(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},d=ut.CreateEntity(t);return Gu.AddToEntity(d,o,a),d.add(Du,Lu.DefaultParticle(r,h)),d}})),_c=function(t){_inherits(CasualGameSharedPrefabs,t);var r=_createSuper(CasualGameSharedPrefabs);function CasualGameSharedPrefabs(){var t;return _classCallCheck(this,CasualGameSharedPrefabs),(t=r.call(this)).Background=function(t){var r=ut.CreateEntity(t);return Gu.AddToEntity(r),r.add(Du,Lu.DefaultImage("BG")),r},t.CoverTitle=function(t){var r=ut.CreateEntity(t);return Gu.AddToEntity(r),r.add(Du,Lu.DefaultImage("GameTitle",{layerName:"gui_22"})),vt.AddWithData(r,{postmake:ec("TweenCoverTitle"),exit:ec("TweenPositionToTop")}),r},t.CoverLogo=function(r,o){var a=t.GuiImageObject(r,"BM_Logo",o),h="TweenPositionFromTop",d="TweenPositionToTop";return"gui_33"==o&&(h="TweenPositionFromBottom",d="TweenPositionToBottom"),vt.AddWithData(a,{postmake:ec(h,{delay:200}),exit:ec(d)}),a},t.ScorePanel=function(r,o){var a=t.GuiImageObject(r,"ScorePanel",o);return vt.AddWithData(a,{postmake:ec("TweenPositionFromTop",{delay:100}),exit:ec("TweenPositionToTop")}),a},t.CoverScoreFont=function(t){var r=ut.CreateEntity(t);return et.At(r).setAlias("AliasCoverScoreText"),Gu.AddToEntity(r),r.add(Du,Lu.DefaultText("scorefont",{layerName:"gui_11"})),r},t.CoverHighscoreIcon=function(t){var r=ut.CreateEntity(t);return Gu.AddToEntity(r),r.add(Du,Lu.DefaultImage("HighscoreIcon",{layerName:"gui_11"})),r},t.CoverPlayBtn=function(t){var r=ut.CreateEntity(t);return Gu.AddToEntity(r),r.add(Du,Lu.DefaultImage("Btn_Play",{layerName:"gui_22"})),vt.AddWithData(r,{postmake:ec("TweenPositionFromBottom",{duration:800,delay:300}),exit:ec("TweenPositionToBottom")}),ic.AddWithCmdOnUpAndBtnInteraction(r,"RequestGameplay"),r},t.GameOverRestartIcon=function(t){var r=ut.CreateEntity(t);return Gu.AddToEntity(r),r.add(Du,Lu.DefaultImage("TryAgain",{layerName:"gui_22"})),vt.AddWithData(r,{postmake:ec("TweenPositionFromTop",{delay:100}),exit:ec("TweenPositionToTop")}),r},t.GameOverPlayBtn=function(t){var r=ut.CreateEntity(t);return Gu.AddToEntity(r),r.add(Du,Lu.DefaultImage("Btn_Play",{layerName:"gui_22"})),vt.AddWithData(r,{postmake:ec("TweenPositionFromBottom"),exit:ec("TweenPositionToBottom")}),ic.AddWithCmdOnUpAndBtnInteraction(r,"RequestCoverFromGameOver"),r},t.GameOverHighscoreIcon=function(t){var r=ut.CreateEntity(t);return Gu.AddToEntity(r),r.add(Du,Lu.DefaultImage("HighscoreIcon",{layerName:"gui_11"})),vt.AddWithData(r,{postmake:ec("TweenPositionFromTop"),exit:ec("TweenPositionToTop")}),r},t.FadeCurtain=function(t){var r=ut.CreateEntity(t);return Gu.AddToEntity(r),r.add(Du,Lu.DefaultImage("ZaslonkaFade",{layerName:"pause_22",scale:32})),vt.AddWithData(r,{exit:ec("TweenAlphaTo",{alpha:0,duration:400})}),r},t.PauseBackground=function(t){var r=ut.CreateEntity(t);return Gu.AddToEntity(r),r.add(Du,Lu.DefaultImage("PauseCurtain",{layerName:"pause_22",scale:32})),r},t.PauseIcon=function(t){var r=ut.CreateEntity(t);return Gu.AddToEntity(r),r.add(Du,Lu.DefaultImage("PauseIcon",{layerName:"pause_22"})),r},t.PauseButtonCallUnpause=function(t){var r=ut.CreateEntity(t);return Gu.AddToEntity(r),r.add(Du,Lu.DefaultImage("Btn_Play",{layerName:"pause_22"})),ic.AddWithCmdOnUpAndBtnInteraction(r,"UnpauseGame"),r},t.BtnAudioToggle=function(t){var r=ut.CreateEntity(t);return et.At(r).setAlias("SettingsToggleBtnAudio"),Gu.AddToEntity(r),r.add(Du,Lu.DefaultImage("Btn_SoundOn",{layerName:"gui_31",animations:{active:{texture:"Btn_SoundOn"},inactive:{texture:"Btn_SoundOff"}}})),vt.AddWithData(r,{postmake:ec("TweenPositionFromTop"),exit:ec("TweenPositionToTop")}),ic.AddWithCmdOnUpAndBtnInteraction(r,tc.Name),$u.AddWithToggleStatesDictionary(r,"active",{active:{nextState:"inactive",command:ec(Vu.Name)},inactive:{nextState:"active",command:ec(Wu.Name)}}),r},t.TutorialHowToPlayHand=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=ut.CreateEntity(t);et.At(o).setAlias("TutorialHowToPlayHand"),Gu.AddToEntity(o);var a={selfDepth:50,layerDepth:25,curAnimation:"SwipeRight",animations:{Hold:{loop:!0},SwipeRight:{loop:!0}}};return r&&N(a,r),o.add(Du,Lu.DefaultSpine("HTP_MinimalHand",a)),o},t.GameplayBtnPause=function(t){var r=ut.CreateEntity(t);return Gu.AddToEntity(r),r.add(Du,Lu.DefaultImage("Btn_Pause",{layerName:"gui_31"})),vt.AddWithData(r,{postmake:ec("TweenPositionFromRight"),exit:ec("TweenPositionToRight")}),ic.AddWithCmdOnUpAndBtnInteraction(r,"PauseGame"),r},t.GameplayScoreFont=function(t){var r=ut.CreateEntity(t);return et.At(r).setAlias("GameplayScoreText"),Gu.AddToEntity(r),r.add(Du,Lu.DefaultText("scorefont",{layerName:"gui_11"})),r},t.GameplayScoreIcon=function(t){var r=ut.CreateEntity(t);return Gu.AddToEntity(r),r.add(Du,Lu.DefaultImage("ScoreIcon",{layerName:"gui_11"})),r},t}return _createClass(CasualGameSharedPrefabs)}(Mc),Pc=_createClass((function CasualGameStates(){var t=this;_classCallCheck(this,CasualGameStates),this.Always=new Tt("Always"),this.GameplayLoop=new Tt("GameplayLoop"),this.GameplayLevel=new Tt("GameplayLevel"),this.GameplayGui=new Tt("GameplayGui"),this.Cover=new Tt("Cover"),this.GameOver=new Tt("GameOver"),this.Fade=new Tt("Fade"),this.AudioController=new Tt("AudioController"),this.Pause=new Tt("Pause"),this.CommandRequestCover=gt.register("RequestCover",new ft((function(){Pl.SetPauseAllowedByStates(!1),t.Always.continue(),t.GameplayLoop.quit(),t.GameplayGui.quit(),t.GameplayLevel.enterFresh(),t.GameOver.quit(),t.Cover.enterFresh(),t.AudioController.continue()}))),this.CommandRequestCoverFromGameOver=gt.register("RequestCoverFromGameOver",new ft((function(){Pl.SetPauseAllowedByStates(!1),t.Always.continue(),t.GameplayLevel.exit(),t.GameplayGui.exit(),t.GameplayLoop.exit(),t.GameOver.exit(),t.AudioController.continue(),t.Fade.enterFresh(),Ct.QueueDelayedFunction(null,550,(function(){t.Cover.enterFresh(),t.GameplayLevel.enterFresh(),t.Fade.exit()}))}))),this.CommandRequestGameplay=gt.register("RequestGameplay",new ft((function(){Pl.SetPauseAllowedByStates(!0),t.Always.continue(),t.Cover.exit(),t.GameOver.quit(),t.GameplayLevel.continue(),t.GameplayGui.enterFresh(),t.GameplayLoop.enterFresh(),t.AudioController.continue()}))),this.CommandRequestGameOver=gt.register("RequestGameOver",new ft((function(){Pl.SetPauseAllowedByStates(!0),t.Always.continue(),t.GameplayLevel.continue(),t.GameplayGui.continue(),t.GameplayLoop.exit(),t.Cover.quit(),t.GameOver.enterFresh(),t.AudioController.continue()}))),this.CommandRestartLevelLogic=gt.register("RestartLevelLogic",new ft((function(){Pl.SetPauseAllowedByStates(!0),t.Always.continue(),t.Cover.exit(),t.GameOver.quit(),t.GameplayLevel.exit(),t.GameplayGui.continue(),t.GameplayLoop.exit(),t.AudioController.continue(),Ct.QueueDelayedFunction(null,100,(function(){t.GameplayLevel.enterFresh(),t.GameplayGui.continue(),t.GameplayLoop.enterFresh()}))}))),this.CommandPauseGame=gt.register("PauseGame",new ft((function(r){Pl.TryPauseGame()&&t.Pause.continue()}))),this.CommandUnpauseGame=gt.register("UnpauseGame",new ft((function(r){Pl.TryUnpauseGame()&&t.Pause.quit()})))})),Rc=1200,kc=new(function(){function FishingActorsCreationHelper(){_classCallCheck(this,FishingActorsCreationHelper),this.lastType=null}return _createClass(FishingActorsCreationHelper,[{key:"getFunctionCall",value:function getFunctionCall(t){var r=t;if("last"==r&&null==this.lastType&&(r="any"),"last"==r&&null!=this.lastType&&(r=this.lastType),"any"==r){r=Phaser.Utils.Array.GetRandom(["fish_0","fish_1","fish_2","fish_3","fish_4","fish_5"])}this.lastType=r;var o=null;return"fish_0"==r&&(o=Fc.Slow_Simple_Fish),"fish_1"==r&&(o=Fc.Fish_1),"fish_2"==r&&(o=Fc.Fish_2),"fish_3"==r&&(o=Fc.Fish_3),"fish_4"==r&&(o=Fc.Fish_4),"fish_5"==r&&(o=Fc.Fish_5),o}}]),FishingActorsCreationHelper}()),Oc=new(function(){function FishingPositionsHelper(){_classCallCheck(this,FishingPositionsHelper)}return _createClass(FishingPositionsHelper,[{key:"getX",value:function getX(t){if(null==t)return this.any_x()}},{key:"getY",value:function getY(t){return null==t?this.any_y():"any"==t?(0,this[t+"_y"])():(0,this[t])()}},{key:"any_x",value:function any_x(){return-500+Phaser.Math.Between(0,50)}},{key:"any_y",value:function any_y(){return Phaser.Math.Between(750,Rc)}},{key:"bottom",value:function bottom(){return Phaser.Math.Between(950,Rc)}},{key:"middle",value:function middle(){return Phaser.Math.Between(850,950)}},{key:"top",value:function top(){return Phaser.Math.Between(750,950)}}]),FishingPositionsHelper}()),Dc=function(){function FishingSpawnActorsScriptTarget(){_classCallCheck(this,FishingSpawnActorsScriptTarget)}return _createClass(FishingSpawnActorsScriptTarget,[{key:"copyFunctionsToTargetByBind",value:function copyFunctionsToTargetByBind(t){t.spawn_single=this.spawn_single.bind(t),t.spawn_v_horizontal=this.spawn_v_horizontal.bind(t),t.spawn_v_horizontal_reverse=this.spawn_v_horizontal_reverse.bind(t),t.spawn_line=this.spawn_line.bind(t),t.idle=this.idle.bind(t)}},{key:"idle",value:function idle(t){}},{key:"spawn_single",value:function spawn_single(t){t=JSON.parse(t),kc.getFunctionCall(t.type)(Oc.getX(t.x),Oc.getY(t.y))}},{key:"spawn_v_horizontal",value:function spawn_v_horizontal(t){t=JSON.parse(t);var r=Oc.getX(t.x),o=Oc.getY(t.y),a=[];a.push({x:r,y:o});var h=t.count-1;h=Math.floor(h/2);for(var d=0;d<h;d++)a.push({x:r+t.spacing_x*(d+1),y:o-t.spacing_y*(d+1)}),a.push({x:r-t.spacing_x*(d+1),y:o-t.spacing_y*(d+1)});for(var T=kc.getFunctionCall(t.type),S=0;S<a.length;S++){var A=a[S];T(A.x,A.y)}}},{key:"spawn_v_horizontal_reverse",value:function spawn_v_horizontal_reverse(t){t=JSON.parse(t);var r=Oc.getX(t.x),o=Oc.getY(t.y),a=[];a.push({x:r,y:o});var h=t.count-1;h=Math.floor(h/2);for(var d=0;d<h;d++)a.push({x:r+t.spacing_x*(d+1),y:o+t.spacing_y*(d+1)}),a.push({x:r-t.spacing_x*(d+1),y:o+t.spacing_y*(d+1)});for(var T=kc.getFunctionCall(t.type),S=0;S<a.length;S++){var A=a[S];T(A.x,A.y)}}},{key:"spawn_line",value:function spawn_line(t){t=JSON.parse(t);var r=Oc.getX(t.x),o=Oc.getY(t.y),a=[];a.push({x:r,y:o});for(var h=t.count-1,d=0;d<h;d++)a.push({x:r+t.spacing_x*(d+1),y:o+t.spacing_y*(d+1)});for(var T=kc.getFunctionCall(t.type),S=0;S<a.length;S++){var A=a[S];T(A.x,A.y)}}}]),FishingSpawnActorsScriptTarget}(),Lc=function(t){_inherits(InternalStatesModel,t);var r=_createSuper(InternalStatesModel);function InternalStatesModel(){return _classCallCheck(this,InternalStatesModel),r.apply(this,arguments)}return _createClass(InternalStatesModel,[{key:"EnterGameplayLevel",value:function EnterGameplayLevel(){var t=Cc.currentLevelData;Pl.SetGameplayCameraOffset(0,300,!0),t.fishSpawner=new Sl(Pl.GetGameplayScene(),{delimiter:"="});for(var r=[new Dc],o=0;o<r.length;o++){r[o].copyFunctionsToTargetByBind(Cc.currentLevelData.scriptTarget)}Fc.FisherPlayer(-225,450),t.haczykStartY=470,t.haczykStartX=25,Fc.FishingHaczyk(t.haczykStartX,t.haczykStartY),Fc.FishingLinka(t.haczykStartX,t.haczykStartY),Fc.HaczykVis(t.haczykStartX,t.haczykStartY)}},{key:"EnterGameplayLoop",value:function EnterGameplayLoop(){}}]),InternalStatesModel}(Pc),Ic=new Lc,Fc=new(function(t){_inherits(FishermanPrefabs,t);var r=_createSuper(FishermanPrefabs);function FishermanPrefabs(){return _classCallCheck(this,FishermanPrefabs),r.call(this)}return _createClass(FishermanPrefabs,[{key:"Heart",value:function Heart(t,r,o){var a=this.GuiSpineObject(Ic.GameplayLevel,"Heart","idle_heart",r,o,"gui_11");et.At(a).setAlias("heart_"+t),Ku.Take(a,30+50*(t-1),0),vt.AddWithData(a,{postmake:ec("TweenPositionFromTop",{delay:100}),exit:ec("TweenPositionToTop")}),vt.At(a).runCommandAtTriggerKey("postmake")}},{key:"DomeczekBackgroundResized",value:function DomeczekBackgroundResized(){var t=this.GameplayImageObject(Ic.Always,"Domeczek_BG",0,0);return Ju.Take(t,0,.5),Ou.SetScale(t,8,1),t}},{key:"BackgroundTile",value:function BackgroundTile(){var t=this.GameplayImageObject(Ic.Always,"Domeczek",0,0);return Ju.Take(t,0,.5),t}},{key:"LiniaWody",value:function LiniaWody(t,r){return this.GameplayImageObject(Ic.Always,"LiniaWody",t,r,{layerDepth:10})}},{key:"WodorostTop",value:function WodorostTop(t,r,o,a){o+=.05,r+=20;var h=this.GameplayImageObject(Ic.Always,"WeedsSingle",0,0,{layerDepth:8});return Ju.Take(h,0,.5),Ku.Take(h,t,r),Ou.SetScale(h,o,o),Du.At(h).setFlipX(a),h}},{key:"FisherPlayer",value:function FisherPlayer(t,r){var o=this.GameplaySpineObject(Ic.GameplayLevel,"Fisherman","idle",t,r,{layerDepth:9});return et.At(o).setAlias("fisherman"),Ju.Take(o,0,.5),Du.At(o).setFlipX(!0),o}},{key:"FishingHaczyk",value:function FishingHaczyk(t,r){var o=this.GameplayZoneObject(Ic.GameplayLevel,0,0);return Du.At(o).getDisplayedAsZone().setSize(20,20),Du.At(o).getDisplayedAsZone().setOrigin(0,.5),et.At(o).setAlias("haczyk"),et.AddBagList(o,["BOUNCE_ANGLE"]),Du.At(o).getDisplayedAsZone().setAngle(90),oc.AddToEntityWithBulletBehaviour(o,{groupsList:["haczyk"],bulletData:{speed:500,rotateToTarget:!1,enable:!1}}),Ku.Take(o,t,r),Q.AddToEntityWithProperties(o,{bounce:{enabled:!0,angleChangeSpeed:100,angleChangeDir:Phaser.Utils.Array.GetRandom([-1,1]),maxDiff:40,angleChangeSpeedMultiplier:1,curDiff:0,baseAngle:90}}),o}},{key:"FishingLinka",value:function FishingLinka(t,r){var o=this.GameplayImageObject(Ic.GameplayLevel,"Linka",t,r,{layerDepth:12});return et.At(o).setAlias("linka"),Du.At(o).getDisplayedAsImage().setAngle(90),Du.At(o).getDisplayedAsImage().setOrigin(0,.5),Du.At(o).getDisplayedAsImage().setVisible(!1),o}},{key:"HaczykVis",value:function HaczykVis(t,r){var o=this.GameplayImageObject(Ic.GameplayLevel,"Haczyk",t,r,{layerDepth:6});return Du.At(o).getDisplayedAsImage().setAngle(90),Du.At(o).getDisplayedAsImage().setOrigin(0,.5),et.At(o).setAlias("haczyk_vis"),o}},{key:"Slow_Simple_Fish",value:function Slow_Simple_Fish(t,r){var o=Fc.GameplaySpineObject(Ic.GameplayLevel,"Fish04","relaxingSwim",t,r,{layerDepth:7});et.AddBagList(o,["TICK_AI_FISH"]),Nl.AddToEntity(o),Q.AddToEntityWithProperties(o,{state:"swimming",reel_state:"none",reel_speed:150,score:50}),oc.AddToEntityWithBulletBehaviour(o,{groupsList:["fish"],bulletData:{speed:100,rotateToTarget:!1}}),Du.At(o).getDisplayedAsImage().setAlpha(0),CmdTweenAlphaTo(o,{alpha:1,duration:1500})}},{key:"Fish_1",value:function Fish_1(t,r){var o=Fc.GameplaySpineObject(Ic.GameplayLevel,"Fish01","relaxingSwim",t,r,{layerDepth:7});return et.AddBagList(o,["TICK_AI_FISH","BOUNCE_ANGLE"]),Nl.AddToEntity(o),Q.AddToEntityWithProperties(o,{state:"swimming",reel_state:"none",reel_speed:150,score:70}),oc.AddToEntityWithBulletBehaviour(o,{groupsList:["fish"],bulletData:{speed:100*Ec.Get().fishSpeedMultiplier,rotateToTarget:!1}}),Du.At(o).getDisplayedAsImage().setAlpha(0),CmdTweenAlphaTo(o,{alpha:1,duration:1500}),Q.AddToEntityWithProperties(o,{bounce:{enabled:!0,angleChangeSpeed:20,angleChangeDir:Phaser.Utils.Array.GetRandom([-1,1]),maxDiff:30,angleChangeSpeedMultiplier:1,curDiff:0,baseAngle:Du.At(o).getDisplayedAsImage().angle}}),o}},{key:"Fish_2",value:function Fish_2(t,r){var o=Fc.GameplaySpineObject(Ic.GameplayLevel,"Fish03","relaxingSwim",t,r,{layerDepth:7});return et.AddBagList(o,["TICK_AI_FISH","BOUNCE_ANGLE"]),Nl.AddToEntity(o),Q.AddToEntityWithProperties(o,{state:"swimming",reel_state:"none",reel_speed:150,score:100}),oc.AddToEntityWithBulletBehaviour(o,{groupsList:["fish"],bulletData:{speed:120*Ec.Get().fishSpeedMultiplier,rotateToTarget:!1}}),Du.At(o).getDisplayedAsImage().setAlpha(0),CmdTweenAlphaTo(o,{alpha:1,duration:1500}),Q.AddToEntityWithProperties(o,{bounce:{enabled:!0,angleChangeSpeed:5,angleChangeDir:-1,maxDiff:35,angleChangeSpeedMultiplier:1,curDiff:0,baseAngle:Du.At(o).getDisplayedAsImage().angle}}),o}},{key:"Fish_3",value:function Fish_3(t,r){var o=Fc.GameplaySpineObject(Ic.GameplayLevel,"Fish02","relaxingSwim",t,r,{layerDepth:7});return et.AddBagList(o,["TICK_AI_FISH","BOUNCE_ANGLE"]),Nl.AddToEntity(o),Q.AddToEntityWithProperties(o,{state:"swimming",reel_state:"none",reel_speed:150,score:100}),oc.AddToEntityWithBulletBehaviour(o,{groupsList:["fish"],bulletData:{speed:120*Ec.Get().fishSpeedMultiplier,rotateToTarget:!1}}),Du.At(o).getDisplayedAsImage().setAlpha(0),CmdTweenAlphaTo(o,{alpha:1,duration:1500}),Q.AddToEntityWithProperties(o,{bounce:{enabled:!0,angleChangeSpeed:12,angleChangeDir:1,maxDiff:30,angleChangeSpeedMultiplier:1,curDiff:0,baseAngle:Du.At(o).getDisplayedAsImage().angle}}),o}},{key:"Fish_4",value:function Fish_4(t,r){var o=Fc.GameplaySpineObject(Ic.GameplayLevel,"Fish05","relaxingSwim",t,r,{layerDepth:7});return et.AddBagList(o,["TICK_AI_FISH","SPOOK_FISH"]),Nl.AddToEntity(o),Q.AddToEntityWithProperties(o,{state:"swimming",reel_state:"none",reel_speed:150,score:200,spookedByHaczyk:!1}),oc.AddToEntityWithBulletBehaviour(o,{groupsList:["fish"],bulletData:{speed:120*Ec.Get().fishSpeedMultiplier,rotateToTarget:!1}}),Du.At(o).getDisplayedAsImage().setAlpha(0),CmdTweenAlphaTo(o,{alpha:1,duration:1500}),o}},{key:"Fish_5",value:function Fish_5(t,r){var o=Fc.GameplaySpineObject(Ic.GameplayLevel,"Fish06","relaxingSwim",t,r,{layerDepth:7});return et.AddBagList(o,["TICK_AI_FISH"]),Nl.AddToEntity(o),Q.AddToEntityWithProperties(o,{state:"swimming",reel_state:"none",reel_speed:150,score:250,isGoingToSlow:!0,hasSlowed:!1,slowAfterX:Phaser.Math.Between(150,220)}),oc.AddToEntityWithBulletBehaviour(o,{groupsList:["fish"],bulletData:{speed:300*Ec.Get().fishSpeedMultiplier,rotateToTarget:!1}}),Du.At(o).getDisplayedAsImage().setAlpha(0),CmdTweenAlphaTo(o,{alpha:1,duration:1500}),Du.At(o).getDisplayedAsImage().setScale(.7),o}},{key:"SplashAnimation",value:function SplashAnimation(t,r){return this.GameplaySpineObjectDieAfterAnim(Ic.GameplayLevel,"Splash","Splash",t,r,{layerDepth:9})}}]),FishermanPrefabs}(_c)),Bc=function(){function FishingSequenceData(t){_classCallCheck(this,FishingSequenceData),this.name=t,this.commandsArray=[],this.commandString=""}return _createClass(FishingSequenceData,[{key:"build",value:function build(){for(var t=0;t<this.commandsArray.length;t++){var r=this.commandsArray[t];""!=this.commandString&&(this.commandString+="\n"),3==r.length?this.commandString+=r[0]+"="+r[1]+"="+JSON.stringify(r[2]):2==r.length&&(this.commandString+=r[0]+"="+r[1])}}},{key:"getCommandString",value:function getCommandString(){return this.commandString||this.build(),this.commandString}},{key:"addCommandWaitUntilEvent",value:function addCommandWaitUntilEvent(t){var r=[];r.push("#WAIT"),r.push(t),this.commandsArray.push(r)}},{key:"addCommandWaitUntilContinue",value:function addCommandWaitUntilContinue(){}},{key:"addCommandDelayed",value:function addCommandDelayed(t,r,o){var a=[];return a.push(t),a.push(r),a.push(o),this.commandsArray.push(a),this}}]),FishingSequenceData}(),Nc=function(){return 500+Phaser.Math.Between(-100,100)}.bind(globalThis),Gc=function(){return 1400+Phaser.Math.Between(-100,100)}.bind(globalThis),Yc=function(){return 2e3+Phaser.Math.Between(-100,100)}.bind(globalThis),Xc=function(){return 3e3+Phaser.Math.Between(-100,100)}.bind(globalThis),Uc=function(){function FishingSpawnSequencesGenerator(){_classCallCheck(this,FishingSpawnSequencesGenerator)}return _createClass(FishingSpawnSequencesGenerator,null,[{key:"GenerateSequence",value:function GenerateSequence(){var t=function f_doForSingleTypeExceptRare(t){t(Phaser.Utils.Array.GetRandom(["fish_0","fish_1","fish_2","fish_3","fish_4"]))},r=[function(r){t((function(t){r.addCommandDelayed(0,"spawn_single",{type:t,y:"bottom"})}))},function(r){t((function(t){r.addCommandDelayed(0,"spawn_single",{type:t,y:"bottom"}).addCommandDelayed(Yc(),"spawn_single",{type:t,y:"bottom"}).addCommandDelayed(Gc(),"spawn_single",{type:t,y:"bottom"}).addCommandDelayed(Yc(),"idle",{})}))},function(r){t((function(t){r.addCommandDelayed(0,"spawn_single",{type:t,y:"any"}).addCommandDelayed(Yc(),"spawn_single",{type:t,y:"any"}).addCommandDelayed(Gc(),"spawn_single",{type:t,y:"any"}).addCommandDelayed(Nc(),"spawn_single",{type:t,y:"any"}).addCommandDelayed(Yc(),"idle",{})}))},function(r){t((function(t){r.addCommandDelayed(Gc(),"spawn_single",{type:t,y:"top"}).addCommandDelayed(Yc(),"spawn_single",{type:"any",y:"top"}).addCommandDelayed(Gc(),"spawn_single",{type:t,y:"bottom"}).addCommandDelayed(Yc(),"idle",{})}))},function(r){t((function(t){r.addCommandDelayed(0,"spawn_single",{type:t,y:"top"}).addCommandDelayed(Yc(),"spawn_line",{type:t,y:"middle",count:3,spacing_x:Phaser.Math.Between(-170,-190),spacing_y:0}).addCommandDelayed(Xc(),"spawn_single",{type:"any",y:"bottom"}).addCommandDelayed(Nc(),"spawn_single",{type:"any",y:"bottom"}).addCommandDelayed(Yc(),"idle",{})}))},function(r){t((function(t){r.addCommandDelayed(0,"spawn_single",{type:t,y:"top"}).addCommandDelayed(Yc(),"spawn_line",{type:t,y:"middle",count:3,spacing_x:Phaser.Math.Between(-170,-190),spacing_y:Phaser.Math.Between(100,130)}).addCommandDelayed(Gc(),"spawn_single",{type:"any",y:"bottom"}).addCommandDelayed(Yc(),"idle",{})}))}],o=new Bc;return r[Phaser.Math.Between(0,r.length-1)](o),o}},{key:"AddExtraDelay",value:function AddExtraDelay(t){t.addCommandDelayed(Yc(),"idle",{})}},{key:"AddLotsOfExtraSpawns",value:function AddLotsOfExtraSpawns(t){t.addCommandDelayed(Nc(),"spawn_single",{type:"any",y:"any"}),t.addCommandDelayed(Nc(),"spawn_single",{type:"any",y:"any"}),t.addCommandDelayed(Nc(),"spawn_single",{type:"any",y:"any"}),t.addCommandDelayed(Nc(),"spawn_single",{type:"any",y:"any"}),t.addCommandDelayed(Nc(),"spawn_single",{type:"any",y:"any"}),t.addCommandDelayed(Nc(),"spawn_single",{type:"any",y:"any"}),t.addCommandDelayed(Nc(),"spawn_single",{type:"any",y:"any"})}}]),FishingSpawnSequencesGenerator}();var zc,Vc,Wc=_createClass((function CasualGamePremadeOverrides(){_classCallCheck(this,CasualGamePremadeOverrides),this.cover={delta:{x:0,y:0}},this.coverBtnPlay={delta:{x:0,y:0}},this.scorePanel={layer:"gui_11",x:0,y:0},this.coverLogo={layer:"gui_31"},this.gameplayScoreIcon={x:-145,y:0},this.coverScoreIcon={x:-145,y:3}})),Hc=new(function(t){_inherits(InternalGamePremades,t);var r=_createSuper(InternalGamePremades);function InternalGamePremades(){return _classCallCheck(this,InternalGamePremades),r.call(this)}return _createClass(InternalGamePremades,[{key:"Always",value:function Always(t,r){var o=t.Background(r);Du.At(o).getDisplayedAsImage().setScale(8,8),Fc.DomeczekBackgroundResized(),Fc.BackgroundTile(),Fc.WodorostTop(-380,570,1,!1),Fc.WodorostTop(-530+Phaser.Math.Between(-30,30),570+Phaser.Math.Between(-30,30),Phaser.Math.FloatBetween(.85,1.05),1),Fc.WodorostTop(-680+Phaser.Math.Between(-30,30),570+Phaser.Math.Between(-30,30),Phaser.Math.FloatBetween(.85,1.05),Phaser.Math.Between(0,1)),Fc.WodorostTop(-830+Phaser.Math.Between(-30,30),570+Phaser.Math.Between(-30,30),Phaser.Math.FloatBetween(.85,1.05),Phaser.Math.Between(0,1)),Fc.WodorostTop(-980+Phaser.Math.Between(-30,30),570+Phaser.Math.Between(-30,30),Phaser.Math.FloatBetween(.85,1.05),Phaser.Math.Between(0,1)),Fc.WodorostTop(410,570,1,!1),Fc.WodorostTop(560+Phaser.Math.Between(-30,30),570+Phaser.Math.Between(-30,30),Phaser.Math.FloatBetween(.85,1.05),Phaser.Math.Between(0,1)),Fc.WodorostTop(710+Phaser.Math.Between(-30,30),570+Phaser.Math.Between(-30,30),Phaser.Math.FloatBetween(.85,1.05),Phaser.Math.Between(0,1)),Fc.WodorostTop(860+Phaser.Math.Between(-30,30),570+Phaser.Math.Between(-30,30),Phaser.Math.FloatBetween(.85,1.05),Phaser.Math.Between(0,1)),Fc.WodorostTop(1010+Phaser.Math.Between(-30,30),570+Phaser.Math.Between(-30,30),Phaser.Math.FloatBetween(.85,1.05),Phaser.Math.Between(0,1)),Fc.LiniaWody(0,564),Fc.LiniaWody(-640,564),Fc.LiniaWody(-1280,564),Fc.LiniaWody(640,564),Fc.LiniaWody(1280,564)}},{key:"GameplayLoop",value:function GameplayLoop(t,r){console.log("loop"),_get(_getPrototypeOf(InternalGamePremades.prototype),"GameplayLoop",this).call(this,t,r),Fc.Heart(1,335,42),Fc.Heart(2,335,42),Fc.Heart(3,335,42)}}]),InternalGamePremades}(function(){function CasualGamePremades(){_classCallCheck(this,CasualGamePremades),this.overrides=new Wc}return _createClass(CasualGamePremades,[{key:"Always",value:function Always(t,r){console.warn("PLEASE DON'T CALL ALWAYS ON CASUAL PREMADES")}},{key:"GameplayLevel",value:function GameplayLevel(t,r){}},{key:"GameplayLoop",value:function GameplayLoop(t,r){var o=t.GameplayBtnPause(r.name);Ju.Take(o,-.5,.5),Ku.Take(o,0,80),vt.At(o).runCommandAtTriggerKey("postmake")}},{key:"AudioController",value:function AudioController(t,r){var o=t.BtnAudioToggle(r.name);Ju.Take(o,-.5,.5),Ku.Take(o,0,7),vt.At(o).runCommandAtTriggerKey("postmake")}},{key:"GameOver",value:function GameOver(t,r){var o=t.GameOverRestartIcon(r.name);Ju.Take(o,0,-.5),Ku.Take(o,0,-30),vt.At(o).runCommandAtTriggerKey("postmake");var a=t.GameOverPlayBtn(r.name);Ju.Take(a,0,.5),Ku.Take(a,0,30),vt.At(a).runCommandAtTriggerKey("postmake")}},{key:"Fade",value:function Fade(t,r){var o=t.FadeCurtain(r.name);vt.At(o).runCommandAtTriggerKey("postmake"),Du.At(o).getDisplayedAsImage().alpha=0,CmdTweenAlphaTo(o,{alpha:1,duration:450})}},{key:"Pause",value:function Pause(t,r){t.PauseBackground(r.name);var o=t.PauseIcon(r.name);Ju.Take(o,0,-.5),Ku.Take(o,0,-40);var a=t.PauseButtonCallUnpause(r.name);Ju.Take(a,0,.5),Ku.Take(a,0,40),vt.At(a).runCommandAtTriggerKey("postmake")}},{key:"GameplayGui",value:function GameplayGui(t,r){N(this.overrides,dt.GetSingleton().getPremadeOverrides());var o=t.ScorePanel(r.name,this.overrides.scorePanel.layer);vc.Take(o,this.overrides.scorePanel.x,this.overrides.scorePanel.y),"gui_11"==this.overrides.scorePanel.layer&&Ju.Take(o,.5,.5),"gui_21"==this.overrides.scorePanel.layer&&Ju.Take(o,0,.5),vt.At(o).runCommandAtTriggerKey("postmake");var a=t.GameplayScoreFont(r.name);Ou.ReparentLayer(a,this.overrides.scorePanel.layer),Nu.AddWithPin(o,a,{x:25,y:2});var h=t.GameplayScoreIcon(r.name);Ou.ReparentLayer(h,this.overrides.scorePanel.layer),et.At(h).setAlias("AliasGameplayGuiScoreIcon"),Nu.AddWithPin(o,h,{x:this.overrides.gameplayScoreIcon.x,y:this.overrides.gameplayScoreIcon.y})}},{key:"Cover",value:function Cover(t,r){N(this.overrides,dt.GetSingleton().getPremadeOverrides());var o=t.CoverTitle(r.name);Ju.Take(o,0,-.5),Ku.Take(o,this.overrides.cover.delta.x,this.overrides.cover.delta.y),vt.At(o).runCommandAtTriggerKey("postmake");var a=t.CoverLogo(r.name,this.overrides.coverLogo.layer);"gui_31"==this.overrides.coverLogo.layer?(Ju.Take(a,-.5,.5),Ku.Take(a,-85,8)):(Ju.Take(a,-.5,-.5),Ku.Take(a,-10,-10)),vt.At(a).runCommandAtTriggerKey("postmake");var h=t.ScorePanel(r.name,this.overrides.scorePanel.layer);vc.Take(h,this.overrides.scorePanel.x,this.overrides.scorePanel.y),et.At(h).setAlias("AliasCoverScorePanel"),"gui_11"==this.overrides.scorePanel.layer&&Ju.Take(h,.5,.5),"gui_21"==this.overrides.scorePanel.layer&&Ju.Take(h,0,.5),vt.At(h).runCommandAtTriggerKey("postmake");var d=t.CoverScoreFont(r.name);Ou.ReparentLayer(d,this.overrides.scorePanel.layer),Nu.AddWithPin(h,d,{x:25,y:2});var T=t.CoverHighscoreIcon(r.name);et.At(T).setAlias("AliasCoverScoreIcon"),Ou.ReparentLayer(T,this.overrides.scorePanel.layer),Nu.AddWithPin(h,T,{x:this.overrides.coverScoreIcon.x,y:this.overrides.coverScoreIcon.y});var S=t.CoverPlayBtn(r.name);Ju.Take(S,0,.5),Ku.Take(S,this.overrides.coverBtnPlay.delta.x,150+this.overrides.coverBtnPlay.delta.y),vt.At(S).runCommandAtTriggerKey("postmake")}}]),CasualGamePremades}())),jc={version:"1",highscore:0},qc="LOOP_COUNT_GAMEPLAY_TIME",Zc=Cc,Kc=Hc,Jc=function(){function InternalMainScript(){_classCallCheck(this,InternalMainScript)}return _createClass(InternalMainScript,[{key:"Init",value:function Init(){var t=this;zc=Ic,Vc=Fc,rc.AddGroup("haczyk"),rc.AddGroup("fish");!function _InitStates(){zc.AudioController.onEnter=function(){if(Kc.AudioController(Vc,zc.AudioController),-1==Pl.GetAudioState()){var t=tt.GetEntityByAlias("SettingsToggleBtnAudio");$u.At(t).setToggleState("inactive")}},zc.Pause.onEnter=function(){Kc.Pause(Vc,zc.Pause)},zc.Fade.onEnter=function(){Kc.Fade(Vc,zc.Fade)},zc.Always.onEnter=function(){Kc.Always(Vc,zc.Always)},zc.GameplayGui.onEnter=function(){Kc.GameplayGui(Vc,zc.GameplayGui),t.AddToScore(0)},zc.GameplayLoop.onEnter=function(){Kc.GameplayLoop(Vc,zc.GameplayLoop),t.StateEnterGameplayLoop()},zc.GameplayLoop.onExit=function(){},zc.GameplayLevel.onEnter=function(){Kc.GameplayLevel(Vc,zc.GameplayLevel),dt.GetSingleton().hasToResetScoreEachLevel()&&(Zc.subsession.score=0,Zc.subsession.latestScore=0),t.AddToScore(0),t.StateEnterGameplayLevel()},zc.Cover.onEnter=function(){Kc.Cover(Vc,zc.Cover),Zc.ResetSubsession(),null!=jc&&Ou.SetTextWithZeroPad(tt.GetEntityByAlias("AliasCoverScoreText"),jc.highscore,6)},zc.GameOver.onEnter=function(){if(Kc.GameOver(Vc,zc.GameOver),t.TrySaveNewHighscore()){var r=Vc.GameOverHighscoreIcon(zc.GameOver);Ju.Take(r,.5,.5),Ku.Take(r,10,80),vt.At(r).runCommandAtTriggerKey("postmake")}}}()}},{key:"AddToScore",value:function AddToScore(t){Zc.subsession.score+=t,Zc.subsession.latestScore=Zc.subsession.score,dt.GetSingleton().onUpdateScore(Zc.subsession.latestScore),tt.GetEntityByAlias("GameplayScoreText")&&Ou.SetTextWithZeroPad(tt.GetEntityByAlias("GameplayScoreText"),Zc.subsession.score,6)}},{key:"ShowTutorialHand",value:function ShowTutorialHand(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Tap",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,a=Vc.TutorialHowToPlayHand(zc.GameplayLevel);return Du.At(a).getSpineAnimationList(!1),Du.At(a).setAnimation(t,{loop:!0}),Gu.At(a).setPosition(r,o),a}},{key:"TrySaveNewHighscore",value:function TrySaveNewHighscore(){return jc.highscore<Zc.subsession.score&&(jc.highscore=Zc.subsession.score,Pl.SaveGame(),!0)}},{key:"TryKillTutorial",value:function TryKillTutorial(){var t=tt.GetEntityByAlias("TutorialHowToPlayHand");t&&Ct.QueueActorToDisposeBuffer(t)}},{key:"RequestLevelWon",value:function RequestLevelWon(){Zc.session.seenTutorial=!0,Zc.currentLevelData.levelLoopEnded||(Zc.currentLevelData.levelLoopEnded=!0,this.TrySaveNewHighscore(),Ct.QueueDelayedFunction(null,750,(function(){dt.GetSingleton().showAd((function(){})),zc.CommandRestartLevelLogic.run({levelResult:"won"})})),Tc.CleanFunction(qc))}},{key:"RequestLevelLost",value:function RequestLevelLost(){Zc.session.seenTutorial=!0,Zc.currentLevelData.levelLoopEnded||(Zc.currentLevelData.levelLoopEnded=!0,this.TryKillTutorial(),zc.CommandRequestGameOver.run(),dt.GetSingleton().showAd((function(){})),Tc.CleanFunction(qc))}},{key:"StateEnterGameplayLevel",value:function StateEnterGameplayLevel(){Zc.ResetLevelData(),zc.EnterGameplayLevel()}},{key:"StateEnterGameplayLoop",value:function StateEnterGameplayLoop(){Zc.currentLevelData.levelLoopStarted=!0,0==Zc.session.seenTutorial&&(this.ShowTutorialHand("Tap",0,900),Zc.session.seenTutorial=!0),Tc.SetUpdateFunc(qc,(function(t){if(0!=Zc.currentLevelData.levelLoopStarted&&1!=Zc.currentLevelData.levelLoopEnded){var r=function DeltaScaled(t){return t/1e3}(t);Zc.currentLevelData.activeLevelTime+=r}})),zc.EnterGameplayLoop()}}]),InternalMainScript}(),Qc=new Jc;function _onCollideHaczykWithFish(t,r){var o=Cc.currentLevelData;t.selfEntity;var a=r.selfEntity;if(!o.referenceCaughtFish){var h=Q.At(a);if("swimming"==h.state){o.referenceCaughtFish=a,h.state="caught",h.reel_state="fight";var d=tt.GetEntityByAlias("haczyk");oc.At(d).bullet.setEnable(!1),oc.At(d).bullet.speed=250,Pl.PlayAudioFile("lup"),Cc.session.sawTutorialOnFirstCatch||(Cc.session.sawTutorialOnFirstCatch=!0,function _setTutorialVisibleOnFirstCatch(){var t=tt.GetEntityByAlias("TutorialHowToPlayHand");if(!t)return;Du.At(t).getDisplayedAsImage().alpha=1,Du.At(t).setAnimation("Hold",{loop:!0})}())}}}function ResetBounce(t){var r=Q.At(t).bounce,o=Du.At(t);if(1==r.angleChangeDir){var a=o.refDisplayed.angle,h=r.baseAngle-r.maxDiff;r.curDiff=a-h}else{var d=o.refDisplayed.angle,T=r.baseAngle+r.maxDiff;r.curDiff=T-d}}function fishingPreThread(t){for(var r=tt.GetBagActorsReferenceList("BOUNCE_ANGLE"),o=0;o<r.length;o++){var a=r[o];if(0==a.isDestroyed){var h=Q.At(a).bounce,d=Du.At(a);if(d.isDisplayedOnScreen()&&h&&h.enabled){var T=h.angleChangeSpeed*h.angleChangeSpeedMultiplier*(t/1e3);d.refDisplayed.angle+=T*h.angleChangeDir,h.curDiff+=T,h.curDiff>=2*h.maxDiff&&(h.curDiff=0,h.angleChangeDir*=-1,ResetBounce(a))}}}var S=Cc.currentLevelData,A=tt.GetEntityByAlias("haczyk"),P=tt.GetEntityByAlias("haczyk_vis");S.isHaczykRetreating&&P&&A?Du.At(P).getDisplayedAsImage().setAngle(Du.At(A).getDisplayedAsImage().angle-180):P&&A&&Du.At(P).getDisplayedAsImage().setAngle(Du.At(A).getDisplayedAsImage().angle)}function fishingMainThread(t){var r=Cc.currentLevelData;rc.OverlapGroupsByNames("haczyk","fish",_onCollideHaczykWithFish,null,this);var o=tt.GetEntityByAlias("linka"),a=tt.GetEntityByAlias("haczyk"),h=!1,d=!1,T=yc.GetPointerIfNotPressingButton();0==r.levelLoopStarted&&1==Cc.session.seenTutorial&&(r.levelLoopStarted=!0);var S=tt.GetEntityByAlias("TutorialHowToPlayHand");if(0!=Cc.session.tutState){if(!r.fishSpawner.isRunning&&0==r.playerDead){var A=Uc.GenerateSequence();r.sinceSlowed+=10,Phaser.Math.Between(0,100)<r.sinceSlowed&&(r.sinceSlowed=0,Uc.AddExtraDelay(A)),r.sinceGigaspawn+=3,Phaser.Math.Between(0,100)<r.sinceGigaspawn&&(r.sinceGigaspawn=0,Uc.AddLotsOfExtraSpawns(A)),r.playedFor>=10&&(Ec.Get().fishSpeedMultiplier=1.2),r.playedFor>=20&&(Ec.Get().fishSpeedMultiplier=1.4),r.playedFor>=30&&(Ec.Get().fishSpeedMultiplier=1.6),r.playedFor>=40&&(Ec.Get().fishSpeedMultiplier=2),r.fishSpawner.load(A.getCommandString(),r.scriptTarget,{timeUnit:"ms"}),r.fishSpawner.start()}if(T&&!T.isDown&&(r.wasPointerUpToAllowRetreat=!0),r.waitingForUntap&&T&&!T.isDown&&(r.waitingForUntap=!1),T&&T.isDown&&!r.waitingForUntap&&0==r.playerDead){var P=tt.GetEntityByAlias("fisherman");if(r.shotHaczyk)T&&T.isDown&&r.shotHaczyk&&(r.isHaczykRetreating||r.referenceCaughtFish||!r.wasPointerUpToAllowRetreat||(Du.At(P).setAnimation("haczykUp"),h=!0));else{Du.At(P).setAnimation("haczykDown"),Du.At(o).getDisplayedAsImage().setVisible(!0);for(var O=tt.GetBagActorsReferenceList("SPOOK_FISH"),D=0;D<O.length;D++){var L=O[D];Q.At(L).spookedByHaczyk||(Q.At(L).spookedByHaczyk=!0,oc.At(L).bullet.setSpeed(oc.At(L).bullet.speed*(Phaser.Math.Between(17,25)/10)))}r.wasPointerUpToAllowRetreat=!1,r.shotHaczyk=!0,oc.At(a).bullet.setEnable(!0),oc.At(a).bullet.setSpeed(500),Q.At(a).bounce.enabled=!1,r.tryToSplash=!0,r.splashAtY=Du.At(a).refDisplayed.y+105}}if(r.tryToSplash&&!r.didSplash&&Gu.At(a).refTarget.y>=r.splashAtY&&(r.didSplash=!0,Fc.SplashAnimation(Gu.At(a).refTarget.x,r.splashAtY),Pl.PlayAudioFile("splash")),r.shotHaczyk&&(Du.At(a).isDisplayedOnScreen()||r.isHaczykRetreating||(h=!0),(Gu.At(a).refTarget.x<-320||Gu.At(a).refTarget.x>320)&&(r.isHaczykRetreating||(h=!0)),r.referenceCaughtFish&&!r.isHaczykRetreating&&(h=!0)),h&&(r.isHaczykRetreating=!0,Du.At(a).getDisplayedAsImage().setAngle(Gu.At(a).refTarget.angle-180)),r.referenceCaughtFish)if(r.referenceCaughtFish.isDestroyed||0==Du.At(r.referenceCaughtFish).isDisplayedOnScreen(!0))r.referenceCaughtFish=null,d=!0;else{var I=yc.GetPointerIfNotPressingButton();I&&I.isDown?r.keepReelingFishFor=1e3:r.keepReelingFishFor=0,r.keepReelingFishFor>=0&&(r.keepReelingFishFor-=t);var B=Gu.At(a);if(r.keepReelingFishFor<=0){B.refTarget.x=Gu.At(r.referenceCaughtFish).refTarget.x,B.refTarget.y=Gu.At(r.referenceCaughtFish).refTarget.y-r.offsetCaughtFishY,oc.At(a).bullet.setEnable(!1),oc.At(a).bullet.speed=250,Q.At(r.referenceCaughtFish).reel_state="fight";var N=tt.GetEntityByAlias("fisherman");Du.At(N).setAnimation("haczykDown")}else{oc.At(a).bullet.setEnable(!0),oc.At(a).bullet.speed=250,Q.At(r.referenceCaughtFish).reel_state="reel";var G=tt.GetEntityByAlias("fisherman");Du.At(G).setAnimation("haczykUp"),Gu.At(r.referenceCaughtFish).refTarget.x=B.refTarget.x,Gu.At(r.referenceCaughtFish).refTarget.y=B.refTarget.y+r.offsetCaughtFishY}}for(var Y=tt.GetBagActorsReferenceList("TICK_AI_FISH"),X=0;X<Y.length;X++){var U=Y[X],z=Q.At(U),V=Du.At(U);if(z.bounce&&z.bounce.enabled)if(V.refDisplayed.y<=680)if(-1==z.bounce.angleChangeDir&&(z.bounce.angleChangeDir=1),V.refDisplayed.angle<=0){var W=1+Math.abs(V.refDisplayed.angle)/5;z.bounce.angleChangeSpeedMultiplier=W}else z.bounce.angleChangeSpeedMultiplier=1;else z.bounce.angleChangeSpeedMultiplier=1;"caught"==z.state?(z.bounce&&(z.bounce.enabled=!1),"relaxingSwim"==Du.At(U).getAnimationName()&&Du.At(U).setAnimation("speedSwim",{loop:!0}),oc.At(U).bullet.setSpeed(z.reel_speed),Du.At(U).getDisplayedAsImage().setAngle(0),"fight"==z.reel_state?oc.At(U).bullet.setEnable(!0):"reel"==z.reel_state&&oc.At(U).bullet.setEnable(!1)):z.isGoingToSlow&&V.refDisplayed.x>z.slowAfterX&&!z.hasSlowed&&(z.hasSlowed=!0,oc.At(U).bullet.setSpeed(oc.At(U).bullet.speed*(Phaser.Math.Between(35,50)/100)))}if(r.shotHaczyk)if((Phaser.Math.Distance.Between(Gu.At(a).refTarget.x,Gu.At(a).refTarget.y,r.haczykStartX,r.haczykStartY)<=40||r.referenceCaughtFish&&Gu.At(a).refTarget.y<r.haczykStartY+r.offsetWhereFishIsCaught)&&r.isHaczykRetreating||d){var H=tt.GetEntityByAlias("fisherman");Du.At(H).setAnimation("idle"),d?Pl.PlayAudioFile("swift"):r.referenceCaughtFish&&r.isHaczykRetreating&&(Fc.SplashAnimation(Gu.At(a).refTarget.x,r.splashAtY),Pl.PlayAudioFile("splash")),r.isHaczykRetreating=!1,r.shotHaczyk=!1,oc.At(a).bullet.setEnable(!1),Gu.At(a).refTarget.x=r.haczykStartX,Gu.At(a).refTarget.y=r.haczykStartY,Du.At(a).getDisplayedAsImage().setAngle(Gu.At(a).refTarget.angle-180),ResetBounce(a),Q.At(a).bounce.enabled=!0,r.keepReelingFishFor=0,r.didSplash=!1,r.tryToSplash=!1,Du.At(o).getDisplayedAsImage().setVisible(!1),r.referenceCaughtFish?(Qc.TryKillTutorial(),Qc.AddToScore(Q.At(r.referenceCaughtFish).score),Q.At(r.referenceCaughtFish).state="dispose",Gl.Take(r.referenceCaughtFish),r.referenceCaughtFish=null,r.waitingForUntap=!0):r.firstReturn||function _reduceLives(){var t=Cc.currentLevelData;if(t.lives>0){var r=tt.GetEntityByAlias("heart_"+t.lives);Du.At(r).setAnimation("broken_heart",{loop:!1})}if(t.lives-=1,t.lives<=0){if(1==t.playerDead)return;var o=tt.GetEntityByAlias("haczyk");Q.At(o).bounce=null,t.fishSpawner.shutdown(),t.playerDead=!0,Qc.RequestLevelLost()}}(),r.firstReturn=!1}var q=Phaser.Math.Distance.Between(Gu.At(o).refTarget.x,Gu.At(o).refTarget.y,Gu.At(a).refTarget.x,Gu.At(a).refTarget.y);Du.At(o).getDisplayedAsImage().setDisplaySize(q,4);var Z=Ac.GetAngleBetweenInDegrees(Gu.At(o).refTarget.x,Gu.At(o).refTarget.y,Gu.At(a).refTarget.x,Gu.At(a).refTarget.y);r.isHaczykRetreating&&Du.At(a).getDisplayedAsImage().setAngle(Z-180),Du.At(o).getDisplayedAsImage().setAngle(Z);var K=tt.GetEntityByAlias("haczyk_vis");vc.Take(K,Gu.At(a).refTarget.x,Gu.At(a).refTarget.y),r.isHaczykRetreating?Du.At(K).getDisplayedAsImage().setAngle(Du.At(a).getDisplayedAsImage().angle-180):Du.At(K).getDisplayedAsImage().setAngle(Du.At(a).getDisplayedAsImage().angle)}else T&&T.isDown&&(Du.At(S).getDisplayedAsImage().alpha=0,r.levelLoopStarted=!0,Cc.session.tutState=1)}var $c=new(_createClass((function InternalModel(){_classCallCheck(this,InternalModel),this.fishingPreThread=fishingPreThread,this.fishingMainThread=fishingMainThread}))),td=function(){function ScriptLoopRoutine(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0;_classCallCheck(this,ScriptLoopRoutine),null==o&&(o=GetGUID()),this.name=o,this.func=t,this.guards=r}return _createClass(ScriptLoopRoutine,[{key:"Init",value:function Init(){}},{key:"OnRegister",value:function OnRegister(){}},{key:"GetName",value:function GetName(){return this.name}},{key:"Update",value:function Update(t){for(var r=0;r<this.guards.length;r++){if((0,this.guards[r])())return}this.func(t)}}],[{key:"Register",value:function Register(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0;P.RegisterRoutine(new ScriptLoopRoutine(t,r,o))}}]),ScriptLoopRoutine}();var ed="FishermanManifest",id="#00A1B7",nd="Fisherman",rd="Fisherman",sd=function FishermanGameCentralRegistry(){var t=Cc,r=new ht;ut.SetEngine(r);var o=r.createWorld();ut.SetWorld(o),function DoCommonGameRegisters(t){t.registerComponent(Q,"data"),t.registerComponent(Gu,"transform"),t.registerComponent(Du,"visual"),t.registerComponent(vt,"commands"),t.registerComponent(et,"bags"),t.registerComponent(Nu,"pinOthers"),t.registerComponent(ic,"interactive"),t.registerComponent($u,"toggle"),t.registerComponent(oc,"physics"),t.registerComponent(fc,fc.GetName()),dc.RegisterQuery(),hc.RegisterQuery(),Xu.RegisterQuery(),uc.RegisterQuery(),gc.RegisterQuery(),Gl.RegisterPackedAsGameCommand(),Qu.RegisterPackedAsGameCommand(),Hu.RegisterPackedAsGameCommand(),Ju.RegisterPackedAsGameCommand(),Ku.RegisterPackedAsGameCommand(),qu.RegisterPackedAsGameCommand(),ju.RegisterPackedAsGameCommand(),Zu.RegisterPackedAsGameCommand(),tc.RegisterPackedAsGameCommand(),Vu.RegisterPackedAsGameCommand(),Wu.RegisterPackedAsGameCommand()}(r),function DoCasualGameRegisters(t){gt.register("TweenCoverTitle",new ft((function(t){var r=t.entity;CmdTweenVisualByDeltaFrom(r,{y:-800,duration:1e3,onComplete:function onComplete(){CmdTweenVisualByDeltaTo(r,{y:-25,duration:1800,yoyo:!0,repeat:-1,ease:"Quadratic.In"})}})}))),gt.register("TweenPositionFromTop",new ft((function(t){CmdTweenVisualByDeltaFrom(t.entity,N({y:-700,duration:700},t))}))),gt.register("TweenPositionToTop",new ft((function(t){CmdTweenVisualByDeltaTo(t.entity,N({y:-700,duration:450},t))}))),gt.register("TweenPositionFromBottom",new ft((function(t){CmdTweenVisualByDeltaFrom(t.entity,N({y:700,duration:450},t))}))),gt.register("TweenPositionToBottom",new ft((function(t){CmdTweenVisualByDeltaTo(t.entity,N({y:700,duration:700},t))}))),gt.register("TweenPositionFromRight",new ft((function(t){CmdTweenVisualByDeltaFrom(t.entity,N({x:700,duration:450},t))}))),gt.register("TweenPositionToRight",new ft((function(t){CmdTweenVisualByDeltaTo(t.entity,N({x:700,duration:700},t))}))),gt.register("TweenAlphaTo",new ft((function(t){CmdTweenAlphaTo(t.entity,N({alpha:1,duration:500},t))})))}(),r.registerComponent(Nl,Nl.GetName()),Fu.RegisterQuery();var a=function fBlockIfGameInitializedFalse(){return 0==t.session.initialized},h=function fBlockIfLevelFalse(){return 0==t.currentLevelData.levelLoopStarted};yc.Register(),Tc.Register(),td.Register($c.fishingPreThread,[a,h]),td.Register($c.fishingMainThread,[a,function fBlockIfLevelEnded(){return 1==t.currentLevelData.levelLoopEnded},h]),zu.Register(),Bu.Register(),Ct.Register()},od=function FishermanGameStartNormal(){jc=Pl.GetSaveSlotReference(jc),Qc.Init(),Zc.session.initialized=!0,Ct.QueueDelayedFunction(null,0,(function(){return Ic.CommandRequestCover.run()})),Pl.PlayAudioFile("GameMusic",null,{loop:!0,volume:1})};var ad=function(){function EventTargetPolyfill(){_classCallCheck(this,EventTargetPolyfill),this.listeners={}}return _createClass(EventTargetPolyfill,[{key:"addEventListener",value:function addEventListener(t,r){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(r)}},{key:"removeEventListener",value:function removeEventListener(t,r){if(t in this.listeners)for(var o=this.listeners[t],a=0,h=o.length;a<h;a++)if(o[a]===r)return void o.splice(a,1)}},{key:"dispatchEvent",value:function dispatchEvent(t){if(!(t.type in this.listeners))return!0;for(var r=this.listeners[t.type].slice(),o=0,a=r.length;o<a;o++)r[o].call(this,t);return!t.defaultPrevented}}]),EventTargetPolyfill}();!function ____FPatchFixObjectAssign(){"function"!=typeof Object.assign&&(console.log("PolyfillPatch: Object.Assign"),Object.defineProperty(Object,"assign",{value:function assign(t,r){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(t),a=1;a<arguments.length;a++){var h=arguments[a];if(null!=h)for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(o[d]=h[d])}return o},writable:!0,configurable:!0}))}(),function ____FPatchFixEventTargetForIE(){window.EventTarget||(console.log("PolyfillPatch: EventTarget"),window.EventTarget=ad)}(),function ____FPatchFixObjectEntries(){Object.entries||console.log("PolyfillPatch: Object.Entries"),Object.entries=function(t){for(var r=Object.keys(t),o=r.length,a=new Array(o);o--;)a[o]=[r[o],t[r[o]]];return a}}(),function ____PolyfixObjectValues(){Object.values||(console.log("PolyfillPatch: Object.Values"),Object.values=function(t){return Object.keys(t).map((function(r){return t[r]}))})}(),function ____PolyfixFunctionName(){var t=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^\(\s\/]*)\s*/;function _name(){var r,o;return this===Function||this===Function.prototype.constructor?o="Function":this!==Function.prototype&&(o=(r=(""+this).match(t))&&r[1]),o||""}var r=!("name"in Function.prototype&&"name"in function x(){}),o="function"==typeof Object.defineProperty&&function(){var t;try{Object.defineProperty(Function.prototype,"_xyz",{get:function get(){return"blah"},configurable:!0}),t="blah"===Function.prototype._xyz,delete Function.prototype._xyz}catch(r){t=!1}return t}(),a="function"==typeof Object.prototype.__defineGetter__&&function(){var t;try{Function.prototype.__defineGetter__("_abc",(function(){return"foo"})),t="foo"===Function.prototype._abc,delete Function.prototype._abc}catch(r){t=!1}return t}();Function.prototype._name=_name,r&&(console.log("PolyfixPatch: Function.name"),o?Object.defineProperty(Function.prototype,"name",{get:function get(){var t=_name.call(this);return this!==Function.prototype&&Object.defineProperty(this,"name",{value:t,configurable:!0}),t},configurable:!0}):a&&Function.prototype.__defineGetter__("name",(function(){var t=_name.call(this);return this!==Function.prototype&&this.__defineGetter__("name",(function(){return t})),t})))}();var hd=function(t){_inherits(BlackmoonReleaseBranding,t);var r=_createSuper(BlackmoonReleaseBranding);function BlackmoonReleaseBranding(){return _classCallCheck(this,BlackmoonReleaseBranding),r.apply(this,arguments)}return _createClass(BlackmoonReleaseBranding,[{key:"getFlags",value:function getFlags(){return{disableSaveUserPrefs:0,disableSaveGameData:0,disableFakeMusicPreload:0,cordovaListenersEnabled:0,disableAutoPause:0,allowPauseAlways:0}}}]),BlackmoonReleaseBranding}(dt);dt.SetSingleton(new hd),function InitFishermanGame(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=new Ml;o.data.flagOverrides=t,o.data.gameName=nd,o.data.gameSubEngineConfig=N({dom:{createContainer:!0},title:rd,type:Phaser.AUTO,parent:"game",backgroundColor:id,scale:{width:640,height:1050,min:{width:135,height:240},max:{width:4320,height:7680},mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{debug:false}}},r),o.data.requiredScreenOrientation="portrait",GetOs().desktop&&(o.data.requiredScreenOrientation="any"),o.data.preloaderInitialsAssetsNames={manifestJson:ed,logo:"PreloaderLogo",font:"PreloaderFontObelix_63"},o.data.initialAssetPackData=a.GetRequestAsJsonFromArray([{path:"json",type:"json",files:[ed]},{path:"preloader",type:"png",files:["PreloaderLogo","EmptyPNG"]},{path:"preloader",type:"font",files:["PreloaderFontObelix_63"]}]),o.data.funcDoGameRegisters=sd,o.data.funcStartGame=od,UsePhaserSubEngine(o)}(dt.GetSingleton().getFlags(),{})}}}))}();
