!function(){var t=["id"];function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(t,i,r){var o=_superPropBase(t,i);if(o){var a=Object.getOwnPropertyDescriptor(o,i);return a.get?a.get.call(arguments.length<3?t:r):a.value}},_get.apply(this,arguments)}function _superPropBase(t,i){for(;!Object.prototype.hasOwnProperty.call(t,i)&&null!==(t=_getPrototypeOf(t)););return t}function _slicedToArray2(t,i){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,i){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var o,a,h=[],l=!0,u=!1;try{for(r=r.call(t);!(l=(o=r.next()).done)&&(h.push(o.value),!i||h.length!==i);l=!0);}catch(c){u=!0,a=c}finally{try{l||null==r.return||r.return()}finally{if(u)throw a}}return h}(t,i)||_unsupportedIterableToArray(t,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _objectWithoutProperties(t,i){if(null==t)return{};var r,o,a=function _objectWithoutPropertiesLoose(t,i){if(null==t)return{};var r,o,a={},h=Object.keys(t);for(o=0;o<h.length;o++)r=h[o],i.indexOf(r)>=0||(a[r]=t[r]);return a}(t,i);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(t);for(o=0;o<h.length;o++)r=h[o],i.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function _toConsumableArray2(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_unsupportedIterableToArray(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function ownKeys(t,i){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);i&&(o=o.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),r.push.apply(r,o)}return r}function _inherits(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),i&&_setPrototypeOf(t,i)}function _setPrototypeOf(t,i){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,i){return t.__proto__=i,t},_setPrototypeOf(t,i)}function _createSuper(t){var i=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var r,o=_getPrototypeOf(t);if(i){var a=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(t,i){if(i&&("object"===_typeof(i)||"function"==typeof i))return i;if(void 0!==i)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,i){for(var r=0;r<i.length;r++){var o=i[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,i,r){return i&&_defineProperties(t.prototype,i),r&&_defineProperties(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function _defineProperty(t,i,r){return i in t?Object.defineProperty(t,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[i]=r,t}function _createForOfIteratorHelper(t,i){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_unsupportedIterableToArray(t))||i&&t&&"number"==typeof t.length){r&&(t=r);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var h,l=!0,u=!1;return{s:function s(){r=r.call(t)},n:function n(){var t=r.next();return l=t.done,t},e:function e(t){u=!0,h=t},f:function f(){try{l||null==r.return||r.return()}finally{if(u)throw h}}}}function _unsupportedIterableToArray(t,i){if(t){if("string"==typeof t)return _arrayLikeToArray(t,i);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,i):void 0}}function _arrayLikeToArray(t,i){(null==i||i>t.length)&&(i=t.length);for(var r=0,o=new Array(i);r<i;r++)o[r]=t[r];return o}System.register([],(function(){"use strict";return{execute:function execute(){var i,r=function(){function Component(){_classCallCheck(this,Component),null==this._cbit&&console.warn("COMPONENT NOT REGISTERED")}return _createClass(Component,[{key:"world",get:function get(){return this.entity.world}},{key:"allowMultiple",get:function get(){return this.constructor.allowMultiple}},{key:"keyProperty",get:function get(){return this.constructor.keyProperty}},{key:"destroy",value:function destroy(){this.entity.remove(this)}},{key:"_onDestroyed",value:function _onDestroyed(){this.onDestroyed(),delete this.entity}},{key:"_onEvent",value:function _onEvent(t){this.onEvent(t),"function"==typeof this[t.handlerName]&&this[t.handlerName](t)}},{key:"_onAttached",value:function _onAttached(t){this.entity=t,this.onAttached(t)}},{key:"serialize",value:function serialize(){var t={};for(var i in this.constructor.properties)t[i]=this[i];return JSON.parse(JSON.stringify(t))}},{key:"onAttached",value:function onAttached(t){}},{key:"onDestroyed",value:function onDestroyed(){}},{key:"onEvent",value:function onEvent(t){}}]),Component}();_defineProperty(r,"allowMultiple",!1),_defineProperty(r,"keyProperty",null),_defineProperty(r,"properties",{});var o="undefined"!=typeof global&&(global.crypto||global.msCrypto);if(o&&o.getRandomValues){var a=new Uint8Array(16);i=function whatwgRNG(){return o.getRandomValues(a),a}}if(!i){var h=new Array(16);i=function rng(){for(var t,i=0;i<16;i++)0==(3&i)&&(t=4294967296*Math.random()),h[i]=t>>>((3&i)<<3)&255;return h}}for(var l=[],u=0;u<256;++u)l[u]=(u+256).toString(16).substr(1);function v4(t,r,o){var a=r&&o||0;"string"==typeof t&&(r="binary"==t?new Array(16):null,t=null);var h=(t=t||{}).random||(t.rng||i)();if(h[6]=15&h[6]|64,h[8]=63&h[8]|128,r)for(var u=0;u<16;++u)r[a+u]=h[u];return r||function bytesToUuid(t,i){var r=i||0,o=l;return o[t[r++]]+o[t[r++]]+o[t[r++]]+o[t[r++]]+"-"+o[t[r++]]+o[t[r++]]+"-"+o[t[r++]]+o[t[r++]]+"-"+o[t[r++]]+o[t[r++]]+"-"+o[t[r++]]+o[t[r++]]+o[t[r++]]+o[t[r++]]+o[t[r++]]+o[t[r++]]}(h)}function GetGUID(){return v4()}function CoreDataAt(t){return t.coreData}var c=function(t){_inherits(CoreData,t);var i=_createSuper(CoreData);function CoreData(t){var r;_classCallCheck(this,CoreData),(r=i.call(this,null)).gameStateName=null;var o=JSON.parse(JSON.stringify(r.constructor.properties));return Object.assign(_assertThisInitialized(r),o,t),r}return _createClass(CoreData,null,[{key:"properties",get:function get(){return{}}}]),CoreData}(r);function clone(t){return Array.isArray(t)?t.slice():t instanceof Object?Object.assign({},t):t}function forEach(t,i){return Array.isArray(t)?forEachOfArray(t,i):function forOwnOfNonArray(t,i){return forEachOfArray(function keysOfNonArray(t){return t?Object.getOwnPropertyNames(t):[]}(t),(function(r){return i(t[r],r)})),t}(t,i),t}function forEachOfArray(t,i){for(var r=0,o=t.length;r<o&&!1!==i(t[r],r);++r);}var d={},p=function camelString(t){var i=d[t];return i||(d[t]=function camelCase$1(t){return function words$1(t){var i;return null!==(i=t.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/(\d)([A-Za-z])/g,"$1 $2").replace(/([A-Za-z])(\d)/g,"$1 $2").replace(/\b([A-Z]+)([A-Z])([a-z])/,"$1 $2$3").match(/[A-Za-z0-9]+/g))&&void 0!==i?i:[]}(t).map((function(t,i){return i?function capitalize$1(t){return function upperFirst(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""}(t.toLowerCase())}(t):t.toLowerCase()})).join("")}(t),d[t])},g=function(){function EntityEvent(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,EntityEvent),_defineProperty(this,"data",{}),_defineProperty(this,"prevented",!1),_defineProperty(this,"handled",!1),this.name=t,this.data=i,this.handlerName=p("on ".concat(this.name))}return _createClass(EntityEvent,[{key:"is",value:function is(t){return this.name===t}},{key:"handle",value:function handle(){this.handled=!0,this.prevented=!0}},{key:"prevent",value:function prevent(){this.prevented=!0}}]),EntityEvent}(),v=0,m=function subtractBit(t,i){return t&~(1<<i)},y=function addBit(t,i){return t|1<<i},T=function bitIntersection(t,i){return t&i},S=function serializeComponent(t){return t.serialize()},w=function serializeComponentArray(t){return t.map(S)},b=function serializeComponentKeyed(t){var i={};for(var r in t)i[r]=S(t[r]);return i},C=function(){function Entity(t,i){_classCallCheck(this,Entity),_defineProperty(this,"_cbits",function GetBitZero(){return v}()),_defineProperty(this,"_qeligible",!0),this.world=t,this.id=i,this.components={},this.isDestroyed=!1}return _createClass(Entity,[{key:"_candidacy",value:function _candidacy(){this._qeligible&&this.world._candidate(this)}},{key:"add",value:function add(t,i){var r=new t(i);r.keyProperty?function attachComponentKeyed(t,i){var r=i._ckey;t.components[r]||(t[r]={},t.components[r]={}),t[r][i[i.keyProperty]]=i,t.components[r][i[i.keyProperty]]=i}(this,r):r.allowMultiple?function attachComponentArray(t,i){var r=i._ckey;t.components[r]||(t[r]=[],t.components[r]=[]),t[r].push(i),t.components[r].push(i)}(this,r):function attachComponent(t,i){var r=i._ckey;t[r]=i,t.components[r]=i}(this,r),this._cbits=y(this._cbits,r._cbit),r._onAttached(this),this._candidacy()}},{key:"has",value:function has(t){return function hasBit(t,i){return(t>>i)%2!==v}(this._cbits,t.prototype._cbit)}},{key:"remove",value:function remove(t){t.keyProperty?function removeComponentKeyed(t,i){var r=i._ckey,o=i[i.keyProperty];delete t[r][o],delete t.components[r][o],Object.keys(t[r]).length<=0&&(t._cbits=m(t._cbits,i._cbit),t._candidacy(),delete t.components[r],delete t[r])}(this,t):t.allowMultiple?function removeComponentArray(t,i){var r=i._ckey,o=t[r].indexOf(i);t[r].splice(o,1),t.components[r].splice(o,1),t[r].length<=0&&(t._cbits=m(t._cbits,i._cbit),t._candidacy(),delete t.components[r],delete t[r])}(this,t):function removeComponent(t,i){var r=i._ckey;t._cbits=m(t._cbits,i._cbit),t._candidacy(),delete t.components[r],delete t[r]}(this,t),t._onDestroyed()}},{key:"destroy",value:function destroy(){for(var t in this.components){var i=this.components[t];if(i instanceof r)this._cbits=m(this._cbits,i._cbit);else if(i instanceof Array){var o,a=_createForOfIteratorHelper(i);try{for(a.s();!(o=a.n()).done;){var h=o.value;this._cbits=m(this._cbits,h._cbit)}}catch(S){a.e(S)}finally{a.f()}}else for(var l=0,u=Object.values(i);l<u.length;l++){var c=u[l];this._cbits=m(this._cbits,c._cbit)}}for(var d in this._candidacy(),this.components){var p=this.components[d];if(p instanceof r)p._onDestroyed();else if(p instanceof Array){var g,v=_createForOfIteratorHelper(p);try{for(v.s();!(g=v.n()).done;){g.value._onDestroyed()}}catch(S){v.e(S)}finally{v.f()}}else for(var y=0,T=Object.values(p);y<T.length;y++){T[y]._onDestroyed()}delete this[d],delete this.components[d]}this.world._destroyed(this.id),this.components={},this.isDestroyed=!0}},{key:"serialize",value:function serialize(){var t={};for(var i in this.components){var o=this.components[i];t[i]=o instanceof r?S(o):o instanceof Array?w(o):b(o)}return function _objectSpread(t){for(var i=1;i<arguments.length;i++){var r=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(r),!0).forEach((function(i){_defineProperty(t,i,r[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))}))}return t}({id:this.id},t)}},{key:"clone",value:function clone(){return this.world.cloneEntity(this)}},{key:"fireEvent",value:function fireEvent(t,i){var o=new g(t,i);for(var a in this.components){var h=this.components[a];if(h instanceof r){if(h._onEvent(o),o.prevented)return o}else if(h instanceof Array){for(var l=0;l<h.length;l++)if(h[l]._onEvent(o),o.prevented)return o}else for(var u=0,c=Object.values(h);u<c.length;u++){if(c[u]._onEvent(o),o.prevented)return o}}return o}}]),Entity}(),A=function(){function ComponentRegistry(){_classCallCheck(this,ComponentRegistry),_defineProperty(this,"_cbit",0),_defineProperty(this,"_map",{})}return _createClass(ComponentRegistry,[{key:"register",value:function register(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i=p(t.name),null!=r&&(i=r),t.prototype._ckey=i,t.prototype._cbit=++this._cbit,this._map[i]=t}},{key:"get",value:function get(t){return this._map[t]}}]),ComponentRegistry}(),E=function merge(t){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];for(var a=0,h=r;a<h.length;a++){var l=h[a];forEach(l,(function(i,r){var o=t[r];o instanceof Object&&(i=merge(clone(o),i)),t[r]=i}))}return t},M=function(){function PrefabComponent(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];_classCallCheck(this,PrefabComponent),this.clazz=t,this.properties=i,this.overwrite=r}return _createClass(PrefabComponent,[{key:"applyToEntity",value:function applyToEntity(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.clazz.allowMultiple&&t.has(this.clazz)){if(!this.overwrite)return;var r=t[this.clazz.prototype._ckey];t.remove(r)}var o=E(this.properties,i);t.add(this.clazz,o)}}]),PrefabComponent}(),_=function(){function Prefab(t){_classCallCheck(this,Prefab),_defineProperty(this,"name",""),_defineProperty(this,"inherit",[]),_defineProperty(this,"components",[]),this.name=t}return _createClass(Prefab,[{key:"addComponent",value:function addComponent(t){this.components.push(t)}},{key:"applyToEntity",value:function applyToEntity(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.inherit.forEach((function(r){r.applyToEntity(t,i)}));var r={};return this.components.forEach((function(o){var a=o.clazz,h=a.prototype._ckey,l={};if(a.allowMultiple)if(a.keyProperty){var u=o.properties[a.keyProperty];i[h]&&i[h][u]&&(l=i[h][u])}else r[h]||(r[h]=0),i[h]&&i[h][r[h]]&&(l=i[h][r[h]]),r[h]++;else l=i[h];o.applyToEntity(t,l)})),t}}]),Prefab}(),R=function(){function PrefabRegistry(t){_classCallCheck(this,PrefabRegistry),_defineProperty(this,"_prefabs",{}),_defineProperty(this,"_engine",null),this._engine=t}return _createClass(PrefabRegistry,[{key:"deserialize",value:function deserialize(t){var i=this,r=this.get(t.name);if(r)return r;var o,a=new _(t.name);return o=Array.isArray(t.inherit)?t.inherit:"string"==typeof t.inherit?[t.inherit]:[],a.inherit=o.map((function(r){var o=i.get(r);return o||(console.warn('Prefab "'.concat(t.name,'" cannot inherit from Prefab "').concat(r,'" because is not registered yet! Prefabs must be registered in the right order.')),r)})),(t.components||[]).forEach((function(r){var o="unknown";if("string"==typeof r){o=r;var h=p(r),l=i._engine._components.get(h);if(l)return void a.addComponent(new M(l))}if("object"===_typeof(r)){o=r.type||"unknown";var u=p(r.type),c=i._engine._components.get(u);if(c)return void a.addComponent(new M(c,r.properties,r.overwrite))}console.warn('Unrecognized component reference "'.concat(o,'" in prefab "').concat(t.name,'". Ensure the component is registered before the prefab.'),r)})),a}},{key:"register",value:function register(t){var i=this.deserialize(t);this._prefabs[i.name]=i}},{key:"get",value:function get(t){return this._prefabs[t]}},{key:"create",value:function create(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.get(i);if(o){var a=t.createEntity();return a._qeligible=!1,o.applyToEntity(a,r),a._qeligible=!0,a._candidacy(),a}console.warn('Could not instantiate prefab "'.concat(i,'" since it is not registered'))}}]),PrefabRegistry}(),P=function(){function Query(t,i){_classCallCheck(this,Query),_defineProperty(this,"_cache",[]),_defineProperty(this,"_onAddListeners",[]),_defineProperty(this,"_onRemoveListeners",[]),_defineProperty(this,"_immutableResult",!0),this._world=t;var r=i.any||[],o=i.all||[],a=i.none||[];this._any=r.reduce((function(t,i){return y(t,i.prototype._cbit)}),v),this._all=o.reduce((function(t,i){return y(t,i.prototype._cbit)}),v),this._none=a.reduce((function(t,i){return y(t,i.prototype._cbit)}),v),this._immutableResult=null==i.immutableResult||i.immutableResult,this.refresh()}return _createClass(Query,[{key:"onEntityAdded",value:function onEntityAdded(t){this._onAddListeners.push(t)}},{key:"onEntityRemoved",value:function onEntityRemoved(t){this._onRemoveListeners.push(t)}},{key:"has",value:function has(t){return this.idx(t)>=0}},{key:"idx",value:function idx(t){return this._cache.indexOf(t)}},{key:"matches",value:function matches(t){var i=t._cbits,r=this._any===v||T(i,this._any)>0,o=T(i,this._all)===this._all,a=T(i,this._none)===v;return r&&o&&a}},{key:"candidate",value:function candidate(t){var i=this.idx(t),r=i>=0;return!t.isDestroyed&&this.matches(t)?(r||(this._cache.push(t),this._onAddListeners.forEach((function(i){return i(t)}))),!0):(r&&(this._cache.splice(i,1),this._onRemoveListeners.forEach((function(i){return i(t)}))),!1)}},{key:"refresh",value:function refresh(){var t=this;this._cache=[],this._world._entities.forEach((function(i){t.candidate(i)}))}},{key:"get",value:function get(){return this._immutableResult?_toConsumableArray2(this._cache):this._cache}}]),Query}(),k=function(){function World(t){_classCallCheck(this,World),_defineProperty(this,"_id",0),_defineProperty(this,"_queries",[]),_defineProperty(this,"_entities",new Map),this.engine=t}return _createClass(World,[{key:"createId",value:function createId(){return++this._id+Math.random().toString(36).substr(2,9)}},{key:"getEntity",value:function getEntity(t){return this._entities.get(t)}},{key:"getEntities",value:function getEntities(){return this._entities.values()}},{key:"createEntity",value:function createEntity(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.createId(),i=new C(this,t);return this._entities.set(t,i),i}},{key:"destroyEntity",value:function destroyEntity(t){var i=this.getEntity(t);i&&i.destroy()}},{key:"destroyEntities",value:function destroyEntities(){this._entities.forEach((function(t){t.destroy()}))}},{key:"destroy",value:function destroy(){this.destroyEntities(),this._id=0,this._queries=[],this._entities=new Map}},{key:"createQuery",value:function createQuery(t){var i=new P(this,t);return this._queries.push(i),i}},{key:"createPrefab",value:function createPrefab(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.engine._prefabs.create(this,t,i)}},{key:"serialize",value:function serialize(t){var i=[];return(t||this._entities).forEach((function(t){i.push(t.serialize())})),{entities:i}}},{key:"cloneEntity",value:function cloneEntity(t){var i=t.serialize();return i.id=this.createId(),this._deserializeEntity(i)}},{key:"deserialize",value:function deserialize(t){var i,r=_createForOfIteratorHelper(t.entities);try{for(r.s();!(i=r.n()).done;){var o=i.value;this._createOrGetEntityById(o.id)}}catch(u){r.e(u)}finally{r.f()}var a,h=_createForOfIteratorHelper(t.entities);try{for(h.s();!(a=h.n()).done;){var l=a.value;this._deserializeEntity(l)}}catch(u){h.e(u)}finally{h.f()}}},{key:"_createOrGetEntityById",value:function _createOrGetEntityById(t){return this.getEntity(t)||this.createEntity(t)}},{key:"_deserializeEntity",value:function _deserializeEntity(i){var r=this,o=i.id,a=_objectWithoutProperties(i,t),h=this._createOrGetEntityById(o);return h._qeligible=!1,Object.entries(a).forEach((function(t){var i=_slicedToArray2(t,2),o=i[0],a=i[1],l=p(o),u=r.engine._components.get(l);u.allowMultiple?Object.values(a).forEach((function(t){h.add(u,t)})):h.add(u,a)})),h._qeligible=!0,h._candidacy(),h}},{key:"_candidate",value:function _candidate(t){this._queries.forEach((function(i){return i.candidate(t)}))}},{key:"_destroyed",value:function _destroyed(t){return this._entities.delete(t)}}]),World}(),O=function(){function Engine(){_classCallCheck(this,Engine),_defineProperty(this,"_components",new A),_defineProperty(this,"_prefabs",new R(this))}return _createClass(Engine,[{key:"registerComponent",value:function registerComponent(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._components.register(t,i)}},{key:"registerPrefab",value:function registerPrefab(t){this._prefabs.register(t)}},{key:"createWorld",value:function createWorld(){return new k(this)}},{key:"destroyWorld",value:function destroyWorld(t){t.destroy()}}]),Engine}(),L=new(_createClass((function InternalDataClass$3(){_classCallCheck(this,InternalDataClass$3),this.engine=null,this.world=null}))),D=function(){function GeoticManager(){_classCallCheck(this,GeoticManager)}return _createClass(GeoticManager,null,[{key:"SetEngine",value:function SetEngine(t){L.engine=t}},{key:"SetWorld",value:function SetWorld(t){L.world=t}},{key:"GetWorld",value:function GetWorld(){return L.world}},{key:"CreateEntity",value:function CreateEntity(t){console.assert(t,"GameState: ",t),t.name&&(t=t.name);var i=L.world.createEntity();return i.add(c),CoreDataAt(i).gameStateName=t,$.AddBagList(i,["ALL"]),$.AddBagList(i,[t]),i}},{key:"InstantActorDestroy",value:function InstantActorDestroy(t){t.isDestroyed||t.destroy()}}]),GeoticManager}(),I=function(){function DataHolder(){_classCallCheck(this,DataHolder),this.data={},this.keyList=[]}return _createClass(DataHolder,[{key:"register",value:function register(t,i){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.data[t]&&0==r&&console.warn(t," ALREADY EXIST IN DATA HOLDER"),this.data[t]=i,this.keyList.indexOf(t)<=-1&&this.keyList.push(t),i}},{key:"hasKey",value:function hasKey(t){return!!this.data[t]}},{key:"getData",value:function getData(t){return console.assert(this.data[t],t," not in: ",this.data),this.data[t]}},{key:"getKeyList",value:function getKeyList(){return this.keyList}}]),DataHolder}(),B=function(t){_inherits(ExtendedDataHolder$1,t);var i=_createSuper(ExtendedDataHolder$1);function ExtendedDataHolder$1(){return _classCallCheck(this,ExtendedDataHolder$1),i.apply(this,arguments)}return _createClass(ExtendedDataHolder$1,[{key:"register",value:function register(t,i){return _get(_getPrototypeOf(ExtendedDataHolder$1.prototype),"register",this).call(this,t,i),i}},{key:"getData",value:function getData(t){return _get(_getPrototypeOf(ExtendedDataHolder$1.prototype),"getData",this).call(this,t)}}]),ExtendedDataHolder$1}(I),N=new B,G=function(){function GameCommand(t){_classCallCheck(this,GameCommand),this._func=t}return _createClass(GameCommand,[{key:"run",value:function run(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._func(t)}}]),GameCommand}(),Y=function(t){_inherits(ExtendedDataHolder,t);var i=_createSuper(ExtendedDataHolder);function ExtendedDataHolder(){return _classCallCheck(this,ExtendedDataHolder),i.apply(this,arguments)}return _createClass(ExtendedDataHolder,[{key:"register",value:function register(t,i){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _get(_getPrototypeOf(ExtendedDataHolder.prototype),"register",this).call(this,t,i,r),i}},{key:"getData",value:function getData(t){return _get(_getPrototypeOf(ExtendedDataHolder.prototype),"getData",this).call(this,t)}},{key:"runCommand",value:function runCommand(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.getData(t).run(i)}},{key:"runCommandObj",value:function runCommandObj(t){this.runCommand(t.key,t)}}]),ExtendedDataHolder}(I),U=new Y;function CommandsAt(t){return t.commands}var X=function(){function OperateOnCommands(){_classCallCheck(this,OperateOnCommands)}return _createClass(OperateOnCommands,null,[{key:"RunCommandAtTriggerKey",value:function RunCommandAtTriggerKey(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(t.has(V)&&null!=CommandsAt(t).byTriggers[i]){var o=CommandsAt(t).byTriggers[i];if(U.hasKey(o.key)){var a={entity:t};o.payload&&E(a,o.payload),o.pOptPayload&&E(a,r),U.runCommand(o.key,a)}else console.warn("GameCommandsRegistry no defined command: ",o.key)}}}]),OperateOnCommands}(),V=function(t){_inherits(Commands,t);var i=_createSuper(Commands);function Commands(t){var r;_classCallCheck(this,Commands),(r=i.call(this,null)).byTriggers={};var o=JSON.parse(JSON.stringify(r.constructor.properties));return Object.assign(_assertThisInitialized(r),o,t),r}return _createClass(Commands,null,[{key:"properties",get:function get(){return{}}}]),Commands}(r),z=function(){function BuilderCommands(){_classCallCheck(this,BuilderCommands)}return _createClass(BuilderCommands,null,[{key:"GetInitialData",value:function GetInitialData(t){return{byTriggers:t}}}]),BuilderCommands}(),W="quit",H="exit",j="enterFresh",q=function(){function GameState(t){_classCallCheck(this,GameState),this.name=t,this.state="null",this.curQuitDelay=0,this.onEnter=function(){},this.onExit=function(){},this.onQuit=function(){},N.register(this.name,this)}return _createClass(GameState,[{key:"enterFresh",value:function enterFresh(){this.state!=W&&"null"!=this.state&&(this.state!=H&&this.exit(),this.quit()),this.state=j,this.onEnter()}},{key:"exit",value:function exit(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;if(this.delayedFunctionDict={},this.state!=H&&this.state!=W&&"null"!=this.state){this.curQuitDelay=t,this.state=H,this.onExit();var i=Q.GetBagActorsReferenceList(this.name);for(var r in i){var o=i[r];X.RunCommandAtTriggerKey(o,"exit")}}}},{key:"quit",value:function quit(){this.delayedFunctionDict={},this.state!=W&&"null"!=this.state&&(this.state=W,Q.QueueDisposeActorsInBag(this.name),this.onQuit())}},{key:"continue",value:function _continue(){this.state==H&&this.quit(),this.state!=j&&this.enterFresh()}},{key:"isRunning",value:function isRunning(){return this.state==j}},{key:"updateDelayedQuit",value:function updateDelayedQuit(t){this.state==H&&(this.curQuitDelay-=t,this.curQuitDelay<0&&this.quit())}}]),GameState}(),K={entityDisposeBuffer:[],delayedFunctionDict:{},delayedFunctionDeleteKeysList:[],active:!0};var Z=function(){function EndOfLoopRoutine(){_classCallCheck(this,EndOfLoopRoutine)}return _createClass(EndOfLoopRoutine,null,[{key:"GetName",value:function GetName(){return"EndOfLoopRoutine"}},{key:"Init",value:function Init(){}},{key:"QueueActorToDisposeBuffer",value:function QueueActorToDisposeBuffer(t){t&&(t.isDestroyed||K.entityDisposeBuffer.indexOf(t)>-1||K.entityDisposeBuffer.push(t))}},{key:"QueueDelayedFunction",value:function QueueDelayedFunction(t,i,r){return null==t&&(t=GetGUID()),K.delayedFunctionDict[t]={tag:t,delay:i,func:r},t}},{key:"Update",value:function Update(t){var i=N.getKeyList();for(var r in i){var o=i[r];N.getData(o).updateDelayedQuit(t)}for(var a in K.delayedFunctionDict){var h=K.delayedFunctionDict[a];h.delay-=t,h.delay<=0&&(K.delayedFunctionDeleteKeysList.push(a),h.func())}for(var l=K.delayedFunctionDeleteKeysList.length-1;l>=0;l--){var u=K.delayedFunctionDeleteKeysList[l];delete K.delayedFunctionDict[u],K.delayedFunctionDeleteKeysList.splice(l,1)}K.entityDisposeBuffer.length>0&&function _FlushDisposeBuffer(){var t=K.entityDisposeBuffer;K.entityDisposeBuffer=[];for(var i=t.length-1;i>=0;i--){var r=t[i];D.InstantActorDestroy(r)}}()}}]),EndOfLoopRoutine}(),J=new(_createClass((function InternalDataClass$2(){_classCallCheck(this,InternalDataClass$2),this.bags={},this.entitiesByAlias={}}))),Q=function(){function EntityKeeper(){_classCallCheck(this,EntityKeeper)}return _createClass(EntityKeeper,null,[{key:"PutActorIntoHisBags",value:function PutActorIntoHisBags(t){var i=BagsAt(t);for(var r in i.keys)J.bags[r]||(J.bags[r]=[]),J.bags[r].indexOf(t)<=-1&&J.bags[r].push(t);i.alias&&(J.entitiesByAlias[i.alias]&&J.entitiesByAlias[i.alias],J.entitiesByAlias[i.alias]=t)}},{key:"RemoveActorFromAllHisBags",value:function RemoveActorFromAllHisBags(t){var i=BagsAt(t);for(var r in i.keys){J.bags[r]||(J.bags[r]=[]);var o=J.bags[r].indexOf(t);o>=0&&J.bags[r].splice(o,1)}i.alias&&J.entitiesByAlias[i.alias]&&J.entitiesByAlias[i.alias]==t&&delete J.entitiesByAlias[i.alias]}},{key:"QueueDisposeActorsInBag",value:function QueueDisposeActorsInBag(t){for(var i=J.bags[t],r=i.length-1;r>=0;r--)Z.QueueActorToDisposeBuffer(i[r])}},{key:"GetBagActorsReferenceList",value:function GetBagActorsReferenceList(t){return J.bags[t]||(J.bags[t]=[]),J.bags[t]}},{key:"GetEntityByAlias",value:function GetEntityByAlias(t){return J.entitiesByAlias[t]}},{key:"GetEntityByID",value:function GetEntityByID(t){return D.GetWorld().getEntity(t)}},{key:"DumpLog",value:function DumpLog(){console.log(J)}},{key:"DumpLogLengthALL",value:function DumpLogLengthALL(){console.log(J.bags.ALL.length)}}]),EntityKeeper}();function BagsAt(t){return t.bags}var $=function(){function OperateOnBags(){_classCallCheck(this,OperateOnBags)}return _createClass(OperateOnBags,null,[{key:"AddBagList",value:function AddBagList(t,i){var r={};for(var o in i){r[i[o]]=!0}if(t.has(tt)){var a=BagsAt(t);E(a.keys,r),Q.PutActorIntoHisBags(t)}else t.add(tt,et.GetInitialData(r))}},{key:"SetAlias",value:function SetAlias(t,i){BagsAt(t).alias=i,Q.PutActorIntoHisBags(t)}}]),OperateOnBags}(),tt=function(t){_inherits(Bags,t);var i=_createSuper(Bags);function Bags(t){var r;_classCallCheck(this,Bags),(r=i.call(this,null)).keys={},r.alias=null;var o=JSON.parse(JSON.stringify(r.constructor.properties));return Object.assign(_assertThisInitialized(r),o,t),r}return _createClass(Bags,[{key:"onAttached",value:function onAttached(t){Q.PutActorIntoHisBags(t)}},{key:"onDestroyed",value:function onDestroyed(){Q.RemoveActorFromAllHisBags(this.entity)}}],[{key:"properties",get:function get(){return{}}}]),Bags}(r),et=function(){function PrivateBuilder(){_classCallCheck(this,PrivateBuilder)}return _createClass(PrivateBuilder,null,[{key:"GetInitialData",value:function GetInitialData(t){return{keys:t}}}]),PrivateBuilder}(),it=function(t){_inherits(DataComponent,t);var i=_createSuper(DataComponent);function DataComponent(t){var r;_classCallCheck(this,DataComponent),r=i.call(this,null);var o=JSON.parse(JSON.stringify(r.constructor.properties));return Object.assign(_assertThisInitialized(r),o,t),r}return _createClass(DataComponent,null,[{key:"At",value:function At(t){return t.data}},{key:"properties",get:function get(){return{}}},{key:"AddToEntityWithProperties",value:function AddToEntityWithProperties(t,i){return t.has(DataComponent)||t.add(DataComponent,{}),E(DataComponent.At(t),i),DataComponent.At(t)}}]),DataComponent}(r);function isNil(t){return null==t}function coerceToBoolean(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return isNil(t)?i:Boolean(t)}function isString(t){return"string"==typeof t}function coerceToString(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return isNil(t)?i:isString(t)?t:String(t)}function capitalize(t,i){var r=coerceToString(t),o=coerceToBoolean(i);return""===r?"":(o&&(r=r.toLowerCase()),r.substr(0,1).toUpperCase()+r.substr(1))}function lowerCase(t){return coerceToString(t,"").toLowerCase()}var nt="\\s\\uFEFF\\xA0",rt="\\u0300-\\u036F\\u1AB0-\\u1AFF\\u1DC0-\\u1DFF\\u20D0-\\u20FF\\uFE20-\\uFE2F",st="\\0-\\u02FF\\u0370-\\u1AAF\\u1B00-\\u1DBF\\u1E00-\\u20CF\\u2100-\\uD7FF\\uE000-\\uFE1F\\uFE30-\\uFFFF",ot=new RegExp("(["+st+"]|["+"\\uD800-\\uDBFF]["+"\\uDC00-\\uDFFF]|["+"\\uD800-\\uDBFF](?!["+"\\uDC00-\\uDFFF])|(?:[^"+"\\uD800-\\uDBFF]|^)["+"\\uDC00-\\uDFFF])(["+rt+"]+)","g"),at=new RegExp("([\\uD800-\\uDBFF])([\\uDC00-\\uDFFF])","g"),ht=new RegExp("((?:["+st+"]|["+"\\uD800-\\uDBFF]["+"\\uDC00-\\uDFFF]|["+"\\uD800-\\uDBFF](?!["+"\\uDC00-\\uDFFF])|(?:[^"+"\\uD800-\\uDBFF]|^)["+"\\uDC00-\\uDFFF])(?:["+rt+"]+))|(["+"\\uD800-\\uDBFF]["+"\\uDC00-\\uDFFF])|([\\n\\r\\u2028\\u2029])|(.)","g"),lt=new RegExp("[\\s\\uFEFF\\xA0]"),ut=new RegExp("^[\\s\\uFEFF\\xA0]+"),ct=new RegExp("[\\s\\uFEFF\\xA0]+$"),dt=new RegExp("^\\d+$"),ft=/[-[\]{}()*+!<=:?./\\^$|#,]/g,pt=/[^A-Za-z0-9]/g,gt=/[<>&"'`]/g,vt=/(%{1,2})(?:(\d+)\$)?(\+)?([ 0]|'.{1})?(-)?(\d+)?(?:\.(\d+))?([bcdiouxXeEfgGs])?/g,mt=/\.?0+$/g,yt=/[gimuy]*$/,xt=/<([A-Za-z0-9]+)>/g,Tt="a-z\\xB5\\xDF-\\xF6\\xF8-\\xFF\\u0101\\u0103\\u0105\\u0107\\u0109\\u010B\\u010D\\u010F\\u0111\\u0113\\u0115\\u0117\\u0119\\u011B\\u011D\\u011F\\u0121\\u0123\\u0125\\u0127\\u0129\\u012B\\u012D\\u012F\\u0131\\u0133\\u0135\\u0137\\u0138\\u013A\\u013C\\u013E\\u0140\\u0142\\u0144\\u0146\\u0148\\u0149\\u014B\\u014D\\u014F\\u0151\\u0153\\u0155\\u0157\\u0159\\u015B\\u015D\\u015F\\u0161\\u0163\\u0165\\u0167\\u0169\\u016B\\u016D\\u016F\\u0171\\u0173\\u0175\\u0177\\u017A\\u017C\\u017E-\\u0180\\u0183\\u0185\\u0188\\u018C\\u018D\\u0192\\u0195\\u0199-\\u019B\\u019E\\u01A1\\u01A3\\u01A5\\u01A8\\u01AA\\u01AB\\u01AD\\u01B0\\u01B4\\u01B6\\u01B9\\u01BA\\u01BD-\\u01BF\\u01C6\\u01C9\\u01CC\\u01CE\\u01D0\\u01D2\\u01D4\\u01D6\\u01D8\\u01DA\\u01DC\\u01DD\\u01DF\\u01E1\\u01E3\\u01E5\\u01E7\\u01E9\\u01EB\\u01ED\\u01EF\\u01F0\\u01F3\\u01F5\\u01F9\\u01FB\\u01FD\\u01FF\\u0201\\u0203\\u0205\\u0207\\u0209\\u020B\\u020D\\u020F\\u0211\\u0213\\u0215\\u0217\\u0219\\u021B\\u021D\\u021F\\u0221\\u0223\\u0225\\u0227\\u0229\\u022B\\u022D\\u022F\\u0231\\u0233-\\u0239\\u023C\\u023F\\u0240\\u0242\\u0247\\u0249\\u024B\\u024D\\u024F",St="\\x41-\\x5a\\xc0-\\xd6\\xd8-\\xde\\u0100\\u0102\\u0104\\u0106\\u0108\\u010a\\u010c\\u010e\\u0110\\u0112\\u0114\\u0116\\u0118\\u011a\\u011c\\u011e\\u0120\\u0122\\u0124\\u0126\\u0128\\u012a\\u012c\\u012e\\u0130\\u0132\\u0134\\u0136\\u0139\\u013b\\u013d\\u013f\\u0141\\u0143\\u0145\\u0147\\u014a\\u014c\\u014e\\u0150\\u0152\\u0154\\u0156\\u0158\\u015a\\u015c\\u015e\\u0160\\u0162\\u0164\\u0166\\u0168\\u016a\\u016c\\u016e\\u0170\\u0172\\u0174\\u0176\\u0178\\u0179\\u017b\\u017d\\u0181\\u0182\\u0184\\u0186\\u0187\\u0189-\\u018b\\u018e-\\u0191\\u0193\\u0194\\u0196-\\u0198\\u019c\\u019d\\u019f\\u01a0\\u01a2\\u01a4\\u01a6\\u01a7\\u01a9\\u01ac\\u01ae\\u01af\\u01b1-\\u01b3\\u01b5\\u01b7\\u01b8\\u01bc\\u01c4\\u01c5\\u01c7\\u01c8\\u01ca\\u01cb\\u01cd\\u01cf\\u01d1\\u01d3\\u01d5\\u01d7\\u01d9\\u01db\\u01de\\u01e0\\u01e2\\u01e4\\u01e6\\u01e8\\u01ea\\u01ec\\u01ee\\u01f1\\u01f2\\u01f4\\u01f6-\\u01f8\\u01fa\\u01fc\\u01fe\\u0200\\u0202\\u0204\\u0206\\u0208\\u020a\\u020c\\u020e\\u0210\\u0212\\u0214\\u0216\\u0218\\u021a\\u021c\\u021e\\u0220\\u0222\\u0224\\u0226\\u0228\\u022a\\u022c\\u022e\\u0230\\u0232\\u023a\\u023b\\u023d\\u023e\\u0241\\u0243-\\u0246\\u0248\\u024a\\u024c\\u024e",wt=new RegExp("(?:["+St+"]["+rt+"]*)?(?:["+Tt+"]["+rt+"]*)+|(?:["+St+"]["+rt+"]*)+(?!["+Tt+"])|["+"\\d]+|[\\u2700-\\u27BF]|[^\\x00-\\x2F\\x3A-\\x40\\x5B-\\x60\\x7b-\\xBF\\xD7\\xF7\\u2000-\\u206F"+nt+"]+","g"),bt=/[A-Z\xC0-\xD6\xD8-\xDE]?[a-z\xDF-\xF6\xF8-\xFF]+|[A-Z\xC0-\xD6\xD8-\xDE]+(?![a-z\xDF-\xF6\xF8-\xFF])|\d+/g,Ct=new RegExp("^(?:["+Tt+St+"]["+rt+"]*)+$"),Et=new RegExp("^((?:["+Tt+St+"]["+rt+"]*)|["+"\\d])+$"),Mt=/^[\x01-\xFF]*$/;function nilDefault(t,i){return null==t?i:t}function toString(t){return isNil(t)?null:isString(t)?t:String(t)}function words(t,i,r){var o=coerceToString(t),a=void 0;if(isNil(i))a=Mt.test(o)?bt:wt;else if(i instanceof RegExp)a=i;else{var h=toString(nilDefault(r,""));a=new RegExp(toString(i),h)}return nilDefault(o.match(a),[])}function wordToCamel(t,i){return 0===i?lowerCase(t):capitalize(t,!0)}function kebabCase(t){var i=coerceToString(t);return""===i?"":words(i).map(lowerCase).join("-")}function swapAndConcat(t,i){var r=i.toLowerCase(),o=i.toUpperCase();return t+(i===r?o:r)}function clipNumber(t,i,r){return t<=i?i:t>=r?r:t}var _t=9007199254740991;function toInteger(t){return t===1/0?_t:t===-1/0?-9007199254740991:~~t}function truncate(t,i,r){var o=coerceToString(t),a=isNil(i)?o.length:clipNumber(toInteger(i),0,_t),h=coerceToString(r,"...");return a>=o.length?o:o.substr(0,i-h.length)+h}function coerceToNumber(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return isNil(t)?i:"number"==typeof t?t:Number(t)}function nanDefault(t,i){return t!=t?i:t}function codePointAt(t,i){var r=coerceToString(t),o=r.length,a=coerceToNumber(i);if(!((a=nanDefault(a,0))<0||a>=o)){var h=r.charCodeAt(a),l=void 0;return function isHighSurrogate(t){return t>=55296&&t<=56319}(h)&&o>a+1&&function isLowSurrogate(t){return t>=56320&&t<=57343}(l=r.charCodeAt(a+1))?function getAstralNumberFromSurrogatePair(t,i){return 1024*(t-55296)+i-56320+65536}(h,l):h}}var Rt=Array.prototype.reduce;function ReplacementIndex(){this.index=0}ReplacementIndex.prototype.increment=function(){this.index++},ReplacementIndex.prototype.incrementOnEmptyPosition=function(t){isNil(t)&&this.increment()},ReplacementIndex.prototype.getIndexByPosition=function(t){return isNil(t)?this.index:t-1};var Pt="G";function repeat(t,i){for(var r=coerceToString(t),o=isNil(i)?1:clipNumber(toInteger(i),0,_t),a="";o;)1&o&&(a+=r),o>1&&(r+=r),o>>=1;return a}function buildPadding(t,i){return repeat(t,toInteger(i/t.length)+i%t.length).substr(0,i)}function padLeft(t,i,r){var o=coerceToString(t),a=isNil(i)?0:clipNumber(toInteger(i),0,_t),h=coerceToString(r," ");return a<=o.length?o:buildPadding(h,a-o.length)+o}function padRight(t,i,r){var o=coerceToString(t),a=isNil(i)?0:clipNumber(toInteger(i),0,_t),h=coerceToString(r," ");return a<=o.length?o:o+buildPadding(h,a-o.length)}function addSignToFormattedNumber(t,i,r){return"+"===r.signSpecifier&&t>=0&&(i="+"+i),i}function float(t,i){var r=parseFloat(t),o=void 0;isNaN(r)&&(r=0);var a=coerceToNumber(i.precision,6);switch(i.typeSpecifier){case"f":o=r.toFixed(a);break;case"e":o=r.toExponential(a);break;case"E":o=r.toExponential(a).toUpperCase();break;case"g":case"G":o=function formatFloatAsShort(t,i,r){if(0===t)return"0";var o=0===i?1:i,a=t.toPrecision(o).replace(mt,"");r.typeSpecifier===Pt&&(a=a.toUpperCase());return a}(r,a,i)}return coerceToString(o=addSignToFormattedNumber(r,o,i))}function integerBase(t,i){var r=parseInt(t);switch(isNaN(r)&&(r=0),r>>>=0,i.typeSpecifier){case"c":r=String.fromCharCode(r);break;case"b":r=r.toString(2);break;case"o":r=r.toString(8);break;case"x":r=r.toString(16);break;case"X":r=r.toString(16).toUpperCase()}return coerceToString(r)}function integerDecimal(t,i){var r=parseInt(t);return isNaN(r)&&(r=0),addSignToFormattedNumber(r,toString(r),i)}function stringFormat(t,i){var r=t,o=i.precision;return!isNil(o)&&r.length>o&&(r=truncate(r,o,"")),r}function compute(t,i){var r=void 0;switch(i.typeSpecifier){case"s":r=stringFormat;break;case"d":case"i":r=integerDecimal;break;case"c":case"b":case"o":case"x":case"X":case"u":r=integerBase;break;case"f":case"e":case"E":case"g":case Pt:r=float}return function alignAndPad(t,i){var r=i.width;return isNil(r)||t.length>=r?t:("-"===i.alignmentSpecifier?padRight:padLeft)(t,r,i.getPaddingCharacter())}(r(t,i),i)}function ConversionSpecification(t){this.percent=t.percent,this.signSpecifier=t.signSpecifier,this.paddingSpecifier=t.paddingSpecifier,this.alignmentSpecifier=t.alignmentSpecifier,this.width=t.width,this.precision=t.precision,this.typeSpecifier=t.typeSpecifier}function match(t,i,r,o,a,h,l,u,c,d,p){var g=new ConversionSpecification({percent:o,signSpecifier:h,paddingSpecifier:l,alignmentSpecifier:u,width:coerceToNumber(c,null),precision:coerceToNumber(d,null),typeSpecifier:p});if(g.isPercentLiteral())return r.slice(1);var v=t.getIndexByPosition(a);return t.incrementOnEmptyPosition(a),function validate(t,i,r){if(isNil(r.typeSpecifier))throw new Error("sprintf(): Unknown type specifier");if(t>i-1)throw new Error("sprintf(): Too few arguments");if(t<0)throw new Error("sprintf(): Argument number must be greater than zero")}(v,i.length,g),compute(i[v],g)}function sprintf(t){var i=coerceToString(t);if(""===i)return i;for(var r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];var h=match.bind(void 0,new ReplacementIndex,o);return i.replace(vt,h)}ConversionSpecification.prototype.isPercentLiteral=function(){return"%%"===this.percent},ConversionSpecification.prototype.getPaddingCharacter=function(){var t=nilDefault(this.paddingSpecifier," ");return 2===t.length&&"'"===t[0]&&(t=t[1]),t};var kt={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};function replaceSpecialCharacter(t){return kt[t]}function escapeRegExp(t){return coerceToString(t).replace(ft,"\\$&")}var Ot={"<":/(&lt;)|(&#x0*3c;)|(&#0*60;)/gi,">":/(&gt;)|(&#x0*3e;)|(&#0*62;)/gi,"&":/(&amp;)|(&#x0*26;)|(&#0*38;)/gi,'"':/(&quot;)|(&#x0*22;)|(&#0*34;)/gi,"'":/(&#x0*27;)|(&#0*39;)/gi,"`":/(&#x0*60;)|(&#0*96;)/gi},Lt=Object.keys(Ot);function reduceUnescapedString(t,i){return t.replace(Ot[i],i)}var Dt={3:"Ξξ",8:"Θθ",A:"AÀÁÂÃÄÅĀĂĄǍǞǠǺȀȂȦȺḀẠẢẤẦẨẪẬẮẰẲẴẶⒶⱯＡΆΑА",B:"BƁƂɃḂḄḆⒷＢΒБ",C:"CÇĆĈĊČƇȻḈⒸꜾＣЦ",D:"DĎĐƉƊƋḊḌḎḐḒⒹꝹＤÐΔД",E:"EÈÉÊËĒĔĖĘĚƎƐȄȆȨḔḖḘḚḜẸẺẼẾỀỂỄỆⒺＥΈΕЕЭ",F:"FƑḞⒻꝻＦΦФ",G:"GĜĞĠĢƓǤǦǴḠⒼꝽꝾꞠＧΓГҐ",H:"HĤĦȞḢḤḦḨḪⒽⱧⱵꞍＨΉΗХ",I:"IÌÍÎÏĨĪĬĮİƗǏȈȊḬḮỈỊⒾＩΊΙΪІИ",J:"JĴɈⒿＪЙ",K:"KĶƘǨḰḲḴⓀⱩꝀꝂꝄꞢＫΚК",L:"LĹĻĽĿŁȽḶḸḺḼⓁⱠⱢꝆꝈꞀＬΛЛ",M:"MƜḾṀṂⓂⱮＭΜМ",N:"NÑŃŅŇƝǸȠṄṆṈṊⓃꞐꞤＮΝН",O:"OÒÓÔÕÖØŌŎŐƆƟƠǑǪǬǾȌȎȪȬȮȰṌṎṐṒỌỎỐỒỔỖỘỚỜỞỠỢⓄꝊꝌＯΌΟО",P:"PƤṔṖⓅⱣꝐꝒꝔＰΠП",Q:"QɊⓆꝖꝘＱ",R:"RŔŖŘȐȒɌṘṚṜṞⓇⱤꝚꞂꞦＲΡР",S:"SŚŜŞŠȘṠṢṤṦṨẞⓈⱾꞄꞨＳΣС",T:"TŢŤŦƬƮȚȾṪṬṮṰⓉꞆＴΤТ",U:"UÙÚÛÜŨŪŬŮŰŲƯǓǕǗǙǛȔȖɄṲṴṶṸṺỤỦỨỪỬỮỰⓊＵУЪ",V:"VƲɅṼṾⓋꝞＶВ",W:"WŴẀẂẄẆẈⓌⱲＷΏΩ",X:"XẊẌⓍＸΧ",Y:"YÝŶŸƳȲɎẎỲỴỶỸỾⓎＹΎΥΫЫ",Z:"ZŹŻŽƵȤẐẒẔⓏⱫⱿꝢＺΖЗ",a:"aàáâãäåāăąǎǟǡǻȁȃȧɐḁẚạảấầẩẫậắằẳẵặⓐⱥａάαа",b:"bƀƃɓḃḅḇⓑｂβб",c:"cçćĉċčƈȼḉↄⓒꜿｃц",d:"dďđƌɖɗḋḍḏḑḓⓓꝺｄðδд",e:"eèéêëēĕėęěǝȅȇȩɇɛḕḗḙḛḝẹẻẽếềểễệⓔｅέεеэ",f:"fƒḟⓕꝼｆφф",g:"gĝğġģǥǧǵɠᵹḡⓖꝿꞡｇγгґ",h:"hĥħȟɥḣḥḧḩḫẖⓗⱨⱶｈήηх",i:"iìíîïĩīĭįıǐȉȋɨḭḯỉịⓘｉΐίιϊиі",j:"jĵǰɉⓙｊй",k:"kķƙǩḱḳḵⓚⱪꝁꝃꝅꞣｋκк",l:"lĺļľŀłſƚɫḷḹḻḽⓛⱡꝇꝉꞁｌλл",m:"mɯɱḿṁṃⓜｍμм",n:"nñńņňŉƞǹɲṅṇṉṋⓝꞑꞥｎνн",o:"oòóôõöøōŏőơǒǫǭǿȍȏȫȭȯȱɔɵṍṏṑṓọỏốồổỗộớờởỡợⓞꝋꝍｏοόо",p:"pƥᵽṕṗⓟꝑꝓꝕｐπп",q:"qɋⓠꝗꝙｑ",r:"rŕŗřȑȓɍɽṙṛṝṟⓡꝛꞃꞧｒρр",s:"sßśŝşšșȿṡṣṥṧṩẛⓢꞅꞩｓςσс",t:"tţťŧƭțʈṫṭṯṱẗⓣⱦꞇｔτт",u:"uùúûüũūŭůűųưǔǖǘǚǜȕȗʉṳṵṷṹṻụủứừửữựⓤｕуъ",v:"vʋʌṽṿⓥꝟｖв",w:"wŵẁẃẅẇẉẘⓦⱳｗωώ",x:"xẋẍⓧｘχ",y:"yýÿŷƴȳɏẏẙỳỵỷỹỿⓨｙΰυϋύы",z:"zźżžƶȥɀẑẓẕⓩⱬꝣｚζз",OE:"Œ",oe:"œ",AE:"ÆǢǼ",ae:"æǣǽ",hv:"ƕ",OI:"Ƣ",oi:"ƣ",DZ:"ǄǱ",Dz:"ǅǲ",dz:"ǆǳ",LJ:"Ǉ",Lj:"ǈ",lj:"ǉ",NJ:"Ǌ",Nj:"ǋ",nj:"ǌ",OU:"Ȣ",ou:"ȣ",TZ:"Ꜩ",tz:"ꜩ",AA:"Ꜳ",aa:"ꜳ",AO:"Ꜵ",ao:"ꜵ",AU:"Ꜷ",au:"ꜷ",AV:"ꜸꜺ",av:"ꜹꜻ",AY:"Ꜽ",ay:"ꜽ",OO:"Ꝏ",oo:"ꝏ",VY:"Ꝡ",vy:"ꝡ",TH:"Þ",th:"þ",PS:"Ψ",ps:"ψ",Yo:"Ё",Ye:"Є",Yi:"Ї",Zh:"Ж",Ch:"Ч",Sh:"ШЩ","":"Ьь",Yu:"Ю",Ya:"Я",zh:"ж",ch:"ч",sh:"шщ",yu:"ю",ya:"я",yo:"ё",ye:"є",yi:"ї"},It=null;function getLatinCharacter(t){var i=function getDiacriticsMap(){return null!==It||(It={},Object.keys(Dt).forEach((function(t){for(var i=Dt[t],r=0;r<i.length;r++){var o=i[r];It[o]=t}}))),It}()[t];return i||t}function removeCombiningMarks(t,i){return i}function latinise(t){var i=coerceToString(t);return""===i?"":i.replace(pt,getLatinCharacter).replace(ot,removeCombiningMarks)}function includes(t,i,r){var o=coerceToString(t),a=toString(i);return null!==a&&(""===a||(r=isNil(r)?0:clipNumber(toInteger(r),0,o.length),-1!==o.indexOf(a,r)))}function appendFlagToRegExp(t,i){var r=function getRegExpFlags(t){return t.toString().match(yt)[0]}(t);return includes(r,i)?t:new RegExp(t.source,r+i)}var _slicedToArray=function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function sliceIterator(t,i){var r=[],o=!0,a=!1,h=void 0;try{for(var l,u=t[Symbol.iterator]();!(o=(l=u.next()).done)&&(r.push(l.value),!i||r.length!==i);o=!0);}catch(c){a=!0,h=c}finally{try{!o&&u.return&&u.return()}finally{if(a)throw h}}return r}(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function sortStringByLength(t,i){return t.length===i.length?0:t.length<i.length?1:-1}var Ft=Array.prototype.reduce;function trimLeft(t,i){var r=coerceToString(t);if(""===i||""===r)return r;var o=toString(i);if(isNil(o))return r.replace(ut,"");var a=!0;return Ft.call(r,(function(t,i){return a&&includes(o,i)?t:(a=!1,t+i)}),"")}var Bt=Array.prototype.reduceRight;function trimRight(t,i){var r=coerceToString(t);if(""===i||""===r)return r;var o=toString(i);if(isNil(o))return r.replace(ct,"");var a=!0;return Bt.call(r,(function(t,i){return a&&includes(o,i)?t:(a=!1,i+t)}),"")}function determineOptions(t){return{width:coerceToNumber(t.width,75),newLine:coerceToString(t.newLine,"\n"),indent:coerceToString(t.indent,""),cut:coerceToBoolean(t.cut,!1)}}function isAlpha(t){var i=coerceToString(t);return Ct.test(i)}function hasSubstringAtIndex(t,i,r){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=0;o&&(a=1-i.length);var h=t.substr(r+a,i.length);return h.toLowerCase()===i}function parseTagName(t){for(var i=0,r="",o=0;2!==i;){var a=t[o++].toLowerCase();switch(a){case"<":break;case">":i=2;break;default:lt.test(a)?1===i&&(i=2):(0===i&&(i=1),"/"!==a&&(r+=a))}}return r}var Nt=null;var Gt=function getGlobalObject(){return null!==Nt?Nt:Nt="object"===("undefined"==typeof global?"undefined":_typeof(global))&&global.Object===Object?global:"object"===("undefined"==typeof self?"undefined":_typeof(self))&&self.Object===Object?self:new Function("return this")()}(),Yt=Gt.v;var Ut={camelCase:function camelCase(t){var i=coerceToString(t);return""===i?"":words(i).map(wordToCamel).join("")},capitalize:capitalize,decapitalize:function decapitalize(t){var i=coerceToString(t);return""===i?"":i.substr(0,1).toLowerCase()+i.substr(1)},kebabCase:kebabCase,lowerCase:lowerCase,snakeCase:function snakeCase(t){var i=coerceToString(t);return""===i?"":words(i).map(lowerCase).join("_")},swapCase:function swapCase(t){return coerceToString(t).split("").reduce(swapAndConcat,"")},titleCase:function titleCase(t,i){var r=coerceToString(t),o=Array.isArray(i)?i:[],a=Mt.test(r)?bt:wt;return r.replace(a,(function(t,i){return i>0&&o.indexOf(r[i-1])>=0?t.toLowerCase():capitalize(t,!0)}))},upperCase:function upperCase(t){return coerceToString(t).toUpperCase()},count:function count(t){return coerceToString(t).length},countGraphemes:function countGrapheme(t){return coerceToString(t).replace(ot,"*").replace(at,"*").length},countSubstrings:function countSubstrings(t,i){var r=coerceToString(t),o=coerceToString(i),a=o.length,h=0,l=0;if(""===r||""===o)return h;do{-1!==(l=r.indexOf(o,l))&&(h++,l+=a)}while(-1!==l);return h},countWhere:function countWhere(t,i,r){var o=coerceToString(t);if(""===o||"function"!=typeof i)return 0;var a=i.bind(r);return Rt.call(o,(function(t,i,r){return a(i,r,o)?t+1:t}),0)},countWords:function countWords(t,i,r){return words(t,i,r).length},escapeHtml:function escapeHtml(t){return coerceToString(t).replace(gt,replaceSpecialCharacter)},escapeRegExp:escapeRegExp,unescapeHtml:function unescapeHtml(t){var i=coerceToString(t);return Lt.reduce(reduceUnescapedString,i)},sprintf:sprintf,vprintf:function vprintf(t,i){return sprintf.apply(void 0,[t].concat(function _toConsumableArray(t){if(Array.isArray(t)){for(var i=0,r=Array(t.length);i<t.length;i++)r[i]=t[i];return r}return Array.from(t)}(nilDefault(i,[]))))},indexOf:function indexOf(t,i,r){return coerceToString(t).indexOf(i,r)},lastIndexOf:function lastIndexOf(t,i,r){return coerceToString(t).lastIndexOf(i,r)},search:function search(t,i,r){var o=coerceToString(t),a=isNil(r)?0:clipNumber(toInteger(r),0,o.length),h=o.substr(a).search(i);return-1===h||isNaN(a)||(h+=a),h},charAt:function charAt(t,i){return coerceToString(t).charAt(i)},codePointAt:codePointAt,first:function first(t,i){var r=coerceToString(t),o=isNil(i)?1:clipNumber(toInteger(i),0,_t);return r.length<=o?r:r.substr(0,o)},graphemeAt:function graphemeAt(t,i){var r=coerceToString(t),o=coerceToNumber(i),a=void 0,h=0;for(o=nanDefault(o,0);null!==(a=ht.exec(r));){if(h===o)return ht.lastIndex=0,a[0];h++}return""},last:function last(t,i){var r=coerceToString(t),o=isNil(i)?1:clipNumber(toInteger(i),0,_t);return r.length<=o?r:r.substr(r.length-o,o)},prune:function prune(t,i,r){var o=coerceToString(t),a=isNil(i)?o.length:clipNumber(toInteger(i),0,_t),h=coerceToString(r,"...");if(a>=o.length)return o;var l=Mt.test(o)?bt:wt,u=0;return o.replace(l,(function(t,i){var r=i+t.length;r<=a-h.length&&(u=r)})),o.substr(0,u)+h},slice:function slice(t,i,r){return coerceToString(t).slice(i,r)},substr:function substr(t,i,r){return coerceToString(t).substr(i,r)},substring:function substring(t,i,r){return coerceToString(t).substring(i,r)},truncate:truncate,insert:function insert(t,i,r){var o=coerceToString(t),a=coerceToString(i),h=coerceToNumber(r);return h<0||h>o.length||""===a?o:o.slice(0,h)+a+o.slice(h)},latinise:latinise,pad:function pad(t,i,r){var o=coerceToString(t),a=isNil(i)?0:clipNumber(toInteger(i),0,_t),h=coerceToString(r," ");if(a<=o.length)return o;var l=a-o.length,u=toInteger(l/2),c=l%2;return buildPadding(h,u)+o+buildPadding(h,u+c)},padLeft:padLeft,padRight:padRight,repeat:repeat,replace:function replace(t,i,r){return coerceToString(t).replace(i,r)},replaceAll:function replaceAll(t,i,r){var o=coerceToString(t),a=i;return i instanceof RegExp?i.global||(a=appendFlagToRegExp(i,"g")):a=new RegExp(escapeRegExp(i),"g"),o.replace(a,r)},reverse:function reverse(t){return coerceToString(t).split("").reverse().join("")},reverseGrapheme:function reverseGrapheme(t){for(var i=coerceToString(t),r="",o=(i=i.replace(ot,(function(t,i,r){return reverseGrapheme(r)+i})).replace(at,"$2$1")).length;o--;)r+=i.charAt(o);return r},slugify:function slugify(t){var i=coerceToString(t);return""===i?"":kebabCase(latinise(i).replace(pt,"-"))},splice:function splice(t,i,r,o){var a=coerceToString(t),h=coerceToString(o),l=coerceToNumber(i);l<0?(l=a.length+l)<0&&(l=0):l>a.length&&(l=a.length);var u=coerceToNumber(r,a.length-l);return u<0&&(u=0),a.slice(0,l)+h+a.slice(l+u)},tr:function tr(t,i,r){var o=coerceToString(t),a=void 0,h=void 0;if(isString(i)&&isString(r))a=i.split(""),h=r.split("");else{var l=function extractKeysAndValues(t){var i=Object.keys(t),r=i.sort(sortStringByLength).map((function(i){return t[i]}));return[i,r]}(nilDefault(i,{})),u=_slicedToArray(l,2);a=u[0],h=u[1]}var c=a.length;if(0===c)return o;for(var d="",p=h.length,g=0;g<o.length;g++){for(var v=!1,m=void 0,y=0;y<c&&y<p;y++){var T=a[y];if(o.substr(g,T.length)===T){v=!0,m=h[y],g=g+T.length-1;break}}d+=v?m:o[g]}return d},trim:function trim(t,i){var r=coerceToString(t);if(""===i||""===r)return r;var o=toString(i);return isNil(o)?r.trim():trimRight(trimLeft(r,o),o)},trimLeft:trimLeft,trimRight:trimRight,wordWrap:function wordWrap(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=coerceToString(t),o=determineOptions(i),a=o.width,h=o.newLine,l=o.indent,u=o.cut;if(""===r||a<=0)return l;for(var c=r.length,d=r.substring.bind(r),p=0,g="";c-p>a;)if(" "!==r[p]){var v=r.lastIndexOf(" ",a+p);v>=p?(g+=l+d(p,v)+h,p=v+1):u?(g+=l+d(p,a+p)+h,p+=a):(v=r.indexOf(" ",a+p))>=0?(g+=l+d(p,v)+h,p=v+1):(g+=l+d(p),p=c)}else p++;return p<c&&(g+=l+d(p)),g},endsWith:function endsWith(t,i,r){if(isNil(i))return!1;var o=coerceToString(t),a=coerceToString(i);if(""===a)return!0;r=isNil(r)?o.length:clipNumber(toInteger(r),0,o.length),r-=a.length;var h=o.indexOf(a,r);return-1!==h&&h===r},includes:includes,isAlpha:isAlpha,isAlphaDigit:function isAlphaDigit(t){var i=coerceToString(t);return Et.test(i)},isBlank:function isBlank(t){return 0===coerceToString(t).trim().length},isDigit:function isDigit(t){var i=coerceToString(t);return dt.test(i)},isEmpty:function isEmpty(t){return 0===coerceToString(t).length},isLowerCase:function isLowerCase(t){var i=coerceToString(t);return isAlpha(i)&&i.toLowerCase()===i},isNumeric:function isNumeric(t){var i="object"!==_typeof(t)||isNil(t)?t:Number(t);return("number"==typeof i||"string"==typeof i)&&!isNaN(i-parseFloat(i))},isString:isString,isUpperCase:function isUpperCase(t){var i=coerceToString(t);return isAlpha(i)&&i.toUpperCase()===i},matches:function matches(t,i,r){var o=coerceToString(t),a=coerceToString(r),h=void 0;if(!(i instanceof RegExp)){if(null===(h=toString(i)))return!1;i=new RegExp(h,a)}return i.test(o)},startsWith:function startsWith(t,i,r){var o=coerceToString(t),a=toString(i);return null!==a&&(""===a||(r=isNil(r)?0:clipNumber(toInteger(r),0,o.length),o.substr(r,a.length)===a))},chars:function chars(t){return coerceToString(t).split("")},codePoints:function codePoints(t){for(var i=coerceToString(t),r=i.length,o=[],a=0,h=void 0;a<r;)h=codePointAt(i,a),o.push(h),a+=h>65535?2:1;return o},graphemes:function graphemes(t){return nilDefault(coerceToString(t).match(ht),[])},split:function split(t,i,r){return coerceToString(t).split(i,r)},words:words,stripBom:function trim$1(t){var i=coerceToString(t);return""===i?"":"\ufeff"===i[0]?i.substring(1):i},stripTags:function trim$2(t,i,r){if(""===(t=coerceToString(t)))return"";if(!Array.isArray(i)){var o=coerceToString(i);i=""===o?[]:function parseTagList(t){for(var i=[],r=void 0;null!==(r=xt.exec(t));)i.push(r[1]);return i}(o)}for(var a=coerceToString(r),h=t.length,l=i.length>0,u=hasSubstringAtIndex.bind(null,t),c=0,d=0,p="",g="",v=null,m=0;m<h;m++){var y=t[m],T=!1;switch(y){case"<":if(v)break;if(u("< ",m,!1)){T=!0;break}if(0===c){T=!0,c=1;break}if(1===c){d++;break}T=!0;break;case"!":if(1===c&&u("<!",m)){c=2;break}T=!0;break;case"-":if(2===c&&u("!--",m)){c=3;break}T=!0;break;case'"':case"'":1===c&&(v===y?v=null:v||(v=y)),T=!0;break;case"E":case"e":if(2===c&&u("doctype",m)){c=1;break}T=!0;break;case">":if(d>0){d--;break}if(v)break;if(1===c){if(v=null,c=0,l){var S=parseTagName(g+=">");-1!==i.indexOf(S.toLowerCase())?p+=g:p+=a,g=""}else p+=a;break}if(2===c||3===c&&u("--\x3e",m)){v=null,c=0,g="";break}T=!0;break;default:T=!0}if(T)switch(c){case 0:p+=y;break;case 1:l&&(g+=y)}}return p},noConflict:function noConflict(){return this===Gt.v&&(Gt.v=Yt),this},version:"1.4.0"};function ChainWrapper(t,i){this._wrappedValue=t,this._explicitChain=i}ChainWrapper.prototype.value=function(){return this._wrappedValue},ChainWrapper.prototype.valueOf=function(){return this.value()},ChainWrapper.prototype.toJSON=function(){return this.value()},ChainWrapper.prototype.toString=function(){return String(this.value())},ChainWrapper.prototype.chain=function(){return new ChainWrapper(this._wrappedValue,!0)},ChainWrapper.prototype.thru=function(t){return"function"==typeof t?new ChainWrapper(t(this._wrappedValue),this._explicitChain):this},ChainWrapper.prototype._explicitChain=!0,Object.keys(Ut).forEach((function(t){ChainWrapper.prototype[t]=function makeFunctionChainable(t){return function(){for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=t.apply(void 0,[this._wrappedValue].concat(r));return this._explicitChain||"string"==typeof a?new ChainWrapper(a,this._explicitChain):a}}(Ut[t])}));var Xt=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t};function Voca(t){return new ChainWrapper(t,!1)}Xt(Voca,Ut,{chain:function chain(t){return new ChainWrapper(t,!0)}});"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Vt,zt={exports:{}};Vt=zt,function webpackUniversalModuleDefinition(t,i){Vt.exports=i()}(0,(function(){return function(t){var i={};function __webpack_require__(r){if(i[r])return i[r].exports;var o=i[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,__webpack_require__),o.l=!0,o.exports}return __webpack_require__.m=t,__webpack_require__.c=i,__webpack_require__.d=function(t,i,r){__webpack_require__.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:r})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(t,i){if(1&i&&(t=__webpack_require__(t)),8&i)return t;if(4&i&&"object"===_typeof(t)&&t&&t.__esModule)return t;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var o in t)__webpack_require__.d(r,o,function(i){return t[i]}.bind(null,o));return r},__webpack_require__.n=function(t){var i=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(i,"a",i),i},__webpack_require__.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=1528)}([function(t,i){function getProperty(t,i,r){var o=r?t[i]:Object.getOwnPropertyDescriptor(t,i);return!r&&o.value&&"object"===_typeof(o.value)&&(o=o.value),!(!o||!function hasGetterOrSetter(t){return!!t.get&&"function"==typeof t.get||!!t.set&&"function"==typeof t.set}(o))&&(void 0===o.enumerable&&(o.enumerable=!0),void 0===o.configurable&&(o.configurable=!0),o)}function hasNonConfigurable(t,i){var r=Object.getOwnPropertyDescriptor(t,i);return!!r&&(r.value&&"object"===_typeof(r.value)&&(r=r.value),!1===r.configurable)}function extend(t,i,r,o){for(var a in i)if(i.hasOwnProperty(a)){var h=getProperty(i,a,r);if(!1!==h){if(hasNonConfigurable((o||t).prototype,a)){if(Class.ignoreFinals)continue;throw new Error("cannot override final property '"+a+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,a,h)}else t.prototype[a]=i[a]}}function mixin(t,i){if(i){Array.isArray(i)||(i=[i]);for(var r=0;r<i.length;r++)extend(t,i[r].prototype||i[r])}}function Class(t){var i,r;if(t||(t={}),t.initialize){if("function"!=typeof t.initialize)throw new Error("initialize must be a function");i=t.initialize,delete t.initialize}else if(t.Extends){var o=t.Extends;i=function initialize(){o.apply(this,arguments)}}else i=function initialize(){};t.Extends?(i.prototype=Object.create(t.Extends.prototype),i.prototype.constructor=i,r=t.Extends,delete t.Extends):i.prototype.constructor=i;var a=null;return t.Mixins&&(a=t.Mixins,delete t.Mixins),mixin(i,a),extend(i,t,!0,r),i}Class.extend=extend,Class.mixin=mixin,Class.ignoreFinals=!1,t.exports=Class},function(t,i){t.exports=function NOOP(){}},function(t,i){t.exports=function GetFastValue(t,i,r){var o=_typeof(t);return t&&"number"!==o&&"string"!==o&&t.hasOwnProperty(i)&&void 0!==t[i]?t[i]:r}},function(t,i,r){var o=r(0),a=r(124),h=new o({initialize:function Vector2(t,i){this.x=0,this.y=0,"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0):(void 0===i&&(i=t),this.x=t||0,this.y=i||0)},clone:function clone(){return new h(this.x,this.y)},copy:function copy(t){return this.x=t.x||0,this.y=t.y||0,this},setFromObject:function setFromObject(t){return this.x=t.x||0,this.y=t.y||0,this},set:function set(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setTo:function setTo(t,i){return this.set(t,i)},setToPolar:function setToPolar(t,i){return null==i&&(i=1),this.x=Math.cos(t)*i,this.y=Math.sin(t)*i,this},equals:function equals(t){return this.x===t.x&&this.y===t.y},fuzzyEquals:function fuzzyEquals(t,i){return a(this.x,t.x,i)&&a(this.y,t.y,i)},angle:function angle(){var angle=Math.atan2(this.y,this.x);return angle<0&&(angle+=2*Math.PI),angle},setAngle:function setAngle(t){return this.setToPolar(t,this.length())},add:function add(t){return this.x+=t.x,this.y+=t.y,this},subtract:function subtract(t){return this.x-=t.x,this.y-=t.y,this},multiply:function multiply(t){return this.x*=t.x,this.y*=t.y,this},scale:function scale(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function divide(t){return this.x/=t.x,this.y/=t.y,this},negate:function negate(){return this.x=-this.x,this.y=-this.y,this},distance:function distance(t){var i=t.x-this.x,r=t.y-this.y;return Math.sqrt(i*i+r*r)},distanceSq:function distanceSq(t){var i=t.x-this.x,r=t.y-this.y;return i*i+r*r},length:function length(){var t=this.x,i=this.y;return Math.sqrt(t*t+i*i)},setLength:function setLength(t){return this.normalize().scale(t)},lengthSq:function lengthSq(){var t=this.x,i=this.y;return t*t+i*i},normalize:function normalize(){var t=this.x,i=this.y,r=t*t+i*i;return r>0&&(r=1/Math.sqrt(r),this.x=t*r,this.y=i*r),this},normalizeRightHand:function normalizeRightHand(){var t=this.x;return this.x=-1*this.y,this.y=t,this},normalizeLeftHand:function normalizeLeftHand(){var t=this.x;return this.x=this.y,this.y=-1*t,this},dot:function dot(t){return this.x*t.x+this.y*t.y},cross:function cross(t){return this.x*t.y-this.y*t.x},lerp:function lerp(t,i){void 0===i&&(i=0);var r=this.x,o=this.y;return this.x=r+i*(t.x-r),this.y=o+i*(t.y-o),this},transformMat3:function transformMat3(t){var i=this.x,r=this.y,o=t.val;return this.x=o[0]*i+o[3]*r+o[6],this.y=o[1]*i+o[4]*r+o[7],this},transformMat4:function transformMat4(t){var i=this.x,r=this.y,o=t.val;return this.x=o[0]*i+o[4]*r+o[12],this.y=o[1]*i+o[5]*r+o[13],this},reset:function reset(){return this.x=0,this.y=0,this},limit:function limit(t){var i=this.length();return i&&i>t&&this.scale(t/i),this},reflect:function reflect(t){return t=t.clone().normalize(),this.subtract(t.scale(2*this.dot(t)))},mirror:function mirror(t){return this.reflect(t).negate()},rotate:function rotate(t){var i=Math.cos(t),r=Math.sin(t);return this.set(i*this.x-r*this.y,r*this.x+i*this.y)}});h.ZERO=new h,h.RIGHT=new h(1,0),h.LEFT=new h(-1,0),h.UP=new h(0,-1),h.DOWN=new h(0,1),h.ONE=new h(1,1),t.exports=h},function(t,i,r){var o=r(0),a=r(56),h=new o({initialize:function Point(t,i){void 0===t&&(t=0),void 0===i&&(i=t),this.type=a.POINT,this.x=t,this.y=i},setTo:function setTo(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.x=t,this.y=i,this}});t.exports=h},function(t,i,r){var o=r(0),a=r(24),h=r(20),l=new o({initialize:function GameObjectFactory(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(h.BOOT,this.boot,this),this.events.on(h.START,this.start,this)},boot:function boot(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(h.DESTROY,this.destroy,this)},start:function start(){this.events.once(h.SHUTDOWN,this.shutdown,this)},existing:function existing(t){return(t.renderCanvas||t.renderWebGL)&&this.displayList.add(t),t.preUpdate&&this.updateList.add(t),t},shutdown:function shutdown(){this.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown(),this.events.off(h.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});l.register=function(t,i){l.prototype.hasOwnProperty(t)||(l.prototype[t]=i)},l.remove=function(t){l.prototype.hasOwnProperty(t)&&delete l.prototype[t]},a.register("GameObjectFactory",l,"add"),t.exports=l},function(t,i){t.exports=function GetValue(t,i,r){if(t&&"number"!=typeof t){if(t.hasOwnProperty(i))return t[i];if(-1!==i.indexOf(".")){for(var o=i.split("."),a=t,h=r,l=0;l<o.length;l++){if(!a.hasOwnProperty(o[l])){h=r;break}h=a[o[l]],a=a[o[l]]}return h}return r}return r}},function(t,i){t.exports=function IsPlainObject(t){if("object"!==_typeof(t)||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}return!0}},function(t,i){var r={},o={install:function install(t){for(var i in r)t[i]=r[i]},register:function register(t,i){r[t]=i},destroy:function destroy(){r={}}};t.exports=o},function(t,i,r){var o=Object.prototype.hasOwnProperty,a="~";function Events(){}function EE(t,i,r){this.fn=t,this.context=i,this.once=r||!1}function addListener(t,i,r,o,h){if("function"!=typeof r)throw new TypeError("The listener must be a function");var l=new EE(r,o||t,h),u=a?a+i:i;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],l]:t._events[u].push(l):(t._events[u]=l,t._eventsCount++),t}function clearEvent(t,i){0==--t._eventsCount?t._events=new Events:delete t._events[i]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(a=!1)),EventEmitter.prototype.eventNames=function eventNames(){var t,i,r=[];if(0===this._eventsCount)return r;for(i in t=this._events)o.call(t,i)&&r.push(a?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},EventEmitter.prototype.listeners=function listeners(t){var i=a?a+t:t,r=this._events[i];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,h=r.length,l=new Array(h);o<h;o++)l[o]=r[o].fn;return l},EventEmitter.prototype.listenerCount=function listenerCount(t){var i=a?a+t:t,r=this._events[i];return r?r.fn?1:r.length:0},EventEmitter.prototype.emit=function emit(t,i,r,o,h,l){var u=a?a+t:t;if(!this._events[u])return!1;var c,d,p=this._events[u],g=arguments.length;if(p.fn){switch(p.once&&this.removeListener(t,p.fn,void 0,!0),g){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,i),!0;case 3:return p.fn.call(p.context,i,r),!0;case 4:return p.fn.call(p.context,i,r,o),!0;case 5:return p.fn.call(p.context,i,r,o,h),!0;case 6:return p.fn.call(p.context,i,r,o,h,l),!0}for(d=1,c=new Array(g-1);d<g;d++)c[d-1]=arguments[d];p.fn.apply(p.context,c)}else{var v,m=p.length;for(d=0;d<m;d++)switch(p[d].once&&this.removeListener(t,p[d].fn,void 0,!0),g){case 1:p[d].fn.call(p[d].context);break;case 2:p[d].fn.call(p[d].context,i);break;case 3:p[d].fn.call(p[d].context,i,r);break;case 4:p[d].fn.call(p[d].context,i,r,o);break;default:if(!c)for(v=1,c=new Array(g-1);v<g;v++)c[v-1]=arguments[v];p[d].fn.apply(p[d].context,c)}}return!0},EventEmitter.prototype.on=function on(t,i,r){return addListener(this,t,i,r,!1)},EventEmitter.prototype.once=function once(t,i,r){return addListener(this,t,i,r,!0)},EventEmitter.prototype.removeListener=function removeListener(t,i,r,o){var h=a?a+t:t;if(!this._events[h])return this;if(!i)return clearEvent(this,h),this;var l=this._events[h];if(l.fn)l.fn!==i||o&&!l.once||r&&l.context!==r||clearEvent(this,h);else{for(var u=0,c=[],d=l.length;u<d;u++)(l[u].fn!==i||o&&!l[u].once||r&&l[u].context!==r)&&c.push(l[u]);c.length?this._events[h]=1===c.length?c[0]:c:clearEvent(this,h)}return this},EventEmitter.prototype.removeAllListeners=function removeAllListeners(t){var i;return t?(i=a?a+t:t,this._events[i]&&clearEvent(this,i)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=a,EventEmitter.EventEmitter=EventEmitter,t.exports=EventEmitter},function(t,i,r){var o=r(0),a=r(57),h=r(171),l=r(306),u=r(56),c=r(47),d=r(174),p=new o({initialize:function Rectangle(t,i,r,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=0),this.type=u.RECTANGLE,this.x=t,this.y=i,this.width=r,this.height=o},contains:function contains(t,i){return a(this,t,i)},getPoint:function getPoint(t,i){return h(this,t,i)},getPoints:function getPoints(t,i,r){return l(this,t,i,r)},getRandomPoint:function getRandomPoint(t){return d(this,t)},setTo:function setTo(t,i,r,o){return this.x=t,this.y=i,this.width=r,this.height=o,this},setEmpty:function setEmpty(){return this.setTo(0,0,0,0)},setPosition:function setPosition(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setSize:function setSize(t,i){return void 0===i&&(i=t),this.width=t,this.height=i,this},isEmpty:function isEmpty(){return this.width<=0||this.height<=0},getLineA:function getLineA(t){return void 0===t&&(t=new c),t.setTo(this.x,this.y,this.right,this.y),t},getLineB:function getLineB(t){return void 0===t&&(t=new c),t.setTo(this.right,this.y,this.right,this.bottom),t},getLineC:function getLineC(t){return void 0===t&&(t=new c),t.setTo(this.right,this.bottom,this.x,this.bottom),t},getLineD:function getLineD(t){return void 0===t&&(t=new c),t.setTo(this.x,this.bottom,this.x,this.y),t},left:{get:function get(){return this.x},set:function set(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}},right:{get:function get(){return this.x+this.width},set:function set(t){t<=this.x?this.width=0:this.width=t-this.x}},top:{get:function get(){return this.y},set:function set(t){t>=this.bottom?this.height=0:this.height=this.bottom-t,this.y=t}},bottom:{get:function get(){return this.y+this.height},set:function set(t){t<=this.y?this.height=0:this.height=t-this.y}},centerX:{get:function get(){return this.x+this.width/2},set:function set(t){this.x=t-this.width/2}},centerY:{get:function get(){return this.y+this.height/2},set:function set(t){this.y=t-this.height/2}}});t.exports=p},function(t,i,r){t.exports={Alpha:r(607),AlphaSingle:r(303),BlendMode:r(304),ComputedSize:r(608),Crop:r(609),Depth:r(305),Flip:r(610),GetBounds:r(611),Mask:r(309),Origin:r(632),PathFollower:r(633),Pipeline:r(167),ScrollFactor:r(312),Size:r(634),Texture:r(635),TextureCrop:r(636),Tint:r(637),ToJSON:r(176),Transform:r(313),TransformMatrix:r(25),Visible:r(314)}},function(t,i){function GenerateSrc(t){for(var i="",r=0;r<t;++r)r>0&&(i+="\nelse "),r<t-1&&(i+="if(test == "+r+".0){}");return i}t.exports={getTintFromFloats:function getTintFromFloats(t,i,r,o){return((255&(255*o|0))<<24|(255&(255*t|0))<<16|(255&(255*i|0))<<8|255&(255*r|0))>>>0},getTintAppendFloatAlpha:function getTintAppendFloatAlpha(t,i){return((255&(255*i|0))<<24|t)>>>0},getTintAppendFloatAlphaAndSwap:function getTintAppendFloatAlphaAndSwap(t,i){return((255&(255*i|0))<<24|(255&(0|t))<<16|(255&(t>>8|0))<<8|255&(t>>16|0))>>>0},getFloatsFromUintRGB:function getFloatsFromUintRGB(t){return[(255&(t>>16|0))/255,(255&(t>>8|0))/255,(255&(0|t))/255]},checkShaderMax:function checkShaderMax(t,i){i&&-1!==i||(i=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS));for(var r=t.createShader(t.FRAGMENT_SHADER),o=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");;){var a=o.replace(/%forloop%/gi,GenerateSrc(i));if(t.shaderSource(r,a),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS))break;i=i/2|0}return i},parseFragmentShaderMaxTextures:function parseFragmentShaderMaxTextures(t,i){if(!t)return"";for(var r="",o=0;o<i;o++)o>0&&(r+="\n\telse "),o<i-1&&(r+="if (outTexId < "+o+".5)"),r+="\n\t{",r+="\n\t\ttexture = texture2D(uMainSampler["+o+"], outTexCoord);",r+="\n\t}";return(t=t.replace(/%count%/gi,i.toString())).replace(/%forloop%/gi,r)}}},function(t,i,r){var o=r(193),a=r(6);t.exports=function GetAdvancedValue(t,i,r){var h=a(t,i,null);if(null===h)return r;if(Array.isArray(h))return o.RND.pick(h);if("object"===_typeof(h)){if(h.hasOwnProperty("randInt"))return o.RND.integerInRange(h.randInt[0],h.randInt[1]);if(h.hasOwnProperty("randFloat"))return o.RND.realInRange(h.randFloat[0],h.randFloat[1])}else if("function"==typeof h)return h(i);return h}},function(t,i){var r={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};t.exports=r},function(t,i,r){var o=r(0),a=r(176),h=r(101),l=r(9),u=r(75),c=r(20),d=new o({Extends:l,initialize:function GameObject(t,i){l.call(this),this.scene=t,this.displayList=null,this.type=i,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(u.ADDED_TO_SCENE,this.addedToScene,this),this.on(u.REMOVED_FROM_SCENE,this.removedFromScene,this),t.sys.queueDepthSort()},setActive:function setActive(t){return this.active=t,this},setName:function setName(t){return this.name=t,this},setState:function setState(t){return this.state=t,this},setDataEnabled:function setDataEnabled(){return this.data||(this.data=new h(this)),this},setData:function setData(t,i){return this.data||(this.data=new h(this)),this.data.set(t,i),this},incData:function incData(t,i){return this.data||(this.data=new h(this)),this.data.inc(t,i),this},toggleData:function toggleData(t){return this.data||(this.data=new h(this)),this.data.toggle(t),this},getData:function getData(t){return this.data||(this.data=new h(this)),this.data.get(t)},setInteractive:function setInteractive(t,i,r){return this.scene.sys.input.enable(this,t,i,r),this},disableInteractive:function disableInteractive(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function removeInteractive(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function addedToScene(){},removedFromScene:function removedFromScene(){},update:function update(){},toJSON:function toJSON(){return a(this)},willRender:function willRender(t){return!(d.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function getIndexList(){for(var t=this,i=this.parentContainer,r=[];i&&(r.unshift(i.getIndex(t)),t=i,i.parentContainer);)i=i.parentContainer;return this.displayList?r.unshift(this.displayList.getIndex(t)):r.unshift(this.scene.sys.displayList.getIndex(t)),r},addToDisplayList:function addToDisplayList(t){return void 0===t&&(t=this.scene.sys.displayList),this.displayList&&this.displayList!==t&&this.removeFromDisplayList(),t.exists(this)||(this.displayList=t,t.add(this,!0),t.queueDepthSort(),this.emit(u.ADDED_TO_SCENE,this,this.scene),t.events.emit(c.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function addToUpdateList(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function removeFromDisplayList(){var t=this.displayList||this.scene.sys.displayList;return t.exists(this)&&(t.remove(this,!0),t.queueDepthSort(),this.displayList=null,this.emit(u.REMOVED_FROM_SCENE,this,this.scene),t.events.emit(c.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function removeFromUpdateList(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function destroy(t){this.scene&&!this.ignoreDestroy&&(void 0===t&&(t=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(u.DESTROY,this,t),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});d.RENDER_MASK=15,t.exports=d},function(t,i,r){var o=r(0),a=r(24),h=r(20),l=new o({initialize:function GameObjectCreator(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(h.BOOT,this.boot,this),this.events.on(h.START,this.start,this)},boot:function boot(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(h.DESTROY,this.destroy,this)},start:function start(){this.events.once(h.SHUTDOWN,this.shutdown,this)},shutdown:function shutdown(){this.events.off(h.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown(),this.events.off(h.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});l.register=function(t,i){l.prototype.hasOwnProperty(t)||(l.prototype[t]=i)},l.remove=function(t){l.prototype.hasOwnProperty(t)&&delete l.prototype[t]},a.register("GameObjectCreator",l,"make"),t.exports=l},function(t,i,r){var o=r(7);t.exports=function Extend(){var t,i,r,a,h,l,u=arguments[0]||{},c=1,d=arguments.length,p=!1;for("boolean"==typeof u&&(p=u,u=arguments[1]||{},c=2),d===c&&(u=this,--c);c<d;c++)if(null!=(t=arguments[c]))for(i in t)r=u[i],u!==(a=t[i])&&(p&&a&&(o(a)||(h=Array.isArray(a)))?(h?(h=!1,l=r&&Array.isArray(r)?r:[]):l=r&&o(r)?r:{},u[i]=Extend(p,l,a)):void 0!==a&&(u[i]=a));return u}},function(t,i){t.exports=function Clamp(t,i,r){return Math.max(i,Math.min(r,t))}},function(t,i,r){var o=r(25),a=new o,h=new o,l=new o,u={camera:a,sprite:h,calc:l};t.exports=function GetCalcMatrix(t,i,r){var o=a,c=h,d=l;return c.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),o.copyFrom(i.matrix),r?(o.multiplyWithOffset(r,-i.scrollX*t.scrollFactorX,-i.scrollY*t.scrollFactorY),c.e=t.x,c.f=t.y):(c.e-=i.scrollX*t.scrollFactorX,c.f-=i.scrollY*t.scrollFactorY),o.multiply(c,d),u}},function(t,i,r){t.exports={ADDED_TO_SCENE:r(656),BOOT:r(657),CREATE:r(658),DESTROY:r(659),PAUSE:r(660),POST_UPDATE:r(661),PRE_RENDER:r(662),PRE_UPDATE:r(663),READY:r(664),REMOVED_FROM_SCENE:r(665),RENDER:r(666),RESUME:r(667),SHUTDOWN:r(668),SLEEP:r(669),START:r(670),TRANSITION_COMPLETE:r(671),TRANSITION_INIT:r(672),TRANSITION_OUT:r(673),TRANSITION_START:r(674),TRANSITION_WAKE:r(675),UPDATE:r(676),WAKE:r(677)}},function(t,i){t.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},function(t,i,r){t.exports={BLUR:r(612),BOOT:r(613),CONTEXT_LOST:r(614),CONTEXT_RESTORED:r(615),DESTROY:r(616),FOCUS:r(617),HIDDEN:r(618),PAUSE:r(619),POST_RENDER:r(620),POST_STEP:r(621),PRE_RENDER:r(622),PRE_STEP:r(623),READY:r(624),RESUME:r(625),STEP:r(626),VISIBLE:r(627)}},function(t,i,r){var o=r(0),a=r(21),h=r(95),l=r(2),u=r(155),c=r(240),d=r(517),p=r(156),g=new o({initialize:function File(t,i){this.loader=t,this.cache=l(i,"cache",!1),this.type=l(i,"type",!1),this.key=l(i,"key",!1);var r=this.key;if(t.prefix&&""!==t.prefix&&(this.key=t.prefix+r),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var o=l(i,"url");void 0===o?o=t.path+r+"."+l(i,"extension",""):"string"!=typeof o||o.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)||(o=t.path+o),this.url=o,this.src="",this.xhrSettings=p(l(i,"responseType",void 0)),l(i,"xhrSettings",!1)&&(this.xhrSettings=c(this.xhrSettings,l(i,"xhrSettings",{}))),this.xhrLoader=null,this.state="function"==typeof this.url?a.FILE_POPULATED:a.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=l(i,"config",{}),this.multiFile,this.linkFile},setLink:function setLink(t){this.linkFile=t,t.linkFile=this},resetXHR:function resetXHR(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function load(){this.state===a.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=a.FILE_LOADING,this.src=u(this,this.loader.baseURL),0===this.src.indexOf("data:")?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=d(this,this.loader.xhr))},onLoad:function onLoad(t,i){var r=t.responseURL&&(0===t.responseURL.indexOf("file://")||0===t.responseURL.indexOf("capacitor://"))&&0===i.target.status,o=!(i.target&&200!==i.target.status)||r;4===t.readyState&&t.status>=400&&t.status<=599&&(o=!1),this.state=a.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,o)},onError:function onError(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function onProgress(t){t.lengthComputable&&(this.bytesLoaded=t.loaded,this.bytesTotal=t.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(h.FILE_PROGRESS,this,this.percentComplete))},onProcess:function onProcess(){this.state=a.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function onProcessComplete(){this.state=a.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function onProcessError(){this.state=a.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function hasCacheConflict(){return this.cache&&this.cache.exists(this.key)},addToCache:function addToCache(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function pendingDestroy(t){void 0===t&&(t=this.data);var i=this.key,r=this.type;this.loader.emit(h.FILE_COMPLETE,i,r,t),this.loader.emit(h.FILE_KEY_COMPLETE+r+"-"+i,i,r,t),this.loader.flagForRemoval(this)},destroy:function destroy(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});g.createObjectURL=function(t,i,r){if("function"==typeof URL)t.src=URL.createObjectURL(i);else{var o=new FileReader;o.onload=function(){t.removeAttribute("crossOrigin"),t.src="data:"+(i.type||r)+";base64,"+o.result.split(",")[1]},o.onerror=t.onerror,o.readAsDataURL(i)}},g.revokeObjectURL=function(t){"function"==typeof URL&&URL.revokeObjectURL(t.src)},t.exports=g},function(t,i){var r={},o={},a={register:function(t,i,o,a){void 0===a&&(a=!1),r[t]={plugin:i,mapping:o,custom:a}},registerCustom:function(t,i,r,a){o[t]={plugin:i,mapping:r,data:a}},hasCore:function(t){return r.hasOwnProperty(t)},hasCustom:function(t){return o.hasOwnProperty(t)},getCore:function(t){return r[t]},getCustom:function(t){return o[t]},getCustomClass:function(t){return o.hasOwnProperty(t)?o[t].plugin:null},remove:function(t){r.hasOwnProperty(t)&&delete r[t]},removeCustom:function(t){o.hasOwnProperty(t)&&delete o[t]},destroyCorePlugins:function(){for(var t in r)r.hasOwnProperty(t)&&delete r[t]},destroyCustomPlugins:function(){for(var t in o)o.hasOwnProperty(t)&&delete o[t]}};t.exports=a},function(t,i,r){var o=r(0),a=r(14),h=r(3),l=new o({initialize:function TransformMatrix(t,i,r,o,a,h){void 0===t&&(t=1),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=1),void 0===a&&(a=0),void 0===h&&(h=0),this.matrix=new Float32Array([t,i,r,o,a,h,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function get(){return this.matrix[0]},set:function set(t){this.matrix[0]=t}},b:{get:function get(){return this.matrix[1]},set:function set(t){this.matrix[1]=t}},c:{get:function get(){return this.matrix[2]},set:function set(t){this.matrix[2]=t}},d:{get:function get(){return this.matrix[3]},set:function set(t){this.matrix[3]=t}},e:{get:function get(){return this.matrix[4]},set:function set(t){this.matrix[4]=t}},f:{get:function get(){return this.matrix[5]},set:function set(t){this.matrix[5]=t}},tx:{get:function get(){return this.matrix[4]},set:function set(t){this.matrix[4]=t}},ty:{get:function get(){return this.matrix[5]},set:function set(t){this.matrix[5]=t}},rotation:{get:function get(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function get(){var t=this.matrix,i=t[0],r=t[1],o=t[2],h=t[3];return i||r?r>0?Math.acos(i/this.scaleX):-Math.acos(i/this.scaleX):o||h?a.TAU-(h>0?Math.acos(-o/this.scaleY):-Math.acos(o/this.scaleY)):0}},scaleX:{get:function get(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function get(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function loadIdentity(){var t=this.matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},translate:function translate(t,i){var r=this.matrix;return r[4]=r[0]*t+r[2]*i+r[4],r[5]=r[1]*t+r[3]*i+r[5],this},scale:function scale(t,i){var r=this.matrix;return r[0]*=t,r[1]*=t,r[2]*=i,r[3]*=i,this},rotate:function rotate(t){var i=Math.sin(t),r=Math.cos(t),o=this.matrix,a=o[0],h=o[1],l=o[2],u=o[3];return o[0]=a*r+l*i,o[1]=h*r+u*i,o[2]=a*-i+l*r,o[3]=h*-i+u*r,this},multiply:function multiply(t,i){var r=this.matrix,o=t.matrix,a=r[0],h=r[1],l=r[2],u=r[3],c=r[4],d=r[5],p=o[0],g=o[1],v=o[2],m=o[3],y=o[4],T=o[5],S=void 0===i?this:i;return S.a=p*a+g*l,S.b=p*h+g*u,S.c=v*a+m*l,S.d=v*h+m*u,S.e=y*a+T*l+c,S.f=y*h+T*u+d,S},multiplyWithOffset:function multiplyWithOffset(t,i,r){var o=this.matrix,a=t.matrix,h=o[0],l=o[1],u=o[2],c=o[3],d=i*h+r*u+o[4],p=i*l+r*c+o[5],g=a[0],v=a[1],m=a[2],y=a[3],T=a[4],S=a[5];return o[0]=g*h+v*u,o[1]=g*l+v*c,o[2]=m*h+y*u,o[3]=m*l+y*c,o[4]=T*h+S*u+d,o[5]=T*l+S*c+p,this},transform:function transform(t,i,r,o,a,h){var l=this.matrix,u=l[0],c=l[1],d=l[2],p=l[3],g=l[4],v=l[5];return l[0]=t*u+i*d,l[1]=t*c+i*p,l[2]=r*u+o*d,l[3]=r*c+o*p,l[4]=a*u+h*d+g,l[5]=a*c+h*p+v,this},transformPoint:function transformPoint(t,i,r){void 0===r&&(r={x:0,y:0});var o=this.matrix,a=o[0],h=o[1],l=o[2],u=o[3],c=o[4],d=o[5];return r.x=t*a+i*l+c,r.y=t*h+i*u+d,r},invert:function invert(){var t=this.matrix,i=t[0],r=t[1],o=t[2],a=t[3],h=t[4],l=t[5],u=i*a-r*o;return t[0]=a/u,t[1]=-r/u,t[2]=-o/u,t[3]=i/u,t[4]=(o*l-a*h)/u,t[5]=-(i*l-r*h)/u,this},copyFrom:function copyFrom(t){var i=this.matrix;return i[0]=t.a,i[1]=t.b,i[2]=t.c,i[3]=t.d,i[4]=t.e,i[5]=t.f,this},copyFromArray:function copyFromArray(t){var i=this.matrix;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],this},copyToContext:function copyToContext(t){var i=this.matrix;return t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),t},setToContext:function setToContext(t){var i=this.matrix;return t.setTransform(i[0],i[1],i[2],i[3],i[4],i[5]),t},copyToArray:function copyToArray(t){var i=this.matrix;return void 0===t?t=[i[0],i[1],i[2],i[3],i[4],i[5]]:(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5]),t},setTransform:function setTransform(t,i,r,o,a,h){var l=this.matrix;return l[0]=t,l[1]=i,l[2]=r,l[3]=o,l[4]=a,l[5]=h,this},decomposeMatrix:function decomposeMatrix(){var t=this.decomposedMatrix,i=this.matrix,r=i[0],o=i[1],a=i[2],h=i[3],l=r*h-o*a;if(t.translateX=i[4],t.translateY=i[5],r||o){var u=Math.sqrt(r*r+o*o);t.rotation=o>0?Math.acos(r/u):-Math.acos(r/u),t.scaleX=u,t.scaleY=l/u}else if(a||h){var c=Math.sqrt(a*a+h*h);t.rotation=.5*Math.PI-(h>0?Math.acos(-a/c):-Math.acos(a/c)),t.scaleX=l/c,t.scaleY=c}else t.rotation=0,t.scaleX=0,t.scaleY=0;return t},applyITRS:function applyITRS(t,i,r,o,a){var h=this.matrix,l=Math.sin(r),u=Math.cos(r);return h[4]=t,h[5]=i,h[0]=u*o,h[1]=l*o,h[2]=-l*a,h[3]=u*a,this},applyInverse:function applyInverse(t,i,r){void 0===r&&(r=new h);var o=this.matrix,a=o[0],l=o[1],u=o[2],c=o[3],d=o[4],p=o[5],g=1/(a*c+u*-l);return r.x=c*g*t+-u*g*i+(p*u-d*c)*g,r.y=a*g*i+-l*g*t+(-p*a+d*l)*g,r},getX:function getX(t,i){return t*this.a+i*this.c+this.e},getY:function getY(t,i){return t*this.b+i*this.d+this.f},getXRound:function getXRound(t,i,r){var o=this.getX(t,i);return r&&(o=Math.round(o)),o},getYRound:function getYRound(t,i,r){var o=this.getY(t,i);return r&&(o=Math.round(o)),o},getCSSMatrix:function getCSSMatrix(){var t=this.matrix;return"matrix("+t[0]+","+t[1]+","+t[2]+","+t[3]+","+t[4]+","+t[5]+")"},destroy:function destroy(){this.matrix=null,this.decomposedMatrix=null}});t.exports=l},function(t,i,r){var o=r(2);t.exports=function GetTilesWithin(t,i,r,a,h,l){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=l.width),void 0===a&&(a=l.height),h||(h={});var u=o(h,"isNotEmpty",!1),c=o(h,"isColliding",!1),d=o(h,"hasInterestingFace",!1);t<0&&(r+=t,t=0),i<0&&(a+=i,i=0),t+r>l.width&&(r=Math.max(l.width-t,0)),i+a>l.height&&(a=Math.max(l.height-i,0));for(var p=[],g=i;g<i+a;g++)for(var v=t;v<t+r;v++){var m=l.data[g][v];if(null!==m){if(u&&-1===m.index)continue;if(c&&!m.collides)continue;if(d&&!m.hasInterestingFace)continue;p.push(m)}}return p}},function(t,i){t.exports=function PropertyValueSet(t,i,r,o,a,h){var l;void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=1);var u=0,c=t.length;if(1===h)for(l=a;l<c;l++)t[l][i]=r+u*o,u++;else for(l=a;l>=0;l--)t[l][i]=r+u*o,u++;return t}},function(t,i,r){var o=r(35),a=r(13);t.exports=function BuildGameObject(t,i,r){i.x=a(r,"x",0),i.y=a(r,"y",0),i.depth=a(r,"depth",0),i.flipX=a(r,"flipX",!1),i.flipY=a(r,"flipY",!1);var h=a(r,"scale",null);"number"==typeof h?i.setScale(h):null!==h&&(i.scaleX=a(h,"x",1),i.scaleY=a(h,"y",1));var l=a(r,"scrollFactor",null);"number"==typeof l?i.setScrollFactor(l):null!==l&&(i.scrollFactorX=a(l,"x",1),i.scrollFactorY=a(l,"y",1)),i.rotation=a(r,"rotation",0);var u=a(r,"angle",null);null!==u&&(i.angle=u),i.alpha=a(r,"alpha",1);var c=a(r,"origin",null);if("number"==typeof c)i.setOrigin(c);else if(null!==c){var d=a(c,"x",.5),p=a(c,"y",.5);i.setOrigin(d,p)}return i.blendMode=a(r,"blendMode",o.NORMAL),i.visible=a(r,"visible",!0),a(r,"add",!0)&&t.sys.displayList.add(i),i.preUpdate&&t.sys.updateList.add(i),i}},function(t,i){t.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},function(t,i,r){var o=r(19);t.exports=function SetTransform(t,i,r,a,h){var l=a.alpha*r.alpha;if(l<=0)return!1;var u=o(r,a,h).calc;return i.globalCompositeOperation=t.blendModes[r.blendMode],i.globalAlpha=l,i.save(),u.setToContext(i),i.imageSmoothingEnabled=!(!t.antialias||r.frame&&r.frame.source.scaleMode),!0}},function(t,i,r){var o=r(33),a=r(192),h=[],l=!1;t.exports=function CanvasPool(){var t=function create(t,r,u,c,d){var p;void 0===r&&(r=1),void 0===u&&(u=1),void 0===c&&(c=o.CANVAS),void 0===d&&(d=!1);var g=i(c);return null===g?(g={parent:t,canvas:document.createElement("canvas"),type:c},c===o.CANVAS&&h.push(g),p=g.canvas):(g.parent=t,p=g.canvas),d&&(g.parent=p),p.width=r,p.height=u,l&&c===o.CANVAS&&a.disable(p.getContext("2d")),p},i=function first(t){if(void 0===t&&(t=o.CANVAS),t===o.WEBGL)return null;for(var i=0;i<h.length;i++){var r=h[i];if(!r.parent&&r.type===t)return r}return null},r=function total(){var t=0;return h.forEach((function(i){i.parent&&t++})),t};return{create2D:function create2D(i,r,a){return t(i,r,a,o.CANVAS)},create:t,createWebGL:function createWebGL(i,r,a){return t(i,r,a,o.WEBGL)},disableSmoothing:function disableSmoothing(){l=!0},enableSmoothing:function enableSmoothing(){l=!1},first:i,free:function free(){return h.length-r()},pool:h,remove:function remove(t){var i=t instanceof HTMLCanvasElement;h.forEach((function(r){(i&&r.canvas===t||!i&&r.parent===t)&&(r.parent=null,r.canvas.width=1,r.canvas.height=1)}))},total:r}}()},function(t,i){var r={};t.exports=r,function(){r._nextId=0,r._seed=0,r._nowStartTime=+new Date,r.extend=function(t,i){var o,a;"boolean"==typeof i?(o=2,a=i):(o=1,a=!0);for(var h=o;h<arguments.length;h++){var l=arguments[h];if(l)for(var u in l)a&&l[u]&&l[u].constructor===Object?t[u]&&t[u].constructor!==Object?t[u]=l[u]:(t[u]=t[u]||{},r.extend(t[u],a,l[u])):t[u]=l[u]}return t},r.clone=function(t,i){return r.extend({},i,t)},r.keys=function(t){if(Object.keys)return Object.keys(t);var i=[];for(var r in t)i.push(r);return i},r.values=function(t){var i=[];if(Object.keys){for(var r=Object.keys(t),o=0;o<r.length;o++)i.push(t[r[o]]);return i}for(var a in t)i.push(t[a]);return i},r.get=function(t,i,r,o){i=i.split(".").slice(r,o);for(var a=0;a<i.length;a+=1)t=t[i[a]];return t},r.set=function(t,i,o,a,h){var l=i.split(".").slice(a,h);return r.get(t,i,0,-1)[l[l.length-1]]=o,o},r.shuffle=function(t){for(var i=t.length-1;i>0;i--){var o=Math.floor(r.random()*(i+1)),a=t[i];t[i]=t[o],t[o]=a}return t},r.choose=function(t){return t[Math.floor(r.random()*t.length)]},r.isElement=function(t){return"undefined"!=typeof HTMLElement?t instanceof HTMLElement:!!(t&&t.nodeType&&t.nodeName)},r.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},r.isFunction=function(t){return"function"==typeof t},r.isPlainObject=function(t){return"object"===_typeof(t)&&t.constructor===Object},r.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},r.clamp=function(t,i,r){return t<i?i:t>r?r:t},r.sign=function(t){return t<0?-1:1},r.now=function(){if("undefined"!=typeof window&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-r._nowStartTime},r.random=function(i,r){return r=void 0!==r?r:1,(i=void 0!==i?i:0)+t()*(r-i)};var t=function _seededRandom(){return r._seed=(9301*r._seed+49297)%233280,r._seed/233280};r.colorToNumber=function(t){return 3==(t=t.replace("#","")).length&&(t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)),parseInt(t,16)},r.logLevel=1,r.log=function(){console&&r.logLevel>0&&r.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.info=function(){console&&r.logLevel>0&&r.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.warn=function(){console&&r.logLevel>0&&r.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.nextId=function(){return r._nextId++},r.indexOf=function(t,i){if(t.indexOf)return t.indexOf(i);for(var r=0;r<t.length;r++)if(t[r]===i)return r;return-1},r.map=function(t,i){if(t.map)return t.map(i);for(var r=[],o=0;o<t.length;o+=1)r.push(i(t[o]));return r},r.topologicalSort=function(t){var i=[],o=[],a=[];for(var h in t)o[h]||a[h]||r._topologicalSort(h,o,a,t,i);return i},r._topologicalSort=function(t,i,o,a,h){var l=a[t]||[];o[t]=!0;for(var u=0;u<l.length;u+=1){var c=l[u];o[c]||i[c]||r._topologicalSort(c,i,o,a,h)}o[t]=!1,i[t]=!0,h.push(t)},r.chain=function(){for(var t=[],i=0;i<arguments.length;i+=1){var r=arguments[i];r._chained?t.push.apply(t,r._chained):t.push(r)}var o=function chain(){for(var i,r=new Array(arguments.length),o=0,a=arguments.length;o<a;o++)r[o]=arguments[o];for(o=0;o<t.length;o+=1){var h=t[o].apply(i,r);void 0!==h&&(i=h)}return i};return o._chained=t,o},r.chainPathBefore=function(t,i,o){return r.set(t,i,r.chain(o,r.get(t,i)))},r.chainPathAfter=function(t,i,o){return r.set(t,i,r.chain(r.get(t,i),o))}}()},function(t,i,r){var o={VERSION:"3.55.2",BlendModes:r(35),ScaleModes:r(168),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};t.exports=o},function(t,i,r){var o=r(0),a=r(11),h=r(15),l=r(47),u=new o({Extends:h,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Transform,a.Visible],initialize:function Shape(t,i,r){void 0===i&&(i="Shape"),h.call(this,t,i),this.geom=r,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new l,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function setFillStyle(t,i){return void 0===i&&(i=1),void 0===t?this.isFilled=!1:(this.fillColor=t,this.fillAlpha=i,this.isFilled=!0),this},setStrokeStyle:function setStrokeStyle(t,i,r){return void 0===r&&(r=1),void 0===t?this.isStroked=!1:(this.lineWidth=t,this.strokeColor=i,this.strokeAlpha=r,this.isStroked=!0),this},setClosePath:function setClosePath(t){return this.closePath=t,this},setSize:function setSize(t,i){return this.width=t,this.height=i,this},setDisplaySize:function setDisplaySize(t,i){return this.displayWidth=t,this.displayHeight=i,this},preDestroy:function preDestroy(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function get(){return this.scaleX*this.width},set:function set(t){this.scaleX=t/this.width}},displayHeight:{get:function get(){return this.scaleY*this.height},set:function set(t){this.scaleY=t/this.height}}});t.exports=u},function(t,i){t.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(t,i,r){var o=r(14);t.exports=function DegToRad(t){return t*o.DEG_TO_RAD}},function(t,i,r){t.exports={DESTROY:r(743),FADE_IN_COMPLETE:r(744),FADE_IN_START:r(745),FADE_OUT_COMPLETE:r(746),FADE_OUT_START:r(747),FLASH_COMPLETE:r(748),FLASH_START:r(749),FOLLOW_UPDATE:r(750),PAN_COMPLETE:r(751),PAN_START:r(752),POST_RENDER:r(753),PRE_RENDER:r(754),ROTATE_COMPLETE:r(755),ROTATE_START:r(756),SHAKE_COMPLETE:r(757),SHAKE_START:r(758),ZOOM_COMPLETE:r(759),ZOOM_START:r(760)}},function(t,i,r){var o=r(0),a=r(103),h=r(328),l=r(188),u=r(329),c=new o({initialize:function Color(t,i,r,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(t,i,r,o)},transparent:function transparent(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function setTo(t,i,r,o,a){return void 0===o&&(o=255),void 0===a&&(a=!0),this._locked=!0,this.red=t,this.green=i,this.blue=r,this.alpha=o,this._locked=!1,this.update(a)},setGLTo:function setGLTo(t,i,r,o){return void 0===o&&(o=1),this._locked=!0,this.redGL=t,this.greenGL=i,this.blueGL=r,this.alphaGL=o,this._locked=!1,this.update(!0)},setFromRGB:function setFromRGB(t){return this._locked=!0,this.red=t.r,this.green=t.g,this.blue=t.b,t.hasOwnProperty("a")&&(this.alpha=t.a),this._locked=!1,this.update(!0)},setFromHSV:function setFromHSV(t,i,r){return l(t,i,r,this)},update:function update(t){if(void 0===t&&(t=!1),this._locked)return this;var i=this.r,r=this.g,o=this.b,l=this.a;return this._color=a(i,r,o),this._color32=h(i,r,o,l),this._rgba="rgba("+i+","+r+","+o+","+l/255+")",t&&u(i,r,o,this),this},updateHSV:function updateHSV(){var t=this.r,i=this.g,r=this.b;return u(t,i,r,this),this},clone:function clone(){return new c(this.r,this.g,this.b,this.a)},gray:function gray(t){return this.setTo(t,t,t)},random:function random(t,i){void 0===t&&(t=0),void 0===i&&(i=255);var r=Math.floor(t+Math.random()*(i-t)),o=Math.floor(t+Math.random()*(i-t)),a=Math.floor(t+Math.random()*(i-t));return this.setTo(r,o,a)},randomGray:function randomGray(t,i){void 0===t&&(t=0),void 0===i&&(i=255);var r=Math.floor(t+Math.random()*(i-t));return this.setTo(r,r,r)},saturate:function saturate(t){return this.s+=t/100,this},desaturate:function desaturate(t){return this.s-=t/100,this},lighten:function lighten(t){return this.v+=t/100,this},darken:function darken(t){return this.v-=t/100,this},brighten:function brighten(t){var i=this.r,r=this.g,o=this.b;return i=Math.max(0,Math.min(255,i-Math.round(-t/100*255))),r=Math.max(0,Math.min(255,r-Math.round(-t/100*255))),o=Math.max(0,Math.min(255,o-Math.round(-t/100*255))),this.setTo(i,r,o)},color:{get:function get(){return this._color}},color32:{get:function get(){return this._color32}},rgba:{get:function get(){return this._rgba}},redGL:{get:function get(){return this.gl[0]},set:function set(t){this.gl[0]=Math.min(Math.abs(t),1),this.r=Math.floor(255*this.gl[0]),this.update(!0)}},greenGL:{get:function get(){return this.gl[1]},set:function set(t){this.gl[1]=Math.min(Math.abs(t),1),this.g=Math.floor(255*this.gl[1]),this.update(!0)}},blueGL:{get:function get(){return this.gl[2]},set:function set(t){this.gl[2]=Math.min(Math.abs(t),1),this.b=Math.floor(255*this.gl[2]),this.update(!0)}},alphaGL:{get:function get(){return this.gl[3]},set:function set(t){this.gl[3]=Math.min(Math.abs(t),1),this.a=Math.floor(255*this.gl[3]),this.update()}},red:{get:function get(){return this.r},set:function set(t){t=Math.floor(Math.abs(t)),this.r=Math.min(t,255),this.gl[0]=t/255,this.update(!0)}},green:{get:function get(){return this.g},set:function set(t){t=Math.floor(Math.abs(t)),this.g=Math.min(t,255),this.gl[1]=t/255,this.update(!0)}},blue:{get:function get(){return this.b},set:function set(t){t=Math.floor(Math.abs(t)),this.b=Math.min(t,255),this.gl[2]=t/255,this.update(!0)}},alpha:{get:function get(){return this.a},set:function set(t){t=Math.floor(Math.abs(t)),this.a=Math.min(t,255),this.gl[3]=t/255,this.update()}},h:{get:function get(){return this._h},set:function set(t){this._h=t,l(t,this._s,this._v,this)}},s:{get:function get(){return this._s},set:function set(t){this._s=t,l(this._h,t,this._v,this)}},v:{get:function get(){return this._v},set:function set(t){this._v=t,l(this._h,this._s,t,this)}}});t.exports=c},function(t,i,r){var o=new(r(0))({initialize:function Vector3(t,i,r){this.x=0,this.y=0,this.z=0,"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=i||0,this.z=r||0)},up:function up(){return this.x=0,this.y=1,this.z=0,this},min:function min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clone:function clone(){return new o(this.x,this.y,this.z)},addVectors:function addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this},crossVectors:function crossVectors(t,i){var r=t.x,o=t.y,a=t.z,h=i.x,l=i.y,u=i.z;return this.x=o*u-a*l,this.y=a*h-r*u,this.z=r*l-o*h,this},equals:function equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},copy:function copy(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},set:function set(t,i,r){return"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=i||0,this.z=r||0),this},setFromMatrixPosition:function setFromMatrixPosition(t){return this.fromArray(t.val,12)},setFromMatrixColumn:function setFromMatrixColumn(t,i){return this.fromArray(t.val,4*i)},fromArray:function fromArray(t,i){return void 0===i&&(i=0),this.x=t[i],this.y=t[i+1],this.z=t[i+2],this},add:function add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this},addScalar:function addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this},addScale:function addScale(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i||0,this},subtract:function subtract(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this},multiply:function multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this},scale:function scale(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divide:function divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this},negate:function negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function distance(t){var i=t.x-this.x,r=t.y-this.y,o=t.z-this.z||0;return Math.sqrt(i*i+r*r+o*o)},distanceSq:function distanceSq(t){var i=t.x-this.x,r=t.y-this.y,o=t.z-this.z||0;return i*i+r*r+o*o},length:function length(){var t=this.x,i=this.y,r=this.z;return Math.sqrt(t*t+i*i+r*r)},lengthSq:function lengthSq(){var t=this.x,i=this.y,r=this.z;return t*t+i*i+r*r},normalize:function normalize(){var t=this.x,i=this.y,r=this.z,o=t*t+i*i+r*r;return o>0&&(o=1/Math.sqrt(o),this.x=t*o,this.y=i*o,this.z=r*o),this},dot:function dot(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function cross(t){var i=this.x,r=this.y,o=this.z,a=t.x,h=t.y,l=t.z;return this.x=r*l-o*h,this.y=o*a-i*l,this.z=i*h-r*a,this},lerp:function lerp(t,i){void 0===i&&(i=0);var r=this.x,o=this.y,a=this.z;return this.x=r+i*(t.x-r),this.y=o+i*(t.y-o),this.z=a+i*(t.z-a),this},applyMatrix3:function applyMatrix3(t){var i=this.x,r=this.y,o=this.z,a=t.val;return this.x=a[0]*i+a[3]*r+a[6]*o,this.y=a[1]*i+a[4]*r+a[7]*o,this.z=a[2]*i+a[5]*r+a[8]*o,this},applyMatrix4:function applyMatrix4(t){var i=this.x,r=this.y,o=this.z,a=t.val,h=1/(a[3]*i+a[7]*r+a[11]*o+a[15]);return this.x=(a[0]*i+a[4]*r+a[8]*o+a[12])*h,this.y=(a[1]*i+a[5]*r+a[9]*o+a[13])*h,this.z=(a[2]*i+a[6]*r+a[10]*o+a[14])*h,this},transformMat3:function transformMat3(t){var i=this.x,r=this.y,o=this.z,a=t.val;return this.x=i*a[0]+r*a[3]+o*a[6],this.y=i*a[1]+r*a[4]+o*a[7],this.z=i*a[2]+r*a[5]+o*a[8],this},transformMat4:function transformMat4(t){var i=this.x,r=this.y,o=this.z,a=t.val;return this.x=a[0]*i+a[4]*r+a[8]*o+a[12],this.y=a[1]*i+a[5]*r+a[9]*o+a[13],this.z=a[2]*i+a[6]*r+a[10]*o+a[14],this},transformCoordinates:function transformCoordinates(t){var i=this.x,r=this.y,o=this.z,a=t.val,h=i*a[0]+r*a[4]+o*a[8]+a[12],l=i*a[1]+r*a[5]+o*a[9]+a[13],u=i*a[2]+r*a[6]+o*a[10]+a[14],c=i*a[3]+r*a[7]+o*a[11]+a[15];return this.x=h/c,this.y=l/c,this.z=u/c,this},transformQuat:function transformQuat(t){var i=this.x,r=this.y,o=this.z,a=t.x,h=t.y,l=t.z,u=t.w,c=u*i+h*o-l*r,d=u*r+l*i-a*o,p=u*o+a*r-h*i,g=-a*i-h*r-l*o;return this.x=c*u+g*-a+d*-l-p*-h,this.y=d*u+g*-h+p*-a-c*-l,this.z=p*u+g*-l+c*-h-d*-a,this},project:function project(t){var i=this.x,r=this.y,o=this.z,a=t.val,h=a[0],l=a[1],u=a[2],c=a[3],d=a[4],p=a[5],g=a[6],v=a[7],m=a[8],y=a[9],T=a[10],S=a[11],w=a[12],b=a[13],C=a[14],A=1/(i*c+r*v+o*S+a[15]);return this.x=(i*h+r*d+o*m+w)*A,this.y=(i*l+r*p+o*y+b)*A,this.z=(i*u+r*g+o*T+C)*A,this},projectViewMatrix:function projectViewMatrix(t,i){return this.applyMatrix4(t).applyMatrix4(i)},unprojectViewMatrix:function unprojectViewMatrix(t,i){return this.applyMatrix4(t).applyMatrix4(i)},unproject:function unproject(t,i){var r=t.x,o=t.y,a=t.z,h=t.w,l=this.x-r,u=h-this.y-1-o,c=this.z;return this.x=2*l/a-1,this.y=2*u/h-1,this.z=2*c-1,this.project(i)},reset:function reset(){return this.x=0,this.y=0,this.z=0,this}});o.ZERO=new o,o.RIGHT=new o(1,0,0),o.LEFT=new o(-1,0,0),o.UP=new o(0,-1,0),o.DOWN=new o(0,1,0),o.FORWARD=new o(0,0,1),o.BACK=new o(0,0,-1),o.ONE=new o(1,1,1),t.exports=o},function(t,i){t.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(t,i,r){var o={};t.exports=o;var a=r(64),h=r(83),l=r(165),u=r(32),c=r(84),d=r(271);!function(){o._inertiaScale=4,o._nextCollidingGroupId=1,o._nextNonCollidingGroupId=-1,o._nextCategory=1,o.create=function(i){var r={id:u.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!i.hasOwnProperty("position")&&i.hasOwnProperty("vertices")?i.position=a.centre(i.vertices):i.hasOwnProperty("vertices")||(r.vertices=a.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var o=u.extend(r,i);return t(o,i),o.setOnCollideWith=function(t,i){return i?this.onCollideWith[t.id]=i:delete this.onCollideWith[t.id],this},o},o.nextGroup=function(t){return t?o._nextNonCollidingGroupId--:o._nextCollidingGroupId++},o.nextCategory=function(){return o._nextCategory=o._nextCategory<<1,o._nextCategory};var t=function _initProperties(t,i){i=i||{},o.set(t,{bounds:t.bounds||c.create(t.vertices),positionPrev:t.positionPrev||h.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t});var r=t.bounds;if(a.rotate(t.vertices,t.angle,t.position),d.rotate(t.axes,t.angle),c.update(r,t.vertices,t.velocity),o.set(t,{axes:i.axes||t.axes,area:i.area||t.area,mass:i.mass||t.mass,inertia:i.inertia||t.inertia}),1===t.parts.length){var l=t.centerOfMass,u=t.centerOffset,p=r.max.x-r.min.x,g=r.max.y-r.min.y;l.x=-(r.min.x-t.position.x)/p,l.y=-(r.min.y-t.position.y)/g,u.x=p*l.x,u.y=g*l.y}};o.set=function(t,i,r){var a;for(a in"string"==typeof i&&(a=i,(i={})[a]=r),i)if(Object.prototype.hasOwnProperty.call(i,a))switch(r=i[a],a){case"isStatic":o.setStatic(t,r);break;case"isSleeping":l.set(t,r);break;case"mass":o.setMass(t,r);break;case"density":o.setDensity(t,r);break;case"inertia":o.setInertia(t,r);break;case"vertices":o.setVertices(t,r);break;case"position":o.setPosition(t,r);break;case"angle":o.setAngle(t,r);break;case"velocity":o.setVelocity(t,r);break;case"angularVelocity":o.setAngularVelocity(t,r);break;case"parts":o.setParts(t,r);break;case"centre":o.setCentre(t,r);break;default:t[a]=r}},o.setStatic=function(t,i){for(var r=0;r<t.parts.length;r++){var o=t.parts[r];o.isStatic=i,i?(o._original={restitution:o.restitution,friction:o.friction,mass:o.mass,inertia:o.inertia,density:o.density,inverseMass:o.inverseMass,inverseInertia:o.inverseInertia},o.restitution=0,o.friction=1,o.mass=o.inertia=o.density=1/0,o.inverseMass=o.inverseInertia=0,o.positionPrev.x=o.position.x,o.positionPrev.y=o.position.y,o.anglePrev=o.angle,o.angularVelocity=0,o.speed=0,o.angularSpeed=0,o.motion=0):o._original&&(o.restitution=o._original.restitution,o.friction=o._original.friction,o.mass=o._original.mass,o.inertia=o._original.inertia,o.density=o._original.density,o.inverseMass=o._original.inverseMass,o.inverseInertia=o._original.inverseInertia,o._original=null)}},o.setMass=function(t,i){var r=t.inertia/(t.mass/6);t.inertia=r*(i/6),t.inverseInertia=1/t.inertia,t.mass=i,t.inverseMass=1/t.mass,t.density=t.mass/t.area},o.setDensity=function(t,i){o.setMass(t,i*t.area),t.density=i},o.setInertia=function(t,i){t.inertia=i,t.inverseInertia=1/t.inertia},o.setVertices=function(t,i){i[0].body===t?t.vertices=i:t.vertices=a.create(i,t),t.axes=d.fromVertices(t.vertices),t.area=a.area(t.vertices),o.setMass(t,t.density*t.area);var r=a.centre(t.vertices);a.translate(t.vertices,r,-1),o.setInertia(t,o._inertiaScale*a.inertia(t.vertices,t.mass)),a.translate(t.vertices,t.position),c.update(t.bounds,t.vertices,t.velocity)},o.setParts=function(t,i,r){var h;for(i=i.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,h=0;h<i.length;h++){var l=i[h];l!==t&&(l.parent=t,t.parts.push(l))}if(1!==t.parts.length){if(r=void 0===r||r){var u=[];for(h=0;h<i.length;h++)u=u.concat(i[h].vertices);a.clockwiseSort(u);var d=a.hull(u),p=a.centre(d);o.setVertices(t,d),a.translate(t.vertices,p)}var g=o._totalProperties(t),v=g.centre.x,m=g.centre.y,y=t.bounds,T=t.centerOfMass,S=t.centerOffset;c.update(y,t.vertices,t.velocity),T.x=-(y.min.x-v)/(y.max.x-y.min.x),T.y=-(y.min.y-m)/(y.max.y-y.min.y),S.x=v,S.y=m,t.area=g.area,t.parent=t,t.position.x=v,t.position.y=m,t.positionPrev.x=v,t.positionPrev.y=m,o.setMass(t,g.mass),o.setInertia(t,g.inertia),o.setPosition(t,g.centre)}},o.setCentre=function(t,i,r){r?(t.positionPrev.x+=i.x,t.positionPrev.y+=i.y,t.position.x+=i.x,t.position.y+=i.y):(t.positionPrev.x=i.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=i.y-(t.position.y-t.positionPrev.y),t.position.x=i.x,t.position.y=i.y)},o.setPosition=function(t,i){var r=h.sub(i,t.position);t.positionPrev.x+=r.x,t.positionPrev.y+=r.y;for(var o=0;o<t.parts.length;o++){var l=t.parts[o];l.position.x+=r.x,l.position.y+=r.y,a.translate(l.vertices,r),c.update(l.bounds,l.vertices,t.velocity)}},o.setAngle=function(t,i){var r=i-t.angle;t.anglePrev+=r;for(var o=0;o<t.parts.length;o++){var l=t.parts[o];l.angle+=r,a.rotate(l.vertices,r,t.position),d.rotate(l.axes,r),c.update(l.bounds,l.vertices,t.velocity),o>0&&h.rotateAbout(l.position,r,t.position,l.position)}},o.setVelocity=function(t,i){t.positionPrev.x=t.position.x-i.x,t.positionPrev.y=t.position.y-i.y,t.velocity.x=i.x,t.velocity.y=i.y,t.speed=h.magnitude(t.velocity)},o.setAngularVelocity=function(t,i){t.anglePrev=t.angle-i,t.angularVelocity=i,t.angularSpeed=Math.abs(t.angularVelocity)},o.translate=function(t,i){o.setPosition(t,h.add(t.position,i))},o.rotate=function(t,i,r){if(r){var a=Math.cos(i),h=Math.sin(i),l=t.position.x-r.x,u=t.position.y-r.y;o.setPosition(t,{x:r.x+(l*a-u*h),y:r.y+(l*h+u*a)}),o.setAngle(t,t.angle+i)}else o.setAngle(t,t.angle+i)},o.scale=function(t,i,r,h){var l=0,u=0;h=h||t.position;for(var p=0;p<t.parts.length;p++){var g=t.parts[p];g.scale.x=i,g.scale.y=r,a.scale(g.vertices,i,r,h),g.axes=d.fromVertices(g.vertices),g.area=a.area(g.vertices),o.setMass(g,t.density*g.area),a.translate(g.vertices,{x:-g.position.x,y:-g.position.y}),o.setInertia(g,o._inertiaScale*a.inertia(g.vertices,g.mass)),a.translate(g.vertices,{x:g.position.x,y:g.position.y}),p>0&&(l+=g.area,u+=g.inertia),g.position.x=h.x+(g.position.x-h.x)*i,g.position.y=h.y+(g.position.y-h.y)*r,c.update(g.bounds,g.vertices,t.velocity)}t.parts.length>1&&(t.area=l,t.isStatic||(o.setMass(t,t.density*l),o.setInertia(t,u))),t.circleRadius&&(i===r?t.circleRadius*=i:t.circleRadius=null)},o.update=function(t,i,r,o){var l=Math.pow(i*r*t.timeScale,2),u=1-t.frictionAir*r*t.timeScale,p=t.position.x-t.positionPrev.x,g=t.position.y-t.positionPrev.y;t.velocity.x=p*u*o+t.force.x/t.mass*l,t.velocity.y=g*u*o+t.force.y/t.mass*l,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*u*o+t.torque/t.inertia*l,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=h.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var v=0;v<t.parts.length;v++){var m=t.parts[v];a.translate(m.vertices,t.velocity),v>0&&(m.position.x+=t.velocity.x,m.position.y+=t.velocity.y),0!==t.angularVelocity&&(a.rotate(m.vertices,t.angularVelocity,t.position),d.rotate(m.axes,t.angularVelocity),v>0&&h.rotateAbout(m.position,t.angularVelocity,t.position,m.position)),c.update(m.bounds,m.vertices,t.velocity)}},o.applyForce=function(t,i,r){t.force.x+=r.x,t.force.y+=r.y;var o=i.x-t.position.x,a=i.y-t.position.y;t.torque+=o*r.y-a*r.x},o._totalProperties=function(t){for(var i={mass:0,area:0,inertia:0,centre:{x:0,y:0}},r=1===t.parts.length?0:1;r<t.parts.length;r++){var o=t.parts[r],a=o.mass!==1/0?o.mass:1;i.mass+=a,i.area+=o.area,i.inertia+=o.inertia,i.centre=h.add(i.centre,h.mult(o.position,a))}return i.centre=h.div(i.centre,i.mass),i}}()},function(t,i){t.exports=function GetBottom(t){return t.y+t.height-t.height*t.originY}},function(t,i){t.exports=function GetLeft(t){return t.x-t.width*t.originX}},function(t,i){t.exports=function GetRight(t){return t.x+t.width-t.width*t.originX}},function(t,i){t.exports=function GetTop(t){return t.y-t.height*t.originY}},function(t,i){t.exports=function PropertyValueInc(t,i,r,o,a,h){var l;void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=1);var u=0,c=t.length;if(1===h)for(l=a;l<c;l++)t[l][i]+=r+u*o,u++;else for(l=a;l>=0;l--)t[l][i]+=r+u*o,u++;return t}},function(t,i,r){var o=r(0),a=r(307),h=r(172),l=r(56),u=r(173),c=r(3),d=new o({initialize:function Line(t,i,r,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=0),this.type=l.LINE,this.x1=t,this.y1=i,this.x2=r,this.y2=o},getPoint:function getPoint(t,i){return a(this,t,i)},getPoints:function getPoints(t,i,r){return h(this,t,i,r)},getRandomPoint:function getRandomPoint(t){return u(this,t)},setTo:function setTo(t,i,r,o){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=0),this.x1=t,this.y1=i,this.x2=r,this.y2=o,this},getPointA:function getPointA(t){return void 0===t&&(t=new c),t.set(this.x1,this.y1),t},getPointB:function getPointB(t){return void 0===t&&(t=new c),t.set(this.x2,this.y2),t},left:{get:function get(){return Math.min(this.x1,this.x2)},set:function set(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function get(){return Math.max(this.x1,this.x2)},set:function set(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function get(){return Math.min(this.y1,this.y2)},set:function set(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function get(){return Math.max(this.y1,this.y2)},set:function set(t){this.y1>this.y2?this.y1=t:this.y2=t}}});t.exports=d},function(t,i){t.exports=function FillStyleCanvas(t,i,r,o){var a=r||i.fillColor,h=o||i.fillAlpha,l=(16711680&a)>>>16,u=(65280&a)>>>8,c=255&a;t.fillStyle="rgba("+l+","+u+","+c+","+h+")"}},function(t,i,r){var o=new(r(0))({initialize:function MultiFile(t,i,r,o){var a=[];o.forEach((function(t){t&&a.push(t)})),this.loader=t,this.type=i,this.key=r,this.multiKeyIndex=t.multiKeyIndex++,this.files=a,this.complete=!1,this.pending=a.length,this.failed=0,this.config={},this.baseURL=t.baseURL,this.path=t.path,this.prefix=t.prefix;for(var h=0;h<a.length;h++)a[h].multiFile=this},isReadyToProcess:function isReadyToProcess(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function addToMultiFile(t){return this.files.push(t),t.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function onFileComplete(t){-1!==this.files.indexOf(t)&&this.pending--},onFileFailed:function onFileFailed(t){-1!==this.files.indexOf(t)&&this.failed++}});t.exports=o},function(t,i){t.exports=function DistanceBetween(t,i,r,o){var a=t-r,h=i-o;return Math.sqrt(a*a+h*h)}},function(t,i,r){t.exports={BOOT:r(922),DESTROY:r(923),DRAG_END:r(924),DRAG_ENTER:r(925),DRAG:r(926),DRAG_LEAVE:r(927),DRAG_OVER:r(928),DRAG_START:r(929),DROP:r(930),GAME_OUT:r(931),GAME_OVER:r(932),GAMEOBJECT_DOWN:r(933),GAMEOBJECT_DRAG_END:r(934),GAMEOBJECT_DRAG_ENTER:r(935),GAMEOBJECT_DRAG:r(936),GAMEOBJECT_DRAG_LEAVE:r(937),GAMEOBJECT_DRAG_OVER:r(938),GAMEOBJECT_DRAG_START:r(939),GAMEOBJECT_DROP:r(940),GAMEOBJECT_MOVE:r(941),GAMEOBJECT_OUT:r(942),GAMEOBJECT_OVER:r(943),GAMEOBJECT_POINTER_DOWN:r(944),GAMEOBJECT_POINTER_MOVE:r(945),GAMEOBJECT_POINTER_OUT:r(946),GAMEOBJECT_POINTER_OVER:r(947),GAMEOBJECT_POINTER_UP:r(948),GAMEOBJECT_POINTER_WHEEL:r(949),GAMEOBJECT_UP:r(950),GAMEOBJECT_WHEEL:r(951),MANAGER_BOOT:r(952),MANAGER_PROCESS:r(953),MANAGER_UPDATE:r(954),POINTER_DOWN:r(955),POINTER_DOWN_OUTSIDE:r(956),POINTER_MOVE:r(957),POINTER_OUT:r(958),POINTER_OVER:r(959),POINTER_UP:r(960),POINTER_UP_OUTSIDE:r(961),POINTER_WHEEL:r(962),POINTERLOCK_CHANGE:r(963),PRE_UPDATE:r(964),SHUTDOWN:r(965),START:r(966),UPDATE:r(967)}},function(t,i){t.exports=function SetTop(t,i){return t.y=i+t.height*t.originY,t}},function(t,i){t.exports=function SetLeft(t,i){return t.x=i+t.width*t.originX,t}},function(t,i){t.exports=function SetRight(t,i){return t.x=i-t.width+t.width*t.originX,t}},function(t,i){t.exports=function SetBottom(t,i){return t.y=i-t.height+t.height*t.originY,t}},function(t,i){t.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},function(t,i){t.exports=function Contains(t,i,r){return!(t.width<=0||t.height<=0)&&t.x<=i&&t.x+t.width>=i&&t.y<=r&&t.y+t.height>=r}},function(t,i,r){var o=r(0),a=r(175),h=r(9),l=r(374),u=r(2),c=r(69),d=r(91),p=r(141),g=r(12),v=r(375),m=new o({Extends:h,initialize:function WebGLPipeline(t){h.call(this);var i=t.game,r=i.renderer,o=r.gl;this.name=u(t,"name","WebGLPipeline"),this.game=i,this.renderer=r,this.manager,this.gl=o,this.view=i.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=u(t,"topology",o.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=u(t,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=t,this.glReset=!1},boot:function boot(){var t,i=this.gl,r=this.config,o=this.renderer;this.isPostFX||(this.projectionMatrix=(new c).identity());var a=this.renderTargets,h=u(r,"renderTarget",!1);"boolean"==typeof h&&h&&(h=1);var g=o.width,v=o.height;if("number"==typeof h)for(t=0;t<h;t++)a.push(new p(o,g,v,1,0,!0));else if(Array.isArray(h))for(t=0;t<h.length;t++){var m=u(h[t],"scale",1),y=u(h[t],"minFilter",0),T=u(h[t],"autoClear",1);a.push(new p(o,g,v,m,y,T))}a.length&&(this.currentRenderTarget=a[0]),this.setShadersFromConfig(r);var S=this.shaders,w=0;for(t=0;t<S.length;t++)S[t].vertexSize>w&&(w=S[t].vertexSize);var b=u(r,"batchSize",o.config.batchSize);this.vertexCapacity=6*b;var C=new ArrayBuffer(this.vertexCapacity*w);this.vertexData=C,this.bytes=new Uint8Array(C),this.vertexViewF32=new Float32Array(C),this.vertexViewU32=new Uint32Array(C);var A=u(r,"vertices",null);for(A?(this.vertexViewF32.set(A),this.vertexBuffer=o.createVertexBuffer(C,i.STATIC_DRAW)):this.vertexBuffer=o.createVertexBuffer(C.byteLength,i.DYNAMIC_DRAW),this.setVertexBuffer(),t=S.length-1;t>=0;t--)S[t].rebind();this.hasBooted=!0,o.on(d.RESIZE,this.resize,this),o.on(d.PRE_RENDER,this.onPreRender,this),o.on(d.RENDER,this.onRender,this),o.on(d.POST_RENDER,this.onPostRender,this),this.emit(l.BOOT,this),this.onBoot()},onBoot:function onBoot(){},onResize:function onResize(){},setShader:function setShader(t,i){var r=this.renderer;return t===this.currentShader&&r.currentProgram===this.currentShader.program||(this.flush(),r.resetTextures(),this.setVertexBuffer()&&!i&&(i=!0),t.bind(i,!1),this.currentShader=t),this},getShaderByName:function getShaderByName(t){for(var i=this.shaders,r=0;r<i.length;r++)if(i[r].name===t)return i[r]},setShadersFromConfig:function setShadersFromConfig(t){var i,r=this.shaders,o=this.renderer;for(i=0;i<r.length;i++)r[i].destroy();var h="vertShader",l="fragShader",c="attributes",d=u(t,h,null),p=g.parseFragmentShaderMaxTextures(u(t,l,null),o.maxTextures),m=u(t,c,null),y=u(t,"shaders",[]),T=y.length;if(0===T)d&&p&&(this.shaders=[new v(this,"default",d,p,a(m))]);else{var S=[];for(i=0;i<T;i++){var w=y[i],b=u(w,"name","default"),C=u(w,h,d),A=g.parseFragmentShaderMaxTextures(u(w,l,p),o.maxTextures),E=u(w,c,m);C&&A&&S.push(new v(this,b,C,A,a(E)))}this.shaders=S}return 0===this.shaders.length?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function setGameObject(t,i){return void 0===i&&(i=t.frame),this.currentUnit=this.renderer.setTextureSource(i.source),this.currentUnit},shouldFlush:function shouldFlush(t){return void 0===t&&(t=0),this.vertexCount+t>this.vertexCapacity},resize:function resize(t,i){t===this.width&&i===this.height||this.flush(),this.width=t,this.height=i;for(var r=this.renderTargets,o=0;o<r.length;o++)r[o].resize(t,i);return this.setProjectionMatrix(t,i),this.emit(l.RESIZE,t,i,this),this.onResize(t,i),this},setProjectionMatrix:function setProjectionMatrix(t,i){var r=this.projectionMatrix;if(!r)return this;this.projectionWidth=t,this.projectionHeight=i,r.ortho(0,t,i,0,-1e3,1e3);for(var o=this.shaders,a="uProjectionMatrix",h=0;h<o.length;h++){var l=o[h];l.hasUniform(a)&&(l.resetUniform(a),l.setMatrix4fv(a,!1,r.val,l))}return this},updateProjectionMatrix:function updateProjectionMatrix(){if(this.projectionMatrix){var t=this.renderer.projectionWidth,i=this.renderer.projectionHeight;this.projectionWidth===t&&this.projectionHeight===i||this.setProjectionMatrix(t,i)}},bind:function bind(t){if(void 0===t&&(t=this.currentShader),this.glReset)return this.rebind(t);var i=this.setVertexBuffer();return t.bind(i),this.currentShader=t,this.emit(l.BIND,this,t),this.onActive(t),this},rebind:function rebind(t){this.setVertexBuffer();for(var i=this.shaders,r=i.length-1;r>=0;r--){var o=i[r].rebind();t&&o!==t||(this.currentShader=o)}return this.emit(l.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function setVertexBuffer(){var t=this.gl,i=this.vertexBuffer;return t.getParameter(t.ARRAY_BUFFER_BINDING)!==i&&(t.bindBuffer(t.ARRAY_BUFFER,i),!0)},preBatch:function preBatch(t){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(t),this},postBatch:function postBatch(t){return this.onDraw(this.currentRenderTarget),this.onPostBatch(t),this},onDraw:function onDraw(){},unbind:function unbind(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function flush(t){if(void 0===t&&(t=!1),this.vertexCount>0){this.emit(l.BEFORE_FLUSH,this,t),this.onBeforeFlush(t);var i=this.gl,r=this.vertexCount,o=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),r===this.vertexCapacity?i.bufferData(i.ARRAY_BUFFER,this.vertexData,i.DYNAMIC_DRAW):i.bufferSubData(i.ARRAY_BUFFER,0,this.bytes.subarray(0,r*o)),i.drawArrays(this.topology,0,r)),this.vertexCount=0,this.emit(l.AFTER_FLUSH,this,t),this.onAfterFlush(t)}return this},onActive:function onActive(){},onBind:function onBind(){},onRebind:function onRebind(){},onBatch:function onBatch(){},onPreBatch:function onPreBatch(){},onPostBatch:function onPostBatch(){},onPreRender:function onPreRender(){},onRender:function onRender(){},onPostRender:function onPostRender(){},onBeforeFlush:function onBeforeFlush(){},onAfterFlush:function onAfterFlush(){},batchVert:function batchVert(t,i,r,o,a,h,l){var u=this.vertexViewF32,c=this.vertexViewU32,d=this.vertexCount*this.currentShader.vertexComponentCount-1;u[++d]=t,u[++d]=i,u[++d]=r,u[++d]=o,u[++d]=a,u[++d]=h,c[++d]=l,this.vertexCount++},batchQuad:function batchQuad(t,i,r,o,a,h,l,u,c,d,p,g,v,m,y,T,S,w,b,C){void 0===C&&(C=this.currentUnit);var A=!1;return this.shouldFlush(6)&&(this.flush(),A=!0,C=this.setTexture2D(b)),this.batchVert(i,r,d,p,C,w,m),this.batchVert(o,a,d,v,C,w,T),this.batchVert(h,l,g,v,C,w,S),this.batchVert(i,r,d,p,C,w,m),this.batchVert(h,l,g,v,C,w,S),this.batchVert(u,c,g,p,C,w,y),this.onBatch(t),A},batchTri:function batchTri(t,i,r,o,a,h,l,u,c,d,p,g,v,m,y,T,S){void 0===S&&(S=this.currentUnit);var w=!1;return this.shouldFlush(3)&&(this.flush(),w=!0,S=this.setTexture2D(T)),this.batchVert(i,r,u,c,S,y,g),this.batchVert(o,a,u,p,S,y,v),this.batchVert(h,l,d,p,S,y,m),this.onBatch(t),w},drawFillRect:function drawFillRect(t,i,r,o,a,h,l,u){void 0===l&&(l=this.renderer.whiteTexture.glTexture),void 0===u&&(u=!0),t=Math.floor(t),i=Math.floor(i);var c=Math.floor(t+r),d=Math.floor(i+o),p=this.setTexture2D(l),v=g.getTintAppendFloatAlphaAndSwap(a,h),m=0,y=1;u&&(m=1,y=0),this.batchQuad(null,t,i,t,d,c,d,c,i,0,m,1,y,v,v,v,v,0,l,p)},setTexture2D:function setTexture2D(t){return void 0===t&&(t=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(t),this.currentUnit},bindTexture:function bindTexture(t,i){void 0===i&&(i=0);var r=this.gl;return r.activeTexture(r.TEXTURE0+i),r.bindTexture(r.TEXTURE_2D,t),this},bindRenderTarget:function bindRenderTarget(t,i){return this.bindTexture(t.texture,i)},setTime:function setTime(t){return this.set1f(t,this.game.loop.getDuration()),this},set1f:function set1f(t,i,r){return void 0===r&&(r=this.currentShader),r.set1f(t,i),this},set2f:function set2f(t,i,r,o){return void 0===o&&(o=this.currentShader),o.set2f(t,i,r),this},set3f:function set3f(t,i,r,o,a){return void 0===a&&(a=this.currentShader),a.set3f(t,i,r,o),this},set4f:function set4f(t,i,r,o,a,h){return void 0===h&&(h=this.currentShader),h.set4f(t,i,r,o,a),this},set1fv:function set1fv(t,i,r){return void 0===r&&(r=this.currentShader),r.set1fv(t,i),this},set2fv:function set2fv(t,i,r){return void 0===r&&(r=this.currentShader),r.set2fv(t,i),this},set3fv:function set3fv(t,i,r){return void 0===r&&(r=this.currentShader),r.set3fv(t,i),this},set4fv:function set4fv(t,i,r){return void 0===r&&(r=this.currentShader),r.set4fv(t,i),this},set1iv:function set1iv(t,i,r){return void 0===r&&(r=this.currentShader),r.set1iv(t,i),this},set2iv:function set2iv(t,i,r){return void 0===r&&(r=this.currentShader),r.set2iv(t,i),this},set3iv:function set3iv(t,i,r){return void 0===r&&(r=this.currentShader),r.set3iv(t,i),this},set4iv:function set4iv(t,i,r){return void 0===r&&(r=this.currentShader),r.set4iv(t,i),this},set1i:function set1i(t,i,r){return void 0===r&&(r=this.currentShader),r.set1i(t,i),this},set2i:function set2i(t,i,r,o){return void 0===o&&(o=this.currentShader),o.set2i(t,i,r),this},set3i:function set3i(t,i,r,o,a){return void 0===a&&(a=this.currentShader),a.set3i(t,i,r,o),this},set4i:function set4i(t,i,r,o,a,h){return void 0===h&&(h=this.currentShader),h.set4i(t,i,r,o,a),this},setMatrix2fv:function setMatrix2fv(t,i,r,o){return void 0===o&&(o=this.currentShader),o.setMatrix2fv(t,i,r),this},setMatrix3fv:function setMatrix3fv(t,i,r,o){return void 0===o&&(o=this.currentShader),o.setMatrix3fv(t,i,r),this},setMatrix4fv:function setMatrix4fv(t,i,r,o){return void 0===o&&(o=this.currentShader),o.setMatrix4fv(t,i,r),this},destroy:function destroy(){var t;this.emit(l.DESTROY,this);var i=this.shaders;for(t=0;t<i.length;t++)i[t].destroy();var r=this.renderTargets;for(t=0;t<r.length;t++)r[t].destroy();this.gl.deleteBuffer(this.vertexBuffer);var o=this.renderer;return o.off(d.RESIZE,this.resize,this),o.off(d.PRE_RENDER,this.onPreRender,this),o.off(d.RENDER,this.onRender,this),o.off(d.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});t.exports=m},function(t,i,r){function earcut(t,i,r){r=r||2;var o,a,h,l,u,c,d,p=i&&i.length,g=p?i[0]*r:t.length,v=linkedList(t,0,g,r,!0),m=[];if(!v||v.next===v.prev)return m;if(p&&(v=function eliminateHoles(t,i,r,o){var a,h,l,u=[];for(a=0,h=i.length;a<h;a++)(l=linkedList(t,i[a]*o,a<h-1?i[a+1]*o:t.length,o,!1))===l.next&&(l.steiner=!0),u.push(getLeftmost(l));for(u.sort(compareX),a=0;a<u.length;a++)eliminateHole(u[a],r),r=filterPoints(r,r.next);return r}(t,i,v,r)),t.length>80*r){o=h=t[0],a=l=t[1];for(var y=r;y<g;y+=r)(u=t[y])<o&&(o=u),(c=t[y+1])<a&&(a=c),u>h&&(h=u),c>l&&(l=c);d=0!==(d=Math.max(h-o,l-a))?1/d:0}return earcutLinked(v,m,r,o,a,d),m}function linkedList(t,i,r,o,a){var h,l;if(a===signedArea(t,i,r,o)>0)for(h=i;h<r;h+=o)l=insertNode(h,t[h],t[h+1],l);else for(h=r-o;h>=i;h-=o)l=insertNode(h,t[h],t[h+1],l);return l&&equals(l,l.next)&&(removeNode(l),l=l.next),l}function filterPoints(t,i){if(!t)return t;i||(i=t);var r,o=t;do{if(r=!1,o.steiner||!equals(o,o.next)&&0!==area(o.prev,o,o.next))o=o.next;else{if(removeNode(o),(o=i=o.prev)===o.next)break;r=!0}}while(r||o!==i);return i}function earcutLinked(t,i,r,o,a,h,l){if(t){!l&&h&&function indexCurve(t,i,r,o){var a=t;do{null===a.z&&(a.z=zOrder(a.x,a.y,i,r,o)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next}while(a!==t);a.prevZ.nextZ=null,a.prevZ=null,function sortLinked(t){var i,r,o,a,h,l,u,c,d=1;do{for(r=t,t=null,h=null,l=0;r;){for(l++,o=r,u=0,i=0;i<d&&(u++,o=o.nextZ);i++);for(c=d;u>0||c>0&&o;)0!==u&&(0===c||!o||r.z<=o.z)?(a=r,r=r.nextZ,u--):(a=o,o=o.nextZ,c--),h?h.nextZ=a:t=a,a.prevZ=h,h=a;r=o}h.nextZ=null,d*=2}while(l>1);return t}(a)}(t,o,a,h);for(var u,c,d=t;t.prev!==t.next;)if(u=t.prev,c=t.next,h?isEarHashed(t,o,a,h):isEar(t))i.push(u.i/r),i.push(t.i/r),i.push(c.i/r),removeNode(t),t=c.next,d=c.next;else if((t=c)===d){l?1===l?earcutLinked(t=cureLocalIntersections(filterPoints(t),i,r),i,r,o,a,h,2):2===l&&splitEarcut(t,i,r,o,a,h):earcutLinked(filterPoints(t),i,r,o,a,h,1);break}}}function isEar(t){var i=t.prev,r=t,o=t.next;if(area(i,r,o)>=0)return!1;for(var a=t.next.next;a!==t.prev;){if(pointInTriangle(i.x,i.y,r.x,r.y,o.x,o.y,a.x,a.y)&&area(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function isEarHashed(t,i,r,o){var a=t.prev,h=t,l=t.next;if(area(a,h,l)>=0)return!1;for(var u=a.x<h.x?a.x<l.x?a.x:l.x:h.x<l.x?h.x:l.x,c=a.y<h.y?a.y<l.y?a.y:l.y:h.y<l.y?h.y:l.y,d=a.x>h.x?a.x>l.x?a.x:l.x:h.x>l.x?h.x:l.x,p=a.y>h.y?a.y>l.y?a.y:l.y:h.y>l.y?h.y:l.y,g=zOrder(u,c,i,r,o),v=zOrder(d,p,i,r,o),m=t.prevZ,y=t.nextZ;m&&m.z>=g&&y&&y.z<=v;){if(m!==t.prev&&m!==t.next&&pointInTriangle(a.x,a.y,h.x,h.y,l.x,l.y,m.x,m.y)&&area(m.prev,m,m.next)>=0)return!1;if(m=m.prevZ,y!==t.prev&&y!==t.next&&pointInTriangle(a.x,a.y,h.x,h.y,l.x,l.y,y.x,y.y)&&area(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(;m&&m.z>=g;){if(m!==t.prev&&m!==t.next&&pointInTriangle(a.x,a.y,h.x,h.y,l.x,l.y,m.x,m.y)&&area(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;y&&y.z<=v;){if(y!==t.prev&&y!==t.next&&pointInTriangle(a.x,a.y,h.x,h.y,l.x,l.y,y.x,y.y)&&area(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function cureLocalIntersections(t,i,r){var o=t;do{var a=o.prev,h=o.next.next;!equals(a,h)&&intersects(a,o,o.next,h)&&locallyInside(a,h)&&locallyInside(h,a)&&(i.push(a.i/r),i.push(o.i/r),i.push(h.i/r),removeNode(o),removeNode(o.next),o=t=h),o=o.next}while(o!==t);return filterPoints(o)}function splitEarcut(t,i,r,o,a,h){var l=t;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&isValidDiagonal(l,u)){var c=splitPolygon(l,u);return l=filterPoints(l,l.next),c=filterPoints(c,c.next),earcutLinked(l,i,r,o,a,h),void earcutLinked(c,i,r,o,a,h)}u=u.next}l=l.next}while(l!==t)}function compareX(t,i){return t.x-i.x}function eliminateHole(t,i){if(i=function findHoleBridge(t,i){var r,o=i,a=t.x,h=t.y,l=-1/0;do{if(h<=o.y&&h>=o.next.y&&o.next.y!==o.y){var u=o.x+(h-o.y)*(o.next.x-o.x)/(o.next.y-o.y);if(u<=a&&u>l){if(l=u,u===a){if(h===o.y)return o;if(h===o.next.y)return o.next}r=o.x<o.next.x?o:o.next}}o=o.next}while(o!==i);if(!r)return null;if(a===l)return r;var c,d=r,p=r.x,g=r.y,v=1/0;o=r;do{a>=o.x&&o.x>=p&&a!==o.x&&pointInTriangle(h<g?a:l,h,p,g,h<g?l:a,h,o.x,o.y)&&(c=Math.abs(h-o.y)/(a-o.x),locallyInside(o,t)&&(c<v||c===v&&(o.x>r.x||o.x===r.x&&sectorContainsSector(r,o)))&&(r=o,v=c)),o=o.next}while(o!==d);return r}(t,i),i){var r=splitPolygon(i,t);filterPoints(i,i.next),filterPoints(r,r.next)}}function sectorContainsSector(t,i){return area(t.prev,t,i.prev)<0&&area(i.next,t,t.next)<0}function zOrder(t,i,r,o,a){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*a)|t<<8))|t<<4))|t<<2))|t<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=32767*(i-o)*a)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function getLeftmost(t){var i=t,r=t;do{(i.x<r.x||i.x===r.x&&i.y<r.y)&&(r=i),i=i.next}while(i!==t);return r}function pointInTriangle(t,i,r,o,a,h,l,u){return(a-l)*(i-u)-(t-l)*(h-u)>=0&&(t-l)*(o-u)-(r-l)*(i-u)>=0&&(r-l)*(h-u)-(a-l)*(o-u)>=0}function isValidDiagonal(t,i){return t.next.i!==i.i&&t.prev.i!==i.i&&!function intersectsPolygon(t,i){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==i.i&&r.next.i!==i.i&&intersects(r,r.next,t,i))return!0;r=r.next}while(r!==t);return!1}(t,i)&&(locallyInside(t,i)&&locallyInside(i,t)&&function middleInside(t,i){var r=t,o=!1,a=(t.x+i.x)/2,h=(t.y+i.y)/2;do{r.y>h!=r.next.y>h&&r.next.y!==r.y&&a<(r.next.x-r.x)*(h-r.y)/(r.next.y-r.y)+r.x&&(o=!o),r=r.next}while(r!==t);return o}(t,i)&&(area(t.prev,t,i.prev)||area(t,i.prev,i))||equals(t,i)&&area(t.prev,t,t.next)>0&&area(i.prev,i,i.next)>0)}function area(t,i,r){return(i.y-t.y)*(r.x-i.x)-(i.x-t.x)*(r.y-i.y)}function equals(t,i){return t.x===i.x&&t.y===i.y}function intersects(t,i,r,o){var a=sign(area(t,i,r)),h=sign(area(t,i,o)),l=sign(area(r,o,t)),u=sign(area(r,o,i));return a!==h&&l!==u||!(0!==a||!onSegment(t,r,i))||!(0!==h||!onSegment(t,o,i))||!(0!==l||!onSegment(r,t,o))||!(0!==u||!onSegment(r,i,o))}function onSegment(t,i,r){return i.x<=Math.max(t.x,r.x)&&i.x>=Math.min(t.x,r.x)&&i.y<=Math.max(t.y,r.y)&&i.y>=Math.min(t.y,r.y)}function sign(t){return t>0?1:t<0?-1:0}function locallyInside(t,i){return area(t.prev,t,t.next)<0?area(t,i,t.next)>=0&&area(t,t.prev,i)>=0:area(t,i,t.prev)<0||area(t,t.next,i)<0}function splitPolygon(t,i){var r=new Node(t.i,t.x,t.y),o=new Node(i.i,i.x,i.y),a=t.next,h=i.prev;return t.next=i,i.prev=t,r.next=a,a.prev=r,o.next=r,r.prev=o,h.next=o,o.prev=h,o}function insertNode(t,i,r,o){var a=new Node(t,i,r);return o?(a.next=o.next,a.prev=o,o.next.prev=a,o.next=a):(a.prev=a,a.next=a),a}function removeNode(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Node(t,i,r){this.i=t,this.x=i,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(t,i,r,o){for(var a=0,h=i,l=r-o;h<r;h+=o)a+=(t[l]-t[h])*(t[h+1]+t[l+1]),l=h;return a}earcut.deviation=function(t,i,r,o){var a=i&&i.length,h=a?i[0]*r:t.length,l=Math.abs(signedArea(t,0,h,r));if(a)for(var u=0,c=i.length;u<c;u++){var d=i[u]*r,p=u<c-1?i[u+1]*r:t.length;l-=Math.abs(signedArea(t,d,p,r))}var g=0;for(u=0;u<o.length;u+=3){var v=o[u]*r,m=o[u+1]*r,y=o[u+2]*r;g+=Math.abs((t[v]-t[y])*(t[m+1]-t[v+1])-(t[v]-t[m])*(t[y+1]-t[v+1]))}return 0===l&&0===g?0:Math.abs((g-l)/l)},earcut.flatten=function(t){for(var i=t[0][0].length,r={vertices:[],holes:[],dimensions:i},o=0,a=0;a<t.length;a++){for(var h=0;h<t[a].length;h++)for(var l=0;l<i;l++)r.vertices.push(t[a][h][l]);a>0&&(o+=t[a-1].length,r.holes.push(o))}return r},t.exports=earcut},function(t,i){t.exports=function LineStyleCanvas(t,i,r,o){var a=r||i.strokeColor,h=o||i.strokeAlpha,l=(16711680&a)>>>16,u=(65280&a)>>>8,c=255&a;t.strokeStyle="rgba("+l+","+u+","+c+","+h+")",t.lineWidth=i.lineWidth}},function(t,i,r){var o=r(0),a=r(21),h=r(23),l=r(8),u=r(2),c=r(6),d=r(7),p=new o({Extends:h,initialize:function JSONFile(t,i,r,o,l){var p="json";if(d(i)){var g=i;i=u(g,"key"),r=u(g,"url"),o=u(g,"xhrSettings"),p=u(g,"extension",p),l=u(g,"dataKey",l)}var v={type:"json",cache:t.cacheManager.json,extension:p,responseType:"text",key:i,url:r,xhrSettings:o,config:l};h.call(this,t,v),d(r)&&(this.data=l?c(r,l):r,this.state=a.FILE_POPULATED)},onProcess:function onProcess(){if(this.state!==a.FILE_POPULATED){this.state=a.FILE_PROCESSING;try{var t=JSON.parse(this.xhrLoader.responseText)}catch(r){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),r}var i=this.config;this.data="string"==typeof i?c(t,i,t):t}this.onProcessComplete()}});l.register("json",(function(t,i,r,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new p(this,t[a]));else this.addFile(new p(this,t,i,o,r));return this})),t.exports=p},function(t,i){t.exports={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14}},function(t,i,r){var o=r(158),a=r(26);t.exports=function CalculateFacesWithin(t,i,r,h,l){for(var u=null,c=null,d=null,p=null,g=a(t,i,r,h,null,l),v=0;v<g.length;v++){var m=g[v];m&&(m.collides?(u=o(m.x,m.y-1,!0,l),c=o(m.x,m.y+1,!0,l),d=o(m.x-1,m.y,!0,l),p=o(m.x+1,m.y,!0,l),m.faceTop=!u||!u.collides,m.faceBottom=!c||!c.collides,m.faceLeft=!d||!d.collides,m.faceRight=!p||!p.collides):m.resetFaces())}}},function(t,i,r){var o={};t.exports=o;var a=r(83),h=r(32);o.create=function(t,i){for(var r=[],o=0;o<t.length;o++){var a=t[o],h={x:a.x,y:a.y,index:o,body:i,isInternal:!1,contact:null,offset:null};h.contact={vertex:h,normalImpulse:0,tangentImpulse:0},r.push(h)}return r},o.fromPath=function(t,i){var r=[];return t.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/gi,(function(t,i,o){r.push({x:parseFloat(i),y:parseFloat(o)})})),o.create(r,i)},o.centre=function(t){for(var i,r,h,l=o.area(t,!0),u={x:0,y:0},c=0;c<t.length;c++)h=(c+1)%t.length,i=a.cross(t[c],t[h]),r=a.mult(a.add(t[c],t[h]),i),u=a.add(u,r);return a.div(u,6*l)},o.mean=function(t){for(var i={x:0,y:0},r=0;r<t.length;r++)i.x+=t[r].x,i.y+=t[r].y;return a.div(i,t.length)},o.area=function(t,i){for(var r=0,o=t.length-1,a=0;a<t.length;a++)r+=(t[o].x-t[a].x)*(t[o].y+t[a].y),o=a;return i?r/2:Math.abs(r)/2},o.inertia=function(t,i){for(var r,o,h=0,l=0,u=t,c=0;c<u.length;c++)o=(c+1)%u.length,h+=(r=Math.abs(a.cross(u[o],u[c])))*(a.dot(u[o],u[o])+a.dot(u[o],u[c])+a.dot(u[c],u[c])),l+=r;return i/6*(h/l)},o.translate=function(t,i,r){var o;if(r)for(o=0;o<t.length;o++)t[o].x+=i.x*r,t[o].y+=i.y*r;else for(o=0;o<t.length;o++)t[o].x+=i.x,t[o].y+=i.y;return t},o.rotate=function(t,i,r){if(0!==i){for(var o=Math.cos(i),a=Math.sin(i),h=0;h<t.length;h++){var l=t[h],u=l.x-r.x,c=l.y-r.y;l.x=r.x+(u*o-c*a),l.y=r.y+(u*a+c*o)}return t}},o.contains=function(t,i){for(var r=0;r<t.length;r++){var o=t[r],a=t[(r+1)%t.length];if((i.x-o.x)*(a.y-o.y)+(i.y-o.y)*(o.x-a.x)>0)return!1}return!0},o.scale=function(t,i,r,h){if(1===i&&1===r)return t;var l,u;h=h||o.centre(t);for(var c=0;c<t.length;c++)l=t[c],u=a.sub(l,h),t[c].x=h.x+u.x*i,t[c].y=h.y+u.y*r;return t},o.chamfer=function(t,i,r,o,l){i="number"==typeof i?[i]:i||[8],r=void 0!==r?r:-1,o=o||2,l=l||14;for(var u=[],c=0;c<t.length;c++){var d=t[c-1>=0?c-1:t.length-1],p=t[c],g=t[(c+1)%t.length],v=i[c<i.length?c:i.length-1];if(0!==v){var m=a.normalise({x:p.y-d.y,y:d.x-p.x}),y=a.normalise({x:g.y-p.y,y:p.x-g.x}),T=Math.sqrt(2*Math.pow(v,2)),S=a.mult(h.clone(m),v),w=a.normalise(a.mult(a.add(m,y),.5)),b=a.sub(p,a.mult(w,T)),C=r;-1===r&&(C=1.75*Math.pow(v,.32)),(C=h.clamp(C,o,l))%2==1&&(C+=1);for(var A=Math.acos(a.dot(m,y))/C,E=0;E<C;E++)u.push(a.add(a.rotate(S,A*E),b))}else u.push(p)}return u},o.clockwiseSort=function(t){var i=o.mean(t);return t.sort((function(t,r){return a.angle(i,t)-a.angle(i,r)})),t},o.isConvex=function(t){var i,r,o,a,h=0,l=t.length;if(l<3)return null;for(i=0;i<l;i++)if(o=(i+2)%l,a=(t[r=(i+1)%l].x-t[i].x)*(t[o].y-t[r].y),(a-=(t[r].y-t[i].y)*(t[o].x-t[r].x))<0?h|=1:a>0&&(h|=2),3===h)return!1;return 0!==h||null},o.hull=function(t){var i,r,o=[],h=[];for((t=t.slice(0)).sort((function(t,i){var r=t.x-i.x;return 0!==r?r:t.y-i.y})),r=0;r<t.length;r+=1){for(i=t[r];h.length>=2&&a.cross3(h[h.length-2],h[h.length-1],i)<=0;)h.pop();h.push(i)}for(r=t.length-1;r>=0;r-=1){for(i=t[r];o.length>=2&&a.cross3(o[o.length-2],o[o.length-1],i)<=0;)o.pop();o.push(i)}return o.pop(),h.pop(),o.concat(h)}},function(t,i,r){var o=r(0),a=r(66),h=r(300),l=r(301),u=r(56),c=r(170),d=new o({initialize:function Circle(t,i,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),this.type=u.CIRCLE,this.x=t,this.y=i,this._radius=r,this._diameter=2*r},contains:function contains(t,i){return a(this,t,i)},getPoint:function getPoint(t,i){return h(this,t,i)},getPoints:function getPoints(t,i,r){return l(this,t,i,r)},getRandomPoint:function getRandomPoint(t){return c(this,t)},setTo:function setTo(t,i,r){return this.x=t,this.y=i,this._radius=r,this._diameter=2*r,this},setEmpty:function setEmpty(){return this._radius=0,this._diameter=0,this},setPosition:function setPosition(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},isEmpty:function isEmpty(){return this._radius<=0},radius:{get:function get(){return this._radius},set:function set(t){this._radius=t,this._diameter=2*t}},diameter:{get:function get(){return this._diameter},set:function set(t){this._diameter=t,this._radius=.5*t}},left:{get:function get(){return this.x-this._radius},set:function set(t){this.x=t+this._radius}},right:{get:function get(){return this.x+this._radius},set:function set(t){this.x=t-this._radius}},top:{get:function get(){return this.y-this._radius},set:function set(t){this.y=t+this._radius}},bottom:{get:function get(){return this.y+this._radius},set:function set(t){this.y=t-this._radius}}});t.exports=d},function(t,i){t.exports=function Contains(t,i,r){return t.radius>0&&i>=t.left&&i<=t.right&&r>=t.top&&r<=t.bottom&&(t.x-i)*(t.x-i)+(t.y-r)*(t.y-r)<=t.radius*t.radius}},function(t,i){t.exports=function Length(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))}},function(t,i){t.exports=function Wrap(t,i,r){var o=r-i;return i+((t-i)%o+o)%o}},function(t,i,r){var o=r(0),a=r(39),h=1e-6,l=new o({initialize:function Matrix4(t){this.val=new Float32Array(16),t?this.copy(t):this.identity()},clone:function clone(){return new l(this)},set:function set(t){return this.copy(t)},setValues:function setValues(t,i,r,o,a,h,l,u,c,d,p,g,v,m,y,T){var S=this.val;return S[0]=t,S[1]=i,S[2]=r,S[3]=o,S[4]=a,S[5]=h,S[6]=l,S[7]=u,S[8]=c,S[9]=d,S[10]=p,S[11]=g,S[12]=v,S[13]=m,S[14]=y,S[15]=T,this},copy:function copy(t){var i=t.val;return this.setValues(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9],i[10],i[11],i[12],i[13],i[14],i[15])},fromArray:function fromArray(t){return this.setValues(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},zero:function zero(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function transform(t,i,r){var o=u.fromQuat(r).val,a=i.x,h=i.y,l=i.z;return this.setValues(o[0]*a,o[1]*a,o[2]*a,0,o[4]*h,o[5]*h,o[6]*h,0,o[8]*l,o[9]*l,o[10]*l,0,t.x,t.y,t.z,1)},xyz:function xyz(t,i,r){this.identity();var o=this.val;return o[12]=t,o[13]=i,o[14]=r,this},scaling:function scaling(t,i,r){this.zero();var o=this.val;return o[0]=t,o[5]=i,o[10]=r,o[15]=1,this},identity:function identity(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function transpose(){var t=this.val,i=t[1],r=t[2],o=t[3],a=t[6],h=t[7],l=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=i,t[6]=t[9],t[7]=t[13],t[8]=r,t[9]=a,t[11]=t[14],t[12]=o,t[13]=h,t[14]=l,this},getInverse:function getInverse(t){return this.copy(t),this.invert()},invert:function invert(){var t=this.val,i=t[0],r=t[1],o=t[2],a=t[3],h=t[4],l=t[5],u=t[6],c=t[7],d=t[8],p=t[9],g=t[10],v=t[11],m=t[12],y=t[13],T=t[14],S=t[15],w=i*l-r*h,b=i*u-o*h,C=i*c-a*h,A=r*u-o*l,E=r*c-a*l,M=o*c-a*u,_=d*y-p*m,R=d*T-g*m,P=d*S-v*m,k=p*T-g*y,O=p*S-v*y,L=g*S-v*T,D=w*L-b*O+C*k+A*P-E*R+M*_;return D?(D=1/D,this.setValues((l*L-u*O+c*k)*D,(o*O-r*L-a*k)*D,(y*M-T*E+S*A)*D,(g*E-p*M-v*A)*D,(u*P-h*L-c*R)*D,(i*L-o*P+a*R)*D,(T*C-m*M-S*b)*D,(d*M-g*C+v*b)*D,(h*O-l*P+c*_)*D,(r*P-i*O-a*_)*D,(m*E-y*C+S*w)*D,(p*C-d*E-v*w)*D,(l*R-h*k-u*_)*D,(i*k-r*R+o*_)*D,(y*b-m*A-T*w)*D,(d*A-p*b+g*w)*D)):this},adjoint:function adjoint(){var t=this.val,i=t[0],r=t[1],o=t[2],a=t[3],h=t[4],l=t[5],u=t[6],c=t[7],d=t[8],p=t[9],g=t[10],v=t[11],m=t[12],y=t[13],T=t[14],S=t[15];return this.setValues(l*(g*S-v*T)-p*(u*S-c*T)+y*(u*v-c*g),-(r*(g*S-v*T)-p*(o*S-a*T)+y*(o*v-a*g)),r*(u*S-c*T)-l*(o*S-a*T)+y*(o*c-a*u),-(r*(u*v-c*g)-l*(o*v-a*g)+p*(o*c-a*u)),-(h*(g*S-v*T)-d*(u*S-c*T)+m*(u*v-c*g)),i*(g*S-v*T)-d*(o*S-a*T)+m*(o*v-a*g),-(i*(u*S-c*T)-h*(o*S-a*T)+m*(o*c-a*u)),i*(u*v-c*g)-h*(o*v-a*g)+d*(o*c-a*u),h*(p*S-v*y)-d*(l*S-c*y)+m*(l*v-c*p),-(i*(p*S-v*y)-d*(r*S-a*y)+m*(r*v-a*p)),i*(l*S-c*y)-h*(r*S-a*y)+m*(r*c-a*l),-(i*(l*v-c*p)-h*(r*v-a*p)+d*(r*c-a*l)),-(h*(p*T-g*y)-d*(l*T-u*y)+m*(l*g-u*p)),i*(p*T-g*y)-d*(r*T-o*y)+m*(r*g-o*p),-(i*(l*T-u*y)-h*(r*T-o*y)+m*(r*u-o*l)),i*(l*g-u*p)-h*(r*g-o*p)+d*(r*u-o*l))},determinant:function determinant(){var t=this.val,i=t[0],r=t[1],o=t[2],a=t[3],h=t[4],l=t[5],u=t[6],c=t[7],d=t[8],p=t[9],g=t[10],v=t[11],m=t[12],y=t[13],T=t[14],S=t[15];return(i*l-r*h)*(g*S-v*T)-(i*u-o*h)*(p*S-v*y)+(i*c-a*h)*(p*T-g*y)+(r*u-o*l)*(d*S-v*m)-(r*c-a*l)*(d*T-g*m)+(o*c-a*u)*(d*y-p*m)},multiply:function multiply(t){var i=this.val,r=i[0],o=i[1],a=i[2],h=i[3],l=i[4],u=i[5],c=i[6],d=i[7],p=i[8],g=i[9],v=i[10],m=i[11],y=i[12],T=i[13],S=i[14],w=i[15],b=t.val,C=b[0],A=b[1],E=b[2],M=b[3];return i[0]=C*r+A*l+E*p+M*y,i[1]=C*o+A*u+E*g+M*T,i[2]=C*a+A*c+E*v+M*S,i[3]=C*h+A*d+E*m+M*w,C=b[4],A=b[5],E=b[6],M=b[7],i[4]=C*r+A*l+E*p+M*y,i[5]=C*o+A*u+E*g+M*T,i[6]=C*a+A*c+E*v+M*S,i[7]=C*h+A*d+E*m+M*w,C=b[8],A=b[9],E=b[10],M=b[11],i[8]=C*r+A*l+E*p+M*y,i[9]=C*o+A*u+E*g+M*T,i[10]=C*a+A*c+E*v+M*S,i[11]=C*h+A*d+E*m+M*w,C=b[12],A=b[13],E=b[14],M=b[15],i[12]=C*r+A*l+E*p+M*y,i[13]=C*o+A*u+E*g+M*T,i[14]=C*a+A*c+E*v+M*S,i[15]=C*h+A*d+E*m+M*w,this},multiplyLocal:function multiplyLocal(t){var i=this.val,r=t.val;return this.setValues(i[0]*r[0]+i[1]*r[4]+i[2]*r[8]+i[3]*r[12],i[0]*r[1]+i[1]*r[5]+i[2]*r[9]+i[3]*r[13],i[0]*r[2]+i[1]*r[6]+i[2]*r[10]+i[3]*r[14],i[0]*r[3]+i[1]*r[7]+i[2]*r[11]+i[3]*r[15],i[4]*r[0]+i[5]*r[4]+i[6]*r[8]+i[7]*r[12],i[4]*r[1]+i[5]*r[5]+i[6]*r[9]+i[7]*r[13],i[4]*r[2]+i[5]*r[6]+i[6]*r[10]+i[7]*r[14],i[4]*r[3]+i[5]*r[7]+i[6]*r[11]+i[7]*r[15],i[8]*r[0]+i[9]*r[4]+i[10]*r[8]+i[11]*r[12],i[8]*r[1]+i[9]*r[5]+i[10]*r[9]+i[11]*r[13],i[8]*r[2]+i[9]*r[6]+i[10]*r[10]+i[11]*r[14],i[8]*r[3]+i[9]*r[7]+i[10]*r[11]+i[11]*r[15],i[12]*r[0]+i[13]*r[4]+i[14]*r[8]+i[15]*r[12],i[12]*r[1]+i[13]*r[5]+i[14]*r[9]+i[15]*r[13],i[12]*r[2]+i[13]*r[6]+i[14]*r[10]+i[15]*r[14],i[12]*r[3]+i[13]*r[7]+i[14]*r[11]+i[15]*r[15])},premultiply:function premultiply(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function multiplyMatrices(t,i){var r=t.val,o=i.val,a=r[0],h=r[4],l=r[8],u=r[12],c=r[1],d=r[5],p=r[9],g=r[13],v=r[2],m=r[6],y=r[10],T=r[14],S=r[3],w=r[7],b=r[11],C=r[15],A=o[0],E=o[4],M=o[8],_=o[12],R=o[1],P=o[5],k=o[9],O=o[13],L=o[2],D=o[6],I=o[10],B=o[14],N=o[3],G=o[7],Y=o[11],U=o[15];return this.setValues(a*A+h*R+l*L+u*N,c*A+d*R+p*L+g*N,v*A+m*R+y*L+T*N,S*A+w*R+b*L+C*N,a*E+h*P+l*D+u*G,c*E+d*P+p*D+g*G,v*E+m*P+y*D+T*G,S*E+w*P+b*D+C*G,a*M+h*k+l*I+u*Y,c*M+d*k+p*I+g*Y,v*M+m*k+y*I+T*Y,S*M+w*k+b*I+C*Y,a*_+h*O+l*B+u*U,c*_+d*O+p*B+g*U,v*_+m*O+y*B+T*U,S*_+w*O+b*B+C*U)},translate:function translate(t){return this.translateXYZ(t.x,t.y,t.z)},translateXYZ:function translateXYZ(t,i,r){var o=this.val;return o[12]=o[0]*t+o[4]*i+o[8]*r+o[12],o[13]=o[1]*t+o[5]*i+o[9]*r+o[13],o[14]=o[2]*t+o[6]*i+o[10]*r+o[14],o[15]=o[3]*t+o[7]*i+o[11]*r+o[15],this},scale:function scale(t){return this.scaleXYZ(t.x,t.y,t.z)},scaleXYZ:function scaleXYZ(t,i,r){var o=this.val;return o[0]=o[0]*t,o[1]=o[1]*t,o[2]=o[2]*t,o[3]=o[3]*t,o[4]=o[4]*i,o[5]=o[5]*i,o[6]=o[6]*i,o[7]=o[7]*i,o[8]=o[8]*r,o[9]=o[9]*r,o[10]=o[10]*r,o[11]=o[11]*r,this},makeRotationAxis:function makeRotationAxis(t,i){var r=Math.cos(i),o=Math.sin(i),a=1-r,h=t.x,l=t.y,u=t.z,c=a*h,d=a*l;return this.setValues(c*h+r,c*l-o*u,c*u+o*l,0,c*l+o*u,d*l+r,d*u-o*h,0,c*u-o*l,d*u+o*h,a*u*u+r,0,0,0,0,1)},rotate:function rotate(t,i){var r=this.val,o=i.x,a=i.y,l=i.z,u=Math.sqrt(o*o+a*a+l*l);if(Math.abs(u)<h)return this;o*=u=1/u,a*=u,l*=u;var c=Math.sin(t),d=Math.cos(t),p=1-d,g=r[0],v=r[1],m=r[2],y=r[3],T=r[4],S=r[5],w=r[6],b=r[7],C=r[8],A=r[9],E=r[10],M=r[11],_=r[12],R=r[13],P=r[14],k=r[15],O=o*o*p+d,L=a*o*p+l*c,D=l*o*p-a*c,I=o*a*p-l*c,B=a*a*p+d,N=l*a*p+o*c,G=o*l*p+a*c,Y=a*l*p-o*c,U=l*l*p+d;return this.setValues(g*O+T*L+C*D,v*O+S*L+A*D,m*O+w*L+E*D,y*O+b*L+M*D,g*I+T*B+C*N,v*I+S*B+A*N,m*I+w*B+E*N,y*I+b*B+M*N,g*G+T*Y+C*U,v*G+S*Y+A*U,m*G+w*Y+E*U,y*G+b*Y+M*U,_,R,P,k)},rotateX:function rotateX(t){var i=this.val,r=Math.sin(t),o=Math.cos(t),a=i[4],h=i[5],l=i[6],u=i[7],c=i[8],d=i[9],p=i[10],g=i[11];return i[4]=a*o+c*r,i[5]=h*o+d*r,i[6]=l*o+p*r,i[7]=u*o+g*r,i[8]=c*o-a*r,i[9]=d*o-h*r,i[10]=p*o-l*r,i[11]=g*o-u*r,this},rotateY:function rotateY(t){var i=this.val,r=Math.sin(t),o=Math.cos(t),a=i[0],h=i[1],l=i[2],u=i[3],c=i[8],d=i[9],p=i[10],g=i[11];return i[0]=a*o-c*r,i[1]=h*o-d*r,i[2]=l*o-p*r,i[3]=u*o-g*r,i[8]=a*r+c*o,i[9]=h*r+d*o,i[10]=l*r+p*o,i[11]=u*r+g*o,this},rotateZ:function rotateZ(t){var i=this.val,r=Math.sin(t),o=Math.cos(t),a=i[0],h=i[1],l=i[2],u=i[3],c=i[4],d=i[5],p=i[6],g=i[7];return i[0]=a*o+c*r,i[1]=h*o+d*r,i[2]=l*o+p*r,i[3]=u*o+g*r,i[4]=c*o-a*r,i[5]=d*o-h*r,i[6]=p*o-l*r,i[7]=g*o-u*r,this},fromRotationTranslation:function fromRotationTranslation(t,i){var r=t.x,o=t.y,a=t.z,h=t.w,l=r+r,u=o+o,c=a+a,d=r*l,p=r*u,g=r*c,v=o*u,m=o*c,y=a*c,T=h*l,S=h*u,w=h*c;return this.setValues(1-(v+y),p+w,g-S,0,p-w,1-(d+y),m+T,0,g+S,m-T,1-(d+v),0,i.x,i.y,i.z,1)},fromQuat:function fromQuat(t){var i=t.x,r=t.y,o=t.z,a=t.w,h=i+i,l=r+r,u=o+o,c=i*h,d=i*l,p=i*u,g=r*l,v=r*u,m=o*u,y=a*h,T=a*l,S=a*u;return this.setValues(1-(g+m),d+S,p-T,0,d-S,1-(c+m),v+y,0,p+T,v-y,1-(c+g),0,0,0,0,1)},frustum:function frustum(t,i,r,o,a,h){var l=1/(i-t),u=1/(o-r),c=1/(a-h);return this.setValues(2*a*l,0,0,0,0,2*a*u,0,0,(i+t)*l,(o+r)*u,(h+a)*c,-1,0,0,h*a*2*c,0)},perspective:function perspective(t,i,r,o){var a=1/Math.tan(t/2),h=1/(r-o);return this.setValues(a/i,0,0,0,0,a,0,0,0,0,(o+r)*h,-1,0,0,2*o*r*h,0)},perspectiveLH:function perspectiveLH(t,i,r,o){return this.setValues(2*r/t,0,0,0,0,2*r/i,0,0,0,0,-o/(r-o),1,0,0,r*o/(r-o),0)},ortho:function ortho(t,i,r,o,a,h){var l=t-i,u=r-o,c=a-h;return l=0===l?l:1/l,u=0===u?u:1/u,c=0===c?c:1/c,this.setValues(-2*l,0,0,0,0,-2*u,0,0,0,0,2*c,0,(t+i)*l,(o+r)*u,(h+a)*c,1)},lookAtRH:function lookAtRH(t,i,r){var o=this.val;return g.subVectors(t,i),0===g.getLengthSquared()&&(g.z=1),g.normalize(),d.crossVectors(r,g),0===d.getLengthSquared()&&(1===Math.abs(r.z)?g.x+=1e-4:g.z+=1e-4,g.normalize(),d.crossVectors(r,g)),d.normalize(),p.crossVectors(g,d),o[0]=d.x,o[1]=d.y,o[2]=d.z,o[4]=p.x,o[5]=p.y,o[6]=p.z,o[8]=g.x,o[9]=g.y,o[10]=g.z,this},lookAt:function lookAt(t,i,r){var o=t.x,a=t.y,l=t.z,u=r.x,c=r.y,d=r.z,p=i.x,g=i.y,v=i.z;if(Math.abs(o-p)<h&&Math.abs(a-g)<h&&Math.abs(l-v)<h)return this.identity();var m=o-p,y=a-g,T=l-v,S=1/Math.sqrt(m*m+y*y+T*T),w=c*(T*=S)-d*(y*=S),b=d*(m*=S)-u*T,C=u*y-c*m;(S=Math.sqrt(w*w+b*b+C*C))?(w*=S=1/S,b*=S,C*=S):(w=0,b=0,C=0);var A=y*C-T*b,E=T*w-m*C,M=m*b-y*w;return(S=Math.sqrt(A*A+E*E+M*M))?(A*=S=1/S,E*=S,M*=S):(A=0,E=0,M=0),this.setValues(w,A,m,0,b,E,y,0,C,M,T,0,-(w*o+b*a+C*l),-(A*o+E*a+M*l),-(m*o+y*a+T*l),1)},yawPitchRoll:function yawPitchRoll(t,i,r){this.zero(),u.zero(),c.zero();var o=this.val,a=u.val,h=c.val,l=Math.sin(r),d=Math.cos(r);return o[10]=1,o[15]=1,o[0]=d,o[1]=l,o[4]=-l,o[5]=d,l=Math.sin(i),d=Math.cos(i),a[0]=1,a[15]=1,a[5]=d,a[10]=d,a[9]=-l,a[6]=l,l=Math.sin(t),d=Math.cos(t),h[5]=1,h[15]=1,h[0]=d,h[2]=-l,h[8]=l,h[10]=d,this.multiplyLocal(u),this.multiplyLocal(c),this},setWorldMatrix:function setWorldMatrix(t,i,r,o,a){return this.yawPitchRoll(t.y,t.x,t.z),u.scaling(r.x,r.y,r.z),c.xyz(i.x,i.y,i.z),this.multiplyLocal(u),this.multiplyLocal(c),o&&this.multiplyLocal(o),a&&this.multiplyLocal(a),this},multiplyToMat4:function multiplyToMat4(t,i){var r=this.val,o=t.val,a=r[0],h=r[1],l=r[2],u=r[3],c=r[4],d=r[5],p=r[6],g=r[7],v=r[8],m=r[9],y=r[10],T=r[11],S=r[12],w=r[13],b=r[14],C=r[15],A=o[0],E=o[1],M=o[2],_=o[3],R=o[4],P=o[5],k=o[6],O=o[7],L=o[8],D=o[9],I=o[10],B=o[11],N=o[12],G=o[13],Y=o[14],U=o[15];return i.setValues(A*a+E*c+M*v+_*S,E*h+E*d+M*m+_*w,M*l+E*p+M*y+_*b,_*u+E*g+M*T+_*C,R*a+P*c+k*v+O*S,R*h+P*d+k*m+O*w,R*l+P*p+k*y+O*b,R*u+P*g+k*T+O*C,L*a+D*c+I*v+B*S,L*h+D*d+I*m+B*w,L*l+D*p+I*y+B*b,L*u+D*g+I*T+B*C,N*a+G*c+Y*v+U*S,N*h+G*d+Y*m+U*w,N*l+G*p+Y*y+U*b,N*u+G*g+Y*T+U*C)},fromRotationXYTranslation:function fromRotationXYTranslation(t,i,r){var o=i.x,a=i.y,h=i.z,l=Math.sin(t.x),u=Math.cos(t.x),c=Math.sin(t.y),d=Math.cos(t.y),p=o,g=a,v=h,m=-l,y=0-m*c,T=0-u*c,S=m*d,w=u*d;return r||(p=d*o+c*h,g=y*o+u*a+S*h,v=T*o+l*a+w*h),this.setValues(d,y,T,0,0,u,l,0,c,S,w,0,p,g,v,1)},getMaxScaleOnAxis:function getMaxScaleOnAxis(){var t=this.val,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],o=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(i,r,o))}}),u=new l,c=new l,d=new a,p=new a,g=new a;t.exports=l},function(t,i,r){t.exports={COMPLETE:r(987),DECODED:r(988),DECODED_ALL:r(989),DESTROY:r(990),DETUNE:r(991),GLOBAL_DETUNE:r(992),GLOBAL_MUTE:r(993),GLOBAL_RATE:r(994),GLOBAL_VOLUME:r(995),LOOP:r(996),LOOPED:r(997),MUTE:r(998),PAN:r(999),PAUSE_ALL:r(1e3),PAUSE:r(1001),PLAY:r(1002),RATE:r(1003),RESUME_ALL:r(1004),RESUME:r(1005),SEEK:r(1006),STOP_ALL:r(1007),STOP:r(1008),UNLOCKED:r(1009),VOLUME:r(1010)}},function(t,i,r){var o=r(0),a=r(21),h=r(23),l=r(8),u=r(2),c=r(7),d=new o({Extends:h,initialize:function ImageFile(t,i,r,o,a){var l,d="png";if(c(i)){var p=i;i=u(p,"key"),r=u(p,"url"),l=u(p,"normalMap"),o=u(p,"xhrSettings"),d=u(p,"extension",d),a=u(p,"frameConfig")}Array.isArray(r)&&(l=r[1],r=r[0]);var g={type:"image",cache:t.textureManager,extension:d,responseType:"blob",key:i,url:r,xhrSettings:o,config:a};if(h.call(this,t,g),l){var v=new ImageFile(t,this.key,l,o,a);v.type="normalMap",this.setLink(v),t.addFile(v)}},onProcess:function onProcess(){this.state=a.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var t=this;this.data.onload=function(){h.revokeObjectURL(t.data),t.onProcessComplete()},this.data.onerror=function(){h.revokeObjectURL(t.data),t.onProcessError()},h.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function addToCache(){var t,i=this.linkFile;i&&i.state===a.FILE_COMPLETE?(t="image"===this.type?this.cache.addImage(this.key,this.data,i.data):this.cache.addImage(i.key,i.data,this.data),this.pendingDestroy(t),i.pendingDestroy(t)):i||(t=this.cache.addImage(this.key,this.data),this.pendingDestroy(t))}});l.register("image",(function(t,i,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new d(this,t[o]));else this.addFile(new d(this,t,i,r));return this})),t.exports=d},function(t,i){t.exports=function SetTileCollision(t,i){i?t.setCollision(!0,!0,!0,!0,!1):t.resetCollision(!1)}},function(t,i,r){var o=r(164),a=r(0),h=r(11),l=r(15),u=r(1065),c=new a({Extends:l,Mixins:[h.Alpha,h.BlendMode,h.Depth,h.Flip,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.ScrollFactor,h.Size,h.TextureCrop,h.Tint,h.Transform,h.Visible,u],initialize:function Sprite(t,i,r,a,h){l.call(this,t,"Sprite"),this._crop=this.resetCropObject(),this.anims=new o(this),this.setTexture(a,h),this.setPosition(i,r),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function addedToScene(){this.scene.sys.updateList.add(this)},removedFromScene:function removedFromScene(){this.scene.sys.updateList.remove(this)},preUpdate:function preUpdate(t,i){this.anims.update(t,i)},play:function play(t,i){return this.anims.play(t,i)},playReverse:function playReverse(t,i){return this.anims.playReverse(t,i)},playAfterDelay:function playAfterDelay(t,i){return this.anims.playAfterDelay(t,i)},playAfterRepeat:function playAfterRepeat(t,i){return this.anims.playAfterRepeat(t,i)},chain:function chain(t){return this.anims.chain(t)},stop:function stop(){return this.anims.stop()},stopAfterDelay:function stopAfterDelay(t){return this.anims.stopAfterDelay(t)},stopAfterRepeat:function stopAfterRepeat(t){return this.anims.stopAfterRepeat(t)},stopOnFrame:function stopOnFrame(t){return this.anims.stopOnFrame(t)},toJSON:function toJSON(){return h.ToJSON(this)},preDestroy:function preDestroy(){this.anims.destroy(),this.anims=void 0}});t.exports=c},function(t,i){t.exports=function SpliceOne(t,i){if(!(i>=t.length)){for(var r=t.length-1,o=t[i],a=i;a<r;a++)t[a]=t[a+1];return t.length=r,o}}},function(t,i,r){t.exports={ADDED_TO_SCENE:r(643),DESTROY:r(644),REMOVED_FROM_SCENE:r(645),VIDEO_COMPLETE:r(646),VIDEO_CREATED:r(647),VIDEO_ERROR:r(648),VIDEO_LOOP:r(649),VIDEO_PLAY:r(650),VIDEO_SEEKED:r(651),VIDEO_SEEKING:r(652),VIDEO_STOP:r(653),VIDEO_TIMEOUT:r(654),VIDEO_UNLOCKED:r(655)}},function(t,i){t.exports=function SnapFloor(t,i,r,o){return void 0===r&&(r=0),0===i?t:(t-=r,t=i*Math.floor(t/i),o?(r+t)/i:r+t)}},function(t,i){t.exports=function Clone(t){var i={};for(var r in t)Array.isArray(t[r])?i[r]=t[r].slice(0):i[r]=t[r];return i}},function(t,i){t.exports=function SafeRange(t,i,r,o){var a=t.length;if(i<0||i>a||i>=r||r>a||i+r>a){if(o)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},function(t,i){function Compare(t,i){return String(t).localeCompare(i)}function RunPass(t,i,r,o){var a,h,l,u,c,d=t.length,p=0,g=2*r;for(a=0;a<d;a+=g)for(l=(h=a+r)+r,h>d&&(h=d),l>d&&(l=d),u=a,c=h;;)if(u<h&&c<l)i(t[u],t[c])<=0?o[p++]=t[u++]:o[p++]=t[c++];else if(u<h)o[p++]=t[u++];else{if(!(c<l))break;o[p++]=t[c++]}}t.exports=function StableSort(t,i){void 0===i&&(i=Compare);var r=function Process(t,i){var r=t.length;if(r<=1)return t;for(var o=new Array(r),a=1;a<r;a*=2){RunPass(t,i,a,o);var h=t;t=o,o=h}return t}(t,i);return r!==t&&RunPass(r,null,t.length,t),t}},function(t,i,r){var o=r(134),a=r(205);t.exports=function GetEaseFunction(t,i){var r=o.Power0;if("string"==typeof t)if(o.hasOwnProperty(t))r=o[t];else{var h="";t.indexOf(".")&&("in"===(h=t.substr(t.indexOf(".")+1)).toLowerCase()?h="easeIn":"out"===h.toLowerCase()?h="easeOut":"inout"===h.toLowerCase()&&(h="easeInOut")),t=a(t.substr(0,t.indexOf(".")+1)+h),o.hasOwnProperty(t)&&(r=o[t])}else"function"==typeof t?r=t:Array.isArray(t)&&t.length;if(!i)return r;var l=i.slice(0);return l.unshift(0),function(t){return l[0]=t,r.apply(this,l)}}},function(t,i,r){var o=r(12);t.exports=function StrokePathWebGL(t,i,r,a,h){var l=t.strokeTint,u=o.getTintAppendFloatAlpha(i.strokeColor,i.strokeAlpha*r);l.TL=u,l.TR=u,l.BL=u,l.BR=u;var c=i.pathData,d=c.length-1,p=i.lineWidth,g=p/2,v=c[0]-a,m=c[1]-h;i.closePath||(d-=2);for(var y=2;y<d;y+=2){var T=c[y]-a,S=c[y+1]-h;t.batchLine(v,m,T,S,g,g,p,y-2,!!i.closePath&&y===d-1),v=T,m=S}}},function(t,i,r){var o=r(0),a=r(115),h=r(476),l=r(477),u=r(56),c=r(47),d=r(181),p=new o({initialize:function Triangle(t,i,r,o,a,h){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.type=u.TRIANGLE,this.x1=t,this.y1=i,this.x2=r,this.y2=o,this.x3=a,this.y3=h},contains:function contains(t,i){return a(this,t,i)},getPoint:function getPoint(t,i){return h(this,t,i)},getPoints:function getPoints(t,i,r){return l(this,t,i,r)},getRandomPoint:function getRandomPoint(t){return d(this,t)},setTo:function setTo(t,i,r,o,a,h){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.x1=t,this.y1=i,this.x2=r,this.y2=o,this.x3=a,this.y3=h,this},getLineA:function getLineA(t){return void 0===t&&(t=new c),t.setTo(this.x1,this.y1,this.x2,this.y2),t},getLineB:function getLineB(t){return void 0===t&&(t=new c),t.setTo(this.x2,this.y2,this.x3,this.y3),t},getLineC:function getLineC(t){return void 0===t&&(t=new c),t.setTo(this.x3,this.y3,this.x1,this.y1),t},left:{get:function get(){return Math.min(this.x1,this.x2,this.x3)},set:function set(t){var i=0;i=this.x1<=this.x2&&this.x1<=this.x3?this.x1-t:this.x2<=this.x1&&this.x2<=this.x3?this.x2-t:this.x3-t,this.x1-=i,this.x2-=i,this.x3-=i}},right:{get:function get(){return Math.max(this.x1,this.x2,this.x3)},set:function set(t){var i=0;i=this.x1>=this.x2&&this.x1>=this.x3?this.x1-t:this.x2>=this.x1&&this.x2>=this.x3?this.x2-t:this.x3-t,this.x1-=i,this.x2-=i,this.x3-=i}},top:{get:function get(){return Math.min(this.y1,this.y2,this.y3)},set:function set(t){var i=0;i=this.y1<=this.y2&&this.y1<=this.y3?this.y1-t:this.y2<=this.y1&&this.y2<=this.y3?this.y2-t:this.y3-t,this.y1-=i,this.y2-=i,this.y3-=i}},bottom:{get:function get(){return Math.max(this.y1,this.y2,this.y3)},set:function set(t){var i=0;i=this.y1>=this.y2&&this.y1>=this.y3?this.y1-t:this.y2>=this.y1&&this.y2>=this.y3?this.y2-t:this.y3-t,this.y1-=i,this.y2-=i,this.y3-=i}}});t.exports=p},function(t,i){var r={};t.exports=r,r.create=function(t,i){return{x:t||0,y:i||0}},r.clone=function(t){return{x:t.x,y:t.y}},r.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},r.magnitudeSquared=function(t){return t.x*t.x+t.y*t.y},r.rotate=function(t,i,r){var o=Math.cos(i),a=Math.sin(i);r||(r={});var h=t.x*o-t.y*a;return r.y=t.x*a+t.y*o,r.x=h,r},r.rotateAbout=function(t,i,r,o){var a=Math.cos(i),h=Math.sin(i);o||(o={});var l=r.x+((t.x-r.x)*a-(t.y-r.y)*h);return o.y=r.y+((t.x-r.x)*h+(t.y-r.y)*a),o.x=l,o},r.normalise=function(t){var i=r.magnitude(t);return 0===i?{x:0,y:0}:{x:t.x/i,y:t.y/i}},r.dot=function(t,i){return t.x*i.x+t.y*i.y},r.cross=function(t,i){return t.x*i.y-t.y*i.x},r.cross3=function(t,i,r){return(i.x-t.x)*(r.y-t.y)-(i.y-t.y)*(r.x-t.x)},r.add=function(t,i,r){return r||(r={}),r.x=t.x+i.x,r.y=t.y+i.y,r},r.sub=function(t,i,r){return r||(r={}),r.x=t.x-i.x,r.y=t.y-i.y,r},r.mult=function(t,i){return{x:t.x*i,y:t.y*i}},r.div=function(t,i){return{x:t.x/i,y:t.y/i}},r.perp=function(t,i){return{x:(i=!0===i?-1:1)*-t.y,y:i*t.x}},r.neg=function(t){return{x:-t.x,y:-t.y}},r.angle=function(t,i){return Math.atan2(i.y-t.y,i.x-t.x)},r._temp=[r.create(),r.create(),r.create(),r.create(),r.create(),r.create()]},function(t,i){var r={};t.exports=r,r.create=function(t){var i={min:{x:0,y:0},max:{x:0,y:0}};return t&&r.update(i,t),i},r.update=function(t,i,r){t.min.x=1/0,t.max.x=-1/0,t.min.y=1/0,t.max.y=-1/0;for(var o=0;o<i.length;o++){var a=i[o];a.x>t.max.x&&(t.max.x=a.x),a.x<t.min.x&&(t.min.x=a.x),a.y>t.max.y&&(t.max.y=a.y),a.y<t.min.y&&(t.min.y=a.y)}r&&(r.x>0?t.max.x+=r.x:t.min.x+=r.x,r.y>0?t.max.y+=r.y:t.min.y+=r.y)},r.contains=function(t,i){return i.x>=t.min.x&&i.x<=t.max.x&&i.y>=t.min.y&&i.y<=t.max.y},r.overlaps=function(t,i){return t.min.x<=i.max.x&&t.max.x>=i.min.x&&t.max.y>=i.min.y&&t.min.y<=i.max.y},r.translate=function(t,i){t.min.x+=i.x,t.max.x+=i.x,t.min.y+=i.y,t.max.y+=i.y},r.shift=function(t,i){var r=t.max.x-t.min.x,o=t.max.y-t.min.y;t.min.x=i.x,t.max.x=i.x+r,t.min.y=i.y,t.max.y=i.y+o}},function(t,i,r){var o=r(29),a=r(0),h=r(11),l=r(502),u=new a({Mixins:[h.Alpha,h.Flip,h.Visible],initialize:function Tile(t,i,r,o,a,h,l,u){this.layer=t,this.index=i,this.x=r,this.y=o,this.width=a,this.height=h,this.right,this.bottom,this.baseWidth=void 0!==l?l:a,this.baseHeight=void 0!==u?u:h,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function containsPoint(t,i){return!(t<this.pixelX||i<this.pixelY||t>this.right||i>this.bottom)},copy:function copy(t){return this.index=t.index,this.alpha=t.alpha,this.properties=t.properties,this.visible=t.visible,this.setFlip(t.flipX,t.flipY),this.tint=t.tint,this.rotation=t.rotation,this.collideUp=t.collideUp,this.collideDown=t.collideDown,this.collideLeft=t.collideLeft,this.collideRight=t.collideRight,this.collisionCallback=t.collisionCallback,this.collisionCallbackContext=t.collisionCallbackContext,this},getCollisionGroup:function getCollisionGroup(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function getTileData(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function getLeft(t){var i=this.tilemapLayer;return i?i.tileToWorldX(this.x,t):this.x*this.baseWidth},getRight:function getRight(t){var i=this.tilemapLayer;return i?this.getLeft(t)+this.width*i.scaleX:this.getLeft(t)+this.width},getTop:function getTop(t){var i=this.tilemapLayer;return i?i.tileToWorldY(this.y,t)-(this.height-this.baseHeight)*i.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function getBottom(t){var i=this.tilemapLayer;return i?this.getTop(t)+this.height*i.scaleY:this.getTop(t)+this.height},getBounds:function getBounds(t,i){return void 0===i&&(i=new l),i.x=this.getLeft(),i.y=this.getTop(),i.width=this.getRight()-i.x,i.height=this.getBottom()-i.y,i},getCenterX:function getCenterX(t){return(this.getLeft(t)+this.getRight(t))/2},getCenterY:function getCenterY(t){return(this.getTop(t)+this.getBottom(t))/2},intersects:function intersects(t,i,r,o){return!(r<=this.pixelX||o<=this.pixelY||t>=this.right||i>=this.bottom)},isInteresting:function isInteresting(t,i){return t&&i?this.canCollide||this.hasInterestingFace:t?this.collides:!!i&&this.hasInterestingFace},resetCollision:function resetCollision(t){return void 0===t&&(t=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,t&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},resetFaces:function resetFaces(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function setCollision(t,i,r,o,a){return void 0===i&&(i=t),void 0===r&&(r=t),void 0===o&&(o=t),void 0===a&&(a=!0),this.collideLeft=t,this.collideRight=i,this.collideUp=r,this.collideDown=o,this.faceLeft=t,this.faceRight=i,this.faceTop=r,this.faceBottom=o,a&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},setCollisionCallback:function setCollisionCallback(t,i){return null===t?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=t,this.collisionCallbackContext=i),this},setSize:function setSize(t,i,r,o){return void 0!==t&&(this.width=t),void 0!==i&&(this.height=i),void 0!==r&&(this.baseWidth=r),void 0!==o&&(this.baseHeight=o),this.updatePixelXY(),this},updatePixelXY:function updatePixelXY(){var t=this.layer.orientation;if(t===o.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(t===o.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(t===o.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(t===o.HEXAGONAL){var i=this.layer.hexSideLength,r=(this.baseHeight-i)/2+i;this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*r}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function destroy(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function get(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||void 0!==this.collisionCallback}},collides:{get:function get(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function get(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function get(){var t=this.layer.tilemapLayer;if(t){var i=t.gidMap[this.index];if(i)return i}return null}},tilemapLayer:{get:function get(){return this.layer.tilemapLayer}},tilemap:{get:function get(){var t=this.tilemapLayer;return t?t.tilemap:null}}});t.exports=u},function(t,i,r){var o={};t.exports=o;var a=r(64),h=r(32),l=r(41),u=r(84),c=r(83),d=r(1393);o.rectangle=function(t,i,r,o,u){u=u||{};var c={label:"Rectangle Body",position:{x:t,y:i},vertices:a.fromPath("L 0 0 L "+r+" 0 L "+r+" "+o+" L 0 "+o)};if(u.chamfer){var d=u.chamfer;c.vertices=a.chamfer(c.vertices,d.radius,d.quality,d.qualityMin,d.qualityMax),delete u.chamfer}return l.create(h.extend({},c,u))},o.trapezoid=function(t,i,r,o,u,c){c=c||{};var d,p=r*(u*=.5),g=p+(1-2*u)*r,v=g+p;d=u<.5?"L 0 0 L "+p+" "+-o+" L "+g+" "+-o+" L "+v+" 0":"L 0 0 L "+g+" "+-o+" L "+v+" 0";var m={label:"Trapezoid Body",position:{x:t,y:i},vertices:a.fromPath(d)};if(c.chamfer){var y=c.chamfer;m.vertices=a.chamfer(m.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete c.chamfer}return l.create(h.extend({},m,c))},o.circle=function(t,i,r,a,l){a=a||{};var u={label:"Circle Body",circleRadius:r};l=l||25;var c=Math.ceil(Math.max(10,Math.min(l,r)));return c%2==1&&(c+=1),o.polygon(t,i,c,r,h.extend({},u,a))},o.polygon=function(t,i,r,u,c){if(c=c||{},r<3)return o.circle(t,i,u,c);for(var d=2*Math.PI/r,p="",g=.5*d,v=0;v<r;v+=1){var m=g+v*d,y=Math.cos(m)*u,T=Math.sin(m)*u;p+="L "+y.toFixed(3)+" "+T.toFixed(3)+" "}var S={label:"Polygon Body",position:{x:t,y:i},vertices:a.fromPath(p)};if(c.chamfer){var w=c.chamfer;S.vertices=a.chamfer(S.vertices,w.radius,w.quality,w.qualityMin,w.qualityMax),delete c.chamfer}return l.create(h.extend({},S,c))},o.fromVertices=function(t,i,r,u,c,p,g){var v,m,y,T,S,w;for(u=u||{},m=[],c=void 0!==c&&c,p=void 0!==p?p:.01,g=void 0!==g?g:10,d||h.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),h.isArray(r[0])||(r=[r]),w=0;w<r.length;w+=1)if(T=r[w],(y=a.isConvex(T))||!d)T=y?a.clockwiseSort(T):a.hull(T),m.push({position:{x:t,y:i},vertices:T});else{var b=T.map((function(t){return[t.x,t.y]}));d.makeCCW(b),!1!==p&&d.removeCollinearPoints(b,p);var C=d.quickDecomp(b);for(S=0;S<C.length;S++){var A=C[S].map((function(t){return{x:t[0],y:t[1]}}));g>0&&a.area(A)<g||m.push({position:a.centre(A),vertices:A})}}for(S=0;S<m.length;S++)m[S]=l.create(h.extend(m[S],u));return c&&o.flagCoincidentParts(m,5),m.length>1?(v=l.create(h.extend({parts:m.slice(0)},u)),l.setPosition(v,{x:t,y:i}),v):m[0]},o.flagCoincidentParts=function(t,i){void 0===i&&(i=5);for(var r=0;r<t.length;r++)for(var o=t[r],a=r+1;a<t.length;a++){var h=t[a];if(u.overlaps(o.bounds,h.bounds))for(var l=o.vertices,d=h.vertices,p=0;p<o.vertices.length;p++)for(var g=0;g<h.vertices.length;g++){var v=c.magnitudeSquared(c.sub(l[(p+1)%l.length],d[g])),m=c.magnitudeSquared(c.sub(l[p],d[(g+1)%d.length]));v<i&&m<i&&(l[p].isInternal=!0,d[g].isInternal=!0)}}return t}},function(t,i){t.exports=function GetCenterX(t){return t.x-t.width*t.originX+.5*t.width}},function(t,i){t.exports=function SetCenterX(t,i){var r=t.width*t.originX;return t.x=i+r-.5*t.width,t}},function(t,i){t.exports=function GetCenterY(t){return t.y-t.height*t.originY+.5*t.height}},function(t,i){t.exports=function SetCenterY(t,i){var r=t.height*t.originY;return t.y=i+r-.5*t.height,t}},function(t,i,r){t.exports={POST_RENDER:r(628),PRE_RENDER:r(629),RENDER:r(630),RESIZE:r(631)}},function(t,i){t.exports={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"}},function(t,i,r){var o=r(74);t.exports=function Remove(t,i,r,a){var h;if(void 0===a&&(a=t),!Array.isArray(i))return-1!==(h=t.indexOf(i))?(o(t,h),r&&r.call(a,i),i):null;for(var l=i.length-1,u=[];l>=0;){var c=i[l];-1!==(h=t.indexOf(c))&&(o(t,h),u.push(c),r&&r.call(a,c)),l--}return u}},function(t,i,r){var o=r(0),a=r(199),h=r(10),l=r(3),u=new o({initialize:function Curve(t){this.type=t,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new l,this._tmpVec2B=new l},draw:function draw(t,i){return void 0===i&&(i=32),t.strokePoints(this.getPoints(i))},getBounds:function getBounds(t,i){t||(t=new h),void 0===i&&(i=16);var r=this.getLength();i>r&&(i=r/2);var o=Math.max(1,Math.round(r/i));return a(this.getSpacedPoints(o),t)},getDistancePoints:function getDistancePoints(t){var i=this.getLength(),r=Math.max(1,i/t);return this.getSpacedPoints(r)},getEndPoint:function getEndPoint(t){return void 0===t&&(t=new l),this.getPointAt(1,t)},getLength:function getLength(){var t=this.getLengths();return t[t.length-1]},getLengths:function getLengths(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var i,r=[],o=this.getPoint(0,this._tmpVec2A),a=0;r.push(0);for(var h=1;h<=t;h++)a+=(i=this.getPoint(h/t,this._tmpVec2B)).distance(o),r.push(a),o.copy(i);return this.cacheArcLengths=r,r},getPointAt:function getPointAt(t,i){var r=this.getUtoTmapping(t);return this.getPoint(r,i)},getPoints:function getPoints(t,i,r){void 0===r&&(r=[]),t||(t=i?this.getLength()/i:this.defaultDivisions);for(var o=0;o<=t;o++)r.push(this.getPoint(o/t));return r},getRandomPoint:function getRandomPoint(t){return void 0===t&&(t=new l),this.getPoint(Math.random(),t)},getSpacedPoints:function getSpacedPoints(t,i,r){void 0===r&&(r=[]),t||(t=i?this.getLength()/i:this.defaultDivisions);for(var o=0;o<=t;o++){var a=this.getUtoTmapping(o/t,null,t);r.push(this.getPoint(a))}return r},getStartPoint:function getStartPoint(t){return void 0===t&&(t=new l),this.getPointAt(0,t)},getTangent:function getTangent(t,i){void 0===i&&(i=new l);var r=1e-4,o=t-r,a=t+r;return o<0&&(o=0),a>1&&(a=1),this.getPoint(o,this._tmpVec2A),this.getPoint(a,i),i.subtract(this._tmpVec2A).normalize()},getTangentAt:function getTangentAt(t,i){var r=this.getUtoTmapping(t);return this.getTangent(r,i)},getTFromDistance:function getTFromDistance(t,i){return t<=0?0:this.getUtoTmapping(0,t,i)},getUtoTmapping:function getUtoTmapping(t,i,r){var o,a=this.getLengths(r),h=0,l=a.length;o=i?Math.min(i,a[l-1]):t*a[l-1];for(var u,c=0,d=l-1;c<=d;)if((u=a[h=Math.floor(c+(d-c)/2)]-o)<0)c=h+1;else{if(!(u>0)){d=h;break}d=h-1}if(a[h=d]===o)return h/(l-1);var p=a[h];return(h+(o-p)/(a[h+1]-p))/(l-1)},updateArcLengths:function updateArcLengths(){this.needsUpdate=!0,this.getLengths()}});t.exports=u},function(t,i,r){t.exports={ADD:r(968),COMPLETE:r(969),FILE_COMPLETE:r(970),FILE_KEY_COMPLETE:r(971),FILE_LOAD_ERROR:r(972),FILE_LOAD:r(973),FILE_PROGRESS:r(974),POST_PROCESS:r(975),PROGRESS:r(976),START:r(977)}},function(t,i,r){var o=r(4);t.exports=function LineToLine(t,i,r){void 0===r&&(r=new o);var a=t.x1,h=t.y1,l=t.x2,u=t.y2,c=i.x1,d=i.y1,p=i.x2,g=i.y2,v=(g-d)*(l-a)-(p-c)*(u-h);if(0===v)return!1;var m=((p-c)*(h-d)-(g-d)*(a-c))/v,y=((l-a)*(h-d)-(u-h)*(a-c))/v;return m>=0&&m<=1&&y>=0&&y<=1&&(r.x=a+m*(l-a),r.y=h+m*(u-h),!0)}},function(t,i){t.exports=function Angle(t){return Math.atan2(t.y2-t.y1,t.x2-t.x1)}},function(t,i,r){var o=r(18);t.exports=function FromPercent(t,i,r){return(r-i)*(t=o(t,0,1))+i}},function(t,i){t.exports=function GetBoolean(t,i,r){return t&&t.hasOwnProperty(i)?t[i]:r}},function(t,i){t.exports={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26}},function(t,i,r){var o=r(0),a=r(315),h=new o({initialize:function DataManager(t,i){this.parent=t,this.events=i,i||(this.events=t.events?t.events:t),this.list={},this.values={},this._frozen=!1,!t.hasOwnProperty("sys")&&this.events&&this.events.once(a.DESTROY,this.destroy,this)},get:function get(t){var i=this.list;if(Array.isArray(t)){for(var r=[],o=0;o<t.length;o++)r.push(i[t[o]]);return r}return i[t]},getAll:function getAll(){var t={};for(var i in this.list)this.list.hasOwnProperty(i)&&(t[i]=this.list[i]);return t},query:function query(t){var i={};for(var r in this.list)this.list.hasOwnProperty(r)&&r.match(t)&&(i[r]=this.list[r]);return i},set:function set(t,i){if(this._frozen)return this;if("string"==typeof t)return this.setValue(t,i);for(var r in t)this.setValue(r,t[r]);return this},inc:function inc(t,i){if(this._frozen)return this;void 0===i&&(i=1);var r=this.get(t);return void 0===r&&(r=0),this.set(t,r+i),this},toggle:function toggle(t){return this._frozen||this.set(t,!this.get(t)),this},setValue:function setValue(t,i){if(this._frozen)return this;if(this.has(t))this.values[t]=i;else{var r=this,o=this.list,h=this.events,l=this.parent;Object.defineProperty(this.values,t,{enumerable:!0,configurable:!0,get:function get(){return o[t]},set:function set(i){if(!r._frozen){var u=o[t];o[t]=i,h.emit(a.CHANGE_DATA,l,t,i,u),h.emit(a.CHANGE_DATA_KEY+t,l,i,u)}}}),o[t]=i,h.emit(a.SET_DATA,l,t,i)}return this},each:function each(t,i){for(var r=[this.parent,null,void 0],o=1;o<arguments.length;o++)r.push(arguments[o]);for(var a in this.list)r[1]=a,r[2]=this.list[a],t.apply(i,r);return this},merge:function merge(t,i){for(var r in void 0===i&&(i=!0),t)t.hasOwnProperty(r)&&(i||!i&&!this.has(r))&&this.setValue(r,t[r]);return this},remove:function remove(t){if(this._frozen)return this;if(!Array.isArray(t))return this.removeValue(t);for(var i=0;i<t.length;i++)this.removeValue(t[i]);return this},removeValue:function removeValue(t){if(this.has(t)){var i=this.list[t];delete this.list[t],delete this.values[t],this.events.emit(a.REMOVE_DATA,this.parent,t,i)}return this},pop:function pop(t){var i=void 0;return!this._frozen&&this.has(t)&&(i=this.list[t],delete this.list[t],delete this.values[t],this.events.emit(a.REMOVE_DATA,this.parent,t,i)),i},has:function has(t){return this.list.hasOwnProperty(t)},setFreeze:function setFreeze(t){return this._frozen=t,this},reset:function reset(){for(var t in this.list)delete this.list[t],delete this.values[t];return this._frozen=!1,this},destroy:function destroy(){this.reset(),this.events.off(a.CHANGE_DATA),this.events.off(a.SET_DATA),this.events.off(a.REMOVE_DATA),this.parent=null},freeze:{get:function get(){return this._frozen},set:function set(t){this._frozen=!!t}},count:{get:function get(){var t=0;for(var i in this.list)void 0!==this.list[i]&&t++;return t}}});t.exports=h},function(t,i,r){var o=new(r(0))({initialize:function Map(t){if(this.entries={},this.size=0,Array.isArray(t))for(var i=0;i<t.length;i++)this.set(t[i][0],t[i][1])},set:function set(t,i){return this.has(t)||this.size++,this.entries[t]=i,this},get:function get(t){if(this.has(t))return this.entries[t]},getArray:function getArray(){var t=[],i=this.entries;for(var r in i)t.push(i[r]);return t},has:function has(t){return this.entries.hasOwnProperty(t)},delete:function _delete(t){return this.has(t)&&(delete this.entries[t],this.size--),this},clear:function clear(){return Object.keys(this.entries).forEach((function(t){delete this.entries[t]}),this),this.size=0,this},keys:function keys(){return Object.keys(this.entries)},values:function values(){var t=[],i=this.entries;for(var r in i)t.push(i[r]);return t},dump:function dump(){var t=this.entries;for(var i in console.group("Map"),t)console.log(i,t[i]);console.groupEnd()},each:function each(t){var i=this.entries;for(var r in i)if(!1===t(r,i[r]))break;return this},contains:function contains(t){var i=this.entries;for(var r in i)if(i[r]===t)return!0;return!1},merge:function merge(t,i){void 0===i&&(i=!1);var r=this.entries,o=t.entries;for(var a in o)r.hasOwnProperty(a)&&i?r[a]=o[a]:this.set(a,o[a]);return this}});t.exports=o},function(t,i){t.exports=function GetColor(t,i,r){return t<<16|i<<8|r}},function(t,i,r){t.exports={ENTER_FULLSCREEN:r(800),FULLSCREEN_FAILED:r(801),FULLSCREEN_UNSUPPORTED:r(802),LEAVE_FULLSCREEN:r(803),ORIENTATION_CHANGE:r(804),RESIZE:r(805)}},function(t,i,r){(function(i){var r={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};t.exports=function init(){if("function"==typeof importScripts)return r;var t=navigator.userAgent;/Windows/.test(t)?r.windows=!0:/Mac OS/.test(t)&&!/like Mac OS/.test(t)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(r.iOS=!0,r.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),r.iOSVersion=parseInt(RegExp.$1,10)):r.macOS=!0:/Android/.test(t)?r.android=!0:/Linux/.test(t)?r.linux=!0:/iP[ao]d|iPhone/i.test(t)?(r.iOS=!0,navigator.appVersion.match(/OS (\d+)/),r.iOSVersion=parseInt(RegExp.$1,10),r.iPhone=-1!==t.toLowerCase().indexOf("iphone"),r.iPad=-1!==t.toLowerCase().indexOf("ipad")):/Kindle/.test(t)||/\bKF[A-Z][A-Z]+/.test(t)||/Silk.*Mobile Safari/.test(t)?r.kindle=!0:/CrOS/.test(t)&&(r.chromeOS=!0),(/Windows Phone/i.test(t)||/IEMobile/i.test(t))&&(r.android=!1,r.iOS=!1,r.macOS=!1,r.windows=!0,r.windowsPhone=!0);var o=/Silk/.test(t);return(r.windows||r.macOS||r.linux&&!o||r.chromeOS)&&(r.desktop=!0),(r.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(r.desktop=!1),navigator.standalone&&(r.webApp=!0),"function"!=typeof importScripts&&(void 0!==window.cordova&&(r.cordova=!0),void 0!==window.ejecta&&(r.ejecta=!0)),void 0!==i&&i.versions&&i.versions.node&&(r.node=!0),r.node&&"object"===_typeof(i.versions)&&(r.nodeWebkit=!!i.versions["node-webkit"],r.electron=!!i.versions.electron),/Crosswalk/.test(t)&&(r.crosswalk=!0),r.pixelRatio=window.devicePixelRatio||1,r}()}).call(this,r(807))},function(t,i,r){t.exports={ADD:r(861),ERROR:r(862),LOAD:r(863),READY:r(864),REMOVE:r(865)}},function(t,i){t.exports={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}}},function(t,i,r){var o=r(0),a=r(59),h=r(2),l=r(878),u=r(879),c=r(25),d=r(12),p=r(107),g=r(58),v=new o({Extends:g,initialize:function MultiPipeline(t){var i=t.game.renderer,r=h(t,"fragShader",l);t.fragShader=d.parseFragmentShaderMaxTextures(r,i.maxTextures),t.vertShader=h(t,"vertShader",u),t.attributes=h(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:p.UNSIGNED_BYTE,normalized:!0}]),g.call(this,t),this._tempMatrix1=new c,this._tempMatrix2=new c,this._tempMatrix3=new c,this.calcMatrix=new c,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function boot(){g.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function batchSprite(t,i,r){this.manager.set(this,t);var o=this._tempMatrix1,a=this._tempMatrix2,h=this._tempMatrix3,l=t.frame,u=l.glTexture,c=l.u0,p=l.v0,g=l.u1,v=l.v1,m=l.x,y=l.y,T=l.cutWidth,S=l.cutHeight,w=l.customPivot,b=t.displayOriginX,C=t.displayOriginY,A=-b+m,E=-C+y;if(t.isCropped){var M=t._crop;M.flipX===t.flipX&&M.flipY===t.flipY||l.updateCropUVs(M,t.flipX,t.flipY),c=M.u0,p=M.v0,g=M.u1,v=M.v1,T=M.width,S=M.height,A=-b+(m=M.x),E=-C+(y=M.y)}var _=1,R=1;t.flipX&&(w||(A+=-l.realWidth+2*b),_=-1),(t.flipY||l.source.isGLTexture&&!u.flipY)&&(w||(E+=-l.realHeight+2*C),R=-1),a.applyITRS(t.x,t.y,t.rotation,t.scaleX*_,t.scaleY*R),o.copyFrom(i.matrix),r?(o.multiplyWithOffset(r,-i.scrollX*t.scrollFactorX,-i.scrollY*t.scrollFactorY),a.e=t.x,a.f=t.y):(a.e-=i.scrollX*t.scrollFactorX,a.f-=i.scrollY*t.scrollFactorY),o.multiply(a,h);var P=A+T,k=E+S,O=i.roundPixels,L=h.getXRound(A,E,O),D=h.getYRound(A,E,O),I=h.getXRound(A,k,O),B=h.getYRound(A,k,O),N=h.getXRound(P,k,O),G=h.getYRound(P,k,O),Y=h.getXRound(P,E,O),U=h.getYRound(P,E,O),X=d.getTintAppendFloatAlpha,V=i.alpha,z=X(t.tintTopLeft,V*t._alphaTL),W=X(t.tintTopRight,V*t._alphaTR),H=X(t.tintBottomLeft,V*t._alphaBL),j=X(t.tintBottomRight,V*t._alphaBR);this.shouldFlush(6)&&this.flush();var q=this.setGameObject(t,l);this.manager.preBatch(t),this.batchQuad(t,L,D,I,B,N,G,Y,U,c,p,g,v,z,W,H,j,t.tintFill,u,q),this.manager.postBatch(t)},batchTexture:function batchTexture(t,i,r,o,a,h,l,u,c,d,p,g,v,m,y,T,S,w,b,C,A,E,M,_,R,P,k,O,L,D,I,B){this.manager.set(this,t);var N=this._tempMatrix1,G=this._tempMatrix2,Y=this._tempMatrix3,U=w/r+k,X=b/o+O,V=(w+C)/r+k,z=(b+A)/o+O,W=l,H=u,j=-T,q=-S;if(t.isCropped){var K=t._crop,Z=K.width,J=K.height;W=Z,H=J,l=Z,u=J;var Q=w=K.x,$=b=K.y;g&&(Q=C-K.x-Z),v&&($=A-K.y-J),U=Q/r+k,X=$/o+O,V=(Q+Z)/r+k,z=($+J)/o+O,j=-T+w,q=-S+b}g&&(W*=-1,j+=l),(v^=!I&&i.isRenderTexture?1:0)&&(H*=-1,q+=u);var tt=j+W,et=q+H;G.applyITRS(a,h,p,c,d),N.copyFrom(L.matrix),D?(N.multiplyWithOffset(D,-L.scrollX*m,-L.scrollY*y),G.e=a,G.f=h):(G.e-=L.scrollX*m,G.f-=L.scrollY*y),N.multiply(G,Y);var it=L.roundPixels,nt=Y.getXRound(j,q,it),rt=Y.getYRound(j,q,it),st=Y.getXRound(j,et,it),ot=Y.getYRound(j,et,it),at=Y.getXRound(tt,et,it),ht=Y.getYRound(tt,et,it),lt=Y.getXRound(tt,q,it),ut=Y.getYRound(tt,q,it);void 0===B&&(B=this.renderer.setTexture2D(i)),t&&this.manager.preBatch(t),this.batchQuad(t,nt,rt,st,ot,at,ht,lt,ut,U,X,V,z,E,M,_,R,P,i,B),t&&this.manager.postBatch(t)},batchTextureFrame:function batchTextureFrame(t,i,r,o,a,h,l){this.manager.set(this);var u=this._tempMatrix1.copyFrom(h),c=this._tempMatrix2,p=i+t.width,g=r+t.height;l?u.multiply(l,c):c=u;var v=c.getX(i,r),m=c.getY(i,r),y=c.getX(i,g),T=c.getY(i,g),S=c.getX(p,g),w=c.getY(p,g),b=c.getX(p,r),C=c.getY(p,r),A=this.renderer.setTextureSource(t.source);o=d.getTintAppendFloatAlpha(o,a),this.batchQuad(null,v,m,y,T,S,w,b,C,t.u0,t.v0,t.u1,t.v1,o,o,o,o,0,t.glTexture,A)},batchFillRect:function batchFillRect(t,i,r,o,a,h){this.renderer.pipelines.set(this);var l=this.calcMatrix;h&&h.multiply(a,l);var u=t+r,c=i+o,d=l.getX(t,i),p=l.getY(t,i),g=l.getX(t,c),v=l.getY(t,c),m=l.getX(u,c),y=l.getY(u,c),T=l.getX(u,i),S=l.getY(u,i),w=this.fillTint;this.batchQuad(null,d,p,g,v,m,y,T,S,0,0,1,1,w.TL,w.TR,w.BL,w.BR,2)},batchFillTriangle:function batchFillTriangle(t,i,r,o,a,h,l,u){this.renderer.pipelines.set(this);var c=this.calcMatrix;u&&u.multiply(l,c);var d=c.getX(t,i),p=c.getY(t,i),g=c.getX(r,o),v=c.getY(r,o),m=c.getX(a,h),y=c.getY(a,h),T=this.fillTint;this.batchTri(null,d,p,g,v,m,y,0,0,1,1,T.TL,T.TR,T.BL,2)},batchStrokeTriangle:function batchStrokeTriangle(t,i,r,o,a,h,l,u,c){var d=this.tempTriangle;d[0].x=t,d[0].y=i,d[0].width=l,d[1].x=r,d[1].y=o,d[1].width=l,d[2].x=a,d[2].y=h,d[2].width=l,d[3].x=t,d[3].y=i,d[3].width=l,this.batchStrokePath(d,l,!1,u,c)},batchFillPath:function batchFillPath(t,i,r){this.renderer.pipelines.set(this);var o=this.calcMatrix;r&&r.multiply(i,o);for(var h,l,u=t.length,c=this.polygonCache,d=this.fillTint.TL,p=this.fillTint.TR,g=this.fillTint.BL,v=0;v<u;++v)l=t[v],c.push(l.x,l.y);u=(h=a(c)).length;for(var m=0;m<u;m+=3){var y=2*h[m+0],T=2*h[m+1],S=2*h[m+2],w=c[y+0],b=c[y+1],C=c[T+0],A=c[T+1],E=c[S+0],M=c[S+1],_=o.getX(w,b),R=o.getY(w,b),P=o.getX(C,A),k=o.getY(C,A),O=o.getX(E,M),L=o.getY(E,M);this.batchTri(null,_,R,P,k,O,L,0,0,1,1,d,p,g,2)}c.length=0},batchStrokePath:function batchStrokePath(t,i,r,o,a){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var h=t.length-1,l=0;l<h;l++){var u=t[l],c=t[l+1];this.batchLine(u.x,u.y,c.x,c.y,u.width/2,c.width/2,i,l,!r&&l===h-1,o,a)}},batchLine:function batchLine(t,i,r,o,a,h,l,u,c,d,p){this.renderer.pipelines.set(this);var g=this.calcMatrix;p&&p.multiply(d,g);var v=r-t,m=o-i,y=Math.sqrt(v*v+m*m),T=a*(o-i)/y,S=a*(t-r)/y,w=h*(o-i)/y,b=h*(t-r)/y,C=r-w,A=o-b,E=t-T,M=i-S,_=r+w,R=o+b,P=t+T,k=i+S,O=g.getX(C,A),L=g.getY(C,A),D=g.getX(E,M),I=g.getY(E,M),B=g.getX(_,R),N=g.getY(_,R),G=g.getX(P,k),Y=g.getY(P,k),U=this.strokeTint,X=U.TL,V=U.TR,z=U.BL,W=U.BR;if(this.batchQuad(null,G,Y,D,I,O,L,B,N,0,0,1,1,X,V,z,W,2),!(l<=2)){var H=this.prevQuad,j=this.firstQuad;u>0&&H[4]?this.batchQuad(null,G,Y,D,I,H[0],H[1],H[2],H[3],0,0,1,1,X,V,z,W,2):(j[0]=G,j[1]=Y,j[2]=D,j[3]=I,j[4]=1),c&&j[4]?this.batchQuad(null,O,L,B,N,j[0],j[1],j[2],j[3],0,0,1,1,X,V,z,W,2):(H[0]=O,H[1]=L,H[2]=B,H[3]=N,H[4]=1)}}});t.exports=v},function(t,i,r){var o=r(0),a=r(18),h=r(17),l=new o({initialize:function Frame(t,i,r,o,a,h,l){this.texture=t,this.name=i,this.source=t.source[r],this.sourceIndex=r,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(h,l,o,a)},setSize:function setSize(t,i,r,o){void 0===r&&(r=0),void 0===o&&(o=0),this.cutX=r,this.cutY=o,this.cutWidth=t,this.cutHeight=i,this.width=t,this.height=i,this.halfWidth=Math.floor(.5*t),this.halfHeight=Math.floor(.5*i),this.centerX=Math.floor(t/2),this.centerY=Math.floor(i/2);var a=this.data,h=a.cut;h.x=r,h.y=o,h.w=t,h.h=i,h.r=r+t,h.b=o+i,a.sourceSize.w=t,a.sourceSize.h=i,a.spriteSourceSize.w=t,a.spriteSourceSize.h=i,a.radius=.5*Math.sqrt(t*t+i*i);var l=a.drawImage;return l.x=r,l.y=o,l.width=t,l.height=i,this.updateUVs()},setTrim:function setTrim(t,i,r,o,a,h){var l=this.data,u=l.spriteSourceSize;return l.trim=!0,l.sourceSize.w=t,l.sourceSize.h=i,u.x=r,u.y=o,u.w=a,u.h=h,u.r=r+a,u.b=o+h,this.x=r,this.y=o,this.width=a,this.height=h,this.halfWidth=.5*a,this.halfHeight=.5*h,this.centerX=Math.floor(a/2),this.centerY=Math.floor(h/2),this.updateUVs()},setCropUVs:function setCropUVs(t,i,r,o,h,l,u){var c=this.cutX,d=this.cutY,p=this.cutWidth,g=this.cutHeight,v=this.realWidth,m=this.realHeight,y=c+(i=a(i,0,v)),T=d+(r=a(r,0,m)),S=o=a(o,0,v-i),w=h=a(h,0,m-r),b=this.data;if(b.trim){var C=b.spriteSourceSize,A=i+(o=a(o,0,p-i)),E=r+(h=a(h,0,g-r));if(C.r<i||C.b<r||C.x>A||C.y>E)y=0,T=0,S=0,w=0;else{var M=Math.max(C.x,i),_=Math.max(C.y,r),R=Math.min(C.r,A)-M,P=Math.min(C.b,E)-_;S=R,w=P,y=l?c+(p-(M-C.x)-R):c+(M-C.x),T=u?d+(g-(_-C.y)-P):d+(_-C.y),i=M,r=_,o=R,h=P}}else l&&(y=c+(p-i-o)),u&&(T=d+(g-r-h));var k=this.source.width,O=this.source.height;return t.u0=Math.max(0,y/k),t.v0=Math.max(0,T/O),t.u1=Math.min(1,(y+S)/k),t.v1=Math.min(1,(T+w)/O),t.x=i,t.y=r,t.cx=y,t.cy=T,t.cw=S,t.ch=w,t.width=o,t.height=h,t.flipX=l,t.flipY=u,t},updateCropUVs:function updateCropUVs(t,i,r){return this.setCropUVs(t,t.x,t.y,t.width,t.height,i,r)},setUVs:function setUVs(t,i,r,o,a,h){var l=this.data.drawImage;return l.width=t,l.height=i,this.u0=r,this.v0=o,this.u1=a,this.v1=h,this},updateUVs:function updateUVs(){var t=this.cutX,i=this.cutY,r=this.cutWidth,o=this.cutHeight,a=this.data.drawImage;a.width=r,a.height=o;var h=this.source.width,l=this.source.height;return this.u0=t/h,this.v0=i/l,this.u1=(t+r)/h,this.v1=(i+o)/l,this},updateUVsInverted:function updateUVsInverted(){var t=this.source.width,i=this.source.height;return this.u0=(this.cutX+this.cutHeight)/t,this.v0=this.cutY/i,this.u1=this.cutX/t,this.v1=(this.cutY+this.cutWidth)/i,this},clone:function clone(){var clone=new l(this.texture,this.name,this.sourceIndex);return clone.cutX=this.cutX,clone.cutY=this.cutY,clone.cutWidth=this.cutWidth,clone.cutHeight=this.cutHeight,clone.x=this.x,clone.y=this.y,clone.width=this.width,clone.height=this.height,clone.halfWidth=this.halfWidth,clone.halfHeight=this.halfHeight,clone.centerX=this.centerX,clone.centerY=this.centerY,clone.rotated=this.rotated,clone.data=h(!0,clone.data,this.data),clone.updateUVs(),clone},destroy:function destroy(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function get(){return this.data.sourceSize.w}},realHeight:{get:function get(){return this.data.sourceSize.h}},radius:{get:function get(){return this.data.radius}},trimmed:{get:function get(){return this.data.trim}},canvasData:{get:function get(){return this.data.drawImage}}});t.exports=l},function(t,i,r){var o=r(208),a=r(0),h=r(1),l=r(79),u=new a({initialize:function List(t){this.parent=t,this.list=[],this.position=0,this.addCallback=h,this.removeCallback=h,this._sortKey=""},add:function add(t,i){return i?o.Add(this.list,t):o.Add(this.list,t,0,this.addCallback,this)},addAt:function addAt(t,i,r){return r?o.AddAt(this.list,t,i):o.AddAt(this.list,t,i,0,this.addCallback,this)},getAt:function getAt(t){return this.list[t]},getIndex:function getIndex(t){return this.list.indexOf(t)},sort:function sort(t,i){return t?(void 0===i&&(i=function handler(i,r){return i[t]-r[t]}),l(this.list,i),this):this},getByName:function getByName(t){return o.GetFirst(this.list,"name",t)},getRandom:function getRandom(t,i){return o.GetRandom(this.list,t,i)},getFirst:function getFirst(t,i,r,a){return o.GetFirst(this.list,t,i,r,a)},getAll:function getAll(t,i,r,a){return o.GetAll(this.list,t,i,r,a)},count:function count(t,i){return o.CountAllMatching(this.list,t,i)},swap:function swap(t,i){o.Swap(this.list,t,i)},moveTo:function moveTo(t,i){return o.MoveTo(this.list,t,i)},moveAbove:function moveAbove(t,i){return o.MoveAbove(this.list,t,i)},moveBelow:function moveBelow(t,i){return o.MoveBelow(this.list,t,i)},remove:function remove(t,i){return i?o.Remove(this.list,t):o.Remove(this.list,t,this.removeCallback,this)},removeAt:function removeAt(t,i){return i?o.RemoveAt(this.list,t):o.RemoveAt(this.list,t,this.removeCallback,this)},removeBetween:function removeBetween(t,i,r){return r?o.RemoveBetween(this.list,t,i):o.RemoveBetween(this.list,t,i,this.removeCallback,this)},removeAll:function removeAll(t){for(var i=this.list.length;i--;)this.remove(this.list[i],t);return this},bringToTop:function bringToTop(t){return o.BringToTop(this.list,t)},sendToBack:function sendToBack(t){return o.SendToBack(this.list,t)},moveUp:function moveUp(t){return o.MoveUp(this.list,t),t},moveDown:function moveDown(t){return o.MoveDown(this.list,t),t},reverse:function reverse(){return this.list.reverse(),this},shuffle:function shuffle(){return o.Shuffle(this.list),this},replace:function replace(t,i){return o.Replace(this.list,t,i)},exists:function exists(t){return this.list.indexOf(t)>-1},setAll:function setAll(t,i,r,a){return o.SetAll(this.list,t,i,r,a),this},each:function each(t,i){for(var r=[null],o=2;o<arguments.length;o++)r.push(arguments[o]);for(o=0;o<this.list.length;o++)r[0]=this.list[o],t.apply(i,r)},shutdown:function shutdown(){this.removeAll(),this.list=[]},destroy:function destroy(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function get(){return this.list.length}},first:{get:function get(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function get(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function get(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function get(){return this.position>0?(this.position--,this.list[this.position]):null}}});t.exports=u},function(t,i,r){var o=r(0),a=r(112),h=r(445),l=r(446),u=r(56),c=r(180),d=new o({initialize:function Ellipse(t,i,r,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=0),this.type=u.ELLIPSE,this.x=t,this.y=i,this.width=r,this.height=o},contains:function contains(t,i){return a(this,t,i)},getPoint:function getPoint(t,i){return h(this,t,i)},getPoints:function getPoints(t,i,r){return l(this,t,i,r)},getRandomPoint:function getRandomPoint(t){return c(this,t)},setTo:function setTo(t,i,r,o){return this.x=t,this.y=i,this.width=r,this.height=o,this},setEmpty:function setEmpty(){return this.width=0,this.height=0,this},setPosition:function setPosition(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setSize:function setSize(t,i){return void 0===i&&(i=t),this.width=t,this.height=i,this},isEmpty:function isEmpty(){return this.width<=0||this.height<=0},getMinorRadius:function getMinorRadius(){return Math.min(this.width,this.height)/2},getMajorRadius:function getMajorRadius(){return Math.max(this.width,this.height)/2},left:{get:function get(){return this.x-this.width/2},set:function set(t){this.x=t+this.width/2}},right:{get:function get(){return this.x+this.width/2},set:function set(t){this.x=t-this.width/2}},top:{get:function get(){return this.y-this.height/2},set:function set(t){this.y=t+this.height/2}},bottom:{get:function get(){return this.y+this.height/2},set:function set(t){this.y=t-this.height/2}}});t.exports=d},function(t,i){t.exports=function Contains(t,i,r){if(t.width<=0||t.height<=0)return!1;var o=(i-t.x)/t.width,a=(r-t.y)/t.height;return(o*=o)+(a*=a)<.25}},function(t,i,r){var o=r(275),a=r(0),h=r(75),l=r(9),u=r(207),c=r(2),d=r(6),p=r(7),g=r(437),v=r(149),m=r(73),y=new a({Extends:l,initialize:function Group(t,i,r){l.call(this),r?i&&!Array.isArray(i)&&(i=[i]):Array.isArray(i)?p(i[0])&&(r=i,i=null):p(i)&&(r=i,i=null),this.scene=t,this.children=new v,this.isParent=!0,this.type="Group",this.classType=c(r,"classType",m),this.name=c(r,"name",""),this.active=c(r,"active",!0),this.maxSize=c(r,"maxSize",-1),this.defaultKey=c(r,"defaultKey",null),this.defaultFrame=c(r,"defaultFrame",null),this.runChildUpdate=c(r,"runChildUpdate",!1),this.createCallback=c(r,"createCallback",null),this.removeCallback=c(r,"removeCallback",null),this.createMultipleCallback=c(r,"createMultipleCallback",null),this.internalCreateCallback=c(r,"internalCreateCallback",null),this.internalRemoveCallback=c(r,"internalRemoveCallback",null),i&&this.addMultiple(i),r&&this.createMultiple(r),this.on(h.ADDED_TO_SCENE,this.addedToScene,this),this.on(h.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function addedToScene(){this.scene.sys.updateList.add(this)},removedFromScene:function removedFromScene(){this.scene.sys.updateList.remove(this)},create:function create(t,i,r,o,a,h){if(void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=this.defaultKey),void 0===o&&(o=this.defaultFrame),void 0===a&&(a=!0),void 0===h&&(h=!0),this.isFull())return null;var l=new this.classType(this.scene,t,i,r,o);return l.addToDisplayList(this.scene.sys.displayList),l.addToUpdateList(),l.visible=a,l.setActive(h),this.add(l),l},createMultiple:function createMultiple(t){if(this.isFull())return[];Array.isArray(t)||(t=[t]);var i=[];if(t[0].key)for(var r=0;r<t.length;r++){var o=this.createFromConfig(t[r]);i=i.concat(o)}return i},createFromConfig:function createFromConfig(t){if(this.isFull())return[];this.classType=c(t,"classType",this.classType);var i=c(t,"key",void 0),r=c(t,"frame",null),a=c(t,"visible",!0),h=c(t,"active",!0),l=[];if(void 0===i)return l;Array.isArray(i)||(i=[i]),Array.isArray(r)||(r=[r]);var u=c(t,"repeat",0),p=c(t,"randomKey",!1),v=c(t,"randomFrame",!1),m=c(t,"yoyo",!1),y=c(t,"quantity",!1),T=c(t,"frameQuantity",1),S=c(t,"max",0),w=g(i,r,{max:S,qty:y||T,random:p,randomB:v,repeat:u,yoyo:m});t.createCallback&&(this.createCallback=t.createCallback),t.removeCallback&&(this.removeCallback=t.removeCallback);for(var b=0;b<w.length;b++){var C=this.create(0,0,w[b].a,w[b].b,a,h);if(!C)break;l.push(C)}var A=d(t,"setXY.x",0),E=d(t,"setXY.y",0),M=d(t,"setXY.stepX",0),_=d(t,"setXY.stepY",0);o.SetXY(l,A,E,M,_);var R=d(t,"setRotation.value",0),P=d(t,"setRotation.step",0);o.SetRotation(l,R,P);var k=d(t,"setScale.x",1),O=d(t,"setScale.y",k),L=d(t,"setScale.stepX",0),D=d(t,"setScale.stepY",0);o.SetScale(l,k,O,L,D);var I=d(t,"setOrigin.x",.5),B=d(t,"setOrigin.y",I),N=d(t,"setOrigin.stepX",0),G=d(t,"setOrigin.stepY",0);o.SetOrigin(l,I,B,N,G);var Y=d(t,"setAlpha.value",1),U=d(t,"setAlpha.step",0);o.SetAlpha(l,Y,U);var X=d(t,"setDepth.value",0),V=d(t,"setDepth.step",0);o.SetDepth(l,X,V);var z=d(t,"setScrollFactor.x",1),W=d(t,"setScrollFactor.y",z),H=d(t,"setScrollFactor.stepX",0),j=d(t,"setScrollFactor.stepY",0);o.SetScrollFactor(l,z,W,H,j);var q=c(t,"hitArea",null),K=c(t,"hitAreaCallback",null);q&&o.SetHitArea(l,q,K);var Z=c(t,"gridAlign",!1);return Z&&o.GridAlign(l,Z),this.createMultipleCallback&&this.createMultipleCallback.call(this,l),l},preUpdate:function preUpdate(t,i){if(this.runChildUpdate&&0!==this.children.size)for(var r=this.children.entries.slice(),o=0;o<r.length;o++){var a=r[o];a.active&&a.update(t,i)}},add:function add(t,i){return void 0===i&&(i=!1),this.isFull()||(this.children.set(t),this.internalCreateCallback&&this.internalCreateCallback.call(this,t),this.createCallback&&this.createCallback.call(this,t),i&&(t.addToDisplayList(this.scene.sys.displayList),t.addToUpdateList()),t.on(h.DESTROY,this.remove,this)),this},addMultiple:function addMultiple(t,i){if(void 0===i&&(i=!1),Array.isArray(t))for(var r=0;r<t.length;r++)this.add(t[r],i);return this},remove:function remove(t,i,r){return void 0===i&&(i=!1),void 0===r&&(r=!1),this.children.contains(t)?(this.children.delete(t),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,t),this.removeCallback&&this.removeCallback.call(this,t),t.off(h.DESTROY,this.remove,this),r?t.destroy():i&&(t.removeFromDisplayList(),t.removeFromUpdateList()),this):this},clear:function clear(t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);for(var r=this.children,o=0;o<r.size;o++){var a=r.entries[o];a.off(h.DESTROY,this.remove,this),i?a.destroy():t&&(a.removeFromDisplayList(),a.removeFromUpdateList())}return this.children.clear(),this},contains:function contains(t){return this.children.contains(t)},getChildren:function getChildren(){return this.children.entries},getLength:function getLength(){return this.children.size},getMatching:function getMatching(t,i,r,o){return u(this.children.entries,t,i,r,o)},getFirst:function getFirst(t,i,r,o,a,h,l){return this.getHandler(!0,1,t,i,r,o,a,h,l)},getFirstNth:function getFirstNth(t,i,r,o,a,h,l,u){return this.getHandler(!0,t,i,r,o,a,h,l,u)},getLast:function getLast(t,i,r,o,a,h,l){return this.getHandler(!1,1,t,i,r,o,a,h,l)},getLastNth:function getLastNth(t,i,r,o,a,h,l,u){return this.getHandler(!1,t,i,r,o,a,h,l,u)},getHandler:function getHandler(t,i,r,o,a,h,l,u,c){var d,p;void 0===r&&(r=!1),void 0===o&&(o=!1);var g=0,v=this.children.entries;if(t)for(p=0;p<v.length;p++)if((d=v[p]).active===r){if(++g===i)break}else d=null;else for(p=v.length-1;p>=0;p--)if((d=v[p]).active===r){if(++g===i)break}else d=null;return d?("number"==typeof a&&(d.x=a),"number"==typeof h&&(d.y=h),d):o?this.create(a,h,l,u,c):null},get:function get(t,i,r,o,a){return this.getFirst(!1,!0,t,i,r,o,a)},getFirstAlive:function getFirstAlive(t,i,r,o,a,h){return this.getFirst(!0,t,i,r,o,a,h)},getFirstDead:function getFirstDead(t,i,r,o,a,h){return this.getFirst(!1,t,i,r,o,a,h)},playAnimation:function playAnimation(t,i){return o.PlayAnimation(this.children.entries,t,i),this},isFull:function isFull(){return-1!==this.maxSize&&this.children.size>=this.maxSize},countActive:function countActive(t){void 0===t&&(t=!0);for(var i=0,r=0;r<this.children.size;r++)this.children.entries[r].active===t&&i++;return i},getTotalUsed:function getTotalUsed(){return this.countActive()},getTotalFree:function getTotalFree(){var t=this.getTotalUsed();return(-1===this.maxSize?999999999999:this.maxSize)-t},setActive:function setActive(t){return this.active=t,this},setName:function setName(t){return this.name=t,this},propertyValueSet:function propertyValueSet(t,i,r,a,h){return o.PropertyValueSet(this.children.entries,t,i,r,a,h),this},propertyValueInc:function propertyValueInc(t,i,r,a,h){return o.PropertyValueInc(this.children.entries,t,i,r,a,h),this},setX:function setX(t,i){return o.SetX(this.children.entries,t,i),this},setY:function setY(t,i){return o.SetY(this.children.entries,t,i),this},setXY:function setXY(t,i,r,a){return o.SetXY(this.children.entries,t,i,r,a),this},incX:function incX(t,i){return o.IncX(this.children.entries,t,i),this},incY:function incY(t,i){return o.IncY(this.children.entries,t,i),this},incXY:function incXY(t,i,r,a){return o.IncXY(this.children.entries,t,i,r,a),this},shiftPosition:function shiftPosition(t,i,r){return o.ShiftPosition(this.children.entries,t,i,r),this},angle:function angle(t,i){return o.Angle(this.children.entries,t,i),this},rotate:function rotate(t,i){return o.Rotate(this.children.entries,t,i),this},rotateAround:function rotateAround(t,i){return o.RotateAround(this.children.entries,t,i),this},rotateAroundDistance:function rotateAroundDistance(t,i,r){return o.RotateAroundDistance(this.children.entries,t,i,r),this},setAlpha:function setAlpha(t,i){return o.SetAlpha(this.children.entries,t,i),this},setTint:function setTint(t,i,r,a){return o.SetTint(this.children.entries,t,i,r,a),this},setOrigin:function setOrigin(t,i,r,a){return o.SetOrigin(this.children.entries,t,i,r,a),this},scaleX:function scaleX(t,i){return o.ScaleX(this.children.entries,t,i),this},scaleY:function scaleY(t,i){return o.ScaleY(this.children.entries,t,i),this},scaleXY:function scaleXY(t,i,r,a){return o.ScaleXY(this.children.entries,t,i,r,a),this},setDepth:function setDepth(t,i){return o.SetDepth(this.children.entries,t,i),this},setBlendMode:function setBlendMode(t){return o.SetBlendMode(this.children.entries,t),this},setHitArea:function setHitArea(t,i){return o.SetHitArea(this.children.entries,t,i),this},shuffle:function shuffle(){return o.Shuffle(this.children.entries),this},kill:function kill(t){this.children.contains(t)&&t.setActive(!1)},killAndHide:function killAndHide(t){this.children.contains(t)&&(t.setActive(!1),t.setVisible(!1))},setVisible:function setVisible(t,i,r){return o.SetVisible(this.children.entries,t,i,r),this},toggleVisible:function toggleVisible(){return o.ToggleVisible(this.children.entries),this},destroy:function destroy(t,i){void 0===t&&(t=!1),void 0===i&&(i=!1),this.scene&&!this.ignoreDestroy&&(this.emit(h.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(i,t),this.scene=void 0,this.children=void 0)}});t.exports=y},function(t,i,r){var o=r(12);t.exports=function FillPathWebGL(t,i,r,a,h,l){for(var u=o.getTintAppendFloatAlpha(r.fillColor,r.fillAlpha*a),c=r.pathData,d=r.pathIndexes,p=0;p<d.length;p+=3){var g=2*d[p],v=2*d[p+1],m=2*d[p+2],y=c[g+0]-h,T=c[g+1]-l,S=c[v+0]-h,w=c[v+1]-l,b=c[m+0]-h,C=c[m+1]-l,A=i.getX(y,T),E=i.getY(y,T),M=i.getX(S,w),_=i.getY(S,w),R=i.getX(b,C),P=i.getY(b,C);t.batchTri(r,A,E,M,_,R,P,0,0,1,1,u,u,u,2)}}},function(t,i){t.exports=function Contains(t,i,r){var o=t.x3-t.x1,a=t.y3-t.y1,h=t.x2-t.x1,l=t.y2-t.y1,u=i-t.x1,c=r-t.y1,d=o*o+a*a,p=o*h+a*l,g=o*u+a*c,v=h*h+l*l,m=h*u+l*c,y=d*v-p*p,T=0===y?0:1/y,S=(v*g-p*m)*T,w=(d*m-p*g)*T;return S>=0&&w>=0&&S+w<1}},function(t,i,r){var o=r(0),a=r(10),h=r(3);function GetLength(t,i,r,o){var a=t-r,h=i-o,l=a*a+h*h;return Math.sqrt(l)}var l=new o({initialize:function Face(t,i,r){this.vertex1=t,this.vertex2=i,this.vertex3=r,this.bounds=new a,this._inCenter=new h},getInCenter:function getInCenter(t){void 0===t&&(t=!0);var i,r,o,a,h,l,u=this.vertex1,c=this.vertex2,d=this.vertex3;t?(i=u.x,r=u.y,o=c.x,a=c.y,h=d.x,l=d.y):(i=u.vx,r=u.vy,o=c.vx,a=c.vy,h=d.vx,l=d.vy);var p=GetLength(h,l,o,a),g=GetLength(i,r,h,l),v=GetLength(o,a,i,r),m=p+g+v;return this._inCenter.set((i*p+o*g+h*v)/m,(r*p+a*g+l*v)/m)},contains:function contains(t,i,r){var o=this.vertex1,a=this.vertex2,h=this.vertex3,l=o.vx,u=o.vy,c=a.vx,d=a.vy,p=h.vx,g=h.vy;if(r){var v=r.a,m=r.b,y=r.c,T=r.d,S=r.e,w=r.f;l=o.vx*v+o.vy*y+S,u=o.vx*m+o.vy*T+w,c=a.vx*v+a.vy*y+S,d=a.vx*m+a.vy*T+w,p=h.vx*v+h.vy*y+S,g=h.vx*m+h.vy*T+w}var b=p-l,C=g-u,A=c-l,E=d-u,M=t-l,_=i-u,R=b*b+C*C,P=b*A+C*E,k=b*M+C*_,O=A*A+E*E,L=A*M+E*_,D=R*O-P*P,I=0===D?0:1/D,B=(O*k-P*L)*I,N=(R*L-P*k)*I;return B>=0&&N>=0&&B+N<1},isCounterClockwise:function isCounterClockwise(t){var i=this.vertex1,r=this.vertex2,o=this.vertex3,a=(r.vx-i.vx)*(o.vy-i.vy)-(r.vy-i.vy)*(o.vx-i.vx);return t<=0?a>=0:a<0},load:function load(t,i,r,o,a){return r=this.vertex1.load(t,i,r,o,a),r=this.vertex2.load(t,i,r,o,a),r=this.vertex3.load(t,i,r,o,a)},transformCoordinatesLocal:function transformCoordinatesLocal(t,i,r,o){return this.vertex1.transformCoordinatesLocal(t,i,r,o),this.vertex2.transformCoordinatesLocal(t,i,r,o),this.vertex3.transformCoordinatesLocal(t,i,r,o),this},updateBounds:function updateBounds(){var t=this.vertex1,i=this.vertex2,r=this.vertex3,o=this.bounds;return o.x=Math.min(t.vx,i.vx,r.vx),o.y=Math.min(t.vy,i.vy,r.vy),o.width=Math.max(t.vx,i.vx,r.vx)-o.x,o.height=Math.max(t.vy,i.vy,r.vy)-o.y,this},isInView:function isInView(t,i,r,o,a,h,l,u,c,d,p){var g=this.vertex1.update(a,h,l,u,c,d,p,o),v=this.vertex2.update(a,h,l,u,c,d,p,o),m=this.vertex3.update(a,h,l,u,c,d,p,o);if(g.ta<=0&&v.ta<=0&&m.ta<=0)return!1;if(i&&!this.isCounterClockwise(r))return!1;var y=this.bounds;y.x=Math.min(g.tx,v.tx,m.tx),y.y=Math.min(g.ty,v.ty,m.ty),y.width=Math.max(g.tx,v.tx,m.tx)-y.x,y.height=Math.max(g.ty,v.ty,m.ty)-y.y;var T=t.x+t.width,S=t.y+t.height;return!(y.width<=0||y.height<=0||t.width<=0||t.height<=0||y.right<t.x||y.bottom<t.y||y.x>T||y.y>S)},translate:function translate(t,i){void 0===i&&(i=0);var r=this.vertex1,o=this.vertex2,a=this.vertex3;return r.x+=t,r.y+=i,o.x+=t,o.y+=i,a.x+=t,a.y+=i,this},x:{get:function get(){return this.getInCenter().x},set:function set(t){var i=this.getInCenter();this.translate(t-i.x,0)}},y:{get:function get(){return this.getInCenter().y},set:function set(t){var i=this.getInCenter();this.translate(0,t-i.y)}},alpha:{get:function get(){var t=this.vertex1,i=this.vertex2,r=this.vertex3;return(t.alpha+i.alpha+r.alpha)/3},set:function set(t){this.vertex1.alpha=t,this.vertex2.alpha=t,this.vertex3.alpha=t}},depth:{get:function get(){var t=this.vertex1,i=this.vertex2,r=this.vertex3;return(t.vz+i.vz+r.vz)/3}},destroy:function destroy(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});t.exports=l},function(t,i,r){var o=r(0),a=r(12),h=r(39),l=new o({Extends:h,initialize:function Vertex(t,i,r,o,a,l,u,c,d,p){void 0===l&&(l=16777215),void 0===u&&(u=1),void 0===c&&(c=0),void 0===d&&(d=0),void 0===p&&(p=0),h.call(this,t,i,r),this.vx=0,this.vy=0,this.vz=0,this.nx=c,this.ny=d,this.nz=p,this.u=o,this.v=a,this.color=l,this.alpha=u,this.tx=0,this.ty=0,this.ta=0},setUVs:function setUVs(t,i){return this.u=t,this.v=i,this},transformCoordinatesLocal:function transformCoordinatesLocal(t,i,r,o){var a=this.x,h=this.y,l=this.z,u=t.val,c=a*u[0]+h*u[4]+l*u[8]+u[12],d=a*u[1]+h*u[5]+l*u[9]+u[13],p=a*u[2]+h*u[6]+l*u[10]+u[14],g=a*u[3]+h*u[7]+l*u[11]+u[15];this.vx=c/g*i,this.vy=-d/g*r,this.vz=o<=0?p/g:-p/g},update:function update(t,i,r,o,a,h,l,u){var c=this.vx*t+this.vy*r+a,d=this.vx*i+this.vy*o+h;return l&&(c=Math.round(c),d=Math.round(d)),this.tx=c,this.ty=d,this.ta=this.alpha*u,this},load:function load(t,i,r,o,h){return t[++r]=this.tx,t[++r]=this.ty,t[++r]=this.u,t[++r]=this.v,t[++r]=o,t[++r]=h,i[++r]=a.getTintAppendFloatAlpha(this.color,this.ta),r}});t.exports=l},function(t,i,r){var o={};t.exports=o;var a=r(166),h=r(32),l=r(84),u=r(41);o.create=function(t){return h.extend({id:h.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},t)},o.setModified=function(t,i,r,h){if(a.trigger(t,"compositeModified",t),t.isModified=i,r&&t.parent&&o.setModified(t.parent,i,r,h),h)for(var l=0;l<t.composites.length;l++){var u=t.composites[l];o.setModified(u,i,r,h)}},o.add=function(t,i){var r=[].concat(i);a.trigger(t,"beforeAdd",{object:i});for(var l=0;l<r.length;l++){var u=r[l];switch(u.type){case"body":if(u.parent!==u){h.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}o.addBody(t,u);break;case"constraint":o.addConstraint(t,u);break;case"composite":o.addComposite(t,u);break;case"mouseConstraint":o.addConstraint(t,u.constraint)}}return a.trigger(t,"afterAdd",{object:i}),t},o.remove=function(t,i,r){var h=[].concat(i);a.trigger(t,"beforeRemove",{object:i});for(var l=0;l<h.length;l++){var u=h[l];switch(u.type){case"body":o.removeBody(t,u,r);break;case"constraint":o.removeConstraint(t,u,r);break;case"composite":o.removeComposite(t,u,r);break;case"mouseConstraint":o.removeConstraint(t,u.constraint)}}return a.trigger(t,"afterRemove",{object:i}),t},o.addComposite=function(t,i){return t.composites.push(i),i.parent=t,o.setModified(t,!0,!0,!1),t},o.removeComposite=function(t,i,r){var a=t.composites.indexOf(i);if(-1!==a&&(o.removeCompositeAt(t,a),o.setModified(t,!0,!0,!1)),r)for(var h=0;h<t.composites.length;h++)o.removeComposite(t.composites[h],i,!0);return t},o.removeCompositeAt=function(t,i){return t.composites.splice(i,1),o.setModified(t,!0,!0,!1),t},o.addBody=function(t,i){return t.bodies.push(i),o.setModified(t,!0,!0,!1),t},o.removeBody=function(t,i,r){var a=t.bodies.indexOf(i);if(-1!==a&&(o.removeBodyAt(t,a),o.setModified(t,!0,!0,!1)),r)for(var h=0;h<t.composites.length;h++)o.removeBody(t.composites[h],i,!0);return t},o.removeBodyAt=function(t,i){return t.bodies.splice(i,1),o.setModified(t,!0,!0,!1),t},o.addConstraint=function(t,i){return t.constraints.push(i),o.setModified(t,!0,!0,!1),t},o.removeConstraint=function(t,i,r){var a=t.constraints.indexOf(i);if(-1!==a&&o.removeConstraintAt(t,a),r)for(var h=0;h<t.composites.length;h++)o.removeConstraint(t.composites[h],i,!0);return t},o.removeConstraintAt=function(t,i){return t.constraints.splice(i,1),o.setModified(t,!0,!0,!1),t},o.clear=function(t,i,r){if(r)for(var a=0;a<t.composites.length;a++)o.clear(t.composites[a],i,!0);return i?t.bodies=t.bodies.filter((function(t){return t.isStatic})):t.bodies.length=0,t.constraints.length=0,t.composites.length=0,o.setModified(t,!0,!0,!1),t},o.allBodies=function(t){for(var i=[].concat(t.bodies),r=0;r<t.composites.length;r++)i=i.concat(o.allBodies(t.composites[r]));return i},o.allConstraints=function(t){for(var i=[].concat(t.constraints),r=0;r<t.composites.length;r++)i=i.concat(o.allConstraints(t.composites[r]));return i},o.allComposites=function(t){for(var i=[].concat(t.composites),r=0;r<t.composites.length;r++)i=i.concat(o.allComposites(t.composites[r]));return i},o.get=function(t,i,r){var a,h;switch(r){case"body":a=o.allBodies(t);break;case"constraint":a=o.allConstraints(t);break;case"composite":a=o.allComposites(t).concat(t)}return a?0===(h=a.filter((function(t){return t.id.toString()===i.toString()}))).length?null:h[0]:null},o.move=function(t,i,r){return o.remove(t,i),o.add(r,i),t},o.rebase=function(t){for(var i=o.allBodies(t).concat(o.allConstraints(t)).concat(o.allComposites(t)),r=0;r<i.length;r++)i[r].id=h.nextId();return o.setModified(t,!0,!0,!1),t},o.translate=function(t,i,r){for(var a=r?o.allBodies(t):t.bodies,h=0;h<a.length;h++)u.translate(a[h],i);return o.setModified(t,!0,!0,!1),t},o.rotate=function(t,i,r,a){for(var h=Math.cos(i),l=Math.sin(i),c=a?o.allBodies(t):t.bodies,d=0;d<c.length;d++){var p=c[d],g=p.position.x-r.x,v=p.position.y-r.y;u.setPosition(p,{x:r.x+(g*h-v*l),y:r.y+(g*l+v*h)}),u.rotate(p,i)}return o.setModified(t,!0,!0,!1),t},o.scale=function(t,i,r,a,h){for(var l=h?o.allBodies(t):t.bodies,c=0;c<l.length;c++){var d=l[c],p=d.position.x-a.x,g=d.position.y-a.y;u.setPosition(d,{x:a.x+p*i,y:a.y+g*r}),u.scale(d,i,r)}return o.setModified(t,!0,!0,!1),t},o.bounds=function(t){for(var i=o.allBodies(t),r=[],a=0;a<i.length;a+=1){var h=i[a];r.push(h.bounds.min,h.bounds.max)}return l.create(r)}},function(t,i){t.exports=function IsInLayerBounds(t,i,r){return t>=0&&t<r.width&&i>=0&&i<r.height}},function(t,i,r){var o=r(0),a=r(29),h=r(2),l=new o({initialize:function LayerData(t){void 0===t&&(t={}),this.name=h(t,"name","layer"),this.x=h(t,"x",0),this.y=h(t,"y",0),this.width=h(t,"width",0),this.height=h(t,"height",0),this.tileWidth=h(t,"tileWidth",0),this.tileHeight=h(t,"tileHeight",0),this.baseTileWidth=h(t,"baseTileWidth",this.tileWidth),this.baseTileHeight=h(t,"baseTileHeight",this.tileHeight),this.orientation=h(t,"orientation",a.ORTHOGONAL),this.widthInPixels=h(t,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=h(t,"heightInPixels",this.height*this.baseTileHeight),this.alpha=h(t,"alpha",1),this.visible=h(t,"visible",!0),this.properties=h(t,"properties",[]),this.indexes=h(t,"indexes",[]),this.collideIndexes=h(t,"collideIndexes",[]),this.callbacks=h(t,"callbacks",[]),this.bodies=h(t,"bodies",[]),this.data=h(t,"data",[]),this.tilemapLayer=h(t,"tilemapLayer",null),this.hexSideLength=h(t,"hexSideLength",0)}});t.exports=l},function(t,i,r){var o=r(0),a=r(29),h=r(2),l=new o({initialize:function MapData(t){void 0===t&&(t={}),this.name=h(t,"name","map"),this.width=h(t,"width",0),this.height=h(t,"height",0),this.infinite=h(t,"infinite",!1),this.tileWidth=h(t,"tileWidth",0),this.tileHeight=h(t,"tileHeight",0),this.widthInPixels=h(t,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=h(t,"heightInPixels",this.height*this.tileHeight),this.format=h(t,"format",null),this.orientation=h(t,"orientation",a.ORTHOGONAL),this.renderOrder=h(t,"renderOrder","right-down"),this.version=h(t,"version","1"),this.properties=h(t,"properties",{}),this.layers=h(t,"layers",[]),this.images=h(t,"images",[]),this.objects=h(t,"objects",{}),this.collision=h(t,"collision",{}),this.tilesets=h(t,"tilesets",[]),this.imageCollections=h(t,"imageCollections",[]),this.tiles=h(t,"tiles",[]),this.hexSideLength=h(t,"hexSideLength",0)}});t.exports=l},function(t,i,r){var o=new(r(0))({initialize:function Tileset(t,i,r,o,a,h,l,u){(void 0===r||r<=0)&&(r=32),(void 0===o||o<=0)&&(o=32),void 0===a&&(a=0),void 0===h&&(h=0),void 0===l&&(l={}),void 0===u&&(u={}),this.name=t,this.firstgid=i,this.tileWidth=r,this.tileHeight=o,this.tileMargin=a,this.tileSpacing=h,this.tileProperties=l,this.tileData=u,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function getTileProperties(t){return this.containsTileIndex(t)?this.tileProperties[t-this.firstgid]:null},getTileData:function getTileData(t){return this.containsTileIndex(t)?this.tileData[t-this.firstgid]:null},getTileCollisionGroup:function getTileCollisionGroup(t){var i=this.getTileData(t);return i&&i.objectgroup?i.objectgroup:null},containsTileIndex:function containsTileIndex(t){return t>=this.firstgid&&t<this.firstgid+this.total},getTileTextureCoordinates:function getTileTextureCoordinates(t){return this.containsTileIndex(t)?this.texCoordinates[t-this.firstgid]:null},setImage:function setImage(t){return this.image=t,this.glTexture=t.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function setTileSize(t,i){return void 0!==t&&(this.tileWidth=t),void 0!==i&&(this.tileHeight=i),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function setSpacing(t,i){return void 0!==t&&(this.tileMargin=t),void 0!==i&&(this.tileSpacing=i),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function updateTileData(t,i){var r=(i-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),o=(t-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);r%1==0&&o%1==0||console.warn("Image tile area not tile size multiple in: "+this.name),r=Math.floor(r),o=Math.floor(o),this.rows=r,this.columns=o,this.total=r*o,this.texCoordinates.length=0;for(var a=this.tileMargin,h=this.tileMargin,l=0;l<this.rows;l++){for(var u=0;u<this.columns;u++)this.texCoordinates.push({x:a,y:h}),a+=this.tileWidth+this.tileSpacing;a=this.tileMargin,h+=this.tileHeight+this.tileSpacing}return this}});t.exports=o},function(t,i){t.exports={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12}},function(t,i){t.exports=function Equal(t,i,r){return void 0===r&&(r=1e-4),Math.abs(t-i)<r}},function(t,i,r){var o=r(0),a=r(11),h=r(15),l=r(1068),u=new o({Extends:h,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Size,a.TextureCrop,a.Tint,a.Transform,a.Visible,l],initialize:function Image(t,i,r,o,a){h.call(this,t,"Image"),this._crop=this.resetCropObject(),this.setTexture(o,a),this.setPosition(i,r),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});t.exports=u},function(t,i){t.exports=function HasValue(t,i){return t.hasOwnProperty(i)}},function(t,i,r){var o=r(77);t.exports=function Merge(t,i){var r=o(t);for(var a in i)r.hasOwnProperty(a)||(r[a]=i[a]);return r}},function(t,i,r){var o={};t.exports=o;var a=r(64),h=r(83),l=r(165),u=r(84),c=r(271),d=r(32);o._warming=.4,o._torqueDampen=1,o._minLength=1e-6,o.create=function(t){var i=t;i.bodyA&&!i.pointA&&(i.pointA={x:0,y:0}),i.bodyB&&!i.pointB&&(i.pointB={x:0,y:0});var r=i.bodyA?h.add(i.bodyA.position,i.pointA):i.pointA,o=i.bodyB?h.add(i.bodyB.position,i.pointB):i.pointB,a=h.magnitude(h.sub(r,o));i.length=void 0!==i.length?i.length:a,i.id=i.id||d.nextId(),i.label=i.label||"Constraint",i.type="constraint",i.stiffness=i.stiffness||(i.length>0?1:.7),i.damping=i.damping||0,i.angularStiffness=i.angularStiffness||0,i.angleA=i.bodyA?i.bodyA.angle:i.angleA,i.angleB=i.bodyB?i.bodyB.angle:i.angleB,i.plugin={};var l={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return 0===i.length&&i.stiffness>.1?(l.type="pin",l.anchors=!1):i.stiffness<.9&&(l.type="spring"),i.render=d.extend(l,i.render),i},o.preSolveAll=function(t){for(var i=0;i<t.length;i+=1){var r=t[i],o=r.constraintImpulse;r.isStatic||0===o.x&&0===o.y&&0===o.angle||(r.position.x+=o.x,r.position.y+=o.y,r.angle+=o.angle)}},o.solveAll=function(t,i){for(var r=0;r<t.length;r+=1){var a=t[r],h=!a.bodyA||a.bodyA&&a.bodyA.isStatic,l=!a.bodyB||a.bodyB&&a.bodyB.isStatic;(h||l)&&o.solve(t[r],i)}for(r=0;r<t.length;r+=1)h=!(a=t[r]).bodyA||a.bodyA&&a.bodyA.isStatic,l=!a.bodyB||a.bodyB&&a.bodyB.isStatic,h||l||o.solve(t[r],i)},o.solve=function(t,i){var r=t.bodyA,a=t.bodyB,l=t.pointA,u=t.pointB;if(r||a){r&&!r.isStatic&&(h.rotate(l,r.angle-t.angleA,l),t.angleA=r.angle),a&&!a.isStatic&&(h.rotate(u,a.angle-t.angleB,u),t.angleB=a.angle);var c=l,d=u;if(r&&(c=h.add(r.position,l)),a&&(d=h.add(a.position,u)),c&&d){var p=h.sub(c,d),g=h.magnitude(p);g<o._minLength&&(g=o._minLength);var v,m,y,T,S,w=(g-t.length)/g,b=t.stiffness<1?t.stiffness*i:t.stiffness,C=h.mult(p,w*b),A=(r?r.inverseMass:0)+(a?a.inverseMass:0),E=A+((r?r.inverseInertia:0)+(a?a.inverseInertia:0));if(t.damping){var M=h.create();y=h.div(p,g),S=h.sub(a&&h.sub(a.position,a.positionPrev)||M,r&&h.sub(r.position,r.positionPrev)||M),T=h.dot(y,S)}r&&!r.isStatic&&(m=r.inverseMass/A,r.constraintImpulse.x-=C.x*m,r.constraintImpulse.y-=C.y*m,r.position.x-=C.x*m,r.position.y-=C.y*m,t.damping&&(r.positionPrev.x-=t.damping*y.x*T*m,r.positionPrev.y-=t.damping*y.y*T*m),v=h.cross(l,C)/E*o._torqueDampen*r.inverseInertia*(1-t.angularStiffness),r.constraintImpulse.angle-=v,r.angle-=v),a&&!a.isStatic&&(m=a.inverseMass/A,a.constraintImpulse.x+=C.x*m,a.constraintImpulse.y+=C.y*m,a.position.x+=C.x*m,a.position.y+=C.y*m,t.damping&&(a.positionPrev.x+=t.damping*y.x*T*m,a.positionPrev.y+=t.damping*y.y*T*m),v=h.cross(u,C)/E*o._torqueDampen*a.inverseInertia*(1-t.angularStiffness),a.constraintImpulse.angle+=v,a.angle+=v)}}},o.postSolveAll=function(t){for(var i=0;i<t.length;i++){var r=t[i],d=r.constraintImpulse;if(!(r.isStatic||0===d.x&&0===d.y&&0===d.angle)){l.set(r,!1);for(var p=0;p<r.parts.length;p++){var g=r.parts[p];a.translate(g.vertices,d),p>0&&(g.position.x+=d.x,g.position.y+=d.y),0!==d.angle&&(a.rotate(g.vertices,d.angle,r.position),c.rotate(g.axes,d.angle),p>0&&h.rotateAbout(g.position,d.angle,r.position,g.position)),u.update(g.bounds,g.vertices,r.velocity)}d.angle*=o._warming,d.x*=o._warming,d.y*=o._warming}}},o.pointAWorld=function(t){return{x:(t.bodyA?t.bodyA.position.x:0)+t.pointA.x,y:(t.bodyA?t.bodyA.position.y:0)+t.pointA.y}},o.pointBWorld=function(t){return{x:(t.bodyB?t.bodyB.position.x:0)+t.pointB.x,y:(t.bodyB?t.bodyB.position.y:0)+t.pointB.y}}},function(t,i,r){var o=r(35),a=r(65),h=r(66),l=r(0),u=r(11),c=r(15),d=r(10),p=r(57),g=new l({Extends:c,Mixins:[u.Depth,u.GetBounds,u.Origin,u.Transform,u.ScrollFactor,u.Visible],initialize:function Zone(t,i,r,a,h){void 0===a&&(a=1),void 0===h&&(h=a),c.call(this,t,"Zone"),this.setPosition(i,r),this.width=a,this.height=h,this.blendMode=o.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function get(){return this.scaleX*this.width},set:function set(t){this.scaleX=t/this.width}},displayHeight:{get:function get(){return this.scaleY*this.height},set:function set(t){this.scaleY=t/this.height}},setSize:function setSize(t,i,r){void 0===r&&(r=!0),this.width=t,this.height=i,this.updateDisplayOrigin();var o=this.input;return r&&o&&!o.customHitArea&&(o.hitArea.width=t,o.hitArea.height=i),this},setDisplaySize:function setDisplaySize(t,i){return this.displayWidth=t,this.displayHeight=i,this},setCircleDropZone:function setCircleDropZone(t){return this.setDropZone(new a(0,0,t),h)},setRectangleDropZone:function setRectangleDropZone(t,i){return this.setDropZone(new d(0,0,t,i),p)},setDropZone:function setDropZone(t,i){return void 0===t?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(t,i,!0),this},setAlpha:function setAlpha(){},setBlendMode:function setBlendMode(){},renderCanvas:function renderCanvas(t,i,r){r.addToRenderList(i)},renderWebGL:function renderWebGL(t,i,r){r.addToRenderList(i)}});t.exports=g},function(t,i){t.exports=function Perimeter(t){return 2*(t.width+t.height)}},function(t,i){t.exports=function Shuffle(t){for(var i=t.length-1;i>0;i--){var r=Math.floor(Math.random()*(i+1)),o=t[i];t[i]=t[r],t[r]=o}return t}},function(t,i,r){t.exports={ADD_ANIMATION:r(724),ANIMATION_COMPLETE:r(725),ANIMATION_COMPLETE_KEY:r(726),ANIMATION_REPEAT:r(727),ANIMATION_RESTART:r(728),ANIMATION_START:r(729),ANIMATION_STOP:r(730),ANIMATION_UPDATE:r(731),PAUSE_ALL:r(732),REMOVE_ANIMATION:r(733),RESUME_ALL:r(734)}},function(t,i,r){var o=r(0),a=r(11),h=r(36),l=r(9),u=r(37),c=r(10),d=r(25),p=r(187),g=r(3),v=new o({Extends:l,Mixins:[a.Alpha,a.Visible],initialize:function BaseCamera(t,i,r,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=0),l.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new c,this.dirty=!0,this._x=t,this._y=i,this._width=r,this._height=o,this._bounds=new c,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new d,this.transparent=!0,this.backgroundColor=p("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new g(r/2,o/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function addToRenderList(t){this.renderList.push(t)},setOrigin:function setOrigin(t,i){return void 0===t&&(t=.5),void 0===i&&(i=t),this.originX=t,this.originY=i,this},getScroll:function getScroll(t,i,r){void 0===r&&(r=new g);var o=.5*this.width,a=.5*this.height;return r.x=t-o,r.y=i-a,this.useBounds&&(r.x=this.clampX(r.x),r.y=this.clampY(r.y)),r},centerOnX:function centerOnX(t){var i=.5*this.width;return this.midPoint.x=t,this.scrollX=t-i,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function centerOnY(t){var i=.5*this.height;return this.midPoint.y=t,this.scrollY=t-i,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function centerOn(t,i){return this.centerOnX(t),this.centerOnY(i),this},centerToBounds:function centerToBounds(){if(this.useBounds){var t=this._bounds,i=.5*this.width,r=.5*this.height;this.midPoint.set(t.centerX,t.centerY),this.scrollX=t.centerX-i,this.scrollY=t.centerY-r}return this},centerToSize:function centerToSize(){return this.scrollX=.5*this.width,this.scrollY=.5*this.height,this},cull:function cull(t){if(this.disableCull)return t;var i=this.matrix.matrix,r=i[0],o=i[1],a=i[2],h=i[3],l=r*h-o*a;if(!l)return t;var u=i[4],c=i[5],d=this.scrollX,p=this.scrollY,g=this.width,v=this.height,m=this.y,y=m+v,T=this.x,S=T+g,w=this.culledObjects,b=t.length;l=1/l,w.length=0;for(var C=0;C<b;++C){var A=t[C];if(A.hasOwnProperty("width")&&!A.parentContainer){var E=A.width,M=A.height,_=A.x-d*A.scrollFactorX-E*A.originX,R=A.y-p*A.scrollFactorY-M*A.originY;(_+E)*r+(R+M)*a+u>T&&_*r+R*a+u<S&&(_+E)*o+(R+M)*h+c>m&&_*o+R*h+c<y&&w.push(A)}else w.push(A)}return w},getWorldPoint:function getWorldPoint(t,i,r){void 0===r&&(r=new g);var o=this.matrix.matrix,a=o[0],h=o[1],l=o[2],u=o[3],c=o[4],d=o[5],p=a*u-h*l;if(!p)return r.x=t,r.y=i,r;var v=u*(p=1/p),m=-h*p,y=-l*p,T=a*p,S=(l*d-u*c)*p,w=(h*c-a*d)*p,b=Math.cos(this.rotation),C=Math.sin(this.rotation),A=this.zoomX,E=this.zoomY,M=this.scrollX,_=this.scrollY,R=t+(M*b-_*C)*A,P=i+(M*C+_*b)*E;return r.x=R*v+P*y+S,r.y=R*m+P*T+w,r},ignore:function ignore(t){var i=this.id;Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var o=t[r];Array.isArray(o)?this.ignore(o):o.isParent?this.ignore(o.getChildren()):o.cameraFilter|=i}return this},preRender:function preRender(){this.renderList.length=0;var t=this.width,i=this.height,r=.5*t,o=.5*i,a=this.zoomX,h=this.zoomY,l=this.matrix,u=t*this.originX,c=i*this.originY,d=this.scrollX,p=this.scrollY;this.useBounds&&(d=this.clampX(d),p=this.clampY(p)),this.roundPixels&&(u=Math.round(u),c=Math.round(c)),this.scrollX=d,this.scrollY=p;var g=d+r,v=p+o;this.midPoint.set(g,v);var m=t/a,y=i/h;this.worldView.setTo(g-m/2,v-y/2,m,y),l.applyITRS(this.x+u,this.y+c,this.rotation,a,h),l.translate(-u,-c)},clampX:function clampX(t){var i=this._bounds,r=this.displayWidth,o=i.x+(r-this.width)/2,a=Math.max(o,o+i.width-r);return t<o?t=o:t>a&&(t=a),t},clampY:function clampY(t){var i=this._bounds,r=this.displayHeight,o=i.y+(r-this.height)/2,a=Math.max(o,o+i.height-r);return t<o?t=o:t>a&&(t=a),t},removeBounds:function removeBounds(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function setAngle(t){return void 0===t&&(t=0),this.rotation=h(t),this},setBackgroundColor:function setBackgroundColor(t){return void 0===t&&(t="rgba(0,0,0,0)"),this.backgroundColor=p(t),this.transparent=0===this.backgroundColor.alpha,this},setBounds:function setBounds(t,i,r,o,a){return void 0===a&&(a=!1),this._bounds.setTo(t,i,r,o),this.dirty=!0,this.useBounds=!0,a?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function getBounds(t){void 0===t&&(t=new c);var i=this._bounds;return t.setTo(i.x,i.y,i.width,i.height),t},setName:function setName(t){return void 0===t&&(t=""),this.name=t,this},setPosition:function setPosition(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setRotation:function setRotation(t){return void 0===t&&(t=0),this.rotation=t,this},setRoundPixels:function setRoundPixels(t){return this.roundPixels=t,this},setScene:function setScene(t){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=t;var i=t.sys;return this.sceneManager=i.game.scene,this.scaleManager=i.scale,this.cameraManager=i.cameras,this.updateSystem(),this},setScroll:function setScroll(t,i){return void 0===i&&(i=t),this.scrollX=t,this.scrollY=i,this},setSize:function setSize(t,i){return void 0===i&&(i=t),this.width=t,this.height=i,this},setViewport:function setViewport(t,i,r,o){return this.x=t,this.y=i,this.width=r,this.height=o,this},setZoom:function setZoom(t,i){return void 0===t&&(t=1),void 0===i&&(i=t),0===t&&(t=.001),0===i&&(i=.001),this.zoomX=t,this.zoomY=i,this},setMask:function setMask(t,i){return void 0===i&&(i=!0),this.mask=t,this._maskCamera=i?this.cameraManager.default:this,this},clearMask:function clearMask(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function toJSON(){var t={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(t.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),t},update:function update(){},updateSystem:function updateSystem(){if(this.scaleManager){var t=0!==this._x||0!==this._y||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,i=this.sceneManager;t&&!this._customViewport?i.customViewports++:!t&&this._customViewport&&i.customViewports--,this.dirty=!0,this._customViewport=t}},destroy:function destroy(){this.emit(u.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function get(){return this._x},set:function set(t){this._x=t,this.updateSystem()}},y:{get:function get(){return this._y},set:function set(t){this._y=t,this.updateSystem()}},width:{get:function get(){return this._width},set:function set(t){this._width=t,this.updateSystem()}},height:{get:function get(){return this._height},set:function set(t){this._height=t,this.updateSystem()}},scrollX:{get:function get(){return this._scrollX},set:function set(t){this._scrollX=t,this.dirty=!0}},scrollY:{get:function get(){return this._scrollY},set:function set(t){this._scrollY=t,this.dirty=!0}},zoom:{get:function get(){return(this._zoomX+this._zoomY)/2},set:function set(t){this._zoomX=t,this._zoomY=t,this.dirty=!0}},zoomX:{get:function get(){return this._zoomX},set:function set(t){this._zoomX=t,this.dirty=!0}},zoomY:{get:function get(){return this._zoomY},set:function set(t){this._zoomY=t,this.dirty=!0}},rotation:{get:function get(){return this._rotation},set:function set(t){this._rotation=t,this.dirty=!0}},centerX:{get:function get(){return this.x+.5*this.width}},centerY:{get:function get(){return this.y+.5*this.height}},displayWidth:{get:function get(){return this.width/this.zoomX}},displayHeight:{get:function get(){return this.height/this.zoomY}}});t.exports=v},function(t,i,r){var o=r(334),a=r(335),h=r(336),l=r(337),u=r(338),c=r(339),d=r(340),p=r(341),g=r(342),v=r(343),m=r(344),y=r(345);t.exports={Power0:d,Power1:p.Out,Power2:l.Out,Power3:g.Out,Power4:v.Out,Linear:d,Quad:p.Out,Cubic:l.Out,Quart:g.Out,Quint:v.Out,Sine:m.Out,Expo:c.Out,Circ:h.Out,Elastic:u.Out,Back:o.Out,Bounce:a.Out,Stepped:y,"Quad.easeIn":p.In,"Cubic.easeIn":l.In,"Quart.easeIn":g.In,"Quint.easeIn":v.In,"Sine.easeIn":m.In,"Expo.easeIn":c.In,"Circ.easeIn":h.In,"Elastic.easeIn":u.In,"Back.easeIn":o.In,"Bounce.easeIn":a.In,"Quad.easeOut":p.Out,"Cubic.easeOut":l.Out,"Quart.easeOut":g.Out,"Quint.easeOut":v.Out,"Sine.easeOut":m.Out,"Expo.easeOut":c.Out,"Circ.easeOut":h.Out,"Elastic.easeOut":u.Out,"Back.easeOut":o.Out,"Bounce.easeOut":a.Out,"Quad.easeInOut":p.InOut,"Cubic.easeInOut":l.InOut,"Quart.easeInOut":g.InOut,"Quint.easeInOut":v.InOut,"Sine.easeInOut":m.InOut,"Expo.easeInOut":c.InOut,"Circ.easeInOut":h.InOut,"Elastic.easeInOut":u.InOut,"Back.easeInOut":o.InOut,"Bounce.easeInOut":a.InOut}},function(t,i){t.exports=function Linear(t,i,r){return(i-t)*r+t}},function(t,i,r){var o=r(105),a={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};t.exports=function init(){var t=navigator.userAgent;return/Edge\/\d+/.test(t)?a.edge=!0:/Chrome\/(\d+)/.test(t)&&!o.windowsPhone?(a.chrome=!0,a.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(t)?(a.firefox=!0,a.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(t)&&o.iOS?a.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(t)?(a.ie=!0,a.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(t)?a.opera=!0:/Safari/.test(t)&&!o.windowsPhone?a.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(t)&&(a.ie=!0,a.trident=!0,a.tridentVersion=parseInt(RegExp.$1,10),a.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(t)&&(a.silk=!0),a}()},function(t,i){t.exports=function FloatBetween(t,i){return Math.random()*(i-t)+t}},function(t,i){t.exports=function IsSizePowerOfTwo(t,i){return t>0&&0==(t&t-1)&&i>0&&0==(i&i-1)}},function(t,i){t.exports=function SnapCeil(t,i,r,o){return void 0===r&&(r=0),0===i?t:(t-=r,t=i*Math.ceil(t/i),o?(r+t)/i:r+t)}},function(t,i,r){var o=new(r(0))({initialize:function Vector4(t,i,r,o){this.x=0,this.y=0,this.z=0,this.w=0,"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=r||0,this.w=o||0)},clone:function clone(){return new o(this.x,this.y,this.z,this.w)},copy:function copy(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this.w=t.w||0,this},equals:function equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},set:function set(t,i,r,o){return"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=r||0,this.w=o||0),this},add:function add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this.w+=t.w||0,this},subtract:function subtract(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this.w-=t.w||0,this},scale:function scale(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function length(){var t=this.x,i=this.y,r=this.z,o=this.w;return Math.sqrt(t*t+i*i+r*r+o*o)},lengthSq:function lengthSq(){var t=this.x,i=this.y,r=this.z,o=this.w;return t*t+i*i+r*r+o*o},normalize:function normalize(){var t=this.x,i=this.y,r=this.z,o=this.w,a=t*t+i*i+r*r+o*o;return a>0&&(a=1/Math.sqrt(a),this.x=t*a,this.y=i*a,this.z=r*a,this.w=o*a),this},dot:function dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function lerp(t,i){void 0===i&&(i=0);var r=this.x,o=this.y,a=this.z,h=this.w;return this.x=r+i*(t.x-r),this.y=o+i*(t.y-o),this.z=a+i*(t.z-a),this.w=h+i*(t.w-h),this},multiply:function multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this.w*=t.w||1,this},divide:function divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this.w/=t.w||1,this},distance:function distance(t){var i=t.x-this.x,r=t.y-this.y,o=t.z-this.z||0,a=t.w-this.w||0;return Math.sqrt(i*i+r*r+o*o+a*a)},distanceSq:function distanceSq(t){var i=t.x-this.x,r=t.y-this.y,o=t.z-this.z||0,a=t.w-this.w||0;return i*i+r*r+o*o+a*a},negate:function negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function transformMat4(t){var i=this.x,r=this.y,o=this.z,a=this.w,h=t.val;return this.x=h[0]*i+h[4]*r+h[8]*o+h[12]*a,this.y=h[1]*i+h[5]*r+h[9]*o+h[13]*a,this.z=h[2]*i+h[6]*r+h[10]*o+h[14]*a,this.w=h[3]*i+h[7]*r+h[11]*o+h[15]*a,this},transformQuat:function transformQuat(t){var i=this.x,r=this.y,o=this.z,a=t.x,h=t.y,l=t.z,u=t.w,c=u*i+h*o-l*r,d=u*r+l*i-a*o,p=u*o+a*r-h*i,g=-a*i-h*r-l*o;return this.x=c*u+g*-a+d*-l-p*-h,this.y=d*u+g*-h+p*-a-c*-l,this.z=p*u+g*-l+c*-h-d*-a,this},reset:function reset(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});o.prototype.sub=o.prototype.subtract,o.prototype.mul=o.prototype.multiply,o.prototype.div=o.prototype.divide,o.prototype.dist=o.prototype.distance,o.prototype.distSq=o.prototype.distanceSq,o.prototype.len=o.prototype.length,o.prototype.lenSq=o.prototype.lengthSq,t.exports=o},function(t,i,r){var o=r(0),a=r(91),h=new o({initialize:function RenderTarget(t,i,r,o,a,h,l){void 0===o&&(o=1),void 0===a&&(a=0),void 0===h&&(h=!0),void 0===l&&(l=!1),this.renderer=t,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=o,this.minFilter=a,this.autoClear=h,this.autoResize=!1,this.resize(i,r),l&&this.setAutoResize(!0)},setAutoResize:function setAutoResize(t){return t&&!this.autoResize?(this.renderer.on(a.RESIZE,this.resize,this),this.autoResize=!0):!t&&this.autoResize&&(this.renderer.off(a.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function resize(t,i){var r=t*this.scale,o=i*this.scale;if(r!==this.width||o!==this.height){var a=this.renderer;a.deleteFramebuffer(this.framebuffer),a.deleteTexture(this.texture),t*=this.scale,i*=this.scale,(t=Math.round(t))<=0&&(t=1),(i=Math.round(i))<=0&&(i=1),this.texture=a.createTextureFromSource(null,t,i,this.minFilter),this.framebuffer=a.createFramebuffer(t,i,this.texture,!1),this.width=t,this.height=i}return this},bind:function bind(t,i,r){if(void 0===t&&(t=!1),t&&this.renderer.flush(),i&&r&&this.resize(i,r),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),t&&this.adjustViewport(),this.autoClear){var o=this.renderer.gl;o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT)}},adjustViewport:function adjustViewport(){var t=this.renderer.gl;t.viewport(0,0,this.width,this.height),t.disable(t.SCISSOR_TEST)},clear:function clear(){var t=this.renderer,i=t.gl;t.pushFramebuffer(this.framebuffer),i.disable(i.SCISSOR_TEST),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),t.popFramebuffer(),t.resetScissor()},unbind:function unbind(t){void 0===t&&(t=!1);var i=this.renderer;return t&&i.flush(),i.popFramebuffer()},destroy:function destroy(){var t=this.renderer;t.deleteFramebuffer(this.framebuffer),t.deleteTexture(this.texture),t.off(a.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});t.exports=h},function(t,i){t.exports=function AddToDOM(t,i){var r;if(i)"string"==typeof i?r=document.getElementById(i):"object"===_typeof(i)&&1===i.nodeType&&(r=i);else if(t.parentElement||null===i)return t;return r||(r=document.body),r.appendChild(t),t}},function(t,i){t.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175}},function(t,i){t.exports={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9}},function(t,i,r){var o=r(0),a=r(77),h=r(9),l=r(70),u=r(22),c=r(1),d=r(207),p=r(428),g=new o({Extends:h,initialize:function BaseSoundManager(t){h.call(this),this.game=t,this.jsonCache=t.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,t.events.on(u.BLUR,this.onGameBlur,this),t.events.on(u.FOCUS,this.onGameFocus,this),t.events.on(u.PRE_STEP,this.update,this),t.events.once(u.DESTROY,this.destroy,this)},add:c,addAudioSprite:function addAudioSprite(t,i){void 0===i&&(i={});var r=this.add(t,i);for(var o in r.spritemap=this.jsonCache.get(t).spritemap,r.spritemap)if(r.spritemap.hasOwnProperty(o)){var h=a(i),l=r.spritemap[o];h.loop=!!l.hasOwnProperty("loop")&&l.loop,r.addMarker({name:o,start:l.start,duration:l.end-l.start,config:h})}return r},get:function get(t){return p(this.sounds,"key",t)},getAll:function getAll(t){return d(this.sounds,"key",t)},play:function play(t,i){var r=this.add(t);return r.once(l.COMPLETE,r.destroy,r),i?i.name?(r.addMarker(i),r.play(i.name)):r.play(i):r.play()},playAudioSprite:function playAudioSprite(t,i,r){var o=this.addAudioSprite(t);return o.once(l.COMPLETE,o.destroy,o),o.play(i,r)},remove:function remove(t){var i=this.sounds.indexOf(t);return-1!==i&&(t.destroy(),this.sounds.splice(i,1),!0)},removeAll:function removeAll(){this.sounds.forEach((function(t){t.destroy()})),this.sounds.length=0},removeByKey:function removeByKey(t){for(var i=0,r=this.sounds.length-1;r>=0;r--){var o=this.sounds[r];o.key===t&&(o.destroy(),this.sounds.splice(r,1),i++)}return i},pauseAll:function pauseAll(){this.forEachActiveSound((function(t){t.pause()})),this.emit(l.PAUSE_ALL,this)},resumeAll:function resumeAll(){this.forEachActiveSound((function(t){t.resume()})),this.emit(l.RESUME_ALL,this)},stopAll:function stopAll(){this.forEachActiveSound((function(t){t.stop()})),this.emit(l.STOP_ALL,this)},stopByKey:function stopByKey(t){var i=0;return this.getAll(t).forEach((function(t){t.stop()&&i++})),i},unlock:c,onBlur:c,onFocus:c,onGameBlur:function onGameBlur(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function onGameFocus(){this.pauseOnBlur&&this.onFocus()},update:function update(t,i){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(l.UNLOCKED,this));for(var r=this.sounds.length-1;r>=0;r--)this.sounds[r].pendingRemove&&this.sounds.splice(r,1);this.sounds.forEach((function(r){r.update(t,i)}))},destroy:function destroy(){this.game.events.off(u.BLUR,this.onGameBlur,this),this.game.events.off(u.FOCUS,this.onGameFocus,this),this.game.events.off(u.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function forEachActiveSound(t,i){var r=this;this.sounds.forEach((function(o,a){o&&!o.pendingRemove&&t.call(i||r,o,a,r.sounds)}))},setRate:function setRate(t){return this.rate=t,this},rate:{get:function get(){return this._rate},set:function set(t){this._rate=t,this.forEachActiveSound((function(t){t.calculateRate()})),this.emit(l.GLOBAL_RATE,this,t)}},setDetune:function setDetune(t){return this.detune=t,this},detune:{get:function get(){return this._detune},set:function set(t){this._detune=t,this.forEachActiveSound((function(t){t.calculateRate()})),this.emit(l.GLOBAL_DETUNE,this,t)}}});t.exports=g},function(t,i,r){var o=r(0),a=r(9),h=r(70),l=r(17),u=r(1),c=new o({Extends:a,initialize:function BaseSound(t,i,r){a.call(this),this.manager=t,this.key=i,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=l(this.config,r),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function addMarker(t){return!(!t||!t.name||"string"!=typeof t.name||(this.markers[t.name]?(console.error("addMarker "+t.name+" already exists in Sound"),1):(t=l(!0,{name:"",start:0,duration:this.totalDuration-(t.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},t),this.markers[t.name]=t,0)))},updateMarker:function updateMarker(t){return!(!t||!t.name||"string"!=typeof t.name||(this.markers[t.name]?(this.markers[t.name]=l(!0,this.markers[t.name],t),0):(console.warn("Audio Marker: "+t.name+" missing in Sound: "+this.key),1)))},removeMarker:function removeMarker(t){var i=this.markers[t];return i?(this.markers[t]=null,i):null},play:function play(t,i){if(void 0===t&&(t=""),"object"===_typeof(t)&&(i=t,t=""),"string"!=typeof t)return!1;if(t){if(!this.markers[t])return console.warn("Marker: "+t+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[t],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}else this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;return this.resetConfig(),this.currentConfig=l(this.currentConfig,i),this.isPlaying=!0,this.isPaused=!1,!0},pause:function pause(){return!(this.isPaused||!this.isPlaying||(this.isPlaying=!1,this.isPaused=!0,0))},resume:function resume(){return!(!this.isPaused||this.isPlaying||(this.isPlaying=!0,this.isPaused=!1,0))},stop:function stop(){return!(!this.isPaused&&!this.isPlaying||(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),0))},applyConfig:function applyConfig(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function resetConfig(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:u,calculateRate:function calculateRate(){var t=this.currentConfig.detune+this.manager.detune,i=Math.pow(1.0005777895065548,t);this.totalRate=this.currentConfig.rate*this.manager.rate*i},destroy:function destroy(){this.pendingRemove||(this.emit(h.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});t.exports=c},function(t,i,r){var o=r(209),a=r(435);t.exports=function RotateMatrix(t,i){if(void 0===i&&(i=90),!o(t))return null;if("string"!=typeof i&&(i=(i%360+360)%360),90===i||-270===i||"rotateLeft"===i)(t=a(t)).reverse();else if(-90===i||270===i||"rotateRight"===i)t.reverse(),t=a(t);else if(180===Math.abs(i)||"rotate180"===i){for(var r=0;r<t.length;r++)t[r].reverse();t.reverse()}return t}},function(t,i,r){var o=r(0),a=r(18),h=r(11),l=r(15),u=r(1043),c=r(1044),d=r(212),p=r(10),g=r(1045),v=new o({Extends:l,Mixins:[h.Alpha,h.BlendMode,h.Depth,h.Mask,h.Origin,h.Pipeline,h.ScrollFactor,h.Texture,h.Tint,h.Transform,h.Visible,g],initialize:function BitmapText(t,i,r,o,a,h,c){void 0===a&&(a=""),void 0===c&&(c=0),l.call(this,t,"BitmapText"),this.font=o;var d=this.scene.sys.cache.bitmapFont.get(o);d||console.warn("Invalid BitmapText key: "+o),this.fontData=d.data,this._text="",this._fontSize=h||this.fontData.size,this._letterSpacing=0,this._align=c,this._bounds=u(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=d.fromAtlas,this.setTexture(d.texture,d.frame),this.setPosition(i,r),this.setOrigin(0,0),this.initPipeline(),this.setText(a)},setLeftAlign:function setLeftAlign(){return this._align=v.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function setCenterAlign(){return this._align=v.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function setRightAlign(){return this._align=v.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function setFontSize(t){return this._fontSize=t,this._dirty=!0,this},setLetterSpacing:function setLetterSpacing(t){return void 0===t&&(t=0),this._letterSpacing=t,this._dirty=!0,this},setText:function setText(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this.text&&(this._text=t.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function setDropShadow(t,i,r,o){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=.5),this.dropShadowX=t,this.dropShadowY=i,this.dropShadowColor=r,this.dropShadowAlpha=o,this},setCharacterTint:function setCharacterTint(t,i,r,o,h,l,u){void 0===t&&(t=0),void 0===i&&(i=1),void 0===r&&(r=!1),void 0===o&&(o=-1),void 0===h&&(h=o,l=o,u=o);var c=this.text.length;-1===i&&(i=c),t<0&&(t=c+t),t=a(t,0,c-1);for(var d=a(t+i,t,c),p=this.charColors,g=t;g<d;g++){var v=p[g];if(-1===o)p[g]=null;else{var m=r?1:0;v?(v.tintEffect=m,v.tintTL=o,v.tintTR=h,v.tintBL=l,v.tintBR=u):p[g]={tintEffect:m,tintTL:o,tintTR:h,tintBL:l,tintBR:u}}}return this},setWordTint:function setWordTint(t,i,r,o,a,h,l){void 0===i&&(i=1);for(var u=this.getTextBounds().words,c="number"==typeof t,d=0,p=0;p<u.length;p++){var g=u[p];if((c&&p===t||!c&&g.word===t)&&(this.setCharacterTint(g.i,g.word.length,r,o,a,h,l),++d===i))return this}return this},getTextBounds:function getTextBounds(t){var i=this._bounds;return(this._dirty||t||this.scaleX!==i.scaleX||this.scaleY!==i.scaleY)&&(u(this,t,!0,i),this._dirty=!1),i},getCharacterAt:function getCharacterAt(t,i,r){for(var o=this.getLocalPoint(t,i,null,r),a=this.getTextBounds().characters,h=new p,l=0;l<a.length;l++){var u=a[l];if(h.setTo(u.x,u.t,u.r-u.x,u.b),h.contains(o.x,o.y))return u}return null},updateDisplayOrigin:function updateDisplayOrigin(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function setFont(t,i,r){if(void 0===i&&(i=this._fontSize),void 0===r&&(r=this._align),t!==this.font){var o=this.scene.sys.cache.bitmapFont.get(t);o&&(this.font=t,this.fontData=o.data,this._fontSize=i,this._align=r,this.fromAtlas=!0===o.fromAtlas,this.setTexture(o.texture,o.frame),u(this,!1,!0,this._bounds))}return this},setMaxWidth:function setMaxWidth(t,i){return this._maxWidth=t,this._dirty=!0,void 0!==i&&(this.wordWrapCharCode=i),this},align:{set:function set(t){this._align=t,this._dirty=!0},get:function get(){return this._align}},text:{set:function set(t){this.setText(t)},get:function get(){return this._text}},fontSize:{set:function set(t){this._fontSize=t,this._dirty=!0},get:function get(){return this._fontSize}},letterSpacing:{set:function set(t){this._letterSpacing=t,this._dirty=!0},get:function get(){return this._letterSpacing}},maxWidth:{set:function set(t){this._maxWidth=t,this._dirty=!0},get:function get(){return this._maxWidth}},width:{get:function get(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function get(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function toJSON(){var t=h.ToJSON(this),i={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return t.data=i,t},preDestroy:function preDestroy(){this.charColors.length=0,this._bounds=null,this.fontData=null}});v.ALIGN_LEFT=0,v.ALIGN_CENTER=1,v.ALIGN_RIGHT=2,v.ParseFromAtlas=c,v.ParseXMLBitmapFont=d,t.exports=v},function(t,i,r){var o=new(r(0))({initialize:function Set(t){if(this.entries=[],Array.isArray(t))for(var i=0;i<t.length;i++)this.set(t[i])},set:function set(t){return-1===this.entries.indexOf(t)&&this.entries.push(t),this},get:function get(t,i){for(var r=0;r<this.entries.length;r++){var o=this.entries[r];if(o[t]===i)return o}},getArray:function getArray(){return this.entries.slice(0)},delete:function _delete(t){var i=this.entries.indexOf(t);return i>-1&&this.entries.splice(i,1),this},dump:function dump(){console.group("Set");for(var t=0;t<this.entries.length;t++){var i=this.entries[t];console.log(i)}console.groupEnd()},each:function each(t,i){var r,o=this.entries.slice(),a=o.length;if(i)for(r=0;r<a&&!1!==t.call(i,o[r],r);r++);else for(r=0;r<a&&!1!==t(o[r],r);r++);return this},iterate:function iterate(t,i){var r,o=this.entries.length;if(i)for(r=0;r<o&&!1!==t.call(i,this.entries[r],r);r++);else for(r=0;r<o&&!1!==t(this.entries[r],r);r++);return this},iterateLocal:function iterateLocal(t){var i,r=[];for(i=1;i<arguments.length;i++)r.push(arguments[i]);var o=this.entries.length;for(i=0;i<o;i++){var a=this.entries[i];a[t].apply(a,r)}return this},clear:function clear(){return this.entries.length=0,this},contains:function contains(t){return this.entries.indexOf(t)>-1},union:function union(t){var i=new o;return t.entries.forEach((function(t){i.set(t)})),this.entries.forEach((function(t){i.set(t)})),i},intersect:function intersect(t){var i=new o;return this.entries.forEach((function(r){t.contains(r)&&i.set(r)})),i},difference:function difference(t){var i=new o;return this.entries.forEach((function(r){t.contains(r)||i.set(r)})),i},size:{get:function get(){return this.entries.length},set:function set(t){return t<this.entries.length?this.entries.length=t:this.entries.length}}});t.exports=o},function(t,i,r){var o=r(0),a=r(11),h=r(15),l=r(189),u=r(92),c=r(1182),d=new o({Extends:h,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.GetBounds,a.Mask,a.Pipeline,a.ScrollFactor,a.Transform,a.Visible,c],initialize:function PointLight(t,i,r,o,a,c,d){void 0===o&&(o=16777215),void 0===a&&(a=128),void 0===c&&(c=1),void 0===d&&(d=.1),h.call(this,t,"PointLight"),this.initPipeline(u.POINTLIGHT_PIPELINE),this.setPosition(i,r),this.color=l(o),this.intensity=c,this.attenuation=d,this.width=2*a,this.height=2*a,this._radius=a},radius:{get:function get(){return this._radius},set:function set(t){this._radius=t,this.width=2*t,this.height=2*t}},originX:{get:function get(){return.5}},originY:{get:function get(){return.5}},displayOriginX:{get:function get(){return this._radius}},displayOriginY:{get:function get(){return this._radius}}});t.exports=d},function(t,i){t.exports=function CircleToRectangle(t,i){var r=i.width/2,o=i.height/2,a=Math.abs(t.x-i.x-r),h=Math.abs(t.y-i.y-o),l=r+t.radius,u=o+t.radius;if(a>l||h>u)return!1;if(a<=r||h<=o)return!0;var c=a-r,d=h-o;return c*c+d*d<=t.radius*t.radius}},function(t,i){t.exports=function RectangleToRectangle(t,i){return!(t.width<=0||t.height<=0||i.width<=0||i.height<=0||t.right<i.x||t.bottom<i.y||t.x>i.right||t.y>i.bottom)}},function(t,i,r){var o=r(6),a={},h={register:function(t,i,r,o,h){a[t]={plugin:i,mapping:r,settingsKey:o,configKey:h}},getPlugin:function(t){return a[t]},install:function(t){var i=t.scene.sys,r=i.settings.input,h=i.game.config;for(var l in a){var u=a[l].plugin,c=a[l].mapping,d=a[l].settingsKey,p=a[l].configKey;o(r,d,h[p])&&(t[c]=new u(t))}},remove:function(t){a.hasOwnProperty(t)&&delete a[t]}};t.exports=h},function(t,i,r){t.exports={ANY_KEY_DOWN:r(1323),ANY_KEY_UP:r(1324),COMBO_MATCH:r(1325),DOWN:r(1326),KEY_DOWN:r(1327),KEY_UP:r(1328),UP:r(1329)}},function(t,i){t.exports=function GetURL(t,i){return!!t.url&&(t.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?t.url:i+t.url)}},function(t,i){t.exports=function XHRSettings(t,i,r,o,a,h){return void 0===t&&(t=""),void 0===i&&(i=!0),void 0===r&&(r=""),void 0===o&&(o=""),void 0===a&&(a=0),void 0===h&&(h=!1),{responseType:t,async:i,user:r,password:o,timeout:a,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:h}}},function(t,i,r){var o=r(0),a=r(243),h=r(73),l=new o({Extends:h,Mixins:[a.Acceleration,a.Angular,a.Bounce,a.Debug,a.Drag,a.Enable,a.Friction,a.Gravity,a.Immovable,a.Mass,a.Pushable,a.Size,a.Velocity],initialize:function ArcadeSprite(t,i,r,o,a){h.call(this,t,i,r,o,a),this.body=null}});t.exports=l},function(t,i,r){var o=r(119);t.exports=function GetTileAt(t,i,r,a){if(void 0===r&&(r=!1),o(t,i,a)){var h=a.data[i][t]||null;return h?-1===h.index?r?h:null:h:null}return null}},function(t,i){t.exports=function RunCull(t,i,r,o){var a,h,l,u=t.data,c=t.width,d=t.height,p=t.tilemapLayer,g=Math.max(0,i.left),v=Math.min(c,i.right),m=Math.max(0,i.top),y=Math.min(d,i.bottom);if(0===r)for(h=m;h<y;h++)for(a=g;u[h]&&a<v;a++)(l=u[h][a])&&-1!==l.index&&l.visible&&0!==l.alpha&&o.push(l);else if(1===r)for(h=m;h<y;h++)for(a=v;u[h]&&a>=g;a--)(l=u[h][a])&&-1!==l.index&&l.visible&&0!==l.alpha&&o.push(l);else if(2===r)for(h=y;h>=m;h--)for(a=g;u[h]&&a<v;a++)(l=u[h][a])&&-1!==l.index&&l.visible&&0!==l.alpha&&o.push(l);else if(3===r)for(h=y;h>=m;h--)for(a=v;u[h]&&a>=g;a--)(l=u[h][a])&&-1!==l.index&&l.visible&&0!==l.alpha&&o.push(l);return p.tilesDrawn=o.length,p.tilesTotal=c*d,o}},function(t,i){t.exports=function SetLayerCollisionIndex(t,i,r){var o=r.collideIndexes.indexOf(t);i&&-1===o?r.collideIndexes.push(t):i||-1===o||r.collideIndexes.splice(o,1)}},function(t,i,r){var o=r(2);t.exports=function CreateGroupLayer(t,i,r){if(!i)return{i:0,layers:t.layers,name:"",opacity:1,visible:!0,x:0,y:0};var a=i.x+o(i,"startx",0)*t.tilewidth+o(i,"offsetx",0),h=i.y+o(i,"starty",0)*t.tileheight+o(i,"offsety",0);return{i:0,layers:i.layers,name:r.name+i.name+"/",opacity:r.opacity*i.opacity,visible:r.visible&&i.visible,x:r.x+a,y:r.y+h}}},function(t,i){t.exports=function GetNewValue(t,i,r){return t.hasOwnProperty(i)?"function"===_typeof(t[i])?function valueCallback(r,o,a,h,l,u){return t[i](r,o,a,h,l,u)}:function valueCallback(){return t[i]}:"function"==typeof r?r:function valueCallback(){return r}}},function(t,i,r){var o=r(265),a=r(13),h=r(99),l=r(80),u=r(162),c=r(583),d=r(263),p=r(6),g=r(264),v=r(266),m=r(268);t.exports=function TweenBuilder(t,i,r){void 0===r&&(r=o);for(var y=r.targets?r.targets:d(i),T=c(i),S=u(i,"delay",r.delay),w=u(i,"duration",r.duration),b=p(i,"easeParams",r.easeParams),C=l(p(i,"ease",r.ease),b),A=u(i,"hold",r.hold),E=u(i,"repeat",r.repeat),M=u(i,"repeatDelay",r.repeatDelay),_=h(i,"yoyo",r.yoyo),R=h(i,"flipX",r.flipX),P=h(i,"flipY",r.flipY),k=[],O=0;O<T.length;O++)for(var L=T[O].key,D=T[O].value,I=0;I<y.length;I++){var B=g(L,D),N=m(y[I],I,L,B.getEnd,B.getStart,B.getActive,l(p(D,"ease",C),p(D,"easeParams",b)),u(D,"delay",S),u(D,"duration",w),h(D,"yoyo",_),u(D,"hold",A),u(D,"repeat",E),u(D,"repeatDelay",M),h(D,"flipX",R),h(D,"flipY",P));k.push(N)}var G=new v(t,k,y);G.offset=a(i,"offset",null),G.completeDelay=a(i,"completeDelay",0),G.loop=Math.round(a(i,"loop",0)),G.loopDelay=Math.round(a(i,"loopDelay",0)),G.paused=h(i,"paused",!1),G.useFrames=h(i,"useFrames",!1);for(var Y=p(i,"callbackScope",G),U=[G,null],X=v.TYPES,V=0;V<X.length;V++){var z=X[V],W=p(i,z,!1);if(W){var H=p(i,z+"Scope",Y),j=p(i,z+"Params",[]);G.setCallback(z,W,U.concat(j),H)}}return G}},function(t,i,r){var o=r(0),a=r(102),h=r(2),l=r(132),u=r(185),c=new o({initialize:function AnimationState(t){this.parent=t,this.animationManager=t.scene.sys.anims,this.animationManager.on(l.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function chain(t){var i=this.parent;if(void 0===t)return this.nextAnimsQueue.length=0,this.nextAnim=null,i;Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var o=t[r];null===this.nextAnim?this.nextAnim=o:this.nextAnimsQueue.push(o)}return this.parent},getName:function getName(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function getFrameName(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function load(t){this.isPlaying&&this.stop();var i=this.animationManager,r="string"==typeof t?t:h(t,"key",null),o=this.exists(r)?this.get(r):i.get(r);if(o){this.currentAnim=o;var a=o.getTotalFrames(),l=h(t,"frameRate",o.frameRate),u=h(t,"duration",o.duration);o.calculateDuration(this,a,u,l),this.delay=h(t,"delay",o.delay),this.repeat=h(t,"repeat",o.repeat),this.repeatDelay=h(t,"repeatDelay",o.repeatDelay),this.yoyo=h(t,"yoyo",o.yoyo),this.showOnStart=h(t,"showOnStart",o.showOnStart),this.hideOnComplete=h(t,"hideOnComplete",o.hideOnComplete),this.skipMissedFrames=h(t,"skipMissedFrames",o.skipMissedFrames),this.timeScale=h(t,"timeScale",this.timeScale);var c=h(t,"startFrame",0);c>o.getTotalFrames()&&(c=0);var d=o.frames[c];0!==c||this.forward||(d=o.getLastFrame()),this.currentFrame=d}else console.warn("Missing animation: "+r);return this.parent},pause:function pause(t){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),void 0!==t&&this.setCurrentFrame(t),this.parent},resume:function resume(t){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),void 0!==t&&this.setCurrentFrame(t),this.parent},playAfterDelay:function playAfterDelay(t,i){if(this.isPlaying){var r=this.nextAnim,o=this.nextAnimsQueue;r&&o.unshift(r),this.nextAnim=t,this._pendingStop=1,this._pendingStopValue=i}else this.delayCounter=i,this.play(t,!0);return this.parent},playAfterRepeat:function playAfterRepeat(t,i){if(void 0===i&&(i=1),this.isPlaying){var r=this.nextAnim,o=this.nextAnimsQueue;r&&o.unshift(r),-1!==this.repeatCounter&&i>this.repeatCounter&&(i=this.repeatCounter),this.nextAnim=t,this._pendingStop=2,this._pendingStopValue=i}else this.play(t);return this.parent},play:function play(t,i){void 0===i&&(i=!1);var r=this.currentAnim,o=this.parent,a="string"==typeof t?t:t.key;if(i&&this.isPlaying&&r.key===a)return o;if(r&&this.isPlaying){var h=this.animationManager.getMix(r.key,t);if(h>0)return this.playAfterDelay(t,h)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(t)},playReverse:function playReverse(t,i){void 0===i&&(i=!1);var r="string"==typeof t?t:t.key;return i&&this.isPlaying&&this.currentAnim.key===r?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(t))},startAnimation:function startAnimation(t){this.load(t);var i=this.currentAnim,r=this.parent;return i?(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat,i.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,0===this.delayCounter&&this.handleStart(),r):r},handleStart:function handleStart(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(l.ANIMATION_START)},handleRepeat:function handleRepeat(){this.pendingRepeat=!1,this.emitEvents(l.ANIMATION_REPEAT)},handleStop:function handleStop(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(l.ANIMATION_STOP)},handleComplete:function handleComplete(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(l.ANIMATION_COMPLETE,l.ANIMATION_COMPLETE_KEY)},emitEvents:function emitEvents(t,i){var r=this.currentAnim,o=this.currentFrame,a=this.parent,h=o.textureFrame;a.emit(t,r,o,a,h),i&&a.emit(i+r.key,r,o,a,h)},reverse:function reverse(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function getProgress(){var t=this.currentFrame;if(!t)return 0;var i=t.progress;return this.inReverse&&(i*=-1),i},setProgress:function setProgress(t){return this.forward||(t=1-t),this.setCurrentFrame(this.currentAnim.getFrameByProgress(t)),this.parent},setRepeat:function setRepeat(t){return this.repeatCounter=-1===t?Number.MAX_VALUE:t,this.parent},globalRemove:function globalRemove(t,i){void 0===i&&(i=this.currentAnim),this.isPlaying&&i.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function restart(t,i){void 0===t&&(t=!1),void 0===i&&(i=!1);var r=this.currentAnim,o=this.parent;return r?(i&&(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat),r.getFirstTick(this),this.emitEvents(l.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!t,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(r.frames[0]),this.parent):o},complete:function complete(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var t=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(t)}return this.parent},stop:function stop(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var t=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(t)}return this.parent},stopAfterDelay:function stopAfterDelay(t){return this._pendingStop=1,this._pendingStopValue=t,this.parent},stopAfterRepeat:function stopAfterRepeat(t){return void 0===t&&(t=1),-1!==this.repeatCounter&&t>this.repeatCounter&&(t=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=t,this.parent},stopOnFrame:function stopOnFrame(t){return this._pendingStop=3,this._pendingStopValue=t,this.parent},getTotalFrames:function getTotalFrames(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function update(t,i){var r=this.currentAnim;if(this.isPlaying&&r&&!r.paused){if(this.accumulator+=i*this.timeScale,1===this._pendingStop&&(this._pendingStopValue-=i,this._pendingStopValue<=0))return this.stop();if(this.hasStarted){if(this.accumulator>=this.nextTick&&(this.forward?r.nextFrame(this):r.previousFrame(this),this.isPlaying&&0===this._pendingStop&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var o=0;do{this.forward?r.nextFrame(this):r.previousFrame(this),o++}while(this.isPlaying&&this.accumulator>this.nextTick&&o<60)}}else this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart())}},setCurrentFrame:function setCurrentFrame(t){var i=this.parent;return this.currentFrame=t,i.texture=t.frame.texture,i.frame=t.frame,i.isCropped&&i.frame.updateCropUVs(i._crop,i.flipX,i.flipY),t.setAlpha&&(i.alpha=t.alpha),i.setSizeToFrame(),i._originComponent&&(t.frame.customPivot?i.setOrigin(t.frame.pivotX,t.frame.pivotY):i.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(l.ANIMATION_UPDATE),3===this._pendingStop&&this._pendingStopValue===t&&this.stop()),i},nextFrame:function nextFrame(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function previousFrame(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function get(t){return this.anims?this.anims.get(t):null},exists:function exists(t){return!!this.anims&&this.anims.has(t)},create:function create(t){var i=t.key,r=!1;return i&&((r=this.get(i))||(r=new u(this,i,t),this.anims||(this.anims=new a),this.anims.set(i,r))),r},generateFrameNames:function generateFrameNames(t,i){return this.animationManager.generateFrameNames(t,i)},generateFrameNumbers:function generateFrameNumbers(t,i){return this.animationManager.generateFrameNumbers(t,i)},remove:function remove(t){var i=this.get(t);return i&&(this.currentAnim===i&&this.stop(),this.anims.delete(t)),i},destroy:function destroy(){this.animationManager.off(l.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function get(){return this._paused}}});t.exports=c},function(t,i,r){var o={};t.exports=o;var a=r(166);o._motionWakeThreshold=.18,o._motionSleepThreshold=.08,o._minBias=.9,o.update=function(t,i){for(var r=i*i*i,a=0;a<t.length;a++){var h=t[a],l=h.speed*h.speed+h.angularSpeed*h.angularSpeed;if(0===h.force.x&&0===h.force.y){var u=Math.min(h.motion,l),c=Math.max(h.motion,l);h.motion=o._minBias*u+(1-o._minBias)*c,h.sleepThreshold>0&&h.motion<o._motionSleepThreshold*r?(h.sleepCounter+=1,h.sleepCounter>=h.sleepThreshold&&o.set(h,!0)):h.sleepCounter>0&&(h.sleepCounter-=1)}else o.set(h,!1)}},o.afterCollisions=function(t,i){for(var r=i*i*i,a=0;a<t.length;a++){var h=t[a];if(h.isActive){var l=h.collision,u=l.bodyA.parent,c=l.bodyB.parent;if(!(u.isSleeping&&c.isSleeping||u.isStatic||c.isStatic)&&(u.isSleeping||c.isSleeping)){var d=u.isSleeping&&!u.isStatic?u:c,p=d===u?c:u;!d.isStatic&&p.motion>o._motionWakeThreshold*r&&o.set(d,!1)}}}},o.set=function(t,i){var r=t.isSleeping;i?(t.isSleeping=!0,t.sleepCounter=t.sleepThreshold,t.positionImpulse.x=0,t.positionImpulse.y=0,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.anglePrev=t.angle,t.speed=0,t.angularSpeed=0,t.motion=0,r||a.trigger(t,"sleepStart")):(t.isSleeping=!1,t.sleepCounter=0,r&&a.trigger(t,"sleepEnd"))}},function(t,i,r){var o={};t.exports=o;var a=r(32);o.on=function(t,i,r){for(var o,a=i.split(" "),h=0;h<a.length;h++)o=a[h],t.events=t.events||{},t.events[o]=t.events[o]||[],t.events[o].push(r);return r},o.off=function(t,i,r){if(i){"function"==typeof i&&(r=i,i=a.keys(t.events).join(" "));for(var o=i.split(" "),h=0;h<o.length;h++){var l=t.events[o[h]],u=[];if(r&&l)for(var c=0;c<l.length;c++)l[c]!==r&&u.push(l[c]);t.events[o[h]]=u}}else t.events={}},o.trigger=function(t,i,r){var o,h,l,u,c=t.events;if(c&&a.keys(c).length>0){r||(r={}),o=i.split(" ");for(var d=0;d<o.length;d++)if(l=c[h=o[d]]){(u=a.clone(r,!1)).name=h,u.source=t;for(var p=0;p<l.length;p++)l[p].apply(t,[u])}}}},function(t,i,r){var o=r(175),a=r(92),h=r(74),l={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function initPipeline(t){void 0===t&&(t=a.MULTI_PIPELINE);var i=this.scene.sys.renderer;if(!i)return!1;var r=i.pipelines;if(this.postPipelines=[],this.pipelineData={},r){var o=r.get(t);if(o)return this.defaultPipeline=o,this.pipeline=o,!0}return!1},setPipeline:function setPipeline(t,i,r){var a=this.scene.sys.renderer;if(!a)return this;var h=a.pipelines;if(h){var l=h.get(t);l&&(this.pipeline=l),i&&(this.pipelineData=r?o(i):i)}return this},setPostPipeline:function setPostPipeline(t,i,r){var a=this.scene.sys.renderer;if(!a)return this;var h=a.pipelines;if(h){Array.isArray(t)||(t=[t]);for(var l=0;l<t.length;l++){var u=h.getPostPipeline(t[l],this);u&&this.postPipelines.push(u)}i&&(this.pipelineData=r?o(i):i)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function setPipelineData(t,i){var r=this.pipelineData;return void 0===i?delete r[t]:r[t]=i,this},getPostPipeline:function getPostPipeline(t){for(var i=this.postPipelines,r=[],o=0;o<i.length;o++){var a=i[o];("string"==typeof t&&a.name===t||a instanceof t)&&r.push(a)}return 1===r.length?r[0]:r},resetPipeline:function resetPipeline(t,i){return void 0===t&&(t=!1),void 0===i&&(i=!1),this.pipeline=this.defaultPipeline,t&&(this.postPipelines=[],this.hasPostPipeline=!1),i&&(this.pipelineData={}),null!==this.pipeline},resetPostPipeline:function resetPostPipeline(t){void 0===t&&(t=!1);for(var i=this.postPipelines,r=0;r<i.length;r++)i[r].destroy();this.postPipelines=[],this.hasPostPipeline=!1,t&&(this.pipelineData={})},removePostPipeline:function removePostPipeline(t){for(var i=this.postPipelines,r=i.length-1;r>=0;r--){var o=i[r];("string"==typeof t&&o.name===t||"string"!=typeof t&&o instanceof t)&&(o.destroy(),h(i,r))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function getPipelineName(){return this.pipeline.name}};t.exports=l},function(t,i){t.exports={DEFAULT:0,LINEAR:0,NEAREST:1}},function(t,i,r){var o=r(4);t.exports=function CircumferencePoint(t,i,r){return void 0===r&&(r=new o),r.x=t.x+t.radius*Math.cos(i),r.y=t.y+t.radius*Math.sin(i),r}},function(t,i,r){var o=r(4);t.exports=function Random(t,i){void 0===i&&(i=new o);var r=2*Math.PI*Math.random(),a=Math.random()+Math.random(),h=a>1?2-a:a,l=h*Math.cos(r),u=h*Math.sin(r);return i.x=t.x+l*t.radius,i.y=t.y+u*t.radius,i}},function(t,i,r){var o=r(130),a=r(4);t.exports=function GetPoint(t,i,r){if(void 0===r&&(r=new a),i<=0||i>=1)return r.x=t.x,r.y=t.y,r;var h=o(t)*i;return i>.5?(h-=t.width+t.height)<=t.width?(r.x=t.right-h,r.y=t.bottom):(r.x=t.x,r.y=t.bottom-(h-t.width)):h<=t.width?(r.x=t.x+h,r.y=t.y):(r.x=t.right,r.y=t.y+(h-t.width)),r}},function(t,i,r){var o=r(67),a=r(4);t.exports=function GetPoints(t,i,r,h){void 0===h&&(h=[]),!i&&r>0&&(i=o(t)/r);for(var l=t.x1,u=t.y1,c=t.x2,d=t.y2,p=0;p<i;p++){var g=p/i,v=l+(c-l)*g,m=u+(d-u)*g;h.push(new a(v,m))}return h}},function(t,i,r){var o=r(4);t.exports=function Random(t,i){void 0===i&&(i=new o);var r=Math.random();return i.x=t.x1+r*(t.x2-t.x1),i.y=t.y1+r*(t.y2-t.y1),i}},function(t,i,r){var o=r(4);t.exports=function Random(t,i){return void 0===i&&(i=new o),i.x=t.x+Math.random()*t.width,i.y=t.y+Math.random()*t.height,i}},function(t,i){t.exports=function DeepCopy(t){var i,r,o;if("object"!==_typeof(t)||null===t)return t;for(o in i=Array.isArray(t)?[]:{},t)r=t[o],i[o]=DeepCopy(r);return i}},function(t,i){t.exports=function ToJSON(t){var i={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(i.textureKey=t.texture.key,i.frameKey=t.frame.name),i}},function(t,i,r){var o=r(3);t.exports=function TransformXY(t,i,r,a,h,l,u,c){void 0===c&&(c=new o);var d=Math.sin(h),p=Math.cos(h),g=p*l,v=d*l,m=-d*u,y=p*u,T=1/(g*y+m*-v);return c.x=y*T*t+-m*T*i+(a*m-r*y)*T,c.y=g*T*i+-v*T*t+(-a*g+r*v)*T,c}},function(t,i){t.exports=function RotateLeft(t,i){void 0===i&&(i=1);for(var r=null,o=0;o<i;o++)r=t.shift(),t.push(r);return r}},function(t,i){t.exports=function RotateRight(t,i){void 0===i&&(i=1);for(var r=null,o=0;o<i;o++)r=t.pop(),t.unshift(r);return r}},function(t,i,r){var o=r(4);t.exports=function Random(t,i){void 0===i&&(i=new o);var r=Math.random()*Math.PI*2,a=Math.sqrt(Math.random());return i.x=t.x+a*Math.cos(r)*t.width/2,i.y=t.y+a*Math.sin(r)*t.height/2,i}},function(t,i,r){var o=r(4);t.exports=function Random(t,i){void 0===i&&(i=new o);var r=t.x2-t.x1,a=t.y2-t.y1,h=t.x3-t.x1,l=t.y3-t.y1,u=Math.random(),c=Math.random();return u+c>=1&&(u=1-u,c=1-c),i.x=t.x1+(r*u+h*c),i.y=t.y1+(a*u+l*c),i}},function(t,i){t.exports=function RotateAroundDistance(t,i,r,o,a){var h=o+Math.atan2(t.y-r,t.x-i);return t.x=i+a*Math.cos(h),t.y=r+a*Math.sin(h),t}},function(t,i){t.exports=function SmootherStep(t,i,r){return(t=Math.max(0,Math.min(1,(t-i)/(r-i))))*t*t*(t*(6*t-15)+10)}},function(t,i){t.exports=function SmoothStep(t,i,r){return t<=i?0:t>=r?1:(t=(t-i)/(r-i))*t*(3-2*t)}},function(t,i,r){var o=r(18),a=r(0),h=r(132),l=r(318),u=r(319),c=r(6),d=r(320),p=new a({initialize:function Animation(t,i,r){this.manager=t,this.key=i,this.type="frame",this.frames=this.getFrames(t.textureManager,c(r,"frames",[]),c(r,"defaultTextureKey",null),c(r,"sortFrames",!0)),this.frameRate=c(r,"frameRate",null),this.duration=c(r,"duration",null),this.msPerFrame,this.skipMissedFrames=c(r,"skipMissedFrames",!0),this.delay=c(r,"delay",0),this.repeat=c(r,"repeat",0),this.repeatDelay=c(r,"repeatDelay",0),this.yoyo=c(r,"yoyo",!1),this.showOnStart=c(r,"showOnStart",!1),this.hideOnComplete=c(r,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(h.PAUSE_ALL,this.pause,this),this.manager.on(h.RESUME_ALL,this.resume,this))},getTotalFrames:function getTotalFrames(){return this.frames.length},calculateDuration:function calculateDuration(t,i,r,o){null===r&&null===o?(t.frameRate=24,t.duration=24/i*1e3):r&&null===o?(t.duration=r,t.frameRate=i/(r/1e3)):(t.frameRate=o,t.duration=i/o*1e3),t.msPerFrame=1e3/t.frameRate},addFrame:function addFrame(t){return this.addFrameAt(this.frames.length,t)},addFrameAt:function addFrameAt(t,i){var r=this.getFrames(this.manager.textureManager,i);if(r.length>0){if(0===t)this.frames=r.concat(this.frames);else if(t===this.frames.length)this.frames=this.frames.concat(r);else{var o=this.frames.slice(0,t),a=this.frames.slice(t);this.frames=o.concat(r,a)}this.updateFrameSequence()}return this},checkFrame:function checkFrame(t){return t>=0&&t<this.frames.length},getFirstTick:function getFirstTick(t){t.accumulator=0,t.nextTick=t.msPerFrame+t.currentFrame.duration},getFrameAt:function getFrameAt(t){return this.frames[t]},getFrames:function getFrames(t,i,r,o){void 0===o&&(o=!0);var a,h,l,p,g=[],v=1;if("string"==typeof i){p=i;var m=t.get(p).getFrameNames();o&&d(m),i=[],m.forEach((function(t){i.push({key:p,frame:t})}))}if(!Array.isArray(i)||0===i.length)return g;for(l=0;l<i.length;l++){var y=i[l],T=c(y,"key",r);if(T){var S=c(y,"frame",0),w=t.getFrame(T,S);(h=new u(T,S,v,w)).duration=c(y,"duration",0),h.isFirst=!a,a&&(a.nextFrame=h,h.prevFrame=a),g.push(h),a=h,v++}}if(g.length>0){h.isLast=!0,h.nextFrame=g[0],g[0].prevFrame=h;var b=1/(g.length-1);for(l=0;l<g.length;l++)g[l].progress=l*b}return g},getNextTick:function getNextTick(t){t.accumulator-=t.nextTick,t.nextTick=t.msPerFrame+t.currentFrame.duration},getFrameByProgress:function getFrameByProgress(t){return t=o(t,0,1),l(t,this.frames,"progress")},nextFrame:function nextFrame(t){var i=t.currentFrame;i.isLast?t.yoyo?this.handleYoyoFrame(t,!1):t.repeatCounter>0?t.inReverse&&t.forward?t.forward=!1:this.repeatAnimation(t):t.complete():this.updateAndGetNextTick(t,i.nextFrame)},handleYoyoFrame:function handleYoyoFrame(t,i){if(i||(i=!1),t.inReverse===!i&&t.repeatCounter>0)return(0===t.repeatDelay||t.pendingRepeat)&&(t.forward=i),void this.repeatAnimation(t);if(t.inReverse===i||0!==t.repeatCounter){t.forward=i;var r=i?t.currentFrame.nextFrame:t.currentFrame.prevFrame;this.updateAndGetNextTick(t,r)}else t.complete()},getLastFrame:function getLastFrame(){return this.frames[this.frames.length-1]},previousFrame:function previousFrame(t){var i=t.currentFrame;i.isFirst?t.yoyo?this.handleYoyoFrame(t,!0):t.repeatCounter>0?(t.inReverse&&!t.forward||(t.forward=!0),this.repeatAnimation(t)):t.complete():this.updateAndGetNextTick(t,i.prevFrame)},updateAndGetNextTick:function updateAndGetNextTick(t,i){t.setCurrentFrame(i),this.getNextTick(t)},removeFrame:function removeFrame(t){var i=this.frames.indexOf(t);return-1!==i&&this.removeFrameAt(i),this},removeFrameAt:function removeFrameAt(t){return this.frames.splice(t,1),this.updateFrameSequence(),this},repeatAnimation:function repeatAnimation(t){if(2===t._pendingStop){if(0===t._pendingStopValue)return t.stop();t._pendingStopValue--}t.repeatDelay>0&&!t.pendingRepeat?(t.pendingRepeat=!0,t.accumulator-=t.nextTick,t.nextTick+=t.repeatDelay):(t.repeatCounter--,t.forward?t.setCurrentFrame(t.currentFrame.nextFrame):t.setCurrentFrame(t.currentFrame.prevFrame),t.isPlaying&&(this.getNextTick(t),t.handleRepeat()))},toJSON:function toJSON(){var t={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach((function(i){t.frames.push(i.toJSON())})),t},updateFrameSequence:function updateFrameSequence(){for(var t,i=this.frames.length,r=1/(i-1),o=0;o<i;o++)(t=this.frames[o]).index=o+1,t.isFirst=!1,t.isLast=!1,t.progress=o*r,0===o?(t.isFirst=!0,1===i?(t.isLast=!0,t.nextFrame=t,t.prevFrame=t):(t.isLast=!1,t.prevFrame=this.frames[i-1],t.nextFrame=this.frames[o+1])):o===i-1&&i>1?(t.isLast=!0,t.prevFrame=this.frames[i-2],t.nextFrame=this.frames[0]):i>1&&(t.prevFrame=this.frames[o-1],t.nextFrame=this.frames[o+1]);return this},pause:function pause(){return this.paused=!0,this},resume:function resume(){return this.paused=!1,this},destroy:function destroy(){this.manager.off&&(this.manager.off(h.PAUSE_ALL,this.pause,this),this.manager.off(h.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var t=0;t<this.frames.length;t++)this.frames[t].destroy();this.frames=[],this.manager=null}});t.exports=p},function(t,i){t.exports=function Pad(t,i,r,o){void 0===i&&(i=0),void 0===r&&(r=" "),void 0===o&&(o=3);var a=0;if(i+1>=(t=t.toString()).length)switch(o){case 1:t=new Array(i+1-t.length).join(r)+t;break;case 3:var h=Math.ceil((a=i-t.length)/2);t=new Array(a-h+1).join(r)+t+new Array(h+1).join(r);break;default:t+=new Array(i+1-t.length).join(r)}return t}},function(t,i,r){var o=r(327),a=r(189),h=r(331),l=r(332);t.exports=function ValueToColor(t){switch(_typeof(t)){case"string":return"rgb"===t.substr(0,3).toLowerCase()?l(t):o(t);case"number":return a(t);case"object":return h(t)}}},function(t,i,r){var o=r(103);function ConvertValue(t,i,r,o){var a=(t+6*i)%6,h=Math.min(a,4-a,1);return Math.round(255*(o-o*r*Math.max(0,h)))}t.exports=function HSVToRGB(t,i,r,a){void 0===i&&(i=1),void 0===r&&(r=1);var h=ConvertValue(5,t,i,r),l=ConvertValue(3,t,i,r),u=ConvertValue(1,t,i,r);return a?a.setTo?a.setTo(h,l,u,a.alpha,!1):(a.r=h,a.g=l,a.b=u,a.color=o(h,l,u),a):{r:h,g:l,b:u,color:o(h,l,u)}}},function(t,i,r){var o=r(38),a=r(330);t.exports=function IntegerToColor(t){var i=a(t);return new o(i.r,i.g,i.b,i.a)}},function(t,i){t.exports=function CenterOn(t,i,r){return t.x=i-t.width/2,t.y=r-t.height/2,t}},function(t,i,r){var o=r(105),a=r(136),h=r(31),l={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};t.exports=function init(){if("function"==typeof importScripts)return l;l.canvas=!!window.CanvasRenderingContext2D;try{l.localStorage=!!localStorage.getItem}catch(i){l.localStorage=!1}l.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),l.fileSystem=!!window.requestFileSystem;var t=!1;return l.webGL=function testWebGL(){if(window.WebGLRenderingContext)try{var i=h.createWebGL(this),r=i.getContext("webgl")||i.getContext("experimental-webgl"),o=h.create2D(this),a=o.getContext("2d").createImageData(1,1);return t=a.data instanceof Uint8ClampedArray,h.remove(i),h.remove(o),!!r}catch(l){return!1}return!1}(),l.worker=!!window.Worker,l.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,l.getUserMedia=l.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,a.firefox&&a.firefoxVersion<21&&(l.getUserMedia=!1),!o.iOS&&(a.ie||a.firefox||a.chrome)&&(l.canvasBitBltShift=!0),(a.safari||a.mobileSafari)&&(l.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(l.vibration=!0),"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint32Array&&(l.littleEndian=function checkIsLittleEndian(){var t=new ArrayBuffer(4),i=new Uint8Array(t),r=new Uint32Array(t);return i[0]=161,i[1]=178,i[2]=195,i[3]=212,3569595041===r[0]||2712847316!==r[0]&&null}()),l.support32bit="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof Int32Array&&null!==l.littleEndian&&t,l}()},function(t,i){var r="";t.exports=function Smoothing(){var t=function getPrefix(t){for(var i=["i","webkitI","msI","mozI","oI"],r=0;r<i.length;r++){var o=i[r]+"mageSmoothingEnabled";if(o in t)return o}return null};return{disable:function disable(i){return""===r&&(r=t(i)),r&&(i[r]=!1),i},enable:function enable(i){return""===r&&(r=t(i)),r&&(i[r]=!0),i},getPrefix:t,isEnabled:function isEnabled(t){return null!==r?t[r]:null}}}()},function(t,i,r){var o=r(14),a=r(17),h={Angle:r(812),Distance:r(821),Easing:r(826),Fuzzy:r(827),Interpolation:r(830),Pow2:r(835),Snap:r(837),RandomDataGenerator:r(839),Average:r(840),Bernstein:r(356),Between:r(195),CatmullRom:r(194),CeilTo:r(841),Clamp:r(18),DegToRad:r(36),Difference:r(842),Euler:r(843),Factorial:r(357),FloatBetween:r(137),FloorTo:r(844),FromPercent:r(98),GetSpeed:r(845),IsEven:r(846),IsEvenStrict:r(847),Linear:r(135),MaxAdd:r(848),Median:r(849),MinSub:r(850),Percent:r(851),RadToDeg:r(196),RandomXY:r(852),RandomXYZ:r(853),RandomXYZW:r(854),Rotate:r(362),RotateAround:r(308),RotateAroundDistance:r(182),RotateTo:r(855),RoundAwayFromZero:r(363),RoundTo:r(856),SinCosTableGenerator:r(857),SmootherStep:r(183),SmoothStep:r(184),ToXY:r(858),TransformXY:r(177),Within:r(859),Wrap:r(68),Vector2:r(3),Vector3:r(39),Vector4:r(140),Matrix3:r(364),Matrix4:r(69),Quaternion:r(365),RotateVec3:r(860)};h=a(!1,h,o),t.exports=h},function(t,i){t.exports=function CatmullRom(t,i,r,o,a){var h=.5*(o-i),l=.5*(a-r),u=t*t;return(2*r-2*o+h+l)*(t*u)+(-3*r+3*o-2*h-l)*u+h*t+r}},function(t,i){t.exports=function Between(t,i){return Math.floor(Math.random()*(i-t+1)+t)}},function(t,i,r){var o=r(14);t.exports=function RadToDeg(t){return t*o.RAD_TO_DEG}},function(t,i,r){t.exports={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]}},function(t,i,r){var o=new(r(0))({initialize:function ColorMatrix(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function set(t){return this._matrix=t,this._dirty=!0,this},reset:function reset(){var t=this._matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=1,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=1,t[13]=0,t[14]=0,t[15]=0,t[16]=0,t[17]=0,t[18]=1,t[19]=0,this._dirty=!0,this},getData:function getData(){if(this._dirty){var t=new Float32Array(this._matrix);t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,this._data=t,this._dirty=!1}return this._data},brightness:function brightness(t,i){void 0===t&&(t=0),void 0===i&&(i=!1);var r=t;return this.multiply([r,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0],i)},saturate:function saturate(t,i){void 0===t&&(t=0),void 0===i&&(i=!1);var r=2*t/3+1,o=-.5*(r-1);return this.multiply([r,o,o,0,0,o,r,o,0,0,o,o,r,0,0,0,0,0,1,0],i)},desaturate:function desaturate(t){return void 0===t&&(t=!1),this.saturate(-1,t)},hue:function hue(t,i){void 0===t&&(t=0),void 0===i&&(i=!1),t=t/180*Math.PI;var r=Math.cos(t),o=Math.sin(t),a=.213,h=.715,l=.072;return this.multiply([a+.787*r+o*-a,h+r*-h+o*-h,l+r*-l+.928*o,0,0,a+r*-a+.143*o,h+r*(1-h)+.14*o,l+r*-l+-.283*o,0,0,a+r*-a+-.787*o,h+r*-h+o*h,l+.928*r+o*l,0,0,0,0,0,1,0],i)},grayscale:function grayscale(t,i){return void 0===t&&(t=1),void 0===i&&(i=!1),this.saturate(-t,i)},blackWhite:function blackWhite(t){return void 0===t&&(t=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},contrast:function contrast(t,i){void 0===t&&(t=0),void 0===i&&(i=!1);var r=t+1,o=-.5*(r-1);return this.multiply([r,0,0,0,o,0,r,0,0,o,0,0,r,0,o,0,0,0,1,0],i)},negative:function negative(t){return void 0===t&&(t=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},desaturateLuminance:function desaturateLuminance(t){return void 0===t&&(t=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],t)},sepia:function sepia(t){return void 0===t&&(t=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},night:function night(t,i){return void 0===t&&(t=.1),void 0===i&&(i=!1),this.multiply([-2*t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0],i)},lsd:function lsd(t){return void 0===t&&(t=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},brown:function brown(t){return void 0===t&&(t=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},vintagePinhole:function vintagePinhole(t){return void 0===t&&(t=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},kodachrome:function kodachrome(t){return void 0===t&&(t=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},technicolor:function technicolor(t){return void 0===t&&(t=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},polaroid:function polaroid(t){return void 0===t&&(t=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},shiftToBGR:function shiftToBGR(t){return void 0===t&&(t=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},multiply:function multiply(t,i){i||this.reset();for(var r=this._matrix,o=[],a=0;a<20;a++)o[a]=r[a];return r[0]=o[0]*t[0]+o[1]*t[5]+o[2]*t[10]+o[3]*t[15],r[1]=o[0]*t[1]+o[1]*t[6]+o[2]*t[11]+o[3]*t[16],r[2]=o[0]*t[2]+o[1]*t[7]+o[2]*t[12]+o[3]*t[17],r[3]=o[0]*t[3]+o[1]*t[8]+o[2]*t[13]+o[3]*t[18],r[4]=o[0]*t[4]+o[1]*t[9]+o[2]*t[14]+o[3]*t[19]+o[4],r[5]=o[5]*t[0]+o[6]*t[5]+o[7]*t[10]+o[8]*t[15],r[6]=o[5]*t[1]+o[6]*t[6]+o[7]*t[11]+o[8]*t[16],r[7]=o[5]*t[2]+o[6]*t[7]+o[7]*t[12]+o[8]*t[17],r[8]=o[5]*t[3]+o[6]*t[8]+o[7]*t[13]+o[8]*t[18],r[9]=o[5]*t[4]+o[6]*t[9]+o[7]*t[14]+o[8]*t[19]+o[9],r[10]=o[10]*t[0]+o[11]*t[5]+o[12]*t[10]+o[13]*t[15],r[11]=o[10]*t[1]+o[11]*t[6]+o[12]*t[11]+o[13]*t[16],r[12]=o[10]*t[2]+o[11]*t[7]+o[12]*t[12]+o[13]*t[17],r[13]=o[10]*t[3]+o[11]*t[8]+o[12]*t[13]+o[13]*t[18],r[14]=o[10]*t[4]+o[11]*t[9]+o[12]*t[14]+o[13]*t[19]+o[14],r[15]=o[15]*t[0]+o[16]*t[5]+o[17]*t[10]+o[18]*t[15],r[16]=o[15]*t[1]+o[16]*t[6]+o[17]*t[11]+o[18]*t[16],r[17]=o[15]*t[2]+o[16]*t[7]+o[17]*t[12]+o[18]*t[17],r[18]=o[15]*t[3]+o[16]*t[8]+o[17]*t[13]+o[18]*t[18],r[19]=o[15]*t[4]+o[16]*t[9]+o[17]*t[14]+o[18]*t[19]+o[19],this._dirty=!0,this}});t.exports=o},function(t,i,r){var o=r(10),a=r(14);t.exports=function FromPoints(t,i){if(void 0===i&&(i=new o),0===t.length)return i;for(var r,h,l,u=Number.MAX_VALUE,c=Number.MAX_VALUE,d=a.MIN_SAFE_INTEGER,p=a.MIN_SAFE_INTEGER,g=0;g<t.length;g++)r=t[g],Array.isArray(r)?(h=r[0],l=r[1]):(h=r.x,l=r.y),u=Math.min(u,h),c=Math.min(c,l),d=Math.max(d,h),p=Math.max(p,l);return i.x=u,i.y=c,i.width=d-u,i.height=p-c,i}},function(t,i,r){var o=r(0),a=r(1),h=new o({initialize:function RGB(t,i,r){this._rgb=[0,0,0],this.onChangeCallback=a,this.dirty=!1,this.set(t,i,r)},set:function set(t,i,r){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),this._rgb=[t,i,r],this.onChange(),this},equals:function equals(t,i,r){var o=this._rgb;return o.r===t&&o.g===i&&o.b===r},onChange:function onChange(){this.dirty=!0;var t=this._rgb;this.onChangeCallback.call(this,t[0],t[1],t[2])},r:{get:function get(){return this._rgb[0]},set:function set(t){this._rgb[0]=t,this.onChange()}},g:{get:function get(){return this._rgb[1]},set:function set(t){this._rgb[1]=t,this.onChange()}},b:{get:function get(){return this._rgb[2]},set:function set(t){this._rgb[2]=t,this.onChange()}},destroy:function destroy(){this.onChangeCallback=null}});t.exports=h},function(t,i,r){var o={CENTER:r(403),ORIENTATION:r(404),SCALE_MODE:r(405),ZOOM:r(406)};t.exports=o},function(t,i){t.exports=function RemoveFromDOM(t){t.parentNode&&t.parentNode.removeChild(t)}},function(t,i){t.exports={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8}},function(t,i,r){var o=r(0),a=r(144),h=r(197),l=r(20),u=r(419),c=r(420),d=r(33),p=r(1),g=r(421),v=new o({initialize:function Systems(t,i){this.scene=t,this.game,this.renderer,this.config=i,this.settings=g.create(i),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=p},init:function init(t){this.settings.status=a.INIT,this.sceneUpdate=p,this.game=t,this.renderer=t.renderer,this.canvas=t.canvas,this.context=t.context;var i=t.plugins;this.plugins=i,i.addToScene(this,h.Global,[h.CoreScene,c(this),u(this)]),this.events.emit(l.BOOT,this),this.settings.isBooted=!0},step:function step(t,i){var r=this.events;r.emit(l.PRE_UPDATE,t,i),r.emit(l.UPDATE,t,i),this.sceneUpdate.call(this.scene,t,i),r.emit(l.POST_UPDATE,t,i)},render:function render(t){var i=this.displayList;i.depthSort(),this.events.emit(l.PRE_RENDER,t),this.cameras.render(t,i),this.events.emit(l.RENDER,t)},queueDepthSort:function queueDepthSort(){this.displayList.queueDepthSort()},depthSort:function depthSort(){this.displayList.depthSort()},pause:function pause(t){var i=this.events,r=this.settings;return this.settings.active&&(r.status=a.PAUSED,r.active=!1,i.emit(l.PAUSE,this,t)),this},resume:function resume(t){var i=this.events,r=this.settings;return this.settings.active||(r.status=a.RUNNING,r.active=!0,i.emit(l.RESUME,this,t)),this},sleep:function sleep(t){var i=this.events,r=this.settings;return r.status=a.SLEEPING,r.active=!1,r.visible=!1,i.emit(l.SLEEP,this,t),this},wake:function wake(t){var i=this.events,r=this.settings;return r.status=a.RUNNING,r.active=!0,r.visible=!0,i.emit(l.WAKE,this,t),r.isTransition&&i.emit(l.TRANSITION_WAKE,r.transitionFrom,r.transitionDuration),this},getData:function getData(){return this.settings.data},isSleeping:function isSleeping(){return this.settings.status===a.SLEEPING},isActive:function isActive(){return this.settings.status===a.RUNNING},isPaused:function isPaused(){return this.settings.status===a.PAUSED},isTransitioning:function isTransitioning(){return this.settings.isTransition||null!==this.scenePlugin._target},isTransitionOut:function isTransitionOut(){return null!==this.scenePlugin._target&&this.scenePlugin._duration>0},isTransitionIn:function isTransitionIn(){return this.settings.isTransition},isVisible:function isVisible(){return this.settings.visible},setVisible:function setVisible(t){return this.settings.visible=t,this},setActive:function setActive(t,i){return t?this.resume(i):this.pause(i)},start:function start(t){var i=this.events,r=this.settings;t&&(r.data=t),r.status=a.START,r.active=!0,r.visible=!0,i.emit(l.START,this),i.emit(l.READY,this,t)},shutdown:function shutdown(t){var i=this.events,r=this.settings;i.off(l.TRANSITION_INIT),i.off(l.TRANSITION_START),i.off(l.TRANSITION_COMPLETE),i.off(l.TRANSITION_OUT),r.status=a.SHUTDOWN,r.active=!1,r.visible=!1,this.renderer===d.WEBGL&&this.renderer.resetTextures(!0),i.emit(l.SHUTDOWN,this,t)},destroy:function destroy(){var t=this.events,i=this.settings;i.status=a.DESTROYED,i.active=!1,i.visible=!1,t.emit(l.DESTROY,this),t.removeAllListeners();for(var r=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],o=0;o<r.length;o++)this[r[o]]=null}});t.exports=v},function(t,i){t.exports=function UppercaseFirst(t){return t&&t[0].toUpperCase()+t.slice(1)}},function(t,i,r){var o=r(33),a=r(0),h=r(109),l=r(424),u="Texture.frame missing: ",c=new a({initialize:function Texture(t,i,r,o,a){Array.isArray(r)||(r=[r]),this.manager=t,this.key=i,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var h=0;h<r.length;h++)this.source.push(new l(this,r[h],o,a))},add:function add(t,i,r,o,a,l){if(this.has(t))return null;var u=new h(this,t,i,r,o,a,l);return this.frames[t]=u,"__BASE"===this.firstFrame&&(this.firstFrame=t),this.frameTotal++,u},remove:function remove(t){return!!this.has(t)&&(this.get(t).destroy(),delete this.frames[t],!0)},has:function has(t){return this.frames[t]},get:function get(t){t||(t=this.firstFrame);var i=this.frames[t];return i||(console.warn(u+t),i=this.frames[this.firstFrame]),i},getTextureSourceIndex:function getTextureSourceIndex(t){for(var i=0;i<this.source.length;i++)if(this.source[i]===t)return i;return-1},getFramesFromTextureSource:function getFramesFromTextureSource(t,i){void 0===i&&(i=!1);var r=[];for(var o in this.frames)if("__BASE"!==o||i){var a=this.frames[o];a.sourceIndex===t&&r.push(a)}return r},getFrameNames:function getFrameNames(t){void 0===t&&(t=!1);var i=Object.keys(this.frames);if(!t){var r=i.indexOf("__BASE");-1!==r&&i.splice(r,1)}return i},getSourceImage:function getSourceImage(t){null!=t&&1!==this.frameTotal||(t="__BASE");var i=this.frames[t];return i?i.source.image:(console.warn(u+t),this.frames.__BASE.source.image)},getDataSourceImage:function getDataSourceImage(t){null!=t&&1!==this.frameTotal||(t="__BASE");var i,r=this.frames[t];return r?i=r.sourceIndex:(console.warn(u+t),i=this.frames.__BASE.sourceIndex),this.dataSource[i].image},setDataSource:function setDataSource(t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var r=this.source[i];this.dataSource.push(new l(this,t[i],r.width,r.height))}},setFilter:function setFilter(t){var i;for(i=0;i<this.source.length;i++)this.source[i].setFilter(t);for(i=0;i<this.dataSource.length;i++)this.dataSource[i].setFilter(t)},destroy:function destroy(){var t;for(t=0;t<this.source.length;t++)this.source[t].destroy();for(t=0;t<this.dataSource.length;t++)this.dataSource[t].destroy();for(var i in this.frames)this.frames[i].destroy();this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var r=this.manager.game.renderer;r&&r.type===o.WEBGL&&r.resetTextures(!0),this.manager=null}});t.exports=c},function(t,i,r){var o=r(78);t.exports=function GetAll(t,i,r,a,h){void 0===a&&(a=0),void 0===h&&(h=t.length);var l=[];if(o(t,a,h))for(var u=a;u<h;u++){var c=t[u];(!i||i&&void 0===r&&c.hasOwnProperty(i)||i&&void 0!==r&&c[i]===r)&&l.push(c)}return l}},function(t,i,r){t.exports={Matrix:r(1013),Add:r(1021),AddAt:r(1022),BringToTop:r(1023),CountAllMatching:r(1024),Each:r(1025),EachInRange:r(1026),FindClosestInSorted:r(318),GetAll:r(207),GetFirst:r(428),GetRandom:r(210),MoveDown:r(1027),MoveTo:r(1028),MoveUp:r(1029),MoveAbove:r(1030),MoveBelow:r(1031),NumberArray:r(322),NumberArrayStep:r(1032),QuickSelect:r(436),Range:r(437),Remove:r(93),RemoveAt:r(1033),RemoveBetween:r(1034),RemoveRandomElement:r(1035),Replace:r(1036),RotateLeft:r(178),RotateRight:r(179),SafeRange:r(78),SendToBack:r(1037),SetAll:r(1038),Shuffle:r(131),SortByDigits:r(320),SpliceOne:r(74),StableSort:r(79),Swap:r(1039)}},function(t,i){t.exports=function CheckMatrix(t){if(!Array.isArray(t)||t.length<2||!Array.isArray(t[0]))return!1;for(var i=t[0].length,r=1;r<t.length;r++)if(t[r].length!==i)return!1;return!0}},function(t,i){t.exports=function GetRandom(t,i,r){void 0===i&&(i=0),void 0===r&&(r=t.length);var o=i+Math.floor(Math.random()*r);return void 0===t[o]?null:t[o]}},function(t,i,r){var o=r(0),a=r(9),h=r(438),l=new o({Extends:a,initialize:function ProcessQueue(){a.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function add(t){return this._pending.push(t),this._toProcess++,t},remove:function remove(t){return this._destroy.push(t),this._toProcess++,t},removeAll:function removeAll(){for(var t=this._active,i=this._destroy,r=t.length;r--;)i.push(t[r]),this._toProcess++;return this},update:function update(){if(0===this._toProcess)return this._active;var t,i,r=this._destroy,o=this._active;for(t=0;t<r.length;t++){i=r[t];var a=o.indexOf(i);-1!==a&&(o.splice(a,1),this.emit(h.PROCESS_QUEUE_REMOVE,i))}for(r.length=0,r=this._pending,t=0;t<r.length;t++)i=r[t],(!this.checkQueue||this.checkQueue&&-1===o.indexOf(i))&&(o.push(i),this.emit(h.PROCESS_QUEUE_ADD,i));return r.length=0,this._toProcess=0,o},getActive:function getActive(){return this._active},length:{get:function get(){return this._active.length}},destroy:function destroy(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});t.exports=l},function(t,i){function getValue(t,i){return parseInt(t.getAttribute(i),10)}t.exports=function ParseXMLBitmapFont(t,i,r,o,a){void 0===r&&(r=0),void 0===o&&(o=0);var h=i.cutX,l=i.cutY,u=i.source.width,c=i.source.height,d=i.sourceIndex,p={},g=t.getElementsByTagName("info")[0],v=t.getElementsByTagName("common")[0];p.font=g.getAttribute("face"),p.size=getValue(g,"size"),p.lineHeight=getValue(v,"lineHeight")+o,p.chars={};var m=t.getElementsByTagName("char"),y=void 0!==i&&i.trimmed;if(y)var T=i.height,S=i.width;for(var w=0;w<m.length;w++){var b=m[w],C=getValue(b,"id"),A=String.fromCharCode(C),E=getValue(b,"x"),M=getValue(b,"y"),_=getValue(b,"width"),R=getValue(b,"height");y&&(E<S&&(S=E),M<T&&(T=M)),y&&0!==T&&0!==S&&(E-=i.x,M-=i.y);var P=(h+E)/u,k=(l+M)/c,O=(h+E+_)/u,L=(l+M+R)/c;if(p.chars[C]={x:E,y:M,width:_,height:R,centerX:Math.floor(_/2),centerY:Math.floor(R/2),xOffset:getValue(b,"xoffset"),yOffset:getValue(b,"yoffset"),xAdvance:getValue(b,"xadvance")+r,data:{},kerning:{},u0:P,v0:k,u1:O,v1:L},a&&0!==_&&0!==R){var D=a.add(A,d,E,M,_,R);D&&D.setUVs(_,R,P,k,O,L)}}var I=t.getElementsByTagName("kerning");for(w=0;w<I.length;w++){var B=I[w],N=getValue(B,"first"),G=getValue(B,"second"),Y=getValue(B,"amount");p.chars[G].kerning[N]=Y}return p}},function(t,i,r){var o=r(1049),a=r(440),h=r(0),l=r(11),u=r(109),c=r(15),d=r(110),p=new h({Extends:c,Mixins:[l.Alpha,l.BlendMode,l.Depth,l.Mask,l.Pipeline,l.ScrollFactor,l.Size,l.Texture,l.Transform,l.Visible,o],initialize:function Blitter(t,i,r,o,a){c.call(this,t,"Blitter"),this.setTexture(o,a),this.setPosition(i,r),this.initPipeline(),this.children=new d,this.renderList=[],this.dirty=!1},create:function create(t,i,r,o,h){void 0===o&&(o=!0),void 0===h&&(h=this.children.length),void 0===r?r=this.frame:r instanceof u||(r=this.texture.get(r));var l=new a(this,t,i,r,o);return this.children.addAt(l,h,!1),this.dirty=!0,l},createFromCallback:function createFromCallback(t,i,r,o){for(var a=this.createMultiple(i,r,o),h=0;h<a.length;h++){var l=a[h];t.call(this,l,h)}return a},createMultiple:function createMultiple(t,i,r){void 0===i&&(i=this.frame.name),void 0===r&&(r=!0),Array.isArray(i)||(i=[i]);var o=[],a=this;return i.forEach((function(i){for(var h=0;h<t;h++)o.push(a.create(0,0,i,r))})),o},childCanRender:function childCanRender(t){return t.visible&&t.alpha>0},getRenderList:function getRenderList(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function clear(){this.children.removeAll(),this.dirty=!0},preDestroy:function preDestroy(){this.children.destroy(),this.renderList=[]}});t.exports=p},function(t,i,r){var o=r(208),a=r(35),h=r(0),l=r(11),u=r(75),c=r(15),d=r(10),p=r(1052),g=r(441),v=r(3),m=new h({Extends:c,Mixins:[l.AlphaSingle,l.BlendMode,l.ComputedSize,l.Depth,l.Mask,l.Pipeline,l.Transform,l.Visible,p],initialize:function Container(t,i,r,o){c.call(this,t,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new l.TransformMatrix,this.tempTransformMatrix=new l.TransformMatrix,this._sortKey="",this._sysEvents=t.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(i,r),this.clearAlpha(),this.setBlendMode(a.SKIP_CHECK),o&&this.add(o)},originX:{get:function get(){return.5}},originY:{get:function get(){return.5}},displayOriginX:{get:function get(){return.5*this.width}},displayOriginY:{get:function get(){return.5*this.height}},setExclusive:function setExclusive(t){return void 0===t&&(t=!0),this.exclusive=t,this},getBounds:function getBounds(t){if(void 0===t&&(t=new d),t.setTo(this.x,this.y,0,0),this.parentContainer){var i=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y);t.setTo(i.x,i.y,0,0)}if(this.list.length>0){var r=this.list,o=new d,a=!1;t.setEmpty();for(var h=0;h<r.length;h++){var l=r[h];l.getBounds&&(l.getBounds(o),a?g(o,t,t):(t.setTo(o.x,o.y,o.width,o.height),a=!0))}}return t},addHandler:function addHandler(t){t.once(u.DESTROY,this.remove,this),this.exclusive&&(t.parentContainer&&t.parentContainer.remove(t),t.removeFromDisplayList(),t.parentContainer=this)},removeHandler:function removeHandler(t){t.off(u.DESTROY,this.remove),this.exclusive&&(t.parentContainer=null,t.addToDisplayList())},pointToContainer:function pointToContainer(t,i){void 0===i&&(i=new v),this.parentContainer?this.parentContainer.pointToContainer(t,i):i=new v(t.x,t.y);var r=this.tempTransformMatrix;return r.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),r.invert(),r.transformPoint(t.x,t.y,i),i},getBoundsTransformMatrix:function getBoundsTransformMatrix(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function add(t){return o.Add(this.list,t,this.maxSize,this.addHandler,this),this},addAt:function addAt(t,i){return o.AddAt(this.list,t,i,this.maxSize,this.addHandler,this),this},getAt:function getAt(t){return this.list[t]},getIndex:function getIndex(t){return this.list.indexOf(t)},sort:function sort(t,i){return t?(void 0===i&&(i=function handler(i,r){return i[t]-r[t]}),o.StableSort(this.list,i),this):this},getByName:function getByName(t){return o.GetFirst(this.list,"name",t)},getRandom:function getRandom(t,i){return o.GetRandom(this.list,t,i)},getFirst:function getFirst(t,i,r,a){return o.GetFirst(this.list,t,i,r,a)},getAll:function getAll(t,i,r,a){return o.GetAll(this.list,t,i,r,a)},count:function count(t,i,r,a){return o.CountAllMatching(this.list,t,i,r,a)},swap:function swap(t,i){return o.Swap(this.list,t,i),this},moveTo:function moveTo(t,i){return o.MoveTo(this.list,t,i),this},moveAbove:function moveAbove(t,i){return o.MoveAbove(this.list,t,i),this},moveBelow:function moveBelow(t,i){return o.MoveBelow(this.list,t,i),this},remove:function remove(t,i){var r=o.Remove(this.list,t,this.removeHandler,this);if(i&&r){Array.isArray(r)||(r=[r]);for(var a=0;a<r.length;a++)r[a].destroy()}return this},removeAt:function removeAt(t,i){var r=o.RemoveAt(this.list,t,this.removeHandler,this);return i&&r&&r.destroy(),this},removeBetween:function removeBetween(t,i,r){var a=o.RemoveBetween(this.list,t,i,this.removeHandler,this);if(r)for(var h=0;h<a.length;h++)a[h].destroy();return this},removeAll:function removeAll(t){var i=o.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(t)for(var r=0;r<i.length;r++)i[r].destroy();return this},bringToTop:function bringToTop(t){return o.BringToTop(this.list,t),this},sendToBack:function sendToBack(t){return o.SendToBack(this.list,t),this},moveUp:function moveUp(t){return o.MoveUp(this.list,t),this},moveDown:function moveDown(t){return o.MoveDown(this.list,t),this},reverse:function reverse(){return this.list.reverse(),this},shuffle:function shuffle(){return o.Shuffle(this.list),this},replace:function replace(t,i,r){return o.Replace(this.list,t,i)&&(this.addHandler(i),this.removeHandler(t),r&&t.destroy()),this},exists:function exists(t){return this.list.indexOf(t)>-1},setAll:function setAll(t,i,r,a){return o.SetAll(this.list,t,i,r,a),this},each:function each(t,i){var r,o=[null],a=this.list.slice(),h=a.length;for(r=2;r<arguments.length;r++)o.push(arguments[r]);for(r=0;r<h;r++)o[0]=a[r],t.apply(i,o);return this},iterate:function iterate(t,i){var r,o=[null];for(r=2;r<arguments.length;r++)o.push(arguments[r]);for(r=0;r<this.list.length;r++)o[0]=this.list[r],t.apply(i,o);return this},setScrollFactor:function setScrollFactor(t,i,r){return void 0===i&&(i=t),void 0===r&&(r=!1),this.scrollFactorX=t,this.scrollFactorY=i,r&&(o.SetAll(this.list,"scrollFactorX",t),o.SetAll(this.list,"scrollFactorY",i)),this},length:{get:function get(){return this.list.length}},first:{get:function get(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function get(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function get(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function get(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function preDestroy(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});t.exports=m},function(t,i,r){var o=r(148),a=r(0),h=r(1057),l=new a({Extends:o,Mixins:[h],initialize:function DynamicBitmapText(t,i,r,a,h,l,u){o.call(this,t,i,r,a,h,l,u),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function setSize(t,i){return this.cropWidth=t,this.cropHeight=i,this},setDisplayCallback:function setDisplayCallback(t){return this.displayCallback=t,this},setScrollX:function setScrollX(t){return this.scrollX=t,this},setScrollY:function setScrollY(t){return this.scrollY=t,this}});t.exports=l},function(t,i,r){var o=r(133),a=r(0),h=r(217),l=r(303),u=r(304),c=r(305),d=r(309),p=r(167),g=r(312),v=r(313),m=r(314),y=r(111),T=r(15),S=r(2),w=r(6),b=r(14),C=r(1063),A=new a({Extends:T,Mixins:[l,u,c,d,p,v,m,g,C],initialize:function Graphics(t,i){var r=w(i,"x",0),o=w(i,"y",0);T.call(this,t,"Graphics"),this.setPosition(r,o),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(i)},setDefaultStyles:function setDefaultStyles(t){return w(t,"lineStyle",null)&&(this.defaultStrokeWidth=w(t,"lineStyle.width",1),this.defaultStrokeColor=w(t,"lineStyle.color",16777215),this.defaultStrokeAlpha=w(t,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),w(t,"fillStyle",null)&&(this.defaultFillColor=w(t,"fillStyle.color",16777215),this.defaultFillAlpha=w(t,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function lineStyle(t,i,r){return void 0===r&&(r=1),this.commandBuffer.push(h.LINE_STYLE,t,i,r),this._lineWidth=t,this},fillStyle:function fillStyle(t,i){return void 0===i&&(i=1),this.commandBuffer.push(h.FILL_STYLE,t,i),this},fillGradientStyle:function fillGradientStyle(t,i,r,o,a,l,u,c){return void 0===a&&(a=1),void 0===l&&(l=a),void 0===u&&(u=a),void 0===c&&(c=a),this.commandBuffer.push(h.GRADIENT_FILL_STYLE,a,l,u,c,t,i,r,o),this},lineGradientStyle:function lineGradientStyle(t,i,r,o,a,l){return void 0===l&&(l=1),this.commandBuffer.push(h.GRADIENT_LINE_STYLE,t,l,i,r,o,a),this},beginPath:function beginPath(){return this.commandBuffer.push(h.BEGIN_PATH),this},closePath:function closePath(){return this.commandBuffer.push(h.CLOSE_PATH),this},fillPath:function fillPath(){return this.commandBuffer.push(h.FILL_PATH),this},fill:function fill(){return this.commandBuffer.push(h.FILL_PATH),this},strokePath:function strokePath(){return this.commandBuffer.push(h.STROKE_PATH),this},stroke:function stroke(){return this.commandBuffer.push(h.STROKE_PATH),this},fillCircleShape:function fillCircleShape(t){return this.fillCircle(t.x,t.y,t.radius)},strokeCircleShape:function strokeCircleShape(t){return this.strokeCircle(t.x,t.y,t.radius)},fillCircle:function fillCircle(t,i,r){return this.beginPath(),this.arc(t,i,r,0,b.PI2),this.fillPath(),this},strokeCircle:function strokeCircle(t,i,r){return this.beginPath(),this.arc(t,i,r,0,b.PI2),this.strokePath(),this},fillRectShape:function fillRectShape(t){return this.fillRect(t.x,t.y,t.width,t.height)},strokeRectShape:function strokeRectShape(t){return this.strokeRect(t.x,t.y,t.width,t.height)},fillRect:function fillRect(t,i,r,o){return this.commandBuffer.push(h.FILL_RECT,t,i,r,o),this},strokeRect:function strokeRect(t,i,r,o){var a=this._lineWidth/2,h=t-a,l=t+a;return this.beginPath(),this.moveTo(t,i),this.lineTo(t,i+o),this.strokePath(),this.beginPath(),this.moveTo(t+r,i),this.lineTo(t+r,i+o),this.strokePath(),this.beginPath(),this.moveTo(h,i),this.lineTo(l+r,i),this.strokePath(),this.beginPath(),this.moveTo(h,i+o),this.lineTo(l+r,i+o),this.strokePath(),this},fillRoundedRect:function fillRoundedRect(t,i,r,o,a){void 0===a&&(a=20);var h=a,l=a,u=a,c=a;return"number"!=typeof a&&(h=S(a,"tl",20),l=S(a,"tr",20),u=S(a,"bl",20),c=S(a,"br",20)),this.beginPath(),this.moveTo(t+h,i),this.lineTo(t+r-l,i),this.arc(t+r-l,i+l,l,-b.TAU,0),this.lineTo(t+r,i+o-c),this.arc(t+r-c,i+o-c,c,0,b.TAU),this.lineTo(t+u,i+o),this.arc(t+u,i+o-u,u,b.TAU,Math.PI),this.lineTo(t,i+h),this.arc(t+h,i+h,h,-Math.PI,-b.TAU),this.fillPath(),this},strokeRoundedRect:function strokeRoundedRect(t,i,r,o,a){void 0===a&&(a=20);var h=a,l=a,u=a,c=a;return"number"!=typeof a&&(h=S(a,"tl",20),l=S(a,"tr",20),u=S(a,"bl",20),c=S(a,"br",20)),this.beginPath(),this.moveTo(t+h,i),this.lineTo(t+r-l,i),this.moveTo(t+r-l,i),this.arc(t+r-l,i+l,l,-b.TAU,0),this.lineTo(t+r,i+o-c),this.moveTo(t+r,i+o-c),this.arc(t+r-c,i+o-c,c,0,b.TAU),this.lineTo(t+u,i+o),this.moveTo(t+u,i+o),this.arc(t+u,i+o-u,u,b.TAU,Math.PI),this.lineTo(t,i+h),this.moveTo(t,i+h),this.arc(t+h,i+h,h,-Math.PI,-b.TAU),this.strokePath(),this},fillPointShape:function fillPointShape(t,i){return this.fillPoint(t.x,t.y,i)},fillPoint:function fillPoint(t,i,r){return!r||r<1?r=1:(t-=r/2,i-=r/2),this.commandBuffer.push(h.FILL_RECT,t,i,r,r),this},fillTriangleShape:function fillTriangleShape(t){return this.fillTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},strokeTriangleShape:function strokeTriangleShape(t){return this.strokeTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},fillTriangle:function fillTriangle(t,i,r,o,a,l){return this.commandBuffer.push(h.FILL_TRIANGLE,t,i,r,o,a,l),this},strokeTriangle:function strokeTriangle(t,i,r,o,a,l){return this.commandBuffer.push(h.STROKE_TRIANGLE,t,i,r,o,a,l),this},strokeLineShape:function strokeLineShape(t){return this.lineBetween(t.x1,t.y1,t.x2,t.y2)},lineBetween:function lineBetween(t,i,r,o){return this.beginPath(),this.moveTo(t,i),this.lineTo(r,o),this.strokePath(),this},lineTo:function lineTo(t,i){return this.commandBuffer.push(h.LINE_TO,t,i),this},moveTo:function moveTo(t,i){return this.commandBuffer.push(h.MOVE_TO,t,i),this},strokePoints:function strokePoints(t,i,r,o){void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===o&&(o=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var a=1;a<o;a++)this.lineTo(t[a].x,t[a].y);return i&&this.lineTo(t[0].x,t[0].y),r&&this.closePath(),this.strokePath(),this},fillPoints:function fillPoints(t,i,r,o){void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===o&&(o=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var a=1;a<o;a++)this.lineTo(t[a].x,t[a].y);return i&&this.lineTo(t[0].x,t[0].y),r&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function strokeEllipseShape(t,i){void 0===i&&(i=32);var r=t.getPoints(i);return this.strokePoints(r,!0)},strokeEllipse:function strokeEllipse(t,i,r,o,a){void 0===a&&(a=32);var h=new y(t,i,r,o).getPoints(a);return this.strokePoints(h,!0)},fillEllipseShape:function fillEllipseShape(t,i){void 0===i&&(i=32);var r=t.getPoints(i);return this.fillPoints(r,!0)},fillEllipse:function fillEllipse(t,i,r,o,a){void 0===a&&(a=32);var h=new y(t,i,r,o).getPoints(a);return this.fillPoints(h,!0)},arc:function arc(t,i,r,o,a,l,u){return void 0===l&&(l=!1),void 0===u&&(u=0),this.commandBuffer.push(h.ARC,t,i,r,o,a,l,u),this},slice:function slice(t,i,r,o,a,l,u){return void 0===l&&(l=!1),void 0===u&&(u=0),this.commandBuffer.push(h.BEGIN_PATH),this.commandBuffer.push(h.MOVE_TO,t,i),this.commandBuffer.push(h.ARC,t,i,r,o,a,l,u),this.commandBuffer.push(h.CLOSE_PATH),this},save:function save(){return this.commandBuffer.push(h.SAVE),this},restore:function restore(){return this.commandBuffer.push(h.RESTORE),this},translateCanvas:function translateCanvas(t,i){return this.commandBuffer.push(h.TRANSLATE,t,i),this},scaleCanvas:function scaleCanvas(t,i){return this.commandBuffer.push(h.SCALE,t,i),this},rotateCanvas:function rotateCanvas(t){return this.commandBuffer.push(h.ROTATE,t),this},clear:function clear(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function generateTexture(t,i,r){var o,a,h=this.scene.sys,l=h.game.renderer;if(void 0===i&&(i=h.scale.width),void 0===r&&(r=h.scale.height),A.TargetCamera.setScene(this.scene),A.TargetCamera.setViewport(0,0,i,r),A.TargetCamera.scrollX=this.x,A.TargetCamera.scrollY=this.y,"string"==typeof t)if(h.textures.exists(t)){var u=(o=h.textures.get(t)).getSourceImage();u instanceof HTMLCanvasElement&&(a=u.getContext("2d"))}else a=(o=h.textures.createCanvas(t,i,r)).getSourceImage().getContext("2d");else t instanceof HTMLCanvasElement&&(a=t.getContext("2d"));return a&&(this.renderCanvas(l,this,A.TargetCamera,null,a,!1),o&&o.refresh()),this},preDestroy:function preDestroy(){this.commandBuffer=[]}});A.TargetCamera=new o,t.exports=A},function(t,i){t.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(t,i,r){var o=r(4);t.exports=function CircumferencePoint(t,i,r){void 0===r&&(r=new o);var a=t.width/2,h=t.height/2;return r.x=t.x+a*Math.cos(i),r.y=t.y+h*Math.sin(i),r}},function(t,i,r){var o=r(35),a=r(0),h=r(11),l=r(176),u=r(101),c=r(9),d=r(75),p=r(110),g=r(1071),v=r(20),m=r(79),y=new a({Extends:p,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.Mask,h.Pipeline,h.Visible,c,g],initialize:function Layer(t,i){p.call(this,t),c.call(this),this.scene=t,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=t.sys,this.events=t.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(o.SKIP_CHECK),i&&this.add(i),t.sys.queueDepthSort()},setActive:function setActive(t){return this.active=t,this},setName:function setName(t){return this.name=t,this},setState:function setState(t){return this.state=t,this},setDataEnabled:function setDataEnabled(){return this.data||(this.data=new u(this)),this},setData:function setData(t,i){return this.data||(this.data=new u(this)),this.data.set(t,i),this},incData:function incData(t,i){return this.data||(this.data=new u(this)),this.data.inc(t,i),this},toggleData:function toggleData(t){return this.data||(this.data=new u(this)),this.data.toggle(t),this},getData:function getData(t){return this.data||(this.data=new u(this)),this.data.get(t)},setInteractive:function setInteractive(){return this},disableInteractive:function disableInteractive(){return this},removeInteractive:function removeInteractive(){return this},addedToScene:function addedToScene(){},removedFromScene:function removedFromScene(){},update:function update(){},toJSON:function toJSON(){return l(this)},willRender:function willRender(t){return!(15!==this.renderFlags||0===this.list.length||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function getIndexList(){for(var t=this,i=this.parentContainer,r=[];i&&(r.unshift(i.getIndex(t)),t=i,i.parentContainer);)i=i.parentContainer;return r.unshift(this.displayList.getIndex(t)),r},addChildCallback:function addChildCallback(t){t.displayList&&t.displayList!==this&&t.removeFromDisplayList(),t.displayList||(this.queueDepthSort(),t.displayList=this,t.emit(d.ADDED_TO_SCENE,t,this.scene),this.events.emit(v.ADDED_TO_SCENE,t,this.scene))},removeChildCallback:function removeChildCallback(t){this.queueDepthSort(),t.displayList=null,t.emit(d.REMOVED_FROM_SCENE,t,this.scene),this.events.emit(v.REMOVED_FROM_SCENE,t,this.scene)},queueDepthSort:function queueDepthSort(){this.sortChildrenFlag=!0},depthSort:function depthSort(){this.sortChildrenFlag&&(m(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function sortByDepth(t,i){return t._depth-i._depth},getChildren:function getChildren(){return this.list},destroy:function destroy(){if(this.scene&&!this.ignoreDestroy){this.emit(d.DESTROY,this);for(var t=this.list.length;t--;)this.list[t].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});t.exports=y},function(t,i,r){var o=r(0),a=r(11),h=r(15),l=r(450),u=r(110),c=r(452),d=r(1075),p=new o({Extends:h,Mixins:[a.Depth,a.Mask,a.Pipeline,a.Transform,a.Visible,d],initialize:function ParticleEmitterManager(t,i,r,o){if(h.call(this,t,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],null===r||"object"!==_typeof(r)&&!Array.isArray(r)||(o=r,r=null),this.setTexture(i,r),this.initPipeline(),this.emitters=new u(this),this.wells=new u(this),o){Array.isArray(o)||(o=[o]);for(var a=0;a<o.length;a++)this.createEmitter(o[a])}},addedToScene:function addedToScene(){this.scene.sys.updateList.add(this)},removedFromScene:function removedFromScene(){this.scene.sys.updateList.remove(this)},setTexture:function setTexture(t,i){return this.texture=this.scene.sys.textures.get(t),this.setFrame(i)},setFrame:function setFrame(t){this.frame=this.texture.get(t);var i=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),r=[];return i.forEach((function(t){r.push(t.name)})),this.frameNames=r,this.defaultFrame=this.frame,this},setEmitterFrames:function setEmitterFrames(t,i){Array.isArray(t)||(t=[t]);var r=i.frames;r.length=0;for(var o=0;o<t.length;o++){var a=t[o];-1!==this.frameNames.indexOf(a)&&r.push(this.texture.get(a))}return r.length>0?i.defaultFrame=r[0]:i.defaultFrame=this.defaultFrame,this},addEmitter:function addEmitter(t){return this.emitters.add(t)},createEmitter:function createEmitter(t){return this.addEmitter(new c(this,t))},removeEmitter:function removeEmitter(t){return this.emitters.remove(t,!0)},addGravityWell:function addGravityWell(t){return this.wells.add(t)},createGravityWell:function createGravityWell(t){return this.addGravityWell(new l(t))},emitParticle:function emitParticle(t,i,r){for(var o=this.emitters.list,a=0;a<o.length;a++){var h=o[a];h.active&&h.emitParticle(t,i,r)}return this},emitParticleAt:function emitParticleAt(t,i,r){return this.emitParticle(r,t,i)},pause:function pause(){return this.active=!1,this},resume:function resume(){return this.active=!0,this},getProcessors:function getProcessors(){return this.wells.getAll("active",!0)},preUpdate:function preUpdate(t,i){i*=this.timeScale;for(var r=this.emitters.list,o=0;o<r.length;o++){var a=r[o];a.active&&a.preUpdate(t,i)}},setAlpha:function setAlpha(){},setScrollFactor:function setScrollFactor(){},setBlendMode:function setBlendMode(){}});t.exports=p},function(t,i,r){var o=r(35),a=r(133),h=r(31),l=r(0),u=r(11),c=r(33),d=r(109),p=r(15),g=r(1),v=r(92),m=r(1079),y=r(141),T=r(12),S=r(222),w=new l({Extends:p,Mixins:[u.Alpha,u.BlendMode,u.ComputedSize,u.Crop,u.Depth,u.Flip,u.GetBounds,u.Mask,u.Origin,u.Pipeline,u.ScrollFactor,u.Tint,u.Transform,u.Visible,m],initialize:function RenderTexture(t,i,r,o,l,u,d){void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=32),void 0===l&&(l=32),p.call(this,t,"RenderTexture"),this.renderer=t.sys.renderer,this.textureManager=t.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,void 0===u?(this.canvas=h.create2D(this,o,l),this.texture=t.sys.textures.addCanvas(S(),this.canvas),this.frame=this.texture.get()):(this.texture=t.sys.textures.get(u),this.frame=this.texture.get(d),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new a(0,0,o,l),this.renderTarget=null;var m=this.renderer;m?m.type===c.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new y(m,o,l,1,0,!1)):m.type===c.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=g,this.camera.setScene(t),this.setPosition(i,r),void 0===u&&this.setSize(o,l),this.setOrigin(0,0),this.initPipeline(v.SINGLE_PIPELINE)},setSize:function setSize(t,i){return this.resize(t,i)},resize:function resize(t,i){void 0===i&&(i=t);var r=this.frame;if(t!==this.width||i!==this.height){if("__BASE"===r.name){this.canvas.width=t,this.canvas.height=i,this.texture.width=t,this.texture.height=i;var o=this.renderTarget;o&&(o.resize(t,i),r.glTexture=o.texture,r.source.isRenderTexture=!0,r.source.isGLTexture=!0,r.source.glTexture=o.texture),this.camera.setSize(t,i),r.source.width=t,r.source.height=i,r.setSize(t,i),this.width=t,this.height=i}}else{var a=this.texture.getSourceImage();r.cutX+t>a.width&&(t=a.width-r.cutX),r.cutY+i>a.height&&(i=a.height-r.cutY),r.setSize(t,i,r.cutX,r.cutY)}this.updateDisplayOrigin();var h=this.input;return h&&!h.customHitArea&&(h.hitArea.width=t,h.hitArea.height=i),this},setGlobalTint:function setGlobalTint(t){return this.globalTint=t,this},setGlobalAlpha:function setGlobalAlpha(t){return this.globalAlpha=t,this},saveTexture:function saveTexture(t){return this.textureManager.renameTexture(this.texture.key,t),this._saved=!0,this.texture},fill:function fill(t,i,r,o,a,h){var l=this.frame,u=this.camera,c=this.renderer;void 0===i&&(i=1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=l.cutWidth),void 0===h&&(h=l.cutHeight);var d=(t>>16&255)/255,p=(t>>8&255)/255,g=(255&t)/255,v=this.renderTarget;if(u.preRender(),v){v.bind(!0);var m=this.pipeline;m.manager.set(m);var y=v.width,S=v.height,w=c.width/y,b=c.height/S;m.drawFillRect(r*w,o*b,a*w,h*b,T.getTintFromFloats(g,p,d,1),i),v.unbind(!0)}else{var C=this.context;c.setContext(C),C.fillStyle="rgba("+d+","+p+","+g+","+i+")",C.fillRect(r+l.cutX,o+l.cutY,a,h),c.setContext()}return this.dirty=!0,this},clear:function clear(){if(this.dirty){var t=this.renderTarget;if(t)t.clear();else{var i=this.context;i.save(),i.setTransform(1,0,0,1,0,0),i.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),i.restore()}this.dirty=!1}return this},erase:function erase(t,i,r){return this._eraseMode=!0,this.draw(t,i,r,1,16777215),this._eraseMode=!1,this},draw:function draw(t,i,r,o,a){return this.beginDraw(),this.batchDraw(t,i,r,o,a),this.endDraw(),this},drawFrame:function drawFrame(t,i,r,o,a,h){return this.beginDraw(),this.batchDrawFrame(t,i,r,o,a,h),this.endDraw(),this},beginDraw:function beginDraw(){var t=this.camera,i=this.renderer,r=this.renderTarget;return t.preRender(),r?i.beginCapture(r.width,r.height):i.setContext(this.context),this},batchDraw:function batchDraw(t,i,r,o,a){return void 0===o&&(o=this.globalAlpha),a=void 0===a?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(a>>16)+(65280&a)+((255&a)<<16),Array.isArray(t)||(t=[t]),this.batchList(t,i,r,o,a),this},batchDrawFrame:function batchDrawFrame(t,i,r,o,a,h){void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=this.globalAlpha),h=void 0===h?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(h>>16)+(65280&h)+((255&h)<<16);var l=this.textureManager.getFrame(t,i);return l&&(this.renderTarget?this.pipeline.batchTextureFrame(l,r,o,h,a,this.camera.matrix,null):this.batchTextureFrame(l,r+this.frame.cutX,o+this.frame.cutY,a,h)),this},endDraw:function endDraw(t){void 0===t&&(t=this._eraseMode);var i=this.renderer,r=this.renderTarget;if(r){var o=i.endCapture();i.pipelines.setUtility().blitFrame(o,r,1,!1,!1,t),i.resetScissor(),i.resetViewport()}else i.setContext();return this.dirty=!0,this},batchList:function batchList(t,i,r,o,a){for(var h=0;h<t.length;h++){var l=t[h];l&&l!==this&&(l.renderWebGL||l.renderCanvas?this.drawGameObject(l,i,r):l.isParent||l.list?this.batchGroup(l.getChildren(),i,r):"string"==typeof l?this.batchTextureFrameKey(l,null,i,r,o,a):l instanceof d?this.batchTextureFrame(l,i,r,o,a):Array.isArray(l)&&this.batchList(l,i,r,o,a))}},batchGroup:function batchGroup(t,i,r){void 0===i&&(i=0),void 0===r&&(r=0),i+=this.frame.cutX,r+=this.frame.cutY;for(var o=0;o<t.length;o++){var a=t[o];if(a.willRender(this.camera)){var h=a.x+i,l=a.y+r;this.drawGameObject(a,h,l)}}},batchGameObjectWebGL:function batchGameObjectWebGL(t,i,r){void 0===i&&(i=t.x),void 0===r&&(r=t.y);var o=t.x,a=t.y;t.setPosition(i+this.frame.cutX,r+this.frame.cutY),t.renderDirect?t.renderDirect(this.renderer,t,this.camera):t.renderWebGL(this.renderer,t,this.camera),t.setPosition(o,a)},batchGameObjectCanvas:function batchGameObjectCanvas(t,i,r){void 0===i&&(i=t.x),void 0===r&&(r=t.y);var a=t.x,h=t.y;if(this._eraseMode){var l=t.blendMode;t.blendMode=o.ERASE}t.setPosition(i+this.frame.cutX,r+this.frame.cutY),t.renderCanvas(this.renderer,t,this.camera,null),t.setPosition(a,h),this._eraseMode&&(t.blendMode=l)},batchTextureFrameKey:function batchTextureFrameKey(t,i,r,o,a,h){var l=this.textureManager.getFrame(t,i);l&&this.batchTextureFrame(l,r,o,a,h)},batchTextureFrame:function batchTextureFrame(t,i,r,o,a){if(void 0===i&&(i=0),void 0===r&&(r=0),i+=this.frame.cutX,r+=this.frame.cutY,this.renderTarget)this.pipeline.batchTextureFrame(t,i,r,a,o,this.camera.matrix,null);else{var h=this.context,l=t.canvasData,u=t.source.image,c=this.camera.matrix;h.save(),h.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",h.globalAlpha=o,c.setToContext(h),h.drawImage(u,l.x,l.y,l.width,l.height,i,r,l.width,l.height),h.restore()}},snapshotArea:function snapshotArea(t,i,r,o,a,h,l){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,a,!1,t,i,r,o,h,l):this.renderer.snapshotCanvas(this.canvas,a,!1,t,i,r,o,h,l),this},snapshot:function snapshot(t,i,r){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,t,!1,0,0,this.width,this.height,i,r):this.renderer.snapshotCanvas(this.canvas,t,!1,0,0,this.width,this.height,i,r),this},snapshotPixel:function snapshotPixel(t,i,r){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,r,!0,t,i):this.renderer.snapshotCanvas(this.canvas,r,!0,t,i),this},preDestroy:function preDestroy(){this._saved||(h.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});t.exports=w},function(t,i){t.exports=function UUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var i=16*Math.random()|0;return("x"===t?i:3&i|8).toString(16)}))}},function(t,i,r){var o=r(164),a=r(0),h=r(11),l=r(15),u=r(92),c=r(1085),d=r(3),p=new a({Extends:l,Mixins:[h.AlphaSingle,h.BlendMode,h.Depth,h.Flip,h.Mask,h.Pipeline,h.Size,h.Texture,h.Transform,h.Visible,h.ScrollFactor,c],initialize:function Rope(t,i,r,a,h,c,p,g,v){void 0===a&&(a="__DEFAULT"),void 0===c&&(c=2),void 0===p&&(p=!0),l.call(this,t,"Rope"),this.anims=new o(this),this.points=c,this.vertices,this.uv,this.colors,this.alphas,this.tintFill="__DEFAULT"===a,this.dirty=!1,this.horizontal=p,this._flipX=!1,this._flipY=!1,this._perp=new d,this.debugCallback=null,this.debugGraphic=null,this.setTexture(a,h),this.setPosition(i,r),this.setSizeToFrame(),this.initPipeline(u.ROPE_PIPELINE),Array.isArray(c)&&this.resizeArrays(c.length),this.setPoints(c,g,v),this.updateVertices()},addedToScene:function addedToScene(){this.scene.sys.updateList.add(this)},removedFromScene:function removedFromScene(){this.scene.sys.updateList.remove(this)},preUpdate:function preUpdate(t,i){var r=this.anims.currentFrame;this.anims.update(t,i),this.anims.currentFrame!==r&&(this.updateUVs(),this.updateVertices())},play:function play(t,i,r){return this.anims.play(t,i,r),this},setDirty:function setDirty(){return this.dirty=!0,this},setHorizontal:function setHorizontal(t,i,r){return void 0===t&&(t=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(t,i,r))},setVertical:function setVertical(t,i,r){return void 0===t&&(t=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(t,i,r)):this},setTintFill:function setTintFill(t){return void 0===t&&(t=!1),this.tintFill=t,this},setAlphas:function setAlphas(t,i){var r=this.points.length;if(r<1)return this;var o,a=this.alphas;void 0===t?t=[1]:Array.isArray(t)||void 0!==i||(t=[t]);var h=0;if(void 0!==i)for(o=0;o<r;o++)a[h=2*o]=t,a[h+1]=i;else if(t.length===r)for(o=0;o<r;o++)a[h=2*o]=t[o],a[h+1]=t[o];else{var l=t[0];for(o=0;o<r;o++)h=2*o,t.length>h&&(l=t[h]),a[h]=l,t.length>h+1&&(l=t[h+1]),a[h+1]=l}return this},setColors:function setColors(t){var i=this.points.length;if(i<1)return this;var r,o=this.colors;void 0===t?t=[16777215]:Array.isArray(t)||(t=[t]);var a=0;if(t.length===i)for(r=0;r<i;r++)o[a=2*r]=t[r],o[a+1]=t[r];else{var h=t[0];for(r=0;r<i;r++)a=2*r,t.length>a&&(h=t[a]),o[a]=h,t.length>a+1&&(h=t[a+1]),o[a+1]=h}return this},setPoints:function setPoints(t,i,r){if(void 0===t&&(t=2),"number"==typeof t){var o,a,h,l=t;if(l<2&&(l=2),t=[],this.horizontal)for(h=-this.frame.halfWidth,a=this.frame.width/(l-1),o=0;o<l;o++)t.push({x:h+o*a,y:0});else for(h=-this.frame.halfHeight,a=this.frame.height/(l-1),o=0;o<l;o++)t.push({x:0,y:h+o*a})}var u=t.length,c=this.points.length;return u<1?(console.warn("Rope: Not enough points given"),this):(1===u&&(t.unshift({x:0,y:0}),u++),c!==u&&this.resizeArrays(u),this.points=t,this.updateUVs(),null!=i&&this.setColors(i),null!=r&&this.setAlphas(r),this)},updateUVs:function updateUVs(){for(var t=this.uv,i=this.points.length,r=this.frame.u0,o=this.frame.v0,a=this.frame.u1,h=this.frame.v1,l=(a-r)/(i-1),u=(h-o)/(i-1),c=0;c<i;c++){var d,p,g,v,m=4*c;this.horizontal?(this._flipX?(d=a-c*l,g=a-c*l):(d=r+c*l,g=r+c*l),this._flipY?(p=h,v=o):(p=o,v=h)):(this._flipX?(d=r,g=a):(d=a,g=r),this._flipY?(p=h-c*u,v=h-c*u):(p=o+c*u,v=o+c*u)),t[m+0]=d,t[m+1]=p,t[m+2]=g,t[m+3]=v}return this},resizeArrays:function resizeArrays(t){var i=this.colors,r=this.alphas;this.vertices=new Float32Array(4*t),this.uv=new Float32Array(4*t),i=new Uint32Array(2*t),r=new Float32Array(2*t);for(var o=0;o<2*t;o++)i[o]=16777215,r[o]=1;return this.colors=i,this.alphas=r,this.dirty=!0,this},updateVertices:function updateVertices(){var t=this._perp,i=this.points,r=this.vertices,o=i.length;if(this.dirty=!1,!(o<1)){for(var a,h=i[0],l=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,u=0;u<o;u++){var c=i[u],d=4*u;a=u<o-1?i[u+1]:c,t.x=a.y-h.y,t.y=-(a.x-h.x);var p=t.length();t.x/=p,t.y/=p,t.x*=l,t.y*=l,r[d]=c.x+t.x,r[d+1]=c.y+t.y,r[d+2]=c.x-t.x,r[d+3]=c.y-t.y,h=c}return this}},setDebug:function setDebug(t,i){return this.debugGraphic=t,this.debugCallback=t||i?i||this.renderDebugVerts:null,this},renderDebugVerts:function renderDebugVerts(t,i,r){var o=t.debugGraphic,a=r[0],h=r[1],l=r[2],u=r[3];o.lineBetween(a,h,l,u);for(var c=4;c<i;c+=4){var d=r[c+0],p=r[c+1],g=r[c+2],v=r[c+3];o.lineBetween(a,h,d,p),o.lineBetween(l,u,g,v),o.lineBetween(l,u,d,p),o.lineBetween(d,p,g,v),a=d,h=p,l=g,u=v}},preDestroy:function preDestroy(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function get(){return this._flipX},set:function set(t){return this._flipX=t,this.updateUVs()}},flipY:{get:function get(){return this._flipY},set:function set(t){return this._flipY=t,this.updateUVs()}}});t.exports=p},function(t,i,r){var o=r(142),a=r(31),h=r(0),l=r(11),u=r(22),c=r(15),d=r(458),p=r(6),g=r(202),v=r(1088),m=r(459),y=new h({Extends:c,Mixins:[l.Alpha,l.BlendMode,l.ComputedSize,l.Crop,l.Depth,l.Flip,l.GetBounds,l.Mask,l.Origin,l.Pipeline,l.ScrollFactor,l.Tint,l.Transform,l.Visible,v],initialize:function Text(t,i,r,o,h){void 0===i&&(i=0),void 0===r&&(r=0),c.call(this,t,"Text"),this.renderer=t.sys.renderer,this.setPosition(i,r),this.setOrigin(0,0),this.initPipeline(),this.canvas=a.create(this),this.context=this.canvas.getContext("2d"),this.style=new m(this,h),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,0===this.style.resolution&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(o),h&&h.padding&&this.setPadding(h.padding),h&&h.lineSpacing&&this.setLineSpacing(h.lineSpacing),t.sys.game.events.on(u.CONTEXT_RESTORED,(function(){this.dirty=!0}),this)},initRTL:function initRTL(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",o(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function runWordWrap(t){var i=this.style;if(i.wordWrapCallback){var r=i.wordWrapCallback.call(i.wordWrapCallbackScope,t,this);return Array.isArray(r)&&(r=r.join("\n")),r}return i.wordWrapWidth?i.wordWrapUseAdvanced?this.advancedWordWrap(t,this.context,this.style.wordWrapWidth):this.basicWordWrap(t,this.context,this.style.wordWrapWidth):t},advancedWordWrap:function advancedWordWrap(t,i,r){for(var o="",a=t.replace(/ +/gi," ").split(this.splitRegExp),h=a.length,l=0;l<h;l++){var u=a[l],c="";if(u=u.replace(/^ *|\s*$/gi,""),i.measureText(u).width<r)o+=u+"\n";else{for(var d=r,p=u.split(" "),g=0;g<p.length;g++){var v=p[g],m=v+" ",y=i.measureText(m).width;if(y>d){if(0===g){for(var T=m;T.length&&(T=T.slice(0,-1),!((y=i.measureText(T).width)<=d)););if(!T.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var S=v.substr(T.length);p[g]=S,c+=T}var w=p[g].length?g:g+1,b=p.slice(w).join(" ").replace(/[ \n]*$/gi,"");a[l+1]=b+" "+(a[l+1]||""),h=a.length;break}c+=m,d-=y}o+=c.replace(/[ \n]*$/gi,"")+"\n"}}return o=o.replace(/[\s|\n]*$/gi,"")},basicWordWrap:function basicWordWrap(t,i,r){for(var o="",a=t.split(this.splitRegExp),h=a.length-1,l=i.measureText(" ").width,u=0;u<=h;u++){for(var c=r,d=a[u].split(" "),p=d.length-1,g=0;g<=p;g++){var v=d[g],m=i.measureText(v).width,y=m;g<p&&(y+=l),y>c&&g>0&&(o+="\n",c=r),o+=v,g<p?(o+=" ",c-=y):c-=m}u<h&&(o+="\n")}return o},getWrappedText:function getWrappedText(t){return void 0===t&&(t=this._text),this.style.syncFont(this.canvas,this.context),this.runWordWrap(t).split(this.splitRegExp)},setText:function setText(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this._text&&(this._text=t.toString(),this.updateText()),this},setStyle:function setStyle(t){return this.style.setStyle(t)},setFont:function setFont(t){return this.style.setFont(t)},setFontFamily:function setFontFamily(t){return this.style.setFontFamily(t)},setFontSize:function setFontSize(t){return this.style.setFontSize(t)},setFontStyle:function setFontStyle(t){return this.style.setFontStyle(t)},setFixedSize:function setFixedSize(t,i){return this.style.setFixedSize(t,i)},setBackgroundColor:function setBackgroundColor(t){return this.style.setBackgroundColor(t)},setFill:function setFill(t){return this.style.setFill(t)},setColor:function setColor(t){return this.style.setColor(t)},setStroke:function setStroke(t,i){return this.style.setStroke(t,i)},setShadow:function setShadow(t,i,r,o,a,h){return this.style.setShadow(t,i,r,o,a,h)},setShadowOffset:function setShadowOffset(t,i){return this.style.setShadowOffset(t,i)},setShadowColor:function setShadowColor(t){return this.style.setShadowColor(t)},setShadowBlur:function setShadowBlur(t){return this.style.setShadowBlur(t)},setShadowStroke:function setShadowStroke(t){return this.style.setShadowStroke(t)},setShadowFill:function setShadowFill(t){return this.style.setShadowFill(t)},setWordWrapWidth:function setWordWrapWidth(t,i){return this.style.setWordWrapWidth(t,i)},setWordWrapCallback:function setWordWrapCallback(t,i){return this.style.setWordWrapCallback(t,i)},setAlign:function setAlign(t){return this.style.setAlign(t)},setResolution:function setResolution(t){return this.style.setResolution(t)},setLineSpacing:function setLineSpacing(t){return this.lineSpacing=t,this.updateText()},setPadding:function setPadding(t,i,r,o){if("object"===_typeof(t)){var a=t,h=p(a,"x",null);null!==h?(t=h,r=h):(t=p(a,"left",0),r=p(a,"right",t));var l=p(a,"y",null);null!==l?(i=l,o=l):(i=p(a,"top",0),o=p(a,"bottom",i))}else void 0===t&&(t=0),void 0===i&&(i=t),void 0===r&&(r=t),void 0===o&&(o=i);return this.padding.left=t,this.padding.top=i,this.padding.right=r,this.padding.bottom=o,this.updateText()},setMaxLines:function setMaxLines(t){return this.style.setMaxLines(t)},updateText:function updateText(){var t=this.canvas,i=this.context,r=this.style,o=r.resolution,a=r.metrics;r.syncFont(t,i);var h=this._text;(r.wordWrapWidth||r.wordWrapCallback)&&(h=this.runWordWrap(this._text));var l,u=h.split(this.splitRegExp),c=d(this,a,u),p=this.padding;0===r.fixedWidth?(this.width=c.width+p.left+p.right,l=c.width):(this.width=r.fixedWidth,(l=this.width-p.left-p.right)<c.width&&(l=c.width)),0===r.fixedHeight?this.height=c.height+p.top+p.bottom:this.height=r.fixedHeight;var g,v,m=this.width,y=this.height;this.updateDisplayOrigin(),m*=o,y*=o,m=Math.max(m,1),y=Math.max(y,1),t.width!==m||t.height!==y?(t.width=m,t.height=y,this.frame.setSize(m,y),r.syncFont(t,i)):i.clearRect(0,0,m,y),i.save(),i.scale(o,o),r.backgroundColor&&(i.fillStyle=r.backgroundColor,i.fillRect(0,0,m,y)),r.syncStyle(t,i),i.textBaseline="alphabetic",i.translate(p.left,p.top);for(var T=0;T<c.lines;T++){if(g=r.strokeThickness/2,v=r.strokeThickness/2+T*c.lineHeight+a.ascent,T>0&&(v+=c.lineSpacing*T),r.rtl)g=m-g;else if("right"===r.align)g+=l-c.lineWidths[T];else if("center"===r.align)g+=(l-c.lineWidths[T])/2;else if("justify"===r.align&&c.lineWidths[T]/c.width>=.85){var S=c.width-c.lineWidths[T],w=i.measureText(" ").width,b=u[T].trim(),C=b.split(" ");S+=(u[T].length-b.length)*w;for(var A=Math.floor(S/w),E=0;A>0;)C[E]+=" ",E=(E+1)%(C.length-1||1),--A;u[T]=C.join(" ")}this.autoRound&&(g=Math.round(g),v=Math.round(v)),r.strokeThickness&&(this.style.syncShadow(i,r.shadowStroke),i.strokeText(u[T],g,v)),r.color&&(this.style.syncShadow(i,r.shadowFill),i.fillText(u[T],g,v))}i.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(t,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var M=this.input;return M&&!M.customHitArea&&(M.hitArea.width=this.width,M.hitArea.height=this.height),this},getTextMetrics:function getTextMetrics(){return this.style.getTextMetrics()},text:{get:function get(){return this._text},set:function set(t){this.setText(t)}},toJSON:function toJSON(){var t=l.ToJSON(this),i={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=i,t},preDestroy:function preDestroy(){this.style.rtl&&g(this.canvas),a.remove(this.canvas),this.texture.destroy()}});t.exports=y},function(t,i,r){var o=r(31),a=r(0),h=r(11),l=r(22),u=r(15),c=r(361),d=r(192),p=r(1091),g=r(3),v=new a({Extends:u,Mixins:[h.Alpha,h.BlendMode,h.ComputedSize,h.Crop,h.Depth,h.Flip,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.ScrollFactor,h.Tint,h.Transform,h.Visible,p],initialize:function TileSprite(t,i,r,a,h,d,p){var v=t.sys.renderer;u.call(this,t,"TileSprite");var m=t.sys.textures.get(d),y=m.get(p);a&&h?(a=Math.floor(a),h=Math.floor(h)):(a=y.width,h=y.height),this._tilePosition=new g,this._tileScale=new g(1,1),this.dirty=!1,this.renderer=v,this.canvas=o.create(this,a,h),this.context=this.canvas.getContext("2d"),this.displayTexture=m,this.displayFrame=y,this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=c(y.width),this.potHeight=c(y.height),this.fillCanvas=o.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(i,r),this.setSize(a,h),this.setFrame(p),this.setOriginFromFrame(),this.initPipeline(),t.sys.game.events.on(l.CONTEXT_RESTORED,(function(t){if(t){var i=t.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=t.createTexture2D(0,i.LINEAR,i.LINEAR,i.REPEAT,i.REPEAT,i.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}}),this)},setTexture:function setTexture(t,i){return this.displayTexture=this.scene.sys.textures.get(t),this.setFrame(i)},setFrame:function setFrame(t){var i=this.displayTexture.get(t);return this.potWidth=c(i.width),this.potHeight=c(i.height),this.canvas.width=0,i.cutWidth&&i.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this.displayFrame=i,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function setTilePosition(t,i){return void 0!==t&&(this.tilePositionX=t),void 0!==i&&(this.tilePositionY=i),this},setTileScale:function setTileScale(t,i){return void 0===t&&(t=this.tileScaleX),void 0===i&&(i=t),this.tileScaleX=t,this.tileScaleY=i,this},updateTileTexture:function updateTileTexture(){if(this.dirty&&this.renderer){var t=this.displayFrame;if(t.source.isRenderTexture||t.source.isGLTexture)return console.warn("TileSprites can only use Image or Canvas based textures"),void(this.dirty=!1);var i=this.fillContext,r=this.fillCanvas,o=this.potWidth,a=this.potHeight;this.renderer&&this.renderer.gl||(o=t.cutWidth,a=t.cutHeight),i.clearRect(0,0,o,a),r.width=o,r.height=a,i.drawImage(t.source.image,t.cutX,t.cutY,t.cutWidth,t.cutHeight,0,0,o,a),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(r,this.fillPattern):this.fillPattern=i.createPattern(r,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function updateCanvas(){var t=this.canvas;if(t.width===this.width&&t.height===this.height||(t.width=this.width,t.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl)this.dirty=!1;else{var i=this.context;this.scene.sys.game.config.antialias||d.disable(i);var r=this._tileScale.x,o=this._tileScale.y,a=this._tilePosition.x,h=this._tilePosition.y;i.clearRect(0,0,this.width,this.height),i.save(),i.scale(r,o),i.translate(-a,-h),i.fillStyle=this.fillPattern,i.fillRect(a,h,this.width/r,this.height/o),i.restore(),this.dirty=!1}},preDestroy:function preDestroy(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),o.remove(this.canvas),o.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function get(){return this._tilePosition.x},set:function set(t){this._tilePosition.x=t,this.dirty=!0}},tilePositionY:{get:function get(){return this._tilePosition.y},set:function set(t){this._tilePosition.y=t,this.dirty=!0}},tileScaleX:{get:function get(){return this._tileScale.x},set:function set(t){this._tileScale.x=t,this.dirty=!0}},tileScaleY:{get:function get(){return this._tileScale.y},set:function set(t){this._tileScale.y=t,this.dirty=!0}}});t.exports=v},function(t,i,r){var o=r(0),a=r(18),h=r(11),l=r(75),u=r(22),c=r(51),d=r(15),p=r(70),g=r(222),v=r(1094),m=r(14),y=new o({Extends:d,Mixins:[h.Alpha,h.BlendMode,h.Depth,h.Flip,h.GetBounds,h.Mask,h.Origin,h.Pipeline,h.ScrollFactor,h.Size,h.TextureCrop,h.Tint,h.Transform,h.Visible,v],initialize:function Video(t,i,r,o){d.call(this,t,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=g(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=m.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(i,r),this.initPipeline(),o&&this.changeSource(o,!1);var a=t.sys.game.events;a.on(u.PAUSE,this.globalPause,this),a.on(u.RESUME,this.globalResume,this);var h=t.sys.sound;h&&h.on(p.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function addedToScene(){this.scene.sys.updateList.add(this)},removedFromScene:function removedFromScene(){this.scene.sys.updateList.remove(this)},play:function play(t,i,r){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var o=this.video;if(!o)return console.warn("Video not loaded"),this;void 0===t&&(t=o.loop);var a=this.scene.sys.sound;a&&a.mute&&this.setMute(!0),isNaN(i)||(this._markerIn=i),!isNaN(r)&&r>i&&(this._markerOut=r),o.loop=t;var h=this._callbacks,l=o.play();return void 0!==l?l.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(o.addEventListener("playing",h.play,!0),o.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),o.addEventListener("ended",h.end,!0),o.addEventListener("timeupdate",h.time,!0),o.addEventListener("seeking",h.seeking,!0),o.addEventListener("seeked",h.seeked,!0),this},changeSource:function changeSource(t,i,r,o,a){void 0===i&&(i=!0),this.video&&this.stop();var h=this.scene.sys.cache.video.get(t);return h?(this.video=h,this._cacheKey=t,this._codePaused=h.paused,this._codeMuted=h.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,h,h.videoWidth,h.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,h.videoWidth,h.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(l.VIDEO_CREATED,this,h.videoWidth,h.videoHeight)):this.updateTexture(),h.currentTime=0,this._lastUpdate=0,i&&this.play(r,o,a)):this.video=null,this},addMarker:function addMarker(t,i,r){return!isNaN(i)&&i>=0&&!isNaN(r)&&(this.markers[t]=[i,r]),this},playMarker:function playMarker(t,i){var r=this.markers[t];return r&&this.play(i,r[0],r[1]),this},removeMarker:function removeMarker(t){return delete this.markers[t],this},snapshot:function snapshot(t,i){return void 0===t&&(t=this.width),void 0===i&&(i=this.height),this.snapshotArea(0,0,this.width,this.height,t,i)},snapshotArea:function snapshotArea(t,i,r,o,a,h){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=this.width),void 0===o&&(o=this.height),void 0===a&&(a=r),void 0===h&&(h=o);var l=this.video,u=this.snapshotTexture;return u?(u.setSize(a,h),l&&u.context.drawImage(l,t,i,r,o,0,0,a,h)):(u=this.scene.sys.textures.createCanvas(g(),a,h),this.snapshotTexture=u,l&&u.context.drawImage(l,t,i,r,o,0,0,a,h)),u.update()},saveSnapshotTexture:function saveSnapshotTexture(t){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,t):this.snapshotTexture=this.scene.sys.textures.createCanvas(t,this.width,this.height),this.snapshotTexture},loadURL:function loadURL(t,i,r){void 0===r&&(r=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var o=document.createElement("video");return o.controls=!1,r&&(o.muted=!0,o.defaultMuted=!0,o.setAttribute("autoplay","autoplay")),o.setAttribute("playsinline","playsinline"),o.setAttribute("preload","auto"),o.addEventListener("error",this._callbacks.error,!0),o.src=t,o.load(),this.video=o,this},loadMediaStream:function loadMediaStream(t,i,r){void 0===r&&(r=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var o=document.createElement("video");o.controls=!1,r&&(o.muted=!0,o.defaultMuted=!0,o.setAttribute("autoplay","autoplay")),o.setAttribute("playsinline","playsinline"),o.setAttribute("preload","auto"),o.addEventListener("error",this._callbacks.error,!0);try{o.srcObject=t}catch(a){o.src=window.URL.createObjectURL(t)}return o.load(),this.video=o,this},playPromiseSuccessHandler:function playPromiseSuccessHandler(){this._codePaused=!1,this.touchLocked=!1,this.emit(l.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function playPromiseErrorHandler(t){this.scene.sys.input.once(c.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(l.VIDEO_ERROR,this,t)},playHandler:function playHandler(){this._codePaused=!1,this.touchLocked=!1,this.emit(l.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function loadErrorHandler(t){this.stop(),this.emit(l.VIDEO_ERROR,this,t)},unlockHandler:function unlockHandler(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(l.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(l.VIDEO_PLAY,this)},completeHandler:function completeHandler(){this.emit(l.VIDEO_COMPLETE,this)},timeUpdateHandler:function timeUpdateHandler(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(l.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function preUpdate(){var t=this.video;if(t){var i=t.currentTime;i!==this._lastUpdate&&(this._lastUpdate=i,this.updateTexture(),i>=this._markerOut&&(t.loop?(t.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=i,this.emit(l.VIDEO_LOOP,this)):(this.emit(l.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function checkVideoProgress(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(l.VIDEO_TIMEOUT,this))},updateTexture:function updateTexture(){var t=this.video,i=t.videoWidth,r=t.videoHeight;if(this.videoTexture){var o=this.videoTextureSource;o.source!==t&&(o.source=t,o.width=i,o.height=r),o.update()}else this.videoTexture=this.scene.sys.textures.create(this._key,t,i,r),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,i,r),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(l.VIDEO_CREATED,this,i,r)},getVideoKey:function getVideoKey(){return this._cacheKey},seekTo:function seekTo(t){var i=this.video;if(i){var r=i.duration;if(r!==1/0&&!isNaN(r)){var o=r*t;this.setCurrentTime(o)}}return this},getCurrentTime:function getCurrentTime(){return this.video?this.video.currentTime:0},setCurrentTime:function setCurrentTime(t){var i=this.video;if(i){if("string"==typeof t){var r=t[0],o=parseFloat(t.substr(1));"+"===r?t=i.currentTime+o:"-"===r&&(t=i.currentTime-o)}i.currentTime=t,this._lastUpdate=t}return this},isSeeking:function isSeeking(){return this._isSeeking},seekingHandler:function seekingHandler(){this._isSeeking=!0,this.emit(l.VIDEO_SEEKING,this)},seekedHandler:function seekedHandler(){this._isSeeking=!1,this.emit(l.VIDEO_SEEKED,this),this.video&&this.updateTexture()},getProgress:function getProgress(){var t=this.video;if(t){var i=t.currentTime,r=t.duration;if(r!==1/0&&!isNaN(r))return i/r}return 0},getDuration:function getDuration(){return this.video?this.video.duration:0},setMute:function setMute(t){void 0===t&&(t=!0),this._codeMuted=t;var i=this.video;return i&&(i.muted=!!this._systemMuted||t),this},isMuted:function isMuted(){return this._codeMuted},globalMute:function globalMute(t,i){this._systemMuted=i;var r=this.video;r&&(r.muted=!!this._codeMuted||i)},globalPause:function globalPause(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function globalResume(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function setPaused(t){void 0===t&&(t=!0);var i=this.video;return this._codePaused=t,i&&(t?i.paused||i.pause():t||i.paused&&!this._systemPaused&&i.play()),this},getVolume:function getVolume(){return this.video?this.video.volume:1},setVolume:function setVolume(t){return void 0===t&&(t=1),this.video&&(this.video.volume=a(t,0,1)),this},getPlaybackRate:function getPlaybackRate(){return this.video?this.video.playbackRate:1},setPlaybackRate:function setPlaybackRate(t){return this.video&&(this.video.playbackRate=t),this},getLoop:function getLoop(){return!!this.video&&this.video.loop},setLoop:function setLoop(t){return void 0===t&&(t=!0),this.video&&(this.video.loop=t),this},isPlaying:function isPlaying(){return!!this.video&&!(this.video.paused||this.video.ended)},isPaused:function isPaused(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function saveTexture(t,i){return void 0===i&&(i=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,t),this._key=t,this.flipY=i,this.videoTextureSource&&this.videoTextureSource.setFlipY(i),this.videoTexture},stop:function stop(){var t=this.video;if(t){var i=this._callbacks;for(var r in i)t.removeEventListener(r,i[r],!0);t.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(l.VIDEO_STOP,this),this},removeVideoElement:function removeVideoElement(){var t=this.video;if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("autoplay"),t.removeAttribute("src"),this.video=null}},preDestroy:function preDestroy(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var t=this.scene.sys.game.events;t.off(u.PAUSE,this.globalPause,this),t.off(u.RESUME,this.globalResume,this);var i=this.scene.sys.sound;i&&i.off(p.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});t.exports=y},function(t,i,r){var o=r(0),a=r(228),h=r(470),l=r(56),u=new o({initialize:function Polygon(t){this.type=l.POLYGON,this.area=0,this.points=[],t&&this.setTo(t)},contains:function contains(t,i){return a(this,t,i)},setTo:function setTo(t){if(this.area=0,this.points=[],"string"==typeof t&&(t=t.split(" ")),!Array.isArray(t))return this;for(var i,r=Number.MAX_VALUE,o=0;o<t.length;o++)i={x:0,y:0},"number"==typeof t[o]||"string"==typeof t[o]?(i.x=parseFloat(t[o]),i.y=parseFloat(t[o+1]),o++):Array.isArray(t[o])?(i.x=t[o][0],i.y=t[o][1]):(i.x=t[o].x,i.y=t[o].y),this.points.push(i),i.y<r&&(r=i.y);return this.calculateArea(r),this},calculateArea:function calculateArea(){if(this.points.length<3)return this.area=0,this.area;for(var t,i,r=0,o=0;o<this.points.length-1;o++)t=this.points[o],r+=((i=this.points[o+1]).x-t.x)*(t.y+i.y);return t=this.points[0],i=this.points[this.points.length-1],r+=(t.x-i.x)*(i.y+t.y),this.area=.5*-r,this.area},getPoints:function getPoints(t,i,r){return h(this,t,i,r)}});t.exports=u},function(t,i){t.exports=function Contains(t,i,r){for(var o=!1,a=-1,h=t.points.length-1;++a<t.points.length;h=a){var l=t.points[a].x,u=t.points[a].y,c=t.points[h].x,d=t.points[h].y;(u<=r&&r<d||d<=r&&r<u)&&i<(c-l)*(r-u)/(d-u)+l&&(o=!o)}return o}},function(t,i,r){var o=r(0),a=r(11),h=r(15),l=r(2),u=r(17),c=r(478),d=r(1176),p=r(25),g=new o({Extends:h,Mixins:[a.ComputedSize,a.Depth,a.GetBounds,a.Mask,a.Origin,a.ScrollFactor,a.Transform,a.Visible,d],initialize:function Shader(t,i,r,o,a,l,u,c){void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=128),void 0===l&&(l=128),h.call(this,t,"Shader"),this.blendMode=-1,this.shader;var d=t.sys.renderer;this.renderer=d,this.gl=d.gl,this.vertexData=new ArrayBuffer(2*Float32Array.BYTES_PER_ELEMENT*6),this.vertexBuffer=d.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new p,this._tempMatrix2=new p,this._tempMatrix3=new p,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=d.width,this._rendererHeight=d.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(r,o),this.setSize(a,l),this.setOrigin(.5,.5),this.setShader(i,u,c)},willRender:function willRender(t){return!!this.renderToTexture||!(h.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},setRenderToTexture:function setRenderToTexture(t,i){if(void 0===i&&(i=!1),!this.renderToTexture){var r=this.width,o=this.height,a=this.renderer;this.glTexture=a.createTextureFromSource(null,r,o,0),this.glTexture.flipY=i,this.framebuffer=a.createFramebuffer(r,o,this.glTexture,!1),this._rendererWidth=r,this._rendererHeight=o,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),t&&(this.texture=this.scene.sys.textures.addGLTexture(t,this.glTexture,r,o))}return this.shader&&(a.pipelines.clear(),this.load(),this.flush(),a.pipelines.rebind()),this},setShader:function setShader(t,i,r){if(void 0===i&&(i=[]),"string"==typeof t){var o=this.scene.sys.cache.shader;if(!o.has(t))return console.warn("Shader missing: "+t),this;this.shader=o.get(t)}else this.shader=t;var a=this.gl,h=this.renderer;this.program&&a.deleteProgram(this.program);var l=h.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);a.uniformMatrix4fv(a.getUniformLocation(l,"uViewMatrix"),!1,this.viewMatrix),a.uniformMatrix4fv(a.getUniformLocation(l,"uProjectionMatrix"),!1,this.projectionMatrix),a.uniform2f(a.getUniformLocation(l,"uResolution"),this.width,this.height),this.program=l;var c=new Date,d={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[c.getFullYear(),c.getMonth(),c.getDate(),60*c.getHours()*60+60*c.getMinutes()+c.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=u(!0,{},this.shader.uniforms,d):this.uniforms=d;for(var p=0;p<4;p++)i[p]&&this.setSampler2D("iChannel"+p,i[p],p,r);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function setPointer(t){return this.pointer=t,this},projOrtho:function projOrtho(t,i,r,o){var a=1/(t-i),h=1/(r-o),l=this.projectionMatrix;l[0]=-2*a,l[5]=-2*h,l[10]=-.001,l[12]=(t+i)*a,l[13]=(o+r)*h,l[14]=-0;var u=this.program,c=this.gl;this.renderer.setProgram(u),c.uniformMatrix4fv(c.getUniformLocation(u,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=i,this._rendererHeight=r},initUniforms:function initUniforms(){var t=this.gl,i=this.renderer.glFuncMap,r=this.program;for(var o in this._textureCount=0,this.uniforms){var a=this.uniforms[o],h=a.type,l=i[h];a.uniformLocation=t.getUniformLocation(r,o),"sampler2D"!==h&&(a.glMatrix=l.matrix,a.glValueLength=l.length,a.glFunc=l.func)}},setSampler2DBuffer:function setSampler2DBuffer(t,i,r,o,a,h){void 0===a&&(a=0),void 0===h&&(h={});var l=this.uniforms[t];return l.value=i,h.width=r,h.height=o,l.textureData=h,this._textureCount=a,this.initSampler2D(l),this},setSampler2D:function setSampler2D(t,i,r,o){void 0===r&&(r=0);var a=this.scene.sys.textures;if(a.exists(i)){var h=a.getFrame(i);if(h.glTexture&&h.glTexture.isRenderTexture)return this.setSampler2DBuffer(t,h.glTexture,h.width,h.height,r,o);var l=this.uniforms[t],u=h.source;l.textureKey=i,l.source=u.image,l.value=h.glTexture,u.isGLTexture&&(o||(o={}),o.width=u.width,o.height=u.height),o&&(l.textureData=o),this._textureCount=r,this.initSampler2D(l)}return this},setUniform:function setUniform(t,i){return c(this.uniforms,t,i),this},getUniform:function getUniform(t){return l(this.uniforms,t,null)},setChannel0:function setChannel0(t,i){return this.setSampler2D("iChannel0",t,0,i)},setChannel1:function setChannel1(t,i){return this.setSampler2D("iChannel1",t,1,i)},setChannel2:function setChannel2(t,i){return this.setSampler2D("iChannel2",t,2,i)},setChannel3:function setChannel3(t,i){return this.setSampler2D("iChannel3",t,3,i)},initSampler2D:function initSampler2D(t){if(t.value){var i=this.gl;i.activeTexture(i.TEXTURE0+this._textureCount),i.bindTexture(i.TEXTURE_2D,t.value);var r=t.textureData;if(r&&!t.value.isRenderTexture){var o=i[l(r,"magFilter","linear").toUpperCase()],a=i[l(r,"minFilter","linear").toUpperCase()],h=i[l(r,"wrapS","repeat").toUpperCase()],u=i[l(r,"wrapT","repeat").toUpperCase()],c=i[l(r,"format","rgba").toUpperCase()];if(r.repeat&&(h=i.REPEAT,u=i.REPEAT),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!!r.flipY),r.width){var d=l(r,"width",512),p=l(r,"height",2),g=l(r,"border",0);i.texImage2D(i.TEXTURE_2D,0,c,d,p,g,c,i.UNSIGNED_BYTE,null)}else i.texImage2D(i.TEXTURE_2D,0,c,i.RGBA,i.UNSIGNED_BYTE,t.source);i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,o),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,a),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,h),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,u)}this.renderer.setProgram(this.program),i.uniform1i(t.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function syncUniforms(){var t,i,r,o,a,h=this.gl,l=this.uniforms,u=0;for(var c in l)r=(t=l[c]).glFunc,i=t.glValueLength,o=t.uniformLocation,null!==(a=t.value)&&(1===i?t.glMatrix?r.call(h,o,t.transpose,a):r.call(h,o,a):2===i?r.call(h,o,a.x,a.y):3===i?r.call(h,o,a.x,a.y,a.z):4===i?r.call(h,o,a.x,a.y,a.z,a.w):"sampler2D"===t.type&&(h.activeTexture(h.TEXTURE0+u),h.bindTexture(h.TEXTURE_2D,a),h.uniform1i(o,u),u++))},load:function load(t){var i=this.gl,r=this.width,o=this.height,a=this.renderer,h=this.program,l=this.viewMatrix;if(!this.renderToTexture){var u=-this._displayOriginX,c=-this._displayOriginY;l[0]=t[0],l[1]=t[1],l[4]=t[2],l[5]=t[3],l[8]=t[4],l[9]=t[5],l[12]=l[0]*u+l[4]*c,l[13]=l[1]*u+l[5]*c}i.useProgram(h),i.uniformMatrix4fv(i.getUniformLocation(h,"uViewMatrix"),!1,l),i.uniform2f(i.getUniformLocation(h,"uResolution"),this.width,this.height);var d=this.uniforms,p=d.resolution;p.value.x=r,p.value.y=o,d.time.value=a.game.loop.getDuration();var g=this.pointer;if(g){var v=d.mouse,m=g.x/r,y=1-g.y/o;v.value.x=m.toFixed(2),v.value.y=y.toFixed(2)}this.syncUniforms()},flush:function flush(){var t=this.width,i=this.height,r=this.program,o=this.gl,a=this.vertexBuffer,h=this.renderer,l=2*Float32Array.BYTES_PER_ELEMENT;this.renderToTexture&&(h.setFramebuffer(this.framebuffer),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT)),o.bindBuffer(o.ARRAY_BUFFER,a);var u=o.getAttribLocation(r,"inPosition");-1!==u&&(o.enableVertexAttribArray(u),o.vertexAttribPointer(u,2,o.FLOAT,!1,l,0));var c=this.vertexViewF32;c[3]=i,c[4]=t,c[5]=i,c[8]=t,c[9]=i,c[10]=t,o.bufferSubData(o.ARRAY_BUFFER,0,this.bytes.subarray(0,6*l)),o.drawArrays(o.TRIANGLES,0,6),this.renderToTexture&&h.setFramebuffer(null,!1)},setAlpha:function setAlpha(){},setBlendMode:function setBlendMode(){},preDestroy:function preDestroy(){var t=this.gl;t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});t.exports=g},function(t,i,r){var o=r(0),a=r(11),h=r(36),l=r(116),u=r(15),c=r(479),d=r(480),p=r(19),g=r(69),v=r(1179),m=r(79),y=r(39),T=r(117),S=new o({Extends:u,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.Mask,a.Pipeline,a.Size,a.Texture,a.Transform,a.Visible,a.ScrollFactor,v],initialize:function Mesh(t,i,r,o,a,h,l,c,d,p,v,m){void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o="__WHITE"),u.call(this,t,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new y,this.modelScale=new y(1,1,1),this.modelRotation=new y,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new g,this.viewPosition=new y,this.viewMatrix=new g,this.projectionMatrix=new g,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var T=t.sys.renderer;this.setPosition(i,r),this.setTexture(o,a),this.setSize(T.width,T.height),this.initPipeline(),this.setPerspective(T.width,T.height),h&&this.addVertices(h,l,c,d,p,v,m)},addedToScene:function addedToScene(){this.scene.sys.updateList.add(this)},removedFromScene:function removedFromScene(){this.scene.sys.updateList.remove(this)},panX:function panX(t){return this.viewPosition.addScale(y.LEFT,t),this.dirtyCache[10]=1,this},panY:function panY(t){return this.viewPosition.y+=y.DOWN.y*t,this.dirtyCache[10]=1,this},panZ:function panZ(t){return this.viewPosition.z+=t,this.dirtyCache[10]=1,this},setPerspective:function setPerspective(t,i,r,o,a){return void 0===r&&(r=45),void 0===o&&(o=.01),void 0===a&&(a=1e3),this.projectionMatrix.perspective(h(r),t/i,o,a),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function setOrtho(t,i,r,o){return void 0===t&&(t=this.scene.sys.renderer.getAspectRatio()),void 0===i&&(i=1),void 0===r&&(r=-1e3),void 0===o&&(o=1e3),this.projectionMatrix.ortho(-t,t,-i,i,r,o),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function clear(){return this.faces.forEach((function(t){t.destroy()})),this.faces=[],this.vertices=[],this},addVerticesFromObj:function addVerticesFromObj(t,i,r,o,a,h,l,u,c){var p=this.scene.sys.cache.obj.get(t);return p&&d(p,this,i,r,o,a,h,l,u,c),this},sortByDepth:function sortByDepth(t,i){return t.depth-i.depth},depthSort:function depthSort(){return m(this.faces,this.sortByDepth),this},addVertex:function addVertex(t,i,r,o,a,h,l){var u=new T(t,i,r,o,a,h,l);return this.vertices.push(u),u},addFace:function addFace(t,i,r){var o=new l(t,i,r);return this.faces.push(o),this.dirtyCache[9]=-1,o},addVertices:function addVertices(t,i,r,o,a,h,l){var u=c(t,i,r,o,a,h,l);return u&&(this.faces=this.faces.concat(u.faces),this.vertices=this.vertices.concat(u.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function getFaceCount(){return this.faces.length},getVertexCount:function getVertexCount(){return this.vertices.length},getFace:function getFace(t){return this.faces[t]},getFaceAt:function getFaceAt(t,i,r){void 0===r&&(r=this.scene.sys.cameras.main);for(var o=p(this,r).calc,a=this.faces,h=[],l=0;l<a.length;l++){var u=a[l];u.contains(t,i,o)&&h.push(u)}return m(h,this.sortByDepth)},setDebug:function setDebug(t,i){return this.debugGraphic=t,this.debugCallback=t||i?i||this.renderDebug:null,this},isDirty:function isDirty(){var t=this.modelPosition,i=this.modelRotation,r=this.modelScale,o=this.dirtyCache,a=t.x,h=t.y,l=t.z,u=i.x,c=i.y,d=i.z,p=r.x,g=r.y,v=r.z,m=this.getFaceCount(),y=o[0],T=o[1],S=o[2],w=o[3],b=o[4],C=o[5],A=o[6],E=o[7],M=o[8],_=o[9];return o[0]=a,o[1]=h,o[2]=l,o[3]=u,o[4]=c,o[5]=d,o[6]=p,o[7]=g,o[8]=v,o[9]=m,y!==a||T!==h||S!==l||w!==u||b!==c||C!==d||A!==p||E!==g||M!==v||_!==m},preUpdate:function preUpdate(){this.totalRendered=this.totalFrame,this.totalFrame=0;var t=this.dirtyCache;if(this.ignoreDirtyCache||t[10]||this.isDirty()){var i=this.width,r=this.height,o=this.viewMatrix,a=this.viewPosition;t[10]&&(o.identity(),o.translate(a),o.invert(),t[10]=0);var h=this.transformMatrix;h.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var l=a.z,u=this.faces,c=0;c<u.length;c++)u[c].transformCoordinatesLocal(h,i,r,l);this.depthSort()}},renderDebug:function renderDebug(t,i){for(var r=t.debugGraphic,o=0;o<i.length;o++){var a=i[o],h=a.vertex1.tx,l=a.vertex1.ty,u=a.vertex2.tx,c=a.vertex2.ty,d=a.vertex3.tx,p=a.vertex3.ty;r.strokeTriangle(h,l,u,c,d,p)}},preDestroy:function preDestroy(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});t.exports=S},function(t,i,r){var o=r(50);t.exports=function CircleToCircle(t,i){return o(t.x,t.y,i.x,i.y)<=t.radius+i.radius}},function(t,i,r){var o=r(4),a=r(233);t.exports=function GetLineToCircle(t,i,r){if(void 0===r&&(r=[]),a(t,i)){var h,l,u=t.x1,c=t.y1,d=t.x2,p=t.y2,g=i.x,v=i.y,m=i.radius,y=d-u,T=p-c,S=u-g,w=c-v,b=y*y+T*T,C=2*(y*S+T*w),A=C*C-4*b*(S*S+w*w-m*m);if(0===A){var E=-C/(2*b);h=u+E*y,l=c+E*T,E>=0&&E<=1&&r.push(new o(h,l))}else if(A>0){var M=(-C-Math.sqrt(A))/(2*b);h=u+M*y,l=c+M*T,M>=0&&M<=1&&r.push(new o(h,l));var _=(-C+Math.sqrt(A))/(2*b);h=u+_*y,l=c+_*T,_>=0&&_<=1&&r.push(new o(h,l))}}return r}},function(t,i,r){var o=r(66),a=new(r(4));t.exports=function LineToCircle(t,i,r){if(void 0===r&&(r=a),o(i,t.x1,t.y1))return r.x=t.x1,r.y=t.y1,!0;if(o(i,t.x2,t.y2))return r.x=t.x2,r.y=t.y2,!0;var h=t.x2-t.x1,l=t.y2-t.y1,u=i.x-t.x1,c=i.y-t.y1,d=h*h+l*l,p=h,g=l;if(d>0){var v=(u*h+c*l)/d;p*=v,g*=v}return r.x=t.x1+p,r.y=t.y1+g,p*p+g*g<=d&&p*h+g*l>=0&&o(i,r.x,r.y)}},function(t,i,r){var o=r(4),a=r(96),h=r(488);t.exports=function GetLineToRectangle(t,i,r){if(void 0===r&&(r=[]),h(t,i))for(var l=i.getLineA(),u=i.getLineB(),c=i.getLineC(),d=i.getLineD(),p=[new o,new o,new o,new o],g=[a(l,t,p[0]),a(u,t,p[1]),a(c,t,p[2]),a(d,t,p[3])],v=0;v<4;v++)g[v]&&r.push(p[v]);return r}},function(t,i){t.exports=function ContainsArray(t,i,r,o){void 0===r&&(r=!1),void 0===o&&(o=[]);for(var a,h,l,u,c,d,p=t.x3-t.x1,g=t.y3-t.y1,v=t.x2-t.x1,m=t.y2-t.y1,y=p*p+g*g,T=p*v+g*m,S=v*v+m*m,w=y*S-T*T,b=0===w?0:1/w,C=t.x1,A=t.y1,E=0;E<i.length&&(h=(y*(d=v*(l=i[E].x-C)+m*(u=i[E].y-A))-T*(c=p*l+g*u))*b,!((a=(S*c-T*d)*b)>=0&&h>=0&&a+h<1&&(o.push({x:i[E].x,y:i[E].y}),r)));E++);return o}},function(t,i){t.exports=function RotateAroundXY(t,i,r,o){var a=Math.cos(o),h=Math.sin(o),l=t.x1-i,u=t.y1-r;return t.x1=l*a-u*h+i,t.y1=l*h+u*a+r,l=t.x2-i,u=t.y2-r,t.x2=l*a-u*h+i,t.y2=l*h+u*a+r,t}},function(t,i){t.exports=function GetAspectRatio(t){return 0===t.height?NaN:t.width/t.height}},function(t,i){t.exports=function RotateAroundXY(t,i,r,o){var a=Math.cos(o),h=Math.sin(o),l=t.x1-i,u=t.y1-r;return t.x1=l*a-u*h+i,t.y1=l*h+u*a+r,l=t.x2-i,u=t.y2-r,t.x2=l*a-u*h+i,t.y2=l*h+u*a+r,l=t.x3-i,u=t.y3-r,t.x3=l*a-u*h+i,t.y3=l*h+u*a+r,t}},function(t,i,r){t.exports={BUTTON_DOWN:r(1310),BUTTON_UP:r(1311),CONNECTED:r(1312),DISCONNECTED:r(1313),GAMEPAD_BUTTON_DOWN:r(1314),GAMEPAD_BUTTON_UP:r(1315)}},function(t,i,r){var o=r(17),a=r(156);t.exports=function MergeXHRSettings(t,i){var r=void 0===t?a():o({},t);if(i)for(var h in i)void 0!==i[h]&&(r[h]=i[h]);return r}},function(t,i,r){var o=r(0),a=r(21),h=r(23),l=r(8),u=r(2),c=r(7),d=r(408),p=new o({Extends:h,initialize:function XMLFile(t,i,r,o){var a="xml";if(c(i)){var l=i;i=u(l,"key"),r=u(l,"url"),o=u(l,"xhrSettings"),a=u(l,"extension",a)}var d={type:"xml",cache:t.cacheManager.xml,extension:a,responseType:"text",key:i,url:r,xhrSettings:o};h.call(this,t,d)},onProcess:function onProcess(){this.state=a.FILE_PROCESSING,this.data=d(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});l.register("xml",(function(t,i,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new p(this,t[o]));else this.addFile(new p(this,t,i,r));return this})),t.exports=p},function(t,i,r){var o=r(0),a=r(21),h=r(23),l=r(8),u=r(2),c=r(7),d=new o({Extends:h,initialize:function TextFile(t,i,r,o){var a="text",l="txt",d=t.cacheManager.text;if(c(i)){var p=i;i=u(p,"key"),r=u(p,"url"),o=u(p,"xhrSettings"),l=u(p,"extension",l),a=u(p,"type",a),d=u(p,"cache",d)}var g={type:a,cache:d,extension:l,responseType:"text",key:i,url:r,xhrSettings:o};h.call(this,t,g)},onProcess:function onProcess(){this.state=a.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});l.register("text",(function(t,i,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new d(this,t[o]));else this.addFile(new d(this,t,i,r));return this})),t.exports=d},function(t,i,r){t.exports={Acceleration:r(1368),Angular:r(1369),Bounce:r(1370),Debug:r(1371),Drag:r(1372),Enable:r(1373),Friction:r(1374),Gravity:r(1375),Immovable:r(1376),Mass:r(1377),OverlapCirc:r(523),OverlapRect:r(244),Pushable:r(1378),Size:r(1379),Velocity:r(1380)}},function(t,i){t.exports=function OverlapRect(t,i,r,o,a,h,l){void 0===h&&(h=!0),void 0===l&&(l=!1);var u=[],c=[],d=t.treeMinMax;if(d.minX=i,d.minY=r,d.maxX=i+o,d.maxY=r+a,l&&(c=t.staticTree.search(d)),h&&t.useTree)u=t.tree.search(d);else if(h){var p=t.bodies,g={position:{x:i,y:r},left:i,top:r,right:i+o,bottom:r+a,isCircle:!1},v=t.intersects;p.iterate((function(t){v(t,g)&&u.push(t)}))}return c.concat(u)}},function(t,i,r){t.exports={COLLIDE:r(1381),OVERLAP:r(1382),PAUSE:r(1383),RESUME:r(1384),TILE_COLLIDE:r(1385),TILE_OVERLAP:r(1386),WORLD_BOUNDS:r(1387),WORLD_STEP:r(1388)}},function(t,i,r){var o=r(62);t.exports=function GetOverlapX(t,i,r,a){var h=0,l=t.deltaAbsX()+i.deltaAbsX()+a;return 0===t._dx&&0===i._dx?(t.embedded=!0,i.embedded=!0):t._dx>i._dx?(h=t.right-i.x)>l&&!r||!1===t.checkCollision.right||!1===i.checkCollision.left?h=0:(t.touching.none=!1,t.touching.right=!0,i.touching.none=!1,i.touching.left=!0,i.physicsType!==o.STATIC_BODY||r||(t.blocked.none=!1,t.blocked.right=!0),t.physicsType!==o.STATIC_BODY||r||(i.blocked.none=!1,i.blocked.left=!0)):t._dx<i._dx&&(-(h=t.x-i.width-i.x)>l&&!r||!1===t.checkCollision.left||!1===i.checkCollision.right?h=0:(t.touching.none=!1,t.touching.left=!0,i.touching.none=!1,i.touching.right=!0,i.physicsType!==o.STATIC_BODY||r||(t.blocked.none=!1,t.blocked.left=!0),t.physicsType!==o.STATIC_BODY||r||(i.blocked.none=!1,i.blocked.right=!0))),t.overlapX=h,i.overlapX=h,h}},function(t,i,r){var o=r(62);t.exports=function GetOverlapY(t,i,r,a){var h=0,l=t.deltaAbsY()+i.deltaAbsY()+a;return 0===t._dy&&0===i._dy?(t.embedded=!0,i.embedded=!0):t._dy>i._dy?(h=t.bottom-i.y)>l&&!r||!1===t.checkCollision.down||!1===i.checkCollision.up?h=0:(t.touching.none=!1,t.touching.down=!0,i.touching.none=!1,i.touching.up=!0,i.physicsType!==o.STATIC_BODY||r||(t.blocked.none=!1,t.blocked.down=!0),t.physicsType!==o.STATIC_BODY||r||(i.blocked.none=!1,i.blocked.up=!0)):t._dy<i._dy&&(-(h=t.y-i.bottom)>l&&!r||!1===t.checkCollision.up||!1===i.checkCollision.down?h=0:(t.touching.none=!1,t.touching.up=!0,i.touching.none=!1,i.touching.down=!0,i.physicsType!==o.STATIC_BODY||r||(t.blocked.none=!1,t.blocked.up=!0),t.physicsType!==o.STATIC_BODY||r||(i.blocked.none=!1,i.blocked.down=!0))),t.overlapY=h,i.overlapY=h,h}},function(t,i){t.exports=function TileIntersectsBody(t,i){return!(i.right<=t.left||i.bottom<=t.top||i.position.x>=t.right||i.position.y>=t.bottom)}},function(t,i,r){t.exports={Bounce:r(1495),Collision:r(1496),Force:r(1497),Friction:r(1498),Gravity:r(1499),Mass:r(1500),Sensor:r(1501),SetBody:r(1502),Sleep:r(1503),Static:r(1520),Transform:r(1521),Velocity:r(1522)}},function(t,i){var r={};t.exports=r,r.create=function(t,i){var o=t.bodyA,a=t.bodyB,h={id:r.id(o,a),bodyA:o,bodyB:a,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:o.isSensor||a.isSensor,timeCreated:i,timeUpdated:i,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return r.update(h,t,i),h},r.update=function(t,i,o){if(t.collision=i,i.collided){var a=i.supports,h=t.activeContacts,l=i.parentA,u=i.parentB;t.inverseMass=l.inverseMass+u.inverseMass,t.friction=Math.min(l.friction,u.friction),t.frictionStatic=Math.max(l.frictionStatic,u.frictionStatic),t.restitution=Math.max(l.restitution,u.restitution),t.slop=Math.max(l.slop,u.slop);for(var c=0;c<a.length;c++)h[c]=a[c].contact;var d=a.length;d<h.length&&(h.length=d),t.separation=i.depth,r.setActive(t,!0,o)}else!0===t.isActive&&r.setActive(t,!1,o)},r.setActive=function(t,i,r){i?(t.isActive=!0,t.timeUpdated=r):(t.isActive=!1,t.activeContacts.length=0)},r.id=function(t,i){return t.id<i.id?"A"+t.id+"B"+i.id:"A"+i.id+"B"+t.id}},function(t,i,r){t.exports={CalculateFacesAt:r(252),CalculateFacesWithin:r(63),CheckIsoBounds:r(541),Copy:r(1420),CreateFromTiles:r(1421),CullBounds:r(543),CullTiles:r(544),Fill:r(1422),FilterTiles:r(1423),FindByIndex:r(1424),FindTile:r(1425),ForEachTile:r(1426),GetCullTilesFunction:r(1427),GetTileAt:r(158),GetTileAtWorldXY:r(1428),GetTilesWithin:r(26),GetTilesWithinShape:r(1429),GetTilesWithinWorldXY:r(529),GetTileToWorldXFunction:r(1430),GetTileToWorldXYFunction:r(1431),GetTileToWorldYFunction:r(1432),GetWorldToTileXFunction:r(1433),GetWorldToTileXYFunction:r(1434),GetWorldToTileYFunction:r(1435),HasTileAt:r(562),HasTileAtWorldXY:r(1436),HexagonalCullBounds:r(546),HexagonalCullTiles:r(545),HexagonalTileToWorldXY:r(550),HexagonalTileToWorldY:r(554),HexagonalWorldToTileXY:r(556),HexagonalWorldToTileY:r(560),IsInLayerBounds:r(119),IsometricCullTiles:r(547),IsometricTileToWorldXY:r(551),IsometricWorldToTileXY:r(557),PutTileAt:r(257),PutTileAtWorldXY:r(1437),PutTilesAt:r(1438),Randomize:r(1439),RemoveTileAt:r(563),RemoveTileAtWorldXY:r(1440),RenderDebug:r(1441),ReplaceByIndex:r(542),RunCull:r(159),SetCollision:r(1442),SetCollisionBetween:r(1443),SetCollisionByExclusion:r(1444),SetCollisionByProperty:r(1445),SetCollisionFromCollisionGroup:r(1446),SetLayerCollisionIndex:r(160),SetTileCollision:r(72),SetTileIndexCallback:r(1447),SetTileLocationCallback:r(1448),Shuffle:r(1449),StaggeredCullBounds:r(549),StaggeredCullTiles:r(548),StaggeredTileToWorldXY:r(552),StaggeredTileToWorldY:r(555),StaggeredWorldToTileXY:r(558),StaggeredWorldToTileY:r(561),SwapByIndex:r(1450),TileToWorldX:r(253),TileToWorldXY:r(553),TileToWorldY:r(254),WeightedRandomize:r(1451),WorldToTileX:r(255),WorldToTileXY:r(559),WorldToTileY:r(256)}},function(t,i,r){var o=r(158);t.exports=function CalculateFacesAt(t,i,r){var a=o(t,i,!0,r),h=o(t,i-1,!0,r),l=o(t,i+1,!0,r),u=o(t-1,i,!0,r),c=o(t+1,i,!0,r),d=a&&a.collides;return d&&(a.faceTop=!0,a.faceBottom=!0,a.faceLeft=!0,a.faceRight=!0),h&&h.collides&&(d&&(a.faceTop=!1),h.faceBottom=!d),l&&l.collides&&(d&&(a.faceBottom=!1),l.faceTop=!d),u&&u.collides&&(d&&(a.faceLeft=!1),u.faceRight=!d),c&&c.collides&&(d&&(a.faceRight=!1),c.faceLeft=!d),a&&!a.collides&&a.resetFaces(),a}},function(t,i){t.exports=function TileToWorldX(t,i,r){var o=r.baseTileWidth,a=r.tilemapLayer,h=0;return a&&(i||(i=a.scene.cameras.main),h=a.x+i.scrollX*(1-a.scrollFactorX),o*=a.scaleX),h+t*o}},function(t,i){t.exports=function TileToWorldY(t,i,r){var o=r.baseTileHeight,a=r.tilemapLayer,h=0;return a&&(i||(i=a.scene.cameras.main),h=a.y+i.scrollY*(1-a.scrollFactorY),o*=a.scaleY),h+t*o}},function(t,i){t.exports=function WorldToTileX(t,i,r,o){void 0===i&&(i=!0);var a=o.baseTileWidth,h=o.tilemapLayer;return h&&(r||(r=h.scene.cameras.main),t-=h.x+r.scrollX*(1-h.scrollFactorX),a*=h.scaleX),i?Math.floor(t/a):t/a}},function(t,i){t.exports=function WorldToTileY(t,i,r,o){void 0===i&&(i=!0);var a=o.baseTileHeight,h=o.tilemapLayer;return h&&(r||(r=h.scene.cameras.main),t-=h.y+r.scrollY*(1-h.scrollFactorY),a*=h.scaleY),i?Math.floor(t/a):t/a}},function(t,i,r){var o=r(85),a=r(119),h=r(252),l=r(72);t.exports=function PutTileAt(t,i,r,u,c){if(void 0===u&&(u=!0),!a(i,r,c))return null;var d=c.data[r][i],p=d&&d.collides;if(t instanceof o)null===c.data[r][i]&&(c.data[r][i]=new o(c,t.index,i,r,c.tileWidth,c.tileHeight)),c.data[r][i].copy(t);else{var g=t;null===c.data[r][i]?c.data[r][i]=new o(c,g,i,r,c.tileWidth,c.tileHeight):c.data[r][i].index=g}var v=c.data[r][i],m=-1!==c.collideIndexes.indexOf(v.index);return l(v,m),u&&p!==v.collides&&h(i,r,c),v}},function(t,i,r){var o=r(29);t.exports=function FromOrientationString(t){return"isometric"===(t=t.toLowerCase())?o.ISOMETRIC:"staggered"===t?o.STAGGERED:"hexagonal"===t?o.HEXAGONAL:o.ORTHOGONAL}},function(t,i,r){var o=r(40),a=r(120),h=r(121),l=r(85);t.exports=function Parse2DArray(t,i,r,u,c){for(var d=new a({tileWidth:r,tileHeight:u}),p=new h({name:t,tileWidth:r,tileHeight:u,format:o.ARRAY_2D,layers:[d]}),g=[],v=i.length,m=0,y=0;y<i.length;y++){g[y]=[];for(var T=i[y],S=0;S<T.length;S++){var w=parseInt(T[S],10);isNaN(w)||-1===w?g[y][S]=c?null:new l(d,-1,S,y,r,u):g[y][S]=new l(d,w,S,y,r,u)}0===m&&(m=T.length)}return p.width=d.width=m,p.height=d.height=v,p.widthInPixels=d.widthInPixels=m*r,p.heightInPixels=d.heightInPixels=v*u,d.data=g,p}},function(t,i,r){var o=r(571),a=r(261),h=function copyPoints(t){return{x:t.x,y:t.y}},l=["id","name","type","rotation","properties","visible","x","y","width","height"];t.exports=function ParseObject(t,i,r){void 0===i&&(i=0),void 0===r&&(r=0);var u=o(t,l);if(u.x+=i,u.y+=r,t.gid){var c=a(t.gid);u.gid=c.gid,u.flippedHorizontal=c.flippedHorizontal,u.flippedVertical=c.flippedVertical,u.flippedAntiDiagonal=c.flippedAntiDiagonal}else t.polyline?u.polyline=t.polyline.map(h):t.polygon?u.polygon=t.polygon.map(h):t.ellipse?u.ellipse=t.ellipse:t.text?u.text=t.text:t.point?u.point=!0:u.rectangle=!0;return u}},function(t,i){var r=2147483648,o=1073741824,a=536870912;t.exports=function ParseGID(t){var i=Boolean(t&r),h=Boolean(t&o),l=Boolean(t&a);t&=536870911;var u=0,c=!1;return i&&h&&l?(u=Math.PI/2,c=!0):i&&h&&!l?(u=Math.PI,c=!1):i&&!h&&l?(u=Math.PI/2,c=!1):!i||h||l?!i&&h&&l?(u=3*Math.PI/2,c=!1):i||!h||l?i||h||!l?i||h||l||(u=0,c=!1):(u=3*Math.PI/2,c=!0):(u=Math.PI,c=!0):(u=0,c=!0),{gid:t,flippedHorizontal:i,flippedVertical:h,flippedAntiDiagonal:l,rotation:u,flipped:c}}},function(t,i,r){var o=r(40),a=r(121),h=r(564),l=r(580);t.exports=function ParseToTilemap(t,i,r,u,c,d,p,g){void 0===r&&(r=32),void 0===u&&(u=32),void 0===c&&(c=10),void 0===d&&(d=10),void 0===g&&(g=!1);var v=null;if(Array.isArray(p))v=h(void 0!==i?i:"map",o.ARRAY_2D,p,r,u,g);else if(void 0!==i){var m=t.cache.tilemap.get(i);m?v=h(i,m.format,m.data,r,u,g):console.warn("No map data found for key "+i)}return null===v&&(v=new a({tileWidth:r,tileHeight:u,width:c,height:d})),new l(t,v)}},function(t,i,r){var o=r(6);t.exports=function GetTargets(t){var i=o(t,"targets",null);return null===i||("function"==typeof i&&(i=i.call()),Array.isArray(i)||(i=[i])),i}},function(t,i){function hasGetActive(t){return!!t.getActive&&"function"==typeof t.getActive}function hasGetStart(t){return!!t.getStart&&"function"==typeof t.getStart}function hasGetEnd(t){return!!t.getEnd&&"function"==typeof t.getEnd}t.exports=function GetValueOp(t,i){var r,o=function getEnd(t,i,r){return r},a=function getStart(t,i,r){return r},h=null,l=_typeof(i);if("number"===l)o=function getEnd(){return i};else if("string"===l){var u=i[0],c=parseFloat(i.substr(2));switch(u){case"+":o=function getEnd(t,i,r){return r+c};break;case"-":o=function getEnd(t,i,r){return r-c};break;case"*":o=function getEnd(t,i,r){return r*c};break;case"/":o=function getEnd(t,i,r){return r/c};break;default:o=function getEnd(){return parseFloat(i)}}}else if("function"===l)o=i;else if("object"===l)if(function hasGetters(t){return hasGetStart(t)||hasGetEnd(t)||hasGetActive(t)}(i))hasGetActive(i)&&(h=i.getActive),hasGetEnd(i)&&(o=i.getEnd),hasGetStart(i)&&(a=i.getStart);else if(i.hasOwnProperty("value"))r=GetValueOp(t,i.value);else{var d=i.hasOwnProperty("to"),p=i.hasOwnProperty("from"),g=i.hasOwnProperty("start");if(d&&(p||g)){if(r=GetValueOp(t,i.to),g){var v=GetValueOp(t,i.start);r.getActive=v.getEnd}if(p){var m=GetValueOp(t,i.from);r.getStart=m.getEnd}}}return r||(r={getActive:h,getEnd:o,getStart:a}),r}},function(t,i){t.exports={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1}},function(t,i,r){var o=r(0),a=r(9),h=r(267),l=r(16),u=r(5),c=r(100),d=r(14),p=new o({Extends:a,initialize:function Tween(t,i,r){a.call(this),this.parent=t,this.parentIsTimeline=t.hasOwnProperty("isTimeline"),this.data=i,this.totalData=i.length,this.targets=r,this.totalTargets=r.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=c.PENDING_ADD,this._pausedState=c.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function getValue(t){return void 0===t&&(t=0),this.data[t].current},setTimeScale:function setTimeScale(t){return this.timeScale=t,this},getTimeScale:function getTimeScale(){return this.timeScale},isPlaying:function isPlaying(){return this.state===c.ACTIVE},isPaused:function isPaused(){return this.state===c.PAUSED},hasTarget:function hasTarget(t){return-1!==this.targets.indexOf(t)},updateTo:function updateTo(t,i,r){void 0===r&&(r=!1);for(var o=0;o<this.totalData;o++){var a=this.data[o];a.key===t&&(a.end=i,r&&(a.start=a.current))}return this},restart:function restart(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===c.ACTIVE?this.seek(0):this.state===c.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===c.PENDING_ADD?this:this.play()},calcDuration:function calcDuration(){for(var t=0,i=d.MAX_SAFE_INTEGER,r=this.data,o=0;o<this.totalData;o++){var a=r[o];a.t1=a.duration+a.hold,a.yoyo&&(a.t1+=a.duration),a.t2=a.t1+a.repeatDelay,a.totalDuration=a.delay+a.t1,-1===a.repeat?a.totalDuration+=999999999999*a.t2:a.repeat>0&&(a.totalDuration+=a.t2*a.repeat),a.totalDuration>t&&(t=a.totalDuration),a.delay<i&&(i=a.delay)}this.duration=Math.max(t,.001),this.loopCounter=-1===this.loop?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=i},init:function init(){if(this.paused&&!this.parentIsTimeline)return this.state=c.PENDING_ADD,this._pausedState=c.INIT,!1;for(var t=this.data,i=this.totalTargets,r=0;r<this.totalData;r++){var o=t[r],a=o.target,h=o.gen,l=o.key,u=o.index;o.delay=h.delay(a,l,0,u,i,this),o.duration=Math.max(h.duration(a,l,0,u,i,this),.001),o.hold=h.hold(a,l,0,u,i,this),o.repeat=h.repeat(a,l,0,u,i,this),o.repeatDelay=h.repeatDelay(a,l,0,u,i,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=c.INIT,!0},makeActive:function makeActive(){this.parent.makeActive(this),this.dispatchTweenEvent(h.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function nextState(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=c.LOOP_DELAY):(this.state=c.ACTIVE,this.dispatchTweenEvent(h.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=c.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=c.PENDING_REMOVE,this.dispatchTweenEvent(h.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function pause(){return this.state===c.PAUSED||(this.paused=!0,this._pausedState=this.state,this.state=c.PAUSED),this},play:function play(t){void 0===t&&(t=!1);var i=this.state;return i!==c.INIT||this.parentIsTimeline?i===c.ACTIVE||i===c.PENDING_ADD&&this._pausedState===c.PENDING_ADD?this:this.parentIsTimeline||i!==c.PENDING_REMOVE&&i!==c.REMOVED?(this.parentIsTimeline?(this.resetTweenData(t),0===this.calculatedOffset?this.state=c.ACTIVE:(this.countdown=this.calculatedOffset,this.state=c.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(t),this.state=c.ACTIVE,this.makeActive()),this):(this.seek(0),this.parent.makeActive(this),this):(this.resetTweenData(!1),this.state=c.ACTIVE,this)},resetTweenData:function resetTweenData(t){for(var i=this.data,r=this.totalData,o=this.totalTargets,a=0;a<r;a++){var h=i[a],l=h.target,u=h.key,d=h.index;h.progress=0,h.elapsed=0,h.repeatCounter=-1===h.repeat?999999999999:h.repeat,t?(h.start=h.getStartValue(l,u,h.start,d,o,this),h.end=h.getEndValue(l,u,h.end,d,o,this),h.current=h.start,h.state=c.PLAYING_FORWARD):h.state=c.PENDING_RENDER,h.delay>0&&(h.elapsed=h.delay,h.state=c.DELAY),h.getActiveValue&&(l[u]=h.getActiveValue(h.target,h.key,h.start))}},resume:function resume(){return this.state===c.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function seek(t,i){void 0===i&&(i=16.6),this.state===c.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var r=this.data,o=this.totalTargets,a=0;a<this.totalData;a++){var h=r[a],l=h.target,u=h.gen,d=h.key,p=h.index;h.progress=0,h.elapsed=0,h.repeatCounter=-1===h.repeat?999999999999:h.repeat,h.delay=u.delay(l,d,0,p,o,this),h.duration=Math.max(u.duration(l,d,0,p,o,this),.001),h.hold=u.hold(l,d,0,p,o,this),h.repeat=u.repeat(l,d,0,p,o,this),h.repeatDelay=u.repeatDelay(l,d,0,p,o,this),h.current=h.start,h.state=c.PLAYING_FORWARD,this.updateTweenData(this,h,0,p,o),h.delay>0&&(h.elapsed=h.delay,h.state=c.DELAY)}this.calcDuration();var g=!1;this.state===c.PAUSED&&(g=!0,this.state=c.ACTIVE),this.isSeeking=!0;do{this.update(0,i)}while(this.totalProgress<t);return this.isSeeking=!1,g&&(this.state=c.PAUSED),this},setCallback:function setCallback(t,i,r,o){return this.callbacks[t]={func:i,scope:o,params:r},this},complete:function complete(t){return void 0===t&&(t=0),t?(this.state=c.COMPLETE_DELAY,this.countdown=t):(this.state=c.PENDING_REMOVE,this.dispatchTweenEvent(h.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function remove(){return this.parent.remove(this),this},stop:function stop(t){return this.state===c.ACTIVE&&void 0!==t&&this.seek(t),this.state!==c.REMOVED&&(this.state!==c.PAUSED&&this.state!==c.PENDING_ADD||(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(h.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=c.PENDING_REMOVE),this},update:function update(t,i){if(this.state===c.PAUSED)return!1;switch(this.useFrames&&(i=1*this.parent.timeScale),i*=this.timeScale,this.elapsed+=i,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=i,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case c.ACTIVE:this.hasStarted||this.isSeeking||(this.startDelay-=i,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(h.TWEEN_START,this.callbacks.onStart)));for(var r=!1,o=0;o<this.totalData;o++){var a=this.data[o];this.updateTweenData(this,a,i)&&(r=!0)}r||this.nextState();break;case c.LOOP_DELAY:this.countdown-=i,this.countdown<=0&&(this.state=c.ACTIVE,this.dispatchTweenEvent(h.TWEEN_LOOP,this.callbacks.onLoop));break;case c.OFFSET_DELAY:this.countdown-=i,this.countdown<=0&&(this.state=c.ACTIVE);break;case c.COMPLETE_DELAY:this.countdown-=i,this.countdown<=0&&(this.state=c.PENDING_REMOVE,this.dispatchTweenEvent(h.TWEEN_COMPLETE,this.callbacks.onComplete))}return this.state===c.PENDING_REMOVE},dispatchTweenDataEvent:function dispatchTweenDataEvent(t,i,r){this.isSeeking||(this.emit(t,this,r.key,r.target,r.current,r.previous),i&&(i.params[1]=r.target,i.func.apply(i.scope,i.params)))},dispatchTweenEvent:function dispatchTweenEvent(t,i){this.isSeeking||(this.emit(t,this,this.targets),i&&(i.params[1]=this.targets,i.func.apply(i.scope,i.params)))},setStateFromEnd:function setStateFromEnd(t,i,r){return i.yoyo?(i.elapsed=r,i.progress=r/i.duration,i.flipX&&i.target.toggleFlipX(),i.flipY&&i.target.toggleFlipY(),this.dispatchTweenDataEvent(h.TWEEN_YOYO,t.callbacks.onYoyo,i),i.start=i.getStartValue(i.target,i.key,i.start,i.index,t.totalTargets,t),c.PLAYING_BACKWARD):i.repeatCounter>0?(i.repeatCounter--,i.elapsed=r,i.progress=r/i.duration,i.flipX&&i.target.toggleFlipX(),i.flipY&&i.target.toggleFlipY(),i.start=i.getStartValue(i.target,i.key,i.start,i.index,t.totalTargets,t),i.end=i.getEndValue(i.target,i.key,i.start,i.index,t.totalTargets,t),i.repeatDelay>0?(i.elapsed=i.repeatDelay-r,i.current=i.start,i.target[i.key]=i.current,c.REPEAT_DELAY):(this.dispatchTweenDataEvent(h.TWEEN_REPEAT,t.callbacks.onRepeat,i),c.PLAYING_FORWARD)):c.COMPLETE},setStateFromStart:function setStateFromStart(t,i,r){return i.repeatCounter>0?(i.repeatCounter--,i.elapsed=r,i.progress=r/i.duration,i.flipX&&i.target.toggleFlipX(),i.flipY&&i.target.toggleFlipY(),i.end=i.getEndValue(i.target,i.key,i.start,i.index,t.totalTargets,t),i.repeatDelay>0?(i.elapsed=i.repeatDelay-r,i.current=i.start,i.target[i.key]=i.current,c.REPEAT_DELAY):(this.dispatchTweenDataEvent(h.TWEEN_REPEAT,t.callbacks.onRepeat,i),c.PLAYING_FORWARD)):c.COMPLETE},updateTweenData:function updateTweenData(t,i,r){var o=i.target;switch(i.state){case c.PLAYING_FORWARD:case c.PLAYING_BACKWARD:if(!o){i.state=c.COMPLETE;break}var a=i.elapsed,l=i.duration,u=0;(a+=r)>l&&(u=a-l,a=l);var d=i.state===c.PLAYING_FORWARD,p=a/l;if(i.elapsed=a,i.progress=p,i.previous=i.current,1===p)d?(i.current=i.end,o[i.key]=i.end,i.hold>0?(i.elapsed=i.hold-u,i.state=c.HOLD_DELAY):i.state=this.setStateFromEnd(t,i,u)):(i.current=i.start,o[i.key]=i.start,i.state=this.setStateFromStart(t,i,u));else{var g=d?i.ease(p):i.ease(1-p);i.current=i.start+(i.end-i.start)*g,o[i.key]=i.current}this.dispatchTweenDataEvent(h.TWEEN_UPDATE,t.callbacks.onUpdate,i);break;case c.DELAY:i.elapsed-=r,i.elapsed<=0&&(i.elapsed=Math.abs(i.elapsed),i.state=c.PENDING_RENDER);break;case c.REPEAT_DELAY:i.elapsed-=r,i.elapsed<=0&&(i.elapsed=Math.abs(i.elapsed),i.state=c.PLAYING_FORWARD,this.dispatchTweenDataEvent(h.TWEEN_REPEAT,t.callbacks.onRepeat,i));break;case c.HOLD_DELAY:i.elapsed-=r,i.elapsed<=0&&(i.state=this.setStateFromEnd(t,i,Math.abs(i.elapsed)));break;case c.PENDING_RENDER:o?(i.start=i.getStartValue(o,i.key,o[i.key],i.index,t.totalTargets,t),i.end=i.getEndValue(o,i.key,i.start,i.index,t.totalTargets,t),i.current=i.start,o[i.key]=i.start,i.state=c.PLAYING_FORWARD):i.state=c.COMPLETE}return i.state!==c.COMPLETE}});p.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],u.register("tween",(function(t){return this.scene.sys.tweens.add(t)})),l.register("tween",(function(t){return this.scene.sys.tweens.create(t)})),t.exports=p},function(t,i,r){t.exports={TIMELINE_COMPLETE:r(1466),TIMELINE_LOOP:r(1467),TIMELINE_PAUSE:r(1468),TIMELINE_RESUME:r(1469),TIMELINE_START:r(1470),TIMELINE_UPDATE:r(1471),TWEEN_ACTIVE:r(1472),TWEEN_COMPLETE:r(1473),TWEEN_LOOP:r(1474),TWEEN_REPEAT:r(1475),TWEEN_START:r(1476),TWEEN_STOP:r(1477),TWEEN_UPDATE:r(1478),TWEEN_YOYO:r(1479)}},function(t,i){t.exports=function TweenData(t,i,r,o,a,h,l,u,c,d,p,g,v,m,y){return{target:t,index:i,key:r,getActiveValue:h,getEndValue:o,getStartValue:a,ease:l,duration:0,totalDuration:0,delay:0,yoyo:d,hold:0,repeat:0,repeatDelay:0,flipX:m,flipY:y,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:u,duration:c,hold:p,repeat:g,repeatDelay:v},state:0}}},function(t,i,r){var o=r(68);t.exports=function Wrap(t){return o(t,-Math.PI,Math.PI)}},function(t,i,r){var o=r(68);t.exports=function WrapDegrees(t){return o(t,-180,180)}},function(t,i,r){var o={};t.exports=o;var a=r(83),h=r(32);o.fromVertices=function(t){for(var i={},r=0;r<t.length;r++){var o=(r+1)%t.length,l=a.normalise({x:t[o].y-t[r].y,y:t[r].x-t[o].x}),u=0===l.y?1/0:l.x/l.y;i[u=u.toFixed(3).toString()]=l}return h.values(i)},o.rotate=function(t,i){if(0!==i)for(var r=Math.cos(i),o=Math.sin(i),a=0;a<t.length;a++){var h,l=t[a];h=l.x*r-l.y*o,l.y=l.x*o+l.y*r,l.x=h}}},function(t,i,r){t.exports={AFTER_ADD:r(1504),AFTER_REMOVE:r(1505),AFTER_UPDATE:r(1506),BEFORE_ADD:r(1507),BEFORE_REMOVE:r(1508),BEFORE_UPDATE:r(1509),COLLISION_ACTIVE:r(1510),COLLISION_END:r(1511),COLLISION_START:r(1512),DRAG_END:r(1513),DRAG:r(1514),DRAG_START:r(1515),PAUSE:r(1516),RESUME:r(1517),SLEEP_END:r(1518),SLEEP_START:r(1519)}},function(t,i,r){var o={};t.exports=o;var a=r(274),h=r(250),l=r(84);o.collisions=function(t,i){for(var r=[],u=i.pairs.table,c=i.metrics,d=0;d<t.length;d++){var p=t[d][0],g=t[d][1];if((!p.isStatic&&!p.isSleeping||!g.isStatic&&!g.isSleeping)&&o.canCollide(p.collisionFilter,g.collisionFilter)&&(c.midphaseTests+=1,l.overlaps(p.bounds,g.bounds)))for(var v=p.parts.length>1?1:0;v<p.parts.length;v++)for(var m=p.parts[v],y=g.parts.length>1?1:0;y<g.parts.length;y++){var T=g.parts[y];if(m===p&&T===g||l.overlaps(m.bounds,T.bounds)){var S,w=u[h.id(m,T)];S=w&&w.isActive?w.collision:null;var b=a.collides(m,T,S);c.narrowphaseTests+=1,b.reused&&(c.narrowReuseCount+=1),b.collided&&(r.push(b),c.narrowDetections+=1)}}}return r},o.canCollide=function(t,i){return t.group===i.group&&0!==t.group?t.group>0:0!=(t.mask&i.category)&&0!=(i.mask&t.category)}},function(t,i,r){var o={};t.exports=o;var a=r(64),h=r(83);o.collides=function(t,i,r){var l,u,c,d,p=!1;if(r){var g=t.parent,v=i.parent,m=g.speed*g.speed+g.angularSpeed*g.angularSpeed+v.speed*v.speed+v.angularSpeed*v.angularSpeed;p=r&&r.collided&&m<.2,d=r}else d={collided:!1,bodyA:t,bodyB:i};if(r&&p){var y=d.axisBody,T=y===t?i:t,S=[y.axes[r.axisNumber]];if(c=o._overlapAxes(y.vertices,T.vertices,S),d.reused=!0,c.overlap<=0)return d.collided=!1,d}else{if((l=o._overlapAxes(t.vertices,i.vertices,t.axes)).overlap<=0)return d.collided=!1,d;if((u=o._overlapAxes(i.vertices,t.vertices,i.axes)).overlap<=0)return d.collided=!1,d;l.overlap<u.overlap?(c=l,d.axisBody=t):(c=u,d.axisBody=i),d.axisNumber=c.axisNumber}d.bodyA=t.id<i.id?t:i,d.bodyB=t.id<i.id?i:t,d.collided=!0,d.depth=c.overlap,d.parentA=d.bodyA.parent,d.parentB=d.bodyB.parent,t=d.bodyA,i=d.bodyB,h.dot(c.axis,h.sub(i.position,t.position))<0?d.normal={x:c.axis.x,y:c.axis.y}:d.normal={x:-c.axis.x,y:-c.axis.y},d.tangent=h.perp(d.normal),d.penetration=d.penetration||{},d.penetration.x=d.normal.x*d.depth,d.penetration.y=d.normal.y*d.depth;var w=o._findSupports(t,i,d.normal),b=[];if(a.contains(t.vertices,w[0])&&b.push(w[0]),a.contains(t.vertices,w[1])&&b.push(w[1]),b.length<2){var C=o._findSupports(i,t,h.neg(d.normal));a.contains(i.vertices,C[0])&&b.push(C[0]),b.length<2&&a.contains(i.vertices,C[1])&&b.push(C[1])}return b.length<1&&(b=[w[0]]),d.supports=b,d},o._overlapAxes=function(t,i,r){for(var a,l,u=h._temp[0],c=h._temp[1],d={overlap:Number.MAX_VALUE},p=0;p<r.length;p++){if(l=r[p],o._projectToAxis(u,t,l),o._projectToAxis(c,i,l),(a=Math.min(u.max-c.min,c.max-u.min))<=0)return d.overlap=a,d;a<d.overlap&&(d.overlap=a,d.axis=l,d.axisNumber=p)}return d},o._projectToAxis=function(t,i,r){for(var o=h.dot(i[0],r),a=o,l=1;l<i.length;l+=1){var u=h.dot(i[l],r);u>a?a=u:u<o&&(o=u)}t.min=o,t.max=a},o._findSupports=function(t,i,r){for(var o,a,l,u,c=Number.MAX_VALUE,d=h._temp[0],p=i.vertices,g=t.position,v=0;v<p.length;v++)a=p[v],d.x=a.x-g.x,d.y=a.y-g.y,(o=-h.dot(r,d))<c&&(c=o,l=a);return a=p[l.index-1>=0?l.index-1:p.length-1],d.x=a.x-g.x,d.y=a.y-g.y,c=-h.dot(r,d),u=a,a=p[(l.index+1)%p.length],d.x=a.x-g.x,d.y=a.y-g.y,(o=-h.dot(r,d))<c&&(u=a),[l,u]}},function(t,i,r){t.exports={AlignTo:r(601),Angle:r(602),Call:r(603),GetFirst:r(604),GetLast:r(605),GridAlign:r(606),IncAlpha:r(678),IncX:r(679),IncXY:r(680),IncY:r(681),PlaceOnCircle:r(682),PlaceOnEllipse:r(683),PlaceOnLine:r(684),PlaceOnRectangle:r(685),PlaceOnTriangle:r(686),PlayAnimation:r(687),PropertyValueInc:r(46),PropertyValueSet:r(27),RandomCircle:r(688),RandomEllipse:r(689),RandomLine:r(690),RandomRectangle:r(691),RandomTriangle:r(692),Rotate:r(693),RotateAround:r(694),RotateAroundDistance:r(695),ScaleX:r(696),ScaleXY:r(697),ScaleY:r(698),SetAlpha:r(699),SetBlendMode:r(700),SetDepth:r(701),SetHitArea:r(702),SetOrigin:r(703),SetRotation:r(704),SetScale:r(705),SetScaleX:r(706),SetScaleY:r(707),SetScrollFactor:r(708),SetScrollFactorX:r(709),SetScrollFactorY:r(710),SetTint:r(711),SetVisible:r(712),SetX:r(713),SetXY:r(714),SetY:r(715),ShiftPosition:r(716),Shuffle:r(717),SmootherStep:r(718),SmoothStep:r(719),Spread:r(720),ToggleVisible:r(721),WrapInRectangle:r(722)}},function(t,i,r){var o=r(123),a=[];a[o.BOTTOM_CENTER]=r(277),a[o.BOTTOM_LEFT]=r(278),a[o.BOTTOM_RIGHT]=r(279),a[o.LEFT_BOTTOM]=r(280),a[o.LEFT_CENTER]=r(281),a[o.LEFT_TOP]=r(282),a[o.RIGHT_BOTTOM]=r(283),a[o.RIGHT_CENTER]=r(284),a[o.RIGHT_TOP]=r(285),a[o.TOP_CENTER]=r(286),a[o.TOP_LEFT]=r(287),a[o.TOP_RIGHT]=r(288),t.exports=function QuickSet(t,i,r,o,h){return a[r](t,i,o,h)}},function(t,i,r){var o=r(42),a=r(87),h=r(88),l=r(52);t.exports=function BottomCenter(t,i,r,u){return void 0===r&&(r=0),void 0===u&&(u=0),h(t,a(i)+r),l(t,o(i)+u),t}},function(t,i,r){var o=r(42),a=r(43),h=r(53),l=r(52);t.exports=function BottomLeft(t,i,r,u){return void 0===r&&(r=0),void 0===u&&(u=0),h(t,a(i)-r),l(t,o(i)+u),t}},function(t,i,r){var o=r(42),a=r(44),h=r(54),l=r(52);t.exports=function BottomRight(t,i,r,u){return void 0===r&&(r=0),void 0===u&&(u=0),h(t,a(i)+r),l(t,o(i)+u),t}},function(t,i,r){var o=r(42),a=r(43),h=r(55),l=r(54);t.exports=function LeftBottom(t,i,r,u){return void 0===r&&(r=0),void 0===u&&(u=0),l(t,a(i)-r),h(t,o(i)+u),t}},function(t,i,r){var o=r(89),a=r(43),h=r(90),l=r(54);t.exports=function LeftCenter(t,i,r,u){return void 0===r&&(r=0),void 0===u&&(u=0),l(t,a(i)-r),h(t,o(i)+u),t}},function(t,i,r){var o=r(43),a=r(45),h=r(54),l=r(52);t.exports=function LeftTop(t,i,r,u){return void 0===r&&(r=0),void 0===u&&(u=0),h(t,o(i)-r),l(t,a(i)-u),t}},function(t,i,r){var o=r(42),a=r(44),h=r(55),l=r(53);t.exports=function RightBottom(t,i,r,u){return void 0===r&&(r=0),void 0===u&&(u=0),l(t,a(i)+r),h(t,o(i)+u),t}},function(t,i,r){var o=r(89),a=r(44),h=r(90),l=r(53);t.exports=function RightCenter(t,i,r,u){return void 0===r&&(r=0),void 0===u&&(u=0),l(t,a(i)+r),h(t,o(i)+u),t}},function(t,i,r){var o=r(44),a=r(45),h=r(53),l=r(52);t.exports=function RightTop(t,i,r,u){return void 0===r&&(r=0),void 0===u&&(u=0),h(t,o(i)+r),l(t,a(i)-u),t}},function(t,i,r){var o=r(87),a=r(45),h=r(55),l=r(88);t.exports=function TopCenter(t,i,r,u){return void 0===r&&(r=0),void 0===u&&(u=0),l(t,o(i)+r),h(t,a(i)-u),t}},function(t,i,r){var o=r(43),a=r(45),h=r(55),l=r(53);t.exports=function TopLeft(t,i,r,u){return void 0===r&&(r=0),void 0===u&&(u=0),l(t,o(i)-r),h(t,a(i)-u),t}},function(t,i,r){var o=r(44),a=r(45),h=r(55),l=r(54);t.exports=function TopRight(t,i,r,u){return void 0===r&&(r=0),void 0===u&&(u=0),l(t,o(i)+r),h(t,a(i)-u),t}},function(t,i,r){var o=r(123),a=[];a[o.BOTTOM_CENTER]=r(290),a[o.BOTTOM_LEFT]=r(291),a[o.BOTTOM_RIGHT]=r(292),a[o.CENTER]=r(293),a[o.LEFT_CENTER]=r(295),a[o.RIGHT_CENTER]=r(296),a[o.TOP_CENTER]=r(297),a[o.TOP_LEFT]=r(298),a[o.TOP_RIGHT]=r(299),a[o.LEFT_BOTTOM]=a[o.BOTTOM_LEFT],a[o.LEFT_TOP]=a[o.TOP_LEFT],a[o.RIGHT_BOTTOM]=a[o.BOTTOM_RIGHT],a[o.RIGHT_TOP]=a[o.TOP_RIGHT],t.exports=function QuickSet(t,i,r,o,h){return a[r](t,i,o,h)}},function(t,i,r){var o=r(42),a=r(87),h=r(55),l=r(88);t.exports=function BottomCenter(t,i,r,u){return void 0===r&&(r=0),void 0===u&&(u=0),l(t,a(i)+r),h(t,o(i)+u),t}},function(t,i,r){var o=r(42),a=r(43),h=r(55),l=r(53);t.exports=function BottomLeft(t,i,r,u){return void 0===r&&(r=0),void 0===u&&(u=0),l(t,a(i)-r),h(t,o(i)+u),t}},function(t,i,r){var o=r(42),a=r(44),h=r(55),l=r(54);t.exports=function BottomRight(t,i,r,u){return void 0===r&&(r=0),void 0===u&&(u=0),l(t,a(i)+r),h(t,o(i)+u),t}},function(t,i,r){var o=r(294),a=r(87),h=r(89);t.exports=function Center(t,i,r,l){return void 0===r&&(r=0),void 0===l&&(l=0),o(t,a(i)+r,h(i)+l),t}},function(t,i,r){var o=r(88),a=r(90);t.exports=function CenterOn(t,i,r){return o(t,i),a(t,r)}},function(t,i,r){var o=r(89),a=r(43),h=r(90),l=r(53);t.exports=function LeftCenter(t,i,r,u){return void 0===r&&(r=0),void 0===u&&(u=0),l(t,a(i)-r),h(t,o(i)+u),t}},function(t,i,r){var o=r(89),a=r(44),h=r(90),l=r(54);t.exports=function RightCenter(t,i,r,u){return void 0===r&&(r=0),void 0===u&&(u=0),l(t,a(i)+r),h(t,o(i)+u),t}},function(t,i,r){var o=r(87),a=r(45),h=r(88),l=r(52);t.exports=function TopCenter(t,i,r,u){return void 0===r&&(r=0),void 0===u&&(u=0),h(t,o(i)+r),l(t,a(i)-u),t}},function(t,i,r){var o=r(43),a=r(45),h=r(53),l=r(52);t.exports=function TopLeft(t,i,r,u){return void 0===r&&(r=0),void 0===u&&(u=0),h(t,o(i)-r),l(t,a(i)-u),t}},function(t,i,r){var o=r(44),a=r(45),h=r(54),l=r(52);t.exports=function TopRight(t,i,r,u){return void 0===r&&(r=0),void 0===u&&(u=0),h(t,o(i)+r),l(t,a(i)-u),t}},function(t,i,r){var o=r(169),a=r(98),h=r(14),l=r(4);t.exports=function GetPoint(t,i,r){void 0===r&&(r=new l);var u=a(i,0,h.PI2);return o(t,u,r)}},function(t,i,r){var o=r(302),a=r(169),h=r(98),l=r(14);t.exports=function GetPoints(t,i,r,u){void 0===u&&(u=[]),!i&&r>0&&(i=o(t)/r);for(var c=0;c<i;c++){var d=h(c/i,0,l.PI2);u.push(a(t,d))}return u}},function(t,i){t.exports=function Circumference(t){return Math.PI*t.radius*2}},function(t,i,r){var o=r(18),a={_alpha:1,clearAlpha:function clearAlpha(){return this.setAlpha(1)},setAlpha:function setAlpha(t){return void 0===t&&(t=1),this.alpha=t,this},alpha:{get:function get(){return this._alpha},set:function set(t){var i=o(t,0,1);this._alpha=i,0===i?this.renderFlags&=-3:this.renderFlags|=2}}};t.exports=a},function(t,i,r){var o=r(35),a={_blendMode:o.NORMAL,blendMode:{get:function get(){return this._blendMode},set:function set(t){"string"==typeof t&&(t=o[t]),(t|=0)>=-1&&(this._blendMode=t)}},setBlendMode:function setBlendMode(t){return this.blendMode=t,this}};t.exports=a},function(t,i){var r={_depth:0,depth:{get:function get(){return this._depth},set:function set(t){this.displayList&&this.displayList.queueDepthSort(),this._depth=t}},setDepth:function setDepth(t){return void 0===t&&(t=0),this.depth=t,this}};t.exports=r},function(t,i,r){var o=r(171),a=r(130);t.exports=function GetPoints(t,i,r,h){void 0===h&&(h=[]),!i&&r>0&&(i=a(t)/r);for(var l=0;l<i;l++){var u=l/i;h.push(o(t,u))}return h}},function(t,i,r){var o=r(4);t.exports=function GetPoint(t,i,r){return void 0===r&&(r=new o),r.x=t.x1+(t.x2-t.x1)*i,r.y=t.y1+(t.y2-t.y1)*i,r}},function(t,i){t.exports=function RotateAround(t,i,r,o){var a=Math.cos(o),h=Math.sin(o),l=t.x-i,u=t.y-r;return t.x=l*a-u*h+i,t.y=l*h+u*a+r,t}},function(t,i,r){var o=r(310),a=r(311),h={mask:null,setMask:function setMask(t){return this.mask=t,this},clearMask:function clearMask(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function createBitmapMask(t){return void 0===t&&(this.texture||this.shader)&&(t=this),new o(this.scene,t)},createGeometryMask:function createGeometryMask(t){return void 0===t&&"Graphics"===this.type&&(t=this),new a(this.scene,t)}};t.exports=h},function(t,i,r){var o=r(0),a=r(22),h=r(91),l=new o({initialize:function BitmapMask(t,i){var r=t.sys.renderer;this.renderer=r,this.bitmapMask=i,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),t.sys.game.events.on(a.CONTEXT_RESTORED,this.createMask,this),r&&r.on(h.RESIZE,this.createMask,this)},createMask:function createMask(){var t=this.renderer;if(t&&t.gl){this.mainTexture&&this.clearMask();var i=t.width,r=t.height,o=0==(i&i-1)&&0==(r&r-1),a=t.gl,h=o?a.REPEAT:a.CLAMP_TO_EDGE,l=a.LINEAR;this.mainTexture=t.createTexture2D(0,l,l,h,h,a.RGBA,null,i,r),this.maskTexture=t.createTexture2D(0,l,l,h,h,a.RGBA,null,i,r),this.mainFramebuffer=t.createFramebuffer(i,r,this.mainTexture,!0),this.maskFramebuffer=t.createFramebuffer(i,r,this.maskTexture,!0)}},clearMask:function clearMask(){var t=this.renderer;t&&t.gl&&this.mainTexture&&(t.deleteTexture(this.mainTexture),t.deleteTexture(this.maskTexture),t.deleteFramebuffer(this.mainFramebuffer),t.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function setBitmap(t){this.bitmapMask=t},preRenderWebGL:function preRenderWebGL(t,i,r){t.pipelines.BITMAPMASK_PIPELINE.beginMask(this,i,r)},postRenderWebGL:function postRenderWebGL(t,i){t.pipelines.BITMAPMASK_PIPELINE.endMask(this,i)},preRenderCanvas:function preRenderCanvas(){},postRenderCanvas:function postRenderCanvas(){},destroy:function destroy(){this.clearMask(),this.renderer&&this.renderer.off(h.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});t.exports=l},function(t,i,r){var o=new(r(0))({initialize:function GeometryMask(t,i){this.geometryMask=i,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function setShape(t){return this.geometryMask=t,this},setInvertAlpha:function setInvertAlpha(t){return void 0===t&&(t=!0),this.invertAlpha=t,this},preRenderWebGL:function preRenderWebGL(t,i,r){var o=t.gl;t.flush(),0===t.maskStack.length&&(o.enable(o.STENCIL_TEST),o.clear(o.STENCIL_BUFFER_BIT),t.maskCount=0),t.currentCameraMask.mask!==this&&(t.currentMask.mask=this),t.maskStack.push({mask:this,camera:r}),this.applyStencil(t,r,!0),t.maskCount++},applyStencil:function applyStencil(t,i,r){var o=t.gl,a=this.geometryMask,h=t.maskCount;o.colorMask(!1,!1,!1,!1),r?(o.stencilFunc(o.EQUAL,h,255),o.stencilOp(o.KEEP,o.KEEP,o.INCR)):(o.stencilFunc(o.EQUAL,h+1,255),o.stencilOp(o.KEEP,o.KEEP,o.DECR)),a.renderWebGL(t,a,i),t.flush(),o.colorMask(!0,!0,!0,!0),o.stencilOp(o.KEEP,o.KEEP,o.KEEP),r?this.invertAlpha?o.stencilFunc(o.NOTEQUAL,h+1,255):o.stencilFunc(o.EQUAL,h+1,255):this.invertAlpha?o.stencilFunc(o.NOTEQUAL,h,255):o.stencilFunc(o.EQUAL,h,255)},postRenderWebGL:function postRenderWebGL(t){var i=t.gl;t.maskStack.pop(),t.maskCount--,t.flush();var r=t.currentMask;if(0===t.maskStack.length)r.mask=null,i.disable(i.STENCIL_TEST);else{var o=t.maskStack[t.maskStack.length-1];o.mask.applyStencil(t,o.camera,!1),t.currentCameraMask.mask!==o.mask?(r.mask=o.mask,r.camera=o.camera):r.mask=null}},preRenderCanvas:function preRenderCanvas(t,i,r){var o=this.geometryMask;t.currentContext.save(),o.renderCanvas(t,o,r,null,null,!0),t.currentContext.clip()},postRenderCanvas:function postRenderCanvas(t){t.currentContext.restore()},destroy:function destroy(){this.geometryMask=null}});t.exports=o},function(t,i){var r={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function setScrollFactor(t,i){return void 0===i&&(i=t),this.scrollFactorX=t,this.scrollFactorY=i,this}};t.exports=r},function(t,i,r){var o=r(14),a=r(25),h=r(177),l=r(269),u=r(270),c=r(3),d={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function get(){return(this._scaleX+this._scaleY)/2},set:function set(t){this._scaleX=t,this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function get(){return this._scaleX},set:function set(t){this._scaleX=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleY:{get:function get(){return this._scaleY},set:function set(t){this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},angle:{get:function get(){return u(this._rotation*o.RAD_TO_DEG)},set:function set(t){this.rotation=u(t)*o.DEG_TO_RAD}},rotation:{get:function get(){return this._rotation},set:function set(t){this._rotation=l(t)}},setPosition:function setPosition(t,i,r,o){return void 0===t&&(t=0),void 0===i&&(i=t),void 0===r&&(r=0),void 0===o&&(o=0),this.x=t,this.y=i,this.z=r,this.w=o,this},copyPosition:function copyPosition(t){return void 0!==t.x&&(this.x=t.x),void 0!==t.y&&(this.y=t.y),void 0!==t.z&&(this.z=t.z),void 0!==t.w&&(this.w=t.w),this},setRandomPosition:function setRandomPosition(t,i,r,o){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=this.scene.sys.scale.width),void 0===o&&(o=this.scene.sys.scale.height),this.x=t+Math.random()*r,this.y=i+Math.random()*o,this},setRotation:function setRotation(t){return void 0===t&&(t=0),this.rotation=t,this},setAngle:function setAngle(t){return void 0===t&&(t=0),this.angle=t,this},setScale:function setScale(t,i){return void 0===t&&(t=1),void 0===i&&(i=t),this.scaleX=t,this.scaleY=i,this},setX:function setX(t){return void 0===t&&(t=0),this.x=t,this},setY:function setY(t){return void 0===t&&(t=0),this.y=t,this},setZ:function setZ(t){return void 0===t&&(t=0),this.z=t,this},setW:function setW(t){return void 0===t&&(t=0),this.w=t,this},getLocalTransformMatrix:function getLocalTransformMatrix(t){return void 0===t&&(t=new a),t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function getWorldTransformMatrix(t,i){void 0===t&&(t=new a),void 0===i&&(i=new a);var r=this.parentContainer;if(!r)return this.getLocalTransformMatrix(t);for(t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);r;)i.applyITRS(r.x,r.y,r._rotation,r._scaleX,r._scaleY),i.multiply(t,t),r=r.parentContainer;return t},getLocalPoint:function getLocalPoint(t,i,r,o){r||(r=new c),o||(o=this.scene.sys.cameras.main);var a=o.scrollX,l=o.scrollY,u=t+a*this.scrollFactorX-a,d=i+l*this.scrollFactorY-l;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(u,d,r):h(u,d,this.x,this.y,this.rotation,this.scaleX,this.scaleY,r),this._originComponent&&(r.x+=this._displayOriginX,r.y+=this._displayOriginY),r},getParentRotation:function getParentRotation(){for(var t=0,i=this.parentContainer;i;)t+=i.rotation,i=i.parentContainer;return t}};t.exports=d},function(t,i){var r={_visible:!0,visible:{get:function get(){return this._visible},set:function set(t){t?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function setVisible(t){return this.visible=t,this}};t.exports=r},function(t,i,r){t.exports={CHANGE_DATA:r(638),CHANGE_DATA_KEY:r(639),DESTROY:r(640),REMOVE_DATA:r(641),SET_DATA:r(642)}},function(t,i,r){var o=r(130),a=r(4);t.exports=function MarchingAnts(t,i,r,h){if(void 0===h&&(h=[]),!i&&!r)return h;i?r=Math.round(o(t)/i):i=o(t)/r;for(var l=t.x,u=t.y,c=0,d=0;d<r;d++)switch(h.push(new a(l,u)),c){case 0:(l+=i)>=t.right&&(c=1,u+=l-t.right,l=t.right);break;case 1:(u+=i)>=t.bottom&&(c=2,l-=u-t.bottom,u=t.bottom);break;case 2:(l-=i)<=t.left&&(c=3,u-=t.left-l,l=t.left);break;case 3:(u-=i)<=t.top&&(c=0,u=t.top)}return h}},function(t,i){t.exports=function BresenhamPoints(t,i,r){void 0===i&&(i=1),void 0===r&&(r=[]);var o=Math.round(t.x1),a=Math.round(t.y1),h=Math.round(t.x2),l=Math.round(t.y2),u=Math.abs(h-o),c=Math.abs(l-a),d=o<h?1:-1,p=a<l?1:-1,g=u-c;r.push({x:o,y:a});for(var v=1;o!==h||a!==l;){var m=g<<1;m>-c&&(g-=c,o+=d),m<u&&(g+=u,a+=p),v%i==0&&r.push({x:o,y:a}),v++}return r}},function(t,i){t.exports=function FindClosestInSorted(t,i,r){if(!i.length)return NaN;if(1===i.length)return i[0];var o,a,h=1;if(r){if(t<i[0][r])return i[0];for(;i[h][r]<t;)h++}else for(;i[h]<t;)h++;return h>i.length&&(h=i.length),r?(o=i[h-1][r],(a=i[h][r])-t<=t-o?i[h]:i[h-1]):(o=i[h-1],(a=i[h])-t<=t-o?a:o)}},function(t,i,r){var o=new(r(0))({initialize:function AnimationFrame(t,i,r,o,a){void 0===a&&(a=!1),this.textureKey=t,this.textureFrame=i,this.index=r,this.frame=o,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=a},toJSON:function toJSON(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function destroy(){this.frame=void 0}});t.exports=o},function(t,i){t.exports=function SortByDigits(t){var i=/\D/g;return t.sort((function(t,r){return parseInt(t.replace(i,""),10)-parseInt(r.replace(i,""),10)})),t}},function(t,i,r){var o=r(185),a=r(0),h=r(102),l=r(9),u=r(132),c=r(22),d=r(2),p=r(6),g=r(186),v=r(322),m=new a({Extends:l,initialize:function AnimationManager(t){l.call(this),this.game=t,this.textureManager=null,this.globalTimeScale=1,this.anims=new h,this.mixes=new h,this.paused=!1,this.name="AnimationManager",t.events.once(c.BOOT,this.boot,this)},boot:function boot(){this.textureManager=this.game.textures,this.game.events.once(c.DESTROY,this.destroy,this)},addMix:function addMix(t,i,r){var o=this.anims,a=this.mixes,h="string"==typeof t?t:t.key,l="string"==typeof i?i:i.key;if(o.has(h)&&o.has(l)){var u=a.get(h);u||(u={}),u[l]=r,a.set(h,u)}return this},removeMix:function removeMix(t,i){var r=this.mixes,o="string"==typeof t?t:t.key,a=r.get(o);if(a)if(i){var h="string"==typeof i?i:i.key;a.hasOwnProperty(h)&&delete a[h]}else i||r.delete(o);return this},getMix:function getMix(t,i){var r=this.mixes,o="string"==typeof t?t:t.key,a="string"==typeof i?i:i.key,h=r.get(o);return h&&h.hasOwnProperty(a)?h[a]:0},add:function add(t,i){return this.anims.has(t)?(console.warn("Animation key exists: "+t),this):(i.key=t,this.anims.set(t,i),this.emit(u.ADD_ANIMATION,t,i),this)},exists:function exists(t){return this.anims.has(t)},createFromAseprite:function createFromAseprite(t,i){var r=[],o=this.game.cache.json.get(t);if(!o)return r;var a=this,h=p(o,"meta",null),l=p(o,"frames",null);return h&&l&&p(h,"frameTags",[]).forEach((function(o){var h=[],u=d(o,"name",null),c=d(o,"from",0),p=d(o,"to",0),g=d(o,"direction","forward");if(u&&(!i||i&&i.indexOf(u)>-1)){for(var v=[],m=Number.MAX_SAFE_INTEGER,y=c;y<=p;y++){var T=y.toString(),S=l[T];if(S){var w=d(S,"duration",Number.MAX_SAFE_INTEGER);w<m&&(m=w),v.push({frame:T,duration:w})}}v.forEach((function(i){h.push({key:t,frame:i.frame,duration:m-i.duration})}));var b=m*h.length;"reverse"===g&&(h=h.reverse());var C={key:u,frames:h,duration:b,yoyo:"pingpong"===g},A=a.create(C);A&&r.push(A)}})),r},create:function create(t){var i=t.key,r=!1;return i&&((r=this.get(i))||(r=new o(this,i,t),this.anims.set(i,r),this.emit(u.ADD_ANIMATION,i,r))),r},fromJSON:function fromJSON(t,i){void 0===i&&(i=!1),i&&this.anims.clear(),"string"==typeof t&&(t=JSON.parse(t));var r=[];if(t.hasOwnProperty("anims")&&Array.isArray(t.anims)){for(var o=0;o<t.anims.length;o++)r.push(this.create(t.anims[o]));t.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=t.globalTimeScale)}else t.hasOwnProperty("key")&&"frame"===t.type&&r.push(this.create(t));return r},generateFrameNames:function generateFrameNames(t,i){var r,o=p(i,"prefix",""),a=p(i,"start",0),h=p(i,"end",0),l=p(i,"suffix",""),u=p(i,"zeroPad",0),c=p(i,"outputArray",[]),d=p(i,"frames",!1),m=this.textureManager.get(t);if(!m)return c;if(i)for(d||(d=v(a,h)),r=0;r<d.length;r++){var y=o+g(d[r],u,"0",1)+l;m.has(y)?c.push({key:t,frame:y}):console.warn("generateFrameNames: Frame missing: "+y+" from texture: "+t)}else for(d=m.getFrameNames(),r=0;r<d.length;r++)c.push({key:t,frame:d[r]});return c},generateFrameNumbers:function generateFrameNumbers(t,i){var r=p(i,"start",0),o=p(i,"end",-1),a=p(i,"first",!1),h=p(i,"outputArray",[]),l=p(i,"frames",!1),u=this.textureManager.get(t);if(!u)return h;a&&u.has(a)&&h.push({key:t,frame:a}),l||(-1===o&&(o=u.frameTotal-2),l=v(r,o));for(var c=0;c<l.length;c++)u.has(l[c])?h.push({key:t,frame:l[c]}):console.warn("generateFrameNumbers: Frame "+c+" missing from texture: "+t);return h},get:function get(t){return this.anims.get(t)},pauseAll:function pauseAll(){return this.paused||(this.paused=!0,this.emit(u.PAUSE_ALL)),this},play:function play(t,i){Array.isArray(i)||(i=[i]);for(var r=0;r<i.length;r++)i[r].anims.play(t);return this},staggerPlay:function staggerPlay(t,i,r,o){void 0===r&&(r=0),void 0===o&&(o=!0),Array.isArray(i)||(i=[i]);var a=i.length;o||a--;for(var h=0;h<i.length;h++){var l=r<0?Math.abs(r)*(a-h):r*h;i[h].anims.playAfterDelay(t,l)}return this},remove:function remove(t){var i=this.get(t);return i&&(this.emit(u.REMOVE_ANIMATION,t,i),this.anims.delete(t),this.removeMix(t)),i},resumeAll:function resumeAll(){return this.paused&&(this.paused=!1,this.emit(u.RESUME_ALL)),this},toJSON:function toJSON(t){var i={anims:[],globalTimeScale:this.globalTimeScale};return void 0!==t&&""!==t?i.anims.push(this.anims.get(t).toJSON()):this.anims.each((function(t,r){i.anims.push(r.toJSON())})),i},destroy:function destroy(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});t.exports=m},function(t,i){t.exports=function NumberArray(t,i,r,o){var a,h=[],l=!1;if((r||o)&&(l=!0,r||(r=""),o||(o="")),i<t)for(a=t;a>=i;a--)l?h.push(r+a.toString()+o):h.push(a);else for(a=t;a<=i;a++)l?h.push(r+a.toString()+o):h.push(a);return h}},function(t,i,r){var o=r(0),a=r(102),h=r(9),l=r(324),u=new o({initialize:function BaseCache(){this.entries=new a,this.events=new h},add:function add(t,i){return this.entries.set(t,i),this.events.emit(l.ADD,this,t,i),this},has:function has(t){return this.entries.has(t)},exists:function exists(t){return this.entries.has(t)},get:function get(t){return this.entries.get(t)},remove:function remove(t){var i=this.get(t);return i&&(this.entries.delete(t),this.events.emit(l.REMOVE,this,t,i.data)),this},getKeys:function getKeys(){return this.entries.keys()},destroy:function destroy(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});t.exports=u},function(t,i,r){t.exports={ADD:r(736),REMOVE:r(737)}},function(t,i,r){var o=r(323),a=r(0),h=r(22),l=new a({initialize:function CacheManager(t){this.game=t,this.binary=new o,this.bitmapFont=new o,this.json=new o,this.physics=new o,this.shader=new o,this.audio=new o,this.video=new o,this.text=new o,this.html=new o,this.obj=new o,this.tilemap=new o,this.xml=new o,this.custom={},this.game.events.once(h.DESTROY,this.destroy,this)},addCustom:function addCustom(t){return this.custom.hasOwnProperty(t)||(this.custom[t]=new o),this.custom[t]},destroy:function destroy(){for(var t=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],i=0;i<t.length;i++)this[t[i]].destroy(),this[t[i]]=null;for(var r in this.custom)this.custom[r].destroy();this.custom=null,this.game=null}});t.exports=l},function(t,i,r){var o=r(133),a=r(190),h=r(18),l=r(0),u=r(11),c=r(333),d=r(37),p=r(135),g=r(10),v=r(3),m=new l({Extends:o,Mixins:[u.Flip,u.Tint,u.Pipeline],initialize:function Camera(t,i,r,a){o.call(this,t,i,r,a),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new c.Fade(this),this.flashEffect=new c.Flash(this),this.shakeEffect=new c.Shake(this),this.panEffect=new c.Pan(this),this.rotateToEffect=new c.RotateTo(this),this.zoomEffect=new c.Zoom(this),this.lerp=new v(1,1),this.followOffset=new v,this.deadzone=null,this._follow=null},setDeadzone:function setDeadzone(t,i){if(void 0===t)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=t,this.deadzone.height=i):this.deadzone=new g(0,0,t,i),this._follow){var r=this.width/2,o=this.height/2,h=this._follow.x-this.followOffset.x,l=this._follow.y-this.followOffset.y;this.midPoint.set(h,l),this.scrollX=h-r,this.scrollY=l-o}a(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function fadeIn(t,i,r,o,a,h){return this.fadeEffect.start(!1,t,i,r,o,!0,a,h)},fadeOut:function fadeOut(t,i,r,o,a,h){return this.fadeEffect.start(!0,t,i,r,o,!0,a,h)},fadeFrom:function fadeFrom(t,i,r,o,a,h,l){return this.fadeEffect.start(!1,t,i,r,o,a,h,l)},fade:function fade(t,i,r,o,a,h,l){return this.fadeEffect.start(!0,t,i,r,o,a,h,l)},flash:function flash(t,i,r,o,a,h,l){return this.flashEffect.start(t,i,r,o,a,h,l)},shake:function shake(t,i,r,o,a){return this.shakeEffect.start(t,i,r,o,a)},pan:function pan(t,i,r,o,a,h,l){return this.panEffect.start(t,i,r,o,a,h,l)},rotateTo:function rotateTo(t,i,r,o,a,h,l){return this.rotateToEffect.start(t,i,r,o,a,h,l)},zoomTo:function zoomTo(t,i,r,o,a,h){return this.zoomEffect.start(t,i,r,o,a,h)},preRender:function preRender(){this.renderList.length=0;var t=this.width,i=this.height,r=.5*t,o=.5*i,h=this.zoom,l=this.matrix,u=t*this.originX,c=i*this.originY,g=this._follow,v=this.deadzone,m=this.scrollX,y=this.scrollY;v&&a(v,this.midPoint.x,this.midPoint.y);var T=!1;if(g&&!this.panEffect.isRunning){var S=g.x-this.followOffset.x,w=g.y-this.followOffset.y;v?(S<v.x?m=p(m,m-(v.x-S),this.lerp.x):S>v.right&&(m=p(m,m+(S-v.right),this.lerp.x)),w<v.y?y=p(y,y-(v.y-w),this.lerp.y):w>v.bottom&&(y=p(y,y+(w-v.bottom),this.lerp.y))):(m=p(m,S-u,this.lerp.x),y=p(y,w-c,this.lerp.y)),T=!0}this.useBounds&&(m=this.clampX(m),y=this.clampY(y)),this.roundPixels&&(u=Math.round(u),c=Math.round(c),m=Math.round(m),y=Math.round(y)),this.scrollX=m,this.scrollY=y;var b=m+r,C=y+o;this.midPoint.set(b,C);var A=t/h,E=i/h,M=b-A/2,_=C-E/2;this.roundPixels&&(M=Math.round(M),_=Math.round(_)),this.worldView.setTo(M,_,A,E),l.applyITRS(this.x+u,this.y+c,this.rotation,h,h),l.translate(-u,-c),this.shakeEffect.preRender(),T&&this.emit(d.FOLLOW_UPDATE,this,g)},setLerp:function setLerp(t,i){return void 0===t&&(t=1),void 0===i&&(i=t),this.lerp.set(t,i),this},setFollowOffset:function setFollowOffset(t,i){return void 0===t&&(t=0),void 0===i&&(i=0),this.followOffset.set(t,i),this},startFollow:function startFollow(t,i,r,o,a,l){void 0===i&&(i=!1),void 0===r&&(r=1),void 0===o&&(o=r),void 0===a&&(a=0),void 0===l&&(l=a),this._follow=t,this.roundPixels=i,r=h(r,0,1),o=h(o,0,1),this.lerp.set(r,o),this.followOffset.set(a,l);var u=this.width/2,c=this.height/2,d=t.x-a,p=t.y-l;return this.midPoint.set(d,p),this.scrollX=d-u,this.scrollY=p-c,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function stopFollow(){return this._follow=null,this},resetFX:function resetFX(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function update(t,i){this.visible&&(this.rotateToEffect.update(t,i),this.panEffect.update(t,i),this.zoomEffect.update(t,i),this.shakeEffect.update(t,i),this.flashEffect.update(t,i),this.fadeEffect.update(t,i))},destroy:function destroy(){this.resetFX(),o.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});t.exports=m},function(t,i,r){var o=r(38);t.exports=function HexStringToColor(t){var i=new o;t=t.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,i,r,o){return i+i+r+r+o+o}));var r=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(r){var a=parseInt(r[1],16),h=parseInt(r[2],16),l=parseInt(r[3],16);i.setTo(a,h,l)}return i}},function(t,i){t.exports=function GetColor32(t,i,r,o){return o<<24|t<<16|i<<8|r}},function(t,i){t.exports=function RGBToHSV(t,i,r,o){void 0===o&&(o={h:0,s:0,v:0}),t/=255,i/=255,r/=255;var a=Math.min(t,i,r),h=Math.max(t,i,r),l=h-a,u=0,c=0===h?0:l/h,d=h;return h!==a&&(h===t?u=(i-r)/l+(i<r?6:0):h===i?u=(r-t)/l+2:h===r&&(u=(t-i)/l+4),u/=6),o.hasOwnProperty("_h")?(o._h=u,o._s=c,o._v=d):(o.h=u,o.s=c,o.v=d),o}},function(t,i){t.exports=function IntegerToRGB(t){return t>16777215?{a:t>>>24,r:t>>16&255,g:t>>8&255,b:255&t}:{a:255,r:t>>16&255,g:t>>8&255,b:255&t}}},function(t,i,r){var o=r(38);t.exports=function ObjectToColor(t){return new o(t.r,t.g,t.b,t.a)}},function(t,i,r){var o=r(38);t.exports=function RGBStringToColor(t){var i=new o,r=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(t.toLowerCase());if(r){var a=parseInt(r[1],10),h=parseInt(r[2],10),l=parseInt(r[3],10),u=void 0!==r[4]?parseFloat(r[4]):1;i.setTo(a,h,l,255*u)}return i}},function(t,i,r){t.exports={Fade:r(761),Flash:r(762),Pan:r(763),Shake:r(796),RotateTo:r(797),Zoom:r(798)}},function(t,i,r){t.exports={In:r(764),Out:r(765),InOut:r(766)}},function(t,i,r){t.exports={In:r(767),Out:r(768),InOut:r(769)}},function(t,i,r){t.exports={In:r(770),Out:r(771),InOut:r(772)}},function(t,i,r){t.exports={In:r(773),Out:r(774),InOut:r(775)}},function(t,i,r){t.exports={In:r(776),Out:r(777),InOut:r(778)}},function(t,i,r){t.exports={In:r(779),Out:r(780),InOut:r(781)}},function(t,i,r){t.exports=r(782)},function(t,i,r){t.exports={In:r(783),Out:r(784),InOut:r(785)}},function(t,i,r){t.exports={In:r(786),Out:r(787),InOut:r(788)}},function(t,i,r){t.exports={In:r(789),Out:r(790),InOut:r(791)}},function(t,i,r){t.exports={In:r(792),Out:r(793),InOut:r(794)}},function(t,i,r){t.exports=r(795)},function(t,i,r){var o=r(0),a=r(33),h=r(347),l=r(2),u=r(6),c=r(7),d=r(193),p=r(1),g=r(197),v=r(187),m=new o({initialize:function Config(t){void 0===t&&(t={}),this.width=u(t,"width",1024),this.height=u(t,"height",768),this.zoom=u(t,"zoom",1),this.parent=u(t,"parent",void 0),this.scaleMode=u(t,"scaleMode",0),this.expandParent=u(t,"expandParent",!0),this.autoRound=u(t,"autoRound",!1),this.autoCenter=u(t,"autoCenter",0),this.resizeInterval=u(t,"resizeInterval",500),this.fullscreenTarget=u(t,"fullscreenTarget",null),this.minWidth=u(t,"minWidth",0),this.maxWidth=u(t,"maxWidth",0),this.minHeight=u(t,"minHeight",0),this.maxHeight=u(t,"maxHeight",0);var i=u(t,"scale",null);i&&(this.width=u(i,"width",this.width),this.height=u(i,"height",this.height),this.zoom=u(i,"zoom",this.zoom),this.parent=u(i,"parent",this.parent),this.scaleMode=u(i,"mode",this.scaleMode),this.expandParent=u(i,"expandParent",this.expandParent),this.autoRound=u(i,"autoRound",this.autoRound),this.autoCenter=u(i,"autoCenter",this.autoCenter),this.resizeInterval=u(i,"resizeInterval",this.resizeInterval),this.fullscreenTarget=u(i,"fullscreenTarget",this.fullscreenTarget),this.minWidth=u(i,"min.width",this.minWidth),this.maxWidth=u(i,"max.width",this.maxWidth),this.minHeight=u(i,"min.height",this.minHeight),this.maxHeight=u(i,"max.height",this.maxHeight)),this.renderType=u(t,"type",a.AUTO),this.canvas=u(t,"canvas",null),this.context=u(t,"context",null),this.canvasStyle=u(t,"canvasStyle",null),this.customEnvironment=u(t,"customEnvironment",!1),this.sceneConfig=u(t,"scene",null),this.seed=u(t,"seed",[(Date.now()*Math.random()).toString()]),d.RND=new d.RandomDataGenerator(this.seed),this.gameTitle=u(t,"title",""),this.gameURL=u(t,"url","https://phaser.io"),this.gameVersion=u(t,"version",""),this.autoFocus=u(t,"autoFocus",!0),this.domCreateContainer=u(t,"dom.createContainer",!1),this.domBehindCanvas=u(t,"dom.behindCanvas",!1),this.domPointerEvents=u(t,"dom.pointerEvents","none"),this.inputKeyboard=u(t,"input.keyboard",!0),this.inputKeyboardEventTarget=u(t,"input.keyboard.target",window),this.inputKeyboardCapture=u(t,"input.keyboard.capture",[]),this.inputMouse=u(t,"input.mouse",!0),this.inputMouseEventTarget=u(t,"input.mouse.target",null),this.inputMousePreventDefaultDown=u(t,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=u(t,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=u(t,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=u(t,"input.mouse.preventDefaultWheel",!0),this.inputTouch=u(t,"input.touch",h.input.touch),this.inputTouchEventTarget=u(t,"input.touch.target",null),this.inputTouchCapture=u(t,"input.touch.capture",!0),this.inputActivePointers=u(t,"input.activePointers",1),this.inputSmoothFactor=u(t,"input.smoothFactor",0),this.inputWindowEvents=u(t,"input.windowEvents",!0),this.inputGamepad=u(t,"input.gamepad",!1),this.inputGamepadEventTarget=u(t,"input.gamepad.target",window),this.disableContextMenu=u(t,"disableContextMenu",!1),this.audio=u(t,"audio",{}),this.hideBanner=!1===u(t,"banner",null),this.hidePhaser=u(t,"banner.hidePhaser",!1),this.bannerTextColor=u(t,"banner.text","#ffffff"),this.bannerBackgroundColor=u(t,"banner.background",["#ff0000","#ffff00","#00ff00","#00ffff","#000000"]),""===this.gameTitle&&this.hidePhaser&&(this.hideBanner=!0),this.fps=u(t,"fps",null);var r=u(t,"render",t);this.pipeline=u(r,"pipeline",null),this.antialias=u(r,"antialias",!0),this.antialiasGL=u(r,"antialiasGL",!0),this.mipmapFilter=u(r,"mipmapFilter","LINEAR"),this.desynchronized=u(r,"desynchronized",!1),this.roundPixels=u(r,"roundPixels",!1),this.pixelArt=u(r,"pixelArt",1!==this.zoom),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=u(r,"transparent",!1),this.clearBeforeRender=u(r,"clearBeforeRender",!0),this.preserveDrawingBuffer=u(r,"preserveDrawingBuffer",!1),this.premultipliedAlpha=u(r,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=u(r,"failIfMajorPerformanceCaveat",!1),this.powerPreference=u(r,"powerPreference","default"),this.batchSize=u(r,"batchSize",4096),this.maxTextures=u(r,"maxTextures",-1),this.maxLights=u(r,"maxLights",10);var o=u(t,"backgroundColor",0);this.backgroundColor=v(o),this.transparent&&(this.backgroundColor=v(0),this.backgroundColor.alpha=0),this.preBoot=u(t,"callbacks.preBoot",p),this.postBoot=u(t,"callbacks.postBoot",p),this.physics=u(t,"physics",{}),this.defaultPhysicsSystem=u(this.physics,"default",!1),this.loaderBaseURL=u(t,"loader.baseURL",""),this.loaderPath=u(t,"loader.path","");var m=h.os.android?6:32;this.loaderMaxParallelDownloads=u(t,"loader.maxParallelDownloads",m),this.loaderCrossOrigin=u(t,"loader.crossOrigin",void 0),this.loaderResponseType=u(t,"loader.responseType",""),this.loaderAsync=u(t,"loader.async",!0),this.loaderUser=u(t,"loader.user",""),this.loaderPassword=u(t,"loader.password",""),this.loaderTimeout=u(t,"loader.timeout",0),this.loaderWithCredentials=u(t,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var y=u(t,"plugins",null),T=g.DefaultScene;y&&(Array.isArray(y)?this.defaultPlugins=y:c(y)&&(this.installGlobalPlugins=l(y,"global",[]),this.installScenePlugins=l(y,"scene",[]),Array.isArray(y.default)?T=y.default:Array.isArray(y.defaultMerge)&&(T=T.concat(y.defaultMerge)))),this.defaultPlugins=T;var S="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=u(t,"images.default",S+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=u(t,"images.missing",S+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=u(t,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=a.WEBGL:window.FORCE_CANVAS&&(this.renderType=a.CANVAS))}});t.exports=m},function(t,i,r){t.exports={os:r(105),browser:r(136),features:r(191),input:r(808),audio:r(809),video:r(810),fullscreen:r(811),canvasFeatures:r(348)}},function(t,i,r){var o=r(31),a={supportInverseAlpha:!1,supportNewBlendModes:!1};t.exports=function init(){return"function"!=typeof importScripts&&void 0!==document&&(a.supportNewBlendModes=function checkBlendMode(){var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",i="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",r=new Image;return r.onload=function(){var h=new Image;h.onload=function(){var t=o.create(h,6,1).getContext("2d");if(t.globalCompositeOperation="multiply",t.drawImage(r,0,0),t.drawImage(h,2,0),!t.getImageData(2,0,1,1))return!1;var i=t.getImageData(2,0,1,1).data;o.remove(h),a.supportNewBlendModes=255===i[0]&&0===i[1]&&0===i[2]},h.src=t+"/wCKxvRF"+i},r.src=t+"AP804Oa6"+i,!1}(),a.supportInverseAlpha=function checkInverseAlpha(){var t=o.create(this,2,1).getContext("2d");t.fillStyle="rgba(10, 20, 30, 0.5)",t.fillRect(0,0,1,1);var i=t.getImageData(0,0,1,1);if(null===i)return!1;t.putImageData(i,1,0);var r=t.getImageData(1,0,1,1);return r.data[0]===i.data[0]&&r.data[1]===i.data[1]&&r.data[2]===i.data[2]&&r.data[3]===i.data[3]}()),a}()},function(t,i){t.exports=function Between(t,i,r,o){return Math.atan2(o-i,r-t)}},function(t,i){t.exports=function BetweenPoints(t,i){return Math.atan2(i.y-t.y,i.x-t.x)}},function(t,i){t.exports=function Normalize(t){return(t%=2*Math.PI)>=0?t:t+2*Math.PI}},function(t,i){t.exports=function DistanceBetweenPoints(t,i){var r=t.x-i.x,o=t.y-i.y;return Math.sqrt(r*r+o*o)}},function(t,i){t.exports=function DistanceSquared(t,i,r,o){var a=t-r,h=i-o;return a*a+h*h}},function(t,i){t.exports=function GreaterThan(t,i,r){return void 0===r&&(r=1e-4),t>i-r}},function(t,i){t.exports=function LessThan(t,i,r){return void 0===r&&(r=1e-4),t<i+r}},function(t,i,r){var o=r(357);t.exports=function Bernstein(t,i){return o(t)/o(i)/o(t-i)}},function(t,i){t.exports=function Factorial(t){if(0===t)return 1;for(var i=t;--t;)i*=t;return i}},function(t,i){t.exports=function CubicBezierInterpolation(t,i,r,o,a){return function P0(t,i){var r=1-t;return r*r*r*i}(t,i)+function P1(t,i){var r=1-t;return 3*r*r*t*i}(t,r)+function P2(t,i){return 3*(1-t)*t*t*i}(t,o)+function P3(t,i){return t*t*t*i}(t,a)}},function(t,i){t.exports=function QuadraticBezierInterpolation(t,i,r,o){return function P0(t,i){var r=1-t;return r*r*i}(t,i)+function P1(t,i){return 2*(1-t)*t*i}(t,r)+function P2(t,i){return t*t*i}(t,o)}},function(t,i,r){var o=r(184);t.exports=function SmoothStepInterpolation(t,i,r){return i+(r-i)*o(t,0,1)}},function(t,i){t.exports=function GetPowerOfTwo(t){var i=Math.log(t)/.6931471805599453;return 1<<Math.ceil(i)}},function(t,i){t.exports=function Rotate(t,i){var r=t.x,o=t.y;return t.x=r*Math.cos(i)-o*Math.sin(i),t.y=r*Math.sin(i)+o*Math.cos(i),t}},function(t,i){t.exports=function RoundAwayFromZero(t){return t>0?Math.ceil(t):Math.floor(t)}},function(t,i,r){var o=new(r(0))({initialize:function Matrix3(t){this.val=new Float32Array(9),t?this.copy(t):this.identity()},clone:function clone(){return new o(this)},set:function set(t){return this.copy(t)},copy:function copy(t){var i=this.val,r=t.val;return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],this},fromMat4:function fromMat4(t){var i=t.val,r=this.val;return r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[4],r[4]=i[5],r[5]=i[6],r[6]=i[8],r[7]=i[9],r[8]=i[10],this},fromArray:function fromArray(t){var i=this.val;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],this},identity:function identity(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},transpose:function transpose(){var t=this.val,i=t[1],r=t[2],o=t[5];return t[1]=t[3],t[2]=t[6],t[3]=i,t[5]=t[7],t[6]=r,t[7]=o,this},invert:function invert(){var t=this.val,i=t[0],r=t[1],o=t[2],a=t[3],h=t[4],l=t[5],u=t[6],c=t[7],d=t[8],p=d*h-l*c,g=-d*a+l*u,v=c*a-h*u,m=i*p+r*g+o*v;return m?(m=1/m,t[0]=p*m,t[1]=(-d*r+o*c)*m,t[2]=(l*r-o*h)*m,t[3]=g*m,t[4]=(d*i-o*u)*m,t[5]=(-l*i+o*a)*m,t[6]=v*m,t[7]=(-c*i+r*u)*m,t[8]=(h*i-r*a)*m,this):null},adjoint:function adjoint(){var t=this.val,i=t[0],r=t[1],o=t[2],a=t[3],h=t[4],l=t[5],u=t[6],c=t[7],d=t[8];return t[0]=h*d-l*c,t[1]=o*c-r*d,t[2]=r*l-o*h,t[3]=l*u-a*d,t[4]=i*d-o*u,t[5]=o*a-i*l,t[6]=a*c-h*u,t[7]=r*u-i*c,t[8]=i*h-r*a,this},determinant:function determinant(){var t=this.val,i=t[0],r=t[1],o=t[2],a=t[3],h=t[4],l=t[5],u=t[6],c=t[7],d=t[8];return i*(d*h-l*c)+r*(-d*a+l*u)+o*(c*a-h*u)},multiply:function multiply(t){var i=this.val,r=i[0],o=i[1],a=i[2],h=i[3],l=i[4],u=i[5],c=i[6],d=i[7],p=i[8],g=t.val,v=g[0],m=g[1],y=g[2],T=g[3],S=g[4],w=g[5],b=g[6],C=g[7],A=g[8];return i[0]=v*r+m*h+y*c,i[1]=v*o+m*l+y*d,i[2]=v*a+m*u+y*p,i[3]=T*r+S*h+w*c,i[4]=T*o+S*l+w*d,i[5]=T*a+S*u+w*p,i[6]=b*r+C*h+A*c,i[7]=b*o+C*l+A*d,i[8]=b*a+C*u+A*p,this},translate:function translate(t){var i=this.val,r=t.x,o=t.y;return i[6]=r*i[0]+o*i[3]+i[6],i[7]=r*i[1]+o*i[4]+i[7],i[8]=r*i[2]+o*i[5]+i[8],this},rotate:function rotate(t){var i=this.val,r=i[0],o=i[1],a=i[2],h=i[3],l=i[4],u=i[5],c=Math.sin(t),d=Math.cos(t);return i[0]=d*r+c*h,i[1]=d*o+c*l,i[2]=d*a+c*u,i[3]=d*h-c*r,i[4]=d*l-c*o,i[5]=d*u-c*a,this},scale:function scale(t){var i=this.val,r=t.x,o=t.y;return i[0]=r*i[0],i[1]=r*i[1],i[2]=r*i[2],i[3]=o*i[3],i[4]=o*i[4],i[5]=o*i[5],this},fromQuat:function fromQuat(t){var i=t.x,r=t.y,o=t.z,a=t.w,h=i+i,l=r+r,u=o+o,c=i*h,d=i*l,p=i*u,g=r*l,v=r*u,m=o*u,y=a*h,T=a*l,S=a*u,w=this.val;return w[0]=1-(g+m),w[3]=d+S,w[6]=p-T,w[1]=d-S,w[4]=1-(c+m),w[7]=v+y,w[2]=p+T,w[5]=v-y,w[8]=1-(c+g),this},normalFromMat4:function normalFromMat4(t){var i=t.val,r=this.val,o=i[0],a=i[1],h=i[2],l=i[3],u=i[4],c=i[5],d=i[6],p=i[7],g=i[8],v=i[9],m=i[10],y=i[11],T=i[12],S=i[13],w=i[14],b=i[15],C=o*c-a*u,A=o*d-h*u,E=o*p-l*u,M=a*d-h*c,_=a*p-l*c,R=h*p-l*d,P=g*S-v*T,k=g*w-m*T,O=g*b-y*T,L=v*w-m*S,D=v*b-y*S,I=m*b-y*w,B=C*I-A*D+E*L+M*O-_*k+R*P;return B?(B=1/B,r[0]=(c*I-d*D+p*L)*B,r[1]=(d*O-u*I-p*k)*B,r[2]=(u*D-c*O+p*P)*B,r[3]=(h*D-a*I-l*L)*B,r[4]=(o*I-h*O+l*k)*B,r[5]=(a*O-o*D-l*P)*B,r[6]=(S*R-w*_+b*M)*B,r[7]=(w*E-T*R-b*A)*B,r[8]=(T*_-S*E+b*C)*B,this):null}});t.exports=o},function(t,i,r){var o=r(0),a=r(364),h=r(1),l=r(39),u=1e-6,c=new Int8Array([1,2,0]),d=new Float32Array([0,0,0]),p=new l(1,0,0),g=new l(0,1,0),v=new l,m=new a,y=new o({initialize:function Quaternion(t,i,r,o){this.onChangeCallback=h,this.set(t,i,r,o)},x:{get:function get(){return this._x},set:function set(t){this._x=t,this.onChangeCallback(this)}},y:{get:function get(){return this._y},set:function set(t){this._y=t,this.onChangeCallback(this)}},z:{get:function get(){return this._z},set:function set(t){this._z=t,this.onChangeCallback(this)}},w:{get:function get(){return this._w},set:function set(t){this._w=t,this.onChangeCallback(this)}},copy:function copy(t){return this.set(t)},set:function set(t,i,r,o,a){return void 0===a&&(a=!0),"object"===_typeof(t)?(this._x=t.x||0,this._y=t.y||0,this._z=t.z||0,this._w=t.w||0):(this._x=t||0,this._y=i||0,this._z=r||0,this._w=o||0),a&&this.onChangeCallback(this),this},add:function add(t){return this._x+=t.x,this._y+=t.y,this._z+=t.z,this._w+=t.w,this.onChangeCallback(this),this},subtract:function subtract(t){return this._x-=t.x,this._y-=t.y,this._z-=t.z,this._w-=t.w,this.onChangeCallback(this),this},scale:function scale(t){return this._x*=t,this._y*=t,this._z*=t,this._w*=t,this.onChangeCallback(this),this},length:function length(){var t=this.x,i=this.y,r=this.z,o=this.w;return Math.sqrt(t*t+i*i+r*r+o*o)},lengthSq:function lengthSq(){var t=this.x,i=this.y,r=this.z,o=this.w;return t*t+i*i+r*r+o*o},normalize:function normalize(){var t=this.x,i=this.y,r=this.z,o=this.w,a=t*t+i*i+r*r+o*o;return a>0&&(a=1/Math.sqrt(a),this._x=t*a,this._y=i*a,this._z=r*a,this._w=o*a),this.onChangeCallback(this),this},dot:function dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function lerp(t,i){void 0===i&&(i=0);var r=this.x,o=this.y,a=this.z,h=this.w;return this.set(r+i*(t.x-r),o+i*(t.y-o),a+i*(t.z-a),h+i*(t.w-h))},rotationTo:function rotationTo(t,i){var r=t.x*i.x+t.y*i.y+t.z*i.z;return r<-.999999?(v.copy(p).cross(t).length()<u&&v.copy(g).cross(t),v.normalize(),this.setAxisAngle(v,Math.PI)):r>.999999?this.set(0,0,0,1):(v.copy(t).cross(i),this._x=v.x,this._y=v.y,this._z=v.z,this._w=1+r,this.normalize())},setAxes:function setAxes(t,i,r){var o=m.val;return o[0]=i.x,o[3]=i.y,o[6]=i.z,o[1]=r.x,o[4]=r.y,o[7]=r.z,o[2]=-t.x,o[5]=-t.y,o[8]=-t.z,this.fromMat3(m).normalize()},identity:function identity(){return this.set(0,0,0,1)},setAxisAngle:function setAxisAngle(t,i){i*=.5;var r=Math.sin(i);return this.set(r*t.x,r*t.y,r*t.z,Math.cos(i))},multiply:function multiply(t){var i=this.x,r=this.y,o=this.z,a=this.w,h=t.x,l=t.y,u=t.z,c=t.w;return this.set(i*c+a*h+r*u-o*l,r*c+a*l+o*h-i*u,o*c+a*u+i*l-r*h,a*c-i*h-r*l-o*u)},slerp:function slerp(t,i){var r=this.x,o=this.y,a=this.z,h=this.w,l=t.x,c=t.y,d=t.z,p=t.w,g=r*l+o*c+a*d+h*p;g<0&&(g=-g,l=-l,c=-c,d=-d,p=-p);var v=1-i,m=i;if(1-g>u){var y=Math.acos(g),T=Math.sin(y);v=Math.sin((1-i)*y)/T,m=Math.sin(i*y)/T}return this.set(v*r+m*l,v*o+m*c,v*a+m*d,v*h+m*p)},invert:function invert(){var t=this.x,i=this.y,r=this.z,o=this.w,a=t*t+i*i+r*r+o*o,h=a?1/a:0;return this.set(-t*h,-i*h,-r*h,o*h)},conjugate:function conjugate(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function rotateX(t){t*=.5;var i=this.x,r=this.y,o=this.z,a=this.w,h=Math.sin(t),l=Math.cos(t);return this.set(i*l+a*h,r*l+o*h,o*l-r*h,a*l-i*h)},rotateY:function rotateY(t){t*=.5;var i=this.x,r=this.y,o=this.z,a=this.w,h=Math.sin(t),l=Math.cos(t);return this.set(i*l-o*h,r*l+a*h,o*l+i*h,a*l-r*h)},rotateZ:function rotateZ(t){t*=.5;var i=this.x,r=this.y,o=this.z,a=this.w,h=Math.sin(t),l=Math.cos(t);return this.set(i*l+r*h,r*l-i*h,o*l+a*h,a*l-o*h)},calculateW:function calculateW(){var t=this.x,i=this.y,r=this.z;return this.w=-Math.sqrt(1-t*t-i*i-r*r),this},setFromEuler:function setFromEuler(t,i){var r=t.x/2,o=t.y/2,a=t.z/2,h=Math.cos(r),l=Math.cos(o),u=Math.cos(a),c=Math.sin(r),d=Math.sin(o),p=Math.sin(a);switch(t.order){case"XYZ":this.set(c*l*u+h*d*p,h*d*u-c*l*p,h*l*p+c*d*u,h*l*u-c*d*p,i);break;case"YXZ":this.set(c*l*u+h*d*p,h*d*u-c*l*p,h*l*p-c*d*u,h*l*u+c*d*p,i);break;case"ZXY":this.set(c*l*u-h*d*p,h*d*u+c*l*p,h*l*p+c*d*u,h*l*u-c*d*p,i);break;case"ZYX":this.set(c*l*u-h*d*p,h*d*u+c*l*p,h*l*p-c*d*u,h*l*u+c*d*p,i);break;case"YZX":this.set(c*l*u+h*d*p,h*d*u+c*l*p,h*l*p-c*d*u,h*l*u-c*d*p,i);break;case"XZY":this.set(c*l*u-h*d*p,h*d*u-c*l*p,h*l*p+c*d*u,h*l*u+c*d*p,i)}return this},setFromRotationMatrix:function setFromRotationMatrix(t){var i,r=t.val,o=r[0],a=r[4],h=r[8],l=r[1],u=r[5],c=r[9],d=r[2],p=r[6],g=r[10],v=o+u+g;return v>0?(i=.5/Math.sqrt(v+1),this.set((p-c)*i,(h-d)*i,(l-a)*i,.25/i)):o>u&&o>g?(i=2*Math.sqrt(1+o-u-g),this.set(.25*i,(a+l)/i,(h+d)/i,(p-c)/i)):u>g?(i=2*Math.sqrt(1+u-o-g),this.set((a+l)/i,.25*i,(c+p)/i,(h-d)/i)):(i=2*Math.sqrt(1+g-o-u),this.set((h+d)/i,(c+p)/i,.25*i,(l-a)/i)),this},fromMat3:function fromMat3(t){var i,r=t.val,o=r[0]+r[4]+r[8];if(o>0)i=Math.sqrt(o+1),this.w=.5*i,i=.5/i,this._x=(r[7]-r[5])*i,this._y=(r[2]-r[6])*i,this._z=(r[3]-r[1])*i;else{var a=0;r[4]>r[0]&&(a=1),r[8]>r[3*a+a]&&(a=2);var h=c[a],l=c[h];i=Math.sqrt(r[3*a+a]-r[3*h+h]-r[3*l+l]+1),d[a]=.5*i,i=.5/i,d[h]=(r[3*h+a]+r[3*a+h])*i,d[l]=(r[3*l+a]+r[3*a+l])*i,this._x=d[0],this._y=d[1],this._z=d[2],this._w=(r[3*l+h]-r[3*h+l])*i}return this.onChangeCallback(this),this}});t.exports=y},function(t,i,r){var o=r(367),a=r(31),h=r(33),l=r(191);t.exports=function CreateRenderer(t){var i=t.config;if((i.customEnvironment||i.canvas)&&i.renderType===h.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!i.customEnvironment&&!i.canvas&&i.renderType!==h.HEADLESS)if(i.renderType===h.CANVAS||i.renderType!==h.CANVAS&&!l.webGL){if(!l.canvas)throw new Error("Cannot create Canvas or WebGL context, aborting.");i.renderType=h.CANVAS}else i.renderType=h.WEBGL;i.antialias||a.disableSmoothing();var u,c,d=t.scale.baseSize,p=d.width,g=d.height;i.canvas?(t.canvas=i.canvas,t.canvas.width=p,t.canvas.height=g):t.canvas=a.create(t,p,g,i.renderType),i.canvasStyle&&(t.canvas.style=i.canvasStyle),i.antialias||o.setCrisp(t.canvas),i.renderType!==h.HEADLESS&&(u=r(368),c=r(371),i.renderType===h.WEBGL?t.renderer=new c(t):(t.renderer=new u(t),t.context=t.renderer.gameContext))}},function(t,i){t.exports={setCrisp:function setCrisp(t){return["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"].forEach((function(i){t.style["image-rendering"]=i})),t.style.msInterpolationMode="nearest-neighbor",t},setBicubic:function setBicubic(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}}},function(t,i,r){var o=r(37),a=r(369),h=r(0),l=r(33),u=r(9),c=r(91),d=r(370),p=r(104),g=r(106),v=r(25),m=new h({Extends:u,initialize:function CanvasRenderer(t){u.call(this);var i=t.config;this.config={clearBeforeRender:i.clearBeforeRender,backgroundColor:i.backgroundColor,antialias:i.antialias,roundPixels:i.roundPixels},this.game=t,this.type=l.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=t.canvas;var r={alpha:t.config.transparent,desynchronized:t.config.desynchronized};this.gameContext=i.context?i.context:this.gameCanvas.getContext("2d",r),this.currentContext=this.gameContext,this.antialias=t.config.antialias,this.blendModes=d(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new v,this._tempMatrix2=new v,this._tempMatrix3=new v,this.isBooted=!1,this.init()},init:function init(){this.game.textures.once(g.READY,this.boot,this)},boot:function boot(){var t=this.game,i=t.scale.baseSize;this.width=i.width,this.height=i.height,this.isBooted=!0,t.scale.on(p.RESIZE,this.onResize,this),this.resize(i.width,i.height)},onResize:function onResize(t,i){i.width===this.width&&i.height===this.height||this.resize(i.width,i.height)},resize:function resize(t,i){this.width=t,this.height=i,this.emit(c.RESIZE,t,i)},resetTransform:function resetTransform(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function setBlendMode(t){return this.currentContext.globalCompositeOperation=t,this},setContext:function setContext(t){return this.currentContext=t||this.gameContext,this},setAlpha:function setAlpha(t){return this.currentContext.globalAlpha=t,this},preRender:function preRender(){var t=this.gameContext,i=this.config,r=this.width,o=this.height;t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),i.clearBeforeRender&&(t.clearRect(0,0,r,o),i.transparent||(t.fillStyle=i.backgroundColor.rgba,t.fillRect(0,0,r,o))),t.save(),this.drawCount=0,this.emit(c.PRE_RENDER)},render:function render(t,i,r){var a=i.length;this.emit(c.RENDER,t,r);var h=r.x,l=r.y,u=r.width,d=r.height,p=r.renderToTexture?r.context:t.sys.context;p.save(),this.game.scene.customViewports&&(p.beginPath(),p.rect(h,l,u,d),p.clip()),this.currentContext=p;var g=r.mask;g&&g.preRenderCanvas(this,null,r._maskCamera),r.transparent||(p.fillStyle=r.backgroundColor.rgba,p.fillRect(h,l,u,d)),p.globalAlpha=r.alpha,p.globalCompositeOperation="source-over",this.drawCount+=a,r.renderToTexture&&r.emit(o.PRE_RENDER,r),r.matrix.copyToContext(p);for(var v=0;v<a;v++){var m=i[v];m.mask&&m.mask.preRenderCanvas(this,m,r),m.renderCanvas(this,m,r),m.mask&&m.mask.postRenderCanvas(this,m,r)}p.setTransform(1,0,0,1,0,0),p.globalCompositeOperation="source-over",p.globalAlpha=1,r.flashEffect.postRenderCanvas(p),r.fadeEffect.postRenderCanvas(p),r.dirty=!1,g&&g.postRenderCanvas(this),p.restore(),r.renderToTexture&&(r.emit(o.POST_RENDER,r),r.renderToGame&&t.sys.context.drawImage(r.canvas,h,l))},postRender:function postRender(){this.gameContext.restore(),this.emit(c.POST_RENDER);var t=this.snapshotState;t.callback&&(a(this.gameCanvas,t),t.callback=null)},snapshotCanvas:function snapshotCanvas(t,i,r,o,h,l,u,c,d){void 0===r&&(r=!1),this.snapshotArea(o,h,l,u,i,c,d);var p=this.snapshotState;return p.getPixel=r,a(this.canvas,p),p.callback=null,this},snapshot:function snapshot(t,i,r){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,t,i,r)},snapshotArea:function snapshotArea(t,i,r,o,a,h,l){var u=this.snapshotState;return u.callback=a,u.type=h,u.encoder=l,u.getPixel=!1,u.x=t,u.y=i,u.width=Math.min(r,this.gameCanvas.width),u.height=Math.min(o,this.gameCanvas.height),this},snapshotPixel:function snapshotPixel(t,i,r){return this.snapshotArea(t,i,1,1,r),this.snapshotState.getPixel=!0,this},batchSprite:function batchSprite(t,i,r,o){var a=r.alpha*t.alpha;if(0!==a){var h=this.currentContext,l=this._tempMatrix1,u=this._tempMatrix2,c=i.canvasData,d=c.x,p=c.y,g=i.cutWidth,v=i.cutHeight,m=i.customPivot,y=i.source.resolution,T=t.displayOriginX,S=t.displayOriginY,w=-T+i.x,b=-S+i.y;if(t.isCropped){var C=t._crop;C.flipX===t.flipX&&C.flipY===t.flipY||i.updateCropUVs(C,t.flipX,t.flipY),g=C.cw,v=C.ch,d=C.cx,p=C.cy,w=-T+C.x,b=-S+C.y,t.flipX&&(w>=0?w=-(w+g):w<0&&(w=Math.abs(w)-g)),t.flipY&&(b>=0?b=-(b+v):b<0&&(b=Math.abs(b)-v))}var A=1,E=1;t.flipX&&(m||(w+=-i.realWidth+2*T),A=-1),t.flipY&&(m||(b+=-i.realHeight+2*S),E=-1),u.applyITRS(t.x,t.y,t.rotation,t.scaleX*A,t.scaleY*E),l.copyFrom(r.matrix),o?(l.multiplyWithOffset(o,-r.scrollX*t.scrollFactorX,-r.scrollY*t.scrollFactorY),u.e=t.x,u.f=t.y):(u.e-=r.scrollX*t.scrollFactorX,u.f-=r.scrollY*t.scrollFactorY),l.multiply(u),h.save(),l.setToContext(h),h.globalCompositeOperation=this.blendModes[t.blendMode],h.globalAlpha=a,h.imageSmoothingEnabled=!(!this.antialias||i.source.scaleMode),t.mask&&t.mask.preRenderCanvas(this,t,r),h.drawImage(i.source.image,d,p,g,v,w,b,g/y,v/y),t.mask&&t.mask.postRenderCanvas(this,t,r),h.restore()}},destroy:function destroy(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});t.exports=m},function(t,i,r){var o=r(31),a=r(38),h=r(2);t.exports=function CanvasSnapshot(t,i){var r=h(i,"callback"),l=h(i,"type","image/png"),u=h(i,"encoder",.92),c=Math.abs(Math.round(h(i,"x",0))),d=Math.abs(Math.round(h(i,"y",0))),p=h(i,"width",t.width),g=h(i,"height",t.height);if(h(i,"getPixel",!1)){var v=t.getContext("2d").getImageData(c,d,1,1).data;r.call(null,new a(v[0],v[1],v[2],v[3]/255))}else if(0!==c||0!==d||p!==t.width||g!==t.height){var m=o.createWebGL(this,p,g);m.getContext("2d").drawImage(t,c,d,p,g,0,0,p,g);var y=new Image;y.onerror=function(){r.call(null),o.remove(m)},y.onload=function(){r.call(null,y),o.remove(m)},y.src=m.toDataURL(l,u)}else{var T=new Image;T.onerror=function(){r.call(null)},T.onload=function(){r.call(null,T)},T.src=t.toDataURL(l,u)}}},function(t,i,r){var o=r(35),a=r(348);t.exports=function GetBlendModes(){var t=[],i=a.supportNewBlendModes,r="source-over";return t[o.NORMAL]=r,t[o.ADD]="lighter",t[o.MULTIPLY]=i?"multiply":r,t[o.SCREEN]=i?"screen":r,t[o.OVERLAY]=i?"overlay":r,t[o.DARKEN]=i?"darken":r,t[o.LIGHTEN]=i?"lighten":r,t[o.COLOR_DODGE]=i?"color-dodge":r,t[o.COLOR_BURN]=i?"color-burn":r,t[o.HARD_LIGHT]=i?"hard-light":r,t[o.SOFT_LIGHT]=i?"soft-light":r,t[o.DIFFERENCE]=i?"difference":r,t[o.EXCLUSION]=i?"exclusion":r,t[o.HUE]=i?"hue":r,t[o.SATURATION]=i?"saturation":r,t[o.COLOR]=i?"color":r,t[o.LUMINOSITY]=i?"luminosity":r,t[o.ERASE]="destination-out",t[o.SOURCE_IN]="source-in",t[o.SOURCE_OUT]="source-out",t[o.SOURCE_ATOP]="source-atop",t[o.DESTINATION_OVER]="destination-over",t[o.DESTINATION_IN]="destination-in",t[o.DESTINATION_OUT]="destination-out",t[o.DESTINATION_ATOP]="destination-atop",t[o.LIGHTER]="lighter",t[o.COPY]="copy",t[o.XOR]="xor",t}},function(t,i,r){var o=r(93),a=r(37),h=r(0),l=r(33),u=r(9),c=r(91),d=r(22),p=r(138),g=r(69),v=r(1),m=r(372),y=r(141),T=r(104),S=r(106),w=r(12),b=r(383),C=new h({Extends:u,initialize:function WebGLRenderer(t){u.call(this);var i=t.config,r={alpha:i.transparent,desynchronized:i.desynchronized,depth:!1,antialias:i.antialiasGL,premultipliedAlpha:i.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:i.failIfMajorPerformanceCaveat,powerPreference:i.powerPreference,preserveDrawingBuffer:i.preserveDrawingBuffer};this.config={clearBeforeRender:i.clearBeforeRender,antialias:i.antialias,backgroundColor:i.backgroundColor,contextCreation:r,roundPixels:i.roundPixels,maxTextures:i.maxTextures,maxTextureSize:i.maxTextureSize,batchSize:i.batchSize,maxLights:i.maxLights,mipmapFilter:i.mipmapFilter},this.game=t,this.type=l.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=t.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=v,this.contextRestoredHandler=v,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function init(t){var i,r=this.game,o=this.canvas,a=t.backgroundColor;if(!(i=r.config.context?r.config.context:o.getContext("webgl",t.contextCreation)||o.getContext("experimental-webgl",t.contextCreation))||i.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=i;var h=this;this.contextLostHandler=function(t){h.contextLost=!0,h.game.events.emit(d.CONTEXT_LOST,h),t.preventDefault()},this.contextRestoredHandler=function(){h.contextLost=!1,h.init(h.config),h.game.events.emit(d.CONTEXT_RESTORED,h)},o.addEventListener("webglcontextlost",this.contextLostHandler,!1),o.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),r.context=i;for(var u=0;u<=27;u++)this.blendModes.push({func:[i.ONE,i.ONE_MINUS_SRC_ALPHA],equation:i.FUNC_ADD});this.blendModes[1].func=[i.ONE,i.DST_ALPHA],this.blendModes[2].func=[i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[i.ONE,i.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[i.ZERO,i.ONE_MINUS_SRC_ALPHA],equation:i.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=i.BYTE,this.glFormats[1]=i.SHORT,this.glFormats[2]=i.UNSIGNED_BYTE,this.glFormats[3]=i.UNSIGNED_SHORT,this.glFormats[4]=i.FLOAT,this.glFuncMap={mat2:{func:i.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:i.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:i.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:i.uniform1f,length:1},"1fv":{func:i.uniform1fv,length:1},"1i":{func:i.uniform1i,length:1},"1iv":{func:i.uniform1iv,length:1},"2f":{func:i.uniform2f,length:2},"2fv":{func:i.uniform2fv,length:1},"2i":{func:i.uniform2i,length:2},"2iv":{func:i.uniform2iv,length:1},"3f":{func:i.uniform3f,length:3},"3fv":{func:i.uniform3fv,length:1},"3i":{func:i.uniform3i,length:3},"3iv":{func:i.uniform3iv,length:1},"4f":{func:i.uniform4f,length:4},"4fv":{func:i.uniform4fv,length:1},"4i":{func:i.uniform4i,length:4},"4iv":{func:i.uniform4iv,length:1}};var c=i.getSupportedExtensions();t.maxTextures&&-1!==t.maxTextures||(t.maxTextures=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS)),t.maxTextureSize||(t.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE));var p="WEBGL_compressed_texture_",v="WEBKIT_"+p;this.compression.ETC1=i.getExtension(p+"etc1")||i.getExtension(v+"etc1"),this.compression.PVRTC=i.getExtension(p+"pvrtc")||i.getExtension(v+"pvrtc"),this.compression.S3TC=i.getExtension(p+"s3tc")||i.getExtension(v+"s3tc"),this.supportedExtensions=c;var y="ANGLE_instanced_arrays";this.instancedArraysExtension=c.indexOf(y)>-1?i.getExtension(y):null;var T="OES_vertex_array_object";this.vaoExtension=c.indexOf(T)>-1?i.getExtension(T):null,i.disable(i.DEPTH_TEST),i.disable(i.CULL_FACE),i.enable(i.BLEND),i.clearColor(a.redGL,a.greenGL,a.blueGL,a.alphaGL),this.mipmapFilter=i[t.mipmapFilter],this.maxTextures=w.checkShaderMax(i,t.maxTextures),this.textureIndexes=[];var b=this.tempTextures;if(Array.isArray(b))for(var C=0;u<this.maxTextures;C++)i.deleteTexture(b[C]);else b=new Array(this.maxTextures);for(var A=0;A<this.maxTextures;A++){var E=i.createTexture();i.activeTexture(i.TEXTURE0+A),i.bindTexture(i.TEXTURE_2D,E),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),b[A]=E,this.textureIndexes.push(A)}return this.tempTextures=b,this.currentActiveTexture=1,this.startActiveTexture++,i.activeTexture(i.TEXTURE1),this.pipelines=new m(this),this.setBlendMode(l.BlendModes.NORMAL),this.projectionMatrix=(new g).identity(),r.textures.once(S.READY,this.boot,this),this},boot:function boot(){var t=this.game,i=this.pipelines,r=t.scale.baseSize;this.width=r.width,this.height=r.height,this.isBooted=!0,this.renderTarget=new y(this,this.width,this.height,1,0,!0,!0),i.boot(t.config.pipeline),this.blankTexture=t.textures.getFrame("__DEFAULT"),this.whiteTexture=t.textures.getFrame("__WHITE");var o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,null),o.enable(o.SCISSOR_TEST),t.scale.on(T.RESIZE,this.onResize,this),this.resize(r.width,r.height)},onResize:function onResize(t,i){i.width===this.width&&i.height===this.height||this.resize(i.width,i.height)},beginCapture:function beginCapture(t,i){void 0===t&&(t=this.width),void 0===i&&(i=this.height),this.renderTarget.bind(!0,t,i),this.setProjectionMatrix(t,i),this.resetTextures()},endCapture:function endCapture(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function resize(t,i){var r=this.gl;return this.width=t,this.height=i,this.setProjectionMatrix(t,i),r.viewport(0,0,t,i),this.drawingBufferHeight=r.drawingBufferHeight,r.scissor(0,r.drawingBufferHeight-i,t,i),this.defaultScissor[2]=t,this.defaultScissor[3]=i,this.emit(c.RESIZE,t,i),this},getAspectRatio:function getAspectRatio(){return this.width/this.height},setProjectionMatrix:function setProjectionMatrix(t,i){return t===this.projectionWidth&&i===this.projectionHeight||(this.projectionWidth=t,this.projectionHeight=i,this.projectionMatrix.ortho(0,t,i,0,-1e3,1e3)),this},resetProjectionMatrix:function resetProjectionMatrix(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function hasExtension(t){return!!this.supportedExtensions&&this.supportedExtensions.indexOf(t)},getExtension:function getExtension(t){return this.hasExtension(t)?(t in this.extensions||(this.extensions[t]=this.gl.getExtension(t)),this.extensions[t]):null},flush:function flush(){this.pipelines.flush()},pushScissor:function pushScissor(t,i,r,o,a){void 0===a&&(a=this.drawingBufferHeight);var h=[t,i,r,o];return this.scissorStack.push(h),this.setScissor(t,i,r,o,a),this.currentScissor=h,h},setScissor:function setScissor(t,i,r,o,a){void 0===a&&(a=this.drawingBufferHeight);var h=this.gl,l=this.currentScissor,setScissor=r>0&&o>0;if(l&&setScissor){var u=l[0],c=l[1],d=l[2],p=l[3];setScissor=u!==t||c!==i||d!==r||p!==o}setScissor&&(this.flush(),h.scissor(t,a-i-o,r,o))},resetScissor:function resetScissor(){var t=this.gl;t.enable(t.SCISSOR_TEST);var i=this.currentScissor;if(i){var r=i[0],o=i[1],a=i[2],h=i[3];a>0&&h>0&&t.scissor(r,this.drawingBufferHeight-o-h,a,h)}},popScissor:function popScissor(){var t=this.scissorStack;t.pop();var i=t[t.length-1];i&&this.setScissor(i[0],i[1],i[2],i[3]),this.currentScissor=i},hasActiveStencilMask:function hasActiveStencilMask(){var t=this.currentMask.mask,i=this.currentCameraMask.mask;return t&&t.isStencil||i&&i.isStencil},resetViewport:function resetViewport(){var t=this.gl;t.viewport(0,0,this.width,this.height),this.drawingBufferHeight=t.drawingBufferHeight},setBlendMode:function setBlendMode(t,i){void 0===i&&(i=!1);var r=this.gl,o=this.blendModes[t];return!!(i||t!==l.BlendModes.SKIP_CHECK&&this.currentBlendMode!==t)&&(this.flush(),r.enable(r.BLEND),r.blendEquation(o.equation),o.func.length>2?r.blendFuncSeparate(o.func[0],o.func[1],o.func[2],o.func[3]):r.blendFunc(o.func[0],o.func[1]),this.currentBlendMode=t,!0)},addBlendMode:function addBlendMode(t,i){return this.blendModes.push({func:t,equation:i})-1},updateBlendMode:function updateBlendMode(t,i,r){return this.blendModes[t]&&(this.blendModes[t].func=i,r&&(this.blendModes[t].equation=r)),this},removeBlendMode:function removeBlendMode(t){return t>17&&this.blendModes[t]&&this.blendModes.splice(t,1),this},setBlankTexture:function setBlankTexture(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function setTextureSource(t){if(this.pipelines.forceZero())return this.setTextureZero(t.glTexture,!0),0;var i=this.gl,r=this.currentActiveTexture;return t.glIndexCounter<this.startActiveTexture&&(t.glIndexCounter=this.startActiveTexture,r<this.maxTextures?(t.glIndex=r,i.activeTexture(i.TEXTURE0+r),i.bindTexture(i.TEXTURE_2D,t.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,t.glIndexCounter=this.startActiveTexture,t.glIndex=1,i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,t.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,t.glIndex},isNewNormalMap:function isNewNormalMap(t,i){return this.textureZero!==t||this.normalTexture!==i},setTextureZero:function setTextureZero(t,i){if(this.textureZero!==t){i&&this.flush();var r=this.gl;r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,t),this.textureZero=t}},clearTextureZero:function clearTextureZero(){this.textureZero=null},setNormalMap:function setNormalMap(t){if(this.normalTexture!==t){var i=this.gl;i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,t),this.normalTexture=t,1===this.currentActiveTexture&&(this.currentActiveTexture=2)}},clearNormalMap:function clearNormalMap(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function unbindTextures(){for(var t=this.gl,i=this.tempTextures,r=0;r<i.length;r++)t.activeTexture(t.TEXTURE0+r),t.bindTexture(t.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function resetTextures(t){if(void 0===t&&(t=!1),!this.isTextureClean){this.flush();var i=this.gl,r=this.tempTextures;if(t){for(var o=0;o<r.length;o++)i.activeTexture(i.TEXTURE0+o),i.bindTexture(i.TEXTURE_2D,r[o]);i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,r[1]),this.isTextureClean=!0}else i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,r[0]),i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,r[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function setTexture2D(t){if(this.pipelines.forceZero())return this.setTextureZero(t,!0),0;var i=this.gl,r=this.currentActiveTexture;return t.glIndexCounter<this.startActiveTexture&&(t.glIndexCounter=this.startActiveTexture,r<this.maxTextures?(t.glIndex=r,i.activeTexture(i.TEXTURE0+r),i.bindTexture(i.TEXTURE_2D,t),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,t.glIndexCounter=this.startActiveTexture,t.glIndex=1,i.activeTexture(i.TEXTURE1),i.bindTexture(i.TEXTURE_2D,t),this.currentActiveTexture=2)),this.isTextureClean=!1,t.glIndex},pushFramebuffer:function pushFramebuffer(t,i,r,o){return t===this.currentFramebuffer?this:(this.fboStack.push(t),this.setFramebuffer(t,i,r,o))},setFramebuffer:function setFramebuffer(t,i,r,o){if(void 0===i&&(i=!1),void 0===r&&(r=!1),void 0===o&&(o=!0),t===this.currentFramebuffer)return this;var a=this.gl,h=this.width,l=this.height;return t&&t.renderTexture&&o?(h=t.renderTexture.width,l=t.renderTexture.height):this.flush(),a.bindFramebuffer(a.FRAMEBUFFER,t),o&&a.viewport(0,0,h,l),i&&(t?(this.drawingBufferHeight=l,this.pushScissor(0,0,h,l)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=t,r&&this.resetTextures(),this},popFramebuffer:function popFramebuffer(t,i,r){void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===r&&(r=!0);var o=this.fboStack;o.pop();var a=o[o.length-1];return a||(a=null),this.setFramebuffer(a,t,i,r),a},setProgram:function setProgram(t){return t!==this.currentProgram&&(this.flush(),this.gl.useProgram(t),this.currentProgram=t,!0)},resetProgram:function resetProgram(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function createTextureFromSource(t,i,r,o){var a=this.gl,h=a.NEAREST,u=a.NEAREST,c=a.CLAMP_TO_EDGE;i=t?t.width:i,r=t?t.height:r;var d=p(i,r);return d&&(c=a.REPEAT),o===l.ScaleModes.LINEAR&&this.config.antialias&&(h=d?this.mipmapFilter:a.LINEAR,u=a.LINEAR),t||"number"!=typeof i||"number"!=typeof r?this.createTexture2D(0,h,u,c,c,a.RGBA,t):this.createTexture2D(0,h,u,c,c,a.RGBA,null,i,r)},createTexture2D:function createTexture2D(t,i,r,o,a,h,l,u,c,d,g,v){d=null==d||d,void 0===g&&(g=!1),void 0===v&&(v=!1);var m=this.gl,y=m.createTexture();m.activeTexture(m.TEXTURE0);var T=m.getParameter(m.TEXTURE_BINDING_2D);return m.bindTexture(m.TEXTURE_2D,y),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,i),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,r),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,a),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,o),m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d),m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,v),null==l?m.texImage2D(m.TEXTURE_2D,t,h,u,c,0,h,m.UNSIGNED_BYTE,null):(g||(u=l.width,c=l.height),m.texImage2D(m.TEXTURE_2D,t,h,h,m.UNSIGNED_BYTE,l)),p(u,c)&&m.generateMipmap(m.TEXTURE_2D),T&&m.bindTexture(m.TEXTURE_2D,T),y.isAlphaPremultiplied=d,y.isRenderTexture=!1,y.width=u,y.height=c,y.glIndex=0,y.glIndexCounter=-1,y},createFramebuffer:function createFramebuffer(t,i,r,o){var a,h=this.gl,l=h.createFramebuffer();if(this.setFramebuffer(l),o){var u=h.createRenderbuffer();h.bindRenderbuffer(h.RENDERBUFFER,u),h.renderbufferStorage(h.RENDERBUFFER,h.DEPTH_STENCIL,t,i),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,u)}if(r.isRenderTexture=!0,r.isAlphaPremultiplied=!1,h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,r,0),(a=h.checkFramebufferStatus(h.FRAMEBUFFER))!==h.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+{36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"}[a]);return l.renderTexture=r,this.setFramebuffer(null),this.resetTextures(),l},createProgram:function createProgram(t,i){var r=this.gl,o=r.createProgram(),a=r.createShader(r.VERTEX_SHADER),h=r.createShader(r.FRAGMENT_SHADER);if(r.shaderSource(a,t),r.shaderSource(h,i),r.compileShader(a),r.compileShader(h),!r.getShaderParameter(a,r.COMPILE_STATUS))throw new Error("Vertex Shader failed:\n"+r.getShaderInfoLog(a));if(!r.getShaderParameter(h,r.COMPILE_STATUS))throw new Error("Fragment Shader failed:\n"+r.getShaderInfoLog(h));if(r.attachShader(o,a),r.attachShader(o,h),r.linkProgram(o),!r.getProgramParameter(o,r.LINK_STATUS))throw new Error("Link Program failed:\n"+r.getProgramInfoLog(o));return r.useProgram(o),o},createVertexBuffer:function createVertexBuffer(t,i){var r=this.gl,o=r.createBuffer();return r.bindBuffer(r.ARRAY_BUFFER,o),r.bufferData(r.ARRAY_BUFFER,t,i),r.bindBuffer(r.ARRAY_BUFFER,null),o},createIndexBuffer:function createIndexBuffer(t,i){var r=this.gl,o=r.createBuffer();return r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,o),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t,i),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null),o},deleteTexture:function deleteTexture(t,i){return i&&this.resetTextures(!0),t&&this.gl.deleteTexture(t),this},deleteFramebuffer:function deleteFramebuffer(t){return t&&(this.gl.deleteFramebuffer(t),o(this.fboStack,t),this.currentFramebuffer===t&&(this.currentFramebuffer=null)),this},deleteProgram:function deleteProgram(t){return t&&this.gl.deleteProgram(t),this},deleteBuffer:function deleteBuffer(t){return this.gl.deleteBuffer(t),this},preRenderCamera:function preRenderCamera(t){var i=t.x,r=t.y,o=t.width,h=t.height,l=t.backgroundColor;t.emit(a.PRE_RENDER,t),this.pipelines.preBatchCamera(t),this.pushScissor(i,r,o,h),t.mask&&(this.currentCameraMask.mask=t.mask,this.currentCameraMask.camera=t._maskCamera,t.mask.preRenderWebGL(this,t,t._maskCamera)),l.alphaGL>0&&this.pipelines.setMulti().drawFillRect(i,r,o,h,w.getTintFromFloats(l.blueGL,l.greenGL,l.redGL,1),l.alphaGL)},getCurrentStencilMask:function getCurrentStencilMask(){var t=null,i=this.maskStack,r=this.currentCameraMask;return i.length>0?t=i[i.length-1]:r.mask&&r.mask.isStencil&&(t=r),t},postRenderCamera:function postRenderCamera(t){var i=t.flashEffect,r=t.fadeEffect;if(i.isRunning||r.isRunning||r.isComplete){var o=this.pipelines.setMulti();i.postRenderWebGL(o,w.getTintFromFloats),r.postRenderWebGL(o,w.getTintFromFloats)}t.dirty=!1,this.popScissor(),t.mask&&(this.currentCameraMask.mask=null,t.mask.postRenderWebGL(this,t._maskCamera)),this.pipelines.postBatchCamera(t),t.emit(a.POST_RENDER,t)},preRender:function preRender(){if(!this.contextLost){var t=this.gl;if(t.bindFramebuffer(t.FRAMEBUFFER,null),this.config.clearBeforeRender){var i=this.config.backgroundColor;t.clearColor(i.redGL,i.greenGL,i.blueGL,i.alphaGL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT)}t.enable(t.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&t.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(c.PRE_RENDER)}},render:function render(t,i,r){if(!this.contextLost){var o=i.length;if(this.emit(c.RENDER,t,r),this.preRenderCamera(r),0===o)return this.setBlendMode(l.BlendModes.NORMAL),void this.postRenderCamera(r);this.currentType="";for(var a=this.currentMask,h=0;h<o;h++){this.finalType=h===o-1;var u=i[h],d=u.mask;(a=this.currentMask).mask&&a.mask!==d&&a.mask.postRenderWebGL(this,a.camera),d&&a.mask!==d&&d.preRenderWebGL(this,u,r),u.blendMode!==this.currentBlendMode&&this.setBlendMode(u.blendMode);var p=u.type;p!==this.currentType&&(this.newType=!0,this.currentType=p),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=i[h+1].type===this.currentType,u.renderWebGL(this,u,r),this.newType=!1}(a=this.currentMask).mask&&a.mask.postRenderWebGL(this,a.camera),this.setBlendMode(l.BlendModes.NORMAL),this.postRenderCamera(r)}},postRender:function postRender(){if(!this.contextLost){this.flush(),this.emit(c.POST_RENDER);var t=this.snapshotState;t.callback&&(b(this.canvas,t),t.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function snapshot(t,i,r){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,t,i,r)},snapshotArea:function snapshotArea(t,i,r,o,a,h,l){var u=this.snapshotState;return u.callback=a,u.type=h,u.encoder=l,u.getPixel=!1,u.x=t,u.y=i,u.width=Math.min(r,this.gl.drawingBufferWidth),u.height=Math.min(o,this.gl.drawingBufferHeight),this},snapshotPixel:function snapshotPixel(t,i,r){return this.snapshotArea(t,i,1,1,r),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function snapshotFramebuffer(t,i,r,o,a,h,l,u,c,d,p){void 0===a&&(a=!1),void 0===h&&(h=0),void 0===l&&(l=0),void 0===u&&(u=i),void 0===c&&(c=r);var g=this.currentFramebuffer;this.snapshotArea(h,l,u,c,o,d,p);var v=this.snapshotState;return v.getPixel=a,v.isFramebuffer=!0,v.bufferWidth=i,v.bufferHeight=r,this.setFramebuffer(t),b(this.canvas,v),this.setFramebuffer(g),v.callback=null,v.isFramebuffer=!1,this},canvasToTexture:function canvasToTexture(t,i,r,o){return void 0===r&&(r=!1),void 0===o&&(o=!1),i?this.updateCanvasTexture(t,i,o):this.createCanvasTexture(t,r,o)},createCanvasTexture:function createCanvasTexture(t,i,r){void 0===i&&(i=!1),void 0===r&&(r=!1);var o=this.gl,a=o.NEAREST,h=o.NEAREST,l=t.width,u=t.height,c=o.CLAMP_TO_EDGE,d=p(l,u);return!i&&d&&(c=o.REPEAT),this.config.antialias&&(a=d?this.mipmapFilter:o.LINEAR,h=o.LINEAR),this.createTexture2D(0,a,h,c,c,o.RGBA,t,l,u,!0,!1,r)},updateCanvasTexture:function updateCanvasTexture(t,i,r){void 0===r&&(r=!1);var o=this.gl,a=t.width,h=t.height;if(a>0&&h>0){o.activeTexture(o.TEXTURE0);var l=o.getParameter(o.TEXTURE_BINDING_2D);o.bindTexture(o.TEXTURE_2D,i),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,r),o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,t),i.width=a,i.height=h,l&&o.bindTexture(o.TEXTURE_2D,l)}return i},createVideoTexture:function createVideoTexture(t,i,r){void 0===i&&(i=!1),void 0===r&&(r=!1);var o=this.gl,a=o.NEAREST,h=o.NEAREST,l=t.videoWidth,u=t.videoHeight,c=o.CLAMP_TO_EDGE,d=p(l,u);return!i&&d&&(c=o.REPEAT),this.config.antialias&&(a=d?this.mipmapFilter:o.LINEAR,h=o.LINEAR),this.createTexture2D(0,a,h,c,c,o.RGBA,t,l,u,!0,!0,r)},updateVideoTexture:function updateVideoTexture(t,i,r){void 0===r&&(r=!1);var o=this.gl,a=t.videoWidth,h=t.videoHeight;if(a>0&&h>0){o.activeTexture(o.TEXTURE0);var l=o.getParameter(o.TEXTURE_BINDING_2D);o.bindTexture(o.TEXTURE_2D,i),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,r),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,t),i.width=a,i.height=h,l&&o.bindTexture(o.TEXTURE_2D,l)}return i},setTextureFilter:function setTextureFilter(t,i){var r=this.gl,o=[r.LINEAR,r.NEAREST][i];r.activeTexture(r.TEXTURE0);var a=r.getParameter(r.TEXTURE_BINDING_2D);return r.bindTexture(r.TEXTURE_2D,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,o),a&&r.bindTexture(r.TEXTURE_2D,a),this},getMaxTextureSize:function getMaxTextureSize(){return this.config.maxTextureSize},destroy:function destroy(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var t=this.gl,i=this.tempTextures,r=0;r<i.length;r++)t.deleteTexture(i[r]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});t.exports=C},function(t,i,r){var o=r(0),a=r(92),h=r(102),l=r(373),u=r(376),c=r(377),d=r(108),p=r(378),g=r(379),v=r(380),m=r(381),y=new o({initialize:function PipelineManager(t){this.game=t.game,this.renderer=t,this.classes=new h([[a.UTILITY_PIPELINE,m],[a.MULTI_PIPELINE,d],[a.BITMAPMASK_PIPELINE,l],[a.SINGLE_PIPELINE,v],[a.ROPE_PIPELINE,g],[a.LIGHT_PIPELINE,c],[a.POINTLIGHT_PIPELINE,p],[a.GRAPHICS_PIPELINE,u]]),this.postPipelineClasses=new h,this.pipelines=new h,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function boot(t){var i,r,o=this,h=this.game;if(this.classes.each((function(t,r){i=o.add(t,new r({game:h})),t===a.UTILITY_PIPELINE&&(o.UTILITY_PIPELINE=i,o.fullFrame1=i.fullFrame1,o.fullFrame2=i.fullFrame2,o.halfFrame1=i.halfFrame1,o.halfFrame2=i.halfFrame2)})),this.MULTI_PIPELINE=this.get(a.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(a.BITMAPMASK_PIPELINE),t)for(r in t){var l=t[r];(i=new l(h)).isPostFX?this.postPipelineClasses.set(r,l):this.has(r)||(this.classes.set(r,l),this.add(r,i))}},add:function add(t,i){if(!i.isPostFX){var r=this.pipelines,o=this.renderer;return r.has(t)?console.warn("Pipeline exists: "+t):(i.name=t,i.manager=this,r.set(t,i)),i.hasBooted||i.boot(),0!==o.width&&0!==o.height&&i.resize(o.width,o.height),i}console.warn(t+" is a Post Pipeline. Use `addPostPipeline` instead")},addPostPipeline:function addPostPipeline(t,i){this.postPipelineClasses.has(t)||this.postPipelineClasses.set(t,i)},flush:function flush(){this.current&&this.current.flush()},has:function has(t){var i=this.pipelines;return"string"==typeof t?i.has(t):!!i.contains(t)},get:function get(t){var i=this.pipelines;return"string"==typeof t?i.get(t):i.contains(t)?t:void 0},getPostPipeline:function getPostPipeline(t,i){var r,o=this.postPipelineClasses;if("string"==typeof t?r=o.get(t):"function"==typeof t?o.contains(t)&&(r=t):"object"===_typeof(t)&&(r=o.get(t.name)),r){var a=new r(this.game);return i&&(a.gameObject=i),a}},remove:function remove(t,i,r){void 0===i&&(i=!0),void 0===r&&(r=!0),this.pipelines.delete(t),i&&this.classes.delete(t),r&&this.postPipelineClasses.delete(t)},set:function set(t,i,r){if(!t.isPostFX)return this.isCurrent(t,r)||(this.flush(),this.current&&this.current.unbind(),this.current=t,t.bind(r)),t.updateProjectionMatrix(),t.onBind(i),t},preBatch:function preBatch(t){if(t.hasPostPipeline){this.flush();for(var i=t.postPipelines,r=i.length-1;r>=0;r--){var o=i[r];o.active&&o.preBatch(t)}}},postBatch:function postBatch(t){if(t.hasPostPipeline){this.flush();for(var i=t.postPipelines,r=0;r<i.length;r++){var o=i[r];o.active&&o.postBatch(t)}}},preBatchCamera:function preBatchCamera(t){if(t.hasPostPipeline){this.flush();for(var i=t.postPipelines,r=i.length-1;r>=0;r--){var o=i[r];o.active&&o.preBatch(t)}}},postBatchCamera:function postBatchCamera(t){if(t.hasPostPipeline){this.flush();for(var i=t.postPipelines,r=0;r<i.length;r++){var o=i[r];o.active&&o.postBatch(t)}}},isCurrent:function isCurrent(t,i){var r=this.renderer,o=this.current;return o&&!i&&(i=o.currentShader),!(o!==t||i.program!==r.currentProgram)},copyFrame:function copyFrame(t,i,r,o,a){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(t,i,r,o,a),this},copyToGame:function copyToGame(t){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(t),this},drawFrame:function drawFrame(t,i,r,o){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(t,i,r,o),this},blendFrames:function blendFrames(t,i,r,o,a){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(t,i,r,o,a),this},blendFramesAdditive:function blendFramesAdditive(t,i,r,o,a){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(t,i,r,o,a),this},clearFrame:function clearFrame(t,i){return this.UTILITY_PIPELINE.clearFrame(t,i),this},blitFrame:function blitFrame(t,i,r,o,a,h){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(t,i,r,o,a,h),this},copyFrameRect:function copyFrameRect(t,i,r,o,a,h,l,u){return this.UTILITY_PIPELINE.copyFrameRect(t,i,r,o,a,h,l,u),this},forceZero:function forceZero(){return this.current&&this.current.forceZero},setMulti:function setMulti(){return this.set(this.MULTI_PIPELINE)},setUtility:function setUtility(t){return this.UTILITY_PIPELINE.bind(t)},rebind:function rebind(t){void 0===t&&this.previous&&(t=this.previous);var i=this.renderer,r=i.gl;r.disable(r.DEPTH_TEST),r.disable(r.CULL_FACE),i.hasActiveStencilMask()?r.clear(r.DEPTH_BUFFER_BIT):(r.disable(r.STENCIL_TEST),r.clear(r.DEPTH_BUFFER_BIT|r.STENCIL_BUFFER_BIT)),r.viewport(0,0,i.width,i.height),i.currentProgram=null,i.setBlendMode(0,!0);var o=this.pipelines.entries;for(var a in o)o[a].glReset=!0;t&&(this.current=t,t.rebind()),i.resetTextures()},clear:function clear(){var t=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,t.currentProgram=null,t.setBlendMode(0,!0)},destroy:function destroy(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});t.exports=y},function(t,i,r){var o=r(0),a=r(2),h=r(866),l=r(867),u=r(107),c=r(58),d=new o({Extends:c,initialize:function BitmapMaskPipeline(t){t.fragShader=a(t,"fragShader",h),t.vertShader=a(t,"vertShader",l),t.batchSize=a(t,"batchSize",1),t.vertices=a(t,"vertices",[-1,1,-1,-7,7,1]),t.attributes=a(t,"attributes",[{name:"inPosition",size:2,type:u.FLOAT}]),c.call(this,t)},boot:function boot(){c.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function resize(t,i){c.prototype.resize.call(this,t,i),this.set2f("uResolution",t,i)},beginMask:function beginMask(t,i,r){var o=this.gl;if(t.bitmapMask&&o){var a=this.renderer;a.flush(),a.pushFramebuffer(t.mainFramebuffer),o.disable(o.STENCIL_TEST),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),a.currentCameraMask.mask!==t&&(a.currentMask.mask=t,a.currentMask.camera=r)}},endMask:function endMask(t,i){var r=this.gl,o=this.renderer,a=t.bitmapMask;if(a&&r){o.flush(),o.pushFramebuffer(t.maskFramebuffer),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),o.setBlendMode(0,!0),a.renderWebGL(o,a,i),o.flush(),o.popFramebuffer(),o.popFramebuffer();var h=o.getCurrentStencilMask();h?(r.enable(r.STENCIL_TEST),h.mask.applyStencil(o,h.camera,!0)):o.currentMask.mask=null,o.pipelines.set(this),r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,t.maskTexture),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,t.mainTexture),this.set1i("uInvertMaskAlpha",t.invertAlpha),r.drawArrays(this.topology,0,3),o.resetTextures()}}});t.exports=d},function(t,i,r){t.exports={AFTER_FLUSH:r(868),BEFORE_FLUSH:r(869),BIND:r(870),BOOT:r(871),DESTROY:r(872),REBIND:r(873),RESIZE:r(874)}},function(t,i,r){var o=r(0),a=r(2),h=r(107),l=new o({initialize:function WebGLShader(t,i,r,o,a){this.pipeline=t,this.name=i,this.renderer=t.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(r,o),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(a),this.createUniforms()},createAttributes:function createAttributes(t){var i=0,r=0,o=[];this.vertexComponentCount=0;for(var l=0;l<t.length;l++){var u=t[l],c=u.name,d=a(u,"size",1),p=a(u,"type",h.FLOAT),g=p.enum,v=p.size,m=!!u.normalized;o.push({name:c,size:d,type:g,normalized:m,offset:r,enabled:!1,location:-1}),4===v?i+=d:i++,r+=d*v}this.vertexSize=r,this.vertexComponentCount=i,this.attributes=o},bind:function bind(t,i){return void 0===t&&(t=!1),void 0===i&&(i=!1),i&&this.pipeline.flush(),this.renderer.setProgram(this.program),t&&this.setAttribPointers(),this},rebind:function rebind(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function setAttribPointers(t){void 0===t&&(t=!1);for(var i=this.gl,r=this.vertexSize,o=this.attributes,a=this.program,h=0;h<o.length;h++){var l=o[h],u=l.size,c=l.type,d=l.offset,p=l.enabled,g=l.location,v=!!l.normalized;if(t){var m=i.getAttribLocation(a,l.name);m>=0?(i.enableVertexAttribArray(m),i.vertexAttribPointer(m,u,c,v,r,d),l.enabled=!0,l.location=m):-1!==m&&i.disableVertexAttribArray(m)}else p?i.vertexAttribPointer(g,u,c,v,r,d):!p&&g>-1&&(i.disableVertexAttribArray(g),l.location=-1)}return this},createUniforms:function createUniforms(){var t,i,r,o=this.gl,a=this.program,h=this.uniforms,l=o.getProgramParameter(a,o.ACTIVE_UNIFORMS);for(t=0;t<l;t++){var u=o.getActiveUniform(a,t);if(u){i=u.name,null!==(r=o.getUniformLocation(a,i))&&(h[i]={name:i,location:r,value1:null,value2:null,value3:null,value4:null});var c=i.indexOf("[");c>0&&(i=i.substr(0,c),h.hasOwnProperty(i)||null!==(r=o.getUniformLocation(a,i))&&(h[i]={name:i,location:r,value1:null,value2:null,value3:null,value4:null}))}}return this},hasUniform:function hasUniform(t){return this.uniforms.hasOwnProperty(t)},resetUniform:function resetUniform(t){var i=this.uniforms[t];return i&&(i.value1=null,i.value2=null,i.value3=null,i.value4=null),this},setUniform1:function setUniform1(t,i,r,o){var a=this.uniforms[i];return a?((o||a.value1!==r)&&(a.value1=r,this.renderer.setProgram(this.program),t.call(this.gl,a.location,r),this.pipeline.currentShader=this),this):this},setUniform2:function setUniform2(t,i,r,o,a){var h=this.uniforms[i];return h?((a||h.value1!==r||h.value2!==o)&&(h.value1=r,h.value2=o,this.renderer.setProgram(this.program),t.call(this.gl,h.location,r,o),this.pipeline.currentShader=this),this):this},setUniform3:function setUniform3(t,i,r,o,a,h){var l=this.uniforms[i];return l?((h||l.value1!==r||l.value2!==o||l.value3!==a)&&(l.value1=r,l.value2=o,l.value3=a,this.renderer.setProgram(this.program),t.call(this.gl,l.location,r,o,a),this.pipeline.currentShader=this),this):this},setUniform4:function setUniform4(t,i,r,o,a,h,l){var u=this.uniforms[i];return u?((l||u.value1!==r||u.value2!==o||u.value3!==a||u.value4!==h)&&(u.value1=r,u.value2=o,u.value3=a,u.value4=h,this.renderer.setProgram(this.program),t.call(this.gl,u.location,r,o,a,h),this.pipeline.currentShader=this),this):this},set1f:function set1f(t,i){return this.setUniform1(this.gl.uniform1f,t,i)},set2f:function set2f(t,i,r){return this.setUniform2(this.gl.uniform2f,t,i,r)},set3f:function set3f(t,i,r,o){return this.setUniform3(this.gl.uniform3f,t,i,r,o)},set4f:function set4f(t,i,r,o,a){return this.setUniform4(this.gl.uniform4f,t,i,r,o,a)},set1fv:function set1fv(t,i){return this.setUniform1(this.gl.uniform1fv,t,i,!0)},set2fv:function set2fv(t,i){return this.setUniform1(this.gl.uniform2fv,t,i,!0)},set3fv:function set3fv(t,i){return this.setUniform1(this.gl.uniform3fv,t,i,!0)},set4fv:function set4fv(t,i){return this.setUniform1(this.gl.uniform4fv,t,i,!0)},set1iv:function set1iv(t,i){return this.setUniform1(this.gl.uniform1iv,t,i,!0)},set2iv:function set2iv(t,i){return this.setUniform1(this.gl.uniform2iv,t,i,!0)},set3iv:function set3iv(t,i){return this.setUniform1(this.gl.uniform3iv,t,i,!0)},set4iv:function set4iv(t,i){return this.setUniform1(this.gl.uniform4iv,t,i,!0)},set1i:function set1i(t,i){return this.setUniform1(this.gl.uniform1i,t,i)},set2i:function set2i(t,i,r){return this.setUniform2(this.gl.uniform2i,t,i,r)},set3i:function set3i(t,i,r,o){return this.setUniform3(this.gl.uniform3i,t,i,r,o)},set4i:function set4i(t,i,r,o,a){return this.setUniform4(this.gl.uniform4i,t,i,r,o,a)},setMatrix2fv:function setMatrix2fv(t,i,r){return this.setUniform2(this.gl.uniformMatrix2fv,t,i,r,!0)},setMatrix3fv:function setMatrix3fv(t,i,r){return this.setUniform2(this.gl.uniformMatrix3fv,t,i,r,!0)},setMatrix4fv:function setMatrix4fv(t,i,r){return this.setUniform2(this.gl.uniformMatrix4fv,t,i,r,!0)},destroy:function destroy(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});t.exports=l},function(t,i,r){var o=r(0),a=r(59),h=r(2),l=r(875),u=r(876),c=r(25),d=r(107),p=r(58),g=new o({Extends:p,initialize:function GraphicsPipeline(t){t.fragShader=h(t,"fragShader",l),t.vertShader=h(t,"vertShader",u),t.attributes=h(t,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:d.UNSIGNED_BYTE,normalized:!0}]),p.call(this,t),this.calcMatrix=new c,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function batchFillRect(t,i,r,o,a,h){this.renderer.pipelines.set(this);var l=this.calcMatrix;h&&h.multiply(a,l);var u=t+r,c=i+o,d=l.getX(t,i),p=l.getY(t,i),g=l.getX(t,c),v=l.getY(t,c),m=l.getX(u,c),y=l.getY(u,c),T=l.getX(u,i),S=l.getY(u,i),w=this.fillTint;this.batchQuad(d,p,g,v,m,y,T,S,w.TL,w.TR,w.BL,w.BR)},batchFillTriangle:function batchFillTriangle(t,i,r,o,a,h,l,u){this.renderer.pipelines.set(this);var c=this.calcMatrix;u&&u.multiply(l,c);var d=c.getX(t,i),p=c.getY(t,i),g=c.getX(r,o),v=c.getY(r,o),m=c.getX(a,h),y=c.getY(a,h),T=this.fillTint;this.batchTri(d,p,g,v,m,y,T.TL,T.TR,T.BL)},batchStrokeTriangle:function batchStrokeTriangle(t,i,r,o,a,h,l,u,c){var d=this.tempTriangle;d[0].x=t,d[0].y=i,d[0].width=l,d[1].x=r,d[1].y=o,d[1].width=l,d[2].x=a,d[2].y=h,d[2].width=l,d[3].x=t,d[3].y=i,d[3].width=l,this.batchStrokePath(d,l,!1,u,c)},batchFillPath:function batchFillPath(t,i,r){this.renderer.pipelines.set(this);var o=this.calcMatrix;r&&r.multiply(i,o);for(var h,l,u=t.length,c=this.polygonCache,d=this.fillTint.TL,p=this.fillTint.TR,g=this.fillTint.BL,v=0;v<u;++v)l=t[v],c.push(l.x,l.y);u=(h=a(c)).length;for(var m=0;m<u;m+=3){var y=2*h[m+0],T=2*h[m+1],S=2*h[m+2],w=c[y+0],b=c[y+1],C=c[T+0],A=c[T+1],E=c[S+0],M=c[S+1],_=o.getX(w,b),R=o.getY(w,b),P=o.getX(C,A),k=o.getY(C,A),O=o.getX(E,M),L=o.getY(E,M);this.batchTri(_,R,P,k,O,L,d,p,g)}c.length=0},batchStrokePath:function batchStrokePath(t,i,r,o,a){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var h=t.length-1,l=0;l<h;l++){var u=t[l],c=t[l+1];this.batchLine(u.x,u.y,c.x,c.y,u.width/2,c.width/2,i,l,!r&&l===h-1,o,a)}},batchLine:function batchLine(t,i,r,o,a,h,l,u,c,d,p){this.renderer.pipelines.set(this);var g=this.calcMatrix;p&&p.multiply(d,g);var v=r-t,m=o-i,y=Math.sqrt(v*v+m*m),T=a*(o-i)/y,S=a*(t-r)/y,w=h*(o-i)/y,b=h*(t-r)/y,C=r-w,A=o-b,E=t-T,M=i-S,_=r+w,R=o+b,P=t+T,k=i+S,O=g.getX(C,A),L=g.getY(C,A),D=g.getX(E,M),I=g.getY(E,M),B=g.getX(_,R),N=g.getY(_,R),G=g.getX(P,k),Y=g.getY(P,k),U=this.strokeTint,X=U.TL,V=U.TR,z=U.BL,W=U.BR;if(this.batchQuad(G,Y,D,I,O,L,B,N,X,V,z,W),!(l<=2)){var H=this.prevQuad,j=this.firstQuad;u>0&&H[4]?this.batchQuad(G,Y,D,I,H[0],H[1],H[2],H[3],X,V,z,W):(j[0]=G,j[1]=Y,j[2]=D,j[3]=I,j[4]=1),c&&j[4]?this.batchQuad(O,L,B,N,j[0],j[1],j[2],j[3],X,V,z,W):(H[0]=O,H[1]=L,H[2]=B,H[3]=N,H[4]=1)}},batchVert:function batchVert(t,i,r){var o=this.vertexViewF32,a=this.vertexViewU32,h=this.vertexCount*this.currentShader.vertexComponentCount-1;o[++h]=t,o[++h]=i,a[++h]=r,this.vertexCount++},batchQuad:function batchQuad(t,i,r,o,a,h,l,u,c,d,p,g){var v=!1;return this.shouldFlush(6)&&(this.flush(),v=!0),this.batchVert(t,i,c),this.batchVert(r,o,p),this.batchVert(a,h,g),this.batchVert(t,i,c),this.batchVert(a,h,g),this.batchVert(l,u,d),v},batchTri:function batchTri(t,i,r,o,a,h,l,u,c){var d=!1;return this.shouldFlush(3)&&(this.flush(),d=!0),this.batchVert(t,i,l),this.batchVert(r,o,u),this.batchVert(a,h,c),d},destroy:function destroy(){return p.prototype.destroy.call(this),this.polygonCache=null,this}});t.exports=g},function(t,i,r){var o=r(0),a=r(2),h=r(877),l=r(108),u=r(3),c=r(58),d=10,p=new u,g=new o({Extends:l,initialize:function LightPipeline(t){d=t.game.renderer.config.maxLights;for(var i=a(t,"fragShader",h),r=[],o=1;o<=d;o++)r.push({name:"lights"+o,fragShader:i.replace("%LIGHT_COUNT%",o.toString())});t.shaders=r,l.call(this,t),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function boot(){c.prototype.boot.call(this);var t=this.gl,i=t.createTexture();t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:i};for(var r=0;r<this.shaders.length;r++)this["lightShader"+(r+1)]=this.shaders[r]},onRender:function onRender(t,i){var r=t.sys.lights;if(this.lightsActive=!1,r&&r.active){var o=r.getLights(i),a=o.length;if(0!==a){var h;this.lightsActive=!0,this.setShader(this["lightShader"+a],!0);var l=this.renderer.height,u=i.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",i.x,i.y,i.rotation,i.zoom),this.set3f("uAmbientLightColor",r.ambientColor.r,r.ambientColor.g,r.ambientColor.b),h=0;h<a;h++){var c=o[h].light,d=c.color,g="uLights["+h+"].";u.transformPoint(c.x,c.y,p),this.set2f(g+"position",p.x-i.scrollX*c.scrollFactorX*i.zoom,l-(p.y-i.scrollY*c.scrollFactorY*i.zoom)),this.set3f(g+"color",d.r,d.g,d.b),this.set1f(g+"intensity",c.intensity),this.set1f(g+"radius",c.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function setNormalMapRotation(t){if(t!==this.currentNormalMapRotation||0===this.vertexCount){this.vertexCount>0&&this.flush();var i=this.inverseRotationMatrix;if(t){var r=-t,o=Math.cos(r),a=Math.sin(r);i[1]=a,i[3]=-a,i[0]=i[4]=o}else i[0]=i[4]=1,i[1]=i[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,i),this.currentNormalMapRotation=t}},setTexture2D:function setTexture2D(t,i){var r=this.renderer;void 0===t&&(t=r.tempTextures[0]);var o=this.getNormalMap(i);r.isNewNormalMap(t,o)&&(this.flush(),r.setTextureZero(t),r.setNormalMap(o));var a=i?i.rotation:0;return this.setNormalMapRotation(a),this.currentUnit=0,0},setGameObject:function setGameObject(t,i){void 0===i&&(i=t.frame);var r=this.renderer,o=i.glTexture,a=this.getNormalMap(t);return r.isNewNormalMap()&&(this.flush(),r.setTextureZero(o),r.setNormalMap(a)),this.setNormalMapRotation(t.rotation),this.currentUnit=0,0},getNormalMap:function getNormalMap(t){var i;return t?t.displayTexture?i=t.displayTexture.dataSource[t.displayFrame.sourceIndex]:t.texture?i=t.texture.dataSource[t.frame.sourceIndex]:t.tileset&&(i=Array.isArray(t.tileset)?t.tileset[0].image.dataSource[0]:t.tileset.image.dataSource[0]):i=this.defaultNormalMap,i||(i=this.defaultNormalMap),i.glTexture},batchSprite:function batchSprite(t,i,r){this.lightsActive&&l.prototype.batchSprite.call(this,t,i,r)},batchTexture:function batchTexture(t,i,r,o,a,h,u,c,d,p,g,v,m,y,T,S,w,b,C,A,E,M,_,R,P,k,O,L,D,I,B,N){this.lightsActive&&l.prototype.batchTexture.call(this,t,i,r,o,a,h,u,c,d,p,g,v,m,y,T,S,w,b,C,A,E,M,_,R,P,k,O,L,D,I,B,N)},batchTextureFrame:function batchTextureFrame(t,i,r,o,a,h,u){this.lightsActive&&l.prototype.batchTextureFrame.call(this,t,i,r,o,a,h,u)}});g.LIGHT_COUNT=d,t.exports=g},function(t,i,r){var o=r(0),a=r(2),h=r(880),l=r(881),u=r(58),c=new o({Extends:u,initialize:function PointLightPipeline(t){t.vertShader=a(t,"vertShader",l),t.fragShader=a(t,"fragShader",h),t.attributes=a(t,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),u.call(this,t)},onRender:function onRender(t,i){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",i.zoom)},batchPointLight:function batchPointLight(t,i,r,o,a,h,l,u,c,d,p,g){var v=t.color,m=t.intensity,y=t.radius,T=t.attenuation,S=v.r*m,w=v.g*m,b=v.b*m,C=i.alpha*t.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(r,o,p,g,y,T,S,w,b,C),this.batchLightVert(a,h,p,g,y,T,S,w,b,C),this.batchLightVert(l,u,p,g,y,T,S,w,b,C),this.batchLightVert(r,o,p,g,y,T,S,w,b,C),this.batchLightVert(l,u,p,g,y,T,S,w,b,C),this.batchLightVert(c,d,p,g,y,T,S,w,b,C)},batchLightVert:function batchLightVert(t,i,r,o,a,h,l,u,c,d){var p=this.vertexViewF32,g=this.vertexCount*this.currentShader.vertexComponentCount-1;p[++g]=t,p[++g]=i,p[++g]=r,p[++g]=o,p[++g]=a,p[++g]=h,p[++g]=l,p[++g]=u,p[++g]=c,p[++g]=d,this.vertexCount++}});t.exports=c},function(t,i,r){var o=r(0),a=r(2),h=r(108),l=new o({Extends:h,initialize:function RopePipeline(t){t.topology=5,t.batchSize=a(t,"batchSize",256),h.call(this,t)}});t.exports=l},function(t,i,r){var o=r(0),a=r(2),h=r(108),l=r(882),u=r(883),c=r(58),d=new o({Extends:h,initialize:function SinglePipeline(t){t.fragShader=a(t,"fragShader",l),t.vertShader=a(t,"vertShader",u),t.forceZero=!0,h.call(this,t)},boot:function boot(){c.prototype.boot.call(this),this.set1i("uMainSampler",0)}});t.exports=d},function(t,i,r){var o=r(884),a=r(35),h=r(0),l=r(198),u=r(885),c=r(886),d=r(2),p=r(887),g=r(382),v=r(58),m=new h({Extends:v,initialize:function UtilityPipeline(t){t.renderTarget=d(t,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),t.vertShader=d(t,"vertShader",g),t.shaders=d(t,"shaders",[{name:"Copy",fragShader:c},{name:"AddBlend",fragShader:o},{name:"LinearBlend",fragShader:p},{name:"ColorMatrix",fragShader:u}]),t.attributes=d(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],t.batchSize=1,v.call(this,t),this.colorMatrix=new l,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function boot(){v.prototype.boot.call(this);var t=this.shaders,i=this.renderTargets;this.copyShader=t[0],this.addShader=t[1],this.linearShader=t[2],this.colorMatrixShader=t[3],this.fullFrame1=i[0],this.fullFrame2=i[1],this.halfFrame1=i[2],this.halfFrame2=i[3]},copyFrame:function copyFrame(t,i,r,o,a){void 0===r&&(r=1),void 0===o&&(o=!0),void 0===a&&(a=!0);var h=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",r),h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,t.texture),i?(h.viewport(0,0,i.width,i.height),h.bindFramebuffer(h.FRAMEBUFFER,i.framebuffer),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,i.texture,0)):h.viewport(0,0,t.width,t.height),o&&(a?h.clearColor(0,0,0,0):h.clearColor(0,0,0,1),h.clear(h.COLOR_BUFFER_BIT)),h.bufferData(h.ARRAY_BUFFER,this.vertexData,h.STATIC_DRAW),h.drawArrays(h.TRIANGLES,0,6),h.bindFramebuffer(h.FRAMEBUFFER,null),h.bindTexture(h.TEXTURE_2D,null)},blitFrame:function blitFrame(t,i,r,o,h,l){void 0===r&&(r=1),void 0===o&&(o=!0),void 0===h&&(h=!0),void 0===l&&(l=!1);var u=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",r),u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,t.texture),t.height>i.height)u.viewport(0,0,t.width,t.height),this.setTargetUVs(t,i);else{var c=i.height-t.height;u.viewport(0,c,t.width,t.height)}if(u.bindFramebuffer(u.FRAMEBUFFER,i.framebuffer),u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,i.texture,0),o&&(h?u.clearColor(0,0,0,0):u.clearColor(0,0,0,1),u.clear(u.COLOR_BUFFER_BIT)),l){var d=this.renderer.currentBlendMode;this.renderer.setBlendMode(a.ERASE)}u.bufferData(u.ARRAY_BUFFER,this.vertexData,u.STATIC_DRAW),u.drawArrays(u.TRIANGLES,0,6),l&&this.renderer.setBlendMode(d),u.bindFramebuffer(u.FRAMEBUFFER,null),u.bindTexture(u.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function copyFrameRect(t,i,r,o,a,h,l,u){void 0===l&&(l=!0),void 0===u&&(u=!0);var c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,t.framebuffer),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,t.texture,0),l&&(u?c.clearColor(0,0,0,0):c.clearColor(0,0,0,1),c.clear(c.COLOR_BUFFER_BIT)),c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,i.texture),c.copyTexSubImage2D(c.TEXTURE_2D,0,0,0,r,o,a,h),c.bindFramebuffer(c.FRAMEBUFFER,null),c.bindTexture(c.TEXTURE_2D,null)},copyToGame:function copyToGame(t){var i=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,t.texture),i.bufferData(i.ARRAY_BUFFER,this.vertexData,i.STATIC_DRAW),i.drawArrays(i.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function drawFrame(t,i,r,o){void 0===r&&(r=!0),void 0===o&&(o=this.colorMatrix);var a=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",o.getData()),this.set1f("uAlpha",o.alpha),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,t.texture),i?(a.viewport(0,0,i.width,i.height),a.bindFramebuffer(a.FRAMEBUFFER,i.framebuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,i.texture,0)):a.viewport(0,0,t.width,t.height),r?a.clearColor(0,0,0,0):a.clearColor(0,0,0,1),a.clear(a.COLOR_BUFFER_BIT),a.bufferData(a.ARRAY_BUFFER,this.vertexData,a.STATIC_DRAW),a.drawArrays(a.TRIANGLES,0,6),a.bindFramebuffer(a.FRAMEBUFFER,null),a.bindTexture(a.TEXTURE_2D,null)},blendFrames:function blendFrames(t,i,r,o,a,h){void 0===o&&(o=1),void 0===a&&(a=!0),void 0===h&&(h=this.linearShader);var l=this.gl;this.setShader(h),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",o),l.activeTexture(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,t.texture),l.activeTexture(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,i.texture),r?(l.bindFramebuffer(l.FRAMEBUFFER,r.framebuffer),l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,r.texture,0),l.viewport(0,0,r.width,r.height)):l.viewport(0,0,t.width,t.height),a?l.clearColor(0,0,0,0):l.clearColor(0,0,0,1),l.clear(l.COLOR_BUFFER_BIT),l.bufferData(l.ARRAY_BUFFER,this.vertexData,l.STATIC_DRAW),l.drawArrays(l.TRIANGLES,0,6),l.bindFramebuffer(l.FRAMEBUFFER,null),l.bindTexture(l.TEXTURE_2D,null)},blendFramesAdditive:function blendFramesAdditive(t,i,r,o,a){this.blendFrames(t,i,r,o,a,this.addShader)},clearFrame:function clearFrame(t,i){void 0===i&&(i=!0);var r=this.gl;r.viewport(0,0,t.width,t.height),r.bindFramebuffer(r.FRAMEBUFFER,t.framebuffer),i?r.clearColor(0,0,0,0):r.clearColor(0,0,0,1),r.clear(r.COLOR_BUFFER_BIT);var o=this.renderer.currentFramebuffer;r.bindFramebuffer(r.FRAMEBUFFER,o)},setUVs:function setUVs(t,i,r,o,a,h,l,u){var c=this.vertexViewF32;c[2]=t,c[3]=i,c[6]=r,c[7]=o,c[10]=a,c[11]=h,c[14]=t,c[15]=i,c[18]=a,c[19]=h,c[22]=l,c[23]=u},setTargetUVs:function setTargetUVs(t,i){var r=i.height/t.height;r=r>.5?.5-(r-.5):.5-r+.5,this.setUVs(0,r,0,1+r,1,1+r,1,r)},flipX:function flipX(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function flipY(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function resetUVs(){this.setUVs(0,0,0,1,1,1,1,0)}});t.exports=m},function(t,i){t.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join("\n")},function(t,i,r){var o=r(31),a=r(38),h=r(2);t.exports=function WebGLSnapshot(t,i){var r=t.getContext("experimental-webgl"),l=h(i,"callback"),u=h(i,"type","image/png"),c=h(i,"encoder",.92),d=h(i,"x",0),p=h(i,"y",0),g=h(i,"getPixel",!1),v=h(i,"isFramebuffer",!1),m=v?h(i,"bufferWidth",1):r.drawingBufferWidth,y=v?h(i,"bufferHeight",1):r.drawingBufferHeight;if(g){var T=new Uint8Array(4),S=v?p:y-p;r.readPixels(d,S,1,1,r.RGBA,r.UNSIGNED_BYTE,T),l.call(null,new a(T[0],T[1],T[2],T[3]/255))}else{var w=h(i,"width",m),b=h(i,"height",y),C=new Uint8Array(w*b*4);r.readPixels(d,y-p-b,w,b,r.RGBA,r.UNSIGNED_BYTE,C);for(var A=o.createWebGL(this,w,b),E=A.getContext("2d"),M=E.getImageData(0,0,w,b),_=M.data,R=0;R<b;R++)for(var P=0;P<w;P++){var k=4*((b-R-1)*w+P),O=4*(R*w+P);_[O+0]=C[k+0],_[O+1]=C[k+1],_[O+2]=C[k+2],_[O+3]=C[k+3]}E.putImageData(M,0,0);var L=new Image;L.onerror=function(){l.call(null),o.remove(A)},L.onload=function(){l.call(null,L),o.remove(A)},L.src=A.toDataURL(u,c)}}},function(t,i,r){var o=r(33);t.exports=function DebugHeader(t){var i=t.config;if(!i.hideBanner){var r="WebGL";i.renderType===o.CANVAS?r="Canvas":i.renderType===o.HEADLESS&&(r="Headless");var a,h=i.audio,l=t.device.audio;if(a=l.webAudio&&!h.disableWebAudio?"Web Audio":h.noAudio||!l.webAudio&&!l.audioData?"No Audio":"HTML5 Audio",t.device.browser.ie)window.console&&console.log("Phaser v"+o.VERSION+" / https://phaser.io");else{var u,c="",d=[c];Array.isArray(i.bannerBackgroundColor)?(i.bannerBackgroundColor.forEach((function(t){c=c.concat("%c "),d.push("background: "+t),u=t})),d[d.length-1]="color: "+i.bannerTextColor+"; background: "+u):(c=c.concat("%c "),d.push("color: "+i.bannerTextColor+"; background: "+i.bannerBackgroundColor)),d.push("background: transparent"),i.gameTitle&&(c=c.concat(i.gameTitle),i.gameVersion&&(c=c.concat(" v"+i.gameVersion)),i.hidePhaser||(c=c.concat(" / "))),i.hidePhaser||(c=c.concat("Phaser v"+o.VERSION+" ("+r+" | "+a+")")),c=c.concat(" %c "+i.gameURL),d[0]=c,console.log.apply(console,d)}}}},function(t,i,r){var o=r(0),a=r(6),h=r(1),l=r(386),u=new o({initialize:function TimeStep(t,i){this.game=t,this.raf=new l,this.started=!1,this.running=!1,this.minFps=a(i,"min",5),this.targetFps=a(i,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=h,this.forceSetTimeOut=a(i,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=a(i,"deltaHistory",10),this.panicMax=a(i,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=a(i,"smoothStep",!0)},blur:function blur(){this.inFocus=!1},focus:function focus(){this.inFocus=!0,this.resetDelta()},pause:function pause(){this._pauseTime=window.performance.now()},resume:function resume(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function resetDelta(){var t=window.performance.now();this.time=t,this.lastTime=t,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0;for(var i=0;i<this.deltaSmoothingMax;i++)this.deltaHistory[i]=Math.min(this._target,this.deltaHistory[i]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function start(t){if(this.started)return this;this.started=!0,this.running=!0;for(var i=0;i<this.deltaSmoothingMax;i++)this.deltaHistory[i]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=t,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function step(){var t=window.performance.now();this.now=t;var i=t-this.lastTime;i<0&&(i=0),this.rawDelta=i;var r=this.deltaIndex,o=this.deltaHistory,a=this.deltaSmoothingMax,h=i,l=i;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,h=Math.min(h,this._target)),h>this._min&&(h=o[r],h=Math.min(h,this._min)),o[r]=h,this.deltaIndex++,this.deltaIndex>a&&(this.deltaIndex=0),l=0;for(var u=0;u<a;u++)l+=o[u];l/=a}this.delta=l,this.time+=this.rawDelta,t>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0),this.framesThisSecond++;var c=l/this._target;this.callback(t,l,c),this.lastTime=t,this.frame++},tick:function tick(){this.step()},sleep:function sleep(){this.running&&(this.raf.stop(),this.running=!1)},wake:function wake(t){this.running||(t&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function getDuration(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function getDurationMS(){return Math.round(this.lastTime-this.startTime)},stop:function stop(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function destroy(){this.stop(),this.callback=h,this.raf=null,this.game=null}});t.exports=u},function(t,i,r){var o=r(0),a=r(1),h=new o({initialize:function RequestAnimationFrame(){this.isRunning=!1,this.callback=a,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var t=this;this.step=function step(){var i=window.performance.now();t.lastTime=t.tick,t.tick=i,t.callback(i),t.timeOutID=window.requestAnimationFrame(step)},this.stepTimeout=function stepTimeout(){var i=Date.now(),r=Math.min(Math.max(2*t.target+t.tick-i,0),t.target);t.lastTime=t.tick,t.tick=i,t.callback(i),t.timeOutID=window.setTimeout(stepTimeout,r)}},start:function start(t,i,r){this.isRunning||(this.callback=t,this.isSetTimeOut=i,this.target=r,this.isRunning=!0,this.timeOutID=i?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function stop(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function destroy(){this.stop(),this.callback=a}});t.exports=h},function(t,i,r){var o=r(22);t.exports=function VisibilityHandler(t){var i,r=t.events;void 0!==document.hidden?i="visibilitychange":["webkit","moz","ms"].forEach((function(t){void 0!==document[t+"Hidden"]&&(document.hidden=function(){return document[t+"Hidden"]},i=t+"visibilitychange")})),i&&document.addEventListener(i,(function onChange(t){document.hidden||"pause"===t.type?r.emit(o.HIDDEN):r.emit(o.VISIBLE)}),!1),window.onblur=function(){r.emit(o.BLUR)},window.onfocus=function(){r.emit(o.FOCUS)},window.focus&&t.config.autoFocus&&window.focus()}},function(t,i,r){var o=r(389),a=r(31),h=r(6);t.exports=function GenerateTexture(t){var i=h(t,"data",[]),r=h(t,"canvas",null),l=h(t,"palette",o),u=h(t,"pixelWidth",1),c=h(t,"pixelHeight",u),d=h(t,"resizeCanvas",!0),p=h(t,"clearCanvas",!0),g=h(t,"preRender",null),v=h(t,"postRender",null),m=Math.floor(Math.abs(i[0].length*u)),y=Math.floor(Math.abs(i.length*c));r||(r=a.create2D(this,m,y),d=!1,p=!1),d&&(r.width=m,r.height=y);var T=r.getContext("2d");p&&T.clearRect(0,0,m,y),g&&g(r,T);for(var S=0;S<i.length;S++)for(var w=i[S],b=0;b<w.length;b++){var C=w[b];"."!==C&&" "!==C&&(T.fillStyle=l[C],T.fillRect(b*u,S*c,u,c))}return v&&v(r,T),r}},function(t,i){t.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(t,i,r){var o=r(0),a=r(358),h=r(94),l=r(3),u=new o({Extends:h,initialize:function CubicBezierCurve(t,i,r,o){h.call(this,"CubicBezierCurve"),Array.isArray(t)&&(o=new l(t[6],t[7]),r=new l(t[4],t[5]),i=new l(t[2],t[3]),t=new l(t[0],t[1])),this.p0=t,this.p1=i,this.p2=r,this.p3=o},getStartPoint:function getStartPoint(t){return void 0===t&&(t=new l),t.copy(this.p0)},getResolution:function getResolution(t){return t},getPoint:function getPoint(t,i){void 0===i&&(i=new l);var r=this.p0,o=this.p1,h=this.p2,u=this.p3;return i.set(a(t,r.x,o.x,h.x,u.x),a(t,r.y,o.y,h.y,u.y))},draw:function draw(t,i){void 0===i&&(i=32);var r=this.getPoints(i);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var o=1;o<r.length;o++)t.lineTo(r[o].x,r[o].y);return t.strokePath(),t},toJSON:function toJSON(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});u.fromJSON=function(t){var i=t.points,r=new l(i[0],i[1]),o=new l(i[2],i[3]),a=new l(i[4],i[5]),h=new l(i[6],i[7]);return new u(r,o,a,h)},t.exports=u},function(t,i,r){var o=r(0),a=r(94),h=r(36),l=r(6),u=r(196),c=r(3),d=new o({Extends:a,initialize:function EllipseCurve(t,i,r,o,u,d,p,g){if("object"===_typeof(t)){var v=t;t=l(v,"x",0),i=l(v,"y",0),r=l(v,"xRadius",0),o=l(v,"yRadius",r),u=l(v,"startAngle",0),d=l(v,"endAngle",360),p=l(v,"clockwise",!1),g=l(v,"rotation",0)}else void 0===o&&(o=r),void 0===u&&(u=0),void 0===d&&(d=360),void 0===p&&(p=!1),void 0===g&&(g=0);a.call(this,"EllipseCurve"),this.p0=new c(t,i),this._xRadius=r,this._yRadius=o,this._startAngle=h(u),this._endAngle=h(d),this._clockwise=p,this._rotation=h(g)},getStartPoint:function getStartPoint(t){return void 0===t&&(t=new c),this.getPoint(0,t)},getResolution:function getResolution(t){return 2*t},getPoint:function getPoint(t,i){void 0===i&&(i=new c);for(var r=2*Math.PI,o=this._endAngle-this._startAngle,a=Math.abs(o)<Number.EPSILON;o<0;)o+=r;for(;o>r;)o-=r;o<Number.EPSILON&&(o=a?0:r),this._clockwise&&!a&&(o===r?o=-r:o-=r);var h=this._startAngle+t*o,l=this.p0.x+this._xRadius*Math.cos(h),u=this.p0.y+this._yRadius*Math.sin(h);if(0!==this._rotation){var d=Math.cos(this._rotation),p=Math.sin(this._rotation),g=l-this.p0.x,v=u-this.p0.y;l=g*d-v*p+this.p0.x,u=g*p+v*d+this.p0.y}return i.set(l,u)},setXRadius:function setXRadius(t){return this.xRadius=t,this},setYRadius:function setYRadius(t){return this.yRadius=t,this},setWidth:function setWidth(t){return this.xRadius=t/2,this},setHeight:function setHeight(t){return this.yRadius=t/2,this},setStartAngle:function setStartAngle(t){return this.startAngle=t,this},setEndAngle:function setEndAngle(t){return this.endAngle=t,this},setClockwise:function setClockwise(t){return this.clockwise=t,this},setRotation:function setRotation(t){return this.rotation=t,this},x:{get:function get(){return this.p0.x},set:function set(t){this.p0.x=t}},y:{get:function get(){return this.p0.y},set:function set(t){this.p0.y=t}},xRadius:{get:function get(){return this._xRadius},set:function set(t){this._xRadius=t}},yRadius:{get:function get(){return this._yRadius},set:function set(t){this._yRadius=t}},startAngle:{get:function get(){return u(this._startAngle)},set:function set(t){this._startAngle=h(t)}},endAngle:{get:function get(){return u(this._endAngle)},set:function set(t){this._endAngle=h(t)}},clockwise:{get:function get(){return this._clockwise},set:function set(t){this._clockwise=t}},angle:{get:function get(){return u(this._rotation)},set:function set(t){this._rotation=h(t)}},rotation:{get:function get(){return this._rotation},set:function set(t){this._rotation=t}},toJSON:function toJSON(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:u(this._startAngle),endAngle:u(this._endAngle),clockwise:this._clockwise,rotation:u(this._rotation)}}});d.fromJSON=function(t){return new d(t)},t.exports=d},function(t,i,r){var o=r(0),a=r(94),h=r(199),l=r(10),u=r(3),c=new o({Extends:a,initialize:function LineCurve(t,i){a.call(this,"LineCurve"),Array.isArray(t)&&(i=new u(t[2],t[3]),t=new u(t[0],t[1])),this.p0=t,this.p1=i,this.arcLengthDivisions=1},getBounds:function getBounds(t){return void 0===t&&(t=new l),h([this.p0,this.p1],t)},getStartPoint:function getStartPoint(t){return void 0===t&&(t=new u),t.copy(this.p0)},getResolution:function getResolution(t){return void 0===t&&(t=1),t},getPoint:function getPoint(t,i){return void 0===i&&(i=new u),1===t?i.copy(this.p1):(i.copy(this.p1).subtract(this.p0).scale(t).add(this.p0),i)},getPointAt:function getPointAt(t,i){return this.getPoint(t,i)},getTangent:function getTangent(t,i){return void 0===i&&(i=new u),i.copy(this.p1).subtract(this.p0).normalize(),i},getUtoTmapping:function getUtoTmapping(t,i,r){var o;if(i){var a=this.getLengths(r),h=a[a.length-1];o=Math.min(i,h)/h}else o=t;return o},draw:function draw(t){return t.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),t},toJSON:function toJSON(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});c.fromJSON=function(t){var i=t.points,r=new u(i[0],i[1]),o=new u(i[2],i[3]);return new c(r,o)},t.exports=c},function(t,i,r){var o=r(0),a=r(3),h=new o({initialize:function MoveTo(t,i){this.active=!1,this.p0=new a(t,i)},getPoint:function getPoint(t,i){return void 0===i&&(i=new a),i.copy(this.p0)},getPointAt:function getPointAt(t,i){return this.getPoint(t,i)},getResolution:function getResolution(){return 1},getLength:function getLength(){return 0},toJSON:function toJSON(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});t.exports=h},function(t,i,r){var o=r(0),a=r(94),h=r(359),l=r(3),u=new o({Extends:a,initialize:function QuadraticBezier(t,i,r){a.call(this,"QuadraticBezier"),Array.isArray(t)&&(r=new l(t[4],t[5]),i=new l(t[2],t[3]),t=new l(t[0],t[1])),this.p0=t,this.p1=i,this.p2=r},getStartPoint:function getStartPoint(t){return void 0===t&&(t=new l),t.copy(this.p0)},getResolution:function getResolution(t){return t},getPoint:function getPoint(t,i){void 0===i&&(i=new l);var r=this.p0,o=this.p1,a=this.p2;return i.set(h(t,r.x,o.x,a.x),h(t,r.y,o.y,a.y))},draw:function draw(t,i){void 0===i&&(i=32);var r=this.getPoints(i);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var o=1;o<r.length;o++)t.lineTo(r[o].x,r[o].y);return t.strokePath(),t},toJSON:function toJSON(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});u.fromJSON=function(t){var i=t.points,r=new l(i[0],i[1]),o=new l(i[2],i[3]),a=new l(i[4],i[5]);return new u(r,o,a)},t.exports=u},function(t,i,r){var o=r(194),a=r(0),h=r(94),l=r(3),u=new a({Extends:h,initialize:function SplineCurve(t){void 0===t&&(t=[]),h.call(this,"SplineCurve"),this.points=[],this.addPoints(t)},addPoints:function addPoints(t){for(var i=0;i<t.length;i++){var r=new l;"number"==typeof t[i]?(r.x=t[i],r.y=t[i+1],i++):Array.isArray(t[i])?(r.x=t[i][0],r.y=t[i][1]):(r.x=t[i].x,r.y=t[i].y),this.points.push(r)}return this},addPoint:function addPoint(t,i){var r=new l(t,i);return this.points.push(r),r},getStartPoint:function getStartPoint(t){return void 0===t&&(t=new l),t.copy(this.points[0])},getResolution:function getResolution(t){return t*this.points.length},getPoint:function getPoint(t,i){void 0===i&&(i=new l);var r=this.points,a=(r.length-1)*t,h=Math.floor(a),u=a-h,c=r[0===h?h:h-1],d=r[h],p=r[h>r.length-2?r.length-1:h+1],g=r[h>r.length-3?r.length-1:h+2];return i.set(o(u,c.x,d.x,p.x,g.x),o(u,c.y,d.y,p.y,g.y))},toJSON:function toJSON(){for(var t=[],i=0;i<this.points.length;i++)t.push(this.points[i].x),t.push(this.points[i].y);return{type:this.type,points:t}}});u.fromJSON=function(t){return new u(t.points)},t.exports=u},function(t,i,r){var o=new(r(0))({initialize:function BaseShader(t,i,r,o){i&&""!==i||(i=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join("\n")),r&&""!==r||(r=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join("\n")),void 0===o&&(o=null),this.key=t,this.fragmentSrc=i,this.vertexSrc=r,this.uniforms=o}});t.exports=o},function(t,i,r){var o=r(38);o.ColorSpectrum=r(909),o.ColorToRGBA=r(910),o.ComponentToHex=r(398),o.GetColor=r(103),o.GetColor32=r(328),o.HexStringToColor=r(327),o.HSLToColor=r(911),o.HSVColorWheel=r(912),o.HSVToRGB=r(188),o.HueToComponent=r(399),o.IntegerToColor=r(189),o.IntegerToRGB=r(330),o.Interpolate=r(913),o.ObjectToColor=r(331),o.RandomRGB=r(914),o.RGBStringToColor=r(332),o.RGBToHSV=r(329),o.RGBToString=r(915),o.ValueToColor=r(187),t.exports=o},function(t,i){t.exports=function ComponentToHex(t){var i=t.toString(16);return 1===i.length?"0"+i:i}},function(t,i){t.exports=function HueToComponent(t,i,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(i-t)*r:r<.5?i:r<2/3?t+(i-t)*(2/3-r)*6:t}},function(t,i,r){var o=r(105);t.exports=function DOMContentLoaded(t){if("complete"!==document.readyState&&"interactive"!==document.readyState){var i=function check(){document.removeEventListener("deviceready",check,!0),document.removeEventListener("DOMContentLoaded",check,!0),window.removeEventListener("load",check,!0),t()};document.body?o.cordova?document.addEventListener("deviceready",i,!1):(document.addEventListener("DOMContentLoaded",i,!0),window.addEventListener("load",i,!0)):window.setTimeout(i,20)}else t()}},function(t,i){t.exports=function GetInnerHeight(t){if(!t)return window.innerHeight;var i=Math.abs(window.orientation),r={w:0,h:0},o=document.createElement("div");return o.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(o),r.w=90===i?o.offsetHeight:window.innerWidth,r.h=90===i?window.innerWidth:o.offsetHeight,document.documentElement.removeChild(o),o=null,90!==Math.abs(window.orientation)?r.h:r.w}},function(t,i,r){var o=r(201);t.exports=function GetScreenOrientation(t,i){var r=window.screen,a=!!r&&(r.orientation||r.mozOrientation||r.msOrientation);return a&&"string"==typeof a.type?a.type:"string"==typeof a?a:"number"==typeof window.orientation?0===window.orientation||180===window.orientation?o.ORIENTATION.PORTRAIT:o.ORIENTATION.LANDSCAPE:window.matchMedia?window.matchMedia("(orientation: portrait)").matches?o.ORIENTATION.PORTRAIT:window.matchMedia("(orientation: landscape)").matches?o.ORIENTATION.LANDSCAPE:void 0:i>t?o.ORIENTATION.PORTRAIT:o.ORIENTATION.LANDSCAPE}},function(t,i){t.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(t,i){t.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(t,i){t.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(t,i){t.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(t,i){t.exports=function GetTarget(t){var i;return""!==t&&("string"==typeof t?i=document.getElementById(t):t&&1===t.nodeType&&(i=t)),i||(i=document.body),i}},function(t,i){t.exports=function ParseXML(t){var i="";try{window.DOMParser?i=(new DOMParser).parseFromString(t,"text/xml"):(i=new ActiveXObject("Microsoft.XMLDOM")).loadXML(t)}catch(r){i=null}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length?i:null}},function(t,i,r){var o=r(0),a=r(203),h=r(9),l=r(51),u=r(22),c=r(410),d=r(411),p=r(412),g=r(413),v=r(25),m=r(177),y=new o({initialize:function InputManager(t,i){this.game=t,this.scaleManager,this.canvas,this.config=i,this.enabled=!0,this.events=new h,this.isOver=!0,this.defaultCursor="",this.keyboard=i.inputKeyboard?new c(this):null,this.mouse=i.inputMouse?new d(this):null,this.touch=i.inputTouch?new g(this):null,this.pointers=[],this.pointersTotal=i.inputActivePointers,i.inputTouch&&1===this.pointersTotal&&(this.pointersTotal=2);for(var r=0;r<=this.pointersTotal;r++){var o=new p(this,r);o.smoothFactor=i.inputSmoothFactor,this.pointers.push(o)}this.mousePointer=i.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new v,this._tempMatrix2=new v,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],t.events.once(u.BOOT,this.boot,this)},boot:function boot(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(l.MANAGER_BOOT),this.game.events.on(u.PRE_RENDER,this.preRender,this),this.game.events.once(u.DESTROY,this.destroy,this)},setCanvasOver:function setCanvasOver(t){this.isOver=!0,this.events.emit(l.GAME_OVER,t)},setCanvasOut:function setCanvasOut(t){this.isOver=!1,this.events.emit(l.GAME_OUT,t)},preRender:function preRender(){var t=this.game.loop.now,i=this.game.loop.delta,r=this.game.scene.getScenes(!0,!0);this.time=t,this.events.emit(l.MANAGER_UPDATE);for(var o=0;o<r.length;o++){var a=r[o];if(a.sys.input&&a.sys.input.updatePoll(t,i)&&this.globalTopOnly)return}},setDefaultCursor:function setDefaultCursor(t){this.defaultCursor=t,this.canvas.style.cursor!==t&&(this.canvas.style.cursor=t)},setCursor:function setCursor(t){t.cursor&&(this.canvas.style.cursor=t.cursor)},resetCursor:function resetCursor(t){t.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function addPointer(t){void 0===t&&(t=1);var i=[];this.pointersTotal+t>10&&(t=10-this.pointersTotal);for(var r=0;r<t;r++){var o=this.pointers.length,a=new p(this,o);a.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(a),this.pointersTotal++,i.push(a)}return i},updateInputPlugins:function updateInputPlugins(t,i){var r=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var o=0;o<r.length;o++){var a=r[o];if(a.sys.input&&(a.sys.input.update(t,i)&&this.globalTopOnly||this._tempSkip))return}},onTouchStart:function onTouchStart(t){for(var i=this.pointers,r=[],o=0;o<t.changedTouches.length;o++)for(var h=t.changedTouches[o],l=1;l<this.pointersTotal;l++){var u=i[l];if(!u.active){u.touchstart(h,t),this.activePointer=u,r.push(u);break}}this.updateInputPlugins(a.TOUCH_START,r)},onTouchMove:function onTouchMove(t){for(var i=this.pointers,r=[],o=0;o<t.changedTouches.length;o++)for(var h=t.changedTouches[o],l=1;l<this.pointersTotal;l++){var u=i[l];if(u.active&&u.identifier===h.identifier){u.touchmove(h,t),this.activePointer=u,r.push(u);break}}this.updateInputPlugins(a.TOUCH_MOVE,r)},onTouchEnd:function onTouchEnd(t){for(var i=this.pointers,r=[],o=0;o<t.changedTouches.length;o++)for(var h=t.changedTouches[o],l=1;l<this.pointersTotal;l++){var u=i[l];if(u.active&&u.identifier===h.identifier){u.touchend(h,t),r.push(u);break}}this.updateInputPlugins(a.TOUCH_END,r)},onTouchCancel:function onTouchCancel(t){for(var i=this.pointers,r=[],o=0;o<t.changedTouches.length;o++)for(var h=t.changedTouches[o],l=1;l<this.pointersTotal;l++){var u=i[l];if(u.active&&u.identifier===h.identifier){u.touchcancel(h,t),r.push(u);break}}this.updateInputPlugins(a.TOUCH_CANCEL,r)},onMouseDown:function onMouseDown(t){var i=this.mousePointer;i.down(t),i.updateMotion(),this.activePointer=i,this.updateInputPlugins(a.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function onMouseMove(t){var i=this.mousePointer;i.move(t),i.updateMotion(),this.activePointer=i,this.updateInputPlugins(a.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function onMouseUp(t){var i=this.mousePointer;i.up(t),i.updateMotion(),this.activePointer=i,this.updateInputPlugins(a.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function onMouseWheel(t){var i=this.mousePointer;i.wheel(t),this.activePointer=i,this.updateInputPlugins(a.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function onPointerLockChange(t){var i=this.mouse.locked;this.mousePointer.locked=i,this.events.emit(l.POINTERLOCK_CHANGE,t,i)},inputCandidate:function inputCandidate(t,i){var r=t.input;if(!r||!r.enabled||!r.alwaysEnabled&&!t.willRender(i))return!1;var o=!0,a=t.parentContainer;if(a)do{if(!a.willRender(i)){o=!1;break}a=a.parentContainer}while(a);return o},hitTest:function hitTest(t,i,r,o){void 0===o&&(o=this._tempHitTest);var a=this._tempPoint,h=r.scrollX,l=r.scrollY;o.length=0;var u=t.x,c=t.y;r.getWorldPoint(u,c,a),t.worldX=a.x,t.worldY=a.y;for(var d={x:0,y:0},p=this._tempMatrix,g=this._tempMatrix2,v=0;v<i.length;v++){var y=i[v];if(this.inputCandidate(y,r)){var T=a.x+h*y.scrollFactorX-h,S=a.y+l*y.scrollFactorY-l;y.parentContainer?(y.getWorldTransformMatrix(p,g),p.applyInverse(T,S,d)):m(T,S,y.x,y.y,y.rotation,y.scaleX,y.scaleY,d),this.pointWithinHitArea(y,d.x,d.y)&&o.push(y)}}return o},pointWithinHitArea:function pointWithinHitArea(t,i,r){i+=t.displayOriginX,r+=t.displayOriginY;var o=t.input;return!(!o||!o.hitAreaCallback(o.hitArea,i,r,t)||(o.localX=i,o.localY=r,0))},pointWithinInteractiveObject:function pointWithinInteractiveObject(t,i,r){return!!t.hitArea&&(i+=t.gameObject.displayOriginX,r+=t.gameObject.displayOriginY,t.localX=i,t.localY=r,t.hitAreaCallback(t.hitArea,i,r,t))},transformPointer:function transformPointer(t,i,r,o){var a=t.position,h=t.prevPosition;h.x=a.x,h.y=a.y;var l=this.scaleManager.transformX(i),u=this.scaleManager.transformY(r),c=t.smoothFactor;o&&0!==c?(a.x=l*c+h.x*(1-c),a.y=u*c+h.y*(1-c)):(a.x=l,a.y=u)},destroy:function destroy(){this.events.removeAllListeners(),this.game.events.off(u.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var t=0;t<this.pointers.length;t++)this.pointers[t].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});t.exports=y},function(t,i,r){var o=r(93),a=r(0),h=r(22),l=r(51),u=r(143),c=r(1),d=new a({initialize:function KeyboardManager(t){this.manager=t,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=c,this.onKeyUp=c,t.events.once(l.MANAGER_BOOT,this.boot,this)},boot:function boot(){var t=this.manager.config;this.enabled=t.inputKeyboard,this.target=t.inputKeyboardEventTarget,this.addCapture(t.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(h.POST_STEP,this.postUpdate,this)},startListeners:function startListeners(){var t=this;this.onKeyDown=function(i){if(!i.defaultPrevented&&t.enabled&&t.manager){t.queue.push(i),t.manager.events.emit(l.MANAGER_PROCESS);var r=i.altKey||i.ctrlKey||i.shiftKey||i.metaKey;t.preventDefault&&!r&&t.captures.indexOf(i.keyCode)>-1&&i.preventDefault()}},this.onKeyUp=function(i){if(!i.defaultPrevented&&t.enabled&&t.manager){t.queue.push(i),t.manager.events.emit(l.MANAGER_PROCESS);var r=i.altKey||i.ctrlKey||i.shiftKey||i.metaKey;t.preventDefault&&!r&&t.captures.indexOf(i.keyCode)>-1&&i.preventDefault()}};var i=this.target;i&&(i.addEventListener("keydown",this.onKeyDown,!1),i.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function stopListeners(){var t=this.target;t.removeEventListener("keydown",this.onKeyDown,!1),t.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function postUpdate(){this.queue=[]},addCapture:function addCapture(t){"string"==typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]);for(var i=this.captures,r=0;r<t.length;r++){var o=t[r];"string"==typeof o&&(o=u[o.trim().toUpperCase()]),-1===i.indexOf(o)&&i.push(o)}this.preventDefault=i.length>0},removeCapture:function removeCapture(t){"string"==typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]);for(var i=this.captures,r=0;r<t.length;r++){var a=t[r];"string"==typeof a&&(a=u[a.toUpperCase()]),o(i,a)}this.preventDefault=i.length>0},clearCaptures:function clearCaptures(){this.captures=[],this.preventDefault=!1},destroy:function destroy(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(h.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});t.exports=d},function(t,i,r){var o=r(0),a=r(191),h=r(51),l=r(1),u=new o({initialize:function MouseManager(t){this.manager=t,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=l,this.onMouseDown=l,this.onMouseUp=l,this.onMouseDownWindow=l,this.onMouseUpWindow=l,this.onMouseOver=l,this.onMouseOut=l,this.onMouseWheel=l,this.pointerLockChange=l,this.isTop=!0,t.events.once(h.MANAGER_BOOT,this.boot,this)},boot:function boot(){var t=this.manager.config;this.enabled=t.inputMouse,this.target=t.inputMouseEventTarget,this.passive=t.inputMousePassive,this.preventDefaultDown=t.inputMousePreventDefaultDown,this.preventDefaultUp=t.inputMousePreventDefaultUp,this.preventDefaultMove=t.inputMousePreventDefaultMove,this.preventDefaultWheel=t.inputMousePreventDefaultWheel,this.target?"string"==typeof this.target&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,t.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function disableContextMenu(){return document.body.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),this},requestPointerLock:function requestPointerLock(){if(a.pointerLock){var t=this.target;t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock()}},releasePointerLock:function releasePointerLock(){a.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function startListeners(){var t=this.target;if(t){var i=this,r=this.manager,o=r.canvas,h=window&&window.focus&&r.game.config.autoFocus;this.onMouseMove=function(t){!t.defaultPrevented&&i.enabled&&r&&r.enabled&&(r.onMouseMove(t),i.preventDefaultMove&&t.preventDefault())},this.onMouseDown=function(t){h&&window.focus(),!t.defaultPrevented&&i.enabled&&r&&r.enabled&&(r.onMouseDown(t),i.preventDefaultDown&&t.target===o&&t.preventDefault())},this.onMouseDownWindow=function(t){!t.defaultPrevented&&i.enabled&&r&&r.enabled&&t.target!==o&&r.onMouseDown(t)},this.onMouseUp=function(t){!t.defaultPrevented&&i.enabled&&r&&r.enabled&&(r.onMouseUp(t),i.preventDefaultUp&&t.target===o&&t.preventDefault())},this.onMouseUpWindow=function(t){!t.defaultPrevented&&i.enabled&&r&&r.enabled&&t.target!==o&&r.onMouseUp(t)},this.onMouseOver=function(t){!t.defaultPrevented&&i.enabled&&r&&r.enabled&&r.setCanvasOver(t)},this.onMouseOut=function(t){!t.defaultPrevented&&i.enabled&&r&&r.enabled&&r.setCanvasOut(t)},this.onMouseWheel=function(t){!t.defaultPrevented&&i.enabled&&r&&r.enabled&&r.onMouseWheel(t),i.preventDefaultWheel&&t.target===o&&t.preventDefault()};var l={passive:!0};if(t.addEventListener("mousemove",this.onMouseMove),t.addEventListener("mousedown",this.onMouseDown),t.addEventListener("mouseup",this.onMouseUp),t.addEventListener("mouseover",this.onMouseOver,l),t.addEventListener("mouseout",this.onMouseOut,l),this.preventDefaultWheel?t.addEventListener("wheel",this.onMouseWheel,{passive:!1}):t.addEventListener("wheel",this.onMouseWheel,l),window&&r.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,l),window.top.addEventListener("mouseup",this.onMouseUpWindow,l)}catch(u){window.addEventListener("mousedown",this.onMouseDownWindow,l),window.addEventListener("mouseup",this.onMouseUpWindow,l),this.isTop=!1}a.pointerLock&&(this.pointerLockChange=function(t){var o=i.target;i.locked=document.pointerLockElement===o||document.mozPointerLockElement===o||document.webkitPointerLockElement===o,r.onPointerLockChange(t)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function stopListeners(){var t=this.target;t.removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("mouseover",this.onMouseOver),t.removeEventListener("mouseout",this.onMouseOut),window&&((t=this.isTop?window.top:window).removeEventListener("mousedown",this.onMouseDownWindow),t.removeEventListener("mouseup",this.onMouseUpWindow)),a.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function destroy(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=u},function(t,i,r){var o=r(349),a=r(0),h=r(50),l=r(124),u=r(360),c=r(3),d=r(105),p=new a({initialize:function Pointer(t,i){this.manager=t,this.id=i,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new c,this.prevPosition=new c,this.midPoint=new c(-1,-1),this.velocity=new c,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=0===i,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function updateWorldPoint(t){var i=t.getWorldPoint(this.x,this.y);return this.worldX=i.x,this.worldY=i.y,this},positionToCamera:function positionToCamera(t,i){return t.getWorldPoint(this.x,this.y,i)},updateMotion:function updateMotion(){var t=this.position.x,i=this.position.y,r=this.midPoint.x,a=this.midPoint.y;if(t!==r||i!==a){var h=u(this.motionFactor,r,t),c=u(this.motionFactor,a,i);l(h,t,.1)&&(h=t),l(c,i,.1)&&(c=i),this.midPoint.set(h,c);var d=t-h,p=i-c;this.velocity.set(d,p),this.angle=o(h,c,t,i),this.distance=Math.sqrt(d*d+p*p)}},up:function up(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),0===this.buttons&&(this.isDown=!1,this.upTime=t.timeStamp,this.wasTouch=!1)},down:function down(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),d.macOS&&t.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=t.timeStamp),this.wasTouch=!1},move:function move(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.locked&&(this.movementX=t.movementX||t.mozMovementX||t.webkitMovementX||0,this.movementY=t.movementY||t.mozMovementY||t.webkitMovementY||0),this.moveTime=t.timeStamp,this.wasTouch=!1},wheel:function wheel(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.deltaX=t.deltaX,this.deltaY=t.deltaY,this.deltaZ=t.deltaZ,this.wasTouch=!1},touchstart:function touchstart(t,i){t.pointerId&&(this.pointerId=t.pointerId),this.identifier=t.identifier,this.target=t.target,this.active=!0,this.buttons=1,this.event=i,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=i.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function touchmove(t,i){this.event=i,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.moveTime=i.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function touchend(t,i){this.buttons=0,this.event=i,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=i.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function touchcancel(t,i){this.buttons=0,this.event=i,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=i.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function noButtonDown(){return 0===this.buttons},leftButtonDown:function leftButtonDown(){return!!(1&this.buttons)},rightButtonDown:function rightButtonDown(){return!!(2&this.buttons)},middleButtonDown:function middleButtonDown(){return!!(4&this.buttons)},backButtonDown:function backButtonDown(){return!!(8&this.buttons)},forwardButtonDown:function forwardButtonDown(){return!!(16&this.buttons)},leftButtonReleased:function leftButtonReleased(){return 0===this.button&&!this.isDown},rightButtonReleased:function rightButtonReleased(){return 2===this.button&&!this.isDown},middleButtonReleased:function middleButtonReleased(){return 1===this.button&&!this.isDown},backButtonReleased:function backButtonReleased(){return 3===this.button&&!this.isDown},forwardButtonReleased:function forwardButtonReleased(){return 4===this.button&&!this.isDown},getDistance:function getDistance(){return this.isDown?h(this.downX,this.downY,this.x,this.y):h(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function getDistanceX(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function getDistanceY(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function getDuration(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function getAngle(){return this.isDown?o(this.downX,this.downY,this.x,this.y):o(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function getInterpolatedPosition(t,i){void 0===t&&(t=10),void 0===i&&(i=[]);for(var r=this.prevPosition.x,o=this.prevPosition.y,a=this.position.x,h=this.position.y,l=0;l<t;l++){var c=1/t*l;i[l]={x:u(c,r,a),y:u(c,o,h)}}return i},destroy:function destroy(){this.camera=null,this.manager=null,this.position=null},x:{get:function get(){return this.position.x},set:function set(t){this.position.x=t}},y:{get:function get(){return this.position.y},set:function set(t){this.position.y=t}},time:{get:function get(){return this.event?this.event.timeStamp:0}}});t.exports=p},function(t,i,r){var o=r(0),a=r(51),h=r(1),l=new o({initialize:function TouchManager(t){this.manager=t,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=h,this.onTouchStartWindow=h,this.onTouchMove=h,this.onTouchEnd=h,this.onTouchEndWindow=h,this.onTouchCancel=h,this.onTouchCancelWindow=h,this.onTouchOver=h,this.onTouchOut=h,t.events.once(a.MANAGER_BOOT,this.boot,this)},boot:function boot(){var t=this.manager.config;this.enabled=t.inputTouch,this.target=t.inputTouchEventTarget,this.capture=t.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),t.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function disableContextMenu(){return document.body.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),this},startListeners:function startListeners(){var t=this,i=this.manager.canvas,r=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(o){r&&window.focus(),!o.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchStart(o),t.capture&&o.cancelable&&o.target===i&&o.preventDefault())},this.onTouchStartWindow=function(r){!r.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&r.target!==i&&t.manager.onTouchStart(r)},this.onTouchMove=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchMove(i),t.capture&&i.cancelable&&i.preventDefault())},this.onTouchEnd=function(r){!r.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchEnd(r),t.capture&&r.cancelable&&r.target===i&&r.preventDefault())},this.onTouchEndWindow=function(r){!r.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&r.target!==i&&t.manager.onTouchEnd(r)},this.onTouchCancel=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchCancel(i),t.capture&&i.preventDefault())},this.onTouchCancelWindow=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.onTouchCancel(i)},this.onTouchOver=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOver(i)},this.onTouchOut=function(i){!i.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOut(i)};var o=this.target;if(o){var a={passive:!0},h={passive:!1};o.addEventListener("touchstart",this.onTouchStart,this.capture?h:a),o.addEventListener("touchmove",this.onTouchMove,this.capture?h:a),o.addEventListener("touchend",this.onTouchEnd,this.capture?h:a),o.addEventListener("touchcancel",this.onTouchCancel,this.capture?h:a),o.addEventListener("touchover",this.onTouchOver,this.capture?h:a),o.addEventListener("touchout",this.onTouchOut,this.capture?h:a),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,h),window.addEventListener("touchend",this.onTouchEndWindow,h),window.addEventListener("touchcancel",this.onTouchCancelWindow,h)),this.enabled=!0}},stopListeners:function stopListeners(){var t=this.target;t.removeEventListener("touchstart",this.onTouchStart),t.removeEventListener("touchmove",this.onTouchMove),t.removeEventListener("touchend",this.onTouchEnd),t.removeEventListener("touchcancel",this.onTouchCancel),t.removeEventListener("touchover",this.onTouchOver),t.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function destroy(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=l},function(t,i,r){var o=r(0),a=r(22),h=r(9),l=r(8),u=r(16),c=r(5),d=r(2),p=r(24),g=r(93),v=new o({Extends:h,initialize:function PluginManager(t){h.call(this),this.game=t,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],t.isBooted?this.boot():t.events.once(a.BOOT,this.boot,this)},boot:function boot(){var t,i,r,o,h,l,u,c=this.game.config,p=c.installGlobalPlugins;for(p=p.concat(this._pendingGlobal),t=0;t<p.length;t++)i=p[t],r=d(i,"key",null),o=d(i,"plugin",null),h=d(i,"start",!1),l=d(i,"mapping",null),u=d(i,"data",null),r&&(o?this.install(r,o,h,l,u):console.warn("Missing `plugin` for key: "+r));for(p=(p=c.installScenePlugins).concat(this._pendingScene),t=0;t<p.length;t++)i=p[t],r=d(i,"key",null),o=d(i,"plugin",null),l=d(i,"mapping",null),r&&(o?this.installScenePlugin(r,o,l):console.warn("Missing `plugin` for key: "+r));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(a.DESTROY,this.destroy,this)},addToScene:function addToScene(t,i,r){var o,a,h,l=this.game,u=t.scene,c=t.settings.map,d=t.settings.isBooted;for(o=0;o<i.length;o++)l[a=i[o]]?(t[a]=l[a],c.hasOwnProperty(a)&&(u[c[a]]=t[a])):"game"===a&&c.hasOwnProperty(a)&&(u[c[a]]=l);for(var g=0;g<r.length;g++)for(h=r[g],o=0;o<h.length;o++)if(a=h[o],p.hasCore(a)){var v=p.getCore(a),m=v.mapping,y=new v.plugin(u,this,m);t[m]=y,v.custom?u[m]=y:c.hasOwnProperty(m)&&(u[c[m]]=y),d&&y.boot()}for(h=this.plugins,o=0;o<h.length;o++){var T=h[o];T.mapping&&(u[T.mapping]=T.plugin)}},getDefaultScenePlugins:function getDefaultScenePlugins(){var t=this.game.config.defaultPlugins;return t=t.concat(this.scenePlugins)},installScenePlugin:function installScenePlugin(t,i,r,o,a){if(void 0===a&&(a=!1),"function"==typeof i){if(p.hasCore(t)){if(!a&&p.hasCore(t))return void console.warn("Scene Plugin key in use: "+t)}else p.register(t,i,r,!0),this.scenePlugins.push(t);if(o){var h=new i(o,this,t);o.sys[t]=h,r&&""!==r&&(o[r]=h),h.boot()}}else console.warn("Invalid Scene Plugin: "+t)},install:function install(t,i,r,o,a){if(void 0===r&&(r=!1),void 0===o&&(o=null),void 0===a&&(a=null),"function"!=typeof i)return console.warn("Invalid Plugin: "+t),null;if(p.hasCustom(t))return console.warn("Plugin key in use: "+t),null;if(null!==o&&(r=!0),this.game.isBooted){if(p.registerCustom(t,i,o,a),r)return this.start(t)}else this._pendingGlobal.push({key:t,plugin:i,start:r,mapping:o,data:a});return null},getIndex:function getIndex(t){for(var i=this.plugins,r=0;r<i.length;r++)if(i[r].key===t)return r;return-1},getEntry:function getEntry(t){var i=this.getIndex(t);if(-1!==i)return this.plugins[i]},isActive:function isActive(t){var i=this.getEntry(t);return i&&i.active},start:function start(t,i){void 0===i&&(i=t);var r=this.getEntry(i);return r&&!r.active?(r.active=!0,r.plugin.start()):r||(r=this.createEntry(t,i)),r?r.plugin:null},createEntry:function createEntry(t,i){var r=p.getCustom(t);if(r){var o=new r.plugin(this);r={key:i,plugin:o,active:!0,mapping:r.mapping,data:r.data},this.plugins.push(r),o.init(r.data),o.start()}return r},stop:function stop(t){var i=this.getEntry(t);return i&&i.active&&(i.active=!1,i.plugin.stop()),this},get:function get(t,i){void 0===i&&(i=!0);var r=this.getEntry(t);if(r)return r.plugin;var o=this.getClass(t);return o&&i?(r=this.createEntry(t,t))?r.plugin:null:o||null},getClass:function getClass(t){return p.getCustomClass(t)},removeGlobalPlugin:function removeGlobalPlugin(t){var i=this.getEntry(t);i&&g(this.plugins,i),p.removeCustom(t)},removeScenePlugin:function removeScenePlugin(t){g(this.scenePlugins,t),p.remove(t)},registerGameObject:function registerGameObject(t,i,r){return i&&c.register(t,i),r&&u.register(t,r),this},removeGameObject:function removeGameObject(t,i,r){return void 0===i&&(i=!0),void 0===r&&(r=!0),i&&c.remove(t),r&&u.remove(t),this},registerFileType:function registerFileType(t,i,r){l.register(t,i),r&&r.sys.load&&(r.sys.load[t]=i)},destroy:function destroy(){for(var t=0;t<this.plugins.length;t++)this.plugins[t].plugin.destroy();p.destroyCustomPlugins(),this.game.noReturn&&p.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});t.exports=v},function(t,i,r){var o=r(201),a=r(0),h=r(9),l=r(104),u=r(22),c=r(401),d=r(407),p=r(402),g=r(1),v=r(10),m=r(416),y=r(76),T=r(3),S=new a({Extends:h,initialize:function ScaleManager(t){h.call(this),this.game=t,this.canvas,this.canvasBounds=new v,this.parent=null,this.parentIsWindow=!1,this.parentSize=new m,this.gameSize=new m,this.baseSize=new m,this.displaySize=new m,this.scaleMode=o.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new T(1,1),this.autoRound=!1,this.autoCenter=o.CENTER.NO_CENTER,this.orientation=o.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:g,windowResize:g,fullScreenChange:g,fullScreenError:g}},preBoot:function preBoot(){this.parseConfig(this.game.config),this.game.events.once(u.BOOT,this.boot,this)},boot:function boot(){var t=this.game;this.canvas=t.canvas,this.fullscreen=t.device.fullscreen,this.scaleMode!==o.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===o.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),t.events.on(u.PRE_STEP,this.step,this),t.events.once(u.READY,this.refresh,this),t.events.once(u.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function parseConfig(t){this.getParent(t),this.getParentBounds();var i=t.width,r=t.height,a=t.scaleMode,h=t.zoom,l=t.autoRound;if("string"==typeof i){var u=this.parentSize.width;0===u&&(u=window.innerWidth);var c=parseInt(i,10)/100;i=Math.floor(u*c)}if("string"==typeof r){var d=this.parentSize.height;0===d&&(d=window.innerHeight);var g=parseInt(r,10)/100;r=Math.floor(d*g)}this.scaleMode=a,this.autoRound=l,this.autoCenter=t.autoCenter,this.resizeInterval=t.resizeInterval,l&&(i=Math.floor(i),r=Math.floor(r)),this.gameSize.setSize(i,r),h===o.ZOOM.MAX_ZOOM&&(h=this.getMaxZoom()),this.zoom=h,1!==h&&(this._resetZoom=!0),this.baseSize.setSize(i,r),l&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),t.minWidth>0&&this.displaySize.setMin(t.minWidth*h,t.minHeight*h),t.maxWidth>0&&this.displaySize.setMax(t.maxWidth*h,t.maxHeight*h),this.displaySize.setSize(i,r),this.orientation=p(i,r)},getParent:function getParent(t){var i=t.parent;if(null!==i){if(this.parent=d(i),this.parentIsWindow=this.parent===document.body,t.expandParent&&t.scaleMode!==o.SCALE_MODE.NONE){var r=this.parent.getBoundingClientRect();(this.parentIsWindow||0===r.height)&&(document.documentElement.style.height="100%",document.body.style.height="100%",r=this.parent.getBoundingClientRect(),this.parentIsWindow||0!==r.height||(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}t.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=d(t.fullscreenTarget))}},getParentBounds:function getParentBounds(){if(!this.parent)return!1;var t=this.parentSize,i=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(i.height=c(!0));var r=i.width,o=i.height;return(t.width!==r||t.height!==o)&&(t.setSize(r,o),!0)},lockOrientation:function lockOrientation(t){var i=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return!!i&&i.call(screen,t)},setParentSize:function setParentSize(t,i){return this.parentSize.setSize(t,i),this.refresh()},setGameSize:function setGameSize(t,i){var r=this.autoRound;r&&(t=Math.floor(t),i=Math.floor(i));var o=this.width,a=this.height;return this.gameSize.resize(t,i),this.baseSize.resize(t,i),r&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(t/i),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(o,a)},resize:function resize(t,i){var r=this.zoom,o=this.autoRound;o&&(t=Math.floor(t),i=Math.floor(i));var a=this.width,h=this.height;this.gameSize.resize(t,i),this.baseSize.resize(t,i),o&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(t*r,i*r),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var l=this.canvas.style,u=t*r,c=i*r;return o&&(u=Math.floor(u),c=Math.floor(c)),u===t&&c===i||(l.width=u+"px",l.height=c+"px"),this.refresh(a,h)},setZoom:function setZoom(t){return this.zoom=t,this._resetZoom=!0,this.refresh()},setMaxZoom:function setMaxZoom(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function refresh(t,i){void 0===t&&(t=this.width),void 0===i&&(i=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var r=this.game.domContainer;if(r){this.baseSize.setCSS(r);var o=this.canvas.style,a=r.style;a.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",a.marginLeft=o.marginLeft,a.marginTop=o.marginTop}return this.emit(l.RESIZE,this.gameSize,this.baseSize,this.displaySize,t,i),this},updateOrientation:function updateOrientation(){if(this._checkOrientation){this._checkOrientation=!1;var t=p(this.width,this.height);t!==this.orientation&&(this.orientation=t,this.emit(l.ORIENTATION_CHANGE,t))}},updateScale:function updateScale(){var t,i,r=this.canvas.style,a=this.gameSize.width,h=this.gameSize.height,l=this.zoom,u=this.autoRound;this.scaleMode===o.SCALE_MODE.NONE?(this.displaySize.setSize(a*l,h*l),t=this.displaySize.width,i=this.displaySize.height,u&&(t=Math.floor(t),i=Math.floor(i)),this._resetZoom&&(r.width=t+"px",r.height=i+"px",this._resetZoom=!1)):this.scaleMode===o.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),t=this.displaySize.width,i=this.displaySize.height,u&&(t=Math.floor(t),i=Math.floor(i)),this.canvas.width=t,this.canvas.height=i):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),t=this.displaySize.width,i=this.displaySize.height,u&&(t=Math.floor(t),i=Math.floor(i)),r.width=t+"px",r.height=i+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function getMaxZoom(){var t=y(this.parentSize.width,this.gameSize.width,0,!0),i=y(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(t,i),1)},updateCenter:function updateCenter(){var t=this.autoCenter;if(t!==o.CENTER.NO_CENTER){var i=this.canvas,r=i.style,a=i.getBoundingClientRect(),h=a.width,l=a.height,u=Math.floor((this.parentSize.width-h)/2),c=Math.floor((this.parentSize.height-l)/2);t===o.CENTER.CENTER_HORIZONTALLY?c=0:t===o.CENTER.CENTER_VERTICALLY&&(u=0),r.marginLeft=u+"px",r.marginTop=c+"px"}},updateBounds:function updateBounds(){var t=this.canvasBounds,i=this.canvas.getBoundingClientRect();t.x=i.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),t.y=i.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),t.width=i.width,t.height=i.height},transformX:function transformX(t){return(t-this.canvasBounds.left)*this.displayScale.x},transformY:function transformY(t){return(t-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function startFullscreen(t){void 0===t&&(t={navigationUI:"hide"});var i=this.fullscreen;if(i.available){if(!i.active){var r=this.getFullscreenTarget();i.keyboard?r[i.request](Element.ALLOW_KEYBOARD_INPUT):r[i.request](t)}}else this.emit(l.FULLSCREEN_UNSUPPORTED)},fullscreenSuccessHandler:function fullscreenSuccessHandler(){this.getParentBounds(),this.refresh(),this.emit(l.ENTER_FULLSCREEN)},fullscreenErrorHandler:function fullscreenErrorHandler(t){this.removeFullscreenTarget(),this.emit(l.FULLSCREEN_FAILED,t)},getFullscreenTarget:function getFullscreenTarget(){if(!this.fullscreenTarget){var t=document.createElement("div");t.style.margin="0",t.style.padding="0",t.style.width="100%",t.style.height="100%",this.fullscreenTarget=t,this._createdFullscreenTarget=!0}return this._createdFullscreenTarget&&(this.canvas.parentNode.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)),this.fullscreenTarget},removeFullscreenTarget:function removeFullscreenTarget(){if(this._createdFullscreenTarget){var t=this.fullscreenTarget;if(t&&t.parentNode){var i=t.parentNode;i.insertBefore(this.canvas,t),i.removeChild(t)}}},stopFullscreen:function stopFullscreen(){var t=this.fullscreen;if(!t.available)return this.emit(l.FULLSCREEN_UNSUPPORTED),!1;t.active&&document[t.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(l.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function toggleFullscreen(t){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(t)},startListeners:function startListeners(){var t=this,i=this.listeners;i.orientationChange=function(){t.updateBounds(),t._checkOrientation=!0,t.dirty=!0},i.windowResize=function(){t.updateBounds(),t.dirty=!0},window.addEventListener("orientationchange",i.orientationChange,!1),window.addEventListener("resize",i.windowResize,!1),this.fullscreen.available&&(i.fullScreenChange=function(i){return t.onFullScreenChange(i)},i.fullScreenError=function(i){return t.onFullScreenError(i)},["webkit","moz",""].forEach((function(t){document.addEventListener(t+"fullscreenchange",i.fullScreenChange,!1),document.addEventListener(t+"fullscreenerror",i.fullScreenError,!1)})),document.addEventListener("MSFullscreenChange",i.fullScreenChange,!1),document.addEventListener("MSFullscreenError",i.fullScreenError,!1))},onFullScreenChange:function onFullScreenChange(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function onFullScreenError(){this.removeFullscreenTarget()},step:function step(t,i){this.parent&&(this._lastCheck+=i,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function stopListeners(){var t=this.listeners;window.removeEventListener("orientationchange",t.orientationChange,!1),window.removeEventListener("resize",t.windowResize,!1),["webkit","moz",""].forEach((function(i){document.removeEventListener(i+"fullscreenchange",t.fullScreenChange,!1),document.removeEventListener(i+"fullscreenerror",t.fullScreenError,!1)})),document.removeEventListener("MSFullscreenChange",t.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",t.fullScreenError,!1)},destroy:function destroy(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function get(){return this.fullscreen.active}},width:{get:function get(){return this.gameSize.width}},height:{get:function get(){return this.gameSize.height}},isPortrait:{get:function get(){return this.orientation===o.ORIENTATION.PORTRAIT}},isLandscape:{get:function get(){return this.orientation===o.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function get(){return this.height>this.width}},isGameLandscape:{get:function get(){return this.width>this.height}}});t.exports=S},function(t,i,r){var o=r(18),a=r(0),h=r(76),l=r(3),u=new a({initialize:function Size(t,i,r,o){void 0===t&&(t=0),void 0===i&&(i=t),void 0===r&&(r=0),void 0===o&&(o=null),this._width=t,this._height=i,this._parent=o,this.aspectMode=r,this.aspectRatio=0===i?1:t/i,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new l},setAspectMode:function setAspectMode(t){return void 0===t&&(t=0),this.aspectMode=t,this.setSize(this._width,this._height)},setSnap:function setSnap(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.snapTo.set(t,i),this.setSize(this._width,this._height)},setParent:function setParent(t){return this._parent=t,this.setSize(this._width,this._height)},setMin:function setMin(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.minWidth=o(t,0,this.maxWidth),this.minHeight=o(i,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function setMax(t,i){return void 0===t&&(t=Number.MAX_VALUE),void 0===i&&(i=t),this.maxWidth=o(t,this.minWidth,Number.MAX_VALUE),this.maxHeight=o(i,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function setSize(t,i){switch(void 0===t&&(t=0),void 0===i&&(i=t),this.aspectMode){case u.NONE:this._width=this.getNewWidth(h(t,this.snapTo.x)),this._height=this.getNewHeight(h(i,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height;break;case u.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(h(t,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case u.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(h(i,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case u.FIT:this.constrain(t,i,!0);break;case u.ENVELOP:this.constrain(t,i,!1)}return this},setAspectRatio:function setAspectRatio(t){return this.aspectRatio=t,this.setSize(this._width,this._height)},resize:function resize(t,i){return this._width=this.getNewWidth(h(t,this.snapTo.x)),this._height=this.getNewHeight(h(i,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height,this},getNewWidth:function getNewWidth(t,i){return void 0===i&&(i=!0),t=o(t,this.minWidth,this.maxWidth),i&&this._parent&&t>this._parent.width&&(t=Math.max(this.minWidth,this._parent.width)),t},getNewHeight:function getNewHeight(t,i){return void 0===i&&(i=!0),t=o(t,this.minHeight,this.maxHeight),i&&this._parent&&t>this._parent.height&&(t=Math.max(this.minHeight,this._parent.height)),t},constrain:function constrain(t,i,r){void 0===t&&(t=0),void 0===i&&(i=t),void 0===r&&(r=!0),t=this.getNewWidth(t),i=this.getNewHeight(i);var o=this.snapTo,a=0===i?1:t/i;return r&&this.aspectRatio>a||!r&&this.aspectRatio<a?(i=(t=h(t,o.x))/this.aspectRatio,o.y>0&&(t=(i=h(i,o.y))*this.aspectRatio)):(r&&this.aspectRatio<a||!r&&this.aspectRatio>a)&&(t=(i=h(i,o.y))*this.aspectRatio,o.x>0&&(i=(t=h(t,o.x))*(1/this.aspectRatio))),this._width=t,this._height=i,this},fitTo:function fitTo(t,i){return this.constrain(t,i,!0)},envelop:function envelop(t,i){return this.constrain(t,i,!1)},setWidth:function setWidth(t){return this.setSize(t,this._height)},setHeight:function setHeight(t){return this.setSize(this._width,t)},toString:function toString(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function setCSS(t){t&&t.style&&(t.style.width=this._width+"px",t.style.height=this._height+"px")},copy:function copy(t){return t.setAspectMode(this.aspectMode),t.aspectRatio=this.aspectRatio,t.setSize(this.width,this.height)},destroy:function destroy(){this._parent=null,this.snapTo=null},width:{get:function get(){return this._width},set:function set(t){this.setSize(t,this._height)}},height:{get:function get(){return this._height},set:function set(t){this.setSize(this._width,t)}}});u.NONE=0,u.WIDTH_CONTROLS_HEIGHT=1,u.HEIGHT_CONTROLS_WIDTH=2,u.FIT=3,u.ENVELOP=4,t.exports=u},function(t,i,r){var o=r(0),a=r(144),h=r(20),l=r(22),u=r(6),c=r(95),d=r(1),p=r(418),g=r(204),v=new o({initialize:function SceneManager(t,i){if(this.game=t,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,i){Array.isArray(i)||(i=[i]);for(var r=0;r<i.length;r++)this._pending.push({key:"default",scene:i[r],autoStart:0===r,data:{}})}t.events.once(l.READY,this.bootQueue,this)},bootQueue:function bootQueue(){if(!this.isBooted){var t,i,r,o;for(t=0;t<this._pending.length;t++){var a;r=(i=this._pending[t]).key,(o=i.scene)instanceof p?a=this.createSceneFromInstance(r,o):"object"===_typeof(o)?a=this.createSceneFromObject(r,o):"function"==typeof o&&(a=this.createSceneFromFunction(r,o)),r=a.sys.settings.key,this.keys[r]=a,this.scenes.push(a),this._data[r]&&(a.sys.settings.data=this._data[r].data,this._data[r].autoStart&&(i.autoStart=!0)),(i.autoStart||a.sys.settings.active)&&this._start.push(r)}for(this._pending.length=0,this._data={},this.isBooted=!0,t=0;t<this._start.length;t++)i=this._start[t],this.start(i);this._start.length=0}},processQueue:function processQueue(){var t=this._pending.length,i=this._queue.length;if(0!==t||0!==i){var r,o;if(t){for(r=0;r<t;r++)o=this._pending[r],this.add(o.key,o.scene,o.autoStart,o.data);for(r=0;r<this._start.length;r++)o=this._start[r],this.start(o);return this._start.length=0,void(this._pending.length=0)}for(r=0;r<this._queue.length;r++)this[(o=this._queue[r]).op](o.keyA,o.keyB);this._queue.length=0}},add:function add(t,i,r,o){return void 0===r&&(r=!1),void 0===o&&(o={}),this.isProcessing||!this.isBooted?(this._pending.push({key:t,scene:i,autoStart:r,data:o}),this.isBooted||(this._data[t]={data:o}),null):(t=this.getKey(t,i),i instanceof p?a=this.createSceneFromInstance(t,i):"object"===_typeof(i)?(i.key=t,a=this.createSceneFromObject(t,i)):"function"==typeof i&&(a=this.createSceneFromFunction(t,i)),a.sys.settings.data=o,t=a.sys.settings.key,this.keys[t]=a,this.scenes.push(a),(r||a.sys.settings.active)&&(this._pending.length?this._start.push(t):this.start(t)),a);var a},remove:function remove(t){if(this.isProcessing)this._queue.push({op:"remove",keyA:t,keyB:null});else{var i=this.getScene(t);if(!i||i.sys.isTransitioning())return this;var r=this.scenes.indexOf(i),o=i.sys.settings.key;r>-1&&(delete this.keys[o],this.scenes.splice(r,1),this._start.indexOf(o)>-1&&(r=this._start.indexOf(o),this._start.splice(r,1)),i.sys.destroy())}return this},bootScene:function bootScene(t){var i,r=t.sys,o=r.settings;r.sceneUpdate=d,t.init&&(t.init.call(t,o.data),o.status=a.INIT,o.isTransition&&r.events.emit(h.TRANSITION_INIT,o.transitionFrom,o.transitionDuration)),r.load&&(i=r.load).reset(),i&&t.preload?(t.preload.call(t),0===i.list.size?this.create(t):(o.status=a.LOADING,i.once(c.COMPLETE,this.loadComplete,this),i.start())):this.create(t)},loadComplete:function loadComplete(t){this.create(t.scene)},payloadComplete:function payloadComplete(t){this.bootScene(t.scene)},update:function update(t,i){this.processQueue(),this.isProcessing=!0;for(var r=this.scenes.length-1;r>=0;r--){var o=this.scenes[r].sys;o.settings.status>a.START&&o.settings.status<=a.RUNNING&&o.step(t,i)}},render:function render(t){for(var i=0;i<this.scenes.length;i++){var r=this.scenes[i].sys;r.settings.visible&&r.settings.status>=a.LOADING&&r.settings.status<a.SLEEPING&&r.render(t)}this.isProcessing=!1},create:function create(t){var i=t.sys,r=i.settings;t.create&&(r.status=a.CREATING,t.create.call(t,r.data),r.status===a.DESTROYED)||(r.isTransition&&i.events.emit(h.TRANSITION_START,r.transitionFrom,r.transitionDuration),t.update&&(i.sceneUpdate=t.update),r.status=a.RUNNING,i.events.emit(h.CREATE,t))},createSceneFromFunction:function createSceneFromFunction(t,i){var r=new i;if(r instanceof p){var o=r.sys.settings.key;if(""!==o&&(t=o),this.keys.hasOwnProperty(t))throw new Error("Cannot add a Scene with duplicate key: "+t);return this.createSceneFromInstance(t,r)}return r.sys=new g(r),r.sys.settings.key=t,r.sys.init(this.game),r},createSceneFromInstance:function createSceneFromInstance(t,i){return""===i.sys.settings.key&&(i.sys.settings.key=t),i.sys.init(this.game),i},createSceneFromObject:function createSceneFromObject(t,i){var r=new p(i),o=r.sys.settings.key;""!==o?t=o:r.sys.settings.key=t,r.sys.init(this.game);for(var a=["init","preload","create","update","render"],h=0;h<a.length;h++){var l=u(i,a[h],null);l&&(r[a[h]]=l)}if(i.hasOwnProperty("extend"))for(var c in i.extend)if(i.extend.hasOwnProperty(c)){var d=i.extend[c];"data"===c&&r.hasOwnProperty("data")&&"object"===_typeof(d)?r.data.merge(d):"sys"!==c&&(r[c]=d)}return r},getKey:function getKey(t,i){if(t||(t="default"),"function"==typeof i)return t;if(i instanceof p?t=i.sys.settings.key:"object"===_typeof(i)&&i.hasOwnProperty("key")&&(t=i.key),this.keys.hasOwnProperty(t))throw new Error("Cannot add a Scene with duplicate key: "+t);return t},getScenes:function getScenes(t,i){void 0===t&&(t=!0),void 0===i&&(i=!1);for(var r=[],o=this.scenes,a=0;a<o.length;a++){var h=o[a];h&&(!t||t&&h.sys.isActive())&&r.push(h)}return i?r.reverse():r},getScene:function getScene(t){if("string"==typeof t){if(this.keys[t])return this.keys[t]}else for(var i=0;i<this.scenes.length;i++)if(t===this.scenes[i])return t;return null},isActive:function isActive(t){var i=this.getScene(t);return i?i.sys.isActive():null},isPaused:function isPaused(t){var i=this.getScene(t);return i?i.sys.isPaused():null},isVisible:function isVisible(t){var i=this.getScene(t);return i?i.sys.isVisible():null},isSleeping:function isSleeping(t){var i=this.getScene(t);return i?i.sys.isSleeping():null},pause:function pause(t,i){var r=this.getScene(t);return r&&r.sys.pause(i),this},resume:function resume(t,i){var r=this.getScene(t);return r&&r.sys.resume(i),this},sleep:function sleep(t,i){var r=this.getScene(t);return r&&!r.sys.isTransitioning()&&r.sys.sleep(i),this},wake:function wake(t,i){var r=this.getScene(t);return r&&r.sys.wake(i),this},run:function run(t,i){var r=this.getScene(t);if(!r){for(var o=0;o<this._pending.length;o++)if(this._pending[o].key===t){this.queueOp("start",t,i);break}return this}r.sys.isSleeping()?r.sys.wake(i):r.sys.isPaused()?r.sys.resume(i):this.start(t,i)},start:function start(t,i){if(!this.isBooted)return this._data[t]={autoStart:!0,data:i},this;var r=this.getScene(t);if(r){var o,h=r.sys;if(h.isActive()||h.isPaused())h.shutdown(),h.sceneUpdate=d,h.start(i);else if(h.sceneUpdate=d,h.start(i),h.load&&(o=h.load),o&&h.settings.hasOwnProperty("pack")&&(o.reset(),o.addPack({payload:h.settings.pack})))return h.settings.status=a.LOADING,o.once(c.COMPLETE,this.payloadComplete,this),o.start(),this;this.bootScene(r)}return this},stop:function stop(t,i){var r=this.getScene(t);return r&&!r.sys.isTransitioning()&&r.sys.shutdown(i),this},switch:function _switch(t,i){var r=this.getScene(t),o=this.getScene(i);return r&&o&&r!==o&&(this.sleep(t),this.isSleeping(i)?this.wake(i):this.start(i)),this},getAt:function getAt(t){return this.scenes[t]},getIndex:function getIndex(t){var i=this.getScene(t);return this.scenes.indexOf(i)},bringToTop:function bringToTop(t){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:t,keyB:null});else{var i=this.getIndex(t);if(-1!==i&&i<this.scenes.length){var r=this.getScene(t);this.scenes.splice(i,1),this.scenes.push(r)}}return this},sendToBack:function sendToBack(t){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:t,keyB:null});else{var i=this.getIndex(t);if(-1!==i&&i>0){var r=this.getScene(t);this.scenes.splice(i,1),this.scenes.unshift(r)}}return this},moveDown:function moveDown(t){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:t,keyB:null});else{var i=this.getIndex(t);if(i>0){var r=i-1,o=this.getScene(t),a=this.getAt(r);this.scenes[i]=a,this.scenes[r]=o}}return this},moveUp:function moveUp(t){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:t,keyB:null});else{var i=this.getIndex(t);if(i<this.scenes.length-1){var r=i+1,o=this.getScene(t),a=this.getAt(r);this.scenes[i]=a,this.scenes[r]=o}}return this},moveAbove:function moveAbove(t,i){if(t===i)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:t,keyB:i});else{var r=this.getIndex(t),o=this.getIndex(i);if(-1!==r&&-1!==o){var a=this.getAt(o);this.scenes.splice(o,1),this.scenes.splice(r+1,0,a)}}return this},moveBelow:function moveBelow(t,i){if(t===i)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:t,keyB:i});else{var r=this.getIndex(t),o=this.getIndex(i);if(-1!==r&&-1!==o){var a=this.getAt(o);this.scenes.splice(o,1),0===r?this.scenes.unshift(a):this.scenes.splice(r,0,a)}}return this},queueOp:function queueOp(t,i,r){return this._queue.push({op:t,keyA:i,keyB:r}),this},swapPosition:function swapPosition(t,i){if(t===i)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:t,keyB:i});else{var r=this.getIndex(t),o=this.getIndex(i);if(r!==o&&-1!==r&&-1!==o){var a=this.getAt(r);this.scenes[r]=this.scenes[o],this.scenes[o]=a}}return this},dump:function dump(){for(var t=[],i=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],r=0;r<this.scenes.length;r++){var o=this.scenes[r].sys,h=!o.settings.visible||o.settings.status!==a.RUNNING&&o.settings.status!==a.PAUSED?"[-] ":"[*] ";h+=o.settings.key+" ("+i[o.settings.status]+")",t.push(h)}console.log(t.join("\n"))},destroy:function destroy(){for(var t=0;t<this.scenes.length;t++)this.scenes[t].sys.destroy();this.update=d,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});t.exports=v},function(t,i,r){var o=r(0),a=r(204),h=new o({initialize:function Scene(t){this.sys=new a(this,t),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function update(){}});t.exports=h},function(t,i,r){var o=r(2),a=r(205);t.exports=function GetPhysicsPlugins(t){var i=t.game.config.defaultPhysicsSystem,r=o(t.settings,"physics",!1);if(i||r){var h=[];if(i&&h.push(a(i+"Physics")),r)for(var l in r)l=a(l.concat("Physics")),-1===h.indexOf(l)&&h.push(l);return h}}},function(t,i,r){var o=r(2);t.exports=function GetScenePlugins(t){var i=t.plugins.getDefaultScenePlugins(),r=o(t.settings,"plugins",!1);return Array.isArray(r)?r:i||[]}},function(t,i,r){var o=r(144),a=r(6),h=r(127),l=r(978),u={create:function create(t){return"string"==typeof t?t={key:t}:void 0===t&&(t={}),{status:o.PENDING,key:a(t,"key",""),active:a(t,"active",!1),visible:a(t,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:a(t,"pack",!1),cameras:a(t,"cameras",null),map:a(t,"map",h(l,a(t,"mapAdd",{}))),physics:a(t,"physics",{}),loader:a(t,"loader",{}),plugins:a(t,"plugins",!1),input:a(t,"input",{})}}};t.exports=u},function(t,i,r){var o=r(31),a=r(423),h=r(0),l=r(38),u=r(33),c=r(9),d=r(106),p=r(22),g=r(388),v=r(6),m=r(425),y=r(206),T=new h({Extends:c,initialize:function TextureManager(t){c.call(this),this.game=t,this.name="TextureManager",this.list={},this._tempCanvas=o.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,t.events.once(p.BOOT,this.boot,this)},boot:function boot(){this._pending=3,this.on(d.LOAD,this.updatePending,this),this.on(d.ERROR,this.updatePending,this);var t=this.game.config;this.addBase64("__DEFAULT",t.defaultImage),this.addBase64("__MISSING",t.missingImage),this.addBase64("__WHITE",t.whiteImage),this.game.events.once(p.DESTROY,this.destroy,this)},updatePending:function updatePending(){this._pending--,0===this._pending&&(this.off(d.LOAD),this.off(d.ERROR),this.emit(d.READY))},checkKey:function checkKey(t){return!this.exists(t)||(console.error("Texture key already in use: "+t),!1)},remove:function remove(t){if("string"==typeof t){if(!this.exists(t))return console.warn("No texture found matching key: "+t),this;t=this.get(t)}return this.list.hasOwnProperty(t.key)&&(t.destroy(),this.emit(d.REMOVE,t.key)),this},removeKey:function removeKey(t){return this.list.hasOwnProperty(t)&&delete this.list[t],this},addBase64:function addBase64(t,i){if(this.checkKey(t)){var r=this,o=new Image;o.onerror=function(){r.emit(d.ERROR,t)},o.onload=function(){var i=r.create(t,o);m.Image(i,0),r.emit(d.ADD,t,i),r.emit(d.LOAD,t,i)},o.src=i}return this},getBase64:function getBase64(t,i,r,a){void 0===r&&(r="image/png"),void 0===a&&(a=.92);var h="",l=this.getFrame(t,i);if(l&&(l.source.isRenderTexture||l.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(l){var u=l.canvasData,c=o.create2D(this,u.width,u.height);c.getContext("2d").drawImage(l.source.image,u.x,u.y,u.width,u.height,0,0,u.width,u.height),h=c.toDataURL(r,a),o.remove(c)}return h},addImage:function addImage(t,i,r){var o=null;return this.checkKey(t)&&(o=this.create(t,i),m.Image(o,0),r&&o.setDataSource(r),this.emit(d.ADD,t,o)),o},addGLTexture:function addGLTexture(t,i,r,o){var a=null;return this.checkKey(t)&&(void 0===r&&(r=i.width),void 0===o&&(o=i.height),(a=this.create(t,i,r,o)).add("__BASE",0,0,0,r,o),this.emit(d.ADD,t,a)),a},addRenderTexture:function addRenderTexture(t,i){var r=null;return this.checkKey(t)&&((r=this.create(t,i)).add("__BASE",0,0,0,i.width,i.height),this.emit(d.ADD,t,r)),r},generate:function generate(t,i){if(this.checkKey(t)){var r=o.create(this,1,1);return i.canvas=r,g(i),this.addCanvas(t,r)}return null},createCanvas:function createCanvas(t,i,r){if(void 0===i&&(i=256),void 0===r&&(r=256),this.checkKey(t)){var a=o.create(this,i,r,u.CANVAS,!0);return this.addCanvas(t,a)}return null},addCanvas:function addCanvas(t,i,r){void 0===r&&(r=!1);var o=null;return r?o=new a(this,t,i,i.width,i.height):this.checkKey(t)&&(o=new a(this,t,i,i.width,i.height),this.list[t]=o,this.emit(d.ADD,t,o)),o},addAtlas:function addAtlas(t,i,r,o){return Array.isArray(r.textures)||Array.isArray(r.frames)?this.addAtlasJSONArray(t,i,r,o):this.addAtlasJSONHash(t,i,r,o)},addAtlasJSONArray:function addAtlasJSONArray(t,i,r,o){var a=null;if(this.checkKey(t)){if(a=this.create(t,i),Array.isArray(r))for(var h=1===r.length,l=0;l<a.source.length;l++){var u=h?r[0]:r[l];m.JSONArray(a,l,u)}else m.JSONArray(a,0,r);o&&a.setDataSource(o),this.emit(d.ADD,t,a)}return a},addAtlasJSONHash:function addAtlasJSONHash(t,i,r,o){var a=null;if(this.checkKey(t)){if(a=this.create(t,i),Array.isArray(r))for(var h=0;h<r.length;h++)m.JSONHash(a,h,r[h]);else m.JSONHash(a,0,r);o&&a.setDataSource(o),this.emit(d.ADD,t,a)}return a},addAtlasXML:function addAtlasXML(t,i,r,o){var a=null;return this.checkKey(t)&&(a=this.create(t,i),m.AtlasXML(a,0,r),o&&a.setDataSource(o),this.emit(d.ADD,t,a)),a},addUnityAtlas:function addUnityAtlas(t,i,r,o){var a=null;return this.checkKey(t)&&(a=this.create(t,i),m.UnityYAML(a,0,r),o&&a.setDataSource(o),this.emit(d.ADD,t,a)),a},addSpriteSheet:function addSpriteSheet(t,i,r){var o=null;if(this.checkKey(t)){var a=(o=this.create(t,i)).source[0].width,h=o.source[0].height;m.SpriteSheet(o,0,0,0,a,h,r),this.emit(d.ADD,t,o)}return o},addSpriteSheetFromAtlas:function addSpriteSheetFromAtlas(t,i){if(!this.checkKey(t))return null;var r=v(i,"atlas",null),o=v(i,"frame",null);if(r&&o){var a=this.get(r).get(o);if(a){var h=this.create(t,a.source.image);return a.trimmed?m.SpriteSheetFromAtlas(h,a,i):m.SpriteSheet(h,0,a.cutX,a.cutY,a.cutWidth,a.cutHeight,i),this.emit(d.ADD,t,h),h}}},create:function create(t,i,r,o){var a=null;return this.checkKey(t)&&(a=new y(this,t,i,r,o),this.list[t]=a),a},exists:function exists(t){return this.list.hasOwnProperty(t)},get:function get(t){return void 0===t&&(t="__DEFAULT"),this.list[t]?this.list[t]:t instanceof y?t:this.list.__MISSING},cloneFrame:function cloneFrame(t,i){if(this.list[t])return this.list[t].get(i).clone()},getFrame:function getFrame(t,i){if(this.list[t])return this.list[t].get(i)},getTextureKeys:function getTextureKeys(){var t=[];for(var i in this.list)"__DEFAULT"!==i&&"__MISSING"!==i&&t.push(i);return t},getPixel:function getPixel(t,i,r,o){var a=this.getFrame(r,o);if(a){t-=a.x,i-=a.y;var h=a.data.cut;if(t+=h.x,i+=h.y,t>=h.x&&t<h.r&&i>=h.y&&i<h.b){var u=this._tempContext;u.clearRect(0,0,1,1),u.drawImage(a.source.image,t,i,1,1,0,0,1,1);var c=u.getImageData(0,0,1,1);return new l(c.data[0],c.data[1],c.data[2],c.data[3])}}return null},getPixelAlpha:function getPixelAlpha(t,i,r,o){var a=this.getFrame(r,o);if(a){t-=a.x,i-=a.y;var h=a.data.cut;if(t+=h.x,i+=h.y,t>=h.x&&t<h.r&&i>=h.y&&i<h.b){var l=this._tempContext;return l.clearRect(0,0,1,1),l.drawImage(a.source.image,t,i,1,1,0,0,1,1),l.getImageData(0,0,1,1).data[3]}}return null},setTexture:function setTexture(t,i,r){return this.list[i]&&(t.texture=this.list[i],t.frame=t.texture.get(r)),t},renameTexture:function renameTexture(t,i){var r=this.get(t);return!(!r||t===i||(r.key=i,this.list[i]=r,delete this.list[t],0))},each:function each(t,i){for(var r=[null],o=1;o<arguments.length;o++)r.push(arguments[o]);for(var a in this.list)r[0]=this.list[a],t.apply(i,r)},destroy:function destroy(){for(var t in this.list)this.list[t].destroy();this.list={},this.game=null,o.remove(this._tempCanvas)}});t.exports=T},function(t,i,r){var o=r(0),a=r(18),h=r(38),l=r(33),u=r(138),c=r(206),d=new o({Extends:c,initialize:function CanvasTexture(t,i,r,o,a){c.call(this,t,i,r,o,a),this.add("__BASE",0,0,0,o,a),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=o,this.height=a,this.imageData=this.context.getImageData(0,0,o,a),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function update(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===l.WEBGL&&this.refresh(),this},draw:function draw(t,i,r){return this.context.drawImage(r,t,i),this.update()},drawFrame:function drawFrame(t,i,r,o){void 0===r&&(r=0),void 0===o&&(o=0);var a=this.manager.getFrame(t,i);if(a){var h=a.canvasData,l=a.cutWidth,u=a.cutHeight,c=a.source.resolution;return this.context.drawImage(a.source.image,h.x,h.y,l,u,r,o,l/c,u/c),this.update()}return this},setPixel:function setPixel(t,i,r,o,a,h){if(void 0===h&&(h=255),t=Math.abs(Math.floor(t)),i=Math.abs(Math.floor(i)),this.getIndex(t,i)>-1){var l=this.context.getImageData(t,i,1,1);l.data[0]=r,l.data[1]=o,l.data[2]=a,l.data[3]=h,this.context.putImageData(l,t,i)}return this},putData:function putData(t,i,r,o,a,h,l){return void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=t.width),void 0===l&&(l=t.height),this.context.putImageData(t,i,r,o,a,h,l),this},getData:function getData(t,i,r,o){return t=a(Math.floor(t),0,this.width-1),i=a(Math.floor(i),0,this.height-1),r=a(r,1,this.width-t),o=a(o,1,this.height-i),this.context.getImageData(t,i,r,o)},getPixel:function getPixel(t,i,r){r||(r=new h);var o=this.getIndex(t,i);if(o>-1){var a=this.data,l=a[o+0],u=a[o+1],c=a[o+2],d=a[o+3];r.setTo(l,u,c,d)}return r},getPixels:function getPixels(t,i,r,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=this.width),void 0===o&&(o=r),t=Math.abs(Math.round(t)),i=Math.abs(Math.round(i));for(var l=a(t,0,this.width),u=a(t+r,0,this.width),c=a(i,0,this.height),d=a(i+o,0,this.height),p=new h,g=[],v=c;v<d;v++){for(var m=[],y=l;y<u;y++)p=this.getPixel(y,v,p),m.push({x:y,y:v,color:p.color,alpha:p.alphaGL});g.push(m)}return g},getIndex:function getIndex(t,i){return t=Math.abs(Math.round(t)),i=Math.abs(Math.round(i)),t<this.width&&i<this.height?4*(t+i*this.width):-1},refresh:function refresh(){return this._source.update(),this},getCanvas:function getCanvas(){return this.canvas},getContext:function getContext(){return this.context},clear:function clear(t,i,r,o){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=this.width),void 0===o&&(o=this.height),this.context.clearRect(t,i,r,o),this.update()},setSize:function setSize(t,i){return void 0===i&&(i=t),t===this.width&&i===this.height||(this.canvas.width=t,this.canvas.height=i,this._source.width=t,this._source.height=i,this._source.isPowerOf2=u(t,i),this.frames.__BASE.setSize(t,i,0,0),this.width=t,this.height=i,this.refresh()),this},destroy:function destroy(){c.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});t.exports=d},function(t,i,r){var o=r(31),a=r(0),h=r(138),l=r(168),u=new a({initialize:function TextureSource(t,i,r,o,a){void 0===a&&(a=!1);var u=t.manager.game;this.renderer=u.renderer,this.texture=t,this.source=i,this.image=i,this.compressionAlgorithm=null,this.resolution=1,this.width=r||i.naturalWidth||i.videoWidth||i.width||0,this.height=o||i.naturalHeight||i.videoHeight||i.height||0,this.scaleMode=l.DEFAULT,this.isCanvas=i instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&i instanceof HTMLVideoElement,this.isRenderTexture="RenderTexture"===i.type,this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&i instanceof WebGLTexture,this.isPowerOf2=h(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=a,this.init(u)},init:function init(t){var i=this.renderer;i&&(i.gl?this.isCanvas?this.glTexture=i.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=i.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=i.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=i.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),t.config.antialias||this.setFilter(1)},setFilter:function setFilter(t){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,t),this.scaleMode=t},setFlipY:function setFlipY(t){return void 0===t&&(t=!0),this.flipY=t,this},update:function update(){var t=this.renderer.gl;t&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):t&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function destroy(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&o.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});t.exports=u},function(t,i,r){t.exports={AtlasXML:r(979),Canvas:r(980),Image:r(981),JSONArray:r(982),JSONHash:r(983),SpriteSheet:r(984),SpriteSheetFromAtlas:r(985),UnityYAML:r(986)}},function(t,i,r){var o=r(427),a=r(430),h=r(432),l={create:function create(t){var i=t.config.audio,r=t.device.audio;return i.noAudio||!r.webAudio&&!r.audioData?new a(t):r.webAudio&&!i.disableWebAudio?new h(t):new o(t)}};t.exports=l},function(t,i,r){var o=r(145),a=r(0),h=r(70),l=r(429),u=new a({Extends:o,initialize:function HTML5AudioSoundManager(t){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,o.call(this,t)},add:function add(t,i){var r=new l(this,t,i);return this.sounds.push(r),r},unlock:function unlock(){this.locked=!1;var t=this;if(this.game.cache.audio.entries.each((function(i,r){for(var o=0;o<r.length;o++)if("true"===r[o].dataset.locked)return t.locked=!0,!1;return!0})),this.locked){var i=!1,r=function detectMove(){i=!0},unlock=function unlock(){if(i)i=!1;else{document.body.removeEventListener("touchmove",r),document.body.removeEventListener("touchend",unlock);var o=[];if(t.game.cache.audio.entries.each((function(t,i){for(var r=0;r<i.length;r++){var a=i[r];"true"===a.dataset.locked&&o.push(a)}return!0})),0!==o.length){var a=o[o.length-1];a.oncanplaythrough=function(){a.oncanplaythrough=null,o.forEach((function(t){t.dataset.locked="false"})),t.unlocked=!0},o.forEach((function(t){t.load()}))}}};this.once(h.UNLOCKED,(function(){for(this.forEachActiveSound((function(t){null===t.currentMarker&&0===t.duration&&(t.duration=t.tags[0].duration),t.totalDuration=t.tags[0].duration}));this.lockedActionsQueue.length;){var t=this.lockedActionsQueue.shift();t.sound[t.prop].apply?t.sound[t.prop].apply(t.sound,t.value||[]):t.sound[t.prop]=t.value}}),this),document.body.addEventListener("touchmove",r,!1),document.body.addEventListener("touchend",unlock,!1)}},onBlur:function onBlur(){this.forEachActiveSound((function(t){t.isPlaying&&(this.onBlurPausedSounds.push(t),t.onBlur())}))},onFocus:function onFocus(){this.onBlurPausedSounds.forEach((function(t){t.onFocus()})),this.onBlurPausedSounds.length=0},destroy:function destroy(){o.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function isLocked(t,i,r){return"true"===t.tags[0].dataset.locked&&(this.lockedActionsQueue.push({sound:t,prop:i,value:r}),!0)},setMute:function setMute(t){return this.mute=t,this},mute:{get:function get(){return this._mute},set:function set(t){this._mute=t,this.forEachActiveSound((function(t){t.updateMute()})),this.emit(h.GLOBAL_MUTE,this,t)}},setVolume:function setVolume(t){return this.volume=t,this},volume:{get:function get(){return this._volume},set:function set(t){this._volume=t,this.forEachActiveSound((function(t){t.updateVolume()})),this.emit(h.GLOBAL_VOLUME,this,t)}}});t.exports=u},function(t,i,r){var o=r(78);t.exports=function GetFirst(t,i,r,a,h){if(void 0===a&&(a=0),void 0===h&&(h=t.length),o(t,a,h))for(var l=a;l<h;l++){var u=t[l];if(!i||i&&void 0===r&&u.hasOwnProperty(i)||i&&void 0!==r&&u[i]===r)return u}return null}},function(t,i,r){var o=r(146),a=r(0),h=r(70),l=r(18),u=new a({Extends:o,initialize:function HTML5AudioSound(t,i,r){if(void 0===r&&(r={}),this.tags=t.game.cache.audio.get(i),!this.tags)throw new Error('There is no audio asset with key "'+i+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,o.call(this,t,i,r)},play:function play(t,i){return!(this.manager.isLocked(this,"play",[t,i])||!o.prototype.play.call(this,t,i)||!this.pickAndPlayAudioTag()||(this.emit(h.PLAY,this),0))},pause:function pause(){return!(this.manager.isLocked(this,"pause")||this.startTime>0||!o.prototype.pause.call(this)||(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(h.PAUSE,this),0))},resume:function resume(){return!(this.manager.isLocked(this,"resume")||this.startTime>0||!o.prototype.resume.call(this)||!this.pickAndPlayAudioTag()||(this.emit(h.RESUME,this),0))},stop:function stop(){return!this.manager.isLocked(this,"stop")&&!!o.prototype.stop.call(this)&&(this.stopAndReleaseAudioTag(),this.emit(h.STOP,this),!0)},pickAndPlayAudioTag:function pickAndPlayAudioTag(){if(!this.pickAudioTag())return this.reset(),!1;var t=this.currentConfig.seek,i=this.currentConfig.delay,r=(this.currentMarker?this.currentMarker.start:0)+t;return this.previousTime=r,this.audio.currentTime=r,this.applyConfig(),0===i?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+1e3*i,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function pickAudioTag(){if(this.audio)return!0;for(var t=0;t<this.tags.length;t++){var i=this.tags[t];if("false"===i.dataset.used)return i.dataset.used="true",this.audio=i,!0}if(!this.manager.override)return!1;var r=[];this.manager.forEachActiveSound((function(t){t.key===this.key&&t.audio&&r.push(t)}),this),r.sort((function(t,i){return t.loop===i.loop?i.seek/i.duration-t.seek/t.duration:t.loop?1:-1}));var o=r[0];return this.audio=o.audio,o.reset(),o.audio=null,o.startTime=0,o.previousTime=0,!0},playCatchPromise:function playCatchPromise(){var t=this.audio.play();t&&t.catch((function(t){console.warn(t)}))},stopAndReleaseAudioTag:function stopAndReleaseAudioTag(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function reset(){o.prototype.stop.call(this)},onBlur:function onBlur(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function onFocus(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function update(t){if(this.isPlaying)if(this.startTime>0)this.startTime<t-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,t-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());else{var i=this.currentMarker?this.currentMarker.start:0,r=i+this.duration,o=this.audio.currentTime;if(this.currentConfig.loop)o>=r-this.manager.loopEndOffset?(this.audio.currentTime=i+Math.max(0,o-r),o=this.audio.currentTime):o<i&&(this.audio.currentTime+=i,o=this.audio.currentTime),o<this.previousTime&&this.emit(h.LOOPED,this);else if(o>=r)return this.reset(),this.stopAndReleaseAudioTag(),void this.emit(h.COMPLETE,this);this.previousTime=o}},destroy:function destroy(){o.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function updateMute(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function updateVolume(){this.audio&&(this.audio.volume=l(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function calculateRate(){o.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function get(){return this.currentConfig.mute},set:function set(t){this.currentConfig.mute=t,this.manager.isLocked(this,"mute",t)||(this.updateMute(),this.emit(h.MUTE,this,t))}},setMute:function setMute(t){return this.mute=t,this},volume:{get:function get(){return this.currentConfig.volume},set:function set(t){this.currentConfig.volume=t,this.manager.isLocked(this,"volume",t)||(this.updateVolume(),this.emit(h.VOLUME,this,t))}},setVolume:function setVolume(t){return this.volume=t,this},rate:{get:function get(){return this.currentConfig.rate},set:function set(t){this.currentConfig.rate=t,this.manager.isLocked(this,h.RATE,t)||(this.calculateRate(),this.emit(h.RATE,this,t))}},setRate:function setRate(t){return this.rate=t,this},detune:{get:function get(){return this.currentConfig.detune},set:function set(t){this.currentConfig.detune=t,this.manager.isLocked(this,h.DETUNE,t)||(this.calculateRate(),this.emit(h.DETUNE,this,t))}},setDetune:function setDetune(t){return this.detune=t,this},seek:{get:function get(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function set(t){this.manager.isLocked(this,"seek",t)||this.startTime>0||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.isPlaying?(this.previousTime=t,this.audio.currentTime=t):this.isPaused&&(this.currentConfig.seek=t),this.emit(h.SEEK,this,t))}},setSeek:function setSeek(t){return this.seek=t,this},loop:{get:function get(){return this.currentConfig.loop},set:function set(t){this.currentConfig.loop=t,this.manager.isLocked(this,"loop",t)||(this.audio&&(this.audio.loop=t),this.emit(h.LOOP,this,t))}},setLoop:function setLoop(t){return this.loop=t,this},pan:{get:function get(){return this.currentConfig.pan},set:function set(t){this.currentConfig.pan=t,this.emit(h.PAN,this,t)}},setPan:function setPan(t){return this.pan=t,this}});t.exports=u},function(t,i,r){var o=r(145),a=r(0),h=r(9),l=r(431),u=r(1),c=new a({Extends:h,initialize:function NoAudioSoundManager(t){h.call(this),this.game=t,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function add(t,i){var r=new l(this,t,i);return this.sounds.push(r),r},addAudioSprite:function addAudioSprite(t,i){var r=this.add(t,i);return r.spritemap={},r},play:function play(t,i){return!1},playAudioSprite:function playAudioSprite(t,i,r){return!1},remove:function remove(t){return o.prototype.remove.call(this,t)},removeByKey:function removeByKey(t){return o.prototype.removeByKey.call(this,t)},pauseAll:u,resumeAll:u,stopAll:u,update:u,setRate:u,setDetune:u,setMute:u,setVolume:u,forEachActiveSound:function forEachActiveSound(t,i){o.prototype.forEachActiveSound.call(this,t,i)},destroy:function destroy(){o.prototype.destroy.call(this)}});t.exports=c},function(t,i,r){var o=r(146),a=r(0),h=r(9),l=r(17),u=function returnFalse(){return!1},c=function returnThis(){return this},d=new a({Extends:h,initialize:function NoAudioSound(t,i,r){void 0===r&&(r={}),h.call(this),this.manager=t,this.key=i,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=l({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},r),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:u,updateMarker:u,removeMarker:function returnNull(){return null},play:u,pause:u,resume:u,stop:u,destroy:function destroy(){o.prototype.destroy.call(this)},setMute:c,setVolume:c,setRate:c,setDetune:c,setSeek:c,setLoop:c,setPan:c});t.exports=d},function(t,i,r){var o=r(433),a=r(145),h=r(0),l=r(70),u=r(22),c=r(434),d=new h({Extends:a,initialize:function WebAudioSoundManager(t){this.context=this.createAudioContext(t),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked="suspended"===this.context.state&&("ontouchstart"in window||"onclick"in window),a.call(this,t),this.locked&&t.isBooted?this.unlock():t.events.once(u.BOOT,this.unlock,this)},createAudioContext:function createAudioContext(t){var i=t.config.audio;return i.context?(i.context.resume(),i.context):window.hasOwnProperty("AudioContext")?new AudioContext:window.hasOwnProperty("webkitAudioContext")?new window.webkitAudioContext:void 0},setAudioContext:function setAudioContext(t){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=t,this.masterMuteNode=t.createGain(),this.masterVolumeNode=t.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(t.destination),this.destination=this.masterMuteNode,this},add:function add(t,i){var r=new c(this,t,i);return this.sounds.push(r),r},decodeAudio:function decodeAudio(t,i){var r;r=Array.isArray(t)?t:[{key:t,data:i}];for(var a=this.game.cache.audio,h=r.length,u=0;u<r.length;u++){var c=r[u],d=c.key,p=c.data;"string"==typeof p&&(p=o(p));var g=function(t,i){a.add(t,i),this.emit(l.DECODED,t),0==--h&&this.emit(l.DECODED_ALL)}.bind(this,d),v=function(t,i){console.error("Error decoding audio: "+t+" - ",i?i.message:""),0==--h&&this.emit(l.DECODED_ALL)}.bind(this,d);this.context.decodeAudioData(p,g,v)}},unlock:function unlock(){var t=this,i=document.body,r=function unlockHandler(){if(t.context&&i){var r=i.removeEventListener;t.context.resume().then((function(){r("touchstart",unlockHandler),r("touchend",unlockHandler),r("click",unlockHandler),r("keydown",unlockHandler),t.unlocked=!0}),(function(){r("touchstart",unlockHandler),r("touchend",unlockHandler),r("click",unlockHandler),r("keydown",unlockHandler)}))}};i&&(i.addEventListener("touchstart",r,!1),i.addEventListener("touchend",r,!1),i.addEventListener("click",r,!1),i.addEventListener("keydown",r,!1))},onBlur:function onBlur(){this.locked||this.context.suspend()},onFocus:function onFocus(){var t=this.context;"suspended"!==t.state&&"interrupted"!==t.state||this.locked||t.resume()},update:function update(t,i){a.prototype.update.call(this,t,i);var r=this.context;r&&"interrupted"===r.state&&r.resume()},destroy:function destroy(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var t=this;this.context.close().then((function(){t.context=null}))}a.prototype.destroy.call(this)},setMute:function setMute(t){return this.mute=t,this},mute:{get:function get(){return 0===this.masterMuteNode.gain.value},set:function set(t){this.masterMuteNode.gain.setValueAtTime(t?0:1,0),this.emit(l.GLOBAL_MUTE,this,t)}},setVolume:function setVolume(t){return this.volume=t,this},volume:{get:function get(){return this.masterVolumeNode.gain.value},set:function set(t){this.masterVolumeNode.gain.setValueAtTime(t,0),this.emit(l.GLOBAL_VOLUME,this,t)}}});t.exports=d},function(t,i){for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=new Uint8Array(256),a=0;a<r.length;a++)o[r.charCodeAt(a)]=a;t.exports=function Base64ToArrayBuffer(t){var i,r,a,h,l=(t=t.substr(t.indexOf(",")+1)).length,u=.75*l,c=0;"="===t[l-1]&&(u--,"="===t[l-2]&&u--);for(var d=new ArrayBuffer(u),p=new Uint8Array(d),g=0;g<l;g+=4)i=o[t.charCodeAt(g)],r=o[t.charCodeAt(g+1)],a=o[t.charCodeAt(g+2)],h=o[t.charCodeAt(g+3)],p[c++]=i<<2|r>>4,p[c++]=(15&r)<<4|a>>2,p[c++]=(3&a)<<6|63&h;return d}},function(t,i,r){var o=r(146),a=r(0),h=r(70),l=new a({Extends:o,initialize:function WebAudioSound(t,i,r){if(void 0===r&&(r={}),this.audioBuffer=t.game.cache.audio.get(i),!this.audioBuffer)throw new Error('Audio key "'+i+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=t.context.createGain(),this.volumeNode=t.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),t.context.createStereoPanner?(this.pannerNode=t.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(t.destination)):this.volumeNode.connect(t.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,o.call(this,t,i,r)},play:function play(t,i){return!!o.prototype.play.call(this,t,i)&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(h.PLAY,this),!0)},pause:function pause(){return!(this.manager.context.currentTime<this.startTime||!o.prototype.pause.call(this)||(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(h.PAUSE,this),0))},resume:function resume(){return!(this.manager.context.currentTime<this.startTime||!o.prototype.resume.call(this)||(this.createAndStartBufferSource(),this.emit(h.RESUME,this),0))},stop:function stop(){return!!o.prototype.stop.call(this)&&(this.stopAndRemoveBufferSource(),this.emit(h.STOP,this),!0)},createAndStartBufferSource:function createAndStartBufferSource(){var t=this.currentConfig.seek,i=this.currentConfig.delay,r=this.manager.context.currentTime+i,o=(this.currentMarker?this.currentMarker.start:0)+t,a=this.duration-t;this.playTime=r-t,this.startTime=r,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,r),Math.max(0,o),Math.max(0,a)),this.resetConfig()},createAndStartLoopBufferSource:function createAndStartLoopBufferSource(){var t=this.getLoopTime(),i=this.currentMarker?this.currentMarker.start:0,r=this.duration;this.loopTime=t,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,t),Math.max(0,i),Math.max(0,r))},createBufferSource:function createBufferSource(){var t=this,i=this.manager.context.createBufferSource();return i.buffer=this.audioBuffer,i.connect(this.muteNode),i.onended=function(i){i.target===t.source&&(t.currentConfig.loop?t.hasLooped=!0:t.hasEnded=!0)},i},stopAndRemoveBufferSource:function stopAndRemoveBufferSource(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function stopAndRemoveLoopBufferSource(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function applyConfig(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),o.prototype.applyConfig.call(this)},update:function update(){this.hasEnded?(this.hasEnded=!1,o.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(h.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(h.LOOPED,this))},destroy:function destroy(){o.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function calculateRate(){o.prototype.calculateRate.call(this);var t=this.manager.context.currentTime;this.source&&"number"==typeof this.totalRate&&this.source.playbackRate.setValueAtTime(this.totalRate,t),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,t)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function getCurrentTime(){for(var t=0,i=0;i<this.rateUpdates.length;i++)t+=((i<this.rateUpdates.length-1?this.rateUpdates[i+1].time:this.manager.context.currentTime-this.playTime)-this.rateUpdates[i].time)*this.rateUpdates[i].rate;return t},getLoopTime:function getLoopTime(){for(var t=0,i=0;i<this.rateUpdates.length-1;i++)t+=(this.rateUpdates[i+1].time-this.rateUpdates[i].time)*this.rateUpdates[i].rate;var r=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+r.time+(this.duration-t)/r.rate},rate:{get:function get(){return this.currentConfig.rate},set:function set(t){this.currentConfig.rate=t,this.calculateRate(),this.emit(h.RATE,this,t)}},setRate:function setRate(t){return this.rate=t,this},detune:{get:function get(){return this.currentConfig.detune},set:function set(t){this.currentConfig.detune=t,this.calculateRate(),this.emit(h.DETUNE,this,t)}},setDetune:function setDetune(t){return this.detune=t,this},mute:{get:function get(){return 0===this.muteNode.gain.value},set:function set(t){this.currentConfig.mute=t,this.muteNode.gain.setValueAtTime(t?0:1,0),this.emit(h.MUTE,this,t)}},setMute:function setMute(t){return this.mute=t,this},volume:{get:function get(){return this.volumeNode.gain.value},set:function set(t){this.currentConfig.volume=t,this.volumeNode.gain.setValueAtTime(t,0),this.emit(h.VOLUME,this,t)}},setVolume:function setVolume(t){return this.volume=t,this},seek:{get:function get(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function set(t){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.currentConfig.seek=t,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(h.SEEK,this,t))}},setSeek:function setSeek(t){return this.seek=t,this},loop:{get:function get(){return this.currentConfig.loop},set:function set(t){this.currentConfig.loop=t,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),t&&this.createAndStartLoopBufferSource()),this.emit(h.LOOP,this,t)}},setLoop:function setLoop(t){return this.loop=t,this},pan:{get:function get(){return this.pannerNode?this.pannerNode.pan.value:0},set:function set(t){this.currentConfig.pan=t,this.pannerNode&&this.pannerNode.pan.setValueAtTime(t,this.manager.context.currentTime),this.emit(h.PAN,this,t)}},setPan:function setPan(t){return this.pan=t,this}});t.exports=l},function(t,i){t.exports=function TransposeMatrix(t){for(var i=t.length,r=t[0].length,o=new Array(r),a=0;a<r;a++){o[a]=new Array(i);for(var h=i-1;h>-1;h--)o[a][h]=t[h][a]}return o}},function(t,i){function swap(t,i,r){var o=t[i];t[i]=t[r],t[r]=o}function defaultCompare(t,i){return t<i?-1:t>i?1:0}t.exports=function QuickSelect(t,i,r,o,a){for(void 0===r&&(r=0),void 0===o&&(o=t.length-1),void 0===a&&(a=defaultCompare);o>r;){if(o-r>600){var h=o-r+1,l=i-r+1,u=Math.log(h),c=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*c*(h-c)/h)*(l-h/2<0?-1:1);QuickSelect(t,i,Math.max(r,Math.floor(i-l*c/h+d)),Math.min(o,Math.floor(i+(h-l)*c/h+d)),a)}var p=t[i],g=r,v=o;for(swap(t,r,i),a(t[o],p)>0&&swap(t,r,o);g<v;){for(swap(t,g,v),g++,v--;a(t[g],p)<0;)g++;for(;a(t[v],p)>0;)v--}0===a(t[r],p)?swap(t,r,v):swap(t,++v,o),v<=i&&(r=v+1),i<=v&&(o=v-1)}}},function(t,i,r){var o=r(6),a=r(131),h=function BuildChunk(t,i,r){for(var o=[],a=0;a<t.length;a++)for(var h=0;h<i.length;h++)for(var l=0;l<r;l++)o.push({a:t[a],b:i[h]});return o};t.exports=function Range(t,i,r){var l=o(r,"max",0),u=o(r,"qty",1),c=o(r,"random",!1),d=o(r,"randomB",!1),p=o(r,"repeat",0),g=o(r,"yoyo",!1),v=[];if(d&&a(i),-1===p)if(0===l)p=0;else{var m=t.length*i.length*u;g&&(m*=2),p=Math.ceil(l/m)}for(var y=0;y<=p;y++){var T=h(t,i,u);c&&a(T),v=v.concat(T),g&&(T.reverse(),v=v.concat(T))}return l&&v.splice(l),v}},function(t,i,r){t.exports={PROCESS_QUEUE_ADD:r(1041),PROCESS_QUEUE_REMOVE:r(1042)}},function(t,i,r){var o=r(13);t.exports=function BuildGameObjectAnimation(t,i){var r=o(i,"anims",null);if(null===r)return t;if("string"==typeof r)t.anims.play(r);else if("object"===_typeof(r)){var a=t.anims,h=o(r,"key",void 0);if(h){var l=o(r,"startFrame",void 0),u=o(r,"delay",0),c=o(r,"repeat",0),d=o(r,"repeatDelay",0),p=o(r,"yoyo",!1),g=o(r,"play",!1),v=o(r,"delayedPlay",0),m={key:h,delay:u,repeat:c,repeatDelay:d,yoyo:p,startFrame:l};g?a.play(m):v>0?a.playAfterDelay(m,v):a.load(m)}}return t}},function(t,i,r){var o=r(0),a=r(109),h=new o({initialize:function Bob(t,i,r,o,a){this.parent=t,this.x=i,this.y=r,this.frame=o,this.data={},this.tint=16777215,this._visible=a,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function setFrame(t){return void 0===t?this.frame=this.parent.frame:t instanceof a&&t.texture===this.parent.texture?this.frame=t:this.frame=this.parent.texture.get(t),this},resetFlip:function resetFlip(){return this.flipX=!1,this.flipY=!1,this},reset:function reset(t,i,r){return this.x=t,this.y=i,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,r&&this.setFrame(r),this},setPosition:function setPosition(t,i){return this.x=t,this.y=i,this},setFlipX:function setFlipX(t){return this.flipX=t,this},setFlipY:function setFlipY(t){return this.flipY=t,this},setFlip:function setFlip(t,i){return this.flipX=t,this.flipY=i,this},setVisible:function setVisible(t){return this.visible=t,this},setAlpha:function setAlpha(t){return this.alpha=t,this},setTint:function setTint(t){return this.tint=t,this},destroy:function destroy(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function get(){return this._visible},set:function set(t){this.parent.dirty|=this._visible!==t,this._visible=t}},alpha:{get:function get(){return this._alpha},set:function set(t){this.parent.dirty|=this._alpha>0!=t>0,this._alpha=t}}});t.exports=h},function(t,i,r){var o=r(10);t.exports=function Union(t,i,r){void 0===r&&(r=new o);var a=Math.min(t.x,i.x),h=Math.min(t.y,i.y),l=Math.max(t.right,i.right)-a,u=Math.max(t.bottom,i.bottom)-h;return r.setTo(a,h,l,u)}},function(t,i,r){var o=r(0),a=r(11),h=r(1055),l=r(15),u=r(7),c=r(202),d=r(20),p=r(140),g=new o({Extends:l,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.Origin,a.ScrollFactor,a.Transform,a.Visible,h],initialize:function DOMElement(t,i,r,o,a,h){l.call(this,t,"DOMElement"),this.parent=t.sys.game.domContainer,this.cache=t.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new p,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(i,r),"string"==typeof o?"#"===o[0]?this.setElement(o.substr(1),a,h):this.createElement(o,a,h):o&&this.setElement(o,a,h),t.sys.events.on(d.SLEEP,this.handleSceneEvent,this),t.sys.events.on(d.WAKE,this.handleSceneEvent,this)},addedToScene:function addedToScene(){this.scene.sys.updateList.add(this)},removedFromScene:function removedFromScene(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function handleSceneEvent(t){var i=this.node,r=i.style;i&&(r.display=t.settings.visible?"block":"none")},setSkew:function setSkew(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.skewX=t,this.skewY=i,this},setPerspective:function setPerspective(t){return this.parent.style.perspective=t+"px",this},perspective:{get:function get(){return parseFloat(this.parent.style.perspective)},set:function set(t){this.parent.style.perspective=t+"px"}},addListener:function addListener(t){if(this.node){t=t.split(" ");for(var i=0;i<t.length;i++)this.node.addEventListener(t[i],this.handler,!1)}return this},removeListener:function removeListener(t){if(this.node){t=t.split(" ");for(var i=0;i<t.length;i++)this.node.removeEventListener(t[i],this.handler)}return this},dispatchNativeEvent:function dispatchNativeEvent(t){this.emit(t.type,t)},createElement:function createElement(t,i,r){return this.setElement(document.createElement(t),i,r)},setElement:function setElement(t,i,r){var o;if(this.removeElement(),"string"==typeof t?("#"===t[0]&&(t=t.substr(1)),o=document.getElementById(t)):"object"===_typeof(t)&&1===t.nodeType&&(o=t),!o)return this;if(this.node=o,i&&u(i))for(var a in i)o.style[a]=i[a];else"string"==typeof i&&(o.style=i);return o.style.zIndex="0",o.style.display="inline",o.style.position="absolute",o.phaser=this,this.parent&&this.parent.appendChild(o),r&&(o.innerText=r),this.updateSize()},createFromCache:function createFromCache(t,i){var r=this.cache.get(t);return r&&this.createFromHTML(r,i),this},createFromHTML:function createFromHTML(t,i){void 0===i&&(i="div"),this.removeElement();var r=document.createElement(i);return this.node=r,r.style.zIndex="0",r.style.display="inline",r.style.position="absolute",r.phaser=this,this.parent&&this.parent.appendChild(r),r.innerHTML=t,this.updateSize()},removeElement:function removeElement(){return this.node&&(c(this.node),this.node=null),this},updateSize:function updateSize(){var t=this.node,i=t.getBoundingClientRect();return this.width=t.clientWidth,this.height=t.clientHeight,this.displayWidth=i.width||0,this.displayHeight=i.height||0,this},getChildByProperty:function getChildByProperty(t,i){if(this.node)for(var r=this.node.querySelectorAll("*"),o=0;o<r.length;o++)if(r[o][t]===i)return r[o];return null},getChildByID:function getChildByID(t){return this.getChildByProperty("id",t)},getChildByName:function getChildByName(t){return this.getChildByProperty("name",t)},setClassName:function setClassName(t){return this.node&&(this.node.className=t,this.updateSize()),this},setText:function setText(t){return this.node&&(this.node.innerText=t,this.updateSize()),this},setHTML:function setHTML(t){return this.node&&(this.node.innerHTML=t,this.updateSize()),this},preUpdate:function preUpdate(){var t=this.parentContainer,i=this.node;i&&t&&!t.willRender()&&(i.style.display="none")},willRender:function willRender(){return!0},preDestroy:function preDestroy(){this.removeElement(),this.scene.sys.events.off(d.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(d.WAKE,this.handleSceneEvent,this)}});t.exports=g},function(t,i,r){var o=r(1056),a=r(15),h=r(25),l=new h,u=new h,c=new h;t.exports=function DOMElementCSSRenderer(t,i,r,h){if(i.node){var d=i.node.style,p=i.scene.sys.settings;if(!d||!p.visible||a.RENDER_MASK!==i.renderFlags||0!==i.cameraFilter&&i.cameraFilter&r.id||i.parentContainer&&!i.parentContainer.willRender())d.display="none";else{var g=i.parentContainer,v=r.alpha*i.alpha;g&&(v*=g.alpha);var m=l,y=u,T=c,S=0,w=0,b="0%",C="0%";h?(S=i.width*i.scaleX*i.originX,w=i.height*i.scaleY*i.originY,y.applyITRS(i.x-S,i.y-w,i.rotation,i.scaleX,i.scaleY),m.copyFrom(r.matrix),m.multiplyWithOffset(h,-r.scrollX*i.scrollFactorX,-r.scrollY*i.scrollFactorY),y.e=i.x-S,y.f=i.y-w,m.multiply(y,T)):(S=i.width*i.originX,w=i.height*i.originY,y.applyITRS(i.x-S,i.y-w,i.rotation,i.scaleX,i.scaleY),m.copyFrom(r.matrix),b=100*i.originX+"%",C=100*i.originY+"%",y.e-=r.scrollX*i.scrollFactorX,y.f-=r.scrollY*i.scrollFactorY,m.multiply(y,T)),i.transformOnly||(d.display="block",d.opacity=v,d.zIndex=i._depth,d.pointerEvents=i.pointerEvents,d.mixBlendMode=o[i._blendMode]),d.transform=T.getCSSMatrix()+" skew("+i.skewX+"rad, "+i.skewY+"rad) rotate3d("+i.rotate3d.x+","+i.rotate3d.y+","+i.rotate3d.z+","+i.rotate3d.w+i.rotate3dAngle+")",d.transformOrigin=b+" "+C}}}},function(t,i,r){var o=r(0),a=r(11),h=r(15),l=r(1060),u=new o({Extends:h,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Flip,a.Origin,a.ScrollFactor,a.Size,a.Texture,a.Tint,a.Transform,a.Visible,l],initialize:function Extern(t){h.call(this,t,"Extern")},addedToScene:function addedToScene(){this.scene.sys.updateList.add(this)},removedFromScene:function removedFromScene(){this.scene.sys.updateList.remove(this)},preUpdate:function preUpdate(){},render:function render(){}});t.exports=u},function(t,i,r){var o=r(218),a=r(98),h=r(14),l=r(4);t.exports=function GetPoint(t,i,r){void 0===r&&(r=new l);var u=a(i,0,h.PI2);return o(t,u,r)}},function(t,i,r){var o=r(447),a=r(218),h=r(98),l=r(14);t.exports=function GetPoints(t,i,r,u){void 0===u&&(u=[]),!i&&r>0&&(i=o(t)/r);for(var c=0;c<i;c++){var d=h(c/i,0,l.PI2);u.push(a(t,d))}return u}},function(t,i){t.exports=function Circumference(t){var i=t.width/2,r=t.height/2,o=Math.pow(i-r,2)/Math.pow(i+r,2);return Math.PI*(i+r)*(1+3*o/(10+Math.sqrt(4-3*o)))}},function(t,i,r){var o=r(217),a=r(30);t.exports=function GraphicsCanvasRenderer(t,i,r,h,l,u){var c=i.commandBuffer,d=c.length,p=l||t.currentContext;if(0!==d&&a(t,p,i,r,h)){r.addToRenderList(i);var g=1,v=1,m=0,y=0,T=1,S=0,w=0,b=0;p.beginPath();for(var C=0;C<d;++C)switch(c[C]){case o.ARC:p.arc(c[C+1],c[C+2],c[C+3],c[C+4],c[C+5],c[C+6]),C+=7;break;case o.LINE_STYLE:T=c[C+1],m=c[C+2],g=c[C+3],S=(16711680&m)>>>16,w=(65280&m)>>>8,b=255&m,p.strokeStyle="rgba("+S+","+w+","+b+","+g+")",p.lineWidth=T,C+=3;break;case o.FILL_STYLE:y=c[C+1],v=c[C+2],S=(16711680&y)>>>16,w=(65280&y)>>>8,b=255&y,p.fillStyle="rgba("+S+","+w+","+b+","+v+")",C+=2;break;case o.BEGIN_PATH:p.beginPath();break;case o.CLOSE_PATH:p.closePath();break;case o.FILL_PATH:u||p.fill();break;case o.STROKE_PATH:u||p.stroke();break;case o.FILL_RECT:u?p.rect(c[C+1],c[C+2],c[C+3],c[C+4]):p.fillRect(c[C+1],c[C+2],c[C+3],c[C+4]),C+=4;break;case o.FILL_TRIANGLE:p.beginPath(),p.moveTo(c[C+1],c[C+2]),p.lineTo(c[C+3],c[C+4]),p.lineTo(c[C+5],c[C+6]),p.closePath(),u||p.fill(),C+=6;break;case o.STROKE_TRIANGLE:p.beginPath(),p.moveTo(c[C+1],c[C+2]),p.lineTo(c[C+3],c[C+4]),p.lineTo(c[C+5],c[C+6]),p.closePath(),u||p.stroke(),C+=6;break;case o.LINE_TO:p.lineTo(c[C+1],c[C+2]),C+=2;break;case o.MOVE_TO:p.moveTo(c[C+1],c[C+2]),C+=2;break;case o.LINE_FX_TO:p.lineTo(c[C+1],c[C+2]),C+=5;break;case o.MOVE_FX_TO:p.moveTo(c[C+1],c[C+2]),C+=5;break;case o.SAVE:p.save();break;case o.RESTORE:p.restore();break;case o.TRANSLATE:p.translate(c[C+1],c[C+2]),C+=2;break;case o.SCALE:p.scale(c[C+1],c[C+2]),C+=2;break;case o.ROTATE:p.rotate(c[C+1]),C+=1;break;case o.GRADIENT_FILL_STYLE:C+=5;break;case o.GRADIENT_LINE_STYLE:C+=6}p.restore()}}},function(t,i,r){var o=r(0),a=r(137),h=r(80),l=r(2),u=r(68),c=new o({initialize:function EmitterOp(t,i,r,o){void 0===o&&(o=!1),this.propertyKey=i,this.propertyValue=r,this.defaultValue=r,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=o,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(t)},loadConfig:function loadConfig(t,i){void 0===t&&(t={}),i&&(this.propertyKey=i),this.propertyValue=l(t,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function toJSON(){return this.propertyValue},onChange:function onChange(t){return this.propertyValue=t,this.setMethods()},setMethods:function setMethods(){var t=this.propertyValue,i=_typeof(t);if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,"number"===i)this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(t))this.onEmit=this.randomStaticValueEmit;else if("function"===i)this.emitOnly?this.onEmit=t:this.onUpdate=t;else if("object"===i&&this.hasBoth(t,"start","end")){this.start=t.start,this.end=t.end;var r=this.has(t,"random");if(r&&(this.onEmit=this.randomRangedValueEmit),this.has(t,"steps"))this.steps=t.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var o=this.has(t,"ease")?t.ease:"Linear";this.ease=h(o,t.easeParams),r||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if("object"===i&&this.hasBoth(t,"min","max"))this.start=t.min,this.end=t.max,this.onEmit=this.randomRangedValueEmit;else if("object"===i&&this.has(t,"random")){var a=t.random;Array.isArray(a)&&(this.start=a[0],this.end=a[1]),this.onEmit=this.randomRangedValueEmit}else"object"===i&&this.hasEither(t,"onEmit","onUpdate")&&(this.has(t,"onEmit")&&(this.onEmit=t.onEmit),this.has(t,"onUpdate")&&(this.onUpdate=t.onUpdate));return this},has:function has(t,i){return t.hasOwnProperty(i)},hasBoth:function hasBoth(t,i,r){return t.hasOwnProperty(i)&&t.hasOwnProperty(r)},hasEither:function hasEither(t,i,r){return t.hasOwnProperty(i)||t.hasOwnProperty(r)},defaultEmit:function defaultEmit(t,i,r){return r},defaultUpdate:function defaultUpdate(t,i,r,o){return o},staticValueEmit:function staticValueEmit(){return this.propertyValue},staticValueUpdate:function staticValueUpdate(){return this.propertyValue},randomStaticValueEmit:function randomStaticValueEmit(){var t=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[t]},randomRangedValueEmit:function randomRangedValueEmit(t,i){var r=a(this.start,this.end);return t&&t.data[i]&&(t.data[i].min=r),r},steppedEmit:function steppedEmit(){var t=this.counter,i=this.counter+(this.end-this.start)/this.steps;return this.counter=u(i,this.start,this.end),t},easedValueEmit:function easedValueEmit(t,i){if(t&&t.data[i]){var r=t.data[i];r.min=this.start,r.max=this.end}return this.start},easeValueUpdate:function easeValueUpdate(t,i,r){var o=t.data[i];return(o.max-o.min)*this.ease(r)+o.min}});t.exports=c},function(t,i,r){var o=r(0),a=r(2),h=new o({initialize:function GravityWell(t,i,r,o,h){if("object"===_typeof(t)){var l=t;t=a(l,"x",0),i=a(l,"y",0),r=a(l,"power",0),o=a(l,"epsilon",100),h=a(l,"gravity",50)}else void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=100),void 0===h&&(h=50);this.x=t,this.y=i,this.active=!0,this._gravity=h,this._power=0,this._epsilon=0,this.power=r,this.epsilon=o},update:function update(t,i){var r=this.x-t.x,o=this.y-t.y,a=r*r+o*o;if(0!==a){var h=Math.sqrt(a);a<this._epsilon&&(a=this._epsilon);var l=this._power*i/(a*h)*100;t.velocityX+=r*l,t.velocityY+=o*l}},epsilon:{get:function get(){return Math.sqrt(this._epsilon)},set:function set(t){this._epsilon=t*t}},power:{get:function get(){return this._power/this._gravity},set:function set(t){this._power=t*this._gravity}},gravity:{get:function get(){return this._gravity},set:function set(t){var i=this.power;this._gravity=t,this.power=i}}});t.exports=h},function(t,i,r){var o=r(0),a=r(36),h=r(50),l=new o({initialize:function Particle(t){this.emitter=t,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function isAlive(){return this.lifeCurrent>0},resetPosition:function resetPosition(){this.x=0,this.y=0},fire:function fire(t,i){var r=this.emitter;this.frame=r.getFrame(),r.emitZone&&r.emitZone.getPoint(this),this.x+=void 0===t?r.x.onEmit(this,"x"):t,this.y+=void 0===i?r.y.onEmit(this,"y"):i,this.life=r.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var o=r.speedX.onEmit(this,"speedX"),l=r.speedY?r.speedY.onEmit(this,"speedY"):o;if(r.radial){var u=a(r.angle.onEmit(this,"angle"));this.velocityX=Math.cos(u)*Math.abs(o),this.velocityY=Math.sin(u)*Math.abs(l)}else if(r.moveTo){var c=r.moveToX.onEmit(this,"moveToX"),d=r.moveToY?r.moveToY.onEmit(this,"moveToY"):c,p=Math.atan2(d-this.y,c-this.x),g=h(this.x,this.y,c,d)/(this.life/1e3);this.velocityX=Math.cos(p)*g,this.velocityY=Math.sin(p)*g}else this.velocityX=o,this.velocityY=l;r.acceleration&&(this.accelerationX=r.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=r.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=r.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=r.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=r.delay.onEmit(this,"delay"),this.scaleX=r.scaleX.onEmit(this,"scaleX"),this.scaleY=r.scaleY?r.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=r.rotate.onEmit(this,"rotate"),this.rotation=a(this.angle),this.bounce=r.bounce.onEmit(this,"bounce"),this.alpha=r.alpha.onEmit(this,"alpha"),this.tint=r.tint.onEmit(this,"tint")},computeVelocity:function computeVelocity(t,i,r,o){var a=this.velocityX,h=this.velocityY,l=this.accelerationX,u=this.accelerationY,c=this.maxVelocityX,d=this.maxVelocityY;a+=t.gravityX*r,h+=t.gravityY*r,l&&(a+=l*r),u&&(h+=u*r),a>c?a=c:a<-c&&(a=-c),h>d?h=d:h<-d&&(h=-d),this.velocityX=a,this.velocityY=h;for(var p=0;p<o.length;p++)o[p].update(this,i,r)},checkBounds:function checkBounds(t){var i=t.bounds,r=-this.bounce;this.x<i.x&&t.collideLeft?(this.x=i.x,this.velocityX*=r):this.x>i.right&&t.collideRight&&(this.x=i.right,this.velocityX*=r),this.y<i.y&&t.collideTop?(this.y=i.y,this.velocityY*=r):this.y>i.bottom&&t.collideBottom&&(this.y=i.bottom,this.velocityY*=r)},update:function update(t,i,r){if(this.delayCurrent>0)return this.delayCurrent-=t,!1;var o=this.emitter,h=1-this.lifeCurrent/this.life;return this.lifeT=h,this.computeVelocity(o,t,i,r),this.x+=this.velocityX*i,this.y+=this.velocityY*i,o.bounds&&this.checkBounds(o),o.deathZone&&o.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=o.scaleX.onUpdate(this,"scaleX",h,this.scaleX),o.scaleY?this.scaleY=o.scaleY.onUpdate(this,"scaleY",h,this.scaleY):this.scaleY=this.scaleX,this.angle=o.rotate.onUpdate(this,"rotate",h,this.angle),this.rotation=a(this.angle),this.alpha=o.alpha.onUpdate(this,"alpha",h,this.alpha),this.tint=o.tint.onUpdate(this,"tint",h,this.tint),this.lifeCurrent-=t,this.lifeCurrent<=0)}});t.exports=l},function(t,i,r){var o=r(35),a=r(0),h=r(11),l=r(453),u=r(454),c=r(449),d=r(2),p=r(210),g=r(455),v=r(126),m=r(451),y=r(456),T=r(10),S=r(79),w=r(3),b=r(68),C=new a({Mixins:[h.BlendMode,h.Mask,h.ScrollFactor,h.Visible],initialize:function ParticleEmitter(t,i){this.manager=t,this.texture=t.texture,this.frames=[t.defaultFrame],this.defaultFrame=t.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=m,this.x=new c(i,"x",0,!0),this.y=new c(i,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new c(i,"accelerationX",0,!0),this.accelerationY=new c(i,"accelerationY",0,!0),this.maxVelocityX=new c(i,"maxVelocityX",1e4,!0),this.maxVelocityY=new c(i,"maxVelocityY",1e4,!0),this.speedX=new c(i,"speedX",0,!0),this.speedY=new c(i,"speedY",0,!0),this.moveTo=!1,this.moveToX=new c(i,"moveToX",0,!0),this.moveToY=new c(i,"moveToY",0,!0),this.bounce=new c(i,"bounce",0,!0),this.scaleX=new c(i,"scaleX",1),this.scaleY=new c(i,"scaleY",1),this.tint=new c(i,"tint",16777215),this.alpha=new c(i,"alpha",1),this.lifespan=new c(i,"lifespan",1e3,!0),this.angle=new c(i,"angle",{min:0,max:360},!0),this.rotate=new c(i,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new c(i,"quantity",1,!0),this.delay=new c(i,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=o.NORMAL,this.follow=null,this.followOffset=new w,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,i&&this.fromJSON(i)},fromJSON:function fromJSON(t){if(!t)return this;var i=0,r="";for(i=0;i<this.configFastMap.length;i++)r=this.configFastMap[i],v(t,r)&&(this[r]=d(t,r));for(i=0;i<this.configOpMap.length;i++)r=this.configOpMap[i],v(t,r)&&this[r].loadConfig(t);if(this.acceleration=0!==this.accelerationX.propertyValue||0!==this.accelerationY.propertyValue,this.moveTo=0!==this.moveToX.propertyValue||0!==this.moveToY.propertyValue,v(t,"speed")&&(this.speedX.loadConfig(t,"speed"),this.speedY=null),(g(t,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),v(t,"scale")&&(this.scaleX.loadConfig(t,"scale"),this.scaleY=null),v(t,"callbackScope")){var o=d(t,"callbackScope",null);this.emitCallbackScope=o,this.deathCallbackScope=o}return v(t,"emitZone")&&this.setEmitZone(t.emitZone),v(t,"deathZone")&&this.setDeathZone(t.deathZone),v(t,"bounds")&&this.setBounds(t.bounds),v(t,"followOffset")&&this.followOffset.setFromObject(d(t,"followOffset",0)),v(t,"frame")&&this.setFrame(t.frame),v(t,"reserve")&&this.reserve(t.reserve),this},toJSON:function toJSON(t){void 0===t&&(t={});var i=0,r="";for(i=0;i<this.configFastMap.length;i++)t[r=this.configFastMap[i]]=this[r];for(i=0;i<this.configOpMap.length;i++)this[r=this.configOpMap[i]]&&(t[r]=this[r].toJSON());return this.speedY||(delete t.speedX,t.speed=this.speedX.toJSON()),this.scaleY||(delete t.scaleX,t.scale=this.scaleX.toJSON()),t},startFollow:function startFollow(t,i,r,o){return void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=!1),this.follow=t,this.followOffset.set(i,r),this.trackVisible=o,this},stopFollow:function stopFollow(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function getFrame(){if(1===this.frames.length)return this.defaultFrame;if(this.randomFrame)return p(this.frames);var t=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=b(this.currentFrame+1,0,this._frameLength)),t},setFrame:function setFrame(t,i,r){void 0===i&&(i=!0),void 0===r&&(r=1),this.randomFrame=i,this.frameQuantity=r,this.currentFrame=0,this._frameCounter=0;var o=_typeof(t);if(Array.isArray(t)||"string"===o||"number"===o)this.manager.setEmitterFrames(t,this);else if("object"===o){var a=t;(t=d(a,"frames",null))&&this.manager.setEmitterFrames(t,this);var h=d(a,"cycle",!1);this.randomFrame=!h,this.frameQuantity=d(a,"quantity",r)}return this._frameLength=this.frames.length,1===this._frameLength&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function setRadial(t){return void 0===t&&(t=!0),this.radial=t,this},setPosition:function setPosition(t,i){return this.x.onChange(t),this.y.onChange(i),this},setBounds:function setBounds(t,i,r,o){if("object"===_typeof(t)){var a=t;t=a.x,i=a.y,r=v(a,"w")?a.w:a.width,o=v(a,"h")?a.h:a.height}return this.bounds?this.bounds.setTo(t,i,r,o):this.bounds=new T(t,i,r,o),this},setSpeedX:function setSpeedX(t){return this.speedX.onChange(t),this.radial=!1,this},setSpeedY:function setSpeedY(t){return this.speedY&&(this.speedY.onChange(t),this.radial=!1),this},setSpeed:function setSpeed(t){return this.speedX.onChange(t),this.speedY=null,this.radial=!0,this},setScaleX:function setScaleX(t){return this.scaleX.onChange(t),this},setScaleY:function setScaleY(t){return this.scaleY.onChange(t),this},setScale:function setScale(t){return this.scaleX.onChange(t),this.scaleY=null,this},setGravityX:function setGravityX(t){return this.gravityX=t,this},setGravityY:function setGravityY(t){return this.gravityY=t,this},setGravity:function setGravity(t,i){return this.gravityX=t,this.gravityY=i,this},setAlpha:function setAlpha(t){return this.alpha.onChange(t),this},setTint:function setTint(t){return this.tint.onChange(t),this},setEmitterAngle:function setEmitterAngle(t){return this.angle.onChange(t),this},setAngle:function setAngle(t){return this.angle.onChange(t),this},setLifespan:function setLifespan(t){return this.lifespan.onChange(t),this},setQuantity:function setQuantity(t){return this.quantity.onChange(t),this},setFrequency:function setFrequency(t,i){return this.frequency=t,this._counter=0,i&&this.quantity.onChange(i),this},setEmitZone:function setEmitZone(t){if(void 0===t)this.emitZone=null;else{var i=d(t,"type","random"),r=d(t,"source",null);switch(i){case"random":this.emitZone=new y(r);break;case"edge":var o=d(t,"quantity",1),a=d(t,"stepRate",0),h=d(t,"yoyo",!1),l=d(t,"seamless",!0);this.emitZone=new u(r,o,a,h,l)}}return this},setDeathZone:function setDeathZone(t){if(void 0===t)this.deathZone=null;else{var i=d(t,"type","onEnter"),r=d(t,"source",null);if(r&&"function"==typeof r.contains){var o="onEnter"===i;this.deathZone=new l(r,o)}}return this},reserve:function reserve(t){for(var i=this.dead,r=0;r<t;r++)i.push(new this.particleClass(this));return this},getAliveParticleCount:function getAliveParticleCount(){return this.alive.length},getDeadParticleCount:function getDeadParticleCount(){return this.dead.length},getParticleCount:function getParticleCount(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function atLimit(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function onParticleEmit(t,i){return void 0===t?(this.emitCallback=null,this.emitCallbackScope=null):"function"==typeof t&&(this.emitCallback=t,i&&(this.emitCallbackScope=i)),this},onParticleDeath:function onParticleDeath(t,i){return void 0===t?(this.deathCallback=null,this.deathCallbackScope=null):"function"==typeof t&&(this.deathCallback=t,i&&(this.deathCallbackScope=i)),this},killAll:function killAll(){for(var t=this.dead,i=this.alive;i.length>0;)t.push(i.pop());return this},forEachAlive:function forEachAlive(t,i){for(var r=this.alive,o=r.length,a=0;a<o;++a)t.call(i,r[a],this);return this},forEachDead:function forEachDead(t,i){for(var r=this.dead,o=r.length,a=0;a<o;++a)t.call(i,r[a],this);return this},start:function start(){return this.on=!0,this._counter=0,this},stop:function stop(){return this.on=!1,this},pause:function pause(){return this.active=!1,this},resume:function resume(){return this.active=!0,this},remove:function remove(){return this.manager.removeEmitter(this),this},depthSort:function depthSort(){return S(this.alive,this.depthSortCallback),this},flow:function flow(t,i){return void 0===i&&(i=1),this.frequency=t,this.quantity.onChange(i),this.start()},explode:function explode(t,i,r){return this.frequency=-1,this.emitParticle(t,i,r)},emitParticleAt:function emitParticleAt(t,i,r){return this.emitParticle(r,t,i)},emitParticle:function emitParticle(t,i,r){if(!this.atLimit()){void 0===t&&(t=this.quantity.onEmit());for(var o=this.dead,a=this.follow?this.follow.x+this.followOffset.x:i,h=this.follow?this.follow.y+this.followOffset.y:r,l=0;l<t;l++){var u=o.pop();if(u||(u=new this.particleClass(this)),u.fire(a,h),this.particleBringToTop?this.alive.push(u):this.alive.unshift(u),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,u,this),this.atLimit())break}return u}},preUpdate:function preUpdate(t,i){var r=(i*=this.timeScale)/1e3;this.trackVisible&&(this.visible=this.follow.visible);var o=this.manager.getProcessors(),a=this.alive,h=this.dead,l=0,u=[],c=a.length;for(l=0;l<c;l++){var d=a[l];d.update(i,r,o)&&u.push({index:l,particle:d})}if((c=u.length)>0){var p=this.deathCallback,g=this.deathCallbackScope;for(l=c-1;l>=0;l--){var v=u[l];a.splice(v.index,1),h.push(v.particle),p&&p.call(g,v.particle),v.particle.resetPosition()}}this.on&&(0===this.frequency?this.emitParticle():this.frequency>0&&(this._counter-=i,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function depthSortCallback(t,i){return t.y-i.y}});t.exports=C},function(t,i,r){var o=new(r(0))({initialize:function DeathZone(t,i){this.source=t,this.killOnEnter=i},willKill:function willKill(t){var i=this.source.contains(t.x,t.y);return i&&this.killOnEnter||!i&&!this.killOnEnter}});t.exports=o},function(t,i,r){var o=new(r(0))({initialize:function EdgeZone(t,i,r,o,a){void 0===o&&(o=!1),void 0===a&&(a=!0),this.source=t,this.points=[],this.quantity=i,this.stepRate=r,this.yoyo=o,this.counter=-1,this.seamless=a,this._length=0,this._direction=0,this.updateSource()},updateSource:function updateSource(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var t=this.points[0],i=this.points[this.points.length-1];t.x===i.x&&t.y===i.y&&this.points.pop()}var r=this._length;return this._length=this.points.length,this._length<r&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function changeSource(t){return this.source=t,this.updateSource()},getPoint:function getPoint(t){0===this._direction?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,-1===this.counter&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var i=this.points[this.counter];i&&(t.x=i.x,t.y=i.y)}});t.exports=o},function(t,i){t.exports=function HasAny(t,i){for(var r=0;r<i.length;r++)if(t.hasOwnProperty(i[r]))return!0;return!1}},function(t,i,r){var o=r(0),a=r(3),h=new o({initialize:function RandomZone(t){this.source=t,this._tempVec=new a},getPoint:function getPoint(t){var i=this._tempVec;this.source.getRandomPoint(i),t.x=i.x,t.y=i.y}});t.exports=h},function(t,i,r){var o=r(0),a=r(11),h=r(73),l=new o({Extends:h,Mixins:[a.PathFollower],initialize:function PathFollower(t,i,r,o,a,l){h.call(this,t,r,o,a,l),this.path=i},preUpdate:function preUpdate(t,i){this.anims.update(t,i),this.pathUpdate(t)}});t.exports=l},function(t,i){t.exports=function GetTextSize(t,i,r){var o=t.canvas,a=t.context,h=t.style,l=[],u=0,c=r.length;h.maxLines>0&&h.maxLines<r.length&&(c=h.maxLines),h.syncFont(o,a);for(var d=0;d<c;d++){var p=h.strokeThickness;p+=a.measureText(r[d]).width,h.wordWrap&&(p-=a.measureText(" ").width),l[d]=Math.ceil(p),u=Math.max(u,l[d])}var g=i.fontSize+h.strokeThickness,v=g*c,m=t.lineSpacing;return c>1&&(v+=m*(c-1)),{width:u,height:v,lines:c,lineWidths:l,lineSpacing:m,lineHeight:g}}},function(t,i,r){var o=r(0),a=r(13),h=r(6),l=r(460),u={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|MÃ‰qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},c=new o({initialize:function TextStyle(t,i){this.parent=t,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(i,!1,!0);var r=h(i,"metrics",!1);this.metrics=r?{ascent:h(r,"ascent",0),descent:h(r,"descent",0),fontSize:h(r,"fontSize",0)}:l(this)},setStyle:function setStyle(t,i,r){for(var o in void 0===i&&(i=!0),void 0===r&&(r=!1),t&&t.hasOwnProperty("fontSize")&&"number"==typeof t.fontSize&&(t.fontSize=t.fontSize.toString()+"px"),u){var l=r?u[o][1]:this[o];this[o]="wordWrapCallback"===o||"wordWrapCallbackScope"===o?h(t,u[o][0],l):a(t,u[o][0],l)}var c=h(t,"font",null);null!==c&&this.setFont(c,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var d=h(t,"fill",null);return null!==d&&(this.color=d),i?this.update(!0):this.parent},syncFont:function syncFont(t,i){i.font=this._font},syncStyle:function syncStyle(t,i){i.textBaseline="alphabetic",i.fillStyle=this.color,i.strokeStyle=this.stroke,i.lineWidth=this.strokeThickness,i.lineCap="round",i.lineJoin="round"},syncShadow:function syncShadow(t,i){i?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)},update:function update(t){return t&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=l(this)),this.parent.updateText()},setFont:function setFont(t,i){void 0===i&&(i=!0);var r=t,o="",a="";if("string"!=typeof t)r=h(t,"fontFamily","Courier"),o=h(t,"fontSize","16px"),a=h(t,"fontStyle","");else{var l=t.split(" "),u=0;a=l.length>2?l[u++]:"",o=l[u++]||"16px",r=l[u++]||"Courier"}return r===this.fontFamily&&o===this.fontSize&&a===this.fontStyle||(this.fontFamily=r,this.fontSize=o,this.fontStyle=a,i&&this.update(!0)),this.parent},setFontFamily:function setFontFamily(t){return this.fontFamily!==t&&(this.fontFamily=t,this.update(!0)),this.parent},setFontStyle:function setFontStyle(t){return this.fontStyle!==t&&(this.fontStyle=t,this.update(!0)),this.parent},setFontSize:function setFontSize(t){return"number"==typeof t&&(t=t.toString()+"px"),this.fontSize!==t&&(this.fontSize=t,this.update(!0)),this.parent},setTestString:function setTestString(t){return this.testString=t,this.update(!0)},setFixedSize:function setFixedSize(t,i){return this.fixedWidth=t,this.fixedHeight=i,t&&(this.parent.width=t),i&&(this.parent.height=i),this.update(!1)},setBackgroundColor:function setBackgroundColor(t){return this.backgroundColor=t,this.update(!1)},setFill:function setFill(t){return this.color=t,this.update(!1)},setColor:function setColor(t){return this.color=t,this.update(!1)},setResolution:function setResolution(t){return this.resolution=t,this.update(!1)},setStroke:function setStroke(t,i){return void 0===i&&(i=this.strokeThickness),void 0===t&&0!==this.strokeThickness?(this.strokeThickness=0,this.update(!0)):this.stroke===t&&this.strokeThickness===i||(this.stroke=t,this.strokeThickness=i,this.update(!0)),this.parent},setShadow:function setShadow(t,i,r,o,a,h){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r="#000"),void 0===o&&(o=0),void 0===a&&(a=!1),void 0===h&&(h=!0),this.shadowOffsetX=t,this.shadowOffsetY=i,this.shadowColor=r,this.shadowBlur=o,this.shadowStroke=a,this.shadowFill=h,this.update(!1)},setShadowOffset:function setShadowOffset(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.shadowOffsetX=t,this.shadowOffsetY=i,this.update(!1)},setShadowColor:function setShadowColor(t){return void 0===t&&(t="#000"),this.shadowColor=t,this.update(!1)},setShadowBlur:function setShadowBlur(t){return void 0===t&&(t=0),this.shadowBlur=t,this.update(!1)},setShadowStroke:function setShadowStroke(t){return this.shadowStroke=t,this.update(!1)},setShadowFill:function setShadowFill(t){return this.shadowFill=t,this.update(!1)},setWordWrapWidth:function setWordWrapWidth(t,i){return void 0===i&&(i=!1),this.wordWrapWidth=t,this.wordWrapUseAdvanced=i,this.update(!1)},setWordWrapCallback:function setWordWrapCallback(t,i){return void 0===i&&(i=null),this.wordWrapCallback=t,this.wordWrapCallbackScope=i,this.update(!1)},setAlign:function setAlign(t){return void 0===t&&(t="left"),this.align=t,this.update(!1)},setMaxLines:function setMaxLines(t){return void 0===t&&(t=0),this.maxLines=t,this.update(!1)},getTextMetrics:function getTextMetrics(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}},toJSON:function toJSON(){var t={};for(var i in u)t[i]=this[i];return t.metrics=this.getTextMetrics(),t},destroy:function destroy(){this.parent=void 0}});t.exports=c},function(t,i,r){var o=r(31);t.exports=function MeasureText(t){var i=o.create(this),r=i.getContext("2d");t.syncFont(i,r);var a=r.measureText(t.testString);if("actualBoundingBoxAscent"in a){var h=a.actualBoundingBoxAscent,l=a.actualBoundingBoxDescent;return o.remove(i),{ascent:h,descent:l,fontSize:h+l}}var u=Math.ceil(a.width*t.baselineX),c=u,d=2*c;c=c*t.baselineY|0,i.width=u,i.height=d,r.fillStyle="#f00",r.fillRect(0,0,u,d),r.font=t._font,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(t.testString,0,c);var p={ascent:0,descent:0,fontSize:0},g=r.getImageData(0,0,u,d);if(!g)return p.ascent=c,p.descent=c+6,p.fontSize=p.ascent+p.descent,o.remove(i),p;var v,m,y=g.data,T=y.length,S=4*u,w=0,b=!1;for(v=0;v<c;v++){for(m=0;m<S;m+=4)if(255!==y[w+m]){b=!0;break}if(b)break;w+=S}for(p.ascent=c-v,w=T-S,b=!1,v=d;v>c;v--){for(m=0;m<S;m+=4)if(255!==y[w+m]){b=!0;break}if(b)break;w-=S}return p.descent=v-c,p.fontSize=p.ascent+p.descent,o.remove(i),p}},function(t,i,r){var o=r(1097),a=r(0),h=r(36),l=r(59),u=r(65),c=r(14),d=r(34),p=new a({Extends:d,Mixins:[o],initialize:function Arc(t,i,r,o,a,h,l,c,p){void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=128),void 0===a&&(a=0),void 0===h&&(h=360),void 0===l&&(l=!1),d.call(this,t,"Arc",new u(0,0,o)),this._startAngle=a,this._endAngle=h,this._anticlockwise=l,this._iterations=.01,this.setPosition(i,r);var g=2*this.geom.radius;this.setSize(g,g),void 0!==c&&this.setFillStyle(c,p),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function get(){return this._iterations},set:function set(t){this._iterations=t,this.updateData()}},radius:{get:function get(){return this.geom.radius},set:function set(t){this.geom.radius=t;var i=2*t;this.setSize(i,i),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function get(){return this._startAngle},set:function set(t){this._startAngle=t,this.updateData()}},endAngle:{get:function get(){return this._endAngle},set:function set(t){this._endAngle=t,this.updateData()}},anticlockwise:{get:function get(){return this._anticlockwise},set:function set(t){this._anticlockwise=t,this.updateData()}},setRadius:function setRadius(t){return this.radius=t,this},setIterations:function setIterations(t){return void 0===t&&(t=.01),this.iterations=t,this},setStartAngle:function setStartAngle(t,i){return this._startAngle=t,void 0!==i&&(this._anticlockwise=i),this.updateData()},setEndAngle:function setEndAngle(t,i){return this._endAngle=t,void 0!==i&&(this._anticlockwise=i),this.updateData()},updateData:function updateData(){var t=this._iterations,i=t,r=this.geom.radius,o=h(this._startAngle),a=h(this._endAngle),u=r,d=r;a-=o,this._anticlockwise?a<-c.PI2?a=-c.PI2:a>0&&(a=-c.PI2+a%c.PI2):a>c.PI2?a=c.PI2:a<0&&(a=c.PI2+a%c.PI2);for(var p,g=[u+Math.cos(o)*r,d+Math.sin(o)*r];i<1;)p=a*i+o,g.push(u+Math.cos(p)*r,d+Math.sin(p)*r),i+=t;return p=a+o,g.push(u+Math.cos(p)*r,d+Math.sin(p)*r),g.push(u+Math.cos(o)*r,d+Math.sin(o)*r),this.pathIndexes=l(g),this.pathData=g,this}});t.exports=p},function(t,i,r){var o=r(0),a=r(1100),h=r(59),l=r(10),u=r(34),c=new o({Extends:u,Mixins:[a],initialize:function Curve(t,i,r,o,a,h){void 0===i&&(i=0),void 0===r&&(r=0),u.call(this,t,"Curve",o),this._smoothness=32,this._curveBounds=new l,this.closePath=!1,this.setPosition(i,r),void 0!==a&&this.setFillStyle(a,h),this.updateData()},smoothness:{get:function get(){return this._smoothness},set:function set(t){this._smoothness=t,this.updateData()}},setSmoothness:function setSmoothness(t){return this._smoothness=t,this.updateData()},updateData:function updateData(){var t=this._curveBounds,i=this._smoothness;this.geom.getBounds(t,i),this.setSize(t.width,t.height),this.updateDisplayOrigin();for(var r=[],o=this.geom.getPoints(i),a=0;a<o.length;a++)r.push(o[a].x,o[a].y);return r.push(o[0].x,o[0].y),this.pathIndexes=h(r),this.pathData=r,this}});t.exports=c},function(t,i,r){var o=r(0),a=r(59),h=r(1103),l=r(111),u=r(34),c=new o({Extends:u,Mixins:[h],initialize:function Ellipse(t,i,r,o,a,h,c){void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=128),void 0===a&&(a=128),u.call(this,t,"Ellipse",new l(o/2,a/2,o,a)),this._smoothness=64,this.setPosition(i,r),this.width=o,this.height=a,void 0!==h&&this.setFillStyle(h,c),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function get(){return this._smoothness},set:function set(t){this._smoothness=t,this.updateData()}},setSize:function setSize(t,i){return this.width=t,this.height=i,this.geom.setPosition(t/2,i/2),this.geom.setSize(t,i),this.updateData()},setSmoothness:function setSmoothness(t){return this._smoothness=t,this.updateData()},updateData:function updateData(){for(var t=[],i=this.geom.getPoints(this._smoothness),r=0;r<i.length;r++)t.push(i[r].x,i[r].y);return t.push(i[0].x,i[0].y),this.pathIndexes=a(t),this.pathData=t,this}});t.exports=c},function(t,i,r){var o=r(0),a=r(34),h=r(1106),l=new o({Extends:a,Mixins:[h],initialize:function Grid(t,i,r,o,h,l,u,c,d,p,g){void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=128),void 0===h&&(h=128),void 0===l&&(l=32),void 0===u&&(u=32),a.call(this,t,"Grid",null),this.cellWidth=l,this.cellHeight=u,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(i,r),this.setSize(o,h),this.setFillStyle(c,d),void 0!==p&&this.setOutlineStyle(p,g),this.updateDisplayOrigin()},setFillStyle:function setFillStyle(t,i){return void 0===i&&(i=1),void 0===t?this.showCells=!1:(this.fillColor=t,this.fillAlpha=i,this.showCells=!0),this},setAltFillStyle:function setAltFillStyle(t,i){return void 0===i&&(i=1),void 0===t?this.showAltCells=!1:(this.altFillColor=t,this.altFillAlpha=i,this.showAltCells=!0),this},setOutlineStyle:function setOutlineStyle(t,i){return void 0===i&&(i=1),void 0===t?this.showOutline=!1:(this.outlineFillColor=t,this.outlineFillAlpha=i,this.showOutline=!0),this}});t.exports=l},function(t,i,r){var o=r(1109),a=r(0),h=r(34),l=new a({Extends:h,Mixins:[o],initialize:function IsoBox(t,i,r,o,a,l,u,c){void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=48),void 0===a&&(a=32),void 0===l&&(l=15658734),void 0===u&&(u=10066329),void 0===c&&(c=13421772),h.call(this,t,"IsoBox",null),this.projection=4,this.fillTop=l,this.fillLeft=u,this.fillRight=c,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(i,r),this.setSize(o,a),this.updateDisplayOrigin()},setProjection:function setProjection(t){return this.projection=t,this},setFaces:function setFaces(t,i,r){return void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===r&&(r=!0),this.showTop=t,this.showLeft=i,this.showRight=r,this},setFillStyle:function setFillStyle(t,i,r){return this.fillTop=t,this.fillLeft=i,this.fillRight=r,this.isFilled=!0,this}});t.exports=l},function(t,i,r){var o=r(0),a=r(1112),h=r(34),l=new o({Extends:h,Mixins:[a],initialize:function IsoTriangle(t,i,r,o,a,l,u,c,d){void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=48),void 0===a&&(a=32),void 0===l&&(l=!1),void 0===u&&(u=15658734),void 0===c&&(c=10066329),void 0===d&&(d=13421772),h.call(this,t,"IsoTriangle",null),this.projection=4,this.fillTop=u,this.fillLeft=c,this.fillRight=d,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=l,this.isFilled=!0,this.setPosition(i,r),this.setSize(o,a),this.updateDisplayOrigin()},setProjection:function setProjection(t){return this.projection=t,this},setReversed:function setReversed(t){return this.isReversed=t,this},setFaces:function setFaces(t,i,r){return void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===r&&(r=!0),this.showTop=t,this.showLeft=i,this.showRight=r,this},setFillStyle:function setFillStyle(t,i,r){return this.fillTop=t,this.fillLeft=i,this.fillRight=r,this.isFilled=!0,this}});t.exports=l},function(t,i,r){var o=r(0),a=r(34),h=r(47),l=r(1115),u=new o({Extends:a,Mixins:[l],initialize:function Line(t,i,r,o,l,u,c,d,p){void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===l&&(l=0),void 0===u&&(u=128),void 0===c&&(c=0),a.call(this,t,"Line",new h(o,l,u,c));var g=Math.max(1,this.geom.right-this.geom.left),v=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(i,r),this.setSize(g,v),void 0!==d&&this.setStrokeStyle(1,d,p),this.updateDisplayOrigin()},setLineWidth:function setLineWidth(t,i){return void 0===i&&(i=t),this._startWidth=t,this._endWidth=i,this.lineWidth=t,this},setTo:function setTo(t,i,r,o){return this.geom.setTo(t,i,r,o),this}});t.exports=u},function(t,i,r){var o=r(1118),a=r(0),h=r(59),l=r(469),u=r(227),c=r(34),d=r(472),p=new a({Extends:c,Mixins:[o],initialize:function Polygon(t,i,r,o,a,h){void 0===i&&(i=0),void 0===r&&(r=0),c.call(this,t,"Polygon",new u(o));var d=l(this.geom);this.setPosition(i,r),this.setSize(d.width,d.height),void 0!==a&&this.setFillStyle(a,h),this.updateDisplayOrigin(),this.updateData()},smooth:function smooth(t){void 0===t&&(t=1);for(var i=0;i<t;i++)d(this.geom);return this.updateData()},updateData:function updateData(){for(var t=[],i=this.geom.points,r=0;r<i.length;r++)t.push(i[r].x,i[r].y);return t.push(i[0].x,i[0].y),this.pathIndexes=h(t),this.pathData=t,this}});t.exports=p},function(t,i,r){var o=r(10);t.exports=function GetAABB(t,i){void 0===i&&(i=new o);for(var r,a=1/0,h=1/0,l=-a,u=-h,c=0;c<t.points.length;c++)r=t.points[c],a=Math.min(a,r.x),h=Math.min(h,r.y),l=Math.max(l,r.x),u=Math.max(u,r.y);return i.x=a,i.y=h,i.width=l-a,i.height=u-h,i}},function(t,i,r){var o=r(67),a=r(47),h=r(471);t.exports=function GetPoints(t,i,r,l){void 0===l&&(l=[]);var u=t.points,c=h(t);!i&&r>0&&(i=c/r);for(var d=0;d<i;d++)for(var p=c*(d/i),g=0,v=0;v<u.length;v++){var m=u[v],y=u[(v+1)%u.length],T=new a(m.x,m.y,y.x,y.y),S=o(T);if(!(p<g||p>g+S)){var w=T.getPoint((p-g)/S);l.push(w);break}g+=S}return l}},function(t,i,r){var o=r(67),a=r(47);t.exports=function Perimeter(t){for(var i=t.points,r=0,h=0;h<i.length;h++){var l=i[h],u=i[(h+1)%i.length],c=new a(l.x,l.y,u.x,u.y);r+=o(c)}return r}},function(t,i){var r=function copy(t,i){return t[0]=i[0],t[1]=i[1],t};t.exports=function Smooth(t){var i,o=[],a=t.points;for(i=0;i<a.length;i++)o.push([a[i].x,a[i].y]);var h=[];for(o.length>0&&h.push(r([0,0],o[0])),i=0;i<o.length-1;i++){var l=o[i],u=o[i+1],c=l[0],d=l[1],p=u[0],g=u[1];h.push([.85*c+.15*p,.85*d+.15*g]),h.push([.15*c+.85*p,.15*d+.85*g])}return o.length>1&&h.push(r([0,0],o[o.length-1])),t.setTo(h)}},function(t,i,r){var o=r(0),a=r(10),h=r(34),l=r(1121),u=new o({Extends:h,Mixins:[l],initialize:function Rectangle(t,i,r,o,l,u,c){void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=128),void 0===l&&(l=128),h.call(this,t,"Rectangle",new a(0,0,o,l)),this.setPosition(i,r),this.setSize(o,l),void 0!==u&&this.setFillStyle(u,c),this.updateDisplayOrigin(),this.updateData()},setSize:function setSize(t,i){return this.width=t,this.height=i,this.geom.setSize(t,i),this.updateData(),this},updateData:function updateData(){var t=[],i=this.geom,r=this._tempLine;return i.getLineA(r),t.push(r.x1,r.y1,r.x2,r.y2),i.getLineB(r),t.push(r.x2,r.y2),i.getLineC(r),t.push(r.x2,r.y2),i.getLineD(r),t.push(r.x2,r.y2),this.pathData=t,this}});t.exports=u},function(t,i,r){var o=r(1124),a=r(0),h=r(59),l=r(34),u=new a({Extends:l,Mixins:[o],initialize:function Star(t,i,r,o,a,h,u,c){void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=5),void 0===a&&(a=32),void 0===h&&(h=64),l.call(this,t,"Star",null),this._points=o,this._innerRadius=a,this._outerRadius=h,this.setPosition(i,r),this.setSize(2*h,2*h),void 0!==u&&this.setFillStyle(u,c),this.updateDisplayOrigin(),this.updateData()},setPoints:function setPoints(t){return this._points=t,this.updateData()},setInnerRadius:function setInnerRadius(t){return this._innerRadius=t,this.updateData()},setOuterRadius:function setOuterRadius(t){return this._outerRadius=t,this.updateData()},points:{get:function get(){return this._points},set:function set(t){this._points=t,this.updateData()}},innerRadius:{get:function get(){return this._innerRadius},set:function set(t){this._innerRadius=t,this.updateData()}},outerRadius:{get:function get(){return this._outerRadius},set:function set(t){this._outerRadius=t,this.updateData()}},updateData:function updateData(){var t=[],i=this._points,r=this._innerRadius,o=this._outerRadius,a=Math.PI/2*3,l=Math.PI/i,u=o,c=o;t.push(u,c+-o);for(var d=0;d<i;d++)t.push(u+Math.cos(a)*o,c+Math.sin(a)*o),a+=l,t.push(u+Math.cos(a)*r,c+Math.sin(a)*r),a+=l;return t.push(u,c+-o),this.pathIndexes=h(t),this.pathData=t,this}});t.exports=u},function(t,i,r){var o=r(0),a=r(34),h=r(82),l=r(1127),u=new o({Extends:a,Mixins:[l],initialize:function Triangle(t,i,r,o,l,u,c,d,p,g,v){void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===l&&(l=128),void 0===u&&(u=64),void 0===c&&(c=0),void 0===d&&(d=128),void 0===p&&(p=128),a.call(this,t,"Triangle",new h(o,l,u,c,d,p));var m=this.geom.right-this.geom.left,y=this.geom.bottom-this.geom.top;this.setPosition(i,r),this.setSize(m,y),void 0!==g&&this.setFillStyle(g,v),this.updateDisplayOrigin(),this.updateData()},setTo:function setTo(t,i,r,o,a,h){return this.geom.setTo(t,i,r,o,a,h),this.updateData()},updateData:function updateData(){var t=[],i=this.geom,r=this._tempLine;return i.getLineA(r),t.push(r.x1,r.y1,r.x2,r.y2),i.getLineB(r),t.push(r.x2,r.y2),i.getLineC(r),t.push(r.x2,r.y2),this.pathData=t,this}});t.exports=u},function(t,i,r){var o=r(4),a=r(67);t.exports=function GetPoint(t,i,r){void 0===r&&(r=new o);var h=t.getLineA(),l=t.getLineB(),u=t.getLineC();if(i<=0||i>=1)return r.x=h.x1,r.y=h.y1,r;var c=a(h),d=a(l),p=a(u),g=(c+d+p)*i,v=0;return g<c?(v=g/c,r.x=h.x1+(h.x2-h.x1)*v,r.y=h.y1+(h.y2-h.y1)*v):g>c+d?(v=(g-=c+d)/p,r.x=u.x1+(u.x2-u.x1)*v,r.y=u.y1+(u.y2-u.y1)*v):(v=(g-=c)/d,r.x=l.x1+(l.x2-l.x1)*v,r.y=l.y1+(l.y2-l.y1)*v),r}},function(t,i,r){var o=r(67),a=r(4);t.exports=function GetPoints(t,i,r,h){void 0===h&&(h=[]);var l=t.getLineA(),u=t.getLineB(),c=t.getLineC(),d=o(l),p=o(u),g=o(c),v=d+p+g;!i&&r>0&&(i=v/r);for(var m=0;m<i;m++){var y=v*(m/i),T=0,S=new a;y<d?(T=y/d,S.x=l.x1+(l.x2-l.x1)*T,S.y=l.y1+(l.y2-l.y1)*T):y>d+p?(T=(y-=d+p)/g,S.x=c.x1+(c.x2-c.x1)*T,S.y=c.y1+(c.y2-c.y1)*T):(T=(y-=d)/p,S.x=u.x1+(u.x2-u.x1)*T,S.y=u.y1+(u.y2-u.y1)*T),h.push(S)}return h}},function(t,i){t.exports=function SetValue(t,i,r){if(!t||"number"==typeof t)return!1;if(t.hasOwnProperty(i))return t[i]=r,!0;if(-1!==i.indexOf(".")){for(var o=i.split("."),a=t,h=t,l=0;l<o.length;l++){if(!a.hasOwnProperty(o[l]))return!1;h=a,a=a[o[l]]}return h[o[o.length-1]]=r,!0}return!1}},function(t,i,r){var o=r(116),a=r(117);t.exports=function GenerateVerts(t,i,r,h,l,u,c){if(void 0===h&&(h=!1),void 0===u&&(u=16777215),void 0===c&&(c=1),t.length===i.length){var d,p,g,v,m,y,T,S,w,b,C,A={faces:[],vertices:[]},E=h?3:2,M=Array.isArray(u),_=Array.isArray(c);if(Array.isArray(r)&&r.length>0)for(d=0;d<r.length;d++){var R=r[d],P=2*r[d],k=r[d]*E;p=t[k],g=t[k+1],v=h?t[k+2]:0,m=i[P],y=i[P+1],T=M?u[R]:u,S=_?c[R]:c,w=0,b=0,C=0,l&&(w=l[k],b=l[k+1],C=h?l[k+2]:0),A.vertices.push(new a(p,g,v,m,y,T,S,w,b,C))}else{var O=0,L=0;for(d=0;d<t.length;d+=E)p=t[d],g=t[d+1],v=h?t[d+2]:0,m=i[O],y=i[O+1],T=M?u[L]:u,S=_?c[L]:c,w=0,b=0,C=0,l&&(w=l[d],b=l[d+1],C=h?l[d+2]:0),A.vertices.push(new a(p,g,v,m,y,T,S,w,b,C)),O+=2,L++}for(d=0;d<A.vertices.length;d+=3){var D=A.vertices[d],I=A.vertices[d+1],B=A.vertices[d+2];A.faces.push(new o(D,I,B))}return A}console.warn("GenerateVerts: vertices and uvs count not equal")}},function(t,i,r){var o=r(116),a=r(69),h=r(39),l=r(117),u=new h,c=new h,d=new a;t.exports=function GenerateObjVerts(t,i,r,a,h,p,g,v,m,y){void 0===r&&(r=1),void 0===a&&(a=0),void 0===h&&(h=0),void 0===p&&(p=0),void 0===g&&(g=0),void 0===v&&(v=0),void 0===m&&(m=0),void 0===y&&(y=!0);var T={faces:[],verts:[]},S=t.materials;u.set(a,h,p),c.set(g,v,m),d.fromRotationXYTranslation(c,u,y);for(var w=0;w<t.models.length;w++)for(var b=t.models[w],C=b.vertices,A=b.textureCoords,E=b.faces,M=0;M<E.length;M++){var _=E[M],R=_.vertices[0],P=_.vertices[1],k=_.vertices[2],O=C[R.vertexIndex],L=C[P.vertexIndex],D=C[k.vertexIndex],I=R.textureCoordsIndex,B=P.textureCoordsIndex,N=k.textureCoordsIndex,G=-1===I?{u:0,v:1}:A[I],Y=-1===B?{u:0,v:0}:A[B],U=-1===N?{u:1,v:1}:A[N],X=16777215;""!==_.material&&S[_.material]&&(X=S[_.material]);var V=new l(O.x*r,O.y*r,O.z*r,G.u,G.v,X).transformMat4(d),z=new l(L.x*r,L.y*r,L.z*r,Y.u,Y.v,X).transformMat4(d),W=new l(D.x*r,D.y*r,D.z*r,U.u,U.v,X).transformMat4(d);T.verts.push(V,z,W),T.faces.push(new o(V,z,W))}return i&&(i.faces=i.faces.concat(T.faces),i.vertices=i.vertices.concat(T.verts)),T}},function(t,i,r){var o=r(65),a=r(0),h=r(11),l=r(200),u=r(12),c=new a({Extends:o,Mixins:[h.ScrollFactor,h.Visible],initialize:function Light(t,i,r,a,h,u,c){o.call(this,t,i,r),this.color=new l(a,h,u),this.intensity=c,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function willRender(t){return!(c.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},setColor:function setColor(t){var i=u.getFloatsFromUintRGB(t);return this.color.set(i[0],i[1],i[2]),this},setIntensity:function setIntensity(t){return this.intensity=t,this},setRadius:function setRadius(t){return this.radius=t,this}});c.RENDER_MASK=15,t.exports=c},function(t,i,r){var o=r(151),a=r(0),h=r(50),l=r(481),u=r(150),c=r(200),d=r(74),p=r(79),g=r(12),v=new a({initialize:function LightsManager(){this.lights=[],this.ambientColor=new c(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function addPointLight(t,i,r,o,a,h){return this.systems.displayList.add(new u(this.scene,t,i,r,o,a,h))},enable:function enable(){return-1===this.maxLights&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function disable(){return this.active=!1,this},getLights:function getLights(t){for(var i=this.lights,r=t.worldView,a=[],l=0;l<i.length;l++){var u=i[l];u.willRender(t)&&o(u,r)&&a.push({light:u,distance:h(u.x,u.y,r.centerX,r.centerY)})}return a.length>this.maxLights&&(p(a,this.sortByDistance),a=a.slice(0,this.maxLights)),this.visibleLights=a.length,a},sortByDistance:function sortByDistance(t,i){return t.distance>=i.distance},setAmbientColor:function setAmbientColor(t){var i=g.getFloatsFromUintRGB(t);return this.ambientColor.set(i[0],i[1],i[2]),this},getMaxVisibleLights:function getMaxVisibleLights(){return this.maxLights},getLightCount:function getLightCount(){return this.lights.length},addLight:function addLight(t,i,r,o,a){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=128),void 0===o&&(o=16777215),void 0===a&&(a=1);var h=g.getFloatsFromUintRGB(o),u=new l(t,i,r,h[0],h[1],h[2],a);return this.lights.push(u),u},removeLight:function removeLight(t){var i=this.lights.indexOf(t);return i>=0&&d(this.lights,i),this},shutdown:function shutdown(){this.lights.length=0},destroy:function destroy(){this.shutdown()}});t.exports=v},function(t,i,r){var o=r(56),a=r(17),h={Circle:r(1191),Ellipse:r(1201),Intersects:r(484),Line:r(1221),Mesh:r(1243),Point:r(1246),Polygon:r(1260),Rectangle:r(502),Triangle:r(1293)};h=a(!1,h,o),t.exports=h},function(t,i,r){t.exports={CircleToCircle:r(231),CircleToRectangle:r(151),GetCircleToCircle:r(1211),GetCircleToRectangle:r(1212),GetLineToCircle:r(232),GetLineToLine:r(485),GetLineToPoints:r(486),GetLineToPolygon:r(487),GetLineToRectangle:r(234),GetRaysFromPointToPolygon:r(1213),GetRectangleIntersection:r(1214),GetRectangleToRectangle:r(1215),GetRectangleToTriangle:r(1216),GetTriangleToCircle:r(1217),GetTriangleToLine:r(492),GetTriangleToTriangle:r(1218),LineToCircle:r(233),LineToLine:r(96),LineToRectangle:r(488),PointToLine:r(496),PointToLineSegment:r(1219),RectangleToRectangle:r(152),RectangleToTriangle:r(489),RectangleToValues:r(1220),TriangleToCircle:r(491),TriangleToLine:r(493),TriangleToTriangle:r(494)}},function(t,i,r){var o=r(39);t.exports=function GetLineToLine(t,i,r){var a=t.x1,h=t.y1,l=t.x2,u=t.y2,c=i.x1,d=i.y1,p=l-a,g=u-h,v=i.x2-c,m=i.y2-d;if(0===p||0==m*p-v*g)return!1;var y=(p*(d-h)+g*(a-c))/(v*g-m*p),T=(c+v*y-a)/p;return T<0||y<0||y>1?null:(void 0===r&&(r=new o),r.set(a+p*T,h+g*T,T))}},function(t,i,r){var o=r(39),a=r(485),h=new(r(47)),l=new o;t.exports=function GetLineToPoints(t,i,r){void 0===r&&(r=new o);var u=!1;r.set(),l.set();for(var c=i[0],d=1;d<i.length;d++){var p=i[d];h.setTo(c.x,c.y,p.x,p.y),c=p,a(t,h,l)&&(!u||l.z<r.z)&&(r.copy(l),u=!0)}return u?r:null}},function(t,i,r){var o=r(39),a=r(140),h=r(486),l=new o;t.exports=function GetLineToPolygon(t,i,r){void 0===r&&(r=new a),Array.isArray(i)||(i=[i]);var o=!1;r.set(),l.set();for(var u=0;u<i.length;u++)h(t,i[u].points,l)&&(!o||l.z<r.z)&&(r.set(l.x,l.y,l.z,u),o=!0);return o?r:null}},function(t,i){t.exports=function LineToRectangle(t,i){var r=t.x1,o=t.y1,a=t.x2,h=t.y2,l=i.x,u=i.y,c=i.right,d=i.bottom,p=0;if(r>=l&&r<=c&&o>=u&&o<=d||a>=l&&a<=c&&h>=u&&h<=d)return!0;if(r<l&&a>=l){if((p=o+(h-o)*(l-r)/(a-r))>u&&p<=d)return!0}else if(r>c&&a<=c&&(p=o+(h-o)*(c-r)/(a-r))>=u&&p<=d)return!0;if(o<u&&h>=u){if((p=r+(a-r)*(u-o)/(h-o))>=l&&p<=c)return!0}else if(o>d&&h<=d&&(p=r+(a-r)*(d-o)/(h-o))>=l&&p<=c)return!0;return!1}},function(t,i,r){var o=r(96),a=r(57),h=r(235),l=r(490);t.exports=function RectangleToTriangle(t,i){if(i.left>t.right||i.right<t.left||i.top>t.bottom||i.bottom<t.top)return!1;var r=i.getLineA(),u=i.getLineB(),c=i.getLineC();if(a(t,r.x1,r.y1)||a(t,r.x2,r.y2))return!0;if(a(t,u.x1,u.y1)||a(t,u.x2,u.y2))return!0;if(a(t,c.x1,c.y1)||a(t,c.x2,c.y2))return!0;var d=t.getLineA(),p=t.getLineB(),g=t.getLineC(),v=t.getLineD();if(o(r,d)||o(r,p)||o(r,g)||o(r,v))return!0;if(o(u,d)||o(u,p)||o(u,g)||o(u,v))return!0;if(o(c,d)||o(c,p)||o(c,g)||o(c,v))return!0;var m=l(t);return h(i,m,!0).length>0}},function(t,i){t.exports=function Decompose(t,i){return void 0===i&&(i=[]),i.push({x:t.x,y:t.y}),i.push({x:t.right,y:t.y}),i.push({x:t.right,y:t.bottom}),i.push({x:t.x,y:t.bottom}),i}},function(t,i,r){var o=r(233),a=r(115);t.exports=function TriangleToCircle(t,i){return!(t.left>i.right||t.right<i.left||t.top>i.bottom||t.bottom<i.top||!a(t,i.x,i.y)&&!o(t.getLineA(),i)&&!o(t.getLineB(),i)&&!o(t.getLineC(),i))}},function(t,i,r){var o=r(4),a=r(493),h=r(96);t.exports=function GetTriangleToLine(t,i,r){if(void 0===r&&(r=[]),a(t,i))for(var l=t.getLineA(),u=t.getLineB(),c=t.getLineC(),d=[new o,new o,new o],p=[h(l,i,d[0]),h(u,i,d[1]),h(c,i,d[2])],g=0;g<3;g++)p[g]&&r.push(d[g]);return r}},function(t,i,r){var o=r(96);t.exports=function TriangleToLine(t,i){return!!(t.contains(i.x1,i.y1)||t.contains(i.x2,i.y2)||o(t.getLineA(),i)||o(t.getLineB(),i)||o(t.getLineC(),i))}},function(t,i,r){var o=r(235),a=r(495),h=r(96);t.exports=function TriangleToTriangle(t,i){if(t.left>i.right||t.right<i.left||t.top>i.bottom||t.bottom<i.top)return!1;var r=t.getLineA(),l=t.getLineB(),u=t.getLineC(),c=i.getLineA(),d=i.getLineB(),p=i.getLineC();if(h(r,c)||h(r,d)||h(r,p))return!0;if(h(l,c)||h(l,d)||h(l,p))return!0;if(h(u,c)||h(u,d)||h(u,p))return!0;var g=a(t),v=o(i,g,!0);return v.length>0||(g=a(i),(v=o(t,g,!0)).length>0)}},function(t,i){t.exports=function Decompose(t,i){return void 0===i&&(i=[]),i.push({x:t.x1,y:t.y1}),i.push({x:t.x2,y:t.y2}),i.push({x:t.x3,y:t.y3}),i}},function(t,i){t.exports=function PointToLine(t,i,r){void 0===r&&(r=1);var o=i.x1,a=i.y1,h=i.x2,l=i.y2,u=t.x,c=t.y,d=(h-o)*(h-o)+(l-a)*(l-a);if(0===d)return!1;var p=((u-o)*(h-o)+(c-a)*(l-a))/d;if(p<0)return Math.sqrt((o-u)*(o-u)+(a-c)*(a-c))<=r;if(p>=0&&p<=1){var g=((a-c)*(h-o)-(o-u)*(l-a))/d;return Math.abs(g)*Math.sqrt(d)<=r}return Math.sqrt((h-u)*(h-u)+(l-c)*(l-c))<=r}},function(t,i,r){var o=r(14),a=r(68),h=r(97);t.exports=function NormalAngle(t){var i=h(t)-o.TAU;return a(i,-Math.PI,Math.PI)}},function(t,i){var r=!0,o="untitled",a="",h="";function stripComments(t){var i=t.indexOf("#");return i>-1?t.substring(0,i):t}function currentModel(t){return 0===t.models.length&&t.models.push({faces:[],name:o,textureCoords:[],vertexNormals:[],vertices:[]}),a="",t.models[t.models.length-1]}function parseObject(t,i){var r=t.length>=2?t[1]:o;i.models.push({faces:[],name:r,textureCoords:[],vertexNormals:[],vertices:[]}),a=""}function parseGroup(t){2===t.length&&(a=t[1])}function parseVertexCoords(t,i){var r=t.length,o=r>=2?parseFloat(t[1]):0,a=r>=3?parseFloat(t[2]):0,h=r>=4?parseFloat(t[3]):0;currentModel(i).vertices.push({x:o,y:a,z:h})}function parseTextureCoords(t,i){var o=t.length,a=o>=2?parseFloat(t[1]):0,h=o>=3?parseFloat(t[2]):0,l=o>=4?parseFloat(t[3]):0;isNaN(a)&&(a=0),isNaN(h)&&(h=0),isNaN(l)&&(l=0),r&&(h=1-h),currentModel(i).textureCoords.push({u:a,v:h,w:l})}function parseVertexNormal(t,i){var r=t.length,o=r>=2?parseFloat(t[1]):0,a=r>=3?parseFloat(t[2]):0,h=r>=4?parseFloat(t[3]):0;currentModel(i).vertexNormals.push({x:o,y:a,z:h})}function parsePolygon(t,i){var r=t.length-1;if(!(r<3)){for(var o={group:a,material:h,vertices:[]},l=0;l<r;l++){var u=t[l+1].split("/"),c=u.length;if(!(c<1||c>3)){var d=0,p=0,g=0;d=parseInt(u[0],10),c>1&&""!==u[1]&&(p=parseInt(u[1],10)),c>2&&(g=parseInt(u[2],10)),0!==d&&(d<0&&(d=currentModel(i).vertices.length+1+d),p-=1,d-=1,g-=1,o.vertices.push({textureCoordsIndex:p,vertexIndex:d,vertexNormalIndex:g}))}}currentModel(i).faces.push(o)}}function parseMtlLib(t,i){t.length>=2&&i.materialLibraries.push(t[1])}function parseUseMtl(t){t.length>=2&&(h=t[1])}t.exports=function ParseObj(t,i){void 0===i&&(i=!0),r=i;var o={materials:{},materialLibraries:[],models:[]};a="",h="";for(var l=t.split("\n"),u=0;u<l.length;u++){var c=stripComments(l[u]).replace(/\s\s+/g," ").trim().split(" ");switch(c[0].toLowerCase()){case"o":parseObject(c,o);break;case"g":parseGroup(c);break;case"v":parseVertexCoords(c,o);break;case"vt":parseTextureCoords(c,o);break;case"vn":parseVertexNormal(c,o);break;case"f":parsePolygon(c,o);break;case"mtllib":parseMtlLib(c,o);break;case"usemtl":parseUseMtl(c)}}return o}},function(t,i,r){var o=r(103);t.exports=function ParseObjMaterial(t){for(var i={},r=t.split("\n"),a="",h=0;h<r.length;h++){var l=r[h].trim();if(0!==l.indexOf("#")&&""!==l){var u=l.replace(/\s\s+/g," ").trim().split(" ");switch(u[0].toLowerCase()){case"newmtl":a=u[1];break;case"kd":var c=Math.floor(255*u[1]),d=u.length>=2?Math.floor(255*u[2]):c,p=u.length>=3?Math.floor(255*u[3]):c;i[a]=o(c,d,p)}}}return i}},function(t,i){t.exports=function GetMagnitude(t){return Math.sqrt(t.x*t.x+t.y*t.y)}},function(t,i){t.exports=function GetMagnitudeSq(t){return t.x*t.x+t.y*t.y}},function(t,i,r){var o=r(10);o.Area=r(1267),o.Ceil=r(1268),o.CeilAll=r(1269),o.CenterOn=r(190),o.Clone=r(1270),o.Contains=r(57),o.ContainsPoint=r(1271),o.ContainsRect=r(503),o.CopyFrom=r(1272),o.Decompose=r(490),o.Equals=r(1273),o.FitInside=r(1274),o.FitOutside=r(1275),o.Floor=r(1276),o.FloorAll=r(1277),o.FromPoints=r(199),o.FromXY=r(1278),o.GetAspectRatio=r(237),o.GetCenter=r(1279),o.GetPoint=r(171),o.GetPoints=r(306),o.GetSize=r(1280),o.Inflate=r(1281),o.Intersection=r(1282),o.MarchingAnts=r(316),o.MergePoints=r(1283),o.MergeRect=r(1284),o.MergeXY=r(1285),o.Offset=r(1286),o.OffsetPoint=r(1287),o.Overlaps=r(1288),o.Perimeter=r(130),o.PerimeterPoint=r(1289),o.Random=r(174),o.RandomOutside=r(1290),o.SameDimensions=r(1291),o.Scale=r(1292),o.Union=r(441),t.exports=o},function(t,i){t.exports=function ContainsRect(t,i){return!(i.width*i.height>t.width*t.height)&&i.x>t.x&&i.x<t.right&&i.right>t.x&&i.right<t.right&&i.y>t.y&&i.y<t.bottom&&i.bottom>t.y&&i.bottom<t.bottom}},function(t,i,r){var o=r(4);t.exports=function Centroid(t,i){return void 0===i&&(i=new o),i.x=(t.x1+t.x2+t.x3)/3,i.y=(t.y1+t.y2+t.y3)/3,i}},function(t,i){t.exports=function Offset(t,i,r){return t.x1+=i,t.y1+=r,t.x2+=i,t.y2+=r,t.x3+=i,t.y3+=r,t}},function(t,i,r){var o=r(4);function getLength(t,i,r,o){var a=t-r,h=i-o,l=a*a+h*h;return Math.sqrt(l)}t.exports=function InCenter(t,i){void 0===i&&(i=new o);var r=t.x1,a=t.y1,h=t.x2,l=t.y2,u=t.x3,c=t.y3,d=getLength(u,c,h,l),p=getLength(r,a,u,c),g=getLength(h,l,r,a),v=d+p+g;return i.x=(r*d+h*p+u*g)/v,i.y=(a*d+l*p+c*g)/v,i}},function(t,i){t.exports=function CreatePixelPerfectHandler(t,i){return function(r,o,a,h){var l=t.getPixelAlpha(o,a,h.texture.key,h.frame.name);return l&&l>=i}}},function(t,i){t.exports=function CreateInteractiveObject(t,i,r){return{gameObject:t,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:i,hitAreaCallback:r,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}}},function(t,i,r){var o=new(r(0))({initialize:function Axis(t,i){this.pad=t,this.events=t.events,this.index=i,this.value=0,this.threshold=.1},update:function update(t){this.value=t},getValue:function getValue(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function destroy(){this.pad=null,this.events=null}});t.exports=o},function(t,i,r){var o=r(0),a=r(239),h=new o({initialize:function Button(t,i){this.pad=t,this.events=t.manager,this.index=i,this.value=0,this.threshold=1,this.pressed=!1},update:function update(t){this.value=t;var i=this.pad,r=this.index;t>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(a.BUTTON_DOWN,i,this,t),this.pad.emit(a.GAMEPAD_BUTTON_DOWN,r,t,this)):this.pressed&&(this.pressed=!1,this.events.emit(a.BUTTON_UP,i,this,t),this.pad.emit(a.GAMEPAD_BUTTON_UP,r,t,this))},destroy:function destroy(){this.pad=null,this.events=null}});t.exports=h},function(t,i,r){var o=r(509),a=r(510),h=r(0),l=r(9),u=r(3),c=new h({Extends:l,initialize:function Gamepad(t,i){l.call(this),this.manager=t,this.pad=i,this.id=i.id,this.index=i.index;for(var r=[],h=0;h<i.buttons.length;h++)r.push(new a(this,h));this.buttons=r;var c=[];for(h=0;h<i.axes.length;h++)c.push(new o(this,h));this.axes=c,this.vibration=i.vibrationActuator;var d={value:0,pressed:!1};this._LCLeft=r[14]?r[14]:d,this._LCRight=r[15]?r[15]:d,this._LCTop=r[12]?r[12]:d,this._LCBottom=r[13]?r[13]:d,this._RCLeft=r[2]?r[2]:d,this._RCRight=r[1]?r[1]:d,this._RCTop=r[3]?r[3]:d,this._RCBottom=r[0]?r[0]:d,this._FBLeftTop=r[4]?r[4]:d,this._FBLeftBottom=r[6]?r[6]:d,this._FBRightTop=r[5]?r[5]:d,this._FBRightBottom=r[7]?r[7]:d;var p={value:0};this._HAxisLeft=c[0]?c[0]:p,this._VAxisLeft=c[1]?c[1]:p,this._HAxisRight=c[2]?c[2]:p,this._VAxisRight=c[3]?c[3]:p,this.leftStick=new u,this.rightStick=new u,this._created=performance.now()},getAxisTotal:function getAxisTotal(){return this.axes.length},getAxisValue:function getAxisValue(t){return this.axes[t].getValue()},setAxisThreshold:function setAxisThreshold(t){for(var i=0;i<this.axes.length;i++)this.axes[i].threshold=t},getButtonTotal:function getButtonTotal(){return this.buttons.length},getButtonValue:function getButtonValue(t){return this.buttons[t].value},isButtonDown:function isButtonDown(t){return this.buttons[t].pressed},update:function update(t){if(!(t.timestamp<this._created)){var i,r=this.buttons,o=t.buttons,a=r.length;for(i=0;i<a;i++)r[i].update(o[i].value);var h=this.axes,l=t.axes;for(a=h.length,i=0;i<a;i++)h[i].update(l[i]);a>=2&&(this.leftStick.set(h[0].getValue(),h[1].getValue()),a>=4&&this.rightStick.set(h[2].getValue(),h[3].getValue()))}},destroy:function destroy(){var t;for(this.removeAllListeners(),this.manager=null,this.pad=null,t=0;t<this.buttons.length;t++)this.buttons[t].destroy();for(t=0;t<this.axes.length;t++)this.axes[t].destroy();this.buttons=[],this.axes=[]},connected:{get:function get(){return this.pad.connected}},timestamp:{get:function get(){return this.pad.timestamp}},left:{get:function get(){return this._LCLeft.pressed}},right:{get:function get(){return this._LCRight.pressed}},up:{get:function get(){return this._LCTop.pressed}},down:{get:function get(){return this._LCBottom.pressed}},A:{get:function get(){return this._RCBottom.pressed}},Y:{get:function get(){return this._RCTop.pressed}},X:{get:function get(){return this._RCLeft.pressed}},B:{get:function get(){return this._RCRight.pressed}},L1:{get:function get(){return this._FBLeftTop.value}},L2:{get:function get(){return this._FBLeftBottom.value}},R1:{get:function get(){return this._FBRightTop.value}},R2:{get:function get(){return this._FBRightBottom.value}}});t.exports=c},function(t,i,r){var o=r(0),a=r(9),h=r(154),l=new o({Extends:a,initialize:function Key(t,i){a.call(this),this.plugin=t,this.keyCode=i,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function setEmitOnRepeat(t){return this.emitOnRepeat=t,this},onDown:function onDown(t){this.originalEvent=t,this.enabled&&(this.altKey=t.altKey,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.location=t.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(h.DOWN,this,t):(this.isDown=!0,this.isUp=!1,this.timeDown=t.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(h.DOWN,this,t)))},onUp:function onUp(t){this.originalEvent=t,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=t.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(h.UP,this,t))},reset:function reset(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function getDuration(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function destroy(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});t.exports=l},function(t,i,r){var o=r(0),a=r(154),h=r(2),l=r(514),u=r(516),c=new o({initialize:function KeyCombo(t,i,r){if(void 0===r&&(r={}),i.length<2)return!1;this.manager=t,this.enabled=!0,this.keyCodes=[];for(var o=0;o<i.length;o++){var c=i[o];"string"==typeof c?this.keyCodes.push(c.toUpperCase().charCodeAt(0)):"number"==typeof c?this.keyCodes.push(c):c.hasOwnProperty("keyCode")&&this.keyCodes.push(c.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=h(r,"resetOnWrongKey",!0),this.maxKeyDelay=h(r,"maxKeyDelay",0),this.resetOnMatch=h(r,"resetOnMatch",!1),this.deleteOnMatch=h(r,"deleteOnMatch",!1);var d=this;this.onKeyDown=function onKeyDownHandler(t){!d.matched&&d.enabled&&l(t,d)&&(d.manager.emit(a.COMBO_MATCH,d,t),d.resetOnMatch?u(d):d.deleteOnMatch&&d.destroy())},this.manager.on(a.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function get(){return this.index/this.size}},destroy:function destroy(){this.enabled=!1,this.keyCodes=[],this.manager.off(a.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});t.exports=c},function(t,i,r){var o=r(515);t.exports=function ProcessKeyCombo(t,i){if(i.matched)return!0;var r=!1,a=!1;if(t.keyCode===i.current)if(i.index>0&&i.maxKeyDelay>0){var h=i.timeLastMatched+i.maxKeyDelay;t.timeStamp<=h&&(a=!0,r=o(t,i))}else a=!0,r=o(t,i);return!a&&i.resetOnWrongKey&&(i.index=0,i.current=i.keyCodes[0]),r&&(i.timeLastMatched=t.timeStamp,i.matched=!0,i.timeMatched=t.timeStamp),r}},function(t,i){t.exports=function AdvanceKeyCombo(t,i){return i.timeLastMatched=t.timeStamp,i.index++,i.index===i.size||(i.current=i.keyCodes[i.index],!1)}},function(t,i){t.exports=function ResetKeyCombo(t){return t.current=t.keyCodes[0],t.index=0,t.timeLastMatched=0,t.matched=!1,t.timeMatched=0,t}},function(t,i,r){var o=r(240);t.exports=function XHRLoader(t,i){var r=o(i,t.xhrSettings),a=new XMLHttpRequest;if(a.open("GET",t.src,r.async,r.user,r.password),a.responseType=t.xhrSettings.responseType,a.timeout=r.timeout,r.headers)for(var h in r.headers)a.setRequestHeader(h,r.headers[h]);return r.header&&r.headerValue&&a.setRequestHeader(r.header,r.headerValue),r.requestedWith&&a.setRequestHeader("X-Requested-With",r.requestedWith),r.overrideMimeType&&a.overrideMimeType(r.overrideMimeType),r.withCredentials&&(a.withCredentials=!0),a.onload=t.onLoad.bind(t,a),a.onerror=t.onError.bind(t,a),a.onprogress=t.onProgress.bind(t),a.send(),a}},function(t,i,r){var o=r(0),a=r(21),h=r(23),l=r(8),u=r(2),c=r(519),d=r(7),p=new o({Extends:h,initialize:function AudioFile(t,i,r,o,a){if(d(i)){var l=i;i=u(l,"key"),o=u(l,"xhrSettings"),a=u(l,"context",a)}var c={type:"audio",cache:t.cacheManager.audio,extension:r.type,responseType:"arraybuffer",key:i,url:r.url,xhrSettings:o,config:{context:a}};h.call(this,t,c)},onProcess:function onProcess(){this.state=a.FILE_PROCESSING;var t=this;this.config.context.decodeAudioData(this.xhrLoader.response,(function(i){t.data=i,t.onProcessComplete()}),(function(i){console.error("Error decoding audio: "+t.key+" - ",i?i.message:null),t.onProcessError()})),this.config.context=null}});p.create=function(t,i,r,o,a){var h=t.systems.game,l=h.config.audio,g=h.device.audio;d(i)&&(r=u(i,"url",[]),o=u(i,"config",{}));var v=p.getAudioURL(h,r);return v?g.webAudio&&!l.disableWebAudio?new p(t,i,v,a,h.sound.context):new c(t,i,v,o):null},p.getAudioURL=function(t,i){Array.isArray(i)||(i=[i]);for(var r=0;r<i.length;r++){var o=u(i[r],"url",i[r]);if(0===o.indexOf("blob:")||0===o.indexOf("data:"))return{url:o,type:""};var a=o.match(/\.([a-zA-Z0-9]+)($|\?)/);if(a=u(i[r],"type",a?a[1]:"").toLowerCase(),t.device.audio[a])return{url:o,type:a}}return null},l.register("audio",(function(t,i,r,o){var a,h=this.systems.game,l=h.config.audio,u=h.device.audio;if(l.noAudio||!u.webAudio&&!u.audioData)return this;if(Array.isArray(t))for(var c=0;c<t.length;c++)(a=p.create(this,t[c]))&&this.addFile(a);else(a=p.create(this,t,i,r,o))&&this.addFile(a);return this})),t.exports=p},function(t,i,r){var o=r(0),a=r(95),h=r(23),l=r(2),u=r(155),c=r(7),d=new o({Extends:h,initialize:function HTML5AudioFile(t,i,r,o){if(c(i)){var a=i;i=l(a,"key"),o=l(a,"config",o)}var u={type:"audio",cache:t.cacheManager.audio,extension:r.type,key:i,url:r.url,config:o};h.call(this,t,u),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function onLoad(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function onError(){for(var t=0;t<this.data.length;t++){var i=this.data[t];i.oncanplaythrough=null,i.onerror=null}this.loader.nextFile(this,!1)},onProgress:function onProgress(t){var i=t.target;i.oncanplaythrough=null,i.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(a.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function load(){this.data=[];var t=this.config&&this.config.instances||1;this.filesTotal=t,this.filesLoaded=0,this.percentComplete=0;for(var i=0;i<t;i++){var r=new Audio;r.dataset||(r.dataset={}),r.dataset.name=this.key+("0"+i).slice(-2),r.dataset.used="false",this.locked?r.dataset.locked="true":(r.dataset.locked="false",r.preload="auto",r.oncanplaythrough=this.onProgress.bind(this),r.onerror=this.onError.bind(this)),this.data.push(r)}for(i=0;i<this.data.length;i++)(r=this.data[i]).src=u(this,this.loader.baseURL),this.locked||r.load();this.locked&&setTimeout(this.onLoad.bind(this))}});t.exports=d},function(t,i,r){var o=r(0),a=r(21),h=r(23),l=r(8),u=r(2),c=r(7),d=new o({Extends:h,initialize:function ScriptFile(t,i,r,o){var a="js";if(c(i)){var l=i;i=u(l,"key"),r=u(l,"url"),o=u(l,"xhrSettings"),a=u(l,"extension",a)}var d={type:"script",cache:!1,extension:a,responseType:"text",key:i,url:r,xhrSettings:o};h.call(this,t,d)},onProcess:function onProcess(){this.state=a.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});l.register("script",(function(t,i,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new d(this,t[o]));else this.addFile(new d(this,t,i,r));return this})),t.exports=d},function(t,i,r){var o=r(522),a=r(157),h=r(0),l=r(62),u=r(524),c=r(525),d=new h({initialize:function Factory(t){this.world=t,this.scene=t.scene,this.sys=t.scene.sys},collider:function collider(t,i,r,o,a){return this.world.addCollider(t,i,r,o,a)},overlap:function overlap(t,i,r,o,a){return this.world.addOverlap(t,i,r,o,a)},existing:function existing(t,i){var r=i?l.STATIC_BODY:l.DYNAMIC_BODY;return this.world.enableBody(t,r),t},staticImage:function staticImage(t,i,r,a){var h=new o(this.scene,t,i,r,a);return this.sys.displayList.add(h),this.world.enableBody(h,l.STATIC_BODY),h},image:function image(t,i,r,a){var image=new o(this.scene,t,i,r,a);return this.sys.displayList.add(image),this.world.enableBody(image,l.DYNAMIC_BODY),image},staticSprite:function staticSprite(t,i,r,o){var h=new a(this.scene,t,i,r,o);return this.sys.displayList.add(h),this.sys.updateList.add(h),this.world.enableBody(h,l.STATIC_BODY),h},sprite:function sprite(t,i,r,o){var sprite=new a(this.scene,t,i,r,o);return this.sys.displayList.add(sprite),this.sys.updateList.add(sprite),this.world.enableBody(sprite,l.DYNAMIC_BODY),sprite},staticGroup:function staticGroup(t,i){return this.sys.updateList.add(new c(this.world,this.world.scene,t,i))},group:function group(t,i){return this.sys.updateList.add(new u(this.world,this.world.scene,t,i))},destroy:function destroy(){this.world=null,this.scene=null,this.sys=null}});t.exports=d},function(t,i,r){var o=r(0),a=r(243),h=r(125),l=new o({Extends:h,Mixins:[a.Acceleration,a.Angular,a.Bounce,a.Debug,a.Drag,a.Enable,a.Friction,a.Gravity,a.Immovable,a.Mass,a.Pushable,a.Size,a.Velocity],initialize:function ArcadeImage(t,i,r,o,a){h.call(this,t,i,r,o,a),this.body=null}});t.exports=l},function(t,i,r){var o=r(244),a=r(65),h=r(231),l=r(151);t.exports=function OverlapCirc(t,i,r,u,c,d){var p=o(t,i-u,r-u,2*u,2*u,c,d);if(0===p.length)return p;for(var g=new a(i,r,u),v=new a,m=[],y=0;y<p.length;y++){var T=p[y];T.isCircle?(v.setTo(T.center.x,T.center.y,T.halfWidth),h(g,v)&&m.push(T)):l(g,T)&&m.push(T)}return m}},function(t,i,r){var o=r(157),a=r(0),h=r(62),l=r(2),u=r(113),c=r(7),d=new a({Extends:u,initialize:function PhysicsGroup(t,i,r,a){if(r||a)if(c(r))a=r,r=null,a.internalCreateCallback=this.createCallbackHandler,a.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(r)&&c(r[0])){a=r[0];var d=this;r.forEach((function(t){t.internalCreateCallback=d.createCallbackHandler,t.internalRemoveCallback=d.removeCallbackHandler})),r=null}else a={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else a={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=t,a.classType=l(a,"classType",o),this.physicsType=h.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:l(a,"collideWorldBounds",!1),setBoundsRectangle:l(a,"customBoundsRectangle",null),setAccelerationX:l(a,"accelerationX",0),setAccelerationY:l(a,"accelerationY",0),setAllowDrag:l(a,"allowDrag",!0),setAllowGravity:l(a,"allowGravity",!0),setAllowRotation:l(a,"allowRotation",!0),setBounceX:l(a,"bounceX",0),setBounceY:l(a,"bounceY",0),setDragX:l(a,"dragX",0),setDragY:l(a,"dragY",0),setEnable:l(a,"enable",!0),setGravityX:l(a,"gravityX",0),setGravityY:l(a,"gravityY",0),setFrictionX:l(a,"frictionX",0),setFrictionY:l(a,"frictionY",0),setMaxVelocityX:l(a,"maxVelocityX",1e4),setMaxVelocityY:l(a,"maxVelocityY",1e4),setVelocityX:l(a,"velocityX",0),setVelocityY:l(a,"velocityY",0),setAngularVelocity:l(a,"angularVelocity",0),setAngularAcceleration:l(a,"angularAcceleration",0),setAngularDrag:l(a,"angularDrag",0),setMass:l(a,"mass",1),setImmovable:l(a,"immovable",!1)},u.call(this,i,r,a),this.type="PhysicsGroup"},createCallbackHandler:function createCallbackHandler(t){t.body||this.world.enableBody(t,h.DYNAMIC_BODY);var i=t.body;for(var r in this.defaults)i[r](this.defaults[r])},removeCallbackHandler:function removeCallbackHandler(t){t.body&&this.world.disableBody(t)},setVelocity:function setVelocity(t,i,r){void 0===r&&(r=0);for(var o=this.getChildren(),a=0;a<o.length;a++)o[a].body.velocity.set(t+a*r,i+a*r);return this},setVelocityX:function setVelocityX(t,i){void 0===i&&(i=0);for(var r=this.getChildren(),o=0;o<r.length;o++)r[o].body.velocity.x=t+o*i;return this},setVelocityY:function setVelocityY(t,i){void 0===i&&(i=0);for(var r=this.getChildren(),o=0;o<r.length;o++)r[o].body.velocity.y=t+o*i;return this}});t.exports=d},function(t,i,r){var o=r(157),a=r(0),h=r(62),l=r(2),u=r(113),c=r(7),d=new a({Extends:u,initialize:function StaticPhysicsGroup(t,i,r,a){r||a?c(r)?(a=r,r=null,a.internalCreateCallback=this.createCallbackHandler,a.internalRemoveCallback=this.removeCallbackHandler,a.createMultipleCallback=this.createMultipleCallbackHandler,a.classType=l(a,"classType",o)):Array.isArray(r)&&c(r[0])?(a=r,r=null,a.forEach((function(t){t.internalCreateCallback=this.createCallbackHandler,t.internalRemoveCallback=this.removeCallbackHandler,t.createMultipleCallback=this.createMultipleCallbackHandler,t.classType=l(t,"classType",o)}))):a={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler}:a={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:o},this.world=t,this.physicsType=h.STATIC_BODY,u.call(this,i,r,a),this.type="StaticPhysicsGroup"},createCallbackHandler:function createCallbackHandler(t){t.body||this.world.enableBody(t,h.STATIC_BODY)},removeCallbackHandler:function removeCallbackHandler(t){t.body&&this.world.disableBody(t)},createMultipleCallbackHandler:function createMultipleCallbackHandler(){this.refresh()},refresh:function refresh(){for(var t=this.children.entries,i=0;i<t.length;i++)t[i].body.reset();return this}});t.exports=d},function(t,i,r){var o=r(350),a=r(527),h=r(18),l=r(0),u=r(528),c=r(62),d=r(50),p=r(9),g=r(245),v=r(124),m=r(354),y=r(355),T=r(246),S=r(247),w=r(529),b=r(6),C=r(14),A=r(211),E=r(530),M=r(10),_=r(531),R=r(532),P=r(537),k=r(538),O=r(149),L=r(539),D=r(248),I=r(25),B=r(3),N=r(68),G=new l({Extends:p,initialize:function World(t,i){p.call(this),this.scene=t,this.bodies=new O,this.staticBodies=new O,this.pendingDestroy=new O,this.colliders=new A,this.gravity=new B(b(i,"gravity.x",0),b(i,"gravity.y",0)),this.bounds=new M(b(i,"x",0),b(i,"y",0),b(i,"width",t.sys.scale.width),b(i,"height",t.sys.scale.height)),this.checkCollision={up:b(i,"checkCollision.up",!0),down:b(i,"checkCollision.down",!0),left:b(i,"checkCollision.left",!0),right:b(i,"checkCollision.right",!0)},this.fps=b(i,"fps",60),this.fixedStep=b(i,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=b(i,"timeScale",1),this.OVERLAP_BIAS=b(i,"overlapBias",4),this.TILE_BIAS=b(i,"tileBias",16),this.forceX=b(i,"forceX",!1),this.isPaused=b(i,"isPaused",!1),this._total=0,this.drawDebug=b(i,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:b(i,"debugShowBody",!0),debugShowStaticBody:b(i,"debugShowStaticBody",!0),debugShowVelocity:b(i,"debugShowVelocity",!0),bodyDebugColor:b(i,"debugBodyColor",16711935),staticBodyDebugColor:b(i,"debugStaticBodyColor",255),velocityDebugColor:b(i,"debugVelocityColor",65280)},this.maxEntries=b(i,"maxEntries",16),this.useTree=b(i,"useTree",!0),this.tree=new _(this.maxEntries),this.staticTree=new _(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new I,this._tempMatrix2=new I,this.drawDebug&&this.createDebugGraphic()},enable:function enable(t,i){void 0===i&&(i=c.DYNAMIC_BODY),Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var o=t[r];if(o.isParent)for(var a=o.getChildren(),h=0;h<a.length;h++){var l=a[h];l.isParent?this.enable(l,i):this.enableBody(l,i)}else this.enableBody(o,i)}},enableBody:function enableBody(t,i){return void 0===i&&(i=c.DYNAMIC_BODY),t.body||(i===c.DYNAMIC_BODY?t.body=new a(this,t):i===c.STATIC_BODY&&(t.body=new L(this,t))),this.add(t.body),t},add:function add(t){return t.physicsType===c.DYNAMIC_BODY?this.bodies.set(t):t.physicsType===c.STATIC_BODY&&(this.staticBodies.set(t),this.staticTree.insert(t)),t.enable=!0,t},disable:function disable(t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var r=t[i];if(r.isParent)for(var o=r.getChildren(),a=0;a<o.length;a++){var h=o[a];h.isParent?this.disable(h):this.disableBody(h.body)}else this.disableBody(r.body)}},disableBody:function disableBody(t){this.remove(t),t.enable=!1},remove:function remove(t){t.physicsType===c.DYNAMIC_BODY?(this.tree.remove(t),this.bodies.delete(t)):t.physicsType===c.STATIC_BODY&&(this.staticBodies.delete(t),this.staticTree.remove(t))},createDebugGraphic:function createDebugGraphic(){var t=this.scene.sys.add.graphics({x:0,y:0});return t.setDepth(Number.MAX_VALUE),this.debugGraphic=t,this.drawDebug=!0,t},setBounds:function setBounds(t,i,r,o,a,h,l,u){return this.bounds.setTo(t,i,r,o),void 0!==a&&this.setBoundsCollision(a,h,l,u),this},setBoundsCollision:function setBoundsCollision(t,i,r,o){return void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===r&&(r=!0),void 0===o&&(o=!0),this.checkCollision.left=t,this.checkCollision.right=i,this.checkCollision.up=r,this.checkCollision.down=o,this},pause:function pause(){return this.isPaused=!0,this.emit(g.PAUSE),this},resume:function resume(){return this.isPaused=!1,this.emit(g.RESUME),this},addCollider:function addCollider(t,i,r,o,a){void 0===r&&(r=null),void 0===o&&(o=null),void 0===a&&(a=r);var h=new u(this,!1,t,i,r,o,a);return this.colliders.add(h),h},addOverlap:function addOverlap(t,i,r,o,a){void 0===r&&(r=null),void 0===o&&(o=null),void 0===a&&(a=r);var h=new u(this,!0,t,i,r,o,a);return this.colliders.add(h),h},removeCollider:function removeCollider(t){return this.colliders.remove(t),this},setFPS:function setFPS(t){return this.fps=t,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function update(t,i){if(!this.isPaused&&0!==this.bodies.size){var r,o,a=this._frameTime,h=this._frameTimeMS*this.timeScale;this._elapsed+=i;var l=this.bodies.entries,u=this._elapsed>=h;for(this.fixedStep||(a=.001*i,u=!0,this._elapsed=0),r=0;r<l.length;r++)(o=l[r]).enable&&o.preUpdate(u,a);if(u){this._elapsed-=h,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(l));var c=this.colliders.update();for(r=0;r<c.length;r++){var d=c[r];d.active&&d.update()}this.emit(g.WORLD_STEP,a)}for(;this._elapsed>=h;)this._elapsed-=h,this.step(a)}},step:function step(t){var i,r,o=this.bodies.entries,a=o.length;for(i=0;i<a;i++)(r=o[i]).enable&&r.update(t);this.useTree&&(this.tree.clear(),this.tree.load(o));var h=this.colliders.update();for(i=0;i<h.length;i++){var l=h[i];l.active&&l.update()}this.emit(g.WORLD_STEP,t),this.stepsLastFrame++},postUpdate:function postUpdate(){var t,i,r=this.bodies.entries,o=r.length,a=this.bodies,h=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,t=0;t<o;t++)(i=r[t]).enable&&i.postUpdate();if(this.drawDebug){var l=this.debugGraphic;for(l.clear(),t=0;t<o;t++)(i=r[t]).willDrawDebug()&&i.drawDebug(l);for(o=(r=h.entries).length,t=0;t<o;t++)(i=r[t]).willDrawDebug()&&i.drawDebug(l)}var u=this.pendingDestroy;if(u.size>0){var d=this.tree,p=this.staticTree;for(o=(r=u.entries).length,t=0;t<o;t++)(i=r[t]).physicsType===c.DYNAMIC_BODY?(d.remove(i),a.delete(i)):i.physicsType===c.STATIC_BODY&&(p.remove(i),h.delete(i)),i.world=void 0,i.gameObject=void 0;u.clear()}},updateMotion:function updateMotion(t,i){t.allowRotation&&this.computeAngularVelocity(t,i),this.computeVelocity(t,i)},computeAngularVelocity:function computeAngularVelocity(t,i){var r=t.angularVelocity,o=t.angularAcceleration,a=t.angularDrag,l=t.maxAngular;o?r+=o*i:t.allowDrag&&a&&(m(r-(a*=i),0,.1)?r-=a:y(r+a,0,.1)?r+=a:r=0);var u=(r=h(r,-l,l))-t.angularVelocity;t.angularVelocity+=u,t.rotation+=t.angularVelocity*i},computeVelocity:function computeVelocity(t,i){var r=t.velocity.x,o=t.acceleration.x,a=t.drag.x,l=t.maxVelocity.x,u=t.velocity.y,c=t.acceleration.y,d=t.drag.y,p=t.maxVelocity.y,g=t.speed,T=t.maxSpeed,S=t.allowDrag,w=t.useDamping;t.allowGravity&&(r+=(this.gravity.x+t.gravity.x)*i,u+=(this.gravity.y+t.gravity.y)*i),o?r+=o*i:S&&a&&(w?(r*=a=Math.pow(a,i),g=Math.sqrt(r*r+u*u),v(g,0,.001)&&(r=0)):m(r-(a*=i),0,.01)?r-=a:y(r+a,0,.01)?r+=a:r=0),c?u+=c*i:S&&d&&(w?(u*=d=Math.pow(d,i),g=Math.sqrt(r*r+u*u),v(g,0,.001)&&(u=0)):m(u-(d*=i),0,.01)?u-=d:y(u+d,0,.01)?u+=d:u=0),r=h(r,-l,l),u=h(u,-p,p),t.velocity.set(r,u),T>-1&&g>T&&(t.velocity.normalize().scale(T),g=T),t.speed=g},separate:function separate(t,i,r,o,a,h){if(!h&&!t.enable||!i.enable||t.checkCollision.none||i.checkCollision.none||!this.intersects(t,i))return!1;if(r&&!1===r.call(o,t.gameObject,i.gameObject))return!1;if(t.isCircle&&i.isCircle)return this.separateCircle(t,i,a);if(t.isCircle!==i.isCircle){var l=t.isCircle?i:t,u=t.isCircle?t:i,c={x:l.x,y:l.y,right:l.right,bottom:l.bottom},d=u.center;if((d.y<c.y||d.y>c.bottom)&&(d.x<c.x||d.x>c.right))return this.separateCircle(t,i,a)}var p=!1,v=!1;a?(p=P(t,i,a,this.OVERLAP_BIAS),v=k(t,i,a,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+t.gravity.y)<Math.abs(this.gravity.x+t.gravity.x)?(p=P(t,i,a,this.OVERLAP_BIAS),this.intersects(t,i)&&(v=k(t,i,a,this.OVERLAP_BIAS))):(v=k(t,i,a,this.OVERLAP_BIAS),this.intersects(t,i)&&(p=P(t,i,a,this.OVERLAP_BIAS)));var m=p||v;return m&&(a?(t.onOverlap||i.onOverlap)&&this.emit(g.OVERLAP,t.gameObject,i.gameObject,t,i):(t.onCollide||i.onCollide)&&this.emit(g.COLLIDE,t.gameObject,i.gameObject,t,i)),m},separateCircle:function separateCircle(t,i,r,a){T(t,i,!1,a),S(t,i,!1,a);var h=0;if(t.isCircle!==i.isCircle){var l={x:i.isCircle?t.position.x:i.position.x,y:i.isCircle?t.position.y:i.position.y,right:i.isCircle?t.right:i.right,bottom:i.isCircle?t.bottom:i.bottom},u={x:t.isCircle?t.center.x:i.center.x,y:t.isCircle?t.center.y:i.center.y,radius:t.isCircle?t.halfWidth:i.halfWidth};u.y<l.y?u.x<l.x?h=d(u.x,u.y,l.x,l.y)-u.radius:u.x>l.right&&(h=d(u.x,u.y,l.right,l.y)-u.radius):u.y>l.bottom&&(u.x<l.x?h=d(u.x,u.y,l.x,l.bottom)-u.radius:u.x>l.right&&(h=d(u.x,u.y,l.right,l.bottom)-u.radius)),h*=-1}else h=t.halfWidth+i.halfWidth-d(t.center.x,t.center.y,i.center.x,i.center.y);if(t.overlapR=h,i.overlapR=h,r||0===h||t.immovable&&i.immovable||t.customSeparateX||i.customSeparateX)return 0!==h&&(t.onOverlap||i.onOverlap)&&this.emit(g.OVERLAP,t.gameObject,i.gameObject,t,i),0!==h;var c=t.center.x-i.center.x,p=t.center.y-i.center.y,v=Math.sqrt(Math.pow(c,2)+Math.pow(p,2)),m=(i.center.x-t.center.x)/v||0,y=(i.center.y-t.center.y)/v||0,w=2*(t.velocity.x*m+t.velocity.y*y-i.velocity.x*m-i.velocity.y*y)/(t.mass+i.mass);(t.immovable||i.immovable)&&(w*=2),t.immovable||(t.velocity.x=t.velocity.x-w/t.mass*m,t.velocity.y=t.velocity.y-w/t.mass*y),i.immovable||(i.velocity.x=i.velocity.x+w/i.mass*m,i.velocity.y=i.velocity.y+w/i.mass*y),t.immovable||i.immovable||(h/=2);var b=o(t.center,i.center),A=(h+C.EPSILON)*Math.cos(b),E=(h+C.EPSILON)*Math.sin(b);return t.immovable||(t.x-=A,t.y-=E,t.updateCenter()),i.immovable||(i.x+=A,i.y+=E,i.updateCenter()),t.velocity.x*=t.bounce.x,t.velocity.y*=t.bounce.y,i.velocity.x*=i.bounce.x,i.velocity.y*=i.bounce.y,(t.onCollide||i.onCollide)&&this.emit(g.COLLIDE,t.gameObject,i.gameObject,t,i),!0},intersects:function intersects(t,i){return t!==i&&(t.isCircle||i.isCircle?t.isCircle?i.isCircle?d(t.center.x,t.center.y,i.center.x,i.center.y)<=t.halfWidth+i.halfWidth:this.circleBodyIntersects(t,i):this.circleBodyIntersects(i,t):!(t.right<=i.position.x||t.bottom<=i.position.y||t.position.x>=i.right||t.position.y>=i.bottom))},circleBodyIntersects:function circleBodyIntersects(t,i){var r=h(t.center.x,i.left,i.right),o=h(t.center.y,i.top,i.bottom);return(t.center.x-r)*(t.center.x-r)+(t.center.y-o)*(t.center.y-o)<=t.halfWidth*t.halfWidth},overlap:function overlap(t,i,r,o,a){return void 0===r&&(r=null),void 0===o&&(o=null),void 0===a&&(a=r),this.collideObjects(t,i,r,o,a,!0)},collide:function collide(t,i,r,o,a){return void 0===r&&(r=null),void 0===o&&(o=null),void 0===a&&(a=r),this.collideObjects(t,i,r,o,a,!1)},collideObjects:function collideObjects(t,i,r,o,a,h){var l,u;t.isParent&&void 0===t.physicsType&&(t=t.children.entries),i&&i.isParent&&void 0===i.physicsType&&(i=i.children.entries);var c=Array.isArray(t),d=Array.isArray(i);if(this._total=0,c||d)if(!c&&d)for(l=0;l<i.length;l++)this.collideHandler(t,i[l],r,o,a,h);else if(c&&!d)if(i)for(l=0;l<t.length;l++)this.collideHandler(t[l],i,r,o,a,h);else for(l=0;l<t.length;l++){var p=t[l];for(u=l+1;u<t.length;u++)l!==u&&this.collideHandler(p,t[u],r,o,a,h)}else for(l=0;l<t.length;l++)for(u=0;u<i.length;u++)this.collideHandler(t[l],i[u],r,o,a,h);else this.collideHandler(t,i,r,o,a,h);return this._total>0},collideHandler:function collideHandler(t,i,r,o,a,h){if(void 0===i&&t.isParent)return this.collideGroupVsGroup(t,t,r,o,a,h);if(!t||!i)return!1;if(t.body){if(i.body)return this.collideSpriteVsSprite(t,i,r,o,a,h);if(i.isParent)return this.collideSpriteVsGroup(t,i,r,o,a,h);if(i.isTilemap)return this.collideSpriteVsTilemapLayer(t,i,r,o,a,h)}else if(t.isParent){if(i.body)return this.collideSpriteVsGroup(i,t,r,o,a,h);if(i.isParent)return this.collideGroupVsGroup(t,i,r,o,a,h);if(i.isTilemap)return this.collideGroupVsTilemapLayer(t,i,r,o,a,h)}else if(t.isTilemap){if(i.body)return this.collideSpriteVsTilemapLayer(i,t,r,o,a,h);if(i.isParent)return this.collideGroupVsTilemapLayer(i,t,r,o,a,h)}},collideSpriteVsSprite:function collideSpriteVsSprite(t,i,r,o,a,h){return!(!t.body||!i.body||(this.separate(t.body,i.body,o,a,h)&&(r&&r.call(a,t,i),this._total++),0))},collideSpriteVsGroup:function collideSpriteVsGroup(t,i,r,o,a,h){var l,u,d,p=t.body;if(0!==i.length&&p&&p.enable&&!p.checkCollision.none)if(this.useTree||i.physicsType===c.STATIC_BODY){var g=this.treeMinMax;g.minX=p.left,g.minY=p.top,g.maxX=p.right,g.maxY=p.bottom;var v=i.physicsType===c.DYNAMIC_BODY?this.tree.search(g):this.staticTree.search(g);for(u=v.length,l=0;l<u;l++)p!==(d=v[l])&&d.enable&&!d.checkCollision.none&&i.contains(d.gameObject)&&this.separate(p,d,o,a,h,!0)&&(r&&r.call(a,p.gameObject,d.gameObject),this._total++)}else{var m=i.getChildren(),y=i.children.entries.indexOf(t);for(u=m.length,l=0;l<u;l++)(d=m[l].body)&&l!==y&&d.enable&&this.separate(p,d,o,a,h)&&(r&&r.call(a,p.gameObject,d.gameObject),this._total++)}},collideGroupVsTilemapLayer:function collideGroupVsTilemapLayer(t,i,r,o,a,h){var l=t.getChildren();if(0===l.length)return!1;for(var u=!1,c=0;c<l.length;c++)l[c].body&&this.collideSpriteVsTilemapLayer(l[c],i,r,o,a,h)&&(u=!0);return u},collideTiles:function collideTiles(t,i,r,o,a){return!(!t.body.enable||0===i.length)&&this.collideSpriteVsTilesHandler(t,i,r,o,a,!1,!1)},overlapTiles:function overlapTiles(t,i,r,o,a){return!(!t.body.enable||0===i.length)&&this.collideSpriteVsTilesHandler(t,i,r,o,a,!0,!1)},collideSpriteVsTilemapLayer:function collideSpriteVsTilemapLayer(t,i,r,o,a,h){var l=t.body;if(!l.enable||l.checkCollision.none)return!1;var u=l.position.x,c=l.position.y,d=l.width,p=l.height,g=i.layer;if(g.tileWidth>g.baseTileWidth){var v=(g.tileWidth-g.baseTileWidth)*i.scaleX;u-=v,d+=v}g.tileHeight>g.baseTileHeight&&(p+=(g.tileHeight-g.baseTileHeight)*i.scaleY);var m=w(u,c,d,p,null,i.scene.cameras.main,i.layer);return 0!==m.length&&this.collideSpriteVsTilesHandler(t,m,r,o,a,h,!0)},collideSpriteVsTilesHandler:function collideSpriteVsTilesHandler(t,i,r,o,a,h,l){for(var u,c,d=t.body,p={left:0,right:0,top:0,bottom:0},v=!1,m=0;m<i.length;m++){var y=(c=(u=i[m]).tilemapLayer).tileToWorldXY(u.x,u.y);p.left=y.x,p.top=y.y,u.baseHeight!==u.height&&(p.top-=(u.height-u.baseHeight)*c.scaleY),p.right=p.left+u.width*c.scaleX,p.bottom=p.top+u.height*c.scaleY,D(p,d)&&(!o||o.call(a,t,u))&&E(u,t)&&(h||R(m,d,u,p,c,this.TILE_BIAS,l))&&(this._total++,v=!0,r&&r.call(a,t,u),h&&d.onOverlap?this.emit(g.TILE_OVERLAP,t,u,d):d.onCollide&&this.emit(g.TILE_COLLIDE,t,u,d))}return v},collideGroupVsGroup:function collideGroupVsGroup(t,i,r,o,a,h){if(0!==t.length&&0!==i.length)for(var l=t.getChildren(),u=0;u<l.length;u++)this.collideSpriteVsGroup(l[u],i,r,o,a,h)},wrap:function wrap(t,i){t.body?this.wrapObject(t,i):t.getChildren?this.wrapArray(t.getChildren(),i):Array.isArray(t)?this.wrapArray(t,i):this.wrapObject(t,i)},wrapArray:function wrapArray(t,i){for(var r=0;r<t.length;r++)this.wrapObject(t[r],i)},wrapObject:function wrapObject(t,i){void 0===i&&(i=0),t.x=N(t.x,this.bounds.left-i,this.bounds.right+i),t.y=N(t.y,this.bounds.top-i,this.bounds.bottom+i)},shutdown:function shutdown(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function destroy(){this.shutdown(),this.scene=null}});t.exports=G},function(t,i,r){var o=r(0),a=r(62),h=r(245),l=r(196),u=r(10),c=r(57),d=r(3),p=new o({initialize:function Body(t,i){var r=i.displayWidth?i.displayWidth:64,o=i.displayHeight?i.displayHeight:64;this.world=t,this.gameObject=i,this.transform={x:i.x,y:i.y,rotation:i.angle,scaleX:i.scaleX,scaleY:i.scaleY,displayOriginX:i.displayOriginX,displayOriginY:i.displayOriginY},this.debugShowBody=t.defaults.debugShowBody,this.debugShowVelocity=t.defaults.debugShowVelocity,this.debugBodyColor=t.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new d,this.position=new d(i.x-i.scaleX*i.displayOriginX,i.y-i.scaleY*i.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=i.angle,this.preRotation=i.angle,this.width=r,this.height=o,this.sourceWidth=r,this.sourceHeight=o,i.frame&&(this.sourceWidth=i.frame.realWidth,this.sourceHeight=i.frame.realHeight),this.halfWidth=Math.abs(r/2),this.halfHeight=Math.abs(o/2),this.center=new d(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new d,this.newVelocity=new d,this.deltaMax=new d,this.acceleration=new d,this.allowDrag=!0,this.drag=new d,this.allowGravity=!0,this.gravity=new d,this.bounce=new d,this.worldBounce=null,this.customBoundsRectangle=t.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new d(1e4,1e4),this.maxSpeed=-1,this.friction=new d(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=a.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=a.DYNAMIC_BODY,this._sx=i.scaleX,this._sy=i.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new u},updateBounds:function updateBounds(){var t=this.gameObject,i=this.transform;if(t.parentContainer){var r=t.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);i.x=r.tx,i.y=r.ty,i.rotation=l(r.rotation),i.scaleX=r.scaleX,i.scaleY=r.scaleY,i.displayOriginX=t.displayOriginX,i.displayOriginY=t.displayOriginY}else i.x=t.x,i.y=t.y,i.rotation=t.angle,i.scaleX=t.scaleX,i.scaleY=t.scaleY,i.displayOriginX=t.displayOriginX,i.displayOriginY=t.displayOriginY;var o=!1;if(this.syncBounds){var a=t.getBounds(this._bounds);this.width=a.width,this.height=a.height,o=!0}else{var h=Math.abs(i.scaleX),u=Math.abs(i.scaleY);this._sx===h&&this._sy===u||(this.width=this.sourceWidth*h,this.height=this.sourceHeight*u,this._sx=h,this._sy=u,o=!0)}o&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function updateCenter(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function updateFromGameObject(){this.updateBounds();var t=this.transform;this.position.x=t.x+t.scaleX*(this.offset.x-t.displayOriginX),this.position.y=t.y+t.scaleY*(this.offset.y-t.displayOriginY),this.updateCenter()},resetFlags:function resetFlags(t){void 0===t&&(t=!1);var i=this.wasTouching,r=this.touching,o=this.blocked;t?(i.none=!0,i.up=!1,i.down=!1,i.left=!1,i.right=!1):(i.none=r.none,i.up=r.up,i.down=r.down,i.left=r.left,i.right=r.right),r.none=!0,r.up=!1,r.down=!1,r.left=!1,r.right=!1,o.none=!0,o.up=!1,o.down=!1,o.left=!1,o.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function preUpdate(t,i){t&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),t&&this.update(i)},update:function update(t){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,t);var i=this.velocity.x,r=this.velocity.y;this.newVelocity.set(i*t,r*t),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(r,i),this.speed=Math.sqrt(i*i+r*r),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(h.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function postUpdate(){var t=this.position.x-this.prevFrame.x,i=this.position.y-this.prevFrame.y;if(this.moves){var r=this.deltaMax.x,o=this.deltaMax.y;0!==r&&0!==t&&(t<0&&t<-r?t=-r:t>0&&t>r&&(t=r)),0!==o&&0!==i&&(i<0&&i<-o?i=-o:i>0&&i>o&&(i=o)),this.gameObject.x+=t,this.gameObject.y+=i}t<0?this.facing=a.FACING_LEFT:t>0&&(this.facing=a.FACING_RIGHT),i<0?this.facing=a.FACING_UP:i>0&&(this.facing=a.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=t,this._ty=i},setBoundsRectangle:function setBoundsRectangle(t){return this.customBoundsRectangle=t||this.world.bounds,this},checkWorldBounds:function checkWorldBounds(){var t=this.position,i=this.customBoundsRectangle,r=this.world.checkCollision,o=this.worldBounce?-this.worldBounce.x:-this.bounce.x,a=this.worldBounce?-this.worldBounce.y:-this.bounce.y,h=!1;return t.x<i.x&&r.left?(t.x=i.x,this.velocity.x*=o,this.blocked.left=!0,h=!0):this.right>i.right&&r.right&&(t.x=i.right-this.width,this.velocity.x*=o,this.blocked.right=!0,h=!0),t.y<i.y&&r.up?(t.y=i.y,this.velocity.y*=a,this.blocked.up=!0,h=!0):this.bottom>i.bottom&&r.down&&(t.y=i.bottom-this.height,this.velocity.y*=a,this.blocked.down=!0,h=!0),h&&(this.blocked.none=!1,this.updateCenter()),h},setOffset:function setOffset(t,i){return void 0===i&&(i=t),this.offset.set(t,i),this},setSize:function setSize(t,i,r){void 0===r&&(r=!0);var o=this.gameObject;if(!t&&o.frame&&(t=o.frame.realWidth),!i&&o.frame&&(i=o.frame.realHeight),this.sourceWidth=t,this.sourceHeight=i,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),r&&o.getCenter){var a=(o.width-t)/2,h=(o.height-i)/2;this.offset.set(a,h)}return this.isCircle=!1,this.radius=0,this},setCircle:function setCircle(t,i,r){return void 0===i&&(i=this.offset.x),void 0===r&&(r=this.offset.y),t>0?(this.isCircle=!0,this.radius=t,this.sourceWidth=2*t,this.sourceHeight=2*t,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(i,r),this.updateCenter()):this.isCircle=!1,this},reset:function reset(t,i){this.stop();var r=this.gameObject;r.setPosition(t,i),r.getTopLeft?r.getTopLeft(this.position):this.position.set(t,i),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=r.angle,this.preRotation=r.angle,this.updateBounds(),this.updateCenter(),this.resetFlags(!0)},stop:function stop(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function getBounds(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function hitTest(t,i){return this.isCircle?this.radius>0&&t>=this.left&&t<=this.right&&i>=this.top&&i<=this.bottom&&(this.center.x-t)*(this.center.x-t)+(this.center.y-i)*(this.center.y-i)<=this.radius*this.radius:c(this,t,i)},onFloor:function onFloor(){return this.blocked.down},onCeiling:function onCeiling(){return this.blocked.up},onWall:function onWall(){return this.blocked.left||this.blocked.right},deltaAbsX:function deltaAbsX(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function deltaAbsY(){return this._dy>0?this._dy:-this._dy},deltaX:function deltaX(){return this._dx},deltaY:function deltaY(){return this._dy},deltaXFinal:function deltaXFinal(){return this._tx},deltaYFinal:function deltaYFinal(){return this._ty},deltaZ:function deltaZ(){return this.rotation-this.preRotation},destroy:function destroy(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function drawDebug(t){var i=this.position,r=i.x+this.halfWidth,o=i.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor),this.isCircle?t.strokeCircle(r,o,this.width/2):(this.checkCollision.up&&t.lineBetween(i.x,i.y,i.x+this.width,i.y),this.checkCollision.right&&t.lineBetween(i.x+this.width,i.y,i.x+this.width,i.y+this.height),this.checkCollision.down&&t.lineBetween(i.x,i.y+this.height,i.x+this.width,i.y+this.height),this.checkCollision.left&&t.lineBetween(i.x,i.y,i.x,i.y+this.height))),this.debugShowVelocity&&(t.lineStyle(t.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),t.lineBetween(r,o,r+this.velocity.x/2,o+this.velocity.y/2))},willDrawDebug:function willDrawDebug(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function setCollideWorldBounds(t,i,r,o){void 0===t&&(t=!0),this.collideWorldBounds=t;var a=void 0!==i,h=void 0!==r;return(a||h)&&(this.worldBounce||(this.worldBounce=new d),a&&(this.worldBounce.x=i),h&&(this.worldBounce.y=r)),void 0!==o&&(this.onWorldBounds=o),this},setVelocity:function setVelocity(t,i){return this.velocity.set(t,i),t=this.velocity.x,i=this.velocity.y,this.speed=Math.sqrt(t*t+i*i),this},setVelocityX:function setVelocityX(t){this.velocity.x=t;var i=t,r=this.velocity.y;return this.speed=Math.sqrt(i*i+r*r),this},setVelocityY:function setVelocityY(t){this.velocity.y=t;var i=this.velocity.x,r=t;return this.speed=Math.sqrt(i*i+r*r),this},setMaxVelocity:function setMaxVelocity(t,i){return this.maxVelocity.set(t,i),this},setMaxVelocityX:function setMaxVelocityX(t){return this.maxVelocity.x=t,this},setMaxVelocityY:function setMaxVelocityY(t){return this.maxVelocity.y=t,this},setMaxSpeed:function setMaxSpeed(t){return this.maxSpeed=t,this},setBounce:function setBounce(t,i){return this.bounce.set(t,i),this},setBounceX:function setBounceX(t){return this.bounce.x=t,this},setBounceY:function setBounceY(t){return this.bounce.y=t,this},setAcceleration:function setAcceleration(t,i){return this.acceleration.set(t,i),this},setAccelerationX:function setAccelerationX(t){return this.acceleration.x=t,this},setAccelerationY:function setAccelerationY(t){return this.acceleration.y=t,this},setAllowDrag:function setAllowDrag(t){return void 0===t&&(t=!0),this.allowDrag=t,this},setAllowGravity:function setAllowGravity(t){return void 0===t&&(t=!0),this.allowGravity=t,this},setAllowRotation:function setAllowRotation(t){return void 0===t&&(t=!0),this.allowRotation=t,this},setDrag:function setDrag(t,i){return this.drag.set(t,i),this},setDamping:function setDamping(t){return this.useDamping=t,this},setDragX:function setDragX(t){return this.drag.x=t,this},setDragY:function setDragY(t){return this.drag.y=t,this},setGravity:function setGravity(t,i){return this.gravity.set(t,i),this},setGravityX:function setGravityX(t){return this.gravity.x=t,this},setGravityY:function setGravityY(t){return this.gravity.y=t,this},setFriction:function setFriction(t,i){return this.friction.set(t,i),this},setFrictionX:function setFrictionX(t){return this.friction.x=t,this},setFrictionY:function setFrictionY(t){return this.friction.y=t,this},setAngularVelocity:function setAngularVelocity(t){return this.angularVelocity=t,this},setAngularAcceleration:function setAngularAcceleration(t){return this.angularAcceleration=t,this},setAngularDrag:function setAngularDrag(t){return this.angularDrag=t,this},setMass:function setMass(t){return this.mass=t,this},setImmovable:function setImmovable(t){return void 0===t&&(t=!0),this.immovable=t,this},setEnable:function setEnable(t){return void 0===t&&(t=!0),this.enable=t,this},processX:function processX(t,i,r,o){this.x+=t,this.updateCenter(),null!==i&&(this.velocity.x=i);var a=this.blocked;r&&(a.left=!0),o&&(a.right=!0)},processY:function processY(t,i,r,o){this.y+=t,this.updateCenter(),null!==i&&(this.velocity.y=i);var a=this.blocked;r&&(a.up=!0),o&&(a.down=!0)},x:{get:function get(){return this.position.x},set:function set(t){this.position.x=t}},y:{get:function get(){return this.position.y},set:function set(t){this.position.y=t}},left:{get:function get(){return this.position.x}},right:{get:function get(){return this.position.x+this.width}},top:{get:function get(){return this.position.y}},bottom:{get:function get(){return this.position.y+this.height}}});t.exports=p},function(t,i,r){var o=new(r(0))({initialize:function Collider(t,i,r,o,a,h,l){this.world=t,this.name="",this.active=!0,this.overlapOnly=i,this.object1=r,this.object2=o,this.collideCallback=a,this.processCallback=h,this.callbackContext=l},setName:function setName(t){return this.name=t,this},update:function update(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function destroy(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});t.exports=o},function(t,i,r){var o=r(26),a=r(3),h=new a,l=new a;t.exports=function GetTilesWithinWorldXY(t,i,r,a,u,c,d){var p=d.tilemapLayer.tilemap._convert.WorldToTileXY;p(t,i,!0,h,c,d);var g=h.x,v=h.y;p(t+r,i+a,!1,l,c,d);var m=Math.ceil(l.x),y=Math.ceil(l.y);return o(g,v,m-g,y-v,u,d)}},function(t,i){t.exports=function ProcessTileCallbacks(t,i){return t.collisionCallback?!t.collisionCallback.call(t.collisionCallbackContext,i,t):!t.layer.callbacks[t.index]||!t.layer.callbacks[t.index].callback.call(t.layer.callbacks[t.index].callbackContext,i,t)}},function(t,i,r){var o,a=r(436);function rbush(t){if(!(this instanceof rbush))return new rbush(t);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}function findItem(t,i,r){if(!r)return i.indexOf(t);for(var o=0;o<i.length;o++)if(r(t,i[o]))return o;return-1}function calcBBox(t,i){distBBox(t,0,t.children.length,i,t)}function distBBox(t,i,r,o,a){a||(a=createNode(null)),a.minX=1/0,a.minY=1/0,a.maxX=-1/0,a.maxY=-1/0;for(var h,l=i;l<r;l++)h=t.children[l],extend(a,t.leaf?o(h):h);return a}function extend(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function compareNodeMinX(t,i){return t.minX-i.minX}function compareNodeMinY(t,i){return t.minY-i.minY}function bboxArea(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function bboxMargin(t){return t.maxX-t.minX+(t.maxY-t.minY)}function contains(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function intersects(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function createNode(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function multiSelect(t,i,r,o,h){for(var l,u=[i,r];u.length;)(r=u.pop())-(i=u.pop())<=o||(l=i+Math.ceil((r-i)/o/2)*o,a(t,l,i,r,h),u.push(i,l,l,r))}rbush.prototype=(o={all:function all(){return this._all(this.data,[])},search:function search(t){var i=this.data,r=[],o=this.toBBox;if(!intersects(t,i))return r;for(var a,h,l,u,c=[];i;){for(a=0,h=i.children.length;a<h;a++)l=i.children[a],intersects(t,u=i.leaf?o(l):l)&&(i.leaf?r.push(l):contains(t,u)?this._all(l,r):c.push(l));i=c.pop()}return r},collides:function collides(t){var i=this.data,r=this.toBBox;if(!intersects(t,i))return!1;for(var o,a,h,l,u=[];i;){for(o=0,a=i.children.length;o<a;o++)if(h=i.children[o],intersects(t,l=i.leaf?r(h):h)){if(i.leaf||contains(t,l))return!0;u.push(h)}i=u.pop()}return!1},load:function load(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0,r=t.length;i<r;i++)this.insert(t[i]);return this}var o=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===o.height)this._splitRoot(this.data,o);else{if(this.data.height<o.height){var a=this.data;this.data=o,o=a}this._insert(o,this.data.height-o.height-1,!0)}else this.data=o;return this},insert:function insert(t){return t&&this._insert(t,this.data.height-1),this},clear:function clear(){return this.data=createNode([]),this},remove:function remove(t,i){if(!t)return this;for(var r,o,a,h,l=this.data,u=this.toBBox(t),c=[],d=[];l||c.length;){if(l||(l=c.pop(),o=c[c.length-1],r=d.pop(),h=!0),l.leaf&&-1!==(a=findItem(t,l.children,i)))return l.children.splice(a,1),c.push(l),this._condense(c),this;h||l.leaf||!contains(l,u)?o?(r++,l=o.children[r],h=!1):l=null:(c.push(l),d.push(r),r=0,o=l,l=l.children[0])}return this},toBBox:function toBBox(t){return t},compareMinX:compareNodeMinX,compareMinY:compareNodeMinY,toJSON:function toJSON(){return this.data},fromJSON:function fromJSON(t){return this.data=t,this},_all:function _all(t,i){for(var r=[];t;)t.leaf?i.push.apply(i,t.children):r.push.apply(r,t.children),t=r.pop();return i},_build:function _build(t,i,r,o){var a,h=r-i+1,l=this._maxEntries;if(h<=l)return calcBBox(a=createNode(t.slice(i,r+1)),this.toBBox),a;o||(o=Math.ceil(Math.log(h)/Math.log(l)),l=Math.ceil(h/Math.pow(l,o-1))),(a=createNode([])).leaf=!1,a.height=o;var u,c,d,p,g=Math.ceil(h/l),v=g*Math.ceil(Math.sqrt(l));for(multiSelect(t,i,r,v,this.compareMinX),u=i;u<=r;u+=v)for(multiSelect(t,u,d=Math.min(u+v-1,r),g,this.compareMinY),c=u;c<=d;c+=g)p=Math.min(c+g-1,d),a.children.push(this._build(t,c,p,o-1));return calcBBox(a,this.toBBox),a},_chooseSubtree:function _chooseSubtree(t,i,r,o){for(var a,h,l,u,c,d,p,g,v,m;o.push(i),!i.leaf&&o.length-1!==r;){for(p=g=1/0,a=0,h=i.children.length;a<h;a++)c=bboxArea(l=i.children[a]),v=t,m=l,(d=(Math.max(m.maxX,v.maxX)-Math.min(m.minX,v.minX))*(Math.max(m.maxY,v.maxY)-Math.min(m.minY,v.minY))-c)<g?(g=d,p=c<p?c:p,u=l):d===g&&c<p&&(p=c,u=l);i=u||i.children[0]}return i},_insert:function _insert(t,i,r){var o=this.toBBox,a=r?t:o(t),h=[],l=this._chooseSubtree(a,this.data,i,h);for(l.children.push(t),extend(l,a);i>=0&&h[i].children.length>this._maxEntries;)this._split(h,i),i--;this._adjustParentBBoxes(a,h,i)},_split:function _split(t,i){var r=t[i],o=r.children.length,a=this._minEntries;this._chooseSplitAxis(r,a,o);var h=this._chooseSplitIndex(r,a,o),l=createNode(r.children.splice(h,r.children.length-h));l.height=r.height,l.leaf=r.leaf,calcBBox(r,this.toBBox),calcBBox(l,this.toBBox),i?t[i-1].children.push(l):this._splitRoot(r,l)},_splitRoot:function _splitRoot(t,i){this.data=createNode([t,i]),this.data.height=t.height+1,this.data.leaf=!1,calcBBox(this.data,this.toBBox)},_chooseSplitIndex:function _chooseSplitIndex(t,i,r){var o,a,h,l,u,c,d,p,g,v,m,y,T,S;for(c=d=1/0,o=i;o<=r-i;o++)a=distBBox(t,0,o,this.toBBox),h=distBBox(t,o,r,this.toBBox),g=a,v=h,m=void 0,y=void 0,T=void 0,S=void 0,m=Math.max(g.minX,v.minX),y=Math.max(g.minY,v.minY),T=Math.min(g.maxX,v.maxX),S=Math.min(g.maxY,v.maxY),l=Math.max(0,T-m)*Math.max(0,S-y),u=bboxArea(a)+bboxArea(h),l<c?(c=l,p=o,d=u<d?u:d):l===c&&u<d&&(d=u,p=o);return p},_chooseSplitAxis:function _chooseSplitAxis(t,i,r){var o=t.leaf?this.compareMinX:compareNodeMinX,a=t.leaf?this.compareMinY:compareNodeMinY;this._allDistMargin(t,i,r,o)<this._allDistMargin(t,i,r,a)&&t.children.sort(o)},_allDistMargin:function _allDistMargin(t,i,r,o){t.children.sort(o);var a,h,l=this.toBBox,u=distBBox(t,0,i,l),c=distBBox(t,r-i,r,l),d=bboxMargin(u)+bboxMargin(c);for(a=i;a<r-i;a++)h=t.children[a],extend(u,t.leaf?l(h):h),d+=bboxMargin(u);for(a=r-i-1;a>=i;a--)h=t.children[a],extend(c,t.leaf?l(h):h),d+=bboxMargin(c);return d},_adjustParentBBoxes:function _adjustParentBBoxes(t,i,r){for(var o=r;o>=0;o--)extend(i[o],t)},_condense:function _condense(t){for(var i,r=t.length-1;r>=0;r--)0===t[r].children.length?r>0?(i=t[r-1].children).splice(i.indexOf(t[r]),1):this.clear():calcBBox(t[r],this.toBBox)}},_defineProperty(o,"compareMinX",(function compareMinX(t,i){return t.left-i.left})),_defineProperty(o,"compareMinY",(function compareMinY(t,i){return t.top-i.top})),_defineProperty(o,"toBBox",(function toBBox(t){return{minX:t.left,minY:t.top,maxX:t.right,maxY:t.bottom}})),o),t.exports=rbush},function(t,i,r){var o=r(533),a=r(535),h=r(248);t.exports=function SeparateTile(t,i,r,l,u,c,d){var p=l.left,g=l.top,v=l.right,m=l.bottom,y=r.faceLeft||r.faceRight,T=r.faceTop||r.faceBottom;if(d||(y=!0,T=!0),!y&&!T)return!1;var S=0,w=0,b=0,C=1;if(i.deltaAbsX()>i.deltaAbsY()?b=-1:i.deltaAbsX()<i.deltaAbsY()&&(C=-1),0!==i.deltaX()&&0!==i.deltaY()&&y&&T&&(b=Math.min(Math.abs(i.position.x-v),Math.abs(i.right-p)),C=Math.min(Math.abs(i.position.y-m),Math.abs(i.bottom-g))),b<C){if(y&&0!==(S=o(i,r,p,v,c,d))&&!h(l,i))return!0;T&&(w=a(i,r,g,m,c,d))}else{if(T&&0!==(w=a(i,r,g,m,c,d))&&!h(l,i))return!0;y&&(S=o(i,r,p,v,c,d))}return 0!==S||0!==w}},function(t,i,r){var o=r(534);t.exports=function TileCheckX(t,i,r,a,h,l){var u=0,c=i.faceLeft,d=i.faceRight,p=i.collideLeft,g=i.collideRight;return l||(c=!0,d=!0,p=!0,g=!0),t.deltaX()<0&&g&&t.checkCollision.left?d&&t.x<a&&(u=t.x-a)<-h&&(u=0):t.deltaX()>0&&p&&t.checkCollision.right&&c&&t.right>r&&(u=t.right-r)>h&&(u=0),0!==u&&(t.customSeparateX?t.overlapX=u:o(t,u)),u}},function(t,i){t.exports=function ProcessTileSeparationX(t,i){i<0?(t.blocked.none=!1,t.blocked.left=!0):i>0&&(t.blocked.none=!1,t.blocked.right=!0),t.position.x-=i,0===t.bounce.x?t.velocity.x=0:t.velocity.x=-t.velocity.x*t.bounce.x}},function(t,i,r){var o=r(536);t.exports=function TileCheckY(t,i,r,a,h,l){var u=0,c=i.faceTop,d=i.faceBottom,p=i.collideUp,g=i.collideDown;return l||(c=!0,d=!0,p=!0,g=!0),t.deltaY()<0&&g&&t.checkCollision.up?d&&t.y<a&&(u=t.y-a)<-h&&(u=0):t.deltaY()>0&&p&&t.checkCollision.down&&c&&t.bottom>r&&(u=t.bottom-r)>h&&(u=0),0!==u&&(t.customSeparateY?t.overlapY=u:o(t,u)),u}},function(t,i){t.exports=function ProcessTileSeparationY(t,i){i<0?(t.blocked.none=!1,t.blocked.up=!0):i>0&&(t.blocked.none=!1,t.blocked.down=!0),t.position.y-=i,0===t.bounce.y?t.velocity.y=0:t.velocity.y=-t.velocity.y*t.bounce.y}},function(t,i,r){var o=r(246),a=r(1389);t.exports=function SeparateX(t,i,r,h){var l=o(t,i,r,h),u=t.immovable,c=i.immovable;if(r||0===l||u&&c||t.customSeparateX||i.customSeparateX)return 0!==l||t.embedded&&i.embedded;var d=a.Set(t,i,l);return u||c?(u?a.RunImmovableBody1(d):c&&a.RunImmovableBody2(d),!0):d>0||a.Check()}},function(t,i,r){var o=r(247),a=r(1390);t.exports=function SeparateY(t,i,r,h){var l=o(t,i,r,h),u=t.immovable,c=i.immovable;if(r||0===l||u&&c||t.customSeparateY||i.customSeparateY)return 0!==l||t.embedded&&i.embedded;var d=a.Set(t,i,l);return u||c?(u?a.RunImmovableBody1(d):c&&a.RunImmovableBody2(d),!0):d>0||a.Check()}},function(t,i,r){var o=r(66),a=r(0),h=r(62),l=r(57),u=r(3),c=new a({initialize:function StaticBody(t,i){var r=i.displayWidth?i.displayWidth:64,o=i.displayHeight?i.displayHeight:64;this.world=t,this.gameObject=i,this.debugShowBody=t.defaults.debugShowStaticBody,this.debugBodyColor=t.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new u,this.position=new u(i.x-r*i.originX,i.y-o*i.originY),this.width=r,this.height=o,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new u(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=u.ZERO,this.allowGravity=!1,this.gravity=u.ZERO,this.bounce=u.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=h.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function setGameObject(t,i){return t&&t!==this.gameObject&&(this.gameObject.body=null,t.body=this,this.gameObject=t),i&&this.updateFromGameObject(),this},updateFromGameObject:function updateFromGameObject(){this.world.staticTree.remove(this);var t=this.gameObject;return t.getTopLeft(this.position),this.width=t.displayWidth,this.height=t.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function setOffset(t,i){return void 0===i&&(i=t),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(t,i),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function setSize(t,i,r){void 0===r&&(r=!0);var o=this.gameObject;if(!t&&o.frame&&(t=o.frame.realWidth),!i&&o.frame&&(i=o.frame.realHeight),this.world.staticTree.remove(this),this.width=t,this.height=i,this.halfWidth=Math.floor(t/2),this.halfHeight=Math.floor(i/2),r&&o.getCenter){var a=o.displayWidth/2,h=o.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(a-this.halfWidth,h-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function setCircle(t,i,r){return void 0===i&&(i=this.offset.x),void 0===r&&(r=this.offset.y),t>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=t,this.width=2*t,this.height=2*t,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(i,r),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function updateCenter(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function reset(t,i){var r=this.gameObject;void 0===t&&(t=r.x),void 0===i&&(i=r.y),this.world.staticTree.remove(this),r.setPosition(t,i),r.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function stop(){return this},getBounds:function getBounds(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function hitTest(t,i){return this.isCircle?o(this,t,i):l(this,t,i)},postUpdate:function postUpdate(){},deltaAbsX:function deltaAbsX(){return 0},deltaAbsY:function deltaAbsY(){return 0},deltaX:function deltaX(){return 0},deltaY:function deltaY(){return 0},deltaZ:function deltaZ(){return 0},destroy:function destroy(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function drawDebug(t){var i=this.position,r=i.x+this.halfWidth,o=i.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?t.strokeCircle(r,o,this.width/2):t.strokeRect(i.x,i.y,this.width,this.height))},willDrawDebug:function willDrawDebug(){return this.debugShowBody},setMass:function setMass(t){return t<=0&&(t=.1),this.mass=t,this},x:{get:function get(){return this.position.x},set:function set(t){this.world.staticTree.remove(this),this.position.x=t,this.world.staticTree.insert(this)}},y:{get:function get(){return this.position.y},set:function set(t){this.world.staticTree.remove(this),this.position.y=t,this.world.staticTree.insert(this)}},left:{get:function get(){return this.position.x}},right:{get:function get(){return this.position.x+this.width}},top:{get:function get(){return this.position.y}},bottom:{get:function get(){return this.position.y+this.height}}});t.exports=c},function(t,i,r){var o=new(r(0))({initialize:function BasePlugin(t){this.pluginManager=t,this.game=t.game},init:function init(){},start:function start(){},stop:function stop(){},destroy:function destroy(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=o},function(t,i,r){var o=new(r(3));t.exports=function CheckIsoBounds(t,i,r,a){var h=r.tilemapLayer,l=h.cullPaddingX,u=h.cullPaddingY,c=h.tilemap.tileToWorldXY(t,i,o,a,h);return c.x>a.worldView.x+h.scaleX*r.tileWidth*(-l-.5)&&c.x<a.worldView.right+h.scaleX*r.tileWidth*(l-.5)&&c.y>a.worldView.y+h.scaleY*r.tileHeight*(-u-1)&&c.y<a.worldView.bottom+h.scaleY*r.tileHeight*(u-.5)}},function(t,i,r){var o=r(26);t.exports=function ReplaceByIndex(t,i,r,a,h,l,u){for(var c=o(r,a,h,l,null,u),d=0;d<c.length;d++)c[d]&&c[d].index===t&&(c[d].index=i)}},function(t,i,r){var o=r(10),a=r(139),h=r(76),l=new o;t.exports=function CullBounds(t,i){var r=t.tilemapLayer.tilemap,o=t.tilemapLayer,u=Math.floor(r.tileWidth*o.scaleX),c=Math.floor(r.tileHeight*o.scaleY),d=h(i.worldView.x-o.x,u,0,!0)-o.cullPaddingX,p=a(i.worldView.right-o.x,u,0,!0)+o.cullPaddingX,g=h(i.worldView.y-o.y,c,0,!0)-o.cullPaddingY,v=a(i.worldView.bottom-o.y,c,0,!0)+o.cullPaddingY;return l.setTo(d,g,p-d,v-g)}},function(t,i,r){var o=r(543),a=r(159);t.exports=function CullTiles(t,i,r,h){void 0===r&&(r=[]),void 0===h&&(h=0),r.length=0;var l=t.tilemapLayer,u=o(t,i);return(l.skipCull||1!==l.scrollFactorX||1!==l.scrollFactorY)&&(u.left=0,u.right=t.width,u.top=0,u.bottom=t.height),a(t,u,h,r),r}},function(t,i,r){var o=r(546),a=r(159);t.exports=function HexagonalCullTiles(t,i,r,h){void 0===r&&(r=[]),void 0===h&&(h=0),r.length=0;var l=t.tilemapLayer;if(!l.skipCull&&1===l.scrollFactorX&&1===l.scrollFactorY){var u=o(t,i);a(t,u,h,r)}return r}},function(t,i,r){var o=r(139),a=r(76);t.exports=function HexagonalCullBounds(t,i){var r=t.tilemapLayer.tilemap,h=t.tilemapLayer,l=Math.floor(r.tileWidth*h.scaleX),u=Math.floor(r.tileHeight*h.scaleY),c=t.hexSideLength,d=(u-c)/2+c;return{left:a(i.worldView.x-h.x,l,0,!0)-h.cullPaddingX,right:o(i.worldView.right-h.x,l,0,!0)+h.cullPaddingX,top:a(i.worldView.y-h.y,d,0,!0)-h.cullPaddingY,bottom:o(i.worldView.bottom-h.y,d,0,!0)+h.cullPaddingY}}},function(t,i,r){var o=r(541);t.exports=function IsometricCullTiles(t,i,r,a){void 0===r&&(r=[]),void 0===a&&(a=0),r.length=0;var h,l,u,c=t.tilemapLayer,d=t.data,p=t.width,g=t.height,v=p,m=g;if(!c.skipCull)if(0===a){for(l=0;l<m;l++)for(h=0;d[l]&&h<v;h++)if(o(h,l,t,i)){if(!(u=d[l][h])||-1===u.index||!u.visible||0===u.alpha)continue;r.push(u)}}else if(1===a){for(l=0;l<m;l++)for(h=v;d[l]&&h>=0;h--)if(o(h,l,t,i)){if(!(u=d[l][h])||-1===u.index||!u.visible||0===u.alpha)continue;r.push(u)}}else if(2===a){for(l=m;l>=0;l--)for(h=0;d[l]&&h<v;h++)if(o(h,l,t,i)){if(!(u=d[l][h])||-1===u.index||!u.visible||0===u.alpha)continue;r.push(u)}}else if(3===a)for(l=m;l>=0;l--)for(h=v;d[l]&&h>=0;h--)if(o(h,l,t,i)){if(!(u=d[l][h])||-1===u.index||!u.visible||0===u.alpha)continue;r.push(u)}return c.tilesDrawn=r.length,c.tilesTotal=p*g,r}},function(t,i,r){var o=r(549),a=r(159);t.exports=function StaggeredCullTiles(t,i,r,h){void 0===r&&(r=[]),void 0===h&&(h=0),r.length=0;var l=t.tilemapLayer;if(!l.skipCull&&1===l.scrollFactorX&&1===l.scrollFactorY){var u=o(t,i);a(t,u,h,r)}return r}},function(t,i,r){var o=r(139),a=r(76);t.exports=function StaggeredCullBounds(t,i){var r=t.tilemapLayer.tilemap,h=t.tilemapLayer,l=Math.floor(r.tileWidth*h.scaleX),u=Math.floor(r.tileHeight*h.scaleY);return{left:a(i.worldView.x-h.x,l,0,!0)-h.cullPaddingX,right:o(i.worldView.right-h.x,l,0,!0)+h.cullPaddingX,top:a(i.worldView.y-h.y,u/2,0,!0)-h.cullPaddingY,bottom:o(i.worldView.bottom-h.y,u/2,0,!0)+h.cullPaddingY}}},function(t,i,r){var o=r(3);t.exports=function HexagonalTileToWorldXY(t,i,r,a,h){r||(r=new o);var l=h.baseTileWidth,u=h.baseTileHeight,c=h.tilemapLayer,d=0,p=0;c&&(a||(a=c.scene.cameras.main),d=c.x+a.scrollX*(1-c.scrollFactorX),l*=c.scaleX,p=c.y+a.scrollY*(1-c.scrollFactorY),u*=c.scaleY);var g=h.hexSideLength,v=d+t*l+i%2*(l/2),m=p+i*((u-g)/2+g);return r.set(v,m)}},function(t,i,r){var o=r(3);t.exports=function IsometricTileToWorldXY(t,i,r,a,h){r||(r=new o);var l=h.baseTileWidth,u=h.baseTileHeight,c=h.tilemapLayer,d=0,p=0;c&&(a||(a=c.scene.cameras.main),d=c.x+a.scrollX*(1-c.scrollFactorX),l*=c.scaleX,p=c.y+a.scrollY*(1-c.scrollFactorY),u*=c.scaleY);var g=d+l/2*(t-i),v=p+(t+i)*(u/2);return r.set(g,v)}},function(t,i,r){var o=r(3);t.exports=function StaggeredTileToWorldXY(t,i,r,a,h){r||(r=new o);var l=h.baseTileWidth,u=h.baseTileHeight,c=h.tilemapLayer,d=0,p=0;c&&(a||(a=c.scene.cameras.main),d=c.x+a.scrollX*(1-c.scrollFactorX),l*=c.scaleX,p=c.y+a.scrollY*(1-c.scrollFactorY),u*=c.scaleY);var g=d+t*l+i%2*(l/2),v=p+i*(u/2);return r.set(g,v)}},function(t,i,r){var o=r(253),a=r(254),h=r(3);t.exports=function TileToWorldXY(t,i,r,l,u){return r||(r=new h(0,0)),r.x=o(t,l,u),r.y=a(i,l,u),r}},function(t,i){t.exports=function HexagonalTileToWorldY(t,i,r){var o=r.baseTileHeight,a=r.tilemapLayer,h=0;a&&(void 0===i&&(i=a.scene.cameras.main),h=a.y+i.scrollY*(1-a.scrollFactorY),o*=a.scaleY);var l=a.tilemap.hexSideLength;return h+t*((o-l)/2+l)}},function(t,i){t.exports=function StaggeredTileToWorldY(t,i,r){var o=r.baseTileHeight,a=r.tilemapLayer,h=0;return a&&(void 0===i&&(i=a.scene.cameras.main),h=a.y+i.scrollY*(1-a.scrollFactorY),o*=a.scaleY),h+t*(o/2)}},function(t,i,r){var o=r(3);t.exports=function HexagonalWorldToTileXY(t,i,r,a,h,l){a||(a=new o);var u=l.baseTileWidth,c=l.baseTileHeight,d=l.tilemapLayer;d&&(h||(h=d.scene.cameras.main),i-=d.y+h.scrollY*(1-d.scrollFactorY),c*=d.scaleY,t-=d.x+h.scrollX*(1-d.scrollFactorX),u*=d.scaleX);var p=l.hexSideLength,g=(c-p)/2+p,v=r?Math.floor(i/g):i/g,m=r?Math.floor((t-v%2*.5*u)/u):(t-v%2*.5*u)/u;return a.set(m,v)}},function(t,i,r){var o=r(3);t.exports=function IsometricWorldToTileXY(t,i,r,a,h,l){a||(a=new o);var u=l.baseTileWidth,c=l.baseTileHeight,d=l.tilemapLayer;d&&(h||(h=d.scene.cameras.main),i-=d.y+h.scrollY*(1-d.scrollFactorY),c*=d.scaleY,t-=d.x+h.scrollX*(1-d.scrollFactorX),u*=d.scaleX);var p=r?Math.floor((t/(u/2)+i/(c/2))/2):(t/(u/2)+i/(c/2))/2,g=r?Math.floor((i/(c/2)-t/(u/2))/2):(i/(c/2)-t/(u/2))/2;return a.set(p,g)}},function(t,i,r){var o=r(3);t.exports=function StaggeredWorldToTileXY(t,i,r,a,h,l){a||(a=new o);var u=l.baseTileWidth,c=l.baseTileHeight,d=l.tilemapLayer;d&&(h||(h=d.scene.cameras.main),i-=d.y+h.scrollY*(1-d.scrollFactorY),c*=d.scaleY,t-=d.x+h.scrollX*(1-d.scrollFactorX),u*=d.scaleX);var p=r?Math.floor(i/(c/2)):i/(c/2),g=r?Math.floor((t+p%2*.5*u)/u):(t+p%2*.5*u)/u;return a.set(g,p)}},function(t,i,r){var o=r(255),a=r(256),h=r(3);t.exports=function WorldToTileXY(t,i,r,l,u,c){return void 0===r&&(r=!0),l||(l=new h(0,0)),l.x=o(t,r,u,c),l.y=a(i,r,u,c),l}},function(t,i){t.exports=function HexagonalWorldToTileY(t,i,r,o){var a=o.baseTileHeight,h=o.tilemapLayer;h&&(r||(r=h.scene.cameras.main),t-=h.y+r.scrollY*(1-h.scrollFactorY),a*=h.scaleY);var l=o.hexSideLength,u=(a-l)/2+l;return i?Math.floor(t/u):t/u}},function(t,i){t.exports=function StaggeredWorldToTileY(t,i,r,o){var a=o.baseTileHeight,h=o.tilemapLayer;return h&&(r||(r=h.scene.cameras.main),t-=h.y+r.scrollY*(1-h.scrollFactorY),a*=h.scaleY),i?Math.floor(t/(a/2)):t/(a/2)}},function(t,i,r){var o=r(119);t.exports=function HasTileAt(t,i,r){if(o(t,i,r)){var a=r.data[i][t];return null!==a&&a.index>-1}return!1}},function(t,i,r){var o=r(85),a=r(119),h=r(252);t.exports=function RemoveTileAt(t,i,r,l,u){if(void 0===r&&(r=!0),void 0===l&&(l=!0),!a(t,i,u))return null;var c=u.data[i][t];return c?(u.data[i][t]=r?null:new o(u,-1,t,i,u.tileWidth,u.tileHeight),l&&c&&c.collides&&h(t,i,u),c):null}},function(t,i,r){var o=r(40),a=r(259),h=r(565),l=r(566),u=r(577);t.exports=function Parse(t,i,r,c,d,p){var g;switch(i){case o.ARRAY_2D:g=a(t,r,c,d,p);break;case o.CSV:g=h(t,r,c,d,p);break;case o.TILED_JSON:g=l(t,r,p);break;case o.WELTMEISTER:g=u(t,r,p);break;default:console.warn("Unrecognized tilemap data format: "+i),g=null}return g}},function(t,i,r){var o=r(40),a=r(259);t.exports=function ParseCSV(t,i,r,h,l){var u=i.trim().split("\n").map((function(t){return t.split(",")})),c=a(t,u,r,h,l);return c.format=o.CSV,c}},function(t,i,r){var o=r(567),a=r(568),h=r(29),l=r(40),u=r(258),c=r(121),d=r(569),p=r(570),g=r(573),v=r(575);t.exports=function ParseJSONTiled(t,i,r){var m=new c({width:i.width,height:i.height,name:t,tileWidth:i.tilewidth,tileHeight:i.tileheight,orientation:u(i.orientation),format:l.TILED_JSON,version:i.version,properties:i.properties,renderOrder:i.renderorder,infinite:i.infinite});m.orientation===h.HEXAGONAL&&(m.hexSideLength=i.hexsidelength),m.layers=g(i,r),m.images=d(i);var y=v(i);return m.tilesets=y.tilesets,m.imageCollections=y.imageCollections,m.objects=p(i),m.tiles=a(m),o(m),m}},function(t,i,r){var o=r(17);t.exports=function AssignTileProperties(t){for(var i,r,a,h,l,u=0;u<t.layers.length;u++){i=t.layers[u],h=null;for(var c=0;c<i.data.length;c++){l=i.data[c];for(var d=0;d<l.length;d++)null===(r=l[d])||r.index<0||(a=t.tiles[r.index][2],h=t.tilesets[a],r.width=h.tileWidth,r.height=h.tileHeight,h.tileProperties&&h.tileProperties[r.index-h.firstgid]&&(r.properties=o(r.properties,h.tileProperties[r.index-h.firstgid])))}}}},function(t,i,r){var o=r(122);t.exports=function BuildTilesetIndex(t){var i,r,a=[];for(i=0;i<t.imageCollections.length;i++)for(var h=t.imageCollections[i],l=h.images,u=0;u<l.length;u++){var c=l[u];(r=new o(c.image,c.gid,h.imageWidth,h.imageHeight,0,0)).updateTileData(h.imageWidth,h.imageHeight),t.tilesets.push(r)}for(i=0;i<t.tilesets.length;i++)for(var d=(r=t.tilesets[i]).tileMargin,p=r.tileMargin,g=0,v=0,m=0,y=r.firstgid;y<r.firstgid+r.total&&(a[y]=[d,p,i],d+=r.tileWidth+r.tileSpacing,++g!==r.total)&&(++v!==r.columns||(d=r.tileMargin,p+=r.tileHeight+r.tileSpacing,v=0,++m!==r.rows));y++);return a}},function(t,i,r){var o=r(2),a=r(161);t.exports=function ParseImageLayers(t){for(var i=[],r=[],h=a(t);h.i<h.layers.length||r.length>0;)if(h.i>=h.layers.length){if(r.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}h=r.pop()}else{var l=h.layers[h.i];if(h.i++,"imagelayer"===l.type){var u=o(l,"offsetx",0)+o(l,"startx",0),c=o(l,"offsety",0)+o(l,"starty",0);i.push({name:h.name+l.name,image:l.image,x:h.x+u+l.x,y:h.y+c+l.y,alpha:h.opacity*l.opacity,visible:h.visible&&l.visible,properties:o(l,"properties",{})})}else if("group"===l.type){var d=a(t,l,h);r.push(h),h=d}}return i}},function(t,i,r){var o=r(2),a=r(260),h=r(572),l=r(161);t.exports=function ParseObjectLayers(t){for(var i=[],r=[],u=l(t);u.i<u.layers.length||r.length>0;)if(u.i>=u.layers.length){if(r.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}u=r.pop()}else{var c=u.layers[u.i];if(u.i++,c.opacity*=u.opacity,c.visible=u.visible&&c.visible,"objectgroup"===c.type){c.name=u.name+c.name;for(var d=u.x+o(c,"startx",0)+o(c,"offsetx",0),p=u.y+o(c,"starty",0)+o(c,"offsety",0),g=[],v=0;v<c.objects.length;v++){var m=a(c.objects[v],d,p);g.push(m)}var y=new h(c);y.objects=g,i.push(y)}else if("group"===c.type){var T=l(t,c,u);r.push(u),u=T}}return i}},function(t,i,r){var o=r(126);t.exports=function Pick(t,i){for(var r={},a=0;a<i.length;a++){var h=i[a];o(t,h)&&(r[h]=t[h])}return r}},function(t,i,r){var o=r(0),a=r(2),h=new o({initialize:function ObjectLayer(t){void 0===t&&(t={}),this.name=a(t,"name","object layer"),this.opacity=a(t,"opacity",1),this.properties=a(t,"properties",{}),this.propertyTypes=a(t,"propertytypes",{}),this.type=a(t,"type","objectgroup"),this.visible=a(t,"visible",!0),this.objects=a(t,"objects",[])}});t.exports=h},function(t,i,r){var o=r(574),a=r(29),h=r(161),l=r(258),u=r(2),c=r(120),d=r(261),p=r(85);t.exports=function ParseTileLayers(t,i){for(var r=u(t,"infinite",!1),g=[],v=[],m=h(t);m.i<m.layers.length||v.length>0;)if(m.i>=m.layers.length){if(v.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}m=v.pop()}else{var y=m.layers[m.i];if(m.i++,"tilelayer"===y.type)if(y.compression)console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+y.name+"'");else{if(y.encoding&&"base64"===y.encoding){if(y.chunks)for(var T=0;T<y.chunks.length;T++)y.chunks[T].data=o(y.chunks[T].data);y.data&&(y.data=o(y.data)),delete y.encoding}var S,w,b,C,A=[],E=0;if(r){var M=u(y,"startx",0)+y.x,_=u(y,"starty",0)+y.y;(S=new c({name:m.name+y.name,x:m.x+u(y,"offsetx",0)+M*t.tilewidth,y:m.y+u(y,"offsety",0)+_*t.tileheight,width:y.width,height:y.height,tileWidth:t.tilewidth,tileHeight:t.tileheight,alpha:m.opacity*y.opacity,visible:m.visible&&y.visible,properties:u(y,"properties",[]),orientation:l(t.orientation)})).orientation===a.HEXAGONAL&&(S.hexSideLength=t.hexsidelength);for(var R=0;R<y.height;R++){A.push([null]);for(var P=0;P<y.width;P++)A[R][P]=null}for(R=0,X=y.chunks.length;R<X;R++)for(var k=y.chunks[R],O=k.x-M,L=k.y-_,D=0,I=0,B=k.data.length;I<B;I++){var N=E+O,G=D+L;(w=d(k.data[I])).gid>0?((b=new p(S,w.gid,N,G,t.tilewidth,t.tileheight)).rotation=w.rotation,b.flipX=w.flipped,A[G][N]=b):(C=i?null:new p(S,-1,N,G,t.tilewidth,t.tileheight),A[G][N]=C),++E===k.width&&(D++,E=0)}}else{(S=new c({name:m.name+y.name,x:m.x+u(y,"offsetx",0)+y.x,y:m.y+u(y,"offsety",0)+y.y,width:y.width,height:y.height,tileWidth:t.tilewidth,tileHeight:t.tileheight,alpha:m.opacity*y.opacity,visible:m.visible&&y.visible,properties:u(y,"properties",[]),orientation:l(t.orientation)})).orientation===a.HEXAGONAL&&(S.hexSideLength=t.hexsidelength);for(var Y=[],U=0,X=y.data.length;U<X;U++)(w=d(y.data[U])).gid>0?((b=new p(S,w.gid,E,A.length,t.tilewidth,t.tileheight)).rotation=w.rotation,b.flipX=w.flipped,Y.push(b)):(C=i?null:new p(S,-1,E,A.length,t.tilewidth,t.tileheight),Y.push(C)),++E===y.width&&(A.push(Y),E=0,Y=[])}S.data=A,g.push(S)}else if("group"===y.type){var V=h(t,y,m);v.push(m),m=V}}return g}},function(t,i){t.exports=function Base64Decode(t){for(var i=window.atob(t),r=i.length,o=new Array(r/4),a=0;a<r;a+=4)o[a/4]=(i.charCodeAt(a)|i.charCodeAt(a+1)<<8|i.charCodeAt(a+2)<<16|i.charCodeAt(a+3)<<24)>>>0;return o}},function(t,i,r){var o=r(122),a=r(576),h=r(260),l=r(1453);t.exports=function ParseTilesets(t){for(var i,r=[],u=[],c=null,d=0;d<t.tilesets.length;d++){var p=t.tilesets[d];if(p.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(p.image){var g=new o(p.name,p.firstgid,p.tilewidth,p.tileheight,p.margin,p.spacing);if(t.version>1){var v=void 0,m=void 0;if(Array.isArray(p.tiles)){v=v||{},m=m||{};for(var y=0;y<p.tiles.length;y++){var T=p.tiles[y];if(T.properties){var S={};T.properties.forEach((function(t){S[t.name]=t.value})),m[T.id]=S}if(T.objectgroup&&((v[T.id]||(v[T.id]={})).objectgroup=T.objectgroup,T.objectgroup.objects)){var w=T.objectgroup.objects.map((function(t){return h(t)}));v[T.id].objectgroup.objects=w}T.animation&&((v[T.id]||(v[T.id]={})).animation=T.animation),T.type&&((v[T.id]||(v[T.id]={})).type=T.type)}}Array.isArray(p.wangsets)&&(v=v||{},m=m||{},l(p.wangsets,v)),v&&(g.tileData=v,g.tileProperties=m)}else if(p.tileproperties&&(g.tileProperties=p.tileproperties),p.tiles)for(i in g.tileData=p.tiles,g.tileData){var b=g.tileData[i].objectgroup;if(b&&b.objects){var C=b.objects.map((function(t){return h(t)}));g.tileData[i].objectgroup.objects=C}}g.updateTileData(p.imagewidth,p.imageheight),r.push(g)}else{var A=new a(p.name,p.firstgid,p.tilewidth,p.tileheight,p.margin,p.spacing,p.properties),E=0;for(y=0;y<p.tiles.length;y++){var M=(T=p.tiles[y]).image,_=parseInt(T.id,10),R=p.firstgid+_;A.addImage(R,M),E=Math.max(_,E)}A.maxId=E,u.push(A)}c&&(c.lastgid=p.firstgid-1),c=p}return{tilesets:r,imageCollections:u}}},function(t,i,r){var o=new(r(0))({initialize:function ImageCollection(t,i,r,o,a,h,l){(void 0===r||r<=0)&&(r=32),(void 0===o||o<=0)&&(o=32),void 0===a&&(a=0),void 0===h&&(h=0),this.name=t,this.firstgid=0|i,this.imageWidth=0|r,this.imageHeight=0|o,this.imageMargin=0|a,this.imageSpacing=0|h,this.properties=l||{},this.images=[],this.total=0},containsImageIndex:function containsImageIndex(t){return t>=this.firstgid&&t<this.firstgid+this.total},addImage:function addImage(t,i){return this.images.push({gid:t,image:i}),this.total++,this}});t.exports=o},function(t,i,r){var o=r(40),a=r(121),h=r(578),l=r(579);t.exports=function ParseWeltmeister(t,i,r){if(0===i.layer.length)return console.warn("No layers found in the Weltmeister map: "+t),null;for(var u=0,c=0,d=0;d<i.layer.length;d++)i.layer[d].width>u&&(u=i.layer[d].width),i.layer[d].height>c&&(c=i.layer[d].height);var p=new a({width:u,height:c,name:t,tileWidth:i.layer[0].tilesize,tileHeight:i.layer[0].tilesize,format:o.WELTMEISTER});return p.layers=h(i,r),p.tilesets=l(i),p}},function(t,i,r){var o=r(120),a=r(85);t.exports=function ParseTileLayers(t,i){for(var r=[],h=0;h<t.layer.length;h++){for(var l=t.layer[h],u=new o({name:l.name,width:l.width,height:l.height,tileWidth:l.tilesize,tileHeight:l.tilesize,visible:1===l.visible}),c=[],d=[],p=0;p<l.data.length;p++){for(var g=0;g<l.data[p].length;g++){var v,m=l.data[p][g]-1;v=m>-1?new a(u,m,g,p,l.tilesize,l.tilesize):i?null:new a(u,-1,g,p,l.tilesize,l.tilesize),c.push(v)}d.push(c),c=[]}u.data=d,r.push(u)}return r}},function(t,i,r){var o=r(122);t.exports=function ParseTilesets(t){for(var i=[],r=[],a=0;a<t.layer.length;a++){var h=t.layer[a],l=h.tilesetName;""!==l&&-1===r.indexOf(l)&&(r.push(l),i.push(new o(l,0,h.tilesize,h.tilesize,0,0)))}return i}},function(t,i,r){var o=r(0),a=r(36),h=r(40),l=r(2),u=r(120),c=r(29),d=r(362),p=r(74),g=r(73),v=r(85),m=r(251),y=r(581),T=r(122),S=new o({initialize:function Tilemap(t,i){this.scene=t,this.tileWidth=i.tileWidth,this.tileHeight=i.tileHeight,this.width=i.width,this.height=i.height,this.orientation=i.orientation,this.renderOrder=i.renderOrder,this.format=i.format,this.version=i.version,this.properties=i.properties,this.widthInPixels=i.widthInPixels,this.heightInPixels=i.heightInPixels,this.imageCollections=i.imageCollections,this.images=i.images,this.layers=i.layers,this.tilesets=i.tilesets,this.objects=i.objects,this.currentLayerIndex=0,this.hexSideLength=i.hexSideLength;var r=this.orientation;this._convert={WorldToTileXY:m.GetWorldToTileXYFunction(r),WorldToTileX:m.GetWorldToTileXFunction(r),WorldToTileY:m.GetWorldToTileYFunction(r),TileToWorldXY:m.GetTileToWorldXYFunction(r),TileToWorldX:m.GetTileToWorldXFunction(r),TileToWorldY:m.GetTileToWorldYFunction(r)}},createBlankDynamicLayer:function createBlankDynamicLayer(t,i,r,o,a,h,l,u){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(t,i,r,o,a,h,l,u)},createDynamicLayer:function createDynamicLayer(t,i,r,o){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(t,i,r,o)},createStaticLayer:function createStaticLayer(t,i,r,o){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(t,i,r,o)},setRenderOrder:function setRenderOrder(t){var i=["right-down","left-down","right-up","left-up"];return"number"==typeof t&&(t=i[t]),i.indexOf(t)>-1&&(this.renderOrder=t),this},addTilesetImage:function addTilesetImage(t,i,r,o,a,l,u){if(void 0===t)return null;if(null==i&&(i=t),!this.scene.sys.textures.exists(i))return console.warn("Invalid Tileset Image: "+i),null;var c=this.scene.sys.textures.get(i),d=this.getTilesetIndex(t);if(null===d&&this.format===h.TILED_JSON)return console.warn("No data found for Tileset: "+t),null;var p=this.tilesets[d];return p?(p.setTileSize(r,o),p.setSpacing(a,l),p.setImage(c),p):(void 0===r&&(r=this.tileWidth),void 0===o&&(o=this.tileHeight),void 0===a&&(a=0),void 0===l&&(l=0),void 0===u&&(u=0),(p=new T(t,u,r,o,a,l)).setImage(c),this.tilesets.push(p),p)},copy:function copy(t,i,r,o,a,h,l,u){return null!==(u=this.getLayer(u))?(m.Copy(t,i,r,o,a,h,l,u),this):null},createBlankLayer:function createBlankLayer(t,i,r,o,a,h,l,c){if(void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=this.width),void 0===h&&(h=this.height),void 0===l&&(l=this.tileWidth),void 0===c&&(c=this.tileHeight),null!==this.getLayerIndex(t))return console.warn("Invalid Tilemap Layer ID: "+t),null;for(var d,p=new u({name:t,tileWidth:l,tileHeight:c,width:a,height:h,orientation:this.orientation}),g=0;g<h;g++){d=[];for(var m=0;m<a;m++)d.push(new v(p,-1,m,g,l,c,this.tileWidth,this.tileHeight));p.data.push(d)}this.layers.push(p),this.currentLayerIndex=this.layers.length-1;var T=new y(this.scene,this,this.currentLayerIndex,i,r,o);return T.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(T),T},createLayer:function createLayer(t,i,r,o){var a=this.getLayerIndex(t);if(null===a)return console.warn("Invalid Tilemap Layer ID: "+t),"string"==typeof t&&console.warn("Valid tilelayer names:\n\t"+this.getTileLayerNames().join(",\n\t")),null;var h=this.layers[a];if(h.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+t),null;this.currentLayerIndex=a,void 0===r&&(r=h.x),void 0===o&&(o=h.y);var l=new y(this.scene,this,a,i,r,o);return l.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(l),l},createFromObjects:function createFromObjects(t,i){var r=[],o=this.getObjectLayer(t);if(!o)return console.warn("createFromObjects: Invalid objectLayerName given: "+t),r;Array.isArray(i)||(i=[i]);for(var h=o.objects,u=0;u<i.length;u++){for(var c,p=i[u],v=l(p,"id",null),m=l(p,"gid",null),y=l(p,"name",null),T=[],S=0;S<h.length;S++)c=h[S],(null===v&&null===m&&null===y||null!==v&&c.id===v||null!==m&&c.gid===m||null!==y&&c.name===y)&&T.push(c);for(var w=l(p,"classType",g),b=l(p,"scene",this.scene),C=l(p,"container",null),A=l(p,"key",null),E=l(p,"frame",null),M=0;M<T.length;M++){c=T[M];var _=new w(b);_.setName(c.name),_.setPosition(c.x,c.y),_.setTexture(A,E),c.width&&(_.displayWidth=c.width),c.height&&(_.displayHeight=c.height);var R={x:_.originX*c.width,y:(_.originY-1)*c.height};if(c.rotation){var P=a(c.rotation);d(R,P),_.rotation=P}if(_.x+=R.x,_.y+=R.y,void 0===c.flippedHorizontal&&void 0===c.flippedVertical||_.setFlip(c.flippedHorizontal,c.flippedVertical),c.visible||(_.visible=!1),Array.isArray(c.properties))c.properties.forEach((function(t){var i=t.name;void 0!==_[i]?_[i]=t.value:_.setData(i,t.value)}));else for(var k in c.properties)void 0!==_[k]?_[k]=c.properties[k]:_.setData(k,c.properties[k]);C?C.add(_):b.add.existing(_),r.push(_)}}return r},createFromTiles:function createFromTiles(t,i,r,o,a,h){return null===(h=this.getLayer(h))?null:m.CreateFromTiles(t,i,r,o,a,h)},fill:function fill(t,i,r,o,a,h,l){return void 0===h&&(h=!0),null===(l=this.getLayer(l))?null:(m.Fill(t,i,r,o,a,h,l),this)},filterObjects:function filterObjects(t,i,r){if("string"==typeof t){var o=t;if(!(t=this.getObjectLayer(t)))return console.warn("No object layer found with the name: "+o),null}return t.objects.filter(i,r)},filterTiles:function filterTiles(t,i,r,o,a,h,l,u){return null===(u=this.getLayer(u))?null:m.FilterTiles(t,i,r,o,a,h,l,u)},findByIndex:function findByIndex(t,i,r,o){return null===(o=this.getLayer(o))?null:m.FindByIndex(t,i,r,o)},findObject:function findObject(t,i,r){if("string"==typeof t){var o=t;if(!(t=this.getObjectLayer(t)))return console.warn("No object layer found with the name: "+o),null}return t.objects.find(i,r)||null},findTile:function findTile(t,i,r,o,a,h,l,u){return null===(u=this.getLayer(u))?null:m.FindTile(t,i,r,o,a,h,l,u)},forEachTile:function forEachTile(t,i,r,o,a,h,l,u){return null===(u=this.getLayer(u))?null:(m.ForEachTile(t,i,r,o,a,h,l,u),this)},getImageIndex:function getImageIndex(t){return this.getIndex(this.images,t)},getImageLayerNames:function getImageLayerNames(){return this.images&&Array.isArray(this.images)?this.images.map((function(t){return t.name})):[]},getIndex:function getIndex(t,i){for(var r=0;r<t.length;r++)if(t[r].name===i)return r;return null},getLayer:function getLayer(t){var i=this.getLayerIndex(t);return null!==i?this.layers[i]:null},getObjectLayer:function getObjectLayer(t){var i=this.getIndex(this.objects,t);return null!==i?this.objects[i]:null},getObjectLayerNames:function getObjectLayerNames(){return this.objects&&Array.isArray(this.objects)?this.objects.map((function(t){return t.name})):[]},getLayerIndex:function getLayerIndex(t){return void 0===t?this.currentLayerIndex:"string"==typeof t?this.getLayerIndexByName(t):"number"==typeof t&&t<this.layers.length?t:t instanceof y?t.layerIndex:null},getLayerIndexByName:function getLayerIndexByName(t){return this.getIndex(this.layers,t)},getTileAt:function getTileAt(t,i,r,o){return null===(o=this.getLayer(o))?null:m.GetTileAt(t,i,r,o)},getTileAtWorldXY:function getTileAtWorldXY(t,i,r,o,a){return null===(a=this.getLayer(a))?null:m.GetTileAtWorldXY(t,i,r,o,a)},getTileLayerNames:function getTileLayerNames(){return this.layers&&Array.isArray(this.layers)?this.layers.map((function(t){return t.name})):[]},getTilesWithin:function getTilesWithin(t,i,r,o,a,h){return null===(h=this.getLayer(h))?null:m.GetTilesWithin(t,i,r,o,a,h)},getTilesWithinShape:function getTilesWithinShape(t,i,r,o){return null===(o=this.getLayer(o))?null:m.GetTilesWithinShape(t,i,r,o)},getTilesWithinWorldXY:function getTilesWithinWorldXY(t,i,r,o,a,h,l){return null===(l=this.getLayer(l))?null:m.GetTilesWithinWorldXY(t,i,r,o,a,h,l)},getTileset:function getTileset(t){var i=this.getIndex(this.tilesets,t);return null!==i?this.tilesets[i]:null},getTilesetIndex:function getTilesetIndex(t){return this.getIndex(this.tilesets,t)},hasTileAt:function hasTileAt(t,i,r){return null===(r=this.getLayer(r))?null:m.HasTileAt(t,i,r)},hasTileAtWorldXY:function hasTileAtWorldXY(t,i,r,o){return null===(o=this.getLayer(o))?null:m.HasTileAtWorldXY(t,i,r,o)},layer:{get:function get(){return this.layers[this.currentLayerIndex]},set:function set(t){this.setLayer(t)}},putTileAt:function putTileAt(t,i,r,o,a){return void 0===o&&(o=!0),null===(a=this.getLayer(a))?null:m.PutTileAt(t,i,r,o,a)},putTileAtWorldXY:function putTileAtWorldXY(t,i,r,o,a,h){return void 0===o&&(o=!0),null===(h=this.getLayer(h))?null:m.PutTileAtWorldXY(t,i,r,o,a,h)},putTilesAt:function putTilesAt(t,i,r,o,a){return void 0===o&&(o=!0),null===(a=this.getLayer(a))?null:(m.PutTilesAt(t,i,r,o,a),this)},randomize:function randomize(t,i,r,o,a,h){return null===(h=this.getLayer(h))?null:(m.Randomize(t,i,r,o,a,h),this)},calculateFacesAt:function calculateFacesAt(t,i,r){return null===(r=this.getLayer(r))?null:(m.CalculateFacesAt(t,i,r),this)},calculateFacesWithin:function calculateFacesWithin(t,i,r,o,a){return null===(a=this.getLayer(a))?null:(m.CalculateFacesWithin(t,i,r,o,a),this)},removeLayer:function removeLayer(t){var i=this.getLayerIndex(t);if(null!==i){p(this.layers,i);for(var r=i;r<this.layers.length;r++)this.layers[r].tilemapLayer&&this.layers[r].tilemapLayer.layerIndex--;return this.currentLayerIndex===i&&(this.currentLayerIndex=0),this}return null},destroyLayer:function destroyLayer(t){var i=this.getLayerIndex(t);return null!==i?((t=this.layers[i]).destroy(),p(this.layers,i),this.currentLayerIndex===i&&(this.currentLayerIndex=0),this):null},removeAllLayers:function removeAllLayers(){for(var t=this.layers,i=0;i<t.length;i++)t[i].tilemapLayer&&t[i].tilemapLayer.destroy(!1);return t.length=0,this.currentLayerIndex=0,this},removeTile:function removeTile(t,i,r){void 0===i&&(i=-1),void 0===r&&(r=!0);var o=[];Array.isArray(t)||(t=[t]);for(var a=0;a<t.length;a++){var h=t[a];o.push(this.removeTileAt(h.x,h.y,!0,r,h.tilemapLayer)),i>-1&&this.putTileAt(i,h.x,h.y,r,h.tilemapLayer)}return o},removeTileAt:function removeTileAt(t,i,r,o,a){return void 0===r&&(r=!0),void 0===o&&(o=!0),null===(a=this.getLayer(a))?null:m.RemoveTileAt(t,i,r,o,a)},removeTileAtWorldXY:function removeTileAtWorldXY(t,i,r,o,a,h){return void 0===r&&(r=!0),void 0===o&&(o=!0),null===(h=this.getLayer(h))?null:m.RemoveTileAtWorldXY(t,i,r,o,a,h)},renderDebug:function renderDebug(t,i,r){return null===(r=this.getLayer(r))?null:(this.orientation===c.ORTHOGONAL&&m.RenderDebug(t,i,r),this)},renderDebugFull:function renderDebugFull(t,i){for(var r=this.layers,o=0;o<r.length;o++)m.RenderDebug(t,i,r[o]);return this},replaceByIndex:function replaceByIndex(t,i,r,o,a,h,l){return null===(l=this.getLayer(l))?null:(m.ReplaceByIndex(t,i,r,o,a,h,l),this)},setCollision:function setCollision(t,i,r,o,a){return void 0===i&&(i=!0),void 0===r&&(r=!0),void 0===a&&(a=!0),null===(o=this.getLayer(o))?null:(m.SetCollision(t,i,r,o,a),this)},setCollisionBetween:function setCollisionBetween(t,i,r,o,a){return void 0===r&&(r=!0),void 0===o&&(o=!0),null===(a=this.getLayer(a))?null:(m.SetCollisionBetween(t,i,r,o,a),this)},setCollisionByProperty:function setCollisionByProperty(t,i,r,o){return void 0===i&&(i=!0),void 0===r&&(r=!0),null===(o=this.getLayer(o))?null:(m.SetCollisionByProperty(t,i,r,o),this)},setCollisionByExclusion:function setCollisionByExclusion(t,i,r,o){return void 0===i&&(i=!0),void 0===r&&(r=!0),null===(o=this.getLayer(o))?null:(m.SetCollisionByExclusion(t,i,r,o),this)},setCollisionFromCollisionGroup:function setCollisionFromCollisionGroup(t,i,r){return void 0===t&&(t=!0),void 0===i&&(i=!0),null===(r=this.getLayer(r))?null:(m.SetCollisionFromCollisionGroup(t,i,r),this)},setTileIndexCallback:function setTileIndexCallback(t,i,r,o){return null===(o=this.getLayer(o))?null:(m.SetTileIndexCallback(t,i,r,o),this)},setTileLocationCallback:function setTileLocationCallback(t,i,r,o,a,h,l){return null===(l=this.getLayer(l))?null:(m.SetTileLocationCallback(t,i,r,o,a,h,l),this)},setLayer:function setLayer(t){var i=this.getLayerIndex(t);return null!==i&&(this.currentLayerIndex=i),this},setBaseTileSize:function setBaseTileSize(t,i){this.tileWidth=t,this.tileHeight=i,this.widthInPixels=this.width*t,this.heightInPixels=this.height*i;for(var r=0;r<this.layers.length;r++){this.layers[r].baseTileWidth=t,this.layers[r].baseTileHeight=i;for(var o=this.layers[r].data,a=this.layers[r].width,h=this.layers[r].height,l=0;l<h;l++)for(var u=0;u<a;u++){var c=o[l][u];null!==c&&c.setSize(void 0,void 0,t,i)}}return this},setLayerTileSize:function setLayerTileSize(t,i,r){if(null===(r=this.getLayer(r)))return this;r.tileWidth=t,r.tileHeight=i;for(var o=r.data,a=r.width,h=r.height,l=0;l<h;l++)for(var u=0;u<a;u++){var c=o[l][u];null!==c&&c.setSize(t,i)}return this},shuffle:function shuffle(t,i,r,o,a){return null===(a=this.getLayer(a))?null:(m.Shuffle(t,i,r,o,a),this)},swapByIndex:function swapByIndex(t,i,r,o,a,h,l){return null===(l=this.getLayer(l))?null:(m.SwapByIndex(t,i,r,o,a,h,l),this)},tileToWorldX:function tileToWorldX(t,i,r){return null===(r=this.getLayer(r))?null:this._convert.TileToWorldX(t,i,r)},tileToWorldY:function tileToWorldY(t,i,r){return null===(r=this.getLayer(r))?null:this._convert.TileToWorldY(t,i,r)},tileToWorldXY:function tileToWorldXY(t,i,r,o,a){return null===(a=this.getLayer(a))?null:this._convert.TileToWorldXY(t,i,r,o,a)},weightedRandomize:function weightedRandomize(t,i,r,o,a,h){return null===(h=this.getLayer(h))?null:(m.WeightedRandomize(i,r,o,a,t,h),this)},worldToTileX:function worldToTileX(t,i,r,o){return null===(o=this.getLayer(o))?null:this._convert.WorldToTileX(t,i,r,o)},worldToTileY:function worldToTileY(t,i,r,o){return null===(o=this.getLayer(o))?null:this._convert.WorldToTileY(t,i,r,o)},worldToTileXY:function worldToTileXY(t,i,r,o,a,h){return null===(h=this.getLayer(h))?null:this._convert.WorldToTileXY(t,i,r,o,a,h)},destroy:function destroy(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});t.exports=S},function(t,i,r){var o=r(0),a=r(11),h=r(15),l=r(251),u=r(1456),c=new o({Extends:h,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Depth,a.Flip,a.GetBounds,a.Origin,a.Pipeline,a.Transform,a.Visible,a.ScrollFactor,u],initialize:function TilemapLayer(t,i,r,o,a,u){h.call(this,t,"TilemapLayer"),this.isTilemap=!0,this.tilemap=i,this.layerIndex=r,this.layer=i.layers[r],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=l.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(o),this.setAlpha(this.layer.alpha),this.setPosition(a,u),this.setOrigin(),this.setSize(i.tileWidth*this.layer.width,i.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function setTilesets(t){var i=[],r=[],o=this.tilemap;Array.isArray(t)||(t=[t]);for(var a=0;a<t.length;a++){var h=t[a];if("string"==typeof h&&(h=o.getTileset(h)),h){r.push(h);for(var l=h.firstgid,u=0;u<h.total;u++)i[l+u]=h}}this.gidMap=i,this.tileset=r},setRenderOrder:function setRenderOrder(t){return"string"==typeof t&&(t=["right-down","left-down","right-up","left-up"].indexOf(t)),t>=0&&t<4&&(this._renderOrder=t),this},calculateFacesAt:function calculateFacesAt(t,i){return l.CalculateFacesAt(t,i,this.layer),this},calculateFacesWithin:function calculateFacesWithin(t,i,r,o){return l.CalculateFacesWithin(t,i,r,o,this.layer),this},createFromTiles:function createFromTiles(t,i,r,o,a){return l.CreateFromTiles(t,i,r,o,a,this.layer)},cull:function cull(t){return this.cullCallback(this.layer,t,this.culledTiles,this._renderOrder)},copy:function copy(t,i,r,o,a,h,u){return l.Copy(t,i,r,o,a,h,u,this.layer),this},fill:function fill(t,i,r,o,a,h){return l.Fill(t,i,r,o,a,h,this.layer),this},filterTiles:function filterTiles(t,i,r,o,a,h,u){return l.FilterTiles(t,i,r,o,a,h,u,this.layer)},findByIndex:function findByIndex(t,i,r){return l.FindByIndex(t,i,r,this.layer)},findTile:function findTile(t,i,r,o,a,h,u){return l.FindTile(t,i,r,o,a,h,u,this.layer)},forEachTile:function forEachTile(t,i,r,o,a,h,u){return l.ForEachTile(t,i,r,o,a,h,u,this.layer),this},getTileAt:function getTileAt(t,i,r){return l.GetTileAt(t,i,r,this.layer)},getTileAtWorldXY:function getTileAtWorldXY(t,i,r,o){return l.GetTileAtWorldXY(t,i,r,o,this.layer)},getTilesWithin:function getTilesWithin(t,i,r,o,a){return l.GetTilesWithin(t,i,r,o,a,this.layer)},getTilesWithinShape:function getTilesWithinShape(t,i,r){return l.GetTilesWithinShape(t,i,r,this.layer)},getTilesWithinWorldXY:function getTilesWithinWorldXY(t,i,r,o,a,h){return l.GetTilesWithinWorldXY(t,i,r,o,a,h,this.layer)},hasTileAt:function hasTileAt(t,i){return l.HasTileAt(t,i,this.layer)},hasTileAtWorldXY:function hasTileAtWorldXY(t,i,r){return l.HasTileAtWorldXY(t,i,r,this.layer)},putTileAt:function putTileAt(t,i,r,o){return l.PutTileAt(t,i,r,o,this.layer)},putTileAtWorldXY:function putTileAtWorldXY(t,i,r,o,a){return l.PutTileAtWorldXY(t,i,r,o,a,this.layer)},putTilesAt:function putTilesAt(t,i,r,o){return l.PutTilesAt(t,i,r,o,this.layer),this},randomize:function randomize(t,i,r,o,a){return l.Randomize(t,i,r,o,a,this.layer),this},removeTileAt:function removeTileAt(t,i,r,o){return l.RemoveTileAt(t,i,r,o,this.layer)},removeTileAtWorldXY:function removeTileAtWorldXY(t,i,r,o,a){return l.RemoveTileAtWorldXY(t,i,r,o,a,this.layer)},renderDebug:function renderDebug(t,i){return l.RenderDebug(t,i,this.layer),this},replaceByIndex:function replaceByIndex(t,i,r,o,a,h){return l.ReplaceByIndex(t,i,r,o,a,h,this.layer),this},setSkipCull:function setSkipCull(t){return void 0===t&&(t=!0),this.skipCull=t,this},setCullPadding:function setCullPadding(t,i){return void 0===t&&(t=1),void 0===i&&(i=1),this.cullPaddingX=t,this.cullPaddingY=i,this},setCollision:function setCollision(t,i,r,o){return l.SetCollision(t,i,r,this.layer,o),this},setCollisionBetween:function setCollisionBetween(t,i,r,o){return l.SetCollisionBetween(t,i,r,o,this.layer),this},setCollisionByProperty:function setCollisionByProperty(t,i,r){return l.SetCollisionByProperty(t,i,r,this.layer),this},setCollisionByExclusion:function setCollisionByExclusion(t,i,r){return l.SetCollisionByExclusion(t,i,r,this.layer),this},setCollisionFromCollisionGroup:function setCollisionFromCollisionGroup(t,i){return l.SetCollisionFromCollisionGroup(t,i,this.layer),this},setTileIndexCallback:function setTileIndexCallback(t,i,r){return l.SetTileIndexCallback(t,i,r,this.layer),this},setTileLocationCallback:function setTileLocationCallback(t,i,r,o,a,h){return l.SetTileLocationCallback(t,i,r,o,a,h,this.layer),this},shuffle:function shuffle(t,i,r,o){return l.Shuffle(t,i,r,o,this.layer),this},swapByIndex:function swapByIndex(t,i,r,o,a,h){return l.SwapByIndex(t,i,r,o,a,h,this.layer),this},tileToWorldX:function tileToWorldX(t,i){return this.tilemap.tileToWorldX(t,i,this)},tileToWorldY:function tileToWorldY(t,i){return this.tilemap.tileToWorldY(t,i,this)},tileToWorldXY:function tileToWorldXY(t,i,r,o){return this.tilemap.tileToWorldXY(t,i,r,o,this)},weightedRandomize:function weightedRandomize(t,i,r,o,a){return l.WeightedRandomize(i,r,o,a,t,this.layer),this},worldToTileX:function worldToTileX(t,i,r){return this.tilemap.worldToTileX(t,i,r,this)},worldToTileY:function worldToTileY(t,i,r){return this.tilemap.worldToTileY(t,i,r,this)},worldToTileXY:function worldToTileXY(t,i,r,o,a){return this.tilemap.worldToTileXY(t,i,r,o,a,this)},destroy:function destroy(t){void 0===t&&(t=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),t&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],h.prototype.destroy.call(this))}});t.exports=c},function(t,i,r){var o=r(0),a=r(2),h=new o({initialize:function TimerEvent(t){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(t)},reset:function reset(t){return this.delay=a(t,"delay",0),this.repeat=a(t,"repeat",0),this.loop=a(t,"loop",!1),this.callback=a(t,"callback",void 0),this.callbackScope=a(t,"callbackScope",this.callback),this.args=a(t,"args",[]),this.timeScale=a(t,"timeScale",1),this.startAt=a(t,"startAt",0),this.paused=a(t,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=-1===this.repeat||this.loop?999999999999:this.repeat,this},getProgress:function getProgress(){return this.elapsed/this.delay},getOverallProgress:function getOverallProgress(){if(this.repeat>0){var t=this.delay+this.delay*this.repeat;return(this.elapsed+this.delay*(this.repeat-this.repeatCount))/t}return this.getProgress()},getRepeatCount:function getRepeatCount(){return this.repeatCount},getElapsed:function getElapsed(){return this.elapsed},getElapsedSeconds:function getElapsedSeconds(){return.001*this.elapsed},getRemaining:function getRemaining(){return this.delay-this.elapsed},getRemainingSeconds:function getRemainingSeconds(){return.001*this.getRemaining()},getOverallRemaining:function getOverallRemaining(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function getOverallRemainingSeconds(){return.001*this.getOverallRemaining()},remove:function remove(t){void 0===t&&(t=!1),this.elapsed=this.delay,this.hasDispatched=!t,this.repeatCount=0},destroy:function destroy(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});t.exports=h},function(t,i,r){var o=r(1465);t.exports=function GetProps(t){var i,r=[];if(t.hasOwnProperty("props"))for(i in t.props)"_"!==i.substr(0,1)&&r.push({key:i,value:t.props[i]});else for(i in t)-1===o.indexOf(i)&&"_"!==i.substr(0,1)&&r.push({key:i,value:t[i]});return r}},function(t,i,r){var o=r(6);t.exports=function GetTweens(t){var i=o(t,"tweens",null);return null===i?[]:("function"==typeof i&&(i=i.call()),Array.isArray(i)||(i=[i]),i)}},function(t,i,r){var o=r(265),a=r(13),h=r(99),l=r(80),u=r(162),c=r(6),d=r(264),p=r(266),g=r(268);t.exports=function NumberTweenBuilder(t,i,r){void 0===r&&(r=o);var v=c(i,"from",0),m=c(i,"to",1),y=[{value:v}],T=u(i,"delay",r.delay),S=u(i,"duration",r.duration),w=c(i,"easeParams",r.easeParams),b=l(c(i,"ease",r.ease),w),C=u(i,"hold",r.hold),A=u(i,"repeat",r.repeat),E=u(i,"repeatDelay",r.repeatDelay),M=h(i,"yoyo",r.yoyo),_=[],R=d("value",m),P=g(y[0],0,"value",R.getEnd,R.getStart,R.getActive,b,T,S,M,C,A,E,!1,!1);P.start=v,P.current=v,P.to=m,_.push(P);var k=new p(t,_,y);k.offset=a(i,"offset",null),k.completeDelay=a(i,"completeDelay",0),k.loop=Math.round(a(i,"loop",0)),k.loopDelay=Math.round(a(i,"loopDelay",0)),k.paused=h(i,"paused",!1),k.useFrames=h(i,"useFrames",!1);for(var O=c(i,"callbackScope",k),L=[k,null],D=p.TYPES,I=0;I<D.length;I++){var B=D[I],N=c(i,B,!1);if(N){var G=c(i,B+"Scope",O),Y=c(i,B+"Params",[]);k.setCallback(B,N,L.concat(Y),G)}}return k}},function(t,i,r){var o=r(80),a=r(6),h=r(14);t.exports=function StaggerBuilder(t,i){var r;void 0===i&&(i={});var l=a(i,"start",0),u=a(i,"ease",null),c=a(i,"grid",null),d=a(i,"from",0),p="first"===d,g="center"===d,v="last"===d,m="number"==typeof d,y=Array.isArray(t),T=y?parseFloat(t[0]):parseFloat(t),S=y?parseFloat(t[1]):0,w=Math.max(T,S);if(y&&(l+=T),c){var b=c[0],C=c[1],A=0,E=0,M=0,_=0,R=[];v?(A=b-1,E=C-1):m?(A=d%b,E=Math.floor(d/b)):g&&(A=(b-1)/2,E=(C-1)/2);for(var P=h.MIN_SAFE_INTEGER,k=0;k<C;k++){R[k]=[];for(var O=0;O<b;O++){M=A-O,_=E-k;var L=Math.sqrt(M*M+_*_);L>P&&(P=L),R[k][O]=L}}}var D=u?o(u):null;return r=c?function result(t,i,r,o){var a,h=0,u=o%b,c=Math.floor(o/b);if(u>=0&&u<b&&c>=0&&c<C&&(h=R[c][u]),y){var d=S-T;a=D?h/P*d*D(h/P):h/P*d}else a=D?h*T*D(h/P):h*T;return a+l}:function result(t,i,r,o,a){var h,u,c;return a--,p?h=o:g?h=Math.abs(a/2-o):v?h=a-o:m&&(h=Math.abs(d-o)),y?(c=g?(S-T)/a*(2*h):(S-T)/a*h,u=D?c*D(h/a):c):u=D?a*w*D(h/a):h*T,u+l},r}},function(t,i,r){var o=r(77),a=r(265),h=r(13),l=r(99),u=r(80),c=r(162),d=r(263),p=r(584),g=r(6),v=r(588),m=r(163);t.exports=function TimelineBuilder(t,i){var r=new v(t);r.completeDelay=h(i,"completeDelay",0),r.loop=Math.round(h(i,"loop",0)),r.loopDelay=Math.round(h(i,"loopDelay",0)),r.paused=l(i,"paused",!1),r.useFrames=l(i,"useFrames",!1);var y=g(i,"callbackScope",r),T=[r],S=g(i,"onStart",!1);if(S){var w=g(i,"onStartScope",y),b=g(i,"onStartParams",[]);r.setCallback("onStart",S,T.concat(b),w)}var C=g(i,"onUpdate",!1);if(C){var A=g(i,"onUpdateScope",y),E=g(i,"onUpdateParams",[]);r.setCallback("onUpdate",C,T.concat(E),A)}var M=g(i,"onLoop",!1);if(M){var _=g(i,"onLoopScope",y),R=g(i,"onLoopParams",[]);r.setCallback("onLoop",M,T.concat(R),_)}var P=g(i,"onYoyo",!1);if(P){var k=g(i,"onYoyoScope",y),O=g(i,"onYoyoParams",[]);r.setCallback("onYoyo",P,T.concat(null,O),k)}var L=g(i,"onComplete",!1);if(L){var D=g(i,"onCompleteScope",y),I=g(i,"onCompleteParams",[]);r.setCallback("onComplete",L,T.concat(I),D)}var B=p(i);if(0===B.length)return r.paused=!0,r;var N=o(a);N.targets=d(i);var G=h(i,"totalDuration",0);N.duration=G>0?Math.floor(G/B.length):c(i,"duration",N.duration),N.delay=c(i,"delay",N.delay),N.easeParams=g(i,"easeParams",N.easeParams),N.ease=u(g(i,"ease",N.ease),N.easeParams),N.hold=c(i,"hold",N.hold),N.repeat=c(i,"repeat",N.repeat),N.repeatDelay=c(i,"repeatDelay",N.repeatDelay),N.yoyo=l(i,"yoyo",N.yoyo),N.flipX=l(i,"flipX",N.flipX),N.flipY=l(i,"flipY",N.flipY);for(var Y=0;Y<B.length;Y++)r.queue(m(r,B[Y],N));return r}},function(t,i,r){var o=r(0),a=r(9),h=r(267),l=r(163),u=r(100),c=new o({Extends:a,initialize:function Timeline(t){a.call(this),this.manager=t,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=u.PENDING_ADD,this._pausedState=u.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function dispatchTimelineEvent(t,i){this.emit(t,this),i&&i.func.apply(i.scope,i.params)},setTimeScale:function setTimeScale(t){return this.timeScale=t,this},getTimeScale:function getTimeScale(){return this.timeScale},isPlaying:function isPlaying(){return this.state===u.ACTIVE},add:function add(t){return this.queue(l(this,t))},queue:function queue(t){return this.isPlaying()||(t.parent=this,t.parentIsTimeline=!0,this.data.push(t),this.totalData=this.data.length),this},hasOffset:function hasOffset(t){return null!==t.offset},isOffsetAbsolute:function isOffsetAbsolute(t){return"number"==typeof t},isOffsetRelative:function isOffsetRelative(t){if("string"===_typeof(t)){var i=t[0];if("-"===i||"+"===i)return!0}return!1},getRelativeOffset:function getRelativeOffset(t,i){var r=t[0],o=parseFloat(t.substr(2)),a=i;switch(r){case"+":a+=o;break;case"-":a-=o}return Math.max(0,a)},calcDuration:function calcDuration(){for(var t=0,i=0,r=0,o=0;o<this.totalData;o++){var a=this.data[o];a.init(),this.hasOffset(a)?this.isOffsetAbsolute(a.offset)?(a.calculatedOffset=a.offset,0===a.offset&&(r=0)):this.isOffsetRelative(a.offset)&&(a.calculatedOffset=this.getRelativeOffset(a.offset,t)):a.calculatedOffset=r,t=a.totalDuration+a.calculatedOffset,i+=a.totalDuration,r+=a.totalDuration}this.duration=i,this.loopCounter=-1===this.loop?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function init(){return this.calcDuration(),this.progress=0,this.totalProgress=0,!this.paused||(this.state=u.PAUSED,!1)},resetTweens:function resetTweens(t){for(var i=0;i<this.totalData;i++)this.data[i].play(t)},setCallback:function setCallback(t,i,r,o){return-1!==c.TYPES.indexOf(t)&&(this.callbacks[t]={func:i,scope:o,params:r}),this},makeActive:function makeActive(t){return this.manager.makeActive(t)},play:function play(){if(this.state!==u.ACTIVE){if(this.paused)return this.paused=!1,void this.manager.makeActive(this);this.resetTweens(!1),this.state=u.ACTIVE,this.dispatchTimelineEvent(h.TIMELINE_START,this.callbacks.onStart)}},nextState:function nextState(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=u.LOOP_DELAY):(this.state=u.ACTIVE,this.dispatchTimelineEvent(h.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=u.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=u.PENDING_REMOVE,this.dispatchTimelineEvent(h.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function update(t,i){if(this.state!==u.PAUSED){switch(this.useFrames&&(i=1*this.manager.timeScale),i*=this.timeScale,this.elapsed+=i,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=i,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case u.ACTIVE:for(var r=this.totalData,o=0;o<this.totalData;o++)this.data[o].update(t,i)&&r--;this.dispatchTimelineEvent(h.TIMELINE_UPDATE,this.callbacks.onUpdate),0===r&&this.nextState();break;case u.LOOP_DELAY:this.countdown-=i,this.countdown<=0&&(this.state=u.ACTIVE,this.dispatchTimelineEvent(h.TIMELINE_LOOP,this.callbacks.onLoop));break;case u.COMPLETE_DELAY:this.countdown-=i,this.countdown<=0&&(this.state=u.PENDING_REMOVE,this.dispatchTimelineEvent(h.TIMELINE_COMPLETE,this.callbacks.onComplete))}return this.state===u.PENDING_REMOVE}},stop:function stop(){this.state=u.PENDING_REMOVE},pause:function pause(){if(this.state!==u.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=u.PAUSED,this.emit(h.TIMELINE_PAUSE,this),this},resume:function resume(){return this.state===u.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(h.TIMELINE_RESUME,this)),this},hasTarget:function hasTarget(t){for(var i=0;i<this.data.length;i++)if(this.data[i].hasTarget(t))return!0;return!1},destroy:function destroy(){for(var t=0;t<this.data.length;t++)this.data[t].stop()}});c.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],t.exports=c},function(t,i,r){var o=r(86),a=r(41),h=r(32),l=r(2),u=r(64),c={parseBody:function parseBody(t,i,r,o){void 0===o&&(o={});for(var u=l(r,"fixtures",[]),c=[],d=0;d<u.length;d++)for(var p=this.parseFixture(u[d]),g=0;g<p.length;g++)c.push(p[g]);var v=h.clone(r,!0);h.extend(v,o,!0),delete v.fixtures,delete v.type;var m=a.create(v);return a.setParts(m,c),a.setPosition(m,{x:t,y:i}),m},parseFixture:function parseFixture(t){var i,r=h.extend({},!1,t);if(delete r.circle,delete r.vertices,t.circle){var a=l(t.circle,"x"),u=l(t.circle,"y"),c=l(t.circle,"radius");i=[o.circle(a,u,c,r)]}else t.vertices&&(i=this.parseVertices(t.vertices,r));return i},parseVertices:function parseVertices(t,i){void 0===i&&(i={});for(var r=[],l=0;l<t.length;l++)u.clockwiseSort(t[l]),r.push(a.create(h.extend({position:u.centre(t[l]),vertices:t[l]},i)));return o.flagCoincidentParts(r)}};t.exports=c},function(t,i,r){var o=r(86),a=r(41),h={parseBody:function parseBody(t,i,r,h){var l;void 0===h&&(h={});var u=r.vertices;if(1===u.length)h.vertices=u[0],l=a.create(h),o.flagCoincidentParts(l.parts);else{for(var c=[],d=0;d<u.length;d++){var p=a.create({vertices:u[d]});c.push(p)}o.flagCoincidentParts(c),h.parts=c,l=a.create(h)}return l.label=r.label,a.setPosition(l,{x:t,y:i}),l}};t.exports=h},function(t,i,r){var o={};t.exports=o;var a=r(118),h=r(128),l=r(32),u=r(41),c=r(86);o.stack=function(t,i,r,o,h,l,c){for(var d,p=a.create({label:"Stack"}),g=t,v=i,m=0,y=0;y<o;y++){for(var T=0,S=0;S<r;S++){var w=c(g,v,S,y,d,m);if(w){var b=w.bounds.max.y-w.bounds.min.y,C=w.bounds.max.x-w.bounds.min.x;b>T&&(T=b),u.translate(w,{x:.5*C,y:.5*b}),g=w.bounds.max.x+h,a.addBody(p,w),d=w,m+=1}else g+=h}v+=T+l,g=t}return p},o.chain=function(t,i,r,o,u,c){for(var d=t.bodies,p=1;p<d.length;p++){var g=d[p-1],v=d[p],m=g.bounds.max.y-g.bounds.min.y,y=g.bounds.max.x-g.bounds.min.x,T=v.bounds.max.y-v.bounds.min.y,S={bodyA:g,pointA:{x:y*i,y:m*r},bodyB:v,pointB:{x:(v.bounds.max.x-v.bounds.min.x)*o,y:T*u}},w=l.extend(S,c);a.addConstraint(t,h.create(w))}return t.label+=" Chain",t},o.mesh=function(t,i,r,o,u){var c,d,p,g,v,m=t.bodies;for(c=0;c<r;c++){for(d=1;d<i;d++)p=m[d-1+c*i],g=m[d+c*i],a.addConstraint(t,h.create(l.extend({bodyA:p,bodyB:g},u)));if(c>0)for(d=0;d<i;d++)p=m[d+(c-1)*i],g=m[d+c*i],a.addConstraint(t,h.create(l.extend({bodyA:p,bodyB:g},u))),o&&d>0&&(v=m[d-1+(c-1)*i],a.addConstraint(t,h.create(l.extend({bodyA:v,bodyB:g},u)))),o&&d<i-1&&(v=m[d+1+(c-1)*i],a.addConstraint(t,h.create(l.extend({bodyA:v,bodyB:g},u))))}return t.label+=" Mesh",t},o.pyramid=function(t,i,r,a,h,l,c){return o.stack(t,i,r,a,h,l,(function(i,o,l,d,p,g){var v=Math.min(a,Math.ceil(r/2)),m=p?p.bounds.max.x-p.bounds.min.x:0;if(!(d>v||l<(d=v-d)||l>r-1-d))return 1===g&&u.translate(p,{x:(l+(r%2==1?1:-1))*m,y:0}),c(t+(p?l*m:0)+l*h,o,l,d,p,g)}))},o.newtonsCradle=function(t,i,r,o,l){for(var u=a.create({label:"Newtons Cradle"}),d=0;d<r;d++){var p=c.circle(t+d*(1.9*o),i+l,o,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),g=h.create({pointA:{x:t+d*(1.9*o),y:i},bodyB:p});a.addBody(u,p),a.addConstraint(u,g)}return u},o.car=function(t,i,r,o,l){var d=u.nextGroup(!0),p=.5*-r+20,g=.5*r-20,v=a.create({label:"Car"}),m=c.rectangle(t,i,r,o,{collisionFilter:{group:d},chamfer:{radius:.5*o},density:2e-4}),y=c.circle(t+p,i+0,l,{collisionFilter:{group:d},friction:.8}),T=c.circle(t+g,i+0,l,{collisionFilter:{group:d},friction:.8}),S=h.create({bodyB:m,pointB:{x:p,y:0},bodyA:y,stiffness:1,length:0}),w=h.create({bodyB:m,pointB:{x:g,y:0},bodyA:T,stiffness:1,length:0});return a.addBody(v,m),a.addBody(v,y),a.addBody(v,T),a.addConstraint(v,S),a.addConstraint(v,w),v},o.softBody=function(t,i,r,a,h,u,d,p,g,v){g=l.extend({inertia:1/0},g),v=l.extend({stiffness:.2,render:{type:"line",anchors:!1}},v);var m=o.stack(t,i,r,a,h,u,(function(t,i){return c.circle(t,i,p,g)}));return o.mesh(m,r,a,d,v),m.label="Soft Body",m}},function(t,i,r){var o={};t.exports=o,r(84);var a=r(32);o.pathToVertices=function(t,i){"undefined"==typeof window||"SVGPathSeg"in window||a.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var r,h,l,u,c,d,p,g,v,m,y,T=[],S=0,w=0,b=0;i=i||15;var C=function addPoint(t,i,r){var o=r%2==1&&r>1;if(!v||t!=v.x||i!=v.y){v&&o?(m=v.x,y=v.y):(m=0,y=0);var a={x:m+t,y:y+i};!o&&v||(v=a),T.push(a),w=m+t,b=y+i}},A=function addSegmentPoint(t){var i=t.pathSegTypeAsLetter.toUpperCase();if("Z"!==i){switch(i){case"M":case"L":case"T":case"C":case"S":case"Q":w=t.x,b=t.y;break;case"H":w=t.x;break;case"V":b=t.y}C(w,b,t.pathSegType)}};for(o._svgPathToAbsolute(t),l=t.getTotalLength(),d=[],r=0;r<t.pathSegList.numberOfItems;r+=1)d.push(t.pathSegList.getItem(r));for(p=d.concat();S<l;){if((c=d[t.getPathSegAtLength(S)])!=g){for(;p.length&&p[0]!=c;)A(p.shift());g=c}switch(c.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":u=t.getPointAtLength(S),C(u.x,u.y,0)}S+=i}for(r=0,h=p.length;r<h;++r)A(p[r]);return T},o._svgPathToAbsolute=function(t){for(var i,r,o,a,h,l,u=t.pathSegList,c=0,d=0,p=u.numberOfItems,g=0;g<p;++g){var v=u.getItem(g),m=v.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(m))"x"in v&&(c=v.x),"y"in v&&(d=v.y);else switch("x1"in v&&(o=c+v.x1),"x2"in v&&(h=c+v.x2),"y1"in v&&(a=d+v.y1),"y2"in v&&(l=d+v.y2),"x"in v&&(c+=v.x),"y"in v&&(d+=v.y),m){case"m":u.replaceItem(t.createSVGPathSegMovetoAbs(c,d),g);break;case"l":u.replaceItem(t.createSVGPathSegLinetoAbs(c,d),g);break;case"h":u.replaceItem(t.createSVGPathSegLinetoHorizontalAbs(c),g);break;case"v":u.replaceItem(t.createSVGPathSegLinetoVerticalAbs(d),g);break;case"c":u.replaceItem(t.createSVGPathSegCurvetoCubicAbs(c,d,o,a,h,l),g);break;case"s":u.replaceItem(t.createSVGPathSegCurvetoCubicSmoothAbs(c,d,h,l),g);break;case"q":u.replaceItem(t.createSVGPathSegCurvetoQuadraticAbs(c,d,o,a),g);break;case"t":u.replaceItem(t.createSVGPathSegCurvetoQuadraticSmoothAbs(c,d),g);break;case"a":u.replaceItem(t.createSVGPathSegArcAbs(c,d,v.r1,v.r2,v.angle,v.largeArcFlag,v.sweepFlag),g);break;case"z":case"Z":c=i,d=r}"M"!=m&&"m"!=m||(i=c,r=d)}}},function(t,i,r){var o=r(86),a=r(41),h=r(0),l=r(249),u=r(9),c=r(2),d=r(126),p=r(64),g=new h({Extends:u,Mixins:[l.Bounce,l.Collision,l.Friction,l.Gravity,l.Mass,l.Sensor,l.Sleep,l.Static],initialize:function MatterTileBody(t,i,r){u.call(this),this.tile=i,this.world=t,i.physics.matterBody&&i.physics.matterBody.destroy(),i.physics.matterBody=this;var o=c(r,"body",null),a=c(r,"addToWorld",!0);if(o)this.setBody(o,a);else{var h=i.getCollisionGroup();c(h,"objects",[]).length>0?this.setFromTileCollision(r):this.setFromTileRectangle(r)}},setFromTileRectangle:function setFromTileRectangle(t){void 0===t&&(t={}),d(t,"isStatic")||(t.isStatic=!0),d(t,"addToWorld")||(t.addToWorld=!0);var i=this.tile.getBounds(),r=i.x+i.width/2,a=i.y+i.height/2,h=o.rectangle(r,a,i.width,i.height,t);return this.setBody(h,t.addToWorld),this},setFromTileCollision:function setFromTileCollision(t){void 0===t&&(t={}),d(t,"isStatic")||(t.isStatic=!0),d(t,"addToWorld")||(t.addToWorld=!0);for(var i=this.tile.tilemapLayer.scaleX,r=this.tile.tilemapLayer.scaleY,h=this.tile.getLeft(),l=this.tile.getTop(),u=this.tile.getCollisionGroup(),g=c(u,"objects",[]),v=[],m=0;m<g.length;m++){var y=g[m],T=h+y.x*i,S=l+y.y*r,w=y.width*i,b=y.height*r,C=null;if(y.rectangle)C=o.rectangle(T+w/2,S+b/2,w,b,t);else if(y.ellipse)C=o.circle(T+w/2,S+b/2,w/2,t);else if(y.polygon||y.polyline){var A=(y.polygon?y.polygon:y.polyline).map((function(t){return{x:t.x*i,y:t.y*r}})),E=p.create(A),M=p.centre(E);T+=M.x,S+=M.y,C=o.fromVertices(T,S,E,t)}C&&v.push(C)}return 1===v.length?this.setBody(v[0],t.addToWorld):v.length>1&&(t.parts=v,this.setBody(a.create(t),t.addToWorld)),this},setBody:function setBody(t,i){return void 0===i&&(i=!0),this.body&&this.removeBody(),this.body=t,this.body.gameObject=this,i&&this.world.add(this.body),this},removeBody:function removeBody(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function destroy(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});t.exports=g},function(t,i,r){var o=r(1399);o.Body=r(41),o.Composite=r(118),o.World=r(596),o.Detector=r(273),o.Grid=r(597),o.Pairs=r(598),o.Pair=r(250),o.Query=r(1400),o.Resolver=r(599),o.SAT=r(274),o.Constraint=r(128),o.Common=r(32),o.Engine=r(1401),o.Events=r(166),o.Sleeping=r(165),o.Plugin=r(595),o.Bodies=r(86),o.Composites=r(591),o.Axes=r(271),o.Bounds=r(84),o.Svg=r(592),o.Vector=r(83),o.Vertices=r(64),o.World.add=o.Composite.add,o.World.remove=o.Composite.remove,o.World.addComposite=o.Composite.addComposite,o.World.addBody=o.Composite.addBody,o.World.addConstraint=o.Composite.addConstraint,o.World.clear=o.Composite.clear,t.exports=o},function(t,i,r){var o={};t.exports=o;var a=r(32);o._registry={},o.register=function(t){if(o.isPlugin(t)||a.warn("Plugin.register:",o.toString(t),"does not implement all required fields."),t.name in o._registry){var i=o._registry[t.name],r=o.versionParse(t.version).number,h=o.versionParse(i.version).number;r>h?(a.warn("Plugin.register:",o.toString(i),"was upgraded to",o.toString(t)),o._registry[t.name]=t):r<h?a.warn("Plugin.register:",o.toString(i),"can not be downgraded to",o.toString(t)):t!==i&&a.warn("Plugin.register:",o.toString(t),"is already registered to different plugin object")}else o._registry[t.name]=t;return t},o.resolve=function(t){return o._registry[o.dependencyParse(t).name]},o.toString=function(t){return"string"==typeof t?t:(t.name||"anonymous")+"@"+(t.version||t.range||"0.0.0")},o.isPlugin=function(t){return t&&t.name&&t.version&&t.install},o.isUsed=function(t,i){return t.used.indexOf(i)>-1},o.isFor=function(t,i){var r=t.for&&o.dependencyParse(t.for);return!t.for||i.name===r.name&&o.versionSatisfies(i.version,r.range)},o.use=function(t,i){if(t.uses=(t.uses||[]).concat(i||[]),0!==t.uses.length){for(var r=o.dependencies(t),h=a.topologicalSort(r),l=[],u=0;u<h.length;u+=1)if(h[u]!==t.name){var c=o.resolve(h[u]);c?o.isUsed(t,c.name)||(o.isFor(c,t)||(a.warn("Plugin.use:",o.toString(c),"is for",c.for,"but installed on",o.toString(t)+"."),c._warned=!0),c.install?c.install(t):(a.warn("Plugin.use:",o.toString(c),"does not specify an install function."),c._warned=!0),c._warned?(l.push("🔶 "+o.toString(c)),delete c._warned):l.push("✅ "+o.toString(c)),t.used.push(c.name)):l.push("❌ "+h[u])}l.length>0&&!c.silent&&a.info(l.join("  "))}else a.warn("Plugin.use:",o.toString(t),"does not specify any dependencies to install.")},o.dependencies=function(t,i){var r=o.dependencyParse(t),h=r.name;if(!(h in(i=i||{}))){t=o.resolve(t)||t,i[h]=a.map(t.uses||[],(function(i){o.isPlugin(i)&&o.register(i);var h=o.dependencyParse(i),l=o.resolve(i);return l&&!o.versionSatisfies(l.version,h.range)?(a.warn("Plugin.dependencies:",o.toString(l),"does not satisfy",o.toString(h),"used by",o.toString(r)+"."),l._warned=!0,t._warned=!0):l||(a.warn("Plugin.dependencies:",o.toString(i),"used by",o.toString(r),"could not be resolved."),t._warned=!0),h.name}));for(var l=0;l<i[h].length;l+=1)o.dependencies(i[h][l],i);return i}},o.dependencyParse=function(t){return a.isString(t)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/.test(t)||a.warn("Plugin.dependencyParse:",t,"is not a valid dependency string."),{name:t.split("@")[0],range:t.split("@")[1]||"*"}):{name:t.name,range:t.range||t.version}},o.versionParse=function(t){/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/.test(t)||a.warn("Plugin.versionParse:",t,"is not a valid version or range.");var i=t.split("-");t=i[0];var r=isNaN(Number(t[0])),o=r?t.substr(1):t,h=a.map(o.split("."),(function(t){return Number(t)}));return{isRange:r,version:o,range:t,operator:r?t[0]:"",parts:h,prerelease:i[1],number:1e8*h[0]+1e4*h[1]+h[2]}},o.versionSatisfies=function(t,i){i=i||"*";var r=o.versionParse(i),a=r.parts,h=o.versionParse(t),l=h.parts;if(r.isRange){if("*"===r.operator||"*"===t)return!0;if("~"===r.operator)return l[0]===a[0]&&l[1]===a[1]&&l[2]>=a[2];if("^"===r.operator)return a[0]>0?l[0]===a[0]&&h.number>=r.number:a[1]>0?l[1]===a[1]&&l[2]>=a[2]:l[2]===a[2]}return t===i||"*"===t}},function(t,i,r){var o={};t.exports=o;var a=r(118);r(128);var h=r(32);o.create=function(t){var i=a.create(),r={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return h.extend(i,r,t)}},function(t,i,r){var o={};t.exports=o;var a=r(250),h=r(273),l=r(32);o.create=function(t){var i={controller:o,detector:h.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return l.extend(i,t)},o.update=function(t,i,r,a){var h,l,u,c,d,p=r.world,g=t.buckets,v=!1,m=r.metrics;for(m.broadphaseTests=0,h=0;h<i.length;h++){var y=i[h];if((!y.isSleeping||a)&&!(y.bounds.max.x<p.bounds.min.x||y.bounds.min.x>p.bounds.max.x||y.bounds.max.y<p.bounds.min.y||y.bounds.min.y>p.bounds.max.y)){var T=o._getRegion(t,y);if(!y.region||T.id!==y.region.id||a){m.broadphaseTests+=1,y.region&&!a||(y.region=T);var S=o._regionUnion(T,y.region);for(l=S.startCol;l<=S.endCol;l++)for(u=S.startRow;u<=S.endRow;u++){c=g[d=o._getBucketId(l,u)];var w=l>=T.startCol&&l<=T.endCol&&u>=T.startRow&&u<=T.endRow,b=l>=y.region.startCol&&l<=y.region.endCol&&u>=y.region.startRow&&u<=y.region.endRow;!w&&b&&b&&c&&o._bucketRemoveBody(t,c,y),(y.region===T||w&&!b||a)&&(c||(c=o._createBucket(g,d)),o._bucketAddBody(t,c,y))}y.region=T,v=!0}}}v&&(t.pairsList=o._createActivePairsList(t))},o.clear=function(t){t.buckets={},t.pairs={},t.pairsList=[]},o._regionUnion=function(t,i){var r=Math.min(t.startCol,i.startCol),a=Math.max(t.endCol,i.endCol),h=Math.min(t.startRow,i.startRow),l=Math.max(t.endRow,i.endRow);return o._createRegion(r,a,h,l)},o._getRegion=function(t,i){var r=i.bounds,a=Math.floor(r.min.x/t.bucketWidth),h=Math.floor(r.max.x/t.bucketWidth),l=Math.floor(r.min.y/t.bucketHeight),u=Math.floor(r.max.y/t.bucketHeight);return o._createRegion(a,h,l,u)},o._createRegion=function(t,i,r,o){return{id:t+","+i+","+r+","+o,startCol:t,endCol:i,startRow:r,endRow:o}},o._getBucketId=function(t,i){return"C"+t+"R"+i},o._createBucket=function(t,i){return t[i]=[]},o._bucketAddBody=function(t,i,r){for(var o=0;o<i.length;o++){var h=i[o];if(!(r.id===h.id||r.isStatic&&h.isStatic)){var l=a.id(r,h),u=t.pairs[l];u?u[2]+=1:t.pairs[l]=[r,h,1]}}i.push(r)},o._bucketRemoveBody=function(t,i,r){i.splice(i.indexOf(r),1);for(var o=0;o<i.length;o++){var h=i[o],l=a.id(r,h),u=t.pairs[l];u&&(u[2]-=1)}},o._createActivePairsList=function(t){var i,r,o=[];i=l.keys(t.pairs);for(var a=0;a<i.length;a++)(r=t.pairs[i[a]])[2]>0?o.push(r):delete t.pairs[i[a]];return o}},function(t,i,r){var o={};t.exports=o;var a=r(250),h=r(32);o._pairMaxIdleLife=1e3,o.create=function(t){return h.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},t)},o.update=function(t,i,r){var o,h,l,u,c=t.list,d=t.table,p=t.collisionStart,g=t.collisionEnd,v=t.collisionActive;for(p.length=0,g.length=0,v.length=0,u=0;u<c.length;u++)c[u].confirmedActive=!1;for(u=0;u<i.length;u++)(o=i[u]).collided&&((l=d[h=a.id(o.bodyA,o.bodyB)])?(l.isActive?v.push(l):p.push(l),a.update(l,o,r),l.confirmedActive=!0):(l=a.create(o,r),d[h]=l,p.push(l),c.push(l)));for(u=0;u<c.length;u++)(l=c[u]).isActive&&!l.confirmedActive&&(a.setActive(l,!1,r),g.push(l))},o.removeOld=function(t,i){var r,a,h,l,u=t.list,c=t.table,d=[];for(l=0;l<u.length;l++)(a=(r=u[l]).collision).bodyA.isSleeping||a.bodyB.isSleeping?r.timeUpdated=i:i-r.timeUpdated>o._pairMaxIdleLife&&d.push(l);for(l=0;l<d.length;l++)delete c[(r=u[h=d[l]-l]).id],u.splice(h,1)},o.clear=function(t){return t.table={},t.list.length=0,t.collisionStart.length=0,t.collisionActive.length=0,t.collisionEnd.length=0,t}},function(t,i,r){var o={};t.exports=o;var a=r(64),h=r(83),l=r(32),u=r(84);o._restingThresh=4,o._restingThreshTangent=6,o._positionDampen=.9,o._positionWarming=.8,o._frictionNormalMultiplier=5,o.preSolvePosition=function(t){var i,r,o;for(i=0;i<t.length;i++)(r=t[i]).isActive&&(o=r.activeContacts.length,r.collision.parentA.totalContacts+=o,r.collision.parentB.totalContacts+=o)},o.solvePosition=function(t,i,r){var a,h,l,u,c,d,p,g,v,m,y,T,S,w,b,C,A=r*o._positionDampen;for(a=0;a<i.length;a++){var E=i[a];E.previousPositionImpulse.x=E.positionImpulse.x,E.previousPositionImpulse.y=E.positionImpulse.y}for(a=0;a<t.length;a++)(u=t[a]).isActive&&!u.isSensor&&(d=(c=u.collision).parentA,p=c.parentB,g=c.normal,y=d.previousPositionImpulse,T=p.previousPositionImpulse,m=c.penetration,w=T.x-y.x+m.x,b=T.y-y.y+m.y,v=(h=g.x)*w+(l=g.y)*b,u.separation=v,C=(v-u.slop)*A,(d.isStatic||p.isStatic)&&(C*=2),d.isStatic||d.isSleeping||(S=C/d.totalContacts,d.positionImpulse.x+=h*S,d.positionImpulse.y+=l*S),p.isStatic||p.isSleeping||(S=C/p.totalContacts,p.positionImpulse.x-=h*S,p.positionImpulse.y-=l*S))},o.postSolvePosition=function(t){for(var i=0;i<t.length;i++){var r=t[i];if(r.totalContacts=0,0!==r.positionImpulse.x||0!==r.positionImpulse.y){for(var l=0;l<r.parts.length;l++){var c=r.parts[l];a.translate(c.vertices,r.positionImpulse),u.update(c.bounds,c.vertices,r.velocity),c.position.x+=r.positionImpulse.x,c.position.y+=r.positionImpulse.y}r.positionPrev.x+=r.positionImpulse.x,r.positionPrev.y+=r.positionImpulse.y,h.dot(r.positionImpulse,r.velocity)<0?(r.positionImpulse.x=0,r.positionImpulse.y=0):(r.positionImpulse.x*=o._positionWarming,r.positionImpulse.y*=o._positionWarming)}}},o.preSolveVelocity=function(t){var i,r,o,a,l,u,c,d,p,g,v,m,y,T,S=h._temp[0],w=h._temp[1];for(i=0;i<t.length;i++)if((o=t[i]).isActive&&!o.isSensor)for(a=o.activeContacts,u=(l=o.collision).parentA,c=l.parentB,d=l.normal,p=l.tangent,r=0;r<a.length;r++)v=(g=a[r]).vertex,m=g.normalImpulse,y=g.tangentImpulse,0===m&&0===y||(S.x=d.x*m+p.x*y,S.y=d.y*m+p.y*y,u.isStatic||u.isSleeping||(T=h.sub(v,u.position,w),u.positionPrev.x+=S.x*u.inverseMass,u.positionPrev.y+=S.y*u.inverseMass,u.anglePrev+=h.cross(T,S)*u.inverseInertia),c.isStatic||c.isSleeping||(T=h.sub(v,c.position,w),c.positionPrev.x-=S.x*c.inverseMass,c.positionPrev.y-=S.y*c.inverseMass,c.anglePrev-=h.cross(T,S)*c.inverseInertia))},o.solveVelocity=function(t,i){for(var r=i*i,a=h._temp[0],u=h._temp[1],c=h._temp[2],d=h._temp[3],p=h._temp[4],g=h._temp[5],v=0;v<t.length;v++){var m=t[v];if(m.isActive&&!m.isSensor){var y=m.collision,T=y.parentA,S=y.parentB,w=y.normal,b=y.tangent,C=m.activeContacts,A=1/C.length;T.velocity.x=T.position.x-T.positionPrev.x,T.velocity.y=T.position.y-T.positionPrev.y,S.velocity.x=S.position.x-S.positionPrev.x,S.velocity.y=S.position.y-S.positionPrev.y,T.angularVelocity=T.angle-T.anglePrev,S.angularVelocity=S.angle-S.anglePrev;for(var E=0;E<C.length;E++){var M=C[E],_=M.vertex,R=h.sub(_,T.position,u),P=h.sub(_,S.position,c),k=h.add(T.velocity,h.mult(h.perp(R),T.angularVelocity),d),O=h.add(S.velocity,h.mult(h.perp(P),S.angularVelocity),p),L=h.sub(k,O,g),D=h.dot(w,L),I=h.dot(b,L),B=Math.abs(I),N=l.sign(I),G=(1+m.restitution)*D,Y=l.clamp(m.separation+D,0,1)*o._frictionNormalMultiplier,U=I,X=1/0;B>m.friction*m.frictionStatic*Y*r&&(X=B,U=l.clamp(m.friction*N*r,-X,X));var V=h.cross(R,w),z=h.cross(P,w),W=A/(T.inverseMass+S.inverseMass+T.inverseInertia*V*V+S.inverseInertia*z*z);if(G*=W,U*=W,D<0&&D*D>o._restingThresh*r)M.normalImpulse=0;else{var H=M.normalImpulse;M.normalImpulse=Math.min(M.normalImpulse+G,0),G=M.normalImpulse-H}if(I*I>o._restingThreshTangent*r)M.tangentImpulse=0;else{var j=M.tangentImpulse;M.tangentImpulse=l.clamp(M.tangentImpulse+U,-X,X),U=M.tangentImpulse-j}a.x=w.x*G+b.x*U,a.y=w.y*G+b.y*U,T.isStatic||T.isSleeping||(T.positionPrev.x+=a.x*T.inverseMass,T.positionPrev.y+=a.y*T.inverseMass,T.anglePrev+=h.cross(R,a)*T.inverseInertia),S.isStatic||S.isSleeping||(S.positionPrev.x-=a.x*S.inverseMass,S.positionPrev.y-=a.y*S.inverseMass,S.anglePrev-=h.cross(P,a)*S.inverseInertia)}}}}},function(t,i){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(o){"object"===("undefined"==typeof window?"undefined":_typeof(window))&&(r=window)}t.exports=r},function(t,i,r){var o=r(276);t.exports=function AlignTo(t,i,r,a){for(var h=t[0],l=1;l<t.length;l++){var u=t[l];o(u,h,i,r,a),h=u}return t}},function(t,i,r){var o=r(46);t.exports=function Angle(t,i,r,a,h){return o(t,"angle",i,r,a,h)}},function(t,i){t.exports=function Call(t,i,r){for(var o=0;o<t.length;o++){var a=t[o];i.call(r,a)}return t}},function(t,i){t.exports=function GetFirst(t,i,r){void 0===r&&(r=0);for(var o=r;o<t.length;o++){var a=t[o],h=!0;for(var l in i)a[l]!==i[l]&&(h=!1);if(h)return a}return null}},function(t,i){t.exports=function GetLast(t,i,r){void 0===r&&(r=0);for(var o=r;o<t.length;o++){var a=t[o],h=!0;for(var l in i)a[l]!==i[l]&&(h=!1);if(h)return a}return null}},function(t,i,r){var o=r(289),a=r(123),h=r(2),l=r(1),u=new(r(129))({sys:{queueDepthSort:l,events:{once:l}}},0,0,1,1);t.exports=function GridAlign(t,i){void 0===i&&(i={});var r=i.hasOwnProperty("width"),l=i.hasOwnProperty("height"),c=h(i,"width",-1),d=h(i,"height",-1),p=h(i,"cellWidth",1),g=h(i,"cellHeight",p),v=h(i,"position",a.TOP_LEFT),m=h(i,"x",0),y=h(i,"y",0),T=0,S=0,w=c*p,b=d*g;u.setPosition(m,y),u.setSize(p,g);for(var C=0;C<t.length;C++)if(o(t[C],u,v),r&&-1===c)u.x+=p;else if(l&&-1===d)u.y+=g;else if(l&&!r){if(S+=g,u.y+=g,S===b&&(S=0,T+=p,u.y=y,u.x+=p,T===w))break}else if(T+=p,u.x+=p,T===w&&(T=0,S+=g,u.x=m,u.y+=g,S===b))break;return t}},function(t,i,r){var o=r(18),a={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function clearAlpha(){return this.setAlpha(1)},setAlpha:function setAlpha(t,i,r,a){return void 0===t&&(t=1),void 0===i?this.alpha=t:(this._alphaTL=o(t,0,1),this._alphaTR=o(i,0,1),this._alphaBL=o(r,0,1),this._alphaBR=o(a,0,1)),this},alpha:{get:function get(){return this._alpha},set:function set(t){var i=o(t,0,1);this._alpha=i,this._alphaTL=i,this._alphaTR=i,this._alphaBL=i,this._alphaBR=i,0===i?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function get(){return this._alphaTL},set:function set(t){var i=o(t,0,1);this._alphaTL=i,0!==i&&(this.renderFlags|=2)}},alphaTopRight:{get:function get(){return this._alphaTR},set:function set(t){var i=o(t,0,1);this._alphaTR=i,0!==i&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function get(){return this._alphaBL},set:function set(t){var i=o(t,0,1);this._alphaBL=i,0!==i&&(this.renderFlags|=2)}},alphaBottomRight:{get:function get(){return this._alphaBR},set:function set(t){var i=o(t,0,1);this._alphaBR=i,0!==i&&(this.renderFlags|=2)}}};t.exports=a},function(t,i){t.exports={width:0,height:0,displayWidth:{get:function get(){return this.scaleX*this.width},set:function set(t){this.scaleX=t/this.width}},displayHeight:{get:function get(){return this.scaleY*this.height},set:function set(t){this.scaleY=t/this.height}},setSize:function setSize(t,i){return this.width=t,this.height=i,this},setDisplaySize:function setDisplaySize(t,i){return this.displayWidth=t,this.displayHeight=i,this}}},function(t,i){var r={texture:null,frame:null,isCropped:!1,setCrop:function setCrop(t,i,r,o){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,i,r,o,this.flipX,this.flipY);else{var a=t;this.frame.setCropUVs(this._crop,a.x,a.y,a.width,a.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function resetCropObject(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};t.exports=r},function(t,i){t.exports={flipX:!1,flipY:!1,toggleFlipX:function toggleFlipX(){return this.flipX=!this.flipX,this},toggleFlipY:function toggleFlipY(){return this.flipY=!this.flipY,this},setFlipX:function setFlipX(t){return this.flipX=t,this},setFlipY:function setFlipY(t){return this.flipY=t,this},setFlip:function setFlip(t,i){return this.flipX=t,this.flipY=i,this},resetFlip:function resetFlip(){return this.flipX=!1,this.flipY=!1,this}}},function(t,i,r){var o=r(10),a=r(308),h=r(3),l={prepareBoundsOutput:function prepareBoundsOutput(t,i){return void 0===i&&(i=!1),0!==this.rotation&&a(t,this.x,this.y,this.rotation),i&&this.parentContainer&&this.parentContainer.getBoundsTransformMatrix().transformPoint(t.x,t.y,t),t},getCenter:function getCenter(t){return void 0===t&&(t=new h),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,t},getTopLeft:function getTopLeft(t,i){return t||(t=new h),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,i)},getTopCenter:function getTopCenter(t,i){return t||(t=new h),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,i)},getTopRight:function getTopRight(t,i){return t||(t=new h),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,i)},getLeftCenter:function getLeftCenter(t,i){return t||(t=new h),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,i)},getRightCenter:function getRightCenter(t,i){return t||(t=new h),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,i)},getBottomLeft:function getBottomLeft(t,i){return t||(t=new h),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,i)},getBottomCenter:function getBottomCenter(t,i){return t||(t=new h),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,i)},getBottomRight:function getBottomRight(t,i){return t||(t=new h),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,i)},getBounds:function getBounds(t){var i,r,a,h,l,u,c,d;if(void 0===t&&(t=new o),this.parentContainer){var p=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(t),p.transformPoint(t.x,t.y,t),i=t.x,r=t.y,this.getTopRight(t),p.transformPoint(t.x,t.y,t),a=t.x,h=t.y,this.getBottomLeft(t),p.transformPoint(t.x,t.y,t),l=t.x,u=t.y,this.getBottomRight(t),p.transformPoint(t.x,t.y,t),c=t.x,d=t.y}else this.getTopLeft(t),i=t.x,r=t.y,this.getTopRight(t),a=t.x,h=t.y,this.getBottomLeft(t),l=t.x,u=t.y,this.getBottomRight(t),c=t.x,d=t.y;return t.x=Math.min(i,a,l,c),t.y=Math.min(r,h,u,d),t.width=Math.max(i,a,l,c)-t.x,t.height=Math.max(r,h,u,d)-t.y,t}};t.exports=l},function(t,i){t.exports="blur"},function(t,i){t.exports="boot"},function(t,i){t.exports="contextlost"},function(t,i){t.exports="contextrestored"},function(t,i){t.exports="destroy"},function(t,i){t.exports="focus"},function(t,i){t.exports="hidden"},function(t,i){t.exports="pause"},function(t,i){t.exports="postrender"},function(t,i){t.exports="poststep"},function(t,i){t.exports="prerender"},function(t,i){t.exports="prestep"},function(t,i){t.exports="ready"},function(t,i){t.exports="resume"},function(t,i){t.exports="step"},function(t,i){t.exports="visible"},function(t,i){t.exports="postrender"},function(t,i){t.exports="prerender"},function(t,i){t.exports="render"},function(t,i){t.exports="resize"},function(t,i){var r={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function get(){return this._displayOriginX},set:function set(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function get(){return this._displayOriginY},set:function set(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function setOrigin(t,i){return void 0===t&&(t=.5),void 0===i&&(i=t),this.originX=t,this.originY=i,this.updateDisplayOrigin()},setOriginFromFrame:function setOriginFromFrame(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function setDisplayOrigin(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.displayOriginX=t,this.displayOriginY=i,this},updateDisplayOrigin:function updateDisplayOrigin(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};t.exports=r},function(t,i,r){var o=r(36),a=r(99),h=r(6),l=r(100),u=r(3),c={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:l.PLAYING_FORWARD,setPath:function setPath(t,i){void 0===i&&(i=this.pathConfig);var r=this.pathTween;return r&&r.isPlaying()&&r.stop(),this.path=t,i&&this.startFollow(i),this},setRotateToPath:function setRotateToPath(t,i){return void 0===i&&(i=0),this.rotateToPath=t,this.pathRotationOffset=i,this},isFollowing:function isFollowing(){var t=this.pathTween;return t&&t.isPlaying()},startFollow:function startFollow(t,i){void 0===t&&(t={}),void 0===i&&(i=0);var r=this.pathTween;r&&r.isPlaying()&&r.stop(),"number"==typeof t&&(t={duration:t}),t.from=h(t,"from",0),t.to=h(t,"to",1);var c=a(t,"positionOnPath",!1);this.rotateToPath=a(t,"rotateToPath",!1),this.pathRotationOffset=h(t,"rotationOffset",0);var d=h(t,"startAt",i);if(d&&(t.onStart=function(t){var i=t.data[0];i.progress=d,i.elapsed=i.duration*d;var r=i.ease(i.progress);i.current=i.start+(i.end-i.start)*r,i.target[i.key]=i.current}),this.pathOffset||(this.pathOffset=new u(this.x,this.y)),this.pathVector||(this.pathVector=new u),this.pathDelta||(this.pathDelta=new u),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(t),this.path.getStartPoint(this.pathOffset),c&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=l.PLAYING_FORWARD,this.rotateToPath){var p=this.path.getPoint(.1);this.rotation=Math.atan2(p.y-this.y,p.x-this.x)+o(this.pathRotationOffset)}return this.pathConfig=t,this},pauseFollow:function pauseFollow(){var t=this.pathTween;return t&&t.isPlaying()&&t.pause(),this},resumeFollow:function resumeFollow(){var t=this.pathTween;return t&&t.isPaused()&&t.resume(),this},stopFollow:function stopFollow(){var t=this.pathTween;return t&&t.isPlaying()&&t.stop(),this},pathUpdate:function pathUpdate(){var t=this.pathTween;if(t){var i=t.data[0],r=this.pathDelta,a=this.pathVector;if(r.copy(a).negate(),i.state===l.COMPLETE)return this.path.getPoint(1,a),r.add(a),a.add(this.pathOffset),void this.setPosition(a.x,a.y);if(i.state!==l.PLAYING_FORWARD&&i.state!==l.PLAYING_BACKWARD)return;this.path.getPoint(t.getValue(),a),r.add(a),a.add(this.pathOffset);var h=this.x,u=this.y;this.setPosition(a.x,a.y);var c=this.x-h,d=this.y-u;if(0===c&&0===d)return;if(i.state!==this._prevDirection)return void(this._prevDirection=i.state);this.rotateToPath&&(this.rotation=Math.atan2(d,c)+o(this.pathRotationOffset))}}};t.exports=c},function(t,i){var r={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function get(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function set(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function get(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function set(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function setSizeToFrame(t){return void 0===t&&(t=this.frame),this.width=t.realWidth,this.height=t.realHeight,this},setSize:function setSize(t,i){return this.width=t,this.height=i,this},setDisplaySize:function setDisplaySize(t,i){return this.displayWidth=t,this.displayHeight=i,this}};t.exports=r},function(t,i){var r={texture:null,frame:null,isCropped:!1,setTexture:function setTexture(t,i){return this.texture=this.scene.sys.textures.get(t),this.setFrame(i)},setFrame:function setFrame(t,i,r){return void 0===i&&(i=!0),void 0===r&&(r=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&i&&this.setSizeToFrame(),this._originComponent&&r&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};t.exports=r},function(t,i){var r={texture:null,frame:null,isCropped:!1,setCrop:function setCrop(t,i,r,o){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,i,r,o,this.flipX,this.flipY);else{var a=t;this.frame.setCropUVs(this._crop,a.x,a.y,a.width,a.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function setTexture(t,i){return this.texture=this.scene.sys.textures.get(t),this.setFrame(i)},setFrame:function setFrame(t,i,r){return void 0===i&&(i=!0),void 0===r&&(r=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&i&&this.setSizeToFrame(),this._originComponent&&r&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function resetCropObject(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};t.exports=r},function(t,i){var r={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function clearTint(){return this.setTint(16777215),this},setTint:function setTint(t,i,r,o){return void 0===t&&(t=16777215),void 0===i&&(i=t,r=t,o=t),this.tintTopLeft=t,this.tintTopRight=i,this.tintBottomLeft=r,this.tintBottomRight=o,this.tintFill=!1,this},setTintFill:function setTintFill(t,i,r,o){return this.setTint(t,i,r,o),this.tintFill=!0,this},tint:{set:function set(t){this.setTint(t,t,t,t)}},isTinted:{get:function get(){var t=16777215;return this.tintFill||this.tintTopLeft!==t||this.tintTopRight!==t||this.tintBottomLeft!==t||this.tintBottomRight!==t}}};t.exports=r},function(t,i){t.exports="changedata"},function(t,i){t.exports="changedata-"},function(t,i){t.exports="destroy"},function(t,i){t.exports="removedata"},function(t,i){t.exports="setdata"},function(t,i){t.exports="addedtoscene"},function(t,i){t.exports="destroy"},function(t,i){t.exports="removedfromscene"},function(t,i){t.exports="complete"},function(t,i){t.exports="created"},function(t,i){t.exports="error"},function(t,i){t.exports="loop"},function(t,i){t.exports="play"},function(t,i){t.exports="seeked"},function(t,i){t.exports="seeking"},function(t,i){t.exports="stop"},function(t,i){t.exports="timeout"},function(t,i){t.exports="unlocked"},function(t,i){t.exports="addedtoscene"},function(t,i){t.exports="boot"},function(t,i){t.exports="create"},function(t,i){t.exports="destroy"},function(t,i){t.exports="pause"},function(t,i){t.exports="postupdate"},function(t,i){t.exports="prerender"},function(t,i){t.exports="preupdate"},function(t,i){t.exports="ready"},function(t,i){t.exports="removedfromscene"},function(t,i){t.exports="render"},function(t,i){t.exports="resume"},function(t,i){t.exports="shutdown"},function(t,i){t.exports="sleep"},function(t,i){t.exports="start"},function(t,i){t.exports="transitioncomplete"},function(t,i){t.exports="transitioninit"},function(t,i){t.exports="transitionout"},function(t,i){t.exports="transitionstart"},function(t,i){t.exports="transitionwake"},function(t,i){t.exports="update"},function(t,i){t.exports="wake"},function(t,i,r){var o=r(46);t.exports=function IncAlpha(t,i,r,a,h){return o(t,"alpha",i,r,a,h)}},function(t,i,r){var o=r(46);t.exports=function IncX(t,i,r,a,h){return o(t,"x",i,r,a,h)}},function(t,i,r){var o=r(46);t.exports=function IncXY(t,i,r,a,h,l,u){return null==r&&(r=i),o(t,"x",i,a,l,u),o(t,"y",r,h,l,u)}},function(t,i,r){var o=r(46);t.exports=function IncY(t,i,r,a,h){return o(t,"y",i,r,a,h)}},function(t,i){t.exports=function PlaceOnCircle(t,i,r,o){void 0===r&&(r=0),void 0===o&&(o=6.28);for(var a=r,h=(o-r)/t.length,l=0;l<t.length;l++)t[l].x=i.x+i.radius*Math.cos(a),t[l].y=i.y+i.radius*Math.sin(a),a+=h;return t}},function(t,i){t.exports=function PlaceOnEllipse(t,i,r,o){void 0===r&&(r=0),void 0===o&&(o=6.28);for(var a=r,h=(o-r)/t.length,l=i.width/2,u=i.height/2,c=0;c<t.length;c++)t[c].x=i.x+l*Math.cos(a),t[c].y=i.y+u*Math.sin(a),a+=h;return t}},function(t,i,r){var o=r(172);t.exports=function PlaceOnLine(t,i){for(var r=o(i,t.length),a=0;a<t.length;a++){var h=t[a],l=r[a];h.x=l.x,h.y=l.y}return t}},function(t,i,r){var o=r(316),a=r(178),h=r(179);t.exports=function PlaceOnRectangle(t,i,r){void 0===r&&(r=0);var l=o(i,!1,t.length);r>0?a(l,r):r<0&&h(l,Math.abs(r));for(var u=0;u<t.length;u++)t[u].x=l[u].x,t[u].y=l[u].y;return t}},function(t,i,r){var o=r(317);t.exports=function PlaceOnTriangle(t,i,r){var a=o({x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},r),h=o({x1:i.x2,y1:i.y2,x2:i.x3,y2:i.y3},r),l=o({x1:i.x3,y1:i.y3,x2:i.x1,y2:i.y1},r);a.pop(),h.pop(),l.pop();for(var u=(a=a.concat(h,l)).length/t.length,c=0,d=0;d<t.length;d++){var p=t[d],g=a[Math.floor(c)];p.x=g.x,p.y=g.y,c+=u}return t}},function(t,i){t.exports=function PlayAnimation(t,i,r){for(var o=0;o<t.length;o++){var a=t[o];a.anims&&a.anims.play(i,r)}return t}},function(t,i,r){var o=r(170);t.exports=function RandomCircle(t,i){for(var r=0;r<t.length;r++)o(i,t[r]);return t}},function(t,i,r){var o=r(180);t.exports=function RandomEllipse(t,i){for(var r=0;r<t.length;r++)o(i,t[r]);return t}},function(t,i,r){var o=r(173);t.exports=function RandomLine(t,i){for(var r=0;r<t.length;r++)o(i,t[r]);return t}},function(t,i,r){var o=r(174);t.exports=function RandomRectangle(t,i){for(var r=0;r<t.length;r++)o(i,t[r]);return t}},function(t,i,r){var o=r(181);t.exports=function RandomTriangle(t,i){for(var r=0;r<t.length;r++)o(i,t[r]);return t}},function(t,i,r){var o=r(46);t.exports=function Rotate(t,i,r,a,h){return o(t,"rotation",i,r,a,h)}},function(t,i,r){var o=r(182),a=r(50);t.exports=function RotateAround(t,i,r){for(var h=i.x,l=i.y,u=0;u<t.length;u++){var c=t[u];o(c,h,l,r,Math.max(1,a(c.x,c.y,h,l)))}return t}},function(t,i,r){var o=r(182);t.exports=function RotateAroundDistance(t,i,r,a){var h=i.x,l=i.y;if(0===a)return t;for(var u=0;u<t.length;u++)o(t[u],h,l,r,a);return t}},function(t,i,r){var o=r(46);t.exports=function ScaleX(t,i,r,a,h){return o(t,"scaleX",i,r,a,h)}},function(t,i,r){var o=r(46);t.exports=function ScaleXY(t,i,r,a,h,l,u){return null==r&&(r=i),o(t,"scaleX",i,a,l,u),o(t,"scaleY",r,h,l,u)}},function(t,i,r){var o=r(46);t.exports=function ScaleY(t,i,r,a,h){return o(t,"scaleY",i,r,a,h)}},function(t,i,r){var o=r(27);t.exports=function SetAlpha(t,i,r,a,h){return o(t,"alpha",i,r,a,h)}},function(t,i,r){var o=r(27);t.exports=function SetBlendMode(t,i,r,a){return o(t,"blendMode",i,0,r,a)}},function(t,i,r){var o=r(27);t.exports=function SetDepth(t,i,r,a,h){return o(t,"depth",i,r,a,h)}},function(t,i){t.exports=function SetHitArea(t,i,r){for(var o=0;o<t.length;o++)t[o].setInteractive(i,r);return t}},function(t,i,r){var o=r(27);t.exports=function SetOrigin(t,i,r,a,h,l,u){return null==r&&(r=i),o(t,"originX",i,a,l,u),o(t,"originY",r,h,l,u),t.forEach((function(t){t.updateDisplayOrigin()})),t}},function(t,i,r){var o=r(27);t.exports=function SetRotation(t,i,r,a,h){return o(t,"rotation",i,r,a,h)}},function(t,i,r){var o=r(27);t.exports=function SetScale(t,i,r,a,h,l,u){return null==r&&(r=i),o(t,"scaleX",i,a,l,u),o(t,"scaleY",r,h,l,u)}},function(t,i,r){var o=r(27);t.exports=function SetScaleX(t,i,r,a,h){return o(t,"scaleX",i,r,a,h)}},function(t,i,r){var o=r(27);t.exports=function SetScaleY(t,i,r,a,h){return o(t,"scaleY",i,r,a,h)}},function(t,i,r){var o=r(27);t.exports=function SetScrollFactor(t,i,r,a,h,l,u){return null==r&&(r=i),o(t,"scrollFactorX",i,a,l,u),o(t,"scrollFactorY",r,h,l,u)}},function(t,i,r){var o=r(27);t.exports=function SetScrollFactorX(t,i,r,a,h){return o(t,"scrollFactorX",i,r,a,h)}},function(t,i,r){var o=r(27);t.exports=function SetScrollFactorY(t,i,r,a,h){return o(t,"scrollFactorY",i,r,a,h)}},function(t,i){t.exports=function SetTint(t,i,r,o,a){for(var h=0;h<t.length;h++)t[h].setTint(i,r,o,a);return t}},function(t,i,r){var o=r(27);t.exports=function SetVisible(t,i,r,a){return o(t,"visible",i,0,r,a)}},function(t,i,r){var o=r(27);t.exports=function SetX(t,i,r,a,h){return o(t,"x",i,r,a,h)}},function(t,i,r){var o=r(27);t.exports=function SetXY(t,i,r,a,h,l,u){return null==r&&(r=i),o(t,"x",i,a,l,u),o(t,"y",r,h,l,u)}},function(t,i,r){var o=r(27);t.exports=function SetY(t,i,r,a,h){return o(t,"y",i,r,a,h)}},function(t,i,r){var o=r(3);t.exports=function ShiftPosition(t,i,r,a,h){var l,u,c,d,p,g;if(void 0===a&&(a=0),void 0===h&&(h=new o),t.length>1)if(0===a){var v=t.length-1;for(l=t[v].x,u=t[v].y,c=v-1;c>=0;c--)d=(g=t[c]).x,p=g.y,g.x=l,g.y=u,l=d,u=p;t[v].x=i,t[v].y=r}else{for(l=t[0].x,u=t[0].y,c=1;c<t.length;c++)d=(g=t[c]).x,p=g.y,g.x=l,g.y=u,l=d,u=p;t[0].x=i,t[0].y=r}else l=t[0].x,u=t[0].y,t[0].x=i,t[0].y=r;return h.x=l,h.y=u,h}},function(t,i,r){var o=r(131);t.exports=function Shuffle(t){return o(t)}},function(t,i,r){var o=r(183);t.exports=function SmootherStep(t,i,r,a,h){void 0===h&&(h=!1);var l,u=Math.abs(a-r)/t.length;if(h)for(l=0;l<t.length;l++)t[l][i]+=o(l*u,r,a);else for(l=0;l<t.length;l++)t[l][i]=o(l*u,r,a);return t}},function(t,i,r){var o=r(184);t.exports=function SmoothStep(t,i,r,a,h){void 0===h&&(h=!1);var l,u=Math.abs(a-r)/t.length;if(h)for(l=0;l<t.length;l++)t[l][i]+=o(l*u,r,a);else for(l=0;l<t.length;l++)t[l][i]=o(l*u,r,a);return t}},function(t,i){t.exports=function Spread(t,i,r,o,a){void 0===a&&(a=!1);var h,l=Math.abs(o-r)/t.length;if(a)for(h=0;h<t.length;h++)t[h][i]+=h*l+r;else for(h=0;h<t.length;h++)t[h][i]=h*l+r;return t}},function(t,i){t.exports=function ToggleVisible(t){for(var i=0;i<t.length;i++)t[i].visible=!t[i].visible;return t}},function(t,i,r){var o=r(68);t.exports=function WrapInRectangle(t,i,r){void 0===r&&(r=0);for(var a=0;a<t.length;a++){var h=t[a];h.x=o(h.x,i.left-r,i.right+r),h.y=o(h.y,i.top-r,i.bottom+r)}return t}},function(t,i,r){t.exports={Animation:r(185),AnimationFrame:r(319),AnimationManager:r(321),AnimationState:r(164),Events:r(132)}},function(t,i){t.exports="add"},function(t,i){t.exports="animationcomplete"},function(t,i){t.exports="animationcomplete-"},function(t,i){t.exports="animationrepeat"},function(t,i){t.exports="animationrestart"},function(t,i){t.exports="animationstart"},function(t,i){t.exports="animationstop"},function(t,i){t.exports="animationupdate"},function(t,i){t.exports="pauseall"},function(t,i){t.exports="remove"},function(t,i){t.exports="resumeall"},function(t,i,r){t.exports={BaseCache:r(323),CacheManager:r(325),Events:r(324)}},function(t,i){t.exports="add"},function(t,i){t.exports="remove"},function(t,i,r){t.exports={Controls:r(739),Scene2D:r(742)}},function(t,i,r){t.exports={FixedKeyControl:r(740),SmoothedKeyControl:r(741)}},function(t,i,r){var o=r(0),a=r(6),h=new o({initialize:function FixedKeyControl(t){this.camera=a(t,"camera",null),this.left=a(t,"left",null),this.right=a(t,"right",null),this.up=a(t,"up",null),this.down=a(t,"down",null),this.zoomIn=a(t,"zoomIn",null),this.zoomOut=a(t,"zoomOut",null),this.zoomSpeed=a(t,"zoomSpeed",.01),this.minZoom=a(t,"minZoom",.001),this.maxZoom=a(t,"maxZoom",1e3),this.speedX=0,this.speedY=0;var i=a(t,"speed",null);"number"==typeof i?(this.speedX=i,this.speedY=i):(this.speedX=a(t,"speed.x",0),this.speedY=a(t,"speed.y",0)),this._zoom=0,this.active=null!==this.camera},start:function start(){return this.active=null!==this.camera,this},stop:function stop(){return this.active=!1,this},setCamera:function setCamera(t){return this.camera=t,this},update:function update(t){if(this.active){void 0===t&&(t=1);var i=this.camera;this.up&&this.up.isDown?i.scrollY-=this.speedY*t|0:this.down&&this.down.isDown&&(i.scrollY+=this.speedY*t|0),this.left&&this.left.isDown?i.scrollX-=this.speedX*t|0:this.right&&this.right.isDown&&(i.scrollX+=this.speedX*t|0),this.zoomIn&&this.zoomIn.isDown?(i.zoom-=this.zoomSpeed,i.zoom<this.minZoom&&(i.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(i.zoom+=this.zoomSpeed,i.zoom>this.maxZoom&&(i.zoom=this.maxZoom))}},destroy:function destroy(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});t.exports=h},function(t,i,r){var o=r(0),a=r(6),h=new o({initialize:function SmoothedKeyControl(t){this.camera=a(t,"camera",null),this.left=a(t,"left",null),this.right=a(t,"right",null),this.up=a(t,"up",null),this.down=a(t,"down",null),this.zoomIn=a(t,"zoomIn",null),this.zoomOut=a(t,"zoomOut",null),this.zoomSpeed=a(t,"zoomSpeed",.01),this.minZoom=a(t,"minZoom",.001),this.maxZoom=a(t,"maxZoom",1e3),this.accelX=0,this.accelY=0;var i=a(t,"acceleration",null);"number"==typeof i?(this.accelX=i,this.accelY=i):(this.accelX=a(t,"acceleration.x",0),this.accelY=a(t,"acceleration.y",0)),this.dragX=0,this.dragY=0;var r=a(t,"drag",null);"number"==typeof r?(this.dragX=r,this.dragY=r):(this.dragX=a(t,"drag.x",0),this.dragY=a(t,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var o=a(t,"maxSpeed",null);"number"==typeof o?(this.maxSpeedX=o,this.maxSpeedY=o):(this.maxSpeedX=a(t,"maxSpeed.x",0),this.maxSpeedY=a(t,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=null!==this.camera},start:function start(){return this.active=null!==this.camera,this},stop:function stop(){return this.active=!1,this},setCamera:function setCamera(t){return this.camera=t,this},update:function update(t){if(this.active){void 0===t&&(t=1);var i=this.camera;this._speedX>0?(this._speedX-=this.dragX*t,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*t,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*t,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*t,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,0!==this._speedX&&(i.scrollX-=this._speedX*t|0),0!==this._speedY&&(i.scrollY-=this._speedY*t|0),0!==this._zoom&&(i.zoom+=this._zoom,i.zoom<this.minZoom?i.zoom=this.minZoom:i.zoom>this.maxZoom&&(i.zoom=this.maxZoom))}},destroy:function destroy(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});t.exports=h},function(t,i,r){t.exports={Camera:r(326),BaseCamera:r(133),CameraManager:r(799),Effects:r(333),Events:r(37)}},function(t,i){t.exports="cameradestroy"},function(t,i){t.exports="camerafadeincomplete"},function(t,i){t.exports="camerafadeinstart"},function(t,i){t.exports="camerafadeoutcomplete"},function(t,i){t.exports="camerafadeoutstart"},function(t,i){t.exports="cameraflashcomplete"},function(t,i){t.exports="cameraflashstart"},function(t,i){t.exports="followupdate"},function(t,i){t.exports="camerapancomplete"},function(t,i){t.exports="camerapanstart"},function(t,i){t.exports="postrender"},function(t,i){t.exports="prerender"},function(t,i){t.exports="camerarotatecomplete"},function(t,i){t.exports="camerarotatestart"},function(t,i){t.exports="camerashakecomplete"},function(t,i){t.exports="camerashakestart"},function(t,i){t.exports="camerazoomcomplete"},function(t,i){t.exports="camerazoomstart"},function(t,i,r){var o=r(18),a=r(0),h=r(37),l=new a({initialize:function Fade(t){this.camera=t,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function start(t,i,r,o,a,l,u,c){if(void 0===t&&(t=!0),void 0===i&&(i=1e3),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===l&&(l=!1),void 0===u&&(u=null),void 0===c&&(c=this.camera.scene),!l&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=i,this.direction=t,this.progress=0,this.red=r,this.green=o,this.blue=a,this.alpha=t?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=u,this._onUpdateScope=c;var d=t?h.FADE_OUT_START:h.FADE_IN_START;return this.camera.emit(d,this.camera,this,i,r,o,a),this.camera},update:function update(t,i){this.isRunning&&(this._elapsed+=i,this.progress=o(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function postRenderCanvas(t){if(!this.isRunning&&!this.isComplete)return!1;var i=this.camera;return t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(i.x,i.y,i.width,i.height),!0},postRenderWebGL:function postRenderWebGL(t,i){if(!this.isRunning&&!this.isComplete)return!1;var r=this.camera,o=this.red/255,a=this.green/255,h=this.blue/255;return t.drawFillRect(r.x,r.y,r.width,r.height,i(h,a,o,1),this.alpha),!0},effectComplete:function effectComplete(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var t=this.direction?h.FADE_OUT_COMPLETE:h.FADE_IN_COMPLETE;this.camera.emit(t,this.camera,this)},reset:function reset(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function destroy(){this.reset(),this.camera=null}});t.exports=l},function(t,i,r){var o=r(18),a=r(0),h=r(37),l=new a({initialize:function Flash(t){this.camera=t,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function start(t,i,r,o,a,l,u){return void 0===t&&(t=250),void 0===i&&(i=255),void 0===r&&(r=255),void 0===o&&(o=255),void 0===a&&(a=!1),void 0===l&&(l=null),void 0===u&&(u=this.camera.scene),!a&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,this.red=i,this.green=r,this.blue=o,this.alpha=1,this._elapsed=0,this._onUpdate=l,this._onUpdateScope=u,this.camera.emit(h.FLASH_START,this.camera,this,t,i,r,o)),this.camera},update:function update(t,i){this.isRunning&&(this._elapsed+=i,this.progress=o(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function postRenderCanvas(t){if(!this.isRunning)return!1;var i=this.camera;return t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(i.x,i.y,i.width,i.height),!0},postRenderWebGL:function postRenderWebGL(t,i){if(!this.isRunning)return!1;var r=this.camera,o=this.red/255,a=this.green/255,h=this.blue/255;return t.drawFillRect(r.x,r.y,r.width,r.height,i(h,a,o,1),this.alpha),!0},effectComplete:function effectComplete(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(h.FLASH_COMPLETE,this.camera,this)},reset:function reset(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function destroy(){this.reset(),this.camera=null}});t.exports=l},function(t,i,r){var o=r(18),a=r(0),h=r(134),l=r(37),u=r(3),c=new a({initialize:function Pan(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=new u,this.current=new u,this.destination=new u,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function start(t,i,r,o,a,u,c){void 0===r&&(r=1e3),void 0===o&&(o=h.Linear),void 0===a&&(a=!1),void 0===u&&(u=null),void 0===c&&(c=this.camera.scene);var d=this.camera;return!a&&this.isRunning||(this.isRunning=!0,this.duration=r,this.progress=0,this.source.set(d.scrollX,d.scrollY),this.destination.set(t,i),d.getScroll(t,i,this.current),"string"==typeof o&&h.hasOwnProperty(o)?this.ease=h[o]:"function"==typeof o&&(this.ease=o),this._elapsed=0,this._onUpdate=u,this._onUpdateScope=c,this.camera.emit(l.PAN_START,this.camera,this,r,t,i)),d},update:function update(t,i){if(this.isRunning){this._elapsed+=i;var r=o(this._elapsed/this.duration,0,1);this.progress=r;var a=this.camera;if(this._elapsed<this.duration){var h=this.ease(r);a.getScroll(this.destination.x,this.destination.y,this.current);var l=this.source.x+(this.current.x-this.source.x)*h,u=this.source.y+(this.current.y-this.source.y)*h;a.setScroll(l,u),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,a,r,l,u)}else a.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,a,r,a.scrollX,a.scrollY),this.effectComplete()}},effectComplete:function effectComplete(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(l.PAN_COMPLETE,this.camera,this)},reset:function reset(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function destroy(){this.reset(),this.camera=null,this.source=null,this.destination=null}});t.exports=c},function(t,i){t.exports=function In(t,i){return void 0===i&&(i=1.70158),t*t*((i+1)*t-i)}},function(t,i){t.exports=function Out(t,i){return void 0===i&&(i=1.70158),--t*t*((i+1)*t+i)+1}},function(t,i){t.exports=function InOut(t,i){void 0===i&&(i=1.70158);var r=1.525*i;return(t*=2)<1?t*t*((r+1)*t-r)*.5:.5*((t-=2)*t*((r+1)*t+r)+2)}},function(t,i){t.exports=function In(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}},function(t,i){t.exports=function Out(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},function(t,i){t.exports=function InOut(t){var i=!1;return t<.5?(t=1-2*t,i=!0):t=2*t-1,t<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,i?.5*(1-t):.5*t+.5}},function(t,i){t.exports=function In(t){return 1-Math.sqrt(1-t*t)}},function(t,i){t.exports=function Out(t){return Math.sqrt(1- --t*t)}},function(t,i){t.exports=function InOut(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},function(t,i){t.exports=function In(t){return t*t*t}},function(t,i){t.exports=function Out(t){return--t*t*t+1}},function(t,i){t.exports=function InOut(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},function(t,i){t.exports=function In(t,i,r){if(void 0===i&&(i=.1),void 0===r&&(r=.1),0===t)return 0;if(1===t)return 1;var o=r/4;return i<1?i=1:o=r*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(t-=1))*Math.sin((t-o)*(2*Math.PI)/r)}},function(t,i){t.exports=function Out(t,i,r){if(void 0===i&&(i=.1),void 0===r&&(r=.1),0===t)return 0;if(1===t)return 1;var o=r/4;return i<1?i=1:o=r*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin((t-o)*(2*Math.PI)/r)+1}},function(t,i){t.exports=function InOut(t,i,r){if(void 0===i&&(i=.1),void 0===r&&(r=.1),0===t)return 0;if(1===t)return 1;var o=r/4;return i<1?i=1:o=r*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?i*Math.pow(2,10*(t-=1))*Math.sin((t-o)*(2*Math.PI)/r)*-.5:i*Math.pow(2,-10*(t-=1))*Math.sin((t-o)*(2*Math.PI)/r)*.5+1}},function(t,i){t.exports=function In(t){return Math.pow(2,10*(t-1))-.001}},function(t,i){t.exports=function Out(t){return 1-Math.pow(2,-10*t)}},function(t,i){t.exports=function InOut(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}},function(t,i){t.exports=function Linear(t){return t}},function(t,i){t.exports=function In(t){return t*t}},function(t,i){t.exports=function Out(t){return t*(2-t)}},function(t,i){t.exports=function InOut(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},function(t,i){t.exports=function In(t){return t*t*t*t}},function(t,i){t.exports=function Out(t){return 1- --t*t*t*t}},function(t,i){t.exports=function InOut(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},function(t,i){t.exports=function In(t){return t*t*t*t*t}},function(t,i){t.exports=function Out(t){return--t*t*t*t*t+1}},function(t,i){t.exports=function InOut(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},function(t,i){t.exports=function In(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)}},function(t,i){t.exports=function Out(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)}},function(t,i){t.exports=function InOut(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))}},function(t,i){t.exports=function Stepped(t,i){return void 0===i&&(i=1),t<=0?0:t>=1?1:1/i*(1+(i*t|0))}},function(t,i,r){var o=r(18),a=r(0),h=r(37),l=r(3),u=new a({initialize:function Shake(t){this.camera=t,this.isRunning=!1,this.duration=0,this.intensity=new l,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function start(t,i,r,o,a){return void 0===t&&(t=100),void 0===i&&(i=.05),void 0===r&&(r=!1),void 0===o&&(o=null),void 0===a&&(a=this.camera.scene),!r&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,"number"==typeof i?this.intensity.set(i):this.intensity.set(i.x,i.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=o,this._onUpdateScope=a,this.camera.emit(h.SHAKE_START,this.camera,this,t,i)),this.camera},preRender:function preRender(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function update(t,i){if(this.isRunning)if(this._elapsed+=i,this.progress=o(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var r=this.intensity,a=this.camera.width,h=this.camera.height,l=this.camera.zoom;this._offsetX=(Math.random()*r.x*a*2-r.x*a)*l,this._offsetY=(Math.random()*r.y*h*2-r.y*h)*l,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function effectComplete(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(h.SHAKE_COMPLETE,this.camera,this)},reset:function reset(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function destroy(){this.reset(),this.camera=null,this.intensity=null}});t.exports=u},function(t,i,r){var o=r(18),a=r(0),h=r(37),l=r(134),u=new a({initialize:function RotateTo(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function start(t,i,r,o,a,u,c){void 0===r&&(r=1e3),void 0===o&&(o=l.Linear),void 0===a&&(a=!1),void 0===u&&(u=null),void 0===c&&(c=this.camera.scene),void 0===i&&(i=!1),this.shortestPath=i;var d=t;t<0?(d=-1*t,this.clockwise=!1):this.clockwise=!0;var p=360*Math.PI/180;d-=Math.floor(d/p)*p;var g=this.camera;if(!a&&this.isRunning)return g;if(this.isRunning=!0,this.duration=r,this.progress=0,this.source=g.rotation,this.destination=d,"string"==typeof o&&l.hasOwnProperty(o)?this.ease=l[o]:"function"==typeof o&&(this.ease=o),this._elapsed=0,this._onUpdate=u,this._onUpdateScope=c,this.shortestPath){var v=0,m=0;(v=this.destination>this.source?Math.abs(this.destination-this.source):Math.abs(this.destination+p)-this.source)<(m=this.source>this.destination?Math.abs(this.source-this.destination):Math.abs(this.source+p)-this.destination)?this.clockwise=!0:v>m&&(this.clockwise=!1)}return this.camera.emit(h.ROTATE_START,this.camera,this,r,d),g},update:function update(t,i){if(this.isRunning){this._elapsed+=i;var r=o(this._elapsed/this.duration,0,1);this.progress=r;var a=this.camera;if(this._elapsed<this.duration){var h=this.ease(r);this.current=a.rotation;var l=0,u=360*Math.PI/180,c=this.destination,d=this.current;!1===this.clockwise&&(c=this.current,d=this.destination),l=c>=d?Math.abs(c-d):Math.abs(c+u)-d;var p=0;p=this.clockwise?a.rotation+l*h:a.rotation-l*h,a.rotation=p,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,a,r,p)}else a.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,a,r,this.destination),this.effectComplete()}},effectComplete:function effectComplete(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(h.ROTATE_COMPLETE,this.camera,this)},reset:function reset(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function destroy(){this.reset(),this.camera=null,this.source=null,this.destination=null}});t.exports=u},function(t,i,r){var o=r(18),a=r(0),h=r(134),l=r(37),u=new a({initialize:function Zoom(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function start(t,i,r,o,a,u){void 0===i&&(i=1e3),void 0===r&&(r=h.Linear),void 0===o&&(o=!1),void 0===a&&(a=null),void 0===u&&(u=this.camera.scene);var c=this.camera;return!o&&this.isRunning||(this.isRunning=!0,this.duration=i,this.progress=0,this.source=c.zoom,this.destination=t,"string"==typeof r&&h.hasOwnProperty(r)?this.ease=h[r]:"function"==typeof r&&(this.ease=r),this._elapsed=0,this._onUpdate=a,this._onUpdateScope=u,this.camera.emit(l.ZOOM_START,this.camera,this,i,t)),c},update:function update(t,i){this.isRunning&&(this._elapsed+=i,this.progress=o(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function effectComplete(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(l.ZOOM_COMPLETE,this.camera,this)},reset:function reset(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function destroy(){this.reset(),this.camera=null}});t.exports=u},function(t,i,r){var o=r(326),a=r(0),h=r(2),l=r(24),u=r(57),c=r(104),d=r(20),p=new a({initialize:function CameraManager(t){this.scene=t,this.systems=t.sys,this.roundPixels=t.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,t.sys.events.once(d.BOOT,this.boot,this),t.sys.events.on(d.START,this.start,this)},boot:function boot(){var t=this.systems;t.settings.cameras?this.fromJSON(t.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new o(0,0,t.scale.width,t.scale.height).setScene(this.scene),t.game.scale.on(c.RESIZE,this.onResize,this),this.systems.events.once(d.DESTROY,this.destroy,this)},start:function start(){if(!this.main){var t=this.systems;t.settings.cameras?this.fromJSON(t.settings.cameras):this.add(),this.main=this.cameras[0]}var i=this.systems.events;i.on(d.UPDATE,this.update,this),i.once(d.SHUTDOWN,this.shutdown,this)},add:function add(t,i,r,a,h,l){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=this.scene.sys.scale.width),void 0===a&&(a=this.scene.sys.scale.height),void 0===h&&(h=!1),void 0===l&&(l="");var u=new o(t,i,r,a);return u.setName(l),u.setScene(this.scene),u.setRoundPixels(this.roundPixels),u.id=this.getNextID(),this.cameras.push(u),h&&(this.main=u),u},addExisting:function addExisting(t,i){return void 0===i&&(i=!1),-1===this.cameras.indexOf(t)?(t.id=this.getNextID(),t.setRoundPixels(this.roundPixels),this.cameras.push(t),i&&(this.main=t),t):null},getNextID:function getNextID(){for(var t=this.cameras,i=1,r=0;r<32;r++){for(var o=!1,a=0;a<t.length;a++){var h=t[a];h&&h.id===i&&(o=!0)}if(!o)return i;i<<=1}return 0},getTotal:function getTotal(t){void 0===t&&(t=!1);for(var i=0,r=this.cameras,o=0;o<r.length;o++){var a=r[o];(!t||t&&a.visible)&&i++}return i},fromJSON:function fromJSON(t){Array.isArray(t)||(t=[t]);for(var i=this.scene.sys.scale.width,r=this.scene.sys.scale.height,o=0;o<t.length;o++){var a=t[o],l=h(a,"x",0),u=h(a,"y",0),c=h(a,"width",i),d=h(a,"height",r),p=this.add(l,u,c,d);p.name=h(a,"name",""),p.zoom=h(a,"zoom",1),p.rotation=h(a,"rotation",0),p.scrollX=h(a,"scrollX",0),p.scrollY=h(a,"scrollY",0),p.roundPixels=h(a,"roundPixels",!1),p.visible=h(a,"visible",!0);var g=h(a,"backgroundColor",!1);g&&p.setBackgroundColor(g);var v=h(a,"bounds",null);if(v){var m=h(v,"x",0),y=h(v,"y",0),T=h(v,"width",i),S=h(v,"height",r);p.setBounds(m,y,T,S)}}return this},getCamera:function getCamera(t){for(var i=this.cameras,r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null},getCamerasBelowPointer:function getCamerasBelowPointer(t){for(var i=this.cameras,r=t.x,o=t.y,a=[],h=0;h<i.length;h++){var l=i[h];l.visible&&l.inputEnabled&&u(l,r,o)&&a.unshift(l)}return a},remove:function remove(t,i){void 0===i&&(i=!0),Array.isArray(t)||(t=[t]);for(var r=0,o=this.cameras,a=0;a<t.length;a++){var h=o.indexOf(t[a]);-1!==h&&(i?o[h].destroy():o[h].renderList=[],o.splice(h,1),r++)}return!this.main&&o[0]&&(this.main=o[0]),r},render:function render(t,i){for(var r=this.scene,o=this.cameras,a=0;a<this.cameras.length;a++){var h=o[a];if(h.visible&&h.alpha>0){h.preRender();var l=this.getVisibleChildren(i.getChildren(),h);t.render(r,l,h)}}},getVisibleChildren:function getVisibleChildren(t,i){for(var r=[],o=0;o<t.length;o++){var a=t[o];a.willRender(i)&&r.push(a)}return r},resetAll:function resetAll(){for(var t=0;t<this.cameras.length;t++)this.cameras[t].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function update(t,i){for(var r=0;r<this.cameras.length;r++)this.cameras[r].update(t,i)},onResize:function onResize(t,i,r,o,a){for(var h=0;h<this.cameras.length;h++){var l=this.cameras[h];0===l._x&&0===l._y&&l._width===o&&l._height===a&&l.setSize(i.width,i.height)}},resize:function resize(t,i){for(var r=0;r<this.cameras.length;r++)this.cameras[r].setSize(t,i)},shutdown:function shutdown(){this.main=void 0;for(var t=0;t<this.cameras.length;t++)this.cameras[t].destroy();this.cameras=[];var i=this.systems.events;i.off(d.UPDATE,this.update,this),i.off(d.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(d.START,this.start,this),this.scene=null,this.systems=null}});l.register("CameraManager",p,"cameras"),t.exports=p},function(t,i){t.exports="enterfullscreen"},function(t,i){t.exports="fullscreenfailed"},function(t,i){t.exports="fullscreenunsupported"},function(t,i){t.exports="leavefullscreen"},function(t,i){t.exports="orientationchange"},function(t,i){t.exports="resize"},function(t,i,r){t.exports={Config:r(346),CreateRenderer:r(366),DebugHeader:r(384),Events:r(22),TimeStep:r(385),VisibilityHandler:r(387)}},function(t,i){var r,o,a=t.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(t){if(r===setTimeout)return setTimeout(t,0);if((r===defaultSetTimout||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(i){try{return r.call(null,t,0)}catch(i){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(t){r=defaultSetTimout}try{o="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(t){o=defaultClearTimeout}}();var h,l=[],u=!1,c=-1;function cleanUpNextTick(){u&&h&&(u=!1,h.length?l=h.concat(l):c=-1,l.length&&drainQueue())}function drainQueue(){if(!u){var t=runTimeout(cleanUpNextTick);u=!0;for(var i=l.length;i;){for(h=l,l=[];++c<i;)h&&h[c].run();c=-1,i=l.length}h=null,u=!1,function runClearTimeout(t){if(o===clearTimeout)return clearTimeout(t);if((o===defaultClearTimeout||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{return o(t)}catch(i){try{return o.call(null,t)}catch(i){return o.call(this,t)}}}(t)}}function Item(t,i){this.fun=t,this.array=i}function noop(){}a.nextTick=function(t){var i=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)i[r-1]=arguments[r];l.push(new Item(t,i)),1!==l.length||u||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=noop,a.addListener=noop,a.once=noop,a.off=noop,a.removeListener=noop,a.removeAllListeners=noop,a.emit=noop,a.prependListener=noop,a.prependOnceListener=noop,a.listeners=function(t){return[]},a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,i,r){var o=r(136),a={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};t.exports=function init(){return"function"==typeof importScripts||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(a.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(a.mspointer=!0),navigator.getGamepads&&(a.gamepads=!0),"onwheel"in window||o.ie&&"WheelEvent"in window?a.wheelEvent="wheel":"onmousewheel"in window?a.wheelEvent="mousewheel":o.firefox&&"MouseScrollEvent"in window&&(a.wheelEvent="DOMMouseScroll")),a}()},function(t,i,r){var o=r(136),a={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};t.exports=function init(){if("function"==typeof importScripts)return a;a.audioData=!!window.Audio,a.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var t=document.createElement("audio"),i=!!t.canPlayType;try{if(i&&(t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(a.ogg=!0),(t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||t.canPlayType("audio/opus;").replace(/^no$/,""))&&(a.opus=!0),t.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(a.mp3=!0),t.canPlayType("audio/wav").replace(/^no$/,"")&&(a.wav=!0),(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;").replace(/^no$/,""))&&(a.m4a=!0),t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(a.webm=!0),""!==t.canPlayType('audio/mp4;codecs="ec-3"')))if(o.edge)a.dolby=!0;else if(o.safari&&o.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var r=parseInt(RegExp.$1,10),h=parseInt(RegExp.$2,10);(10===r&&h>=11||r>10)&&(a.dolby=!0)}}catch(l){}return a}()},function(t,i){var r={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};t.exports=function init(){if("function"==typeof importScripts)return r;var t=document.createElement("video"),i=!!t.canPlayType;try{i&&(t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(r.ogg=!0),t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(r.h264=!0,r.mp4=!0),t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(r.webm=!0),t.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(r.vp9=!0),t.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(r.hls=!0))}catch(o){}return r}()},function(t,i){var r={available:!1,cancel:"",keyboard:!1,request:""};t.exports=function init(){if("function"==typeof importScripts)return r;var t,i="Fullscreen",o="FullScreen",a=["request"+i,"request"+o,"webkitRequest"+i,"webkitRequest"+o,"msRequest"+i,"msRequest"+o,"mozRequest"+o,"mozRequest"+i];for(t=0;t<a.length;t++)if(document.documentElement[a[t]]){r.available=!0,r.request=a[t];break}var h=["cancel"+o,"exit"+i,"webkitCancel"+o,"webkitExit"+i,"msCancel"+o,"msExit"+i,"mozCancel"+o,"mozExit"+i];if(r.available)for(t=0;t<h.length;t++)if(document[h[t]]){r.cancel=h[t];break}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(r.keyboard=!0),Object.defineProperty(r,"active",{get:function get(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),r}()},function(t,i,r){t.exports={Between:r(349),BetweenPoints:r(350),BetweenPointsY:r(813),BetweenY:r(814),CounterClockwise:r(815),Normalize:r(351),Random:r(816),RandomDegrees:r(817),Reverse:r(818),RotateTo:r(819),ShortestBetween:r(820),Wrap:r(269),WrapDegrees:r(270)}},function(t,i){t.exports=function BetweenPointsY(t,i){return Math.atan2(i.x-t.x,i.y-t.y)}},function(t,i){t.exports=function BetweenY(t,i,r,o){return Math.atan2(r-t,o-i)}},function(t,i,r){var o=r(14);t.exports=function CounterClockwise(t){return t>Math.PI&&(t-=o.PI2),Math.abs(((t+o.TAU)%o.PI2-o.PI2)%o.PI2)}},function(t,i,r){var o=r(137);t.exports=function Random(){return o(-Math.PI,Math.PI)}},function(t,i,r){var o=r(137);t.exports=function RandomDegrees(){return o(-180,180)}},function(t,i,r){var o=r(351);t.exports=function Reverse(t){return o(t+Math.PI)}},function(t,i,r){var o=r(14);t.exports=function RotateTo(t,i,r){return void 0===r&&(r=.05),t===i||(Math.abs(i-t)<=r||Math.abs(i-t)>=o.PI2-r?t=i:(Math.abs(i-t)>Math.PI&&(i<t?i+=o.PI2:i-=o.PI2),i>t?t+=r:i<t&&(t-=r))),t}},function(t,i){t.exports=function ShortestBetween(t,i){var r=i-t;return 0===r?0:r-360*Math.floor((r- -180)/360)}},function(t,i,r){t.exports={Between:r(50),BetweenPoints:r(352),BetweenPointsSquared:r(822),Chebyshev:r(823),Power:r(824),Snake:r(825),Squared:r(353)}},function(t,i){t.exports=function DistanceBetweenPointsSquared(t,i){var r=t.x-i.x,o=t.y-i.y;return r*r+o*o}},function(t,i){t.exports=function ChebyshevDistance(t,i,r,o){return Math.max(Math.abs(t-r),Math.abs(i-o))}},function(t,i){t.exports=function DistancePower(t,i,r,o,a){return void 0===a&&(a=2),Math.sqrt(Math.pow(r-t,a)+Math.pow(o-i,a))}},function(t,i){t.exports=function SnakeDistance(t,i,r,o){return Math.abs(t-r)+Math.abs(i-o)}},function(t,i,r){t.exports={Back:r(334),Bounce:r(335),Circular:r(336),Cubic:r(337),Elastic:r(338),Expo:r(339),Linear:r(340),Quadratic:r(341),Quartic:r(342),Quintic:r(343),Sine:r(344),Stepped:r(345)}},function(t,i,r){t.exports={Ceil:r(828),Equal:r(124),Floor:r(829),GreaterThan:r(354),LessThan:r(355)}},function(t,i){t.exports=function Ceil(t,i){return void 0===i&&(i=1e-4),Math.ceil(t-i)}},function(t,i){t.exports=function Floor(t,i){return void 0===i&&(i=1e-4),Math.floor(t+i)}},function(t,i,r){t.exports={Bezier:r(831),CatmullRom:r(832),CubicBezier:r(358),Linear:r(833),QuadraticBezier:r(359),SmoothStep:r(360),SmootherStep:r(834)}},function(t,i,r){var o=r(356);t.exports=function BezierInterpolation(t,i){for(var r=0,a=t.length-1,h=0;h<=a;h++)r+=Math.pow(1-i,a-h)*Math.pow(i,h)*t[h]*o(a,h);return r}},function(t,i,r){var o=r(194);t.exports=function CatmullRomInterpolation(t,i){var r=t.length-1,a=r*i,h=Math.floor(a);return t[0]===t[r]?(i<0&&(h=Math.floor(a=r*(1+i))),o(a-h,t[(h-1+r)%r],t[h],t[(h+1)%r],t[(h+2)%r])):i<0?t[0]-(o(-a,t[0],t[0],t[1],t[1])-t[0]):i>1?t[r]-(o(a-r,t[r],t[r],t[r-1],t[r-1])-t[r]):o(a-h,t[h?h-1:0],t[h],t[r<h+1?r:h+1],t[r<h+2?r:h+2])}},function(t,i,r){var o=r(135);t.exports=function LinearInterpolation(t,i){var r=t.length-1,a=r*i,h=Math.floor(a);return i<0?o(t[0],t[1],a):i>1?o(t[r],t[r-1],r-a):o(t[h],t[h+1>r?r:h+1],a-h)}},function(t,i,r){var o=r(183);t.exports=function SmootherStepInterpolation(t,i,r){return i+(r-i)*o(t,0,1)}},function(t,i,r){t.exports={GetNext:r(361),IsSize:r(138),IsValue:r(836)}},function(t,i){t.exports=function IsValuePowerOfTwo(t){return t>0&&0==(t&t-1)}},function(t,i,r){t.exports={Ceil:r(139),Floor:r(76),To:r(838)}},function(t,i){t.exports=function SnapTo(t,i,r,o){return void 0===r&&(r=0),0===i?t:(t-=r,t=i*Math.round(t/i),o?(r+t)/i:r+t)}},function(t,i,r){var o=new(r(0))({initialize:function RandomDataGenerator(t){void 0===t&&(t=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],t&&this.init(t)},rnd:function rnd(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},hash:function hash(t){var i,r=this.n;t=t.toString();for(var o=0;o<t.length;o++)i=.02519603282416938*(r+=t.charCodeAt(o)),i-=r=i>>>0,r=(i*=r)>>>0,r+=4294967296*(i-=r);return this.n=r,2.3283064365386963e-10*(r>>>0)},init:function init(t){"string"==typeof t?this.state(t):this.sow(t)},sow:function sow(t){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,t)for(var i=0;i<t.length&&null!=t[i];i++){var r=t[i];this.s0-=this.hash(r),this.s0+=~~(this.s0<0),this.s1-=this.hash(r),this.s1+=~~(this.s1<0),this.s2-=this.hash(r),this.s2+=~~(this.s2<0)}},integer:function integer(){return 4294967296*this.rnd()},frac:function frac(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function real(){return this.integer()+this.frac()},integerInRange:function integerInRange(t,i){return Math.floor(this.realInRange(0,i-t+1)+t)},between:function between(t,i){return Math.floor(this.realInRange(0,i-t+1)+t)},realInRange:function realInRange(t,i){return this.frac()*(i-t)+t},normal:function normal(){return 1-2*this.frac()},uuid:function uuid(){var t="",i="";for(i=t="";t++<36;i+=~t%5|3*t&4?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return i},pick:function pick(t){return t[this.integerInRange(0,t.length-1)]},sign:function sign(){return this.pick(this.signs)},weightedPick:function weightedPick(t){return t[~~(Math.pow(this.frac(),2)*(t.length-1)+.5)]},timestamp:function timestamp(t,i){return this.realInRange(t||9466848e5,i||1577862e6)},angle:function angle(){return this.integerInRange(-180,180)},rotation:function rotation(){return this.realInRange(-3.1415926,3.1415926)},state:function state(t){return"string"==typeof t&&t.match(/^!rnd/)&&(t=t.split(","),this.c=parseFloat(t[1]),this.s0=parseFloat(t[2]),this.s1=parseFloat(t[3]),this.s2=parseFloat(t[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function shuffle(t){for(var i=t.length-1;i>0;i--){var r=Math.floor(this.frac()*(i+1)),o=t[r];t[r]=t[i],t[i]=o}return t}});t.exports=o},function(t,i){t.exports=function Average(t){for(var i=0,r=0;r<t.length;r++)i+=+t[r];return i/t.length}},function(t,i){t.exports=function CeilTo(t,i,r){void 0===i&&(i=0),void 0===r&&(r=10);var o=Math.pow(r,-i);return Math.ceil(t*o)/o}},function(t,i){t.exports=function Difference(t,i){return Math.abs(t-i)}},function(t,i,r){var o=r(18),a=r(0),h=r(69),l=r(1),u=new h,c=new a({initialize:function Euler(t,i,r,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=Euler.DefaultOrder),this._x=t,this._y=i,this._z=r,this._order=o,this.onChangeCallback=l},x:{get:function get(){return this._x},set:function set(t){this._x=t,this.onChangeCallback(this)}},y:{get:function get(){return this._y},set:function set(t){this._y=t,this.onChangeCallback(this)}},z:{get:function get(){return this._z},set:function set(t){this._z=t,this.onChangeCallback(this)}},order:{get:function get(){return this._order},set:function set(t){this._order=t,this.onChangeCallback(this)}},set:function set(t,i,r,o){return void 0===o&&(o=this._order),this._x=t,this._y=i,this._z=r,this._order=o,this.onChangeCallback(this),this},copy:function copy(t){return this.set(t.x,t.y,t.z,t.order)},setFromQuaternion:function setFromQuaternion(t,i,r){return void 0===i&&(i=this._order),void 0===r&&(r=!1),u.fromQuat(t),this.setFromRotationMatrix(u,i,r)},setFromRotationMatrix:function setFromRotationMatrix(t,i,r){void 0===i&&(i=this._order),void 0===r&&(r=!1);var a=t.val,h=a[0],l=a[4],u=a[8],c=a[1],d=a[5],p=a[9],g=a[2],v=a[6],m=a[10],y=0,T=0,S=0,w=.99999;switch(i){case"XYZ":T=Math.asin(o(u,-1,1)),Math.abs(u)<w?(y=Math.atan2(-p,m),S=Math.atan2(-l,h)):y=Math.atan2(v,d);break;case"YXZ":y=Math.asin(-o(p,-1,1)),Math.abs(p)<w?(T=Math.atan2(u,m),S=Math.atan2(c,d)):T=Math.atan2(-g,h);break;case"ZXY":y=Math.asin(o(v,-1,1)),Math.abs(v)<w?(T=Math.atan2(-g,m),S=Math.atan2(-l,d)):S=Math.atan2(c,h);break;case"ZYX":T=Math.asin(-o(g,-1,1)),Math.abs(g)<w?(y=Math.atan2(v,m),S=Math.atan2(c,h)):S=Math.atan2(-l,d);break;case"YZX":S=Math.asin(o(c,-1,1)),Math.abs(c)<w?(y=Math.atan2(-p,d),T=Math.atan2(-g,h)):T=Math.atan2(u,m);break;case"XZY":S=Math.asin(-o(l,-1,1)),Math.abs(l)<w?(y=Math.atan2(v,d),T=Math.atan2(u,h)):y=Math.atan2(-p,m)}return this._x=y,this._y=T,this._z=S,this._order=i,r&&this.onChangeCallback(this),this}});c.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],c.DefaultOrder="XYZ",t.exports=c},function(t,i){t.exports=function FloorTo(t,i,r){void 0===i&&(i=0),void 0===r&&(r=10);var o=Math.pow(r,-i);return Math.floor(t*o)/o}},function(t,i){t.exports=function GetSpeed(t,i){return t/i/1e3}},function(t,i){t.exports=function IsEven(t){return t==parseFloat(t)?!(t%2):void 0}},function(t,i){t.exports=function IsEvenStrict(t){return t===parseFloat(t)?!(t%2):void 0}},function(t,i){t.exports=function MaxAdd(t,i,r){return Math.min(t+i,r)}},function(t,i){t.exports=function Median(t){var i=t.length;if(0===i)return 0;t.sort((function(t,i){return t-i}));var r=Math.floor(i/2);return i%2==0?(t[r]+t[r-1])/2:t[r]}},function(t,i){t.exports=function MinSub(t,i,r){return Math.max(t-i,r)}},function(t,i){t.exports=function Percent(t,i,r,o){void 0===r&&(r=i+1);var a=(t-i)/(r-i);return a>1?void 0!==o?(a=(o-t)/(o-r))<0&&(a=0):a=1:a<0&&(a=0),a}},function(t,i){t.exports=function RandomXY(t,i){void 0===i&&(i=1);var r=2*Math.random()*Math.PI;return t.x=Math.cos(r)*i,t.y=Math.sin(r)*i,t}},function(t,i){t.exports=function RandomXYZ(t,i){void 0===i&&(i=1);var r=2*Math.random()*Math.PI,o=2*Math.random()-1,a=Math.sqrt(1-o*o)*i;return t.x=Math.cos(r)*a,t.y=Math.sin(r)*a,t.z=o*i,t}},function(t,i){t.exports=function RandomXYZW(t,i){return void 0===i&&(i=1),t.x=(2*Math.random()-1)*i,t.y=(2*Math.random()-1)*i,t.z=(2*Math.random()-1)*i,t.w=(2*Math.random()-1)*i,t}},function(t,i){t.exports=function RotateTo(t,i,r,o,a){return t.x=i+a*Math.cos(o),t.y=r+a*Math.sin(o),t}},function(t,i){t.exports=function RoundTo(t,i,r){void 0===i&&(i=0),void 0===r&&(r=10);var o=Math.pow(r,-i);return Math.round(t*o)/o}},function(t,i){t.exports=function SinCosTableGenerator(t,i,r,o){void 0===i&&(i=1),void 0===r&&(r=1),void 0===o&&(o=1),o*=Math.PI/t;for(var a=[],h=[],l=0;l<t;l++)i+=(r-=i*o)*o,a[l]=r,h[l]=i;return{sin:h,cos:a,length:t}}},function(t,i,r){var o=r(3);t.exports=function ToXY(t,i,r,a){void 0===a&&(a=new o);var h=0,l=0;return t>0&&t<=i*r&&(h=t>i-1?t-(l=Math.floor(t/i))*i:t),a.set(h,l)}},function(t,i){t.exports=function Within(t,i,r){return Math.abs(t-i)<=r}},function(t,i,r){var o=r(39),a=r(69),h=r(365),l=new a,u=new h,c=new o;t.exports=function RotateVec3(t,i,r){return u.setAxisAngle(i,r),l.fromRotationTranslation(u,c.set(0,0,0)),t.transformMat4(l)}},function(t,i){t.exports="addtexture"},function(t,i){t.exports="onerror"},function(t,i){t.exports="onload"},function(t,i){t.exports="ready"},function(t,i){t.exports="removetexture"},function(t,i){t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join("\n")},function(t,i){t.exports="pipelineafterflush"},function(t,i){t.exports="pipelinebeforeflush"},function(t,i){t.exports="pipelinebind"},function(t,i){t.exports="pipelineboot"},function(t,i){t.exports="pipelinedestroy"},function(t,i){t.exports="pipelinerebind"},function(t,i){t.exports="pipelineresize"},function(t,i){t.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join("\n")},function(t,i){t.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join("\n")},function(t,i,r){t.exports={GenerateTexture:r(388),Palettes:r(889)}},function(t,i,r){t.exports={ARNE16:r(389),C64:r(890),CGA:r(891),JMP:r(892),MSX:r(893)}},function(t,i){t.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(t,i){t.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(t,i){t.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(t,i){t.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(t,i,r){t.exports={Path:r(895),MoveTo:r(393),CubicBezier:r(390),Curve:r(94),Ellipse:r(391),Line:r(392),QuadraticBezier:r(394),Spline:r(395)}},function(t,i,r){var o=r(0),a=r(390),h=r(391),l=r(5),u=r(392),c=r(393),d=r(394),p=r(10),g=r(395),v=r(3),m=r(14),y=new o({initialize:function Path(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new v,this._tmpVec2A=new v,this._tmpVec2B=new v,"object"===_typeof(t)?this.fromJSON(t):this.startPoint.set(t,i)},add:function add(t){return this.curves.push(t),this},circleTo:function circleTo(t,i,r){return void 0===i&&(i=!1),this.ellipseTo(t,t,0,360,i,r)},closePath:function closePath(){var t=this.curves[0].getPoint(0),i=this.curves[this.curves.length-1].getPoint(1);return t.equals(i)||this.curves.push(new u(i,t)),this},cubicBezierTo:function cubicBezierTo(t,i,r,o,h,l){var u,c,d,p=this.getEndPoint();return t instanceof v?(u=t,c=i,d=r):(u=new v(r,o),c=new v(h,l),d=new v(t,i)),this.add(new a(p,u,c,d))},quadraticBezierTo:function quadraticBezierTo(t,i,r,o){var a,h,l=this.getEndPoint();return t instanceof v?(a=t,h=i):(a=new v(r,o),h=new v(t,i)),this.add(new d(l,a,h))},draw:function draw(t,i){for(var r=0;r<this.curves.length;r++){var o=this.curves[r];o.active&&o.draw(t,i)}return t},ellipseTo:function ellipseTo(t,i,r,o,a,l){var u=new h(0,0,t,i,r,o,a,l),c=this.getEndPoint(this._tmpVec2A),d=u.getStartPoint(this._tmpVec2B);return c.subtract(d),u.x=c.x,u.y=c.y,this.add(u)},fromJSON:function fromJSON(t){this.curves=[],this.cacheLengths=[],this.startPoint.set(t.x,t.y),this.autoClose=t.autoClose;for(var i=0;i<t.curves.length;i++){var r=t.curves[i];switch(r.type){case"LineCurve":this.add(u.fromJSON(r));break;case"EllipseCurve":this.add(h.fromJSON(r));break;case"SplineCurve":this.add(g.fromJSON(r));break;case"CubicBezierCurve":this.add(a.fromJSON(r));break;case"QuadraticBezierCurve":this.add(d.fromJSON(r))}}return this},getBounds:function getBounds(t,i){void 0===t&&(t=new p),void 0===i&&(i=16),t.x=Number.MAX_VALUE,t.y=Number.MAX_VALUE;for(var r=new p,o=m.MIN_SAFE_INTEGER,a=m.MIN_SAFE_INTEGER,h=0;h<this.curves.length;h++){var l=this.curves[h];l.active&&(l.getBounds(r,i),t.x=Math.min(t.x,r.x),t.y=Math.min(t.y,r.y),o=Math.max(o,r.right),a=Math.max(a,r.bottom))}return t.right=o,t.bottom=a,t},getCurveLengths:function getCurveLengths(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],i=0,r=0;r<this.curves.length;r++)i+=this.curves[r].getLength(),t.push(i);return this.cacheLengths=t,t},getEndPoint:function getEndPoint(t){return void 0===t&&(t=new v),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,t):t.copy(this.startPoint),t},getLength:function getLength(){var t=this.getCurveLengths();return t[t.length-1]},getPoint:function getPoint(t,i){void 0===i&&(i=new v);for(var r=t*this.getLength(),o=this.getCurveLengths(),a=0;a<o.length;){if(o[a]>=r){var h=o[a]-r,l=this.curves[a],u=l.getLength(),c=0===u?0:1-h/u;return l.getPointAt(c,i)}a++}return null},getPoints:function getPoints(t){void 0===t&&(t=12);for(var i,r=[],o=0;o<this.curves.length;o++){var a=this.curves[o];if(a.active)for(var h=a.getResolution(t),l=a.getPoints(h),u=0;u<l.length;u++){var c=l[u];i&&i.equals(c)||(r.push(c),i=c)}}return this.autoClose&&r.length>1&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r},getRandomPoint:function getRandomPoint(t){return void 0===t&&(t=new v),this.getPoint(Math.random(),t)},getSpacedPoints:function getSpacedPoints(t){void 0===t&&(t=40);for(var i=[],r=0;r<=t;r++)i.push(this.getPoint(r/t));return this.autoClose&&i.push(i[0]),i},getStartPoint:function getStartPoint(t){return void 0===t&&(t=new v),t.copy(this.startPoint)},getTangent:function getTangent(t,i){void 0===i&&(i=new v);for(var r=t*this.getLength(),o=this.getCurveLengths(),a=0;a<o.length;){if(o[a]>=r){var h=o[a]-r,l=this.curves[a],u=l.getLength(),c=0===u?0:1-h/u;return l.getTangentAt(c,i)}a++}return null},lineTo:function lineTo(t,i){t instanceof v?this._tmpVec2B.copy(t):this._tmpVec2B.set(t,i);var r=this.getEndPoint(this._tmpVec2A);return this.add(new u([r.x,r.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function splineTo(t){return t.unshift(this.getEndPoint()),this.add(new g(t))},moveTo:function moveTo(t,i){return t instanceof v?this.add(new c(t.x,t.y)):this.add(new c(t,i))},toJSON:function toJSON(){for(var t=[],i=0;i<this.curves.length;i++)t.push(this.curves[i].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:t}},updateArcLengths:function updateArcLengths(){this.cacheLengths=[],this.getCurveLengths()},destroy:function destroy(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});l.register("path",(function(t,i){return new y(t,i)})),t.exports=y},function(t,i,r){t.exports={DataManager:r(101),DataManagerPlugin:r(897),Events:r(315)}},function(t,i,r){var o=r(0),a=r(101),h=r(24),l=r(20),u=new o({Extends:a,initialize:function DataManagerPlugin(t){a.call(this,t,t.sys.events),this.scene=t,this.systems=t.sys,t.sys.events.once(l.BOOT,this.boot,this),t.sys.events.on(l.START,this.start,this)},boot:function boot(){this.events=this.systems.events,this.events.once(l.DESTROY,this.destroy,this)},start:function start(){this.events.once(l.SHUTDOWN,this.shutdown,this)},shutdown:function shutdown(){this.systems.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){a.prototype.destroy.call(this),this.events.off(l.START,this.start,this),this.scene=null,this.systems=null}});h.register("DataManagerPlugin",u,"data"),t.exports=u},function(t,i,r){t.exports={Align:r(899),BaseShader:r(396),Bounds:r(902),Canvas:r(906),Color:r(397),ColorMatrix:r(198),Masks:r(916),RGB:r(200)}},function(t,i,r){var o=r(123),a=r(17),h={In:r(900),To:r(901)};h=a(!1,h,o),t.exports=h},function(t,i,r){t.exports={BottomCenter:r(290),BottomLeft:r(291),BottomRight:r(292),Center:r(293),LeftCenter:r(295),QuickSet:r(289),RightCenter:r(296),TopCenter:r(297),TopLeft:r(298),TopRight:r(299)}},function(t,i,r){t.exports={BottomCenter:r(277),BottomLeft:r(278),BottomRight:r(279),LeftBottom:r(280),LeftCenter:r(281),LeftTop:r(282),QuickSet:r(276),RightBottom:r(283),RightCenter:r(284),RightTop:r(285),TopCenter:r(286),TopLeft:r(287),TopRight:r(288)}},function(t,i,r){t.exports={CenterOn:r(294),GetBottom:r(42),GetBounds:r(903),GetCenterX:r(87),GetCenterY:r(89),GetLeft:r(43),GetOffsetX:r(904),GetOffsetY:r(905),GetRight:r(44),GetTop:r(45),SetBottom:r(55),SetCenterX:r(88),SetCenterY:r(90),SetLeft:r(53),SetRight:r(54),SetTop:r(52)}},function(t,i,r){var o=r(42),a=r(43),h=r(44),l=r(45);t.exports=function GetBounds(t,i){void 0===i&&(i={});var r=a(t),u=l(t);return i.x=r,i.y=u,i.width=h(t)-r,i.height=o(t)-u,i}},function(t,i){t.exports=function GetOffsetX(t){return t.width*t.originX}},function(t,i){t.exports=function GetOffsetY(t){return t.height*t.originY}},function(t,i,r){t.exports={CanvasInterpolation:r(367),CanvasPool:r(31),Smoothing:r(192),TouchAction:r(907),UserSelect:r(908)}},function(t,i){t.exports=function TouchAction(t,i){return void 0===i&&(i="none"),t.style.msTouchAction=i,t.style["ms-touch-action"]=i,t.style["touch-action"]=i,t}},function(t,i){t.exports=function UserSelect(t,i){return void 0===i&&(i="none"),["-webkit-","-khtml-","-moz-","-ms-",""].forEach((function(r){t.style[r+"user-select"]=i})),t.style["-webkit-touch-callout"]=i,t.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",t}},function(t,i,r){var o=r(103);t.exports=function ColorSpectrum(t){void 0===t&&(t=1024);var i,r=[],a=255,h=255,l=0,u=0;for(i=0;i<=a;i++)r.push({r:h,g:i,b:u,color:o(h,i,u)});for(l=255,i=a;i>=0;i--)r.push({r:i,g:l,b:u,color:o(i,l,u)});for(h=0,i=0;i<=a;i++,l--)r.push({r:h,g:l,b:i,color:o(h,l,i)});for(l=0,u=255,i=0;i<=a;i++,u--,h++)r.push({r:h,g:l,b:u,color:o(h,l,u)});if(1024===t)return r;var c=[],d=0,p=1024/t;for(i=0;i<t;i++)c.push(r[Math.floor(d)]),d+=p;return c}},function(t,i){t.exports=function ColorToRGBA(t){var i={r:t>>16&255,g:t>>8&255,b:255&t,a:255};return t>16777215&&(i.a=t>>>24),i}},function(t,i,r){var o=r(38),a=r(399);t.exports=function HSLToColor(t,i,r){var h=r,l=r,u=r;if(0!==i){var c=r<.5?r*(1+i):r+i-r*i,d=2*r-c;h=a(d,c,t+1/3),l=a(d,c,t),u=a(d,c,t-1/3)}return(new o).setGLTo(h,l,u,1)}},function(t,i,r){var o=r(188);t.exports=function HSVColorWheel(t,i){void 0===t&&(t=1),void 0===i&&(i=1);for(var r=[],a=0;a<=359;a++)r.push(o(a/359,t,i));return r}},function(t,i,r){var o=r(135),a=function RGBWithRGB(t,i,r,a,h,l,u,c){void 0===u&&(u=100),void 0===c&&(c=0);var d=c/u;return{r:o(t,a,d),g:o(i,h,d),b:o(r,l,d)}};t.exports={RGBWithRGB:a,ColorWithRGB:function ColorWithRGB(t,i,r,o,h,l){return void 0===h&&(h=100),void 0===l&&(l=0),a(t.r,t.g,t.b,i,r,o,h,l)},ColorWithColor:function ColorWithColor(t,i,r,o){return void 0===r&&(r=100),void 0===o&&(o=0),a(t.r,t.g,t.b,i.r,i.g,i.b,r,o)}}},function(t,i,r){var o=r(195),a=r(38);t.exports=function RandomRGB(t,i){return void 0===t&&(t=0),void 0===i&&(i=255),new a(o(t,i),o(t,i),o(t,i))}},function(t,i,r){var o=r(398);t.exports=function RGBToString(t,i,r,a,h){return void 0===a&&(a=255),void 0===h&&(h="#"),"#"===h?"#"+((1<<24)+(t<<16)+(i<<8)+r).toString(16).slice(1,7):"0x"+o(a)+o(t)+o(i)+o(r)}},function(t,i,r){t.exports={BitmapMask:r(310),GeometryMask:r(311)}},function(t,i,r){var o={AddToDOM:r(142),DOMContentLoaded:r(400),GetInnerHeight:r(401),GetScreenOrientation:r(402),GetTarget:r(407),ParseXML:r(408),RemoveFromDOM:r(202),RequestAnimationFrame:r(386)};t.exports=o},function(t,i,r){t.exports={EventEmitter:r(919)}},function(t,i,r){var o=r(0),a=r(9),h=r(24),l=new o({Extends:a,initialize:function EventEmitter(){a.call(this)},shutdown:function shutdown(){this.removeAllListeners()},destroy:function destroy(){this.removeAllListeners()}});h.register("EventEmitter",l,"events"),t.exports=l},function(t,i,r){var o=r(142),a=r(321),h=r(325),l=r(31),u=r(0),c=r(346),d=r(921),p=r(366),g=r(101),v=r(384),m=r(347),y=r(400),T=r(9),S=r(22),w=r(409),b=r(24),C=r(414),A=r(415),E=r(417),M=r(106),_=r(422),R=r(385),P=r(387),k=r(426),O=new u({initialize:function Game(t){this.config=new c(t),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new T,this.anims=new a(this),this.textures=new _(this),this.cache=new h(this),this.registry=new g(this),this.input=new w(this,this.config),this.scene=new E(this,this.config.sceneConfig),this.device=m,this.scale=new A(this,this.config),this.sound=null,this.sound=k.create(this),this.loop=new R(this,this.config.fps),this.plugins=new C(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,y(this.boot.bind(this))},boot:function boot(){b.hasCore("EventEmitter")?(this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),p(this),d(this),v(this),o(this.canvas,this.config.parent),this.textures.once(M.READY,this.texturesReady,this),this.events.emit(S.BOOT)):console.warn("Aborting. Core Plugins missing.")},texturesReady:function texturesReady(){this.events.emit(S.READY),this.start()},start:function start(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),P(this);var t=this.events;t.on(S.HIDDEN,this.onHidden,this),t.on(S.VISIBLE,this.onVisible,this),t.on(S.BLUR,this.onBlur,this),t.on(S.FOCUS,this.onFocus,this)},step:function step(t,i){if(this.pendingDestroy)return this.runDestroy();var r=this.events;r.emit(S.PRE_STEP,t,i),r.emit(S.STEP,t,i),this.scene.update(t,i),r.emit(S.POST_STEP,t,i);var o=this.renderer;o.preRender(),r.emit(S.PRE_RENDER,o,t,i),this.scene.render(o),o.postRender(),r.emit(S.POST_RENDER,o,t,i)},headlessStep:function headlessStep(t,i){if(this.pendingDestroy)return this.runDestroy();var r=this.events;r.emit(S.PRE_STEP,t,i),r.emit(S.STEP,t,i),this.scene.update(t,i),r.emit(S.POST_STEP,t,i),r.emit(S.PRE_RENDER),r.emit(S.POST_RENDER)},onHidden:function onHidden(){this.loop.pause(),this.events.emit(S.PAUSE)},onVisible:function onVisible(){this.loop.resume(),this.events.emit(S.RESUME)},onBlur:function onBlur(){this.hasFocus=!1,this.loop.blur()},onFocus:function onFocus(){this.hasFocus=!0,this.loop.focus()},getFrame:function getFrame(){return this.loop.frame},getTime:function getTime(){return this.loop.now},destroy:function destroy(t,i){void 0===i&&(i=!1),this.pendingDestroy=!0,this.removeCanvas=t,this.noReturn=i},runDestroy:function runDestroy(){this.scene.destroy(),this.events.emit(S.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(l.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});t.exports=O},function(t,i,r){var o=r(142);t.exports=function CreateDOMContainer(t){var i=t.config;if(i.parent&&i.domCreateContainer){var r=document.createElement("div");r.style.cssText=["display: block;","width: "+t.scale.width+"px;","height: "+t.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+i.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),t.domContainer=r,o(r,i.parent)}}},function(t,i){t.exports="boot"},function(t,i){t.exports="destroy"},function(t,i){t.exports="dragend"},function(t,i){t.exports="dragenter"},function(t,i){t.exports="drag"},function(t,i){t.exports="dragleave"},function(t,i){t.exports="dragover"},function(t,i){t.exports="dragstart"},function(t,i){t.exports="drop"},function(t,i){t.exports="gameout"},function(t,i){t.exports="gameover"},function(t,i){t.exports="gameobjectdown"},function(t,i){t.exports="dragend"},function(t,i){t.exports="dragenter"},function(t,i){t.exports="drag"},function(t,i){t.exports="dragleave"},function(t,i){t.exports="dragover"},function(t,i){t.exports="dragstart"},function(t,i){t.exports="drop"},function(t,i){t.exports="gameobjectmove"},function(t,i){t.exports="gameobjectout"},function(t,i){t.exports="gameobjectover"},function(t,i){t.exports="pointerdown"},function(t,i){t.exports="pointermove"},function(t,i){t.exports="pointerout"},function(t,i){t.exports="pointerover"},function(t,i){t.exports="pointerup"},function(t,i){t.exports="wheel"},function(t,i){t.exports="gameobjectup"},function(t,i){t.exports="gameobjectwheel"},function(t,i){t.exports="boot"},function(t,i){t.exports="process"},function(t,i){t.exports="update"},function(t,i){t.exports="pointerdown"},function(t,i){t.exports="pointerdownoutside"},function(t,i){t.exports="pointermove"},function(t,i){t.exports="pointerout"},function(t,i){t.exports="pointerover"},function(t,i){t.exports="pointerup"},function(t,i){t.exports="pointerupoutside"},function(t,i){t.exports="wheel"},function(t,i){t.exports="pointerlockchange"},function(t,i){t.exports="preupdate"},function(t,i){t.exports="shutdown"},function(t,i){t.exports="start"},function(t,i){t.exports="update"},function(t,i){t.exports="addfile"},function(t,i){t.exports="complete"},function(t,i){t.exports="filecomplete"},function(t,i){t.exports="filecomplete-"},function(t,i){t.exports="loaderror"},function(t,i){t.exports="load"},function(t,i){t.exports="fileprogress"},function(t,i){t.exports="postprocess"},function(t,i){t.exports="progress"},function(t,i){t.exports="start"},function(t,i,r){t.exports={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"}},function(t,i){t.exports=function AtlasXML(t,i,r){if(r.getElementsByTagName("TextureAtlas")){var o=t.source[i];t.add("__BASE",i,0,0,o.width,o.height);for(var a,h=r.getElementsByTagName("SubTexture"),l=0;l<h.length;l++){var u=h[l].attributes,c=u.name.value,d=parseInt(u.x.value,10),p=parseInt(u.y.value,10),g=parseInt(u.width.value,10),v=parseInt(u.height.value,10);if(a=t.add(c,i,d,p,g,v),u.frameX){var m=Math.abs(parseInt(u.frameX.value,10)),y=Math.abs(parseInt(u.frameY.value,10)),T=parseInt(u.frameWidth.value,10),S=parseInt(u.frameHeight.value,10);a.setTrim(g,v,m,y,T,S)}}return t}console.warn("Invalid Texture Atlas XML given")}},function(t,i){t.exports=function Canvas(t,i){var r=t.source[i];return t.add("__BASE",i,0,0,r.width,r.height),t}},function(t,i){t.exports=function Image(t,i){var r=t.source[i];return t.add("__BASE",i,0,0,r.width,r.height),t}},function(t,i,r){var o=r(77);t.exports=function JSONArray(t,i,r){if(r.frames||r.textures){var a=t.source[i];t.add("__BASE",i,0,0,a.width,a.height);for(var h,l=Array.isArray(r.textures)?r.textures[i].frames:r.frames,u=0;u<l.length;u++){var c=l[u];h=t.add(c.filename,i,c.frame.x,c.frame.y,c.frame.w,c.frame.h),c.trimmed&&h.setTrim(c.sourceSize.w,c.sourceSize.h,c.spriteSourceSize.x,c.spriteSourceSize.y,c.spriteSourceSize.w,c.spriteSourceSize.h),c.rotated&&(h.rotated=!0,h.updateUVsInverted());var d=c.anchor||c.pivot;d&&(h.customPivot=!0,h.pivotX=d.x,h.pivotY=d.y),h.customData=o(c)}for(var p in r)"frames"!==p&&(Array.isArray(r[p])?t.customData[p]=r[p].slice(0):t.customData[p]=r[p]);return t}console.warn("Invalid Texture Atlas JSON Array")}},function(t,i,r){var o=r(77);t.exports=function JSONHash(t,i,r){if(r.frames){var a=t.source[i];t.add("__BASE",i,0,0,a.width,a.height);var h,l=r.frames;for(var u in l)if(l.hasOwnProperty(u)){var c=l[u];h=t.add(u,i,c.frame.x,c.frame.y,c.frame.w,c.frame.h),c.trimmed&&h.setTrim(c.sourceSize.w,c.sourceSize.h,c.spriteSourceSize.x,c.spriteSourceSize.y,c.spriteSourceSize.w,c.spriteSourceSize.h),c.rotated&&(h.rotated=!0,h.updateUVsInverted());var d=c.anchor||c.pivot;d&&(h.customPivot=!0,h.pivotX=d.x,h.pivotY=d.y),h.customData=o(c)}for(var p in r)"frames"!==p&&(Array.isArray(r[p])?t.customData[p]=r[p].slice(0):t.customData[p]=r[p]);return t}console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object")}},function(t,i,r){var o=r(2);t.exports=function SpriteSheet(t,i,r,a,h,l,u){var c=o(u,"frameWidth",null),d=o(u,"frameHeight",c);if(null===c)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var p=t.source[i];t.add("__BASE",i,0,0,p.width,p.height);var g=o(u,"startFrame",0),v=o(u,"endFrame",-1),m=o(u,"margin",0),y=o(u,"spacing",0),T=Math.floor((h-m+y)/(c+y))*Math.floor((l-m+y)/(d+y));0===T&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",t.key),(g>T||g<-T)&&(g=0),g<0&&(g=T+g),-1!==v&&(T=g+(v+1));for(var S=m,w=m,b=0,C=0,A=0;A<T;A++){b=0,C=0;var E=S+c,M=w+d;E>h&&(b=E-h),M>l&&(C=M-l),t.add(A,i,r+S,a+w,c-b,d-C),(S+=c+y)+c>h&&(S=m,w+=d+y)}return t}},function(t,i,r){var o=r(2);t.exports=function SpriteSheetFromAtlas(t,i,r){var a=o(r,"frameWidth",null),h=o(r,"frameHeight",a);if(!a)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var l=t.source[0];t.add("__BASE",0,0,0,l.width,l.height),o(r,"startFrame",0),o(r,"endFrame",-1);for(var u,c=o(r,"margin",0),d=o(r,"spacing",0),p=i.cutX,g=i.cutY,v=i.cutWidth,m=i.cutHeight,y=i.realWidth,T=i.realHeight,S=Math.floor((y-c+d)/(a+d)),w=Math.floor((T-c+d)/(h+d)),b=i.x,C=a-b,A=a-(y-v-b),E=i.y,M=h-E,_=h-(T-m-E),R=c,P=c,k=0,O=i.sourceIndex,L=0;L<w;L++){for(var D=0===L,I=L===w-1,B=0;B<S;B++){var N=0===B,G=B===S-1;if(u=t.add(k,O,p+R,g+P,a,h),N||D||G||I){var Y=N?b:0,U=D?E:0,X=0,V=0;N&&(X+=a-C),G&&(X+=a-A),D&&(V+=h-M),I&&(V+=h-_);var z=a-X,W=h-V;u.cutWidth=z,u.cutHeight=W,u.setTrim(a,h,Y,U,z,W)}R+=d,R+=N?C:G?A:a,k++}R=c,P+=d,P+=D?M:I?_:h}return t}},function(t,i){var r=0,o=function addFrame(t,i,o,a){var h=r-a.y-a.height;t.add(o,i,a.x,h,a.width,a.height)};t.exports=function UnityYAML(t,i,a){var h=t.source[i];t.add("__BASE",i,0,0,h.width,h.height),r=h.height;for(var l=a.split("\n"),u=/^[ ]*(- )*(\w+)+[: ]+(.*)/,c="",d="",p={x:0,y:0,width:0,height:0},g=0;g<l.length;g++){var v=l[g].match(u);if(v){var m="- "===v[1],y=v[2],T=v[3];if(m&&(d!==c&&(o(t,i,d,p),c=d),p={x:0,y:0,width:0,height:0}),"name"!==y)switch(y){case"x":case"y":case"width":case"height":p[y]=parseInt(T,10)}else d=T}}return d!==c&&o(t,i,d,p),t}},function(t,i){t.exports="complete"},function(t,i){t.exports="decoded"},function(t,i){t.exports="decodedall"},function(t,i){t.exports="destroy"},function(t,i){t.exports="detune"},function(t,i){t.exports="detune"},function(t,i){t.exports="mute"},function(t,i){t.exports="rate"},function(t,i){t.exports="volume"},function(t,i){t.exports="loop"},function(t,i){t.exports="looped"},function(t,i){t.exports="mute"},function(t,i){t.exports="pan"},function(t,i){t.exports="pauseall"},function(t,i){t.exports="pause"},function(t,i){t.exports="play"},function(t,i){t.exports="rate"},function(t,i){t.exports="resumeall"},function(t,i){t.exports="resume"},function(t,i){t.exports="seek"},function(t,i){t.exports="stopall"},function(t,i){t.exports="stop"},function(t,i){t.exports="unlocked"},function(t,i){t.exports="volume"},function(t,i,r){var o={Events:r(75),DisplayList:r(1012),GameObjectCreator:r(16),GameObjectFactory:r(5),UpdateList:r(1040),Components:r(11),GetCalcMatrix:r(19),BuildGameObject:r(28),BuildGameObjectAnimation:r(439),GameObject:r(15),BitmapText:r(148),Blitter:r(213),Bob:r(440),Container:r(214),DOMElement:r(442),DynamicBitmapText:r(215),Extern:r(444),Graphics:r(216),Group:r(113),Image:r(125),Layer:r(219),Particles:r(1074),PathFollower:r(457),RenderTexture:r(221),RetroFont:r(1082),Rope:r(223),Sprite:r(73),Text:r(224),GetTextSize:r(458),MeasureText:r(460),TextStyle:r(459),TileSprite:r(225),Zone:r(129),Video:r(226),Shape:r(34),Arc:r(461),Curve:r(462),Ellipse:r(463),Grid:r(464),IsoBox:r(465),IsoTriangle:r(466),Line:r(467),Polygon:r(468),Rectangle:r(473),Star:r(474),Triangle:r(475),Factories:{Blitter:r(1130),Container:r(1131),DOMElement:r(1132),DynamicBitmapText:r(1133),Extern:r(1134),Graphics:r(1135),Group:r(1136),Image:r(1137),Layer:r(1138),Particles:r(1139),PathFollower:r(1140),RenderTexture:r(1141),Rope:r(1142),Sprite:r(1143),StaticBitmapText:r(1144),Text:r(1145),TileSprite:r(1146),Zone:r(1147),Video:r(1148),Arc:r(1149),Curve:r(1150),Ellipse:r(1151),Grid:r(1152),IsoBox:r(1153),IsoTriangle:r(1154),Line:r(1155),Polygon:r(1156),Rectangle:r(1157),Star:r(1158),Triangle:r(1159)},Creators:{Blitter:r(1160),Container:r(1161),DynamicBitmapText:r(1162),Graphics:r(1163),Group:r(1164),Image:r(1165),Layer:r(1166),Particles:r(1167),RenderTexture:r(1168),Rope:r(1169),Sprite:r(1170),StaticBitmapText:r(1171),Text:r(1172),TileSprite:r(1173),Zone:r(1174),Video:r(1175)}};o.Shader=r(229),o.Mesh=r(230),o.PointLight=r(150),o.Factories.Shader=r(1184),o.Factories.Mesh=r(1185),o.Factories.PointLight=r(1186),o.Creators.Shader=r(1187),o.Creators.Mesh=r(1188),o.Creators.PointLight=r(1189),o.Light=r(481),o.LightsManager=r(482),o.LightsPlugin=r(1190),t.exports=o},function(t,i,r){var o=r(0),a=r(110),h=r(24),l=r(75),u=r(20),c=r(79),d=new o({Extends:a,initialize:function DisplayList(t){a.call(this,t),this.sortChildrenFlag=!1,this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(u.BOOT,this.boot,this),this.events.on(u.START,this.start,this)},boot:function boot(){this.events.once(u.DESTROY,this.destroy,this)},addChildCallback:function addChildCallback(t){t.displayList&&t.displayList!==this&&t.removeFromDisplayList(),t.displayList||(this.queueDepthSort(),t.displayList=this,t.emit(l.ADDED_TO_SCENE,t,this.scene),this.events.emit(u.ADDED_TO_SCENE,t,this.scene))},removeChildCallback:function removeChildCallback(t){this.queueDepthSort(),t.displayList=null,t.emit(l.REMOVED_FROM_SCENE,t,this.scene),this.events.emit(u.REMOVED_FROM_SCENE,t,this.scene)},start:function start(){this.events.once(u.SHUTDOWN,this.shutdown,this)},queueDepthSort:function queueDepthSort(){this.sortChildrenFlag=!0},depthSort:function depthSort(){this.sortChildrenFlag&&(c(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function sortByDepth(t,i){return t._depth-i._depth},getChildren:function getChildren(){return this.list},shutdown:function shutdown(){for(var t=this.list,i=t.length;i--;)t[i].destroy(!0);t.length=0,this.events.off(u.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown(),this.events.off(u.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});h.register("DisplayList",d,"displayList"),t.exports=d},function(t,i,r){t.exports={CheckMatrix:r(209),MatrixToString:r(1014),ReverseColumns:r(1015),ReverseRows:r(1016),Rotate180:r(1017),RotateLeft:r(1018),RotateMatrix:r(147),RotateRight:r(1019),Translate:r(1020),TransposeMatrix:r(435)}},function(t,i,r){var o=r(186),a=r(209);t.exports=function MatrixToString(t){var i="";if(!a(t))return i;for(var r=0;r<t.length;r++){for(var h=0;h<t[r].length;h++){var l=t[r][h].toString();i+="undefined"!==l?o(l,2):"?",h<t[r].length-1&&(i+=" |")}if(r<t.length-1){i+="\n";for(var u=0;u<t[r].length;u++)i+="---",u<t[r].length-1&&(i+="+");i+="\n"}}return i}},function(t,i){t.exports=function ReverseColumns(t){return t.reverse()}},function(t,i){t.exports=function ReverseRows(t){for(var i=0;i<t.length;i++)t[i].reverse();return t}},function(t,i,r){var o=r(147);t.exports=function Rotate180(t){return o(t,180)}},function(t,i,r){var o=r(147);t.exports=function RotateLeft(t){return o(t,90)}},function(t,i,r){var o=r(147);t.exports=function RotateRight(t){return o(t,-90)}},function(t,i,r){var o=r(178),a=r(179);t.exports=function TranslateMatrix(t,i,r){if(void 0===i&&(i=0),void 0===r&&(r=0),0!==r&&(r<0?o(t,Math.abs(r)):a(t,r)),0!==i)for(var h=0;h<t.length;h++){var l=t[h];i<0?o(l,Math.abs(i)):a(l,i)}return t}},function(t,i){t.exports=function Add(t,i,r,o,a){if(void 0===a&&(a=t),r>0){var h=r-t.length;if(h<=0)return null}if(!Array.isArray(i))return-1===t.indexOf(i)?(t.push(i),o&&o.call(a,i),i):null;for(var l=i.length-1;l>=0;)-1!==t.indexOf(i[l])&&i.splice(l,1),l--;if(0===(l=i.length))return null;r>0&&l>h&&(i.splice(h),l=h);for(var u=0;u<l;u++){var c=i[u];t.push(c),o&&o.call(a,c)}return i}},function(t,i){t.exports=function AddAt(t,i,r,o,a,h){if(void 0===r&&(r=0),void 0===h&&(h=t),o>0){var l=o-t.length;if(l<=0)return null}if(!Array.isArray(i))return-1===t.indexOf(i)?(t.splice(r,0,i),a&&a.call(h,i),i):null;for(var u=i.length-1;u>=0;)-1!==t.indexOf(i[u])&&i.pop(),u--;if(0===(u=i.length))return null;o>0&&u>l&&(i.splice(l),u=l);for(var c=u-1;c>=0;c--){var d=i[c];t.splice(r,0,d),a&&a.call(h,d)}return i}},function(t,i){t.exports=function BringToTop(t,i){var r=t.indexOf(i);return-1!==r&&r<t.length&&(t.splice(r,1),t.push(i)),i}},function(t,i,r){var o=r(78);t.exports=function CountAllMatching(t,i,r,a,h){void 0===a&&(a=0),void 0===h&&(h=t.length);var l=0;if(o(t,a,h))for(var u=a;u<h;u++)t[u][i]===r&&l++;return l}},function(t,i){t.exports=function Each(t,i,r){var o,a=[null];for(o=3;o<arguments.length;o++)a.push(arguments[o]);for(o=0;o<t.length;o++)a[0]=t[o],i.apply(r,a);return t}},function(t,i,r){var o=r(78);t.exports=function EachInRange(t,i,r,a,h){if(void 0===a&&(a=0),void 0===h&&(h=t.length),o(t,a,h)){var l,u=[null];for(l=5;l<arguments.length;l++)u.push(arguments[l]);for(l=a;l<h;l++)u[0]=t[l],i.apply(r,u)}return t}},function(t,i){t.exports=function MoveDown(t,i){var r=t.indexOf(i);if(r>0){var o=t[r-1],a=t.indexOf(o);t[r]=o,t[a]=i}return t}},function(t,i){t.exports=function MoveTo(t,i,r){var o=t.indexOf(i);if(-1===o||r<0||r>=t.length)throw new Error("Supplied index out of bounds");return o!==r&&(t.splice(o,1),t.splice(r,0,i)),i}},function(t,i){t.exports=function MoveUp(t,i){var r=t.indexOf(i);if(-1!==r&&r<t.length-1){var o=t[r+1],a=t.indexOf(o);t[r]=o,t[a]=i}return t}},function(t,i){t.exports=function MoveAbove(t,i,r){if(i===r)return t;var o=t.indexOf(i),a=t.indexOf(r);if(o<0||a<0)throw new Error("Supplied items must be elements of the same array");return o>a||(t.splice(o,1),a===t.length-1?t.push(i):t.splice(a,0,i)),t}},function(t,i){t.exports=function MoveBelow(t,i,r){if(i===r)return t;var o=t.indexOf(i),a=t.indexOf(r);if(o<0||a<0)throw new Error("Supplied items must be elements of the same array");return o<a||(t.splice(o,1),0===a?t.unshift(i):t.splice(a,0,i)),t}},function(t,i,r){var o=r(363);t.exports=function NumberArrayStep(t,i,r){void 0===t&&(t=0),void 0===i&&(i=null),void 0===r&&(r=1),null===i&&(i=t,t=0);for(var a=[],h=Math.max(o((i-t)/(r||1)),0),l=0;l<h;l++)a.push(t),t+=r;return a}},function(t,i,r){var o=r(74);t.exports=function RemoveAt(t,i,r,a){if(void 0===a&&(a=t),i<0||i>t.length-1)throw new Error("Index out of bounds");var h=o(t,i);return r&&r.call(a,h),h}},function(t,i,r){var o=r(78);t.exports=function RemoveBetween(t,i,r,a,h){if(void 0===i&&(i=0),void 0===r&&(r=t.length),void 0===h&&(h=t),o(t,i,r)){var l=r-i,u=t.splice(i,l);if(a)for(var c=0;c<u.length;c++){var d=u[c];a.call(h,d)}return u}return[]}},function(t,i,r){var o=r(74);t.exports=function RemoveRandomElement(t,i,r){void 0===i&&(i=0),void 0===r&&(r=t.length);var a=i+Math.floor(Math.random()*r);return o(t,a)}},function(t,i){t.exports=function Replace(t,i,r){var o=t.indexOf(i),a=t.indexOf(r);return-1!==o&&-1===a&&(t[o]=r,!0)}},function(t,i){t.exports=function SendToBack(t,i){var r=t.indexOf(i);return-1!==r&&r>0&&(t.splice(r,1),t.unshift(i)),i}},function(t,i,r){var o=r(78);t.exports=function SetAll(t,i,r,a,h){if(void 0===a&&(a=0),void 0===h&&(h=t.length),o(t,a,h))for(var l=a;l<h;l++){var u=t[l];u.hasOwnProperty(i)&&(u[i]=r)}return t}},function(t,i){t.exports=function Swap(t,i,r){if(i===r)return t;var o=t.indexOf(i),a=t.indexOf(r);if(o<0||a<0)throw new Error("Supplied items must be elements of the same array");return t[o]=r,t[a]=i,t}},function(t,i,r){var o=r(0),a=r(211),h=r(24),l=r(20),u=new o({Extends:a,initialize:function UpdateList(t){a.call(this),this.checkQueue=!0,this.scene=t,this.systems=t.sys,t.sys.events.once(l.BOOT,this.boot,this),t.sys.events.on(l.START,this.start,this)},boot:function boot(){this.systems.events.once(l.DESTROY,this.destroy,this)},start:function start(){var t=this.systems.events;t.on(l.PRE_UPDATE,this.update,this),t.on(l.UPDATE,this.sceneUpdate,this),t.once(l.SHUTDOWN,this.shutdown,this)},sceneUpdate:function sceneUpdate(t,i){for(var r=this._active,o=r.length,a=0;a<o;a++){var h=r[a];h.active&&h.preUpdate.call(h,t,i)}},shutdown:function shutdown(){for(var t=this._active.length;t--;)this._active[t].destroy(!0);for(t=this._pending.length;t--;)this._pending[t].destroy(!0);for(t=this._destroy.length;t--;)this._destroy[t].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var i=this.systems.events;i.off(l.PRE_UPDATE,this.update,this),i.off(l.UPDATE,this.sceneUpdate,this),i.off(l.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown(),this.systems.events.off(l.START,this.start,this),this.scene=null,this.systems=null}});h.register("UpdateList",u,"updateList"),t.exports=u},function(t,i){t.exports="add"},function(t,i){t.exports="remove"},function(t,i){t.exports=function GetBitmapTextSize(t,i,r,o){if(void 0===r&&(r=!1),void 0===o)return o={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0};var a,h=t.text,l=h.length,u=t.maxWidth,c=t.wordWrapCharCode,d=Number.MAX_VALUE,p=Number.MAX_VALUE,g=0,v=0,m=t.fontData.chars,y=t.fontData.lineHeight,T=t.letterSpacing,S=0,w=0,b=0,C=null,A=t._align,E=0,M=0,_=t.fontSize/t.fontData.size,R=_*t.scaleX,P=_*t.scaleY,k=null,O=0,L=[],D=Number.MAX_VALUE,I=0,B=0,N=0,G=[],Y=[],U=null;if(u>0){for(a=0;a<l;a++)if(10!==(b=h.charCodeAt(a))){if(C=m[b]){if(null!==k)var X=C.kerning[O];b===c?null!==U&&(G.push({word:U.word,i:U.i,x:U.x*R,y:U.y*P,w:U.w*R,h:U.h*P,cr:!1}),U=null):(null===U&&(U={word:"",i:a,x:S,y:w,w:0,h:y,cr:!1}),U.word=U.word.concat(h[a]),U.w+=C.xOffset+C.xAdvance+(void 0!==X?X:0)),S+=C.xAdvance+T,k=C,O=b}}else null!==U&&(G.push({word:U.word,i:U.i,x:U.x*R,y:U.y*P,w:U.w*R,h:U.h*P,cr:!0}),U=null),S=0,w+=y,k=null;var V;null!==U&&G.push({word:U.word,i:U.i,x:U.x*R,y:U.y*P,w:U.w*R,h:U.h*P,cr:!1}),S=0,w=0,k=null,O=0;var z=0,W=[];for(a=0;a<G.length;a++){var H=G[a],j=H.x,q=H.x+H.w;V&&(z=j-(j-(V.x+V.w)+V.w),V=null),j-z>u||q-z>u?(W.push(H.i-1),H.cr?(W.push(H.i+H.word.length),z=0,V=null):V=H):H.cr&&(W.push(H.i+H.word.length),z=0,V=null)}var K=function stringInsert(t,i,r){return t.substr(0,i)+r+t.substr(i+1)};for(a=W.length-1;a>=0;a--)h=K(h,W[a],"\n");o.wrappedText=h,l=h.length,G=[],U=null}var Z=0;for(a=0;a<l;a++)if(10!==(b=h.charCodeAt(a))){if(C=m[b]){if(E=S,M=w,null!==k){var J=C.kerning[O];E+=void 0!==J?J:0}d>E&&(d=E),p>M&&(p=M);var Q=E+C.xAdvance,$=M+y;g<Q&&(g=Q),v<$&&(v=$);var tt=C.xOffset+C.xAdvance+(void 0!==J?J:0);b===c?null!==U&&(G.push({word:U.word,i:U.i,x:U.x*R,y:U.y*P,w:U.w*R,h:U.h*P}),U=null):(null===U&&(U={word:"",i:Z,x:S,y:w,w:0,h:y}),U.word=U.word.concat(h[a]),U.w+=tt),Y.push({i:Z,char:h[a],code:b,x:(C.xOffset+S)*_,y:(C.yOffset+w)*_,w:C.width*_,h:C.height*_,t:w*_,r:Q*_,b:y*_,line:B,glyph:C}),S+=C.xAdvance+T,k=C,O=b,N=Q*_,Z++}}else null!==U&&(G.push({word:U.word,i:U.i,x:U.x*R,y:U.y*P,w:U.w*R,h:U.h*P}),U=null),S=0,w+=y,k=null,L[B]=N,N>I&&(I=N),N<D&&(D=N),B++,N=0;if(null!==U&&G.push({word:U.word,i:U.i,x:U.x*R,y:U.y*P,w:U.w*R,h:U.h*P}),L[B]=N,N>I&&(I=N),N<D&&(D=N),A>0)for(var et=0;et<Y.length;et++){var it=Y[et];if(1===A){var nt=(I-L[it.line])/2;it.x+=nt,it.r+=nt}else if(2===A){var rt=I-L[it.line];it.x+=rt,it.r+=rt}}var st=o.local,ot=o.global,at=o.lines;return st.x=d*_,st.y=p*_,st.width=g*_,st.height=v*_,ot.x=t.x-t._displayOriginX+d*R,ot.y=t.y-t._displayOriginY+p*P,ot.width=g*R,ot.height=v*P,at.shortest=D,at.longest=I,at.lengths=L,i&&(st.x=Math.ceil(st.x),st.y=Math.ceil(st.y),st.width=Math.ceil(st.width),st.height=Math.ceil(st.height),ot.x=Math.ceil(ot.x),ot.y=Math.ceil(ot.y),ot.width=Math.ceil(ot.width),ot.height=Math.ceil(ot.height),at.shortest=Math.ceil(D),at.longest=Math.ceil(I)),r&&(t._displayOriginX=t.originX*st.width,t._displayOriginY=t.originY*st.height,ot.x=t.x-t._displayOriginX*t.scaleX,ot.y=t.y-t._displayOriginY*t.scaleY,i&&(ot.x=Math.ceil(ot.x),ot.y=Math.ceil(ot.y))),o.words=G,o.characters=Y,o.lines.height=y,o.scale=_,o.scaleX=t.scaleX,o.scaleY=t.scaleY,o}},function(t,i,r){var o=r(212);t.exports=function ParseFromAtlas(t,i,r,a,h,l,u){var c=t.sys.textures.get(r),d=c.get(a),p=t.sys.cache.xml.get(h);if(d&&p){var g=o(p,d,l,u,c);return t.sys.cache.bitmapFont.add(i,{data:g,texture:r,frame:a,fromAtlas:!0}),!0}return!1}},function(t,i,r){var o=r(1),a=r(1);o=r(1046),a=r(1048),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,r){var o=r(1047),a=r(19),h=r(12);t.exports=function BitmapTextWebGLRenderer(t,i,r,l){if(0!==i._text.length){r.addToRenderList(i);var u,c,d,p=t.pipelines.set(i.pipeline,i),g=a(i,r,l).calc,v=r.roundPixels,m=r.alpha,y=i.charColors,T=i.tintFill,S=h.getTintAppendFloatAlpha,w=S(i.tintTopLeft,m*i._alphaTL),b=S(i.tintTopRight,m*i._alphaTR),C=S(i.tintBottomLeft,m*i._alphaBL),A=S(i.tintBottomRight,m*i._alphaBR),E=i.frame.glTexture,M=p.setGameObject(i),_=i.getTextBounds(!1).characters,R=i.dropShadowX,P=i.dropShadowY,k=0!==R||0!==P;if(t.pipelines.preBatch(i),k){var O=i.dropShadowColor,L=i.dropShadowAlpha,D=S(O,m*L*i._alphaTL),I=S(O,m*L*i._alphaTR),B=S(O,m*L*i._alphaBL),N=S(O,m*L*i._alphaBR);for(u=0;u<_.length;u++)d=(c=_[u]).glyph,32!==c.code&&0!==d.width&&0!==d.height&&o(p,i,c,d,R,P,g,v,D,I,B,N,1,E,M)}for(u=0;u<_.length;u++)if(d=(c=_[u]).glyph,32!==c.code&&0!==d.width&&0!==d.height)if(y[c.i]){var G=y[c.i],Y=G.tintEffect,U=S(G.tintTL,m*i._alphaTL),X=S(G.tintTR,m*i._alphaTR),V=S(G.tintBL,m*i._alphaBL),z=S(G.tintBR,m*i._alphaBR);o(p,i,c,d,0,0,g,v,U,X,V,z,Y,E,M)}else o(p,i,c,d,0,0,g,v,w,b,C,A,T,E,M);t.pipelines.postBatch(i)}}},function(t,i){t.exports=function BatchChar(t,i,r,o,a,h,l,u,c,d,p,g,v,m,y){var T=r.x-i.displayOriginX+a,S=r.y-i.displayOriginY+h,w=T+r.w,b=S+r.h,C=l.getXRound(T,S,u),A=l.getYRound(T,S,u),E=l.getXRound(T,b,u),M=l.getYRound(T,b,u),_=l.getXRound(w,b,u),R=l.getYRound(w,b,u),P=l.getXRound(w,S,u),k=l.getYRound(w,S,u);t.batchQuad(i,C,A,E,M,_,R,P,k,o.u0,o.v0,o.u1,o.v1,c,d,p,g,v,m,y)}},function(t,i,r){var o=r(30);t.exports=function BitmapTextCanvasRenderer(t,i,r,a){var h=i._text,l=h.length,u=t.currentContext;if(0!==l&&o(t,u,i,r,a)){r.addToRenderList(i);var c=i.fromAtlas?i.frame:i.texture.frames.__BASE,d=i.fontData.chars,p=i.fontData.lineHeight,g=i._letterSpacing,v=0,m=0,y=0,T=null,S=0,w=0,b=0,C=0,A=0,E=0,M=null,_=0,R=c.source.image,P=c.cutX,k=c.cutY,O=i._fontSize/i.fontData.size,L=i._align,D=0,I=0,B=i.getTextBounds(!1);i.maxWidth>0&&(l=(h=B.wrappedText).length);var N=i._bounds.lines;1===L?I=(N.longest-N.lengths[0])/2:2===L&&(I=N.longest-N.lengths[0]),u.translate(-i.displayOriginX,-i.displayOriginY);for(var G=r.roundPixels,Y=0;Y<l;Y++)if(10!==(y=h.charCodeAt(Y))){if(T=d[y]){if(S=P+T.x,w=k+T.y,b=T.width,C=T.height,A=T.xOffset+v,E=T.yOffset+m,null!==M){var U=T.kerning[_];A+=void 0!==U?U:0}A*=O,E*=O,A+=I,v+=T.xAdvance+g,M=T,_=y,0!==b&&0!==C&&32!==y&&(G&&(A=Math.round(A),E=Math.round(E)),u.save(),u.translate(A,E),u.scale(O,O),u.drawImage(R,S,w,b,C,0,0,b,C),u.restore())}}else D++,1===L?I=(N.longest-N.lengths[D])/2:2===L&&(I=N.longest-N.lengths[D]),v=0,m+=p,M=null;u.restore()}}},function(t,i,r){var o=r(1),a=r(1);o=r(1050),a=r(1051),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,r){var o=r(25),a=r(12),h=new o;t.exports=function BlitterWebGLRenderer(t,i,r,o){var l=i.getRenderList();if(0!==l.length){var u=r.alpha*i.alpha;if(0!==u){r.addToRenderList(i);var c=t.pipelines.set(this.pipeline,i),d=r.scrollX*i.scrollFactorX,p=r.scrollY*i.scrollFactorY,g=h.copyFrom(r.matrix);o&&(g.multiplyWithOffset(o,-d,-p),d=0,p=0);var v=i.x-d,m=i.y-p,y=-1,T=r.roundPixels;t.pipelines.preBatch(i);for(var S=0;S<l.length;S++){var w=l[S],b=w.frame,C=w.alpha*u;if(0!==C){var A=b.width,E=b.height,M=v+w.x+b.x,_=m+w.y+b.y;w.flipX&&(A*=-1,M+=b.width),w.flipY&&(E*=-1,_+=b.height);var R=M+A,P=_+E,k=g.getX(M,_),O=g.getY(M,_),L=g.getX(R,P),D=g.getY(R,P),I=a.getTintAppendFloatAlpha(w.tint,C);if(b.sourceIndex!==y){var B=c.setGameObject(i,b);y=b.sourceIndex}T&&(k=Math.round(k),O=Math.round(O),L=Math.round(L),D=Math.round(D)),c.batchQuad(i,k,O,k,D,L,D,L,O,b.u0,b.v0,b.u1,b.v1,I,I,I,I,!1,b.glTexture,B)&&(y=-1)}}t.pipelines.postBatch(i)}}}},function(t,i){t.exports=function BlitterCanvasRenderer(t,i,r,o){var a=i.getRenderList();if(0!==a.length){var h=t.currentContext,l=r.alpha*i.alpha;if(0!==l){r.addToRenderList(i),h.globalCompositeOperation=t.blendModes[i.blendMode],h.imageSmoothingEnabled=!(!t.antialias||i.frame.source.scaleMode);var u=i.x-r.scrollX*i.scrollFactorX,c=i.y-r.scrollY*i.scrollFactorY;h.save(),o&&o.copyToContext(h);for(var d=r.roundPixels,p=0;p<a.length;p++){var g=a[p],v=g.flipX||g.flipY,m=g.frame,y=m.canvasData,T=m.x,S=m.y,w=1,b=1,C=g.alpha*l;0!==C&&(h.globalAlpha=C,v?(g.flipX&&(w=-1,T-=y.width),g.flipY&&(b=-1,S-=y.height),h.save(),h.translate(g.x+u,g.y+c),h.scale(w,b),h.drawImage(m.source.image,y.x,y.y,y.width,y.height,T,S,y.width,y.height),h.restore()):(d&&(T=Math.round(T),S=Math.round(S)),h.drawImage(m.source.image,y.x,y.y,y.width,y.height,T+g.x+u,S+g.y+c,y.width,y.height)))}h.restore()}}}},function(t,i,r){var o=r(1),a=r(1);o=r(1053),a=r(1054),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i){t.exports=function ContainerWebGLRenderer(t,i,r,o){r.addToRenderList(i);var a=i.list,h=a.length;if(0!==h){var l=i.localTransform;o?(l.loadIdentity(),l.multiply(o),l.translate(i.x,i.y),l.rotate(i.rotation),l.scale(i.scaleX,i.scaleY)):l.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY),t.pipelines.preBatch(i);var u=-1!==i.blendMode;u||t.setBlendMode(0);for(var c=i.alpha,d=i.scrollFactorX,p=i.scrollFactorY,g=0;g<h;g++){var v=a[g];if(v.willRender(r)){var m,y,T,S;if(void 0!==v.alphaTopLeft)m=v.alphaTopLeft,y=v.alphaTopRight,T=v.alphaBottomLeft,S=v.alphaBottomRight;else{var w=v.alpha;m=w,y=w,T=w,S=w}var b=v.scrollFactorX,C=v.scrollFactorY;u||v.blendMode===t.currentBlendMode||t.setBlendMode(v.blendMode);var A=v.mask;A&&A.preRenderWebGL(t,v,r);var E=v.type;E!==t.currentType&&(t.newType=!0,t.currentType=E),t.nextTypeMatch=g<h-1&&a[g+1].type===t.currentType,v.setScrollFactor(b*d,C*p),v.setAlpha(m*c,y*c,T*c,S*c),v.renderWebGL(t,v,r,l),v.setAlpha(m,y,T,S),v.setScrollFactor(b,C),A&&A.postRenderWebGL(t,r),t.newType=!1}}t.pipelines.postBatch(i)}}},function(t,i){t.exports=function ContainerCanvasRenderer(t,i,r,o){r.addToRenderList(i);var a=i.list;if(0!==a.length){var h=i.localTransform;o?(h.loadIdentity(),h.multiply(o),h.translate(i.x,i.y),h.rotate(i.rotation),h.scale(i.scaleX,i.scaleY)):h.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY);var l=-1!==i.blendMode;l||t.setBlendMode(0);var u=i._alpha,c=i.scrollFactorX,d=i.scrollFactorY;i.mask&&i.mask.preRenderCanvas(t,null,r);for(var p=0;p<a.length;p++){var g=a[p];if(g.willRender(r)){var v=g.alpha,m=g.scrollFactorX,y=g.scrollFactorY;l||g.blendMode===t.currentBlendMode||t.setBlendMode(g.blendMode),g.setScrollFactor(m*c,y*d),g.setAlpha(v*u),g.renderCanvas(t,g,r,h),g.setAlpha(v),g.setScrollFactor(m,y)}}i.mask&&i.mask.postRenderCanvas(t)}}},function(t,i,r){var o=r(1),a=r(1);o=r(443),a=r(443),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i){t.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(t,i,r){var o=r(1),a=r(1);o=r(1058),a=r(1059),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,r){var o=r(19),a=r(25),h=r(12),l=new a;t.exports=function DynamicBitmapTextWebGLRenderer(t,i,r,a){var u=i.text,c=u.length;if(0!==c){r.addToRenderList(i);var d=t.pipelines.set(i.pipeline,i),p=o(i,r,a),g=p.sprite,v=p.calc,m=l,y=i.cropWidth>0||i.cropHeight>0;y&&(d.flush(),t.pushScissor(v.tx,v.ty,i.cropWidth*v.scaleX,i.cropHeight*v.scaleY));var T,S,w=i.frame.glTexture,b=i.tintFill,C=h.getTintAppendFloatAlpha(i.tintTopLeft,r.alpha*i._alphaTL),A=h.getTintAppendFloatAlpha(i.tintTopRight,r.alpha*i._alphaTR),E=h.getTintAppendFloatAlpha(i.tintBottomLeft,r.alpha*i._alphaBL),M=h.getTintAppendFloatAlpha(i.tintBottomRight,r.alpha*i._alphaBR),_=d.setGameObject(i),R=0,P=0,k=0,O=0,L=i.letterSpacing,D=0,I=0,B=i.scrollX,N=i.scrollY,G=i.fontData,Y=G.chars,U=G.lineHeight,X=i.fontSize/G.size,V=0,z=i._align,W=0,H=0,j=i.getTextBounds(!1);i.maxWidth>0&&(c=(u=j.wrappedText).length);var q=i._bounds.lines;1===z?H=(q.longest-q.lengths[0])/2:2===z&&(H=q.longest-q.lengths[0]);var K=r.roundPixels,Z=i.displayCallback,J=i.callbackData;t.pipelines.preBatch(i);for(var Q=0;Q<c;Q++)if(10!==(k=u.charCodeAt(Q))){if(T=Y[k]){D=T.width,I=T.height;var $=T.xOffset+R-B,tt=T.yOffset+P-N;if(null!==S){var et=T.kerning[O];$+=void 0!==et?et:0}if(R+=T.xAdvance+L,S=T,O=k,0!==D&&0!==I&&32!==k){if(X=i.fontSize/i.fontData.size,V=0,Z){J.color=0,J.tint.topLeft=C,J.tint.topRight=A,J.tint.bottomLeft=E,J.tint.bottomRight=M,J.index=Q,J.charCode=k,J.x=$,J.y=tt,J.scale=X,J.rotation=V,J.data=T.data;var it=Z(J);$=it.x,tt=it.y,X=it.scale,V=it.rotation,it.color?(C=it.color,A=it.color,E=it.color,M=it.color):(C=it.tint.topLeft,A=it.tint.topRight,E=it.tint.bottomLeft,M=it.tint.bottomRight),C=h.getTintAppendFloatAlpha(C,r.alpha*i._alphaTL),A=h.getTintAppendFloatAlpha(A,r.alpha*i._alphaTR),E=h.getTintAppendFloatAlpha(E,r.alpha*i._alphaBL),M=h.getTintAppendFloatAlpha(M,r.alpha*i._alphaBR)}$*=X,tt*=X,$-=i.displayOriginX,tt-=i.displayOriginY,$+=H,m.applyITRS($,tt,V,X,X),v.multiply(m,g);var nt=T.u0,rt=T.v0,st=T.u1,ot=T.v1,at=D,ht=I,lt=g.e,ut=g.f,ct=ht*g.c+g.e,dt=ht*g.d+g.f,ft=at*g.a+ht*g.c+g.e,pt=at*g.b+ht*g.d+g.f,gt=at*g.a+g.e,vt=at*g.b+g.f;K&&(lt=Math.round(lt),ut=Math.round(ut),ct=Math.round(ct),dt=Math.round(dt),ft=Math.round(ft),pt=Math.round(pt),gt=Math.round(gt),vt=Math.round(vt)),d.batchQuad(i,lt,ut,ct,dt,ft,pt,gt,vt,nt,rt,st,ot,C,A,E,M,b,w,_)}}}else W++,1===z?H=(q.longest-q.lengths[W])/2:2===z&&(H=q.longest-q.lengths[W]),R=0,P+=U,S=null;y&&(d.flush(),t.popScissor()),t.pipelines.postBatch(i)}}},function(t,i,r){var o=r(30);t.exports=function DynamicBitmapTextCanvasRenderer(t,i,r,a){var h=i._text,l=h.length,u=t.currentContext;if(0!==l&&o(t,u,i,r,a)){r.addToRenderList(i);var c=i.fromAtlas?i.frame:i.texture.frames.__BASE,d=i.displayCallback,p=i.callbackData,g=i.fontData.chars,v=i.fontData.lineHeight,m=i._letterSpacing,y=0,T=0,S=0,w=null,b=0,C=0,A=0,E=0,M=0,_=0,R=null,P=0,k=i.frame.source.image,O=c.cutX,L=c.cutY,D=0,I=0,B=i._fontSize/i.fontData.size,N=i._align,G=0,Y=0;i.getTextBounds(!1);var U=i._bounds.lines;1===N?Y=(U.longest-U.lengths[0])/2:2===N&&(Y=U.longest-U.lengths[0]),u.translate(-i.displayOriginX,-i.displayOriginY);var X=r.roundPixels;i.cropWidth>0&&i.cropHeight>0&&(u.beginPath(),u.rect(0,0,i.cropWidth,i.cropHeight),u.clip());for(var V=0;V<l;V++)if(I=B,D=0,10!==(S=h.charCodeAt(V))){if(w=g[S]){if(b=O+w.x,C=L+w.y,A=w.width,E=w.height,M=w.xOffset+y-i.scrollX,_=w.yOffset+T-i.scrollY,null!==R){var z=w.kerning[P];M+=void 0!==z?z:0}if(d){p.index=V,p.charCode=S,p.x=M,p.y=_,p.scale=I,p.rotation=D,p.data=w.data;var W=d(p);M=W.x,_=W.y,I=W.scale,D=W.rotation}M*=I,_*=I,M+=Y,y+=w.xAdvance+m,R=w,P=S,0!==A&&0!==E&&32!==S&&(X&&(M=Math.round(M),_=Math.round(_)),u.save(),u.translate(M,_),u.rotate(D),u.scale(I,I),u.drawImage(k,b,C,A,E,0,0,A,E),u.restore())}}else G++,1===N?Y=(U.longest-U.lengths[G])/2:2===N&&(Y=U.longest-U.lengths[G]),y=0,T+=v,R=null;u.restore()}}},function(t,i,r){var o=r(1),a=r(1);o=r(1061),a=r(1062),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,r){var o=r(19);t.exports=function ExternWebGLRenderer(t,i,r,a){t.pipelines.clear();var h=o(i,r,a).calc;i.render.call(i,t,r,h),t.pipelines.rebind()}},function(t,i){},function(t,i,r){var o=r(1),a=r(1);o=r(1064),r(448),a=r(448),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,r){var o=r(217),a=r(19),h=r(25),l=r(12),u=function Point(t,i,r){this.x=t,this.y=i,this.width=r},c=function Path(t,i,r){this.points=[],this.pointsLength=1,this.points[0]=new u(t,i,r)},d=[],p=new h;t.exports=function GraphicsWebGLRenderer(t,i,r,h){if(0!==i.commandBuffer.length){r.addToRenderList(i);var g=t.pipelines.set(i.pipeline,i);t.pipelines.preBatch(i);for(var v=a(i,r,h).calc,m=p.loadIdentity(),y=i.commandBuffer,T=r.alpha*i.alpha,S=1,w=g.fillTint,b=g.strokeTint,C=0,A=0,E=0,M=2*Math.PI,_=[],R=0,P=!0,k=null,O=l.getTintAppendFloatAlpha,L=0;L<y.length;L++)switch(y[L]){case o.BEGIN_PATH:_.length=0,k=null,P=!0;break;case o.CLOSE_PATH:P=!1,k&&k.points.length&&k.points.push(k.points[0]);break;case o.FILL_PATH:for(R=0;R<_.length;R++)g.batchFillPath(_[R].points,m,v);break;case o.STROKE_PATH:for(R=0;R<_.length;R++)g.batchStrokePath(_[R].points,S,P,m,v);break;case o.LINE_STYLE:S=y[++L];var D=O(y[++L],y[++L]*T);b.TL=D,b.TR=D,b.BL=D,b.BR=D;break;case o.FILL_STYLE:var I=O(y[++L],y[++L]*T);w.TL=I,w.TR=I,w.BL=I,w.BR=I;break;case o.GRADIENT_FILL_STYLE:var B=y[++L]*T,N=y[++L]*T,G=y[++L]*T,Y=y[++L]*T;w.TL=O(y[++L],B),w.TR=O(y[++L],N),w.BL=O(y[++L],G),w.BR=O(y[++L],Y);break;case o.GRADIENT_LINE_STYLE:S=y[++L];var U=y[++L]*T;b.TL=O(y[++L],U),b.TR=O(y[++L],U),b.BL=O(y[++L],U),b.BR=O(y[++L],U);break;case o.ARC:var X=0,V=y[++L],z=y[++L],W=y[++L],H=y[++L],j=y[++L],q=y[++L],K=y[++L];for(j-=H,q?j<-M?j=-M:j>0&&(j=j%M-M):j>M?j=M:j<0&&(j=M+j%M),null===k&&(k=new c(V+Math.cos(H)*W,z+Math.sin(H)*W,S),_.push(k),X+=.01);X<1+K;)E=j*X+H,C=V+Math.cos(E)*W,A=z+Math.sin(E)*W,k.points.push(new u(C,A,S)),X+=.01;E=j+H,C=V+Math.cos(E)*W,A=z+Math.sin(E)*W,k.points.push(new u(C,A,S));break;case o.FILL_RECT:g.batchFillRect(y[++L],y[++L],y[++L],y[++L],m,v);break;case o.FILL_TRIANGLE:g.batchFillTriangle(y[++L],y[++L],y[++L],y[++L],y[++L],y[++L],m,v);break;case o.STROKE_TRIANGLE:g.batchStrokeTriangle(y[++L],y[++L],y[++L],y[++L],y[++L],y[++L],S,m,v);break;case o.LINE_TO:null!==k?k.points.push(new u(y[++L],y[++L],S)):(k=new c(y[++L],y[++L],S),_.push(k));break;case o.MOVE_TO:k=new c(y[++L],y[++L],S),_.push(k);break;case o.SAVE:d.push(m.copyToArray());break;case o.RESTORE:m.copyFromArray(d.pop());break;case o.TRANSLATE:V=y[++L],z=y[++L],m.translate(V,z);break;case o.SCALE:V=y[++L],z=y[++L],m.scale(V,z);break;case o.ROTATE:m.rotate(y[++L])}t.pipelines.postBatch(i)}}},function(t,i,r){var o=r(1),a=r(1);o=r(1066),a=r(1067),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i){t.exports=function SpriteWebGLRenderer(t,i,r,o){r.addToRenderList(i),i.pipeline.batchSprite(i,r,o)}},function(t,i){t.exports=function SpriteCanvasRenderer(t,i,r,o){r.addToRenderList(i),t.batchSprite(i,i.frame,r,o)}},function(t,i,r){var o=r(1),a=r(1);o=r(1069),a=r(1070),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i){t.exports=function ImageWebGLRenderer(t,i,r,o){r.addToRenderList(i),this.pipeline.batchSprite(i,r,o)}},function(t,i){t.exports=function ImageCanvasRenderer(t,i,r,o){r.addToRenderList(i),t.batchSprite(i,i.frame,r,o)}},function(t,i,r){var o=r(1),a=r(1);o=r(1072),a=r(1073),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i){t.exports=function LayerWebGLRenderer(t,i,r){var o=i.list,a=o.length;if(0!==a){i.depthSort(),t.pipelines.preBatch(i);var h=-1!==i.blendMode;h||t.setBlendMode(0);for(var l=i.alpha,u=0;u<a;u++){var c=o[u];if(c.willRender(r)){var d,p,g,v;if(void 0!==c.alphaTopLeft)d=c.alphaTopLeft,p=c.alphaTopRight,g=c.alphaBottomLeft,v=c.alphaBottomRight;else{var m=c.alpha;d=m,p=m,g=m,v=m}h||c.blendMode===t.currentBlendMode||t.setBlendMode(c.blendMode);var y=c.mask;y&&y.preRenderWebGL(t,c,r);var T=c.type;T!==t.currentType&&(t.newType=!0,t.currentType=T),t.nextTypeMatch=u<a-1&&o[u+1].type===t.currentType,c.setAlpha(d*l,p*l,g*l,v*l),c.renderWebGL(t,c,r),c.setAlpha(d,p,g,v),y&&y.postRenderWebGL(t,r),t.newType=!1}}t.pipelines.postBatch(i)}}},function(t,i){t.exports=function LayerCanvasRenderer(t,i,r){var o=i.list;if(0!==o.length){i.depthSort();var a=-1!==i.blendMode;a||t.setBlendMode(0);var h=i._alpha;i.mask&&i.mask.preRenderCanvas(t,null,r);for(var l=0;l<o.length;l++){var u=o[l];if(u.willRender(r)){var c=u.alpha;a||u.blendMode===t.currentBlendMode||t.setBlendMode(u.blendMode),u.setAlpha(c*h),u.renderCanvas(t,u,r),u.setAlpha(c)}}i.mask&&i.mask.postRenderCanvas(t)}}},function(t,i,r){t.exports={EmitterOp:r(449),GravityWell:r(450),Particle:r(451),ParticleEmitter:r(452),ParticleEmitterManager:r(220),Zones:r(1078)}},function(t,i,r){var o=r(1),a=r(1);o=r(1076),a=r(1077),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,r){var o=r(25),a=r(12),h=new o,l=new o,u=new o,c=new o;t.exports=function ParticleManagerWebGLRenderer(t,i,r,o){var d=i.emitters.list,p=d.length;if(0!==p){var g=t.pipelines.set(i.pipeline),v=h,m=l,y=u,T=c;o?(T.loadIdentity(),T.multiply(o),T.translate(i.x,i.y),T.rotate(i.rotation),T.scale(i.scaleX,i.scaleY)):T.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY);var S=r.roundPixels,w=i.defaultFrame.glTexture,b=a.getTintAppendFloatAlpha,C=g.setGameObject(i,i.defaultFrame);t.pipelines.preBatch(i);for(var A=0;A<p;A++){var E=d[A],M=E.alive,_=M.length;if(E.visible&&0!==_){r.addToRenderList(E);var R=E.scrollFactorX,P=E.scrollFactorY;t.setBlendMode(E.blendMode),E.mask&&(E.mask.preRenderWebGL(t,E,r),t.pipelines.set(i.pipeline));for(var k=0;k<_;k++){var O=M[k],L=O.alpha*r.alpha;if(!(L<=0)){y.applyITRS(O.x,O.y,O.rotation,O.scaleX,O.scaleY),v.copyFrom(r.matrix),v.multiplyWithOffset(T,-r.scrollX*R,-r.scrollY*P),y.e=O.x,y.f=O.y,v.multiply(y,m);var D=O.frame,I=-D.halfWidth,B=-D.halfHeight,N=I+D.width,G=B+D.height,Y=m.getXRound(I,B,S),U=m.getYRound(I,B,S),X=m.getXRound(I,G,S),V=m.getYRound(I,G,S),z=m.getXRound(N,G,S),W=m.getYRound(N,G,S),H=m.getXRound(N,B,S),j=m.getYRound(N,B,S),q=b(O.tint,L);g.batchQuad(E,Y,U,X,V,z,W,H,j,D.u0,D.v0,D.u1,D.v1,q,q,q,q,0,w,C)}}E.mask&&E.mask.postRenderWebGL(t,r)}}t.pipelines.postBatch(i)}}},function(t,i,r){var o=r(25),a=new o,h=new o,l=new o,u=new o;t.exports=function ParticleManagerCanvasRenderer(t,i,r,o){var c=i.emitters.list,d=c.length;if(0!==d){var p=a.copyFrom(r.matrix),g=h,v=l,m=u;o?(m.loadIdentity(),m.multiply(o),m.translate(i.x,i.y),m.rotate(i.rotation),m.scale(i.scaleX,i.scaleY)):m.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY);for(var y=t.currentContext,T=r.roundPixels,S=0;S<d;S++){var w=c[S],b=w.alive,C=b.length;if(w.visible&&0!==C){r.addToRenderList(w);var A=w.scrollFactorX,E=w.scrollFactorY;y.save(),y.globalCompositeOperation=t.blendModes[w.blendMode];for(var M=0;M<C;M++){var _=b[M],R=_.alpha*r.alpha;if(!(R<=0)){v.applyITRS(_.x,_.y,_.rotation,_.scaleX,_.scaleY),p.copyFrom(r.matrix),p.multiplyWithOffset(m,-r.scrollX*A,-r.scrollY*E),v.e=_.x,v.f=_.y,p.multiply(v,g);var P=_.frame,k=P.canvasData,O=-P.halfWidth,L=-P.halfHeight;y.globalAlpha=R,y.save(),g.setToContext(y),T&&(O=Math.round(O),L=Math.round(L)),y.imageSmoothingEnabled=!(!t.antialias||P.source.scaleMode),y.drawImage(P.source.image,k.x,k.y,k.width,k.height,O,L,k.width,k.height),y.restore()}}y.restore()}}}}},function(t,i,r){t.exports={DeathZone:r(453),EdgeZone:r(454),RandomZone:r(456)}},function(t,i,r){var o=r(1),a=r(1);o=r(1080),a=r(1081),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,r){var o=r(12);t.exports=function RenderTextureWebGLRenderer(t,i,r,a){r.addToRenderList(i);var h=r.alpha,l=i.renderTarget,u=l.width,c=l.height,d=o.getTintAppendFloatAlpha,p=t.pipelines.set(i.pipeline),g=p.setTexture2D(l.texture);t.pipelines.preBatch(i),p.batchTexture(i,l.texture,u,c,i.x,i.y,u,c,i.scaleX,i.scaleY,i.rotation,i.flipX,!i.flipY,i.scrollFactorX,i.scrollFactorY,i.displayOriginX,i.displayOriginY,0,0,u,c,d(i.tintTopLeft,h*i._alphaTL),d(i.tintTopRight,h*i._alphaTR),d(i.tintBottomLeft,h*i._alphaBL),d(i.tintBottomRight,h*i._alphaBR),i.tintFill,0,0,r,a,!0,g),t.resetTextures(),t.pipelines.postBatch(i)}},function(t,i){t.exports=function RenderTextureCanvasRenderer(t,i,r,o){r.addToRenderList(i),t.batchSprite(i,i.frame,r,o)}},function(t,i,r){var o=r(1083),a=r(17),h={Parse:r(1084)};h=a(!1,h,o),t.exports=h},function(t,i){t.exports={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:"ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",TEXT_SET7:"AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:"ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789"}},function(t,i,r){var o=r(6);t.exports=function ParseRetroFont(t,i){var r=i.width,a=i.height,h=Math.floor(r/2),l=Math.floor(a/2),u=o(i,"chars","");if(""!==u){var c=o(i,"image",""),d=t.sys.textures.getFrame(c),p=d.cutX,g=d.cutY,v=d.source.width,m=d.source.height,y=o(i,"offset.x",0),T=o(i,"offset.y",0),S=o(i,"spacing.x",0),w=o(i,"spacing.y",0),b=o(i,"lineSpacing",0),C=o(i,"charsPerRow",null);null===C&&(C=v/r)>u.length&&(C=u.length);for(var A=y,E=T,M={retroFont:!0,font:c,size:r,lineHeight:a+b,chars:{}},_=0,R=0;R<u.length;R++){var P=u.charCodeAt(R),k=(p+A)/v,O=(g+E)/m,L=(p+A+r)/v,D=(g+E+a)/m;M.chars[P]={x:A,y:E,width:r,height:a,centerX:h,centerY:l,xOffset:0,yOffset:0,xAdvance:r,data:{},kerning:{},u0:k,v0:O,u1:L,v1:D},++_===C?(_=0,A=y,E+=a+w):A+=r+S}return{data:M,frame:null,texture:c}}}},function(t,i,r){var o=r(1),a=r(1);o=r(1086),a=r(1087),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,r){var o=r(19),a=r(12);t.exports=function RopeWebGLRenderer(t,i,r,h){r.addToRenderList(i);var l=t.pipelines.set(i.pipeline,i),u=o(i,r,h).calc,c=i.vertices,d=i.uv,p=i.colors,g=i.alphas,v=i.alpha,m=a.getTintAppendFloatAlpha,y=r.roundPixels,T=c.length,S=Math.floor(.5*T);l.flush(),t.pipelines.preBatch(i);var w=l.setGameObject(i),b=l.vertexViewF32,C=l.vertexViewU32,A=l.vertexCount*l.currentShader.vertexComponentCount-1,E=0,M=i.tintFill;i.dirty&&i.updateVertices();for(var _=i.debugCallback,R=[],P=0;P<T;P+=2){var k=c[P+0],O=c[P+1],L=k*u.a+O*u.c+u.e,D=k*u.b+O*u.d+u.f;y&&(L=Math.round(L),D=Math.round(D)),b[++A]=L,b[++A]=D,b[++A]=d[P+0],b[++A]=d[P+1],b[++A]=w,b[++A]=M,C[++A]=m(p[E],r.alpha*(g[E]*v)),E++,_&&(R[P+0]=L,R[P+1]=D)}_&&_.call(i,i,T,R),l.vertexCount+=S,t.pipelines.postBatch(i)}},function(t,i){t.exports=function RopeCanvasRenderer(){}},function(t,i,r){var o=r(1),a=r(1);o=r(1089),a=r(1090),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,r){var o=r(12);t.exports=function TextWebGLRenderer(t,i,r,a){if(0!==i.width&&0!==i.height){r.addToRenderList(i);var h=i.frame,l=h.width,u=h.height,c=o.getTintAppendFloatAlpha,d=t.pipelines.set(i.pipeline,i),p=d.setTexture2D(h.glTexture,i);t.pipelines.preBatch(i),d.batchTexture(i,h.glTexture,l,u,i.x,i.y,l/i.style.resolution,u/i.style.resolution,i.scaleX,i.scaleY,i.rotation,i.flipX,i.flipY,i.scrollFactorX,i.scrollFactorY,i.displayOriginX,i.displayOriginY,0,0,l,u,c(i.tintTopLeft,r.alpha*i._alphaTL),c(i.tintTopRight,r.alpha*i._alphaTR),c(i.tintBottomLeft,r.alpha*i._alphaBL),c(i.tintBottomRight,r.alpha*i._alphaBR),i.tintFill,0,0,r,a,!1,p),t.pipelines.postBatch(i)}}},function(t,i){t.exports=function TextCanvasRenderer(t,i,r,o){0!==i.width&&0!==i.height&&(r.addToRenderList(i),t.batchSprite(i,i.frame,r,o))}},function(t,i,r){var o=r(1),a=r(1);o=r(1092),a=r(1093),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,r){var o=r(12);t.exports=function TileSpriteWebGLRenderer(t,i,r,a){i.updateCanvas();var h=i.width,l=i.height;if(0!==h&&0!==l){r.addToRenderList(i),t.pipelines.preBatch(i);var u=o.getTintAppendFloatAlpha,c=t.pipelines.set(i.pipeline,i),d=c.setTexture2D(i.fillPattern,i);c.batchTexture(i,i.fillPattern,i.displayFrame.width*i.tileScaleX,i.displayFrame.height*i.tileScaleY,i.x,i.y,h,l,i.scaleX,i.scaleY,i.rotation,i.flipX,i.flipY,i.scrollFactorX,i.scrollFactorY,i.originX*h,i.originY*l,0,0,h,l,u(i.tintTopLeft,r.alpha*i._alphaTL),u(i.tintTopRight,r.alpha*i._alphaTR),u(i.tintBottomLeft,r.alpha*i._alphaBL),u(i.tintBottomRight,r.alpha*i._alphaBR),i.tintFill,i.tilePositionX%i.displayFrame.width/i.displayFrame.width,i.tilePositionY%i.displayFrame.height/i.displayFrame.height,r,a,!1,d),t.pipelines.postBatch(i)}}},function(t,i){t.exports=function TileSpriteCanvasRenderer(t,i,r,o){i.updateCanvas(),r.addToRenderList(i),t.batchSprite(i,i.frame,r,o)}},function(t,i,r){var o=r(1),a=r(1);o=r(1095),a=r(1096),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i){t.exports=function VideoWebGLRenderer(t,i,r,o){i.videoTexture&&(r.addToRenderList(i),i.pipeline.batchSprite(i,r,o))}},function(t,i){t.exports=function VideoCanvasRenderer(t,i,r,o){i.videoTexture&&(r.addToRenderList(i),t.batchSprite(i,i.frame,r,o))}},function(t,i,r){var o=r(1),a=r(1);o=r(1098),a=r(1099),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,r){var o=r(19),a=r(114),h=r(81);t.exports=function ArcWebGLRenderer(t,i,r,l){r.addToRenderList(i);var u=t.pipelines.set(i.pipeline),c=o(i,r,l),d=u.calcMatrix.copyFrom(c.calc),p=i._displayOriginX,g=i._displayOriginY,v=r.alpha*i.alpha;t.pipelines.preBatch(i),i.isFilled&&a(u,d,i,v,p,g),i.isStroked&&h(u,i,v,p,g),t.pipelines.postBatch(i)}},function(t,i,r){var o=r(36),a=r(48),h=r(60),l=r(30);t.exports=function ArcCanvasRenderer(t,i,r,u){r.addToRenderList(i);var c=t.currentContext;if(l(t,c,i,r,u)){var d=i.radius;c.beginPath(),c.arc(d-i.originX*(2*d),d-i.originY*(2*d),d,o(i._startAngle),o(i._endAngle),i.anticlockwise),i.closePath&&c.closePath(),i.isFilled&&(a(c,i),c.fill()),i.isStroked&&(h(c,i),c.stroke()),c.restore()}}},function(t,i,r){var o=r(1),a=r(1);o=r(1101),a=r(1102),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,r){var o=r(114),a=r(19),h=r(81);t.exports=function CurveWebGLRenderer(t,i,r,l){r.addToRenderList(i);var u=t.pipelines.set(i.pipeline),c=a(i,r,l),d=u.calcMatrix.copyFrom(c.calc),p=i._displayOriginX+i._curveBounds.x,g=i._displayOriginY+i._curveBounds.y,v=r.alpha*i.alpha;t.pipelines.preBatch(i),i.isFilled&&o(u,d,i,v,p,g),i.isStroked&&h(u,i,v,p,g),t.pipelines.postBatch(i)}},function(t,i,r){var o=r(48),a=r(60),h=r(30);t.exports=function CurveCanvasRenderer(t,i,r,l){r.addToRenderList(i);var u=t.currentContext;if(h(t,u,i,r,l)){var c=i._displayOriginX+i._curveBounds.x,d=i._displayOriginY+i._curveBounds.y,p=i.pathData,g=p.length-1,v=p[0]-c,m=p[1]-d;u.beginPath(),u.moveTo(v,m),i.closePath||(g-=2);for(var y=2;y<g;y+=2){var T=p[y]-c,S=p[y+1]-d;u.lineTo(T,S)}i.closePath&&u.closePath(),i.isFilled&&(o(u,i),u.fill()),i.isStroked&&(a(u,i),u.stroke()),u.restore()}}},function(t,i,r){var o=r(1),a=r(1);o=r(1104),a=r(1105),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,r){var o=r(114),a=r(19),h=r(81);t.exports=function EllipseWebGLRenderer(t,i,r,l){r.addToRenderList(i);var u=t.pipelines.set(i.pipeline),c=a(i,r,l),d=u.calcMatrix.copyFrom(c.calc),p=i._displayOriginX,g=i._displayOriginY,v=r.alpha*i.alpha;t.pipelines.preBatch(i),i.isFilled&&o(u,d,i,v,p,g),i.isStroked&&h(u,i,v,p,g),t.pipelines.postBatch(i)}},function(t,i,r){var o=r(48),a=r(60),h=r(30);t.exports=function EllipseCanvasRenderer(t,i,r,l){r.addToRenderList(i);var u=t.currentContext;if(h(t,u,i,r,l)){var c=i._displayOriginX,d=i._displayOriginY,p=i.pathData,g=p.length-1,v=p[0]-c,m=p[1]-d;u.beginPath(),u.moveTo(v,m),i.closePath||(g-=2);for(var y=2;y<g;y+=2){var T=p[y]-c,S=p[y+1]-d;u.lineTo(T,S)}u.closePath(),i.isFilled&&(o(u,i),u.fill()),i.isStroked&&(a(u,i),u.stroke()),u.restore()}}},function(t,i,r){var o=r(1),a=r(1);o=r(1107),a=r(1108),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,r){var o=r(19),a=r(12);t.exports=function GridWebGLRenderer(t,i,r,h){r.addToRenderList(i);var l=t.pipelines.set(i.pipeline),u=o(i,r,h);l.calcMatrix.copyFrom(u.calc).translate(-i._displayOriginX,-i._displayOriginY);var c,d,p=r.alpha*i.alpha,g=i.width,v=i.height,m=i.cellWidth,y=i.cellHeight,T=Math.ceil(g/m),S=Math.ceil(v/y),w=m,b=y,C=m-(T*m-g),A=y-(S*y-v),E=i.showCells,M=i.showAltCells,_=i.showOutline,R=0,P=0,k=0,O=0,L=0;if(_&&(w--,b--,C===m&&C--,A===y&&A--),t.pipelines.preBatch(i),E&&i.fillAlpha>0)for(c=l.fillTint,d=a.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*p),c.TL=d,c.TR=d,c.BL=d,c.BR=d,P=0;P<S;P++)for(M&&(k=P%2),R=0;R<T;R++)M&&k?k=0:(k++,O=R<T-1?w:C,L=P<S-1?b:A,l.batchFillRect(R*m,P*y,O,L));if(M&&i.altFillAlpha>0)for(c=l.fillTint,d=a.getTintAppendFloatAlpha(i.altFillColor,i.altFillAlpha*p),c.TL=d,c.TR=d,c.BL=d,c.BR=d,P=0;P<S;P++)for(M&&(k=P%2),R=0;R<T;R++)!M||k?(k=0,O=R<T-1?w:C,L=P<S-1?b:A,l.batchFillRect(R*m,P*y,O,L)):k=1;if(_&&i.outlineFillAlpha>0){var D=l.strokeTint,I=a.getTintAppendFloatAlpha(i.outlineFillColor,i.outlineFillAlpha*p);for(D.TL=I,D.TR=I,D.BL=I,D.BR=I,R=1;R<T;R++){var B=R*m;l.batchLine(B,0,B,v,1,1,1,0,!1)}for(P=1;P<S;P++){var N=P*y;l.batchLine(0,N,g,N,1,1,1,0,!1)}}t.pipelines.postBatch(i)}},function(t,i,r){var o=r(48),a=r(60),h=r(30);t.exports=function GridCanvasRenderer(t,i,r,l){r.addToRenderList(i);var u=t.currentContext;if(h(t,u,i,r,l)){var c=-i._displayOriginX,d=-i._displayOriginY,p=r.alpha*i.alpha,g=i.width,v=i.height,m=i.cellWidth,y=i.cellHeight,T=Math.ceil(g/m),S=Math.ceil(v/y),w=m,b=y,C=m-(T*m-g),A=y-(S*y-v),E=i.showCells,M=i.showAltCells,_=i.showOutline,R=0,P=0,k=0,O=0,L=0;if(_&&(w--,b--,C===m&&C--,A===y&&A--),E&&i.fillAlpha>0)for(o(u,i),P=0;P<S;P++)for(M&&(k=P%2),R=0;R<T;R++)M&&k?k=0:(k++,O=R<T-1?w:C,L=P<S-1?b:A,u.fillRect(c+R*m,d+P*y,O,L));if(M&&i.altFillAlpha>0)for(o(u,i,i.altFillColor,i.altFillAlpha*p),P=0;P<S;P++)for(M&&(k=P%2),R=0;R<T;R++)!M||k?(k=0,O=R<T-1?w:C,L=P<S-1?b:A,u.fillRect(c+R*m,d+P*y,O,L)):k=1;if(_&&i.outlineFillAlpha>0){for(a(u,i,i.outlineFillColor,i.outlineFillAlpha*p),R=1;R<T;R++){var D=R*m;u.beginPath(),u.moveTo(D+c,d),u.lineTo(D+c,v+d),u.stroke()}for(P=1;P<S;P++){var I=P*y;u.beginPath(),u.moveTo(c,I+d),u.lineTo(c+g,I+d),u.stroke()}}u.restore()}}},function(t,i,r){var o=r(1),a=r(1);o=r(1110),a=r(1111),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,r){var o=r(19),a=r(12);t.exports=function IsoBoxWebGLRenderer(t,i,r,h){r.addToRenderList(i);var l,u,c,d,p,g,v,m,y,T=t.pipelines.set(i.pipeline),S=o(i,r,h),w=T.calcMatrix.copyFrom(S.calc),b=i.width,C=i.height,A=b/2,E=b/i.projection,M=r.alpha*i.alpha;i.isFilled&&(t.pipelines.preBatch(i),i.showTop&&(l=a.getTintAppendFloatAlpha(i.fillTop,M),u=w.getX(-A,-C),c=w.getY(-A,-C),d=w.getX(0,-E-C),p=w.getY(0,-E-C),g=w.getX(A,-C),v=w.getY(A,-C),m=w.getX(0,E-C),y=w.getY(0,E-C),T.batchQuad(i,u,c,d,p,g,v,m,y,0,0,1,1,l,l,l,l,2)),i.showLeft&&(l=a.getTintAppendFloatAlpha(i.fillLeft,M),u=w.getX(-A,0),c=w.getY(-A,0),d=w.getX(0,E),p=w.getY(0,E),g=w.getX(0,E-C),v=w.getY(0,E-C),m=w.getX(-A,-C),y=w.getY(-A,-C),T.batchQuad(i,u,c,d,p,g,v,m,y,0,0,1,1,l,l,l,l,2)),i.showRight&&(l=a.getTintAppendFloatAlpha(i.fillRight,M),u=w.getX(A,0),c=w.getY(A,0),d=w.getX(0,E),p=w.getY(0,E),g=w.getX(0,E-C),v=w.getY(0,E-C),m=w.getX(A,-C),y=w.getY(A,-C),T.batchQuad(i,u,c,d,p,g,v,m,y,0,0,1,1,l,l,l,l,2)),t.pipelines.postBatch(i))}},function(t,i,r){var o=r(48),a=r(30);t.exports=function IsoBoxCanvasRenderer(t,i,r,h){r.addToRenderList(i);var l=t.currentContext;if(a(t,l,i,r,h)&&i.isFilled){var u=i.width,c=i.height,d=u/2,p=u/i.projection;i.showTop&&(o(l,i,i.fillTop),l.beginPath(),l.moveTo(-d,-c),l.lineTo(0,-p-c),l.lineTo(d,-c),l.lineTo(d,-1),l.lineTo(0,p-1),l.lineTo(-d,-1),l.lineTo(-d,-c),l.fill()),i.showLeft&&(o(l,i,i.fillLeft),l.beginPath(),l.moveTo(-d,0),l.lineTo(0,p),l.lineTo(0,p-c),l.lineTo(-d,-c),l.lineTo(-d,0),l.fill()),i.showRight&&(o(l,i,i.fillRight),l.beginPath(),l.moveTo(d,0),l.lineTo(0,p),l.lineTo(0,p-c),l.lineTo(d,-c),l.lineTo(d,0),l.fill()),l.restore()}}},function(t,i,r){var o=r(1),a=r(1);o=r(1113),a=r(1114),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,r){var o=r(19),a=r(12);t.exports=function IsoTriangleWebGLRenderer(t,i,r,h){r.addToRenderList(i);var l=t.pipelines.set(i.pipeline),u=o(i,r,h),c=l.calcMatrix.copyFrom(u.calc),d=i.width,p=i.height,g=d/2,v=d/i.projection,m=i.isReversed,y=r.alpha*i.alpha;if(i.isFilled){var T,S,w,b,C,A,E;if(t.pipelines.preBatch(i),i.showTop&&m){T=a.getTintAppendFloatAlpha(i.fillTop,y),S=c.getX(-g,-p),w=c.getY(-g,-p),b=c.getX(0,-v-p),C=c.getY(0,-v-p),A=c.getX(g,-p),E=c.getY(g,-p);var M=c.getX(0,v-p),_=c.getY(0,v-p);l.batchQuad(i,S,w,b,C,A,E,M,_,0,0,1,1,T,T,T,T,2)}i.showLeft&&(T=a.getTintAppendFloatAlpha(i.fillLeft,y),m?(S=c.getX(-g,-p),w=c.getY(-g,-p),b=c.getX(0,v),C=c.getY(0,v),A=c.getX(0,v-p),E=c.getY(0,v-p)):(S=c.getX(-g,0),w=c.getY(-g,0),b=c.getX(0,v),C=c.getY(0,v),A=c.getX(0,v-p),E=c.getY(0,v-p)),l.batchTri(i,S,w,b,C,A,E,0,0,1,1,T,T,T,2)),i.showRight&&(T=a.getTintAppendFloatAlpha(i.fillRight,y),m?(S=c.getX(g,-p),w=c.getY(g,-p),b=c.getX(0,v),C=c.getY(0,v),A=c.getX(0,v-p),E=c.getY(0,v-p)):(S=c.getX(g,0),w=c.getY(g,0),b=c.getX(0,v),C=c.getY(0,v),A=c.getX(0,v-p),E=c.getY(0,v-p)),l.batchTri(i,S,w,b,C,A,E,0,0,1,1,T,T,T,2)),t.pipelines.postBatch(i)}}},function(t,i,r){var o=r(48),a=r(30);t.exports=function IsoTriangleCanvasRenderer(t,i,r,h){r.addToRenderList(i);var l=t.currentContext;if(a(t,l,i,r,h)&&i.isFilled){var u=i.width,c=i.height,d=u/2,p=u/i.projection,g=i.isReversed;i.showTop&&g&&(o(l,i,i.fillTop),l.beginPath(),l.moveTo(-d,-c),l.lineTo(0,-p-c),l.lineTo(d,-c),l.lineTo(0,p-c),l.fill()),i.showLeft&&(o(l,i,i.fillLeft),l.beginPath(),g?(l.moveTo(-d,-c),l.lineTo(0,p),l.lineTo(0,p-c)):(l.moveTo(-d,0),l.lineTo(0,p),l.lineTo(0,p-c)),l.fill()),i.showRight&&(o(l,i,i.fillRight),l.beginPath(),g?(l.moveTo(d,-c),l.lineTo(0,p),l.lineTo(0,p-c)):(l.moveTo(d,0),l.lineTo(0,p),l.lineTo(0,p-c)),l.fill()),l.restore()}}},function(t,i,r){var o=r(1),a=r(1);o=r(1116),a=r(1117),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,r){var o=r(19),a=r(12);t.exports=function LineWebGLRenderer(t,i,r,h){r.addToRenderList(i);var l=t.pipelines.set(i.pipeline),u=o(i,r,h);l.calcMatrix.copyFrom(u.calc);var c=i._displayOriginX,d=i._displayOriginY,p=r.alpha*i.alpha;if(t.pipelines.preBatch(i),i.isStroked){var g=l.strokeTint,v=a.getTintAppendFloatAlpha(i.strokeColor,i.strokeAlpha*p);g.TL=v,g.TR=v,g.BL=v,g.BR=v;var m=i._startWidth,y=i._endWidth;l.batchLine(i.geom.x1-c,i.geom.y1-d,i.geom.x2-c,i.geom.y2-d,m,y,1,0,!1,u.sprite,u.camera)}t.pipelines.postBatch(i)}},function(t,i,r){var o=r(60),a=r(30);t.exports=function LineCanvasRenderer(t,i,r,h){r.addToRenderList(i);var l=t.currentContext;if(a(t,l,i,r,h)){var u=i._displayOriginX,c=i._displayOriginY;i.isStroked&&(o(l,i),l.beginPath(),l.moveTo(i.geom.x1-u,i.geom.y1-c),l.lineTo(i.geom.x2-u,i.geom.y2-c),l.stroke()),l.restore()}}},function(t,i,r){var o=r(1),a=r(1);o=r(1119),a=r(1120),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,r){var o=r(114),a=r(19),h=r(81);t.exports=function PolygonWebGLRenderer(t,i,r,l){r.addToRenderList(i);var u=t.pipelines.set(i.pipeline),c=a(i,r,l),d=u.calcMatrix.copyFrom(c.calc),p=i._displayOriginX,g=i._displayOriginY,v=r.alpha*i.alpha;t.pipelines.preBatch(i),i.isFilled&&o(u,d,i,v,p,g),i.isStroked&&h(u,i,v,p,g),t.pipelines.postBatch(i)}},function(t,i,r){var o=r(48),a=r(60),h=r(30);t.exports=function PolygonCanvasRenderer(t,i,r,l){r.addToRenderList(i);var u=t.currentContext;if(h(t,u,i,r,l)){var c=i._displayOriginX,d=i._displayOriginY,p=i.pathData,g=p.length-1,v=p[0]-c,m=p[1]-d;u.beginPath(),u.moveTo(v,m),i.closePath||(g-=2);for(var y=2;y<g;y+=2){var T=p[y]-c,S=p[y+1]-d;u.lineTo(T,S)}u.closePath(),i.isFilled&&(o(u,i),u.fill()),i.isStroked&&(a(u,i),u.stroke()),u.restore()}}},function(t,i,r){var o=r(1),a=r(1);o=r(1122),a=r(1123),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,r){var o=r(19),a=r(81),h=r(12);t.exports=function RectangleWebGLRenderer(t,i,r,l){r.addToRenderList(i);var u=t.pipelines.set(i.pipeline),c=o(i,r,l);u.calcMatrix.copyFrom(c.calc);var d=i._displayOriginX,p=i._displayOriginY,g=r.alpha*i.alpha;if(t.pipelines.preBatch(i),i.isFilled){var v=u.fillTint,m=h.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*g);v.TL=m,v.TR=m,v.BL=m,v.BR=m,u.batchFillRect(-d,-p,i.width,i.height)}i.isStroked&&a(u,i,g,d,p),t.pipelines.postBatch(i)}},function(t,i,r){var o=r(48),a=r(60),h=r(30);t.exports=function RectangleCanvasRenderer(t,i,r,l){r.addToRenderList(i);var u=t.currentContext;if(h(t,u,i,r,l)){var c=i._displayOriginX,d=i._displayOriginY;i.isFilled&&(o(u,i),u.fillRect(-c,-d,i.width,i.height)),i.isStroked&&(a(u,i),u.beginPath(),u.rect(-c,-d,i.width,i.height),u.stroke()),u.restore()}}},function(t,i,r){var o=r(1),a=r(1);o=r(1125),a=r(1126),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,r){var o=r(114),a=r(19),h=r(81);t.exports=function StarWebGLRenderer(t,i,r,l){r.addToRenderList(i);var u=t.pipelines.set(i.pipeline),c=a(i,r,l),d=u.calcMatrix.copyFrom(c.calc),p=i._displayOriginX,g=i._displayOriginY,v=r.alpha*i.alpha;t.pipelines.preBatch(i),i.isFilled&&o(u,d,i,v,p,g),i.isStroked&&h(u,i,v,p,g),t.pipelines.postBatch(i)}},function(t,i,r){var o=r(48),a=r(60),h=r(30);t.exports=function StarCanvasRenderer(t,i,r,l){r.addToRenderList(i);var u=t.currentContext;if(h(t,u,i,r,l)){var c=i._displayOriginX,d=i._displayOriginY,p=i.pathData,g=p.length-1,v=p[0]-c,m=p[1]-d;u.beginPath(),u.moveTo(v,m),i.closePath||(g-=2);for(var y=2;y<g;y+=2){var T=p[y]-c,S=p[y+1]-d;u.lineTo(T,S)}u.closePath(),i.isFilled&&(o(u,i),u.fill()),i.isStroked&&(a(u,i),u.stroke()),u.restore()}}},function(t,i,r){var o=r(1),a=r(1);o=r(1128),a=r(1129),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,r){var o=r(19),a=r(81),h=r(12);t.exports=function TriangleWebGLRenderer(t,i,r,l){r.addToRenderList(i);var u=t.pipelines.set(i.pipeline),c=o(i,r,l);u.calcMatrix.copyFrom(c.calc);var d=i._displayOriginX,p=i._displayOriginY,g=r.alpha*i.alpha;if(t.pipelines.preBatch(i),i.isFilled){var v=u.fillTint,m=h.getTintAppendFloatAlpha(i.fillColor,i.fillAlpha*g);v.TL=m,v.TR=m,v.BL=m,v.BR=m;var y=i.geom.x1-d,T=i.geom.y1-p,S=i.geom.x2-d,w=i.geom.y2-p,b=i.geom.x3-d,C=i.geom.y3-p;u.batchFillTriangle(y,T,S,w,b,C,c.sprite,c.camera)}i.isStroked&&a(u,i,g,d,p),t.pipelines.postBatch(i)}},function(t,i,r){var o=r(48),a=r(60),h=r(30);t.exports=function TriangleCanvasRenderer(t,i,r,l){r.addToRenderList(i);var u=t.currentContext;if(h(t,u,i,r,l)){var c=i._displayOriginX,d=i._displayOriginY,p=i.geom.x1-c,g=i.geom.y1-d,v=i.geom.x2-c,m=i.geom.y2-d,y=i.geom.x3-c,T=i.geom.y3-d;u.beginPath(),u.moveTo(p,g),u.lineTo(v,m),u.lineTo(y,T),u.closePath(),i.isFilled&&(o(u,i),u.fill()),i.isStroked&&(a(u,i),u.stroke()),u.restore()}}},function(t,i,r){var o=r(213);r(5).register("blitter",(function(t,i,r,a){return this.displayList.add(new o(this.scene,t,i,r,a))}))},function(t,i,r){var o=r(214);r(5).register("container",(function(t,i,r){return this.displayList.add(new o(this.scene,t,i,r))}))},function(t,i,r){var o=r(442);r(5).register("dom",(function(t,i,r,a,h){var l=new o(this.scene,t,i,r,a,h);return this.displayList.add(l),l}))},function(t,i,r){var o=r(215);r(5).register("dynamicBitmapText",(function(t,i,r,a,h){return this.displayList.add(new o(this.scene,t,i,r,a,h))}))},function(t,i,r){var o=r(444);r(5).register("extern",(function(){var t=new o(this.scene);return this.displayList.add(t),t}))},function(t,i,r){var o=r(216);r(5).register("graphics",(function(t){return this.displayList.add(new o(this.scene,t))}))},function(t,i,r){var o=r(113);r(5).register("group",(function(t,i){return this.updateList.add(new o(this.scene,t,i))}))},function(t,i,r){var o=r(125);r(5).register("image",(function(t,i,r,a){return this.displayList.add(new o(this.scene,t,i,r,a))}))},function(t,i,r){var o=r(219);r(5).register("layer",(function(t){return this.displayList.add(new o(this.scene,t))}))},function(t,i,r){var o=r(5),a=r(220);o.register("particles",(function(t,i,r){return this.displayList.add(new a(this.scene,t,i,r))}))},function(t,i,r){var o=r(5),a=r(457);o.register("follower",(function(t,i,r,o,h){var l=new a(this.scene,t,i,r,o,h);return this.displayList.add(l),this.updateList.add(l),l}))},function(t,i,r){var o=r(5),a=r(221);o.register("renderTexture",(function(t,i,r,o,h,l){return this.displayList.add(new a(this.scene,t,i,r,o,h,l))}))},function(t,i,r){var o=r(223);r(5).register("rope",(function(t,i,r,a,h,l,u,c){return this.displayList.add(new o(this.scene,t,i,r,a,h,l,u,c))}))},function(t,i,r){var o=r(5),a=r(73);o.register("sprite",(function(t,i,r,o){var h=new a(this.scene,t,i,r,o);return this.displayList.add(h),h}))},function(t,i,r){var o=r(148);r(5).register("bitmapText",(function(t,i,r,a,h,l){return this.displayList.add(new o(this.scene,t,i,r,a,h,l))}))},function(t,i,r){var o=r(224);r(5).register("text",(function(t,i,r,a){return this.displayList.add(new o(this.scene,t,i,r,a))}))},function(t,i,r){var o=r(225);r(5).register("tileSprite",(function(t,i,r,a,h,l){return this.displayList.add(new o(this.scene,t,i,r,a,h,l))}))},function(t,i,r){var o=r(129);r(5).register("zone",(function(t,i,r,a){return this.displayList.add(new o(this.scene,t,i,r,a))}))},function(t,i,r){var o=r(226);r(5).register("video",(function(t,i,r){return this.displayList.add(new o(this.scene,t,i,r))}))},function(t,i,r){var o=r(461),a=r(5);a.register("arc",(function(t,i,r,a,h,l,u,c){return this.displayList.add(new o(this.scene,t,i,r,a,h,l,u,c))})),a.register("circle",(function(t,i,r,a,h){return this.displayList.add(new o(this.scene,t,i,r,0,360,!1,a,h))}))},function(t,i,r){var o=r(5),a=r(462);o.register("curve",(function(t,i,r,o,h){return this.displayList.add(new a(this.scene,t,i,r,o,h))}))},function(t,i,r){var o=r(463);r(5).register("ellipse",(function(t,i,r,a,h,l){return this.displayList.add(new o(this.scene,t,i,r,a,h,l))}))},function(t,i,r){var o=r(5),a=r(464);o.register("grid",(function(t,i,r,o,h,l,u,c,d,p){return this.displayList.add(new a(this.scene,t,i,r,o,h,l,u,c,d,p))}))},function(t,i,r){var o=r(5),a=r(465);o.register("isobox",(function(t,i,r,o,h,l,u){return this.displayList.add(new a(this.scene,t,i,r,o,h,l,u))}))},function(t,i,r){var o=r(5),a=r(466);o.register("isotriangle",(function(t,i,r,o,h,l,u,c){return this.displayList.add(new a(this.scene,t,i,r,o,h,l,u,c))}))},function(t,i,r){var o=r(5),a=r(467);o.register("line",(function(t,i,r,o,h,l,u,c){return this.displayList.add(new a(this.scene,t,i,r,o,h,l,u,c))}))},function(t,i,r){var o=r(5),a=r(468);o.register("polygon",(function(t,i,r,o,h){return this.displayList.add(new a(this.scene,t,i,r,o,h))}))},function(t,i,r){var o=r(5),a=r(473);o.register("rectangle",(function(t,i,r,o,h,l){return this.displayList.add(new a(this.scene,t,i,r,o,h,l))}))},function(t,i,r){var o=r(474);r(5).register("star",(function(t,i,r,a,h,l,u){return this.displayList.add(new o(this.scene,t,i,r,a,h,l,u))}))},function(t,i,r){var o=r(5),a=r(475);o.register("triangle",(function(t,i,r,o,h,l,u,c,d,p){return this.displayList.add(new a(this.scene,t,i,r,o,h,l,u,c,d,p))}))},function(t,i,r){var o=r(213),a=r(28),h=r(16),l=r(13);h.register("blitter",(function(t,i){void 0===t&&(t={});var r=l(t,"key",null),h=l(t,"frame",null),u=new o(this.scene,0,0,r,h);return void 0!==i&&(t.add=i),a(this.scene,u,t),u}))},function(t,i,r){var o=r(28),a=r(214),h=r(16),l=r(13);h.register("container",(function(t,i){void 0===t&&(t={});var r=l(t,"x",0),h=l(t,"y",0),u=l(t,"children",null),c=new a(this.scene,r,h,u);return void 0!==i&&(t.add=i),o(this.scene,c,t),c}))},function(t,i,r){var o=r(215),a=r(28),h=r(16),l=r(13);h.register("dynamicBitmapText",(function(t,i){void 0===t&&(t={});var r=l(t,"font",""),h=l(t,"text",""),u=l(t,"size",!1),c=new o(this.scene,0,0,r,h,u);return void 0!==i&&(t.add=i),a(this.scene,c,t),c}))},function(t,i,r){var o=r(16),a=r(216);o.register("graphics",(function(t,i){void 0===t&&(t={}),void 0!==i&&(t.add=i);var r=new a(this.scene,t);return t.add&&this.scene.sys.displayList.add(r),r}))},function(t,i,r){var o=r(16),a=r(113);o.register("group",(function(t){return new a(this.scene,null,t)}))},function(t,i,r){var o=r(28),a=r(16),h=r(13),l=r(125);a.register("image",(function(t,i){void 0===t&&(t={});var r=h(t,"key",null),a=h(t,"frame",null),u=new l(this.scene,0,0,r,a);return void 0!==i&&(t.add=i),o(this.scene,u,t),u}))},function(t,i,r){var o=r(28),a=r(219),h=r(16),l=r(13);h.register("layer",(function(t,i){void 0===t&&(t={});var r=l(t,"children",null),h=new a(this.scene,r);return void 0!==i&&(t.add=i),o(this.scene,h,t),h}))},function(t,i,r){var o=r(16),a=r(13),h=r(2),l=r(220);o.register("particles",(function(t,i){void 0===t&&(t={});var r=a(t,"key",null),o=a(t,"frame",null),u=h(t,"emitters",null),c=new l(this.scene,r,o,u);return void 0!==i&&(t.add=i),h(t,"add",!1)?this.displayList.add(c):this.updateList.add(c),c}))},function(t,i,r){var o=r(28),a=r(16),h=r(13),l=r(221);a.register("renderTexture",(function(t,i){void 0===t&&(t={});var r=h(t,"x",0),a=h(t,"y",0),u=h(t,"width",32),c=h(t,"height",32),d=h(t,"key",void 0),p=h(t,"frame",void 0),g=new l(this.scene,r,a,u,c,d,p);return void 0!==i&&(t.add=i),o(this.scene,g,t),g}))},function(t,i,r){var o=r(28),a=r(16),h=r(13),l=r(6),u=r(223);a.register("rope",(function(t,i){void 0===t&&(t={});var r=h(t,"key",null),a=h(t,"frame",null),c=h(t,"horizontal",!0),d=l(t,"points",void 0),p=l(t,"colors",void 0),g=l(t,"alphas",void 0),v=new u(this.scene,0,0,r,a,d,c,p,g);return void 0!==i&&(t.add=i),o(this.scene,v,t),t.add||this.updateList.add(v),v}))},function(t,i,r){var o=r(28),a=r(439),h=r(16),l=r(13),u=r(73);h.register("sprite",(function(t,i){void 0===t&&(t={});var r=l(t,"key",null),h=l(t,"frame",null),c=new u(this.scene,0,0,r,h);return void 0!==i&&(t.add=i),o(this.scene,c,t),a(c,t),c}))},function(t,i,r){var o=r(148),a=r(28),h=r(16),l=r(13),u=r(6);h.register("bitmapText",(function(t,i){void 0===t&&(t={});var r=u(t,"font",""),h=l(t,"text",""),c=l(t,"size",!1),d=u(t,"align",0),p=new o(this.scene,0,0,r,h,c,d);return void 0!==i&&(t.add=i),a(this.scene,p,t),p}))},function(t,i,r){var o=r(28),a=r(16),h=r(13),l=r(224);a.register("text",(function(t,i){void 0===t&&(t={});var r=h(t,"text",""),a=h(t,"style",null),u=h(t,"padding",null);null!==u&&(a.padding=u);var c=new l(this.scene,0,0,r,a);return void 0!==i&&(t.add=i),o(this.scene,c,t),c.autoRound=h(t,"autoRound",!0),c.resolution=h(t,"resolution",1),c}))},function(t,i,r){var o=r(28),a=r(16),h=r(13),l=r(225);a.register("tileSprite",(function(t,i){void 0===t&&(t={});var r=h(t,"x",0),a=h(t,"y",0),u=h(t,"width",512),c=h(t,"height",512),d=h(t,"key",""),p=h(t,"frame",""),g=new l(this.scene,r,a,u,c,d,p);return void 0!==i&&(t.add=i),o(this.scene,g,t),g}))},function(t,i,r){var o=r(16),a=r(13),h=r(129);o.register("zone",(function(t){var i=a(t,"x",0),r=a(t,"y",0),o=a(t,"width",1),l=a(t,"height",o);return new h(this.scene,i,r,o,l)}))},function(t,i,r){var o=r(28),a=r(16),h=r(13),l=r(226);a.register("video",(function(t,i){void 0===t&&(t={});var r=h(t,"key",null),a=new l(this.scene,0,0,r);return void 0!==i&&(t.add=i),o(this.scene,a,t),t.add||this.updateList.add(a),a}))},function(t,i,r){var o=r(1),a=r(1);o=r(1177),a=r(1178),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,r){var o=r(19);t.exports=function ShaderWebGLRenderer(t,i,r,a){if(i.shader){if(r.addToRenderList(i),t.pipelines.clear(),i.renderToTexture)i.load(),i.flush();else{var h=o(i,r,a).calc;t.width===i._rendererWidth&&t.height===i._rendererHeight||i.projOrtho(0,t.width,t.height,0),i.load(h.matrix),i.flush()}t.pipelines.rebind()}}},function(t,i){t.exports=function ShaderCanvasRenderer(){}},function(t,i,r){var o=r(1),a=r(1);o=r(1180),a=r(1181),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,r){var o=r(19);t.exports=function MeshWebGLRenderer(t,i,r,a){var h=i.faces,l=h.length;if(0!==l){r.addToRenderList(i);var u=t.pipelines.set(i.pipeline,i),c=o(i,r,a).calc,d=u.setGameObject(i),p=u.vertexViewF32,g=u.vertexViewU32,v=u.vertexCount*u.currentShader.vertexComponentCount-1,m=i.tintFill,y=[],T=i.debugCallback,S=c.a,w=c.b,b=c.c,C=c.d,A=c.e,E=c.f,M=i.viewPosition.z,_=i.hideCCW,R=r.roundPixels,P=r.alpha*i.alpha,k=0;t.pipelines.preBatch(i);for(var O=0;O<l;O++){var L=h[O];L.isInView(r,_,M,P,S,w,b,C,A,E,R)&&(u.shouldFlush(3)&&(u.flush(),v=0),v=L.load(p,g,v,d,m),k++,u.vertexCount+=3,T&&y.push(L))}i.totalFrame+=k,T&&T.call(i,i,y),t.pipelines.postBatch(i)}}},function(t,i){t.exports=function MeshCanvasRenderer(){}},function(t,i,r){var o=r(1),a=r(1);o=r(1183),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,r){var o=r(19);t.exports=function PointLightWebGLRenderer(t,i,r,a){r.addToRenderList(i);var h=t.pipelines.set(i.pipeline),l=o(i,r,a).calc,u=i.width,c=i.height,d=-i._radius,p=-i._radius,g=d+u,v=p+c,m=l.getX(0,0),y=l.getY(0,0),T=l.getX(d,p),S=l.getY(d,p),w=l.getX(d,v),b=l.getY(d,v),C=l.getX(g,v),A=l.getY(g,v),E=l.getX(g,p),M=l.getY(g,p);t.pipelines.preBatch(i),h.batchPointLight(i,r,T,S,w,b,C,A,E,M,m,y),t.pipelines.postBatch(i)}},function(t,i,r){var o=r(229);r(5).register("shader",(function(t,i,r,a,h,l,u){return this.displayList.add(new o(this.scene,t,i,r,a,h,l,u))}))},function(t,i,r){var o=r(230);r(5).register("mesh",(function(t,i,r,a,h,l,u,c,d,p,g){return this.displayList.add(new o(this.scene,t,i,r,a,h,l,u,c,d,p,g))}))},function(t,i,r){var o=r(5),a=r(150);o.register("pointlight",(function(t,i,r,o,h,l){return this.displayList.add(new a(this.scene,t,i,r,o,h,l))}))},function(t,i,r){var o=r(28),a=r(16),h=r(13),l=r(229);a.register("shader",(function(t,i){void 0===t&&(t={});var r=h(t,"key",null),a=h(t,"x",0),u=h(t,"y",0),c=h(t,"width",128),d=h(t,"height",128),p=new l(this.scene,r,a,u,c,d);return void 0!==i&&(t.add=i),o(this.scene,p,t),p}))},function(t,i,r){var o=r(28),a=r(16),h=r(13),l=r(6),u=r(230);a.register("mesh",(function(t,i){void 0===t&&(t={});var r=h(t,"key",null),a=h(t,"frame",null),c=l(t,"vertices",[]),d=l(t,"uvs",[]),p=l(t,"indicies",[]),g=l(t,"containsZ",!1),v=l(t,"normals",[]),m=l(t,"colors",16777215),y=l(t,"alphas",1),T=new u(this.scene,0,0,r,a,c,d,p,g,v,m,y);return void 0!==i&&(t.add=i),o(this.scene,T,t),T}))},function(t,i,r){var o=r(28),a=r(16),h=r(13),l=r(150);a.register("pointlight",(function(t,i){void 0===t&&(t={});var r=h(t,"color",16777215),a=h(t,"radius",128),u=h(t,"intensity",1),c=h(t,"attenuation",.1),d=new l(this.scene,0,0,r,a,u,c);return void 0!==i&&(t.add=i),o(this.scene,d,t),d}))},function(t,i,r){var o=r(0),a=r(482),h=r(24),l=r(20),u=new o({Extends:a,initialize:function LightsPlugin(t){this.scene=t,this.systems=t.sys,t.sys.settings.isBooted||t.sys.events.once(l.BOOT,this.boot,this),a.call(this)},boot:function boot(){var t=this.systems.events;t.on(l.SHUTDOWN,this.shutdown,this),t.on(l.DESTROY,this.destroy,this)},destroy:function destroy(){this.shutdown(),this.scene=void 0,this.systems=void 0}});h.register("LightsPlugin",u,"lights"),t.exports=u},function(t,i,r){var o=r(65);o.Area=r(1192),o.Circumference=r(302),o.CircumferencePoint=r(169),o.Clone=r(1193),o.Contains=r(66),o.ContainsPoint=r(1194),o.ContainsRect=r(1195),o.CopyFrom=r(1196),o.Equals=r(1197),o.GetBounds=r(1198),o.GetPoint=r(300),o.GetPoints=r(301),o.Offset=r(1199),o.OffsetPoint=r(1200),o.Random=r(170),t.exports=o},function(t,i){t.exports=function Area(t){return t.radius>0?Math.PI*t.radius*t.radius:0}},function(t,i,r){var o=r(65);t.exports=function Clone(t){return new o(t.x,t.y,t.radius)}},function(t,i,r){var o=r(66);t.exports=function ContainsPoint(t,i){return o(t,i.x,i.y)}},function(t,i,r){var o=r(66);t.exports=function ContainsRect(t,i){return o(t,i.x,i.y)&&o(t,i.right,i.y)&&o(t,i.x,i.bottom)&&o(t,i.right,i.bottom)}},function(t,i){t.exports=function CopyFrom(t,i){return i.setTo(t.x,t.y,t.radius)}},function(t,i){t.exports=function Equals(t,i){return t.x===i.x&&t.y===i.y&&t.radius===i.radius}},function(t,i,r){var o=r(10);t.exports=function GetBounds(t,i){return void 0===i&&(i=new o),i.x=t.left,i.y=t.top,i.width=t.diameter,i.height=t.diameter,i}},function(t,i){t.exports=function Offset(t,i,r){return t.x+=i,t.y+=r,t}},function(t,i){t.exports=function OffsetPoint(t,i){return t.x+=i.x,t.y+=i.y,t}},function(t,i,r){var o=r(111);o.Area=r(1202),o.Circumference=r(447),o.CircumferencePoint=r(218),o.Clone=r(1203),o.Contains=r(112),o.ContainsPoint=r(1204),o.ContainsRect=r(1205),o.CopyFrom=r(1206),o.Equals=r(1207),o.GetBounds=r(1208),o.GetPoint=r(445),o.GetPoints=r(446),o.Offset=r(1209),o.OffsetPoint=r(1210),o.Random=r(180),t.exports=o},function(t,i){t.exports=function Area(t){return t.isEmpty()?0:t.getMajorRadius()*t.getMinorRadius()*Math.PI}},function(t,i,r){var o=r(111);t.exports=function Clone(t){return new o(t.x,t.y,t.width,t.height)}},function(t,i,r){var o=r(112);t.exports=function ContainsPoint(t,i){return o(t,i.x,i.y)}},function(t,i,r){var o=r(112);t.exports=function ContainsRect(t,i){return o(t,i.x,i.y)&&o(t,i.right,i.y)&&o(t,i.x,i.bottom)&&o(t,i.right,i.bottom)}},function(t,i){t.exports=function CopyFrom(t,i){return i.setTo(t.x,t.y,t.width,t.height)}},function(t,i){t.exports=function Equals(t,i){return t.x===i.x&&t.y===i.y&&t.width===i.width&&t.height===i.height}},function(t,i,r){var o=r(10);t.exports=function GetBounds(t,i){return void 0===i&&(i=new o),i.x=t.left,i.y=t.top,i.width=t.width,i.height=t.height,i}},function(t,i){t.exports=function Offset(t,i,r){return t.x+=i,t.y+=r,t}},function(t,i){t.exports=function OffsetPoint(t,i){return t.x+=i.x,t.y+=i.y,t}},function(t,i,r){var o=r(4),a=r(231);t.exports=function GetCircleToCircle(t,i,r){if(void 0===r&&(r=[]),a(t,i)){var h,l,u,c,d=t.x,p=t.y,g=t.radius,v=i.x,m=i.y,y=i.radius;if(p===m)0==(u=(l=-2*m)*l-4*(h=1)*(v*v+(c=(y*y-g*g-v*v+d*d)/(2*(d-v)))*c-2*v*c+m*m-y*y))?r.push(new o(c,-l/(2*h))):u>0&&(r.push(new o(c,(-l+Math.sqrt(u))/(2*h))),r.push(new o(c,(-l-Math.sqrt(u))/(2*h))));else{var T=(d-v)/(p-m),S=(y*y-g*g-v*v+d*d-m*m+p*p)/(2*(p-m));0==(u=(l=2*p*T-2*S*T-2*d)*l-4*(h=T*T+1)*(d*d+p*p+S*S-g*g-2*p*S))?(c=-l/(2*h),r.push(new o(c,S-c*T))):u>0&&(c=(-l+Math.sqrt(u))/(2*h),r.push(new o(c,S-c*T)),c=(-l-Math.sqrt(u))/(2*h),r.push(new o(c,S-c*T)))}}return r}},function(t,i,r){var o=r(232),a=r(151);t.exports=function GetCircleToRectangle(t,i,r){if(void 0===r&&(r=[]),a(t,i)){var h=i.getLineA(),l=i.getLineB(),u=i.getLineC(),c=i.getLineD();o(h,t,r),o(l,t,r),o(u,t,r),o(c,t,r)}return r}},function(t,i,r){var o=r(140),a=r(487),h=new(r(47));function CheckIntersects(t,i,r,l,u){var c=Math.cos(t),d=Math.sin(t);h.setTo(i,r,i+c,r+d);var p=a(h,l);p&&u.push(new o(p.x,p.y,t,p.w))}function SortIntersects(t,i){return t.z-i.z}t.exports=function GetRaysFromPointToPolygon(t,i,r){Array.isArray(r)||(r=[r]);for(var o=[],a=[],h=0;h<r.length;h++)for(var l=r[h].points,u=0;u<l.length;u++){var c=Math.atan2(l[u].y-i,l[u].x-t);-1===a.indexOf(c)&&(CheckIntersects(c,t,i,r,o),CheckIntersects(c-1e-5,t,i,r,o),CheckIntersects(c+1e-5,t,i,r,o),a.push(c))}return o.sort(SortIntersects)}},function(t,i,r){var o=r(10),a=r(152);t.exports=function GetRectangleIntersection(t,i,r){return void 0===r&&(r=new o),a(t,i)&&(r.x=Math.max(t.x,i.x),r.y=Math.max(t.y,i.y),r.width=Math.min(t.right,i.right)-r.x,r.height=Math.min(t.bottom,i.bottom)-r.y),r}},function(t,i,r){var o=r(234),a=r(152);t.exports=function GetRectangleToRectangle(t,i,r){if(void 0===r&&(r=[]),a(t,i)){var h=t.getLineA(),l=t.getLineB(),u=t.getLineC(),c=t.getLineD();o(h,i,r),o(l,i,r),o(u,i,r),o(c,i,r)}return r}},function(t,i,r){var o=r(489),a=r(234);t.exports=function GetRectangleToTriangle(t,i,r){if(void 0===r&&(r=[]),o(t,i)){var h=i.getLineA(),l=i.getLineB(),u=i.getLineC();a(h,t,r),a(l,t,r),a(u,t,r)}return r}},function(t,i,r){var o=r(232),a=r(491);t.exports=function GetTriangleToCircle(t,i,r){if(void 0===r&&(r=[]),a(t,i)){var h=t.getLineA(),l=t.getLineB(),u=t.getLineC();o(h,i,r),o(l,i,r),o(u,i,r)}return r}},function(t,i,r){var o=r(494),a=r(492);t.exports=function GetTriangleToTriangle(t,i,r){if(void 0===r&&(r=[]),o(t,i)){var h=i.getLineA(),l=i.getLineB(),u=i.getLineC();a(t,h,r),a(t,l,r),a(t,u,r)}return r}},function(t,i,r){var o=r(496);t.exports=function PointToLineSegment(t,i){if(!o(t,i))return!1;var r=Math.min(i.x1,i.x2),a=Math.max(i.x1,i.x2),h=Math.min(i.y1,i.y2),l=Math.max(i.y1,i.y2);return t.x>=r&&t.x<=a&&t.y>=h&&t.y<=l}},function(t,i){t.exports=function RectangleToValues(t,i,r,o,a,h){return void 0===h&&(h=0),!(i>t.right+h||r<t.left-h||o>t.bottom+h||a<t.top-h)}},function(t,i,r){var o=r(47);o.Angle=r(97),o.BresenhamPoints=r(317),o.CenterOn=r(1222),o.Clone=r(1223),o.CopyFrom=r(1224),o.Equals=r(1225),o.Extend=r(1226),o.GetEasedPoints=r(1227),o.GetMidPoint=r(1228),o.GetNearestPoint=r(1229),o.GetNormal=r(1230),o.GetPoint=r(307),o.GetPoints=r(172),o.GetShortestDistance=r(1231),o.Height=r(1232),o.Length=r(67),o.NormalAngle=r(497),o.NormalX=r(1233),o.NormalY=r(1234),o.Offset=r(1235),o.PerpSlope=r(1236),o.Random=r(173),o.ReflectAngle=r(1237),o.Rotate=r(1238),o.RotateAroundPoint=r(1239),o.RotateAroundXY=r(236),o.SetToAngle=r(1240),o.Slope=r(1241),o.Width=r(1242),t.exports=o},function(t,i){t.exports=function CenterOn(t,i,r){var o=i-(t.x1+t.x2)/2,a=r-(t.y1+t.y2)/2;return t.x1+=o,t.y1+=a,t.x2+=o,t.y2+=a,t}},function(t,i,r){var o=r(47);t.exports=function Clone(t){return new o(t.x1,t.y1,t.x2,t.y2)}},function(t,i){t.exports=function CopyFrom(t,i){return i.setTo(t.x1,t.y1,t.x2,t.y2)}},function(t,i){t.exports=function Equals(t,i){return t.x1===i.x1&&t.y1===i.y1&&t.x2===i.x2&&t.y2===i.y2}},function(t,i,r){var o=r(67);t.exports=function Extend(t,i,r){void 0===r&&(r=i);var a=o(t),h=t.x2-t.x1,l=t.y2-t.y1;return i&&(t.x1=t.x1-h/a*i,t.y1=t.y1-l/a*i),r&&(t.x2=t.x2+h/a*r,t.y2=t.y2+l/a*r),t}},function(t,i,r){var o=r(352),a=r(80),h=r(4);t.exports=function GetEasedPoints(t,i,r,l,u){void 0===l&&(l=0),void 0===u&&(u=[]);var c,d,p=[],g=t.x1,v=t.y1,m=t.x2-g,y=t.y2-v,T=a(i,u),S=r-1;for(c=0;c<S;c++)d=T(c/S),p.push(new h(g+m*d,v+y*d));if(d=T(1),p.push(new h(g+m*d,v+y*d)),l>0){var w=p[0],b=[w];for(c=1;c<p.length-1;c++){var C=p[c];o(w,C)>=l&&(b.push(C),w=C)}var A=p[p.length-1];return o(w,A)<l&&b.pop(),b.push(A),b}return p}},function(t,i,r){var o=r(4);t.exports=function GetMidPoint(t,i){return void 0===i&&(i=new o),i.x=(t.x1+t.x2)/2,i.y=(t.y1+t.y2)/2,i}},function(t,i,r){var o=r(4);t.exports=function GetNearestPoint(t,i,r){void 0===r&&(r=new o);var a=t.x1,h=t.y1,l=t.x2,u=t.y2,c=(l-a)*(l-a)+(u-h)*(u-h);if(0===c)return r;var d=((i.x-a)*(l-a)+(i.y-h)*(u-h))/c;return r.x=a+d*(l-a),r.y=h+d*(u-h),r}},function(t,i,r){var o=r(14),a=r(97),h=r(4);t.exports=function GetNormal(t,i){void 0===i&&(i=new h);var r=a(t)-o.TAU;return i.x=Math.cos(r),i.y=Math.sin(r),i}},function(t,i){t.exports=function GetShortestDistance(t,i){var r=t.x1,o=t.y1,a=t.x2,h=t.y2,l=(a-r)*(a-r)+(h-o)*(h-o);if(0===l)return!1;var u=((o-i.y)*(a-r)-(r-i.x)*(h-o))/l;return Math.abs(u)*Math.sqrt(l)}},function(t,i){t.exports=function Height(t){return Math.abs(t.y1-t.y2)}},function(t,i,r){var o=r(14),a=r(97);t.exports=function NormalX(t){return Math.cos(a(t)-o.TAU)}},function(t,i,r){var o=r(14),a=r(97);t.exports=function NormalY(t){return Math.sin(a(t)-o.TAU)}},function(t,i){t.exports=function Offset(t,i,r){return t.x1+=i,t.y1+=r,t.x2+=i,t.y2+=r,t}},function(t,i){t.exports=function PerpSlope(t){return-(t.x2-t.x1)/(t.y2-t.y1)}},function(t,i,r){var o=r(97),a=r(497);t.exports=function ReflectAngle(t,i){return 2*a(i)-Math.PI-o(t)}},function(t,i,r){var o=r(236);t.exports=function Rotate(t,i){var r=(t.x1+t.x2)/2,a=(t.y1+t.y2)/2;return o(t,r,a,i)}},function(t,i,r){var o=r(236);t.exports=function RotateAroundPoint(t,i,r){return o(t,i.x,i.y,r)}},function(t,i){t.exports=function SetToAngle(t,i,r,o,a){return t.x1=i,t.y1=r,t.x2=i+Math.cos(o)*a,t.y2=r+Math.sin(o)*a,t}},function(t,i){t.exports=function Slope(t){return(t.y2-t.y1)/(t.x2-t.x1)}},function(t,i){t.exports=function Width(t){return Math.abs(t.x1-t.x2)}},function(t,i,r){var o={Face:r(116),GenerateGridVerts:r(1244),GenerateObjVerts:r(480),GenerateVerts:r(479),ParseObj:r(498),ParseObjMaterial:r(499),RotateFace:r(1245),Vertex:r(117)};t.exports=o},function(t,i,r){var o=r(116),a=r(2),h=r(69),l=r(39),u=r(117),c=new l,d=new l,p=new h;t.exports=function GenerateGridVerts(t){var i=a(t,"mesh"),r=a(t,"texture",null),h=a(t,"frame"),l=a(t,"width",1),g=a(t,"height",l),v=a(t,"widthSegments",1),m=a(t,"heightSegments",v),y=a(t,"x",0),T=a(t,"y",0),S=a(t,"z",0),w=a(t,"rotateX",0),b=a(t,"rotateY",0),C=a(t,"rotateZ",0),A=a(t,"zIsUp",!0),E=a(t,"isOrtho",!!i&&i.dirtyCache[11]),M=a(t,"colors",[16777215]),_=a(t,"alphas",[1]),R=a(t,"tile",!1),P=a(t,"flipY",!1),k=a(t,"width",null),O={faces:[],verts:[]};if(c.set(y,T,S),d.set(w,b,C),p.fromRotationXYTranslation(d,c,A),!r&&i)r=i.texture;else{if(!i||"string"!=typeof r)return O;r=i.scene.sys.textures.get(r)}var L=r.get(h);!k&&E&&r&&i&&(l=L.width/i.height,g=L.height/i.height);var D,I,B=l/2,N=g/2,G=Math.floor(v),Y=Math.floor(m),U=G+1,X=Y+1,V=l/G,z=g/Y,W=[],H=[],j=0,q=1,K=0,Z=1;L&&(j=L.u0,q=L.u1,P?(K=L.v1,Z=L.v0):(K=L.v0,Z=L.v1));var J=q-j,Q=Z-K;for(I=0;I<X;I++){var $=I*z-N;for(D=0;D<U;D++){var tt=D*V-B;H.push(tt,-$);var et=j+J*(D/G),it=K+Q*(I/Y);W.push(et,it)}}Array.isArray(M)||(M=[M]),Array.isArray(_)||(_=[_]);var nt=0,rt=0;for(I=0;I<Y;I++)for(D=0;D<G;D++){var st=2*(D+U*I),ot=2*(D+U*(I+1)),at=2*(D+1+U*(I+1)),ht=2*(D+1+U*I),lt=M[rt],ut=_[nt],ct=new u(H[st],H[st+1],0,W[st],W[st+1],lt,ut).transformMat4(p),dt=new u(H[ot],H[ot+1],0,W[ot],W[ot+1],lt,ut).transformMat4(p),ft=new u(H[ht],H[ht+1],0,W[ht],W[ht+1],lt,ut).transformMat4(p),pt=new u(H[ot],H[ot+1],0,W[ot],W[ot+1],lt,ut).transformMat4(p),gt=new u(H[at],H[at+1],0,W[at],W[at+1],lt,ut).transformMat4(p),vt=new u(H[ht],H[ht+1],0,W[ht],W[ht+1],lt,ut).transformMat4(p);R&&(ct.setUVs(j,Z),dt.setUVs(j,K),ft.setUVs(q,Z),pt.setUVs(j,K),gt.setUVs(q,K),vt.setUVs(q,Z)),++rt===M.length&&(rt=0),++nt===_.length&&(nt=0),O.verts.push(ct,dt,ft,pt,gt,vt),O.faces.push(new o(ct,dt,ft),new o(pt,gt,vt))}return i&&(i.faces=i.faces.concat(O.faces),i.vertices=i.vertices.concat(O.verts)),O}},function(t,i){t.exports=function RotateFace(t,i,r,o){var a,h;if(void 0===r&&void 0===o){var l=t.getInCenter();a=l.x,h=l.y}var u=Math.cos(i),c=Math.sin(i),d=t.vertex1,p=t.vertex2,g=t.vertex3,v=d.x-a,m=d.y-h;d.set(v*u-m*c+a,v*c+m*u+h),v=p.x-a,m=p.y-h,p.set(v*u-m*c+a,v*c+m*u+h),v=g.x-a,m=g.y-h,g.set(v*u-m*c+a,v*c+m*u+h)}},function(t,i,r){var o=r(4);o.Ceil=r(1247),o.Clone=r(1248),o.CopyFrom=r(1249),o.Equals=r(1250),o.Floor=r(1251),o.GetCentroid=r(1252),o.GetMagnitude=r(500),o.GetMagnitudeSq=r(501),o.GetRectangleFromPoints=r(1253),o.Interpolate=r(1254),o.Invert=r(1255),o.Negative=r(1256),o.Project=r(1257),o.ProjectUnit=r(1258),o.SetMagnitude=r(1259),t.exports=o},function(t,i){t.exports=function Ceil(t){return t.setTo(Math.ceil(t.x),Math.ceil(t.y))}},function(t,i,r){var o=r(4);t.exports=function Clone(t){return new o(t.x,t.y)}},function(t,i){t.exports=function CopyFrom(t,i){return i.setTo(t.x,t.y)}},function(t,i){t.exports=function Equals(t,i){return t.x===i.x&&t.y===i.y}},function(t,i){t.exports=function Floor(t){return t.setTo(Math.floor(t.x),Math.floor(t.y))}},function(t,i,r){var o=r(4);t.exports=function GetCentroid(t,i){if(void 0===i&&(i=new o),!Array.isArray(t))throw new Error("GetCentroid points argument must be an array");var r=t.length;if(r<1)throw new Error("GetCentroid points array must not be empty");if(1===r)i.x=t[0].x,i.y=t[0].y;else{for(var a=0;a<r;a++)i.x+=t[a].x,i.y+=t[a].y;i.x/=r,i.y/=r}return i}},function(t,i,r){var o=r(10);t.exports=function GetRectangleFromPoints(t,i){void 0===i&&(i=new o);for(var r=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY,u=0;u<t.length;u++){var c=t[u];c.x>r&&(r=c.x),c.x<a&&(a=c.x),c.y>h&&(h=c.y),c.y<l&&(l=c.y)}return i.x=a,i.y=l,i.width=r-a,i.height=h-l,i}},function(t,i,r){var o=r(4);t.exports=function Interpolate(t,i,r,a){return void 0===r&&(r=0),void 0===a&&(a=new o),a.x=t.x+(i.x-t.x)*r,a.y=t.y+(i.y-t.y)*r,a}},function(t,i){t.exports=function Invert(t){return t.setTo(t.y,t.x)}},function(t,i,r){var o=r(4);t.exports=function Negative(t,i){return void 0===i&&(i=new o),i.setTo(-t.x,-t.y)}},function(t,i,r){var o=r(4),a=r(501);t.exports=function Project(t,i,r){void 0===r&&(r=new o);var h=(t.x*i.x+t.y*i.y)/a(i);return 0!==h&&(r.x=h*i.x,r.y=h*i.y),r}},function(t,i,r){var o=r(4);t.exports=function ProjectUnit(t,i,r){void 0===r&&(r=new o);var a=t.x*i.x+t.y*i.y;return 0!==a&&(r.x=a*i.x,r.y=a*i.y),r}},function(t,i,r){var o=r(500);t.exports=function SetMagnitude(t,i){if(0!==t.x||0!==t.y){var r=o(t);t.x/=r,t.y/=r}return t.x*=i,t.y*=i,t}},function(t,i,r){var o=r(227);o.Clone=r(1261),o.Contains=r(228),o.ContainsPoint=r(1262),o.Earcut=r(59),o.GetAABB=r(469),o.GetNumberArray=r(1263),o.GetPoints=r(470),o.Perimeter=r(471),o.Reverse=r(1264),o.Simplify=r(1265),o.Smooth=r(472),o.Translate=r(1266),t.exports=o},function(t,i,r){var o=r(227);t.exports=function Clone(t){return new o(t.points)}},function(t,i,r){var o=r(228);t.exports=function ContainsPoint(t,i){return o(t,i.x,i.y)}},function(t,i){t.exports=function GetNumberArray(t,i){void 0===i&&(i=[]);for(var r=0;r<t.points.length;r++)i.push(t.points[r].x),i.push(t.points[r].y);return i}},function(t,i){t.exports=function Reverse(t){return t.points.reverse(),t}},function(t,i){function getSqSegDist(t,i,r){var o=i.x,a=i.y,h=r.x-o,l=r.y-a;if(0!==h||0!==l){var u=((t.x-o)*h+(t.y-a)*l)/(h*h+l*l);u>1?(o=r.x,a=r.y):u>0&&(o+=h*u,a+=l*u)}return(h=t.x-o)*h+(l=t.y-a)*l}function simplifyDPStep(t,i,r,o,a){for(var h,l=o,u=i+1;u<r;u++){var c=getSqSegDist(t[u],t[i],t[r]);c>l&&(h=u,l=c)}l>o&&(h-i>1&&simplifyDPStep(t,i,h,o,a),a.push(t[h]),r-h>1&&simplifyDPStep(t,h,r,o,a))}function simplifyDouglasPeucker(t,i){var r=t.length-1,o=[t[0]];return simplifyDPStep(t,0,r,i,o),o.push(t[r]),o}t.exports=function Simplify(t,i,r){void 0===i&&(i=1),void 0===r&&(r=!1);var o=t.points;if(o.length>2){var a=i*i;r||(o=function simplifyRadialDist(t,i){for(var r,o,a,h,l,u=t[0],c=[u],d=1,p=t.length;d<p;d++)r=t[d],a=u,h=void 0,l=void 0,h=(o=r).x-a.x,l=o.y-a.y,h*h+l*l>i&&(c.push(r),u=r);return u!==r&&c.push(r),c}(o,a)),t.setTo(simplifyDouglasPeucker(o,a))}return t}},function(t,i){t.exports=function Translate(t,i,r){for(var o=t.points,a=0;a<o.length;a++)o[a].x+=i,o[a].y+=r;return t}},function(t,i){t.exports=function Area(t){return t.width*t.height}},function(t,i){t.exports=function Ceil(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t}},function(t,i){t.exports=function CeilAll(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t}},function(t,i,r){var o=r(10);t.exports=function Clone(t){return new o(t.x,t.y,t.width,t.height)}},function(t,i,r){var o=r(57);t.exports=function ContainsPoint(t,i){return o(t,i.x,i.y)}},function(t,i){t.exports=function CopyFrom(t,i){return i.setTo(t.x,t.y,t.width,t.height)}},function(t,i){t.exports=function Equals(t,i){return t.x===i.x&&t.y===i.y&&t.width===i.width&&t.height===i.height}},function(t,i,r){var o=r(237);t.exports=function FitInside(t,i){var r=o(t);return r<o(i)?t.setSize(i.height*r,i.height):t.setSize(i.width,i.width/r),t.setPosition(i.centerX-t.width/2,i.centerY-t.height/2)}},function(t,i,r){var o=r(237);t.exports=function FitOutside(t,i){var r=o(t);return r>o(i)?t.setSize(i.height*r,i.height):t.setSize(i.width,i.width/r),t.setPosition(i.centerX-t.width/2,i.centerY-t.height/2)}},function(t,i){t.exports=function Floor(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t}},function(t,i){t.exports=function FloorAll(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t.width=Math.floor(t.width),t.height=Math.floor(t.height),t}},function(t,i,r){var o=r(10);t.exports=function FromXY(t,i,r,a,h){return void 0===h&&(h=new o),h.setTo(Math.min(t,r),Math.min(i,a),Math.abs(t-r),Math.abs(i-a))}},function(t,i,r){var o=r(4);t.exports=function GetCenter(t,i){return void 0===i&&(i=new o),i.x=t.centerX,i.y=t.centerY,i}},function(t,i,r){var o=r(4);t.exports=function GetSize(t,i){return void 0===i&&(i=new o),i.x=t.width,i.y=t.height,i}},function(t,i,r){var o=r(190);t.exports=function Inflate(t,i,r){var a=t.centerX,h=t.centerY;return t.setSize(t.width+2*i,t.height+2*r),o(t,a,h)}},function(t,i,r){var o=r(10),a=r(152);t.exports=function Intersection(t,i,r){return void 0===r&&(r=new o),a(t,i)?(r.x=Math.max(t.x,i.x),r.y=Math.max(t.y,i.y),r.width=Math.min(t.right,i.right)-r.x,r.height=Math.min(t.bottom,i.bottom)-r.y):r.setEmpty(),r}},function(t,i){t.exports=function MergePoints(t,i){for(var r=t.x,o=t.right,a=t.y,h=t.bottom,l=0;l<i.length;l++)r=Math.min(r,i[l].x),o=Math.max(o,i[l].x),a=Math.min(a,i[l].y),h=Math.max(h,i[l].y);return t.x=r,t.y=a,t.width=o-r,t.height=h-a,t}},function(t,i){t.exports=function MergeRect(t,i){var r=Math.min(t.x,i.x),o=Math.max(t.right,i.right);t.x=r,t.width=o-r;var a=Math.min(t.y,i.y),h=Math.max(t.bottom,i.bottom);return t.y=a,t.height=h-a,t}},function(t,i){t.exports=function MergeXY(t,i,r){var o=Math.min(t.x,i),a=Math.max(t.right,i);t.x=o,t.width=a-o;var h=Math.min(t.y,r),l=Math.max(t.bottom,r);return t.y=h,t.height=l-h,t}},function(t,i){t.exports=function Offset(t,i,r){return t.x+=i,t.y+=r,t}},function(t,i){t.exports=function OffsetPoint(t,i){return t.x+=i.x,t.y+=i.y,t}},function(t,i){t.exports=function Overlaps(t,i){return t.x<i.right&&t.right>i.x&&t.y<i.bottom&&t.bottom>i.y}},function(t,i,r){var o=r(4),a=r(36);t.exports=function PerimeterPoint(t,i,r){void 0===r&&(r=new o),i=a(i);var h=Math.sin(i),l=Math.cos(i),u=l>0?t.width/2:t.width/-2,c=h>0?t.height/2:t.height/-2;return Math.abs(u*h)<Math.abs(c*l)?c=u*h/l:u=c*l/h,r.x=u+t.centerX,r.y=c+t.centerY,r}},function(t,i,r){var o=r(195),a=r(503),h=r(4);t.exports=function RandomOutside(t,i,r){if(void 0===r&&(r=new h),a(t,i))switch(o(0,3)){case 0:r.x=t.x+Math.random()*(i.right-t.x),r.y=t.y+Math.random()*(i.top-t.y);break;case 1:r.x=i.x+Math.random()*(t.right-i.x),r.y=i.bottom+Math.random()*(t.bottom-i.bottom);break;case 2:r.x=t.x+Math.random()*(i.x-t.x),r.y=i.y+Math.random()*(t.bottom-i.y);break;case 3:r.x=i.right+Math.random()*(t.right-i.right),r.y=t.y+Math.random()*(i.bottom-t.y)}return r}},function(t,i){t.exports=function SameDimensions(t,i){return t.width===i.width&&t.height===i.height}},function(t,i){t.exports=function Scale(t,i,r){return void 0===r&&(r=i),t.width*=i,t.height*=r,t}},function(t,i,r){var o=r(82);o.Area=r(1294),o.BuildEquilateral=r(1295),o.BuildFromPolygon=r(1296),o.BuildRight=r(1297),o.CenterOn=r(1298),o.Centroid=r(504),o.CircumCenter=r(1299),o.CircumCircle=r(1300),o.Clone=r(1301),o.Contains=r(115),o.ContainsArray=r(235),o.ContainsPoint=r(1302),o.CopyFrom=r(1303),o.Decompose=r(495),o.Equals=r(1304),o.GetPoint=r(476),o.GetPoints=r(477),o.InCenter=r(506),o.Perimeter=r(1305),o.Offset=r(505),o.Random=r(181),o.Rotate=r(1306),o.RotateAroundPoint=r(1307),o.RotateAroundXY=r(238),t.exports=o},function(t,i){t.exports=function Area(t){var i=t.x1,r=t.y1,o=t.x2,a=t.y2,h=t.x3,l=t.y3;return Math.abs(((h-i)*(a-r)-(o-i)*(l-r))/2)}},function(t,i,r){var o=r(82);t.exports=function BuildEquilateral(t,i,r){var a=r*(Math.sqrt(3)/2);return new o(t,i,t+r/2,i+a,t-r/2,i+a)}},function(t,i,r){var o=r(59),a=r(82);t.exports=function BuildFromPolygon(t,i,r,h,l){void 0===i&&(i=null),void 0===r&&(r=1),void 0===h&&(h=1),void 0===l&&(l=[]);for(var u,c,d,p,g,v,m,y,T,S=o(t,i),w=0;w<S.length;w+=3)u=S[w],c=S[w+1],d=S[w+2],p=t[2*u]*r,g=t[2*u+1]*h,v=t[2*c]*r,m=t[2*c+1]*h,y=t[2*d]*r,T=t[2*d+1]*h,l.push(new a(p,g,v,m,y,T));return l}},function(t,i,r){var o=r(82);t.exports=function BuildRight(t,i,r,a){return void 0===a&&(a=r),new o(t,i,t,i-a,t+r,i)}},function(t,i,r){var o=r(504),a=r(505);t.exports=function CenterOn(t,i,r,h){void 0===h&&(h=o);var l=h(t),u=i-l.x,c=r-l.y;return a(t,u,c)}},function(t,i,r){var o=r(3);function det(t,i,r,o){return t*o-i*r}t.exports=function CircumCenter(t,i){void 0===i&&(i=new o);var r=t.x3,a=t.y3,h=t.x1-r,l=t.y1-a,u=t.x2-r,c=t.y2-a,d=2*det(h,l,u,c),p=det(l,h*h+l*l,c,u*u+c*c),g=det(h,h*h+l*l,u,u*u+c*c);return i.x=r-p/d,i.y=a+g/d,i}},function(t,i,r){var o=r(65);t.exports=function CircumCircle(t,i){void 0===i&&(i=new o);var r,a,h=t.x1,l=t.y1,u=t.x2,c=t.y2,d=t.x3,p=t.y3,g=u-h,v=c-l,m=d-h,y=p-l,T=g*(h+u)+v*(l+c),S=m*(h+d)+y*(l+p),w=2*(g*(p-c)-v*(d-u));if(Math.abs(w)<1e-6){var b=Math.min(h,u,d),C=Math.min(l,c,p);r=.5*(Math.max(h,u,d)-b),a=.5*(Math.max(l,c,p)-C),i.x=b+r,i.y=C+a,i.radius=Math.sqrt(r*r+a*a)}else i.x=(y*T-v*S)/w,i.y=(g*S-m*T)/w,r=i.x-h,a=i.y-l,i.radius=Math.sqrt(r*r+a*a);return i}},function(t,i,r){var o=r(82);t.exports=function Clone(t){return new o(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},function(t,i,r){var o=r(115);t.exports=function ContainsPoint(t,i){return o(t,i.x,i.y)}},function(t,i){t.exports=function CopyFrom(t,i){return i.setTo(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},function(t,i){t.exports=function Equals(t,i){return t.x1===i.x1&&t.y1===i.y1&&t.x2===i.x2&&t.y2===i.y2&&t.x3===i.x3&&t.y3===i.y3}},function(t,i,r){var o=r(67);t.exports=function Perimeter(t){var i=t.getLineA(),r=t.getLineB(),a=t.getLineC();return o(i)+o(r)+o(a)}},function(t,i,r){var o=r(238),a=r(506);t.exports=function Rotate(t,i){var r=a(t);return o(t,r.x,r.y,i)}},function(t,i,r){var o=r(238);t.exports=function RotateAroundPoint(t,i,r){return o(t,i.x,i.y,r)}},function(t,i,r){var o=r(203),a=r(17),h={CreatePixelPerfectHandler:r(507),CreateInteractiveObject:r(508),Events:r(51),Gamepad:r(1309),InputManager:r(409),InputPlugin:r(1321),InputPluginCache:r(153),Keyboard:r(1322),Mouse:r(1336),Pointer:r(412),Touch:r(1337)};h=a(!1,h,o),t.exports=h},function(t,i,r){t.exports={Axis:r(509),Button:r(510),Events:r(239),Gamepad:r(511),GamepadPlugin:r(1316),Configs:r(1317)}},function(t,i){t.exports="down"},function(t,i){t.exports="up"},function(t,i){t.exports="connected"},function(t,i){t.exports="disconnected"},function(t,i){t.exports="down"},function(t,i){t.exports="up"},function(t,i,r){var o=r(0),a=r(9),h=r(239),l=r(511),u=r(6),c=r(153),d=r(51),p=new o({Extends:a,initialize:function GamepadPlugin(t){a.call(this),this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,t.pluginEvents.once(d.BOOT,this.boot,this),t.pluginEvents.on(d.START,this.start,this)},boot:function boot(){var t=this.scene.sys.game,i=this.settings.input,r=t.config;this.enabled=u(i,"gamepad",r.inputGamepad)&&t.device.input.gamepads,this.target=u(i,"gamepad.target",r.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(d.DESTROY,this.destroy,this)},start:function start(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(d.SHUTDOWN,this.shutdown,this)},isActive:function isActive(){return this.enabled&&this.scene.sys.isActive()},startListeners:function startListeners(){var t=this,i=this.target,r=function handler(i){!i.defaultPrevented&&t.isActive()&&(t.refreshPads(),t.queue.push(i))};this.onGamepadHandler=r,i.addEventListener("gamepadconnected",r,!1),i.addEventListener("gamepaddisconnected",r,!1),this.sceneInputPlugin.pluginEvents.on(d.UPDATE,this.update,this)},stopListeners:function stopListeners(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(d.UPDATE,this.update);for(var t=0;t<this.gamepads.length;t++)this.gamepads[t].removeAllListeners()},disconnectAll:function disconnectAll(){for(var t=0;t<this.gamepads.length;t++)this.gamepads[t].pad.connected=!1},refreshPads:function refreshPads(){var t=navigator.getGamepads();if(t)for(var i=this.gamepads,r=0;r<t.length;r++){var o=t[r];if(o){var a=o.id,h=o.index,u=i[h];if(u)u.id!==a?(u.destroy(),i[h]=new l(this,o)):u.update(o);else{var c=new l(this,o);i[h]=c,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=c):this._pad3=c:this._pad2=c:this._pad1=c}}}else this.disconnectAll()},getAll:function getAll(){for(var t=[],i=this.gamepads,r=0;r<i.length;r++)i[r]&&t.push(i[r]);return t},getPad:function getPad(t){for(var i=this.gamepads,r=0;r<i.length;r++)if(i[r]&&i[r].index===t)return i[r]},update:function update(){if(this.enabled){this.refreshPads();var t=this.queue.length;if(0!==t)for(var i=this.queue.splice(0,t),r=0;r<t;r++){var o=i[r],a=this.getPad(o.gamepad.index);"gamepadconnected"===o.type?this.emit(h.CONNECTED,a,o):"gamepaddisconnected"===o.type&&this.emit(h.DISCONNECTED,a,o)}}},shutdown:function shutdown(){this.stopListeners(),this.removeAllListeners()},destroy:function destroy(){this.shutdown();for(var t=0;t<this.gamepads.length;t++)this.gamepads[t]&&this.gamepads[t].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function get(){return this.gamepads.length}},pad1:{get:function get(){return this._pad1}},pad2:{get:function get(){return this._pad2}},pad3:{get:function get(){return this._pad3}},pad4:{get:function get(){return this._pad4}}});c.register("GamepadPlugin",p,"gamepad","gamepad","inputGamepad"),t.exports=p},function(t,i,r){t.exports={DUALSHOCK_4:r(1318),SNES_USB:r(1319),XBOX_360:r(1320)}},function(t,i){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(t,i){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(t,i){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(t,i,r){var o=r(65),a=r(66),h=r(0),l=r(203),u=r(508),c=r(507),d=r(50),p=r(111),g=r(112),v=r(51),m=r(9),y=r(2),T=r(56),S=r(153),w=r(7),b=r(24),C=r(10),A=r(57),E=r(20),M=r(82),_=r(115),R=new h({Extends:m,initialize:function InputPlugin(t){m.call(this),this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.manager=t.sys.game.input,this.pluginEvents=new m,this.enabled=!0,this.displayList,this.cameras,S.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var i={cancelled:!1};this._eventContainer={stopPropagation:function stopPropagation(){i.cancelled=!0}},this._eventData=i,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,t.sys.events.once(E.BOOT,this.boot,this),t.sys.events.on(E.START,this.start,this)},boot:function boot(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(E.DESTROY,this.destroy,this),this.pluginEvents.emit(v.BOOT)},start:function start(){var t=this.systems.events;t.on(E.TRANSITION_START,this.transitionIn,this),t.on(E.TRANSITION_OUT,this.transitionOut,this),t.on(E.TRANSITION_COMPLETE,this.transitionComplete,this),t.on(E.PRE_UPDATE,this.preUpdate,this),t.once(E.SHUTDOWN,this.shutdown,this),this.manager.events.on(v.GAME_OUT,this.onGameOut,this),this.manager.events.on(v.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(v.START)},onGameOver:function onGameOver(t){this.isActive()&&this.emit(v.GAME_OVER,t.timeStamp,t)},onGameOut:function onGameOut(t){this.isActive()&&this.emit(v.GAME_OUT,t.timeStamp,t)},preUpdate:function preUpdate(){this.pluginEvents.emit(v.PRE_UPDATE);var t=this._pendingRemoval,i=this._pendingInsertion,r=t.length,o=i.length;if(0!==r||0!==o){for(var a=this._list,h=0;h<r;h++){var l=t[h],u=a.indexOf(l);u>-1&&(a.splice(u,1),this.clear(l,!0))}t.length=0,this._pendingRemoval.length=0,this._list=a.concat(i.splice(0))}},isActive:function isActive(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function updatePoll(t,i){if(!this.isActive())return!1;if(this.pluginEvents.emit(v.UPDATE,t,i),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var r,o=this.manager,a=o.pointers,h=o.pointersTotal;for(r=0;r<h;r++)a[r].updateMotion();if(0===this._list.length)return!1;var l=this.pollRate;if(-1===l)return!1;if(l>0){if(this._pollTimer-=i,!(this._pollTimer<0))return!1;this._pollTimer=this.pollRate}var u=!1;for(r=0;r<h;r++){var c=0,d=a[r];this._tempZones=[],this._temp=this.hitTestPointer(d),this.sortGameObjects(this._temp,d),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),c+=this.processOverOutEvents(d),2===this.getDragState(d)&&this.processDragThresholdEvent(d,t),c>0&&(u=!0)}return u},update:function update(t,i){if(!this.isActive())return!1;for(var r=i.length,o=!1,a=0;a<r;a++){var h=0,u=i[a];switch(this._tempZones=[],this._temp=this.hitTestPointer(u),this.sortGameObjects(this._temp,u),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),t){case l.MOUSE_DOWN:h+=this.processDragDownEvent(u),h+=this.processDownEvents(u),h+=this.processOverOutEvents(u);break;case l.MOUSE_UP:h+=this.processDragUpEvent(u),h+=this.processUpEvents(u),h+=this.processOverOutEvents(u);break;case l.TOUCH_START:h+=this.processDragDownEvent(u),h+=this.processDownEvents(u),h+=this.processOverEvents(u);break;case l.TOUCH_END:case l.TOUCH_CANCEL:h+=this.processDragUpEvent(u),h+=this.processUpEvents(u),h+=this.processOutEvents(u);break;case l.MOUSE_MOVE:case l.TOUCH_MOVE:h+=this.processDragMoveEvent(u),h+=this.processMoveEvents(u),h+=this.processOverOutEvents(u);break;case l.MOUSE_WHEEL:h+=this.processWheelEvent(u)}h>0&&(o=!0)}return this._updatedThisFrame=!0,o},clear:function clear(t,i){void 0===i&&(i=!1);var r=t.input;if(r){i||this.queueForRemoval(t),r.gameObject=void 0,r.target=void 0,r.hitArea=void 0,r.hitAreaCallback=void 0,r.callbackContext=void 0,t.input=null;var o=this._draggable.indexOf(t);return o>-1&&this._draggable.splice(o,1),(o=this._drag[0].indexOf(t))>-1&&this._drag[0].splice(o,1),(o=this._over[0].indexOf(t))>-1&&(this._over[0].splice(o,1),this.manager.resetCursor(r)),t}},disable:function disable(t){t.input.enabled=!1},enable:function enable(t,i,r,o){return void 0===o&&(o=!1),t.input?t.input.enabled=!0:this.setHitArea(t,i,r),t.input&&o&&!t.input.dropZone&&(t.input.dropZone=o),this},hitTestPointer:function hitTestPointer(t){for(var i=this.cameras.getCamerasBelowPointer(t),r=0;r<i.length;r++){for(var o=i[r],a=this.manager.hitTest(t,this._list,o),h=0;h<a.length;h++){var l=a[h];l.input.dropZone&&this._tempZones.push(l)}if(a.length>0)return t.camera=o,a}return t.camera=i[0],[]},processDownEvents:function processDownEvents(t){var i=0,r=this._temp,o=this._eventData,a=this._eventContainer;o.cancelled=!1;for(var h=!1,l=0;l<r.length;l++){var u=r[l];if(u.input){if(i++,u.emit(v.GAMEOBJECT_POINTER_DOWN,t,u.input.localX,u.input.localY,a),o.cancelled||!u.input){h=!0;break}if(this.emit(v.GAMEOBJECT_DOWN,t,u,a),o.cancelled||!u.input){h=!0;break}}}return!h&&this.manager&&(t.downElement===this.manager.game.canvas?this.emit(v.POINTER_DOWN,t,r):this.emit(v.POINTER_DOWN_OUTSIDE,t)),i},getDragState:function getDragState(t){return this._dragState[t.id]},setDragState:function setDragState(t,i){this._dragState[t.id]=i},processDragThresholdEvent:function processDragThresholdEvent(t,i){var r=!1,o=this.dragTimeThreshold,a=this.dragDistanceThreshold;if((a>0&&d(t.x,t.y,t.downX,t.downY)>=a||o>0&&i>=t.downTime+o)&&(r=!0),r)return this.setDragState(t,3),this.processDragStartList(t)},processDragStartList:function processDragStartList(t){if(3!==this.getDragState(t))return 0;for(var i=this._drag[t.id],r=0;r<i.length;r++){var o=i[r],a=o.input;a.dragState=2,a.dragStartX=o.x,a.dragStartY=o.y,a.dragStartXGlobal=t.worldX,a.dragStartYGlobal=t.worldY,a.dragX=a.dragStartXGlobal-a.dragStartX,a.dragY=a.dragStartYGlobal-a.dragStartY,o.emit(v.GAMEOBJECT_DRAG_START,t,a.dragX,a.dragY),this.emit(v.DRAG_START,t,o)}return this.setDragState(t,4),i.length},processDragDownEvent:function processDragDownEvent(t){var i=this._temp;if(0===this._draggable.length||0===i.length||!t.primaryDown||0!==this.getDragState(t))return 0;this.setDragState(t,1);for(var r=[],o=0;o<i.length;o++){var a=i[o];a.input.draggable&&0===a.input.dragState&&r.push(a)}return 0===r.length?(this.setDragState(t,0),0):(r.length>1&&(this.sortGameObjects(r,t),this.topOnly&&r.splice(1)),this._drag[t.id]=r,0===this.dragDistanceThreshold&&0===this.dragTimeThreshold?(this.setDragState(t,3),this.processDragStartList(t)):(this.setDragState(t,2),0))},processDragMoveEvent:function processDragMoveEvent(t){if(2===this.getDragState(t)&&this.processDragThresholdEvent(t,this.manager.game.loop.now),4!==this.getDragState(t))return 0;for(var i=this._tempZones,r=this._drag[t.id],o=0;o<r.length;o++){var a,h,l=r[o],u=l.input,c=u.target;if(c){var d=i.indexOf(c);0===d?(l.emit(v.GAMEOBJECT_DRAG_OVER,t,c),this.emit(v.DRAG_OVER,t,l,c)):d>0?(l.emit(v.GAMEOBJECT_DRAG_LEAVE,t,c),this.emit(v.DRAG_LEAVE,t,l,c),u.target=i[0],c=u.target,l.emit(v.GAMEOBJECT_DRAG_ENTER,t,c),this.emit(v.DRAG_ENTER,t,l,c)):(l.emit(v.GAMEOBJECT_DRAG_LEAVE,t,c),this.emit(v.DRAG_LEAVE,t,l,c),i[0]?(u.target=i[0],c=u.target,l.emit(v.GAMEOBJECT_DRAG_ENTER,t,c),this.emit(v.DRAG_ENTER,t,l,c)):u.target=null)}else!c&&i[0]&&(u.target=i[0],c=u.target,l.emit(v.GAMEOBJECT_DRAG_ENTER,t,c),this.emit(v.DRAG_ENTER,t,l,c));if(l.parentContainer){var p=t.worldX-u.dragStartXGlobal,g=t.worldY-u.dragStartYGlobal,m=l.getParentRotation(),y=p*Math.cos(m)+g*Math.sin(m),T=g*Math.cos(m)-p*Math.sin(m);y*=1/l.parentContainer.scaleX,T*=1/l.parentContainer.scaleY,a=y+u.dragStartX,h=T+u.dragStartY}else a=t.worldX-u.dragX,h=t.worldY-u.dragY;l.emit(v.GAMEOBJECT_DRAG,t,a,h),this.emit(v.DRAG,t,l,a,h)}return r.length},processDragUpEvent:function processDragUpEvent(t){for(var i=this._drag[t.id],r=0;r<i.length;r++){var o=i[r],a=o.input;if(a&&2===a.dragState){a.dragState=0,a.dragX=a.localX-o.displayOriginX,a.dragY=a.localY-o.displayOriginY;var h=!1,l=a.target;l&&(o.emit(v.GAMEOBJECT_DROP,t,l),this.emit(v.DROP,t,o,l),a.target=null,h=!0),o.input&&(o.emit(v.GAMEOBJECT_DRAG_END,t,a.dragX,a.dragY,h),this.emit(v.DRAG_END,t,o,h))}}return this.setDragState(t,0),i.splice(0),0},processMoveEvents:function processMoveEvents(t){var i=0,r=this._temp,o=this._eventData,a=this._eventContainer;o.cancelled=!1;for(var h=!1,l=0;l<r.length;l++){var u=r[l];if(u.input){if(i++,u.emit(v.GAMEOBJECT_POINTER_MOVE,t,u.input.localX,u.input.localY,a),o.cancelled||!u.input){h=!0;break}if(this.emit(v.GAMEOBJECT_MOVE,t,u,a),o.cancelled||!u.input){h=!0;break}if(this.topOnly)break}}return h||this.emit(v.POINTER_MOVE,t,r),i},processWheelEvent:function processWheelEvent(t){var i=0,r=this._temp,o=this._eventData,a=this._eventContainer;o.cancelled=!1;for(var h=!1,l=t.deltaX,u=t.deltaY,c=t.deltaZ,d=0;d<r.length;d++){var p=r[d];if(p.input){if(i++,p.emit(v.GAMEOBJECT_POINTER_WHEEL,t,l,u,c,a),o.cancelled||!p.input){h=!0;break}if(this.emit(v.GAMEOBJECT_WHEEL,t,p,l,u,c,a),o.cancelled||!p.input){h=!0;break}}}return h||this.emit(v.POINTER_WHEEL,t,r,l,u,c),i},processOverEvents:function processOverEvents(t){var i=this._temp,r=0,o=i.length,a=[];if(o>0){var h=this.manager,l=this._eventData,u=this._eventContainer;l.cancelled=!1;for(var c=!1,d=0;d<o;d++){var p=i[d];if(p.input){if(a.push(p),h.setCursor(p.input),p.emit(v.GAMEOBJECT_POINTER_OVER,t,p.input.localX,p.input.localY,u),r++,l.cancelled||!p.input){c=!0;break}if(this.emit(v.GAMEOBJECT_OVER,t,p,u),l.cancelled||!p.input){c=!0;break}}}c||this.emit(v.POINTER_OVER,t,a)}return this._over[t.id]=a,r},processOutEvents:function processOutEvents(t){var i=this._over[t.id],r=0,o=i.length;if(o>0){var a=this.manager,h=this._eventData,l=this._eventContainer;h.cancelled=!1;var u=!1;this.sortGameObjects(i,t);for(var c=0;c<o;c++){var d=i[c];if((d=i[c]).input){if(a.resetCursor(d.input),d.emit(v.GAMEOBJECT_POINTER_OUT,t,l),r++,h.cancelled||!d.input){u=!0;break}if(this.emit(v.GAMEOBJECT_OUT,t,d,l),h.cancelled||!d.input){u=!0;break}u||this.emit(v.POINTER_OUT,t,i)}}this._over[t.id]=[]}return r},processOverOutEvents:function processOverOutEvents(t){var i,r,o=this._temp,a=[],h=[],l=[],u=this._over[t.id],c=this._drag[t.id],d=this.manager;for(i=0;i<u.length;i++)r=u[i],-1===o.indexOf(r)&&-1===c.indexOf(r)?a.push(r):l.push(r);for(i=0;i<o.length;i++)r=o[i],-1===u.indexOf(r)&&h.push(r);var p=a.length,g=0,m=this._eventData,y=this._eventContainer;m.cancelled=!1;var T=!1;if(p>0){for(this.sortGameObjects(a,t),i=0;i<p;i++)if((r=a[i]).input){if(d.resetCursor(r.input),r.emit(v.GAMEOBJECT_POINTER_OUT,t,y),g++,m.cancelled||!r.input){T=!0;break}if(this.emit(v.GAMEOBJECT_OUT,t,r,y),m.cancelled||!r.input){T=!0;break}}T||this.emit(v.POINTER_OUT,t,a)}if(p=h.length,m.cancelled=!1,T=!1,p>0){for(this.sortGameObjects(h,t),i=0;i<p;i++)if((r=h[i]).input){if(d.setCursor(r.input),r.emit(v.GAMEOBJECT_POINTER_OVER,t,r.input.localX,r.input.localY,y),g++,m.cancelled||!r.input){T=!0;break}if(this.emit(v.GAMEOBJECT_OVER,t,r,y),m.cancelled||!r.input){T=!0;break}}T||this.emit(v.POINTER_OVER,t,h)}return u=l.concat(h),this._over[t.id]=this.sortGameObjects(u,t),g},processUpEvents:function processUpEvents(t){var i=this._temp,r=this._eventData,o=this._eventContainer;r.cancelled=!1;for(var a=!1,h=0;h<i.length;h++){var l=i[h];if(l.input){if(l.emit(v.GAMEOBJECT_POINTER_UP,t,l.input.localX,l.input.localY,o),r.cancelled||!l.input){a=!0;break}if(this.emit(v.GAMEOBJECT_UP,t,l,o),r.cancelled||!l.input){a=!0;break}}}return!a&&this.manager&&(t.upElement===this.manager.game.canvas?this.emit(v.POINTER_UP,t,i):this.emit(v.POINTER_UP_OUTSIDE,t)),i.length},queueForInsertion:function queueForInsertion(t){return-1===this._pendingInsertion.indexOf(t)&&-1===this._list.indexOf(t)&&this._pendingInsertion.push(t),this},queueForRemoval:function queueForRemoval(t){return this._pendingRemoval.push(t),this},setDraggable:function setDraggable(t,i){void 0===i&&(i=!0),Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var o=t[r];o.input.draggable=i;var a=this._draggable.indexOf(o);i&&-1===a?this._draggable.push(o):!i&&a>-1&&this._draggable.splice(a,1)}return this},makePixelPerfect:function makePixelPerfect(t){void 0===t&&(t=1);var i=this.systems.textures;return c(i,t)},setHitArea:function setHitArea(t,i,r){if(void 0===i)return this.setHitAreaFromTexture(t);Array.isArray(t)||(t=[t]);var o=!1,a=!1,h=!1,l=!1,c=!1,d=!0;if(w(i)){var p=i;i=y(p,"hitArea",null),r=y(p,"hitAreaCallback",null),o=y(p,"draggable",!1),a=y(p,"dropZone",!1),h=y(p,"cursor",!1),l=y(p,"useHandCursor",!1),c=y(p,"pixelPerfect",!1);var g=y(p,"alphaTolerance",1);c&&(i={},r=this.makePixelPerfect(g)),i&&r||(this.setHitAreaFromTexture(t),d=!1)}else"function"!=typeof i||r||(r=i,i={});for(var v=0;v<t.length;v++){var m=t[v];if(c&&"Container"===m.type)console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");else{var T=m.input?m.input:u(m,i,r);T.customHitArea=d,T.dropZone=a,T.cursor=l?"pointer":h,m.input=T,o&&this.setDraggable(m),this.queueForInsertion(m)}}return this},setHitAreaCircle:function setHitAreaCircle(t,i,r,h,l){void 0===l&&(l=a);var u=new o(i,r,h);return this.setHitArea(t,u,l)},setHitAreaEllipse:function setHitAreaEllipse(t,i,r,o,a,h){void 0===h&&(h=g);var l=new p(i,r,o,a);return this.setHitArea(t,l,h)},setHitAreaFromTexture:function setHitAreaFromTexture(t,i){void 0===i&&(i=A),Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var o=t[r],a=o.frame,h=0,l=0;o.width?(h=o.width,l=o.height):a&&(h=a.realWidth,l=a.realHeight),"Container"!==o.type||0!==h&&0!==l?0!==h&&0!==l&&(o.input=u(o,new C(0,0,h,l),i),this.queueForInsertion(o)):console.warn("Container.setInteractive must specify a Shape or call setSize() first")}return this},setHitAreaRectangle:function setHitAreaRectangle(t,i,r,o,a,h){void 0===h&&(h=A);var l=new C(i,r,o,a);return this.setHitArea(t,l,h)},setHitAreaTriangle:function setHitAreaTriangle(t,i,r,o,a,h,l,u){void 0===u&&(u=_);var c=new M(i,r,o,a,h,l);return this.setHitArea(t,c,u)},enableDebug:function enableDebug(t,i){void 0===i&&(i=65280);var r=t.input;if(!r||!r.hitArea)return this;var o=r.hitArea,a=o.type,h=r.hitAreaDebug,l=this.systems.add,u=this.systems.updateList;h&&(u.remove(h),h.destroy(),h=null);var c=0,d=0;switch(a){case T.CIRCLE:h=l.arc(0,0,o.radius),c=o.x-o.radius,d=o.y-o.radius;break;case T.ELLIPSE:h=l.ellipse(0,0,o.width,o.height),c=o.x-o.width/2,d=o.y-o.height/2;break;case T.LINE:h=l.line(0,0,o.x1,o.y1,o.x2,o.y2);break;case T.POLYGON:h=l.polygon(0,0,o.points);break;case T.RECTANGLE:h=l.rectangle(0,0,o.width,o.height),c=o.x,d=o.y;break;case T.TRIANGLE:h=l.triangle(0,0,o.x1,o.y1,o.x2,o.y2,o.x3,o.y3)}return h&&(h.isFilled=!1,h.preUpdate=function(){h.setStrokeStyle(1/t.scale,i),h.setDisplayOrigin(t.displayOriginX,t.displayOriginY);var r=t.x,o=t.y,a=t.rotation,l=t.scaleX,u=t.scaleY;if(t.parentContainer){var p=t.getWorldTransformMatrix();r=p.tx,o=p.ty,a=p.rotation,l=p.scaleX,u=p.scaleY}h.setRotation(a),h.setScale(l,u),h.setPosition(r+c,o+d),h.setScrollFactor(t.scrollFactorX,t.scrollFactorY),h.setDepth(t.depth)},u.add(h),r.hitAreaDebug=h),this},removeDebug:function removeDebug(t){var i=t.input;if(i&&i.hitAreaDebug){var r=i.hitAreaDebug;this.systems.updateList.remove(r),r.destroy(),i.hitAreaDebug=null}return this},setPollAlways:function setPollAlways(){return this.setPollRate(0)},setPollOnMove:function setPollOnMove(){return this.setPollRate(-1)},setPollRate:function setPollRate(t){return this.pollRate=t,this._pollTimer=0,this},setGlobalTopOnly:function setGlobalTopOnly(t){return this.manager.globalTopOnly=t,this},setTopOnly:function setTopOnly(t){return this.topOnly=t,this},sortGameObjects:function sortGameObjects(t,i){if(t.length<2)return t;var r=i.camera.renderList;return t.sort((function(t,i){return r.indexOf(i)-r.indexOf(t)}))},sortDropZones:function sortDropZones(t){return t.length<2?t:(this.scene.sys.depthSort(),t.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function sortDropZoneHandler(t,i){if(t.parentContainer||i.parentContainer){if(t.parentContainer===i.parentContainer)return i.parentContainer.getIndex(i)-t.parentContainer.getIndex(t);if(t.parentContainer===i)return-1;if(i.parentContainer===t)return 1;for(var r=t.getIndexList(),o=i.getIndexList(),a=Math.min(r.length,o.length),h=0;h<a;h++){var l=r[h],u=o[h];if(l!==u)return u-l}return o.length-r.length}return this.displayList.getIndex(i)-this.displayList.getIndex(t)},stopPropagation:function stopPropagation(){return this.manager._tempSkip=!0,this},addPointer:function addPointer(t){return this.manager.addPointer(t)},setDefaultCursor:function setDefaultCursor(t){return this.manager.setDefaultCursor(t),this},transitionIn:function transitionIn(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function transitionComplete(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function transitionOut(){this.enabled=this.settings.transitionAllowInput},shutdown:function shutdown(){this.pluginEvents.emit(v.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var t=0;t<10;t++)this._drag[t]=[],this._over[t]=[];this.removeAllListeners();var i=this.manager;i.canvas.style.cursor=i.defaultCursor;var r=this.systems.events;r.off(E.TRANSITION_START,this.transitionIn,this),r.off(E.TRANSITION_OUT,this.transitionOut,this),r.off(E.TRANSITION_COMPLETE,this.transitionComplete,this),r.off(E.PRE_UPDATE,this.preUpdate,this),i.events.off(v.GAME_OUT,this.onGameOut,this),i.events.off(v.GAME_OVER,this.onGameOver,this),r.off(E.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown(),this.pluginEvents.emit(v.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(E.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function get(){return this.manager.activePointer.x}},y:{get:function get(){return this.manager.activePointer.y}},isOver:{get:function get(){return this.manager.isOver}},mousePointer:{get:function get(){return this.manager.mousePointer}},activePointer:{get:function get(){return this.manager.activePointer}},pointer1:{get:function get(){return this.manager.pointers[1]}},pointer2:{get:function get(){return this.manager.pointers[2]}},pointer3:{get:function get(){return this.manager.pointers[3]}},pointer4:{get:function get(){return this.manager.pointers[4]}},pointer5:{get:function get(){return this.manager.pointers[5]}},pointer6:{get:function get(){return this.manager.pointers[6]}},pointer7:{get:function get(){return this.manager.pointers[7]}},pointer8:{get:function get(){return this.manager.pointers[8]}},pointer9:{get:function get(){return this.manager.pointers[9]}},pointer10:{get:function get(){return this.manager.pointers[10]}}});b.register("InputPlugin",R,"input"),t.exports=R},function(t,i,r){t.exports={Events:r(154),KeyboardManager:r(410),KeyboardPlugin:r(1330),Key:r(512),KeyCodes:r(143),KeyCombo:r(513),AdvanceKeyCombo:r(515),ProcessKeyCombo:r(514),ResetKeyCombo:r(516),JustDown:r(1332),JustUp:r(1333),DownDuration:r(1334),UpDuration:r(1335)}},function(t,i){t.exports="keydown"},function(t,i){t.exports="keyup"},function(t,i){t.exports="keycombomatch"},function(t,i){t.exports="down"},function(t,i){t.exports="keydown-"},function(t,i){t.exports="keyup-"},function(t,i){t.exports="up"},function(t,i,r){var o=r(0),a=r(9),h=r(154),l=r(22),u=r(6),c=r(51),d=r(153),p=r(512),g=r(143),v=r(513),m=r(1331),y=r(20),T=r(76),S=new o({Extends:a,initialize:function KeyboardPlugin(t){a.call(this),this.game=t.systems.game,this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.manager=t.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,t.pluginEvents.once(c.BOOT,this.boot,this),t.pluginEvents.on(c.START,this.start,this)},boot:function boot(){var t=this.settings.input;this.enabled=u(t,"keyboard",!0);var i=u(t,"keyboard.capture",null);i&&this.addCaptures(i),this.sceneInputPlugin.pluginEvents.once(c.DESTROY,this.destroy,this)},start:function start(){this.sceneInputPlugin.manager.events.on(c.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(c.SHUTDOWN,this.shutdown,this),this.game.events.on(l.BLUR,this.resetKeys,this),this.scene.sys.events.on(y.PAUSE,this.resetKeys,this),this.scene.sys.events.on(y.SLEEP,this.resetKeys,this)},isActive:function isActive(){return this.enabled&&this.scene.sys.isActive()},addCapture:function addCapture(t){return this.manager.addCapture(t),this},removeCapture:function removeCapture(t){return this.manager.removeCapture(t),this},getCaptures:function getCaptures(){return this.manager.captures},enableGlobalCapture:function enableGlobalCapture(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function disableGlobalCapture(){return this.manager.preventDefault=!1,this},clearCaptures:function clearCaptures(){return this.manager.clearCaptures(),this},createCursorKeys:function createCursorKeys(){return this.addKeys({up:g.UP,down:g.DOWN,left:g.LEFT,right:g.RIGHT,space:g.SPACE,shift:g.SHIFT})},addKeys:function addKeys(t,i,r){void 0===i&&(i=!0),void 0===r&&(r=!1);var o={};if("string"==typeof t){t=t.split(",");for(var a=0;a<t.length;a++){var h=t[a].trim();h&&(o[h]=this.addKey(h,i,r))}}else for(var l in t)o[l]=this.addKey(t[l],i,r);return o},addKey:function addKey(t,i,r){void 0===i&&(i=!0),void 0===r&&(r=!1);var o=this.keys;if(t instanceof p){var a=o.indexOf(t);return a>-1?o[a]=t:o[t.keyCode]=t,i&&this.addCapture(t.keyCode),t.setEmitOnRepeat(r),t}return"string"==typeof t&&(t=g[t.toUpperCase()]),o[t]||(o[t]=new p(this,t),i&&this.addCapture(t),o[t].setEmitOnRepeat(r)),o[t]},removeKey:function removeKey(t,i){void 0===i&&(i=!1);var r,o=this.keys;if(t instanceof p){var a=o.indexOf(t);a>-1&&(r=this.keys[a],this.keys[a]=void 0)}else"string"==typeof t&&(t=g[t.toUpperCase()]);return o[t]&&(r=o[t],o[t]=void 0),r&&(r.plugin=null,i&&r.destroy()),this},removeAllKeys:function removeAllKeys(t){for(var i=this.keys,r=0;r<i.length;r++){var o=i[r];o&&(i[r]=void 0,t&&o.destroy())}return this},createCombo:function createCombo(t,i){return new v(this,t,i)},checkDown:function checkDown(t,i){if(void 0===i&&(i=0),this.enabled&&t.isDown){var r=T(this.time-t.timeDown,i);if(r>t._tick)return t._tick=r,!0}return!1},update:function update(){var t=this.manager.queue,i=t.length;if(this.isActive()&&0!==i)for(var r=this.keys,o=0;o<i;o++){var a=t[o],l=a.keyCode,u=r[l],c=!1;void 0===a.cancelled&&(a.cancelled=0,a.stopImmediatePropagation=function(){a.cancelled=1},a.stopPropagation=function(){a.cancelled=-1}),-1!==a.cancelled&&(l===this.prevCode&&a.timeStamp===this.prevTime&&a.type===this.prevType||(this.prevCode=l,this.prevTime=a.timeStamp,this.prevType=a.type,"keydown"===a.type?(u&&(c=u.isDown,u.onDown(a)),a.cancelled||u&&c||(m[l]&&this.emit(h.KEY_DOWN+m[l],a),a.cancelled||this.emit(h.ANY_KEY_DOWN,a))):(u&&u.onUp(a),a.cancelled||(m[l]&&this.emit(h.KEY_UP+m[l],a),a.cancelled||this.emit(h.ANY_KEY_UP,a))),1===a.cancelled&&(a.cancelled=0)))}},resetKeys:function resetKeys(){for(var t=this.keys,i=0;i<t.length;i++)t[i]&&t[i].reset();return this},shutdown:function shutdown(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(c.MANAGER_PROCESS,this.update,this),this.game.events.off(l.BLUR,this.resetKeys),this.scene.sys.events.off(y.PAUSE,this.resetKeys,this),this.scene.sys.events.off(y.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function destroy(){this.shutdown();for(var t=this.keys,i=0;i<t.length;i++)t[i]&&t[i].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function get(){return this.sceneInputPlugin.manager.time}}});d.register("KeyboardPlugin",S,"keyboard","keyboard","inputKeyboard"),t.exports=S},function(t,i,r){var o=r(143),a={};for(var h in o)a[o[h]]=h;t.exports=a},function(t,i){t.exports=function JustDown(t){return!!t._justDown&&(t._justDown=!1,!0)}},function(t,i){t.exports=function JustUp(t){return!!t._justUp&&(t._justUp=!1,!0)}},function(t,i){t.exports=function DownDuration(t,i){void 0===i&&(i=50);var r=t.plugin.game.loop.time-t.timeDown;return t.isDown&&r<i}},function(t,i){t.exports=function UpDuration(t,i){void 0===i&&(i=50);var r=t.plugin.game.loop.time-t.timeUp;return t.isUp&&r<i}},function(t,i,r){t.exports={MouseManager:r(411)}},function(t,i,r){t.exports={TouchManager:r(413)}},function(t,i,r){var o=r(21),a=r(17),h={Events:r(95),FileTypes:r(1339),File:r(23),FileTypesManager:r(8),GetURL:r(155),LoaderPlugin:r(1365),MergeXHRSettings:r(240),MultiFile:r(49),XHRLoader:r(517),XHRSettings:r(156)};h=a(!1,h,o),t.exports=h},function(t,i,r){t.exports={AnimationJSONFile:r(1340),AsepriteFile:r(1341),AtlasJSONFile:r(1342),AtlasXMLFile:r(1343),AudioFile:r(518),AudioSpriteFile:r(1344),BinaryFile:r(1345),BitmapFontFile:r(1346),CSSFile:r(1347),GLSLFile:r(1348),HTML5AudioFile:r(519),HTMLFile:r(1349),HTMLTextureFile:r(1350),ImageFile:r(71),JSONFile:r(61),MultiAtlasFile:r(1351),MultiScriptFile:r(1352),OBJFile:r(1353),PackFile:r(1354),PluginFile:r(1355),SceneFile:r(1356),ScenePluginFile:r(1357),ScriptFile:r(520),SpriteSheetFile:r(1358),SVGFile:r(1359),TextFile:r(242),TilemapCSVFile:r(1360),TilemapImpactFile:r(1361),TilemapJSONFile:r(1362),UnityAtlasFile:r(1363),VideoFile:r(1364),XMLFile:r(241)}},function(t,i,r){var o=r(0),a=r(8),h=r(61),l=r(95),u=new o({Extends:h,initialize:function AnimationJSONFile(t,i,r,o,a){h.call(this,t,i,r,o,a),this.type="animationJSON"},onProcess:function onProcess(){this.loader.once(l.POST_PROCESS,this.onLoadComplete,this),h.prototype.onProcess.call(this)},onLoadComplete:function onLoadComplete(){this.loader.systems.anims.fromJSON(this.data)}});a.register("animation",(function(t,i,r,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new u(this,t[a]));else this.addFile(new u(this,t,i,o,r));return this})),t.exports=u},function(t,i,r){var o=r(0),a=r(8),h=r(2),l=r(71),u=r(7),c=r(61),d=r(49),p=new o({Extends:d,initialize:function AsepriteFile(t,i,r,o,a,p){var g,v;if(u(i)){var m=i;i=h(m,"key"),g=new l(t,{key:i,url:h(m,"textureURL"),extension:h(m,"textureExtension","png"),normalMap:h(m,"normalMap"),xhrSettings:h(m,"textureXhrSettings")}),v=new c(t,{key:i,url:h(m,"atlasURL"),extension:h(m,"atlasExtension","json"),xhrSettings:h(m,"atlasXhrSettings")})}else g=new l(t,i,r,a),v=new c(t,i,o,p);g.linkFile?d.call(this,t,"atlasjson",i,[g,v,g.linkFile]):d.call(this,t,"atlasjson",i,[g,v])},addToCache:function addToCache(){if(this.isReadyToProcess()){var t=this.files[0],i=this.files[1],r=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(t.key,t.data,i.data,r),i.addToCache(),this.complete=!0}}});a.register("aseprite",(function(t,i,r,o,a){var h;if(Array.isArray(t))for(var l=0;l<t.length;l++)h=new p(this,t[l]),this.addFile(h.files);else h=new p(this,t,i,r,o,a),this.addFile(h.files);return this})),t.exports=p},function(t,i,r){var o=r(0),a=r(8),h=r(2),l=r(71),u=r(7),c=r(61),d=r(49),p=new o({Extends:d,initialize:function AtlasJSONFile(t,i,r,o,a,p){var g,v;if(u(i)){var m=i;i=h(m,"key"),g=new l(t,{key:i,url:h(m,"textureURL"),extension:h(m,"textureExtension","png"),normalMap:h(m,"normalMap"),xhrSettings:h(m,"textureXhrSettings")}),v=new c(t,{key:i,url:h(m,"atlasURL"),extension:h(m,"atlasExtension","json"),xhrSettings:h(m,"atlasXhrSettings")})}else g=new l(t,i,r,a),v=new c(t,i,o,p);g.linkFile?d.call(this,t,"atlasjson",i,[g,v,g.linkFile]):d.call(this,t,"atlasjson",i,[g,v])},addToCache:function addToCache(){if(this.isReadyToProcess()){var t=this.files[0],i=this.files[1],r=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(t.key,t.data,i.data,r),i.pendingDestroy(),this.complete=!0}}});a.register("atlas",(function(t,i,r,o,a){var h;if(Array.isArray(t))for(var l=0;l<t.length;l++)h=new p(this,t[l]),this.addFile(h.files);else h=new p(this,t,i,r,o,a),this.addFile(h.files);return this})),t.exports=p},function(t,i,r){var o=r(0),a=r(8),h=r(2),l=r(71),u=r(7),c=r(49),d=r(241),p=new o({Extends:c,initialize:function AtlasXMLFile(t,i,r,o,a,p){var g,v;if(u(i)){var m=i;i=h(m,"key"),g=new l(t,{key:i,url:h(m,"textureURL"),extension:h(m,"textureExtension","png"),normalMap:h(m,"normalMap"),xhrSettings:h(m,"textureXhrSettings")}),v=new d(t,{key:i,url:h(m,"atlasURL"),extension:h(m,"atlasExtension","xml"),xhrSettings:h(m,"atlasXhrSettings")})}else g=new l(t,i,r,a),v=new d(t,i,o,p);g.linkFile?c.call(this,t,"atlasxml",i,[g,v,g.linkFile]):c.call(this,t,"atlasxml",i,[g,v])},addToCache:function addToCache(){if(this.isReadyToProcess()){var t=this.files[0],i=this.files[1],r=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(t.key,t.data,i.data,r),i.pendingDestroy(),this.complete=!0}}});a.register("atlasXML",(function(t,i,r,o,a){var h;if(Array.isArray(t))for(var l=0;l<t.length;l++)h=new p(this,t[l]),this.addFile(h.files);else h=new p(this,t,i,r,o,a),this.addFile(h.files);return this})),t.exports=p},function(t,i,r){var o=r(518),a=r(0),h=r(8),l=r(2),u=r(7),c=r(61),d=r(49),p=new a({Extends:d,initialize:function AudioSpriteFile(t,i,r,a,h,p,g){if(u(i)){var v=i;i=l(v,"key"),r=l(v,"jsonURL"),a=l(v,"audioURL"),h=l(v,"audioConfig"),p=l(v,"audioXhrSettings"),g=l(v,"jsonXhrSettings")}var m;if(a){var y=o.create(t,i,a,h,p);y&&(m=new c(t,i,r,g),d.call(this,t,"audiosprite",i,[y,m]),this.config.resourceLoad=!1)}else m=new c(t,i,r,g),d.call(this,t,"audiosprite",i,[m]),this.config.resourceLoad=!0,this.config.audioConfig=h,this.config.audioXhrSettings=p},onFileComplete:function onFileComplete(t){if(-1!==this.files.indexOf(t)&&(this.pending--,this.config.resourceLoad&&"json"===t.type&&t.data.hasOwnProperty("resources"))){var i=t.data.resources,r=l(this.config,"audioConfig"),a=l(this.config,"audioXhrSettings"),h=o.create(this.loader,t.key,i,r,a);h&&(this.addToMultiFile(h),this.loader.addFile(h))}},addToCache:function addToCache(){if(this.isReadyToProcess()){var t=this.files[0],i=this.files[1];t.addToCache(),i.addToCache(),this.complete=!0}}});h.register("audioSprite",(function(t,i,r,o,a,h){var l,u=this.systems.game,c=u.config.audio,d=u.device.audio;if(c&&c.noAudio||!d.webAudio&&!d.audioData)return this;if(Array.isArray(t))for(var g=0;g<t.length;g++)(l=new p(this,t[g])).files&&this.addFile(l.files);else(l=new p(this,t,i,r,o,a,h)).files&&this.addFile(l.files);return this}))},function(t,i,r){var o=r(0),a=r(21),h=r(23),l=r(8),u=r(2),c=r(7),d=new o({Extends:h,initialize:function BinaryFile(t,i,r,o,a){var l="bin";if(c(i)){var d=i;i=u(d,"key"),r=u(d,"url"),o=u(d,"xhrSettings"),l=u(d,"extension",l),a=u(d,"dataType",a)}var p={type:"binary",cache:t.cacheManager.binary,extension:l,responseType:"arraybuffer",key:i,url:r,xhrSettings:o,config:{dataType:a}};h.call(this,t,p)},onProcess:function onProcess(){this.state=a.FILE_PROCESSING;var t=this.config.dataType;this.data=t?new t(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});l.register("binary",(function(t,i,r,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new d(this,t[a]));else this.addFile(new d(this,t,i,o,r));return this})),t.exports=d},function(t,i,r){var o=r(0),a=r(8),h=r(2),l=r(71),u=r(7),c=r(49),d=r(212),p=r(241),g=new o({Extends:c,initialize:function BitmapFontFile(t,i,r,o,a,d){var g,v;if(u(i)){var m=i;i=h(m,"key"),g=new l(t,{key:i,url:h(m,"textureURL"),extension:h(m,"textureExtension","png"),normalMap:h(m,"normalMap"),xhrSettings:h(m,"textureXhrSettings")}),v=new p(t,{key:i,url:h(m,"fontDataURL"),extension:h(m,"fontDataExtension","xml"),xhrSettings:h(m,"fontDataXhrSettings")})}else g=new l(t,i,r,a),v=new p(t,i,o,d);g.linkFile?c.call(this,t,"bitmapfont",i,[g,v,g.linkFile]):c.call(this,t,"bitmapfont",i,[g,v])},addToCache:function addToCache(){if(this.isReadyToProcess()){var t=this.files[0],i=this.files[1];t.addToCache(),i.pendingDestroy();var r=t.cache.get(t.key),o=d(i.data,t.cache.getFrame(t.key),0,0,r);this.loader.cacheManager.bitmapFont.add(t.key,{data:o,texture:t.key,frame:null}),this.complete=!0}}});a.register("bitmapFont",(function(t,i,r,o,a){var h;if(Array.isArray(t))for(var l=0;l<t.length;l++)h=new g(this,t[l]),this.addFile(h.files);else h=new g(this,t,i,r,o,a),this.addFile(h.files);return this})),t.exports=g},function(t,i,r){var o=r(0),a=r(21),h=r(23),l=r(8),u=r(2),c=r(7),d=new o({Extends:h,initialize:function CSSFile(t,i,r,o){var a="css";if(c(i)){var l=i;i=u(l,"key"),r=u(l,"url"),o=u(l,"xhrSettings"),a=u(l,"extension",a)}var d={type:"script",cache:!1,extension:a,responseType:"text",key:i,url:r,xhrSettings:o};h.call(this,t,d)},onProcess:function onProcess(){this.state=a.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});l.register("css",(function(t,i,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new d(this,t[o]));else this.addFile(new d(this,t,i,r));return this})),t.exports=d},function(t,i,r){var o=r(0),a=r(21),h=r(23),l=r(8),u=r(2),c=r(7),d=r(396),p=new o({Extends:h,initialize:function GLSLFile(t,i,r,o,a){var l="glsl";if(c(i)){var d=i;i=u(d,"key"),r=u(d,"url"),o=u(d,"shaderType","fragment"),a=u(d,"xhrSettings"),l=u(d,"extension",l)}else void 0===o&&(o="fragment");var p={type:"glsl",cache:t.cacheManager.shader,extension:l,responseType:"text",key:i,url:r,config:{shaderType:o},xhrSettings:a};h.call(this,t,p)},onProcess:function onProcess(){this.state=a.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function addToCache(){var t=this.data.split("\n"),i=this.extractBlock(t,0);if(i)for(;i;){var r=this.getShaderName(i.header),o=this.getShaderType(i.header),a=this.getShaderUniforms(i.header),h=i.shader;if(this.cache.has(r)){var l=this.cache.get(r);"fragment"===o?l.fragmentSrc=h:l.vertexSrc=h,l.uniforms||(l.uniforms=a)}else"fragment"===o?this.cache.add(r,new d(r,h,"",a)):this.cache.add(r,new d(r,"",h,a));i=this.extractBlock(t,i.offset)}else"fragment"===this.config.shaderType?this.cache.add(this.key,new d(this.key,this.data)):this.cache.add(this.key,new d(this.key,"",this.data));this.pendingDestroy()},getShaderName:function getShaderName(t){for(var i=0;i<t.length;i++){var r=t[i].trim();if("name:"===r.substring(0,5))return r.substring(5).trim()}return this.key},getShaderType:function getShaderType(t){for(var i=0;i<t.length;i++){var r=t[i].trim();if("type:"===r.substring(0,5))return r.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function getShaderUniforms(t){for(var i={},r=0;r<t.length;r++){var o=t[r].trim();if("uniform."===o.substring(0,8)){var a=o.indexOf(":");if(a){var h=o.substring(8,a);try{i[h]=JSON.parse(o.substring(a+1))}catch(l){console.warn("Invalid uniform JSON: "+h)}}}}return i},extractBlock:function extractBlock(t,i){for(var r=-1,o=-1,a=-1,h=!1,l=!1,u=[],c=[],d=i;d<t.length;d++){var p=t[d].trim();if("---"===p)if(-1===r)r=d,h=!0;else{if(!h){l=!1;break}o=d,h=!1,l=!0}else h?u.push(p):l&&(c.push(p),a=d)}return h||-1===o?null:{header:u,shader:c.join("\n"),offset:a}}});l.register("glsl",(function(t,i,r,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new p(this,t[a]));else this.addFile(new p(this,t,i,r,o));return this})),t.exports=p},function(t,i,r){var o=r(0),a=r(21),h=r(23),l=r(8),u=r(2),c=r(7),d=new o({Extends:h,initialize:function HTMLFile(t,i,r,o){var a="html";if(c(i)){var l=i;i=u(l,"key"),r=u(l,"url"),o=u(l,"xhrSettings"),a=u(l,"extension",a)}var d={type:"text",cache:t.cacheManager.html,extension:a,responseType:"text",key:i,url:r,xhrSettings:o};h.call(this,t,d)},onProcess:function onProcess(){this.state=a.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});l.register("html",(function(t,i,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new d(this,t[o]));else this.addFile(new d(this,t,i,r));return this})),t.exports=d},function(t,i,r){var o=r(0),a=r(21),h=r(23),l=r(8),u=r(2),c=r(7),d=new o({Extends:h,initialize:function HTMLTextureFile(t,i,r,o,a,l){void 0===o&&(o=512),void 0===a&&(a=512);var d="html";if(c(i)){var p=i;i=u(p,"key"),r=u(p,"url"),l=u(p,"xhrSettings"),d=u(p,"extension",d),o=u(p,"width",o),a=u(p,"height",a)}var g={type:"html",cache:t.textureManager,extension:d,responseType:"text",key:i,url:r,xhrSettings:l,config:{width:o,height:a}};h.call(this,t,g)},onProcess:function onProcess(){this.state=a.FILE_PROCESSING;var t=this.config.width,i=this.config.height,r=[];r.push('<svg width="'+t+'px" height="'+i+'px" viewBox="0 0 '+t+" "+i+'" xmlns="http://www.w3.org/2000/svg">'),r.push('<foreignObject width="100%" height="100%">'),r.push('<body xmlns="http://www.w3.org/1999/xhtml">'),r.push(this.xhrLoader.responseText),r.push("</body>"),r.push("</foreignObject>"),r.push("</svg>");var o=[r.join("\n")],l=this;try{var u=new window.Blob(o,{type:"image/svg+xml;charset=utf-8"})}catch(c){return l.state=a.FILE_ERRORED,void l.onProcessComplete()}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){h.revokeObjectURL(l.data),l.onProcessComplete()},this.data.onerror=function(){h.revokeObjectURL(l.data),l.onProcessError()},h.createObjectURL(this.data,u,"image/svg+xml")},addToCache:function addToCache(){var t=this.cache.addImage(this.key,this.data);this.pendingDestroy(t)}});l.register("htmlTexture",(function(t,i,r,o,a){if(Array.isArray(t))for(var h=0;h<t.length;h++)this.addFile(new d(this,t[h]));else this.addFile(new d(this,t,i,r,o,a));return this})),t.exports=d},function(t,i,r){var o=r(0),a=r(8),h=r(2),l=r(71),u=r(7),c=r(61),d=r(49),p=new o({Extends:d,initialize:function MultiAtlasFile(t,i,r,o,a,l,p){if(u(i)){var g=i;i=h(g,"key"),r=h(g,"url",!1)?h(g,"url"):h(g,"atlasURL"),l=h(g,"xhrSettings"),o=h(g,"path"),a=h(g,"baseURL"),p=h(g,"textureXhrSettings")}var v=new c(t,i,r,l);d.call(this,t,"multiatlas",i,[v]),this.config.path=o,this.config.baseURL=a,this.config.textureXhrSettings=p},onFileComplete:function onFileComplete(t){if(-1!==this.files.indexOf(t)&&(this.pending--,"json"===t.type&&t.data.hasOwnProperty("textures"))){var i=t.data.textures,r=this.config,o=this.loader,a=o.baseURL,u=o.path,c=o.prefix,d=h(r,"baseURL",this.baseURL),p=h(r,"path",this.path),g=h(r,"prefix",this.prefix),v=h(r,"textureXhrSettings");o.setBaseURL(d),o.setPath(p),o.setPrefix(g);for(var m=0;m<i.length;m++){var y=i[m].image,T="MA"+this.multiKeyIndex+"_"+y,S=new l(o,T,y,v);if(this.addToMultiFile(S),o.addFile(S),i[m].normalMap){var w=new l(o,T,i[m].normalMap,v);w.type="normalMap",S.setLink(w),this.addToMultiFile(w),o.addFile(w)}}o.setBaseURL(a),o.setPath(u),o.setPrefix(c)}},addToCache:function addToCache(){if(this.isReadyToProcess()){for(var t=this.files[0],i=[],r=[],o=[],a=1;a<this.files.length;a++){var h=this.files[a];if("normalMap"!==h.type)for(var l=h.key.indexOf("_"),u=h.key.substr(l+1),c=h.data,d=0;d<t.data.textures.length;d++){var p=t.data.textures[d];if(p.image===u){r.push(c),i.push(p),h.linkFile&&o.push(h.linkFile.data);break}}}for(0===o.length&&(o=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,r,i,o),this.complete=!0,a=0;a<this.files.length;a++)this.files[a].pendingDestroy()}}});a.register("multiatlas",(function(t,i,r,o,a){var h;if(Array.isArray(t))for(var l=0;l<t.length;l++)h=new p(this,t[l]),this.addFile(h.files);else h=new p(this,t,i,r,o,a),this.addFile(h.files);return this})),t.exports=p},function(t,i,r){var o=r(0),a=r(8),h=r(2),l=r(7),u=r(49),c=r(520),d=new o({Extends:u,initialize:function MultiScriptFile(t,i,r,o){var a="js",d=[];if(l(i)){var p=i;i=h(p,"key"),r=h(p,"url"),o=h(p,"xhrSettings"),a=h(p,"extension",a)}Array.isArray(r)||(r=[r]);for(var g=0;g<r.length;g++){var v=new c(t,{key:i+"_"+g.toString(),url:r[g],extension:a,xhrSettings:o});v.onProcess=function(){this.onProcessComplete()},d.push(v)}u.call(this,t,"scripts",i,d)},addToCache:function addToCache(){if(this.isReadyToProcess()){for(var t=0;t<this.files.length;t++){var i=this.files[t];i.data=document.createElement("script"),i.data.language="javascript",i.data.type="text/javascript",i.data.defer=!1,i.data.text=i.xhrLoader.responseText,document.head.appendChild(i.data)}this.complete=!0}}});a.register("scripts",(function(t,i,r){var o;if(Array.isArray(t))for(var a=0;a<t.length;a++)o=new d(this,t[a]),this.addFile(o.files);else o=new d(this,t,i,r),this.addFile(o.files);return this})),t.exports=d},function(t,i,r){var o=r(0),a=r(8),h=r(2),l=r(7),u=r(49),c=r(498),d=r(499),p=r(242),g=new o({Extends:u,initialize:function OBJFile(t,i,r,o,a,c){var d,g,v=t.cacheManager.obj;if(l(i)){var m=i;i=h(m,"key"),d=new p(t,{key:i,type:"obj",cache:v,url:h(m,"url"),extension:h(m,"extension","obj"),xhrSettings:h(m,"xhrSettings"),config:{flipUV:h(m,"flipUV",a)}}),(o=h(m,"matURL"))&&(g=new p(t,{key:i,type:"mat",cache:v,url:o,extension:h(m,"matExtension","mat"),xhrSettings:h(m,"xhrSettings")}))}else d=new p(t,{key:i,url:r,type:"obj",cache:v,extension:"obj",xhrSettings:c,config:{flipUV:a}}),o&&(g=new p(t,{key:i,url:o,type:"mat",cache:v,extension:"mat",xhrSettings:c}));u.call(this,t,"obj",i,[d,g])},addToCache:function addToCache(){if(this.isReadyToProcess()){var t=this.files[0],i=this.files[1],r=c(t.data,t.config.flipUV);i&&(r.materials=d(i.data)),t.cache.add(t.key,r),this.complete=!0}}});a.register("obj",(function(t,i,r,o,a){var h;if(Array.isArray(t))for(var l=0;l<t.length;l++)h=new g(this,t[l]),this.addFile(h.files);else h=new g(this,t,i,r,o,a),this.addFile(h.files);return this})),t.exports=g},function(t,i,r){var o=r(0),a=r(21),h=r(8),l=r(61),u=new o({Extends:l,initialize:function PackFile(t,i,r,o,a){l.call(this,t,i,r,o,a),this.type="packfile"},onProcess:function onProcess(){this.state!==a.FILE_POPULATED&&(this.state=a.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});h.register("pack",(function(t,i,r,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new u(this,t[a]));else this.addFile(new u(this,t,i,o,r));return this})),t.exports=u},function(t,i,r){var o=r(0),a=r(21),h=r(23),l=r(8),u=r(2),c=r(7),d=new o({Extends:h,initialize:function PluginFile(t,i,r,o,l,d){var p="js";if(c(i)){var g=i;i=u(g,"key"),r=u(g,"url"),d=u(g,"xhrSettings"),p=u(g,"extension",p),o=u(g,"start"),l=u(g,"mapping")}var v={type:"plugin",cache:!1,extension:p,responseType:"text",key:i,url:r,xhrSettings:d,config:{start:o,mapping:l}};h.call(this,t,v),"function"==typeof r&&(this.data=r,this.state=a.FILE_POPULATED)},onProcess:function onProcess(){var t=this.loader.systems.plugins,i=this.config,r=u(i,"start",!1),o=u(i,"mapping",null);if(this.state===a.FILE_POPULATED)t.install(this.key,this.data,r,o);else{this.state=a.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var h=t.install(this.key,window[this.key],r,o);(r||o)&&(this.loader.systems[o]=h,this.loader.scene[o]=h)}this.onProcessComplete()}});l.register("plugin",(function(t,i,r,o,a){if(Array.isArray(t))for(var h=0;h<t.length;h++)this.addFile(new d(this,t[h]));else this.addFile(new d(this,t,i,r,o,a));return this})),t.exports=d},function(t,i,r){var o=r(0),a=r(21),h=r(23),l=r(8),u=r(2),c=r(7),d=new o({Extends:h,initialize:function SceneFile(t,i,r,o){var a="js";if(c(i)){var l=i;i=u(l,"key"),r=u(l,"url"),o=u(l,"xhrSettings"),a=u(l,"extension",a)}var d={type:"text",extension:a,responseType:"text",key:i,url:r,xhrSettings:o};h.call(this,t,d)},onProcess:function onProcess(){this.state=a.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function addToCache(){var t=this.data.concat("(function(){\nreturn new "+this.key+"();\n}).call(this);"),i=eval;this.loader.sceneManager.add(this.key,i(t)),this.complete=!0}});l.register("sceneFile",(function(t,i,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new d(this,t[o]));else this.addFile(new d(this,t,i,r));return this})),t.exports=d},function(t,i,r){var o=r(0),a=r(21),h=r(23),l=r(8),u=r(2),c=r(7),d=new o({Extends:h,initialize:function ScenePluginFile(t,i,r,o,l,d){var p="js";if(c(i)){var g=i;i=u(g,"key"),r=u(g,"url"),d=u(g,"xhrSettings"),p=u(g,"extension",p),o=u(g,"systemKey"),l=u(g,"sceneKey")}var v={type:"scenePlugin",cache:!1,extension:p,responseType:"text",key:i,url:r,xhrSettings:d,config:{systemKey:o,sceneKey:l}};h.call(this,t,v),"function"==typeof r&&(this.data=r,this.state=a.FILE_POPULATED)},onProcess:function onProcess(){var t=this.loader.systems.plugins,i=this.config,r=this.key,o=u(i,"systemKey",r),h=u(i,"sceneKey",r);this.state===a.FILE_POPULATED?t.installScenePlugin(o,this.data,h,this.loader.scene,!0):(this.state=a.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),t.installScenePlugin(o,window[this.key],h,this.loader.scene,!0)),this.onProcessComplete()}});l.register("scenePlugin",(function(t,i,r,o,a){if(Array.isArray(t))for(var h=0;h<t.length;h++)this.addFile(new d(this,t[h]));else this.addFile(new d(this,t,i,r,o,a));return this})),t.exports=d},function(t,i,r){var o=r(0),a=r(8),h=r(71),l=new o({Extends:h,initialize:function SpriteSheetFile(t,i,r,o,a){h.call(this,t,i,r,a,o),this.type="spritesheet"},addToCache:function addToCache(){var t=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(t)}});a.register("spritesheet",(function(t,i,r,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new l(this,t[a]));else this.addFile(new l(this,t,i,r,o));return this})),t.exports=l},function(t,i,r){var o=r(0),a=r(21),h=r(23),l=r(8),u=r(2),c=r(7),d=new o({Extends:h,initialize:function SVGFile(t,i,r,o,a){var l="svg";if(c(i)){var d=i;i=u(d,"key"),r=u(d,"url"),o=u(d,"svgConfig",{}),a=u(d,"xhrSettings"),l=u(d,"extension",l)}var p={type:"svg",cache:t.textureManager,extension:l,responseType:"text",key:i,url:r,xhrSettings:a,config:{width:u(o,"width"),height:u(o,"height"),scale:u(o,"scale")}};h.call(this,t,p)},onProcess:function onProcess(){this.state=a.FILE_PROCESSING;var t=this.xhrLoader.responseText,i=[t],r=this.config.width,o=this.config.height,l=this.config.scale;t:if(r&&o||l){var u=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("svg")[0],c=u.hasAttribute("viewBox"),d=parseFloat(u.getAttribute("width")),p=parseFloat(u.getAttribute("height"));if(!c&&d&&p)u.setAttribute("viewBox","0  0 "+d+" "+p);else if(c&&!d&&!p){var g=u.getAttribute("viewBox").split(/\s+|,/);d=g[2],p=g[3]}if(l){if(!d||!p)break t;r=d*l,o=p*l}u.setAttribute("width",r.toString()+"px"),u.setAttribute("height",o.toString()+"px"),i=[(new XMLSerializer).serializeToString(u)]}try{var v=new window.Blob(i,{type:"image/svg+xml;charset=utf-8"})}catch(T){return void this.onProcessError()}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var m=this,y=!1;this.data.onload=function(){y||h.revokeObjectURL(m.data),m.onProcessComplete()},this.data.onerror=function(){y?m.onProcessError():(y=!0,h.revokeObjectURL(m.data),m.data.src="data:image/svg+xml,"+encodeURIComponent(i.join("")))},h.createObjectURL(this.data,v,"image/svg+xml")},addToCache:function addToCache(){var t=this.cache.addImage(this.key,this.data);this.pendingDestroy(t)}});l.register("svg",(function(t,i,r,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new d(this,t[a]));else this.addFile(new d(this,t,i,r,o));return this})),t.exports=d},function(t,i,r){var o=r(0),a=r(21),h=r(23),l=r(8),u=r(2),c=r(7),d=r(40),p=new o({Extends:h,initialize:function TilemapCSVFile(t,i,r,o){var a="csv";if(c(i)){var l=i;i=u(l,"key"),r=u(l,"url"),o=u(l,"xhrSettings"),a=u(l,"extension",a)}var p={type:"tilemapCSV",cache:t.cacheManager.tilemap,extension:a,responseType:"text",key:i,url:r,xhrSettings:o};h.call(this,t,p),this.tilemapFormat=d.CSV},onProcess:function onProcess(){this.state=a.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function addToCache(){var t={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});l.register("tilemapCSV",(function(t,i,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new p(this,t[o]));else this.addFile(new p(this,t,i,r));return this})),t.exports=p},function(t,i,r){var o=r(0),a=r(8),h=r(61),l=r(40),u=new o({Extends:h,initialize:function TilemapImpactFile(t,i,r,o){h.call(this,t,i,r,o),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function addToCache(){var t={format:l.WELTMEISTER,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});a.register("tilemapImpact",(function(t,i,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new u(this,t[o]));else this.addFile(new u(this,t,i,r));return this})),t.exports=u},function(t,i,r){var o=r(0),a=r(8),h=r(61),l=r(40),u=new o({Extends:h,initialize:function TilemapJSONFile(t,i,r,o){h.call(this,t,i,r,o),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function addToCache(){var t={format:l.TILED_JSON,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});a.register("tilemapTiledJSON",(function(t,i,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new u(this,t[o]));else this.addFile(new u(this,t,i,r));return this})),t.exports=u},function(t,i,r){var o=r(0),a=r(8),h=r(2),l=r(71),u=r(7),c=r(49),d=r(242),p=new o({Extends:c,initialize:function UnityAtlasFile(t,i,r,o,a,p){var g,v;if(u(i)){var m=i;i=h(m,"key"),g=new l(t,{key:i,url:h(m,"textureURL"),extension:h(m,"textureExtension","png"),normalMap:h(m,"normalMap"),xhrSettings:h(m,"textureXhrSettings")}),v=new d(t,{key:i,url:h(m,"atlasURL"),extension:h(m,"atlasExtension","txt"),xhrSettings:h(m,"atlasXhrSettings")})}else g=new l(t,i,r,a),v=new d(t,i,o,p);g.linkFile?c.call(this,t,"unityatlas",i,[g,v,g.linkFile]):c.call(this,t,"unityatlas",i,[g,v])},addToCache:function addToCache(){if(this.isReadyToProcess()){var t=this.files[0],i=this.files[1],r=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(t.key,t.data,i.data,r),i.pendingDestroy(),this.complete=!0}}});a.register("unityAtlas",(function(t,i,r,o,a){var h;if(Array.isArray(t))for(var l=0;l<t.length;l++)h=new p(this,t[l]),this.addFile(h.files);else h=new p(this,t,i,r,o,a),this.addFile(h.files);return this})),t.exports=p},function(t,i,r){var o=r(0),a=r(21),h=r(23),l=r(8),u=r(155),c=r(2),d=r(7),p=new o({Extends:h,initialize:function VideoFile(t,i,r,o,a,l,u){void 0===o&&(o="loadeddata"),void 0===a&&(a=!1),void 0===l&&(l=!1),"loadeddata"!==o&&"canplay"!==o&&"canplaythrough"!==o&&(o="loadeddata");var c={type:"video",cache:t.cacheManager.video,extension:r.type,responseType:"blob",key:i,url:r.url,xhrSettings:u,config:{loadEvent:o,asBlob:a,noAudio:l}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),h.call(this,t,c)},onProcess:function onProcess(){if(this.state=a.FILE_PROCESSING,this.config.asBlob){var t=this.createVideoElement();this.data=t;var i=this;this.data.onloadeddata=function(){i.onProcessComplete()},this.data.onerror=function(){h.revokeObjectURL(i.data),i.onProcessError()},h.createObjectURL(t,this.xhrLoader.response,""),t.load()}else this.onProcessComplete()},createVideoElement:function createVideoElement(){var t=document.createElement("video");return t.controls=!1,t.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(t.muted=!0,t.defaultMuted=!0,t.setAttribute("autoplay","autoplay")),t.setAttribute("playsinline","playsinline"),t.setAttribute("preload","auto"),t},onVideoLoadHandler:function onVideoLoadHandler(t){var i=t.target;i.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),i.removeEventListener("error",this.onErrorCallback,!0),this.data=i,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function onVideoErrorHandler(t){var i=t.target;i&&(i.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),i.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function load(){var t=this.config.loadEvent;if(this.config.asBlob)h.prototype.load.call(this);else{this.percentComplete=0;var i=this.createVideoElement();i.addEventListener(t,this.onLoadCallback,!0),i.addEventListener("error",this.onErrorCallback,!0),i.src=u(this,this.loader.baseURL),i.load()}}});p.create=function(t,i,r,o,a,h,l){var u=t.systems.game;d(i)&&(r=c(i,"url",[]),o=c(i,"loadEvent","loadeddata"),a=c(i,"asBlob",!1),h=c(i,"noAudio",!1),l=c(i,"xhrSettings"),i=c(i,"key"));var g=p.getVideoURL(u,r);if(g)return new p(t,i,g,o,a,h,l)},p.getVideoURL=function(t,i){Array.isArray(i)||(i=[i]);for(var r=0;r<i.length;r++){var o,a=c(i[r],"url",i[r]);if(0===a.indexOf("blob:"))return{url:a,type:""};if(o=0===a.indexOf("data:")?a.split(",")[0].match(/\/(.*?);/):a.match(/\.([a-zA-Z0-9]+)($|\?)/),o=c(i[r],"type",o?o[1]:"").toLowerCase(),t.device.video[o])return{url:a,type:o}}return null},l.register("video",(function(t,i,r,o,a,h){var l;if(Array.isArray(t))for(var u=0;u<t.length;u++)(l=p.create(this,t[u]))&&this.addFile(l);else(l=p.create(this,t,i,r,o,a,h))&&this.addFile(l);return this})),t.exports=p},function(t,i,r){var o=r(0),a=r(21),h=r(149),l=r(9),u=r(95),c=r(8),d=r(2),p=r(24),g=r(20),v=r(156),m=new o({Extends:l,initialize:function LoaderPlugin(t){l.call(this);var i=t.sys.game.config,r=t.sys.settings.loader;this.scene=t,this.systems=t.sys,this.cacheManager=t.sys.cache,this.textureManager=t.sys.textures,this.sceneManager=t.sys.game.scene,c.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(d(r,"baseURL",i.loaderBaseURL)),this.setPath(d(r,"path",i.loaderPath)),this.setPrefix(d(r,"prefix",i.loaderPrefix)),this.maxParallelDownloads=d(r,"maxParallelDownloads",i.loaderMaxParallelDownloads),this.xhr=v(d(r,"responseType",i.loaderResponseType),d(r,"async",i.loaderAsync),d(r,"user",i.loaderUser),d(r,"password",i.loaderPassword),d(r,"timeout",i.loaderTimeout),d(r,"withCredentials",i.loaderWithCredentials)),this.crossOrigin=d(r,"crossOrigin",i.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new h,this.inflight=new h,this.queue=new h,this._deleteQueue=new h,this.totalFailed=0,this.totalComplete=0,this.state=a.LOADER_IDLE,this.multiKeyIndex=0,t.sys.events.once(g.BOOT,this.boot,this),t.sys.events.on(g.START,this.pluginStart,this)},boot:function boot(){this.systems.events.once(g.DESTROY,this.destroy,this)},pluginStart:function pluginStart(){this.systems.events.once(g.SHUTDOWN,this.shutdown,this)},setBaseURL:function setBaseURL(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.baseURL=t,this},setPath:function setPath(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.path=t,this},setPrefix:function setPrefix(t){return void 0===t&&(t=""),this.prefix=t,this},setCORS:function setCORS(t){return this.crossOrigin=t,this},addFile:function addFile(t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var r=t[i];this.keyExists(r)||(this.list.set(r),this.emit(u.ADD,r.key,r.type,this,r),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function keyExists(t){var i=t.hasCacheConflict();return i||this.list.iterate((function(r){if(r.type===t.type&&r.key===t.key)return i=!0,!1})),!i&&this.isLoading()&&(this.inflight.iterate((function(r){if(r.type===t.type&&r.key===t.key)return i=!0,!1})),this.queue.iterate((function(r){if(r.type===t.type&&r.key===t.key)return i=!0,!1}))),i},addPack:function addPack(t,i){i&&t.hasOwnProperty(i)&&(t={packKey:t[i]});var r=0,o=this.baseURL,a=this.path,h=this.prefix;for(var l in t)if(Object.prototype.hasOwnProperty.call(t,l)){var u=t[l],c=d(u,"baseURL",o),p=d(u,"path",a),g=d(u,"prefix",h),v=d(u,"files",null),m=d(u,"defaultType","void");if(Array.isArray(v)){this.setBaseURL(c),this.setPath(p),this.setPrefix(g);for(var y=0;y<v.length;y++){var T=v[y],S=T.hasOwnProperty("type")?T.type:m;this[S]&&(this[S](T),r++)}}}return this.setBaseURL(o),this.setPath(a),this.setPrefix(h),r>0},isLoading:function isLoading(){return this.state===a.LOADER_LOADING||this.state===a.LOADER_PROCESSING},isReady:function isReady(){return this.state===a.LOADER_IDLE||this.state===a.LOADER_COMPLETE},start:function start(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(u.START,this),0===this.list.size?this.loadComplete():(this.state=a.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(g.UPDATE,this.update,this)))},updateProgress:function updateProgress(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(u.PROGRESS,this.progress)},update:function update(){this.state===a.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function checkLoadQueue(){this.list.each((function(t){if((t.state===a.FILE_POPULATED||t.state===a.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(t),this.list.delete(t),t.crossOrigin||(t.crossOrigin=this.crossOrigin),t.load()),this.inflight.size===this.maxParallelDownloads)return!1}),this)},nextFile:function nextFile(t,i){this.inflight&&(this.inflight.delete(t),this.updateProgress(),i?(this.totalComplete++,this.queue.set(t),this.emit(u.FILE_LOAD,t),t.onProcess()):(this.totalFailed++,this._deleteQueue.set(t),this.emit(u.FILE_LOAD_ERROR,t),this.fileProcessComplete(t)))},fileProcessComplete:function fileProcessComplete(t){this.scene&&this.systems&&this.systems.game&&!this.systems.game.pendingDestroy&&(t.state===a.FILE_ERRORED?t.multiFile&&t.multiFile.onFileFailed(t):t.state===a.FILE_COMPLETE&&(t.multiFile?t.multiFile.isReadyToProcess()&&t.multiFile.addToCache():t.addToCache()),this.queue.delete(t),0===this.list.size&&0===this.inflight.size&&0===this.queue.size&&this.loadComplete())},loadComplete:function loadComplete(){this.emit(u.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=a.LOADER_COMPLETE,this.systems.events.off(g.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(u.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function flagForRemoval(t){this._deleteQueue.set(t)},saveJSON:function saveJSON(t,i){return this.save(JSON.stringify(t),i)},save:function save(t,i,r){void 0===i&&(i="file.json"),void 0===r&&(r="application/json");var o=new Blob([t],{type:r}),a=URL.createObjectURL(o),h=document.createElement("a");return h.download=i,h.textContent="Download "+i,h.href=a,h.click(),this},reset:function reset(){this.list.clear(),this.inflight.clear(),this.queue.clear();var t=this.systems.game.config,i=this.systems.settings.loader;this.setBaseURL(d(i,"baseURL",t.loaderBaseURL)),this.setPath(d(i,"path",t.loaderPath)),this.setPrefix(d(i,"prefix",t.loaderPrefix)),this.state=a.LOADER_IDLE},shutdown:function shutdown(){this.reset(),this.state=a.LOADER_SHUTDOWN,this.systems.events.off(g.UPDATE,this.update,this),this.systems.events.off(g.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown(),this.state=a.LOADER_DESTROYED,this.systems.events.off(g.UPDATE,this.update,this),this.systems.events.off(g.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});p.register("Loader",m,"load"),t.exports=m},function(t,i,r){var o=r(62),a=r(17),h={ArcadePhysics:r(1367),Body:r(527),Collider:r(528),Components:r(243),Events:r(245),Factory:r(521),GetOverlapX:r(246),GetOverlapY:r(247),SeparateX:r(537),SeparateY:r(538),Group:r(524),Image:r(522),Sprite:r(157),StaticBody:r(539),StaticGroup:r(525),Tilemap:r(1391),World:r(526)};h=a(!1,h,o),t.exports=h},function(t,i,r){var o=r(0),a=r(36),h=r(50),l=r(353),u=r(521),c=r(2),d=r(127),p=r(523),g=r(244),v=r(24),m=r(20),y=r(3),T=r(526),S=new o({initialize:function ArcadePhysics(t){this.scene=t,this.systems=t.sys,this.config=this.getConfig(),this.world,this.add,t.sys.events.once(m.BOOT,this.boot,this),t.sys.events.on(m.START,this.start,this)},boot:function boot(){this.world=new T(this.scene,this.config),this.add=new u(this.world),this.systems.events.once(m.DESTROY,this.destroy,this)},start:function start(){this.world||(this.world=new T(this.scene,this.config),this.add=new u(this.world));var t=this.systems.events;c(this.config,"customUpdate",!1)||t.on(m.UPDATE,this.world.update,this.world),t.on(m.POST_UPDATE,this.world.postUpdate,this.world),t.once(m.SHUTDOWN,this.shutdown,this)},enableUpdate:function enableUpdate(){this.systems.events.on(m.UPDATE,this.world.update,this.world)},disableUpdate:function disableUpdate(){this.systems.events.off(m.UPDATE,this.world.update,this.world)},getConfig:function getConfig(){var t=this.systems.game.config.physics,i=this.systems.settings.physics;return d(c(i,"arcade",{}),c(t,"arcade",{}))},overlap:function overlap(t,i,r,o,a){return void 0===r&&(r=null),void 0===o&&(o=null),void 0===a&&(a=r),this.world.collideObjects(t,i,r,o,a,!0)},collide:function collide(t,i,r,o,a){return void 0===r&&(r=null),void 0===o&&(o=null),void 0===a&&(a=r),this.world.collideObjects(t,i,r,o,a,!1)},collideTiles:function collideTiles(t,i,r,o,a){return this.world.collideTiles(t,i,r,o,a)},overlapTiles:function overlapTiles(t,i,r,o,a){return this.world.overlapTiles(t,i,r,o,a)},pause:function pause(){return this.world.pause()},resume:function resume(){return this.world.resume()},accelerateTo:function accelerateTo(t,i,r,o,a,h){void 0===o&&(o=60);var l=Math.atan2(r-t.y,i-t.x);return t.body.acceleration.setToPolar(l,o),void 0!==a&&void 0!==h&&t.body.maxVelocity.set(a,h),l},accelerateToObject:function accelerateToObject(t,i,r,o,a){return this.accelerateTo(t,i.x,i.y,r,o,a)},closest:function closest(t,i){i||(i=this.world.bodies.entries);for(var r=Number.MAX_VALUE,closest=null,o=t.x,a=t.y,h=i.length,u=0;u<h;u++){var c=i[u],d=c.body||c;if(t!==c&&t!==d&&t!==d.gameObject&&t!==d.center){var p=l(o,a,d.center.x,d.center.y);p<r&&(closest=c,r=p)}}return closest},furthest:function furthest(t,i){i||(i=this.world.bodies.entries);for(var r=-1,o=null,a=t.x,h=t.y,u=i.length,c=0;c<u;c++){var d=i[c],p=d.body||d;if(t!==d&&t!==p&&t!==p.gameObject&&t!==p.center){var g=l(a,h,p.center.x,p.center.y);g>r&&(o=d,r=g)}}return o},moveTo:function moveTo(t,i,r,o,a){void 0===o&&(o=60),void 0===a&&(a=0);var l=Math.atan2(r-t.y,i-t.x);return a>0&&(o=h(t.x,t.y,i,r)/(a/1e3)),t.body.velocity.setToPolar(l,o),l},moveToObject:function moveToObject(t,i,r,o){return this.moveTo(t,i.x,i.y,r,o)},velocityFromAngle:function velocityFromAngle(t,i,r){return void 0===i&&(i=60),void 0===r&&(r=new y),r.setToPolar(a(t),i)},velocityFromRotation:function velocityFromRotation(t,i,r){return void 0===i&&(i=60),void 0===r&&(r=new y),r.setToPolar(t,i)},overlapRect:function overlapRect(t,i,r,o,a,h){return g(this.world,t,i,r,o,a,h)},overlapCirc:function overlapCirc(t,i,r,o,a){return p(this.world,t,i,r,o,a)},shutdown:function shutdown(){if(this.world){var t=this.systems.events;t.off(m.UPDATE,this.world.update,this.world),t.off(m.POST_UPDATE,this.world.postUpdate,this.world),t.off(m.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function destroy(){this.shutdown(),this.scene.sys.events.off(m.START,this.start,this),this.scene=null,this.systems=null}});v.register("ArcadePhysics",S,"arcadePhysics"),t.exports=S},function(t,i){t.exports={setAcceleration:function setAcceleration(t,i){return this.body.acceleration.set(t,i),this},setAccelerationX:function setAccelerationX(t){return this.body.acceleration.x=t,this},setAccelerationY:function setAccelerationY(t){return this.body.acceleration.y=t,this}}},function(t,i){t.exports={setAngularVelocity:function setAngularVelocity(t){return this.body.angularVelocity=t,this},setAngularAcceleration:function setAngularAcceleration(t){return this.body.angularAcceleration=t,this},setAngularDrag:function setAngularDrag(t){return this.body.angularDrag=t,this}}},function(t,i){t.exports={setBounce:function setBounce(t,i){return this.body.bounce.set(t,i),this},setBounceX:function setBounceX(t){return this.body.bounce.x=t,this},setBounceY:function setBounceY(t){return this.body.bounce.y=t,this},setCollideWorldBounds:function setCollideWorldBounds(t,i,r){return this.body.setCollideWorldBounds(t,i,r),this}}},function(t,i){t.exports={setDebug:function setDebug(t,i,r){return this.debugShowBody=t,this.debugShowVelocity=i,this.debugBodyColor=r,this},setDebugBodyColor:function setDebugBodyColor(t){return this.body.debugBodyColor=t,this},debugShowBody:{get:function get(){return this.body.debugShowBody},set:function set(t){this.body.debugShowBody=t}},debugShowVelocity:{get:function get(){return this.body.debugShowVelocity},set:function set(t){this.body.debugShowVelocity=t}},debugBodyColor:{get:function get(){return this.body.debugBodyColor},set:function set(t){this.body.debugBodyColor=t}}}},function(t,i){t.exports={setDrag:function setDrag(t,i){return this.body.drag.set(t,i),this},setDragX:function setDragX(t){return this.body.drag.x=t,this},setDragY:function setDragY(t){return this.body.drag.y=t,this},setDamping:function setDamping(t){return this.body.useDamping=t,this}}},function(t,i){var r={enableBody:function enableBody(t,i,r,o,a){return t&&this.body.reset(i,r),o&&(this.body.gameObject.active=!0),a&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function disableBody(t,i){return void 0===t&&(t=!1),void 0===i&&(i=!1),this.body.stop(),this.body.enable=!1,t&&(this.body.gameObject.active=!1),i&&(this.body.gameObject.visible=!1),this},refreshBody:function refreshBody(){return this.body.updateFromGameObject(),this}};t.exports=r},function(t,i){t.exports={setFriction:function setFriction(t,i){return this.body.friction.set(t,i),this},setFrictionX:function setFrictionX(t){return this.body.friction.x=t,this},setFrictionY:function setFrictionY(t){return this.body.friction.y=t,this}}},function(t,i){t.exports={setGravity:function setGravity(t,i){return this.body.gravity.set(t,i),this},setGravityX:function setGravityX(t){return this.body.gravity.x=t,this},setGravityY:function setGravityY(t){return this.body.gravity.y=t,this}}},function(t,i){var r={setImmovable:function setImmovable(t){return void 0===t&&(t=!0),this.body.immovable=t,this}};t.exports=r},function(t,i){t.exports={setMass:function setMass(t){return this.body.mass=t,this}}},function(t,i){var r={setPushable:function setPushable(t){return void 0===t&&(t=!0),this.body.pushable=t,this}};t.exports=r},function(t,i){t.exports={setOffset:function setOffset(t,i){return this.body.setOffset(t,i),this},setSize:function setSize(t,i,r){return this.body.setSize(t,i,r),this},setBodySize:function setBodySize(t,i,r){return this.body.setSize(t,i,r),this},setCircle:function setCircle(t,i,r){return this.body.setCircle(t,i,r),this}}},function(t,i){t.exports={setVelocity:function setVelocity(t,i){return this.body.setVelocity(t,i),this},setVelocityX:function setVelocityX(t){return this.body.setVelocityX(t),this},setVelocityY:function setVelocityY(t){return this.body.setVelocityY(t),this},setMaxVelocity:function setMaxVelocity(t,i){return this.body.maxVelocity.set(t,i),this}}},function(t,i){t.exports="collide"},function(t,i){t.exports="overlap"},function(t,i){t.exports="pause"},function(t,i){t.exports="resume"},function(t,i){t.exports="tilecollide"},function(t,i){t.exports="tileoverlap"},function(t,i){t.exports="worldbounds"},function(t,i){t.exports="worldstep"},function(t,i){var r,o,a,h,l,u,c,d,p,g,v,m,y,T,S,w,b,C=function BlockCheck(){return g&&S&&o.blocked.right?(r.processX(-b,c,!1,!0),1):p&&w&&o.blocked.left?(r.processX(b,c,!0),1):y&&w&&r.blocked.right?(o.processX(-b,d,!1,!0),2):m&&S&&r.blocked.left?(o.processX(b,d,!0),2):0},A=function Run(t){if(a&&h)b*=.5,0===t||3===t?(r.processX(b,l),o.processX(-b,u)):(r.processX(-b,l),o.processX(b,u));else if(a&&!h)0===t||3===t?r.processX(b,c,!0):r.processX(-b,c,!1,!0);else if(!a&&h)0===t||3===t?o.processX(-b,d,!1,!0):o.processX(b,d,!0);else{var i=.5*b;0===t?T?(r.processX(b,0,!0),o.processX(0,null,!1,!0)):y?(r.processX(i,0,!0),o.processX(-i,0,!1,!0)):(r.processX(i,o.velocity.x,!0),o.processX(-i,null,!1,!0)):1===t?v?(r.processX(0,null,!1,!0),o.processX(b,0,!0)):g?(r.processX(-i,0,!1,!0),o.processX(i,0,!0)):(r.processX(-i,null,!1,!0),o.processX(i,r.velocity.x,!0)):2===t?T?(r.processX(-b,0,!1,!0),o.processX(0,null,!0)):m?(r.processX(-i,0,!1,!0),o.processX(i,0,!0)):(r.processX(-i,o.velocity.x,!1,!0),o.processX(i,null,!0)):3===t&&(v?(r.processX(0,null,!0),o.processX(-b,0,!1,!0)):p?(r.processX(i,0,!0),o.processX(-i,0,!1,!0)):(r.processX(i,o.velocity.y,!0),o.processX(-i,null,!1,!0)))}return!0};t.exports={BlockCheck:C,Check:function Check(){var t=r.velocity.x,i=o.velocity.x,a=Math.sqrt(i*i*o.mass/r.mass)*(i>0?1:-1),h=Math.sqrt(t*t*r.mass/o.mass)*(t>0?1:-1),c=.5*(a+h);return h-=c,l=c+(a-=c)*r.bounce.x,u=c+h*o.bounce.x,p&&w?A(0):m&&S?A(1):g&&S?A(2):!(!y||!w)&&A(3)},Set:function Set(t,i,l){o=i;var u=(r=t).velocity.x,A=o.velocity.x;return a=r.pushable,p=r._dx<0,g=r._dx>0,v=0===r._dx,S=Math.abs(r.right-o.x)<=Math.abs(o.right-r.x),c=A-u*r.bounce.x,h=o.pushable,m=o._dx<0,y=o._dx>0,T=0===o._dx,w=!S,d=u-A*o.bounce.x,b=Math.abs(l),C()},Run:A,RunImmovableBody1:function RunImmovableBody1(t){1===t?o.velocity.x=0:S?o.processX(b,d,!0):o.processX(-b,d,!1,!0),r.moves&&(o.y+=(r.y-r.prev.y)*r.friction.y,o._dy=o.y-o.prev.y)},RunImmovableBody2:function RunImmovableBody2(t){2===t?r.velocity.x=0:w?r.processX(b,c,!0):r.processX(-b,c,!1,!0),o.moves&&(r.y+=(o.y-o.prev.y)*o.friction.y,r._dy=r.y-r.prev.y)}}},function(t,i){var r,o,a,h,l,u,c,d,p,g,v,m,y,T,S,w,b,C=function BlockCheck(){return g&&S&&o.blocked.down?(r.processY(-b,c,!1,!0),1):p&&w&&o.blocked.up?(r.processY(b,c,!0),1):y&&w&&r.blocked.down?(o.processY(-b,d,!1,!0),2):m&&S&&r.blocked.up?(o.processY(b,d,!0),2):0},A=function Run(t){if(a&&h)b*=.5,0===t||3===t?(r.processY(b,l),o.processY(-b,u)):(r.processY(-b,l),o.processY(b,u));else if(a&&!h)0===t||3===t?r.processY(b,c,!0):r.processY(-b,c,!1,!0);else if(!a&&h)0===t||3===t?o.processY(-b,d,!1,!0):o.processY(b,d,!0);else{var i=.5*b;0===t?T?(r.processY(b,0,!0),o.processY(0,null,!1,!0)):y?(r.processY(i,0,!0),o.processY(-i,0,!1,!0)):(r.processY(i,o.velocity.y,!0),o.processY(-i,null,!1,!0)):1===t?v?(r.processY(0,null,!1,!0),o.processY(b,0,!0)):g?(r.processY(-i,0,!1,!0),o.processY(i,0,!0)):(r.processY(-i,null,!1,!0),o.processY(i,r.velocity.y,!0)):2===t?T?(r.processY(-b,0,!1,!0),o.processY(0,null,!0)):m?(r.processY(-i,0,!1,!0),o.processY(i,0,!0)):(r.processY(-i,o.velocity.y,!1,!0),o.processY(i,null,!0)):3===t&&(v?(r.processY(0,null,!0),o.processY(-b,0,!1,!0)):p?(r.processY(i,0,!0),o.processY(-i,0,!1,!0)):(r.processY(i,o.velocity.y,!0),o.processY(-i,null,!1,!0)))}return!0};t.exports={BlockCheck:C,Check:function Check(){var t=r.velocity.y,i=o.velocity.y,a=Math.sqrt(i*i*o.mass/r.mass)*(i>0?1:-1),h=Math.sqrt(t*t*r.mass/o.mass)*(t>0?1:-1),c=.5*(a+h);return h-=c,l=c+(a-=c)*r.bounce.y,u=c+h*o.bounce.y,p&&w?A(0):m&&S?A(1):g&&S?A(2):!(!y||!w)&&A(3)},Set:function Set(t,i,l){o=i;var u=(r=t).velocity.y,A=o.velocity.y;return a=r.pushable,p=r._dy<0,g=r._dy>0,v=0===r._dy,S=Math.abs(r.bottom-o.y)<=Math.abs(o.bottom-r.y),c=A-u*r.bounce.y,h=o.pushable,m=o._dy<0,y=o._dy>0,T=0===o._dy,w=!S,d=u-A*o.bounce.y,b=Math.abs(l),C()},Run:A,RunImmovableBody1:function RunImmovableBody1(t){1===t?o.velocity.y=0:S?o.processY(b,d,!0):o.processY(-b,d,!1,!0),r.moves&&(o.x+=(r.x-r.prev.x)*r.friction.x,o._dx=o.x-o.prev.x)},RunImmovableBody2:function RunImmovableBody2(t){2===t?r.velocity.y=0:w?r.processY(b,c,!0):r.processY(-b,c,!1,!0),o.moves&&(r.x+=(o.x-o.prev.x)*o.friction.x,r._dx=r.x-r.prev.x)}}},function(t,i,r){var o={ProcessTileCallbacks:r(530),ProcessTileSeparationX:r(534),ProcessTileSeparationY:r(536),SeparateTile:r(532),TileCheckX:r(533),TileCheckY:r(535),TileIntersectsBody:r(248)};t.exports=o},function(t,i,r){var o=r(0),a=r(3),h=new o({initialize:function BodyBounds(){this.boundsCenter=new a,this.centerDiff=new a},parseBody:function parseBody(t){if(!(t=t.hasOwnProperty("body")?t.body:t).hasOwnProperty("bounds")||!t.hasOwnProperty("centerOfMass"))return!1;var i=this.boundsCenter,r=this.centerDiff,o=t.bounds.max.x-t.bounds.min.x,a=t.bounds.max.y-t.bounds.min.y,h=o*t.centerOfMass.x,l=a*t.centerOfMass.y;return i.set(o/2,a/2),r.set(h-i.x,l-i.y),!0},getTopLeft:function getTopLeft(t,i,r){if(void 0===i&&(i=0),void 0===r&&(r=0),this.parseBody(t)){var o=this.boundsCenter,h=this.centerDiff;return new a(i+o.x+h.x,r+o.y+h.y)}return!1},getTopCenter:function getTopCenter(t,i,r){if(void 0===i&&(i=0),void 0===r&&(r=0),this.parseBody(t)){var o=this.boundsCenter,h=this.centerDiff;return new a(i+h.x,r+o.y+h.y)}return!1},getTopRight:function getTopRight(t,i,r){if(void 0===i&&(i=0),void 0===r&&(r=0),this.parseBody(t)){var o=this.boundsCenter,h=this.centerDiff;return new a(i-(o.x-h.x),r+o.y+h.y)}return!1},getLeftCenter:function getLeftCenter(t,i,r){if(void 0===i&&(i=0),void 0===r&&(r=0),this.parseBody(t)){var o=this.boundsCenter,h=this.centerDiff;return new a(i+o.x+h.x,r+h.y)}return!1},getCenter:function getCenter(t,i,r){if(void 0===i&&(i=0),void 0===r&&(r=0),this.parseBody(t)){var o=this.centerDiff;return new a(i+o.x,r+o.y)}return!1},getRightCenter:function getRightCenter(t,i,r){if(void 0===i&&(i=0),void 0===r&&(r=0),this.parseBody(t)){var o=this.boundsCenter,h=this.centerDiff;return new a(i-(o.x-h.x),r+h.y)}return!1},getBottomLeft:function getBottomLeft(t,i,r){if(void 0===i&&(i=0),void 0===r&&(r=0),this.parseBody(t)){var o=this.boundsCenter,h=this.centerDiff;return new a(i+o.x+h.x,r-(o.y-h.y))}return!1},getBottomCenter:function getBottomCenter(t,i,r){if(void 0===i&&(i=0),void 0===r&&(r=0),this.parseBody(t)){var o=this.boundsCenter,h=this.centerDiff;return new a(i+h.x,r-(o.y-h.y))}return!1},getBottomRight:function getBottomRight(t,i,r){if(void 0===i&&(i=0),void 0===r&&(r=0),this.parseBody(t)){var o=this.boundsCenter,h=this.centerDiff;return new a(i-(o.x-h.x),r-(o.y-h.y))}return!1}});t.exports=h},function(t,i){function lineInt(t,i,r){r=r||0;var o,a,h,l,u,c,d,p=[0,0];return o=t[1][1]-t[0][1],a=t[0][0]-t[1][0],h=o*t[0][0]+a*t[0][1],l=i[1][1]-i[0][1],u=i[0][0]-i[1][0],c=l*i[0][0]+u*i[0][1],scalar_eq(d=o*u-l*a,0,r)||(p[0]=(u*h-a*c)/d,p[1]=(o*c-l*h)/d),p}function lineSegmentsIntersect(t,i,r,o){var a=i[0]-t[0],h=i[1]-t[1],l=o[0]-r[0],u=o[1]-r[1];if(l*h-u*a==0)return!1;var c=(a*(r[1]-t[1])+h*(t[0]-r[0]))/(l*h-u*a),d=(l*(t[1]-r[1])+u*(r[0]-t[0]))/(u*a-l*h);return c>=0&&c<=1&&d>=0&&d<=1}function triangleArea(t,i,r){return(i[0]-t[0])*(r[1]-t[1])-(r[0]-t[0])*(i[1]-t[1])}function isLeft(t,i,r){return triangleArea(t,i,r)>0}function isLeftOn(t,i,r){return triangleArea(t,i,r)>=0}function isRight(t,i,r){return triangleArea(t,i,r)<0}function isRightOn(t,i,r){return triangleArea(t,i,r)<=0}t.exports={decomp:function polygonDecomp(t){var i=polygonGetCutEdges(t);return i.length>0?polygonSlice(t,i):[t]},quickDecomp:function polygonQuickDecomp(t,i,r,o,a,h,l){h=h||100,l=l||0,a=a||25,i=void 0!==i?i:[],r=r||[],o=o||[];var u=[0,0],c=[0,0],d=[0,0],p=0,g=0,v=0,m=0,y=0,T=0,S=0,w=[],b=[],C=t,A=t;if(A.length<3)return i;if(++l>h)return console.warn("quickDecomp: max level ("+h+") reached."),i;for(var E=0;E<t.length;++E)if(polygonIsReflex(C,E)){r.push(C[E]),p=g=Number.MAX_VALUE;for(var M=0;M<t.length;++M)isLeft(polygonAt(C,E-1),polygonAt(C,E),polygonAt(C,M))&&isRightOn(polygonAt(C,E-1),polygonAt(C,E),polygonAt(C,M-1))&&(d=getIntersectionPoint(polygonAt(C,E-1),polygonAt(C,E),polygonAt(C,M),polygonAt(C,M-1)),isRight(polygonAt(C,E+1),polygonAt(C,E),d)&&(v=sqdist(C[E],d))<g&&(g=v,c=d,T=M)),isLeft(polygonAt(C,E+1),polygonAt(C,E),polygonAt(C,M+1))&&isRightOn(polygonAt(C,E+1),polygonAt(C,E),polygonAt(C,M))&&(d=getIntersectionPoint(polygonAt(C,E+1),polygonAt(C,E),polygonAt(C,M),polygonAt(C,M+1)),isLeft(polygonAt(C,E-1),polygonAt(C,E),d)&&(v=sqdist(C[E],d))<p&&(p=v,u=d,y=M));if(T===(y+1)%t.length)d[0]=(c[0]+u[0])/2,d[1]=(c[1]+u[1])/2,o.push(d),E<y?(polygonAppend(w,C,E,y+1),w.push(d),b.push(d),0!==T&&polygonAppend(b,C,T,C.length),polygonAppend(b,C,0,E+1)):(0!==E&&polygonAppend(w,C,E,C.length),polygonAppend(w,C,0,y+1),w.push(d),b.push(d),polygonAppend(b,C,T,E+1));else{if(T>y&&(y+=t.length),m=Number.MAX_VALUE,y<T)return i;for(M=T;M<=y;++M)isLeftOn(polygonAt(C,E-1),polygonAt(C,E),polygonAt(C,M))&&isRightOn(polygonAt(C,E+1),polygonAt(C,E),polygonAt(C,M))&&(v=sqdist(polygonAt(C,E),polygonAt(C,M)))<m&&polygonCanSee2(C,E,M)&&(m=v,S=M%t.length);E<S?(polygonAppend(w,C,E,S+1),0!==S&&polygonAppend(b,C,S,A.length),polygonAppend(b,C,0,E+1)):(0!==E&&polygonAppend(w,C,E,A.length),polygonAppend(w,C,0,S+1),polygonAppend(b,C,S,E+1))}return w.length<b.length?(polygonQuickDecomp(w,i,r,o,a,h,l),polygonQuickDecomp(b,i,r,o,a,h,l)):(polygonQuickDecomp(b,i,r,o,a,h,l),polygonQuickDecomp(w,i,r,o,a,h,l)),i}return i.push(t),i},isSimple:function polygonIsSimple(t){var i,r=t;for(i=0;i<r.length-1;i++)for(var o=0;o<i-1;o++)if(lineSegmentsIntersect(r[i],r[i+1],r[o],r[o+1]))return!1;for(i=1;i<r.length-2;i++)if(lineSegmentsIntersect(r[0],r[r.length-1],r[i],r[i+1]))return!1;return!0},removeCollinearPoints:function polygonRemoveCollinearPoints(t,i){for(var r=0,o=t.length-1;t.length>3&&o>=0;--o)collinear(polygonAt(t,o-1),polygonAt(t,o),polygonAt(t,o+1),i)&&(t.splice(o%t.length,1),r++);return r},removeDuplicatePoints:function polygonRemoveDuplicatePoints(t,i){for(var r=t.length-1;r>=1;--r)for(var o=t[r],a=r-1;a>=0;--a)points_eq(o,t[a],i)&&t.splice(r,1)},makeCCW:function polygonMakeCCW(t){for(var i=0,r=t,o=1;o<t.length;++o)(r[o][1]<r[i][1]||r[o][1]===r[i][1]&&r[o][0]>r[i][0])&&(i=o);return!isLeft(polygonAt(t,i-1),polygonAt(t,i),polygonAt(t,i+1))&&(function polygonReverse(t){for(var i=[],r=t.length,o=0;o!==r;o++)i.push(t.pop());for(o=0;o!==r;o++)t[o]=i[o]}(t),!0)}};var r=[],o=[];function collinear(t,i,a,h){if(h){var l=r,u=o;l[0]=i[0]-t[0],l[1]=i[1]-t[1],u[0]=a[0]-i[0],u[1]=a[1]-i[1];var c=l[0]*u[0]+l[1]*u[1],d=Math.sqrt(l[0]*l[0]+l[1]*l[1]),p=Math.sqrt(u[0]*u[0]+u[1]*u[1]);return Math.acos(c/(d*p))<h}return 0===triangleArea(t,i,a)}function sqdist(t,i){var r=i[0]-t[0],o=i[1]-t[1];return r*r+o*o}function polygonAt(t,i){var r=t.length;return t[i<0?i%r+r:i%r]}function polygonAppend(t,i,r,o){for(var a=r;a<o;a++)t.push(i[a])}function polygonIsReflex(t,i){return isRight(polygonAt(t,i-1),polygonAt(t,i),polygonAt(t,i+1))}var a=[],h=[];function polygonCanSee(t,i,r){var o,l,u=a,c=h;if(isLeftOn(polygonAt(t,i+1),polygonAt(t,i),polygonAt(t,r))&&isRightOn(polygonAt(t,i-1),polygonAt(t,i),polygonAt(t,r)))return!1;l=sqdist(polygonAt(t,i),polygonAt(t,r));for(var d=0;d!==t.length;++d)if((d+1)%t.length!==i&&d!==i&&isLeftOn(polygonAt(t,i),polygonAt(t,r),polygonAt(t,d+1))&&isRightOn(polygonAt(t,i),polygonAt(t,r),polygonAt(t,d))&&(u[0]=polygonAt(t,i),u[1]=polygonAt(t,r),c[0]=polygonAt(t,d),c[1]=polygonAt(t,d+1),o=lineInt(u,c),sqdist(polygonAt(t,i),o)<l))return!1;return!0}function polygonCanSee2(t,i,r){for(var o=0;o!==t.length;++o)if(o!==i&&o!==r&&(o+1)%t.length!==i&&(o+1)%t.length!==r&&lineSegmentsIntersect(polygonAt(t,i),polygonAt(t,r),polygonAt(t,o),polygonAt(t,o+1)))return!1;return!0}function polygonCopy(t,i,r,o){var a=o||[];if(function polygonClear(t){t.length=0}(a),i<r)for(var h=i;h<=r;h++)a.push(t[h]);else{for(h=0;h<=r;h++)a.push(t[h]);for(h=i;h<t.length;h++)a.push(t[h])}return a}function polygonGetCutEdges(t){for(var i=[],r=[],o=[],a=[],h=Number.MAX_VALUE,l=0;l<t.length;++l)if(polygonIsReflex(t,l))for(var u=0;u<t.length;++u)if(polygonCanSee(t,l,u)){r=polygonGetCutEdges(polygonCopy(t,l,u,a)),o=polygonGetCutEdges(polygonCopy(t,u,l,a));for(var c=0;c<o.length;c++)r.push(o[c]);r.length<h&&(i=r,h=r.length,i.push([polygonAt(t,l),polygonAt(t,u)]))}return i}function polygonSlice(t,i){if(0===i.length)return[t];if(i instanceof Array&&i.length&&i[0]instanceof Array&&2===i[0].length&&i[0][0]instanceof Array){for(var r=[t],o=0;o<i.length;o++)for(var a=i[o],h=0;h<r.length;h++){var l=polygonSlice(r[h],a);if(l){r.splice(h,1),r.push(l[0],l[1]);break}}return r}return a=i,o=t.indexOf(a[0]),h=t.indexOf(a[1]),-1!==o&&-1!==h&&[polygonCopy(t,o,h),polygonCopy(t,h,o)]}function getIntersectionPoint(t,i,r,o,a){a=a||0;var h=i[1]-t[1],l=t[0]-i[0],u=h*t[0]+l*t[1],c=o[1]-r[1],d=r[0]-o[0],p=c*r[0]+d*r[1],g=h*d-c*l;return scalar_eq(g,0,a)?[0,0]:[(d*u-l*p)/g,(h*p-c*u)/g]}function scalar_eq(t,i,r){return r=r||0,Math.abs(t-i)<=r}function points_eq(t,i,r){return scalar_eq(t[0],i[0],r)&&scalar_eq(t[1],i[1],r)}},function(t,i,r){var o=r(86),a=r(0),h=r(591),l=r(128),u=r(592),c=r(1395),d=r(1396),p=r(1397),g=r(593),v=r(589),m=r(590),y=r(1398),T=r(64),S=new a({initialize:function Factory(t){this.world=t,this.scene=t.scene,this.sys=t.scene.sys},rectangle:function rectangle(t,i,r,a,h){var l=o.rectangle(t,i,r,a,h);return this.world.add(l),l},trapezoid:function trapezoid(t,i,r,a,h,l){var u=o.trapezoid(t,i,r,a,h,l);return this.world.add(u),u},circle:function circle(t,i,r,a,h){var l=o.circle(t,i,r,a,h);return this.world.add(l),l},polygon:function polygon(t,i,r,a,h){var l=o.polygon(t,i,r,a,h);return this.world.add(l),l},fromVertices:function fromVertices(t,i,r,a,h,l,u){"string"==typeof r&&(r=T.fromPath(r));var c=o.fromVertices(t,i,r,a,h,l,u);return this.world.add(c),c},fromPhysicsEditor:function fromPhysicsEditor(t,i,r,o,a){void 0===a&&(a=!0);var h=v.parseBody(t,i,r,o);return a&&!this.world.has(h)&&this.world.add(h),h},fromSVG:function fromSVG(t,i,r,a,h,l){void 0===a&&(a=1),void 0===h&&(h={}),void 0===l&&(l=!0);for(var c=r.getElementsByTagName("path"),d=[],p=0;p<c.length;p++){var g=u.pathToVertices(c[p],30);1!==a&&T.scale(g,a,a),d.push(g)}var v=o.fromVertices(t,i,d,h);return l&&this.world.add(v),v},fromJSON:function fromJSON(t,i,r,o,a){void 0===o&&(o={}),void 0===a&&(a=!0);var h=m.parseBody(t,i,r,o);return h&&a&&this.world.add(h),h},imageStack:function imageStack(t,i,r,o,a,l,u,c,p){void 0===u&&(u=0),void 0===c&&(c=0),void 0===p&&(p={});var g=this.world,v=this.sys.displayList;p.addToWorld=!1;var m=h.stack(r,o,a,l,u,c,(function(r,o){var a=new d(g,r,o,t,i,p);return v.add(a),a.body}));return g.add(m),m},stack:function stack(t,i,r,o,a,l,u){var stack=h.stack(t,i,r,o,a,l,u);return this.world.add(stack),stack},pyramid:function pyramid(t,i,r,o,a,l,u){var c=h.pyramid(t,i,r,o,a,l,u);return this.world.add(c),c},chain:function chain(t,i,r,o,a,l){return h.chain(t,i,r,o,a,l)},mesh:function mesh(t,i,r,o,a){return h.mesh(t,i,r,o,a)},newtonsCradle:function newtonsCradle(t,i,r,o,a){var l=h.newtonsCradle(t,i,r,o,a);return this.world.add(l),l},car:function car(t,i,r,o,a){var l=h.car(t,i,r,o,a);return this.world.add(l),l},softBody:function softBody(t,i,r,o,a,l,u,c,d,p){var g=h.softBody(t,i,r,o,a,l,u,c,d,p);return this.world.add(g),g},joint:function joint(t,i,r,o,a){return this.constraint(t,i,r,o,a)},spring:function spring(t,i,r,o,a){return this.constraint(t,i,r,o,a)},constraint:function constraint(t,i,r,o,a){void 0===o&&(o=1),void 0===a&&(a={}),a.bodyA="body"===t.type?t:t.body,a.bodyB="body"===i.type?i:i.body,isNaN(r)||(a.length=r),a.stiffness=o;var constraint=l.create(a);return this.world.add(constraint),constraint},worldConstraint:function worldConstraint(t,i,r,o){void 0===r&&(r=1),void 0===o&&(o={}),o.bodyB="body"===t.type?t:t.body,isNaN(i)||(o.length=i),o.stiffness=r;var a=l.create(o);return this.world.add(a),a},mouseSpring:function mouseSpring(t){return this.pointerConstraint(t)},pointerConstraint:function pointerConstraint(t){void 0===t&&(t={}),t.hasOwnProperty("render")||(t.render={visible:!1});var pointerConstraint=new y(this.scene,this.world,t);return this.world.add(pointerConstraint.constraint),pointerConstraint},image:function image(t,i,r,o,a){var image=new d(this.world,t,i,r,o,a);return this.sys.displayList.add(image),image},tileBody:function tileBody(t,i){return new g(this.world,t,i)},sprite:function sprite(t,i,r,o,a){var sprite=new p(this.world,t,i,r,o,a);return this.sys.displayList.add(sprite),this.sys.updateList.add(sprite),sprite},gameObject:function gameObject(t,i,r){return c(this.world,t,i,r)},destroy:function destroy(){this.world=null,this.scene=null,this.sys=null}});t.exports=S},function(t,i,r){var o=r(249),a=r(2),h=r(3);t.exports=function MatterGameObject(t,i,r,l){void 0===r&&(r={}),void 0===l&&(l=!0);var u=i.x,c=i.y;if(i.body={temp:!0,position:{x:u,y:c}},[o.Bounce,o.Collision,o.Force,o.Friction,o.Gravity,o.Mass,o.Sensor,o.SetBody,o.Sleep,o.Static,o.Transform,o.Velocity].forEach((function(t){for(var r in t)(o=t[r]).get&&"function"==typeof o.get||o.set&&"function"==typeof o.set?Object.defineProperty(i,r,{get:t[r].get,set:t[r].set}):Object.defineProperty(i,r,{value:t[r]});var o})),i.world=t,i._tempVec2=new h(u,c),r.hasOwnProperty("type")&&"body"===r.type)i.setExistingBody(r,l);else{var d=a(r,"shape",null);d||(d="rectangle"),r.addToWorld=l,i.setBody(d,r)}return i}},function(t,i,r){var o=r(0),a=r(249),h=r(15),l=r(2),u=r(125),c=r(167),d=r(3),p=new o({Extends:u,Mixins:[a.Bounce,a.Collision,a.Force,a.Friction,a.Gravity,a.Mass,a.Sensor,a.SetBody,a.Sleep,a.Static,a.Transform,a.Velocity,c],initialize:function MatterImage(t,i,r,o,a,u){h.call(this,t.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(o,a),this.setSizeToFrame(),this.setOrigin(),this.world=t,this._tempVec2=new d(i,r);var c=l(u,"shape",null);c?this.setBody(c,u):this.setRectangle(this.width,this.height,u),this.setPosition(i,r),this.initPipeline()}});t.exports=p},function(t,i,r){var o=r(164),a=r(0),h=r(249),l=r(15),u=r(2),c=r(167),d=r(73),p=r(3),g=new a({Extends:d,Mixins:[h.Bounce,h.Collision,h.Force,h.Friction,h.Gravity,h.Mass,h.Sensor,h.SetBody,h.Sleep,h.Static,h.Transform,h.Velocity,c],initialize:function MatterSprite(t,i,r,a,h,c){l.call(this,t.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new o(this),this.setTexture(a,h),this.setSizeToFrame(),this.setOrigin(),this.world=t,this._tempVec2=new p(i,r);var d=u(c,"shape",null);d?this.setBody(d,c):this.setRectangle(this.width,this.height,c),this.setPosition(i,r),this.initPipeline()}});t.exports=g},function(t,i,r){var o=r(84),a=r(0),h=r(118),l=r(128),u=r(273),c=r(272),d=r(51),p=r(127),g=r(165),v=r(3),m=r(64),y=new a({initialize:function PointerConstraint(t,i,r){void 0===r&&(r={}),this.scene=t,this.world=i,this.camera=null,this.pointer=null,this.active=!0,this.position=new v,this.body=null,this.part=null,this.constraint=l.create(p(r,{label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}})),this.world.on(c.BEFORE_UPDATE,this.update,this),t.sys.input.on(d.POINTER_DOWN,this.onDown,this),t.sys.input.on(d.POINTER_UP,this.onUp,this)},onDown:function onDown(t){this.pointer||(this.pointer=t,this.camera=t.camera)},onUp:function onUp(t){t===this.pointer&&(this.pointer=null)},getBody:function getBody(t){var i=this.position,r=this.constraint;this.camera.getWorldPoint(t.x,t.y,i);for(var a=h.allBodies(this.world.localWorld),l=0;l<a.length;l++){var d=a[l];if(!d.ignorePointer&&o.contains(d.bounds,i)&&u.canCollide(d.collisionFilter,r.collisionFilter)&&this.hitTestBody(d,i))return this.world.emit(c.DRAG_START,d,this.part,this),!0}return!1},hitTestBody:function hitTestBody(t,i){for(var r=this.constraint,o=t.parts.length,a=o>1?1:0;a<o;a++){var h=t.parts[a];if(m.contains(h.vertices,i))return r.pointA=i,r.pointB={x:i.x-t.position.x,y:i.y-t.position.y},r.bodyB=t,r.angleB=t.angle,g.set(t,!1),this.part=h,this.body=t,!0}return!1},update:function update(){var t=this.pointer,i=this.body;if(this.active&&t)if(t.isDown||!i){if(t.isDown){if(!i&&!this.getBody(t))return;i=this.body;var r=this.position,o=this.constraint;this.camera.getWorldPoint(t.x,t.y,r),o.pointA.x=r.x,o.pointA.y=r.y,g.set(i,!1),this.world.emit(c.DRAG,i,this)}}else this.stopDrag();else i&&this.stopDrag()},stopDrag:function stopDrag(){var t=this.body,i=this.constraint;i.bodyB=null,i.pointB=null,this.pointer=null,this.body=null,this.part=null,t&&this.world.emit(c.DRAG_END,t,this)},destroy:function destroy(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(c.BEFORE_UPDATE,this.update),this.scene.sys.input.off(d.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(d.POINTER_UP,this.onUp,this)}});t.exports=y},function(t,i,r){var o={};t.exports=o;var a=r(595),h=r(32);o.name="matter-js",o.version="0.14.2",o.uses=[],o.used=[],o.use=function(){a.use(o,Array.prototype.slice.call(arguments))},o.before=function(t,i){return t=t.replace(/^Matter./,""),h.chainPathBefore(o,t,i)},o.after=function(t,i){return t=t.replace(/^Matter./,""),h.chainPathAfter(o,t,i)}},function(t,i,r){var o={};t.exports=o;var a=r(83),h=r(274),l=r(84),u=r(86),c=r(64);o.collides=function(t,i){for(var r=[],o=0;o<i.length;o++){var a=i[o];if(t!==a&&l.overlaps(a.bounds,t.bounds))for(var u=1===a.parts.length?0:1;u<a.parts.length;u++){var c=a.parts[u];if(l.overlaps(c.bounds,t.bounds)){var d=h.collides(c,t);if(d.collided){r.push(d);break}}}}return r},o.ray=function(t,i,r,h){h=h||1e-100;for(var l=a.angle(i,r),c=a.magnitude(a.sub(i,r)),d=.5*(r.x+i.x),p=.5*(r.y+i.y),g=u.rectangle(d,p,c,h,{angle:l}),v=o.collides(g,t),m=0;m<v.length;m+=1){var y=v[m];y.body=y.bodyB=y.bodyA}return v},o.region=function(t,i,r){for(var o=[],a=0;a<t.length;a++){var h=t[a],u=l.overlaps(h.bounds,i);(u&&!r||!u&&r)&&o.push(h)}return o},o.point=function(t,i){for(var r=[],o=0;o<t.length;o++){var a=t[o];if(l.contains(a.bounds,i))for(var h=1===a.parts.length?0:1;h<a.parts.length;h++){var u=a.parts[h];if(l.contains(u.bounds,i)&&c.contains(u.vertices,i)){r.push(a);break}}}return r}},function(t,i,r){var o={};t.exports=o;var a=r(596),h=r(165),l=r(599),u=r(598),c=r(1523),d=r(597),p=r(166),g=r(118),v=r(128),m=r(32),y=r(41);o.create=function(t,i){i=(i=m.isElement(t)?i:t)||{},((t=m.isElement(t)?t:null)||i.render)&&m.warn("Engine.create: engine.render is deprecated (see docs)");var r={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:d}},o=m.extend(r,i);return o.world=i.world||a.create(o.world),o.pairs=u.create(),o.broadphase=o.broadphase.controller.create(o.broadphase),o.metrics=o.metrics||{extended:!1},o.metrics=c.create(o.metrics),o},o.update=function(t,i,r){i=i||1e3/60,r=r||1;var a,d=t.world,m=t.timing,y=t.broadphase,T=[];m.timestamp+=i*m.timeScale;var S={timestamp:m.timestamp};p.trigger(t,"beforeUpdate",S);var w=g.allBodies(d),b=g.allConstraints(d);for(c.reset(t.metrics),t.enableSleeping&&h.update(w,m.timeScale),o._bodiesApplyGravity(w,d.gravity),o._bodiesUpdate(w,i,m.timeScale,r,d.bounds),v.preSolveAll(w),a=0;a<t.constraintIterations;a++)v.solveAll(b,m.timeScale);v.postSolveAll(w),y.controller?(d.isModified&&y.controller.clear(y),y.controller.update(y,w,t,d.isModified),T=y.pairsList):T=w,d.isModified&&g.setModified(d,!1,!1,!0);var C=y.detector(T,t),A=t.pairs,E=m.timestamp;for(u.update(A,C,E),u.removeOld(A,E),t.enableSleeping&&h.afterCollisions(A.list,m.timeScale),A.collisionStart.length>0&&p.trigger(t,"collisionStart",{pairs:A.collisionStart}),l.preSolvePosition(A.list),a=0;a<t.positionIterations;a++)l.solvePosition(A.list,w,m.timeScale);for(l.postSolvePosition(w),v.preSolveAll(w),a=0;a<t.constraintIterations;a++)v.solveAll(b,m.timeScale);for(v.postSolveAll(w),l.preSolveVelocity(A.list),a=0;a<t.velocityIterations;a++)l.solveVelocity(A.list,m.timeScale);return A.collisionActive.length>0&&p.trigger(t,"collisionActive",{pairs:A.collisionActive}),A.collisionEnd.length>0&&p.trigger(t,"collisionEnd",{pairs:A.collisionEnd}),c.update(t.metrics,t),o._bodiesClearForces(w),p.trigger(t,"afterUpdate",S),t},o.merge=function(t,i){if(m.extend(t,i),i.world){t.world=i.world,o.clear(t);for(var r=g.allBodies(t.world),a=0;a<r.length;a++){var l=r[a];h.set(l,!1),l.id=m.nextId()}}},o.clear=function(t){var i=t.world;u.clear(t.pairs);var r=t.broadphase;if(r.controller){var o=g.allBodies(i);r.controller.clear(r),r.controller.update(r,o,t,!0)}},o._bodiesClearForces=function(t){for(var i=0;i<t.length;i++){var r=t[i];r.force.x=0,r.force.y=0,r.torque=0}},o._bodiesApplyGravity=function(t,i){var r=void 0!==i.scale?i.scale:.001;if((0!==i.x||0!==i.y)&&0!==r)for(var o=0;o<t.length;o++){var a=t[o];a.ignoreGravity||a.isStatic||a.isSleeping||(a.force.x+=a.mass*i.x*r*a.gravityScale.x,a.force.y+=a.mass*i.y*r*a.gravityScale.y)}},o._bodiesUpdate=function(t,i,r,o,a){for(var h=0;h<t.length;h++){var l=t[h];l.isStatic||l.isSleeping||y.update(l,i,r,o)}}},function(t,i,r){var o=r(86),a=r(41),h=r(0),l=r(32),u=r(118),c=r(1401),d=r(9),p=r(272),g=r(2),v=r(6),m=r(41),y=r(166),T=r(593),S=r(596),w=r(83),b=new h({Extends:d,initialize:function World(t,i){d.call(this),this.scene=t,this.engine=c.create(i),this.localWorld=this.engine.world;var r=v(i,"gravity",null);r?this.setGravity(r.x,r.y,r.scale):!1===r&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=v(i,"enabled",!0),this.correction=v(i,"correction",1),this.getDelta=v(i,"getDelta",this.update60Hz);var o=g(i,"runner",{}),a=g(o,"fps",!1),h=g(o,"fps",60),l=g(o,"delta",1e3/h),u=g(o,"deltaMin",1e3/h),p=g(o,"deltaMax",1e3/(.5*h));a||(h=1e3/l),this.runner={fps:h,correction:g(o,"correction",1),deltaSampleSize:g(o,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:g(o,"isFixed",!1),delta:l,deltaMin:u,deltaMax:p},this.autoUpdate=v(i,"autoUpdate",!0);var m=v(i,"debug",!1);if(this.drawDebug="object"===_typeof(m)||m,this.debugGraphic,this.debugConfig={showAxes:g(m,"showAxes",!1),showAngleIndicator:g(m,"showAngleIndicator",!1),angleColor:g(m,"angleColor",15208787),showBroadphase:g(m,"showBroadphase",!1),broadphaseColor:g(m,"broadphaseColor",16757760),showBounds:g(m,"showBounds",!1),boundsColor:g(m,"boundsColor",16777215),showVelocity:g(m,"showVelocity",!1),velocityColor:g(m,"velocityColor",44783),showCollisions:g(m,"showCollisions",!1),collisionColor:g(m,"collisionColor",16094476),showSeparations:g(m,"showSeparations",!1),separationColor:g(m,"separationColor",16753920),showBody:g(m,"showBody",!0),showStaticBody:g(m,"showStaticBody",!0),showInternalEdges:g(m,"showInternalEdges",!1),renderFill:g(m,"renderFill",!1),renderLine:g(m,"renderLine",!0),fillColor:g(m,"fillColor",1075465),fillOpacity:g(m,"fillOpacity",1),lineColor:g(m,"lineColor",2678297),lineOpacity:g(m,"lineOpacity",1),lineThickness:g(m,"lineThickness",1),staticFillColor:g(m,"staticFillColor",857979),staticLineColor:g(m,"staticLineColor",1255396),showSleeping:g(m,"showSleeping",!1),staticBodySleepOpacity:g(m,"staticBodySleepOpacity",.7),sleepFillColor:g(m,"sleepFillColor",4605510),sleepLineColor:g(m,"sleepLineColor",10066585),showSensors:g(m,"showSensors",!0),sensorFillColor:g(m,"sensorFillColor",857979),sensorLineColor:g(m,"sensorLineColor",1255396),showPositions:g(m,"showPositions",!0),positionSize:g(m,"positionSize",4),positionColor:g(m,"positionColor",14697178),showJoint:g(m,"showJoint",!0),jointColor:g(m,"jointColor",14737474),jointLineOpacity:g(m,"jointLineOpacity",1),jointLineThickness:g(m,"jointLineThickness",2),pinSize:g(m,"pinSize",4),pinColor:g(m,"pinColor",4382944),springColor:g(m,"springColor",14697184),anchorColor:g(m,"anchorColor",15724527),anchorSize:g(m,"anchorSize",4),showConvexHulls:g(m,"showConvexHulls",!1),hullColor:g(m,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),g(i,"setBounds",!1)){var y=i.setBounds;if("boolean"==typeof y)this.setBounds();else{var T=g(y,"x",0),S=g(y,"y",0),w=g(y,"width",t.sys.scale.width),b=g(y,"height",t.sys.scale.height),C=g(y,"thickness",64),A=g(y,"left",!0),E=g(y,"right",!0),M=g(y,"top",!0),_=g(y,"bottom",!0);this.setBounds(T,S,w,b,C,A,E,M,_)}}},setCompositeRenderStyle:function setCompositeRenderStyle(t){var i,r,o,a=t.bodies,h=t.constraints,l=t.composites;for(i=0;i<a.length;i++)o=(r=a[i]).render,this.setBodyRenderStyle(r,o.lineColor,o.lineOpacity,o.lineThickness,o.fillColor,o.fillOpacity);for(i=0;i<h.length;i++)o=(r=h[i]).render,this.setConstraintRenderStyle(r,o.lineColor,o.lineOpacity,o.lineThickness,o.pinSize,o.anchorColor,o.anchorSize);for(i=0;i<l.length;i++)r=l[i],this.setCompositeRenderStyle(r);return this},setBodyRenderStyle:function setBodyRenderStyle(t,i,r,o,a,h){var l=t.render,u=this.debugConfig;return l?(null==i&&(i=t.isStatic?u.staticLineColor:u.lineColor),null==r&&(r=u.lineOpacity),null==o&&(o=u.lineThickness),null==a&&(a=t.isStatic?u.staticFillColor:u.fillColor),null==h&&(h=u.fillOpacity),!1!==i&&(l.lineColor=i),!1!==r&&(l.lineOpacity=r),!1!==o&&(l.lineThickness=o),!1!==a&&(l.fillColor=a),!1!==h&&(l.fillOpacity=h),this):this},setConstraintRenderStyle:function setConstraintRenderStyle(t,i,r,o,a,h,l){var u=t.render,c=this.debugConfig;if(!u)return this;if(null==i){var d=u.type;"line"===d?i=c.jointColor:"pin"===d?i=c.pinColor:"spring"===d&&(i=c.springColor)}return null==r&&(r=c.jointLineOpacity),null==o&&(o=c.jointLineThickness),null==a&&(a=c.pinSize),null==h&&(h=c.anchorColor),null==l&&(l=c.anchorSize),!1!==i&&(u.lineColor=i),!1!==r&&(u.lineOpacity=r),!1!==o&&(u.lineThickness=o),!1!==a&&(u.pinSize=a),!1!==h&&(u.anchorColor=h),!1!==l&&(u.anchorSize=l),this},setEventsProxy:function setEventsProxy(){var t=this,i=this.engine,r=this.localWorld;this.drawDebug&&(y.on(r,"compositeModified",(function(i){t.setCompositeRenderStyle(i)})),y.on(r,"beforeAdd",(function(i){for(var r=[].concat(i.object),o=0;o<r.length;o++){var a=r[o],h=a.render;"body"===a.type?t.setBodyRenderStyle(a,h.lineColor,h.lineOpacity,h.lineThickness,h.fillColor,h.fillOpacity):"composite"===a.type?t.setCompositeRenderStyle(a):"constraint"===a.type&&t.setConstraintRenderStyle(a,h.lineColor,h.lineOpacity,h.lineThickness,h.pinSize,h.anchorColor,h.anchorSize)}}))),y.on(r,"beforeAdd",(function(i){t.emit(p.BEFORE_ADD,i)})),y.on(r,"afterAdd",(function(i){t.emit(p.AFTER_ADD,i)})),y.on(r,"beforeRemove",(function(i){t.emit(p.BEFORE_REMOVE,i)})),y.on(r,"afterRemove",(function(i){t.emit(p.AFTER_REMOVE,i)})),y.on(i,"beforeUpdate",(function(i){t.emit(p.BEFORE_UPDATE,i)})),y.on(i,"afterUpdate",(function(i){t.emit(p.AFTER_UPDATE,i)})),y.on(i,"collisionStart",(function(i){var r,o,a=i.pairs;a.length>0&&(r=a[0].bodyA,o=a[0].bodyB),t.emit(p.COLLISION_START,i,r,o)})),y.on(i,"collisionActive",(function(i){var r,o,a=i.pairs;a.length>0&&(r=a[0].bodyA,o=a[0].bodyB),t.emit(p.COLLISION_ACTIVE,i,r,o)})),y.on(i,"collisionEnd",(function(i){var r,o,a=i.pairs;a.length>0&&(r=a[0].bodyA,o=a[0].bodyB),t.emit(p.COLLISION_END,i,r,o)}))},setBounds:function setBounds(t,i,r,o,a,h,l,u,c){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=this.scene.sys.scale.width),void 0===o&&(o=this.scene.sys.scale.height),void 0===a&&(a=64),void 0===h&&(h=!0),void 0===l&&(l=!0),void 0===u&&(u=!0),void 0===c&&(c=!0),this.updateWall(h,"left",t-a,i-a,a,o+2*a),this.updateWall(l,"right",t+r,i-a,a,o+2*a),this.updateWall(u,"top",t,i-a,r,a),this.updateWall(c,"bottom",t,i+o,r,a),this},updateWall:function updateWall(t,i,r,o,a,h){var l=this.walls[i];t?(l&&S.remove(this.localWorld,l),r+=a/2,o+=h/2,this.walls[i]=this.create(r,o,a,h,{isStatic:!0,friction:0,frictionStatic:0})):(l&&S.remove(this.localWorld,l),this.walls[i]=null)},createDebugGraphic:function createDebugGraphic(){var t=this.scene.sys.add.graphics({x:0,y:0});return t.setDepth(Number.MAX_VALUE),this.debugGraphic=t,this.drawDebug=!0,t},disableGravity:function disableGravity(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function setGravity(t,i,r){return void 0===t&&(t=0),void 0===i&&(i=1),this.localWorld.gravity.x=t,this.localWorld.gravity.y=i,void 0!==r&&(this.localWorld.gravity.scale=r),this},create:function create(t,i,r,a,h){var l=o.rectangle(t,i,r,a,h);return S.add(this.localWorld,l),l},add:function add(t){return S.add(this.localWorld,t),this},remove:function remove(t,i){Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var o=t[r],a=o.body?o.body:o;u.remove(this.localWorld,a,i)}return this},removeConstraint:function removeConstraint(t,i){return u.remove(this.localWorld,t,i),this},convertTilemapLayer:function convertTilemapLayer(t,i){var r=t.layer,o=t.getTilesWithin(0,0,r.width,r.height,{isColliding:!0});return this.convertTiles(o,i),this},convertTiles:function convertTiles(t,i){if(0===t.length)return this;for(var r=0;r<t.length;r++)new T(this,t[r],i);return this},nextGroup:function nextGroup(t){return m.nextGroup(t)},nextCategory:function nextCategory(){return m.nextCategory()},pause:function pause(){return this.enabled=!1,this.emit(p.PAUSE),this},resume:function resume(){return this.enabled=!0,this.emit(p.RESUME),this},update:function update(t,i){if(this.enabled&&this.autoUpdate){var r=this.engine,o=this.runner,a=r.timing,h=this.correction;o.isFixed?i=this.getDelta(t,i):(i=t-o.timePrev||o.delta,o.timePrev=t,o.deltaHistory.push(i),o.deltaHistory=o.deltaHistory.slice(-o.deltaSampleSize),h=(i=(i=(i=Math.min.apply(null,o.deltaHistory))<o.deltaMin?o.deltaMin:i)>o.deltaMax?o.deltaMax:i)/o.delta,o.delta=i),0!==o.timeScalePrev&&(h*=a.timeScale/o.timeScalePrev),0===a.timeScale&&(h=0),o.timeScalePrev=a.timeScale,o.correction=h,o.frameCounter+=1,t-o.counterTimestamp>=1e3&&(o.fps=o.frameCounter*((t-o.counterTimestamp)/1e3),o.counterTimestamp=t,o.frameCounter=0),c.update(r,i,h)}},step:function step(t,i){c.update(this.engine,t,i)},update60Hz:function update60Hz(){return 1e3/60},update30Hz:function update30Hz(){return 1e3/30},has:function has(t){var i=t.hasOwnProperty("body")?t.body:t;return null!==u.get(this.localWorld,i.id,i.type)},getAllBodies:function getAllBodies(){return u.allBodies(this.localWorld)},getAllConstraints:function getAllConstraints(){return u.allConstraints(this.localWorld)},getAllComposites:function getAllComposites(){return u.allComposites(this.localWorld)},postUpdate:function postUpdate(){if(this.drawDebug){var t=this.debugConfig,i=this.engine,r=this.debugGraphic,o=u.allBodies(this.localWorld);this.debugGraphic.clear(),t.showBroadphase&&i.broadphase.controller&&this.renderGrid(i.broadphase,r,t.broadphaseColor,.5),t.showBounds&&this.renderBodyBounds(o,r,t.boundsColor,.5),(t.showBody||t.showStaticBody)&&this.renderBodies(o),t.showJoint&&this.renderJoints(),(t.showAxes||t.showAngleIndicator)&&this.renderBodyAxes(o,r,t.showAxes,t.angleColor,.5),t.showVelocity&&this.renderBodyVelocity(o,r,t.velocityColor,1,2),t.showSeparations&&this.renderSeparations(i.pairs.list,r,t.separationColor),t.showCollisions&&this.renderCollisions(i.pairs.list,r,t.collisionColor)}},renderGrid:function renderGrid(t,i,r,o){i.lineStyle(1,r,o);for(var a=l.keys(t.buckets),h=0;h<a.length;h++){var u=a[h];if(!(t.buckets[u].length<2)){var c=u.split(/C|R/);i.strokeRect(parseInt(c[1],10)*t.bucketWidth,parseInt(c[2],10)*t.bucketHeight,t.bucketWidth,t.bucketHeight)}}return this},renderSeparations:function renderSeparations(t,i,r){i.lineStyle(1,r,1);for(var o=0;o<t.length;o++){var a=t[o];if(a.isActive){var h=a.collision,l=h.bodyA,u=h.bodyB,c=l.position,d=u.position,p=h.penetration,g=l.isStatic||u.isStatic?1:4;u.isStatic&&(g=0),i.lineBetween(d.x,d.y,d.x-p.x*g,d.y-p.y*g),g=l.isStatic||u.isStatic?1:4,l.isStatic&&(g=0),i.lineBetween(c.x,c.y,c.x-p.x*g,c.y-p.y*g)}}return this},renderCollisions:function renderCollisions(t,i,r){var o,a;for(i.lineStyle(1,r,.5),i.fillStyle(r,1),o=0;o<t.length;o++)if((a=t[o]).isActive)for(var h=0;h<a.activeContacts.length;h++){var l=a.activeContacts[h].vertex;i.fillRect(l.x-2,l.y-2,5,5)}for(o=0;o<t.length;o++)if((a=t[o]).isActive){var u=a.collision,c=a.activeContacts;if(c.length>0){var d=c[0].vertex.x,p=c[0].vertex.y;2===c.length&&(d=(c[0].vertex.x+c[1].vertex.x)/2,p=(c[0].vertex.y+c[1].vertex.y)/2),u.bodyB===u.supports[0].body||u.bodyA.isStatic?i.lineBetween(d-8*u.normal.x,p-8*u.normal.y,d,p):i.lineBetween(d+8*u.normal.x,p+8*u.normal.y,d,p)}}return this},renderBodyBounds:function renderBodyBounds(t,i,r,o){i.lineStyle(1,r,o);for(var a=0;a<t.length;a++){var h=t[a];if(h.render.visible){var l=h.bounds;if(l)i.strokeRect(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y);else for(var u=h.parts,c=u.length>1?1:0;c<u.length;c++){var d=u[c];i.strokeRect(d.bounds.min.x,d.bounds.min.y,d.bounds.max.x-d.bounds.min.x,d.bounds.max.y-d.bounds.min.y)}}}return this},renderBodyAxes:function renderBodyAxes(t,i,r,o,a){i.lineStyle(1,o,a);for(var h=0;h<t.length;h++){var l,u,c,d=t[h],p=d.parts;if(d.render.visible)if(r)for(u=p.length>1?1:0;u<p.length;u++)for(l=p[u],c=0;c<l.axes.length;c++){var g=l.axes[c];i.lineBetween(l.position.x,l.position.y,l.position.x+20*g.x,l.position.y+20*g.y)}else for(u=p.length>1?1:0;u<p.length;u++)for(l=p[u],c=0;c<l.axes.length;c++)i.lineBetween(l.position.x,l.position.y,(l.vertices[0].x+l.vertices[l.vertices.length-1].x)/2,(l.vertices[0].y+l.vertices[l.vertices.length-1].y)/2)}return this},renderBodyVelocity:function renderBodyVelocity(t,i,r,o,a){i.lineStyle(a,r,o);for(var h=0;h<t.length;h++){var l=t[h];l.render.visible&&i.lineBetween(l.position.x,l.position.y,l.position.x+2*(l.position.x-l.positionPrev.x),l.position.y+2*(l.position.y-l.positionPrev.y))}return this},renderBodies:function renderBodies(t){for(var i=this.debugGraphic,r=this.debugConfig,o=r.showBody,a=r.showStaticBody,h=r.showSleeping,l=r.showInternalEdges,u=r.showConvexHulls,c=r.renderFill,d=r.renderLine,p=r.staticBodySleepOpacity,g=r.sleepFillColor,v=r.sleepLineColor,m=r.hullColor,y=0;y<t.length;y++){var T=t[y];if(T.render.visible&&(a||!T.isStatic)&&(o||T.isStatic)){var S=T.render.lineColor,w=T.render.lineOpacity,b=T.render.lineThickness,C=T.render.fillColor,A=T.render.fillOpacity;h&&T.isSleeping&&(T.isStatic?(w*=p,A*=p):(S=v,C=g)),c||(C=null),d||(S=null),this.renderBody(T,i,l,S,w,b,C,A);var E=T.parts.length;u&&E>1&&this.renderConvexHull(T,i,m,b)}}},renderBody:function renderBody(t,i,r,o,a,h,l,u){void 0===o&&(o=null),void 0===a&&(a=null),void 0===h&&(h=1),void 0===l&&(l=null),void 0===u&&(u=null);for(var c=this.debugConfig,d=c.sensorFillColor,p=c.sensorLineColor,g=t.parts,v=g.length,m=v>1?1:0;m<v;m++){var y=g[m],T=y.render,S=T.opacity;if(T.visible&&0!==S&&(!y.isSensor||c.showSensors)){var w=y.circleRadius;if(i.beginPath(),y.isSensor?(null!==l&&i.fillStyle(d,u*S),null!==o&&i.lineStyle(h,p,a*S)):(null!==l&&i.fillStyle(l,u*S),null!==o&&i.lineStyle(h,o,a*S)),w)i.arc(y.position.x,y.position.y,w,0,2*Math.PI);else{var b=y.vertices,C=b.length;i.moveTo(b[0].x,b[0].y);for(var A=1;A<C;A++){var E=b[A];if(!b[A-1].isInternal||r?i.lineTo(E.x,E.y):i.moveTo(E.x,E.y),A<C&&E.isInternal&&!r){var M=(A+1)%C;i.moveTo(b[M].x,b[M].y)}}i.closePath()}null!==l&&i.fillPath(),null!==o&&i.strokePath()}}if(c.showPositions&&!t.isStatic){var _=t.position.x,R=t.position.y,P=Math.ceil(c.positionSize/2);i.fillStyle(c.positionColor,1),i.fillRect(_-P,R-P,c.positionSize,c.positionSize)}return this},renderConvexHull:function renderConvexHull(t,i,r,o){if(void 0===o&&(o=1),t.parts.length>1){var a=t.vertices;i.lineStyle(o,r),i.beginPath(),i.moveTo(a[0].x,a[0].y);for(var h=1;h<a.length;h++)i.lineTo(a[h].x,a[h].y);i.lineTo(a[0].x,a[0].y),i.strokePath()}return this},renderJoints:function renderJoints(){for(var t=this.debugGraphic,i=u.allConstraints(this.localWorld),r=0;r<i.length;r++){var o=i[r].render,a=o.lineColor,h=o.lineOpacity,l=o.lineThickness,c=o.pinSize,d=o.anchorColor,p=o.anchorSize;this.renderConstraint(i[r],t,a,h,l,c,d,p)}},renderConstraint:function renderConstraint(t,i,r,o,a,h,u,c){var d=t.render;if(!d.visible||!t.pointA||!t.pointB)return this;i.lineStyle(a,r,o);var p,g,v=t.bodyA,m=t.bodyB;if(p=v?w.add(v.position,t.pointA):t.pointA,"pin"===d.type)i.strokeCircle(p.x,p.y,h);else{if(g=m?w.add(m.position,t.pointB):t.pointB,i.beginPath(),i.moveTo(p.x,p.y),"spring"===d.type)for(var y,T=w.sub(g,p),S=w.perp(w.normalise(T)),b=Math.ceil(l.clamp(t.length/5,12,20)),C=1;C<b;C+=1)y=C%2==0?1:-1,i.lineTo(p.x+T.x*(C/b)+S.x*y*4,p.y+T.y*(C/b)+S.y*y*4);i.lineTo(g.x,g.y)}return i.strokePath(),d.anchors&&c>0&&(i.fillStyle(u),i.fillCircle(p.x,p.y,c),i.fillCircle(g.x,g.y,c)),this},resetCollisionIDs:function resetCollisionIDs(){return a._nextCollidingGroupId=1,a._nextNonCollidingGroupId=-1,a._nextCategory=1,this},shutdown:function shutdown(){y.off(this.engine),this.removeAllListeners(),S.clear(this.localWorld,!1),c.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function destroy(){this.shutdown()}});t.exports=b},function(t,i,r){t.exports={BasePlugin:r(540),DefaultPlugins:r(197),PluginCache:r(24),PluginManager:r(414),ScenePlugin:r(1404)}},function(t,i,r){var o=r(540),a=r(0),h=r(20),l=new a({Extends:o,initialize:function ScenePlugin(t,i,r){o.call(this,i),this.scene=t,this.systems=t.sys,this.pluginKey=r,t.sys.events.once(h.BOOT,this.boot,this)},boot:function boot(){},destroy:function destroy(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=l},function(t,i,r){t.exports={Canvas:r(1406),Events:r(91),Snapshot:r(1407),WebGL:r(1408)}},function(t,i,r){t.exports={CanvasRenderer:r(368),GetBlendModes:r(370),SetTransform:r(30)}},function(t,i,r){t.exports={Canvas:r(369),WebGL:r(383)}},function(t,i,r){var o=r(107),a=r(17),h={PipelineManager:r(372),Pipelines:r(1409),RenderTarget:r(141),Utils:r(12),WebGLPipeline:r(58),WebGLRenderer:r(371),WebGLShader:r(375)};h=a(!1,h,o),t.exports=h},function(t,i,r){var o=r(92),a=r(17),h={BitmapMaskPipeline:r(373),Events:r(374),GraphicsPipeline:r(376),LightPipeline:r(377),MultiPipeline:r(108),PointLightPipeline:r(378),PostFXPipeline:r(1410),RopePipeline:r(379),SinglePipeline:r(380),UtilityPipeline:r(381)};h=a(!1,h,o),t.exports=h},function(t,i,r){var o=r(0),a=r(198),h=r(2),l=r(1411),u=r(382),c=r(58),d=new o({Extends:c,initialize:function PostFXPipeline(t){t.renderTarget=h(t,"renderTarget",1),t.fragShader=h(t,"fragShader",l),t.vertShader=h(t,"vertShader",u),t.attributes=h(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.batchSize=1,t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],c.call(this,t),this.isPostFX=!0,this.gameObject,this.colorMatrix=new a,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function boot(){c.prototype.boot.call(this);var t=this.manager.UTILITY_PIPELINE;this.fullFrame1=t.fullFrame1,this.fullFrame2=t.fullFrame2,this.halfFrame1=t.halfFrame1,this.halfFrame2=t.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function onDraw(t){this.bindAndDraw(t)},copyFrame:function copyFrame(t,i,r,o,a){this.manager.copyFrame(t,i,r,o,a)},copyToGame:function copyToGame(t){this.manager.copyToGame(t)},drawFrame:function drawFrame(t,i,r){this.manager.drawFrame(t,i,r,this.colorMatrix)},blendFrames:function blendFrames(t,i,r,o,a){this.manager.blendFrames(t,i,r,o,a)},blendFramesAdditive:function blendFramesAdditive(t,i,r,o,a){this.manager.blendFramesAdditive(t,i,r,o,a)},clearFrame:function clearFrame(t,i){this.manager.clearFrame(t,i)},blitFrame:function blitFrame(t,i,r,o,a,h){this.manager.blitFrame(t,i,r,o,a,h)},copyFrameRect:function copyFrameRect(t,i,r,o,a,h,l,u){this.manager.copyFrameRect(t,i,r,o,a,h,l,u)},bindAndDraw:function bindAndDraw(t,i,r,o,a){void 0===r&&(r=!0),void 0===o&&(o=!0);var h=this.gl,l=this.renderer;this.bind(a),this.set1i("uMainSampler",0),i?(h.viewport(0,0,i.width,i.height),h.bindFramebuffer(h.FRAMEBUFFER,i.framebuffer),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,i.texture,0),r&&(o?h.clearColor(0,0,0,0):h.clearColor(0,0,0,1),h.clear(h.COLOR_BUFFER_BIT))):(l.popFramebuffer(!1,!1,!1),l.currentFramebuffer||h.viewport(0,0,l.width,l.height)),h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,t.texture),h.bufferData(h.ARRAY_BUFFER,this.vertexData,h.STATIC_DRAW),h.drawArrays(h.TRIANGLES,0,6),i?(h.bindTexture(h.TEXTURE_2D,null),h.bindFramebuffer(h.FRAMEBUFFER,null)):l.resetTextures()}});t.exports=d},function(t,i){t.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join("\n")},function(t,i,r){var o=r(17),a=r(201),h={Center:r(403),Events:r(104),Orientation:r(404),ScaleManager:r(415),ScaleModes:r(405),Zoom:r(406)};h=o(!1,h,a.CENTER),h=o(!1,h,a.ORIENTATION),h=o(!1,h,a.SCALE_MODE),h=o(!1,h,a.ZOOM),t.exports=h},function(t,i,r){var o=r(144),a=r(17),h={Events:r(20),GetPhysicsPlugins:r(419),GetScenePlugins:r(420),SceneManager:r(417),ScenePlugin:r(1414),Settings:r(421),Systems:r(204)};h=a(!1,h,o),t.exports=h},function(t,i,r){var o=r(18),a=r(0),h=r(20),l=r(2),u=r(24),c=new a({initialize:function ScenePlugin(t){this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.key=t.sys.settings.key,this.manager=t.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,t.sys.events.once(h.BOOT,this.boot,this),t.sys.events.on(h.START,this.pluginStart,this)},boot:function boot(){this.systems.events.once(h.DESTROY,this.destroy,this)},pluginStart:function pluginStart(){this._target=null,this.systems.events.once(h.SHUTDOWN,this.shutdown,this)},start:function start(t,i){return void 0===t&&(t=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",t,i),this},restart:function restart(t){var i=this.key;return this.manager.queueOp("stop",i),this.manager.queueOp("start",i,t),this},transition:function transition(t){void 0===t&&(t={});var i=l(t,"target",!1),r=this.manager.getScene(i);if(!i||!this.checkValidTransition(r))return!1;var o=l(t,"duration",1e3);this._elapsed=0,this._target=r,this._duration=o,this._willSleep=l(t,"sleep",!1),this._willRemove=l(t,"remove",!1);var a=l(t,"onUpdate",null);a&&(this._onUpdate=a,this._onUpdateScope=l(t,"onUpdateScope",this.scene));var u=l(t,"allowInput",!1);this.settings.transitionAllowInput=u;var c=r.sys.settings;return c.isTransition=!0,c.transitionFrom=this.scene,c.transitionDuration=o,c.transitionAllowInput=u,l(t,"moveAbove",!1)?this.manager.moveAbove(this.key,i):l(t,"moveBelow",!1)&&this.manager.moveBelow(this.key,i),r.sys.isSleeping()?r.sys.wake(l(t,"data")):this.manager.start(i,l(t,"data")),this.systems.events.emit(h.TRANSITION_OUT,r,o),this.systems.events.on(h.UPDATE,this.step,this),!0},checkValidTransition:function checkValidTransition(t){return!(!t||t.sys.isActive()||t.sys.isTransitioning()||t===this.scene||this.systems.isTransitioning())},step:function step(t,i){this._elapsed+=i,this.transitionProgress=o(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function transitionComplete(){var t=this._target.sys,i=this._target.sys.settings;this.systems.events.off(h.UPDATE,this.step,this),t.events.emit(h.TRANSITION_COMPLETE,this.scene),i.isTransition=!1,i.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function add(t,i,r,o){return this.manager.add(t,i,r,o)},launch:function launch(t,i){return t&&t!==this.key&&this.manager.queueOp("start",t,i),this},run:function run(t,i){return t&&t!==this.key&&this.manager.queueOp("run",t,i),this},pause:function pause(t,i){return void 0===t&&(t=this.key),this.manager.queueOp("pause",t,i),this},resume:function resume(t,i){return void 0===t&&(t=this.key),this.manager.queueOp("resume",t,i),this},sleep:function sleep(t,i){return void 0===t&&(t=this.key),this.manager.queueOp("sleep",t,i),this},wake:function wake(t,i){return void 0===t&&(t=this.key),this.manager.queueOp("wake",t,i),this},switch:function _switch(t){return t!==this.key&&this.manager.queueOp("switch",this.key,t),this},stop:function stop(t,i){return void 0===t&&(t=this.key),this.manager.queueOp("stop",t,i),this},setActive:function setActive(t,i,r){void 0===i&&(i=this.key);var o=this.manager.getScene(i);return o&&o.sys.setActive(t,r),this},setVisible:function setVisible(t,i){void 0===i&&(i=this.key);var r=this.manager.getScene(i);return r&&r.sys.setVisible(t),this},isSleeping:function isSleeping(t){return void 0===t&&(t=this.key),this.manager.isSleeping(t)},isActive:function isActive(t){return void 0===t&&(t=this.key),this.manager.isActive(t)},isPaused:function isPaused(t){return void 0===t&&(t=this.key),this.manager.isPaused(t)},isVisible:function isVisible(t){return void 0===t&&(t=this.key),this.manager.isVisible(t)},swapPosition:function swapPosition(t,i){return void 0===i&&(i=this.key),t!==i&&this.manager.swapPosition(t,i),this},moveAbove:function moveAbove(t,i){return void 0===i&&(i=this.key),t!==i&&this.manager.moveAbove(t,i),this},moveBelow:function moveBelow(t,i){return void 0===i&&(i=this.key),t!==i&&this.manager.moveBelow(t,i),this},remove:function remove(t){return void 0===t&&(t=this.key),this.manager.remove(t),this},moveUp:function moveUp(t){return void 0===t&&(t=this.key),this.manager.moveUp(t),this},moveDown:function moveDown(t){return void 0===t&&(t=this.key),this.manager.moveDown(t),this},bringToTop:function bringToTop(t){return void 0===t&&(t=this.key),this.manager.bringToTop(t),this},sendToBack:function sendToBack(t){return void 0===t&&(t=this.key),this.manager.sendToBack(t),this},get:function get(t){return this.manager.getScene(t)},getIndex:function getIndex(t){return void 0===t&&(t=this.key),this.manager.getIndex(t)},shutdown:function shutdown(){var t=this.systems.events;t.off(h.SHUTDOWN,this.shutdown,this),t.off(h.POST_UPDATE,this.step,this),t.off(h.TRANSITION_OUT)},destroy:function destroy(){this.shutdown(),this.scene.sys.events.off(h.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});u.register("ScenePlugin",c,"scenePlugin"),t.exports=c},function(t,i,r){t.exports={Events:r(438),List:r(110),Map:r(102),ProcessQueue:r(211),RTree:r(531),Set:r(149),Size:r(416)}},function(t,i,r){var o=r(17),a=r(1417),h={CanvasTexture:r(423),Events:r(106),FilterMode:a,Frame:r(109),Parsers:r(425),Texture:r(206),TextureManager:r(422),TextureSource:r(424)};h=o(!1,h,a),t.exports=h},function(t,i){t.exports={LINEAR:0,NEAREST:1}},function(t,i,r){var o=r(17),a=r(1419),h={Components:r(251),Parsers:r(1452),Formats:r(40),ImageCollection:r(576),ParseToTilemap:r(262),Tile:r(85),Tilemap:r(580),TilemapCreator:r(1459),TilemapFactory:r(1460),Tileset:r(122),TilemapLayer:r(581),Orientation:r(29),LayerData:r(120),MapData:r(121),ObjectLayer:r(572)};h=o(!1,h,a.ORIENTATION),t.exports=h},function(t,i,r){var o={ORIENTATION:r(29)};t.exports=o},function(t,i,r){var o=r(26),a=r(63);t.exports=function Copy(t,i,r,h,l,u,c,d){void 0===c&&(c=!0),t<0&&(t=0),i<0&&(i=0);for(var p=o(t,i,r,h,null,d),g=l-t,v=u-i,m=0;m<p.length;m++){var y=p[m].x+g,T=p[m].y+v;y>=0&&y<d.width&&T>=0&&T<d.height&&d.data[T][y]&&d.data[T][y].copy(p[m])}c&&a(l-1,u-1,r+2,h+2,d)}},function(t,i,r){var o=r(26),a=r(542);t.exports=function CreateFromTiles(t,i,r,h,l,u){r||(r={}),Array.isArray(t)||(t=[t]);var c=u.tilemapLayer;h||(h=c.scene),l||(l=h.cameras.main);var d,p=o(0,0,u.width,u.height,null,u),g=[];for(d=0;d<p.length;d++){var v=p[d];if(-1!==t.indexOf(v.index)){var m=c.tileToWorldXY(v.x,v.y,void 0,l,u);r.x=m.x,r.y=m.y,g.push(h.make.sprite(r))}}if("number"==typeof i)for(d=0;d<t.length;d++)a(t[d],i,0,0,u.width,u.height,u);else if(Array.isArray(i))for(d=0;d<t.length;d++)a(t[d],i[d],0,0,u.width,u.height,u);return g}},function(t,i,r){var o=r(26),a=r(63),h=r(72);t.exports=function Fill(t,i,r,l,u,c,d){for(var p=-1!==d.collideIndexes.indexOf(t),g=o(i,r,l,u,null,d),v=0;v<g.length;v++)g[v].index=t,h(g[v],p);c&&a(i-1,r-1,l+2,u+2,d)}},function(t,i,r){var o=r(26);t.exports=function FilterTiles(t,i,r,a,h,l,u,c){return o(r,a,h,l,u,c).filter(t,i)}},function(t,i){t.exports=function FindByIndex(t,i,r,o){void 0===i&&(i=0),void 0===r&&(r=!1);var a,h,l,u=0;if(r){for(h=o.height-1;h>=0;h--)for(a=o.width-1;a>=0;a--)if((l=o.data[h][a])&&l.index===t){if(u===i)return l;u+=1}}else for(h=0;h<o.height;h++)for(a=0;a<o.width;a++)if((l=o.data[h][a])&&l.index===t){if(u===i)return l;u+=1}return null}},function(t,i,r){var o=r(26);t.exports=function FindTile(t,i,r,a,h,l,u,c){return o(r,a,h,l,u,c).find(t,i)||null}},function(t,i,r){var o=r(26);t.exports=function ForEachTile(t,i,r,a,h,l,u,c){o(r,a,h,l,u,c).forEach(t,i)}},function(t,i,r){var o=r(29),a=r(544),h=r(545),l=r(547),u=r(1),c=r(548);t.exports=function GetCullTilesFunction(t){return t===o.ORTHOGONAL?a:t===o.HEXAGONAL?h:t===o.STAGGERED?c:t===o.ISOMETRIC?l:u}},function(t,i,r){var o=r(158),a=new(r(3));t.exports=function GetTileAtWorldXY(t,i,r,h,l){return l.tilemapLayer.worldToTileXY(t,i,!0,a,h),o(a.x,a.y,r,l)}},function(t,i,r){var o=r(483),a=r(26),h=r(484),l=r(1),u=r(3),c=function TriangleToRectangle(t,i){return h.RectangleToTriangle(i,t)},d=new u,p=new u,g=new u;t.exports=function GetTilesWithinShape(t,i,r,u){if(void 0===t)return[];var v=l;t instanceof o.Circle?v=h.CircleToRectangle:t instanceof o.Rectangle?v=h.RectangleToRectangle:t instanceof o.Triangle?v=c:t instanceof o.Line&&(v=h.LineToRectangle),u.tilemapLayer.worldToTileXY(t.left,t.top,!0,p,r);var m=p.x,y=p.y;u.tilemapLayer.worldToTileXY(t.right,t.bottom,!0,g,r);var T=Math.ceil(g.x),S=Math.ceil(g.y),w=Math.max(T-m,1),b=Math.max(S-y,1),C=a(m,y,w,b,i,u),A=u.tileWidth,E=u.tileHeight;u.tilemapLayer&&(A*=u.tilemapLayer.scaleX,E*=u.tilemapLayer.scaleY);for(var M=[],_=new o.Rectangle(0,0,A,E),R=0;R<C.length;R++){var P=C[R];u.tilemapLayer.tileToWorldXY(P.x,P.y,d,r),_.x=d.x,_.y=d.y,v(t,_)&&M.push(P)}return M}},function(t,i,r){var o=r(29),a=r(1),h=r(253);t.exports=function GetTileToWorldXFunction(t){return t===o.ORTHOGONAL?h:a}},function(t,i,r){var o=r(29),a=r(550),h=r(551),l=r(1),u=r(552),c=r(553);t.exports=function GetTileToWorldXYFunction(t){return t===o.ORTHOGONAL?c:t===o.ISOMETRIC?h:t===o.HEXAGONAL?a:t===o.STAGGERED?u:l}},function(t,i,r){var o=r(29),a=r(554),h=r(1),l=r(555),u=r(254);t.exports=function GetTileToWorldYFunction(t){return t===o.ORTHOGONAL?u:t===o.HEXAGONAL?a:t===o.STAGGERED?l:h}},function(t,i,r){var o=r(29),a=r(1),h=r(255);t.exports=function GetWorldToTileXFunction(t){return t===o.ORTHOGONAL?h:a}},function(t,i,r){var o=r(29),a=r(556),h=r(557),l=r(1),u=r(558),c=r(559);t.exports=function GetWorldToTileXYFunction(t){return t===o.ORTHOGONAL?c:t===o.ISOMETRIC?h:t===o.HEXAGONAL?a:t===o.STAGGERED?u:l}},function(t,i,r){var o=r(29),a=r(560),h=r(1),l=r(561),u=r(256);t.exports=function GetWorldToTileYFunction(t){return t===o.ORTHOGONAL?u:t===o.HEXAGONAL?a:t===o.STAGGERED?l:h}},function(t,i,r){var o=r(562),a=new(r(3));t.exports=function HasTileAtWorldXY(t,i,r,h){h.tilemapLayer.worldToTileXY(t,i,!0,a,r);var l=a.x,u=a.y;return o(l,u,h)}},function(t,i,r){var o=r(257),a=new(r(3));t.exports=function PutTileAtWorldXY(t,i,r,h,l,u){return u.tilemapLayer.worldToTileXY(i,r,!0,a,l,u),o(t,a.x,a.y,h,u)}},function(t,i,r){var o=r(63),a=r(257);t.exports=function PutTilesAt(t,i,r,h,l){if(void 0===h&&(h=!0),!Array.isArray(t))return null;Array.isArray(t[0])||(t=[t]);for(var u=t.length,c=t[0].length,d=0;d<u;d++)for(var p=0;p<c;p++){var g=t[d][p];a(g,i+p,r+d,!1,l)}h&&o(i-1,r-1,c+2,u+2,l)}},function(t,i,r){var o=r(26),a=r(210);t.exports=function Randomize(t,i,r,h,l,u){var c,d=o(t,i,r,h,{},u);if(!l)for(l=[],c=0;c<d.length;c++)-1===l.indexOf(d[c].index)&&l.push(d[c].index);for(c=0;c<d.length;c++)d[c].index=a(l)}},function(t,i,r){var o=r(563),a=new(r(3));t.exports=function RemoveTileAtWorldXY(t,i,r,h,l,u){return u.tilemapLayer.worldToTileXY(t,i,!0,a,l,u),o(a.x,a.y,r,h,u)}},function(t,i,r){var o=r(26),a=r(397),h=new a(105,210,231,150),l=new a(243,134,48,200),u=new a(40,39,37,150);t.exports=function RenderDebug(t,i,r){void 0===i&&(i={});var a=void 0!==i.tileColor?i.tileColor:h,c=void 0!==i.collidingTileColor?i.collidingTileColor:l,d=void 0!==i.faceColor?i.faceColor:u,p=o(0,0,r.width,r.height,null,r);t.translateCanvas(r.tilemapLayer.x,r.tilemapLayer.y),t.scaleCanvas(r.tilemapLayer.scaleX,r.tilemapLayer.scaleY);for(var g=0;g<p.length;g++){var v=p[g],m=v.width,y=v.height,T=v.pixelX,S=v.pixelY,w=v.collides?c:a;null!==w&&(t.fillStyle(w.color,w.alpha/255),t.fillRect(T,S,m,y)),T+=1,S+=1,m-=2,y-=2,null!==d&&(t.lineStyle(1,d.color,d.alpha/255),v.faceTop&&t.lineBetween(T,S,T+m,S),v.faceRight&&t.lineBetween(T+m,S,T+m,S+y),v.faceBottom&&t.lineBetween(T,S+y,T+m,S+y),v.faceLeft&&t.lineBetween(T,S,T,S+y))}}},function(t,i,r){var o=r(72),a=r(63),h=r(160);t.exports=function SetCollision(t,i,r,l,u){void 0===i&&(i=!0),void 0===r&&(r=!0),void 0===u&&(u=!0),Array.isArray(t)||(t=[t]);for(var c=0;c<t.length;c++)h(t[c],i,l);if(u)for(var d=0;d<l.height;d++)for(var p=0;p<l.width;p++){var g=l.data[d][p];g&&-1!==t.indexOf(g.index)&&o(g,i)}r&&a(0,0,l.width,l.height,l)}},function(t,i,r){var o=r(72),a=r(63),h=r(160);t.exports=function SetCollisionBetween(t,i,r,l,u,c){if(void 0===r&&(r=!0),void 0===l&&(l=!0),void 0===c&&(c=!0),!(t>i)){for(var d=t;d<=i;d++)h(d,r,u);if(c)for(var p=0;p<u.height;p++)for(var g=0;g<u.width;g++){var v=u.data[p][g];v&&v.index>=t&&v.index<=i&&o(v,r)}l&&a(0,0,u.width,u.height,u)}}},function(t,i,r){var o=r(72),a=r(63),h=r(160);t.exports=function SetCollisionByExclusion(t,i,r,l){void 0===i&&(i=!0),void 0===r&&(r=!0),Array.isArray(t)||(t=[t]);for(var u=0;u<l.height;u++)for(var c=0;c<l.width;c++){var d=l.data[u][c];d&&-1===t.indexOf(d.index)&&(o(d,i),h(d.index,i,l))}r&&a(0,0,l.width,l.height,l)}},function(t,i,r){var o=r(72),a=r(63),h=r(126);t.exports=function SetCollisionByProperty(t,i,r,l){void 0===i&&(i=!0),void 0===r&&(r=!0);for(var u=0;u<l.height;u++)for(var c=0;c<l.width;c++){var d=l.data[u][c];if(d)for(var p in t)if(h(d.properties,p)){var g=t[p];Array.isArray(g)||(g=[g]);for(var v=0;v<g.length;v++)d.properties[p]===g[v]&&o(d,i)}}r&&a(0,0,l.width,l.height,l)}},function(t,i,r){var o=r(72),a=r(63);t.exports=function SetCollisionFromCollisionGroup(t,i,r){void 0===t&&(t=!0),void 0===i&&(i=!0);for(var h=0;h<r.height;h++)for(var l=0;l<r.width;l++){var u=r.data[h][l];if(u){var c=u.getCollisionGroup();c&&c.objects&&c.objects.length>0&&o(u,t)}}i&&a(0,0,r.width,r.height,r)}},function(t,i){t.exports=function SetTileIndexCallback(t,i,r,o){if("number"==typeof t)o.callbacks[t]=null!==i?{callback:i,callbackContext:r}:void 0;else for(var a=0,h=t.length;a<h;a++)o.callbacks[t[a]]=null!==i?{callback:i,callbackContext:r}:void 0}},function(t,i,r){var o=r(26);t.exports=function SetTileLocationCallback(t,i,r,a,h,l,u){for(var c=o(t,i,r,a,null,u),d=0;d<c.length;d++)c[d].setCollisionCallback(h,l)}},function(t,i,r){var o=r(26),a=r(131);t.exports=function Shuffle(t,i,r,h,l){var u=o(t,i,r,h,null,l),c=u.map((function(t){return t.index}));a(c);for(var d=0;d<u.length;d++)u[d].index=c[d]}},function(t,i,r){var o=r(26);t.exports=function SwapByIndex(t,i,r,a,h,l,u){for(var c=o(r,a,h,l,null,u),d=0;d<c.length;d++)c[d]&&(c[d].index===t?c[d].index=i:c[d].index===i&&(c[d].index=t))}},function(t,i,r){var o=r(26);t.exports=function WeightedRandomize(t,i,r,a,h,l){if(h){var u,c=o(t,i,r,a,null,l),d=0;for(u=0;u<h.length;u++)d+=h[u].weight;if(!(d<=0))for(u=0;u<c.length;u++){for(var p=Math.random()*d,g=0,v=-1,m=0;m<h.length;m++)if(p<=(g+=h[m].weight)){var y=h[m].index;v=Array.isArray(y)?y[Math.floor(Math.random()*y.length)]:y;break}c[u].index=v}}}},function(t,i,r){t.exports={FromOrientationString:r(258),Parse:r(564),Parse2DArray:r(259),ParseCSV:r(565),Impact:r(1454),Tiled:r(1455)}},function(t,i){t.exports=function ParseWangsets(t,i){for(var r=0;r<t.length;r++){var o=t[r],a=r;if(o.name&&""!==o.name&&(a=o.name),Array.isArray(o.wangtiles)&&o.wangtiles.length>0){var h,l,u,c={},d={};if(Array.isArray(o.edgecolors))for(h=0;h<o.edgecolors.length;h++)u=1+h,""!==(l=o.edgecolors[h]).name&&(c[u]=l.name);if(Array.isArray(o.cornercolors))for(h=0;h<o.cornercolors.length;h++)u=1+h,""!==(l=o.cornercolors[h]).name&&(d[u]=l.name);if(Array.isArray(o.colors))for(h=0;h<o.colors.length;h++)u=1+h,""!==(l=o.colors[h]).name&&(c[u]=d[u]=l.name);for(var p=[c,d,c,d,c,d,c,d],g=0;g<o.wangtiles.length;g++){var v=o.wangtiles[g],m=i[v.tileid]||(i[v.tileid]={});m=m.wangid||(m.wangid={});for(var y=[],T=0;T<Math.min(p.length,v.wangid.length);T++)if(0!==(l=v.wangid[T])){var S=p[T][l];void 0===S?y.push(l):y.push(S)}else y.push(void 0);m[a]=y}}}}},function(t,i,r){t.exports={ParseTileLayers:r(578),ParseTilesets:r(579),ParseWeltmeister:r(577)}},function(t,i,r){t.exports={AssignTileProperties:r(567),Base64Decode:r(574),BuildTilesetIndex:r(568),CreateGroupLayer:r(161),ParseGID:r(261),ParseImageLayers:r(569),ParseJSONTiled:r(566),ParseObject:r(260),ParseObjectLayers:r(570),ParseTileLayers:r(573),ParseTilesets:r(575)}},function(t,i,r){var o=r(1),a=r(1);o=r(1457),a=r(1458),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i,r){var o=r(12);t.exports=function TilemapLayerWebGLRenderer(t,i,r){var a=i.cull(r),h=a.length,l=r.alpha*i.alpha;if(!(0===h||l<=0)){var u=i.gidMap,c=t.pipelines.set(i.pipeline,i),d=o.getTintAppendFloatAlpha,p=i.scrollFactorX,g=i.scrollFactorY,v=i.x,m=i.y,y=i.scaleX,T=i.scaleY;t.pipelines.preBatch(i);for(var S=0;S<h;S++){var w=a[S],b=u[w.index];if(b){var C=b.getTileTextureCoordinates(w.index);if(null!==C){var A=b.glTexture,E=c.setTexture2D(A,i),M=b.tileWidth,_=b.tileHeight,R=C.x,P=C.y,k=.5*b.tileWidth,O=.5*b.tileHeight,L=d(w.tint,l*w.alpha);c.batchTexture(i,A,A.width,A.height,v+(k+w.pixelX)*y,m+(O+w.pixelY)*T,w.width,w.height,y,T,w.rotation,w.flipX,w.flipY,p,g,k,O,R,P,M,_,L,L,L,L,!1,0,0,r,null,!0,E)}}}t.pipelines.postBatch(i)}}},function(t,i,r){var o=r(25),a=new o,h=new o,l=new o;t.exports=function TilemapLayerCanvasRenderer(t,i,r,o){var u=i.cull(r),c=u.length,d=r.alpha*i.alpha;if(!(0===c||d<=0)){var p=a,g=h,v=l;g.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY),p.copyFrom(r.matrix);var m=t.currentContext,y=i.gidMap;m.save(),o?(p.multiplyWithOffset(o,-r.scrollX*i.scrollFactorX,-r.scrollY*i.scrollFactorY),g.e=i.x,g.f=i.y,p.multiply(g,v),v.copyToContext(m)):(g.e-=r.scrollX*i.scrollFactorX,g.f-=r.scrollY*i.scrollFactorY,g.copyToContext(m)),(!t.antialias||i.scaleX>1||i.scaleY>1)&&(m.imageSmoothingEnabled=!1);for(var T=0;T<c;T++){var S=u[T],w=y[S.index];if(w){var b=w.image.getSourceImage(),C=w.getTileTextureCoordinates(S.index);if(null!==C){var A=w.tileWidth,E=w.tileHeight,M=.5*A,_=.5*E;m.save(),m.translate(S.pixelX+M,S.pixelY+_),0!==S.rotation&&m.rotate(S.rotation),(S.flipX||S.flipY)&&m.scale(S.flipX?-1:1,S.flipY?-1:1),m.globalAlpha=d*S.alpha,m.drawImage(b,C.x,C.y,A,E,-M,-_,A,E),m.restore()}}}m.restore()}}},function(t,i,r){var o=r(16),a=r(262);o.register("tilemap",(function(t){var i=void 0!==t?t:{};return a(this.scene,i.key,i.tileWidth,i.tileHeight,i.width,i.height,i.data,i.insertNull)}))},function(t,i,r){var o=r(5),a=r(262);o.register("tilemap",(function(t,i,r,o,h,l,u){return null===t&&(t=void 0),null===i&&(i=void 0),null===r&&(r=void 0),null===o&&(o=void 0),null===h&&(h=void 0),a(this.scene,t,i,r,o,h,l,u)}))},function(t,i,r){t.exports={Clock:r(1462),TimerEvent:r(582)}},function(t,i,r){var o=r(0),a=r(24),h=r(20),l=r(582),u=r(93),c=new o({initialize:function Clock(t){this.scene=t,this.systems=t.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],t.sys.events.once(h.BOOT,this.boot,this),t.sys.events.on(h.START,this.start,this)},boot:function boot(){this.now=this.systems.game.loop.time,this.systems.events.once(h.DESTROY,this.destroy,this)},start:function start(){var t=this.systems.events;t.on(h.PRE_UPDATE,this.preUpdate,this),t.on(h.UPDATE,this.update,this),t.once(h.SHUTDOWN,this.shutdown,this)},addEvent:function addEvent(t){var i;return t instanceof l?(i=t,this.removeEvent(i),i.elapsed=i.startAt,i.hasDispatched=!1,i.repeatCount=-1===i.repeat||i.loop?999999999999:i.repeat):i=new l(t),this._pendingInsertion.push(i),i},delayedCall:function delayedCall(t,i,r,o){return this.addEvent({delay:t,callback:i,args:r,callbackScope:o})},clearPendingEvents:function clearPendingEvents(){return this._pendingInsertion=[],this},removeEvent:function removeEvent(t){Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var r=t[i];u(this._pendingRemoval,r),u(this._pendingInsertion,r),u(this._active,r)}return this},removeAllEvents:function removeAllEvents(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function preUpdate(){var t=this._pendingRemoval.length,i=this._pendingInsertion.length;if(0!==t||0!==i){var r,o;for(r=0;r<t;r++){o=this._pendingRemoval[r];var a=this._active.indexOf(o);a>-1&&this._active.splice(a,1),o.destroy()}for(r=0;r<i;r++)o=this._pendingInsertion[r],this._active.push(o);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function update(t,i){if(this.now=t,!this.paused){i*=this.timeScale;for(var r=0;r<this._active.length;r++){var o=this._active[r];if(!o.paused&&(o.elapsed+=i*o.timeScale,o.elapsed>=o.delay)){var a=o.elapsed-o.delay;o.elapsed=o.delay,!o.hasDispatched&&o.callback&&(o.hasDispatched=!0,o.callback.apply(o.callbackScope,o.args)),o.repeatCount>0?(o.repeatCount--,o.elapsed=a,o.hasDispatched=!1):this._pendingRemoval.push(o)}}}},shutdown:function shutdown(){var t;for(t=0;t<this._pendingInsertion.length;t++)this._pendingInsertion[t].destroy();for(t=0;t<this._active.length;t++)this._active[t].destroy();for(t=0;t<this._pendingRemoval.length;t++)this._pendingRemoval[t].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var i=this.systems.events;i.off(h.PRE_UPDATE,this.preUpdate,this),i.off(h.UPDATE,this.update,this),i.off(h.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown(),this.scene.sys.events.off(h.START,this.start,this),this.scene=null,this.systems=null}});a.register("Clock",c,"time"),t.exports=c},function(t,i,r){var o=r(100),a=r(17),h={Builders:r(1464),Events:r(267),TweenManager:r(1480),Tween:r(266),TweenData:r(268),Timeline:r(588)};h=a(!1,h,o),t.exports=h},function(t,i,r){t.exports={GetBoolean:r(99),GetEaseFunction:r(80),GetNewValue:r(162),GetProps:r(583),GetTargets:r(263),GetTweens:r(584),GetValueOp:r(264),NumberTweenBuilder:r(585),StaggerBuilder:r(586),TimelineBuilder:r(587),TweenBuilder:r(163)}},function(t,i){t.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(t,i){t.exports="complete"},function(t,i){t.exports="loop"},function(t,i){t.exports="pause"},function(t,i){t.exports="resume"},function(t,i){t.exports="start"},function(t,i){t.exports="update"},function(t,i){t.exports="active"},function(t,i){t.exports="complete"},function(t,i){t.exports="loop"},function(t,i){t.exports="repeat"},function(t,i){t.exports="start"},function(t,i){t.exports="stop"},function(t,i){t.exports="update"},function(t,i){t.exports="yoyo"},function(t,i,r){var o=r(93),a=r(0),h=r(585),l=r(24),u=r(20),c=r(586),d=r(587),p=r(100),g=r(163),v=new a({initialize:function TweenManager(t){this.scene=t,this.systems=t.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,t.sys.events.once(u.BOOT,this.boot,this),t.sys.events.on(u.START,this.start,this)},boot:function boot(){this.systems.events.once(u.DESTROY,this.destroy,this)},start:function start(){var t=this.systems.events;t.on(u.PRE_UPDATE,this.preUpdate,this),t.on(u.UPDATE,this.update,this),t.once(u.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function createTimeline(t){return d(this,t)},timeline:function timeline(t){var timeline=d(this,t);return timeline.paused||(this._add.push(timeline),this._toProcess++),timeline},create:function create(t){return g(this,t)},add:function add(t){var i=g(this,t);return this._add.push(i),this._toProcess++,i},existing:function existing(t){return this._add.push(t),this._toProcess++,this},addCounter:function addCounter(t){var i=h(this,t);return this._add.push(i),this._toProcess++,i},stagger:function stagger(t,i){return c(t,i)},preUpdate:function preUpdate(){if(0!==this._toProcess){var t,i,r=this._destroy,o=this._active,a=this._pending;for(t=0;t<r.length;t++){i=r[t];var h=o.indexOf(i);-1===h?(h=a.indexOf(i))>-1&&(i.state=p.REMOVED,a.splice(h,1)):(i.state=p.REMOVED,o.splice(h,1))}for(r.length=0,r=this._add,t=0;t<r.length;t++)(i=r[t]).state===p.PENDING_ADD&&(i.init()?(i.play(),this._active.push(i)):this._pending.push(i));r.length=0,this._toProcess=0}},update:function update(t,i){var r,o=this._active;i*=this.timeScale;for(var a=0;a<o.length;a++)(r=o[a]).update(t,i)&&(this._destroy.push(r),this._toProcess++)},remove:function remove(t){return o(this._add,t),o(this._pending,t),o(this._active,t),o(this._destroy,t),t.state=p.REMOVED,this},makeActive:function makeActive(t){if(-1!==this._add.indexOf(t)||-1!==this._active.indexOf(t))return this;var i=this._pending.indexOf(t);return-1!==i&&this._pending.splice(i,1),this._add.push(t),t.state=p.PENDING_ADD,this._toProcess++,this},each:function each(t,i){for(var r=[null],o=1;o<arguments.length;o++)r.push(arguments[o]);for(var a in this.list)r[0]=this.list[a],t.apply(i,r)},getAllTweens:function getAllTweens(){for(var t=this._active,i=[],r=0;r<t.length;r++)i.push(t[r]);return i},getGlobalTimeScale:function getGlobalTimeScale(){return this.timeScale},getTweensOf:function getTweensOf(t,i){void 0===i&&(i=!1);var r,o,a,h=this._active,l=[];for(Array.isArray(t)||(t=[t]),o=0;o<h.length;o++)for(r=h[o],a=0;a<t.length;a++)r.hasTarget(t[a])&&l.push(r);if(i)for(h=this._pending,o=0;o<h.length;o++)for(r=h[o],a=0;a<t.length;a++)r.hasTarget(t[a])&&l.push(r);return l},isTweening:function isTweening(t){for(var i,r=this._active,o=0;o<r.length;o++)if((i=r[o]).hasTarget(t)&&i.isPlaying())return!0;return!1},killAll:function killAll(){for(var t=this.getAllTweens(),i=0;i<t.length;i++)t[i].stop();return this},killTweensOf:function killTweensOf(t){for(var i=this.getTweensOf(t),r=0;r<i.length;r++)i[r].stop();return this},pauseAll:function pauseAll(){for(var t=this._active,i=0;i<t.length;i++)t[i].pause();return this},resumeAll:function resumeAll(){for(var t=this._active,i=0;i<t.length;i++)t[i].resume();return this},setGlobalTimeScale:function setGlobalTimeScale(t){return this.timeScale=t,this},shutdown:function shutdown(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var t=this.systems.events;t.off(u.PRE_UPDATE,this.preUpdate,this),t.off(u.UPDATE,this.update,this),t.off(u.SHUTDOWN,this.shutdown,this)},destroy:function destroy(){this.shutdown(),this.scene.sys.events.off(u.START,this.start,this),this.scene=null,this.systems=null}});l.register("TweenManager",v,"tweens"),t.exports=v},function(t,i,r){t.exports={Array:r(208),Base64:r(1482),Objects:r(1484),String:r(1488),NOOP:r(1)}},function(t,i,r){t.exports={ArrayBufferToBase64:r(1483),Base64ToArrayBuffer:r(433)}},function(t,i){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";t.exports=function ArrayBufferToBase64(t,i){for(var o=new Uint8Array(t),a=o.length,h=i?"data:"+i+";base64,":"",l=0;l<a;l+=3)h+=r[o[l]>>2],h+=r[(3&o[l])<<4|o[l+1]>>4],h+=r[(15&o[l+1])<<2|o[l+2]>>6],h+=r[63&o[l+2]];return a%3==2?h=h.substring(0,h.length-1)+"=":a%3==1&&(h=h.substring(0,h.length-2)+"=="),h}},function(t,i,r){t.exports={Clone:r(77),DeepCopy:r(175),Extend:r(17),GetAdvancedValue:r(13),GetFastValue:r(2),GetMinMaxValue:r(1485),GetValue:r(6),HasAll:r(1486),HasAny:r(455),HasValue:r(126),IsPlainObject:r(7),Merge:r(127),MergeRight:r(1487),Pick:r(571),SetValue:r(478)}},function(t,i,r){var o=r(6),a=r(18);t.exports=function GetMinMaxValue(t,i,r,h,l){void 0===l&&(l=r);var u=o(t,i,l);return a(u,r,h)}},function(t,i){t.exports=function HasAll(t,i){for(var r=0;r<i.length;r++)if(!t.hasOwnProperty(i[r]))return!1;return!0}},function(t,i,r){var o=r(77);t.exports=function MergeRight(t,i){var r=o(t);for(var a in i)r.hasOwnProperty(a)&&(r[a]=i[a]);return r}},function(t,i,r){t.exports={Format:r(1489),Pad:r(186),RemoveAt:r(1490),Reverse:r(1491),UppercaseFirst:r(205),UUID:r(222)}},function(t,i){t.exports=function Format(t,i){return t.replace(/%([0-9]+)/g,(function(t,r){return i[Number(r)-1]}))}},function(t,i){t.exports=function RemoveAt(t,i){return 0===i?t.slice(1):t.slice(0,i-1)+t.slice(i)}},function(t,i){t.exports=function Reverse(t){return t.split("").reverse().join("")}},function(t,i,r){t.exports={SoundManagerCreator:r(426),Events:r(70),BaseSound:r(146),BaseSoundManager:r(145),WebAudioSound:r(434),WebAudioSoundManager:r(432),HTML5AudioSound:r(429),HTML5AudioSoundManager:r(427),NoAudioSound:r(431),NoAudioSoundManager:r(430)}},function(t,i,r){t.exports={Arcade:r(1366),Matter:r(1494)}},function(t,i,r){t.exports={BodyBounds:r(1392),Components:r(249),Events:r(272),Factory:r(1394),MatterGameObject:r(1395),Image:r(1396),Matter:r(594),MatterPhysics:r(1524),PolyDecomp:r(1393),Sprite:r(1397),TileBody:r(593),PhysicsEditorParser:r(589),PhysicsJSONParser:r(590),PointerConstraint:r(1398),World:r(1402)}},function(t,i){t.exports={setBounce:function setBounce(t){return this.body.restitution=t,this}}},function(t,i){var r={setCollisionCategory:function setCollisionCategory(t){return this.body.collisionFilter.category=t,this},setCollisionGroup:function setCollisionGroup(t){return this.body.collisionFilter.group=t,this},setCollidesWith:function setCollidesWith(t){var i=0;if(Array.isArray(t))for(var r=0;r<t.length;r++)i|=t[r];else i=t;return this.body.collisionFilter.mask=i,this},setOnCollide:function setOnCollide(t){return this.body.onCollideCallback=t,this},setOnCollideEnd:function setOnCollideEnd(t){return this.body.onCollideEndCallback=t,this},setOnCollideActive:function setOnCollideActive(t){return this.body.onCollideActiveCallback=t,this},setOnCollideWith:function setOnCollideWith(t,i){Array.isArray(t)||(t=[t]);for(var r=0;r<t.length;r++){var o=t[r].hasOwnProperty("body")?t[r].body:t[r];this.body.setOnCollideWith(o,i)}return this}};t.exports=r},function(t,i,r){var o=r(41),a={applyForce:function applyForce(t){return this._tempVec2.set(this.body.position.x,this.body.position.y),o.applyForce(this.body,this._tempVec2,t),this},applyForceFrom:function applyForceFrom(t,i){return o.applyForce(this.body,t,i),this},thrust:function thrust(t){var i=this.body.angle;return this._tempVec2.set(t*Math.cos(i),t*Math.sin(i)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function thrustLeft(t){var i=this.body.angle-Math.PI/2;return this._tempVec2.set(t*Math.cos(i),t*Math.sin(i)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function thrustRight(t){var i=this.body.angle+Math.PI/2;return this._tempVec2.set(t*Math.cos(i),t*Math.sin(i)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function thrustBack(t){var i=this.body.angle-Math.PI;return this._tempVec2.set(t*Math.cos(i),t*Math.sin(i)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};t.exports=a},function(t,i){var r={setFriction:function setFriction(t,i,r){return this.body.friction=t,void 0!==i&&(this.body.frictionAir=i),void 0!==r&&(this.body.frictionStatic=r),this},setFrictionAir:function setFrictionAir(t){return this.body.frictionAir=t,this},setFrictionStatic:function setFrictionStatic(t){return this.body.frictionStatic=t,this}};t.exports=r},function(t,i){t.exports={setIgnoreGravity:function setIgnoreGravity(t){return this.body.ignoreGravity=t,this}}},function(t,i,r){var o=r(41),a=r(3),h={setMass:function setMass(t){return o.setMass(this.body,t),this},setDensity:function setDensity(t){return o.setDensity(this.body,t),this},centerOfMass:{get:function get(){return new a(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};t.exports=h},function(t,i){t.exports={setSensor:function setSensor(t){return this.body.isSensor=t,this},isSensor:function isSensor(){return this.body.isSensor}}},function(t,i,r){var o=r(86),a=r(41),h=r(124),l=r(2),u=r(589),c=r(590),d=r(64),p={setRectangle:function setRectangle(t,i,r){return this.setBody({type:"rectangle",width:t,height:i},r)},setCircle:function setCircle(t,i){return this.setBody({type:"circle",radius:t},i)},setPolygon:function setPolygon(t,i,r){return this.setBody({type:"polygon",sides:i,radius:t},r)},setTrapezoid:function setTrapezoid(t,i,r,o){return this.setBody({type:"trapezoid",width:t,height:i,slope:r},o)},setExistingBody:function setExistingBody(t,i){void 0===i&&(i=!0),this.body&&this.world.remove(this.body,!0),this.body=t;for(var r=0;r<t.parts.length;r++)t.parts[r].gameObject=this;var o=this;if(t.destroy=function destroy(){o.world.remove(o.body,!0),o.body.gameObject=null},i&&(this.world.has(t)&&this.world.remove(t,!0),this.world.add(t)),this._originComponent){var a=t.render.sprite.xOffset,l=t.render.sprite.yOffset,u=t.centerOfMass.x,c=t.centerOfMass.y;if(h(u,.5)&&h(c,.5))this.setOrigin(a+.5,l+.5);else{var d=t.centerOffset.x,p=t.centerOffset.y;this.setOrigin(a+d/this.displayWidth,l+p/this.displayHeight)}}return this},setBody:function setBody(t,i){if(!t)return this;var r;"string"==typeof t&&(t={type:t});var h=l(t,"type","rectangle"),p=l(t,"x",this._tempVec2.x),g=l(t,"y",this._tempVec2.y),v=l(t,"width",this.width),m=l(t,"height",this.height);switch(h){case"rectangle":r=o.rectangle(p,g,v,m,i);break;case"circle":var y=l(t,"radius",Math.max(v,m)/2),T=l(t,"maxSides",25);r=o.circle(p,g,y,i,T);break;case"trapezoid":var S=l(t,"slope",.5);r=o.trapezoid(p,g,v,m,S,i);break;case"polygon":var w=l(t,"sides",5),b=l(t,"radius",Math.max(v,m)/2);r=o.polygon(p,g,w,b,i);break;case"fromVertices":case"fromVerts":var C=l(t,"verts",null);if(C)if("string"==typeof C&&(C=d.fromPath(C)),this.body&&!this.body.hasOwnProperty("temp"))a.setVertices(this.body,C),r=this.body;else{var A=l(t,"flagInternal",!1),E=l(t,"removeCollinear",.01),M=l(t,"minimumArea",10);r=o.fromVertices(p,g,C,i,A,E,M)}break;case"fromPhysicsEditor":r=u.parseBody(p,g,t,i);break;case"fromPhysicsTracer":r=c.parseBody(p,g,t,i)}return r&&this.setExistingBody(r,t.addToWorld),this}};t.exports=p},function(t,i,r){var o=r(272),a=r(165),h=r(166),l={setToSleep:function setToSleep(){return a.set(this.body,!0),this},setAwake:function setAwake(){return a.set(this.body,!1),this},setSleepThreshold:function setSleepThreshold(t){return void 0===t&&(t=60),this.body.sleepThreshold=t,this},setSleepEvents:function setSleepEvents(t,i){return this.setSleepStartEvent(t),this.setSleepEndEvent(i),this},setSleepStartEvent:function setSleepStartEvent(t){if(t){var i=this.world;h.on(this.body,"sleepStart",(function(t){i.emit(o.SLEEP_START,t,this)}))}else h.off(this.body,"sleepStart");return this},setSleepEndEvent:function setSleepEndEvent(t){if(t){var i=this.world;h.on(this.body,"sleepEnd",(function(t){i.emit(o.SLEEP_END,t,this)}))}else h.off(this.body,"sleepEnd");return this}};t.exports=l},function(t,i){t.exports="afteradd"},function(t,i){t.exports="afterremove"},function(t,i){t.exports="afterupdate"},function(t,i){t.exports="beforeadd"},function(t,i){t.exports="beforeremove"},function(t,i){t.exports="beforeupdate"},function(t,i){t.exports="collisionactive"},function(t,i){t.exports="collisionend"},function(t,i){t.exports="collisionstart"},function(t,i){t.exports="dragend"},function(t,i){t.exports="drag"},function(t,i){t.exports="dragstart"},function(t,i){t.exports="pause"},function(t,i){t.exports="resume"},function(t,i){t.exports="sleepend"},function(t,i){t.exports="sleepstart"},function(t,i,r){var o=r(41),a={setStatic:function setStatic(t){return o.setStatic(this.body,t),this},isStatic:function isStatic(){return this.body.isStatic}};t.exports=a},function(t,i,r){var o=r(41),a=r(14),h=r(269),l=r(270),u={x:{get:function get(){return this.body.position.x},set:function set(t){this._tempVec2.set(t,this.y),o.setPosition(this.body,this._tempVec2)}},y:{get:function get(){return this.body.position.y},set:function set(t){this._tempVec2.set(this.x,t),o.setPosition(this.body,this._tempVec2)}},scaleX:{get:function get(){return this._scaleX},set:function set(t){var i=1/this._scaleX,r=1/this._scaleY;this._scaleX=t,0===this._scaleX?this.renderFlags&=-5:this.renderFlags|=4,o.scale(this.body,i,r),o.scale(this.body,t,this._scaleY)}},scaleY:{get:function get(){return this._scaleY},set:function set(t){var i=1/this._scaleX,r=1/this._scaleY;this._scaleY=t,0===this._scaleY?this.renderFlags&=-5:this.renderFlags|=4,o.scale(this.body,i,r),o.scale(this.body,this._scaleX,t)}},angle:{get:function get(){return l(this.body.angle*a.RAD_TO_DEG)},set:function set(t){this.rotation=l(t)*a.DEG_TO_RAD}},rotation:{get:function get(){return this.body.angle},set:function set(t){this._rotation=h(t),o.setAngle(this.body,this._rotation)}},setPosition:function setPosition(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this._tempVec2.set(t,i),o.setPosition(this.body,this._tempVec2),this},setRotation:function setRotation(t){return void 0===t&&(t=0),this._rotation=h(t),o.setAngle(this.body,t),this},setFixedRotation:function setFixedRotation(){return o.setInertia(this.body,1/0),this},setAngle:function setAngle(t){return void 0===t&&(t=0),this.angle=t,o.setAngle(this.body,this.rotation),this},setScale:function setScale(t,i,r){void 0===t&&(t=1),void 0===i&&(i=t);var a=1/this._scaleX,h=1/this._scaleY;return this._scaleX=t,this._scaleY=i,o.scale(this.body,a,h,r),o.scale(this.body,t,i,r),this}};t.exports=u},function(t,i,r){var o=r(41),a={setAngularVelocity:function setAngularVelocity(t){return o.setAngularVelocity(this.body,t),this},setVelocityX:function setVelocityX(t){return this._tempVec2.set(t,this.body.velocity.y),o.setVelocity(this.body,this._tempVec2),this},setVelocityY:function setVelocityY(t){return this._tempVec2.set(this.body.velocity.x,t),o.setVelocity(this.body,this._tempVec2),this},setVelocity:function setVelocity(t,i){return this._tempVec2.set(t,i),o.setVelocity(this.body,this._tempVec2),this}};t.exports=a},function(t,i,r){var o={};t.exports=o;var a=r(118),h=r(32);o.create=function(t){return h.extend({extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0},!1,t)},o.reset=function(t){t.extended&&(t.narrowDetections=0,t.narrowphaseTests=0,t.narrowReuse=0,t.narrowReuseCount=0,t.midphaseTests=0,t.broadphaseTests=0,t.narrowEff=0,t.midEff=0,t.broadEff=0,t.collisions=0,t.buckets=0,t.pairs=0,t.bodies=0)},o.update=function(t,i){if(t.extended){var r=i.world,o=a.allBodies(r);t.collisions=t.narrowDetections,t.pairs=i.pairs.list.length,t.bodies=o.length,t.midEff=(t.narrowDetections/(t.midphaseTests||1)).toFixed(2),t.narrowEff=(t.narrowDetections/(t.narrowphaseTests||1)).toFixed(2),t.broadEff=(1-t.broadphaseTests/(o.length||1)).toFixed(2),t.narrowReuse=(t.narrowReuseCount/(t.narrowphaseTests||1)).toFixed(2)}}},function(t,i,r){var o=r(123),a=r(271),h=r(86),l=r(41),u=r(1392),c=r(84),d=r(0),p=r(118),g=r(591),v=r(128),m=r(273),y=r(50),T=r(1394),S=r(2),w=r(6),b=r(597),C=r(1525),A=r(1526),E=r(1399),M=r(1527),_=r(127),R=r(250),P=r(598),k=r(595),O=r(24),L=r(1400),D=r(599),I=r(274),B=r(20),N=r(592),G=r(83),Y=r(64),U=r(1402),X=new d({initialize:function MatterPhysics(t){this.scene=t,this.systems=t.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=l,this.composite=p,this.detector=m,this.grid=b,this.pair=R,this.pairs=P,this.query=L,this.resolver=D,this.sat=I,this.constraint=v,this.bodies=h,this.composites=g,this.axes=a,this.bounds=c,this.svg=N,this.vector=G,this.vertices=Y,this.verts=Y,this._tempVec2=G.create(),w(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),w(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),w(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),D._restingThresh=w(this.config,"restingThresh",4),D._restingThreshTangent=w(this.config,"restingThreshTangent",6),D._positionDampen=w(this.config,"positionDampen",.9),D._positionWarming=w(this.config,"positionWarming",.8),D._frictionNormalMultiplier=w(this.config,"frictionNormalMultiplier",5),t.sys.events.once(B.BOOT,this.boot,this),t.sys.events.on(B.START,this.start,this)},boot:function boot(){this.world=new U(this.scene,this.config),this.add=new T(this.world),this.bodyBounds=new u,this.systems.events.once(B.DESTROY,this.destroy,this)},start:function start(){this.world||(this.world=new U(this.scene,this.config),this.add=new T(this.world));var t=this.systems.events;t.on(B.UPDATE,this.world.update,this.world),t.on(B.POST_UPDATE,this.world.postUpdate,this.world),t.once(B.SHUTDOWN,this.shutdown,this)},getConfig:function getConfig(){var t=this.systems.game.config.physics,i=this.systems.settings.physics;return _(S(i,"matter",{}),S(t,"matter",{}))},enableAttractorPlugin:function enableAttractorPlugin(){return k.register(C),k.use(E,C),this},enableWrapPlugin:function enableWrapPlugin(){return k.register(M),k.use(E,M),this},enableCollisionEventsPlugin:function enableCollisionEventsPlugin(){return k.register(A),k.use(E,A),this},pause:function pause(){return this.world.pause()},resume:function resume(){return this.world.resume()},set60Hz:function set60Hz(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function set30Hz(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function step(t,i){this.world.step(t,i)},containsPoint:function containsPoint(t,i,r){t=this.getMatterBodies(t);var o=G.create(i,r);return L.point(t,o).length>0},intersectPoint:function intersectPoint(t,i,r){r=this.getMatterBodies(r);var o=G.create(t,i),a=[];return L.point(r,o).forEach((function(t){-1===a.indexOf(t)&&a.push(t)})),a},intersectRect:function intersectRect(t,i,r,o,a,h){void 0===a&&(a=!1),h=this.getMatterBodies(h);var l={min:{x:t,y:i},max:{x:t+r,y:i+o}},u=[];return L.region(h,l,a).forEach((function(t){-1===u.indexOf(t)&&u.push(t)})),u},intersectRay:function intersectRay(t,i,r,o,a,h){void 0===a&&(a=1),h=this.getMatterBodies(h);for(var l=[],u=L.ray(h,G.create(t,i),G.create(r,o),a),c=0;c<u.length;c++)l.push(u[c].body);return l},intersectBody:function intersectBody(t,i){i=this.getMatterBodies(i);for(var r=[],o=L.collides(t,i),a=0;a<o.length;a++){var h=o[a];h.bodyA===t?r.push(h.bodyB):r.push(h.bodyA)}return r},overlap:function overlap(t,i,r,o,a){void 0===r&&(r=null),void 0===o&&(o=null),void 0===a&&(a=r),Array.isArray(t)||(t=[t]),t=this.getMatterBodies(t),i=this.getMatterBodies(i);for(var h=!1,l=0;l<t.length;l++)for(var u=t[l],c=L.collides(u,i),d=0;d<c.length;d++){var p=c[d],g=p.bodyA.id===u.id?p.bodyB:p.bodyA;if(!o||o.call(a,u,g,p))if(h=!0,r)r.call(a,u,g,p);else if(!o)return!0}return h},setCollisionCategory:function setCollisionCategory(t,i){return(t=this.getMatterBodies(t)).forEach((function(t){t.collisionFilter.category=i})),this},setCollisionGroup:function setCollisionGroup(t,i){return(t=this.getMatterBodies(t)).forEach((function(t){t.collisionFilter.group=i})),this},setCollidesWith:function setCollidesWith(t,i){t=this.getMatterBodies(t);var r=0;if(Array.isArray(i))for(var o=0;o<i.length;o++)r|=i[o];else r=i;return t.forEach((function(t){t.collisionFilter.mask=r})),this},getMatterBodies:function getMatterBodies(t){if(!t)return this.world.getAllBodies();Array.isArray(t)||(t=[t]);for(var i=[],r=0;r<t.length;r++){var o=t[r].hasOwnProperty("body")?t[r].body:t[r];i.push(o)}return i},setVelocity:function setVelocity(t,i,r){t=this.getMatterBodies(t);var o=this._tempVec2;return o.x=i,o.y=r,t.forEach((function(t){l.setVelocity(t,o)})),this},setVelocityX:function setVelocityX(t,i){t=this.getMatterBodies(t);var r=this._tempVec2;return r.x=i,t.forEach((function(t){r.y=t.velocity.y,l.setVelocity(t,r)})),this},setVelocityY:function setVelocityY(t,i){t=this.getMatterBodies(t);var r=this._tempVec2;return r.y=i,t.forEach((function(t){r.x=t.velocity.x,l.setVelocity(t,r)})),this},setAngularVelocity:function setAngularVelocity(t,i){return(t=this.getMatterBodies(t)).forEach((function(t){l.setAngularVelocity(t,i)})),this},applyForce:function applyForce(t,i){t=this.getMatterBodies(t);var r=this._tempVec2;return t.forEach((function(t){r.x=t.position.x,r.y=t.position.y,l.applyForce(t,r,i)})),this},applyForceFromPosition:function applyForceFromPosition(t,i,r,o){t=this.getMatterBodies(t);var a=this._tempVec2;return t.forEach((function(t){void 0===o&&(o=t.angle),a.x=r*Math.cos(o),a.y=r*Math.sin(o),l.applyForce(t,i,a)})),this},applyForceFromAngle:function applyForceFromAngle(t,i,r){t=this.getMatterBodies(t);var o=this._tempVec2;return t.forEach((function(t){void 0===r&&(r=t.angle),o.x=i*Math.cos(r),o.y=i*Math.sin(r),l.applyForce(t,{x:t.position.x,y:t.position.y},o)})),this},getConstraintLength:function getConstraintLength(t){var i=t.pointA.x,r=t.pointA.y,o=t.pointB.x,a=t.pointB.y;return t.bodyA&&(i+=t.bodyA.position.x,r+=t.bodyA.position.y),t.bodyB&&(o+=t.bodyB.position.x,a+=t.bodyB.position.y),y(i,r,o,a)},alignBody:function alignBody(t,i,r,a){var h;switch(t=t.hasOwnProperty("body")?t.body:t,a){case o.TOP_LEFT:case o.LEFT_TOP:h=this.bodyBounds.getTopLeft(t,i,r);break;case o.TOP_CENTER:h=this.bodyBounds.getTopCenter(t,i,r);break;case o.TOP_RIGHT:case o.RIGHT_TOP:h=this.bodyBounds.getTopRight(t,i,r);break;case o.LEFT_CENTER:h=this.bodyBounds.getLeftCenter(t,i,r);break;case o.CENTER:h=this.bodyBounds.getCenter(t,i,r);break;case o.RIGHT_CENTER:h=this.bodyBounds.getRightCenter(t,i,r);break;case o.LEFT_BOTTOM:case o.BOTTOM_LEFT:h=this.bodyBounds.getBottomLeft(t,i,r);break;case o.BOTTOM_CENTER:h=this.bodyBounds.getBottomCenter(t,i,r);break;case o.BOTTOM_RIGHT:case o.RIGHT_BOTTOM:h=this.bodyBounds.getBottomRight(t,i,r)}return h&&l.setPosition(t,h),this},shutdown:function shutdown(){var t=this.systems.events;this.world&&(t.off(B.UPDATE,this.world.update,this.world),t.off(B.POST_UPDATE,this.world.postUpdate,this.world)),t.off(B.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function destroy(){this.shutdown(),this.scene.sys.events.off(B.START,this.start,this),this.scene=null,this.systems=null}});O.register("MatterPhysics",X,"matterPhysics"),t.exports=X},function(t,i,r){var o=r(594),a={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.14.2",silent:!0,install:function install(t){t.after("Body.create",(function(){a.Body.init(this)})),t.before("Engine.update",(function(t){a.Engine.update(t)}))},Body:{init:function init(t){t.plugin.attractors=t.plugin.attractors||[]}},Engine:{update:function update(t){for(var i=o.Composite.allBodies(t.world),r=0;r<i.length;r++){var a=i[r],h=a.plugin.attractors;if(h&&h.length>0)for(var l=0;l<i.length;l++){var u=i[l];if(r!==l)for(var c=0;c<h.length;c++){var d=h[c],p=d;o.Common.isFunction(d)&&(p=d(a,u)),p&&o.Body.applyForce(u,u.position,p)}}}}},Attractors:{gravityConstant:.001,gravity:function gravity(t,i){var r=o.Vector.sub(i.position,t.position),h=o.Vector.magnitudeSquared(r)||1e-4,l=o.Vector.normalise(r),u=-a.Attractors.gravityConstant*(t.mass*i.mass/h),c=o.Vector.mult(l,u);o.Body.applyForce(t,t.position,o.Vector.neg(c)),o.Body.applyForce(i,i.position,c)}}};t.exports=a},function(t,i){t.exports={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function install(t){t.after("Engine.create",(function(){t.Events.on(this,"collisionStart",(function(i){i.pairs.map((function(i){var r=i.bodyA,o=i.bodyB;r.gameObject&&r.gameObject.emit("collide",r,o,i),o.gameObject&&o.gameObject.emit("collide",o,r,i),t.Events.trigger(r,"onCollide",{pair:i}),t.Events.trigger(o,"onCollide",{pair:i}),r.onCollideCallback&&r.onCollideCallback(i),o.onCollideCallback&&o.onCollideCallback(i),r.onCollideWith[o.id]&&r.onCollideWith[o.id](o,i),o.onCollideWith[r.id]&&o.onCollideWith[r.id](r,i)}))})),t.Events.on(this,"collisionActive",(function(i){i.pairs.map((function(i){var r=i.bodyA,o=i.bodyB;r.gameObject&&r.gameObject.emit("collideActive",r,o,i),o.gameObject&&o.gameObject.emit("collideActive",o,r,i),t.Events.trigger(r,"onCollideActive",{pair:i}),t.Events.trigger(o,"onCollideActive",{pair:i}),r.onCollideActiveCallback&&r.onCollideActiveCallback(i),o.onCollideActiveCallback&&o.onCollideActiveCallback(i)}))})),t.Events.on(this,"collisionEnd",(function(i){i.pairs.map((function(i){var r=i.bodyA,o=i.bodyB;r.gameObject&&r.gameObject.emit("collideEnd",r,o,i),o.gameObject&&o.gameObject.emit("collideEnd",o,r,i),t.Events.trigger(r,"onCollideEnd",{pair:i}),t.Events.trigger(o,"onCollideEnd",{pair:i}),r.onCollideEndCallback&&r.onCollideEndCallback(i),o.onCollideEndCallback&&o.onCollideEndCallback(i)}))}))}))}}},function(t,i,r){var o=r(594),a={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function install(t){t.after("Engine.update",(function(){a.Engine.update(this)}))},Engine:{update:function update(t){for(var i=t.world,r=o.Composite.allBodies(i),h=o.Composite.allComposites(i),l=0;l<r.length;l+=1){var u=r[l];u.plugin.wrap&&a.Body.wrap(u,u.plugin.wrap)}for(l=0;l<h.length;l+=1){var c=h[l];c.plugin.wrap&&a.Composite.wrap(c,c.plugin.wrap)}}},Bounds:{wrap:function wrap(t,i){var r=null,o=null;if(void 0!==i.min.x&&void 0!==i.max.x&&(t.min.x>i.max.x?r=i.min.x-t.max.x:t.max.x<i.min.x&&(r=i.max.x-t.min.x)),void 0!==i.min.y&&void 0!==i.max.y&&(t.min.y>i.max.y?o=i.min.y-t.max.y:t.max.y<i.min.y&&(o=i.max.y-t.min.y)),null!==r||null!==o)return{x:r||0,y:o||0}}},Body:{wrap:function wrap(t,i){var r=a.Bounds.wrap(t.bounds,i);return r&&o.Body.translate(t,r),r}},Composite:{bounds:function bounds(t){for(var i=o.Composite.allBodies(t),r=[],a=0;a<i.length;a+=1){var h=i[a];r.push(h.bounds.min,h.bounds.max)}return o.Bounds.create(r)},wrap:function wrap(t,i){var r=a.Bounds.wrap(a.Composite.bounds(t),i);return r&&o.Composite.translate(t,r),r}}};t.exports=a},function(t,i,r){(function(i){var o=r(33),a=r(17),h={Actions:r(275),Animations:r(723),BlendModes:r(35),Cache:r(735),Cameras:r(738),Core:r(806),Class:r(0),Create:r(888),Curves:r(894),Data:r(896),Display:r(898),DOM:r(917),Events:r(918),Game:r(920),GameObjects:r(1011),Geom:r(483),Input:r(1308),Loader:r(1338),Math:r(193),Physics:r(1493),Plugins:r(1403),Renderer:r(1405),Scale:r(1412),ScaleModes:r(168),Scene:r(418),Scenes:r(1413),Structs:r(1415),Textures:r(1416),Tilemaps:r(1418),Time:r(1461),Tweens:r(1463),Utils:r(1481)};h.Sound=r(1492),h=a(!1,h,o),t.exports=h,i.Phaser=h}).call(this,r(600))}])}));var Wt=getDefaultExportFromCjs(zt.exports),Ht={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1},jt=!1;function GetOs(){if(jt)return Ht;jt=!0;var t=navigator.userAgent;/Windows/.test(t)?Ht.windows=!0:/Mac OS/.test(t)&&!/like Mac OS/.test(t)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(Ht.iOS=!0,Ht.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),Ht.iOSVersion=parseInt(RegExp.$1,10)):Ht.macOS=!0:/Android/.test(t)?Ht.android=!0:/Linux/.test(t)?Ht.linux=!0:/iP[ao]d|iPhone/i.test(t)?(Ht.iOS=!0,navigator.appVersion.match(/OS (\d+)/),Ht.iOSVersion=parseInt(RegExp.$1,10),Ht.iPhone=-1!==t.toLowerCase().indexOf("iphone"),Ht.iPad=-1!==t.toLowerCase().indexOf("ipad")):/Kindle/.test(t)||/\bKF[A-Z][A-Z]+/.test(t)||/Silk.*Mobile Safari/.test(t)?Ht.kindle=!0:/CrOS/.test(t)&&(Ht.chromeOS=!0),(/Windows Phone/i.test(t)||/IEMobile/i.test(t))&&(Ht.android=!1,Ht.iOS=!1,Ht.macOS=!1,Ht.windows=!0,Ht.windowsPhone=!0);var i=/Silk/.test(t);return(Ht.windows||Ht.macOS||Ht.linux&&!i||Ht.chromeOS)&&(Ht.desktop=!0),(Ht.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(Ht.desktop=!1),navigator.standalone&&(Ht.webApp=!0),void 0!==window.cordova&&(Ht.cordova=!0),"undefined"!=typeof process&&process.versions&&process.versions.node&&(Ht.node=!0),Ht.node&&"object"===_typeof(process.versions)&&(Ht.nodeWebkit=!!process.versions["node-webkit"],Ht.electron=!!process.versions.electron),void 0!==window.ejecta&&(Ht.ejecta=!0),/Crosswalk/.test(t)&&(Ht.crosswalk=!0),Ht.pixelRatio=window.devicePixelRatio||1,Ht}var qt={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0},Kt=!1;var Zt={setEventEmitter:function setEventEmitter(t,i){return void 0===i&&(i=Phaser.Events.EventEmitter),this._privateEE=!0===t||void 0===t,this._eventEmitter=this._privateEE?new i:t,this},destroyEventEmitter:function destroyEventEmitter(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter:function getEventEmitter(){return this._eventEmitter},on:function on(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function once(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function off(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function emit(t){return this._eventEmitter&&t&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function addListener(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function removeListener(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function removeAllListeners(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function listenerCount(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function listeners(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]},eventNames:function eventNames(){return this._eventEmitter?this._eventEmitter.eventNames.apply(this._eventEmitter,arguments):[]}},Jt=Phaser.Scene,Qt=function IsSceneObject(t){return t instanceof Jt},$t=function GetSceneObject(t){return null==t||"object"!==_typeof(t)?null:Qt(t)?t:t.scene&&Qt(t.scene)?t.scene:t.parent&&t.parent.scene&&Qt(t.parent.scene)?t.parent.scene:void 0},te=Phaser.Utils.Objects.GetValue,ee=function(){function ComponentBase(t,i){_classCallCheck(this,ComponentBase),this.parent=t,this.scene=$t(t),this.isShutdown=!1,this.setEventEmitter(te(i,"eventEmitter",!0)),this.parent&&this.parent===this.scene?this.scene.sys.events.once("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.once("destroy",this.onParentDestroy,this)}return _createClass(ComponentBase,[{key:"shutdown",value:function shutdown(t){this.isShutdown||(this.parent&&this.parent===this.scene?this.scene.sys.events.off("shutdown",this.onSceneDestroy,this):this.parent&&this.parent.once&&this.parent.off("destroy",this.onParentDestroy,this),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this.isShutdown=!0)}},{key:"destroy",value:function destroy(t){this.shutdown(t)}},{key:"onSceneDestroy",value:function onSceneDestroy(){this.destroy(!0)}},{key:"onParentDestroy",value:function onParentDestroy(t,i){this.destroy(i)}}]),ComponentBase}();Object.assign(ee.prototype,Zt);var ie=Phaser.Utils.Objects.GetValue,ne=function(t){_inherits(TickTask,t);var i=_createSuper(TickTask);function TickTask(t,r){var o;return _classCallCheck(this,TickTask),(o=i.call(this,t,r))._isRunning=!1,o.isPaused=!1,o.tickingState=!1,o.setTickingMode(ie(r,"tickingMode",1)),o}return _createClass(TickTask,[{key:"boot",value:function boot(){2!==this.tickingMode||this.tickingState||this.startTicking()}},{key:"shutdown",value:function shutdown(t){this.isShutdown||(this.stop(),this.tickingState&&this.stopTicking(),_get(_getPrototypeOf(TickTask.prototype),"shutdown",this).call(this,t))}},{key:"setTickingMode",value:function setTickingMode(t){"string"==typeof t&&(t=re[t]),this.tickingMode=t}},{key:"startTicking",value:function startTicking(){this.tickingState=!0}},{key:"stopTicking",value:function stopTicking(){this.tickingState=!1}},{key:"isRunning",get:function get(){return this._isRunning},set:function set(t){this._isRunning!==t&&(this._isRunning=t,1===this.tickingMode&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}},{key:"start",value:function start(){return this.isPaused=!1,this.isRunning=!0,this}},{key:"pause",value:function pause(){return this.isRunning&&(this.isPaused=!0,this.isRunning=!1),this}},{key:"resume",value:function resume(){return this.isPaused&&(this.isRunning=!0),this}},{key:"stop",value:function stop(){return this.isPaused=!1,this.isRunning=!1,this}},{key:"complete",value:function complete(){this.isPaused=!1,this.isRunning=!1,this.emit("complete",this.parent,this)}}]),TickTask}(ee),re={no:0,lazy:1,always:2},se=function(t){_inherits(SceneUpdateTickTask,t);var i=_createSuper(SceneUpdateTickTask);function SceneUpdateTickTask(){return _classCallCheck(this,SceneUpdateTickTask),i.apply(this,arguments)}return _createClass(SceneUpdateTickTask,[{key:"startTicking",value:function startTicking(){_get(_getPrototypeOf(SceneUpdateTickTask.prototype),"startTicking",this).call(this),this.scene.sys.events.on("update",this.update,this)}},{key:"stopTicking",value:function stopTicking(){_get(_getPrototypeOf(SceneUpdateTickTask.prototype),"stopTicking",this).call(this),this.scene&&this.scene.sys.events.off("update",this.update,this)}}]),SceneUpdateTickTask}(ne),oe=function SetVelocity(t,i,r,o){var a=t.body,h=a.velocity.x,l=a.velocity.y;i===h&&r===l||(a.setVelocity(i,r),o&&o(i,r,h,l))},ae=Phaser.Utils.Objects.GetValue,he=function(t){_inherits(Bullet,t);var i=_createSuper(Bullet);function Bullet(t,r){var o;return _classCallCheck(this,Bullet),(o=i.call(this,t,r)).resetFromJSON(r),o.boot(),o}return _createClass(Bullet,[{key:"resetFromJSON",value:function resetFromJSON(t){return this.parent.body||this.scene.physics.add.existing(this.parent,!1),this.setWrapMode(ae(t,"wrap",!1),ae(t,"padding",0)),this.setEnable(ae(t,"enable",!0)),this.setSpeed(ae(t,"speed",200)),this}},{key:"enable",get:function get(){return this.isRunning},set:function set(t){this.isRunning=t,t||oe(this.parent,0,0)}},{key:"setEnable",value:function setEnable(t){return null==t&&(t=!0),this.enable=t,this}},{key:"setSpeed",value:function setSpeed(t){return this.speed=t,this}},{key:"setWrapMode",value:function setWrapMode(t,i){return void 0===t&&(t=!0),this.wrap=t,this.padding=i,this}},{key:"update",value:function update(t,i){var r=this.parent;if(!this.enable)return oe(r,0,0),this;if(!r.active)return this;var o=r.rotation,a=this.speed*Math.cos(o),h=this.speed*Math.sin(o);return oe(r,a,h),this.wrap&&r.body.world.wrap(r,this.padding),this}}]),Bullet}(se),le=function(t){_inherits(BulletPlugin,Phaser.Plugins.BasePlugin);var i=_createSuper(BulletPlugin);function BulletPlugin(t){return _classCallCheck(this,BulletPlugin),i.call(this,t)}return _createClass(BulletPlugin,[{key:"start",value:function start(){this.game.events.on("destroy",this.destroy,this)}},{key:"add",value:function add(t,i){return new he(t,i)}}]),BulletPlugin}(),ue=Phaser.Utils.Objects.GetValue,ce=Phaser.Math.Clamp,de=function(){function Timer(t){_classCallCheck(this,Timer),this.resetFromJSON(t)}return _createClass(Timer,[{key:"resetFromJSON",value:function resetFromJSON(t){this.state=ue(t,"state",fe),this.timeScale=ue(t,"timeScale",1),this.delay=ue(t,"delay",0),this.repeat=ue(t,"repeat",0),this.repeatCounter=ue(t,"repeatCounter",0),this.duration=ue(t,"duration",0),this.nowTime=ue(t,"nowTime",0),this.justRestart=ue(t,"justRestart",!1)}},{key:"toJSON",value:function toJSON(){return{state:this.state,timeScale:this.timeScale,delay:this.delay,repeat:this.repeat,repeatCounter:this.repeatCounter,duration:this.duration,nowTime:this.nowTime,justRestart:this.justRestart}}},{key:"destroy",value:function destroy(){}},{key:"setTimeScale",value:function setTimeScale(t){return this.timeScale=t,this}},{key:"setDelay",value:function setDelay(t){return void 0===t&&(t=0),this.delay=t,this}},{key:"setDuration",value:function setDuration(t){return this.duration=t,this}},{key:"setRepeat",value:function setRepeat(t){return this.repeat=t,this}},{key:"setRepeatInfinity",value:function setRepeatInfinity(){return this.repeat=-1,this}},{key:"start",value:function start(){return this.nowTime=this.delay>0?-this.delay:0,this.state=this.nowTime>=0?ge:pe,this.repeatCounter=0,this}},{key:"stop",value:function stop(){return this.state=fe,this}},{key:"update",value:function update(t,i){this.state!==fe&&this.state!==ve&&0!==i&&0!==this.timeScale&&(this.nowTime+=i*this.timeScale,this.state=this.nowTime>=0?ge:pe,this.justRestart=!1,this.nowTime>=this.duration&&(-1===this.repeat||this.repeatCounter<this.repeat?(this.repeatCounter++,this.justRestart=!0,this.nowTime-=this.duration):(this.nowTime=this.duration,this.state=ve)))}},{key:"t",get:function get(){var t;switch(this.state){case fe:case pe:t=0;break;case ge:t=this.nowTime/this.duration;break;case ve:t=1}return ce(t,0,1)},set:function set(t){(t=ce(t,-1,1))<0?(this.state=pe,this.nowTime=-this.delay*t):(this.state=ge,this.nowTime=this.duration*t,1===t&&0!==this.repeat&&this.repeatCounter++)}},{key:"setT",value:function setT(t){return this.t=t,this}},{key:"isIdle",get:function get(){return this.state===fe}},{key:"isDelay",get:function get(){return this.state===pe}},{key:"isCountDown",get:function get(){return this.state===ge}},{key:"isRunning",get:function get(){return this.state===pe||this.state===ge}},{key:"isDone",get:function get(){return this.state===ve}},{key:"isOddIteration",get:function get(){return 1==(1&this.repeatCounter)}},{key:"isEvenIteration",get:function get(){return 0==(1&this.repeatCounter)}}]),Timer}(),fe=0,pe=1,ge=2,ve=-1,me=function(t){_inherits(TimerTickTask,t);var i=_createSuper(TimerTickTask);function TimerTickTask(t,r){var o;return _classCallCheck(this,TimerTickTask),(o=i.call(this,t,r)).timer=new de,o}return _createClass(TimerTickTask,[{key:"shutdown",value:function shutdown(t){this.isShutdown||(_get(_getPrototypeOf(TimerTickTask.prototype),"shutdown",this).call(this,t),this.timer.destroy(),this.timer=void 0)}},{key:"start",value:function start(){return this.timer.start(),_get(_getPrototypeOf(TimerTickTask.prototype),"start",this).call(this),this}},{key:"stop",value:function stop(){return this.timer.stop(),_get(_getPrototypeOf(TimerTickTask.prototype),"stop",this).call(this),this}},{key:"complete",value:function complete(){return this.timer.stop(),_get(_getPrototypeOf(TimerTickTask.prototype),"complete",this).call(this),this}}]),TimerTickTask}(se),ye=Phaser.Utils.Objects.GetValue,xe=Phaser.Utils.Objects.GetAdvancedValue,Te=Phaser.Tweens.Builders.GetEaseFunction,Se=function(t){_inherits(EaseValueTaskBase,t);var i=_createSuper(EaseValueTaskBase);function EaseValueTaskBase(){return _classCallCheck(this,EaseValueTaskBase),i.apply(this,arguments)}return _createClass(EaseValueTaskBase,[{key:"resetFromJSON",value:function resetFromJSON(t){return this.timer.resetFromJSON(ye(t,"timer")),this.setEnable(ye(t,"enable",!0)),this.setTarget(ye(t,"target",this.parent)),this.setDelay(xe(t,"delay",0)),this.setDuration(xe(t,"duration",1e3)),this.setEase(ye(t,"ease","Linear")),this.setRepeat(ye(t,"repeat",0)),this}},{key:"setEnable",value:function setEnable(t){return null==t&&(t=!0),this.enable=t,this}},{key:"setTarget",value:function setTarget(t){return void 0===t&&(t=this.parent),this.target=t,this}},{key:"setDelay",value:function setDelay(t){return this.delay=t,this}},{key:"setDuration",value:function setDuration(t){return this.duration=t,this}},{key:"setEase",value:function setEase(t){return void 0===t&&(t="Linear"),this.ease=t,this.easeFn=Te(t),this}},{key:"setRepeat",value:function setRepeat(t){return this.repeat=t,this}},{key:"start",value:function start(){return this.timer.isRunning||_get(_getPrototypeOf(EaseValueTaskBase.prototype),"start",this).call(this),this}},{key:"restart",value:function restart(){return this.timer.stop(),this.start.apply(this,arguments),this}},{key:"stop",value:function stop(t){return void 0===t&&(t=!1),_get(_getPrototypeOf(EaseValueTaskBase.prototype),"stop",this).call(this),t&&(this.timer.setT(1),this.updateGameObject(this.target,this.timer),this.complete()),this}},{key:"update",value:function update(t,i){if(!this.isRunning||!this.enable||!this.parent.active)return this;var r=this.target,o=this.timer;return o.update(t,i),o.isDelay||this.updateGameObject(r,o),this.emit("update",r,this),o.isDone&&this.complete(),this}},{key:"updateGameObject",value:function updateGameObject(t,i){}}]),EaseValueTaskBase}(me),we=Phaser.Utils.Objects.GetValue,be=Phaser.Utils.Objects.GetAdvancedValue,Ce=Phaser.Math.Linear,Ae=function(t){_inherits(EaseMove,t);var i=_createSuper(EaseMove);function EaseMove(t,r){var o;return _classCallCheck(this,EaseMove),(o=i.call(this,t,r)).resetFromJSON(r),o.boot(),o}return _createClass(EaseMove,[{key:"resetFromJSON",value:function resetFromJSON(t){if(_get(_getPrototypeOf(EaseMove.prototype),"resetFromJSON",this).call(this,t),this.setMode(we(t,"mode",0)),t&&(t.hasOwnProperty("x")||t.hasOwnProperty("y"))){var i=be(t,"x",void 0),r=be(t,"y",void 0);this.setTargetPosition(i,r)}else this.setTargetPosition(t);return this}},{key:"setMode",value:function setMode(t){return"string"==typeof t&&(t=Ee[t]),this.mode=t,this}},{key:"setTargetPosition",value:function setTargetPosition(t,i){if("number"==typeof t||"number"==typeof i)this.startX=this.parent.x,this.startY=this.parent.y,this.endX=t,this.endY=i;else{var r=t;this.startX=be(r,"startX",void 0),this.startY=be(r,"startY",void 0),this.endX=be(r,"endX",void 0),this.endY=be(r,"endY",void 0)}return this.hasMoveX=void 0!==this.startX&&void 0!==this.endX,this.hasMoveY=void 0!==this.startY&&void 0!==this.endY,this}},{key:"start",value:function start(){if(this.timer.isRunning)return this;var t=this.parent;return this.hasMoveX&&(t.x=this.startX),this.hasMoveY&&(t.y=this.startY),this.timer.setDelay(this.delay).setDuration(this.duration).setRepeat(2===this.mode?-1:0),_get(_getPrototypeOf(EaseMove.prototype),"start",this).call(this),this}},{key:"updateGameObject",value:function updateGameObject(t,i){var r=i.t;i.isOddIteration&&(r=1-r),r=this.easeFn(r),this.hasMoveX&&(t.x=Ce(this.startX,this.endX,r)),this.hasMoveY&&(t.y=Ce(this.startY,this.endY,r))}},{key:"complete",value:function complete(){return _get(_getPrototypeOf(EaseMove.prototype),"complete",this).call(this),1===this.mode&&this.parent.destroy(),this}}]),EaseMove}(Se),Ee={stop:0,destroy:1,yoyo:2},Me=function ParseValue(t,i){if("number"==typeof t)return t;var r=t[0],o=parseFloat(t.substr(2));switch(r){case"+":return i+o;case"-":return i-o;case"*":return i*o;case"/":return i/o}},_e=function EaseMoveTo(t,i,r,o,a,h,l){h instanceof Ae&&(l=h,h=void 0),void 0===h&&(h=!1);var u={};return u.mode=h?1:0,void 0!==r&&(u.startX=t.x,u.endX=Me(r,t.x)),void 0!==o&&(u.startY=t.y,u.endY=Me(o,t.y)),u.duration=i,u.ease=void 0===a?"Linear":a,void 0===l?l=new Ae(t,u):l.resetFromJSON(u),l.restart(),l},Re=function EaseMoveFrom(t,i,r,o,a,h,l){h instanceof Ae&&(l=h,h=void 0),void 0===h&&(h=!1);var u={};return u.mode=h?1:0,void 0!==r&&(u.startX=Me(r,t.x),u.endX=t.x),void 0!==o&&(u.startY=Me(o,t.y),u.endY=t.y),u.duration=i,u.ease=void 0===a?"Linear":a,void 0===l?l=new Ae(t,u):l.resetFromJSON(u),l.restart(),l},Pe=function(t){_inherits(EaseMovePlugin,Phaser.Plugins.BasePlugin);var i=_createSuper(EaseMovePlugin);function EaseMovePlugin(t){return _classCallCheck(this,EaseMovePlugin),i.call(this,t)}return _createClass(EaseMovePlugin,[{key:"start",value:function start(){this.game.events.on("destroy",this.destroy,this)}},{key:"add",value:function add(t,i){return new Ae(t,i)}}]),EaseMovePlugin}(),ke={moveTo:_e,moveFrom:Re,moveToDestroy:function EaseMoveToDestroy(t,i,r,o,a,h){return _e(t,i,r,o,a,!0,h)},moveFromDestroy:function EaseMoveFromDestroy(t,i,r,o,a,h){return Re(t,i,r,o,a,!0,h)}};Object.assign(Pe.prototype,ke);var Oe=function(){function ObjectFactory(t){_classCallCheck(this,ObjectFactory),this.scene=t}return _createClass(ObjectFactory,null,[{key:"register",value:function register(t,i){ObjectFactory.prototype[t]=i}}]),ObjectFactory}(),Le=Phaser.Utils.Objects.GetValue,De=function(t){_inherits(OnePointerTracer,t);var i=_createSuper(OnePointerTracer);function OnePointerTracer(t,r){var o;_classCallCheck(this,OnePointerTracer);var a=$t(t);return a===t&&(t=void 0),(o=i.call(this,a,r)).gameObject=t,t&&t.setInteractive(Le(r,"inputConfig",void 0)),o._enable=void 0,o.resetFromJSON(r),o.boot(),o}return _createClass(OnePointerTracer,[{key:"resetFromJSON",value:function resetFromJSON(t){return this.setEnable(Le(t,"enable",!0)),this.setDetectBounds(),void 0===this.gameObject?this.setDetectBounds(Le(t,"bounds",void 0)):this.setDetectBounds(),this.tracerState=Ie,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}},{key:"boot",value:function boot(){_get(_getPrototypeOf(OnePointerTracer.prototype),"boot",this).call(this),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}},{key:"shutdown",value:function shutdown(t){this.scene&&(this.gameObject||this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,_get(_getPrototypeOf(OnePointerTracer.prototype),"shutdown",this).call(this,t))}},{key:"enable",get:function get(){return this._enable},set:function set(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}},{key:"setEnable",value:function setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}},{key:"setDetectBounds",value:function setDetectBounds(t){return this.bounds=t,this}},{key:"toggleEnable",value:function toggleEnable(){return this.setEnable(!this.enable),this}},{key:"onPointerDown",value:function onPointerDown(t,i){this.enable&&(void 0===this.pointer&&(!this.bounds||this.bounds.contains(t.x,t.y))&&this.pointer!==t&&(this.pointer=t,this.lastPointer=t,this.movedState=!1,this.tracerState=Fe,void 0===this.gameObject&&(this.isTouchingAnyObject=i.length>0),this.onDragStart()))}},{key:"onPointerUp",value:function onPointerUp(t){this.enable&&((!this.bounds||this.bounds.contains(t.x,t.y))&&this.pointer===t&&(this.pointer=void 0,this.movedState=!1,this.tracerState=Ie,this.onDragEnd()))}},{key:"onPointerMove",value:function onPointerMove(t){if(this.enable&&t.isDown){var i=!this.bounds||this.bounds.contains(t.x,t.y),r=this.pointer===t;!r&&i||(r&&!i?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}}},{key:"dragCancel",value:function dragCancel(){return this.tracerState===Fe&&this.onDragEnd(),this.pointer=void 0,this.tracerState=Ie,this}},{key:"onDragStart",value:function onDragStart(){this.emit("dragstart",this)}},{key:"onDragEnd",value:function onDragEnd(){this.emit("dragend",this)}},{key:"onDrag",value:function onDrag(){this.emit("drag",this)}},{key:"preUpdate",value:function preUpdate(t,i){}},{key:"postUpdate",value:function postUpdate(t,i){}},{key:"startTicking",value:function startTicking(){_get(_getPrototypeOf(OnePointerTracer.prototype),"startTicking",this).call(this),this.scene.sys.events.on("preupdate",this.preUpdate,this),this.scene.sys.events.on("postupdate",this.postUpdate,this)}},{key:"stopTicking",value:function stopTicking(){_get(_getPrototypeOf(OnePointerTracer.prototype),"stopTicking",this).call(this),this.scene&&(this.scene.sys.events.off("preupdate",this.preUpdate,this),this.scene.sys.events.off("postupdate",this.postUpdate,this))}},{key:"setRecongizedStateObject",value:function setRecongizedStateObject(t){return this.recongizedState=t,this}},{key:"state",get:function get(){return this.recongizedState.state},set:function set(t){this.recongizedState.state=t}},{key:"cancel",value:function cancel(){return this.state=Be,this}}]),OnePointerTracer}(ne),Ie=0,Fe=1,Be="IDLE",Ne=function GetValue$9(t,i,r){if(t&&"number"!=typeof t){if(t.hasOwnProperty(i))return t[i];if(-1!==i.indexOf(".")){for(var o=i.split("."),a=t,h=r,l=0;l<o.length;l++){if(!a.hasOwnProperty(o[l])){h=r;break}h=a[o[l]],a=a[o[l]]}return h}return r}return r},Ge=function(){function FSM(t){_classCallCheck(this,FSM);var i=Ne(t,"states",void 0);i&&this.addStates(i);var r=Ne(t,"extend",void 0);if(r)for(var o in r)this.hasOwnProperty(o)&&void 0!==this[o]||(this[o]=r[o]);var a=Ne(t,"eventEmitter",void 0),h=Ne(t,"EventEmitterClass",void 0);this.setEventEmitter(a,h),this._stateLock=!1,this.resetFromJSON(t)}return _createClass(FSM,[{key:"shutdown",value:function shutdown(){this.destroyEventEmitter()}},{key:"destroy",value:function destroy(){this.shutdown()}},{key:"resetFromJSON",value:function resetFromJSON(t){this.setEnable(Ne(t,"enable",!0)),this.start(Ne(t,"start",void 0));var i=Ne(t,"init",void 0);return i&&i.call(this),this}},{key:"toJSON",value:function toJSON(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}},{key:"setEnable",value:function setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}},{key:"toggleEnable",value:function toggleEnable(){return this.setEnable(!this.enable),this}},{key:"state",get:function get(){return this._state},set:function set(t){if(this.enable&&!this._stateLock&&this._state!==t){if(this._prevState=this._state,this._state=t,this._stateLock=!0,this.emit("statechange",this),null!=this._prevState){var i="exit_"+this._prevState,r=this[i];r&&r.call(this),this.emit(i,this)}if(this._stateLock=!1,null!=this._state){var o="enter_"+this._state,a=this[o];a&&a.call(this),this.emit(o,this)}}}},{key:"prevState",get:function get(){return this._prevState}},{key:"start",value:function start(t){return this._start=t,this._prevState=void 0,this._state=t,this}},{key:"goto",value:function goto(t){return null!=t&&(this.state=t),this}},{key:"next",value:function next(){var t,i=this["next_"+this.state];return i&&(t="string"==typeof i?i:i.call(this)),this.goto(t),this}},{key:"addState",value:function addState(t,i){"string"!=typeof t&&(t=(i=t).name);var r=i.next;r&&(this["next_"+t]=r);var o=i.exit;o&&(this["exit_"+t]=o);var a=i.enter;return a&&(this["enter_"+t]=a),this}},{key:"addStates",value:function addStates(t){if(Array.isArray(t))for(var i=0,r=t.length;i<r;i++)this.addState(t[i]);else for(var o in t)this.addState(o,t[o]);return this}},{key:"runMethod",value:function runMethod(t,i,r,o,a,h){var l=this[t+"_"+this.state];if(l){var u=arguments.length;switch(u){case 1:return l.call(this);case 2:return l.call(this,i);case 3:return l.call(this,i,r);case 4:return l.call(this,i,r,o);case 5:return l.call(this,i,r,o,a);case 6:return l.call(this,i,r,o,a,h)}for(var c=new Array(u-1),d=1;d<u;d++)c[d-1]=arguments[d];return l.apply(this,c)}}},{key:"update",value:function update(t,i){this.runMethod("update",t,i)}},{key:"preupdate",value:function preupdate(t,i){this.runMethod("preupdate",t,i)}},{key:"postupdate",value:function postupdate(t,i){this.runMethod("postupdate",t,i)}}]),FSM}();Object.assign(Ge.prototype,Zt);var Ye=Phaser.Utils.Objects.GetValue,Ue=Phaser.Math.Distance.Between,Xe=function(t){_inherits(Tap,t);var i=_createSuper(Tap);function Tap(t,r){var o;_classCallCheck(this,Tap);var a=_assertThisInitialized(o=i.call(this,t,r)),h={states:{IDLE:{enter:function enter(){a.stop(),a.tapsCount=0,a.x=0,a.y=0,a.worldX=0,a.worldY=0},exit:function exit(){var t=a.lastPointer;a.x=t.x,a.y=t.y,a.worldX=t.worldX,a.worldY=t.worldY}},BEGIN:{enter:function enter(){a.start(),a.tapsCount=0,a.emit("tappingstart",a,a.gameObject,a.lastPointer)}},RECOGNIZED:{enter:function enter(){a.start(),a.emit("tap",a,a.gameObject,a.lastPointer),a.emit("".concat(a.tapsCount,"tap"),a,a.gameObject,a.lastPointer)}}},init:function init(){this.state=Ve},eventEmitter:!1};return o.setRecongizedStateObject(new Ge(h)),o}return _createClass(Tap,[{key:"resetFromJSON",value:function resetFromJSON(t){_get(_getPrototypeOf(Tap.prototype),"resetFromJSON",this).call(this,t),this.setHoldTime(Ye(t,"time",250)),this.setTapInterval(Ye(t,"tapInterval",200)),this.setDragThreshold(Ye(t,"threshold",9)),this.setTapOffset(Ye(t,"tapOffset",10));var i=Ye(t,"taps",void 0);return void 0!==i?this.setTaps(i):(this.setMaxTaps(Ye(t,"maxTaps",void 0)),this.setMinTaps(Ye(t,"minTaps",void 0))),this}},{key:"onDragStart",value:function onDragStart(){switch(this.state){case Ve:this.state=ze;break;case ze:var t=this.lastPointer;Ue(t.upX,t.upY,t.x,t.y)>this.tapOffset&&(this.state=We,this.state=ze);break;case We:this.state=ze}}},{key:"onDragEnd",value:function onDragEnd(){this.state===ze&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),void 0!==this.maxTaps&&this.tapsCount===this.maxTaps&&(this.state=We))}},{key:"onDrag",value:function onDrag(){this.state!==Ve&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Ve)}},{key:"preUpdate",value:function preUpdate(t,i){if(this.isRunning&&this.enable&&this.state===ze){var r=this.lastPointer;if(r.isDown)t-r.downTime>this.holdTime&&(this.state=Ve);else t-r.upTime>this.tapInterval&&(void 0===this.minTaps||this.tapsCount>=this.minTaps?this.state=We:this.state=Ve)}}},{key:"postUpdate",value:function postUpdate(t,i){this.isRunning&&this.enable&&this.state===We&&(this.state=Ve)}},{key:"isTapped",get:function get(){return this.state===We}},{key:"setHoldTime",value:function setHoldTime(t){return this.holdTime=t,this}},{key:"setTapInterval",value:function setTapInterval(t){return this.tapInterval=t,this}},{key:"setDragThreshold",value:function setDragThreshold(t){return this.dragThreshold=t,this}},{key:"setTapOffset",value:function setTapOffset(t){return this.tapOffset=t,this}},{key:"setMaxTaps",value:function setMaxTaps(t){return this.maxTaps=t,this}},{key:"setMinTaps",value:function setMinTaps(t){return this.minTaps=t,this}},{key:"setTaps",value:function setTaps(t,i){return void 0===i&&(i=t),this.setMinTaps(t).setMaxTaps(i),this}}]),Tap}(De),Ve="IDLE",ze="BEGIN",We="RECOGNIZED",He=function IsInValidKey(t){return null==t||""===t||0===t.length},je=function SetValue(t,i,r,o){if(void 0===o&&(o="."),"object"===_typeof(t)){if(He(i)){if(null==r)return;"object"===_typeof(r)&&(t=r)}else{"string"==typeof i&&(i=i.split(o));var a=i.pop(),h=function GetEntry(t,i,r){var o=t;if(He(i));else{var a;"string"==typeof i&&(i=i.split("."));for(var h=0,l=i.length;h<l;h++){var u;null!=o[a=i[h]]&&"object"===_typeof(o[a])||(u=h===l-1?void 0===r?{}:r:{},o[a]=u),o=o[a]}}return o}(t,i);h[a]=r}return t}},qe=Phaser.GameObjects.GameObject,Ke=function IsGameObject(t){return!!t.skeleton||t instanceof qe};Oe.register("tap",(function(t,i){return Ke(t)||(i=t,t=this.scene),new Xe(t,i)})),je(window,"RexPlugins.Gestures.Tap",Xe);var Ze=Phaser.Utils.Objects.GetValue,Je=function(t){_inherits(Press,t);var i=_createSuper(Press);function Press(t,r){var o;_classCallCheck(this,Press);var a=_assertThisInitialized(o=i.call(this,t,r)),h={states:{IDLE:{enter:function enter(){a.x=0,a.y=0,a.worldX=0,a.worldY=0},exit:function exit(){var t=a.lastPointer;a.x=t.x,a.y=t.y,a.worldX=t.worldX,a.worldY=t.worldY}},BEGIN:{enter:function enter(){a.start()},exit:function exit(){a.stop()}},RECOGNIZED:{enter:function enter(){a.emit("pressstart",a,a.gameObject,a.lastPointer)},exit:function exit(){a.emit("pressend",a,a.gameObject,a.lastPointer)}}},init:function init(){this.state=Qe},eventEmitter:!1};return o.setRecongizedStateObject(new Ge(h)),o}return _createClass(Press,[{key:"resetFromJSON",value:function resetFromJSON(t){return _get(_getPrototypeOf(Press.prototype),"resetFromJSON",this).call(this,t),this.setDragThreshold(Ze(t,"threshold",9)),this.setHoldTime(Ze(t,"time",251)),this}},{key:"onDragStart",value:function onDragStart(){this.state=$e,0===this.holdTime&&(this.state=ti)}},{key:"onDragEnd",value:function onDragEnd(){this.state=Qe}},{key:"onDrag",value:function onDrag(){this.state!==Qe&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Qe)}},{key:"preUpdate",value:function preUpdate(t,i){this.isRunning&&this.enable&&(this.state===$e&&t-this.pointer.downTime>=this.holdTime&&(this.state=ti))}},{key:"isPressed",get:function get(){return this.state===ti}},{key:"setHoldTime",value:function setHoldTime(t){return this.holdTime=t,this}},{key:"setDragThreshold",value:function setDragThreshold(t){return this.dragThreshold=t,this}}]),Press}(De),Qe="IDLE",$e="BEGIN",ti="RECOGNIZED";Oe.register("press",(function(t,i){return Ke(t)||(i=t,t=this.scene),new Je(t,i)})),je(window,"RexPlugins.Gestures.Press",Je);var ei=Phaser.Utils.Objects.GetValue,ii=function(t){_inherits(Pan,t);var i=_createSuper(Pan);function Pan(t,r){var o;_classCallCheck(this,Pan);var a=_assertThisInitialized(o=i.call(this,t,r)),h={states:{IDLE:{},BEGIN:{enter:function enter(){var t=a.pointer;a.startX=t.x,a.startY=t.y,a.startWorldX=t.worldX,a.startWorldY=t.worldY}},RECOGNIZED:{enter:function enter(){a.emit("panstart",a,a.gameObject,a.lastPointer)},exit:function exit(){var t=a.lastPointer;a.endX=t.x,a.endY=t.y,a.endWorldX=t.worldX,a.endWorldY=t.worldY,a.emit("panend",a,a.gameObject,a.lastPointer)}}},init:function init(){this.state=ni},eventEmitter:!1};return o.setRecongizedStateObject(new Ge(h)),o}return _createClass(Pan,[{key:"resetFromJSON",value:function resetFromJSON(t){return _get(_getPrototypeOf(Pan.prototype),"resetFromJSON",this).call(this,t),this.setDragThreshold(ei(t,"threshold",10)),this}},{key:"onDragStart",value:function onDragStart(){this.state=ri,0===this.dragThreshold&&(this.state=si)}},{key:"onDragEnd",value:function onDragEnd(){this.state=ni}},{key:"onDrag",value:function onDrag(){switch(this.state){case ri:this.pointer.getDistance()>=this.dragThreshold&&(this.state=si);break;case si:var t=this.pointer.position,i=this.pointer.prevPosition;this.dx=t.x-i.x,this.dy=t.y-i.y;var r=this.pointer;this.x=r.x,this.y=r.y,this.worldX=r.worldX,this.worldY=r.worldY,this.emit("pan",this,this.gameObject,this.lastPointer)}}},{key:"isPanned",get:function get(){return this.state===si}},{key:"setDragThreshold",value:function setDragThreshold(t){return this.dragThreshold=t,this}}]),Pan}(De),ni="IDLE",ri="BEGIN",si="RECOGNIZED";Oe.register("pan",(function(t,i){return Ke(t)||(i=t,t=this.scene),new ii(t,i)})),je(window,"RexPlugins.Gestures.Pan",ii);var oi=Phaser.Math.Distance.Between,ai=Phaser.Math.Angle.Between,hi={getDt:function getDt(){return this.scene.sys.game.loop.delta},getVelocity:function getVelocity(){var t=this.pointer.position,i=this.pointer.prevPosition;return oi(i.x,i.y,t.x,t.y)/(.001*this.getDt())},getVelocityX:function getVelocityX(){var t=this.pointer.position,i=this.pointer.prevPosition;return Math.abs(t.x-i.x)/(.001*this.getDt())},getVelocityY:function getVelocityY(){var t=this.pointer.position,i=this.pointer.prevPosition;return Math.abs(t.y-i.y)/(.001*this.getDt())},getVelocityAngle:function getVelocityAngle(){var t=this.pointer.position,i=this.pointer.prevPosition;return ai(i.x,i.y,t.x,t.y)}},li={"up&down":0,"left&right":1,"4dir":2,"8dir":3},ui={},ci=Phaser.Utils.Objects.GetValue,di=Phaser.Math.RadToDeg,fi=function(t){_inherits(Swipe,t);var i=_createSuper(Swipe);function Swipe(t,r){var o;_classCallCheck(this,Swipe);var a=_assertThisInitialized(o=i.call(this,t,r)),h={states:{IDLE:{enter:function enter(){a.x=0,a.y=0,a.worldX=0,a.worldY=0},exit:function exit(){var t=a.lastPointer;a.x=t.x,a.y=t.y,a.worldX=t.worldX,a.worldY=t.worldY}},BEGIN:{enter:function enter(){a.validDrag=!1}},RECOGNIZED:{enter:function enter(){a.start(),a.updateDirectionStates(),a.emit("swipe",a,a.gameObject,a.lastPointer)},exit:function exit(){a.stop(),a.clearDirectionStates()}}},init:function init(){this.state=pi},eventEmitter:!1};return o.setRecongizedStateObject(new Ge(h)),o.clearDirectionStates(),o}return _createClass(Swipe,[{key:"resetFromJSON",value:function resetFromJSON(t){return _get(_getPrototypeOf(Swipe.prototype),"resetFromJSON",this).call(this,t),this.setDragThreshold(ci(t,"threshold",10)),this.setVelocityThreshold(ci(t,"velocityThreshold",1e3)),this.setDirectionMode(ci(t,"dir","8dir")),this}},{key:"onDragStart",value:function onDragStart(){this.state=gi}},{key:"onDragEnd",value:function onDragEnd(){this.state=pi}},{key:"onDrag",value:function onDrag(){this.state===gi&&(this.validDrag||(this.validDrag=0===this.dragThreshold||this.pointer.getDistance()>=this.dragThreshold),this.validDrag&&this.dragVelocity>this.velocityThreshold&&(this.state=vi))}},{key:"postUpdate",value:function postUpdate(t,i){this.isRunning&&this.enable&&this.state===vi&&(this.state=pi)}},{key:"isSwiped",get:function get(){return this.state===vi}},{key:"dragVelocity",get:function get(){var t;switch(this.dirMode){case 0:t=this.getVelocityY();break;case 1:t=this.getVelocityX();break;default:t=this.getVelocity()}return t}},{key:"setDragThreshold",value:function setDragThreshold(t){return this.dragThreshold=t,this}},{key:"setVelocityThreshold",value:function setVelocityThreshold(t){return this.velocityThreshold=t,this}},{key:"setDirectionMode",value:function setDirectionMode(t){return"string"==typeof t&&(t=li[t]),this.dirMode=t,this}},{key:"updateDirectionStates",value:function updateDirectionStates(){return function AngleToDirections(t,i,r){switch(void 0===r?r={}:!0===r&&(r=ui),r.left=!1,r.right=!1,r.up=!1,r.down=!1,t=(t+360)%360,i){case 0:t<180?r.down=!0:r.up=!0;break;case 1:t>90&&t<=270?r.left=!0:r.right=!0;break;case 2:t>45&&t<=135?r.down=!0:t>135&&t<=225?r.left=!0:t>225&&t<=315?r.up=!0:r.right=!0;break;case 3:t>22.5&&t<=67.5?(r.down=!0,r.right=!0):t>67.5&&t<=112.5?r.down=!0:t>112.5&&t<=157.5?(r.down=!0,r.left=!0):t>157.5&&t<=202.5?r.left=!0:t>202.5&&t<=247.5?(r.left=!0,r.up=!0):t>247.5&&t<=292.5?r.up=!0:t>292.5&&t<=337.5?(r.up=!0,r.right=!0):r.right=!0}}(di(this.getVelocityAngle()),this.dirMode,this),this}},{key:"clearDirectionStates",value:function clearDirectionStates(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}}]),Swipe}(De);Object.assign(fi.prototype,hi);var pi="IDLE",gi="BEGIN",vi="RECOGNIZED";Oe.register("swipe",(function(t,i){return Ke(t)||(i=t,t=this.scene),new fi(t,i)})),je(window,"RexPlugins.Gestures.Swipe",fi);var mi=function Clear(t){if("object"!==_typeof(t)||null===t)return t;if(Array.isArray(t))t.length=0;else for(var i in t)delete t[i];return t},yi=Phaser.Utils.Objects.GetValue,xi=Phaser.Utils.Array.SpliceOne,Ti=Phaser.Math.Distance.Between,Si=Phaser.Math.Angle.Between,wi=function(){function TwoPointersTracer(t,i){_classCallCheck(this,TwoPointersTracer);var r=t.input.manager.pointersTotal-1;r<2&&t.input.addPointer(2-r),this.scene=t,this.setEventEmitter(yi(i,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(i),this.boot()}return _createClass(TwoPointersTracer,[{key:"resetFromJSON",value:function resetFromJSON(t){return this.setEnable(yi(t,"enable",!0)),this.bounds=yi(t,"bounds",void 0),this.tracerState=Ci,this.pointers.length=0,mi(this.movedState),this}},{key:"boot",value:function boot(){this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("gameout",this.dragCancel,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.sys.events.once("shutdown",this.destroy,this)}},{key:"shutdown",value:function shutdown(){this.scene&&(this.destroyEventEmitter(),this.pointers.length=0,mi(this.movedState),this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("gameout",this.dragCancel,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.sys.events.off("shutdown",this.destroy,this),this.scene=void 0)}},{key:"destroy",value:function destroy(){this.shutdown()}},{key:"enable",get:function get(){return this._enable},set:function set(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}},{key:"setEnable",value:function setEnable(t){return void 0===t&&(t=!0),this.enable=t,this}},{key:"toggleEnable",value:function toggleEnable(){return this.setEnable(!this.enable),this}},{key:"onPointerDown",value:function onPointerDown(t){if(this.enable&&(2!==this.pointers.length&&(!this.bounds||this.bounds.contains(t.x,t.y))&&-1===this.pointers.indexOf(t)))switch(this.movedState[t.id]=!1,this.pointers.push(t),this.tracerState){case Ci:this.tracerState=Ai,this.onDrag1Start();break;case Ai:this.tracerState=Ei,this.onDrag2Start()}}},{key:"onPointerUp",value:function onPointerUp(t){if(this.enable&&(!this.bounds||this.bounds.contains(t.x,t.y))){var i=this.pointers.indexOf(t);if(-1!==i)switch(delete this.movedState[t.id],xi(this.pointers,i),this.tracerState){case Ai:this.tracerState=Ci,this.onDrag1End();break;case Ei:this.tracerState=Ai,this.onDrag2End(),this.onDrag1Start()}}}},{key:"onPointerMove",value:function onPointerMove(t){if(this.enable&&t.isDown){var i=!this.bounds||this.bounds.contains(t.x,t.y),r=-1!==this.pointers.indexOf(t);if(!r&&i);else if(r&&!i)this.onPointerUp(t);else if(this.movedState[t.id]||(this.movedState[t.id]=t.x!==t.downX||t.y!==t.downY),this.movedState[t.id])switch(this.tracerState){case Ai:this.onDrag1();break;case Ei:this.onDrag2()}}}},{key:"dragCancel",value:function dragCancel(){return this.tracerState===Ei&&this.onDrag2End(),this.pointers.length=0,mi(this.movedState),this.tracerState=Ci,this}},{key:"onDrag1Start",value:function onDrag1Start(){this.emit("drag1start",this)}},{key:"onDrag1End",value:function onDrag1End(){this.emit("drag1end",this)}},{key:"onDrag1",value:function onDrag1(){this.emit("drag1",this)}},{key:"onDrag2Start",value:function onDrag2Start(){this.emit("drag2start",this)}},{key:"onDrag2End",value:function onDrag2End(){this.emit("drag2end",this)}},{key:"onDrag2",value:function onDrag2(){this.emit("drag2",this)}},{key:"distanceBetween",get:function get(){if(this.tracerState!==Ei)return 0;var t=this.pointers[0],i=this.pointers[1];return Ti(t.x,t.y,i.x,i.y)}},{key:"angleBetween",get:function get(){if(this.tracerState!==Ei)return 0;var t=this.pointers[0],i=this.pointers[1];return Si(t.x,t.y,i.x,i.y)}},{key:"drag1Vector",get:function get(){var t=this.pointers[0];if(t&&this.movedState[t.id]){var i=t.position,r=t.prevPosition;bi.x=i.x-r.x,bi.y=i.y-r.y}else bi.x=0,bi.y=0;return bi}},{key:"centerX",get:function get(){if(this.tracerState!==Ei)return 0;var t=this.pointers[0].position,i=this.pointers[1].position;return(t.x+i.x)/2}},{key:"centerY",get:function get(){if(this.tracerState!==Ei)return 0;var t=this.pointers[0].position,i=this.pointers[1].position;return(t.y+i.y)/2}},{key:"prevCenterX",get:function get(){if(this.tracerState!==Ei)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,i=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.x+i.x)/2}},{key:"prevCenterY",get:function get(){if(this.tracerState!==Ei)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,i=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.y+i.y)/2}},{key:"movementCenterX",get:function get(){return this.centerX-this.prevCenterX}},{key:"movementCenterY",get:function get(){return this.centerY-this.prevCenterY}},{key:"setRecongizedStateObject",value:function setRecongizedStateObject(t){return this.recongizedState=t,this}},{key:"state",get:function get(){return this.recongizedState.state},set:function set(t){this.recongizedState.state=t}},{key:"cancel",value:function cancel(){return this.state=Mi,this}}]),TwoPointersTracer}();Object.assign(wi.prototype,Zt);var bi={},Ci=0,Ai=1,Ei=2,Mi="IDLE",_i=Phaser.Utils.Objects.GetValue,Ri=function(t){_inherits(Pinch,t);var i=_createSuper(Pinch);function Pinch(t,r){var o;_classCallCheck(this,Pinch);var a=_assertThisInitialized(o=i.call(this,t,r)),h={states:{IDLE:{enter:function enter(){a.prevDistance=void 0,a.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function enter(){a.emit("pinchstart",a)},exit:function exit(){a.emit("pinchend",a)}}},init:function init(){this.state=Pi},eventEmitter:!1};return o.setRecongizedStateObject(new Ge(h)),o}return _createClass(Pinch,[{key:"resetFromJSON",value:function resetFromJSON(t){return _get(_getPrototypeOf(Pinch.prototype),"resetFromJSON",this).call(this,t),this.setDragThreshold(_i(t,"threshold",0)),this}},{key:"onDrag2Start",value:function onDrag2Start(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=ki,0===this.dragThreshold&&(this.state=Oi)}},{key:"onDrag2End",value:function onDrag2End(){this.state=Pi}},{key:"onDrag2",value:function onDrag2(){switch(this.state){case ki:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.prevDistance=t,this.state=Oi}break;case Oi:t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.emit("pinch",this),this.prevDistance=t}}},{key:"isPinched",get:function get(){return this.state===Oi}},{key:"setDragThreshold",value:function setDragThreshold(t){return this.dragThreshold=t,this}}]),Pinch}(wi),Pi="IDLE",ki="BEGIN",Oi="RECOGNIZED";Oe.register("pinch",(function(t){return new Ri(this.scene,t)})),je(window,"RexPlugins.Gestures.Pinch",Ri);var Li=Phaser.Math.RotateAround,Di=function RotateObjectAround(t,i,r,o){return Li(t,i,r,o),t.rotation+=o,t},Ii={},Fi=Phaser.Utils.Objects.GetValue,Bi=Phaser.Math.Angle.WrapDegrees,Ni=Phaser.Math.Angle.ShortestBetween,Gi=Phaser.Math.RadToDeg,Yi=Phaser.Math.DegToRad,Ui=function(t){_inherits(Rotate,t);var i=_createSuper(Rotate);function Rotate(t,r){var o;_classCallCheck(this,Rotate);var a=_assertThisInitialized(o=i.call(this,t,r)),h={states:{IDLE:{enter:function enter(){a.prevAngle=void 0,a.angle=0}},BEGIN:{},RECOGNIZED:{enter:function enter(){a.emit("rotatestart",a)},exit:function exit(){a.emit("rotateend",a)}}},init:function init(){this.state=Vi},eventEmitter:!1};return o.setRecongizedStateObject(new Ge(h)),o}return _createClass(Rotate,[{key:"resetFromJSON",value:function resetFromJSON(t){return _get(_getPrototypeOf(Rotate.prototype),"resetFromJSON",this).call(this,t),this.setDragThreshold(Fi(t,"threshold",0)),this}},{key:"onDrag2Start",value:function onDrag2Start(){this.prevAngle=Bi(Gi(this.angleBetween)),this.state=zi,0===this.dragThreshold&&(this.state=Wi)}},{key:"onDrag2End",value:function onDrag2End(){this.state=Vi}},{key:"onDrag2",value:function onDrag2(){switch(this.state){case zi:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=Bi(Gi(this.angleBetween));this.angle=Ni(this.prevAngle,t),this.prevAngle=t,this.state=Wi}break;case Wi:t=Bi(Gi(this.angleBetween));this.angle=Ni(this.prevAngle,t),this.prevAngle=t,this.emit("rotate",this)}}},{key:"isRotated",get:function get(){return this.state===Wi}},{key:"rotation",get:function get(){return Yi(this.angle)}},{key:"setDragThreshold",value:function setDragThreshold(t){return this.dragThreshold=t,this}}]),Rotate}(wi),Xi={spinObject:function SpinObject(t,i){if(!this.isRotation)return this;void 0===i&&(i=this.pointers[0].camera);var r=this.movementCenterX,o=this.movementCenterY,a=function ScreenXYToWorldXY(t,i,r,o){return void 0===o?o={}:!0===o&&(o=Ii),r.getWorldPoint(t,i,o),o}(this.centerX,this.centerY,i,!0),h=a.x,l=a.y,u=this.rotation;if(Array.isArray(t))for(var c=t,d=0,p=c.length;d<p;d++)(t=c[d]).x+=r,t.y+=o,Di(t,h,l,u);else t.x+=r,t.y+=o,Di(t,h,l,u);return this}};Object.assign(Ui.prototype,Xi);var Vi="IDLE",zi="BEGIN",Wi="RECOGNIZED";Oe.register("rotate",(function(t){return new Ui(this.scene,t)})),je(window,"RexPlugins.Gestures.Rotate",Ui);var Hi=function(t){_inherits(GesturesPlugin,Phaser.Plugins.ScenePlugin);var i=_createSuper(GesturesPlugin);function GesturesPlugin(t,r){var o;return _classCallCheck(this,GesturesPlugin),(o=i.call(this,t,r)).add=new Oe(t),o}return _createClass(GesturesPlugin)}(),ji=Phaser.Utils.Objects.GetValue,qi=Phaser.Math.Distance.Between,Ki=Phaser.Math.Linear,Zi=Phaser.Math.Angle.Between,Ji=function(t){_inherits(MoveTo,t);var i=_createSuper(MoveTo);function MoveTo(t,r){var o;return _classCallCheck(this,MoveTo),(o=i.call(this,t,r)).resetFromJSON(r),o.boot(),o}return _createClass(MoveTo,[{key:"resetFromJSON",value:function resetFromJSON(t){return this.isRunning=ji(t,"isRunning",!1),this.setEnable(ji(t,"enable",!0)),this.timeScale=ji(t,"timeScale",1),this.setSpeed(ji(t,"speed",400)),this.setRotateToTarget(ji(t,"rotateToTarget",!1)),this.targetX=ji(t,"targetX",0),this.targetY=ji(t,"targetY",0),this}},{key:"toJSON",value:function toJSON(){return{isRunning:this.isRunning,enable:this.enable,timeScale:this.timeScale,speed:this.speed,rotateToTarget:this.rotateToTarget,targetX:this.targetX,targetY:this.targetY,tickingMode:this.tickingMode}}},{key:"setEnable",value:function setEnable(t){return null==t&&(t=!0),this.enable=t,this}},{key:"setSpeed",value:function setSpeed(t){return this.speed=t,this}},{key:"setRotateToTarget",value:function setRotateToTarget(t){return this.rotateToTarget=t,this}},{key:"moveTo",value:function moveTo(t,i){if("number"!=typeof t){var r=t;t=r.x,i=r.y}return this.targetX=t,this.targetY=i,_get(_getPrototypeOf(MoveTo.prototype),"start",this).call(this),this}},{key:"moveFrom",value:function moveFrom(t,i){if("number"!=typeof t){var r=t;t=r.x,i=r.y}var o=this.parent,a=o.x,h=o.y;return o.setPosition(t,i),this.moveTo(a,h),this}},{key:"moveToward",value:function moveToward(t,i){var r=this.parent,o=r.x+Math.cos(t)*i,a=r.y+Math.sin(t)*i;return this.moveTo(o,a),this}},{key:"update",value:function update(t,i){if(!this.isRunning||!this.enable)return this;var r=this.parent;if(!r.active)return this;var o=r.x,a=r.y,h=this.targetX,l=this.targetY;if(o===h&&a===l)return this.complete(),this;if(0===this.speed||0===i||0===this.timeScale)return this;var u,c,d=i*this.timeScale/1e3,p=this.speed*d,g=qi(o,a,h,l);if(p<g){var v=p/g;u=Ki(o,h,v),c=Ki(a,l,v)}else u=h,c=l;return r.setPosition(u,c),this.rotateToTarget&&(r.rotation=Zi(o,a,u,c)),this}}]),MoveTo}(se),Qi=function(t){_inherits(MoveToPlugin,Phaser.Plugins.BasePlugin);var i=_createSuper(MoveToPlugin);function MoveToPlugin(t){return _classCallCheck(this,MoveToPlugin),i.call(this,t)}return _createClass(MoveToPlugin,[{key:"start",value:function start(){this.game.events.on("destroy",this.destroy,this)}},{key:"add",value:function add(t,i){return new Ji(t,i)}}]),MoveToPlugin}(),$i=Math.PI/180,tn=function DegToRad(t){return t*$i},en=180/Math.PI,nn=Phaser.Utils.Objects.GetValue,rn=Phaser.Math.Wrap,sn=Phaser.Math.Angle.Wrap,an=Phaser.Math.Angle.Between,hn=function(t){_inherits(RotateTo,t);var i=_createSuper(RotateTo);function RotateTo(t,r){var o;return _classCallCheck(this,RotateTo),(o=i.call(this,t,r)).resetFromJSON(r),o.boot(),o}return _createClass(RotateTo,[{key:"resetFromJSON",value:function resetFromJSON(t){return this.isRunning=nn(t,"isRunning",!1),this.setEnable(nn(t,"enable",!0)),this.timeScale=nn(t,"timeScale",1),this.setSpeed(nn(t,"speed",180)),this.target=nn(t,"target",0),this.dir=nn(t,"dir",0),this}},{key:"toJSON",value:function toJSON(){return{isRunning:this.isRunning,timeScale:this.timeScale,speed:this.speed,target:this.target,dir:this.dir,tickingMode:this.tickingMode}}},{key:"setEnable",value:function setEnable(t){return null==t&&(t=!0),this.enable=t,this}},{key:"setSpeed",value:function setSpeed(t){return this.speed=t,this}},{key:"rotateTo",value:function rotateTo(t,i,r){if("number"!=typeof t){var o=t;t=nn(o,"angle",void 0),i=nn(o,"dir",void 0)}return this.target=rn(t,0,360),void 0===i&&(i=0),this.dir="string"==typeof i?un[i]:i,void 0!==r&&this.setSpeed(r),_get(_getPrototypeOf(RotateTo.prototype),"start",this).call(this),this}},{key:"rotateTowardsPosition",value:function rotateTowardsPosition(t,i,r,o){var a=this.parent,h=function RadToDeg(t){return t*en}(an(a.x,a.y,t,i));return this.rotateTo(h,r,o),this}},{key:"update",value:function update(t,i){if(!this.isRunning||!this.enable)return this;var r=this.parent;if(!r.active)return this;var o=this.target;if(sn(tn(o))===r.rotation)return this.complete(),this;if(0===this.speed||0===i||0===this.timeScale)return this;var a,h,l=(360+r.angle)%360,u=i*this.timeScale/1e3,c=this.speed*u,d=this.dir;switch(d){case 0:var p=ln(l,o,!0),g=360-p;p<g?(d=1,a=p):(d=2,a=g);break;case 1:a=ln(l,o,!0);break;case 2:a=ln(l,o,!1)}return h=c<a?1===d?l+c:l-c:o,r.rotation=tn(h),this}}]),RotateTo}(se),ln=function diffAngle(t,i,r){var o=r?i-t:t-i;return o=rn(o,0,360)},un={shortest:0,cw:1,ccw:2},cn=function(t){_inherits(RotateToPlugin,Phaser.Plugins.BasePlugin);var i=_createSuper(RotateToPlugin);function RotateToPlugin(t){return _classCallCheck(this,RotateToPlugin),i.call(this,t)}return _createClass(RotateToPlugin,[{key:"start",value:function start(){this.game.events.on("destroy",this.destroy,this)}},{key:"add",value:function add(t,i){return new hn(t,i)}}]),RotateToPlugin}();window.SpinePlugin=function(t){var i={};function __webpack_require__(r){if(i[r])return i[r].exports;var o=i[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,__webpack_require__),o.l=!0,o.exports}return __webpack_require__.m=t,__webpack_require__.c=i,__webpack_require__.d=function(t,i,r){__webpack_require__.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:r})},__webpack_require__.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.t=function(t,i){if(1&i&&(t=__webpack_require__(t)),8&i)return t;if(4&i&&"object"===_typeof(t)&&t&&t.__esModule)return t;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var o in t)__webpack_require__.d(r,o,function(i){return t[i]}.bind(null,o));return r},__webpack_require__.n=function(t){var i=t&&t.__esModule?function getDefault(){return t.default}:function getModuleExports(){return t};return __webpack_require__.d(i,"a",i),i},__webpack_require__.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=63)}([function(t,i){function getProperty(t,i,r){var o=r?t[i]:Object.getOwnPropertyDescriptor(t,i);return!r&&o.value&&"object"===_typeof(o.value)&&(o=o.value),!(!o||!function hasGetterOrSetter(t){return!!t.get&&"function"==typeof t.get||!!t.set&&"function"==typeof t.set}(o))&&(void 0===o.enumerable&&(o.enumerable=!0),void 0===o.configurable&&(o.configurable=!0),o)}function hasNonConfigurable(t,i){var r=Object.getOwnPropertyDescriptor(t,i);return!!r&&(r.value&&"object"===_typeof(r.value)&&(r=r.value),!1===r.configurable)}function extend(t,i,r,o){for(var a in i)if(i.hasOwnProperty(a)){var h=getProperty(i,a,r);if(!1!==h){if(hasNonConfigurable((o||t).prototype,a)){if(Class.ignoreFinals)continue;throw new Error("cannot override final property '"+a+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,a,h)}else t.prototype[a]=i[a]}}function mixin(t,i){if(i){Array.isArray(i)||(i=[i]);for(var r=0;r<i.length;r++)extend(t,i[r].prototype||i[r])}}function Class(t){var i,r;if(t||(t={}),t.initialize){if("function"!=typeof t.initialize)throw new Error("initialize must be a function");i=t.initialize,delete t.initialize}else if(t.Extends){var o=t.Extends;i=function initialize(){o.apply(this,arguments)}}else i=function initialize(){};t.Extends?(i.prototype=Object.create(t.Extends.prototype),i.prototype.constructor=i,r=t.Extends,delete t.Extends):i.prototype.constructor=i;var a=null;return t.Mixins&&(a=t.Mixins,delete t.Mixins),mixin(i,a),extend(i,t,!0,r),i}Class.extend=extend,Class.mixin=mixin,Class.ignoreFinals=!1,t.exports=Class},function(t,i){t.exports=function NOOP(){}},function(t,i,r){var o=r(0),a=r(32),h=new o({initialize:function Vector2(t,i){this.x=0,this.y=0,"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0):(void 0===i&&(i=t),this.x=t||0,this.y=i||0)},clone:function clone(){return new h(this.x,this.y)},copy:function copy(t){return this.x=t.x||0,this.y=t.y||0,this},setFromObject:function setFromObject(t){return this.x=t.x||0,this.y=t.y||0,this},set:function set(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setTo:function setTo(t,i){return this.set(t,i)},setToPolar:function setToPolar(t,i){return null==i&&(i=1),this.x=Math.cos(t)*i,this.y=Math.sin(t)*i,this},equals:function equals(t){return this.x===t.x&&this.y===t.y},fuzzyEquals:function fuzzyEquals(t,i){return a(this.x,t.x,i)&&a(this.y,t.y,i)},angle:function angle(){var angle=Math.atan2(this.y,this.x);return angle<0&&(angle+=2*Math.PI),angle},setAngle:function setAngle(t){return this.setToPolar(t,this.length())},add:function add(t){return this.x+=t.x,this.y+=t.y,this},subtract:function subtract(t){return this.x-=t.x,this.y-=t.y,this},multiply:function multiply(t){return this.x*=t.x,this.y*=t.y,this},scale:function scale(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function divide(t){return this.x/=t.x,this.y/=t.y,this},negate:function negate(){return this.x=-this.x,this.y=-this.y,this},distance:function distance(t){var i=t.x-this.x,r=t.y-this.y;return Math.sqrt(i*i+r*r)},distanceSq:function distanceSq(t){var i=t.x-this.x,r=t.y-this.y;return i*i+r*r},length:function length(){var t=this.x,i=this.y;return Math.sqrt(t*t+i*i)},setLength:function setLength(t){return this.normalize().scale(t)},lengthSq:function lengthSq(){var t=this.x,i=this.y;return t*t+i*i},normalize:function normalize(){var t=this.x,i=this.y,r=t*t+i*i;return r>0&&(r=1/Math.sqrt(r),this.x=t*r,this.y=i*r),this},normalizeRightHand:function normalizeRightHand(){var t=this.x;return this.x=-1*this.y,this.y=t,this},normalizeLeftHand:function normalizeLeftHand(){var t=this.x;return this.x=this.y,this.y=-1*t,this},dot:function dot(t){return this.x*t.x+this.y*t.y},cross:function cross(t){return this.x*t.y-this.y*t.x},lerp:function lerp(t,i){void 0===i&&(i=0);var r=this.x,o=this.y;return this.x=r+i*(t.x-r),this.y=o+i*(t.y-o),this},transformMat3:function transformMat3(t){var i=this.x,r=this.y,o=t.val;return this.x=o[0]*i+o[3]*r+o[6],this.y=o[1]*i+o[4]*r+o[7],this},transformMat4:function transformMat4(t){var i=this.x,r=this.y,o=t.val;return this.x=o[0]*i+o[4]*r+o[12],this.y=o[1]*i+o[5]*r+o[13],this},reset:function reset(){return this.x=0,this.y=0,this},limit:function limit(t){var i=this.length();return i&&i>t&&this.scale(t/i),this},reflect:function reflect(t){return t=t.clone().normalize(),this.subtract(t.scale(2*this.dot(t)))},mirror:function mirror(t){return this.reflect(t).negate()},rotate:function rotate(t){var i=Math.cos(t),r=Math.sin(t);return this.set(i*this.x-r*this.y,r*this.x+i*this.y)}});h.ZERO=new h,h.RIGHT=new h(1,0),h.LEFT=new h(-1,0),h.UP=new h(0,-1),h.DOWN=new h(0,1),h.ONE=new h(1,1),t.exports=h},function(t,i){t.exports=function Clamp(t,i,r){return Math.max(i,Math.min(r,t))}},function(t,i){var r={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};t.exports=r},function(t,i){t.exports=function SafeRange(t,i,r,o){var a=t.length;if(i<0||i>a||i>=r||r>a||i+r>a){if(o)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},function(t,i){t.exports=function Wrap(t,i,r){var o=r-i;return i+((t-i)%o+o)%o}},function(t,i){t.exports=function IsPlainObject(t){if("object"!==_typeof(t)||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}return!0}},function(t,i,r){var o=r(4);t.exports=function CounterClockwise(t){return t>Math.PI&&(t-=o.PI2),Math.abs(((t+o.TAU)%o.PI2-o.PI2)%o.PI2)}},function(t,i,r){var o=r(4);t.exports=function RadToDeg(t){return t*o.RAD_TO_DEG}},function(t,i){t.exports=function GetValue(t,i,r){if(t&&"number"!=typeof t){if(t.hasOwnProperty(i))return t[i];if(-1!==i.indexOf(".")){for(var o=i.split("."),a=t,h=r,l=0;l<o.length;l++){if(!a.hasOwnProperty(o[l])){h=r;break}h=a[o[l]],a=a[o[l]]}return h}return r}return r}},function(t,i){t.exports=function GetFastValue(t,i,r){var o=_typeof(t);return t&&"number"!==o&&"string"!==o&&t.hasOwnProperty(i)&&void 0!==t[i]?t[i]:r}},function(t,i){t.exports=function SpliceOne(t,i){if(!(i>=t.length)){for(var r=t.length-1,o=t[i],a=i;a<r;a++)t[a]=t[a+1];return t.length=r,o}}},function(t,i,r){var o=r(0),a=r(26),h=new o({initialize:function Point(t,i){void 0===t&&(t=0),void 0===i&&(i=t),this.type=a.POINT,this.x=t,this.y=i},setTo:function setTo(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.x=t,this.y=i,this}});t.exports=h},function(t,i,r){var o=new(r(0))({initialize:function Vector3(t,i,r){this.x=0,this.y=0,this.z=0,"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=i||0,this.z=r||0)},up:function up(){return this.x=0,this.y=1,this.z=0,this},min:function min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clone:function clone(){return new o(this.x,this.y,this.z)},addVectors:function addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this},crossVectors:function crossVectors(t,i){var r=t.x,o=t.y,a=t.z,h=i.x,l=i.y,u=i.z;return this.x=o*u-a*l,this.y=a*h-r*u,this.z=r*l-o*h,this},equals:function equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},copy:function copy(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},set:function set(t,i,r){return"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=i||0,this.z=r||0),this},setFromMatrixPosition:function setFromMatrixPosition(t){return this.fromArray(t.val,12)},setFromMatrixColumn:function setFromMatrixColumn(t,i){return this.fromArray(t.val,4*i)},fromArray:function fromArray(t,i){return void 0===i&&(i=0),this.x=t[i],this.y=t[i+1],this.z=t[i+2],this},add:function add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this},addScalar:function addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this},addScale:function addScale(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i||0,this},subtract:function subtract(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this},multiply:function multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this},scale:function scale(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divide:function divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this},negate:function negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function distance(t){var i=t.x-this.x,r=t.y-this.y,o=t.z-this.z||0;return Math.sqrt(i*i+r*r+o*o)},distanceSq:function distanceSq(t){var i=t.x-this.x,r=t.y-this.y,o=t.z-this.z||0;return i*i+r*r+o*o},length:function length(){var t=this.x,i=this.y,r=this.z;return Math.sqrt(t*t+i*i+r*r)},lengthSq:function lengthSq(){var t=this.x,i=this.y,r=this.z;return t*t+i*i+r*r},normalize:function normalize(){var t=this.x,i=this.y,r=this.z,o=t*t+i*i+r*r;return o>0&&(o=1/Math.sqrt(o),this.x=t*o,this.y=i*o,this.z=r*o),this},dot:function dot(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function cross(t){var i=this.x,r=this.y,o=this.z,a=t.x,h=t.y,l=t.z;return this.x=r*l-o*h,this.y=o*a-i*l,this.z=i*h-r*a,this},lerp:function lerp(t,i){void 0===i&&(i=0);var r=this.x,o=this.y,a=this.z;return this.x=r+i*(t.x-r),this.y=o+i*(t.y-o),this.z=a+i*(t.z-a),this},applyMatrix3:function applyMatrix3(t){var i=this.x,r=this.y,o=this.z,a=t.val;return this.x=a[0]*i+a[3]*r+a[6]*o,this.y=a[1]*i+a[4]*r+a[7]*o,this.z=a[2]*i+a[5]*r+a[8]*o,this},applyMatrix4:function applyMatrix4(t){var i=this.x,r=this.y,o=this.z,a=t.val,h=1/(a[3]*i+a[7]*r+a[11]*o+a[15]);return this.x=(a[0]*i+a[4]*r+a[8]*o+a[12])*h,this.y=(a[1]*i+a[5]*r+a[9]*o+a[13])*h,this.z=(a[2]*i+a[6]*r+a[10]*o+a[14])*h,this},transformMat3:function transformMat3(t){var i=this.x,r=this.y,o=this.z,a=t.val;return this.x=i*a[0]+r*a[3]+o*a[6],this.y=i*a[1]+r*a[4]+o*a[7],this.z=i*a[2]+r*a[5]+o*a[8],this},transformMat4:function transformMat4(t){var i=this.x,r=this.y,o=this.z,a=t.val;return this.x=a[0]*i+a[4]*r+a[8]*o+a[12],this.y=a[1]*i+a[5]*r+a[9]*o+a[13],this.z=a[2]*i+a[6]*r+a[10]*o+a[14],this},transformCoordinates:function transformCoordinates(t){var i=this.x,r=this.y,o=this.z,a=t.val,h=i*a[0]+r*a[4]+o*a[8]+a[12],l=i*a[1]+r*a[5]+o*a[9]+a[13],u=i*a[2]+r*a[6]+o*a[10]+a[14],c=i*a[3]+r*a[7]+o*a[11]+a[15];return this.x=h/c,this.y=l/c,this.z=u/c,this},transformQuat:function transformQuat(t){var i=this.x,r=this.y,o=this.z,a=t.x,h=t.y,l=t.z,u=t.w,c=u*i+h*o-l*r,d=u*r+l*i-a*o,p=u*o+a*r-h*i,g=-a*i-h*r-l*o;return this.x=c*u+g*-a+d*-l-p*-h,this.y=d*u+g*-h+p*-a-c*-l,this.z=p*u+g*-l+c*-h-d*-a,this},project:function project(t){var i=this.x,r=this.y,o=this.z,a=t.val,h=a[0],l=a[1],u=a[2],c=a[3],d=a[4],p=a[5],g=a[6],v=a[7],m=a[8],y=a[9],T=a[10],S=a[11],w=a[12],b=a[13],C=a[14],A=1/(i*c+r*v+o*S+a[15]);return this.x=(i*h+r*d+o*m+w)*A,this.y=(i*l+r*p+o*y+b)*A,this.z=(i*u+r*g+o*T+C)*A,this},projectViewMatrix:function projectViewMatrix(t,i){return this.applyMatrix4(t).applyMatrix4(i)},unprojectViewMatrix:function unprojectViewMatrix(t,i){return this.applyMatrix4(t).applyMatrix4(i)},unproject:function unproject(t,i){var r=t.x,o=t.y,a=t.z,h=t.w,l=this.x-r,u=h-this.y-1-o,c=this.z;return this.x=2*l/a-1,this.y=2*u/h-1,this.z=2*c-1,this.project(i)},reset:function reset(){return this.x=0,this.y=0,this.z=0,this}});o.ZERO=new o,o.RIGHT=new o(1,0,0),o.LEFT=new o(-1,0,0),o.UP=new o(0,-1,0),o.DOWN=new o(0,1,0),o.FORWARD=new o(0,0,1),o.BACK=new o(0,0,-1),o.ONE=new o(1,1,1),t.exports=o},function(t,i){t.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},function(t,i,r){var o=r(24),a=r(57);t.exports=function RotateMatrix(t,i){if(void 0===i&&(i=90),!o(t))return null;if("string"!=typeof i&&(i=(i%360+360)%360),90===i||-270===i||"rotateLeft"===i)(t=a(t)).reverse();else if(-90===i||270===i||"rotateRight"===i)t.reverse(),t=a(t);else if(180===Math.abs(i)||"rotate180"===i){for(var r=0;r<t.length;r++)t[r].reverse();t.reverse()}return t}},function(t,i){t.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(t,i){t.exports=function FloatBetween(t,i){return Math.random()*(i-t)+t}},function(t,i,r){var o=r(4);t.exports=function DegToRad(t){return t*o.DEG_TO_RAD}},function(t,i,r){var o=r(0),a=r(14),h=1e-6,l=new o({initialize:function Matrix4(t){this.val=new Float32Array(16),t?this.copy(t):this.identity()},clone:function clone(){return new l(this)},set:function set(t){return this.copy(t)},setValues:function setValues(t,i,r,o,a,h,l,u,c,d,p,g,v,m,y,T){var S=this.val;return S[0]=t,S[1]=i,S[2]=r,S[3]=o,S[4]=a,S[5]=h,S[6]=l,S[7]=u,S[8]=c,S[9]=d,S[10]=p,S[11]=g,S[12]=v,S[13]=m,S[14]=y,S[15]=T,this},copy:function copy(t){var i=t.val;return this.setValues(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9],i[10],i[11],i[12],i[13],i[14],i[15])},fromArray:function fromArray(t){return this.setValues(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},zero:function zero(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function transform(t,i,r){var o=u.fromQuat(r).val,a=i.x,h=i.y,l=i.z;return this.setValues(o[0]*a,o[1]*a,o[2]*a,0,o[4]*h,o[5]*h,o[6]*h,0,o[8]*l,o[9]*l,o[10]*l,0,t.x,t.y,t.z,1)},xyz:function xyz(t,i,r){this.identity();var o=this.val;return o[12]=t,o[13]=i,o[14]=r,this},scaling:function scaling(t,i,r){this.zero();var o=this.val;return o[0]=t,o[5]=i,o[10]=r,o[15]=1,this},identity:function identity(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function transpose(){var t=this.val,i=t[1],r=t[2],o=t[3],a=t[6],h=t[7],l=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=i,t[6]=t[9],t[7]=t[13],t[8]=r,t[9]=a,t[11]=t[14],t[12]=o,t[13]=h,t[14]=l,this},getInverse:function getInverse(t){return this.copy(t),this.invert()},invert:function invert(){var t=this.val,i=t[0],r=t[1],o=t[2],a=t[3],h=t[4],l=t[5],u=t[6],c=t[7],d=t[8],p=t[9],g=t[10],v=t[11],m=t[12],y=t[13],T=t[14],S=t[15],w=i*l-r*h,b=i*u-o*h,C=i*c-a*h,A=r*u-o*l,E=r*c-a*l,M=o*c-a*u,_=d*y-p*m,R=d*T-g*m,P=d*S-v*m,k=p*T-g*y,O=p*S-v*y,L=g*S-v*T,D=w*L-b*O+C*k+A*P-E*R+M*_;return D?(D=1/D,this.setValues((l*L-u*O+c*k)*D,(o*O-r*L-a*k)*D,(y*M-T*E+S*A)*D,(g*E-p*M-v*A)*D,(u*P-h*L-c*R)*D,(i*L-o*P+a*R)*D,(T*C-m*M-S*b)*D,(d*M-g*C+v*b)*D,(h*O-l*P+c*_)*D,(r*P-i*O-a*_)*D,(m*E-y*C+S*w)*D,(p*C-d*E-v*w)*D,(l*R-h*k-u*_)*D,(i*k-r*R+o*_)*D,(y*b-m*A-T*w)*D,(d*A-p*b+g*w)*D)):this},adjoint:function adjoint(){var t=this.val,i=t[0],r=t[1],o=t[2],a=t[3],h=t[4],l=t[5],u=t[6],c=t[7],d=t[8],p=t[9],g=t[10],v=t[11],m=t[12],y=t[13],T=t[14],S=t[15];return this.setValues(l*(g*S-v*T)-p*(u*S-c*T)+y*(u*v-c*g),-(r*(g*S-v*T)-p*(o*S-a*T)+y*(o*v-a*g)),r*(u*S-c*T)-l*(o*S-a*T)+y*(o*c-a*u),-(r*(u*v-c*g)-l*(o*v-a*g)+p*(o*c-a*u)),-(h*(g*S-v*T)-d*(u*S-c*T)+m*(u*v-c*g)),i*(g*S-v*T)-d*(o*S-a*T)+m*(o*v-a*g),-(i*(u*S-c*T)-h*(o*S-a*T)+m*(o*c-a*u)),i*(u*v-c*g)-h*(o*v-a*g)+d*(o*c-a*u),h*(p*S-v*y)-d*(l*S-c*y)+m*(l*v-c*p),-(i*(p*S-v*y)-d*(r*S-a*y)+m*(r*v-a*p)),i*(l*S-c*y)-h*(r*S-a*y)+m*(r*c-a*l),-(i*(l*v-c*p)-h*(r*v-a*p)+d*(r*c-a*l)),-(h*(p*T-g*y)-d*(l*T-u*y)+m*(l*g-u*p)),i*(p*T-g*y)-d*(r*T-o*y)+m*(r*g-o*p),-(i*(l*T-u*y)-h*(r*T-o*y)+m*(r*u-o*l)),i*(l*g-u*p)-h*(r*g-o*p)+d*(r*u-o*l))},determinant:function determinant(){var t=this.val,i=t[0],r=t[1],o=t[2],a=t[3],h=t[4],l=t[5],u=t[6],c=t[7],d=t[8],p=t[9],g=t[10],v=t[11],m=t[12],y=t[13],T=t[14],S=t[15];return(i*l-r*h)*(g*S-v*T)-(i*u-o*h)*(p*S-v*y)+(i*c-a*h)*(p*T-g*y)+(r*u-o*l)*(d*S-v*m)-(r*c-a*l)*(d*T-g*m)+(o*c-a*u)*(d*y-p*m)},multiply:function multiply(t){var i=this.val,r=i[0],o=i[1],a=i[2],h=i[3],l=i[4],u=i[5],c=i[6],d=i[7],p=i[8],g=i[9],v=i[10],m=i[11],y=i[12],T=i[13],S=i[14],w=i[15],b=t.val,C=b[0],A=b[1],E=b[2],M=b[3];return i[0]=C*r+A*l+E*p+M*y,i[1]=C*o+A*u+E*g+M*T,i[2]=C*a+A*c+E*v+M*S,i[3]=C*h+A*d+E*m+M*w,C=b[4],A=b[5],E=b[6],M=b[7],i[4]=C*r+A*l+E*p+M*y,i[5]=C*o+A*u+E*g+M*T,i[6]=C*a+A*c+E*v+M*S,i[7]=C*h+A*d+E*m+M*w,C=b[8],A=b[9],E=b[10],M=b[11],i[8]=C*r+A*l+E*p+M*y,i[9]=C*o+A*u+E*g+M*T,i[10]=C*a+A*c+E*v+M*S,i[11]=C*h+A*d+E*m+M*w,C=b[12],A=b[13],E=b[14],M=b[15],i[12]=C*r+A*l+E*p+M*y,i[13]=C*o+A*u+E*g+M*T,i[14]=C*a+A*c+E*v+M*S,i[15]=C*h+A*d+E*m+M*w,this},multiplyLocal:function multiplyLocal(t){var i=this.val,r=t.val;return this.setValues(i[0]*r[0]+i[1]*r[4]+i[2]*r[8]+i[3]*r[12],i[0]*r[1]+i[1]*r[5]+i[2]*r[9]+i[3]*r[13],i[0]*r[2]+i[1]*r[6]+i[2]*r[10]+i[3]*r[14],i[0]*r[3]+i[1]*r[7]+i[2]*r[11]+i[3]*r[15],i[4]*r[0]+i[5]*r[4]+i[6]*r[8]+i[7]*r[12],i[4]*r[1]+i[5]*r[5]+i[6]*r[9]+i[7]*r[13],i[4]*r[2]+i[5]*r[6]+i[6]*r[10]+i[7]*r[14],i[4]*r[3]+i[5]*r[7]+i[6]*r[11]+i[7]*r[15],i[8]*r[0]+i[9]*r[4]+i[10]*r[8]+i[11]*r[12],i[8]*r[1]+i[9]*r[5]+i[10]*r[9]+i[11]*r[13],i[8]*r[2]+i[9]*r[6]+i[10]*r[10]+i[11]*r[14],i[8]*r[3]+i[9]*r[7]+i[10]*r[11]+i[11]*r[15],i[12]*r[0]+i[13]*r[4]+i[14]*r[8]+i[15]*r[12],i[12]*r[1]+i[13]*r[5]+i[14]*r[9]+i[15]*r[13],i[12]*r[2]+i[13]*r[6]+i[14]*r[10]+i[15]*r[14],i[12]*r[3]+i[13]*r[7]+i[14]*r[11]+i[15]*r[15])},premultiply:function premultiply(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function multiplyMatrices(t,i){var r=t.val,o=i.val,a=r[0],h=r[4],l=r[8],u=r[12],c=r[1],d=r[5],p=r[9],g=r[13],v=r[2],m=r[6],y=r[10],T=r[14],S=r[3],w=r[7],b=r[11],C=r[15],A=o[0],E=o[4],M=o[8],_=o[12],R=o[1],P=o[5],k=o[9],O=o[13],L=o[2],D=o[6],I=o[10],B=o[14],N=o[3],G=o[7],Y=o[11],U=o[15];return this.setValues(a*A+h*R+l*L+u*N,c*A+d*R+p*L+g*N,v*A+m*R+y*L+T*N,S*A+w*R+b*L+C*N,a*E+h*P+l*D+u*G,c*E+d*P+p*D+g*G,v*E+m*P+y*D+T*G,S*E+w*P+b*D+C*G,a*M+h*k+l*I+u*Y,c*M+d*k+p*I+g*Y,v*M+m*k+y*I+T*Y,S*M+w*k+b*I+C*Y,a*_+h*O+l*B+u*U,c*_+d*O+p*B+g*U,v*_+m*O+y*B+T*U,S*_+w*O+b*B+C*U)},translate:function translate(t){return this.translateXYZ(t.x,t.y,t.z)},translateXYZ:function translateXYZ(t,i,r){var o=this.val;return o[12]=o[0]*t+o[4]*i+o[8]*r+o[12],o[13]=o[1]*t+o[5]*i+o[9]*r+o[13],o[14]=o[2]*t+o[6]*i+o[10]*r+o[14],o[15]=o[3]*t+o[7]*i+o[11]*r+o[15],this},scale:function scale(t){return this.scaleXYZ(t.x,t.y,t.z)},scaleXYZ:function scaleXYZ(t,i,r){var o=this.val;return o[0]=o[0]*t,o[1]=o[1]*t,o[2]=o[2]*t,o[3]=o[3]*t,o[4]=o[4]*i,o[5]=o[5]*i,o[6]=o[6]*i,o[7]=o[7]*i,o[8]=o[8]*r,o[9]=o[9]*r,o[10]=o[10]*r,o[11]=o[11]*r,this},makeRotationAxis:function makeRotationAxis(t,i){var r=Math.cos(i),o=Math.sin(i),a=1-r,h=t.x,l=t.y,u=t.z,c=a*h,d=a*l;return this.setValues(c*h+r,c*l-o*u,c*u+o*l,0,c*l+o*u,d*l+r,d*u-o*h,0,c*u-o*l,d*u+o*h,a*u*u+r,0,0,0,0,1)},rotate:function rotate(t,i){var r=this.val,o=i.x,a=i.y,l=i.z,u=Math.sqrt(o*o+a*a+l*l);if(Math.abs(u)<h)return this;o*=u=1/u,a*=u,l*=u;var c=Math.sin(t),d=Math.cos(t),p=1-d,g=r[0],v=r[1],m=r[2],y=r[3],T=r[4],S=r[5],w=r[6],b=r[7],C=r[8],A=r[9],E=r[10],M=r[11],_=r[12],R=r[13],P=r[14],k=r[15],O=o*o*p+d,L=a*o*p+l*c,D=l*o*p-a*c,I=o*a*p-l*c,B=a*a*p+d,N=l*a*p+o*c,G=o*l*p+a*c,Y=a*l*p-o*c,U=l*l*p+d;return this.setValues(g*O+T*L+C*D,v*O+S*L+A*D,m*O+w*L+E*D,y*O+b*L+M*D,g*I+T*B+C*N,v*I+S*B+A*N,m*I+w*B+E*N,y*I+b*B+M*N,g*G+T*Y+C*U,v*G+S*Y+A*U,m*G+w*Y+E*U,y*G+b*Y+M*U,_,R,P,k)},rotateX:function rotateX(t){var i=this.val,r=Math.sin(t),o=Math.cos(t),a=i[4],h=i[5],l=i[6],u=i[7],c=i[8],d=i[9],p=i[10],g=i[11];return i[4]=a*o+c*r,i[5]=h*o+d*r,i[6]=l*o+p*r,i[7]=u*o+g*r,i[8]=c*o-a*r,i[9]=d*o-h*r,i[10]=p*o-l*r,i[11]=g*o-u*r,this},rotateY:function rotateY(t){var i=this.val,r=Math.sin(t),o=Math.cos(t),a=i[0],h=i[1],l=i[2],u=i[3],c=i[8],d=i[9],p=i[10],g=i[11];return i[0]=a*o-c*r,i[1]=h*o-d*r,i[2]=l*o-p*r,i[3]=u*o-g*r,i[8]=a*r+c*o,i[9]=h*r+d*o,i[10]=l*r+p*o,i[11]=u*r+g*o,this},rotateZ:function rotateZ(t){var i=this.val,r=Math.sin(t),o=Math.cos(t),a=i[0],h=i[1],l=i[2],u=i[3],c=i[4],d=i[5],p=i[6],g=i[7];return i[0]=a*o+c*r,i[1]=h*o+d*r,i[2]=l*o+p*r,i[3]=u*o+g*r,i[4]=c*o-a*r,i[5]=d*o-h*r,i[6]=p*o-l*r,i[7]=g*o-u*r,this},fromRotationTranslation:function fromRotationTranslation(t,i){var r=t.x,o=t.y,a=t.z,h=t.w,l=r+r,u=o+o,c=a+a,d=r*l,p=r*u,g=r*c,v=o*u,m=o*c,y=a*c,T=h*l,S=h*u,w=h*c;return this.setValues(1-(v+y),p+w,g-S,0,p-w,1-(d+y),m+T,0,g+S,m-T,1-(d+v),0,i.x,i.y,i.z,1)},fromQuat:function fromQuat(t){var i=t.x,r=t.y,o=t.z,a=t.w,h=i+i,l=r+r,u=o+o,c=i*h,d=i*l,p=i*u,g=r*l,v=r*u,m=o*u,y=a*h,T=a*l,S=a*u;return this.setValues(1-(g+m),d+S,p-T,0,d-S,1-(c+m),v+y,0,p+T,v-y,1-(c+g),0,0,0,0,1)},frustum:function frustum(t,i,r,o,a,h){var l=1/(i-t),u=1/(o-r),c=1/(a-h);return this.setValues(2*a*l,0,0,0,0,2*a*u,0,0,(i+t)*l,(o+r)*u,(h+a)*c,-1,0,0,h*a*2*c,0)},perspective:function perspective(t,i,r,o){var a=1/Math.tan(t/2),h=1/(r-o);return this.setValues(a/i,0,0,0,0,a,0,0,0,0,(o+r)*h,-1,0,0,2*o*r*h,0)},perspectiveLH:function perspectiveLH(t,i,r,o){return this.setValues(2*r/t,0,0,0,0,2*r/i,0,0,0,0,-o/(r-o),1,0,0,r*o/(r-o),0)},ortho:function ortho(t,i,r,o,a,h){var l=t-i,u=r-o,c=a-h;return l=0===l?l:1/l,u=0===u?u:1/u,c=0===c?c:1/c,this.setValues(-2*l,0,0,0,0,-2*u,0,0,0,0,2*c,0,(t+i)*l,(o+r)*u,(h+a)*c,1)},lookAtRH:function lookAtRH(t,i,r){var o=this.val;return g.subVectors(t,i),0===g.getLengthSquared()&&(g.z=1),g.normalize(),d.crossVectors(r,g),0===d.getLengthSquared()&&(1===Math.abs(r.z)?g.x+=1e-4:g.z+=1e-4,g.normalize(),d.crossVectors(r,g)),d.normalize(),p.crossVectors(g,d),o[0]=d.x,o[1]=d.y,o[2]=d.z,o[4]=p.x,o[5]=p.y,o[6]=p.z,o[8]=g.x,o[9]=g.y,o[10]=g.z,this},lookAt:function lookAt(t,i,r){var o=t.x,a=t.y,l=t.z,u=r.x,c=r.y,d=r.z,p=i.x,g=i.y,v=i.z;if(Math.abs(o-p)<h&&Math.abs(a-g)<h&&Math.abs(l-v)<h)return this.identity();var m=o-p,y=a-g,T=l-v,S=1/Math.sqrt(m*m+y*y+T*T),w=c*(T*=S)-d*(y*=S),b=d*(m*=S)-u*T,C=u*y-c*m;(S=Math.sqrt(w*w+b*b+C*C))?(w*=S=1/S,b*=S,C*=S):(w=0,b=0,C=0);var A=y*C-T*b,E=T*w-m*C,M=m*b-y*w;return(S=Math.sqrt(A*A+E*E+M*M))?(A*=S=1/S,E*=S,M*=S):(A=0,E=0,M=0),this.setValues(w,A,m,0,b,E,y,0,C,M,T,0,-(w*o+b*a+C*l),-(A*o+E*a+M*l),-(m*o+y*a+T*l),1)},yawPitchRoll:function yawPitchRoll(t,i,r){this.zero(),u.zero(),c.zero();var o=this.val,a=u.val,h=c.val,l=Math.sin(r),d=Math.cos(r);return o[10]=1,o[15]=1,o[0]=d,o[1]=l,o[4]=-l,o[5]=d,l=Math.sin(i),d=Math.cos(i),a[0]=1,a[15]=1,a[5]=d,a[10]=d,a[9]=-l,a[6]=l,l=Math.sin(t),d=Math.cos(t),h[5]=1,h[15]=1,h[0]=d,h[2]=-l,h[8]=l,h[10]=d,this.multiplyLocal(u),this.multiplyLocal(c),this},setWorldMatrix:function setWorldMatrix(t,i,r,o,a){return this.yawPitchRoll(t.y,t.x,t.z),u.scaling(r.x,r.y,r.z),c.xyz(i.x,i.y,i.z),this.multiplyLocal(u),this.multiplyLocal(c),o&&this.multiplyLocal(o),a&&this.multiplyLocal(a),this},multiplyToMat4:function multiplyToMat4(t,i){var r=this.val,o=t.val,a=r[0],h=r[1],l=r[2],u=r[3],c=r[4],d=r[5],p=r[6],g=r[7],v=r[8],m=r[9],y=r[10],T=r[11],S=r[12],w=r[13],b=r[14],C=r[15],A=o[0],E=o[1],M=o[2],_=o[3],R=o[4],P=o[5],k=o[6],O=o[7],L=o[8],D=o[9],I=o[10],B=o[11],N=o[12],G=o[13],Y=o[14],U=o[15];return i.setValues(A*a+E*c+M*v+_*S,E*h+E*d+M*m+_*w,M*l+E*p+M*y+_*b,_*u+E*g+M*T+_*C,R*a+P*c+k*v+O*S,R*h+P*d+k*m+O*w,R*l+P*p+k*y+O*b,R*u+P*g+k*T+O*C,L*a+D*c+I*v+B*S,L*h+D*d+I*m+B*w,L*l+D*p+I*y+B*b,L*u+D*g+I*T+B*C,N*a+G*c+Y*v+U*S,N*h+G*d+Y*m+U*w,N*l+G*p+Y*y+U*b,N*u+G*g+Y*T+U*C)},fromRotationXYTranslation:function fromRotationXYTranslation(t,i,r){var o=i.x,a=i.y,h=i.z,l=Math.sin(t.x),u=Math.cos(t.x),c=Math.sin(t.y),d=Math.cos(t.y),p=o,g=a,v=h,m=-l,y=0-m*c,T=0-u*c,S=m*d,w=u*d;return r||(p=d*o+c*h,g=y*o+u*a+S*h,v=T*o+l*a+w*h),this.setValues(d,y,T,0,0,u,l,0,c,S,w,0,p,g,v,1)},getMaxScaleOnAxis:function getMaxScaleOnAxis(){var t=this.val,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],o=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(i,r,o))}}),u=new l,c=new l,d=new a,p=new a,g=new a;t.exports=l},function(t,i,r){var o=r(0),a=r(15),h=r(205),l=r(11),u=r(216),c=r(45),d=r(217),p=r(46),g=new o({initialize:function File(t,i){this.loader=t,this.cache=l(i,"cache",!1),this.type=l(i,"type",!1),this.key=l(i,"key",!1);var r=this.key;if(t.prefix&&""!==t.prefix&&(this.key=t.prefix+r),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var o=l(i,"url");void 0===o?o=t.path+r+"."+l(i,"extension",""):"string"!=typeof o||o.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)||(o=t.path+o),this.url=o,this.src="",this.xhrSettings=p(l(i,"responseType",void 0)),l(i,"xhrSettings",!1)&&(this.xhrSettings=c(this.xhrSettings,l(i,"xhrSettings",{}))),this.xhrLoader=null,this.state="function"==typeof this.url?a.FILE_POPULATED:a.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=l(i,"config",{}),this.multiFile,this.linkFile},setLink:function setLink(t){this.linkFile=t,t.linkFile=this},resetXHR:function resetXHR(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function load(){this.state===a.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=a.FILE_LOADING,this.src=u(this,this.loader.baseURL),0===this.src.indexOf("data:")?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=d(this,this.loader.xhr))},onLoad:function onLoad(t,i){var r=t.responseURL&&0===t.responseURL.indexOf("file://")&&0===i.target.status,o=!(i.target&&200!==i.target.status)||r;4===t.readyState&&t.status>=400&&t.status<=599&&(o=!1),this.state=a.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,o)},onError:function onError(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function onProgress(t){t.lengthComputable&&(this.bytesLoaded=t.loaded,this.bytesTotal=t.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(h.FILE_PROGRESS,this,this.percentComplete))},onProcess:function onProcess(){this.state=a.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function onProcessComplete(){this.state=a.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function onProcessError(){this.state=a.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function hasCacheConflict(){return this.cache&&this.cache.exists(this.key)},addToCache:function addToCache(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function pendingDestroy(t){void 0===t&&(t=this.data);var i=this.key,r=this.type;this.loader.emit(h.FILE_COMPLETE,i,r,t),this.loader.emit(h.FILE_KEY_COMPLETE+r+"-"+i,i,r,t),this.loader.flagForRemoval(this)},destroy:function destroy(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});g.createObjectURL=function(t,i,r){if("function"==typeof URL)t.src=URL.createObjectURL(i);else{var o=new FileReader;o.onload=function(){t.removeAttribute("crossOrigin"),t.src="data:"+(i.type||r)+";base64,"+o.result.split(",")[1]},o.onerror=t.onerror,o.readAsDataURL(i)}},g.revokeObjectURL=function(t){"function"==typeof URL&&URL.revokeObjectURL(t.src)},t.exports=g},function(t,i){var r={},o={install:function install(t){for(var i in r)t[i]=r[i]},register:function register(t,i){r[t]=i},destroy:function destroy(){r={}}};t.exports=o},function(t,i,r){var o=r(0),a=r(4),h=r(2),l=new o({initialize:function TransformMatrix(t,i,r,o,a,h){void 0===t&&(t=1),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=1),void 0===a&&(a=0),void 0===h&&(h=0),this.matrix=new Float32Array([t,i,r,o,a,h,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function get(){return this.matrix[0]},set:function set(t){this.matrix[0]=t}},b:{get:function get(){return this.matrix[1]},set:function set(t){this.matrix[1]=t}},c:{get:function get(){return this.matrix[2]},set:function set(t){this.matrix[2]=t}},d:{get:function get(){return this.matrix[3]},set:function set(t){this.matrix[3]=t}},e:{get:function get(){return this.matrix[4]},set:function set(t){this.matrix[4]=t}},f:{get:function get(){return this.matrix[5]},set:function set(t){this.matrix[5]=t}},tx:{get:function get(){return this.matrix[4]},set:function set(t){this.matrix[4]=t}},ty:{get:function get(){return this.matrix[5]},set:function set(t){this.matrix[5]=t}},rotation:{get:function get(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function get(){var t=this.matrix,i=t[0],r=t[1],o=t[2],h=t[3];return i||r?r>0?Math.acos(i/this.scaleX):-Math.acos(i/this.scaleX):o||h?a.TAU-(h>0?Math.acos(-o/this.scaleY):-Math.acos(o/this.scaleY)):0}},scaleX:{get:function get(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function get(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function loadIdentity(){var t=this.matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},translate:function translate(t,i){var r=this.matrix;return r[4]=r[0]*t+r[2]*i+r[4],r[5]=r[1]*t+r[3]*i+r[5],this},scale:function scale(t,i){var r=this.matrix;return r[0]*=t,r[1]*=t,r[2]*=i,r[3]*=i,this},rotate:function rotate(t){var i=Math.sin(t),r=Math.cos(t),o=this.matrix,a=o[0],h=o[1],l=o[2],u=o[3];return o[0]=a*r+l*i,o[1]=h*r+u*i,o[2]=a*-i+l*r,o[3]=h*-i+u*r,this},multiply:function multiply(t,i){var r=this.matrix,o=t.matrix,a=r[0],h=r[1],l=r[2],u=r[3],c=r[4],d=r[5],p=o[0],g=o[1],v=o[2],m=o[3],y=o[4],T=o[5],S=void 0===i?this:i;return S.a=p*a+g*l,S.b=p*h+g*u,S.c=v*a+m*l,S.d=v*h+m*u,S.e=y*a+T*l+c,S.f=y*h+T*u+d,S},multiplyWithOffset:function multiplyWithOffset(t,i,r){var o=this.matrix,a=t.matrix,h=o[0],l=o[1],u=o[2],c=o[3],d=i*h+r*u+o[4],p=i*l+r*c+o[5],g=a[0],v=a[1],m=a[2],y=a[3],T=a[4],S=a[5];return o[0]=g*h+v*u,o[1]=g*l+v*c,o[2]=m*h+y*u,o[3]=m*l+y*c,o[4]=T*h+S*u+d,o[5]=T*l+S*c+p,this},transform:function transform(t,i,r,o,a,h){var l=this.matrix,u=l[0],c=l[1],d=l[2],p=l[3],g=l[4],v=l[5];return l[0]=t*u+i*d,l[1]=t*c+i*p,l[2]=r*u+o*d,l[3]=r*c+o*p,l[4]=a*u+h*d+g,l[5]=a*c+h*p+v,this},transformPoint:function transformPoint(t,i,r){void 0===r&&(r={x:0,y:0});var o=this.matrix,a=o[0],h=o[1],l=o[2],u=o[3],c=o[4],d=o[5];return r.x=t*a+i*l+c,r.y=t*h+i*u+d,r},invert:function invert(){var t=this.matrix,i=t[0],r=t[1],o=t[2],a=t[3],h=t[4],l=t[5],u=i*a-r*o;return t[0]=a/u,t[1]=-r/u,t[2]=-o/u,t[3]=i/u,t[4]=(o*l-a*h)/u,t[5]=-(i*l-r*h)/u,this},copyFrom:function copyFrom(t){var i=this.matrix;return i[0]=t.a,i[1]=t.b,i[2]=t.c,i[3]=t.d,i[4]=t.e,i[5]=t.f,this},copyFromArray:function copyFromArray(t){var i=this.matrix;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],this},copyToContext:function copyToContext(t){var i=this.matrix;return t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),t},setToContext:function setToContext(t){var i=this.matrix;return t.setTransform(i[0],i[1],i[2],i[3],i[4],i[5]),t},copyToArray:function copyToArray(t){var i=this.matrix;return void 0===t?t=[i[0],i[1],i[2],i[3],i[4],i[5]]:(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5]),t},setTransform:function setTransform(t,i,r,o,a,h){var l=this.matrix;return l[0]=t,l[1]=i,l[2]=r,l[3]=o,l[4]=a,l[5]=h,this},decomposeMatrix:function decomposeMatrix(){var t=this.decomposedMatrix,i=this.matrix,r=i[0],o=i[1],a=i[2],h=i[3],l=r*h-o*a;if(t.translateX=i[4],t.translateY=i[5],r||o){var u=Math.sqrt(r*r+o*o);t.rotation=o>0?Math.acos(r/u):-Math.acos(r/u),t.scaleX=u,t.scaleY=l/u}else if(a||h){var c=Math.sqrt(a*a+h*h);t.rotation=.5*Math.PI-(h>0?Math.acos(-a/c):-Math.acos(a/c)),t.scaleX=l/c,t.scaleY=c}else t.rotation=0,t.scaleX=0,t.scaleY=0;return t},applyITRS:function applyITRS(t,i,r,o,a){var h=this.matrix,l=Math.sin(r),u=Math.cos(r);return h[4]=t,h[5]=i,h[0]=u*o,h[1]=l*o,h[2]=-l*a,h[3]=u*a,this},applyInverse:function applyInverse(t,i,r){void 0===r&&(r=new h);var o=this.matrix,a=o[0],l=o[1],u=o[2],c=o[3],d=o[4],p=o[5],g=1/(a*c+u*-l);return r.x=c*g*t+-u*g*i+(p*u-d*c)*g,r.y=a*g*i+-l*g*t+(-p*a+d*l)*g,r},getX:function getX(t,i){return t*this.a+i*this.c+this.e},getY:function getY(t,i){return t*this.b+i*this.d+this.f},getXRound:function getXRound(t,i,r){var o=this.getX(t,i);return r&&(o=Math.round(o)),o},getYRound:function getYRound(t,i,r){var o=this.getY(t,i);return r&&(o=Math.round(o)),o},getCSSMatrix:function getCSSMatrix(){var t=this.matrix;return"matrix("+t[0]+","+t[1]+","+t[2]+","+t[3]+","+t[4]+","+t[5]+")"},destroy:function destroy(){this.matrix=null,this.decomposedMatrix=null}});t.exports=l},function(t,i){t.exports=function CheckMatrix(t){if(!Array.isArray(t)||t.length<2||!Array.isArray(t[0]))return!1;for(var i=t[0].length,r=1;r<t.length;r++)if(t[r].length!==i)return!1;return!0}},function(t,i,r){var o=r(0),a=r(299),h=r(61),l=r(300),u=r(26),c=r(301),d=r(306),p=new o({initialize:function Rectangle(t,i,r,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=0),this.type=u.RECTANGLE,this.x=t,this.y=i,this.width=r,this.height=o},contains:function contains(t,i){return a(this,t,i)},getPoint:function getPoint(t,i){return h(this,t,i)},getPoints:function getPoints(t,i,r){return l(this,t,i,r)},getRandomPoint:function getRandomPoint(t){return d(this,t)},setTo:function setTo(t,i,r,o){return this.x=t,this.y=i,this.width=r,this.height=o,this},setEmpty:function setEmpty(){return this.setTo(0,0,0,0)},setPosition:function setPosition(t,i){return void 0===i&&(i=t),this.x=t,this.y=i,this},setSize:function setSize(t,i){return void 0===i&&(i=t),this.width=t,this.height=i,this},isEmpty:function isEmpty(){return this.width<=0||this.height<=0},getLineA:function getLineA(t){return void 0===t&&(t=new c),t.setTo(this.x,this.y,this.right,this.y),t},getLineB:function getLineB(t){return void 0===t&&(t=new c),t.setTo(this.right,this.y,this.right,this.bottom),t},getLineC:function getLineC(t){return void 0===t&&(t=new c),t.setTo(this.right,this.bottom,this.x,this.bottom),t},getLineD:function getLineD(t){return void 0===t&&(t=new c),t.setTo(this.x,this.bottom,this.x,this.y),t},left:{get:function get(){return this.x},set:function set(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}},right:{get:function get(){return this.x+this.width},set:function set(t){t<=this.x?this.width=0:this.width=t-this.x}},top:{get:function get(){return this.y},set:function set(t){t>=this.bottom?this.height=0:this.height=this.bottom-t,this.y=t}},bottom:{get:function get(){return this.y+this.height},set:function set(t){t<=this.y?this.height=0:this.height=t-this.y}},centerX:{get:function get(){return this.x+this.width/2},set:function set(t){this.x=t-this.width/2}},centerY:{get:function get(){return this.y+this.height/2},set:function set(t){this.y=t-this.height/2}}});t.exports=p},function(t,i){t.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},function(t,i,r){var o=r(7);t.exports=function Extend(){var t,i,r,a,h,l,u=arguments[0]||{},c=1,d=arguments.length,p=!1;for("boolean"==typeof u&&(p=u,u=arguments[1]||{},c=2),d===c&&(u=this,--c);c<d;c++)if(null!=(t=arguments[c]))for(i in t)r=u[i],u!==(a=t[i])&&(p&&a&&(o(a)||(h=Array.isArray(a)))?(h?(h=!1,l=r&&Array.isArray(r)?r:[]):l=r&&o(r)?r:{},u[i]=Extend(p,l,a)):void 0!==a&&(u[i]=a));return u}},function(t,i){t.exports=function Between(t,i,r,o){return Math.atan2(o-i,r-t)}},function(t,i){t.exports=function Normalize(t){return(t%=2*Math.PI)>=0?t:t+2*Math.PI}},function(t,i,r){var o=r(6);t.exports=function Wrap(t){return o(t,-Math.PI,Math.PI)}},function(t,i,r){var o=r(6);t.exports=function WrapDegrees(t){return o(t,-180,180)}},function(t,i){t.exports=function Equal(t,i,r){return void 0===r&&(r=1e-4),Math.abs(t-i)<r}},function(t,i,r){var o=r(34);t.exports=function Bernstein(t,i){return o(t)/o(i)/o(t-i)}},function(t,i){t.exports=function Factorial(t){if(0===t)return 1;for(var i=t;--t;)i*=t;return i}},function(t,i){t.exports=function CatmullRom(t,i,r,o,a){var h=.5*(o-i),l=.5*(a-r),u=t*t;return(2*r-2*o+h+l)*(t*u)+(-3*r+3*o-2*h-l)*u+h*t+r}},function(t,i){t.exports=function Linear(t,i,r){return(i-t)*r+t}},function(t,i){t.exports=function SmoothStep(t,i,r){return t<=i?0:t>=r?1:(t=(t-i)/(r-i))*t*(3-2*t)}},function(t,i){t.exports=function SmootherStep(t,i,r){return(t=Math.max(0,Math.min(1,(t-i)/(r-i))))*t*t*(t*(6*t-15)+10)}},function(t,i){t.exports=function RotateAround(t,i,r,o){var a=Math.cos(o),h=Math.sin(o),l=t.x-i,u=t.y-r;return t.x=l*a-u*h+i,t.y=l*h+u*a+r,t}},function(t,i){t.exports=function RoundAwayFromZero(t){return t>0?Math.ceil(t):Math.floor(t)}},function(t,i,r){var o=r(2);t.exports=function TransformXY(t,i,r,a,h,l,u,c){void 0===c&&(c=new o);var d=Math.sin(h),p=Math.cos(h),g=p*l,v=d*l,m=-d*u,y=p*u,T=1/(g*y+m*-v);return c.x=y*T*t+-m*T*i+(a*m-r*y)*T,c.y=g*T*i+-v*T*t+(-a*g+r*v)*T,c}},function(t,i,r){var o=new(r(0))({initialize:function Matrix3(t){this.val=new Float32Array(9),t?this.copy(t):this.identity()},clone:function clone(){return new o(this)},set:function set(t){return this.copy(t)},copy:function copy(t){var i=this.val,r=t.val;return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],this},fromMat4:function fromMat4(t){var i=t.val,r=this.val;return r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[4],r[4]=i[5],r[5]=i[6],r[6]=i[8],r[7]=i[9],r[8]=i[10],this},fromArray:function fromArray(t){var i=this.val;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],this},identity:function identity(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},transpose:function transpose(){var t=this.val,i=t[1],r=t[2],o=t[5];return t[1]=t[3],t[2]=t[6],t[3]=i,t[5]=t[7],t[6]=r,t[7]=o,this},invert:function invert(){var t=this.val,i=t[0],r=t[1],o=t[2],a=t[3],h=t[4],l=t[5],u=t[6],c=t[7],d=t[8],p=d*h-l*c,g=-d*a+l*u,v=c*a-h*u,m=i*p+r*g+o*v;return m?(m=1/m,t[0]=p*m,t[1]=(-d*r+o*c)*m,t[2]=(l*r-o*h)*m,t[3]=g*m,t[4]=(d*i-o*u)*m,t[5]=(-l*i+o*a)*m,t[6]=v*m,t[7]=(-c*i+r*u)*m,t[8]=(h*i-r*a)*m,this):null},adjoint:function adjoint(){var t=this.val,i=t[0],r=t[1],o=t[2],a=t[3],h=t[4],l=t[5],u=t[6],c=t[7],d=t[8];return t[0]=h*d-l*c,t[1]=o*c-r*d,t[2]=r*l-o*h,t[3]=l*u-a*d,t[4]=i*d-o*u,t[5]=o*a-i*l,t[6]=a*c-h*u,t[7]=r*u-i*c,t[8]=i*h-r*a,this},determinant:function determinant(){var t=this.val,i=t[0],r=t[1],o=t[2],a=t[3],h=t[4],l=t[5],u=t[6],c=t[7],d=t[8];return i*(d*h-l*c)+r*(-d*a+l*u)+o*(c*a-h*u)},multiply:function multiply(t){var i=this.val,r=i[0],o=i[1],a=i[2],h=i[3],l=i[4],u=i[5],c=i[6],d=i[7],p=i[8],g=t.val,v=g[0],m=g[1],y=g[2],T=g[3],S=g[4],w=g[5],b=g[6],C=g[7],A=g[8];return i[0]=v*r+m*h+y*c,i[1]=v*o+m*l+y*d,i[2]=v*a+m*u+y*p,i[3]=T*r+S*h+w*c,i[4]=T*o+S*l+w*d,i[5]=T*a+S*u+w*p,i[6]=b*r+C*h+A*c,i[7]=b*o+C*l+A*d,i[8]=b*a+C*u+A*p,this},translate:function translate(t){var i=this.val,r=t.x,o=t.y;return i[6]=r*i[0]+o*i[3]+i[6],i[7]=r*i[1]+o*i[4]+i[7],i[8]=r*i[2]+o*i[5]+i[8],this},rotate:function rotate(t){var i=this.val,r=i[0],o=i[1],a=i[2],h=i[3],l=i[4],u=i[5],c=Math.sin(t),d=Math.cos(t);return i[0]=d*r+c*h,i[1]=d*o+c*l,i[2]=d*a+c*u,i[3]=d*h-c*r,i[4]=d*l-c*o,i[5]=d*u-c*a,this},scale:function scale(t){var i=this.val,r=t.x,o=t.y;return i[0]=r*i[0],i[1]=r*i[1],i[2]=r*i[2],i[3]=o*i[3],i[4]=o*i[4],i[5]=o*i[5],this},fromQuat:function fromQuat(t){var i=t.x,r=t.y,o=t.z,a=t.w,h=i+i,l=r+r,u=o+o,c=i*h,d=i*l,p=i*u,g=r*l,v=r*u,m=o*u,y=a*h,T=a*l,S=a*u,w=this.val;return w[0]=1-(g+m),w[3]=d+S,w[6]=p-T,w[1]=d-S,w[4]=1-(c+m),w[7]=v+y,w[2]=p+T,w[5]=v-y,w[8]=1-(c+g),this},normalFromMat4:function normalFromMat4(t){var i=t.val,r=this.val,o=i[0],a=i[1],h=i[2],l=i[3],u=i[4],c=i[5],d=i[6],p=i[7],g=i[8],v=i[9],m=i[10],y=i[11],T=i[12],S=i[13],w=i[14],b=i[15],C=o*c-a*u,A=o*d-h*u,E=o*p-l*u,M=a*d-h*c,_=a*p-l*c,R=h*p-l*d,P=g*S-v*T,k=g*w-m*T,O=g*b-y*T,L=v*w-m*S,D=v*b-y*S,I=m*b-y*w,B=C*I-A*D+E*L+M*O-_*k+R*P;return B?(B=1/B,r[0]=(c*I-d*D+p*L)*B,r[1]=(d*O-u*I-p*k)*B,r[2]=(u*D-c*O+p*P)*B,r[3]=(h*D-a*I-l*L)*B,r[4]=(o*I-h*O+l*k)*B,r[5]=(a*O-o*D-l*P)*B,r[6]=(S*R-w*_+b*M)*B,r[7]=(w*E-T*R-b*A)*B,r[8]=(T*_-S*E+b*C)*B,this):null}});t.exports=o},function(t,i,r){var o=r(0),a=r(42),h=r(1),l=r(14),u=1e-6,c=new Int8Array([1,2,0]),d=new Float32Array([0,0,0]),p=new l(1,0,0),g=new l(0,1,0),v=new l,m=new a,y=new o({initialize:function Quaternion(t,i,r,o){this.onChangeCallback=h,this.set(t,i,r,o)},x:{get:function get(){return this._x},set:function set(t){this._x=t,this.onChangeCallback(this)}},y:{get:function get(){return this._y},set:function set(t){this._y=t,this.onChangeCallback(this)}},z:{get:function get(){return this._z},set:function set(t){this._z=t,this.onChangeCallback(this)}},w:{get:function get(){return this._w},set:function set(t){this._w=t,this.onChangeCallback(this)}},copy:function copy(t){return this.set(t)},set:function set(t,i,r,o,a){return void 0===a&&(a=!0),"object"===_typeof(t)?(this._x=t.x||0,this._y=t.y||0,this._z=t.z||0,this._w=t.w||0):(this._x=t||0,this._y=i||0,this._z=r||0,this._w=o||0),a&&this.onChangeCallback(this),this},add:function add(t){return this._x+=t.x,this._y+=t.y,this._z+=t.z,this._w+=t.w,this.onChangeCallback(this),this},subtract:function subtract(t){return this._x-=t.x,this._y-=t.y,this._z-=t.z,this._w-=t.w,this.onChangeCallback(this),this},scale:function scale(t){return this._x*=t,this._y*=t,this._z*=t,this._w*=t,this.onChangeCallback(this),this},length:function length(){var t=this.x,i=this.y,r=this.z,o=this.w;return Math.sqrt(t*t+i*i+r*r+o*o)},lengthSq:function lengthSq(){var t=this.x,i=this.y,r=this.z,o=this.w;return t*t+i*i+r*r+o*o},normalize:function normalize(){var t=this.x,i=this.y,r=this.z,o=this.w,a=t*t+i*i+r*r+o*o;return a>0&&(a=1/Math.sqrt(a),this._x=t*a,this._y=i*a,this._z=r*a,this._w=o*a),this.onChangeCallback(this),this},dot:function dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function lerp(t,i){void 0===i&&(i=0);var r=this.x,o=this.y,a=this.z,h=this.w;return this.set(r+i*(t.x-r),o+i*(t.y-o),a+i*(t.z-a),h+i*(t.w-h))},rotationTo:function rotationTo(t,i){var r=t.x*i.x+t.y*i.y+t.z*i.z;return r<-.999999?(v.copy(p).cross(t).length()<u&&v.copy(g).cross(t),v.normalize(),this.setAxisAngle(v,Math.PI)):r>.999999?this.set(0,0,0,1):(v.copy(t).cross(i),this._x=v.x,this._y=v.y,this._z=v.z,this._w=1+r,this.normalize())},setAxes:function setAxes(t,i,r){var o=m.val;return o[0]=i.x,o[3]=i.y,o[6]=i.z,o[1]=r.x,o[4]=r.y,o[7]=r.z,o[2]=-t.x,o[5]=-t.y,o[8]=-t.z,this.fromMat3(m).normalize()},identity:function identity(){return this.set(0,0,0,1)},setAxisAngle:function setAxisAngle(t,i){i*=.5;var r=Math.sin(i);return this.set(r*t.x,r*t.y,r*t.z,Math.cos(i))},multiply:function multiply(t){var i=this.x,r=this.y,o=this.z,a=this.w,h=t.x,l=t.y,u=t.z,c=t.w;return this.set(i*c+a*h+r*u-o*l,r*c+a*l+o*h-i*u,o*c+a*u+i*l-r*h,a*c-i*h-r*l-o*u)},slerp:function slerp(t,i){var r=this.x,o=this.y,a=this.z,h=this.w,l=t.x,c=t.y,d=t.z,p=t.w,g=r*l+o*c+a*d+h*p;g<0&&(g=-g,l=-l,c=-c,d=-d,p=-p);var v=1-i,m=i;if(1-g>u){var y=Math.acos(g),T=Math.sin(y);v=Math.sin((1-i)*y)/T,m=Math.sin(i*y)/T}return this.set(v*r+m*l,v*o+m*c,v*a+m*d,v*h+m*p)},invert:function invert(){var t=this.x,i=this.y,r=this.z,o=this.w,a=t*t+i*i+r*r+o*o,h=a?1/a:0;return this.set(-t*h,-i*h,-r*h,o*h)},conjugate:function conjugate(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function rotateX(t){t*=.5;var i=this.x,r=this.y,o=this.z,a=this.w,h=Math.sin(t),l=Math.cos(t);return this.set(i*l+a*h,r*l+o*h,o*l-r*h,a*l-i*h)},rotateY:function rotateY(t){t*=.5;var i=this.x,r=this.y,o=this.z,a=this.w,h=Math.sin(t),l=Math.cos(t);return this.set(i*l-o*h,r*l+a*h,o*l+i*h,a*l-r*h)},rotateZ:function rotateZ(t){t*=.5;var i=this.x,r=this.y,o=this.z,a=this.w,h=Math.sin(t),l=Math.cos(t);return this.set(i*l+r*h,r*l-i*h,o*l+a*h,a*l-o*h)},calculateW:function calculateW(){var t=this.x,i=this.y,r=this.z;return this.w=-Math.sqrt(1-t*t-i*i-r*r),this},setFromEuler:function setFromEuler(t,i){var r=t.x/2,o=t.y/2,a=t.z/2,h=Math.cos(r),l=Math.cos(o),u=Math.cos(a),c=Math.sin(r),d=Math.sin(o),p=Math.sin(a);switch(t.order){case"XYZ":this.set(c*l*u+h*d*p,h*d*u-c*l*p,h*l*p+c*d*u,h*l*u-c*d*p,i);break;case"YXZ":this.set(c*l*u+h*d*p,h*d*u-c*l*p,h*l*p-c*d*u,h*l*u+c*d*p,i);break;case"ZXY":this.set(c*l*u-h*d*p,h*d*u+c*l*p,h*l*p+c*d*u,h*l*u-c*d*p,i);break;case"ZYX":this.set(c*l*u-h*d*p,h*d*u+c*l*p,h*l*p-c*d*u,h*l*u+c*d*p,i);break;case"YZX":this.set(c*l*u+h*d*p,h*d*u+c*l*p,h*l*p-c*d*u,h*l*u-c*d*p,i);break;case"XZY":this.set(c*l*u-h*d*p,h*d*u-c*l*p,h*l*p+c*d*u,h*l*u+c*d*p,i)}return this},setFromRotationMatrix:function setFromRotationMatrix(t){var i,r=t.val,o=r[0],a=r[4],h=r[8],l=r[1],u=r[5],c=r[9],d=r[2],p=r[6],g=r[10],v=o+u+g;return v>0?(i=.5/Math.sqrt(v+1),this.set((p-c)*i,(h-d)*i,(l-a)*i,.25/i)):o>u&&o>g?(i=2*Math.sqrt(1+o-u-g),this.set(.25*i,(a+l)/i,(h+d)/i,(p-c)/i)):u>g?(i=2*Math.sqrt(1+u-o-g),this.set((a+l)/i,.25*i,(c+p)/i,(h-d)/i)):(i=2*Math.sqrt(1+g-o-u),this.set((h+d)/i,(c+p)/i,.25*i,(l-a)/i)),this},fromMat3:function fromMat3(t){var i,r=t.val,o=r[0]+r[4]+r[8];if(o>0)i=Math.sqrt(o+1),this.w=.5*i,i=.5/i,this._x=(r[7]-r[5])*i,this._y=(r[2]-r[6])*i,this._z=(r[3]-r[1])*i;else{var a=0;r[4]>r[0]&&(a=1),r[8]>r[3*a+a]&&(a=2);var h=c[a],l=c[h];i=Math.sqrt(r[3*a+a]-r[3*h+h]-r[3*l+l]+1),d[a]=.5*i,i=.5/i,d[h]=(r[3*h+a]+r[3*a+h])*i,d[l]=(r[3*l+a]+r[3*a+l])*i,this._x=d[0],this._y=d[1],this._z=d[2],this._w=(r[3*l+h]-r[3*h+l])*i}return this.onChangeCallback(this),this}});t.exports=y},function(t,i,r){t.exports={ADDED_TO_SCENE:r(180),BOOT:r(181),CREATE:r(182),DESTROY:r(183),PAUSE:r(184),POST_UPDATE:r(185),PRE_RENDER:r(186),PRE_UPDATE:r(187),READY:r(188),REMOVED_FROM_SCENE:r(189),RENDER:r(190),RESUME:r(191),SHUTDOWN:r(192),SLEEP:r(193),START:r(194),TRANSITION_COMPLETE:r(195),TRANSITION_INIT:r(196),TRANSITION_OUT:r(197),TRANSITION_START:r(198),TRANSITION_WAKE:r(199),UPDATE:r(200),WAKE:r(201)}},function(t,i,r){var o=r(27),a=r(46);t.exports=function MergeXHRSettings(t,i){var r=void 0===t?a():o({},t);if(i)for(var h in i)void 0!==i[h]&&(r[h]=i[h]);return r}},function(t,i){t.exports=function XHRSettings(t,i,r,o,a,h){return void 0===t&&(t=""),void 0===i&&(i=!0),void 0===r&&(r=""),void 0===o&&(o=""),void 0===a&&(a=0),void 0===h&&(h=!1),{responseType:t,async:i,user:r,password:o,timeout:a,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:h}}},function(t,i){t.exports={width:0,height:0,displayWidth:{get:function get(){return this.scaleX*this.width},set:function set(t){this.scaleX=t/this.width}},displayHeight:{get:function get(){return this.scaleY*this.height},set:function set(t){this.scaleY=t/this.height}},setSize:function setSize(t,i){return this.width=t,this.height=i,this},setDisplaySize:function setDisplaySize(t,i){return this.displayWidth=t,this.displayHeight=i,this}}},function(t,i){var r={_depth:0,depth:{get:function get(){return this._depth},set:function set(t){this.displayList&&this.displayList.queueDepthSort(),this._depth=t}},setDepth:function setDepth(t){return void 0===t&&(t=0),this.depth=t,this}};t.exports=r},function(t,i){t.exports={flipX:!1,flipY:!1,toggleFlipX:function toggleFlipX(){return this.flipX=!this.flipX,this},toggleFlipY:function toggleFlipY(){return this.flipY=!this.flipY,this},setFlipX:function setFlipX(t){return this.flipX=t,this},setFlipY:function setFlipY(t){return this.flipY=t,this},setFlip:function setFlip(t,i){return this.flipX=t,this.flipY=i,this},resetFlip:function resetFlip(){return this.flipX=!1,this.flipY=!1,this}}},function(t,i){var r={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function setScrollFactor(t,i){return void 0===i&&(i=t),this.scrollFactorX=t,this.scrollFactorY=i,this}};t.exports=r},function(t,i,r){var o=r(4),a=r(23),h=r(41),l=r(30),u=r(31),c=r(2),d={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function get(){return(this._scaleX+this._scaleY)/2},set:function set(t){this._scaleX=t,this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function get(){return this._scaleX},set:function set(t){this._scaleX=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleY:{get:function get(){return this._scaleY},set:function set(t){this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},angle:{get:function get(){return u(this._rotation*o.RAD_TO_DEG)},set:function set(t){this.rotation=u(t)*o.DEG_TO_RAD}},rotation:{get:function get(){return this._rotation},set:function set(t){this._rotation=l(t)}},setPosition:function setPosition(t,i,r,o){return void 0===t&&(t=0),void 0===i&&(i=t),void 0===r&&(r=0),void 0===o&&(o=0),this.x=t,this.y=i,this.z=r,this.w=o,this},copyPosition:function copyPosition(t){return void 0!==t.x&&(this.x=t.x),void 0!==t.y&&(this.y=t.y),void 0!==t.z&&(this.z=t.z),void 0!==t.w&&(this.w=t.w),this},setRandomPosition:function setRandomPosition(t,i,r,o){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=this.scene.sys.scale.width),void 0===o&&(o=this.scene.sys.scale.height),this.x=t+Math.random()*r,this.y=i+Math.random()*o,this},setRotation:function setRotation(t){return void 0===t&&(t=0),this.rotation=t,this},setAngle:function setAngle(t){return void 0===t&&(t=0),this.angle=t,this},setScale:function setScale(t,i){return void 0===t&&(t=1),void 0===i&&(i=t),this.scaleX=t,this.scaleY=i,this},setX:function setX(t){return void 0===t&&(t=0),this.x=t,this},setY:function setY(t){return void 0===t&&(t=0),this.y=t,this},setZ:function setZ(t){return void 0===t&&(t=0),this.z=t,this},setW:function setW(t){return void 0===t&&(t=0),this.w=t,this},getLocalTransformMatrix:function getLocalTransformMatrix(t){return void 0===t&&(t=new a),t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function getWorldTransformMatrix(t,i){void 0===t&&(t=new a),void 0===i&&(i=new a);var r=this.parentContainer;if(!r)return this.getLocalTransformMatrix(t);for(t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);r;)i.applyITRS(r.x,r.y,r._rotation,r._scaleX,r._scaleY),i.multiply(t,t),r=r.parentContainer;return t},getLocalPoint:function getLocalPoint(t,i,r,o){r||(r=new c),o||(o=this.scene.sys.cameras.main);var a=o.scrollX,l=o.scrollY,u=t+a*this.scrollFactorX-a,d=i+l*this.scrollFactorY-l;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(u,d,r):h(u,d,this.x,this.y,this.rotation,this.scaleX,this.scaleY,r),this._originComponent&&(r.x+=this._displayOriginX,r.y+=this._displayOriginY),r},getParentRotation:function getParentRotation(){for(var t=0,i=this.parentContainer;i;)t+=i.rotation,i=i.parentContainer;return t}};t.exports=d},function(t,i){var r={_visible:!0,visible:{get:function get(){return this._visible},set:function set(t){t?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function setVisible(t){return this.visible=t,this}};t.exports=r},function(t,i,r){var o=r(0),a=r(54),h=r(222),l=r(229),u=r(55),c=r(44),d=new o({Extends:l,initialize:function GameObject(t,i){l.call(this),this.scene=t,this.displayList=null,this.type=i,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(u.ADDED_TO_SCENE,this.addedToScene,this),this.on(u.REMOVED_FROM_SCENE,this.removedFromScene,this),t.sys.queueDepthSort()},setActive:function setActive(t){return this.active=t,this},setName:function setName(t){return this.name=t,this},setState:function setState(t){return this.state=t,this},setDataEnabled:function setDataEnabled(){return this.data||(this.data=new h(this)),this},setData:function setData(t,i){return this.data||(this.data=new h(this)),this.data.set(t,i),this},incData:function incData(t,i){return this.data||(this.data=new h(this)),this.data.inc(t,i),this},toggleData:function toggleData(t){return this.data||(this.data=new h(this)),this.data.toggle(t),this},getData:function getData(t){return this.data||(this.data=new h(this)),this.data.get(t)},setInteractive:function setInteractive(t,i,r){return this.scene.sys.input.enable(this,t,i,r),this},disableInteractive:function disableInteractive(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function removeInteractive(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function addedToScene(){},removedFromScene:function removedFromScene(){},update:function update(){},toJSON:function toJSON(){return a(this)},willRender:function willRender(t){return!(d.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function getIndexList(){for(var t=this,i=this.parentContainer,r=[];i&&(r.unshift(i.getIndex(t)),t=i,i.parentContainer);)i=i.parentContainer;return this.displayList?r.unshift(this.displayList.getIndex(t)):r.unshift(this.scene.sys.displayList.getIndex(t)),r},addToDisplayList:function addToDisplayList(t){return void 0===t&&(t=this.scene.sys.displayList),this.displayList&&this.displayList!==t&&this.removeFromDisplayList(),t.exists(this)||(this.displayList=t,t.add(this,!0),t.queueDepthSort(),this.emit(u.ADDED_TO_SCENE,this,this.scene),t.events.emit(c.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function addToUpdateList(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function removeFromDisplayList(){var t=this.displayList||this.scene.sys.displayList;return t.exists(this)&&(t.remove(this,!0),t.queueDepthSort(),this.displayList=null,this.emit(u.REMOVED_FROM_SCENE,this,this.scene),t.events.emit(c.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function removeFromUpdateList(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function destroy(){this.scene&&!this.ignoreDestroy&&(this.preDestroy&&this.preDestroy.call(this),this.emit(u.DESTROY,this),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});d.RENDER_MASK=15,t.exports=d},function(t,i){t.exports=function ToJSON(t){var i={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(i.textureKey=t.texture.key,i.frameKey=t.frame.name),i}},function(t,i,r){t.exports={ADDED_TO_SCENE:r(230),DESTROY:r(231),REMOVED_FROM_SCENE:r(232),VIDEO_COMPLETE:r(233),VIDEO_CREATED:r(234),VIDEO_ERROR:r(235),VIDEO_LOOP:r(236),VIDEO_PLAY:r(237),VIDEO_SEEKED:r(238),VIDEO_SEEKING:r(239),VIDEO_STOP:r(240),VIDEO_TIMEOUT:r(241),VIDEO_UNLOCKED:r(242)}},function(t,i,r){var o=r(23),a=new o,h=new o,l=new o,u={camera:a,sprite:h,calc:l};t.exports=function GetCalcMatrix(t,i,r){var o=a,c=h,d=l;return c.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),o.copyFrom(i.matrix),r?(o.multiplyWithOffset(r,-i.scrollX*t.scrollFactorX,-i.scrollY*t.scrollFactorY),c.e=t.x,c.f=t.y):(c.e-=i.scrollX*t.scrollFactorX,c.f-=i.scrollY*t.scrollFactorY),o.multiply(c,d),u}},function(t,i){t.exports=function TransposeMatrix(t){for(var i=t.length,r=t[0].length,o=new Array(r),a=0;a<r;a++){o[a]=new Array(i);for(var h=i-1;h>-1;h--)o[a][h]=t[h][a]}return o}},function(t,i){t.exports=function RotateLeft(t,i){void 0===i&&(i=1);for(var r=null,o=0;o<i;o++)r=t.shift(),t.push(r);return r}},function(t,i){t.exports=function RotateRight(t,i){void 0===i&&(i=1);for(var r=null,o=0;o<i;o++)r=t.pop(),t.unshift(r);return r}},function(t,i){t.exports=function Shuffle(t){for(var i=t.length-1;i>0;i--){var r=Math.floor(Math.random()*(i+1)),o=t[i];t[i]=t[r],t[r]=o}return t}},function(t,i,r){var o=r(62),a=r(13);t.exports=function GetPoint(t,i,r){if(void 0===r&&(r=new a),i<=0||i>=1)return r.x=t.x,r.y=t.y,r;var h=o(t)*i;return i>.5?(h-=t.width+t.height)<=t.width?(r.x=t.right-h,r.y=t.bottom):(r.x=t.x,r.y=t.bottom-(h-t.width)):h<=t.width?(r.x=t.x+h,r.y=t.y):(r.x=t.right,r.y=t.y+(h-t.width)),r}},function(t,i){t.exports=function Perimeter(t){return 2*(t.width+t.height)}},function(t,i,r){var o,a=r(64),h=r(0),l=r(10),u=r(177),c=r(178),d=r(202),p=r(203),g=r(221),v=r(254),m=r(1),y=new h({Extends:c,initialize:function SpinePlugin(t,i,r){c.call(this,t,i,r);var o=i.game;this.isWebGL=2===o.config.renderType,this.cache=o.cache.addCustom("spine"),this.spineTextures=o.cache.addCustom("spineTextures"),this.json=o.cache.json,this.textures=o.textures,this.drawDebug=!1,this.gl,this.renderer,this.sceneRenderer,this.skeletonRenderer,this.skeletonDebugRenderer,this.plugin=d,this.temp1,this.temp2,this.isWebGL?(this.runtime=d.webgl,this.renderer=o.renderer,this.gl=o.renderer.gl,this.getAtlas=this.getAtlasWebGL):(this.runtime=d.canvas,this.renderer=o.renderer,this.getAtlas=this.getAtlasCanvas),this.renderer||(this.renderer={width:o.scale.width,height:o.scale.height,preRender:m,postRender:m,render:m,destroy:m});i.registerFileType("spine",this.spineFileCallback,t),i.registerGameObject("spine",(function add(t,i,o,a,h){var l=this.scene.sys[r],u=new g(this.scene,l,t,i,o,a,h);return this.displayList.add(u),this.updateList.add(u),u}),(function make(t,i){void 0===t&&(t={});var o=l(t,"key",null),h=l(t,"animationName",null),u=l(t,"loop",!1),c=this.scene.sys[r],d=new g(this.scene,c,0,0,o,h,u);void 0!==i&&(t.add=i),a(this.scene,d,t);var p=l(t,"skinName",!1);p&&d.setSkinByName(p);var v=l(t,"slotName",!1),m=l(t,"attachmentName",null);return v&&d.setAttachment(v,m),d.refresh()})),i.registerGameObject("spineContainer",(function addContainer(t,i,o){var a=this.scene.sys[r],h=new v(this.scene,a,t,i,o);return this.displayList.add(h),h}),(function makeContainer(t,i){void 0===t&&(t={});var o=l(t,"x",0),h=l(t,"y",0),u=l(t,"children",null),c=this.scene.sys[r],d=new v(this.scene,c,o,h,u);return void 0!==i&&(t.add=i),a(this.scene,d,t),d}))},boot:function boot(){this.isWebGL?(this.bootWebGL(),this.onResize(),this.game.scale.on(u,this.onResize,this)):this.bootCanvas();var t=this.systems.events;t.once("shutdown",this.shutdown,this),t.once("destroy",this.destroy,this),this.game.events.once("destroy",this.gameDestroy,this)},bootCanvas:function bootCanvas(){this.skeletonRenderer=new d.canvas.SkeletonRenderer(this.scene.sys.context)},bootWebGL:function bootWebGL(){var t=function setBlendMode(t,i){if(t!==this.srcBlend||i!==this.dstBlend){var r=this.context.gl;this.srcBlend=t,this.dstBlend=i,this.isDrawing&&(this.flush(),r.blendFunc(this.srcBlend,this.dstBlend))}};o||((o=new d.webgl.SceneRenderer(this.renderer.canvas,this.gl,!0)).batcher.setBlendMode=t,o.shapes.setBlendMode=t),this.sceneRenderer=o,this.skeletonRenderer=o.skeletonRenderer,this.skeletonDebugRenderer=o.skeletonDebugRenderer,this.temp1=new d.webgl.Vector3(0,0,0),this.temp2=new d.webgl.Vector3(0,0,0)},getAtlasCanvas:function getAtlasCanvas(t){var i=this.cache.get(t);if(i){var r,o=this.spineTextures;if(o.has(t))r=o.get(t);else{var a=this.textures;r=new d.TextureAtlas(i.data,(function(t){return new d.canvas.CanvasTexture(a.get(i.prefix+t).getSourceImage())}))}return r}console.warn("No atlas data for: "+t)},getAtlasWebGL:function getAtlasWebGL(t){var i=this.cache.get(t);if(i){var r,o=this.spineTextures;if(o.has(t))r=o.get(t);else{var a=this.textures,h=this.sceneRenderer.context.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r=new d.TextureAtlas(i.data,(function(t){return new d.webgl.GLTexture(h,a.get(i.prefix+t).getSourceImage(),!1)}))}return r}console.warn("No atlas data for: "+t)},spineFileCallback:function spineFileCallback(t,i,r,o,a,h){var l;if(Array.isArray(t))for(var u=0;u<t.length;u++)l=new p(this,t[u]),this.addFile(l.files);else l=new p(this,t,i,r,o,a,h),this.addFile(l.files);return this},worldToLocal:function worldToLocal(t,i,r,o){var a=this.temp1,h=this.temp2,l=this.sceneRenderer.camera;a.set(t+r.x,i-r.y,0);var u=l.viewportWidth,c=l.viewportHeight;return l.screenToWorld(a,u,c),o&&null!==o.parent?(o.parent.worldToLocal(h.set(a.x-r.x,a.y-r.y,0)),new d.Vector2(h.x,h.y)):o?new d.Vector2(a.x-r.x,a.y-r.y):new d.Vector2(a.x,a.y)},getVector2:function getVector2(t,i){return new d.Vector2(t,i)},getVector3:function getVector3(t,i,r){return new d.webgl.Vector3(t,i,r)},setDebugBones:function setDebugBones(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawBones=t,this},setDebugRegionAttachments:function setDebugRegionAttachments(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawRegionAttachments=t,this},setDebugBoundingBoxes:function setDebugBoundingBoxes(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawBoundingBoxes=t,this},setDebugMeshHull:function setDebugMeshHull(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawMeshHull=t,this},setDebugMeshTriangles:function setDebugMeshTriangles(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawMeshTriangles=t,this},setDebugPaths:function setDebugPaths(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawPaths=t,this},setDebugSkeletonXY:function setDebugSkeletonXY(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawSkeletonXY=t,this},setDebugClipping:function setDebugClipping(t){return void 0===t&&(t=!0),this.skeletonDebugRenderer.drawClipping=t,this},setEffect:function setEffect(t){return this.sceneRenderer.skeletonRenderer.vertexEffect=t,this},createSkeleton:function createSkeleton(t,i){var r=t,o=t,a=-1!==t.indexOf(".");if(a){var h=t.split(".");r=h.shift(),o=h.join(".")}var u=this.cache.get(r),c=this.getAtlas(r);if(!c)return null;this.spineTextures.has(r)||this.spineTextures.add(r,c);var p,g=u.preMultipliedAlpha,v=new d.AtlasAttachmentLoader(c),m=new d.SkeletonJson(v);if(i)p=i;else{var y=this.json.get(r);p=a?l(y,o):y}if(p){var T=m.readSkeletonData(p);return{skeletonData:T,skeleton:new d.Skeleton(T),preMultipliedAlpha:g}}return null},createAnimationState:function createAnimationState(t){var i=new d.AnimationStateData(t.data);return{stateData:i,state:new d.AnimationState(i)}},getBounds:function getBounds(t){var i=new d.Vector2,r=new d.Vector2;return t.getBounds(i,r,[]),{offset:i,size:r}},onResize:function onResize(){var t=this.renderer,i=this.sceneRenderer,r=t.width,o=t.height;i.camera.position.x=r/2,i.camera.position.y=o/2,i.camera.setViewport(r,o)},shutdown:function shutdown(){this.systems.events.off("shutdown",this.shutdown,this),this.isWebGL&&this.game.scale.off(u,this.onResize,this)},destroy:function destroy(){this.shutdown(),this.game=null,this.scene=null,this.systems=null,this.cache=null,this.spineTextures=null,this.json=null,this.textures=null,this.skeletonRenderer=null,this.gl=null},gameDestroy:function gameDestroy(){this.pluginManager.removeGameObject("spine",!0,!0),this.pluginManager.removeGameObject("spineContainer",!0,!0),this.pluginManager=null,o&&(o.dispose(),o=null),this.sceneRenderer=null}});y.SpineGameObject=g,y.SpineContainer=v,t.exports=y},function(t,i,r){var o=r(17),a=r(65);t.exports=function BuildGameObject(t,i,r){i.x=a(r,"x",0),i.y=a(r,"y",0),i.depth=a(r,"depth",0),i.flipX=a(r,"flipX",!1),i.flipY=a(r,"flipY",!1);var h=a(r,"scale",null);"number"==typeof h?i.setScale(h):null!==h&&(i.scaleX=a(h,"x",1),i.scaleY=a(h,"y",1));var l=a(r,"scrollFactor",null);"number"==typeof l?i.setScrollFactor(l):null!==l&&(i.scrollFactorX=a(l,"x",1),i.scrollFactorY=a(l,"y",1)),i.rotation=a(r,"rotation",0);var u=a(r,"angle",null);null!==u&&(i.angle=u),i.alpha=a(r,"alpha",1);var c=a(r,"origin",null);if("number"==typeof c)i.setOrigin(c);else if(null!==c){var d=a(c,"x",.5),p=a(c,"y",.5);i.setOrigin(d,p)}return i.blendMode=a(r,"blendMode",o.NORMAL),i.visible=a(r,"visible",!0),a(r,"add",!0)&&t.sys.displayList.add(i),i.preUpdate&&t.sys.updateList.add(i),i}},function(t,i,r){var o=r(66),a=r(10);t.exports=function GetAdvancedValue(t,i,r){var h=a(t,i,null);if(null===h)return r;if(Array.isArray(h))return o.RND.pick(h);if("object"===_typeof(h)){if(h.hasOwnProperty("randInt"))return o.RND.integerInRange(h.randInt[0],h.randInt[1]);if(h.hasOwnProperty("randFloat"))return o.RND.realInRange(h.randFloat[0],h.randFloat[1])}else if("function"==typeof h)return h(i);return h}},function(t,i,r){var o=r(4),a=r(27),h={Angle:r(67),Distance:r(76),Easing:r(84),Fuzzy:r(129),Interpolation:r(134),Pow2:r(142),Snap:r(146),RandomDataGenerator:r(150),Average:r(151),Bernstein:r(33),Between:r(152),CatmullRom:r(35),CeilTo:r(153),Clamp:r(3),DegToRad:r(19),Difference:r(154),Euler:r(155),Factorial:r(34),FloatBetween:r(18),FloorTo:r(156),FromPercent:r(157),GetSpeed:r(158),IsEven:r(159),IsEvenStrict:r(160),Linear:r(36),MaxAdd:r(161),Median:r(162),MinSub:r(163),Percent:r(164),RadToDeg:r(9),RandomXY:r(165),RandomXYZ:r(166),RandomXYZW:r(167),Rotate:r(168),RotateAround:r(39),RotateAroundDistance:r(169),RotateTo:r(170),RoundAwayFromZero:r(40),RoundTo:r(171),SinCosTableGenerator:r(172),SmootherStep:r(38),SmoothStep:r(37),ToXY:r(173),TransformXY:r(41),Within:r(174),Wrap:r(6),Vector2:r(2),Vector3:r(14),Vector4:r(175),Matrix3:r(42),Matrix4:r(20),Quaternion:r(43),RotateVec3:r(176)};h=a(!1,h,o),t.exports=h},function(t,i,r){t.exports={Between:r(28),BetweenPoints:r(68),BetweenPointsY:r(69),BetweenY:r(70),CounterClockwise:r(8),Normalize:r(29),Random:r(71),RandomDegrees:r(72),Reverse:r(73),RotateTo:r(74),ShortestBetween:r(75),Wrap:r(30),WrapDegrees:r(31)}},function(t,i){t.exports=function BetweenPoints(t,i){return Math.atan2(i.y-t.y,i.x-t.x)}},function(t,i){t.exports=function BetweenPointsY(t,i){return Math.atan2(i.x-t.x,i.y-t.y)}},function(t,i){t.exports=function BetweenY(t,i,r,o){return Math.atan2(r-t,o-i)}},function(t,i,r){var o=r(18);t.exports=function Random(){return o(-Math.PI,Math.PI)}},function(t,i,r){var o=r(18);t.exports=function RandomDegrees(){return o(-180,180)}},function(t,i,r){var o=r(29);t.exports=function Reverse(t){return o(t+Math.PI)}},function(t,i,r){var o=r(4);t.exports=function RotateTo(t,i,r){return void 0===r&&(r=.05),t===i||(Math.abs(i-t)<=r||Math.abs(i-t)>=o.PI2-r?t=i:(Math.abs(i-t)>Math.PI&&(i<t?i+=o.PI2:i-=o.PI2),i>t?t+=r:i<t&&(t-=r))),t}},function(t,i){t.exports=function ShortestBetween(t,i){var r=i-t;return 0===r?0:r-360*Math.floor((r- -180)/360)}},function(t,i,r){t.exports={Between:r(77),BetweenPoints:r(78),BetweenPointsSquared:r(79),Chebyshev:r(80),Power:r(81),Snake:r(82),Squared:r(83)}},function(t,i){t.exports=function DistanceBetween(t,i,r,o){var a=t-r,h=i-o;return Math.sqrt(a*a+h*h)}},function(t,i){t.exports=function DistanceBetweenPoints(t,i){var r=t.x-i.x,o=t.y-i.y;return Math.sqrt(r*r+o*o)}},function(t,i){t.exports=function DistanceBetweenPointsSquared(t,i){var r=t.x-i.x,o=t.y-i.y;return r*r+o*o}},function(t,i){t.exports=function ChebyshevDistance(t,i,r,o){return Math.max(Math.abs(t-r),Math.abs(i-o))}},function(t,i){t.exports=function DistancePower(t,i,r,o,a){return void 0===a&&(a=2),Math.sqrt(Math.pow(r-t,a)+Math.pow(o-i,a))}},function(t,i){t.exports=function SnakeDistance(t,i,r,o){return Math.abs(t-r)+Math.abs(i-o)}},function(t,i){t.exports=function DistanceSquared(t,i,r,o){var a=t-r,h=i-o;return a*a+h*h}},function(t,i,r){t.exports={Back:r(85),Bounce:r(89),Circular:r(93),Cubic:r(97),Elastic:r(101),Expo:r(105),Linear:r(109),Quadratic:r(111),Quartic:r(115),Quintic:r(119),Sine:r(123),Stepped:r(127)}},function(t,i,r){t.exports={In:r(86),Out:r(87),InOut:r(88)}},function(t,i){t.exports=function In(t,i){return void 0===i&&(i=1.70158),t*t*((i+1)*t-i)}},function(t,i){t.exports=function Out(t,i){return void 0===i&&(i=1.70158),--t*t*((i+1)*t+i)+1}},function(t,i){t.exports=function InOut(t,i){void 0===i&&(i=1.70158);var r=1.525*i;return(t*=2)<1?t*t*((r+1)*t-r)*.5:.5*((t-=2)*t*((r+1)*t+r)+2)}},function(t,i,r){t.exports={In:r(90),Out:r(91),InOut:r(92)}},function(t,i){t.exports=function In(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}},function(t,i){t.exports=function Out(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},function(t,i){t.exports=function InOut(t){var i=!1;return t<.5?(t=1-2*t,i=!0):t=2*t-1,t<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,i?.5*(1-t):.5*t+.5}},function(t,i,r){t.exports={In:r(94),Out:r(95),InOut:r(96)}},function(t,i){t.exports=function In(t){return 1-Math.sqrt(1-t*t)}},function(t,i){t.exports=function Out(t){return Math.sqrt(1- --t*t)}},function(t,i){t.exports=function InOut(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},function(t,i,r){t.exports={In:r(98),Out:r(99),InOut:r(100)}},function(t,i){t.exports=function In(t){return t*t*t}},function(t,i){t.exports=function Out(t){return--t*t*t+1}},function(t,i){t.exports=function InOut(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},function(t,i,r){t.exports={In:r(102),Out:r(103),InOut:r(104)}},function(t,i){t.exports=function In(t,i,r){if(void 0===i&&(i=.1),void 0===r&&(r=.1),0===t)return 0;if(1===t)return 1;var o=r/4;return i<1?i=1:o=r*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(t-=1))*Math.sin((t-o)*(2*Math.PI)/r)}},function(t,i){t.exports=function Out(t,i,r){if(void 0===i&&(i=.1),void 0===r&&(r=.1),0===t)return 0;if(1===t)return 1;var o=r/4;return i<1?i=1:o=r*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin((t-o)*(2*Math.PI)/r)+1}},function(t,i){t.exports=function InOut(t,i,r){if(void 0===i&&(i=.1),void 0===r&&(r=.1),0===t)return 0;if(1===t)return 1;var o=r/4;return i<1?i=1:o=r*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?i*Math.pow(2,10*(t-=1))*Math.sin((t-o)*(2*Math.PI)/r)*-.5:i*Math.pow(2,-10*(t-=1))*Math.sin((t-o)*(2*Math.PI)/r)*.5+1}},function(t,i,r){t.exports={In:r(106),Out:r(107),InOut:r(108)}},function(t,i){t.exports=function In(t){return Math.pow(2,10*(t-1))-.001}},function(t,i){t.exports=function Out(t){return 1-Math.pow(2,-10*t)}},function(t,i){t.exports=function InOut(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}},function(t,i,r){t.exports=r(110)},function(t,i){t.exports=function Linear(t){return t}},function(t,i,r){t.exports={In:r(112),Out:r(113),InOut:r(114)}},function(t,i){t.exports=function In(t){return t*t}},function(t,i){t.exports=function Out(t){return t*(2-t)}},function(t,i){t.exports=function InOut(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},function(t,i,r){t.exports={In:r(116),Out:r(117),InOut:r(118)}},function(t,i){t.exports=function In(t){return t*t*t*t}},function(t,i){t.exports=function Out(t){return 1- --t*t*t*t}},function(t,i){t.exports=function InOut(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},function(t,i,r){t.exports={In:r(120),Out:r(121),InOut:r(122)}},function(t,i){t.exports=function In(t){return t*t*t*t*t}},function(t,i){t.exports=function Out(t){return--t*t*t*t*t+1}},function(t,i){t.exports=function InOut(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},function(t,i,r){t.exports={In:r(124),Out:r(125),InOut:r(126)}},function(t,i){t.exports=function In(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)}},function(t,i){t.exports=function Out(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)}},function(t,i){t.exports=function InOut(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))}},function(t,i,r){t.exports=r(128)},function(t,i){t.exports=function Stepped(t,i){return void 0===i&&(i=1),t<=0?0:t>=1?1:1/i*(1+(i*t|0))}},function(t,i,r){t.exports={Ceil:r(130),Equal:r(32),Floor:r(131),GreaterThan:r(132),LessThan:r(133)}},function(t,i){t.exports=function Ceil(t,i){return void 0===i&&(i=1e-4),Math.ceil(t-i)}},function(t,i){t.exports=function Floor(t,i){return void 0===i&&(i=1e-4),Math.floor(t+i)}},function(t,i){t.exports=function GreaterThan(t,i,r){return void 0===r&&(r=1e-4),t>i-r}},function(t,i){t.exports=function LessThan(t,i,r){return void 0===r&&(r=1e-4),t<i+r}},function(t,i,r){t.exports={Bezier:r(135),CatmullRom:r(136),CubicBezier:r(137),Linear:r(138),QuadraticBezier:r(139),SmoothStep:r(140),SmootherStep:r(141)}},function(t,i,r){var o=r(33);t.exports=function BezierInterpolation(t,i){for(var r=0,a=t.length-1,h=0;h<=a;h++)r+=Math.pow(1-i,a-h)*Math.pow(i,h)*t[h]*o(a,h);return r}},function(t,i,r){var o=r(35);t.exports=function CatmullRomInterpolation(t,i){var r=t.length-1,a=r*i,h=Math.floor(a);return t[0]===t[r]?(i<0&&(h=Math.floor(a=r*(1+i))),o(a-h,t[(h-1+r)%r],t[h],t[(h+1)%r],t[(h+2)%r])):i<0?t[0]-(o(-a,t[0],t[0],t[1],t[1])-t[0]):i>1?t[r]-(o(a-r,t[r],t[r],t[r-1],t[r-1])-t[r]):o(a-h,t[h?h-1:0],t[h],t[r<h+1?r:h+1],t[r<h+2?r:h+2])}},function(t,i){t.exports=function CubicBezierInterpolation(t,i,r,o,a){return function P0(t,i){var r=1-t;return r*r*r*i}(t,i)+function P1(t,i){var r=1-t;return 3*r*r*t*i}(t,r)+function P2(t,i){return 3*(1-t)*t*t*i}(t,o)+function P3(t,i){return t*t*t*i}(t,a)}},function(t,i,r){var o=r(36);t.exports=function LinearInterpolation(t,i){var r=t.length-1,a=r*i,h=Math.floor(a);return i<0?o(t[0],t[1],a):i>1?o(t[r],t[r-1],r-a):o(t[h],t[h+1>r?r:h+1],a-h)}},function(t,i){t.exports=function QuadraticBezierInterpolation(t,i,r,o){return function P0(t,i){var r=1-t;return r*r*i}(t,i)+function P1(t,i){return 2*(1-t)*t*i}(t,r)+function P2(t,i){return t*t*i}(t,o)}},function(t,i,r){var o=r(37);t.exports=function SmoothStepInterpolation(t,i,r){return i+(r-i)*o(t,0,1)}},function(t,i,r){var o=r(38);t.exports=function SmootherStepInterpolation(t,i,r){return i+(r-i)*o(t,0,1)}},function(t,i,r){t.exports={GetNext:r(143),IsSize:r(144),IsValue:r(145)}},function(t,i){t.exports=function GetPowerOfTwo(t){var i=Math.log(t)/.6931471805599453;return 1<<Math.ceil(i)}},function(t,i){t.exports=function IsSizePowerOfTwo(t,i){return t>0&&0==(t&t-1)&&i>0&&0==(i&i-1)}},function(t,i){t.exports=function IsValuePowerOfTwo(t){return t>0&&0==(t&t-1)}},function(t,i,r){t.exports={Ceil:r(147),Floor:r(148),To:r(149)}},function(t,i){t.exports=function SnapCeil(t,i,r,o){return void 0===r&&(r=0),0===i?t:(t-=r,t=i*Math.ceil(t/i),o?(r+t)/i:r+t)}},function(t,i){t.exports=function SnapFloor(t,i,r,o){return void 0===r&&(r=0),0===i?t:(t-=r,t=i*Math.floor(t/i),o?(r+t)/i:r+t)}},function(t,i){t.exports=function SnapTo(t,i,r,o){return void 0===r&&(r=0),0===i?t:(t-=r,t=i*Math.round(t/i),o?(r+t)/i:r+t)}},function(t,i,r){var o=new(r(0))({initialize:function RandomDataGenerator(t){void 0===t&&(t=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],t&&this.init(t)},rnd:function rnd(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},hash:function hash(t){var i,r=this.n;t=t.toString();for(var o=0;o<t.length;o++)i=.02519603282416938*(r+=t.charCodeAt(o)),i-=r=i>>>0,r=(i*=r)>>>0,r+=4294967296*(i-=r);return this.n=r,2.3283064365386963e-10*(r>>>0)},init:function init(t){"string"==typeof t?this.state(t):this.sow(t)},sow:function sow(t){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,t)for(var i=0;i<t.length&&null!=t[i];i++){var r=t[i];this.s0-=this.hash(r),this.s0+=~~(this.s0<0),this.s1-=this.hash(r),this.s1+=~~(this.s1<0),this.s2-=this.hash(r),this.s2+=~~(this.s2<0)}},integer:function integer(){return 4294967296*this.rnd()},frac:function frac(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function real(){return this.integer()+this.frac()},integerInRange:function integerInRange(t,i){return Math.floor(this.realInRange(0,i-t+1)+t)},between:function between(t,i){return Math.floor(this.realInRange(0,i-t+1)+t)},realInRange:function realInRange(t,i){return this.frac()*(i-t)+t},normal:function normal(){return 1-2*this.frac()},uuid:function uuid(){var t="",i="";for(i=t="";t++<36;i+=~t%5|3*t&4?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return i},pick:function pick(t){return t[this.integerInRange(0,t.length-1)]},sign:function sign(){return this.pick(this.signs)},weightedPick:function weightedPick(t){return t[~~(Math.pow(this.frac(),2)*(t.length-1)+.5)]},timestamp:function timestamp(t,i){return this.realInRange(t||9466848e5,i||1577862e6)},angle:function angle(){return this.integerInRange(-180,180)},rotation:function rotation(){return this.realInRange(-3.1415926,3.1415926)},state:function state(t){return"string"==typeof t&&t.match(/^!rnd/)&&(t=t.split(","),this.c=parseFloat(t[1]),this.s0=parseFloat(t[2]),this.s1=parseFloat(t[3]),this.s2=parseFloat(t[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function shuffle(t){for(var i=t.length-1;i>0;i--){var r=Math.floor(this.frac()*(i+1)),o=t[r];t[r]=t[i],t[i]=o}return t}});t.exports=o},function(t,i){t.exports=function Average(t){for(var i=0,r=0;r<t.length;r++)i+=+t[r];return i/t.length}},function(t,i){t.exports=function Between(t,i){return Math.floor(Math.random()*(i-t+1)+t)}},function(t,i){t.exports=function CeilTo(t,i,r){void 0===i&&(i=0),void 0===r&&(r=10);var o=Math.pow(r,-i);return Math.ceil(t*o)/o}},function(t,i){t.exports=function Difference(t,i){return Math.abs(t-i)}},function(t,i,r){var o=r(3),a=r(0),h=r(20),l=r(1),u=new h,c=new a({initialize:function Euler(t,i,r,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=Euler.DefaultOrder),this._x=t,this._y=i,this._z=r,this._order=o,this.onChangeCallback=l},x:{get:function get(){return this._x},set:function set(t){this._x=t,this.onChangeCallback(this)}},y:{get:function get(){return this._y},set:function set(t){this._y=t,this.onChangeCallback(this)}},z:{get:function get(){return this._z},set:function set(t){this._z=t,this.onChangeCallback(this)}},order:{get:function get(){return this._order},set:function set(t){this._order=t,this.onChangeCallback(this)}},set:function set(t,i,r,o){return void 0===o&&(o=this._order),this._x=t,this._y=i,this._z=r,this._order=o,this.onChangeCallback(this),this},copy:function copy(t){return this.set(t.x,t.y,t.z,t.order)},setFromQuaternion:function setFromQuaternion(t,i,r){return void 0===i&&(i=this._order),void 0===r&&(r=!1),u.fromQuat(t),this.setFromRotationMatrix(u,i,r)},setFromRotationMatrix:function setFromRotationMatrix(t,i,r){void 0===i&&(i=this._order),void 0===r&&(r=!1);var a=t.val,h=a[0],l=a[4],u=a[8],c=a[1],d=a[5],p=a[9],g=a[2],v=a[6],m=a[10],y=0,T=0,S=0,w=.99999;switch(i){case"XYZ":T=Math.asin(o(u,-1,1)),Math.abs(u)<w?(y=Math.atan2(-p,m),S=Math.atan2(-l,h)):y=Math.atan2(v,d);break;case"YXZ":y=Math.asin(-o(p,-1,1)),Math.abs(p)<w?(T=Math.atan2(u,m),S=Math.atan2(c,d)):T=Math.atan2(-g,h);break;case"ZXY":y=Math.asin(o(v,-1,1)),Math.abs(v)<w?(T=Math.atan2(-g,m),S=Math.atan2(-l,d)):S=Math.atan2(c,h);break;case"ZYX":T=Math.asin(-o(g,-1,1)),Math.abs(g)<w?(y=Math.atan2(v,m),S=Math.atan2(c,h)):S=Math.atan2(-l,d);break;case"YZX":S=Math.asin(o(c,-1,1)),Math.abs(c)<w?(y=Math.atan2(-p,d),T=Math.atan2(-g,h)):T=Math.atan2(u,m);break;case"XZY":S=Math.asin(-o(l,-1,1)),Math.abs(l)<w?(y=Math.atan2(v,d),T=Math.atan2(u,h)):y=Math.atan2(-p,m)}return this._x=y,this._y=T,this._z=S,this._order=i,r&&this.onChangeCallback(this),this}});c.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],c.DefaultOrder="XYZ",t.exports=c},function(t,i){t.exports=function FloorTo(t,i,r){void 0===i&&(i=0),void 0===r&&(r=10);var o=Math.pow(r,-i);return Math.floor(t*o)/o}},function(t,i,r){var o=r(3);t.exports=function FromPercent(t,i,r){return(r-i)*(t=o(t,0,1))+i}},function(t,i){t.exports=function GetSpeed(t,i){return t/i/1e3}},function(t,i){t.exports=function IsEven(t){return t==parseFloat(t)?!(t%2):void 0}},function(t,i){t.exports=function IsEvenStrict(t){return t===parseFloat(t)?!(t%2):void 0}},function(t,i){t.exports=function MaxAdd(t,i,r){return Math.min(t+i,r)}},function(t,i){t.exports=function Median(t){var i=t.length;if(0===i)return 0;t.sort((function(t,i){return t-i}));var r=Math.floor(i/2);return i%2==0?(t[r]+t[r-1])/2:t[r]}},function(t,i){t.exports=function MinSub(t,i,r){return Math.max(t-i,r)}},function(t,i){t.exports=function Percent(t,i,r,o){void 0===r&&(r=i+1);var a=(t-i)/(r-i);return a>1?void 0!==o?(a=(o-t)/(o-r))<0&&(a=0):a=1:a<0&&(a=0),a}},function(t,i){t.exports=function RandomXY(t,i){void 0===i&&(i=1);var r=2*Math.random()*Math.PI;return t.x=Math.cos(r)*i,t.y=Math.sin(r)*i,t}},function(t,i){t.exports=function RandomXYZ(t,i){void 0===i&&(i=1);var r=2*Math.random()*Math.PI,o=2*Math.random()-1,a=Math.sqrt(1-o*o)*i;return t.x=Math.cos(r)*a,t.y=Math.sin(r)*a,t.z=o*i,t}},function(t,i){t.exports=function RandomXYZW(t,i){return void 0===i&&(i=1),t.x=(2*Math.random()-1)*i,t.y=(2*Math.random()-1)*i,t.z=(2*Math.random()-1)*i,t.w=(2*Math.random()-1)*i,t}},function(t,i){t.exports=function Rotate(t,i){var r=t.x,o=t.y;return t.x=r*Math.cos(i)-o*Math.sin(i),t.y=r*Math.sin(i)+o*Math.cos(i),t}},function(t,i){t.exports=function RotateAroundDistance(t,i,r,o,a){var h=o+Math.atan2(t.y-r,t.x-i);return t.x=i+a*Math.cos(h),t.y=r+a*Math.sin(h),t}},function(t,i){t.exports=function RotateTo(t,i,r,o,a){return t.x=i+a*Math.cos(o),t.y=r+a*Math.sin(o),t}},function(t,i){t.exports=function RoundTo(t,i,r){void 0===i&&(i=0),void 0===r&&(r=10);var o=Math.pow(r,-i);return Math.round(t*o)/o}},function(t,i){t.exports=function SinCosTableGenerator(t,i,r,o){void 0===i&&(i=1),void 0===r&&(r=1),void 0===o&&(o=1),o*=Math.PI/t;for(var a=[],h=[],l=0;l<t;l++)i+=(r-=i*o)*o,a[l]=r,h[l]=i;return{sin:h,cos:a,length:t}}},function(t,i,r){var o=r(2);t.exports=function ToXY(t,i,r,a){void 0===a&&(a=new o);var h=0,l=0;return t>0&&t<=i*r&&(h=t>i-1?t-(l=Math.floor(t/i))*i:t,a.set(h,l)),a}},function(t,i){t.exports=function Within(t,i,r){return Math.abs(t-i)<=r}},function(t,i,r){var o=new(r(0))({initialize:function Vector4(t,i,r,o){this.x=0,this.y=0,this.z=0,this.w=0,"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=r||0,this.w=o||0)},clone:function clone(){return new o(this.x,this.y,this.z,this.w)},copy:function copy(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this.w=t.w||0,this},equals:function equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},set:function set(t,i,r,o){return"object"===_typeof(t)?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=i||0,this.z=r||0,this.w=o||0),this},add:function add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this.w+=t.w||0,this},subtract:function subtract(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this.w-=t.w||0,this},scale:function scale(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function length(){var t=this.x,i=this.y,r=this.z,o=this.w;return Math.sqrt(t*t+i*i+r*r+o*o)},lengthSq:function lengthSq(){var t=this.x,i=this.y,r=this.z,o=this.w;return t*t+i*i+r*r+o*o},normalize:function normalize(){var t=this.x,i=this.y,r=this.z,o=this.w,a=t*t+i*i+r*r+o*o;return a>0&&(a=1/Math.sqrt(a),this.x=t*a,this.y=i*a,this.z=r*a,this.w=o*a),this},dot:function dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function lerp(t,i){void 0===i&&(i=0);var r=this.x,o=this.y,a=this.z,h=this.w;return this.x=r+i*(t.x-r),this.y=o+i*(t.y-o),this.z=a+i*(t.z-a),this.w=h+i*(t.w-h),this},multiply:function multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this.w*=t.w||1,this},divide:function divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this.w/=t.w||1,this},distance:function distance(t){var i=t.x-this.x,r=t.y-this.y,o=t.z-this.z||0,a=t.w-this.w||0;return Math.sqrt(i*i+r*r+o*o+a*a)},distanceSq:function distanceSq(t){var i=t.x-this.x,r=t.y-this.y,o=t.z-this.z||0,a=t.w-this.w||0;return i*i+r*r+o*o+a*a},negate:function negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function transformMat4(t){var i=this.x,r=this.y,o=this.z,a=this.w,h=t.val;return this.x=h[0]*i+h[4]*r+h[8]*o+h[12]*a,this.y=h[1]*i+h[5]*r+h[9]*o+h[13]*a,this.z=h[2]*i+h[6]*r+h[10]*o+h[14]*a,this.w=h[3]*i+h[7]*r+h[11]*o+h[15]*a,this},transformQuat:function transformQuat(t){var i=this.x,r=this.y,o=this.z,a=t.x,h=t.y,l=t.z,u=t.w,c=u*i+h*o-l*r,d=u*r+l*i-a*o,p=u*o+a*r-h*i,g=-a*i-h*r-l*o;return this.x=c*u+g*-a+d*-l-p*-h,this.y=d*u+g*-h+p*-a-c*-l,this.z=p*u+g*-l+c*-h-d*-a,this},reset:function reset(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});o.prototype.sub=o.prototype.subtract,o.prototype.mul=o.prototype.multiply,o.prototype.div=o.prototype.divide,o.prototype.dist=o.prototype.distance,o.prototype.distSq=o.prototype.distanceSq,o.prototype.len=o.prototype.length,o.prototype.lenSq=o.prototype.lengthSq,t.exports=o},function(t,i,r){var o=r(14),a=r(20),h=r(43),l=new a,u=new h,c=new o;t.exports=function RotateVec3(t,i,r){return u.setAxisAngle(i,r),l.fromRotationTranslation(u,c.set(0,0,0)),t.transformMat4(l)}},function(t,i){t.exports="resize"},function(t,i,r){var o=r(179),a=r(0),h=r(44),l=new a({Extends:o,initialize:function ScenePlugin(t,i,r){o.call(this,i),this.scene=t,this.systems=t.sys,this.pluginKey=r,t.sys.events.once(h.BOOT,this.boot,this)},boot:function boot(){},destroy:function destroy(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=l},function(t,i,r){var o=new(r(0))({initialize:function BasePlugin(t){this.pluginManager=t,this.game=t.game},init:function init(){},start:function start(){},stop:function stop(){},destroy:function destroy(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=o},function(t,i){t.exports="addedtoscene"},function(t,i){t.exports="boot"},function(t,i){t.exports="create"},function(t,i){t.exports="destroy"},function(t,i){t.exports="pause"},function(t,i){t.exports="postupdate"},function(t,i){t.exports="prerender"},function(t,i){t.exports="preupdate"},function(t,i){t.exports="ready"},function(t,i){t.exports="removedfromscene"},function(t,i){t.exports="render"},function(t,i){t.exports="resume"},function(t,i){t.exports="shutdown"},function(t,i){t.exports="sleep"},function(t,i){t.exports="start"},function(t,i){t.exports="transitioncomplete"},function(t,i){t.exports="transitioninit"},function(t,i){t.exports="transitionout"},function(t,i){t.exports="transitionstart"},function(t,i){t.exports="transitionwake"},function(t,i){t.exports="update"},function(t,i){t.exports="wake"},function(t,i){(function(){var i,r,o,a=this&&this.__extends||(i=function extendStatics(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])},i(t,r)},function(t,r){function __(){this.constructor=t}i(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)});!function(t){var i,r,o,h=function(){function Animation(t,i,r){if(null==t)throw new Error("name cannot be null.");if(null==i)throw new Error("timelines cannot be null.");this.name=t,this.timelines=i,this.timelineIds=[];for(var o=0;o<i.length;o++)this.timelineIds[i[o].getPropertyId()]=!0;this.duration=r}return Animation.prototype.hasTimeline=function(t){return 1==this.timelineIds[t]},Animation.prototype.apply=function(t,i,r,o,a,h,l,u){if(null==t)throw new Error("skeleton cannot be null.");o&&0!=this.duration&&(r%=this.duration,i>0&&(i%=this.duration));for(var c=this.timelines,d=0,p=c.length;d<p;d++)c[d].apply(t,i,r,a,h,l,u)},Animation.binarySearch=function(t,i,r){void 0===r&&(r=1);var o=0,a=t.length/r-2;if(0==a)return r;for(var h=a>>>1;;){if(t[(h+1)*r]<=i?o=h+1:a=h,o==a)return(o+1)*r;h=o+a>>>1}},Animation.linearSearch=function(t,i,r){for(var o=0,a=t.length-r;o<=a;o+=r)if(t[o]>i)return o;return-1},Animation}();t.Animation=h,function(t){t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add"}(i=t.MixBlend||(t.MixBlend={})),function(t){t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut"}(r=t.MixDirection||(t.MixDirection={})),function(t){t[t.rotate=0]="rotate",t[t.translate=1]="translate",t[t.scale=2]="scale",t[t.shear=3]="shear",t[t.attachment=4]="attachment",t[t.color=5]="color",t[t.deform=6]="deform",t[t.event=7]="event",t[t.drawOrder=8]="drawOrder",t[t.ikConstraint=9]="ikConstraint",t[t.transformConstraint=10]="transformConstraint",t[t.pathConstraintPosition=11]="pathConstraintPosition",t[t.pathConstraintSpacing=12]="pathConstraintSpacing",t[t.pathConstraintMix=13]="pathConstraintMix",t[t.twoColor=14]="twoColor"}(o=t.TimelineType||(t.TimelineType={}));var l=function(){function CurveTimeline(i){if(i<=0)throw new Error("frameCount must be > 0: "+i);this.curves=t.Utils.newFloatArray((i-1)*CurveTimeline.BEZIER_SIZE)}return CurveTimeline.prototype.getFrameCount=function(){return this.curves.length/CurveTimeline.BEZIER_SIZE+1},CurveTimeline.prototype.setLinear=function(t){this.curves[t*CurveTimeline.BEZIER_SIZE]=CurveTimeline.LINEAR},CurveTimeline.prototype.setStepped=function(t){this.curves[t*CurveTimeline.BEZIER_SIZE]=CurveTimeline.STEPPED},CurveTimeline.prototype.getCurveType=function(t){var i=t*CurveTimeline.BEZIER_SIZE;if(i==this.curves.length)return CurveTimeline.LINEAR;var r=this.curves[i];return r==CurveTimeline.LINEAR?CurveTimeline.LINEAR:r==CurveTimeline.STEPPED?CurveTimeline.STEPPED:CurveTimeline.BEZIER},CurveTimeline.prototype.setCurve=function(t,i,r,o,a){var h=.03*(2*-i+o),l=.03*(2*-r+a),u=.006*(3*(i-o)+1),c=.006*(3*(r-a)+1),d=2*h+u,p=2*l+c,g=.3*i+h+.16666667*u,v=.3*r+l+.16666667*c,m=t*CurveTimeline.BEZIER_SIZE,y=this.curves;y[m++]=CurveTimeline.BEZIER;for(var T=g,S=v,w=m+CurveTimeline.BEZIER_SIZE-1;m<w;m+=2)y[m]=T,y[m+1]=S,g+=d,v+=p,d+=u,p+=c,T+=g,S+=v},CurveTimeline.prototype.getCurvePercent=function(i,r){r=t.MathUtils.clamp(r,0,1);var o=this.curves,a=i*CurveTimeline.BEZIER_SIZE,h=o[a];if(h==CurveTimeline.LINEAR)return r;if(h==CurveTimeline.STEPPED)return 0;for(var l=0,u=++a,c=a+CurveTimeline.BEZIER_SIZE-1;a<c;a+=2)if((l=o[a])>=r){var d=void 0,p=void 0;return a==u?(d=0,p=0):(d=o[a-2],p=o[a-1]),p+(o[a+1]-p)*(r-d)/(l-d)}var g=o[a-1];return g+(1-g)*(r-l)/(1-l)},CurveTimeline.LINEAR=0,CurveTimeline.STEPPED=1,CurveTimeline.BEZIER=2,CurveTimeline.BEZIER_SIZE=19,CurveTimeline}();t.CurveTimeline=l;var u=function(r){function RotateTimeline(i){var o=r.call(this,i)||this;return o.frames=t.Utils.newFloatArray(i<<1),o}return a(RotateTimeline,r),RotateTimeline.prototype.getPropertyId=function(){return(o.rotate<<24)+this.boneIndex},RotateTimeline.prototype.setFrame=function(t,i,r){t<<=1,this.frames[t]=i,this.frames[t+RotateTimeline.ROTATION]=r},RotateTimeline.prototype.apply=function(t,r,o,a,l,u,c){var d=this.frames,p=t.bones[this.boneIndex];if(p.active)if(o<d[0])switch(u){case i.setup:return void(p.rotation=p.data.rotation);case i.first:var g=p.data.rotation-p.rotation;p.rotation+=(g-360*(16384-(16384.499999999996-g/360|0)))*l}else if(o>=d[d.length-RotateTimeline.ENTRIES]){var v=d[d.length+RotateTimeline.PREV_ROTATION];switch(u){case i.setup:p.rotation=p.data.rotation+v*l;break;case i.first:case i.replace:v+=p.data.rotation-p.rotation,v-=360*(16384-(16384.499999999996-v/360|0));case i.add:p.rotation+=v*l}}else{var m=h.binarySearch(d,o,RotateTimeline.ENTRIES),y=d[m+RotateTimeline.PREV_ROTATION],T=d[m],S=this.getCurvePercent((m>>1)-1,1-(o-T)/(d[m+RotateTimeline.PREV_TIME]-T)),w=d[m+RotateTimeline.ROTATION]-y;switch(w=y+(w-360*(16384-(16384.499999999996-w/360|0)))*S,u){case i.setup:p.rotation=p.data.rotation+(w-360*(16384-(16384.499999999996-w/360|0)))*l;break;case i.first:case i.replace:w+=p.data.rotation-p.rotation;case i.add:p.rotation+=(w-360*(16384-(16384.499999999996-w/360|0)))*l}}},RotateTimeline.ENTRIES=2,RotateTimeline.PREV_TIME=-2,RotateTimeline.PREV_ROTATION=-1,RotateTimeline.ROTATION=1,RotateTimeline}(l);t.RotateTimeline=u;var c=function(r){function TranslateTimeline(i){var o=r.call(this,i)||this;return o.frames=t.Utils.newFloatArray(i*TranslateTimeline.ENTRIES),o}return a(TranslateTimeline,r),TranslateTimeline.prototype.getPropertyId=function(){return(o.translate<<24)+this.boneIndex},TranslateTimeline.prototype.setFrame=function(t,i,r,o){t*=TranslateTimeline.ENTRIES,this.frames[t]=i,this.frames[t+TranslateTimeline.X]=r,this.frames[t+TranslateTimeline.Y]=o},TranslateTimeline.prototype.apply=function(t,r,o,a,l,u,c){var d=this.frames,p=t.bones[this.boneIndex];if(p.active)if(o<d[0])switch(u){case i.setup:return p.x=p.data.x,void(p.y=p.data.y);case i.first:p.x+=(p.data.x-p.x)*l,p.y+=(p.data.y-p.y)*l}else{var g=0,v=0;if(o>=d[d.length-TranslateTimeline.ENTRIES])g=d[d.length+TranslateTimeline.PREV_X],v=d[d.length+TranslateTimeline.PREV_Y];else{var m=h.binarySearch(d,o,TranslateTimeline.ENTRIES);g=d[m+TranslateTimeline.PREV_X],v=d[m+TranslateTimeline.PREV_Y];var y=d[m],T=this.getCurvePercent(m/TranslateTimeline.ENTRIES-1,1-(o-y)/(d[m+TranslateTimeline.PREV_TIME]-y));g+=(d[m+TranslateTimeline.X]-g)*T,v+=(d[m+TranslateTimeline.Y]-v)*T}switch(u){case i.setup:p.x=p.data.x+g*l,p.y=p.data.y+v*l;break;case i.first:case i.replace:p.x+=(p.data.x+g-p.x)*l,p.y+=(p.data.y+v-p.y)*l;break;case i.add:p.x+=g*l,p.y+=v*l}}},TranslateTimeline.ENTRIES=3,TranslateTimeline.PREV_TIME=-3,TranslateTimeline.PREV_X=-2,TranslateTimeline.PREV_Y=-1,TranslateTimeline.X=1,TranslateTimeline.Y=2,TranslateTimeline}(l);t.TranslateTimeline=c;var d=function(l){function ScaleTimeline(t){return l.call(this,t)||this}return a(ScaleTimeline,l),ScaleTimeline.prototype.getPropertyId=function(){return(o.scale<<24)+this.boneIndex},ScaleTimeline.prototype.apply=function(o,a,l,u,c,d,p){var g=this.frames,v=o.bones[this.boneIndex];if(v.active)if(l<g[0])switch(d){case i.setup:return v.scaleX=v.data.scaleX,void(v.scaleY=v.data.scaleY);case i.first:v.scaleX+=(v.data.scaleX-v.scaleX)*c,v.scaleY+=(v.data.scaleY-v.scaleY)*c}else{var m=0,y=0;if(l>=g[g.length-ScaleTimeline.ENTRIES])m=g[g.length+ScaleTimeline.PREV_X]*v.data.scaleX,y=g[g.length+ScaleTimeline.PREV_Y]*v.data.scaleY;else{var T=h.binarySearch(g,l,ScaleTimeline.ENTRIES);m=g[T+ScaleTimeline.PREV_X],y=g[T+ScaleTimeline.PREV_Y];var S=g[T],w=this.getCurvePercent(T/ScaleTimeline.ENTRIES-1,1-(l-S)/(g[T+ScaleTimeline.PREV_TIME]-S));m=(m+(g[T+ScaleTimeline.X]-m)*w)*v.data.scaleX,y=(y+(g[T+ScaleTimeline.Y]-y)*w)*v.data.scaleY}if(1==c)d==i.add?(v.scaleX+=m-v.data.scaleX,v.scaleY+=y-v.data.scaleY):(v.scaleX=m,v.scaleY=y);else{var b=0,C=0;if(p==r.mixOut)switch(d){case i.setup:b=v.data.scaleX,C=v.data.scaleY,v.scaleX=b+(Math.abs(m)*t.MathUtils.signum(b)-b)*c,v.scaleY=C+(Math.abs(y)*t.MathUtils.signum(C)-C)*c;break;case i.first:case i.replace:b=v.scaleX,C=v.scaleY,v.scaleX=b+(Math.abs(m)*t.MathUtils.signum(b)-b)*c,v.scaleY=C+(Math.abs(y)*t.MathUtils.signum(C)-C)*c;break;case i.add:b=v.scaleX,C=v.scaleY,v.scaleX=b+(Math.abs(m)*t.MathUtils.signum(b)-v.data.scaleX)*c,v.scaleY=C+(Math.abs(y)*t.MathUtils.signum(C)-v.data.scaleY)*c}else switch(d){case i.setup:b=Math.abs(v.data.scaleX)*t.MathUtils.signum(m),C=Math.abs(v.data.scaleY)*t.MathUtils.signum(y),v.scaleX=b+(m-b)*c,v.scaleY=C+(y-C)*c;break;case i.first:case i.replace:b=Math.abs(v.scaleX)*t.MathUtils.signum(m),C=Math.abs(v.scaleY)*t.MathUtils.signum(y),v.scaleX=b+(m-b)*c,v.scaleY=C+(y-C)*c;break;case i.add:b=t.MathUtils.signum(m),C=t.MathUtils.signum(y),v.scaleX=Math.abs(v.scaleX)*b+(m-Math.abs(v.data.scaleX)*b)*c,v.scaleY=Math.abs(v.scaleY)*C+(y-Math.abs(v.data.scaleY)*C)*c}}}},ScaleTimeline}(c);t.ScaleTimeline=d;var p=function(t){function ShearTimeline(i){return t.call(this,i)||this}return a(ShearTimeline,t),ShearTimeline.prototype.getPropertyId=function(){return(o.shear<<24)+this.boneIndex},ShearTimeline.prototype.apply=function(t,r,o,a,l,u,c){var d=this.frames,p=t.bones[this.boneIndex];if(p.active)if(o<d[0])switch(u){case i.setup:return p.shearX=p.data.shearX,void(p.shearY=p.data.shearY);case i.first:p.shearX+=(p.data.shearX-p.shearX)*l,p.shearY+=(p.data.shearY-p.shearY)*l}else{var g=0,v=0;if(o>=d[d.length-ShearTimeline.ENTRIES])g=d[d.length+ShearTimeline.PREV_X],v=d[d.length+ShearTimeline.PREV_Y];else{var m=h.binarySearch(d,o,ShearTimeline.ENTRIES);g=d[m+ShearTimeline.PREV_X],v=d[m+ShearTimeline.PREV_Y];var y=d[m],T=this.getCurvePercent(m/ShearTimeline.ENTRIES-1,1-(o-y)/(d[m+ShearTimeline.PREV_TIME]-y));g+=(d[m+ShearTimeline.X]-g)*T,v+=(d[m+ShearTimeline.Y]-v)*T}switch(u){case i.setup:p.shearX=p.data.shearX+g*l,p.shearY=p.data.shearY+v*l;break;case i.first:case i.replace:p.shearX+=(p.data.shearX+g-p.shearX)*l,p.shearY+=(p.data.shearY+v-p.shearY)*l;break;case i.add:p.shearX+=g*l,p.shearY+=v*l}}},ShearTimeline}(c);t.ShearTimeline=p;var g=function(r){function ColorTimeline(i){var o=r.call(this,i)||this;return o.frames=t.Utils.newFloatArray(i*ColorTimeline.ENTRIES),o}return a(ColorTimeline,r),ColorTimeline.prototype.getPropertyId=function(){return(o.color<<24)+this.slotIndex},ColorTimeline.prototype.setFrame=function(t,i,r,o,a,h){t*=ColorTimeline.ENTRIES,this.frames[t]=i,this.frames[t+ColorTimeline.R]=r,this.frames[t+ColorTimeline.G]=o,this.frames[t+ColorTimeline.B]=a,this.frames[t+ColorTimeline.A]=h},ColorTimeline.prototype.apply=function(t,r,o,a,l,u,c){var d=t.slots[this.slotIndex];if(d.bone.active){var p=this.frames;if(o<p[0])switch(u){case i.setup:return void d.color.setFromColor(d.data.color);case i.first:var g=d.color,v=d.data.color;g.add((v.r-g.r)*l,(v.g-g.g)*l,(v.b-g.b)*l,(v.a-g.a)*l)}else{var m=0,y=0,T=0,S=0;if(o>=p[p.length-ColorTimeline.ENTRIES]){var w=p.length;m=p[w+ColorTimeline.PREV_R],y=p[w+ColorTimeline.PREV_G],T=p[w+ColorTimeline.PREV_B],S=p[w+ColorTimeline.PREV_A]}else{var b=h.binarySearch(p,o,ColorTimeline.ENTRIES);m=p[b+ColorTimeline.PREV_R],y=p[b+ColorTimeline.PREV_G],T=p[b+ColorTimeline.PREV_B],S=p[b+ColorTimeline.PREV_A];var C=p[b],A=this.getCurvePercent(b/ColorTimeline.ENTRIES-1,1-(o-C)/(p[b+ColorTimeline.PREV_TIME]-C));m+=(p[b+ColorTimeline.R]-m)*A,y+=(p[b+ColorTimeline.G]-y)*A,T+=(p[b+ColorTimeline.B]-T)*A,S+=(p[b+ColorTimeline.A]-S)*A}if(1==l)d.color.set(m,y,T,S);else{g=d.color;u==i.setup&&g.setFromColor(d.data.color),g.add((m-g.r)*l,(y-g.g)*l,(T-g.b)*l,(S-g.a)*l)}}}},ColorTimeline.ENTRIES=5,ColorTimeline.PREV_TIME=-5,ColorTimeline.PREV_R=-4,ColorTimeline.PREV_G=-3,ColorTimeline.PREV_B=-2,ColorTimeline.PREV_A=-1,ColorTimeline.R=1,ColorTimeline.G=2,ColorTimeline.B=3,ColorTimeline.A=4,ColorTimeline}(l);t.ColorTimeline=g;var v=function(r){function TwoColorTimeline(i){var o=r.call(this,i)||this;return o.frames=t.Utils.newFloatArray(i*TwoColorTimeline.ENTRIES),o}return a(TwoColorTimeline,r),TwoColorTimeline.prototype.getPropertyId=function(){return(o.twoColor<<24)+this.slotIndex},TwoColorTimeline.prototype.setFrame=function(t,i,r,o,a,h,l,u,c){t*=TwoColorTimeline.ENTRIES,this.frames[t]=i,this.frames[t+TwoColorTimeline.R]=r,this.frames[t+TwoColorTimeline.G]=o,this.frames[t+TwoColorTimeline.B]=a,this.frames[t+TwoColorTimeline.A]=h,this.frames[t+TwoColorTimeline.R2]=l,this.frames[t+TwoColorTimeline.G2]=u,this.frames[t+TwoColorTimeline.B2]=c},TwoColorTimeline.prototype.apply=function(t,r,o,a,l,u,c){var d=t.slots[this.slotIndex];if(d.bone.active){var p=this.frames;if(o<p[0])switch(u){case i.setup:return d.color.setFromColor(d.data.color),void d.darkColor.setFromColor(d.data.darkColor);case i.first:var g=d.color,v=d.darkColor,m=d.data.color,y=d.data.darkColor;g.add((m.r-g.r)*l,(m.g-g.g)*l,(m.b-g.b)*l,(m.a-g.a)*l),v.add((y.r-v.r)*l,(y.g-v.g)*l,(y.b-v.b)*l,0)}else{var T=0,S=0,w=0,b=0,C=0,A=0,E=0;if(o>=p[p.length-TwoColorTimeline.ENTRIES]){var M=p.length;T=p[M+TwoColorTimeline.PREV_R],S=p[M+TwoColorTimeline.PREV_G],w=p[M+TwoColorTimeline.PREV_B],b=p[M+TwoColorTimeline.PREV_A],C=p[M+TwoColorTimeline.PREV_R2],A=p[M+TwoColorTimeline.PREV_G2],E=p[M+TwoColorTimeline.PREV_B2]}else{var _=h.binarySearch(p,o,TwoColorTimeline.ENTRIES);T=p[_+TwoColorTimeline.PREV_R],S=p[_+TwoColorTimeline.PREV_G],w=p[_+TwoColorTimeline.PREV_B],b=p[_+TwoColorTimeline.PREV_A],C=p[_+TwoColorTimeline.PREV_R2],A=p[_+TwoColorTimeline.PREV_G2],E=p[_+TwoColorTimeline.PREV_B2];var R=p[_],P=this.getCurvePercent(_/TwoColorTimeline.ENTRIES-1,1-(o-R)/(p[_+TwoColorTimeline.PREV_TIME]-R));T+=(p[_+TwoColorTimeline.R]-T)*P,S+=(p[_+TwoColorTimeline.G]-S)*P,w+=(p[_+TwoColorTimeline.B]-w)*P,b+=(p[_+TwoColorTimeline.A]-b)*P,C+=(p[_+TwoColorTimeline.R2]-C)*P,A+=(p[_+TwoColorTimeline.G2]-A)*P,E+=(p[_+TwoColorTimeline.B2]-E)*P}if(1==l)d.color.set(T,S,w,b),d.darkColor.set(C,A,E,1);else{g=d.color,v=d.darkColor;u==i.setup&&(g.setFromColor(d.data.color),v.setFromColor(d.data.darkColor)),g.add((T-g.r)*l,(S-g.g)*l,(w-g.b)*l,(b-g.a)*l),v.add((C-v.r)*l,(A-v.g)*l,(E-v.b)*l,0)}}}},TwoColorTimeline.ENTRIES=8,TwoColorTimeline.PREV_TIME=-8,TwoColorTimeline.PREV_R=-7,TwoColorTimeline.PREV_G=-6,TwoColorTimeline.PREV_B=-5,TwoColorTimeline.PREV_A=-4,TwoColorTimeline.PREV_R2=-3,TwoColorTimeline.PREV_G2=-2,TwoColorTimeline.PREV_B2=-1,TwoColorTimeline.R=1,TwoColorTimeline.G=2,TwoColorTimeline.B=3,TwoColorTimeline.A=4,TwoColorTimeline.R2=5,TwoColorTimeline.G2=6,TwoColorTimeline.B2=7,TwoColorTimeline}(l);t.TwoColorTimeline=v;var m=function(){function AttachmentTimeline(i){this.frames=t.Utils.newFloatArray(i),this.attachmentNames=new Array(i)}return AttachmentTimeline.prototype.getPropertyId=function(){return(o.attachment<<24)+this.slotIndex},AttachmentTimeline.prototype.getFrameCount=function(){return this.frames.length},AttachmentTimeline.prototype.setFrame=function(t,i,r){this.frames[t]=i,this.attachmentNames[t]=r},AttachmentTimeline.prototype.apply=function(t,o,a,l,u,c,d){var p=t.slots[this.slotIndex];if(p.bone.active)if(d!=r.mixOut){var g=this.frames;if(a<g[0])c!=i.setup&&c!=i.first||this.setAttachment(t,p,p.data.attachmentName);else{var v=0;v=a>=g[g.length-1]?g.length-1:h.binarySearch(g,a,1)-1;var m=this.attachmentNames[v];t.slots[this.slotIndex].setAttachment(null==m?null:t.getAttachment(this.slotIndex,m))}}else c==i.setup&&this.setAttachment(t,p,p.data.attachmentName)},AttachmentTimeline.prototype.setAttachment=function(t,i,r){i.attachment=null==r?null:t.getAttachment(this.slotIndex,r)},AttachmentTimeline}();t.AttachmentTimeline=m;var y=null,T=function(r){function DeformTimeline(i){var o=r.call(this,i)||this;return o.frames=t.Utils.newFloatArray(i),o.frameVertices=new Array(i),null==y&&(y=t.Utils.newFloatArray(64)),o}return a(DeformTimeline,r),DeformTimeline.prototype.getPropertyId=function(){return(o.deform<<27)+ +this.attachment.id+this.slotIndex},DeformTimeline.prototype.setFrame=function(t,i,r){this.frames[t]=i,this.frameVertices[t]=r},DeformTimeline.prototype.apply=function(r,o,a,l,u,c,d){var p=r.slots[this.slotIndex];if(p.bone.active){var g=p.getAttachment();if(g instanceof t.VertexAttachment&&g.deformAttachment==this.attachment){var v=p.deform;0==v.length&&(c=i.setup);var m=this.frameVertices,y=m[0].length,T=this.frames;if(a<T[0]){var S=g;switch(c){case i.setup:return void(v.length=0);case i.first:if(1==u){v.length=0;break}var w=t.Utils.setArraySize(v,y);if(null==S.bones)for(var b=S.vertices,C=0;C<y;C++)w[C]+=(b[C]-w[C])*u;else{u=1-u;for(C=0;C<y;C++)w[C]*=u}}}else{var A=t.Utils.setArraySize(v,y);if(a>=T[T.length-1]){var E=m[T.length-1];if(1==u)if(c==i.add)if(null==(S=g).bones){b=S.vertices;for(var M=0;M<y;M++)A[M]+=E[M]-b[M]}else for(var _=0;_<y;_++)A[_]+=E[_];else t.Utils.arrayCopy(E,0,A,0,y);else switch(c){case i.setup:var R=g;if(null==R.bones){b=R.vertices;for(var P=0;P<y;P++){var k=b[P];A[P]=k+(E[P]-k)*u}}else for(var O=0;O<y;O++)A[O]=E[O]*u;break;case i.first:case i.replace:for(var L=0;L<y;L++)A[L]+=(E[L]-A[L])*u;break;case i.add:if(null==(S=g).bones){b=S.vertices;for(var D=0;D<y;D++)A[D]+=(E[D]-b[D])*u}else for(var I=0;I<y;I++)A[I]+=E[I]*u}}else{var B=h.binarySearch(T,a),N=m[B-1],G=m[B],Y=T[B],U=this.getCurvePercent(B-1,1-(a-Y)/(T[B-1]-Y));if(1==u)if(c==i.add)if(null==(S=g).bones){b=S.vertices;for(var X=0;X<y;X++){var V=N[X];A[X]+=V+(G[X]-V)*U-b[X]}}else for(var z=0;z<y;z++){V=N[z];A[z]+=V+(G[z]-V)*U}else for(var W=0;W<y;W++){V=N[W];A[W]=V+(G[W]-V)*U}else switch(c){case i.setup:var H=g;if(null==H.bones){b=H.vertices;for(var j=0;j<y;j++){V=N[j],k=b[j];A[j]=k+(V+(G[j]-V)*U-k)*u}}else for(var q=0;q<y;q++){V=N[q];A[q]=(V+(G[q]-V)*U)*u}break;case i.first:case i.replace:for(var K=0;K<y;K++){V=N[K];A[K]+=(V+(G[K]-V)*U-A[K])*u}break;case i.add:if(null==(S=g).bones){b=S.vertices;for(var Z=0;Z<y;Z++){V=N[Z];A[Z]+=(V+(G[Z]-V)*U-b[Z])*u}}else for(var J=0;J<y;J++){V=N[J];A[J]+=(V+(G[J]-V)*U)*u}}}}}}},DeformTimeline}(l);t.DeformTimeline=T;var S=function(){function EventTimeline(i){this.frames=t.Utils.newFloatArray(i),this.events=new Array(i)}return EventTimeline.prototype.getPropertyId=function(){return o.event<<24},EventTimeline.prototype.getFrameCount=function(){return this.frames.length},EventTimeline.prototype.setFrame=function(t,i){this.frames[t]=i.time,this.events[t]=i},EventTimeline.prototype.apply=function(t,i,r,o,a,l,u){if(null!=o){var c=this.frames,d=this.frames.length;if(i>r)this.apply(t,i,Number.MAX_VALUE,o,a,l,u),i=-1;else if(i>=c[d-1])return;if(!(r<c[0])){var p=0;if(i<c[0])p=0;else for(var g=c[p=h.binarySearch(c,i)];p>0&&c[p-1]==g;)p--;for(;p<d&&r>=c[p];p++)o.push(this.events[p])}}},EventTimeline}();t.EventTimeline=S;var w=function(){function DrawOrderTimeline(i){this.frames=t.Utils.newFloatArray(i),this.drawOrders=new Array(i)}return DrawOrderTimeline.prototype.getPropertyId=function(){return o.drawOrder<<24},DrawOrderTimeline.prototype.getFrameCount=function(){return this.frames.length},DrawOrderTimeline.prototype.setFrame=function(t,i,r){this.frames[t]=i,this.drawOrders[t]=r},DrawOrderTimeline.prototype.apply=function(o,a,l,u,c,d,p){var g=o.drawOrder,v=o.slots;if(p!=r.mixOut){var m=this.frames;if(l<m[0])d!=i.setup&&d!=i.first||t.Utils.arrayCopy(o.slots,0,o.drawOrder,0,o.slots.length);else{var y=0;y=l>=m[m.length-1]?m.length-1:h.binarySearch(m,l)-1;var T=this.drawOrders[y];if(null==T)t.Utils.arrayCopy(v,0,g,0,v.length);else for(var S=0,w=T.length;S<w;S++)g[S]=v[T[S]]}}else d==i.setup&&t.Utils.arrayCopy(o.slots,0,o.drawOrder,0,o.slots.length)},DrawOrderTimeline}();t.DrawOrderTimeline=w;var b=function(l){function IkConstraintTimeline(i){var r=l.call(this,i)||this;return r.frames=t.Utils.newFloatArray(i*IkConstraintTimeline.ENTRIES),r}return a(IkConstraintTimeline,l),IkConstraintTimeline.prototype.getPropertyId=function(){return(o.ikConstraint<<24)+this.ikConstraintIndex},IkConstraintTimeline.prototype.setFrame=function(t,i,r,o,a,h,l){t*=IkConstraintTimeline.ENTRIES,this.frames[t]=i,this.frames[t+IkConstraintTimeline.MIX]=r,this.frames[t+IkConstraintTimeline.SOFTNESS]=o,this.frames[t+IkConstraintTimeline.BEND_DIRECTION]=a,this.frames[t+IkConstraintTimeline.COMPRESS]=h?1:0,this.frames[t+IkConstraintTimeline.STRETCH]=l?1:0},IkConstraintTimeline.prototype.apply=function(t,o,a,l,u,c,d){var p=this.frames,g=t.ikConstraints[this.ikConstraintIndex];if(g.active)if(a<p[0])switch(c){case i.setup:return g.mix=g.data.mix,g.softness=g.data.softness,g.bendDirection=g.data.bendDirection,g.compress=g.data.compress,void(g.stretch=g.data.stretch);case i.first:g.mix+=(g.data.mix-g.mix)*u,g.softness+=(g.data.softness-g.softness)*u,g.bendDirection=g.data.bendDirection,g.compress=g.data.compress,g.stretch=g.data.stretch}else if(a>=p[p.length-IkConstraintTimeline.ENTRIES])c==i.setup?(g.mix=g.data.mix+(p[p.length+IkConstraintTimeline.PREV_MIX]-g.data.mix)*u,g.softness=g.data.softness+(p[p.length+IkConstraintTimeline.PREV_SOFTNESS]-g.data.softness)*u,d==r.mixOut?(g.bendDirection=g.data.bendDirection,g.compress=g.data.compress,g.stretch=g.data.stretch):(g.bendDirection=p[p.length+IkConstraintTimeline.PREV_BEND_DIRECTION],g.compress=0!=p[p.length+IkConstraintTimeline.PREV_COMPRESS],g.stretch=0!=p[p.length+IkConstraintTimeline.PREV_STRETCH])):(g.mix+=(p[p.length+IkConstraintTimeline.PREV_MIX]-g.mix)*u,g.softness+=(p[p.length+IkConstraintTimeline.PREV_SOFTNESS]-g.softness)*u,d==r.mixIn&&(g.bendDirection=p[p.length+IkConstraintTimeline.PREV_BEND_DIRECTION],g.compress=0!=p[p.length+IkConstraintTimeline.PREV_COMPRESS],g.stretch=0!=p[p.length+IkConstraintTimeline.PREV_STRETCH]));else{var v=h.binarySearch(p,a,IkConstraintTimeline.ENTRIES),m=p[v+IkConstraintTimeline.PREV_MIX],y=p[v+IkConstraintTimeline.PREV_SOFTNESS],T=p[v],S=this.getCurvePercent(v/IkConstraintTimeline.ENTRIES-1,1-(a-T)/(p[v+IkConstraintTimeline.PREV_TIME]-T));c==i.setup?(g.mix=g.data.mix+(m+(p[v+IkConstraintTimeline.MIX]-m)*S-g.data.mix)*u,g.softness=g.data.softness+(y+(p[v+IkConstraintTimeline.SOFTNESS]-y)*S-g.data.softness)*u,d==r.mixOut?(g.bendDirection=g.data.bendDirection,g.compress=g.data.compress,g.stretch=g.data.stretch):(g.bendDirection=p[v+IkConstraintTimeline.PREV_BEND_DIRECTION],g.compress=0!=p[v+IkConstraintTimeline.PREV_COMPRESS],g.stretch=0!=p[v+IkConstraintTimeline.PREV_STRETCH])):(g.mix+=(m+(p[v+IkConstraintTimeline.MIX]-m)*S-g.mix)*u,g.softness+=(y+(p[v+IkConstraintTimeline.SOFTNESS]-y)*S-g.softness)*u,d==r.mixIn&&(g.bendDirection=p[v+IkConstraintTimeline.PREV_BEND_DIRECTION],g.compress=0!=p[v+IkConstraintTimeline.PREV_COMPRESS],g.stretch=0!=p[v+IkConstraintTimeline.PREV_STRETCH]))}},IkConstraintTimeline.ENTRIES=6,IkConstraintTimeline.PREV_TIME=-6,IkConstraintTimeline.PREV_MIX=-5,IkConstraintTimeline.PREV_SOFTNESS=-4,IkConstraintTimeline.PREV_BEND_DIRECTION=-3,IkConstraintTimeline.PREV_COMPRESS=-2,IkConstraintTimeline.PREV_STRETCH=-1,IkConstraintTimeline.MIX=1,IkConstraintTimeline.SOFTNESS=2,IkConstraintTimeline.BEND_DIRECTION=3,IkConstraintTimeline.COMPRESS=4,IkConstraintTimeline.STRETCH=5,IkConstraintTimeline}(l);t.IkConstraintTimeline=b;var C=function(r){function TransformConstraintTimeline(i){var o=r.call(this,i)||this;return o.frames=t.Utils.newFloatArray(i*TransformConstraintTimeline.ENTRIES),o}return a(TransformConstraintTimeline,r),TransformConstraintTimeline.prototype.getPropertyId=function(){return(o.transformConstraint<<24)+this.transformConstraintIndex},TransformConstraintTimeline.prototype.setFrame=function(t,i,r,o,a,h){t*=TransformConstraintTimeline.ENTRIES,this.frames[t]=i,this.frames[t+TransformConstraintTimeline.ROTATE]=r,this.frames[t+TransformConstraintTimeline.TRANSLATE]=o,this.frames[t+TransformConstraintTimeline.SCALE]=a,this.frames[t+TransformConstraintTimeline.SHEAR]=h},TransformConstraintTimeline.prototype.apply=function(t,r,o,a,l,u,c){var d=this.frames,p=t.transformConstraints[this.transformConstraintIndex];if(p.active)if(o<d[0]){var g=p.data;switch(u){case i.setup:return p.rotateMix=g.rotateMix,p.translateMix=g.translateMix,p.scaleMix=g.scaleMix,void(p.shearMix=g.shearMix);case i.first:p.rotateMix+=(g.rotateMix-p.rotateMix)*l,p.translateMix+=(g.translateMix-p.translateMix)*l,p.scaleMix+=(g.scaleMix-p.scaleMix)*l,p.shearMix+=(g.shearMix-p.shearMix)*l}}else{var v=0,m=0,y=0,T=0;if(o>=d[d.length-TransformConstraintTimeline.ENTRIES]){var S=d.length;v=d[S+TransformConstraintTimeline.PREV_ROTATE],m=d[S+TransformConstraintTimeline.PREV_TRANSLATE],y=d[S+TransformConstraintTimeline.PREV_SCALE],T=d[S+TransformConstraintTimeline.PREV_SHEAR]}else{var w=h.binarySearch(d,o,TransformConstraintTimeline.ENTRIES);v=d[w+TransformConstraintTimeline.PREV_ROTATE],m=d[w+TransformConstraintTimeline.PREV_TRANSLATE],y=d[w+TransformConstraintTimeline.PREV_SCALE],T=d[w+TransformConstraintTimeline.PREV_SHEAR];var b=d[w],C=this.getCurvePercent(w/TransformConstraintTimeline.ENTRIES-1,1-(o-b)/(d[w+TransformConstraintTimeline.PREV_TIME]-b));v+=(d[w+TransformConstraintTimeline.ROTATE]-v)*C,m+=(d[w+TransformConstraintTimeline.TRANSLATE]-m)*C,y+=(d[w+TransformConstraintTimeline.SCALE]-y)*C,T+=(d[w+TransformConstraintTimeline.SHEAR]-T)*C}if(u==i.setup){g=p.data;p.rotateMix=g.rotateMix+(v-g.rotateMix)*l,p.translateMix=g.translateMix+(m-g.translateMix)*l,p.scaleMix=g.scaleMix+(y-g.scaleMix)*l,p.shearMix=g.shearMix+(T-g.shearMix)*l}else p.rotateMix+=(v-p.rotateMix)*l,p.translateMix+=(m-p.translateMix)*l,p.scaleMix+=(y-p.scaleMix)*l,p.shearMix+=(T-p.shearMix)*l}},TransformConstraintTimeline.ENTRIES=5,TransformConstraintTimeline.PREV_TIME=-5,TransformConstraintTimeline.PREV_ROTATE=-4,TransformConstraintTimeline.PREV_TRANSLATE=-3,TransformConstraintTimeline.PREV_SCALE=-2,TransformConstraintTimeline.PREV_SHEAR=-1,TransformConstraintTimeline.ROTATE=1,TransformConstraintTimeline.TRANSLATE=2,TransformConstraintTimeline.SCALE=3,TransformConstraintTimeline.SHEAR=4,TransformConstraintTimeline}(l);t.TransformConstraintTimeline=C;var A=function(r){function PathConstraintPositionTimeline(i){var o=r.call(this,i)||this;return o.frames=t.Utils.newFloatArray(i*PathConstraintPositionTimeline.ENTRIES),o}return a(PathConstraintPositionTimeline,r),PathConstraintPositionTimeline.prototype.getPropertyId=function(){return(o.pathConstraintPosition<<24)+this.pathConstraintIndex},PathConstraintPositionTimeline.prototype.setFrame=function(t,i,r){t*=PathConstraintPositionTimeline.ENTRIES,this.frames[t]=i,this.frames[t+PathConstraintPositionTimeline.VALUE]=r},PathConstraintPositionTimeline.prototype.apply=function(t,r,o,a,l,u,c){var d=this.frames,p=t.pathConstraints[this.pathConstraintIndex];if(p.active)if(o<d[0])switch(u){case i.setup:return void(p.position=p.data.position);case i.first:p.position+=(p.data.position-p.position)*l}else{var g=0;if(o>=d[d.length-PathConstraintPositionTimeline.ENTRIES])g=d[d.length+PathConstraintPositionTimeline.PREV_VALUE];else{var v=h.binarySearch(d,o,PathConstraintPositionTimeline.ENTRIES);g=d[v+PathConstraintPositionTimeline.PREV_VALUE];var m=d[v],y=this.getCurvePercent(v/PathConstraintPositionTimeline.ENTRIES-1,1-(o-m)/(d[v+PathConstraintPositionTimeline.PREV_TIME]-m));g+=(d[v+PathConstraintPositionTimeline.VALUE]-g)*y}u==i.setup?p.position=p.data.position+(g-p.data.position)*l:p.position+=(g-p.position)*l}},PathConstraintPositionTimeline.ENTRIES=2,PathConstraintPositionTimeline.PREV_TIME=-2,PathConstraintPositionTimeline.PREV_VALUE=-1,PathConstraintPositionTimeline.VALUE=1,PathConstraintPositionTimeline}(l);t.PathConstraintPositionTimeline=A;var E=function(t){function PathConstraintSpacingTimeline(i){return t.call(this,i)||this}return a(PathConstraintSpacingTimeline,t),PathConstraintSpacingTimeline.prototype.getPropertyId=function(){return(o.pathConstraintSpacing<<24)+this.pathConstraintIndex},PathConstraintSpacingTimeline.prototype.apply=function(t,r,o,a,l,u,c){var d=this.frames,p=t.pathConstraints[this.pathConstraintIndex];if(p.active)if(o<d[0])switch(u){case i.setup:return void(p.spacing=p.data.spacing);case i.first:p.spacing+=(p.data.spacing-p.spacing)*l}else{var g=0;if(o>=d[d.length-PathConstraintSpacingTimeline.ENTRIES])g=d[d.length+PathConstraintSpacingTimeline.PREV_VALUE];else{var v=h.binarySearch(d,o,PathConstraintSpacingTimeline.ENTRIES);g=d[v+PathConstraintSpacingTimeline.PREV_VALUE];var m=d[v],y=this.getCurvePercent(v/PathConstraintSpacingTimeline.ENTRIES-1,1-(o-m)/(d[v+PathConstraintSpacingTimeline.PREV_TIME]-m));g+=(d[v+PathConstraintSpacingTimeline.VALUE]-g)*y}u==i.setup?p.spacing=p.data.spacing+(g-p.data.spacing)*l:p.spacing+=(g-p.spacing)*l}},PathConstraintSpacingTimeline}(A);t.PathConstraintSpacingTimeline=E;var M=function(r){function PathConstraintMixTimeline(i){var o=r.call(this,i)||this;return o.frames=t.Utils.newFloatArray(i*PathConstraintMixTimeline.ENTRIES),o}return a(PathConstraintMixTimeline,r),PathConstraintMixTimeline.prototype.getPropertyId=function(){return(o.pathConstraintMix<<24)+this.pathConstraintIndex},PathConstraintMixTimeline.prototype.setFrame=function(t,i,r,o){t*=PathConstraintMixTimeline.ENTRIES,this.frames[t]=i,this.frames[t+PathConstraintMixTimeline.ROTATE]=r,this.frames[t+PathConstraintMixTimeline.TRANSLATE]=o},PathConstraintMixTimeline.prototype.apply=function(t,r,o,a,l,u,c){var d=this.frames,p=t.pathConstraints[this.pathConstraintIndex];if(p.active)if(o<d[0])switch(u){case i.setup:return p.rotateMix=p.data.rotateMix,void(p.translateMix=p.data.translateMix);case i.first:p.rotateMix+=(p.data.rotateMix-p.rotateMix)*l,p.translateMix+=(p.data.translateMix-p.translateMix)*l}else{var g=0,v=0;if(o>=d[d.length-PathConstraintMixTimeline.ENTRIES])g=d[d.length+PathConstraintMixTimeline.PREV_ROTATE],v=d[d.length+PathConstraintMixTimeline.PREV_TRANSLATE];else{var m=h.binarySearch(d,o,PathConstraintMixTimeline.ENTRIES);g=d[m+PathConstraintMixTimeline.PREV_ROTATE],v=d[m+PathConstraintMixTimeline.PREV_TRANSLATE];var y=d[m],T=this.getCurvePercent(m/PathConstraintMixTimeline.ENTRIES-1,1-(o-y)/(d[m+PathConstraintMixTimeline.PREV_TIME]-y));g+=(d[m+PathConstraintMixTimeline.ROTATE]-g)*T,v+=(d[m+PathConstraintMixTimeline.TRANSLATE]-v)*T}u==i.setup?(p.rotateMix=p.data.rotateMix+(g-p.data.rotateMix)*l,p.translateMix=p.data.translateMix+(v-p.data.translateMix)*l):(p.rotateMix+=(g-p.rotateMix)*l,p.translateMix+=(v-p.translateMix)*l)}},PathConstraintMixTimeline.ENTRIES=3,PathConstraintMixTimeline.PREV_TIME=-3,PathConstraintMixTimeline.PREV_ROTATE=-2,PathConstraintMixTimeline.PREV_TRANSLATE=-1,PathConstraintMixTimeline.ROTATE=1,PathConstraintMixTimeline.TRANSLATE=2,PathConstraintMixTimeline}(l);t.PathConstraintMixTimeline=M}(o||(o={})),function(t){var i=function(){function AnimationState(i){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new a(this),this.propertyIDs=new t.IntSet,this.animationsChanged=!1,this.trackEntryPool=new t.Pool((function(){return new r})),this.data=i}return AnimationState.prototype.update=function(t){t*=this.timeScale;for(var i=this.tracks,r=0,o=i.length;r<o;r++){var a=i[r];if(null!=a){a.animationLast=a.nextAnimationLast,a.trackLast=a.nextTrackLast;var h=t*a.timeScale;if(a.delay>0){if(a.delay-=h,a.delay>0)continue;h=-a.delay,a.delay=0}var l=a.next;if(null!=l){var u=a.trackLast-l.delay;if(u>=0){for(l.delay=0,l.trackTime+=0==a.timeScale?0:(u/a.timeScale+t)*l.timeScale,a.trackTime+=h,this.setCurrent(r,l,!0);null!=l.mixingFrom;)l.mixTime+=t,l=l.mixingFrom;continue}}else if(a.trackLast>=a.trackEnd&&null==a.mixingFrom){i[r]=null,this.queue.end(a),this.disposeNext(a);continue}if(null!=a.mixingFrom&&this.updateMixingFrom(a,t)){var c=a.mixingFrom;for(a.mixingFrom=null,null!=c&&(c.mixingTo=null);null!=c;)this.queue.end(c),c=c.mixingFrom}a.trackTime+=h}}this.queue.drain()},AnimationState.prototype.updateMixingFrom=function(t,i){var r=t.mixingFrom;if(null==r)return!0;var o=this.updateMixingFrom(r,i);return r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=r.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=r.mixingFrom,null!=r.mixingFrom&&(r.mixingFrom.mixingTo=t),t.interruptAlpha=r.interruptAlpha,this.queue.end(r)),o):(r.trackTime+=i*r.timeScale,t.mixTime+=i,!1)},AnimationState.prototype.apply=function(i){if(null==i)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var r=this.events,o=this.tracks,a=!1,h=0,l=o.length;h<l;h++){var u=o[h];if(!(null==u||u.delay>0)){a=!0;var c=0==h?t.MixBlend.first:u.mixBlend,d=u.alpha;null!=u.mixingFrom?d*=this.applyMixingFrom(u,i,c):u.trackTime>=u.trackEnd&&null==u.next&&(d=0);var p=u.animationLast,g=u.getAnimationTime(),v=u.animation.timelines.length,m=u.animation.timelines;if(0==h&&1==d||c==t.MixBlend.add)for(var y=0;y<v;y++){t.Utils.webkit602BugfixHelper(d,c);var T=m[y];T instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(T,i,g,c,!0):T.apply(i,p,g,r,d,c,t.MixDirection.mixIn)}else{var S=u.timelineMode,w=0==u.timelinesRotation.length;w&&t.Utils.setArraySize(u.timelinesRotation,v<<1,null);var b=u.timelinesRotation;for(y=0;y<v;y++){var C=m[y],A=S[y]==AnimationState.SUBSEQUENT?c:t.MixBlend.setup;C instanceof t.RotateTimeline?this.applyRotateTimeline(C,i,g,d,A,b,y<<1,w):C instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(C,i,g,c,!0):(t.Utils.webkit602BugfixHelper(d,c),C.apply(i,p,g,r,d,A,t.MixDirection.mixIn))}}this.queueEvents(u,g),r.length=0,u.nextAnimationLast=g,u.nextTrackLast=u.trackTime}}for(var E=this.unkeyedState+AnimationState.SETUP,M=i.slots,_=0,R=i.slots.length;_<R;_++){var P=M[_];if(P.attachmentState==E){var k=P.data.attachmentName;P.attachment=null==k?null:i.getAttachment(P.data.index,k)}}return this.unkeyedState+=2,this.queue.drain(),a},AnimationState.prototype.applyMixingFrom=function(i,r,o){var a=i.mixingFrom;null!=a.mixingFrom&&this.applyMixingFrom(a,r,o);var h=0;0==i.mixDuration?(h=1,o==t.MixBlend.first&&(o=t.MixBlend.setup)):((h=i.mixTime/i.mixDuration)>1&&(h=1),o!=t.MixBlend.first&&(o=a.mixBlend));var l=h<a.eventThreshold?this.events:null,u=h<a.attachmentThreshold,c=h<a.drawOrderThreshold,d=a.animationLast,p=a.getAnimationTime(),g=a.animation.timelines.length,v=a.animation.timelines,m=a.alpha*i.interruptAlpha,y=m*(1-h);if(o==t.MixBlend.add)for(var T=0;T<g;T++)v[T].apply(r,d,p,l,y,o,t.MixDirection.mixOut);else{var S=a.timelineMode,w=a.timelineHoldMix,b=0==a.timelinesRotation.length;b&&t.Utils.setArraySize(a.timelinesRotation,g<<1,null);var C=a.timelinesRotation;a.totalAlpha=0;for(T=0;T<g;T++){var A=v[T],E=t.MixDirection.mixOut,M=void 0,_=0;switch(S[T]){case AnimationState.SUBSEQUENT:if(!c&&A instanceof t.DrawOrderTimeline)continue;M=o,_=y;break;case AnimationState.FIRST:M=t.MixBlend.setup,_=y;break;case AnimationState.HOLD_SUBSEQUENT:M=o,_=m;break;case AnimationState.HOLD_FIRST:M=t.MixBlend.setup,_=m;break;default:M=t.MixBlend.setup;var R=w[T];_=m*Math.max(0,1-R.mixTime/R.mixDuration)}a.totalAlpha+=_,A instanceof t.RotateTimeline?this.applyRotateTimeline(A,r,p,_,M,C,T<<1,b):A instanceof t.AttachmentTimeline?this.applyAttachmentTimeline(A,r,p,M,u):(t.Utils.webkit602BugfixHelper(_,o),c&&A instanceof t.DrawOrderTimeline&&M==t.MixBlend.setup&&(E=t.MixDirection.mixIn),A.apply(r,d,p,l,_,M,E))}}return i.mixDuration>0&&this.queueEvents(a,p),this.events.length=0,a.nextAnimationLast=p,a.nextTrackLast=a.trackTime,h},AnimationState.prototype.applyAttachmentTimeline=function(i,r,o,a,h){var l=r.slots[i.slotIndex];if(l.bone.active){var u,c=i.frames;if(o<c[0])a!=t.MixBlend.setup&&a!=t.MixBlend.first||this.setAttachment(r,l,l.data.attachmentName,h);else u=o>=c[c.length-1]?c.length-1:t.Animation.binarySearch(c,o)-1,this.setAttachment(r,l,i.attachmentNames[u],h);l.attachmentState<=this.unkeyedState&&(l.attachmentState=this.unkeyedState+AnimationState.SETUP)}},AnimationState.prototype.setAttachment=function(t,i,r,o){i.attachment=null==r?null:t.getAttachment(i.data.index,r),o&&(i.attachmentState=this.unkeyedState+AnimationState.CURRENT)},AnimationState.prototype.applyRotateTimeline=function(i,r,o,a,h,l,u,c){if(c&&(l[u]=0),1!=a){var d=i,p=d.frames,g=r.bones[d.boneIndex];if(g.active){var v=0,m=0;if(o<p[0])switch(h){case t.MixBlend.setup:g.rotation=g.data.rotation;default:return;case t.MixBlend.first:v=g.rotation,m=g.data.rotation}else if(v=h==t.MixBlend.setup?g.data.rotation:g.rotation,o>=p[p.length-t.RotateTimeline.ENTRIES])m=g.data.rotation+p[p.length+t.RotateTimeline.PREV_ROTATION];else{var y=t.Animation.binarySearch(p,o,t.RotateTimeline.ENTRIES),T=p[y+t.RotateTimeline.PREV_ROTATION],S=p[y],w=d.getCurvePercent((y>>1)-1,1-(o-S)/(p[y+t.RotateTimeline.PREV_TIME]-S));m=p[y+t.RotateTimeline.ROTATION]-T,m=T+(m-=360*(16384-(16384.499999999996-m/360|0)))*w+g.data.rotation,m-=360*(16384-(16384.499999999996-m/360|0))}var b=0,C=m-v;if(0==(C-=360*(16384-(16384.499999999996-C/360|0))))b=l[u];else{var A=0,E=0;c?(A=0,E=C):(A=l[u],E=l[u+1]);var M=C>0,_=A>=0;t.MathUtils.signum(E)!=t.MathUtils.signum(C)&&Math.abs(E)<=90&&(Math.abs(A)>180&&(A+=360*t.MathUtils.signum(A)),_=M),b=C+A-A%360,_!=M&&(b+=360*t.MathUtils.signum(A)),l[u]=b}l[u+1]=C,v+=b*a,g.rotation=v-360*(16384-(16384.499999999996-v/360|0))}}else i.apply(r,0,o,null,1,h,t.MixDirection.mixIn)},AnimationState.prototype.queueEvents=function(t,i){for(var r=t.animationStart,o=t.animationEnd,a=o-r,h=t.trackLast%a,l=this.events,u=0,c=l.length;u<c;u++){var d=l[u];if(d.time<h)break;d.time>o||this.queue.event(t,d)}for((t.loop?0==a||h>t.trackTime%a:i>=o&&t.animationLast<o)&&this.queue.complete(t);u<c;u++){l[u].time<r||this.queue.event(t,l[u])}},AnimationState.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var i=0,r=this.tracks.length;i<r;i++)this.clearTrack(i);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},AnimationState.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var i=this.tracks[t];if(null!=i){this.queue.end(i),this.disposeNext(i);for(var r=i;;){var o=r.mixingFrom;if(null==o)break;this.queue.end(o),r.mixingFrom=null,r.mixingTo=null,r=o}this.tracks[i.trackIndex]=null,this.queue.drain()}}},AnimationState.prototype.setCurrent=function(t,i,r){var o=this.expandToIndex(t);this.tracks[t]=i,null!=o&&(r&&this.queue.interrupt(o),i.mixingFrom=o,o.mixingTo=i,i.mixTime=0,null!=o.mixingFrom&&o.mixDuration>0&&(i.interruptAlpha*=Math.min(1,o.mixTime/o.mixDuration)),o.timelinesRotation.length=0),this.queue.start(i)},AnimationState.prototype.setAnimation=function(t,i,r){var o=this.data.skeletonData.findAnimation(i);if(null==o)throw new Error("Animation not found: "+i);return this.setAnimationWith(t,o,r)},AnimationState.prototype.setAnimationWith=function(t,i,r){if(null==i)throw new Error("animation cannot be null.");var o=!0,a=this.expandToIndex(t);null!=a&&(-1==a.nextTrackLast?(this.tracks[t]=a.mixingFrom,this.queue.interrupt(a),this.queue.end(a),this.disposeNext(a),a=a.mixingFrom,o=!1):this.disposeNext(a));var h=this.trackEntry(t,i,r,a);return this.setCurrent(t,h,o),this.queue.drain(),h},AnimationState.prototype.addAnimation=function(t,i,r,o){var a=this.data.skeletonData.findAnimation(i);if(null==a)throw new Error("Animation not found: "+i);return this.addAnimationWith(t,a,r,o)},AnimationState.prototype.addAnimationWith=function(t,i,r,o){if(null==i)throw new Error("animation cannot be null.");var a=this.expandToIndex(t);if(null!=a)for(;null!=a.next;)a=a.next;var h=this.trackEntry(t,i,r,a);if(null==a)this.setCurrent(t,h,!0),this.queue.drain();else if(a.next=h,o<=0){var l=a.animationEnd-a.animationStart;0!=l?(a.loop?o+=l*(1+(a.trackTime/l|0)):o+=Math.max(l,a.trackTime),o-=this.data.getMix(a.animation,i)):o=a.trackTime}return h.delay=o,h},AnimationState.prototype.setEmptyAnimation=function(t,i){var r=this.setAnimationWith(t,AnimationState.emptyAnimation,!1);return r.mixDuration=i,r.trackEnd=i,r},AnimationState.prototype.addEmptyAnimation=function(t,i,r){r<=0&&(r-=i);var o=this.addAnimationWith(t,AnimationState.emptyAnimation,!1,r);return o.mixDuration=i,o.trackEnd=i,o},AnimationState.prototype.setEmptyAnimations=function(t){var i=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var r=0,o=this.tracks.length;r<o;r++){var a=this.tracks[r];null!=a&&this.setEmptyAnimation(a.trackIndex,t)}this.queue.drainDisabled=i,this.queue.drain()},AnimationState.prototype.expandToIndex=function(i){return i<this.tracks.length?this.tracks[i]:(t.Utils.ensureArrayCapacity(this.tracks,i+1,null),this.tracks.length=i+1,null)},AnimationState.prototype.trackEntry=function(i,r,o,a){var h=this.trackEntryPool.obtain();return h.trackIndex=i,h.animation=r,h.loop=o,h.holdPrevious=!1,h.eventThreshold=0,h.attachmentThreshold=0,h.drawOrderThreshold=0,h.animationStart=0,h.animationEnd=r.duration,h.animationLast=-1,h.nextAnimationLast=-1,h.delay=0,h.trackTime=0,h.trackLast=-1,h.nextTrackLast=-1,h.trackEnd=Number.MAX_VALUE,h.timeScale=1,h.alpha=1,h.interruptAlpha=1,h.mixTime=0,h.mixDuration=null==a?0:this.data.getMix(a.animation,r),h.mixBlend=t.MixBlend.replace,h},AnimationState.prototype.disposeNext=function(t){for(var i=t.next;null!=i;)this.queue.dispose(i),i=i.next;t.next=null},AnimationState.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var i=0,r=this.tracks.length;i<r;i++){var o=this.tracks[i];if(null!=o){for(;null!=o.mixingFrom;)o=o.mixingFrom;do{null!=o.mixingFrom&&o.mixBlend==t.MixBlend.add||this.computeHold(o),o=o.mixingTo}while(null!=o)}}},AnimationState.prototype.computeHold=function(i){var r=i.mixingTo,o=i.animation.timelines,a=i.animation.timelines.length,h=t.Utils.setArraySize(i.timelineMode,a);i.timelineHoldMix.length=0;var l=t.Utils.setArraySize(i.timelineHoldMix,a),u=this.propertyIDs;if(null!=r&&r.holdPrevious)for(var c=0;c<a;c++)h[c]=u.add(o[c].getPropertyId())?AnimationState.HOLD_FIRST:AnimationState.HOLD_SUBSEQUENT;else t:for(c=0;c<a;c++){var d=o[c],p=d.getPropertyId();if(u.add(p))if(null==r||d instanceof t.AttachmentTimeline||d instanceof t.DrawOrderTimeline||d instanceof t.EventTimeline||!r.animation.hasTimeline(p))h[c]=AnimationState.FIRST;else{for(var g=r.mixingTo;null!=g;g=g.mixingTo)if(!g.animation.hasTimeline(p)){if(i.mixDuration>0){h[c]=AnimationState.HOLD_MIX,l[c]=g;continue t}break}h[c]=AnimationState.HOLD_FIRST}else h[c]=AnimationState.SUBSEQUENT}},AnimationState.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},AnimationState.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},AnimationState.prototype.removeListener=function(t){var i=this.listeners.indexOf(t);i>=0&&this.listeners.splice(i,1)},AnimationState.prototype.clearListeners=function(){this.listeners.length=0},AnimationState.prototype.clearListenerNotifications=function(){this.queue.clear()},AnimationState.emptyAnimation=new t.Animation("<empty>",[],0),AnimationState.SUBSEQUENT=0,AnimationState.FIRST=1,AnimationState.HOLD_SUBSEQUENT=2,AnimationState.HOLD_FIRST=3,AnimationState.HOLD_MIX=4,AnimationState.SETUP=1,AnimationState.CURRENT=2,AnimationState}();t.AnimationState=i;var r=function(){function TrackEntry(){this.mixBlend=t.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return TrackEntry.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},TrackEntry.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},TrackEntry.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},TrackEntry.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},TrackEntry.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},TrackEntry}();t.TrackEntry=r;var o,a=function(){function EventQueue(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return EventQueue.prototype.start=function(t){this.objects.push(o.start),this.objects.push(t),this.animState.animationsChanged=!0},EventQueue.prototype.interrupt=function(t){this.objects.push(o.interrupt),this.objects.push(t)},EventQueue.prototype.end=function(t){this.objects.push(o.end),this.objects.push(t),this.animState.animationsChanged=!0},EventQueue.prototype.dispose=function(t){this.objects.push(o.dispose),this.objects.push(t)},EventQueue.prototype.complete=function(t){this.objects.push(o.complete),this.objects.push(t)},EventQueue.prototype.event=function(t,i){this.objects.push(o.event),this.objects.push(t),this.objects.push(i)},EventQueue.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,i=this.animState.listeners,r=0;r<t.length;r+=2){var a=t[r],h=t[r+1];switch(a){case o.start:null!=h.listener&&h.listener.start&&h.listener.start(h);for(var l=0;l<i.length;l++)i[l].start&&i[l].start(h);break;case o.interrupt:null!=h.listener&&h.listener.interrupt&&h.listener.interrupt(h);for(l=0;l<i.length;l++)i[l].interrupt&&i[l].interrupt(h);break;case o.end:null!=h.listener&&h.listener.end&&h.listener.end(h);for(l=0;l<i.length;l++)i[l].end&&i[l].end(h);case o.dispose:null!=h.listener&&h.listener.dispose&&h.listener.dispose(h);for(l=0;l<i.length;l++)i[l].dispose&&i[l].dispose(h);this.animState.trackEntryPool.free(h);break;case o.complete:null!=h.listener&&h.listener.complete&&h.listener.complete(h);for(l=0;l<i.length;l++)i[l].complete&&i[l].complete(h);break;case o.event:var u=t[2+r++];null!=h.listener&&h.listener.event&&h.listener.event(h,u);for(l=0;l<i.length;l++)i[l].event&&i[l].event(h,u)}}this.clear(),this.drainDisabled=!1}},EventQueue.prototype.clear=function(){this.objects.length=0},EventQueue}();t.EventQueue=a,function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(o=t.EventType||(t.EventType={}));var h=function(){function AnimationStateAdapter(){}return AnimationStateAdapter.prototype.start=function(t){},AnimationStateAdapter.prototype.interrupt=function(t){},AnimationStateAdapter.prototype.end=function(t){},AnimationStateAdapter.prototype.dispose=function(t){},AnimationStateAdapter.prototype.complete=function(t){},AnimationStateAdapter.prototype.event=function(t,i){},AnimationStateAdapter}();t.AnimationStateAdapter=h}(o||(o={})),function(t){var i=function(){function AnimationStateData(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return AnimationStateData.prototype.setMix=function(t,i,r){var o=this.skeletonData.findAnimation(t);if(null==o)throw new Error("Animation not found: "+t);var a=this.skeletonData.findAnimation(i);if(null==a)throw new Error("Animation not found: "+i);this.setMixWith(o,a,r)},AnimationStateData.prototype.setMixWith=function(t,i,r){if(null==t)throw new Error("from cannot be null.");if(null==i)throw new Error("to cannot be null.");var o=t.name+"."+i.name;this.animationToMixTime[o]=r},AnimationStateData.prototype.getMix=function(t,i){var r=t.name+"."+i.name,o=this.animationToMixTime[r];return void 0===o?this.defaultMix:o},AnimationStateData}();t.AnimationStateData=i}(o||(o={})),function(t){var i=function(){function AssetManager(t,i){void 0===i&&(i=""),this.assets={},this.errors={},this.toLoad=0,this.loaded=0,this.rawDataUris={},this.textureLoader=t,this.pathPrefix=i}return AssetManager.prototype.downloadText=function(t,i,r){var o=new XMLHttpRequest;o.overrideMimeType("text/html"),this.rawDataUris[t]&&(t=this.rawDataUris[t]),o.open("GET",t,!0),o.onload=function(){200==o.status?i(o.responseText):r(o.status,o.responseText)},o.onerror=function(){r(o.status,o.responseText)},o.send()},AssetManager.prototype.downloadBinary=function(t,i,r){var o=new XMLHttpRequest;this.rawDataUris[t]&&(t=this.rawDataUris[t]),o.open("GET",t,!0),o.responseType="arraybuffer",o.onload=function(){200==o.status?i(new Uint8Array(o.response)):r(o.status,o.responseText)},o.onerror=function(){r(o.status,o.responseText)},o.send()},AssetManager.prototype.setRawDataURI=function(t,i){this.rawDataUris[this.pathPrefix+t]=i},AssetManager.prototype.loadBinary=function(t,i,r){var o=this;void 0===i&&(i=null),void 0===r&&(r=null),t=this.pathPrefix+t,this.toLoad++,this.downloadBinary(t,(function(r){o.assets[t]=r,i&&i(t,r),o.toLoad--,o.loaded++}),(function(i,a){o.errors[t]="Couldn't load binary "+t+": status "+status+", "+a,r&&r(t,"Couldn't load binary "+t+": status "+status+", "+a),o.toLoad--,o.loaded++}))},AssetManager.prototype.loadText=function(t,i,r){var o=this;void 0===i&&(i=null),void 0===r&&(r=null),t=this.pathPrefix+t,this.toLoad++,this.downloadText(t,(function(r){o.assets[t]=r,i&&i(t,r),o.toLoad--,o.loaded++}),(function(i,a){o.errors[t]="Couldn't load text "+t+": status "+status+", "+a,r&&r(t,"Couldn't load text "+t+": status "+status+", "+a),o.toLoad--,o.loaded++}))},AssetManager.prototype.loadTexture=function(t,i,r){var o=this;void 0===i&&(i=null),void 0===r&&(r=null);var a=t=this.pathPrefix+t;this.toLoad++;var h=new Image;h.crossOrigin="anonymous",h.onload=function(r){var l=o.textureLoader(h);o.assets[a]=l,o.toLoad--,o.loaded++,i&&i(t,h)},h.onerror=function(i){o.errors[t]="Couldn't load image "+t,o.toLoad--,o.loaded++,r&&r(t,"Couldn't load image "+t)},this.rawDataUris[t]&&(t=this.rawDataUris[t]),h.src=t},AssetManager.prototype.loadTextureAtlas=function(i,r,o){var a=this;void 0===r&&(r=null),void 0===o&&(o=null);var h=i.lastIndexOf("/")>=0?i.substring(0,i.lastIndexOf("/")):"";i=this.pathPrefix+i,this.toLoad++,this.downloadText(i,(function(l){var u={count:0},c=new Array;try{new t.TextureAtlas(l,(function(i){c.push(""==h?i:h+"/"+i);var r=document.createElement("img");return r.width=16,r.height=16,new t.FakeTexture(r)}))}catch(m){var d=m;return a.errors[i]="Couldn't load texture atlas "+i+": "+d.message,o&&o(i,"Couldn't load texture atlas "+i+": "+d.message),a.toLoad--,void a.loaded++}for(var p=function _loop_1(d){var p=!1;a.loadTexture(d,(function(d,g){if(u.count++,u.count==c.length)if(p)a.errors[i]="Couldn't load texture atlas page "+d+"} of atlas "+i,o&&o(i,"Couldn't load texture atlas page "+d+" of atlas "+i),a.toLoad--,a.loaded++;else try{var v=new t.TextureAtlas(l,(function(t){return a.get(""==h?t:h+"/"+t)}));a.assets[i]=v,r&&r(i,v),a.toLoad--,a.loaded++}catch(m){var y=m;a.errors[i]="Couldn't load texture atlas "+i+": "+y.message,o&&o(i,"Couldn't load texture atlas "+i+": "+y.message),a.toLoad--,a.loaded++}}),(function(t,r){p=!0,u.count++,u.count==c.length&&(a.errors[i]="Couldn't load texture atlas page "+t+"} of atlas "+i,o&&o(i,"Couldn't load texture atlas page "+t+" of atlas "+i),a.toLoad--,a.loaded++)}))},g=0,v=c;g<v.length;g++){p(v[g])}}),(function(t,r){a.errors[i]="Couldn't load texture atlas "+i+": status "+status+", "+r,o&&o(i,"Couldn't load texture atlas "+i+": status "+status+", "+r),a.toLoad--,a.loaded++}))},AssetManager.prototype.get=function(t){return t=this.pathPrefix+t,this.assets[t]},AssetManager.prototype.remove=function(t){t=this.pathPrefix+t;var i=this.assets[t];i.dispose&&i.dispose(),this.assets[t]=null},AssetManager.prototype.removeAll=function(){for(var t in this.assets){var i=this.assets[t];i.dispose&&i.dispose()}this.assets={}},AssetManager.prototype.isLoadingComplete=function(){return 0==this.toLoad},AssetManager.prototype.getToLoad=function(){return this.toLoad},AssetManager.prototype.getLoaded=function(){return this.loaded},AssetManager.prototype.dispose=function(){this.removeAll()},AssetManager.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},AssetManager.prototype.getErrors=function(){return this.errors},AssetManager}();t.AssetManager=i}(o||(o={})),function(t){var i=function(){function AtlasAttachmentLoader(t){this.atlas=t}return AtlasAttachmentLoader.prototype.newRegionAttachment=function(i,r,o){var a=this.atlas.findRegion(o);if(null==a)throw new Error("Region not found in atlas: "+o+" (region attachment: "+r+")");a.renderObject=a;var h=new t.RegionAttachment(r);return h.setRegion(a),h},AtlasAttachmentLoader.prototype.newMeshAttachment=function(i,r,o){var a=this.atlas.findRegion(o);if(null==a)throw new Error("Region not found in atlas: "+o+" (mesh attachment: "+r+")");a.renderObject=a;var h=new t.MeshAttachment(r);return h.region=a,h},AtlasAttachmentLoader.prototype.newBoundingBoxAttachment=function(i,r){return new t.BoundingBoxAttachment(r)},AtlasAttachmentLoader.prototype.newPathAttachment=function(i,r){return new t.PathAttachment(r)},AtlasAttachmentLoader.prototype.newPointAttachment=function(i,r){return new t.PointAttachment(r)},AtlasAttachmentLoader.prototype.newClippingAttachment=function(i,r){return new t.ClippingAttachment(r)},AtlasAttachmentLoader}();t.AtlasAttachmentLoader=i}(o||(o={})),function(t){var i;(i=t.BlendMode||(t.BlendMode={}))[i.Normal=0]="Normal",i[i.Additive=1]="Additive",i[i.Multiply=2]="Multiply",i[i.Screen=3]="Screen"}(o||(o={})),function(t){var i=function(){function Bone(t,i,r){if(this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.a=0,this.b=0,this.c=0,this.d=0,this.worldY=0,this.worldX=0,this.sorted=!1,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==i)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=i,this.parent=r,this.setToSetupPose()}return Bone.prototype.isActive=function(){return this.active},Bone.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},Bone.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},Bone.prototype.updateWorldTransformWith=function(i,r,o,a,h,l,u){this.ax=i,this.ay=r,this.arotation=o,this.ascaleX=a,this.ascaleY=h,this.ashearX=l,this.ashearY=u,this.appliedValid=!0;var c=this.parent;if(null==c){var d=this.skeleton,p=o+90+u,g=d.scaleX,v=d.scaleY;return this.a=t.MathUtils.cosDeg(o+l)*a*g,this.b=t.MathUtils.cosDeg(p)*h*g,this.c=t.MathUtils.sinDeg(o+l)*a*v,this.d=t.MathUtils.sinDeg(p)*h*v,this.worldX=i*g+d.x,void(this.worldY=r*v+d.y)}var m=c.a,y=c.b,T=c.c,S=c.d;switch(this.worldX=m*i+y*r+c.worldX,this.worldY=T*i+S*r+c.worldY,this.data.transformMode){case t.TransformMode.Normal:p=o+90+u;var w=t.MathUtils.cosDeg(o+l)*a,b=t.MathUtils.cosDeg(p)*h,C=t.MathUtils.sinDeg(o+l)*a,A=t.MathUtils.sinDeg(p)*h;return this.a=m*w+y*C,this.b=m*b+y*A,this.c=T*w+S*C,void(this.d=T*b+S*A);case t.TransformMode.OnlyTranslation:p=o+90+u;this.a=t.MathUtils.cosDeg(o+l)*a,this.b=t.MathUtils.cosDeg(p)*h,this.c=t.MathUtils.sinDeg(o+l)*a,this.d=t.MathUtils.sinDeg(p)*h;break;case t.TransformMode.NoRotationOrReflection:var E=0;(R=m*m+T*T)>1e-4?(R=Math.abs(m*S-y*T)/R,m/=this.skeleton.scaleX,y=(T/=this.skeleton.scaleY)*R,S=m*R,E=Math.atan2(T,m)*t.MathUtils.radDeg):(m=0,T=0,E=90-Math.atan2(S,y)*t.MathUtils.radDeg);var M=o+l-E,_=o+u-E+90;w=t.MathUtils.cosDeg(M)*a,b=t.MathUtils.cosDeg(_)*h,C=t.MathUtils.sinDeg(M)*a,A=t.MathUtils.sinDeg(_)*h;this.a=m*w-y*C,this.b=m*b-y*A,this.c=T*w+S*C,this.d=T*b+S*A;break;case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:var R,P=t.MathUtils.cosDeg(o),k=t.MathUtils.sinDeg(o),O=(m*P+y*k)/this.skeleton.scaleX,L=(T*P+S*k)/this.skeleton.scaleY;(R=Math.sqrt(O*O+L*L))>1e-5&&(R=1/R),O*=R,L*=R,R=Math.sqrt(O*O+L*L),this.data.transformMode==t.TransformMode.NoScale&&m*S-y*T<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(R=-R);var D=Math.PI/2+Math.atan2(L,O),I=Math.cos(D)*R,B=Math.sin(D)*R;w=t.MathUtils.cosDeg(l)*a,b=t.MathUtils.cosDeg(90+u)*h,C=t.MathUtils.sinDeg(l)*a,A=t.MathUtils.sinDeg(90+u)*h;this.a=O*w+I*C,this.b=O*b+I*A,this.c=L*w+B*C,this.d=L*b+B*A}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY},Bone.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},Bone.prototype.getWorldRotationX=function(){return Math.atan2(this.c,this.a)*t.MathUtils.radDeg},Bone.prototype.getWorldRotationY=function(){return Math.atan2(this.d,this.b)*t.MathUtils.radDeg},Bone.prototype.getWorldScaleX=function(){return Math.sqrt(this.a*this.a+this.c*this.c)},Bone.prototype.getWorldScaleY=function(){return Math.sqrt(this.b*this.b+this.d*this.d)},Bone.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var i=this.parent;if(null==i)return this.ax=this.worldX,this.ay=this.worldY,this.arotation=Math.atan2(this.c,this.a)*t.MathUtils.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,void(this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*t.MathUtils.radDeg);var r=i.a,o=i.b,a=i.c,h=i.d,l=1/(r*h-o*a),u=this.worldX-i.worldX,c=this.worldY-i.worldY;this.ax=u*h*l-c*o*l,this.ay=c*r*l-u*a*l;var d=l*h,p=l*r,g=l*o,v=l*a,m=d*this.a-g*this.c,y=d*this.b-g*this.d,T=p*this.c-v*this.a,S=p*this.d-v*this.b;if(this.ashearX=0,this.ascaleX=Math.sqrt(m*m+T*T),this.ascaleX>1e-4){var w=m*S-y*T;this.ascaleY=w/this.ascaleX,this.ashearY=Math.atan2(m*y+T*S,w)*t.MathUtils.radDeg,this.arotation=Math.atan2(T,m)*t.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(y*y+S*S),this.ashearY=0,this.arotation=90-Math.atan2(S,y)*t.MathUtils.radDeg},Bone.prototype.worldToLocal=function(t){var i=this.a,r=this.b,o=this.c,a=this.d,h=1/(i*a-r*o),l=t.x-this.worldX,u=t.y-this.worldY;return t.x=l*a*h-u*r*h,t.y=u*i*h-l*o*h,t},Bone.prototype.localToWorld=function(t){var i=t.x,r=t.y;return t.x=i*this.a+r*this.b+this.worldX,t.y=i*this.c+r*this.d+this.worldY,t},Bone.prototype.worldToLocalRotation=function(i){var r=t.MathUtils.sinDeg(i),o=t.MathUtils.cosDeg(i);return Math.atan2(this.a*r-this.c*o,this.d*o-this.b*r)*t.MathUtils.radDeg+this.rotation-this.shearX},Bone.prototype.localToWorldRotation=function(i){i-=this.rotation-this.shearX;var r=t.MathUtils.sinDeg(i),o=t.MathUtils.cosDeg(i);return Math.atan2(o*this.c+r*this.d,o*this.a+r*this.b)*t.MathUtils.radDeg},Bone.prototype.rotateWorld=function(i){var r=this.a,o=this.b,a=this.c,h=this.d,l=t.MathUtils.cosDeg(i),u=t.MathUtils.sinDeg(i);this.a=l*r-u*a,this.b=l*o-u*h,this.c=u*r+l*a,this.d=u*o+l*h,this.appliedValid=!1},Bone}();t.Bone=i}(o||(o={})),function(t){var i,r=function r(o,a,h){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=i.Normal,this.skinRequired=!1,this.color=new t.Color,o<0)throw new Error("index must be >= 0.");if(null==a)throw new Error("name cannot be null.");this.index=o,this.name=a,this.parent=h};t.BoneData=r,function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(i=t.TransformMode||(t.TransformMode={}))}(o||(o={})),function(t){var i=function i(t,r,o){this.name=t,this.order=r,this.skinRequired=o};t.ConstraintData=i}(o||(o={})),function(t){var i=function i(t,r){if(null==r)throw new Error("data cannot be null.");this.time=t,this.data=r};t.Event=i}(o||(o={})),function(t){var i=function i(t){this.name=t};t.EventData=i}(o||(o={})),function(t){var i=function(){function IkConstraint(t,i){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==i)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var r=0;r<t.bones.length;r++)this.bones.push(i.findBone(t.bones[r].name));this.target=i.findBone(t.target.name)}return IkConstraint.prototype.isActive=function(){return this.active},IkConstraint.prototype.apply=function(){this.update()},IkConstraint.prototype.update=function(){var t=this.target,i=this.bones;switch(i.length){case 1:this.apply1(i[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(i[0],i[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}},IkConstraint.prototype.apply1=function(i,r,o,a,h,l,u){i.appliedValid||i.updateAppliedTransform();var c=i.parent,d=c.a,p=c.b,g=c.c,v=c.d,m=-i.ashearX-i.arotation,y=0,T=0;switch(i.data.transformMode){case t.TransformMode.OnlyTranslation:y=r-i.worldX,T=o-i.worldY;break;case t.TransformMode.NoRotationOrReflection:var S=Math.abs(d*v-p*g)/(d*d+g*g),w=d/i.skeleton.scaleX,b=g/i.skeleton.scaleY;p=-b*S*i.skeleton.scaleX,v=w*S*i.skeleton.scaleY,m+=Math.atan2(b,w)*t.MathUtils.radDeg;default:var C=r-c.worldX,A=o-c.worldY,E=d*v-p*g;y=(C*v-A*p)/E-i.ax,T=(A*d-C*g)/E-i.ay}m+=Math.atan2(T,y)*t.MathUtils.radDeg,i.ascaleX<0&&(m+=180),m>180?m-=360:m<-180&&(m+=360);var M=i.ascaleX,_=i.ascaleY;if(a||h){switch(i.data.transformMode){case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:y=r-i.worldX,T=o-i.worldY}var R=i.data.length*M,P=Math.sqrt(y*y+T*T);if(a&&P<R||h&&P>R&&R>1e-4)M*=S=(P/R-1)*u+1,l&&(_*=S)}i.updateWorldTransformWith(i.ax,i.ay,i.arotation+m*u,M,_,i.ashearX,i.ashearY)},IkConstraint.prototype.apply2=function(i,r,o,a,h,l,u,c){if(0!=c){i.appliedValid||i.updateAppliedTransform(),r.appliedValid||r.updateAppliedTransform();var d=i.ax,p=i.ay,g=i.ascaleX,v=g,m=i.ascaleY,y=r.ascaleX,T=0,S=0,w=0;g<0?(g=-g,T=180,w=-1):(T=0,w=1),m<0&&(m=-m,w=-w),y<0?(y=-y,S=180):S=0;var b=r.ax,C=0,A=0,E=0,M=i.a,_=i.b,R=i.c,P=i.d,k=Math.abs(g-m)<=1e-4;k?(A=M*b+_*(C=r.ay)+i.worldX,E=R*b+P*C+i.worldY):(C=0,A=M*b+i.worldX,E=R*b+i.worldY);var O=i.parent;M=O.a,_=O.b,R=O.c;var L,D,I=1/(M*(P=O.d)-_*R),B=A-O.worldX,N=E-O.worldY,G=(B*P-N*_)*I-d,Y=(N*M-B*R)*I-p,U=Math.sqrt(G*G+Y*Y),X=r.data.length*y;if(U<1e-4)return this.apply1(i,o,a,!1,l,!1,c),void r.updateWorldTransformWith(b,C,0,r.ascaleX,r.ascaleY,r.ashearX,r.ashearY);var V=((B=o-O.worldX)*P-(N=a-O.worldY)*_)*I-d,z=(N*M-B*R)*I-p,W=V*V+z*z;if(0!=u){u*=g*(y+1)/2;var H=Math.sqrt(W),j=H-U-X*g+u;if(j>0){var q=Math.min(1,j/(2*u))-1;W=(V-=(q=(j-u*(1-q*q))/H)*V)*V+(z-=q*z)*z}}t:if(k){var K=(W-U*U-(X*=g)*X)/(2*U*X);K<-1?K=-1:K>1&&(K=1,l&&(v*=(Math.sqrt(W)/(U+X)-1)*c+1)),D=Math.acos(K)*h,M=U+X*K,_=X*Math.sin(D),L=Math.atan2(z*M-V*_,V*M+z*_)}else{var Z=(M=g*X)*M,J=(_=m*X)*_,Q=Math.atan2(z,V),$=-2*J*U,tt=J-Z;if((P=$*$-4*tt*(R=J*U*U+Z*W-Z*J))>=0){var et=Math.sqrt(P);$<0&&(et=-et);var it=(et=-($+et)/2)/tt,nt=R/et,rt=Math.abs(it)<Math.abs(nt)?it:nt;if(rt*rt<=W){N=Math.sqrt(W-rt*rt)*h,L=Q-Math.atan2(N,rt),D=Math.atan2(N/m,(rt-U)/g);break t}}var st=t.MathUtils.PI,ot=U-M,at=ot*ot,ht=0,lt=0,ut=U+M,ct=ut*ut,dt=0;(R=-M*U/(Z-J))>=-1&&R<=1&&(R=Math.acos(R),(P=(B=M*Math.cos(R)+U)*B+(N=_*Math.sin(R))*N)<at&&(st=R,at=P,ot=B,ht=N),P>ct&&(lt=R,ct=P,ut=B,dt=N)),W<=(at+ct)/2?(L=Q-Math.atan2(ht*h,ot),D=st*h):(L=Q-Math.atan2(dt*h,ut),D=lt*h)}var ft=Math.atan2(C,b)*w,pt=i.arotation;(L=(L-ft)*t.MathUtils.radDeg+T-pt)>180?L-=360:L<-180&&(L+=360),i.updateWorldTransformWith(d,p,pt+L*c,v,i.ascaleY,0,0),pt=r.arotation,(D=((D+ft)*t.MathUtils.radDeg-r.ashearX)*w+S-pt)>180?D-=360:D<-180&&(D+=360),r.updateWorldTransformWith(b,C,pt+D*c,r.ascaleX,r.ascaleY,r.ashearX,r.ashearY)}else r.updateWorldTransform()},IkConstraint}();t.IkConstraint=i}(o||(o={})),function(t){var i=function(t){function IkConstraintData(i){var r=t.call(this,i,0,!1)||this;return r.bones=new Array,r.bendDirection=1,r.compress=!1,r.stretch=!1,r.uniform=!1,r.mix=1,r.softness=0,r}return a(IkConstraintData,t),IkConstraintData}(t.ConstraintData);t.IkConstraintData=i}(o||(o={})),function(t){var i=function(){function PathConstraint(t,i){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==i)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var r=0,o=t.bones.length;r<o;r++)this.bones.push(i.findBone(t.bones[r].name));this.target=i.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return PathConstraint.prototype.isActive=function(){return this.active},PathConstraint.prototype.apply=function(){this.update()},PathConstraint.prototype.update=function(){var i=this.target.getAttachment();if(i instanceof t.PathAttachment){var r=this.rotateMix,o=this.translateMix,a=r>0;if(o>0||a){var h=this.data,l=h.spacingMode==t.SpacingMode.Percent,u=h.rotateMode,c=u==t.RotateMode.Tangent,d=u==t.RotateMode.ChainScale,p=this.bones.length,g=c?p:p+1,v=this.bones,m=t.Utils.setArraySize(this.spaces,g),y=null,T=this.spacing;if(d||!l){d&&(y=t.Utils.setArraySize(this.lengths,p));for(var S=h.spacingMode==t.SpacingMode.Length,w=0,b=g-1;w<b;){var C=(I=v[w]).data.length;if(C<PathConstraint.epsilon)d&&(y[w]=0),m[++w]=0;else if(l){if(d){var A=C*I.a,E=C*I.c,M=Math.sqrt(A*A+E*E);y[w]=M}m[++w]=T}else{A=C*I.a,E=C*I.c;var _=Math.sqrt(A*A+E*E);d&&(y[w]=_),m[++w]=(S?C+T:T)*_/C}}}else for(w=1;w<g;w++)m[w]=T;var R=this.computeWorldPositions(i,g,c,h.positionMode==t.PositionMode.Percent,l),P=R[0],k=R[1],O=h.offsetRotation,L=!1;if(0==O)L=u==t.RotateMode.Chain;else L=!1,O*=(D=this.target.bone).a*D.d-D.b*D.c>0?t.MathUtils.degRad:-t.MathUtils.degRad;w=0;for(var D=3;w<p;w++,D+=3){var I;(I=v[w]).worldX+=(P-I.worldX)*o,I.worldY+=(k-I.worldY)*o;var B=(A=R[D])-P,N=(E=R[D+1])-k;if(d){var G=y[w];if(0!=G){var Y=(Math.sqrt(B*B+N*N)/G-1)*r+1;I.a*=Y,I.c*=Y}}if(P=A,k=E,a){var U=I.a,X=I.b,V=I.c,z=I.d,W=0,H=0,j=0;if(W=c?R[D-1]:0==m[w+1]?R[D+2]:Math.atan2(N,B),W-=Math.atan2(V,U),L){H=Math.cos(W),j=Math.sin(W);var q=I.data.length;P+=(q*(H*U-j*V)-B)*r,k+=(q*(j*U+H*V)-N)*r}else W+=O;W>t.MathUtils.PI?W-=t.MathUtils.PI2:W<-t.MathUtils.PI&&(W+=t.MathUtils.PI2),W*=r,H=Math.cos(W),j=Math.sin(W),I.a=H*U-j*V,I.b=H*X-j*z,I.c=j*U+H*V,I.d=j*X+H*z}I.appliedValid=!1}}}},PathConstraint.prototype.computeWorldPositions=function(i,r,o,a,h){var l=this.target,u=this.position,c=this.spaces,d=t.Utils.setArraySize(this.positions,3*r+2),p=null,g=i.closed,v=i.worldVerticesLength,m=v/6,y=PathConstraint.NONE;if(!i.constantSpeed){var T=i.lengths,S=T[m-=g?1:2];if(a&&(u*=S),h)for(var w=1;w<r;w++)c[w]*=S;p=t.Utils.setArraySize(this.world,8);w=0;for(var b=0,C=0;w<r;w++,b+=3){var A=u+=Z=c[w];if(g)(A%=S)<0&&(A+=S),C=0;else{if(A<0){y!=PathConstraint.BEFORE&&(y=PathConstraint.BEFORE,i.computeWorldVertices(l,2,4,p,0,2)),this.addBeforePosition(A,p,0,d,b);continue}if(A>S){y!=PathConstraint.AFTER&&(y=PathConstraint.AFTER,i.computeWorldVertices(l,v-6,4,p,0,2)),this.addAfterPosition(A-S,p,0,d,b);continue}}for(;;C++){var E=T[C];if(!(A>E)){if(0==C)A/=E;else A=(A-(tt=T[C-1]))/(E-tt);break}}C!=y&&(y=C,g&&C==m?(i.computeWorldVertices(l,v-4,4,p,0,2),i.computeWorldVertices(l,0,4,p,4,2)):i.computeWorldVertices(l,6*C+2,8,p,0,2)),this.addCurvePosition(A,p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],d,b,o||w>0&&0==Z)}return d}g?(v+=2,p=t.Utils.setArraySize(this.world,v),i.computeWorldVertices(l,2,v-4,p,0,2),i.computeWorldVertices(l,0,2,p,v-4,2),p[v-2]=p[0],p[v-1]=p[1]):(m--,v-=4,p=t.Utils.setArraySize(this.world,v),i.computeWorldVertices(l,2,v,p,0,2));for(var M=t.Utils.setArraySize(this.curves,m),_=0,R=p[0],P=p[1],k=0,O=0,L=0,D=0,I=0,B=0,N=0,G=0,Y=0,U=0,X=0,V=0,z=0,W=0,H=(w=0,2);w<m;w++,H+=6)k=p[H],O=p[H+1],L=p[H+2],D=p[H+3],X=2*(N=.1875*(R-2*k+L))+(Y=.09375*(3*(k-L)-R+(I=p[H+4]))),V=2*(G=.1875*(P-2*O+D))+(U=.09375*(3*(O-D)-P+(B=p[H+5]))),z=.75*(k-R)+N+.16666667*Y,W=.75*(O-P)+G+.16666667*U,_+=Math.sqrt(z*z+W*W),z+=X,W+=V,X+=Y,V+=U,_+=Math.sqrt(z*z+W*W),z+=X,W+=V,_+=Math.sqrt(z*z+W*W),z+=X+Y,W+=V+U,_+=Math.sqrt(z*z+W*W),M[w]=_,R=I,P=B;if(u*=a?_:_/i.lengths[m-1],h)for(w=1;w<r;w++)c[w]*=_;for(var j=this.segments,q=0,K=(w=0,b=0,C=0,0);w<r;w++,b+=3){var Z;A=u+=Z=c[w];if(g)(A%=_)<0&&(A+=_),C=0;else{if(A<0){this.addBeforePosition(A,p,0,d,b);continue}if(A>_){this.addAfterPosition(A-_,p,v-4,d,b);continue}}for(;;C++){var J=M[C];if(!(A>J)){if(0==C)A/=J;else A=(A-(tt=M[C-1]))/(J-tt);break}}if(C!=y){y=C;var Q=6*C;for(R=p[Q],P=p[Q+1],k=p[Q+2],O=p[Q+3],L=p[Q+4],D=p[Q+5],X=2*(N=.03*(R-2*k+L))+(Y=.006*(3*(k-L)-R+(I=p[Q+6]))),V=2*(G=.03*(P-2*O+D))+(U=.006*(3*(O-D)-P+(B=p[Q+7]))),z=.3*(k-R)+N+.16666667*Y,W=.3*(O-P)+G+.16666667*U,q=Math.sqrt(z*z+W*W),j[0]=q,Q=1;Q<8;Q++)z+=X,W+=V,X+=Y,V+=U,q+=Math.sqrt(z*z+W*W),j[Q]=q;z+=X,W+=V,q+=Math.sqrt(z*z+W*W),j[8]=q,z+=X+Y,W+=V+U,q+=Math.sqrt(z*z+W*W),j[9]=q,K=0}for(A*=q;;K++){var $=j[K];if(!(A>$)){var tt;if(0==K)A/=$;else A=K+(A-(tt=j[K-1]))/($-tt);break}}this.addCurvePosition(.1*A,R,P,k,O,L,D,I,B,d,b,o||w>0&&0==Z)}return d},PathConstraint.prototype.addBeforePosition=function(t,i,r,o,a){var h=i[r],l=i[r+1],u=i[r+2]-h,c=i[r+3]-l,d=Math.atan2(c,u);o[a]=h+t*Math.cos(d),o[a+1]=l+t*Math.sin(d),o[a+2]=d},PathConstraint.prototype.addAfterPosition=function(t,i,r,o,a){var h=i[r+2],l=i[r+3],u=h-i[r],c=l-i[r+1],d=Math.atan2(c,u);o[a]=h+t*Math.cos(d),o[a+1]=l+t*Math.sin(d),o[a+2]=d},PathConstraint.prototype.addCurvePosition=function(t,i,r,o,a,h,l,u,c,d,p,g){if(0==t||isNaN(t))return d[p]=i,d[p+1]=r,void(d[p+2]=Math.atan2(a-r,o-i));var v=t*t,m=v*t,y=1-t,T=y*y,S=T*y,w=y*t,b=3*w,C=y*b,A=b*t,E=i*S+o*C+h*A+u*m,M=r*S+a*C+l*A+c*m;d[p]=E,d[p+1]=M,g&&(d[p+2]=t<.001?Math.atan2(a-r,o-i):Math.atan2(M-(r*T+a*w*2+l*v),E-(i*T+o*w*2+h*v)))},PathConstraint.NONE=-1,PathConstraint.BEFORE=-2,PathConstraint.AFTER=-3,PathConstraint.epsilon=1e-5,PathConstraint}();t.PathConstraint=i}(o||(o={})),function(t){var i,r,o,h=function(t){function PathConstraintData(i){var r=t.call(this,i,0,!1)||this;return r.bones=new Array,r}return a(PathConstraintData,t),PathConstraintData}(t.ConstraintData);t.PathConstraintData=h,(i=t.PositionMode||(t.PositionMode={}))[i.Fixed=0]="Fixed",i[i.Percent=1]="Percent",(r=t.SpacingMode||(t.SpacingMode={}))[r.Length=0]="Length",r[r.Fixed=1]="Fixed",r[r.Percent=2]="Percent",(o=t.RotateMode||(t.RotateMode={}))[o.Tangent=0]="Tangent",o[o.Chain=1]="Chain",o[o.ChainScale=2]="ChainScale"}(o||(o={})),function(t){var i=function(){function Assets(t){this.toLoad=new Array,this.assets={},this.clientId=t}return Assets.prototype.loaded=function(){var t=0;for(var i in this.assets)t++;return t},Assets}(),r=function(){function SharedAssetManager(t){void 0===t&&(t=""),this.clientAssets={},this.queuedAssets={},this.rawAssets={},this.errors={},this.pathPrefix=t}return SharedAssetManager.prototype.queueAsset=function(t,r,o){var a=this.clientAssets[t];return null==a&&(a=new i(t),this.clientAssets[t]=a),null!==r&&(a.textureLoader=r),a.toLoad.push(o),this.queuedAssets[o]!==o&&(this.queuedAssets[o]=o,!0)},SharedAssetManager.prototype.loadText=function(t,i){var r=this;if(i=this.pathPrefix+i,this.queueAsset(t,null,i)){var o=new XMLHttpRequest;o.overrideMimeType("text/html"),o.onreadystatechange=function(){o.readyState==XMLHttpRequest.DONE&&(o.status>=200&&o.status<300?r.rawAssets[i]=o.responseText:r.errors[i]="Couldn't load text "+i+": status "+o.status+", "+o.responseText)},o.open("GET",i,!0),o.send()}},SharedAssetManager.prototype.loadJson=function(t,i){var r=this;if(i=this.pathPrefix+i,this.queueAsset(t,null,i)){var o=new XMLHttpRequest;o.overrideMimeType("text/html"),o.onreadystatechange=function(){o.readyState==XMLHttpRequest.DONE&&(o.status>=200&&o.status<300?r.rawAssets[i]=JSON.parse(o.responseText):r.errors[i]="Couldn't load text "+i+": status "+o.status+", "+o.responseText)},o.open("GET",i,!0),o.send()}},SharedAssetManager.prototype.loadTexture=function(t,i,r){var o=this;if(r=this.pathPrefix+r,this.queueAsset(t,i,r))if(!!("undefined"==typeof window||"undefined"==typeof navigator||!window.document)&&"undefined"!=typeof importScripts){fetch(r,{mode:"cors"}).then((function(t){return t.ok||(o.errors[r]="Couldn't load image "+r),t.blob()})).then((function(t){return createImageBitmap(t,{premultiplyAlpha:"none",colorSpaceConversion:"none"})})).then((function(t){o.rawAssets[r]=t}))}else{var a=new Image;a.crossOrigin="anonymous",a.onload=function(t){o.rawAssets[r]=a},a.onerror=function(t){o.errors[r]="Couldn't load image "+r},a.src=r}},SharedAssetManager.prototype.get=function(t,i){i=this.pathPrefix+i;var r=this.clientAssets[t];return null==r||r.assets[i]},SharedAssetManager.prototype.updateClientAssets=function(t){for(var i=!!("undefined"==typeof window||"undefined"==typeof navigator||!window.document)&&"undefined"!=typeof importScripts,r=0;r<t.toLoad.length;r++){var o=t.toLoad[r],a=t.assets[o];if(null==a){var h=this.rawAssets[o];if(null==h)continue;i?h instanceof ImageBitmap?t.assets[o]=t.textureLoader(h):t.assets[o]=h:h instanceof HTMLImageElement?t.assets[o]=t.textureLoader(h):t.assets[o]=h}}},SharedAssetManager.prototype.isLoadingComplete=function(t){var i=this.clientAssets[t];return null==i||(this.updateClientAssets(i),i.toLoad.length==i.loaded())},SharedAssetManager.prototype.dispose=function(){},SharedAssetManager.prototype.hasErrors=function(){return Object.keys(this.errors).length>0},SharedAssetManager.prototype.getErrors=function(){return this.errors},SharedAssetManager}();t.SharedAssetManager=r}(o||(o={})),function(t){var i=function(){function Skeleton(i){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==i)throw new Error("data cannot be null.");this.data=i,this.bones=new Array;for(var r=0;r<i.bones.length;r++){var o=i.bones[r],a=void 0;if(null==o.parent)a=new t.Bone(o,this,null);else{var h=this.bones[o.parent.index];a=new t.Bone(o,this,h),h.children.push(a)}this.bones.push(a)}this.slots=new Array,this.drawOrder=new Array;for(r=0;r<i.slots.length;r++){var l=i.slots[r],u=(a=this.bones[l.boneData.index],new t.Slot(l,a));this.slots.push(u),this.drawOrder.push(u)}this.ikConstraints=new Array;for(r=0;r<i.ikConstraints.length;r++){var c=i.ikConstraints[r];this.ikConstraints.push(new t.IkConstraint(c,this))}this.transformConstraints=new Array;for(r=0;r<i.transformConstraints.length;r++){var d=i.transformConstraints[r];this.transformConstraints.push(new t.TransformConstraint(d,this))}this.pathConstraints=new Array;for(r=0;r<i.pathConstraints.length;r++){var p=i.pathConstraints[r];this.pathConstraints.push(new t.PathConstraint(p,this))}this.color=new t.Color(1,1,1,1),this.updateCache()}return Skeleton.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,i=0,r=t.length;i<r;i++){(a=t[i]).sorted=a.data.skinRequired,a.active=!a.sorted}if(null!=this.skin){var o=this.skin.bones;for(i=0,r=this.skin.bones.length;i<r;i++){var a=this.bones[o[i].index];do{a.sorted=!1,a.active=!0,a=a.parent}while(null!=a)}}var h=this.ikConstraints,l=this.transformConstraints,u=this.pathConstraints,c=h.length,d=l.length,p=u.length,g=c+d+p;t:for(i=0;i<g;i++){for(var v=0;v<c;v++){if((m=h[v]).data.order==i){this.sortIkConstraint(m);continue t}}for(v=0;v<d;v++){if((m=l[v]).data.order==i){this.sortTransformConstraint(m);continue t}}for(v=0;v<p;v++){var m;if((m=u[v]).data.order==i){this.sortPathConstraint(m);continue t}}}for(i=0,r=t.length;i<r;i++)this.sortBone(t[i])},Skeleton.prototype.sortIkConstraint=function(i){if(i.active=i.target.isActive()&&(!i.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,i.data,!0)),i.active){var r=i.target;this.sortBone(r);var o=i.bones,a=o[0];if(this.sortBone(a),o.length>1){var h=o[o.length-1];this._updateCache.indexOf(h)>-1||this.updateCacheReset.push(h)}this._updateCache.push(i),this.sortReset(a.children),o[o.length-1].sorted=!0}},Skeleton.prototype.sortPathConstraint=function(i){if(i.active=i.target.bone.isActive()&&(!i.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,i.data,!0)),i.active){var r=i.target,o=r.data.index,a=r.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,o,a),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,o,a);for(var h=0,l=this.data.skins.length;h<l;h++)this.sortPathConstraintAttachment(this.data.skins[h],o,a);var u=r.getAttachment();u instanceof t.PathAttachment&&this.sortPathConstraintAttachmentWith(u,a);var c=i.bones,d=c.length;for(h=0;h<d;h++)this.sortBone(c[h]);this._updateCache.push(i);for(h=0;h<d;h++)this.sortReset(c[h].children);for(h=0;h<d;h++)c[h].sorted=!0}},Skeleton.prototype.sortTransformConstraint=function(i){if(i.active=i.target.isActive()&&(!i.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,i.data,!0)),i.active){this.sortBone(i.target);var r=i.bones,o=r.length;if(i.data.local)for(var a=0;a<o;a++){var h=r[a];this.sortBone(h.parent),this._updateCache.indexOf(h)>-1||this.updateCacheReset.push(h)}else for(a=0;a<o;a++)this.sortBone(r[a]);this._updateCache.push(i);for(var l=0;l<o;l++)this.sortReset(r[l].children);for(l=0;l<o;l++)r[l].sorted=!0}},Skeleton.prototype.sortPathConstraintAttachment=function(t,i,r){var o=t.attachments[i];if(o)for(var a in o)this.sortPathConstraintAttachmentWith(o[a],r)},Skeleton.prototype.sortPathConstraintAttachmentWith=function(i,r){if(i instanceof t.PathAttachment){var o=i.bones;if(null==o)this.sortBone(r);else for(var a=this.bones,h=0;h<o.length;)for(var l=o[h++],u=h+l;h<u;h++){var c=o[h];this.sortBone(a[c])}}},Skeleton.prototype.sortBone=function(t){if(!t.sorted){var i=t.parent;null!=i&&this.sortBone(i),t.sorted=!0,this._updateCache.push(t)}},Skeleton.prototype.sortReset=function(t){for(var i=0,r=t.length;i<r;i++){var o=t[i];o.active&&(o.sorted&&this.sortReset(o.children),o.sorted=!1)}},Skeleton.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,i=0,r=t.length;i<r;i++){var o=t[i];o.ax=o.x,o.ay=o.y,o.arotation=o.rotation,o.ascaleX=o.scaleX,o.ascaleY=o.scaleY,o.ashearX=o.shearX,o.ashearY=o.shearY,o.appliedValid=!0}var a=this._updateCache;for(i=0,r=a.length;i<r;i++)a[i].update()},Skeleton.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},Skeleton.prototype.setBonesToSetupPose=function(){for(var t=this.bones,i=0,r=t.length;i<r;i++)t[i].setToSetupPose();var o=this.ikConstraints;for(i=0,r=o.length;i<r;i++){(u=o[i]).mix=u.data.mix,u.softness=u.data.softness,u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch}var a=this.transformConstraints;for(i=0,r=a.length;i<r;i++){var h=(u=a[i]).data;u.rotateMix=h.rotateMix,u.translateMix=h.translateMix,u.scaleMix=h.scaleMix,u.shearMix=h.shearMix}var l=this.pathConstraints;for(i=0,r=l.length;i<r;i++){var u;h=(u=l[i]).data;u.position=h.position,u.spacing=h.spacing,u.rotateMix=h.rotateMix,u.translateMix=h.translateMix}},Skeleton.prototype.setSlotsToSetupPose=function(){var i=this.slots;t.Utils.arrayCopy(i,0,this.drawOrder,0,i.length);for(var r=0,o=i.length;r<o;r++)i[r].setToSetupPose()},Skeleton.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},Skeleton.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var i=this.bones,r=0,o=i.length;r<o;r++){var a=i[r];if(a.data.name==t)return a}return null},Skeleton.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var i=this.bones,r=0,o=i.length;r<o;r++)if(i[r].data.name==t)return r;return-1},Skeleton.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var i=this.slots,r=0,o=i.length;r<o;r++){var a=i[r];if(a.data.name==t)return a}return null},Skeleton.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var i=this.slots,r=0,o=i.length;r<o;r++)if(i[r].data.name==t)return r;return-1},Skeleton.prototype.setSkinByName=function(t){var i=this.data.findSkin(t);if(null==i)throw new Error("Skin not found: "+t);this.setSkin(i)},Skeleton.prototype.setSkin=function(t){if(t!=this.skin){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var i=this.slots,r=0,o=i.length;r<o;r++){var a=i[r],h=a.data.attachmentName;if(null!=h){var l=t.getAttachment(r,h);null!=l&&a.setAttachment(l)}}this.skin=t,this.updateCache()}},Skeleton.prototype.getAttachmentByName=function(t,i){return this.getAttachment(this.data.findSlotIndex(t),i)},Skeleton.prototype.getAttachment=function(t,i){if(null==i)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var r=this.skin.getAttachment(t,i);if(null!=r)return r}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,i):null},Skeleton.prototype.setAttachment=function(t,i){if(null==t)throw new Error("slotName cannot be null.");for(var r=this.slots,o=0,a=r.length;o<a;o++){var h=r[o];if(h.data.name==t){var l=null;if(null!=i&&null==(l=this.getAttachment(o,i)))throw new Error("Attachment not found: "+i+", for slot: "+t);return void h.setAttachment(l)}}throw new Error("Slot not found: "+t)},Skeleton.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var i=this.ikConstraints,r=0,o=i.length;r<o;r++){var a=i[r];if(a.data.name==t)return a}return null},Skeleton.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var i=this.transformConstraints,r=0,o=i.length;r<o;r++){var a=i[r];if(a.data.name==t)return a}return null},Skeleton.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var i=this.pathConstraints,r=0,o=i.length;r<o;r++){var a=i[r];if(a.data.name==t)return a}return null},Skeleton.prototype.getBounds=function(i,r,o){if(void 0===o&&(o=new Array(2)),null==i)throw new Error("offset cannot be null.");if(null==r)throw new Error("size cannot be null.");for(var a=this.drawOrder,h=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,c=Number.NEGATIVE_INFINITY,d=0,p=a.length;d<p;d++){var g=a[d];if(g.bone.active){var v=0,m=null,y=g.getAttachment();if(y instanceof t.RegionAttachment)v=8,m=t.Utils.setArraySize(o,v,0),y.computeWorldVertices(g.bone,m,0,2);else if(y instanceof t.MeshAttachment){var T=y;v=T.worldVerticesLength,m=t.Utils.setArraySize(o,v,0),T.computeWorldVertices(g,0,v,m,0,2)}if(null!=m)for(var S=0,w=m.length;S<w;S+=2){var b=m[S],C=m[S+1];h=Math.min(h,b),l=Math.min(l,C),u=Math.max(u,b),c=Math.max(c,C)}}}i.set(h,l),r.set(u-h,c-l)},Skeleton.prototype.update=function(t){this.time+=t},Skeleton}();t.Skeleton=i}(o||(o={})),function(t){var i=function(){function SkeletonBinary(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return SkeletonBinary.prototype.readSkeletonData=function(i){var o=this.scale,a=new t.SkeletonData;a.name="";var h=new r(i);if(a.hash=h.readString(),a.version=h.readString(),"3.8.75"==a.version)throw new Error("Unsupported skeleton data, please export with a newer version of Spine.");a.x=h.readFloat(),a.y=h.readFloat(),a.width=h.readFloat(),a.height=h.readFloat();var l=h.readBoolean();l&&(a.fps=h.readFloat(),a.imagesPath=h.readString(),a.audioPath=h.readString());var u=0;u=h.readInt(!0);for(var c=0;c<u;c++)h.strings.push(h.readString());u=h.readInt(!0);for(c=0;c<u;c++){var d=h.readString(),p=0==c?null:a.bones[h.readInt(!0)];(m=new t.BoneData(c,d,p)).rotation=h.readFloat(),m.x=h.readFloat()*o,m.y=h.readFloat()*o,m.scaleX=h.readFloat(),m.scaleY=h.readFloat(),m.shearX=h.readFloat(),m.shearY=h.readFloat(),m.length=h.readFloat()*o,m.transformMode=SkeletonBinary.TransformModeValues[h.readInt(!0)],m.skinRequired=h.readBoolean(),l&&t.Color.rgba8888ToColor(m.color,h.readInt32()),a.bones.push(m)}u=h.readInt(!0);for(c=0;c<u;c++){var g=h.readString(),v=a.bones[h.readInt(!0)],m=new t.SlotData(c,g,v);t.Color.rgba8888ToColor(m.color,h.readInt32());var y=h.readInt32();-1!=y&&t.Color.rgb888ToColor(m.darkColor=new t.Color,y),m.attachmentName=h.readStringRef(),m.blendMode=SkeletonBinary.BlendModeValues[h.readInt(!0)],a.slots.push(m)}u=h.readInt(!0);c=0;for(var T=void 0;c<u;c++){(m=new t.IkConstraintData(h.readString())).order=h.readInt(!0),m.skinRequired=h.readBoolean(),T=h.readInt(!0);for(var S=0;S<T;S++)m.bones.push(a.bones[h.readInt(!0)]);m.target=a.bones[h.readInt(!0)],m.mix=h.readFloat(),m.softness=h.readFloat()*o,m.bendDirection=h.readByte(),m.compress=h.readBoolean(),m.stretch=h.readBoolean(),m.uniform=h.readBoolean(),a.ikConstraints.push(m)}u=h.readInt(!0);for(c=0,T=void 0;c<u;c++){(m=new t.TransformConstraintData(h.readString())).order=h.readInt(!0),m.skinRequired=h.readBoolean(),T=h.readInt(!0);for(S=0;S<T;S++)m.bones.push(a.bones[h.readInt(!0)]);m.target=a.bones[h.readInt(!0)],m.local=h.readBoolean(),m.relative=h.readBoolean(),m.offsetRotation=h.readFloat(),m.offsetX=h.readFloat()*o,m.offsetY=h.readFloat()*o,m.offsetScaleX=h.readFloat(),m.offsetScaleY=h.readFloat(),m.offsetShearY=h.readFloat(),m.rotateMix=h.readFloat(),m.translateMix=h.readFloat(),m.scaleMix=h.readFloat(),m.shearMix=h.readFloat(),a.transformConstraints.push(m)}u=h.readInt(!0);for(c=0,T=void 0;c<u;c++){(m=new t.PathConstraintData(h.readString())).order=h.readInt(!0),m.skinRequired=h.readBoolean(),T=h.readInt(!0);for(S=0;S<T;S++)m.bones.push(a.bones[h.readInt(!0)]);m.target=a.slots[h.readInt(!0)],m.positionMode=SkeletonBinary.PositionModeValues[h.readInt(!0)],m.spacingMode=SkeletonBinary.SpacingModeValues[h.readInt(!0)],m.rotateMode=SkeletonBinary.RotateModeValues[h.readInt(!0)],m.offsetRotation=h.readFloat(),m.position=h.readFloat(),m.positionMode==t.PositionMode.Fixed&&(m.position*=o),m.spacing=h.readFloat(),m.spacingMode!=t.SpacingMode.Length&&m.spacingMode!=t.SpacingMode.Fixed||(m.spacing*=o),m.rotateMix=h.readFloat(),m.translateMix=h.readFloat(),a.pathConstraints.push(m)}var w=this.readSkin(h,a,!0,l);null!=w&&(a.defaultSkin=w,a.skins.push(w));c=a.skins.length;for(t.Utils.setArraySize(a.skins,u=c+h.readInt(!0));c<u;c++)a.skins[c]=this.readSkin(h,a,!1,l);u=this.linkedMeshes.length;for(c=0;c<u;c++){var b=this.linkedMeshes[c],C=null==b.skin?a.defaultSkin:a.findSkin(b.skin);if(null==C)throw new Error("Skin not found: "+b.skin);var A=C.getAttachment(b.slotIndex,b.parent);if(null==A)throw new Error("Parent mesh not found: "+b.parent);b.mesh.deformAttachment=b.inheritDeform?A:b.mesh,b.mesh.setParentMesh(A),b.mesh.updateUVs()}this.linkedMeshes.length=0,u=h.readInt(!0);for(c=0;c<u;c++){(m=new t.EventData(h.readStringRef())).intValue=h.readInt(!1),m.floatValue=h.readFloat(),m.stringValue=h.readString(),m.audioPath=h.readString(),null!=m.audioPath&&(m.volume=h.readFloat(),m.balance=h.readFloat()),a.events.push(m)}u=h.readInt(!0);for(c=0;c<u;c++)a.animations.push(this.readAnimation(h,h.readString(),a));return a},SkeletonBinary.prototype.readSkin=function(i,r,o,a){var h=null,l=0;if(o){if(0==(l=i.readInt(!0)))return null;h=new t.Skin("default")}else{(h=new t.Skin(i.readStringRef())).bones.length=i.readInt(!0);for(var u=0,c=h.bones.length;u<c;u++)h.bones[u]=r.bones[i.readInt(!0)];for(u=0,c=i.readInt(!0);u<c;u++)h.constraints.push(r.ikConstraints[i.readInt(!0)]);for(u=0,c=i.readInt(!0);u<c;u++)h.constraints.push(r.transformConstraints[i.readInt(!0)]);for(u=0,c=i.readInt(!0);u<c;u++)h.constraints.push(r.pathConstraints[i.readInt(!0)]);l=i.readInt(!0)}for(u=0;u<l;u++)for(var d=i.readInt(!0),p=0,g=i.readInt(!0);p<g;p++){var v=i.readStringRef(),m=this.readAttachment(i,r,h,d,v,a);null!=m&&h.setAttachment(d,v,m)}return h},SkeletonBinary.prototype.readAttachment=function(i,r,a,h,l,u){var c=this.scale,d=i.readStringRef();null==d&&(d=l);var p=i.readByte();switch(SkeletonBinary.AttachmentTypeValues[p]){case t.AttachmentType.Region:var g=i.readStringRef(),v=i.readFloat(),m=i.readFloat(),y=i.readFloat(),T=i.readFloat(),S=i.readFloat(),w=i.readFloat(),b=i.readFloat(),C=i.readInt32();null==g&&(g=d);var A=this.attachmentLoader.newRegionAttachment(a,d,g);return null==A?null:(A.path=g,A.x=m*c,A.y=y*c,A.scaleX=T,A.scaleY=S,A.rotation=v,A.width=w*c,A.height=b*c,t.Color.rgba8888ToColor(A.color,C),A.updateOffset(),A);case t.AttachmentType.BoundingBox:var E=i.readInt(!0),M=this.readVertices(i,E),_=(C=u?i.readInt32():0,this.attachmentLoader.newBoundingBoxAttachment(a,d));return null==_?null:(_.worldVerticesLength=E<<1,_.vertices=M.vertices,_.bones=M.bones,u&&t.Color.rgba8888ToColor(_.color,C),_);case t.AttachmentType.Mesh:g=i.readStringRef(),C=i.readInt32(),E=i.readInt(!0);var R=this.readFloatArray(i,E<<1,1),P=this.readShortArray(i),k=(M=this.readVertices(i,E),i.readInt(!0)),O=null;w=0,b=0;return u&&(O=this.readShortArray(i),w=i.readFloat(),b=i.readFloat()),null==g&&(g=d),null==(L=this.attachmentLoader.newMeshAttachment(a,d,g))?null:(L.path=g,t.Color.rgba8888ToColor(L.color,C),L.bones=M.bones,L.vertices=M.vertices,L.worldVerticesLength=E<<1,L.triangles=P,L.regionUVs=R,L.updateUVs(),L.hullLength=k<<1,u&&(L.edges=O,L.width=w*c,L.height=b*c),L);case t.AttachmentType.LinkedMesh:g=i.readStringRef(),C=i.readInt32();var L,D=i.readStringRef(),I=i.readStringRef(),B=i.readBoolean();w=0,b=0;return u&&(w=i.readFloat(),b=i.readFloat()),null==g&&(g=d),null==(L=this.attachmentLoader.newMeshAttachment(a,d,g))?null:(L.path=g,t.Color.rgba8888ToColor(L.color,C),u&&(L.width=w*c,L.height=b*c),this.linkedMeshes.push(new o(L,D,h,I,B)),L);case t.AttachmentType.Path:for(var N=i.readBoolean(),G=i.readBoolean(),Y=(E=i.readInt(!0),M=this.readVertices(i,E),t.Utils.newArray(E/3,0)),U=0,X=Y.length;U<X;U++)Y[U]=i.readFloat()*c;C=u?i.readInt32():0;return null==(g=this.attachmentLoader.newPathAttachment(a,d))?null:(g.closed=N,g.constantSpeed=G,g.worldVerticesLength=E<<1,g.vertices=M.vertices,g.bones=M.bones,g.lengths=Y,u&&t.Color.rgba8888ToColor(g.color,C),g);case t.AttachmentType.Point:v=i.readFloat(),m=i.readFloat(),y=i.readFloat(),C=u?i.readInt32():0;var V=this.attachmentLoader.newPointAttachment(a,d);return null==V?null:(V.x=m*c,V.y=y*c,V.rotation=v,u&&t.Color.rgba8888ToColor(V.color,C),V);case t.AttachmentType.Clipping:var z=i.readInt(!0),W=(E=i.readInt(!0),M=this.readVertices(i,E),C=u?i.readInt32():0,this.attachmentLoader.newClippingAttachment(a,d));return null==W?null:(W.endSlot=r.slots[z],W.worldVerticesLength=E<<1,W.vertices=M.vertices,W.bones=M.bones,u&&t.Color.rgba8888ToColor(W.color,C),W)}return null},SkeletonBinary.prototype.readVertices=function(i,r){var o=r<<1,h=new a,l=this.scale;if(!i.readBoolean())return h.vertices=this.readFloatArray(i,o,l),h;for(var u=new Array,c=new Array,d=0;d<r;d++){var p=i.readInt(!0);c.push(p);for(var g=0;g<p;g++)c.push(i.readInt(!0)),u.push(i.readFloat()*l),u.push(i.readFloat()*l),u.push(i.readFloat())}return h.vertices=t.Utils.toFloatArray(u),h.bones=c,h},SkeletonBinary.prototype.readFloatArray=function(t,i,r){var o=new Array(i);if(1==r)for(var a=0;a<i;a++)o[a]=t.readFloat();else for(a=0;a<i;a++)o[a]=t.readFloat()*r;return o},SkeletonBinary.prototype.readShortArray=function(t){for(var i=t.readInt(!0),r=new Array(i),o=0;o<i;o++)r[o]=t.readShort();return r},SkeletonBinary.prototype.readAnimation=function(i,r,o){for(var a=new Array,h=this.scale,l=0,u=new t.Color,c=new t.Color,d=0,p=i.readInt(!0);d<p;d++)for(var g=i.readInt(!0),v=0,m=i.readInt(!0);v<m;v++){var y=i.readByte(),T=i.readInt(!0);switch(y){case SkeletonBinary.SLOT_ATTACHMENT:(C=new t.AttachmentTimeline(T)).slotIndex=g;for(var S=0;S<T;S++)C.setFrame(S,i.readFloat(),i.readStringRef());a.push(C),l=Math.max(l,C.frames[T-1]);break;case SkeletonBinary.SLOT_COLOR:(C=new t.ColorTimeline(T)).slotIndex=g;for(S=0;S<T;S++){var w=i.readFloat();t.Color.rgba8888ToColor(u,i.readInt32()),C.setFrame(S,w,u.r,u.g,u.b,u.a),S<T-1&&this.readCurve(i,S,C)}a.push(C),l=Math.max(l,C.frames[(T-1)*t.ColorTimeline.ENTRIES]);break;case SkeletonBinary.SLOT_TWO_COLOR:(C=new t.TwoColorTimeline(T)).slotIndex=g;for(S=0;S<T;S++){w=i.readFloat();t.Color.rgba8888ToColor(u,i.readInt32()),t.Color.rgb888ToColor(c,i.readInt32()),C.setFrame(S,w,u.r,u.g,u.b,u.a,c.r,c.g,c.b),S<T-1&&this.readCurve(i,S,C)}a.push(C),l=Math.max(l,C.frames[(T-1)*t.TwoColorTimeline.ENTRIES])}}for(d=0,p=i.readInt(!0);d<p;d++){var b=i.readInt(!0);for(v=0,m=i.readInt(!0);v<m;v++){y=i.readByte(),T=i.readInt(!0);switch(y){case SkeletonBinary.BONE_ROTATE:(C=new t.RotateTimeline(T)).boneIndex=b;for(S=0;S<T;S++)C.setFrame(S,i.readFloat(),i.readFloat()),S<T-1&&this.readCurve(i,S,C);a.push(C),l=Math.max(l,C.frames[(T-1)*t.RotateTimeline.ENTRIES]);break;case SkeletonBinary.BONE_TRANSLATE:case SkeletonBinary.BONE_SCALE:case SkeletonBinary.BONE_SHEAR:var C=void 0,A=1;y==SkeletonBinary.BONE_SCALE?C=new t.ScaleTimeline(T):y==SkeletonBinary.BONE_SHEAR?C=new t.ShearTimeline(T):(C=new t.TranslateTimeline(T),A=h),C.boneIndex=b;for(S=0;S<T;S++)C.setFrame(S,i.readFloat(),i.readFloat()*A,i.readFloat()*A),S<T-1&&this.readCurve(i,S,C);a.push(C),l=Math.max(l,C.frames[(T-1)*t.TranslateTimeline.ENTRIES])}}}for(d=0,p=i.readInt(!0);d<p;d++){var E=i.readInt(!0);T=i.readInt(!0);(C=new t.IkConstraintTimeline(T)).ikConstraintIndex=E;for(S=0;S<T;S++)C.setFrame(S,i.readFloat(),i.readFloat(),i.readFloat()*h,i.readByte(),i.readBoolean(),i.readBoolean()),S<T-1&&this.readCurve(i,S,C);a.push(C),l=Math.max(l,C.frames[(T-1)*t.IkConstraintTimeline.ENTRIES])}for(d=0,p=i.readInt(!0);d<p;d++){E=i.readInt(!0),T=i.readInt(!0);(C=new t.TransformConstraintTimeline(T)).transformConstraintIndex=E;for(S=0;S<T;S++)C.setFrame(S,i.readFloat(),i.readFloat(),i.readFloat(),i.readFloat(),i.readFloat()),S<T-1&&this.readCurve(i,S,C);a.push(C),l=Math.max(l,C.frames[(T-1)*t.TransformConstraintTimeline.ENTRIES])}for(d=0,p=i.readInt(!0);d<p;d++){E=i.readInt(!0);var M=o.pathConstraints[E];for(v=0,m=i.readInt(!0);v<m;v++){y=i.readByte(),T=i.readInt(!0);switch(y){case SkeletonBinary.PATH_POSITION:case SkeletonBinary.PATH_SPACING:C=void 0,A=1;y==SkeletonBinary.PATH_SPACING?(C=new t.PathConstraintSpacingTimeline(T),M.spacingMode!=t.SpacingMode.Length&&M.spacingMode!=t.SpacingMode.Fixed||(A=h)):(C=new t.PathConstraintPositionTimeline(T),M.positionMode==t.PositionMode.Fixed&&(A=h)),C.pathConstraintIndex=E;for(S=0;S<T;S++)C.setFrame(S,i.readFloat(),i.readFloat()*A),S<T-1&&this.readCurve(i,S,C);a.push(C),l=Math.max(l,C.frames[(T-1)*t.PathConstraintPositionTimeline.ENTRIES]);break;case SkeletonBinary.PATH_MIX:(C=new t.PathConstraintMixTimeline(T)).pathConstraintIndex=E;for(S=0;S<T;S++)C.setFrame(S,i.readFloat(),i.readFloat(),i.readFloat()),S<T-1&&this.readCurve(i,S,C);a.push(C),l=Math.max(l,C.frames[(T-1)*t.PathConstraintMixTimeline.ENTRIES])}}}for(d=0,p=i.readInt(!0);d<p;d++){var _=o.skins[i.readInt(!0)];for(v=0,m=i.readInt(!0);v<m;v++){g=i.readInt(!0);for(var R=0,P=i.readInt(!0);R<P;R++){var k=_.getAttachment(g,i.readStringRef()),O=null!=k.bones,L=k.vertices,D=O?L.length/3*2:L.length;T=i.readInt(!0);(C=new t.DeformTimeline(T)).slotIndex=g,C.attachment=k;for(S=0;S<T;S++){w=i.readFloat();var I=void 0,B=i.readInt(!0);if(0==B)I=O?t.Utils.newFloatArray(D):L;else{I=t.Utils.newFloatArray(D);var N=i.readInt(!0);if(B+=N,1==h)for(var G=N;G<B;G++)I[G]=i.readFloat();else for(G=N;G<B;G++)I[G]=i.readFloat()*h;if(!O){G=0;for(var Y=I.length;G<Y;G++)I[G]+=L[G]}}C.setFrame(S,w,I),S<T-1&&this.readCurve(i,S,C)}a.push(C),l=Math.max(l,C.frames[T-1])}}}var U=i.readInt(!0);if(U>0){C=new t.DrawOrderTimeline(U);var X=o.slots.length;for(d=0;d<U;d++){w=i.readFloat();var V=i.readInt(!0),z=t.Utils.newArray(X,0);for(v=X-1;v>=0;v--)z[v]=-1;var W=t.Utils.newArray(X-V,0),H=0,j=0;for(v=0;v<V;v++){for(g=i.readInt(!0);H!=g;)W[j++]=H++;z[H+i.readInt(!0)]=H++}for(;H<X;)W[j++]=H++;for(v=X-1;v>=0;v--)-1==z[v]&&(z[v]=W[--j]);C.setFrame(d,w,z)}a.push(C),l=Math.max(l,C.frames[U-1])}var q=i.readInt(!0);if(q>0){for(C=new t.EventTimeline(q),d=0;d<q;d++){w=i.readFloat();var K=o.events[i.readInt(!0)],Z=new t.Event(w,K);Z.intValue=i.readInt(!1),Z.floatValue=i.readFloat(),Z.stringValue=i.readBoolean()?i.readString():K.stringValue,null!=Z.data.audioPath&&(Z.volume=i.readFloat(),Z.balance=i.readFloat()),C.setFrame(d,Z)}a.push(C),l=Math.max(l,C.frames[q-1])}return new t.Animation(r,a,l)},SkeletonBinary.prototype.readCurve=function(t,i,r){switch(t.readByte()){case SkeletonBinary.CURVE_STEPPED:r.setStepped(i);break;case SkeletonBinary.CURVE_BEZIER:this.setCurve(r,i,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat())}},SkeletonBinary.prototype.setCurve=function(t,i,r,o,a,h){t.setCurve(i,r,o,a,h)},SkeletonBinary.AttachmentTypeValues=[0,1,2,3,4,5,6],SkeletonBinary.TransformModeValues=[t.TransformMode.Normal,t.TransformMode.OnlyTranslation,t.TransformMode.NoRotationOrReflection,t.TransformMode.NoScale,t.TransformMode.NoScaleOrReflection],SkeletonBinary.PositionModeValues=[t.PositionMode.Fixed,t.PositionMode.Percent],SkeletonBinary.SpacingModeValues=[t.SpacingMode.Length,t.SpacingMode.Fixed,t.SpacingMode.Percent],SkeletonBinary.RotateModeValues=[t.RotateMode.Tangent,t.RotateMode.Chain,t.RotateMode.ChainScale],SkeletonBinary.BlendModeValues=[t.BlendMode.Normal,t.BlendMode.Additive,t.BlendMode.Multiply,t.BlendMode.Screen],SkeletonBinary.BONE_ROTATE=0,SkeletonBinary.BONE_TRANSLATE=1,SkeletonBinary.BONE_SCALE=2,SkeletonBinary.BONE_SHEAR=3,SkeletonBinary.SLOT_ATTACHMENT=0,SkeletonBinary.SLOT_COLOR=1,SkeletonBinary.SLOT_TWO_COLOR=2,SkeletonBinary.PATH_POSITION=0,SkeletonBinary.PATH_SPACING=1,SkeletonBinary.PATH_MIX=2,SkeletonBinary.CURVE_LINEAR=0,SkeletonBinary.CURVE_STEPPED=1,SkeletonBinary.CURVE_BEZIER=2,SkeletonBinary}();t.SkeletonBinary=i;var r=function(){function BinaryInput(t,i,r,o){void 0===i&&(i=new Array),void 0===r&&(r=0),void 0===o&&(o=new DataView(t.buffer)),this.strings=i,this.index=r,this.buffer=o}return BinaryInput.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},BinaryInput.prototype.readShort=function(){var t=this.buffer.getInt16(this.index);return this.index+=2,t},BinaryInput.prototype.readInt32=function(){var t=this.buffer.getInt32(this.index);return this.index+=4,t},BinaryInput.prototype.readInt=function(t){var i=this.readByte(),r=127&i;return 0!=(128&i)&&(r|=(127&(i=this.readByte()))<<7,0!=(128&i)&&(r|=(127&(i=this.readByte()))<<14,0!=(128&i)&&(r|=(127&(i=this.readByte()))<<21,0!=(128&i)&&(r|=(127&(i=this.readByte()))<<28)))),t?r:r>>>1^-(1&r)},BinaryInput.prototype.readStringRef=function(){var t=this.readInt(!0);return 0==t?null:this.strings[t-1]},BinaryInput.prototype.readString=function(){var t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;for(var i="",r=0;r<t;){var o=this.readByte();switch(o>>4){case 12:case 13:i+=String.fromCharCode((31&o)<<6|63&this.readByte()),r+=2;break;case 14:i+=String.fromCharCode((15&o)<<12|(63&this.readByte())<<6|63&this.readByte()),r+=3;break;default:i+=String.fromCharCode(o),r++}}return i},BinaryInput.prototype.readFloat=function(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t},BinaryInput.prototype.readBoolean=function(){return 0!=this.readByte()},BinaryInput}(),o=function o(t,i,r,a,h){this.mesh=t,this.skin=i,this.slotIndex=r,this.parent=a,this.inheritDeform=h},a=function a(t,i){void 0===t&&(t=null),void 0===i&&(i=null),this.bones=t,this.vertices=i}}(o||(o={})),function(t){var i=function(){function SkeletonBounds(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new t.Pool((function(){return t.Utils.newFloatArray(16)}))}return SkeletonBounds.prototype.update=function(i,r){if(null==i)throw new Error("skeleton cannot be null.");var o=this.boundingBoxes,a=this.polygons,h=this.polygonPool,l=i.slots,u=l.length;o.length=0,h.freeAll(a),a.length=0;for(var c=0;c<u;c++){var d=l[c];if(d.bone.active){var p=d.getAttachment();if(p instanceof t.BoundingBoxAttachment){var g=p;o.push(g);var v=h.obtain();v.length!=g.worldVerticesLength&&(v=t.Utils.newFloatArray(g.worldVerticesLength)),a.push(v),g.computeWorldVertices(d,0,g.worldVerticesLength,v,0,2)}}}r?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},SkeletonBounds.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=this.polygons,h=0,l=a.length;h<l;h++)for(var u=a[h],c=u,d=0,p=u.length;d<p;d+=2){var g=c[d],v=c[d+1];t=Math.min(t,g),i=Math.min(i,v),r=Math.max(r,g),o=Math.max(o,v)}this.minX=t,this.minY=i,this.maxX=r,this.maxY=o},SkeletonBounds.prototype.aabbContainsPoint=function(t,i){return t>=this.minX&&t<=this.maxX&&i>=this.minY&&i<=this.maxY},SkeletonBounds.prototype.aabbIntersectsSegment=function(t,i,r,o){var a=this.minX,h=this.minY,l=this.maxX,u=this.maxY;if(t<=a&&r<=a||i<=h&&o<=h||t>=l&&r>=l||i>=u&&o>=u)return!1;var c=(o-i)/(r-t),d=c*(a-t)+i;if(d>h&&d<u)return!0;if((d=c*(l-t)+i)>h&&d<u)return!0;var p=(h-i)/c+t;return p>a&&p<l||(p=(u-i)/c+t)>a&&p<l},SkeletonBounds.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},SkeletonBounds.prototype.containsPoint=function(t,i){for(var r=this.polygons,o=0,a=r.length;o<a;o++)if(this.containsPointPolygon(r[o],t,i))return this.boundingBoxes[o];return null},SkeletonBounds.prototype.containsPointPolygon=function(t,i,r){for(var o=t,a=t.length,h=a-2,l=!1,u=0;u<a;u+=2){var c=o[u+1],d=o[h+1];if(c<r&&d>=r||d<r&&c>=r){var p=o[u];p+(r-c)/(d-c)*(o[h]-p)<i&&(l=!l)}h=u}return l},SkeletonBounds.prototype.intersectsSegment=function(t,i,r,o){for(var a=this.polygons,h=0,l=a.length;h<l;h++)if(this.intersectsSegmentPolygon(a[h],t,i,r,o))return this.boundingBoxes[h];return null},SkeletonBounds.prototype.intersectsSegmentPolygon=function(t,i,r,o,a){for(var h=t,l=t.length,u=i-o,c=r-a,d=i*a-r*o,p=h[l-2],g=h[l-1],v=0;v<l;v+=2){var m=h[v],y=h[v+1],T=p*y-g*m,S=p-m,w=g-y,b=u*w-c*S,C=(d*S-u*T)/b;if((C>=p&&C<=m||C>=m&&C<=p)&&(C>=i&&C<=o||C>=o&&C<=i)){var A=(d*w-c*T)/b;if((A>=g&&A<=y||A>=y&&A<=g)&&(A>=r&&A<=a||A>=a&&A<=r))return!0}p=m,g=y}return!1},SkeletonBounds.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");var i=this.boundingBoxes.indexOf(t);return-1==i?null:this.polygons[i]},SkeletonBounds.prototype.getWidth=function(){return this.maxX-this.minX},SkeletonBounds.prototype.getHeight=function(){return this.maxY-this.minY},SkeletonBounds}();t.SkeletonBounds=i}(o||(o={})),function(t){var i=function(){function SkeletonClipping(){this.triangulator=new t.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}return SkeletonClipping.prototype.clipStart=function(i,r){if(null!=this.clipAttachment)return 0;this.clipAttachment=r;var o=r.worldVerticesLength,a=t.Utils.setArraySize(this.clippingPolygon,o);r.computeWorldVertices(i,0,o,a,0,2);var h=this.clippingPolygon;SkeletonClipping.makeClockwise(h);for(var l=this.clippingPolygons=this.triangulator.decompose(h,this.triangulator.triangulate(h)),u=0,c=l.length;u<c;u++){var d=l[u];SkeletonClipping.makeClockwise(d),d.push(d[0]),d.push(d[1])}return l.length},SkeletonClipping.prototype.clipEndWithSlot=function(t){null!=this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()},SkeletonClipping.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},SkeletonClipping.prototype.isClipping=function(){return null!=this.clipAttachment},SkeletonClipping.prototype.clipTriangles=function(i,r,o,a,h,l,u,c){var d=this.clipOutput,p=this.clippedVertices,g=this.clippedTriangles,v=this.clippingPolygons,m=this.clippingPolygons.length,y=c?12:8,T=0;p.length=0,g.length=0;t:for(var S=0;S<a;S+=3)for(var w=o[S]<<1,b=i[w],C=i[w+1],A=h[w],E=h[w+1],M=i[w=o[S+1]<<1],_=i[w+1],R=h[w],P=h[w+1],k=i[w=o[S+2]<<1],O=i[w+1],L=h[w],D=h[w+1],I=0;I<m;I++){var B=p.length;if(!this.clip(b,C,M,_,k,O,v[I],d)){(H=t.Utils.setArraySize(p,B+3*y))[B]=b,H[B+1]=C,H[B+2]=l.r,H[B+3]=l.g,H[B+4]=l.b,H[B+5]=l.a,c?(H[B+6]=A,H[B+7]=E,H[B+8]=u.r,H[B+9]=u.g,H[B+10]=u.b,H[B+11]=u.a,H[B+12]=M,H[B+13]=_,H[B+14]=l.r,H[B+15]=l.g,H[B+16]=l.b,H[B+17]=l.a,H[B+18]=R,H[B+19]=P,H[B+20]=u.r,H[B+21]=u.g,H[B+22]=u.b,H[B+23]=u.a,H[B+24]=k,H[B+25]=O,H[B+26]=l.r,H[B+27]=l.g,H[B+28]=l.b,H[B+29]=l.a,H[B+30]=L,H[B+31]=D,H[B+32]=u.r,H[B+33]=u.g,H[B+34]=u.b,H[B+35]=u.a):(H[B+6]=A,H[B+7]=E,H[B+8]=M,H[B+9]=_,H[B+10]=l.r,H[B+11]=l.g,H[B+12]=l.b,H[B+13]=l.a,H[B+14]=R,H[B+15]=P,H[B+16]=k,H[B+17]=O,H[B+18]=l.r,H[B+19]=l.g,H[B+20]=l.b,H[B+21]=l.a,H[B+22]=L,H[B+23]=D),B=g.length,(et=t.Utils.setArraySize(g,B+3))[B]=T,et[B+1]=T+1,et[B+2]=T+2,T+=3;continue t}var N=d.length;if(0!=N){for(var G=_-O,Y=k-M,U=b-k,X=O-C,V=1/(G*U+Y*(C-O)),z=N>>1,W=this.clipOutput,H=t.Utils.setArraySize(p,B+z*y),j=0;j<N;j+=2){var q=W[j],K=W[j+1];H[B]=q,H[B+1]=K,H[B+2]=l.r,H[B+3]=l.g,H[B+4]=l.b,H[B+5]=l.a;var Z=q-k,J=K-O,Q=(G*Z+Y*J)*V,$=(X*Z+U*J)*V,tt=1-Q-$;H[B+6]=A*Q+R*$+L*tt,H[B+7]=E*Q+P*$+D*tt,c&&(H[B+8]=u.r,H[B+9]=u.g,H[B+10]=u.b,H[B+11]=u.a),B+=y}B=g.length;var et=t.Utils.setArraySize(g,B+3*(z-2));z--;for(j=1;j<z;j++)et[B]=T,et[B+1]=T+j,et[B+2]=T+j+1,B+=3;T+=z+1}}},SkeletonClipping.prototype.clip=function(t,i,r,o,a,h,l,u){var c=u,d=!1,p=null;l.length%4>=2?(p=u,u=this.scratch):p=this.scratch,p.length=0,p.push(t),p.push(i),p.push(r),p.push(o),p.push(a),p.push(h),p.push(t),p.push(i),u.length=0;for(var g=l,v=l.length-4,m=0;;m+=2){for(var y=g[m],T=g[m+1],S=g[m+2],w=g[m+3],b=y-S,C=T-w,A=p,E=p.length-2,M=u.length,_=0;_<E;_+=2){var R=A[_],P=A[_+1],k=A[_+2],O=A[_+3],L=b*(O-w)-C*(k-S)>0;if(b*(P-w)-C*(R-S)>0){if(L){u.push(k),u.push(O);continue}var D=(B=O-P)*(S-y)-(N=k-R)*(w-T);if(Math.abs(D)>1e-6){var I=(N*(T-P)-B*(y-R))/D;u.push(y+(S-y)*I),u.push(T+(w-T)*I)}else u.push(y),u.push(T)}else if(L){var B,N;D=(B=O-P)*(S-y)-(N=k-R)*(w-T);if(Math.abs(D)>1e-6){I=(N*(T-P)-B*(y-R))/D;u.push(y+(S-y)*I),u.push(T+(w-T)*I)}else u.push(y),u.push(T);u.push(k),u.push(O)}d=!0}if(M==u.length)return c.length=0,!0;if(u.push(u[0]),u.push(u[1]),m==v)break;var G=u;(u=p).length=0,p=G}if(c!=u){c.length=0;m=0;for(var Y=u.length-2;m<Y;m++)c[m]=u[m]}else c.length=c.length-2;return d},SkeletonClipping.makeClockwise=function(t){for(var i=t,r=t.length,o=i[r-2]*i[1]-i[0]*i[r-1],a=0,h=0,l=0,u=0,c=r-3;u<c;u+=2)a=i[u],h=i[u+1],l=i[u+2],o+=a*i[u+3]-l*h;if(!(o<0)){u=0;var d=r-2;for(c=r>>1;u<c;u+=2){var p=i[u],g=i[u+1],v=d-u;i[u]=i[v],i[u+1]=i[v+1],i[v]=p,i[v+1]=g}}},SkeletonClipping}();t.SkeletonClipping=i}(o||(o={})),function(t){var i=function(){function SkeletonData(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return SkeletonData.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var i=this.bones,r=0,o=i.length;r<o;r++){var a=i[r];if(a.name==t)return a}return null},SkeletonData.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var i=this.bones,r=0,o=i.length;r<o;r++)if(i[r].name==t)return r;return-1},SkeletonData.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var i=this.slots,r=0,o=i.length;r<o;r++){var a=i[r];if(a.name==t)return a}return null},SkeletonData.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var i=this.slots,r=0,o=i.length;r<o;r++)if(i[r].name==t)return r;return-1},SkeletonData.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var i=this.skins,r=0,o=i.length;r<o;r++){var a=i[r];if(a.name==t)return a}return null},SkeletonData.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var i=this.events,r=0,o=i.length;r<o;r++){var a=i[r];if(a.name==t)return a}return null},SkeletonData.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var i=this.animations,r=0,o=i.length;r<o;r++){var a=i[r];if(a.name==t)return a}return null},SkeletonData.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var i=this.ikConstraints,r=0,o=i.length;r<o;r++){var a=i[r];if(a.name==t)return a}return null},SkeletonData.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var i=this.transformConstraints,r=0,o=i.length;r<o;r++){var a=i[r];if(a.name==t)return a}return null},SkeletonData.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var i=this.pathConstraints,r=0,o=i.length;r<o;r++){var a=i[r];if(a.name==t)return a}return null},SkeletonData.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var i=this.pathConstraints,r=0,o=i.length;r<o;r++)if(i[r].name==t)return r;return-1},SkeletonData}();t.SkeletonData=i}(o||(o={})),function(t){var i=function(){function SkeletonJson(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return SkeletonJson.prototype.readSkeletonData=function(i){var r=this.scale,o=new t.SkeletonData,a="string"==typeof i?JSON.parse(i):i,h=a.skeleton;if(null!=h){if(o.hash=h.hash,o.version=h.spine,"3.8.75"==o.version)throw new Error("Unsupported skeleton data, please export with a newer version of Spine.");o.x=h.x,o.y=h.y,o.width=h.width,o.height=h.height,o.fps=h.fps,o.imagesPath=h.images}if(a.bones)for(var l=0;l<a.bones.length;l++){var u=a.bones[l],c=null,d=this.getValue(u,"parent",null);if(null!=d&&null==(c=o.findBone(d)))throw new Error("Parent bone not found: "+d);(m=new t.BoneData(o.bones.length,u.name,c)).length=this.getValue(u,"length",0)*r,m.x=this.getValue(u,"x",0)*r,m.y=this.getValue(u,"y",0)*r,m.rotation=this.getValue(u,"rotation",0),m.scaleX=this.getValue(u,"scaleX",1),m.scaleY=this.getValue(u,"scaleY",1),m.shearX=this.getValue(u,"shearX",0),m.shearY=this.getValue(u,"shearY",0),m.transformMode=SkeletonJson.transformModeFromString(this.getValue(u,"transform","normal")),m.skinRequired=this.getValue(u,"skin",!1),o.bones.push(m)}if(a.slots)for(l=0;l<a.slots.length;l++){var p=(P=a.slots[l]).name,g=P.bone,v=o.findBone(g);if(null==v)throw new Error("Slot bone not found: "+g);var m=new t.SlotData(o.slots.length,p,v),y=this.getValue(P,"color",null);null!=y&&m.color.setFromString(y);var T=this.getValue(P,"dark",null);null!=T&&(m.darkColor=new t.Color(1,1,1,1),m.darkColor.setFromString(T)),m.attachmentName=this.getValue(P,"attachment",null),m.blendMode=SkeletonJson.blendModeFromString(this.getValue(P,"blend","normal")),o.slots.push(m)}if(a.ik)for(l=0;l<a.ik.length;l++){var S=a.ik[l];(m=new t.IkConstraintData(S.name)).order=this.getValue(S,"order",0),m.skinRequired=this.getValue(S,"skin",!1);for(var w=0;w<S.bones.length;w++){g=S.bones[w];if(null==(M=o.findBone(g)))throw new Error("IK bone not found: "+g);m.bones.push(M)}var b=S.target;if(m.target=o.findBone(b),null==m.target)throw new Error("IK target bone not found: "+b);m.mix=this.getValue(S,"mix",1),m.softness=this.getValue(S,"softness",0)*r,m.bendDirection=this.getValue(S,"bendPositive",!0)?1:-1,m.compress=this.getValue(S,"compress",!1),m.stretch=this.getValue(S,"stretch",!1),m.uniform=this.getValue(S,"uniform",!1),o.ikConstraints.push(m)}if(a.transform)for(l=0;l<a.transform.length;l++){S=a.transform[l];(m=new t.TransformConstraintData(S.name)).order=this.getValue(S,"order",0),m.skinRequired=this.getValue(S,"skin",!1);for(w=0;w<S.bones.length;w++){g=S.bones[w];if(null==(M=o.findBone(g)))throw new Error("Transform constraint bone not found: "+g);m.bones.push(M)}b=S.target;if(m.target=o.findBone(b),null==m.target)throw new Error("Transform constraint target bone not found: "+b);m.local=this.getValue(S,"local",!1),m.relative=this.getValue(S,"relative",!1),m.offsetRotation=this.getValue(S,"rotation",0),m.offsetX=this.getValue(S,"x",0)*r,m.offsetY=this.getValue(S,"y",0)*r,m.offsetScaleX=this.getValue(S,"scaleX",0),m.offsetScaleY=this.getValue(S,"scaleY",0),m.offsetShearY=this.getValue(S,"shearY",0),m.rotateMix=this.getValue(S,"rotateMix",1),m.translateMix=this.getValue(S,"translateMix",1),m.scaleMix=this.getValue(S,"scaleMix",1),m.shearMix=this.getValue(S,"shearMix",1),o.transformConstraints.push(m)}if(a.path)for(l=0;l<a.path.length;l++){S=a.path[l];(m=new t.PathConstraintData(S.name)).order=this.getValue(S,"order",0),m.skinRequired=this.getValue(S,"skin",!1);for(w=0;w<S.bones.length;w++){g=S.bones[w];if(null==(M=o.findBone(g)))throw new Error("Transform constraint bone not found: "+g);m.bones.push(M)}b=S.target;if(m.target=o.findSlot(b),null==m.target)throw new Error("Path target slot not found: "+b);m.positionMode=SkeletonJson.positionModeFromString(this.getValue(S,"positionMode","percent")),m.spacingMode=SkeletonJson.spacingModeFromString(this.getValue(S,"spacingMode","length")),m.rotateMode=SkeletonJson.rotateModeFromString(this.getValue(S,"rotateMode","tangent")),m.offsetRotation=this.getValue(S,"rotation",0),m.position=this.getValue(S,"position",0),m.positionMode==t.PositionMode.Fixed&&(m.position*=r),m.spacing=this.getValue(S,"spacing",0),m.spacingMode!=t.SpacingMode.Length&&m.spacingMode!=t.SpacingMode.Fixed||(m.spacing*=r),m.rotateMix=this.getValue(S,"rotateMix",1),m.translateMix=this.getValue(S,"translateMix",1),o.pathConstraints.push(m)}if(a.skins)for(l=0;l<a.skins.length;l++){var C=a.skins[l],A=new t.Skin(C.name);if(C.bones)for(var E=0;E<C.bones.length;E++){var M;if(null==(M=o.findBone(C.bones[E])))throw new Error("Skin bone not found: "+C.bones[l]);A.bones.push(M)}if(C.ik)for(E=0;E<C.ik.length;E++){if(null==(_=o.findIkConstraint(C.ik[E])))throw new Error("Skin IK constraint not found: "+C.ik[l]);A.constraints.push(_)}if(C.transform)for(E=0;E<C.transform.length;E++){if(null==(_=o.findTransformConstraint(C.transform[E])))throw new Error("Skin transform constraint not found: "+C.transform[l]);A.constraints.push(_)}if(C.path)for(E=0;E<C.path.length;E++){var _;if(null==(_=o.findPathConstraint(C.path[E])))throw new Error("Skin path constraint not found: "+C.path[l]);A.constraints.push(_)}for(var p in C.attachments){var R=o.findSlot(p);if(null==R)throw new Error("Slot not found: "+p);var P=C.attachments[p];for(var k in P){var O=this.readAttachment(P[k],A,R.index,k,o);null!=O&&A.setAttachment(R.index,k,O)}}o.skins.push(A),"default"==A.name&&(o.defaultSkin=A)}l=0;for(var L=this.linkedMeshes.length;l<L;l++){var D=this.linkedMeshes[l];if(null==(A=null==D.skin?o.defaultSkin:o.findSkin(D.skin)))throw new Error("Skin not found: "+D.skin);var I=A.getAttachment(D.slotIndex,D.parent);if(null==I)throw new Error("Parent mesh not found: "+D.parent);D.mesh.deformAttachment=D.inheritDeform?I:D.mesh,D.mesh.setParentMesh(I),D.mesh.updateUVs()}if(this.linkedMeshes.length=0,a.events)for(var B in a.events){var N=a.events[B];(m=new t.EventData(B)).intValue=this.getValue(N,"int",0),m.floatValue=this.getValue(N,"float",0),m.stringValue=this.getValue(N,"string",""),m.audioPath=this.getValue(N,"audio",null),null!=m.audioPath&&(m.volume=this.getValue(N,"volume",1),m.balance=this.getValue(N,"balance",0)),o.events.push(m)}if(a.animations)for(var G in a.animations){var Y=a.animations[G];this.readAnimation(Y,G,o)}return o},SkeletonJson.prototype.readAttachment=function(i,o,a,h,l){var u=this.scale;switch(h=this.getValue(i,"name",h),this.getValue(i,"type","region")){case"region":var c=this.getValue(i,"path",h),d=this.attachmentLoader.newRegionAttachment(o,h,c);return null==d?null:(d.path=c,d.x=this.getValue(i,"x",0)*u,d.y=this.getValue(i,"y",0)*u,d.scaleX=this.getValue(i,"scaleX",1),d.scaleY=this.getValue(i,"scaleY",1),d.rotation=this.getValue(i,"rotation",0),d.width=i.width*u,d.height=i.height*u,null!=(E=this.getValue(i,"color",null))&&d.color.setFromString(E),d.updateOffset(),d);case"boundingbox":var p=this.attachmentLoader.newBoundingBoxAttachment(o,h);return null==p?null:(this.readVertices(i,p,i.vertexCount<<1),null!=(E=this.getValue(i,"color",null))&&p.color.setFromString(E),p);case"mesh":case"linkedmesh":c=this.getValue(i,"path",h);var g=this.attachmentLoader.newMeshAttachment(o,h,c);if(null==g)return null;g.path=c,null!=(E=this.getValue(i,"color",null))&&g.color.setFromString(E),g.width=this.getValue(i,"width",0)*u,g.height=this.getValue(i,"height",0)*u;var v=this.getValue(i,"parent",null);if(null!=v)return this.linkedMeshes.push(new r(g,this.getValue(i,"skin",null),a,v,this.getValue(i,"deform",!0))),g;var m=i.uvs;return this.readVertices(i,g,m.length),g.triangles=i.triangles,g.regionUVs=m,g.updateUVs(),g.edges=this.getValue(i,"edges",null),g.hullLength=2*this.getValue(i,"hull",0),g;case"path":if(null==(c=this.attachmentLoader.newPathAttachment(o,h)))return null;c.closed=this.getValue(i,"closed",!1),c.constantSpeed=this.getValue(i,"constantSpeed",!0);var y=i.vertexCount;this.readVertices(i,c,y<<1);for(var T=t.Utils.newArray(y/3,0),S=0;S<i.lengths.length;S++)T[S]=i.lengths[S]*u;return c.lengths=T,null!=(E=this.getValue(i,"color",null))&&c.color.setFromString(E),c;case"point":var w=this.attachmentLoader.newPointAttachment(o,h);return null==w?null:(w.x=this.getValue(i,"x",0)*u,w.y=this.getValue(i,"y",0)*u,w.rotation=this.getValue(i,"rotation",0),null!=(E=this.getValue(i,"color",null))&&w.color.setFromString(E),w);case"clipping":var b=this.attachmentLoader.newClippingAttachment(o,h);if(null==b)return null;var C=this.getValue(i,"end",null);if(null!=C){var A=l.findSlot(C);if(null==A)throw new Error("Clipping end slot not found: "+C);b.endSlot=A}var E;y=i.vertexCount;return this.readVertices(i,b,y<<1),null!=(E=this.getValue(i,"color",null))&&b.color.setFromString(E),b}return null},SkeletonJson.prototype.readVertices=function(i,r,o){var a=this.scale;r.worldVerticesLength=o;var h=i.vertices;if(o!=h.length){var l=new Array,u=new Array;for(g=0,v=h.length;g<v;){var c=h[g++];u.push(c);for(var d=g+4*c;g<d;g+=4)u.push(h[g]),l.push(h[g+1]*a),l.push(h[g+2]*a),l.push(h[g+3])}r.bones=u,r.vertices=t.Utils.toFloatArray(l)}else{var p=t.Utils.toFloatArray(h);if(1!=a)for(var g=0,v=h.length;g<v;g++)p[g]*=a;r.vertices=p}},SkeletonJson.prototype.readAnimation=function(i,r,o){var a=this.scale,h=new Array,l=0;if(i.slots)for(var u in i.slots){var c=i.slots[u];if(-1==(it=o.findSlotIndex(u)))throw new Error("Slot not found: "+u);for(var d in c){var p=c[d];if("attachment"==d){(A=new t.AttachmentTimeline(p.length)).slotIndex=it;for(var g=0,v=0;v<p.length;v++){var m=p[v];A.setFrame(g++,this.getValue(m,"time",0),m.name)}h.push(A),l=Math.max(l,A.frames[A.getFrameCount()-1])}else if("color"==d){(A=new t.ColorTimeline(p.length)).slotIndex=it;for(g=0,v=0;v<p.length;v++){m=p[v];var y=new t.Color;y.setFromString(m.color),A.setFrame(g,this.getValue(m,"time",0),y.r,y.g,y.b,y.a),this.readCurve(m,A,g),g++}h.push(A),l=Math.max(l,A.frames[(A.getFrameCount()-1)*t.ColorTimeline.ENTRIES])}else{if("twoColor"!=d)throw new Error("Invalid timeline type for a slot: "+d+" ("+u+")");(A=new t.TwoColorTimeline(p.length)).slotIndex=it;for(g=0,v=0;v<p.length;v++){m=p[v];var T=new t.Color,S=new t.Color;T.setFromString(m.light),S.setFromString(m.dark),A.setFrame(g,this.getValue(m,"time",0),T.r,T.g,T.b,T.a,S.r,S.g,S.b),this.readCurve(m,A,g),g++}h.push(A),l=Math.max(l,A.frames[(A.getFrameCount()-1)*t.TwoColorTimeline.ENTRIES])}}}if(i.bones)for(var w in i.bones){var b=i.bones[w],C=o.findBoneIndex(w);if(-1==C)throw new Error("Bone not found: "+w);for(var d in b){p=b[d];if("rotate"===d){(A=new t.RotateTimeline(p.length)).boneIndex=C;for(g=0,v=0;v<p.length;v++){m=p[v];A.setFrame(g,this.getValue(m,"time",0),this.getValue(m,"angle",0)),this.readCurve(m,A,g),g++}h.push(A),l=Math.max(l,A.frames[(A.getFrameCount()-1)*t.RotateTimeline.ENTRIES])}else{if("translate"!==d&&"scale"!==d&&"shear"!==d)throw new Error("Invalid timeline type for a bone: "+d+" ("+w+")");var A=null,E=1,M=0;"scale"===d?(A=new t.ScaleTimeline(p.length),M=1):"shear"===d?A=new t.ShearTimeline(p.length):(A=new t.TranslateTimeline(p.length),E=a),A.boneIndex=C;for(g=0,v=0;v<p.length;v++){m=p[v];var _=this.getValue(m,"x",M),R=this.getValue(m,"y",M);A.setFrame(g,this.getValue(m,"time",0),_*E,R*E),this.readCurve(m,A,g),g++}h.push(A),l=Math.max(l,A.frames[(A.getFrameCount()-1)*t.TranslateTimeline.ENTRIES])}}}if(i.ik)for(var P in i.ik){var k=i.ik[P],O=o.findIkConstraint(P);(A=new t.IkConstraintTimeline(k.length)).ikConstraintIndex=o.ikConstraints.indexOf(O);for(g=0,v=0;v<k.length;v++){m=k[v];A.setFrame(g,this.getValue(m,"time",0),this.getValue(m,"mix",1),this.getValue(m,"softness",0)*a,this.getValue(m,"bendPositive",!0)?1:-1,this.getValue(m,"compress",!1),this.getValue(m,"stretch",!1)),this.readCurve(m,A,g),g++}h.push(A),l=Math.max(l,A.frames[(A.getFrameCount()-1)*t.IkConstraintTimeline.ENTRIES])}if(i.transform)for(var P in i.transform){k=i.transform[P],O=o.findTransformConstraint(P);(A=new t.TransformConstraintTimeline(k.length)).transformConstraintIndex=o.transformConstraints.indexOf(O);for(g=0,v=0;v<k.length;v++){m=k[v];A.setFrame(g,this.getValue(m,"time",0),this.getValue(m,"rotateMix",1),this.getValue(m,"translateMix",1),this.getValue(m,"scaleMix",1),this.getValue(m,"shearMix",1)),this.readCurve(m,A,g),g++}h.push(A),l=Math.max(l,A.frames[(A.getFrameCount()-1)*t.TransformConstraintTimeline.ENTRIES])}if(i.path)for(var P in i.path){k=i.path[P];var L=o.findPathConstraintIndex(P);if(-1==L)throw new Error("Path constraint not found: "+P);var D=o.pathConstraints[L];for(var d in k){p=k[d];if("position"===d||"spacing"===d){A=null,E=1;"spacing"===d?(A=new t.PathConstraintSpacingTimeline(p.length),D.spacingMode!=t.SpacingMode.Length&&D.spacingMode!=t.SpacingMode.Fixed||(E=a)):(A=new t.PathConstraintPositionTimeline(p.length),D.positionMode==t.PositionMode.Fixed&&(E=a)),A.pathConstraintIndex=L;for(g=0,v=0;v<p.length;v++){m=p[v];A.setFrame(g,this.getValue(m,"time",0),this.getValue(m,d,0)*E),this.readCurve(m,A,g),g++}h.push(A),l=Math.max(l,A.frames[(A.getFrameCount()-1)*t.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===d){(A=new t.PathConstraintMixTimeline(p.length)).pathConstraintIndex=L;for(g=0,v=0;v<p.length;v++){m=p[v];A.setFrame(g,this.getValue(m,"time",0),this.getValue(m,"rotateMix",1),this.getValue(m,"translateMix",1)),this.readCurve(m,A,g),g++}h.push(A),l=Math.max(l,A.frames[(A.getFrameCount()-1)*t.PathConstraintMixTimeline.ENTRIES])}}}if(i.deform)for(var I in i.deform){var B=i.deform[I],N=o.findSkin(I);if(null==N)throw new Error("Skin not found: "+I);for(var u in B){c=B[u];if(-1==(it=o.findSlotIndex(u)))throw new Error("Slot not found: "+c.name);for(var d in c){p=c[d];var G=N.getAttachment(it,d);if(null==G)throw new Error("Deform attachment not found: "+p.name);var Y=null!=G.bones,U=G.vertices,X=Y?U.length/3*2:U.length;(A=new t.DeformTimeline(p.length)).slotIndex=it,A.attachment=G;g=0;for(var V=0;V<p.length;V++){m=p[V];var z=void 0,W=this.getValue(m,"vertices",null);if(null==W)z=Y?t.Utils.newFloatArray(X):U;else{z=t.Utils.newFloatArray(X);var H=this.getValue(m,"offset",0);if(t.Utils.arrayCopy(W,0,z,H,W.length),1!=a)for(var j=(v=H)+W.length;v<j;v++)z[v]*=a;if(!Y)for(v=0;v<X;v++)z[v]+=U[v]}A.setFrame(g,this.getValue(m,"time",0),z),this.readCurve(m,A,g),g++}h.push(A),l=Math.max(l,A.frames[A.getFrameCount()-1])}}}var q=i.drawOrder;if(null==q&&(q=i.draworder),null!=q){A=new t.DrawOrderTimeline(q.length);var K=o.slots.length;for(g=0,V=0;V<q.length;V++){var Z=q[V],J=null,Q=this.getValue(Z,"offsets",null);if(null!=Q){J=t.Utils.newArray(K,-1);var $=t.Utils.newArray(K-Q.length,0),tt=0,et=0;for(v=0;v<Q.length;v++){var it,nt=Q[v];if(-1==(it=o.findSlotIndex(nt.slot)))throw new Error("Slot not found: "+nt.slot);for(;tt!=it;)$[et++]=tt++;J[tt+nt.offset]=tt++}for(;tt<K;)$[et++]=tt++;for(v=K-1;v>=0;v--)-1==J[v]&&(J[v]=$[--et])}A.setFrame(g++,this.getValue(Z,"time",0),J)}h.push(A),l=Math.max(l,A.frames[A.getFrameCount()-1])}if(i.events){for(A=new t.EventTimeline(i.events.length),g=0,v=0;v<i.events.length;v++){var rt=i.events[v],st=o.findEvent(rt.name);if(null==st)throw new Error("Event not found: "+rt.name);var ot=new t.Event(t.Utils.toSinglePrecision(this.getValue(rt,"time",0)),st);ot.intValue=this.getValue(rt,"int",st.intValue),ot.floatValue=this.getValue(rt,"float",st.floatValue),ot.stringValue=this.getValue(rt,"string",st.stringValue),null!=ot.data.audioPath&&(ot.volume=this.getValue(rt,"volume",1),ot.balance=this.getValue(rt,"balance",0)),A.setFrame(g++,ot)}h.push(A),l=Math.max(l,A.frames[A.getFrameCount()-1])}if(isNaN(l))throw new Error("Error while parsing animation, duration is NaN");o.animations.push(new t.Animation(r,h,l))},SkeletonJson.prototype.readCurve=function(t,i,r){if(t.hasOwnProperty("curve"))if("stepped"==t.curve)i.setStepped(r);else{var o=t.curve;i.setCurve(r,o,this.getValue(t,"c2",0),this.getValue(t,"c3",1),this.getValue(t,"c4",1))}},SkeletonJson.prototype.getValue=function(t,i,r){return void 0!==t[i]?t[i]:r},SkeletonJson.blendModeFromString=function(i){if("normal"==(i=i.toLowerCase()))return t.BlendMode.Normal;if("additive"==i)return t.BlendMode.Additive;if("multiply"==i)return t.BlendMode.Multiply;if("screen"==i)return t.BlendMode.Screen;throw new Error("Unknown blend mode: "+i)},SkeletonJson.positionModeFromString=function(i){if("fixed"==(i=i.toLowerCase()))return t.PositionMode.Fixed;if("percent"==i)return t.PositionMode.Percent;throw new Error("Unknown position mode: "+i)},SkeletonJson.spacingModeFromString=function(i){if("length"==(i=i.toLowerCase()))return t.SpacingMode.Length;if("fixed"==i)return t.SpacingMode.Fixed;if("percent"==i)return t.SpacingMode.Percent;throw new Error("Unknown position mode: "+i)},SkeletonJson.rotateModeFromString=function(i){if("tangent"==(i=i.toLowerCase()))return t.RotateMode.Tangent;if("chain"==i)return t.RotateMode.Chain;if("chainscale"==i)return t.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+i)},SkeletonJson.transformModeFromString=function(i){if("normal"==(i=i.toLowerCase()))return t.TransformMode.Normal;if("onlytranslation"==i)return t.TransformMode.OnlyTranslation;if("norotationorreflection"==i)return t.TransformMode.NoRotationOrReflection;if("noscale"==i)return t.TransformMode.NoScale;if("noscaleorreflection"==i)return t.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+i)},SkeletonJson}();t.SkeletonJson=i;var r=function r(t,i,o,a,h){this.mesh=t,this.skin=i,this.slotIndex=o,this.parent=a,this.inheritDeform=h}}(o||(o={})),function(t){var i=function i(t,r,o){this.slotIndex=t,this.name=r,this.attachment=o};t.SkinEntry=i;var r=function(){function Skin(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,null==t)throw new Error("name cannot be null.");this.name=t}return Skin.prototype.setAttachment=function(t,i,r){if(null==r)throw new Error("attachment cannot be null.");var o=this.attachments;t>=o.length&&(o.length=t+1),o[t]||(o[t]={}),o[t][i]=r},Skin.prototype.addSkin=function(t){for(var i=0;i<t.bones.length;i++){for(var r=t.bones[i],o=!1,a=0;a<this.bones.length;a++)if(this.bones[a]==r){o=!0;break}o||this.bones.push(r)}for(i=0;i<t.constraints.length;i++){var h=t.constraints[i];for(o=!1,a=0;a<this.constraints.length;a++)if(this.constraints[a]==h){o=!0;break}o||this.constraints.push(h)}var l=t.getAttachments();for(i=0;i<l.length;i++){var u=l[i];this.setAttachment(u.slotIndex,u.name,u.attachment)}},Skin.prototype.copySkin=function(i){for(var r=0;r<i.bones.length;r++){for(var o=i.bones[r],a=!1,h=0;h<this.bones.length;h++)if(this.bones[h]==o){a=!0;break}a||this.bones.push(o)}for(r=0;r<i.constraints.length;r++){var l=i.constraints[r];for(a=!1,h=0;h<this.constraints.length;h++)if(this.constraints[h]==l){a=!0;break}a||this.constraints.push(l)}var u=i.getAttachments();for(r=0;r<u.length;r++){var c=u[r];null!=c.attachment&&(c.attachment instanceof t.MeshAttachment?(c.attachment=c.attachment.newLinkedMesh(),this.setAttachment(c.slotIndex,c.name,c.attachment)):(c.attachment=c.attachment.copy(),this.setAttachment(c.slotIndex,c.name,c.attachment)))}},Skin.prototype.getAttachment=function(t,i){var r=this.attachments[t];return r?r[i]:null},Skin.prototype.removeAttachment=function(t,i){var r=this.attachments[t];r&&(r[i]=null)},Skin.prototype.getAttachments=function(){for(var t=new Array,r=0;r<this.attachments.length;r++){var o=this.attachments[r];if(o)for(var a in o){var h=o[a];h&&t.push(new i(r,a,h))}}return t},Skin.prototype.getAttachmentsForSlot=function(t,r){var o=this.attachments[t];if(o)for(var a in o){var h=o[a];h&&r.push(new i(t,a,h))}},Skin.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},Skin.prototype.attachAll=function(t,i){for(var r=0,o=0;o<t.slots.length;o++){var a=t.slots[o],h=a.getAttachment();if(h&&r<i.attachments.length){var l=i.attachments[r];for(var u in l){if(h==l[u]){var c=this.getAttachment(r,u);null!=c&&a.setAttachment(c);break}}}r++}},Skin}();t.Skin=r}(o||(o={})),function(t){var i=function(){function Slot(i,r){if(this.deform=new Array,null==i)throw new Error("data cannot be null.");if(null==r)throw new Error("bone cannot be null.");this.data=i,this.bone=r,this.color=new t.Color,this.darkColor=null==i.darkColor?null:new t.Color,this.setToSetupPose()}return Slot.prototype.getSkeleton=function(){return this.bone.skeleton},Slot.prototype.getAttachment=function(){return this.attachment},Slot.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},Slot.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},Slot.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},Slot.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},Slot}();t.Slot=i}(o||(o={})),function(t){var i=function i(r,o,a){if(this.color=new t.Color(1,1,1,1),r<0)throw new Error("index must be >= 0.");if(null==o)throw new Error("name cannot be null.");if(null==a)throw new Error("boneData cannot be null.");this.index=r,this.name=o,this.boneData=a};t.SlotData=i}(o||(o={})),function(t){var i,r,o=function(){function Texture(t){this._image=t}return Texture.prototype.getImage=function(){return this._image},Texture.filterFromString=function(t){switch(t.toLowerCase()){case"nearest":return i.Nearest;case"linear":return i.Linear;case"mipmap":return i.MipMap;case"mipmapnearestnearest":return i.MipMapNearestNearest;case"mipmaplinearnearest":return i.MipMapLinearNearest;case"mipmapnearestlinear":return i.MipMapNearestLinear;case"mipmaplinearlinear":return i.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}},Texture.wrapFromString=function(t){switch(t.toLowerCase()){case"mirroredtepeat":return r.MirroredRepeat;case"clamptoedge":return r.ClampToEdge;case"repeat":return r.Repeat;default:throw new Error("Unknown texture wrap "+t)}},Texture}();t.Texture=o,function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(i=t.TextureFilter||(t.TextureFilter={})),function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"}(r=t.TextureWrap||(t.TextureWrap={}));var h=function h(){this.u=0,this.v=0,this.u2=0,this.v2=0,this.width=0,this.height=0,this.rotate=!1,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0};t.TextureRegion=h;var l=function(t){function FakeTexture(){return null!==t&&t.apply(this,arguments)||this}return a(FakeTexture,t),FakeTexture.prototype.setFilters=function(t,i){},FakeTexture.prototype.setWraps=function(t,i){},FakeTexture.prototype.dispose=function(){},FakeTexture}(o);t.FakeTexture=l}(o||(o={})),function(t){var i=function(){function TextureAtlas(t,i){this.pages=new Array,this.regions=new Array,this.load(t,i)}return TextureAtlas.prototype.load=function(i,a){if(null==a)throw new Error("textureLoader cannot be null.");for(var l=new r(i),u=new Array(4),c=null;;){var d=l.readLine();if(null==d)break;if(0==(d=d.trim()).length)c=null;else if(c){var p=new h;p.name=d,p.page=c;var g=l.readValue();"true"==g.toLocaleLowerCase()?p.degrees=90:"false"==g.toLocaleLowerCase()?p.degrees=0:p.degrees=parseFloat(g),p.rotate=90==p.degrees,l.readTuple(u);var v=parseInt(u[0]),m=parseInt(u[1]);l.readTuple(u);var y=parseInt(u[0]),T=parseInt(u[1]);p.u=v/c.width,p.v=m/c.height,p.rotate?(p.u2=(v+T)/c.width,p.v2=(m+y)/c.height):(p.u2=(v+y)/c.width,p.v2=(m+T)/c.height),p.x=v,p.y=m,p.width=Math.abs(y),p.height=Math.abs(T),4==l.readTuple(u)&&4==l.readTuple(u)&&l.readTuple(u),p.originalWidth=parseInt(u[0]),p.originalHeight=parseInt(u[1]),l.readTuple(u),p.offsetX=parseInt(u[0]),p.offsetY=parseInt(u[1]),p.index=parseInt(l.readValue()),p.texture=c.texture,this.regions.push(p)}else{(c=new o).name=d,2==l.readTuple(u)&&(c.width=parseInt(u[0]),c.height=parseInt(u[1]),l.readTuple(u)),l.readTuple(u),c.minFilter=t.Texture.filterFromString(u[0]),c.magFilter=t.Texture.filterFromString(u[1]);var S=l.readValue();c.uWrap=t.TextureWrap.ClampToEdge,c.vWrap=t.TextureWrap.ClampToEdge,"x"==S?c.uWrap=t.TextureWrap.Repeat:"y"==S?c.vWrap=t.TextureWrap.Repeat:"xy"==S&&(c.uWrap=c.vWrap=t.TextureWrap.Repeat),c.texture=a(d),c.texture.setFilters(c.minFilter,c.magFilter),c.texture.setWraps(c.uWrap,c.vWrap),c.width=c.texture.getImage().width,c.height=c.texture.getImage().height,this.pages.push(c)}}},TextureAtlas.prototype.findRegion=function(t){for(var i=0;i<this.regions.length;i++)if(this.regions[i].name==t)return this.regions[i];return null},TextureAtlas.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].texture.dispose()},TextureAtlas}();t.TextureAtlas=i;var r=function(){function TextureAtlasReader(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}return TextureAtlasReader.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},TextureAtlasReader.prototype.readValue=function(){var t=this.readLine(),i=t.indexOf(":");if(-1==i)throw new Error("Invalid line: "+t);return t.substring(i+1).trim()},TextureAtlasReader.prototype.readTuple=function(t){var i=this.readLine(),r=i.indexOf(":");if(-1==r)throw new Error("Invalid line: "+i);for(var o=0,a=r+1;o<3;o++){var h=i.indexOf(",",a);if(-1==h)break;t[o]=i.substr(a,h-a).trim(),a=h+1}return t[o]=i.substring(a).trim(),o+1},TextureAtlasReader}(),o=function o(){};t.TextureAtlasPage=o;var h=function(t){function TextureAtlasRegion(){return null!==t&&t.apply(this,arguments)||this}return a(TextureAtlasRegion,t),TextureAtlasRegion}(t.TextureRegion);t.TextureAtlasRegion=h}(o||(o={})),function(t){var i=function(){function TransformConstraint(i,r){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new t.Vector2,this.active=!1,null==i)throw new Error("data cannot be null.");if(null==r)throw new Error("skeleton cannot be null.");this.data=i,this.rotateMix=i.rotateMix,this.translateMix=i.translateMix,this.scaleMix=i.scaleMix,this.shearMix=i.shearMix,this.bones=new Array;for(var o=0;o<i.bones.length;o++)this.bones.push(r.findBone(i.bones[o].name));this.target=r.findBone(i.target.name)}return TransformConstraint.prototype.isActive=function(){return this.active},TransformConstraint.prototype.apply=function(){this.update()},TransformConstraint.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},TransformConstraint.prototype.applyAbsoluteWorld=function(){for(var i=this.rotateMix,r=this.translateMix,o=this.scaleMix,a=this.shearMix,h=this.target,l=h.a,u=h.b,c=h.c,d=h.d,p=l*d-u*c>0?t.MathUtils.degRad:-t.MathUtils.degRad,g=this.data.offsetRotation*p,v=this.data.offsetShearY*p,m=this.bones,y=0,T=m.length;y<T;y++){var S=m[y],w=!1;if(0!=i){var b=S.a,C=S.b,A=S.c,E=S.d;(O=Math.atan2(c,l)-Math.atan2(A,b)+g)>t.MathUtils.PI?O-=t.MathUtils.PI2:O<-t.MathUtils.PI&&(O+=t.MathUtils.PI2),O*=i;var M=Math.cos(O),_=Math.sin(O);S.a=M*b-_*A,S.b=M*C-_*E,S.c=_*b+M*A,S.d=_*C+M*E,w=!0}if(0!=r){var R=this.temp;h.localToWorld(R.set(this.data.offsetX,this.data.offsetY)),S.worldX+=(R.x-S.worldX)*r,S.worldY+=(R.y-S.worldY)*r,w=!0}if(o>0){var P=Math.sqrt(S.a*S.a+S.c*S.c),k=Math.sqrt(l*l+c*c);P>1e-5&&(P=(P+(k-P+this.data.offsetScaleX)*o)/P),S.a*=P,S.c*=P,P=Math.sqrt(S.b*S.b+S.d*S.d),k=Math.sqrt(u*u+d*d),P>1e-5&&(P=(P+(k-P+this.data.offsetScaleY)*o)/P),S.b*=P,S.d*=P,w=!0}if(a>0){C=S.b,E=S.d;var O,L=Math.atan2(E,C);(O=Math.atan2(d,u)-Math.atan2(c,l)-(L-Math.atan2(S.c,S.a)))>t.MathUtils.PI?O-=t.MathUtils.PI2:O<-t.MathUtils.PI&&(O+=t.MathUtils.PI2),O=L+(O+v)*a;P=Math.sqrt(C*C+E*E);S.b=Math.cos(O)*P,S.d=Math.sin(O)*P,w=!0}w&&(S.appliedValid=!1)}},TransformConstraint.prototype.applyRelativeWorld=function(){for(var i=this.rotateMix,r=this.translateMix,o=this.scaleMix,a=this.shearMix,h=this.target,l=h.a,u=h.b,c=h.c,d=h.d,p=l*d-u*c>0?t.MathUtils.degRad:-t.MathUtils.degRad,g=this.data.offsetRotation*p,v=this.data.offsetShearY*p,m=this.bones,y=0,T=m.length;y<T;y++){var S=m[y],w=!1;if(0!=i){var b=S.a,C=S.b,A=S.c,E=S.d;(k=Math.atan2(c,l)+g)>t.MathUtils.PI?k-=t.MathUtils.PI2:k<-t.MathUtils.PI&&(k+=t.MathUtils.PI2),k*=i;var M=Math.cos(k),_=Math.sin(k);S.a=M*b-_*A,S.b=M*C-_*E,S.c=_*b+M*A,S.d=_*C+M*E,w=!0}if(0!=r){var R=this.temp;h.localToWorld(R.set(this.data.offsetX,this.data.offsetY)),S.worldX+=R.x*r,S.worldY+=R.y*r,w=!0}if(o>0){var P=(Math.sqrt(l*l+c*c)-1+this.data.offsetScaleX)*o+1;S.a*=P,S.c*=P,P=(Math.sqrt(u*u+d*d)-1+this.data.offsetScaleY)*o+1,S.b*=P,S.d*=P,w=!0}if(a>0){var k;(k=Math.atan2(d,u)-Math.atan2(c,l))>t.MathUtils.PI?k-=t.MathUtils.PI2:k<-t.MathUtils.PI&&(k+=t.MathUtils.PI2);C=S.b,E=S.d;k=Math.atan2(E,C)+(k-t.MathUtils.PI/2+v)*a;P=Math.sqrt(C*C+E*E);S.b=Math.cos(k)*P,S.d=Math.sin(k)*P,w=!0}w&&(S.appliedValid=!1)}},TransformConstraint.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,i=this.translateMix,r=this.scaleMix,o=this.shearMix,a=this.target;a.appliedValid||a.updateAppliedTransform();for(var h=this.bones,l=0,u=h.length;l<u;l++){var c=h[l];c.appliedValid||c.updateAppliedTransform();var d=c.arotation;if(0!=t){var p=a.arotation-d+this.data.offsetRotation;d+=(p-=360*(16384-(16384.499999999996-p/360|0)))*t}var g=c.ax,v=c.ay;0!=i&&(g+=(a.ax-g+this.data.offsetX)*i,v+=(a.ay-v+this.data.offsetY)*i);var m=c.ascaleX,y=c.ascaleY;0!=r&&(m>1e-5&&(m=(m+(a.ascaleX-m+this.data.offsetScaleX)*r)/m),y>1e-5&&(y=(y+(a.ascaleY-y+this.data.offsetScaleY)*r)/y));var T=c.ashearY;if(0!=o){p=a.ashearY-T+this.data.offsetShearY;p-=360*(16384-(16384.499999999996-p/360|0)),c.shearY+=p*o}c.updateWorldTransformWith(g,v,d,m,y,c.ashearX,T)}},TransformConstraint.prototype.applyRelativeLocal=function(){var t=this.rotateMix,i=this.translateMix,r=this.scaleMix,o=this.shearMix,a=this.target;a.appliedValid||a.updateAppliedTransform();for(var h=this.bones,l=0,u=h.length;l<u;l++){var c=h[l];c.appliedValid||c.updateAppliedTransform();var d=c.arotation;0!=t&&(d+=(a.arotation+this.data.offsetRotation)*t);var p=c.ax,g=c.ay;0!=i&&(p+=(a.ax+this.data.offsetX)*i,g+=(a.ay+this.data.offsetY)*i);var v=c.ascaleX,m=c.ascaleY;0!=r&&(v>1e-5&&(v*=(a.ascaleX-1+this.data.offsetScaleX)*r+1),m>1e-5&&(m*=(a.ascaleY-1+this.data.offsetScaleY)*r+1));var y=c.ashearY;0!=o&&(y+=(a.ashearY+this.data.offsetShearY)*o),c.updateWorldTransformWith(p,g,d,v,m,c.ashearX,y)}},TransformConstraint}();t.TransformConstraint=i}(o||(o={})),function(t){var i=function(t){function TransformConstraintData(i){var r=t.call(this,i,0,!1)||this;return r.bones=new Array,r.rotateMix=0,r.translateMix=0,r.scaleMix=0,r.shearMix=0,r.offsetRotation=0,r.offsetX=0,r.offsetY=0,r.offsetScaleX=0,r.offsetScaleY=0,r.offsetShearY=0,r.relative=!1,r.local=!1,r}return a(TransformConstraintData,t),TransformConstraintData}(t.ConstraintData);t.TransformConstraintData=i}(o||(o={})),function(t){var i=function(){function Triangulator(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new t.Pool((function(){return new Array})),this.polygonIndicesPool=new t.Pool((function(){return new Array}))}return Triangulator.prototype.triangulate=function(t){var i=t,r=t.length>>1,o=this.indicesArray;o.length=0;for(var a=0;a<r;a++)o[a]=a;var h=this.isConcaveArray;h.length=0;a=0;for(var l=r;a<l;++a)h[a]=Triangulator.isConcave(a,r,i,o);var u=this.triangles;for(u.length=0;r>3;){for(var c=r-1,d=(a=0,1);;){t:if(!h[a]){for(var p=o[c]<<1,g=o[a]<<1,v=o[d]<<1,m=i[p],y=i[p+1],T=i[g],S=i[g+1],w=i[v],b=i[v+1],C=(d+1)%r;C!=c;C=(C+1)%r)if(h[C]){var A=o[C]<<1,E=i[A],M=i[A+1];if(Triangulator.positiveArea(w,b,m,y,E,M)&&Triangulator.positiveArea(m,y,T,S,E,M)&&Triangulator.positiveArea(T,S,w,b,E,M))break t}break}if(0==d){do{if(!h[a])break;a--}while(a>0);break}c=a,a=d,d=(d+1)%r}u.push(o[(r+a-1)%r]),u.push(o[a]),u.push(o[(a+1)%r]),o.splice(a,1),h.splice(a,1);var _=(--r+a-1)%r,R=a==r?0:a;h[_]=Triangulator.isConcave(_,r,i,o),h[R]=Triangulator.isConcave(R,r,i,o)}return 3==r&&(u.push(o[2]),u.push(o[0]),u.push(o[1])),u},Triangulator.prototype.decompose=function(t,i){var r=t,o=this.convexPolygons;this.polygonPool.freeAll(o),o.length=0;var a=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(a),a.length=0;var h=this.polygonIndicesPool.obtain();h.length=0;var l=this.polygonPool.obtain();l.length=0;for(var u=-1,c=0,d=0,p=i.length;d<p;d+=3){var g=i[d]<<1,v=i[d+1]<<1,m=i[d+2]<<1,y=r[g],T=r[g+1],S=r[v],w=r[v+1],b=r[m],C=r[m+1],A=!1;if(u==g){var E=l.length-4,M=Triangulator.winding(l[E],l[E+1],l[E+2],l[E+3],b,C),_=Triangulator.winding(b,C,l[0],l[1],l[2],l[3]);M==c&&_==c&&(l.push(b),l.push(C),h.push(m),A=!0)}A||(l.length>0?(o.push(l),a.push(h)):(this.polygonPool.free(l),this.polygonIndicesPool.free(h)),(l=this.polygonPool.obtain()).length=0,l.push(y),l.push(T),l.push(S),l.push(w),l.push(b),l.push(C),(h=this.polygonIndicesPool.obtain()).length=0,h.push(g),h.push(v),h.push(m),c=Triangulator.winding(y,T,S,w,b,C),u=g)}l.length>0&&(o.push(l),a.push(h));for(d=0,p=o.length;d<p;d++)if(0!=(h=a[d]).length)for(var R=h[0],P=h[h.length-1],k=(l=o[d])[E=l.length-4],O=l[E+1],L=l[E+2],D=l[E+3],I=l[0],B=l[1],N=l[2],G=l[3],Y=Triangulator.winding(k,O,L,D,I,B),U=0;U<p;U++)if(U!=d){var X=a[U];if(3==X.length){var V=X[0],z=X[1],W=X[2],H=o[U];b=H[H.length-2],C=H[H.length-1];if(V==R&&z==P){M=Triangulator.winding(k,O,L,D,b,C),_=Triangulator.winding(b,C,I,B,N,G);M==Y&&_==Y&&(H.length=0,X.length=0,l.push(b),l.push(C),h.push(W),k=L,O=D,L=b,D=C,U=0)}}}for(d=o.length-1;d>=0;d--)0==(l=o[d]).length&&(o.splice(d,1),this.polygonPool.free(l),h=a[d],a.splice(d,1),this.polygonIndicesPool.free(h));return o},Triangulator.isConcave=function(t,i,r,o){var a=o[(i+t-1)%i]<<1,h=o[t]<<1,l=o[(t+1)%i]<<1;return!this.positiveArea(r[a],r[a+1],r[h],r[h+1],r[l],r[l+1])},Triangulator.positiveArea=function(t,i,r,o,a,h){return t*(h-o)+r*(i-h)+a*(o-i)>=0},Triangulator.winding=function(t,i,r,o,a,h){var l=r-t,u=o-i;return a*u-h*l+l*i-t*u>=0?1:-1},Triangulator}();t.Triangulator=i}(o||(o={})),function(t){var i=function(){function IntSet(){this.array=new Array}return IntSet.prototype.add=function(t){var i=this.contains(t);return this.array[0|t]=0|t,!i},IntSet.prototype.contains=function(t){return null!=this.array[0|t]},IntSet.prototype.remove=function(t){this.array[0|t]=void 0},IntSet.prototype.clear=function(){this.array.length=0},IntSet}();t.IntSet=i;var r=function(){function Color(t,i,r,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=0),this.r=t,this.g=i,this.b=r,this.a=o}return Color.prototype.set=function(t,i,r,o){return this.r=t,this.g=i,this.b=r,this.a=o,this.clamp(),this},Color.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},Color.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255,this},Color.prototype.add=function(t,i,r,o){return this.r+=t,this.g+=i,this.b+=r,this.a+=o,this.clamp(),this},Color.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},Color.rgba8888ToColor=function(t,i){t.r=((4278190080&i)>>>24)/255,t.g=((16711680&i)>>>16)/255,t.b=((65280&i)>>>8)/255,t.a=(255&i)/255},Color.rgb888ToColor=function(t,i){t.r=((16711680&i)>>>16)/255,t.g=((65280&i)>>>8)/255,t.b=(255&i)/255},Color.WHITE=new Color(1,1,1,1),Color.RED=new Color(1,0,0,1),Color.GREEN=new Color(0,1,0,1),Color.BLUE=new Color(0,0,1,1),Color.MAGENTA=new Color(1,0,1,1),Color}();t.Color=r;var o=function(){function MathUtils(){}return MathUtils.clamp=function(t,i,r){return t<i?i:t>r?r:t},MathUtils.cosDeg=function(t){return Math.cos(t*MathUtils.degRad)},MathUtils.sinDeg=function(t){return Math.sin(t*MathUtils.degRad)},MathUtils.signum=function(t){return t>0?1:t<0?-1:0},MathUtils.toInt=function(t){return t>0?Math.floor(t):Math.ceil(t)},MathUtils.cbrt=function(t){var i=Math.pow(Math.abs(t),1/3);return t<0?-i:i},MathUtils.randomTriangular=function(t,i){return MathUtils.randomTriangularWith(t,i,.5*(t+i))},MathUtils.randomTriangularWith=function(t,i,r){var o=Math.random(),a=i-t;return o<=(r-t)/a?t+Math.sqrt(o*a*(r-t)):i-Math.sqrt((1-o)*a*(i-r))},MathUtils.PI=3.1415927,MathUtils.PI2=2*MathUtils.PI,MathUtils.radiansToDegrees=180/MathUtils.PI,MathUtils.radDeg=MathUtils.radiansToDegrees,MathUtils.degreesToRadians=MathUtils.PI/180,MathUtils.degRad=MathUtils.degreesToRadians,MathUtils}();t.MathUtils=o;var h=function(){function Interpolation(){}return Interpolation.prototype.apply=function(t,i,r){return t+(i-t)*this.applyInternal(r)},Interpolation}();t.Interpolation=h;var l=function(t){function Pow(i){var r=t.call(this)||this;return r.power=2,r.power=i,r}return a(Pow,t),Pow.prototype.applyInternal=function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1},Pow}(h);t.Pow=l;var u=function(t){function PowOut(i){return t.call(this,i)||this}return a(PowOut,t),PowOut.prototype.applyInternal=function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1},PowOut}(l);t.PowOut=u;var c=function(){function Utils(){}return Utils.arrayCopy=function(t,i,r,o,a){for(var h=i,l=o;h<i+a;h++,l++)r[l]=t[h]},Utils.setArraySize=function(t,i,r){void 0===r&&(r=0);var o=t.length;if(o==i)return t;if(t.length=i,o<i)for(var a=o;a<i;a++)t[a]=r;return t},Utils.ensureArrayCapacity=function(t,i,r){return void 0===r&&(r=0),t.length>=i?t:Utils.setArraySize(t,i,r)},Utils.newArray=function(t,i){for(var r=new Array(t),o=0;o<t;o++)r[o]=i;return r},Utils.newFloatArray=function(t){if(Utils.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);for(var i=new Array(t),r=0;r<i.length;r++)i[r]=0;return i},Utils.newShortArray=function(t){if(Utils.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);for(var i=new Array(t),r=0;r<i.length;r++)i[r]=0;return i},Utils.toFloatArray=function(t){return Utils.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t},Utils.toSinglePrecision=function(t){return Utils.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t},Utils.webkit602BugfixHelper=function(t,i){},Utils.contains=function(t,i,r){for(var o=0;o<t.length;o++)if(t[o]==i)return!0;return!1},Utils.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,Utils}();t.Utils=c;var d=function(){function DebugUtils(){}return DebugUtils.logBones=function(t){for(var i=0;i<t.bones.length;i++){var r=t.bones[i];console.log(r.data.name+", "+r.a+", "+r.b+", "+r.c+", "+r.d+", "+r.worldX+", "+r.worldY)}},DebugUtils}();t.DebugUtils=d;var p=function(){function Pool(t){this.items=new Array,this.instantiator=t}return Pool.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},Pool.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},Pool.prototype.freeAll=function(t){for(var i=0;i<t.length;i++)this.free(t[i])},Pool.prototype.clear=function(){this.items.length=0},Pool}();t.Pool=p;var g=function(){function Vector2(t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.x=t,this.y=i}return Vector2.prototype.set=function(t,i){return this.x=t,this.y=i,this},Vector2.prototype.length=function(){var t=this.x,i=this.y;return Math.sqrt(t*t+i*i)},Vector2.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},Vector2}();t.Vector2=g;var v=function(){function TimeKeeper(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return TimeKeeper.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},TimeKeeper}();t.TimeKeeper=v;var m=function(){function WindowedMean(t){void 0===t&&(t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}return WindowedMean.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},WindowedMean.prototype.addValue=function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},WindowedMean.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,i=0;i<this.values.length;i++)t+=this.values[i];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0},WindowedMean}();t.WindowedMean=m}(o||(o={})),Math.fround||(Math.fround=(r=new Float32Array(1),function(t){return r[0]=t,r[0]})),function(t){var i=function i(t){if(null==t)throw new Error("name cannot be null.");this.name=t};t.Attachment=i;var r=function(i){function VertexAttachment(t){var r=i.call(this,t)||this;return r.id=(65535&VertexAttachment.nextID++)<<11,r.worldVerticesLength=0,r.deformAttachment=r,r}return a(VertexAttachment,i),VertexAttachment.prototype.computeWorldVertices=function(t,i,r,o,a,h){r=a+(r>>1)*h;var l=t.bone.skeleton,u=t.deform,c=this.vertices,d=this.bones;if(null!=d){for(var p=0,g=0,v=0;v<i;v+=2){p+=(S=d[p])+1,g+=S}var m=l.bones;if(0==u.length)for(L=a,R=3*g;L<r;L+=h){var y=0,T=0,S=d[p++];for(S+=p;p<S;p++,R+=3){A=m[d[p]],D=c[R],I=c[R+1];var w=c[R+2];y+=(D*A.a+I*A.b+A.worldX)*w,T+=(D*A.c+I*A.d+A.worldY)*w}o[L]=y,o[L+1]=T}else for(var b=u,C=(L=a,R=3*g,g<<1);L<r;L+=h){y=0,T=0,S=d[p++];for(S+=p;p<S;p++,R+=3,C+=2){A=m[d[p]],D=c[R]+b[C],I=c[R+1]+b[C+1],w=c[R+2];y+=(D*A.a+I*A.b+A.worldX)*w,T+=(D*A.c+I*A.d+A.worldY)*w}o[L]=y,o[L+1]=T}}else{u.length>0&&(c=u);for(var A,E=(A=t.bone).worldX,M=A.worldY,_=A.a,R=A.b,P=A.c,k=A.d,O=i,L=a;L<r;O+=2,L+=h){var D=c[O],I=c[O+1];o[L]=D*_+I*R+E,o[L+1]=D*P+I*k+M}}},VertexAttachment.prototype.copyTo=function(i){null!=this.bones?(i.bones=new Array(this.bones.length),t.Utils.arrayCopy(this.bones,0,i.bones,0,this.bones.length)):i.bones=null,null!=this.vertices?(i.vertices=t.Utils.newFloatArray(this.vertices.length),t.Utils.arrayCopy(this.vertices,0,i.vertices,0,this.vertices.length)):i.vertices=null,i.worldVerticesLength=this.worldVerticesLength,i.deformAttachment=this.deformAttachment},VertexAttachment.nextID=0,VertexAttachment}(i);t.VertexAttachment=r}(o||(o={})),function(t){var i;(i=t.AttachmentType||(t.AttachmentType={}))[i.Region=0]="Region",i[i.BoundingBox=1]="BoundingBox",i[i.Mesh=2]="Mesh",i[i.LinkedMesh=3]="LinkedMesh",i[i.Path=4]="Path",i[i.Point=5]="Point",i[i.Clipping=6]="Clipping"}(o||(o={})),function(t){var i=function(i){function BoundingBoxAttachment(r){var o=i.call(this,r)||this;return o.color=new t.Color(1,1,1,1),o}return a(BoundingBoxAttachment,i),BoundingBoxAttachment.prototype.copy=function(){var t=new BoundingBoxAttachment(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t},BoundingBoxAttachment}(t.VertexAttachment);t.BoundingBoxAttachment=i}(o||(o={})),function(t){var i=function(i){function ClippingAttachment(r){var o=i.call(this,r)||this;return o.color=new t.Color(.2275,.2275,.8078,1),o}return a(ClippingAttachment,i),ClippingAttachment.prototype.copy=function(){var t=new ClippingAttachment(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t},ClippingAttachment}(t.VertexAttachment);t.ClippingAttachment=i}(o||(o={})),function(t){var i=function(i){function MeshAttachment(r){var o=i.call(this,r)||this;return o.color=new t.Color(1,1,1,1),o.tempColor=new t.Color(0,0,0,0),o}return a(MeshAttachment,i),MeshAttachment.prototype.updateUVs=function(){var i=this.regionUVs;null!=this.uvs&&this.uvs.length==i.length||(this.uvs=t.Utils.newFloatArray(i.length));var r=this.uvs,o=this.uvs.length,a=this.region.u,h=this.region.v,l=0,u=0;if(this.region instanceof t.TextureAtlasRegion){var c=this.region,d=c.texture.getImage().width,p=c.texture.getImage().height;switch(c.degrees){case 90:a-=(c.originalHeight-c.offsetY-c.height)/d,h-=(c.originalWidth-c.offsetX-c.width)/p,l=c.originalHeight/d,u=c.originalWidth/p;for(var g=0;g<o;g+=2)r[g]=a+i[g+1]*l,r[g+1]=h+(1-i[g])*u;return;case 180:a-=(c.originalWidth-c.offsetX-c.width)/d,h-=c.offsetY/p,l=c.originalWidth/d,u=c.originalHeight/p;for(g=0;g<o;g+=2)r[g]=a+(1-i[g])*l,r[g+1]=h+(1-i[g+1])*u;return;case 270:a-=c.offsetY/d,h-=c.offsetX/p,l=c.originalHeight/d,u=c.originalWidth/p;for(g=0;g<o;g+=2)r[g]=a+(1-i[g+1])*l,r[g+1]=h+i[g]*u;return}a-=c.offsetX/d,h-=(c.originalHeight-c.offsetY-c.height)/p,l=c.originalWidth/d,u=c.originalHeight/p}else null==this.region?(a=h=0,l=u=1):(l=this.region.u2-a,u=this.region.v2-h);for(g=0;g<o;g+=2)r[g]=a+i[g]*l,r[g+1]=h+i[g+1]*u},MeshAttachment.prototype.getParentMesh=function(){return this.parentMesh},MeshAttachment.prototype.setParentMesh=function(t){this.parentMesh=t,null!=t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},MeshAttachment.prototype.copy=function(){if(null!=this.parentMesh)return this.newLinkedMesh();var i=new MeshAttachment(this.name);return i.region=this.region,i.path=this.path,i.color.setFromColor(this.color),this.copyTo(i),i.regionUVs=new Array(this.regionUVs.length),t.Utils.arrayCopy(this.regionUVs,0,i.regionUVs,0,this.regionUVs.length),i.uvs=new Array(this.uvs.length),t.Utils.arrayCopy(this.uvs,0,i.uvs,0,this.uvs.length),i.triangles=new Array(this.triangles.length),t.Utils.arrayCopy(this.triangles,0,i.triangles,0,this.triangles.length),i.hullLength=this.hullLength,null!=this.edges&&(i.edges=new Array(this.edges.length),t.Utils.arrayCopy(this.edges,0,i.edges,0,this.edges.length)),i.width=this.width,i.height=this.height,i},MeshAttachment.prototype.newLinkedMesh=function(){var t=new MeshAttachment(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(null!=this.parentMesh?this.parentMesh:this),t.updateUVs(),t},MeshAttachment}(t.VertexAttachment);t.MeshAttachment=i}(o||(o={})),function(t){var i=function(i){function PathAttachment(r){var o=i.call(this,r)||this;return o.closed=!1,o.constantSpeed=!1,o.color=new t.Color(1,1,1,1),o}return a(PathAttachment,i),PathAttachment.prototype.copy=function(){var i=new PathAttachment(this.name);return this.copyTo(i),i.lengths=new Array(this.lengths.length),t.Utils.arrayCopy(this.lengths,0,i.lengths,0,this.lengths.length),i.closed=closed,i.constantSpeed=this.constantSpeed,i.color.setFromColor(this.color),i},PathAttachment}(t.VertexAttachment);t.PathAttachment=i}(o||(o={})),function(t){var i=function(i){function PointAttachment(r){var o=i.call(this,r)||this;return o.color=new t.Color(.38,.94,0,1),o}return a(PointAttachment,i),PointAttachment.prototype.computeWorldPosition=function(t,i){return i.x=this.x*t.a+this.y*t.b+t.worldX,i.y=this.x*t.c+this.y*t.d+t.worldY,i},PointAttachment.prototype.computeWorldRotation=function(i){var r=t.MathUtils.cosDeg(this.rotation),o=t.MathUtils.sinDeg(this.rotation),a=r*i.a+o*i.b,h=r*i.c+o*i.d;return Math.atan2(h,a)*t.MathUtils.radDeg},PointAttachment.prototype.copy=function(){var t=new PointAttachment(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t},PointAttachment}(t.VertexAttachment);t.PointAttachment=i}(o||(o={})),function(t){var i=function(i){function RegionAttachment(r){var o=i.call(this,r)||this;return o.x=0,o.y=0,o.scaleX=1,o.scaleY=1,o.rotation=0,o.width=0,o.height=0,o.color=new t.Color(1,1,1,1),o.offset=t.Utils.newFloatArray(8),o.uvs=t.Utils.newFloatArray(8),o.tempColor=new t.Color(1,1,1,1),o}return a(RegionAttachment,i),RegionAttachment.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,i=this.height/this.region.originalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.region.offsetX*t,o=-this.height/2*this.scaleY+this.region.offsetY*i,a=r+this.region.width*t,h=o+this.region.height*i,l=this.rotation*Math.PI/180,u=Math.cos(l),c=Math.sin(l),d=r*u+this.x,p=r*c,g=o*u+this.y,v=o*c,m=a*u+this.x,y=a*c,T=h*u+this.y,S=h*c,w=this.offset;w[RegionAttachment.OX1]=d-v,w[RegionAttachment.OY1]=g+p,w[RegionAttachment.OX2]=d-S,w[RegionAttachment.OY2]=T+p,w[RegionAttachment.OX3]=m-S,w[RegionAttachment.OY3]=T+y,w[RegionAttachment.OX4]=m-v,w[RegionAttachment.OY4]=g+y},RegionAttachment.prototype.setRegion=function(t){this.region=t;var i=this.uvs;t.rotate?(i[2]=t.u,i[3]=t.v2,i[4]=t.u,i[5]=t.v,i[6]=t.u2,i[7]=t.v,i[0]=t.u2,i[1]=t.v2):(i[0]=t.u,i[1]=t.v2,i[2]=t.u,i[3]=t.v,i[4]=t.u2,i[5]=t.v,i[6]=t.u2,i[7]=t.v2)},RegionAttachment.prototype.computeWorldVertices=function(t,i,r,o){var a=this.offset,h=t.worldX,l=t.worldY,u=t.a,c=t.b,d=t.c,p=t.d,g=0,v=0;g=a[RegionAttachment.OX1],v=a[RegionAttachment.OY1],i[r]=g*u+v*c+h,i[r+1]=g*d+v*p+l,r+=o,g=a[RegionAttachment.OX2],v=a[RegionAttachment.OY2],i[r]=g*u+v*c+h,i[r+1]=g*d+v*p+l,r+=o,g=a[RegionAttachment.OX3],v=a[RegionAttachment.OY3],i[r]=g*u+v*c+h,i[r+1]=g*d+v*p+l,r+=o,g=a[RegionAttachment.OX4],v=a[RegionAttachment.OY4],i[r]=g*u+v*c+h,i[r+1]=g*d+v*p+l},RegionAttachment.prototype.copy=function(){var i=new RegionAttachment(this.name);return i.region=this.region,i.rendererObject=this.rendererObject,i.path=this.path,i.x=this.x,i.y=this.y,i.scaleX=this.scaleX,i.scaleY=this.scaleY,i.rotation=this.rotation,i.width=this.width,i.height=this.height,t.Utils.arrayCopy(this.uvs,0,i.uvs,0,8),t.Utils.arrayCopy(this.offset,0,i.offset,0,8),i.color.setFromColor(this.color),i},RegionAttachment.OX1=0,RegionAttachment.OY1=1,RegionAttachment.OX2=2,RegionAttachment.OY2=3,RegionAttachment.OX3=4,RegionAttachment.OY3=5,RegionAttachment.OX4=6,RegionAttachment.OY4=7,RegionAttachment.X1=0,RegionAttachment.Y1=1,RegionAttachment.C1R=2,RegionAttachment.C1G=3,RegionAttachment.C1B=4,RegionAttachment.C1A=5,RegionAttachment.U1=6,RegionAttachment.V1=7,RegionAttachment.X2=8,RegionAttachment.Y2=9,RegionAttachment.C2R=10,RegionAttachment.C2G=11,RegionAttachment.C2B=12,RegionAttachment.C2A=13,RegionAttachment.U2=14,RegionAttachment.V2=15,RegionAttachment.X3=16,RegionAttachment.Y3=17,RegionAttachment.C3R=18,RegionAttachment.C3G=19,RegionAttachment.C3B=20,RegionAttachment.C3A=21,RegionAttachment.U3=22,RegionAttachment.V3=23,RegionAttachment.X4=24,RegionAttachment.Y4=25,RegionAttachment.C4R=26,RegionAttachment.C4G=27,RegionAttachment.C4B=28,RegionAttachment.C4A=29,RegionAttachment.U4=30,RegionAttachment.V4=31,RegionAttachment}(t.Attachment);t.RegionAttachment=i}(o||(o={})),function(t){var i=function(){function JitterEffect(t,i){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=i}return JitterEffect.prototype.begin=function(t){},JitterEffect.prototype.transform=function(i,r,o,a){i.x+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY),i.y+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},JitterEffect.prototype.end=function(){},JitterEffect}();t.JitterEffect=i}(o||(o={})),function(t){var i=function(){function SwirlEffect(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return SwirlEffect.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},SwirlEffect.prototype.transform=function(i,r,o,a){var h=this.angle*t.MathUtils.degreesToRadians,l=i.x-this.worldX,u=i.y-this.worldY,c=Math.sqrt(l*l+u*u);if(c<this.radius){var d=SwirlEffect.interpolation.apply(0,h,(this.radius-c)/this.radius),p=Math.cos(d),g=Math.sin(d);i.x=p*l-g*u+this.worldX,i.y=g*l+p*u+this.worldY}},SwirlEffect.prototype.end=function(){},SwirlEffect.interpolation=new t.PowOut(2),SwirlEffect}();t.SwirlEffect=i}(o||(o={})),function(t){var i,r;i=t.canvas||(t.canvas={}),r=function(i){function AssetManager(r){return void 0===r&&(r=""),i.call(this,(function(i){return new t.canvas.CanvasTexture(i)}),r)||this}return a(AssetManager,i),AssetManager}(t.AssetManager),i.AssetManager=r}(o||(o={})),function(t){var i,r;i=t.canvas||(t.canvas={}),r=function(t){function CanvasTexture(i){return t.call(this,i)||this}return a(CanvasTexture,t),CanvasTexture.prototype.setFilters=function(t,i){},CanvasTexture.prototype.setWraps=function(t,i){},CanvasTexture.prototype.dispose=function(){},CanvasTexture}(t.Texture),i.CanvasTexture=r}(o||(o={})),function(t){var i,r;i=t.canvas||(t.canvas={}),r=function(){function SkeletonRenderer(i){this.triangleRendering=!1,this.debugRendering=!1,this.vertices=t.Utils.newFloatArray(8192),this.tempColor=new t.Color,this.ctx=i}return SkeletonRenderer.prototype.draw=function(t){this.triangleRendering?this.drawTriangles(t):this.drawImages(t)},SkeletonRenderer.prototype.drawImages=function(i){var r=this.ctx,o=i.drawOrder;this.debugRendering&&(r.strokeStyle="green"),r.save();for(var a=0,h=o.length;a<h;a++){var l=o[a];if(l.bone.active){var u=l.getAttachment(),c=null,d=null,p=null;if(u instanceof t.RegionAttachment){p=(d=(c=u).region).texture.getImage();var g=l.bone.skeleton.color,v=l.color,m=c.color,y=g.a*v.a*m.a,T=this.tempColor;T.set(g.r*v.r*m.r,g.g*v.g*m.g,g.b*v.b*m.b,y);var S=u,w=l.bone,b=d.width,C=d.height;r.save(),r.transform(w.a,w.c,w.b,w.d,w.worldX,w.worldY),r.translate(u.offset[0],u.offset[1]),r.rotate(u.rotation*Math.PI/180);var A=S.width/b;if(r.scale(A*u.scaleX,A*u.scaleY),r.translate(b/2,C/2),u.region.rotate){var E=b;b=C,C=E,r.rotate(-Math.PI/2)}r.scale(1,-1),r.translate(-b/2,-C/2),1==T.r&&1==T.g&&1==T.b&&1==T.a||(r.globalAlpha=T.a),r.drawImage(p,d.x,d.y,b,C,0,0,b,C),this.debugRendering&&r.strokeRect(0,0,b,C),r.restore()}}}r.restore()},SkeletonRenderer.prototype.drawTriangles=function(i){for(var r=this.vertices,o=null,a=i.drawOrder,h=0,l=a.length;h<l;h++){var u=a[h],c=u.getAttachment(),d=null;if(c instanceof t.RegionAttachment){var p=c;r=this.computeRegionVertices(u,p,!1),o=SkeletonRenderer.QUAD_TRIANGLES,d=p.region.texture.getImage()}else{if(!(c instanceof t.MeshAttachment))continue;var g=c;r=this.computeMeshVertices(u,g,!1),o=g.triangles,d=g.region.renderObject.texture.getImage()}if(null!=d){u.data.blendMode;var v=u.bone.skeleton.color,m=u.color,y=c.color,T=v.a*m.a*y.a,S=this.tempColor;S.set(v.r*m.r*y.r,v.g*m.g*y.g,v.b*m.b*y.b,T);var w=this.ctx;1==S.r&&1==S.g&&1==S.b&&1==S.a||(w.globalAlpha=S.a);for(var b=0;b<o.length;b+=3){var C=8*o[b],A=8*o[b+1],E=8*o[b+2],M=r[C],_=r[C+1],R=r[C+6],P=r[C+7],k=r[A],O=r[A+1],L=r[A+6],D=r[A+7],I=r[E],B=r[E+1],N=r[E+6],G=r[E+7];this.drawTriangle(d,M,_,R,P,k,O,L,D,I,B,N,G),this.debugRendering&&(w.strokeStyle="green",w.beginPath(),w.moveTo(M,_),w.lineTo(k,O),w.lineTo(I,B),w.lineTo(M,_),w.stroke())}}}this.ctx.globalAlpha=1},SkeletonRenderer.prototype.drawTriangle=function(t,i,r,o,a,h,l,u,c,d,p,g,v){var m=this.ctx;o*=t.width,a*=t.height,u*=t.width,c*=t.height,g*=t.width,v*=t.height,m.beginPath(),m.moveTo(i,r),m.lineTo(h,l),m.lineTo(d,p),m.closePath();var y=1/((u-=o)*(v-=a)-(g-=o)*(c-=a)),T=(v*(h-=i)-c*(d-=i))*y,S=(v*(l-=r)-c*(p-=r))*y,w=(u*d-g*h)*y,b=(u*p-g*l)*y,C=i-T*o-w*a,A=r-S*o-b*a;m.save(),m.transform(T,S,w,b,C,A),m.clip(),m.drawImage(t,0,0),m.restore()},SkeletonRenderer.prototype.computeRegionVertices=function(i,r,o){var a=i.bone.skeleton.color,h=i.color,l=r.color,u=a.a*h.a*l.a,c=o?u:1,d=this.tempColor;d.set(a.r*h.r*l.r*c,a.g*h.g*l.g*c,a.b*h.b*l.b*c,u),r.computeWorldVertices(i.bone,this.vertices,0,SkeletonRenderer.VERTEX_SIZE);var p=this.vertices,g=r.uvs;return p[t.RegionAttachment.C1R]=d.r,p[t.RegionAttachment.C1G]=d.g,p[t.RegionAttachment.C1B]=d.b,p[t.RegionAttachment.C1A]=d.a,p[t.RegionAttachment.U1]=g[0],p[t.RegionAttachment.V1]=g[1],p[t.RegionAttachment.C2R]=d.r,p[t.RegionAttachment.C2G]=d.g,p[t.RegionAttachment.C2B]=d.b,p[t.RegionAttachment.C2A]=d.a,p[t.RegionAttachment.U2]=g[2],p[t.RegionAttachment.V2]=g[3],p[t.RegionAttachment.C3R]=d.r,p[t.RegionAttachment.C3G]=d.g,p[t.RegionAttachment.C3B]=d.b,p[t.RegionAttachment.C3A]=d.a,p[t.RegionAttachment.U3]=g[4],p[t.RegionAttachment.V3]=g[5],p[t.RegionAttachment.C4R]=d.r,p[t.RegionAttachment.C4G]=d.g,p[t.RegionAttachment.C4B]=d.b,p[t.RegionAttachment.C4A]=d.a,p[t.RegionAttachment.U4]=g[6],p[t.RegionAttachment.V4]=g[7],p},SkeletonRenderer.prototype.computeMeshVertices=function(i,r,o){var a=i.bone.skeleton.color,h=i.color,l=r.color,u=a.a*h.a*l.a,c=o?u:1,d=this.tempColor;d.set(a.r*h.r*l.r*c,a.g*h.g*l.g*c,a.b*h.b*l.b*c,u);var p=r.worldVerticesLength/2;this.vertices.length<r.worldVerticesLength&&(this.vertices=t.Utils.newFloatArray(r.worldVerticesLength));var g=this.vertices;r.computeWorldVertices(i,0,r.worldVerticesLength,g,0,SkeletonRenderer.VERTEX_SIZE);for(var v=r.uvs,m=0,y=p,T=0,S=2;m<y;m++)g[S++]=d.r,g[S++]=d.g,g[S++]=d.b,g[S++]=d.a,g[S++]=v[T++],g[S++]=v[T++],S+=2;return g},SkeletonRenderer.QUAD_TRIANGLES=[0,1,2,2,3,0],SkeletonRenderer.VERTEX_SIZE=8,SkeletonRenderer}(),i.SkeletonRenderer=r}(o||(o={})),function(t){var i,r;i=t.webgl||(t.webgl={}),r=function(i){function AssetManager(r,o){return void 0===o&&(o=""),i.call(this,(function(i){return new t.webgl.GLTexture(r,i)}),o)||this}return a(AssetManager,i),AssetManager}(t.AssetManager),i.AssetManager=r}(o||(o={})),function(t){var i,r;i=t.webgl||(t.webgl={}),r=function(){function OrthoCamera(t,r){this.position=new i.Vector3(0,0,0),this.direction=new i.Vector3(0,0,-1),this.up=new i.Vector3(0,1,0),this.near=0,this.far=100,this.zoom=1,this.viewportWidth=0,this.viewportHeight=0,this.projectionView=new i.Matrix4,this.inverseProjectionView=new i.Matrix4,this.projection=new i.Matrix4,this.view=new i.Matrix4,this.tmp=new i.Vector3,this.viewportWidth=t,this.viewportHeight=r,this.update()}return OrthoCamera.prototype.update=function(){var t=this.projection,i=this.view,r=this.projectionView,o=this.inverseProjectionView,a=this.zoom,h=this.viewportWidth,l=this.viewportHeight;t.ortho(a*(-h/2),a*(h/2),a*(-l/2),a*(l/2),this.near,this.far),i.lookAt(this.position,this.direction,this.up),r.set(t.values),r.multiply(i),o.set(r.values).invert()},OrthoCamera.prototype.screenToWorld=function(t,i,r){var o=t.x,a=r-t.y-1,h=this.tmp;return h.x=2*o/i-1,h.y=2*a/r-1,h.z=2*t.z-1,h.project(this.inverseProjectionView),t.set(h.x,h.y,h.z),t},OrthoCamera.prototype.setViewport=function(t,i){this.viewportWidth=t,this.viewportHeight=i},OrthoCamera}(),i.OrthoCamera=r}(o||(o={})),function(t){var i,r;i=t.webgl||(t.webgl={}),r=function(r){function GLTexture(t,o,a){void 0===a&&(a=!1);var h=r.call(this,o)||this;return h.texture=null,h.boundUnit=0,h.useMipMaps=!1,h.context=t instanceof i.ManagedWebGLRenderingContext?t:new i.ManagedWebGLRenderingContext(t),h.useMipMaps=a,h.restore(),h.context.addRestorable(h),h}return a(GLTexture,r),GLTexture.prototype.setFilters=function(t,i){var r=this.context.gl;this.bind(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,GLTexture.validateMagFilter(i))},GLTexture.validateMagFilter=function(i){switch(i){case t.TextureFilter.MipMap:case t.TextureFilter.MipMapLinearLinear:case t.TextureFilter.MipMapLinearNearest:case t.TextureFilter.MipMapNearestLinear:case t.TextureFilter.MipMapNearestNearest:return t.TextureFilter.Linear;default:return i}},GLTexture.prototype.setWraps=function(t,i){var r=this.context.gl;this.bind(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,i)},GLTexture.prototype.update=function(t){var i=this.context.gl;this.texture||(this.texture=this.context.gl.createTexture()),this.bind(),GLTexture.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL&&i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,this._image),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,t?i.LINEAR_MIPMAP_LINEAR:i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),t&&i.generateMipmap(i.TEXTURE_2D)},GLTexture.prototype.restore=function(){this.texture=null,this.update(this.useMipMaps)},GLTexture.prototype.bind=function(t){void 0===t&&(t=0);var i=this.context.gl;this.boundUnit=t,i.activeTexture(i.TEXTURE0+t),i.bindTexture(i.TEXTURE_2D,this.texture)},GLTexture.prototype.unbind=function(){var t=this.context.gl;t.activeTexture(t.TEXTURE0+this.boundUnit),t.bindTexture(t.TEXTURE_2D,null)},GLTexture.prototype.dispose=function(){this.context.removeRestorable(this),this.context.gl.deleteTexture(this.texture)},GLTexture.DISABLE_UNPACK_PREMULTIPLIED_ALPHA_WEBGL=!1,GLTexture}(t.Texture),i.GLTexture=r}(o||(o={})),function(t){!function(t){t.M00=0,t.M01=4,t.M02=8,t.M03=12,t.M10=1,t.M11=5,t.M12=9,t.M13=13,t.M20=2,t.M21=6,t.M22=10,t.M23=14,t.M30=3,t.M31=7,t.M32=11,t.M33=15;var i=function(){function Matrix4(){this.temp=new Float32Array(16),this.values=new Float32Array(16);var i=this.values;i[t.M00]=1,i[t.M11]=1,i[t.M22]=1,i[t.M33]=1}return Matrix4.prototype.set=function(t){return this.values.set(t),this},Matrix4.prototype.transpose=function(){var i=this.temp,r=this.values;return i[t.M00]=r[t.M00],i[t.M01]=r[t.M10],i[t.M02]=r[t.M20],i[t.M03]=r[t.M30],i[t.M10]=r[t.M01],i[t.M11]=r[t.M11],i[t.M12]=r[t.M21],i[t.M13]=r[t.M31],i[t.M20]=r[t.M02],i[t.M21]=r[t.M12],i[t.M22]=r[t.M22],i[t.M23]=r[t.M32],i[t.M30]=r[t.M03],i[t.M31]=r[t.M13],i[t.M32]=r[t.M23],i[t.M33]=r[t.M33],this.set(i)},Matrix4.prototype.identity=function(){var i=this.values;return i[t.M00]=1,i[t.M01]=0,i[t.M02]=0,i[t.M03]=0,i[t.M10]=0,i[t.M11]=1,i[t.M12]=0,i[t.M13]=0,i[t.M20]=0,i[t.M21]=0,i[t.M22]=1,i[t.M23]=0,i[t.M30]=0,i[t.M31]=0,i[t.M32]=0,i[t.M33]=1,this},Matrix4.prototype.invert=function(){var i=this.values,r=this.temp,o=i[t.M30]*i[t.M21]*i[t.M12]*i[t.M03]-i[t.M20]*i[t.M31]*i[t.M12]*i[t.M03]-i[t.M30]*i[t.M11]*i[t.M22]*i[t.M03]+i[t.M10]*i[t.M31]*i[t.M22]*i[t.M03]+i[t.M20]*i[t.M11]*i[t.M32]*i[t.M03]-i[t.M10]*i[t.M21]*i[t.M32]*i[t.M03]-i[t.M30]*i[t.M21]*i[t.M02]*i[t.M13]+i[t.M20]*i[t.M31]*i[t.M02]*i[t.M13]+i[t.M30]*i[t.M01]*i[t.M22]*i[t.M13]-i[t.M00]*i[t.M31]*i[t.M22]*i[t.M13]-i[t.M20]*i[t.M01]*i[t.M32]*i[t.M13]+i[t.M00]*i[t.M21]*i[t.M32]*i[t.M13]+i[t.M30]*i[t.M11]*i[t.M02]*i[t.M23]-i[t.M10]*i[t.M31]*i[t.M02]*i[t.M23]-i[t.M30]*i[t.M01]*i[t.M12]*i[t.M23]+i[t.M00]*i[t.M31]*i[t.M12]*i[t.M23]+i[t.M10]*i[t.M01]*i[t.M32]*i[t.M23]-i[t.M00]*i[t.M11]*i[t.M32]*i[t.M23]-i[t.M20]*i[t.M11]*i[t.M02]*i[t.M33]+i[t.M10]*i[t.M21]*i[t.M02]*i[t.M33]+i[t.M20]*i[t.M01]*i[t.M12]*i[t.M33]-i[t.M00]*i[t.M21]*i[t.M12]*i[t.M33]-i[t.M10]*i[t.M01]*i[t.M22]*i[t.M33]+i[t.M00]*i[t.M11]*i[t.M22]*i[t.M33];if(0==o)throw new Error("non-invertible matrix");var a=1/o;return r[t.M00]=i[t.M12]*i[t.M23]*i[t.M31]-i[t.M13]*i[t.M22]*i[t.M31]+i[t.M13]*i[t.M21]*i[t.M32]-i[t.M11]*i[t.M23]*i[t.M32]-i[t.M12]*i[t.M21]*i[t.M33]+i[t.M11]*i[t.M22]*i[t.M33],r[t.M01]=i[t.M03]*i[t.M22]*i[t.M31]-i[t.M02]*i[t.M23]*i[t.M31]-i[t.M03]*i[t.M21]*i[t.M32]+i[t.M01]*i[t.M23]*i[t.M32]+i[t.M02]*i[t.M21]*i[t.M33]-i[t.M01]*i[t.M22]*i[t.M33],r[t.M02]=i[t.M02]*i[t.M13]*i[t.M31]-i[t.M03]*i[t.M12]*i[t.M31]+i[t.M03]*i[t.M11]*i[t.M32]-i[t.M01]*i[t.M13]*i[t.M32]-i[t.M02]*i[t.M11]*i[t.M33]+i[t.M01]*i[t.M12]*i[t.M33],r[t.M03]=i[t.M03]*i[t.M12]*i[t.M21]-i[t.M02]*i[t.M13]*i[t.M21]-i[t.M03]*i[t.M11]*i[t.M22]+i[t.M01]*i[t.M13]*i[t.M22]+i[t.M02]*i[t.M11]*i[t.M23]-i[t.M01]*i[t.M12]*i[t.M23],r[t.M10]=i[t.M13]*i[t.M22]*i[t.M30]-i[t.M12]*i[t.M23]*i[t.M30]-i[t.M13]*i[t.M20]*i[t.M32]+i[t.M10]*i[t.M23]*i[t.M32]+i[t.M12]*i[t.M20]*i[t.M33]-i[t.M10]*i[t.M22]*i[t.M33],r[t.M11]=i[t.M02]*i[t.M23]*i[t.M30]-i[t.M03]*i[t.M22]*i[t.M30]+i[t.M03]*i[t.M20]*i[t.M32]-i[t.M00]*i[t.M23]*i[t.M32]-i[t.M02]*i[t.M20]*i[t.M33]+i[t.M00]*i[t.M22]*i[t.M33],r[t.M12]=i[t.M03]*i[t.M12]*i[t.M30]-i[t.M02]*i[t.M13]*i[t.M30]-i[t.M03]*i[t.M10]*i[t.M32]+i[t.M00]*i[t.M13]*i[t.M32]+i[t.M02]*i[t.M10]*i[t.M33]-i[t.M00]*i[t.M12]*i[t.M33],r[t.M13]=i[t.M02]*i[t.M13]*i[t.M20]-i[t.M03]*i[t.M12]*i[t.M20]+i[t.M03]*i[t.M10]*i[t.M22]-i[t.M00]*i[t.M13]*i[t.M22]-i[t.M02]*i[t.M10]*i[t.M23]+i[t.M00]*i[t.M12]*i[t.M23],r[t.M20]=i[t.M11]*i[t.M23]*i[t.M30]-i[t.M13]*i[t.M21]*i[t.M30]+i[t.M13]*i[t.M20]*i[t.M31]-i[t.M10]*i[t.M23]*i[t.M31]-i[t.M11]*i[t.M20]*i[t.M33]+i[t.M10]*i[t.M21]*i[t.M33],r[t.M21]=i[t.M03]*i[t.M21]*i[t.M30]-i[t.M01]*i[t.M23]*i[t.M30]-i[t.M03]*i[t.M20]*i[t.M31]+i[t.M00]*i[t.M23]*i[t.M31]+i[t.M01]*i[t.M20]*i[t.M33]-i[t.M00]*i[t.M21]*i[t.M33],r[t.M22]=i[t.M01]*i[t.M13]*i[t.M30]-i[t.M03]*i[t.M11]*i[t.M30]+i[t.M03]*i[t.M10]*i[t.M31]-i[t.M00]*i[t.M13]*i[t.M31]-i[t.M01]*i[t.M10]*i[t.M33]+i[t.M00]*i[t.M11]*i[t.M33],r[t.M23]=i[t.M03]*i[t.M11]*i[t.M20]-i[t.M01]*i[t.M13]*i[t.M20]-i[t.M03]*i[t.M10]*i[t.M21]+i[t.M00]*i[t.M13]*i[t.M21]+i[t.M01]*i[t.M10]*i[t.M23]-i[t.M00]*i[t.M11]*i[t.M23],r[t.M30]=i[t.M12]*i[t.M21]*i[t.M30]-i[t.M11]*i[t.M22]*i[t.M30]-i[t.M12]*i[t.M20]*i[t.M31]+i[t.M10]*i[t.M22]*i[t.M31]+i[t.M11]*i[t.M20]*i[t.M32]-i[t.M10]*i[t.M21]*i[t.M32],r[t.M31]=i[t.M01]*i[t.M22]*i[t.M30]-i[t.M02]*i[t.M21]*i[t.M30]+i[t.M02]*i[t.M20]*i[t.M31]-i[t.M00]*i[t.M22]*i[t.M31]-i[t.M01]*i[t.M20]*i[t.M32]+i[t.M00]*i[t.M21]*i[t.M32],r[t.M32]=i[t.M02]*i[t.M11]*i[t.M30]-i[t.M01]*i[t.M12]*i[t.M30]-i[t.M02]*i[t.M10]*i[t.M31]+i[t.M00]*i[t.M12]*i[t.M31]+i[t.M01]*i[t.M10]*i[t.M32]-i[t.M00]*i[t.M11]*i[t.M32],r[t.M33]=i[t.M01]*i[t.M12]*i[t.M20]-i[t.M02]*i[t.M11]*i[t.M20]+i[t.M02]*i[t.M10]*i[t.M21]-i[t.M00]*i[t.M12]*i[t.M21]-i[t.M01]*i[t.M10]*i[t.M22]+i[t.M00]*i[t.M11]*i[t.M22],i[t.M00]=r[t.M00]*a,i[t.M01]=r[t.M01]*a,i[t.M02]=r[t.M02]*a,i[t.M03]=r[t.M03]*a,i[t.M10]=r[t.M10]*a,i[t.M11]=r[t.M11]*a,i[t.M12]=r[t.M12]*a,i[t.M13]=r[t.M13]*a,i[t.M20]=r[t.M20]*a,i[t.M21]=r[t.M21]*a,i[t.M22]=r[t.M22]*a,i[t.M23]=r[t.M23]*a,i[t.M30]=r[t.M30]*a,i[t.M31]=r[t.M31]*a,i[t.M32]=r[t.M32]*a,i[t.M33]=r[t.M33]*a,this},Matrix4.prototype.determinant=function(){var i=this.values;return i[t.M30]*i[t.M21]*i[t.M12]*i[t.M03]-i[t.M20]*i[t.M31]*i[t.M12]*i[t.M03]-i[t.M30]*i[t.M11]*i[t.M22]*i[t.M03]+i[t.M10]*i[t.M31]*i[t.M22]*i[t.M03]+i[t.M20]*i[t.M11]*i[t.M32]*i[t.M03]-i[t.M10]*i[t.M21]*i[t.M32]*i[t.M03]-i[t.M30]*i[t.M21]*i[t.M02]*i[t.M13]+i[t.M20]*i[t.M31]*i[t.M02]*i[t.M13]+i[t.M30]*i[t.M01]*i[t.M22]*i[t.M13]-i[t.M00]*i[t.M31]*i[t.M22]*i[t.M13]-i[t.M20]*i[t.M01]*i[t.M32]*i[t.M13]+i[t.M00]*i[t.M21]*i[t.M32]*i[t.M13]+i[t.M30]*i[t.M11]*i[t.M02]*i[t.M23]-i[t.M10]*i[t.M31]*i[t.M02]*i[t.M23]-i[t.M30]*i[t.M01]*i[t.M12]*i[t.M23]+i[t.M00]*i[t.M31]*i[t.M12]*i[t.M23]+i[t.M10]*i[t.M01]*i[t.M32]*i[t.M23]-i[t.M00]*i[t.M11]*i[t.M32]*i[t.M23]-i[t.M20]*i[t.M11]*i[t.M02]*i[t.M33]+i[t.M10]*i[t.M21]*i[t.M02]*i[t.M33]+i[t.M20]*i[t.M01]*i[t.M12]*i[t.M33]-i[t.M00]*i[t.M21]*i[t.M12]*i[t.M33]-i[t.M10]*i[t.M01]*i[t.M22]*i[t.M33]+i[t.M00]*i[t.M11]*i[t.M22]*i[t.M33]},Matrix4.prototype.translate=function(i,r,o){var a=this.values;return a[t.M03]+=i,a[t.M13]+=r,a[t.M23]+=o,this},Matrix4.prototype.copy=function(){return(new Matrix4).set(this.values)},Matrix4.prototype.projection=function(i,r,o,a){this.identity();var h=1/Math.tan(o*(Math.PI/180)/2),l=(r+i)/(i-r),u=2*r*i/(i-r),c=this.values;return c[t.M00]=h/a,c[t.M10]=0,c[t.M20]=0,c[t.M30]=0,c[t.M01]=0,c[t.M11]=h,c[t.M21]=0,c[t.M31]=0,c[t.M02]=0,c[t.M12]=0,c[t.M22]=l,c[t.M32]=-1,c[t.M03]=0,c[t.M13]=0,c[t.M23]=u,c[t.M33]=0,this},Matrix4.prototype.ortho2d=function(t,i,r,o){return this.ortho(t,t+r,i,i+o,0,1)},Matrix4.prototype.ortho=function(i,r,o,a,h,l){this.identity();var u=2/(r-i),c=2/(a-o),d=-2/(l-h),p=-(r+i)/(r-i),g=-(a+o)/(a-o),v=-(l+h)/(l-h),m=this.values;return m[t.M00]=u,m[t.M10]=0,m[t.M20]=0,m[t.M30]=0,m[t.M01]=0,m[t.M11]=c,m[t.M21]=0,m[t.M31]=0,m[t.M02]=0,m[t.M12]=0,m[t.M22]=d,m[t.M32]=0,m[t.M03]=p,m[t.M13]=g,m[t.M23]=v,m[t.M33]=1,this},Matrix4.prototype.multiply=function(i){var r=this.temp,o=this.values,a=i.values;return r[t.M00]=o[t.M00]*a[t.M00]+o[t.M01]*a[t.M10]+o[t.M02]*a[t.M20]+o[t.M03]*a[t.M30],r[t.M01]=o[t.M00]*a[t.M01]+o[t.M01]*a[t.M11]+o[t.M02]*a[t.M21]+o[t.M03]*a[t.M31],r[t.M02]=o[t.M00]*a[t.M02]+o[t.M01]*a[t.M12]+o[t.M02]*a[t.M22]+o[t.M03]*a[t.M32],r[t.M03]=o[t.M00]*a[t.M03]+o[t.M01]*a[t.M13]+o[t.M02]*a[t.M23]+o[t.M03]*a[t.M33],r[t.M10]=o[t.M10]*a[t.M00]+o[t.M11]*a[t.M10]+o[t.M12]*a[t.M20]+o[t.M13]*a[t.M30],r[t.M11]=o[t.M10]*a[t.M01]+o[t.M11]*a[t.M11]+o[t.M12]*a[t.M21]+o[t.M13]*a[t.M31],r[t.M12]=o[t.M10]*a[t.M02]+o[t.M11]*a[t.M12]+o[t.M12]*a[t.M22]+o[t.M13]*a[t.M32],r[t.M13]=o[t.M10]*a[t.M03]+o[t.M11]*a[t.M13]+o[t.M12]*a[t.M23]+o[t.M13]*a[t.M33],r[t.M20]=o[t.M20]*a[t.M00]+o[t.M21]*a[t.M10]+o[t.M22]*a[t.M20]+o[t.M23]*a[t.M30],r[t.M21]=o[t.M20]*a[t.M01]+o[t.M21]*a[t.M11]+o[t.M22]*a[t.M21]+o[t.M23]*a[t.M31],r[t.M22]=o[t.M20]*a[t.M02]+o[t.M21]*a[t.M12]+o[t.M22]*a[t.M22]+o[t.M23]*a[t.M32],r[t.M23]=o[t.M20]*a[t.M03]+o[t.M21]*a[t.M13]+o[t.M22]*a[t.M23]+o[t.M23]*a[t.M33],r[t.M30]=o[t.M30]*a[t.M00]+o[t.M31]*a[t.M10]+o[t.M32]*a[t.M20]+o[t.M33]*a[t.M30],r[t.M31]=o[t.M30]*a[t.M01]+o[t.M31]*a[t.M11]+o[t.M32]*a[t.M21]+o[t.M33]*a[t.M31],r[t.M32]=o[t.M30]*a[t.M02]+o[t.M31]*a[t.M12]+o[t.M32]*a[t.M22]+o[t.M33]*a[t.M32],r[t.M33]=o[t.M30]*a[t.M03]+o[t.M31]*a[t.M13]+o[t.M32]*a[t.M23]+o[t.M33]*a[t.M33],this.set(this.temp)},Matrix4.prototype.multiplyLeft=function(i){var r=this.temp,o=this.values,a=i.values;return r[t.M00]=a[t.M00]*o[t.M00]+a[t.M01]*o[t.M10]+a[t.M02]*o[t.M20]+a[t.M03]*o[t.M30],r[t.M01]=a[t.M00]*o[t.M01]+a[t.M01]*o[t.M11]+a[t.M02]*o[t.M21]+a[t.M03]*o[t.M31],r[t.M02]=a[t.M00]*o[t.M02]+a[t.M01]*o[t.M12]+a[t.M02]*o[t.M22]+a[t.M03]*o[t.M32],r[t.M03]=a[t.M00]*o[t.M03]+a[t.M01]*o[t.M13]+a[t.M02]*o[t.M23]+a[t.M03]*o[t.M33],r[t.M10]=a[t.M10]*o[t.M00]+a[t.M11]*o[t.M10]+a[t.M12]*o[t.M20]+a[t.M13]*o[t.M30],r[t.M11]=a[t.M10]*o[t.M01]+a[t.M11]*o[t.M11]+a[t.M12]*o[t.M21]+a[t.M13]*o[t.M31],r[t.M12]=a[t.M10]*o[t.M02]+a[t.M11]*o[t.M12]+a[t.M12]*o[t.M22]+a[t.M13]*o[t.M32],r[t.M13]=a[t.M10]*o[t.M03]+a[t.M11]*o[t.M13]+a[t.M12]*o[t.M23]+a[t.M13]*o[t.M33],r[t.M20]=a[t.M20]*o[t.M00]+a[t.M21]*o[t.M10]+a[t.M22]*o[t.M20]+a[t.M23]*o[t.M30],r[t.M21]=a[t.M20]*o[t.M01]+a[t.M21]*o[t.M11]+a[t.M22]*o[t.M21]+a[t.M23]*o[t.M31],r[t.M22]=a[t.M20]*o[t.M02]+a[t.M21]*o[t.M12]+a[t.M22]*o[t.M22]+a[t.M23]*o[t.M32],r[t.M23]=a[t.M20]*o[t.M03]+a[t.M21]*o[t.M13]+a[t.M22]*o[t.M23]+a[t.M23]*o[t.M33],r[t.M30]=a[t.M30]*o[t.M00]+a[t.M31]*o[t.M10]+a[t.M32]*o[t.M20]+a[t.M33]*o[t.M30],r[t.M31]=a[t.M30]*o[t.M01]+a[t.M31]*o[t.M11]+a[t.M32]*o[t.M21]+a[t.M33]*o[t.M31],r[t.M32]=a[t.M30]*o[t.M02]+a[t.M31]*o[t.M12]+a[t.M32]*o[t.M22]+a[t.M33]*o[t.M32],r[t.M33]=a[t.M30]*o[t.M03]+a[t.M31]*o[t.M13]+a[t.M32]*o[t.M23]+a[t.M33]*o[t.M33],this.set(this.temp)},Matrix4.prototype.lookAt=function(i,r,o){Matrix4.initTemps();var a=Matrix4.xAxis,h=Matrix4.yAxis,l=Matrix4.zAxis;l.setFrom(r).normalize(),a.setFrom(r).normalize(),a.cross(o).normalize(),h.setFrom(a).cross(l).normalize(),this.identity();var u=this.values;return u[t.M00]=a.x,u[t.M01]=a.y,u[t.M02]=a.z,u[t.M10]=h.x,u[t.M11]=h.y,u[t.M12]=h.z,u[t.M20]=-l.x,u[t.M21]=-l.y,u[t.M22]=-l.z,Matrix4.tmpMatrix.identity(),Matrix4.tmpMatrix.values[t.M03]=-i.x,Matrix4.tmpMatrix.values[t.M13]=-i.y,Matrix4.tmpMatrix.values[t.M23]=-i.z,this.multiply(Matrix4.tmpMatrix),this},Matrix4.initTemps=function(){null===Matrix4.xAxis&&(Matrix4.xAxis=new t.Vector3),null===Matrix4.yAxis&&(Matrix4.yAxis=new t.Vector3),null===Matrix4.zAxis&&(Matrix4.zAxis=new t.Vector3)},Matrix4.xAxis=null,Matrix4.yAxis=null,Matrix4.zAxis=null,Matrix4.tmpMatrix=new Matrix4,Matrix4}();t.Matrix4=i}(t.webgl||(t.webgl={}))}(o||(o={})),function(t){!function(t){var i=function(){function Mesh(i,r,o,a){this.attributes=r,this.verticesLength=0,this.dirtyVertices=!1,this.indicesLength=0,this.dirtyIndices=!1,this.elementsPerVertex=0,this.context=i instanceof t.ManagedWebGLRenderingContext?i:new t.ManagedWebGLRenderingContext(i),this.elementsPerVertex=0;for(var h=0;h<r.length;h++)this.elementsPerVertex+=r[h].numElements;this.vertices=new Float32Array(o*this.elementsPerVertex),this.indices=new Uint16Array(a),this.context.addRestorable(this)}return Mesh.prototype.getAttributes=function(){return this.attributes},Mesh.prototype.maxVertices=function(){return this.vertices.length/this.elementsPerVertex},Mesh.prototype.numVertices=function(){return this.verticesLength/this.elementsPerVertex},Mesh.prototype.setVerticesLength=function(t){this.dirtyVertices=!0,this.verticesLength=t},Mesh.prototype.getVertices=function(){return this.vertices},Mesh.prototype.maxIndices=function(){return this.indices.length},Mesh.prototype.numIndices=function(){return this.indicesLength},Mesh.prototype.setIndicesLength=function(t){this.dirtyIndices=!0,this.indicesLength=t},Mesh.prototype.getIndices=function(){return this.indices},Mesh.prototype.getVertexSizeInFloats=function(){for(var t=0,i=0;i<this.attributes.length;i++){t+=this.attributes[i].numElements}return t},Mesh.prototype.setVertices=function(t){if(this.dirtyVertices=!0,t.length>this.vertices.length)throw Error("Mesh can't store more than "+this.maxVertices()+" vertices");this.vertices.set(t,0),this.verticesLength=t.length},Mesh.prototype.setIndices=function(t){if(this.dirtyIndices=!0,t.length>this.indices.length)throw Error("Mesh can't store more than "+this.maxIndices()+" indices");this.indices.set(t,0),this.indicesLength=t.length},Mesh.prototype.draw=function(t,i){this.drawWithOffset(t,i,0,this.indicesLength>0?this.indicesLength:this.verticesLength/this.elementsPerVertex)},Mesh.prototype.drawWithOffset=function(t,i,r,o){var a=this.context.gl;(this.dirtyVertices||this.dirtyIndices)&&this.update(),this.bind(t),this.indicesLength>0?a.drawElements(i,o,a.UNSIGNED_SHORT,2*r):a.drawArrays(i,r,o),this.unbind(t)},Mesh.prototype.bind=function(t){var i=this.context.gl;i.bindBuffer(i.ARRAY_BUFFER,this.verticesBuffer);for(var r=0,o=0;o<this.attributes.length;o++){var a=this.attributes[o],h=t.getAttributeLocation(a.name);i.enableVertexAttribArray(h),i.vertexAttribPointer(h,a.numElements,i.FLOAT,!1,4*this.elementsPerVertex,4*r),r+=a.numElements}this.indicesLength>0&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.indicesBuffer)},Mesh.prototype.unbind=function(t){for(var i=this.context.gl,r=0;r<this.attributes.length;r++){var o=this.attributes[r],a=t.getAttributeLocation(o.name);i.disableVertexAttribArray(a)}i.bindBuffer(i.ARRAY_BUFFER,null),this.indicesLength>0&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null)},Mesh.prototype.update=function(){var t=this.context.gl;this.dirtyVertices&&(this.verticesBuffer||(this.verticesBuffer=t.createBuffer()),t.bindBuffer(t.ARRAY_BUFFER,this.verticesBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices.subarray(0,this.verticesLength),t.DYNAMIC_DRAW),this.dirtyVertices=!1),this.dirtyIndices&&(this.indicesBuffer||(this.indicesBuffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices.subarray(0,this.indicesLength),t.DYNAMIC_DRAW),this.dirtyIndices=!1)},Mesh.prototype.restore=function(){this.verticesBuffer=null,this.indicesBuffer=null,this.update()},Mesh.prototype.dispose=function(){this.context.removeRestorable(this);var t=this.context.gl;t.deleteBuffer(this.verticesBuffer),t.deleteBuffer(this.indicesBuffer)},Mesh}();t.Mesh=i;var r=function r(t,i,o){this.name=t,this.type=i,this.numElements=o};t.VertexAttribute=r;var o=function(i){function Position2Attribute(){return i.call(this,t.Shader.POSITION,c.Float,2)||this}return a(Position2Attribute,i),Position2Attribute}(r);t.Position2Attribute=o;var h=function(i){function Position3Attribute(){return i.call(this,t.Shader.POSITION,c.Float,3)||this}return a(Position3Attribute,i),Position3Attribute}(r);t.Position3Attribute=h;var l=function(i){function TexCoordAttribute(r){return void 0===r&&(r=0),i.call(this,t.Shader.TEXCOORDS+(0==r?"":r),c.Float,2)||this}return a(TexCoordAttribute,i),TexCoordAttribute}(r);t.TexCoordAttribute=l;var u=function(i){function ColorAttribute(){return i.call(this,t.Shader.COLOR,c.Float,4)||this}return a(ColorAttribute,i),ColorAttribute}(r);t.ColorAttribute=u;var c,d=function(i){function Color2Attribute(){return i.call(this,t.Shader.COLOR2,c.Float,4)||this}return a(Color2Attribute,i),Color2Attribute}(r);t.Color2Attribute=d,function(t){t[t.Float=0]="Float"}(c=t.VertexAttributeType||(t.VertexAttributeType={}))}(t.webgl||(t.webgl={}))}(o||(o={})),function(t){var i,r;i=t.webgl||(t.webgl={}),r=function(){function PolygonBatcher(t,r,o){if(void 0===r&&(r=!0),void 0===o&&(o=10920),this.isDrawing=!1,this.shader=null,this.lastTexture=null,this.verticesLength=0,this.indicesLength=0,o>10920)throw new Error("Can't have more than 10920 triangles per batch: "+o);this.context=t instanceof i.ManagedWebGLRenderingContext?t:new i.ManagedWebGLRenderingContext(t);var a=r?[new i.Position2Attribute,new i.ColorAttribute,new i.TexCoordAttribute,new i.Color2Attribute]:[new i.Position2Attribute,new i.ColorAttribute,new i.TexCoordAttribute];this.mesh=new i.Mesh(t,a,o,3*o),this.srcBlend=this.context.gl.SRC_ALPHA,this.dstBlend=this.context.gl.ONE_MINUS_SRC_ALPHA}return PolygonBatcher.prototype.begin=function(t){var i=this.context.gl;if(this.isDrawing)throw new Error("PolygonBatch is already drawing. Call PolygonBatch.end() before calling PolygonBatch.begin()");this.drawCalls=0,this.shader=t,this.lastTexture=null,this.isDrawing=!0,i.enable(i.BLEND),i.blendFunc(this.srcBlend,this.dstBlend)},PolygonBatcher.prototype.setBlendMode=function(t,i){var r=this.context.gl;this.srcBlend=t,this.dstBlend=i,this.isDrawing&&(this.flush(),r.blendFunc(this.srcBlend,this.dstBlend))},PolygonBatcher.prototype.draw=function(t,i,r){t!=this.lastTexture?(this.flush(),this.lastTexture=t):(this.verticesLength+i.length>this.mesh.getVertices().length||this.indicesLength+r.length>this.mesh.getIndices().length)&&this.flush();var o=this.mesh.numVertices();this.mesh.getVertices().set(i,this.verticesLength),this.verticesLength+=i.length,this.mesh.setVerticesLength(this.verticesLength);for(var a=this.mesh.getIndices(),h=this.indicesLength,l=0;l<r.length;h++,l++)a[h]=r[l]+o;this.indicesLength+=r.length,this.mesh.setIndicesLength(this.indicesLength)},PolygonBatcher.prototype.flush=function(){var t=this.context.gl;0!=this.verticesLength&&(this.lastTexture.bind(),this.mesh.draw(this.shader,t.TRIANGLES),this.verticesLength=0,this.indicesLength=0,this.mesh.setVerticesLength(0),this.mesh.setIndicesLength(0),this.drawCalls++)},PolygonBatcher.prototype.end=function(){var t=this.context.gl;if(!this.isDrawing)throw new Error("PolygonBatch is not drawing. Call PolygonBatch.begin() before calling PolygonBatch.end()");(this.verticesLength>0||this.indicesLength>0)&&this.flush(),this.shader=null,this.lastTexture=null,this.isDrawing=!1,t.disable(t.BLEND)},PolygonBatcher.prototype.getDrawCalls=function(){return this.drawCalls},PolygonBatcher.prototype.dispose=function(){this.mesh.dispose()},PolygonBatcher}(),i.PolygonBatcher=r}(o||(o={})),function(t){var i,r,o;i=t.webgl||(t.webgl={}),o=function(){function SceneRenderer(r,o,a){void 0===a&&(a=!0),this.twoColorTint=!1,this.activeRenderer=null,this.QUAD=[0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0],this.QUAD_TRIANGLES=[0,1,2,2,3,0],this.WHITE=new t.Color(1,1,1,1),this.canvas=r,this.context=o instanceof i.ManagedWebGLRenderingContext?o:new i.ManagedWebGLRenderingContext(o),this.twoColorTint=a,this.camera=new i.OrthoCamera(r.width,r.height),this.batcherShader=a?i.Shader.newTwoColoredTextured(this.context):i.Shader.newColoredTextured(this.context),this.batcher=new i.PolygonBatcher(this.context,a),this.shapesShader=i.Shader.newColored(this.context),this.shapes=new i.ShapeRenderer(this.context),this.skeletonRenderer=new i.SkeletonRenderer(this.context,a),this.skeletonDebugRenderer=new i.SkeletonDebugRenderer(this.context)}return SceneRenderer.prototype.begin=function(){this.camera.update(),this.enableRenderer(this.batcher)},SceneRenderer.prototype.drawSkeleton=function(t,i,r,o){void 0===i&&(i=!1),void 0===r&&(r=-1),void 0===o&&(o=-1),this.enableRenderer(this.batcher),this.skeletonRenderer.premultipliedAlpha=i,this.skeletonRenderer.draw(this.batcher,t,r,o)},SceneRenderer.prototype.drawSkeletonDebug=function(t,i,r){void 0===i&&(i=!1),void 0===r&&(r=null),this.enableRenderer(this.shapes),this.skeletonDebugRenderer.premultipliedAlpha=i,this.skeletonDebugRenderer.draw(this.shapes,t,r)},SceneRenderer.prototype.drawTexture=function(t,i,r,o,a,h){void 0===h&&(h=null),this.enableRenderer(this.batcher),null===h&&(h=this.WHITE);var l=this.QUAD,u=0;l[u++]=i,l[u++]=r,l[u++]=h.r,l[u++]=h.g,l[u++]=h.b,l[u++]=h.a,l[u++]=0,l[u++]=1,this.twoColorTint&&(l[u++]=0,l[u++]=0,l[u++]=0,l[u++]=0),l[u++]=i+o,l[u++]=r,l[u++]=h.r,l[u++]=h.g,l[u++]=h.b,l[u++]=h.a,l[u++]=1,l[u++]=1,this.twoColorTint&&(l[u++]=0,l[u++]=0,l[u++]=0,l[u++]=0),l[u++]=i+o,l[u++]=r+a,l[u++]=h.r,l[u++]=h.g,l[u++]=h.b,l[u++]=h.a,l[u++]=1,l[u++]=0,this.twoColorTint&&(l[u++]=0,l[u++]=0,l[u++]=0,l[u++]=0),l[u++]=i,l[u++]=r+a,l[u++]=h.r,l[u++]=h.g,l[u++]=h.b,l[u++]=h.a,l[u++]=0,l[u++]=0,this.twoColorTint&&(l[u++]=0,l[u++]=0,l[u++]=0,l[u++]=0),this.batcher.draw(t,l,this.QUAD_TRIANGLES)},SceneRenderer.prototype.drawTextureUV=function(t,i,r,o,a,h,l,u,c,d){void 0===d&&(d=null),this.enableRenderer(this.batcher),null===d&&(d=this.WHITE);var p=this.QUAD,g=0;p[g++]=i,p[g++]=r,p[g++]=d.r,p[g++]=d.g,p[g++]=d.b,p[g++]=d.a,p[g++]=h,p[g++]=l,this.twoColorTint&&(p[g++]=0,p[g++]=0,p[g++]=0,p[g++]=0),p[g++]=i+o,p[g++]=r,p[g++]=d.r,p[g++]=d.g,p[g++]=d.b,p[g++]=d.a,p[g++]=u,p[g++]=l,this.twoColorTint&&(p[g++]=0,p[g++]=0,p[g++]=0,p[g++]=0),p[g++]=i+o,p[g++]=r+a,p[g++]=d.r,p[g++]=d.g,p[g++]=d.b,p[g++]=d.a,p[g++]=u,p[g++]=c,this.twoColorTint&&(p[g++]=0,p[g++]=0,p[g++]=0,p[g++]=0),p[g++]=i,p[g++]=r+a,p[g++]=d.r,p[g++]=d.g,p[g++]=d.b,p[g++]=d.a,p[g++]=h,p[g++]=c,this.twoColorTint&&(p[g++]=0,p[g++]=0,p[g++]=0,p[g++]=0),this.batcher.draw(t,p,this.QUAD_TRIANGLES)},SceneRenderer.prototype.drawTextureRotated=function(i,r,o,a,h,l,u,c,d,p){void 0===d&&(d=null),this.enableRenderer(this.batcher),null===d&&(d=this.WHITE);var g=this.QUAD,v=r+l,m=o+u,y=-l,T=-u,S=a-l,w=h-u,b=y,C=T,A=y,E=w,M=S,_=w,R=S,P=T,k=0,O=0,L=0,D=0,I=0,B=0,N=0,G=0;if(0!=c){var Y=t.MathUtils.cosDeg(c),U=t.MathUtils.sinDeg(c);L=(I=Y*M-U*_)+((k=Y*b-U*C)-(N=Y*A-U*E)),D=(B=U*M+Y*_)+((O=U*b+Y*C)-(G=U*A+Y*E))}else k=b,O=C,N=A,G=E,I=M,B=_,L=R,D=P;k+=v,O+=m,L+=v,D+=m,I+=v,B+=m,N+=v,G+=m;var X=0;g[X++]=k,g[X++]=O,g[X++]=d.r,g[X++]=d.g,g[X++]=d.b,g[X++]=d.a,g[X++]=0,g[X++]=1,this.twoColorTint&&(g[X++]=0,g[X++]=0,g[X++]=0,g[X++]=0),g[X++]=L,g[X++]=D,g[X++]=d.r,g[X++]=d.g,g[X++]=d.b,g[X++]=d.a,g[X++]=1,g[X++]=1,this.twoColorTint&&(g[X++]=0,g[X++]=0,g[X++]=0,g[X++]=0),g[X++]=I,g[X++]=B,g[X++]=d.r,g[X++]=d.g,g[X++]=d.b,g[X++]=d.a,g[X++]=1,g[X++]=0,this.twoColorTint&&(g[X++]=0,g[X++]=0,g[X++]=0,g[X++]=0),g[X++]=N,g[X++]=G,g[X++]=d.r,g[X++]=d.g,g[X++]=d.b,g[X++]=d.a,g[X++]=0,g[X++]=0,this.twoColorTint&&(g[X++]=0,g[X++]=0,g[X++]=0,g[X++]=0),this.batcher.draw(i,g,this.QUAD_TRIANGLES)},SceneRenderer.prototype.drawRegion=function(t,i,r,o,a,h,l){void 0===h&&(h=null),this.enableRenderer(this.batcher),null===h&&(h=this.WHITE);var u=this.QUAD,c=0;u[c++]=i,u[c++]=r,u[c++]=h.r,u[c++]=h.g,u[c++]=h.b,u[c++]=h.a,u[c++]=t.u,u[c++]=t.v2,this.twoColorTint&&(u[c++]=0,u[c++]=0,u[c++]=0,u[c++]=0),u[c++]=i+o,u[c++]=r,u[c++]=h.r,u[c++]=h.g,u[c++]=h.b,u[c++]=h.a,u[c++]=t.u2,u[c++]=t.v2,this.twoColorTint&&(u[c++]=0,u[c++]=0,u[c++]=0,u[c++]=0),u[c++]=i+o,u[c++]=r+a,u[c++]=h.r,u[c++]=h.g,u[c++]=h.b,u[c++]=h.a,u[c++]=t.u2,u[c++]=t.v,this.twoColorTint&&(u[c++]=0,u[c++]=0,u[c++]=0,u[c++]=0),u[c++]=i,u[c++]=r+a,u[c++]=h.r,u[c++]=h.g,u[c++]=h.b,u[c++]=h.a,u[c++]=t.u,u[c++]=t.v,this.twoColorTint&&(u[c++]=0,u[c++]=0,u[c++]=0,u[c++]=0),this.batcher.draw(t.texture,u,this.QUAD_TRIANGLES)},SceneRenderer.prototype.line=function(t,i,r,o,a,h){void 0===a&&(a=null),this.enableRenderer(this.shapes),this.shapes.line(t,i,r,o,a)},SceneRenderer.prototype.triangle=function(t,i,r,o,a,h,l,u,c,d){void 0===u&&(u=null),void 0===c&&(c=null),void 0===d&&(d=null),this.enableRenderer(this.shapes),this.shapes.triangle(t,i,r,o,a,h,l,u,c,d)},SceneRenderer.prototype.quad=function(t,i,r,o,a,h,l,u,c,d,p,g,v){void 0===d&&(d=null),void 0===p&&(p=null),void 0===g&&(g=null),void 0===v&&(v=null),this.enableRenderer(this.shapes),this.shapes.quad(t,i,r,o,a,h,l,u,c,d,p,g,v)},SceneRenderer.prototype.rect=function(t,i,r,o,a,h){void 0===h&&(h=null),this.enableRenderer(this.shapes),this.shapes.rect(t,i,r,o,a,h)},SceneRenderer.prototype.rectLine=function(t,i,r,o,a,h,l){void 0===l&&(l=null),this.enableRenderer(this.shapes),this.shapes.rectLine(t,i,r,o,a,h,l)},SceneRenderer.prototype.polygon=function(t,i,r,o){void 0===o&&(o=null),this.enableRenderer(this.shapes),this.shapes.polygon(t,i,r,o)},SceneRenderer.prototype.circle=function(t,i,r,o,a,h){void 0===a&&(a=null),void 0===h&&(h=0),this.enableRenderer(this.shapes),this.shapes.circle(t,i,r,o,a,h)},SceneRenderer.prototype.curve=function(t,i,r,o,a,h,l,u,c,d){void 0===d&&(d=null),this.enableRenderer(this.shapes),this.shapes.curve(t,i,r,o,a,h,l,u,c,d)},SceneRenderer.prototype.end=function(){this.activeRenderer===this.batcher?this.batcher.end():this.activeRenderer===this.shapes&&this.shapes.end(),this.activeRenderer=null},SceneRenderer.prototype.resize=function(t){var i=this.canvas,o=i.clientWidth,a=i.clientHeight;if(i.width==o&&i.height==a||(i.width=o,i.height=a),this.context.gl.viewport(0,0,i.width,i.height),t===r.Stretch);else if(t===r.Expand)this.camera.setViewport(o,a);else if(t===r.Fit){var h=i.width,l=i.height,u=this.camera.viewportWidth,c=this.camera.viewportHeight,d=c/u<l/h?u/h:c/l;this.camera.viewportWidth=h*d,this.camera.viewportHeight=l*d}this.camera.update()},SceneRenderer.prototype.enableRenderer=function(t){this.activeRenderer!==t&&(this.end(),t instanceof i.PolygonBatcher?(this.batcherShader.bind(),this.batcherShader.setUniform4x4f(i.Shader.MVP_MATRIX,this.camera.projectionView.values),this.batcherShader.setUniformi("u_texture",0),this.batcher.begin(this.batcherShader),this.activeRenderer=this.batcher):t instanceof i.ShapeRenderer?(this.shapesShader.bind(),this.shapesShader.setUniform4x4f(i.Shader.MVP_MATRIX,this.camera.projectionView.values),this.shapes.begin(this.shapesShader),this.activeRenderer=this.shapes):this.activeRenderer=this.skeletonDebugRenderer)},SceneRenderer.prototype.dispose=function(){this.batcher.dispose(),this.batcherShader.dispose(),this.shapes.dispose(),this.shapesShader.dispose(),this.skeletonDebugRenderer.dispose()},SceneRenderer}(),i.SceneRenderer=o,function(t){t[t.Stretch=0]="Stretch",t[t.Expand=1]="Expand",t[t.Fit=2]="Fit"}(r=i.ResizeMode||(i.ResizeMode={}))}(o||(o={})),function(t){var i,r;i=t.webgl||(t.webgl={}),r=function(){function Shader(t,r,o){this.vertexShader=r,this.fragmentShader=o,this.vs=null,this.fs=null,this.program=null,this.tmp2x2=new Float32Array(4),this.tmp3x3=new Float32Array(9),this.tmp4x4=new Float32Array(16),this.vsSource=r,this.fsSource=o,this.context=t instanceof i.ManagedWebGLRenderingContext?t:new i.ManagedWebGLRenderingContext(t),this.context.addRestorable(this),this.compile()}return Shader.prototype.getProgram=function(){return this.program},Shader.prototype.getVertexShader=function(){return this.vertexShader},Shader.prototype.getFragmentShader=function(){return this.fragmentShader},Shader.prototype.getVertexShaderSource=function(){return this.vsSource},Shader.prototype.getFragmentSource=function(){return this.fsSource},Shader.prototype.compile=function(){var t=this.context.gl;try{this.vs=this.compileShader(t.VERTEX_SHADER,this.vertexShader),this.fs=this.compileShader(t.FRAGMENT_SHADER,this.fragmentShader),this.program=this.compileProgram(this.vs,this.fs)}catch(i){throw this.dispose(),i}},Shader.prototype.compileShader=function(t,i){var r=this.context.gl,o=r.createShader(t);if(r.shaderSource(o,i),r.compileShader(o),!r.getShaderParameter(o,r.COMPILE_STATUS)){var a="Couldn't compile shader: "+r.getShaderInfoLog(o);if(r.deleteShader(o),!r.isContextLost())throw new Error(a)}return o},Shader.prototype.compileProgram=function(t,i){var r=this.context.gl,o=r.createProgram();if(r.attachShader(o,t),r.attachShader(o,i),r.linkProgram(o),!r.getProgramParameter(o,r.LINK_STATUS)){var a="Couldn't compile shader program: "+r.getProgramInfoLog(o);if(r.deleteProgram(o),!r.isContextLost())throw new Error(a)}return o},Shader.prototype.restore=function(){this.compile()},Shader.prototype.bind=function(){this.context.gl.useProgram(this.program)},Shader.prototype.unbind=function(){this.context.gl.useProgram(null)},Shader.prototype.setUniformi=function(t,i){this.context.gl.uniform1i(this.getUniformLocation(t),i)},Shader.prototype.setUniformf=function(t,i){this.context.gl.uniform1f(this.getUniformLocation(t),i)},Shader.prototype.setUniform2f=function(t,i,r){this.context.gl.uniform2f(this.getUniformLocation(t),i,r)},Shader.prototype.setUniform3f=function(t,i,r,o){this.context.gl.uniform3f(this.getUniformLocation(t),i,r,o)},Shader.prototype.setUniform4f=function(t,i,r,o,a){this.context.gl.uniform4f(this.getUniformLocation(t),i,r,o,a)},Shader.prototype.setUniform2x2f=function(t,i){var r=this.context.gl;this.tmp2x2.set(i),r.uniformMatrix2fv(this.getUniformLocation(t),!1,this.tmp2x2)},Shader.prototype.setUniform3x3f=function(t,i){var r=this.context.gl;this.tmp3x3.set(i),r.uniformMatrix3fv(this.getUniformLocation(t),!1,this.tmp3x3)},Shader.prototype.setUniform4x4f=function(t,i){var r=this.context.gl;this.tmp4x4.set(i),r.uniformMatrix4fv(this.getUniformLocation(t),!1,this.tmp4x4)},Shader.prototype.getUniformLocation=function(t){var i=this.context.gl,r=i.getUniformLocation(this.program,t);if(!r&&!i.isContextLost())throw new Error("Couldn't find location for uniform "+t);return r},Shader.prototype.getAttributeLocation=function(t){var i=this.context.gl,r=i.getAttribLocation(this.program,t);if(-1==r&&!i.isContextLost())throw new Error("Couldn't find location for attribute "+t);return r},Shader.prototype.dispose=function(){this.context.removeRestorable(this);var t=this.context.gl;this.vs&&(t.deleteShader(this.vs),this.vs=null),this.fs&&(t.deleteShader(this.fs),this.fs=null),this.program&&(t.deleteProgram(this.program),this.program=null)},Shader.newColoredTextured=function(t){return new Shader(t,"\n\t\t\t\tattribute vec4 "+Shader.POSITION+";\n\t\t\t\tattribute vec4 "+Shader.COLOR+";\n\t\t\t\tattribute vec2 "+Shader.TEXCOORDS+";\n\t\t\t\tuniform mat4 "+Shader.MVP_MATRIX+";\n\t\t\t\tvarying vec4 v_color;\n\t\t\t\tvarying vec2 v_texCoords;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_color = "+Shader.COLOR+";\n\t\t\t\t\tv_texCoords = "+Shader.TEXCOORDS+";\n\t\t\t\t\tgl_Position = "+Shader.MVP_MATRIX+" * "+Shader.POSITION+";\n\t\t\t\t}\n\t\t\t","\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_color;\n\t\t\t\tvarying vec2 v_texCoords;\n\t\t\t\tuniform sampler2D u_texture;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tgl_FragColor = v_color * texture2D(u_texture, v_texCoords);\n\t\t\t\t}\n\t\t\t")},Shader.newTwoColoredTextured=function(t){return new Shader(t,"\n\t\t\t\tattribute vec4 "+Shader.POSITION+";\n\t\t\t\tattribute vec4 "+Shader.COLOR+";\n\t\t\t\tattribute vec4 "+Shader.COLOR2+";\n\t\t\t\tattribute vec2 "+Shader.TEXCOORDS+";\n\t\t\t\tuniform mat4 "+Shader.MVP_MATRIX+";\n\t\t\t\tvarying vec4 v_light;\n\t\t\t\tvarying vec4 v_dark;\n\t\t\t\tvarying vec2 v_texCoords;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_light = "+Shader.COLOR+";\n\t\t\t\t\tv_dark = "+Shader.COLOR2+";\n\t\t\t\t\tv_texCoords = "+Shader.TEXCOORDS+";\n\t\t\t\t\tgl_Position = "+Shader.MVP_MATRIX+" * "+Shader.POSITION+";\n\t\t\t\t}\n\t\t\t","\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_light;\n\t\t\t\tvarying LOWP vec4 v_dark;\n\t\t\t\tvarying vec2 v_texCoords;\n\t\t\t\tuniform sampler2D u_texture;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tvec4 texColor = texture2D(u_texture, v_texCoords);\n\t\t\t\t\tgl_FragColor.a = texColor.a * v_light.a;\n\t\t\t\t\tgl_FragColor.rgb = ((texColor.a - 1.0) * v_dark.a + 1.0 - texColor.rgb) * v_dark.rgb + texColor.rgb * v_light.rgb;\n\t\t\t\t}\n\t\t\t")},Shader.newColored=function(t){return new Shader(t,"\n\t\t\t\tattribute vec4 "+Shader.POSITION+";\n\t\t\t\tattribute vec4 "+Shader.COLOR+";\n\t\t\t\tuniform mat4 "+Shader.MVP_MATRIX+";\n\t\t\t\tvarying vec4 v_color;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tv_color = "+Shader.COLOR+";\n\t\t\t\t\tgl_Position = "+Shader.MVP_MATRIX+" * "+Shader.POSITION+";\n\t\t\t\t}\n\t\t\t","\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\t#define LOWP lowp\n\t\t\t\t\tprecision mediump float;\n\t\t\t\t#else\n\t\t\t\t\t#define LOWP\n\t\t\t\t#endif\n\t\t\t\tvarying LOWP vec4 v_color;\n\n\t\t\t\tvoid main () {\n\t\t\t\t\tgl_FragColor = v_color;\n\t\t\t\t}\n\t\t\t")},Shader.MVP_MATRIX="u_projTrans",Shader.POSITION="a_position",Shader.COLOR="a_color",Shader.COLOR2="a_color2",Shader.TEXCOORDS="a_texCoords",Shader.SAMPLER="u_texture",Shader}(),i.Shader=r}(o||(o={})),function(t){var i,r,o;i=t.webgl||(t.webgl={}),o=function(){function ShapeRenderer(o,a){if(void 0===a&&(a=10920),this.isDrawing=!1,this.shapeType=r.Filled,this.color=new t.Color(1,1,1,1),this.vertexIndex=0,this.tmp=new t.Vector2,a>10920)throw new Error("Can't have more than 10920 triangles per batch: "+a);this.context=o instanceof i.ManagedWebGLRenderingContext?o:new i.ManagedWebGLRenderingContext(o),this.mesh=new i.Mesh(o,[new i.Position2Attribute,new i.ColorAttribute],a,0),this.srcBlend=this.context.gl.SRC_ALPHA,this.dstBlend=this.context.gl.ONE_MINUS_SRC_ALPHA}return ShapeRenderer.prototype.begin=function(t){if(this.isDrawing)throw new Error("ShapeRenderer.begin() has already been called");this.shader=t,this.vertexIndex=0,this.isDrawing=!0;var i=this.context.gl;i.enable(i.BLEND),i.blendFunc(this.srcBlend,this.dstBlend)},ShapeRenderer.prototype.setBlendMode=function(t,i){var r=this.context.gl;this.srcBlend=t,this.dstBlend=i,this.isDrawing&&(this.flush(),r.blendFunc(this.srcBlend,this.dstBlend))},ShapeRenderer.prototype.setColor=function(t){this.color.setFromColor(t)},ShapeRenderer.prototype.setColorWith=function(t,i,r,o){this.color.set(t,i,r,o)},ShapeRenderer.prototype.point=function(t,i,o){void 0===o&&(o=null),this.check(r.Point,1),null===o&&(o=this.color),this.vertex(t,i,o)},ShapeRenderer.prototype.line=function(t,i,o,a,h){void 0===h&&(h=null),this.check(r.Line,2),this.mesh.getVertices(),this.vertexIndex,null===h&&(h=this.color),this.vertex(t,i,h),this.vertex(o,a,h)},ShapeRenderer.prototype.triangle=function(t,i,o,a,h,l,u,c,d,p){void 0===c&&(c=null),void 0===d&&(d=null),void 0===p&&(p=null),this.check(t?r.Filled:r.Line,3),this.mesh.getVertices(),this.vertexIndex,null===c&&(c=this.color),null===d&&(d=this.color),null===p&&(p=this.color),t?(this.vertex(i,o,c),this.vertex(a,h,d),this.vertex(l,u,p)):(this.vertex(i,o,c),this.vertex(a,h,d),this.vertex(a,h,c),this.vertex(l,u,d),this.vertex(l,u,c),this.vertex(i,o,d))},ShapeRenderer.prototype.quad=function(t,i,o,a,h,l,u,c,d,p,g,v,m){void 0===p&&(p=null),void 0===g&&(g=null),void 0===v&&(v=null),void 0===m&&(m=null),this.check(t?r.Filled:r.Line,3),this.mesh.getVertices(),this.vertexIndex,null===p&&(p=this.color),null===g&&(g=this.color),null===v&&(v=this.color),null===m&&(m=this.color),t?(this.vertex(i,o,p),this.vertex(a,h,g),this.vertex(l,u,v),this.vertex(l,u,v),this.vertex(c,d,m),this.vertex(i,o,p)):(this.vertex(i,o,p),this.vertex(a,h,g),this.vertex(a,h,g),this.vertex(l,u,v),this.vertex(l,u,v),this.vertex(c,d,m),this.vertex(c,d,m),this.vertex(i,o,p))},ShapeRenderer.prototype.rect=function(t,i,r,o,a,h){void 0===h&&(h=null),this.quad(t,i,r,i+o,r,i+o,r+a,i,r+a,h,h,h,h)},ShapeRenderer.prototype.rectLine=function(t,i,o,a,h,l,u){void 0===u&&(u=null),this.check(t?r.Filled:r.Line,8),null===u&&(u=this.color);var c=this.tmp.set(h-o,i-a);c.normalize(),l*=.5;var d=c.x*l,p=c.y*l;t?(this.vertex(i+d,o+p,u),this.vertex(i-d,o-p,u),this.vertex(a+d,h+p,u),this.vertex(a-d,h-p,u),this.vertex(a+d,h+p,u),this.vertex(i-d,o-p,u)):(this.vertex(i+d,o+p,u),this.vertex(i-d,o-p,u),this.vertex(a+d,h+p,u),this.vertex(a-d,h-p,u),this.vertex(a+d,h+p,u),this.vertex(i+d,o+p,u),this.vertex(a-d,h-p,u),this.vertex(i-d,o-p,u))},ShapeRenderer.prototype.x=function(t,i,r){this.line(t-r,i-r,t+r,i+r),this.line(t-r,i+r,t+r,i-r)},ShapeRenderer.prototype.polygon=function(t,i,o,a){if(void 0===a&&(a=null),o<3)throw new Error("Polygon must contain at least 3 vertices");this.check(r.Line,2*o),null===a&&(a=this.color),this.mesh.getVertices(),this.vertexIndex,o<<=1;for(var h=t[i<<=1],l=t[i+1],u=i+o,c=i,d=i+o-2;c<d;c+=2){var p=t[c],g=t[c+1],v=0,m=0;c+2>=u?(v=h,m=l):(v=t[c+2],m=t[c+3]),this.vertex(p,g,a),this.vertex(v,m,a)}},ShapeRenderer.prototype.circle=function(i,o,a,h,l,u){if(void 0===l&&(l=null),void 0===u&&(u=0),0===u&&(u=Math.max(1,6*t.MathUtils.cbrt(h)|0)),u<=0)throw new Error("segments must be > 0.");null===l&&(l=this.color);var c=2*t.MathUtils.PI/u,d=Math.cos(c),p=Math.sin(c),g=h,v=0;if(i){for(this.check(r.Filled,3*u+3),u--,y=0;y<u;y++){this.vertex(o,a,l),this.vertex(o+g,a+v,l);var m=g;g=d*g-p*v,v=p*m+d*v,this.vertex(o+g,a+v,l)}this.vertex(o,a,l),this.vertex(o+g,a+v,l)}else{this.check(r.Line,2*u+2);for(var y=0;y<u;y++){this.vertex(o+g,a+v,l);var T=g;g=d*g-p*v,v=p*T+d*v,this.vertex(o+g,a+v,l)}this.vertex(o+g,a+v,l)}g=h,v=0,this.vertex(o+g,a+v,l)},ShapeRenderer.prototype.curve=function(t,i,o,a,h,l,u,c,d,p){void 0===p&&(p=null),this.check(r.Line,2*d+2),null===p&&(p=this.color);for(var g=1/d,v=g*g,m=g*g*g,y=3*g,T=3*v,S=6*v,w=6*m,b=t-2*o+h,C=i-2*a+l,A=3*(o-h)-t+u,E=3*(a-l)-i+c,M=t,_=i,R=(o-t)*y+b*T+A*m,P=(a-i)*y+C*T+E*m,k=b*S+A*w,O=C*S+E*w,L=A*w,D=E*w;d-- >0;)this.vertex(M,_,p),M+=R,_+=P,R+=k,P+=O,k+=L,O+=D,this.vertex(M,_,p);this.vertex(M,_,p),this.vertex(u,c,p)},ShapeRenderer.prototype.vertex=function(t,i,r){var o=this.vertexIndex,a=this.mesh.getVertices();a[o++]=t,a[o++]=i,a[o++]=r.r,a[o++]=r.g,a[o++]=r.b,a[o++]=r.a,this.vertexIndex=o},ShapeRenderer.prototype.end=function(){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");this.flush(),this.context.gl.disable(this.context.gl.BLEND),this.isDrawing=!1},ShapeRenderer.prototype.flush=function(){0!=this.vertexIndex&&(this.mesh.setVerticesLength(this.vertexIndex),this.mesh.draw(this.shader,this.shapeType),this.vertexIndex=0)},ShapeRenderer.prototype.check=function(t,i){if(!this.isDrawing)throw new Error("ShapeRenderer.begin() has not been called");if(this.shapeType==t){if(!(this.mesh.maxVertices()-this.mesh.numVertices()<i))return;this.flush()}else this.flush(),this.shapeType=t},ShapeRenderer.prototype.dispose=function(){this.mesh.dispose()},ShapeRenderer}(),i.ShapeRenderer=o,function(t){t[t.Point=0]="Point",t[t.Line=1]="Line",t[t.Filled=4]="Filled"}(r=i.ShapeType||(i.ShapeType={}))}(o||(o={})),function(t){var i,r;i=t.webgl||(t.webgl={}),r=function(){function SkeletonDebugRenderer(r){this.boneLineColor=new t.Color(1,0,0,1),this.boneOriginColor=new t.Color(0,1,0,1),this.attachmentLineColor=new t.Color(0,0,1,.5),this.triangleLineColor=new t.Color(1,.64,0,.5),this.pathColor=(new t.Color).setFromString("FF7F00"),this.clipColor=new t.Color(.8,0,0,2),this.aabbColor=new t.Color(0,1,0,.5),this.drawBones=!0,this.drawRegionAttachments=!0,this.drawBoundingBoxes=!0,this.drawMeshHull=!0,this.drawMeshTriangles=!0,this.drawPaths=!0,this.drawSkeletonXY=!1,this.drawClipping=!0,this.premultipliedAlpha=!1,this.scale=1,this.boneWidth=2,this.bounds=new t.SkeletonBounds,this.temp=new Array,this.vertices=t.Utils.newFloatArray(2048),this.context=r instanceof i.ManagedWebGLRenderingContext?r:new i.ManagedWebGLRenderingContext(r)}return SkeletonDebugRenderer.prototype.draw=function(i,r,o){void 0===o&&(o=null);var a=r.x,h=r.y,l=this.context.gl,u=this.premultipliedAlpha?l.ONE:l.SRC_ALPHA;i.setBlendMode(u,l.ONE_MINUS_SRC_ALPHA);var c=r.bones;if(this.drawBones){i.setColor(this.boneLineColor);for(var d=0,p=c.length;d<p;d++){var g=c[d];if(!(o&&o.indexOf(g.data.name)>-1)&&null!=g.parent){var v=a+g.data.length*g.a+g.worldX,m=h+g.data.length*g.c+g.worldY;i.rectLine(!0,a+g.worldX,h+g.worldY,v,m,this.boneWidth*this.scale)}}this.drawSkeletonXY&&i.x(a,h,4*this.scale)}if(this.drawRegionAttachments)for(i.setColor(this.attachmentLineColor),d=0,p=(j=r.slots).length;d<p;d++)if((K=(q=j[d]).getAttachment())instanceof t.RegionAttachment){var y=K,T=this.vertices;y.computeWorldVertices(q.bone,T,0,2),i.line(T[0],T[1],T[2],T[3]),i.line(T[2],T[3],T[4],T[5]),i.line(T[4],T[5],T[6],T[7]),i.line(T[6],T[7],T[0],T[1])}if(this.drawMeshHull||this.drawMeshTriangles)for(d=0,p=(j=r.slots).length;d<p;d++)if((q=j[d]).bone.active&&(K=q.getAttachment())instanceof t.MeshAttachment){var S=K;T=this.vertices,S.computeWorldVertices(q,0,S.worldVerticesLength,T,0,2);var w=S.triangles,b=S.hullLength;if(this.drawMeshTriangles){i.setColor(this.triangleLineColor);for(var C=0,A=w.length;C<A;C+=3){var E=2*w[C],M=2*w[C+1],_=2*w[C+2];i.triangle(!1,T[E],T[E+1],T[M],T[M+1],T[_],T[_+1])}}if(this.drawMeshHull&&b>0){i.setColor(this.attachmentLineColor);var R=T[(b=2*(b>>1))-2],P=T[b-1];for(C=0,A=b;C<A;C+=2)v=T[C],m=T[C+1],i.line(v,m,R,P),R=v,P=m}}if(this.drawBoundingBoxes){var k=this.bounds;k.update(r,!0),i.setColor(this.aabbColor),i.rect(!1,k.minX,k.minY,k.getWidth(),k.getHeight());var O=k.polygons,L=k.boundingBoxes;for(d=0,p=O.length;d<p;d++){var D=O[d];i.setColor(L[d].color),i.polygon(D,0,D.length)}}if(this.drawPaths)for(d=0,p=(j=r.slots).length;d<p;d++)if((q=j[d]).bone.active&&(K=q.getAttachment())instanceof t.PathAttachment){var I=K,B=(A=I.worldVerticesLength,this.temp=t.Utils.setArraySize(this.temp,A,0));I.computeWorldVertices(q,0,A,B,0,2);var N=this.pathColor,G=B[2],Y=B[3],U=0,X=0;if(I.closed){i.setColor(N);var V=B[0],z=B[1],W=B[A-2],H=B[A-1];U=B[A-4],X=B[A-3],i.curve(G,Y,V,z,W,H,U,X,32),i.setColor(SkeletonDebugRenderer.LIGHT_GRAY),i.line(G,Y,V,z),i.line(U,X,W,H)}for(A-=4,C=4;C<A;C+=6)V=B[C],z=B[C+1],W=B[C+2],H=B[C+3],U=B[C+4],X=B[C+5],i.setColor(N),i.curve(G,Y,V,z,W,H,U,X,32),i.setColor(SkeletonDebugRenderer.LIGHT_GRAY),i.line(G,Y,V,z),i.line(U,X,W,H),G=U,Y=X}if(this.drawBones)for(i.setColor(this.boneOriginColor),d=0,p=c.length;d<p;d++)g=c[d],o&&o.indexOf(g.data.name)>-1||i.circle(!0,a+g.worldX,h+g.worldY,3*this.scale,SkeletonDebugRenderer.GREEN,8);if(this.drawClipping){var j=r.slots;for(i.setColor(this.clipColor),d=0,p=j.length;d<p;d++){var q,K;if((q=j[d]).bone.active&&(K=q.getAttachment())instanceof t.ClippingAttachment){var Z=K;A=Z.worldVerticesLength,B=this.temp=t.Utils.setArraySize(this.temp,A,0),Z.computeWorldVertices(q,0,A,B,0,2);for(var J=0,Q=B.length;J<Q;J+=2)v=B[J],m=B[J+1],U=B[(J+2)%B.length],X=B[(J+3)%B.length],i.line(v,m,U,X)}}}},SkeletonDebugRenderer.prototype.dispose=function(){},SkeletonDebugRenderer.LIGHT_GRAY=new t.Color(192/255,192/255,192/255,1),SkeletonDebugRenderer.GREEN=new t.Color(0,1,0,1),SkeletonDebugRenderer}(),i.SkeletonDebugRenderer=r}(o||(o={})),function(t){var i,r,o;i=t.webgl||(t.webgl={}),r=function r(t,i,o){this.vertices=t,this.numVertices=i,this.numFloats=o},o=function(){function SkeletonRenderer(i,o){void 0===o&&(o=!0),this.premultipliedAlpha=!1,this.vertexEffect=null,this.tempColor=new t.Color,this.tempColor2=new t.Color,this.vertexSize=8,this.twoColorTint=!1,this.renderable=new r(null,0,0),this.clipper=new t.SkeletonClipping,this.temp=new t.Vector2,this.temp2=new t.Vector2,this.temp3=new t.Color,this.temp4=new t.Color,this.twoColorTint=o,o&&(this.vertexSize+=4),this.vertices=t.Utils.newFloatArray(1024*this.vertexSize)}return SkeletonRenderer.prototype.draw=function(r,o,a,h){void 0===a&&(a=-1),void 0===h&&(h=-1);var l=this.clipper,u=this.premultipliedAlpha,c=this.twoColorTint,d=null,p=this.temp,g=this.temp2,v=this.temp3,m=this.temp4,y=this.renderable,T=null,S=null,w=o.drawOrder,b=null,C=o.color,A=c?12:8,E=!1;-1==a&&(E=!0);for(var M=0,_=w.length;M<_;M++){var R=l.isClipping()?2:A,P=w[M];if(P.bone.active)if(a>=0&&a==P.data.index&&(E=!0),E){h>=0&&h==P.data.index&&(E=!1);var k=P.getAttachment(),O=null;if(k instanceof t.RegionAttachment){var L=k;y.vertices=this.vertices,y.numVertices=4,y.numFloats=R<<2,L.computeWorldVertices(P.bone,y.vertices,0,R),S=SkeletonRenderer.QUAD_TRIANGLES,T=L.uvs,O=L.region.renderObject.texture,b=L.color}else{if(!(k instanceof t.MeshAttachment)){if(k instanceof t.ClippingAttachment){var D=k;l.clipStart(P,D);continue}l.clipEndWithSlot(P);continue}var I=k;y.vertices=this.vertices,y.numVertices=I.worldVerticesLength>>1,y.numFloats=y.numVertices*R,y.numFloats>y.vertices.length&&(y.vertices=this.vertices=t.Utils.newFloatArray(y.numFloats)),I.computeWorldVertices(P,0,I.worldVerticesLength,y.vertices,0,R),S=I.triangles,O=I.region.renderObject.texture,T=I.uvs,b=I.color}if(null!=O){var B=P.color,N=this.tempColor;N.r=C.r*B.r*b.r,N.g=C.g*B.g*b.g,N.b=C.b*B.b*b.b,N.a=C.a*B.a*b.a,u&&(N.r*=N.a,N.g*=N.a,N.b*=N.a);var G=this.tempColor2;null==P.darkColor?G.set(0,0,0,1):(u?(G.r=P.darkColor.r*N.a,G.g=P.darkColor.g*N.a,G.b=P.darkColor.b*N.a):G.setFromColor(P.darkColor),G.a=u?1:0);var Y=P.data.blendMode;if(Y!=d&&(d=Y,r.setBlendMode(i.WebGLBlendModeConverter.getSourceGLBlendMode(d,u),i.WebGLBlendModeConverter.getDestGLBlendMode(d))),l.isClipping()){l.clipTriangles(y.vertices,y.numFloats,S,S.length,T,N,G,c);var U=new Float32Array(l.clippedVertices),X=l.clippedTriangles;if(null!=this.vertexEffect){var V=this.vertexEffect,z=U;if(c){H=0;for(var W=U.length;H<W;H+=A)p.x=z[H],p.y=z[H+1],v.set(z[H+2],z[H+3],z[H+4],z[H+5]),g.x=z[H+6],g.y=z[H+7],m.set(z[H+8],z[H+9],z[H+10],z[H+11]),V.transform(p,g,v,m),z[H]=p.x,z[H+1]=p.y,z[H+2]=v.r,z[H+3]=v.g,z[H+4]=v.b,z[H+5]=v.a,z[H+6]=g.x,z[H+7]=g.y,z[H+8]=m.r,z[H+9]=m.g,z[H+10]=m.b,z[H+11]=m.a}else for(var H=0,j=U.length;H<j;H+=A)p.x=z[H],p.y=z[H+1],v.set(z[H+2],z[H+3],z[H+4],z[H+5]),g.x=z[H+6],g.y=z[H+7],m.set(0,0,0,0),V.transform(p,g,v,m),z[H]=p.x,z[H+1]=p.y,z[H+2]=v.r,z[H+3]=v.g,z[H+4]=v.b,z[H+5]=v.a,z[H+6]=g.x,z[H+7]=g.y}r.draw(O,U,X)}else{if(z=y.vertices,null!=this.vertexEffect)if(V=this.vertexEffect,c){H=0,K=0;for(var q=y.numFloats;H<q;H+=A,K+=2)p.x=z[H],p.y=z[H+1],g.x=T[K],g.y=T[K+1],v.setFromColor(N),m.setFromColor(G),V.transform(p,g,v,m),z[H]=p.x,z[H+1]=p.y,z[H+2]=v.r,z[H+3]=v.g,z[H+4]=v.b,z[H+5]=v.a,z[H+6]=g.x,z[H+7]=g.y,z[H+8]=m.r,z[H+9]=m.g,z[H+10]=m.b,z[H+11]=m.a}else for(var H=0,K=0,Z=y.numFloats;H<Z;H+=A,K+=2)p.x=z[H],p.y=z[H+1],g.x=T[K],g.y=T[K+1],v.setFromColor(N),m.set(0,0,0,0),V.transform(p,g,v,m),z[H]=p.x,z[H+1]=p.y,z[H+2]=v.r,z[H+3]=v.g,z[H+4]=v.b,z[H+5]=v.a,z[H+6]=g.x,z[H+7]=g.y;else if(c){H=2,K=0;for(var J=y.numFloats;H<J;H+=A,K+=2)z[H]=N.r,z[H+1]=N.g,z[H+2]=N.b,z[H+3]=N.a,z[H+4]=T[K],z[H+5]=T[K+1],z[H+6]=G.r,z[H+7]=G.g,z[H+8]=G.b,z[H+9]=G.a}else{H=2;for(var K=0,Q=y.numFloats;H<Q;H+=A,K+=2)z[H]=N.r,z[H+1]=N.g,z[H+2]=N.b,z[H+3]=N.a,z[H+4]=T[K],z[H+5]=T[K+1]}var $=y.vertices.subarray(0,y.numFloats);r.draw(O,$,S)}}l.clipEndWithSlot(P)}else l.clipEndWithSlot(P);else l.clipEndWithSlot(P)}l.clipEnd()},SkeletonRenderer.QUAD_TRIANGLES=[0,1,2,2,3,0],SkeletonRenderer}(),i.SkeletonRenderer=o}(o||(o={})),function(t){var i,r;i=t.webgl||(t.webgl={}),r=function(){function Vector3(t,i,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=0,this.y=0,this.z=0,this.x=t,this.y=i,this.z=r}return Vector3.prototype.setFrom=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},Vector3.prototype.set=function(t,i,r){return this.x=t,this.y=i,this.z=r,this},Vector3.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},Vector3.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},Vector3.prototype.scale=function(t){return this.x*=t,this.y*=t,this.z*=t,this},Vector3.prototype.normalize=function(){var t=this.length();return 0==t||(t=1/t,this.x*=t,this.y*=t,this.z*=t),this},Vector3.prototype.cross=function(t){return this.set(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},Vector3.prototype.multiply=function(t){var r=t.values;return this.set(this.x*r[i.M00]+this.y*r[i.M01]+this.z*r[i.M02]+r[i.M03],this.x*r[i.M10]+this.y*r[i.M11]+this.z*r[i.M12]+r[i.M13],this.x*r[i.M20]+this.y*r[i.M21]+this.z*r[i.M22]+r[i.M23])},Vector3.prototype.project=function(t){var r=t.values,o=1/(this.x*r[i.M30]+this.y*r[i.M31]+this.z*r[i.M32]+r[i.M33]);return this.set((this.x*r[i.M00]+this.y*r[i.M01]+this.z*r[i.M02]+r[i.M03])*o,(this.x*r[i.M10]+this.y*r[i.M11]+this.z*r[i.M12]+r[i.M13])*o,(this.x*r[i.M20]+this.y*r[i.M21]+this.z*r[i.M22]+r[i.M23])*o)},Vector3.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},Vector3.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},Vector3.prototype.distance=function(t){var i=t.x-this.x,r=t.y-this.y,o=t.z-this.z;return Math.sqrt(i*i+r*r+o*o)},Vector3}(),i.Vector3=r}(o||(o={})),function(t){!function(i){var r=function(){function ManagedWebGLRenderingContext(t,i){void 0===i&&(i={alpha:"true"}),this.restorables=new Array,t instanceof HTMLCanvasElement||t instanceof EventTarget?this.setupCanvas(t,i):(this.gl=t,this.canvas=this.gl.canvas)}return ManagedWebGLRenderingContext.prototype.setupCanvas=function(t,i){var r=this;this.gl=t.getContext("webgl2",i)||t.getContext("webgl",i),this.canvas=t,t.addEventListener("webglcontextlost",(function(t){t&&t.preventDefault()})),t.addEventListener("webglcontextrestored",(function(t){for(var i=0,o=r.restorables.length;i<o;i++)r.restorables[i].restore()}))},ManagedWebGLRenderingContext.prototype.addRestorable=function(t){this.restorables.push(t)},ManagedWebGLRenderingContext.prototype.removeRestorable=function(t){var i=this.restorables.indexOf(t);i>-1&&this.restorables.splice(i,1)},ManagedWebGLRenderingContext}();i.ManagedWebGLRenderingContext=r;var o=function(){function WebGLBlendModeConverter(){}return WebGLBlendModeConverter.getDestGLBlendMode=function(i){switch(i){case t.BlendMode.Normal:return WebGLBlendModeConverter.ONE_MINUS_SRC_ALPHA;case t.BlendMode.Additive:return WebGLBlendModeConverter.ONE;case t.BlendMode.Multiply:case t.BlendMode.Screen:return WebGLBlendModeConverter.ONE_MINUS_SRC_ALPHA;default:throw new Error("Unknown blend mode: "+i)}},WebGLBlendModeConverter.getSourceGLBlendMode=function(i,r){switch(void 0===r&&(r=!1),i){case t.BlendMode.Normal:case t.BlendMode.Additive:return r?WebGLBlendModeConverter.ONE:WebGLBlendModeConverter.SRC_ALPHA;case t.BlendMode.Multiply:return WebGLBlendModeConverter.DST_COLOR;case t.BlendMode.Screen:return WebGLBlendModeConverter.ONE;default:throw new Error("Unknown blend mode: "+i)}},WebGLBlendModeConverter.ZERO=0,WebGLBlendModeConverter.ONE=1,WebGLBlendModeConverter.SRC_COLOR=768,WebGLBlendModeConverter.ONE_MINUS_SRC_COLOR=769,WebGLBlendModeConverter.SRC_ALPHA=770,WebGLBlendModeConverter.ONE_MINUS_SRC_ALPHA=771,WebGLBlendModeConverter.DST_ALPHA=772,WebGLBlendModeConverter.ONE_MINUS_DST_ALPHA=773,WebGLBlendModeConverter.DST_COLOR=774,WebGLBlendModeConverter}();i.WebGLBlendModeConverter=o}(t.webgl||(t.webgl={}))}(o||(o={})),t.exports=o}).call(window)},function(t,i,r){var o=r(0),a=r(11),h=r(204),l=r(7),u=r(218),c=r(219),d=r(220),p=new o({Extends:c,initialize:function SpineFile(t,i,r,o,h,p,g){var v,m,y,T=[],S=t.cacheManager.custom.spine;if(l(i)){var w=i;for(i=a(w,"key"),m=new u(t,{key:i,url:a(w,"jsonURL"),extension:a(w,"jsonExtension","json"),xhrSettings:a(w,"jsonXhrSettings")}),o=a(w,"atlasURL"),h=a(w,"preMultipliedAlpha"),Array.isArray(o)||(o=[o]),v=0;v<o.length;v++)(y=new d(t,{key:i+"!"+v,url:o[v],extension:a(w,"atlasExtension","atlas"),xhrSettings:a(w,"atlasXhrSettings")})).cache=S,T.push(y)}else for(m=new u(t,i,r,p),Array.isArray(o)||(o=[o]),v=0;v<o.length;v++)(y=new d(t,i+"!"+v,o[v],g)).cache=S,T.push(y);T.unshift(m),c.call(this,t,"spine",i,T),this.config.preMultipliedAlpha=h},onFileComplete:function onFileComplete(t){if(-1!==this.files.indexOf(t)&&(this.pending--,"text"===t.type)){for(var i=t.data.split("\n"),r=[],o=0;o<i.length;o++){var l=i[o];""===l.trim()&&o<i.length-1&&(l=i[o+1],r.push(l))}var u=this.config,c=this.loader,d=c.baseURL,p=c.path,g=c.prefix,v=a(u,"baseURL",this.baseURL),m=a(u,"path",t.src.match(/^.*\//))[0],y=a(u,"prefix",this.prefix),T=a(u,"textureXhrSettings");c.setBaseURL(v),c.setPath(m),c.setPrefix(y);for(var S=0;S<r.length;S++){var w=r[S],b=new h(c,w,w,T);c.keyExists(b)||(this.addToMultiFile(b),c.addFile(b))}c.setBaseURL(d),c.setPath(p),c.setPrefix(g)}},addToCache:function addToCache(){if(this.isReadyToProcess()){var t;this.files[0].addToCache();for(var i="",r="",o=!!this.config.preMultipliedAlpha,a=this.loader.textureManager,h=1;h<this.files.length;h++){var l=this.files[h];if("text"===l.type)i=l.key.replace(/![\d]$/,""),t=l.cache,r=r.concat(l.data);else{var u=l.key.trim(),c=u.indexOf("!"),d=u.substr(c+1);a.exists(d)||a.addImage(d,l.data)}l.pendingDestroy()}t.add(i,{preMultipliedAlpha:o,data:r,prefix:this.prefix}),this.complete=!0}}});t.exports=p},function(t,i,r){var o=r(0),a=r(15),h=r(21),l=r(22),u=r(11),c=r(7),d=new o({Extends:h,initialize:function ImageFile(t,i,r,o,a){var l,d="png";if(c(i)){var p=i;i=u(p,"key"),r=u(p,"url"),l=u(p,"normalMap"),o=u(p,"xhrSettings"),d=u(p,"extension",d),a=u(p,"frameConfig")}Array.isArray(r)&&(l=r[1],r=r[0]);var g={type:"image",cache:t.textureManager,extension:d,responseType:"blob",key:i,url:r,xhrSettings:o,config:a};if(h.call(this,t,g),l){var v=new ImageFile(t,this.key,l,o,a);v.type="normalMap",this.setLink(v),t.addFile(v)}},onProcess:function onProcess(){this.state=a.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var t=this;this.data.onload=function(){h.revokeObjectURL(t.data),t.onProcessComplete()},this.data.onerror=function(){h.revokeObjectURL(t.data),t.onProcessError()},h.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function addToCache(){var t,i=this.linkFile;i&&i.state===a.FILE_COMPLETE?(t="image"===this.type?this.cache.addImage(this.key,this.data,i.data):this.cache.addImage(i.key,i.data,this.data),this.pendingDestroy(t),i.pendingDestroy(t)):i||(t=this.cache.addImage(this.key,this.data),this.pendingDestroy(t))}});l.register("image",(function(t,i,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new d(this,t[o]));else this.addFile(new d(this,t,i,r));return this})),t.exports=d},function(t,i,r){t.exports={ADD:r(206),COMPLETE:r(207),FILE_COMPLETE:r(208),FILE_KEY_COMPLETE:r(209),FILE_LOAD_ERROR:r(210),FILE_LOAD:r(211),FILE_PROGRESS:r(212),POST_PROCESS:r(213),PROGRESS:r(214),START:r(215)}},function(t,i){t.exports="addfile"},function(t,i){t.exports="complete"},function(t,i){t.exports="filecomplete"},function(t,i){t.exports="filecomplete-"},function(t,i){t.exports="loaderror"},function(t,i){t.exports="load"},function(t,i){t.exports="fileprogress"},function(t,i){t.exports="postprocess"},function(t,i){t.exports="progress"},function(t,i){t.exports="start"},function(t,i){t.exports=function GetURL(t,i){return!!t.url&&(t.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?t.url:i+t.url)}},function(t,i,r){var o=r(45);t.exports=function XHRLoader(t,i){var r=o(i,t.xhrSettings),a=new XMLHttpRequest;if(a.open("GET",t.src,r.async,r.user,r.password),a.responseType=t.xhrSettings.responseType,a.timeout=r.timeout,r.headers)for(var h in r.headers)a.setRequestHeader(h,r.headers[h]);return r.header&&r.headerValue&&a.setRequestHeader(r.header,r.headerValue),r.requestedWith&&a.setRequestHeader("X-Requested-With",r.requestedWith),r.overrideMimeType&&a.overrideMimeType(r.overrideMimeType),r.withCredentials&&(a.withCredentials=!0),a.onload=t.onLoad.bind(t,a),a.onerror=t.onError.bind(t,a),a.onprogress=t.onProgress.bind(t),a.send(),a}},function(t,i,r){var o=r(0),a=r(15),h=r(21),l=r(22),u=r(11),c=r(10),d=r(7),p=new o({Extends:h,initialize:function JSONFile(t,i,r,o,l){var p="json";if(d(i)){var g=i;i=u(g,"key"),r=u(g,"url"),o=u(g,"xhrSettings"),p=u(g,"extension",p),l=u(g,"dataKey",l)}var v={type:"json",cache:t.cacheManager.json,extension:p,responseType:"text",key:i,url:r,xhrSettings:o,config:l};h.call(this,t,v),d(r)&&(this.data=l?c(r,l):r,this.state=a.FILE_POPULATED)},onProcess:function onProcess(){if(this.state!==a.FILE_POPULATED){this.state=a.FILE_PROCESSING;try{var t=JSON.parse(this.xhrLoader.responseText)}catch(r){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),r}var i=this.config;this.data="string"==typeof i?c(t,i,t):t}this.onProcessComplete()}});l.register("json",(function(t,i,r,o){if(Array.isArray(t))for(var a=0;a<t.length;a++)this.addFile(new p(this,t[a]));else this.addFile(new p(this,t,i,o,r));return this})),t.exports=p},function(t,i,r){var o=new(r(0))({initialize:function MultiFile(t,i,r,o){var a=[];o.forEach((function(t){t&&a.push(t)})),this.loader=t,this.type=i,this.key=r,this.multiKeyIndex=t.multiKeyIndex++,this.files=a,this.complete=!1,this.pending=a.length,this.failed=0,this.config={},this.baseURL=t.baseURL,this.path=t.path,this.prefix=t.prefix;for(var h=0;h<a.length;h++)a[h].multiFile=this},isReadyToProcess:function isReadyToProcess(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function addToMultiFile(t){return this.files.push(t),t.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function onFileComplete(t){-1!==this.files.indexOf(t)&&this.pending--},onFileFailed:function onFileFailed(t){-1!==this.files.indexOf(t)&&this.failed++}});t.exports=o},function(t,i,r){var o=r(0),a=r(15),h=r(21),l=r(22),u=r(11),c=r(7),d=new o({Extends:h,initialize:function TextFile(t,i,r,o){var a="text",l="txt",d=t.cacheManager.text;if(c(i)){var p=i;i=u(p,"key"),r=u(p,"url"),o=u(p,"xhrSettings"),l=u(p,"extension",l),a=u(p,"type",a),d=u(p,"cache",d)}var g={type:a,cache:d,extension:l,responseType:"text",key:i,url:r,xhrSettings:o};h.call(this,t,g)},onProcess:function onProcess(){this.state=a.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});l.register("text",(function(t,i,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new d(this,t[o]));else this.addFile(new d(this,t,i,r));return this})),t.exports=d},function(t,i,r){var o=r(28),a=r(3),h=r(0),l=r(47),u=r(48),c=r(49),d=r(50),p=r(51),g=r(52),v=r(8),m=r(19),y=r(53),T=r(9),S=r(243),w=r(250),b=new h({Extends:y,Mixins:[l,u,c,d,p,g,w],initialize:function SpineGameObject(t,i,r,o,a,h,l){y.call(this,t,"Spine"),this.plugin=i,this.skeleton=null,this.skeletonData=null,this.state=null,this.stateData=null,this.root=null,this.bounds=null,this.drawDebug=!1,this.timeScale=1,this.displayOriginX=0,this.displayOriginY=0,this.preMultipliedAlpha=!1,this.blendMode=-1,this.setPosition(r,o),a&&this.setSkeleton(a,h,l)},willRender:function willRender(t,i){var r=!this.skeleton||!(15!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id);if(!i&&!r&&this.parentContainer){var o=this.plugin,a=o.sceneRenderer;o.gl&&a.batcher.isDrawing&&(a.end(),o.renderer.pipelines.rebind())}return r},setAlpha:function setAlpha(t,i){if(void 0===t&&(t=1),i){var r=this.findSlot(i);r&&(r.color.a=a(t,0,1))}else this.alpha=t;return this},alpha:{get:function get(){return this.skeleton.color.a},set:function set(t){var i=a(t,0,1);this.skeleton&&(this.skeleton.color.a=i),0===i?this.renderFlags&=-3:this.renderFlags|=2}},red:{get:function get(){return this.skeleton.color.r},set:function set(t){var i=a(t,0,1);this.skeleton&&(this.skeleton.color.r=i)}},green:{get:function get(){return this.skeleton.color.g},set:function set(t){var i=a(t,0,1);this.skeleton&&(this.skeleton.color.g=i)}},blue:{get:function get(){return this.skeleton.color.b},set:function set(t){var i=a(t,0,1);this.skeleton&&(this.skeleton.color.b=i)}},setColor:function setColor(t,i){void 0===t&&(t=16777215);var r=(t>>16&255)/255,o=(t>>8&255)/255,a=(255&t)/255,h=t>16777215?(t>>>24)/255:null,l=this.skeleton;if(i){var u=this.findSlot(i);u&&(l=u)}return l.color.r=r,l.color.g=o,l.color.b=a,null!==h&&(l.color.a=h),this},setSkeletonFromJSON:function setSkeletonFromJSON(t,i,r,o){return this.setSkeleton(t,i,r,o)},setSkeleton:function setSkeleton(t,i,r,o){this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications());var a=this.plugin.createSkeleton(t,o);this.skeletonData=a.skeletonData,this.preMultipliedAlpha=a.preMultipliedAlpha;var h=a.skeleton;return h.setSkin(),h.setToSetupPose(),this.skeleton=h,a=this.plugin.createAnimationState(h),this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications()),this.state=a.state,this.stateData=a.stateData,this.state.addListener({event:this.onEvent.bind(this),complete:this.onComplete.bind(this),start:this.onStart.bind(this),end:this.onEnd.bind(this),dispose:this.onDispose.bind(this),interrupted:this.onInterrupted.bind(this)}),i&&this.setAnimation(0,i,r),this.root=this.getRootBone(),this.root&&(this.root.rotation=T(v(this.rotation))+90),this.state.apply(h),h.updateCache(),this.updateSize()},onComplete:function onComplete(t){this.emit(S.COMPLETE,t)},onDispose:function onDispose(t){this.emit(S.DISPOSE,t)},onEnd:function onEnd(t){this.emit(S.END,t)},onEvent:function onEvent(t,i){this.emit(S.EVENT,t,i)},onInterrupted:function onInterrupted(t){this.emit(S.INTERRUPTED,t)},onStart:function onStart(t){this.emit(S.START,t)},refresh:function refresh(){return this.root&&(this.root.rotation=T(v(this.rotation))+90),this.updateSize(),this.skeleton.updateCache(),this},setSize:function setSize(t,i,r,o){var a=this.skeleton;return void 0===t&&(t=a.data.width),void 0===i&&(i=a.data.height),void 0===r&&(r=0),void 0===o&&(o=0),this.width=t,this.height=i,this.displayOriginX=a.x-r,this.displayOriginY=a.y-o,this},setOffset:function setOffset(t,i){var r=this.skeleton;return void 0===t&&(t=0),void 0===i&&(i=0),this.displayOriginX=r.x-t,this.displayOriginY=r.y-i,this},updateSize:function updateSize(){var t=this.skeleton,i=this.plugin.renderer.height,r=this.scaleX,o=this.scaleY;t.x=this.x,t.y=i-this.y,t.scaleX=1,t.scaleY=1,t.updateWorldTransform();var a=this.getBounds();return this.width=a.size.x,this.height=a.size.y,this.displayOriginX=this.x-a.offset.x,this.displayOriginY=this.y-(i-(this.height+a.offset.y)),t.scaleX=r,t.scaleY=o,t.updateWorldTransform(),this},scaleX:{get:function get(){return this._scaleX},set:function set(t){this._scaleX=t,this.refresh()}},scaleY:{get:function get(){return this._scaleY},set:function set(t){this._scaleY=t,this.refresh()}},getBoneList:function getBoneList(){var t=[],i=this.skeletonData;if(i)for(var r=0;r<i.bones.length;r++)t.push(i.bones[r].name);return t},getSkinList:function getSkinList(){var t=[],i=this.skeletonData;if(i)for(var r=0;r<i.skins.length;r++)t.push(i.skins[r].name);return t},getSlotList:function getSlotList(){for(var t=[],i=this.skeleton,r=0;r<i.slots.length;r++)t.push(i.slots[r].data.name);return t},getAnimationList:function getAnimationList(){var t=[],i=this.skeletonData;if(i)for(var r=0;r<i.animations.length;r++)t.push(i.animations[r].name);return t},getCurrentAnimation:function getCurrentAnimation(t){void 0===t&&(t=0);var i=this.state.getCurrent(t);if(i)return i.animation},play:function play(t,i,r){return this.setAnimation(0,t,i,r),this},setAnimation:function setAnimation(t,i,r,o){if(void 0===r&&(r=!1),void 0===o&&(o=!1),o&&this.state){var a=this.state.getCurrent(t);if(a&&a.animation.name===i&&!a.isComplete())return}if(this.findAnimation(i))return this.state.setAnimation(t,i,r)},addAnimation:function addAnimation(t,i,r,o){return void 0===r&&(r=!1),void 0===o&&(o=0),this.state.addAnimation(t,i,r,o)},setEmptyAnimation:function setEmptyAnimation(t,i){return this.state.setEmptyAnimation(t,i)},clearTrack:function clearTrack(t){return this.state.clearTrack(t),this},clearTracks:function clearTracks(){return this.state.clearTracks(),this},setSkinByName:function setSkinByName(t){var i=this.skeleton;return i.setSkinByName(t),i.setSlotsToSetupPose(),this.state.apply(i),this},setSkin:function setSkin(t){var i=this.skeleton;return i.setSkin(t),i.setSlotsToSetupPose(),this.state.apply(i),this},setMix:function setMix(t,i,r){return this.stateData.setMix(t,i,r),this},getAttachment:function getAttachment(t,i){return this.skeleton.getAttachment(t,i)},getAttachmentByName:function getAttachmentByName(t,i){return this.skeleton.getAttachmentByName(t,i)},setAttachment:function setAttachment(t,i){if(Array.isArray(t)&&Array.isArray(i)&&t.length===i.length)for(var r=0;r<t.length;r++)this.skeleton.setAttachment(t[r],i[r]);else this.skeleton.setAttachment(t,i);return this},setToSetupPose:function setToSetupPose(){return this.skeleton.setToSetupPose(),this},setSlotsToSetupPose:function setSlotsToSetupPose(){return this.skeleton.setSlotsToSetupPose(),this},setBonesToSetupPose:function setBonesToSetupPose(){return this.skeleton.setBonesToSetupPose(),this},getRootBone:function getRootBone(){return this.skeleton.getRootBone()},angleBoneToXY:function angleBoneToXY(t,i,r,h,l,u){void 0===h&&(h=0),void 0===l&&(l=0),void 0===u&&(u=360);var c=this.plugin.renderer.height,d=v(o(t.worldX,c-t.worldY,i,r)+m(h));return t.rotation=a(T(d),l,u),this},findBone:function findBone(t){return this.skeleton.findBone(t)},findBoneIndex:function findBoneIndex(t){return this.skeleton.findBoneIndex(t)},findSlot:function findSlot(t){return this.skeleton.findSlot(t)},findSlotIndex:function findSlotIndex(t){return this.skeleton.findSlotIndex(t)},findSkin:function findSkin(t){return this.skeletonData.findSkin(t)},findEvent:function findEvent(t){return this.skeletonData.findEvent(t)},findAnimation:function findAnimation(t){return this.skeletonData.findAnimation(t)},findIkConstraint:function findIkConstraint(t){return this.skeletonData.findIkConstraint(t)},findTransformConstraint:function findTransformConstraint(t){return this.skeletonData.findTransformConstraint(t)},findPathConstraint:function findPathConstraint(t){return this.skeletonData.findPathConstraint(t)},findPathConstraintIndex:function findPathConstraintIndex(t){return this.skeletonData.findPathConstraintIndex(t)},getBounds:function getBounds(){return this.plugin.getBounds(this.skeleton)},preUpdate:function preUpdate(t,i){var r=this.skeleton;this.state.update(i/1e3*this.timeScale),this.state.apply(r)},preDestroy:function preDestroy(){this.state&&(this.state.clearListeners(),this.state.clearListenerNotifications()),this.plugin=null,this.skeleton=null,this.skeletonData=null,this.state=null,this.stateData=null}});t.exports=b},function(t,i,r){var o=r(0),a=r(223),h=new o({initialize:function DataManager(t,i){this.parent=t,this.events=i,i||(this.events=t.events?t.events:t),this.list={},this.values={},this._frozen=!1,!t.hasOwnProperty("sys")&&this.events&&this.events.once(a.DESTROY,this.destroy,this)},get:function get(t){var i=this.list;if(Array.isArray(t)){for(var r=[],o=0;o<t.length;o++)r.push(i[t[o]]);return r}return i[t]},getAll:function getAll(){var t={};for(var i in this.list)this.list.hasOwnProperty(i)&&(t[i]=this.list[i]);return t},query:function query(t){var i={};for(var r in this.list)this.list.hasOwnProperty(r)&&r.match(t)&&(i[r]=this.list[r]);return i},set:function set(t,i){if(this._frozen)return this;if("string"==typeof t)return this.setValue(t,i);for(var r in t)this.setValue(r,t[r]);return this},inc:function inc(t,i){if(this._frozen)return this;void 0===i&&(i=1);var r=this.get(t);return void 0===r&&(r=0),this.set(t,r+i),this},toggle:function toggle(t){return this._frozen||this.set(t,!this.get(t)),this},setValue:function setValue(t,i){if(this._frozen)return this;if(this.has(t))this.values[t]=i;else{var r=this,o=this.list,h=this.events,l=this.parent;Object.defineProperty(this.values,t,{enumerable:!0,configurable:!0,get:function get(){return o[t]},set:function set(i){if(!r._frozen){var u=o[t];o[t]=i,h.emit(a.CHANGE_DATA,l,t,i,u),h.emit(a.CHANGE_DATA_KEY+t,l,i,u)}}}),o[t]=i,h.emit(a.SET_DATA,l,t,i)}return this},each:function each(t,i){for(var r=[this.parent,null,void 0],o=1;o<arguments.length;o++)r.push(arguments[o]);for(var a in this.list)r[1]=a,r[2]=this.list[a],t.apply(i,r);return this},merge:function merge(t,i){for(var r in void 0===i&&(i=!0),t)t.hasOwnProperty(r)&&(i||!i&&!this.has(r))&&this.setValue(r,t[r]);return this},remove:function remove(t){if(this._frozen)return this;if(!Array.isArray(t))return this.removeValue(t);for(var i=0;i<t.length;i++)this.removeValue(t[i]);return this},removeValue:function removeValue(t){if(this.has(t)){var i=this.list[t];delete this.list[t],delete this.values[t],this.events.emit(a.REMOVE_DATA,this.parent,t,i)}return this},pop:function pop(t){var i=void 0;return!this._frozen&&this.has(t)&&(i=this.list[t],delete this.list[t],delete this.values[t],this.events.emit(a.REMOVE_DATA,this.parent,t,i)),i},has:function has(t){return this.list.hasOwnProperty(t)},setFreeze:function setFreeze(t){return this._frozen=t,this},reset:function reset(){for(var t in this.list)delete this.list[t],delete this.values[t];return this._frozen=!1,this},destroy:function destroy(){this.reset(),this.events.off(a.CHANGE_DATA),this.events.off(a.SET_DATA),this.events.off(a.REMOVE_DATA),this.parent=null},freeze:{get:function get(){return this._frozen},set:function set(t){this._frozen=!!t}},count:{get:function get(){var t=0;for(var i in this.list)void 0!==this.list[i]&&t++;return t}}});t.exports=h},function(t,i,r){t.exports={CHANGE_DATA:r(224),CHANGE_DATA_KEY:r(225),DESTROY:r(226),REMOVE_DATA:r(227),SET_DATA:r(228)}},function(t,i){t.exports="changedata"},function(t,i){t.exports="changedata-"},function(t,i){t.exports="destroy"},function(t,i){t.exports="removedata"},function(t,i){t.exports="setdata"},function(t,i,r){var o=Object.prototype.hasOwnProperty,a="~";function Events(){}function EE(t,i,r){this.fn=t,this.context=i,this.once=r||!1}function addListener(t,i,r,o,h){if("function"!=typeof r)throw new TypeError("The listener must be a function");var l=new EE(r,o||t,h),u=a?a+i:i;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],l]:t._events[u].push(l):(t._events[u]=l,t._eventsCount++),t}function clearEvent(t,i){0==--t._eventsCount?t._events=new Events:delete t._events[i]}function EventEmitter(){this._events=new Events,this._eventsCount=0}Object.create&&(Events.prototype=Object.create(null),(new Events).__proto__||(a=!1)),EventEmitter.prototype.eventNames=function eventNames(){var t,i,r=[];if(0===this._eventsCount)return r;for(i in t=this._events)o.call(t,i)&&r.push(a?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},EventEmitter.prototype.listeners=function listeners(t){var i=a?a+t:t,r=this._events[i];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,h=r.length,l=new Array(h);o<h;o++)l[o]=r[o].fn;return l},EventEmitter.prototype.listenerCount=function listenerCount(t){var i=a?a+t:t,r=this._events[i];return r?r.fn?1:r.length:0},EventEmitter.prototype.emit=function emit(t,i,r,o,h,l){var u=a?a+t:t;if(!this._events[u])return!1;var c,d,p=this._events[u],g=arguments.length;if(p.fn){switch(p.once&&this.removeListener(t,p.fn,void 0,!0),g){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,i),!0;case 3:return p.fn.call(p.context,i,r),!0;case 4:return p.fn.call(p.context,i,r,o),!0;case 5:return p.fn.call(p.context,i,r,o,h),!0;case 6:return p.fn.call(p.context,i,r,o,h,l),!0}for(d=1,c=new Array(g-1);d<g;d++)c[d-1]=arguments[d];p.fn.apply(p.context,c)}else{var v,m=p.length;for(d=0;d<m;d++)switch(p[d].once&&this.removeListener(t,p[d].fn,void 0,!0),g){case 1:p[d].fn.call(p[d].context);break;case 2:p[d].fn.call(p[d].context,i);break;case 3:p[d].fn.call(p[d].context,i,r);break;case 4:p[d].fn.call(p[d].context,i,r,o);break;default:if(!c)for(v=1,c=new Array(g-1);v<g;v++)c[v-1]=arguments[v];p[d].fn.apply(p[d].context,c)}}return!0},EventEmitter.prototype.on=function on(t,i,r){return addListener(this,t,i,r,!1)},EventEmitter.prototype.once=function once(t,i,r){return addListener(this,t,i,r,!0)},EventEmitter.prototype.removeListener=function removeListener(t,i,r,o){var h=a?a+t:t;if(!this._events[h])return this;if(!i)return clearEvent(this,h),this;var l=this._events[h];if(l.fn)l.fn!==i||o&&!l.once||r&&l.context!==r||clearEvent(this,h);else{for(var u=0,c=[],d=l.length;u<d;u++)(l[u].fn!==i||o&&!l[u].once||r&&l[u].context!==r)&&c.push(l[u]);c.length?this._events[h]=1===c.length?c[0]:c:clearEvent(this,h)}return this},EventEmitter.prototype.removeAllListeners=function removeAllListeners(t){var i;return t?(i=a?a+t:t,this._events[i]&&clearEvent(this,i)):(this._events=new Events,this._eventsCount=0),this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prefixed=a,EventEmitter.EventEmitter=EventEmitter,t.exports=EventEmitter},function(t,i){t.exports="addedtoscene"},function(t,i){t.exports="destroy"},function(t,i){t.exports="removedfromscene"},function(t,i){t.exports="complete"},function(t,i){t.exports="created"},function(t,i){t.exports="error"},function(t,i){t.exports="loop"},function(t,i){t.exports="play"},function(t,i){t.exports="seeked"},function(t,i){t.exports="seeking"},function(t,i){t.exports="stop"},function(t,i){t.exports="timeout"},function(t,i){t.exports="unlocked"},function(t,i,r){t.exports={COMPLETE:r(244),DISPOSE:r(245),END:r(246),EVENT:r(247),INTERRUPTED:r(248),START:r(249)}},function(t,i){t.exports="complete"},function(t,i){t.exports="dispose"},function(t,i){t.exports="end"},function(t,i){t.exports="event"},function(t,i){t.exports="interrupted"},function(t,i){t.exports="start"},function(t,i,r){var o=r(1),a=r(1),h=r(1);o=r(251),h=r(252),a=r(253),t.exports={renderWebGL:o,renderCanvas:a,renderDirect:h}},function(t,i,r){var o=r(3),a=r(8),h=r(56),l=r(9),u=r(6);t.exports=function SpineGameObjectWebGLRenderer(t,i,r,c,d){var p=i.plugin,g=i.skeleton,v=p.sceneRenderer;t.newType&&(t.pipelines.clear(),v.begin());var m=i.scrollFactorX,y=i.scrollFactorY,T=g.color.a;d&&(i.scrollFactorX=d.scrollFactorX,i.scrollFactorY=d.scrollFactorY,g.color.a=o(T*d.alpha,0,1)),r.addToRenderList(i);var S=h(i,r,c).calc,w=t.height;if(g.x=S.tx,g.y=w-S.ty,g.scaleX=S.scaleX,g.scaleY=S.scaleY,i.scaleX<0?(g.scaleX*=-1,i.root.rotation=u(l(S.rotationNormalized)-180,0,360)):i.root.rotation=u(l(a(S.rotationNormalized))+90,0,360),i.scaleY<0&&(g.scaleY*=-1,i.scaleX<0?i.root.rotation-=2*l(S.rotationNormalized):i.root.rotation+=2*l(S.rotationNormalized)),g.updateWorldTransform(),v.drawSkeleton(g,i.preMultipliedAlpha),d&&(i.scrollFactorX=m,i.scrollFactorY=y,g.color.a=T),p.drawDebug||i.drawDebug){var b=g.x,C=g.y;g.x=0,g.y=0,v.drawSkeletonDebug(g,i.preMultipliedAlpha),g.x=b,g.y=C}t.nextTypeMatch||(v.end(),t.pipelines.rebind())}},function(t,i,r){var o=r(3),a=r(8),h=r(56),l=r(9),u=r(6);t.exports=function SpineGameObjectWebGLDirect(t,i,r,c,d){var p=i.plugin,g=i.skeleton,v=p.sceneRenderer;t.pipelines.clear(),v.begin();var m=i.scrollFactorX,y=i.scrollFactorY,T=g.color.a;d&&(i.scrollFactorX=d.scrollFactorX,i.scrollFactorY=d.scrollFactorY,g.color.a=o(T*d.alpha,0,1)),r.addToRenderList(i);var S=h(i,r,c).calc,w=t.height;if(g.x=S.tx,g.y=w-S.ty,g.scaleX=S.scaleX,g.scaleY=S.scaleY,i.scaleX<0?(g.scaleX*=-1,i.root.rotation=u(l(S.rotationNormalized)-180,0,360)):i.root.rotation=u(l(a(S.rotationNormalized))+90,0,360),i.scaleY<0&&(g.scaleY*=-1,i.scaleX<0?i.root.rotation-=2*l(S.rotationNormalized):i.root.rotation+=2*l(S.rotationNormalized)),g.updateWorldTransform(),v.drawSkeleton(g,i.preMultipliedAlpha),d&&(i.scrollFactorX=m,i.scrollFactorY=y,g.color.a=T),p.drawDebug||i.drawDebug){var b=g.x,C=g.y;g.x=0,g.y=0,v.drawSkeletonDebug(g,i.preMultipliedAlpha),g.x=b,g.y=C}v.end(),t.pipelines.rebind()}},function(t,i,r){var o=r(8),a=r(9),h=r(6);t.exports=function SpineGameObjectCanvasRenderer(t,i,r,l){var u=t.currentContext,c=i.plugin,d=i.skeleton,p=c.skeletonRenderer,g=t._tempMatrix1,v=t._tempMatrix2,m=t._tempMatrix3;r.addToRenderList(i),v.applyITRS(i.x,i.y,i.rotation,Math.abs(i.scaleX),Math.abs(i.scaleY)),g.copyFrom(r.matrix),l?(g.multiplyWithOffset(l,-r.scrollX*i.scrollFactorX,-r.scrollY*i.scrollFactorY),v.e=i.x,v.f=i.y,g.multiply(v,m)):(v.e-=r.scrollX*i.scrollFactorX,v.f-=r.scrollY*i.scrollFactorY,g.multiply(v,m)),d.x=m.tx,d.y=m.ty,d.scaleX=m.scaleX,d.scaleY=-1*m.scaleY,i.scaleX<0?(d.scaleX*=-1,i.root.rotation=a(m.rotationNormalized)):i.root.rotation=h(a(o(m.rotationNormalized))+90,0,360),i.scaleY<0&&(d.scaleY*=-1,i.scaleX<0?i.root.rotation-=2*a(m.rotationNormalized):i.root.rotation+=2*a(m.rotationNormalized)),r.renderToTexture&&(d.y=m.ty,d.scaleY*=-1),d.updateWorldTransform(),p.ctx=u,p.debugRendering=c.drawDebug||i.drawDebug,u.save(),p.draw(d),u.restore()}},function(t,i,r){var o=r(0),a=r(255),h=r(347),l=new o({Extends:a,Mixins:[h],initialize:function SpineContainer(t,i,r,o,h){a.call(this,t,r,o,h),this.type="Spine",this.plugin=i},preDestroy:function preDestroy(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[],this._displayList=null,this.plugin=null}});t.exports=l},function(t,i,r){var o=r(256),a=r(17),h=r(0),l=r(293),u=r(55),c=r(53),d=r(25),p=r(343),g=r(346),v=r(2),m=new h({Extends:c,Mixins:[l.AlphaSingle,l.BlendMode,l.ComputedSize,l.Depth,l.Mask,l.Pipeline,l.Transform,l.Visible,p],initialize:function Container(t,i,r,o){c.call(this,t,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new l.TransformMatrix,this.tempTransformMatrix=new l.TransformMatrix,this._sortKey="",this._sysEvents=t.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(i,r),this.clearAlpha(),this.setBlendMode(a.SKIP_CHECK),o&&this.add(o)},originX:{get:function get(){return.5}},originY:{get:function get(){return.5}},displayOriginX:{get:function get(){return.5*this.width}},displayOriginY:{get:function get(){return.5*this.height}},setExclusive:function setExclusive(t){return void 0===t&&(t=!0),this.exclusive=t,this},getBounds:function getBounds(t){if(void 0===t&&(t=new d),t.setTo(this.x,this.y,0,0),this.parentContainer){var i=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y);t.setTo(i.x,i.y,0,0)}if(this.list.length>0){var r=this.list,o=new d,a=!1;t.setEmpty();for(var h=0;h<r.length;h++){var l=r[h];l.getBounds&&(l.getBounds(o),a?g(o,t,t):(t.setTo(o.x,o.y,o.width,o.height),a=!0))}}return t},addHandler:function addHandler(t){t.once(u.DESTROY,this.remove,this),this.exclusive&&(t.parentContainer&&t.parentContainer.remove(t),t.removeFromDisplayList(),t.parentContainer=this)},removeHandler:function removeHandler(t){t.off(u.DESTROY,this.remove),this.exclusive&&(t.parentContainer=null,t.addToDisplayList())},pointToContainer:function pointToContainer(t,i){void 0===i&&(i=new v),this.parentContainer?this.parentContainer.pointToContainer(t,i):i=new v(t.x,t.y);var r=this.tempTransformMatrix;return r.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),r.invert(),r.transformPoint(t.x,t.y,i),i},getBoundsTransformMatrix:function getBoundsTransformMatrix(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function add(t){return o.Add(this.list,t,this.maxSize,this.addHandler,this),this},addAt:function addAt(t,i){return o.AddAt(this.list,t,i,this.maxSize,this.addHandler,this),this},getAt:function getAt(t){return this.list[t]},getIndex:function getIndex(t){return this.list.indexOf(t)},sort:function sort(t,i){return t?(void 0===i&&(i=function handler(i,r){return i[t]-r[t]}),o.StableSort(this.list,i),this):this},getByName:function getByName(t){return o.GetFirst(this.list,"name",t)},getRandom:function getRandom(t,i){return o.GetRandom(this.list,t,i)},getFirst:function getFirst(t,i,r,a){return o.GetFirst(this.list,t,i,r,a)},getAll:function getAll(t,i,r,a){return o.GetAll(this.list,t,i,r,a)},count:function count(t,i,r,a){return o.CountAllMatching(this.list,t,i,r,a)},swap:function swap(t,i){return o.Swap(this.list,t,i),this},moveTo:function moveTo(t,i){return o.MoveTo(this.list,t,i),this},remove:function remove(t,i){var r=o.Remove(this.list,t,this.removeHandler,this);if(i&&r){Array.isArray(r)||(r=[r]);for(var a=0;a<r.length;a++)r[a].destroy()}return this},removeAt:function removeAt(t,i){var r=o.RemoveAt(this.list,t,this.removeHandler,this);return i&&r&&r.destroy(),this},removeBetween:function removeBetween(t,i,r){var a=o.RemoveBetween(this.list,t,i,this.removeHandler,this);if(r)for(var h=0;h<a.length;h++)a[h].destroy();return this},removeAll:function removeAll(t){var i=o.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(t)for(var r=0;r<i.length;r++)i[r].destroy();return this},bringToTop:function bringToTop(t){return o.BringToTop(this.list,t),this},sendToBack:function sendToBack(t){return o.SendToBack(this.list,t),this},moveUp:function moveUp(t){return o.MoveUp(this.list,t),this},moveDown:function moveDown(t){return o.MoveDown(this.list,t),this},reverse:function reverse(){return this.list.reverse(),this},shuffle:function shuffle(){return o.Shuffle(this.list),this},replace:function replace(t,i,r){return o.Replace(this.list,t,i)&&(this.addHandler(i),this.removeHandler(t),r&&t.destroy()),this},exists:function exists(t){return this.list.indexOf(t)>-1},setAll:function setAll(t,i,r,a){return o.SetAll(this.list,t,i,r,a),this},each:function each(t,i){var r,o=[null],a=this.list.slice(),h=a.length;for(r=2;r<arguments.length;r++)o.push(arguments[r]);for(r=0;r<h;r++)o[0]=a[r],t.apply(i,o);return this},iterate:function iterate(t,i){var r,o=[null];for(r=2;r<arguments.length;r++)o.push(arguments[r]);for(r=0;r<this.list.length;r++)o[0]=this.list[r],t.apply(i,o);return this},setScrollFactor:function setScrollFactor(t,i,r){return void 0===i&&(i=t),void 0===r&&(r=!1),this.scrollFactorX=t,this.scrollFactorY=i,r&&(o.SetAll(this.list,"scrollFactorX",t),o.SetAll(this.list,"scrollFactorY",i)),this},length:{get:function get(){return this.list.length}},first:{get:function get(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function get(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function get(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function get(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function preDestroy(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});t.exports=m},function(t,i,r){t.exports={Matrix:r(257),Add:r(266),AddAt:r(267),BringToTop:r(268),CountAllMatching:r(269),Each:r(270),EachInRange:r(271),FindClosestInSorted:r(272),GetAll:r(273),GetFirst:r(274),GetRandom:r(275),MoveDown:r(276),MoveTo:r(277),MoveUp:r(278),NumberArray:r(279),NumberArrayStep:r(280),QuickSelect:r(281),Range:r(282),Remove:r(283),RemoveAt:r(284),RemoveBetween:r(285),RemoveRandomElement:r(286),Replace:r(287),RotateLeft:r(58),RotateRight:r(59),SafeRange:r(5),SendToBack:r(288),SetAll:r(289),Shuffle:r(60),SortByDigits:r(290),SpliceOne:r(12),StableSort:r(291),Swap:r(292)}},function(t,i,r){t.exports={CheckMatrix:r(24),MatrixToString:r(258),ReverseColumns:r(260),ReverseRows:r(261),Rotate180:r(262),RotateLeft:r(263),RotateMatrix:r(16),RotateRight:r(264),Translate:r(265),TransposeMatrix:r(57)}},function(t,i,r){var o=r(259),a=r(24);t.exports=function MatrixToString(t){var i="";if(!a(t))return i;for(var r=0;r<t.length;r++){for(var h=0;h<t[r].length;h++){var l=t[r][h].toString();i+="undefined"!==l?o(l,2):"?",h<t[r].length-1&&(i+=" |")}if(r<t.length-1){i+="\n";for(var u=0;u<t[r].length;u++)i+="---",u<t[r].length-1&&(i+="+");i+="\n"}}return i}},function(t,i){t.exports=function Pad(t,i,r,o){void 0===i&&(i=0),void 0===r&&(r=" "),void 0===o&&(o=3);var a=0;if(i+1>=(t=t.toString()).length)switch(o){case 1:t=new Array(i+1-t.length).join(r)+t;break;case 3:var h=Math.ceil((a=i-t.length)/2);t=new Array(a-h+1).join(r)+t+new Array(h+1).join(r);break;default:t+=new Array(i+1-t.length).join(r)}return t}},function(t,i){t.exports=function ReverseColumns(t){return t.reverse()}},function(t,i){t.exports=function ReverseRows(t){for(var i=0;i<t.length;i++)t[i].reverse();return t}},function(t,i,r){var o=r(16);t.exports=function Rotate180(t){return o(t,180)}},function(t,i,r){var o=r(16);t.exports=function RotateLeft(t){return o(t,90)}},function(t,i,r){var o=r(16);t.exports=function RotateRight(t){return o(t,-90)}},function(t,i,r){var o=r(58),a=r(59);t.exports=function TranslateMatrix(t,i,r){if(void 0===i&&(i=0),void 0===r&&(r=0),0!==r&&(r<0?o(t,Math.abs(r)):a(t,r)),0!==i)for(var h=0;h<t.length;h++){var l=t[h];i<0?o(l,Math.abs(i)):a(l,i)}return t}},function(t,i){t.exports=function Add(t,i,r,o,a){if(void 0===a&&(a=t),r>0){var h=r-t.length;if(h<=0)return null}if(!Array.isArray(i))return-1===t.indexOf(i)?(t.push(i),o&&o.call(a,i),i):null;for(var l=i.length-1;l>=0;)-1!==t.indexOf(i[l])&&i.splice(l,1),l--;if(0===(l=i.length))return null;r>0&&l>h&&(i.splice(h),l=h);for(var u=0;u<l;u++){var c=i[u];t.push(c),o&&o.call(a,c)}return i}},function(t,i){t.exports=function AddAt(t,i,r,o,a,h){if(void 0===r&&(r=0),void 0===h&&(h=t),o>0){var l=o-t.length;if(l<=0)return null}if(!Array.isArray(i))return-1===t.indexOf(i)?(t.splice(r,0,i),a&&a.call(h,i),i):null;for(var u=i.length-1;u>=0;)-1!==t.indexOf(i[u])&&i.pop(),u--;if(0===(u=i.length))return null;o>0&&u>l&&(i.splice(l),u=l);for(var c=u-1;c>=0;c--){var d=i[c];t.splice(r,0,d),a&&a.call(h,d)}return i}},function(t,i){t.exports=function BringToTop(t,i){var r=t.indexOf(i);return-1!==r&&r<t.length&&(t.splice(r,1),t.push(i)),i}},function(t,i,r){var o=r(5);t.exports=function CountAllMatching(t,i,r,a,h){void 0===a&&(a=0),void 0===h&&(h=t.length);var l=0;if(o(t,a,h))for(var u=a;u<h;u++){t[u][i]===r&&l++}return l}},function(t,i){t.exports=function Each(t,i,r){var o,a=[null];for(o=3;o<arguments.length;o++)a.push(arguments[o]);for(o=0;o<t.length;o++)a[0]=t[o],i.apply(r,a);return t}},function(t,i,r){var o=r(5);t.exports=function EachInRange(t,i,r,a,h){if(void 0===a&&(a=0),void 0===h&&(h=t.length),o(t,a,h)){var l,u=[null];for(l=5;l<arguments.length;l++)u.push(arguments[l]);for(l=a;l<h;l++)u[0]=t[l],i.apply(r,u)}return t}},function(t,i){t.exports=function FindClosestInSorted(t,i,r){if(!i.length)return NaN;if(1===i.length)return i[0];var o,a,h=1;if(r){if(t<i[0][r])return i[0];for(;i[h][r]<t;)h++}else for(;i[h]<t;)h++;return h>i.length&&(h=i.length),r?(o=i[h-1][r],(a=i[h][r])-t<=t-o?i[h]:i[h-1]):(o=i[h-1],(a=i[h])-t<=t-o?a:o)}},function(t,i,r){var o=r(5);t.exports=function GetAll(t,i,r,a,h){void 0===a&&(a=0),void 0===h&&(h=t.length);var l=[];if(o(t,a,h))for(var u=a;u<h;u++){var c=t[u];(!i||i&&void 0===r&&c.hasOwnProperty(i)||i&&void 0!==r&&c[i]===r)&&l.push(c)}return l}},function(t,i,r){var o=r(5);t.exports=function GetFirst(t,i,r,a,h){if(void 0===a&&(a=0),void 0===h&&(h=t.length),o(t,a,h))for(var l=a;l<h;l++){var u=t[l];if(!i||i&&void 0===r&&u.hasOwnProperty(i)||i&&void 0!==r&&u[i]===r)return u}return null}},function(t,i){t.exports=function GetRandom(t,i,r){void 0===i&&(i=0),void 0===r&&(r=t.length);var o=i+Math.floor(Math.random()*r);return void 0===t[o]?null:t[o]}},function(t,i){t.exports=function MoveDown(t,i){var r=t.indexOf(i);if(r>0){var o=t[r-1],a=t.indexOf(o);t[r]=o,t[a]=i}return t}},function(t,i){t.exports=function MoveTo(t,i,r){var o=t.indexOf(i);if(-1===o||r<0||r>=t.length)throw new Error("Supplied index out of bounds");return o!==r&&(t.splice(o,1),t.splice(r,0,i)),i}},function(t,i){t.exports=function MoveUp(t,i){var r=t.indexOf(i);if(-1!==r&&r<t.length-1){var o=t[r+1],a=t.indexOf(o);t[r]=o,t[a]=i}return t}},function(t,i){t.exports=function NumberArray(t,i,r,o){var a,h=[],l=!1;if((r||o)&&(l=!0,r||(r=""),o||(o="")),i<t)for(a=t;a>=i;a--)l?h.push(r+a.toString()+o):h.push(a);else for(a=t;a<=i;a++)l?h.push(r+a.toString()+o):h.push(a);return h}},function(t,i,r){var o=r(40);t.exports=function NumberArrayStep(t,i,r){void 0===t&&(t=0),void 0===i&&(i=null),void 0===r&&(r=1),null===i&&(i=t,t=0);for(var a=[],h=Math.max(o((i-t)/(r||1)),0),l=0;l<h;l++)a.push(t),t+=r;return a}},function(t,i){function swap(t,i,r){var o=t[i];t[i]=t[r],t[r]=o}function defaultCompare(t,i){return t<i?-1:t>i?1:0}t.exports=function QuickSelect(t,i,r,o,a){for(void 0===r&&(r=0),void 0===o&&(o=t.length-1),void 0===a&&(a=defaultCompare);o>r;){if(o-r>600){var h=o-r+1,l=i-r+1,u=Math.log(h),c=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*c*(h-c)/h)*(l-h/2<0?-1:1);QuickSelect(t,i,Math.max(r,Math.floor(i-l*c/h+d)),Math.min(o,Math.floor(i+(h-l)*c/h+d)),a)}var p=t[i],g=r,v=o;for(swap(t,r,i),a(t[o],p)>0&&swap(t,r,o);g<v;){for(swap(t,g,v),g++,v--;a(t[g],p)<0;)g++;for(;a(t[v],p)>0;)v--}0===a(t[r],p)?swap(t,r,v):swap(t,++v,o),v<=i&&(r=v+1),i<=v&&(o=v-1)}}},function(t,i,r){var o=r(10),a=r(60),h=function BuildChunk(t,i,r){for(var o=[],a=0;a<t.length;a++)for(var h=0;h<i.length;h++)for(var l=0;l<r;l++)o.push({a:t[a],b:i[h]});return o};t.exports=function Range(t,i,r){var l=o(r,"max",0),u=o(r,"qty",1),c=o(r,"random",!1),d=o(r,"randomB",!1),p=o(r,"repeat",0),g=o(r,"yoyo",!1),v=[];if(d&&a(i),-1===p)if(0===l)p=0;else{var m=t.length*i.length*u;g&&(m*=2),p=Math.ceil(l/m)}for(var y=0;y<=p;y++){var T=h(t,i,u);c&&a(T),v=v.concat(T),g&&(T.reverse(),v=v.concat(T))}return l&&v.splice(l),v}},function(t,i,r){var o=r(12);t.exports=function Remove(t,i,r,a){var h;if(void 0===a&&(a=t),!Array.isArray(i))return-1!==(h=t.indexOf(i))?(o(t,h),r&&r.call(a,i),i):null;for(var l=i.length-1,u=[];l>=0;){var c=i[l];-1!==(h=t.indexOf(c))&&(o(t,h),u.push(c),r&&r.call(a,c)),l--}return u}},function(t,i,r){var o=r(12);t.exports=function RemoveAt(t,i,r,a){if(void 0===a&&(a=t),i<0||i>t.length-1)throw new Error("Index out of bounds");var h=o(t,i);return r&&r.call(a,h),h}},function(t,i,r){var o=r(5);t.exports=function RemoveBetween(t,i,r,a,h){if(void 0===i&&(i=0),void 0===r&&(r=t.length),void 0===h&&(h=t),o(t,i,r)){var l=r-i,u=t.splice(i,l);if(a)for(var c=0;c<u.length;c++){var d=u[c];a.call(h,d)}return u}return[]}},function(t,i,r){var o=r(12);t.exports=function RemoveRandomElement(t,i,r){void 0===i&&(i=0),void 0===r&&(r=t.length);var a=i+Math.floor(Math.random()*r);return o(t,a)}},function(t,i){t.exports=function Replace(t,i,r){var o=t.indexOf(i),a=t.indexOf(r);return-1!==o&&-1===a&&(t[o]=r,!0)}},function(t,i){t.exports=function SendToBack(t,i){var r=t.indexOf(i);return-1!==r&&r>0&&(t.splice(r,1),t.unshift(i)),i}},function(t,i,r){var o=r(5);t.exports=function SetAll(t,i,r,a,h){if(void 0===a&&(a=0),void 0===h&&(h=t.length),o(t,a,h))for(var l=a;l<h;l++){var u=t[l];u.hasOwnProperty(i)&&(u[i]=r)}return t}},function(t,i){t.exports=function SortByDigits(t){var i=/\D/g;return t.sort((function(t,r){return parseInt(t.replace(i,""),10)-parseInt(r.replace(i,""),10)})),t}},function(t,i){function Compare(t,i){return String(t).localeCompare(i)}function RunPass(t,i,r,o){var a,h,l,u,c,d=t.length,p=0,g=2*r;for(a=0;a<d;a+=g)for(l=(h=a+r)+r,h>d&&(h=d),l>d&&(l=d),u=a,c=h;;)if(u<h&&c<l)i(t[u],t[c])<=0?o[p++]=t[u++]:o[p++]=t[c++];else if(u<h)o[p++]=t[u++];else{if(!(c<l))break;o[p++]=t[c++]}}t.exports=function StableSort(t,i){void 0===i&&(i=Compare);var r=function Process(t,i){var r=t.length;if(r<=1)return t;for(var o=new Array(r),a=1;a<r;a*=2){RunPass(t,i,a,o);var h=t;t=o,o=h}return t}(t,i);return r!==t&&RunPass(r,null,t.length,t),t}},function(t,i){t.exports=function Swap(t,i,r){if(i!==r){var o=t.indexOf(i),a=t.indexOf(r);if(o<0||a<0)throw new Error("Supplied items must be elements of the same array");return t[o]=r,t[a]=i,t}}},function(t,i,r){t.exports={Alpha:r(294),AlphaSingle:r(295),BlendMode:r(296),ComputedSize:r(47),Crop:r(297),Depth:r(48),Flip:r(49),GetBounds:r(298),Mask:r(307),Origin:r(332),PathFollower:r(333),Pipeline:r(336),ScrollFactor:r(50),Size:r(339),Texture:r(340),TextureCrop:r(341),Tint:r(342),ToJSON:r(54),Transform:r(51),TransformMatrix:r(23),Visible:r(52)}},function(t,i,r){var o=r(3),a={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function clearAlpha(){return this.setAlpha(1)},setAlpha:function setAlpha(t,i,r,a){return void 0===t&&(t=1),void 0===i?this.alpha=t:(this._alphaTL=o(t,0,1),this._alphaTR=o(i,0,1),this._alphaBL=o(r,0,1),this._alphaBR=o(a,0,1)),this},alpha:{get:function get(){return this._alpha},set:function set(t){var i=o(t,0,1);this._alpha=i,this._alphaTL=i,this._alphaTR=i,this._alphaBL=i,this._alphaBR=i,0===i?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function get(){return this._alphaTL},set:function set(t){var i=o(t,0,1);this._alphaTL=i,0!==i&&(this.renderFlags|=2)}},alphaTopRight:{get:function get(){return this._alphaTR},set:function set(t){var i=o(t,0,1);this._alphaTR=i,0!==i&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function get(){return this._alphaBL},set:function set(t){var i=o(t,0,1);this._alphaBL=i,0!==i&&(this.renderFlags|=2)}},alphaBottomRight:{get:function get(){return this._alphaBR},set:function set(t){var i=o(t,0,1);this._alphaBR=i,0!==i&&(this.renderFlags|=2)}}};t.exports=a},function(t,i,r){var o=r(3),a={_alpha:1,clearAlpha:function clearAlpha(){return this.setAlpha(1)},setAlpha:function setAlpha(t){return void 0===t&&(t=1),this.alpha=t,this},alpha:{get:function get(){return this._alpha},set:function set(t){var i=o(t,0,1);this._alpha=i,0===i?this.renderFlags&=-3:this.renderFlags|=2}}};t.exports=a},function(t,i,r){var o=r(17),a={_blendMode:o.NORMAL,blendMode:{get:function get(){return this._blendMode},set:function set(t){"string"==typeof t&&(t=o[t]),(t|=0)>=-1&&(this._blendMode=t)}},setBlendMode:function setBlendMode(t){return this.blendMode=t,this}};t.exports=a},function(t,i){var r={texture:null,frame:null,isCropped:!1,setCrop:function setCrop(t,i,r,o){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,i,r,o,this.flipX,this.flipY);else{var a=t;this.frame.setCropUVs(this._crop,a.x,a.y,a.width,a.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function resetCropObject(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};t.exports=r},function(t,i,r){var o=r(25),a=r(39),h=r(2),l={prepareBoundsOutput:function prepareBoundsOutput(t,i){(void 0===i&&(i=!1),0!==this.rotation&&a(t,this.x,this.y,this.rotation),i&&this.parentContainer)&&this.parentContainer.getBoundsTransformMatrix().transformPoint(t.x,t.y,t);return t},getCenter:function getCenter(t){return void 0===t&&(t=new h),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,t},getTopLeft:function getTopLeft(t,i){return t||(t=new h),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,i)},getTopCenter:function getTopCenter(t,i){return t||(t=new h),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,i)},getTopRight:function getTopRight(t,i){return t||(t=new h),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,i)},getLeftCenter:function getLeftCenter(t,i){return t||(t=new h),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,i)},getRightCenter:function getRightCenter(t,i){return t||(t=new h),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,i)},getBottomLeft:function getBottomLeft(t,i){return t||(t=new h),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,i)},getBottomCenter:function getBottomCenter(t,i){return t||(t=new h),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,i)},getBottomRight:function getBottomRight(t,i){return t||(t=new h),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,i)},getBounds:function getBounds(t){var i,r,a,h,l,u,c,d;if(void 0===t&&(t=new o),this.parentContainer){var p=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(t),p.transformPoint(t.x,t.y,t),i=t.x,r=t.y,this.getTopRight(t),p.transformPoint(t.x,t.y,t),a=t.x,h=t.y,this.getBottomLeft(t),p.transformPoint(t.x,t.y,t),l=t.x,u=t.y,this.getBottomRight(t),p.transformPoint(t.x,t.y,t),c=t.x,d=t.y}else this.getTopLeft(t),i=t.x,r=t.y,this.getTopRight(t),a=t.x,h=t.y,this.getBottomLeft(t),l=t.x,u=t.y,this.getBottomRight(t),c=t.x,d=t.y;return t.x=Math.min(i,a,l,c),t.y=Math.min(r,h,u,d),t.width=Math.max(i,a,l,c)-t.x,t.height=Math.max(r,h,u,d)-t.y,t}};t.exports=l},function(t,i){t.exports=function Contains(t,i,r){return!(t.width<=0||t.height<=0)&&(t.x<=i&&t.x+t.width>=i&&t.y<=r&&t.y+t.height>=r)}},function(t,i,r){var o=r(61),a=r(62);t.exports=function GetPoints(t,i,r,h){void 0===h&&(h=[]),!i&&r>0&&(i=a(t)/r);for(var l=0;l<i;l++){var u=l/i;h.push(o(t,u))}return h}},function(t,i,r){var o=r(0),a=r(302),h=r(303),l=r(26),u=r(305),c=r(2),d=new o({initialize:function Line(t,i,r,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=0),this.type=l.LINE,this.x1=t,this.y1=i,this.x2=r,this.y2=o},getPoint:function getPoint(t,i){return a(this,t,i)},getPoints:function getPoints(t,i,r){return h(this,t,i,r)},getRandomPoint:function getRandomPoint(t){return u(this,t)},setTo:function setTo(t,i,r,o){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=0),this.x1=t,this.y1=i,this.x2=r,this.y2=o,this},getPointA:function getPointA(t){return void 0===t&&(t=new c),t.set(this.x1,this.y1),t},getPointB:function getPointB(t){return void 0===t&&(t=new c),t.set(this.x2,this.y2),t},left:{get:function get(){return Math.min(this.x1,this.x2)},set:function set(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function get(){return Math.max(this.x1,this.x2)},set:function set(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function get(){return Math.min(this.y1,this.y2)},set:function set(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function get(){return Math.max(this.y1,this.y2)},set:function set(t){this.y1>this.y2?this.y1=t:this.y2=t}}});t.exports=d},function(t,i,r){var o=r(13);t.exports=function GetPoint(t,i,r){return void 0===r&&(r=new o),r.x=t.x1+(t.x2-t.x1)*i,r.y=t.y1+(t.y2-t.y1)*i,r}},function(t,i,r){var o=r(304),a=r(13);t.exports=function GetPoints(t,i,r,h){void 0===h&&(h=[]),!i&&r>0&&(i=o(t)/r);for(var l=t.x1,u=t.y1,c=t.x2,d=t.y2,p=0;p<i;p++){var g=p/i,v=l+(c-l)*g,m=u+(d-u)*g;h.push(new a(v,m))}return h}},function(t,i){t.exports=function Length(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))}},function(t,i,r){var o=r(13);t.exports=function Random(t,i){void 0===i&&(i=new o);var r=Math.random();return i.x=t.x1+r*(t.x2-t.x1),i.y=t.y1+r*(t.y2-t.y1),i}},function(t,i,r){var o=r(13);t.exports=function Random(t,i){return void 0===i&&(i=new o),i.x=t.x+Math.random()*t.width,i.y=t.y+Math.random()*t.height,i}},function(t,i,r){var o=r(308),a=r(331),h={mask:null,setMask:function setMask(t){return this.mask=t,this},clearMask:function clearMask(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function createBitmapMask(t){return void 0===t&&(this.texture||this.shader)&&(t=this),new o(this.scene,t)},createGeometryMask:function createGeometryMask(t){return void 0===t&&"Graphics"===this.type&&(t=this),new a(this.scene,t)}};t.exports=h},function(t,i,r){var o=r(0),a=r(309),h=r(326),l=new o({initialize:function BitmapMask(t,i){var r=t.sys.renderer;this.renderer=r,this.bitmapMask=i,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),t.sys.game.events.on(a.CONTEXT_RESTORED,this.createMask,this),r&&r.on(h.RESIZE,this.createMask,this)},createMask:function createMask(){var t=this.renderer;if(t&&t.gl){this.mainTexture&&this.clearMask();var i=t.width,r=t.height,o=0==(i&i-1)&&0==(r&r-1),a=t.gl,h=o?a.REPEAT:a.CLAMP_TO_EDGE,l=a.LINEAR;this.mainTexture=t.createTexture2D(0,l,l,h,h,a.RGBA,null,i,r),this.maskTexture=t.createTexture2D(0,l,l,h,h,a.RGBA,null,i,r),this.mainFramebuffer=t.createFramebuffer(i,r,this.mainTexture,!0),this.maskFramebuffer=t.createFramebuffer(i,r,this.maskTexture,!0)}},clearMask:function clearMask(){var t=this.renderer;t&&t.gl&&this.mainTexture&&(t.deleteTexture(this.mainTexture),t.deleteTexture(this.maskTexture),t.deleteFramebuffer(this.mainFramebuffer),t.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function setBitmap(t){this.bitmapMask=t},preRenderWebGL:function preRenderWebGL(t,i,r){t.pipelines.BITMAPMASK_PIPELINE.beginMask(this,i,r)},postRenderWebGL:function postRenderWebGL(t,i){t.pipelines.BITMAPMASK_PIPELINE.endMask(this,i)},preRenderCanvas:function preRenderCanvas(){},postRenderCanvas:function postRenderCanvas(){},destroy:function destroy(){this.clearMask(),this.renderer&&this.renderer.off(h.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});t.exports=l},function(t,i,r){t.exports={BLUR:r(310),BOOT:r(311),CONTEXT_LOST:r(312),CONTEXT_RESTORED:r(313),DESTROY:r(314),FOCUS:r(315),HIDDEN:r(316),PAUSE:r(317),POST_RENDER:r(318),POST_STEP:r(319),PRE_RENDER:r(320),PRE_STEP:r(321),READY:r(322),RESUME:r(323),STEP:r(324),VISIBLE:r(325)}},function(t,i){t.exports="blur"},function(t,i){t.exports="boot"},function(t,i){t.exports="contextlost"},function(t,i){t.exports="contextrestored"},function(t,i){t.exports="destroy"},function(t,i){t.exports="focus"},function(t,i){t.exports="hidden"},function(t,i){t.exports="pause"},function(t,i){t.exports="postrender"},function(t,i){t.exports="poststep"},function(t,i){t.exports="prerender"},function(t,i){t.exports="prestep"},function(t,i){t.exports="ready"},function(t,i){t.exports="resume"},function(t,i){t.exports="step"},function(t,i){t.exports="visible"},function(t,i,r){t.exports={POST_RENDER:r(327),PRE_RENDER:r(328),RENDER:r(329),RESIZE:r(330)}},function(t,i){t.exports="postrender"},function(t,i){t.exports="prerender"},function(t,i){t.exports="render"},function(t,i){t.exports="resize"},function(t,i,r){var o=new(r(0))({initialize:function GeometryMask(t,i){this.geometryMask=i,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function setShape(t){return this.geometryMask=t,this},setInvertAlpha:function setInvertAlpha(t){return void 0===t&&(t=!0),this.invertAlpha=t,this},preRenderWebGL:function preRenderWebGL(t,i,r){var o=t.gl;t.flush(),0===t.maskStack.length&&(o.enable(o.STENCIL_TEST),o.clear(o.STENCIL_BUFFER_BIT),t.maskCount=0),t.currentCameraMask.mask!==this&&(t.currentMask.mask=this),t.maskStack.push({mask:this,camera:r}),this.applyStencil(t,r,!0),t.maskCount++},applyStencil:function applyStencil(t,i,r){var o=t.gl,a=this.geometryMask,h=t.maskCount;o.colorMask(!1,!1,!1,!1),r?(o.stencilFunc(o.EQUAL,h,255),o.stencilOp(o.KEEP,o.KEEP,o.INCR)):(o.stencilFunc(o.EQUAL,h+1,255),o.stencilOp(o.KEEP,o.KEEP,o.DECR)),a.renderWebGL(t,a,i),t.flush(),o.colorMask(!0,!0,!0,!0),o.stencilOp(o.KEEP,o.KEEP,o.KEEP),r?this.invertAlpha?o.stencilFunc(o.NOTEQUAL,h+1,255):o.stencilFunc(o.EQUAL,h+1,255):this.invertAlpha?o.stencilFunc(o.NOTEQUAL,h,255):o.stencilFunc(o.EQUAL,h,255)},postRenderWebGL:function postRenderWebGL(t){var i=t.gl;t.maskStack.pop(),t.maskCount--,t.flush();var r=t.currentMask;if(0===t.maskStack.length)r.mask=null,i.disable(i.STENCIL_TEST);else{var o=t.maskStack[t.maskStack.length-1];o.mask.applyStencil(t,o.camera,!1),t.currentCameraMask.mask!==o.mask?(r.mask=o.mask,r.camera=o.camera):r.mask=null}},preRenderCanvas:function preRenderCanvas(t,i,r){var o=this.geometryMask;t.currentContext.save(),o.renderCanvas(t,o,r,null,null,!0),t.currentContext.clip()},postRenderCanvas:function postRenderCanvas(t){t.currentContext.restore()},destroy:function destroy(){this.geometryMask=null}});t.exports=o},function(t,i){var r={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function get(){return this._displayOriginX},set:function set(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function get(){return this._displayOriginY},set:function set(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function setOrigin(t,i){return void 0===t&&(t=.5),void 0===i&&(i=t),this.originX=t,this.originY=i,this.updateDisplayOrigin()},setOriginFromFrame:function setOriginFromFrame(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function setDisplayOrigin(t,i){return void 0===t&&(t=0),void 0===i&&(i=t),this.displayOriginX=t,this.displayOriginY=i,this},updateDisplayOrigin:function updateDisplayOrigin(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};t.exports=r},function(t,i,r){var o=r(19),a=r(334),h=r(10),l=r(335),u=r(2),c={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:l.PLAYING_FORWARD,setPath:function setPath(t,i){void 0===i&&(i=this.pathConfig);var r=this.pathTween;return r&&r.isPlaying()&&r.stop(),this.path=t,i&&this.startFollow(i),this},setRotateToPath:function setRotateToPath(t,i){return void 0===i&&(i=0),this.rotateToPath=t,this.pathRotationOffset=i,this},isFollowing:function isFollowing(){var t=this.pathTween;return t&&t.isPlaying()},startFollow:function startFollow(t,i){void 0===t&&(t={}),void 0===i&&(i=0);var r=this.pathTween;r&&r.isPlaying()&&r.stop(),"number"==typeof t&&(t={duration:t}),t.from=h(t,"from",0),t.to=h(t,"to",1);var c=a(t,"positionOnPath",!1);this.rotateToPath=a(t,"rotateToPath",!1),this.pathRotationOffset=h(t,"rotationOffset",0);var d=h(t,"startAt",i);if(d&&(t.onStart=function(t){var i=t.data[0];i.progress=d,i.elapsed=i.duration*d;var r=i.ease(i.progress);i.current=i.start+(i.end-i.start)*r,i.target[i.key]=i.current}),this.pathOffset||(this.pathOffset=new u(this.x,this.y)),this.pathVector||(this.pathVector=new u),this.pathDelta||(this.pathDelta=new u),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(t),this.path.getStartPoint(this.pathOffset),c&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=l.PLAYING_FORWARD,this.rotateToPath){var p=this.path.getPoint(.1);this.rotation=Math.atan2(p.y-this.y,p.x-this.x)+o(this.pathRotationOffset)}return this.pathConfig=t,this},pauseFollow:function pauseFollow(){var t=this.pathTween;return t&&t.isPlaying()&&t.pause(),this},resumeFollow:function resumeFollow(){var t=this.pathTween;return t&&t.isPaused()&&t.resume(),this},stopFollow:function stopFollow(){var t=this.pathTween;return t&&t.isPlaying()&&t.stop(),this},pathUpdate:function pathUpdate(){var t=this.pathTween;if(t){var i=t.data[0],r=this.pathDelta,a=this.pathVector;if(r.copy(a).negate(),i.state===l.COMPLETE)return this.path.getPoint(1,a),r.add(a),a.add(this.pathOffset),void this.setPosition(a.x,a.y);if(i.state!==l.PLAYING_FORWARD&&i.state!==l.PLAYING_BACKWARD)return;this.path.getPoint(t.getValue(),a),r.add(a),a.add(this.pathOffset);var h=this.x,u=this.y;this.setPosition(a.x,a.y);var c=this.x-h,d=this.y-u;if(0===c&&0===d)return;if(i.state!==this._prevDirection)return void(this._prevDirection=i.state);this.rotateToPath&&(this.rotation=Math.atan2(d,c)+o(this.pathRotationOffset))}}};t.exports=c},function(t,i){t.exports=function GetBoolean(t,i,r){return t&&t.hasOwnProperty(i)?t[i]:r}},function(t,i){t.exports={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26}},function(t,i,r){var o=r(337),a=r(338),h=r(12),l={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function initPipeline(t){void 0===t&&(t=a.MULTI_PIPELINE);var i=this.scene.sys.renderer;if(!i)return!1;var r=i.pipelines;if(this.postPipelines=[],this.pipelineData={},r){var o=r.get(t);if(o)return this.defaultPipeline=o,this.pipeline=o,!0}return!1},setPipeline:function setPipeline(t,i,r){var a=this.scene.sys.renderer;if(!a)return this;var h=a.pipelines;if(h){var l=h.get(t);l&&(this.pipeline=l),i&&(this.pipelineData=r?o(i):i)}return this},setPostPipeline:function setPostPipeline(t,i,r){var a=this.scene.sys.renderer;if(!a)return this;var h=a.pipelines;if(h){Array.isArray(t)||(t=[t]);for(var l=0;l<t.length;l++){var u=h.getPostPipeline(t[l],this);u&&this.postPipelines.push(u)}i&&(this.pipelineData=r?o(i):i)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function setPipelineData(t,i){var r=this.pipelineData;return void 0===i?delete r[t]:r[t]=i,this},getPostPipeline:function getPostPipeline(t){for(var i=this.postPipelines,r=[],o=0;o<i.length;o++){var a=i[o];("string"==typeof t&&a.name===t||a instanceof t)&&r.push(a)}return 1===r.length?r[0]:r},resetPipeline:function resetPipeline(t,i){return void 0===t&&(t=!1),void 0===i&&(i=!1),this.pipeline=this.defaultPipeline,t&&(this.postPipelines=[],this.hasPostPipeline=!1),i&&(this.pipelineData={}),null!==this.pipeline},resetPostPipeline:function resetPostPipeline(t){void 0===t&&(t=!1);for(var i=this.postPipelines,r=0;r<i.length;r++)i[r].destroy();this.postPipelines=[],this.hasPostPipeline=!1,t&&(this.pipelineData={})},removePostPipeline:function removePostPipeline(t){for(var i=this.postPipelines,r=i.length-1;r>=0;r--){var o=i[r];("string"==typeof t&&o.name===t||"string"!=typeof t&&o instanceof t)&&(o.destroy(),h(i,r))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function getPipelineName(){return this.pipeline.name}};t.exports=l},function(t,i){t.exports=function DeepCopy(t){var i,r,o;if("object"!==_typeof(t)||null===t)return t;for(o in i=Array.isArray(t)?[]:{},t)r=t[o],i[o]=DeepCopy(r);return i}},function(t,i){t.exports={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"}},function(t,i){var r={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function get(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function set(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function get(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function set(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function setSizeToFrame(t){return void 0===t&&(t=this.frame),this.width=t.realWidth,this.height=t.realHeight,this},setSize:function setSize(t,i){return this.width=t,this.height=i,this},setDisplaySize:function setDisplaySize(t,i){return this.displayWidth=t,this.displayHeight=i,this}};t.exports=r},function(t,i){var r={texture:null,frame:null,isCropped:!1,setTexture:function setTexture(t,i){return this.texture=this.scene.sys.textures.get(t),this.setFrame(i)},setFrame:function setFrame(t,i,r){return void 0===i&&(i=!0),void 0===r&&(r=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&i&&this.setSizeToFrame(),this._originComponent&&r&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};t.exports=r},function(t,i){var r={texture:null,frame:null,isCropped:!1,setCrop:function setCrop(t,i,r,o){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"==typeof t)this.frame.setCropUVs(this._crop,t,i,r,o,this.flipX,this.flipY);else{var a=t;this.frame.setCropUVs(this._crop,a.x,a.y,a.width,a.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function setTexture(t,i){return this.texture=this.scene.sys.textures.get(t),this.setFrame(i)},setFrame:function setFrame(t,i,r){return void 0===i&&(i=!0),void 0===r&&(r=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&i&&this.setSizeToFrame(),this._originComponent&&r&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function resetCropObject(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};t.exports=r},function(t,i){var r={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function clearTint(){return this.setTint(16777215),this},setTint:function setTint(t,i,r,o){return void 0===t&&(t=16777215),void 0===i&&(i=t,r=t,o=t),this.tintTopLeft=t,this.tintTopRight=i,this.tintBottomLeft=r,this.tintBottomRight=o,this.tintFill=!1,this},setTintFill:function setTintFill(t,i,r,o){return this.setTint(t,i,r,o),this.tintFill=!0,this},tint:{set:function set(t){this.setTint(t,t,t,t)}},isTinted:{get:function get(){var t=16777215;return this.tintFill||this.tintTopLeft!==t||this.tintTopRight!==t||this.tintBottomLeft!==t||this.tintBottomRight!==t}}};t.exports=r},function(t,i,r){var o=r(1),a=r(1);o=r(344),a=r(345),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i){t.exports=function ContainerWebGLRenderer(t,i,r,o){var a=i.list,h=a.length;if(0!==h){r.addToRenderList(i);var l=i.localTransform;o?(l.loadIdentity(),l.multiply(o),l.translate(i.x,i.y),l.rotate(i.rotation),l.scale(i.scaleX,i.scaleY)):l.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY),t.pipelines.preBatch(i);var u=-1!==i.blendMode;u||t.setBlendMode(0);for(var c=i.alpha,d=i.scrollFactorX,p=i.scrollFactorY,g=0;g<h;g++){var v=a[g];if(v.willRender(r)){var m,y,T,S;if(void 0!==v.alphaTopLeft)m=v.alphaTopLeft,y=v.alphaTopRight,T=v.alphaBottomLeft,S=v.alphaBottomRight;else{var w=v.alpha;m=w,y=w,T=w,S=w}var b=v.scrollFactorX,C=v.scrollFactorY;u||v.blendMode===t.currentBlendMode||t.setBlendMode(v.blendMode);var A=v.mask;A&&A.preRenderWebGL(t,v,r);var E=v.type;E!==t.currentType&&(t.newType=!0,t.currentType=E),t.nextTypeMatch=g<h-1&&a[g+1].type===t.currentType,v.setScrollFactor(b*d,C*p),v.setAlpha(m*c,y*c,T*c,S*c),v.renderWebGL(t,v,r,l),v.setAlpha(m,y,T,S),v.setScrollFactor(b,C),A&&A.postRenderWebGL(t,r),t.newType=!1}}t.pipelines.postBatch(i)}}},function(t,i){t.exports=function ContainerCanvasRenderer(t,i,r,o){var a=i.list;if(0!==a.length){r.addToRenderList(i);var h=i.localTransform;o?(h.loadIdentity(),h.multiply(o),h.translate(i.x,i.y),h.rotate(i.rotation),h.scale(i.scaleX,i.scaleY)):h.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY);var l=-1!==i.blendMode;l||t.setBlendMode(0);var u=i._alpha,c=i.scrollFactorX,d=i.scrollFactorY;i.mask&&i.mask.preRenderCanvas(t,null,r);for(var p=0;p<a.length;p++){var g=a[p];if(g.willRender(r)){var v=g.alpha,m=g.scrollFactorX,y=g.scrollFactorY;l||g.blendMode===t.currentBlendMode||t.setBlendMode(g.blendMode),g.setScrollFactor(m*c,y*d),g.setAlpha(v*u),g.renderCanvas(t,g,r,h),g.setAlpha(v),g.setScrollFactor(m,y)}}i.mask&&i.mask.postRenderCanvas(t)}}},function(t,i,r){var o=r(25);t.exports=function Union(t,i,r){void 0===r&&(r=new o);var a=Math.min(t.x,i.x),h=Math.min(t.y,i.y),l=Math.max(t.right,i.right)-a,u=Math.max(t.bottom,i.bottom)-h;return r.setTo(a,h,l,u)}},function(t,i,r){var o=r(1),a=r(1);o=r(348),a=r(349),t.exports={renderWebGL:o,renderCanvas:a}},function(t,i){t.exports=function SpineContainerWebGLRenderer(t,i,r,o){var a=i.plugin.sceneRenderer,h=i.list;if(0!==h.length){r.addToRenderList(i);var l=i.localTransform;o?(l.loadIdentity(),l.multiply(o),l.translate(i.x,i.y),l.rotate(i.rotation),l.scale(i.scaleX,i.scaleY)):l.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY),t.newType&&(t.pipelines.clear(),a.begin());var u=t.nextTypeMatch;t.nextTypeMatch=!0,t.newType=!1;for(var c=0;c<h.length;c++){var d=h[c];if(d.willRender(r,i)){var p=d.mask;p&&(a.end(),t.pipelines.rebind(),p.preRenderWebGL(t,d,r),t.pipelines.clear(),a.begin()),d.renderWebGL(t,d,r,l,i),p&&(a.end(),t.pipelines.rebind(),p.postRenderWebGL(t,r),t.pipelines.clear(),a.begin())}}t.nextTypeMatch=u,u||(a.end(),t.pipelines.rebind())}else a.batcher.isDrawing&&t.finalType&&(a.end(),t.pipelines.rebind())}},function(t,i){t.exports=function SpineContainerCanvasRenderer(t,i,r,o){var a=i.list;if(0!==a.length){r.addToRenderList(i);var h=i.localTransform;o?(h.loadIdentity(),h.multiply(o),h.translate(i.x,i.y),h.rotate(i.rotation),h.scale(i.scaleX,i.scaleY)):h.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY);var l=-1!==i.blendMode;l||t.setBlendMode(0);var u=i._alpha,c=i.scrollFactorX,d=i.scrollFactorY;i.mask&&i.mask.preRenderCanvas(t,null,r);for(var p=0;p<a.length;p++){var g=a[p];if(g.willRender(r)){var v=g.alpha,m=g.scrollFactorX,y=g.scrollFactorY;l||g.blendMode===t.currentBlendMode||t.setBlendMode(g.blendMode),g.setScrollFactor(m*c,y*d),g.setAlpha(v*u),g.renderCanvas(t,g,r,h),g.setAlpha(v),g.setScrollFactor(m,y)}}i.mask&&i.mask.postRenderCanvas(t)}}}]);var dn=[],fn=function(){function RoutinesManager(){_classCallCheck(this,RoutinesManager)}return _createClass(RoutinesManager,null,[{key:"RegisterRoutine",value:function RegisterRoutine(t){dn.push(t)}},{key:"InitRoutines",value:function InitRoutines(){for(var t in dn){dn[t].Init()}}},{key:"UpdateRoutines",value:function UpdateRoutines(t,i){for(var r in zt.exports.Math.FloorTo(i),dn){dn[r].Update(i)}}}]),RoutinesManager}(),pn=function(){function AssetPackLoader(){_classCallCheck(this,AssetPackLoader),this._files={jsons:[],png:[]},this.request=null,this.loadFuncDict=null}return _createClass(AssetPackLoader,[{key:"fillRequestDataFrom",value:function fillRequestDataFrom(t){console.assert(t,"data is: ",t),function IsArray(t){return"[object Array]"===Object.prototype.toString.call(t)}(t)||console.error("TODO: implement for object that isnt array"),this.request=t}},{key:"supplyLoadFunctionDictionary",value:function supplyLoadFunctionDictionary(t,i){this.loadFuncDict=function getAssetPackLoaderForScene(t,i){return{begin:function begin(){t.load.on("loaderror",(function(t){console.warn("error loading: ",t)}),t),t.load.once("complete",(function(){var r=i;t.load.removeAllListeners(),t.load.reset(),r()}))},audio:function audio(i,r){t.load.audio(i,[r+"/"+i+".mp3",r+"/"+i+".ogg"])},font:function font(i,r){t.load.bitmapFont(i,r+"/"+i+".png",r+"/"+i+".xml")},text:function text(i,r){t.load.text(i,r+"/"+i+".txt")},json:function json(i,r){t.load.json(i,r+"/"+i+".json")},png:function png(i,r){t.load.image(i,r+"/"+i+".png")},spine:function spine(i,r){t.load.spine(i,r+"/"+i+".json",r+"/"+i+".atlas")}}}(t,i)}},{key:"load",value:function load(){for(var t in console.assert(null!=this.loadFuncDict,"load func dict: ",this.loadFuncDict),console.assert(this.request,"request: ",this.request),this.loadFuncDict.begin(),this.request){var i=this.request[t],r=i.path,o=i.type,a=i.files;if(i.mode){var h=i.mode;if("sequential"==h.def)for(var l=h.from;l<=h.to;l++)a.push(h.base+l)}for(var u in a){var c=a[u];null==this.loadFuncDict[o]&&console.error("loader dict didnt implement: ",o),this.loadFuncDict[o](c,r)}}}},{key:"getRequestAsJson",value:function getRequestAsJson(){return JSON.parse(JSON.stringify(this.request))}},{key:"addRequestArray",value:function addRequestArray(t){this.request&&console.error("TODO: implement request merge"),this.request=t}}],[{key:"GetRequestAsJsonFromArray",value:function GetRequestAsJsonFromArray(t){var i=new AssetPackLoader;return i.addRequestArray(t),i.getRequestAsJson()}}]),AssetPackLoader}(),gn=_createClass((function EngineInitVO(){_classCallCheck(this,EngineInitVO),this.data={flagOverrides:{},gameName:null,gameVersion:"_v1",gameSubEngineConfig:null,preloaderInitialsAssetsNames:{manifestJson:null,font:null,logo:null},initialAssetPackData:null,funcStartGame:null,funcRegisterComponents:null,funcDoGameRegisters:null,requiredScreenOrientation:"any"}})),vn=function(){function GameBranding(){_classCallCheck(this,GameBranding)}return _createClass(GameBranding,[{key:"getFlags",value:function getFlags(){return{disableSaveUserPrefs:0,disableSaveGameData:0,disableFakeMusicPreload:0,cordovaListenersEnabled:0,disableAutoPause:0,allowPauseAlways:0}}},{key:"hasToResetScoreEachLevel",value:function hasToResetScoreEachLevel(){return!1}},{key:"adaptLocalStorageSetItem",value:function adaptLocalStorageSetItem(t,i){localStorage.setItem(t,i)}},{key:"adaptLocalStorageGetItem",value:function adaptLocalStorageGetItem(t){return localStorage.getItem(t)}},{key:"showAd",value:function showAd(t){t()}},{key:"onUpdateScore",value:function onUpdateScore(t){}},{key:"onUpdateLevelNumber",value:function onUpdateLevelNumber(t){}}],[{key:"SetSingleton",value:function SetSingleton(t){GameBranding.Singleton=t}},{key:"GameEvent",value:function GameEvent(t){}},{key:"GetSingleton",value:function GetSingleton(){return this.Singleton}}]),GameBranding}();_defineProperty(vn,"Singleton",void 0);var mn=function(){function BMEngine(){_classCallCheck(this,BMEngine)}return _createClass(BMEngine,null,[{key:"EnableEditor",value:function EnableEditor(){xn.enabled=!0}},{key:"SetGameplayCameraOffset",value:function SetGameplayCameraOffset(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];yn.camera.x=t,yn.camera.y=i,r&&_InternalUpdateCamera()}},{key:"SetCameraCenter",value:function SetCameraCenter(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];yn.camera.centerX=t,yn.camera.centerY=i}},{key:"SetPauseAllowedByStates",value:function SetPauseAllowedByStates(t){yn.pauseAllowedByStates=t}},{key:"TryPauseGame",value:function TryPauseGame(){if(0==yn.flags.allowPauseAlways){if(!yn.pauseAllowedByStates)return;if(!yn.pauseAllowedAfterStartGame)return}return!yn.hasBeenPaused&&(Cn.PauseGameScenes(),!0)}},{key:"TryUnpauseGame",value:function TryUnpauseGame(){return!!yn.hasBeenPaused&&(Cn.UnPauseGameScenes(),!0)}},{key:"UserMuteAudio",value:function UserMuteAudio(){yn.audio.wasMutedManually=!0,bn.MuteAudio(),wn.SaveGameSettings()}},{key:"UserUnmuteAudio",value:function UserUnmuteAudio(){yn.audio.wasMutedManually=!1,bn.UnmuteAudio(),wn.SaveGameSettings()}},{key:"PlayAudioFile",value:function PlayAudioFile(t){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(Tn.soundInstanceCache[t])i=Tn.soundInstanceCache[t];else{if(!BMEngine.GetPhaserGame().cache.audio.exists(t))return void console.log("RETURNING, FAIL QUIETLY - NO AUDIO :",t);yn.audioConfigCache[t]||(yn.audioConfigCache[t]={volume:1,loop:!1},r&&E(yn.audioConfigCache[t],r));var o=yn.audioConfigCache[t];i=BMEngine.GetPhaserGame().sound.add(t,o)}i.play(),Tn.soundInstanceCache[t]=i}},{key:"GetAudioState",value:function GetAudioState(){return yn.audio.audioState}},{key:"GetDisplayDataCopy",value:function GetDisplayDataCopy(){return E({},yn.display)}},{key:"GetPhaserGame",value:function GetPhaserGame(){return Tn.phaserGameObject}},{key:"GetGameplayScene",value:function GetGameplayScene(){return console.assert(Tn.phaserScenes.game.ref,Tn.phaserScenes.game),Tn.phaserScenes.game.ref}},{key:"GetInterfaceScene",value:function GetInterfaceScene(){return console.assert(Tn.phaserScenes.gameInterface.ref,Tn.phaserScenes.gameInterface),Tn.phaserScenes.gameInterface.ref}},{key:"GetEditorScene",value:function GetEditorScene(){return Tn.phaserScenes.pauseDisplayer.ref}},{key:"GetFileFromCache",value:function GetFileFromCache(t,i){return Tn.phaserGameObject.cache[t].get(i)}},{key:"IsRotationDisplayed",value:function IsRotationDisplayed(){return yn.isRotationDisplayActive}},{key:"GetOrMakeContainerLayer",value:function GetOrMakeContainerLayer(t,i,r,o){var a=t+"_"+i+r+"_"+o;if(!Tn.phaserLayers[a]){if("gameplay"==t){var h=BMEngine.GetGameplayScene().make.container({},!1);BMEngine.GetGameplayScene().add.existing(h),h.setDepth(1e4*o),Tn.phaserLayers[a]={layer:h,anchorX:1,anchorY:1}}else{var l;"gui"==t?(l=BMEngine.GetInterfaceScene().make.container({},!1),BMEngine.GetInterfaceScene().add.existing(l)):"pause"==t&&(l=Tn.phaserScenes.pauseDisplayer.ref.make.container({},!1),Tn.phaserScenes.pauseDisplayer.ref.add.existing(l)),l.setDepth(1e4*o);var u=i,c=r;Tn.phaserLayers[a]={layer:l,anchorX:u,anchorY:c}}_InternalRepositionLayers()}return Tn.phaserLayers[a].layer}},{key:"GetSaveSlotReference",value:function GetSaveSlotReference(t){return wn.LoadGameData(t)}},{key:"SaveGame",value:function SaveGame(){wn.SaveCurrentSlot()}}]),BMEngine}(),yn={currentSave:null,audioConfigCache:{},audio:{wasMutedManually:!1,wasMutedAutomatically:!1,audioState:1},pausedFromRotation:!1,isRotationDisplayActive:!1,hasBeenPaused:!1,pauseAllowedAfterStartGame:!1,pauseAllowedByStates:!1,flags:{disableSaveUserPrefs:0,disableSaveGameData:0,disableFakeMusicPreload:0,cordovaListenersEnabled:0,disableAutoPause:0,allowPauseAlways:0},camera:{x:0,y:0,centerX:!0,centerY:!1},display:{designWidth:1,designHeight:1,responsiveWidth:1,responsiveHeight:1,dpi:1,lastWidth:1,lastHeight:1},currentOrientation:"any",requiredOrientation:"any",gameManifestJSON:null,initVO:null},xn={enabled:!1},Tn={gameSubEngineConfig:{},phaserGameObject:null,phaserLayers:{},soundInstanceCache:{},phaserScenes:{preloader:{ref:null,def:null,loadedPreloaderInitials:!1,loadedGameAssets:!1,assetsRealLoadPercentage:0,assetsRealLoadDone:!1,funcRefUpdatePreloaderFont:null,funcRefCompletePreload:null,extraMaxRequiredTime:5e3,extraCurRequiredTime:0},resizeHandler:{ref:null,def:null},pauseDisplayer:{ref:null,def:null},rotateDisplayer:{ref:null,def:null,layer:null,bg:null,rotateHelper:null},controlPauseGameLoop:{ref:null,def:null},game:{ref:null,def:null},gameInterface:{ref:null,def:null}}},Sn={scene:[{key:"spine",plugin:window.SpinePlugin,start:!0,sceneKey:"spine",mapping:"spine"},{key:"rexGestures",plugin:Hi,start:!0,sceneKey:"rexGestures",mapping:"rexGestures"}],global:[{key:"rexEaseMove",plugin:Pe,start:!0,sceneKey:"rexEaseMove",mapping:"rexEaseMove"},{key:"rexMoveTo",plugin:Qi,start:!0,sceneKey:"rexMoveTo",mapping:"rexMoveTo"},{key:"rexBullet",plugin:le,start:!0,sceneKey:"rexBullet",mapping:"rexBullet"},{key:"rexRotateTo",plugin:cn,start:!0}]};function UsePhaserSubEngine(t){E(yn.flags,t.data.flagOverrides);var i=E(Tn.gameSubEngineConfig,t.data.gameSubEngineConfig);xn.enabled&&(i.backgroundColor="0x000000"),yn.requiredOrientation=t.data.requiredScreenOrientation,yn.initVO=t,wn.LoadGameSettings(),t.data.funcDoGameRegisters();var r=t.data.preloaderInitialsAssetsNames,o=t.data.initialAssetPackData,a=t.data.funcStartGame,h=!1;GetOs().android&&function GetBrowser(){if(Kt)return qt;Kt=!0;var t=navigator.userAgent;return/Edge\/\d+/.test(t)?qt.edge=!0:/Chrome\/(\d+)/.test(t)&&!GetOs().windowsPhone?(qt.chrome=!0,qt.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(t)?(qt.firefox=!0,qt.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(t)&&GetOs().iOS?qt.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(t)?(qt.ie=!0,qt.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(t)?qt.opera=!0:/Safari/.test(t)&&!GetOs().windowsPhone?qt.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(t)&&(qt.ie=!0,qt.trident=!0,qt.tridentVersion=parseInt(RegExp.$1,10),qt.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(t)&&(qt.silk=!0),qt}().firefox&&(i.type=Wt.CANVAS),!GetOs().desktop&&GetOs().iOS&&(h=!0),GetOs().desktop&&GetOs().macOS&&(h=!0),i.fps={forceSetTimeOut:!1,target:60},h&&(i.type=Wt.CANVAS,i.fps={forceSetTimeOut:!0,target:60},i.roundPixels=!1);var l=function recalcDisplayValues(){if(GetOs().desktop)yn.display.designWidth=i.scale.width,yn.display.designHeight=i.scale.height;else{var t=i.scale.height/i.scale.width,r=An.GetRealScreenHeight()/An.GetRealScreenWidth()/t;r=function Clamp(t,i,r){return Math.max(i,Math.min(r,t))}(r,1,2),yn.display.dpi=r,yn.display.designWidth=i.scale.width*yn.display.dpi,yn.display.designHeight=i.scale.height*yn.display.dpi}};l(),i.plugins=Sn;var u=new Wt.Game(i);Tn.phaserGameObject=u,u.events.addListener(Wt.Core.Events.BLUR,(function(){yn.flags.disableAutoPause||U.hasKey("PauseGame")&&(console.log("PAUSE FROM: BLUR"),bn.TryToAutomaticallyMuteIfNotMutedManually(),U.runCommand("PauseGame"))})),u.events.addListener(Wt.Core.Events.FOCUS,(function(){yn.pausedFromRotation||bn.TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically()})),document.addEventListener("visibilitychange",(function(){if(document.hidden){if(yn.flags.disableAutoPause)return;U.hasKey("PauseGame")&&(console.log("PAUSE FROM: VISIBILITYCHANGE"),U.runCommand("PauseGame"),bn.TryToAutomaticallyMuteIfNotMutedManually())}else{if(yn.pausedFromRotation)return;bn.TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically()}}),!1),document.addEventListener("pause",(function(){if(document.hidden){if(yn.flags.disableAutoPause)return;U.hasKey("PauseGame")&&(console.log("PAUSE FROM: PAUSE"),U.runCommand("PauseGame"),bn.TryToAutomaticallyMuteIfNotMutedManually())}}),!1),window.document.addEventListener("resume",(function(){yn.pausedFromRotation||bn.TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically()}),!1);var c=function _resize(){l();var t=An.GetRealScreenWidth()/An.GetRealScreenHeight(),i=yn.display.designHeight/yn.display.designWidth;if(yn.display.responsiveWidth=yn.display.designWidth*i*t,yn.display.responsiveHeight=yn.display.designHeight,u.scale.setGameSize(yn.display.responsiveWidth,yn.display.responsiveHeight),xn.enabled){var r=[mn.GetGameplayScene().cameras,mn.GetInterfaceScene().cameras];for(var o in r){var a=r[o],h=yn.display.responsiveHeight,c=yn.display.responsiveWidth;a.main.setViewport(c/4,0,c/2,h)}}_InternalRepositionLayers()};Tn.phaserScenes.resizeHandler.def={create:function create(){c(),window.addEventListener("resize",(function(){c()}))},update:function update(){An.GetRealScreenWidth()==yn.display.lastWidth&&An.GetRealScreenHeight()==yn.display.lastHeight||(yn.display.lastWidth=An.GetRealScreenWidth(),yn.display.lastHeight=An.GetRealScreenHeight(),c())}},Tn.phaserScenes.preloader.def={preload:function preload(){var t=this,i=this,h=new pn;h.fillRequestDataFrom(o),h.supplyLoadFunctionDictionary(i,(function(){var o=t.make.container({},!0),h=t.make.image({x:0,y:0,key:r.logo,add:!0},!1),l=t.make.bitmapText({x:0,y:125,font:r.font,text:"0",size:!1,add:!0,align:1},!1);o.add(h),o.add(l);var u=function repositionLayer(){o.x=yn.display.responsiveWidth/2,o.y=yn.display.responsiveHeight/2};u(),window.addEventListener("resize",u),Tn.phaserScenes.preloader.funcRefCompletePreload=function(){Tn.phaserScenes.preloader.funcRefCompletePreload=null,h.destroy(),l.destroy(),o.destroy(),window.removeEventListener("resize",u),i.game.scene.stop("PreloaderScene"),-1==yn.audio.audioState&&mn.UserMuteAudio(),a(),yn.pauseAllowedAfterStartGame=!0},Tn.phaserScenes.preloader.funcRefUpdatePreloaderFont=function(){var t=Math.ceil(100*Tn.phaserScenes.preloader.assetsRealLoadPercentage);if(yn.flags.disableFakeMusicPreload)l.text=t+"%",l.x=-l.width/2;else{t*=.75;var i=Tn.phaserScenes.preloader.extraCurRequiredTime/Tn.phaserScenes.preloader.extraMaxRequiredTime;i=Math.ceil(.25*i*100),t=Math.ceil(t+i),l.text=t+"%",l.x=-l.width/2}},yn.gameManifestJSON=mn.GetFileFromCache("json",r.manifestJson);var c=new pn;c.fillRequestDataFrom(yn.gameManifestJSON.assets),c.supplyLoadFunctionDictionary(i,(function(){Tn.phaserScenes.preloader.assetsRealLoadPercentage=1,Tn.phaserScenes.preloader.assetsRealLoadDone=!0})),i.load.on("progress",(function(t){Tn.phaserScenes.preloader.funcRefUpdatePreloaderFont&&(Tn.phaserScenes.preloader.assetsRealLoadPercentage=t,Tn.phaserScenes.preloader.funcRefUpdatePreloaderFont())})),c.load(),i.load.start()})),h.load()},create:function create(){},update:function update(t,i){if(Tn.phaserScenes.preloader.funcRefCompletePreload&&Tn.phaserScenes.preloader.funcRefUpdatePreloaderFont){Tn.phaserScenes.preloader.assetsRealLoadDone&&(Tn.phaserScenes.preloader.assetsRealLoadPercentage=1);var r=!1;if(1==yn.flags.disableFakeMusicPreload)r=!0;else if(Tn.phaserScenes.preloader.assetsRealLoadPercentage>=.75){var o=1;Tn.phaserScenes.preloader.assetsRealLoadDone&&(o=5),Tn.phaserScenes.preloader.extraCurRequiredTime+=i*o,Tn.phaserScenes.preloader.extraCurRequiredTime>=Tn.phaserScenes.preloader.extraMaxRequiredTime&&(Tn.phaserScenes.preloader.extraCurRequiredTime=Tn.phaserScenes.preloader.extraMaxRequiredTime,r=!0)}Tn.phaserScenes.preloader.funcRefUpdatePreloaderFont(),Tn.phaserScenes.preloader.assetsRealLoadDone&&r&&Tn.phaserScenes.preloader.funcRefCompletePreload()}}},Tn.phaserScenes.rotateDisplayer.def={create:function create(){Tn.phaserScenes.rotateDisplayer.ref=this,Tn.phaserScenes.rotateDisplayer.layer=this.make.container({},!0)},update:function update(){Tn.phaserScenes.rotateDisplayer.bg&&Tn.phaserScenes.rotateDisplayer.def.updateRotateSize()},showRotate:function showRotate(){Tn.phaserScenes.rotateDisplayer.bg||(Tn.phaserScenes.rotateDisplayer.bg=Tn.phaserScenes.rotateDisplayer.ref.make.image({x:0,y:0,key:"RotateBG",add:!1},!1),Tn.phaserScenes.rotateDisplayer.rotateHelper=Tn.phaserScenes.rotateDisplayer.ref.make.image({x:0,y:0,key:"NeedPortrait",add:!1},!1),Tn.phaserScenes.rotateDisplayer.def.updateRotateSize(),Tn.phaserScenes.rotateDisplayer.layer.add(Tn.phaserScenes.rotateDisplayer.bg),Tn.phaserScenes.rotateDisplayer.layer.add(Tn.phaserScenes.rotateDisplayer.rotateHelper))},hideRotate:function hideRotate(){Tn.phaserScenes.rotateDisplayer.bg&&Tn.phaserScenes.rotateDisplayer.bg.destroy(),Tn.phaserScenes.rotateDisplayer.bg=null,Tn.phaserScenes.rotateDisplayer.rotateHelper&&Tn.phaserScenes.rotateDisplayer.rotateHelper.destroy(),Tn.phaserScenes.rotateDisplayer.rotateHelper=null},updateRotateSize:function updateRotateSize(){Tn.phaserScenes.rotateDisplayer.bg.setDisplaySize(4096,4096),Tn.phaserScenes.rotateDisplayer.layer.x=yn.display.responsiveWidth/2,Tn.phaserScenes.rotateDisplayer.layer.y=yn.display.responsiveHeight/2}},Tn.phaserScenes.pauseDisplayer.def={create:function create(){Tn.phaserScenes.pauseDisplayer.ref=this},update:function update(){}},Tn.phaserScenes.controlPauseGameLoop.def={create:function create(){},update:function update(){var t;"any"!=yn.requiredOrientation&&(Tn.phaserScenes.preloader.assetsRealLoadDone&&(t=An.GetRealScreenWidth()>An.GetRealScreenHeight()?"landscape":"portrait",yn.currentOrientation!=t&&(yn.currentOrientation=t,yn.requiredOrientation==yn.currentOrientation?(yn.isRotationDisplayActive=!1,Tn.phaserScenes.rotateDisplayer.def.hideRotate(),bn.TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically(),yn.pausedFromRotation&&(yn.pausedFromRotation=!1)):(yn.isRotationDisplayActive=!0,Tn.phaserScenes.rotateDisplayer.def.showRotate(),bn.TryToAutomaticallyMuteIfNotMutedManually(),yn.hasBeenPaused||(U.runCommand("PauseGame"),yn.pausedFromRotation=!0)))))}},Tn.phaserScenes.gameInterface.def={create:function create(){Tn.phaserScenes.gameInterface.ref=this},update:function update(){}},Tn.phaserScenes.game.def={create:function create(){Tn.phaserScenes.game.ref=this,fn.InitRoutines()},update:function update(t,i){yn.isRotationDisplayActive||(_InternalUpdateCamera(),fn.UpdateRoutines(t,i))}},u.scene.add("PreloaderScene",Tn.phaserScenes.preloader.def,!0),u.scene.add("GameScene",Tn.phaserScenes.game.def,!0),u.scene.add("GameInterface",Tn.phaserScenes.gameInterface.def,!0),u.scene.add("ControlPauseGameLoop",Tn.phaserScenes.controlPauseGameLoop.def,!0),u.scene.add("PauseSceneDisplayer",Tn.phaserScenes.pauseDisplayer.def,!0),u.scene.add("RotateDeviceSceneDisplayer",Tn.phaserScenes.rotateDisplayer.def,!0),u.scene.add("ResizeHandlerScene",Tn.phaserScenes.resizeHandler.def,!0),console.log("DisplayData: ",yn.display)}var wn=function(){function InternalSaveModel(){_classCallCheck(this,InternalSaveModel)}return _createClass(InternalSaveModel,null,[{key:"SaveCurrentSlot",value:function SaveCurrentSlot(){1!=yn.flags.disableSaveGameData&&vn.GetSingleton().adaptLocalStorageSetItem(InternalSaveModel.GetSaveSlotKey(),JSON.stringify(yn.currentSave))}},{key:"GetSettingsKey",value:function GetSettingsKey(){return yn.initVO.data.gameName+"_settings_"+yn.initVO.data.gameVersion}},{key:"GetSaveSlotKey",value:function GetSaveSlotKey(){return yn.initVO.data.gameName+"_slot_0"+yn.initVO.data.gameVersion}},{key:"SaveGameSettings",value:function SaveGameSettings(){if(1!=yn.flags.disableSaveUserPrefs){var t={version:1,audio:{audioState:yn.audio.audioState}};vn.GetSingleton().adaptLocalStorageSetItem(InternalSaveModel.GetSettingsKey(),JSON.stringify(t))}}},{key:"LoadGameSettings",value:function LoadGameSettings(){if(1!=yn.flags.disableSaveUserPrefs){var t=vn.GetSingleton().adaptLocalStorageGetItem(InternalSaveModel.GetSettingsKey());if(null!=t){var i=JSON.parse(t);E(yn.audio,i.audio)}}}},{key:"LoadGameData",value:function LoadGameData(t){if(1==yn.flags.disableSaveGameData)return yn.currentSave=t,t;var i=vn.GetSingleton().adaptLocalStorageGetItem(InternalSaveModel.GetSaveSlotKey());null==i&&(i=JSON.stringify(t),vn.GetSingleton().adaptLocalStorageSetItem(InternalSaveModel.GetSaveSlotKey(),i));var r=JSON.parse(i);return null!=t.version&&t.version!=r.version&&console.log("IMPLEMENT DATA VERSIONING PLEASE"),yn.currentSave=r,r}}]),InternalSaveModel}(),bn=function(){function InternalAudioModel(){_classCallCheck(this,InternalAudioModel)}return _createClass(InternalAudioModel,null,[{key:"MuteAudio",value:function MuteAudio(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&(yn.audio.audioState=-1),mn.GetGameplayScene().sound.setMute(!0)}},{key:"UnmuteAudio",value:function UnmuteAudio(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&(yn.audio.audioState=1),mn.GetGameplayScene().sound.setMute(!1)}},{key:"TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically",value:function TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically(){yn.audio.wasMutedManually||yn.audio.wasMutedAutomatically&&(yn.audio.wasMutedAutomatically=!1,InternalAudioModel.UnmuteAudio(!1))}},{key:"TryToAutomaticallyMuteIfNotMutedManually",value:function TryToAutomaticallyMuteIfNotMutedManually(){yn.audio.wasMutedManually||yn.audio.wasMutedAutomatically||(yn.audio.wasMutedAutomatically=!0,InternalAudioModel.MuteAudio(!1))}}]),InternalAudioModel}(),Cn=function(){function InternalPauseModel(){_classCallCheck(this,InternalPauseModel)}return _createClass(InternalPauseModel,null,[{key:"PauseGameScenes",value:function PauseGameScenes(){yn.hasBeenPaused||(yn.hasBeenPaused=!0,Tn.phaserScenes.game.ref&&Tn.phaserScenes.game.ref.sys.pause(),Tn.phaserScenes.gameInterface.ref&&Tn.phaserScenes.gameInterface.ref.sys.pause())}},{key:"UnPauseGameScenes",value:function UnPauseGameScenes(){yn.hasBeenPaused&&(yn.hasBeenPaused=!1,Tn.phaserScenes.game.ref&&Tn.phaserScenes.game.ref.sys.resume(),Tn.phaserScenes.gameInterface.ref&&Tn.phaserScenes.gameInterface.ref.sys.resume())}}]),InternalPauseModel}(),An=function(){function InternalScreenModel(){_classCallCheck(this,InternalScreenModel)}return _createClass(InternalScreenModel,null,[{key:"GetRealScreenSize",value:function GetRealScreenSize(){var t=window.innerWidth,i=window.innerHeight;document.documentElement&&"clientWidth"in document.documentElement&&(t=document.documentElement.clientWidth,i=document.documentElement.clientHeight);var r={bottom:0,top:0};GetOs().iOS&&(document.documentElement&&"getBoundingClientRect"in document.documentElement?r=document.documentElement.getBoundingClientRect():"getBoundingClientRect"in document.body&&(r=document.body.getBoundingClientRect()),r&&(t=r.right-r.left,i=r.bottom-r.top));var o={w:t,h:i};return o.h=window.innerHeight,o}},{key:"GetRealScreenHeight",value:function GetRealScreenHeight(){return InternalScreenModel.GetRealScreenSize().h}},{key:"GetRealScreenWidth",value:function GetRealScreenWidth(){return InternalScreenModel.GetRealScreenSize().w}}]),InternalScreenModel}();function _InternalUpdateCamera(){mn.GetGameplayScene().cameras.main.scrollX=-mn.GetGameplayScene().cameras.main.width/2+yn.camera.x,yn.camera.centerY?mn.GetGameplayScene().cameras.main.scrollY=-mn.GetGameplayScene().cameras.main.height/2+yn.camera.y:mn.GetGameplayScene().cameras.main.scrollY=yn.camera.y}function _InternalRepositionLayers(){for(var t in Tn.phaserLayers){var i=Tn.phaserLayers[t],r=i.layer.scene.cameras.main.width,o=i.layer.scene.cameras.main.height;2==i.anchorX&&(i.layer.x=r/2),3==i.anchorX&&(i.layer.x=r),2==i.anchorY&&(i.layer.y=o/2),3==i.anchorY&&(i.layer.y=o)}}var En="sprite",Mn="image",_n="spine",Rn="text",Pn="zone",kn="particle",On=function(){function OperateOnVisual(){_classCallCheck(this,OperateOnVisual)}return _createClass(OperateOnVisual,null,[{key:"GetDisplayedAsAny",value:function GetDisplayedAsAny(t){return Ln.At(t).refDisplayed}},{key:"GetDisplayed",value:function GetDisplayed(t){return Ln.At(t).refDisplayed}},{key:"GetDisplayedAsImage",value:function GetDisplayedAsImage(t){return Ln.At(t).refDisplayed}},{key:"GetDisplayedAsZone",value:function GetDisplayedAsZone(t){return Ln.At(t).refDisplayed}},{key:"GetDisplayedAsSprite",value:function GetDisplayedAsSprite(t){return Ln.At(t).refDisplayed}},{key:"GetDisplayedAsBitmapText",value:function GetDisplayedAsBitmapText(t){return Ln.At(t).refDisplayed}},{key:"BringToTop",value:function BringToTop(t){OperateOnVisual.GetDisplayedAsImage(t).parentContainer.bringToTop(OperateOnVisual.GetDisplayedAsImage(t))}},{key:"GetBottomY",value:function GetBottomY(t){return OperateOnVisual.GetDisplayed(t).y+OperateOnVisual.GetHeight(t)/2}},{key:"GetHeight",value:function GetHeight(t){return OperateOnVisual.GetDisplayedAsImage(t).displayHeight}},{key:"IsImgOrSprite",value:function IsImgOrSprite(t){return Ln.At(t).type==Mn||Ln.At(t).type==En}},{key:"IsSpine",value:function IsSpine(t){return Ln.At(t).type==_n}},{key:"SetTexture",value:function SetTexture(t,i){OperateOnVisual.IsImgOrSprite(t)&&OperateOnVisual.GetDisplayedAsImage(t).setTexture(i)}},{key:"SetAnimation",value:function SetAnimation(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(OperateOnVisual.IsImgOrSprite(t)){var o=Ln.At(t);o.curAnimation=i;var a=OperateOnVisual.GetDisplayedAsImage(t);a.setTexture(o.animations[o.curAnimation].texture)}else if(OperateOnVisual.IsSpine(t)){var h=Ln.At(t),l=!1;if(h.curAnimation==i&&(l=!0),h.animations[i]&&0==h.animations[i].loop&&h.curAnimationFinishCount>=1&&(l=!1),l)return;h.curAnimation=i,h.curAnimationFinishCount=0;var u={};h.animations[i]&&E(u,h.animations[i]),r&&E(u,r),null==u.loop&&(u.loop=!0),h.curAnimationCfg=u,h.refDisplayed.setAnimation(0,i,u.loop)}else console.warn("IMPLEMENT HERE!")}},{key:"GetAnimationName",value:function GetAnimationName(t){return Ln.At(t).curAnimation}},{key:"SpineListAnimations",value:function SpineListAnimations(t){for(var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[],o=OperateOnVisual.GetDisplayedAsAny(t),a=0;a<o.stateData.skeletonData.animations.length;a++){var h=o.stateData.skeletonData.animations[a],l=h.name;r.push(l)}return i&&console.log(t,r),r}},{key:"SpineListSlots",value:function SpineListSlots(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=OperateOnVisual.GetDisplayedAsAny(t),o=r.getSlotList();return i&&console.log(t,o),o}},{key:"SpineListAttachmentsBySlots",value:function SpineListAttachmentsBySlots(t){for(var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=OperateOnVisual.GetDisplayedAsAny(t),o={},a=r.skeletonData.defaultSkin.attachments,h=r.getSlotList(),l=0;l<h.length;l++){var u=h[l],c=a[l];for(var d in c){var p=o[u];p||(p=[],o[u]=p),p.push(d)}}return i&&console.log(t,o),o}},{key:"SpineRandomizeSlotsAttachments",value:function SpineRandomizeSlotsAttachments(t,i){OperateOnVisual.GetDisplayedAsAny(t);for(var r=0;r<i.length;r++){var o=i[r],a=OperateOnVisual.SpineListAttachmentsBySlots(t,!1)[o],h=Phaser.Utils.Array.GetRandom(a);OperateOnVisual.SpineSetAttachment(t,o,h)}}},{key:"RandomizeAnimationTime",value:function RandomizeAnimationTime(t){var i=OperateOnVisual.GetDisplayedAsAny(t).state.tracks[0];i.trackTime=Phaser.Math.FloatBetween(0,i.animationEnd)}},{key:"SpineSetAttachment",value:function SpineSetAttachment(t,i,r){OperateOnVisual.GetDisplayedAsAny(t).setAttachment(i,r)}},{key:"SetFlipX",value:function SetFlipX(t,i){var r=this.GetDisplayedAsAny(t);OperateOnVisual.IsSpine(t)?r.scaleX=i?-1:1:r.setFlipX(i)}},{key:"SetScale",value:function SetScale(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;1!=i&&(OperateOnVisual.GetDisplayedAsImage(t).scaleX=i,1==r&&(OperateOnVisual.GetDisplayedAsImage(t).scaleY=i)),1!=r&&(OperateOnVisual.GetDisplayedAsImage(t).scaleY=r)}},{key:"SetTextWithZeroPad",value:function SetTextWithZeroPad(t,i,r){var o=Voca.padLeft(i,r,"0");OperateOnVisual.GetDisplayedAsBitmapText(t).setText(o)}},{key:"SortParentByProperty",value:function SortParentByProperty(t,i){OperateOnVisual.GetDisplayedAsImage(t).parentContainer.sort(i)}},{key:"ReparentLayer",value:function ReparentLayer(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=Ln.At(t);E(o,r),o.layerName=i,o.postprocessLayerName();var a=OperateOnVisual.GetDisplayedAsImage(t),h=mn.GetOrMakeContainerLayer(o.layerData.layer,o.layerData.anchorX,o.layerData.anchorY,o.layerDepth),l=a.parentContainer,u=h,c=a.x,d=a.y;c-=l.scene.cameras.main.scrollX,d-=l.scene.cameras.main.scrollY,c+=u.scene.cameras.main.scrollX,d+=u.scene.cameras.main.scrollY,c+=l.x,d+=l.y,c-=u.x,d-=u.y,OperateOnVisual.GetDisplayedAsImage(t).x=c,OperateOnVisual.GetDisplayedAsImage(t).y=d,h.add(o.refDisplayed)}},{key:"SetPosition",value:function SetPosition(t,i,r){var o=OperateOnVisual.GetDisplayed(t);o.x=i,o.y=r}},{key:"IsDisplayedOnScreen",value:function IsDisplayedOnScreen(t){var i=OperateOnVisual.GetDisplayedAsImage(t),r=OperateOnVisual.GetBounds(t),o=i.scene.cameras.main.worldView,a=new Phaser.Geom.Rectangle(o.x,o.y,o.width,o.height),h=new Phaser.Geom.Rectangle(o.x,o.y,o.width,o.height),l=Phaser.Geom.Rectangle.ContainsRect(a,r);return l||(l=!0,r.y+r.height<a.y&&(l=!1),r.y>a.y+a.height&&(l=!1),r.x+r.width<a.x&&(l=!1),r.x-r.width>h.x+h.width&&(l=!1)),l}},{key:"GetBounds",value:function GetBounds(t){return OperateOnVisual.GetDisplayedAsImage(t).getBounds()}},{key:"GetEmitter",value:function GetEmitter(t){return Ln.At(t).refDisplayed.emitters.list[0]}},{key:"GetParticles",value:function GetParticles(t){return Ln.At(t).refDisplayed}}]),OperateOnVisual}(),Ln=function(t){_inherits(VisualComponent,t);var i=_createSuper(VisualComponent);function VisualComponent(t){var r;_classCallCheck(this,VisualComponent),(r=i.call(this,null)).type=null,r.texture=null,r.animations={},r.curAnimation=null,r.curAnimationCfg=null,r.curAnimationFinishCount=0,r.emitterConfig=null,r.layerName="gameplay",r.selfDepth=0,r.layerDepth=0,r.scale=1,r.layerData={layer:"gameplay",x:1,y:1},r.refDisplayed=null;var o=JSON.parse(JSON.stringify(r.constructor.properties));return Object.assign(_assertThisInitialized(r),o,t),r}return _createClass(VisualComponent,[{key:"postprocessLayerName",value:function postprocessLayerName(){if(Voca.countSubstrings(this.layerName,"_")>0){var t=Voca.split(this.layerName,"_");this.layerData.layer=t[0],this.layerData.anchorX=parseInt(Voca.charAt(t[1],0)),this.layerData.anchorY=parseInt(Voca.charAt(t[1],1))}else this.layerData.layer=this.layerName,this.layerData.anchorX=1,this.layerData.anchorY=1}},{key:"onAttached",value:function onAttached(t){var i,r=this;_get(_getPrototypeOf(VisualComponent.prototype),"onAttached",this).call(this,t),this.postprocessLayerName();var o=mn.GetOrMakeContainerLayer(this.layerData.layer,this.layerData.anchorX,this.layerData.anchorY,this.layerDepth),a=o.scene;if(this.type==Mn)i=a.make.image({x:0,y:0,key:this.texture,add:!0},!1);else if(this.type==_n)null==this.animations&&(this.animations={Idle:{loop:!0}},this.curAnimation="Idle"),(i=a.make.spine({x:0,y:0,key:this.texture,animationName:this.curAnimation,loop:this.animations[this.curAnimation].loop,add:!1},!1)).state.addListener({complete:function complete(t){r.curAnimationCfg&&0==r.curAnimationCfg.loop&&r.curAnimationFinishCount<=0&&r.curAnimationFinishCount++}});else if(this.type==Rn){var h=this.text;null==h&&(h="000000",this.text=h),(i=a.make.bitmapText({x:0,y:0,font:this.texture,text:h,add:!0},!1)).setOrigin(.5,.5)}else if(this.type==Pn)null==this.width&&(this.width=100),null==this.height&&(this.height=100),i=a.make.zone({x:0,y:0,width:this.width,height:this.height,add:!0});else if(this.type==kn){var l=this.emitterConfig,u=a.add.particles(this.texture);u.createEmitter(l),i=u}i.setScale(this.scale),this.refDisplayed=i,o.add(i),i.selfEntity=t,0!=this.selfDepth&&(i.setDepth(this.selfDepth),On.SortParentByProperty(this.entity,"depth"))}},{key:"onDestroyed",value:function onDestroyed(t){this.refDisplayed&&(this.refDisplayed.selfEntity=null,this.refDisplayed.destroy(),this.refDisplayed=null)}}],[{key:"At",value:function At(t){return t.visual}},{key:"properties",get:function get(){return{}}}]),VisualComponent}(r),Dn=function(){function VisualTemplates(){_classCallCheck(this,VisualTemplates)}return _createClass(VisualTemplates,null,[{key:"DefaultImage",value:function DefaultImage(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"_NONE",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={type:Mn,texture:t};return i&&E(r,i),r}},{key:"DefaultSpine",value:function DefaultSpine(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"_NONE",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={type:_n,texture:t};return i&&E(r,i),r}},{key:"DefaultText",value:function DefaultText(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"_NONE",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={type:Rn,texture:t};return i&&E(r,i),r}},{key:"DefaultParticle",value:function DefaultParticle(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"_NONE",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={type:kn,texture:t};return i&&E(r,i),r}},{key:"DefaultZone",value:function DefaultZone(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i={type:Pn};return t&&E(i,t),i}}]),VisualTemplates}();function InteractiveAt(t){return t.interactive}var Fn=function(){function OperateOnInteractive(){_classCallCheck(this,OperateOnInteractive)}return _createClass(OperateOnInteractive,null,[{key:"EnableDrag",value:function EnableDrag(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"BasicInteraction";if(!t.has(Bn)){var o={always:{key:r}};E(o,i),t.add(Bn,Nn.GetInitialData(o))}var a=InteractiveAt(t);a.canDrag=!0}},{key:"DisableDrag",value:function DisableDrag(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=InteractiveAt(t);r.canDrag=!1,i&&t.remove(r)}},{key:"EnableSwipe",value:function EnableSwipe(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"BasicInteraction";if(!t.has(Bn)){var h={always:{key:a}};E(h,o),t.add(Bn,Nn.GetInitialData(h,{canSwipe:!0,onSwipeCmdName:i,swipeCfg:r}))}InteractiveAt(t)}},{key:"DebugInput",value:function DebugInput(t){var i=On.GetDisplayedAsImage(t);i.scene.input.enableDebug(On.GetDisplayedAsImage(t)),i.input.hitAreaDebug.setDepth(10*i.parentContainer.depth)}},{key:"ResizeInputAreaAsRectangle",value:function ResizeInputAreaAsRectangle(t,i,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,h=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=On.GetDisplayedAsSprite(t);l.input.hitArea.setSize(i,r),null!=o&&(l.input.hitArea.x=o),null!=a&&(l.input.hitArea.y=a),h&&(OperateOnInteractive.DebugInput(t),l.setAlpha(.5))}},{key:"PerformInteraction",value:function PerformInteraction(t,i,r){var o=InteractiveAt(t);if(o.dict[i]&&o.dict[i].key){var a,h=o.dict[i],l=h.payload;null!==(a=l)&&void 0!==a||(l={});var u=E({entity:t,reason:r},l);U.runCommand(h.key,u)}}},{key:"PerformSwipe",value:function PerformSwipe(t,i){var r=InteractiveAt(t);U.runCommand(r.onSwipeCmdName,{entity:t,swipe:i})}}]),OperateOnInteractive}(),Bn=function(t){_inherits(Interactive,t);var i=_createSuper(Interactive);function Interactive(t){var r;_classCallCheck(this,Interactive),(r=i.call(this,null)).pressed=!1,r.dict={},r.canDrag=!1,r.canSwipe=!1,r.onSwipeCmdName=null,r.swipeCfg=null,r.runtime={rexSwipe:null};var o=JSON.parse(JSON.stringify(r.constructor.properties));return Object.assign(_assertThisInitialized(r),o,t),r}return _createClass(Interactive,null,[{key:"properties",get:function get(){return{}}}]),Interactive}(r),Nn=function(){function InteractiveBuilder(){_classCallCheck(this,InteractiveBuilder)}return _createClass(InteractiveBuilder,null,[{key:"GetInitialData",value:function GetInitialData(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={dict:t};return i&&E(r,i),r}}]),InteractiveBuilder}();function CmdRepositionActorToActor(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0},o=On.GetDisplayed(i),a=On.GetDisplayed(t);a.x=o.x+r.x,a.y=o.y+r.y}function PinOthersAt(t){return t.pinOthers}var Gn=function(){function OperateOnPinOthers(){_classCallCheck(this,OperateOnPinOthers)}return _createClass(OperateOnPinOthers,null,[{key:"AddPinned",value:function AddPinned(t,i,r){var o,a;t.has(Yn)||t.add(Yn),null!==(o=r.x)&&void 0!==o||(r.x=0),null!==(a=r.y)&&void 0!==a||(r.y=0),CmdRepositionActorToActor(i,t,r),PinOthersAt(t).pinnedEntitiesList.push({ref:i,relation:r})}}]),OperateOnPinOthers}(),Yn=function(t){_inherits(PinOthers,t);var i=_createSuper(PinOthers);function PinOthers(t){var r;_classCallCheck(this,PinOthers),(r=i.call(this,null)).pinnedEntitiesList=[];var o=JSON.parse(JSON.stringify(r.constructor.properties));return Object.assign(_assertThisInitialized(r),o,t),r}return _createClass(PinOthers,null,[{key:"properties",get:function get(){return{}}}]),PinOthers}(r);function ToggleAt(t){return t.toggle}var Un=function(){function OperateOnToggle(){_classCallCheck(this,OperateOnToggle)}return _createClass(OperateOnToggle,null,[{key:"RunCommandsAtCurrentState",value:function RunCommandsAtCurrentState(t){var i=ToggleAt(t);U.runCommandObj(E({entity:t},i.states[i.curStateName].command))}},{key:"SetToggleState",value:function SetToggleState(t,i){ToggleAt(t).curStateName=i}},{key:"SetToggleStateAsNext",value:function SetToggleStateAsNext(t){var i=ToggleAt(t);i.curStateName=i.states[i.curStateName].nextState,OperateOnToggle.SynchAnimationToState(t)}},{key:"SynchAnimationToState",value:function SynchAnimationToState(t){var i=ToggleAt(t);On.SetAnimation(t,i.curStateName)}}]),OperateOnToggle}(),Xn=function(t){_inherits(Toggle,t);var i=_createSuper(Toggle);function Toggle(t){var r;_classCallCheck(this,Toggle),(r=i.call(this,null)).curStateName=null,r.states=null;var o=JSON.parse(JSON.stringify(r.constructor.properties));return Object.assign(_assertThisInitialized(r),o,t),r}return _createClass(Toggle,null,[{key:"properties",get:function get(){return{}}}]),Toggle}(r),Vn=function(){function ToggleBuilder(){_classCallCheck(this,ToggleBuilder)}return _createClass(ToggleBuilder,null,[{key:"GetInitialData",value:function GetInitialData(t,i){return{curStateName:t,states:i}}}]),ToggleBuilder}(),zn=26;function TweensAt(t){return t.tweens}var Wn=function(){function OperateOnTweens(){_classCallCheck(this,OperateOnTweens)}return _createClass(OperateOnTweens,null,[{key:"FastTrackPosition",value:function FastTrackPosition(t){if(t.has(Hn)){var i=TweensAt(t);if(i.position){var r=i.position;if(r.state!=zn){r.stop(),r.remove();for(var o=0;o<r.data.length;o++){var a=r.data[o];a.target[a.key]=a.end}}i.position=null}}}},{key:"TweenPosition",value:function TweenPosition(t,i){t.has(Hn)||t.add(Hn);var r=TweensAt(t);r.position&&(r.position.state!=zn&&r.position.stop(),r.position.remove(),r.position=null),i.targets=On.GetDisplayedAsImage(t),r.position=On.GetDisplayedAsImage(t).scene.tweens.add(i)}},{key:"IsTweeningPosition",value:function IsTweeningPosition(t){if(!t.has(Hn))return!1;var i=TweensAt(t);return!!i.position&&i.position.state!=zn}},{key:"IsTweeningScale",value:function IsTweeningScale(t){if(!t.has(Hn))return!1;var i=TweensAt(t);return!!i.scale&&i.scale.state!=zn}},{key:"TweenScale",value:function TweenScale(t,i){t.has(Hn)||t.add(Hn);var r=TweensAt(t);r.scale&&(r.scale.state!=zn&&r.scale.stop(),r.scale.remove(),r.scale=null),i.targets=On.GetDisplayedAsImage(t),r.scale=On.GetDisplayedAsImage(t).scene.tweens.add(i)}},{key:"TweenAlpha",value:function TweenAlpha(t,i){t.has(Hn)||t.add(Hn);var r=TweensAt(t);r.alpha&&(r.alpha.state!=zn&&r.alpha.stop(),r.alpha.remove(),r.alpha=null),i.targets=On.GetDisplayedAsImage(t),r.alpha=On.GetDisplayedAsImage(t).scene.tweens.add(i)}}]),OperateOnTweens}(),Hn=function(t){_inherits(Tweens,t);var i=_createSuper(Tweens);function Tweens(t){var r;_classCallCheck(this,Tweens),(r=i.call(this,null)).position=null,r.scale=null,r.alpha=null;var o=JSON.parse(JSON.stringify(r.constructor.properties));return Object.assign(_assertThisInitialized(r),o,t),r}return _createClass(Tweens,[{key:"onDestroyed",value:function onDestroyed(){this.position&&(this.position.stop(0),this.position.remove(),this.position=null),this.scale&&(this.scale.stop(0),this.scale.remove(),this.scale=null),this.alpha&&(this.alpha.stop(0),this.alpha.remove(),this.alpha=null)}}],[{key:"properties",get:function get(){return{}}}]),Tweens}(r),jn=new(_createClass((function InternalDataClass$1(){_classCallCheck(this,InternalDataClass$1),_defineProperty(this,"active",!0),_defineProperty(this,"queryPinOthers",null)}))),qn=function(){function SynchPinsRoutine(){_classCallCheck(this,SynchPinsRoutine)}return _createClass(SynchPinsRoutine,null,[{key:"Init",value:function Init(){jn.queryPinOthers=D.GetWorld().createQuery({all:[Yn]})}},{key:"GetName",value:function GetName(){return"SynchPinsRoutine"}},{key:"Update",value:function Update(t){for(var i=jn.queryPinOthers._cache,r=0;r<i.length;r++)for(var o=i[r],a=PinOthersAt(o).pinnedEntitiesList,h=0;h<a.length;h++){CmdRepositionActorToActor(a[h].ref,o,a[h].relation)}}}]),SynchPinsRoutine}(),Kn=function(t){_inherits(TransformComponent,t);var i=_createSuper(TransformComponent);function TransformComponent(t){var r;_classCallCheck(this,TransformComponent),(r=i.call(this,null)).refTarget={x:t.x,y:t.y,angle:t.angle};var o=JSON.parse(JSON.stringify(r.constructor.properties));return Object.assign(_assertThisInitialized(r),o,t),r}return _createClass(TransformComponent,null,[{key:"At",value:function At(t){return t.transform}},{key:"properties",get:function get(){return{}}},{key:"AddToEntity",value:function AddToEntity(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;t.add(TransformComponent,{x:i,y:r,angle:o})}}]),TransformComponent}(r),Zn=new(_createClass((function InternalDataClass(){_classCallCheck(this,InternalDataClass),this.query}))),Jn=function(){function ReactiveTransformAndVisualQuery(){_classCallCheck(this,ReactiveTransformAndVisualQuery)}return _createClass(ReactiveTransformAndVisualQuery,null,[{key:"RegisterQuery",value:function RegisterQuery(){Zn.query=D.GetWorld().createQuery({all:[Ln,Kn]}),Zn.query.onEntityAdded((function(t){var i=Kn.At(t);On.GetDisplayed(t).x=i.refTarget.x,On.GetDisplayed(t).y=i.refTarget.y,On.GetDisplayed(t).angle=i.refTarget.angle,i.refTarget=On.GetDisplayed(t)})),Zn.query.onEntityRemoved((function(t){}))}},{key:"GetReference",value:function GetReference(){return Zn.query}}]),ReactiveTransformAndVisualQuery}();function CmdRepositionTo(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=On.GetDisplayed(t);null!=i&&(o.x=i),null!=r&&(o.y=r)}var Qn=new(_createClass((function Data(){_classCallCheck(this,Data),this.trackedTaps={},this.trackedInputs=[{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null},{input:null,obj:null}],this.keys={},this.sinceButtonPress=1e4,this.swipe=null,this.swipeCallback=null,this.queryInteractive=null,this.keyCallbacks={}}))),$n=function(){function InputRoutine(){_classCallCheck(this,InputRoutine)}return _createClass(InputRoutine,null,[{key:"Init",value:function Init(){var t=mn.GetGameplayScene();t.input.addPointer(10),Qn.trackedInputs[0].input=t.input.mousePointer,Qn.trackedInputs[1].input=t.input.pointer1,Qn.trackedInputs[2].input=t.input.pointer2,Qn.trackedInputs[3].input=t.input.pointer3,Qn.trackedInputs[4].input=t.input.pointer4,Qn.trackedInputs[5].input=t.input.pointer5,Qn.trackedInputs[6].input=t.input.pointer6,Qn.trackedInputs[7].input=t.input.pointer7,Qn.trackedInputs[8].input=t.input.pointer8,Qn.trackedInputs[9].input=t.input.pointer9,Qn.trackedInputs[10].input=t.input.pointer10,Qn.keys.w=t.input.keyboard.addKey("w"),Qn.keys.s=t.input.keyboard.addKey("s"),Qn.keys.a=t.input.keyboard.addKey("a"),Qn.keys.d=t.input.keyboard.addKey("d"),Qn.keys[" "]=t.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE),Qn.keys["/"]=t.input.keyboard.addKey("/"),Qn.keys.right=t.input.keyboard.addKey("right"),Qn.keys.left=t.input.keyboard.addKey("left"),Qn.keys.up=t.input.keyboard.addKey("up"),Qn.keys.down=t.input.keyboard.addKey("down"),t.input.keyboard.on("keydown",(function(t){Qn.keyCallbacks[t.key]&&Qn.keyCallbacks[t.key](t)})),Qn.queryInteractive=D.GetWorld().createQuery({all:[Ln,Bn]}),Qn.queryInteractive.onEntityAdded((function(t){!function _AddActorInteractivity(t){var i=On.GetDisplayedAsImage(t);i.setInteractive();var r=InteractiveAt(t);if(r.canSwipe){var o=mn.GetGameplayScene(),a={threshold:35,velocityThreshold:10,workaroundEnabled:1,workaroundMaxTime:1e3};E(a,r.swipeCfg),o.rexGestures.add.swipe(i,a).on("swipe",(function(t,i,r){Fn.PerformSwipe(i.selfEntity,t)}))}i.on("pointerup",(function(i,o,a,h){mn.IsRotationDisplayed()||r.pressed&&N.getData(CoreDataAt(t).gameStateName).isRunning()&&(_RemoveButtonTracking(t),Fn.PerformInteraction(t,"always","up"),Fn.PerformInteraction(t,"up","up"))})),i.on("pointerdown",(function(i,o,a,h){mn.IsRotationDisplayed()||N.getData(CoreDataAt(t).gameStateName).isRunning()&&(Fn.PerformInteraction(t,"always","down"),Fn.PerformInteraction(t,"down","down"),r.pressed=!0,function _AddButtonTracking(t,i){Qn.trackedInputs[i].obj?console.warn("ALREADY TRACKING BUTTON AT ID: ",i):Qn.trackedInputs[i].obj=t}(t,i.id))})),i.on("pointerover",(function(i,o,a,h){mn.IsRotationDisplayed()||N.getData(CoreDataAt(t).gameStateName).isRunning()&&(r.pressed||(Fn.PerformInteraction(t,"always","over"),Fn.PerformInteraction(t,"over","over")))})),i.on("pointerout",(function(i,o,a,h){mn.IsRotationDisplayed()||N.getData(CoreDataAt(t).gameStateName).isRunning()&&(r.pressed||(Fn.PerformInteraction(t,"always","out"),Fn.PerformInteraction(t,"out","out")))}))}(t)})),Qn.queryInteractive.onEntityRemoved((function(t){_RemoveButtonTracking(t),On.GetDisplayedAsImage(t).removeInteractive()})),Qn.swipe=t.rexGestures.add.swipe({threshold:35,velocityThreshold:10,workaroundEnabled:1,workaroundMaxTime:1e3}),Qn.swipe.on("swipe",(function(t){Qn.swipeCallback&&Qn.swipeCallback(t)}))}},{key:"GetName",value:function GetName(){return"InputRoutine"}},{key:"Update",value:function Update(t){mn.GetGameplayScene();for(var i=0;i<Qn.trackedInputs.length;i++){var r=Qn.trackedInputs[i].input;if(Qn.trackedInputs[i].obj)if(InteractiveAt(Qn.trackedInputs[i].obj).canDrag){var o=On.GetDisplayedAsImage(Qn.trackedInputs[i].obj);CmdRepositionTo(Qn.trackedInputs[i].obj,r.x+o.scene.cameras.main.scrollX,r.y+o.scene.cameras.main.scrollY)}r&&!r.isDown&&Qn.trackedInputs[i].obj&&_RemoveButtonTracking(Qn.trackedInputs[i].obj)}InputRoutine.GetPointerIfNotPressingButton()?(Qn.sinceButtonPress+=t,Qn.sinceButtonPress>=1e4&&(Qn.sinceButtonPress=1e4)):Qn.sinceButtonPress=0}},{key:"GetSinceButtonPress",value:function GetSinceButtonPress(){return Qn.sinceButtonPress}},{key:"SetSwipeCallback",value:function SetSwipeCallback(t){Qn.swipeCallback=t}},{key:"AddKeyDown",value:function AddKeyDown(t,i){if(Array.isArray(t))for(var r=0;r<t.length;r++){var o=t[r];Qn.keyCallbacks[o]=i}else Qn.keyCallbacks[t]=i}},{key:"HasTrackedButton",value:function HasTrackedButton(){for(var t=0;t<Qn.trackedInputs.length;t++)if(null!=Qn.trackedInputs[t].obj)return!0;return!1}},{key:"GetPointerIfNotPressingButton",value:function GetPointerIfNotPressingButton(){return 0==InputRoutine.HasTrackedButton()?mn.GetGameplayScene().input.activePointer:null}}]),InputRoutine}();function _RemoveButtonTracking(t){var i=InteractiveAt(t);i.pressed&&(Fn.PerformInteraction(t,"always","out"),function _NullifyTrackedButton(t){for(var i=0;i<Qn.trackedInputs.length;i++)if(Qn.trackedInputs[i].obj==t)return void(Qn.trackedInputs[i].obj=null)}(t)),i.pressed=!1}var er=new I,ir=function(){function LogicLoopRoutine(){_classCallCheck(this,LogicLoopRoutine)}return _createClass(LogicLoopRoutine,null,[{key:"Init",value:function Init(){}},{key:"GetName",value:function GetName(){return"LogicLoopRoutine"}},{key:"Update",value:function Update(t){for(var i=er.getKeyList(),r=0;r<i.length;r++){var o=i[r];er.getData(o).f(t)}}},{key:"SetUpdateFunc",value:function SetUpdateFunc(t,i){er.register(t,{f:i},!0)}},{key:"CleanFunction",value:function CleanFunction(t){er.register(t,{f:function f(){}},!0)}}]),LogicLoopRoutine}();function CmdActorDispose(t){Z.QueueActorToDisposeBuffer(t)}function CmdRepositionByDelta(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=On.GetDisplayed(t);o.x+=i,o.y+=r}function CmdRepositionBySize(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=On.GetDisplayed(t);o.x+=o.displayWidth*i,o.y+=o.displayHeight*r}function CmdTweenAlphaTo(t,i){var r,o={duration:1e3,delay:0,ease:"Cubic.InOut"};null!==(r=i.alpha)&&void 0!==r||(i.alpha=1),E(o,i),Wn.TweenAlpha(t,o)}function CmdTweenPositionTo(t,i){var r,o,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];a&&Wn.FastTrackPosition(t);var h={duration:1e3,delay:0,ease:"Cubic.InOut"};null!==(r=i.x)&&void 0!==r||(i.x=On.GetDisplayed(t).x),null!==(o=i.y)&&void 0!==o||(i.y=On.GetDisplayed(t).y),E(h,i),Wn.TweenPosition(t,h)}function CmdTweenScalePingBounceFrom(t,i,r){On.GetDisplayedAsImage(t).setScale(i),Wn.TweenScale(t,E({scale:1,duration:400,delay:0,ease:"Bounce"},r))}function CmdTweenScalePingBounceFromZero(t,i){On.GetDisplayedAsImage(t).setScale(0),Wn.TweenScale(t,E({scale:1,duration:400,delay:0,ease:"Bounce"},i))}function CmdTweenScaleTo(t,i){if(t&&!t.isDestroyed){var r={scale:1,duration:1e3,delay:0,ease:"Cubic.InOut"};E(r,i),Wn.TweenScale(t,r)}}var nr=_createClass((function ActorVisualInteractionsLib(){_classCallCheck(this,ActorVisualInteractionsLib),this.CommandButtonInteraction=U.register("ButtonInteraction",new G((function(t){var i=t.reason,r=t.entity;"over"==i?CmdTweenScaleTo(r,{scale:1.1,duration:100}):"out"==i?CmdTweenScaleTo(r,{scale:1,duration:100}):"up"==i?(mn.PlayAudioFile("tap"),CmdTweenScaleTo(r,{scale:1,duration:100})):"down"==i&&CmdTweenScaleTo(r,{scale:.9,duration:100})}))),this.CommandTestInteraction=U.register("BasicInteraction",new G((function(t){var i=t.reason,r=t.entity;"over"==i?CmdTweenScaleTo(r,{scale:1.1,duration:100}):"out"==i||"up"==i?CmdTweenScaleTo(r,{scale:1,duration:100}):"down"==i&&CmdTweenScaleTo(r,{scale:.9,duration:100})}))),this.CommandNoInteraction=U.register("NoInteraction",new G((function(t){t.reason,t.entity})))})),rr=_createClass((function GameCommonCommandsLib(){_classCallCheck(this,GameCommonCommandsLib),this.RunToggleLogic=U.register("RunToggleLogic",new G((function(t){var i=t.entity;Un.RunCommandsAtCurrentState(i),Un.SetToggleStateAsNext(i)}))),this.DoMuteAudio=U.register("DoMuteAudio",new G((function(t){mn.UserMuteAudio()}))),this.DoUnmuteAudio=U.register("DoUnmuteAudio",new G((function(t){mn.UserUnmuteAudio()})))}));function CmdTweenVisualByDeltaFrom(t,i){Wn.FastTrackPosition(t);var r={x:0,y:0,duration:1e3,delay:0,ease:"Cubic.InOut"};E(r,i);var o=On.GetDisplayed(t),a=r.x,h=r.y;r.x=o.x,r.y=o.y,o.x=o.x+a,o.y=o.y+h,Wn.TweenPosition(t,r)}function CmdTweenVisualByDeltaTo(t,i){Wn.FastTrackPosition(t);var r=E({x:0,y:0,duration:1e3,delay:0,ease:"Cubic.InOut"},i),o=On.GetDisplayed(t);r.x=o.x+r.x,r.y=o.y+r.y,Wn.TweenPosition(t,r)}var sr=_createClass((function GameTweenLib(){_classCallCheck(this,GameTweenLib),this.CommandTweenCoverTitle=U.register("TweenCoverTitle",new G((function(t){var i=t.entity;CmdTweenVisualByDeltaFrom(i,{y:-800,duration:1e3,onComplete:function onComplete(){CmdTweenVisualByDeltaTo(i,{y:-25,duration:1800,yoyo:!0,repeat:-1,ease:"Quadratic.In"})}})}))),this.CommandTweenPositionFromTop=U.register("TweenPositionFromTop",new G((function(t){CmdTweenVisualByDeltaFrom(t.entity,E({y:-700,duration:700},t))}))),this.CommandTweenPositionToTop=U.register("TweenPositionToTop",new G((function(t){CmdTweenVisualByDeltaTo(t.entity,E({y:-700,duration:450},t))}))),this.CommandTweenPositionFromBottom=U.register("TweenPositionFromBottom",new G((function(t){CmdTweenVisualByDeltaFrom(t.entity,E({y:700,duration:450},t))}))),this.CommandTweenPositionToBottom=U.register("TweenPositionToBottom",new G((function(t){CmdTweenVisualByDeltaTo(t.entity,E({y:700,duration:700},t))}))),this.CommandTweenPositionFromRight=U.register("TweenPositionFromRight",new G((function(t){CmdTweenVisualByDeltaFrom(t.entity,E({x:700,duration:450},t))}))),this.CommandTweenPositionToRight=U.register("TweenPositionToRight",new G((function(t){CmdTweenVisualByDeltaTo(t.entity,E({x:700,duration:700},t))}))),this.CommandTweenAlphaTo=U.register("TweenAlphaTo",new G((function(t){CmdTweenAlphaTo(t.entity,E({alpha:1,duration:500},t))})))})),or="GRID_OUT_OF_BOUNDS",ar=function(){function Grid2D(){_classCallCheck(this,Grid2D)}return _createClass(Grid2D,null,[{key:"AddRow",value:function AddRow(t,i){t.push(i)}},{key:"GetAt",value:function GetAt(t,i,r,o){return console.assert(null!=t,"Param Grid is: ",t),i<0||i>=Grid2D.GetWidth(t)||r<0||r>=Grid2D.GetHeight(t)?(o||console.warn(or,i,r,t),null):t[r][i]}},{key:"SetAt",value:function SetAt(t,i,r,o,a){t[r][i]=o}},{key:"IsOutOfBounds",value:function IsOutOfBounds(t,i,r){return console.assert(void 0!==t&&void 0!==i&&null!=r,"one of params is undefined!"),i<0}},{key:"GetHeight",value:function GetHeight(t){return t.length}},{key:"GetWidth",value:function GetWidth(t){return t[0].length}},{key:"GetTotalLength",value:function GetTotalLength(t){return Grid2D.GetWidth(t)*Grid2D.GetHeight(t)}},{key:"GetRandomX",value:function GetRandomX(t){return Phaser.Math.Between(0,Grid2D.GetWidth(t)-1)}},{key:"GetRandomY",value:function GetRandomY(t){return Phaser.Math.Between(0,Grid2D.GetHeight(t)-1)}},{key:"ResizeAsNew",value:function ResizeAsNew(t,i,r){for(var o=[],a=0;a<r;a++){for(var h=[],l=0;l<i;l++)h.push(0);o.push(h)}return o}},{key:"ForEachObjectInGridCallFunc",value:function ForEachObjectInGridCallFunc(t,i){for(var r=0;r<t.length;r++)for(var o=t[r],a=0;a<o.length;a++){i(o[a])}}},{key:"ForEachCoordinateInGridCallFunc",value:function ForEachCoordinateInGridCallFunc(t,i){for(var r=0;r<t.length;r++)for(var o=t[r],a=0;a<o.length;a++){i(o[a],a,r)}}},{key:"FillGridFromStringLineData",value:function FillGridFromStringLineData(t,i){for(var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=0;o<i.length;o++){var a=i[o];r&&console.log(a);for(var h=0;h<a.length;h++){var l=Voca.charAt(a,h);Grid2D.SetAt(t,h,o,l)}}}},{key:"ImmutableGetConvertFromSingleArray",value:function ImmutableGetConvertFromSingleArray(t,i,r){var o=Grid2D.ResizeAsNew([],i,r);return Grid2D.ForEachCoordinateInGridCallFunc(o,function(r,a,h){var l=i*h+a;Grid2D.SetAt(o,a,h,t[l])}.bind(this)),o}},{key:"ImmutableConvertToSingleArray",value:function ImmutableConvertToSingleArray(t){var i=[];return Grid2D.ForEachCoordinateInGridCallFunc(t,(function(t,r,o){i.push(t)})),i}},{key:"ImmutableGetFlipY",value:function ImmutableGetFlipY(t){var i=Grid2D.ResizeAsNew([],Grid2D.GetWidth(t),Grid2D.GetHeight(t));return Grid2D.ForEachCoordinateInGridCallFunc(t,(function(r,o,a){var h=o,l=Grid2D.GetHeight(t)-1-a;Grid2D.SetAt(i,h,l,r)})),i}},{key:"ImmutableGetFlipX",value:function ImmutableGetFlipX(t){var i=Grid2D.ResizeAsNew([],Grid2D.GetWidth(t),Grid2D.GetHeight(t));return Grid2D.ForEachCoordinateInGridCallFunc(t,(function(r,o,a){var h=Grid2D.GetWidth(t)-1-o,l=a;Grid2D.SetAt(i,h,l,r)})),i}}]),Grid2D}(),hr=function(){function ArrayUtil(){_classCallCheck(this,ArrayUtil)}return _createClass(ArrayUtil,null,[{key:"SpliceRandomFromArrReturnSpliced",value:function SpliceRandomFromArrReturnSpliced(t){var i=Phaser.Utils.Array.GetRandom(t);return t.indexOf(i)>-1&&t.splice(t.indexOf(i),1),i}},{key:"SpliceRandomFromArrReturnSplicedBetweenIndex",value:function SpliceRandomFromArrReturnSplicedBetweenIndex(t,i,r){r>t.length&&(r=t.length);var o=Phaser.Math.Between(i,r),a=t[o];return t.splice(o,1),a}}]),ArrayUtil}(),lr=_createClass((function IceTruckGameStatesLib(){var t=this;_classCallCheck(this,IceTruckGameStatesLib),this.Always=new q("Always"),this.GameplayLoop=new q("GameplayLoop"),this.GameplayLevel=new q("GameplayLevel"),this.GameplayGui=new q("GameplayGui"),this.Cover=new q("Cover"),this.GameOver=new q("GameOver"),this.Fade=new q("Fade"),this.AudioController=new q("AudioController"),this.Pause=new q("Pause"),this.CommandRequestCover=U.register("RequestCover",new G((function(){mn.SetPauseAllowedByStates(!1),t.Always.continue(),t.GameplayLoop.quit(),t.GameplayGui.quit(),t.GameplayLevel.quit(),t.GameOver.quit(),t.Cover.enterFresh(),t.AudioController.continue()}))),this.CommandRequestCoverFromGameOver=U.register("RequestCoverFromGameOver",new G((function(){mn.SetPauseAllowedByStates(!1),t.Always.continue(),t.GameplayLevel.exit(),t.GameplayGui.exit(),t.GameplayLoop.exit(),t.GameOver.exit(),t.AudioController.continue(),t.Fade.enterFresh(),Z.QueueDelayedFunction(null,550,(function(){t.Cover.enterFresh(),t.Fade.exit()}))}))),this.CommandRequestGameplay=U.register("RequestGameplay",new G((function(){mn.SetPauseAllowedByStates(!0),t.Always.continue(),t.Cover.exit(),t.GameOver.quit(),t.GameplayLevel.enterFresh(),t.GameplayGui.enterFresh(),t.GameplayLoop.enterFresh(),t.AudioController.continue()}))),this.CommandRequestGameOver=U.register("RequestGameOver",new G((function(){mn.SetPauseAllowedByStates(!0),t.Always.continue(),t.GameplayLevel.continue(),t.GameplayGui.continue(),t.GameplayLoop.quit(),t.Cover.quit(),t.GameOver.enterFresh(),t.AudioController.continue()}))),this.CommandRestartLevelLogic=U.register("RestartLevelLogic",new G((function(){mn.SetPauseAllowedByStates(!0),t.Always.continue(),t.Cover.exit(),t.GameOver.quit(),t.GameplayLevel.exit(),t.GameplayLoop.exit(),t.AudioController.continue(),Z.QueueDelayedFunction(null,100,(function(){t.GameplayLevel.enterFresh(),t.GameplayGui.continue(),t.GameplayLoop.enterFresh()}))}))),this.CommandPauseGame=U.register("PauseGame",new G((function(i){mn.TryPauseGame()&&t.Pause.continue()}))),this.CommandUnpauseGame=U.register("UnpauseGame",new G((function(i){mn.TryUnpauseGame()&&t.Pause.quit()})))})),ur=function MyCMD(t,i){return{key:t,payload:i}},cr=_createClass((function Internal(){_classCallCheck(this,Internal),this.GuiImageObject=function(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"gui_22",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=D.CreateEntity(t);return Kn.AddToEntity(a),a.add(Ln,Dn.DefaultImage(i,{layerName:r})),"bottom"==o&&a.add(V,z.GetInitialData({postmake:ur("TweenPositionFromBottom"),exit:ur("TweenPositionToBottom")})),a},this.BtnAudioToggle=function(t){var i=D.CreateEntity(t);return $.SetAlias(i,"SettingsToggleBtnAudio"),Kn.AddToEntity(i),i.add(Ln,Dn.DefaultImage("Btn_SoundOn",{layerName:"gui_31",animations:{active:{texture:"Btn_SoundOn"},inactive:{texture:"Btn_SoundOff"}}})),i.add(V,z.GetInitialData({postmake:ur("TweenPositionFromTop"),exit:ur("TweenPositionToTop")})),i.add(Bn,Nn.GetInitialData({always:ur("ButtonInteraction"),up:ur("RunToggleLogic")})),i.add(Xn,Vn.GetInitialData("active",{active:{nextState:"inactive",command:ur("DoMuteAudio")},inactive:{nextState:"active",command:ur("DoUnmuteAudio")}})),i},this.Background=function(t){var i=D.CreateEntity(t);return Kn.AddToEntity(i),i.add(Ln,Dn.DefaultImage("BG")),i},this.PermaIllustration=function(t){var i=D.CreateEntity(t);return Kn.AddToEntity(i,0,1050),i.add(Ln,Dn.DefaultImage("Illustration")),i},this.GameBoard=function(t){var i=D.CreateEntity(t);return Kn.AddToEntity(i,0,1050),i.add(Ln,Dn.DefaultImage("Lada",{selfDepth:7})),i},this.BoardCovering=function(t){var i=D.CreateEntity(t);return Kn.AddToEntity(i,0,1050),i.add(Ln,Dn.DefaultImage("BG",{selfDepth:6})),i},this.CoverTruck=function(t){var i=D.CreateEntity(t);return Kn.AddToEntity(i),i.add(Ln,Dn.DefaultImage("Cover_IceCreamTruck",{layerName:"gui_22"})),i.add(V,z.GetInitialData({postmake:ur("TweenPositionFromTop"),exit:ur("TweenPositionToTop")})),i},this.CoverTitle=function(t){var i=D.CreateEntity(t);return Kn.AddToEntity(i),i.add(Ln,Dn.DefaultImage("GameTitle",{layerName:"gui_22"})),i.add(V,z.GetInitialData({postmake:ur("TweenCoverTitle"),exit:ur("TweenPositionToTop")})),i},this.CoverLogo=function(t){var i=D.CreateEntity(t);return $.SetAlias(i,"CoverLogo"),Kn.AddToEntity(i),i.add(Ln,Dn.DefaultImage("BM_Logo",{layerName:"gui_31"})),i.add(V,z.GetInitialData({postmake:ur("TweenPositionFromTop",{delay:200}),exit:ur("TweenPositionToTop",{})})),i},this.CoverScorePanel=function(t){var i=D.CreateEntity(t);return $.SetAlias(i,"CoverScorePanel"),Kn.AddToEntity(i),i.add(Ln,Dn.DefaultImage("ScorePanel",{layerName:"gui_11"})),i.add(V,z.GetInitialData({postmake:ur("TweenPositionFromTop",{delay:100}),exit:ur("TweenPositionToTop")})),i},this.CoverScoreFont=function(t){var i=D.CreateEntity(t);return $.SetAlias(i,"CoverScoreText"),Kn.AddToEntity(i),i.add(Ln,Dn.DefaultText("scorefont",{layerName:"gui_11"})),i},this.CoverHighscoreIcon=function(t){var i=D.CreateEntity(t);return Kn.AddToEntity(i),i.add(Ln,Dn.DefaultImage("HighscoreIcon",{layerName:"gui_11"})),i},this.CoverPlayBtn=function(t){var i=D.CreateEntity(t);return Kn.AddToEntity(i),i.add(Ln,Dn.DefaultImage("Btn_Play",{layerName:"gui_22"})),i.add(V,z.GetInitialData({postmake:ur("TweenPositionFromBottom"),exit:ur("TweenPositionToBottom")})),i.add(Bn,Nn.GetInitialData({always:ur("ButtonInteraction"),up:ur("RequestGameplay")})),i},this.FadeCurtain=function(t){var i=D.CreateEntity(t);return Kn.AddToEntity(i),i.add(Ln,Dn.DefaultImage("ZaslonkaFade",{layerName:"pause_22",scale:32})),i.add(V,z.GetInitialData({exit:ur("TweenAlphaTo",{alpha:0,duration:400})})),i},this.PauseBackground=function(t){var i=D.CreateEntity(t);return Kn.AddToEntity(i),i.add(Ln,Dn.DefaultImage("PauseCurtain",{layerName:"pause_22",scale:32})),i},this.PauseIcon=function(t){var i=D.CreateEntity(t);return Kn.AddToEntity(i),i.add(Ln,Dn.DefaultImage("PauseIcon",{layerName:"pause_22"})),i},this.PauseButtonCallUnpause=function(t){var i=D.CreateEntity(t);return Kn.AddToEntity(i),i.add(Ln,Dn.DefaultImage("Btn_Play",{layerName:"pause_22"})),i.add(Bn,Nn.GetInitialData({always:ur("ButtonInteraction"),up:ur("UnpauseGame")})),i},this.GameOverRestartIcon=function(t){var i=D.CreateEntity(t);return Kn.AddToEntity(i),i.add(Ln,Dn.DefaultImage("TryAgain",{layerName:"gui_22"})),i.add(V,z.GetInitialData({postmake:ur("TweenPositionFromTop",{delay:100}),exit:ur("TweenPositionToTop")})),i},this.GameOverPlayBtn=function(t){var i=D.CreateEntity(t);return Kn.AddToEntity(i),i.add(Ln,Dn.DefaultImage("Btn_Play",{layerName:"gui_22"})),i.add(V,z.GetInitialData({postmake:ur("TweenPositionFromBottom"),exit:ur("TweenPositionToBottom")})),i.add(Bn,Nn.GetInitialData({always:ur("ButtonInteraction"),up:ur("RequestCoverFromGameOver")})),i},this.GameOverHighscoreIcon=function(t){var i=D.CreateEntity(t);return Kn.AddToEntity(i),i.add(Ln,Dn.DefaultImage("HighscoreIcon",{layerName:"gui_11"})),i.add(V,z.GetInitialData({postmake:ur("TweenPositionFromTop"),exit:ur("TweenPositionToTop")})),i},this.TutorialHowToPlayHand=function(t){var i=D.CreateEntity(t);return $.SetAlias(i,"TutorialHowToPlayHand"),Kn.AddToEntity(i),i.add(Ln,Dn.DefaultSpine("HTP_MinimalHand",{selfDepth:50,layerDepth:1,curAnimation:"Hold",animations:{Hold:{loop:!0}}})),i},this.TutorialHowToMergeHand=function(t){var i=D.CreateEntity(t);return $.SetAlias(i,"TutorialHowToMergeHand"),Kn.AddToEntity(i),i.add(Ln,Dn.DefaultSpine("HTP_MinimalHand",{selfDepth:50,layerDepth:1,curAnimation:"Hold",animations:{Hold:{loop:!1}}})),i},this.GameplayBtnPause=function(t){var i=D.CreateEntity(t);return Kn.AddToEntity(i),i.add(Ln,Dn.DefaultImage("Btn_Pause",{layerName:"gui_31"})),i.add(V,z.GetInitialData({postmake:ur("TweenPositionFromRight"),exit:ur("TweenPositionToRight")})),i.add(Bn,Nn.GetInitialData({always:ur("ButtonInteraction"),up:ur("PauseGame")})),i},this.GameplayScorePanel=function(t){var i=D.CreateEntity(t);return $.SetAlias(i,"GameplayScorePanel"),Kn.AddToEntity(i),i.add(Ln,Dn.DefaultImage("ScorePanel",{layerName:"gui_11"})),i.add(V,z.GetInitialData({postmake:ur("TweenPositionFromTop",{delay:100}),exit:ur("TweenPositionToTop")})),i},this.GameplayScoreFont=function(t){var i=D.CreateEntity(t);return $.SetAlias(i,"GameplayScoreText"),Kn.AddToEntity(i),i.add(Ln,Dn.DefaultText("scorefont",{layerName:"gui_11"})),i},this.GameplayScoreIcon=function(t){var i=D.CreateEntity(t);return $.SetAlias(i,"GameplayScoreIcon"),Kn.AddToEntity(i),i.add(Ln,Dn.DefaultImage("ScoreIcon",{layerName:"gui_11"})),i},this.BoardTileSlot=function(t){var i=D.CreateEntity(t);return Kn.AddToEntity(i),i.add(Ln,Dn.DefaultImage("SmallerPanelZKulkami",{selfDepth:10})),i},this.Podstawka=function(t){var i=D.CreateEntity(t);return Kn.AddToEntity(i),i.add(Ln,Dn.DefaultImage("Podstawka_Przod",{selfDepth:9})),i},this.IceCreamBall=function(t,i){var r=D.CreateEntity(t);return Kn.AddToEntity(r),it.AddToEntityWithProperties(r,{}),r.add(Ln,Dn.DefaultImage(i,{selfDepth:20})),r},this.Coin=function(t){var i=D.CreateEntity(t);return Kn.AddToEntity(i),it.AddToEntityWithProperties(i,{}),i.add(Ln,Dn.DefaultImage("Coin",{selfDepth:30})),$.AddBagList(i,["COINS"]),i},this.Wafelek=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,r=D.CreateEntity(t);return Kn.AddToEntity(r),r.add(Ln,Dn.DefaultImage("Wafel",{selfDepth:i})),r},this.Dymek=function(t){var i=D.CreateEntity(t);return Kn.AddToEntity(i),i.add(Ln,Dn.DefaultImage("MalyDymek",{selfDepth:15})),i},this.Kid=function(t){var i=D.CreateEntity(t);return Kn.AddToEntity(i),i.add(Ln,Dn.DefaultSpine("Kids",{selfDepth:5,curAnimation:"idle",animations:{idle:{loop:!0}}})),i}})),dr=new cr;var fr=function(){function IceTruckLayouts(){_classCallCheck(this,IceTruckLayouts)}return _createClass(IceTruckLayouts,null,[{key:"Always",value:function Always(t){CmdRepositionBySize(dr.Background(t.name),0,.5);var i=dr.PermaIllustration(t.name);CmdRepositionBySize(i,0,-.5);var r=dr.GameBoard(t.name);CmdRepositionTo(r,null,On.GetBottomY(i)),CmdRepositionBySize(r,0,.5),CmdRepositionByDelta(r,0,-25);var o=dr.BoardCovering(t.name);CmdRepositionTo(o,null,On.GetBottomY(r)),CmdRepositionBySize(o,0,.5)}},{key:"Cover",value:function Cover(t){var i=dr.CoverTruck(t.name);CmdRepositionByDelta(i,0,-280),X.RunCommandAtTriggerKey(i,"postmake");var r=dr.CoverTitle(t.name);CmdRepositionBySize(r,0,-.5),CmdRepositionByDelta(r,0,100),X.RunCommandAtTriggerKey(r,"postmake");var o=dr.CoverLogo(t.name);CmdRepositionBySize(o,-.5,.5),CmdRepositionByDelta(o,-85,8),X.RunCommandAtTriggerKey(o,"postmake");var a=dr.CoverScorePanel(t.name);CmdRepositionBySize(a,.5,.5),X.RunCommandAtTriggerKey(a,"postmake");var h=dr.CoverScoreFont(t.name);Gn.AddPinned(a,h,{x:25,y:2});var l=dr.CoverHighscoreIcon(t.name);Gn.AddPinned(a,l,{x:-135,y:3});var u=dr.CoverPlayBtn(t.name);CmdRepositionBySize(u,0,.5),CmdRepositionByDelta(u,0,150),X.RunCommandAtTriggerKey(u,"postmake")}},{key:"GameplayLoop",value:function GameplayLoop(t){var i=dr.GameplayBtnPause(t.name);CmdRepositionBySize(i,-.5,.5),CmdRepositionByDelta(i,0,80),X.RunCommandAtTriggerKey(i,"postmake")}},{key:"GameplayGui",value:function GameplayGui(t){var i=dr.GameplayScorePanel(t.name);CmdRepositionBySize(i,.5,.5),X.RunCommandAtTriggerKey(i,"postmake");var r=dr.GameplayScoreFont(t.name);Gn.AddPinned(i,r,{x:25,y:2});var o=dr.GameplayScoreIcon(t.name);Gn.AddPinned(i,o,{x:-138,y:0}),On.SetScale(o,.95,.95),function _CustomLevelGui(t){var i=dr.GuiImageObject(t.name,"EnergyBar_Base","gui_23","bottom");On.GetDisplayedAsImage(i).setOrigin(0,.5),$.AddBagList(i,"CustomInLevelGui"),CmdRepositionTo(i,0,-40),CmdRepositionBySize(i,-.5,0),X.RunCommandAtTriggerKey(i,"postmake");var r=dr.GuiImageObject(t.name,"EnergyBar_Fill","gui_23","bottom");On.GetDisplayedAsImage(r).setOrigin(0,.5),$.AddBagList(r,"CustomInLevelGui"),CmdRepositionTo(r,0,-40),CmdRepositionBySize(r,-.5,0),X.RunCommandAtTriggerKey(r,"postmake"),$.SetAlias(r,"progressbar_health_scaled");var o=dr.GuiImageObject(t.name,"EnergyBar_Icon","gui_23","bottom");On.GetDisplayedAsImage(o).setOrigin(0,.5),$.AddBagList(o,"CustomInLevelGui"),CmdRepositionTo(o,0,-40),CmdRepositionBySize(o,-.5,0),$.SetAlias(o,"progressbar_extra_icon"),CmdTweenScalePingBounceFromZero(o,{delay:200,duration:500})}(t)}},{key:"Pause",value:function Pause(t){dr.PauseBackground(t.name);var i=dr.PauseIcon(t.name);CmdRepositionBySize(i,0,-.5),CmdRepositionByDelta(i,0,-40);var r=dr.PauseButtonCallUnpause(t.name);CmdRepositionBySize(r,0,.5),CmdRepositionByDelta(r,0,40),X.RunCommandAtTriggerKey(r,"postmake")}},{key:"Fade",value:function Fade(t){var i=dr.FadeCurtain(t.name);X.RunCommandAtTriggerKey(i,"postmake"),On.GetDisplayedAsImage(i).alpha=0,CmdTweenAlphaTo(i,{alpha:1,duration:450})}},{key:"GameOver",value:function GameOver(t){var i=dr.GameOverRestartIcon(t.name);CmdRepositionBySize(i,0,-.5),CmdRepositionByDelta(i,0,-30),X.RunCommandAtTriggerKey(i,"postmake");var r=dr.GameOverPlayBtn(t.name);CmdRepositionBySize(r,0,.5),CmdRepositionByDelta(r,0,100),X.RunCommandAtTriggerKey(r,"postmake")}},{key:"AudioController",value:function AudioController(t){var i=dr.BtnAudioToggle(t.name);CmdRepositionBySize(i,-.5,.5),CmdRepositionByDelta(i,0,7),X.RunCommandAtTriggerKey(i,"postmake")}}]),IceTruckLayouts}(),pr={version:"1",highscore:0},gr=new(_createClass((function GameSessionClass(){_classCallCheck(this,GameSessionClass),this.unshackledGame=!1,this.needMergeTutorial=!0})));new sr,new nr;var vr=new lr;new rr,vr.AudioController.onEnter=function(){if(fr.AudioController(vr.AudioController),-1==mn.GetAudioState()){var t=Q.GetEntityByAlias("SettingsToggleBtnAudio");Un.SetToggleState(t,"inactive"),Un.SynchAnimationToState(t)}},vr.Pause.onEnter=function(){fr.Pause(vr.Pause)},vr.Fade.onEnter=function(){fr.Fade(vr.Fade)},vr.Always.onEnter=function(){fr.Always(vr.Always)},vr.Cover.onEnter=function(){mn.SetGameplayCameraOffset(0,0),fr.Cover(vr.Cover),On.SetTextWithZeroPad(Q.GetEntityByAlias("CoverScoreText"),pr.highscore,6)},U.register("DragEndIceCreamBall",new G((function(t){for(var i=t.entity,r=On.GetDisplayedAsImage(i),o=null,a=null,h=9999,l=0;l<Tr.clients.length;l++){var u=Tr.clients[l];if(u.needs.length>0){var c=On.GetDisplayedAsImage(u.podstawka);if(r.y<c.y+20){var d=Phaser.Math.Distance.Between(r.x,r.y,c.x,c.y),p=Phaser.Math.Distance.Between(r.x,0,c.x,0);d<200&&d<h&&p<100&&(o=u,a="client",h=d)}}}if("client"!=a){if(null==o){for(var g=1024,v=0;v<Tr.activeSlots.length;v++){var m=Tr.activeSlots[v];if(m.ownedIceCream&&m.ownedIceCream.id!=i.id&&i.data.icetruck.type==m.ownedIceCream.data.icetruck.type&&i.data.icetruck.level==m.ownedIceCream.data.icetruck.level){var y=On.GetDisplayedAsImage(m.ownedIceCream),T=Phaser.Math.Distance.Between(r.x,r.y,y.x,y.y);m.ownedIceCream.data.icetruck.level<3&&T<g&&(g=T,o=m.ownedIceCream)}}if(i.data.icetruck.level>=3&&(o=null,g=1024),g<100&&o)return void Mr(o,i,10);o=null}null==o&&CmdTweenPositionTo(i,{x:it.At(i).dragStartX,y:it.At(i).dragStartY,duration:100,ease:"Linear"})}else{Fn.DisableDrag(i,!0);var S=function GetIceCreamActiveSlot(t){for(var i in Tr.activeSlots){var r=Tr.activeSlots[i];if(r.ownedIceCream&&r.ownedIceCream.id==t.id)return r}}(i);Er(S,o,100)}}))),U.register("DragStartIceCreamBall",new G((function(t){var i=t.entity;On.BringToTop(i),null==it.At(i).dragStartX&&(it.At(i).dragStartX=On.GetDisplayed(i).x,it.At(i).dragStartY=On.GetDisplayed(i).y),mn.PlayAudioFile(Phaser.Utils.Array.GetRandom(["ice_cream_scoop_1","ice_cream_scoop_2"]));var r=Q.GetEntityByAlias("TutorialHowToPlayHand");if(r)for(var o=0;o<Tr.clients.length;o++){var a=Tr.clients[o];if(a.kid){var h=On.GetDisplayedAsImage(a.podstawka);CmdTweenPositionTo(r,{x:h.x,y:h.y,ease:"Linear",duration:500,yoyo:!0,loop:-1})}}})));var mr=["Kulka_1","Kulka_2","Kulka_3","Kulka_4","Kulka_5","Kulka_6","Kulka_7","Kulka_9"],yr={sawTutorial:!1},xr=_createClass((function LevelData(){_classCallCheck(this,LevelData),this.levelGrid=[],this.inactiveSlots=[],this.activeSlots=[],this.clients=[],this.score=0,this.timesFilled=0,this.movesLeft=200})),Tr=new xr,Sr=_createClass((function Client(t){_classCallCheck(this,Client),this.kid=null,this.needs=[],this.kidX=t,this.deliverable=null,this.podstawka=null,this.wafelek=null,this.dymek=null,this.dymekWafelek=null,this.dymekIceCream=null})),wr=_createClass((function BoardTileSlot(t,i,r){_classCallCheck(this,BoardTileSlot),this.actor=t,this.tileX=i,this.tileY=r,this.ownedIceCream=null})),br=function(){function AutoPlayBrainClass(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];_classCallCheck(this,AutoPlayBrainClass),this.stepsSinceMerge=0,this.stepsSinceSatisfy=0,this.active=!0,this.enabled=t}return _createClass(AutoPlayBrainClass,[{key:"doStep",value:function doStep(){if(this.enabled){var t=Pr(),i=_r(),r=Rr(),o="none";this.stepsSinceMerge++,this.stepsSinceSatisfy++,t.length>0&&(o="merge"),i.length>0&&(o="make"),"make"==o&&t.length>0&&this.stepsSinceMerge>3&&(o="merge"),r.length>0&&(o="deliver");var a=!1;if(i.length>0&&"make"==o){var h=Phaser.Utils.Array.GetRandom(i);Er(h.slot,h.client,1e3),a=!0}if(t.length>0&&"merge"==o){this.stepsSinceMerge=0;var l=Phaser.Utils.Array.GetRandom(t);Mr(l.first,l.second),a=!0}this.active=!1,a?Z.QueueDelayedFunction(GetGUID(),600,(function(){vr.GameplayLoop.isRunning()})):this.active=!1}}}]),AutoPlayBrainClass}(),Cr=new br,Ar=function TryActivateRandomSlot(){var t=null;0==Tr.activeSlots.length?(CmdTweenScalePingBounceFromZero((t=hr.SpliceRandomFromArrReturnSplicedBetweenIndex(Tr.inactiveSlots,1,2)).actor,{delay:Phaser.Math.Between(0,100),duration:Phaser.Math.Between(300,400)}),On.GetDisplayedAsImage(t.actor).setVisible(!0),Tr.activeSlots.push(t)):Tr.inactiveSlots.length>0&&(CmdTweenScalePingBounceFromZero((t=hr.SpliceRandomFromArrReturnSpliced(Tr.inactiveSlots)).actor,{delay:Phaser.Math.Between(0,100),duration:Phaser.Math.Between(300,400)}),On.GetDisplayedAsImage(t.actor).setVisible(!0),Tr.activeSlots.push(t))},Er=function AddToDeliverableIceCream(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=t.ownedIceCream;t.ownedIceCream=null;var a=!1;for(var h in i.needs){var l=i.needs[h];a||0==l.filled&&(l.filled=!0,a=!0)}var u=i.kidX,c=1e3;i.deliverable=o,On.BringToTop(o),mn.PlayAudioFile(Phaser.Utils.Array.GetRandom(["ice_cream_scoop_multi_1"])),CmdTweenPositionTo(o,{x:u,y:c,duration:50}),0==r?Lr.step():Z.QueueDelayedFunction(GetGUID(),r,(function(){vr.GameplayLoop.isRunning()&&Lr.step()}))},Mr=function MergeIceCream(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;for(var o in On.BringToTop(t),On.BringToTop(i),KillMergeTutorial(),Tr.activeSlots){var a=Tr.activeSlots[o];a.ownedIceCream&&a.ownedIceCream.id==i.id&&(a.ownedIceCream=null)}Lr.step(),t.data.icetruck.level+=i.data.icetruck.level,t.data.icetruck.level>3&&(t.data.icetruck.level=3),CmdTweenPositionTo(i,{x:On.GetDisplayed(t).x,y:On.GetDisplayed(t).y,duration:r,onComplete:function onComplete(){mn.PlayAudioFile(Phaser.Utils.Array.GetRandom(["ice_cream_scoop_multi_2"])),CmdTweenScalePingBounceFrom(t,.9),CmdActorDispose(i),t.isDestroyed||(2==t.data.icetruck.level||3==t.data.icetruck.level)&&On.SetTexture(t,t.data.icetruck.type+"-"+t.data.icetruck.level)}})},_r=function GetMakeDeliverableSolutions(){for(var t=[],i=0;i<Tr.clients.length;i++){var r=Tr.clients[i];for(var o in r.needs){var a=r.needs[o];if(!a.filled)for(var h in Tr.activeSlots){var l=Tr.activeSlots[h];a.type==l.ownedIceCream.data.icetruck.type&&t.push({need:a,slot:l,client:r})}}}return t},Rr=function GetDeliverSolutions(){for(var t=0;t<Tr.clients.length;t++)Tr.clients[t];return[]},Pr=function GetMergeSolutions(){for(var t=[],i=0;i<Tr.activeSlots.length;i++)for(var r=Tr.activeSlots[i],o=i+1;o<Tr.activeSlots.length;o++){var a=Tr.activeSlots[o];r.ownedIceCream&&a.ownedIceCream&&r.ownedIceCream.data.icetruck.type==a.ownedIceCream.data.icetruck.type&&r.ownedIceCream.data.icetruck.level<3&&r.ownedIceCream.data.icetruck.level<3&&t.push({first:r.ownedIceCream,second:a.ownedIceCream})}return t};var kr=function GenerateIceCreamsAtEmptySlots(){if(Tr.movesLeft<=0)return!1;var t=null,i=!1;for(var r in Tr.activeSlots){var o=Tr.activeSlots[r];if(!o.ownedIceCream){var a=Phaser.Utils.Array.GetRandom(mr);gr.needMergeTutorial&&1==Tr.timesFilled&&(null==t&&(t=a),a=t),o.ownedIceCream=dr.IceCreamBall(vr.GameplayLoop.name,a+"-1"),o.ownedIceCream.data.icetruck={type:a,level:1},Fn.EnableDrag(o.ownedIceCream,{up:{key:"DragEndIceCreamBall"},down:{key:"DragStartIceCreamBall"}}),Fn.ResizeInputAreaAsRectangle(o.ownedIceCream,88,90,-10,-20),i=!0,CmdTweenScalePingBounceFromZero(o.ownedIceCream,{delay:Phaser.Math.Between(100,150),duration:Phaser.Math.Between(250,350)}),CmdRepositionActorToActor(o.ownedIceCream,o.actor)}}return i};function KillTutorial(){var t=Q.GetEntityByAlias("TutorialHowToPlayHand");t&&Z.QueueActorToDisposeBuffer(t)}function KillMergeTutorial(){var t=Q.GetEntityByAlias("TutorialHowToMergeHand");t&&Z.QueueActorToDisposeBuffer(t)}function RemoveKidFor(t){if(null!=t.kid){var i=t.kid;if(CmdTweenPositionTo(i,{y:1400,onComplete:function onComplete(){CmdActorDispose(i)}}),t.deliverable){var r=t.deliverable;CmdTweenPositionTo(r,{y:950,duration:200,onComplete:function onComplete(){CmdActorDispose(r)}})}if(t.wafelek){var o=t.wafelek;CmdTweenPositionTo(o,{y:1e3,duration:200,onComplete:function onComplete(){CmdActorDispose(o)}})}if(t.dymek){var a=t.dymek;CmdTweenAlphaTo(a,{alpha:.1,duration:200,onComplete:function onComplete(){CmdActorDispose(a)}})}if(t.dymekWafelek){var h=t.dymekWafelek;CmdTweenAlphaTo(h,{alpha:.1,duration:200,onComplete:function onComplete(){CmdActorDispose(h)}})}if(t.dymekIceCream){var l=t.dymekIceCream;CmdTweenAlphaTo(l,{alpha:.1,duration:200,onComplete:function onComplete(){CmdActorDispose(l)}})}t.kid=null,t.deliverable=null,t.dymek=null,t.dymekIceCream=null,t.needs=[]}}var Or=function(){function GameplayController(){_classCallCheck(this,GameplayController),_defineProperty(this,"_randomizeKid",(function(t){var i=Phaser.Utils.Array.GetRandom(["white","white"]),r=On.SpineListAttachmentsBySlots(t);for(var o in r){var a=r[o],h=[];for(var l in a){var u=a[l];Voca.countSubstrings(u,"type=")>0?Voca.countSubstrings(u,i)>0&&h.push(u):h.push(u)}var c=Phaser.Utils.Array.GetRandom(h);On.SpineSetAttachment(t,o,c)}}))}return _createClass(GameplayController,[{key:"_showKid",value:function _showKid(t){t.wafelek=dr.Wafelek(vr.GameplayLevel),On.GetDisplayed(t.wafelek).x=t.kidX-2,On.GetDisplayed(t.wafelek).y=1055,CmdTweenScalePingBounceFromZero(t.wafelek),t.dymek=dr.Dymek(vr.GameplayLevel),On.GetDisplayed(t.dymek).x=t.kidX+70,On.GetDisplayed(t.dymek).y=750,t.dymekWafelek=dr.Wafelek(vr.GameplayLevel,20),On.GetDisplayed(t.dymekWafelek).x=On.GetDisplayed(t.dymek).x,On.GetDisplayed(t.dymekWafelek).y=On.GetDisplayed(t.dymek).y,CmdTweenScalePingBounceFromZero(t.dymekWafelek),t.dymekIceCream=dr.IceCreamBall(vr.GameplayLevel,t.needs[0].type+"-"+t.needs[0].level),On.GetDisplayed(t.dymekIceCream).x=On.GetDisplayed(t.dymekWafelek).x,On.GetDisplayed(t.dymekIceCream).y=On.GetDisplayed(t.dymekWafelek).y-55,CmdTweenScalePingBounceFromZero(t.dymekIceCream);var i=function GenerateKid(t){var i=dr.Kid(vr.GameplayLevel);return On.GetDisplayed(i).x=t,On.GetDisplayed(i).y=1300,i}(t.kidX);t.kid=i,On.RandomizeAnimationTime(i),this._randomizeKid(i),CmdTweenPositionTo(i,{y:1050})}},{key:"_getNewNeeds",value:function _getNewNeeds(){var t=[];for(var i in Tr.activeSlots){var r=Tr.activeSlots[i];r.ownedIceCream&&t.push(r.ownedIceCream.data.icetruck.type)}if(null==yr.sawTutorial||0==yr.sawTutorial){yr.sawTutorial=!0;var o=dr.TutorialHowToPlayHand(vr.GameOver),a=Tr.activeSlots[0];t=[a.ownedIceCream.data.icetruck.type],CmdRepositionActorToActor(o,a.actor)}for(var h=1,l=!1,u=0;u<Tr.clients.length;u++){var c=Tr.clients[u];c.needs.length>0&&1==c.needs[0].level&&(l=!0)}for(var d=0;d<Tr.clients.length;d++){Tr.clients[d].needs.length>0&&l&&h++}gr.needMergeTutorial&&1==Tr.timesFilled&&(h=2,gr.needMergeTutorial=!1,function ShowMergeTutorial(){var t=Tr.activeSlots[0].actor;CmdRepositionActorToActor(dr.TutorialHowToMergeHand(vr.GameOver),t),function chainHtpTween(){var t=Q.GetEntityByAlias("TutorialHowToMergeHand");if(t){var i=Tr.activeSlots[1].actor,r=On.GetDisplayedAsImage(i),o=Tr.activeSlots[0].actor,a=On.GetDisplayedAsImage(o);CmdTweenPositionTo(t,{x:r.x,y:r.y,ease:"Linear",delay:850,duration:350,onComplete:function onComplete(){CmdTweenPositionTo(t,{x:a.x,y:a.y,ease:"Linear",delay:600,duration:400,onComplete:function onComplete(){On.SetAnimation(t,"Hold"),chainHtpTween()}})}})}}()}());var p=[];return p.push({filled:!1,type:Phaser.Utils.Array.GetRandom(t),level:h}),p}},{key:"step",value:function step(){var t=this,i=!1;Tr.activeSlots.length<=0&&(Ar(),i=!0);var r=!1;for(var o in Tr.clients){var a=Tr.clients[o],h=!0;for(var l in 0==a.needs.length&&(h=!1),a.needs){var u=a.needs[l];u.filled||(h=!1)}if(h){KillTutorial(),Tr.timesFilled+=1;var c=a.needs[0],d=!1,p=0;if(a.deliverable.data.icetruck.type==c.type&&(d=!0),a.deliverable.data.icetruck.level>=c.level&&(p=a.deliverable.data.icetruck.level-c.level+1),console.log("MATCHED: ",d," with happiness: ",p,a.deliverable.data.icetruck.level>=c.level),d){var g=3;p>=1?(2==c.level&&(g=9),3==c.level&&(g=27)):g=0;for(var v=function _loop(t){var i=dr.Coin(vr.GameplayGui.state);CmdRepositionTo(i,On.GetDisplayed(a.podstawka).x,On.GetDisplayed(a.podstawka).y),On.ReparentLayer(i,"gui_11",{layerDepth:10}),CmdTweenScalePingBounceFromZero(i);var r={x:30,duration:600,delay:100+25*t,ease:"Cubic.InOut"};r.targets=On.GetDisplayedAsImage(i),On.GetDisplayedAsImage(i).scene.tweens.add(r),delete r.x,r.y=30,r.ease="Linear",r.onComplete=function(){CmdTweenScaleTo(i,{scale:.1,duration:200,onComplete:function onComplete(){CmdActorDispose(i)}})},On.GetDisplayedAsImage(i).scene.tweens.add(r)},m=g;m>0;m--)v(m);g>0&&function(){var t=Phaser.Utils.Array.GetRandom(["collect_coin_1","collect_coin_2","collect_coin_3","collect_coin_4"]);Z.QueueDelayedFunction(GetGUID(),600,(function(){mn.PlayAudioFile(t)})),g>=9&&Z.QueueDelayedFunction(GetGUID(),900,(function(){mn.PlayAudioFile(t)})),g>=27&&Z.QueueDelayedFunction(GetGUID(),1200,(function(){mn.PlayAudioFile(t)}))}(),mn.PlayAudioFile(Phaser.Utils.Array.GetRandom(["kid_big_joy_1","kid_big_joy_2","kid_big_joy_3","kid_joy_1","kid_joy_2","kid_moderate_joy_1","kid_moderate_joy_2"])),AddToScore(g)}else;RemoveKidFor(a)}}if(Tr.movesLeft<=0){for(var y=!1,T=0;T<Tr.activeSlots.length;T++){var S=Tr.activeSlots[T];S.ownedIceCream&&(y=!0)}if(0==y){UpdateScoreVis(!0);for(var w=0;w<Tr.activeSlots.length;w++){var b=Tr.activeSlots[w];CmdTweenScaleTo(b.actor,{scale:0,ease:"Quad.InOut",duration:150,delay:Phaser.Math.Between(0,100)})}for(var C in Tr.clients){var A=Tr.clients[C];RemoveKidFor(A),CmdTweenScaleTo(A.podstawka,{scale:0,ease:"Quad.InOut",duration:150,delay:Phaser.Math.Between(0,100)})}Z.QueueDelayedFunction(null,0,(function(){return vr.CommandRequestGameOver.run()})),r=!0}}if(!r){Tr.activeSlots.length<4&&gr.unshackledGame&&0==i?(Ar(),Ar(),Ar()):0==i&&Ar();var E=kr();E&&(Tr.movesLeft-=200/70);var M=function GetPossibleClients(){var t=[];for(var i in Tr.clients){var r=Tr.clients[i];0==r.needs.length&&t.push(r)}return t},_=function StartClient(i){var r=[i];for(var o in r){var a=r[o];a.needs=t._getNewNeeds(),t._showKid(a)}},R=M();if(3==R.length){var P=Phaser.Utils.Array.GetRandom(R);_(P)}if(R=M(),Tr.timesFilled>=2&&R.length>0){var k=Phaser.Utils.Array.GetRandom(R);_(k),KillMergeTutorial()}if(R=M(),Tr.timesFilled>=5&&R.length>0){var O=Phaser.Utils.Array.GetRandom(R);_(O)}Cr.active||Cr.doStep()}}}]),GameplayController}(),Lr=new Or;function AddToScore(t){Tr.score+=t}function UpdateScoreVis(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Tr){for(var i=!1,r=0;r<Tr.activeSlots.length;r++){var o=Tr.activeSlots[r];o.ownedIceCream&&(i=!0)}if(0!=i||0!=t){var a=Q.GetBagActorsReferenceList("COINS");On.SetTextWithZeroPad(Q.GetEntityByAlias("GameplayScoreText"),Tr.score-a.length,6),t&&On.SetTextWithZeroPad(Q.GetEntityByAlias("GameplayScoreText"),Tr.score,6)}}}function IceTruckStartNormal(){pr=mn.GetSaveSlotReference(pr),Z.QueueDelayedFunction(null,0,(function(){return vr.CommandRequestCover.run()})),mn.PlayAudioFile("GameMusic",null,{loop:!0,volume:1.1})}vr.GameOver.onEnter=function(){if(fr.GameOver(vr.GameOver),pr.highscore<Tr.score){pr.highscore=Tr.score,mn.SaveGame();var t=dr.GameOverHighscoreIcon(vr.GameOver);CmdRepositionBySize(t,.5,.5),CmdRepositionByDelta(t,10,80),X.RunCommandAtTriggerKey(t,"postmake")}Cr=null,Tr=null},vr.GameplayGui.onEnter=function(){fr.GameplayGui(vr.GameplayGui),AddToScore(0),ir.SetUpdateFunc("icetruck",(function(){UpdateScoreVis(),function UpdateHealthProgressBar(){var t=Q.GetEntityByAlias("progressbar_health_scaled"),i=Q.GetEntityByAlias("progressbar_extra_icon");if(t&&i&&Tr){var r=On.GetDisplayedAsImage(t),o=Tr.movesLeft/200;r.setScale(o,1),CmdRepositionTo(i,r.x+r.displayWidth-10,null)}}()}))},vr.GameplayLoop.onEnter=function(){mn.SetGameplayCameraOffset(0,550),fr.GameplayLoop(vr.GameplayLoop)},vr.GameplayLevel.onEnter=function(){Tr=new xr,Lr=new Or;var t=ar.ResizeAsNew([],4,3);Tr.levelGrid=t,ar.ForEachCoordinateInGridCallFunc(t,(function(i,r,o){var a=125*r-200,h=1210+130*o,l=dr.BoardTileSlot(vr.GameplayLevel.name);CmdRepositionTo(l,a,h);var u=new wr(l,r,o);ar.SetAt(t,r,o,u)}));var i=ar.ImmutableConvertToSingleArray(t);for(var r in i){var o=i[r];On.GetDisplayedAsImage(o.actor).setVisible(!1)}for(var a in Tr.inactiveSlots=i,Tr.clients.push(new Sr(-190)),Tr.clients.push(new Sr(0)),Tr.clients.push(new Sr(190)),Tr.clients){var h=Tr.clients[a];h.podstawka=dr.Podstawka(vr.GameplayLevel.name),On.GetDisplayed(h.podstawka).x=h.kidX,On.GetDisplayed(h.podstawka).y=1080}Cr=new br(!1),Lr.step(),Z.QueueDelayedFunction(GetGUID(),200,(function(){vr.GameplayLoop.isRunning()&&Cr.doStep()}))};var Dr="IcetruckManifest",Ir="#EAE7B2";var Fr=function(){function EventTargetPolyfill(){_classCallCheck(this,EventTargetPolyfill),this.listeners={}}return _createClass(EventTargetPolyfill,[{key:"addEventListener",value:function addEventListener(t,i){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(i)}},{key:"removeEventListener",value:function removeEventListener(t,i){if(t in this.listeners)for(var r=this.listeners[t],o=0,a=r.length;o<a;o++)if(r[o]===i)return void r.splice(o,1)}},{key:"dispatchEvent",value:function dispatchEvent(t){if(!(t.type in this.listeners))return!0;for(var i=this.listeners[t.type].slice(),r=0,o=i.length;r<o;r++)i[r].call(this,t);return!t.defaultPrevented}}]),EventTargetPolyfill}();!function ____FPatchFixObjectAssign(){"function"!=typeof Object.assign&&(console.log("PolyfillPatch: Object.Assign"),Object.defineProperty(Object,"assign",{value:function assign(t,i){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),o=1;o<arguments.length;o++){var a=arguments[o];if(null!=a)for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&(r[h]=a[h])}return r},writable:!0,configurable:!0}))}(),function ____FPatchFixEventTargetForIE(){window.EventTarget||(console.log("PolyfillPatch: EventTarget"),window.EventTarget=Fr)}(),function ____FPatchFixObjectEntries(){Object.entries||console.log("PolyfillPatch: Object.Entries"),Object.entries=function(t){for(var i=Object.keys(t),r=i.length,o=new Array(r);r--;)o[r]=[i[r],t[i[r]]];return o}}(),function ____PolyfixObjectValues(){Object.values||(console.log("PolyfillPatch: Object.Values"),Object.values=function(t){return Object.keys(t).map((function(i){return t[i]}))})}(),function ____PolyfixFunctionName(){var t=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^\(\s\/]*)\s*/;function _name(){var i,r;return this===Function||this===Function.prototype.constructor?r="Function":this!==Function.prototype&&(r=(i=(""+this).match(t))&&i[1]),r||""}var i=!("name"in Function.prototype&&"name"in function x(){}),r="function"==typeof Object.defineProperty&&function(){var t;try{Object.defineProperty(Function.prototype,"_xyz",{get:function get(){return"blah"},configurable:!0}),t="blah"===Function.prototype._xyz,delete Function.prototype._xyz}catch(i){t=!1}return t}(),o="function"==typeof Object.prototype.__defineGetter__&&function(){var t;try{Function.prototype.__defineGetter__("_abc",(function(){return"foo"})),t="foo"===Function.prototype._abc,delete Function.prototype._abc}catch(i){t=!1}return t}();Function.prototype._name=_name,i&&(console.log("PolyfixPatch: Function.name"),r?Object.defineProperty(Function.prototype,"name",{get:function get(){var t=_name.call(this);return this!==Function.prototype&&Object.defineProperty(this,"name",{value:t,configurable:!0}),t},configurable:!0}):o&&Function.prototype.__defineGetter__("name",(function(){var t=_name.call(this);return this!==Function.prototype&&this.__defineGetter__("name",(function(){return t})),t})))}();var Br=function(t){_inherits(BlackmoonReleaseBranding,t);var i=_createSuper(BlackmoonReleaseBranding);function BlackmoonReleaseBranding(){return _classCallCheck(this,BlackmoonReleaseBranding),i.apply(this,arguments)}return _createClass(BlackmoonReleaseBranding,[{key:"getFlags",value:function getFlags(){return{disableSaveUserPrefs:0,disableSaveGameData:0,disableFakeMusicPreload:0,cordovaListenersEnabled:0,disableAutoPause:0,allowPauseAlways:0}}}]),BlackmoonReleaseBranding}(vn);vn.SetSingleton(new Br),function InitIcetruckGame(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new gn;r.data.flagOverrides=t,r.data.gameName="IceTruck",r.data.gameSubEngineConfig=E({dom:{createContainer:!0},title:"Ice Truck",type:Phaser.AUTO,parent:"game",backgroundColor:Ir,scale:{width:640,height:1050,min:{width:135,height:240},max:{width:4320,height:7680},mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},physics:{default:"arcade",arcade:{debug:!0}}},i),r.data.requiredScreenOrientation="portrait",GetOs().desktop&&(r.data.requiredScreenOrientation="any"),r.data.preloaderInitialsAssetsNames={manifestJson:Dr,logo:"PreloaderLogo",font:"PreloaderFontObelix_63"},r.data.initialAssetPackData=pn.GetRequestAsJsonFromArray([{path:"json",type:"json",files:[Dr]},{path:"preloader",type:"png",files:["PreloaderLogo","EmptyPNG"]},{path:"preloader",type:"font",files:["PreloaderFontObelix_63"]}]),r.data.funcDoGameRegisters=function(){var t=new O;D.SetEngine(t);var i=t.createWorld();D.SetWorld(i),t.registerComponent(c),t.registerComponent(it,"data"),t.registerComponent(Kn,"transform"),t.registerComponent(Ln,"visual"),t.registerComponent(V),t.registerComponent(Hn),t.registerComponent(tt),t.registerComponent(Yn),t.registerComponent(Bn),t.registerComponent(Xn),Jn.RegisterQuery(),fn.RegisterRoutine($n),fn.RegisterRoutine(qn),fn.RegisterRoutine(ir),fn.RegisterRoutine(Z)},r.data.funcStartGame=IceTruckStartNormal,UsePhaserSubEngine(r)}(vn.GetSingleton().getFlags(),{})}}}))}();
