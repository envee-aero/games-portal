parcelRequire=function(e){var r="function"==typeof parcelRequire&&parcelRequire,n="function"==typeof require&&require,i={};function u(e,u){if(e in i)return i[e];var t="function"==typeof parcelRequire&&parcelRequire;if(!u&&t)return t(e,!0);if(r)return r(e,!0);if(n&&"string"==typeof e)return n(e);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}return u.register=function(e,r){i[e]=r},i=e(u),u.modules=i,u}(function (require) {function _a(a){return a&&a.__esModule?{d:a.default}:{d:a}}var Xb=this;function tm(e){return(tm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function um(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yg(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function vm(e,t,r){return t&&yg(e.prototype,t),r&&yg(e,r),e}function wm(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xm(e,t)}function xm(e,t){return(xm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ym(e){var t=Bm();return function(){var r,i=zg(e);if(t){var n=zg(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return zm(this,r)}}function zm(e,t){return!t||"object"!==tm(t)&&"function"!=typeof t?Am(e):t}function Am(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bm(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function zg(e){return(zg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cm(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function Ag(e,a){for(var n=0;n<a.length;n++){var r=a[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dm(e,a,n){return a&&Ag(e.prototype,a),n&&Ag(e,n),e}var Em=null,Wa=function(){function e(){Cm(this,e)}return Dm(e,[{key:"onEnterCoverFirstTime",value:function(){console.warn("GameFlowManager: implement")}},{key:"onEnterGameOverFirstTime",value:function(){console.warn("GameFlowManager: implement")}},{key:"onEnterGameplayFirstTime",value:function(){console.warn("GameFlowManager: implement")}},{key:"onEnterCoverEverytime",value:function(){console.warn("GameFlowManager: implement")}},{key:"onEnterGameplayEverytime",value:function(e){console.warn("GameFlowManager: implement")}},{key:"onEnterGameOverEverytime",value:function(){console.warn("GameFlowManager: implement")}},{key:"onUpdateGameplayPlaytime",value:function(e){}},{key:"onUpdateGamePlaytime",value:function(e){}},{key:"onGameplayFinished",value:function(){console.warn("GameFlowManager: implement")}},{key:"onCustomInfo",value:function(e,a){}}],[{key:"SetFlowManager",value:function(e){Em=e}},{key:"GetFlowManager",value:function(){return Em}}]),e}();function Fm(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}function Bg(o,e){for(var m=0;m<e.length;m++){var t=e[m];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(o,t.key,t)}}function Gm(o,e,m){return e&&Bg(o.prototype,e),m&&Bg(o,m),o}function Hm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cg(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Im(e,t,a){return t&&Cg(e.prototype,t),a&&Cg(e,a),e}function Jm(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function Dg(e,a){for(var n=0;n<a.length;n++){var s=a[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Km(e,a,n){return a&&Dg(e.prototype,a),n&&Dg(e,n),e}function Lm(t){return(Lm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Eg(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Nm(t,e,r){return e&&Eg(t.prototype,e),r&&Eg(t,r),t}function Fg(t,e,r){return(Fg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var o=Om(t,e);if(o){var a=Object.getOwnPropertyDescriptor(o,e);return a.get?a.get.call(r):a.value}})(t,e,r||t)}function Om(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Bc(t)););return t}function Pm(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qm(t,e)}function Qm(t,e){return(Qm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Rm(t){var e=Um();return function(){var r,o=Bc(t);if(e){var a=Bc(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return Sm(this,r)}}function Sm(t,e){return!e||"object"!==Lm(e)&&"function"!=typeof e?Tm(t):e}function Tm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Um(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function Bc(t){return(Bc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gg(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function Wm(t,e,n){return e&&Gg(t.prototype,e),n&&Gg(t,n),t}var Cc={setEventEmitter:function(t,e){return void 0===e&&(e=Phaser.Events.EventEmitter),this._privateEE=void 0===t,this._eventEmitter=this._privateEE?new e:t,this},destroyEventEmitter:function(){return this._eventEmitter&&this._privateEE&&this._eventEmitter.shutdown(),this},getEventEmitter:function(){return this._eventEmitter},on:function(){return this._eventEmitter&&this._eventEmitter.on.apply(this._eventEmitter,arguments),this},once:function(){return this._eventEmitter&&this._eventEmitter.once.apply(this._eventEmitter,arguments),this},off:function(){return this._eventEmitter&&this._eventEmitter.off.apply(this._eventEmitter,arguments),this},emit:function(t){return this._eventEmitter&&t&&this._eventEmitter.emit.apply(this._eventEmitter,arguments),this},addListener:function(){return this._eventEmitter&&this._eventEmitter.addListener.apply(this._eventEmitter,arguments),this},removeListener:function(){return this._eventEmitter&&this._eventEmitter.removeListener.apply(this._eventEmitter,arguments),this},removeAllListeners:function(){return this._eventEmitter&&this._eventEmitter.removeAllListeners.apply(this._eventEmitter,arguments),this},listenerCount:function(){return this._eventEmitter?this._eventEmitter.listenerCount.apply(this._eventEmitter,arguments):0},listeners:function(){return this._eventEmitter?this._eventEmitter.listeners.apply(this._eventEmitter,arguments):[]}};var Xm=Phaser.Scene,Dc=function(e){return e instanceof Xm};var ed=function(e){return Dc(e)?e:e.scene&&Dc(e.scene)?e.scene:e.parent&&e.parent.scene&&Dc(e.parent.scene)?e.parent.scene:void 0};var Ym=Phaser.GameObjects.GameObject,Ec=function(e){return e instanceof Ym};var Zm=Phaser.Utils.Objects.GetValue,Hg=function(){function t(e,n){Vm(this,t),this.parent=e,this.scene=ed(e);var s=Zm(n,"eventEmitter",!1);!0===s&&(s=void 0),this.setEventEmitter(s),this.boot()}return Wm(t,[{key:"boot",value:function(){Ec(this.parent)?this.parent.once&&this.parent.on("destroy",this.destroy,this):Dc(this.parent)&&this.parent.events.once("shutdown",this.destroy,this)}},{key:"shutdown",value:function(){return this.stop(),Dc(this.parent)&&this.parent.events.off("shutdown",this.destroy,this),this.destroyEventEmitter(),this.parent=void 0,this.scene=void 0,this}},{key:"destroy",value:function(){return this.shutdown(),this}},{key:"start",value:function(t){return this.isRunning?this:(this.tween=this.scene.tweens.add(t).on("complete",this.complete,this),!1===this.getEventEmitter()&&this.setEventEmitter(this.tween),this)}},{key:"restart",value:function(){return this.stop().start(),this}},{key:"stop",value:function(){return this.tween?(this.getEventEmitter()===this.tween&&this.setEventEmitter(!1),this.tween.remove(),this.tween=void 0,this):this}},{key:"complete",value:function(){return this.stop(),this.getEventEmitter()&&this.emit("complete"),this}},{key:"isRunning",get:function(){return!!this.tween}}]),t}();Object.assign(Hg.prototype,Cc);var Ig=Phaser.Utils.Objects.GetValue,jb=Phaser.Utils.Objects.GetAdvancedValue,Fc=function(t){Pm(r,Hg);var e=Rm(r);function r(t,o){var a;return Mm(this,r),(a=e.call(this,t)).gameObject=t,a.resetFromJSON(o),a}return Nm(r,[{key:"resetFromJSON",value:function(t){if(this.setMode(Ig(t,"mode",0)),t&&(t.hasOwnProperty("x")||t.hasOwnProperty("y"))){var e=jb(t,"x",void 0),r=jb(t,"y",void 0);this.setTargetPosition(e,r)}else this.setTargetPosition(t);return this.setDelay(jb(t,"delay",0)),this.setDuration(jb(t,"duration",1e3)),this.setEase(Ig(t,"ease",void 0)),this}},{key:"toJSON",value:function(){return{mode:this.mode,startX:this.startX,startY:this.startY,endX:this.endX,endY:this.endY,delay:this.delay,duration:this.duration}}},{key:"setMode",value:function(t){return"string"==typeof t&&(t=$m[t]),this.mode=t,this}},{key:"setTargetPosition",value:function(t,e){if("number"==typeof t||"number"==typeof e)this.startX=this.gameObject.x,this.startY=this.gameObject.y,this.endX=t,this.endY=e;else{var r=t;this.startX=jb(r,"startX",void 0),this.startY=jb(r,"startY",void 0),this.endX=jb(r,"endX",void 0),this.endY=jb(r,"endY",void 0)}return this}},{key:"setDelay",value:function(t){return this.delay=t,this}},{key:"setDuration",value:function(t){return this.duration=t,this}},{key:"setEase",value:function(t){return void 0===t&&(t="Linear"),this.ease=t,this}},{key:"start",value:function(){if(this.isRunning)return this;var t={targets:this.gameObject,delay:this.delay,duration:this.duration,ease:this.ease,yoyo:2==this.mode,repeat:2==this.mode?-1:0};return void 0!==this.startX&&void 0!==this.endX&&(t.x={start:this.startX,to:this.endX}),void 0!==this.startY&&void 0!==this.endY&&(t.y={start:this.startY,to:this.endY}),Fg(Bc(r.prototype),"start",this).call(this,t),this}},{key:"complete",value:function(){return Fg(Bc(r.prototype),"complete",this).call(this),1===this.mode&&this.gameObject.destroy(),this}}]),r}(),$m={stop:0,destroy:1,yoyo:2};var fd=function(e,o,r,t,$,a,s){a instanceof Fc&&(s=a,a=void 0),void 0===a&&(a=!1);var v={};return v.mode=a?1:0,void 0!==r&&(v.startX=e.x,v.endX=gd(r,e.x)),void 0!==t&&(v.startY=e.y,v.endY=gd(t,e.y)),v.duration=o,v.ease=void 0===$?"Linear":$,void 0===s?s=new Fc(e,v):s.resetFromJSON(v),s.restart(),s},_m=function(e,o,r,t,$,a){return fd(e,o,r,t,$,!0,a)},Jg=function(e,o,r,t,$,a,s){a instanceof Fc&&(s=a,a=void 0),void 0===a&&(a=!1);var v={};return v.mode=a?1:0,void 0!==r&&(v.startX=gd(r,e.x),v.endX=e.x),void 0!==t&&(v.startY=gd(t,e.y),v.endY=e.y),v.duration=o,v.ease=void 0===$?"Linear":$,void 0===s?s=new Fc(e,v):s.resetFromJSON(v),s.restart(),s},an=function(e,o,r,t,$,a){return Jg(e,o,r,t,$,!0,a)},gd=function(e,o){if("number"==typeof e)return e;var r=e[0],t=parseFloat(e.substr(2));switch(r){case"+":return o+t;case"-":return o-t;case"*":return o*t;case"/":return o/t;}};var Yb=function(){function e(){Jm(this,e)}return Km(e,null,[{key:"InjectIntoActor",value:function(a){a.vals.rexEaseMove={},a.vals.rexEaseMove.axisX=null,a.vals.rexEaseMove.axisY=null,a.vals.components[e.Name]=!0}},{key:"Bake",value:function(e){}},{key:"PostBake",value:function(e){}},{key:"MoveOnHorizontalWithSpeedPerSecond",value:function(e,a,n){e.vals.rexEaseMove.axisX&&e.vals.rexEaseMove.axisX.stop();var s=Phaser.Math.Distance.Between(a,0,e.displayed.x,0)/n*1e3;e.vals.rexEaseMove.axisX=fd(e.displayed,s,a,void 0,"Quad.easeInOut")}},{key:"IsTweeningOnHorizontal",value:function(e){return!!e.vals.rexEaseMove.axisX&&e.vals.rexEaseMove.axisX.isRunning}},{key:"MoveOnVerticalWithSpeedPerSecond",value:function(e,a,n){e.vals.rexEaseMove.axisY&&e.vals.rexEaseMove.axisY.stop();var s=Phaser.Math.Distance.Between(0,a,0,e.displayed.y)/n*1e3;e.displayed.y>a&&(s*=1.5),e.vals.rexEaseMove.axisY=fd(e.displayed,s,void 0,a,"Quad.easeInOut")}},{key:"IsTweeningOnVertical",value:function(e){return!!e.vals.rexEaseMove.axisY&&e.vals.rexEaseMove.axisY.isRunning}},{key:"Cleanup",value:function(e){}},{key:"Name",get:function(){return"RexEaseMovePlugin"}}]),e}();function bn(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Kg(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function cn(e,r,t){return r&&Kg(e.prototype,r),t&&Kg(e,t),e}var Ha=function(){function e(){bn(this,e)}return cn(e,null,[{key:"CreateTriggerIfNotExisting",value:function(e,r){e.vals.actions.triggerOn[r]||(e.vals.actions.triggerOn[r]=[])}},{key:"GenericSetFromData",value:function(e,r,t){for(var a=0;a<t.triggerList.length;a++)for(var n=t.triggerList[a],i=0;i<r.vals.actions.triggerOn[n.trigger].length;i++){var o=r.vals.actions.triggerOn[n.trigger][i];if(o.name==e)for(var s in n.properties)o.data[s]=n.properties[s]}}}]),e}();var Lg=function(){function e(){Hm(this,e)}return Im(e,null,[{key:"InjectIntoActor",value:function(t,a,n,o,i,r,c){Ha.CreateTriggerIfNotExisting(t,a);var l={};l.targetListY=n,l.verticalSpeed=o,l.verticalListIndex=0,l.targetListX=i,l.horizontalSpeed=r,l.horizontalListIndex=0,t.vals.actions.triggerOn[a].push({name:e.Name,data:l}),c&&c.randomizeIndex_X&&(l.horizontalListIndex=Phaser.Math.Between(0,l.targetListX.length)),t.vals.actions.dict[e.Name]=!0}},{key:"OnAct",value:function(e,t,a){Yb.IsTweeningOnVertical(e)||(Yb.MoveOnVerticalWithSpeedPerSecond(e,t.data.targetListY[t.data.verticalListIndex],t.data.verticalSpeed),t.data.verticalListIndex+=1,t.data.verticalListIndex>=t.data.targetListY.length&&(t.data.verticalListIndex=0)),Yb.IsTweeningOnHorizontal(e)||(Yb.MoveOnHorizontalWithSpeedPerSecond(e,t.data.targetListX[t.data.horizontalListIndex],t.data.horizontalSpeed),t.data.horizontalListIndex+=1,t.data.horizontalListIndex>=t.data.targetListX.length&&(t.data.horizontalListIndex=0))}},{key:"Name",get:function(){return"StayAtTopMovement"}}]),e}();function dn(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Mg(e,n){for(var a=0;a<n.length;a++){var r=n[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function en(e,n,a){return n&&Mg(e.prototype,n),a&&Mg(e,a),e}var $d="ACT_ANIMATION_COMPLETED";var _d=function(){function e(){dn(this,e)}return en(e,null,[{key:"InjectIntoActor",value:function(n,a){Ha.CreateTriggerIfNotExisting(n,$d),n.vals.actions.triggerOn[$d].push({name:e.Name,data:a}),n.vals.actions.dict[e.Name]=!0}},{key:"OnAct",value:function(e,n,a){n.data[a.animationName]&&e.triggerActions(n.data[a.animationName])}},{key:"Name",get:function(){return"CallTriggerOnAnimationDone"}}]),e}();function fn(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function Ng(n,a){for(var e=0;e<a.length;e++){var i=a[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function gn(n,a,e){return a&&Ng(n.prototype,a),e&&Ng(n,e),n}function hn(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Og(a,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,t.key,t)}}function jn(a,e,n){return e&&Og(a.prototype,e),n&&Og(a,n),a}function kn(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}function Pg(n,a){for(var e=0;e<a.length;e++){var i=a[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function ln(n,a,e){return a&&Pg(n.prototype,a),e&&Pg(n,e),n}function mn(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function Qg(e,a){for(var l=0;l<a.length;l++){var s=a[l];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function nn(e,a,l){return a&&Qg(e.prototype,a),l&&Qg(e,l),e}var Ca;function Da($,_,r){return _ in $?Object.defineProperty($,_,{value:r,enumerable:!0,configurable:!0,writable:!0}):$[_]=r,$}var Gc="LAYER_NAME_GAMEPLAY_ELEMS";var on="LAYER_NAME_GUI";var db="LAYER_NAME_TOP_GUI";var Rg="LAYER_NAME_FADE_SCREEN";var Sg="LAYER_NAME_PAUSE_SCREEN";var af="LAYER_NAME_ROTATION_SCREEN";var pn=100;var qn="LAYER_GAMEPLAY_11";var kb="LAYER_GAMEPLAY_21";var rn="LAYER_GAMEPLAY_22";var hd="LAYER_GAMEPLAY_23";var Cb="LAYER_TOP_GUI_11";var sn="LAYER_TOP_GUI_12";var tn="LAYER_TOP_GUI_13";var bf="LAYER_TOP_GUI_21";var La="LAYER_TOP_GUI_22";var Tg="LAYER_TOP_GUI_23";var id="LAYER_TOP_GUI_31";var un="LAYER_TOP_GUI_32";var vn="LAYER_TOP_GUI_33";var Ug="LAYER_ROTATION_SCREEN_11";var Vg="LAYER_ROTATION_SCREEN_22";var Wg="LAYER_FADE_SCREEN_22";var jd="LAYER_PAUSE_SCREEN_22";var cf=(Da(Ca={},qn,{layerName:Gc,anchorAxisX:1,anchorAxisY:1,workaroundDepth:1e5}),Da(Ca,kb,{layerName:Gc,anchorAxisX:2,anchorAxisY:1,workaroundDepth:1e5}),Da(Ca,rn,{layerName:Gc,anchorAxisX:2,anchorAxisY:2,workaroundDepth:1e5}),Da(Ca,hd,{layerName:Gc,anchorAxisX:2,anchorAxisY:3,workaroundDepth:1e5}),Da(Ca,Cb,{layerName:db,anchorAxisX:1,anchorAxisY:1,workaroundDepth:2e5}),Da(Ca,sn,{layerName:db,anchorAxisX:1,anchorAxisY:2,workaroundDepth:2e5}),Da(Ca,tn,{layerName:db,anchorAxisX:1,anchorAxisY:3,workaroundDepth:2e5}),Da(Ca,bf,{layerName:db,anchorAxisX:2,anchorAxisY:1,workaroundDepth:2e5}),Da(Ca,La,{layerName:db,anchorAxisX:2,anchorAxisY:2,workaroundDepth:2e5}),Da(Ca,Tg,{layerName:db,anchorAxisX:2,anchorAxisY:3,workaroundDepth:2e5}),Da(Ca,id,{layerName:db,anchorAxisX:3,anchorAxisY:1,workaroundDepth:2e5}),Da(Ca,un,{layerName:db,anchorAxisX:3,anchorAxisY:2,workaroundDepth:2e5}),Da(Ca,vn,{layerName:db,anchorAxisX:3,anchorAxisY:3,workaroundDepth:2e5}),Da(Ca,Wg,{layerName:Rg,anchorAxisX:2,anchorAxisY:2,workaroundDepth:3e5}),Da(Ca,jd,{layerName:Sg,anchorAxisX:2,anchorAxisY:2,workaroundDepth:4e5}),Da(Ca,Ug,{layerName:af,anchorAxisX:1,anchorAxisY:1,workaroundDepth:5e5}),Da(Ca,Vg,{layerName:af,anchorAxisX:2,anchorAxisY:2,workaroundDepth:5e5}),Ca);function Xg(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function Yg(e,a){for(var t=0;t<a.length;t++){var r=a[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zg(e,a,t){return a&&Yg(e.prototype,a),t&&Yg(e,t),e}var oa={NeedLandscape:"NeedLandscape",NeedPortrait:"NeedPortrait",RotateBG:"RotateBG",DebugHelper_1:"DebugHelper_1",ZaslonkaFade:"ZaslonkaFade",BG:"BG",BMLogo:"BMLogo",Btn_Continue:"Btn_Continue",Btn_Pause:"Btn_Pause",Btn_Play:"Btn_Play",Btn_SoundOff:"Btn_SoundOff",Btn_SoundOn:"Btn_SoundOn",GameTitle:"GameTitle",HighscoreBigIcon:"HighscoreBigIcon",HighscoreIcon:"HighscoreIcon",ScoreIcon:"ScoreIcon",PauseCurtain:"PauseCurtain",PauseIcon:"PauseIcon",GameOverIcon:"GameOverIcon",Zarowa:"Zarowa",ScorePanel:"ScorePanel",TryAgain:"TryAgain",Rewards_CloseBtn:"Rewards_CloseBtn",Rewards_Panel:"Rewards_Panel",Rewards_PlayAd_Button:"Rewards_PlayAd_Button",Rewards_WhatYouGet:"Rewards_WhatYouGet"};function wn(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function $g(n,e){for(var a=0;a<e.length;a++){var l=e[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(n,l.key,l)}}function xn(n,e,a){return e&&$g(n.prototype,e),a&&$g(n,a),n}var Zb="cAlias",df="AliasComponent",Ia=function(){function n(){wn(this,n)}return xn(n,null,[{key:"InjectIntoActor",value:function(n,e){n.vals[Zb]={},n.vals[Zb].alias=e,n.vals[Zb].enabled=!0,n.vals.components[df]=!0}},{key:"GetAlias",value:function(n){return n.vals[Zb].alias}},{key:"Bake",value:function(n){}},{key:"PostBake",value:function(n){}},{key:"Cleanup",value:function(n){}},{key:"Has",value:function(n){return 1==n.vals.components[df]}},{key:"SetEnabled",value:function(n,e){n.vals[Zb].enabled=e}},{key:"IsEnabled",value:function(n){return n.vals[Zb].enabled}},{key:"Name",get:function(){return df}}]),n}();function yn(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function _g(e,a){for(var t=0;t<a.length;t++){var r=a[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zn(e,a,t){return a&&_g(e.prototype,a),t&&_g(e,t),e}function ah(t,a){for(var e=0;e<a.length;e++){var i=a[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function bh(t,a,e){return a&&ah(t.prototype,a),e&&ah(t,e),t}function ef(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}var An=function t(){ef(this,t),this.bags={},this.entitiesByAliasDictionary={},this.entitiesByGUIDDictionary={}},pa=new An,a=function(){function t(){ef(this,t)}return bh(t,null,[{key:"DumpBag",value:function(t){console.log(pa.bags[t])}},{key:"DumpBags",value:function(){console.log(pa.bags)}},{key:"DumpBagLength",value:function(t){pa.bags[t]&&pa.bags[t].keys&&console.log("Bag:"+t+" length: "+pa.bags[t].keys.length)}},{key:"DumpAllActorsBagLength",value:function(){fa._MakeBagIfNotExisting("ALL"),console.log(pa.bags.ALL.keys.length)}}]),t}();var fa=function(){function t(){ef(this,t)}return bh(t,null,[{key:"AddActorToBags",value:function(a){Ia.Has(a)&&(pa.entitiesByAliasDictionary[Ia.GetAlias(a)]||(pa.entitiesByAliasDictionary[Ia.GetAlias(a)]=a));for(var e=0;e<a.vals.bags.length;e++)t._AddActorToBagAtKey(a,a.vals.bags[e]);t._AddActorToBagAtKey(a,"ALL")}},{key:"GetActorByAlias",value:function(t){return console.assert(pa.entitiesByAliasDictionary[t],"MoonEntity.GetActorByAlias failure: "+t),pa.entitiesByAliasDictionary[t]}},{key:"GetActorByAliasIfExists",value:function(t,a){return this.IsActorByAliasExisting(t)?this.GetActorByAlias(t):(a||console.warn("Entity with alias: ",t," doesn't seem to exist"),null)}},{key:"IsActorByAliasExisting",value:function(t){return!!pa.entitiesByAliasDictionary[t]}},{key:"IsActorByGuidExisting",value:function(t){return!!pa.entitiesByGUIDDictionary[t]}},{key:"GetActorByGUID",value:function(t){return console.assert(pa.entitiesByGUIDDictionary[t],"ActorBagsModel->GetActorByGUID:: no entity of guid: ",t),pa.entitiesByGUIDDictionary[t]}},{key:"DeleteActorInAllBags",value:function(a){var e=a.vals.guid;if(a.vals.bags.length<=0)console.assert(!1,"entity is not in any bags");else{for(var i=0;i<a.vals.bags.length;i++){var r=a.vals.bags[i];t._DeleteActorFromBag(a,r)}t._DeleteActorFromBag(a,"ALL"),Ia.Has(a)&&pa.entitiesByAliasDictionary[Ia.GetAlias(a)]&&delete pa.entitiesByAliasDictionary[Ia.GetAlias(a)],delete pa.entitiesByGUIDDictionary[e]}}},{key:"GetBagItemCount",value:function(t){return pa.bags[t]?(console.assert(pa.bags[t],"ActorBagsModel->GetBagItemCount:: no bag of alias: ",t," debug ActorBagsModel:",this),pa.bags[t].keys.length):0}},{key:"GetBagItemsList",value:function(a){return t._MakeBagIfNotExisting(a),pa.bags[a].itemsList}},{key:"PerformFunctionOnEachActorInBag",value:function(t,a){var e=pa.bags[t];if(console.assert(e,"ActorBagsModel::PerformFunctionOnEachActorInBag-> no bag for alias:",t),e)for(var i=0;i<e.keys.length;i++)a(e.itemsDictionary[e.keys[i]])}},{key:"TriggerActionOnAllActorsInBag",value:function(a,e){for(var i=t.GetBagItemsList(e),r=0;r<i.length;r++){i[r].triggerActions(a)}}},{key:"_MakeBagIfNotExisting",value:function(t){if(!pa.bags[t]){var a={itemsDictionary:{},keys:[],itemsList:[]};pa.bags[t]=a}}},{key:"_AddActorToBagAtKey",value:function(t,a){this._MakeBagIfNotExisting(a);var e=pa.bags[a];e.itemsDictionary[t.vals.guid]||(pa.entitiesByGUIDDictionary[t.vals.guid]=t,e.itemsDictionary[t.vals.guid]=t,e.keys.push(t.vals.guid),e.itemsList.push(t))}},{key:"_DeleteActorFromBag",value:function(t,a){var e=pa.bags[a];delete e.itemsDictionary[t.vals.guid],e.keys.indexOf(t.vals.guid)>-1&&e.keys.splice(e.keys.indexOf(t.vals.guid),1),e.itemsList.indexOf(t)>-1&&e.itemsList.splice(e.itemsList.indexOf(t),1)}}]),t}();function ch(t){return fa.GetActorByAlias(t)}function ff(t){return fa.GetActorByGUID(t)}var ga=function(){function e(){yn(this,e)}return zn(e,null,[{key:"_ActorHasBag",value:function(e,a){return e.vals.bags.indexOf(a)>-1}},{key:"InjectIntoActor",value:function(a,t){if(a.vals.bags||(a.vals.bags=[]),Array.isArray(t))for(var r=0;r<t.length;r++)e._ActorHasBag(a,t[r])||a.vals.bags.push(t[r]);else e._ActorHasBag(a,t)||a.vals.bags.push(t);a.baked&&fa.AddActorToBags(a),a.vals.components[e.Name]=!0}},{key:"Bake",value:function(e){}},{key:"PostBake",value:function(e){fa.AddActorToBags(e)}},{key:"Cleanup",value:function(e){}},{key:"Name",get:function(){return"BagComponent"}}]),e}();function Bn(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function dh(e,n){for(var a=0;a<n.length;a++){var r=n[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cn(e,n,a){return n&&dh(e.prototype,n),a&&dh(e,a),e}function Dn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eh(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function En(e,t,s){return t&&eh(e.prototype,t),s&&eh(e,s),e}function fh(r,n,$){var e=n&&$||0;"string"==typeof r&&(n="binary"==r?new Array(16):null,r=null);var o=(r=r||{}).random||(r.rng||gh)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,n)for(var t=0;t<16;++t)n[e+t]=o[t];return n||Fn(o)}var gh;var gf="undefined"!=typeof Xb&&(Xb.crypto||Xb.msCrypto);if(gf&&gf.getRandomValues){var hh=new Uint8Array(16);gh=function(){return gf.getRandomValues(hh),hh}}if(!gh){var ih=new Array(16);gh=function(){for(var $,r=0;r<16;r++)0==(3&r)&&($=4294967296*Math.random()),ih[r]=$>>>((3&r)<<3)&255;return ih}}for(var jh=[],kd=0;kd<256;++kd)jh[kd]=(kd+256).toString(16).substr(1);function Fn($,r){var u=r||0,t=jh;return t[$[u++]]+t[$[u++]]+t[$[u++]]+t[$[u++]]+"-"+t[$[u++]]+t[$[u++]]+"-"+t[$[u++]]+t[$[u++]]+"-"+t[$[u++]]+t[$[u++]]+"-"+t[$[u++]]+t[$[u++]]+t[$[u++]]+t[$[u++]]+t[$[u++]]+t[$[u++]]}var kh="ACT_DISPOSE";var lb="ACT_POST_BAKE";function Gn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lh(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function Hn(e,t,r){return t&&lh(e.prototype,t),r&&lh(e,r),e}function mh(e,i){for(var t=0;t<i.length;t++){var a=i[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function In(e,i,t){return i&&mh(e.prototype,i),t&&mh(e,t),e}function nh(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}var Jn=function e(){nh(this,e),this._entitiesToDisposeOfArray=[],this._delayed=[]},Ma=new Jn,qa=function(){function e(){nh(this,e)}return In(e,null,[{key:"IfEntityByAliasExistsThenDispose",value:function(i){fa.IsActorByAliasExisting(i)&&e.queueEntity(fa.GetActorByAlias(i))}},{key:"MassQueueDisposeEntities",value:function(i){fa.PerformFunctionOnEachActorInBag(i,function(i){e.queueEntity(i)})}},{key:"update",value:function(e,i){if(Ma._delayed.length>0)for(var t=Ma._delayed.length-1;t>=0;t--){var a=Ma._delayed[t];a.delay-=i,a.delay<=0&&(Ma._delayed.splice(Ma._delayed.indexOf(a),1),this.queueEntity(a.gameEntity))}if(Ma._entitiesToDisposeOfArray.length>0)for(var r=Ma._entitiesToDisposeOfArray.length-1;r>=0;r--){Ma._entitiesToDisposeOfArray[r].dispose()}Ma._entitiesToDisposeOfArray.length>0&&(Ma._entitiesToDisposeOfArray=[])}},{key:"queueEntity",value:function(e){if(console.assert(e,"MoonEngineEntityDisposeSystem::queueEntity-> param is: ",e),e)if(null!=e.refSelfGameEntity){if(1==e.refSelfGameEntity.disposed)return void console.warn("tried to dispose entity that is already disposed of.");Ma._entitiesToDisposeOfArray.indexOf(e.refSelfGameEntity)<0&&(e.refSelfGameEntity.disposeQueued=!0,Ma._entitiesToDisposeOfArray.push(e.refSelfGameEntity))}else{if(1==e.disposed)return void console.warn("tried to dispose entity that is already disposed of.");Ma._entitiesToDisposeOfArray.indexOf(e)<0&&(e.disposeQueued=!0,Ma._entitiesToDisposeOfArray.push(e))}}},{key:"queueEntityWithDelay",value:function(e,i){var t={};t.gameEntity=e,t.delay=i,Ma._delayed.push(t)}}]),e}();var hf=function(){function e(){Gn(this,e)}return Hn(e,null,[{key:"InjectIntoActor",value:function(t,r){Ha.CreateTriggerIfNotExisting(t,r),t.vals.actions.triggerOn[r].push({name:e.Name}),t.vals.actions.dict[e.Name]=!0}},{key:"OnAct",value:function(e,t){qa.queueEntity(e)}},{key:"Name",get:function(){return"QueueDispose"}}]),e}();function oh(a,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,t.key,t)}}function Kn(a,e,r){return e&&oh(a.prototype,e),r&&oh(a,r),a}function ph(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var Ln=function a(){ph(this,a),this.actions={}},qh=new Ln,Ja=function(){function a(){ph(this,a)}return Kn(a,null,[{key:"RegisterActionClass",value:function(a,e){qh.actions[a]=e}},{key:"GetActionClass",value:function(a){return qh.actions[a]}}]),a}();function rh(e,a){for(var r=0;r<a.length;r++){var n=a[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Mn(e,a,r){return a&&rh(e.prototype,a),r&&rh(e,r),e}function sh(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}var Nn=function e(){sh(this,e),this.components={}},th=new Nn,ka=function(){function e(){sh(this,e)}return Mn(e,null,[{key:"RegisterComponentClass",value:function(e,a){th.components[e]=a}},{key:"GetComponentClass",value:function(e){return th.components[e]}}]),e}();var Ea=function(){function e(){Dn(this,e),this.vals=null,this.plugins=null,this.tweens=null,this.baked=!1,this.disposed=!1,this.disposeQueued=!1,this.onDisposeArr=[],this.displayed=null,this.cache=null,this.opt={textField:null,spineData:null}}return En(e,[{key:"registerDisposeCallback",value:function(e){this.onDisposeArr.push(e)}},{key:"generateGUID",value:function(){this.vals.guid?console.warn("Actor already has guid"):this.vals.guid=fh()}},{key:"initialize",value:function(){this.vals={},this.vals.bags=[],this.vals.components={},this.vals.actions={},this.vals.actions.triggerOn={},this.vals.actions.dict={},this.tweens={},this.plugins={},this.cache={}}},{key:"triggerActions",value:function(e,t){if(this.vals.actions&&this.vals.actions.triggerOn[e])for(var s=0;s<this.vals.actions.triggerOn[e].length;s++){var i=this.vals.actions.triggerOn[e][s];console.assert(Ja.GetActionClass(i.name),"No ActionClass: ",i.name,i),Ja.GetActionClass(i.name).OnAct(this,i,t)}}},{key:"parseOnTweenComplete",value:function(e){for(var t=0;t<e.length;t++){var s=e[t];"trigger"==s.type&&this.triggerActions(s.trigger)}}},{key:"dispose",value:function(){for(var e=0;e<this.onDisposeArr.length;e++)this.onDisposeArr[e](this);for(var t in this.vals.components){ka.GetComponentClass(t).Cleanup(this)}if(this.vals.bags.length>0&&fa.DeleteActorInAllBags(this),null!=this.displayed){var s=this.displayed;s.refSelfActor=null,s.destroy(),this.displayed=null}else console.warn("fKillvis -> displayed is already destroyed");this.tweens&&(this.tweens.position&&(this.tweens.position.stop(0),this.tweens.position.remove()),this.tweens.scale&&(this.tweens.scale.stop(0),this.tweens.scale.remove())),this.tweens=null,this.plugins=null,this.vals=null,this.disposed=!0,delete this.opt}},{key:"bake",value:function(){for(var e in this.vals.guid||this.generateGUID(),this.vals.components){var t=ka.GetComponentClass(e);console.assert(t,"no component Class: ",e," in ComponentLibraryModel"),t.PreBake&&t.PreBake(this)}for(var s in this.vals.components){var i=ka.GetComponentClass(s);console.assert(i,"no component Class: ",s," in ComponentLibraryModel"),i.Bake(this)}for(var o in this.baked=!0,this.vals.components){var n=ka.GetComponentClass(o);console.assert(n,"no component Class: ",o," in ComponentLibraryModel"),n.PostBake(this)}return hf.InjectIntoActor(this,kh),this.triggerActions(lb),this}},{key:"getJSON",value:function(){return JSON.stringify(this.vals)}},{key:"loadFromJSON",value:function(e){this.vals=JSON.parse(e)}}],[{key:"GetEmptyActor",value:function(){var t=new e;return t.initialize(),t}},{key:"GetGUID",value:function(e){return e.vals.guid}}]),e}();var uh="transform",jf="TransformComponent",Ka="TransformComponent";var ya=function(){function e(){Bn(this,e)}return Cn(e,null,[{key:"InjectIntoActor",value:function(e,n,a){e.vals.x=n,e.vals.y=a,e.vals.components[jf]=!0}},{key:"SetFromData",value:function(e,n){void 0!==n.x&&(e.vals.x=n.x),void 0!==n.y&&(e.vals.y=n.y)}},{key:"SetPosition",value:function(e,n,a){e.vals.x=n,e.vals.y=a,e.baked}},{key:"GetX",value:function(e){return e.vals.x}},{key:"GetY",value:function(e){return e.vals.y}},{key:"Bake",value:function(e){}},{key:"PostBake",value:function(e){}},{key:"Cleanup",value:function(e){}},{key:"Has",value:function(e){return 1==e.vals.components[jf]}},{key:"SetEnabled",value:function(e,n){e.vals[uh].enabled=n}},{key:"IsEnabled",value:function(e){return e.vals[uh].enabled}},{key:"Name",get:function(){return jf}}]),e}();function On(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function vh(e,a){for(var n=0;n<a.length;n++){var r=a[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pn(e,a,n){return a&&vh(e.prototype,a),n&&vh(e,n),e}var ab=function(){function e(){On(this,e)}return Pn(e,null,[{key:"InjectIntoActor",value:function(a,n,r){console.assert(n,n),a.vals.image={},a.vals.image.texture=n,a.vals.image.layer=r,a.vals.image.inLayerDepth=0,a.vals.components[e.Name]=!0,a.vals.visualBase=a.vals.image}},{key:"Bake",value:function(e){var a=ea.InBakeGetSceneFromLayerCfg(e).make.image({x:0,y:0,key:e.vals.image.texture,add:!1},!1);ea.InBakeAddDisplayedAndSetSelfRef(e,a),ea.SynchDisplayedToSavedTransformPosition(e)}},{key:"PostBake",value:function(e){}},{key:"Cleanup",value:function(e){}},{key:"Name",get:function(){return"Image"}}]),e}();var Na={game:null};function wh(e,a){for(var t=0;t<a.length;t++){var o=a[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Qn(e,a,t){return a&&wh(e.prototype,a),t&&wh(e,t),e}function xh(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function yh(e,a){for(var r=0;r<a.length;r++){var t=a[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function Rn(e,a,r){return a&&yh(e.prototype,a),r&&yh(e,r),e}function zh(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}var Sn=function e(){zh(this,e),this.overrideObj={disableFakeMusicPreload:!1,disableSavedAudioState:!1,editorEnabled:!1,disablePause:!1},this.templateOverrides={}},ld=new Sn,Hc=function(){function e(){zh(this,e)}return Rn(e,null,[{key:"SetObjectTogglesOverrides",value:function(e){ld.overrideObj=e}},{key:"GetObjectTogglesOverrides",value:function(){return ld.overrideObj}},{key:"SetObjectTemplatesOverrides",value:function(e){ld.templateOverrides=e}},{key:"GetObjectTemplatesOverrides",value:function(){return ld.templateOverrides}}]),e}();var Ic="SCENE_GAME";function Tn(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function Ah(e,a){for(var n=0;n<a.length;n++){var r=a[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Un(e,a,n){return a&&Ah(e.prototype,a),n&&Ah(e,n),e}var mb={scenesKeyList:[],scenesDict:{},scenesArr:[],pauseCfg:{}},Oa=function(){function e(){Tn(this,e)}return Un(e,null,[{key:"RegisterScene",value:function(e,a,n){mb.scenesArr.push(e),mb.scenesDict[a]=e,mb.scenesKeyList.push(a),mb.pauseCfg[a]=n}},{key:"GetSceneByKey",value:function(e){return mb.scenesDict[e]}},{key:"GetSceneArr",value:function(){return mb.scenesArr}},{key:"GetSceneKeyListArr",value:function(){return mb.scenesKeyList}},{key:"CanSceneBePaused",value:function(e){return 1==mb.pauseCfg[e]}}]),e}();var Vn=function e(){xh(this,e),this.audioState=1,this.cachedSounds={},this.wasMutedAutomatically=!1,this.wasMutedManually=!1,this.musicStateKey=""},va=new Vn,gb=function(){function e(){xh(this,e)}return Qn(e,null,[{key:"PlayAudio",value:function(e,a){console.assert(e,"AudioModel::playAudio-> pAudioName is: ",e);var t=Oa.GetSceneByKey(Ic);a[e]||(a[e]={cfg:{volume:1}});var o=a[e];if(va.cachedSounds[e])va.cachedSounds[e].play();else{if(!Na.game.cache.audio.exists(e))return;var i=t.sound.add(e,o.cfg);i.play(),va.cachedSounds[e]=i}}},{key:"StopAudio",value:function(e){va.cachedSounds[e]&&Na.game.cache.audio.exists(e)&&va.cachedSounds[e].stop()}},{key:"_DoMuteAudio",value:function(){console.log("AudioModel->muteAudio()"),va.audioState=-1,Oa.GetSceneByKey(Ic).sound.setMute(!0)}},{key:"_DoUnmuteAudio",value:function(){console.log("AudioModel->unmuteAudio()"),va.audioState=1,Oa.GetSceneByKey(Ic).sound.setMute(!1)}},{key:"MuteAudioManuallyByUser",value:function(){va.wasMutedManually=!0,e.SaveAudioDisabled(),e._DoMuteAudio()}},{key:"UnmuteAudioManuallyByUser",value:function(){va.wasMutedManually=!1,e.SaveAudioEnabled(),e._DoUnmuteAudio()}},{key:"TryToAutomaticallyMuteIfNotMutedManually",value:function(){va.wasMutedManually||va.wasMutedAutomatically||(va.wasMutedAutomatically=!0,e._DoMuteAudio())}},{key:"TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically",value:function(){va.wasMutedManually||va.wasMutedAutomatically&&(va.wasMutedAutomatically=!1,e._DoUnmuteAudio())}},{key:"IsMuted",value:function(){return-1==va.audioState}},{key:"GetAudioState",value:function(){return console.log("audio state:",va.audioState),va.audioState}},{key:"InterpretInitialAudioState",value:function(a){var t="MusicState_"+a;va.musicStateKey=t;var o=localStorage.getItem(t);Hc.GetObjectTogglesOverrides().disableSavedAudioState&&(o="enabled"),"disabled"==o?e.MuteAudioManuallyByUser():"enabled"==o||(o="enabled"),localStorage.setItem(t,o)}},{key:"SaveAudioDisabled",value:function(){localStorage.setItem(va.musicStateKey,"disabled")}},{key:"SaveAudioEnabled",value:function(){localStorage.setItem(va.musicStateKey,"enabled")}}]),e}();function Bh(e){var i=Na.game.canvas.getBoundingClientRect();e.innerWidth=i.width,e.innerHeight=window.innerHeight+Math.abs(i.top),e.relsvg=i,e._scaleWidth=e.innerWidth/e.desiredWidth,e._scaleHeight=e.innerHeight/e.desiredHeight,e._higherScale,e._lowerScale,e._scaleWidth>e._scaleHeight?(e._higherScale=e._scaleWidth,e._lowerScale=e._scaleHeight):(e._higherScale=e._scaleHeight,e._lowerScale=e._scaleWidth),e._multiplierWidth=1/e._scaleWidth,e._multiplierHeight=1/e._scaleHeight,e._higherMultiplier,e._lowerMultiplier,e._multiplierWidth>e._multiplierHeight?(e._higherMultiplier=e._multiplierWidth,e._lowerMultiplier=e._multiplierHeight):(e._higherMultiplier=e._multiplierHeight,e._lowerMultiplier=e._multiplierWidth),e._newScale=e._lowerScale,e._reverseNewScale=1/e._newScale,e.screenScaleForGame=e._newScale,e.screenMaxWidthForGame=e.innerWidth*e._higherMultiplier,e.screenMaxHeightForGame=e.innerHeight*e._higherMultiplier,e.scaleMode==Phaser.Scale.FIT&&(e.screenScaleForGame=1,e.screenMaxWidthForGame=e.desiredWidth,e.screenMaxHeightForGame=e.desiredHeight),e.boundBox={},e.boundBox.minX=0*e.screenScaleForGame+Math.abs(e.relsvg.left),e.boundBox.minY=0*e.screenScaleForGame+Math.round(Math.abs(i.top)),e.boundBox.maxX=e.screenMaxWidthForGame*e.screenScaleForGame,e.boundBox.maxY=e.screenMaxHeightForGame*e.screenScaleForGame+Math.round(Math.abs(i.top)),e.boundBox.midX=e.screenMaxWidthForGame/2*e.screenScaleForGame+Math.abs(e.relsvg.left/2),e.boundBox.midY=e.screenMaxHeightForGame/2*e.screenScaleForGame+Math.round(Math.abs(i.top))}var Ch="BAG_GUI_ROTATION";var kf="ROTATION_LANDSCAPE";var md="ROTATION_PORTRAIT";var nd=2;var Db=1;var Wn=function(){function e(){Xg(this,e),this.screenData||(this.screenData={}),this.mode=Db,this.screenData.desiredWidth=1,this.screenData.desiredHeight=1,this.screenData.desiredOrientation=null,this.screenData.allowRotationScreen=null,this.screenData.scaleMode=null,this.screenData.boundBox={},this.screenData.boundBox.minX=0,this.screenData.boundBox.minY=0,this.screenData.boundBox.maxX=0,this.screenData.boundBox.maxY=0,this.screenData.boundBox.midX=0,this.screenData.boundBox.midY=0,this.displayObjects={},this.displayObjects.objectsInArray=[],this.displayObjects.objectsKeyArray=[],this.displayObjects.objectsInDictByName={},this._sceneNamesByLayersNamesDict={},this.rotationScreen={},this.rotationScreen.displayedMode="none",this.rotationScreen.displayedRotationScreen=!1}return Zg(e,[{key:"_GetAndUpdateScreenSizeData",value:function(){return console.assert(this.screenData,"DisplaySystem->_GetAndUpdateScreenSizeData:: screenData isn't defined, call SetGameDisplayMode with params first!"),Bh(this.screenData),this.screenData}},{key:"_AddScalingListeners",value:function(e){window.addEventListener("resize",function(){this._Resize()}.bind(this))}},{key:"_Resize",value:function(){var e=Na.game.canvas.getBoundingClientRect();Na.game.scale.resize(Math.round(window.innerWidth)+Math.abs(e.left),Math.round(window.innerHeight+Math.abs(e.top))),this._GetAndUpdateScreenSizeData();for(var a=0;a<Na.game.scene.scenes.length;a++){Na.game.scene.scenes[a].cameras.resize(this.screenData.innerWidth,this.screenData.innerHeight)}for(var t=0;t<this.displayObjects.objectsInArray.length;t++){this.displayObjects.objectsInArray[t].onResize(this.screenData)}}}]),e}(),ca=new Wn,ra=function(){function e(){Xg(this,e)}return Zg(e,null,[{key:"IsRotationScreenDisplayed",value:function(){return ca.rotationScreen.displayedRotationScreen}},{key:"SetGameDisplayMode",value:function(e,a,t,r,c){ca.mode=Db,ca.screenData.desiredWidth=e,ca.screenData.desiredHeight=a,ca.screenData.desiredOrientation=t,ca.screenData.allowRotationScreen=r,ca.screenData.scaleMode=c,ca.screenData.boundBox={},ca.screenData.boundBox.minX=0,ca.screenData.boundBox.minY=0,ca.screenData.boundBox.maxX=0,ca.screenData.boundBox.maxY=0,ca.screenData.boundBox.midX=0,ca.screenData.boundBox.midY=0,ca.displayObjects={},ca.displayObjects.objectsInArray=[],ca.displayObjects.objectsKeyArray=[],ca.displayObjects.objectsInDictByName={},ca._sceneNamesByLayersNamesDict={},ca.rotationScreen={},ca.rotationScreen.displayedMode="none",ca.rotationScreen.displayedRotationScreen=!1,ca._GetAndUpdateScreenSizeData()}},{key:"GetScreenMaxWidth",value:function(){return ca.screenData.screenMaxWidthForGame}},{key:"GetScreenMaxHeight",value:function(){return ca.screenData.screenMaxHeightForGame}},{key:"AddScalingListeners",value:function(e){ca._AddScalingListeners(e)}},{key:"CallResize",value:function(){ca._Resize()}},{key:"RegisterSceneDisplayObject",value:function(e){ca.displayObjects.objectsInArray.push(e),ca.displayObjects.objectsKeyArray.push(e.sceneName),ca.displayObjects.objectsInDictByName[e.sceneName]=e}},{key:"AddLayerToScene",value:function(e,a){ca._sceneNamesByLayersNamesDict[e]=a}},{key:"GetLayerContainerLite",value:function(a,t){var r=e.GetSceneNameByLayerName(a.layerName);return ca.displayObjects.objectsInDictByName[r].getOrCreateContainerLiteLayer(a,t,ca.screenData)}},{key:"GetSceneNameByLayerName",value:function(e){return ca._sceneNamesByLayersNamesDict[e]}},{key:"GetValueScaledByScreenScale",value:function(e){return console.assert(ca.mode,"MoonEngineDisplayModel->GetValueScaledByScreenScale:: this.mode is: ",ca.mode),ca.mode==Db||void 0===ca.mode?e*ca.screenData.screenScaleForGame:ca.mode==nd?e:void 0}},{key:"GetValueScaled_VerticalAxis",value:function(e){if(console.assert(ca.mode,"MoonEngineDisplayModel:: this.mode is: ",ca.mode),ca.mode==Db||void 0===ca.mode){var a=Na.game.canvas.getBoundingClientRect();return e*ca.screenData.screenScaleForGame+Math.abs(a.top)}if(ca.mode==nd)return e}},{key:"GetValueScaledByReverseScreenScale",value:function(e){return ca.mode==Db||void 0===ca.mode?e*(1/ca.screenData.screenScaleForGame):ca.mode==nd?e:void 0}},{key:"SetCameraPosYForScene",value:function(e,a){console.assert(e,"MoonEngineDisplayModel::SetCameraPosYForScene-> param pSceneEnum is:",e),null==a&&(console.warn(a,"MoonEngineDisplayModel::SetCameraPosYForScene-> param pPosY is: ",a," fallback set to 0"),a=0),ca.displayObjects.objectsInDictByName[e].setCameraPosY(a,ca.screenData)}},{key:"UpdateRotateScreen",value:function(){if(ca.screenData.allowRotationScreen)if(ca._GetAndUpdateScreenSizeData(),ca.screenData.desiredOrientation==md){if(ca.screenData.innerWidth>ca.screenData.innerHeight){if(ca.rotationScreen.displayedMode!=kf){ca.rotationScreen.displayedMode=kf,ca.rotationScreen.displayedRotationScreen=!0,console.log("Rotation Screen: Show");var e=Ea.GetEmptyActor();ya.InjectIntoActor(e,0,0),ab.InjectIntoActor(e,oa.RotateBG,Ug),ga.InjectIntoActor(e,[Ch]),Ia.InjectIntoActor(e,"alias_background_rotate"),e.bake(),ea.SetDisplaySize(e,8192,8192),e=Ea.GetEmptyActor(),ya.InjectIntoActor(e,0,0),ab.InjectIntoActor(e,oa.NeedPortrait,Vg),ga.InjectIntoActor(e,[Ch]),Ia.InjectIntoActor(e,"alias_img_rotate_device"),e.bake(),gb.TryToAutomaticallyMuteIfNotMutedManually(),na.GetGameRemix().tryCallPause()}}else ca.rotationScreen.displayedMode!=md&&(ca.rotationScreen.displayedMode=md,ca.rotationScreen.displayedRotationScreen&&(console.log("Rotation Screen: Hide"),ca.rotationScreen.displayedRotationScreen=!1,qa.queueEntity(fa.GetActorByAlias("alias_background_rotate")),qa.queueEntity(fa.GetActorByAlias("alias_img_rotate_device")),gb.TryAutomaticallyUnmuteIfWasMutedAlsoAutomatically(),na.GetGameRemix().tryCallUnpause()));}else ca.screenData.desiredOrientation==kf&&console.log("TODO: MoonEngineDisplayModel->UpdateRotateScreen:: landscape mode not implemented!")}},{key:"GetScreenData",value:function(){return ca.screenData}}]),e}();function Dh(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Eh(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fh(e,r,t){return r&&Eh(e.prototype,r),t&&Eh(e,t),e}function Xn(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Gh(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Yn(e,n,t){return n&&Gh(e.prototype,n),t&&Gh(e,t),e}function Zn(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Hh(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function $n(e,n,t){return n&&Hh(e.prototype,n),t&&Hh(e,t),e}var lf=!0,Ih=function(){function e(){Zn(this,e)}return $n(e,[{key:"_checkAddPositionFallback",value:function(e){null==e._x&&(e._x=0,console.warn("Fallback: ",e._x=0)),null==e._y&&(e._y=0,console.warn("Fallback: ",e._y=0)),null==e._d&&(e._d=1e3)}},{key:"_tweenPositionTo",value:function(e,n,t){var a=e.displayed.scene;return this._checkAddPositionFallback(n),this._doPositionTween(a,e,{targets:e.displayed,x:n._x,y:n._y,ease:"Cubic.InOut",duration:n._d},n,null,t)}},{key:"_doPositionTween",value:function(e,n,t,a,s,i){if(n.tweens.position&&i&&this._fastTrackPositionTween(n),n.tweens.position&&!i){var o=n.tweens.position;26!=o.state&&o.stop(),n.tweens.position=null}if(a&&this._tweenParseArgs(t,a),s&&s.func(e,n),!lf)return null;var r=e.tweens.add(t);return n.tweens.position=r,r}},{key:"_fastTrackPositionTween",value:function(e){var n=e.tweens.position;if(26!=n.state){n.stop();for(var t=0;t<n.data.length;t++){var a=n.data[t];a.target[a.key]=a.end}}e.tweens.position=null}},{key:"tweenPositionTo",value:function(e,n){return this._tweenPositionTo(e,n,!1)}},{key:"tweenPositionToWithFastTrack",value:function(e,n){return this._tweenPositionTo(e,n,!0)}},{key:"tweenPositionByDeltaFrom",value:function(e,n){var t=e.displayed.scene;return this._doPositionTween(t,e,{targets:e.displayed,x:e.displayed.x,y:e.displayed.y,ease:"Cubic.InOut",duration:n._d},n,{func:function(e,n){n.displayed.x=n.displayed.x+this.delta_x,n.displayed.y=n.displayed.y+this.delta_y},delta_x:n._x,delta_y:n._y},!0)}},{key:"tweenPositionByDeltaTo",value:function(e,n){var t=e.displayed.scene;return this._doPositionTween(t,e,{targets:e.displayed,x:e.displayed.x+n._x,y:e.displayed.y+n._y,ease:"Cubic.InOut",duration:n._d},n,null,!0)}},{key:"tweenPositionYoyo",value:function(e,n){var t=e.displayed.scene;return this._doPositionTween(t,e,{targets:e.displayed,x:e.displayed.x+n._x,y:e.displayed.y+n._y,ease:"Quadratic.In",duration:n._d,repeat:-1,yoyo:!0},n,null,!0)}},{key:"tweenScaleTo",value:function(e,n){var t=e.displayed.scene,a={targets:e.displayed,scale:n._s,ease:"Cubic.InOut",duration:n._d};return this._doScaleTween(t,e,a,n)}},{key:"tweenAlphaTo",value:function(e,n){var t=e.displayed.scene,a={targets:e.displayed,alpha:n._alpha,ease:"Cubic.InOut",duration:n._d};return this._doAlphaTween(t,e,a,n)}},{key:"effectPingScale",value:function(e,n){ea.SetScale(e,.95);var t=e.displayed.scene,a={targets:e.displayed,scale:1,duration:200,yoyo:!0};return this._doScaleTween(t,e,a,n)}},{key:"_doScaleTween",value:function(e,n,t,a){if(n.tweens.scale&&a.ifTweens&&("fast"==a.ifTweens?console.log("implement: fast at tweenScaleTo"):"stop"==a.ifTweens&&(n.tweens.scale.stop(),n.tweens.scale=null)),a&&this._tweenParseArgs(t,a),lf){var s=e.tweens.add(t);return n.tweens.scale=s,s}}},{key:"_doAlphaTween",value:function(e,n,t,a){if(a&&this._tweenParseArgs(t,a),lf){var s=e.tweens.add(t);return n.tweens.alpha=s,s}}},{key:"_tweenParseArgs",value:function(e,n){for(var t in null!=n.scaleX&&delete e.scale,null!=n.scaleY&&delete e.scale,n)e[t]=n[t];n._onComplete&&(e.onComplete=function(){this.targets[0].refSelfActor.parseOnTweenComplete(n._onComplete)})}}],[{key:"IsTweeningPosition",value:function(e){var n=e.tweens.position;if(!n)return!1;return 26!=n.state}},{key:"GetPositionTweenProgress",value:function(e){return e.tweens.position?e.tweens.position.progress:1}},{key:"StopPositionTween",value:function(e){var n=e.tweens.position;n&&n.stop()}},{key:"IsTweeningScale",value:function(e){var n=e.tweens.scale;if(!n)return!1;return 26!=n.state}}]),e}();var bb=new Ih;var $b=function(){function e(){Xn(this,e)}return Yn(e,null,[{key:"InjectIntoActor",value:function(n,t,a){Ha.CreateTriggerIfNotExisting(n,t),n.vals.actions.triggerOn[t].push({name:e.Name,data:a}),n.vals.actions.dict[e.Name]=!0}},{key:"OnAct",value:function(e,n){var t=JSON.parse(JSON.stringify(n.data));bb.tweenAlphaTo(e,t)}},{key:"Name",get:function(){return"TweenAlphaTo"}}]),e}();function _n(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function Jh(e,o){for(var t=0;t<o.length;t++){var n=o[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ao(e,o,t){return o&&Jh(e.prototype,o),t&&Jh(e,t),e}var od="TweenPositionByDeltaFromAction",bo="TweenPositionByDeltaFromAction";var Jc=function(){function e(){_n(this,e)}return ao(e,null,[{key:"InjectIntoActor",value:function(e,o,t){Ha.CreateTriggerIfNotExisting(e,o),e.vals.actions.triggerOn[o].push({name:od,data:t}),e.vals.actions.dict[od]=!0}},{key:"SetFromData",value:function(e,o){Ha.GenericSetFromData(od,e,o)}},{key:"OnAct",value:function(e,o){var t=JSON.parse(JSON.stringify(o.data));bb.tweenPositionByDeltaFrom(e,t)}},{key:"Name",get:function(){return od}}]),e}();function co(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Kh(e,n){for(var i=0;i<n.length;i++){var t=n[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function eo(e,n,i){return n&&Kh(e.prototype,n),i&&Kh(e,i),e}var mf=function(){function e(){co(this,e)}return eo(e,null,[{key:"InjectIntoActor",value:function(n,i,t){Ha.CreateTriggerIfNotExisting(n,i),n.vals.actions.triggerOn[i].push({name:e.Name,data:t}),n.vals.actions.dict[e.Name]=!0}},{key:"OnAct",value:function(e,n){var i=JSON.parse(JSON.stringify(n.data));bb.tweenPositionYoyo(e,i)}},{key:"Name",get:function(){return"TweenPositionYoYoAction"}}]),e}();function fo(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function Lh(e,s){for(var a=0;a<s.length;a++){var t=s[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function go(e,s,a){return s&&Lh(e.prototype,s),a&&Lh(e,a),e}var nf=function(){function e(){fo(this,e)}return go(e,null,[{key:"InjectIntoActor",value:function(s){s.vals.physics={},s.vals.physics.body="standard",s.vals.components[e.Name]=!0,s.baked&&(this.Bake(s),this.PostBake(s))}},{key:"SetAsCircle",value:function(e,s){e.vals.physics.circle=!0,e.vals.physics.circleSize=s}},{key:"SetOffset",value:function(e,s,a){console.assert(e,"pActor is: ",e),console.assert(e.vals,"pActor.vals is: ",e,e.vals),console.assert(e.vals.physics,"pActor.vals.physics is: ",e,e.vals.physics),e.vals.physics.offsetX=s,e.vals.physics.offsetY=a,e.baked&&e.displayed.body.setOffset(s,a)}},{key:"SetBodySize",value:function(e,s,a){e.displayed.body.setSize(s,a,!0)}},{key:"SetBodyCircle",value:function(e,s){e.displayed.body.setCircle(s)}},{key:"SetSizeScaled",value:function(e,s){var a=e.displayed.body.sourceWidth*s,t=e.displayed.body.sourceHeight*s;e.displayed.body.setSize(a,t,!0)}},{key:"Bake",value:function(s){s.displayed.scene.physics.add.existing(s.displayed),s.vals.physics.circle&&e.SetBodyCircle(s,s.vals.physics.circleSize),null!=s.vals.physics.offsetX&&null!=s.vals.physics.offsetY&&e.SetOffset(s,s.vals.physics.offsetX,s.vals.physics.offsetY)}},{key:"DestroyBody",value:function(e){e.displayed.body.destroy()}},{key:"PostBake",value:function(e){}},{key:"Cleanup",value:function(e){}},{key:"Name",get:function(){return"Physics"}}]),e}();function ho(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function Mh(e,a){for(var n=0;n<a.length;n++){var s=a[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function io(e,a,n){return a&&Mh(e.prototype,a),n&&Mh(e,n),e}var Eb=function(){function e(){ho(this,e)}return io(e,null,[{key:"InjectIntoActor",value:function(a,n,s,o,t){console.assert(n,n),a.vals.spine={},a.vals.spine.key=n,a.vals.spine.baseAnimation=s,a.vals.spine.baseLoops=o,a.vals.spine.layer=t,a.vals.spine.inLayerDepth=0,a.vals.spine.maxWidth=0,a.vals.spine.maxHeight=0,a.vals.components[e.Name]=!0,a.vals.visualBase=a.vals.spine}},{key:"Has",value:function(a){return!!a.vals.components[e.Name]}},{key:"ListAnimations",value:function(e){for(var a=0;a<e.displayed.stateData.skeletonData.animations.length;a++){var n=e.displayed.stateData.skeletonData.animations[a].name;console.log(n)}}},{key:"Bake",value:function(e){var a=ea.InBakeGetSceneFromLayerCfg(e).make.spine({x:0,y:0,key:e.vals.spine.key,animationName:e.vals.spine.baseAnimation,loop:e.vals.spine.baseLoops,add:!1},!1);ea.InBakeAddDisplayedAndSetSelfRef(e,a),ea.SynchDisplayedToSavedTransformPosition(e)}},{key:"PostBake",value:function(e){}},{key:"Cleanup",value:function(e){}},{key:"Name",get:function(){return"Spine"}}]),e}();function jo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nh(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ko(e,t,a){return t&&Nh(e.prototype,t),a&&Nh(e,a),e}var of,pf={},b=arguments[0];!function(e,u){"object"==typeof pf?pf=u():"function"==typeof of&&of.amd?of(u):e.v=u()}(pf,function(){function e(e){return null==e}function u(u){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e(u)?r:Boolean(u)}function r(e){return"string"==typeof e}function n(u){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e(u)?n:r(u)?u:String(u)}function t(e,r){var t=n(e),i=u(r);return""===t?"":(i&&(t=t.toLowerCase()),t.substr(0,1).toUpperCase()+t.substr(1))}function i(e){return n(e,"").toLowerCase()}var a="\\uDC00-\\uDFFF",o="\\u0300-\\u036F\\u1AB0-\\u1AFF\\u1DC0-\\u1DFF\\u20D0-\\u20FF\\uFE20-\\uFE2F",c="\\0-\\u02FF\\u0370-\\u1AAF\\u1B00-\\u1DBF\\u1E00-\\u20CF\\u2100-\\uD7FF\\uE000-\\uFE1F\\uFE30-\\uFFFF",f=new RegExp("(["+c+"]|[\\uD800-\\uDBFF]["+a+"]|[\\uD800-\\uDBFF](?!["+a+"])|(?:[^\\uD800-\\uDBFF]|^)["+a+"])(["+o+"]+)","g"),s=new RegExp("([\\uD800-\\uDBFF])([\\uDC00-\\uDFFF])","g"),l=new RegExp("((?:["+c+"]|[\\uD800-\\uDBFF]["+a+"]|[\\uD800-\\uDBFF](?!["+a+"])|(?:[^\\uD800-\\uDBFF]|^)["+a+"])(?:["+o+"]+))|([\\uD800-\\uDBFF]["+a+"])|([\\n\\r\\u2028\\u2029])|(.)","g"),p=new RegExp("[\\s\\uFEFF\\xA0]"),g=new RegExp("^[\\s\\uFEFF\\xA0]+"),h=new RegExp("[\\s\\uFEFF\\xA0]+$"),v=new RegExp("^\\d+$"),d=/[-[\]{}()*+!<=:?./\\^$|#,]/g,F=/[^A-Za-z0-9]/g,x=/[<>&"'`]/g,b=/(%{1,2})(?:(\d+)\$)?(\+)?([ 0]|'.{1})?(-)?(\d+)?(?:\.(\d+))?([bcdiouxXeEfgGs])?/g,y=/\.?0+$/g,w=/[gimuy]*$/,D=/<([A-Za-z0-9]+)>/g,A="a-z\\xB5\\xDF-\\xF6\\xF8-\\xFF\\u0101\\u0103\\u0105\\u0107\\u0109\\u010B\\u010D\\u010F\\u0111\\u0113\\u0115\\u0117\\u0119\\u011B\\u011D\\u011F\\u0121\\u0123\\u0125\\u0127\\u0129\\u012B\\u012D\\u012F\\u0131\\u0133\\u0135\\u0137\\u0138\\u013A\\u013C\\u013E\\u0140\\u0142\\u0144\\u0146\\u0148\\u0149\\u014B\\u014D\\u014F\\u0151\\u0153\\u0155\\u0157\\u0159\\u015B\\u015D\\u015F\\u0161\\u0163\\u0165\\u0167\\u0169\\u016B\\u016D\\u016F\\u0171\\u0173\\u0175\\u0177\\u017A\\u017C\\u017E-\\u0180\\u0183\\u0185\\u0188\\u018C\\u018D\\u0192\\u0195\\u0199-\\u019B\\u019E\\u01A1\\u01A3\\u01A5\\u01A8\\u01AA\\u01AB\\u01AD\\u01B0\\u01B4\\u01B6\\u01B9\\u01BA\\u01BD-\\u01BF\\u01C6\\u01C9\\u01CC\\u01CE\\u01D0\\u01D2\\u01D4\\u01D6\\u01D8\\u01DA\\u01DC\\u01DD\\u01DF\\u01E1\\u01E3\\u01E5\\u01E7\\u01E9\\u01EB\\u01ED\\u01EF\\u01F0\\u01F3\\u01F5\\u01F9\\u01FB\\u01FD\\u01FF\\u0201\\u0203\\u0205\\u0207\\u0209\\u020B\\u020D\\u020F\\u0211\\u0213\\u0215\\u0217\\u0219\\u021B\\u021D\\u021F\\u0221\\u0223\\u0225\\u0227\\u0229\\u022B\\u022D\\u022F\\u0231\\u0233-\\u0239\\u023C\\u023F\\u0240\\u0242\\u0247\\u0249\\u024B\\u024D\\u024F",E="\\x41-\\x5a\\xc0-\\xd6\\xd8-\\xde\\u0100\\u0102\\u0104\\u0106\\u0108\\u010a\\u010c\\u010e\\u0110\\u0112\\u0114\\u0116\\u0118\\u011a\\u011c\\u011e\\u0120\\u0122\\u0124\\u0126\\u0128\\u012a\\u012c\\u012e\\u0130\\u0132\\u0134\\u0136\\u0139\\u013b\\u013d\\u013f\\u0141\\u0143\\u0145\\u0147\\u014a\\u014c\\u014e\\u0150\\u0152\\u0154\\u0156\\u0158\\u015a\\u015c\\u015e\\u0160\\u0162\\u0164\\u0166\\u0168\\u016a\\u016c\\u016e\\u0170\\u0172\\u0174\\u0176\\u0178\\u0179\\u017b\\u017d\\u0181\\u0182\\u0184\\u0186\\u0187\\u0189-\\u018b\\u018e-\\u0191\\u0193\\u0194\\u0196-\\u0198\\u019c\\u019d\\u019f\\u01a0\\u01a2\\u01a4\\u01a6\\u01a7\\u01a9\\u01ac\\u01ae\\u01af\\u01b1-\\u01b3\\u01b5\\u01b7\\u01b8\\u01bc\\u01c4\\u01c5\\u01c7\\u01c8\\u01ca\\u01cb\\u01cd\\u01cf\\u01d1\\u01d3\\u01d5\\u01d7\\u01d9\\u01db\\u01de\\u01e0\\u01e2\\u01e4\\u01e6\\u01e8\\u01ea\\u01ec\\u01ee\\u01f1\\u01f2\\u01f4\\u01f6-\\u01f8\\u01fa\\u01fc\\u01fe\\u0200\\u0202\\u0204\\u0206\\u0208\\u020a\\u020c\\u020e\\u0210\\u0212\\u0214\\u0216\\u0218\\u021a\\u021c\\u021e\\u0220\\u0222\\u0224\\u0226\\u0228\\u022a\\u022c\\u022e\\u0230\\u0232\\u023a\\u023b\\u023d\\u023e\\u0241\\u0243-\\u0246\\u0248\\u024a\\u024c\\u024e",C=new RegExp("(?:["+E+"]["+o+"]*)?(?:["+A+"]["+o+"]*)+|(?:["+E+"]["+o+"]*)+(?!["+A+"])|[\\d]+|[\\u2700-\\u27BF]|[^\\x00-\\x2F\\x3A-\\x40\\x5B-\\x60\\x7b-\\xBF\\xD7\\xF7\\u2000-\\u206F\\s\\uFEFF\\xA0]+","g"),m=/[A-Z\xC0-\xD6\xD8-\xDE]?[a-z\xDF-\xF6\xF8-\xFF]+|[A-Z\xC0-\xD6\xD8-\xDE]+(?![a-z\xDF-\xF6\xF8-\xFF])|\d+/g,B=new RegExp("^(?:["+A+E+"]["+o+"]*)+$"),k=new RegExp("^((?:["+A+E+"]["+o+"]*)|[\\d])+$"),$=/^[\x01-\xFF]*$/;function S(e,u){return null==e?u:e}function O(u){return e(u)?null:r(u)?u:String(u)}function j(u,r,t){var i=n(u),a=void 0;if(e(r))a=$.test(i)?m:C;else if(r instanceof RegExp)a=r;else{var o=O(S(t,""));a=new RegExp(O(r),o)}return S(i.match(a),[])}function R(e,u){return 0===u?i(e):t(e,!0)}function U(e){var u=n(e);return""===u?"":j(u).map(i).join("-")}function L(e,u){var r=u.toLowerCase(),n=u.toUpperCase();return e+(u===r?n:r)}function N(e,u,r){return e<=u?u:e>=r?r:e}var P=9007199254740991;function z(e){return e===1/0?P:e===-1/0?-P:~~e}function q(u,r,t){var i=n(u),a=e(r)?i.length:N(z(r),0,P),o=n(t,"...");return a>=i.length?i:i.substr(0,r-o.length)+o}var I=55296,_=56319,V=56320,Y=57343;function Z(u){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e(u)?r:"number"==typeof u?u:Number(u)}function T(e,u){return e!=e?u:e}function W(e,u){var r=n(e),t=r.length,i=Z(u);if(!((i=T(i,0))<0||i>=t)){var a,o=r.charCodeAt(i),c=void 0;return(a=o)>=I&&a<=_&&t>i+1&&function(e){return e>=V&&e<=Y}(c=r.charCodeAt(i+1))?1024*(o-I)+c-V+65536:o}}var G=Array.prototype.reduce;function H(){this.index=0}H.prototype.increment=function(){this.index++},H.prototype.incrementOnEmptyPosition=function(u){e(u)&&this.increment()},H.prototype.getIndexByPosition=function(u){return e(u)?this.index:u-1};var J="i",X="b",K="c",M="d",Q="o",ee="u",ue="x",re="X",ne="e",te="E",ie="f",ae="g",oe="G",ce="s",fe="+",se="-",le=2,pe=8,ge=16;function he(u,r){for(var t=n(u),i=e(r)?1:N(z(r),0,P),a="";i;)1&i&&(a+=t),i>1&&(t+=t),i>>=1;return a}function ve(e,u){return he(e,z(u/e.length)+u%e.length).substr(0,u)}function de(u,r,t){var i=n(u),a=e(r)?0:N(z(r),0,P),o=n(t," ");return a<=i.length?i:ve(o,a-i.length)+i}function Fe(u,r,t){var i=n(u),a=e(r)?0:N(z(r),0,P),o=n(t," ");return a<=i.length?i:i+ve(o,a-i.length)}function xe(e,u,r){return r.signSpecifier===fe&&e>=0&&(u=fe+u),u}function be(e,u){var r=parseFloat(e),t=void 0;isNaN(r)&&(r=0);var i=Z(u.precision,6);switch(u.typeSpecifier){case ie:t=r.toFixed(i);break;case ne:t=r.toExponential(i);break;case te:t=r.toExponential(i).toUpperCase();break;case ae:case oe:t=function(e,u,r){if(0===e)return"0";var n=0===u?1:u,t=e.toPrecision(n).replace(y,"");r.typeSpecifier===oe&&(t=t.toUpperCase());return t}(r,i,u);}return n(t=xe(r,t,u))}function ye(e,u){var r=parseInt(e);switch(isNaN(r)&&(r=0),r>>>=0,u.typeSpecifier){case K:r=String.fromCharCode(r);break;case X:r=r.toString(le);break;case Q:r=r.toString(pe);break;case ue:r=r.toString(ge);break;case re:r=r.toString(ge).toUpperCase();}return n(r)}function we(e,u){var r=parseInt(e);return isNaN(r)&&(r=0),xe(r,O(r),u)}function De(u,r){var n=u,t=r.precision;return!e(t)&&n.length>t&&(n=q(n,t,"")),n}function Ae(u,r){var n=void 0;switch(r.typeSpecifier){case ce:n=De;break;case M:case J:n=we;break;case K:case X:case Q:case ue:case re:case ee:n=ye;break;case ie:case ne:case te:case ae:case oe:n=be;}return function(u,r){var n=r.width;return e(n)||u.length>=n?u:(r.alignmentSpecifier===se?Fe:de)(u,n,r.getPaddingCharacter())}(n(u,r),r)}function Ee(e){this.percent=e.percent,this.signSpecifier=e.signSpecifier,this.paddingSpecifier=e.paddingSpecifier,this.alignmentSpecifier=e.alignmentSpecifier,this.width=e.width,this.precision=e.precision,this.typeSpecifier=e.typeSpecifier}function Ce(u,r,n,t,i,a,o,c,f,s,l){var p=new Ee({percent:t,signSpecifier:a,paddingSpecifier:o,alignmentSpecifier:c,width:Z(f,null),precision:Z(s,null),typeSpecifier:l});if(p.isPercentLiteral())return n.slice(1);var g=u.getIndexByPosition(i);return u.incrementOnEmptyPosition(i),function(u,r,n){if(e(n.typeSpecifier))throw new Error("sprintf(): Unknown type specifier");if(u>r-1)throw new Error("sprintf(): Too few arguments");if(u<0)throw new Error("sprintf(): Argument number must be greater than zero")}(g,r.length,p),Ae(r[g],p)}function me(e){var u=n(e);if(""===u)return u;for(var r=arguments.length,t=Array(r>1?r-1:0),i=1;i<r;i++)t[i-1]=arguments[i];var a=Ce.bind(void 0,new H,t);return u.replace(b,a)}Ee.prototype.isPercentLiteral=function(){return"%%"===this.percent},Ee.prototype.getPaddingCharacter=function(){var e=S(this.paddingSpecifier," ");return 2===e.length&&"'"===e[0]&&(e=e[1]),e};var Be={"<":"&lt;",">":"&gt;","&":"&amp;","\"":"&quot;","'":"&#x27;","`":"&#x60;"};function ke(e){return Be[e]}function $e(e){return n(e).replace(d,"\\$&")}var Se={"<":/(&lt;)|(&#x0*3c;)|(&#0*60;)/gi,">":/(&gt;)|(&#x0*3e;)|(&#0*62;)/gi,"&":/(&amp;)|(&#x0*26;)|(&#0*38;)/gi,"\"":/(&quot;)|(&#x0*22;)|(&#0*34;)/gi,"'":/(&#x0*27;)|(&#0*39;)/gi,"`":/(&#x0*60;)|(&#0*96;)/gi},Oe=Object.keys(Se);function je(e,u){return e.replace(Se[u],u)}var Re={3:"\u039E\u03BE",8:"\u0398\u03B8",A:"A\xC0\xC1\xC2\xC3\xC4\xC5\u0100\u0102\u0104\u01CD\u01DE\u01E0\u01FA\u0200\u0202\u0226\u023A\u1E00\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u24B6\u2C6F\uFF21\u0386\u0391\u0410",B:"B\u0181\u0182\u0243\u1E02\u1E04\u1E06\u24B7\uFF22\u0392\u0411",C:"C\xC7\u0106\u0108\u010A\u010C\u0187\u023B\u1E08\u24B8\uA73E\uFF23\u0426",D:"D\u010E\u0110\u0189\u018A\u018B\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u24B9\uA779\uFF24\xD0\u0394\u0414",E:"E\xC8\xC9\xCA\xCB\u0112\u0114\u0116\u0118\u011A\u018E\u0190\u0204\u0206\u0228\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u24BA\uFF25\u0388\u0395\u0415\u042D",F:"F\u0191\u1E1E\u24BB\uA77B\uFF26\u03A6\u0424",G:"G\u011C\u011E\u0120\u0122\u0193\u01E4\u01E6\u01F4\u1E20\u24BC\uA77D\uA77E\uA7A0\uFF27\u0393\u0413\u0490",H:"H\u0124\u0126\u021E\u1E22\u1E24\u1E26\u1E28\u1E2A\u24BD\u2C67\u2C75\uA78D\uFF28\u0389\u0397\u0425",I:"I\xCC\xCD\xCE\xCF\u0128\u012A\u012C\u012E\u0130\u0197\u01CF\u0208\u020A\u1E2C\u1E2E\u1EC8\u1ECA\u24BE\uFF29\u038A\u0399\u03AA\u0406\u0418",J:"J\u0134\u0248\u24BF\uFF2A\u0419",K:"K\u0136\u0198\u01E8\u1E30\u1E32\u1E34\u24C0\u2C69\uA740\uA742\uA744\uA7A2\uFF2B\u039A\u041A",L:"L\u0139\u013B\u013D\u013F\u0141\u023D\u1E36\u1E38\u1E3A\u1E3C\u24C1\u2C60\u2C62\uA746\uA748\uA780\uFF2C\u039B\u041B",M:"M\u019C\u1E3E\u1E40\u1E42\u24C2\u2C6E\uFF2D\u039C\u041C",N:"N\xD1\u0143\u0145\u0147\u019D\u01F8\u0220\u1E44\u1E46\u1E48\u1E4A\u24C3\uA790\uA7A4\uFF2E\u039D\u041D",O:"O\xD2\xD3\xD4\xD5\xD6\xD8\u014C\u014E\u0150\u0186\u019F\u01A0\u01D1\u01EA\u01EC\u01FE\u020C\u020E\u022A\u022C\u022E\u0230\u1E4C\u1E4E\u1E50\u1E52\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u24C4\uA74A\uA74C\uFF2F\u038C\u039F\u041E",P:"P\u01A4\u1E54\u1E56\u24C5\u2C63\uA750\uA752\uA754\uFF30\u03A0\u041F",Q:"Q\u024A\u24C6\uA756\uA758\uFF31",R:"R\u0154\u0156\u0158\u0210\u0212\u024C\u1E58\u1E5A\u1E5C\u1E5E\u24C7\u2C64\uA75A\uA782\uA7A6\uFF32\u03A1\u0420",S:"S\u015A\u015C\u015E\u0160\u0218\u1E60\u1E62\u1E64\u1E66\u1E68\u1E9E\u24C8\u2C7E\uA784\uA7A8\uFF33\u03A3\u0421",T:"T\u0162\u0164\u0166\u01AC\u01AE\u021A\u023E\u1E6A\u1E6C\u1E6E\u1E70\u24C9\uA786\uFF34\u03A4\u0422",U:"U\xD9\xDA\xDB\xDC\u0168\u016A\u016C\u016E\u0170\u0172\u01AF\u01D3\u01D5\u01D7\u01D9\u01DB\u0214\u0216\u0244\u1E72\u1E74\u1E76\u1E78\u1E7A\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u24CA\uFF35\u0423\u042A",V:"V\u01B2\u0245\u1E7C\u1E7E\u24CB\uA75E\uFF36\u0412",W:"W\u0174\u1E80\u1E82\u1E84\u1E86\u1E88\u24CC\u2C72\uFF37\u038F\u03A9",X:"X\u1E8A\u1E8C\u24CD\uFF38\u03A7",Y:"Y\xDD\u0176\u0178\u01B3\u0232\u024E\u1E8E\u1EF2\u1EF4\u1EF6\u1EF8\u1EFE\u24CE\uFF39\u038E\u03A5\u03AB\u042B",Z:"Z\u0179\u017B\u017D\u01B5\u0224\u1E90\u1E92\u1E94\u24CF\u2C6B\u2C7F\uA762\uFF3A\u0396\u0417",a:"a\xE0\xE1\xE2\xE3\xE4\xE5\u0101\u0103\u0105\u01CE\u01DF\u01E1\u01FB\u0201\u0203\u0227\u0250\u1E01\u1E9A\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u24D0\u2C65\uFF41\u03AC\u03B1\u0430",b:"b\u0180\u0183\u0253\u1E03\u1E05\u1E07\u24D1\uFF42\u03B2\u0431",c:"c\xE7\u0107\u0109\u010B\u010D\u0188\u023C\u1E09\u2184\u24D2\uA73F\uFF43\u0446",d:"d\u010F\u0111\u018C\u0256\u0257\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u24D3\uA77A\uFF44\xF0\u03B4\u0434",e:"e\xE8\xE9\xEA\xEB\u0113\u0115\u0117\u0119\u011B\u01DD\u0205\u0207\u0229\u0247\u025B\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u24D4\uFF45\u03AD\u03B5\u0435\u044D",f:"f\u0192\u1E1F\u24D5\uA77C\uFF46\u03C6\u0444",g:"g\u011D\u011F\u0121\u0123\u01E5\u01E7\u01F5\u0260\u1D79\u1E21\u24D6\uA77F\uA7A1\uFF47\u03B3\u0433\u0491",h:"h\u0125\u0127\u021F\u0265\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E96\u24D7\u2C68\u2C76\uFF48\u03AE\u03B7\u0445",i:"i\xEC\xED\xEE\xEF\u0129\u012B\u012D\u012F\u0131\u01D0\u0209\u020B\u0268\u1E2D\u1E2F\u1EC9\u1ECB\u24D8\uFF49\u0390\u03AF\u03B9\u03CA\u0438\u0456",j:"j\u0135\u01F0\u0249\u24D9\uFF4A\u0439",k:"k\u0137\u0199\u01E9\u1E31\u1E33\u1E35\u24DA\u2C6A\uA741\uA743\uA745\uA7A3\uFF4B\u03BA\u043A",l:"l\u013A\u013C\u013E\u0140\u0142\u017F\u019A\u026B\u1E37\u1E39\u1E3B\u1E3D\u24DB\u2C61\uA747\uA749\uA781\uFF4C\u03BB\u043B",m:"m\u026F\u0271\u1E3F\u1E41\u1E43\u24DC\uFF4D\u03BC\u043C",n:"n\xF1\u0144\u0146\u0148\u0149\u019E\u01F9\u0272\u1E45\u1E47\u1E49\u1E4B\u24DD\uA791\uA7A5\uFF4E\u03BD\u043D",o:"o\xF2\xF3\xF4\xF5\xF6\xF8\u014D\u014F\u0151\u01A1\u01D2\u01EB\u01ED\u01FF\u020D\u020F\u022B\u022D\u022F\u0231\u0254\u0275\u1E4D\u1E4F\u1E51\u1E53\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u24DE\uA74B\uA74D\uFF4F\u03BF\u03CC\u043E",p:"p\u01A5\u1D7D\u1E55\u1E57\u24DF\uA751\uA753\uA755\uFF50\u03C0\u043F",q:"q\u024B\u24E0\uA757\uA759\uFF51",r:"r\u0155\u0157\u0159\u0211\u0213\u024D\u027D\u1E59\u1E5B\u1E5D\u1E5F\u24E1\uA75B\uA783\uA7A7\uFF52\u03C1\u0440",s:"s\xDF\u015B\u015D\u015F\u0161\u0219\u023F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E9B\u24E2\uA785\uA7A9\uFF53\u03C2\u03C3\u0441",t:"t\u0163\u0165\u0167\u01AD\u021B\u0288\u1E6B\u1E6D\u1E6F\u1E71\u1E97\u24E3\u2C66\uA787\uFF54\u03C4\u0442",u:"u\xF9\xFA\xFB\xFC\u0169\u016B\u016D\u016F\u0171\u0173\u01B0\u01D4\u01D6\u01D8\u01DA\u01DC\u0215\u0217\u0289\u1E73\u1E75\u1E77\u1E79\u1E7B\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u24E4\uFF55\u0443\u044A",v:"v\u028B\u028C\u1E7D\u1E7F\u24E5\uA75F\uFF56\u0432",w:"w\u0175\u1E81\u1E83\u1E85\u1E87\u1E89\u1E98\u24E6\u2C73\uFF57\u03C9\u03CE",x:"x\u1E8B\u1E8D\u24E7\uFF58\u03C7",y:"y\xFD\xFF\u0177\u01B4\u0233\u024F\u1E8F\u1E99\u1EF3\u1EF5\u1EF7\u1EF9\u1EFF\u24E8\uFF59\u03B0\u03C5\u03CB\u03CD\u044B",z:"z\u017A\u017C\u017E\u01B6\u0225\u0240\u1E91\u1E93\u1E95\u24E9\u2C6C\uA763\uFF5A\u03B6\u0437",OE:"\x8C\u0152",oe:"\x9C\u0153",AE:"\xC6\u01E2\u01FC",ae:"\xE6\u01E3\u01FD",hv:"\u0195",OI:"\u01A2",oi:"\u01A3",DZ:"\u01C4\u01F1",Dz:"\u01C5\u01F2",dz:"\u01C6\u01F3",LJ:"\u01C7",Lj:"\u01C8",lj:"\u01C9",NJ:"\u01CA",Nj:"\u01CB",nj:"\u01CC",OU:"\u0222",ou:"\u0223",TZ:"\uA728",tz:"\uA729",AA:"\uA732",aa:"\uA733",AO:"\uA734",ao:"\uA735",AU:"\uA736",au:"\uA737",AV:"\uA738\uA73A",av:"\uA739\uA73B",AY:"\uA73C",ay:"\uA73D",OO:"\uA74E",oo:"\uA74F",VY:"\uA760",vy:"\uA761",TH:"\xDE",th:"\xFE",PS:"\u03A8",ps:"\u03C8",Yo:"\u0401",Ye:"\u0404",Yi:"\u0407",Zh:"\u0416",Ch:"\u0427",Sh:"\u0428\u0429","":"\u042C\u044C",Yu:"\u042E",Ya:"\u042F",zh:"\u0436",ch:"\u0447",sh:"\u0448\u0449",yu:"\u044E",ya:"\u044F",yo:"\u0451",ye:"\u0454",yi:"\u0457"},Ue=null;function Le(e){var u=(null!==Ue?Ue:(Ue={},Object.keys(Re).forEach(function(e){for(var u=Re[e],r=0;r<u.length;r++){var n=u[r];Ue[n]=e}}),Ue))[e];return u||e}function Ne(e,u){return u}function Pe(e){var u=n(e);return""===u?"":u.replace(F,Le).replace(f,Ne)}function ze(u,r,t){var i=n(u),a=O(r);return null!==a&&(""===a||(t=e(t)?0:N(z(t),0,i.length),-1!==i.indexOf(a,t)))}function qe(e,u){var r=e.toString().match(w)[0];return ze(r,u)?e:new RegExp(e.source,r+u)}var Ie=function(){return function(e,u){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,u){var r=[],n=!0,t=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(r.push(a.value),!u||r.length!==u);n=!0);}catch(c){t=!0,i=c}finally{try{!n&&o.return&&o.return()}finally{if(t)throw i}}return r}(e,u);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function _e(e,u){return e.length===u.length?0:e.length<u.length?1:-1}var Ve=Array.prototype.reduce;function Ye(u,r){var t=n(u);if(""===r||""===t)return t;var i=O(r);if(e(i))return t.replace(g,"");var a=!0;return Ve.call(t,function(e,u){return a&&ze(i,u)?e:(a=!1,e+u)},"")}var Ze=Array.prototype.reduceRight;function Te(u,r){var t=n(u);if(""===r||""===t)return t;var i=O(r);if(e(i))return t.replace(h,"");var a=!0;return Ze.call(t,function(e,u){return a&&ze(i,u)?e:(a=!1,u+e)},"")}var We="width",Ge="newLine",He="indent",Je="cut";function Xe(e){var u=n(e);return B.test(u)}var Ke="\uFEFF";var Me=0,Qe=1,eu=2;function uu(e){for(var u=Me,r="",n=0;u!==eu;){var t=e[n++].toLowerCase();switch(t){case"<":break;case">":u=eu;break;default:p.test(t)?u===Qe&&(u=eu):(u===Me&&(u=Qe),"/"!==t&&(r+=t));}}return r}var ru=0,nu=1,tu=2,iu=3;var au=null;var ou=null!==au?au:au="object"==typeof Xb&&Xb.Object===Object?Xb:"object"==typeof self&&self.Object===Object?self:new Function("return this")(),cu=ou.v;var fu={camelCase:function(e){var u=n(e);return""===u?"":j(u).map(R).join("")},capitalize:t,decapitalize:function(e){var u=n(e);return""===u?"":u.substr(0,1).toLowerCase()+u.substr(1)},kebabCase:U,lowerCase:i,snakeCase:function(e){var u=n(e);return""===u?"":j(u).map(i).join("_")},swapCase:function(e){return n(e).split("").reduce(L,"")},titleCase:function(e,u){var r=n(e),i=Array.isArray(u)?u:[],a=$.test(r)?m:C;return r.replace(a,function(e,u){return u>0&&i.indexOf(r[u-1])>=0?e.toLowerCase():t(e,!0)})},upperCase:function(e){return n(e).toUpperCase()},count:function(e){return n(e).length},countGraphemes:function(e){return n(e).replace(f,"*").replace(s,"*").length},countSubstrings:function(e,u){var r=n(e),t=n(u),i=t.length,a=0,o=0;if(""===r||""===t)return a;do{-1!==(o=r.indexOf(t,o))&&(a++,o+=i)}while(-1!==o);return a},countWhere:function(e,u,r){var t=n(e);if(""===t||"function"!=typeof u)return 0;var i=u.bind(r);return G.call(t,function(e,u,r){return i(u,r,t)?e+1:e},0)},countWords:function(e,u,r){return j(e,u,r).length},escapeHtml:function(e){return n(e).replace(x,ke)},escapeRegExp:$e,unescapeHtml:function(e){var u=n(e);return Oe.reduce(je,u)},sprintf:me,vprintf:function(e,u){return me.apply(void 0,[e].concat(function(e){if(Array.isArray(e)){for(var u=0,r=Array(e.length);u<e.length;u++)r[u]=e[u];return r}return Array.from(e)}(S(u,[]))))},indexOf:function(e,u,r){return n(e).indexOf(u,r)},lastIndexOf:function(e,u,r){return n(e).lastIndexOf(u,r)},search:function(u,r,t){var i=n(u),a=e(t)?0:N(z(t),0,i.length),o=i.substr(a).search(r);return-1===o||isNaN(a)||(o+=a),o},charAt:function(e,u){return n(e).charAt(u)},codePointAt:W,first:function(u,r){var t=n(u),i=e(r)?1:N(z(r),0,P);return t.length<=i?t:t.substr(0,i)},graphemeAt:function(e,u){var r=n(e),t=Z(u),i=void 0,a=0;for(t=T(t,0);null!==(i=l.exec(r));){if(a===t)return l.lastIndex=0,i[0];a++}return""},last:function(u,r){var t=n(u),i=e(r)?1:N(z(r),0,P);return t.length<=i?t:t.substr(t.length-i,i)},prune:function(u,r,t){var i=n(u),a=e(r)?i.length:N(z(r),0,P),o=n(t,"...");if(a>=i.length)return i;var c=$.test(i)?m:C,f=0;return i.replace(c,function(e,u){var r=u+e.length;r<=a-o.length&&(f=r)}),i.substr(0,f)+o},slice:function(e,u,r){return n(e).slice(u,r)},substr:function(e,u,r){return n(e).substr(u,r)},substring:function(e,u,r){return n(e).substring(u,r)},truncate:q,insert:function(e,u,r){var t=n(e),i=n(u),a=Z(r);return a<0||a>t.length||""===i?t:t.slice(0,a)+i+t.slice(a)},latinise:Pe,pad:function(u,r,t){var i=n(u),a=e(r)?0:N(z(r),0,P),o=n(t," ");if(a<=i.length)return i;var c=a-i.length,f=z(c/2),s=c%2;return ve(o,f)+i+ve(o,f+s)},padLeft:de,padRight:Fe,repeat:he,replace:function(e,u,r){return n(e).replace(u,r)},replaceAll:function(e,u,r){var t=n(e),i=u;return u instanceof RegExp?u.global||(i=qe(u,"g")):i=new RegExp($e(u),"g"),t.replace(i,r)},reverse:function(e){return n(e).split("").reverse().join("")},reverseGrapheme:function e(u){for(var r=n(u),t="",i=(r=r.replace(f,function(u,r,n){return e(n)+r}).replace(s,"$2$1")).length;i--;)t+=r.charAt(i);return t},slugify:function(e){var u=n(e);return""===u?"":U(Pe(u).replace(F,"-"))},splice:function(e,u,r,t){var i=n(e),a=n(t),o=Z(u);o<0?(o=i.length+o)<0&&(o=0):o>i.length&&(o=i.length);var c=Z(r,i.length-o);return c<0&&(c=0),i.slice(0,o)+a+i.slice(o+c)},tr:function(e,u,t){var i=n(e),a=void 0,o=void 0;if(r(u)&&r(t))a=u.split(""),o=t.split("");else{var c=function(e){var u=Object.keys(e),r=u.sort(_e).map(function(u){return e[u]});return[u,r]}(S(u,{})),f=Ie(c,2);a=f[0],o=f[1]}var s=a.length;if(0===s)return i;for(var l="",p=o.length,g=0;g<i.length;g++){for(var h=!1,v=void 0,d=0;d<s&&d<p;d++){var F=a[d];if(i.substr(g,F.length)===F){h=!0,v=o[d],g=g+F.length-1;break}}l+=h?v:i[g]}return l},trim:function(u,r){var t=n(u);if(""===r||""===t)return t;var i=O(r);return e(i)?t.trim():Te(Ye(t,i),i)},trimLeft:Ye,trimRight:Te,wordWrap:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n(e),i=function(e){return{width:Z(e[We],75),newLine:n(e[Ge],"\n"),indent:n(e[He],""),cut:u(e[Je],!1)}}(r),a=i.width,o=i.newLine,c=i.indent,f=i.cut;if(""===t||a<=0)return c;for(var s=t.length,l=t.substring.bind(t),p=0,g="";s-p>a;)if(" "!==t[p]){var h=t.lastIndexOf(" ",a+p);h>=p?(g+=c+l(p,h)+o,p=h+1):f?(g+=c+l(p,a+p)+o,p+=a):(h=t.indexOf(" ",a+p))>=0?(g+=c+l(p,h)+o,p=h+1):(g+=c+l(p),p=s)}else p++;return p<s&&(g+=c+l(p)),g},endsWith:function(u,r,t){if(e(r))return!1;var i=n(u),a=n(r);if(""===a)return!0;t=e(t)?i.length:N(z(t),0,i.length),t-=a.length;var o=i.indexOf(a,t);return-1!==o&&o===t},includes:ze,isAlpha:Xe,isAlphaDigit:function(e){var u=n(e);return k.test(u)},isBlank:function(e){return 0===n(e).trim().length},isDigit:function(e){var u=n(e);return v.test(u)},isEmpty:function(e){return 0===n(e).length},isLowerCase:function(e){var u=n(e);return Xe(u)&&u.toLowerCase()===u},isNumeric:function(u){var r="object"!=typeof u||e(u)?u:Number(u);return("number"==typeof r||"string"==typeof r)&&!isNaN(r-parseFloat(r))},isString:r,isUpperCase:function(e){var u=n(e);return Xe(u)&&u.toUpperCase()===u},matches:function(e,u,r){var t=n(e),i=n(r),a=void 0;if(!(u instanceof RegExp)){if(null===(a=O(u)))return!1;u=new RegExp(a,i)}return u.test(t)},startsWith:function(u,r,t){var i=n(u),a=O(r);return null!==a&&(""===a||(t=e(t)?0:N(z(t),0,i.length),i.substr(t,a.length)===a))},chars:function(e){return n(e).split("")},codePoints:function(e){for(var u=n(e),r=u.length,t=[],i=0,a=void 0;i<r;)a=W(u,i),t.push(a),i+=a>65535?2:1;return t},graphemes:function(e){return S(n(e).match(l),[])},split:function(e,u,r){return n(e).split(u,r)},words:j,stripBom:function(e){var u=n(e);return""===u?"":u[0]===Ke?u.substring(1):u},stripTags:function(e,u,r){if(""===(e=n(e)))return"";if(!Array.isArray(u)){var t=n(u);u=""===t?[]:function(e){for(var u=[],r=void 0;null!==(r=D.exec(e));)u.push(r[1]);return u}(t)}for(var i=n(r),a=e.length,o=u.length>0,c=function(e,u,r){var n=0;return(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])&&(n=1-u.length),e.substr(r+n,u.length).toLowerCase()===u}.bind(null,e),f=ru,s=0,l="",p="",g=null,h=0;h<a;h++){var v=e[h],d=!1;switch(v){case"<":if(g)break;if(c("< ",h,!1)){d=!0;break}if(f===ru){d=!0,f=nu;break}if(f===nu){s++;break}d=!0;break;case"!":if(f===nu&&c("<!",h)){f=tu;break}d=!0;break;case"-":if(f===tu&&c("!--",h)){f=iu;break}d=!0;break;case"\"":case"'":f===nu&&(g===v?g=null:g||(g=v)),d=!0;break;case"E":case"e":if(f===tu&&c("doctype",h)){f=nu;break}d=!0;break;case">":if(s>0){s--;break}if(g)break;if(f===nu){if(g=null,f=ru,o){var F=uu(p+=">");-1!==u.indexOf(F.toLowerCase())?l+=p:l+=i,p=""}else l+=i;break}if(f===tu||f===iu&&c("-->",h)){g=null,f=ru,p="";break}d=!0;break;default:d=!0;}if(d)switch(f){case ru:l+=v;break;case nu:o&&(p+=v);}}return l},noConflict:function(){return this===ou.v&&(ou.v=cu),this},version:"1.4.0"};function su(e,u){this._wrappedValue=e,this._explicitChain=u}function lu(e){return new su(e,!1)}return su.prototype.value=function(){return this._wrappedValue},su.prototype.valueOf=function(){return this.value()},su.prototype.toJSON=function(){return this.value()},su.prototype.toString=function(){return String(this.value())},su.prototype.chain=function(){return new su(this._wrappedValue,!0)},su.prototype.thru=function(e){return"function"==typeof e?new su(e(this._wrappedValue),this._explicitChain):this},su.prototype._explicitChain=!0,Object.keys(fu).forEach(function(e){var u;su.prototype[e]=(u=fu[e],function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];var t=u.apply(void 0,[this._wrappedValue].concat(r));return this._explicitChain||"string"==typeof t?new su(t,this._explicitChain):t})}),(Object.assign||function(e){for(var u=1;u<arguments.length;u++){var r=arguments[u];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e})(lu,fu,{chain:function(e){return new su(e,!0)}}),lu});var nb=function(){function e(){jo(this,e)}return ko(e,null,[{key:"InjectIntoActor",value:function(t,a,n){console.assert(a,a),t.vals.text={},t.vals.text.texture=a,t.vals.text.layer=n,t.vals.text.displayedText=null,t.vals.text.inLayerDepth=0,t.vals.components[e.Name]=!0,t.vals.visualBase=t.vals.text}},{key:"SetText",value:function(e,t){e.vals.text.displayedText=t,e.baked&&(e.displayed.text=t)}},{key:"SetTextWithZeroPad",value:function(e,t,a){if(e.vals.text.displayedText=t,e.baked){var $gqyU$$interop$default=_a(pf);var n=$gqyU$$interop$default.d.padLeft(t,a,"0");e.displayed.text=n}}},{key:"Bake",value:function(e){var t=ea.InBakeGetSceneFromLayerCfg(e),a=e.vals.text.displayedText;a||(a="0000");var n=t.make.bitmapText({x:0,y:0,font:e.vals.text.texture,text:a,add:!1},!1);ea.InBakeAddDisplayedAndSetSelfRef(e,n),ea.SynchDisplayedToSavedTransformPosition(e)}},{key:"SetOriginMiddle",value:function(e){e.displayed.setOrigin(.5,.5)}},{key:"SetOrigin",value:function(e,t,a){e.displayed.setOrigin(t,a)}},{key:"PostBake",value:function(e){}},{key:"Cleanup",value:function(e){}},{key:"Name",get:function(){return"BitmapText"}}]),e}();function lo(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Oh(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function mo(e,n,t){return n&&Oh(e.prototype,n),t&&Oh(e,t),e}var qf=function(){function e(){lo(this,e)}return mo(e,null,[{key:"InjectIntoActor",value:function(n,t,a,o){n.vals.zone={},n.vals.zone.layer=t,n.vals.zone.inLayerDepth=0,n.vals.zone.width=a,n.vals.zone.height=o,n.vals.components[e.Name]=!0,n.vals.visualBase=n.vals.zone}},{key:"Bake",value:function(e){var n=ea.InBakeGetSceneFromLayerCfg(e).make.zone({x:0,y:0,width:e.vals.zone.width,height:e.vals.zone.height,add:!1},!1);ea.InBakeAddDisplayedAndSetSelfRef(e,n),ea.SynchDisplayedToSavedTransformPosition(e)}},{key:"PostBake",value:function(e){}},{key:"Cleanup",value:function(e){}},{key:"Name",get:function(){return"ZoneComponent"}}]),e}();function no(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Ph(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function oo(e,n,t){return n&&Ph(e.prototype,n),t&&Ph(e,t),e}var rf=function(){function e(){no(this,e)}return oo(e,null,[{key:"InjectIntoActor",value:function(n,t,a){Ha.CreateTriggerIfNotExisting(n,t),n.vals.actions.triggerOn[t].push({name:e.Name,data:a}),n.vals.actions.dict[e.Name]=!0}},{key:"OnAct",value:function(e,n){var t=JSON.parse(JSON.stringify(n.data));bb.tweenScaleTo(e,t)}},{key:"Name",get:function(){return"TweenScaleToAction"}}]),e}();function po(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qh(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function qo(e,t,n){return t&&Qh(e.prototype,t),n&&Qh(e,n),e}var pd="TweenPositionByDeltaToAction",ro="TweenPositionByDeltaToAction";var Kc=function(){function e(){po(this,e)}return qo(e,null,[{key:"InjectIntoActor",value:function(e,t,n){Ha.CreateTriggerIfNotExisting(e,t),e.vals.actions.triggerOn[t].push({name:pd,data:n}),e.vals.actions.dict[pd]=!0}},{key:"SetFromData",value:function(e,t){Ha.GenericSetFromData(pd,e,t)}},{key:"OnAct",value:function(e,t){var n=JSON.parse(JSON.stringify(t.data));bb.tweenPositionByDeltaTo(e,n)}},{key:"Name",get:function(){return pd}}]),e}();function so(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rh(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function to(e,t,n){return t&&Rh(e.prototype,t),n&&Rh(e,n),e}var Lc=function(){function e(){so(this,e)}return to(e,null,[{key:"InjectIntoActor",value:function(t,n,a){console.assert(n,n),t.vals.sprite={},t.vals.sprite.texture=n,t.vals.sprite.layer=a,t.vals.sprite.inLayerDepth=0,t.vals.components[e.Name]=!0,t.vals.visualBase=t.vals.sprite}},{key:"Bake",value:function(e){var t=ea.InBakeGetSceneFromLayerCfg(e).make.sprite({x:0,y:0,key:e.vals.sprite.texture,add:!1},!1);ea.InBakeAddDisplayedAndSetSelfRef(e,t),ea.SynchDisplayedToSavedTransformPosition(e)}},{key:"PostBake",value:function(e){}},{key:"Cleanup",value:function(e){}},{key:"Name",get:function(){return"Sprite"}}]),e}();var Fb=800,uo=function(){function e(){Dh(this,e)}return Fh(e,[{key:"mixTweenPositionYoYo",value:function(r,t,n){var o={_x:0,_y:20,_d:Fb,ease:"Quadratic.In"};e.SmashDefaultPhaserConfigWithOverrides(o,n),mf.InjectIntoActor(r,t,o)}},{key:"mixTweenPositionByDeltaFrom_ScreenTop",value:function(r,t,n){var o={_x:0,_y:-500,_d:Fb};return e.SmashDefaultPhaserConfigWithOverrides(o,n),Jc.InjectIntoActor(r,t,o),r}},{key:"mixTweenPositionByDeltaTo_ScreenTop",value:function(r,t,n){var o={_x:0,_y:-500,_d:Fb};return e.SmashDefaultPhaserConfigWithOverrides(o,n),Kc.InjectIntoActor(r,t,o),r}},{key:"mixTweenPositionByDeltaFrom_ScreenBottom",value:function(r,t,n){var o={_x:0,_y:500,_d:Fb};return e.SmashDefaultPhaserConfigWithOverrides(o,n),Jc.InjectIntoActor(r,t,o),r}},{key:"mixTweenPositionByDeltaTo_ScreenBottom",value:function(r,t,n){var o={_x:0,_y:500,_d:Fb};return e.SmashDefaultPhaserConfigWithOverrides(o,n),Kc.InjectIntoActor(r,t,o),r}},{key:"mixTweenAlphaTo",value:function(r,t,n){var o={alpha:1,_d:Fb};return e.SmashDefaultPhaserConfigWithOverrides(o,n),$b.InjectIntoActor(r,t,o),r}},{key:"mixTweenScaleTo",value:function(r,t,n,o,i,a){var $={_s:o,_d:Fb,yoyo:i,repeat:a};return e.SmashDefaultPhaserConfigWithOverrides($,n),rf.InjectIntoActor(r,t,$),r}}],[{key:"SmashDefaultPhaserConfigWithOverrides",value:function(e,r){for(var t in r)"y"!=t&&"x"!=t&&"d"!=t||console.warn("Reserved list keyword for tween used as a key: ",t),e[t]=r[t]}}]),e}(),vo=new uo,da=function(){function e(){Dh(this,e)}return Fh(e,null,[{key:"GetActionMixerWithValues",value:function(){return vo}},{key:"MixZoneActor",value:function(e,r,t,n,o,i,a){var $;return $=e||Ea.GetEmptyActor(),ya.InjectIntoActor($,r,t),qf.InjectIntoActor($,i,n,o),ea.SetInLayerDepth($,a),nf.InjectIntoActor($),$}},{key:"MixSpriteActor",value:function(e,r,t,n,o,i){var a;return console.assert(n),a=e||Ea.GetEmptyActor(),ya.InjectIntoActor(a,r,t),Lc.InjectIntoActor(a,n,o),ea.SetInLayerDepth(a,i),a}},{key:"MixImageActor",value:function(e,r,t,n,o,i){var a;return a=e||Ea.GetEmptyActor(),ya.InjectIntoActor(a,r,t),ab.InjectIntoActor(a,n,o),ea.SetInLayerDepth(a,i),a}},{key:"MixFontActor",value:function(e,r,t,n,o,i){var a;return a=e||Ea.GetEmptyActor(),ya.InjectIntoActor(a,r,t),nb.InjectIntoActor(a,n,o),ea.SetInLayerDepth(a,i),a}},{key:"MixSpineObject",value:function(e,r,t,n,o,i,a,$){var c;return c=e||Ea.GetEmptyActor(),ya.InjectIntoActor(c,r,t),Eb.InjectIntoActor(c,n,o,i,a),ea.SetInLayerDepth(c,$),c}},{key:"MixSpineAnimation",value:function(e){ob.InjectIntoActor(e),ob.EnableListenerCallbacks(e)}},{key:"MixSpineOneTimeAnimationAndDispose",value:function(e,r){ob.InjectIntoActor(e),ob.EnableListenerCallbacks(e);var t={};return t[r]=kh,_d.InjectIntoActor(e,t),e}}]),e}();var sf={},wo="VisualBaseComponent";var xo="VisualBaseComponent",ea=function(){function e(){mn(this,e)}return nn(e,null,[{key:"SetFromData",value:function(a,l){void 0!==l.scale&&e.SetScale(a,l.scale),void 0!==l.layer&&e.SetLayer(a,l.layer)}},{key:"SynchDisplayedToSavedTransformPosition",value:function(e){e.vals.x&&(e.displayed.x=e.vals.x),e.vals.y&&(e.displayed.y=e.vals.y)}},{key:"SetInLayerDepth",value:function(e,a){console.assert(e,"param:pActor is: ",e),console.assert(void 0!==e,"param:pInLayerDepth is: ",a),e.vals.visualBase.inLayerDepth=a,e.baked&&console.log("TODO ALLOW ACTOR TO CHANGE DEPTH AFTER BAKE")}},{key:"SetAlpha",value:function(e,a){e.vals.visualBase.alpha=a,e.baked&&e.displayed.setAlpha(e.vals.visualBase.alpha)}},{key:"SetLayer",value:function(e,a){e.vals.visualBase.layer=a}},{key:"SetAngle",value:function(e,a){e.vals.visualBase.angle=a,e.baked&&e.displayed.setAngle(e.vals.visualBase.angle)}},{key:"SetScale",value:function(e,a){e.vals.visualBase.scale=a,e.baked&&e.displayed.setScale(e.vals.visualBase.scale)}},{key:"SetVisible",value:function(e,a){e.vals.visualBase.visible=a,e.baked&&e.displayed.setVisible(e.vals.visualBase.visible)}},{key:"SetDisplaySize",value:function(e,a,l){e.vals.visualBase.displayWidth=a,e.vals.visualBase.displayHeight=l,e.baked&&(e.displayed.displayWidth=a,e.displayed.displayHeight=l)}},{key:"SetFlipX",value:function(e,a){e.vals.visualBase.flipX=a,e.baked&&(e.vals.components[Eb.Name]?e.displayed.scaleX=a?-1:1:e.displayed.setFlipX(a))}},{key:"InBakeAddDisplayedAndSetSelfRef",value:function(e,a){e.displayed=a;var l=cf[e.vals.visualBase.layer];ra.GetLayerContainerLite(l,e.vals.visualBase.inLayerDepth).add(e.displayed),e.displayed.refSelfActor=e,null!=e.vals.visualBase.alpha&&e.displayed.setAlpha(e.vals.visualBase.alpha),null!=e.vals.visualBase.displayWidth&&null!=e.vals.visualBase.displayHeight&&(e.displayed.displayWidth=e.vals.visualBase.displayWidth,e.displayed.displayHeight=e.vals.visualBase.displayHeight),null!=e.vals.visualBase.angle&&e.displayed.setAngle(e.vals.visualBase.angle),null!=e.vals.visualBase.scale&&e.displayed.setScale(e.vals.visualBase.scale),null!=e.vals.visualBase.visible&&e.displayed.setVisible(e.vals.visualBase.visible),null!=e.vals.visualBase.flipX&&(e.vals.components[Eb.Name]?e.vals.visualBase.flipX?e.displayed.scaleX=-1:e.displayed.scaleX=1:e.displayed.setFlipX(e.vals.visualBase.flipX))}},{key:"InBakeGetSceneFromLayerCfg",value:function(e){var a=cf[e.vals.visualBase.layer],l=ra.GetSceneNameByLayerName(a.layerName),s=Oa.GetSceneByKey(l);return console.assert(s,"scene is: ",s," for args: ",e,a,l),s}},{key:"Cleanup",value:function(e){}},{key:"ReparentToLayer",value:function(e,a){var l=cf[e.vals.visualBase.layer],s=ra.GetLayerContainerLite(l,e.vals.visualBase.inLayerDepth);if(e.displayed.scene==s.scene){var i=e.displayed.parentContainer.x,n=e.displayed.parentContainer.y;e.vals.visualBase.layer=a,e.displayed.x+=ra.GetValueScaledByReverseScreenScale(i-s.x),e.displayed.y+=ra.GetValueScaledByReverseScreenScale(n-s.y),s.add(e.displayed)}else console.warn("DONT REPARENT OBJECT BETWEEN LAYERS THAT ARE ON DIFFERENT SCENES, ABORTING")}},{key:"GetActorFromDisplayObject",value:function(e){return e.refSelfActor}},{key:"BringToTop",value:function(e){e.displayed.parentContainer.bringToTop(e.displayed)}},{key:"SetFlipY",value:function(e,a){e.displayed.setFlipY(a)}},{key:"ChangeOrigin",value:function(e,a,l){e.displayed.setOrigin(a,l)}},{key:"GetDisplayWidth",value:function(e){return e.displayed.displayWidth}},{key:"GetDisplayHeight",value:function(e){return e.displayed.displayHeight}},{key:"ResizeWidth",value:function(e,a){e.displayed.displayWidth=a}},{key:"SetScaleX",value:function(e,a){e.displayed.setScale(a,e.displayed.scaleY)}},{key:"SetScaleY",value:function(e,a){e.displayed.setScale(e.displayed.scaleX,a)}},{key:"GetPosWithParentOffset",value:function(e){return{x:e.displayed.x+e.displayed.parentContainer.x,y:e.displayed.y+e.displayed.parentContainer.y}}},{key:"GetEntityLayerToWorldOffset",value:function(e){return{x:e.displayed.parentContainer.x,y:e.displayed.parentContainer.y}}},{key:"MoveByHalfOwnSizeInDir",value:function(e,a,l){return e.displayed.x=e.displayed.x+e.displayed.displayWidth/2*a,e.displayed.y=e.displayed.y+e.displayed.displayHeight/2*l,e}},{key:"MoveByOwnSizeInDir",value:function(e,a,l){return e.displayed.x=e.displayed.x+e.displayed.displayWidth*a,e.displayed.y=e.displayed.y+e.displayed.displayHeight*l,e}},{key:"MoveByXY",value:function(e,a,l){return e.displayed.x+=a,e.displayed.y+=l,e}},{key:"MoveToXY",value:function(e,a,l){return console.assert(!isNaN(a),"pX is: ",a),console.assert(!isNaN(l),"pY is: ",l),e.displayed.x=a,e.displayed.y=l,e}},{key:"GetBounds",value:function(e){if(Eb.Has(e)){sf[e.vals.spine.layer]||(console.log("DOESNT HAVE BOUND HELPER"),sf[e.vals.spine.layer]=da.MixZoneActor(null,0,0,180,180,e.vals.spine.layer,0).bake());var a=sf[e.vals.spine.layer],l=e.displayed.getBounds();return e.vals.spine.maxWidth<l.size.x&&(e.vals.spine.maxWidth=l.size.x),e.vals.spine.maxHeight<l.size.y&&(e.vals.spine.maxHeight=l.size.y),a.displayed.x=e.displayed.x,a.displayed.y=e.displayed.y,a.displayed.body.setSize(e.vals.spine.maxWidth,e.vals.spine.maxHeight,!0),a.displayed.getBounds()}return e.displayed.getBounds()}},{key:"IsActorOnScreen",value:function(a){var l=e.GetBounds(a),s=a.displayed.scene.cameras.main.worldView,i=new Phaser.Geom.Rectangle(s.x+Math.abs(ra.GetScreenData().relsvg.left),s.y,s.width,s.height),n=new Phaser.Geom.Rectangle(s.x,s.y,s.width,s.height),t=Phaser.Geom.Rectangle.ContainsRect(i,l);return t||(t=!0,l.y+l.height<i.y&&(t=!1),l.y>i.y+i.height&&(t=!1),l.x+l.width<i.x&&(t=!1),l.x-l.width>n.x+n.width&&(t=!1)),t}},{key:"Name",get:function(){return xo}}]),e}();var ob=function(){function n(){kn(this,n)}return ln(n,null,[{key:"InjectIntoActor",value:function(a,e){a.vals.animation={},a.vals.animation.type="spine",a.vals.animation.cur=e,a.vals.components[n.Name]=!0}},{key:"Has",value:function(a){return!!a.vals.components[n.Name]}},{key:"SetAnimation",value:function(a,e,i){n.Has(a)?a.vals.animation.cur!=e&&(a.vals.animation.cur=e,i&&null!=i.loop?a.displayed.setAnimation(0,e,i.loop):a.displayed.setAnimation(0,e,!0)):console.warn("NO ANIMATION COMPONENT")}},{key:"GetAnimationName",value:function(n){return n.vals.animation.cur}},{key:"EnableListenerCallbacks",value:function(n){n.vals.animation.callbacksEnabled=!0}},{key:"Bake",value:function(n){}},{key:"PostBake",value:function(n){if(n.vals.animation.cur||(n.vals.animation.cur=n.vals.spine.baseAnimation),n.vals.animation.callbacksEnabled){var a=n.displayed;a.state.addListener({complete:function(n){ea.GetActorFromDisplayObject(this).triggerActions($d,{animationName:n.animation.name})}.bind(a)})}}},{key:"Cleanup",value:function(n){}},{key:"Name",get:function(){return"SpineAnimation"}}]),n}();var Pa=function(){function a(){hn(this,a)}return jn(a,null,[{key:"Bake",value:function(a){}},{key:"PostBake",value:function(a){}},{key:"Cleanup",value:function(a){}},{key:"ChangeAnimation",value:function(a,e,n){console.assert(a,"BaseAnimationComponent pActor is: ",a),"texture_swap"==a.vals.animation.type&&(console.assert(a.vals.animation.data[e],"No Data at key: ",e,a.vals.animation.data),a.vals.animation.data[e].texture?a.displayed.setTexture(a.vals.animation.data[e].texture):a.displayed.setTexture(a.vals.animation.data[e])),"spine"==a.vals.animation.type&&ob.SetAnimation(a,e,n)}},{key:"Name",get:function(){return"BaseAnimationComponent"}}]),a}();var qd=function(){function n(){fn(this,n)}return gn(n,null,[{key:"InjectIntoActor",value:function(a,e,i,t){Ha.CreateTriggerIfNotExisting(a,e);var r={animationKey:i,animationData:t};a.vals.actions.triggerOn[e].push({name:n.Name,data:r}),a.vals.actions.dict[n.Name]=!0}},{key:"OnAct",value:function(n,a,e){Pa.ChangeAnimation(n,a.data.animationKey,a.data.animationData)}},{key:"Name",get:function(){return"ChangeAnimation"}}]),n}();function yo(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function Sh(a,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function zo(a,e,t){return e&&Sh(a.prototype,e),t&&Sh(a,t),a}function Th(a,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(a,r.key,r)}}function Ao(a,e,n){return e&&Th(a.prototype,e),n&&Th(a,n),a}function Uh(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var Bo=function a(){Uh(this,a),this.commands={}},tf=new Bo,Fa=function(){function a(){Uh(this,a)}return Ao(a,null,[{key:"RegisterCommand",value:function(a,e){tf.commands[a]=e}},{key:"RunCommand",value:function(a,e){console.assert(tf.commands[a],"no command key at: ",a),tf.commands[a].run(e)}}]),a}();var Vh=function(){function a(){yo(this,a)}return zo(a,null,[{key:"InjectIntoActor",value:function(e,t,n,o){Ha.CreateTriggerIfNotExisting(e,t);var r={commandData:o,commandName:n};e.vals.actions.triggerOn[t].push({name:a.Name,data:r}),e.vals.actions.dict[a.Name]=!0}},{key:"OnAct",value:function(a,e,t){Fa.RunCommand(e.data.commandName,e.data.commandData)}},{key:"Name",get:function(){return"CallGlobalCommandAction"}}]),a}();function Co(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Wh(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function Do(e,r,n){return r&&Wh(e.prototype,r),n&&Wh(e,n),e}var Xh=function(){function e(){Co(this,e)}return Do(e,null,[{key:"InjectIntoActor",value:function(r,n,t){Ha.CreateTriggerIfNotExisting(r,n),r.vals.actions.triggerOn[n].push({name:e.Name,data:t}),r.vals.actions.dict[e.Name]=!0}},{key:"OnAct",value:function(e,r,n){console.log(e,r,n)}},{key:"Name",get:function(){return"Log"}}]),e}();function Eo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fo(e,t,r){return t&&Yh(e.prototype,t),r&&Yh(e,r),e}var rd="RepositionByHalfOwnSizeInDirAction",Go="RepositionByHalfOwnSizeInDirAction";var Gb=function(){function e(){Eo(this,e)}return Fo(e,null,[{key:"InjectIntoActor",value:function(e,t,r,n){Ha.CreateTriggerIfNotExisting(e,t);var a={dirX:r,dirY:n};e.vals.actions.triggerOn[t].push({name:rd,data:a}),e.vals.actions.dict[rd]=!0}},{key:"SetFromData",value:function(e,t){Ha.GenericSetFromData(rd,e,t)}},{key:"OnAct",value:function(e,t){ea.MoveByHalfOwnSizeInDir(e,t.data.dirX,t.data.dirY)}},{key:"Name",get:function(){return rd}}]),e}();function Ho(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function Zh(e,a){for(var n=0;n<a.length;n++){var t=a[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function Io(e,a,n){return a&&Zh(e.prototype,a),n&&Zh(e,n),e}var $h=function(){function e(){Ho(this,e)}return Io(e,null,[{key:"InjectIntoActor",value:function(a,n,t,r){Ha.CreateTriggerIfNotExisting(a,n),a.vals.actions.triggerOn[n].push({name:e.Name,data:{f:t,payload:r}}),a.vals.actions.dict[e.Name]=!0}},{key:"OnAct",value:function(e,a,n){a.data.f&&a.data.f(a.data.payload)}},{key:"Name",get:function(){return"RunPayloadFunctionAction"}}]),e}();function Jo(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _h(e,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ko(e,r,o){return r&&_h(e.prototype,r),o&&_h(e,o),e}function ai(o,r){for(var a=0;a<r.length;a++){var e=r[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,e.key,e)}}function Lo(o,r,a){return r&&ai(o.prototype,r),a&&ai(o,a),o}function bi(o,r){if(!(o instanceof r))throw new TypeError("Cannot call a class as a function")}var Mo=function o(){bi(this,o),this.groups={},this.keys=[]},_b=new Mo,ci=function(){function o(){bi(this,o)}return Lo(o,null,[{key:"AddGroup",value:function(o,r){_b.groups[r]=o.add.group(),_b.keys.push(r)}},{key:"AddActor",value:function(r,a){if(Array.isArray(a))for(var e=0;e<a.length;e++)o._AddEntityToSingleGroup(r,a[e]);else o._AddEntityToSingleGroup(r,a)}},{key:"GetGroup",value:function(o){return console.assert(_b.groups[o],"no group of name: ",o),_b.groups[o]}},{key:"_AddEntityToSingleGroup",value:function(o,r){console.assert(_b.groups[r],"no group of name: ",r),_b.groups[r].add(o.displayed)}}]),o}();var di=function(){function e(){Jo(this,e)}return Ko(e,null,[{key:"InjectIntoActor",value:function(r,o){r.vals.groups||(r.vals.groups=[]);for(var n=0;n<o.length;n++)r.vals.groups.push(o[n]);r.vals.components[e.Name]=!0}},{key:"Bake",value:function(e){ci.AddActor(e,e.vals.groups)}},{key:"PostBake",value:function(e){}},{key:"Cleanup",value:function(e){}},{key:"Name",get:function(){return"Group"}}]),e}();function No(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function ei(e,n){for(var a=0;a<n.length;a++){var $=n[a];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(e,$.key,$)}}function Oo(e,n,a){return n&&ei(e.prototype,n),a&&ei(e,a),e}var Ra="SimpleInteractiveComponent",uf="SimpleInteractiveComponent",ac=function(){function e(){No(this,e)}return Oo(e,null,[{key:"InjectIntoActor",value:function(e){e.vals[Ra]={},e.vals[Ra].isPressed=!1,e.vals[Ra].enabled=!0,e.vals.components[uf]=!0}},{key:"InjectCallbackOnDown",value:function(e,n){e.vals[Ra].onDown=n}},{key:"InjectCallbackOnUp",value:function(e,n){e.vals[Ra].onUp=n}},{key:"InjectCallbackOnMove",value:function(e,n){e.vals[Ra].onMove=n}},{key:"Bake",value:function(e){e.displayed.setInteractive(),e.displayed.on("pointerdown",function(n,a,$,o){e.vals[Ra].onDown&&e.vals[Ra].onDown(e,{pointer:n,localX:a,localY:$,event:o})}),e.displayed.on("pointerup",function(n,a,$,o){e.vals[Ra].onUp&&e.vals[Ra].onUp(e,{pointer:n,localX:a,localY:$,event:o})}),e.displayed.on("pointermove",function(n,a,$,o){e.vals[Ra].onMove&&e.vals[Ra].onMove(e,{pointer:n,localX:a,localY:$,event:o})})}},{key:"PostBake",value:function(e){}},{key:"Cleanup",value:function(e){}},{key:"Has",value:function(e){return 1==e.vals.components[uf]}},{key:"SetEnabled",value:function(e,n){e.vals[Ra].enabled=n}},{key:"IsEnabled",value:function(e){return e.vals[Ra].enabled}},{key:"Name",get:function(){return uf}}]),e}();function Po(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fi(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Qo(t,e,o){return e&&fi(t.prototype,e),o&&fi(t,o),t}var bc={tap:"tap"};function gi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hi(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ii(e,t,a){return t&&hi(e.prototype,t),a&&hi(e,a),e}function Ro(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function ji(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function So(e,r,t){return r&&ji(e.prototype,r),t&&ji(e,t),e}var To=function(){function e(){Ro(this,e)}return So(e,null,[{key:"GetGUID",value:function(){return fh()}}]),e}();var vf="STATE_STATUS_UPDATING";var wf="STATE_STATUS_EXITING";var Mc="STATE_STATUS_INACTIVE";var ki="STATE_STATUS_ENTERING";function Uo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function li(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vo(e,t,i){return t&&li(e.prototype,t),i&&li(e,i),e}function mi(e,a){for(var t=0;t<a.length;t++){var n=a[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wo(e,a,t){return a&&mi(e.prototype,a),t&&mi(e,t),e}function ni(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}var Xo=function e(){ni(this,e),this.trackedTaps={},this.trackedButton=null,this.scene=null,this.globalPointerDownTime=0,this.swipe=null,this.keys={},this.cursorKeys=null,this.keyEvents={}},ja=new Xo,Sa=function(){function e(){ni(this,e)}return Wo(e,null,[{key:"SetGameScene",value:function(e){ja.scene=e,ja.cursorKeys=e.input.keyboard.createCursorKeys(),ja.keys.w=e.input.keyboard.addKey("w"),ja.keys.s=e.input.keyboard.addKey("s"),ja.keys.a=e.input.keyboard.addKey("a"),ja.keys.d=e.input.keyboard.addKey("d"),ja.keys.ArrowUp=e.input.keyboard.addKey("ArrowUp"),ja.keys.ArrowDown=e.input.keyboard.addKey("ArrowDown"),ja.keys.ArrowLeft=e.input.keyboard.addKey("ArrowLeft"),ja.keys.ArrowRight=e.input.keyboard.addKey("ArrowRight"),ja.keys["/"]=e.input.keyboard.addKey("/"),e.input.keyboard.on("keydown",function(e){ja.keyEvents[e.key]&&ja.keyEvents[e.key](e)})}},{key:"AddSwipe",value:function(e){ja.swipe&&ja.swipe.destroy(),ja.swipe=ja.scene.rexGestures.add.swipe({threshold:35,velocityThreshold:10,workaroundEnabled:1,workaroundMaxTime:1e3}),ja.swipe.on("swipe",e)}},{key:"AddTrackedButton",value:function(e){ja.trackedButton||(ja.trackedButton=e)}},{key:"HasTrackedButton",value:function(){return!!ja.trackedButton}},{key:"NullifyTrackedButton",value:function(e){ja.trackedButton==e&&(ja.trackedButton=null)}},{key:"ResetTap",value:function(e){var a=!1;ja.scene.input.activePointer.isDown&&(a=!0),ja.trackedTaps[e]={tapped:!1,waitingOnUntap:a}}},{key:"GetTapState",value:function(e){return!ra.IsRotationScreenDisplayed()&&ja.trackedTaps[e].tapped}},{key:"Update",value:function(e,a){var t=ja.scene.input.activePointer.isDown;for(var n in ja.trackedTaps){var r=ja.trackedTaps[n];r.waitingOnUntap?t||(r.waitingOnUntap=!1):r.tapped=t}!t&&ja.trackedButton&&(ja.trackedButton._fnWorkaroundOnDisplayOut(),ja.trackedButton=null),t?ja.globalPointerDownTime+=a:ja.globalPointerDownTime=0}},{key:"IsGlobalPointerDownMoreThanAFrame",value:function(){return ja.globalPointerDownTime>50}},{key:"IsInputActive",value:function(){return!ra.IsRotationScreenDisplayed()||null}},{key:"GetPointer",value:function(){return ja.scene.input.activePointer}},{key:"GetPointerIfNotPressingButton",value:function(){return 0==e.HasTrackedButton()?ja.scene.input.activePointer:null}},{key:"GetPointerIfNotPressingButtonAndDown",value:function(){return 0==e.HasTrackedButton()&&ja.scene.input.activePointer.isDown?ja.scene.input.activePointer:null}},{key:"GetPointerCoordinatesScaled",value:function(){return{x:ra.GetValueScaledByReverseScreenScale(ja.scene.input.activePointer.x),y:ra.GetValueScaledByReverseScreenScale(ja.scene.input.activePointer.y)}}},{key:"GetPointerCoordinatesScaledAndAdjustedByActorLayerOffset",value:function(e){var a=ea.GetEntityLayerToWorldOffset(e);return{x:ra.GetValueScaledByReverseScreenScale(ja.scene.input.activePointer.x)-ra.GetValueScaledByReverseScreenScale(a.x),y:ra.GetValueScaledByReverseScreenScale(ja.scene.input.activePointer.y)-ra.GetValueScaledByReverseScreenScale(a.y)}}},{key:"IsKeyFromListDown",value:function(e){for(var a=0;a<e.length;a++){if(ja.keys[e[a]].isDown)return!0}return!1}},{key:"AddKeyDown",value:function(e,a){if(Array.isArray(e))for(var t=0;t<e.length;t++){var n=e[t];ja.keyEvents[n]=a}else ja.keyEvents[e]=a}}]),e}();var cb=function(){function e(){Uo(this,e),this.scene=null,this.name=null,this.status=null,this.delayedFuncs=null,this.exitTimeDelayDefaultInMS=0,this.tickers=null}return Vo(e,[{key:"initState",value:function(e,t){this.scene=e,this.name=t,this.status=Mc,this.delayedFuncs=[],this.exitTimeDelayDefaultInMS=0,this.tickers={}}},{key:"me_Enter",value:function(){this.onEnterInstant(),this.markAsUpdating()}},{key:"me_Exit",value:function(){this.onExitInstant();var e=function(){this.onExitDelayed(),this._postExit()}.bind(this);la.AddDelayedFunctionToState(e,this.exitTimeDelayDefaultInMS,this.name)}},{key:"me_Update",value:function(e,t){for(var i in this.tickers){var n=this.tickers[i];n.cur<=n.max&&(n.cur+=t)}this.onUpdate(e,t)}},{key:"isInputForTapAndTickerValid",value:function(e,t){return!(0!=Sa.HasTrackedButton()||!this.isTickerOverMax(e)||!Sa.GetTapState(t))}},{key:"onUpdate",value:function(e,t){na.GetGameRemix().passEventOnUpdate(this,e,t)}},{key:"onEnterInstant",value:function(){na.GetGameRemix().passEventOnEnterInstant(this)}},{key:"onEnterDelayed",value:function(){}},{key:"onExitInstant",value:function(){na.GetGameRemix().passEventOnExitInstant(this)}},{key:"onExitDelayed",value:function(){na.GetGameRemix().passEventOnExitDelayed(this)}},{key:"_postExit",value:function(){this.markAsInactive()}},{key:"markAsUpdating",value:function(){this.status=vf}},{key:"markAsExiting",value:function(){this.status=wf}},{key:"markAsEntering",value:function(){this.status=ki}},{key:"markAsInactive",value:function(){this.status=Mc}},{key:"setExitDelayInMS",value:function(e){this.exitTimeDelayDefaultInMS=e}},{key:"getStateExitTimeInMs",value:function(){return console.assert(this.exitTimeDelayDefaultInMS,"State: "+this.name+" property: exitTimeDelayDefaultInMS is: ",this.exitTimeDelayDefaultInMS),this.exitTimeDelayDefaultInMS}},{key:"resetTicker",value:function(e,t){this.tickers[e]={cur:0,max:t}}},{key:"isTickerOverMax",value:function(e){return this.tickers[e].cur>=this.tickers[e].max}}]),e}();var Yo=function(){function e(){gi(this,e),this._states={},this._statesKeys=[],this._queuedStatesToEnter=[],this._queuedStatesToExit=[]}return ii(e,[{key:"AddState",value:function(e){ia._states[e.name]=e,ia._statesKeys.push(e.name)}},{key:"ExitState",value:function(e,t){var a=function(){var t=ia._states[e];if(t.delayedFuncs.length>0){for(var a=[],n=0;n<t.delayedFuncs.length;n++){var o=t.delayedFuncs[n];o.delay=0,o.delay<=0&&a.push(o)}if(a.length>0)for(var s=0;s<a.length;s++){var i=a[s],r=t.delayedFuncs.indexOf(i);t.delayedFuncs.splice(r,1),i.f()}}}.bind(this);ia._states[e].status!=wf&&ia._states[e].status!=Mc&&(a(),ia._MarkStateAsExiting(e),ia._states[e].me_Exit()),1==t&&a()}},{key:"_MarkStateAsExiting",value:function(e){console.assert(e,"MoonEngineStateSystem->markStateAsUpdating:: stateName is: ",e),ia._states[e].markAsExiting()}},{key:"_MarkStateAsInactive",value:function(e){console.assert(e,"MoonEngineStateSystem->markStateAsInactive:: stateName is: ",e),ia._states[e].markAsInactive()}},{key:"_MarkStateAsUpdating",value:function(e){console.assert(e,"MoonEngineStateSystem->markStateAsUpdating:: stateName is: ",e),ia._states[e].markAsUpdating()}},{key:"_MarkStateAsEntering",value:function(e){console.assert(e,"MoonEngineStateSystem->markStateAsUpdating:: stateName is: ",e),ia._states[e].markAsEntering()}}]),e}(),ia=new Yo,la=function(){function e(){gi(this,e)}return ii(e,null,[{key:"ExitAllStates",value:function(){for(var t=0;t<ia._statesKeys.length;t++){var a=ia._statesKeys[t];e.ExitState(a)}}},{key:"UpdateStates",value:function(e,t){for(var a=0;a<ia._statesKeys.length;a++){var n=ia._statesKeys[a],o=ia._states[n];if(o.delayedFuncs.length>0){for(var s=[],i=0;i<o.delayedFuncs.length;i++){var r=o.delayedFuncs[i];r.delay-=t,r.delay<=0&&s.push(r)}if(s.length>0)for(var $=0;$<s.length;$++){var S=s[$],v=o.delayedFuncs.indexOf(S);o.delayedFuncs.splice(v,1),S.f()}}o.status==vf&&o.me_Update(e,t)}}},{key:"ExitQueuedStates",value:function(){if(ia._queuedStatesToExit.length>0){for(var e=0;e<ia._queuedStatesToExit.length;e++){var t=ia._queuedStatesToExit[e];ia.ExitState(t)}ia._queuedStatesToExit=[]}if(ia._queuedStatesToEnter.length>0)for(var a=0;a<ia._queuedStatesToEnter.length;a++){var n=ia._queuedStatesToEnter[a];console.assert(ia._states[n],"state of name: ",n," isn't defined in state system"),ia._states[n].status==wf&&ia.ExitState(n,1)}}},{key:"EnterQueuedStates",value:function(){if(ia._queuedStatesToEnter.length>0){for(var e=0;e<ia._queuedStatesToEnter.length;e++){var t=ia._queuedStatesToEnter[e];ia._states[t].status==Mc&&(ia._MarkStateAsEntering(t),ia._states[t].me_Enter())}ia._queuedStatesToEnter=[]}}},{key:"AddDelayedFunctionToState",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;ia._states[a].status==Mc&&console.warn("unintended AddDelayedFunctionToState, because state is inactive!",a,n),console.assert(a),console.assert(ia._states[a],"StateName: "+a+" isn't valid state name - isnt't defined or there is a typo"),ia._states[a].delayedFuncs.push({f:e,delay:t,guid:To.GetGUID(),tag:n})}},{key:"EnterState",value:function(e){console.assert(e,"MoonEngineStateSystem->EnterState:: stateName is: ",e),ia._queuedStatesToEnter.indexOf(e)<0&&ia._queuedStatesToEnter.push(e)}},{key:"ExitState",value:function(e){console.assert(e,"MoonEngineStateSystem->ExitState:: stateName is: ",e),ia._queuedStatesToExit.indexOf(e)<0&&ia._queuedStatesToExit.push(e)}},{key:"ResetState",value:function(e){console.assert(e,"MoonEngineStateSystem->ResetState:: stateName is: ",e),this.ExitState(e),this.EnterState(e)}},{key:"IsStateActive",value:function(e){return console.assert(e,"MoonEngineStateSystem->IsStateActive:: stateName is: ",e),ia._states[e].status==ki||ia._states[e].status==vf}},{key:"GetStateStatus",value:function(e){return console.assert(e,"MoonEngineStateSystem->GetStateStatus:: stateName is: ",e),ia._states[e].status}},{key:"GetStateExitTimeInMs",value:function(e){return ia._states[e].getStateExitTimeInMs()}},{key:"GetState",value:function(e){return console.assert(e,"MoonEngineStateSystem->GetState:: stateName is: ",e),ia._states[e]}},{key:"DefineState",value:function(e,t,a){console.assert(a instanceof cb,"MoonEngineStateSystem::DefineState-> aStateImpl is not of GameState subclass"),a.initState(e,t),ia.AddState(a)}}]),e}();var Hb={BASIC:"basic"};var Zo={basic:function(){return{over:function(t){bb.tweenScaleTo(t,{_s:1.1,_d:100,ifTweens:"stop"})},out:function(t){bb.tweenScaleTo(t,{_s:1,_d:100,ifTweens:"stop"})},down:function(t){bb.tweenScaleTo(t,{_s:.9,_d:100,ifTweens:"stop"})},up:function(t){bb.tweenScaleTo(t,{_s:1,_d:100,ifTweens:"stop"})}}}};var oi="ACT_BUTTON_DID_TOGGLE";var $o="ACT_BUTTON_DISABLED";var xf="ACT_BUTTON_TOGGLED_OFF";var yf="ACT_BUTTON_TOGGLED_ON";var za=function(){function t(){Po(this,t)}return Qo(t,null,[{key:"InjectIntoActor",value:function(e,o,n){e.vals.button={},e.vals.button.requiredState=o,e.vals.button.visInteractionKey=n,e.vals.button.commands={},e.vals.button.pressed=!1,e.vals.button.type="simple",e.vals.button.disabled=!1,e.vals.components[t.Name]=!0}},{key:"InjectCommandOnUp",value:function(t,e,o){t.vals.button.commands.up={},t.vals.button.commands.up.commandKey=e,t.vals.button.commands.up.commandPayload=o}},{key:"SetAsToggle",value:function(t){t.vals.button.type="toggle",t.vals.button.toggleState=0,t.vals.button.toggle={},t.vals.button.toggle.positive={},t.vals.button.toggle.negative={}}},{key:"InjectSwapFromPositiveStateActionOnUp",value:function(t,e,o){t.vals.button.toggle.positive.up={},t.vals.button.toggle.positive.up.commandKey=e,t.vals.button.toggle.positive.up.commandPayload=o}},{key:"InjectSwapFromNegativeStateActionOnUp",value:function(t,e,o){t.vals.button.toggle.negative.up={},t.vals.button.toggle.negative.up.commandKey=e,t.vals.button.toggle.negative.up.commandPayload=o}},{key:"SetDisabled",value:function(t,e){e&&(t.triggerActions($o),t.displayed.disableInteractive())}},{key:"SetToggleStateWithoutTriggeringActions",value:function(e,o){console.assert(void 0!==o,"button toggle state param is: ",o),console.assert(null!==o,"button toggle state param is: ",o);var n=o;!0===n&&(n=1),!1===n&&(n=0),-1===n&&(n=0),e.vals.button.toggleState=n,t.SynchToggleState(e)}},{key:"SynchToggleState",value:function(t){1==t.vals.button.toggleState?(t.vals.button.commands.up={},t.vals.button.toggle.positive.up&&(t.vals.button.commands.up.commandKey=t.vals.button.toggle.positive.up.commandKey,t.vals.button.commands.up.commandPayload=t.vals.button.toggle.positive.up.commandPayload)):0==t.vals.button.toggleState?(t.vals.button.commands.up={},t.vals.button.toggle.negative.up&&(t.vals.button.commands.up.commandKey=t.vals.button.toggle.negative.up.commandKey,t.vals.button.commands.up.commandPayload=t.vals.button.toggle.negative.up.commandPayload)):console.warn("toggle button invalid state: ",t.vals.button.toggleState)}},{key:"GetToggleState",value:function(t){return t.vals.button.toggleState}},{key:"Bake",value:function(e){var o=null;e.vals.button.visInteractionKey&&(o=Zo[e.vals.button.visInteractionKey]());var n=e.vals.button.commands;e.displayed.setInteractive(),e.displayed.on("pointerup",function(a,l,i,r){if(!ra.IsRotationScreenDisplayed()&&la.IsStateActive(this.refSelfActor.vals.button.requiredState)&&e.vals.button.pressed){e.vals.button.pressed=!1,o.up(this.refSelfActor),Sa.NullifyTrackedButton(e);var u=gb.IsMuted();0==u&&na.GetGameRemix().playAudio(bc.tap),n&&n.up&&n.up.commandKey&&Fa.RunCommand(n.up.commandKey,n.up.commandPayload),"toggle"==e.vals.button.type&&(1==e.vals.button.toggleState?(e.vals.button.toggleState=0,e.triggerActions(xf)):(e.vals.button.toggleState=1,e.triggerActions(yf)),t.SynchToggleState(e),e.triggerActions(oi)),u&&0==gb.IsMuted()&&na.GetGameRemix().playAudio(bc.tap)}}),e.displayed.on("pointerdown",function(){ra.IsRotationScreenDisplayed()||la.IsStateActive(this.refSelfActor.vals.button.requiredState)&&(e.vals.button.pressed=!0,Sa.AddTrackedButton(e),o.down(this.refSelfActor),n&&n.down&&Fa.RunCommand(n.down.commandKey,n.down.commandPayload))}),e.displayed.on("pointerover",function(){ra.IsRotationScreenDisplayed()||e.vals.button.pressed||la.IsStateActive(this.refSelfActor.vals.button.requiredState)&&(Sa.IsGlobalPointerDownMoreThanAFrame()||(o.over(this.refSelfActor),n&&n.over&&Fa.RunCommand(n.over.commandKey,n.over.commandPayload)))}),e.displayed.on("pointerout",function(){ra.IsRotationScreenDisplayed()||e.vals.button.pressed||la.IsStateActive(this.refSelfActor.vals.button.requiredState)&&(o.out(this.refSelfActor),n&&n.out&&Fa.RunCommand(n.out.commandKey,n.out.commandPayload))}),e._fnWorkaroundOnDisplayOut=function(){e.vals.button.pressed=!1,o.out(e)}}},{key:"PostBake",value:function(t){"toggle"==t.vals.button.type&&(1==t.vals.button.toggleState?t.triggerActions(yf):t.triggerActions(xf),t.triggerActions(oi))}},{key:"Pause",value:function(){}},{key:"Unpause",value:function(){}},{key:"Cleanup",value:function(t){Sa.NullifyTrackedButton(t),t.displayed.removeInteractive(),t._fnWorkaroundOnDisplayOut=null}},{key:"Name",get:function(){return"Button"}}]),t}();function _o(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function pi(e,r){for(var a=0;a<r.length;a++){var s=r[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function ap(e,r,a){return r&&pi(e.prototype,r),a&&pi(e,a),e}var cc=function(){function e(){_o(this,e)}return ap(e,null,[{key:"InjectIntoActor",value:function(r,a,s,l){r.vals.progress={},r.vals.progress.maxValue=a,r.vals.progress.curValue=a,r.vals.progress.axisHorizontal=s,r.vals.progress.axisVertical=l,r.vals.components[e.Name]=!0}},{key:"SetMaxValue",value:function(e,r,a){e.vals.progress.maxValue=r,a&&(e.vals.progress.curValue=r)}},{key:"IsScaledtoZero",value:function(e){return e.vals.progress.curValue<=0}},{key:"GetCurValue",value:function(e){return e.vals.progress.curValue}},{key:"AddToCurValueAndUpdateVisual",value:function(r,a){r.vals.progress.curValue+=a,r.vals.progress.curValue>r.vals.progress.maxValue&&(r.vals.progress.curValue=r.vals.progress.maxValue),e._UpdateVisual(r)}},{key:"_UpdateVisual",value:function(e){var r=e.vals.progress.curValue/e.vals.progress.maxValue;e.vals.progress.axisHorizontal&&ea.SetScaleX(e,r),e.vals.progress.axisVertical&&ea.SetScaleY(e,r)}},{key:"SubstractFromCurValueAndUpdateVisual",value:function(r,a){r.vals.progress.curValue-=a,r.vals.progress.curValue<=0&&(r.vals.progress.curValue=0),e._UpdateVisual(r)}},{key:"Bake",value:function(e){}},{key:"PostBake",value:function(e){}},{key:"Cleanup",value:function(e){}},{key:"Name",get:function(){return"ProgressComponent"}}]),e}();function bp(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function qi(e,a){for(var n=0;n<a.length;n++){var r=a[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cp(e,a,n){return a&&qi(e.prototype,a),n&&qi(e,n),e}var zf=function(){function e(){bp(this,e)}return cp(e,null,[{key:"InjectIntoActor",value:function(a,n,r,u,l){a.vals["mm_"+n]={},a.vals["mm_"+n].cur=r,a.vals["mm_"+n].min=u,a.vals["mm_"+n].max=l,a.vals.components[e.Name]=!0}},{key:"GetValue",value:function(e,a){return e.vals["mm_"+a].cur}},{key:"SetCurValue",value:function(e,a,n){e.vals["mm_"+a].cur=n}},{key:"IncreaseValue",value:function(e,a,n){return e.vals["mm_"+a].cur=e.vals["mm_"+a].cur+n,e.vals["mm_"+a].cur>e.vals["mm_"+a].max&&(e.vals["mm_"+a].cur=e.vals["mm_"+a].max,!0)}},{key:"DecreaseValue",value:function(e,a,n){return e.vals["mm_"+a].cur=e.vals["mm_"+a].cur-n,e.vals["mm_"+a].cur<=e.vals["mm_"+a].min&&(e.vals["mm_"+a].cur=e.vals["mm_"+a].min,!0)}},{key:"SetCurValueToMin",value:function(e,a){e.vals["mm_"+a].cur=e.vals["mm_"+a].min}},{key:"SetCurValueToMax",value:function(e,a){e.vals["mm_"+a].cur=e.vals["mm_"+a].max}},{key:"Bake",value:function(e){}},{key:"PostBake",value:function(e){}},{key:"Cleanup",value:function(e){}},{key:"Name",get:function(){return"MinMaxValue"}}]),e}();function dp(e,l){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}function ri(e,l){for(var t=0;t<l.length;t++){var a=l[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ep(e,l,t){return l&&ri(e.prototype,l),t&&ri(e,t),e}function fp(t){return(fp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function si(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function hp(t,e,r){return e&&si(t.prototype,e),r&&si(t,r),t}function sd(t,e,r){return(sd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var o=ip(t,e);if(o){var n=Object.getOwnPropertyDescriptor(o,e);return n.get?n.get.call(r):n.value}})(t,e,r||t)}function ip(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ib(t)););return t}function jp(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kp(t,e)}function kp(t,e){return(kp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function lp(t){var e=op();return function(){var r,o=Ib(t);if(e){var n=Ib(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return mp(this,r)}}function mp(t,e){return!e||"object"!==fp(e)&&"function"!=typeof e?np(t):e}function np(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function op(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function Ib(t){return(Ib=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ti(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function qp(t,e,i){return e&&ti(t.prototype,e),i&&ti(t,i),t}var ui=Phaser.Utils.Objects.GetValue,Nc=function(){function t(e,i){pp(this,t),this.parent=e,this._isRunning=!1,this.tickingState=!1,this.setEventEmitter(ui(i,"eventEmitter",void 0)),this.setTickingMode(ui(i,"tickingMode",1))}return qp(t,[{key:"boot",value:function(){2!==this.tickingMode||this.tickingState||this.startTicking()}},{key:"shutdown",value:function(){this.destroyEventEmitter(),this.tickingState&&this.stopTicking()}},{key:"setTickingMode",value:function(t){"string"==typeof t&&(t=rp[t]),this.tickingMode=t}},{key:"startTicking",value:function(){this.tickingState=!0}},{key:"stopTicking",value:function(){this.tickingState=!1}},{key:"start",value:function(){return this.isRunning=!0,this}},{key:"pause",value:function(){return this.isRunning=!1,this}},{key:"resume",value:function(){return this.isRunning=!0,this}},{key:"stop",value:function(){return this.isRunning=!1,this}},{key:"complete",value:function(){this.isRunning=!1,this.emit("complete",this.parent,this)}},{key:"isRunning",get:function(){return this._isRunning},set:function(t){this._isRunning!==t&&(this._isRunning=t,1===this.tickingMode&&t!=this.tickingState&&(t?this.startTicking():this.stopTicking()))}}]),t}();Object.assign(Nc.prototype,Cc);var rp={no:0,lazy:1,always:2};var sp={setParent:function(e){return this.gameObject=e,this.scene=e.scene,this},setCascadeMode:function(e){return this.cascadeMode=e,this},bodySetVelocity:function(e,t){var a=this.gameObject.body,c=a.velocity.x,o=a.velocity.y;this.cascaseMode&&(e+=c,t+=o),e===c&&t===o||a.setVelocity(e,t)},bodySetAcceleration:function(e,t){var a=this.gameObject.body,c=a.acceleration.x,o=a.acceleration.y;this.cascaseMode&&(e+=c,t+=o),e===c&&t===o||a.setAcceleration(e,t)},bodySetGravity:function(e,t){var a=this.gameObject.body,c=a.gravity.x,o=a.gravity.y;this.cascaseMode&&(e+=c,t+=o),e===c&&t===o||a.setAcceleration(e,t)},bodySetAngularVelocity:function(e){var t=this.gameObject.body,a=t.angularVelocity;this.cascaseMode&&(e+=a),e!==a&&t.setAngularVelocity(e)},bodySetAngularAcceleration:function(e){var t=this.gameObject.body,a=t.angularAcceleration;this.cascaseMode&&(e+=a),e!==a&&t.setAngularAcceleration(e)}};var Af=Phaser.Utils.Objects.GetValue,Bf=function(t){jp(r,Nc);var e=lp(r);function r(t,o){var n;return gp(this,r),(n=e.call(this,t,o)).setParent(t),n.resetFromJSON(o),n.boot(),n}return hp(r,[{key:"resetFromJSON",value:function(t){return this.body||this.scene.physics.add.existing(this.gameObject,!1),this.setCascadeMode(Af(t,"cascade",!1)),this.setEnable(Af(t,"enable",!0)),this.setSpeed(Af(t,"speed",200)),this}},{key:"toJSON",value:function(){return{tickingMode:this.tickingMode}}},{key:"boot",value:function(){sd(Ib(r.prototype),"boot",this).call(this),this.gameObject.once&&this.gameObject.on("destroy",this.destroy,this)}},{key:"shutdown",value:function(){sd(Ib(r.prototype),"shutdown",this).call(this),this.gameObject=void 0,this.scene=void 0}},{key:"destroy",value:function(){this.shutdown()}},{key:"startTicking",value:function(){sd(Ib(r.prototype),"startTicking",this).call(this),this.scene.events.on("preupdate",this.preupdate,this)}},{key:"stopTicking",value:function(){sd(Ib(r.prototype),"stopTicking",this).call(this),this.scene&&this.scene.events.off("preupdate",this.preupdate,this)}},{key:"setEnable",value:function(t){return null==t&&(t=!0),this.enable=t,this}},{key:"setSpeed",value:function(t){return this.speed=t,this}},{key:"preupdate",value:function(t,e){if(!this.enable)return this.bodySetVelocity(0,0),this;var r=this.gameObject.rotation,o=this.speed*Math.cos(r),n=this.speed*Math.sin(r);return this.bodySetVelocity(o,n),this}},{key:"enable",get:function(){return this.isRunning},set:function(t){this.isRunning=t,t||this.bodySetVelocity(0,0)}}]),r}();Object.assign(Bf.prototype,sp);var vi=function(){function e(){dp(this,e)}return ep(e,null,[{key:"InjectIntoActor",value:function(l,t){l.vals.rexBullet={},l.vals.rexBullet.data=t,l.vals.rexBullet.enabledState=!0,l.vals.components[e.Name]=!0}},{key:"SetEnable",value:function(e,l){e.baked&&e.plugins.rexBullet.setEnable(l),e.vals.rexBullet.enabledState=l}},{key:"SetSpeed",value:function(e,l){e.vals.rexBullet.data.speed=l,e.baked&&(e.plugins.rexBullet.speed=l)}},{key:"GetSpeed",value:function(e){return e.plugins.rexBullet.speed}},{key:"Bake",value:function(e){e.plugins.rexBullet=new Bf(e.displayed,e.vals.rexBullet.data)}},{key:"PostBake",value:function(l){e.SetEnable(l,l.vals.rexBullet.enabledState)}},{key:"Cleanup",value:function(e){}},{key:"Name",get:function(){return"RexBullet"}}]),e}();function tp(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function wi(e,o){for(var t=0;t<o.length;t++){var n=o[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function up(e,o,t){return o&&wi(e.prototype,o),t&&wi(e,t),e}function vp(t){return(vp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function xp(t,e,r){return e&&xi(t.prototype,e),r&&xi(t,r),t}function Oc(t,e,r){return(Oc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=yp(t,e);if(n){var a=Object.getOwnPropertyDescriptor(n,e);return a.get?a.get.call(r):a.value}})(t,e,r||t)}function yp(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pb(t)););return t}function zp(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ap(t,e)}function Ap(t,e){return(Ap=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Bp(t){var e=Ep();return function(){var r,n=pb(t);if(e){var a=pb(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Cp(this,r)}}function Cp(t,e){return!e||"object"!==vp(e)&&"function"!=typeof e?Dp(t):e}function Dp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ep(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function pb(t){return(pb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hb=Phaser.Utils.Objects.GetValue,Fp=Phaser.Math.Distance.Between,yi=Phaser.Math.Linear,Gp=Phaser.Math.Angle.Between,zi=function(t){zp(r,Nc);var e=Bp(r);function r(t,n){var a;return wp(this,r),(a=e.call(this,t,n)).gameObject=t,a.scene=ed(t),a.resetFromJSON(n),a.boot(),a}return xp(r,[{key:"resetFromJSON",value:function(t){return this.isRunning=hb(t,"isRunning",!1),this.setEnable(hb(t,"enable",!0)),this.timeScale=hb(t,"timeScale",1),this.setSpeed(hb(t,"speed",400)),this.setRotateToTarget(hb(t,"rotateToTarget",!1)),this.targetX=hb(t,"targetX",0),this.targetY=hb(t,"targetY",0),this}},{key:"toJSON",value:function(){return{isRunning:this.isRunning,enable:this.enable,timeScale:this.timeScale,speed:this.speed,rotateToTarget:this.rotateToTarget,targetX:this.targetX,targetY:this.targetY,tickingMode:this.tickingMode}}},{key:"boot",value:function(){Oc(pb(r.prototype),"boot",this).call(this),this.gameObject.once&&this.gameObject.on("destroy",this.destroy,this)}},{key:"shutdown",value:function(){Oc(pb(r.prototype),"shutdown",this).call(this),this.gameObject=void 0,this.scene=void 0}},{key:"destroy",value:function(){this.shutdown()}},{key:"startTicking",value:function(){Oc(pb(r.prototype),"startTicking",this).call(this),this.scene.events.on("update",this.update,this)}},{key:"stopTicking",value:function(){Oc(pb(r.prototype),"stopTicking",this).call(this),this.scene&&this.scene.events.off("update",this.update,this)}},{key:"setEnable",value:function(t){return null==t&&(t=!0),this.enable=t,this}},{key:"setSpeed",value:function(t){return this.speed=t,this}},{key:"setRotateToTarget",value:function(t){return this.rotateToTarget=t,this}},{key:"moveTo",value:function(t,e){if("number"!=typeof t){var n=t;t=hb(n,"x",void 0),e=hb(n,"y",void 0)}return null==t||null==e?this:(this.targetX=t,this.targetY=e,Oc(pb(r.prototype),"start",this).call(this),this)}},{key:"update",value:function(t,e){if(!this.isRunning||!this.enable)return this;var r=this.gameObject,n=r.x,a=r.y,o=this.targetX,u=this.targetY;if(n===o&&a===u)return this.complete(),this;if(0===this.speed||0===e||0===this.timeScale)return this;var i,$,s=e*this.timeScale/1e3,c=this.speed*s,l=Fp(n,a,o,u);if(c<l){var f=c/l;i=yi(n,o,f),$=yi(a,u,f)}else i=o,$=u;return r.setPosition(i,$),this.rotateToTarget&&(r.rotation=Gp(n,a,i,$)),this}}]),r}();var Ai=function(){function e(){tp(this,e)}return up(e,null,[{key:"InjectIntoActor",value:function(o,t){o.vals.rexMoveTo={},o.vals.rexMoveTo.data=t,o.vals.components[e.Name]=!0}},{key:"Bake",value:function(e){e.plugins.rexMoveTo=new zi(e.displayed,e.vals.rexMoveTo.data)}},{key:"PostBake",value:function(e){}},{key:"SetSpeed",value:function(e,o){e.plugins.rexMoveTo.setSpeed(o)}},{key:"Cleanup",value:function(e){}},{key:"Name",get:function(){return"RexMoveToPlugin"}}]),e}();function Hp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bi(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ip(e,t,a){return t&&Bi(e.prototype,t),a&&Bi(e,a),e}function Jp(t){return(Jp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ci(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function Lp(t,e,r){return e&&Ci(t.prototype,e),r&&Ci(t,r),t}function Pc(t,e,r){return(Pc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var a=Mp(t,e);if(a){var s=Object.getOwnPropertyDescriptor(a,e);return s.get?s.get.call(r):s.value}})(t,e,r||t)}function Mp(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qb(t)););return t}function Np(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Op(t,e)}function Op(t,e){return(Op=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Pp(t){var e=Sp();return function(){var r,a=qb(t);if(e){var s=qb(this).constructor;r=Reflect.construct(a,arguments,s)}else r=a.apply(this,arguments);return Qp(this,r)}}function Qp(t,e){return!e||"object"!==Jp(e)&&"function"!=typeof e?Rp(t):e}function Rp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Sp(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function qb(t){return(qb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Tp={},Up=Math.PI/180,Vp=function($){return $*Up};Tp=Vp;var Wp={},Xp=180/Math.PI,Yp=function($){return $*Xp};Wp=Yp;var rb=Phaser.Utils.Objects.GetValue,Di=Phaser.Math.Wrap,Zp=Phaser.Math.Angle.Wrap,$p=Phaser.Math.Angle.Between,Ei=function(t){Np(r,Nc);var e=Pp(r);function r(t,a){var s;return Kp(this,r),(s=e.call(this,t,a)).gameObject=t,s.scene=ed(t),s.resetFromJSON(a),s.boot(),s}return Lp(r,[{key:"resetFromJSON",value:function(t){return this.isRunning=rb(t,"isRunning",!1),this.setEnable(rb(t,"enable",!0)),this.timeScale=rb(t,"timeScale",1),this.setSpeed(rb(t,"speed",180)),this.target=rb(t,"target",0),this.dir=rb(t,"dir",0),this}},{key:"toJSON",value:function(){return{isRunning:this.isRunning,timeScale:this.timeScale,speed:this.speed,target:this.target,dir:this.dir,tickingMode:this.tickingMode}}},{key:"boot",value:function(){Pc(qb(r.prototype),"boot",this).call(this),this.gameObject.once&&this.gameObject.on("destroy",this.destroy,this)}},{key:"shutdown",value:function(){Pc(qb(r.prototype),"shutdown",this).call(this),this.gameObject=void 0,this.scene=void 0}},{key:"destroy",value:function(){this.shutdown()}},{key:"startTicking",value:function(){Pc(qb(r.prototype),"startTicking",this).call(this),this.scene.events.on("update",this.update,this)}},{key:"stopTicking",value:function(){Pc(qb(r.prototype),"stopTicking",this).call(this),this.scene&&this.scene.events.off("update",this.update,this)}},{key:"setEnable",value:function(t){return null==t&&(t=!0),this.enable=t,this}},{key:"setSpeed",value:function(t){return this.speed=t,this}},{key:"rotateTo",value:function(t,e){if("number"!=typeof t){var a=t;t=rb(a,"angle",void 0),e=rb(a,"dir",void 0)}return null==t?this:(this.target=Di(t,0,360),void 0===e&&(e=0),this.dir="string"==typeof e?_p[e]:e,Pc(qb(r.prototype),"start",this).call(this),this)}},{key:"rotateTowardsPosition",value:function(t,e,r,a){var $D8vU$$interop$default=_a(Wp);var s=this.gameObject,n=$p(s.x,s.y,t,e),i=$D8vU$$interop$default.d(n);return this.rotateTo(i,r,a),this}},{key:"update",value:function(t,e){if(!this.isRunning||!this.enable)return this;var $s57K$$interop$default=_a(Tp);var r=this.target,a=Zp($s57K$$interop$default.d(r)),s=this.gameObject;if(a===s.rotation)return this.complete(),this;if(0===this.speed||0===e||0===this.timeScale)return this;var n,i,o=(360+s.angle)%360,$=e*this.timeScale/1e3,v=this.speed*$,u=this.dir;switch(u){case 0:var c=Cf(o,r,!0),l=360-c;c<l?(u=1,n=c):(u=2,n=l);break;case 1:n=Cf(o,r,!0);break;case 2:n=Cf(o,r,!1);}return i=v<n?1===u?o+v:o-v:r,s.rotation=$s57K$$interop$default.d(i),this}}]),r}(),Cf=function(t,e,r){var a=r?e-t:t-e;return a=Di(a,0,360)},_p={shortest:0,cw:1,ccw:2};var Fi=function(){function e(){Hp(this,e)}return Ip(e,null,[{key:"InjectIntoActor",value:function(t,a){t.vals.rexRotateTo={},t.vals.rexRotateTo.data=a,t.vals.components[e.Name]=!0}},{key:"Bake",value:function(e){e.plugins.rexRotateTo=new Ei(e.displayed,e.vals.rexRotateTo.data)}},{key:"PostBake",value:function(e){}},{key:"Cleanup",value:function(e){}},{key:"Name",get:function(){return"RexRotateToPlugin"}}]),e}();function aq(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Gi(e,n){for(var a=0;a<n.length;a++){var t=n[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function bq(e,n,a){return n&&Gi(e.prototype,n),a&&Gi(e,a),e}var ba=function(){function e(){aq(this,e)}return bq(e,null,[{key:"InjectIntoActor",value:function(n,a,t){n.vals["s_"+a]=t,n.vals.components[e.Name]=!0}},{key:"SetValue",value:function(e,n,a){e.vals["s_"+n]=a}},{key:"GetValue",value:function(e,n){return e.vals["s_"+n]}},{key:"HasValue",value:function(e,n){return null!=e.vals["s_"+n]}},{key:"Bake",value:function(e){}},{key:"PostBake",value:function(e){}},{key:"Cleanup",value:function(e){}},{key:"Name",get:function(){return"SimpleValue"}}]),e}();function cq(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function Hi(e,a){for(var n=0;n<a.length;n++){var r=a[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dq(e,a,n){return a&&Hi(e.prototype,a),n&&Hi(e,n),e}var Ii=function(){function e(){cq(this,e)}return dq(e,null,[{key:"InjectIntoActor",value:function(a,n){a.vals.tags||(a.vals.tags=[]);for(var r=0;r<n.length;r++)a.vals.tags.push(n[r]);a.vals.components[e.Name]=!0}},{key:"Bake",value:function(e){}},{key:"PostBake",value:function(e){}},{key:"Cleanup",value:function(e){}},{key:"HasTag",value:function(e,a){return e.vals.tags.indexOf(a)>-1}},{key:"Name",get:function(){return"Tag"}}]),e}();function eq(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function Ji(e,a){for(var n=0;n<a.length;n++){var r=a[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fq(e,a,n){return a&&Ji(e.prototype,a),n&&Ji(e,n),e}var dc="template",Df="TemplateComponent",Ba=function(){function e(){eq(this,e)}return fq(e,null,[{key:"InjectIntoActor",value:function(e,a){e.vals[dc]={},e.vals[dc].overridesList=a,e.vals[dc].enabled=!0,e.vals.components[Df]=!0}},{key:"PreBake",value:function(e){for(var a=e.vals[dc].overridesList,n=na.GetGameRemix().getRemixCfg().templating,r=0;r<a.length;r++){var i=a[r];if(void 0===n)return void console.warn("TemplateComponent: templating object is undefined");var t=n[i];for(var o in t){var $=o,v=ka.GetComponentClass($);v||(v=Ja.GetActionClass($)),console.assert(v,"no component Class/Action: ",$),v.SetFromData(e,t[o])}}}},{key:"Bake",value:function(e){}},{key:"PostBake",value:function(e){}},{key:"Cleanup",value:function(e){}},{key:"Has",value:function(e){return 1==e.vals.components[Df]}},{key:"SetEnabled",value:function(e,a){e.vals[dc].enabled=a}},{key:"IsEnabled",value:function(e){return e.vals[dc].enabled}},{key:"Name",get:function(){return Df}}]),e}();function gq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ki(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function hq(e,t,n){return t&&Ki(e.prototype,t),n&&Ki(e,n),e}var Li="transform",Ef="TileComponent";var Mi=function(){function e(){gq(this,e)}return hq(e,null,[{key:"InjectIntoActor",value:function(e,t,n){e.vals.tile={},e.vals.tile.tx=t,e.vals.tile.ty=n,e.vals.tile.tOffX=0,e.vals.tile.tOffY=0,e.vals.tile.l=0,e.vals.components[Ef]=!0}},{key:"SetLayer",value:function(e,t){e.vals.tile.l=t}},{key:"GetLayer",value:function(e){return e.vals.tile.l}},{key:"SetOffset",value:function(e,t,n){e.vals.tile.tOffX=t,e.vals.tile.tOffY=n}},{key:"GetOffsetX",value:function(e){return e.vals.tile.tOffX}},{key:"GetOffsetY",value:function(e){return e.vals.tile.tOffY}},{key:"GetX",value:function(e){return e.vals.tile.tx}},{key:"GetY",value:function(e){return e.vals.tile.ty}},{key:"SetXY",value:function(e,t,n){e.vals.tile.tx=t,e.vals.tile.ty=n}},{key:"Bake",value:function(e){}},{key:"PostBake",value:function(e){}},{key:"Cleanup",value:function(e){}},{key:"Has",value:function(e){return 1==e.vals.components[Ef]}},{key:"SetEnabled",value:function(e,t){e.vals[Li].enabled=t}},{key:"IsEnabled",value:function(e){return e.vals[Li].enabled}},{key:"Name",get:function(){return Ef}}]),e}();function iq(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Ni(e,n){for(var l=0;l<n.length;l++){var a=n[l];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function jq(e,n,l){return n&&Ni(e.prototype,n),l&&Ni(e,l),e}function kq(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Oi(e,n){for(var l=0;l<n.length;l++){var a=n[l];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function lq(e,n,l){return n&&Oi(e.prototype,n),l&&Oi(e,l),e}var mq=function(){function e(){kq(this,e)}return lq(e,null,[{key:"Add",value:function(e){ga.InjectIntoActor(e,"__bounceAngleBetweenValuesSys")}},{key:"Update",value:function(e){for(var n=fa.GetBagItemsList("__bounceAngleBetweenValuesSys"),l=0;l<n.length;l++){var a=n[l];if(ea.IsActorOnScreen(a)&&a.vals.bounceAngleBetweenValues.enabled){var r=a.vals.bounceAngleBetweenValues.angleChangeSpeed*a.vals.bounceAngleBetweenValues.angleChangeSpeedMultiplier*(e/1e3);a.displayed.angle+=r*a.vals.bounceAngleBetweenValues.angleChangeDir,a.vals.bounceAngleBetweenValues.curDiff+=r,a.vals.bounceAngleBetweenValues.curDiff>=2*a.vals.bounceAngleBetweenValues.maxDiff&&(a.vals.bounceAngleBetweenValues.curDiff=0,Ff.SwapAngleDir(a))}}}}]),e}();var Ff=function(){function e(){iq(this,e)}return jq(e,null,[{key:"InjectIntoActor",value:function(n,l,a,u){n.vals.bounceAngleBetweenValues||(n.vals.bounceAngleBetweenValues={}),n.vals.bounceAngleBetweenValues.angleChangeSpeed=l,n.vals.bounceAngleBetweenValues.angleChangeSpeedMultiplier=1,n.vals.bounceAngleBetweenValues.angleChangeDir=a,n.vals.bounceAngleBetweenValues.maxDiff=u,n.vals.bounceAngleBetweenValues.curDiff=0,n.vals.bounceAngleBetweenValues.enabled=!0,n.vals.bounceAngleBetweenValues.opt={},n.vals.components[e.Name]=!0}},{key:"Has",value:function(n){return 1==n.vals.components[e.Name]}},{key:"SetEnabled",value:function(e,n){e.vals.bounceAngleBetweenValues.enabled=n}},{key:"SetOptAngleSpeedDecoupled",value:function(e,n,l){e.vals.bounceAngleBetweenValues.opt.angleChangeSpeedWhenPositive=n,e.vals.bounceAngleBetweenValues.opt.angleChangeSpeedWhenNegative=l}},{key:"IsEnabled",value:function(e){return e.vals.bounceAngleBetweenValues.enabled}},{key:"Bake",value:function(e){mq.Add(e)}},{key:"PostBake",value:function(e){e.vals.bounceAngleBetweenValues.baseAngle=e.displayed.angle,e.vals.bounceAngleBetweenValues.curDiff=e.vals.bounceAngleBetweenValues.maxDiff}},{key:"Reset",value:function(e){if(1==e.vals.bounceAngleBetweenValues.angleChangeDir){var n=e.displayed.angle,l=e.vals.bounceAngleBetweenValues.baseAngle-e.vals.bounceAngleBetweenValues.maxDiff;e.vals.bounceAngleBetweenValues.curDiff=n-l}else{var a=e.displayed.angle,u=e.vals.bounceAngleBetweenValues.baseAngle+e.vals.bounceAngleBetweenValues.maxDiff;e.vals.bounceAngleBetweenValues.curDiff=u-a}}},{key:"SetAngleChangeDir",value:function(n,l){n.vals.bounceAngleBetweenValues.angleChangeDir=l,e.Reset(n)}},{key:"SetAngleSpeedMultiplier",value:function(e,n){e.vals.bounceAngleBetweenValues.angleChangeSpeedMultiplier=n}},{key:"SwapAngleDir",value:function(e){e.vals.bounceAngleBetweenValues.angleChangeDir*=-1,1==e.vals.bounceAngleBetweenValues.angleChangeDir?null!=e.vals.bounceAngleBetweenValues.opt.angleChangeSpeedWhenPositive&&(e.vals.bounceAngleBetweenValues.angleChangeSpeed=e.vals.bounceAngleBetweenValues.opt.angleChangeSpeedWhenPositive):null!=e.vals.bounceAngleBetweenValues.opt.angleChangeSpeedWhenNegative&&(e.vals.bounceAngleBetweenValues.angleChangeSpeed=e.vals.bounceAngleBetweenValues.opt.angleChangeSpeedWhenNegative)}},{key:"Cleanup",value:function(e){}},{key:"Name",get:function(){return"BounceAngleBetweenValues"}}]),e}();function nq(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Pi(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function oq(e,n,t){return n&&Pi(e.prototype,n),t&&Pi(e,t),e}function pq(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function Qi(e,a){for(var l=0;l<a.length;l++){var i=a[l];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function qq(e,a,l){return a&&Qi(e.prototype,a),l&&Qi(e,l),e}var Ri=function(){function e(){pq(this,e)}return qq(e,null,[{key:"Add",value:function(e){ga.InjectIntoActor(e,"__lifetimeSys")}},{key:"Update",value:function(e){for(var a=fa.GetBagItemsList("__lifetimeSys"),l=0;l<a.length;l++){var i=a[l];null!=i.vals.lifetime.delay&&i.vals.lifetime.delay>0?i.vals.lifetime.delay-=e:(null!=i.vals.lifetime.alphaChangePerSecond&&0!=i.vals.lifetime.alphaChangePerSecond&&(i.displayed.alpha+=i.vals.lifetime.alphaChangePerSecond*(e/1e3)),null!=i.vals.lifetime.scaleChangePerSecond&&0!=i.vals.lifetime.scaleChangePerSecond&&(i.displayed.scale+=i.vals.lifetime.scaleChangePerSecond*(e/1e3),i.displayed.scale<=0&&(i.displayed.scale=0)),i.vals.lifetime.cur+=e,i.vals.lifetime.cur>=i.vals.lifetime.max&&qa.queueEntity(i))}}}]),e}();var Qc=function(){function e(){nq(this,e)}return oq(e,null,[{key:"InjectIntoActor",value:function(n,t){n.vals.lifetime||(n.vals.lifetime={}),n.vals.lifetime.max=t,n.vals.lifetime.cur=0,n.vals.components[e.Name]=!0}},{key:"SetAlphaChangePerSecond",value:function(e,n){e.vals.lifetime.alphaChangePerSecond=n}},{key:"SetScaleChangePerSecond",value:function(e,n){e.vals.lifetime.scaleChangePerSecond=n}},{key:"SetDelay",value:function(e,n){e.vals.lifetime.delay=n}},{key:"Bake",value:function(e){Ri.Add(e)}},{key:"PostBake",value:function(e){}},{key:"Cleanup",value:function(e){}},{key:"Name",get:function(){return"LifetimeComponent"}}]),e}();function rq(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Si(e,n){for(var o=0;o<n.length;o++){var r=n[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sq(e,n,o){return n&&Si(e.prototype,n),o&&Si(e,o),e}function tq(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Ti(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function uq(e,r,n){return r&&Ti(e.prototype,r),n&&Ti(e,n),e}var vq=function(){function e(){tq(this,e)}return uq(e,null,[{key:"Add",value:function(e){ga.InjectIntoActor(e,"__offscreenDieSys")}},{key:"Update",value:function(e){for(var r=fa.GetBagItemsList("__offscreenDieSys"),n=0;n<r.length;n++){var i=r[n];i.vals.offscreenDie.timeOffScreen+=e,i.vals.offscreenDie.timeOffScreen>=1e4&&(i.vals.offscreenDie.wasOnScreen=!0);var a=ea.IsActorOnScreen(i);0==a&&i.vals.offscreenDie.wasOnScreen?qa.queueEntity(i):1!=a||i.vals.offscreenDie.wasOnScreen||(i.vals.offscreenDie.wasOnScreen=!0)}}}]),e}();var Ui=function(){function e(){rq(this,e)}return sq(e,null,[{key:"InjectIntoActor",value:function(n){n.vals.offscreenDie||(n.vals.offscreenDie={}),n.vals.offscreenDie.timeOffScreen=0,n.vals.offscreenDie.wasOnScreen=!1,n.vals.components[e.Name]=!0}},{key:"Bake",value:function(e){vq.Add(e)}},{key:"PostBake",value:function(e){}},{key:"Cleanup",value:function(e){}},{key:"Name",get:function(){return"OffscreenDieComponent"}}]),e}();function wq(e,l){if(!(e instanceof l))throw new TypeError("Cannot call a class as a function")}function Vi(e,l){for(var t=0;t<l.length;t++){var o=l[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function xq(e,l,t){return l&&Vi(e.prototype,l),t&&Vi(e,t),e}function yq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wi(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zq(e,t,a){return t&&Wi(e.prototype,t),a&&Wi(e,a),e}var Xi=function(){function e(){yq(this,e)}return zq(e,null,[{key:"GetRotatedCoordinate",value:function(e,t,a){return Phaser.Math.Rotate({x:e,y:t},Phaser.Math.DegToRad(a))}},{key:"AddRotatedByAnglePositionsToObject",value:function(t,a,r,n){var o=e.GetRotatedCoordinate(a,r,n);t.x+=o.x,t.y+=o.y}},{key:"GetAngleBetweenInDegrees",value:function(e,t,a,r){return Phaser.Math.RadToDeg(Phaser.Math.Angle.Between(e,t,a,r))}}]),e}();function Aq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yi(e,t){for(var l=0;l<t.length;l++){var r=t[l];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bq(e,t,l){return t&&Yi(e.prototype,t),l&&Yi(e,l),e}var Cq=function(){function e(){Aq(this,e)}return Bq(e,null,[{key:"Add",value:function(e){ga.InjectIntoActor(e,"__particleFollowSys")}},{key:"Update",value:function(e){for(var t=fa.GetBagItemsList("__particleFollowSys"),l=0;l<t.length;l++){var r=t[l];if(r.displayed.emitters.list[0].follow.scene){var o=Xi.GetRotatedCoordinate(r.vals.particleFollow.offsetX,r.vals.particleFollow.offsetY,r.cache.particleFollow.gameObject.angle);r.displayed.emitters.list[0].followOffset.x=o.x,r.displayed.emitters.list[0].followOffset.y=o.y,r.displayed.emitters.list[0].setEmitterAngle(r.cache.particleFollow.gameObject.angle+180)}else r.displayed.emitters.list[0].stop(),r.displayed.emitters.list[0].getAliveParticleCount()<=0&&qa.queueEntity(r)}}}]),e}();var Zi=function(){function e(){wq(this,e)}return xq(e,null,[{key:"InjectIntoActor",value:function(l,t,o,a){l.vals.particleFollow||(l.vals.particleFollow={}),l.vals.particleFollow.guid=t,l.vals.particleFollow.offsetX=o,l.vals.particleFollow.offsetY=a,l.vals.components[e.Name]=!0}},{key:"Bake",value:function(e){}},{key:"PostBake",value:function(e){e.cache.particleFollow={},e.cache.particleFollow.gameObject=fa.GetActorByGUID(e.vals.particleFollow.guid).displayed,e.displayed.emitters.list[0].startFollow(fa.GetActorByGUID(e.vals.particleFollow.guid).displayed);var l=Xi.GetRotatedCoordinate(e.vals.particleFollow.offsetX,e.vals.particleFollow.offsetY,e.cache.particleFollow.gameObject.angle);e.displayed.emitters.list[0].followOffset.x=l.x,e.displayed.emitters.list[0].followOffset.y=l.y,e.displayed.emitters.list[0].setEmitterAngle(e.cache.particleFollow.gameObject.angle+180),Cq.Add(e)}},{key:"Cleanup",value:function(e){}},{key:"Name",get:function(){return"ParticleFollow"}}]),e}();function Dq(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function $i(e,a){for(var t=0;t<a.length;t++){var o=a[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Eq(e,a,t){return a&&$i(e.prototype,a),t&&$i(e,t),e}function Fq(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _i(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Gq(e,r,t){return r&&_i(e.prototype,r),t&&_i(e,t),e}var Hq=function(){function e(){Fq(this,e)}return Gq(e,null,[{key:"Add",value:function(e){ga.InjectIntoActor(e,"__rotateTowardsTargetSys")}},{key:"Update",value:function(e){for(var r=fa.GetBagItemsList("__rotateTowardsTargetSys"),t=0;t<r.length;t++){var a=r[t];if(a.vals.rotateTowardsTarget.guid&&fa.IsActorByGuidExisting(a.vals.rotateTowardsTarget.guid)){var o=fa.GetActorByGUID(a.vals.rotateTowardsTarget.guid);a.plugins.rexRotateTo.rotateTowardsPosition(o.displayed.x,o.displayed.y)}else a.vals.rotateTowardsTarget.guid=null}}}]),e}();var aj=function(){function e(){Dq(this,e)}return Eq(e,null,[{key:"InjectIntoActor",value:function(a,t){a.vals.rotateTowardsTarget||(a.vals.rotateTowardsTarget={}),a.vals.rotateTowardsTarget.guid=t,a.vals.components[e.Name]=!0}},{key:"Bake",value:function(e){Hq.Add(e)}},{key:"PostBake",value:function(e){}},{key:"Cleanup",value:function(e){}},{key:"Name",get:function(){return"RotateTowardsTarget"}}]),e}();function Iq(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function bj(e,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Jq(e,n,r){return n&&bj(e.prototype,n),r&&bj(e,r),e}function cj(e,s){for(var t=0;t<s.length;t++){var a=s[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Kq(e,s,t){return s&&cj(e.prototype,s),t&&cj(e,t),e}function dj(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}var Lq=function e(){dj(this,e),this.allGroupsNames=[]},td=new Lq,Mq=function(){function e(){dj(this,e)}return Kq(e,null,[{key:"Add",value:function(e,s){console.assert(e,"ScrollPositionInGroupSystem->pActor is:",e),console.assert(s,"ScrollPositionInGroupSystem->pGroupSuffix is:",s);var t="__sysScrollPosition_"+s;td.allGroupsNames.indexOf(t)<=-1&&td.allGroupsNames.push(t),ga.InjectIntoActor(e,t)}},{key:"UpdateAllGroups",value:function(e){for(var s=0;s<td.allGroupsNames.length;s++)for(var t=td.allGroupsNames[s],a=fa.GetBagItemsList(t),r=0;r<a.length;r++){var o=a[r],n=Hf.GetData(o);null!=n.speedY&&n.speedY>0?(o.displayed.y+=n.speedY*(e/1e3),null==n.maxY?console.warn("MaxY is undefined, please fix!"):o.displayed.y>n.maxY&&!ea.IsActorOnScreen(o)&&(o.displayed.y-=ea.GetDisplayHeight(o)*a.length)):null!=n.speedY&&n.speedY,null!=n.speedX&&n.speedX>0||null!=n.speedX&&n.speedX<0&&(o.displayed.x+=n.speedX*(e/1e3),null==n.minX?console.warn("MinX is undefined, please fix!"):o.displayed.x<n.minX&&!ea.IsActorOnScreen(o)&&(o.displayed.x+=ea.GetDisplayWidth(o)*a.length))}}}]),e}();var sb="scrollPositionComponent",Gf="ScrollPositionInGroupComponent",Hf=function(){function e(){Iq(this,e)}return Jq(e,null,[{key:"InjectIntoActor",value:function(e,n,r){e.vals[sb]={},e.vals[sb].groupSuffix=n,e.vals[sb].data=r,e.vals[sb].enabled=!0,e.vals.components[Gf]=!0}},{key:"GetData",value:function(e){return e.vals[sb].data}},{key:"Bake",value:function(e){Mq.Add(e,e.vals[sb].groupSuffix)}},{key:"PostBake",value:function(e){}},{key:"Cleanup",value:function(e){}},{key:"Has",value:function(e){return 1==e.vals.components[Gf]}},{key:"SetEnabled",value:function(e,n){e.vals[sb].enabled=n}},{key:"IsEnabled",value:function(e){return e.vals[sb].enabled}},{key:"Name",get:function(){return Gf}}]),e}();function Nq(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function ej(e,n){for(var o=0;o<n.length;o++){var a=n[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Oq(e,n,o){return n&&ej(e.prototype,n),o&&ej(e,o),e}function Pq(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function fj(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Qq(e,n,r){return n&&fj(e.prototype,n),r&&fj(e,r),e}var Rq=function(){function e(){Pq(this,e)}return Qq(e,null,[{key:"Add",value:function(n){ga.InjectIntoActor(n,"__synchPositionSys"),e.DoSynch(n)}},{key:"DoSynch",value:function(e){fa.IsActorByGuidExisting(e.vals.synchPosition.guid)?(e.displayed.x=e.cache.synchPosition.gameObject.x+e.vals.synchPosition.offsetX,e.displayed.y=e.cache.synchPosition.gameObject.y+e.vals.synchPosition.offsetY):qa.queueEntity(e)}},{key:"Update",value:function(){for(var n=fa.GetBagItemsList("__synchPositionSys"),r=0;r<n.length;r++){var o=n[r];e.DoSynch(o)}}}]),e}();var gj=function(){function e(){Nq(this,e)}return Oq(e,null,[{key:"InjectIntoActor",value:function(n,o,a,t){n.vals.synchPosition||(n.vals.synchPosition={}),n.vals.synchPosition.guid=o,n.vals.synchPosition.offsetX=a,n.vals.synchPosition.offsetY=t,n.vals.components[e.Name]=!0}},{key:"Bake",value:function(e){e.cache.synchPosition={},e.cache.synchPosition.gameObject=fa.GetActorByGUID(e.vals.synchPosition.guid).displayed,Rq.Add(e)}},{key:"PostBake",value:function(e){}},{key:"Cleanup",value:function(e){}},{key:"Name",get:function(){return"SynchPosition"}}]),e}();function Sq(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function hj(e,a){for(var $=0;$<a.length;$++){var n=a[$];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Tq(e,a,$){return a&&hj(e.prototype,a),$&&hj(e,$),e}function Uq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ij(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Vq(e,t,n){return t&&ij(e.prototype,t),n&&ij(e,n),e}function Wq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jj(e,t){for(var a=0;a<t.length;a++){var $=t[a];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(e,$.key,$)}}function Xq(e,t,a){return t&&jj(e.prototype,t),a&&jj(e,a),e}var Ta="cSimpleValueTextSynch",If="SimpleValueTextSynchComponent",ud=function(){function e(){Wq(this,e)}return Xq(e,null,[{key:"InjectIntoActor",value:function(e,t,a){e.vals[Ta]={},e.vals[Ta].synchFromGuid=t,e.vals[Ta].valName=a,e.vals[Ta].enabled=!0,e.vals.components[If]=!0}},{key:"Bake",value:function(e){e.cache[Ta]={},e.cache[Ta].gameObject=fa.GetActorByGUID(e.vals[Ta].synchFromGuid),kj.AddSimple(e)}},{key:"PostBake",value:function(t){e.DoUpdate(t)}},{key:"GetSynchFromGuid",value:function(e){return e.vals[Ta].synchFromGuid}},{key:"Cleanup",value:function(e){}},{key:"DoUpdate",value:function(e){nb.SetText(e,ba.GetValue(e.cache[Ta].gameObject,e.vals[Ta].valName))}},{key:"Has",value:function(e){return 1==e.vals.components[If]}},{key:"SetEnabled",value:function(e,t){e.vals[Ta].enabled=t}},{key:"IsEnabled",value:function(e){return e.vals[Ta].enabled}},{key:"Name",get:function(){return If}},{key:"Accessor",get:function(){return Ta}}]),e}();var kj=function(){function e(){Uq(this,e)}return Vq(e,null,[{key:"AddSimple",value:function(e){ga.InjectIntoActor(e,"__sysTextSynch_Simple")}},{key:"AddMinMax",value:function(e){ga.InjectIntoActor(e,"__sysTextSynch_MinMax")}},{key:"Update",value:function(){for(var e=fa.GetBagItemsList("__sysTextSynch_Simple"),t=0;t<e.length;t++){var n=e[t];fa.IsActorByGuidExisting(ud.GetSynchFromGuid(n))?ud.DoUpdate(n):qa.queueEntity(n)}for(var o=fa.GetBagItemsList("__sysTextSynch_MinMax"),r=0;r<o.length;r++){var c=o[r];fa.IsActorByGuidExisting(vd.GetSynchFromGuid(c))?vd.DoUpdate(c):qa.queueEntity(c)}}}]),e}();var Xa="cMinMaxValueTextSynch",Jf="MinMaxValueTextSynchComponent",vd=function(){function e(){Sq(this,e)}return Tq(e,null,[{key:"InjectIntoActor",value:function(e,a,$){e.vals[Xa]={},e.vals[Xa].synchFromGuid=a,e.vals[Xa].valName=$,e.vals[Xa].enabled=!0,e.vals.components[Jf]=!0}},{key:"GetSynchFromGuid",value:function(e){return e.vals[Xa].synchFromGuid}},{key:"Bake",value:function(e){e.cache[Xa]={},e.cache[Xa].gameObject=fa.GetActorByGUID(e.vals[Xa].synchFromGuid),kj.AddMinMax(e)}},{key:"PostBake",value:function(a){e.DoUpdate(a)}},{key:"DoUpdate",value:function(e){nb.SetText(e,zf.GetValue(e.cache[Xa].gameObject,e.vals[Xa].valName))}},{key:"Cleanup",value:function(e){}},{key:"Has",value:function(e){return 1==e.vals.components[Jf]}},{key:"SetEnabled",value:function(e,a){e.vals[Xa].enabled=a}},{key:"IsEnabled",value:function(e){return e.vals[Xa].enabled}},{key:"Name",get:function(){return Jf}}]),e}();function Yq(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function lj(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Zq(e,n,t){return n&&lj(e.prototype,n),t&&lj(e,t),e}function $q(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function mj(r,e){for(var t=0;t<e.length;t++){var a=e[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}function _q(r,e,t){return e&&mj(r.prototype,e),t&&mj(r,t),r}var ar=function(){function r(){$q(this,r)}return _q(r,null,[{key:"Add",value:function(r){for(var e in r.vals.tickingActions)ga.InjectIntoActor(r,"__tickTaskActionSys_"+e)}},{key:"Update",value:function(r,e){for(var t=fa.GetBagItemsList("__tickTaskActionSys_"+r),a=0;a<t.length;a++){t[a].triggerActions(r,e)}}}]),r}();var nj=function(){function e(){Yq(this,e)}return Zq(e,null,[{key:"InjectIntoActor",value:function(n,t){n.vals.tickingActions||(n.vals.tickingActions={}),n.vals.tickingActions[t]={},n.vals.tickingActions[t].tag=t,n.vals.components[e.Name]=!0}},{key:"Bake",value:function(e){ar.Add(e)}},{key:"PostBake",value:function(e){}},{key:"Cleanup",value:function(e){}},{key:"Name",get:function(){return"TickTaskAction"}}]),e}();function br(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oj(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function cr(e,t,n){return t&&oj(e.prototype,t),n&&oj(e,n),e}function dr(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function pj(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function er(e,r,t){return r&&pj(e.prototype,r),t&&pj(e,t),e}var fr=function(){function e(){dr(this,e)}return er(e,null,[{key:"Add",value:function(e){for(var r in e.vals.timedActions)ga.InjectIntoActor(e,"__timedActionSys_"+r)}},{key:"Update",value:function(e,r){for(var t=fa.GetBagItemsList("__timedActionSys_"+e),n=0;n<t.length;n++){var a=t[n],i=a.vals.timedActions[e];(-1==i.repeatTimes||i.repeatTimes>0)&&(i.curTick+=r,i.curTick>=i.maxTick&&(i.curTick=0,i.repeatTimes>0&&(i.repeatTimes-=1),i.sequence.length>1&&(i.curIndex+=1,i.curIndex>=i.sequence.length&&(i.curIndex=0),i.maxTick=i.sequence[i.curIndex]),a.triggerActions(i.actDispatchedOnMaxTick)))}}}]),e}();var qj=function(){function e(){br(this,e)}return cr(e,null,[{key:"InjectIntoActor",value:function(t,n,i,a,o){console.assert(o,"param pActToDispatch is: ",o),t.vals.timedActions||(t.vals.timedActions={}),t.vals.timedActions[n]={},t.vals.timedActions[n].tag=n,t.vals.timedActions[n].curTick=i,Array.isArray(a)?t.vals.timedActions[n].sequence=a:t.vals.timedActions[n].sequence=[a],t.vals.timedActions[n].maxTick=t.vals.timedActions[n].sequence[0],t.vals.timedActions[n].curIndex=0,t.vals.timedActions[n].actDispatchedOnMaxTick=o,t.vals.timedActions[n].repeatTimes=-1,t.vals.components[e.Name]=!0}},{key:"SetRepeatTimes",value:function(e,t,n){e.vals.timedActions[t].repeatTimes=n}},{key:"Bake",value:function(e){fr.Add(e)}},{key:"PostBake",value:function(e){}},{key:"Cleanup",value:function(e){}},{key:"Name",get:function(){return"TimedAction"}}]),e}();function gr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rj(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hr(e,t,a){return t&&rj(e.prototype,t),a&&rj(e,a),e}var Jb=function(){function e(){gr(this,e)}return hr(e,null,[{key:"InjectIntoActor",value:function(t,a,r,n){console.assert(a,a),t.vals.particle={},t.vals.particle.texture=a,t.vals.particle.layer=r,t.vals.particle.emitterConfig=n,t.vals.particle.inLayerDepth=0,t.vals.components[e.Name]=!0,t.vals.visualBase=t.vals.particle}},{key:"Bake",value:function(e){var t=ea.InBakeGetSceneFromLayerCfg(e).add.particles(e.vals.particle.texture);t.createEmitter(e.vals.particle.emitterConfig);e.displayed=t,ea.InBakeAddDisplayedAndSetSelfRef(e,e.displayed)}},{key:"PostBake",value:function(e){}},{key:"Cleanup",value:function(e){}},{key:"MoveParticleTo",value:function(e,t,a){e.displayed.emitters.list[0].x.propertyValue=t,e.displayed.emitters.list[0].y.propertyValue=a}},{key:"GetEmitter",value:function(e){return e.displayed.emitters.list[0]}},{key:"Name",get:function(){return"Particle"}}]),e}();function ir(t){return(ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function kr(t,e,r){return e&&sj(t.prototype,e),r&&sj(t,r),t}function lr(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mr(t,e)}function mr(t,e){return(mr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function nr(t){var e=qr();return function(){var r,n=tj(t);if(e){var o=tj(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return or(this,r)}}function or(t,e){return!e||"object"!==ir(e)&&"function"!=typeof e?pr(t):e}function pr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function tj(t){return(tj=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var wd=function(t){lr(r,Pa);var e=nr(r);function r(){return jr(this,r),e.apply(this,arguments)}return kr(r,null,[{key:"InjectIntoActor",value:function(t,e){t.vals.animation={},t.vals.animation.data=e,t.vals.animation.type="texture_swap",t.vals.components[r.Name]=!0}},{key:"Bake",value:function(t){}},{key:"PostBake",value:function(t){}},{key:"Cleanup",value:function(t){}},{key:"Name",get:function(){return"TextureSwapAnimation"}}]),r}();function rr(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function uj(e,n){for(var r=0;r<n.length;r++){var a=n[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function sr(e,n,r){return n&&uj(e.prototype,n),r&&uj(e,r),e}var vj=function(){function e(){rr(this,e)}return sr(e,[{key:"run",value:function(e){console.log(e)}},{key:"name",value:function(){return e.Name}}],[{key:"Name",get:function(){return"CmdLog"}}]),e}();function tr(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function wj(e,r){for(var a=0;a<r.length;a++){var n=r[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ur(e,r,a){return r&&wj(e.prototype,r),a&&wj(e,a),e}var Kf=function(){function e(){tr(this,e)}return ur(e,[{key:"run",value:function(e){gb.MuteAudioManuallyByUser()}},{key:"name",value:function(){return e.Name}}],[{key:"Name",get:function(){return"CmdMuteAudio"}}]),e}();function vr(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function xj(e,a){for(var n=0;n<a.length;n++){var r=a[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wr(e,a,n){return a&&xj(e.prototype,a),n&&xj(e,n),e}var Lf=function(){function e(){vr(this,e)}return wr(e,[{key:"run",value:function(e){na.GetGameRemix().tryCallPause()}},{key:"name",value:function(){return e.Name}}],[{key:"Name",get:function(){return"CmdPauseGameplay"}}]),e}();function xr(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function yj(e,n){for(var a=0;a<n.length;a++){var r=n[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yr(e,n,a){return n&&yj(e.prototype,n),a&&yj(e,a),e}var ec=function(){function e(){xr(this,e)}return yr(e,[{key:"run",value:function(e){e.f?e.f(e):e()}},{key:"name",value:function(){return e.Name}}],[{key:"Name",get:function(){return"CmdRunPayloadFunction"}}]),e}();function zr(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function zj(e,r){for(var n=0;n<r.length;n++){var a=r[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ar(e,r,n){return r&&zj(e.prototype,r),n&&zj(e,n),e}var Mf=function(){function e(){zr(this,e)}return Ar(e,[{key:"run",value:function(e){gb.UnmuteAudioManuallyByUser()}},{key:"name",value:function(){return e.Name}}],[{key:"Name",get:function(){return"CmdUnmuteAudio"}}]),e}();function Br(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function Aj(e,a){for(var r=0;r<a.length;r++){var n=a[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Cr(e,a,r){return a&&Aj(e.prototype,a),r&&Aj(e,r),e}var Nf=function(){function e(){Br(this,e)}return Cr(e,[{key:"run",value:function(e){na.GetGameRemix()._unpauseGame()}},{key:"name",value:function(){return e.Name}}],[{key:"Name",get:function(){return"CmdUnpauseGameplay"}}]),e}();function Bj(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Dr(e,t,a){return t&&Bj(e.prototype,t),a&&Bj(e,a),e}function Cj(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var fc="STATE_ADVERTISING_QUESTION";var Of="BACKGROUND_STATE";var tb="STATE_COVER";var xd="STATE_FADE";var Kb="GAMEOVER_STATE";var eb="STATE_GAMEPLAY";var gc="PAUSE_STATE";var Rc="PREGAME_STATE";var Sc="SETTINGS_STATE";var Tc="SCENE_GAMEPLAY";var yd="SCENE_SYSTEM";var Ya,Er=function e(){Cj(this,e),this.trackedCoverOnce=!1,this.trackedGameplayOnce=!1,this.trackedGameOverOnce=!1,this.startedGameplayTimes=0},ub=new Er,Fr=function(){function e(t){Cj(this,e),this.audioLib={},this.sessionData={},this.hasBeenPaused=!1,console.assert(t,"GameRemix must have cfg!"),Ya=t}return Dr(e,[{key:"_custom_tryCallPause",value:function(){}},{key:"_custom_passEventOnUpdateCoverState",value:function(e,t,a){}},{key:"_custom_passEventOnUpdateGameOverState",value:function(e,t,a){}},{key:"_custom_passEventOnUpdateGameplayState",value:function(e,t,a){}},{key:"_custom_passEventOnExitInstantGameplay",value:function(){}},{key:"_custom_passEventOnExitDelayedGameplay",value:function(){}},{key:"_custom_passEventOnEnterInstantCover",value:function(){}},{key:"_custom_passEventOnEnterInstantGameOver",value:function(){}},{key:"_custom_passEventOnGameplayActualStart",value:function(){}},{key:"_custom_passEventOnGameplayFinished",value:function(e){}},{key:"_custom_onFirstTouch",value:function(){}},{key:"_custom_passEventOnEnterInstantGameplay",value:function(e){}},{key:"gameInit",value:function(){console.log("Game Title: ",Ya.gameTitle),Ya.funcDoConfigureAudio(this),gb.InterpretInitialAudioState(Ya.gameTitle),la.GetState(tb).setExitDelayInMS(500),la.GetState(xd).setExitDelayInMS(500),la.GetState(Kb).setExitDelayInMS(500),la.GetState(eb).setExitDelayInMS(500),la.GetState(gc).setExitDelayInMS(0),la.GetState(Rc).setExitDelayInMS(0),la.GetState(Sc).setExitDelayInMS(0),la.GetState(fc).setExitDelayInMS(0);var e=Oa.GetSceneByKey(Tc);for(var t in Ya.gameplayGroups)ci.AddGroup(e,Ya.gameplayGroups[t]);Ya.funcDoInitializeSaveData(),Ya.funcDoRegisterRemixSpecificActions(),Oa.GetSceneByKey(yd).input.once("pointerdown",function(){na.GetGameRemix()._custom_onFirstTouch()})}},{key:"playAudio",value:function(e){gb.PlayAudio(e,this.audioLib)}},{key:"bootPregameState",value:function(){Ya.skipPregame?this.bootInitialGameStates():la.EnterState(Rc)}},{key:"bootInitialGameStates",value:function(){la.ExitState(Rc),la.EnterState(Of),Ya.funcDoEnterFromPregame(this)}},{key:"passEventOnEnterInstant",value:function(e){e.name==tb&&(ub.trackedCoverOnce||(ub.trackedCoverOnce=!0,Wa.GetFlowManager().onEnterCoverFirstTime()),Wa.GetFlowManager().onEnterCoverEverytime(),this._custom_passEventOnEnterInstantCover()),e.name==Kb&&(ub.trackedGameOverOnce||(ub.trackedGameOverOnce=!0,Wa.GetFlowManager().onEnterGameOverFirstTime()),Wa.GetFlowManager().onEnterGameOverEverytime(),this._custom_passEventOnEnterInstantGameOver()),e.name==eb&&this._custom_passEventOnEnterInstantGameplay(e)}},{key:"passEventOnExitInstant",value:function(e){e.name==eb&&this._custom_passEventOnExitInstantGameplay()}},{key:"passEventOnExitDelayed",value:function(e){e.name==eb&&this._custom_passEventOnExitDelayedGameplay()}},{key:"passEventOnUpdate",value:function(e,t,a){if(e.name==tb){if(this.hasBeenPaused)return;this._custom_passEventOnUpdateCoverState(e,t,a)}if(e.name==Kb){if(this.hasBeenPaused)return;this._custom_passEventOnUpdateGameOverState(e,t,a)}if(e.name==eb){if(this.hasBeenPaused)return;this._custom_passEventOnUpdateGameplayState(e,t,a),Wa.GetFlowManager().onUpdateGameplayPlaytime(a)}}},{key:"passEventOnGameplayActualStart",value:function(){ub.trackedGameplayOnce||(ub.trackedGameplayOnce=!0,Wa.GetFlowManager().onEnterGameplayFirstTime()),ub.startedGameplayTimes+=1,Wa.GetFlowManager().onEnterGameplayEverytime(ub.startedGameplayTimes),this._custom_passEventOnGameplayActualStart()}},{key:"passEventOnGameplayFinished",value:function(e){this._custom_passEventOnGameplayFinished(e),Wa.GetFlowManager().onGameplayFinished()}},{key:"tryCallPause",value:function(){Hc.GetObjectTogglesOverrides().disablePause||this._custom_tryCallPause()}},{key:"tryCallUnpause",value:function(){la.IsStateActive(gc)||this._unpauseGame()}},{key:"doOnEnterPauseState",value:function(){this.hasBeenPaused=!0;for(var e=Oa.GetSceneKeyListArr(),t=0;t<e.length;t++){var a=e[t];if(Oa.CanSceneBePaused(a))Oa.GetSceneByKey(a).sys.pause()}}},{key:"_unpauseGame",value:function(){if(this.hasBeenPaused){this.hasBeenPaused=!1;for(var e=Oa.GetSceneKeyListArr(),t=0;t<e.length;t++){var a=e[t];if(Oa.CanSceneBePaused(a))Oa.GetSceneByKey(a).sys.resume()}la.ExitState(gc)}}},{key:"isPaused",value:function(){return this.hasBeenPaused}},{key:"onBrowserBlur",value:function(){this.tryCallPause()}},{key:"onBrowserFocus",value:function(){this.tryCallUnpause()}},{key:"getRemixCfg",value:function(){return Ya}},{key:"getSessionData",value:function(){return this.sessionData}},{key:"setTemplatingOverrides",value:function(e){Ya.templating=Object.assign(Ya.templating,e)}}]),e}();function Gr(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Dj(e,r){for(var a=0;a<r.length;a++){var n=r[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Hr(e,r,a){return r&&Dj(e.prototype,r),a&&Dj(e,a),e}var Pf=function(){function e(){Gr(this,e)}return Hr(e,[{key:"run",value:function(e){la.EnterState(Kb)}},{key:"name",value:function(){return e.Name}}],[{key:"Name",get:function(){return"CmdAddGameOver"}}]),e}();function Ir(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Ej(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jr(e,r,t){return r&&Ej(e.prototype,r),t&&Ej(e,t),e}var Qf=function(){function e(){Ir(this,e)}return Jr(e,[{key:"run",value:function(e){la.ExitState(tb)}},{key:"name",value:function(){return e.Name}}],[{key:"Name",get:function(){return"CmdExitCover"}}]),e}();function Kr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fj(e,t){for(var r=0;r<t.length;r++){var m=t[r];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(e,m.key,m)}}function Lr(e,t,r){return t&&Fj(e.prototype,t),r&&Fj(e,r),e}var Rf=function(){function e(){Kr(this,e)}return Lr(e,[{key:"run",value:function(e){la.EnterState(xd),la.ExitState(eb),la.ExitState(Kb);var t=function(){la.EnterState(tb),la.EnterState(eb),la.ExitState(xd)}.bind(this);la.AddDelayedFunctionToState(t,la.GetStateExitTimeInMs(eb),Of,"onFromGameOverToCover")}},{key:"name",value:function(){return e.Name}}],[{key:"Name",get:function(){return"CmdFadeFromGameplayAndGameOverToCover"}}]),e}();var Gj="STATE_MICROMAPPER";function Mr(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Hj(e,n){for(var o=0;o<n.length;o++){var r=n[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nr(e,n,o){return n&&Hj(e.prototype,n),o&&Hj(e,o),e}function Or(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function Ij(e,o){for(var r=0;r<o.length;r++){var n=o[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pr(e,o,r){return o&&Ij(e.prototype,o),r&&Ij(e,r),e}var Qr=function(){function e(){Or(this,e)}return Pr(e,null,[{key:"Add",value:function(e){console.assert(e,"ScrollPositionInGroupSystem->pActor is:",e);ga.InjectIntoActor(e,"__sysScrollPositionSingleActor")}},{key:"Update",value:function(e){for(var o=fa.GetBagItemsList("__sysScrollPositionSingleActor"),r=0;r<o.length;r++){var n=o[r],t=Tf.GetData(n);null!=t.speedY&&t.speedY>0?(n.displayed.y+=t.speedY*(e/1e3),null==t.maxY?console.warn("MaxY is undefined, please fix!"):n.displayed.y>t.maxY&&!ea.IsActorOnScreen(n)&&(n.displayed.y-=t.offsetY)):null!=t.speedY&&t.speedY}}}]),e}();var hc="scrollPositionSingleActorComponent",Sf="ScrollPositionSingleActorComponent",Tf=function(){function e(){Mr(this,e)}return Nr(e,null,[{key:"InjectIntoActor",value:function(e,n){e.vals[hc]={},e.vals[hc].data=n,e.vals[hc].enabled=!0,e.vals.components[Sf]=!0}},{key:"GetData",value:function(e){return e.vals[hc].data}},{key:"Bake",value:function(e){Qr.Add(e)}},{key:"PostBake",value:function(e){}},{key:"Cleanup",value:function(e){}},{key:"Has",value:function(e){return 1==e.vals.components[Sf]}},{key:"SetEnabled",value:function(e,n){e.vals[hc].enabled=n}},{key:"IsEnabled",value:function(e){return e.vals[hc].enabled}},{key:"Name",get:function(){return Sf}}]),e}();var Rr=null,na=function(){function o(){Fm(this,o)}return Gm(o,null,[{key:"SetGameRemix",value:function(o){(Rr=o).setTemplatingOverrides(Hc.GetObjectTemplatesOverrides())}},{key:"GetGameRemix",value:function(){return Rr}},{key:"Run",value:function(){Hc.GetObjectTogglesOverrides().editorEnabled&&Sa.AddKeyDown("/",function(){la.ExitAllStates(),la.EnterState(Gj)}),Na.game.events.addListener(Phaser.Core.Events.BLUR,function(){o.GetGameRemix().onBrowserBlur()}),Na.game.events.addListener(Phaser.Core.Events.FOCUS,function(){o.GetGameRemix().onBrowserFocus()}),o._RegisterComponents(),o._RegisterActions(),o._RegisterCommands(),o.GetGameRemix().gameInit(),o.GetGameRemix().bootPregameState()}},{key:"_RegisterComponents",value:function(){ka.RegisterComponentClass(Ia.Name,Ia),ka.RegisterComponentClass(ga.Name,ga),ka.RegisterComponentClass(ya.Name,ya),ka.RegisterComponentClass(Ii.Name,Ii),ka.RegisterComponentClass(ab.Name,ab),ka.RegisterComponentClass(nb.Name,nb),ka.RegisterComponentClass(Eb.Name,Eb),ka.RegisterComponentClass(za.Name,za),ka.RegisterComponentClass(Lc.Name,Lc),ka.RegisterComponentClass(Pa.Name,Pa),ka.RegisterComponentClass(di.Name,di),ka.RegisterComponentClass(nf.Name,nf),ka.RegisterComponentClass(Ai.Name,Ai),ka.RegisterComponentClass(qj.Name,qj),ka.RegisterComponentClass(zf.Name,zf),ka.RegisterComponentClass(vi.Name,vi),ka.RegisterComponentClass(Ff.Name,Ff),ka.RegisterComponentClass(Qc.Name,Qc),ka.RegisterComponentClass(wd.Name,wd),ka.RegisterComponentClass(ob.Name,ob),ka.RegisterComponentClass(ba.Name,ba),ka.RegisterComponentClass(nj.Name,nj),ka.RegisterComponentClass(Yb.Name,Yb),ka.RegisterComponentClass(Jb.Name,Jb),ka.RegisterComponentClass(Zi.Name,Zi),ka.RegisterComponentClass(gj.Name,gj),ka.RegisterComponentClass(aj.Name,aj),ka.RegisterComponentClass(Fi.Name,Fi),ka.RegisterComponentClass(Ui.Name,Ui),ka.RegisterComponentClass(qf.Name,qf),ka.RegisterComponentClass(Hf.Name,Hf),ka.RegisterComponentClass(cc.Name,cc),ka.RegisterComponentClass(Ba.Name,Ba),ka.RegisterComponentClass(ea.Name,ea),ka.RegisterComponentClass(ac.Name,ac),ka.RegisterComponentClass(Mi.Name,Mi),ka.RegisterComponentClass(ud.Name,ud),ka.RegisterComponentClass(vd.Name,vd),ka.RegisterComponentClass(Tf.Name,Tf)}},{key:"_RegisterActions",value:function(){Ja.RegisterActionClass(Gb.Name,Gb),Ja.RegisterActionClass(Jc.Name,Jc),Ja.RegisterActionClass(Kc.Name,Kc),Ja.RegisterActionClass(mf.Name,mf),Ja.RegisterActionClass(rf.Name,rf),Ja.RegisterActionClass($b.Name,$b),Ja.RegisterActionClass(Xh.Name,Xh),Ja.RegisterActionClass(qd.Name,qd),Ja.RegisterActionClass(hf.Name,hf),Ja.RegisterActionClass(Vh.Name,Vh),Ja.RegisterActionClass($h.Name,$h),Ja.RegisterActionClass(_d.Name,_d),Ja.RegisterActionClass(Lg.Name,Lg)}},{key:"_RegisterCommands",value:function(){Fa.RegisterCommand(vj.Name,new vj),Fa.RegisterCommand(Kf.Name,new Kf),Fa.RegisterCommand(Mf.Name,new Mf),Fa.RegisterCommand(ec.Name,new ec),Fa.RegisterCommand(Lf.Name,new Lf),Fa.RegisterCommand(Nf.Name,new Nf),Fa.RegisterCommand(Qf.Name,new Qf),Fa.RegisterCommand(Pf.Name,new Pf),Fa.RegisterCommand(Rf.Name,new Rf)}}]),o}();var Sr=function(e){wm(r,Wa);var t=ym(r);function r(){return um(this,r),t.apply(this,arguments)}return vm(r,[{key:"_trackSimple",value:function(e){console.log("simple track: ",e);try{gtag("event",na.GetGameRemix().getRemixCfg().gameTitle,{event_category:"simple",event_label:e.text})}catch(t){console.log("FAILED SECOND TIME")}}},{key:"_trackCount",value:function(e){console.log("count track: ",e);try{gtag("event",na.GetGameRemix().getRemixCfg().gameTitle,{event_category:"count",event_label:e.text})}catch(t){console.log("FAILED SECOND TIME")}}},{key:"onEnterCoverFirstTime",value:function(){this._trackSimple({type:"SIMPLE",text:na.GetGameRemix().getRemixCfg().gameTitle+"_enter_cover_first_time"})}},{key:"onEnterGameOverFirstTime",value:function(){this._trackSimple({type:"SIMPLE",text:na.GetGameRemix().getRemixCfg().gameTitle+"_enter_gameover_first_time"})}},{key:"onEnterGameplayFirstTime",value:function(){this._trackSimple({type:"SIMPLE",text:na.GetGameRemix().getRemixCfg().gameTitle+"_enter_gameplay_first_time"})}},{key:"onEnterGameplayEverytime",value:function(e){this._trackCount({type:"COUNT",text:na.GetGameRemix().getRemixCfg().gameTitle+"_enter_gameplay_x_times",value:e})}},{key:"onEnterCoverEverytime",value:function(){}},{key:"onEnterGameOverEverytime",value:function(){}},{key:"onGameplayFinished",value:function(){}},{key:"onUpdateGamePlaytime",value:function(){}},{key:"onUpdateGameplayPlaytime",value:function(){}}]),r}();function Tr(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Jj(e,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ur(e,n,i){return n&&Jj(e.prototype,n),i&&Jj(e,i),e}function Vr(e){return(Vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kj(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Xr(e,t,r){return t&&Kj(e.prototype,t),r&&Kj(e,r),e}function Yr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zr(e,t)}function Zr(e,t){return(Zr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $r(e){var t=bs();return function(){var r,o=Lj(e);if(t){var i=Lj(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return _r(this,r)}}function _r(e,t){return!t||"object"!==Vr(t)&&"function"!=typeof t?as(e):t}function as(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bs(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function Lj(e){return(Lj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cs(e){return(cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ds(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mj(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function es(e,t,a){return t&&Mj(e.prototype,t),a&&Mj(e,a),e}function fs(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gs(e,t)}function gs(e,t){return(gs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hs(e){var t=ks();return function(){var a,r=Nj(e);if(t){var n=Nj(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return is(this,a)}}function is(e,t){return!t||"object"!==cs(t)&&"function"!=typeof t?js(e):t}function js(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ks(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function Nj(e){return(Nj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oj(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ls(e,t,a){return t&&Oj(e.prototype,t),a&&Oj(e,a),e}function Pj(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ms(t){return(ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ns(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function Qj(t,o){for(var e=0;e<o.length;e++){var r=o[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function os(t,o,e){return o&&Qj(t.prototype,o),e&&Qj(t,e),t}function Uf(t,o,e){return(Uf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,o,e){var r=ps(t,o);if(r){var a=Object.getOwnPropertyDescriptor(r,o);return a.get?a.get.call(e):a.value}})(t,o,e||t)}function ps(t,o){for(;!Object.prototype.hasOwnProperty.call(t,o)&&null!==(t=ic(t)););return t}function qs(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),o&&rs(t,o)}function rs(t,o){return(rs=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t})(t,o)}function ss(t){var o=vs();return function(){var e,r=ic(t);if(o){var a=ic(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return ts(this,e)}}function ts(t,o){return!o||"object"!==ms(o)&&"function"!=typeof o?us(t):o}function us(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vs(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function ic(t){return(ic=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ws=function(t){qs(e,cb);var o=ss(e);function e(){return ns(this,e),o.apply(this,arguments)}return os(e,[{key:"onEnterInstant",value:function(){Uf(ic(e.prototype),"onEnterInstant",this).call(this),console.log("ENTER MICROMAPPER!")}},{key:"onExitInstant",value:function(){Uf(ic(e.prototype),"onExitInstant",this).call(this)}},{key:"onExitDelayed",value:function(){Uf(ic(e.prototype),"onExitDelayed",this).call(this)}}]),e}();function xs(e){return(xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rj(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tj(e,t,n){return t&&Sj(e.prototype,t),n&&Sj(e,n),e}function Vf(e,t,n){return(Vf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=ys(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ys(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jc(e)););return e}function zs(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&As(e,t)}function As(e,t){return(As=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bs(e){var t=Es();return function(){var n,r=jc(e);if(t){var o=jc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Cs(this,n)}}function Cs(e,t){return!t||"object"!==xs(t)&&"function"!=typeof t?Ds(e):t}function Ds(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Es(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function jc(e){return(jc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ha={COVER:"BAG_GUI_COVER",GAMEOVER:"BAG_GUI_GAME_OVER",GAMEPLAY:"BAG_GUI_GAMEPLAY",GAMEWON:"BAG_GUI_GAME_WON",TUTORIAL:"BAG_GUI_TUTORIAL",SETTINGS:"BAG_GUI_SETTINGS",FADE:"BAG_GUI_FADE",PAUSE:"BAG_GUI_PAUSE",PREGAME:"BAG_GUI_PREGAME",ADVERTISING_QUESTION:"ADVERTISING_QUESTION",REWARDS_LOTTERY:"REWARDS_LOTTERY",UPGRADES:"UPGRADES"};var Fs=function(e){zs(n,cb);var t=Bs(n);function n(){return Rj(this,n),t.apply(this,arguments)}return Tj(n,[{key:"onEnterInstant",value:function(){Vf(jc(n.prototype),"onEnterInstant",this).call(this),Uc.RewardedAdOverlay(),Uc.RewardedAdPanel(),Uc.RewardedAdButtonNoThankYou(),Uc.RewardedAdWhatYouGet(),Uc.RewardedAdButtonYesPlease()}},{key:"onExitInstant",value:function(){Vf(jc(n.prototype),"onExitInstant",this).call(this)}},{key:"onExitDelayed",value:function(){Vf(jc(n.prototype),"onExitDelayed",this).call(this),qa.MassQueueDisposeEntities(ha.ADVERTISING_QUESTION)}},{key:"onUpdate",value:function(){}}]),n}();var Uc=function(){function e(){Rj(this,e)}return Tj(e,null,[{key:"RewardedAdOverlay",value:function(){var e=da.MixImageActor(null,0,0,oa.PauseCurtain,La,0);return ea.SetAlpha(e,0),$b.InjectIntoActor(e,lb,{_alpha:1,_d:500}),ga.InjectIntoActor(e,[ha.ADVERTISING_QUESTION]),e.bake(),ea.SetDisplaySize(e,4096,4096),e}},{key:"RewardedAdPanel",value:function(){var e=da.MixImageActor(null,0,0,oa.Rewards_Panel,La,0);return ga.InjectIntoActor(e,[ha.ADVERTISING_QUESTION]),e.bake(),e}},{key:"RewardedAdButtonNoThankYou",value:function(){var e=da.MixSpriteActor(null,172,-100,oa.Rewards_CloseBtn,La,0);return ga.InjectIntoActor(e,[ha.ADVERTISING_QUESTION]),za.InjectIntoActor(e,fc,Hb.BASIC),za.InjectCommandOnUp(e,ec.Name,{f:function(e){na.GetGameRemix().getRemixCfg().funcDoLogicAfterDenyingAdvertising(),la.ExitState(fc)}}),e.bake(),e}},{key:"RewardedAdWhatYouGet",value:function(){var e=da.MixImageActor(null,0,0,oa.Rewards_WhatYouGet,La,0);return ga.InjectIntoActor(e,[ha.ADVERTISING_QUESTION]),e.bake(),e}},{key:"RewardedAdButtonYesPlease",value:function(){var e=da.MixSpriteActor(null,0,150,oa.Rewards_PlayAd_Button,La,0);return ga.InjectIntoActor(e,[ha.ADVERTISING_QUESTION]),za.InjectIntoActor(e,fc,Hb.BASIC),za.InjectCommandOnUp(e,ec.Name,{f:function(e){la.ExitState(fc)}}),e.bake(),e}}]),e}();function Gs(t){return(Gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Is(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Js(t,e)}function Js(t,e){return(Js=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ks(t){var e=Ns();return function(){var r,o=Uj(t);if(e){var n=Uj(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Ls(this,r)}}function Ls(t,e){return!e||"object"!==Gs(e)&&"function"!=typeof e?Ms(t):e}function Ms(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ns(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function Uj(t){return(Uj=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Os=function(t){Is(r,cb);var e=Ks(r);function r(){return Hs(this,r),e.apply(this,arguments)}return r}();function Ps(e){return(Ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vj(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wj(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xj(e,t,o){return t&&Wj(e.prototype,t),o&&Wj(e,o),e}function Wf(e,t,o){return(Wf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,o){var r=Qs(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(o):a.value}})(e,t,o||e)}function Qs(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kc(e)););return e}function Rs(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ss(e,t)}function Ss(e,t){return(Ss=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ts(e){var t=Ws();return function(){var o,r=kc(e);if(t){var a=kc(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return Us(this,o)}}function Us(e,t){return!t||"object"!==Ps(t)&&"function"!=typeof t?Vs(e):t}function Vs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ws(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function kc(e){return(kc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zd={scorefont:"scorefont"};var vb="ACT_COVER_ENTER";var wb="ACT_COVER_EXIT";var Xs=function(e){Rs(o,cb);var t=Ts(o);function o(){return Vj(this,o),t.apply(this,arguments)}return Xj(o,[{key:"onEnterInstant",value:function(){Wf(kc(o.prototype),"onEnterInstant",this).call(this),fa.TriggerActionOnAllActorsInBag(vb,ha.COVER)}},{key:"onExitInstant",value:function(){Wf(kc(o.prototype),"onExitInstant",this).call(this),fa.TriggerActionOnAllActorsInBag(wb,ha.COVER)}},{key:"onExitDelayed",value:function(){Wf(kc(o.prototype),"onExitDelayed",this).call(this),qa.MassQueueDisposeEntities(ha.COVER)}}]),o}();var lc=function(){function e(){Vj(this,e)}return Xj(e,null,[{key:"CoverTitle",value:function(){var e=da.MixImageActor(null,0,0,oa.GameTitle,La,0);return Ba.InjectIntoActor(e,["cover_title"]),ga.InjectIntoActor(e,[ha.COVER]),da.GetActionMixerWithValues().mixTweenPositionByDeltaFrom_ScreenTop(e,vb,{_y:-1e3,_d:800,_onComplete:[{type:"trigger",trigger:"ACT_TWEEN_COVER_ENTER_END"}]}),da.GetActionMixerWithValues().mixTweenPositionByDeltaTo_ScreenTop(e,wb,{_y:-1e3,_d:800}),da.GetActionMixerWithValues().mixTweenPositionYoYo(e,"ACT_TWEEN_COVER_ENTER_END",{_d:1200}),e.bake(),e}},{key:"Bmlogo",value:function(){var e=da.MixImageActor(null,0,0,oa.BMLogo,id,0);return Ba.InjectIntoActor(e,["cover_logo"]),ga.InjectIntoActor(e,[ha.COVER]),Gb.InjectIntoActor(e,lb,-1,1),da.GetActionMixerWithValues().mixTweenPositionByDeltaFrom_ScreenTop(e,vb,{_y:-300,_d:800}),da.GetActionMixerWithValues().mixTweenPositionByDeltaTo_ScreenTop(e,wb,{_y:-300,_d:800}),e.bake(),e}},{key:"Highscoreicon",value:function(){var e=da.MixImageActor(null,0,0,oa.HighscoreIcon,Cb,0);return Ba.InjectIntoActor(e,["cover_highscore_icon"]),ga.InjectIntoActor(e,[ha.COVER]),Gb.InjectIntoActor(e,lb,1,1),da.GetActionMixerWithValues().mixTweenPositionByDeltaFrom_ScreenTop(e,vb,{_y:-300,_d:500}),da.GetActionMixerWithValues().mixTweenPositionByDeltaTo_ScreenTop(e,wb,{_y:-1e3,_d:800}),e.bake(),e}},{key:"ScorePanel",value:function(){var e=da.MixImageActor(null,0,0,oa.ScorePanel,Cb,0);return Ba.InjectIntoActor(e,["cover_score_panel"]),ga.InjectIntoActor(e,[ha.COVER]),Gb.InjectIntoActor(e,lb,1,1),da.GetActionMixerWithValues().mixTweenPositionByDeltaFrom_ScreenTop(e,vb,{_y:-300,_d:450}),da.GetActionMixerWithValues().mixTweenPositionByDeltaTo_ScreenTop(e,wb,{_d:800,_y:-1e3}),e.bake(),e}},{key:"Scorefont",value:function(){var e=da.MixFontActor(null,0,0,zd.scorefont,Cb,0);return Ba.InjectIntoActor(e,["cover_score_font"]),ga.InjectIntoActor(e,[ha.COVER]),da.GetActionMixerWithValues().mixTweenPositionByDeltaFrom_ScreenTop(e,vb),da.GetActionMixerWithValues().mixTweenPositionByDeltaTo_ScreenTop(e,wb),e.bake(),e}},{key:"BtnPlay",value:function(e){var t=da.MixSpriteActor(null,0,0,oa.Btn_Play,La,1);Ba.InjectIntoActor(t,["cover_btn_play"]),ga.InjectIntoActor(t,[ha.COVER]),Ia.InjectIntoActor(t,"alias_cover_btn_play"),da.GetActionMixerWithValues().mixTweenPositionByDeltaFrom_ScreenBottom(t,vb,{_y:700,_d:1100,delay:300}),da.GetActionMixerWithValues().mixTweenPositionByDeltaTo_ScreenBottom(t,wb,{_y:1e3}),za.InjectIntoActor(t,tb,Hb.BASIC),za.InjectCommandOnUp(t,ec.Name,{f:e}),t.bake()}}]),e}();function Ys(e){return(Ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yj(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zj(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function $j(e,t,r){return t&&Zj(e.prototype,t),r&&Zj(e,r),e}function Vc(e,t,r){return(Vc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var o=Zs(e,t);if(o){var $=Object.getOwnPropertyDescriptor(o,t);return $.get?$.get.call(r):$.value}})(e,t,r||e)}function Zs(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xb(e)););return e}function $s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_s(e,t)}function _s(e,t){return(_s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function at(e){var t=dt();return function(){var r,o=xb(e);if(t){var $=xb(this).constructor;r=Reflect.construct(o,arguments,$)}else r=o.apply(this,arguments);return bt(this,r)}}function bt(e,t){return!t||"object"!==Ys(t)&&"function"!=typeof t?ct(e):t}function ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function xb(e){return(xb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _j="ACT_FADE_ENTER";var ak="ACT_FADE_EXIT";var et=function(e){$s(r,cb);var t=at(r);function r(){return Yj(this,r),t.apply(this,arguments)}return $j(r,[{key:"onEnterInstant",value:function(){Vc(xb(r.prototype),"onEnterInstant",this).call(this),ft.FadeZaslona(this.getStateExitTimeInMs()),fa.TriggerActionOnAllActorsInBag(_j,ha.FADE)}},{key:"onEnterDelayed",value:function(){Vc(xb(r.prototype),"onEnterDelayed",this).call(this)}},{key:"onExitInstant",value:function(){Vc(xb(r.prototype),"onExitInstant",this).call(this),fa.TriggerActionOnAllActorsInBag(ak,ha.FADE)}},{key:"onExitDelayed",value:function(){Vc(xb(r.prototype),"onExitDelayed",this).call(this),qa.MassQueueDisposeEntities(ha.FADE)}},{key:"onUpdate",value:function(e,t){Vc(xb(r.prototype),"onUpdate",this).call(this,e,t)}}]),r}();var ft=function(){function e(){Yj(this,e)}return $j(e,null,[{key:"FadeZaslona",value:function(e){var t=Ea.GetEmptyActor();ya.InjectIntoActor(t,0,0),ab.InjectIntoActor(t,oa.ZaslonkaFade,Wg),ga.InjectIntoActor(t,[ha.FADE]),ea.SetAlpha(t,0),ea.SetDisplaySize(t,2500,2500),$b.InjectIntoActor(t,_j,{_alpha:1,_d:e}),$b.InjectIntoActor(t,ak,{_alpha:0,_d:e}),t.bake()}}]),e}();function gt(e){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bk(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ck(e,t,r){return t&&bk(e.prototype,t),r&&bk(e,r),e}function Ad(e,t,r){return(Ad="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var o=ht(e,t);if(o){var $=Object.getOwnPropertyDescriptor(o,t);return $.get?$.get.call(r):$.value}})(e,t,r||e)}function ht(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lb(e)););return e}function it(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jt(e,t)}function jt(e,t){return(jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kt(e){var t=nt();return function(){var r,o=Lb(e);if(t){var $=Lb(this).constructor;r=Reflect.construct(o,arguments,$)}else r=o.apply(this,arguments);return lt(this,r)}}function lt(e,t){return!t||"object"!==gt(t)&&"function"!=typeof t?mt(e):t}function mt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function Lb(e){return(Lb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ot="ACT_TWEEN_OUT_ON_REQUEST";var Bd={HTP_MinimalHand:"HTP_MinimalHand"};var Wc="ACT_GAMEOVER_ENTER";var Xc="ACT_GAMEOVER_EXIT";var pt=function e(){Xf(this,e),this.canShowTrophy=!1},qt=function(e){it(r,cb);var t=kt(r);function r(){var e;return Xf(this,r),(e=t.call(this)).stateVals=new pt,e}return ck(r,[{key:"onEnterInstant",value:function(){Ad(Lb(r.prototype),"onEnterInstant",this).call(this),this.stateVals.canShowTrophy=!1,fa.TriggerActionOnAllActorsInBag(Wc,ha.GAMEOVER),qa.IfEntityByAliasExistsThenDispose("alias_settings_btn_pause")}},{key:"onExitInstant",value:function(){Ad(Lb(r.prototype),"onExitInstant",this).call(this),fa.TriggerActionOnAllActorsInBag(Xc,ha.GAMEOVER),fa.TriggerActionOnAllActorsInBag(ot,ha.REWARDS_LOTTERY)}},{key:"onExitDelayed",value:function(){Ad(Lb(r.prototype),"onExitDelayed",this).call(this),qa.MassQueueDisposeEntities(ha.GAMEOVER)}},{key:"onUpdate",value:function(e,t){Ad(Lb(r.prototype),"onUpdate",this).call(this,e,t)}},{key:"enableHigherScoreTrophy",value:function(){this.stateVals.canShowTrophy=!0}},{key:"canShowHigherScoreTrophy",value:function(){return this.stateVals.canShowTrophy}},{key:"enableTapToCover",value:function(){this.resetTicker("delayGotoCoverTapCheck",1250),Sa.ResetTap("tap_on_game_over_to_cover")}},{key:"doGameOverWantsToQuit",value:function(){return!!this.isInputForTapAndTickerValid("delayGotoCoverTapCheck","tap_on_game_over_to_cover")}}]),r}();var Cd=function(){function e(){Xf(this,e)}return ck(e,null,[{key:"GameOverIcon",value:function(){var e=da.MixImageActor(null,0,0,oa.GameOverIcon,La,1);return ya.InjectIntoActor(e,0,0),Ba.InjectIntoActor(e,["gameover_icon"]),ga.InjectIntoActor(e,[ha.GAMEOVER]),da.GetActionMixerWithValues().mixTweenPositionByDeltaFrom_ScreenTop(e,Wc,{_y:-1e3,_d:800}),da.GetActionMixerWithValues().mixTweenPositionByDeltaTo_ScreenTop(e,Xc,{_d:800,_y:-1e3}),e.bake(),e}},{key:"Highscore",value:function(){var e=da.MixImageActor(null,0,0,oa.HighscoreBigIcon,La,0);return ga.InjectIntoActor(e,[ha.GAMEOVER]),Ba.InjectIntoActor(e,["gameover_big_highscore"]),da.GetActionMixerWithValues().mixTweenPositionByDeltaFrom_ScreenTop(e,Wc,{_y:-1e3,_d:800}),da.GetActionMixerWithValues().mixTweenPositionByDeltaTo_ScreenTop(e,Xc,{_d:800,_y:-1e3}),e.bake(),e}},{key:"TryAgainSpinned",value:function(){var e=da.MixImageActor(null,0,0,oa.TryAgain,La,1);return ga.InjectIntoActor(e,[ha.GAMEOVER]),Ba.InjectIntoActor(e,["gameover_tryagain"]),da.GetActionMixerWithValues().mixTweenPositionByDeltaFrom_ScreenTop(e,Wc,{_y:-1e3,_d:800}),da.GetActionMixerWithValues().mixTweenPositionByDeltaTo_ScreenTop(e,Xc,{_d:800,_y:-1e3}),e.bake(),e}},{key:"TapToContinue",value:function(){var e=da.MixSpineObject(null,0,0,Bd.HTP_MinimalHand,"Tap",!0,La,1);return ga.InjectIntoActor(e,[ha.GAMEOVER]),Ia.InjectIntoActor(e,"alias_gameover_tap_to_continue"),Ba.InjectIntoActor(e,["gameover_tap_to_continue"]),da.GetActionMixerWithValues().mixTweenPositionByDeltaFrom_ScreenTop(e,Wc,{_y:1200,_d:800}),da.GetActionMixerWithValues().mixTweenPositionByDeltaTo_ScreenTop(e,Xc,{_y:1200,_d:800}),e.bake(),e}}]),e}();function rt(e){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ek(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function fk(e,t,r){return t&&ek(e.prototype,t),r&&ek(e,r),e}function Dd(e,t,r){return(Dd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var o=st(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(r):n.value}})(e,t,r||e)}function st(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Mb(e)););return e}function tt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ut(e,t)}function ut(e,t){return(ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vt(e){var t=yt();return function(){var r,o=Mb(e);if(t){var n=Mb(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return wt(this,r)}}function wt(e,t){return!t||"object"!==rt(t)&&"function"!=typeof t?xt(e):t}function xt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function Mb(e){return(Mb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mc="ACT_GAMEPLAY_ENTER";var nc="ACT_GAMEPLAY_EXIT";var zt=function(e){tt(r,cb);var t=vt(r);function r(){return dk(this,r),t.call(this)}return fk(r,[{key:"onEnterInstant",value:function(){Dd(Mb(r.prototype),"onEnterInstant",this).call(this)}},{key:"onUpdate",value:function(e,t){Dd(Mb(r.prototype),"onUpdate",this).call(this,e,t)}},{key:"onExitInstant",value:function(){Dd(Mb(r.prototype),"onExitInstant",this).call(this)}},{key:"onExitDelayed",value:function(){Dd(Mb(r.prototype),"onExitDelayed",this).call(this)}}]),r}();var Ed=function(){function e(){dk(this,e)}return fk(e,null,[{key:"ScorePanel",value:function(){var e=da.MixImageActor(null,0,0,oa.ScorePanel,Cb,0);return Ba.InjectIntoActor(e,["gameplay_score_panel"]),ga.InjectIntoActor(e,[ha.GAMEPLAY]),da.GetActionMixerWithValues().mixTweenPositionByDeltaFrom_ScreenTop(e,mc,{_y:-300,_d:500}),da.GetActionMixerWithValues().mixTweenPositionByDeltaTo_ScreenTop(e,nc,{_y:-300,_d:500}),Gb.InjectIntoActor(e,lb,1,1),e.bake(),e}},{key:"ScoreText",value:function(){var e=da.MixFontActor(null,0,0,zd.scorefont,Cb,0);return Ba.InjectIntoActor(e,["gameplay_score_font"]),ga.InjectIntoActor(e,[ha.GAMEPLAY]),Ia.InjectIntoActor(e,"alias_gameplay_text_score"),da.GetActionMixerWithValues().mixTweenPositionByDeltaFrom_ScreenTop(e,mc),da.GetActionMixerWithValues().mixTweenPositionByDeltaTo_ScreenTop(e,nc),e.bake(),e}},{key:"ScoreIcon",value:function(){var e=da.MixImageActor(null,0,0,oa.ScoreIcon,Cb,0);return Ba.InjectIntoActor(e,["gameplay_score_icon"]),ga.InjectIntoActor(e,[ha.GAMEPLAY]),Gb.InjectIntoActor(e,lb,1,1),da.GetActionMixerWithValues().mixTweenPositionByDeltaFrom_ScreenTop(e,mc),da.GetActionMixerWithValues().mixTweenPositionByDeltaTo_ScreenTop(e,nc),e.bake(),e}},{key:"Tutorial",value:function(){var e=Ea.GetEmptyActor();return ya.InjectIntoActor(e,0,0),Ba.InjectIntoActor(e,["gameplay_htp_hand"]),Eb.InjectIntoActor(e,Bd.HTP_MinimalHand,"Tap",!0,La),ob.InjectIntoActor(e,"Tap"),ga.InjectIntoActor(e,[ha.GAMEPLAY]),Ia.InjectIntoActor(e,"alias_howtoplay_generic_anim"),e.bake(),e}}]),e}();function At(e){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yf(e,t,r){return(Yf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var o=Bt(e,t);if(o){var $=Object.getOwnPropertyDescriptor(o,t);return $.get?$.get.call(r):$.value}})(e,t,r||e)}function Bt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oc(e)););return e}function Ct(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dt(e,t)}function Dt(e,t){return(Dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Et(e){var t=Ht();return function(){var r,o=oc(e);if(t){var $=oc(this).constructor;r=Reflect.construct(o,arguments,$)}else r=o.apply(this,arguments);return Ft(this,r)}}function Ft(e,t){return!t||"object"!==At(t)&&"function"!=typeof t?Gt(e):t}function Gt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ht(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function oc(e){return(oc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hk(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ik(e,t,r){return t&&hk(e.prototype,t),r&&hk(e,r),e}var It="ACT_PAUSE_ENTER";var Jt="ACT_PAUSE_EXIT";var Zf=function(){function e(){gk(this,e)}return ik(e,null,[{key:"PauseBackground",value:function(){var e=Ea.GetEmptyActor();ya.InjectIntoActor(e,0,0),ab.InjectIntoActor(e,oa.PauseCurtain,jd),ga.InjectIntoActor(e,[ha.PAUSE]),e.bake(),ea.SetDisplaySize(e,8192,8192)}},{key:"PauseIcon",value:function(){var e=Ea.GetEmptyActor();ya.InjectIntoActor(e,0,-100),ab.InjectIntoActor(e,oa.PauseIcon,jd),ga.InjectIntoActor(e,[ha.PAUSE]),e.bake()}},{key:"BtnPlay",value:function(){var e=Ea.GetEmptyActor();ya.InjectIntoActor(e,0,200),ab.InjectIntoActor(e,oa.Btn_Play,jd),ga.InjectIntoActor(e,[ha.PAUSE]),za.InjectIntoActor(e,gc,Hb.BASIC),za.InjectCommandOnUp(e,Nf.Name,null),e.bake()}}]),e}();var Kt=function(e){Ct(r,cb);var t=Et(r);function r(){return gk(this,r),t.apply(this,arguments)}return ik(r,[{key:"onEnterInstant",value:function(){Yf(oc(r.prototype),"onEnterInstant",this).call(this),Zf.PauseBackground(),Zf.PauseIcon(),Zf.BtnPlay(),fa.TriggerActionOnAllActorsInBag(It,ha.PAUSE),na.GetGameRemix().doOnEnterPauseState()}},{key:"onExitInstant",value:function(){Yf(oc(r.prototype),"onExitInstant",this).call(this),fa.TriggerActionOnAllActorsInBag(Jt,ha.PAUSE)}},{key:"onExitDelayed",value:function(){Yf(oc(r.prototype),"onExitDelayed",this).call(this),qa.MassQueueDisposeEntities(ha.PAUSE)}}]),r}();function Lt(e){return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $f(e,t,r){return($f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var o=Mt(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(r):n.value}})(e,t,r||e)}function Mt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=pc(e)););return e}function Nt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ot(e,t)}function Ot(e,t){return(Ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pt(e){var t=St();return function(){var r,o=pc(e);if(t){var n=pc(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Qt(this,r)}}function Qt(e,t){return!t||"object"!==Lt(t)&&"function"!=typeof t?Rt(e):t}function Rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function St(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function pc(e){return(pc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kk(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function lk(e,t,r){return t&&kk(e.prototype,t),r&&kk(e,r),e}var Tt="ACT_PREGAME_ENTER";var Ut="ACT_PREGAME_EXIT";var Vt=function(){function e(){jk(this,e)}return lk(e,null,[{key:"LogoPreloader",value:function(){var e=Ea.GetEmptyActor();ya.InjectIntoActor(e,0,-75),ab.InjectIntoActor(e,"PreloaderLogo",La),ga.InjectIntoActor(e,[ha.PREGAME]),e.bake()}},{key:"BtnPlay",value:function(e){var t=Ea.GetEmptyActor();ya.InjectIntoActor(t,0,170),ab.InjectIntoActor(t,oa.Btn_Play,La),ga.InjectIntoActor(t,[ha.PREGAME]),za.InjectIntoActor(t,Rc,Hb.BASIC),za.InjectCommandOnUp(t,ec.Name,e),t.bake()}}]),e}();var Wt=function(e){Nt(r,cb);var t=Pt(r);function r(){return jk(this,r),t.apply(this,arguments)}return lk(r,[{key:"onEnterInstant",value:function(){$f(pc(r.prototype),"onEnterInstant",this).call(this),Vt.BtnPlay(function(){na.GetGameRemix().bootInitialGameStates()}),fa.TriggerActionOnAllActorsInBag(Tt,ha.PREGAME)}},{key:"onExitInstant",value:function(){$f(pc(r.prototype),"onExitInstant",this).call(this),fa.TriggerActionOnAllActorsInBag(Ut,ha.PREGAME)}},{key:"onExitDelayed",value:function(){$f(pc(r.prototype),"onExitDelayed",this).call(this),qa.MassQueueDisposeEntities(ha.PREGAME)}}]),r}();function Xt(t){return(Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mk(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nk(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function ok(t,e,n){return e&&nk(t.prototype,e),n&&nk(t,n),t}function _f(t,e,n){return(_f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=Yt(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function Yt(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qc(t)););return t}function Zt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$t(t,e)}function $t(t,e){return($t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _t(t){var e=gu();return function(){var n,o=qc(t);if(e){var r=qc(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return bu(this,n)}}function bu(t,e){return!e||"object"!==Xt(e)&&"function"!=typeof e?du(t):e}function du(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gu(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function qc(t){return(qc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pk="ACT_SETTINGS_ENTER";var qk="ACT_SETTINGS_EXIT";var hu=function(t){Zt(n,cb);var e=_t(n);function n(){return mk(this,n),e.apply(this,arguments)}return ok(n,[{key:"onEnterInstant",value:function(){_f(qc(n.prototype),"onEnterInstant",this).call(this),rk.ButtonToggleSound(),fa.TriggerActionOnAllActorsInBag(pk,ha.SETTINGS)}},{key:"onExitInstant",value:function(){_f(qc(n.prototype),"onExitInstant",this).call(this),fa.TriggerActionOnAllActorsInBag(qk,ha.SETTINGS)}},{key:"onExitDelayed",value:function(){_f(qc(n.prototype),"onExitDelayed",this).call(this),qa.MassQueueDisposeEntities(ha.SETTINGS)}}]),n}();var rk=function(){function t(){mk(this,t)}return ok(t,null,[{key:"ButtonPause",value:function(){var t=fa.GetActorByAliasIfExists("alias_settings_btn_pause");if(t)return t;var e=Ea.GetEmptyActor();ya.InjectIntoActor(e,0,0),Ba.InjectIntoActor(e,["settings_btn_pause"]),Lc.InjectIntoActor(e,oa.Btn_Pause,id),ga.InjectIntoActor(e,[ha.SETTINGS]),Ia.InjectIntoActor(e,"alias_settings_btn_pause"),za.InjectIntoActor(e,Sc,Hb.BASIC),za.InjectCommandOnUp(e,Lf.Name,null),e.bake(),ea.MoveByHalfOwnSizeInDir(e,-1,1),ea.SetScale(e,.1),da.GetActionMixerWithValues().mixTweenScaleTo(e,"ACT_CUSTOM_SCALE_ME",{_d:200},1),e.triggerActions("ACT_CUSTOM_SCALE_ME")}},{key:"ButtonToggleSound",value:function(){var t=Ea.GetEmptyActor();Ba.InjectIntoActor(t,["settings_btn_sound_toggle"]),ya.InjectIntoActor(t,0,0),Lc.InjectIntoActor(t,oa.Btn_SoundOn,id),ga.InjectIntoActor(t,[ha.SETTINGS]),za.InjectIntoActor(t,Sc,Hb.BASIC),za.SetAsToggle(t),za.InjectSwapFromPositiveStateActionOnUp(t,Kf.Name),za.InjectSwapFromNegativeStateActionOnUp(t,Mf.Name),za.SetToggleStateWithoutTriggeringActions(t,gb.GetAudioState()),wd.InjectIntoActor(t,{sound_on:{texture:oa.Btn_SoundOn},sound_off:{texture:oa.Btn_SoundOff}}),qd.InjectIntoActor(t,yf,"sound_on"),qd.InjectIntoActor(t,xf,"sound_off"),t.bake(),ea.MoveByHalfOwnSizeInDir(t,-1,1),Jc.InjectIntoActor(t,pk,{_x:0,_y:-200,_d:500}),Kc.InjectIntoActor(t,qk,{_x:0,_y:-200,_d:500})}}]),t}();function ju(t){return(ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ku(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function sk(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function mu(t,e,r){return e&&sk(t.prototype,e),r&&sk(t,r),t}function pu(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qu(t,e)}function qu(t,e){return(qu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vu(t){var e=yu();return function(){var r,o=tk(t);if(e){var n=tk(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return wu(this,r)}}function wu(t,e){return!e||"object"!==ju(e)&&"function"!=typeof e?xu(t):e}function xu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yu(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function tk(t){return(tk=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var zu=function(t){pu(r,Phaser.Plugins.BasePlugin);var e=vu(r);function r(t){return ku(this,r),e.call(this,t)}return mu(r,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}},{key:"add",value:function(t,e){return new Bf(t,e)}}]),r}();function Au(t){return(Au="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uk(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Cu(t,e,r){return e&&uk(t.prototype,e),r&&uk(t,r),t}function Du(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Eu(t,e)}function Eu(t,e){return(Eu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Fu(t){var e=Iu();return function(){var r,o=vk(t);if(e){var n=vk(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Gu(this,r)}}function Gu(t,e){return!e||"object"!==Au(e)&&"function"!=typeof e?Hu(t):e}function Hu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Iu(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function vk(t){return(vk=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ju(t){return(Ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ku(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wk(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Lu(t,e,r){return e&&wk(t.prototype,e),r&&wk(t,r),t}function Mu(t,e,r,o){return(Mu="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,r,o){var n,i=xk(t,e);if(i){if((n=Object.getOwnPropertyDescriptor(i,e)).set)return n.set.call(o,r),!0;if(!n.writable)return!1}if(n=Object.getOwnPropertyDescriptor(o,e)){if(!n.writable)return!1;n.value=r,Object.defineProperty(o,e,n)}else Nu(o,e,r);return!0})(t,e,r,o)}function Nb(t,e,r,o,n){if(!Mu(t,e,r,o||t)&&n)throw new Error("failed to set property");return r}function Nu(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Za(t,e,r){return(Za="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var o=xk(t,e);if(o){var n=Object.getOwnPropertyDescriptor(o,e);return n.get?n.get.call(r):n.value}})(t,e,r||t)}function xk(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ua(t)););return t}function Ou(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pu(t,e)}function Pu(t,e){return(Pu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qu(t){var e=Tu();return function(){var r,o=ua(t);if(e){var n=ua(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Ru(this,r)}}function Ru(t,e){return!e||"object"!==Ju(e)&&"function"!=typeof e?Su(t):e}function Su(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tu(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function ua(t){return(ua=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Uu(o){return(Uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}function Vu(o,e){if(!(o instanceof e))throw new TypeError("Cannot call a class as a function")}function yk(o,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(o,r.key,r)}}function Wu(o,e,t){return e&&yk(o.prototype,e),t&&yk(o,t),o}function Xu(o,e,t){return(Xu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(o,e,t){var r=Yu(o,e);if(r){var n=Object.getOwnPropertyDescriptor(r,e);return n.get?n.get.call(t):n.value}})(o,e,t||o)}function Yu(o,e){for(;!Object.prototype.hasOwnProperty.call(o,e)&&null!==(o=Fd(o)););return o}function Zu(o,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),e&&$u(o,e)}function $u(o,e){return($u=Object.setPrototypeOf||function(o,e){return o.__proto__=e,o})(o,e)}function _u(o){var e=cv();return function(){var t,r=Fd(o);if(e){var n=Fd(this).constructor;t=Reflect.construct(r,arguments,n)}else t=r.apply(this,arguments);return av(this,t)}}function av(o,e){return!e||"object"!==Uu(e)&&"function"!=typeof e?bv(o):e}function bv(o){if(void 0===o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function cv(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(o){return!1}}function Fd(o){return(Fd=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var dv=Phaser.GameObjects.Zone,ev=Phaser.Utils.Array.Add,fv=Phaser.Utils.Array.Remove,Yc=function(o){Zu(t,dv);var e=_u(t);function t(o,r,n,$,a){var i;return Vu(this,t),void 0===$&&($=1),void 0===a&&(a=1),(i=e.call(this,o,r,n,$,a)).children=[],i}return Wu(t,[{key:"destroy",value:function(o){this.scene&&(this.clear(!o),Xu(Fd(t.prototype),"destroy",this).call(this,o))}},{key:"contains",value:function(o){return-1!==this.children.indexOf(o)}},{key:"add",value:function(o){return ev(this.children,o,0,function(o){o.on("destroy",this.remove,this)},this),this}},{key:"remove",value:function(o,e){return fv(this.children,o,function(o){o.off("destroy",this.remove,this),e&&o.destroy()}),this}},{key:"clear",value:function(o){for(var e,t=0,r=this.children.length;t<r;t++)(e=this.children[t]).off("destroy",this.remove,this),o&&e.destroy();return this.children.length=0,this}}]),t}(),zk=Phaser.GameObjects.Components;Phaser.Class.mixin(Yc,[zk.Alpha,zk.Flip]);var ag=function(t){var e;return t.hasOwnProperty("rexContainer")&&(e=t.rexContainer.parent),e},gv=function(t){for(var e=ag(t);e;)t=e,e=ag(e);return t};var hv={setParent:function(t,e){void 0===e&&(e=this);var r=this.getLocalState(t);return e?(r.parent=e,r.self=t):(r.parent=null,r.self=null),this},getParent:function(t){return void 0===t&&(t=this),ag(t)},getTopmostParent:function(t){return void 0===t&&(t=this),gv(t)}};var iv=Yc.prototype.add,Ak=function(t){return this.setParent(t),this.resetChildState(t).updateChildVisible(t).updateChildActive(t).updateChildScrollFactor(t).updateChildMask(t),iv.call(this,t),this},jv={add:function(t){return Array.isArray(t)?this.addMultiple(t):Ak.call(this,t),this},addMultiple:function(t){for(var a=0,e=t.length;a<e;a++)Ak.call(this,t[a]);return this}};var kv=Yc.prototype.remove,lv=Yc.prototype.clear,mv={remove:function(e,t){return this.getParent(e)!==this?this:(this.setParent(e,null),kv.call(this,e,t),this)},clear:function(e){for(var t=0,r=this.children.length;t<r;t++)this.setParent(this.children[t],null);return lv.call(this,e),this}};var nv={getLocalState:function(t){return t.hasOwnProperty("rexContainer")||(t.rexContainer={}),t.rexContainer},resetChildState:function(t){return this.resetChildPositionState(t).resetChildVisibleState(t).resetChildAlphaState(t).resetChildActiveState(t),this},resetChildrenState:function(t){for(var e=0,r=t.length;e<r;e++)this.resetChildState(t[e]);return this},syncProperties:function(){return this.syncPosition().syncVisible().syncAlpha().syncActive().syncScrollFactor().syncMask(),this}};var Bk=Phaser.Math.RotateAround,ov={worldToLocal:function(t){return t.x-=this.x,t.y-=this.y,Bk(t,0,0,-this.rotation),t.x/=this.scaleX,t.y/=this.scaleY,t.x*=this.flipX?-1:1,t.y*=this.flipY?-1:1,t},localToWorld:function(t){return t.x*=this.flipX?-1:1,t.y*=this.flipY?-1:1,t.x*=this.scaleX,t.y*=this.scaleY,Bk(t,0,0,this.rotation),t.x+=this.x,t.y+=this.y,t}};var bg=function(f,$){return f===$?1:f/$};var pv={updateChildPosition:function(i){i.isRexContainerLite&&(i.syncChildrenEnable=!1);var t=this.getLocalState(i);return i.x=t.x,i.y=t.y,this.localToWorld(i),i.scaleX=t.scaleX*this.scaleX,i.scaleY=t.scaleY*this.scaleY,void 0!==i.flipX&&(i.flipX=this.flipX?!t.flipX:t.flipX,i.flipY=this.flipY?!t.flipY:t.flipY),i.rotation=t.rotation+this.rotation,i.isRexContainerLite&&(i.syncChildrenEnable=!0,i.syncPosition()),this},syncPosition:function(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildPosition,this),this},resetChildPositionState:function(i){var t=this.getLocalState(i);return t.x=i.x,t.y=i.y,this.worldToLocal(t),t.scaleX=bg(i.scaleX,this.scaleX),t.scaleY=bg(i.scaleY,this.scaleY),void 0!==i.flipX&&(t.flipX=i.flipX,t.flipY=i.flipY),t.rotation=i.rotation-this.rotation,this},setChildPosition:function(i,t,a){return i.x=t,i.y=a,this.resetChildPositionState(i),this},setChildLocalPosition:function(i,t,a){var e=this.getLocalState(i);return e.x=t,e.y=a,this.updateChildPosition(i),this}};var qv={updateChildVisible:function(i){return i.visible=this.visible&&this.getLocalState(i).visible,this},syncVisible:function(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildVisible,this),this},resetChildVisibleState:function(i){return this.getLocalState(i).visible=i.visible,this},setChildVisible:function(i,t){return i.visible=t,this.resetChildVisibleState(i),this},setChildLocalVisible:function(i,t){return void 0===t&&(t=!0),this.getLocalState(i).visible=t,this.updateChildVisible(i),this}};var rv={updateChildAlpha:function(t){return t.alpha=this.alpha*this.getLocalState(t).alpha,this},syncAlpha:function(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildAlpha,this),this},resetChildAlphaState:function(t){return this.getLocalState(t).alpha=bg(t.alpha,this.alpha),this},setChildAlpha:function(t,a){return t.alpha=a,this.resetChildAlphaState(t),this._add},setChildLocalAlpha:function(t,a){return this.getLocalState(t).alpha=a,this.updateChildAlpha(t),this}};var sv={updateChildActive:function(t){return t.active=this.active&&this.getLocalState(t).active,this},syncActive:function(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildActive,this),this},resetChildActiveState:function(t){return this.getLocalState(t).active=t.active,this},setChildActive:function(t,e){return t.active=e,this.resetChildActiveState(t),this},setChildLocalActive:function(t,e){return void 0===e&&(e=!0),this.getLocalState(t).active=e,this.updateChildActive(t),this}};var tv={updateChildScrollFactor:function(t){return t.setScrollFactor(this.scrollFactorX,this.scrollFactorY),this},syncScrollFactor:function(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildScrollFactor,this),this}};var uv={updateChildMask:function(s){return null==this.mask?this:((this.mask.hasOwnProperty("geometryMask")?this.mask.geometryMask:this.mask.bitmapMask)!==s&&(s.mask=this.mask),this)},syncMask:function(){return this.syncChildrenEnable&&this.children.forEach(this.updateChildMask,this),this},setMask:function(s){return this.mask=s,this},clearMask:function(s){return void 0===s&&(s=!1),s&&this.mask&&this.mask.destroy(),this.mask=null,this}};var vv={setDepth:function(t,e){if(this.depth=t,!e&&this.children)for(var h=this.getAllChildren(),i=0,n=h.length;i<n;i++)h[i].depth=t;return this},swapDepth:function(t){var e=this.depth,h=t.depth;return this.setDepth(h),t.setDepth(e),this},incDepth:function(t){if(this.depth+=t,this.children)for(var e=this.getAllChildren(),h=0,i=e.length;h<i;h++)e[h].depth+=t;return this}};function wv(r){return Av(r)||zv(r)||yv(r)||xv()}function xv(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function yv(r,t){if(r){if("string"==typeof r)return cg(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?cg(r,t):void 0}}function zv(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}function Av(r){if(Array.isArray(r))return cg(r)}function cg(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}var yb=Phaser.Utils.Array,Bv={getChildren:function(){return this.children},getAllChildren:function(r){void 0===r&&(r=[]);for(var t,e=this.children,n=0,a=e.length;n<a;n++){var i;if(t=e[n],r.push(t),t.hasOwnProperty("isRexContainerLite"))(i=r).push.apply(i,wv(t.getAllChildren()))}return r},contains:function(r){var t=this.getParent(r);return!!t&&(t===this||this.contains(t))},getByName:function(r,t){if(t){for(var e,n,a=[this];a.length;)for(var i=0,o=(e=a.shift()).children.length;i<o;i++){if((n=e.children[i]).name===r)return n;n.isRexContainerLite&&a.push(n)}return null}return yb.GetFirst(this.children,"name",r)},getRandom:function(r,t){return yb.GetRandom(this.children,r,t)},getFirst:function(r,t,e,n){return yb.GetFirstElement(this.children,r,t,e,n)},getAll:function(r,t,e,n){return yb.GetAll(this.children,r,t,e,n)},count:function(r,t,e,n){return yb.CountAllMatching(this.children,r,t,e,n)},swap:function(r,t){return yb.Swap(this.children,r,t),this},moveTo:function(r,t){return yb.MoveTo(this.children,r,t),this},setAll:function(r,t,e,n){return yb.SetAll(this.children,r,t,e,n),this}};var Ck=function(t){return"[object Array]"===Object.prototype.toString.call(t)};var Cv={tweenChild:function(e){var a=e.targets;Ck(a)||(a=[a]);for(var t,r,n=[],s=0,i=a.length;s<i;s++)(r=a[s]).hasOwnProperty("rexContainer")&&(t=r.scene,n.push(r.rexContainer));if(t){e.targets=n;var c=t.tweens.add(e);return c.on("update",function(e,a,t){for(var r,n,s=0,i=t.length;s<i;s++)switch(r=t.parent,n=t.self,a){case"x":case"y":case"angle":case"rotation":case"scaleX":case"scaleY":case"flipX":case"flipY":r.updateChildPosition(n);break;case"alpha":r.updateChildAlpha(n);}}),c}},tween:function(e){var a=this.scene;return e.targets||(e.targets=this),a.tweens.add(e)}};var Dk={};Object.assign(Dk,hv,jv,mv,nv,ov,pv,qv,rv,sv,tv,uv,vv,Bv,Cv);var Gd=function(t){Ou(r,Yc);var e=Qu(r);function r(t,o,n,i,$,s){var a;return Ku(this,r),(a=e.call(this,t,o,n,i,$)).type="rexContainerLite",a.isRexContainerLite=!0,a.syncChildrenEnable=!0,a._active=!0,a._mask=null,a._scrollFactorX=1,a._scrollFactorY=1,s&&a.add(s),a}return Lu(r,[{key:"destroy",value:function(t){this.scene&&(this.syncChildrenEnable=!1,Za(ua(r.prototype),"destroy",this).call(this,t))}},{key:"resize",value:function(t,e){return this.setSize(t,e),this}},{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.syncPosition())}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.syncPosition())}},{key:"rotation",get:function(){return Za(ua(r.prototype),"rotation",this)},set:function(t){this.rotation!==t&&(Nb(ua(r.prototype),"rotation",t,this,!0),this.syncPosition())}},{key:"scaleX",get:function(){return Za(ua(r.prototype),"scaleX",this)},set:function(t){this.scaleX!==t&&(Nb(ua(r.prototype),"scaleX",t,this,!0),this.syncPosition())}},{key:"scaleY",get:function(){return Za(ua(r.prototype),"scaleY",this)},set:function(t){this.scaleY!==t&&(Nb(ua(r.prototype),"scaleY",t,this,!0),this.syncPosition())}},{key:"flipX",get:function(){return Za(ua(r.prototype),"flipX",this)},set:function(t){Za(ua(r.prototype),"flipX",this)!==t&&(Nb(ua(r.prototype),"flipX",t,this,!0),this.syncPosition())}},{key:"flipY",get:function(){return Za(ua(r.prototype),"flipY",this)},set:function(t){Za(ua(r.prototype),"flipY",this)!==t&&(Nb(ua(r.prototype),"flipY",t,this,!0),this.syncPosition())}},{key:"visible",get:function(){return Za(ua(r.prototype),"visible",this)},set:function(t){Za(ua(r.prototype),"visible",this)!==t&&(Nb(ua(r.prototype),"visible",t,this,!0),this.syncVisible())}},{key:"alpha",get:function(){return Za(ua(r.prototype),"alpha",this)},set:function(t){Za(ua(r.prototype),"alpha",this)!==t&&(Nb(ua(r.prototype),"alpha",t,this,!0),this.syncAlpha())}},{key:"active",get:function(){return this._active},set:function(t){this._active!==t&&(this._active=t,this.syncActive())}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask!==t&&(this._mask=t,this.syncMask())}},{key:"scrollFactorX",get:function(){return this._scrollFactorX},set:function(t){this._scrollFactorX!==t&&(this._scrollFactorX=t,this.syncScrollFactor())}},{key:"scrollFactorY",get:function(){return this._scrollFactorY},set:function(t){this._scrollFactorY!==t&&(this._scrollFactorY=t,this.syncScrollFactor())}},{key:"list",get:function(){return this.children}}]),r}();Object.assign(Gd.prototype,Dk);var Dv=function(e,t,r,$,i){var n=new Gd(this.scene,e,t,r,$,i);return this.scene.add.existing(n),n};var Ek=Phaser.Utils.Objects.GetAdvancedValue,Ev=Phaser.Utils.Objects.GetValue,Fv=Phaser.GameObjects.BuildGameObject,Gv=function(e){var a=Ek(e,"width",1),$=Ek(e,"height",a),t=Ev(e,"children",void 0),r=new Gd(this.scene,0,0,a,$);return r.syncChildrenEnable=!1,Fv(this.scene,r,e),r.syncChildrenEnable=!0,r.add(t),r};function dg(t){return(dg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Fk=function(t){return null==t||""===t||0===t.length},Hv=function(t,r,e){var o=t;if(Fk(r));else{var $;"string"==typeof r&&(r=r.split("."));for(var n=0,p=r.length;n<p;n++){var f;if(null==o[$=r[n]]||"object"!==dg(o[$]))f=n===p-1?void 0===e?{}:e:{},o[$]=f;o=o[$]}}return o},Ob=function(t,r,e){if("object"===dg(t)){if(Fk(r)){if(null==e)return;"object"===dg(e)&&(t=e)}else{"string"==typeof r&&(r=r.split("."));var o=r.pop();Hv(t,r)[o]=e}return t}};var Iv=function(t){Du(r,Phaser.Plugins.BasePlugin);var e=Fu(r);function r(t){var o;return Bu(this,r),o=e.call(this,t),t.registerGameObject("rexContainerLite",Dv,Gv),o}return Cu(r,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}}]),r}();Ob(window,"RexPlugins.GameObjects.ContainerLite",Gd);function Jv(t){return(Jv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gk(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Lv(t,e,r){return e&&Gk(t.prototype,e),r&&Gk(t,r),t}function Mv(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nv(t,e)}function Nv(t,e){return(Nv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ov(t){var e=Rv();return function(){var r,o=Hk(t);if(e){var n=Hk(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Pv(this,r)}}function Pv(t,e){return!e||"object"!==Jv(e)&&"function"!=typeof e?Qv(t):e}function Qv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Rv(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function Hk(t){return(Hk=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ik(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function Tv(t,e,i){return e&&Ik(t.prototype,e),i&&Ik(t,i),t}var Pb={},Uv=function(r,e,t){if(r&&"number"!=typeof r){if(r.hasOwnProperty(e))return r[e];if(-1!==e.indexOf(".")){for(var n=e.split("."),$=r,a=t,f=0;f<n.length;f++){if(!$.hasOwnProperty(n[f])){a=t;break}a=$[n[f]],$=$[n[f]]}return a}return t}return t};Pb=Uv;var eg,fg={};!function(e,t){"function"==typeof eg&&eg.amd?eg([],t):void 0!==fg?fg=t():e.Papa=t()}(fg,function e(){var t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:{},i=!t.document&&!!t.postMessage,r=i&&/blob:/i.test((t.location||{}).protocol),n={},s=0,a={parse:function(i,r){var o=(r=r||{}).dynamicTyping||!1;if(b(o)&&(r.dynamicTypingFunction=o,o={}),r.dynamicTyping=o,r.transform=!!b(r.transform)&&r.transform,r.worker&&a.WORKERS_SUPPORTED){var h=function(){if(!a.WORKERS_SUPPORTED)return!1;var i,r,o=(i=t.URL||t.webkitURL||null,r=e.toString(),a.BLOB_URL||(a.BLOB_URL=i.createObjectURL(new Blob(["(",r,")();"],{type:"text/javascript"})))),h=new t.Worker(o);return h.onmessage=m,h.id=s++,n[h.id]=h}();return h.userStep=r.step,h.userChunk=r.chunk,h.userComplete=r.complete,h.userError=r.error,r.step=b(r.step),r.chunk=b(r.chunk),r.complete=b(r.complete),r.error=b(r.error),delete r.worker,void h.postMessage({input:i,config:r,workerId:h.id})}var c=null;return a.NODE_STREAM_INPUT,"string"==typeof i?c=r.download?new u(r):new d(r):!0===i.readable&&b(i.read)&&b(i.on)?c=new l(r):(t.File&&i instanceof File||i instanceof Object)&&(c=new f(r)),c.stream(i)},unparse:function(e,t){var i=!1,r=!0,n=",",s="\r\n",o="\"",h=o+o,u=!1,f=null,d=!1;!function(){if("object"==typeof t){if("string"!=typeof t.delimiter||a.BAD_DELIMITERS.filter(function(e){return-1!==t.delimiter.indexOf(e)}).length||(n=t.delimiter),("boolean"==typeof t.quotes||"function"==typeof t.quotes||Array.isArray(t.quotes))&&(i=t.quotes),"boolean"!=typeof t.skipEmptyLines&&"string"!=typeof t.skipEmptyLines||(u=t.skipEmptyLines),"string"==typeof t.newline&&(s=t.newline),"string"==typeof t.quoteChar&&(o=t.quoteChar),"boolean"==typeof t.header&&(r=t.header),Array.isArray(t.columns)){if(0===t.columns.length)throw new Error("Option columns is empty");f=t.columns}void 0!==t.escapeChar&&(h=t.escapeChar+o),"boolean"==typeof t.escapeFormulae&&(d=t.escapeFormulae)}}();var l=new RegExp(p(o),"g");if("string"==typeof e&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return g(null,e,u);if("object"==typeof e[0])return g(f||c(e[0]),e,u)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:c(e.data[0])),Array.isArray(e.data[0])||"object"==typeof e.data[0]||(e.data=[e.data])),g(e.fields||[],e.data||[],u);throw new Error("Unable to serialize unrecognized input");function c(e){if("object"!=typeof e)return[];var t=[];for(var i in e)t.push(i);return t}function g(e,t,i){var a="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var o=Array.isArray(e)&&0<e.length,h=!Array.isArray(t[0]);if(o&&r){for(var u=0;u<e.length;u++)0<u&&(a+=n),a+=m(e[u],u);0<t.length&&(a+=s)}for(var f=0;f<t.length;f++){var d=o?e.length:t[f].length,l=!1,c=o?0===Object.keys(t[f]).length:0===t[f].length;if(i&&!o&&(l="greedy"===i?""===t[f].join("").trim():1===t[f].length&&0===t[f][0].length),"greedy"===i&&o){for(var p=[],g=0;g<d;g++){var _=h?e[g]:g;p.push(t[f][_])}l=""===p.join("").trim()}if(!l){for(var v=0;v<d;v++){0<v&&!c&&(a+=n);var y=o&&h?e[v]:v;a+=m(t[f][y],v)}f<t.length-1&&(!i||0<d&&!c)&&(a+=s)}}return a}function m(e,t){if(null==e)return"";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);!0===d&&"string"==typeof e&&null!==e.match(/^[=+\-@].*$/)&&(e="'"+e);var r=e.toString().replace(l,h);return"boolean"==typeof i&&i||"function"==typeof i&&i(e,t)||Array.isArray(i)&&i[t]||function(e,t){for(var i=0;i<t.length;i++)if(-1<e.indexOf(t[i]))return!0;return!1}(r,a.BAD_DELIMITERS)||-1<r.indexOf(n)||" "===r.charAt(0)||" "===r.charAt(r.length-1)?o+r+o:r}}};if(a.RECORD_SEP=String.fromCharCode(30),a.UNIT_SEP=String.fromCharCode(31),a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r","\n","\"",a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!i&&!!t.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=g,a.ParserHandle=c,a.NetworkStreamer=u,a.FileStreamer=f,a.StringStreamer=d,a.ReadableStreamStreamer=l,t.jQuery){var o=t.jQuery;o.fn.parse=function(e){var i=e.config||{},r=[];return this.each(function(e){if("INPUT"!==o(this).prop("tagName").toUpperCase()||"file"!==o(this).attr("type").toLowerCase()||!t.FileReader||!this.files||0===this.files.length)return!0;for(var n=0;n<this.files.length;n++)r.push({file:this.files[n],inputElem:this,instanceConfig:o.extend({},i)})}),n(),this;function n(){if(0!==r.length){var t,i,n,h=r[0];if(b(e.before)){var u=e.before(h.file,h.inputElem);if("object"==typeof u){if("abort"===u.action)return"AbortError",t=h.file,i=h.inputElem,n=u.reason,void(b(e.error)&&e.error({name:"AbortError"},t,i,n));if("skip"===u.action)return void s();"object"==typeof u.config&&(h.instanceConfig=o.extend(h.instanceConfig,u.config))}else if("skip"===u)return void s()}var f=h.instanceConfig.complete;h.instanceConfig.complete=function(e){b(f)&&f(e,h.file,h.inputElem),s()},a.parse(h.file,h.instanceConfig)}else b(e.complete)&&e.complete()}function s(){r.splice(0,1),n()}}}function h(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=y(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new c(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,i){if(this.isFirstChunk&&b(this._config.beforeFirstChunk)){var n=this._config.beforeFirstChunk(e);void 0!==n&&(e=n)}this.isFirstChunk=!1,this._halted=!1;var s=this._partialLine+e;this._partialLine="";var o=this._handle.parse(s,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var h=o.meta.cursor;this._finished||(this._partialLine=s.substring(h-this._baseIndex),this._baseIndex=h),o&&o.data&&(this._rowCount+=o.data.length);var u=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(r)t.postMessage({results:o,workerId:a.WORKER_ID,finished:u});else if(b(this._config.chunk)&&!i){if(this._config.chunk(o,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);o=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(o.data),this._completeResults.errors=this._completeResults.errors.concat(o.errors),this._completeResults.meta=o.meta),this._completed||!u||!b(this._config.complete)||o&&o.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),u||o&&o.meta.paused||this._nextChunk(),o}this._halted=!0},this._sendError=function(e){b(this._config.error)?this._config.error(e):r&&this._config.error&&t.postMessage({workerId:a.WORKER_ID,error:e,finished:!1})}}function u(e){var t;(e=e||{}).chunkSize||(e.chunkSize=a.RemoteChunkSize),h.call(this,e),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),i||(t.onload=k(this._chunkLoaded,this),t.onerror=k(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var r in e)t.setRequestHeader(r,e[r])}if(this._config.chunkSize){var n=this._start+this._config.chunkSize-1;t.setRequestHeader("Range","bytes="+this._start+"-"+n)}try{t.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}i&&0===t.status&&this._chunkError()}},this._chunkLoaded=function(){var e;4===t.readyState&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null===(e=t.getResponseHeader("Content-Range"))?-1:parseInt(e.substring(e.lastIndexOf("/")+1))),this.parseChunk(t.responseText)))},this._chunkError=function(e){var i=t.statusText||e;this._sendError(new Error(i))}}function f(e){var t,i;(e=e||{}).chunkSize||(e.chunkSize=a.LocalChunkSize),h.call(this,e);var r="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,i=e.slice||e.webkitSlice||e.mozSlice,r?((t=new FileReader).onload=k(this._chunkLoaded,this),t.onerror=k(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var n=Math.min(this._start+this._config.chunkSize,this._input.size);e=i.call(e,this._start,n)}var s=t.readAsText(e,this._config.encoding);r||this._chunkLoaded({target:{result:s}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function d(e){var t;h.call(this,e=e||{}),this.stream=function(e){return t=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,i=this._config.chunkSize;return i?(e=t.substring(0,i),t=t.substring(i)):(e=t,t=""),this._finished=!t,this.parseChunk(e)}}}function l(e){h.call(this,e=e||{});var t=[],i=!0,r=!1;this.pause=function(){h.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){h.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):i=!0},this._streamData=k(function(e){try{t.push("string"==typeof e?e:e.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}},this),this._streamError=k(function(e){this._streamCleanUp(),this._sendError(e)},this),this._streamEnd=k(function(){this._streamCleanUp(),r=!0,this._streamData("")},this),this._streamCleanUp=k(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function c(e){var t,i,r,n=Math.pow(2,53),s=-n,o=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)(e[-+]?\d+)?\s*$/,h=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,u=this,f=0,d=0,l=!1,c=!1,m=[],_={data:[],errors:[],meta:{}};if(b(e.step)){var v=e.step;e.step=function(t){if(_=t,w())E();else{if(E(),0===_.data.length)return;f+=t.data.length,e.preview&&f>e.preview?i.abort():(_.data=_.data[0],v(_,u))}}}function k(t){return"greedy"===e.skipEmptyLines?""===t.join("").trim():1===t.length&&0===t[0].length}function E(){if(_&&r&&(R("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),r=!1),e.skipEmptyLines)for(var t=0;t<_.data.length;t++)k(_.data[t])&&_.data.splice(t--,1);return w()&&function(){if(_)if(Array.isArray(_.data[0])){for(var t=0;w()&&t<_.data.length;t++)_.data[t].forEach(i);_.data.splice(0,1)}else _.data.forEach(i);function i(t,i){b(e.transformHeader)&&(t=e.transformHeader(t,i)),m.push(t)}}(),function(){if(!_||!e.header&&!e.dynamicTyping&&!e.transform)return _;function t(t,i){var r,n=e.header?{}:[];for(r=0;r<t.length;r++){var s=r,a=t[r];e.header&&(s=r>=m.length?"__parsed_extra":m[r]),e.transform&&(a=e.transform(a,s)),a=C(s,a),"__parsed_extra"===s?(n[s]=n[s]||[],n[s].push(a)):n[s]=a}return e.header&&(r>m.length?R("FieldMismatch","TooManyFields","Too many fields: expected "+m.length+" fields but parsed "+r,d+i):r<m.length&&R("FieldMismatch","TooFewFields","Too few fields: expected "+m.length+" fields but parsed "+r,d+i)),n}var i=1;return!_.data.length||Array.isArray(_.data[0])?(_.data=_.data.map(t),i=_.data.length):_.data=t(_.data,0),e.header&&_.meta&&(_.meta.fields=m),d+=i,_}()}function w(){return e.header&&0===m.length}function C(t,i){return r=t,e.dynamicTypingFunction&&void 0===e.dynamicTyping[r]&&(e.dynamicTyping[r]=e.dynamicTypingFunction(r)),!0===(e.dynamicTyping[r]||e.dynamicTyping)?"true"===i||"TRUE"===i||"false"!==i&&"FALSE"!==i&&(function(e){if(o.test(e)){var t=parseFloat(e);if(s<t&&t<n)return!0}return!1}(i)?parseFloat(i):h.test(i)?new Date(i):""===i?null:i):i;var r}function R(e,t,i,r){var n={type:e,code:t,message:i};void 0!==r&&(n.row=r),_.errors.push(n)}this.parse=function(n,s,o){var h=e.quoteChar||"\"";if(e.newline||(e.newline=function(e,t){e=e.substring(0,1048576);var i=new RegExp(p(t)+"([^]*?)"+p(t),"gm"),r=(e=e.replace(i,"")).split("\r"),n=e.split("\n"),s=1<n.length&&n[0].length<r[0].length;if(1===r.length||s)return"\n";for(var a=0,o=0;o<r.length;o++)"\n"===r[o][0]&&a++;return a>=r.length/2?"\r\n":"\r"}(n,h)),r=!1,e.delimiter)b(e.delimiter)&&(e.delimiter=e.delimiter(n),_.meta.delimiter=e.delimiter);else{var u=function(t,i,r,n,s){var o,h,u,f;s=s||[",","\t","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var d=0;d<s.length;d++){var l=s[d],c=0,p=0,m=0;u=void 0;for(var _=new g({comments:n,delimiter:l,newline:i,preview:10}).parse(t),v=0;v<_.data.length;v++)if(r&&k(_.data[v]))m++;else{var y=_.data[v].length;p+=y,void 0!==u?0<y&&(c+=Math.abs(y-u),u=y):u=y}0<_.data.length&&(p/=_.data.length-m),(void 0===h||c<=h)&&(void 0===f||f<p)&&1.99<p&&(h=c,o=l,f=p)}return{successful:!!(e.delimiter=o),bestDelimiter:o}}(n,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess);u.successful?e.delimiter=u.bestDelimiter:(r=!0,e.delimiter=a.DefaultDelimiter),_.meta.delimiter=e.delimiter}var f=y(e);return e.preview&&e.header&&f.preview++,t=n,i=new g(f),_=i.parse(t,s,o),E(),l?{meta:{paused:!0}}:_||{meta:{paused:!1}}},this.paused=function(){return l},this.pause=function(){l=!0,i.abort(),t=b(e.chunk)?"":t.substring(i.getCharIndex())},this.resume=function(){u.streamer._halted?(l=!1,u.streamer.parseChunk(t,!0)):setTimeout(u.resume,3)},this.aborted=function(){return c},this.abort=function(){c=!0,i.abort(),_.meta.aborted=!0,b(e.complete)&&e.complete(_),t=""}}function p(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function g(e){var t,i=(e=e||{}).delimiter,r=e.newline,n=e.comments,s=e.step,o=e.preview,h=e.fastMode,u=t=void 0===e.quoteChar?"\"":e.quoteChar;if(void 0!==e.escapeChar&&(u=e.escapeChar),("string"!=typeof i||-1<a.BAD_DELIMITERS.indexOf(i))&&(i=","),n===i)throw new Error("Comment character same as delimiter");!0===n?n="#":("string"!=typeof n||-1<a.BAD_DELIMITERS.indexOf(n))&&(n=!1),"\n"!==r&&"\r"!==r&&"\r\n"!==r&&(r="\n");var f=0,d=!1;this.parse=function(e,a,l){if("string"!=typeof e)throw new Error("Input must be a string");var c=e.length,g=i.length,m=r.length,_=n.length,v=b(s),y=[],k=[],E=[],w=f=0;if(!e)return $();if(h||!1!==h&&-1===e.indexOf(t)){for(var C=e.split(r),R=0;R<C.length;R++){if(E=C[R],f+=E.length,R!==C.length-1)f+=r.length;else if(l)return $();if(!n||E.substring(0,_)!==n){if(v){if(y=[],L(E.split(i)),j(),d)return $()}else L(E.split(i));if(o&&o<=R)return y=y.slice(0,o),$(!0)}}return $()}for(var S=e.indexOf(i,f),x=e.indexOf(r,f),O=new RegExp(p(u)+p(t),"g"),D=e.indexOf(t,f);;)if(e[f]!==t){if(n&&0===E.length&&e.substring(f,f+_)===n){if(-1===x)return $();f=x+m,x=e.indexOf(r,f),S=e.indexOf(i,f)}else{if(-1!==S&&(S<x||-1===x)){if(!(S<D)){E.push(e.substring(f,S)),f=S+g,S=e.indexOf(i,f);continue}var I=q(S,D,x);if(I&&void 0!==I.nextDelim){S=I.nextDelim,D=I.quoteSearch,E.push(e.substring(f,S)),f=S+g,S=e.indexOf(i,f);continue}}if(-1===x)break;if(E.push(e.substring(f,x)),M(x+m),v&&(j(),d))return $();if(o&&y.length>=o)return $(!0)}}else for(D=f,f++;;){if(-1===(D=e.indexOf(t,D+1)))return l||k.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:y.length,index:f}),z();if(D===c-1)return z(e.substring(f,D).replace(O,t));if(t!==u||e[D+1]!==u){if(t===u||0===D||e[D-1]!==u){-1!==S&&S<D+1&&(S=e.indexOf(i,D+1)),-1!==x&&x<D+1&&(x=e.indexOf(r,D+1));var T=F(-1===x?S:Math.min(S,x));if(e[D+1+T]===i){E.push(e.substring(f,D).replace(O,t)),e[f=D+1+T+g]!==t&&(D=e.indexOf(t,f)),S=e.indexOf(i,f),x=e.indexOf(r,f);break}var A=F(x);if(e.substring(D+1+A,D+1+A+m)===r){if(E.push(e.substring(f,D).replace(O,t)),M(D+1+A+m),S=e.indexOf(i,f),D=e.indexOf(t,f),v&&(j(),d))return $();if(o&&y.length>=o)return $(!0);break}k.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:y.length,index:f}),D++}}else D++}return z();function L(e){y.push(e),w=f}function F(t){var i=0;if(-1!==t){var r=e.substring(D+1,t);r&&""===r.trim()&&(i=r.length)}return i}function z(t){return l||(void 0===t&&(t=e.substring(f)),E.push(t),f=c,L(E),v&&j()),$()}function M(t){f=t,L(E),E=[],x=e.indexOf(r,f)}function $(e){return{data:y,errors:k,meta:{delimiter:i,linebreak:r,aborted:d,truncated:!!e,cursor:w+(a||0)}}}function j(){s($()),y=[],k=[]}function q(r,n,s){var a={nextDelim:void 0,quoteSearch:void 0},o=e.indexOf(t,n+1);if(n<r&&r<o&&(o<s||-1===s)){var h=e.indexOf(i,o);if(-1===h)return a;o<h&&(o=e.indexOf(t,o+1)),a=q(h,o,s)}else a={nextDelim:r,quoteSearch:n};return a}},this.abort=function(){d=!0},this.getCharIndex=function(){return f}}function m(e){var t=e.data,i=n[t.workerId],r=!1;if(t.error)i.userError(t.error,t.file);else if(t.results&&t.results.data){var s={abort:function(){r=!0,_(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:v,resume:v};if(b(i.userStep)){for(var a=0;a<t.results.data.length&&(i.userStep({data:t.results.data[a],errors:t.results.errors,meta:t.results.meta},s),!r);a++);delete t.results}else b(i.userChunk)&&(i.userChunk(t.results,s,t.file),delete t.results)}t.finished&&!r&&_(t.workerId,t.results)}function _(e,t){var i=n[e];b(i.userComplete)&&i.userComplete(t),i.terminate(),delete n[e]}function v(){throw new Error("Not implemented.")}function y(e){if("object"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var i in e)t[i]=y(e[i]);return t}function k(e,t){return function(){e.apply(t,arguments)}}function b(e){return"function"==typeof e}return r&&(t.onmessage=function(e){var i=e.data;if(void 0===a.WORKER_ID&&i&&(a.WORKER_ID=i.workerId),"string"==typeof i.input)t.postMessage({workerId:a.WORKER_ID,results:a.parse(i.input,i.config),finished:!0});else if(t.File&&i.input instanceof File||i.input instanceof Object){var r=a.parse(i.input,i.config);r&&t.postMessage({workerId:a.WORKER_ID,results:r,finished:!0})}}),(u.prototype=Object.create(h.prototype)).constructor=u,(f.prototype=Object.create(h.prototype)).constructor=f,(d.prototype=Object.create(d.prototype)).constructor=d,(l.prototype=Object.create(h.prototype)).constructor=l,a});function Vv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Wv(e,t,r){return t&&Jk(e.prototype,t),r&&Jk(e,r),e}var rc=function(e){if(Array.isArray(e))e.length=0;else for(var r in e)delete e[r]};var Kk=function(e,r){var l=Array.isArray(e);if(void 0===r?r=l?[]:{}:rc(r),l){r.length=e.length;for(var $=0,a=e.length;$<a;$++)r[$]=e[$]}else for(var t in e)r[t]=e[t];return r};var gg=Phaser.Utils.Objects.GetValue,Xv=function(){function e(t){Vv(this,e),this.scenario=t,this.queue=[],this.currentIdx=-1,this.nextIdx=0}return Wv(e,[{key:"resetFromJSON",value:function(e){var t=gg(e,"queue",void 0);return void 0===t?rc(this.queue):Kk(t,this.queue),this.currentIdx=gg(e,"curIdx",-1),this.nextIdx=gg(e,"nextIdx",0),this}},{key:"clear",value:function(){return this.currentIdx=-1,this.nextIdx=0,this.queue.length=0,this}},{key:"append",value:function(e){return this.queue.push(e),this}},{key:"setNextIndex",value:function(e){return void 0===e&&(e=this.currentIdx+1),this.nextIdx=e,this}},{key:"get",value:function(e){return void 0===e&&(e=this.nextIdx),this.currentIdx=e,this.queue[e]}},{key:"length",get:function(){return this.queue.length}}]),e}();function Yv(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Lk(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Zv(e,r,t){return r&&Lk(e.prototype,r),t&&Lk(e,t),e}function $v(e){return($v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mk(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function aw(e,t,r){return t&&Mk(e.prototype,t),r&&Mk(e,r),e}function bw(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cw(e,t)}function cw(e,t){return(cw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dw(e){var t=gw();return function(){var r,a=Nk(e);if(t){var o=Nk(this).constructor;r=Reflect.construct(a,arguments,o)}else r=a.apply(this,arguments);return ew(this,r)}}function ew(e,t){return!t||"object"!==$v(t)&&"function"!=typeof t?fw(e):t}function fw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gw(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function Nk(e){return(Nk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hw(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Ok(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function iw(e,r,t){return r&&Ok(e.prototype,r),t&&Ok(e,t),e}var sc=function(){function e(r,t){hw(this,e),this.scenario=r,this.type=t}return iw(e,[{key:"resetFromJSON",value:function(e){}},{key:"toJSON",value:function(){return{}}},{key:"parse",value:function(e,r){return e}},{key:"run",value:function(e){}}]),e}();var jw=function(t,e,$,r){void 0===$&&($=0),void 0===r&&(r=e.length),t.length=r-$;for(var o=0,x=t.length;o<x;o++)t[o]=e[o+$];return t};var kw=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,Pk=function($){return"string"!=typeof $?$:(""===$?$=null:kw.test($)?$=parseFloat($):"false"===screen?$=!1:"true"===$&&($=!0),$)};var Hd=Phaser.Utils.Objects.GetValue,hg=function($,a,r){var e,t=Hd(r,"reverse",!1);if(Ck($[0])){if(t)for(d=(l=$.length)-1;d>=0;d--)e=hg($[d],a,r);else for(var d=0,l=$.length;d<l;d++)e=hg($[d],a,r);}else e=lw($,a,r);return e},lw=function($,a,r){var e,t=Hd(r,"argsConvert",void 0),d=Hd(r,"argsConvertScope",void 0),l=$[0];if(tc=jw(tc,$,1),t){!0===t&&(t=Pk,d=void 0);for(var v=0,o=tc.length;v<o;v++)tc[v]=d?t.call(d,tc[v],$):t(tc[v],$)}return"string"==typeof l?null==(e=a[l])&&(e=Hd(a,l,null)):e=l,e.apply(a,tc)},tc=[];var mw=Phaser.Utils.Array.SpliceOne,nw=function(e){bw(r,sc);var t=dw(r);function r(e){var a;return _v(this,r),(a=t.call(this,e,"-")).task=void 0,a}return aw(r,[{key:"resetFromJSON",value:function(e){this.task&&(this.task.off("complete",this.resume,this),this.task=void 0)}},{key:"parse",value:function(e,t){var r=mw(e,0),a=this.scenario,o=a.argsConvert,n=a.argsConvertScope;if(o){!0===o&&(o=Pk,n=void 0);for(var i=1,$=e.length;i<$;i++)e[i]=n?o.call(n,e[i],e):o(e[i],e)}return e=[r,e]}},{key:"run",value:function(e){var t=this.scenario,r=hg(e[1],t.scope);r&&"function"==typeof r.once?(r.once("complete",this.resume,this),this.pause(),this.task=r):this.task=void 0}},{key:"pause",value:function(){this.scenario.pause()}},{key:"resume",value:function(){this.task=void 0;var e=this.scenario;e.resume(),e.runNextCmd()}}]),r}();function ow(t){return(ow="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qk(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function qw(t,e,r){return e&&Qk(t.prototype,e),r&&Qk(t,r),t}function rw(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sw(t,e)}function sw(t,e){return(sw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tw(t){var e=ww();return function(){var r,o=Rk(t);if(e){var n=Rk(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return uw(this,r)}}function uw(t,e){return!e||"object"!==ow(e)&&"function"!=typeof e?vw(t):e}function vw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ww(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function Rk(t){return(Rk=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xw=function(t){rw(r,sc);var e=tw(r);function r(t){return pw(this,r),e.call(this,t,"wait")}return qw(r,[{key:"parse",value:function(t,e){t.length=2;var r=this.getEventName(t);return isNaN(r)||(t[1]=parseFloat(r)),t}},{key:"run",value:function(t){var e=this.getEventName(t);"number"==typeof e?this.waitTime(e):this.waitEvent(e)}},{key:"waitTime",value:function(t){t>this.scenario.offset?(t-=this.scenario.offset,this.scenario.offset=0,this.scenario.isDebugMode&&this.scenario.log("#WAIT: "+t),this.scenario.wait(t)):this.scenario.offset-=t}},{key:"waitEvent",value:function(t){this.scenario.isDebugMode&&this.scenario.log("#WAIT: "+t),this.scenario.wait(t)}},{key:"getEventName",value:function(t){var e=t[1];return null==e&&(e="",t[1]=e),e}}]),r}();function yw(e){return(yw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sk(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Aw(e,t,r){return t&&Sk(e.prototype,t),r&&Sk(e,r),e}function Bw(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cw(e,t)}function Cw(e,t){return(Cw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dw(e){var t=Gw();return function(){var r,a=Tk(e);if(t){var s=Tk(this).constructor;r=Reflect.construct(a,arguments,s)}else r=a.apply(this,arguments);return Ew(this,r)}}function Ew(e,t){return!t||"object"!==yw(t)&&"function"!=typeof t?Fw(e):t}function Fw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gw(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function Tk(e){return(Tk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ig=Phaser.Utils.Objects.GetValue,Hw=function(e){Bw(r,sc);var t=Dw(r);function r(e){var a;return zw(this,r),(a=t.call(this,e,"label")).labels={},a.prevLabel="",a.lastLabel="",a}return Aw(r,[{key:"resetFromJSON",value:function(e){this.prevLabel=ig(e,"preLabel",""),this.lastLabel=ig(e,"lastLabel","");var t=ig(e,"labels",void 0);void 0===t?rc(this.labels):Kk(t,this.labels)}},{key:"toJSON",value:function(){return{preLabel:this.prevLabel,lastLabel:this.lastLabel,labels:this.labels}}},{key:"parse",value:function(e,t){e.length=2;var r=this.getLabel(e);return this.addLabel(r,t),e}},{key:"run",value:function(e){var t=this.getLabel(e);this.scenario.isDebugMode&&this.scenario.log("#LABEL: "+t),this.prevLabel=this.lastLabel,this.lastLabel=t;var r=this.scenario;r.emit("labelchange",this.lastLabel,this.prevLabel,r)}},{key:"getLabel",value:function(e){var t=e[1];return null==t&&(t="",e[1]=t),t}},{key:"addLabel",value:function(e,t){this.labels[e]=t}},{key:"getIndex",value:function(e){return""!==e&&this.hasLabel(e)?this.labels[e]:0}},{key:"hasLabel",value:function(e){return this.labels.hasOwnProperty(e)}}]),r}();function Iw(t){return(Iw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Uk(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Kw(t,e,r){return e&&Uk(t.prototype,e),r&&Uk(t,r),t}function Lw(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mw(t,e)}function Mw(t,e){return(Mw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Nw(t){var e=Qw();return function(){var r,o=Vk(t);if(e){var n=Vk(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Ow(this,r)}}function Ow(t,e){return!e||"object"!==Iw(e)&&"function"!=typeof e?Pw(t):e}function Pw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qw(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function Vk(t){return(Vk=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Rw=function(t){Lw(r,sc);var e=Nw(r);function r(t){return Jw(this,r),e.call(this,t,"exit")}return Kw(r,[{key:"parse",value:function(t,e){return t.length=1,t}},{key:"run",value:function(t){this.scenario.log("#EXIT"),this.scenario.complete()}}]),r}();function Sw(t){return(Sw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wk(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Uw(t,e,r){return e&&Wk(t.prototype,e),r&&Wk(t,r),t}function Vw(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ww(t,e)}function Ww(t,e){return(Ww=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Xw(t){var e=$w();return function(){var r,o=Xk(t);if(e){var n=Xk(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Yw(this,r)}}function Yw(t,e){return!e||"object"!==Sw(e)&&"function"!=typeof e?Zw(t):e}function Zw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function Xk(t){return(Xk=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _w=function(t){Vw(r,sc);var e=Xw(r);function r(t){return Tw(this,r),e.call(this,t,"goto")}return Uw(r,[{key:"parse",value:function(t,e){return t.length=2,t}},{key:"run",value:function(t){var e=this.getLabel(t);this.scenario.isDebugMode&&this.scenario.log("#GOTO label: "+e),this.scenario.goto(e)}},{key:"getLabel",value:function(t){var e=t[1];return null==e&&(e="",t[1]=e),e}}]),r}();function ax(e){return(ax="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cx(e,t,r){return t&&Yk(e.prototype,t),r&&Yk(e,r),e}function dx(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ex(e,t)}function ex(e,t){return(ex=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fx(e){var t=ix();return function(){var r,n=Zk(e);if(t){var o=Zk(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return gx(this,r)}}function gx(e,t){return!t||"object"!==ax(t)&&"function"!=typeof t?hx(e):t}function hx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ix(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function Zk(e){return(Zk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var jx=function(e){dx(r,sc);var t=fx(r);function r(e){return bx(this,r),t.call(this,e,"if")}return cx(r,[{key:"parse",value:function(e,t){e.length=4;var r="("+this.getCond(e)+")";return e[1]=new Function("return "+r),e}},{key:"run",value:function(e){var t=this.getCond(e).call(this.scenario.scope),r=t?this.getTrueLabel(e):this.getFalseLabel(e);""!==r&&(this.scenario.isDebugMode&&this.scenario.log("#IF "+t+"- GOTO label: "+r),this.scenario.goto(r))}},{key:"getCond",value:function(e){var t=e[1];return null!=t&&""!==t||(t="true",e[1]=t),t}},{key:"getTrueLabel",value:function(e){var t=e[2];return null==t&&(t="",e[2]=t),t}},{key:"getFalseLabel",value:function(e){var t=e[3];return null==t&&(t="",e[3]=t),t}}]),r}();var kx=Phaser.Utils.Objects.GetValue,lx=function(){function e(r){Yv(this,e),this.cmds={"-":new nw(r),wait:new xw(r),label:new Hw(r),exit:new Rw(r),goto:new _w(r),if:new jx(r)}}return Zv(e,[{key:"resetFromJSON",value:function(e){for(var r in this.cmds)this.cmds[r].resetFromJSON(kx(e,r,void 0));return this}},{key:"toJSON",value:function(){var e={};for(var r in this.cmds)e[r]=this.cmds[r].toJSON();return e}},{key:"get",value:function(e){return this.cmds[e]}},{key:"isValidCmdName",value:function(e){return this.cmds.hasOwnProperty(e)}}]),e}();var mx="=";var $k=function(){function t(e,i){var $gK07$$interop$default=_a(Pb);Sv(this,t),this.setEventEmitter($gK07$$interop$default.d(i,"eventEmitter",void 0)),this.scene=e,this.timer=void 0,this.instMem=new Xv(this),this.cmdHandlers=new lx(this),this.resetFromJSON(i),this.boot()}return Tv(t,[{key:"resetFromJSON",value:function(t){var $gK07$$interop$default=_a(Pb);return this._inRunCmdLoop=!1,this.isRunning=$gK07$$interop$default.d(t,"state",!1),this.isPaused=$gK07$$interop$default.d(t,"pause",!1),this.waitEvent=$gK07$$interop$default.d(t,"wait",void 0),this.scope=$gK07$$interop$default.d(t,"scope",void 0),this.timeUnit=$gK07$$interop$default.d(t,"timeUnit",0),this.cmdPrefix=$gK07$$interop$default.d(t,"prefix",ox),this.argsConvert=$gK07$$interop$default.d(t,"argsConvert",!0),this.argsConvertScope=$gK07$$interop$default.d(t,"argsConvertScope",void 0),this.cmdHandlers.resetFromJSON($gK07$$interop$default.d(t,"handlers",void 0)),this.instMem.resetFromJSON($gK07$$interop$default.d(t,"instMem",void 0)),this}},{key:"toJSON",value:function(){return{state:this.isRunning,pause:this.isPaused,wait:this.waitEvent,scope:this.scope,timeUnit:this.timeUnit,prefix:this.cmdPrefix,argsConvert:this.argsConvert,argsConvertScope:this.argsConvertScope,handlers:this.cmdHandlers.toJSON(),instMem:this.instMem.toJSON()}}},{key:"boot",value:function(){this.scene.events.once("shutdown",this.destroy,this)}},{key:"shutdown",value:function(){this.destroyEventEmitter(),this.clear(),this.scene=void 0}},{key:"destroy",value:function(){this.shutdown()}},{key:"load",value:function(t,e,i){var $gK07$$interop$default=_a(Pb);return this.clear(),this.timeUnit=$gK07$$interop$default.d(i,"timeUnit",this.timeUnit),"string"==typeof this.timeUnit&&(this.timeUnit=nx[this.timeUnit]),this.cmdPrefix=$gK07$$interop$default.d(i,"prefix",this.cmdPrefix),"string"==typeof this.cmdPrefix&&(this.cmdPrefix=new RegExp(this.cmdPrefix)),this.argsConvert=$gK07$$interop$default.d(i,"argsConvert",this.argsConvert),this.argsConvertScope=$gK07$$interop$default.d(i,"argsConvertScope",this.argsConvertScope),this.scope=e,this.append(t),this}},{key:"clear",value:function(){this.stop(),this.instMem.resetFromJSON(),this.cmdHandlers.resetFromJSON()}},{key:"start",value:function(t){this.stop();var $gK07$$interop$default=_a(Pb);var e=$gK07$$interop$default.d(t,"label","");return this.offset=$gK07$$interop$default.d(t,"offset",0),this.isDebugMode&&this.log("Start at Label: "+e),!!this.goto(e)&&(this.isRunning=!0,this.runNextCmd(),!0)}},{key:"getIndex",value:function(t){var e=this.getCmdHandler("label").getIndex(t);return null==e&&this.error("Label: "+t+" is not found"),e}},{key:"goto",value:function(t){var e;return null!=(e="string"==typeof t?this.getIndex(t):t)&&(this.instMem.setNextIndex(e),!0)}},{key:"wait",value:function(t){if(this.waitEvent=t,"number"==typeof t){var e=t;1===this.timeUnit&&(e*=1e3),this.timer=this.scene.time.delayedCall(e,this.continue,[t],this)}return this}},{key:"stop",value:function(){return this.isRunning?(this.isRunning=!1,this.isPaused=!1,this.waitEvent=void 0,this.timer&&(this.timer.remove(),this.timer=void 0),this):this}},{key:"complete",value:function(){return this.emit("complete",this),this.stop(),this}},{key:"append",value:function(t,e){void 0===e&&(e=mx);var $rVYa$$interop$default=_a(fg);var i=$rVYa$$interop$default.d.parse(t,{delimiter:e}).data;return this.parse(i),this}},{key:"pause",value:function(){return this.isRunning?this.isPaused?this:(this.isPaused=!0,this.timer&&(this.timer.paused=!0),this):this}},{key:"resume",value:function(){return this.isRunning&&this.isPaused?(this.isPaused=!1,this.timer&&(this.timer.paused=!1),this):this}},{key:"continue",value:function(t){return!this.isRunning||this.isPaused||void 0===this.waitEvent?this:(t===this.waitEvent&&(this.timer=void 0,this.waitEvent=void 0,this.runNextCmd()),this)}},{key:"getCmdHandler",value:function(t){return"string"!=typeof t&&(t=t[0]),this.cmdHandlers.get(t)}},{key:"parse",value:function(t){for(var e,i,s=this.cmdPrefix,r=0,n=t.length;r<n;r++)if("-"===(i=(e=t[r])[0]))this.appendCommand(e);else if(isNaN(i)){if(s.test(i)){var a=i.match(s);e[0]=a[1].toLowerCase(),this.appendCommand(e)||this.error("Line "+r+": "+JSON.stringify(e)+" is not a valid command")}else this.appendCommand(["wait",i]),e[0]="-",this.appendCommand(e);}else{var o=parseFloat(i);o>0&&this.appendCommand(["wait",o]),e[0]="-",this.appendCommand(e)}return this}},{key:"appendCommand",value:function(t){var e=this.getCmdHandler(t);return null!=e&&((t=e.parse(t,this.instMem.length))&&this.instMem.append(t),!0)}},{key:"runNextCmd",value:function(){if(!this._inRunCmdLoop){this.threadId;var t,e=this.instMem;for(this._inRunCmdLoop=!0;this.isRunning&&!this.isPaused&&void 0===this.waitEvent;){if(t=e.get(),e.setNextIndex(),null==t){this.complete();break}this.getCmdHandler(t).run(t)}return this._inRunCmdLoop=!1,this}}},{key:"log",value:function(t){return this.emit("log",t,this),this}},{key:"error",value:function(t){return this.emit("error",t,this),this}},{key:"lastLabel",get:function(){return this.cmdHandlers.labelCmd.lastLabel}},{key:"previousLabel",get:function(){return this.cmdHandlers.labelCmd.preLabel}},{key:"isDebugMode",get:function(){return this.listenerCount("log")>0}}]),t}();Object.assign($k.prototype,Cc);var nx={ms:0,s:1,sec:1},ox=/^#([a-zA-Z]+)/;var px=function(t){Mv(r,Phaser.Plugins.BasePlugin);var e=Ov(r);function r(t){return Kv(this,r),e.call(this,t)}return Lv(r,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}},{key:"add",value:function(t,e){return new $k(t,e)}}]),r}();function qx(e){return(qx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _k(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function sx(e,t,r){return t&&_k(e.prototype,t),r&&_k(e,r),e}function tx(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ux(e,t)}function ux(e,t){return(ux=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vx(e){var t=yx();return function(){var r,o=al(e);if(t){var n=al(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return wx(this,r)}}function wx(e,t){return!t||"object"!==qx(t)&&"function"!=typeof t?xx(e):t}function xx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yx(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function al(e){return(al=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var bl=function(e){tx(r,Phaser.Plugins.BasePlugin);var t=vx(r);function r(e){return rx(this,r),t.call(this,e)}return sx(r,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}},{key:"add",value:function(e,t){return new Fc(e,t)}}]),r}(),zx={moveTo:fd,moveFrom:Jg,moveToDestroy:_m,moveFromDestroy:an};Object.assign(bl.prototype,zx);function Ax(t){return(Ax="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cx(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dx(t,e)}function Dx(t,e){return(Dx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ex(t){var e=Hx();return function(){var r,o=cl(t);if(e){var a=cl(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return Fx(this,r)}}function Fx(t,e){return!e||"object"!==Ax(e)&&"function"!=typeof e?Gx(t):e}function Gx(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hx(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function cl(t){return(cl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ix(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function dl(e,r){for(var a=0;a<r.length;a++){var t=r[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function Jx(e,r,a){return r&&dl(e.prototype,r),a&&dl(e,a),e}var Qb=function(){function e(r){Ix(this,e),this.scene=r}return Jx(e,null,[{key:"register",value:function(r,a){e.prototype[r]=a}}]),e}();function Kx(t){return(Kx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function el(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function Mx(t,e,r){return e&&el(t.prototype,e),r&&el(t,r),t}function Nx(t,e,r){return(Nx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var a=Ox(t,e);if(a){var n=Object.getOwnPropertyDescriptor(a,e);return n.get?n.get.call(r):n.value}})(t,e,r||t)}function Ox(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Id(t)););return t}function Px(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qx(t,e)}function Qx(t,e){return(Qx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Rx(t){var e=Tx();return function(){var r,a=Id(t);if(e){var n=Id(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return Sx(this,r)}}function Sx(t,e){return!e||"object"!==Kx(e)&&"function"!=typeof e?fl(t):e}function fl(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tx(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function Id(t){return(Id=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ux(t){return(Ux="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gl(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Wx(t,e,n){return e&&gl(t.prototype,e),n&&gl(t,n),t}function Jd(t,e,n){return(Jd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=Xx(t,e);if(o){var i=Object.getOwnPropertyDescriptor(o,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Xx(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Rb(t)););return t}function Yx(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zx(t,e)}function Zx(t,e){return(Zx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $x(t){var e=by();return function(){var n,o=Rb(t);if(e){var i=Rb(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return _x(this,n)}}function _x(t,e){return!e||"object"!==Ux(e)&&"function"!=typeof e?ay(t):e}function ay(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function by(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function Rb(t){return(Rb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jg=Phaser.Utils.Objects.GetValue,Kd=function(t){Yx(n,Nc);var e=$x(n);function n(t,o){var i;Vx(this,n);var r=ed(t);return r===t&&(t=void 0),(i=e.call(this,r,o)).scene=r,i.gameObject=t,t&&t.setInteractive(jg(o,"inputConfig",void 0)),i._enable=void 0,i.resetFromJSON(o),i.boot(),i}return Wx(n,[{key:"resetFromJSON",value:function(t){return this.setEnable(jg(t,"enable",!0)),void 0===this.gameObject?this.bounds=jg(t,"bounds",void 0):this.bounds=void 0,this.tracerState=kg,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,this.isTouchingAnyObject=!1,this}},{key:"boot",value:function(){Jd(Rb(n.prototype),"boot",this).call(this),this.gameObject?this.gameObject.on("pointerdown",this.onPointerDown,this):this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.events.once("shutdown",this.destroy,this)}},{key:"shutdown",value:function(){this.gameObject?this.gameObject.off("pointerdown",this.onPointerDown,this):this.scene&&this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene&&(this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.events.off("destroy",this.destroy,this),this.scene=void 0),this.scene=void 0,this.gameObject=void 0,this.bounds=void 0,this.pointer=void 0,this.lastPointer=void 0,this.movedState=!1,Jd(Rb(n.prototype),"shutdown",this).call(this)}},{key:"destroy",value:function(){this.shutdown()}},{key:"setEnable",value:function(t){return void 0===t&&(t=!0),this.enable=t,this}},{key:"toggleEnable",value:function(){return this.setEnable(!this.enable),this}},{key:"onPointerDown",value:function(t,e){this.enable&&void 0===this.pointer&&(!this.bounds||this.bounds.contains(t.x,t.y))&&this.pointer!==t&&(this.pointer=t,this.lastPointer=t,this.movedState=!1,this.tracerState=hl,void 0===this.gameObject&&(this.isTouchingAnyObject=e.length>0),this.onDragStart())}},{key:"onPointerUp",value:function(t){this.enable&&(!this.bounds||this.bounds.contains(t.x,t.y))&&this.pointer===t&&(this.pointer=void 0,this.movedState=!1,this.tracerState=kg,this.onDragEnd())}},{key:"onPointerMove",value:function(t){if(this.enable&&t.isDown){var e=!this.bounds||this.bounds.contains(t.x,t.y),n=this.pointer===t;!n&&e||(n&&!e?this.onPointerUp(t):(this.movedState||(this.movedState=t.x!==t.downX||t.y!==t.downY),this.movedState&&this.onDrag()))}}},{key:"dragCancel",value:function(){return this.tracerState===hl&&this.onDragEnd(),this.pointer=void 0,this.tracerState=kg,this}},{key:"onDragStart",value:function(){this.emit("dragstart",this)}},{key:"onDragEnd",value:function(){this.emit("dragend",this)}},{key:"onDrag",value:function(){this.emit("drag",this)}},{key:"preUpdate",value:function(t,e){}},{key:"postUpdate",value:function(t,e){}},{key:"startTicking",value:function(){Jd(Rb(n.prototype),"startTicking",this).call(this),this.scene.events.on("preupdate",this.preUpdate,this),this.scene.events.on("postupdate",this.postUpdate,this)}},{key:"stopTicking",value:function(){Jd(Rb(n.prototype),"stopTicking",this).call(this),this.scene&&(this.scene.events.off("preupdate",this.preUpdate,this),this.scene.events.off("postupdate",this.postUpdate,this))}},{key:"setRecongizedStateObject",value:function(t){return this.recongizedState=t,this}},{key:"cancel",value:function(){return this.state=cy,this}},{key:"enable",get:function(){return this._enable},set:function(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}},{key:"state",get:function(){return this.recongizedState.state},set:function(t){this.recongizedState.state=t}}]),n}(),kg=0,hl=1,cy="IDLE";function dy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function il(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ey(t,e,s){return e&&il(t.prototype,e),s&&il(t,s),t}var Sb=function(){function t(e){dy(this,t);var $gK07$$interop$default=_a(Pb);var s=$gK07$$interop$default.d(e,"states",void 0);s&&this.addStates(s);var i=$gK07$$interop$default.d(e,"extend",void 0);if(i)for(var a in i)this.hasOwnProperty(a)&&void 0!==this[a]||(this[a]=i[a]);var r=$gK07$$interop$default.d(e,"eventEmitter",void 0),n=$gK07$$interop$default.d(e,"EventEmitterClass",void 0);this.setEventEmitter(r,n),this._stateLock=!1,this.resetFromJSON(e)}return ey(t,[{key:"shutdown",value:function(){this.destroyEventEmitter()}},{key:"destroy",value:function(){this.shutdown()}},{key:"resetFromJSON",value:function(t){var $gK07$$interop$default=_a(Pb);this.setEnable($gK07$$interop$default.d(t,"enable",!0)),this.start($gK07$$interop$default.d(t,"start",void 0));var e=$gK07$$interop$default.d(t,"init",void 0);return e&&e.call(this),this}},{key:"toJSON",value:function(){return{curState:this.state,prevState:this.prevState,enable:this.enable,start:this._start}}},{key:"setEnable",value:function(t){return void 0===t&&(t=!0),this.enable=t,this}},{key:"start",value:function(t){return this._start=t,this._prevState=void 0,this._state=t,this}},{key:"goto",value:function(t){return null!=t&&(this.state=t),this}},{key:"next",value:function(){var t,e=this["next_"+this.state];return e&&(t="string"==typeof e?e:e.call(this)),this.goto(t),this}},{key:"addState",value:function(t,e){var $gK07$$interop$default=_a(Pb);var s=$gK07$$interop$default.d(e,"next",void 0);s&&(this["next_"+t]=s);var i=$gK07$$interop$default.d(e,"exit",void 0);i&&(this["exit_"+t]=i);var a=$gK07$$interop$default.d(e,"enter",void 0);return a&&(this["enter_"+t]=a),this}},{key:"addStates",value:function(t){for(var e in t)this.addState(e,t[e]);return this}},{key:"update",value:function(t,e,s){void 0===s&&(s="update");var i=this[s+"_"+this.state];i&&i.call(this,t,e)}},{key:"preupdate",value:function(t,e){this.update(t,e,"preupdate")}},{key:"postupdate",value:function(t,e){this.update(t,e,"postupdate")}},{key:"state",set:function(t){if(this.enable&&!this._stateLock&&this._state!==t){if(this._prevState=this._state,this._state=t,this._stateLock=!0,this.emit("statechange",this),null!=this._prevState){var e="exit_"+this._prevState,s=this[e];s&&s.call(this),this.emit(e,this)}if(this._stateLock=!1,null!=this._state){var i="enter_"+this._state,a=this[i];a&&a.call(this),this.emit(i,this)}}},get:function(){return this._state}},{key:"prevState",get:function(){return this._prevState}}]),t}();Object.assign(Sb.prototype,Cc);var Tb=Phaser.Utils.Objects.GetValue,fy=Phaser.Math.Distance.Between,jl=function(t){Px(r,Kd);var e=Rx(r);function r(t,a){var n;Lx(this,r);var s=fl(n=e.call(this,t,a)),i={states:{IDLE:{enter:function(){s.stop(),s.tapsCount=0,s.x=0,s.y=0,s.worldX=0,s.worldY=0},exit:function(){var t=s.lastPointer;s.x=t.x,s.y=t.y,s.worldX=t.worldX,s.worldY=t.worldY}},BEGIN:{enter:function(){s.start(),s.tapsCount=0,s.emit("tappingstart",s,s.gameObject,s.lastPointer)}},RECOGNIZED:{enter:function(){s.start(),s.emit("tap",s,s.gameObject,s.lastPointer),s.emit("".concat(s.tapsCount,"tap"),s,s.gameObject,s.lastPointer)}}},init:function(){this.state=Ub},eventEmitter:!1};return n.setRecongizedStateObject(new Sb(i)),n}return Mx(r,[{key:"resetFromJSON",value:function(t){Nx(Id(r.prototype),"resetFromJSON",this).call(this,t),this.setMaxHoldTime(Tb(t,"time",250)),this.setTapInterval(Tb(t,"tapInterval",200)),this.setDragThreshold(Tb(t,"threshold",9)),this.setTapOffset(Tb(t,"tapOffset",10));var e=Tb(t,"taps",void 0);return void 0!==e?this.setTaps(e):(this.setMaxTaps(Tb(t,"maxTaps",void 0)),this.setMinTaps(Tb(t,"minTaps",void 0))),this}},{key:"onDragStart",value:function(){switch(this.state){case Ub:this.state=uc;break;case uc:var t=this.lastPointer;fy(t.upX,t.upY,t.x,t.y)>this.tapOffset&&(this.state=vc,this.state=uc);break;case vc:this.state=uc;}}},{key:"onDragEnd",value:function(){this.state===uc&&(this.tapsCount++,this.emit("tapping",this,this.gameObject,this.lastPointer),void 0!==this.maxTaps&&this.tapsCount===this.maxTaps&&(this.state=vc))}},{key:"onDrag",value:function(){this.state!==Ub&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Ub)}},{key:"preUpdate",value:function(t,e){if(this.state===uc){var r=this.lastPointer;if(r.isDown)t-r.downTime>this.holdTime&&(this.state=Ub);else t-r.upTime>this.tapInterval&&(void 0===this.minTaps||this.tapsCount>=this.minTaps?this.state=vc:this.state=Ub)}}},{key:"postUpdate",value:function(t,e){this.state===vc&&(this.state=Ub)}},{key:"setMaxHoldTime",value:function(t){return this.holdTime=t,this}},{key:"setTapInterval",value:function(t){return this.tapInterval=t,this}},{key:"setDragThreshold",value:function(t){return this.dragThreshold=t,this}},{key:"setTapOffset",value:function(t){return this.tapOffset=t,this}},{key:"setMaxTaps",value:function(t){return this.maxTaps=t,this}},{key:"setMinTaps",value:function(t){return this.minTaps=t,this}},{key:"setTaps",value:function(t,e){return void 0===e&&(e=t),this.setMinTaps(t).setMaxTaps(e),this}},{key:"isTapped",get:function(){return this.state===vc}}]),r}(),Ub="IDLE",uc="BEGIN",vc="RECOGNIZED";Qb.register("tap",function(t,e){return Ec(t)||(e=t,t=this.scene),new jl(t,e)}),Ob(window,"RexPlugins.Gestures.Tap",jl);function gy(t){return(gy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kl(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function iy(t,e,r){return e&&kl(t.prototype,e),r&&kl(t,r),t}function jy(t,e,r){return(jy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var o=ky(t,e);if(o){var n=Object.getOwnPropertyDescriptor(o,e);return n.get?n.get.call(r):n.value}})(t,e,r||t)}function ky(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ld(t)););return t}function ly(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&my(t,e)}function my(t,e){return(my=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ny(t){var e=py();return function(){var r,o=Ld(t);if(e){var n=Ld(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return oy(this,r)}}function oy(t,e){return!e||"object"!==gy(e)&&"function"!=typeof e?ll(t):e}function ll(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function py(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function Ld(t){return(Ld=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ml=Phaser.Utils.Objects.GetValue,nl=function(t){ly(r,Kd);var e=ny(r);function r(t,o){var n;hy(this,r);var $=ll(n=e.call(this,t,o)),a={states:{IDLE:{enter:function(){$.x=0,$.y=0,$.worldX=0,$.worldY=0},exit:function(){var t=$.lastPointer;$.x=t.x,$.y=t.y,$.worldX=t.worldX,$.worldY=t.worldY}},BEGIN:{enter:function(){$.start()},exit:function(){$.stop()}},RECOGNIZED:{enter:function(){$.emit("pressstart",$,$.gameObject,$.lastPointer)},exit:function(){$.emit("pressend",$,$.gameObject,$.lastPointer)}}},init:function(){this.state=Md},eventEmitter:!1};return n.setRecongizedStateObject(new Sb(a)),n}return iy(r,[{key:"resetFromJSON",value:function(t){return jy(Ld(r.prototype),"resetFromJSON",this).call(this,t),this.setDragThreshold(ml(t,"threshold",9)),this.setMinHoldTime(ml(t,"time",251)),this}},{key:"onDragStart",value:function(){this.state=0===this.holdTime?lg:ol}},{key:"onDragEnd",value:function(){this.state=Md}},{key:"onDrag",value:function(){this.state!==Md&&this.pointer.getDistance()>this.dragThreshold&&(this.state=Md)}},{key:"preUpdate",value:function(t,e){this.state===ol&&t-this.pointer.downTime>=this.holdTime&&(this.state=lg)}},{key:"setDragThreshold",value:function(t){return this.dragThreshold=t,this}},{key:"setMinHoldTime",value:function(t){return this.holdTime=t,this}},{key:"isPressed",get:function(){return this.state===lg}}]),r}(),Md="IDLE",ol="BEGIN",lg="RECOGNIZED";Qb.register("press",function(e,r){return Ec(e)||(r=e,e=this.scene),new nl(e,r)}),Ob(window,"RexPlugins.Gestures.Press",nl);function qy(t){return(qy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ry(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pl(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function sy(t,e,r){return e&&pl(t.prototype,e),r&&pl(t,r),t}function ty(t,e,r){return(ty="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var o=uy(t,e);if(o){var n=Object.getOwnPropertyDescriptor(o,e);return n.get?n.get.call(r):n.value}})(t,e,r||t)}function uy(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Nd(t)););return t}function vy(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wy(t,e)}function wy(t,e){return(wy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xy(t){var e=zy();return function(){var r,o=Nd(t);if(e){var n=Nd(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return yy(this,r)}}function yy(t,e){return!e||"object"!==qy(e)&&"function"!=typeof e?ql(t):e}function ql(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zy(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function Nd(t){return(Nd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ay=Phaser.Utils.Objects.GetValue,rl=function(t){vy(r,Kd);var e=xy(r);function r(t,o){var n;ry(this,r);var a=ql(n=e.call(this,t,o)),$={states:{IDLE:{},BEGIN:{enter:function(){var t=a.pointer;a.startX=t.x,a.startY=t.y,a.startWorldX=t.worldX,a.startWorldY=t.worldY}},RECOGNIZED:{enter:function(){a.emit("panstart",a,a.gameObject,a.lastPointer)},exit:function(){var t=a.lastPointer;a.endX=t.x,a.endY=t.y,a.endWorldX=t.worldX,a.endWorldY=t.worldY,a.emit("panend",a,a.gameObject,a.lastPointer)}}},init:function(){this.state=sl},eventEmitter:!1};return n.setRecongizedStateObject(new Sb($)),n}return sy(r,[{key:"resetFromJSON",value:function(t){return ty(Nd(r.prototype),"resetFromJSON",this).call(this,t),this.setDragThreshold(Ay(t,"threshold",10)),this}},{key:"onDragStart",value:function(){this.state=0===this.dragThreshold?Od:tl}},{key:"onDragEnd",value:function(){this.state=sl}},{key:"onDrag",value:function(){switch(this.state){case tl:this.pointer.getDistance()>=this.dragThreshold&&(this.state=Od);break;case Od:var t=this.pointer.position,e=this.pointer.prevPosition;this.dx=t.x-e.x,this.dy=t.y-e.y;var r=this.pointer;this.x=r.x,this.y=r.y,this.worldX=r.worldX,this.worldY=r.worldY,this.emit("pan",this,this.gameObject,this.lastPointer);}}},{key:"setDragThreshold",value:function(t){return this.dragThreshold=t,this}},{key:"isPan",get:function(){return this.state===Od}}]),r}(),sl="IDLE",tl="BEGIN",Od="RECOGNIZED";Qb.register("pan",function(e,$){return Ec(e)||($=e,e=this.scene),new rl(e,$)}),Ob(window,"RexPlugins.Gestures.Pan",rl);function By(t){return(By="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ul(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Dy(t,e,r){return e&&ul(t.prototype,e),r&&ul(t,r),t}function vl(t,e,r){return(vl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var i=Ey(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function Ey(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Zc(t)););return t}function Fy(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gy(t,e)}function Gy(t,e){return(Gy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Hy(t){var e=Jy();return function(){var r,i=Zc(t);if(e){var o=Zc(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return Iy(this,r)}}function Iy(t,e){return!e||"object"!==By(e)&&"function"!=typeof e?wl(t):e}function wl(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jy(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function Zc(t){return(Zc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ky=Phaser.Math.Distance.Between,Ly=Phaser.Math.Angle.Between,My={getDt:function(){return this.scene.sys.game.loop.delta},getVelocity:function(){var t=this.pointer.position,e=this.pointer.prevPosition;return Ky(e.x,e.y,t.x,t.y)/(.001*this.getDt())},getVelocityX:function(){var t=this.pointer.position,e=this.pointer.prevPosition;return Math.abs(t.x-e.x)/(.001*this.getDt())},getVelocityY:function(){var t=this.pointer.position,e=this.pointer.prevPosition;return Math.abs(t.y-e.y)/(.001*this.getDt())},getVelocityAngle:function(){var t=this.pointer.position,e=this.pointer.prevPosition;return Ly(e.x,e.y,t.x,t.y)}};var Ny={"up&down":0,"left&right":1,"4dir":2,"8dir":3};var Oy=function(t,e,r){switch(void 0===r?r={}:!0===r&&(r=Py),r.left=!1,r.right=!1,r.up=!1,r.down=!1,t=(t+360)%360,e){case 0:t<180?r.down=!0:r.up=!0;break;case 1:t>90&&t<=270?r.left=!0:r.right=!0;break;case 2:t>45&&t<=135?r.down=!0:t>135&&t<=225?r.left=!0:t>225&&t<=315?r.up=!0:r.right=!0;break;case 3:t>22.5&&t<=67.5?(r.down=!0,r.right=!0):t>67.5&&t<=112.5?r.down=!0:t>112.5&&t<=157.5?(r.down=!0,r.left=!0):t>157.5&&t<=202.5?r.left=!0:t>202.5&&t<=247.5?(r.left=!0,r.up=!0):t>247.5&&t<=292.5?r.up=!0:t>292.5&&t<=337.5?(r.up=!0,r.right=!0):r.right=!0;}return r},Py={};var Qy=Phaser.Math.Distance.Between,mg=Phaser.Utils.Objects.GetValue,Ry=Phaser.Math.RadToDeg,ng=function(t){Fy(r,Kd);var e=Hy(r);function r(t,i){var o;Cy(this,r);var a=wl(o=e.call(this,t,i));a.___hotfixMode=i.workaroundEnabled,a.___maxTimeInDrag=i.workaroundMaxTime;var n={states:{IDLE:{enter:function(){a.x=0,a.y=0,a.worldX=0,a.worldY=0,1==a.___hotfixMode&&(a.vaildDrag=!1,a.stop())},exit:function(){var t=a.lastPointer;a.x=t.x,a.y=t.y,a.worldX=t.worldX,a.worldY=t.worldY}},BEGIN:{enter:function(){a.validDrag=!1,1==a.___hotfixMode&&(a.___timeInDrag=0,a.___pointerStartX=a.pointer.position.x,a.___pointerStartY=a.pointer.position.y,a.___velocityInTime=0,a.start())}},RECOGNIZED:{enter:function(){a.start(),a.updateDirectionStates(),a.emit("swipe",a,a.gameObject,a.lastPointer)},exit:function(){a.stop(),a.clearDirectionStates()}}},init:function(){this.state=Pd},eventEmitter:!1};return o.setRecongizedStateObject(new Sb(n)),o.clearDirectionStates(),o}return Dy(r,[{key:"resetFromJSON",value:function(t){return vl(Zc(r.prototype),"resetFromJSON",this).call(this,t),this.setDragThreshold(mg(t,"threshold",10)),this.setMinDragVelocity(mg(t,"velocityThreshold",1e3)),this.setDirectionMode(mg(t,"dir","8dir")),this}},{key:"onDragStart",value:function(){this.state=xl}},{key:"onDragEnd",value:function(){this.state=Pd}},{key:"onDrag",value:function(){this.state===xl&&(this.vaildDrag||(this.vaildDrag=0===this.dragThreshold||this.pointer.getDistance()>=this.dragThreshold),this.vaildDrag&&this.dragVelocity>this.minDragVelocity&&(this.state=Qd))}},{key:"postUpdate",value:function(t,e){if(1==this.___hotfixMode){this.___timeInDrag+=e;var i=this.pointer.position,o=Qy(this.___pointerStartX,this.___pointerStartY,i.x,i.y)/(.001*this.___timeInDrag);this.vaildDrag&&o>this.minDragVelocity&&(this.state=Qd)}vl(Zc(r.prototype),"postUpdate",this).call(this,t,e),this.state===Qd&&(this.state=Pd),1==this.___hotfixMode&&this.___timeInDrag>=this.___maxTimeInDrag&&(this.state=Pd)}},{key:"setDragThreshold",value:function(t){return this.dragThreshold=t,this}},{key:"setMinDragVelocity",value:function(t){return this.minDragVelocity=t,this}},{key:"setDirectionMode",value:function(t){return"string"==typeof t&&(t=Ny[t]),this.dirMode=t,this}},{key:"updateDirectionStates",value:function(){var t=Ry(this.getVelocityAngle());return Oy(t,this.dirMode,this),this}},{key:"clearDirectionStates",value:function(){return this.left=!1,this.right=!1,this.up=!1,this.down=!1,this}},{key:"isSwiped",get:function(){return this.state===Qd}},{key:"dragVelocity",get:function(){var t;switch(this.dirMode){case 0:t=this.getVelocityY();break;case 1:t=this.getVelocityX();break;default:t=this.getVelocity();}return t}}]),r}();Object.assign(ng.prototype,My);var Pd="IDLE",xl="BEGIN",Qd="RECOGNIZED";Qb.register("swipe",function(e,$){return Ec(e)||($=e,e=this.scene),new ng(e,$)}),Ob(window,"RexPlugins.Gestures.Swipe",ng);function Sy(t){return(Sy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ty(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yl(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function Uy(t,e,r){return e&&yl(t.prototype,e),r&&yl(t,r),t}function Vy(t,e,r){return(Vy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var a=Wy(t,e);if(a){var n=Object.getOwnPropertyDescriptor(a,e);return n.get?n.get.call(r):n.value}})(t,e,r||t)}function Wy(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Rd(t)););return t}function Xy(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yy(t,e)}function Yy(t,e){return(Yy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Zy(t){var e=_y();return function(){var r,a=Rd(t);if(e){var n=Rd(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return $y(this,r)}}function $y(t,e){return!e||"object"!==Sy(e)&&"function"!=typeof e?zl(t):e}function zl(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function Rd(t){return(Rd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function az(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Al(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function bz(t,e,i){return e&&Al(t.prototype,e),i&&Al(t,i),t}var og=Phaser.Utils.Objects.GetValue,cz=Phaser.Utils.Array.SpliceOne,dz=Phaser.Math.Distance.Between,ez=Phaser.Math.Angle.Between,pg=function(){function t(e,i){az(this,t);var n=e.input.manager.pointersTotal-1;n<2&&e.input.addPointer(2-n),this.scene=e,this.setEventEmitter(og(i,"eventEmitter",void 0)),this._enable=void 0,this.pointers=[],this.movedState={},this.resetFromJSON(i),this.boot()}return bz(t,[{key:"resetFromJSON",value:function(t){return this.setEnable(og(t,"enable",!0)),this.bounds=og(t,"bounds",void 0),this.tracerState=Sd,this.pointers.length=0,rc(this.movedState),this}},{key:"boot",value:function(){this.scene.input.on("pointerdown",this.onPointerDown,this),this.scene.input.on("pointerup",this.onPointerUp,this),this.scene.input.on("pointermove",this.onPointerMove,this),this.scene.events.once("shutdown",this.destroy,this)}},{key:"shutdown",value:function(){this.destroyEventEmitter(),this.pointers.length=0,rc(this.movedState),this.scene&&(this.scene.input.off("pointerdown",this.onPointerDown,this),this.scene.input.off("pointerup",this.onPointerUp,this),this.scene.input.off("pointermove",this.onPointerMove,this),this.scene.events.off("destroy",this.destroy,this),this.scene=void 0),this.scene=void 0}},{key:"destroy",value:function(){this.shutdown()}},{key:"setEnable",value:function(t){return void 0===t&&(t=!0),this.enable=t,this}},{key:"toggleEnable",value:function(){return this.setEnable(!this.enable),this}},{key:"onPointerDown",value:function(t){if(this.enable&&2!==this.pointers.length&&(!this.bounds||this.bounds.contains(t.x,t.y))&&-1===this.pointers.indexOf(t))switch(this.movedState[t.id]=!1,this.pointers.push(t),this.tracerState){case Sd:this.tracerState=_c,this.onDrag1Start();break;case _c:this.tracerState=fb,this.onDrag2Start();}}},{key:"onPointerUp",value:function(t){if(this.enable&&(!this.bounds||this.bounds.contains(t.x,t.y))){var e=this.pointers.indexOf(t);if(-1!==e)switch(delete this.movedState[t.id],cz(this.pointers,e),this.tracerState){case _c:this.tracerState=Sd,this.onDrag1End();break;case fb:this.tracerState=_c,this.onDrag2End(),this.onDrag1Start();}}}},{key:"onPointerMove",value:function(t){if(this.enable&&t.isDown){var e=!this.bounds||this.bounds.contains(t.x,t.y),i=-1!==this.pointers.indexOf(t);if(!i&&e);else if(i&&!e)this.onPointerUp(t);else if(this.movedState[t.id]||(this.movedState[t.id]=t.x!==t.downX||t.y!==t.downY),this.movedState[t.id])switch(this.tracerState){case _c:this.onDrag1();break;case fb:this.onDrag2();}}}},{key:"dragCancel",value:function(){return this.tracerState===fb&&this.onDrag2End(),this.pointers.length=0,rc(this.movedState),this.tracerState=Sd,this}},{key:"onDrag1Start",value:function(){this.emit("drag1start",this)}},{key:"onDrag1End",value:function(){this.emit("drag1end",this)}},{key:"onDrag1",value:function(){this.emit("drag1",this)}},{key:"onDrag2Start",value:function(){this.emit("drag2start",this)}},{key:"onDrag2End",value:function(){this.emit("drag2end",this)}},{key:"onDrag2",value:function(){this.emit("drag2",this)}},{key:"setRecongizedStateObject",value:function(t){return this.recongizedState=t,this}},{key:"cancel",value:function(){return this.state=fz,this}},{key:"enable",get:function(){return this._enable},set:function(t){if(this._enable!==t)return t||this.dragCancel(),this._enable=t,this}},{key:"distanceBetween",get:function(){if(this.tracerState!==fb)return 0;var t=this.pointers[0],e=this.pointers[1];return dz(t.x,t.y,e.x,e.y)}},{key:"angleBetween",get:function(){if(this.tracerState!==fb)return 0;var t=this.pointers[0],e=this.pointers[1];return ez(t.x,t.y,e.x,e.y)}},{key:"drag1Vector",get:function(){var t=this.pointers[0];if(t&&this.movedState[t.id]){var e=t.position,i=t.prevPosition;$c.x=e.x-i.x,$c.y=e.y-i.y}else $c.x=0,$c.y=0;return $c}},{key:"centerX",get:function(){if(this.tracerState!==fb)return 0;var t=this.pointers[0].position,e=this.pointers[1].position;return(t.x+e.x)/2}},{key:"centerY",get:function(){if(this.tracerState!==fb)return 0;var t=this.pointers[0].position,e=this.pointers[1].position;return(t.y+e.y)/2}},{key:"prevCenterX",get:function(){if(this.tracerState!==fb)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,e=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.x+e.x)/2}},{key:"prevCenterY",get:function(){if(this.tracerState!==fb)return 0;var t=this.movedState[this.pointers[0].id]?this.pointers[0].prevPosition:this.pointers[0].position,e=this.movedState[this.pointers[1].id]?this.pointers[1].prevPosition:this.pointers[1].position;return(t.y+e.y)/2}},{key:"movementCenterX",get:function(){return this.centerX-this.prevCenterX}},{key:"movementCenterY",get:function(){return this.centerY-this.prevCenterY}},{key:"state",get:function(){return this.recongizedState.state},set:function(t){this.recongizedState.state=t}}]),t}();Object.assign(pg.prototype,Cc);var $c={},Sd=0,_c=1,fb=2,fz="IDLE";var gz=Phaser.Utils.Objects.GetValue,Bl=function(t){Xy(r,pg);var e=Zy(r);function r(t,a){var n;Ty(this,r);var o=zl(n=e.call(this,t,a)),i={states:{IDLE:{enter:function(){o.prevDistance=void 0,o.scaleFactor=1}},BEGIN:{},RECOGNIZED:{enter:function(){o.emit("pinchstart",o)},exit:function(){o.emit("pinchend",o)}}},init:function(){this.state=Cl},eventEmitter:!1};return n.setRecongizedStateObject(new Sb(i)),n}return Uy(r,[{key:"resetFromJSON",value:function(t){return Vy(Rd(r.prototype),"resetFromJSON",this).call(this,t),this.setDragThreshold(gz(t,"threshold",0)),this}},{key:"onDrag2Start",value:function(){this.scaleFactor=1,this.prevDistance=this.distanceBetween,this.state=0===this.dragThreshold?Td:Dl}},{key:"onDrag2End",value:function(){this.state=Cl}},{key:"onDrag2",value:function(){switch(this.state){case Dl:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.prevDistance=t,this.state=Td}break;case Td:t=this.distanceBetween;this.scaleFactor=t/this.prevDistance,this.emit("pinch",this),this.prevDistance=t;}}},{key:"setDragThreshold",value:function(t){return this.dragThreshold=t,this}},{key:"isPinch",get:function(){return this.state===Td}}]),r}(),Cl="IDLE",Dl="BEGIN",Td="RECOGNIZED";Qb.register("pinch",function(e){return new Bl(this.scene,e)}),Ob(window,"RexPlugins.Gestures.Pinch",Bl);function hz(e){return(hz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function El(e,t){for(var r=0;r<t.length;r++){var $=t[r];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(e,$.key,$)}}function jz(e,t,r){return t&&El(e.prototype,t),r&&El(e,r),e}function kz(e,t,r){return(kz="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var $=lz(e,t);if($){var a=Object.getOwnPropertyDescriptor($,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function lz(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ud(e)););return e}function mz(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nz(e,t)}function nz(e,t){return(nz=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oz(e){var t=qz();return function(){var r,$=Ud(e);if(t){var a=Ud(this).constructor;r=Reflect.construct($,arguments,a)}else r=$.apply(this,arguments);return pz(this,r)}}function pz(e,t){return!t||"object"!==hz(t)&&"function"!=typeof t?Fl(e):t}function Fl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qz(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function Ud(e){return(Ud=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rz=Phaser.Math.RotateAround,Gl=function(t,r,$,o){return rz(t,r,$,o),t.rotation+=o,t};var sz=function(t,r){if(!this.isRotation)return this;void 0===r&&(r=this.pointers[0].camera);var e=this.movementCenterX,$=this.movementCenterY;r.getWorldPoint(this.centerX,this.centerY,qg);var o=qg.x,i=qg.y,a=this.rotation;if(Array.isArray(t))for(var s=t,n=0,R=s.length;n<R;n++)(t=s[n]).x+=e,t.y+=$,Gl(t,o,i,a);else t.x+=e,t.y+=$,Gl(t,x,y,a);return this},qg={};var tz=Phaser.Utils.Objects.GetValue,rg=Phaser.Math.Angle.WrapDegrees,Hl=Phaser.Math.Angle.ShortestBetween,sg=Phaser.Math.RadToDeg,uz=Phaser.Math.DegToRad,tg=function(e){mz(r,pg);var t=oz(r);function r(e,$){var a;iz(this,r);var o=Fl(a=t.call(this,e,$)),n={states:{IDLE:{enter:function(){o.prevAngle=void 0,o.angle=0}},BEGIN:{},RECOGNIZED:{enter:function(){o.emit("rotatestart",o)},exit:function(){o.emit("rotateend",o)}}},init:function(){this.state=Il},eventEmitter:!1};return a.setRecongizedStateObject(new Sb(n)),a}return jz(r,[{key:"resetFromJSON",value:function(e){return kz(Ud(r.prototype),"resetFromJSON",this).call(this,e),this.setDragThreshold(tz(e,"threshold",0)),this}},{key:"onDrag2Start",value:function(){this.prevAngle=rg(sg(this.angleBetween)),this.state=0===this.rotationThreshold?Vd:Jl}},{key:"onDrag2End",value:function(){this.state=Il}},{key:"onDrag2",value:function(){switch(this.state){case Jl:if(this.pointers[0].getDistance()>=this.dragThreshold&&this.pointers[1].getDistance()>=this.dragThreshold){var e=rg(sg(this.angleBetween));this.angle=Hl(this.prevAngle,e),this.prevAngle=e,this.state=Vd}break;case Vd:e=rg(sg(this.angleBetween));this.angle=Hl(this.prevAngle,e),this.prevAngle=e,this.emit("rotate",this);}}},{key:"setDragThreshold",value:function(e){return this.dragThreshold=e,this}},{key:"isRotation",get:function(){return this.state===Vd}},{key:"rotation",get:function(){return uz(this.angle)}}]),r}(),vz={spinObject:sz};Object.assign(tg.prototype,vz);var Il="IDLE",Jl="BEGIN",Vd="RECOGNIZED";Qb.register("rotate",function(e){return new tg(this.scene,e)}),Ob(window,"RexPlugins.Gestures.Rotate",tg);var wz=function(t){Cx(r,Phaser.Plugins.ScenePlugin);var e=Ex(r);function r(t,o){var a;return Bx(this,r),(a=e.call(this,t,o)).add=new Qb(t),a}return r}();function xz(r){return(xz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function yz(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function Kl(r,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o.key,o)}}function zz(r,t,e){return t&&Kl(r.prototype,t),e&&Kl(r,e),r}function Az(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&Bz(r,t)}function Bz(r,t){return(Bz=Object.setPrototypeOf||function(r,t){return r.__proto__=t,r})(r,t)}function Cz(r){var t=Fz();return function(){var e,o=Ll(r);if(t){var n=Ll(this).constructor;e=Reflect.construct(o,arguments,n)}else e=o.apply(this,arguments);return Dz(this,e)}}function Dz(r,t){return!t||"object"!==xz(t)&&"function"!=typeof t?Ez(r):t}function Ez(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Fz(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}function Ll(r){return(Ll=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)})(r)}var Gz=function(r){Az(e,Phaser.Plugins.BasePlugin);var t=Cz(e);function e(r){return yz(this,e),t.call(this,r)}return zz(e,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}},{key:"add",value:function(r,t){return new zi(r,t)}}]),e}();function Hz(t){return(Hz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Iz(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ml(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Jz(t,e,r){return e&&Ml(t.prototype,e),r&&Ml(t,r),t}function Kz(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lz(t,e)}function Lz(t,e){return(Lz=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mz(t){var e=Pz();return function(){var r,o=Nl(t);if(e){var n=Nl(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Nz(this,r)}}function Nz(t,e){return!e||"object"!==Hz(e)&&"function"!=typeof e?Oz(t):e}function Oz(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pz(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function Nl(t){return(Nl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Qz=function(t){Kz(r,Phaser.Plugins.BasePlugin);var e=Mz(r);function r(t){return Iz(this,r),e.call(this,t)}return Jz(r,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}},{key:"add",value:function(t,e){return new Ei(t,e)}}]),r}();function Rz(t){return(Rz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sz(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tz(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Uz(t,e)}function Uz(t,e){return(Uz=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Vz(t){var e=Yz();return function(){var r,o=Ol(t);if(e){var n=Ol(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return Wz(this,r)}}function Wz(t,e){return!e||"object"!==Rz(e)&&"function"!=typeof e?Xz(t):e}function Xz(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yz(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function Ol(t){return(Ol=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zz=function(t){Tz(r,Phaser.Scene);var e=Vz(r);function r(){return Sz(this,r),e.apply(this,arguments)}return r}();var Ua="SCENE_INTERFACE";function $z(t){return($z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aA(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bA(t,e)}function bA(t,e){return(bA=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function cA(t){var e=fA();return function(){var r,o=Pl(t);if(e){var n=Pl(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return dA(this,r)}}function dA(t,e){return!e||"object"!==$z(e)&&"function"!=typeof e?eA(t):e}function eA(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fA(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function Pl(t){return(Pl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gA=function(t){aA(r,Phaser.Scene);var e=cA(r);function r(){return _z(this,r),e.apply(this,arguments)}return r}();function hA(t){return(hA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iA(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function jA(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&kA(t,r)}function kA(t,r){return(kA=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function lA(t){var r=oA();return function(){var e,o=Ql(t);if(r){var n=Ql(this).constructor;e=Reflect.construct(o,arguments,n)}else e=o.apply(this,arguments);return mA(this,e)}}function mA(t,r){return!r||"object"!==hA(r)&&"function"!=typeof r?nA(t):r}function nA(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oA(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function Ql(t){return(Ql=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pA=function(t){jA(e,Phaser.Scene);var r=lA(e);function e(){return iA(this,e),r.apply(this,arguments)}return e}();var wc,xc,yc={},wa=yc={};function ug(){throw new Error("setTimeout has not been defined")}function vg(){throw new Error("clearTimeout has not been defined")}function Rl($){if(wc===setTimeout)return setTimeout($,0);if((wc===ug||!wc)&&setTimeout)return wc=setTimeout,setTimeout($,0);try{return wc($,0)}catch(e){try{return wc.call(null,$,0)}catch(e){return wc.call(this,$,0)}}}function qA($){if(xc===clearTimeout)return clearTimeout($);if((xc===vg||!xc)&&clearTimeout)return xc=clearTimeout,clearTimeout($);try{return xc($)}catch(e){try{return xc.call(null,$)}catch(e){return xc.call(this,$)}}}!function(){try{wc="function"==typeof setTimeout?setTimeout:ug}catch($){wc=ug}try{xc="function"==typeof clearTimeout?clearTimeout:vg}catch($){xc=vg}}();var ad,Vb=[],wg=!1,Sl=-1;function rA(){wg&&ad&&(wg=!1,ad.length?Vb=ad.concat(Vb):Sl=-1,Vb.length&&Tl())}function Tl(){if(!wg){var $=Rl(rA);wg=!0;for(var e=Vb.length;e;){for(ad=Vb,Vb=[];++Sl<e;)ad&&ad[Sl].run();Sl=-1,e=Vb.length}ad=null,wg=!1,qA($)}}function Ul($,e){this.fun=$,this.array=e}function ib(){}wa.nextTick=function($){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Vb.push(new Ul($,e)),1!==Vb.length||wg||Rl(Tl)},Ul.prototype.run=function(){this.fun.apply(null,this.array)},wa.title="browser",wa.env={},wa.argv=[],wa.version="",wa.versions={},wa.on=ib,wa.addListener=ib,wa.once=ib,wa.off=ib,wa.removeListener=ib,wa.removeAllListeners=ib,wa.emit=ib,wa.prependListener=ib,wa.prependOnceListener=ib,wa.listeners=function($){return[]},wa.binding=function($){throw new Error("process.binding is not supported")},wa.cwd=function(){return"/"},wa.chdir=function($){throw new Error("process.chdir is not supported")},wa.umask=function(){return 0};function sA(t){return(sA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var ma={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function tA(){var t=navigator.userAgent;/Windows/.test(t)?ma.windows=!0:/Mac UtilOsData/.test(t)&&!/like Mac UtilOsData/.test(t)?ma.macOS=!0:/Android/.test(t)?ma.android=!0:/Linux/.test(t)?ma.linux=!0:/iP[ao]d|iPhone/i.test(t)?(ma.iOS=!0,navigator.appVersion.match(/UtilOsData (\d+)/),ma.iOSVersion=parseInt(RegExp.$1,10),ma.iPhone=-1!==t.toLowerCase().indexOf("iphone"),ma.iPad=-1!==t.toLowerCase().indexOf("ipad")):/Kindle/.test(t)||/\bKF[A-Z][A-Z]+/.test(t)||/Silk.*Mobile Safari/.test(t)?ma.kindle=!0:/CrOS/.test(t)&&(ma.chromeOS=!0),(/Windows Phone/i.test(t)||/IEMobile/i.test(t))&&(ma.android=!1,ma.iOS=!1,ma.macOS=!1,ma.windows=!0,ma.windowsPhone=!0);var e=/Silk/.test(t);(ma.windows||ma.macOS||ma.linux&&!e||ma.chromeOS)&&(ma.desktop=!0),(ma.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(ma.desktop=!1),navigator.standalone&&(ma.webApp=!0),void 0!==window.cordova&&(ma.cordova=!0),void 0!==yc&&yc.versions&&yc.versions.node&&(ma.node=!0),ma.node&&"object"===sA(yc.versions)&&(ma.nodeWebkit=!!yc.versions["node-webkit"],ma.electron=!!yc.versions.electron),void 0!==window.ejecta&&(ma.ejecta=!0),/Crosswalk/.test(t)&&(ma.crosswalk=!0),ma.pixelRatio=window.devicePixelRatio||1}var Ga={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};function uA(){var t=navigator.userAgent;return /Edge\/\d+/.test(t)?Ga.edge=!0:/Chrome\/(\d+)/.test(t)&&!ma.windowsPhone?(Ga.chrome=!0,Ga.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(t)?(Ga.firefox=!0,Ga.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(t)&&ma.iOS?Ga.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(t)?(Ga.ie=!0,Ga.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(t)?Ga.opera=!0:/Safari/.test(t)&&!ma.windowsPhone?Ga.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(t)&&(Ga.ie=!0,Ga.trident=!0,Ga.tridentVersion=parseInt(RegExp.$1,10),Ga.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(t)&&(Ga.silk=!0),Ga}var vA=function e(){Pj(this,e),this.displaySettings={allowOrientationScreen:void 0,gameWidth:void 0,gameHeight:void 0,orientationMode:void 0,enableScale:void 0,enableLayerReposition:void 0,phaserMode:void 0,phaserCenterMode:void 0},this.assetsModelsList=[],this.displaySettings.allowOrientationScreen=!0,this.displaySettings.gameWidth=640,this.displaySettings.gameHeight=1050,this.displaySettings.orientationMode=md,ma.iOS?(console.log("display mode: iOS"),this.displaySettings.enableScale=!0,this.displaySettings.enableLayerReposition=!0,this.displaySettings.phaserMode=Phaser.Scale.NONE,this.displaySettings.phaserCenterMode=Phaser.Scale.NONE):ma.android?(console.log("display mode: Android"),this.displaySettings.enableScale=!0,this.displaySettings.enableLayerReposition=!0,this.displaySettings.phaserMode=Phaser.Scale.NONE,this.displaySettings.phaserCenterMode=Phaser.Scale.NONE):(console.log("display mode: Desktop/AllElse"),this.displaySettings.enableScale=!0,this.displaySettings.enableLayerReposition=!0,this.displaySettings.phaserMode=Phaser.Scale.NONE,this.displaySettings.phaserCenterMode=Phaser.Scale.NONE,this.displaySettings.allowOrientationScreen=!1),this.scenesList=[{key:Tc,sceneClass:Zz,canBePaused:1},{key:Ua,sceneClass:gA,canBePaused:1},{key:yd,sceneClass:pA,canBePaused:-1}],this.layersList=[{layerName:Gc,sceneKey:Tc},{layerName:on,sceneKey:Ua},{layerName:db,sceneKey:Ua},{layerName:Rg,sceneKey:Ua},{layerName:Sg,sceneKey:yd},{layerName:af,sceneKey:yd}],this.statesList=[{key:Of,stateClass:Os,sceneKey:Ua},{key:Rc,stateClass:Wt,sceneKey:Ua},{key:Sc,stateClass:hu,sceneKey:Ua},{key:tb,stateClass:Xs,sceneKey:Ua},{key:eb,stateClass:zt,sceneKey:Tc},{key:Kb,stateClass:qt,sceneKey:Ua},{key:fc,stateClass:Fs,sceneKey:Ua},{key:Gj,stateClass:ws,sceneKey:Ua},{key:xd,stateClass:et,sceneKey:Ua},{key:gc,stateClass:Kt,sceneKey:Ua}],this.plugins={scene:[{key:"spine",plugin:SpinePlugin,start:!0,sceneKey:"spine",mapping:"spine"},{key:"rexGestures",plugin:wz,start:!0,sceneKey:"rexGestures",mapping:"rexGestures"}],global:[{key:"rexContainerLitePlugin",plugin:Iv,start:!0,sceneKey:"rexContainerLitePlugin",mapping:"rexContainerLitePlugin"},{key:"rexCsvScenario",plugin:px,start:!0,sceneKey:"rexCsvScenario",mapping:"rexCsvScenario"},{key:"rexEaseMove",plugin:bl,start:!0,sceneKey:"rexEaseMove",mapping:"rexEaseMove"},{key:"rexMoveTo",plugin:Gz,start:!0,sceneKey:"rexMoveTo",mapping:"rexMoveTo"},{key:"rexBullet",plugin:zu,start:!0,sceneKey:"rexBullet",mapping:"rexBullet"},{key:"rexRotateTo",plugin:Qz,start:!0}]}},Wb=new vA,Aa=function(){function e(){Pj(this,e)}return ls(e,null,[{key:"AddAssetModelBundleList",value:function(e){for(var t=0;t<e.length;t++)Wb.assetsModelsList.push(e[t])}},{key:"GetAssetsModelList",value:function(){return Wb.assetsModelsList}},{key:"GetScenesList",value:function(){return Wb.scenesList}},{key:"GetLayers",value:function(){return Wb.layersList}},{key:"GetStatesList",value:function(){return Wb.statesList}},{key:"GetPlugins",value:function(){return Wb.plugins}},{key:"GetDisplaySettings",value:function(){return Wb.displaySettings}}]),e}();function wA(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function Vl(e,a){for(var n=0;n<a.length;n++){var t=a[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function xA(e,a,n){return a&&Vl(e.prototype,a),n&&Vl(e,n),e}var Wl=function(){function e(){wA(this,e)}return xA(e,[{key:"configure",value:function(e){this.scene=e}},{key:"startNextSection",value:function(e){this.scene.load.setPath(e)}},{key:"addSpine",value:function(e){this.scene.load.spine(e,e+".json",e+".atlas")}},{key:"addSpineDict",value:function(e){for(var a in e)this.addSpine(e[a])}},{key:"addJS",value:function(e){this.scene.load.script(e)}},{key:"addAudio",value:function(e){var a=e+"/"+e;this.scene.load.audio(e,[a+".mp3",a+".ogg"])}},{key:"addAudioDict",value:function(e){for(var a in e)this.addAudio(e[a])}},{key:"addPNG",value:function(e){this.scene.load.image(e,e+".png")}},{key:"addTextureDict",value:function(e){for(var a in e)this.addPNG(e[a])}},{key:"addBitmapFont",value:function(e){this.scene.load.bitmapFont(e,e+".png",e+".xml")}},{key:"addBitmapFontDict",value:function(e){for(var a in e)this.addBitmapFont(e[a])}}]),e}();function yA(e){return(yA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function AA(e,t,n){return t&&Xl(e.prototype,t),n&&Xl(e,n),e}function BA(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CA(e,t)}function CA(e,t){return(CA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function DA(e){var t=GA();return function(){var n,r=Yl(e);if(t){var o=Yl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return EA(this,n)}}function EA(e,t){return!t||"object"!==yA(t)&&"function"!=typeof t?FA(e):t}function FA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GA(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function Yl(e){return(Yl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function HA(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function Zl(e,a){for(var s=0;s<a.length;s++){var r=a[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function IA(e,a,s){return a&&Zl(e.prototype,a),s&&Zl(e,s),e}var JA=function(){function e(){HA(this,e)}return IA(e,[{key:"initialize",value:function(e,a,s){console.assert(null!=s,"SceneDisplayObject::initialize-> no param aAllowUpdateLayerPositions: ",s),this.mode=Db,this.sceneName=a,this.scene=e,this.allowUpdateLayerPositions=s,this._cameraPosX=0,this._cameraPosY=0,this._sublayersDict={}}},{key:"onResize",value:function(e){if(this.mode==Db)for(var a in this._sublayersDict)this._sublayersDict[a].displayedLite.scale=e.screenScaleForGame;else this.mode==nd&&(this.scene.cameras.main.centerToSize(),this.scene.cameras.main.zoom=e.screenScaleForGame);this.updateLayersPositions(e)}},{key:"updateLayersPositions",value:function(e){for(var a in console.assert(e,"SceneDisplayObject->updateLayersPositions:: requires screenData param which is: ",e),this._sublayersDict){var s=this._sublayersDict[a],r=s.displayedLite,t=s.anchorAxisX,i=s.anchorAxisY;console.assert(r),console.assert(t,"DisplaySystem->_updateLayerPosition:: anchorAxisX isn't set"),console.assert(i,"DisplaySystem->_updateLayerPosition:: anchorAxisY isn't set");var n=Na.game.canvas.getBoundingClientRect();this.allowUpdateLayerPositions&&(3==t&&(r.x=e.screenMaxWidthForGame*e.screenScaleForGame),2==t&&(r.x=e.screenMaxWidthForGame/2*e.screenScaleForGame+Math.abs(e.relsvg.left/2)),1==t&&(r.x=0*e.screenScaleForGame+Math.abs(e.relsvg.left)),3==i&&(r.y=e.screenMaxHeightForGame*e.screenScaleForGame+Math.round(Math.abs(n.top))),2==i&&(r.y=e.screenMaxHeightForGame/2*e.screenScaleForGame+Math.round(Math.abs(n.top))),1==i&&(r.y=0*e.screenScaleForGame+Math.round(Math.abs(n.top))))}}},{key:"_createSublayer",value:function(e,a,s,r){var t=r,i=a+"_"+t,n=this.scene.make.container({},!1);this.scene.add.existing(n),n.scale=s.screenScaleForGame,n.setDepth(e.workaroundDepth+t*pn),this._sublayersDict[i]={baseName:e.name,nameWithQualifierAndDepth:i,displayedLite:n,anchorAxisX:e.anchorAxisX,anchorAxisY:e.anchorAxisY},this.updateLayersPositions(s)}},{key:"getOrCreateContainerLiteLayer",value:function(e,a,s){console.assert(s,"SceneDisplayObject->getLayer:: aScreenData is undefined"),console.assert(e,"SceneDisplayObject->getLayer:: Layer is undefined"),console.assert(e.layerName,"SceneDisplayObject->getLayer:: Layer name is not set"),console.assert(e.anchorAxisX,"SceneDisplayObject->getLayer:: Layer anchorAxisX is not set or is illegaly equal to zero"),console.assert(e.anchorAxisY,"SceneDisplayObject->getLayer:: Layer anchorAxisY is not set or is illegaly equal to zero"),void 0===a&&(a=0);var r=e.layerName+"_"+e.anchorAxisX+e.anchorAxisY,t=r+"_"+a;this._sublayersDict[t]||this._createSublayer(e,r,s,a);var i=this._sublayersDict[t].displayedLite;return console.assert(i,"DisplaySystem->getLayer:: returned layer is null. Layer data or name: ",e," debug layer system: ",ra),i}},{key:"setCameraPosY",value:function(e,a){this._cameraPosY=e,this.scene.cameras.main.scrollY=this._cameraPosY*a.screenScaleForGame}}]),e}();var KA=function(e){BA(n,Phaser.Scene);var t=DA(n);function n(){return zA(this,n),t.apply(this,arguments)}return AA(n,[{key:"create",value:function(){Sa.SetGameScene(this),console.log("GAMESCENE: allowOrientationScreen:: ",Aa.GetDisplaySettings().allowOrientationScreen),ra.SetGameDisplayMode(Aa.GetDisplaySettings().gameWidth,Aa.GetDisplaySettings().gameHeight,Aa.GetDisplaySettings().orientationMode,Aa.GetDisplaySettings().allowOrientationScreen,this.game.config.scaleMode),Oa.RegisterScene(this,Ic,-1);for(var e=Aa.GetScenesList(),t=0;t<e.length;t++){var n=this.game.scene.add(e[t].key,e[t].sceneClass,!0);Oa.RegisterScene(n,e[t].key,e[t].canBePaused);var r=new JA;r.initialize(n,e[t].key,Aa.GetDisplaySettings().enableLayerReposition),ra.RegisterSceneDisplayObject(r)}for(var o=Aa.GetStatesList(),i=0;i<o.length;i++){var p=o[i],$=Oa.GetSceneByKey(p.sceneKey);la.DefineState($,p.key,new p.stateClass)}Aa.GetDisplaySettings().enableScale&&(ra.AddScalingListeners(this),ra.CallResize());for(var a=Aa.GetLayers(),s=0;s<a.length;s++){var c=a[s];ra.AddLayerToScene(c.layerName,c.sceneKey)}na.Run()}},{key:"update",value:function(e,t){Wa.GetFlowManager().onUpdateGamePlaytime(t),Sa.Update(e,t),Ri.Update(t),la.UpdateStates(e,t),la.ExitQueuedStates(),qa.update(e,t),la.EnterQueuedStates(),ra.UpdateRotateScreen()}}]),n}();var Wd=0,$l=0,zc=6e3,_l=null,LA=0,MA=!1,am=!1,NA=setInterval(function(){1==$l&&((Wd+=25)>=zc&&(Wd=zc),_l&&_l(LA))},25),OA=function(e){fs(a,Phaser.Scene);var t=hs(a);function a(){return ds(this,a),t.apply(this,arguments)}return es(a,[{key:"preload",value:function(){am=Hc.GetObjectTogglesOverrides().disableFakeMusicPreload,this.fontX=0,this.m_layer_basic=this.make.container({},!0),this.m_layer_preloader22=this.make.container({},!1),this.m_layer_basic.add(this.m_layer_preloader22);var e="PreloaderLogo",t="preloaderfont";window.bmCustomPreloaderLogoName&&(e=window.bmCustomPreloaderLogoName),window.bmCustomPreloaderFontName&&(t=window.bmCustomPreloaderFontName),this.imgLogo=this.make.image({x:0,y:-75,key:e,add:!0},!1),this.m_layer_preloader22.add(this.imgLogo),this.fontText=this.make.bitmapText({x:this.fontX,y:125,font:t,text:"0",size:!1,add:!0,align:1},!1),this.m_layer_preloader22.add(this.fontText),this.load.on("progress",this._updatePreload,this),this.load.on("complete",this._completePreload,this),this.load.on("filecomplete",this._onFileComplete,this),this.load.on("loaderror",this._onFileError,this);var a=new Wl;a.configure(this);for(var r=Aa.GetAssetsModelList(),n=0;n<r.length;n++)for(var o=r[n],i=0;i<o.bundles.length;i++){var s=o.bundles[i];a.startNextSection(s.path),"image"==s.type&&a.addTextureDict(s.assets),"spine"==s.type&&a.addSpineDict(s.assets),"audio"==s.type&&a.addAudioDict(s.assets),"font"==s.type&&a.addBitmapFontDict(s.assets)}this.screenData={},this.screenData.desiredWidth=Aa.GetDisplaySettings().gameWidth,this.screenData.desiredHeight=Aa.GetDisplaySettings().gameHeight,this.screenData.scaleMode=this.game.config.scaleMode,this._resize(),this.startUpdatingPreloader=!0,this.ref_Resizef=this._onEventResize.bind(this),window.addEventListener("resize",this.ref_Resizef)}},{key:"_updatePreload",value:function(e){if(this.startUpdatingPreloader){var t=Math.ceil(100*e);LA=t,t>=75&&0==$l&&($l=1,_l=this._updatePercentage.bind(this))}this._updatePercentage(t)}},{key:"_updatePercentage",value:function(e){am||(e=Math.ceil((e+Math.ceil(Wd/zc*100))/200*100)),this.fontText.text=e+"%",this.fontText.x=this.fontX+-this.fontText.width/2}},{key:"_completePreload",value:function(){}},{key:"_onFileComplete",value:function(e,t){console.assert(e),console.assert(t)}},{key:"_onFileError",value:function(e){console.log("gamepreloader-> error loading file config: ",e)}},{key:"create",value:function(){this.load.removeAllListeners(),window.removeEventListener("resize",this.ref_Resizef)}},{key:"exitPreloader",value:function(){MA=!0,clearInterval(NA),_l=null,this.imgLogo.destroy(),this.fontText.destroy(),this.m_layer_basic.destroy(),this.m_layer_preloader22.destroy(),this.game.scene.add(Ic,KA,!0),this.game.scene.stop("MoonPreloader")}},{key:"update",value:function(e,t){MA||(this._updatePercentage(100),Wd<zc&&Wd>=(zc-=5*t)&&(Wd=zc),Wd>=zc&&this.exitPreloader(),am&&this.exitPreloader())}},{key:"_onEventResize",value:function(){this._resize()}},{key:"_resize",value:function(){var e=Na.game.canvas.getBoundingClientRect();Na.game.scale.resize(Math.round(window.innerWidth),Math.round(window.innerHeight+Math.abs(e.top))),Bh(this.screenData),this.m_layer_basic.setScale(this.screenData.screenScaleForGame),this.m_layer_basic.setPosition(this.m_layer_basic.x,Math.round(Math.abs(e.top))),this.m_layer_preloader22.x=this.screenData.screenMaxWidthForGame/2,this.m_layer_preloader22.y=this.screenData.screenMaxHeightForGame/2}}]),a}();var Xd={pngAssets:{path:"assets/preloader/textures/",assets:{PreloaderLogo:"PreloaderLogo",EmptyPNG:"EmptyPNG"}},bitmapFontAssets:{path:"assets/preloader/fonts/",assets:{preloaderfont:"preloaderfont"}}},PA=function(e){Yr(r,Phaser.Scene);var t=$r(r);function r(){return Wr(this,r),t.apply(this,arguments)}return Xr(r,[{key:"preload",value:function(){this.load.on("progress",this._updatePreload,this),this.load.on("complete",this._completePreload,this),this.load.on("filecomplete",this._onFileComplete,this),this.load.on("loaderror",this._onFileError,this);var e=new Wl;e.configure(this),e.startNextSection(Xd.pngAssets.path),e.addTextureDict(Xd.pngAssets.assets),e.startNextSection(Xd.bitmapFontAssets.path),e.addBitmapFontDict(Xd.bitmapFontAssets.assets),null!=window.bmOverridesPreloaderAssets&&window.bmOverridesPreloaderAssets.bitmapFontAssets&&(e.startNextSection(window.bmOverridesPreloaderAssets.bitmapFontAssets.path),e.addBitmapFontDict(window.bmOverridesPreloaderAssets.bitmapFontAssets.assets))}},{key:"_updatePreload",value:function(e){}},{key:"_onFileComplete",value:function(e,t){}},{key:"_onFileError",value:function(e){console.log("initialpreloader-> error loading file config: ",e)}},{key:"_completePreload",value:function(){}},{key:"create",value:function(){this.load.removeAllListeners(),this.game.scene.add("MoonPreloader",OA,!0),this.game.scene.stop("MoonInitialPreloader")}},{key:"update",value:function(){}}]),r}();var QA=function(){function e(){Tr(this,e)}return Ur(e,null,[{key:"PreRun",value:function(){}},{key:"Run",value:function(e,n){tA(),uA(),n.isKlass&&Wa.SetFlowManager(new n.klass),n.isObj&&Wa.SetFlowManager(n.obj),na.SetGameRemix(new e);var i=Phaser.AUTO;ma.android&&Ga.firefox&&(i=Phaser.CANVAS),Na.game=new Phaser.Game({title:na.GetGameRemix().getRemixCfg().gameTitle,width:Aa.GetDisplaySettings().gameWidth,height:Aa.GetDisplaySettings().gameHeight,type:i,backgroundColor:na.GetGameRemix().getRemixCfg().backgroundColour,parent:"game-container",physics:na.GetGameRemix().getRemixCfg().physicsCfg,scale:{mode:Aa.GetDisplaySettings().phaserMode,autoCenter:Aa.GetDisplaySettings().phaserCenterMode},plugins:Aa.GetPlugins(),audio:{}}),Aa.AddAssetModelBundleList(na.GetGameRemix().getRemixCfg().assetBundlesList),Na.game.scene.add("MoonInitialPreloader",PA,!0)}}]),e}();function RA(e){return(RA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function TA(e,t,r){return t&&bm(e.prototype,t),r&&bm(e,r),e}function UA(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VA(e,t)}function VA(e,t){return(VA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function WA(e){var t=ZA();return function(){var r,n=cm(e);if(t){var a=cm(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return XA(this,r)}}function XA(e,t){return!t||"object"!==RA(t)&&"function"!=typeof t?YA(e):t}function YA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZA(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function cm(e){return(cm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dm(e,a){for(var t=0;t<a.length;t++){var r=a[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $A(e,a,t){return a&&dm(e.prototype,a),t&&dm(e,t),e}function em(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}var _A=function e(){em(this,e),this.saveSlot=null,this.data=null},zb=new _A,Ab=function(){function e(){em(this,e)}return $A(e,null,[{key:"SetSaveSlot",value:function(e){zb.saveSlot=e}},{key:"IsSaveDataExistingOnPlatform",value:function(){return!!localStorage.getItem(zb.saveSlot)}},{key:"SetSaveDataObject",value:function(e){zb.data=e}},{key:"SaveSaveDataObject",value:function(){localStorage.setItem(zb.saveSlot,JSON.stringify(zb.data))}},{key:"LoadSaveDataObject",value:function(){zb.data=JSON.parse(localStorage.getItem(zb.saveSlot))}},{key:"GetDataObject",value:function(){return zb.data}}]),e}();function aB(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function fm(e,s){for(var r=0;r<s.length;r++){var n=s[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function bB(e,s,r){return s&&fm(e.prototype,s),r&&fm(e,r),e}function cB(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function gm(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function dB(e,r,n){return r&&gm(e.prototype,r),n&&gm(e,n),e}var $a=function(){function e(){cB(this,e)}return dB(e,null,[{key:"ProcessAndGetAssetBundle",value:function(e,r,n){var t={type:e,path:r,assets:[]};for(var a in n)t.assets.push(n[a]);return t}}]),e}();var eB=function(){function e(){aB(this,e)}return bB(e,null,[{key:"GetModuleAssetBundlesData",value:function(e){var s={module:"generic",assetPrefix:"gen"},r=[];return e?(r.push($a.ProcessAndGetAssetBundle("image","assets/"+e+"/generic/textures/",oa)),r.push($a.ProcessAndGetAssetBundle("spine","assets/"+e+"/generic/spines/",Bd)),r.push($a.ProcessAndGetAssetBundle("audio","assets/"+e+"/generic/sounds/",bc)),r.push($a.ProcessAndGetAssetBundle("font","assets/"+e+"/generic/fonts/",zd))):(r.push($a.ProcessAndGetAssetBundle("image","assets/generic/textures/",oa)),r.push($a.ProcessAndGetAssetBundle("spine","assets/generic/spines/",Bd)),r.push($a.ProcessAndGetAssetBundle("audio","assets/generic/sounds/",bc)),r.push($a.ProcessAndGetAssetBundle("font","assets/generic/fonts/",zd)),console.warn("USING FALLBACK GENERIC ASSETS")),console.log(r),s.bundles=r,s}}]),e}();function Yd(){return la.GetState(Kb)}var Qa={music:"music",select_tile:"select_tile",select_tile_02:"select_tile_02",select_tile_03:"select_tile_03",select_tile_04:"select_tile_04",select_special:"select_special",ulozenie_1:"ulozenie_1",ulozenie_3:"ulozenie_3",cofniecie_tile:"cofniecie_tile"};function fB(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function hm(e,s){for(var r=0;r<s.length;r++){var t=s[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function gB(e,s,r){return s&&hm(e.prototype,s),r&&hm(e,r),e}var hB={};var aa={BG_Cloud01:"BG_Cloud01",BG_Cloud02:"BG_Cloud02",BG_Cloud03:"BG_Cloud03",BG_Cloud04:"BG_Cloud04",BG_Color:"BG_Color",BG_Drzewka:"BG_Drzewka",BG_Light:"BG_Light",BG_Shadow:"BG_Shadow",ConsumableCounter:"ConsumableCounter",ConsumablePanel:"ConsumablePanel",Fruit_Blue:"Fruit_Blue",Fruit_Green:"Fruit_Green",Fruit_Orange:"Fruit_Orange",Fruit_Pink:"Fruit_Pink",Fruit_Yellow:"Fruit_Yellow",GO_Consumable_Zaslonka:"GO_Consumable_Zaslonka",HPBar:"HPBar",HPIcon:"HPIcon",Ice_Particle:"Ice_Particle",Ice_Tile:"Ice_Tile",Joker_3KlockiSpec:"Joker_3KlockiSpec",Joker_5Losowych:"Joker_5Losowych",Joker_Bomb:"Joker_Bomb",Joker_Energy:"Joker_Energy",Joker_LiniePozPion:"Joker_LiniePozPion",Joker_MieszanieKlockow:"Joker_MieszanieKlockow",Joker_ScoreBonus:"Joker_ScoreBonus",Lacznik_Horizontal:"Lacznik_Horizontal",Lacznik_Side:"Lacznik_Side",Lacznik_Skos:"Lacznik_Skos",SmallStarIcon:"SmallStarIcon",Particle_Blue:"Particle_Blue",Particle_Green:"Particle_Green",Particle_Orange:"Particle_Orange",Particle_Pink:"Particle_Pink",Particle_Yellow:"Particle_Yellow",Tile:"Tile",Tile_While:"Tile_While",Tile_White_Particle:"Tile_White_Particle",Joker_LiniaPion:"Joker_LiniaPion",Joker_LiniaPoziom:"Joker_LiniaPoziom",JokerTile_Blue:"JokerTile_Blue",JokerTile_Green:"JokerTile_Green",JokerTile_Orange:"JokerTile_Orange",JokerTile_Red:"JokerTile_Red",JokerTile_Yellow:"JokerTile_Yellow",MagicRainbow:"MagicRainbow"};var im={RainbowSwirl:"RainbowSwirl"};var iB=function(){function e(){fB(this,e)}return gB(e,null,[{key:"GetModuleAssetBundlesData",value:function(){var e={module:"fruityswipes",assetPrefix:"game_"},s=[];return s.push($a.ProcessAndGetAssetBundle("image","assets/fruityswipes/textures/",aa)),s.push($a.ProcessAndGetAssetBundle("spine","assets/fruityswipes/spines/",im)),s.push($a.ProcessAndGetAssetBundle("audio","assets/fruityswipes/sounds/",Qa)),s.push($a.ProcessAndGetAssetBundle("font","assets/fruityswipes/fonts/",hB)),e.bundles=s,e}}]),e}();var jB={NONE:"NONE"};function kB(e){return(kB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bd(e,t,a){return(bd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var i=lB(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(a):o.value}})(e,t,a||e)}function lB(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Bb(e)););return e}function mB(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nB(e,t)}function nB(e,t){return(nB=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oB(e){var t=rB();return function(){var a,i=Bb(e);if(t){var o=Bb(this).constructor;a=Reflect.construct(i,arguments,o)}else a=i.apply(this,arguments);return pB(this,a)}}function pB(e,t){return!t||"object"!==kB(t)&&"function"!=typeof t?qB(e):t}function qB(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rB(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function Bb(e){return(Bb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jm(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function km(e,t,a){return t&&jm(e.prototype,t),a&&jm(e,a),e}function sB(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function lm(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function tB(e,n,r){return n&&lm(e.prototype,n),r&&lm(e,r),e}var Zd="GRID_OUT_OF_BOUNDS";var sa=function(){function e(){sB(this,e)}return tB(e,null,[{key:"AddRow",value:function(e,n){e.push(n)}},{key:"GetAt",value:function(n,r,t,o){return console.assert(n,"Param Grid is: ",n),r<0?(o||console.warn(Zd),null):r>=e.GetWidth(n)?(o||console.warn(Zd),null):t<0?(o||console.warn(Zd),null):t>=e.GetHeigth(n)?(o||console.warn(Zd),null):n[t][r]}},{key:"SetAt",value:function(e,n,r,t,o){e[r][n]=t}},{key:"IsOutOfBounds",value:function(e,n,r){return n<0}},{key:"GetHeigth",value:function(e){return e.length}},{key:"GetWidth",value:function(e){return e[0].length}},{key:"ResizeAsNew",value:function(e,n,r){for(var t=[],o=0;o<r;o++){for(var a=[],l=0;l<n;l++)a.push(0);t.push(a)}return t}},{key:"ForEachObjectInGridCallFunc",value:function(e,n){for(var r=0;r<e.length;r++)for(var t=e[r],o=0;o<t.length;o++){n(t[o])}}},{key:"ForEachCoordinateInGridCallFunc",value:function(e,n){for(var r=0;r<e.length;r++)for(var t=e[r],o=0;o<t.length;o++){n(t[o],o,r)}}},{key:"ConvertFromSingleArray",value:function(n,r,t){var o=e.ResizeAsNew([],r,t);return e.ForEachCoordinateInGridCallFunc(o,function(t,a,l){var u=r*l+a;e.SetAt(o,a,l,n[u])}.bind(this)),o}}]),e}();function uB(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function mm(e,a){for(var r=0;r<a.length;r++){var n=a[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vB(e,a,r){return a&&mm(e.prototype,a),r&&mm(e,r),e}var wB=function(){function e(){uB(this,e)}return vB(e,[{key:"onEnter",value:function(e,a){}},{key:"onUpdate",value:function(e,a){}},{key:"onExitInstant",value:function(){}},{key:"onExitDelayed",value:function(){}},{key:"onGameplayActualStart",value:function(){na.GetGameRemix().passEventOnGameplayActualStart()}}]),e}();function xB(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function nm(e,r){for(var a=0;a<r.length;a++){var i=r[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function yB(e,r,a){return r&&nm(e.prototype,r),a&&nm(e,a),e}var xg=function(){function e(){xB(this,e)}return yB(e,null,[{key:"GetOneAndSpliceReturnIt",value:function(e){var r=Phaser.Utils.Array.GetRandom(e);return e.indexOf(r)>-1&&e.splice(e.indexOf(r),1),r}},{key:"MutateSpliceOneRandom",value:function(e){var r=Phaser.Utils.Array.GetRandom(e);e.indexOf(r)>-1&&e.splice(e.indexOf(r),1)}}]),e}();function dd(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function om(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function AB(t,e,r){return e&&om(t.prototype,e),r&&om(t,r),t}var Va={GAMEPLAY:"BAG_ELEMS_GAMEPLAY"};var ta=function(){function t(){zB(this,t)}return AB(t,null,[{key:"Particle",value:function(t,e,r){var o=aa.Tile_White_Particle;r==aa.Fruit_Blue&&(o=aa.Particle_Blue),r==aa.Fruit_Green&&(o=aa.Particle_Green),r==aa.Fruit_Orange&&(o=aa.Particle_Orange),r==aa.Fruit_Pink&&(o=aa.Particle_Pink),r==aa.Fruit_Yellow&&(o=aa.Particle_Yellow);var $=Ea.GetEmptyActor();return ga.InjectIntoActor($,[Va.GAMEPLAY]),Jb.InjectIntoActor($,o,kb,{x:0,y:0,speed:{min:-600,max:600},angle:{min:0,max:360},scale:{start:1,end:0},lifespan:500}),ea.SetInLayerDepth($,1),$.bake(),Jb.GetEmitter($).setSpeed(300),Jb.GetEmitter($).setPosition(t+Phaser.Math.Between(-5,5),e+Phaser.Math.Between(-5,5)),Jb.GetEmitter($).setEmitZone({source:new Phaser.Geom.Circle(0,0,40),type:"edge",quantity:60}),Jb.GetEmitter($).explode(60),$}},{key:"BackgroundTile",value:function(t,e){var r=da.MixSpriteActor(null,t,e,aa.BG_Drzewka,hd,0);return ga.InjectIntoActor(r,[Va.GAMEPLAY]),r.bake(),ea.MoveByHalfOwnSizeInDir(r,0,-1),r}},{key:"Cloud",value:function(t,e,r){var o=da.MixSpriteActor(null,t,e,r,hd,0);return ga.InjectIntoActor(o,[Va.GAMEPLAY]),o.bake(),ea.SetFlipX(o,Phaser.Math.Between(0,1)),o}},{key:"BgTop",value:function(){var t=da.MixSpriteActor(null,0,0,aa.BG_Light,kb,0);return ga.InjectIntoActor(t,[Va.GAMEPLAY]),t.bake(),ea.MoveByHalfOwnSizeInDir(t,0,1),t}},{key:"BgBottom",value:function(){var t=da.MixSpriteActor(null,0,0,aa.BG_Shadow,hd,-1);return ga.InjectIntoActor(t,[Va.GAMEPLAY]),t.bake(),ea.MoveByHalfOwnSizeInDir(t,0,-1),t}},{key:"MatchTile",value:function(t,e,r,o,$,i,n){var g,_=da.MixSpriteActor(null,t,e,aa.Tile,kb,1);return ga.InjectIntoActor(_,[Va.GAMEPLAY]),ba.InjectIntoActor(_,"owned_matchable",!1),ba.InjectIntoActor(_,"owned_matchable_type",!1),ba.InjectIntoActor(_,"tile_x",i),ba.InjectIntoActor(_,"tile_y",n),ac.InjectIntoActor(_),ac.InjectCallbackOnDown(_,r),ac.InjectCallbackOnUp(_,o),ac.InjectCallbackOnMove(_,$),wd.InjectIntoActor(_,(dd(g={pressed:{texture:aa.Tile_While},idle:{texture:aa.Tile}},aa.Fruit_Blue,aa.JokerTile_Blue),dd(g,aa.Fruit_Green,aa.JokerTile_Green),dd(g,aa.Fruit_Orange,aa.JokerTile_Orange),dd(g,aa.Fruit_Pink,aa.JokerTile_Red),dd(g,aa.Fruit_Yellow,aa.JokerTile_Yellow),g)),_.bake(),_}},{key:"Matchable",value:function(t,e,r){var o=da.MixSpriteActor(null,t,e,r,kb,1);return ga.InjectIntoActor(o,[Va.GAMEPLAY]),o.bake(),o}},{key:"OnJokerSwap_3",value:function(t,e){var r=da.MixSpineObject(null,t,e,im.RainbowSwirl,"idle",!1,kb,3);return ga.InjectIntoActor(r,[Va.GAMEPLAY]),Qc.InjectIntoActor(r,1e3),Qc.SetDelay(r,500),Qc.SetAlphaChangePerSecond(r,-1),r.bake(),r}},{key:"Joker",value:function(t,e,r){var o;"bonusScore"==r&&(o=aa.Joker_ScoreBonus),"extraEnergy"==r&&(o=aa.Joker_Energy),"ligtningStorm"==r&&(o=aa.Joker_5Losowych),"generateJokers"==r&&(o=aa.Joker_3KlockiSpec),"detonateLines"==r&&(o=aa.Joker_LiniePozPion),"detonateCircular"==r&&(o=aa.Joker_Bomb),"lineVertical"==r&&(o=aa.Joker_LiniaPion),"lineHorizontal"==r&&(o=aa.Joker_LiniaPoziom);var $=da.MixSpriteActor(null,t,e,o,kb,1);return ga.InjectIntoActor($,[Va.GAMEPLAY]),ba.SetValue($,"type",r),$.bake(),ea.SetScale($,.05),da.GetActionMixerWithValues().mixTweenScaleTo($,"ACT_CUSTOM_SCALE_ME",{_d:Phaser.Math.Between(200,350),delay:Phaser.Math.Between(50,110),ease:"Back.easeOut"},1),$.triggerActions("ACT_CUSTOM_SCALE_ME"),$}},{key:"ChainConnecting",value:function(t,e,r){var o=da.MixSpriteActor(null,t,e,r,kb,0);return ga.InjectIntoActor(o,[Va.GAMEPLAY]),o.bake(),o}}]),t}();function BB(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function pm(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function CB(e,r,t){return r&&pm(e.prototype,r),t&&pm(e,t),e}var qm=function(){function e(){BB(this,e)}return CB(e,null,[{key:"HealthProgressBar",value:function(){var e=da.MixImageActor(null,17,120,aa.HPBar,bf,0);return ga.InjectIntoActor(e,[Va.GAMEPLAY]),da.GetActionMixerWithValues().mixTweenPositionByDeltaFrom_ScreenTop(e,mc,{_y:-300,_d:500}),da.GetActionMixerWithValues().mixTweenPositionByDeltaTo_ScreenTop(e,nc,{_y:-300,_d:800}),cc.InjectIntoActor(e,100,1,0),Ia.InjectIntoActor(e,"healthbar"),e.bake(),ea.ChangeOrigin(e,0,.5),ea.MoveByHalfOwnSizeInDir(e,-1,0),e}},{key:"HealthIcon",value:function(){var e=da.MixImageActor(null,0,120,aa.HPIcon,bf,0);return ga.InjectIntoActor(e,[Va.GAMEPLAY]),da.GetActionMixerWithValues().mixTweenPositionByDeltaFrom_ScreenTop(e,mc,{_y:-300,_d:500}),da.GetActionMixerWithValues().mixTweenPositionByDeltaTo_ScreenTop(e,nc,{_y:-300,_d:800}),e.bake(),e}}]),e}();var rm=function(){function e(){cd(this,e)}return km(e,null,[{key:"Get",value:function(){return DB}}]),e}();var DB=new rm,EB=function e(){cd(this,e)},c=new EB,FB=function e(){cd(this,e)},d=new FB,sm=5,GB=function e(){cd(this,e),this.gameplayStarted=!1,this.gameplayEnded=!1,this.score=0,this.emptyFields=0,this.slotsGrid=[],this.currentChain=[],this.chains=[],this.acceptOnly=null,this.howMuchToSubtractFromLives=sm,this.movesDone=0,this.easyTiles=[],this.mediumTiles=[],this.hardTiles=[],this.blockInput=!1},HB=function(e){mB(a,wB);var t=oB(a);function a(){var e;return cd(this,a),e=t.call(this),DB=new rm,e.gameplayVals=new GB,e}return km(a,[{key:"onEnter",value:function(e,t){bd(Bb(a.prototype),"onEnter",this).call(this,e,t),this.parentState=e,this.parentScene=t,ra.SetCameraPosYForScene(Tc,0),ta.BgTop(),ta.BgBottom(),ta.BackgroundTile(0,0);var i=function(){return Phaser.Utils.Array.GetRandom([aa.BG_Cloud01,aa.BG_Cloud01,aa.BG_Cloud02,aa.BG_Cloud02,aa.BG_Cloud03,aa.BG_Cloud03])},o=[];o.push(ta.Cloud(-500,-900,i())),o.push(ta.Cloud(-900,-800,i())),o.push(ta.Cloud(-700,-650,i())),o.push(ta.Cloud(-650,-500,i())),o.push(ta.Cloud(-600,-300,i())),o.push(ta.Cloud(-750,-150,i())),o.push(ta.Cloud(500,-900,i())),o.push(ta.Cloud(900,-800,i())),o.push(ta.Cloud(700,-650,i())),o.push(ta.Cloud(650,-500,i())),o.push(ta.Cloud(600,-300,i())),o.push(ta.Cloud(750,-150,i()));for(var r=0;r<o.length;r++){var l=o[r];ea.MoveByXY(l,Phaser.Math.Between(-20,20),Phaser.Math.Between(-15,15)),Phaser.Math.Between(0,100)<30&&qa.queueEntity(l)}this.gameplayVals.easyTiles=[aa.Fruit_Blue,aa.Fruit_Green,aa.Fruit_Orange,aa.Fruit_Pink,aa.Fruit_Yellow],xg.MutateSpliceOneRandom(this.gameplayVals.easyTiles),xg.MutateSpliceOneRandom(this.gameplayVals.easyTiles),this.gameplayVals.mediumTiles=[aa.Fruit_Blue,aa.Fruit_Green,aa.Fruit_Orange,aa.Fruit_Pink,aa.Fruit_Yellow],xg.MutateSpliceOneRandom(this.gameplayVals.mediumTiles),this.gameplayVals.hardTiles=[aa.Fruit_Blue,aa.Fruit_Green,aa.Fruit_Orange,aa.Fruit_Pink,aa.Fruit_Yellow]}},{key:"onGameplayActualStart",value:function(){bd(Bb(a.prototype),"onGameplayActualStart",this).call(this),Ed.ScorePanel(),Ed.ScoreText(),Ed.ScoreIcon(),qm.HealthIcon(),qm.HealthProgressBar(),nb.SetTextWithZeroPad(ch("alias_gameplay_text_score"),0,6),Pa.ChangeAnimation(Ed.Tutorial(),"SwipeRight"),fa.TriggerActionOnAllActorsInBag(mc,ha.GAMEPLAY);this.gameplayVals.slotsGrid=sa.ResizeAsNew(this.gameplayVals.slotsGrid,7,7);for(var e=0;e<7;e++)for(var t=0;t<7;t++){var i=90*(e-3.5)+42+5,o=90*t+42+210-50,r=ta.MatchTile(i,o,this.onTilePressed.bind(this),this.onTileUp.bind(this),this.onTileOver.bind(this),e,t);sa.SetAt(this.gameplayVals.slotsGrid,e,t,r)}sa.ForEachObjectInGridCallFunc(this.gameplayVals.slotsGrid,function(e){var t=void 0;3==ba.GetValue(e,"tile_x")&&3==ba.GetValue(e,"tile_y")&&(t=aa.Fruit_Green),2==ba.GetValue(e,"tile_x")&&3==ba.GetValue(e,"tile_y")&&(t=aa.Fruit_Green),4==ba.GetValue(e,"tile_x")&&3==ba.GetValue(e,"tile_y")&&(t=aa.Fruit_Green),this.rollMatchableAtTile(e,t)}.bind(this));for(var l=0;l<0;l++)this.swapRandomTileToEmpty();this.gameplayVals.gameplayStarted=!0;for(var m=0;m<30;m++);}},{key:"onGameplayGameOver",value:function(){this.gameplayVals.gameplayEnded||(this.gameplayVals.gameplayEnded=!0,sa.ForEachObjectInGridCallFunc(this.gameplayVals.slotsGrid,function(e){var t=ba.GetValue(e,"owned_matchable"),a=ba.GetValue(e,"owned_matchable_type");if(a&&"none"!=a){var i=ff(t);ea.SetAlpha(i,.5)}}.bind(this)),na.GetGameRemix().passEventOnGameplayFinished({score:this.gameplayVals.score}))}},{key:"rollMatchableAtTile",value:function(e,t){var a;a=this.gameplayVals.movesDone<4?Phaser.Utils.Array.GetRandom(this.gameplayVals.easyTiles):this.gameplayVals.movesDone<10?Phaser.Utils.Array.GetRandom(this.gameplayVals.mediumTiles):Phaser.Utils.Array.GetRandom(this.gameplayVals.hardTiles),t&&(a=t);var i=ta.Matchable(e.displayed.x,e.displayed.y,a);ea.SetScale(i,.05),da.GetActionMixerWithValues().mixTweenScaleTo(i,"ACT_CUSTOM_SCALE_ME",{_d:Phaser.Math.Between(200,350),delay:Phaser.Math.Between(50,110),ease:"Back.easeOut"},1),i.triggerActions("ACT_CUSTOM_SCALE_ME"),ba.SetValue(e,"owned_matchable",i.vals.guid),ba.SetValue(e,"owned_matchable_type",a)}},{key:"onTilePressed",value:function(e,t){"none"!=ba.GetValue(e,"owned_matchable_type")&&this.tryPushTileIntoChain(e)}},{key:"onTileOver",value:function(e,t){if("none"!=ba.GetValue(e,"owned_matchable_type")){var a=Sa.GetPointerIfNotPressingButtonAndDown(),i=ba.GetValue(e,"owned_matchable"),o=fa.GetActorByGUID(i);o&&(Ih.IsTweeningScale(o)||bb.effectPingScale(o,{})),a&&this.tryPushTileIntoChain(e)}}},{key:"onTileUp",value:function(e,t){}},{key:"tryPushTileIntoChain",value:function(e){if(!this.gameplayVals.gameplayEnded&&!this.gameplayVals.blockInput&&ba.GetValue(e,"owned_matchable_type")){var t=!1,a=null;if(this.gameplayVals.currentChain.length>0&&(a=this.gameplayVals.currentChain[this.gameplayVals.currentChain.length-1]),a){var i=Sa.GetPointerCoordinatesScaledAndAdjustedByActorLayerOffset(a);if(Phaser.Math.Distance.Between(e.displayed.x,e.displayed.y,i.x,i.y)>30)return void(t=!1)}var o=!1;null!=this.gameplayVals.acceptOnly&&"joker"!=this.gameplayVals.acceptOnly||(this.gameplayVals.acceptOnly=ba.GetValue(e,"owned_matchable_type"),o=!0),ba.GetValue(e,"owned_matchable_type")!=this.gameplayVals.acceptOnly&&"joker"!=ba.GetValue(e,"owned_matchable_type")||(t=!0);var r=!1;if(this.gameplayVals.currentChain.length>1)if(this.gameplayVals.currentChain[this.gameplayVals.currentChain.length-2]==e){var l=this.gameplayVals.currentChain.pop();Pa.ChangeAnimation(l,"idle"),this.gameplayVals.acceptOnly="joker";for(var m=0;m<this.gameplayVals.currentChain.length;m++){var $=this.gameplayVals.currentChain[m];"joker"!=ba.GetValue($,"owned_matchable_type")&&(this.gameplayVals.acceptOnly=ba.GetValue($,"owned_matchable_type"))}if(this.gameplayVals.chains.length>0){var n=this.gameplayVals.chains.pop();qa.queueEntity(n)}na.GetGameRemix().playAudio(Qa.cofniecie_tile),r=!0,o=!0}if(o&&sa.ForEachObjectInGridCallFunc(this.gameplayVals.slotsGrid,function(e){"joker"==ba.GetValue(e,"owned_matchable_type")&&this.gameplayVals.currentChain.indexOf(e)<=-1&&(this.gameplayVals.acceptOnly==aa.Fruit_Blue?Pa.ChangeAnimation(e,aa.Fruit_Blue):this.gameplayVals.acceptOnly==aa.Fruit_Green?Pa.ChangeAnimation(e,aa.Fruit_Green):this.gameplayVals.acceptOnly==aa.Fruit_Orange?Pa.ChangeAnimation(e,aa.Fruit_Orange):this.gameplayVals.acceptOnly==aa.Fruit_Pink?Pa.ChangeAnimation(e,aa.Fruit_Pink):this.gameplayVals.acceptOnly==aa.Fruit_Yellow?Pa.ChangeAnimation(e,aa.Fruit_Yellow):Pa.ChangeAnimation(e,"idle"))}.bind(this)),!r){for(var p=0;p<this.gameplayVals.currentChain.length;p++)this.gameplayVals.currentChain[p]==e&&(t=!1);if(a){var s=ba.GetValue(e,"tile_x")-ba.GetValue(a,"tile_x"),u=ba.GetValue(e,"tile_y")-ba.GetValue(a,"tile_y");s>=-1&&s<=1&&u>=-1&&u<=1||(t=!1)}if(t){if(a){var c,y=ba.GetValue(e,"tile_x")-ba.GetValue(a,"tile_x"),_=ba.GetValue(e,"tile_y")-ba.GetValue(a,"tile_y"),h=(e.displayed.x+a.displayed.x)/2,S=(e.displayed.y+a.displayed.y)/2;0==_?c=ta.ChainConnecting(h,S,aa.Lacznik_Side):0==y?c=ta.ChainConnecting(h,S,aa.Lacznik_Horizontal):(c=ta.ChainConnecting(h,S,aa.Lacznik_Skos),1==_&&ea.SetFlipY(c,!0),-1==y&&ea.SetFlipX(c,!0)),this.gameplayVals.chains.push(c)}this.gameplayVals.currentChain.push(e),"joker"==ba.GetValue(e,"owned_matchable_type")?na.GetGameRemix().playAudio(Qa.select_special):na.GetGameRemix().playAudio(Phaser.Utils.Array.GetRandom([Qa.select_tile,Qa.select_tile_02,Qa.select_tile_03,Qa.select_tile_04])),Pa.ChangeAnimation(e,"pressed")}}}}},{key:"updateAddToScore",value:function(e){this.gameplayVals.score+=e,nb.SetTextWithZeroPad(ch("alias_gameplay_text_score"),this.gameplayVals.score,6)}},{key:"onUpdate",value:function(e,t){if(bd(Bb(a.prototype),"onUpdate",this).call(this,e,t),!ra.IsRotationScreenDisplayed()){Sa.GetPointer().isDown||this.processPickedTilesLogic();var i=fa.GetActorByAliasIfExists("healthbar",!0);i&&!this.gameplayVals.gameplayEnded&&cc.IsScaledtoZero(i)&&this.onGameplayGameOver()}}},{key:"processPickedTilesLogic",value:function(){for(var e=0;e<this.gameplayVals.currentChain.length;e++)Pa.ChangeAnimation(this.gameplayVals.currentChain[e],"idle");if(sa.ForEachObjectInGridCallFunc(this.gameplayVals.slotsGrid,function(e){Pa.ChangeAnimation(e,"idle")}),this.gameplayVals.currentChain.length>1){this.gameplayVals.blockInput=!0;for(var t=0,a=0,i=0,o=0,r=this.gameplayVals.currentChain.length,l=0,m=[],$=0;$<this.gameplayVals.currentChain.length;$++)m.push(this.gameplayVals.currentChain[$]);for(var n=[];m.length>0;){var p=m.pop();n.push(p);var s=ba.GetValue(p,"owned_matchable");if(null!=s){var u=fa.GetActorByGUID(s);if("joker"==ba.GetValue(p,"owned_matchable_type")){var c=ba.GetValue(u,"type");if("bonusScore"==c&&(t+=1),"extraEnergy"==c&&(a+=1),"ligtningStorm"==c&&(i+=5)>=25&&(i=25),"generateJokers"==c&&(o+=3)>=12&&(o=12),"detonateCircular"==c)for(var y=[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}],_=ba.GetValue(p,"tile_x"),h=ba.GetValue(p,"tile_y"),S=0;S<y.length;S++){var j=sa.GetAt(this.gameplayVals.slotsGrid,_+y[S].x,h+y[S].y,!0);j&&m.push(j)}if("detonateLines"==c)for(var d=[{x:0,y:-1},{x:0,y:-2},{x:0,y:1},{x:0,y:2},{x:1,y:0},{x:2,y:0},{x:-1,y:0},{x:-2,y:0}],K=ba.GetValue(p,"tile_x"),J=ba.GetValue(p,"tile_y"),E=0;E<d.length;E++){var G=sa.GetAt(this.gameplayVals.slotsGrid,K+d[E].x,J+d[E].y,!0);G&&n.indexOf(G,0)<=-1&&(m.push(G),n.push(G))}if("lineVertical"==c)for(var A=ba.GetValue(p,"tile_x"),g=ba.GetValue(p,"tile_y"),V=-1*sa.GetHeigth(this.gameplayVals.slotsGrid);V<sa.GetHeigth(this.gameplayVals.slotsGrid);V++){var C=sa.GetAt(this.gameplayVals.slotsGrid,A,g+V,!0);C&&n.indexOf(C,0)<=-1&&(m.push(C),n.push(C))}if("lineHorizontal"==c)for(var M=ba.GetValue(p,"tile_x"),I=ba.GetValue(p,"tile_y"),v=-1*sa.GetWidth(this.gameplayVals.slotsGrid);v<sa.GetWidth(this.gameplayVals.slotsGrid);v++){var f=sa.GetAt(this.gameplayVals.slotsGrid,M+v,I,!0);f&&n.indexOf(f,0)<=-1&&(m.push(f),n.push(f))}}this.killMatchableAtSlot(p,!0),l++}}for(var T=0;T<l;T++){var w=T+1;t>=1&&(w*=3),this.updateAddToScore(w)}var F=fa.GetActorByAliasIfExists("healthbar");F&&cc.SubstractFromCurValueAndUpdateVisual(F,this.gameplayVals.howMuchToSubtractFromLives);for(var P=0;P<i;P++)this.killMatchableAtSlot(this.getSimpleMatchableTileSlot());if(a>=1&&this.increasePlayerHealth(a),r>=7){var U=Phaser.Math.Between(0,r-1);this.createRandomPowerup(this.gameplayVals.currentChain[U])}for(var b=0;b<o;b++)this.swapRandomMatchableToPowerup(this.getRandomValidPowerup(),0);this.fallTilesAndSpawnNew(),na.GetGameRemix().playAudio(Phaser.Utils.Array.GetRandom([Qa.ulozenie_1,Qa.ulozenie_3])),this.gameplayVals.emptyFields<7&&Phaser.Math.Between(0,100),this.gameplayVals.movesDone+=1,this.gameplayVals.howMuchToSubtractFromLives=Math.floor(sm+this.gameplayVals.movesDone/5),this.gameplayVals.howMuchToSubtractFromLives>=10&&(this.gameplayVals.howMuchToSubtractFromLives=10),qa.IfEntityByAliasExistsThenDispose("alias_howtoplay_generic_anim")}this.gameplayVals.blockInput=!1;for(var B=0;B<this.gameplayVals.chains.length;B++)qa.queueEntity(this.gameplayVals.chains[B]);this.gameplayVals.currentChain=[],this.gameplayVals.chains=[],this.gameplayVals.acceptOnly=null}},{key:"killMatchableAtSlot",value:function(e,t){var a=ba.GetValue(e,"owned_matchable"),i=fa.GetActorByGUID(a);t&&ta.Particle(e.displayed.x,e.displayed.y,ba.GetValue(e,"owned_matchable_type")),qa.queueEntity(i),ba.SetValue(e,"owned_matchable",null),ba.SetValue(e,"owned_matchable_type",null)}},{key:"increasePlayerHealth",value:function(e){var t=fa.GetActorByAliasIfExists("healthbar");t&&cc.AddToCurValueAndUpdateVisual(t,30*e)}},{key:"fallTilesAndSpawnNew",value:function(){for(var e=this.gameplayVals.slotsGrid,t=e.length-1;t>=0;t--)for(var a=e[t],i=0;i<a.length;i++)if(!ba.GetValue(a[i],"owned_matchable")){var o=t-1;if(o>=0){var r=a[i],l=this.gameplayVals.slotsGrid[o][i],m=1;if(!ba.GetValue(l,"owned_matchable")||"none"==ba.GetValue(l,"owned_matchable")){for(var $=o-1,n=!1;$>=0;)l=this.gameplayVals.slotsGrid[$][i],m++,ba.GetValue(l,"owned_matchable")&&"none"!=ba.GetValue(l,"owned_matchable")&&(n=!0,$=-1),$--;n||(this.rollMatchableAtTile(this.gameplayVals.slotsGrid[0][i]),l=this.gameplayVals.slotsGrid[0][i])}var p=ba.GetValue(l,"owned_matchable"),s=ba.GetValue(l,"owned_matchable_type");ba.SetValue(r,"owned_matchable",p),ba.SetValue(r,"owned_matchable_type",s),ba.SetValue(l,"owned_matchable",null),ba.SetValue(l,"owned_matchable_type",null);var u=fa.GetActorByGUID(p);bb.tweenPositionTo(u,{_x:r.displayed.x,_y:r.displayed.y,_d:150+50*m,delay:Phaser.Math.Between(0,50),ease:"Back.easeOut"})}else this.rollMatchableAtTile(this.gameplayVals.slotsGrid[0][i])}}},{key:"getSimpleMatchableTileSlot",value:function(){var e=Phaser.Math.Between(0,sa.GetWidth(this.gameplayVals.slotsGrid)-1),t=Phaser.Math.Between(1,sa.GetHeigth(this.gameplayVals.slotsGrid)-1),a=sa.GetAt(this.gameplayVals.slotsGrid,e,t),i=ba.GetValue(a,"owned_matchable"),o=ba.GetValue(a,"owned_matchable_type");return null==i||"none"==i||"joker"==o?this.getSimpleMatchableTileSlot():a}},{key:"createRandomPowerup",value:function(e){this.createJokerAtSlot(this.getRandomValidPowerup(),e)}},{key:"getRandomValidPowerup",value:function(){return Phaser.Utils.Array.GetRandom(["bonusScore","extraEnergy","generateJokers","detonateCircular","lineVertical","lineHorizontal"])}},{key:"swapRandomMatchableToPowerup",value:function(e,t){if((t+=1)>10)console.log("Failed to find ");else{var a=Phaser.Math.Between(0,sa.GetWidth(this.gameplayVals.slotsGrid)-1),i=Phaser.Math.Between(1,sa.GetHeigth(this.gameplayVals.slotsGrid)-1),o=sa.GetAt(this.gameplayVals.slotsGrid,a,i),r=ba.GetValue(o,"owned_matchable"),l=ba.GetValue(o,"owned_matchable_type");null!=r&&"none"!=r&&"joker"!=l?(qa.queueEntity(ff(r)),this.createJokerAtSlot(e,o),ta.OnJokerSwap_3(o.displayed.x,o.displayed.y)):this.swapRandomMatchableToPowerup(e,t)}}},{key:"createJokerAtSlot",value:function(e,t){console.assert(t,"createJokerAtSlot -> pSlot cant be: ",t);var a=ta.Joker(t.displayed.x,t.displayed.y,e);ba.SetValue(t,"owned_matchable",a.vals.guid),ba.SetValue(t,"owned_matchable_type","joker")}},{key:"swapRandomTileToEmpty",value:function(){var e=Phaser.Math.Between(0,sa.GetWidth(this.gameplayVals.slotsGrid)-1),t=Phaser.Math.Between(1,sa.GetHeigth(this.gameplayVals.slotsGrid)-1),a=sa.GetAt(this.gameplayVals.slotsGrid,e,t),i=ba.GetValue(a,"owned_matchable"),o=ba.GetValue(a,"owned_matchable_type");"none"!=i&&"joker"!=o?(qa.queueEntity(ff(i)),ba.SetValue(a,"owned_matchable","none"),ba.SetValue(a,"owned_matchable_type","none"),ea.SetVisible(a,!1)):this.swapRandomTileToEmpty()}},{key:"onExitInstant",value:function(){bd(Bb(a.prototype),"onExitInstant",this).call(this),fa.TriggerActionOnAllActorsInBag(nc,ha.GAMEPLAY)}},{key:"onExitDelayed",value:function(){bd(Bb(a.prototype),"onExitDelayed",this).call(this),qa.MassQueueDisposeEntities(Va.GAMEPLAY),qa.MassQueueDisposeEntities(ha.GAMEPLAY)}},{key:"hasGameplayStarted",value:function(){return this.gameplayVals.gameplayStarted}},{key:"hasGameplayEnded",value:function(){return this.gameplayVals.gameplayEnded}}]),a}();var IB=function(e){e.audioLib[bc.tap]={cfg:{volume:1}},e.audioLib[Qa.select_tile]={cfg:{volume:1}},e.audioLib[Qa.select_special]={cfg:{volume:1}},e.audioLib[Qa.ulozenie_1]={cfg:{volume:1}},e.audioLib[Qa.ulozenie_3]={cfg:{volume:1}},e.audioLib[Qa.music]={cfg:{volume:.3,loop:!0}}};var Ac;function xa(r,e,$){return e in r?Object.defineProperty(r,e,{value:$,enumerable:!0,configurable:!0,writable:!0}):r[e]=$,r}var JB={cover_title:xa({},Ka,{x:0,y:-200}),cover_logo:(Ac={},xa(Ac,Ka,{x:0,y:0}),xa(Ac,wo,{layer:[Tg]}),xa(Ac,Go,{triggerList:[{trigger:lb,properties:{dirX:0,dirY:-1}}]}),xa(Ac,bo,{triggerList:[{trigger:vb,properties:{_y:300,_d:800}}]}),xa(Ac,ro,{triggerList:[{trigger:wb,properties:{_y:300,_d:800}}]}),Ac),cover_highscore_icon:xa({},Ka,{x:5,y:5}),cover_score_panel:xa({},Ka,{x:0,y:0}),cover_score_font:xa({},Ka,{x:65,y:5}),cover_btn_play:xa({},Ka,{x:0,y:150}),gameplay_score_panel:xa({},Ka,{x:0,y:0}),gameplay_score_font:xa({},Ka,{x:65,y:5}),gameplay_score_icon:xa({},Ka,{x:5,y:5}),gameplay_htp_hand:xa({},Ka,{x:-80,y:-40}),gameover_icon:xa({},Ka,{x:0,y:-50}),gameover_big_highscore:xa({},Ka,{x:0,y:-300}),gameover_tryagain:xa({},Ka,{x:0,y:-50}),gameover_tap_to_continue:xa({},Ka,{x:0,y:250}),settings_btn_pause:xa({},Ka,{x:-80,y:5}),settings_btn_sound_toggle:xa({},Ka,{x:-5,y:5})};var KB=!0,LB="FruitySwipes_2021_05_18_5",MB="FruitySwipes_2021_05_18_1",NB="FruitySwipes",OB="fruityswipes",PB="0x93ffdc",QB={default:"arcade",arcade:{debug:!1,gravity:{y:0}}},RB=function(e){UA(r,Fr);var t=WA(r);function r(){var e;return SA(this,r),console.log("main.js->load:: Game version: "+MB),(e=t.call(this,{gameTitle:NB,folderName:OB,backgroundColour:PB,gameplayGroups:jB,skipPregame:KB,templating:JB,physicsCfg:QB,assetBundlesList:[eB.GetModuleAssetBundlesData("fruityswipes"),iB.GetModuleAssetBundlesData()],funcDoConfigureAudio:IB,funcDoEnterFromPregame:function(){la.EnterState(Sc),la.EnterState(tb),la.EnterState(eb),na.GetGameRemix().playAudio(Qa.music)},funcDoInitializeSaveData:function(){Ab.SetSaveSlot(LB),Ab.IsSaveDataExistingOnPlatform()?Ab.LoadSaveDataObject():(Ab.SetSaveDataObject({score:0}),Ab.SaveSaveDataObject())},funcDoRegisterRemixSpecificActions:function(){}})).gameplayLoop=null,e}return TA(r,[{key:"_custom_passEventOnEnterInstantCover",value:function(){lc.CoverTitle(),lc.Bmlogo(),lc.ScorePanel(),lc.Highscoreicon(),nb.SetTextWithZeroPad(lc.Scorefont(),Ab.GetDataObject().score,6),lc.BtnPlay(function(){this.gameplayLoop.onGameplayActualStart()}.bind(this))}},{key:"_custom_passEventOnEnterInstantGameplay",value:function(e){this.gameplayLoop=new HB,this.gameplayLoop.onEnter(e,e.scene)}},{key:"_custom_passEventOnUpdateGameplayState",value:function(e,t,r){this.gameplayLoop.onUpdate(t,r)}},{key:"_custom_passEventOnGameplayActualStart",value:function(){Fa.RunCommand(Qf.Name,null),rk.ButtonPause()}},{key:"_custom_passEventOnExitInstantGameplay",value:function(){this.gameplayLoop.onExitInstant()}},{key:"_custom_passEventOnExitDelayedGameplay",value:function(){this.gameplayLoop.onExitDelayed()}},{key:"_custom_passEventOnGameplayFinished",value:function(e){Fa.RunCommand(Pf.Name);var t=Ab.GetDataObject();na.GetGameRemix().getSessionData().latestGameplayScore=e.score,t.score<e.score&&(Yd().enableHigherScoreTrophy(),t.score=e.score,Ab.SaveSaveDataObject())}},{key:"_custom_passEventOnEnterInstantGameOver",value:function(){Yd().enableTapToCover(),Cd.GameOverIcon(),Cd.TryAgainSpinned(),Cd.TapToContinue(),Yd().canShowHigherScoreTrophy()&&Cd.Highscore()}},{key:"_custom_passEventOnUpdateGameOverState",value:function(e,t,r){Yd().doGameOverWantsToQuit()&&(na.GetGameRemix().playAudio(bc.tap),Fa.RunCommand(Rf.Name))}},{key:"_custom_tryCallPause",value:function(){this.gameplayLoop&&this.gameplayLoop.hasGameplayStarted()&&!this.gameplayLoop.hasGameplayEnded()?la.EnterState(gc):this.gameplayLoop&&this.gameplayLoop.hasGameplayStarted()}}]),r}();window.addEventListener("load",function(){QA.Run(RB,{klass:Sr,isKlass:!0})});return{"epB2":{}};});